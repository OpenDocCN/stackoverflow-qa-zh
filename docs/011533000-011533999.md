# StackOverflow 问答 11533000-11533999

# c# - 使用短路评估来避免索引超出范围异常是一个坏习惯吗？

> ID：11533010
> 
> 赞同：0
> 
> 时间：2012-07-18T01:15:20.707
> 
> 标签：c#, coding-style

这个问题适用于所有具有短路 AND 运算符的编程语言，而不仅仅是 C#。

问题很简单 - 使用短路评估来避免超出范围的索引异常，例如：

```
if ((x > 0) && (bar[x] == foo)) 
```

或者

```
if (((x > 0) && (x < bar.Length)) && (bar[x] == foo)) 
```

糟糕的编码风格？我知道我可以像这样嵌套循环：

```
if (x > 0)
{
    if (bar[x] == foo)
    {
    }
} 
```

但我发现它非常难以阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T01:21:05.337

我会这样说

```
if ((x > 0) && (bar[x] == foo)) 
```

是*不错的*编码风格。它可能甚至还*不错*。我肯定更`if`喜欢你描述的嵌套结构。

顺便说一句，我会减少您使用的括号数量。这两个都同样正确，至少在 C# 和大多数其他 C 派生语言中：

```
if (x > 0 && bar[x] == foo)
if (x > 0 && x < bar.Length && bar[x] == foo) 
```

了解该语言的读者（您必须在某种程度上假设这一点）将很容易理解上述短路表达式。那些读者可能会反对嵌套`if`样式，因为它占用的空间比获得正确行为所需的空间多得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:19:51.567

“糟糕的编码风格”（至少在这种情况下）是你定义的。两者都是完全有效的，这只是一个品味问题。它还取决于您在实际`if()`语句中的操作数。如果有很多比较像

```
if ((foo == bar) && (foobar == something) && ((a==b) || (c==d))) 
```

将其包装在以下方法中可能会有所帮助：

```
if (AllMyConditionsAreMet(OnSomeObject)) 
```

为了更容易阅读/理解正在发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T01:22:32.887

我认为通过将其移入自己的方法可以使其更清洁：

```
bool IsXBarValid(int x, Bar bar)
{
    return (x > 0) && (bar[x] == foo);
}

// .. then ..
if (IsXBarValid(x, bar))
{
    // etc..
} 
```

显然我不确定你是如何实现它的，所以方法名称有点奇怪，但通常这是清理这类代码的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T01:42:57.470

到目前为止，我最喜欢 simon-whitehead 的回答。

如果我不想要另一种方法，我会这样做：

```
 bool foobar = (x > 0) && (bar[x] == foo);
  if (foobar)
     // etc... 
```

我发现这些样式比原始帖子中的任何建议都更具可读性。

它可以帮助其他正在阅读代码的人（搬运工与否）。

他们阅读 foobar，并立即可以决定这是否是他们需要详细检查的代码部分，或者他们是否可以略读。

另一方面，如果他们看到一个复杂的 if 语句，内部可能存在语言技巧:-)，那么它会减慢他们的速度。

# intellij-idea - 从IDEA中的大项目中提取子项目

> ID：11533013
> 
> 赞同：0
> 
> 时间：2012-07-18T01:15:54.427
> 
> 标签：intellij-idea

我在 IDEA 中有一个*大*项目（基本上是我公司源代码的主干），但我只需要在其中一个“模块”上工作（不知道如何调用它们）。有没有一种方法可以从/在 IDEA 中导出/创建一个较小的项目，其中包含我感兴趣的主干部分？它非常独立，应该只依赖于主干中的 1 或 2 个其他项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:33:50.720

没有自动选项可以提取项目的一部分。您应该从现有源创建一个新项目，它将仅包含所需的模块，其内容根设置为较大项目的部分以及它们之间配置的[依赖](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)关系。

# php - 循环前的php foreach限制

> ID：11533014
> 
> 赞同：0
> 
> 时间：2012-07-18T01:15:56.017
> 
> 标签：php, arrays, foreach

我得到了一组新闻项目参数，我循环通过这些参数并得到结果

在我执行 foreach 之前，有什么方法可以循环特定项目的数组，

我只想循环通过在 foreach 之前获取的特定类别的帖子

```
$get_cats  = $k2tools_params->get('cloud_category'); 
```

返回允许的类别数组

比我有

```
 <?php foreach($this->items as $key=> $item): >
          <?php if (in_array($item->category->id,$get_cats)){ ?> 
              // do something 
          <?php} ?>

        <?php endforeach ?>
<?php echo $this->pagination->getPagesLinks(); ?> 
```

这工作正常，但我遇到的问题是分页从 18 个项目`$this->items`

我有 3 页的结果，但在我的类别限制的 foreach 中，我只有 2 个项目，这导致额外的 2 个空页。

所以我必须在 foreach 之前限制类别，或者`$this->items`先循环槽

谢谢你的帮助，希望你能理解。

**不要介意将 html 与 php 分开的 php 标签，这是 joomla 模板**

我有点想做的是 foreach 类别 id 在数组中，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:29:05.730

为了正确使用分页，您必须找到一些方法来修改原始 SQL 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:21:41.060

```
foreach(array_keys($items, $get_cats)) {
    // do_something
} 
```

or try to use [`array_search`](http://www.php.net/manual/en/function.array-search.php)

# delphi - How can I get flash working with Chromium?

> ID：11533017
> 
> 赞同：3
> 
> 时间：2012-07-18T01:16:25.933
> 
> 标签：delphi, chromium

I have installed Chromium for Delphi, but there does not appear to be out of the box flash support for it, as mentioned in this post:

[How to display the latest news from a web news feed in delphi firemonkey application?](https://stackoverflow.com/questions/10708186/how-to-display-the-latest-news-from-a-web-news-feed-in-delphi-firemonkey-applica)

How can one enable flash for Chromium?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T15:53:40.747

有点旧，对于 dcef1，你应该用谷歌搜索 gcswf32.dll。它是旧的 chrome flash 播放器插件。对于 dcef3，我认为您需要在系统上安装闪存，无法嵌入 dll，但我可能错了。

# php - Sort array according to value of key

> ID：11533027
> 
> 赞同：0
> 
> 时间：2012-07-18T01:17:34.597
> 
> 标签：php

I have one array which have the right order of the keys, For example,

```
$array_keysorder=([0]=>"Fire",[1]=>"Sky",[2]=>"Third")

//Array i want to sort,after appending the order is messed up
$tosortarray=(['Sky']=>array(array()...),['Third']=>array(),['Fire']=>array())

//This is how i want the final array to look like 
$Final=(['Fire']=>array(), ['Sky']=>array(array()...),['Third']=>array()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:26:14.583

重建阵列呢？

编辑..我添加了一些评论..

```
<?php
$array_keysorder[] = "Fire";
$array_keysorder[] = "Sky";
$array_keysorder[] = "Third";

print_r($array_keysorder);

$bad_array[Sky] = "data1";
$bad_array[Third] = "data2";
$bad_array[Fire] = "data3";

echo "<br>";
print_r($bad_array);

//This count cycles through the sort order, 0 = Fire, 1 = Sky, etc.
$key = 0;

//Cycle through array. $row isn't used.
foreach($bad_array as $row)
{
    //$temp_val will store the key name ie "Fire".
    $temp_val = $array_keysorder[$key];
    //Create a organized array with the correct order of the keys
    $good_array[$temp_val] = $bad_array[$temp_val];
    //Increase the key to the next one.
    $key++;
}

echo "<br>";
print_r($good_array);
?> 
```

# swing - 在 swing.event.ListSelectionChanged 中键入擦除

> ID：11533028
> 
> 赞同：0
> 
> 时间：2012-07-18T01:17:36.687
> 
> 标签：swing, scala, pattern-matching, type-erasure

为什么我会使用以下 Scala Swing 代码收到关于类型擦除的模式匹配器警告：

```
import scala.swing._

object Test extends ListView(Seq(1, 2, 3)) {
  listenTo(selection)
  reactions += {
    case event.ListSelectionChanged(_, range, _) => println(range)
  }
} 
```

警告是：

```
warning: non variable type-argument A in type pattern
scala.swing.event.ListSelectionChanged[A] is unchecked 
since it is eliminated by erasure
             case event.ListSelectionChanged(_, range, _) => println(range)
                                            ^ 
```

这只是 Scala Swing 的可怕设计，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T10:19:51.220

这个问题在新的 Scala 2.10 模式匹配器中消失了。

# python - 计算伽玛指数的库？（最好用 R 或 Python，但任何语言都可以）

> ID：11533029
> 
> 赞同：4
> 
> 时间：2012-07-18T01:17:47.030
> 
> 标签：python, r, matlab, physics, scientific-computing

在物理学中——尤其是医学物理学中——伽马指数是比较来自两个粒子探测器的数据的标准。更抽象地说，伽玛索引采用两个 2D 数组（假设是 array1 和 array2）并将 array1 的每个元素与 array2 的空间附近元素进行比较。

有数百篇学术论文在其分析部分使用了伽马指数。这些论文似乎没有提到他们使用什么工具/库来计算伽马指数。作者有可能实现他们自己的伽马指数计算（这并不难）。但是，我猜有用于计算 gamma 指数的库/扩展/工具。

任何人都可以建议在 R 或 Python 中使用 gamma 索引库吗？（如果没有现成的 Python 或 R 语言，其他语言也可以。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-25T17:45:00.440

也许有点晚了，但我的贡献：

[https://gist.github.com/janpipek/334c2533b87cd75c3f59](https://gist.github.com/janpipek/334c2533b87cd75c3f59)

它是用 Python 编写的。与solvingPuzzles 的答案相比，这些方法接受任何维度的矩阵（只要它们相同）。包括两种方法：一种为每个点计算 gamma 指数（有点长），另一种是自动排除不满足 dta 标准的点的优化版本。

希望对后来者有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-06T20:17:17.413

编辑[2019]：

[`pymedphys`库](https://dos.pymedphys.com)中现在提供改进的 1D、2D 和 3D Gamma 测定。它基于[https://doi.org/10.1118/1.2721657](https://doi.org/10.1118/1.2721657)中描述的实现。要使用它，请执行以下操作：

```
pip install numpy scipy pymedphys==0.16.3 pydicom==1.3.0 
```

那么示例用法可以是这样的：

```
import pydicom
import pymedphys

reference_filepath = pymedphys.data_path("original_dose_beam_4.dcm")
evaluation_filepath = pymedphys.data_path("logfile_dose_beam_4.dcm")

reference = pydicom.read_file(str(reference_filepath), force=True)
evaluation = pydicom.read_file(str(evaluation_filepath), force=True)

axes_reference, dose_reference = pymedphys.dicom.zyx_and_dose_from_dataset(reference)
axes_evaluation, dose_evaluation = pymedphys.dicom.zyx_and_dose_from_dataset(evaluation)

gamma_options = {
    'dose_percent_threshold': 1,  # This is a bit overkill here at 1%/1mm
    'distance_mm_threshold': 1,
    'lower_percent_dose_cutoff': 20,
    'interp_fraction': 10,  # Should be 10 or more, see the paper referenced above
    'max_gamma': 2,
    'random_subset': None,  # Can be used to get quick pass rates
    'local_gamma': True,  # Change to false for global gamma
    'ram_available': 2**29  # 1/2 GB
}

gamma = pymedphys.gamma(
    axes_reference, dose_reference, 
    axes_evaluation, dose_evaluation, 
    **gamma_options) 
```

* * *

旧答案：

有一个图书馆`npgamma`。可以使用 .pypi 从 pypi 下载`pip install npgamma`。

有关示例，请参阅[自述文件。](https://github.com/SimonBiggs/npgamma/blob/master/README.md)

基本用法是：

```
from npgamma import calc_gamma

...

gamma = calc_gamma(
    coords_reference, dose_reference,
    coords_evaluation, dose_evaluation,
    distance_threshold, dose_threshold) 
```

其中`coords_reference`和`coords_evalution`定义为 3D 的 (y, x, z)，2D 的 (y, x)。

重要的是，此方法在参考点之间插入到用户定义的步长（默认为距离阈值的 1/10）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T20:42:54.670

[我在本论文](http://lup.lub.lu.se/luur/download?func=downloadFile&recordOId=2157079&fileOId=2157392&ei=8v0OUMmEOObciQKe74GQAw&usg=AFQjCNHasnzblr2ERawjn5gciGfdSxTDWw&sig2=24WCbX6o4kjKeFO9iu3WFw)的附录 A 中找到了 2D 伽马索引的基本 MATLAB 实现。

我从论文中复制/粘贴了以下代码，并进行了一些简化以提高可读性。我与作者交谈并确认我的代码版本（如下）是正确的。最近，我一直在将很快发布的医学物理研究的分析部分使用此代码。

输入`A1`和`A2`是二维数组（实际上是剂量图或通量图）。我们让`A1`作为参考数据，并且`A2`是正在评估的数据。如果我们使用典型的 2%、2mm 接受标准，那么我们将距离一致性设置为`DTA=2mm`，我们将剂量阈值 设置`dosed=0.02`为 2%。

在这个简单的实现中，我们假设数组索引以 1mm 为增量间隔。如果您的数据不使用 1 毫米增量，则`dosed`相应地缩放您的值（例如，如果您的`A1`和`A2`以 0.5 毫米为增量，则用于`DTA=4`获得 2 毫米标准）。

输出`G`是一个 2D 伽马值数组。

```
function G = gamma2d (A1, A2, DTA, dosed)
    size1=size (A1) ;
    size2=size (A2) ;
    dosed = dosed *  max(A1 ( : ) ) ; %scale dosed as a percent of the maximum dose

    G=zeros ( size1 ) ; %this will be the output
    Ga=zeros ( size1 ) ;
    if size1 == size2
        for i = 1 : size1( 1 )
            for j = 1 : size1( 2 )
                for k = 1 : size1( 1 )
                    for l = 1 : size1( 2 )
                        r2 = ( i - k )^2 + (j - l) ^2 ; %distance (radius) squared
                        d2 = ( A1( i , j ) - A2( k , l ) )^2 ; %difference squared
                        Ga( k , l ) = sqrt(r2 / (DTA^2) + d2/ dosed ^ 2);
                    end
                end
                G( i , j )=min(min(Ga)) ;
            end
        end
    else
        fprintf=('matrices A1 and A2 are do not share the same dimensions! \n')
    end
end 
```

要查看数学符号中 gamma 索引的解释，我建议查看[此博客文章](http://medphys365.blogspot.com/2012/05/comparing-dose-distributions-gamma-test.html)。

# jquery - How to position jQuery validation messages when groups are involved?

> ID：11533041
> 
> 赞同：0
> 
> 时间：2012-07-18T01:19:10.890
> 
> 标签：jquery, jquery-plugins, validation

I've got a form where I'm using jQuery validation on its elements. The form contains two text fields and a set of checkboxes. The relevant part of my code looks like this:

```
$.validator.addMethod('require-one', function (value) {
    return $('.require-one:checked').size() > 0;
}, 'Who should see your question?');

var checkboxes = $('.require-one');
var checkbox_names = $.map(checkboxes, function(e,i) { return $(e).attr('name')}).join(' ');

$('FORM#node-form').validate({
    groups: { checks: checkbox_names },
    errorPlacement: function(error, element)
    {
        if (element.attr('type') == 'checkbox') {
            error.insertAfter('#user_role_buttons > div > label');
        }
        else {
            error.insertAfter(element);
        }
    }
}); 
```

The new method and "checkboxes" stuff is required for the checkboxes to be handled as a group, and that's actually working correctly, including the placement of the error message inside that #user_role_buttons thing.

My problem/question is that I can't find any way to set the placement of error messages for the two text elements. The validation is working correctly for those items; I just can't specify their position. In particular, errors involving those items aren't showing up in the errorPlacement clause of the validate handler: If I put a console.log(element) statement inside the errorPlacement's function to see what's going on, the only thing that shows up is the error involving the checkboxes (assuming there is one). The messages for the text items are getting placed somewhere semi-reasonable, but not where I want them.

I must be missing something; can anybody see what it is?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:59:12.440

好的，我不确定这是否“正确”，但我有一些工作。在这一点上，我的信念是，一旦你为“组”定义了一些东西，你就必须将你想要验证的所有东西定义为一个组，即使它只是一个东西。所以上述代码的工作版本如下所示：

```
$.validator.addMethod('require-one', function (value) 
                                                { return $('.require-one:checked').length > 0; }, 
                                                'Who should see your question?'
                              );
var checkboxes = $('.require-one');
var checkbox_names = $.map(checkboxes, function(e,i) { return $(e).attr('name')}).join(' ');
$('FORM#node-form').validate({
                        groups: { 
                            checks: checkbox_names,
                            title: 'title',
                            body: 'body',
                            },
                        errorPlacement: function(error, element) {
                                 if (element.attr('type') == 'checkbox') {
                                    error.insertAfter('#user_role_buttons > div > label');
                                 }
                                 else if (element.attr('type') == 'text') {
                                    error.insertAfter('#edit-title-wrapper > label');
                                 }
                                 else if (element.attr('name') == 'body') {
                                    error.insertAfter('#edit-body-wrapper > label');
                                 }
                        }         
            }); 
```

也就是说，我将“标题”和“正文”定义为组，每个组都指向字段的“名称”。然后这些出现在 errorPlacement 处理程序的调用中，我可以测试它们的存在并按照我想要的方式分配定位。和我预期的不太一样，但我想事后它有点道理......

# windows - GIT central repository on Windows network share

> ID：11533042
> 
> 赞同：4
> 
> 时间：2012-07-18T01:19:13.560
> 
> 标签：windows, git, version-control, permissions, network-share

Our company is looking at setting up a central GIT repository. As we are using Windows, we've been looking at using a network share solution, based on the following articles [here](http://www.jedi.be/blog/2009/05/06/8-ways-to-share-your-git-repository/) and [here](http://freshbrewedcode.com/derekgreer/2012/02/19/hosting-a-git-repository-in-windows/).

However, after thinking about this I have some questions. (Warning - I'm a noob at GIT)

1.  It seems that this solution might allow developers to cause problems with the repo, by allowing them to map to the drive and play with the files (outside of the GIT client). Is there a way to prevent this? Or do I misunderstand something here?
2.  If your using network shares, does the GIT installation on the server actually have a purpose? Or is it just clients pushing back and forth from the share.
3.  Any advice on a best solution would be appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T09:27:15.357

What worked best before was an install of gitolite on a linux vm. This way you have many admin options. I highly recommend gitolite.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T01:49:32.310

使用 Windows 共享是正确的（虽然很简单），但您牺牲了一些功能.. 权限和服务器端挂钩浮现在脑海。

这是另一个可能有帮助的问题：[How to setup and clone a remote git repo on Windows?](https://stackoverflow.com/questions/9308952/how-to-setup-and-clone-a-remote-git-repo-on-windows)

或者这样：[在 Windows 上使用 msysgit 设置 Git 服务器](https://stackoverflow.com/questions/1482824/setup-a-git-server-with-msysgit-on-windows)

# asp.net-mvc-3 - 覆盖 mvc 3 区域中的 appsetting 值

> ID：11533045
> 
> 赞同：1
> 
> 时间：2012-07-18T01:19:37.050
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

我有appsetting

```
<add key="ClientValidationEnabled" value="false" />
<add key="UnobtrusiveJavaScriptEnabled" value="false"  /> 
```

在根配置文件中。

我想在区域部分覆盖以将值设置为 true。现在模型验证上的必需属性仍然不进行客户端验证，因为标志仍然设置为 false

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:34:32.000

在视图中，您可以使用该`Html`属性将它们设置为 true。

```
@Html.ClientValidationEnabled = true;
@Html.UnobtrusiveJavaScriptEnabled = true; 
```

在区域级别，我认为您可以尝试通过在相应文件夹中创建一个简单的 web.config 并将这两个覆盖为 true。

# javascript - JQuery Ajax Binding

> ID：11533049
> 
> 赞同：0
> 
> 时间：2012-07-18T01:20:05.657
> 
> 标签：javascript, jquery

Below is the simple code that should display Ajax loading animation when form is submitted:

```
var init = function() {
    $("form").bind('ajax:beforeSend', function() {
        $("#comments_loading").show();
    });

    $("form").bind('ajax:complete', function() {
        $("#comments_loading").hide();
    });
};

$(document).load(init); 
```

It's purpose is to display the loading animation on Ajax request. It works perfectly, but... only for the first form submit!!! Any suggestions why/how can this be addressed can be much appreciated.

Thanks a lot.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:21:32.037

Use jquery `.on` instead. Same syntax, different method name:

```
$("form").on('ajax:complete', function() {
    $("#comments_loading").hide();
}); 
```

Because I am assuming that your ajax loaded form is not the exact same element as your original form

# javascript - 谷歌地图集群 IE8 问题

> ID：11533051
> 
> 赞同：0
> 
> 时间：2012-07-18T01:20:35.570
> 
> 标签：javascript, google-maps, internet-explorer-8

下面的代码在 Firefox 和 IE9 上运行良好，但在 IE8 上更新标记时出现问题。我收到“SCRIPT16389：未指定的错误。main.js，第 20 行字符 313”，并且一旦创建的标记不会使用新的数据集进行更新

我的 newdata.json 格式是

```
 {
    "points": [
        {
            "lat": "-28.0000",
            "long": "133.1500",
            "id": 0
        },
        {
            "lat": "-28.4710",
            "long": "153.3443",
            "id": 1
        }
    ]
} 
```

下面是获取 json 并使用聚类显示点的脚本

```
var map=null;
var markersArray = [];
var markerCluster= null;
google.load('maps', '3', {
        other_params: 'sensor=true'
});
google.setOnLoadCallback(initialize);

function initialize() {
    var mapcentre = new google.maps.LatLng(-29,135);
    var mapOptions = {
        zoom: 5,
        center: mapcentre,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map'), mapOptions);
    startTimer();
}

function startTimer(){
    setInterval(function() {
        deleteOverlays();//should delete any existing point and clear the cluster
        addMarker();
    },3000);
}

function addMarker() {
        $.ajax({
            type: "GET",
            url: "newdata.json",
            async: false,
            dataType: "json",
            success: function(data){
                for (var i = 0, dataPoint; dataPoint = data.points[i]; i++) {
                    var latLng = new google.maps.LatLng(dataPoint.lat,dataPoint.long);
                    var marker = new google.maps.Marker({
                            position: latLng
                    });
                    markersArray.push(marker);
                }           

                markerCluster = new MarkerClusterer(map, markersArray);
            } 

        });
}

// Deletes all markers in the array by removing references to them
function deleteOverlays() {
  if (markersArray.length > 0) {
    for (i in markersArray) {
      markersArray[i].setMap(null);
    }
    markersArray.length = 0;
  }
  if(markerCluster!= null) {
       markerCluster.clearMarkers();
  }
} 
```

在 IE8 上，地图加载正常，初始数据显示正常，但新数据没有更新，所以我猜 deleteOverlays 有问题？

以上示例基于[http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/advanced_example.html?compiled](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/examples/advanced_example.html?compiled)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:38:59.970

一件非常错误的事情是 for/in 循环用于对象而不是数组。我一直讨厌 IE，但现在越来越多的时候，当我希望其他人都这样做时，它似乎会被打破。它可能会打破这一点。在这些花哨的新 JIT 年轻的 Whippersnapper 浏览器中往往会发生的事情是，它们会击中所有的键，而且还会击中所有的数组属性，这很愚蠢，IMO。这是一种轻量级且更有效的遍历数组的方法（请记住它是倒退的）：

```
var i = markersArray.length
while(i--){
    markersArray[i].setMap(null);
} 
```

如果不是这个，请检查 HTML。如果您破坏了 HTML，其他浏览器可能足够聪明，可以弄清楚如何将其拼凑在一起（同样，IMO 太聪明了），而 IE8 将像金丝雀一样在曼哈顿项目的零基础上踢水桶。

不，真的，停止在数组上使用 for/in。即使它有效，它也可能是一团糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:19:03.943

添加 cache:false，触发 IE8 始终获取最新的 json 并按预期更新标记。

```
 function addMarker() {
    $.ajax({
        type: "GET",
        url: "newdata.json",
        async: false,
        cache: false,
        dataType: "json",
        success: function(data){
            for (var i = 0, dataPoint; dataPoint = data.points[i]; i++) {
                var latLng = new google.maps.LatLng(dataPoint.lat,dataPoint.long);
                var marker = new google.maps.Marker({
                        position: latLng
                });
                markersArray.push(marker);
            }           

            markerCluster = new MarkerClusterer(map, markersArray);
        } 

    }); 
```

}

# android - How to inflate a layout?

> ID：11533055
> 
> 赞同：0
> 
> 时间：2012-07-18T01:20:53.673
> 
> 标签：android, android-layout

I've tabs as activities. In one of the tabs I have a search dialog. When I inflate the search result my tabs disappear. How can I inflate the result while preserving the tabs?

Here's how I inflate the result:

```
LinearLayout layout = (LinearLayout) findViewById(R.id.quick_search);

if(data==null) {

    LinearLayout empty = (LinearLayout) mInflater.inflate(R.layout.empty, null);

    layout.addView(empty);

}
else {

    LinearLayout workRequest = (LinearLayout) mInflater.inflate(R.layout.quick_search, null);

    layout.addView(workRequest);
} 
```

Actually I want to display the searched result in place of `LinearLayout` 'quick_search' and make sure that the view above 'quick_search' is not lost. My current method inflates the result to occupy the whole screen. How can I avoid that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:43:38.693

请参阅以下链接

[https://stackoverflow.com/a/2336047/1441666](https://stackoverflow.com/a/2336047/1441666)

```
RelativeLayout item = (RelativeLayout)findViewById(R.id.item);
View child = getLayoutInflater().inflate(R.layout.child);
item.addView(child); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:33:06.347

如果`quick_search`或`empty`具有`layout_width`和/或`layout_height`设置为的布局属性`match_parent`，那么当您对它们进行充气时，它们将占据整个屏幕。将它们设置为`wrap_content`或某个固定值以避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T01:58:59.523

您需要在要更改 Activity 的选项卡中的 ActivityGroup。如果您继续创建一个新的 Activity 并显示它，您的选项卡布局将不再可见。看到这个：[http ://united-coders.com/nico-heid/use-android-activitygroup-within-tabhost-to-show-different-activity](http://united-coders.com/nico-heid/use-android-activitygroup-within-tabhost-to-show-different-activity)

# objective-c - 负责 CWInterface 通知的“系统套接字”的 OSX 权利？

> ID：11533057
> 
> 赞同：2
> 
> 时间：2012-07-18T01:20:58.840
> 
> 标签：objective-c, sandbox, nsnotification, entitlements, corewlan

当我像这样注册 CoreWLAN 通知（带有保留的界面）时：

```
 [[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(recieveNetworkNotificationAndRedirectToMainThread:) 
                                             name:CWSSIDDidChangeNotification 
                                           object:nil]; 
```

只有当我***禁用***所有权利时我才会收到通知。所有默认权利都不允许我接收此（或其他 CoreWLAN）通知。

有任何想法吗？

10.7.4

* * *

**编辑1：**

[权利参考页面](https://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/EnablingAppSandbox/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW1)没有提供任何帮助。

* * *

**编辑2：**

伪造通知工作正常：

```
 [[NSNotificationCenter defaultCenter] 
 postNotificationName:CWSSIDDidChangeNotification 
 object:self]; 
```

并且也没有收到任何[其他 CoreWLAN 通知。](https://developer.apple.com/library/mac/#documentation/CoreWLAN/Reference/CoreWLANConstants_header_reference/Reference/reference.html)

我确信这是我缺少的一个简单的权利......这是带有 Growl 临时异常的权利文件（删除临时异常也没有效果）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.security.app-sandbox</key>
    <true/>
    <key>com.apple.security.device.usb</key>
    <true/>
    <key>com.apple.security.files.user-selected.read-only</key>
    <true/>
    <key>com.apple.security.network.client</key>
    <true/>
    <key>com.apple.security.network.server</key>
    <true/>
    <key>com.apple.security.temporary-exception.apple-events</key>
    <string>com.Growl.GrowlHelperApp</string>
    <key>com.apple.security.temporary-exception.mach-lookup.global-name</key>
    <string>GrowlApplicationBridgePathway</string>
</dict>
</plist> 
```

* * *

**编辑3：**

使用旧的 k 前缀通知名称为 10.6 编译也无效。

* * *

**编辑4：**

来自日志的更多信息：

> AppName (39009) 拒绝系统套接字
> 
> 进程：AppName [39009] 路径：
> /Users/username/Library/Developer/Xcode/DerivedData/AppName-fnxrpqnodsouovcaxgiocvnfpqor/Build/Products/Release/AppName/Contents/MacOS/AppName 加载地址：0x10d23f000 标识符：AppName 版本：
> ??? (???) 代码类型：X86-64（本机）父进程：debugserver [39007]
> 
> 日期/时间：2012-07-20 13:17:11.851 -0700 操作系统版本：Mac OS X 10.7.4 (11E2705) 报告版本：7
> 
> 回溯：0 libsystem_kernel.dylib 0x00007fff98704e76插座+ 10 1 CoreWLAN 0x00007fff951f4a6f Apple80211EventMonitoringInit2 + 53 2 CoreWLAN
> 0x00007fff951e6dc4 - [CWInterface initWithInterfaceName：] + 1358 3
> CoreWLAN 0x00007fff951e412d + [CWInterface interfaceWithName：] + 52 4 CoreWLAN
> 0x00007fff951e41a8 + [CWInterface接口] + 98

* * *

**编辑5：**

在 sandboxd 中找到[了拒绝 system-socket 的参考](http://reverse.put.as/wp-content/uploads/2011/09/Apple-Sandbox-Guide-v0.1.pdf)，但还没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:48:30.673

我可以使用 hardwaregrowler 中的 networknotifier 代码通过沙盒化的应用程序获取 SSID 更改和更新 - 我认为是因为它正在寻找特定的通知。

[http://code.google.com/p/growl/source/browse/Extras/HardwareGrowler/?name=default](http://code.google.com/p/growl/source/browse/Extras/HardwareGrowler/?name=default)

一旦我收到更改通知：

```
if(wif==nil){
    wif = [CWInterface interface];
    [wif retain];
}
if(!wif.serviceActive){
    skip=TRUE;
}
if(wif.ssid==nil){
    skip=TRUE;
}
if(!skip)
if(wif){
    NSLog(@"We are on the WiFi network: %@",wif.ssid);
} 
```

# regex - Flash AS3 算大写字母吗？

> ID：11533059
> 
> 赞同：1
> 
> 时间：2012-07-18T01:21:21.757
> 
> 标签：regex, actionscript-3, flash

如何使用 flash as3 计算字符串中大写字母的数量？

例如

```
var thestring = "This is The String"; 
```

应该返回 int 3

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T07:14:52.843

```
// Starting string.
var thestring:String = "This is The String";

// Match all capital letters and check the length of the returned match array.
var caps:int = thestring.match(/[A-Z]/g).length;
trace(caps); // 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T13:47:38.300

解决此问题的一种方法是将字符串转换为小写并计算受影响的字符。这意味着您不必指定要包含在“大写字母”类别中的字符，这并非易事。此方法支持重音字符，例如 É。

```
// Starting string.
var theString:String = "'Ö' is actually the Swedish word for 'island'";

var lowerCase : String = theString.toLowerCase();
var upperCount : int = 0;

for (var i:int = 0; i < theString.length; i++) {
    if (theString.charAt(i) != lowerCase.charAt(i)) {
        upperCount++;
    }
}

trace(upperCount); // prints 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T01:51:15.710

字符串中的每个字母都有一个与该字母对应的值：

```
var myString:String = "azAZ";
trace(myString.charCodeAt(0));
trace(myString.charCodeAt(1));
trace(myString.charCodeAt(2));
trace(myString.charCodeAt(3));

// Output is 97, 122, 65, 90 
```

name.charCodeAt(x) 返回字符串中位置处字母的代码，从 0 开始。

从这个输出我们知道 a - z 的值范围是 97 到 122，我们也知道 A - Z 的值范围是 65 - 90。

有了这个，我们现在可以创建一个 For 循环来查找大写字母：

```
var myString:String = "This is The String";
var tally:int = 0;

for (var i:int = 0; i < myString.length; i++)
{
    if (myString.charCodeAt(i) >= 65 && myString.charCodeAt(i) <= 95)
    {
        tally += 1;
    }
}

trace(tally);
// Output is 3. 
```

变量“tally”用于跟踪找到的大写字母的数量。在 For 循环中，我们正在查看它正在分析的当前字母的值是否在值 65 和 90 之间。如果是，它会将 1 加到计数中，然后在 For 循环结束时跟踪总数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T22:50:25.217

为什么要简洁？我说，处理能力是被使用的。所以：

```
const VALUE_0:uint = 0;
const VALUE_1:uint = 1;

var ltrs:String = "This is JUST some random TexT.  How many Caps?";

var cnt:int = 0;

for(var i:int = 0; i < ltrs.length; i++){
    cnt += processLetter(ltrs.substr(i,1));
}

trace("Total capital letters: " + cnt);

function processLetter(char:String):int{
    var asc:int = char.charCodeAt(0);
    if(asc >= Keyboard.A && asc <= Keyboard.Z){
        return VALUE_1;
    }
    return VALUE_0;
}

// Heh heh! 
```

# c++ - 将字符串中的日期转换为 FILETIME

> ID：11533061
> 
> 赞同：0
> 
> 时间：2012-07-18T01:21:35.597
> 
> 标签：c++, winapi

我有一个输入 .txt 文件，其中包含一个日期。日期格式为 DDMONYY，如 08JUN98 或 16NOV05。我需要将此日期与文件的创建日期进行比较，看看哪个更早。

FILETIME 似乎是合适的形式，特别是因为有一个 CompareFileTime 函数。但是，我在将日期转换为文件时间时遇到问题。

我可以从文件中提取日期并将其转换为数字（第 1-31 天、第 1-12 个月、1900-20 年等等），所以我不需要帮助，但无论如何都可以评论它。

真正的问题是我无法弄清楚如何将这些值转换为 FILETIME 格式。现在，我将它们作为三个不同的字符串（或 int's，如果这有助于更多）一个用于日、月和年。如果你能帮助我从字符串跳转到 FILETIME，那就太好了。

或者，如果我在研究过程中错过了一种完全更好的方法，请随时提出建议。

如果你愿意，我可以发布我所拥有的，但我认为它不会有帮助，因为它只会到达字符串/整数。

* * *

如果它更清楚，我在我的变量中的值，对于 2002 年 5 月 3 日，将类似于

```
string day = "03";
string month ="5";
string year = "2002;
int dayint = 3;
int monthint = 5;
int yearint = 2002; 
```

我需要一种将其转换为 FILETIME 的方法

谢谢一堆。

* * *

编辑：

我不确定如何填充`SYSTEMTIME`结构，甚至不确定如何针对不同的时间系统进行填充。所以我想这更多是我的问题。

我还应该提到我只需要天数的准确性。小时和任何更小的东西都不是我真正关心的。

* * *

编辑2：

我一定没有尝试给出`SYSTEMTIME`int 值，因为这似乎有效。但是，当我尝试将该系统时间转换为文件时间时，我遇到了问题。它指出“错误：不存在从“SYSTEMTIME”到“const SYSTEMTIME *”的合适转换”。我不确定如何解决这个问题，因为如果我定义 systime 变量，因为`const SYSTEMTIME`我无法为其赋值。

这是相关代码，如果有帮助

```
SYSTEMTIME systime;
LPFILETIME ftime1;
LPFILETIME ftime2;
int dayint=6;
int monthint=12;
int yearint=1989;

systime.wDay = dayint;
systime.wMonth = monthint;
//and so on for year, hour, etc. 
SystemTimeToFileTime(systime,ftime1);     //This is where the aforementioned error occurs
GetFileTime(filename, NULL, NULL, ftime2);   //I'm also not sure about this line... feel free to critique it. I'm only interested in the last written time so I put NULL for the other times... When I check the values for this (in SYSTEMTIME) it only returns 52428, so I don't think this line is working correctly...
CompareFileTime(ftime1,ftime2); 
```

当然，日、月、年的值并没有硬编码在实际代码中。

* * *

编辑3：

我手头不好......

我会尝试解决这个问题....感谢您的帮助 Ben Voigt 如果我不能得到它，我想我会回来的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T01:25:36.100

您可以填写一个`SYSTEMTIME`结构，然后调用[`SystemTimeToFileTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724948.aspx)

您可能想在`LocalFileTimeToFileTime`之后使用，具体取决于您是要指定 UTC 时间还是本地时间。

# bash - 从字符串中提取模式

> ID：11533063
> 
> 赞同：10
> 
> 时间：2012-07-18T01:21:45.907
> 
> 标签：bash

在 bash 脚本中，从字符串中提取文本模式的简单方法是什么？

例如，我想`X`在字符串末尾提取后跟 2 个数字？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-18T01:30:28.357

`=~`当您使用[双方括号](http://mywiki.wooledge.org/BashFAQ/031)时，有一个漂亮的正则表达式运算符。捕获的组在`$BASH_REMATCH`阵列中可用。

```
if [[ $STRING =~ (X[0-9]{2})$ ]]; then
    echo "matched part is ${BASH_REMATCH[1]}"
fi 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-18T04:51:15.447

让我们将您的输入作为

**输入.txt**

```
ASD123
GHG11D3456
FFSD11dfGH
FF87SD54HJ 
```

我想找到的模式是**“SD[digit][digit]”**

**代码**

> grep -o 'SD[0-9][0-9]' Input.txt

**输出**

```
SD12
SD11
SD54 
```

如果你想在脚本中使用它......那么你可以在变量/数组中分配上面的代码......这取决于你的需要。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T01:28:03.300

```
$ foo="abcX23"
$ echo "$(echo "$foo" | sed 's/.*\(X[0-9][0-9]\)$/\1/')"
X23 
```

或者

```
if [[ "$foo" =~ X[0-9][0-9]$ ]]; then
  echo "${foo:$((${#foo}-3))}"
fi 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-18T01:34:37.020

您还可以使用参数扩展：

```
V="abcX23"
PREFIX=${V%%X[0-9][0-9]} # abc
SUFFIX=${V:${#PREFIX}}   # X23 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-15T21:26:18.537

我需要从这个字符串中提取主机端口： NIC 1 Rule(0): name = guestsh, protocol = tcp, host ip = , host port = 2222, guest ip = , guest port = 22

该字符串是通过使用获得的： vboxmanage showvminfo Mojave | grep 'host port'，我的意思是被过滤了，我需要提取主机端口中的任何数字；在这种情况下是 2222 但它可以不同。

# php - simplexml_load_string 无法检索值

> ID：11533069
> 
> 赞同：0
> 
> 时间：2012-07-18T01:22:33.380
> 
> 标签：php, xml, soap, simplexml

我正在尝试获取 ResponseId 和 MAP_IMAGE_ZOOM1000 中的值，但我收到来自 var_dump 的空响应。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org   /soap/envelope/">
<soapenv:Header xmlns:get="http://tnb.com.my/CGIS/D/getcustareasnapshotpro"  xmlns:bsm="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:cgis="http://tnb.com.my/CGIS/D/cgis_cmccustomermgnt"/>
<soapenv:Body xmlns:get="http://tnb.com.my/CGIS/D/getcustareasnapshotpro" xmlns:bsm="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:cgis="http://tnb.com.my/CGIS/D/cgis_cmccustomermgnt">
<get1:GetCustAreaSnapshotResponseParam xmlns:get1="http://tnb.com.my/CGIS/D/getcustareasnapshotcon">
     <ResponseHdr>
        <bsm:ResponseId>gero etgero etgero etgero etgero</bsm:ResponseId>
        <bsm:ResTransactionId>123456789012345</bsm:ResTransactionId>
        <bsm:ProviderId>CGIS</bsm:ProviderId>
        <bsm:ResTimestamp>2004-02-15T02:44:14</bsm:ResTimestamp>
        <bsm:ResStatus>SUCC</bsm:ResStatus>
        <bsm:MsgCode>IM-001</bsm:MsgCode>
        <bsm:MsgDesc>Success</bsm:MsgDesc>
     </ResponseHdr>
     <ResGetCustAreaSnapshot>
        <cmc:GetCustAreaSnapshot xmlns:cmc="http://tnb.com.my/CGIS/D/cmc_customermgnt">
        <cmc:MAP_IMAGE_ZOOM1000>abc</cmc:MAP_IMAGE_ZOOM1000>
        </cmc:GetCustAreaSnapshot>
     </ResGetCustAreaSnapshot>
  </get1:GetCustAreaSnapshotResponseParam> 
```

```
$Envelope = simplexml_load_string($responseXml);

$Envelope->registerXPathNamespace('soap','http://schemas.xmlsoap.org/soap/envelope/');
$Envelope->registerXPathNamespace('bsm','http://www.tnb.com.my/CGIS/schemas/bsmfpro/');
$Envelope->registerXPathNamespace('cmc','http://tnb.com.my/CGIS/D/cgis_cmccustomermgnt/');
$Envelope->registerXPathNamespace('get','http://tnb.com.my/CGIS/D/getcustareasnapshotcon/');
$result = $Envelope->xpath('soap:Envelope/soap:Body/get:GetCustAreaSnapshotResponseParam/ResponseHdr/bsm:ResponseId');

var_dump($result);

die; 
```

任何帮助将非常感激。谢谢你 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:53:53.113

由于某种原因，最后一个`ResponseId`对我不起作用。

但是，我“作弊”了，我[可以选择第一个孩子](http://codepad.viper-7.com/EesZNF)：`ResponseHdr`

```
$result = $Envelope->xpath('//soapenv:Envelope/soapenv:Body/get1:GetCustAreaSnapshotResponseParam/ResponseHdr/*[1]'); 
```

**编辑：** [这](http://codepad.viper-7.com/B2CMdf)是我能用 SimpleXML 做的最好的事情。不过，我将尝试使用 DOMDocument，因为它可能是一个更好的选择。

```
$result = $Envelope->xpath('//soapenv:Envelope/soapenv:Body/get1:GetCustAreaSnapshotResponseParam/ResponseHdr');    
foreach( $result[0]->children('bsm', true) as $node) var_dump( $node->getName() . ' = ' . (string) $node);

$result = $Envelope->xpath('//soapenv:Envelope/soapenv:Body/get1:GetCustAreaSnapshotResponseParam/ResGetCustAreaSnapshot/*[1]');    
foreach( $result[0]->children('cmc', true) as $node) var_dump( $node->getName() . ' = ' . (string) $node); 
```

鉴于上面的代码，我能够得到以下输出：

```
string(45) "ResponseId = gero etgero etgero etgero etgero"
string(34) "ResTransactionId = 123456789012345"
string(17) "ProviderId = CGIS"
string(34) "ResTimestamp = 2004-02-15T02:44:14"
string(16) "ResStatus = SUCC"
string(16) "MsgCode = IM-001"
string(17) "MsgDesc = Success"
string(24) "MAP_IMAGE_ZOOM1000 = abc" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:53:25.823

尝试这个：

**将其保存为 ns.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
    <soapenv:Header xmlns:get="http://tnb.com.my/CGIS/D/getcustareasnapshotpro"  xmlns:bsm="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:cgis="http://tnb.com.my/CGIS/D/cgis_cmccustomermgnt"/>
    <soapenv:Body xmlns:get="http://tnb.com.my/CGIS/D/getcustareasnapshotpro" xmlns:bsm="http://www.tnb.com.my/CGIS/schemas/bsmfpro" xmlns:cgis="http://tnb.com.my/CGIS/D/cgis_cmccustomermgnt">
        <get1:GetCustAreaSnapshotResponseParam xmlns:get1="http://tnb.com.my/CGIS/D/getcustareasnapshotcon">
            <ResponseHdr>
                <bsm:ResponseId>gero etgero etgero etgero etgero</bsm:ResponseId>
                <bsm:ResTransactionId>123456789012345</bsm:ResTransactionId>
                <bsm:ProviderId>CGIS</bsm:ProviderId>
                <bsm:ResTimestamp>2004-02-15T02:44:14</bsm:ResTimestamp>
                <bsm:ResStatus>SUCC</bsm:ResStatus>
                <bsm:MsgCode>IM-001</bsm:MsgCode>
                <bsm:MsgDesc>Success</bsm:MsgDesc>
            </ResponseHdr>
            <ResGetCustAreaSnapshot>
                <cmc:GetCustAreaSnapshot xmlns:cmc="http://tnb.com.my/CGIS/D/cmc_customermgnt">
                    <cmc:MAP_IMAGE_ZOOM1000>abc</cmc:MAP_IMAGE_ZOOM1000>
                </cmc:GetCustAreaSnapshot>
            </ResGetCustAreaSnapshot>
        </get1:GetCustAreaSnapshotResponseParam>
    </soapenv:Body>
</soapenv:Envelope> 
```

**获取节点的 PHP 代码：**

```
<?php
$xml = simplexml_load_file( 'ns.xml' );

$xml->registerXPathNamespace('b', 'http://www.tnb.com.my/CGIS/schemas/bsmfpro');
$xml->registerXPathNamespace('c', 'http://tnb.com.my/CGIS/D/cmc_customermgnt');

$xpath = $xml->xpath( '//b:ResponseId | //c:MAP_IMAGE_ZOOM1000' );

foreach( $xpath as $key => $value ) {
    // echo the node name and its value
    echo $value->getName() . ' => ' . $value . "\n<br>";
}
?> 
```

希望这可以帮助。

# c# - WaTiN 问题 - WaTin 冻结 C# 应用程序

> ID：11533070
> 
> 赞同：0
> 
> 时间：2012-07-18T01:22:36.703
> 
> 标签：c#, watin

我刚刚在 C# 中创建了一个使用 WaTiN 的 Winform。该程序运行良好，但每当它在后台打开新的 WaTiN 浏览器窗口并导航到页面等时，应用程序就会冻结，并且在 WaTiN 完成其进程之前无法使用。你能帮我防止这种情况发生吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:16:15.850

您应该使用后台工作人员。您遇到的行为是绝对正常的。[您可以从这里](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)和[这里](http://www.codeproject.com/Articles/58292/Basic-Backgroundworker)开始阅读有关工人的信息。

# facebook - DotNetOpenAuth NuGet 安装 - 但示例有问题

> ID：11533075
> 
> 赞同：1
> 
> 时间：2012-07-18T01:24:51.630
> 
> 标签：facebook, dotnetopenauth, nuget-package, sample

我使用 NuGet 安装了 DotNetOpenAuth 并下载了带有示例的 4.1 zipfile，但是在尝试将 Facebook.aspx 示例合并到新项目中时遇到了困难。示例代码隐藏引用 DotNetOpenAuth.OAuth2，但我似乎无法通过 NuGet 安装解决此引用。我错过了什么？

**请注意**，我构建了 DotNetOpenAuth.ApplicationBlock 示例并将引用添加到新项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:26:38.310

请运行此 NuGet 命令以安装[DotNetOpenAuth.OAuth2.Client 包](http://nuget.org/packages/DotNetOpenAuth.OAuth2.Client/0.25.0-draft1)：

```
PM> Install-Package DotNetOpenAuth.OAuth2.Client -Pre 
```

# javascript - 是否可以在 HTML5 占位符中放置锚点？

> ID：11533081
> 
> 赞同：-4
> 
> 时间：2012-07-18T01:26:26.890
> 
> 标签：javascript, jquery, html

（即，`<textarea>`一旦 textarea 处于活动状态或其中包含文本，则不会显示 a 内的链接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:33:33.347

[textarea](http://www.w3.org/TR/html401/interact/forms.html#edef-TEXTAREA)元素包含PCDATA，它不能包含任何标记或其他元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:33:15.410

不，该`placeholder`属性的 W3C 规范没有说明非明文值。

试试这个 jQuery 插件，它将`<label>`元素放置在元素之上`<input>`并使它们像占位符一样：http: [//fuelyourcoding.com/in-field-labels/](http://fuelyourcoding.com/in-field-labels/)

（这是在谷歌搜索中出现的，我与插件、插件作者或网站没有任何关联）

# actionscript-3 - 动作脚本 3：gotoAndStop

> ID：11533083
> 
> 赞同：1
> 
> 时间：2012-07-18T01:27:27.527
> 
> 标签：actionscript-3, flash, button, actionscript, frame

我有一个 Flash CS3 项目给我带来了一些麻烦。我有一个影片剪辑，在那个影片剪辑中，我有一个按钮。影片剪辑被命名为*bg*和按钮*tohallway_btn*。我的编码是在一个层上的舞台上，而不是在类或包中，或任何类似的东西上。这是我的编码：

```
bg.tohallway_btn.addEventListener(MouseEvent.CLICK, tohallwayClick);
function tohallwayClick(event:MouseEvent):void{
        gotoAndStop (141);
    } 
```

看起来很简单，但是当我调试并单击按钮时，Flash 播放器冻结了。我完全不知道是什么导致它这样做。

我在输出中也遇到类型错误：

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 Camille_fla::MainTimeline/enterF()[Camille_fla.MainTimeline::frame140:130]

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:43:24.393

一个 onEnterFrame 侦听器被调用但未被删除，该侦听器引用了一个在 goto 调用之后不在舞台上的对象 (bg)。

```
function tohallwayClick(event:MouseEvent):void {
    **removeEventListener(Event.ENTER_FRAME, enterF);**
    gotoAndStop(141);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T02:05:22.313

首先确保你的按钮和你的代码在同一个框架上，它们可以在不同的层上，但要确保它们是对齐的。

如果您希望它转到主时间轴或舞台上的帧，而不是编写：

```
gotoAndStop (141) 
```

尝试：

```
stage.gotoAndStop(141); 
```

# css - -webkit-overflow-scrolling 的方向错误：触摸

> ID：11533087
> 
> 赞同：3
> 
> 时间：2012-07-18T01:28:04.080
> 
> 标签：css, ios5, webkit, scroll, mobile-safari

我一直在玩 -webkit-overflow-scrolling:touch; 有一段时间，我随机遇到以下问题：

**我只需要滚动顶部/底部（宽度固定），但有时用户需要左右滚动才能触发垂直滚动。**

**换句话说，用户必须水平滚动才能使容器垂直滚动。**

再次它是随机的，有时它只是工作。
我已经检查了滚动中子元素的所有相对位置。
有什么想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T17:40:16.273

我还有一个永不损坏的滚动条，通过查看其中的 html，我意识到如果您应用 -webkit-overflow-scrolling:touch; 在 ul 元素中它永远不会破裂。

曾经破坏的滚动中有许多元素，我所要做的就是使 ul 元素可单独滚动。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:13:20.040

遇到同样的问题，一直在苦苦挣扎，直到我这样做：

改为。`overflow-y: scroll`_ `overflow: scroll`我现在已经加载了将近 20 次页面，并且没有经历过左/右上/下的怪异现象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:16:24.730

正如 Graygilmore 的评论中所述。这对我有用：

// 注意 2019-04-09：[引用的链接已删除]

确保可滚动区域的父元素没有可见性：隐藏或显示：无。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T03:46:11.177

我在一个使用多个 iframe 的复杂 Web 应用程序上工作。我有一个 window.setInterval 设置，它从隐藏的 iframe 中删除本机滚动并将其添加到可见的 iframe。这很好用，除了我遇到了同样的问题，我必须向左/向右滑动才能向上滚动。我注意到如果您打开或单击不同的浏览器选项卡，然后单击返回它会自行修复。在将原生滚动应用到可见 iframe 后，我们通过添加以下 jQuery 解决了我们的问题：

```
$(window).height($(window).height()); 
```

我认为这必须强制重新绘制，类似于单击不同的选项卡然后单击返回。希望这可以帮助处于类似情况的人！

# php - PHP文件加密

> ID：11533088
> 
> 赞同：0
> 
> 时间：2012-07-18T01:28:09.107
> 
> 标签：php, encryption, obfuscation

好的，很简单，我需要保护服务器上的所有文件，最好的方法是什么。我们已经使用 HTTPS 进行一两台服务器上的任何通信，但没有什么能阻止有人入侵 FTP（好吧，有一个 LONG LONG LONG 密码和防火墙），但我如何确保没有人可以下载 PHP 页面并查看源代码。除非他们有解密代码。

我查看了这个站点[http://www.rightscripts.com/phpencode/index.php](http://www.rightscripts.com/phpencode/index.php) 但我个人不会将关于我的站点的个人信息放入其中。

注意：如果它是最佳实践，我不介意支付一些东西。

干杯谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:29:47.770

ionCube 非常普遍地用于此目的。但是请注意，即使使用长 FTP 密码，它仍然容易受到网络上任何人的嗅探，因为普通 FTP 根本不提供任何加密。

# android - 如何安装支持库android？

> ID：11533090
> 
> 赞同：8
> 
> 时间：2012-07-18T01:28:20.053
> 
> 标签：android

我需要使用 android-support-v4，当我尝试从 SDK 管理器（支持库）安装它时购买，它没有显示包，实际上我想安装另一个 API 级别，但我也不能，因为 sdk 管理器没有向我显示除我已经安装的 API 之外的任何其他 API。这是 SDK 管理器的图像： ![在此处输入图像描述](../Images/23a48ff7f74f9084ae40ebfc04f2165e.png) 如何显示我需要的一切？（我已经尝试过使用过时的选项）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-18T01:38:26.513

你问错问题了。

右键单击您的项目。

选择`Android Tools > Add Support Libraries...`

（会出现一个进度条，瞧，它应该下载你需要的东西）

顺便说一句，你真的应该安装最新的 android-sdk 更新。从您的屏幕截图来看，您似乎还没有。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-07-02T16:43:27.337

点击“**包**”>“**显示过时的包**”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T06:02:29.873

安装新的 SDK 管理器后，您将在 Extras（如果按 API 级别排序）或存储库“Google Inc”（如果按存储库排序）下找到“Android 支持库”。

我的观点与上面完全相同，在网上搜索了所有内容，包括这篇文章，但找不到任何东西。当我放弃时，它突然出现在我的列表中。似乎我遇到了一些网络问题（可能与最新版本相结合）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T19:32:20.113

我也遇到了同样的问题，并想出了下面的解决方案。

工具 -> 管理附加站点 -> 启用“Google Inc.”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T20:02:03.407

“选择 android 工具”是指“选择 android sdk 工具”？顺便说一下，这个是不可扩展的。（至少不在我的 android sdk 管理器上）。

“支持库”不会出现在 android sdk 管理器的任何其他分支中。

是否需要将任何存储库添加到 sdk 管理器才能获取包？

我正在使用 MacOSX lepard 和最新的 sdk，并得到与上面相同的屏幕截图。

# ruby-on-rails - 发送带有 xls 附件的邮件而不生成文件

> ID：11533097
> 
> 赞同：2
> 
> 时间：2012-07-18T01:29:54.070
> 
> 标签：ruby-on-rails, file, attachment, xls

我正在使用'to_xls' gem 生成一个 xls。所以我喜欢：

```
my_xls = User.all.to_xls 
```

现在我想使用 ActionMailer 发送它，我试过这样：

```
attachments[my_xls.original_filename] =  {
   :content=>my_xls.read, 
   :mime_type=>my_xls.content_type
} 
```

但令我惊讶的是，my_xls 不是文件而是字符串。我想我可以通过打开一个新文件并将字符串写入它来解决这个问题，但我使用的是 Heroku，它不喜欢写入文件（权限被拒绝）。最好的解决方案是生成类似文件的流数据（例如从 HTML 表单中获取文件）并发送它。

我需要类似 rails send_data 控制器方法的东西，它将数据流发送到视图而不生成新文件。

那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:21:16.150

与此接近的东西，我可能弄错了 mime 类型，它在下面的代码中是通用的，但我在我的 rails 代码中用于动作邮件的格式如下：

```
attachment "application/octet-stream" do |a|
  a.body = my_xls.read
  a.filename = my_xls.original_filename
end 
```

可能的类型可能是：

“application/excel”或“application/vnd.ms-excel”而不是“application/octet-stream”

这个我没测试过。。。

此外，如果 my_xls 是一个字符串，您可能必须在通过网络发送之前将其转换为字节：

my_xls.bytes.to_a.pack("C*")

这里有一个 SOF 主题讨论这个，但这是针对 send_data，但可能仍然适用：

[Ruby on Rails 中 send_data 与电子表格插件结合使用的困难](https://stackoverflow.com/questions/3962896/difficulty-with-send-data-in-ruby-on-rails-in-conjunction-with-spreadsheet-plug)

只是试图为您指明一个希望有帮助的方向！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-14T10:59:26.223

下面的代码块就像一个魅力。我已经尝试过了，并且正在运行的应用程序中。

```
def send_excel_report(file_name, emails, subject, email_content, file_path, bcc_emails = [])

    attachments["#{file_name}.xls"] = File.read(file_path)

    mail(to: emails, subject: subject, from: "my_email@gmail.com", bcc: bcc_emails) do |format|
      format.html { render :partial => "users/mail_body"}
    end
  end 
```

仅供参考：我使用电子表格 gem 来创建 excel

# javascript - 如何在元素之外捕获鼠标事件？

> ID：11533098
> 
> 赞同：49
> 
> 时间：2012-07-18T01:29:54.923
> 
> 标签：javascript

我有简单的 Javascript 代码，类似于这个：

```
var mouseIsDown = false;
...
function canvasMouseDown(e) {
  ...
  mouseIsDown = true;
}
function canvasMouseUp(e) {
  mouseIsDown = false;
}
function canvasMouseMove(e) {
  if (mouseIsDown) {
    ...
  }
} 
```

通过实现我自己的用户界面，用于使用画布进行转换（平移、缩放和旋转）。

`canvasMouseMove()`函数检查`mouseIsDown`变量中的这种实现。如果用户在光标/指针位于画布元素之外时不释放鼠标按钮，则一切正常。如果发生这种情况，变量将`mouseIsDown`保留并且不会被函数`true`关闭。`canvasMouseUp`

对于这个问题，纯 JavaScript *（无 jQuery）*有什么简单的修复或解决方案？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-18T01:46:53.093

如果您想`mouseup`在文档中的其他位置捕获该事件，您可以为此添加一个事件处理程序到`documentelement`. 请注意，这不会对`mouseup`视口外的事件做出反应，因此您可能还想在鼠标再次进入视口而没有按下按钮时触发。

如果你想捕捉鼠标离开你的画布元素，它会变得有点复杂。虽然 IE 知道一个`mouseleave`事件，但标准 DOM 有一个`mouseout`事件，当您的元素的后代离开时也会触发（尽管画布通常没有子元素）。在[quirksmode.org](http://www.quirksmode.org/js/events_mouse.html)上阅读更多内容。

我创建[了一个小提琴](http://jsfiddle.net/jWkCT/)来演示该行为（仅适用于 W3 DOM）。您可以尝试更改`documentelement`为`body`. 在 Opera 中，事件`mouseup`监听器会在文档内部开始“拖动”时`<html>`检测到`mouseup`文档外部的事件 - 我不知道这是否是标准行为。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-11-05T11:55:37.613

```
window.addEventListener('mouseup', function(event){
// do logic here
}) 
```

它甚至可以在浏览器之外处理释放鼠标

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-09T07:22:34.427

document.onmouseup 甚至会在视口之外被抛出，这是一个很高兴知道您只能通过绑定到文档对象来获得的信息。在这里测试：http: [//jsfiddle.net/G5Xr2/](http://jsfiddle.net/G5Xr2/)

```
$(document).mouseup(function(e){
  alert("UP" + e.pageX);
}); 
```

它甚至会接收鼠标位置！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-18T01:33:53.060

添加一个捕获事件的更高级别的事件处理程序（可能是主体）`mouseUp`，并设置`mouseIsDown`为`false`.

这是一个演示：http: [//jsfiddle.net/ZFefV/](http://jsfiddle.net/ZFefV/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-17T07:42:47.957

在 JavaScript 中，它将如下所示：

```
myElement.addEventListener('mousedown', () => {
  const handleMouseUp = (event) => {
    // check whether outside the element with event.target and myElement

    document.removeEventListener('mouseup', handleMouseUp);
  };

  document.addEventListener('mouseup', handleMouseUp);
}) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-16T16:20:03.010

我创建了一个变量，将目标元素的 id 字符串存储在`mousedown`. 在一个`mouseup`事件中，我检查字符串以查看它是否为空。如果不是，我使用字符串来获取元素并在代码块中执行我想要的任何操作，然后将变量重置为 null。

换句话说，步骤是：

1.）创建一个变量，将其设置为null。2.) 在“mousedown”上，将 id 或类字符串保存到变量中。3.）在“mouseup”上，检查变量（为了安全）。如果它不为空。然后使用字符串抓取元素并使用它来做某事。4.) 然后将变量重置为空。

```
var thisTarget = null

// when I know they click in the right place, save the target. 
// you may not need parent(). I was using a UI slider and needed it.

$(".section").mousedown( function(e) {
    thisTarget = $(e.target.parent().attr('id');
    console.log(thisTarget);
});

// anywhere on the page... 
$(document).mouseup( function(e) { 
    // because I'll make it null after every mouseup event.
    if (thisTarget !== null) { 
        console.log( $("#" + thisTarget) ); // returns element
        // do something with it
        thisTarget = null;
    }
}); 
```

# java - 在小程序查看器中调用时出现空白屏幕

> ID：11533104
> 
> 赞同：1
> 
> 时间：2012-07-18T01:31:01.213
> 
> 标签：java, swing, applet, japplet

这是我第一次在这里发帖。我在做一些家庭作业时第一次在 java 中使用 GUI。我已经开始逐步编写意大利餐厅菜单。

下面的代码编译正常，没有错误。编译后我运行小程序查看器`Italian.html`，小程序查看器屏幕只显示一个空白窗口。我有点困惑，因为我没有错误可以使用。我是否缺少一些简单的东西。

谢谢你的帮助。

```
import javax.swing.*;
import java.awt.*;

public class Italian extends JApplet {

//Declare and array for a list of Pastas
private String [] pastas = {"Spaghetti", "Angel Hair Pasta", "Tortellini",
    "Ziti"};
private String [] sauces = {"Maranaria", "Alfredo", "Spicy Marania"};

public Italian() {
//Create the base panel for the restaurant page

JPanel i1 = new JPanel();

i1.setLayout(new GridLayout(2, 1));

i1.add(new JComboBox(pastas));
i1.add(new JComboBox(sauces)); 
```

## HTML

```
<html>
  <head>
    <title>Java Applet Demo</title>
  </head>
  <body>
    <applet
      code = "Italian.class"
      width = 250
      height = 250>
    </applet>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:57:41.987

您尚未向小程序添加任何内容以使小程序在屏幕上显示。

在您的构造函数或 init 方法中，您需要将您创建的面板添加到内容窗格中。

```
getContentPane().setLayout(new BorderLayout()); // Just to make sure
getContentPane().add(i1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:36:56.377

你应该向小程序添加一些东西以使它们工作。这是一个链接 [http://math.hws.edu/eck/cs124/javanotes4/c6/index.html](http://math.hws.edu/eck/cs124/javanotes4/c6/index.html)它将帮助你了解小程序和图形。这个例如。将帮助您添加具有正确布局的不同按钮：

```
/* 
This applet demonstrates various layout managers.
The applet itself uses a border layout with a JPanel in
the center, a JComboBox menu to the North, and a JLabel
to the south. The center panel uses a CardLayout.
Each card in the card layout contains a number of
buttons and uses a different layout manager.  The
JComboBox menu is used to select among these cards.
The JLabel reports events as they occur.
*/

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class LayoutDemo extends JApplet 
                      implements ActionListener, ItemListener {

CardLayout cards;      // the layout manager for the center panel
JPanel cardPanel;      // the center panel
JComboBox panelChoice; // menu for selecting which card to show
JLabel message;        // a message shown at the bottom of the applet

public void init() {

  panelChoice = new JComboBox();  // Set up the menu
  panelChoice.setBackground(Color.white);
  panelChoice.addItem("FlowLayout");   // Add in the names of the cards.
  panelChoice.addItem("FlowLayout with Big Hgap");
  panelChoice.addItem("Vertical BoxLayout");
  panelChoice.addItem("Horizontal BoxLayout with Struts");
  panelChoice.addItem("BorderLayout");
  panelChoice.addItem("GridLayout(3,2)");
  panelChoice.addItem("GridLayout(1,0)");
  panelChoice.addItem("GridLayout(0,1)");
  panelChoice.addItemListener(this);

  message = new JLabel("Layout Demo", JLabel.CENTER);  // Set up the mesage
  message.setBackground(Color.white);
  message.setOpaque(true);  // so background color will show
  message.setBorder(BorderFactory.createEmptyBorder(5,0,3,0));
  message.setForeground(Color.red);

  cardPanel = new JPanel();               // Set up the center panel
  cardPanel.setBackground(Color.white);
  cards = new CardLayout();
  cardPanel.setLayout(cards);

  setBackground(Color.blue);
  getContentPane().setBackground(Color.blue);  
  getContentPane().setLayout(new BorderLayout(3,3));    
  getContentPane().add("Center",cardPanel);
  getContentPane().add("North",panelChoice);
  getContentPane().add("South",message);

  JPanel panel;  // Will represent various cards to be added to the center panel.
  Box box;       // For the cards that use a BoxLayout.

  // Set up each "card" in the center panel to have its own layout
  // manager and to contain a variety of buttons.

  panel = new JPanel();
  // use default FlowLayout for panel
  panel.setBackground(Color.white);
  cardPanel.add(panel, "FlowLayout");
  addButton(panel,"First Button");  // ( addButton is a untility method, defined below )
  addButton(panel,"Second Button");
  addButton(panel,"Third Button");
  addButton(panel,"Fourth Button");
  addButton(panel,"Fifth Button");
  addButton(panel,"Sixth Button");
  addButton(panel,"Seventh Button");

  panel = new JPanel();  
  panel.setLayout(new FlowLayout(FlowLayout.CENTER,30000,5));
  panel.setBackground(Color.white);
  cardPanel.add(panel,"FlowLayout with Big Hgap");
  addButton(panel," A Button");
  addButton(panel,"Another Button");
  addButton(panel,"A Third Button");
  addButton(panel,"A Fourth Button");
  addButton(panel,"A Final Button");

  box = Box.createVerticalBox();  
  box.setBackground(Color.white);
  cardPanel.add(box,"Vertical BoxLayout");
  addButton(box,"Button One");
  addButton(box,"Button Two");
  addButton(box,"Button Three");
  addButton(box,"Button Four");
  addButton(box,"Button Five");
  addButton(box,"Button Six");

  box = Box.createHorizontalBox();  
  box.setBackground(Color.white);
  cardPanel.add(box,"Horizontal BoxLayout with Struts");
  addButton(box,"1st");
  addButton(box,"2nd");
  box.add( Box.createHorizontalStrut(10) );
  addButton(box,"3rd");
  addButton(box,"4th");
  box.add( Box.createHorizontalStrut(10) );
  addButton(box,"5th");

  panel = new JPanel();  
  panel.setLayout(new BorderLayout());
  panel.setBackground(Color.white);
  cardPanel.add(panel,"BorderLayout");
  addButton(panel,"Center Button", BorderLayout.CENTER); 
  addButton(panel,"North Button", BorderLayout.NORTH);
  addButton(panel,"South Button", BorderLayout.SOUTH);
  addButton(panel,"East Button", BorderLayout.EAST);
  addButton(panel,"West Button", BorderLayout.WEST);

  panel = new JPanel();  
  panel.setLayout(new GridLayout(3,2));
  panel.setBackground(Color.white);
  cardPanel.add(panel,"GridLayout(3,2)");
  addButton(panel,"Button 1");                  
  addButton(panel,"Button 2");                  
  addButton(panel,"Button 3");                  
  addButton(panel,"Button 4");                  
  addButton(panel,"Button 5");                  
  addButton(panel,"Button 6");                  

  panel = new JPanel();  
  panel.setLayout(new GridLayout(1,0));
  panel.setBackground(Color.white);
  cardPanel.add(panel,"GridLayout(1,0)");
  addButton(panel,"Button 1");                  
  addButton(panel,"Button 2");                  
  addButton(panel,"Button 3");                  
  addButton(panel,"Button 4");                  

  panel = new JPanel();  
  panel.setLayout(new GridLayout(0,1));
  panel.setBackground(Color.white);
  cardPanel.add(panel,"GridLayout(0,1)");
  addButton(panel,"Button 1");                  
  addButton(panel,"Button 2");                  
  addButton(panel,"Button 3");                  
  addButton(panel,"Button 4");                  
  addButton(panel,"Button 5");                  
  addButton(panel,"Button 6");                  

  } // end init()

 public Insets getInsets() {
    // specify borders around the edges of the applet
  return new Insets(3,3,3,3);
 }

void addButton(Container p, String name) {
      // Create a button with the given name and add it
      // to the given panel.  Set up the button to send
      // events to the applet.
  JButton b = new JButton(name);
  p.add(b);
  b.addActionListener(this);
}

void addButton(JPanel p, String name, Object option) {
      // Same as above, but use the "option" object
      // as an additional parameter in the add method.
  JButton b = new JButton(name);
  p.add(b, option);
  b.addActionListener(this);
 }

 public void actionPerformed(ActionEvent evt) {
     // A button was pressed.  Report the name
     // of the button by setting the message text.
  String buttonName = evt.getActionCommand();
  message.setText("Button \"" + buttonName + "\" was pressed.");
 }

 public void itemStateChanged(ItemEvent evt) {
     // The user has selected an item from the JComboBox.
     // Change the displayed card to match.
  String panelName = (String)panelChoice.getSelectedItem();
  cards.show(cardPanel, panelName);
  message.setText("Panel \"" + panelName + "\" was selected.");
 }

} // end class LayoutDemo 
```

# c# - AES GCM 手动字节 [] 将 IV 和标签连接到加密信息

> ID：11533105
> 
> 赞同：2
> 
> 时间：2012-07-17T19:04:49.023
> 
> 标签：c#, .net, encryption, aes, encryption-symmetric

我使用`AuthenticatedAesCng`从该站点调用的类在 GCM 模式下使用 AES 256 加密：[CLR 安全](http://clrsecurity.codeplex.com/)

通过加密流写入明文后，我手动连接 IV、TAG 和加密数据，然后返回该值。

`cs`是加密流和内存`ms`流

```
// Write through and retrieve encrypted data.
cs.Write(message, 0, message.Length);
cs.FlushFinalBlock();
byte[] cipherText = ms.ToArray();                   

// Retrieve tag and create array to hold encrypted data.
byte[] authenticationTag = encryptor.GetTag();      
byte[] encrypted = new byte[cipherText.Length + aes.IV.Length + authenticationTag.Length];

// Set needed data in byte array.
aes.IV.CopyTo(encrypted, 0);                       
authenticationTag.CopyTo(encrypted, IV_LENGTH);
cipherText.CopyTo(encrypted, IV_LENGTH + TAG_LENGTH);

// Store encrypted value in base 64.
return Convert.ToBase64String(encrypted); 
```

这是在 GCM 模式下使用 AES 密码的正确方式吗？我应该手动将所有这些值放在一起还是自动完成而我只是错过了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T16:00:59.523

密文只是数据，但没有标签就不能拥有 GCM 密文：它会破坏 GCM 的全部目的。标签通常附加到密文中。

AAD 数据是可选的，它的全部目的是让它以明文形式发送。

IV 实际上是一个随机数，所以它可以在两边都计算。如果您使用随机 NONCE 或无法预先计算它，则将其添加到密文的前缀是正常的（但您必须在双方都明确编码）。

# c# - 有没有人围绕 StringBuilders 或 Streams 实现了 Regex 和/或 Xml 解析器？

> ID：11533110
> 
> 赞同：10
> 
> 时间：2012-07-18T01:32:13.863
> 
> 标签：c#, regex, stringbuilder

我正在构建一个压力测试客户端，它使用客户端可以召集的尽可能多的线程来锤击服务器并分析响应。我经常发现自己受到垃圾收集（和/或缺乏垃圾收集）的限制，在大多数情况下，它归结为我实例化的字符串，只是为了将它们传递给正则表达式或 Xml 解析例程。

*如果你反编译 Regex 类，你会在内部*看到，它使用 StringBuilders 来完成几乎所有事情，但你不能*将*它传递给字符串生成器；它有助于在开始使用私有方法之前深入研究它们，因此扩展方法也无法解决它。如果您想从 System.Xml.Linq 中的解析器中获取对象图，您会遇到类似的情况。

这不是迂腐的提前过度优化的情况。我查看[了 StringBuilder](https://stackoverflow.com/questions/3504850/regex-replacements-inside-a-stringbuilder "StringBuilder 中的正则表达式替换")问题和其他问题中的正则表达式替换。我还分析了我的应用程序以查看天花板的来源，并使用`Regex.Replace()`now 确实在方法链中引入了大量开销，在该方法链中，我试图以每小时数百万个请求访问服务器，并检查 XML 响应中的错误和嵌入式诊断代码。我已经摆脱了几乎所有其他限制吞吐量的低效率，我什至通过扩展 StringBuilder 来在不需要捕获组或反向引用时进行通配符查找/替换，从而减少了很多正则表达式开销，但在我看来，现在有人已经完成了一个基于 Regex 和 Xml 解析实用程序的自定义 StringBuilder（或者更好的是 Stream）。

好的，所以咆哮，但我必须自己做这个吗？

**更新：**我找到了一种解决方法，可以将峰值内存消耗从数 GB 降低到数百兆，因此我将其发布在下面。我没有将其添加为答案，因为 a）我通常讨厌这样做，并且 b）我仍然想知道是否有人在我做之前花时间自定义 StringBuilder 来执行正则表达式（反之亦然）。

就我而言，我无法使用 XmlReader，因为我正在摄取的流在某些元素中包含一些无效的二进制内容。为了解析 XML，我必须清空这些元素。我以前使用单个静态编译的 Regex 实例来进行替换，这会像疯了一样消耗内存（我正在尝试处理 ~300 10KB 文档/秒）。大幅减少消费的变化是：

1.  我[在 CodeProject 上添加了这篇 StringBuilder Extensions 文章中的代码](http://www.codeproject.com/Tips/129369/StringBuilder-Extensions)，以获得方便的`IndexOf`方法。
2.  我添加了一个（非常）粗略的`WildcardReplace`方法，每次调用允许*一个*通配符（* 或？）
3.  我用`WildcardReplace()`调用清空违规元素的内容替换了正则表达式的用法

这是非常不漂亮的，并且仅根据我自己的目的进行了测试；我会让它变得更加优雅和强大，但是 YAGNI 和所有这些，我很着急。这是代码：

```
/// <summary>
/// Performs basic wildcard find and replace on a string builder, observing one of two 
/// wildcard characters: * matches any number of characters, or ? matches a single character.
/// Operates on only one wildcard per invocation; 2 or more wildcards in <paramref name="find"/>
/// will cause an exception.
/// All characters in <paramref name="replaceWith"/> are treated as literal parts of 
/// the replacement text.
/// </summary>
/// <param name="find"></param>
/// <param name="replaceWith"></param>
/// <returns></returns>
public static StringBuilder WildcardReplace(this StringBuilder sb, string find, string replaceWith) {
    if (find.Split(new char[] { '*' }).Length > 2 || find.Split(new char[] { '?' }).Length > 2 || (find.Contains("*") && find.Contains("?"))) {
        throw new ArgumentException("Only one wildcard is supported, but more than one was supplied.", "find");
    } 
    // are we matching one character, or any number?
    bool matchOneCharacter = find.Contains("?");
    string[] parts = matchOneCharacter ? 
        find.Split(new char[] { '?' }, StringSplitOptions.RemoveEmptyEntries) 
        : find.Split(new char[] { '*' }, StringSplitOptions.RemoveEmptyEntries);
    int startItemIdx; 
    int endItemIdx;
    int newStartIdx = 0;
    int length;
    while ((startItemIdx = sb.IndexOf(parts[0], newStartIdx)) > 0 
        && (endItemIdx = sb.IndexOf(parts[1], startItemIdx + parts[0].Length)) > 0) {
        length = (endItemIdx + parts[1].Length) - startItemIdx;
        newStartIdx = startItemIdx + replaceWith.Length;
        // With "?" wildcard, find parameter length should equal the length of its match:
        if (matchOneCharacter && length > find.Length)
            break;
        sb.Remove(startItemIdx, length);
        sb.Insert(startItemIdx, replaceWith);
    }
    return sb;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:15:25.920

XmlReader 是一个基于流的 XML 解析器。请参阅[http://msdn.microsoft.com/en-us/library/756wd7zs.aspx](http://msdn.microsoft.com/en-us/library/756wd7zs.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:25:23.237

Mono 项目已将[其核心库的许可证转换为 MIT X11 许可证](http://www.mono-project.com/FAQ%3a_Licensing)。如果您需要创建一个针对特定应用程序的性能定制的正则表达式库，您应该能够从[Mono 的](https://github.com/mono/mono)[System library](https://github.com/mono/mono/tree/master/mcs/class/System)实现的最新代码开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-22T05:27:58.837

# ssis - 在存储过程中使用输入参数调用 SSIS 包

> ID：11533111
> 
> 赞同：1
> 
> 时间：2012-07-18T01:32:19.590
> 
> 标签：ssis, dtexec

我有需要输入参数 ID（整数）的 SSIS 包。我需要使用存储过程执行这个 SSIS 包，以便我可以传递 ID 的值。

```
DECLARE @Command varchar(1000)
    , @PackageLocation varchar(1000)
    , @PackageName varchar(1000)
    , @XmlID int

SELECT TOP 1 @XmlID = XmlId 
FROM dbo.ENROLMatchingXML
WHERE IsProcessed = 0

SET @PackageLocation = 'E:\SSIS\Package'
SET @PackageName = 'Match Names.dtsx'
SET @Command = 'DTEXEC'
    + ' /File "' + @PackageLocation + '\' + @PackageName + '"'

    + ' Set \Package.Variables[user::XMLID].Properties[Value];'  + @XmlID 
-- print just to show the string @command
print @Command

EXEC xp_cmdshell @Command 
```

我需要将@XmlID 转换为字符吗？如果我这样做了，我会收到一个错误 -*选项“设置”无效。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:25:28.473

使用参数执行 dtexec 的正确语法是：

```
dtexec /f "PathToMyPackage\Package.dtsx" /set \package.variables[myvariable].Value;myvalue 
```

当您指定 set 命令选项时，您似乎忘记了斜线。

# printing - 如何在单个 ADF 页面中创建多个框架并仅打印特定框架？

> ID：11533117
> 
> 赞同：0
> 
> 时间：2012-07-18T01:33:25.010
> 
> 标签：printing, frame, oracle-adf

我有一个问题。我有带有打印选项的 ADF 表格。当我单击打印按钮时，它将打印出整个页面。我使用此代码弹出新选项卡进行打印。

```
 <af:commandButton text="Print" id="cb3">
      <af:showPrintablePageBehavior/>
    </af:commandButton> 
```

是否可以只打印表格的某些部分？我可以将该页面分成多个框架并仅在 ADF 中打印特定框架吗？谁能告诉我怎么做？

急需。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:35:12.657

一些布局组件确实表现为打印边界。让您更好地控制打印内容的一个更简单的选项是设置不应该打印到的组件的渲染属性

呈现 =“#{!adfFacesContext.outputMode eq 'printable'}”

如果你把它放在你不想打印的布局容器上（包括它的孩子），那么这应该是一个简单的设置

坦率

# objective-c - 如何解决CALayerInvalidGeometry'，原因：'CALayer位置包含NaN：[nan nan]？

> ID：11533120
> 
> 赞同：17
> 
> 时间：2012-07-18T01:33:45.197
> 
> 标签：objective-c, ios, xcode4.3, arcgis

我有一个错误，它在启动时使应用程序崩溃。这是我得到的错误：

```
*** Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: [nan nan]'
*** First throw call stack:
(0x250b022 0x2709cd6 0x24b3a48 0x24b39b9 0x217ec0d 0x2174f55 0x158f3f7 0xbc74e 0xbe512 0xbfa26 0xbe4ad 0x224ffda 0x224f956 0x224e449 0x224ab9a 0x24df970 0x247f1c1 0x2442967 0x2441d84 0x2441c9b 0x2c0a7d8 0x2c0a88a 0x1559626 0x2aed 0x2a65)
terminate called throwing an exception 
```

我尝试使用异常断点，它没有显示代码的哪一部分出错了。它只在这一点停止 -0xbc74e: movl $0, %eax-

我该如何解决？请帮忙。

*编辑

我找到了引发异常的部分，但我看不出有什么问题

```
- (void)viewDidLoad {
[super viewDidLoad];
[self.activityView startAnimating];
self.mapView.layerDelegate = self;
self.mapView.touchDelegate = self;
self.mapView.calloutDelegate = self;

NSURL *mapUrl = [NSURL URLWithString:kTiledMapServiceURL];
AGSTiledMapServiceLayer *tiledLyr = [AGSTiledMapServiceLayer tiledMapServiceLayerWithURL:mapUrl];
[self.mapView addMapLayer:tiledLyr withName:@"Tiled Layer"];
        .
        .
        .
}
- (void)mapViewDidLoad:(AGSMapView *)mapView {

AGSEnvelope *envelope = [[AGSEnvelope alloc]initWithXmin:29757.610204117 ymin:40055.0379682464 xmax:29884.6992302249 ymax:40236.6028660071 spatialReference:self.mapView.spatialReference];

//call method to set extent, pass in envelope
[self.mapView zoomToEnvelope:envelope animated:YES];

self.mapView.callout.width = 195.0f;
self.mapView.callout.accessoryButtonHidden = YES;

[self.mapView.gps start];
[self.mapView centerAtPoint:self.mapView.gps.currentPoint animated:YES];  

[self.activityView stopAnimating];
self.activityView.hidden = YES;

} 
```

此行导致错误`self.mapView.layerDelegate = self;`，默认情况下调用该方法`mapViewDidLoad`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T11:04:45.843

我认为发生此错误是因为执行的图层具有这种形式的框架：

层框架 == {{inf, inf}, {0, 0}}

这里inf 是infimum。它的一组数字。

因此，避免此类问题的解决方案只是在图层返回之前创造条件。像：

```
if (layer.frame.size.width ==0 || layer.frame.size.height ==0 ) {
    return [self simpleLayer];
}else{
    return layer;        
} 
```

简单层如下所示：

```
-(CALayer *)simpleLayer{
    CALayer *layer = [[CALayer alloc] init];
    [layer setFrame:CGRectMake(0, 0, 10, 10)];
    [layer setHidden:TRUE];
    return layer;
} 
```

这种情况解决了我的问题。试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T18:36:42.920

对我来说，这是由于此代码中的 toView 为 nil 引起的：

```
 [UIView transitionFromView:self.fromView
                        toView:self.toView
                      duration:0.6
                       options:(currentPage > toPage ? UIViewAnimationOptionTransitionCurlDown : UIViewAnimationOptionTransitionCurlUp)
                    completion:^(BOOL finished) {
                        if (finished) {
                        }
                    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T06:58:14.177

我知道这个问题不是最近的问题，但我只想给出一个答案。无论如何，我猜你`mapView`是这样的`AGSMapView`，你已经用这种方式初始化了它：

```
self.mapView = [[[AGSMapView alloc] init] autorelease]; 
```

现在，我认为更好的（如果不是唯一正确的）初始化它的方法是使用`initWithFrame`. 虽然我不确定为什么，但`mapView`如果您`init`用于初始化，则会损坏。

希望这可以帮助。

# database - 索引的数量是否有任何理由超过字段的数量？（一般是 MySQL 或 RDBMS）？

> ID：11533128
> 
> 赞同：0
> 
> 时间：2012-07-18T01:34:25.830
> 
> 标签：database, indexing

假设您有一个包含 2 个字段的表，例如名字和姓氏。

如果您在两个字段上添加复合索引，理论上应该负责索引第一个字段。据我所知，在该字段上创建第二个索引是多余的。为确保所有查询都使用索引，您只需将索引添加到姓氏。

所以看起来一张表的索引数不应该大于一张表的字段数。

这是正确的还是不正确的？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:46:12.953

考虑一个表 T，它有 3 个值得索引的列：A、B、C。

1.  主索引可能在 T(A, B, C) 上。
2.  可能存在定义了 A 和 C 的查询，因此这些查询的索引是 T(A, C)。
3.  可能存在定义了 B 的查询：T(B) 是索引。
4.  可能存在定义了 C 的查询：T(C) 是索引。

这看起来比列更多的索引。

表中的列越多，就越容易提出可能有帮助的索引——并且可能会使索引计数高于列计数。

# symfony - Symfony2 和 DQL

> ID：11533129
> 
> 赞同：0
> 
> 时间：2012-07-18T01:34:32.223
> 
> 标签：symfony, doctrine

我正在运行这个 DQL 语句：

```
return $this->getEntityManager()
    ->createQuery("SELECT s FROM Bundle:table s WHERE s.title LIKE '%:search%'")
    ->setParameter('search', $search)
    ->getResult(); 
```

但我收到了这个错误：

```
Invalid parameter number: number of bound variables does not match number of tokens 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:14:45.037

你不能像那样使用变量替换。尝试这个：

```
return $this->getEntityManager()
    ->createQuery("SELECT s FROM Bundle:table s WHERE s.title LIKE :search")
    ->setParameter('search', "%" . $search . "%")
    ->getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:22:05.400

显然`Bundle:table`不是对项目中捆绑包和实体的正确引用。检查您的 Bundle / entity (或 Entity ?) 名称的拼写和 camelCase。

# css - 在不破坏设计的情况下将 CSS 文件的一部分输入到另一个文件中

> ID：11533130
> 
> 赞同：0
> 
> 时间：2012-07-18T01:34:32.667
> 
> 标签：css, mobile-website

我已经做了一个网站。我想做这个的移动版本。我基本上想将一个表格从主站点导入移动站点。我想从覆盖表格的主站点获取 CSS 代码，然后输入移动站点的 CSS 文件（我已经将 HTML 代码放入移动站点）。问题是，当我这样做时，它开始覆盖当前的 CSS 文件并更改设计。

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:39:00.100

您将需要使用媒体查询。这是一个css3函数。在您的 html 的顶部，您需要输入以下内容：

```
<meta name="viewport" content="width=device-width" /> 
```

然后，在您的 css 中，您将执行以下操作：

```
@media only screen and (max-width : 320px) {
/* Styles */
} 
```

这是常用媒体查询的参考站点。 [http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

您基本上需要为您正在优化的每个尺寸的设备执行此操作。此外，如果您有其中的几个，您最终可能会得到一个非常大的 css 文件。这可能会阻碍下载速度，尤其是在手机上。在这种情况下，创建单独的较小 css 文件并在您的 html 中使用条件语句来指定要调用的 css。在这种情况下，您将需要在 html 中使用类似这样的内容：

```
<link rel="stylesheet" type="text/css" media="only screen and (max-width: 480px), only screen and (max-device-width: 480px)" href="/assets/css/small-device.css" /> 
```

# c# - 如何修复此文本框打印预览？

> ID：11533133
> 
> 赞同：-1
> 
> 时间：2012-07-18T01:35:03.833
> 
> 标签：c#

[http://www.c-sharpcorner.com/uploadfile/mgold/printingw2form09162005061136am/printingw2form.aspx](http://www.c-sharpcorner.com/uploadfile/mgold/printingw2form09162005061136am/printingw2form.aspx)

```
 for (int i = 0; i < this.Controls.Count; i++)
        {
            // Check if its a TextBox type by comparing to the type of one of the textboxes
            if (Controls[i].GetType() == this.Wages.GetType())
            {
                // Unbox the Textbox
                TextBox theText = (TextBox)Controls[i];
                // Draw the textbox string at the position of the textbox on the form, scaled to the print page
                g.DrawString(theText.Text, theText.Font, Brushes.Black, theText.Bounds.Left * scalex, theText.Bounds.Top * scaley, new StringFormat());
            }
            if (Controls[i].GetType() == this.RetirementPlanCheck.GetType())
            {
                // Unbox the Checkbox
                CheckBox theCheck = (CheckBox)Controls[i];
                // Draw the checkbox rectangle on the form scaled to the print page
                Rectangle aRect = theCheck.Bounds;
                g.DrawRectangle(aPen, aRect.Left * scalex, aRect.Top * scaley, aRect.Width * scalex, aRect.Height * scaley);
                // If the checkbox is checked, Draw the x inside the checkbox on the form scaled to the print page
                if (theCheck.Checked)
                {
                    g.DrawString("x", theCheck.Font, Brushes.Black, theCheck.Left * scalex + 1, theCheck.Top * scaley + 1, new StringFormat());
                }
            } 
```

}

我将此代码用于打印预览，但它给出了一个错误

```
if (Controls[i].GetType() == this.RetirementPlanCheck.GetType())//RetirementPlanCheck 
```

和

```
 if (Controls[i].GetType() == this.Wages.GetType())// wages 
```

错误说缺少参考，那么这些参考是什么类型的？请帮我解决这个问题。

错误消息 1.“WindowsFormsApplication1.Sinhala”不包含“Wages”的定义，并且找不到接受“WindowsFormsApplication1.Sinhala”类型的第一个参数的扩展方法“Wages”（您是否缺少 using 指令或程序集引用?) D:\yashpppp_modi\WindowsFormsApplication1\Sinhala.cs 825 51 WindowsFormsApplication1

2.“WindowsFormsApplication1.Sinhala”不包含“RetirementPlanCheck”的定义，并且找不到接受“WindowsFormsApplication1.Sinhala”类型的第一个参数的扩展方法“RetirementPlanCheck”（您是否缺少 using 指令或程序集引用？） D:\yashpppp_modi\WindowsFormsApplication1\Sinhala.cs WindowsFormsApplication1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:57:54.963

在 C# Corner 的示例中，您引用的代码片段位于 class 的方法中`Form1`。这个类`Form1`确实有两个名为`Wages`and的属性`RetirementPlanCheck`，定义为

```
public System.Windows.Forms.TextBox Wages;
public System.Windows.Forms.CheckBox RetirementPlanCheck; 
```

您尝试使用它的类没有这些属性，这就是编译器所抱怨的。

您是否真的尝试从您提供的链接下载完整示例？它的构建和运行对我来说没有任何问题。或者，如果您确实在提供的示例中遇到了这个问题，您是否可能不小心从表单中删除了`Wages`文本框和复选框控件？`RetirementPlanCheck`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:55:19.613

看起来您没有任何名为`Wages`or的控件`RetirementPlanCheck`。

我猜那些实际上被称为别的东西，也许`txtWages`和`chkRetirementPlan`..

查看您的代码，我认为您可能可以更改您的 if 语句以避免这种情况：

```
//if (Controls[i].GetType() == this.Wages.GetType())
if (Controls[i] is TextBox)
...
//if (Controls[i].GetType() == this.RetirementPlanCheck.GetType())
if (Controls[i] is CheckBox) 
```

# java - 多线程最佳实践：约束任务 newFixedThreadPool

> ID：11533134
> 
> 赞同：2
> 
> 时间：2012-07-18T01:35:08.123
> 
> 标签：java, multithreading, concurrency, threadpool

我想启动很多任务以在 +-42Mio 记录的数据库上运行。我想以 5000 条记录/时间的批次运行它（导致 850 个任务）。我还想限制线程数（至 16）java 开始为我执行此操作，我正在使用当前代码来完成此任务：

```
 ExecutorService executorService = Executors.newFixedThreadPool(16);
 for (int j = 1; j < 900 + 1; j++) {
     int start = (j - 1) * 5000;
     int stop = (j) * 5000- 1;
     FetcherRunner runner = new FetcherRunner(routes, start, stop);
     executorService.submit(runner);

     Thread t = new Thread(runner);
     threadsList.add(t);
     t.start();
 } 
```

这是正确的方法吗？特别是因为我的印象是java只是触发了所有任务......（`FetcherRunner`实现`runnable`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T01:43:26.463

使用 ExecutorService 的第一部分看起来不错：

```
...
FetcherRunner runner = new FetcherRunner(routes, start, stop);
executorService.submit(runner); 
```

带有 Thread 的部分不应该在那里，我假设你有它只是为了展示你以前是如何拥有它的？

**更新：** 是的，您不需要 之后的代码`executorService.submit(runner)`，这最终会产生大量线程。如果您的目标是在循环之后等待所有提交的任务完成，那么您可以`Future`在提交任务时获得参考并等待`Future`，如下所示：

```
ExecutorService executorService = Executors.newFixedThreadPool(16);
List<Future<Result>> futures = ..;
 for (int j = 1; j < 900+ 1; j++) {
 int start = (j - 1) * 5000;
 int stop = (j) * 5000- 1;
 FetcherRunner runner = new FetcherRunner(routes, start, stop);
 futures.add(executorService.submit(runner));

}
for (Future<Result> future:futures){
    future.get(); //Do something with the results..
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T01:54:52.280

> 这是正确的工作方式吗？

第一部分是正确的。但是您不应该创建和启动新的 Thread 对象。当您提交 Runnable 时，ExecutorService 将其放入其队列中，然后在工作线程可用时运行它。

> ....我使用线程列表来检测我的所有线程何时完成，以便我可以继续处理结果。

好吧，如果您执行当前正在执行的操作，则每个任务都会运行两次。更糟糕的是，大量手动创建的线程都将尝试并行运行。

确保所有任务都已完成的一种简单方法是调用[`awaitTermination(...)`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29)ExecutorService。（有序关闭执行器服务将产生相同的效果......如果您不打算再次使用它。）

另一种方法是`Future`为 each的结果创建一个，并在所有任务都提交后`FetcherRunner`尝试该结果。`get`这样做的好处是您可以在生成后期结果之前开始处理早期结果。（但是，如果您不需要……或不能……这样做，使用 Futures 将不会取得任何成果。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T02:01:44.090

You don't need to the part after the call to submit. The code you have that creates a Thread will result in 900 threads being created! Yowza. The ExecutorService has a pool of 16 threads and you can run 16 jobs at once. Any jobs submitted when all 16 threads are busy will be queued. From the docs:

> Creates a thread pool that reuses a fixed number of threads operating off a shared unbounded queue. At any point, at most nThreads threads will be active processing tasks. If additional tasks are submitted when all threads are active, they will wait in the queue until a thread is available. If any thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks. The threads in the pool will exist until it is explicitly shutdown.

So there is no need for yet another thread. If you need to be notified after a task has finished you can have it call out. Other options are to cache all of the Future's returned from submit, and upon each task being finished you can check to see if all Future's are done. After all Future's are finished you can dispatch another function to run. But it will run ON one of the threads in the ExecutorService.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-17T07:24:14.230

最好的方法是使用 countdownlatch 如下

```
 ExecutorService executorService = Executors.newFixedThreadPool(16);
  CountdownLatch latch = new CountdownLatch(900);
 FetcherRunner runner = new FetcherRunner(routes, start, stop, latch);
 latch.await(); 
```

在 FetcherRunner 下的 finally 块使用`latch.countDown();`代码之后，`await()`只会在所有任务完成后才会执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T01:56:58.463

从您的代码更改：

```
 ExecutorService executorService = Executors.newFixedThreadPool(16);
    for (int j = 1; j < 900 + 1; j++) {
        int start = (j - 1) * 5000;
        int stop = (j) * 5000 - 1;
        FetcherRunner runner = new FetcherRunner(routes, start, stop);
        executorService.submit(runner);

    } 
```

# javascript - window.location 重定向在 IE8 上不起作用

> ID：11533142
> 
> 赞同：1
> 
> 时间：2012-07-18T01:36:43.897
> 
> 标签：javascript, jquery, html

为什么在某些**IE8**`window.location`浏览器上不起作用？我在 10 台装有 IE8 的计算机上试过，其中 8 台可以工作，其中 2 台不工作。这是我用来重定向浏览器的脚本。

 **```
<script type="text/javascript">
sublimevideo.ready(function(){
    sublimevideo.prepareAndPlay('video1');
  sublimevideo.onEnd(function(sv){
    window.location = 'http://www.site.com.au/register';
  });
});          
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:40:52.550

引导浏览器导航到新页面的最可靠方法是使用[`location.assign()`](https://developer.mozilla.org/en/DOM/window.location#Methods)：

```
location.assign('http://example.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:10:49.653

请尝试**window.location.href="<URL>";**

[您可以在http://codebins.com/](http://codebins.com/)上做示例代码 bin并根据需要检查结果。**

# c - C、解析一些http头

> ID：11533144
> 
> 赞同：2
> 
> 时间：2012-07-18T01:37:17.327
> 
> 标签：c, http, parsing, header, scanf

我在解析 http 标头时遇到了一些麻烦。

这是我的问题：

```
char resp[] = "HTTP/1.1 200 OK\r\n"
             "Content-Type: text/html\r\n"
             "Content-Length: 4\r\n"
             "\r\n"
             "text";

// some stuff
sscanf(resp, "HTTP/%f %d\r\n",&version,&code);
sscanf(resp, "%*[^]Content-Length: %d",&size);
//            ^ tried several things here 
```

我认为使用 sscanf 是一个好主意，因为我只想获得一些值（如果它们存在）。
我的想法是跳过所有我不想要的标题。

我的问题是：
1-sscanf 是个好主意吗？
2-如果不是什么方法会更好

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:44:07.787

第一次订购不应该*使用*这些`*scanf`功能。

解析 HTTP 标头比看起来要困难得多。我会先看看是否`libcurl`已经实现了你可以使用的东西，如果没有，直接去`flex`and `bison`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:25:08.133

使用库的**好处**是您不必了解它们是如何工作的。

使用库的**问题**在于您不必了解它们是如何工作的。

无论您的应用程序是否必须响应某些限制（考虑到服务器的安全性和速度），您都必须在实现细节上花费更多时间——这意味着了解问题，以便找到合适的解决方案。

这就是编程的全部意义所在。

提示：*不*使用库可能是处理 HTTP 标头解析的最佳方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T01:44:20.313

第一个答案：不要这样做。有足够多的奇怪的 HTTP 编码和大小写映射以及其他奇怪的东西，你自己可能会弄错。但是，如果您忽略这个好建议，那么...

第二个答案：不要使用 sscanf。它总是以泪水告终。考虑将字符串放入正则表达式库并捕获您想要的内容，或者逐行解析字符串。您可以为 "\r\nContent-Length:" 执行 strstr ，但这不会在标题的末尾停止，并且可能会匹配正文中意外的内容。您可以先搜索 \r\n\r\n 并找出结束的位置，然后执行 strstr 直到那时，但此时您正在双重搜索。

# sql - SQL Server 2008 加入两个查询

> ID：11533146
> 
> 赞同：4
> 
> 时间：2012-07-18T01:38:00.350
> 
> 标签：sql, sql-server, tsql

我在这里忽略了一些微不足道的事情。除了尝试练习连接两个查询之外，此查询没有任何特殊原因。我得到的错误是

```
Msg 156, Level 15, State 1, Line 10
Incorrect syntax near the keyword 'inner'.
Msg 156, Level 15, State 1, Line 16
Incorrect syntax near the keyword 'as'. 
```

查询是

```
select t.countyName, x.countyName
    from
    (

    SELECT DISTINCT Patient.patientid, tblStateCounties.countyName, Patient.countyCode
    FROM         Patient INNER JOIN
                          tblStateCounties ON Patient.stateCode = tblStateCounties.stateCode AND Patient.countyCode = tblStateCounties.countyCode
    WHERE     (Patient.patientage > 80)
    ) 
    inner join 
    (
    SELECT DISTINCT Patient.patientid, tblStateCounties.countyName, Patient.countyCode
    FROM         Patient INNER JOIN
                          tblStateCounties ON Patient.stateCode = tblStateCounties.stateCode AND Patient.countyCode = tblStateCounties.countyCode
    WHERE     (Patient.patientage < 80)
    ) as x on t.countyname=x.countyname 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T01:41:11.947

您忘记在第一个中使用**别名**`subquery`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T01:41:27.703

```
select t.countyName, x.countyName
from
(

     SELECT DISTINCT Patient.patientid, tblStateCounties.countyName, Patient.countyCode
     FROM         Patient 
     INNER JOIN tblStateCounties ON Patient.stateCode = tblStateCounties.stateCode 
                                 AND Patient.countyCode = tblStateCounties.countyCode
      WHERE     (Patient.patientage > 80)
) rsT
inner join 
(
      SELECT DISTINCT Patient.patientid, tblStateCounties.countyName, Patient.countyCode
      FROM         Patient 
      INNER JOIN tblStateCounties ON Patient.stateCode = tblStateCounties.stateCode   
                                 AND Patient.countyCode = tblStateCounties.countyCode
      WHERE     (Patient.patientage < 80)
) rsX on rsT.countyname=rsX.countyname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:07:12.227

采用

```
(
    SELECT DISTINCT Patient.patientid, tblStateCounties.countyName, Patient.countyCode
    FROM Patient INNER JOIN tblStateCounties
    ON Patient.stateCode = tblStateCounties.stateCode 
    AND Patient.countyCode = tblStateCounties.countyCode
    WHERE (Patient.patientage > 80)
) as t 
```

# java - jaxws 复杂类型包

> ID：11533148
> 
> 赞同：1
> 
> 时间：2012-07-18T01:38:21.037
> 
> 标签：java, wcf, jax-ws, jax-ws-customization

假设我有一个使用 wsimport 的 jaxws soap 生成客户端使用的 WCF 服务。服务 SEI 看起来像

```
@WebMethod(operationName = "DoSomething", action = "http://mydomain.com/PersonService/Dosomething")
@WebResult(name = "DoSomethingResult", targetNamespace = "http://mydomain.com/")
@RequestWrapper(localName = "DoSomething", targetNamespace = "http://mydomain.com/", className = "webservice.jaxws.DoSomething")
@ResponseWrapper(localName = "DoSomethingResponse", targetNamespace = "http://mydomain.com/", className = "webservice.jaxws.DoSomething")
public Person doSomething(
    @WebParam(name = "person", targetNamespace = "http://mydomain.com/")
    Person person); 
```

它采用复杂类型 Person 并返回相同类型的 Person 并生成 DoSomething 看起来像

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
  "person"
})
@XmlRootElement(name = "DoSomething")
public class DoSomething {

@XmlElement(nillable = true)
protected Person person;
public Person getPerson() {
    return person;
}
public void setPerson(Person value) {
    this.person = value;
} 
```

如果 Person 与 DoSomething 的包相同，则一切正常，只要我将 Person 移到其他地方，WCF 服务就无法从 Person 对象中获取任何内容（字段为 null 或 0），来自 WCF 的返回值无法被 JAXWS 正确反序列化，虽然没有例外。

我注意到如果它们在同一个包中，那么 setPerson 将被调用，但如果它们在不同的包中则不会。

我想知道是否可以将复杂类型 Person 放在与 DoSomething 不同的包中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:05:46.007

原来需要 Person 包中的神奇 package-info.java 文件

# aix - 显示每个用户的内存使用情况

> ID：11533150
> 
> 赞同：0
> 
> 时间：2012-07-18T01:38:48.390
> 
> 标签：aix

用户如何在 AIX7 中使用内存，例如

```
prstat -a 
```

在太阳能？

我尝试过使用“svmon -U”，但是在这一点上它对我来说基本上是难以理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T14:16:55.080

我认为您可以使用 topas 或 nmon。[您可以在Unix Rosetta Stone](http://bhami.com/rosetta.html)中找到更多命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T11:09:26.070

好吧，我不知道“prstat -a”返回什么，但试试：

```
svmon -U -O unit=MB 
```

# jquery - 如果在特定元素上不存在选定的类，则在 mouseup 上，然后从另一个元素中删除选定的类

> ID：11533151
> 
> 赞同：1
> 
> 时间：2012-07-18T01:38:52.583
> 
> 标签：jquery, toggle, mouseup

我有一系列按钮（A、B、C、D），可以像单选按钮一样切换，一次只能选择一个。如果用户选择了一个按钮，用户也可以再次单击相同的按钮来关闭。

还有一个额外的按钮 (X)，它与按钮 (A,B,C,D) 有关系。In which Button X can only be selected if an element within buttons (A,B,C,D) is selected.

1.  用户可以像单选按钮一样切换按钮（A，B，C，D）=**这有效**

2.  用户可以像单选按钮一样切换按钮（A、B、C、D），选择按钮 X，然后继续像单选按钮一样切换按钮（A、B、C、D），按钮 X 仍将保持突出显示。=**这行得通**

3.  任何一个按钮（A、B、C、D）都可以与按钮 X 一起选择。=**这有效**

我的问题是，如果取消选择按钮（A、B、C、D），则按钮 X 无法保持选中状态。要重新创建，请看这里。 [http://jsfiddle.net/froze1906/tHezS/](http://jsfiddle.net/froze1906/tHezS/)

1.  尝试单击按钮 X，您不能 b/c 它需要选择按钮之一（A、B、C、D）。

2.  单击按钮 A 并被选中，现在单击按钮 X 并被选中，现在用户可以从组中选择另一个按钮或切换按钮 X 后退。

3.  现在关闭您选择的任何按钮（A、B、C、D）并且仍然选择按钮 X。

我需要做些什么来检查按钮（A、B、C、D）是否被取消选择，当按钮（A、B、C、D）被关闭时，按钮 X 也会在 mouseup 上被取消选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:43:44.283

演示：http: [//jsfiddle.net/tHezS/1/](http://jsfiddle.net/tHezS/1/)

我也简化了你的代码。

```
$(".button_toggle").on(mouseup, function(evt){
    // If this is already toggled. Remove this class, and the class of the 'X'
    if($(this).hasClass("button_toggle_selected")){
        $(this).removeClass("button_toggle_selected");
        $(".button_x_icon_toggle").removeClass("button_toggle_selected");
    }else{
        //Remove .button_toggle_selected from other .button_toggle's
        //Add .button_toggle_selected to this element.
        $('.button_toggle.button_toggle_selected').removeClass('button_toggle_selected');
        $(this).addClass('button_toggle_selected');                
    }
}); 
```

# javascript - 如何获取并返回包含其 ID 的 Div

> ID：11533152
> 
> 赞同：1
> 
> 时间：2012-07-18T01:39:15.280
> 
> 标签：javascript, jquery

似乎是一个超级简单的问题，但我找不到答案。

我正在获取一个 DIV“用户条目”

```
var $user = $('#user-entry'); 
```

HTML：

```
<div id="user-entry">

<table style="border: none; width: 100%">
            <thead>
                <tr>
                    <th colspan="2" style="text-align: left">
                        @Html.Label("Hello World")
                    </th>
                </tr>
            </thead>
    </table>
</div> 
```

现在我想将它附加到另一个 div `<div id="role"></div>`。这就是 JQuery append(), appendTo(), prepend(), prependTo() 函数的用途。伟大的！

我的问题是，使用 DIV 时添加的 DIV 没有实际的 DIV 名称。如果示例运行：

```
 var $user= $('#user-entry');
            $($user.html()).appendTo('#role'); 
```

然后我的表被正确附加到“角色”，但用户 DIV 本身没有显示。

代替：

```
<div id="role">
   <div id="user-entry">
      <table style="border: none; width: 100%">
     </table>
   </div>
</div> 
```

我最终得到：

```
<div id="role">
      <table style="border: none; width: 100%">
     </table>
</div> 
```

如何捕获并返回名称为 Included 的 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:41:32.410

因为通过使用`html`方法你只是附加了 div 的内容，试试这个：

```
$('#user-entry').clone().appendTo('#role') 
```

[演示](http://jsfiddle.net/52bxz/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T01:41:41.637

这是正确的方法

```
$('#user-entry').appendTo('#role'); 
```

`$($user.html()).appendTo('#role');`创建内部元素的副本`<div id="user-entry">`并将它们附加到`<div id="role">`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T01:42:11.947

尝试：

```
$('#user-entry').appendTo('#role'); 
```

或者，如果您想克隆它，请尝试：

```
$('#user-entry').clone().appendTo('#role') 
```

# c# - Wpf 控制可见性？

> ID：11533153
> 
> 赞同：2
> 
> 时间：2012-07-18T01:39:56.703
> 
> 标签：c#, .net, wpf, vb.net, visibility

我正在创建一个 Wpf 浏览器应用程序，它对不同的页面有多个控件。每个页面都遵循相同的模式，如下所示：

在每个页面加载事件中，用户都可以看到两个组合框。当用户在 中选择任何值时，所有`combobox`控件（如`button`, ）对用户都是可见的。`label``textbox`

我想编写一个通用类/函数来隐藏控件，以便我可以在整个应用程序中使用。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T09:19:43.127

**解决方案1：**

在每个页面中，您都可以像这样添加一个触发器来隐藏/显示控件 -

```
<ComboBox Height="22" Name="comboBox1" /> 
<Grid>
   <Grid.Style>
        <Style TargetType="{x:Type Grid}"> 
            <Setter Property="Visibility" Value="Visible"></Setter> 
            <Style.Triggers> 
                <DataTrigger 
                    Binding="{Binding ElementName=comboBox1, Path=SelectedItem}" 
                    Value="{x:Null}"> 
                    <Setter Property="Visibility" Value="Collapsed"></Setter> 
                 </DataTrigger> 
            </Style.Triggers> 
        </Style>
   <Grid.Style>

  <!-- Your controls; TextBox, Buttons etc. -->

</Grid> 
```

**解决方案2：**

如果你想要更复杂的逻辑（比如基于两个组合框，那么你可以创建一个`MultiValueConverter`并在上面的 XAML 中使用它来设置`Visibility`网格。

如果在多个窗口中重复使用它，您可以创建一个样式并将其应用于所有窗口中的网格。

**解决方案3：**

按照道德逻辑的建议创建一个通用的 ViewModel。

如果您使用 ViewModel 方法，则不需要`Visibility`属性，只需`SelectedItem`在触发器或转换器中使用该属性即可；即使您想创建一个单独的属性，我建议您将其设为`Boolean`类型并在 XAML 中使用它。

您可以在所有三种情况下创建一个通用样式并在所有窗口中重复使用该样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T02:22:32.390

在您的 ViewModelBase 类中，创建一个 Type 的属性（例如 SelectedItem），作为您的 ComboBox 绑定到的列表的属性。并将此属性绑定到 ComboBox 的选定项。创建类型 Visibility 的另一个属性（例如 ControlVisibilty ）并将其绑定到所有控件（您要根据 ComboBox 选定项更改其可见性） Visiblity 属性。现在在 SelectedItem 属性的 Setter 中根据您的逻辑设置 ControlVisibilty 的值。您可以对另一个组合框执行相同的操作。我希望这有助于您了解。

# git - 需要有关 GIT 的建议，继续从测试服务器部署到生产服务器

> ID：11533155
> 
> 赞同：0
> 
> 时间：2012-07-18T01:40:29.133
> 
> 标签：git, github

一年多来我一直在思考这个问题，想问问是否有人对如何在 GIT 中继续部署工作流程有任何建议或经验。

**我的服务器结构。**

我有一个测试服务器和生产服务器。

测试服务器是生产服务器的镜像，它有我项目的最新版本。测试站点上还有其他未完成的故事（正在进行的开发故事）

**塞纳里奥**

我有一个新的用户故事将登录页面标题从“登录”更改为“安全登录”

我进入我的测试服务器并从 master 签出一个名为“hotfix_login_text”的分支

我完成了更改并要求我的测试人员在测试站点上测试我的故事。

测试人员已接受我的登录页面文本更改故事。

现在我需要将登录页面文本更改发布到我们的生产站点。

请记住，测试站点上还有其他故事仍在开发中，并且在我的登录文本更改当前所在的同一分支上。

**如何在不包含我不完整的故事的情况下将我的登录文本更改发布到我们的生产站点？**

我目前正在做的方式是手动

> 将 login.php 文件复制到我们生产站点目录的新副本

这是干净的，然后从那里提交到我们的生产站点。

我希望我上面的解释足够清楚。

您的帮助将不胜感激。

弗诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:08:58.603

有几种方法可以做到这一点。一种方法是将您的每个用户故事放在单独的分支上，并将您的生产代码放在另一个分支上。当一个功能完成并被接受时，将用户故事分支合并到生产分支中。

另一种方法是从你的开发分支中挑选你的提交到你的生产分支。 [有关详细信息，请参阅 git cherry pick 手册页。](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html). 只挑选与已完成用户故事相关的提交。

请注意，如果您将多个功能的工作合并到一个提交中，这些都不会起作用。在这种情况下，如果不手动操作，就无法挑选出单个文件。

# javascript - 在刷新 JS 上滑动到顶部

> ID：11533157
> 
> 赞同：0
> 
> 时间：2012-07-18T01:40:41.367
> 
> 标签：javascript, jquery, accordion

我正在使用此代码让我的页面在刷新时返回到页面顶部。但是，我希望它以与我的手风琴相同的平滑度滑到顶部。在 FF 中查看 - 不要在 IE9 中尝试这个，那里有一个我还没有发现的错误（除非你只是想为我修复它！）。

```
$(document).ready(function(){
$('html').animate({scrollTop:0}, 1);
$('body').animate({scrollTop:0}, 1);
}); 
```

你可以在这里看到它：http: [//imip.rvadv.com/index3.html](http://imip.rvadv.com/index3.html)

从更哲学的角度来看：这是一个愚蠢的想法吗？我真的应该关心这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:37:50.347

该`animate()`方法的第二个参数以毫秒为单位。改成`1000`应该没问题的。

```
$(document).ready(function(){
  $('body, html').animate({scrollTop:0}, 1000);
}); 
```

不过，这可能会给您带来一些跨浏览器的问题，特别是在 Opera 中，如此[处所述](https://stackoverflow.com/questions/4880743/jquery-animate-scrolltop-on-opera-bug/4915885#4915885)。

# java - 如何修改我的正则表达式使其不匹配？

> ID：11533159
> 
> 赞同：0
> 
> 时间：2012-07-18T01:40:44.350
> 
> 标签：java, regex

我写了这个正则表达式：

```
String regex = "^\\s+something\\s+(not\\s+)?else\\s+([-,\\s\\d]+)$"; 
```

这个代码：

```
String line = "something else 1, 2-3";
Matcher m = Pattern.compile(regex).matcher(line); 
```

`m.matches()`将返回`true`，这就是我想要的。

但是，对于以下代码，它也返回`true`，但我不希望它匹配。如何修改我的正则表达式以使其返回`false`？

```
String line = "something else 1 2 3";
Matcher m = Pattern.compile(regex).matcher(line); 
```

谢谢！

**更新：**我没有做任何范围检查。我只想看看列表中的空格之间是否有逗号。所以`1, 3, 5-7`是有效的，但`1, 2 5-7`不是`1 2 3`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:49:57.313

您并没有确切地说出您要做什么，但是如果我猜的话，例如：

```
((\d+|\d+-\d+),\s+)*(\d+|\d+-\d+)$ 
```

替换最后一位将只允许逗号分隔的数字和数字列表

# javascript - jquery-ui datepicker更改z-index

> ID：11533161
> 
> 赞同：84
> 
> 时间：2012-07-18T01:41:08.120
> 
> 标签：javascript, jquery, css, jquery-ui, datepicker

这个问题很简单，尽管我很难弄清楚如何解决它。

我正在使用 jQuery-ui 日期选择器以及定制的“ios 样式开/关切换”。此切换使用一些绝对定位的元素，这些元素当前显示在我的日期选择器顶部。

看看下面覆盖 7 月 6 日的丑陋圆圈......

![在此处输入图像描述](../Images/446dc157c4fbeb9a2b165adba86b4df0.png)

这样做的肮脏方法（至少是imo）是在我的一个样式表中编写样式，但我更愿意在选择器启动时使用一些javascript来完成这项工作。

我已经试过了

```
$('.date_field').datepicker(); 
$('.date_field').datepicker("widget").css({"z-index":100}); 
```

和

```
$('.date_field').datepicker({
    beforeShow: function(input, inst) { 
        inst.dpDiv.css({"z-index":100});
    }
}); 
```

但似乎每次启动日期选择器时 z-index 都会被覆盖。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-07-18T05:11:44.493

您在问题中的 JS 代码不起作用，因为 jQuery`style`每次调用它时都会重置 datepicker 小部件的属性。

`style`覆盖它的一个简单方法`z-index`是使用[另一个答案](https://stackoverflow.com/questions/715677/trouble-with-jquery-dialog-and-datepicker-plugins)`!important`中已经提到的 CSS 规则。另一个[答案](https://stackoverflow.com/a/8704775/1331430)建议在输入元素本身上设置和，这将自动复制到 Datepicker 小部件。`position: relative;``z-index`

但是，根据要求，如果出于某种原因您确实需要动态设置它，向您的页面添加更多不必要的代码和处理，您可以尝试以下操作：

```
$('.date_field').datepicker({
    //comment the beforeShow handler if you want to see the ugly overlay
    beforeShow: function() {
        setTimeout(function(){
            $('.ui-datepicker').css('z-index', 99999999999999);
        }, 0);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/8ndUN/1/)

我创建了一个延迟函数对象来设置`z-index`小部件的，在它被 jQuery UI 重置后，每次调用它。它应该足以满足您的需求。

CSS hack 远没有 IMO 丑陋，我在我的 CSS 中保留了一个空间，仅用于 jQuery UI 调整（就在我页面中的 IE6 调整之上）。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2013-07-18T15:25:55.783

有一种更优雅的方法可以做到这一点。添加这个CSS：

```
.date_field {position: relative; z-index:100;} 
```

jQuery 会将日历设置`z-index`为 101（比相应元素多一个）。该`position`字段必须是`absolute`,`relative`或`fixed`。jQuery 搜索第一个元素的父元素，它是绝对/相对/固定的，并获取它的'`z-index`

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-07-27T10:32:51.343

您需要使用`!important`子句来强制`z-index`使用 CSS 的内联值。

```
.ui-datepicker{z-index: 99 !important}; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-06T18:34:55.190

当我尝试将 datepicker 与引导模式结合使用时，这对我有用：

```
$('input[id^="txtDate"]').datepicker();
$('input[id^="txtDate"]').on('focus', function (e) {
    e.preventDefault();
    $(this).datepicker('show');
    $(this).datepicker('widget').css('z-index', 1051);
}); 
```

当然，更改选择器以适合您自己的需要。我将“z-index”设置为 1051，因为引导模式的 z-index 设置为 1050。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-02-13T19:54:46.533

> 日期选择器现在将弹出 z-index 设置为比其关联字段多一个，以使其保持在该字段的前面，即使该字段本身在弹出对话框中也是如此。默认情况下，z-index 为 0，因此 datepicker 以 1 结束。是否存在无法正确显示 datepicker 的情况？[jQuery 论坛帖子](https://forum.jquery.com/topic/z-index-1-datepicker-1-8#14737000000803068)

要获得 100 的 z-index。您需要输入，`z-index:99;`JQueryUI 会将日期选择器更新为`z-index:100`

`<input style="z-index:99;">` 或`<input class="high-z-index">`和 css `.high-z-index { z-index: 99; }`

您还可以指定要从对话框继承的 z-index，并让 jQueryUI 正确检测 z-index。

`<input style="z-index:inherit;">` 或`<input class="inhert-z-index">`和 css `.inherit-z-index { z-index: inherit; }`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-29T16:44:40.330

就我而言，没有任何效果。我需要将 z-index 添加到具有 datepicker 的输入类型。

```
<input type="text" class="datepicker form-control" datatype="date" style="z-index: 10000;" id="txtModalDate"> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-01T20:06:15.677

最好的自然方法是简单地将日期选择器元素放在一个“平台”上，该平台具有“相对”位置并且具有比显示在您的控件上方的元素更高的“z-index”......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-02T07:15:38.160

**这是用于引导日期时间选择器**

如果您的日期选择器由于滚动而隐藏在您的 div 使用中：

```
overflow-x: visible !important;
overflow-y: visible !important; 
```

在包含您的日期选择器和其他项目的整个 div 的 css 中，例如

```
.dialogModel{
    overflow-x: visible !important;
    overflow-y: visible !important;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-30T11:26:55.840

添加这个：

```
 $(document).ready(function()
    {
      $('#datepickers-container').css('z-index', 999999999);
    }; 
```

# java - 按下箭头键时如何防止 JScrollPane 滚动

> ID：11533162
> 
> 赞同：5
> 
> 时间：2012-07-18T01:41:08.483
> 
> 标签：java, swing, jscrollpane

我在 JScrollPane 中有一个 JPanel，并且 JPanel 在函数中使用箭头键。按下箭头键时 JScrollPane 滚动，这很烦人。如何使 JScrollPane 在按下箭头键时不滚动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T03:06:21.053

可能太多了，但你可以试试这个：

```
UIManager.getDefaults().put("ScrollPane.ancestorInputMap",  
        new UIDefaults.LazyInputMap(new Object[] {})); 
```

您也可以全局替换操作：

```
InputMap  actionMap = (InputMap) UIManager.getDefaults().get("ScrollPane.ancestorInputMap");
actionMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), new AbstractAction(){
    @Override
    public void actionPerformed(ActionEvent e) {
    }});

actionMap.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), new AbstractAction(){
    @Override
    public void actionPerformed(ActionEvent e) {
    }}); 
```

按照@MadProgrammer 的建议，您可以替换键盘箭头的特定操作。使用`unitScrollRight`和`unitScrollDown`动作名称：

```
scrollPane.getActionMap().put("unitScrollRight", new AbstractAction(){
    @Override
    public void actionPerformed(ActionEvent e) {
    }});
scrollPane.getActionMap().put("unitScrollDown", new AbstractAction(){
    @Override
    public void actionPerformed(ActionEvent e) {
    }}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T01:53:36.870

我认为您将不得不替换输入/操作映射参考

```
ActionMap am = scrollPane.getActionMap();
am.remove("scrollDown");
am.remove("scrollUp"); 
```

我从 BasicScrollPaneUI 中提取的键，因此它们可能会在 UI 之间发生变化，但这个想法应该可行

**更新**

好吧，那糟透了。我希望摆脱简单。

```
 InputMap im = comp.getInputMap();
    im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), "scrollDown");

    ActionMap am = comp.getActionMap();
    am.put("scrollDown", new AbstractAction() {

        @Override
        public void actionPerformed(ActionEvent e) {

            System.out.println(e.getSource() + " - no go down");

        }
    }); 
```

应该导致动作无效。我让它与 JList 和大型 JPanel 一起工作

当我在这里时：

```
 private static final String SCROLL_UP = "scrollUp";
    private static final String SCROLL_DOWN = "scrollDown";
    private static final String SCROLL_HOME = "scrollHome";
    private static final String SCROLL_END = "scrollEnd";
    private static final String UNIT_SCROLL_UP = "unitScrollUp";
    private static final String UNIT_SCROLL_DOWN = "unitScrollDown";
    private static final String SCROLL_LEFT = "scrollLeft";
    private static final String SCROLL_RIGHT = "scrollRight";
    private static final String UNIT_SCROLL_LEFT = "unitScrollLeft";
    private static final String UNIT_SCROLL_RIGHT = "unitScrollRight"; 
```

其他输入/动作映射命令是

# plugins - Liferay 是否为 IDEA 提供插件？

> ID：11533164
> 
> 赞同：8
> 
> 时间：2012-07-18T01:41:14.047
> 
> 标签：plugins, intellij-idea, liferay

Liferay 是否为 IDEA 提供插件？或者有没有人在做这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T05:16:27.383

Liferay Inc 目前没有计划按照[Liferay IDE](http://www.liferay.com/community/liferay-projects/liferay-ide/overview) for Eclipse 平台发布专门用于 Liferay 开发的 IntelliJ 插件。

但是，这并不意味着 Liferay 开发不能与 IntelliJ 很好地配合使用。实际上，它在公司内部和外部都非常流行和成功，只有 IntelliJ 中的 Java EE 支持。一些 IntelliJ+Liferay 用户还添加了几个专门讨论这种组合的 wiki 页面。[维基](http://www.liferay.com/community/wiki/-/wiki/Main/IntelliJ)页面 1 ，[维基页面 2](http://www.liferay.com/community/wiki/-/wiki/Main/Using+IntelliJ+with+Liferay)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-11T08:28:55.333

我知道这个问题很老，但实际上 Liferay Inc. 有一个适用于 IDEA 的 Liferay 插件，您可以从[官方 Jetbrains 插件页面下载它](https://plugins.jetbrains.com/plugin/10739-liferay-intellij-plugin)

同样可以通过 File -> Setting -> Plugins 集成到 IDEA 中。选择“浏览存储库”并搜索“Liferay”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T11:28:08.157

IDEA 有一个 liferay 插件，但它只适用于合适的 IDEA 版本，因为它不适用于 64 位版本的 IDEA。

# php - 使用 php 遍历 javascript 对象

> ID：11533167
> 
> 赞同：0
> 
> 时间：2012-07-18T01:41:31.380
> 
> 标签：php, arrays, json

我正在尝试根据用户指定的键打印值。我的 javascript 对象看起来像

```
$test={
"timed_out": false,
 "hits": {

    "hits": [
        {
            "_index": "test2",
            "_type": "news",
            "_source": {
                "partnerName": "Accountancy_Age",

                "entityCount": 4,
                "Categories": {
                    "Facets": [
                        {
                            "count": 1,
                            "entity": "Company",
                            "Company": [
                                {
                                    "Pearson_Plc-Sponsored_Adr": [
                                        {
                                            "count": 1,
                                            "entity": "Pearson"
                                        }
                                    ],
                                    "sector": "Communications",
                                    "ticker": "PSO",
                                    "entity": "Pearson Plc-Sponsored Adr",
                                    "type": "ADR"
                                }
                            ]
                        },
                        {
                            "CorporateAction": [
                                {
                                    "count": 2,
                                    "entity": "restructuring"
                                }
                            ],
                            "count": 2,
                            "entity": "CorporateAction"
                        },
                        {
                            "count": 1,
                            "entity": "Persons",
                            "Persons": [
                                {
                                    "count": 1,
                                    "entity": "Steven Pearson"
                                }
                            ]
                        }
                    ]
                },
                "Title": "PwC takes on major London oil refinery administration ",
                "Tags": "News",
                "ParentUrl": "http://www.accountancyage.com/feeds/rss/maxcontentwords/75/category/business-regulation",
                "Link": "http://www.accountancyage.com/aa/news/2141170/pwc-takes-major-london-oil-refinery-administration?WT.rss_f=Business+regulation&WT.rss_a=PwC+takes+on+major+London+oil+refinery+administration+",
                "SourceName": "Accountancy_Age",
                "SentimentResource": "neutral",
                "Content": "<div class=\"article_description\" algoscore=\"83\">\n <p algoscore=\"34\"><strong>LONDON'S BIGGEST </strong>oil refinery has been handed over to administrators from PwC by its Swiss parent company.</p>\n <p algoscore=\"37\">Petroplus, which refines 220,000 barrels a day from the Thames, was declared insolvent after the group suffered refinancing issues, a high cost base and high restructuring costs.</p>\n <p algoscore=\"35\">The business has around 60 employees, and supplies aronud a fifth of London and the south-east's 2,000 forecourts.</p>\n <p algoscore=\"40\">&quot;Our immediate priority is to continue to operate the Coryton refinery and the Teeside storage business, without disruption while the financial position is clarified and restructuring options are explored,&quot; said PwC joint administrator Steven Pearson.</p>\n <p algoscore=\"38\">&quot;Over coming days we intend to commence discussions with a number of parties including customers, employees, the creditors and the government to secure the future of the Coryton and Teesside sites.</p>\n</div>"
            }
        },
        {
            "_index": "test3",
            "_type": "news",

            "_source": {
                "partnerName": "propertyFile 7",
                "entityCount": 33,
                "Categories": {
                    "Types": {
                        "Facets": [
                            {
                                "count": 3,
                                "entity": "Company",
                                "Company": [
                                    {
                                        "sector": "Basic Materials",
                                        "ticker": "BHP",
                                        "entity": "Bhp Billiton Ltd-Spon Adr",
                                        "Bhp_Billiton_Ltd-Spon_Adr": [
                                            {
                                                "count": 1,
                                                "entity": "BHP Billiton Ltd"
                                            }
                                        ],
                                        "type": "ADR"
                                    },
                                    {
                                        "sector": "Communications",
                                        "ticker": "CHL",
                                        "entity": "China Mobile Ltd-Spon Adr",
                                        "type": "ADR",
                                        "China_Mobile_Ltd-Spon_Adr": [
                                            {
                                                "count": 1,
                                                "entity": "China Mobile"
                                            }
                                        ]
                                    },
                                    {
                                        "sector": "Energy",
                                        "Royal_Dutch_Shell_Plc-Adr": [
                                            {
                                                "count": 1,
                                                "entity": "Royal Dutch"
                                            }
                                        ],
                                        "ticker": "RDS/A",
                                        "entity": "Royal Dutch Shell Plc-Adr",
                                        "type": "ADR"
                                    }
                                ]
                            },
                            {
                                "count": 6,
                                "entity": "Country",
                                "Country": [
                                    {
                                        "region": "Asia",
                                        "Taiwan": [
                                            {
                                                "count": 1,
                                                "entity": "Taiwan"
                                            }
                                        ],
                                        "index": "TAIWAN TAIEX INDEX",
                                        "entity": "Taiwan",
                                        "currency": "Dollar (TWD)"
                                    },
                                    {
                                        "region": "Latin Americas",
                                        "index": "BRAZIL BOVESPA INDEX",
                                        "Brazil": [
                                            {
                                                "count": 1,
                                                "entity": "Brazil"
                                            }
                                        ],
                                        "entity": "Brazil",
                                        "currency": "Real (BRL)"
                                    },
                                    {
                                        "region": "East Europe",
                                        "index": "ISE NATIONAL 100 INDEX",
                                        "entity": "Turkey",
                                        "Turkey": [
                                            {
                                                "count": 1,
                                                "entity": "Turkey"
                                            }
                                        ],
                                        "currency": "Lira (TRY)"
                                    },
                                    {
                                        "region": "Europe",
                                        "index": "BLOOMBERG EUROPEAN 500 , Euro Stoxx 50 Pr",
                                        "entity": "Europe",
                                        "Europe": [
                                            {
                                                "count": 1,
                                                "entity": "Europe"
                                            }
                                        ],
                                        "currency": "Euro (EUR)"
                                    },
                                    {
                                        "region": "Asia",
                                        "index": "CSI 300 INDEX , SHANGHAI SE COMPOSITE , SHENZHEN SE COMPOSITE IX , SSE COMPONENT STOCK IX",
                                        "entity": "China",
                                        "China": [
                                            {
                                                "count": 2,
                                                "entity": "China"
                                            }
                                        ],
                                        "currency": "Yuan Renminbi (CNY)"
                                    }
                                ]
                            },
                            {
                                "AnalystLevel": [
                                    {
                                        "count": 1,
                                        "entity": "Buy"
                                    },
                                    {
                                        "count": 1,
                                        "entity": "hold"
                                    },
                                    {
                                        "count": 4,
                                        "entity": "market"
                                    }
                                ],
                                "count": 6,
                                "entity": "AnalystLevel"
                            },
                            {
                                "MoneyEvent": [
                                    {
                                        "count": 1,
                                        "entity": "Fund managers look at all sizes of companies and \r\nbase their selections on an index of companies that have paid at least $5 \r\nmillion in dividends over the past year."
                                    }
                                ],
                                "count": 1,
                                "entity": "MoneyEvent"
                            },
                            {
                                "DateEvent": [
                                    {
                                        "count": 1,
                                        "entity": "CHICAGO, June 1 (Reuters) - Finding consistent total stock returns has \r\nalways been a challenge."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "Many, if not most, of these funds, it should be noted, were touted last \r\nyear as part of a growing group of \"low-volatility\" stock funds."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "The fund invests in companies \r\namong the top 100 dividend payers that have had payouts in the previous \r\nthree years."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "Yet the insurer is \r\nthe top holding in the SPDR S&P International Dividend ETF , paying a 5.38 \r\npercent dividend yield as of June 1."
                                    }
                                ],
                                "count": 4,
                                "entity": "DateEvent"
                            },
                            {
                                "count": 5,
                                "LocationEvent": [
                                    {
                                        "count": 1,
                                        "entity": "And some of the best sectors for high-dividend players are \r\nfar from Wall Street."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "But even as the euro zone beast continues to flair \r\nits nostrils and U.S. employment wheezes, there are stocks that are worthy \r\ncontenders, particularly ones that pay dividends."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "That's \r\nroughly twice the population of the U.S. already."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "These funds can be volatile and will be impacted if more European countries \r\nslip into recession, the U.S. falters or the Eurozone banking crisis isn't \r\nresolved."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "To find dividend players in emerging markets, I suggest the WisdomTree \r\nEmerging Markets Equity Income fund, which gives you exposure to China, \r\nBrazil, Taiwan and Turkey."
                                    }
                                ],
                                "entity": "LocationEvent"
                            },
                            {
                                "count": 3,
                                "CompanyEvent": [
                                    {
                                        "count": 1,
                                        "entity": "China Mobile, the largest cellphone carrier in the People's \r\nRepublic, has more than 600 million subscribers - and is growing."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "The Admiral Group, a U.K.-based \r\nauto insurance company, for example, is hardly in a league with the oil \r\nproducer Royal Dutch Shell in terms of name recognition."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "Then you'd want a \r\ncompany like BHP Billiton Ltd. ), one of the world's largest natural \r\nresources companies."
                                    }
                                ],
                                "entity": "CompanyEvent"
                            },
                            {
                                "count": 1,
                                "entity": "AnalystAction",
                                "AnalystAction": [
                                    {
                                        "count": 1,
                                        "entity": "Buy"
                                    }
                                ]
                            },
                            {
                                "count": 2,
                                "entity": "PercentEvent",
                                "PercentEvent": [
                                    {
                                        "count": 1,
                                        "entity": "Europe's largest oil producer reported \r\nthat its earnings were up 11 percent in the first quarter."
                                    },
                                    {
                                        "count": 1,
                                        "entity": "Shell, by the way, is no slouch in the dividend department either, paying \r\n5.53 percent as of the same date."
                                    }
                                ]
                            },
                            {
                                "count": 1,
                                "entity": "Person",
                                "Person": [
                                    {
                                        "count": 1,
                                        "entity": "John Wasik"
                                    }
                                ]
                            },
                            {
                                "count": 1,
                                "entity": "PersonEvent",
                                "PersonEvent": [
                                    {
                                        "count": 1,
                                        "entity": "By John Wasik"
                                    }
                                ]
                            }
                        ]
                    }
                },
                "Title": "Where in the world are dividends good?",
                "ParentUrl": "http://feeds.reuters.com/reuters/blogs/JohnWasik?format=xml",
                "Tags": "Blog",
                "Link": "http://www.reuters.com/article/2012/06/01/column-wasik-worlddividends-idUSL1E8H15SF20120601?feedType=RSS&feedName=everything&virtualBrandChannel=11563",
                "SourceName": "Reuters",
                "SentimentResource": "positive",
                "Content": "<span id=\"articleText\" algoscore=\"413\"><p></p><span class=\"focusParagraph\"></span><p>By <a href=\"http://blogs.reuters.com/search/journalist.php?edition=us&amp;n=john.wasik&amp;\">John Wasik</a></p><p>CHICAGO, June 1 (Reuters) - Finding consistent total stock returns has always been a challenge. But even as the euro zone beast continues to flair its nostrils and U.S. employment wheezes, there are stocks that are worthy contenders, particularly ones that pay dividends. While they don't eliminate market risk, dividends can bolster total return in skittish equity markets. And some of the best sectors for high-dividend players are far from Wall Street.</p><p>For long-term investing, think commodities, energy, utilities and non-banking financial services. Banking is still touchy, but insurance is a safer bet.</p><p>Established, brand-name stocks often pay large dividends, but that doesn't mean they should dominate your portfolio. The Admiral Group, a U.K.-based auto insurance company, for example, is hardly in a league with the oil producer Royal Dutch Shell in terms of name recognition. Yet the insurer is the top holding in the SPDR S&amp;P International Dividend ETF , paying a 5.38 percent dividend yield as of June 1.</p><p>Shell, by the way, is no slouch in the dividend department either, paying 5.53 percent as of the same date. Europe's largest oil producer reported that its earnings were up 11 percent in the first quarter.</p><p>The international dividend strategy is often rooted in sectors in which profits are consistent and growing. That translates into steady dividend growth year after year, although the sectors that are favored for stock-price appreciation will vary.</p><p>Let's say you were long in commodities, which isn't a bad play considering the demand for raw materials from developing countries. Then you'd want a company like BHP Billiton Ltd. ), one of the world's largest natural resources companies. BHP mines aluminum, copper, coal, iron ore, nickel, silver and uranium and also has oil and gas reserves.</p><p>Another growth sector is telecommunications, particularly in emerging economies. China Mobile, the largest cellphone carrier in the People's Republic, has more than 600 million subscribers - and is growing. That's roughly twice the population of the U.S. already.</p><p>A key part of the global dividend strategy is to stay in sectors that are likely to continue dividend growth. That's why exchange-traded funds make the most sense when investing in these companies. The funds can hold broad indexes of dividend payers so you don't have to guess which companies will maintain or raise their payouts. ETFs also blunt risk, since unusually high dividends can be a sign of a company's financial distress.</p><p>To find dividend players in emerging markets, I suggest the WisdomTree Emerging Markets Equity Income fund, which gives you exposure to China, Brazil, Taiwan and Turkey. Fund managers look at all sizes of companies and base their selections on an index of companies that have paid at least $5 million in dividends over the past year. An alternative is the SPDR S&amp;P Emerging Markets Dividend ETF.</p><p>If you prefer a focus on more developed markets, then consider the iShares Dow Jones International Dividend Index ETF . The fund invests in companies among the top 100 dividend payers that have had payouts in the previous three years. A similar fund is the PowerShares International Dividend Achievers Portfolio.</p><p>Many, if not most, of these funds, it should be noted, were touted last year as part of a growing group of &quot;low-volatility&quot; stock funds. While I think that has been a misnomer because it implies that these vehicles won't be hit by general market declines - they certainly will - they deserve a place in your portfolio.</p><p>When selecting a global dividend-stock fund, keep in mind that they won't insulate you from market risk and they are not bond funds.</p><p>These funds can be volatile and will be impacted if more European countries slip into recession, the U.S. falters or the Eurozone banking crisis isn't resolved. They also are subject to sector risk. If they are over concentrated in say, energy, and that sector is sold off in a market correction, then you will see declines in share prices. Buy them to augment your current stock positions and to boost income, but they shouldn't be core holdings.</p></span>",
                "ContentHash": 783187784,
                "LinkObjects": {
                    "LinkObjects": [
                        {
                            "Link": "http://blogs.reuters.com/search/journalist.php?edition=us&amp;n=john.wasik&amp;",
                            "Object": "John Wasik"
                        }
                    ]
                }
            }
        }]}}; 
```

我在这里试图实现的是，如果用户指定 wordCount，那么它应该列出 json 中 wordCount 的所有出现。

我的代码看起来像，

```
$.ajax({
url:"/elasticsearch-head/lib/es/queryManipulate.php",
type: 'POST',
datatype: 'json',
data: { index: _index_select, category: _field_select},
success:function(jsonQuery)
    {
    //alert(jsonQuery);
    }

});

<?php
$index=$_POST["index"];
$selectCategory=$_POST["category"];
$url="http://localhost:9200/".$index."//_search";
$object=json_decode($_POST["field"]); 
$fields=array();
$fields = explode(',',$selectCategory);
$results = array();
for ($from = 0; $from <50; $from+=10){
$object->from=$from; 
$requestJSON=json_encode($object);
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $requestJSON);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$resultJSON= curl_exec($ch); // equivalent of our JSON string that Ive shown above
$resultObject = json_decode($resultJSON);
curl_close ($ch);
$hits = $resultObject->hits->hits;
$m=0;
for($j=0 ; $j < sizeOf($hits) ; $j++){
    $result = array();
    for($i=0 ; $i< sizeOf($fields) ; $i++){
    if($fields[$i]=="Categories->Types->Facets")
            {               
                $source = $hits[$j]->_source->Categories->Types->Facets;
                //echo $m++ . ";" .sizeof($source)."<br>";
                for($k=0; $k < sizeof($source); $k++)
                {
                    //echo $fields[$i];
                    //echo json_encode($source[$k]->entity) ."<br><br>";
                    $result[$j]->{$fields[$i]} = json_encode($source[$k]->entity);
                    //echo $result[$j]->{$fields[$i]};
                }
            }
            else
            {
                echo "test1";
                $source = $hits[$j]->_source;
                $result[$j]->{$fields[$i]} = json_encode($source->{$fields[$i]});
            }       

    }

    $results=array_merge($results,$result);

}
   }

     for($j=0 ; $j < sizeOf($fields) ; $j++) {
 echo $fields[$j].",";
   }
   echo "<br>";
   for($j=0 ; $j < sizeOf($results) ; $j++) {
$result = $results[$j];
$line="";
for($i=0 ; $i< sizeOf($fields) ; $i++){
            #echo var_dump($result);
            $field = $fields[$i];
            $line.=$result->{$field}.",";
}
echo $line."<br>";
    }
    ?> 
```

如果输入不是数组，这将起作用，如果我们给输入一个数组说 Company fpr exaample，并且我想输出该数组中列出的项目，我将如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:24:48.630

尝试这样的事情：

```
$output = null;
array_walk_recursive($array, "callback", $output);

function callback ($value, $key, &$output)
{
    if ($key == 'wordCount')
    {
        $output .= $value;
    }
} 
```

# jquery - jQuery.easing[jQuery.easing.def] 不是一个函数

> ID：11533168
> 
> 赞同：24
> 
> 时间：2012-07-18T01:41:35.817
> 
> 标签：jquery, wordpress, jquery-easing

当我查看控制台时，出现以下错误：

```
jQuery.easing[jQuery.easing.def] is not a function 
```

我正在尝试在 WordPress 上制作一个滑块。我正在本地主机上工作，所以我无法准确显示发生了什么。但是，当滑块只是在 WordPress 之外的 HTML 文件中时，它可以工作。在 WordPress 中，它给了我这个错误。任何洞察问题可能是什么将不胜感激。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-05-04T02:44:15.657

为大家节省一些时间。打开您的 Jquery 缓动插件文件并将代码包装在里面：

```
$(document).ready(function() {
  Code goes here...
}); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-20T16:13:35.660

请检查您是否多次加载 jQuery。如果您已手动插入页脚，请尝试将其删除。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-10-02T14:06:16.017

问题是

```
swing: function (x, t, b, c, d) {
    return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
} 
```

此函数中的 jQuery 不能等同于`jQuery.extend( jQuery.easing,`已应用的 jQuery。

1.  替换`jQuery`为`$`
2.  包装代码

    ```
    (function($, undefined) {
      ...
    }) (jQuery); 
    ```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-07-18T02:03:05.160

did you import the jQuery easing plugin? something like

```
 <script src="http://code.jquery.com/jquery.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script> 
```

in your page?

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-09-15T10:25:50.443

```
if(typeof jQuery.easing[jQuery.easing.def] == 'function'){
    return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
} 
```

在 easing.js 上的 swing() 函数上尝试此代码

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-07-17T06:31:42.117

在使用插件或使用 document.ready 之前将 jquery.easing.1.3.js 放到 head 标签中

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-11-17T03:51:17.587

不要在 header 上声明脚本，当文档完全加载时通过 jQuery 的 .getScript() 函数调用它。

例子：

```
<script>
$( document ).ready(function() {
    $.getScript('path_to_script/easing_script_name.js');
});
</script> 
```

该错误是由于在缓动脚本完全加载之前调用了 jQuery。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-01-23T12:15:12.303

您是否正在导入 jQuery 缓动插件？或者任何高于 1.7.2 的版本？

然后删除它并使用它：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-08T09:56:21.667

如果您在 jQuery 或 jQuery UI 调用之前调用 WordPress 滑块插件的 javascript，则可能会发生这种情况。

是这样解决的吗？

```
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/wordpress-slider-plugin.js"></script> 
```

# python - 试图在 Python 中找到一个计时器

> ID：11533169
> 
> 赞同：0
> 
> 时间：2012-07-18T01:41:40.617
> 
> 标签：python, windows, memory, timer, windows-vista

我正在开发一个使用计时器的 Python 程序。这将是一个记忆游戏，弹出一个单词，计时器数到 5，5 秒后单词消失，你必须从记忆中输入单词。我已经进行了一些搜索，并且看到了一些程序执行时间的事情，但没有做任何我想做的事情。有没有人有代码来做这样的事情？我在 Windows Vista 计算机上使用 Python 2.7.3。

在此先感谢， 席德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:44:30.623

time.sleep(seconds) 将休眠几秒钟，您可以打印一条消息

例如：

```
import time
for i in range(5,0,-1):
     print "%d Mins Left"%i
     time.sleep(60) 
```

但是，如果您想更新上一​​次打印，则需要查看 curses 库（如果您使用的是终端）或 wxPython 或 pygame 之类的东西，或者如果您想使用图形，则需要查看 python 的无数其他图形库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T01:48:50.160

使用[时间](http://docs.python.org/library/time.html)模块：

```
from time import time
start = int(time())
topass = 5
while int(time()) - topass < start:
    pass
print topass, "seconds have passed" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T01:50:50.837

如果它有一个 GUI，您可以使用tkinter 小部件`Tkinter`的方法轻松构建这个应用程序。`after`

如果您不打算使用 GUI，则可能需要 2 个线程（1 个用于计时，1 个用于接受来自键盘的输入）。

# php - 如何关联价值观？

> ID：11533172
> 
> 赞同：0
> 
> 时间：2012-07-18T01:41:45.403
> 
> 标签：php

我有 10 组 3 个值。在每一点上，我只会知道其中的 1 个值，并且需要检索其他 2 个值。例如，我知道 id_a2 是什么，如何使用它来获取 id_a1 和 id_a3？

```
id_a1, id_a2, id_a3
id_b1, id_b2, id_b3
id_c1, id_c2, id_c3... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:42:57.517

将其存储在一个多维数组中，然后循环遍历它：

```
$data = array(
    array('id_a1', 'id_a2', 'id_a3'),
    array('id_b1', 'id_b2', 'id_b3'),
    array('id_c1', 'id_c2', 'id_c3')
);

find_siblings('id_b2', $data); // returns: array('id_b1', 'id_b3')

function find_siblings ( $needle, $haystack )
{
    foreach ( $haystack as $array )
    {
        if ( in_array($needle, $array) )
        {
            $out = array();

            foreach ( $array as $value )
            {
                if ( $value != $needle ) $out[] = $value;
            }

            return $out;
        }
    }
} 
```

在此处查看实际操作：http: [//viper-7.com/VPVTnU](http://viper-7.com/VPVTnU)

# java - 为什么我不能覆盖枚举中的公共抽象方法

> ID：11533173
> 
> 赞同：2
> 
> 时间：2012-07-18T01:42:11.667
> 
> 标签：java, enums, abstract

我按照家庭作业的说明完成了以下代码：

```
public enum AccountType {
    Checking {
        @Override
        String acctType() { return "Checking Account"; }
    },
    Savings {
        @Override
        String acctType() { return "Saving Account"; }
    },
    CreditCard {
        @Override
        String acctType() { return "Credit Card Account"; }
    };

    abstract String acctType();
} 
```

但是，最初，我尝试这样做：`public abstract String acctType();`并在每个覆盖的方法上收到以下错误：

```
stringValue() in  cannot override stringValue() in AccountType; 
attempting to assign weaker access privileges; 
was public 
```

`public`所以我的问题是抽象方法上的修饰符是怎么回事？枚举本身被声明为公共类，所以我不明白当两者都*分配较弱的访问权限*时~~应该~~似乎是`public`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:48:21.297

错误消息意味着如果您定义具有特定可见性的抽象方法，则必须定义实现以至少具有该可见性。

在这种特定情况下，这意味着如果抽象方法是公共的，那么实现也必须是公共的。

```
public enum AccountType {
    Checking {
        @Override
        public String acctType() { return "Checking Account"; }
    },
    Savings {
        @Override
        public String acctType() { return "Saving Account"; }
    },
    CreditCard {
        @Override
        public String acctType() { return "Credit Card Account"; }
    };

    public abstract String acctType();
} 
```

# php - preg_replace_callback 与数组模式和替换

> ID：11533175
> 
> 赞同：1
> 
> 时间：2012-07-18T01:42:14.170
> 
> 标签：php, preg-replace, preg-replace-callback

我有一个函数，它使用`preg_replace()`模式和替换是数组的地方。我需要一个计数器来跟踪替换，所以我将函数转换为`preg_replace_callback`与闭包一起使用，但我似乎无法找到一种方法来区分传递给回调匹配的匹配模式。有没有办法使用 preg_replace_callback 进行数组 => 数组替换？

理想情况下，这是我想要工作的，但显然它不会因为 $pattern 和 $replace 在调用中被评估，而不是在每次替换之间

```
function replaceTags($text)
{
    $i = 1;

    $pattern = array(
        '/\[d\](.*?)\[\/d\]/',
        '/\[s\](.*?)\[\/s\]/',
    );

    $replace = array(
        '<div id="'.($i++).'">$1</div>',
        '<span id="'.($i++).'">$1</span>',
    );

    return preg_replace($pattern, $replace, $text);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:01:00.263

如果我理解正确，您只需要在调用回调函数之间保持状态即可。理想的方法是使用成员函数。状态存储在对象实例中。每次调用时，您都可以修改对象，改变您的状态。

我还为您的模式添加了额外的捕获，以便区分回调中的模式。

```
<?php
class TagReplacer {
    private $counter = 0;

    public function replacer($matches) {
        // modify the state
        $this->counter++;

        // return the replacement text using the state
        if ($matches[1] === "d")
            $tag = 'div';
        else
            $tag = 'span';
        return "<{$tag} id=\"{$this->counter}\">{$matches[2]}</{$tag}>";
    }
}

function replaceTags($text) {
    $stateObject = new TagReplacer();
    $patterns = array(
        '/\[(d)\](.*?)\[\/d\]/',
        '/\[(s)\](.*?)\[\/s\]/',
    );

    return preg_replace_callback(
            $patterns,
            array(&$stateObject, "replacer"),
            $text);
}

echo replaceTags("zzz[d]123[/d]zzz[s]456[/s]zzz[d]78[/d]zzz[s]90[/s]zzz");
?> 
```

输出是

```
zzz<div id="1">123</div>zzz<span id="3">456</span>zzz<div id="2">78</div>zzz<span id="4">90</span>zzz 
```

我很惊讶这些 ID 不是按数字顺序排列的。我的猜测是 preg_replace_callback 遍历模式数组，一次为每个模式执行所有替换。

# c# - 如何通过 StreamReader 读取 .rtf 忽略 .rtf 文件格式？（不维护它）

> ID：11533181
> 
> 赞同：1
> 
> 时间：2012-07-18T01:43:21.840
> 
> 标签：c#, rtf, streamreader

我有一个,和文件的`StreamReader`读数。我将读取的内容存储在一个变量中，然后我将此变量打印到一个 问题是我的是黑色的并且是绿色的，所以如果文件中的文本颜色是黑色，它将在 TextBox 中不可见，而不是提到它不会使用我在 TextBox 中指定的字体！`.txt``.rtf``.docx``string``RichTextBox``RichTextBox` `BackColor``ForeColor``.rtf`

也许我可以只使用普通的 TextBox，而不是 RichTextBox，但那样我将无法为 TextBox 中的文本着色......

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:41:14.573

一种可能性是`RichTextBox`在表单上设置第二个不可见的。从 中读取 RTF `StreamReader`，将其存储在隐藏文本框中，然后从隐藏文本框中读取文本并将其写入可见文本框中。就像是：

```
string rtfText = File.ReadAllText(filename);
hiddenTextBox.Rtf = rtfText;
visibleTextBox.Text = hiddenTextBox.Text; 
```

不完全优雅，但它为您处理剥离格式的讨厌工作。

# z3 - z3 4.0 C# API 是否只能针对 .net 4.0 框架？

> ID：11533184
> 
> 赞同：2
> 
> 时间：2012-07-18T01:43:39.133
> 
> 标签：z3

我们有一个庞大的 .net framework 3.5 系统，但似乎 z3 4.0 C# API 仅适用于 .net framework 4.0。无论如何，我们的系统是否可以在当前不升级 .net 框架版本的情况下使用该 API（这样做很难）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:46:47.610

.NET 接口的当前代码需要 .NET 4.0，因为它依赖于此版本中首次引入的一些功能（例如，System.Numerics 和 System.Collections.Concurrent）。不过升级到 4.0 应该不是什么大问题，它只需要顶级应用程序，因为它应该与为 3.5 框架编译的其他组件向后兼容（除了少数例外，请参阅[MSDN .NET 版本兼容性](http://msdn.microsoft.com/en-us/library/ff602939.aspx)）。

如果您的代码不需要 BigIntegers，则可以为我们解决这些问题；我可以为你制作一个“特别版”。不过，这需要付出一些努力，并且不会有未来的更新，所以我们应该只在绝对必要的情况下考虑这一点。

我们目前正在研究发布 .NET API 源代码的可能性，因此未来此类适应和修改可以由最终用户自己完成。在这种情况下，我会要求感兴趣的用户直接与自己联系，以便我们可以根据具体情况讨论“特别版”。

# kinect - Kinect 设备未连接

> ID：11533188
> 
> 赞同：1
> 
> 时间：2012-07-18T01:43:58.910
> 
> 标签：kinect

我一直试图让我的 Kinect 连接到我的电脑。我已经安装了驱动程序和 OpenNI，当我尝试运行 NiViwer 64 时，我得到的唯一消息是：“设备：PrimeSense/SensorKinect/5.1.2.1：设备未连接！”。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:29:45.173

当涉及到 OpenNI 时，安装驱动程序、sdk 等的顺序是正确的。你必须确保你没有从微软安装任何东西，因为它可能会导致一些问题。IMO 卸载所有内容并完成本教程： http: [//www.codeproject.com/Articles/148251/How-to-Successfully-Install-Kinect-on-Windows-Open](http://www.codeproject.com/Articles/148251/How-to-Successfully-Install-Kinect-on-Windows-Open)

# json - d3.json 和 servlet doGet 请求

> ID：11533189
> 
> 赞同：0
> 
> 时间：2012-07-18T01:44:03.540
> 
> 标签：json, servlets, get, d3.js

我想通过 doGet 请求从 servlet 传递 json 来使用 d3 动态可视化一些 java 代码的输出...

我知道我可以通过这样做使用 d3 发出 HTTP 请求......

```
d3.json("data.js", function(data) { alert(data.length) }); 
```

但是，我想每秒更新一次可视化。调用回调函数会执行另一个请求并接收一个新的 json 对象，还是只使用我第一次收到的 json？

我正计划使用 js 计时器每秒左右请求新的 json ......想看看我是否可以使用回调函数接收更新的 json。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:59:49.113

调用`d3.json(<url>, <callback>)`执行异步请求。所以你需要每秒调用一次：

```
setInterval(function() {
  d3.json(<url>, <callback>);
}, 1000); 
```

但是，如果服务器响应缓慢，则可能会导致请求积压。相反，您可以在每次收到数据时请求更多数据：

```
fetch();
function fetch() {
  d3.json("more.json", function(json) {
    // Update visualisation here…
    setTimeout(fetch, 1000); // fetch more data after 1000ms
  });
} 
```

另一方面，如果有错误响应，这将停止请求数据（因为 D3.js 目前不会告诉您是否发生错误）。如果要处理错误，可以直接使用 XMLHttpRequest。

# ocaml - 安装 ocsigen-bundle-2.2.2 错误

> ID：11533190
> 
> 赞同：1
> 
> 时间：2012-07-18T01:44:06.497
> 
> 标签：ocaml, ocsigen

```
$./configure --prefix ${HOME}/ocsigen OCSIGEN_USER=${USER} OCSIGEN_GROUP=${USER} --with-missing-libs
...
checking for sqlite3_open in -lsqlite3... no
configure: error: SQLite is required.  See the --with-sqlite3 configure option.

$uname -r
 [FreeBSD[ 9.0-RELEASE-p3

$whereis sqlite3
sqlite3: /usr/local/bin/sqlite3

$ls -l /usr/local/lib/libsqlite*
-rw-r--r--  1 root  wheel  602092 12  3  2011 /usr/local/lib/libsqlite3.a
-rwxr-xr-x  1 root  wheel     943 12  3  2011 /usr/local/lib/libsqlite3.la*
lrwx-rw-r--r--  1 root  wheel  602092 12  3  2011 /usr/local/lib/libsqlite3.a
-rwxr-xr-x  1 root  wheel     943 12  3  2011 /usr/local/lib/libsqlite3.la*
lrwxr-xr-x  1 root  wheel      15 12  3  2011 /usr/local/lib/libsqlite3.so@ -> libsqlite3.so.8
-rwxr-xr-x  1 root  wheel  617995 12  3  2011 /usr/local/lib/libsqlite3.so.8* 
```

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:46:00.433

我认为你可以使用类似的东西

> ./configure --with-sqlite3=/usr/local/lib

或者只是`/usr/local`告诉 ./configure 脚本 sqlite3 不在标准目录 ( `/usr/lib`) 中。

# silverlight - 什么是平滑流媒体元素 TotalBytesDownloaded

> ID：11533192
> 
> 赞同：0
> 
> 时间：2012-07-18T01:44:12.110
> 
> 标签：silverlight, streaming, media, smooth

我想知道 Microsoft.Web.Media.SmoothStreaming 中的[TotalBytesDownloaded](http://msdn.microsoft.com/en-us/library/microsoft.web.media.smoothstreaming.smoothstreamingmediaelement.totalbytesdownloaded%28v=vs.90%29.aspx)字段是什么。MSDN 方便地将其声明为“下载的字节数。”。但它是播放器下载的视频字节数还是所有字节数，包括您可能在播放器顶部做出的任何其他服务器请求和响应（用于记录目的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:50:49.603

它是为 AV 演示文稿的视频和音频请求下载的总字节数。

# android - SQLite 和 MySQL

> ID：11533196
> 
> 赞同：0
> 
> 时间：2012-07-18T01:44:30.710
> 
> 标签：android, sqlite

我正在为我的最后一年项目开发一个 android 应用程序。我的应用程序是关于存储信息，然后将其显示在手机上。

我通过使用 sqlite 解决了这个问题，我可以在其中存储数据，也可以使用 cursor 检索它`c`。但是我怎样才能使检索数据对用户可见？

*   示例：我正在创建一个有关汉堡王的应用程序，然后单击有关汉堡王的信息，它会向用户显示信息（创建时间等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:54:25.730

这是一个开放式的问题。如果您想将搜索结果作为列表或网格呈现给用户，请使用 ListView 或 Gridview，并将 CursorAdapter 附加到您的视图。CursorAdapter 将从数据库中读取结果并将它们提供给视图。您可能希望将您的 CursorAdapter 子类化，以便它为您的 ListView/GridView 生成适当的视图以显示。

这是一个高级主题，但我相信您可以找到教程和代码示例。

如果您只想在屏幕上显示单个数据项（可能是具有很多细节的数据项），那么您可能需要定义一个 Dialog 或 Activity 将其呈现给用户，然后从光标并将其加载到对话框/活动中的各种视图对象中。

我希望这有帮助。如果我们能更详细地了解您正在尝试做的事情，那将会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:56:01.937

我同意 Edward Falk 关于需要更明确定义的细节的观点。在回答您的问题时，我建议在您的 xml 文件中创建一些 TextViews 或 ListView，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent">
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fragmentLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingLeft="8dp"
    android:paddingRight="8dp" >

    <TextView
        android:id="@+id/viewl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/viewvaluesLabel"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/view2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/viewvaluesLabel"
        android:textAppearance="?android:attr/textAppearanceLarge" />

            .
            .
            .

</LinearLayout>
</ScrollView> 
```

然后，您可以使用“R.find”语句通过它们各自的 ID 获取这些 TextView，例如：

```
TextView view1 = (TextView)findViewById(R.id.view1);
TextView view2 = (TextView)findViewById(R.id.view2);
TextView view3 = (TextView)findViewById(R.id.view3); 
```

然后使用如下代码设置您从数据库表中检索到的数据以显示在这些视图中：

```
Cursor c = db.getDetails(id);
if (c.moveToFirst()) {
view1.setText(c.getString(1));
view2.setText(c.getString(2));
view3.setText(c.getString(3));
} else {
    db.close();
} 
```

希望有帮助。

# c++ - 使用 ofstream 时创建的文件，但不是 ifstream 和 fstream/似乎无法访问 gcount()

> ID：11533198
> 
> 赞同：0
> 
> 时间：2012-07-18T01:44:39.697
> 
> 标签：c++, file, std, fstream, ostream

全部。我的一个新项目涉及从文件中读取名称，我意识到，特别是对于喜欢（尝试，更像）制作游戏的人来说，读/写以存储信息非常有用。我查看了它，发现 std 库再次通过。后来我意识到，至少对我来说，来自 ios、ios_base、iostream、fstream 等的库似乎有点复杂。

我环顾四周，但不太确定为什么这种特定方法不起作用。它让我感到困惑，因为在网上找到的示例似乎应该遵循图书馆 - 我将参考 cplusplus.com 上的一个。有趣的是，一个按预期工作，而另一个没有。据我所知，就是这样。

我的问题是，我可以使用 ofstream 创建文件，但不能使用 ifstream 或 fstream。我理解它的方式是，我正在使用的构造函数（我相信它与您传递给 open 的参数相同 - 即文件名和标志）是相同的，只是它们具有不同的默认参数 - ostream 具有 ios： :out, istream 有 ifstream 有 ios::in, fstream 有 ios::in | ios::out - 两个标志，这是合乎逻辑的，因为它是两个类的组合。请注意，这不是文件创建位置的问题，而是文件创建的事实。我知道这有两个原因。首先，当使用 ofstream 时，文件出现在预期的目录中，但对于 ifstream 和 fstream 则完全没有。其次，使用 is_open 函数，（具体来说，测试表达式 "while (is_open)" ，控制台从未关闭（我在控制台中测试了大多数新概念，因为它很简单），但与其他人一样。如果有，那么它永远不会结束，因为它永远不会超出范围，因此析构函数会为打开的文件拼写结束。

我的第二个问题是使用 gcount - 主要是如何访问它。无论我如何尝试（std::gcount、file::gcount、fstream::gcount...），它都无法识别它是什么。我有点糊涂了。

现在对具体问题有点跑题了，但更多的是我遇到这个问题的一般原因，这是一种讨论，但我认为学习可能是有益的，除非我以某种方式我是唯一一个有这个问题的人。

首先，我读过的教程（learncpp.com）介绍了 seekp/seekg 函数，并说它以字节为单位移动了一个相对量。我突然想到这通常与 char 相同，但在不同的系统上这是否可能不同（即，如果 char 是 2 个字节，您可以弄清楚这一点，并将其应用于文件搜索），还是本质上，它总是会按性格来？

而我的主要疑惑......如何真正使用这些工具来做事。假设我想在每一行上放一个名字。我会有点不确定如何做到这一点， - 也许换行符？或者另一端，每行读取一个名称 - 你如何找到下一行的起始位置？（我的 gcount 问题出现了，因为我认为您可以使用 getline()，然后使用 gcount()，然后瞧，移动那么多字符……但不确定这是否有效）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:00:24.530

仅回答您的一个问题：您无法使用它创建文件，`ifstream`因为它不会创建文件；这根本不是故意的。这个类的目的是从现有文件中读取数据，打开一个文件并从中读取，它必须首先存在。就那么简单。

就目前`fstream`而言，您可以假设如果不存在文件，则创建文件是有意义的，但实际上，它不是这样做的；的构造函数的参数`fstream`必须是现有文件。如果指定文件不存在，则在对象中设置失败位，并且不创建文件。

# git - git - 查找添加文件的提交

> ID：11533199
> 
> 赞同：272
> 
> 时间：2012-07-18T01:44:41.733
> 
> 标签：git, commit, git-commit, git-log

假设我有一个`foo.js`前段时间提交的文件。我想简单地找到首次添加此文件的提交。

在阅读了答案和我自己的修补之后，这对我有用

```
git log --follow --diff-filter=A --find-renames=40% foo.js 
```

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2012-11-28T04:52:11.157

这是更简单的“纯 Git”方式，不需要管道：

```
git log --diff-filter=A -- foo.js 
```

检查文档。您可以对已删除、已修改等执行相同的操作。

[https://git-scm.com/docs/git-log#Documentation/git-log.txt---diff-filterACDMRTUXB82308203](https://git-scm.com/docs/git-log#Documentation/git-log.txt---diff-filterACDMRTUXB82308203)

我有一个方便的别名，因为我总是忘记它：

```
git config --global alias.whatadded 'log --diff-filter=A' 
```

这使它变得如此简单：

```
git whatadded -- foo.js 
```

* * *

`$PWD`下面的一行将递归搜索for 的子目录，`foo.js`而无需提供文件的绝对或相对路径，文件也不需要与`$PWD`

```
git log --diff-filter=A -- **foo.js 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-18T01:46:18.520

```
git log --follow --find-renames=40% --oneline -- foo.js | tail -n 1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-24T18:49:43.387

以下内容可能你不感兴趣，但我认为它会在未来对你有所帮助，并且是 Git 中调试生态系统的一部分：

您可以使用`git-blame`来显示上次修改文件每一行的修订版和作者，尤其是文件注释。访问[https://git-scm.com/book/en/v2/Git-Tools-Debugging-with-Git](https://git-scm.com/book/en/v2/Git-Tools-Debugging-with-Git)

例如，

```
git blame -L 174,190  xx.py 
```

-L 选项将注释的输出限制在第 174 行到第 190 行，因此您将看到文件 xx.py 从第 174 行到第 190 行的作者和提交哈希等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-24T14:24:51.983

如果它是非编程方式的替代方法，那么这非常快。打开 gitk 图形用户界面。

```
gitk file 
```

然后只需滚动到第一个提交

# email - 播放框架商店电子邮件

> ID：11533200
> 
> 赞同：0
> 
> 时间：2012-07-18T01:44:42.200
> 
> 标签：email, playframework, playframework-1.x

嗨，我有一个要求，我们希望在发送电子邮件之前将其存储在数据库中。我目前使用的是 1.2.5 版。我想利用 play 提供的 Mail 和 MVC 集成，因为电子邮件将包含大量动态内容。有什么办法可以在游戏框架中完成。感谢任何人提供一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:19:39.827

如果您只想存储内容（而不关心标题），那么您可以将 MVC 视图模板呈现为字符串，并将其存储在数据库中。你会得到如下的字符串

```
String emailContent = TemplateLoader.load("pathToEmailView").render(args); 
```

在以正常方式发送电子邮件之前，您只需以标准方式将其保存到数据库中。

# iphone - iOS 搜索结果顺序

> ID：11533204
> 
> 赞同：-2
> 
> 时间：2012-07-18T01:45:51.637
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个搜索数据表的 UISearchBar。输入搜索时，结果按如下顺序显示：

开始输入“ch...” 1\. Ache 2\. Cherry 3\. Choice

对我（以及我的应用程序）来说，“Cherry”和“Choice”将位于结果的顶部更有意义，因为输入了“ch”而不是“ach”。这是可以通过编程方式更改的吗，或者这只是 iOS 搜索的工作方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T04:17:31.400

您必须将搜索选项指定为**NSAnchoredSearch**

**NSRange searchRange = [sortedString rangeOfString:searchText options:NSAnchoredSearch];**

下面列出的一些搜索方法

**NSCaseInsensitiveSearch**

**NSLiteralSearch**

**NSBackwardsSearch**

**非锚定搜索**

**NSNumericSearch**

**NSDiacritic InsensitiveSearch**

**NSWidthInsensitiveSearch**

**NSForcedOrderingSearch**

**NSRegularExpressionSearch**

例如：

```
- (void)search {

    NSString *searchText = [searchBar.text lowercaseString];

    for (int index = 0; index < [availableCollectionArray count]; index++) {

        NSArray *tempArray = [availableCollectionArray objectAtIndex:index];

        for (int tempIndex = 0; tempIndex < [tempArray count] ; tempIndex++) {

            NSString *sortedString = [tempArray objectAtIndex:tempIndex];

            NSRange searchRange = [sortedString rangeOfString:searchText options:NSAnchoredSearch];

            if (searchRange.length > 0)
            {
                [sortedArray addObject: sortedString];  //add the string which starts from searchBar.text
            }       

        }   

    }

} 
```

# makefile - 当生成文件目标的先决条件中出现分号时，这意味着什么？

> ID：11533209
> 
> 赞同：4
> 
> 时间：2012-07-18T01:46:39.740
> 
> 标签：makefile, gnu-make

我在正在修改的 Makefile 中遇到了这种语法：

```
some_target: ;

another_target: ... 
```

在这种情况下，分号是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T01:51:10.983

这是一个[*空配方*](http://www.gnu.org/software/make/manual/make.html#Empty-Recipes)，如果您想防止为目标分配隐式配方，则使用它。

# php - PHP：如何使用 Twitter API 的数据将推文中的 URL、提及和标签转换为链接？

> ID：11533214
> 
> 赞同：14
> 
> 时间：2012-07-18T01:48:07.100
> 
> 标签：php, api, twitter

我真的很难理解 Twitter 如何期望其 API 的用户将其发送的纯文本推文转换为正确链接的 HTML。

这是交易：当您请求推文的详细数据时，Twitter 的 JSON API 会将这组信息发回：

```
{
    "created_at":"Wed Jul 18 01:03:31 +0000 2012",
    "id":225395341250412544,
    "id_str":"225395341250412544",
    "text":"This is a test tweet. #boring @nbc http://t.co/LUfDreY6 #skronk @crux http://t.co/VpuMlaDs @twitter",
    "source":"web",
    "truncated":false,
    "in_reply_to_status_id":null,
    "in_reply_to_status_id_str":null,
    "in_reply_to_user_id":null,
    "in_reply_to_user_id_str":null,
    "in_reply_to_screen_name":null,
    "user": <REDACTED>,
    "geo":null,
    "coordinates":null,
    "place":null,
    "contributors":null,
    "retweet_count":0,
    "entities":{
        "hashtags":[
            {
                "text":"boring",
                "indices":[22,29]
            },
            {
                "text":"skronk",
                "indices":[56,63]
            }
        ],
        "urls":[
            {
                "url":"http://t.co/LUfDreY6",
                "expanded_url":"http://www.twitter.com",
                "display_url":"twitter.com",
                "indices":[35,55]
            },
            {
                "url":"http://t.co/VpuMlaDs",
                "expanded_url":"http://www.example.com",
                "display_url":"example.com",
                "indices":[70,90]
            }
        ],
        "user_mentions":[
            {
                "screen_name":"nbc",
                "name":"NBC",
                "id":26585095,
                "id_str":"26585095",
                "indices":[30,34]
            },
            {
                "screen_name":"crux",
                "name":"Z. D. Smith",
                "id":407213,
                "id_str":"407213",
                "indices":[64,69]
            },
            {
                "screen_name":"twitter",
                "name":"Twitter",
                "id":783214,
                "id_str":"783214",
                "indices":[91,99]
            }
        ]
    },
    "favorited":false,
    "retweeted":false,
    "possibly_sensitive":false
} 
```

对于这个问题，有趣的部分是 、 和 数组中的元素和条目`text`。Twitter告诉我们hastags，提及和url与数组一起出现在元素中的哪个位置......所以这里是问题的症结所在：`hashtags``user_mentions``urls``text``indices`

你如何*使用*这些`indices`数组？

您不能通过使用类似的内容循环每个链接元素来直接使用它们[`substr_replace`](http://php.net/manual/en/function.substr-replace.php)，因为替换中的第一个链接元素`text`将使后续链接元素的所有索引值无效。您也不能使用[`substr_replace`](http://php.net/manual/en/function.substr-replace.php)' 数组功能，因为它仅在您为第一个 arg 提供一个字符串数组而不是单个字符串时才有效（我已经对此进行了测试。结果......很奇怪）。

是否有一些函数可以同时用不同的替换字符串替换单个字符串中的多个索引分隔的子字符串？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-08-26T20:31:18.647

要使用 twitter 提供的索引，只需简单的替换即可直接收集您想要进行的替换，然后将它们向后排序。你可能会找到一种更聪明的方法来构建 $entities，无论如何我希望它们是可选的，所以我就这样亲吻了。

无论哪种方式，我的观点只是为了表明您不需要爆炸字符串和字符数等等。不管你怎么做，你需要做的就是从字符串的末尾开始，一直到字符串的开头，并且 twitter 的索引仍然有效。

```
<?php 

function json_tweet_text_to_HTML($tweet, $links=true, $users=true, $hashtags=true)
{
    $return = $tweet->text;

    $entities = array();

    if($links && is_array($tweet->entities->urls))
    {
        foreach($tweet->entities->urls as $e)
        {
            $temp["start"] = $e->indices[0];
            $temp["end"] = $e->indices[1];
            $temp["replacement"] = "<a href='".$e->expanded_url."' target='_blank'>".$e->display_url."</a>";
            $entities[] = $temp;
        }
    }
    if($users && is_array($tweet->entities->user_mentions))
    {
        foreach($tweet->entities->user_mentions as $e)
        {
            $temp["start"] = $e->indices[0];
            $temp["end"] = $e->indices[1];
            $temp["replacement"] = "<a href='https://twitter.com/".$e->screen_name."' target='_blank'>@".$e->screen_name."</a>";
            $entities[] = $temp;
        }
    }
    if($hashtags && is_array($tweet->entities->hashtags))
    {
        foreach($tweet->entities->hashtags as $e)
        {
            $temp["start"] = $e->indices[0];
            $temp["end"] = $e->indices[1];
            $temp["replacement"] = "<a href='https://twitter.com/hashtag/".$e->text."?src=hash' target='_blank'>#".$e->text."</a>";
            $entities[] = $temp;
        }
    }

    usort($entities, function($a,$b){return($b["start"]-$a["start"]);});

    foreach($entities as $item)
    {
        $return = substr_replace($return, $item["replacement"], $item["start"], $item["end"] - $item["start"]);
    }

    return($return);
}

?> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-13T06:34:57.940

好的，所以我需要这样做，我解决了它。这是我写的函数。[https://gist.github.com/3337428](https://gist.github.com/3337428)

```
function parse_message( &$tweet ) {
    if ( !empty($tweet['entities']) ) {
        $replace_index = array();
        $append = array();
        $text = $tweet['text'];
        foreach ($tweet['entities'] as $area => $items) {
            $prefix = false;
            $display = false;
            switch ( $area ) {
                case 'hashtags':
                    $find   = 'text';
                    $prefix = '#';
                    $url    = 'https://twitter.com/search/?src=hash&q=%23';
                    break;
                case 'user_mentions':
                    $find   = 'screen_name';
                    $prefix = '@';
                    $url    = 'https://twitter.com/';
                    break;
                case 'media':
                    $display = 'media_url_https';
                    $href    = 'media_url_https';
                    $size    = 'small';
                    break;
                case 'urls':
                    $find    = 'url';
                    $display = 'display_url';
                    $url     = "expanded_url";
                    break;
                default: break;
            }
            foreach ($items as $item) {
                if ( $area == 'media' ) {
                    // We can display images at the end of the tweet but sizing needs to added all the way to the top.
                    // $append[$item->$display] = "<img src=\"{$item->$href}:$size\" />";
                }else{
                    $msg     = $display ? $prefix.$item->$display : $prefix.$item->$find;
                    $replace = $prefix.$item->$find;
                    $href    = isset($item->$url) ? $item->$url : $url;
                    if (!(strpos($href, 'http') === 0)) $href = "http://".$href;
                    if ( $prefix ) $href .= $item->$find;
                    $with = "<a href=\"$href\">$msg</a>";
                    $replace_index[$replace] = $with;
                }
            }
        }
        foreach ($replace_index as $replace => $with) $tweet['text'] = str_replace($replace,$with,$tweet['text']);
        foreach ($append as $add) $tweet['text'] .= $add;
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-09T03:46:02.303

这是一个极端情况，但如果一个实体包含在另一个实体中，则在 Styledev 的答案中使用 str_replace() 可能会导致问题。例如，如果先替换较短的实体，“我是天才！#me #mensa”可能会变成“我是天才！[#me](http://example.com) [#me nsa”。](http://example.com)

此解决方案避免了该问题：

```
<?php
/**
 * Hyperlinks hashtags, twitter names, and urls within the text of a tweet
 * 
 * @param object $apiResponseTweetObject A json_decoded() one of these: https://dev.twitter.com/docs/platform-objects/tweets
 * @return string The tweet's text with hyperlinks added
 */
function linkEntitiesWithinText($apiResponseTweetObject) {

    // Convert tweet text to array of one-character strings
    // $characters = str_split($apiResponseTweetObject->text);
    $characters = preg_split('//u', $apiResponseTweetObject->text, null, PREG_SPLIT_NO_EMPTY);

    // Insert starting and closing link tags at indices...

    // ... for @user_mentions
    foreach ($apiResponseTweetObject->entities->user_mentions as $entity) {
        $link = "https://twitter.com/" . $entity->screen_name;          
        $characters[$entity->indices[0]] = "<a href=\"$link\">" . $characters[$entity->indices[0]];
        $characters[$entity->indices[1] - 1] .= "</a>";         
    }               

    // ... for #hashtags
    foreach ($apiResponseTweetObject->entities->hashtags as $entity) {
        $link = "https://twitter.com/search?q=%23" . $entity->text;         
        $characters[$entity->indices[0]] = "<a href=\"$link\">" . $characters[$entity->indices[0]];
        $characters[$entity->indices[1] - 1] .= "</a>";         
    }

    // ... for http://urls
    foreach ($apiResponseTweetObject->entities->urls as $entity) {
        $link = $entity->expanded_url;          
        $characters[$entity->indices[0]] = "<a href=\"$link\">" . $characters[$entity->indices[0]];
        $characters[$entity->indices[1] - 1] .= "</a>";         
    }

    // ... for media
    foreach ($apiResponseTweetObject->entities->media as $entity) {
        $link = $entity->expanded_url;          
        $characters[$entity->indices[0]] = "<a href=\"$link\">" . $characters[$entity->indices[0]];
        $characters[$entity->indices[1] - 1] .= "</a>";         
    }

    // Convert array back to string
    return implode('', $characters);

}
?> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-14T18:20:20.543

Jeff 的解决方案适用于英文文本，但当推文包含非 ASCII 字符时，它就被破坏了。此解决方案避免了该问题：

```
mb_internal_encoding("UTF-8");

// Return hyperlinked tweet text from json_decoded status object:
function MakeStatusLinks($status) 
{$TextLength=mb_strlen($status['text']); // Number of UTF-8 characters in plain tweet.
 for ($i=0;$i<$TextLength;$i++)
 {$ch=mb_substr($status['text'],$i,1); if ($ch<>"\n") $ChAr[]=$ch; else $ChAr[]="\n<br/>"; // Keep new lines in HTML tweet.
 }
if (isset($status['entities']['user_mentions']))
 foreach ($status['entities']['user_mentions'] as $entity)
 {$ChAr[$entity['indices'][0]] = "<a href='https://twitter.com/".$entity['screen_name']."'>".$ChAr[$entity['indices'][0]];
  $ChAr[$entity['indices'][1]-1].="</a>";
 }
if (isset($status['entities']['hashtags']))
 foreach ($status['entities']['hashtags'] as $entity)
 {$ChAr[$entity['indices'][0]] = "<a href='https://twitter.com/search?q=%23".$entity['text']."'>".$ChAr[$entity['indices'][0]];
  $ChAr[$entity['indices'][1]-1] .= "</a>";
 }
if (isset($status['entities']['urls']))
 foreach ($status['entities']['urls'] as $entity)
 {$ChAr[$entity['indices'][0]] = "<a href='".$entity['expanded_url']."'>".$entity['display_url']."</a>";
  for ($i=$entity['indices'][0]+1;$i<$entity['indices'][1];$i++) $ChAr[$i]='';
 }
if (isset($status['entities']['media']))
 foreach ($status['entities']['media'] as $entity)
 {$ChAr[$entity['indices'][0]] = "<a href='".$entity['expanded_url']."'>".$entity['display_url']."</a>";
  for ($i=$entity['indices'][0]+1;$i<$entity['indices'][1];$i++) $ChAr[$i]='';
 }
return implode('', $ChAr); // HTML tweet.
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-14T20:28:24.967

这是一个更新的答案，适用于 Twitter 的新扩展模式。它结合了@vita10gy 的答案和@Hugo 的评论（以使其与 utf8 兼容），并进行了一些小的调整以使用新的 api 值。

```
function utf8_substr_replace($original, $replacement, $position, $length) {
    $startString = mb_substr($original, 0, $position, "UTF-8");
    $endString = mb_substr($original, $position + $length, mb_strlen($original), "UTF-8");
    $out = $startString . $replacement . $endString;
    return $out;
}

function json_tweet_text_to_HTML($tweet, $links=true, $users=true, $hashtags=true) {
    // Media urls can show up on the end of the full_text tweet, but twitter doesn't index that url. 
    // The display_text_range indexes show the actual tweet text length.
    // Cut the string off at the end to get rid of this unindexed url.
    $return = mb_substr($tweet->full_text, $tweet->display_text_range[0],$tweet->display_text_range[1]);
    $entities = array();

    if($links && is_array($tweet->entities->urls))
    {
        foreach($tweet->entities->urls as $e)
        {
            $temp["start"] = $e->indices[0];
            $temp["end"] = $e->indices[1];
            $temp["replacement"] = " <a href='".$e->expanded_url."' target='_blank'>".$e->display_url."</a>";
            $entities[] = $temp;
        }
    }
    if($users && is_array($tweet->entities->user_mentions))
    {
        foreach($tweet->entities->user_mentions as $e)
        {
            $temp["start"] = $e->indices[0];
            $temp["end"] = $e->indices[1];
            $temp["replacement"] = " <a href='https://twitter.com/".$e->screen_name."' target='_blank'>@".$e->screen_name."</a>";
            $entities[] = $temp;
        }
    }
    if($hashtags && is_array($tweet->entities->hashtags))
    {
        foreach($tweet->entities->hashtags as $e)
        {
            $temp["start"] = $e->indices[0];
            $temp["end"] = $e->indices[1];
            $temp["replacement"] = " <a href='https://twitter.com/hashtag/".$e->text."?src=hash' target='_blank'>#".$e->text."</a>";
            $entities[] = $temp;
        }
    }

    usort($entities, function($a,$b){return($b["start"]-$a["start"]);});

    foreach($entities as $item)
    {
        $return =  utf8_substr_replace($return, $item["replacement"], $item["start"], $item["end"] - $item["start"]);
    }

    return($return);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-30T19:16:41.353

这是[vita10gy](https://stackoverflow.com/users/3461892/vita10gy)解决方案的 JavaScript 版本（使用 jQuery）

```
function tweetTextToHtml(tweet, links, users, hashtags) {

    if (typeof(links)==='undefined') { links = true; }
    if (typeof(users)==='undefined') { users = true; }
    if (typeof(hashtags)==='undefined') { hashtags = true; }

    var returnStr = tweet.text;
    var entitiesArray = [];

    if(links && tweet.entities.urls.length > 0) {
        jQuery.each(tweet.entities.urls, function() {
            var temp1 = {};
            temp1.start = this.indices[0];
            temp1.end = this.indices[1];
            temp1.replacement = '<a href="' + this.expanded_url + '" target="_blank">' + this.display_url + '</a>';
            entitiesArray.push(temp1);
        });
    }

    if(users && tweet.entities.user_mentions.length > 0) {
        jQuery.each(tweet.entities.user_mentions, function() {
            var temp2 = {};
            temp2.start = this.indices[0];
            temp2.end = this.indices[1];
            temp2.replacement = '<a href="https://twitter.com/' + this.screen_name + '" target="_blank">@' + this.screen_name + '</a>';
            entitiesArray.push(temp2);
        });
    }

    if(hashtags && tweet.entities.hashtags.length > 0) {
        jQuery.each(tweet.entities.hashtags, function() {
            var temp3 = {};
            temp3.start = this.indices[0];
            temp3.end = this.indices[1];
            temp3.replacement = '<a href="https://twitter.com/hashtag/' + this.text + '?src=hash" target="_blank">#' + this.text + '</a>';
            entitiesArray.push(temp3);
        });
    }

    entitiesArray.sort(function(a, b) {return b.start - a.start;});

    jQuery.each(entitiesArray, function() {
        returnStr = substrReplace(returnStr, this.replacement, this.start, this.end - this.start);
    });

    return returnStr;
} 
```

然后，您可以像这样使用此功能...

```
for(var i in tweetsJsonObj) {
    var tweet = tweetsJsonObj[i];
    var htmlTweetText = tweetTextToHtml(tweet);

    // Do something with the formatted tweet here ...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-09T14:04:22.070

关于 vita10gy 的帮助`json_tweet_text_to_HTML()`，我发现了一条无法正确格式化的推文：626125868247552000。

这条推文中有一个不间断的空间。我的解决方案是将函数的第一行替换为以下内容：

```
$return = str_replace("\xC2\xA0", ' ', $tweet->text); 
```

[此处](https://stackoverflow.com/questions/6275380/does-html-entity-decode-replaces-nbsp-also-if-not-how-to-replace-it)介绍了执行`str_replace()`on 。`&nbsp;`

# design-patterns - 工厂模式的标准/标准？

> ID：11533220
> 
> 赞同：0
> 
> 时间：2012-07-18T01:49:03.297
> 
> 标签：design-patterns

工厂模式的标准是什么，即 a) 说代码遵循工厂模式？b) 是否符合工厂模式标准？

提前致谢， 凯瑟尔

# android - 在 Eclipse 的 Android 设备中看不到 Nexus7

> ID：11533228
> 
> 赞同：56
> 
> 时间：2012-07-18T01:49:40.510
> 
> 标签：android

> **可能重复：**
> [ADB 无法识别我的 Galaxy Nexus - Win7](https://stackoverflow.com/questions/8801829/adb-dosnt-recognize-my-galaxy-nexus-win7)

我没有在 Eclipse 的 DDMS 设备中看到我的 Nexus7。

控制台中的 DDMS 和“adb devices”显示我的 G1 android 手机，但不显示 Nexus7。

两部手机都启用了USB调试，据我所知Eclipse是最新的，Android SDK的Google-USB-rev6

当我插入 N7 USB 时，我确实看到安装了 Windows7 驱动程序，并且可以从文件管理器中浏览其上的文件。

MTP/PTP 没有区别（Microsoft Update 的 MTP 驱动程序，PTP 没有）

开发人员选项中的“选择调试应用程序”没有显示任何内容。

“未知来源”被选中。

尝试了不同的 USB 端口，切换了 USB 调试。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-07-19T15:08:22.053

这是我为使其正常工作所做的工作：

1.  我碰巧已经安装了三星 Galaxy Nexus 的 ADB 驱动程序，如果没有，则需要下载这些驱动程序。

2.  插入 Nexus 7，windows 会自动找到 2 个驱动程序，但找不到任何“Nexus”驱动程序

3.  转到设备管理器，在“其他设备”下，您会看到带有黄色感叹号的“Nexus”，右键单击>更新驱动程序>让我选择>让我在我的计算机上选择表单设备驱动程序。

4.  向下滚动到“SAMSUNG Android Phone”（同样，应该已经安装了 Galaxy Nexus 驱动程序，如果没有，请找到它们），然后选择“Android ADB Interface”的驱动程序

5.  单击“下一步”，设备应该会在 Eclipse 中弹出。

至少它对我有用。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-19T23:06:39.913

这就是我最终让它工作的方式。

1.  下载裸 adb 驱动：

[http://forum.xda-developers.com/showthread.php?t=1766220](http://forum.xda-developers.com/showthread.php?t=1766220)

1.  解压

2.  打开设备管理器

3.  在便携式设备中查找 Nexus 7

4.  右键单击并选择更新驱动程序软件

5.  几次点击和输入，您就可以输入驱动程序的路径，输入解压后的裸驱动程序的任何位置

6.  现在，当设备插入时，它会显示为 Android 手机，这似乎我们正在到达某个地方。

7.  重新启动（我很沮丧，因为仍然没有在 ADB DEVICES 中看到我的设备——可能没有必要）

8.  设备管理器，右键安卓手机/谷歌Nexus 7 ADB接口，更新驱动软件

9.  我选择了 USB 复合设备，但不记得具体是怎么做的，因为我无法回到那个屏幕

10.  ADB DEVICES 现在显示我的设备！（也是日食）

11.  当我进入设备管理器时，我的 nexus 7 的驱动程序是由 Google, Inc. 提供的“Google Nexus 7 ADB Interface”，日期为 2010 年 12 月 6 日，版本 4.0.0.0，并且未进行数字签名

希望这对某人有所帮助，为什么华硕的网站上没有可下载的驱动程序？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T00:48:49.380

我浪费了一些时间让我的 Nexus 7 USB/调试连接正常工作。在糟糕的文档和缺乏来自 Windows 7 驱动程序的反馈之间，我错过了设备设置中的一个微妙之处。在设备上启用调试功能实际上是两个修改，而不是一个：

转到设置-> 开发人员选项

通过切换右上角的按钮来整体启用开发人员设置，这将启用页面上的其他设置。我浏览了其余的选项，并认为我已经完成了。

然后启用选项“USB 调试”，副标题为“连接 USB 时的调试模式”。如果你不打开它，你的驱动程序将注册，但永远不会做任何事情，或者告诉你为什么不......即当你运行“adb devices”时你的设备甚至不会被列出，而 Windows 不会' t 也启用任何标准 USB 文件访问功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T20:06:47.110

您使用的是 32 位还是 64 位版本的 Windows？我也有同样的问题，并且在 Macintosh 上使用相同的设备取得了成功。

自 Nexus One 以来，我在驱动程序和 64 位 Windows 方面的经验一直受到影响。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T15:38:56.900

正确的驱动程序现在似乎安装到 [Android SDK]\google-usb_driver 而不仅仅是 usb_driver。我仍然拥有这两个目录，但是一旦我将驱动程序更新指向 Google 一个，它就起作用了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T19:24:14.190

用mac？

我有同样的问题，花了几个小时试图让它在我的 Windows 7 笔记本电脑上工作，我搞砸了 Universal Naked Driver (0.7) 并尝试使用 Nexus Root Toolkit (1.5.5) 中的驱动程序安装工具。 2）。没有帮助。我还搜索了华硕的驱动程序（那里只有手册）。我还确保我所有的 Android SDK 软件都是最新的。

当我在 Mac 上尝试时，它确实出现了！它仍然没有出现在我使用“adb 设备”的 Windows 7 笔记本电脑上，或者在 DDMS 下的 Eclipsed 中。运行果冻豆的银河系纽带在笔记本电脑上显示得很好。

设备管理器 > 便携式设备 > Nexus 7 > 驱动程序属性：Microsoft，2006 年 6 月 21 日，6.17600.16385

可用的三星 Galaxy Nexus 手机使用的是三星驱动程序

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-19T15:54:37.387

通过从 (http://forum.xda-developers.com/showthread.php?t=1766475) 下载并运行根工具包使其工作，刚好足以将 Nexus7 驱动程序放在我可以指向的目录中，并且手动为“MTP 设备”“更新驱动程序”。类似于 user1023127 在下面对 Samsung-Nexus 驱动程序所做的事情，但我没有测试这些。

现在在 Eclips/DDMS 中看到 asus-nexus 设备，并且能够在平板电脑上运行应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-19T17:26:28.300

我可以确认HappyFunBall 的解决方案。不要使用 Nexus Root Toolkit 中的自动驱动安装；完成手动安装的第 4 步并停止。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-07-19T14:11:12.367

我认为你不需要司机。

做我该做的：

将您的应用程序发布到您的计算机。然后在谷歌播放下载蓝牙文件传输应用程序（或任何其他文件管理器）。将您的应用程序复制到您的关系内的文件夹 7\. 打开蓝牙文件传输并单击您的应用程序。最后点击确定安装。

在华硕发布一些用户友好界面之前，您必须这样做。

# zend-framework - 如何使用此代码实现数据模型

> ID：11533229
> 
> 赞同：0
> 
> 时间：2012-07-18T01:49:52.327
> 
> 标签：zend-framework

我是 zend 框架的新手。我正在尝试学习 zf create db-table tblename，zf create model tblname，zf create model tblnameMapper。

添加 user.php（表单）

```
<?php

class Application_Form_Adduser extends Zend_Form
{

    public function init()
    {
                $this->setMethod('post');

        $username = $this->createElement('text','username');
        $username->setLabel('Username:')
                ->setAttrib('size',10);
        $password=$this->createElement('text','password');
        $password->setLabel('Password')
                 ->setAttrib('size',10);

        $reg=$this->createElement('submit','submit');
        $reg->setLabel('save');             

        $this->addElements(array(
        $username,
        $password,
        $reg
        ));

        return $this;
    } 
```

添加用户视图：

```
<?php 
echo 'Add user';
echo "<br />" .$this->a;
echo $this->form;

?> 
```

管理员控制器：

```
<?php

class AdminController extends Zend_Controller_Action

{

    public function adduserAction(){
           $form = new Application_Form_Auth();
        $this->view->form = $form;
        $this->view->assign('a','Entere new user:');
        if($this->getRequest()->isPost()){

            $formData  = $this->_request->getPost();            
            $uname=$formData['username'];
            $pass=$formData['password'];
            $msg=$uname." added to database successfully";

            $this->view->assign('a',$msg);
            $db= Zend_Db_Table_Abstract::getDefaultAdapter();
            $query="INSERT INTO `user` ( `id` , `uname` , `password` )
            VALUES ('', '{$uname}', '{$pass}');";
            $db->query($query);         

        }} 
```

我想用上面的代码实现 db-table。我是 zend 框架的新手，我花了一些时间阅读程序员指南但徒劳无功。从手册中获取东西非常困难。所以请有人一步一步解释过程实施相同的。谢谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:42:05.670

好的，这是一个简单的例子：

创建 DbTable 模型（基本上是数据库中每个表的适配器）：

在命令行：如果你想在模块中`zf create db-table User user`添加它。`-m moduleName`此命令将创建一个文件名`User.php`，`/application/models/DbTable`如下所示：

```
class Application_Model_DbTable_User extends Zend_Db_Table_Abstract {

    protected $_name = 'user'; //this is the database tablename (Optional, automatically created by Zend_Tool)
    protected $_primary = 'id'; //this is the primary key of the table (Optional, but a good idea)
} 
```

现在要在您的 DbTable 模型中创建一个从您的控制器执行查询的方法，请添加一个类似于以下内容的方法：

```
public function insertUser(array $data) {
    $Idata  = array(
        'name' => $data['name'] ,
        'password' => $data['passowrd']
    );
    $this->insert($Idata); //returns the primary key of the new row.
} 
```

要在您的控制器中使用：

```
public function adduserAction(){
        $form = new Application_Form_Auth(); //prepare form          
try{
        if($this->getRequest()->isPost()){//if is post
            if ($form->isValid($this->getRequest()_>getPost()){ //if form is valid
                $data = $form->getValues(); //get filtered and validated form values
                $db= new Application_Model_DbTable_User(); //instantiate model
                $db->insertUser($data); //save data, fix the data in the model not the controller
                //do more stuff if required
     }     
   }
     $this->view->form = $form; //if not post view form
     $this->view->assign('a','Entere new user:');
  } catch(Zend_Exception $e) { //catach and handle exception
        $this->_helper->flashMessenger->addMessage($e->getMessage());//send exception to flash messenger
        $this->_redirect($this->getRequest()->getRequestUri()); //redirect to same page
  }
} 
```

这很简单。我几乎没有触及到在使用 Zend_Db 和 DbTable 模型的简单应用程序中可以完成的事情的皮毛。但是，您可能会像我一样发现，在某些时候您将需要更多。那将是探索领域模型和映射器的时候了。

如需包含所有这些以及更多内容的非常好的基本教程，请查看[Rob Allen 的 ZF 1.x 教程](http://akrabat.com/zend-framework-tutorial/)

我希望这有帮助。

# visual-studio-2010 - 如何在同一个项目上与 2-3 个用户同时工作？

> ID：11533232
> 
> 赞同：1
> 
> 时间：2012-07-18T01:50:09.633
> 
> 标签：visual-studio-2010

我有一个由 3 名开发人员组成的团队，我希望我们能够随时（或同时）在家中处理项目并对项目进行更改。到目前为止，我们必须互相邮寄所有更新版本以保持同步。我们目前正在 Visual Studio 2010 中开发该项目，并使用 SQL Express 2008。我在互联网上搜索并了解了 Team Foundation Server，但它需要 Windows Server。我不想陷入这种混乱，我有一台 Win7 电脑。请给我一些简单的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T01:52:36.973

有许多低成本（通常对开源项目免费）托管的源代码控制提供商。

我个人使用[Subversion](http://subversion.apache.org/)和 Visual Studio 的[AnkhSVN](http://ankhsvn.open.collab.net/)插件。

[Mercurial](http://mercurial.selenic.com/)和[Git](http://git-scm.com/)通过插件在 Visual Studio 中也很受欢迎和支持。

这些选项中的任何一个都可以在几分钟内设置好（如果您使用托管解决方案），并且都适用于小型团队。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:55:44.010

版本控制是您正在寻找的，而您的权利有一些复杂的解决方案。TortoiseSVN 并不太复杂，但运行良好。

# java - 带有 Javascript 函数调用的签名小程序：IcedTea 插件上的初始化错误

> ID：11533235
> 
> 赞同：1
> 
> 时间：2012-07-18T01:50:31.343
> 
> 标签：java, javascript, security, applet, japplet

我正在尝试从我开发的 Java 签名小程序内部调用 Javascript 函数。当我使用带有 Sun Java 插件的浏览器时，这非常好。我使用 Firefox、Chrome 和 Internet Explorer (Windows) 浏览器在 Windows 7 和 Ubuntu 10.04 上进行了测试。

当我尝试在任何带有冰茶插件的浏览器上运行相同的代码时，会收到以下错误消息：

* * *

> net.sourceforge.jnlp.LaunchException：致命：初始化错误：无法初始化小程序。在 net.sourceforge.jnlp.Launcher.createApplet(Launcher.java:735) 在 net.sourceforge.jnlp.Launcher.getApplet(Launcher.java:676) 在 net.sourceforge.jnlp.Launcher$TgThread.run(Launcher.java :886) 由：java.security.SecureClassLoader.getProtectionDomain(SecureClassLoader.java:206) 处的 net.sourceforge.jnlp.runtime.JNLPClassLoader.getPermissions(JNLPClassLoader.java:915) 处的 java.lang.NullPointerException 引起。 SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:447) at java.net.URLClassLoader.access$100(URLClassLoader.java:71) at java.net.URLClassLoader$1.run (URLClassLoader.java:361) 在 java.net.URLClassLoader$1。

* * *

## 我尝试过的配置和事情：

*   我与 Iced Tea 插件一起使用的 Linux 版本是 Ubuntu 12.04

*   我尝试使用 Sun JDK 6 和 7 以及 Open JDK 6 和 7 编译我的代码，但都因浏览器上的 Iced Tea 插件而失败。

*   我用冰茶版本 6 和版本 7 尝试了我的代码

*   我在我的 Ubuntu 上使用 Firefox 和 Chrome 浏览器尝试了我的代码

## 代码片段：

HTML（内部正文标签）：

```
 <!-- JavaScript File That Contains My Javascript Function -->
    <script type="text/javascript" src="./my_javascript_file.js"></script>

    <!-- Applet That Will Call My Javascript Function -->
    <object height="1" width="1" id="MyApplet" name="MyApplet"
    java_version="1.5+" type="application/x-java-applet">
        <param name="code" value="foo.MyApplet" />
        <param name="archive" value="MyApplet.jar" />
        <param name="JVM_PARAM" value="-Djava.security.policy=applet.policy" />
        <param name="mayscript" value="true" />
        <param name="scriptable" value="true" />
        <param name="name" value="MyApplet" />
    </object> 
```

我试图调用的 Javascript 方法（在 my_javascript_file.js 中）：

```
window.performAppletCode = function (parameter_1) {
    //Function code
} 
```

“MyApplet.jar”中的 Java 小程序代码（相关部分）：

```
package foo;

import java.util.Arrays;
import javax.swing.JApplet;
import netscape.javascript.JSException;
import netscape.javascript.JSObject;

public class MyApplet extends JApplet {

    //Parameter that will be sent to Javascript function    
    public String parameter_1;    
    //JSObject that will be responsible for accessing javascript on my page 
    public JSObject window = null;
    private Thread myThread;
    private ImportantClass importantClassInstance;

    @Override
    public void init() {

    }

    @Override
    public void start() {
        if (this.window == null) {
            try {
                this.window = JSObject.getWindow(this);
                if (this.window == null){
                    System.out.println("Window is null");
                }
            }
            catch (JSException jse) {
                jse.printStackTrace();
            }
            fooStart();
        }
    }

    public void fooStart() {

            importantClassInstance = new ImportantClass();

            // MyThread Section
            myThread = new Thread(new Runnable() {
                @Override
                public void run() {

                    // Run latency test.
                    int[] fooArray = importantClassInstance.fooMethod();
                    parameter_1 = Arrays.toString(fooArray);
                    //Javascript function call
                    window.call("performAppletCode", new Object[] {parameter_1});
                }
            });
            myThread.start();
    }
} 
```

我的小程序使用 jarsigner 签名，证书包含在我的 HTML 目录中。

如果有人知道解决此问题的可能线索，请告诉我。

谢谢，吉尔赫姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:55:42.643

当从 JS 调用时，applet 会失去信任。要解决这个问题，请参阅`AccessController.doPrivileged(...)`这个[答案](https://stackoverflow.com/a/4856542/418556)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T14:59:22.617

我想我找到了解决方案，但我仍然不知道为什么会发生这种情况。事情是这样的：

当我从位于我的操作系统 Ubuntu 上的目录中启动我的网页（带有小程序和其他所有内容）时，我的 Java 控制台上会弹出这个疯狂的错误。但是，当我从位于远程服务器上的目录（例如，我家局域网中的另一台计算机）开始我的页面时，一切正常。因此，出于某种原因，我需要从某个远程服务器请求我自己的页面，以使一切正常。这只发生在我的问题中描述的上述情况。我会在网上搜索，试图找出发生这种情况的原因。

# jquery - JQuery，检查箭头键按下 swith 语句

> ID：11533236
> 
> 赞同：0
> 
> 时间：2012-07-18T01:50:46.297
> 
> 标签：jquery, switch-statement, arrow-keys

我已经设置了一个 keydown 功能，我想根据是否按下左、右、上或下箭头键来做不同的事情。这是使用 switch 语句工作的，但我也想在按下 ANY 箭头键时做一些事情，但无法弄清楚。我的代码：

```
$(document).keydown(function (e) {

var keyCode = e.keyCode || e.which,
    arrow = {left: 37, up: 38, right: 39, down: 40 },

switch (keyCode) {

    case arrow.left:
        // do something left
    break;

    case arrow.right:
        // do something right
    break;
}       

}); 
```

我真的很想要一行代码，我可以检查是否按下了任何箭头键，但无法弄清楚，例如：

```
case arrow:
    // do something for any arrow keys
break; 
```

仅使用“案例箭头”似乎不起作用。有人可以帮忙吗？

提前致谢！

编辑：感谢大家的帮助。这是我的最终代码，供任何人查看：

```
$(document).keydown(function (e) {

    if (e.which >= 37 && e.which <= 40) {
        $('p.key-notification').fadeOut('slow');
    }

    var keyCode = e.keyCode || e.which,
    arrow = {left: 37, up: 38, right: 39, down: 40 },

    switch (keyCode) {

        case arrow.left:
            // do something left
        break;

        case arrow.right:
            // do something right
        break;
    }       

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T01:55:46.620

为什么这也必须在你的`switch`陈述中？

`if`切换后单独声明：

```
if (keyCode >= 37 && keyCode <= 40) {
    // run your code here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T02:05:12.970

单个`switch`语句无法在多个条件下匹配 - 您可能会失败，但这不会评估后续案例的表达式，也不会达到您想要的效果。我会这样做：

```
if (keyCode >= 37 && keyCode <= 40) {
   // do any processing for _any_ arrow key here if it should happen
   // before individual arrow key processing

   switch (keyCode) {

      case arrow.left:
        // do something left
        break;

      case arrow.right:
        // do something right
        break;
   }

   // do any processing for _any_ arrow key here if it should happen
   // after individual key processing
} 
```

将语句放在语句`switch`内部`if`可以在没有任何情况匹配时对其进行评估。（所以很明显，如果您以后想要`switch`处理其他键，则需要将其移出`if`。）

如果您需要对没有连续键码的键执行类似操作，那么显然您不能使用`>= && <=`条件，因此您可以执行以下操作：

```
if (keyCode === arrow.left || keyCode === arrow.right
   || keyCode === arrow.up || keyCode === arrow.down) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-06T05:58:48.647

如果我理解正确，这应该可以满足您的需要。

**另一种增加可读性的方法**

```
var  arrow = { left: 37, up: 38, right: 39, down: 40 }; 
```

**任何一位**

```
switch (evt.keyCode) {
    case arrow.right:
    case arrow.left:
    case arrow.up:
    case arrow.down:
        // Do something
        break;
} 
```

**之一**

```
switch (evt.keyCode) {
    case arrow.right:
        // Do right
        break;
    case arrow.left:
        // Do left
        break;
    case arrow.up:
        // Do up
        break;
    case arrow.down:
        // Do down
        break;
} 
```

# security - Now.js + Express -> 断开连接问题

> ID：11533239
> 
> 赞同：0
> 
> 时间：2012-07-18T01:51:03.970
> 
> 标签：security, node.js, express, nowjs-sockets, poker

这是所有节点大师的问题：

我是使用 NowJs 和 Express 的新手，我正在建立一个扑克网站。我遇到的主要问题是：

当用户创建游戏时，打开一个新窗口并关闭它。关闭第二个窗口时，会触发 Disconnect 事件，将用户与第一个窗口断开连接

我怎样才能避免这个问题？必须有一种解决方法另外，我正确地使用 NodeJs 和 Express 作为将存储信用卡信息的网站的基础？如果没有，建立扑克网站的最佳方式是什么？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:47:42.047

Don't load NowJS in the second window. Communicate with the server from the main window, accessing its functions from the second window using `window.opener.myFunction()`.

# php - 添加到数据库之前的重复检查

> ID：11533243
> 
> 赞同：0
> 
> 时间：2012-07-18T01:51:24.790
> 
> 标签：php, mysql

我有一个可以工作的代码，但不是真的我不知道为什么，我想做的是检查数据库内部的 URL 是否已经存在，如果它让用户知道，如果它不是继续并添加它。

该代码还确保该字段不为空。但是，它似乎会检查 url 是否已经存在，但是否不再添加到数据库中。此外，重复检查似乎有时会起作用，有时却不起作用，所以有点麻烦。任何指针都会很棒。谢谢你。

```
 if(isset($_GET['site_url']) ){

    $url= $_GET['site_url'];

    $dupe = mysql_query("SELECT * FROM $tbl_name WHERE URL='$url'");
    $num_rows = mysql_num_rows($dupe);
    if ($num_rows) {
    echo 'Error! Already on our database!';
    }
    else {
    $insertSite_sql = "INSERT INTO $tbl_name (URL) VALUES('$url')";
    echo $url;
    echo ' added to the database!';

    }

}
else {
echo 'Error! Please fill all fileds!';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T01:52:35.413

您应该在 MySQL 中创建字段，而不是在 PHP 端进行检查[`UNIQUE`](http://dev.mysql.com/doc/refman/5.1/en/partitioning-limitations-partitioning-keys-unique-keys.html)。这样就可以[在数据库级别进行唯一性检查](http://dev.mysql.com/doc/refman/5.0/en/constraint-primary-key.html)（这可能会更有效率）。

```
ALTER TABLE tbl ADD UNIQUE(URL); 
```

请注意，当重复被`INSERT`编辑时，MySQL 会抱怨。您应该监听 MySQL 返回的错误。使用您当前的功能，您应该检查是否`mysql_query()`返回 false 并检查`mysql_error()`。但是，您确实应该使用[PDO](http://php.net/pdo)。这样你就可以做到：

```
try {
    $db = new PDO('mysql:host=localhost;db=dbname', $user, $pass);

    $stmt = $db->query('INSERT INTO tbl (URL) VALUES (:url)');
    $stmt->execute(array(':url' => $url));
} catch (PDOException $e) {
    if($e->getCode() == 1169) { //This is the code for a duplicate
        // Handle duplicate
        echo 'Error! Already in our database!';
    }
} 
```

此外，在你的桌子上有一个**非常**重要的。`PRIMARY KEY`你真的应该加一个。有[很多原因](https://stackoverflow.com/q/840162/568785)。你可以这样做：

```
ALTER TABLE tbl ADD Id INT;
ALTER TABLE tbl ADD PRIMARY KEY(Id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:58:17.727

您应该听取 PhpMyCoder 关于 UNIQUE 字段类型的建议。

此外，您没有打印任何错误。

确保`or die (mysql_error());`在`mysql_*`函数结束时打印错误。

你甚至不应该使用 mysql_* 函数。请改用 PDO 或 MySQLi。

您也没有执行插入查询...

试试这个代码：

```
if(isset($_GET['site_url']) ){

$url= $_GET['site_url'];

$dupe = mysql_query("SELECT * FROM $tbl_name WHERE URL='$url'") or die (mysql_error());
$num_rows = mysql_num_rows($dupe);
if ($num_rows > 0) {
echo 'Error! Already on our database!';
}
else {
$insertSite_sql = "INSERT INTO $tbl_name (URL) VALUES('$url')";
mysql_query($insertSite_sql) or die (mysql_error());
echo $url;
echo ' added to the database!';

}

}
else {
echo 'Error! Please fill all fileds!';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T02:06:27.483

正如 PhpMyCoder 所说，您应该为表添加一个唯一索引。

为了补充他的答案，这里是您如何只用一个查询来做您想做的事情。

添加唯一索引后，如果您尝试“INSERT INTO”并导致重复，MySQL 将产生错误。

您可以使用 mysql_errno() 找出是否有重复条目并告诉用户。

例如

```
$sql = "INSERT INTO $tbl_name (URL) VALUES('$url')";
$result = mysql_query($sql);

if($result === false) {
  if(mysql_errno() == $duplicate_key_error) {
    echo 'Error! Already in our database!';
  } else {
    echo 'An error has occurred. MySQL said: ' . mysql_error();
  }
} 
```

mysql_error() 将以简单的英文返回 mysql 错误。

mysql_errno() 只返回数字错误代码。所以将 $duplicate_key_error 设置为任何代码（我不知道它是不是我的头脑），你都准备好了。

另请注意，您不想向生产中的用户打印任何特定的系统错误。您不希望黑客获取有关您服务器的各种信息。您只会在测试或非公共程序中打印 MySQL 错误。

还！重要的是，不推荐使用 mysql 函数。如果您访问他们的任何页面（例如[http://php.net/manual/en/function.mysql-errno.php](http://php.net/manual/en/function.mysql-errno.php)），您将看到更好的替代方案的建议。您可能想要使用 PDO。

任何想要编辑我的答案以将 mysql 更改为 PDO 或添加 PDO 版本的人，请继续。

# jquery-mobile - 尝试使用 jQuery Mobile 调用“加载”时未捕获的 TypeError

> ID：11533247
> 
> 赞同：4
> 
> 时间：2012-07-18T01:52:13.580
> 
> 标签：jquery-mobile, loading

我花了 5 个小时尝试使用 jQuery Mobile 显示加载消息。相反，我得到：

> 未捕获的类型错误：对象 #<Object> 没有方法“加载”

这是我的代码：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

<script type="text/javascript">
    $.mobile.loading("show");
</script> 
```

这是当前代码：

```
 <head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

    <script type="text/javascript">
        $.mobile.showPageLoadingMsg();
    </script>
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:12:12.463

您遇到的异常是由于方法引用不准确，如错误中所述：

> 未捕获的类型错误：对象 # 没有“加载”方法

该`loading()`方法是在 1.2 中添加的，但您使用的是 1.1.1，这就是它声明它没有`loading`方法的原因。

> 显示或隐藏页面加载消息，可通过小部件文档中描述的 $.mobile.loader 原型选项进行配置，也可以通过 params 对象进行控制。

用法：

```
//cue the page loader
$.mobile.loading( 'show' );

//use theme swatch "b", a custom message, and no spinner
$.mobile.loading( 'show', { theme: "b", text: "foo", textonly: true }); 
```

您应该为您的版本使用的方法是`showPageLoadingMsg()`.

用法：

```
//cue the page loader
$.mobile.loadingMessage = 'Loading...Please wait';
$.mobile.showPageLoadingMsg();

//use theme swatch "b", a custom message, and no spinner
$.mobile.showPageLoadingMsg("b", "This is only a test", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:49:01.473

您使用 jquery.mobile-1.1.1.min.js 。不支持 jQuery 移动 1.1.1

```
$.mobile.loading("show"); 
```

这个方法在 jQuery mobile 1.2.0 中。

支持

```
$.mobile.showPageLoadingMsg(); 
```

*您可以在mobileinit*方法中配置 loadMessage 。

前任：

```
 $.mobile.loadingMessage = "Loading Message"; 
 $.mobile.loadingMessageTextVisible = true;
 $.mobile.loadingMessageTheme="a"; 
```

我有同样的问题，最后我找到了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T02:26:23.097

最后我找到了解决方案

它不能直接从简单的 javascript 函数中调用，我需要将它与页面一起使用

```
$("#Step1").live("pageshow", function () {
    $.mobile.showPageLoadingMsg();  
}); 
```

# c# - 设置 Control.Cursor 未按预期工作

> ID：11533248
> 
> 赞同：0
> 
> 时间：2012-07-18T01:52:16.147
> 
> 标签：c#, winforms, c#-4.0, visual-studio-2012

我有一个 DevExpress 图表控件（尽管它也可能是一个标准控件......），当我将光标设置在 MouseMove 上时，虽然当我期望它是光标没有改变时，正确的行被击中。光标不是从其他任何地方设置的，表单或其他东西是否有可能在没有任何代码的情况下以某种方式覆盖我的设置？

这是我的 MouseMove 事件；这有点不同，因为我只希望光标在非常特定的情况下改变：

```
private void ChartOnMouseMove(object sender, MouseEventArgs eventArgs)
{
    var chartControl = sender as ChartControl;
    var hitInformation = chartEffect.CalcHitInfo((eventArgs).X, (eventArgs).Y);

    if (effectDataTable != null && effectDataTable .Columns.Count > 0 && effectDataTable .Columns.Contains("Player") && (hitInformation.InSeries || hitInformation.InSeriesLabel || hitInformation.InSeriesTitle))
    {
        chartControl .Cursor = Cursors.Default;
    }
    else
    {
        chartControl .Cursor = Cursors.Hand;
    }
} 
```

我正在使用 Visual Studio 2012 beta 和 .NET 4，这可能是个怪癖吗？我以前从未见过这种行为，我希望你们中的一个人有！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:18:27.993

我最终重新安装了 Visual Studio 和 .NET，突然间一切都按预期工作（没有代码更改）。这是一个奇怪的问题，但我想我会发布我的问题的解决方案，以防其他人有同样的问题......

# git - 如何通过其哈希将无法访问的 git commit 添加到 stash

> ID：11533252
> 
> 赞同：1
> 
> 时间：2012-07-18T01:52:43.417
> 
> 标签：git, git-stash

我有大量无法访问的提交的哈希（愚蠢`clear`的我在输入时尝试控制台`git stash`）

我从 git fsck 弄乱了一堆这些哈希值

有什么简单的方法可以将`xargs`这些哈希返回到 git stash 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:07:16.830

快速回答：

```
 git fsck | grep commit | cut -d' ' -f3 |
   while read hash; do git rev-parse --verify --quiet $hash^2 && echo $hash; done |
   xargs git log --grep WIP --pretty=oneline |
   while read hash wip on branch commit junk; do
    git checkout $hash;  git reset --soft $commit;  git stash; done 
```

请注意，这会将存储的索引和工作树部分分成不同的存储。你能举一个你保存的输出的例子吗？存储有多个部分，您可能没有所有部分的 SHA。

编辑以包含您的示例存储发现脚本，以从正确的相对基础复制存储。

# php - 使用 PHP 的具有多个 URL 的网页

> ID：11533257
> 
> 赞同：0
> 
> 时间：2012-07-18T01:53:34.093
> 
> 标签：php, web, include

我想知道如何使“website.com”具有一个 index.php 文件，该文件只需打开“website.com/home”但不更改 URL。我最初拥有它，因此它在“website.com/index.php”中使用了“website.com/home/index.php”的PHP包含，但是当我不得不在“website.com/home/index”中使用包含时.php”它停止工作，因为它正在运行来自“website.com/index.php”而不是“website.com/home/index.php”的包含有什么方法可以简单地发送文件“website.com/home /index.php”并让它从“website.com/home/index.php”运行而不更改 URL？我想避免使用绝对位置来简化它，因此我可以将代码复制并粘贴到其他目录中，而无需相应地对其进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:54:38.400

使用`chdir()`导航到正确的文件夹，然后`include("index.php");`

# c# - 将 XML 注释移动到单独的文件

> ID：11533259
> 
> 赞同：5
> 
> 时间：2012-07-18T01:53:41.823
> 
> 标签：c#, xml, visual-studio-2010, documentation, xml-comments

我喜欢[XML 注释](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)。然而，随着一切都崩溃，每两行看起来像：

```
[/// summary ...]
public void CreateUser(string username, string password)[...] 
```

将其乘以数十或数百种方法，生成的折叠代码很难筛选。 **我可以将这些注释移动到单独的 XML 文件**中，并且仍然让 Visual Studio 识别关联，以便它们仍然显示在 Intellisense 中吗？如果是这样，我该如何建立这种关联？而且我还使用 SandCastle 根据这些评论生成文档，因此该关联也必须得到 SandCastle 的认可。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T03:43:40.533

您可以使用`<include file='...' path='...'>`标签来引用外部评论。请参阅[http://msdn.microsoft.com/en-us/library/9h8dy30z.aspx](http://msdn.microsoft.com/en-us/library/9h8dy30z.aspx)。

我不知道有任何工具可以将现有源文件中的注释移动到外部注释文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-18T13:21:40.023

我可能晚了 7 年，但我想做同样的事情，我找到了一种方法来获取一个 XML 中的所有文档，但您可能必须手动完成其余的工作，将`.csproj`以下内容添加到文件中：

```
 <PropertyGroup>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <NoWarn>$(NoWarn);1591</NoWarn>
  </PropertyGroup> 
```

当你构建你的项目时，你会在输出目录中找到一个`<ProjectName>.xml`包含所有内联文档的文件，你可以复制这个文件的内容*（你可能需要在 xml 中编辑一些标签，但可能不多)*并将它们放在项目中的文件中。

`<include>`然后你可以用标签替换现有的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:05:11.340

简短的回答：AFAIK 没有。

XML 注释对于第三方将使用的公开公开的方法很有用。由于我添加到应用程序中的几乎所有面向公众的功能都是通过契约接口完成的，（有助于测试能力）我将把注释放在接口声明上，并在上面使用 <see cref="..."/>执行。

界面：

```
///<summary>
/// Provides so-in-so fetching functionality on the provided criteria.
/// Examples, parameters, etc.
///</summary>
IEnumarable<Something> FetchSomethingsBaseOnCriteria(params Criteria[] criteria); 
```

执行

```
///<summary>
/// <see cref="ISomethingDoer.FetchSomethingsBasedOnCriteria"/>
///</summary>
IEnumarable<Something> ISomethingDoer.FetchSomethingsBaseOnCriteria(params Criteria[] criteria)
{
  // Get fetching...
} 
```

不确定大多数文档生成器是否具有解决来自 <see/> 的注释的智能我相信 Sandcastle 具有 <Inheritdoc/> 标记，这将允许它获取基本接口的注释。[http://www.ewoodruff.us/shfbdocs/html/79897974-ffc9-4b84-91a5-e50c66a0221d.htm](http://www.ewoodruff.us/shfbdocs/html/79897974-ffc9-4b84-91a5-e50c66a0221d.htm)

在您使用多态接口的地方，这可能不起作用。（我认为您不能在中间接口中覆盖声明/注释）

对于内部使用和私有代码，我不理会注释，因为它通常是解释显而易见的额外开销。它们太容易失去同步，在这种情况下它们开始误导用户或需要被忽略。（“评论的谎言。”——干净的代码）我依靠 BDD 风格的单元测试来描述我打算用代码做什么，并用描述性代码来描述自己。

# ios - 如何将特定产品项目 ID 又名名称与 InApp 购买相关联？

> ID：11533260
> 
> 赞同：0
> 
> 时间：2012-07-18T01:53:44.160
> 
> 标签：ios, in-app-purchase

想象一个小部件世界，其中每个小部件都有一个唯一的名称/标识符。例如，ABC。

在 Apple 确认付款后，我需要交付他们根据该唯一标识符购买的特定内容（ABC 内容）。

这是一个示例：他们购买了一个小部件，但我需要知道他们购买的小部件的特定标识符（即名称）是什么，以便为他们提供正确的小部件内容。每个小部件都有一个来自服务器的唯一标识符/名称。有数十亿个唯一命名的小部件。

理想情况下，我会将交易的补充信息发送给 Apple，以便当交易成功通知返回时，我确切地知道购买了哪个 Widget（例如 ABC）。

有没有办法发送稍后返回给我的补充信息，或者我是否需要管理我自己的产品购买队列，其中每次购买都有产品的特定名称/标识符？如果我必须管理自己尝试购买的 Widget 集合，这样做有什么好的做法？我是否存储 SKPaymentTransaction 对象的 NSMutableArray 以供以后查找？

（顺便说一句，有三种不同的盒子。每种不同的盒子都有不同的成本，因此 productIdentifier。）但是，只有一种盒子需要命名的 Widget 功能。

谢谢！

顺便说一句，我研究了这个文档及其链接到很多： [https ://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html#//apple_ref/doc/uid /TP40008267](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008267)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:53:04.860

这时候，答案就是跟踪自己的具体产品信息。

在小部件的上下文中，拥有您自己的特定小部件队列 (NSMutableArray)（或者如果您只需要小部件名称）。在获得苹果的绿灯（已验证收据）后，将引用此自定义 Widget 队列。

换句话说，将 Widget 放在您自己的 Widget 队列中，获得 Apple 的绿灯，让 Widget 退出队列，然后做您需要做的事情来交付内容。

如果自定义队列的管理和与 Apple Store Kit 的交互由名为 TransactionBroker 的类（或任何您希望的名称）完成，所有这一切都会容易得多。

# java - Try-catch 短路/故障通过 java

> ID：11533261
> 
> 赞同：5
> 
> 时间：2012-07-18T01:53:45.220
> 
> 标签：java, exception

我想使用 try-catch 块来处理两种情况：特定异常和任何其他异常。我可以这样做吗？（一个例子）

```
try{
    Integer.parseInt(args[1])
}

catch (NumberFormatException e){
    // Catch a number format exception and handle the argument as a string      
}

catch (Exception e){
    // Catch all other exceptions and do something else. In this case
    // we may get an IndexOutOfBoundsException.
    // We specifically don't want to handle NumberFormatException here      
} 
```

NumberFormatException 也会由底部块处理吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T01:55:39.943

不，因为更具体的异常 (NumberFormatException) 将在第一次捕获中处理。重要的是要注意，如果您交换缓存，您将收到编译错误，因为您必须在更一般的异常之前指定更具体的异常。

这不是你的情况，但从 Java 7 开始，你可以在 catch 中对异常进行分组，例如：

```
try {
    // code that can throw exceptions...
} catch ( Exception1 | Exception2 | ExceptionN exc ) {
    // you can handle Exception1, 2 and N in the same way here
} catch ( Exception exc ) {
    // here you handle the rest
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T01:55:33.243

如果 a`NumberFormatException`被抛出，它将被第一个捕获，`catch`第二个`catch`不会被执行。所有其他例外都属于第二个。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T05:43:35.283

试试这个：`throw new Exception()` 在**NFE**中添加。

```
try{
    Integer.parseInt(args[1])
}

catch (NumberFormatException e){
    // Catch a number format exception and handle the argument as a string
    throw new Exception();      
}

catch (Exception e){
    // Catch all other exceptions and do something else. In this case
    // we may get an IndexOutOfBoundsException.
    // We specifically don't want to handle NumberFormatException here      
} 
```

这样，您可以在其 catch 块中处理**NFE 。**和所有其他在另一个街区。您不需要在第二个块中再次处理**NFE 。**

# c++ - 变量的复杂约束函数

> ID：11533263
> 
> 赞同：1
> 
> 时间：2012-07-18T01:54:00.157
> 
> 标签：c++, linear-programming, cplex

我有一个*优化变量*x 和一个常数 y。

我想表达一个约束

```
f(x) <= y. 
```

我试着做

```
 27: IloRange rng = (f(cplex->getValue(x)) <= y);
 28: model.add(rng); 
```

但我得到了错误

```
cplex.cpp:27: error: conversion from 'bool' to non-scalar type 'IloRange' requested 
```

有人可以帮我写一个这种形式的约束吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:34:21.433

首先，线性规划不可能实现严格的不等式。但是你可以表达

```
f(x) <= y 
```

cplex->getValue(x) 是一个双精度所以 f(x) <= y 是一个布尔值。无论如何， cplex->getValue() 仅在您有解决方案后才可用，因此它永远不应该成为您模型的一部分，除非您正在迭代解决它。要获得 IloRange，您需要重写 f(x) 以接受 IloNumVar 作为其参数并返回 IloExpr。例如，如果你有类似的东西

```
double f(double x) {return 2*x;} 
```

你需要一个版本

```
IloExpr f(IloNumVarx) {return 2*x;} 
```

然后你可以写

```
IloRange rng = (f(x) <= y); 
```

如果您使用 cplex（或任何线性规划求解器），f(x) 只能是线性函数或凸二次函数。

# mysql - 如何设置三个实体与类之间的关系

> ID：11533265
> 
> 赞同：0
> 
> 时间：2012-07-18T01:54:23.567
> 
> 标签：mysql, database, entity-relationship, data-modeling

我有四节课

1.  用户
2.  简介
3.  活动
4.  工作簿

* * *

1.  用户每年可以有许多个人资料。每年的差异简介
2.  `User profile` 将`many to many`有`Activities`

* * *

所以会有`profile_activities`一张桌子`profile_id`和`activity_id`

现在用户将为每个配置文件的每个活动执行 1 个工作簿

所以我很困惑如何在数据库中映射

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:07:10.177

我根据您的评论修改了我的建议。

也许可以有一个 UserActivity 类，它有一个 Activity 属性和一个 Workbook 属性。

然后，您可以拥有一个带有属性的 User 类，该属性是 Profile 类的列表，而 Profile 类将具有一个属性，即 UserActivity 类的列表。

这满足您的对象模型。

所以 UserActivity 表将有一个外键指向 Profile 表中的一行（这将是它的父 ID），以及 Activity 和 Workbook 表的外键。

您的 Profile 表有一个外键，指向 User 表中的一行，即它的 parentID。

# ios5 - 如何暂停、停止和重置 AUFilePlayer？

> ID：11533266
> 
> 赞同：4
> 
> 时间：2012-07-18T01:54:34.807
> 
> 标签：ios5, audio, core-audio

我正在使用 AUFilePlayer 处理核心音频，将一些 mp3 加载到混音器单元中，一切都很好，但是我无法暂停音乐或将音乐倒回开始。我尝试启动和停止 AudioGraph，但是一旦停止播放，我就无法重新启动它。我还尝试使用 AudioUnitSetProperty 将文件播放设置为 0

即沿着这些思路：

```
 ScheduledAudioFileRegion rgn;
        memset (&rgn.mTimeStamp, 0, sizeof(rgn.mTimeStamp));
        rgn.mTimeStamp.mFlags = kAudioTimeStampSampleTimeValid;
        rgn.mTimeStamp.mSampleTime = 0;
        rgn.mCompletionProc = NULL;
        rgn.mCompletionProcUserData = NULL;
        rgn.mAudioFile = inputFile;
        rgn.mLoopCount = 1;
        rgn.mStartFrame = 0;

        rgn.mFramesToPlay = nPackets * inputFormat.mFramesPerPacket;

        AudioUnitSetProperty(fileUnit, kAudioUnitProperty_ScheduledFileRegion, 
                             kAudioUnitScope_Global, 0,&rgn, sizeof(rgn)); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-28T10:12:07.637

如果其他人正在处理类似的问题，这花了我几个小时在谷歌上搜索，这就是我发现的如何*专门*检索和设置播放头。

从 AUFilePlayer 单元获取播放头：

```
AudioTimeStamp timestamp;
UInt32 size = sizeof(timestamp);
err = AudioUnitGetProperty(unit, kAudioUnitProperty_CurrentPlayTime, kAudioUnitScope_Global, 0, &timestamp, &size); 
```

`timestamp.mSampleTime`是该文件的当前播放头。转换`mSampleTime`为浮点数或双精度数并除以文件的采样率以转换为秒。

为了重新启动 AUFilePlayer 的播放头，我有一个更复杂的场景，其中多个 AUFilePlayer 通过一个混音器，可以在不同的时间、多次和不同的循环次数进行调度。这是一个真实的场景，让它们在正确的时间重新启动需要一点代码。

每个 AUFilePlayer 有四种场景及其时间表：

1.  播放头在开头，所以可以正常安排。

2.  播放头已超过项目的持续时间，根本不需要安排。

3.  播放头在项目开始之前，所以开始时间可以上移。

4.  播放头正在播放一个项目，因此需要调整文件内播放的区域，并且需要单独安排剩余的循环（以便它们完整播放）。

这是一些演示这一点的代码（一些外部结构来自我自己的代码，而不是 Core Audio，但机制应该很清楚）：

```
// Add each region
for(int iItem = 0; iItem < schedule.items.count; iItem++) {
    AEFileScheduleItem *scheduleItem = [schedule.items objectAtIndex:iItem];

    // Setup the region
    ScheduledAudioFileRegion region;
    [file setRegion:&region schedule:scheduleItem];

    // Compute where we are at in it
    float playheadTime = schedule.playhead / file.sampleRate;
    float endOfItem = scheduleItem.startTime + (file.duration*(1+scheduleItem.loopCount));

    // There are four scenarios:

    // 1\. The playhead is -1
    //    In this case, we're all done
    if(schedule.playhead == -1) {
    }

    // 2\. The playhead is past the item start time and duration*loopCount
    //    In this case, just ignore it and move on
    else if(playheadTime > endOfItem) {
        continue;
    }

    // 3\. The playhead is less than or equal to the start time
    //    In this case, simply subtract the playhead from the start time
    else if(playheadTime <= scheduleItem.startTime) {
        region.mTimeStamp.mSampleTime -= schedule.playhead;
    }

    // 4\. The playhead is in the middle of the file duration*loopCount
    //    In this case, set the start time to zero, adjust the loopCount
    //    startFrame and framesToPlay
    else {

        // First remove the start time
        region.mStartFrame = 0;
        double offsetTime = playheadTime - scheduleItem.startTime;

        // Next, take out any expired loops
        int loopsExpired = floor(offsetTime/file.duration);
        int fullLoops = region.mLoopCount - loopsExpired;
        region.mLoopCount = 0;
        offsetTime -= (loopsExpired * file.duration);

        // Then, adjust this segment of a loop accordingly
        region.mStartFrame = offsetTime * file.sampleRate;
        region.mFramesToPlay = region.mFramesToPlay - region.mStartFrame;

        // Finally, schedule any remaining loops separately
        if(fullLoops > 0) {
            ScheduledAudioFileRegion loops;
            [file setRegion:&loops schedule:scheduleItem];
            loops.mStartFrame = region.mFramesToPlay;
            loops.mLoopCount = fullLoops-1;
            if(![super.errors check:AudioUnitSetProperty(unit, kAudioUnitProperty_ScheduledFileRegion, kAudioUnitScope_Global, 0, &region, sizeof(region))
                           location:@"AudioUnitSetProperty(ScheduledFileRegion)"])
                return false;
        }
    }

    // Set the region
    if(![super.errors check:AudioUnitSetProperty(unit, kAudioUnitProperty_ScheduledFileRegion, kAudioUnitScope_Global, 0, &region, sizeof(region))
                   location:@"AudioUnitSetProperty(ScheduledFileRegion)"])
        return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:39:02.957

我想到了。如果你们中的任何人遇到同样的问题，这是我的解决方案：

1.  在启动时，我使用文件播放器音频单元数组初始化 AUGraph。我将文件播放器音频单元数组中每个轨道的播放头设置为零。

2.  在“暂停”时，首先我停止 AuGraph。然后我遍历文件播放器音频单元数组并捕获当前播放头位置。每次按下暂停按钮时，我都会确保将新的当前播放头位置添加到旧播放头位置以获得其真实位置。

3.  当用户点击播放时，我重新初始化 AuGraph，就像我第一次启动应用程序一样，只是我将播放头设置为用户点击“暂停”时存储的数字，而不是告诉它在文件的开头。

4.  如果用户单击停止，我将存储的播放头位置设置为零，然后停止 AuGraph。

# java - 创建静态菜单栏

> ID：11533273
> 
> 赞同：0
> 
> 时间：2012-07-18T01:55:02.533
> 
> 标签：java, android, xml

我一直在尝试做的是创建一个无论显示什么活动或布局都保持“静态”的菜单。有没有办法做到这一点，或类似的事情？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:59:18.130

是的，

**1-**创建一个自定义活动（从活动扩展它）

**2-**在该自定义 Activity 中编写菜单创建代码。

**3-**现在从这个自定义活动扩展你的所有活动。

# python - 如何将具有相同键的字典组合起来？

> ID：11533274
> 
> 赞同：10
> 
> 时间：2012-07-18T01:55:07.870
> 
> 标签：python, dictionary

我有一个像这样的字典列表：

```
dicts = [
    {'key_a': valuex1,
     'key_b': valuex2,
     'key_c': valuex3},

    {'key_a': valuey1,
     'key_b': valuey2,
     'key_c': valuey3},

    {'key_a': valuez1,
     'key_b': valuez2,
     'key_c': valuez3}
] 
```

我想用这些来构建一个像这样的大字典：

```
big_dict = {
    'key_a': [valuex1, valuey1, valuez1],
    'key_b': [valuex2, valuey2, valuez2],
    'key_c': [valuex3, valuey3, valuez3]
} 
```

我有什么优雅的“[拉链](http://docs.python.org/library/functions.html#zip)”方式吗？

所有的键总是相同的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T01:58:05.107

```
big_dict = {}
for k in dicts[0]:
    big_dict[k] = [d[k] for d in dicts] 
```

或者，使用[dict 理解](https://www.python.org/dev/peps/pep-0274/)：

```
{k: [d[k] for d in dicts] for k in dicts[0]} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-12T17:37:00.907

您可以使用[`collections.defaultdict`](https://docs.python.org/library/collections.html#collections.defaultdict). 这个解决方案的好处是它不需要键在字典之间保持一致，并且它仍然保持最小的 O( *n* ) 时间复杂度。

```
from collections import defaultdict

dict_list = [{'key_a': 'valuex1', 'key_b': 'valuex2', 'key_c': 'valuex3'},
             {'key_a': 'valuey1', 'key_b': 'valuey2', 'key_c': 'valuey3'},
             {'key_a': 'valuez1', 'key_b': 'valuez2', 'key_c': 'valuez3'}]            

d = defaultdict(list)
for myd in dict_list:
    for k, v in myd.items():
        d[k].append(v) 
```

结果：

```
print(d)

defaultdict(list,
            {'key_a': ['valuex1', 'valuey1', 'valuez1'],
             'key_b': ['valuex2', 'valuey2', 'valuez2'],
             'key_c': ['valuex3', 'valuey3', 'valuez3']}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T01:58:46.983

如果所有 dicts 具有相同的键集，这将起作用：

```
dict((k, [d[k] for d in dictList]) for k in dictList[0]) 
```

如果它们可能有不同的键，您需要首先通过对各种 dicts 的键执行 set unions 来构建一组键：

```
allKeys = reduce(operator.or_, (set(d.keys()) for d in dictList), set()) 
```

然后，您需要防止某些字典中缺少键：

```
dict((k, [d[k] for d in [a, b] if k in d]) for k in allKeys) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-12T17:43:37.127

如果您乐于使用第三方库，您可以使用 Pandas。构造`pd.DataFrame`函数直接接受字典列表：

```
import pandas as pd

res = pd.DataFrame(dictList).to_dict(orient='list')

{'key_a': ['valuex1', 'valuey1', 'valuez1'],
 'key_b': ['valuex2', 'valuey2', 'valuez2'],
 'key_c': ['valuex3', 'valuey3', 'valuez3']} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-03T18:39:04.357

您可以通过以下方式合并字典：

```
def merge_dicts(dict_list, separator=''):
    """
    Merges list of dictionaries to a single dictionary, Concatenates values with the same key.
    :param dict_list: list of dictionaries to be merged.
    :param separator: separator to be inserted between values of same key.
    :return: Merged dictionary.
    """
    return {k1: separator.join([d[k1] for d in dict_list if k1 in d])
            for k1 in set(reduce(lambda x, y: x+y, [k.keys() for k in dict_list]))
    } 
```

# r - 粘贴和打印的区别（影响功能的结果）

> ID：11533284
> 
> 赞同：4
> 
> 时间：2012-07-18T01:55:44.743
> 
> 标签：r

首先，我不太确定粘贴和打印之间的区别是什么。但我使用“打印”来吐出通用语句和“粘贴”来吐出使用/引用特定变量的语句。

我的问题是，在函数中使用时，如果在“ ”语句`paste`之后的函数中包含任何内容，我将丢失粘贴的输出。`paste`

请看以下三个函数：

```
TS<-5 
```

示例 1- 一切正常

```
T<-function(){

if(exists("TS"))
{paste("TS= ", TS, sep=" ")}

else

if(!exists("TS"))
{print.noquote("No TS Values")}

} 
```

示例 2-我的问题。当我在“if”语句之后添加任何内容（在本例中为另一个打印命令）时，我将丢失粘贴的输出

```
T<-function(){

if(exists("TS"))
{paste("TS= ", TS, sep=" ")}

else

if(!exists("TS"))
{print.noquote("No TS Values")}

print("my exsistance removes paste output") 

} 
```

示例 3- 放在“if”之前的相同语句没有负面影响

```
T<-function(){

print("my exsistance does not remove paste output")

if(exists("TS"))
{paste("TS= ", TS, sep=" ")}

else

if(!exists("TS"))
{print.noquote("No TS Values")}

} 
```

有人可以解释这个函数中的冲突在哪里。更好的是如何解决它，以便我可以`paste`在一个函数中使用一个语句，然后执行其他操作

> 基本上我怎样才能让示例 #2 工作。

布朗尼点-（为了视觉一致性）在使用“print.noquote”时，是否有 paste.noquote 之类的东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T02:08:39.620

`paste`连接（粘贴）字符串并返回一个字符向量，因此您可以执行以下操作

```
paste('a','b', sep = '-')

## [1] "a-b" 
```

`print`打印值。从`?print`

> `print`打印它的参数并不可见地返回它（通过`invisible(x)`）。它是一个通用函数，这意味着可以很容易地为新类添加新的打印方法。

大多数类将具有定义的打印方法（或将使用`print.default`）

您可以通过键入查看可用的打印方法

```
methods('print') 
```

在你的情况下 `paste("TS= ", TS, sep=" ")`返回一个字符向量，所以当这是函数的结果时，`print.character`用于显示结果

事实上，我认为你`message`不想`print`或`print.noquote`。

```
T <- function() {
    if (exists("TS"))
    {
        message(paste("TS= ", TS, sep=" "))
    } else if (!exists("TS")) {
        message("No TS Values")
    }
    message("my exsistance removes paste output") 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T02:04:32.003

`paste`返回连接在一起的输入。当一个函数返回时，如果它没有存储到变量中，它会调用 print 任何返回的内容。如果没有明确的“return”或“invisible”语句，函数将返回最后一个顶级调用。

所有这些东西加起来就是你最终看到的东西。如果 paste 是最后一个调用的函数，它最终会返回连接在一起的输入 - 最终由函数返回 - 由于您没有将其保存到变量中，因此最终会被打印出来。如果您明确想要打印某些东西，最好使用`print`or`message`或`cat`- 它们各自的用途略有不同。

# mysql - 如何为每条 MySQL 记录添加额外的单词

> ID：11533287
> 
> 赞同：0
> 
> 时间：2012-07-18T01:55:57.823
> 
> 标签：mysql

**如何为每条 MySQL 记录添加额外的单词。**

**示例表：**

```
|1    | David
|2    | Fin
|3    | Ronny
|4    | Lisa 
```

**必需的：**

```
|1    | T David
|2    | T Fin
|3    | T Ronny
|4    | T Lisa 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:58:00.387

只需使用语句将字符串文字与[`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)它连接到列中：`UPDATE`

```
UPDATE yourtable SET name = CONCAT('T ', name); 
```

如果您需要将其限制为某些行，请务必使用`WHERE`子句：

```
UPDATE yourtable SET name = CONCAT('T ', name) WHERE <some condition>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:59:01.033

利用[`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)字符串函数连接额外的单词和现有值：

```
UPDATE table SET name = CONCAT('T ', name); 
```

根据文档：

> 返回由连接参数产生的字符串。可能有一个或多个参数。如果所有参数都是非二进制字符串，则结果是非二进制字符串。如果参数包含任何二进制字符串，则结果为二进制字符串。一个数字参数被转换成其等效的二进制字符串形式；如果您想避免这种情况，可以使用显式类型转换，如下例所示：

```
SELECT CONCAT(CAST(int_col AS CHAR), char_col); 
```

# java - 如何从连接池中删除损坏的连接对象？使用 c3p0

> ID：11533293
> 
> 赞同：1
> 
> 时间：2012-07-18T01:57:00.907
> 
> 标签：java, spring, jpa, c3p0

如何从连接池中删除损坏的连接对象？使用 c3p0

在我的应用程序中，当数据库通信失败时，它显示异常。获得数据库连接后立即发送任何数据库请求，我得到同样的异常。获得数据库连接 30 秒后的任何请求都可以正常工作。那么如何删除断开的连接对象？

我的连接属性是：-

```
url=jdbc:mysql://db_host:db_port/db_name
driverClassName=db_driver_class_name
username=root
password=password
hibernate.platform=org.hibernate.dialect.MySQLDialect
initialPoolSize=5
minPoolSize=5
maxPoolSize=20
checkoutTimeout=1000
maxStatements=20
acquireRetryAttempts=1
acquireRetryDelay=10
maxIdleTime=1
acquireIncrement=0
maxConnectionAge=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:46:26.680

c3p0 可以通过几种方式测试连接：

*   退房时
*   入住时
*   定期

此处描述了配置：[http ://www.mchange.com/projects/c3p0/#configuring_connection_testing](http://www.mchange.com/projects/c3p0/#configuring_connection_testing)

请注意，连接测试会增加一些开销，具体取决于您对获得的连接所做的工作量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:49:17.810

在您的配置中包含以下参数

```
<prop key="hibernate.c3p0.max_idle_time">6</prop>
   <prop key="hibernate.c3p0.max_idle_time_excess_connection">4</prop>
   <prop key="hibernate.c3p0.idle_connection_test_period">600</prop>
   <prop key="hibernate.c3p0.test_connection_on_checkout">true</prop>
   <prop key="hibernate.c3p0.preferred_test_query">SELECT 1;</prop> 
```

希望这对你有用

# c - C: fgets 总是 NULL

> ID：11533297
> 
> 赞同：1
> 
> 时间：2012-07-18T01:57:34.233
> 
> 标签：c, io

我正在使用 C 中的文件 I/O。我正在尝试使用 fgets 从一个文件中读取数据并将其输出到另一个文件。问题是它总是返回 NULL，因此没有任何内容被复制到输出文件中。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fpIn;
    FILE *fpOut;

    if ((fpIn = fopen("C:\\testIn.txt", "r") == NULL))
    {
        printf("Cannot open input file!\n");
        exit(1);
    }

    if ((fpOut = fopen("C:\\testOut.txt", "a") == NULL))
    {
        printf("Cannot open output file!\n");
        exit(1);
    }

    char buffer[128];
    while (fgets(buffer, 128, fpIn) != NULL)
    {
        fputs(buffer, fpOut);
    }

    fclose(fpIn);
    fclose(fpOut);

    system("PAUSE");
    return 0;
} 
```

另一件事; 当我尝试在 fopen 的第二个 arg 中使用“a+f”时，它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T02:00:41.813

```
if ((fpOut = fopen("C:\\testOut.txt", "a") == NULL)) 
```

应该

```
if ((fpOut = fopen("C:\\testOut.txt", "a")) == NULL) 
```

与输入文件相同。如果您是 C 新手，我建议您一次做一件事，以便更轻松地跟踪问题。例如

```
fpOut = fopen("C:\\testOut.txt", "a");
if(fpOut == NULL) {
    ... 
```

# android - 适用于 Android VS2010 的 Mono：无法在设计器中查看布局

> ID：11533298
> 
> 赞同：2
> 
> 时间：2012-07-18T01:57:35.647
> 
> 标签：android, visual-studio-2010, mono, xamarin.android, designer

我安装`Mono for Android`的目的是使用 Visual Studio 2010 来设计 android 应用程序。我能够编译和部署应用程序，但我无法查看布局设计器。当我双击`.axml`打开的文件时，`source view`没有上下文菜单选项，例如“在设计器中查看”。我可以用来`MonoDevelop`创建布局，但我不应该这样做。

以下是一些屏幕截图： ![在此处输入图像描述](../Images/ed8165c4ea0fdada0a329196eda21803.png) ![在此处输入图像描述](../Images/f9372c4c7efa5ef776958a14e8060c32.png)

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:28:22.170

这似乎很简单，但`Main.axml`在 Visual Studio 中右键单击并选择并选择*Open with* . 然后选择*Android Designer*应该可以解决问题。

尽管可以将 Android Designer 设置为默认值，但它似乎并没有那样工作。我应该说这是 VS 和/或 Monofor Android 中的一个 BUG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:10:28.440

我进行了 3 次安装，直到最终成功。我卸载然后重新安装，它仍然没有工作。然后我只是做了一个修复，它终于工作了。只需继续重新安装，您就会得到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T09:29:48.413

完全卸载，重新安装并重新启动。起初它似乎没有修复它 - 我现有的 hello world 项目仍然无法打开设计器。

我尝试创建一个新项目，现在一切都很好！很奇怪。

我很高兴有 gui 设计师。在学习新平台时，它确实有助于拉平学习曲线——Xamarin 做得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T20:31:04.773

您确定要安装最新的 Mono for Android 吗？（版本 4.2.4）

打开方式对话框应该有一个条目“Android Designer”。

现在选择它并单击“设置为默认值”。

# matlab - 将矢量保存在 txt 文件中

> ID：11533318
> 
> 赞同：1
> 
> 时间：2012-07-18T01:59:43.827
> 
> 标签：matlab

> **可能重复：**
> [如何在 MATLAB 中将数据保存在 .txt 文件中](https://stackoverflow.com/questions/2925623/how-to-save-data-in-txt-file-in-matlab)

Matlab 有这个问题。我有一个矩阵 x，例如 x(100,10)。我只想将第六列保存在 txt 文件中，但是当我用记事本打开 txt 文件时，我希望看到列中的数字。希望可以有人帮帮我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:16:05.980

```
x = randi(100, 100, 10);
y = x(:, 6);
save('sixthcol.txt', 'y', '-ascii'); 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:14:49.263

谢谢安萨里。实际上，我的一位朋友向我建议了这些命令并且效果很好：

```
fid1=fopen('file.txt','wt');
fprintf(fid1,'%8.6f\n',x(:,6));
fclose(fid1); 
```

# ruby-on-rails - 部分 twitter 引导模式中的 gmaps4rails

> ID：11533320
> 
> 赞同：0
> 
> 时间：2012-07-18T02:00:13.857
> 
> 标签：ruby-on-rails, twitter-bootstrap, gmaps4rails

我正在构建一个只有一页然后是模态显示的网站。模态显示各种页面并具有应用程序的核心功能。模式中的每个页面都是通过 ajax 呈现的，所以我遇到了两个问题

我需要在模态框上部分渲染地图。我已经搜索了一遍，没有答案解决了这个问题，因为模态 div 本身存在于页面加载中，但部分不存在。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:27:41.063

部分加载了 ajax，因此不加载包含的 js 依赖项。

您应该在源页面中手动添加这些。

要知道需要哪一个，请显示您的模态并查看 html 源代码。

# ios - iOS：第二次尝试提交应用程序时发出问题

> ID：11533321
> 
> 赞同：0
> 
> 时间：2012-07-18T02:00:19.443
> 
> 标签：ios, app-store, appstore-approval

所以我提交了我的应用程序，但由于缺少图标而被拒绝。我修复了这个问题，存档并再次验证，但现在收到此消息：

```
No suitable application records were found.
Please make sure that you have set up a record for this application on iTunes Connect. 
```

除了其中一个图标的名称外，我没有更改我的应用程序中的任何内容。我不确定发生了什么。谁能给我一些建议？

塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:15:34.380

好的，我发现了它发生的原因。目前在 iTunes Connect 中，该应用程序处于“二进制被拒绝”状态。您必须将其改回“等待上传”。

这个问题有更彻底的解释，第二个答案有步骤：

[没有找到合适的申请记录](https://stackoverflow.com/questions/6858260/no-suitable-application-records-were-found)

# xslt - 在 XSLT 变量中构造一系列 XML 元素

> ID：11533326
> 
> 赞同：2
> 
> 时间：2012-07-18T02:00:55.543
> 
> 标签：xslt, xpath, xslt-2.0

需要明确的是，我已经找到了一种方法来完成我想要使用 XSLT 完成的任务，但它让我觉得效率很低，我想看看是否可以使用不同的解决方案，因为它有助于编写未来的样式表。

另外，我真诚地为以下段落的冗长道歉。

至少，我试图从用俄语编写并以 XML 编码的故事中提取（'pavlova.xml' - 不幸的是，文件太大而无法与我的问题一起发布，但这不是完全必要的）数据，这对在 SVG 中生成饼图。我试图将这些数据存储在一个名为 $chartData 的变量中。给定的饼图总体上与目标角色（一个参数）相关，饼图中的每个单独块将代表一个说话者（另一个角色），它们的大小表示每个说话者相对于其他说话者所说的目标字符的多少。我首先遍历所有说话者（任何提到目标角色的角色），然后确定角色名字在特定说话者的演讲中出现的次数。然而，这些值仅对提到该角色的总次数有用。我需要总数来计算百分比以生成饼图。我知道我可以在另一个变量中单独计算它，但我有兴趣看看我是否可以将一系列节点存储在一个变量中。单独计算总和似乎很浪费，因为它遍历的路径几乎与找到单个计数的路径相同，在这些路径中，在检索到单个值后将它们相加会更有效。到目前为止，我已经能够计算出我想要的一切，但是我尝试使用 xsl:for-each 迭代一个变量，并让它将我的变量识别为一个序列。我需要总数来计算百分比以生成饼图。我知道我可以在另一个变量中单独计算它，但我有兴趣看看我是否可以将一系列节点存储在一个变量中。单独计算总和似乎很浪费，因为它遍历的路径几乎与找到单个计数的路径相同，在这些路径中，在检索到单个值后将它们相加会更有效。到目前为止，我已经能够计算出我想要的一切，但是我尝试使用 xsl:for-each 迭代一个变量，并让它将我的变量识别为一个序列。我需要总数来计算百分比以生成饼图。我知道我可以在另一个变量中单独计算它，但我有兴趣看看我是否可以将一系列节点存储在一个变量中。单独计算总和似乎很浪费，因为它遍历的路径几乎与找到单个计数的路径相同，在这些路径中，在检索到单个值后将它们相加会更有效。到目前为止，我已经能够计算出我想要的一切，但是我尝试使用 xsl:for-each 迭代一个变量，并让它将我的变量识别为一个序列。单独计算总和似乎很浪费，因为它遍历的路径几乎与找到单个计数的路径相同，在这些路径中，在检索到单个值后将它们相加会更有效。到目前为止，我已经能够计算出我想要的一切，但是我尝试使用 xsl:for-each 迭代一个变量，并让它将我的变量识别为一个序列。单独计算总和似乎很浪费，因为它遍历的路径几乎与找到单个计数的路径相同，在这些路径中，在检索到单个值后将它们相加会更有效。到目前为止，我已经能够计算出我想要的一切，但是我尝试使用 xsl:for-each 迭代一个变量，并让它将我的变量识别为一个序列。

我希望变量的格式是这样的：

```
<count name="$speaker1>
    <xsl:value-of select="$spokenCount1"/>
</count>
<count name="$speaker2>
    <xsl:value-of select="$spokenCount2"/>
</count>
... 
```

我尝试了很多方法来解决这个问题，但我不确定是否可以解决。首先是使用 @as 属性更准确地定义 xsl:variable 的内容（特别是尝试将其内容定义为序列），但我发现很难找到和理解有关该属性的文档以及 SequenceType 的工作方式. 其次，我尝试研究如何将内容放入变量中（直接将 for-each 放入变量中并使用 xsl:value-of 或 xsl:copy-of，而不是声明变量并使用 xsl:copy-在外部 for-each 中将数据附加到变量中）。

似乎 xsl:copy-of，而不是 xsl:sequence（具有讽刺意味）是我需要附加一系列节点的东西。我只能使用以下代码获得我上面描述的格式：

```
<xsl:variable name="chartData"/>
    <xsl:for-each
        select="distinct-values(//speech[.//name[not(parent::nonspeech) and ./@ref eq $character]]/@speaker)">
        <xsl:copy-of select="$chartData"/>
        <xsl:variable name="speaker" select="current()"/>
        <xsl:variable name="spokenCount"
            select="document('pavlova.xml')/count(//speech[@speaker eq $speaker]//name[not(parent::nonspeech) and ./@ref eq $character])"/>
        <count name="{$speaker}">
            <xsl:value-of select="$spokenCount"/>
        </count>
    </xsl:for-each>
    <xsl:variable name="spokenTotal" select="sum($chartData)"/>
    <xsl:value-of select="$chartData"/>
    <!--xsl:for-each select="$chartData/count">
        ...
    </xsl:for-each--> 
```

最终目标是让底部注释掉的 for-each 循环遍历每个计数元素，而不是给我一个错误。我的问题是，如果变量如下所示，我可以将变量视为 XML 并遍历每个 count 元素，还是始终将其视为字符串？

```
<?xml version="1.0" encoding="UTF-8"?>
<count name="young-man">4</count>
<count name="olga">24</count>
<count name="cecilija">34</count>
<count name="blonde">1</count>
<count name="vera">32</count>
<count name="servant-fem">6</count>
<count name="valickaja">20</count>
<count name="muse">66</count>
<count name="viktor">4</count>
<count name="dmitrij">15</count>
<count name="anna">11</count>
<count name="iličev">3</count>
<count name="narod">1</count>
<count name="society-man">3</count> 
```

如果是这样，怎么办？

另外，如果有人可以解释，为什么 xsl:copy-of 仅在我将 for-each 超出变量范围并将 select 设置为“$chartData”时进行深度复制？如果我尝试在变量中使用 xsl:copy-of，它只会复制文字元素的文本内容`<count>`并创建一个字符串：424341326206641511313）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:19:00.183

恐怕你的问题很混乱。你想做的事情并不难，但很难知道从哪里开始帮助你前进。

> 我有兴趣看看是否可以将节点序列存储在变量中

是的你可以。您需要清楚是否要创建新节点，或者是否希望变量保存对现有节点的引用。在第一种情况下，您使用“临时树”构造：

```
<xsl:variable name="tree">
  ... content ...
</xsl:variable> 
```

在第二种情况下，您可以使用 select 属性，或包含的序列构造函数加上“as”属性：

```
<xsl:variable name="seq" select="expression"/> 
```

或者

```
<xsl:variable name="seq" as="node()*">
  ... content ...
</xsl:variable> 
```

> 我正在尝试使用 xsl:for-each 迭代变量并让它将我的变量识别为序列

好吧，每个变量的值都是一个序列，问题是，序列中有什么？如果您使用上述变量的第一种形式（内容，没有作为属性），则序列将是包含单个文档节点的单例序列；您可能希望使用路径表达式导航到其子项，例如`<xsl:for-each select="$tree/*"/>`. 在第二种和第三种情况下，序列通常包含多个节点，可以是任何类型的节点，因此您更有可能编写`<xsl:for-each select="$seq"/>`.

> 我发现很难找到和理解有关该属性的文档以及 SequenceType 的工作原理

你在哪里看的？我不能把我的书《XSLT 2.0 Programmer's Reference》推荐得太高...我认为你是那种想要了解事物真正如何工作的人，而不是通过从示例中反复试验来学习。这本书就是为这样的人写的。

> 似乎 xsl:copy-of，而不是 xsl:sequence（具有讽刺意味）是我需要附加一系列节点的东西。

不，你错了。如果要创建包含对现有节点的引用的变量，则需要 xsl:sequence。如果您正在创建一个包含节点副本的临时树，那么 xsl:sequence 和 xsl:copy-of 具有完全相同的效果 - 两者都将复制选定的节点。

> 我可以将变量视为 XML 并遍历每个 count 元素，如果它如下所示

是的你可以。但是我们无法从您对序列的表示中判断这些节点是否是文档节点的子节点，并且知道这一点至关重要。

> 为什么 xsl:copy-of 仅在我将 for-each 超出变量范围并将 select 设置为“$chartData”时进行深度复制？如果我尝试在变量中使用 xsl:copy-of 它只会复制文字元素的文本内容并创建一个字符串

你在这里得出了一个错误的推论。xsl:copy-of 总是做一个深拷贝。如果您只看到节点的字符串内容，那是因为正在使用后续操作来原子化节点或提取它们的字符串值。

# android - setOnItemClickedListener 不工作（gridview）

> ID：11533327
> 
> 赞同：0
> 
> 时间：2012-07-18T02:01:08.117
> 
> 标签：android, gridview

我的代码中有一个 gridview 和一个自定义适配器。我正在尝试设置一个 setOnItemClickedListener 但我没有回报。

有人可以帮我理解为什么我的 setOnItemClickListener 不起作用吗？

谢谢！

```
import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.GridView;
import android.widget.Toast;
import br.com.m.bpuzzle.data.Card;
import br.com.m.bpuzzle.data.ImageLevel;
import br.com.m.bpuzzle.data.PuzzleAdapter;
import br.com.m.bpuzzle.util.Constantes;

public class BPuzzleActivity extends Activity {

    private GridView puzzle;
    private ImageLevel puzzleLevel;
    private PuzzleAdapter adapter;
    private static BPuzzleActivity context;
    private static ArrayList<Card> itens;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.game);

        context = this;
        setupPuzzle();
    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();
        context.overridePendingTransition(R.anim.anim__fadeout, R.anim.anim__fadein);
    }

    private void setupPuzzle() {
        Log.i(Constantes.APPTAG, "Setup puzzle");

        puzzleLevel = new ImageLevel(8, ImageLevel.LEVEL_ANIMALS);
        itens = puzzleLevel.getListElements();

        adapter = new PuzzleAdapter(itens, context);

        puzzle = (GridView) findViewById(R.id.puzzle);
        puzzle.setAdapter(adapter);
        puzzle.setClickable(true);

        puzzle.setOnItemClickListener(new ItemGridViewClickListener());
    }

    private static class ItemGridViewClickListener implements OnItemClickListener {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
            Card item = itens.get(position);
            Toast.makeText(context, "Card: " + item.getCardID(), Toast.LENGTH_LONG).show();
        }

    } 
```

我的布局（gridview 的项目）

```
<?xml version="1.0" encoding="utf-8"?>
<ImageButton xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/image"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:background="@drawable/card"
    android:clickable="true"
    android:contentDescription="@string/app_name"
    android:focusable="false"
    android:focusableInTouchMode="false" /> 
```

适配器

```
public class PuzzleAdapter extends BaseAdapter {

    private ArrayList<Card> puzzleLevel;
    public static Context context;

    public PuzzleAdapter(Context ctx, ArrayList<Card> puzzleData) {
        context = ctx;
        puzzleLevel = puzzleData;
    }

    @Override
    public int getCount() {
        return this.puzzleLevel.size();
    }

    @Override
    public Card getItem(int position) {
        return puzzleLevel.get(position);
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageButton image;
        if (convertView == null) {
            image = new ImageButton(context);
            convertView = LayoutInflater.from(context).inflate(R.layout.grid__item, null);
        } else {
            image = (ImageButton) convertView;
        }

        image.setImageResource(Constantes.HIDECARD_RESOURCE);
        image.setLayoutParams(new GridView.LayoutParams(130, 130));
        image.setBackgroundColor(Color.TRANSPARENT);
        return image;
    }

} 
```

**更新**

我将布局更改为：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/image_button"
        android:layout_width="110dp"
        android:layout_height="110dp"
        android:layout_gravity="center"
        android:contentDescription="@string/app_name"
        android:scaleType="fitCenter"
        android:src="@drawable/card" />

</LinearLayout> 
```

一切正常。出于某种原因，当我将 ImageButton 放入“自定义适配器”时，“点击”不起作用。

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:12:47.867

问题在于布局中的 android:clickable="true" 。当您将 ImageButton 标记为可单击然后单击 GridView 项时，控制器会查找 ImageButton 而不是 GridView 项的单击处理程序。因此，您的 OnItemClick 方法永远不会被调用。当您更改布局时，您没有 clickable=true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:07:35.193

从不使用gridview，但我通常这样设置我的适配器：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageButton image;
    if (convertView == null) {
        LayoutInflater mInflater = (LayoutInflater) getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView  = mInflater.inflate(R.layout.grid__item, null);
    }

    image = (ImageButton)  convertView.findViewById(R.id.image);
    image.setImageResource(Constantes.HIDECARD_RESOURCE);
    image.setLayoutParams(new GridView.LayoutParams(130, 130));
    image.setBackgroundColor(Color.TRANSPARENT);
    return convertView;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T06:23:03.653

这适用于我的情况

```
 GridView sdcardImages = (GridView) findViewById(R.id.sdcard);
        sdcardImages.setAdapter(new ImageAdapter(myImages, myViews));
        sdcardImages.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v,
                    int position, long id) {
                Intent i = new Intent(EquipmentViews.this, VIRDemo.class);
                i.putExtra("EquipmentId", equipmentIds[position]);
                startActivity(i);

            }
        }); 
```

适配器类

```
/**
 * Adapter for our image files.
 */
private class ImageAdapter extends BaseAdapter {

    private int[] myRemoteImages;
    private String[] myRemoteViews;

    public ImageAdapter(int[] myimages, String[] myviews) {
        myRemoteImages = myimages;
        myRemoteViews = myviews;
    }

    public int getCount() {
        return this.myRemoteImages.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View v;
        if (convertView == null) {
            LayoutInflater li = getLayoutInflater();
            v = li.inflate(R.layout.imageitem, null);
            TextView tv = (TextView) v.findViewById(R.id.icon_text);
            tv.setText(myRemoteViews[position]);
            ImageView iv = (ImageView) v.findViewById(R.id.icon_image);
            iv.setImageResource(myRemoteImages[position]);

        } else {
            v = convertView;
        }
        return v;
    } 
```

# salesforce - visualforce 页面呈现一个按钮

> ID：11533328
> 
> 赞同：0
> 
> 时间：2012-07-18T02:01:22.503
> 
> 标签：salesforce, visualforce

这是我的输出字段代码。当字段为空时呈现按钮，当字段具有值时，清除按钮将显示并允许我清空字段并再次呈现按钮。但是一旦清除该字段，我就无法管理它以再次呈现按钮，有人可以建议修复吗？

```
<apex:pageBlockSectionItem >
  <apex:outputLabel value="Order:" for="callerorder"/>
  <apex:outputPanel id="callerorder">
    <apex:outputField value="{!newPhoneCallRecord.Order__c}" />
    <apex:commandButton value="x" rendered="{!!ISBLANK(newPhoneCallRecord.Order__c)}" rerender="phoneRecordSection">
      <apex:param name="orderRMV" value="" assignTo="{!newPhoneCallRecord.Order__c}"/> 
    </apex:commandButton>
  </apex:outputPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:13:23.003

李，

鉴于您希望这是动态的，您可能应该使用 javascript 启用/禁用该按钮。通过利用该`onChange`事件，您可以根据需要切换按钮的可见性。

也就是说，使用 an 分配一个空值`<apex:param>`似乎是一种有点左字段的情况。通过控制器清除此字段的更标准方法是在控制器上实现一个 clear 方法，如下所示：

```
public PageReference ClearOrder()
{
  newPhoneCallRecord.Order__c = "";
  return null;
} 
```

然后从命令按钮调用此方法：

```
<apex:outputPanel id="callerorder">
  <apex:outputField value="{!newPhoneCallRecord.Order__c}" />
  <apex:commandButton value="x" rendered="{!!ISBLANK(newPhoneCallRecord.Order__c)}" rerender="phoneRecordSection" action="{!ClearOrder}"/>
</apex:outputPanel> 
```

# android - 为对话框中的按钮设置 alpha

> ID：11533331
> 
> 赞同：-1
> 
> 时间：2012-07-18T02:01:54.797
> 
> 标签：android, alpha, android-alertdialog, android-button

我需要在 CustomAlertDialog 上设置 alpha `Button`。我试过这个：

```
AlertDialog userdialog = new AlertDialog.Builder(mActivity)
                    .create();
    userdialog.setButton(AlertDialog.BUTTON_POSITIVE, "Ok",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int whichButton) {
                     // Snippet: Do sth.
            return;
            }
        });

userdialog.getButton(AlertDialog.BUTTON_POSITIVE).getBackground().setAlpha(100); 
```

但我得到这个错误：

```
07-18 08:57:43.831: E/AndroidRuntime(4955): FATAL EXCEPTION: main
07-18 08:57:43.831: E/AndroidRuntime(4955): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ttet.tsquare.pure/com.ttet.tsquare.pure.Map}: java.lang.NullPointerException
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.os.Looper.loop(Looper.java:123)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at java.lang.reflect.Method.invokeNative(Native Method)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at java.lang.reflect.Method.invoke(Method.java:521)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at dalvik.system.NativeStart.main(Native Method)
07-18 08:57:43.831: E/AndroidRuntime(4955): Caused by: java.lang.NullPointerException
07-18 08:57:43.831: E/AndroidRuntime(4955):     at com.ttet.tsquare.pure.Dialog.show(Dialog.java:160)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at com.ttet.tsquare.pure.Map.onCreate(Map.java:63)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-18 08:57:43.831: E/AndroidRuntime(4955):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-18 08:57:43.831: E/AndroidRuntime(4955):

... 11 more 
```

怎么了？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:03:54.970

如果在对话框中找不到该方法或在调用之前未调用该方法，则该`getButton`方法将返回。为了避免调用并在调用**后**设置 alpha 。`null``Button``show()``NullPointerException``getButton`**`show()``AlertDialog`**

# actionscript-3 - 如何基于 Flash CS5 中的动态 url 在 swf 中创建指向图像的链接

> ID：11533337
> 
> 赞同：0
> 
> 时间：2012-07-18T02:02:45.483
> 
> 标签：actionscript-3, flash, flash-cs5

我的Flash知识很少。我一直在寻找如何在 SWF 文件上创建动态链接但没有成功。

我需要将具体参数/值传递给 SWF 文件内图像上的链接。我已经有了调用假定文件的代码，但我无法修改该代码，我只控制 SWF 文件。

```
<object>
  <param name="movie" value="http://mysite.com/?param1=value1&param2=value2"></param>
  <embed src="http://mysite.com/?param1=value1&param2=value2" type="application/x-shockwave-flash"></embed>
</object> 
```

我陷入了如何将具体参数/变量传递给 SWF 文件中的静态链接的问题，就像`http://differenturl.com/?param1=value1&param2=value2`传递的对象样本一样。

这是我当前在 AS3 中创建静态链接的代码

```
//1.Button event listener
button3.addEventListener(MouseEvent.CLICK, openurl);

//2.The openurl function which opens a URL.
function openurl(event:MouseEvent):void {
var url:URLRequest = new URLRequest("http://www.differenturl.com");
navigateToURL(url, "_blank");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T07:11:59.037

你的意思是你想这样做吗？

```
// Pull param1 and param2 from the HTML embed code.
var info:Object = root.loaderInfo.parameters;
var param1:String = info.param1;
var param2:String = info.param2;

// Your navigateToURL() will look like this:
var url:URLRequest = new URLRequest("http://www.differenturl.com/?param1=" + param1 + "&param2=" + param2);
navigateToURL(url, "_blank"); 
```

# c# - C# Using browse textbox for folderpath

> ID：11533338
> 
> 赞同：0
> 
> 时间：2012-07-18T02:02:52.883
> 
> 标签：c#

The program i am working on patches/updates the clients game...

The game it is made for is very old and it has 2 patches. For a person to play they need to install the patch. Once the patch is installed if they decide they want to play using the other patch they have to uninstall everything and start again.

The program i have made has two buttons. Version1 and Version2\. When they click Version1 button it searches C:\PROGRA~1\Game\ For files, deletes specified files and then copy's files from the folder that comes with my program installed in program files. to the game path.

I realized i am using the above path. But if they aren't using windows 32 bit this will not work. How do i determine the clients program files location if i am using inno setup?

EDIT: Soory guys edited question my head wasn't straight when i asked my previous question.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:11:24.797

我认为你所追求的只是 string.IsNullOrEmpty()。您测试一下文本框文本是否为空或空，如下所示：

```
if (string.IsNullOrEmpty(textBox.Text)) 
```

..然后您基于此构建您的路径。例如：

```
string BuildFilePath()
{
    return string.Concat(!string.IsNullOrEmpty(textBox.Text) ? textBox.Text : @"C:\Program Files\Game\Folder\etc", @"\Cool.inf");
}

string filePath = BuildFilePath();

if (file.Exists(filePath))
    // etc.. 
```

我希望这是有道理的。

编辑：将复杂的串联移动到自己的方法中，因为我有点像“清洁代码”的传教士。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:11:36.653

你能做这样的事情吗？

```
if (File.Exists(System.IO.Path.Combine(textBox1.Text,"Cool.inf")))
   File.Delete(System.IO.Path.Combine(textBox1.Text,"Cool.inf")); 
```

# c# - MonoDevelop GTK# 错误

> ID：11533340
> 
> 赞同：0
> 
> 时间：2012-07-18T02:03:17.727
> 
> 标签：c#, mono, gtk, monodevelop, gtk#

**注意：**这似乎是 MonoDevelop 中相当常见的错误。

我正在更新我编写的 C# Mono 应用程序。我在使用应用程序使用的一些对话框时遇到问题。

例如，在以下代码中：

```
public partial class Generic : Gtk.Dialog
{
    public Generic (string text, string title = "Error Notice", string label = "<b>Error Details</b>", int height = 150)
    {
        this.Build ();
        textview1.Buffer.Text = text;
        this.Title = "Application - " + title;
        label1.LabelProp = label;
        this.DefaultHeight = height;
        this.Resize(375, this.DefaultHeight);
    }

    protected void OnButtonOkClicked (object sender, System.EventArgs e)
    {
        this.Destroy();
    }
} 
```

我收到这些错误：

```
Error CS1061: Type `Namespace.Generic' does not contain a definition for `Build' and no extension method `Build' of type `Namespace.Generic' could be found (are you missing a using directive or an assembly reference?) (CS1061) (Namespace)
Error CS0103: The name `textview1' does not exist in the current context (CS0103) (Namespace) 
```

以及 label1 的另一个。问题是 textview1**确实**存在。那么为什么 MonoDevelop 告诉我它不是我不知道的。

我认为`this.Build`是继承自 Gtk.Dialog。正确的？

这些以前可以工作，但现在，即使从头开始重新制作对话框并重新输入旧代码以实现功能，它仍然无法工作。

我的旧编译仍然有效，所以虽然我不确定，但这似乎表明 GTK# 工作正常......

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T23:59:02.517

错误出现在自动生成的类中，出于某种原因，它们没有随着 GUI 的更改而更新。我注意到它们不包含对我的代码中引用的对象的任何引用。我删除了自动生成的类，并重新创建了对话框来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-29T21:11:53.747

我有什么似乎是同样的问题（我知道这个问题很老）。我遇到的错误是：“cs0103”。我只是通过**重建**解决方案来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-17T15:18:12.727

我得到了同样的错误，它发生在我重命名 Gtk.Window 类型类时。yourproj/gtk-gui 中的文件也被重命名，但文件中的类的定义没有。只需在里面重命名，并确保在文件中定义了 Build -> Monodevelop 有时在重命名时会丢弃一些代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-05T10:47:34.393

我有同样的问题。这是因为项目设置的破坏。要解决此问题，请尝试打开 .csproj 文件并添加到`<ItemGroup> <Compile Include="gtk-gui\yourUIGeneretedFimename.cs" />`

yourUIGeneretedFimename.cs 应该在放置 gui.stetic 文件的文件夹中。gui.stetic 是一个描述 ui 的带有 xml 的文件。

# javascript - 链接（通过 url）到 infovis（jit）树图中的特定节点

> ID：11533344
> 
> 赞同：1
> 
> 时间：2012-07-18T02:04:08.163
> 
> 标签：javascript, jit, toolkit, treemap, infovis

那里有任何 infovis 工具包用户吗？一定会感谢您的帮助。

我想知道是否有办法通过标准 href 或其他方法链接到特定节点。

具体来说，我想保留用户正在查看的当前节点，同时切换到不同的视图（链接到相同实体的不同数据集）。

我已将当前节点附加到 HTML 元素（同一页面上的 div，很简单），但在文档中找不到有关通过链接定位特定节点的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:15:35.243

我不完全确定你的意思，但对我来说，通过使用节点上的标签在节点上建立链接很容易。

例如，如果我想在单击一个节点时链接到特定页面，我会说

```
label.innerHTML = '<a href="somepage.html">Click Me </a>'; 
```

希望这可以帮助 ！！

- 编辑 -

抱歉，如果您在单击链接时特别想针对一个特定节点（即单击链接时将单击选定节点），我想我现在可能理解您了

您能否尝试在单击链接时运行一些 javascript，以便它会在图中找到请求的节点，然后调用

```
tm.enter(node); 
```

其中 tm 是您正在使用的树图

抱歉，如果这不能回答您的问题，我不完全确定您的问题是什么。

# ruby-on-rails - 在 rails 3.2.3 中将 stylesheet_engine 设置为 sass

> ID：11533346
> 
> 赞同：3
> 
> 时间：2012-07-18T02:04:21.317
> 
> 标签：ruby-on-rails, sass

我想使用 SASS 作为我的默认样式表引擎而不是 SCSS。在我的`Gemfile`我有

```
gem 'sass-rails',   '~> 3.2.3' 
```

我也有

```
config.generators.stylesheet_engine = :sass 
```

在我的`config/application.rb`. 但是，当我跑步时`rails g scaffold --help`，它说

```
-se, [--stylesheet-engine=STYLESHEET_ENGINE]  # Engine for Stylesheets
                                              # Default: scss 
```

所以它似乎仍然认为scss是默认的。

我必须做其他事情才能使用 SASS 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T03:52:14.047

据我了解，如果您使用扩展名`sass-rails`，将自动使用 sass 语法。`.sass`

**编辑：**要为生成器设置默认语法，您需要添加

```
config.sass.preferred_syntax = :sass 
```

至`config/application.rb`

参考：[如何让 Rails 3.1 默认使用 SASS (Over SCSS)？](https://stackoverflow.com/questions/6006360/how-to-make-rails-3-1-use-sass-over-scss-as-the-default)

# c# - c# 定义时填充hashtable

> ID：11533350
> 
> 赞同：1
> 
> 时间：2012-07-18T02:05:01.050
> 
> 标签：c#

首次定义哈希表时是否可以填充它？

例如，这里有一些类似的 PHP 代码：

```
var $AA = new array("one" => 1, "two" => 2); 
```

我想在 C# 中做这样的事情。事实上，很可能 Hashtable 不是最好的工具。

保重，李

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T02:07:36.690

查看集合初始化程序 - 是的，这是可能的。有关词典，请参见[此处](http://msdn.microsoft.com/en-us/library/bb531208.aspx)。您可以声明您的字典并用一组键/值对填充它。

比 MSDN 提供的更简单的示例：

```
var MyDictionary = new Dictionary<string,int>()
{
    {"one", 1},
    {"two", 2}
}; 
```

# linux - Linux/64 位 /LARGEADDRESSAWARE 等效

> ID：11533351
> 
> 赞同：0
> 
> 时间：2012-07-18T02:05:11.263
> 
> 标签：linux, gcc, 64-bit, porting, large-address-aware

`/LARGEADDRESSAWARE`Windows 允许您通过在 PE 标头 ( )中设置一个标志来将地址空间使用限制为 32 位分辨率。详细说明：设置时，此标志有效地模拟 32 位虚拟地址空间环境（图像在/分配返回地址 <= 0xFFFFFFFF 处加载）

Linux 是否具有同等功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:19:44.840

`/LARGEADDRESSAWARE`允许 2 到 4 GB 的扩展地址空间用于 32 位 Windows 应用程序。否则，Windows 上的 32 位应用程序无法访问这些地址。Linux 从早期就可以访问它们，因此`/LARGEADRSSAWARE`不需要链接标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:19:48.043

在 x86-64 上的 32 位空间中分配内存可以通过[`mmap(2)`](http://linux.die.net/man/2/mmap)使用`MAP_32BIT`标志来完成。

# c# - Microsoft Unity接口拦截和构造函数注入的区别

> ID：11533354
> 
> 赞同：2
> 
> 时间：2012-07-18T02:05:22.187
> 
> 标签：c#, unity-container, code-injection, unity-interception

~~asp.net~~ unity中的接口拦截和构造函数注入有什么区别？我对 Unity 的 DI 缺乏了解我正在处理一个旧项目和 unity.config，有些像这样，

```
<register type="ICRIC2012TrialUserService" mapTo="CRIC2012TrialUserService">
        <lifetime type="perthread"/>
        <interceptor type="InterfaceInterceptor"/>
        <policyInjection/>
</register> 
```

但有些没有

```
<interceptor type="InterfaceInterceptor"/> 
```

但是在项目中，这些类和接口以相同的方式工作，就像这样

```
private readonly IIncomingEstimateService _incomingEstimateService;

        public ContractService(IIncomingEstimateService incomingEstimateService)
        {
            _incomingEstimateService = incomingEstimateService;
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T06:16:26.013

拦截和注入是两个不同的东西。

拦截通常用于向类添加横切关注点（如日志记录），而不必一遍又一遍地实现它们。Unity 中的拦截通过生成代理来接收传入的方法调用，并通过所谓的拦截器管道引导它们，直到调用最终到达原始目标对象。

这两篇文章介绍了使用 Unity 进行拦截的工作原理。

[Unity 中的拦截器](http://msdn.microsoft.com/en-us/library/ff647107.aspx)

[在 Unity 中使用拦截](http://msdn.microsoft.com/en-us/magazine/gg535676.aspx)

构造函数注入是实现依赖注入模式的一种方式。它是一种告诉您如何构建应用程序以解耦组件的模式。

网上有很多文章。

[控制容器的反转和依赖注入模式](http://martinfowler.com/articles/injection.html)

[依赖注入模式——它是什么，我为什么要关心？](http://codebetter.com/jeremymiller/2005/10/06/the-dependency-injection-pattern-%E2%80%93-what-is-it-and-why-do-i-care/)

拦截和注入是完全不同的东西。但是一些依赖注入容器（比如 Unity）允许你同时做这两个。您可以将依赖项注入到类中，并使用容器基础设施拦截对这些类的调用。

# php - 无法让 php 显示目录和 fgets？

> ID：11533357
> 
> 赞同：0
> 
> 时间：2012-07-18T02:05:41.593
> 
> 标签：php, directory, filenames, fgets

我只是在尝试在一个目录中显示所有文件，然后用 fgets 在它们旁边显示一些信息。我似乎无法让它工作。我现在有点讨厌 php，但我基本上希望它显示一个 tr，每个 tr 有两个 td。一个带有文件名的 td，另一个带有“描述”的 td，这只是我放在文件第一部分的一些信息。

```
<table>
<?php
if ($handle = opendir('desktop/')) {
while (false !== ($file = readdir($handle))) {
    if ($file != "." && $file != "..") {

      $string = "$file";     

$searchArray = array("_", ".php");
$replaceArray = array("", "");
$string = str_replace($searchArray,$replaceArray,$string);
$handle = @fopen("desktop/$file", "r");
if ($handle) {
while (($buffer = fgets($handle, 4096)) !== false) {
    echo $buffer;
}
if (!feof($handle)) {
    echo "Error: unexpected fgets() fail\n";
}
fclose($handle);
}
echo "<tr><td><a href=desktop/$file>$string\n</a></td><td>$buffer</td></tr>"; 
    }
}
closedir($handle);
}
?>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:46:51.703

您重新定义了导致您的问题的“$handle”。

$handle 最初是保存“目录”资源的变量。然后，您重新使用它来保存文件资源。然后当您返回目录资源以获取下一个文件的名称时， $handle 不再是目录资源，而是一个文件 - 所以问题出现了。

调用第一个“$dirHandle”和第二个“$fileHandle”，因为这会让你更清楚？

* * *

编辑：如何只获取第一行（根据评论中的要求）：

```
if ($handle) { 
    if (($buffer = fgets($handle, 4096)) !== false) { 
        echo "<tr><td><a href=desktop/$file>$string\n</a></td><td>$buffer</td></tr>";  
    }
} 
```

（注意：您可能还想使用 htmlspecialchars() 使其更安全）

# javascript - Backbone.js 的 Backbone.Modelbinding 插件中是否有用于绑定的转换器参数？

> ID：11533360
> 
> 赞同：1
> 
> 时间：2012-07-18T02:06:41.593
> 
> 标签：javascript, backbone.js, knockout.js, model-binding

我最近接手了一个大型 Backbone.js 项目，该项目使用 Backbone.Modelbinding 插件来提供模型和视图之间的数据绑定，并直接引用 html 元素中的“data-bind”属性中的模型属性名称。

对于非表单项，数据绑定是单向的，从模型到视图，但对于表单项，用户可以更改表单输入，以便更新已绑定到该元素的模型属性，并且反之亦然——模型还可以更新表单输入的内容。

我需要某种视图助手，它将以与模型中绑定的数据不同的格式显示信息，而不会影响模型本身。

例如，如果模型中的一个属性的值是数字 679，我可能需要视图将其显示为 $679.00，而模型的版本仅保留数字 679。

在其他类似的库中，有一些简单的方法可以在任一方向上执行这些转换（Backbone.Modelbinder 中的“转换器参数”，Knockout.js 中的“计算的 observables”，我认为它们在 Silverlight 中称为转换器等）。不过，似乎没有办法使用 Backbone.Modelbinding 来做到这一点。有谁知道一种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:39:55.900

推荐你使用**backbone.modelbinder**（[https://github.com/theironcook/Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)）**+backbone-nested**（[http://afeld.github.com/backbone-nested/](http://afeld.github.com/backbone-nested/)）。可以轻松实现双向嵌套模型和视图之间的绑定。

有demo，希望对你有用： [http://files.cnblogs.com/justinw/Nested_Model_bi_Binding.zip](http://files.cnblogs.com/justinw/Nested_Model_bi_Binding.zip)

backbone.modelbinder 可以轻松解决您的问题，请参见此处： [https ://github.com/theironcook/Backbone.ModelBinder#formatting-and-converting-values](https://github.com/theironcook/Backbone.ModelBinder#formatting-and-converting-values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:34:01.847

这是在 Backbone.ModelBinding 被放弃之前实现一半的最后一个功能。如果可以，我建议切换到 Backbone.ModelBinder。

# django - 子域上的 Django

> ID：11533366
> 
> 赞同：0
> 
> 时间：2012-07-18T02:08:22.237
> 
> 标签：django, nginx, subdomain, django-urls, uwsgi

我试图让 django 在子域上工作。它可以很好地呈现主页（urls.py 文件中的 r^$），但我得到 404 错误的其余页面。而不是典型的 404 错误。这些页面非常简单......

它们看起来一样，但在黄色标题下方列出的唯一内容是：

```
{'path': u'people/'}. 
```

这就是我尝试访问 sub.example.com/people 时会得到的结果。

django 真的根本不处理子域，还是我的服务器配置有问题。我正在使用 nginx 和 uwsgi，但由于 django 404 页面正在加载，我觉得这是一个 django 问题。

这是我的 nginx 配置：

```
server {
  listen      80;
  server_name sub.example.com;

  # Error pages
  # error_page 500 502 503 504 /;

  location root {
        root   html;
        uwsgi_pass   127.0.0.1:49154;
        uwsgi_param UWSGI_SCRIPT django_wsgi;
        include        uwsgi_params;
    }

  location / {
        uwsgi_pass   127.0.0.1:49154;
        include        uwsgi_params;
        uwsgi_param SCRIPT_NAME /;
        uwsgi_param UWSGI_SCRIPT mysite.wsgi:application;
        uwsgi_modifier1 30;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:08:31.800

问题是 nginx 将这些参数发送到 uwsgi。如果您关注 Django uwsig 页面，您会看到他们已经让您使用 uwsgi 参数创建了一个 .ini 文件。所以 django 用户应该在 nginx 文件中省略 UWSGI 参数部分

# image - htaccess 从其他站点重写图像 url

> ID：11533367
> 
> 赞同：0
> 
> 时间：2012-07-18T02:08:29.550
> 
> 标签：image, .htaccess, rewrite, cloaking

我想从其他网站重写图片网址，例如：

来自其他网站的图片：

```
http://othersite.com/images/dir/image1.jpg 
```

我想将该链接隐藏到：

```
http://mysite.com/images/dir/image1.jpg 
```

现在我使用这个 htaccess

```
RewriteRule ^images/dir/(.*)$ http://othersite.com/images/dir/$1 [L,R=301] 
```

它正在工作，**但是**当链接打开时它会变成原始链接，我希望访问者仍然会看到链接不会更改为原始链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:07:41.803

尝试删除 R=301 以便它仍然转发请求但不重写 url。如果其他网站不是你自己的，你真的应该请求允许使用他们的图片。除了版权问题，盗链在技术上是在窃取带宽，如果站长知道他在做什么，不难发现并关闭......

# r - 在 R 中查找向量块长度分布

> ID：11533371
> 
> 赞同：0
> 
> 时间：2012-07-18T02:08:44.220
> 
> 标签：r, apply, lapply

我有以下向量。这是一个很大的向量，但为了说明的目的，我会保持简短。

```
x = c(1,1,1,1,0,0,0,0,1,1,0,0,0,1,1) 
```

请注意，1 在向量中以块的形式出现。在这种情况下，有四个 1 的块，两个 1 的块。如何以简单有效的方式找到此分布？预期输出为

```
chunk.length freq
4 1
2 2 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:23:21.290

```
> ans<-rle(x)
> table(ans)
       values
lengths 0 1
      2 0 2
      3 1 0
      4 1 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:23:27.710

利用`rle`

```
rle_results <- rle(x)
table(rle_results$length)

## 2 3 4 
## 2 1 2 
```

或者只用 x == 1 得到那些

```
table(rle_results$length[rle_results$values == 1])

## 2 4 
## 2 1 
```

您可以将其包装在一个函数中以获取 data.frame

```
rle_function <- function(x, what = NULL){
  rle_results <- rle(x)
  if(is.null(what)){
    what <- unique(x)
  }
  .table <- table(rle_results$length[rle_results$values %in% what])
  data.frame(chunk.length = rownames(.table), freq = as.numeric(.table)) 
}

rle_function(x)
##   chunk.length freq
## 1            2    2
## 2            3    1
## 3            4    2
rle_function(x, what = 1)
##   chunk.length freq
## 1            2    2
## 2            4    1
rle_function(x, what = 0)
##   chunk.length freq
## 1            3    1
## 2            4    1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T02:23:31.003

你正在寻找`rle`.

```
rle(x)
#Run Length Encoding
#  lengths: int [1:5] 4 4 2 3 2
#  values : num [1:5] 1 0 1 0 1

table(rle(x)$length[rle(x)$values == 1])

#2 4 
#2 1 
```

# sql - 如何使用 SqlCommand 将数据保存到 sql 数据库

> ID：11533373
> 
> 赞同：0
> 
> 时间：2012-07-18T02:09:19.030
> 
> 标签：sql, vb.net, sqlcommand

我是 Visual Studio 和 SQL Server 的新手。我对如何从 Visual Studio 应用程序插入数据感到困惑

这是我的代码：

尝试

```
'===============Add New Patient===================
        patient_name = txtName.Text
        patient_age = nudAge.Value
        date_of_confinement = dtpDate.Value
        type_of_sickness = txtSickness.Text
        type_of_IVfluid = txtFluid.Text
        number_of_bottles = txtBottle.Text
        drop_rate = nudDrop.Value

        'To check if all values have been filled up
        If txtName.Text = "" Or nudAge.Value = "" Or dtpDate.Value = "" _
        Or txtSickness.Text = "" Or txtFluid.Text = "" Or txtBottle.Text = "" Or nudDrop.Value = "" _
        Then

            MsgBox("Please Complete All the Required Fields")

        Else
            Try

                Dim PatientInfoConnection As SqlConnection = New _
                SqlConnection("Server=CATH-PC; database=PatientInfoDB;user id=sa;password=*******") 'connection to SQL database

                PatientInfoConnection.Open() 'open database connection

                Dim sql As String = ""

                sql = "insert into model (name, age, date_of_confinement,type_of_sickness, type_of_IVfluid, number_of_bottles, drop_rate)" & _
                       " values (@txtName.Text, @nudAge.Value, @dtpDate.Value, @txtSickness.Text, @txtFluid.Text, @txtBottle.Text, @nudDrop.Value)"

                Dim insert As New SqlCommand(sql, PatientInfoConnection)

                insert.Parameters.AddWithValue(patient_name, @txtName.Text)'@ error  
                insert.Parameters.AddWithValue("val2", nudAge.Value) 'error
                insert.Parameters.AddWithValue(Name, patient_name) 'not sure

                insert.ExecuteNonQuery()

                MsgBox("Successfully Saved")
                Me.Visible = False
                Mainform.Show()

            Catch myerror As MySqlException
                MessageBox.Show("Error Connecting to Database: " & myerror.Message & ". Please contact the operator")

            End Try

        End If

    Catch ex As Exception

    End Try 
```

我不确定，`SqlCommand`因为我不知道如何将用户的输入保存到我的数据库中。我想将文本框中输入的值添加到我的数据库中

```
Dim insert As New SqlCommand(sql, PatientInfoConnection)

insert.Parameters.AddWithValue(patient_name, @txtName.Text) 'error @ char is not valid

insert.Parameters.AddWithValue("val2", nudAge.Value) 'error

insert.Parameters.AddWithValue(Name, patient_name) 'not error but not sure 
```

`name(text,null)`是我在 SQL Server Management Studio 中设计的数据库的列之一

请帮我。任何帮助，将不胜感激。谢谢！

我得到了改变`insert.Parameters.AddWithValue("@name", txtName.Text)`，sql =“按照建议插入模型部分，但出现错误

> “Microsoft.VisualBasic.dll 中发生了‘System.InvalidCastException’类型的第一次机会异常”

我很困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:14:03.103

你很亲密。

只尝试一个变量名，然后匹配它们。

所以 SQL 将是：

```
sql = "insert into model (name, age, date_of_confinement,type_of_sickness, type_of_IVfluid, number_of_bottles, drop_rate)" & _
                   " values (@name, @age, @dateOfConfinement, @sicknessType, @fluidType, @bottleAmount, @dropRate)" 
```

然后设置参数，如：

```
insert.Parameters.AddWithValue("@name", txtName.Text) 
```

# c# - 检测 DropCreateDatabaseIfModelChanges 是否运行？

> ID：11533376
> 
> 赞同：1
> 
> 时间：2012-07-18T02:10:04.103
> 
> 标签：c#, ef-code-first, entity-framework-5

我正在使用使用 EF5 的 CodeFirst 方法。

如果我的模型发生更改，我正在考虑运行 DropCreateDatabaseIfModelChanges 来修复数据库，但是当它运行时需要重新填充数据。

我认为我可以进行实体计数以查看它是否已运行，但我很好奇是否有更优雅的方法来执行此操作？（我可以让我的代码查找的某种返回值或事件）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:36:45.693

您需要派生`DropCreateDatabaseIfModelChanges`并覆盖[Seed](http://msdn.microsoft.com/en-us/library/gg679410%28v=vs.103%29.aspx)方法，以便在重新创建数据库时将数据添加到用于播种的上下文中：

```
public class MyDbInitializer : DropCreateDatabaseIfModelChanges<MyDbContext>
{

    protected override void Seed(MyDbContext context)
    {
        context.AddSomeInitialData();
        context.SaveChanges();        
    }

} 
```

并在您的应用程序启动时将其设置为数据库初始化程序：

```
Database.SetInitializer(new MyDbInitializer()); 
```

# tsql - 没有全文索引的 SQL 搜索

> ID：11533378
> 
> 赞同：0
> 
> 时间：2012-07-18T02:10:08.877
> 
> 标签：tsql, full-text-search, azure-sql-database

我们正在将应用程序的数据库迁移到 Windows Azure SQL 数据库。在应用程序中，有几个轻量级搜索功能，我们目前使用 T-SQL 和全文索引来处理搜索。但是，全文索引目前在 Azure 中不可用。

我正在研究诸如 Lucene.Net 之类的非 SQL 解决方案，它看起来很棒，但我认为这对于我们正在尝试做的事情来说可能有点矫枉过正。我们正在搜索的数据集并不庞大——平均不到 100,000 条记录——而且只有少数几个。一个示例表可能看起来像这样......

```
CREATE TABLE dbo.Items(
    [ItemID] [int] IDENTITY(1,1) NOT NULL,
    [Author] [varchar](255) NULL,
    [Subject] [varchar](255) NULL,
    [ItemContent] [nvarchar](max) NULL, 
CONSTRAINT [PK_Items] PRIMARY KEY CLUSTERED ([ItemID] ASC)
) 
```

...我们要在其中搜索 Author、Subject 和 ItemContent 字段。Author 和 Subject 可以是多个单词，ItemContent 字段可以是几个段落，所以我看不出如何避免 Table Scan。全文索引表现得非常好，我并不期待这样做：

SELECT ItemID FROM dbo.Items WHERE Author LIKE '%' + @SearchTerm + '%' OR Subject LIKE '%' + @SearchTerm + '%' OR ItemContent LIKE '%' + @SearchTerm + '%'

有人对不使用全文索引优化此类搜索的方法有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:21:38.397

另一种方法是创建（如果不是完整的数据仓库解决方案），也许是一些非规范化的表，将这些列组合成一条记录（或更少的记录）......所以你会有一个只有 ItemId|CombinedSearchableInfo 的数据库表，你的CombinedSearchableInfo 可能是“Herman Melville Moby Dick”，在这种情况下，您所做的计算工作更少（并且您可以使用不同的查询优化技术来处理类似的事情）。您只需要使用离线过程维护您的搜索表......

请记住，尽管 Lucene 可以提供拼写错误和相关性等方面的帮助，并且对于书籍和作者等领域空间，拼写错误是好的并且可能......

（此外，如果你走的是天蓝色的路线，你现在可以使用表存储和 blob 存储来做很多事情......你实际上可以运行你的带有全文索引的 sql 服务器作为你的 blob 存储的一部分，而不必改造任何东西......你会失去 azure sql 的所有性能优势，但是嘿......这是一个选项）

# python - python os.popen 是否足够强大以处理许多请求？

> ID：11533379
> 
> 赞同：0
> 
> 时间：2012-07-18T02:10:20.547
> 
> 标签：python

我目前正在从服务器端使用以下功能来执行客户端命令。我发现当客户端同时发出许多命令并且命令执行时间较长时，此函数返回代码=9。有什么模块可以解决这类问题吗？谢谢，

```
def execute_cmd(cmd):

    output_pipe = os.popen(cmd)

    print cmd
    try:
        output = output_pipe.read()
        print output
    finally:
        code = output_pipe.close()

    if code is None:
        code = 0

    return (code, output) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:12:00.060

该`subprocess`模块是在 Python 中运行子进程的最新和最佳方式。你可能会获得更好的成功。

# javascript - JavaScript：我可以获得完整的 url，包括域、文件名和协议吗？

> ID：11533380
> 
> 赞同：0
> 
> 时间：2012-07-18T02:10:22.510
> 
> 标签：javascript

我确信这应该是可能的，但是当我查看谷歌时，它告诉我的只是如何获取文件名和内容，我不想要这个。

我正在寻找这个，因为我使用 Weebly 作为我的虚拟主机，它只允许 .html 文件 - 当您单击“主页”时，您将被带到 /index.html，而当您打开该站点时，没有 /index.html .

如果我可以添加（当然使用 if 语句）JS，如果网站的 url == [http://kingdomofmuqtasid.weebly.com/index.html](http://kingdomofmuqtasid.weebly.com/index.html)并将正文指向：[http:// Kingdomofmuqtasid.weebly.com](http://kingdomofmuqtasid.weebly.com)。

PS：代码可以放在body*里面吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:14:10.777

```
window.location.href 
```

是当前页面的完整 URL。有关更多信息，请参阅[MDN 文档页面`window.location`](https://developer.mozilla.org/en/DOM/window.location)。

您可以将此代码放在页面的`<head>`部分或`<body>`部分中以进行重定向。

```
<script>
if (window.location.href == "http://kingdomofmuqtasid.weebly.com/index.html") {
    window.location = "http://kingdomofmuqtasid.weebly.com/";
}
</script> 
```

PS 当查看器转到“http://kingdomofmuqtasid.weebly.com/index.html”时，此代码将进入任何提供的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:15:33.407

您可以使用 window.location 来获取这些数据。使用上面的代码，您可以遍历 window.location 并获取您需要的数据。

```
var location = window.location;

for ( var i in location ) {
    console.log( i + " " + location[i] );
} 
```

# google-analytics - 当 Youtube 品牌频道链接回品牌网站时，必须对链接进行标记吗？

> ID：11533384
> 
> 赞同：0
> 
> 时间：2012-07-18T02:10:41.400
> 
> 标签：google-analytics

通常，当从外部网站向链接发送流量时，我们会将 Google Analytics 参数添加到查询字符串中——“utm_campaign”等等。但是，当它是来自同样归我们所有的另一个域的“内部”链接时，并且在同一个 Google Analytics 配置文件中，我们使用“跨域链接”方法来维护跨域的会话 cookie。

因此，当链接到我们自己网站上的页面时，我有点不清楚应该在 YouTube 品牌频道上使用哪种方法（如果有的话）。YouTube 品牌频道上有 GA（使用相同的配置文件）这一事实似乎表明我们应该使用“跨域链接”方法，但我认为这甚至是不可能的，因为 YouTube 显然赢了不要让我们在选择时在页面上进行 Javascript 调用...

那么，有什么合适的方法可以确保我们衡量从 YouTube 品牌频道到我们网站的哪些链接被点击、导致转化等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:21:19.297

在自定义跟踪代码和带有链接的跟踪代码方面，我不太熟悉 YouTube 品牌频道所允许的内容。但是，如果您被允许使用 SetAllowLinker（连同 setDomain，如果您愿意，可以将其设置为 none）并将链接器添加到应该将 cookie 数据传递到您的常规配置文件的特定链接。这意味着当他们离开 YouTube 频道时，它不会显示为两次特定访问。

这是我发现的一个很好的指南，可以帮助您进行设置。它还包括一种自动将链接器添加到链接的快速方法，而不必手动将它们添加到特定链接： [http ://www.seomoz.org/ugc/google-analytics-cross-domain-tracking-made-easy -14596](http://www.seomoz.org/ugc/google-analytics-cross-domain-tracking-made-easy-14596)

# database - 用 Entity Framework 4.0 代码替换 T-SQL 触发器？

> ID：11533390
> 
> 赞同：0
> 
> 时间：2012-07-18T02:11:22.527
> 
> 标签：database, entity-framework-4, cascading-deletes

实体框架 4.0 项目。

我目前正在使用 INSTEAD OF DELETE 触发器进行级联删除。

有没有办法在我的数据模型代码中做到这一点？

我想过通过部分类添加我的数据上下文类。然后使用 ObjectStateManager.ObjectStateManagerChanged 监视删除，然后先删除子项。问题是我无法连接到构造函数以确保我的事件被连接起来。我想我可以创建一个创建上下文的工厂方法，然后连接事件......

然后在我的委托中，这也有点不稳定，因为我必须使用最少的反射来确定要删除的元素的类型，然后删除它的子元素。

我觉得我一定遗漏了一些东西：就像每个实体类都应该有一个可覆盖的 OnDelete() 方法，然后我可以删除所有子类。

如果较新版本的 EF 解决了这个问题，请随意提及，但这不能作为答案，因为该项目锁定在 v4.1 上。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:43:08.190

有一个部分方法`OnContextCreated`可用于连接到`SavingChanges`事件。较新的版本也确实内置了对这种类型的支持。但是，您可以覆盖`SaveChanges`.`DbContext`

```
public partial class MyContext
{
    partial void OnContextCreated()
    {
        SavingChanges += OnSavingChanges;
    }

    private void OnSavingChanges(object sender, EventArgs eventArgs)
    {
        var myEntities = ObjectStateManager.GetObjectStateEntries(EntityState.Deleted)
            .Where(e => e.Entity is MyEntity)
            .Select(e => e.Entity).Cast<MyEntity>();
    }
} 
```

# google-fusion-tables - 通过 Ajax 从 Google Fusion Table 获得的部分结果不正确，但通过图表工具正确？

> ID：11533395
> 
> 赞同：0
> 
> 时间：2012-07-18T02:12:02.113
> 
> 标签：google-fusion-tables

学习 Google FusionTables，所以可能会犯一个非常初学者的错误。通过 ChartTools API 但不是通过 Ajax API 查询 Google Fusion Tables 时，我得到了正确的结果。奇怪的是，它为部分查询提供了正确的结果，而不是全部。我犯错了吗？

**图表工具 API 工作：** 通过图表工具 API 查询 Google FusionTable 似乎工作正常，尽管有 500 行的限制。例如，这个查询： `SELECT ETHUN, COUNT() FROM 1Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI GROUP BY ETHUN`

使用 Google Chart Tools API，URL 是[http://www.google.com/fusiontables/gvizdata?tq=SELECT%20ETHUN%2C%20COUNT()%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20ETHUN&tqx= reqId%3A0](http://www.google.com/fusiontables/gvizdata?tq=SELECT%20ETHUN,%20COUNT%28%29%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20ETHUN&tqx=reqId:0)，它返回一个 JSON 函数：

```
google.visualization.Query.setResponse({
    version:'0.5',
    reqId:'0',status:'ok',
    table:{
        p:{totalrows:3},
        cols:[
            {id:'col6',label:'ETHUN',type:'number'},           
            {id:'#agg#COUNT',label:'count()',type:'number'}
        ],
        rows:[
            {c:[{v:1.0},{v:3308.0}]}
            {c:[{v:2.0},{v:18702.0}]},
            {c:[{v:-9.0},{v:10768.0}]},
        ]
     }
 }) 
```

特别要注意值 {1,2,-9} 作为 ETHUN 的值。

**新的 FusionTables API 不起作用：** 另一方面，通过 Ajax API 进行相同的查询返回正确的频率，但频率描述的值本身返回 NaN： [https ://www.googleapis.com/fusiontables/v1/query?sql =SELECT%20ETHUN%2C%20COUNT()%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20ETHUN&key=AIzaSyBT_ZCriV-Tm78KsJiQp6KKhjDwMhP0tYM](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20ETHUN,%20COUNT%28%29%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20ETHUN&key=AIzaSyBT_ZCriV-Tm78KsJiQp6KKhjDwMhP0tYM)

返回此 JSON：

```
{
 "kind": "fusiontables#sqlresponse",
 "columns": [ "ETHUN",  "count()"  ],
 "rows": [
  [  NaN,  "3308" ]
  [  NaN, "18702" ],
  [  NaN, "10768" ],
 ]
} 
```

为什么它会给我 NaN 而不是 {1, 2, -9} ？

**更新：** 我现在相信这个问题是新的 Fusion Tables SQL 独有的，问题略有编辑。

（这里是[示例 Fusion Table](https://www.google.com/fusiontables/DataSource?docid=1Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI)的链接）

**Fusion Tables SQL API（现已弃用）也可以使用**

奇怪的是这个链接也可以正常工作，[https://www.google.com/fusiontables/api/query? sql=SELECT%20ETHUN,%20COUNT%28%29%20FROM%204579147%20GROUP%20BY%20ETHUN&alt=json-in- script&jsonCallback=onResponse](https://www.google.com/fusiontables/api/query?sql=SELECT%20ETHUN,%20COUNT%28%29%20FROM%204579147%20GROUP%20BY%20ETHUN&alt=json-in-script&jsonCallback=onResponse)并以另一种格式返回以下 JSONP 响应：

```
onResponse({"table":{"cols":["ETHUN","count()"],"rows":[["2",18702],["-9",10768],["1",3308]]}}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:45:38.917

这似乎是 Google Fusion Tables API v1.0 的一个错误。此错误特定于数字字段。Ajax 能够很好地正确查询字符串字段。只是这个数据集主要有数字字段。

*   NaN: [SELECT SEX, COUNT() FROM .. GROUP BY SEX](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20DIAG1,%20COUNT%28%29%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20DIAG1&key=AIzaSyBT_ZCriV-Tm78KsJiQp6KKhjDwMhP0tYM) （整数字段）
*   NaN: [SELECT AGE, COUNT() FROM .. GROUP BY AGE](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20AGE,%20COUNT%28%29%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20AGE&key=AIzaSyBT_ZCriV-Tm78KsJiQp6KKhjDwMhP0tYM) （整数字段）
*   好的： [SELECT RFV1, COUNT() FROM .. GROUP BY RFV1](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20RFV1,%20COUNT%28%29%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20RFV1&key=AIzaSyBT_ZCriV-Tm78KsJiQp6KKhjDwMhP0tYM) （字符串字段）
*   好的： [SELECT DIAG1, COUNT() FROM .. GROUP BY DIAG1](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20PATWT,%20COUNT%28%29%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20PATWT&key=AIzaSyBT_ZCriV-Tm78KsJiQp6KKhjDwMhP0tYM)（字符串字段）

# php - PHP从右到左回显字符串的一部分

> ID：11533400
> 
> 赞同：2
> 
> 时间：2012-07-18T02:12:29.323
> 
> 标签：php, string, substr, strpos

我试图从这个字符串的末尾获取 ID，即 - 之后的 4305。下面的代码从左到右工作并显示 150。我怎样才能让它从右到左工作以在 - 之后显示 4305？

```
 $mystring = "150-Adelaide-Street-Brisbane-Cbd-4305";
  $mystring = substr($mystring, 0, strpos($mystring, "-"));
  echo $mystring; 
```

更新：这可以满足我的需要，但我确信有更好的方法来编写它：

```
 $mystring = "150-Adelaide-Street-Brisbane-Cbd-4305";
  $mystring = substr(strrev($mystring), 0, strpos(strrev($mystring), "-"));
  echo strrev($mystring); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T02:17:09.770

您可以使用`strrpos`获取字符串中的最后一个连字符，然后在此字符之后获取字符串的其余部分。

```
$mystring = "150-Adelaide-Street-Brisbane-Cbd-4305";
$mystring = substr($mystring, strrpos($mystring, "-") + 1);
echo $mystring; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T02:17:22.460

将其拆分`-`为一个数组，并弹出最后一个元素：

```
$mystring = "150-Adelaide-Street-Brisbane-Cbd-4305";
$parts = explode("-", $mystring);
echo array_pop($parts); 
```

或者，如果您需要保持数组完整，请使用`end()`前进到最后一个元素并返回它：

```
echo end($parts)); 
```

这比 using 效率低`strrpos()`，但在这不是问题的情况下，我倾向于使用这种方法，因为它不需要我过多考虑字符串索引，如果你需要的不是第一个或最后一个分隔位置，拉数组索引比进行从内部部分拉出所需的字符串操作要容易一些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T02:19:54.480

如果你喜欢我的一位同事，他喜欢使用正则表达式来处理一切......那么

```
 $mystring = "150-Adelaide-Street-Brisbane-Cbd-4305";
  preg_match('~-(\d+)$~', $mystring, $matches);
  echo $matches[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T02:19:35.840

最简单的方法肯定是使用[explode](http://php.net/manual/en/function.explode.php)。

> 通过使用explode，您可以将字符串拆分为一个数组，其中每个部分都可以使用索引作为单独的标识符进行访问。

**使用示例：**

```
 $mystring = "150-Adelaide-Street-Brisbane-Cbd-4305";
  $mystring = explode("-", $mystring);
  echo $mystring[count($mystring)-1]; //Extract the last item 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T23:48:38.790

正如 Matthew 在上面的评论中发布的那样，反向扫描更快，因为匹配仅在 4 个步骤后完成 - 猜测没有“更合适的方法”将需求转换为 PHP 语法（这也是他们在我学习 C 时教我的方式句法）：

```
echo substr($mystring, strrpos($mystring, "-") + 1); 
```

[PHP 手册](http://php.net/manual/en/function.strrpos.php)。

# eclipse - 在 Eclipse 中强制执行外部差异？

> ID：11533401
> 
> 赞同：4
> 
> 时间：2012-07-18T02:12:31.973
> 
> 标签：eclipse, perforce, p4merge, p4eclipse

我正在使用[P4Eclipse](http://www.perforce.com/product/components/eclipse_plugin)插件与 Perforce 无缝集成。我觉得用这个插件做大部分 P4 事情都很舒服，除了文件差异。

通过`Team - Diff File(s) against Depot`在右键单击上下文菜单中，将打开一个内部“仓库差异”视图以提供一个简单的差异功能 - 不过，我对这个菜单选项不满意。我更喜欢 P4Merge 外部 diff 工具，它是 Perforce Visual Client (P4V) 的默认 diff 工具。

在 Eclipse 的 Preferences 中，我找到了一个位置来填写 P4Merge 的路径。是`Team - Perforce - External Tools`。但我认为此设置仅用于文件解析。

有没有办法在 Eclipse 中直接调用 P4Merge 进行文件比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T14:05:37.367

您可以设置一个外部工具来运行 P4Merge（我认为）。

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm)

# python - python多处理池重试

> ID：11533405
> 
> 赞同：11
> 
> 时间：2012-07-18T02:13:39.837
> 
> 标签：python, multiprocessing

如果原始计算失败，有没有办法使用简单的池重新发送一条数据进行处理？

```
import random
from multiprocessing import Pool

def f(x):
   if random.getrandbits(1):
       raise ValueError("Retry this computation")
   return x*x

p = Pool(5)
# If one of these f(x) calls fails, retry it with another (or same) process
p.map(f, [1,2,3]) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-24T05:54:04.363

如果您可以（或不介意）立即重试，请使用包装函数的装饰器：

```
import random
from multiprocessing import Pool
from functools import wraps

def retry(f):
    @wraps(f)
    def wrapped(*args, **kwargs):
        while True:
            try:
                return f(*args, **kwargs)
            except ValueError:
                pass
    return wrapped

@retry
def f(x):
    if random.getrandbits(1):
        raise ValueError("Retry this computation")
    return x*x

p = Pool(5)
# If one of these f(x) calls fails, retry it with another (or same) process
p.map(f, [1,2,3]) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-24T03:26:49.443

您可以使用 a`Queue`将失败反馈到`Pool`initiating 中的循环中`Process`：

```
import multiprocessing as mp
import random

def f(x):
    if random.getrandbits(1):
        # on failure / exception catch
        f.q.put(x)
        return None
    return x*x

def f_init(q):
    f.q = q

def main(pending):
    total_items = len(pending)
    successful = []
    failure_tracker = []

    q = mp.Queue()
    p = mp.Pool(None, f_init, [q])
    results = p.imap(f, pending)
    retry_results = []
    while len(successful) < total_items:
        successful.extend([r for r in results if not r is None])
        successful.extend([r for r in retry_results if not r is None])
        failed_items = []
        while not q.empty():
            failed_items.append(q.get())
        if failed_items:
            failure_tracker.append(failed_items)
            retry_results = p.imap(f, failed_items);
    p.close()
    p.join()

    print "Results: %s" % successful
    print "Failures: %s" % failure_tracker

if __name__ == '__main__':
    main(range(1, 10)) 
```

输出是这样的：

```
Results: [1, 4, 36, 49, 25, 81, 16, 64, 9]
Failures: [[3, 4, 5, 8, 9], [3, 8, 4], [8, 3], []] 
```

`Pool`不能在多个进程之间共享。因此，这种`Queue`基于方法。如果您尝试将池作为参数传递给池进程，您将收到以下错误：

```
NotImplementedError: pool objects cannot be passed between processes or pickled 
```

您也可以在您的函数中尝试立即重试几次`f`，以避免同步开销。这实际上是您的函数应该等待多长时间重试，以及如果立即重试成功的可能性有多大。

* * *

***旧答案：*** *为了完整起见，这是我的旧答案，它不如直接重新提交到池中那样最佳，但根据用例可能仍然相关，因为它提供了一种自然的方式来处理/限制`n`级重试：*

您可以使用 a`Queue`聚合失败并在每次运行结束时重新提交，在多次运行中：

```
import multiprocessing as mp
import random

def f(x):
    if random.getrandbits(1):
        # on failure / exception catch
        f.q.put(x)
        return None
    return x*x

def f_init(q):
    f.q = q

def main(pending):
    run_number = 1
    while pending:
        jobs = pending
        pending = []

        q = mp.Queue()
        p = mp.Pool(None, f_init, [q])
        results = p.imap(f, jobs)
        p.close()

        p.join()
        failed_items = []
        while not q.empty():
            failed_items.append(q.get())
        successful = [r for r in results if not r is None]
        print "(%d) Succeeded: %s" % (run_number, successful)
        print "(%d) Failed:    %s" % (run_number, failed_items)
        print
        pending = failed_items
        run_number += 1

if __name__ == '__main__':
    main(range(1, 10)) 
```

输出如下：

```
(1) Succeeded: [9, 16, 36, 81]
(1) Failed:    [2, 1, 5, 7, 8]

(2) Succeeded: [64]
(2) Failed:    [2, 1, 5, 7]

(3) Succeeded: [1, 25]
(3) Failed:    [2, 7]

(4) Succeeded: [49]
(4) Failed:    [2]

(5) Succeeded: [4]
(5) Failed:    [] 
```

# java - 两个具有某些功能但版本号不同的 jar

> ID：11533407
> 
> 赞同：0
> 
> 时间：2012-07-18T02:14:02.557
> 
> 标签：java, jar

我的应用程序有两个具有某些功能但版本号不同的 jar。

```
-rwxr-xr-x 1 nobody nobody  87776 Jul 16 23:40 commons-io-1.3.2.jar
-rwxr-xr-x 1 nobody nobody 109043 Jul 16 23:35 commons-io-1.4.jar 
```

一个 jar 1.4.jar 有方法 deleteQuietly()，但较低版本的 1.3.1 jar 没有。

我的疑惑是调用方法时是否报错？

找不到符号符号：方法 deleteQuietly(java.io.File)

当我遇到这种情况时遇到此错误：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:34:06.647

目前还不完全清楚你在问什么，但最好的建议就是不要那样做。在编译/构建时仅使用一个版本的 JAR，在运行时（仅）使用相同的版本。

如果您有两个版本的 JAR，其 API 不是 100% 兼容（双向），那么行为将取决于哪个 JAR 文件首先出现在类路径中。如果没有该方法的版本首先出现，您将获得构建错误（如错误消息中的错误）或运行时错误。

* * *

我有点困惑，你认为它可能会起作用。也许您认为 Java 将加载该类的两个版本并使用某种魔法从不同版本中选择方法。它不是那样工作的。Java 将加载它遇到的类的第一个版本：任何其他版本都将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:39:10.590

这是类加载器问题。从类路径中删除 commons-io-1.3.2.jar 并重新部署。如果您不想删除此 jar，请使用 maven 以避免类加载问题。

# c - 标头包含问题

> ID：11533413
> 
> 赞同：0
> 
> 时间：2012-07-18T02:14:53.243
> 
> 标签：c, gcc, makefile, tor

在稍微修改一下 Tor 后，我在编译 Tor 时遇到了问题。

在名为 的文件`control.c`中，我添加了引用名为`rend_service_t`（位于 中`rendservice.h`）的结构的代码。我包括`rendservice.h`在顶部`control.c`，因为它以前不包括它。

如果我尝试使用包含的 Makefile，我会收到此错误：

```
control.c:2841: error: 'rend_service_t' undeclared (first use in this function) 
```

我猜它`rendservice.c`没有被包含或没有首先编译，所以我检查了目录并且没有用于rendservice的目标文件。我对此有点困惑，因为它显然被包括在内。是什么导致这种情况发生？

我也尝试编辑`Makefile.am/.in`so that `rendservice.c/h`come before `control.c/h`，但没​​有任何区别。

在`control.c`：

```
...
#include "rendservice.h"
...
static int
handle_control_addservice(control_connection_t *conn, uint32_t len,
                             const char *body)
{
  smartlist_t *args;
  rend_service_t *service;
... 
```

在`rendservice.c`：

```
...
/** Represents a single hidden service running at this OP. */
typedef struct rend_service_t {
  /* Fields specified in config file */
  char *directory; /**< where in the filesystem it stores it */
  smartlist_t *ports; /**< List of rend_service_port_config_t */
  rend_auth_type_t auth_type; /**< Client authorization type or 0 if no client
                               * authorization is performed. */
  smartlist_t *clients; /**< List of rend_authorized_client_t's of
                         * clients that may access our service. Can be NULL
                         * if no client authorization is performed. */
  /* Other fields */
  crypto_pk_env_t *private_key; /**< Permanent hidden-service key. */
  char service_id[REND_SERVICE_ID_LEN_BASE32+1]; /**< Onion address without
                                                  * '.onion' */
  char pk_digest[DIGEST_LEN]; /**< Hash of permanent hidden-service key. */
  smartlist_t *intro_nodes; /**< List of rend_intro_point_t's we have,
                             * or are trying to establish. */
  time_t intro_period_started; /**< Start of the current period to build
                                * introduction points. */
  int n_intro_circuits_launched; /**< Count of intro circuits we have
                                  * established in this period. */
  rend_service_descriptor_t *desc; /**< Current hidden service descriptor. */
  time_t desc_is_dirty; /**< Time at which changes to the hidden service
                         * descriptor content occurred, or 0 if it's
                         * up-to-date. */
  time_t next_upload_time; /**< Scheduled next hidden service descriptor
                            * upload time. */
  /** Map from digests of Diffie-Hellman values INTRODUCE2 to time_t of when
   * they were received; used to prevent replays. */
  digestmap_t *accepted_intros;
  /** Time at which we last removed expired values from accepted_intros. */
  time_t last_cleaned_accepted_intros;
} rend_service_t;
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:21:08.277

`rend_service_t`是一个私有的结构`rendservice.c`- 它似乎不打算在该 .c 文件之外使用，并且它没有在 .c 文件中声明`rendservice.h`。（请参阅`rendservice.c`我正在查看的版本：[https](https://doxygen.torproject.org/rendservice_8c_source.html) ://doxygen.torproject.org/rendservice_8c_source.html ）。

所以这不是标题包含问题 - 标题中根本没有删除结构。

你应该问一个关于你打算用来做什么的问题`struct rend_service_t`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:19:39.997

您的文件 control.c 正在编译并生成编译错误。不管是在之前还是之后编译rendservice.c。编译器查看的所有内容都是 control.c 以及它引入的任何头文件。

可能 rend_service_t 的定义在 ifdef 部分中，因此编译器正在跳过它。可能您需要#define REND_SERVICE 或类似的东西...查看rendservice.h 并查看read_service_t 定义是否在ifdef 块内。

# java - 是否可以在 O(1) 时间内进行搜索？

> ID：11533415
> 
> 赞同：1
> 
> 时间：2012-07-18T02:15:15.427
> 
> 标签：java, algorithm, data-structures, complexity-theory, big-o

我有一个对象列表`objectList`，其中每个对象都有几个属性，其中之一是`myUniqueNo`。`myUniqueNo`是每个对象的随机整数。我有一个整数，比如说`n`。我确信其中`objectList`肯定有一个具有`myUniqueNo`as的对象`n`。我想将具有 'myUniqueNo' 的对象返回为`n`. 是否有任何 O(1) 算法或只是 Java 中的方法来返回此对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T02:17:05.940

典型的方法是使用一个辅助`HashMap`对象，将对象映射到列表中的位置。哈希表提供了预期的分期 O(1) 查找，但如果您尝试从列表中间删除项目，您将不得不做额外的 O(n) 工作来更新哈希表条目。

希望这可以帮助！

# git - 无法从 Assembla 克隆

> ID：11533426
> 
> 赞同：2
> 
> 时间：2012-07-18T02:16:28.090
> 
> 标签：git, netbeans, assembla

我已经创建了 git 存储库。我尝试使用 NetBeans 进行克隆。我选择：

团队 > Git > 克隆
存储库 URL：git.assembla.com:myproject.git用户名
：git

我选择 Private/Public
Private Key File：D:\Document\ssh\assembla-private.priv
密码：1234

当我单击下一步时，没有远程分支列表。所以我不能选择一个并单击完成。

我是 Git 新手，所以也许有人可以解释我错过了什么步骤

我使用 PuttyGen 创建 ssh 密钥（私钥导出到 OpenSSH）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T06:47:14.873

我遇到过同样的问题，

对于任何其他最终遇到此问题并且对 git、assembla、netbeans 不熟悉的人来说，这里是一个稍微详细的指南。

按照 assembla 的指示创建本地仓库，然后推送仓库。所有这些都可以在[msysgit](https://code.google.com/p/msysgit/downloads/list?q=net%20installer)客户端命令行上完成。

首先，通过输入以下命令创建一个 ssh 密钥：

```
ssh-keygen -t rsa 
```

不要输入密钥的名称，只需按 Enter。您也不需要创建密码。

创建密钥后，将 id_rsa.pub 密钥上传到 assembla。（通常在 windows 机器上的 username/.ssh/ 目录中找到。例如 C:\Users\username\.ssh\id_rsa.pub）

总之，需要执行以下指令：

```
git config --global user.name "your name" # Set your name
git config --global user.email "your@email" # Set an email 
```

设置电子邮件很重要，因为 assembla 会检查它。请务必提供您注册时使用的那个。

```
mkdir myproject
cd myproject

git init
touch README
git add README
git commit -m "first commit"

git remote add origin git@git.assembla.com:myproject.git
git push origin master 
```

在[netbeans 中初始化 Git](http://netbeans.org/kb/docs/ide/git.html)之后要在 Netbeans 中克隆存储库，以下选项可以帮助我完成：

```
Repository URL : git.assembla.com:myproject.git
Username : git

Private Key File : C:\Users\username\\.ssh\id_rsa 
```

希望这对像我这样刚起步的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T23:44:24.533

我还必须在生成密钥并将它们上传到 assembla 后运行它

```
$ ssh-add 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T21:50:43.623

当我在 NetBeans 中设置 Git 时，我使用`git@git.assembla.com:myproject.git`URL，然后在用户名框中使用我的 Assembla 用户名。

像往常一样使用你的钥匙，它应该一切正常。

只是好奇，你的密钥真的有密码吗？或者你想在这里使用你的 Assembla 密码？您可能正在使用您的密码，但我只是想仔细检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T23:29:37.680

当你这样做时，你会得到什么：

```
git clone git.assembla.com:myproject.git 
```

在终端窗口中？我不知道 netbrans 上下文中的用户名是什么，但是如果您使用的是私钥/公钥身份验证，则程序集不应询问您的用户名。

# android - Android 应用程序崩溃，应用程序已停止

> ID：11533437
> 
> 赞同：-3
> 
> 时间：2012-07-18T02:17:27.017
> 
> 标签：android, graphics, canvas, frame

我的 Android 应用程序编译正常，但由于消息应用程序已停止而崩溃。我的代码有什么问题？

```
#GameView.java
public class GameView extends View {
public Bitmap droid; 
public Matrix translate;
public GameView(Context context) {
super(context);
droid = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
}
public void onDraw(Canvas canvas) {  
canvas.drawBitmap(droid, 10, 10, null);
}

#Game.java
public class Game extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
FrameLayout view = (FrameLayout)findViewById(R.id.graphics_holder);
view.addView(new GameView(this));
setContentView(R.layout.game); 
```

日志猫

```
07-18 04:48:05.517: E/AndroidRuntime(960): FATAL EXCEPTION: main
07-18 04:48:05.517: E/AndroidRuntime(960): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.oop/com.example.oop.Game}: java.lang.NullPointerException
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.os.Looper.loop(Looper.java:137)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.app.ActivityThread.main(ActivityThread.java:4745)
07-18 04:48:05.517: E/AndroidRuntime(960):  at java.lang.reflect.Method.invokeNative(Native Method)
07-18 04:48:05.517: E/AndroidRuntime(960):  at java.lang.reflect.Method.invoke(Method.java:511)
07-18 04:48:05.517: E/AndroidRuntime(960):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-18 04:48:05.517: E/AndroidRuntime(960):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-18 04:48:05.517: E/AndroidRuntime(960):  at dalvik.system.NativeStart.main(Native Method)
07-18 04:48:05.517: E/AndroidRuntime(960): Caused by: java.lang.NullPointerException
07-18 04:48:05.517: E/AndroidRuntime(960):  at com.example.oop.Game.onCreate(Game.java:19)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.app.Activity.performCreate(Activity.java:5008)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-18 04:48:05.517: E/AndroidRuntime(960):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-18 04:48:05.517: E/AndroidRuntime(960):  ... 11 more 
```

如果我改成这个，它可以工作

```
public class Game extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
//      FrameLayout view = (FrameLayout)findViewById(R.id.graphics_holder);
//      view.addView();
        setContentView(new GameView(this));
}       
} 
```

但我的意图是使用一个框架来封装我想要显示的内容，因为我的布局还有其他 GUI 对象要显示。

我的布局文件 game.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="@dimen/padding_large" >
    <FrameLayout
        android:id="@+id/graphics_holder"
        android:layout_width="300dp"
        android:layout_height="400dp"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" >
    </FrameLayout>
    <TextView
        android:id="@+id/bpm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="TextView"
        android:textSize="@dimen/padding_large" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:32:41.260

通知“应用程序已停止”仅表示您的代码中有未处理的异常，它必须终止。这可能是除以零、空指针异常或尝试为不在清单中的活动调用意图。

虽然您的错误似乎是基于在调用 setContentView 之前调用 findViewById，但实际上不可能确定到底是什么问题，如果这是唯一的问题，根据您提供的代码段，但是 Log Cat (一个非常有用的工具和 ADT 的一部分）提供了导致强制关闭（简称 FC）的错误的完整堆栈跟踪。请查看如何使用 Log Cat，因为您在 SO 上发布的几乎所有问题都会涉及人们询问您的 Log Cat 或堆栈跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:34:31.453

setContent 不应该在 onCreate 之后完成吗？当您都 findViewById 时，您的应用程序如何知道要查找的布局。

# r - 为什么 plyr 这么慢？

> ID：11533438
> 
> 赞同：59
> 
> 时间：2012-07-18T02:17:41.947
> 
> 标签：r, dataframe, plyr, data.table

我想我使用 plyr 不正确。有人可以告诉我这是否是“高效”的 plyr 代码吗？

```
require(plyr)
plyr <- function(dd) ddply(dd, .(price), summarise, ss=sum(volume)) 
```

一点背景：我有一些大的聚合问题，我注意到它们都需要一些时间。在尝试解决这些问题时，我对 R 中各种聚合过程的性能产生了兴趣。

我测试了一些聚合方法 - 发现自己整天都在等待。

当我最终得到结果时，我发现 plyr 方法与其他方法之间存在巨大差距 - 这让我认为我做错了什么。

我运行了以下代码（我想我会在使用时检查新的数据框包）：

```
require(plyr)
require(data.table)
require(dataframe)
require(rbenchmark)
require(xts)

plyr <- function(dd) ddply(dd, .(price), summarise, ss=sum(volume)) 
t.apply <- function(dd) unlist(tapply(dd$volume, dd$price, sum))
t.apply.x <- function(dd) unlist(tapply(dd[,2], dd[,1], sum))
l.apply <- function(dd) unlist(lapply(split(dd$volume, dd$price), sum))
l.apply.x <- function(dd) unlist(lapply(split(dd[,2], dd[,1]), sum))
b.y <- function(dd) unlist(by(dd$volume, dd$price, sum))
b.y.x <- function(dd) unlist(by(dd[,2], dd[,1], sum))
agg <- function(dd) aggregate(dd$volume, list(dd$price), sum)
agg.x <- function(dd) aggregate(dd[,2], list(dd[,1]), sum)
dtd <- function(dd) dd[, sum(volume), by=(price)]

obs <- c(5e1, 5e2, 5e3, 5e4, 5e5, 5e6, 5e6, 5e7, 5e8)
timS <- timeBasedSeq('20110101 083000/20120101 083000')

bmkRL <- list(NULL)

for (i in 1:5){
  tt <- timS[1:obs[i]]

  for (j in 1:8){
    pxl <- seq(0.9, 1.1, by= (1.1 - 0.9)/floor(obs[i]/(11-j)))
    px <- sample(pxl, length(tt), replace=TRUE)
    vol <- rnorm(length(tt), 1000, 100)

    d.df <- base::data.frame(time=tt, price=px, volume=vol)
    d.dfp <- dataframe::data.frame(time=tt, price=px, volume=vol)
    d.matrix <- as.matrix(d.df[,-1])
    d.dt <- data.table(d.df)

    listLabel <- paste('i=',i, 'j=',j)

    bmkRL[[listLabel]] <- benchmark(plyr(d.df), plyr(d.dfp), t.apply(d.df),     
                         t.apply(d.dfp), t.apply.x(d.matrix), 
                         l.apply(d.df), l.apply(d.dfp), l.apply.x(d.matrix),
                         b.y(d.df), b.y(d.dfp), b.y.x(d.matrix), agg(d.df),
                         agg(d.dfp), agg.x(d.matrix), dtd(d.dt),
          columns =c('test', 'elapsed', 'relative'),
          replications = 10,
          order = 'elapsed')
  }
} 
```

该测试应该检查到 5e8，但花了太长时间 - 主要是由于 plyr。5e5决赛桌说明问题：

```
$`i= 5 j= 8`
                  test  elapsed    relative
15           dtd(d.dt)    4.156    1.000000
6        l.apply(d.df)   15.687    3.774543
7       l.apply(d.dfp)   16.066    3.865736
8  l.apply.x(d.matrix)   16.659    4.008422
4       t.apply(d.dfp)   21.387    5.146054
3        t.apply(d.df)   21.488    5.170356
5  t.apply.x(d.matrix)   22.014    5.296920
13          agg(d.dfp)   32.254    7.760828
14     agg.x(d.matrix)   32.435    7.804379
12           agg(d.df)   32.593    7.842397
10          b.y(d.dfp)   98.006   23.581809
11     b.y.x(d.matrix)   98.134   23.612608
9            b.y(d.df)   98.337   23.661453
1           plyr(d.df) 9384.135 2257.972810
2          plyr(d.dfp) 9384.448 2258.048123 
```

这是正确的吗？为什么 plyr 2250x 比 慢`data.table`？为什么不使用新的数据框包？

会话信息是：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] xts_0.8-6        zoo_1.7-7        rbenchmark_0.3   dataframe_2.5    data.table_1.8.1     plyr_1.7.1      

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6 tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-12T09:44:15.660

*为什么*这么慢？一项小型研究发现了 2011 年 8 月的一个邮件组发帖，包作者 @hadley[表示](https://groups.google.com/forum/?fromgroups#!msg/manipulatr/Xo3-2FBI35k/9pClNUuxoPIJ%5B1-25%5D)

> 这是 ddply 始终处理数据帧的方式的一个缺点。如果您使用 summarise 而不是 data.frame 会快一点（因为 data.frame 非常慢），但我仍在考虑如何克服 ddply 方法的这一基本限制。

* * *

至于*高效*的p​​lyr 代码，我也不知道。经过一堆参数测试和基准测试，看起来我们可以做得更好。

你的`summarize()`命令中的只是一个辅助函数，纯粹而简单。我们可以用我们自己的 sum 函数替换它，因为它对任何不简单的东西都没有帮助，并且`.data`and`.(price)`参数可以更明确。结果是

```
ddply( dd[, 2:3], ~price, function(x) sum( x$volume ) ) 
```

这`summarize`可能看起来不错，但它并不比简单的函数调用快。这说得通; 看看我们的小[函数](https://github.com/hadley/plyr/blob/master/R/helper-summarise.r)与`summarize`. 使用修改后的公式运行基准测试会产生明显的收益。不要认为这意味着您错误地使用了 plyr，您没有，它只是效率不高；你不能用它做的任何事情都会使它和其他选项一样快。

在我看来，优化后的功能仍然很糟糕，因为它并不清楚，并且与 data.table 相比仍然慢得离谱（即使有 60% 的增益）。

* * *

在上面提到的同一个[线程](https://groups.google.com/forum/?fromgroups#!msg/manipulatr/Xo3-2FBI35k/9pClNUuxoPIJ%5B1-25%5D)中，关于 plyr 的缓慢性，提到了一个 plyr2 项目。自问题的原始答案发布以来，plyr 作者已`dplyr`作为 plyr 的继任者发布。虽然 plyr 和 dplyr 都被称为数据操作工具，并且您的主要兴趣是聚合，但您可能仍然对新软件包的基准测试结果感兴趣以进行比较，因为它具有重新设计的后端以提高性能。

```
plyr_Original   <- function(dd) ddply( dd, .(price), summarise, ss=sum(volume))
plyr_Optimized  <- function(dd) ddply( dd[, 2:3], ~price, function(x) sum( x$volume ) )

dplyr <- function(dd) dd %.% group_by(price) %.% summarize( sum(volume) )    

data_table <- function(dd) dd[, sum(volume), keyby=price] 
```

[^(该`dataframe`软件包已从 CRAN 中删除，随后与矩阵函数版本一起从测试中删除。)]

这是`i=5, j=8`基准测试结果：

```
$`obs= 500,000 unique prices= 158,286 reps= 5`
                  test elapsed relative
9     data_table(d.dt)   0.074    1.000
4          dplyr(d.dt)   0.133    1.797
3          dplyr(d.df)   1.832   24.757
6        l.apply(d.df)   5.049   68.230
5        t.apply(d.df)   8.078  109.162
8            agg(d.df)  11.822  159.757
7            b.y(d.df)  48.569  656.338
2 plyr_Optimized(d.df) 148.030 2000.405
1  plyr_Original(d.df) 401.890 5430.946 
```

毫无疑问，优化有点帮助。看看`d.df`功能；他们只是无法竞争。

为了稍微了解 data.frame 结构的缓慢性，这里是使用更大的测试数据集 ( `i=8,j=8`) 的 data_table 和 dplyr 的聚合时间的微基准。

```
$`obs= 50,000,000 unique prices= 15,836,476 reps= 5`
Unit: seconds
             expr    min     lq median     uq    max neval
 data_table(d.dt)  1.190  1.193  1.198  1.460  1.574    10
      dplyr(d.dt)  2.346  2.434  2.542  2.942  9.856    10
      dplyr(d.df) 66.238 66.688 67.436 69.226 86.641    10 
```

data.frame*仍然*留在尘埃中。不仅如此，这里还有用测试数据填充数据结构所经过的 system.time：

```
`d.df` (data.frame)  3.181 seconds.
`d.dt` (data.table)  0.418 seconds. 
```

*data.frame 的创建和聚合都比 data.table 慢。*

*在*R*中*使用 data.frame比一些替代方案要慢，但是基准测试显示内置的 R 函数将 plyr 从水中吹走。即使像 dplyr 那样管理 data.frame，它改进了内置，也不能提供最佳速度；其中 data.table在创建和聚合方面*都更快，**而*data.table 在使用/处理 data.frames 时会执行它所做的工作。

到底...

**Plyr 很慢，因为*它*使用和管理 data.frame 操作**的方式。

[punt:: 请参阅对原始问题的评论]。

* * *

```
## R version 3.0.2 (2013-09-25)
## Platform: x86_64-pc-linux-gnu (64-bit)
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] microbenchmark_1.3-0 rbenchmark_1.0.0     xts_0.9-7           
## [4] zoo_1.7-11           data.table_1.9.2     dplyr_0.1.2         
## [7] plyr_1.8.1           knitr_1.5.22        
## 
## loaded via a namespace (and not attached):
## [1] assertthat_0.1  evaluate_0.5.2  formatR_0.10.4  grid_3.0.2     
## [5] lattice_0.20-27 Rcpp_0.11.0     reshape2_1.2.2  stringr_0.6.2  
## [9] tools_3.0.2 
```

[^([数据生成要点 .rmd](https://gist.github.com/Thell/9265593))]

# pic - C30 PIC 编译器无法编译（MPLAB-X IDE）

> ID：11533439
> 
> 赞同：0
> 
> 时间：2012-07-18T02:17:45.903
> 
> 标签：pic, mplab

我正在尝试编译一个非常简单的程序，我不明白为什么它不能编译。这是我的程序：

```
/* General includes */
#include <stdio.h>
#include <stdlib.h>
#include <libpic30.h>
#include <p33FJ128GP804.h>

#include "RunLengthAlgorithm.h"
//#include "RunLengthAlgorithm.c"

int main(void) {

    int n;
    char source[10001];
    char target[100];

    for(n = 0; n < 1000; ++n){
        source[n] = "A";
    }
    for(n = 1000; n < 2000; ++n){
        source[n] = "B";
    }
    for(n = 2000; n < 3000; ++n){
        source[n] = "C";
    }
    for(n = 3000; n < 4000; ++n){
        source[n] = "D";
    }
    for(n = 4000; n < 5000; ++n){
        source[n] = "E";
    }
    for(n = 5000; n < 6000; ++n){
        source[n] = "F";
    }
    for(n = 6000; n < 7000; ++n){
        source[n] = "G";
    }
    for(n = 7000; n < 8000; ++n){
        source[n] = "H";
    }
    for(n = 8000; n < 9000; ++n){
        source[n] = "I";
    }
    for(n = 9000; n < 10000; ++n){
        source[n] = "J";
    }
    source[10001] = '\0';

    RLEncode(&source, &target);

    while(1);
    return (EXIT_SUCCESS);

} 
```

.h 和 .c 文件被添加到项目中。

```
#ifndef RUNLENGTHALGORITHM_H
#define RUNLENGTHALGORITHM_H

void RLEncode (char *source, char *target);

#endif 
```

和 .c 文件：

```
#ifndef RUNLENGTHALGORITHM_C
#define RUNLENGTHALGORITHM_C
void RLEncode (char *source, char *target){
    int n, k = 0;
    for(n = 0; source[n] != '\0'; ++n){
        int length = 1;
        while(source[n+1] != '\0' && source[n] == source[n+1]){
            ++length; ++n;
        }
        target[k++] = length;
        target[k++] = source[n];
    }
    source[n] = '\0';
}

#endif 
```

我正在使用带有 C30 编译器的 MPLAB-X IDE，它给了我这个错误：

```
CLEAN SUCCESSFUL (total time: 1s)
make -f nbproject/Makefile-default.mk SUBPROJECTS= .build-conf
make[1]: Entering directory `D:/Datos (Disco)/Electronica/Multi portatil/Run-Length Algorithm.X'
make  -f nbproject/Makefile-default.mk dist/default/production/Run-Length_Algorithm.X.production.hex
make[2]: Entering directory `D:/Datos (Disco)/Electronica/Multi portatil/Run-Length Algorithm.X'
Main.c: In function 'main':
Main.c:24: warning: assignment makes integer from pointer without a cast
Main.c:27: warning: assignment makes integer from pointer without a cast
Main.c:30: warning: assignment makes integer from pointer without a cast
Main.c:33: warning: assignment makes integer from pointer without a cast
Main.c:36: warning: assignment makes integer from pointer without a cast
Main.c:39: warning: assignment makes integer from pointer without a cast
Main.c:42: warning: assignment makes integer from pointer without a cast
Main.c:45: warning: assignment makes integer from pointer without a cast
Main.c:48: warning: assignment makes integer from pointer without a cast
Main.c:51: warning: assignment makes integer from pointer without a cast
Main.c:55: warning: passing argument 1 of 'RLEncode' from incompatible pointer type
Main.c:55: warning: passing argument 2 of 'RLEncode' from incompatible pointer type
"C:\Program Files (x86)\Microchip\MPLAB C30\bin\pic30-gcc.exe" -g -omf=elf -x c -c -mcpu=33FJ128GP804 -MMD -MF build/default/production/Main.o.d -o **build/default/production/Main.o Main.c 
"C:\Program Files (x86)\Microchip\MPLAB C30\bin\pic30-gcc.exe" -g -omf=elf -x c -c -mcpu=33FJ128GP804 -MMD -MF build/default/production/RunLengthAlgorithm.o.d -o build/default/production/RunLengthAlgorithm.o RunLengthAlgorithm.c 
"C:\Program Files (x86)\Microchip\MPLAB C30\bin\pic30-gcc.exe"   -omf=elf -mcpu=33FJ128GP804  -o dist/default/production/Run-Length_Algorithm.X.production.elf build/default/production/Main.o build/default/production/RunLengthAlgorithm.o build/default/production/RunLengthAlgorithm.o        -Wl,--defsym=__MPLAB_BUILD=1,-Tp33FJ128GP804.gld
build/default/production/RunLengthAlgorithm.o(.text+0x0): In function `_RLEncode':
: multiple definition of `_RLEncode'
build/default/production/RunLengthAlgorithm.o(.text+0x0): first defined here
c:\program files (x86)\microchip\mplab c30\bin\bin\..\bin/pic30-elf-ld.exe: Link terminated due to previous error(s).**
make[2]: Leaving directory `D:/Datos (Disco)/Electronica/Multi portatil/Run-Length Algorithm.X'
make[1]: Leaving directory `D:/Datos (Disco)/Electronica/Multi portatil/Run-Length Algorithm.X'
**make[2]: *** [dist/default/production/Run-Length_Algorithm.X.production.hex] Error 255
make[1]: *** [.build-conf] Error 2
make: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 8s)** 
```

我不明白为什么，如果我将我的函数放在 Main.c 中并且我不包含 #include "RunLengthAlgorithm.h" 它可以工作，但我无法让它工作包括一个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:30:41.230

好的，代码没有问题。这似乎是 MPLAB-X v1.10 的一个错误。

解决方案：关闭 MPLAB-X 并再次打开它会正常编译，如果它不起作用，请阅读[http://www.microchip.com/forums/m627705.aspx](http://www.microchip.com/forums/m627705.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T07:03:15.380

我认为问题与内存映射有关。您应该根据使用的处理器系列重新定义 .gld 或 .lkr 文件中的堆栈大小。当您声明具有非常大内存位置的变量源时，堆栈会溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T13:36:57.170

当您“#include _your_func.h”您的函数，然后使用 IDE> Projects>sourcefiles> Add existing item 手动包含包含函数的文件时，就会发生这种情况。它足以做其中任何一个。

# c++ - 如何在 QT 中以幻灯片样式显示图像？

> ID：11533442
> 
> 赞同：1
> 
> 时间：2012-07-18T02:17:50.353
> 
> 标签：c++, qt, qt4, slider

我有一些图像，我想以幻灯片样式显示它们。我`QGraphicsScene`用来显示图像，我尝试在将`Sleep`图像加载到场景之间调用，但它不起作用，实际上，当我把这个`Sleep`函数（`#include <windows.h>`）放在我的代码中时，我什至看不到 GUI 窗口。无论如何，我认为必须有更好的方法，所以，我该怎么做呢？另一件事是我想用左键控制幻灯片播放，我的意思是当我按下左箭头时，它会转到下一张图像。

有什么提示吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:05:38.900

如果您仍然使用 Qt，我会创建一个[QTimer](http://qt-project.org/doc/qt-4.8/QTimer.html#details)作为您班级的成员，并将其`timeout()`信号连接到您自己的插槽，例如`showNextSlide()`.

如果您使用任何一种 sleep() 函数，整个 GUI 线程将休眠，即在 sleep() 完成之前不会执行绘画等。

考虑到左键，您可以在通常具有焦点的小部件中重新实现[QObject::eventFilter()](http://qt-project.org/doc/qt-4.8/qobject.html#eventFilter)。（要么从该类继承或使用`installEventFilter`）

# aix - 关注卷组中 VGDA 的数量，包括内部的 2 个 PV

> ID：11533443
> 
> 赞同：0
> 
> 时间：2012-07-18T02:17:58.537
> 
> 标签：aix

我有一个关于卷组`VGDA`中**包括两个 PV 在内**的数量的问题。如您所知，**`3`**在这种情况下分配了总 VGDA。一个有 2 个 VGDA，另一个有最后一个。根据规则`at least 50% VGDA availabley`，如果具有 1 VGDA 的 PV 崩溃，没关系。我们还有 66% 的罚款，而且 VG 可以挂断。但如果其他 PV 不工作，VG 将永远无法启动，因为只有 33% 的可用性。

但是据我了解，为什么每个 PV 不只包含一个 VGDA？这样，当 2 个 PV 中的任何一个崩溃时，VG 都可以联机。

请帮帮我！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T01:45:54.297

在这种情况下，您必须通过 禁用仲裁检查（50% 规则）`chvg -Q n VGname`。这在通常使用两个物理卷和 LVM 镜像的 AIX 服务器的 rootvg 上很常见。

您应该查看 IBM 红皮书“LVM 简介”和“LVM AZ”。

这个问题更适合Server Fault，它与编程无关。

# security - 从 smarty 变量在模板中创建 Smarty 变量

> ID：11533444
> 
> 赞同：0
> 
> 时间：2012-07-18T02:17:58.183
> 
> 标签：security, templates, hash, smarty

我正在尝试使用盐（来自全局文件）和模板表单中的变量创建哈希。我需要在模板中创建哈希。也许我遗漏了一些明显的东西，但我无法将 $hash 传递给 php 文件。变量 bspid 和 sspid 没有问题地传递。代码：

```
<select name="bspid">
{section name=all loop=$buySides}
. . . .
</option>
{/section}
</select>
<input type="hidden" name="sspid" value="{$smarty.get.id}">
{ $hash=md5({$smarty.const.salt}.{$smarty.get.id}.bspid) } 
```

` [提交按钮]

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:10:16.523

通常 PHP 用于为 smarty 模板提供数据。所以你想在 smarty 中生成一个哈希值并传递给 php？

我强烈建议不要这样做，因为

*   Smarty 的内置`{php}`函数[被弃用](http://www.smarty.net/docs/en/language.function.php.tpl)是有充分理由的。
*   将模板代码与 php 函数混合是一种不好的做法。
*   可能有更多的原因不像您的示例所暗示的那样这样做。

您的示例提示您要根据选项框中的某些选定值动态创建 md5 哈希。

如果是这种情况，它甚至无法正常工作，因为 md5 只会在加载模板时计算一次 - 而不是如果更改了所选选项。如果你想动态生成一个 md5 以在 html 表单中使用，我建议添加一些[javascript](http://membres-liglab.imag.fr/donsez/cours/exemplescourstechnoweb/js_securehash/)来存档它。如果您已经在使用 JScript 框架，那么其中大多数都是 md5 插件。

为了向您提供有关如何解决此问题的更多信息，也许可以更多地解释一下您要使用此归档的内容以及为什么要从选择框中散列某些内容。

# javascript - 如何用哈希对该数组进行排序？

> ID：11533445
> 
> 赞同：0
> 
> 时间：2012-07-18T02:18:15.637
> 
> 标签：javascript, arrays, sorting

> **可能重复：**
> [如何对 javascript 对象数组进行排序？](https://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects)

我的输出如下所示：

```
[ { value: 1, count: 1 }, { value: 2, count: 2 } ] 
```

我需要遍历数组中的哈希，然后返回具有最高计数的值数。看起来很简单，但我有点难过。我尝试使用单独的数组来保存两组值，但我想不出最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:23:20.910

你可以这样做：

```
var a = [{
    value: 1,
    count: 1
}, {
    value: 2,
    count: 2
}, {
    value: 7,
    count: 8
}, {
    value: 5,
    count: 0
}, {
    value: 10,
    count: 3
}];

// sorting using a custom sort function to sort the 
// greatest counts to the start of the array
// take a look here: http://www.w3schools.com/jsref/jsref_sort.asp
// to understand how the custom sort function works
// better references can be found 
// here: http://es5.github.com/#x15.4.4.11
// and here: https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort
a.sort( function( v1, v2 ){
    return v2.count - v1.count;
});

for ( var i in a ) {
    console.log( a[i] );
}

// the greatest one is the first element of the array
var greatestCount = a[0];

console.log( "Greatest count: " + greatestCount.count ); 
```

# utf-8 - utf8_general_ci 或 utf8mb4 还是...？

> ID：11533448
> 
> 赞同：31
> 
> 时间：2012-07-18T02:19:21.850
> 
> 标签：utf-8, localization, utf-16, utf-32, utf8mb4

utf16 还是 utf32？我正在尝试以多种语言存储内容。一些语言使用双宽字体（例如，日文字体通常是英文字体的两倍）。我不确定我应该使用哪种数据库。有关这四个字符集之间差异的任何信息...

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-18T02:25:46.393

MySQL 的`utf32`and `utf8mb4`（以及标准的 UTF-8）可以直接存储 Unicode 指定的任何字符；前者的大小固定为每个字符 4 个字节，而后者的大小在每个字符 1 到 4 个字节之间。

`utf8mb3`而原文`utf8`只能存储前65,536个码点，将覆盖CJVK（中文、日文、越南、韩文），每个字符使用1到3个字节。

`utf16`前 65,536 个代码点使用 2 个字节，其他所有代码点使用 4 个字节。

至于字体，这严格来说是一种视觉上的东西。

[“每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）”](http://www.joelonsoftware.com/articles/Unicode.html)

另请参阅[MySQL 文档以获取 Unicode 支持](http://dev.mysql.com/doc/refman/5.5/en/charset-unicode.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-04T00:53:43.220

> `utf8mb4`是最好的。

`utf8mb4`与 utf8 的每个字符 3 个字节相比，支持每个字符 4 个字节，因此它涵盖了更广泛的使用范围而不会出错。

例如，`utf8mb4`您可以支持表情符号。如果您尝试在不受支持的字符集中插入表情符号，则会出现错误。

`utf8mb4`是 2 的更现代版本，最终将取代旧版本。

# android - 在哪里存储 .txt 和 .pdf 在 Android 中？

> ID：11533449
> 
> 赞同：0
> 
> 时间：2012-07-18T02:19:25.707
> 
> 标签：android, android-assets

在我的应用程序中，我需要存储`.txt`，`.pdf`以便我可以在应用程序中打开它们。哪个文件夹最适合存放这些文件。我已经考虑过价值，但我猜资产文件夹？当我需要从所述文件夹中调用这些文件时，我将如何调用它`(R.assets.myfile.txt)`？

我只是想确保将它们放在正确的位置，因为当它们驻留在其他地方时，日食不会出错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:33:05.910

如果您想将它们捆绑在应用程序中，请将它们放入`assets/`并使用`AssetManager`从应用程序中读取它们。

# sql - 使用学说 2 在查询中带有“like”的结果

> ID：11533461
> 
> 赞同：1
> 
> 时间：2012-07-18T02:21:39.603
> 
> 标签：sql, symfony, doctrine-orm

在我的新闻网页中，我想使用主要新闻中引用的“关键字”获得相关新闻，并且我使用此查询：

```
 public function RelatedNews($limit,$offset=0,$keywords)

  {    
     $q = $this->_em->createQueryBuilder();
         $q->select('n.title,n.shortContent,n.longContent,n.keywords')
           ->from('MyAppMyBundle:News', 'n')
            ->where($q->expr()->like('n.keywords', $q->expr()->literal('%' . $keywords . '%')))
              ->setFirstResult( $offset )
              ->setMaxResults( $limit );  

    return $q->getQuery()->getResult();

  } 
```

查询是正确的，但只是当它找到一个关键字时，当我输入一个单词列表时我得到了错误的结果

在我的“新闻”表中，我有一行“关键字”，我像这样存储我的关键字：

```
word 1 , word 2 , word 3 ... 
```

所以我希望当查询在单词列表中找到一个单词时有结果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:02:12.093

LIKE %value% 将匹配任何包含子字符串 'value' 的字符串。

因此，如果输入的关键字字符串恰好是其中一个新闻项上的关键字的子字符串，则问题中的查询只会导致多个关键字的匹配。

例如，如果您有一个关键字为“cycling,france,wiggins”的新闻项目，那么如果您输入“cycling,france”或“france,wiggins”而不是“cycling,wiggins”甚至“cycling”，您将获得匹配，法国”或“骑车法国”。

如果您更改传入的 $keywords 字符串的值以使用 % 通配符分隔关键字，那么您应该得到您正在寻找的匹配项。

例如，如果您将“cycling, wiggins”转换为“%cycling%wiggins%”，那么它将匹配“cycling,france,wiggins”。

但是，请注意，使用这种 LIKE 方法查询“fran, gin”也将匹配“cycling,france,wiggins”。要匹配整个关键字，更好的方法是将关键字单独存储在单独的表中并使用不同类型的查询。

# java - Java 获得焦点窗口

> ID：11533462
> 
> 赞同：1
> 
> 时间：2012-07-18T02:21:44.103
> 
> 标签：java, java-native-interface, jna

如何在 Java 中获得当前聚焦的窗口？例如，如果用户在 Google Chrome 中。我相信这需要本机代码，而且我从未使用过本机代码，所以请帮忙。

我只需要它来使用 Windows，所以我认为这可能与 VB 脚本一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:13:58.583

我对 vb 不熟悉，但您可能正在寻找：
[GetForegroundWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633505%28v=vs.85%29.aspx) - 它应该为您提供“用户当前正在使用的窗口”
[GetWindowText](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520%28v=vs.85%29.aspx)

-如果我错了，请纠正我的标题，但我相信您可以加载“User32 .dll”从 VB 使用这个，一个快速的谷歌搜索给了我一些例子，他们应该帮助你。（您必须自己进行搜索，我不能发布超过 2 个链接，而这两个似乎是最重要的）

编辑：由于您将其标记为 JNI，您可以将其编写为 C/C++ 并从 Java 中使用它们。由于这些函数是 Windows API 的一部分，因此可能已经准备好与 java 一起使用。

可能有更好答案的类似问题：[获取当前活动窗口'](https://stackoverflow.com/questions/1354254/get-current-active-windows-title-in-java)

# objective-c - Objective-C 咨询：“接收器类型 'void' 不是 Objective-C 类”错误

> ID：11533465
> 
> 赞同：0
> 
> 时间：2012-07-18T02:22:04.540
> 
> 标签：objective-c, unity3d

# 编辑：

APP_ID 和 APP_SIGNATURE 定义为：

```
#define APP_ID @"12345" 
#define APP_SIGNATURE @"123456" 
```

我是 Objective C 的新手，我正在使用它将一些 Chartboost 代码外部化到 Unity C# 中，我在这里进行一些咨询。所以请多多包涵。谢谢！:D

我有这个外部代码：

```
extern "C"
{
void applicationDidBecomeActiveExtern()
{

    UIApplication*application;
    application = [UIApplication sharedApplication];

    /*Configure chartboost*/
    Chartboost*cb = [Chartboost sharedChartboost];
    cb.appId = APP_ID;
    cb.appSignature = APP_SIGNATURE;

    /*Notify the beginning of a user session*/
    [cb startSession];

    /*Show an interstitial*/
    [cb showInterstitial];  
}
} 
```

但是在“[cb showInterstitial];”这一行上，Xcode 显示错误“接收器类型‘void’不是一个 Objective-C 类。”

函数代码不是我写的，是从 Chartboost 自己提供的指南中复制过来的。请评论！提前致谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:56:18.340

~~我在这里暗中尝试，但可能`showInterstitial`是类方法，而不是实例方法。~~

类方法以 a 开头`+`，实例方法以 a 开头`-`，如下所示：

```
+(void) showInterstitial; //class method
-(void) showInterstitial; //instance method 
```

 ~~第二个刺：你应该有一个大写的“B”，`ChartBoost`而不是`Chartboost`？~~

# rally - SDK 2.0：直接进入highcharts的方式

> ID：11533466
> 
> 赞同：1
> 
> 时间：2012-07-18T02:22:23.340
> 
> 标签：rally

我尝试使用 SDK 2.0 图表对象制作一些图表，但它是一个新功能，而且我认为文档还没有赶上。因此，我想直接在高图表中绘制图表并暂时跳过 Rally Glue。如何加载正确的库以完成以下任务：

```
var chart = new Highcharts.Chart(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:32:21.523

现在 highcharts 库仅在您创建 Rally.ui.chart.Chart 并呈现时按需加载。将来我们可能会直接提供 highcharts。

# node.js - Node.js 中的异步或步骤

> ID：11533471
> 
> 赞同：7
> 
> 时间：2012-07-18T02:22:48.233
> 
> 标签：node.js, asynchronous

我无法让我的异步代码与 node.js 一起使用

尝试异步和步骤库——代码只返回第一个函数（似乎没有完成其余的）。我究竟做错了什么？

谢谢！

```
var step = require('step');
step(
function f1(){
        console.log('test1');
},
function f2(){
        console.log('test2');
},
function finalize(err) {
    if (err) { console.log(err);return;}
    console.log('done with no problem');
  }
); 
```

或这个：

```
var async = require('async');
async.series([
function f1(){
        console.log('test1');
},
function f2(){
        console.log('test2');
},
function finalize(err) {
    if (err) { console.log(err);return;}
    console.log('done with no problem');
  }
]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T03:17:25.233

Step.js 期望每个步骤都有回调。此外，使用 Step 的函数应该回调结果而不是返回它。

所以假设你有：

```
function pullData(id, callback){
  dataSource.retrieve(id, function(err, data){
    if(err) callback(err);
    else callback(data);
  });
} 
```

使用 Step 的工作方式如下：

```
var step = require('step');

function getDataFromTwoSources(callback){
  var data1,
    data2;
  step(
    function pullData1(){
      console.log('test1');
      pullData(1, this);
    },
    function pullData2(err, data){
      if(err) throw err;
      data1 = data;
      console.log('test2');
      pullData(2, this);
    },
    function finalize(err, data) {
      if(err)
        callback(err);
      else {
        data2 = data;
        var finalList = [data1, data2];
        console.log('done with no problem');
        callback(null, finalList);
      }
    }
  );
}; 
```

这将使它继续执行这些步骤。

请注意，我个人更喜欢异步有两个原因：

*   Step 捕获所有抛出的错误并对其进行回调；当这些库应该只是清理代码的外观时，这会改变应用程序的行为。
*   Async 有更好的组合选项，看起来更干净

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T03:15:30.473

我只能说`async`，但为此，您传递给的数组中的匿名函数`async.series`必须`callback`在函数完成处理时调用传递给这些函数的参数。如：

```
async.series([
    function(callback){
        console.log('test1');
        callback();
    },
    function(callback){
        console.log('test2');
        callback();
    }
]); 
```

# android - Android：换行符不适用于 plist（XML）文件中的文本

> ID：11533472
> 
> 赞同：0
> 
> 时间：2012-07-18T02:22:51.717
> 
> 标签：android, string, android-layout, xml-parsing, textview

我正在创建一个显示从 plist (XML) 文件解析的数据的视图。我的解析例程将数据作为对象存储在哈希图中，稍后我会使用键检索该哈希图中。我的 textview 确实显示了数据，但它不会将 \n 处理为换行符。相反，\n 与文本一起显示。这是我用来从哈希图中检索数据的代码：

```
String contactData = dict.get("Data").toString(); 
```

我尝试了变化但没有成功：

```
Object obj =  dict.get("Data");
String contactData = obj.toString();
and
contactData = (String)dict.get("Data"); 
```

我的文本很长，嵌入了 \n 以强制换行。我将我的文本设置如下：

```
TextView data = (TextView) getActivity().findViewById(R.id.data);
data.setText(contactData); 
```

这是我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/light_grey"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/midnight_blue"
    android:gravity="center"
    android:text="Contacts"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/white"
    android:textStyle="bold" />

<TextView
    android:id="@+id/country"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="center"
    android:textColor="@color/midnight_blue"
    android:textSize="16dp" />

<TextView
    android:id="@+id/name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="20dp"
    android:background="@color/white"
    android:gravity="center"
    android:textColor="@color/midnight_blue"
    android:textSize="16dp" />

<TextView
    android:id="@+id/data"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="center"
    android:singleLine="false"
    android:textColor="@color/black"
    android:textSize="12dp" 
    android:text="Line one\nLine two\nLine3"/> 
```

\n 如果我将文本硬编码到我的变量 (contactData) 或者我在布局 XML 文件中使用默认文本，则可以正常工作。当我将对象数据转换为字符串时它不起作用？？

请不要建议转换为\r\n。\n 是行分隔符。我在上一个问题中已经走下这条线，但这不是解决方案。以下代码返回\n：

```
System.getProperty("line.separator"); 
```

我的问题与我如何从哈希图中检索文本并将其转换为字符串有关。任何想法或建议将不胜感激！！！

***更新这是我对 plist 文件的解析例程：

```
 public void parse(InputStream inputStream) throws XmlPullParserException, IOException {
    final XmlPullParserFactory xppf = XmlPullParserFactory.newInstance();
    final XmlPullParser parser = xppf.newPullParser();
    parser.setInput(inputStream, null);

    final Stack<List<Map<String, Object>>> arrayStack = new Stack<List<Map<String, Object>>>();
    final Stack<Map<String, Object>> dictStack = new Stack<Map<String, Object>>();
    final Stack<String> keyStack = new Stack<String>();

    int eventType = parser.getEventType();
    boolean done = false;
    while (!done) {
        final String name = parser.getName();
        switch (eventType) {
        case XmlPullParser.START_DOCUMENT:
            break;
        case XmlPullParser.START_TAG:
            if ("array".equalsIgnoreCase(name)) {
                final List<Map<String, Object>> array = new ArrayList<Map<String,Object>>();
                arrayStack.push(array);
            } else if ("dict".equalsIgnoreCase(name)) {
                final Map<String, Object> dict = new HashMap<String, Object>();
                dictStack.push(dict);
            } else if ("key".equalsIgnoreCase(name)){
                keyStack.push(parser.nextText()); // assign current key
            } else if ("string".equalsIgnoreCase(name)) {
                final Map<String, Object> dict = dictStack.peek();
                final String string = parser.nextText();
                final String key = keyStack.pop();
                dict.put(key, string);
            } else if ("integer".equalsIgnoreCase(name)) {
                final Map<String, Object> dict = dictStack.peek();
                final String integerStr = parser.nextText();
                final Integer integer = new Integer(integerStr);
                final String key = keyStack.pop();
                dict.put(key, integer);
            }  else if ("false".equalsIgnoreCase(name)) {
                final Map<String, Object> dict = dictStack.peek();
                final Boolean booleanValue = new Boolean(false);
                final String key = keyStack.pop();
                dict.put(key, booleanValue);
            } else if ("true".equalsIgnoreCase(name)) {
                final Map<String, Object> dict = dictStack.peek();
                final Boolean booleanValue = new Boolean(true);
                final String key = keyStack.pop();
                dict.put(key, booleanValue);
            }

            break;
        case XmlPullParser.END_TAG:
            if ("array".equalsIgnoreCase(name)) {
                final List<Map<String, Object>> array = arrayStack.pop();
                if (arrayStack.isEmpty()) {
                    // return array;
                    mPlistHashMap.put("array",array);
                    break;
                }
                // If not end of array, means it's an array within a dict
                final String key = keyStack.pop();
                dictStack.peek().put(key, array);
            } else if ("dict".equalsIgnoreCase(name)) {
                final Map<String, Object> dict = dictStack.pop();
                if (!arrayStack.empty())
                    arrayStack.peek().add(dict);
                else
                    mPlistHashMap = dict;
            }
            break;
        case XmlPullParser.END_DOCUMENT:
            done = true;
            break;
        }
        eventType = parser.next();
    }

} 
```

我的 plist 包含一个包含三个字符串的字典项数组。这是我的 plist XML 文件的片段：

```
<array>
    <dict>
        <key>Country</key>
        <string>Mexico</string>
        <key>Name</key>
        <string>Mexico City</string>
        <key>Data</key>
        <string>Line one\nLine two\nLine three</string>
    </dict> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:47:03.267

将您的文本换行并使用实际的换行符。然后解析器应该为您提供与写入完全相同的数据。就像是：

```
 <array>
        <dict>
            <key>Country</key>
            <string>Mexico</string>
            <key>Name</key>
            <string>Mexico City</string>
            <key>Data</key>
            <string>
<![CDATA[
Line one
Line two
Line three
]]>
            </string>
        </dict>
    </array> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T01:44:03.337

多亏了 Nikolay 的建议，我发现我的文本以某种方式嵌入了换行符并增加了额外的反斜杠。所以我的文字有“\n”而不是“\n”。我曾尝试使用 .replaceAll("\n","\n")，但由于某种原因，它不起作用。这是对我有用的代码：

```
contactData = dict.get("Data").toString().replace("\\n", "\n"); 
```

# python - PyQt 连接到 Postgresql 并显示值

> ID：11533473
> 
> 赞同：1
> 
> 时间：2012-07-18T02:22:53.613
> 
> 标签：python, postgresql, pyqt

我是 Python 和 PyQt 的新手。我想知道如何使用 PyQt 连接到 Postgresql DB 并将其显示到网格窗口。我正在使用 Qt 设计器。有人可以帮我吗？谢谢你。

最好的问候， 内森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:59:46.227

PyQt 具有数据库支持（我个人没有使用过，所以我无法评论），但如果你查看 QDatabase，它应该是非常简单的文档。如果您的应用程序的 api 始终可以访问 Qt，这可能是最好的方法，因为它们还有一些用于映射到接口的附加模型。

另一种选择是使用 Python ORM（对象关系映射器），例如 Django、SQLAlchemy 或storm，并定义您的表（模型）并将它们手动加载到您的设计器界面中。

我个人的做法是，我实际上构建了自己的 ORM，称为 ORB 和一个 PyQt 扩展库，称为 ProjexUI。ORB 库独立于 Qt，因此可以在非 Qt 项目中使用，ProjexUI 库包含映射以帮助在 Qt 小部件中使用数据库记录。

有关文档和更多信息，请查看： http: [//www.projexsoftware.com](http://www.projexsoftware.com)

对于一个简单的示例，通过执行以下操作创建一个新的 UI 文件：

*   加载 Qt 设计器
*   创建一个新的 Qt 对话框
*   拖放 QTreeWidget
*   右键单击并执行“更改对象名称...”>“uiOrbTREE”
*   右键单击小部件并选择“提升为...”
    *   保持基类名称相同（QTreeWidget）
    *   将“提升的类名”设置为“XOrbTreeWidget”
    *   将“头文件”设置为“projexui.widgets.xorbtreewidget”
    *   点击“添加”，然后点击“推广”
*   选择基本对话框并单击“在网格中布局”
*   保存 UI 文件（我将在代码中将其称为 UI_FILE）

这将创建 PyQt 接口部分，接下来您仍需要将接口连接到数据库后端。如何使用 ORB 执行此操作的最简单示例是：

```
# import the projexui and orb libraries
import projexui
import orb

# import PyQt modules
import PyQt4.QtGui
import PyQt4.uic

# create our database model
class User(orb.Table):
    __db_columns__ = [
        orb.Column( orb.ColumnType.String, 'username' ),
        orb.Column( orb.ColumnType.String, 'password' ),
        orb.Column( orb.ColumnType.Boolean, 'isActive' )
    ]

# the above model will by default create a PostgreSQL table called default_user with
# the fields _id, username, password and is_active.  All of this is configurable, but
# you should read the docs for more info

# create the database information
db = orb.Database('Postgres', DATABASE_NAME) # set your db name
db.setUsername(USER_NAME) # set your db user name
db.setPassword(PASSWORD)  # set your password
db.setHost('localhost')   # set your host
db.setPort(5432)          # set your port

# register the database
orb.Orb.instance().registerDatabase(db)

# sync the datbase (this will create your tables, update columns, etc.)
# NOTE: this should not always be called, it is here as an example
db.sync( dryRun = False ) # dryRun will just output the SQL calls

#-----------------------------
# End Database Code
#-----------------------------

class ExampleDialog(QtGui.QDialog):
    def __init__( self, parent = None ):
        super(ExampleDialog, self).__init__(parent)

        # load your UI file
        PyQt4.uic.loadUi(UI_FILE, self) # use the UI_FILE you saved

        # connect the tree to the model
        self.uiOrbTREE.setTableType(User)

        # that is all you have to do to link the tree to the model and vice-versa,
        # this is the most simple example of how to do this - you can do more as far
        # as linking queries and sorting and such, but you should read the docs on
        # the site

# launch as an application
if ( __name__ == '__main__' ):
    # always check for an existing application first!
    app = None
    if ( not QtGui.QApplication.instance() ):
        app = QtGui.QApplication(sys.argv)

    dialog = ExampleDialog()
    dialog.show()

    # execute the app if we created it
    if ( app ):
        app.exec_() 
```

# java - Java - 如何测试字符串是否同时包含字母和数字

> ID：11533474
> 
> 赞同：14
> 
> 时间：2012-07-18T02:23:00.717
> 
> 标签：java, regex

我需要一个满足这两个条件的正则表达式。

只有当一个字符串同时包含 AZ 和 0-9 时，它才应该给我真实的。

这是我尝试过的：

> `if PNo[0].matches("^[A-Z0-9]+$")`

这没用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-18T02:33:55.863

我怀疑下面的正则表达式会因环视而减慢，但无论如何它都应该起作用：

```
.matches("^(?=.*[A-Z])(?=.*[0-9])[A-Z0-9]+$") 
```

正则表达式断言字符串中某处有一个大写字母字符`(?=.*[A-Z])`，并断言字符串`(?=.*[0-9])`某处有一个数字，然后它检查所有内容是字母字符还是数字。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-18T02:37:20.433

如果您使用两个单独的正则表达式，则更容易编写和阅读：

```
String s  =  "blah-FOO-test-1-2-3";

String numRegex   = ".*[0-9].*";
String alphaRegex = ".*[A-Z].*";

if (s.matches(numRegex) && s.matches(alphaRegex)) {
    System.out.println("Valid: " + input);
} 
```

* * *

更好的是，写一个方法：

```
public boolean isValid(String s) {
    String n = ".*[0-9].*";
    String a = ".*[A-Z].*";
    return s.matches(n) && s.matches(a);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T02:27:41.657

一个字母可以在数字之前或之后，所以这个表达式应该有效：

```
(([A-Z].*[0-9])|([0-9].*[A-Z])) 
```

下面是一个使用此表达式的代码示例：

```
Pattern p = Pattern.compile("(([A-Z].*[0-9])|([0-9].*[A-Z]))");
Matcher m = p.matcher("AXD123");
boolean b = m.find();
System.out.println(b); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-11-27T20:37:42.413

# 这是适合您的正则表达式

**基本：**

匹配字符串的当前行：`.`

匹配 0 或任意数量的任意字符：`*`

匹配当前行中的任何内容：`.*`

匹配字符集（范围）中的任何字符：`[start-end]`

匹配组中的一个正则表达式：`(regex1|regex2|regex3)`

注意 start 和 end 来自 ASCII 顺序，并且 start 必须在 end 之前。比如你可以做`[0-Z]`，但不能`[Z-0]`。这是供您参考的ASCII图表 [![在此处输入图像描述](../Images/55df11fd374d88a34abfbf31244ec652.png)](https://i.stack.imgur.com/YgeMo.png)

**根据正则表达式检查字符串**

只需调用`yourString.matches(theRegexAsString)`

**检查字符串是否包含字母：**

检查是否有字母：`yourString.matches(".*[a-zA-Z].*")`

检查是否有小写字母：`yourString.matches(".*[a-z].*")`

检查是否有大写字母：`yourString.matches(".*[A-Z].*")`

**检查字符串是否包含数字：**

`yourString.matches(".*[0-9].*")`

**检查字符串是否同时包含数字和字母：**

最简单的方法是用字母和数字匹配两次

`yourString.matches(".*[a-zA-Z].*") && yourString.matches(".*[0-9].*")`

如果您希望将所有内容都匹配在一起，则正则表达式将类似于：匹配在某个地方有一个字符的字符串，然后在任何位置都有一个数字，或者反过来。所以你的正则表达式将是：

`yourString.matches(".*([a-zA-Z].*[0-9]|[0-9].*[a-zA-Z]).*")`

# 额外的正则表达式供您参考：

**检查字符串是否带有字母**

`yourString.matches("[a-zA-Z].*")`

**检查字符串是否以数字结尾**

`yourString.matches(".*[0-9]")`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-18T02:28:20.147

这应该可以解决您的问题：

```
^([A-Z]+[0-9][A-Z0-9]*)|([0-9]+[A-Z][A-Z0-9]*)$ 
```

但它是不可读的。我建议先用“^[A-Z0-9]+$”检查输入，然后用“[AZ]”检查以确保它至少包含一个字母，然后用“[0-9]”检查以确保它至少包含一位数字。通过这种方式，您可以轻松添加新的限制，并且代码将保持可读性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T02:28:18.443

怎么样`([A-Z].*[0-9]+)|([0-9].*[A-Z]+)`？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-29T13:42:09.600

尝试使用 (([AZ]+[0-9])|([0-9]+[AZ])) 。它应该可以解决。

# gcc - 什么语法在 nasm 中是不可接受的反汇编 .s 文件？

> ID：11533478
> 
> 赞同：0
> 
> 时间：2012-07-18T02:23:25.247
> 
> 标签：gcc, assembly, syntax, nasm

此代码是反汇编成汇编的 C 程序（冒泡排序）。如果我将以下代码放在 .asm 文件中并使用 nasm 进行汇编，如何使以下代码运行？如果您知道需要更改的内容，请说出要更改的内容。例如，我知道 nasm 不会接受`DWORD PTR`，但我还没有找到该怎么做。谢谢

```
.file   "sort.c" .intel_syntax noprefix .text .globl 
sort .type   sort, @function
sort: .LFB0:
    .cfi_startproc
    push    rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    mov rbp, rsp
    .cfi_def_cfa_register 6
    mov QWORD PTR [rbp-24], rdi
    mov DWORD PTR [rbp-28], esi
    mov DWORD PTR [rbp-12], 0
    jmp .L2
.L6:
    mov DWORD PTR [rbp-8], 0
    jmp .L3
.L5:
    mov eax, DWORD PTR [rbp-8]
    cdqe
    sal rax, 2
    add rax, QWORD PTR [rbp-24]
    mov edx, DWORD PTR [rax]
    mov eax, DWORD PTR [rbp-8]
    cdqe
    add rax, 1
    sal rax, 2
    add rax, QWORD PTR [rbp-24]
    mov eax, DWORD PTR [rax]
    cmp edx, eax
    jle .L4
    mov eax, DWORD PTR [rbp-8]
    cdqe
    sal rax, 2
    add rax, QWORD PTR [rbp-24]
    mov eax, DWORD PTR [rax]
    mov DWORD PTR [rbp-4], eax
    mov eax, DWORD PTR [rbp-8]
    cdqe
    sal rax, 2
    add rax, QWORD PTR [rbp-24]
    mov edx, DWORD PTR [rbp-8]
    movsx   rdx, edx
    add rdx, 1
    sal rdx, 2
    add rdx, QWORD PTR [rbp-24]
    mov edx, DWORD PTR [rdx]
    mov DWORD PTR [rax], edx
    mov eax, DWORD PTR [rbp-8]
    cdqe
    add rax, 1
    sal rax, 2
    add rax, QWORD PTR [rbp-24]
    mov edx, DWORD PTR [rbp-4]
    mov DWORD PTR [rax], edx
.L4:
    add DWORD PTR [rbp-8], 1
.L3:
    mov eax, DWORD PTR [rbp-28]
    sub eax, 1
    sub eax, DWORD PTR [rbp-12]
    cmp eax, DWORD PTR [rbp-8]
    jg  .L5
    add DWORD PTR [rbp-12], 1
.L2:
    mov eax, DWORD PTR [rbp-28]
    sub eax, 1
    cmp eax, DWORD PTR [rbp-12]
    jg  .L6
    pop rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size   sort, .-sort
    .ident  "GCC: (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3"
    .section    .note.GNU-stack,"",@progbits 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:07:26.483

只需删除`PTR`所有无意义`.somethings`的 .

这组装得很好：

```
; file: gas-nasm-sort.asm
bits 64

sort:
push rbp
mov rbp, rsp
mov QWORD [rbp-24], rdi
mov DWORD [rbp-28], esi
mov DWORD [rbp-12], 0
jmp .L2

.L6:
mov DWORD [rbp-8], 0
jmp .L3

.L5:
mov eax, DWORD [rbp-8]
cdqe
sal rax, 2
add rax, QWORD [rbp-24]
mov edx, DWORD [rax]
mov eax, DWORD [rbp-8]
cdqe
add rax, 1
sal rax, 2
add rax, QWORD [rbp-24]
mov eax, DWORD [rax]
cmp edx, eax
jle .L4
mov eax, DWORD [rbp-8]
cdqe
sal rax, 2
add rax, QWORD [rbp-24]
mov eax, DWORD [rax]
mov DWORD [rbp-4], eax
mov eax, DWORD [rbp-8]
cdqe
sal rax, 2
add rax, QWORD [rbp-24]
mov edx, DWORD [rbp-8]
movsx rdx, edx
add rdx, 1
sal rdx, 2
add rdx, QWORD [rbp-24]
mov edx, DWORD [rdx]
mov DWORD [rax], edx
mov eax, DWORD [rbp-8]
cdqe
add rax, 1
sal rax, 2
add rax, QWORD [rbp-24]
mov edx, DWORD [rbp-4]
mov DWORD [rax], edx

.L4:
add DWORD [rbp-8], 1

.L3:
mov eax, DWORD [rbp-28]
sub eax, 1
sub eax, DWORD [rbp-12]
cmp eax, DWORD [rbp-8]
jg .L5
add DWORD [rbp-12], 1

.L2:
mov eax, DWORD [rbp-28]
sub eax, 1
cmp eax, DWORD [rbp-12]
jg .L6
pop rbp
ret 
```

命令：

```
nasm gas-nasm-sort.asm -f bin -o gas-nasm-sort.bin 
```

但同样，有 NASM 文档。阅读。特别是这些部分：

*   2.2.2 NASM 需要方括号用于内存引用

*   2.2.3 NASM 不存储变量类型

# python - 再次使用 ElementTree 编写带有 utf-8 数据的 xml utf-8 文件 ...

> ID：11533484
> 
> 赞同：0
> 
> 时间：2012-07-18T02:24:23.583
> 
> 标签：python, python-2.7, elementtree

[这个问题的标题与这个](https://stackoverflow.com/questions/10046755/write-xml-utf-8-file-with-utf-8-data-with-elementtree)问题相同，但我的问题不同。

我使用 tarfile.TarFile.extractfile() 从 tar.gz 存档中读取数据并存储在 xml.etree.ElementTree.Element 中。数据采用 utf-8 编码。

当我尝试使用 xml.etree.ElementTree.ElementTree.write() 将其放入文件中时，我得到了这个：

```
Traceback (most recent call last):
  File "../python/GetDoc.py", line 150, in <module>
    ET.ElementTree(elements).write(args.outfile, encoding="us-ascii", method="text")
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 815, in write
    _serialize_text(write, self._root, encoding)
  File "/usr/lib/python2.7/xml/etree/ElementTree.py", line 1007, in _serialize_text
    write(part.encode(encoding))
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 10: ordinal not in range(128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:36:49.510

你是如何从文件中读取数据的？您是否正确地将其从 UTF-8 解码为 un​​icode 对象？ElementTree 需要 unicode 对象，而不是 UTF-8 编码的字节串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:26:44.597

我可以通过使用 myString.decode('utf-8') 将我的字符串转换为 unicode 来解决这个问题，然后再将它们添加到我的 ElementTree.Element 对象中。似乎 ET.ElementTree.write() 对其他字符串编码不满意。

# javascript - 为什么我用 Google Closure 编写的事件监听器不起作用？

> ID：11533486
> 
> 赞同：2
> 
> 时间：2012-07-18T02:24:55.520
> 
> 标签：javascript, google-closure-library

我的 Google Closure 代码中有一个带有事件侦听器的函数，该事件侦听器旨在在正文加载时将由大豆模板生成的 HTML 附加到正文：

```
/**
 * Constructs the home page.
 */
AppLoader.prototype.constructHomePage = function() {
  goog.events.listen(document.body, 'onload', function() {
      document.body.innerHTML = templates.home.main();});
}

(new AppLoader()).constructHomePage(); 
```

但是，它不起作用。Chrome 控制台也没有提供任何错误。我试过的是下面的代码，它使用了javascript原生的addEventListener函数。

```
... class instantiation
/**
 * Constructs the home page.
 */
AppLoader.prototype.constructHomePage = function() {
  document.body.innerHTML = templates.home.main();
}

document.body.addEventListener('load', function() {
  (new AppLoader()).constructHomePage();
}, false); 
```

后一种方法可行，但根本不使用 Closure，所以我觉得它不可靠。为什么我用 Google Closure 编写的事件监听器不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:09:10.083

您应该停止浏览器事件。

event.stopPropagation();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T20:59:07.690

您应该将其附加到窗口对象。

```
goog.events.listenOnce(
  window
, goog.events.EventType.LOAD
, function(){
    window.alert( 'Ready for ADVANCED_COMPILATION!' );
  }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-19T15:11:19.487

如果您在“窗口”对象而不是文档正文上侦听“加载”事件，则可以使用 Google Closure。

尝试这个： `goog.events.listen(window, "load", function(){//code })`

PS，对不起，我的答案晚了8年

# ios - 进度条不适用于 ASIHTTPRequest

> ID：11533487
> 
> 赞同：0
> 
> 时间：2012-07-18T02:25:02.220
> 
> 标签：ios, asihttprequest, uiprogressview

添加带有 StoryBoard 的 UIProgressView，并将其设置为 ANIHTTPRequet 的进度条 我是否正确初始化 UIProgressView 或使用函数 setDownloadProgressDelegate:？蒂亚！

```
 @interface xyzViewController : UIViewController {
               ASINetworkQueue *networkQueue;
               BOOL failed;

               ASIHTTPRequest *request;
               NSOperationQueue *queue;
    }
    @property (strong, nonatomic) IBOutlet UIProgressView *progressBar; 
```

//

```
 - (void)viewDidLoad
     {
             [super viewDidLoad];
             progressBar = [[UIProgressView alloc]initWithProgressViewStyle:UIProgressViewStyleBar];
             [progressBar setProgress:0.0 animated:YES];
      } 
```

//

```
 -(IBAction) downloadStart{

           if (!networkQueue) {
                 networkQueue = [[ASINetworkQueue alloc] init]; 
           }
           failed = NO;

           [networkQueue reset];
           [networkQueue setRequestDidFinishSelector:@selector(imageFetchComplete:)];
           [networkQueue setRequestDidFailSelector:@selector(imageFetchFailed:)];
           [networkQueue setShowAccurateProgress: YES];
           [networkQueue setDelegate:self];

           request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:@"http://allseeing-i.com/ASIHTTPRequest/tests/images/large-image.jpg"]];
           [request setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"1.png"]];
           [request setDownloadProgressDelegate:progressBar];
           [request setUserInfo:[NSDictionary dictionaryWithObject:@"request1" forKey:@"name"]];
           [networkQueue addOperation:request];

           [networkQueue go];

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:52:00.180

*   确保您的 IBOutlet 在 IB 中正确连接，如果是这种情况，请删除此行：

`progressBar = [[UIProgressView alloc]initWithProgressViewStyle:UIProgressViewStyleBar];`

...并在 IB 中配置条形外观

*   确保你综合了财产`@synthesize progressBar;`

PS。

*   最好为 IBOutlets 使用“弱”属性
*   如果您打算广泛使用 ASIHTTPRequest 库，那么使用其他解决方案是个好主意。请参阅[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)：`Please note that I am no longer working on this library - you may want to consider using something else for new projects. :)`

# excel - 这是一些 Applescript 代码，用于在 Snow Leopard 上与 Microsoft Excel 进行交互 - 如何添加缺少的功能

> ID：11533491
> 
> 赞同：0
> 
> 时间：2012-07-18T02:26:13.673
> 
> 标签：excel, applescript, osx-snow-leopard, automator

我有大约 400 个 excel 文件。我想在现有文件的第一列之前插入一列，然后将文件名插入该列的每一行。

我对 Applescript 有一点了解，基于此，我编写了这个脚本，以便我可以将一些文件放到脚本上，它会在每个文件上执行脚本。

我想知道是否有人可以帮助我完成“TO DO”行。执行后，这个脚本会给我一个对话框，上面有我放在上面的文件的路径。但是 excel 应用程序会抛出一个错误对话框，上面写着“内存不足”。我只用 2 个 excel 文件尝试了这个，所以不是导致错误的文件数。

有人可以帮我完成 TODO 行，并告诉我为什么我会收到错误。谢谢

```
property numFiles : 0

on open excelFiles

set fileNames to ""

tell application "Finder"
    repeat with eachFile in excelFiles

        --open document file eachFile

        --tell application "Microsoft Excel"

        --increment count

        --save name of each file

        set fileNames to fileNames & return & (POSIX path of eachFile)

        --TO DO insert a column

        --TO DO insert text in each column to the name of eachFile

        --end tell
    end repeat
    display dialog fileNames
    --display dialog "Ouch that hurt " & return & "You dropped " & (count excelFiles) & "files on me"
end tell
end open

on addFilePath(eachFile)
set fileNames to fileNames & (POSIX path of eachFile)
end addFilePath 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:49:39.703

我什么都不懂 --> 将文件名插入该列的每一行 | **TO DO在*****每列***中将文本插入到每个文件的名称中。

这是脚本，**更新：**

```
 on open excelFiles
    set numFiles to count excelFiles
    repeat with eachFile in excelFiles -- open each file in Excel
        tell application "Microsoft Excel"
            set tBook to open workbook workbook file name (eachFile as string)
            set tName to name of tBook
            insert into range column 1 of active sheet -- insert column

            set lastCell to last cell of used range of active sheet -- get last cell from the used range
            set value of range ("A1:A" & first row index of lastCell) of active sheet to tName --set first column's values to the file name

            close tBook saving yes
        end tell
    end repeat
    display dialog numFiles
end open 
```

编辑：我忘记了错误：

**没有足够的内存**：这个奇怪的错误似乎是：你调用了一个处理程序而不使用`my`or `tell me to`) 在`tell block application`.

像这样使用**我**的：`set x to my addFilePath(eachFile)`

另外， 不推荐`tell application "Microsoft Excel"`块中的 块，这可能会导致意外错误。`application Finder`

# vba - 我仅在某些 Excel 2010 版本中收到“编译错误：找不到项目或库”。很难测试这个

> ID：11533494
> 
> 赞同：8
> 
> 时间：2012-07-18T02:26:55.617
> 
> 标签：vba, excel, error-handling, compilation

我的客户收到编译错误；在他的 Excel 2010 版本上找不到项目或库，但是我在我的 2010 版本上没有找到它。如何调整此代码使其不会出现。当错误出现在以下代码中时，“对于选择中的每个单元格”中的文本“单元格”会突出显示：

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Target.Address = "$B$9" Then
Columns("D:CB").Select
Selection.EntireColumn.Hidden = False
Application.ScreenUpdating = False

Sheet17.Range("E48:CB48").Select

For Each cell In Selection
    If cell = 0 Then
       Range(cell.Address).EntireColumn.Hidden = True
    End If
Next

Application.ScreenUpdating = True
Sheet17.Range("b9").Select
End If

End Sub` 
```

我的客户还报告了以下代码中的错误，其中突出显示了“响应”一词。在我的 Excel 2010 版本上，这对我来说也不是问题。非常感谢任何和所有帮助。

```
If Sheet1.Range("E18") = 3 Then
Response = MsgBox("Reminder Emails have been set to be sent automatically at " &               Sheet1.Range("f18").Value & ", " & Sheet1.Range("Q4").Value & " day(s) before" & vbCrLf & "the scheduled appointment. Do you want to send reminder e-mails now anyway?", vbYesNo)
    If Response = vbNo Then
    Exit Sub
    End If
    End If 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T02:36:14.537

在 VBA 窗口中，转到`Tools --> References`并确保为所有计算机打开相同的库。还要确保所有活动库从上到下的顺序相同。

许多库“成为标准”，但可能需要打开一个。或者，由于功能干扰，可能需要*关闭库引用。*一个库可能完全丢失了，但我怀疑情况是否如此，因为它是一个相当标准的套件，你不知道已经修改过它。

这是一个典型的问题，通常不会被认为对您的分销客户造成太大的负担。如果是，您可以重新编写代码以使用更少的引用；或者您可以以[编程方式加载所需的库](http://it.toolbox.com/wiki/index.php/Add_references_programmatically_with_VB_or_VBA)（但我从未尝试过）。

我建议您将其包含`Option Explicit`在所有模块的顶部。这个问题看起来有点像你的变量声明失败；而且我认为该要求可能因设置而异。 `Option Explicit`将强制声明所有变量，这通常是有益的，并且可能导致所有客户端安装行为相同。

# ios - iOS 的自定义 UIActionSheet

> ID：11533507
> 
> 赞同：11
> 
> 时间：2012-07-18T02:29:16.953
> 
> 标签：ios, uiactionsheet

是否可以创建一个看起来像 iOS 附件图像的操作表？

![截屏](../Images/551847aaf36dc6c9fda5cec51f5325ea.png)

这是 iOS6 上照片应用程序的屏幕截图，当您按下操作按钮时。我真的很喜欢将选项列为图标的方式，而不是带有标题的水平按钮。

我浏览了 Google 和 Apple 的[iOS 参考资料](http://developer.apple.com/library/ios/#samplecode/UICatalog/Introduction/Intro.html)，但似乎找不到任何可以教我如何为我的应用程序创建类似内容的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T21:13:42.487

您可以使用 Activity View Controller 来创建它。它与操作表不同。

请参阅 Apple 的文档：

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW121](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW121)

# regex - bash 4.1.2 中的正则表达式

> ID：11533509
> 
> 赞同：-1
> 
> 时间：2012-07-18T02:30:25.947
> 
> 标签：regex, bash, shell

我正在尝试使用正则表达式列出文件，但它没有按预期列出。

```
# ls test*.tgz
test-2012_07_17_11_23_45.tgz 
```

但是当我使用一点钻的正则表达式时，它就失败了。

```
# ls test-[0-9]{4}_*.tgz
ls: cannot access test-[0-9]{4}_*.tgz: No such file or directory

# ls test-[0-9]\{4\}_*.tgz
ls: cannot access test-[0-9]{4}_*.tgz: No such file or directory

# ls "test-"[0-9]\{4\}"_"*".tgz"
ls: cannot access test-[0-9]{4}_*.tgz: No such file or directory 
```

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:45:45.913

### Glob 不是正则表达式

Bash 不进行正则表达式文件匹配。Shell 通常使用“globs”进行[模式匹配。](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)您可以使用 来打开扩展的`shopt -s extglob`glob，但您仍然需要按照自己的条件执行 glob。例如，这将匹配您的文件：

```
shopt -s extglob

# Would match: test-2011_07_17_11_23_45.tgz test-2012_07_17_11_23_45.tgz
ls test-+(+([[:digit:]])_*tgz)

# Would match: test-2011_07_17_11_23_45.tgz
ls test-!(2012*) 
```

在此示例中，扩展的 glob 并不是真正需要的。您可以使用标准 glob 更轻松地完成相同的操作。但是，它们提供了一些您可以做什么的简单示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:43:58.000

bash 不支持通过正则表达式进行 glob 扩展。您需要使用 glob 语法或 extglob 语法，它们都不允许 {4} 出现次数。

试试`ls | pcregrep' 或类似的东西，或者提供更多关于你想要做什么的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T02:43:51.903

Bash 扩展 glob 模式，而不是正则表达式。

# ios - Cocos2d 和 UIKit 动画不同步

> ID：11533510
> 
> 赞同：1
> 
> 时间：2012-07-18T02:30:29.990
> 
> 标签：ios, cocos2d-iphone, uikit, uiviewanimation

我正在尝试为 Cocos2d 节点和 UIKit 视图设置动画，如下所示：

```
-(void)someFunction {
    [myCocosNode runAction:[CCMoveTo actionWithDuration:myTime position:cocosPoint]];
    [UIView animateWithDuration:myTime animations:^{ myView.frame = CGRectMake(uiPoint.x, uiPoint.y, myWidth, myHeight); }];
} 
```

但 UIKit 视图的移动速度与 Cocos2d 节点的移动速度不同，它们处于相同的起始位置，到达相同的结束位置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:46:47.313

[在此线程中找到了一个适用于 PhilM](http://www.cocos2d-iphone.org/forum/topic/2415)同步移动的解决方案。

他将 UIView 附加到 CCLayer 的子类，并在层移动时覆盖`setPosition:`以更新`UIView`' 位置。然后`CCMoveTo`在图层上使用将与移动同步`UIView`。

```
-(void)setPosition:(CGPoint)pos {
    [super setPosition:pos];

   CGRect frame = slider.frame;
   frame.origin.y = frame.origin.y + ([self position].y - pos.y); // Changed this line a bit to get correct positioning
   slider.frame = frame;
} 
```

谢谢菲尔姆！

# php - PHP mysqli 准备 - 动态生成

> ID：11533512
> 
> 赞同：1
> 
> 时间：2012-07-18T02:30:43.007
> 
> 标签：php, mysqli

我生成 SQL 语句的代码工作正常 - 但是在为 $stmt->bind_param 生成字符串时遇到了问题。代码如下：

`$stmt = $mysqli->stmt_init(); if ($stmt->prepare ($sql)) { $bind_types = '"'; $bind_values = '';`

 ````
 if ($action == 'insert' || $action == 'update') {
        reset ($array);
        foreach ($array as $key => $value) {
            if (is_string ($value)) { $type = 's'; } else if (is_int ($value)) { $type = 'i'; } else if (is_float ($value)) { $type = 'd'; } else { die ('Cannot determine type for ' . $key . ' => ' . $value . ''); }
            $bind_types .= $type;
            $bind_values .= $value . ', ';
            //$stmt->bind_param ($type, $value);
        }
    }

    if ($action == 'update' || $action == 'delete') {
        if (is_string ($id_value)) { $type = 's'; } else if (is_int ($id_value)) { $type = 'i'; } else if (is_float ($id_value)) { $type = 'd'; } else { die ('Cannot determine type for ' . $id_column . ' => ' . $id_value . ''); }
        $bind_types .= $type;
        $bind_values .= $id_value . ', ';
        //$stmt->bind_param ($type, $id_value);
    }

    $bind_types .= '"';

    $bind_values = substr ($bind_values, 0, -2);

    echo $bind_types  . ', ' . $bind_values;

    $stmt->bind_param ($bind_types, $bind_values);
    $stmt->execute();

} 
````  `那个格式搞砸了。如果它难以阅读，我深表歉意。

我收到以下错误：

“警告：mysqli_stmt::bind_param() [mysqli-stmt.bind-param]：类型定义字符串中的元素数与...中的绑定变量数不匹配”

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:47:08.857

我强烈建议您使用 PDO，因为您可以轻松地做到这一点。如果您想在 mysqli 中执行此操作，则更复杂，因为您无法轻松地动态绑定它们。要动态绑定它们，请查看这个丑陋的 hack

```
$bind_values= explode(',', $bind_values);
call_user_func_array(array($stmt, 'bind_param'), makeValuesReferenced($bind_values));
$stmt->execute();

function makeValuesReferenced(&$arr){ 
    $refs = array(); 
    foreach($arr as $key => $value) 
        $refs[$key] = &$arr[$key]; 
    return $refs; 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:36:48.043

你的电话`bind_param`是错误的：它应该是：

```
bind_param($types, $value1, $value2, $value3 ...); 
```

其中每个值都是实际变量。`

# sql - 如何使用 T-SQL 的 xml 数据类型方法在生成的 XML 中的根元素上设置 xmlns 属性：查询？

> ID：11533514
> 
> 赞同：1
> 
> 时间：2012-07-18T02:31:07.680
> 
> 标签：sql, sql-server, xml, tsql, sql-server-2008-r2

我创建了我的问题的简化版本：

```
DECLARE @X XML = 
'<Root xmlns="TestNS" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Test>
        <Id>1</Id>
        <InnerCollection>
            <InnerItem>
                <Value>1</Value>
            </InnerItem>
            <InnerItem>
                <Value>2</Value>
            </InnerItem>
            <InnerItem>
                <Value>3</Value>
            </InnerItem>
        </InnerCollection>
    </Test>
    <Test>
        <Id>2</Id>
        <InnerCollection>
            <InnerItem>
                <Value>5</Value>
            </InnerItem>
            <InnerItem>
                <Value>6</Value>
            </InnerItem>
            <InnerItem>
                <Value>7</Value>
            </InnerItem>
        </InnerCollection>
    </Test>
</Root>' 
```

我正在尝试编写一个查询，该查询将每个`<Test>`元素分成一行。在每一行上，我想选择 Id 和 InnerCollection 作为 XML。我想为第一行 (Id:1) 创建这个 InnerCollection XML：

```
<InnerCollection xmlns="Reed.Api" xmlnsi="http//www.w3.org/2001/XMLSchema-instance">
  <InnerItem>
    <Value>1</Value>
  </InnerItem>
  <InnerItem>
    <Value>2</Value>
  </InnerItem>
  <InnerItem>
    <Value>3</Value>
  </InnerItem>
</InnerCollection> 
```

我尝试使用此查询执行此操作，但它在元素上放置了我不想要的命名空间：

```
;WITH XMLNAMESPACES
(
    DEFAULT 'TestNS'
    , 'http://www.w3.org/2001/XMLSchema-instance' AS i
)
SELECT 
    X.value('Id[1]', 'INT') Id
    -- Creates a p1 namespace that I don't want.
    , X.query('InnerCollection') InnerCollection
FROM @X.nodes('//Test') AS T(X) 
```

我的 Google-fu 今天不是很强大，但我想它并没有让该死的函数被称为查询变得更容易。我愿意使用除查询方法之外的其他方法来创建 XML 值。

我可以使用这种方法：

```
;WITH XMLNAMESPACES
(
    DEFAULT 'TestNS'
    , 'http://www.w3.org/2001/XMLSchema-instance' AS i
)
SELECT 
    X.value('Id[1]', 'INT') Id
    ,CAST(
        (SELECT 
            InnerNodes.Node.value('Value[1]', 'INT') AS 'Value'
        FROM X.nodes('./InnerCollection[1]//InnerItem') AS InnerNodes(Node) 
        FOR XML PATH('InnerItem'), ROOT('InnerCollection')
        ) AS XML) AS InnerCollection
FROM @X.nodes('//Test') AS T(X) 
```

但这涉及调用其上的节点以将其分解为可选择的内容，然后使用 FOR XML 将其重新选择回 XML ......当它开始是 XML 时。这似乎是一种低效的方法，所以我希望这里有人会有更好的主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T21:33:34.657

这是如何使用查询方法在我的问题正在寻找的每一行上创建 XML 来执行 SELECT：

```
;WITH XMLNAMESPACES
(
    'http://www.w3.org/2001/XMLSchema-instance' AS i
    , DEFAULT 'TestNS'
)
SELECT
    Test.Row.value('Id[1]', 'INT') Id
    , Test.Row.query('<InnerCollection xmlns="TestNS" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">{InnerCollection}</InnerCollection>')
FROM @X.nodes('/Root/Test') AS Test(Row) 
```

# eclipse - 类加载eclipse rcp

> ID：11533515
> 
> 赞同：2
> 
> 时间：2012-07-18T02:31:09.530
> 
> 标签：eclipse, classloader, rcp

我有一个 Eclipse rcp 应用程序。此应用程序将尝试从应用程序外部的目录加载类文件。但是我总是收到 ClassNotFoundException 的错误。你知道类加载在 eclipse rcp 中是如何工作的吗？

基本上用例是

1.  读取 xml 文件 - 完成
2.  将这些 xml 数据放入 Navigator - 完成
3.  当用户单击导航器中的数据时，在目录中找到类并尝试加载它 - classnotfoundexception

我创建了一个测试 java 项目并添加了外部类库，它可以成功找到它们。但是，如果我将它集成到 eclipse rcp 中，它会引发该错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:32:37.397

Eclipse RCP 应用程序使用 OSGi 类加载支持来查找与应用程序中的 OSGi 包（插件）关联的类加载器。如果你想从某个地方加载一个类，那么你需要制作一个`ClassLoader`可以从一个目录加载一个类（可能使用`URLClassLoader`）。因此，您将需要创建其中之一并使用它从所需位置加载类。

# count - COBOL - 奖金报告

> ID：11533518
> 
> 赞同：0
> 
> 时间：2012-07-18T02:31:55.503
> 
> 标签：count, character, cobol

我的 COBOL 作业需要您的帮助。

数据划分文件部分的详细信息如下。我的问题是我不知道如何计算字符的数量 - 记录包含*_*字符。你能检查并告诉我我的计数是否正确。如果不是正确的数字是多少，你是如何得到它的。

```
 FD  BONUS-REPORT

     RECORD CONTAINS 222 CHARACTERS.
     01  BONUS-REPORT-RECORD          PIC X(222).

    WORKING-STORAGE SECTION.
    01  LINE-CT                      PIC 99   VALUE 0.
    01  WS-CONSTANTS. 
        05 TOTAL-LINES               PIC 99   VALUE 10.
    01  ARE-THERE-MORE-RECORDS       PIC X(3) VALUE 'YES'.
        88 MORE-RECORDS              VALUE 'YES'.
        88 NO-MORE-RECORDS           VALUE 'NO'. 
    01  WS-DATE.
       05 WS-YEAR                   PIC 9(4).
       05 WS-MONTH                  PIC 99.
       05 WS-DAY                    PIC 99.
    01  HDR-1.
       05                           PIC X(40).
       05                           PIC X(12)
                              VALUE 'BONUS REPORT'.
       05                           PIC X(8).
       05                           PIC X(5) VALUE 'PAGE'.
       05 PAGE-NO                   PIC 99   VALUE 0.
       05                           PIC X(4).
       05 DATE-OUT.
          10 MONTH-OUT              PIC 99.
          10                        PIC X    VALUE '/'.   
          10 DAY-OUT                PIC 99.
          10                        PIC X    VALUE '/'.   
          10 YEAR-OUT               PIC 9(4). 
   01  HDR-2.
       05                           PIC X(10).
       05                           PIC X(13)
                                  VALUE 'TERRITORY --'.
       05 TERRITORY-NO-OUT          PIC X(2).
   01  HDR-5.
       05                           PIC X(20).
        05                           PIC X(10)
                              VALUE 'OFFICE -- '.
       05 OFFICE-NO-OUT             PIC X(2).             
  01  HDR-7.
      05                           PIC X(10).
      05                           PIC X(14)
                              VALUE 'EMPLOYEE NAME'.
      05                           PIC X(8).
      05                           PIC X(5)
                              VALUE 'BONUS'.                         
 01 DETAIL-LINE.
       05                           PIC X(7).
       05 EMPLOYEE-NAME-OUT         PIC X(24).
       05 BONUS-OUT                 PIC $BZ,ZZZ.99 BLANK WHEN ZERO. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:16:23.330

我不会把它们都数一遍然后加起来，但看起来你可能很长。

这里没有明确说明，但看​​起来您的记录`BONUS-REPORT`可能是`REDEFINES`and `HDR-n`，`DETAIL-LINE`因此其中最长的计数是记录大小（假设记录长度固定）。

计`BONUS-OUT`为 10。不应该对齐，因为一切都是`USAGE IS DISPLAY`默认的。这些`VALUE`条款在计数方面没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T19:24:23.863

您的问题的答案是向编译器询问答案。

也就是说，按原样编译程序并检查编译器列表，它应该告诉您每个字段和记录的长度。然后您可以返回源代码并根据需要进行更新。

根据您使用的环境（大型机、unix、windows 等），可能需要设置某些编译器选项来告诉编译器创建那种编译器列表。对于我在大型机上使用带有 4.2 版编译器的 z/OS，这些选项都记录在 Enterprise COBOL for z/OS Programming Guide 中，网址为[http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1 /topic/com.ibm.entcobol.doc_4.2/PGandLR/ref/rpcos390.htm](http://pic.dhe.ibm.com/infocenter/pdthelp/v1r1/topic/com.ibm.entcobol.doc_4.2/PGandLR/ref/rpcos390.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T08:48:10.417

严格来说，奖金记录是 222 字节，因为您所说的是：--

```
 01  BONUS-REPORT-RECORD          PIC X(222). 
```

您可能要问的是各种标题和详细信息条目的长度是多少。

通常这些都将作为*单独*的记录写入——因此最长的记录将是 81 字节的 HDR-1。其他的都更短。

# scala - 如何在电梯视图中将纯文本字符串返回给浏 览器？

> ID：11533521
> 
> 赞同：1
> 
> 时间：2012-07-18T02:32:22.277
> 
> 标签：scala, view, lift, plaintext

我想以这样的提升视图将纯文本返回到浏览器：

```
import scala.xml.Text    
def csv_export_status_check: NodeSeq = {
    Text("my text")
} 
```

但是“我的文字”根本没有显示。

我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:11:18.417

我尝试了以下方法，它奏效了：

```
def render =
  xml.Text("aoeu") 
```

实际上，您的版本也应该可以正常工作-也许还有其他问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T19:40:42.840

根据您的需要，这是一个仅返回纯文本的解决方案：

```
 serve {
    case rq@ Req("my"::"stuff"::Nil, suffix, PostRequest) => processMyRequest()
  }

  def response(txt: String) = InMemoryResponse(txt.getBytes, Nil, Nil, 200)

  def processMyRequest(): () => Box[LiftResponse] = {
    Full(response("my text"))
  } 
```

# gcc - gcc 是否可以从管道中读取静态库？

> ID：11533522
> 
> 赞同：0
> 
> 时间：2012-07-18T02:32:32.057
> 
> 标签：gcc

作为项目要求，我们不允许将现有的静态库放到硬盘上并将其与用户代码链接。（是的，听起来很奇怪）我知道 gcc 可以从标准输入读取源代码并编译它，只要您通过“-x”选项指定语言，但我没有找到任何关于如何从标准输入读取静态库的线索或管道。有什么想法吗？谢谢。

# python - 2to3-2.7 和 2to3-3.1 有什么区别？

> ID：11533524
> 
> 赞同：3
> 
> 时间：2012-07-18T02:33:02.573
> 
> 标签：python, python-3.x, python-2.7, ubuntu-12.04, python-2to3

我的 Ubuntu 12.04 库存 python 安装有 2 个用于将代码转换为 Python 3.x 的程序：`2to3-2.7`和`2to3-3.1`. 有什么不同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T02:50:19.153

它们都是 2to3，但一个是 Python 2.7 安装的一部分，另一个是 Python 3.1 安装的一部分。

如果您查看 Python XY 安装中的 bin 目录，每个 foo 可执行文件也将命名为 foo-XY，以便您可以按名称运行特定版本。

# git - git push 到 github 询问另一个用户的密码

> ID：11533526
> 
> 赞同：1
> 
> 时间：2012-07-18T02:33:06.800
> 
> 标签：git, ssh, github

我按照 github 网站上的教程配置了 git 和我的 github 帐户。现在，我尝试将我的文件推送到 github，`git push -u origin master`但它要求我输入一些密码

```
myunixuseraccount@gitub.com's password 
```

请注意两点：首先，我的 github 帐户不是`myunixuseraccount`，其次，请注意 'gitub.com' 中的拼写错误（是的，他要求的是 gitub，而不是 github）。

我相信有些东西配置不好，但我不知道是什么。我查看了 git/config 但没有任何地方提到该用户。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:37:03.117

在`.git/config`中，您的远程 url 应该类似于`git@github.com:yourgithubuser/repo.git`

如果您使用 https 而不是私钥推送到 github，请将 url 替换为该存储库的 github 页面上的 https url。

# java - 无法推断类的类型

> ID：11533527
> 
> 赞同：2
> 
> 时间：2012-07-18T02:33:11.293
> 
> 标签：java, generics

我有一个名为的静态实用程序方法`toSet()`，它接收对象并返回一个`Set`.

```
public static <T> Set<T> toSet(T item, T... otherItems) {
    Set<T> items = new HashSet<T>();
    items.add(item);
    items.addAll(Arrays.asList(otherItems));
    return items;
} 
```

该方法适用于其他对象，但当我想制作一个`Set`of时会产生编译`Class<?>`。

```
Set<String> strings = toSet("OK", "This works well", "No problem");
Set<Integer> numbers = toSet(1, 2, 3, 4, 5); 
```

但

```
 Class<?> test = String.class;
    Set<Class<?>> entities = toSet(test); 
```

将产生`Type mismatch: cannot convert from Set<Class<capture#5-of ?>> to Set<Class<?>>`。

我在这里做错了吗？我怎样才能在没有铸造的情况下实现这一目标？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:12:57.513

在这种情况下，类型推断似乎失效了，因为其他人可以解释的原因。不需要强制转换 - 只需明确指定类型参数：

```
Set<Class<?>> entities = MyClass.<Class<?>>toSet(test); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T05:11:55.277

也试试这种方式：

```
 Class<String> test = String.class;
 Set<Class<String>> entities = toSet(test); 
```

# ruby-on-rails - 未初始化的常量 APN::App::RAILS_ENV

> ID：11533529
> 
> 赞同：2
> 
> 时间：2012-07-18T02:33:28.500
> 
> 标签：ruby-on-rails, push-notification, rake, apple-push-notifications

`rake apn:notifications:deliver`在我安装的[APN on Rails gem](https://github.com/PRX/apn_on_rails)上触发命令后，我正在努力解决这个错误。

它在咆哮 RAILS_ENV 变量。我已经尝试了几个将 RAILS_ENV 更改为 Rails.env 的分支，但我仍然遇到相同的错误。[我已经在那个 repo](https://github.com/PRX/apn_on_rails/issues/53)上发布了我的问题，希望我能找到某个地方。

我对铁轨的了解还不够，无法进一步挖掘。我希望有人能指出我正确的方向，以便我可以 a）更好地了解问题所在 b）解决问题。

我正在使用捆绑器，并将我的 gem 文件指向 git repo：`rake apn:notifications:deliver`

```
air:apnapp azcoov$ rake apn:notifications:deliver --trace
    /Users/azcoov/.bundler/ruby/1.8/apn_on_rails-ca98c7c130f0/lib/apn_on_rails/version.rb:2: warning: already initialized constant VERSION
    ** Invoke apn:notifications:deliver (first_time)
    ** Invoke environment (first_time)
    ** Execute environment
    ** Execute apn:notifications:deliver
    rake aborted!
    uninitialized constant APN::App::RAILS_ENV
    /Users/azcoov/.bundler/ruby/1.8/apn_on_rails-ca98c7c130f0/lib/apn_on_rails/app/models/apn/app.rb:11:in `cert'
    /Users/azcoov/.bundler/ruby/1.8/apn_on_rails-ca98c7c130f0/lib/apn_on_rails/app/models/apn/app.rb:22:in `send_notifications'
    /Users/azcoov/.bundler/ruby/1.8/apn_on_rails-ca98c7c130f0/lib/apn_on_rails/app/models/apn/app.rb:32:in `send_notifications'
    /Users/azcoov/.bundler/ruby/1.8/apn_on_rails-ca98c7c130f0/lib/apn_on_rails/app/models/apn/app.rb:31:in `each'
    /Users/azcoov/.bundler/ruby/1.8/apn_on_rails-ca98c7c130f0/lib/apn_on_rails/app/models/apn/app.rb:31:in `send_notifications'
    /Users/azcoov/.bundler/ruby/1.8/apn_on_rails-ca98c7c130f0/lib/apn_on_rails/rails/../tasks/apn.rake:7
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `execute'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
    /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `top_level'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `run'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
    /Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/bin/rake:33
    /usr/bin/rake:19:in `load'
    /usr/bin/rake:19
    Tasks: TOP => apn:notifications:deliver 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T01:20:47.340

您使用哪个版本的 Rails？我也遇到了这个问题。我的 Rails 知识不是很深，但问题似乎是 RAILS_* 环境变量的弃用。我使用 Rails 3.1.0，但没有：

```
RAILS_ROOT/ENV/blah 
```

在我的环境中。相反，我有：

```
Rails.root/env/blah 
```

当我在 app/models/apn/app.rb 中用 Rails.env 替换 RAILS_ENV 时，问题就消失了。

那么，这个 gem 是否与 Rails 3.1.0 兼容？似乎没有。是否有允许其在生产环境中使用的解决方法？也许在某处定义：

```
APN::App::RAILS_ENV = Rails.env 
```

但是哪里？

更新：

我在这里使用了 garyfoster 描述的解决方法：[https](https://github.com/PRX/apn_on_rails/issues/53) ://github.com/PRX/apn_on_rails/issues/53 。

总结起来就是三点：

1) 将此 ghetto hack 添加到您的 config/environment.rb 文件中：

```
APN::App::RAILS_ENV = Rails.env 
```

2) 在 APN::App 表中插入您的证书。我为此写了一个一次性的 rake 任务：

```
task :init_apn_certs => [:environment] do # NOTE: One-time task...
  print "Creating APN::App with certs..."
  app = APN::App.create(:apn_dev_cert => Rails.root.join('config', 'apple_push_notification_development.pem').read,
                        :apn_prod_cert => Rails.root.join('config', 'apple_push_notification_production.pem').read)
  puts (app.valid? ? "done" : "failed")
end 
```

3) 编写您自己的绕过 APN::App.send_notifications 方法的 rake 任务，因为这会引发另一个错误（关于 '/config/apple_push_notification_development.pem' 的内容不存在）。我的代码：

```
task :deliver_notifications => [:environment] do
  print "Delivering APNs for app ids..."
  apps = APN::App.all
  apps.each do |app|
    app.send_notifications
    print app.id.to_s + "..."
  end
  puts "done."
end 
```

或者，如果您只有一个应用程序，您可以这样做并完成它：

```
task :deliver_notifications => [:environment] do
  APN::App.first.send_notifications
end 
```

免责声明：我尚未在 Staging 和 Production 上对此进行测试（将在本周末进行），但我认为它没有理由不工作。

# iphone - Xcode 为所有视图动态加载的 GUI

> ID：11533535
> 
> 赞同：1
> 
> 时间：2012-07-18T02:34:29.553
> 
> 标签：iphone, objective-c, xcode, cocoa

我对 Xcode 和 Objective C 相当陌生。

我已经成功地在我的一个视图上动态加载了所有 GUI 对象。

现在我想在我的所有或大部分视图上重复相同的动态加载内容..

我在主视图中有一个方法，如下所示：

```
-(void)loadinfo:(id)sender{
//All dynamically loaded content etc..
} 
```

我目前有像这样调用这个方法的主视图。

```
[self loadinfo]; 
```

所以现在我需要知道（无需将方法复制并粘贴到我的所有视图中）如何将方法从主视图调用到其他视图中？

我希望这一切都有意义。

**编辑**

我对 PHP 的了解更多，所以如果我要在 php 中做同样的事情，我会创建一个名为 functions.php 的文件并将该文件包含到所有页面中。它是同一个概念吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:49:11.973

您应该对包含所有动态加载的 UI 内容的视图进行子类化。因此，如果您有：

```
@interface MyCustomView : UIViewController 
{

}

@property (strong, nonatomic) UIView *aView;

-(void)someMethod;

@end 
```

您可以创建一个继承所有属性、方法等的子类：

```
@interface FirstView : MyCustomView 
{

}

//all properties and methods of MyCustomView are inherited

@end 
```

对要创建的任意数量的视图执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:30:45.397

这个概念与您在 PHP 中使用函数发现的方法不同。在 Objective C 中，人们使用对象。要在对象之间共享行为（您的 PHP 函数，在 Objective C 中称为方法），您需要将该行为插入到类层次结构中的某个位置。

因此，对于您的特定情况，您将在泛型类中实现该`loadinfo`方法，该泛型类是 的子类`NSView`，例如`MyGenericView`。然后，您的类`view1`和`view2`类都将从该泛型类继承并继承该`loadinfo`方法。

如果您想从基类中的实现转移`loadinfo`，您可以通过执行（在 view1 或 view2 中）部分覆盖它：

```
- (void) loadview {
  [super loadview]; // perform the default implementation
  [self doSomethingDifferint]; // perform subclass specific stuff
} 
```

... 或者：

```
- (void) loadview {
  [self doSomethingDifferint]; // perform subclass specific stuff
  [super loadview]; // perform the default implementation
} 
```

...或通过执行以下操作完全覆盖：

```
- (void) loadview {
  [self doSomethingCompletelyDifferent]; // perform subclass specific stuff
} 
```

顺便说一句：在Objective C中命名你的类和方法时遵循CamelCase标准是一种很好的做法，所以你的类是`View1`and`View2`方法是`loadInfo`.

此外，您可能希望[阅读通用 OO 原则和 Objective C](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)的特定方面，以充分利用该语言及其特性。

# sql - 我想使用 sql server 2005 在表中插入多行

> ID：11533537
> 
> 赞同：1
> 
> 时间：2012-07-18T02:34:34.753
> 
> 标签：sql

我想将行插入四列表中。我在前两列中插入了行。但是，当我尝试添加到第三和第四列时，我收到以下错误，

> “消息 8152，级别 16，状态 4，第 1 行字符串或二进制数据将被截断。语句已终止”

我正在使用以下查询：

```
USE DB
GO
INSERT INTO dbo.Table (Column1, Column2, Column3,Column4)
VALUES ('data','data','data','data') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:36:49.840

检查您的字符串之一是否超过数据字段的长度。例如，如果您将长度为 50 的字符串插入 varchar(20)，您将收到此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:36:51.283

您收到该错误是因为您的列无法存储那么大的值。您需要缩短插入字符串的长度或增加列结构的长度。

# coded-ui-tests - 在编码的 UI 测试中使用 XPath 匹配元素

> ID：11533538
> 
> 赞同：0
> 
> 时间：2012-07-18T02:34:47.923
> 
> 标签：coded-ui-tests

这是一个愚蠢的问题，但我开始使用 MS 编码 UI 测试。我想知道是否有一种方法可以使用 XPath 而不是默认匹配机制来查找页面元素？我想要做的是匹配父元素并以编程方式向下导航 DOM 树以获取我想要使用的元素。这可以使用 Selenium 轻松完成，但我不确定如何使用 Coded UI Tests 来完成。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:10:07.393

您应该能够`xpath`使用`UITestControlCollection`. 使用 CodedUI 的记录器进入顶级控件，然后使用`GetChildren`导航您的方式。请记住，`xpath`由于所有对象类型都相似，因此 CodedUI 的 API 不区分这些更改。

例子：

```
HtmlDocument doc = this.UIYourWindowName.UIYourDocumentName; // mapped control
doc.Find();
UITestControl toline = new UITestControl(doc);
toline.SearchProperties["Id"] = "to_d"; // use the id of the top most control
UITestControlCollection toline1 = toline.GetChildren(); // get the child objects

toline1 = toline1[0].GetChildren(); // xpath: \\ctrl[@id='to_d']\item[0]
toline1 = toline1[0].GetChildren(); // ctrl[]\item[0]\item[0]
// and so on... 
```

# jquery - Twitter Bootstrap 向 li 添加活动类

> ID：11533542
> 
> 赞同：58
> 
> 时间：2012-07-18T02:35:58.130
> 
> 标签：jquery, menu, twitter-bootstrap

使用 twitter 引导程序，我需要将活动类启动到主导航的 li 部分。自动。我们使用 php 而不是 ruby​​。

示例导航：

```
<ul class="nav">
    <li><a href="/">Home</a></li>
    <li><a href="/forums">Forums</a></li>
    <li><a href="/blog">Blog</a></li>
    <li><a href="/faqs.php">FAQ's</a></li>
    <li><a href="/item.php">Item</a></li>
    <li><a href="/create.php">Create</a></li>
</ul> 
```

引导代码如下：

```
<li class="active"><a href="/">Home</a></li> 
```

所以只需要弄清楚如何将活动的类附加到当前页面。几乎查看了 Stack 上的所有答案，但没有真正的快乐。

我玩过这个：

```
/*menu handler*/
$(function(){
    var url = window.location.pathname;  
    var activePage = url.substring(url.lastIndexOf('/')+1);
    $('.nav li a').each(function(){  
        var currentPage = this.href.substring(this.href.lastIndexOf('/')+1);

        if (activePage == currentPage) {
            $(this).parent().addClass('active'); 
        } 
    });
}) 
```

但没有喜悦。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-10-18T08:48:54.273

**对于引导程序 3：**

```
var url = window.location;
// Will only work if string in href matches with location
$('ul.nav a[href="'+ url +'"]').parent().addClass('active');

// Will also work for relative and absolute hrefs
$('ul.nav a').filter(function() {
    return this.href == url;
}).parent().addClass('active'); 
```

# 更新

**对于引导程序 4：**

```
var url = window.location;
// Will only work if string in href matches with location
$('ul.navbar-nav a[href="'+ url +'"]').parent().addClass('active');

// Will also work for relative and absolute hrefs
$('ul.navbar-nav a').filter(function() {
    return this.href == url;
}).parent().addClass('active'); 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-07-18T10:32:57.333

我们最终设法解决了：

```
/*menu handler*/
$(function(){
  function stripTrailingSlash(str) {
    if(str.substr(-1) == '/') {
      return str.substr(0, str.length - 1);
    }
    return str;
  }

  var url = window.location.pathname;  
  var activePage = stripTrailingSlash(url);

  $('.nav li a').each(function(){  
    var currentPage = stripTrailingSlash($(this).attr('href'));

    if (activePage == currentPage) {
      $(this).parent().addClass('active'); 
    } 
  });
}); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-05-16T20:44:57.880

你真的不需要任何带有 Bootstrap 的 JavaScript：

```
 <ul class="nav">
     <li><a data-target="#" data-toggle="pill" href="#accounts">Accounts</a></li>
     <li><a data-target="#" data-toggle="pill" href="#users">Users</a></li>
 </ul> 
```

要在选择菜单项后执行更多任务，您需要 JS，如此处其他帖子所述。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-02-12T21:02:41.890

如果你把

```
data-toggle="pill" 
```

在标签中它应该自动工作。

[http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

在标记下阅读

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-04-28T17:06:47.147

这为我完成了工作，包括活动的主要下拉菜单**和活动的孩子**（感谢 422）：

```
$(document).ready(function () {
    var url = window.location;
    // Will only work if string in href matches with location
    $('ul.nav a[href="' + url + '"]').parent().addClass('active');

    // Will also work for relative and absolute hrefs
    $('ul.nav a').filter(function () {
        return this.href == url;
    }).parent().addClass('active').parent().parent().addClass('active');
}); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-06-26T13:45:29.193

如果您使用带有路由和操作的 MVC 框架：

```
$(document).ready(function () {
    $('a[href="' + this.location.pathname + '"]').parent().addClass('active');
}); 
```

正如 Christian Landgren 的回答所示： [https ://stackoverflow.com/a/13375529/101662](https://stackoverflow.com/a/13375529/101662)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-12-26T06:57:01.173

试试这个。

```
// Remove active for all items.
$('.page-sidebar-menu li').removeClass('active');

// highlight submenu item
$('li a[href="' + this.location.pathname + '"]').parent().addClass('active');

// Highlight parent menu item.
$('ul a[href="' + this.location.pathname + '"]').parents('li').addClass('active'); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-10-08T11:40:54.367

这对我来说很好。它将简单的导航元素和下拉导航元素标记为活动的。

```
$(document).ready(function () {
   var url = window.location;

   $('ul.nav a[href="' + this.location.pathname + '"]').parent().addClass('active');

   $('ul.nav a').filter(function() {
      return this.href == url;
   }).parent().parent().parent().addClass('active');
}); 
```

传递`this.location.pathname`给 `$('ul.nav a[href="'...'"]')`标记也是简单的导航元素。传球`url`对我不起作用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-09-24T21:30:09.593

以防万一您在 Angulajs 中使用 Boostrap：这是一个对我有用的简单指令（因为 Kam 引用的数据切换不包含在 Angular-ui 中）。希望能有所帮助。

```
app.directive("myDataToggle", function(){
    function link(scope, element, attrs) {
        var e = angular.element(element);
        e.on('click', function(){
            e.parent().parent().children().removeClass('active');
            e.parent().addClass("active");
        })
    }
    return {
        restrict: 'A',
        link: link
    };
}); 
```

* * *

```
<ul class="nav nav-sidebar">
    <li><a href="#/page1" my-data-toggle>Page1</a></li>
    <li><a href="#/page2" my-data-toggle>Page2</a></li>
    <li><a href="#/page3" my-data-toggle>Page3</a></li>
</ul> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-03-08T19:11:23.923

解决方案很简单，不需要服务器端或ajax，只需要jQuery和Bootstrap。在每个页面上添加一个`id`标签`body`。使用它`id`来查找包含页面名称（标签的值）的标签。

例子：

**page1.html**

```
<body id="page1">
    <ul class="nav navbar-nav">
        <li><a href="page1.html">Page1</a></li>
        <li><a href="page2.html">Page2</a></li>
    </ul>
    <script src="script.js"></script>
</body> 
```

**page2.html**

```
<body id="page2">
    <ul class="nav navbar-nav">
        <li><a href="page1.html">Page1</a></li>
        <li><a href="page2.html">Page2</a></li>
    </ul>
    <script src="script.js"></script>
</body> 
```

**脚本.js**

```
<script>
    $(function () {
        $("#page1 a:contains('Page1')").parent().addClass('active');
        $("#page2 a:contains('Page2')").parent().addClass('active');
     });
</script> 
```

非常感谢本！[YouTube](https://www.youtube.com/watch?v=lx0IysyYLH0)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-09-25T17:36:35.847

在引导程序 4 的一些罕见情况下，接受的答案存在问题：为了将解决方案用于相对路径，例如：

```
<ul class="navbar-nav nav-t">
   <li class="nav-item"><a href="index.php" class="nav-link">Home</a></li>
   <li class="nav-item"><a href="about.php" class="nav-link">About</a></li>
   <li class="nav-item"><a href="blog.php" class="nav-link">Blog</a></li>
   <li class="nav-item"><a href="info.php" class="nav-link">Info</a></li>
</ul> 
```

然后你会发现代码：

```
 if (activePage == currentPage) {
      $(this).parent().addClass('active'); 
    } 
```

活动页面返回整个 url，当前位置返回当前 href DOM 元素值，即 filename.php。为了解决这个问题，只需通过添加一个方法来纠正这个问题，稍微调整一下代码：

```
//... other js/jquery code
var activeMenuItemChanges=function () {
    function stripTrailingSlash(str) {
        if(str.substr(-1)=='/'){
            return str.substr(0, str.length -1);
        }
        return str;
    }
    // for cases where we do not use full url but relative file names in the href of ul>li>a tags:
    function getRelativeFileName(str){
        let page=str.substr(str.lastIndexOf('/')+1);
        if(page.length > 0){
            return page;
        }
        return 'index'|'index.php';
    }

    let url=window.location.pathname;

    let activeLocation=stripTrailingSlash(url);

    let activeFileName=getRelativeFileName(activeLocation);

    $('.nav-item a').each(function() {
        let currentLocation=stripTrailingSlash($(this).attr('href'));
        if(activeFileName==currentLocation){
            $(this).parent().addClass('active');
        }
    });
}
activeMenuItemChanges();

//... other js/jquery code 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-07-18T07:05:29.483

这是完整的 Twitter 引导示例和基于查询字符串应用的活动类。

要获得正确的解决方案，需要遵循几个步骤：

1) 包括最新的 jquery.js 和 bootstrap.js javascript 文件。

2) 包含最新的 bootstrap.css 文件

3) 包含 querystring-0.9.0.js 用于在 js 中获取查询字符串变量值。

4）HTML：

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav">
        <li class="active">
          <a href="#?page=0">
            Home
          </a>
        </li>
        <li>
          <a href="#?page=1">
            Forums
          </a>
        </li>
        <li>
          <a href="#?page=2">
            Blog
          </a>
        </li>
        <li>
          <a href="#?page=3">
            FAQ's
          </a>
        </li>
        <li>
          <a href="#?page=4">
            Item
          </a>
        </li>
        <li>
          <a href="#?page=5">
            Create
          </a>
        </li>
      </ul>
    </div>
  </div>
</div> 
```

脚本标签中的 JQuery：

```
$(function() {
    $(".nav li").click(function() {
        $(".nav li").removeClass('active');
        setTimeout(function() {
            var page = $.QueryString("page");
            $(".nav li:eq(" + page + ")").addClass("active");
        }, 300);

    });
}); 
```

我已经完成了完整的 bin，所以请点击这里[http://codebins.com/bin/4ldqpaf](http://codebins.com/bin/4ldqpaf)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-01-25T02:28:31.407

这些都不适合我。我的 Bootstrap 设置导航到单独的页面（因此我无法在单击操作上执行此操作，但在导航到新页面时会删除活动类），并且我的 url 不完全匹配。所以这就是我所做的，基于我基于异常的情况。希望它可以帮助其他人：

```
//Adding the active class to Twitter bootstrap navs, with a few alternate approaches

$(document).ready(function() {
  var rawhref = window.location.href; //raw current url 
  var newpage = ((window.location.href.match(/([^\/]*)\/?$/)[1]).substring(1)); //take only the last part of the url, and chop off the first char (substring), since the contains method below is case-sensitive. Don't need to do this if they match exactly.
  if (newpage == 'someNonMatchingURL') {  //deal with an exception literally
    newpage = 'matchingNavbarText'
    }
  if (rawhref.indexOf('somePartofURL') != -1) { //look for a consistent part of the path in the raw url to deal with variable urls, etc.
    newpage = "moreMatchingNavbarText"
    }
  $(".nav li a:contains('" + newpage + "')").parent().addClass('active'); //add the active class. Note that the contains method requires the goofy quote syntax to insert a variable.

}); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-19T15:37:57.950

要激活菜单和子菜单，即使 URL 中有参数，请使用以下代码：

```
// Highlight the active menu
$(document).ready(function () {
    var action = window.location.pathname.split('/')[1];

    // If there's no action, highlight the first menu item
    if (action == "") {
        $('ul.nav li:first').addClass('active');
    } else {
        // Highlight current menu
        $('ul.nav a[href="/' + action + '"]').parent().addClass('active');

        // Highlight parent menu item
        $('ul.nav a[href="/' + action + '"]').parents('li').addClass('active');
    }
}); 
```

这接受如下 URL：

> /posts
> /posts/1
> /posts/1/编辑

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-08-29T10:17:03.407

我遇到了同样的问题，这是我在我的应用程序启动脚本中添加的，并且运行顺利。这是javascript

```
$(document).ready(function($){
  var navs = $('nav > ul.nav');

  // Add class .active to current link
  navs.find('a').each(function(){

    var cUrl = String(window.location).split('?')[0];
    if (cUrl.substr(cUrl.length - 1) === '#') {
      cUrl = cUrl.slice(0,-1);
    }

    if ($($(this))[0].href===cUrl) {
      $(this).addClass('active');

      $(this).parents('ul').add(this).each(function(){
        $(this).parent().addClass('open');
      });
    }
  });
}); 
```

对应的 HTML 如下所示。我正在使用[CoreUI](http://coreui.io/)，这是一个出色的开源管理模板，并且支持许多前端框架，如 Angular、plain bootstrap、Angular 4 等。

```
<div class="sidebar">
<nav class="sidebar-nav open" >
    <ul class="nav" id="navTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link"    href="/summary"><i class="icon-speedometer"></i> Dashboard </a>
        </li>
        <li class="nav-item">
            <a class="nav-link"    href="/balanceSheet"><i class="icon-chart"></i> Balance Sheet </a>
        </li>
        <li class="divider"></li>
        <li class="nav-title border-bottom">
            <p class="h5 mb-0">
                <i class="icon-graph"></i> Assets
            </p>
        </li>
     </ul>
  </nav>
</div> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-02-27T11:52:06.433

```
$(function() {
// Highlight the active nav link.
var url = window.location.pathname;
var filename = url.substr(url.lastIndexOf('/') + 1);
$('.navbar a[href$="' + filename + '"]').parent().addClass("active"); 
```

});

更多详情请[点击这里！](https://gist.github.com/mattnorris/5114074)

# fork - 调用 pcntl_fork 两次导致 PHP CGI 死循环

> ID：11533546
> 
> 赞同：2
> 
> 时间：2012-07-18T02:36:38.913
> 
> 标签：fork, php

```
function spawn($exec, $args = array()) {
$pid = pcntl_fork();
if ($pid < 0)
    return false;
else if ($pid == 0) {
    $ppid = getmypid();
    $pid = pcntl_fork();
    if ($pid < 0)
        file_put_contents('/tmp/error.log', "fork failed: ${cmd} ". implode(' ', $args). "\n");
    else if ($pid == 0) {
        pcntl_waitpid($ppid, $status);
        pcntl_exec($exec, $args);
    }
    else
        exit(0);
    }
} 
```

这在 CLI 模式下运行良好。但是对于 php-fpm，它会导致调用者死循环，然后超时。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:50:15.460

它不起作用，因为`exit()`在 FPM 下调用不会导致父进程退出——它只是让它清理请求，然后返回到可用工作进程池。由于它从未真正退出，因此`pcntl_waitpid`最终会永远等待。

正如 Roman Newaza 所指出的，您应该真正避免使用`pcntl`FPM 下的函数（以及通常在 CLI 之外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:41:49.300

不应在 Web 服务器环境中启用流程控制，如果在 Web 服务器环境中使用任何流程控制功能，可能会出现意外结果：[PCNTL/Introduction](http://www.php.net/manual/en/intro.pcntl.php)

# scala - Scala 解析器组合器的运算符优先级

> ID：11533547
> 
> 赞同：8
> 
> 时间：2012-07-18T02:36:40.780
> 
> 标签：scala, functional-programming, parser-combinators

我正在研究需要考虑运算符优先级的解析逻辑。我的需求并不太复杂。首先，我需要乘法和除法的优先级高于加法和减法。

例如：1 + 2 * 3 应该被视为 1 + (2 * 3)。这是一个简单的例子，但你明白了！

[我需要将更多自定义标记添加到优先逻辑中，我可以根据我在此处收到的建议添加这些标记。]

这是处理运算符优先级的一个示例：http: [//jim-mcbeath.blogspot.com/2008/09/scala-parser-combinators.html#precedencerevisited](http://jim-mcbeath.blogspot.com/2008/09/scala-parser-combinators.html#precedencerevisited)。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T03:17:39.527

这比 Jim McBeath 的示例要简单一些，但它可以满足您的需求，即正确的算术优先级，并且还允许使用括号。我改编了*Programming in Scala*中的示例，以使其实际进行计算并提供答案。

这应该是不言自明的。有一个层次结构是`expr`由`terms`散布的运算符`terms`组成，由运算符组成`factors`，并且`factors`是浮点数或括号中的表达式。

```
import scala.util.parsing.combinator.JavaTokenParsers

class Arith extends JavaTokenParsers {

  type D = Double

  def expr:   Parser[D]    = term ~ rep(plus | minus)     ^^ {case a~b => (a /: b)((acc,f) => f(acc))} 
  def plus:   Parser[D=>D] = "+" ~ term                   ^^ {case "+"~b => _ + b}
  def minus:  Parser[D=>D] = "-" ~ term                   ^^ {case "-"~b => _ - b}
  def term:   Parser[D]    = factor ~ rep(times | divide) ^^ {case a~b => (a /: b)((acc,f) => f(acc))}
  def times:  Parser[D=>D] = "*" ~ factor                 ^^ {case "*"~b => _ * b }
  def divide: Parser[D=>D] = "/" ~ factor                 ^^ {case "/"~b => _ / b} 
  def factor: Parser[D]    = fpn | "(" ~> expr <~ ")" 
  def fpn:    Parser[D]    = floatingPointNumber          ^^ (_.toDouble)

}

object Main extends Arith with App {
  val input = "(1 + 2 * 3 + 9) * 2 + 1"
  println(parseAll(expr, input).get) // prints 33.0
} 
```

# ssh - 当有人通过 SSH 连接到我的服务器时，我如何设置通知？

> ID：11533552
> 
> 赞同：0
> 
> 时间：2012-07-18T02:36:52.850
> 
> 标签：ssh, notifications

当有人通过 SSH 连接到我的服务器时，是否可以设置通知，即以电子邮件的形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:46:57.750

您可以使用[Fail2ban](http://www.fail2ban.org/wiki/index.php/Main_Page)来执行此操作。

Fail2ban 旨在扫描日志文件（例如 sshd 日志和 httpd 日志），然后禁止出现恶意行为的 IP 地址。但是，您可以重新配置它以检测成功登录，然后通过电子邮件发送给您。

# java - 使用http代理服务器时如何获取数据包传输时间？

> ID：11533555
> 
> 赞同：0
> 
> 时间：2012-07-18T02:36:56.227
> 
> 标签：java, networking, social-networking

例如，目标http服务器是A，代理服​​务器（http）是B。直接从我的机器上获取到A的响应时间很容易。但是在使用代理服务器 B 时如何获取旅行时间？这意味着旅行时间包括从我的机器到 B PLUS 代理服务器 B 到 A。我不知道如何做最后一部分，即“代理服务器 B 到 A”。

我打算用Java来解决这个问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:00:22.427

为什么不通过代理向 A 发出请求？即代理的正常使用。那么 RTT 大概包括客户端 <-> B 和 B <-> A 腿。当然，代理可能正在缓存，在这种情况下你只是计时客户端<-> B，但这不是你想要的吗？

# html - HTML5 Video.js 播放视频太快

> ID：11533557
> 
> 赞同：0
> 
> 时间：2012-07-18T02:37:04.700
> 
> 标签：html, video, video.js

我正在使用 video.js 嵌入带有 HTML5 的视频，而视频播放速度太快了。我按下播放按钮，我可以看出它至少是正确速度的 1.5 倍。

有任何想法吗？

**编辑：**对不起！没有代码。干得好。顺便说一句，它是从 videojs.com 本身复制的。

```
<video class="video-js vjs-default-skin" controls
    preload="auto" data-setup="{}">
    <source src="http://foo.bar/wp-content/uploads/date/video.mp4" type='video/mp4'>
</video> 
```

暂时没有 webm 视频，我会在稍后将 mp4 转换为该视频。

另外，我在 WP 中使用它；管理员发布我们上传的视频。未定义视频宽度、高度、海报或 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:07:33.167

很可能您的视频未正确编码以与网络浏览器兼容。

*   您最初是如何获得视频文件的

*   它在哪里工作

*   你是如何为网络预处理的

# ios - 带有可以提取图像的 RSS 提要的 iOS 应用程序

> ID：11533562
> 
> 赞同：0
> 
> 时间：2012-07-18T02:38:09.823
> 
> 标签：ios, uitableview, rss-reader

应用程序是否可以添加 RSS 提要并同时查看该链接以在表格视图上显示某些图像？我已经看到在表格视图上仅显示文本的应用程序是否可以从该提要中添加图像作为显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T02:53:16.930

在[如何为新闻提要应用程序获取图像方面](https://stackoverflow.com/questions/11532740/how-to-get-images-for-news-feed-app)，chandhooguy 建议查看[iPhone RSS 阅读器应用程序](http://www.imthi.com/blog/programming/iphone-rss-reader-application-with-source-code.php)。看起来像在细节屏幕上抓取图像。让我印象深刻的是，在 tableview 上显示并不难，虽然我还没有完成那个代码，所以我可以说。

# html - 网站标题导航的 HTML/CSS 是什么，即使在滚动时也始终保持在顶部？

> ID：11533566
> 
> 赞同：1
> 
> 时间：2012-07-18T02:38:50.003
> 
> 标签：html, css, header

> **可能重复：**
> [如何在滚动页面时使 Div 上下移动？](https://stackoverflow.com/questions/1638895/how-do-i-make-a-div-move-up-and-down-while-scrolling-the-page)

我想做一个 100% 宽度的标题导航，即使用户垂直滚动，它也能保持锚定在网站的顶部。有点像这个网站：

[http://www.hollencrest.com/](http://www.hollencrest.com/)

我会用谷歌搜索，但我想不出正确的术语。

那么最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T02:41:09.877

只需将标题的位置设置为固定：

```
header {
    position: fixed;
    top: 0; left:0; right: 0;
} 
```

这是小提琴：http: [//jsfiddle.net/M9RHn/](http://jsfiddle.net/M9RHn/)

* * *

**PS**记得从顶部偏移你的页面内容，这样在用户开始滚动之前页眉不会覆盖任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T04:59:39.183

在头类中添加这些属性

.header {位置：固定；顶部：0；z指数：99；宽度：100%；}

# arrays - 在 CoffeeScript 中获取数组的第一个和最后一个元素

> ID：11533569
> 
> 赞同：27
> 
> 时间：2012-07-18T02:39:25.733
> 
> 标签：arrays, coffeescript

如果说我有一个数组，我会遍历数组，但对第一个和最后一个元素做一些不同的事情。我该怎么做？

以下面的代码为例，如何提醒元素*a*和*e*？

```
array = [a,b,c,d,e]
for element in array
  console.log(element) 
```

谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-07-18T03:03:23.970

您可以使用带有 splat的数组[解构](http://coffeescript.org/#destructuring)来检索第一个和最后一个元素：

```
[first, ..., last] = array 
```

CoffeeScript >= 1.7.0 支持这种 splat 用法。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-18T03:11:05.353

访问数组的第一个和最后一个元素的原始方式与 JS 中的相同：使用索引`0`和`length - 1`：

```
console.log array[0], array[array.length - 1] 
```

CoffeeScript 让您可以编写一些不错的数组解构表达式：

```
[first, mid..., last] = array
console.log first, last 
```

但如果你不打算使用中间元素，我认为这是不值得的。

Underscore.js 有一些帮助器[`first`](http://underscorejs.org/#first)和[`last`](http://underscorejs.org/#last)方法可以使它更像英语（我不想使用“不言自明”这个短语，因为我认为任何程序员都会理解数组索引）。`Array`如果您不想使用 Underscore 并且不介意污染全局命名空间（这是其他库，如[Sugar.js](http://sugarjs.com/api)所做的），它们很容易添加到对象中：

```
Array::first ?= (n) ->
  if n? then @[0...(Math.max 0, n)] else @[0]

Array::last ?= (n) ->
  if n? then @[(Math.max @length - n, 0)...] else @[@length - 1]

console.log array.first(), array.last() 
```

**更新**

此函数还允许您获取数组中的第*n个或最后一个元素。*如果您不需要该功能，那么实现会简单得多（`else`基本上只是分支）。

**更新 2**

CoffeeScript [>= 1.7](http://coffeescript.org/#changelog)允许您编写：

```
[first, ..., last] = array 
```

无需使用中间元素生成不必要的数组：D

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-18T09:56:06.187

最短的方法在这里
`array[-1..]`
查看此线程
[https://github.com/jashkenas/coffee-script/issues/156](https://github.com/jashkenas/coffee-script/issues/156)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-01-15T14:46:56.187

您可以只使用：

```
[..., last] = array 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-14T08:29:58.380

您可以使用`slice`获取**最后一个元素**。在 javascript 中，`slice`可以将负数（如 -1）作为参数传递。

例如：

```
array = [1, 2, 3 ]
console.log "first: #{array[0]}"
console.log "last: #{array[-1..][0]}" 
```

编译成

```
var array;
array = [1, 2, 3];
console.log("first: " + array[0]);
console.log("last: " + array.slice(-1)[0]); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-18T03:14:19.180

使用 Coffeescript 的 遍历数组时，您可以获取当前的`element`和。请参阅以下代码，将and替换为您的代码。`index``element``for...in``special_process_for_element``normal_process_for_element`

```
array = [a, b, c, d]
FIRST_INDEX = 0
LAST_INDEX = array.length - 1

for element, index in array
    switch index
        when FIRST_INDEX, LAST_INDEX
            special_process_for_element
        else
            normal_process_for_element 
```

[样本](http://coffeescript.org/#try%3aarray%20%3D%20%5Ba%2C%20b%2C%20c%2C%20d%5D%0AFIRST_INDEX%20%3D%200%0ALAST_INDEX%20%3D%20array.length%20-%201%0A%0Afor%20element%2C%20index%20in%20array%0A%20%20%20%20switch%20index%0A%20%20%20%20%20%20%20%20when%20FIRST_INDEX%2C%20LAST_INDEX%0A%20%20%20%20%20%20%20%20%20%20%20%20special_process_for_element%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20normal_process_for_element)

这是一个[工作代码](http://coffeescript.org/#try%3aarray%20%3D%20%5B%27a%27%2C%20%27b%27%2C%20%27c%27%2C%20%27d%27%2C%20%27e%27%5D%0AFIRST_INDEX%20%3D%200%0ALAST_INDEX%20%3D%20array.length%20-%201%0A%0Afor%20element%2C%20index%20in%20array%0A%20%20%20%20switch%20index%0A%20%20%20%20%20%20%20%20when%20FIRST_INDEX%2C%20LAST_INDEX%0A%20%20%20%20%20%20%20%20%20%20%20%20alert%20%22special%20%23%7Belement%7D%22%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20alert%20%22normal%20%23%7Belement%7D%22%0A)

# javascript - 乘数值

> ID：11533571
> 
> 赞同：0
> 
> 时间：2012-07-18T02:39:27.083
> 
> 标签：javascript, jquery, html

我使用以下方法来添加文本框。我尝试过更改多项内容，但似乎无法将两个文本框值相乘！基本我想要 2 个文本框，将值相乘并显示在第三个文本框中。我希望这个值在数字变化时是流动的，也就是变化！我正在使用这段代码，因为我可能会乘以不止一个，但如果这太麻烦了，我会一次只乘两个

我用来添加的代码是

```
 <!--adding script #-->    
 <script>

$(document).ready(function(){
    calculateSum();

    //iterate through each textboxes and add keyup
    //handler to trigger sum event

    $(".txt").each(function() {

        $(this).keyup(function(){
            calculateSum();
        });
    });

});

function calculateSum() {

    var sum = 0;

    $("#sum").val(sum.toFixed(2));
    //iterate through each textboxes and add the values
    $(".txt").each(function() {

        //add only if the value is number
        if(!isNaN(this.value) && this.value.length!=0) {

            sum += parseFloat(this.value);
        }

    });
    //.toFixed() method will roundoff the final sum to 2 decimal places
    $("#sum").html(sum.toFixed(2));

      var total = document.getElementById("subtotal").value == "";
     var total = document.getElementById("subtotal").value = sum;
             }
    <!--END adding script #--> 
```

我尝试将最后一行设置为

```
 var times1 = document.getElementById(subtotal);
      var times2 = document.getElementById(tax);
  var equal = times1.value * times2.value; 
```

然后改变 var total1 = document.getElementById("total1").value = sum9; 到 var total1 = document.getElementById("total1").value = equal;

文本框 id 是小计，我试图更新的框是 total1。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:35:09.347

在每个 keyup 上，与其获取所有值并显式添加它们，不如减去相应输入的先前值并将当前更新的值添加到 sum..

此外，如果正确计算了小计，那么您所做的乘法运算应该可以正常工作。

请找到下面的 jsfiddle，其中的总和是按照上面解释的方式计算的，以及乘以税..

[http://jsfiddle.net/tgvrs_santhosh/77uxK/1/](http://jsfiddle.net/tgvrs_santhosh/77uxK/1/)

让我知道你是否仍然面临这个问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:57:16.697

而不是这个

`if(!isNaN(this.value) && this.value.length!=0) {`

我认为正则表达式可能会更好，因为您使用的是字符串值

`if (/^([-]?((\d+)|(\d+\.\d+)|(\.\d+)))$/.test(this.value)) {`

我还没有测试过这个正则表达式，但是如果这个正则表达式由于某种原因不起作用，你应该能够找到一个好的正则表达式来测试有效数字。我还注意到你`==`在那之后有一个`getElementById`。

我不完全确定这很重要，但你可以`sum += (this.value * 1)`代替 parseFloat。

**更新**

试试这个`var equal = ($("#subtotal").val() * 1) * ($("#tax").val() * 1);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:45:23.070

我发现您的问题非常令人困惑，但我*认为*您想说的是您想将所有`.txt`字段相加以获得小计，然后将该小计乘以税率以获得总计。如果是这样，那么由于您的计算方式，您已经知道小计是一个有效数字，那么：

```
var tax = +$("#tax").val(),          // get tax and convert to a number
    total = tax ? sum * tax : sum;   // if tax is a non-zero number multiply
                                     // otherwise just take the sum as is 
```

如果您的税款字段不是输入，请使用`.text()`而不是`.val()`.

您现有的代码比它需要的要复杂得多。你可以这样做：

```
$(document).ready(function(){
    calculateSum();
    // you don't need an .each() loop, you can bind a keyup handler
    // to all elements in the jQuery object in one step, and you don't
    // need the anonymous function since it does nothing but call calculateSum:
    $(".txt").keyup(calculateSum);
});

function calculateSum() {
    var sum = 0,
        val;

    //iterate through each textboxes and add the values
    $(".txt").each(function() {
        // you don't need to test for NaN: just attempt to convert this.value
        // to a number with the unary plus operator and if the result is not
        // a number the expression val = +this.value will be falsy
        if(val = +this.value)
            sum += val;
    });

    $("#sum").html(sum.toFixed(2));

    var tax = +$("#tax").val();
    $("#total1").html((tax ? sum * tax : sum).toFixed(2));
} 
```

出于某种原因，在我的答案中使用的[一元加号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)并不广为人知，但我更喜欢`parseFloat()`.

# algorithm - 给定一个数组，该数组包含除一个之外的所有元素三次。找到出现一次的元素。

> ID：11533572
> 
> 赞同：4
> 
> 时间：2012-07-18T02:39:28.597
> 
> 标签：algorithm

> **可能重复：**
> [在数组中查找特殊数字](https://stackoverflow.com/questions/5208343/find-a-special-number-in-an-array)

给定一个数组，该数组包含除一个之外的所有元素三次。找到出现一次的元素。时间复杂度-O(n)。空间复杂度-O(1)。

例如。ar[10]={1,2,1,2,5,5,5,7,1,2}。答案= 7。

# python - 迭代时更改列表

> ID：11533576
> 
> 赞同：1
> 
> 时间：2012-07-18T02:40:38.820
> 
> 标签：python

Python 菜鸟在这里。我有一个表示为字符串的数字列表。个位数用零表示，我正试图摆脱零。例如，['01', '21', '03'] 应该是 ['1', '21', '3']。

我目前的解决方案似乎有点笨拙：

```
for item in list:  
    if item[0] == '0':     
        list[list.index(item)] = item[1] 
```

我想知道为什么这不起作用：

```
for item in list:  
    if item[0] == '0':  
        item = item[1] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T02:41:26.583

重新绑定迭代名称不会改变列表。

还：

```
>>> [str(int(x, 10)) for x in ['01', '21', '03']]
['1', '21', '3'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T02:44:23.777

您可以尝试剥离零：

```
>>> map(lambda x: x.lstrip('0'), ['001', '002', '030'])
['1', '2', '30'] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-18T02:48:11.667

要改变列表：

```
for i, item in enumerate(mylist):  
    if item.startswith('0'):     
        mylist[i] = item[1:] 
```

更好的可能只是创建一个新列表：

```
new_list = [x.lstrip('0') for x in mylist] 
```

您的代码不起作用，因为分配给`item`仅给名称`item`一个新值，它对 . 的旧值没有任何作用`item`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T02:45:12.123

代码“item”是一个变量，它在您遍历列表时包含该项目的*值。*它没有引用列表本身。

您的第一个解决方案非常慢，因为它必须在列表中搜索每个项目才能找到索引。

有关如何完成所需内容的示例，请参阅其他答案。

# configuration - mercurial 别名：“选项 --config 可能不会缩写”错误

> ID：11533577
> 
> 赞同：5
> 
> 时间：2012-07-18T02:40:44.020
> 
> 标签：configuration, mercurial

我在我的 mercurial 配置中定义了以下别名。

```
[alias]
ci_s = ci --config phases.new-commit=secret 
```

当我执行命令`ci_s`时，我得到了错误：

> abort：选项 --config 不能缩写！

不确定是什么导致了错误。*我的猜测是new-commit*和*secret*之间的“=”符号。有没有办法让这个别名起作用？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T18:24:02.200

所以我从有用的 Mercurial IRC 那里得到了我的问题的解决方案。根据核心开发人员之一 mg 的说法，错误消息告诉我不能在别名中使用 --config。相反，我可以选择使用 shell 别名 ，`ci_s = !$HG ci --config...`这将使 Mercurial 产生一个新的子进程。由于提交过程很快，所以我认为生成新的子进程没有任何问题。

# android-widget - Android TextView 在 Android 4.0 上没有椭圆

> ID：11533579
> 
> 赞同：0
> 
> 时间：2012-07-18T02:40:51.923
> 
> 标签：android-widget, android-4.0-ice-cream-sandwich, textview, android

在我成为 iphone 开发人员之前，我是 Android 的新手。这些天我遇到了一个我无法弄清楚的问题。

在我的应用程序中，我对 TextView 进行了椭圆化，这样如果文本太大，它会在中间使用 android:ellipsize="middle" 显示...。

它在 Android 2.2 和 2.3 上运行良好。但在 android 4.0.4 上运行良好。我用的是三星GALAXY SIII。它只显示“。” 在中间。但是如果我在 Emulator 4.0.4 上运行该项目，它会运行良好。我很困惑。

人们都告诉我，当我将 singleLine 设置为 true 时它会很好地工作。但它仍然不起作用。

我的 *.xml 像这样，textView：

```
 android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="true"
    android:ellipsize="middle"
    android:text="@string/hello" /> 
```

string/hello=Hello World, TestTextActivity!justtestjusttestjusttestjusttestjusttestjusttestjusttestjusttestjusttestjusttest

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:49:05.670

```
Use This:-

 <TextView
        android:id="@+id/emailidedittextid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:freezesText="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:paddingLeft="6dp"
        android:paddingRight="15dip"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:text="START | lunch 20.00 | Dinner 60.00 | Travel 60.00 | Doctor 5000.00 | lunch 20.00 | Dinner 60.00 | Travel 60.00 | Doctor 5000.00 | END" >
    </TextView> 
```

# c - Prim 算法与优先队列实现

> ID：11533580
> 
> 赞同：2
> 
> 时间：2012-07-18T02:40:54.743
> 
> 标签：c, algorithm, graph-algorithm, priority-queue, prims-algorithm

```
void PrimMST(float A[GsizeSqr][GsizeSqr])
{
    int i, j, pCount, gs, row, ind, findN;
    gs = sqrt(GsizeSqr);
    pCount = 0;

    D_array MST; //MST contains the nodes of the MST and is initialized with the starting node
    initArr(&MST, 1);
    int p[GsizeSqr];
    float priority[GsizeSqr]; //priority contains weight(u, p[u])

    //Initialize p and priority with infinity and NULL values (note: -1 means null and 1000000 means inf)
    for(i=0; i < GsizeSqr; i++){
        p[i] = -1;
        priority[i] = 1000000;
    }

    PriorityQueue Q; //Initialize priority queue that stores (priority, key) values
    Q = init_heap(GsizeSqr);    
    for(i=0; i < gs; i++){ //Insert input adjacency matrix into priority queue
        for(j=0; j < gs; j++){
            node n;
            n = create_node(A[i][j], pCount++);
            enqueue(Q, n);          
        }
    }

    node start; //Select starting node and insert to MST
    start = create_node(0, 0);
    insArr(&MST, start);

    priority[0] = 0;

    while(Q->heap_size != 1){ //while Q not empty
        node u;
        u = dequeue(Q);
        if(p[u.key] != -1)
            insArr(&MST, u);

        row = ceil(u.key/gs);
        //For each adjacent node A[row][i]
        for(i=0; i < gs; i++){
            if(A[row][i] != 0.0){
                ind = i*gs + row; //Calculate index of adjacent node
                findN = find_node(Q, ind); //find and return index of adjacent node in queue

                if(findN != 0 && u.priority < Q->elements[findN].priority){
                    set_priority(Q, findN, u.priority);
                    p[findN] = u.key;                   
                }               
            }
        }
    }   
} 
```

我正在尝试使用类似于许多在线资源的伪代码使用优先级队列创建 Prim 算法的 C 实现。最终目标是（希望）一些漂亮的迷宫生成。我只是对实施的细节感到困惑。

输入：具有随机权重的邻接矩阵

期望输出：最小生成树的邻接矩阵

*编辑：添加了我的（不工作）尝试。我仍然得到一棵不正确的树，我不确定我哪里出错了。我想我会从对这段代码的另一组眼睛中受益。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:52:50.760

第一个问题：A 是包含 MST 边的集合。p[u] 表示当前哪个节点与u的边最小，也就是说，如果你有3条边（节点1，节点2，权重）（1,2,5），（1,3,4）， (1,4,10)，然后 p[1] = 3，现在 priority[1] 为 4。

第二个：不，节点在之后弹出`u := EXTRACT-MIN(Q);`，

# opencv - 姿态估计？

> ID：11533581
> 
> 赞同：1
> 
> 时间：2012-07-18T02:41:05.200
> 
> 标签：opencv, computer-vision

我目前正在研究从 2D 到 3D 点对应的姿势估计。二维点具有以下形式：

```
X: 2345.12  Y:1234.45 
```

3D 点具有以下形式：

```
X: 0.22218997762212644 Y: 0.78954199756837817 Z: 4.3359541556384427 
```

焦距和畸变系数为：

```
3870.2997285884562 -0.068235490696109416 0.021799724491707737 
```

我希望使用 4-5 个这样的对应关系并估计姿势。我将 openCV 用于预期目的。有人可以帮助我如何通过POSIT算法来做到这一点以及如何计算估计错误率吗？

任何指导将不胜感激。. . . .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T05:49:51.083

听起来 cv::solvePnP 是您正在寻找的功能......

[OpenCV 文档：solvePnP](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=solvepnp#bool%20solvePnP%28InputArray%20objectPoints,%20InputArray%20imagePoints,%20InputArray%20cameraMatrix,%20InputArray%20distCoeffs,%20OutputArray%20rvec,%20OutputArray%20tvec,%20bool%20useExtrinsicGuess,%20int%20flags%29)

在它下面也是solvePnPRansac。

# javascript - 尝试在 Google Map V3 中绘制超过 10 个标记，而不使用地理编码

> ID：11533589
> 
> 赞同：1
> 
> 时间：2012-07-18T02:43:05.477
> 
> 标签：javascript, google-maps-api-3

我正在尝试使用谷歌地图 V3 绘制 10 多个标记，但它在 10 处停止。我没有对标记进行地理编码，我已经有了纬度/经度。有谁知道我为什么会遇到这个问题？下面是我正在使用的代码，这并不疯狂。

```
var map = null;
var infowindow = null;
$(document).ready(function () {
    var venueLatLng = new google.maps.LatLng($('#hdnVenueLat').val(), $('#hdnVenueLng').val());
    var options = {
        center: venueLatLng,
        zoom: 15,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), options);
    var marker = new google.maps.Marker({
        position: venueLatLng,
        map: map,
        title: $("#hdnVenueName").val()
    });
    drawPoints();
    infowindow = new google.maps.InfoWindow();
    $('.listing').click(function () {
        drawInfoWindow(markers[$(this).data('id')])
    })
})

function drawPoints() {
    var center = new google.maps.LatLng($('#hdnVenueLat').val(), $('#hdnVenueLng').val());
    var bounds = new google.maps.LatLngBounds();
    $('.listing').each(function (index) {
        var lat = $(this).data('lat').toString();
        var lng = $(this).data('lng').toString();
        var latLng = new google.maps.LatLng(lat, lng);
        var id = $(this).data('id').toString();
        var marker = new google.maps.Marker(
            {
                id: id,
                position: latLng,
                icon: new google.maps.MarkerImage('/images/map-sprites.png', new google.maps.Size(26, 33), getImagePos(index)),
                //shadow: new google.maps.MarkerImage('/images/map-sprites.png', new google.maps.Size(36, 24), new google.maps.Point(35, 345), new google.maps.Point(4, 15)),
                map: map,
                title: $(this).data('name')
            }
         );
        google.maps.event.addListener(marker, 'click', function () {
            drawInfoWindow(marker);
        });
        markers[id] = marker;
        bounds.extend(new google.maps.LatLng(lat, lng));
    })
    map.fitBounds(bounds);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:30:25.743

kaliatech - 你说得对。谷歌将自定义图标的数量限制为同时在地图上显示 10 个，这非常棒。谢谢你的帮助。

# linux - 在linux中使用maven

> ID：11533590
> 
> 赞同：1
> 
> 时间：2012-07-18T02:43:13.760
> 
> 标签：linux, maven

我在 Linux (CentOs 5.x) 中使用 Maven3

并运行 linux) **mvn install -Preal**

但是会出现以下错误。

* * *

**这是错误消息**

```
...
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[36,51] package org.springframework.beans.factory.annotation does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[37,51] package org.springframework.beans.factory.annotation does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[38,37] package org.springframework.orm.ibatis does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[39,48] package org.springframework.security.core.context does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[40,52] package org.springframework.security.core.userdetails does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[41,37] package org.springframework.stereotype does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[42,49] package org.springframework.transaction.annotation does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[43,40] package org.springframework.web.multipart does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[44,40] package org.springframework.web.multipart does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[56,24] package com.sun.mail.smtp does not exist
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[58,1] cannot find symbol
[ERROR] symbol: class Service
[ERROR] @Service
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[59,1] cannot find symbol
[ERROR] symbol: class Transactional
[ERROR] @Transactional
[ERROR] /data/byto_openapi/src/main/java/com/byto/openapi/home/HomeServiceImpl.java:[64,9] cannot find symbol
... 
```

* * *

**这是 CLASSPATH**

```
declare -x CLASSPATH=".:/usr/java/jdk/lib/tools.jar:/usr/local/tomcat/lib:/usr/local/tomcat/lib/servlet-api.jar:/usr/local/tomcat/lib/mysql-connector-java-5.1.17-bin.jar:/usr/local/tomcat/webapps/ROOT/WEB-INF/classes:/usr/local/tomcat/webapps/ROOT/WEB-INF/lib/bcprov-jdk16-146.jar:/usr/local/tomcat/webapps/ROOT/WEB-INF/lib/bcprov-ext-jdk16-146.jar:/usr/local/tomcat/webapps/ROOT/WEB-INF/lib/commons-lang-2.6.jar:/usr/local/tomcat/webapps/ROOT/WEB-INF/lib/javapns-jdk16-161.jar:/usr/local/tomcat/webapps/ROOT/WEB-INF/lib/log4j-1.2.16.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib:/data/byto_openapi/src/main/webapp/WEB-INF/lib/aspectjweaver-1.6.8.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/jstl-1.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/cglib-2.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/tiles-template-2.2.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/commons-digester-2.0.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/bcprov-ext-jdk16-146.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/commons-fileupload-1.2.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/log4j-1.2.14.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/commons-lang-2.1.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-security-config-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/ibatis-sqlmap-2.3.4.726.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-orm-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-security-ldap-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/commons-lang-2.6.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/commons-pool-1.3.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/commons-beanutils-1.8.0.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-security-core-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/commons-dbcp-1.2.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/tiles-api-2.2.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-tx-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/mail.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/aspectjrt-1.6.9.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-test-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/slf4j-log4j12-1.5.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/derbyclient-10.4.2.0.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-asm-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-context-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-jdbc-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-security-acl-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/javapns-jdk16-161.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-webmvc-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/asm-3.1.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/slf4j-api-1.5.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/aopalliance-1.0.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/jcl-over-slf4j-1.5.10.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-security-web-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-context-support-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-core-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/commons-io-1.3.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/activation.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/jackson-mapper-asl-1.9.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/tiles-servlet-2.2.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-aop-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/mysql-connector-java-5.1.19-bin.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-ldap-core-1.3.0.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-expression-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-beans-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/cos.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/tiles-jsp-2.2.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/org.springframework.roo.annotations-1.0.2.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/tiles-core-2.2.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/jackson-core-asl-1.9.2.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/junit-4.7.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-security-taglibs-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/spring-web-3.0.5.RELEASE.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/bcprov-jdk16-146.jar:/data/byto_openapi/src/main/webapp/WEB-INF/lib/javax.inject-1.jar" 
```

如您所见，所有 JAR 都包含在 CLASSPATH 中。

* * *

**pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>cyoz</groupId>
<artifactId>cyoz</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>

<properties>
    <database.defaultAutoCommit>true</database.defaultAutoCommit>
    <database.validationQuery>select 1</database.validationQuery>
    <database.testWhileIdle>true</database.testWhileIdle>
    <database.timeBetweenEvictionRunsMillis>7200000</database.timeBetweenEvictionRunsMillis>

    <spring.version>3.0.5.RELEASE</spring.version>
    <tiles.version>2.2.2</tiles.version>
    <image.path>/data/api_svn_www/file/image</image.path>
</properties>

<build>
    <sourceDirectory>${basedir}/src/main/java</sourceDirectory>
    <scriptSourceDirectory>${basedir}/src/main/scripts</scriptSourceDirectory>
    <testSourceDirectory>${basedir}/src/test/java</testSourceDirectory>
    <outputDirectory>${basedir}/target/classes</outputDirectory>
    <testOutputDirectory>${basedir}/target/test-classes</testOutputDirectory>

    <resources>
        <resource>
            <directory>${basedir}/src/main/webapp</directory>
            <targetPath>${basedir}/target/webapp</targetPath>
        </resource>
        <resource>
            <directory>${basedir}/src/main/resources</directory>
            <targetPath>${basedir}/target/classes</targetPath>
            <filtering>true</filtering>
        </resource>
    </resources>

    <testResources>
        <testResource>
            <directory>${basedir}/src/test/resources</directory>
        </testResource>
    </testResources>

    <filters>
        <filter>${basedir}/src/main/resources/spring-common-bean-context.xml</filter>
        <filter>${basedir}/src/main/resources/byto.cyoz.properties</filter>
    </filters>

</build>

<profiles>
    <profile>
        <id>dev</id>
        <properties>
            <database.classname>me.kun.log4jdbc.DriverSpy</database.classname>
            <database1.url>jdbc:log4jdbc:mysql://211.174.62.34:3306/bytoapi?autoReconnect=true</database1.url>
            <database1.username>bytoapi</database1.username>
            <database1.password>bytoapi1213</database1.password>
            <database2.url>jdbc:log4jdbc:mysql://211.174.62.34:3306/byto_memo?autoReconnect=true</database2.url>
            <database2.username>byto_memo</database2.username>
            <database2.password>memo1213</database2.password>
        </properties> 
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation> 

        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.1.1</version>
                    <configuration>
                        <warSourceDirectory>src/main/webapp/</warSourceDirectory>
                        <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-eclipse-plugin</artifactId>
                    <version>2.7</version>
                    <configuration>
                        <additionalProjectnatures>
                            <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                        </additionalProjectnatures>
                        <additionalBuildcommands>
                            <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                        </additionalBuildcommands>
                        <downloadSources>true</downloadSources>
                        <downloadJavadocs>true</downloadJavadocs>
                        <wtpversion>1.5</wtpversion>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-idea-plugin</artifactId>
                    <version>2.2</version>
                    <configuration>
                        <downloadSources>true</downloadSources>
                        <downloadJavadocs>true</downloadJavadocs>
                        <dependenciesAsLibraries>true</dependenciesAsLibraries>
                        <useFullNames>false</useFullNames>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <source>1.5</source>
                        <target>1.5</target>
                        <!--<encoding>EUC-KR</encoding> -->
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.zeroturnaround</groupId>
                    <artifactId>jrebel-maven-plugin</artifactId>
                    <version>1.1.1</version>
                    <executions>
                        <execution>
                            <id>generate-rebel-xml</id>
                            <phase>process-resources</phase>
                            <goals>
                                <goal>generate</goal>
                            </goals>
                            <inherited>false</inherited>
                            <configuration>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>tomcat-maven-plugin</artifactId>
                    <version>1.1</version>
                    <configuration>
                        <url>http://211.174.62.34:8080/manager/html</url>
                        <path>/cyoz</path>
                        <username>tomcat</username>
                        <password>tomcat</password>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>

    <profile>
        <id>real</id>
        <properties>
            <database.classname>com.mysql.jdbc.Driver</database.classname>
            <database1.url>jdbc:mysql://127.0.0.1:3306/bytoapi?autoReconnect=true</database1.url>
            <database1.username>bytoapi</database1.username>
            <database1.password>bytoapi1213</database1.password>
            <database2.url>jdbc:mysql://127.0.0.1:3306/byto_memo?autoReconnect=true</database2.url>
            <database2.username>byto_memo</database2.username>
            <database2.password>memo1213</database2.password>
        </properties>
    </profile>

</profiles>

<dependencies>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.2</version>
    </dependency>

    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.2</version>
    </dependency>
</dependencies> 
```

* * *

**linux /etc/profile 将 CLASSPATH 设置为编译 *.java**

```
# tomcat CLASSPATH
SOURCE_FOLDER=/data/byto_openapi
LIBRARY_FOLDER=$SOURCE_FOLDER/src/main/webapp/WEB-INF/lib
export CLASSPATH=$CLASSPATH:$LIBRARY_FOLDER
for file in `find $LIBRARY_FOLDER -name "*.jar" -type f`
do
    export CLASSPATH=$CLASSPATH:$file
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:56:00.130

Maven 不会寻找`CLASSPATH`变量来获取其依赖项。相反，它管理文件中指定的自己的依赖项`pom.xml`。事实上，这是在我的书中使用 Maven 的首要原因。

查看[Maven - Introduction to the Dependency Mechanism](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)以快速开始使用 Maven 进行依赖管理。

例如，为了检查 Maven 插件使用的实际类路径，使用`--debug`参数运行构建

> mvn --debug clean install -Preal

# java - Java - 确定记录是否已被鼠标选中的 java 函数

> ID：11533595
> 
> 赞同：0
> 
> 时间：2012-07-18T02:44:50.217
> 
> 标签：java, sql, mouse, selection

我已经为我正在上的一个使用 SQL 的课程建立了学生记录系统。用户可以简单地添加、删除和显示学生记录。在 UI 中，所有功能都有按钮，在按钮下方，显示所有输入的学生记录。一切都按预期运行，但是我遇到了一个小问题，我不知道如何解决。我正在拔头发，因为我确信这是非常简单的事情。

当数据库中没有学生记录并且您单击删除或显示按钮时，用户会看到一条错误消息，上面写着“您必须首先选择要删除或显示的学生记录”......按预期运行。

当数据库中有学生记录并且用户选择其中一个学生记录并单击删除或显示按钮时，该记录将被删除或显示并且它们按预期运行。

但是，这是我实际遇到的问题。如果显示了学生记录并且用户没有选择其中一个并且他们点击了删除或显示按钮，那么当它应该显示与上面相同的错误消息时，它什么也不做。

我其实知道问题出在哪里。我设置了一个`if..else`语句来检查是否存在记录（`if records > 0`）当然，如果数据库中存在任何学生记录并且用户没有选择一个，它不知道该怎么做。我真的很想自己学习这个，我只是在寻找一些方向。

所以问题是：Java中是否有一个函数可以查看数据库中的一行是否已被用户选择？

这是“删除”按钮的代码副本：

```
{
  if (this.studentsTable.getRowCount() > 0)

  {
      int studentID = Integer.parseInt(this.studentsTable.getValueAt(this.studentsTable.getSelectedRow(), 0).toString());
      if (JOptionPane.showConfirmDialog(this, "Are you sure you want to delete the selected student?") == 0)

      {
          Graduate student = new Graduate(studentID, "", "");
          student.delete();
          ((DefaultTableModel)this.studentsTable.getModel()).removeRow(this.studentsTable.getSelectedRow());
      }
  }

  else

  {
      JOptionPane.showMessageDialog(this, "You must first select a student record to delete.");
  } 
```

}

# iphone - 仅在 iPhone 3GS 上出现旋转问题

> ID：11533599
> 
> 赞同：-1
> 
> 时间：2012-07-18T02:46:20.857
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, autorotate

我似乎在下面的代码中遇到了特定于设备的问题，因为它仅在我测试时影响 iPhone 3GS。

基本上，界面不会旋转。它适用于所有比 3GS 更新的 iPad 和 iPhone。如果您能帮助我，我将不胜感激！

代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation {
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        return YES;

    } else {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:57:37.370

在您的 appDelegate didLaunch 方法中，您是否启用了旋转：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications]; 
```

# java - Java - 如果数据太小，刷新进程的 OutputStream 不会立即发送数据

> ID：11533601
> 
> 赞同：4
> 
> 时间：2012-07-18T02:46:40.693
> 
> 标签：java, outputstream

我正在从 Java 启动一个外部进程并通过`process.getInputStream()`等获取它的标准输入、标准输出和标准错误。我的问题是：当我想将数据写入我的输出流（proc 的标准输入）时，直到我实际调用它才会`close()`发送溪流。我明确地打电话给`flush()`.

我做了一些实验，发现如果我增加发送的字节数，它最终会通过。在我的系统上，幻数是**4058**字节。

为了测试，我将数据发送到一个 perl 脚本，如下所示：

```
#!/usr/bin/perl
use strict;
use warnings;

print "Perl starting";

while(<STDIN>) {
    print "Perl here, printing this: $_" 
} 
```

现在，这是java代码：

```
import java.io.InputStream;
import java.io.IOException;
import java.io.OutputStream;

public class StreamsExecTest {

    private static String readInputStream(InputStream is) throws IOException {
        int guessSize = is.available();
        byte[] bytes = new byte[guessSize];
        is.read(bytes); // This call has side effect of filling the array
        String output = new String(bytes);
        return output;
    }

    public static void main(String[] args) {

        System.out.println("Starting up streams test!");

        ProcessBuilder pb;
        pb = new ProcessBuilder("./test.pl");

        // Run the proc and grab the streams
        try {
            Process p = pb.start();
            InputStream pStdOut = p.getInputStream();
            InputStream pStdErr = p.getErrorStream();
            OutputStream pStdIn = p.getOutputStream();

            int counter = 0;
            while (true) {  

                String output = readInputStream(pStdOut);
                if (!output.equals("")) {
                    System.out.println("<OUTPUT> " + output);
                }

                String errors = readInputStream(pStdErr);
                if (!errors.equals("")) {
                    System.out.println("<ERRORS> " + errors);
                }

                if (counter == 50) {
                    // Write to the stdin of the execed proc.  The \n should
                    // in turn trigger it to treat it as a line to process
                    System.out.println("About to send text to proc's stdin");
                    String message = "hello\n";

                    byte[] pInBytes = message.getBytes();
                    pStdIn.write(pInBytes);
                    pStdIn.flush();
                    System.out.println("Sent " + pInBytes.length + " bytes.");

                }

                if (counter == 100) {
                    break;
                }

                Thread.sleep(100);
                counter++;
            }
            // Cleanup
            pStdOut.close();
            pStdErr.close();
            pStdIn.close();
            p.destroy();

        } catch (Exception e) {
            // Catch everything
            System.out.println("Exception!");
            e.printStackTrace();
            System.exit(1);
        }

    }
} 
```

所以当我运行这个时，我实际上什么也没得到。如果在调用后立即调用`flush()`pStdIn `close()`，它会按预期工作。不过，这不是我想要的；我希望能够持续保持流打开并在我喜欢的时候写入它。如前所述，如果消息为 4058 字节或更大，则无需`close()`.

操作系统（在 64 位 Linux 上运行，具有 64 位 Sun JDK 的价值）是否在发送数据之前对其进行缓冲？我可以看到 Java 无法真正控制它，一旦 JVM 进行系统调用以写入管道，它所能做的就是等待。不过还有一个谜团：

Perl 脚本在进入`while`循环之前打印行。由于我在 Java 循环的每次迭代中检查来自 Perl 标准输出的任何输入，我希望在第一次运行循环时看到它，看到尝试从 Java->Perl 发送数据，然后什么也没有。但实际上，当写入输出流时，我实际上只看到来自 Perl 的初始消息（在该 OUTPUT 消息之后）。有什么我不知道的阻塞吗？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:44:59.213

你还没有告诉 Perl 使用无缓冲的输出。查看[perlvar](http://perldoc.perl.org/perlvar.html)并搜索`$|`设置无缓冲模式的不同方法。本质上，其中之一：

```
HANDLE->autoflush( EXPR )
$OUTPUT_AUTOFLUSH
$| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:44:07.230

Perl 可能会在开始打印任何内容之前对其进行缓冲。

> is.read(字节); // 这个调用有填充数组的副作用

不，它没有。它具有将 1 和`bytes.length-1`字节之间的值读入数组的效果。请参阅 Javadoc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T04:58:13.973

我在您的代码中看不到任何明显的缓冲，因此它可能在 Perl 方面。如果`\n`在打印语句的末尾添加换行符会发生什么？

另请注意，一般情况下，您不能像那样在主线程上读取标准输入和标准错误。您将陷入死锁 - 例如，如果子进程打印大量 stderr，而父进程正在读取 stdin，则 stderr 缓冲区将填满，子进程将阻塞，但父进程将永远处于阻塞状态，试图读取 stdin。

您需要使用单独的线程来读取 stderr 和 stding（也与主线程分开，这里用于将输入泵入进程）。

# php - 代码错误回发

> ID：11533602
> 
> 赞同：0
> 
> 时间：2012-07-18T02:46:47.163
> 
> 标签：php

有人可以帮我检查我的代码，无论我点击什么值，收音机总是检查最后一个。它不能正确回发，但是返回的“echo”值是正确的。

非常感谢

这是我的代码

```
<html>
  <form id="form" name="form"  method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">

<input type="radio" name="foo" value="Apple" checked="checked" <?php if(isset($_POST['foo']) == 'Apple'): echo "checked='checked'"; endif; ?>/>Apple
<input type="radio" name="foo" value="Banana"  <?php if(isset($_POST['foo']) == 'Banana'): echo "checked='checked'"; endif; ?>/>Banana
<input type="radio" name="foo" value="Orange" <?php if(isset($_POST['foo']) == 'Orange'): echo "checked='checked'"; endif; ?>/>Orange

<input type="submit" value="Confirm" /> </form>

<? if(isset($_POST['foo']))
{echo $_POST['foo'];
}
?>

 </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T02:48:56.937

您的比较基于 的返回值[`isset()`](http://php.net/isset)，当他们应该测试 的值时`$_POST['foo']`，如下所示：

```
if(isset($_POST['foo']) && $_POST['foo'] == 'Orange'): 
```

否则，`true == 'Orange'`实际上[是真的](http://viper-7.com/xo7Bs2)，因为 PHP 是松散类型的并且在幕后进行类型强制，这就是为什么你会得到这个奇怪的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:49:11.730

这是你的问题：

```
if(isset($_POST['foo']) == 'Orange') 
```

`isset`返回真或假，并且由于 PHP 的弱比较，`true == 'Orange'`. 你会想要这样做：

```
if(isset($_POST['foo']) && $_POST['foo'] == 'Orange') 
```

# websphere - 通过迁移工具包将旧版本WAS迁移到新版本后如何调出旧版本？

> ID：11533604
> 
> 赞同：1
> 
> 时间：2012-07-18T02:46:50.603
> 
> 标签：websphere, websphere-7, websphere-6.1

我通过 IBM 迁移工具包完成了从 V7 到 V8 的 WAS 迁移。我在迁移期间设置了“禁用以前版本的 dmgr”。最后一切都很好。WAS V8 运行良好。但是，一旦我尝试再次启动我的 V7，它就失败了，并且可能会启动。我确实在运行 V7 之前关闭了所有的 WAS V8 进程。有人知道如何启动我的 V7 吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T16:27:01.960

如果您在同一物理系统上同时存在 WAS V7 和 V8，那么您可能希望确保端口在两次安装之间是唯一的，同样在迁移过程期间 WAS 迁移过程将 serverindex.xml 文件重命名为 serverindex.xml.disabled 所以您将需要删除该“.disabled”扩展名。

注意：确保一次带一个环境 V7 或 V8。

检查以下链接以获取更多详细信息：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.migration.nd.doc%2Fae%2Ftmig_rollback.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.migration.nd.doc%2Fae%2Ftmig_rollback.html)

希望有帮助。VT，意见是我自己的，而不是我雇主的意见

# javascript - JavaScript - 拆分要存储在 2D Image() 数组中的图块集图像

> ID：11533606
> 
> 赞同：7
> 
> 时间：2012-07-18T02:47:20.963
> 
> 标签：javascript, html

假设我有这张图片：

![在此处输入图像描述](../Images/24b9522148aec839502e9e0ba88f758e.png)

我有这个二维数组`tiles[]`..并使用`Image()`函数...我怎么能使用（我认为是最好的方法？）`for`循环将每个图块添加到`array`so`tile[0]`中，但是有很多被读取并用作`Image()`稍后的对象在 HTML5 画布上绘制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:53:20.630

我会..

*   算出这张图片有多少个瓦片宽和高
*   将图像绘制到内存中的画布上，并使用上下文获取图像数据。
*   循环遍历每个图块并对其进行子图像化，存储在一个数组中。

假设：

> imageWidth, imageHeight, tileWidth, tileHeight

所有人都描述了他们的名字所暗示的内容，并且：

**编辑：根据评论添加了图像加载，修复了错误的名称`ImageWidth`和`ImageHeight``imageWidth``imageHeight`**

**编辑：在`imageObj.onload`此处绘制图像时执行代码，drawImage() from origin (0,0)**

```
 var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");
    var imageObj = new Image();
    imageObj.src = "tilesetImageLocationHere";

  imageObj.onload = function() {
    ctx.drawImage(imageObj, 0, 0); 
```

然后，将您的图像拆分为平铺数据列表。

```
 var tilesX = imageWidth / tileWidth;
    var tilesY = imageHeight / tileHeight;
    var totalTiles = tilesX * tilesY;        
    var tileData = new Array();
    for(var i=0; i<tilesY; i++)
    {
      for(var j=0; j<tilesX; j++)
      {           
        // Store the image data of each tile in the array.
        tileData.push(ctx.getImageData(j*tileWidth, i*tileHeight, tileWidth, tileHeight));
      }
    }
    //From here you should be able to draw your images back into a canvas like so:
    ctx.putImageData(tileData[0], x, y);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:45:01.973

好的，我在我的本地主机上做了这个：它至少应该给你一个基础。我认为您应该可以直接使用它，但您可能需要根据您的需要对其进行一些计算调整。我只是认为没有必要花时间来完善你的例子：

您显然必须将图像指向您自己的图像。

```
<html>
  <head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
      $(function(){
        var canvas = document.getElementById('fakeCanvas');
        var ctx = canvas.getContext('2d');
        var img = new Image();
        img.src = '/theImage.png';
        var tiles = [];
        var  imageTileNumWidth = 23;
        var imageTileNumHeight = 21;

img.onload = function(){
  var imageWidth = img.width;
  var imageHeight = img.height;
  sndCanvasWidth = imageWidth/imageTileNumWidth;
  sndCanvasHeight = imageHeight/imageTileNumHeight;
  canvas.width = imageWidth;
  canvas.height = imageHeight;
  ctx.drawImage(img,0,0,imageWidth,imageHeight);
  var sndCanvas = document.getElementById('drawCanvas');
  sndCanvas.width=sndCanvasWidth;
  sndCanvas.height=sndCanvasHeight;
  var i=0;
  var j=0;
  var t=0;
    for(i=0;i<imageWidth;i+=sndCanvasWidth){
      for(j=0;j<imageHeight;j+=sndCanvasHeight){
            var myImageData = ctx.getImageData(j,i,sndCanvasWidth,sndCanvasHeight);     
            var ctx2 = sndCanvas.getContext("2d");
            ctx2.putImageData(myImageData,0,0);
            tiles.push(myImageData);  
      }
    }
};
    });
  </script>
</head>
  <body>
    <canvas id="fakeCanvas"></canvas>
    <canvas id="drawCanvas"></canvas>
  </body>
</html> 
```

# javascript - 如何访问此 json 响应的数据

> ID：11533607
> 
> 赞同：1
> 
> 时间：2012-07-18T02:47:51.213
> 
> 标签：javascript, jquery, json

鉴于此 json 响应：

```
[
    {
        "diccioDatosForm": {
            "errorMessage": "Verifique los datos invalidos ingresados...",
            "encargadoLocalidad": "Ingrese un valor",
            "responseStatus": "ERR",
            "segundoNombre": "OK",
            "encargadoProvincia": "Ingrese un valor"
        }
    },
    {
        "listaEncargados": []
    }
] 
```

我需要访问键“diccioDatosForm”的元素。当我打印带有警报 ( `alert(responseData)`) 的 json 时，我得到：

```
[object Object],[object Object] 
```

尝试这样做时我什么也没得到：

```
alert(responseData.diccioDatosForm.errorMessage) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T02:50:42.540

像这样：

```
responseData[0].diccioDatosForm.errorMessage 
```

`responseData`本身是一个包含 2 个元素的数组

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T02:51:17.437

您的`responseData`对象是一个包含对象的数组。因此，在引用内部对象时必须使用索引。

```
responseData[0].diccioDatosForm.errorMessage 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T02:50:51.373

这是因为您正在提醒正在返回的数组。要访问您想要的字段，您应该执行以下操作：

```
responseData[0].diccioDatosForm.diccioDatosForm 
```

我知道我要说的不是您问题的一部分，但我建议您查看您的 JSON 结构，因为拥有两个不同事物的数组很奇怪。

我会使用这样的东西：

```
{
    "configs": {
        "segundoNombre": "OK",
        "encargadoProvincia": "Ingrese un valor",
        "encargadoLocalidad": "Ingrese un valor"
    },
    "error": {
        "message": "Verifique los datos invalidos ingresados..."
    },
    "itens": []   // "encargados" list here
} 
```

这样做你将有标准通过你的应用程序使用。要访问消息错误，您可以执行以下操作：

```
responseData.error.message 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T02:50:52.013

看起来您正在尝试查找对象中的参数值，该对象是 JSON 中数组的第一个元素。在纯 Javascript 中，这意味着：

```
var data = [{"diccioDatosForm": {"errorMessage": /* ... */]

// grab diccioDatosForm from first array element:
var diccioDatosForm = data[0].diccioDatosForm; 
```

# java - 一起使用swing和awt是不好的做法吗？

> ID：11533609
> 
> 赞同：2
> 
> 时间：2012-07-18T02:48:21.753
> 
> 标签：java, swing, awt

如果是，为什么？

这会产生什么样的冲突？

我试图通过找出最佳实践是什么来尽量减少你在java中可能遇到的奇怪错误，所以希望使用它们能让我摆脱麻烦！

我已经阅读了几个 swing 与 awt 线程，但注意到它们一起使用的许多示例。

动机编辑：我被教导同时使用swing和awt，我怀疑这可能不是最好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T02:52:31.170

尽管 Swing 组件集提供了使用预 Swing AWT 组件（例如 Button、List 等）的替代方案，但 Swing 的主要设计目标之一是它基于 AWT 架构。

从历史上看，在同一个容器中混合重量级 (AWT) 和轻量级 (Swing) 组件一直存在问题。但是，从 JDK 6 Update 12 和 JDK 7 build 19 版本开始，混合重量级和轻量级组件很容易实现。[本文解释了您可能需要了解的一些细节。](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)

# android - 安卓游戏应该如何调节帧率？

> ID：11533610
> 
> 赞同：2
> 
> 时间：2012-07-18T02:48:29.713
> 
> 标签：android, frame-rate, thread-sleep

我在 android 上创建了一个简单的游戏，在主游戏循环中有基本的 updatePhysics() 和 onDraw()。最初，我没有放任何东西来保持一致的帧速率，所以它会无限循环而不会休眠。但是在做了一些研究之后，我发现最好对它进行调节以使帧率保持一致。所以我把 Thread.sleep() 放进去让它以大约 30 fps 的速度运行。这是代码：

```
if(!h.getSurface().isValid())
    continue;
synchronized(h){
    startTime = System.currentTimeMillis();
    if(state == STATE_GAME){
        updatePhysics();
    }
    onDraw();
    endTime = System.currentTimeMillis();
    try{
    Thread.sleep(WAIT_TIME - (endTime - startTime));
    }catch(Exception e){}
} 
```

我发现我的游戏变得非常不稳定，根本不是 30 fps，更像是 20 左右。但是，如果我将这个速率提高到 40 左右，那么它看起来就像 30 fps（变得更流畅）。我在网上看到游戏通常是 25 - 30 fps，所以我认为 40 可能有点太高了。我做错了什么，我应该使用 Thread.sleep() 吗？而且，如果我在不调节 fps 的情况下运行它，它将如何影响其他设备？它在没有 Thread.sleep() 的情况下在我的 Galaxy s2 上运行平稳，并且帧速率不一致并不明显。但我关心的是低端设备。像愤怒的小鸟这样的高端游戏是做什么的？感谢您的任何答案，我对游戏开发非常陌生。

# iis-7 - 如何以非管理员用户身份将网站远程部署到 IIS7？

> ID：11533611
> 
> 赞同：1
> 
> 时间：2012-07-18T02:48:36.183
> 
> 标签：iis-7, windows-server-2008-r2, webdeploy

远程非管理员用户无法部署站点。

我已经建立了委派，网络部署 2.0 刷新，一切。我还是明白了`401 UNAUTHORIZED`。大约四个小时后，我一直坐在这里试图弄清楚这一点。我浏览了我能找到的每一篇帮助文章，每个人都有类似的问题，但修复方法不同。没有一个对我有用。

我的“管理员”帐户可以正常部署。

但是，现在还有另一个有趣的小问题。我在 IIS 管理器中有管理服务。我可以指定一个 IP，除了我想要的一个。我重新安装了 IIS 及其所有功能，但它突然不允许我指定我的 WAN IP。但是，它会让我指定“所有未分配的地址”。但基本上它告诉我它已经绑定了。我已经确认没有其他应用程序正在使用它。一篇论坛帖子提到了一些注册表问题，但当然没有列出条目的路径。我一直没能找到它。

任何提示、技巧、提示或类似的东西都会令人惊叹。

我正在尝试从 Visual Studio 2010 Ultimate 中进行 Web 部署，并且我使用的是 Windows Server 2008 R2 Datacenter Edition。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:35:44.500

添加了域控制器并将委派指定给域用户工作正常。只是不是系统用户。

# java - 如何意图在 android 上的另一个页面/从空闲时间弹出一条消息？

> ID：11533613
> 
> 赞同：0
> 
> 时间：2012-07-18T02:48:50.437
> 
> 标签：java, android, eclipse

Halo，我首先想知道我的 android 应用程序的空闲时间。在那之后，如果它是空闲时间模式，我会做一些事情。

我按照这个链接。 [应用程序空闲时间](https://stackoverflow.com/questions/4075180/application-idle-time)

我的程序正常工作，但突然出现问题。我无法移动到其他页面（例如登录页面）或使用 alertdialog 弹出消息，因为它在线程中。你有什么解决办法？

```
public class ControlActivity extends Activity {
private static final String TAG=ControlActivity.class.getName();

/**
 * Gets reference to global Application
 * @return must always be type of ControlApplication! See AndroidManifest.xml
 */
public ControlApplication getApp()
{
    return (ControlApplication )this.getApplication();
}

@Override
public void onUserInteraction()
{
    super.onUserInteraction();
    getApp().touch();
    Log.d(TAG, "User interaction to "+this.toString());

}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}} 
```

这是我的 ControlApplication.java

```
public class ControlApplication extends Application {
private static final String TAG=ControlApplication.class.getName();
private Waiter waiter;
@Override
public void onCreate() {
    super.onCreate();
    Log.d(TAG, "Starting application"+this.toString());
    //setContentView(R.layout.activity_main);
    waiter=new Waiter(5*60*1000); //5 mins
    waiter.start();
    Toast.makeText(ControlApplication.this, "start", Toast.LENGTH_LONG).show();
}

public void touch()
{
    waiter.touch();
    Toast.makeText(ControlApplication.this, "touch", Toast.LENGTH_LONG).show();
}   } 
```

这是 Waiter.java

```
public class Waiter extends Thread implements Runnable{
private static final String TAG=Waiter.class.getName();
private long lastUsed;
private long period;
private boolean stop;
Context activity;

public Waiter(long period)
{
    this.period=period;
    stop=false;
}

@SuppressLint("ParserError")
public void run()
{
    long idle=0; 
    this.touch();
    do
    {
        idle=System.currentTimeMillis()-lastUsed;
        Log.d(TAG, "Application is idle for "+idle +" ms");
        try
        {
            Thread.sleep(5000); //check every 5 seconds
        }
        catch (InterruptedException e)
        {
            Log.d(TAG, "Waiter interrupted!");
        }
        if(idle > period)
        {
            idle=0;
            //do something here - e.g. call popup or so
            //Toast.makeText(activity, "Hello", Toast.LENGTH_LONG).show();
            stopCounter();
        }
    }
    while(!stop);

    Log.d(TAG, "Finishing Waiter thread");
}

public synchronized void touch()
{
    lastUsed=System.currentTimeMillis();
}

public synchronized void forceInterrupt()
{
    this.interrupt();
}

//soft stopping of thread
public synchronized void stopCounter()
{
    stop=true;
}

public synchronized void setPeriod(long period)
{
    this.period=period;
}} 
```

我试图创建一个新类并调用一个方法来意图。它也失败了。试图从该方法弹出一条消息，它也失败了。

你们还有其他空闲时间的解决方案吗？谢谢。

问候， 阿尔弗雷德·安卡萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:32:11.107

在你的活动中，而不是这个线程，做：

```
public class Graph extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
                while(idle = 0) {
                    idle = System.currentTimeMillis()-lastUsed;

                    if(idle != period) {
                        Intent goNextActivity = new Intent(com.package.theactivity);
                    else {
                        idle == 0;
                    }
                }
             }
           } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:04:52.320

我刚刚通过在谷歌上搜索找到了答案并尝试了 5 个小时.. :D

希望我的回答也能帮到你。

首先，我将 ControlApplication 和 Waiter 与 ControlActivity 混合在一起。这意味着我不需要这两个文件。我的 ControlActivity 将扩展活动（如果处于空闲模式，它对我的​​使用意图到另一个页面），我将实现可运行（它用于我运行线程）。

之后我有一个名为 onUserInteraction() 的方法，该方法帮助我在用户触摸或单击某物时获得用户交互。在 onCreate 中，我启动了所有变量，包括 lastUsed、period 和 stop。

我为什么要发起那个？因为您需要知道多少秒才能知道您的应用程序是否处于空闲模式。那是时期使用。停止变量用于我每 5 秒迭代和搜索一次（你也可以让它每秒检查一次是否空闲）我的应用程序是否空闲。我通过调用方法 touch 来启动 lastUsed。我将触摸方法从 ControlApplication 复制到我的 ControlActivity 中。通过调用 touch 方法，我可以知道我最后一次使用的时间。之后我开始我的线程。

在我的运行方法中，我设置空闲 = 0。并进行一些循环检查。我每 5 秒检查一次，以了解我的应用程序是否处于空闲模式。idle = System.System.currentTimeMillis()-lastUsed -> 我用它来知道空闲是否已经与周期匹配或不使用 if 方法。如果空闲时间大于期间，我的应用程序必须处于空闲模式。之后我停止迭代并使用处理程序来管理它。

我设置 handler.sendEmptyMessage(0)，并创建 Handler。在处理程序中，我移至另一页。这是我的完整代码。

```
public class MainActivity extends Activity implements Runnable {
private static final String TAG= MainActivity.class.getName();
private long lastUsed;
private int period;
private boolean stop;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    period = 10000;
    stop=false;
    touch();
    Thread currentThread = new Thread(this);
    currentThread.start();
    Toast.makeText(getApplicationContext(), "Start", Toast.LENGTH_SHORT).show();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onUserInteraction()
{
    super.onUserInteraction();
    touch();
    Log.d(TAG, "User interaction to "+this.toString());
}

public synchronized void touch()
{
    lastUsed=System.currentTimeMillis();
    Toast.makeText(getApplicationContext(), "touch", Toast.LENGTH_SHORT).show();
}

public void moveIntent() {
    Intent intent = new Intent(this, AfterIdle.class);
    startActivity(intent);
}

public void validate(View view) {
    switch (view.getId()) {
        case R.id.button1 :
            Intent intent = new Intent(this, AfterIdle.class);
            startActivity(intent);
            break;
    }
}

@Override
public void run() {
    // TODO Auto-generated method stub
    long idle;

    while (!stop) {
        idle=System.currentTimeMillis()-lastUsed;
        try
        {
            Thread.sleep(5000); //check every 5 seconds
        }
        catch (InterruptedException e)
        {
            Log.d(TAG, "Waiter interrupted!");
        }
        if (idle > period) {
            idle = 0;
            stop = true;
        }
    }
    handler.sendEmptyMessage(0);
}

public Handler handler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        moveIntent();
    }
};} 
```

我希望这段代码能帮助其他人，如果他们遇到我上次遇到的同样问题。如果我的答案是错误的，我希望有人能帮我纠正答案。谢谢。

问候， 阿尔弗雷德·安卡萨

# objective-c - 在启动或恢复时立即用另一个覆盖根视图

> ID：11533614
> 
> 赞同：1
> 
> 时间：2012-07-18T02:48:54.597
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller

我正在尝试构建一个安全应用程序，在允许访问应用程序之前提示用户输入密码。这是在首次启动或应用程序恢复时完成的。

现在，我正在使用一个视图控制器，`PasscodeViewController`它在应用程序启动或恢复时以模态方式呈现，即在应用程序委托中：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    if (!self.passcodeViewController.view.window)
        [self.window.rootViewController presentViewController:self.passcodeViewController animated:NO completion:NULL];
} 
```

问题是主视图控制器的视图在`PasscodeViewController`呈现之前瞬间闪烁。这是一个安全风险，因为用户可以在被要求输入密码之前快速查看数据。

你如何解决这个问题？DotLockData 等程序和其他安全程序如何实现这样的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T02:53:12.640

似乎在暂停而不是恢复时做这种事情会更好。也许在`applicationWillResignActive`

# algorithm - 查找一组位串的基础的算法？

> ID：11533616
> 
> 赞同：7
> 
> 时间：2012-07-18T02:49:01.373
> 
> 标签：algorithm, linear-algebra, bit-manipulation

这是针对[我](https://github.com/Quuxplusone/difdef)用 C++ 编写的 diff 实用程序。

我有一个*n*字符集列表 {"a", "abc", "abcde", "bcd", "de"} （取自*k* =5 个不同字母的字母表）。我需要一种方法来观察整个列表可以通过字符集{“a”、“bc”、“d”、“e”}的析取来构造。也就是说，“b”和“c”是线性相关的，并且每隔一对字母都是独立的。

在 bit-twiddling 版本中，上面的字符集表示为 {10000, 11100, 11111, 01110, 00011}，我需要一种方法来观察它们都可以通过将较小集合 {10000 , 01100, 00010, 00001}。

换句话说，我相信我正在寻找{0,1} ^(k中一组)*n*不同位向量的“离散基” 。[本文](http://www.mpi-inf.mpg.de/~pmiettin/papers/gradu.pdf)声称一般问题是 NP 完全的……但幸运的是，我只是在寻找解决小案例（*k* < 32）的方法。

 *我可以想到非常愚蠢的算法来生成基础。例如：对于 k ²对字母中的每一对，尝试（通过 O( *n* ) 搜索）证明它们是依赖的。但我真的觉得有一个我还没有偶然发现的有效的位旋转算法。有人知道吗？

**编辑：**毕竟我最终并不需要解决这个问题。但我仍然想知道是否有*一个*简单的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T13:49:27.340

我在想一个不相交的集合数据结构，比如[联合查找](http://en.wikipedia.org/wiki/Union_find)打开了它的头（而不是组合节点，我们拆分它们）。

**算法：**

创建一个数组`main`，将所有位置分配给同一组，然后：

```
for each bitstring curr
  for each position i
    if (curr[i] == 1)
      // max of main can be stored for constant time access
      main[i] += max of main from previous iteration 
```

那么所有不同的数字`main`都是你不同的集合（可能使用实际的联合查找算法）。

**例子：**

所以，`main = 22222`。（我不会使用`1`组来减少可能的混淆，因为`curr`使用位串）。

```
curr = 10000
main = 42222 // first bit (=2) += max (=2)

curr = 11100
main = 86622 // first 3 bits (=422) += max (=4)

curr = 11111
main = 16-14-14-10-10

curr = 01110
main = 16-30-30-26-10

curr = 00011
main = 16-30-30-56-40 
```

然后按不同的数字拆分：

```
{10000, 01100, 00010, 00001} 
```

**改进：**

为了降低增加的速度`main`，我们可以替换

```
main[i] += max of main from previous iteration 
```

和

```
main[i] += 1 + (max - min) of main from previous iteration 
```

**编辑：**根据 j_random_hacker 的评论进行编辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:25:05.293

您可以以空间为代价组合愚蠢算法的通行证。

`violations`制作一个称为位长的位向量`(k - 1) k / 2`（因此，496 表示`k = 32`.）对字符集进行一次遍历。对于每个字母，以及每对字母，查找违规（即`XOR`这些字母的位，`OR`将结果放入 中的相应位置`violations`。）当你完成后，否定并读出剩下的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:05:25.093

你可以试试[**主成分分析。**](http://en.wikipedia.org/wiki/Principal_component_analysis "主成分分析")有一些 PCA 风格是为[**二进制**](http://reference.kfupm.edu.sa/content/b/i/binary_principal_component_analysis_64940.pdfEMi7E96ycXD46LU1yXixQqjLmoZQ)数据或更普遍地为[**分类**](http://en.wikipedia.org/wiki/Multiple_correspondence_analysis)数据设计的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:57:32.727

^(由于有人将其显示为 NP 完整，因此对于大型词汇，我怀疑您会比对整个可能性集 O((2 k) -1) * n)的蛮力搜索（可能进行各种修剪）做得更好。至少在最坏的情况下，如您链接的论文中所述，一些启发式方法可能会在许多情况下有所帮助。这是您的“愚蠢”方法，可推广到所有可能的基础字符串，而不仅仅是长度为 2 的基础。

但是，对于小型词汇，我认为这样的方法会做得更好：

1.  你的话不连贯吗？如果是这样，你就完成了（像“abc”和“def”这样的独立词的简单情况）

2.  对每对可能的单词执行按位和。这为您提供了一组初始的候选基础字符串。

3.  转到步骤 1，但不使用原始单词，而是使用当前基础候选字符串

之后，您还需要包括任何不属于最终接受的候选人之一的个人信件。也许还有一些其他的小记账，比如未使用的字母（使用按位或所有可能的单词）。

考虑您的简单示例：

第一遍给你 a, abc, bc, bcd, de, d

第二遍给你a，bc，d

簿记给你a，bc，d，e

我没有证据证明这是正确的，但我直觉上认为它至少朝着正确的方向发展。优点在于使用单词而不是蛮力使用可能的候选者的方法。如果单词集足够多，这种方法会变得很糟糕，但是对于几百甚至几千的词汇，我敢打赌它会很快。好消息是即使 k 值很大，它仍然可以工作。

如果您喜欢答案和赏金，我很乐意尝试用 20 行代码解决 :) 并提出更有说服力的证明。对我来说似乎很可行。*

# lua - 将选择的基本时间转换为 Corona 本地通知的日期表

> ID：11533620
> 
> 赞同：0
> 
> 时间：2012-07-18T02:49:17.940
> 
> 标签：lua, coronasdk

希望在用户在我的 Corona 应用程序中设置的特定时间设置本地通知。我有基本的通知工作，使用以下指南：http: [//developer.coronalabs.com/reference/index/systemschedulenotification](http://developer.coronalabs.com/reference/index/systemschedulenotification)

```
local utcTime = os.date( "!*t", os.time() + 60 )
local notification = system.scheduleNotification( utcTime, options ) 
```

但我想利用用户选择的时间，构建一个以coordinatedUniversalTime 格式的日期表，来代替上面代码的os.time() + 60 部分。有谁知道该怎么做？

我的时间选择器返回一个基本的小时和分钟值，以及它是上午还是下午。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:32:49.703

对，明白了，很简单。

```
local options = {
           alert = "Alert Text",
           sound = "audio/sound.caf"
        }

        local currentDate = os.date( "*t" )
        local notificationHr
        if reminderPicker1.getAMPM() == "am" then
            notificationHr = reminderPicker1.getHour()
        else
            notificationHr = reminderPicker1.getHour() + 12
        end
        local utcTime = os.date( "!*t", os.time{year=currentDate.year, month=currentDate.month, day=currentDate.day, hour=notificationHr, min=reminderPicker1.getMin(), sec=0 } )
        local notification = system.scheduleNotification( utcTime, options ) 
```

# php - 使用 SQL 循环并显示文件夹中的图像

> ID：11533624
> 
> 赞同：-1
> 
> 时间：2012-07-18T02:50:04.450
> 
> 标签：php

我有一个文件中的图像列表。文件名以及有关图像的详细信息存储在 mysql 表中。我创建了一个 while 循环，在我的页面上随机生成多个图像。然而有一个问题。我的网页没有生成任何图像。我已将其范围缩小到我创建的clothing_data 函数。我只是对我需要做的事情感到困惑。这是下面的代码。

```
<?php
function clothing_data ($id) {
    $data = array();
    $id = (int)$id; 
    $func_num_args = func_num_args();
    $func_get_args = func_get_args();   
    if ($func_num_args > 1) {   
        unset($func_get_args[0]);
        $fields ='`' .  implode ('`, `', $func_get_args) . '`';
        $data = mysql_fetch_assoc (mysql_query("SELECT $fields FROM `dress` WHERE `primary_id` = $id"));
    return $data;
    }
}

$num_dresses = dress_count ();

$i = 0;    
while ($i < 5)
{   
    $rand_id = rand(1, $num_dresses);
    $dress_feed_data = clothing_data($rand_id, 'file_name', 'user_defined_name', 
'user_defined_place' , 'user_who_uploaded');
    echo $dress_feed_data['file_name'];
    if (file_exists('fashion_images/' . $dress_feed_data['file_name']))
    {
?>

<br>
<img src="fashion_images/<?php echo $dress_feed_data['file_name'];?>" width="50" height="50" />
<?php
    }
    $i++;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:27:46.277

在您的`<img>`标签`$dress_feed_data[file_name]`中应该是 `$dress_feed_data['file_name']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:58:58.390

很可能`$field`是空的或包含错误的列名或其他错误。当你得到什么`var_dump()`？

由于您已经在`$dress_feed_data = clothing_data($rand_id, 'file_name', 'user_defined_name', 'user_defined_place' , 'user_who_uploaded');`

您可以简单地将您的功能更改为类似 -

```
function clothing_data ($id, $field1, $field2, $field3, $field4) {
    $data = array();
    $id = (int)$id; 
    $func_num_args = func_num_args();
    $func_get_args = func_get_args();   
    $fields ='`' .  $field1 . '`, `' .  $field2 . '`, `' .  $field3 . '`, `' .  $field4 . '`';
        $data = mysql_fetch_assoc (mysql_query("SELECT $fields FROM `dress` WHERE `primary_id` = $id"));
   return $data;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T19:19:31.053

我解决了这个问题。涉及多个问题。一方面，我的主要 id 没有链接到我的数据库中随机生成的 id。它不起作用的另一个原因是与我的文件名名称相关的字段与我的图像文件夹中的字段不同。这是因为当文件名插入到我的数据库中时，会在名称中添加一个空格，从而无法将我的数据库中的名称链接到我的文件夹中的名称。感谢所有的帮助。

# actionscript-3 - 如何使我的 hitTestObject() 更精确？

> ID：11533626
> 
> 赞同：0
> 
> 时间：2012-07-18T02:50:31.283
> 
> 标签：actionscript-3, flash, actionscript, collision-detection

我正在用一个圆和一个正方形进行一些碰撞检测，每当圆与正方形接触时，它就会反弹，将其 X 坐标改变 *-1。但是，圆的 Hit Area 是一个正方形，所以即使它与圆周围的白色区域发生碰撞，影响仍然发生。

我的问题是，有没有办法修改命中区域以更接近我的圈子？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:10:38.297

位图命中测试是基于像素的（而不是基于边界的，如基于 Sprite 的命中测试），因此它本质上更精确。

[这](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#hitTest%28%29)是关于它的 Adob​​e 文档。

[这](http://www.mikechambers.com/blog/2009/06/24/using-bitmapdata-hittest-for-collision-detection/)是一个很好的教程。

这是一个很好的代码片段：

```
if (firstObjectBitmapData.hitTest(new Point(firstObject.x, firstObject.y), 255, secondObjectBitmapData, new Point(secondObject.x, secondObject.y), 255))
{
    trace("hit!");
} 
```

# php - php regex - 从 javascript 对象中抓取图像

> ID：11533634
> 
> 赞同：0
> 
> 时间：2012-07-18T02:51:30.153
> 
> 标签：php, regex

我正在尝试从某些网页的标记中抓取图像。这些网页都有幻灯片。它们的来源包含在页面上的 javascript 对象中。我在想我需要 get_file_contents("http://www.example.com/page/1"); 然后有一个 preg_match_all() 函数，我可以输入一个短语（即 "\"LargeUrl\":\"" 或 "\"Description\":\""）并获取字符串直到它命中它找到的下一个引号。

```
var photos = {}; 
photos['photo-391094'] = {"LargeUrl": "http://www.example.org/images/1.png","Description":"blah blah balh"};
photos['photo-391095'] = {"LargeUrl": "http://www.example.org/images/2.png","Description":"blah blah balh"};
photos['photo-391096'] = {"LargeUrl": "http://www.example.org/images/3.png","Description":"blah blah balh"}; 
```

我有这个函数，但它在输入短语之后返回整行。我如何修改它以查找输入短语之后的任何内容，直到它找到找到的下一个引号？还是我做错了，有更好的方法吗？

```
$page = file_get_contents("http://www.example.org/page/1");
$word = "\"LargeUrl\":\"";

if(preg_match_all("/(?<=$word)\S+/i", $page, $matches))
{
    echo "<pre>";
    print_r($matches);
    echo "</pre>";
} 
```

理想情况下，如果我输入 "\"LargeUrl\":\""，该函数将返回如下所示的数组

```
$matches[0] = "http://www.example.org/images/1.png";
$matches[1] = "http://www.example.org/images/2.png";
$matches[2] = "http://www.example.org/images/3.png"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:39:12.233

您可以使用括号来捕获您感兴趣的部分。一个简单的正则表达式是

```
$word = '"LargeUrl":';
$pattern = "$word" . '\s+"([^"]+)"';

preg_match_all("/$pattern/", $page, $matches);

print_r($matches[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:39:22.187

肯定有一个正则表达式可以匹配每个图像 URL，但是如果您更容易，您也可以匹配整个对象，然后 json_decode() 匹配的字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:40:07.987

我为您提供了完美的解决方案....使用以下代码，您将获得所需的结果。

```
preg_match_all('/{"LargeUrl":(.*?)"(.*?)"/', $page, $result, PREG_PATTERN_ORDER);
for ($i = 0; $i < count($result[0]); $i++) {
        echo "<pre>";
        echo $result[2][$i];
        echo "</pre>";

} 
```

**谢谢......p2c**

# python - 通过 Pydev 使用 Django 时出现间歇性“找不到页面”

> ID：11533638
> 
> 赞同：1
> 
> 时间：2012-07-18T02:52:27.870
> 
> 标签：python, django, eclipse, ide, pydev

我最近开始与我认识的其他几个人一起在 Eclipse 中使用 Pydev 开发 Django，并且我每天都会因为这个我似乎无法调试的错误而失去几个小时的工作效率。本质上，有时在启动我的 django 运行配置后，我会转到该 URL `http://127.0.0.1:8000/foo`，它只会向我吐出这个响应：

```
<h1>Page not found: /foo</h1> 
```

起初我可以一直重现这种行为；每当我打开多个 Eclipse 工作区并关闭我的 Django 服务器一次时，服务器实际上不会关闭，但它只会继续提供未找到的页面，直到我关闭两个 Eclipse 实例。

停止这样做，它似乎工作，但随后它似乎间歇性地重新开始。发生这种情况时，它实际上不会停止发生，直到我关闭 eclipse，并且 eclipse.exe 进程将挂起（并继续服务器 Page not found pages），直到我手动进入该进程并终止它。有时，这甚至无法修复它，并且在我第一次尝试重新启动 Django 时它会自行中断。

我正在使用 PyDev 和 Eclipse 3.6.1 的稳定版本。

知道发生了什么吗？这令人难以置信的沮丧，特别是因为我倾向于喜欢这个例外的 IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:48:08.633

您是否有机会使用运行配置来启动您的开发服务器？因为这也一直发生在我身上。当您从 IDE 中停止 django 并保留 http 端口时，似乎 eclipse 并没有完全关闭 django。从这个意义上说，您正在向僵尸服务器实例发送请求，因此未找到。从那以后，我求助于从命令行启动 django。我承认，这不是最漂亮的解决方案。

# css - 视网膜 (hiDPI) 图像的响应式裁剪

> ID：11533644
> 
> 赞同：0
> 
> 时间：2012-07-18T02:53:10.050
> 
> 标签：css, retina-display

我在网页上有一张地图的图像。使用 CSS，地图图像由浏览器自动裁剪。目标是地图始终为 100% 比例，并且以相关位置为中心。这个想法是地图将始终填满页面的宽度，但是随着浏览器窗口的大小缩小，周围区域被简单地裁剪，但位置图钉始终可见，并且始终处于 100% 比例。

我已经使用 div 对非视网膜图像进行了很好的处理：

```
#map {
    width: 100%;
    height: 300px;
    background-image: url('images/map_1.jpg');
    background-position: center;
    background-size: auto;
} 
```

我在使用 Retina 设备时遇到的问题是它要么是“真实”100%（所以它是原来的两倍）并且被裁剪（使用`background-size: auto;`），或者是全宽（使用`background-size: 100%;`），这意味着地图特征通常很小.

我有一个媒体查询来检测 hiDPI 设备，但我不知道如何让它保持适当的比例并裁剪/隐藏溢出。

谢谢

# database - 云架构

> ID：11533647
> 
> 赞同：1
> 
> 时间：2012-07-18T02:54:01.560
> 
> 标签：database, web-services, architecture, amazon-web-services, cloud

我正在研究托管电子商务网站的云服务。我正在尝试了解一些关于它们如何扩展事物的基础知识。

从我可以从 AWS、Rackspace 等文档中收集到的信息：

设置 1：您可以获得一个网络服务器（AWS - EC2，Rackspace - 云服务器）的实例。然后，您可以扩展该实例以拥有更多资源或制作该实例的副本以处理更多流量。似乎您可以在这些实例本地安装数据库。

设置 2：您可以启动网络服务器（AWS - EC2，Rackspace - 云服务器）的实例。您还可以启动数据库（AWS - RDS、Rackspace - 云数据库）的实例。因此，网络服务器实例可以通过单个访问点与数据库实例进行通信。

当我使用术语实例时，我只是在考虑可以通过单个访问点访问的副本，并且数据在后台在每个副本之间同步。这可能是错误的心理形象，但这是我现在得到的最好的。

我可以理解设置 2 的可扩展性。Webserver 实例根本不会改变，因为它只是源代码。所以所有的 http 请求都被分发到不同的 webserver 实例并且是负载均衡的。并且数据查询具有单个访问点，然后分布到不同的数据库实例并进行负载平衡，并且所有数据写入在对应用程序/网络服务器实例透明的所有数据库实例之间同步。

但是对于设置 1，在每个 Web 服务器实例中本地都有一个数据库设置，数据如何能够在其他 Web 服务器实例本地的其他数据库之间同步？由于每个网络服务器的实例不能相互通信，你如何启动多个实例来扩展应用程序？此设置是否主要用于具有静态内容且数据库内的数据未更改的站点？那么对于一个将订单写入数据库的电子商务网站，这种架构是不可行的吗？或者有没有办法让每个网络服务器实例将他们的本地数据库更新到某个主副本？

对不起这么简单的问题。我猜文档并没有说得很清楚，因为它太简单了，或者我只是找不到正确的文档/页面。

感谢您的时间！

更新：将问题移至此处：

[https://webmasters.stackexchange.com/questions/32273/cloud-architecture](https://webmasters.stackexchange.com/questions/32273/cloud-architecture)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:01:25.007

我们有一个服务器设置为应用程序服务器，我们的数据库安装在 AWS 上同一可用区的一组不同机器上（最初是三个，但可扩展）。我们设置它的方式是使用“k-safe”复制。这是可扩展的，因为数据分布在机器上，并且可以复制，这样一台机器就可以完全消失，站点继续运行。这也允许分发查询。
（另一个配置选项是复制每台数据库机器上的所有数据）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T12:57:04.547

关于设置#1，你是对的，如果你在每台机器上通过负载平衡复制整个数据库，你需要担心在节点之间复制数据，这会很复杂并且会影响性​​能，或者你将需要牺牲一致性，或者将所有内容同步到单个大数据库，然后您就会失去集群的效果。另请记住，当吞吐量增加时，添加额外的服务器是一项可能需要数小时的手动操作，因此您无法按需响应吞吐量。

与设置 #2 相关，此处扩展应用程序很容易，云提供商会自动为您执行此操作，但正如您所知，数据库将成为瓶颈。如果云提供商扩展您的应用程序并且所有这些应用程序实例都与同一个数据库通信，您将获得更多的应用程序吞吐量，但数据库将很快耗尽容量。有人建议通过在云上设置 MySQL 集群来解决这个问题，这是一个有效的选择，但请记住，如果吞吐量突然增加，您将需要重新配置复杂的 MySQL 集群，您将不会有自动缩放为您的数据。

[另一种方法是云数据库即服务， Amazon](http://aws.amazon.com/ec2/)和[RackSpace](http://www.rackspace.com)云都有多种选择。您提到了[RDS](http://aws.amazon.com/rds/)，但它有同样的问题，因为最终它仅限于一个没有自动缩放的数据库实例。另一个 MySQL 数据库服务是[Xeround](http://www.xeround.com)，它将负载分散到几个数据库节点上，并且有一个负载均衡器来管理这些节点之间的连接并自动同步分区之间的数据。有一个访问点和一个循环 DNS，可将请求发送到多达数千个数据库节点。因此，这可能会满足您对单个访问点和数据库可扩展性的需求，而无需在每次进行扩展操作时设置或更改集群。

# java - 编写java程序递归测试文件命名标准

> ID：11533649
> 
> 赞同：2
> 
> 时间：2012-07-18T02:54:21.843
> 
> 标签：java, file-io, recursion, directory, filenames

我想编写一个 Java 应用程序，根据某些命名标准验证文件和目录。该程序将让您选择一个目录并递归分析 - 给出与给定规则不匹配的文件/目录列表。

最终我希望用户能够输入规则，但现在它们将是硬编码的。哦，这需要跨平台。

我对基本的 Java 结构有一定的应用知识，但没有使用库的经验，也没有太多运气为这类事情找到演示/代码示例。

我会喜欢关于什么树开始吠叫的建议，伪代码——任何你觉得有帮助的东西。

**编辑**：我不想在这里删除任何东西，只是在所选目录中获取违反某些规则（例如，没有空格或特殊字符，没有以大写开头的目录）的任何名称的递归列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T03:00:50.640

我想使用[Commons IO](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/FileUtils.html)，我认为[DirectoryWalker](http://commons.apache.org/io/api-release/org/apache/commons/io/DirectoryWalker.html)会帮助你。

这是检查和删除“.svn”目录的示例

```
 public class FileCleaner extends DirectoryWalker {

    public FileCleaner() {
      super();
    }

    public List clean(File startDirectory) {
      List results = new ArrayList();
      walk(startDirectory, results);
      return results;
    }

    protected boolean handleDirectory(File directory, int depth, Collection results) {
      // delete svn directories and then skip
      if (".svn".equals(directory.getName())) {
        directory.delete();
        return false;
      } else {
        return true;
      }

    }

    protected void handleFile(File file, int depth, Collection results) {
      // delete file and add to list of deleted
      file.delete();
      results.add(file);
    }
  } 
```

# python - 获取“int”对象是不可迭代的

> ID：11533650
> 
> 赞同：0
> 
> 时间：2012-07-18T02:54:42.567
> 
> 标签：python, iteration

```
 cat_sums[cat] += value
TypeError: 'int' object is not iterable 
```

我的输入是这样的：

```
defaultdict(<type 'list'>, {'composed': [0], 'elated': [0], 'unsure': [0], 'hostile': [0], 'tired': [0], 'depressed': [0], 'guilty': [0], 'confused': [0], 'clearheaded': [0], 'anxious': [0], 'confident': [0], 'agreeable': [0], 'energetic': [0]}) 
```

这被分配给一个叫做 catnums 的东西

```
accumulate_by_category(worddict, catnums, categories)

        def accumulate_by_category(word_values, cat_sums, cats):
                for word, value in word_values.items():
                        for cat in cats[word]:
                                cat_sums[cat] += value 
```

现在据我所知，我并不是要迭代一个整数。我正在尝试将一个值添加到 catnums 中的另一个值。

是否有可能在我的 accumulate_by_category() 函数中的“cats”参数有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T02:56:55.420

您的每个值都是一个列表。运算符在`+`应用于列表时会向列表添加一个*可迭代对象*。它不附加单个值：

```
>>> [1,2] + [3,4]
[1, 2, 3, 4]
>>> [1,2] + 3
TypeError: can only concatenate list (not "int") to list 
```

看起来你想做`cat_sums[cat].append(value)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:01:10.603

`+`，当应用于列表时，是连接。正如布伦巴恩所说，`[1, 2] + [3, 4] == [1, 2, 3, 4]`.

但是，如果您实际上是在尝试添加数字，正如您的陈述“我正在尝试将一个值添加到 catnums 中的另一个值”所暗示的那样，那么`append`您将不会做您想做的事情。

如果是这种情况，那么您显示的字典可能不正确。这不是单词到数字的映射；它是单词到数字列表（即 list `[0]`）的映射。如果您想保持字数，这不是您想要的；你想要`{'composed': 0, 'elated': 0, ...}`（注意缺少方括号）。然后该`+=`语句将按预期工作。

如果您无法更改字典而只是想更改列表中的数字，您可以说`cat_sums[cat][0] += value`。但是，将“零列表”简单地转换为普通的旧零会更有意义（如果这是您所追求的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-13T23:09:56.877

如果有人在 Django 模板中遇到此错误……</p>

当你这样做时：

```
{% for c in cat_sums.keys %} 
```

然后，在幕后，Django 模板语言首先尝试`cat_sums['keys']`查找。通常这会失败，Django 接下来会寻找一个方法。但由于这是 a `defaultdict`，因此将存储默认值。

如果字典是用

```
cat_sums = defaultdict(int) 
```

被执行的是：

```
for c in cat_sums['keys']: 
```

IE，

```
for c in 0: 
```

由于该值`0`不可迭代，因此非常正确地引发了错误。

解析度？在上下文中传递`dict(cat_sums)`，以便视图获得常规的`dict`.

# c# - 模块之间的 Wpf Prism MVVM 更改

> ID：11533651
> 
> 赞同：3
> 
> 时间：2012-07-18T02:54:56.727
> 
> 标签：c#, wpf, mvvm, prism

我正在使用 Prism 和 MVVM 开发一个 WPF 项目，我是使用这个工具的新手。我一直在创建模块并对其进行测试，一切正常。为了在 Bootstrapper 中测试它，我使用 ModuleCatalog 的 AddModule 方法添加每个模块，但现在我需要将所有模块放在一起并从一个模块转到另一个模块。

程序启动并加载 Module_1，当用户完成此模块中的所有操作时，按下完成按钮，程序显示 Module_2，依此类推...

用户操作后，我需要做什么才能从一个模块更改为另一个模块？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:38:31.620

模块可以按需加载。在第一个模块加载 Module_2 中按下完成按钮后。[如何：按需加载模块](http://msdn.microsoft.com/en-us/library/ff921071%28v=pandp.20%29.aspx)。在模块的`Initialize()`方法中，您可以使用区域注册所需的视图，例如

```
public void Initialize()
{
    regionManager.RegisterViewWithRegion("MainRegion", () => container.Resolve<Module2View>());
} 
```

加载模块完成后导航到此视图：

```
moduleManager.LoadModuleCompleted += (s, e) =>
    {
        if (e.ModuleInfo.ModuleName == "Module_2")
        {
            regionManager.RequestNavigate("MainRegion", new Uri("Module2View", UriKind.Relative));
        }
    }; 
```

这只是一个快速示例。[您可以在MSDN](http://msdn.microsoft.com/en-us/library/ff921153%28v=pandp.40%29)上找到更多信息。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T06:04:08.160

另一种选择可能是使用 Prism 提供的 EventAggregator 类

当用户单击完成按钮时，将引发 CompositePresentationEvent。Module_1 和 Module_2 已经订阅了这个事件（也许在他们的模块 Initialize 方法中）并且 module_1 可以隐藏自己而 module_2 显示自己。

显示/隐藏视图的实际实现将取决于您如何使用区域 - Zabavsky 的答案解决了这个问题。

希望这是有道理的！

# php - 当管理面板中的“设置”已更改以准备转移到实时站点时，如何恢复 wordpress？

> ID：11533654
> 
> 赞同：0
> 
> 时间：2012-07-18T02:55:20.113
> 
> 标签：php, database, wordpress, phpmyadmin, localhost

我的 Wordpress 有问题。当我将数据库转移到实时站点然后尝试将其恢复到原始状态（本地服务器）以便我可以再次编辑 wordpress 站点时，管理面板中的功能无法正常工作。例如，当我登录到管理面板时，只加载一个空白。没有加载任何页面。

以下是我所做的步骤，以便我可以将我的 Wordpress 转移到一个实时站点。顺便说一句，我正在使用 AMPPS 在本地编辑 Wordpress 站点。

1.) 通过导出 gzip 文件备份 PHPMYADMIN 中的数据库。

2.) 转到仪表板 > 设置 > 更改了 Wordpress 地址 (URL) 和站点地址 (URL)：

3.) 更改设置后，我导出了另一个数据库文件，因此它会附带更改的设置。

4.) 成功转移直播网站。

同样，这是我所做的步骤，以便我可以在本地服务器中恢复我的 Wordpress 设置：

1.) 在“PHPMYADMIN”控制台中删除了数据库。

2.) 导入备份数据库。

3.) 成功导入备份。

虽然导入成功了，但是每次登录时总是出现只加载一个白页的错误。绝对是 0。如何正确恢复本地服务器中的 Wordpress？

我希望有人能帮帮忙。

谢谢你。

Wordpress 地址（URL）：从“127.0.0.1/testsite”到[http://www.testsite.com](http://www.testsite.com)

站点地址（URL）：相同

3.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:53:21.583

通过执行以下操作找到了解决方案：

1.) 转到 phpmyadmin 并删除数据库中的当前表。（检查所有>然后放下）

2.) 在备份数据库中，转到 WP_OPTIONS 表。

3.) 在第一页，您会看到一个网址 - 将其更改为您本地服务器的网址（例如。`http://127.0.0.1/mysite`）

4.) 转到 WP_OPTIONS 的“第 2 页”

5.) 您将看到另一个 URL，其中显示“ `http://www.mysite.com`”到您的本地服务器地址 - `http://127.0.0.1/mysite`。

6.) 刷新您的浏览器，一切都完成了！

# jquery - 如何使用不显眼的 jQuery 验证手动重新验证/触发验证？

> ID：11533656
> 
> 赞同：10
> 
> 时间：2012-07-18T02:56:00.233
> 
> 标签：jquery, asp.net-mvc, jquery-validate, unobtrusive-validation

我创建了自己的条件验证属性，通过继承`RequiredAttribute`和实现在客户端和服务器上验证我的 MVC 模型`IClientValidatable`。这个想法是，如果我的模型上的布尔属性为真，则需要另一个属性。在视图中，这表现为一个复选框，指示是否需要填写文本框。

除非用户执行以下操作，否则这非常有效：

*   选中复选框（该字段现在是必需的）。
*   提交表单（客户端验证运行，显示错误消息）。
*   用户取消选中框（错误消息仍然存在，不再需要该字段）。

我想在选中或取消选中复选框时重新验证表单，或者甚至更好地重新验证该字段，以便不再显示错误消息。我尝试了调用 jQuery`validate()`方法的各种组合，但似乎没有什么能够重新运行验证。

我使用以下 javascript 来设置我的验证功能和相关的不显眼的适配器。

```
$.validator.addMethod(
    "requiredif",
    function(value, element, parameters) {
        var selector = "#" + parameters["dependentpropertyname"];
        var triggerValue = parameters["triggervalue"].toString().toLowerCase();
        var actualValue = $(selector).is(":checked").toString().toLowerCase();
        if (actualValue === triggerValue) return $.validator.methods.required.call(this, value, element, parameters);

        return true;
    });

$.validator.unobtrusive.adapters.add(
    "requiredif",
    ["dependentpropertyname", "triggervalue"],
    function(options) {
        options.rules["requiredif"] = {
            dependentpropertyname: options.params["dependentpropertyname"],
            triggervalue: options.params["triggervalue"]
        };
        options.messages["requiredif"] = options.message;
    }
); 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-11T19:39:03.600

我有一个类似的问题，我想使用 jquery validate 和 jquery ui 重新验证 datepicker 字段。 [这篇文章](http://seesparkbox.com/foundry/validating_the_jquery_ui_datepicker)帮助我弄清楚了。

关键，只是为该选择器的有效方法添加一个回调。就像是：

```
$(".requiredif").change(function() {
  $(this).valid();
}) 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-07-18T14:55:02.283

您应该查看[万无一失的验证](http://foolproof.codeplex.com/)。它可以完成您想要做的事情，而无需您自己动手。

# php - PHP SQL 用 OR 选择

> ID：11533657
> 
> 赞同：0
> 
> 时间：2012-07-18T02:56:11.290
> 
> 标签：php, mysql, sql

我想知道是否有这样的命令可以根据 2 行或更多行从数据库中选择一个项目。

例如：

```
SELECT * FROM 'table' WHERE 'row1' OR 'row2' OR 'row3' LIKE 'myValue' 
```

是否有 OR 之类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T02:57:26.387

不，您需要明确指定每个条件：

```
WHERE row1 LIKE 'myValue'
   OR row2 LIKE 'myValue'
   OR row3 LIKE 'myValue' 
```

重要笔记：

1.  不要在列名周围使用`quotes`( )。只允许`'`使用反引号```
2.  如果您不使用或-`LIKE`等设施，请不要使用它，而是使用它。在这种情况下，您的情况可以简化为：`_``%``=`

    ```
    WHERE 'myValue' IN (row1, row2, row3) 
    ```

# orm - 如何在 symfony2 Doctrine ORM 中使用复合键映射多对多关系

> ID：11533659
> 
> 赞同：0
> 
> 时间：2012-07-18T02:56:25.417
> 
> 标签：orm, symfony, doctrine-orm, mapping, relationships

我有这种情况

我有四节课

```
User
profiles
Activity
Workbook

user can have many profiles based on per year. Every year diff profile
User profile will have many to many with Activities 
```

所以会有带有 profile_id 和 activity_id 的 profile_activities 表

现在用户将为每个配置文件的每个活动执行 1 个工作簿

所以我很困惑如何在数据库中映射

我的意思是个人资料表，我可以有

```
class profile

@many to many
protected $activities

many to one
protected $user 
```

但是在课堂工作簿中如何定义属于活动和个人资料关系表的外键

对于每项活动，孩子都必须完成工作簿。我该如何定义

`@[one to one [PK of activity_profile table]`

`protected $workbook`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:40:31.863

Symfony 为您提供了不同的方法来执行此操作。
其中一种方法是注释。使用注释，您可以直接将这种关系和更多内容写入 php 类（如 db 列的类型，指定属性是否是必需的等等......）

所以，让我们举这个例子（因为我不了解您的实体之间的关系）
考虑两个实体：用户和组。
一个用户可以属于*n 个*组，一个组可以有*m*个用户。这意味着我们必须将*mn*基数“分解”成`m-1-n`关系。
在 symfony 中（使用学说；我不知道使用 mongodb 和类似的是否相同）您不必将这个“中间表”创建为 php 类。您所要做的就是在涉及到 php 类的注释中指定哪些表是相关的以及以何种方式相关。
让我们看看如何！

```
/**
 * Acme\UserBundle\Entity\User
 *
 * @ORM\Table(name="users")
 * @ORM\Entity()
 */
class User implements AdvancedUserInterface
{
    /**
     * @ORM\Column(type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;
[...]
   /**
     * @ORM\ManyToMany(targetEntity="Groups", inversedBy="users")
     *
     */
    private $groups;
[...] 
```

}

正如你所看到的，这是一个 php 类的一部分，它使用学说 (ORM) 映射到 db 表中。
该类具有一个属性，该属性告诉（查看注释）`$groups`该类与另一个类（由进入关系（外部键）。`targetEntity``inversedBy`

```
/**
 * @ORM\Table(name="groups")
 * @ORM\Entity()
 */
class Groups implements RoleInterface
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id()
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;
[...]
    /**
     * @ORM\ManyToMany(targetEntity="User", mappedBy="groups")
     */
    private $users;
[...]
} 
```

该实体是组实体，具有关系的“另一面”：`$user`
如您所见，有`@ORM\ManyToMany(targetEntity="User", mappedBy="groups")`表示 realtionship 是与 class`User`和 field into `User`class is `groups`。

现在，您可以在 db php app/console 上运行用于实体生成的教义命令，`doctrine:generate:entities Acme`其中`Acme`捆绑的名称和技巧就完成了。

`mappedBy`关于和的一些话`inversedBy`：

*   有“两个”面：倒置面和拥有面。请记住，教义只会“观察”到拥有方的变化，因此请注意将其放入正确的类中
*   反面由`mappedBy`关键字标识，其值为拥有侧类的名称
*   拥有方用`inversedBy`关键字标识，它的值是反面类的名称
*   manyToOne 协会总是拥有方
*   oneToMany 关联总是有反面
*   oneToOne 关系的拥有方始终是具有外部键的实体
*   进入manyToMany关系是一样的

# php - 一种将类添加到与当前页面对应的锚链接的自动方法

> ID：11533668
> 
> 赞同：0
> 
> 时间：2012-07-18T02:57:15.477
> 
> 标签：php, dynamic

我有一种 jQuery 方法，可以`.current`根据站点 url 和相应的页面向锚链接添加一个类（即，如果我在“关于”页面上，它将`.current`向导航菜单中的锚链接添加一个类指向“about.php”）。它确实可以完成这项工作，而且超级简单，但我想要一种`PHP`方法来完成这项工作，就像 Wordpress 所做的那样。我最终得到的是一种非常规且不易修改的东西（下面的代码）

**我的问题是**：有没有更简单的方法可以做到这一点？你会在我的代码中看到我必须为`$nav[#]`每个锚链接分配一个变量..这不是最方便的事情......

的HTML：

```
 <ul class="nav">
    <li><a href="index.php" class="<?php echo $nav1; ?>">home</a></li>
    <li><a href="publications.php" class="<?php echo $nav2; ?>">publications</a></li>
    <li><a href="research.php" class="<?php echo $nav3; ?>">research</a></li>
    <li><a href="cv.php" class="<?php echo $nav4; ?>">cv</a></li>
    <li><a href="contact.php" class="<?php echo $nav5; ?>">contact</a></li>
  </ul> 
```

PHP：

```
<?php

function getUrl() {
  $url  = @( $_SERVER["HTTPS"] != 'on' ) ? 'http://'.$_SERVER["SERVER_NAME"] :  'https://'.$_SERVER["SERVER_NAME"];
  $url .= ( $_SERVER["SERVER_PORT"] !== 80 ) ? ":".$_SERVER["SERVER_PORT"] : "";
  $url .= $_SERVER["REQUEST_URI"];
  return $url;
}

$myurl = getUrl() ; // As was suggested, I could also just set $myurl = $_SERVER['PHP_SELF'] and avoid the complicated function call

$split_url = explode("/" , $myurl) ;

$page = end($split_url) ; 

$nav1 = $nav2 = $nav3 = $nav4 = $nav5 = ' ' ; 

if ( $page == "publications.php" )
    $nav2 = 'current' ; 

else if ( $page == "research.php")
    $nav3 = 'current' ; 

else if ( $page == "cv.php" )
    $nav4 = 'current' ; 

else if ( $page == 'contact.php') 
    $nav5 = 'current' ; 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:38:56.080

这是我推荐的版本：

```
<?php
    $selectedClass = "current";
    $nav1 = $nav2 = $nav3 = $nav4 = $nav5 = ' ' ; 
?>

<ul class="nav">
   <li><a href="index.php" class="<?=$nav1?> <?=(($_SERVER['PHP_SELF'] == "index.php") ? $selectedClass : '')?>">home</a></li>
   <li><a href="publications.php" class="<?=$nav2?> <?=(($_SERVER['PHP_SELF'] == "publications.php") ? $selectedClass : '')?>">publications</a></li>
   <li><a href="research.php" class="<?=$nav3?> <?=(($_SERVER['PHP_SELF'] == "research.php") ? $selectedClass : '')?>">research</a></li>
   <li><a href="cv.php" class="<?=$nav4?> <?=(($_SERVER['PHP_SELF'] == "cv.php") ? $selectedClass : '')?>">cv</a></li>
   <li><a href="contact.php" class="<?=$nav5?> <?=(($_SERVER['PHP_SELF'] == "contact.php") ? $selectedClass : '')?>">contact</a></li>
 </ul> 
```

与 Baylor Rae 的回答相反，此方法完成了几件事：

*   由于包含条件语句，因此通过直接阅读 html 可以清楚地看到这里发生了什么。
*   您可以通过简单地更改变量来非常轻松地定义和更改“选定”类。
*   每个链接都可以有自己的特定类（$nav1、$nav2 等），无论它是否具有“选定”类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:08:09.110

看看`$_SERVER['PHP_SELF']`。它将给出正在服务的当前文件的文件名。

如果页面与`$_SERVER['PHP_SELF']`.

```
<?php

function add_current_class($page_name) {
  if( $page_name == $_SERVER['PHP_SELF'] ) {
    return ' current';
  }
} 
```

用法如下。

```
<ul class="nav">
   <li><a href="index.php" class="<?php echo add_current_class('index.php'); ?>">home</a></li>
   <li><a href="publications.php" class="<?php echo add_current_class('publications.php'); ?>">publications</a></li>
   <li><a href="research.php" class="<?php echo add_current_class('research.php'); ?>">research</a></li>
   <li><a href="cv.php" class="<?php echo add_current_class('cv.php'); ?>">cv</a></li>
   <li><a href="contact.php" class="<?php echo add_current_class('contact.php'); ?>">contact</a></li>
 </ul> 
```

* * *

如果你真的想让它变得特别，你可以做这样的事情。

```
<?php 

function display_navigation() {
  $pages = array(
    'index.php' => 'home',
    'publications.php' => 'publications',
    'research.php' => 'research',
    'cv.php' => 'cv',
    'contact.php' => 'contact'
  );

  $link = '<li><a class="%s" href="%s">%s</a></li>';

  echo '<ul class="nav">';
  foreach( $pages as $page => $text ) {
    printf($link, add_current_class($page), $page, $text);
  }
  echo '</ul>';
} 
```

# javascript - 如何根据其值随机返回关联数组名称

> ID：11533673
> 
> 赞同：0
> 
> 时间：2012-07-18T02:57:37.897
> 
> 标签：javascript, random, probability

我有一组与许多“点”相对应的活动。看起来像这样：

```
[ {"c1":4, "c2":8, "c3":25} ] 
```

我想从这个集合中随机选择一个广告系列。我假设 rand() 会在某个时候发挥作用。但是，我希望每个的价值都会影响其被选中的机会。

因此，例如，广告系列“c2”的选择频率应该是广告系列“c1”的两倍（大约）。“c3”将是国王，最有可能被选中。

每次脚本运行时，活动的数量和相应的值可能相同，也可能不同。

有什么好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:04:22.680

这很容易。只需为每个活动创建另一个具有 CDF 值的地图。对于您的示例，它将是：

```
0.108: C1
0.324: C2
1: C3 
```

然后得到一个介于 0 和 1 之间的随机数。遍历映射并找到大于随机数的最小数字（您可以对其进行二进制搜索或创建一个排序哈希映射，它也可以给出最小的较大数字）

请注意，通过添加概率，最后一个条目可能不会加到 1（可以是 0.999）。只需手动将其设置为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:30:22.690

这是一个为您解决这个问题的函数。它创建了一个加权数组，您可以将其与随机数一起使用，以根据每个项目的加权值正确加权每个项目。

```
var campaigns = {"c1":4, "c2":8, "c3":24};

function getWeightedRandomCampaign(list) {
    var weighting = [];
    var total = 0;
    for (var item in list) {
        weighting.push({key: item, value: list[item]});
        total += list[item];
    }
    // generate random number between 1 and total
    var rand = Math.floor(Math.random() * total);
    // figure out which weighted slot it fits in
    var cum = 0;
    for (var i = 0; i < weighting.length; i++) {
        cum += weighting[i].value;
        if (rand < cum) {
            return(weighting[i].key);
        }            
    }
    return(weighting[weighting.length - 1]);
} 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/ffwqQ/](http://jsfiddle.net/jfriend00/ffwqQ/)

* * *

这是它的工作原理。

它从活动对象和权重值开始。

```
var campaigns = {"c1":4, "c2":8, "c3":24}; 
```

然后，它构建一个临时数据结构，如下所示：

```
var weighting = [{key: "c1", value: 4}, {key: "c2", value: 8}, {key: "c3", value: 24}]; 
```

在创建该数据结构时，它会跟踪所有权重值的运行总计。

然后它会创建一个介于 0 和该总数之间的随机数。

然后，它遍历加权数组，将这些值相加，以找到第一个超过随机数的累积值。当它发现时，这就是被选中的插槽。

# ruby - Ruby 无法加载我安装的任何 gem（Ubuntu 服务器）

> ID：11533674
> 
> 赞同：0
> 
> 时间：2012-07-18T02:57:41.827
> 
> 标签：ruby, rubygems

我有一个简单的脚本，它使用`sinatra`. 应该很简单吧？显然不是。

编码：

```
require 'rubygems'
require 'sinatra' 
```

这就是全部。它失败了，说：

```
tekknolagi@eos ~/indexer $ ruby torrent.rb 
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- torrent-ruby (LoadError)
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from torrent.rb:2 
```

我`gem install`把它改了好几次，只是为了确保我不会发疯。可能出了什么问题，我该如何解决？

哦，这是我的已安装 gem 列表：

```
tekknolagi@eos ~/indexer $ gem list

*** LOCAL GEMS ***

rack (1.4.1)
rack-protection (1.2.0)
rake (0.9.2.2)
sinatra (1.3.2)
sqlite3 (1.3.6)
tilt (1.3.3)
torrent-ruby (0.1.4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:10:25.753

我相信你做的一切都是对的。很多时候，当 gem 未安装在正确的路径中时，会出现此自定义要求错误。尽量不要使用显式要求。改用这个..：

```
require_relative 'sinatra' 
```

# wpf - 我可以创建所有项目的大小可见的 WPF DXCarousel 吗？

> ID：11533676
> 
> 赞同：2
> 
> 时间：2012-07-18T02:58:02.787
> 
> 标签：wpf, devexpress, carousel

我使用 DXCarousel 有一段时间了，但据我所知，默认行为始终是使选定的项目位于中心前面，尺寸最大，并且一个或更多项目不可见，因为它们用于减小尺寸的缩放非常小。

我想要的只是具有这种行为的简单轮播：所选项目位于前面，尺寸较大（这已经完成），但最后面的项目的其余部分应该是可见的。

我想要的行为示例基于大多数轮播工作，例如 Jeep 网页中的这个轮播：http: [//www.jeep.com/en/](http://www.jeep.com/en/)

该页面将显示 5-6 款带有轮播界面的 Jeep 模型，并且所有项目都可见。

**更新：**

我还想要中心最远的项目。但这在某种程度上使用基本的 DXCarousel 实现是不可行的，因为它取决于将显示多少项目。

使用 DXCarousel 文档中“第 4 课 - 使用函数和参数”的函数分布示例对我有帮助，最远的对象位于中心，但方向以某种方式旋转了 90 度左右。

**更新 2：**

下面 Dimitry 的代码运行良好，但在播放动画时（选择时），最远的项目仍然不太明显。因此，我决定这不是我喜欢或想要的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T05:26:30.560

[我相信您可以使用CarouselPanel.OffsetDistributionFunction](http://documentation.devexpress.com/#WPF/DevExpressXpfCarouselCarouselPanel_OffsetDistributionFunctiontopic)使最远的项目可见，就像在此代码段中演示的那样：

```
<dx:CarouselPanel Name="carouselPanel1" AttractorPointIndex="2" PathSizingMode="Stretch"
                  IsRepeat="True"
                  Width ="400" Height="150" ItemSize="100,100"
                  ItemMovingPath="{StaticResource {ComponentResourceKey TypeInTargetAssembly={x:Type dx:CarouselPanel}, ResourceId=Ellipse}}"
                  >
    <dx:CarouselPanel.Resources>
        <Style TargetType="{x:Type Border}" 
               BasedOn="{StaticResource {ComponentResourceKey TypeInTargetAssembly={x:Type dx:CarouselPanel}, ResourceId=advancedCarouselItemStyle}}" >
            <Setter Property="Opacity" Value="1" /><!-- supress opacity animation -->
        </Style>
    </dx:CarouselPanel.Resources>
    <dx:CarouselPanel.OffsetDistributionFunction>
        <dx:LinearFunction K="0.8" B="0.1" />
    </dx:CarouselPanel.OffsetDistributionFunction>
    <Border Background="Red" />
    <Border Background="Green" />
    <Border Background="Blue" />
    <Border Background="Yellow" />
    <Border Background="Pink" />
</dx:CarouselPanel> 
```

我正在使用`f(x)=0.8*x+0.1`线性函数将项目分布间隔从默认范围（[0..1]）调整到 [0.1 ... 0.9] 范围。

# qt - 如何将控制权转移回以前的形式？

> ID：11533682
> 
> 赞同：0
> 
> 时间：2012-07-18T02:59:26.990
> 
> 标签：qt, qt-creator

我是 Qt 的新手。

我正在使用 Qt Creator 做一个项目。在我的项目中，我有一个主窗口。我从主窗口开始 4 个屏幕（一个接一个，显示初始化过程）。如果任何屏幕上有任何错误，则会打开一个新的 QDialog 屏幕。我的错误屏幕有两个按钮（重试，继续）。如果我按下重试，我必须重新开始初始化过程。例如;

```
void ErrorScreen1::on_Retry_pressed()
{
    Screen1 *scrn = new Screen1(this); 
    scrn->show();
    this->close();
} 
```

在上面的示例中，它重新启动了该过程。

有什么办法，我可以从它离开的地方开始初始化过程吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:07:54.583

通常，您应该以某种方式保持进程的当前状态，然后您可以恢复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T18:29:33.477

您是否考虑过将这四个对话框变成一个具有四个步骤的向导？下一个按钮可以用于继续，并且您可以在每个有意义的页面上都有一个重试按钮，只有该页面执行必要的重试逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:49:52.297

我通过使用 QMessageBox 作为我的错误窗口解决了这个问题。

它允许我从我离开的地方开始我的过程。

```
void Screen1::ErrorMessage()
{
    timer->stop();

    QMessageBox *msgbox = new QMessageBox(this);
    msgbox->setWindowTitle("ERROR MESSAGE");
    msgbox->setText("Initialization Failed.");
    msgbox->setStandardButtons(QMessageBox::Cancel | QMessageBox::Retry);
    msgbox->setDefaultButton(QMessageBox::Retry);

    int ret = msgbox->exec();

    switch (ret)
    {
        case QMessageBox::Retry: timer->start(); break;

        case QMessageBox::Cancel:
            timer->disconnect();
            ui->progressBar->setValue(0);
            break;

        default: break;

    }
} 
```

# android - 如何在 Android 中正确使用背景图片修复布局大小？

> ID：11533689
> 
> 赞同：0
> 
> 时间：2012-07-18T03:01:15.227
> 
> 标签：android, layout, background, keyboard, scrollview

我需要有关 layout.xml 文件大小的帮助。我可能缺少一些基本的东西。我创建了一个带有 EditText、SearchButton 和 ListView 的搜索功能，我将在其中显示搜索结果。

每次单击 EditText 时，我都需要确保在显示软键盘时不会调整背景图片的大小，因此我的整个布局都放置在 ScrollView 中。这基本上是我使用 ScrollView 的唯一原因。但是 ScrollView 也会产生另一个问题，请看下图：

[http://tinypic.com/view.php?pic=6p3yix&s=6](http://tinypic.com/view.php?pic=6p3yix&s=6)

出于某种原因，我的背景图片拒绝填满整个“背景”区域。看看图片底部是黑色的。因此，当我在大屏幕手机上进行测试时，底部会变黑。我怎样才能设法用我的背景图片填充整个“背景”区域？请帮忙！

**编辑**：我已经测试过在没有 ScrollView 的情况下使用 layout.xml 文件，但没有让它工作，因为没有它，键盘会改变背景图片的大小。我也尝试在android清单文件中使用adjustPan，但没有任何运气。唯一有效的解决方案是使用 ScrollView，但现在我遇到了背景图片大小的问题....../谢谢！

**我的 xml 文件：**

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="wrap_content"
android:layout_width="fill_parent"
android:id="@+id/sorted_teams_scroll"
android:isScrollContainer="false">

<TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layout_search_task"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center|top"
        android:orientation="vertical"
        android:stretchColumns="1"
        android:weightSum="1.0" 
        android:background="@drawable/orginalbild01"
        >

        <TableRow>

              <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content" 
                 android:layout_weight="0.05">
            </TextView>

            <EditText
                android:id="@+id/search_task_field"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="0.65"
                android:hint="@string/SearchTaskHint" />

            <Button
                android:id="@+id/search_task_button"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_gravity="center"
                android:layout_weight="0.25"
                android:text="@string/Search" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="0.05" >
            </TextView>

        </TableRow>

        <TableRow>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="5dp" >
            </TextView>
        </TableRow>

        <TableRow android:paddingLeft="40dp" >

            <TextView
                android:id="@+id/search_task_column_names"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="0.33"
                android:textStyle="bold" >
            </TextView>

            <TextView
                android:id="@+id/search_task_column_names1"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="0.33"
                android:textStyle="bold" >
            </TextView>

            <TextView
                android:id="@+id/search_task_column_names2"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="0.33"
                android:textStyle="bold" >
            </TextView>
        </TableRow>

        <TableRow
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center">

            <ProgressBar
                android:id="@+id/search_task_progress_bar"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:indeterminateOnly="true"
                android:visibility="gone" />
        </TableRow>

        <TableRow
            android:paddingLeft="18dp"
            android:paddingRight="18dp"
             >

            <ListView

                android:id="@+id/search_task_list"
                android:layout_width="fill_parent"
                android:layout_height="355dp"
                android:gravity="left" />
        </TableRow>
    </TableLayout>
    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:09:43.943

如果你只有键盘的问题，那么......

只需在弹出键盘时尝试禁用布局调整大小 -
在您的清单文件中将其添加到您的活动中......

> `android:windowSoftInputMode="adjustPan"`

请发布完整的代码...在上面的代码中，您为表格布局设置背景..它将如何应用于完整背景..在没有滚动视图的情况下发布您的代码...

# msmq - 如何从 msmq 中的毒队列中清除消息

> ID：11533690
> 
> 赞同：2
> 
> 时间：2012-07-18T03:01:15.780
> 
> 标签：msmq

我可以在毒物队列中看到消息，但它们会在一段时间后被清除。我不确定这是怎么发生的。

如何将它们保留在毒物队列中，然后手动删除它们？

这是我在 WCF 服务中的 netMsmqBinding：

```
<-netMsmqBinding
        <-binding name="MsmqBindingNonTransactionalNoSecurity"  exactlyOnce="true" maxReceivedMessageSize="2147483647"
                 closeTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
                 receiveRetryCount="5"
                 maxRetryCycles="1"
                 retryCycleDelay="00:00:20"
                 receiveErrorHandling="Move">
          <-readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxNameTableCharCount="2147483647" />
          <-security mode="None"/>
        <-/binding>
      <-/netMsmqBinding> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:02:40.700

看[这里](http://msdn.microsoft.com/en-us/library/ms731380.aspx)
的 timeToLive 属性 基本上，默认是一天，如果消息在队列中超过一天就会被丢弃。

# java - Java Amazon SDK presign url 错误或不正确的实现？

> ID：11533696
> 
> 赞同：0
> 
> 时间：2012-07-18T03:01:53.157
> 
> 标签：java, amazon-s3, amazon-web-services

我只是想知道这是一个错误还是我错误地使用了 sdk。

Presigned URL 生成代码如下：

```
java.util.Date expiration = new java.util.Date();
long milliSeconds = expiration.getTime();
milliSeconds += 1000 * 60 * 60; // Add 1 hour.
expiration.setTime(milliSeconds);

URL url = s3.generatePresignedUrl(userPicturesBucket, "walala", expiration, HttpMethod.PUT); 
```

但这会在“签名”错误的地方生成一个预签名的 ulr。

> 签名=7iw7DfZ3Ed24kQpsV5Hp9VrJ%2BMo%3D

我可以通过使用 RESTClient 在完整地址上发送 PUT 请求来测试这一点。我会收到一个禁止回复，说**SignatureDoesNotMatch**。

但是，如果我使用[Amazon S3 签名测试](http://aws.amazon.com/code/199)器签署相同的请求，我将获得不同的“签名”

> 签名=ztp2nD6gVurYhAvQojpZhReSuwE%3D

然而，这个确实有效，发送 PUT 请求将返回 200 响应，并且将创建对象。

我的问题是，这是针对 java 错误的亚马逊 sdk 吗？或者为什么签名不同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:07:38.290

您的代码中可能存在错误：

```
generatePresignedUrlRequest.setExpiration(expiration);
// Next line should use the 'generatePresignedUrlRequest' object
URL url = s3.generatePresignedUrl(generatePresignedUrlRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T05:58:15.503

我不是 100% 确定，但我认为问题与以下事实有关：在发送请求时，url 中的签名还必须包括对象类型和格式，并且我用来检查的程序会自动添加字符集字段，即使这是一个图像。

因此，将此 "PUT\n\nimage/jpeg; charset=UTF-8\n" 添加到要签名的 URL 似乎已经解决了问题。

# sql - 检索任意时间间隔的聚合

> ID：11533700
> 
> 赞同：4
> 
> 时间：2012-07-18T03:02:31.683
> 
> 标签：sql, postgresql, generate-series

这是我到目前为止的查询，用于创建每日柱：

```
SELECT DISTINCT date_trunc('hour',t) AS date,
min(price) OVER w,
max(price) OVER w,
first_value(price) OVER w,
last_value(price) OVER w
FROM ticker
WINDOW w AS (PARTITION BY date_trunc('hour',t)); 
```

将“小时”更改为“分钟”或“天”会给我对应于这些单位的条形图。

但是，如果我想要 5 分钟或 15 分钟的酒吧怎么办？`date_trunc()`不支持这些，我正在寻找一种优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T03:17:37.537

以 15 分钟为间隔，以您的示例为基础：

```
SELECT DISTINCT
     , date_trunc('hour', t) AS h
     , floor(EXTRACT(minute FROM t) / 15) AS m15
     , min(price) OVER w
     , max(price) OVER w
     , first_value(price) OVER w
     , last_value(price) OVER w
FROM   ticker
WINDOW w AS (PARTITION BY date_trunc('hour', t)
                        , floor(extract(minute FROM t) / 15)); 
```

也可以工作 5 分钟。

* * *

对于任何定期时间间隔、任何时间段的更**通用的解决方案：**

```
WITH x AS (
    SELECT t1, t1 + interval '5min' AS t2
    FROM   generate_series(timestamp '2012-07-18 00:00'
                         , timestamp '2012-07-18 23:55'
                         , interval '5 min') AS t1
    )
SELECT DISTINCT ON (1)
       x.t1
     , min(price)         OVER w
     , max(price)         OVER w
     , first_value(price) OVER w
     , last_value(price)  OVER w
FROM   x
JOIN   ticker y ON y.t >= x.t1  -- use LEFT JOIN to include empty intervals
               AND y.t <  x.t2  -- don't use BETWEEN
WINDOW w AS (PARTITION BY x.t1)
ORDER  BY x.t1; 
```

更多解释的相关答案：

*   [在 Rails+Postgres 中按任意时间间隔计算记录的最佳方法](https://stackoverflow.com/questions/15576794/best-way-to-count-records-by-arbitrary-time-intervals-in-railspostgres/15577413#15577413)
*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

# c++ - 对于哪些对象指针值，指向成员运算符的指针会调用未定义的行为？

> ID：11533703
> 
> 赞同：-1
> 
> 时间：2012-07-18T03:02:45.560
> 
> 标签：c++, undefined-behavior, standards-compliance, pointer-to-member

使用指向成员运算符 (->*) 的指针时，对象的哪些指针值将调用未定义的行为？

具体来说，如果有问题的成员函数不访问任何成员并且不是虚拟的，则以下任何一个都是坏的？

*   空指针
*   指向已删除对象的指针

[这个问题](https://stackoverflow.com/questions/2474018/when-does-invoking-a-member-function-on-a-null-instance-result-in-undefined-beha)类似，但讨论了常规的成员函数调用。

用代码来说明：

```
#include <iostream>     
using namespace std;     

class Foo {     
public:     
  int member(int a)     
  {     
    return a+1;     
  }     
};     

typedef int (Foo::*FooMemFn)(int);     

int main(int argc, char** argv)     
{     
  FooMemFn funcPtr = &Foo::member;     
  Foo *fStar = 0;     
  Foo *fStar2 = new Foo();     
  delete fStar2;     

  int a1 = (fStar->*funcPtr)(4);  //does this invoke UB?                                                                                                                                                                                                                             
  int a2 = (fStar2->*funcPtr)(5); //what about this?                                                                                                                                                                                                                               

  cout<<"a1: "<<a1<<"  a2: "<<a2<<endl;     

  return 0;     
} 
```

关于未定义行为的问题是关于 C++ 标准的问题，所以我正在寻找对 C++ 标准部分的具体参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:08:13.437

```
int a1 = (fStar->*funcPtr)(4);  //does this invoke UB?  
int a2 = (fStar2->*funcPtr)(5); //what about this? 
```

是的。**两个语句都调用 UB**。
因为它们等价于：

```
fStar->member(4);
fStar2->member(5); 
```

分别。

# php - 从 html 页面解析标题和链接

> ID：11533705
> 
> 赞同：-1
> 
> 时间：2012-07-18T03:03:17.287
> 
> 标签：php

我想从此 html 页面获取标题和链接：

```
<div class="gs_r">
    <h3 class="gs_rt">
        <span class="gs_ctc">[BOOK]</span>
        <a href="http://example.com" onmousedown="return scife_clk(this.href,'','res','1')">titleA</a>
    </h3>
    <div class="gs_ggs gs_fl">
        <a href="http://exampleA.pdf" onmousedown="return scife_clk(this.href,'gga','gga','1')"> 
```

我怎样才能得到它们？

这是代码：

```
<?php
include 'simple_html_dom.php';
$url = 'http://example.com';
$html = file_get_html($url);
//get the first link
foreach($html->find('span[class=gs_ctc]')as $Link){
echo $link;
}
foreach($html->find('div[class=gs_ggs gs_fl]')as $docLink){
echo $docLink;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:25:49.147

对于第一个链接，它是`<span>`. 试试这个：

```
//get the first link
foreach($html->find('span[class=gs_ctc]') as $link){
    $link = $link->next_sibling();
    echo $link->plaintext;
    echo $link->href;
} 
```

至于第二个链接，它是一个孩子`<div>`：

```
foreach($html->find('div[class=gs_ggs gs_fl]') as $docLink){
    $link = $docLink->first_child();
    echo $link->href;
} 
```

编辑：第二个链接与第一个分组，所以你可以试试这个：

```
foreach($html->find('span[class=gs_ctc]') as $link){
    foreach($link->parent()->parent()->find('div[class=gs_ggs gs_fl]') as $docLink){
        $link1 = $link->next_sibling();
        $link2 = $docLink->first_child();
        if(preg_match('/\.pdf$/i', $link2->href) === 1){
            echo $link1->plaintext;
            echo $link1->href;
            echo $link2->href;
        }
    }
} 
```

# google-drive-api - 我上传了包含嵌入图像编码 base64 的 html 文件。但谷歌无法转换此文件

> ID：11533708
> 
> 赞同：0
> 
> 时间：2012-07-18T03:03:41.113
> 
> 标签：google-drive-api

作为标题，我上传了 html 文件，它包含由 base64 编码的嵌入图像。我可以使用 safari 网络浏览器正确查看所有内容。

我想将此 html 文件转换为 Google 文档，因此我在 GTLQueryDrive 实例中将“转换”标志打开为“是”。

似乎转换是成功的，但是当我尝试打开转换后的文件时，这只是进度控制而不是应该存在的图像。我等了几分钟，但进度控制永远不会结束。

我也手动尝试使用“导出到谷歌文档”将 html 文件转换为谷歌文档网站中的谷歌文档，但它没有用。

为什么 google 不能将此文件转换为自己的格式？

以下是我上传的html文件：

```
<img src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/4QBYRX...."> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:16:03.587

我认为您对 API 的期望过高。API 交易将上传单个内容块。作为一个选项 (convert=yes)，它将打开该 blob，对其进行解析并将其转换为原生 Google Doc。

您似乎期望服务器意识到有一个嵌入的内容标签，并且服务器应该以某种方式到达客户端，找到它并将其拉起。那永远不会发生。

您需要执行的步骤是：- 1\. 解析 HTML 以查找任何嵌入的图像 2\. 将每个图像上传到 Drive 并存储返回的项目 3\. 从 (2) 中返回的项目中获取 url 4\. 修补您的HTML 所以 IMG SRC 就是 (3) 中的那个 5\. 上传 HTML

# c# - WPF Gridview 复选框列标题 MVVM

> ID：11533711
> 
> 赞同：1
> 
> 时间：2012-07-18T03:03:57.493
> 
> 标签：c#, wpf, mvvm

我仍然在围绕整个 MVVM 模式进行思考，但我认为我已经很好地掌握了它，直到我尝试为我的 Gridview 创建一个复选框列。我需要用户能够选择列出的所有项目（通过标题复选框）或选择单独列出的项目。我将复选框的 IsChecked 属性数据绑定到我的视图模型上的两个布尔字段。单元格模板上的复选框按预期工作并触发属性更改事件。标题什么都不做。我在这里想念什么。再次，这对我来说仍然是新的，所以要温柔。此外，如果有什么我应该做的，或者更好的方法来完成这个……我全神贯注。

谢谢

**XAML**

```
 <UserControl x:Class="CheckBoxDemo.GridDemo"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <ListView ItemsSource="{Binding PersonList}">
        <ListView.View>
            <GridView>
                <GridViewColumn Width="50">
                    <GridViewColumn.HeaderTemplate>
                        <DataTemplate>
                            <CheckBox IsChecked="{Binding IsMainSelected}"/>
                        </DataTemplate>
                    </GridViewColumn.HeaderTemplate>
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox IsChecked="{Binding IsSelected}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}" Width="100"></GridViewColumn>
            </GridView>
        </ListView.View>

    </ListView>
</Grid> 
```

**视图模型**

```
class GridDemoViewModel:INotifyPropertyChanged
{
    public List<Person> PersonList { get; private set; }
    // Fields...
    private bool _isMainSelected;

    public bool IsMainSelected
    {
        get { return _isMainSelected; }
        set
        {
            _isMainSelected = value;
            NotifyPropertyChanged("IsMainSelected");

        }
    }

    public GridDemoViewModel()
    {
        PersonList = new List<Person>();
        PersonList.Add(new Person { Name = "John"});
        PersonList.Add(new Person { Name = "Tom" });
        PersonList.Add(new Person { Name = "Tina" });
        PersonList.Add(new Person { Name = "Mary" });
        PersonList.Add(new Person { Name = "Mia"});
        PersonList.Add(new Person { Name = "Crystal" });

    }
    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

**人员类**

```
public class Person:INotifyPropertyChanged
{
    public string Name { get; set; }
    // Fields...
    private bool _isSelected;

    public bool IsSelected
    {
        get { return _isSelected; }
        set
        {
            if (_isSelected == value)
                return;
            _isSelected = value;
            NotifyPropertyChanged("IsSelected");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:15:12.663

问题是 GridViewColumn 不是可视树的一部分。这意味着它不继承父ListView的DataContext。您必须找到引用 ViewModel 的其他方式。[查看 Josh Smith 的 DataContextSpy](http://www.codeproject.com/Articles/27432/Artificial-Inheritance-Contexts-in-WPF)，它允许您轻松引入“人工继承”的 DataContext

```
<UserControl.Resources>
     <spy:DataContextSpy x:Key="Spy" />
</UserControl.Resources>

<DataTemplate>
   <CheckBox IsChecked="{Binding Source={StaticResource Spy} Path=DataContext.IsMainSelected}"/>
</DataTemplate> 
```

# python - 使用 fastcgi 在 lighttpd 中托管 Flask 应用程序

> ID：11533712
> 
> 赞同：2
> 
> 时间：2012-07-18T03:04:01.007
> 
> 标签：python, flask, fastcgi, lighttpd

我在尝试使用 fastcgi 托管在 lighttpd 中的 Flask python 框架创建一个简单的 Web 服务时遇到了很多问题。

我完成了 lighttpd.conf 和 conf.d/fastcgi.conf 文件中的所有配置。

但是，当我重新启动 lig​​httpd 服务器时它无法停止时会发生什么：

我运行以下命令

```
lighttpd -f topic_service.fcgi 
```

我得到

```
topic_service.fcgi line: 2 pos: 29 parser failed somehow near here: flup.server.fcgi 
```

然后我删除了 .fcgi 文件的所有内容，并且在运行相同的命令时返回了以下错误：

```
2012-07-18 02:42:51: (configfile.c.1227) a default document-root has to be set  
2012-07-18 02:42:51: (server.c.627) setting default values failed 
```

我在配置文件中设置了 server.document 根目录，如下所示，但没有帮助：

```
$HTTP["url"] =~ "75.101.128.251/topic_service" {
        server.document-root = "/home/ec2-user/topic_service"
        fastcgi.server = (
                "/topic_service.fcgi" =>
                ((
                        "socket" => "/tmp/topic_service-fcgi.sock",
                        "bin-path" => "/home/ec2-user/topic_service/topic_service.fcgi",
                        "check-local" => "disable",
                        "max-procs" => 1
                ))
        )
        url.rewrite-once = (
                "^(/static.*)$" => "$1",
                "^(/.*)$" => "/topic_service.fcgi$1")
    } 
```

请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:12:57.267

您必须设置通用`server.document-root`（阅读：不在任何条件内！）。您可以根据需要在 if 语句中覆盖它。

[http://redmine.lighttpd.net/projects/1/wiki/server_document-rootdetails](http://redmine.lighttpd.net/projects/1/wiki/server_document-rootdetails)

# svn - SVN 错误“工作副本 xxx 已锁定”并且没有 .lock 文件

> ID：11533716
> 
> 赞同：4
> 
> 时间：2012-07-18T03:04:35.643
> 
> 标签：svn

我的工作副本被锁定并搜索有关它的解决方案，我发现一个说 .lock 文件应该被删除。但问题是我的文件夹中没有创建 .lock 文件。如何解决这个问题。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T03:16:46.607

SVN 默认使用隐藏目录，.svn 或 _svn。在修补这些文件夹之前：

通常你能做的最好的事情是启动 TortoiseSVN (http://tortoisesvn.net/) 的副本并将其连接到你的存储库和工作目录。Tortoise 与 Explorer 挂钩，因此它可以让您更全面地了解您的工作文件夹结构。在有问题的文件/文件夹上尝试解锁命令。如果这有效，（或无效）对相关项目的父文件夹（更高一级文件夹）进行“清理”，然后再次尝试所需的操作。

如果您使用 Ankh 或类似的 VS 插件，这些锁定问题可能相当普遍，而且很烦人。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:51:01.520

SVN 是一个很棒的工具，但是当事情没有得到检查或完全和很好地提交时会出现可用性问题。它的状态信息存储在服务器和客户端上。它的美妙之处在于服务器永远不会被搞砸，而且它永远不会被你的原始源文件搞砸。

也就是说，我有 2 条建议给你

1.  当您遇到客户端问题时，`dont`请坐下来研究和调试 svn 问题。这是浪费时间和精力。知道您的数据没有丢失，并且您的服务器只是`wow`:)。
2.  在不同的位置签出您的项目。从旧位置将所有文件复制到新位置（使用 meld、araxis 合并或超越比较）并提交。

注意：不要将目录从旧位置复制到新位置。正如@Steve Py 正确指出的那样，目录包含 .svn 文件夹并保存签出项目的特定实例的状态信息。如果必须，请在新位置创建新目录并仅复制文件。

提示：当您使用目录比较工具时，其更改（从右到左或从左到右）是不可逆的。一旦你按下那个按钮，你就完蛋了:)。所以我说的那个旧位置，备份它:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T22:19:49.487

如果您还收到错误“ **sqlite：尝试写入只读数据库**”和“**工作副本 xxx 锁定**”错误，那么它似乎也可能是由于写入工作副本的权限不足造成的。

我在[这里](https://stackoverflow.com/q/15100243/612253)单独探讨了这个问题。修复权限解决了问题。

令人沮丧的是，对于这样一个简单的问题没有给出更合适的错误！

# node.js - Node.js 和 SPDY ...不工作？

> ID：11533720
> 
> 赞同：1
> 
> 时间：2012-07-18T03:05:32.707
> 
> 标签：node.js, spdy

我似乎无法让 node.js (v0.8.2) 与 spdy (v1.2.1) 一起使用。这是我在咖啡脚本中的代码，因为它很酷：

```
spdy = require 'spdy'
fs = require 'fs'

DEFAULT_PORT = 8000

DEFAULT_SERVER_OPTIONS =
  key: fs.readFileSync(__dirname + '/keys/privatekey.pem')
  cert: fs.readFileSync(__dirname + '/keys/certificate.pem')
  ca: fs.readFileSync(__dirname + '/keys/certrequest.csr') 

spdy.createServer DEFAULT_SERVER_OPTIONS, (request, response) ->
    console.log 'request made...'
    response.writeHead 200
    response.write 'goodbye cruel world'
    response.end()
.listen DEFAULT_PORT
console.log 'Server running on ' + DEFAULT_PORT 
```

我看到“服务器在 8000 上运行”，但是当尝试在 Chrome 中连接到 127.0.0.1:8000 时，我什么也得不到，并且“发出的请求......”永远不会消失。

非常感谢你们！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T04:18:02.403

确保您通过 HTTPS 访问它。又名：（`https://127.0.0.1:8000/`在这里工作正常）

SPDY 是通过 SSL NPN 协商的，这意味着您的服务器只能通过 HTTPS 协议访问。

# c# - 错误 1 修饰符 'abstract' 对该项目无效

> ID：11533722
> 
> 赞同：0
> 
> 时间：2012-07-18T03:06:07.663
> 
> 标签：c#, .net, interface, abstract

我正在尝试构建我的 C# 项目，但出现错误：

```
The modifier 'abstract' is not valid for this item 
```

在以下界面中：

```
namespace program.Drawing.Fields
{
    using System;
    using System.Collections.Generic;
    using System.Runtime.CompilerServices;

    public interface IFieldHolder
    {
        abstract event FieldChangedEventHandler FieldChanged;

        void AddField(Field field);
        Field GetField(FieldType fieldType);
        List<Field> GetFields();
        bool HasField(FieldType fieldType);
        void RemoveField(Field field);
        void SetFieldValue(FieldType fieldType, object value);
    }
} 
```

项目：FieldChanged；

```
The modifier 'abstract' is not valid for this item 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:07:21.853

根据定义，接口是抽象的，因为实现类必须实现它们。您不能在其中使用 abstract 关键字。（范围界定也是如此）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:13:13.793

我不确定您在这里尝试做什么，但您可能会发现以下信息很有帮助：

“接口和接口成员是抽象的；接口不提供默认实现。”

[接口（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173156.aspx)

也就是说，接口的成员是隐式抽象的。

# symfony - 错误的时间使用 Gedmo Bundle

> ID：11533726
> 
> 赞同：0
> 
> 时间：2012-07-18T03:06:46.983
> 
> 标签：symfony, bundle

我使用 Gedmo 包自动将时间保存在两行“created_at”和“updated_at”中，一切正常，但它保存的数据时间错误，例如，当我在下午 2:00 保存某些内容时，我发现它放了 4： 00pm 在数据库中...非常奇怪...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:45:33.160

在您的机器上找到 php.ini 文件

在我位于“/etc/php5/apache2/php.ini”的机器文件中

在 [Date] 部分下找到带有 ;date.timezone = 的行，并根据[PHP 的时区列表将其设置为您的时区](http://us2.php.net/manual/en/timezones.php)

我选择了亚洲/加尔各答，因为我住在那里。另外，请确保删除行首的分号！

不要忘记重启 apache - **sudo service apache2 restart**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:59:30.740

使用下面的 php 函数更改时区。

```
date_default_timezone_set('YourTimeZone'); 
```

有关更多详细信息，请参阅： http: [//php.net/manual/en/function.date-default-timezone-set.php](http://php.net/manual/en/function.date-default-timezone-set.php)

# android - 使用 Mediaplayer 重播同一个文件

> ID：11533728
> 
> 赞同：4
> 
> 时间：2012-07-18T03:07:10.653
> 
> 标签：android

我希望你能提供一些指导。我创建了一个媒体播放器 (mp1) 的“最终”实例，并在一个按钮上单击它播放一个 mp3 文件。然后，当我单击第二个按钮时，我需要停止该文件。这工作正常，直到我再次尝试播放文件 - 没有任何反应。我认为因为 mp1 实例是“最终的”，所以当我停止它时，它会永远停止，直到我重新启动应用程序。我不想暂停文件，我想停止它然后重新启动它。欢迎任何想法。我尝试将 mp1 创建放在按钮中。这一直有效，直到应用程序崩溃 - 可能是因为多个媒体播放器创建使用了所有设备内存？

谢谢！！！

```
// const mediaplayer
mp1 = MediaPlayer.create(getApplicationContext(), R.raw.mysound);

...

// in button 1
if (radSound1.isChecked()) {
               radSound2.setChecked(false); // ...set radiobutton 2 to false
                mp1.start();                 // ...play the mp3 file
               }

...

// in button 2
if (mp1 != null){
                  mp1.reset();
                   //mp1.setDataSource();
                   // mp1.prepare(); 
              } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T03:50:07.460

按照[这里](http://developer.android.com/reference/android/media/MediaPlayer.html)的状态图。`stop()`停止播放并使您处于停止状态。在开始下一次游戏之前，您应该先跟注`prepare()`，然后`start()`再跟注。

因此，在按钮 1 中，您应该跟注`start()`，而在按钮 2 中，您应该跟注`stop()`和`prepare()`。初始化很好，只需执行一次并将其保留在按钮之外。

也接受你的问题的答案，包括这个，这样像我这样的人将来会更有动力回复他们。

# javascript - 我怎样才能让我的代码像我在 jsfiddle 中一样工作

> ID：11533733
> 
> 赞同：0
> 
> 时间：2012-07-18T03:07:35.107
> 
> 标签：javascript, jquery, html

大家好，我一直在使用[http://jsfiddle.net](http://jsfiddle.net)，我在 jsfiddle 上构建和测试的示例应用程序运行良好，并且可以按我的意愿工作。现在我已经尝试复制我的代码并在我的本地机器上运行它，但它似乎不起作用，但相同的确切代码正在在线工作（jsfiddle）。这是工作版本[http://jsfiddle.net](http://jsfiddle.net)。以下是我在本地不起作用的代码结构：

```
<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8" />
<meta name="keywords" content="key, words" />
<meta name="description" content="description" />
<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="alternate" title="Website Feed" href="rss.php" type="application/rss+xml" />
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<title>AstroSD</title>
<script>
var MyCheckboxes=$("input[name='toggle']");

MyCheckboxes.change(function() {
$("#kickoff").toggle(MyCheckboxes.is(":checked"));
$("#goal").toggle(MyCheckboxes.is(":checked"));
$("#halfull").toggle(MyCheckboxes.is(":checked"));
$("#halftime/fulltime").toggle(MyCheckboxes.is(":checked"));   
});

$(function(){
$("#slideThree").change(function() {
$('#move').toggleClass("show-hide", this.checked)
$('#back').toggleClass("show-hide", this.checked)
$('#goal').toggleClass("show-hide", this.checked)
$('#halfull').toggleClass("show-hide", this.checked)
}).change();
})
</script></head> 
```

我需要帮助来使用我在[http://jsfiddle.net/](http://jsfiddle.net/)中的脚本构建头部，因此它会相应地工作。我相信这里遗漏了一些东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:11:00.553

jsfiddle的src代码和你上面的代码的唯一区别是：

希望您正确地给出了 Jquery src：（另外，如果我可以建议 - 请使用最新的 JQ 库，即 1.7 .. 版本，但您更了解您的代码）

请将此添加到您的页面，希望它符合需要。`:)`

*脚本*

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.4.4.min.js'></script> 
```

# eclipse-rcp - 如何为 BIRT 报表设计器重新命名 RCP 应用程序？

> ID：11533734
> 
> 赞同：2
> 
> 时间：2012-07-18T03:07:36.447
> 
> 标签：eclipse-rcp, birt

我对 RCP 应用程序 + BIRT 很陌生，所以我实际上不知道从哪里开始。

我的目标是能够创建一个类似于 RCP Designer for BIRT (http://download.eclipse.org/birt/downloads) 的设计器。但是，我需要更改启动画面、徽标等（简而言之，品牌）。从这篇文章（http://www.eclipse.org/forums/index.php/t/261312/），我知道我应该得到 BIRT 的源代码，并且......基本上从那里开始。

但是，我从哪里开始？我知道这几乎是一个菜鸟的问题，但我一直在寻找如何使用 BIRT 源的品牌，但我似乎找不到关于如何做到这一点的体面的帖子。源代码中有一百多个插件/包，我似乎看到了我应该修改的东西的点点滴滴，但我似乎无法弄清楚如何将它们拼凑在一起。更糟糕的是，文档中的“集成/构建”部分告诉我应该使用 Java 应用程序运行配置来启动应用程序，而我认为它应该是一个产品配置文件......

因此，我是否要创建一个新的 RCP 应用程序并创建扩展点（我使用的是 RCP 3.x 而不是 4.x）...？如果是这样，我需要为设计器（而不是设计器引擎......设计器 RCP）导入哪些（插件/包）？然后我会从那里创建产品配置？

如果没有，有没有办法直接修改源并从那里加载徽标和其他图像？

任何帮助将不胜感激。一直在阅读文档和一些电子书……但我不知道应该从哪里开始，这似乎是一项简单的任务:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:58:14.780

一些提示：

1.  下载 BIRT RCP 应用程序。
2.  打开标准 Eclipse SDK 并将 BIRT RCP 应用程序设置为目标平台
3.  打开插件视图
4.  导航到捆绑`org.eclipse.birt.report.designer.ui.rcp`右键单击->导入为->源项目
5.  更改品牌 - 您现在可以编辑产品文件、清单等...
6.  再次导出。

# javascript - 用于单选按钮组中“for”标签属性的 Knockout.js 唯一 ID

> ID：11533739
> 
> 赞同：3
> 
> 时间：2012-07-18T03:08:50.753
> 
> 标签：javascript, html, dom, knockout.js

我在[这里](https://stackoverflow.com/questions/9233176/unique-ids-in-knockout-js-templates/9235013)实现了一个非常狡猾的答案的变体，用于为我的 Knockout 标记中的输入和相应标签生成唯一 ID。我的最终目标是可点击的标签，而不是唯一的 ID 本身——我之前一直在每个标签上使用点击绑定来导航 DOM 以选择其输入，但这似乎很糟糕且效率低下。

但是，链接的解决方案不适用于单选按钮组，其中组中的每个单选按钮都绑定回同一个可观察对象。在我的情况下，我的无线电组要么是真/假（绑定回布尔可观察对象），要么代表一个枚举，在这种情况下，可观察对象包含一个整数值。所提供的解决方案导致组中的所有无线电（及其相应的属性标签）获得相同的 ID。

更复杂的是，这些单选按钮集本身会出现多次。例如，可能有 10 个模板 div，每个 div 带有一组 3 个单选按钮：红色、绿色、蓝色 - 每个单选都有一个标签，我想在点击时激活相应的单选。

我一直在努力修改这个解决方案以适应，但我的大脑现在已经被锁定了。欢迎任何想法！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T07:34:37.030

根据我的评论，使用 RP 绑定和修改[的小提琴](http://jsfiddle.net/tyrsius/52xDw/10/)

```
ko.bindingHandlers.uniqueId = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor();
        var idMod = 'id-' + (allBindingsAccessor().uniqueMod || 0);
        value[idMod] = value[idMod] || ko.bindingHandlers.uniqueId.prefix + (++ko.bindingHandlers.uniqueId.counter);

        element.id= value[idMod];
    },
    counter: 0,
    prefix: "unique"
};

ko.bindingHandlers.uniqueFor = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor();
        var idMod = 'id-' + (allBindingsAccessor().uniqueMod || 0);
        value[idMod] = value[idMod] || ko.bindingHandlers.uniqueId.prefix + (++ko.bindingHandlers.uniqueId.counter);

        element.setAttribute("for", value[idMod]);
    } 
}; 
```

示例使用：

```
<input type="radio" data-bind="checked: gender, attr: { name: 'gender-' + id() },
     uniqueId: gender, uniqueMod: 'male'" value="1" />
<label data-bind="uniqueFor: gender, uniqueMod: 'male' ">Male</label>

<input type="radio" data-bind="checked: gender, attr: { name: 'gender-' + id() },
    uniqueId: gender, uniqueMod: 'female'" value="2" />
<label data-bind="uniqueFor: gender, uniqueMod: 'female '">Female</label> 
```

# android - android将值从javascript传递给android

> ID：11533746
> 
> 赞同：0
> 
> 时间：2012-07-18T03:09:53.847
> 
> 标签：android, google-maps-api-3

我正在使用 webview 使用 google map api 3 开发 android 应用程序。我的 android 应用程序允许用户点击地图上标记的位置，然后将用户发送到 android 上的活动（从 webview 到另一个活动）。我的问题是我不知道从哪里开始。我认为它如何将 javascript 值传递给 java(android)。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:18:10.420

检查以下安卓文档。 [http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

# javascript - 将 this 关键字与 selectedIndex 一起使用的优势？

> ID：11533750
> 
> 赞同：0
> 
> 时间：2012-07-18T03:10:36.517
> 
> 标签：javascript, this, selectedindex

这样做有什么好处：

```
document.getElementById('mySelectBox').options[this.selectedIndex].value 
```

对此：

```
document.getElementById('mySelectBox').options[selectedIndex].value 
```

只是好奇。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T03:21:57.493

是的，如果您不使用`this`，您将访问一个变量而不是对象中的属性。

Javascript 不是面向对象的，因此您永远不在对象的范围内，您可以访问属性而不指定它们属于哪个对象。

无论如何，如果`this`引用元素，只需使用：

```
this.options[this.selectedIndex].value 
```

# jquery - 悬停时滑出细节

> ID：11533752
> 
> 赞同：0
> 
> 时间：2012-07-18T03:10:39.417
> 
> 标签：jquery, html, css, responsive-design

我想知道是否有一个 jQuery 插件可以做类似于悬停这些图像的效果[http://bufferapp.com/extras](http://bufferapp.com/extras)，看起来像一个小抽屉向上滑动，我想知道是什么最佳解决方案——项目需要它。

我开始研究我自己的版本（[这是迄今为止的演示](http://f.cl.ly/items/13191t1d2j092r0N3f1z/Screen%20Recording.mov)），它进展顺利仍在测试它......但我似乎无法找到现成的插件，也许我不是在寻找正确的东西， 任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:38:03.127

尝试使用[JQuery UI](http://jqueryui.com/home)的[Show](http://jqueryui.com/demos/show/) / [Hide](http://jqueryui.com/demos/hide/)。在/的演示中，该操作用于按钮[单击](http://api.jquery.com/click/)... 而不是您必须使用类似[.mouseover](http://api.jquery.com/mouseover/)的东西。`show``hide`

# linux - 将 Linux 内核 .config 文件复制到其他版本是否安全？

> ID：11533758
> 
> 赞同：3
> 
> 时间：2012-07-18T03:11:20.003
> 
> 标签：linux, linux-kernel

特别是将 .config 文件从内核 3.0.1 复制到内核 3.2.1 是否安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T03:12:29.883

是的。但请确保您运行`make oldconfig`以便将新选项添加​​到其中。

# c# - 使用 max 查询实体框架

> ID：11533760
> 
> 赞同：2
> 
> 时间：2012-07-18T03:11:41.873
> 
> 标签：c#, linq, entity-framework

有人要求我将 T-SQL 语句转换为 LINQ to EF 查询：

```
SELECT * FROM  CopperPrices  
where ID in 
  (select max(ID) as ID from copperprices group by market, pname) 
```

我使用常见的 LINQ-TO-OBJECT 想法并给出以下答案：

```
class CopperPrice
{
    public int ID { get; set; }
    public string Market { get; set; }
    public string PName { get; set; }
}

var result = from p in copperPrices
      group p by new { Market = p.Market, PName = p.PName } into g
      select g.OrderByDescending(p => p.ID).First(); 
```

但由于以下异常，它在 EF 中不起作用：

> 方法 'First' 只能用作最终查询操作。考虑在这种情况下使用“FirstOrDefault”方法

上面的 T-SQL 语句可以转换成一条 LINQ 查询语句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:09:18.053

干得好：

```
var result1 = copperPrices.GroupBy(g => new { g.Market, g.PName }).Select
     (
         x => x.ToList().OrderByDescending(z => z.ID).FirstOrDefault()
     ); 
```

这里的重要部分是 .Select(x => x.ToList())。ToList 返回 IGrouping 的值，每个值都是您最终想要排序并选择最大值的值。

# java - 安卓 OpenGL 错误

> ID：11533765
> 
> 赞同：-2
> 
> 时间：2012-07-18T03:12:30.523
> 
> 标签：java, android, netbeans, opengl-es, opengl-es-2.0

我是 OpenGL 和 Android 的新手，我的代码不起作用，我不知道为什么。我不知道如何使用 Netbeans 和 AVD (android 4.0.3) 调试代码，所以我请求您的帮助。

```
package com.egg.game.test;

import android.opengl.GLES20;
import java.nio.FloatBuffer;

public class glTriangle {

private int mProgram;
private int mPositionHandle;
private int mColorHandle;
private static int COORDS_PER_VERTEX = 3;
private int vertexStride = Float.SIZE * COORDS_PER_VERTEX;
private int vertexCount;
private FloatBuffer vertexBuffer;
private float[] color;
private final String vertexShaderCode =
        "attribute vec4 vPosition;"
        + "void main() {"
        + "  gl_Position = vPosition;"
        + "}";
private final String fragmentShaderCode =
        "precision mediump float;"
        + "uniform vec4 vColor;"
        + "void main() {"
        + "  gl_FragColor = vColor;"
        + "}";

public glTriangle() {

    color = new float[]{.5f, .2f, 0f, 1.0f};

    vertexCount = 3;

    vertexBuffer = FloatBuffer.allocate(Float.SIZE * COORDS_PER_VERTEX * vertexCount);
    float[] buffer = vertexBuffer.array();
    buffer[0] = 0f;
    buffer[1] = 0f;
    buffer[2] = 0f;
    buffer[3] = 1f;
    buffer[4] = 0f;
    buffer[5] = 0f;
    buffer[6] = 0f;
    buffer[7] = 1f;
    buffer[8] = 0f;

    int vertexShader = GameRederer.loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    int fragmentShader = GameRederer.loadShader(GLES20.GL_FRAGMENT_SHADER, fragmentShaderCode);

    mProgram = GLES20.glCreateProgram();             // create empty OpenGL ES Program
    GLES20.glAttachShader(mProgram, vertexShader);   // add the vertex shader to program
    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment shader to program
    GLES20.glLinkProgram(mProgram);                  // creates OpenGL ES program executables
}

public void draw() {
    // Add program to OpenGL ES environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's vPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "vPosition");

    // Enable a handle to the triangle vertices
    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // Prepare the triangle coordinate data
    GLES20.glVertexAttribPointer(mPositionHandle,
            COORDS_PER_VERTEX,
            GLES20.GL_FLOAT,
            false,
            vertexStride,
            vertexBuffer);

    GLES20.glEnableVertexAttribArray(mPositionHandle);

    // get handle to fragment shader's vColor member
    mColorHandle = GLES20.glGetUniformLocation(mProgram, "vColor");

    // Set color for drawing the triangle
    GLES20.glUniform4fv(mColorHandle, 1, color, 0);

    // Draw the triangle
    GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, vertexCount);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
} 
```

我将缓冲区代码更改为：

```
 vertexBuffer = ByteBuffer.allocateDirect(Float.SIZE * COORDS_PER_VERTEX * vertexCount).order(ByteOrder.nativeOrder()).asFloatBuffer();
    vertexBuffer.put(0f);
    vertexBuffer.put(0f);
    vertexBuffer.put(0f);
    vertexBuffer.put(10f);
    vertexBuffer.put(0f);
    vertexBuffer.put(0f);
    vertexBuffer.put(0f);
    vertexBuffer.put(10f);
    vertexBuffer.put(0f);
    vertexBuffer.position(0); 
```

现在我没有收到任何错误但是！！！！我的三角形没有画好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:57:02.910

您在 FloatBuffer 中分配浮点数并将它们转换为数组。然后你填充你的数组，而不是你的 FloatBuffer，也许这就是错误。

```
float[] buffer = new float[] {
...
};
vertexBuffer.put(buffer);
vertexBuffer.position(0); 
```

我不确定，也许 .array() 返回一个可变引用，也许它克隆了数据。就试一试吧！

# c# - C# 使用安全/权限设置将文件夹复制到另一个目的地

> ID：11533767
> 
> 赞同：5
> 
> 时间：2012-07-18T03:12:33.770
> 
> 标签：c#, .net, visual-studio-2010, directory, copy

我正在制作一个程序，它可以复制文件夹并将其传输到另一个位置，包括属性、权限、安全设置。

到目前为止，我让 Attribution 起作用，但在权限/安全设置方面存在问题。这是我的代码：

```
Directory.CreateDirectory(Destination);
DirectoryInfo DestAttribute = new DirectoryInfo(Destination);
DestAttribute.Attributes = Source.Attributes; // Copies Attributes from Source to Dest

AuthorizationRuleCollection Rule;
DirectorySecurity DestSecurity = Source.GetAccessControl();
Rule = DestSecurity.GetAccessRules(true, true, typeof(NTAccount));
DestSecurity.AddAccessRule(Rule);
DestAttribute.SetAccessControl(DestSecurity); 
```

任何人有任何建议让这个工作？谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-03T15:09:25.967

[MSDN：如何将 ACL 信息从一个文件复制到另一个文件](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.setaccesscontrol.aspx)

SetAccessControl 方法仅保留在对象创建后已修改的 DirectorySecurity 对象。如果未修改 DirectorySecurity 对象，则不会将其保存到文件中。因此，不可能从一个文件中检索 DirectorySecurity 对象并将同一对象重新应用到另一个文件。

要将 ACL 信息从一个文件复制到另一个文件：

1.  使用 GetAccessControl 方法从源文件中检索 DirectorySecurity 对象。

2.  为目标文件创建一个新的 DirectorySecurity 对象。

3.  使用源 DirectorySecurity 对象的 GetSecurityDescriptorBinaryForm 或 GetSecurityDescriptorSddlForm 方法来检索 ACL 信息。

4.  使用 SetSecurityDescriptorBinaryForm 或 SetSecurityDescriptorSddlForm 方法将在步骤 3 中检索到的信息复制到目标 DirectorySecurity 对象。

5.  使用 SetAccessControl 方法将目标 DirectorySecurity 对象设置为目标文件。

例子：

```
DirectoryInfo dir1 = new DirectoryInfo(@"C:\Temp\Dir1");
DirectoryInfo dir2 = new DirectoryInfo(@"C:\Temp\Dir2");  

DirectorySecurity ds1 = dir1.GetAccessControl();
DirectorySecurity ds2 = new DirectorySecurity();
ds2.SetSecurityDescriptorBinaryForm(ds1.GetSecurityDescriptorBinaryForm());
dir2.SetAccessControl(ds2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T03:21:46.160

这似乎是以下内容的副本：

[原始问题...](https://stackoverflow.com/questions/9995311/copying-folders-and-preserving-permissions)

（来自原始问题的代码示例）

```
FileInfo file1 = new FileInfo(@"c:\test.txt");
FileInfo file2 = new FileInfo(@"c:\test2.txt");
StreamReader sr1 = new StreamReader(file1.Open(FileMode.Open));
StreamWriter sw1 = new StreamWriter(file2.Open(FileMode.Create));
sw1.Write(sr1.ReadToEnd());
sr1.Close();
sw1.Close();
FileSecurity ac1 = file1.GetAccessControl();
ac1.SetAccessRuleProtection(true, true);
file2.SetAccessControl(ac1); 
```

我将以下方法放在一起，它似乎可以满足您的需求...

```
private static void FolderCopy(String sourceFolder, String destinationFolder)
{
    DirectoryInfo sourceDirectory = new DirectoryInfo(sourceFolder);
    DirectoryInfo destinationDirectory;

    if (!sourceDirectory.Exists)
    {
        throw new DirectoryNotFoundException("Source folder not found: " + sourceFolder);
    }

    if (!Directory.Exists(destinationFolder))
    {
        destinationDirectory = Directory.CreateDirectory(destinationFolder);
    }
    else
    {
        destinationDirectory = new DirectoryInfo(destinationFolder);
    }

    DirectorySecurity security = sourceDirectory.GetAccessControl();

    security.SetAccessRuleProtection(true, true);
    destinationDirectory.SetAccessControl(security);

    var filesToCopy = sourceDirectory.GetFiles();

    foreach (FileInfo file in filesToCopy)
    {
        String path = Path.Combine(destinationFolder, file.Name);
        FileSecurity fileSecurity = file.GetAccessControl();

        fileSecurity.SetAccessRuleProtection(true, true);

        file.CopyTo(path, false);

        FileInfo copiedFile = new FileInfo(path);

        copiedFile.SetAccessControl(fileSecurity);
    }
} 
```

克里斯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-24T10:54:08.890

基于[Chris Keller 的](https://stackoverflow.com/users/933433/chris-keller)答案的递归版本

```
 /// <summary>
    /// Copy directory recursive with permissions, overwrite existing
    /// </summary>
    /// <param name="sourceFolder"></param>
    /// <param name="destinationFolder"></param>
    public static void CopyDirectory(string sourceFolder, string destinationFolder)
    {
        var sourceDirectory = new DirectoryInfo(sourceFolder);
        if (!sourceDirectory.Exists) throw new DirectoryNotFoundException("Source folder not found: " + sourceFolder);

        var destinationDirectory = !Directory.Exists(destinationFolder) ? Directory.CreateDirectory(destinationFolder) : new DirectoryInfo(destinationFolder);

        CopyDirectory(sourceDirectory,destinationDirectory);
    }

    public static void CopyDirectory(DirectoryInfo sourceDirectory, DirectoryInfo destinationDirectory)
    {
        if(sourceDirectory == null) throw new ArgumentException("sourceDirectory");
        if(destinationDirectory == null) throw new ArgumentException("destinationDirectory");

        var security = sourceDirectory.GetAccessControl();

        security.SetAccessRuleProtection(true, true);
        destinationDirectory.SetAccessControl(security);

        var dirsToCopy = sourceDirectory.GetDirectories();
        foreach (var dirToCopy in dirsToCopy)
        {
            var destSubDirPath = Path.Combine(destinationDirectory.FullName,dirToCopy.Name);
            var destinationSubDir = !Directory.Exists(destSubDirPath) ? Directory.CreateDirectory(destSubDirPath) : new DirectoryInfo(destSubDirPath);
            CopyDirectory(dirToCopy,destinationSubDir);
        }

        var filesToCopy = sourceDirectory.GetFiles();

        foreach (var file in filesToCopy)
        {
            CopyFile(file, destinationDirectory.FullName);
        }
    }

    private static void CopyFile(FileInfo file, string destinationDirectory)
    {
        var path = Path.Combine(destinationDirectory, file.Name);
        var fileSecurity = file.GetAccessControl();

        fileSecurity.SetAccessRuleProtection(true, true);

        file.CopyTo(path, true);

        var copiedFile = new FileInfo(path);

        copiedFile.SetAccessControl(fileSecurity);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T07:47:43.363

一段时间后，我终于想出了如何让它工作。目标是：从一个文件夹（不是文件）复制权限，并将其转移到另一个文件夹。（权限：账户设置、访问规则等...）

我就是这样做的：（帮助来自：[http](http://forums.asp.net/t/1390009.aspx/1) ://forums.asp.net/t/1390009.aspx/1 ）

```
 private void PermissionGet(DirectoryInfo Source, DirectoryInfo Destination)
    {
        string Username;
        DirectorySecurity SourceSecurity = Source.GetAccessControl();

        foreach (FileSystemAccessRule Rules in SourceSecurity.GetAccessRules(true, true, typeof(System.Security.Principal.NTAccount)))
        {
            Username = Rules.IdentityReference.Value;
            PermissionSet(Username, Rules.FileSystemRights, Rules.AccessControlType, Destination);
        }
    }

    private void PermissionSet(string Username, FileSystemRights Permission, AccessControlType Access, DirectoryInfo Destination)
    {
        DirectorySecurity Security = Destination.GetAccessControl();
        Security.AddAccessRule(new FileSystemAccessRule(Username, Permission, Access));
        Destination.SetAccessControl(Security);
    } 
```

# linker - Android.mk：共享库未链接

> ID：11533768
> 
> 赞同：0
> 
> 时间：2012-07-18T03:12:35.813
> 
> 标签：linker, makefile, android-ndk

我正在尝试将我的库包含`libtest.so`到另一个库中。

`libtest.so`编译成功并在文件夹中：

`$PROJECT/obj/local/armeabi/libtest.so`

当我尝试在我的`Android.mk`文件中使用它时，我无法使用它的功能。但是，即使我包含了一个不存在的库，我也没有收到错误消息。

这是我的`Android.mk`文件：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

#LOCAL_SHARED_LIBRARY := test
LOCAL_SHARED_LIBRARIES := test

LOCAL_MODULE     := mylib
LOCAL_SRC_FILES  := myLib.cpp

include $(BUILD_SHARED_LIBRARY) 
```

`"No such file or directory"`当我构建它时，我从库中的包含中得到了很多错误：

```
jni/myLib.cpp:10:24: error: myinclude.h: No such file or directory 
```

`myinclude.h`是库中的一个文件。每个论坛的答案似乎都这么说`LOCAL_SHARED_LIBRARIES := test`或`LOCAL_SHARED_LIBRARIES := libtest`足以使用该库。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:48:16.690

将包含 myinclude.h 的目录添加到 LOCAL_C_INCLUDES：

```
LOCAL_C_INCLUDES += /dir/to/your/include/files/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:39:49.883

由于库有责任告诉您要包​​含的内容，尽管它可能会暂时解决问题，但使用`LOCAL_C_INCLUDES`指定由其他人编写的包含文件（如[Gavin 的回答](https://stackoverflow.com/a/11575971/142239)中所建议）在可维护性方面并不是一个好主意。

问题之一是您的问题是`Android.mk`文件`libtest`未正确写入。如果它导出任何头文件，您应该添加`LOCAL_EXPORT_C_INCLUDES := /path/to/include-dir`它。

这是一个示例（取自`$NDK_ROOT/samples/module-exports/jni/Android.mk`）：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := foo
LOCAL_SRC_FILES := foo/foo.c
LOCAL_CFLAGS := -DFOO=2
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/foo
LOCAL_EXPORT_CFLAGS := -DFOO=1
LOCAL_EXPORT_LDLIBS := -llog
include $(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := bar
LOCAL_SRC_FILES := bar/bar.c
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/bar
LOCAL_STATIC_LIBRARIES := foo
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := zoo
LOCAL_SRC_FILES := zoo/zoo.c
LOCAL_SHARED_LIBRARIES := bar
include $(BUILD_SHARED_LIBRARY) 
```

在这里，第一个库是`foo`. 它被构建为一个静态库（请参阅 参考资料`include $(BUILD_STATIC_LIBRARY)`）。它导出头目录：

```
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/foo 
```

第二个库是`bar`，它是一个共享库（请参阅 参考资料`LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/bar`）。当它引用`foo`时：

```
LOCAL_STATIC_LIBRARIES := foo 
```

中的标题`foo`将被搜索，就好像`-I$LOCAL_PATH/foo`已指定为`gcc`. 请注意，它还导出自己的头目录：

```
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/bar 
```

第三个库是`zoo`，它是一个共享库。它引用了`bar`图书馆。这表明一个共享库可以毫无问题地包含另一个共享库。

如果这不能解决您的问题，请包含更多配置。

# debugging - 了解“布局运行失败”错误日志记录

> ID：11533769
> 
> 赞同：12
> 
> 时间：2012-07-18T03:12:50.557
> 
> 标签：debugging, logging, extjs, extjs4, extjs4.1

当图表上没有创建任何内容时，我正在做一些图表工作并收到单行消息“布局运行失败”。调查这个我发现我必须添加一些额外的脚本文件来生成日志文件，如此[处](http://dev.sencha.com/deploy/ext-4.1.0-gpl/release-notes.html)所述：

> 布局失败
> 
> 由于 4.1 中布局引擎的设计，不正确的配置（或错误）可能导致布局运行无法完成其所有计算。发生这种情况时，布局会停止，并且已刷新到 DOM 的部分结果是可见的。在某些情况下，布局可能已完成 99%，故障可能未被检测到或显示为轻微的视觉异常。在其他情况下，布局可能会提前失败并使 UI 处于明显损坏的状态（很像以前版本中布局期间的 JS 错误）。
> 
> 诊断
> 
> 如果您怀疑您看到布局失败，第一步是启用布局诊断。这是通过用“ext-all-dev.js”替换普通的“ext-all.js”文件并添加几个额外的脚本来完成的。

我添加了所需的脚本：

```
<script type="text/javascript" src="extjs/src/diag/layout/Context.js"></script>
<script type="text/javascript" src="extjs/src/diag/layout/ContextItem.js"></script> 
```

现在我得到了我无法理解的诊断数据——它似乎没有诊断出错误：

```
++printer<autocontainer> - size: configured/shrinkWrap
    --statprint-1472<autocontainer> - size: configured/configured
        triggeredBy: count=1
            statprint-1472.containerChildrenDone:dom () dirty: false, setBy: ?
        --chart-1473<draw> - size: shrinkWrap/shrinkWrap
            triggeredBy: count=1
                chart-1473.containerChildrenDone:dom (true) dirty: false, setBy: ?
    ++panel-1474<dock> - boxParent: printer - size: natural/configured
    ++panel-1474<autocontainer> - boxParent: printer - size: natural/configured
    ++statprint-1472<dock> - size: configured/configured
        ++statprint-1472_header<body> [isBoxParent] - size: calculated/shrinkWrap
        ++statprint-1472_header<hbox> [isBoxParent] - size: calculated/shrinkWrap
            ++statprint-1472_header_hd<autocomponent> [isBoxParent] - size: calculated/shrinkWrap
            ++tool-1475<autocomponent> [isBoxParent] - size: configured/configured 
```

有谁知道诊断信息在哪里解释？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-11T19:34:30.930

我发现这些类型的错误通常通过注释掉直到它消失的方法来最快地解决，以隔离哪个组件配置导致布局失败。从内到外注释掉子组件，用填充 html 配置替换它们，直到您将导致故障的组件归零，然后查看在错误再次出现之前您可以放回多少，您应该只看剩下的几行配置，您可以查看文档/示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T05:06:11.293

我在我的应用程序中收到“布局运行失败”消息，发现问题是由于忘记在 Viewport.js 文件中设置布局属性引起的。一旦我在那里定义了布局，一切都运行得非常好。:)

例子：

```
Ext.define('MyApp.view.Viewport',{
   extend    : 'Ext.container.Viewport',

   layout  : 'fit',

}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-23T11:59:29.933

部分原因可归结为——

1.  过度嵌套（在布局内查找布局。某些布局嵌套组合会出现此错误）
2.  容器缺少布局。
3.  容器或其子容器缺少大小信息。例如高度/宽度或弹性。
4.  在 sass 中未定义的组件上使用[ui配置。](http://docs.sencha.com/extjs/5.0/5.0.1-apidocs/#!/api/Ext.Component-cfg-ui)

要进行调试，我们应该调查引发异常的视图中的布局。

不幸的是，没有可用的文档。

*来源：煎茶支持*

# c - C 宏的作用域规则

> ID：11533771
> 
> 赞同：3
> 
> 时间：2012-07-18T03:12:58.460
> 
> 标签：c, macros

我不是一个 C 程序员，但我假设 C 宏几乎是一种查找和替换功能，预处理器获取宏定义并将其放在看到宏名称的任何地方。

这是 Dragon Book 的动态范围规则示例以及它们如何应用于宏：

```
#define a (x + 1)

int x = 2;
void b () { int x = 1; printf("%d\n", a); }
void c () { printf("%d\n", a); }
void main () { b(); c(); } 
```

他们还讨论了动态范围规则如何应用于`x`宏中的名称`a`。我假设它基本上会替换`a`为然后编译程序，因此范围规则将与您编写的而不是`(x + 1)`完全相同（这将是静态范围规则）。`(x + 1)``a`

有人可以澄清一下吗？

编辑：所指的书是编译器：原理、技术和工具第二版。引用的示例来自第 31-32 页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:31:59.993

您对#define 行为的理解是正确的。

我认为这本书说“动态范围”时的意思是名称 x 是根据调用宏的环境而不是定义的环境来解析的。因此，如果您在#define 之前设置了一个全局变量 x=3，这与 #define 中 x 的值无关 - 无论您在哪里使用宏，它都会使用 x 的值 - 如果有其他一些本地使用宏的函数中的变量 x，则将使用本地值。

这与词法范围（C 语言和几乎所有现代语言中实际使用的）形成对比，其中名称指的是其本地词法环境。例如，如果您将示例中的 #define 替换为 simple statement `a = x+1`，则函数中 a 的值将比`a = x+1`代码中出现的 x 值大一。如果在您使用值 a 的位置碰巧存在其他名为 x 的局部变量，则无关紧要。同样，如果你定义了一个函数`int f() { return x + 1; }`, x 将引用全局变量 x，而不是其他一些名为 x 的局部变量，它恰好存在于调用 f() 的位置。如果这看起来很明显，那是因为，正如我所说，几乎所有语言都使用词法作用域（尽管 Perl，例如，也允许使用该`local`函数的动态作用域）。

有关该概念的更多解释，请参见[http://en.wikipedia.org/wiki/Scope_(computer_science)#Lexical_scoping_and_dynamic_scoping 。](http://en.wikipedia.org/wiki/Scope_(computer_science)#Lexical_scoping_and_dynamic_scoping)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T03:14:59.520

您的理解是正确的：找到标识符的所有用途`a`并将其替换`a`为`(x + 1)`. 这正是预处理器所做的。

关于类对象宏（like `a`），我们可以讨论的唯一“范围”是宏本身的范围：宏的*范围*是从定义它的行（使用`#define`指令）到该行如果它从未未定义，则它未定义（使用`#undef`指令）或直到翻译单元（.cpp 及其包含的所有头文件）的末尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T03:39:52.397

他们的观点是 a 所指的 x 在 b() 中是局部的，但在 c() 中是全局的——它是动态范围的。#define 可以解释为“在评估 a 时使用动态范围来解析 x”。

# javascript - 如何在相同的 div 名称中使用 jquery 添加不同的样式？

> ID：11533773
> 
> 赞同：0
> 
> 时间：2012-07-18T03:13:13.403
> 
> 标签：javascript, jquery, css

如何使用 jquery 在相同的 div 名称中添加不同的样式？

像这样的例子。

```
<div id="link">
    <div class="one">This is first link</div>
    <div class="one">This is second link</div>
    <div class="one">This is third link</div>
</div> 
```

我想为 .one 中
的所有文本添加不同的颜色。第一类使用#FFF
第二类使用#000
第三类使用#333

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T03:15:18.197

你可以这样做：

```
var $oneDivs = $("#link div.one");
$oneDivs.eq(0).css("color","#FFF");
$oneDivs.eq(1).css("color","#000");
$oneDivs.eq(2).css("color","#333"); 
```

也就是说，首先按类选择所有 div，然后通过它们的（从零开始的）索引选择各个 div 并设置所需的颜色。

演示：http: [//jsfiddle.net/8kNF6/](http://jsfiddle.net/8kNF6/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T03:21:23.420

```
var colors = ['#FFF', '#000', '#333']
$('#link div.one').each(function(idx, elem) {
   $(elem).css('color', colors[idx]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:50:02.923

我意识到这个问题专门询问如何用 jQuery 来做，但你知道你可以用一个 nth-child css 选择器来做到这一点，而根本不必使用 javascript，对吧？

'把它扔出去:)

```
#link div:nth-child(1) { color: #FFF; }
#link div:nth-child(2) { color: #000; }
#link div:nth-child(3) { color: #333; } 
```

# c# - 在我的 ASP.net 网站进行身份验证时从 Google 帐户获取用户信息

> ID：11533774
> 
> 赞同：0
> 
> 时间：2012-07-18T03:13:38.277
> 
> 标签：c#, asp.net

当我尝试在代码页下方成功加载时，关于谷歌身份验证的这个问题，但是当我点击谷歌登录按钮时，在调试此行显示错误时。

错误在

```
GetExtension<FetchResponse>() 
```

在线的

```
Var fetchResponse = Response.GetExtension<FetchResponse>() 
```

那么这一行有什么问题..我尝试搜索这个问题，但我没有得到它的解决方案

```
protected void Page_Load(object sender, EventArgs e)
    {
        OpenIdRelyingParty rp = new OpenIdRelyingParty();
        var r = rp.GetResponse();
        if (r != null)
        {
            switch (r.Status)
            {
                case AuthenticationStatus.Authenticated:
                    NotLoggedIn.Visible = false;
                    Session["GoogleIdentifier"] = r.ClaimedIdentifier.ToString();
                    Response.Redirect("Default4.aspx"); //redirect to main page of your website  
                    var fetchResponse = Response.GetExtension<FetchResponse>();
                    Session["FetchResponse"] = fetchResponse;
                    var response2 = Session["FetchResponse"] as FetchResponse;
                    // Use FormsAuthentication to tell ASP.NET that the user is now logged in,
                    // with the OpenID Claimed Identifier as their username.
                    string uname = response2.GetAttributeValue(WellKnownAttributes.Name.First) ?? "Guest";
                    FormsAuthentication.RedirectFromLoginPage(uname, false);   //(response.ClaimedIdentifier, false);
                    break;

                case AuthenticationStatus.Canceled:
                    lblAlertMsg.Text = "Cancelled.";
                    break;

                case AuthenticationStatus.Failed:
                    lblAlertMsg.Text = "Login Failed.";
                    break;
            }
        }
    }

    protected void OpenLogin_Click(object src, CommandEventArgs e)
    {
        string discoveryUri = e.CommandArgument.ToString();
        OpenIdRelyingParty openid = new OpenIdRelyingParty();
        var b = new UriBuilder(Request.Url) { Query = "" };
        //var req = openid.CreateRequest(discoveryUri, b.Uri, b.Uri);

        //var req = openid.CreateRequest(discoveryUri, b.Uri, b.Uri);
        var req = openid.CreateRequest(discoveryUri);

        // This is where you would add any OpenID extensions you wanted
        // to include in the authentication request. In this case, we are making use of OpenID Attribute Exchange 1.0
        // to fetch additional data fields from the OpenID Provider
        var fetchRequest = new FetchRequest();
        fetchRequest.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
        fetchRequest.Attributes.AddRequired(WellKnownAttributes.Name.First);
        fetchRequest.Attributes.AddRequired(WellKnownAttributes.Name.Last);
        fetchRequest.Attributes.AddRequired(WellKnownAttributes.Contact.HomeAddress.Country);
        req.AddExtension(fetchRequest);

        req.RedirectToProvider();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:38:42.237

它应该是

```
var fetchResponse = r.GetExtension<FetchResponse>(); 
```

代替

```
var fetchResponse = Response.GetExtension<FetchResponse>(); 
```

# java - Eclipse - 运行调试配置时如何更改已编译 jar 的名称

> ID：11533778
> 
> 赞同：0
> 
> 时间：2012-07-18T03:14:24.393
> 
> 标签：java, eclipse, debugging, wowza

Eclipse 的基本 101。如果我有一个现有的 java 项目 TestA，如何将运行调试配置时编译的 jar 文件的名称更改为 testV1.jar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-17T10:06:36.930

这比问题晚了，但是更改 wowza 媒体项目的 JAR 文件名的一种方法是修改项目中的 build.xml 文件。在名为 jar.filename 的 xml 属性中。为我工作！

# android - AndroidHttpClient 的奇怪最低 API 级别

> ID：11533779
> 
> 赞同：2
> 
> 时间：2012-07-18T03:14:36.647
> 
> 标签：android

我在搞乱我的 DataDroid 库，新的 lint 检查揭示了 Android SDK 中的一个奇怪的错误。

对于那些不了解 DataDroid 的人，它是一个用于本地和远程数据管理的库（更多信息在这里：[http](http://datadroid.foxykeep.com) ://datadroid.foxykeep.com ）

为了调用库中的 web 服务，我使用类 AndroidHttpClient 在我的 NetworkConnection 类中建立与服务器的连接。我的库适用于 Android 1.6 及更高版本，即使在 1.6 手机上我也从未遇到过任何问题。

奇怪的是，在 SDK 文档中，我们可以看到[AndroidHttpClient](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)仅适用于 API 2.2 及更高版本。我发现通过新的 lint 检查“NewApi”显示了一个错误，表明 minSdkVersion 不够高。

我查看了 Android 的源代码，发现这个类在 1.6 中已经存在并且不是私有的。所以我认为文档中这个类的最小API级别有一个错误......它应该是4（可能更低但我没有检查）

唯一的问题是我不知道这些信息存储在哪里，所以我无法创建补丁来修复它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T03:56:41.957

该类已经存在了一段时间，但由于它不是公开的，某些构建可能会排除它，并且您的程序可能会在这些问题上失败。这不是错误，还有其他未隐藏的类，但由于某种原因尚未公开（尚未）。

# c# - 从 Datatable 中提取一个值并存储到 C# 中的一个集合中

> ID：11533780
> 
> 赞同：0
> 
> 时间：2012-07-18T03:14:39.597
> 
> 标签：c#, c#-4.0

我想从数据表中提取一个值并存储到一个集合中。最好的方法是什么？

我的数据表中的行将包含如下数据：

```
 Row 1          <configuration><Store parameter="Atribs">AB,CD</Store></configuration>

 Row 2          <configuration><Store parameter="Atribs">EF,GH,IJ</Store></configuration>

 ...... 
```

我想检索并将值存储在一个集合中，例如，

```
Collection 1 :
AB
CD

Collection 2 :
EF
GH
IJ

Collection .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:31:49.797

干得好...

```
var table = new DataTable();
            var column = new DataColumn("col1");

            table.Columns.Add(column);

            var row = table.NewRow();
            row[0] = @"<configuration><Store parameter=""Atribs"">AB,CD</Store></configuration>";
            table.Rows.Add(row);

            row = table.NewRow();
            row[0] = @"<configuration><Store parameter=""Atribs"">EF,GH,IJ</Store></configuration>";
            table.Rows.Add(row);

            var data = new List<List<string>>();

            foreach (DataRow dRow in table.Rows)
            {
                var temp = new List<string>();
                string xml = dRow.Field<string>("col1");

                var element = XElement.Parse(xml);
                string[] values = element.Descendants("Store").First().Value.Split(',');

                temp.AddRange(values);
                data.Add(temp);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:21:09.560

您说的是 DataTable，但在您的示例中提供了 xml 数据，所以我不确定.. 基本上，这就是您需要做的：

```
var myList = new List<string>();

foreach (DataRow row in dataTable.Rows)
{
    myList.Add(row.Field<string>("myCol"));
} 
```

类似的东西。如果您可以向我们提供有关您的 DataTable 而不是您的源 xml 文件的信息，那么给出一个更好的示例会更容易。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:23:09.787

您可能需要更清楚地了解“数据表”的含义，因为您的示例数据是 XML。如果您足够了解从 data/xml 中获取行：

读取每一行并在内部值上使用 String.Split() 来生成一个字符串数组，该数组可以输入到一个列表中。

```
var list = new List<string>(String.Split(",", innerData)); 
```

当然，您需要验证内部数据是否有内容。

# unix - 如果在 UNIX 中运行，这个命令会做什么？

> ID：11533782
> 
> 赞同：1
> 
> 时间：2012-07-18T03:14:47.380
> 
> 标签：unix, command, forum

我看到这个命令张贴在某处，`:(){ :|:& };:`

如果我在 UNIX 中运行它会做什么，我不想尝试自己，以防它做坏事

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:16:05.147

这是一个[叉子炸弹](http://en.wikipedia.org/wiki/Fork_bomb)，非常糟糕。

它将产生许多进程，随着每个进程再产生两个进程，数量呈指数增长。它们会阻塞您的系统，直到它倒塌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T03:18:01.410

不要运行它。它的叉形炸弹。它会降低你的系统。

来自维基百科：

```
 /- Define the function ':' without any parameters '()' as follows:
 | /- Beginning of function-block.
 | | /- Load a copy of the function ':' into memory ...
 | | |/- ... and pipe its output to ...
 | | ||/- ... another copy of the ':'-function, which has to be loaded into memory.
 | | |||   (In other words, ':|:' loads two more copies of ':', thus causing a chain-reaction)
 | | |||/- Disown the functions (make them a background process), so that the children of a parent
 | | ||||  will not be killed when the parent gets auto-killed.
 | | |||| /- End of function-block.
 | | |||| |/- End of definition. 
/-\| |||| ||/- Execute the function ':'.  The chain-reaction begins.
:(){ :|:& };: 
```

这是链接[http://en.wikipedia.org/wiki/Fork_bomb](http://en.wikipedia.org/wiki/Fork_bomb)

# objective-c - 如何向 iOS 用户发送即时本地通知？

> ID：11533798
> 
> 赞同：1
> 
> 时间：2012-07-18T03:16:11.550
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我只想在用户按下按钮时弹出通知。不需要服务器或计时器。我能找到的所有教程似乎都涉及这两者之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:18:07.790

```
 UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:title message:message delegate:delegate cancelButtonTitle:cancelMessage];
[alertView show]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:19:35.917

也许是这样的：

```
-(IBAction) buttonPressed: (UIButton *)sender{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle: [NSString stringWithFormat:@"You pressed button %@", sender.tag]  
                                                    message: @"message" 
                                                   delegate: self 
                                          cancelButtonTitle: @"Ok" 
                                          otherButtonTitles: nil]];
    [alert show];
} 
```

它看起来像这样：

![在此处输入图像描述](../Images/5cb6515bd80f31911387d35a3e05aaf0.png)

您还可以稍微自定义警报视图，因此它可能具有用于文本输入的文本字段：

![在此处输入图像描述](../Images/39abb15034f9609cf1dffcf7e3d2614b.png)

使用 UIAlertViews，您还可以实现协议方法，例如`– alertView:clickedButtonAtIndex:`并`– alertView:willDismissWithButtonIndex:`根据他们按下的警报按钮执行不同的操作。

这是关于 UIAlertViews 和实现其协议方法的一个很好的教程：http: [//mobile.tutsplus.com/tutorials/iphone/uialertview/](http://mobile.tutsplus.com/tutorials/iphone/uialertview/)。

如果您不想使用 UIAlertViews 而想要更可定制的模式视图，请查看这两个名为 [UAModalPanel](http://www.cocoacontrols.com/platforms/ios/controls/uamodalpanel)和[MJPopupViewController](http://www.cocoacontrols.com/platforms/ios/controls/mjpopupviewcontroller)的优秀库。您可以查看有关这两个库的图像、演示和更多信息的链接，包括指向它们的 github 页面的链接，您可以在其中下载它们。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T03:26:28.027

确保警报显示在处理所有 UI 的主线程上很重要。否则，您可能会遇到一些奇怪的错误和/或崩溃。您可以使用 GCD 调度到主线程：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert Test" 
                                          message:@"This is an alert test." 
                                          delegate:self 
                                          cancelButtonTitle:@"Cancel" 
                                          otherButtonTitles:@"OK", 
                                          nil];

dispatch_async(dispatch_get_main_queue(), ^{ 
    [alert show];
}); 
```

# performance - R：代码分析工具

> ID：11533799
> 
> 赞同：3
> 
> 时间：2012-07-18T03:16:18.540
> 
> 标签：performance, r, analysis

R 中是否有任何工具可以让我看到是什么降低了函数的速度（函数中占用最多时间的代码行、统计数据等）？

干杯！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:38:06.613

这是关于 Rprof 的简单指南，[http: //cran.r-project.org/doc/manuals/R-exts.html#Profiling-R-code-for-speed](http://cran.r-project.org/doc/manuals/R-exts.html#Profiling-R-code-for-speed)

当然还有包描述：[http ://stat.ethz.ch/R-manual/R-patched/library/utils/html/Rprof.html](http://stat.ethz.ch/R-manual/R-patched/library/utils/html/Rprof.html)

# php - 单击时是否可以从 1 个单选按钮传递两 (2) 个值？

> ID：11533811
> 
> 赞同：0
> 
> 时间：2012-07-18T03:17:52.487
> 
> 标签：php, javascript, forms, radio-button

我这里有大量的单选按钮，它们的值取自数据库。我想添加休假类型，但我无法弄清楚。为了让自己更清楚，一旦单击“病假”单选按钮并按下提交按钮时，“病假”信用或病假的可用时间（我的单选按钮的值是（值 = $ sLeave）同时，将病假（隐藏类型）的休假类型传递到下一页。

我在每种类型的假期中都尝试过这个：

```
 if($sLeave!=0)
 {
 ?> 

<input type="radio" name="optLeave" value="<?php echo $sLeave; ?>" onclick="disableTextarea()" /><label for="Sick">Sick</label>
    <input type="hidden" name"leaveType" value="Sick" />

<?php
} 
else
{
?>
<input type="radio" name="optLeave" disabled="disabled" /><label  for="Sick">Sick</label>

<?php
}
?> 
```

但是所有的休假类型都将传递到下一页并输出最后一个隐藏值。不是被选中的那个。

这是代码：

```
<form id="leaveForm" name="lform" method="get" action="leaveFiled.php" />

if($sLeave!=0)
{
?>  
<input type="radio" name="optLeave" value="<?php echo $sLeave; ?>" onclick="disableTextarea()" /><label for="Sick">Sick</label>

<?php
}
else
{
?>
<input type="radio" name="optLeave" disabled="disabled" /><label for="Sick">Sick</label>

<?php
}
?>

<?php
if($vLeave!=0)
{
?>
<input type="radio" name="optLeave" value="<?php echo $vLeave; ?>" onclick="disableTextarea()" /><label for="Vacation">Vacation</label>

<?php
}
else
{
?>
<input type="radio" name="optLeave" disabled="disabled" /><label for="Vacation">Vacation</label>

<?php
}
?>

<?php                   
if($eLeave!=0)
{
?>
<input type="radio" name="optLeave" value="<?php echo $eLeave; ?>" onclick="disableTextarea()" /><label for="Emergency">Emergency</label>

<?php
}
else
{
?>
<input type="radio" name="optLeave" disabled="disabled" /><label for="Emergency">Emergency</label>

<?php
}
?>

<?php                   
if($mLeave!=0 && $sex=='F')
{
?>
<input type="radio" name="optLeave" value="<?php echo $mLeave; ?>" onclick="disableTextarea()" /><label for="Maternity">Maternity</label>

<?php
}
else
{
?>
<input type="radio" name="optLeave" disabled="disabled" /><label for="Maternity">Maternity</label>

<?php
}
?>

<?php                   
if($pLeave!=0 && $sex=='M')
{
?>
<input type="radio" name="optLeave" value="<?php echo $pLeave; ?>" onclick="disableTextarea()" /><label for="Paternity">Paternity</label>

<?php
}
else
{
?>
<input type="radio" name="optLeave" disabled="disabled" /><label for="Paternity">Paternity</label>

<?php
}
?>

<?php                   
if($uLeave!=0)
{
?>
<input type="radio" name="optLeave" value="<?php echo $uLeave; ?>" onclick="disableTextarea()" /><label for="Union">Union</label>

<?php
}
else
{
?>
<input type="radio" name="optLeave" disabled="disabled" /><label for="Union">Union</label>

<?php
}
?>

<?php                   
if($oLeave!=0)
{
?>

<tr>
<td height="40" colspan="3" align="left">
    <strong>
    <input type="radio" name="optLeave" value="<?php echo $oLeave; ?>" onclick="enableTextarea()" />    
    <label for="Other Leave">Other Leave</label>
    &nbsp;&nbsp;
    <label for="Reason of Leave">Reason of Leave:</label>
    <input type="text" name="reasonLeave" size="35" disabled="disabled" />        
    </strong> 
</td>
</tr> 

<?php
}
else
{
?>
<tr>
<td height="40" colspan="3" align="left">
    <strong>
    <input type="radio" name="optLeave" disabled="disabled" />
    <label for="Other Leave">Other Leave</label>
    </strong>
</td>
</tr> 

<?php
}                       
?> 
```

也许使用 javascript 可以解决这个问题，但我希望有另一种解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:18:49.203

如果您可以使用带有唯一分隔符的不同前缀，例如下划线（*）或冒号（:)，则可以在值中使用任何您想要的值，例如。休*病假或其他

```
<input type="radio" name="optLeave" value="<?php echo "sleave_".$sLeave; ?>" onclick="disableTextarea()" /><label for="Sick">Sick</label>

<input type="radio" name="optLeave" value="<?php echo "uleave_".$uLeave; ?>" onclick="disableTextarea()" /><label for="Union">Union</label> 
```

然后在帖子中你可以通过explode函数分离值，你会得到你的值。

```
//use same separator here
$opt_leave = explode("_", $_REQUEST['optLeave']);
$leave_type = $opt_leave[0];
$leave = $opt_leave[1];
//now you can use $leave_type to check your conditions by switch or if conditional statements

if($leave_type == 'sleave') {
  // action on sick leave
} else if($leave_type == 'uleave') {
 // action on Union leave
} 
```

# android - 如何减少android模拟器使用的内存？

> ID：11533818
> 
> 赞同：4
> 
> 时间：2012-07-18T03:18:27.027
> 
> 标签：android, android-emulator

有没有办法减少android模拟器使用的内存？当我打开资源监视器时，它提交了超过 800MB（我想这是我所有计算机滞后的原因）！

我的资料：

操作系统：Window 7、2GB RAM、CPU 内核 i3。

模拟器：设备 RAM 大小：512MB，数据分区大小：384MB，皮肤：HVGA 480x320，SD 卡：4GiB。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T03:29:59.707

尝试这个：

打开 Android 虚拟设备管理器：

![在此处输入图像描述](../Images/046b8121a850239785adcc54362e5d68.png)

单击设备并选择编辑：

![在此处输入图像描述](../Images/728b6ab4e435b56cd1542f74fa15d231.png)

然后在硬件上单击新建：

![在此处输入图像描述](../Images/9666d003a75e4113111db8bc0bc01a07.png)

之后选择选项设备内存大小：

![在此处输入图像描述](../Images/9d491d4c1e158d42675681f8f54982e5.png)

然后只需输入您想要的值并单击 Edit AVD：

![在此处输入图像描述](../Images/79fbe7536763fa282d757d6bb15ee19f.png)

希望有帮助。此外，您可能会注意到，您可以更改其他可能有用的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:24:41.017

一种解决方案是将设备 RAM 减少到 384 MB 或 256 MB，只要您保持 VM RAM 大小相同，它就不会影响您的应用在模拟器中的运行方式（除非可能使模拟器运行得更慢）

但是如果你想做软件开发，4GB RAM 应该是最低要求，RAM 现在非常便宜，无论如何你真的应该改进你的工具。

# android - Android - 如何对齐列表视图项目以很好地左右对齐？

> ID：11533819
> 
> 赞同：2
> 
> 时间：2012-07-18T03:18:59.470
> 
> 标签：android, android-layout, android-listview

我正在尝试将图像添加到我的 ListView 以使其看起来更像一个按钮。我希望图像更小一些，可能是当前图像的 60%。并且图像在列中很好地排列在右侧。这是我目前拥有的屏幕：

![在此处输入图像描述](../Images/a8fdc818627656b35b3bda0f6662832a.png)

这是我的列表视图 xml：

```
<?xml version="1.0" encoding="utf-8"?>  

<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp"    
    android:layout_width="match_parent"
    android:drawableRight="@drawable/arrow_button" 
     >
</TextView> 
```

知道我做错了什么吗？

包含此 TextView 的 ListView 定义如下：

请注意，我创建和使用列表的方式是使用 ListAdapter，使用如下代码：

```
Question q = new Question ();
q.setQuestion( "This is a test question and there are more than one" );

questions.add(q);

adapter = new ArrayAdapter<Question>( this, R.layout.questions_list, questions);

setListAdapter(adapter); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T03:26:25.657

啊。您正在使用复合可绘制对象做正确的事情。不确定是否有更好的方法可以扩展复合可绘制对象中的间距，但我知道这会起作用。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent"
    android:layout_width="match_parent">

<TextView
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:padding="10dp"
    android:textSize="16sp"
    android:layout_centerVertical="true"
    android:layout_alignParentLeft="true" />

<View
    android:layout_height="64dip"
    android:layout_width="64dip"
    android:background="@drawable/arrow_button"
    android:layout_centerVertical="true"
    android:layout_alignParentRight="true" />

</RelativeLayout> 
```

基本上只是指出使用左右对齐父级。您可能想要为它们添加一些边距或填充。还要确保将元素垂直居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:16:11.313

通过 Frank Sposaro 的评论和建议，您将能够正确定位您的观点。

对于您的下一个问题，我建议您制作自己的适配器，如下所示：

```
private class CustomAdapter extends ArrayAdapter<Question> {

        private LayoutInflater mInflater;

        public CustomAdapter(Context context) {
            super(context, R.layout.row);
            mInflater = LayoutInflater.from(context);
        }

        public View getView(final int position, View convertView, ViewGroup parent) {
            ViewHolder holder;

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.row, null);

                holder = new ViewHolder();
                holder.text = (TextView) convertView.findViewById(R.id.mTextView);
                holder.image = (ImageView) convertView.findViewById(R.id.mImage);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }

            //Fill the views in your row
            holder.text.setText(questions.get(position).getText());
            holder.image.setBackground... (questions.get(position).getImage()));

            return convertView;
        }
    }

    static class ViewHolder {
        TextView text;
        ImageView image;
    } 
```

在您的 onCreate 中：

```
ListView mListView = (ListView) findViewById(R.id.mListView);
mListView.setAdapter(new CustomAdapter(getApplicationContext(), questions)); 
```

可以在[此处找到带有适配器的 ListView 的另一个示例](https://stackoverflow.com/a/11631714/1479570)

# php - 多个文件但相同的 url 是 index.php

> ID：11533823
> 
> 赞同：0
> 
> 时间：2012-07-18T03:20:06.177
> 
> 标签：php, hyperlink

大家好，我非常需要你的帮助，这里是 php noob，

我正在创建一个类似公告板的日历，它每个月都会显示不同的条目。日历分为 4 个季度，因此，我每季度有一个 php 文件。每个文件显示该季度的月份及其各自的条目。例子; 我的 firstq.php 包含 1 月、2 月和 3 月的条目。

我在任何页面中都没有提交按钮，只有一个 1Q、2Q、3Q、4Q 的下拉链接图像，它重定向到每个文件。

我怎么能声明当我单击 1Q 图像时它会显示文件 firstq.php 但 url 仍然是 index.php 等等？

我的默认 index.php 显示自 7 月以来的第三季度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:23:30.130

您可以将 POST/GET 参数传递给索引页面，如下所示：

```
"index.php?Quarter=Q1" 
```

您仍然会访问 index.php，您只需要添加逻辑来处理 Quarter 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:25:19.740

你可以有 index.php

```
require_once('1Q.php'); 
```

然后在 if 语句中，选择在下一个选择中调用哪个 Q.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:26:06.560

在 index.php 中

```
<?php
$quarters = array(1=>'firstq', 2=>'secondq', 3=>'thirdq', 4=>'fourthq');
$quarter = isset($_GET['quarter']) ? $_GET['quarter'] : null;

if(isset($quarters[$quarter)
    include $quarters[$_GET['quarter']] . '.php'; 
```

像 index.php?quarter=3 这样的测试

或者，如果您只关心当前季度，请执行此操作

```
$quarters = array(1=>'firstq', 2=>'secondq', 3=>'thirdq', 4=>'fourthq');
$month = date("m", time()); 
$quarter=  ceil($month/3);

include $quarters[$quarter] . '.php'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T03:28:09.913

您可以向 url 添加一个参数来确定您所在的页面。

```
<?php

// at the top of the page

$quarters = array('Q1', 'Q2', 'Q3', 'Q4');
$quarter = 'Q1';

// don't allow access to any file on your system
if( isset($_GET['quarter']) && in_array($_GET['quarter'], $quarters) ) {
  $quarter = $_GET['quarter'];
}

// switch the short syntax to a filename
switch($quarter) {
  case 'Q1' :
    $quarter = 'firstq.php';
  break;
  case 'Q2' :
    $quarter = 'secondq.php';
  break;
  case 'Q3' :
    $quarter = 'thirdq.php';
  break;
  case 'Q4' :
    $quarter = 'fourthq.php';
  break;
} 
```

然后在您准备包含它的页面中。

```
<?php include_once $quarter; ?> 
```

* * *

您到每个季度的链接将如下所示。

```
<ul id="quarters">
  <li><a href="index.php?quarter=Q1"><img src="images/Q1.jpg" /></a></li>
  <li><a href="index.php?quarter=Q2"><img src="images/Q2.jpg" /></a></li>
  <li><a href="index.php?quarter=Q3"><img src="images/Q3.jpg" /></a></li>
  <li><a href="index.php?quarter=Q4"><img src="images/Q4.jpg" /></a></li>
</ul> 
```

# javascript - 关于重构大型 JavaScript 方法的建议

> ID：11533830
> 
> 赞同：0
> 
> 时间：2012-07-18T03:22:36.673
> 
> 标签：javascript, refactoring, legacy-code

在这种情况下，该站点是一个只能在 IE6 上查看的内部网站。目标是让它在 IE9 中可见。有几个仅适用于 IE 的脚本，例如使用[xml 数据岛](http://msdn.microsoft.com/en-us/library/windows/desktop/ms766512%28v=vs.85%29.aspx)、通过点表示法访问文档元素，即，`resulttable.style.display = "block";`等等……前面提到的对于手头的问题可能有点多余，但它可以提供一些见解。

在整个网站中，有大量的 JavaScript 方法，它们非常庞大且难以调试。给你一个想法，有超过 100 个 JS 文件，每个平均大约 1000 行。

以下是省略了所有名称/逻辑的实际方法。所有的返回值都依赖于前面的逻辑：

```
function someMethod() {
if (stuff) {
    // operations
    if (stuff) {
        // operations
        for (loop) {
            // operations
            if (stuff) {
                // operations
                if (stuff) {
                    // operations
                    for (loop) {
                        if (stuff) {
                            // operations
                        }
                    }
                    // operations
                }
                else {
                    // operations
                    if (stuff) {
                        // operations
                    } else {
                        // operations
                    }
                }
                // operations
            }
        }

        // operations

        if (stuff) {
            // operations
            if (stuff) {
                // operations
                if (stuff) {
                    // operations
                    for (stuff) {
                        // operations
                        if (stuff) {
                            // operations
                        } else {
                            // operations
                        }
                    }
                    if (stuff) {
                        // operations
                        if (stuff) {
                            // operations
                            for (loop) {
                                // operations
                            }
                            // operations
                            for (loop) {
                                if (stuff) {
                                // operations
                                }
                            }
                        }
                        // operations
                        if (stuff) {
                            // operations
                        }
                        return something;
                    }
                    else {
                        // operations
                        return something;
                    }
                }
                else {
                    // operations
                    if (stuff) {
                        // operations
                        return something;
                    }
                    else {
                        // operations
                        if (stuff) {
                            // operations
                        }
                        // operations
                        return something;
                    }
                }
            }
        }
        return something;
    }
    else {
        // operations
        return something;
    }
}
return something;
} 
```

在处理遗留网站时，您有什么建议将 JavaScript 方法分解成更易于管理的部分？

免责声明：我的 JS 技能处于平均水平。我们现在想避开 JQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:00:16.607

您可以简单地将 someMethod() 分解为可以重复逻辑的单个函数。

此外，无需查看您拥有的特定逻辑并找到最适合逻辑的模式，一些可能有帮助的一般模式是

模块模式，例如

```
var MyModule = function() {
    function privateFn() {
    }
    function publicFn() {
    }
    function doWork(args) {
    }

    return {
        publicFn: publicFn,
        doWork: doWork,
    };
}();
MyModule.doWork({ param1: 'test', param2: true}); 
```

原型继承可以类似于 c#/Java 中的类使用，例如

```
var MyClass = function(args) {
    this.prop1 = 'test'
    this.prop2 = args.param1;
};
MyClass.prototype.doWork = function(args) {
};
var myInstance = new MyClass({ param1: 'test' });
myInstance.doWork({ param1: true }); 
```

您可以使用命名空间来组织这些，例如

```
if (window.MyNamespace === undefined) window.MyNamespace = {};
MyNamespace.MyModule = function () { ... };
MyNamespace.MyClass = function () { ... };
MyNameSpace.MyModule.doWork(); 
```

可以在这里找到其他可能有帮助的模式[http://shichuan.github.com/javascript-patterns/](http://shichuan.github.com/javascript-patterns/)

# php - PHP mySQL 表 JOIN 查询 - 最有效的方法？

> ID：11533833
> 
> 赞同：1
> 
> 时间：2012-07-18T03:23:06.347
> 
> 标签：php, mysql, sql, join

我有 2 个表，我正在尝试在 mySQL 查询中输出最有效的表 JOIN。

表 1：qa_framework_activities

```
id | activity
+--|-------------------
 1 | text 
 2 | more text
 3 | even more text
 4 | more andmore text
 5 | blah blah
 6 | blah blah 
```

和......

表 2：qa_framework_indicators

```
 id | pid | indicators                    | chrono
+---|-----+-------------------------------+--------
 1  |  2  | text blah blayh               | 1
 2  |  2  | more text blah                | 4
 3  |  3  | even more text lipsum         | 3  
 4  |  6  | more andmore text lipsum blah | 6 
```

pid = parent id（第一个表中的 id）

所以假定的 mySQL 查询将是：

```
SELECT 
    qa_framework_activities.id, 
    qa_framework_indicators.id 
FROM 
    qa_framework_activities, 
    qa_framework_indicators 
WHERE 
    qa_framework_activities.id = qa_framework_indicators.pid 
```

我遇到的问题是如何最有效地显示按 Chrono 列中的 Chrono 值排序的结果（按 qa_framework_activities.activity 分组的 qa_framework_indicators.indicators）以显示在下表中 - 6 列中的任何一列？

* * *

我想根据chrono table 2列输出上面的数据（chrono值是1-6）

所以最终结果看起来像：

```
 Chrono 1  | Chrono 2    | Chrono 3    | Chrono 4    | Chrono 5    | Chrono 6    |
+----------|-------------|-------------|-------------|-------------|-------------|
 Activity  | Activity    | Activity    | Activity    | Activity    | Activity    |
 indicator | indicator   | indicator   | indicator   | indicator   | indicator   |
 indicator |             |             |             |             |             | 
```

# xpages - Xpages @Dblookup 在服务器上不起作用

> ID：11533837
> 
> 赞同：0
> 
> 时间：2012-07-18T03:24:05.110
> 
> 标签：xpages, xpages-ssjs

我写了一个xpages。

详细信息： 有两个组合框A，B。我在组合框 A 上使用 @Dbcolumn 从 notesview 获取选项数据，然后我将抛出从 A 获得的选项以获取 B 的第二个数据。

问题是：它在我的本地服务器上运行良好，但在服务器上没有结果。

如果有任何建议，我将不胜感激，谢谢！！

服务端代码如下：</p>

```
var fd_AppChoice:com.ibm.xsp.component.xp.XspSelectOneMenu = getComponent("fd_AppChoice");
var AppChoice=@Trim(fd_AppChoice.getValue());
var temp=new Array();
temp=@DbLookup("","(A)",AppChoice,2);

return temp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:32:09.123

该代码看起来不正确-您没有服务器。并且定义一个变量并不能固定它的数据类型，所以`var temp=new Array();`是无关紧要的。我也宁愿将 fd_AppChoice 绑定到一个范围变量，例如`viewScope.appChoice`，然后你的代码会变得更容易。尝试这个：

```
 var appChoice = @Trim(viewScope.appChoice); // Use getComponent.getValue if you have to
 var server = @DbName();
 // if different server or nsf have = ["myserver","mydb.nsf"] or [@DbName()[0],"my.nsf"]
 var result = @DbLookup(server,"(A)",appChoice,2);

 return result || ["Sorry nothing here"] 
```

那应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T09:38:33.530

我不能完全确认这一点：在我的情况下，它在我的测试服务器上就像一个魅力（甚至没有在本地尝试）。这是我的代码：

ComboBox #1 从同一数据库的分类视图中读取其值：

```
<xp:comboBox id="comboBox1" value="#{viewScope.combo1}">
    <xp:selectItems>
        <xp:this.value>
<![CDATA[#{javascript:@DbColumn(@DbName(), "myView", 1);}]]>
        </xp:this.value>
    </xp:selectItems>
    <xp:eventHandler event="onchange" submit="true" refreshMode="partial" refreshId="panelC2">
    </xp:eventHandler>
</xp:comboBox> 
```

观察组合的 onchange 事件在面板上执行部分更新，该面板是组合框 #2 的容器（在您的情况下可能是缺少这个吗？）

为了解决这个问题，剩下的就是：combo#2 使用 @DbLookup 获取其值数组，该数组由组合#1 中选择的值过滤，现在存储在 viewScope 变量中（我怎么不同意 Stephan这里：使用 scope-var 让事情变得更容易！）：

```
<xp:panel id="panelC2">
    <xp:comboBox id="comboBox2" value="#{viewScope.combo2}">
        <xp:selectItems>
            <xp:this.value>
<![CDATA[#{javascript:@DbLookup(@DbName(), "myView", viewScope.combo1, 5);}]]>
            </xp:this.value>
        </xp:selectItems>
    </xp:comboBox>
</xp:panel> 
```

# html - Web Workers 中的 HTML5 navigator.geolocation

> ID：11533838
> 
> 赞同：7
> 
> 时间：2012-07-18T03:24:06.490
> 
> 标签：html, geolocation, gps, web-worker

我正在尝试在网络工作者中移动我的 navigator.geolocation 代码。

我在 Chrome 和 Safari 上尝试过，但出现“未定义”

var isGPSSupported = navigator.geolocation;

沮丧...他们在规范中说网络工作者应该支持“导航器”对象...

我的代码如下：

index.js

```
var gpsWorker = new Worker("app/gpsworker.js");

gpsWorker.onmessage = function (e) {
    alert(e.data);
};

gpsWorker.postMessage("Start GPS!");

gpsWorker.onerror = function (e) {
    alert("Error in file: " + e.filename + "\nline: " + e.lineno + "\nDescription: " + e.message);
}; 
```

gpsworker.js

```
self.onmessage = function (e) {
    initGeoLoc();
}

function initGeoLoc() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            self.postMessage("Got position!");
        });
    } else {
        self.postMessage("GPS is not supported on this platform.");
    }
} 
```

任何关于错误的提示将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-11T03:38:55.280

我之前有过和你类似的问题，并问[了一个相关的问题](https://stackoverflow.com/questions/21580944/sensor-reading-in-web-worker/22315863)。现在我相信我已经回答了你的问题（也是我的一个相关问题）。

navigator.geolocation 只属于主线程中的 navigator，但不属于工作线程中的 navigator。

主要原因是即使工作线程中的导航器看起来与主线程中的导航器完全相同，但这两个导航器在 C++ 端具有独立的实现。这就是工作线程不支持 navigator.geolocation 的原因。

相关代码在 Chromium 代码中的[Navigator.idl](https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/core/frame/Navigator.idl)和[WorkerNavigator.idl中。](https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/core/workers/WorkerNavigator.idl)您可以看到它们是 .idl 文件中的两个独立接口。他们在绑定的 C++ 端有独立的实现。Navigator 是[DOMWindow](https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/core/frame/Window.idl)的一个属性，而 WorkerNavigator 是 WorkerGlobalScope 的一个[属性](https://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/core/workers/WorkerGlobalScope.idl)。

但是，在 JavaScript 方面，它们具有相同的名称：navigator。由于两个导航器在两个不同的作用域中，所以不存在名称冲突。但是当在 JavaScript 中使用 API 时，如果主线程和工作线程具有相同的名称，人们通常会期望它们具有相似的行为。歧义就是这样发生的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T15:04:38.683

*支持“导航器*”对象，但它仅包含四个属性：appName、appVersion、userAgent 和平台。

通过查看您的代码，您似乎正在尝试跟踪用户位置的变化。您不必使用网络工作者来完成此操作。**您可以使用watchPosition()**简单地监视用户在主线程上的位置，当用户位置发生变化时，它将自动通知回调函数：

```
navigator.geolocation.watchPosition(function(position) {
    document.getElementById('currentLat').innerHTML = position.coords.latitude;
    document.getElementById('currentLon').innerHTML = position.coords.longitude;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T20:08:50.497

在 chrome 中检查它，它似乎绝对没有 geolocation 属性：

```
WorkerNavigator
appName: "Netscape"
appVersion: "5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1"
onLine: true
platform: "Win32"
userAgent: "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko)  Chrome/22.0.1207.1 Safari/537.1"
__proto__: WorkerNavigator 
```

在 Chrome 中，您可以在工作人员中设置断点。我建议为您的错误执行此操作，它非常有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-10T01:46:47.023

让主线程 postMessage() 中的 watchPosition(success) 成为 webWorker 的新位置还不够吗？

# c# - 显示超过 24 小时的时间跨度的标准方法是什么？

> ID：11533839
> 
> 赞同：2
> 
> 时间：2012-07-18T03:24:19.100
> 
> 标签：c#, delphi, timespan

我正在寻找一种在 C# 和 Delphi 中正确显示大于 24 小时的本地化持续时间的方法。我的意思是，DateTime 类型经常提供这样的字符串函数，但是时间跨度没有，为什么？

而且我什至不知道非本地化时间跨度的正确格式是什么。例如，持续 2 天 10 小时 30 分钟。我发现有些会显示时间跨度为 2.10:30:00 或 2:10:30:00 或 2 10:30:00。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:45:50.690

对于不变的文化（非本地化）：

```
myDateTime.ToString(CultureInfo.InvariantCulture) 
```

否则，只需使用 myDateTime.ToShortDateString() 或 .ToLongDateString() .. 它将使用：

`System.Threading.Thread.CurrentThread.CurrentUICulture`在这种情况下..

或者如果您有特定的想法，您可以这样做

```
var myCulture = CultureInfo.GetCultureInfo("en-GB");
dt.ToString(myCulture); 
```

编辑时间跨度：

例子：

```
DateTime dt1 = new DateTime(2012, 7, 17, 12, 30, 0);
            DateTime dt2 = new DateTime(2012, 7, 18, 14, 40, 0);

            TimeSpan ts = dt2 - dt1;
            string s = ts.ToString("G", CultureInfo.InvariantCulture); 
```

更多示例：http: [//msdn.microsoft.com/en-us/library/dd784379.aspx](http://msdn.microsoft.com/en-us/library/dd784379.aspx)

编辑2：

有关 TimeSpan 格式字符串的更多信息：http: [//msdn.microsoft.com/en-us/library/ee372286.aspx](http://msdn.microsoft.com/en-us/library/ee372286.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T03:45:54.220

您可以遵循[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601#Time_intervals)，可以在[此处](http://dotat.at/tmp/ISO_8601-2004_E.pdf)找到规范的 PDF 。见部分`4.4.3 Duration`

但是，使用本文档中列出的约定对我来说看起来相当复杂，因为根据本规范，您需要包含有关时间间隔何时发生的上下文：

> 日历年、日历月、日历周或日历日的持续时间取决于其在日历中的位置。因此，只有知道所使用的日历年、日历月、日历周或日历日的持续时间，才能评估名义持续时间的确切持续时间。

如果时间跨度发生的实际时刻与您的应用程序无关，那么忘记年份和月份部分并坚持使用格式可能就足够了`nnDTnnHnnMnnS`。`TimeSpan`使用标准方法应该不难实现。

更新：进一步阅读，这个标准似乎并不适用于你的问题：

> 持续时间用作时间间隔和重复时间间隔表示中的一个组成部分，本国际标准不促进持续时间的表示。

我将在这里留下答案，以避免其他人像我一样走进这个死胡同，或者如果您认为“遵循标准”就足够了......

# oracle - 从名称值对表创建 Oracle 视图

> ID：11533844
> 
> 赞同：1
> 
> 时间：2012-07-18T03:24:59.020
> 
> 标签：oracle, view, name-value

伙计们，

我有一个包含名称值对的 oracle 数据库表。一组名称值对由 row_num 标识。此外，设置大小可能会有所不同。

我想创建一个视图，将一组名称值对转换为视图中的一行。

我希望我的问题很清楚

请让我知道如何定义这个

为了方便起见，我提供了用于创建表和插入的示例 sql

谢谢

```
create table name_value_pair (row_num varchar2(32), name varchar2(32),value varchar2(32));

insert into name_value_pair values ('row1', 'Col1', 'Val11');
insert into name_value_pair values ('row1', 'Col2', 'Val12');
insert into name_value_pair values ('row1', 'Col3', 'Val13');
insert into name_value_pair values ('row1', 'Col4', 'Val14');
insert into name_value_pair values ('row1', 'Col5', 'Val15');

insert into name_value_pair values ('row2', 'Col1', 'Val21');
insert into name_value_pair values ('row2', 'Col2', 'Val22');
insert into name_value_pair values ('row2', 'Col3', 'Val23');
insert into name_value_pair values ('row2', 'Col4', 'Val24');
insert into name_value_pair values ('row2', 'Col5', 'Val25');

insert into name_value_pair values ('row3', 'Col1', 'Val31');
insert into name_value_pair values ('row3', 'Col2', 'Val32');
insert into name_value_pair values ('row3', 'Col3', 'Val33');
insert into name_value_pair values ('row3', 'Col4', 'Val34');
insert into name_value_pair values ('row3', 'Col5', 'Val35');

insert into name_value_pair values ('row4', 'Col1', 'Val41');
insert into name_value_pair values ('row4', 'Col2', 'Val42');
insert into name_value_pair values ('row4', 'Col3', 'Val43');
insert into name_value_pair values ('row4', 'Col4', 'Val44');
insert into name_value_pair values ('row4', 'Col5', 'Val45');

insert into name_value_pair values ('row5', 'Col1', 'Val51');
insert into name_value_pair values ('row5', 'Col2', 'Val52');
insert into name_value_pair values ('row5', 'Col3', 'Val53');
insert into name_value_pair values ('row5', 'Col4', 'Val54');
insert into name_value_pair values ('row5', 'Col5', 'Val55');

commit; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:32:26.220

您可以在创建视图时使用查询：

```
select
  row_num, 
  max(decode(name, 'Col1', value)) col1, 
  max(decode(name, 'Col2', value)) col2,
  ...
from name_value_pair
group by row_num; 
```

也许您应该重新考虑数据模型。这种数据模型很烂。查询无法优化，难以设置约束，并且几乎不可能维护数据完整性。

# memory-leaks - Java 类加载器泄漏 - 下一步？

> ID：11533847
> 
> 赞同：0
> 
> 时间：2012-07-18T03:25:21.027
> 
> 标签：memory-leaks, classloader, jmeter, application-server

我们正在尝试启动 HP UX 服务器以在 Java 中运行一些批处理作业。简而言之，问题是这样的：

这些批处理作业在 Jeus Application Server（韩国制造的产品）上运行。尽管大多数作业都按时运行，但一些 Batch Jobs 报告了著名的 PermGen Out of Memory Error。我们得到一个堆转储并开始查看 JVM 选项。它们如下： Xms - 2048m Xmx - 2048m PermSize - 512m MaxPermSize - 512m。旧的 GC 收集器是 CMS，而年轻代收集器是 Parallel Collector。

我们注意到实际的堆大小非常好，并且 PErm Gen 用完了所有 512m 的内存。HPJmeter 显示这是内存的逐渐增加，因此我们怀疑内存泄漏。我们查看了所有的类加载器，大约有 168 个核心 Jeus App Server 类加载器实例。内存泄漏估计器显示此类加载器正在泄漏内存。它显示保存的字节数只有 3MB 左右。

我们查看了这个类加载器加载的类/类型的数量，大约有 512 个项目。内存泄漏还显示了一些其他对象与内存泄漏有关。

我有以下问题：

1.  现在已经识别出泄漏的 Classloader，我们如何识别导致问题的确切引用？
2.  如果一个具有特定对象 id 的类加载器显示为内存泄漏，那么同一类加载器的其他实例是否有可能泄漏一些不同数量的内存？
3.  任何关于下一步做什么的指导将不胜感激。

阿迪亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:41:57.297

您确定是“泄漏”的类加载器，还是加载器加载的类仍然被引用？

了解“用户类加载器”通常用于加载稍后可能需要卸载的类。例如，如果类是作为某种网页生成方案动态生成的，则这些类需要在它们自己的类加载器中加载、使用，然后需要消除对类及其加载器的所有引用痕迹。当这些引用消失时，加载器和加载的类将被收集。

如果某种缓存挂在对类的引用上（例如，通过引用类的对象，或通过从其他加载器中的其他类链接到类），则不会发生收集。

# ffmpeg - 如何在ffplay中添加音频控制

> ID：11533849
> 
> 赞同：1
> 
> 时间：2012-07-18T03:25:44.147
> 
> 标签：ffmpeg

`ffmpeg``output_packet`在其例程中使用以下代码控制音量

```
// preprocess audio (volume)
if (ist->st->codec->codec_type == AVMEDIA_TYPE_AUDIO) {
    if (audio_volume != 256) {
        short *volp;
        volp = samples;
        for(i=0;i<(decoded_data_size / sizeof(short));i++) {
            int v = ((*volp) * audio_volume + 128) >> 8;
            if (v < -32768) v = -32768;
            if (v >  32767) v = 32767;
            *volp++ = v;
        }
    }
} 
```

有没有类似的事情可以做`ffplay`？

# python - python中的硒网络驱动程序。任何第三方库？

> ID：11533863
> 
> 赞同：1
> 
> 时间：2012-07-18T03:27:20.443
> 
> 标签：python, webdriver

python 中是否有任何第三方库可以在**webdriver 之上**执行某些操作？

我正在考虑在 python 中使用[selenium webdriver](http://seleniumhq.org/docs/03_webdriver.html#introducing-webdriver)，但我真的很想使用基于[ui-module 的方法](http://code.google.com/p/aost/)。我的意思是，而不是看起来像这样的代码：

```
cheese = driver.find_element_by_css_selector("#food span.dairy.aged")
cheese.click() 
```

我想要类似的东西（不是python！）：

```
 ui.Div(uid: "div1", clocator: [id: "div1"]) {
      Div(uid: "inner-container", clocator: [id: "div2"]) {
        List(uid: "list1", clocator: [tag: "ul"], separator: "li"){
          UrlLink(uid: "{all}", clocator: [:])
        }
      } 
   }
   click 'inner-container' 
```

所以我事先定义了我的 UI，然后编写测试用例。如果 UI 发生变化，我需要更改 UI 模块定义，而不用担心测试用例。

我可以手动滚动这个，但是有没有任何 python 库可以为我做这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T10:32:57.267

我知道没有现有的项目可以满足您的需求。我在使用 Webdriver 进行功能测试时使用的一种模式是将每个逻辑页面定义为一个类。像这样的东西：

```
class LoginPage(object):

    def __init__(self, testcase):
        self.tc = testcase

    def login(self, username, password, at_login_page=False):
        if not at_login_page:
            self.tc.browser.get(self.tc.ROOT + '/login')

        self.tc.browser.find_element_by_id('id_username').send_keys(username)
        self.tc.browser.find_element_by_id('id_password').send_keys(password)
        login_button = self.tc.browser.find_element_by_id('login-button').click() 
```

然后像这样在测试中使用它，在这种情况下，'self' 是单元测试的一个实例：

```
 login_page = site_pages.LoginPage(self)
    login_page.login(self.username, self.password) 
```

使用这种模式可能会让你更接近你想要做的事情。页面的工作方式在逻辑上包含在类方法中，而不是在每个功能测试中无休止地重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:26:11.490

机器人[框架](http://www.robotframework.org)有一个[selenium 库](https://github.com/rtomac/robotframework-selenium2library)，可让您使用纯文本关键字编写测试。例如：

```
| Simple test case
| | open browser | http://example.com
| | click link | //some-crazy/xpath
| | page should contain | blah blah blah 
```

Robotframework 是用 python 编写的。那是你感兴趣的东西吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T23:37:07.133

你试过[分裂](http://splinter.cobrateam.info/)吗？您可以使用 jQuery 样式的选择器。

# jquery - 滚动的jQuery UI拖放问题

> ID：11533864
> 
> 赞同：2
> 
> 时间：2012-07-18T03:27:20.683
> 
> 标签：jquery, html, jquery-ui

当您单击某些文本时，我会弹出一个 div。我希望它是可移动的，所以我使用了 jQuery UI`draggable()`功能并像魅力一样工作。但是，我遇到的问题是此弹出窗口中的 div。如果需要，我正在显示范围从 0 到几乎无穷大的数组中的信息。因此我用`overflow:auto`它来制作一个滚动框。但是，一切都按原样显示，当我单击向上和向下箭头在该框中上下滚动时，它反而开始了可拖动功能。这很烦人，并理解为什么会发生问题。我正在寻找修复它或以某种方式解决它的建议。

这是一个显示问题的 jsfiddle：http: [//jsfiddle.net/BnTPG/](http://jsfiddle.net/BnTPG/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:46:10.163

您可以使用句柄选项。看看（我修改了你的小提琴）。在我的示例中，我将标题设置为可拖动对象的句柄，并且像您一样使用了一些 id 而不是类。

[http://jsfiddle.net/BnTPG/2/](http://jsfiddle.net/BnTPG/2/)

我认为您遇到此问题是因为您使用的是相对定位和绝对定位（这只是一个猜测，我没有对此进行测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T15:34:54.613

就我而言，我真的更喜欢将我所有的弹出窗口拖到我想要的地方。

如果你想解决你的问题，你必须添加一个 DIV 包装滚动的 div，因为对于 Firefox，我认为滚动条链接到可拖动的父 div，而不是只能滚动的 schildren。

```
 $('body').on("mousedown", ".draggable", function(e) {

                    // Impossible to drag these LIEN, INPUT, TEXTAREA, SELECT
                    var clicked = $(e.target).get(0).tagName;
                    if (clicked == 'A' || clicked == 'INPUT' || clicked == 'TEXTAREA' || clicked == 'SELECT') {
                            return true;
                    }
                    if ($(e.target).parents().hasClass('selectable')) {
                            return true;
                    }

                    // Stop clic action
                    if (e && e.preventDefault) {
                            e.preventDefault();
                    } else {
                            window.event.returnValue = false;
                    }

                    ... etc ...

<div id="debuger" class="draggable" style="overflow: hidden;">
     <div class="selectable">
          <div id="text"> Scrollable text </div>
</div></div> 
```

# ruby-on-rails - Rails Facebook 集成

> ID：11533865
> 
> 赞同：1
> 
> 时间：2012-07-18T03:27:21.230
> 
> 标签：ruby-on-rails, facebook

我正在使用 ruby​​ 和 rails 编写一个 facebook 应用程序。我将需要 Facebook 连接和登录、共享和时间线集成（代表用户发布）。是否有您推荐的任何教程/指南或宝石。

谢谢干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:55:48.473

[Koala](https://github.com/arsduo/koala/)是一个与 Facebook 的 Graph API 交互的 gem，也可以处理 Facebook OAuth。

[Koala](https://github.com/arsduo/koala/)在 Github 上有一些很好的例子，但是如果你喜欢 Ryan Bates 在 Railscasts Pro [#361](http://railscasts.com/episodes/361-facebook-graph-api)和[#363](http://railscasts.com/episodes/363-facebook-open-graph)中介绍 Koala 和 Facebook 的 Graph API 。两者都是付费剧集。

[Omniauth](https://github.com/intridea/omniauth/)是处理许多不同 OAuth 提供者（包括 Facebook）的绝佳选择。瑞安贝茨在[几集中](http://railscasts.com/episodes?search=omniauth)报道了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T03:30:34.400

我可以推荐 3 颗宝石用于 facebook 身份验证和登录。实施它们将非常复杂。对于基本身份验证，您可以使用设计，然后对于 facebook 登录，您可以将omniauth 与omniauth-facebook gem 集成到设计中：

[https://github.com/plataformatec/devise/wiki/OmniAuth:-概述](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

# web - Adding multiple Set-Cookie Headers in ASP.NET Web

> ID：11533867
> 
> 赞同：37
> 
> 时间：2012-07-18T03:27:58.010
> 
> 标签：web, asp.net-web-api, cookies

I faced a problem.

When you add multiple **Set-Cookie** headers to the response

```
headers.Add("Set-Cookie", "a=b;Path=/;");
headers.Add("Set-Cookie", "c=d;Path=/;"); 
```

actually they are combined and only one header is sent with comma-separated cookies

```
Set-Cookie: a=b;Path=/;,c=d;Path=/; 
```

According to [RFC2109](http://www.ietf.org/rfc/rfc2109.txt) it is a valid syntax. But it is not according to [RFC6265](http://www.rfc-editor.org/rfc/rfc6265.txt), which deprecates **RFC2109**

Moreover latest browsers does not support this comma-separated syntax as well. Tested on **IE9**, **Firefox 13** and **Google Chrome 20**.

All of these browsers took first cookie only.

Please see the sample project below

[https://github.com/mnaoumov/cookie-bug/](https://github.com/mnaoumov/cookie-bug/)

I want to find some workaround.

I expect to have two different **Set-Cookie** headers.

I tried to write some **MessageInspector** to rewrite HTTP headers. I could not find how to access that headers.

Any ideas?

P.S. Used technology: Web API

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-29T04:08:33.487

According to answer on **codeplex** ([http://aspnetwebstack.codeplex.com/workitem/288](http://aspnetwebstack.codeplex.com/workitem/288)) this issue is known issue and related to WCF self-hosting and should be fixed by moving to IIS hosting.

This is WCF 4 issue which marked as **won't fix**.

Found another question with the same outcome [WCF 4.0 Cookie Only First is Recorded by Browser](https://stackoverflow.com/questions/10221211/wcf-4-0-cookie-only-first-is-recorded-by-browser/11706532).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-21T18:51:02.753

You can use the HttpContext.Current.Response.SetCookie

```
using System.Web;

HttpCookie foo = new HttpCookie("foo", "true");
HttpContext.Current.Response.Cookies.Add(foo); 

HttpCookie bar = new HttpCookie("bar", "true");
HttpContext.Current.Response.Cookies.Add(bar); 
```

This will add multiple set-cookies header in the response.

Edit: also, you should add the

```
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true"/> 
```

in your web.config

# multithreading - Powershell 多线程 Start-Job 帮助请

> ID：11533869
> 
> 赞同：0
> 
> 时间：2012-07-18T03:28:32.190
> 
> 标签：multithreading, logging, powershell, start-job

我正在尝试使用 Start-Job 运行命令以从某些服务器收集安全日志。我正在解析一个 .ini 文件以获取服务器列表、天数等。

```
#___Collect Logs from Servers___#

$servList = $iniContent["SERVERS"]["svr"]
$days = $iniContent["DAYS"]["days"]
$date = $(get-date -format ddMMyyyy)
$err = "Error Collecting $($logType) from $($server) or the Event Log is empty! | $(Get-Date -format g) "
$serv = $servList.Split(",")

foreach ($server in $serv){

 $outfile = "D:\DCLogs\$($date)_$($server)_$logType.txt"
 $ScriptBlock = cmd /c "D:\CollectLog\Dumpel.exe -f $($outFile) -l $($logType) -s $($server) -d $($days)"

    Start-Job -ScriptBlock $ScriptBlock

    Get-Job | Wait-Job

  $file = Get-ChildItem D:\DCLogs -Filter "$($date)_$($server)*" -Name

  $len = $file.length/1KB           # Check LogFile Size
    if ($len -eq 0){ 
        $errCount = 1
        write-output $err | Out-File $errLog -append
                    }
        } 
```

它一次只开始一份工作，所以我知道我做错了什么。如果有人能指出问题，我将不胜感激。

谢谢你。阿米莉亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:55:10.767

`Get-Job | Wait-Job`在循环中，只需序列化作业。您可以使用循环启动作业，然后`Get-Job | Wait-Job`在循环外使用。

尝试使用以下方式定义您的 ScriptBlock：

```
$ScriptBlock = {...} 
```

# java - 正在运行的java应用程序列表？

> ID：11533873
> 
> 赞同：-1
> 
> 时间：2012-07-18T03:29:18.403
> 
> 标签：java, powershell

我想找出与端口相关联的应用程序。但是 Get-Process(Powershell) 命令只显示 java.exe。

我需要有关哪个 java 应用程序的详细信息。我无法使用 jps.exe，因为我的服务器中只有 JRE（不是 JDK）。

感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:44:03.653

此网页告诉您如何使用 Powershell 获取进程的命令行参数：

*   [http://mohundro.com/blog/2010/02/05/quickly-get-the-command-line-arguments-from-processes-with-powershell/](http://mohundro.com/blog/2010/02/05/quickly-get-the-command-line-arguments-from-processes-with-powershell/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:37:41.627

在 Windows 上，您可以运行 `netstat -ano`以输出 TCP/UDP 连接以及与这些连接关联的 PID。

netstat -ano 的示例输出：

```
Proto   Local address   Foreign address State       PID
TCP         0.0.0.0:80  0.0.0.0:0      LISTENING    460 
```

来源： http: [//support.microsoft.com/kb/907980](http://support.microsoft.com/kb/907980)

Linux 也有一个`netstat`命令。 `-p`会给你Linux上的进程ID。 [http://linux.die.net/man/8/netstat](http://linux.die.net/man/8/netstat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:51:49.350

您可以使用 jconsole.exe 来确定哪个 pid 与 java.exe 相关联。我不确定它是否带有标准 jre 或者您是否需要 jdk，但它位于 java bin 文件夹中。

# netty - 这是 Netty 4.0.0 Alpha1 中的错误吗？

> ID：11533876
> 
> 赞同：1
> 
> 时间：2012-07-18T03:29:44.833
> 
> 标签：netty

我正在尝试 4.0.0 Alpha1。当我尝试运行 FactorialServer 示例时，我在方法 **BigIntegerDecoder.decode**中发现**in.readableBytes()**总是返回 0。调试后，我发现在

```
public void inboundBufferUpdated(ChannelHandlerContext ctx, ByteBuf in) throws Exception {
    callDecode(ctx, in, ctx.nextOutboundByteBuffer());
} 
```

应该是吗？

```
 public void inboundBufferUpdated(ChannelHandlerContext ctx, ByteBuf in) throws Exception {
    callDecode(ctx, in, ctx.nextInboundByteBuffer());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:13:32.140

是的，它是一个错误。我会尽快修复它。谢谢！

# jquery - .split() 基于元素的 jquery 数组

> ID：11533877
> 
> 赞同：0
> 
> 时间：2012-07-18T03:29:50.727
> 
> 标签：jquery, dom, split

编辑：我的解决方案，基于选择的答案：

```
var $brs, 
    $chunks = [];

$brs = $('hr:eq(1)').nextUntil($('hr:eq(2)')).filter('br');
$chunks.push($('hr:eq(1)').nextUntil($brs.eq(0)));
for (i = 0; i < $brs.length - 1; i++) {
    $chunks.push($brs.eq(i).nextUntil($brs.eq(i+1)));
} 
```

我有一个不寻常的案例，这是由于我试图用 javascript 解析的一个非常糟糕的网站造成的。我不会深入研究有趣的解析，但我终于设法将它分解为一个有意义的结构。我现在有一个看起来像这样的 DOM（出于所有意图和目的，将其视为标签的平面列表，每个标签在下一个开始之前关闭）：

```
<hr>
<a>
<span class="desc">
[<a>*]      // 0 or more anchor tags can show up here
<br>
<br>
<a>
<span class="desc">
[<a>*]
<br>
<br>
.
.
. 
```

我要做的是将每个标签集群抓取到它自己的数组/jquery 对象/无论如何，基本上，在 <br> 标签上运行 .split() 。有可能做这样的事情吗？如果没有，您将如何将其分成块？所以结果是这样的：

```
[<a>, <span class="desc">, <a>],
[<a>, <span class="desc">],
[<a>, <span class="desc">, <a>, <a>, <a>],
[<a>, <span class="desc">],
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:58:10.583

我不确定您为什么要这样做，而不是仅仅修改 html，但使用[`.nextUntil`](http://api.jquery.com/nextUntil/)jQuery 方法在技术上是可行的。

从 开始`hr`，选择所有兄弟元素，直到第一个元素，`br`然后将 jQuery 集合推入一个数组。在每对换行符之间重复此过程。[`.eq()`](http://api.jquery.com/eq/)可用于针对特定的`br`.

```
var $brList = $("br");
var domArray = [];
for(var i=0; i < $brList.length; i++){
    if(i==0){
        domArray.push($("hr").nextUntil($brList.eq(i)));
        continue;
    }
    domArray.push($brList.eq(i-1).nextUntil($brList.eq(i)));
} 
```

当然，指定的选择器会找到页面上的所有`br`或`hr`元素，因此如果有其他选择器，您需要使您的选择器更具体。你可以通过为选择器提供一个上下文来查看。

* * *

如果您不想将整个 jQuery 对象保留在数组中（尽管您可能确实希望这样做，因为您可以使用常规数组方法检索 DOM 元素——还有所有 jQuery 功能可用的额外好处），您可以将 jQuery 对象转换为常规数组。[jQuery 的`.toArray()`](http://api.jquery.com/toArray/)方法会为你解决这个问题：

```
domArray.push(
    $brList.eq(i-1)
           .nextUntil($brList.eq(i))
           .toArray()
); 
```

# javascript - 函数内的 JavaScript 函数 - 返回一个对象

> ID：11533879
> 
> 赞同：1
> 
> 时间：2012-07-18T03:30:05.277
> 
> 标签：javascript, object, return

我想在一个函数中调用一个函数并让这个内部函数返回一个对象。我正在使用我自己创建的 JSONRequest 函数，因此只需假设请求获取一组角色。这是代码：

```
(users = function(){

    this.getUserRoles = function(){

        var params = {};

        var json = new JSONRequest(function(data){

            rolesObj = data['roles'];

            return rolesObj;

        }, 'get_roles', params);

    }

}); 
```

然后我调用以下命令，但它返回未定义：

```
var cls = new users();

alert(cls.getUserRoles().length); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:43:49.507

ajax 请求是异步的，因此您不会从它们那里获得返回值。但是，您确实会在它们完成时收到回调，以便您可以将“返回”值传递给回调。

下面是一个重写代码以使用回调的示例：

```
this.getUserRoles = function(completionCallback){

    var params = {};

    var json = new JSONRequest(function(data){

        rolesObj = data['roles'];

        completionCallback(rolesObj);
        return rolesObj;

    }, 'get_roles', params);

} 
```

然后使用它：

```
var cls = new users();
cls.getUserRoles(function(roles) {
    alert(roles.length);
}); 
```

一旦 JSON 请求完成，rolesObj 就会被传递到回调函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:32:00.323

您的`getUserRoles`函数不返回任何内容。它调用一个异步 JSON 请求，该请求的成功回调返回一些内容。

无法在函数中发出异步请求并让函数从请求中同步返回值。请求将花费未知的时间，请求函数将在请求发送后立即返回。该值尚未从服务器返回。

# c# - 插入sql server时将excel中的日期时间格式转换为时间格式

> ID：11533885
> 
> 赞同：0
> 
> 时间：2012-07-18T03:30:53.197
> 
> 标签：c#, excel, oledb

我正在尝试将 excel 数据导入 sql server 数据库。除了excel中的格式是日期时间而我的数据库中的数据类型是时间的一列之外，一切正常。当我尝试插入数据时，它无法将日期时间转换为时间。

我的代码是：

```
OleDbCommand exclCmd = new OleDbCommand("select * from [Sheet1$]", exclConnection);
exclConnection.Open(); 
OleDbDataReader exclReader = exclCmd.ExecuteReader(); 
SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection); 
sqlBulk.DestinationTableName = "test_excel"; 
sqlBulk.ColumnMappings.Add("col1", "col1");
sqlBulk.ColumnMappings.Add("col2", "col2"); 
sqlBulk.ColumnMappings.Add("col3", "col3"); 
sqlBulk.ColumnMappings.Add("col4", "col4"); 
sqlBulk.WriteToServer(exclReader); 
```

我尝试使用“select con1, col2, col3, convert(time,col4) as col4 from [Sheet1$]”bt 转换功能不可用。

任何人都可以帮助我解决这些问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:46:48.710

1.  如果临时表是一个选项，您可以使用 TEXT(col4,"dd mmmm yyyy hh:mm:ss") 将 Excel 日期转换为字符串。一旦数据在临时表中，您可以编写适当的 SQL 语句插入到正确的表中。

2.  我会使用 SSIS 来完成这类任务，因为它可以更好地控制数据转换。

# javascript - jQuery 插件数据访问——性能下降？

> ID：11533886
> 
> 赞同：1
> 
> 时间：2012-07-18T03:31:05.087
> 
> 标签：javascript, jquery, jquery-plugins, jquery-data

我正在编写一个新的 jQuery 插件。对于指南，我使用他们的建议：

```
(function( $ ){

  var methods = {
    init : function( options ) { 
      return this.each(function(){

        var $this = $(this),
          data = $this.data('tooltip'),
          tooltip = $('<div />', {
            text : $this.attr('title')
          });

          // If the plugin hasn't been initialized yet
          if ( ! data ) {
            data = {
               element : this,
               target : $this,
               tooltip : tooltip
            };
            $(this).data('tooltip', data);

          }
        methods.update.apply(data.element, 'Test');
    },
    update : function( content ) { 
      var $this = $(this),
         data = $this.data('tooltip');

        // check or change something important in the data.

        private.test.apply( data.element );

        return data.element;
    }
  };

  var private = {
      test: function() {
          var $this = $(this),
            data = $this.data('tooltip');

          // again, do some operation with data
      }
  };

  $.fn.tooltip = function( method ) {

    // Method calling logic
    if ( methods[method] ) {
      return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof method === 'object' || ! method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
    }    

  };

})( jQuery ); 
```

它与他们的版本略有不同，以使其更短，但也显示我的差异。基本上，在初始化中，我正在实例化和创建存储在元素中的数据对象。数据对象的一部分是元素本身：

```
element : this, 
```

然后，在所有初始化完成后，我从 init 调用一个公共方法（假设我这样做是为了功能重用）。为了进行调用，我使用 .apply() 并提供适当的上下文（我的元素），当函数被外部​​调用时，它将匹配上下文：

```
return methods[ method ].apply( this, Array.prototype.slice.call( arguments, 1 )); 
```

这很好，可以理解。但是，我不确定的是从私有或公共方法中获取插件数据的性能。对我来说，似乎在每个公共和私有方法的顶部，我必须执行以下几行才能获取数据：

```
var $this = $(this),
     data = $this.data('tooltip'); 
```

当然，当我不需要存储在数据中的任何内容时，我不会执行它们。然而，我的插件执行了相当多的动画和状态跟踪，几乎所有的功能都需要访问数据。因此，似乎在几乎每个私人和公共调用中访问 .data() 都会对性能造成很大影响。

我的问题是是否有人使用这个插件结构（我希望是的，因为 jQuery 推荐它）并且找到了一种不同的引用数据的方法，而无需在每个函数调用中点击 .data() 。

# javascript - 为什么在javascript中没有将值复制到剪贴板？

> ID：11533887
> 
> 赞同：0
> 
> 时间：2012-07-18T03:31:07.440
> 
> 标签：javascript, clipboard

我正在使用 Google App Engine Go SDK，我想将一些基本的 JavaScript 代码放入我的 HTML 模板中，这些代码将使用从应用程序传递的参数。模板如下所示：

```
<script type="text/javascript">
    function CopyToClipboard()
    {
        CopiedTxt = document.selection.createRange();
        CopiedTxt.execCommand("Copy");
    }
</script>
[...]
<form name="Form1">
    <input type="hidden" name="link" value="{{.Link}}">
    <input type="button" onClick="CopyToClipboard()" value="Copy to clipboard" />
</form> 
```

代码应该做的是将`{{.Link}}`值复制到剪贴板中。但是，即使执行模板的页面源清楚地显示`http://example.com`，我得到的不是剪贴板中的东西，而是`{{.Link}}`

```
<input type="hidden" name="link" value="http://example.com"> 
```

如何使 javascript 与 GAE Golang 模板一起正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:31:40.543

这与应用引擎、模板或 Go 无关。问题是这`.execCommand()`通常行不通。剪贴板访问不是可以通过 javascript 成功完成的。您必须使用[Flash 插件](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)。

# php - 表单数据未插入数据库

> ID：11533889
> 
> 赞同：0
> 
> 时间：2012-07-18T03:31:20.623
> 
> 标签：php, mysql, html, sql

谁能告诉我为什么我的数据不会插入到我的数据库中？连接信息很好。我究竟做错了什么？

```
<?php 
error_reporting();
include('include/config.php');
$strMsg="Signup, It's Free!";
?>
<html>
<head>
<title>Try This Fecal Matter</title>
</head>
<body>

<?php

    function validate($strMsg){
        //Validation upon Submit Click
            if(isset($_POST['submit'])){
            //Validate First Name Field
                if($_POST['fName']==""){
                    $strMsg="Please Enter Your First Name.";
                    showMForm($strMsg);
                }
            //Validate Last Name Field
                elseif($_POST['lName']==""){
                    $strMsg="Please Enter Your Last Name.";
                    showMForm($strMsg);
                }
            //elseif for validation of Email with a Regular Expression
                elseif(!eregi("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$", $_POST['eMail'])) {
                    $strMsg="Please Enter Your Email.";
                    showMForm($strMsg);
                }

            //Validate password
                elseif($_POST['pWord1']==""){
                    $strMsg="Please Enter A Password.";
                    showMForm($strMsg);
                }
                elseif($_POST['pWord2']!=$_POST['pWord1']){
                    $strMsg="Your Passowrds Do Not Match.";
                    showMForm($strMsg);
                }
else{

    $fName=$_POST['fName'];
    $lName=$_POST['lName'];
    $eMail=$_POST['eMail'];
    $pass=md5($_POST['pWord1']);

        /*$SQL="SELECT eMail FROM users WHERE eMail = '".$eMail."'";
                $rs = mysql_query($SQL);
echo $SQL;
            if($rs && mysql_num_rows($rs)>0){
                            $strMsg="Email Already Registered";
                            showForm($strMsg);
                }
            else{
    */
    //Send Content To Database..
//      $SQL = "INSERT INTO 'users' (`userID`, `fName`, `lName`, `eMail`, `pass`)    
VALUES (NULL,
    dbConnect();
    $SQL = "INSERT INTO users (`userID`, `fName`, `lName`, `eMail`, `pass`,    
`bgPic`,`bio`) VALUES (NULL,'$fName', '$lName', '$eMail', '$pass', NULL, NULL );";
            echo $fName."<br/>";
            echo $lName."<br/>";
            echo $eMail."<br/>";
            echo $pass."<br/>";
            //  }
                echo $SQL;
}
}
else
    showMForm($strMsg);

}

    function showMForm($strMsg){
        echo"<div id=\"form\">\n";
        echo"<h2>".$strMsg."</h2><br/>\n";
        echo" <form action=\"".$_SERVER['PHP_SELF']."\" method=\"post\" >\n";
        echo"                   <p>First Name:<br/>\n";
        echo"                   <input type=\"text\" name=\"fName\" value=\"".$_POST['fName']."\"/></p>\n";
        echo"                   <p>Last Name:<br/>\n";
        echo"                   <input type=\"text\" name=\"lName\" value=\"".$_POST['lName']."\"/></p>\n";
        echo"                   <p>E-mail:<br/>\n";
        echo"                   <input type=\"text\" name=\"eMail\" value=\"".$_POST['eMail']."\"/></p>\n";
        echo"                   <p>Passwod:<br/>\n";
        echo"                   <input type=\"text\" name=\"pWord1\" value=\"\"/></p>\n";
        echo"                   <p>Re-Enter Passwod:<br/>\n";
        echo"                   <input type=\"text\" name=\"pWord2\" value=\"\"/></p>\n";   
        echo"                   <p>Regarding:<br/>\n";
        echo"                       <select name=\"state\">\n";
        echo"                           <option value=\"Ohio\">Ohio</option>\n";
        echo"                           <option value=\"Michigan\">Michigan</option>\n";
        echo"                           <option value=\"Indiana\">Indiana</option>\n";
        echo"                           <option value=\"Pensylvania\">Pensylvania</option>\n";
        echo"                       </select>\n";
        echo"                   <p><input type=\"submit\" value=\"Submit\" class=\"btnSubmit\" name=\"submit\" /></p>\n";
        echo" </form>\n";
}

        validate($strMsg);
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:48:27.680

`mysql_query($sql);`是您所缺少的...但同样重要的是，您还缺少在查询之前清理输入的部分。

为此，请使用：`mysql_real_escape_string($value);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:35:29.057

看起来你注释掉了你的**SQL 查询**

**前任：**

```
 //Send Content To Database..
//      $SQL = "INSERT INTO 'users' (`userID`, `fName`, `lName`, `eMail`, `pass`)    
VALUES (NULL,
    dbConnect();
    $SQL = "INSERT INTO users (`userID`, `fName`, `lName`, `eMail`, `pass`,    
`bgPic`,`bio`) VALUES (NULL,'$fName', '$lName', '$eMail', '$pass', NULL, NULL );";
            echo $fName."<br/>";
            echo $lName."<br/>";
            echo $eMail."<br/>";
            echo $pass."<br/>";
            //  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:36:20.163

嘿朋友你还没有使用`mysql_query()`功能。它在哪里？

```
mysql_query($SQL); 
```

你就完成了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T04:33:07.037

您在此代码中有错误

```
$SQL = "INSERT INTO users (`userID`, `fName`, `lName`, `eMail`, `pass`,    
`bgPic`,`bio`) VALUES (NULL,'$fName', '$lName', '$eMail', '$pass', NULL, NULL ); 
```

至 ：

```
$SQL = "INSERT INTO users ( `fName`, `lName`, `eMail`, `pass`,) VALUES ('$fName', '$lName', '$eMail', '$pass'); 
```

问题可能是数据库 mysql 上的用户 ID 是主键？

我希望这项工作

# sql - select join SQL 语句中内连接和 where 的区别

> ID：11533891
> 
> 赞同：29
> 
> 时间：2012-07-18T03:31:37.787
> 
> 标签：sql, select, join

我有两个选择加入 SQL 语句：

```
select a.id from table_a as a, table_b as b where a.id=b.id;
select a.id from table_a as a inner join table_b as b on a.id=b.id; 
```

显然，它们的结果是相同的。但是它们之间是否有任何区别，例如性能，便携性。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-18T03:35:34.313

一个区别是第一个选项通过在 where 子句中表达连接条件来隐藏意图。

对于阅读查询的用户来说，写出连接条件的第二个选项更清楚。它显示了查询的确切意图。

至于性能或任何其他差异，不应该有任何差异。在大多数 RDBMS 下，这两个查询都应该返回完全相同的结果并执行相同的操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T04:18:18.097

内连接语法在 1990 年代的某个时候被添加到 SQL 中。与使用 where 子句作为连接条件的旧语法相比，优化器有可能（但不太可能）做得更好。

它们都应该像现在一样高度便携。

内连接语法更可取，因为它对读者来说更容易，正如其他人已经指出的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T03:35:16.837

两者都是标准 SQL。不同的数据库系统可能会以不同的方式优化它们，但因为它们非常简单，如果它们这样做我会有点惊讶。但这就是 SQL 的本质：它是声明性的，这为实现在如何执行查询方面提供了很大的余地。不能保证这些执行相同，或者如果它们不同，则更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T03:35:53.167

它们在 SQL Server 中完全相同。没有性能差异。

# ios - 从 iOS 将 JSON 发布到 ASP.NET

> ID：11533895
> 
> 赞同：0
> 
> 时间：2012-07-18T03:32:00.647
> 
> 标签：ios, asp.net-mvc, json, post

我正在尝试从 iPhone 应用程序将 JSON 数据发布到我的 asp.net MVC 服务器。我的服务器中的方法如下所示：

```
[HttpPost]
public String MyMethod(Stream anUpload) { ... } 
```

这是从我的应用程序发布 JSON 的代码：

```
NSString *theURL = [NSString stringWithFormat:@"http://192.168.1.103/MyServer/MyMethod"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:theURL]];
[theRequest setHTTPMethod:@"POST"];

// Serialize my data.
NSData *theData = [NSJSONSerialization dataWithJSONObject:theList options:kNilOptions error:nil];

[theRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[theRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[theRequest setValue:[NSString stringWithFormat:@"%d", [theData length]] forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPBody:theData]; 
```

但是，当我发送请求时，我只是从服务器收到一条错误消息， MyMethod() 永远不会被调用。我假设 ASP 接受 POST 数据存在问题。有任何想法吗？

编辑：下面回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:20:02.203

我找到了答案：

我只需要将服务器端功能更改为

`public String MyMethod(List<string> aList) { ... }`

ModelBinder 试图为我反序列化 JSON，它不喜欢我的参数是 Stream。

# javascript - 我想在 jQuery 和 css 中的菜单项中添加一个子元素

> ID：11533903
> 
> 赞同：5
> 
> 时间：2012-07-18T03:32:44.867
> 
> 标签：javascript, jquery, html, css

我用 jQuery 和 CSS 创建了一个菜单项。当我进入一个菜单项时，我想进入另一个子菜单项，如下图所示。我怎样才能做到这一点？

![在此处输入图像描述](../Images/4aab34e81984f2c1e0e610b2d96e8ec3.png)

这是我的 html 标记

```
<link rel="stylesheet" href="css/style_j.css" type="text/css" media="screen"/>
    <div class="content">
        <ul id="sdt_menu" class="sdt_menu">
            <li>
                <a href="#">
                    <img src="SlideDownBoxMenu2/images/2.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Home</span>
                        <span class="sdt_descr">Home</span>
                    </span>
                </a>
            </li>
            <li>
                <a href="#">
                    <img src="SlideDownBoxMenu2/images/1.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">File Managements</span>
                        <span class="sdt_descr">File Managements</span>
                    </span>
                </a>
            <div class="sdt_box">
                        <a href="#"><img src="SlideDownBoxMenu2/images/1.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Retention</span>
                        <span class="sdt_descr">Retention</span>
                    </span> </a>
                        <a href="#">Illustrations</a>
                        <a href="#">Photography</a>
                    <div class="sdt_box">

                        <a href="#">Retentionss </a>
                        <a href="#">Illustrations</a>
                        <a href="#">Photography</a>

                </div> 
                </div>
            </li>
            <li>
                <a href="#">
                    <img src="SlideDownBoxMenu2/images/1.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Portfolio</span>
                        <span class="sdt_descr">My work</span>
                    </span>
                </a>
                <div class="sdt_box">
                        <a href="#">Websites</a>
                        <a href="#">Illustrations</a>
                        <a href="#">Photography</a>
                </div>
            </li>
            <li>
                <a href="#">
                    <img src="SlideDownBoxMenu2/images/1.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Portfolio</span>
                        <span class="sdt_descr">My work</span>
                    </span>
                </a>
                <div class="sdt_box">
                        <a href="#">Websites</a>
                        <a href="#">Illustrations</a>
                        <a href="#">Photography</a>
                </div>
            </li>
            <li>
                <a href="#">
                    <img src="SlideDownBoxMenu2/images/1.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Portfolio</span>
                        <span class="sdt_descr">My work</span>
                    </span>
                </a>
                <div class="sdt_box">
                        <a href="#">Websites</a>
                        <a href="#">Illustrations</a>
                        <a href="#">Photography</a>
                </div>
            </li>
        <li>
                <a href="#">
                    <img src="SlideDownBoxMenu2/images/1.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Portfolio</span>
                        <span class="sdt_descr">My work</span>
                    </span>
                </a>
                <div class="sdt_box">
                        <a href="#">Websites</a>
                        <a href="#">Illustrations</a>
                        <a href="#">Photography</a>
                </div>
            </li>
            <li>
                <a href="#">
                    <img src="SlideDownBoxMenu2/images/6.jpg" alt=""/>
                    <span class="sdt_active"></span>
                    <span class="sdt_wrap">
                        <span class="sdt_link">Projects</span>
                        <span class="sdt_descr">I like to code</span>
                    </span>
                </a>
                <div class="sdt_box">
                    <a href="#">Job Board Website</a>
                    <a href="#">Shopping Cart</a>
                    <a href="#">Interactive Maps</a>
                </div>
            </li>
        </ul>
    </div>
<div>
    <span class="reference">

    </span>
    </div> 
```

这是我的CSS：

```
ul.sdt_menu{
    margin:0;
    padding:0;
    list-style: none;
    font-family:"Myriad Pro", "Trebuchet MS", sans-serif;
    font-size:14px;
    width:1020px;
}
ul.sdt_menu a{
    text-decoration:none;
    outline:none;

}
ul.sdt_menu li{
    float:left;
    width:138px;
    height:40px;
    position:relative;
    cursor:pointer;
}
ul.sdt_menu li > a{
    position:absolute;
    top:0px;
    left:0px;
    width:138px;
    height:57px;
    z-index:12;

    -moz-box-shadow:0px 0px 2px #000 inset;
    -webkit-box-shadow:0px 0px 2px #000 inset;
    box-shadow:0px 0px 2px #000 inset;
}
ul.sdt_menu li a img{
    border:none;
    position:absolute;
    width:0px;
    height:0px;
    bottom:0px;
    left:57px;
    z-index:100;
    -moz-box-shadow:0px 0px 4px #000;
    -webkit-box-shadow:0px 0px 4px #000;
    box-shadow:0px 0px 4px #000;
}
ul.sdt_menu li span.sdt_wrap{
    position:absolute;
    top:20px;
    left:0px;
    width:138px;
    height:57px;
    z-index:15;
}
ul.sdt_menu li span.sdt_active{
    position:absolute;
    background:#111;
    top:57px;
    width:138px;
    height:0px;
    left:0px;
    z-index:14;
    -moz-box-shadow:0px 0px 4px #000 inset;
    -webkit-box-shadow:0px 0px 4px #000 inset;
    box-shadow:0px 0px 4px #000 inset;
}
ul.sdt_menu li span span.sdt_link,
ul.sdt_menu li span span.sdt_descr,
ul.sdt_menu li div.sdt_box a{
    margin-left:10px;
    text-transform:uppercase;
    text-shadow:1px 1px 1px #000;
    margin-top:-10px;
}
ul.sdt_menu li span span.sdt_link{
    color:#fff;
    font-size:14px;
    float:left;
    clear:both;
}
ul.sdt_menu li span span.sdt_descr{
    color:#0B75AF;
    float:left;
    clear:both;
    width:155px; /*For dumbass IE7*/
    font-size:10px;
    letter-spacing:0px;
    margin-top:0px;
    margin-left:-8px;
}
ul.sdt_menu li div.sdt_box{
    display:block;
    position:absolute;
    width:138px;
    overflow:hidden;
    height:138px;
    top:57px;
    left:0px;
    display:none;
    background:#000;
}
ul.sdt_menu li div.sdt_box a{
    float:left;
    clear:both;
    line-height:30px;
    color:#0B75AF;
}
ul.sdt_menu li div.sdt_box a:first-child{
    margin-top:15px;
}
ul.sdt_menu li div.sdt_box a:hover{
    color:#fff;
} 
```

这是我的 jQuery Javascript 代码：

```
 <!-- The JavaScript -->

        <script type="text/javascript">
            $(function() {
                /**
                * for each menu element, on mouseenter, 
                * we enlarge the image, and show both sdt_active span and 
                * sdt_wrap span. If the element has a sub menu (sdt_box),
                * then we slide it - if the element is the last one in the menu
                * we slide it to the left, otherwise to the right
                */
                $('#sdt_menu > li').bind('mouseenter',function(){
                    var $elem = $(this);
                    $elem.find('img')
                         .stop(true)
                         .animate({
                            'width':'138px',
                            'height':'57px',
                            'left':'0px'
                         },400,'easeOutBack')
                         .andSelf()
                         .find('.sdt_wrap')
                         .stop(true)
                         .animate({'top':'140px'},500,'easeOutBack')
                         .andSelf()
                         .find('.sdt_active')
                         .stop(true)
                         .animate({'height':'138px'},300,function(){
                        var $sub_menu = $elem.find('.sdt_box');
                        if($sub_menu.length){
                            var left = '138px';
                            if($elem.parent().children().length == $elem.index()+1)
                                left = '-138px';
                            $sub_menu.show().animate({'left':left},200);
                        }   
                    });
                }).bind('mouseleave',function(){
                    var $elem = $(this);
                    var $sub_menu = $elem.find('.sdt_box');
                    if($sub_menu.length)
                        $sub_menu.hide().css('left','0px');

                    $elem.find('.sdt_active')
                         .stop(true)
                         .animate({'height':'0px'},300)
                         .andSelf().find('img')
                         .stop(true)
                         .animate({
                            'width':'0px',
                            'height':'0px',
                            'left':'85px'},400)
                         .andSelf()
                         .find('.sdt_wrap')
                         .stop(true)
                         .animate({'top':'25px'},500);
                });
            });
        </script> 
```

# c# - 无法在数据网格视图上显示数据

> ID：11533905
> 
> 赞同：0
> 
> 时间：2012-07-18T03:33:05.507
> 
> 标签：c#, database, linq, datagridview

我在将数据中的数据显示到数据网格视图中时遇到问题。任何人都可以帮助解决，因为他们在编译时从不提示我任何错误，并且数据库中也有数据。数据网格视图中出现的只是列，里面没有数据。

```
private void LoadAllEmpShift()
    {
        using (testEntities Setupctx = new testEntities())
        {
            var Viewemp = from ES in Setupctx.employeeshifts
                          join shifthour sh in Setupctx.shifthours on ES.ShiftHourID equals sh.idShiftHours
                         select new
                         {
                             ES.idEmployeeShift,
                             ShiftHour_Start = sh.shiftTiming_start,
                             ShiftHour_Stop = sh.shiftTiming_stop,
                             ES.EmployeeName,
                             ES.StartTime,
                             ES.EndTime,
                             ES.Date
                         };
            dgvShift.DataSource = Viewemp;
        }
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:35:22.620

设置好`DataSource`属性后，需要调用

```
dgvShift.DataBind(); 
```

编辑：

我相信以上内容适用于 DataGrid / GridView（以防有人使用这些控件）。

**对于 DataGridView，您需要有一个 BindingSource。**

将`BindingSource`控件添加到表单中，然后将`DataSource`属性设置`BindingSource`为`Viewemp`

```
dgvBindingSource.DataSource = Viewemp;
dgvShift.DataSource = dgvBindingSource; 
```

# c# - 长时间卡在函数（OnPaint）中时在表单上显示更新的最简单方法

> ID：11533907
> 
> 赞同：0
> 
> 时间：2012-07-18T03:33:23.057
> 
> 标签：c#, winforms, onpaint

第一次运行我的程序时，我在 OnPaint 函数中加载了一些需要很长时间的东西，我需要一种方法来显示我的进度。我已经有了进展的东西，但我只是不知道最简单的方法来展示它。

想要要么

1.  当长时间停留在 OnPaint 功能中时保持表单响应的东西，我正在更改标题名称以显示进度，并且我希望表单保持响应！

2.  弹出其他易于创建的内容以显示进度

顺便说一句，我只加载它 OnPaint 因为我希望显示表单，以便用户知道程序正确打开。否则表单加载时什么都不会发生，用户可能会认为程序甚至没有打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:44:37.077

这里没有太多的上下文，但如果我理解正确的话，看起来你在表单加载时需要发生一些事情，并且可能需要很长时间。您正在尝试在绘制事件中执行此操作，因为您想确保用户在加载完成时看到*某些内容。*

这个评价正确吗？

如果是这样，我建议您考虑使用 BackgroundWorker 类，因为它可以让您在保持 UI 响应的同时进行所讨论的昂贵的“加载”。

带有文档的示例做得很好，所以我不会在这里写另一个示例......

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:21:46.793

[做事件](http://www.codinghorror.com/blog/2004/12/is-doevents-evil.html)

正如杰里米汤普森所说，非常感谢

虽然我需要等待 2 天才能接受这个答案。

# mysql - MySQL - 如何删除不匹配的记录

> ID：11533908
> 
> 赞同：0
> 
> 时间：2012-07-18T03:33:38.870
> 
> 标签：mysql

查找查询，删除父 id 与主记录不匹配的子表的所有记录。

**主表**

```
 1\. David
 2\. Fin
 3\. Lisa 
```

**子表**

```
 1\. 100
 1\. 200
 2\. 200
 2\. 222
 8\. 100
 9\. 100 
```

**子表**需要输出

 **```
 1\. 100
 1\. 200
 2\. 200
 2\. 222 
```

**想从子表中删除记录#8 和 9，因为它没有父 ID。**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:35:18.557

您可以在操作中使用外部联接`DELETE`：

```
DELETE a 
FROM child a
LEFT JOIN master b ON a.parent_id = b.id
WHERE b.id IS NULL 
```

为避免需要这样做，您应该查看每当您删除父级（主表中的行）时执行的[引用 CASCADE操作。](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

如果您`ON DELETE CASCADE`在子表中设置了外键，则任何被删除的父级***也***将删除其所有相应的“子级”。**

# java - 实现静态菜单

> ID：11533911
> 
> 赞同：0
> 
> 时间：2012-07-18T03:33:58.987
> 
> 标签：java, android, xml

我想做的是随时显示菜单栏，无论显示什么布局或活动。我基本上在做的是创建一个活动（我们称之为 MenuActivity），它创建按钮，并使其他活动从 MenuActivity 扩展。问题是，我找不到让按钮显示在其他活动上的方法。如果这有帮助，这是按钮的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/relativeLayout" >

    <Button
        android:id="@+id/ABC"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="14dp"
        android:layout_y="373dp"
        android:text="@string/abc" />

    <Button
        android:id="@+id/favoritos"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="62dp"
        android:layout_y="374dp"
        android:text="@string/favoritos" />

    <Button
        android:id="@+id/Cupones"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="243dp"
        android:layout_y="372dp"
        android:text="@string/cupones" />

    <Button
        android:id="@+id/destacados"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="145dp"
        android:layout_y="375dp"
        android:text="@string/destacados" />

</AbsoluteLayout> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:35:08.373

我想如果您`include`将此布局`child layout`与其他活动的布局一样，您的问题将得到解决：

```
<include  layout="@layout/menulayout" android:id="@+id/menuLayout"  ...  /> 
```

menulayout.xml 是您应该在其中定义的上述布局的名称，`res/layout`您希望它在所有活动中显示为菜单，也是您的菜单`menuLayout`布局的 id，您可以在活动的布局或代码中引用它。
您可以覆盖所有布局参数。这意味着任何 android:layout_* 属性都可以与`<include />`标签一起使用。这是一个例子：

```
<include android:layout_width="fill_parent" layout="@layout/image_holder" /> 
```

您可以在 about include in [this page](http://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/)中查看更多详细信息。
**编辑**：
如果您在查找包含布局中的视图时遇到问题，请参阅此问题，希望这些对您有所帮助：
[findViewById 不适用于包含？](https://stackoverflow.com/questions/10803672/findviewbyid-not-working-for-an-include)
[通过 id 查找视图？](https://stackoverflow.com/questions/9184113/finding-an-include-view-by-id)

# javascript - Google 日历提要未显示活动

> ID：11533913
> 
> 赞同：0
> 
> 时间：2012-07-18T03:34:03.633
> 
> 标签：javascript, jquery, fullcalendar

我有一个公共的谷歌日历。提要测试正常，但我无法让事件显示在完整日历中。我的提要是用于共享的 XML 提要。我读过类似的帖子，但它们没有帮助。

[http://drcraigjohnson.net/fullcalendar-1.5.3/demos/theme.html](http://drcraigjohnson.net/fullcalendar-1.5.3/demos/theme.html)

```
$(document).ready(function() {
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    $('#calendar').fullCalendar({
        theme: true,
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: true,                        
        events: 'https://www.google.com/calendar/feeds/jl2um2s9odbrtj7lt3bn9817vg%40group.calendar.google.com/public/basic',
        eventClick: function(event) {
            if (event.url) {
                window.open(event.url);
                return false;
            }
        },
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T00:38:38.163

哎呀！**确保未选中**谷歌日历“仅共享我的空闲/忙碌信息” 。通过使用已知的工作提要进行测试，即有效的谷歌假期 xml。然后我知道了一些事情：我的饲料。再次感谢。问题解决了！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:15:57.323

我无法使用 jsfiddle 对此进行测试 - 我想我无权访问您的 Google 日历。无论如何，您可以在这里纠正几件事：

1.  从 JavaScript 部分删除**HTML**注释！`<!--`以脚本标签开头的那个
2.  回调后有一个额外的逗号`eventClick`- 删除它。不过，这应该会给您带来语法错误。您的 JS 不会出现语法错误。

尝试使用浏览器工具（Chrome 开发工具或 Firebug）检查您的 API 调用以进一步调试。

# java - org.apache.derby.jdbc.ClientDriver 在哪里？

> ID：11533921
> 
> 赞同：10
> 
> 时间：2012-07-18T03:34:53.450
> 
> 标签：java, jakarta-ee, tomcat, jdbc, derby

我下载了[Core Apache Derby 数据库引擎的 jar，其中还包括嵌入式 JDBC 驱动程序 (10.9.1.0)](http://mvnrepository.com/artifact/org.apache.derby/derby)。但是那个 jar 不包含jdbc 包中的`.class`文件。`ClientDriver`这是为什么 ？我在哪里可以找到这个类文件？我需要这个文件从作为服务器的 tomcat 连接到 derby 数据库。

请提供完整jar的下载链接，以便我获得所需的`.class`文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T03:47:08.850

好的：您是否查看过 Apache Derby 页面：

*   [http://db.apache.org/derby/releases/release-10.9.1.0.cgi](http://db.apache.org/derby/releases/release-10.9.1.0.cgi)

下载 db-derby-10.9.1.0-bin.zip

它包含许多文件，包括`derby.jar`和`derbyclient.jar`（以及许多文档）。

`derbyclient.jar`包含我们的朋友`org.apache.derby.jdbc.ClientDriver.class`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-22T13:30:20.467

@Paulsm4 是正确的。
但请记住：

> org.apache.derby.jdbc.ClientDriver

可以在**derbyclient.jar**中找到它足以获得到**正在运行**的Derby DB 服务器的连接。

但是，如果您想在获取连接时创建嵌入式（在内存中）数据库，那么您必须使用不同的 jdbc 驱动程序：

> org.apache.derby.jdbc.EmbeddedDriver

可以在**derby.jar**中找到。此外，`create=true`必须传递附加参数。例如：

```
<property name="javax.persistence.jdbc.url" value="jdbc:derby:myApp;databaseName=myApp;create=true" /> 
```

希望它可以帮助某人。

# lwjgl - LWJGL 声音管理器问题

> ID：11533930
> 
> 赞同：0
> 
> 时间：2012-07-18T03:35:47.090
> 
> 标签：lwjgl

我一直在研究他们在 wiki 的教程部分提供的 Asteroids Game 示例代码，但遇到了一个奇怪的错误。

该代码在我的开发环境 Eclipse 中运行良好。游戏正常运行并正常退出。

我在文件菜单中完成导出过程并创建一个可执行 jar，当使用此批处理文件代码运行时

```
java -Djava.library.path=D:\Tools\lwjgl-2.8.4\lwjgl-2.8.4\native\windows -jar SpaceInvaders.jar 
```

尝试加载 wav 文件时启动显示并失败。给出这个错误。

```
Exception in thread "main" java.lang.NullPointerException 
```

我追踪到代码中发生这种情况的位置，它位于加载 wav 的位置。显然在环境之外它无法找到文件，即使它们就在代码旁边？我所有的 wav 文件和 gif 文件现在都与 java 类文件位于同一目录中，因此从代码中调用它们看起来像这样：

[http://i.imgur.com/2gnN1.png](http://i.imgur.com/2gnN1.png)

在谷歌上搜索东西它告诉我将它们压缩到一个单独的文件中，然后导入到类文件夹并从那里引用。我想知道是否有办法将文件保存在我的主 jar 文件中，而不必创建一个单独的实体。

感谢您的回复！如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:52:25.503

您可能需要考虑使用更高级别的 API，例如 paulscode 中[的 3d soundsystem](http://www.paulscode.com/forum/index.php?topic=4.0)。SoundSystem 可以从 jar 内部读取（如您所问），如果当前硬件不支持 LWJGL 声音，则自动切换到 java 声音。

# c++ - 检查双“d < 0”可以吗？

> ID：11533936
> 
> 赞同：4
> 
> 时间：2012-07-18T03:36:23.283
> 
> 标签：c++, double, arduino, precision

我正在为 Arduino 编写一个完整的双浮点函数（无关紧要，但我找不到任何“正确”的函数），我做了以下检查：

```
if (d < 0) {
    d *= -1;
    bin += "-";
} 
```

我知道由于浮点不精确，双重相等是挑剔的。那么这样做安全吗？或者我应该坚持这个（无论如何我在我的代码的后面部分使用它）

```
int compareNums(double x, double y) {
    if (abs(x - y) <= EPSILON) {
        return 0;
    } else if (x > y) {
        return 1;
    } else {
        return -1;
    }
} 
```

还有几个简单的问题：我做`d < 0`或做有关系`d < 0.0`吗？

我将 a 乘以`double d`10 直到它没有小数部分，所以我做了一个类似于`d == (int) d`. 我想知道什么是好的 epsilon 使用（我在这里使用了这个[http://msdn.microsoft.com/en-us/library/6x7575x3(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/6x7575x3(v=vs.80).aspx)），因为我不想以无限循环结束。根据文章`0.000000119209`是浮动或类似的东西的最小可区分差异。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:45:59.930

`d < 0`是有效的（尽管我更喜欢写`d < 0.0`。在第一种情况下，在比较之前，零将被“提升”为加倍。

并且将 double 与 0 与`<`or进行比较`>`是完全有效的，并且不需要“epsilon”。

`bin += "-";`是荒谬的。

一般来说，将浮点数/双精度数与“==”进行比较是无效的，并且永远不应该这样做（除了一些特殊情况，例如检查零或无穷大）。有些语言甚至不允许在浮点数之间使用“==”（或等价物）。

`d == (int) d`更废话了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:45:11.477

看我对这个问题的回答：

[比较浮点值有多危险？](https://stackoverflow.com/questions/10334688/how-dangerous-is-it-to-compare-floating-point-values/10335601#10335601)

具体来说，建议您不应该使用绝对 epsilon 并且不应该使用浮点，直到您彻底阅读并理解了*每个计算机科学家应该了解的关于浮点算术的知识*。

至于您问题中的这段特定代码，您的目标似乎是打印数字的文本表示，简单地测试`< 0`是正确的。不管你写`0`还是`0.0`.

# python - 如何在python中的类之间使用函数

> ID：11533939
> 
> 赞同：1
> 
> 时间：2012-07-18T03:36:45.930
> 
> 标签：python

如果我在 python 脚本中有多个类，如何从第二类中的第一个类调用一个函数？

这是一个例子：

```
Class class1():

  def function1():
        blah blah blah

Class class2():

 *How do I call function1 to here from class1* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:40:28.557

类中的函数也称为方法，它们在对象上调用。从 class2 调用 class1 中的方法的方法是拥有 class1 的实例：

```
class Class2(object):
    def __init__(self):
        self.c1 = Class1()
        self.c1.function1() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T03:53:50.893

最干净的方法可能是通过继承：

```
class Base(object):
    def function1(self):
        # blah blah blah

class Class1(Base):
    def a_method(self):
        self.function1()  # works

class Class2(Base):
    def some_method(self):
        self.function1()  # works

c1 = Class1()
c1.function1()  # works
c2 = Class2()
c2.function1()  # works 
```

# algorithm - 是否有可能从所有其他 N 个出现的元素中挑选出唯一的 K 个出现的元素

> ID：11533940
> 
> 赞同：0
> 
> 时间：2012-07-18T03:37:02.940
> 
> 标签：algorithm

假设给定一个数组，所有元素都出现 N 次，但只有一个元素出现 K 次。

例子：

N=3, K=1, A = [1,1,1,2,2,3,3,3,4,4,2,4,5]

N=2, K=1, A = [1,1,2,2,3,3,4]

我刚刚查看了以下两个线程：

[在数组中只出现一次的数字](https://stackoverflow.com/questions/4772561/number-which-occurs-only-once-in-the-array)；使用 XOR 操作，当 k 为奇数且 n 为偶数时，似乎很容易解决这个问题。

[给定一个数组，该数组包含除一个之外的所有元素三次。找到出现一次的元素。](https://stackoverflow.com/questions/11533572/given-an-array-that-contains-all-elements-thrice-except-one-find-the-element-wh;But)很难找到时间复杂度 O(N) 和空间复杂度 O(1) 的算法来解决这个问题。

有哪位小伙伴可以给点意见吗？是否可以解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:06:14.740

N 总是大于 K 吗？

```
if K<N {
until A is not empty {
 take 1st element and remove N times form array A

 catch exeption: element is only K times: return this element;
 }
} 
```

# excel - 根据屏幕分辨率调整工作表缩放级别

> ID：11533942
> 
> 赞同：5
> 
> 时间：2012-07-18T03:37:11.477
> 
> 标签：excel, vba, screen-resolution, excel-2003

我有一个 Excel 2003 宏来根据屏幕分辨率调整我的屏幕缩放。

```
Sub Macro1()
   Dim maxWidth As Long, myWidth As Long
   Dim myZoom As Single

   maxWidth = Application.UsableWidth * 0.96
   'I use r because upto r i have macro buttons
   myWidth = ThisWorkbook.ActiveSheet.Range("r1").Left
   myZoom = maxWidth / myWidth
   ActiveWindow.Zoom = myZoom * 100
End Sub 
```

当我在 Excel 2003 中尝试时，按钮大小及其标题没有正确缩放。并且`Application.UsableWidth`始终`1026`以屏幕分辨率 1024*768 或 1366*768 的宽度返回。有任何想法吗？

如果以任何系统屏幕分辨率打开，我希望 Excel 工作表适合宽度

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-17T23:43:37.530

```
Sheets(1).Range("a1:AC1").Select
ActiveWindow.Zoom = True 
```

是的，这就是所有需要的。这将根据屏幕分辨率调整缩放级别。有关详细信息，请参阅以下链接：- [http://optionexplicitvba.blogspot.sg/2011/10/one-size-fits-all.html](http://optionexplicitvba.blogspot.sg/2011/10/one-size-fits-all.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T11:12:23.833

您可以将此 Windows API 调用添加到可以确定屏幕分辨率的代码中。

```
Private Declare PtrSafe Function GetSystemMetrics Lib "USER32" _
 (ByVal nIndex As Long) As Long

  Sub Macro1()
    Dim maxWidth As Long
    Dim myWidth As Long
    Dim myZoom As Single

    maxWidth = GetSystemMetrics(0) * 0.96
    myWidth = ThisWorkbook.ActiveSheet.Range("R1").Left
    myZoom = maxWidth / myWidth
    ActiveWindow.Zoom = myZoom * 100

  End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-26T15:56:33.460

我想我会分享我放在一起的东西，这些东西可以用于多张纸。它借鉴了上述答案，您不必指定活动范围是什么

```
Sub Zoomitgood()

'this macro will loop through all the sheets and zoom to fit the contents by 
'measuring the width and height of each sheet. It will then zoom to 90% of 
'the "zoom to fit" setting.

    Dim WS_Count As Integer
    Dim i As Integer
    Dim j As Integer
    Dim k As Integer
    Dim maxwidth As Integer
    Dim width As Integer
    Dim Height As Integer
    Dim MaxHeight As Integer
    Dim zoom As Integer

'First Loop: Loop through each sheet, select each sheet so that each width 
'and height can be measured. The width and height are measured in number of 
'cells.

WS_Count = ActiveWorkbook.Worksheets.Count

For i = 1 To WS_Count

Worksheets(i).Activate
maxwidth = 0
MaxHeight = 0

'Second loop: measure the width of each sheet by running line by line and 
'finding the rightmost cell. The maximum value of the rightmost cell will be 
'set to the maxwidth variable

For j = 1 To 100
width = Cells(j, 100).End(xlToLeft).Column
If width >= maxwidth Then

maxwidth = width

End If

Next

'Third loop: measure the height of each sheet by running line by line and 
'finding the rightmost cell. The maximum value of the lowest cell will be 
'set to the maxheight variable.

For k = 1 To 100
Height = Cells(100, k).End(xlUp).Row
If Height >= MaxHeight Then

MaxHeight = Height

End If

Next

'Finally, back to loop 1, select the range for zooming. Then set the zoom to 
'90% of full zoom.

Range(Cells(1, 1), Cells(MaxHeight, maxwidth)).Select
ActiveWindow.zoom = True
zoom = ActiveWindow.zoom
ActiveWindow.zoom = zoom * 0.9
Cells(1000, 1000).Select
Application.CutCopyMode = False
ActiveWindow.ScrollRow = 1
ActiveWindow.ScrollColumn = 1

Next

MsgBox "You have been zoomed"

Application.ScreenUpdating = True
Application.DisplayAlerts = True

 End Sub 
```

# wordpress - Wordpress 主题的提示

> ID：11533943
> 
> 赞同：0
> 
> 时间：2012-07-18T03:37:27.753
> 
> 标签：wordpress, wordpress-theming, custom-post-type

我正在为 wordpress 开发一个主题，并想知道在主页上显示亮点的最佳方式。

例子： ![强调](../Images/b7d5f5eae91ae239e6d52b6bfdd316eb.png)

![在此处输入图像描述](../Images/038b9f86bfbe12c934ced509afad6b80.png)

我想了两个办法：

*   自定义帖子类型 - 带有用于图像、文本和链接的元框的自定义帖子“突出显示”。
*   主题选项 - 包含每个框选项的页面。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:05:11.260

您可以使用您建议的任何一种方法。在我看来，在一个特定的页面模板上涉及大量元框完全是浪费时间——只有一张图片、一个标题和一个链接到帖子/页面的摘录。三个帖子（无论是否自定义）将使用特色图片、摘录和页面/帖子标题来处理。

我还认为，对于主页上的三个帖子来说，自定义帖子类型太多了。如果您使用帖子路线，只需创建一个名为 Home Highlights 的新帖子类别并将您的三个帖子放在那里，然后通过构建在 WP_Query 上的自定义循环将它们拉入。

是的，您也可以选择主题选项路线。如果是客户端更新网站，那么它看起来很专业，我已经开始使用一个名为[Options Tree](http://wordpress.org/extend/plugins/option-tree/)的插件，它与 Super Skeleton 集成后，它可以很容易地构建你的自定义主题选项，它也同样有效也。

真的是见仁见智，而不是一刀切的“这个肯定更好”！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:05:12.517

两者都不。您可以使用 Wordpress 的核心功能和/或自定义字段来实现您想要的。如果您有一个需要更直观设置的客户端，或者安装类似[Types Plugin](http://wordpress.org/extend/plugins/types/)之类的东西来为您完成，请考虑使用[自定义元框。](http://codex.wordpress.org/Function_Reference/add_meta_box)

这将允许您将自己的变量附加到给定的帖子/页面。

要访问帖子的自定义字段，请单击帖子编辑器顶部的屏幕选项按钮以启用自定义字段。

就个人而言，我会为您的突出显示图像[启用缩略图支持，](http://codex.wordpress.org/Post_Thumbnails)为您的突出显示副本使用[摘录，并为标题使用](http://codex.wordpress.org/Function_Reference/the_excerpt)[标题](http://codex.wordpress.org/Function_Reference/the_title)或[自定义字段](http://codex.wordpress.org/Custom_Fields)。

这样，您可以将所有鸡蛋放在一个篮子中，而不是使用自定义帖子类型或主题选项页面使事情变得过于复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T18:32:50.253

查看插件“Ether Content Builder”

# javascript - Fittext 仅在调整窗口大小时才有效？

> ID：11533945
> 
> 赞同：0
> 
> 时间：2012-07-18T03:37:39.690
> 
> 标签：javascript, jquery, responsive-design

我正在使用 fittext JS 插件来调整我正在处理的页面上的标题大小。出于某种原因，它仅在您调整窗口大小时才会启动，我似乎无法弄清楚它为什么会这样做。

有人有想法么？这是一个链接：http: [//voltagenewmedia.ca/testserver/dry/#/homepage](http://voltagenewmedia.ca/testserver/dry/#/homepage)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-10T12:04:27.063

对于那些仍然有问题的人，这个修复对我有用

替换里面的这段代码`jquery.fittext.js`

```
// Call once to set.
resizer(); 
```

有了这段代码，

```
$(window).load(function(){
    resizer();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T16:34:04.320

我刚刚遇到了一个让我发疯的类似问题。保存我的文本的元素无法在它的容器内缩小，因为最大字体大小太大，所以我从父容器的宽度开始。然后我在初始化后只使用一次 fittext 算法让它正确加载，它似乎解决了这个问题。

```
$("#hero").find('h1').fitText(.65, { maxFontSize: '142px' });

$("#hero").find('h1').each(function(){
    startSize = Math.max(Math.min($('#hero').width() / (compressor.*10)));
    $(this).css({'font-size':startSize});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:22:17.303

您的链接已关闭，因此我实际上无法看到问题所在。Fittext 应立即调整大小，然后在调整大小时更新：

```
 // Resizer() resizes items based on the object width divided by the compressor * 10
  var resizer = function () {
    $this.css('font-size', Math.max(Math.min($this.width() / (compressor*10), parseFloat(settings.maxFontSize)), parseFloat(settings.minFontSize)));
  };

  // Call once to set.
  resizer();

  // Call on resize. Opera debounces their resize by default. 
  $(window).on('resize', resizer); 
```

你是不是等到 DOM 加载完毕才使用插件？

# python - 我应该使用哪些 Python Gui 和库？

> ID：11533947
> 
> 赞同：1
> 
> 时间：2012-07-18T03:37:57.833
> 
> 标签：python, user-interface, open-source, ide

我们打算制作一个开源软件，我们将在其中解析 XML 文件，还包括一个图像查看器和其他东西。因为**Python**更易于开发，并且它支持 Linux 和 Windows 等平台。任何人都可以推荐一个**好的 GUI IDE /builder**是**免费的，支持 RAD 的拖放**。此外，我们打算制作一个好的 GUI 界面（包括菜单和其他工具箱）该软件还将具有一些**图像处理功能**，因此我们计划合并 openCV。那里那里有很多 IDE/Builder，我们无法正确决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:56:42.173

你应该列出你遇到的那些，这样它可以帮助人们根据这些给你推荐。

有 pyQT，它应该可以帮助你完成你想要的。还有[格莱德](http://glade.gnome.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:22:03.320

好吧，这只是我的选择，但前段时间我用我找到的几乎所有免费的 GUI 设计师进行了很多测试，这包括 pyQT、WX 和 TKinter 的设计师，老实说，我不喜欢他们的工作方式，他们生成的模板或他们遇到的任何其他问题。但是...最后我选择了 TKInter（通常人们会说这是最糟糕的，我不得不同意，图形不是那么现代，但它已经安装了 python），作为一个设计师我m 使用[PAGE](http://page.sourceforge.net/)（它需要安装 TCL 才能运行，其主要目标是也在 TCL 中生成模板，但您可以轻松导出到 python）。使用 PAGE 对我来说最大的优势是它将组件放入表单的方式（它使用*place*而不是*pack*，而且我不喜欢限制包）。在同一个应用程序中，我使用[PIL](http://www.pythonware.com/products/pil/)作为图形引擎，它与 TKInter 的*画布*组件配合得非常好。同样，这是我个人的意见。

# ruby-on-rails - Cygwin rvm 错误 win 7 32 位

> ID：11533950
> 
> 赞同：0
> 
> 时间：2012-07-18T03:38:12.060
> 
> 标签：ruby-on-rails, ruby, cygwin, rvm

## 我在 Window 7 32 位下的 cygwin rvm 中遇到错误：

```
$ rvm install 1.9.3 
```

**运行“make”时出错，请阅读/home/User/.rvm/log/ruby-1.9.3-p194/yaml/make.log**

* * *

**/home/User/.rvm/log/ruby-1.9.3-p194/yaml/make.log**
make
错误：不知道如何制作'/configure.ac'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:40:36.933

看起来windows`make`不支持`-j`像*nix`make`那样的开关，您可以将安装分为两个步骤以使其工作：

```
curl -L https://get.rvm.io | bash -s stable
rvm install 1.9.3 
```

由于您已经安装了 rvm，您可以只运行第二个命令来安装 ruby​​。

* * *

EDIT01：新错误，丢失文件：`/home/User/.rvm/src/yaml-0.1.4/config/depcomp` 检查它是否存在并且可读

其他错误：`/bin/sh: /home/User/.rvm/src/yaml-0.1.4/config/missing: Permission denied`

* * *

EDIT02：新错误，这一次看起来像是 yaml 在 windows 上的编译方式或只是使用的编译工具的一些错误，请确保您已安装 autoconf、automake、gcc、libtool、make - 然后再试一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:00:15.623

您是否尝试过使用 sudo 执行此操作？例如`sudo rvm install 1.9.3`

我在您的日志中看到一些权限被拒绝错误。您从脚本中收到的错误消息似乎认为缺少文件，但我怀疑只是这些文件需要 root 权限才能读取或写入或执行。

您也可以尝试修复您的权限，但 sudo 可能更容易。

**/home/User/.rvm/log/ruby-1.9.3-p194/yaml/configure.log 如下：**

```
/bin/sh: /home/User/.rvm/src/yaml-0.1.4/config/missing: Permission denied
configure: WARNING: missing' script is too old or missing 
```

...

```
cp: cannot openconfig/depcomp' for reading: Permission denied
./configure: line 3656: ./depcomp: No such file or directory none 
```

...

```
configure: error: cannot run /bin/sh config/config.sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T12:30:43.623

> **通过使用以下软件包重新安装 cygwin 解决了问题**

```
维姆
混帐
git完成
吉特克
卷曲
红宝石
sqlite3
libsqlite3_0
libsqlite3-开发
海合会
颜色gcc
制作
库工具
libncurses-开发
诅咒
openssl
openssl-开发
打开sh
zlib
zlib-开发
修补
wget
解压
```

现在每件事都工作正常。感谢每个机构提供您的支持。

# ios - 使用 NSOperationQueue 的两个同时后台任务

> ID：11533955
> 
> 赞同：2
> 
> 时间：2012-07-18T03:39:03.230
> 
> 标签：ios, ios5, grand-central-dispatch, nsoperationqueue

我有两个任务需要在后台同时以不同的线程优先级执行：

1.  持续收集和处理陀螺运动数据（高优先级）

    ```
    gyroQueue = [[NSOperationQueue alloc] init];

    [self.motionManager startDeviceMotionUpdatesToQueue:gyroQueue withHandler:^(CMDeviceMotion *motion, NSError *error){
        [self processMotion:motion withError:error];
    }]; 
    ```

2.  有时在不干扰运动更新的情况下处理图像（转换、裁剪、调整大小等 = 1-2 秒）（非常低的优先级）

    ```
    imageProcessingQueue = [[NSOperationQueue alloc] init];

    [imageProcessingQueue addOperationWithBlock:^{
        [self processImage:[UIImage imageWithData:imageData]];
    }]; 
    ```

编辑：这是我最初所拥有的（而不是阻止操作），它仍然阻止运动更新：

```
NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(processImage:) object:[UIImage imageWithData:imageData]];
[operation setThreadPriority:0.0];
[operation setQueuePriority:0.0];
[imageProcessingQueue addOperation:operation]; 
```

似乎这两个任务都在同一个后台线程上执行（由于 NSOperationQueue 的性质？），并且图像的处理会阻止 gyroQueue 更新，直到它完成，这是我试图避免的。

如何使用 NSOperationQueue 生成两个单独的线程，并相应地分配veryHigh 和veryLow 优先级？

编辑：这个问题仍然悬而未决，我正在使用 Travor Harmon 的图像调整大小功能来调整图像大小。有人可以确认它是否是线程安全的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:25:00.687

我已经为这个问题找到了一个解决方案（或可靠的解决方法）：

我没有使用 将 deviceMotion 更新路由到队列`startDeviceMotionUpdatesToQueue`，而是创建了一个 CADisplayLink 计时器，它不会干扰其他后台队列 - 虽然它与屏幕刷新率匹配，但它的本质是最高优先级：

```
[self.motionManager startDeviceMotionUpdates];

gyroTimer = [CADisplayLink displayLinkWithTarget:self selector:@selector(processMotion)];
[gyroTimer addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:32:25.910

我认为在这里您可以尝试仅创建一个操作队列并尝试根据需要设置每个操作的优先级。如果你只使用一个队列，线程优先级会更有效，让你的头脑以更清晰的方式思考（毕竟这只是建议。）

```
- (void)setThreadPriority:(double)priority 
```

您指定的值映射到操作系统的优先级值。指定的线程优先级仅在执行操作的 main 方法时应用于线程。在执行操作的完成块时不应用它。对于您创建自己的线程的并发操作，您必须在自定义启动方法中自己设置线程优先级，并在操作完成时重置原始优先级。

来自苹果的文档。

`Operation queues usually provide the threads used to run their operations. In Mac OS X v10.6 and later, operation queues use the libdispatch library (also known as Grand Central Dispatch) to initiate the execution of their operations. As a result, operations are always executed on a separate thread, regardless of whether they are designated as concurrent or non-concurrent operations. In iOS 4 and later, operation queues use Grand Central Dispatch to execute operations.`

# .net - 选择参数中的 TSQL 计数

> ID：11533961
> 
> 赞同：2
> 
> 时间：2012-07-18T03:39:40.720
> 
> 标签：.net, tsql

给定以下查询，它将计算给定入学（科目）姓氏史密斯的学生人数

```
SELECT 
  e.EnrolmentId,
  COUNT((CASE WHEN s.Surname LIKE 'Smith' THEN 1 ELSE NULL END)) AS CountIf
FROM 
  Enrolment e
INNER JOIN StudentEnrolment se
  ON e.EnrolmentId = se.EnrolmentId
INNER JOIN Student s
  ON se.StudentId = s.StudentId
GROUP BY
  e.EnrolmentId 
```

是否可以将“史密斯”作为参数，像这样

```
COUNT((CASE WHEN s.Surname LIKE @Surname THEN 1 ELSE NULL END)) AS CountIf 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T03:43:17.787

如果您将 COUNT 更改为 SUM 并将 ELSE 部分更改为 0 而不是 NULL，它应该可以工作，不是吗？

```
SELECT 
  e.EnrolmentId,
  SUM((CASE WHEN s.Surname LIKE 'Smith' THEN 1 ELSE 0 END)) AS CountIf
FROM 
  Enrolment e
INNER JOIN StudentEnrolment se
  ON e.EnrolmentId = se.EnrolmentId
INNER JOIN Student s
  ON se.StudentId = s.StudentId
GROUP BY
  e.EnrolmentId 
```

例子：

```
declare @t as varchar(20)
select @t='ricardo'

declare @ta as table
(
    name varchar(30)
)

insert into @ta
values
('juan'),
('ricardo'),
('pablo')

select
SUM((CASE WHEN name LIKE @t THEN 1 ELSE 0 END)) AS CountIf
from @ta 
```

输出：

```
CountIf
-----------
1 
```

# tcl - 无法理解 TCL 中的 uplevel 命令

> ID：11533962
> 
> 赞同：7
> 
> 时间：2012-07-18T03:39:43.847
> 
> 标签：tcl

我在理解在 TCL 中使用 uplevel 时遇到了一些问题。我正在阅读 Brent Welch 在 TCL 和 Tk 中的实用编程，并且有一个我无法理解的高级示例。这里是：

```
proc lassign {valueList args} {
  if {[llength $args] == 0} {
    error "wrong # args:lassign list varname ?varname...?"
  }
  if {[llength $valueList] == 0} {
    #Ensure one trip through the foreach loop
    set valueList [List {}]
  }
  uplevel 1 [list foreach $args $valueList {break}]
  return [lrange $valueList [llength $args] end]
} 
```

有人可以向我解释一下吗？书中的解释对我的帮助不够:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T06:11:34.637

该`uplevel`命令在当前过程之外的另一个范围内执行命令（或实际上是脚本）。特别是，在这种情况下，它的`uplevel 1`意思是“在调用者中执行”。（您也可以在全局范围内执行 with `uplevel #0`，或者在其他地方执行，例如调用者的调用者 with ，`uplevel 2`但这*真的*很少见。）

解释该行的其余部分：`list`此处的使用是一种构造无替换命令的方式，该命令由四个单词组成，`foreach`变量`args`的内容，变量的内容`valueList`和`break`（实际上并不需要在大括号中）。这将为 中`valueList`列出的每个变量分配一个值`args`，然后停止，它将在调用者的上下文中执行此操作。

总的来说，该过程就像 8.5 中的内置程序一样工作`lassign`（假设一个非空的输入列表和变量列表），除了因为范围和类似事物之间交换的复杂性而变慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-27T10:16:23.623

```
proc a {} {
  set x a
  uplevel 3 {set x Hi}
  puts "x in a = $x"
}
proc b {} {
  set x b
  a
  puts "x in b = $x"
}
proc c {} {
  set x c
  b
  puts "x in c = $x"
}
set x main
c
puts "x in main == $x" 
```

这里最内部的方法a将在级别0，b在级别，c在级别2，主程序将在级别3，所以在proc a中如果我更改级别的值，那么我可以更改任何变量x的值proc是方法“a”本身的a，b，c或main proc。尝试将级别更改为 3,2,1,0 并查看神奇的 putput。

# python - 调用函数时如何在ctyps中返回一个数组

> ID：11533971
> 
> 赞同：0
> 
> 时间：2012-07-18T03:41:56.477
> 
> 标签：python, c, arrays, pointers, ctypes

我想做的是将C函数转换为python函数。

例如，我有一个预定义的 C 函数原型：

```
function_test(ViInt32 Arraysize, ViReal64 readingArray[], ViInt32 *Actual_rraysize) 
```

上述函数的输入为，即参数`Arraysize`中的元素个数。`readingArray`

上述函数的输出是`readingArray[]`和`Arraysize`。`readingArray[]`返回结果的数组，并`Actual_arraysize`指示返回数组的实际大小。

以下是我使用这个 C 函数原型编写的 Python 函数：

```
from ctypes import *
def Py_function_test(self, arraysize, readingarray = [], actualarraysize = [-1e-10]):
    while len(readingarray) < arraysize:
        readingarray.append(0)
    _c_actualarraysize = c_int()
    ArrayOfDouble = c_double * arraysize
    _c_readingarray = ArrayOfDouble()
    self.function_test(c_int(arraysize), 
                       byref(_c_readingarray), 
                       byref(_actualarraysize))
    for n in range(arraysize):
        readingarray[n] = _c_readingarray[n]
    actualarraysize[0] = _c_actualarraysize.value 
```

最后，原来的值`acutalarraysize`被成功更改。但是`readingarray`调用`c function prototype`.

如何处理这种情况，是因为我不应该使用`byref`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:31:32.740

是的，传递数组时不需要 byref。并且使用列表作为默认参数值会导致意想不到的错误。您可以在 Python 函数中返回数组和实际大小。

这是我的代码：

```
from ctypes import *
test = cdll.LoadLibrary("test")
test.function_test.argtypes = [
    c_int, POINTER(c_double), POINTER(c_int)
]

def Py_function_test(arraysize):
    _c_readingarray = (c_double*arraysize)()
    _c_actualarraysize = c_int()
    test.function_test(arraysize, _c_readingarray, byref(_c_actualarraysize))
    return _c_readingarray, _c_actualarraysize.value

array, size = Py_function_test(10)
print list(array), size 
```

c代码：

```
void function_test(int Arraysize, double readingArray[], int *Actual_rraysize)
{
    int i;
    *Actual_rraysize = Arraysize/2;
    for(i=0;i<*Actual_rraysize;i++)
        readingArray[i] = i;
} 
```

python代码的输出是：

```
[0.0, 1.0, 2.0, 3.0, 4.0, 0.0, 0.0, 0.0, 0.0, 0.0] 5 
```

# xna - 在 XNA 中动态获取天空盒的图片

> ID：11533972
> 
> 赞同：0
> 
> 时间：2012-07-18T03:42:04.313
> 
> 标签：xna, directx, xna-4.0

我在 XNA 中制作了立方体天空盒，我希望天空盒的每个面都作为视频播放器运行。我尝试加载六个视频并在相应的面上渲染每个视频，但这种方式会导致并行解压缩六个视频的高处理成本。所以我尝试了另一种将视频转换为帧并在运行时使用后台线程加载这些帧的方法，但是存在闪烁并且渲染太慢。我想知道是否有更有效的方法来处理这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:50:41.207

使用适当的视频软件将天空盒的所有面预渲染为一个视频（将每个天空盒面的视频平铺在帧内），然后在天空盒顶点上使用适当的 UV，以便每个顶点都显示视频的正确部分。

我想你可能需要做一些诡计（最简单的是一些出血边距），这样压缩伪影就不会使边缘看起来很奇怪。

（你的天空盒真的需要 6 个动态边吗？你可以只用 5 个甚至 4 个就可以逃脱吗？）

# mysql - 如何使用同一张表的其他字段检查mysql中的日期

> ID：11533977
> 
> 赞同：-1
> 
> 时间：2012-07-18T03:42:52.023
> 
> 标签：mysql, date

我更好地解释了我的问题：

我有一张像这样的桌子：

```
|ID|DATE|DAYS| 
```

我网站中的用户可以在我的数据库中搜索日期范围，因此我需要检查用户选择的最小日期是否大于列中的日期，`DATE`以及`DATE`转发`DAYS`是否小于或等于用户选择的最大日期。有没有办法做到这一点？有人能帮我吗？谢谢！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:59:47.527

你可以试试下面：

```
SELECT *
FROM your_table
WHERE date < 'your_input_min_date' 
  AND 'your_input_max_date' >= DATE_ADD(date, INTERVAL days DAY) 
```

# ios - 有没有办法在片段着色器中使用超过 64 个统一向量？还是替代方案？

> ID：11533980
> 
> 赞同：1
> 
> 时间：2012-07-18T03:43:13.650
> 
> 标签：ios, glsl, shader, gpuimage

我在我的项目中使用 GPUImage。我想将一个 2304 整数的数组传递给片段着色器。但是[PowerVR SGX 上的 OpenGL ES 2.0 仅限制 64 个用于片段着色器的统一向量](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html#//apple_ref/doc/uid/TP40008793-CH106-SW1)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T03:48:36.447

如果这些是您的硬件限制，那么这些就是您的硬件限制。这就是为什么它们被称为硬件*限制*。

除了使用制服外，还有其他选择。例如，您可以使用 1D 纹理（或高度为 1 的 2D 纹理），其中纹理的纹素是您需要的值。诚然，如果 SGX 的纹理大小限制为 2048，则您需要进行一些捏造才能使其与 2304 值一起使用。

# python - 如何使用 selenium python 读取表数据？

> ID：11533982
> 
> 赞同：3
> 
> 时间：2012-07-18T03:43:19.613
> 
> 标签：python, html, selenium, tabular

以下是表格 HTML 源代码，对于 selenium 读取其内容似乎非常复杂。有人可以帮助我，使用 selenium 将这些数据读入 python 吗？

```
<div class="general_table">
    <div class="general_s">
        <div class="general_text1">Name</div>
        <div class="general_text2">Abhishek</div>
    </div>
    <div class="general_m">
        <div class="general_text1">Last Name</div>
        <div class="general_text2">Kulkarni</div>
    </div>
    <div class="general_s">
        <div class="general_text1">Phone</div>
        <div class="general_text2"> 13613123</div>
    </div>
    <div class="general_m">
        <div class="general_text1">Cell Phone</div>
        <div class="general_text2">82928091</div>
    </div>         
    <div class="general_s">
        <div class="general_text1">City</div>
        <div class="general_text2"></div>
    </div>
    <div class="general_m">
        <div class="general_text1">Model</div>
        <div class="general_text2"> DELL PERC H700</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:18:55.480

要使用 selenium webdriver 读取此表，xpath 似乎是最简单的方法 -

我不太了解python，所以代码可能是错误的，但这个想法似乎是正确的——

要找出 div 标签的数量，`general_table`我们使用 xpath -

`driver.find_elements_by_xpath(("//*[@class='general_table']/div")`这将返回一个**大小为 - 6**的列表。

然后您可以使用循环遍历每个元素 -

```
for(int i=1;i<=list.length;i++){
    String text1 = driver.find_element_by_xpath("//*[@class='general_table']/div["+i+"]/div[1]").text;
    String text2 = driver.find_element_by_xpath("//*[@class='general_table']/div["+i+"]/div[2]").text;
} 
```

您可以通过这种方式读取表格中的所有标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:32:47.083

使用 selenium 来获取页面源代码（这样你就可以在所有 js/ajax 的东西之后获得真实的内容）和类似[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)的东西来解析它。

```
from bs4 import BeautifulSoup

soup = BeautifulSoup("""<div class="general_table">
    <div class="general_s">
        <div class="general_text1">Name</div>
        <div class="general_text2">Abhishek</div>
    </div>
    <div class="general_m">
        <div class="general_text1">Last Name</div>
        <div class="general_text2">Kulkarni</div>
    </div>
    <div class="general_s">
        <div class="general_text1">Phone</div>
        <div class="general_text2"> 13613123</div>
    </div>
    <div class="general_m">
        <div class="general_text1">Cell Phone</div>
        <div class="general_text2">82928091</div>
    </div>         
    <div class="general_s">
        <div class="general_text1">City</div>
        <div class="general_text2"></div>
    </div>
    <div class="general_m">
        <div class="general_text1">Model</div>
        <div class="general_text2"> DELL PERC H700</div>
    </div>
</div>""")

def tags(iterable):
    return filter(lambda x: not isinstance(x, basestring), iterable)

for table in soup.find_all('div', {'class': 'general_table'}):
    for line in tags(table.contents):
        for i, column in enumerate(tags(line.contents)):
            if column.string:
                print column.string.strip(),
            if i:
                print ',',
            else:
                print ':',
        print '' 
```

结果：

```
Name : Abhishek , 
Last Name : Kulkarni , 
Phone : 13613123 , 
Cell Phone : 82928091 , 
City : 
Model : DELL PERC H700 , 
```

# c# - 如何使用 facebook c# sdk 对照片发表评论

> ID：11533989
> 
> 赞同：1
> 
> 时间：2012-07-18T03:44:04.477
> 
> 标签：c#, facebook, sdk

我成功地使用以下格式对 Facebook 帖子发表评论：

```
fb.Post("owner_id" + "_" + "post_id" + "/comments", message). 
```

但用于 facebook 照片（例如：[this](https://www.facebook.com/photo.php?fbid=423909524319194)）

```
fb.Post("362298920480255_423909524319194/comments",message); 
```

我收到了这个错误：`#100 : error finding the requested story.`

我怎样才能解决这个问题？

我正在使用 .Net 4.0 和 Facebook c# sdk v6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:05:43.970

试试这个，我使用它，到目前为止效果很好。

```
 var commentDicitonay = new Dictionary<string, object>
                                       {
                                           {"id", "your post_id"}, 
                                           {"from", accessToken}, 
                                           {"message", description}
                                       };
    facebookClient.Post("/comments", commentDicitonay); 
```

您是否使用此权限“user_photos”？

# internet-explorer - 确定和更改 VB6 OCX ClassID

> ID：11533991
> 
> 赞同：1
> 
> 时间：2012-07-18T03:44:18.323
> 
> 标签：internet-explorer, asp-classic, vb6

我被投入到遗留系统增强中。它是 VB6+ asp（老式 asp）系统。所以基本上，系统会做一些数据库查询并将结果推送到一个activeX对象（一个OCX）中，这样信息就会以条形码的形式打印出来。

我被要求修改 OCX，使其不打印某些徽标，但是，出于现有打印目的，我需要保留原始徽标。因此，我“另存为”原始文件并成功修改了它。

系统将OCX 安装到用户PC 中。但是我注意到，系统没有为两种不同的打印目的使用两个不同的 OCX，而是只使用最新的 OCX 进行两种打印。OCX 的名称不同。他们唯一共享的是 CLASS ID。

如何确定新重新编译的 OCX 的 CLASS ID，我可以更改它吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T05:06:57.663

OCX 没有 ClassId。但是，它们内部的控件可以。

要查看各种 GUID 的值（除了 ClassId 还涉及其他），一种简单的方法是通过 Visual Studio 6.0 附带的 OLE View 工具、Win2k 资源工具包等查看 typelib 信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T03:58:53.093

CLASSID 是 COM 维护旧控件版本之间兼容性的方式。你真的不想改变它。也不建议在同一台机器上保留两个版本。您最好创建一个省略横幅的控件的“新”版本，并让编译器为控件分配一个新的 CLSID，从而保持路径干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T03:54:53.433

自从我处理 ActiveX 控件 (OCX) 以来已经很久了，但也许这个 KB 可以提供帮助：http: [//msdn.microsoft.com/en-us/library/941zhks9%28v=vs.71%29。 aspx](http://msdn.microsoft.com/en-us/library/941zhks9%28v=vs.71%29.aspx)

# android - 获取 Android 设备 ID 时出错

> ID：11533992
> 
> 赞同：0
> 
> 时间：2012-07-18T03:44:23.700
> 
> 标签：android

我正在尝试在我的 android 应用程序中检索我的 android 设备的设备 ID。但是，在我的程序中添加以下行后，存在错误并且程序无法启动：

```
String ts = Context.TELEPHONY_SERVICE; 
TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(ts); 
```

从 logcat 中，它说问题来自第二行：

```
07-18 11:28:47.453: E/AndroidRuntime(5528): FATAL EXCEPTION: main
07-18 11:28:47.453: E/AndroidRuntime(5528): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{android.reader/android.reader.Reader}: java.lang.NullPointerException
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.os.Looper.loop(Looper.java:137)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at java.lang.reflect.Method.invokeNative(Native Method)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at java.lang.reflect.Method.invoke(Method.java:511)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at dalvik.system.NativeStart.main(Native Method)
07-18 11:28:47.453: E/AndroidRuntime(5528): Caused by: java.lang.NullPointerException
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.reader.Reader.<init>(Reader.java:51)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at java.lang.Class.newInstanceImpl(Native Method)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at java.lang.Class.newInstance(Class.java:1319)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
07-18 11:28:47.453: E/AndroidRuntime(5528):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
07-18 11:28:47.453: E/AndroidRuntime(5528):     ... 11 more 
```

我认为这是由权限问题引起的，但我已经在 Manifest 文件中添加了以下行：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

那么，请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:55:57.783

```
final TelephonyManager tm = (TelephonyManager) getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);

final String tmDevice, tmSerial, androidId;
tmDevice = "" + tm.getDeviceId();
tmSerial = "" + tm.getSimSerialNumber();
androidId = "" + android.provider.Settings.Secure.getString(getContentResolver(), android.provider.Settings.Secure.ANDROID_ID);

UUID deviceUuid = new UUID(androidId.hashCode(), ((long)tmDevice.hashCode() << 32) | tmSerial.hashCode());
String deviceId = deviceUuid.toString(); 
```

我想这些答案可以帮助你。[是否有唯一的 Android 设备 ID？](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)

# iphone - 滚动视图，多个按钮，但没有自动调整纵向/横向大小

> ID：11533996
> 
> 赞同：0
> 
> 时间：2012-07-18T03:45:03.067
> 
> 标签：iphone, objective-c, ipad

我在朋友的帮助下设置了一个滚动视图，一个循环在 4 个页面上添加 25 个按钮，最多 100 个按钮（实际上只是照片缩略图滑块的图像或缩略图）。

横有5个，下有5个；但是，它是为横向编程的，并且不知道正确的代码来纠正此问题，以便自动将按钮/缩略图调整为较小的大小或缩小以获取纵向视图。

由于我无法上下更改按钮（如 4 个和 6 个），我想我只会更改按钮大小以缩小它，但我不知道这是如何完成的。

我已经在 ViewController.h 中声明了 UIScrollView *scrollView 和 ints

```
 int buttonNumber;
    int maxButtonNumber;
    int Pages;
    IBOutlet UIScrollView *scrollView;
    NSString *detailImageString;

    IBOutlet UINavigationBar *topBar;
    IBOutlet UIPageControl *pageControl;
}

@property (nonatomic,retain) NSMutableArray *buttons;
@property (nonatomic,retain) UIButton*thumbIcon;
@property (nonatomic,retain) UIImage *thumbIconImage;
@property (nonatomic, retain) UIScrollView *scrollView;
@property (strong, nonatomic) IBOutlet UINavigationBar *topBar;
@property (strong, nonatomic) IBOutlet UIPageControl *pageControl;
@property (strong, nonatomic) DetailViewController *detailViewController; 
```

这是 ViewController.m

```
 scrollView.bounces=NO;
    scrollView.showsHorizontalScrollIndicator=NO;
    scrollView.showsVerticalScrollIndicator=NO;

    buttons=[[NSMutableArray alloc]init];

    static const CGFloat ButtonWidth = 145;
    static const CGFloat ButtonHeight = 85;

   scrollView.frame = CGRectMake(0, 0, 1024, 768);

    buttonNumber = 0;
    maxButtonNumber=100;

            Pages=4; 

    for (int i = 0; i < Pages; i++) {
        UIView *pageView = [[UIView alloc] initWithFrame:self.view.bounds];
        pageView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;

        int x = 0;
        for (int j = 0; j < 25; j++) {
            if (buttonNumber > maxButtonNumber) {
                break;
            }
            buttonNumber++;
            //Create 5 Rows
            int row = j / 5;
            if (j % 5 == 0) {
                x = 0;
            }
            thumbIcon = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            thumbIcon.tag = buttonNumber;
            [thumbIcon setFrame:CGRectMake(x * (ButtonWidth + 30) + 90, row * (ButtonHeight + 20) + 75, ButtonWidth, ButtonHeight)];

            thumbIconImage = [UIImage imageNamed:[NSString stringWithFormat:@"Image%d.jpg", buttonNumber]]; 

            [thumbIcon setImage:thumbIconImage forState:UIControlStateNormal];

            [pageView addSubview:thumbIcon];
            [thumbIcon setEnabled:YES];
            [buttons addObject:thumbIcon];
            x++;
        }

       [pageView setFrame:CGRectMake(i * 1024, 0, 1024, 704)];

       [scrollView addSubview:pageView];

         [pageView release];

    }
    [scrollView setPagingEnabled:YES];
    [scrollView setContentSize:CGSizeMake(1024 * Pages, 704)]; 
```

任何帮助，将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:20:34.633

您可以使用`@property(nonatomic) UIViewAutoresizing autoresizingMask`. `UIView`例如，如果您希望在旋转期间更改 UIButton 的宽度，您可以在初始化按钮后立即执行以下操作：

```
button.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

查看有关 autoresizingMask 的文档，看看它是否符合您的要求：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/ doc/uid/TP40006816-CH3-SW6](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW6)