# StackOverflow 问答 10827000-10827999

# php - 花式框回调函数.load jquery

> ID：10827005
> 
> 赞同：0
> 
> 时间：2012-05-31T03:16:26.383
> 
> 标签：php, javascript, jquery, fancybox

```
$("#btnOK").click(function(){
    parent.$("#res"+(d)).load("Customise.php #uni", "PID="+$("#P option:selected").val());
    parent.$.fancybox.close(function(){
    $("#res"+(d-1)+" a#p").fancybox({
            'transitionIn'  : 'elastic',
            'transitionOut' : 'elastic',
            'width':400,
            'height':300,
            'overlayOpacity'    : 0.5,
            'type'              : 'iframe'
        });
    });
}); 
```

在我点击按钮后。我使用回调函数重新初始化 a#p 它不能工作？任何解决方案？

```
 <div class="cell">
    <label id="pID">PID</label> <br /> <input type="text" id="txtPID" size="3" value="<? if(is_numeric($pID)) print("$pID"); ?>"/>   
    <a href="SelectP.html" id="p"><img src="Images/P.png" name="SelectP_button" id="SelectP_button" /></a>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:40:47.333

您确定要选择 $("#res"+(d-1)+"a#p") 吗？

我假设 d 是一个数字，因此您将生成：

```
#res3a#p 
```

在您的选择器中，这是无效的，您可能正在尝试这样做

```
$("#res"+(d-1)+" a#p") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:04:09.023

```
$("#btnOK").click(function(){
    parent.$("#res"+(d)).load("Customise.php #uni", "PID="+$("#P option:selected").val());
    parent.$.fancybox.close();
});

$("#res"+(d-1)+" a#p").fancybox({
        'transitionIn'  : 'elastic',
        'transitionOut' : 'elastic',
        'width':400,
        'height':300,
        'overlayOpacity'    : 0.5,
        'onClosed: function(){
         $("#res"+(d-1)+" a#p").fancybox({
                   'transitionIn'  : 'elastic',
                   'transitionOut' : 'elastic',
                   'width':400,
                   'height':300,
                    'overlayOpacity'    : 0.5,
                    'type'              : 'iframe'
                     });
         },
        'type'              : 'iframe'
    });
}); 
```

# iphone - 在应用程序启动时从情节提要中选择替代的第一个视图控制器

> ID：10827010
> 
> 赞同：15
> 
> 时间：2012-05-31T03:16:52.457
> 
> 标签：iphone, ios5, storyboard

我刚刚开始进行 iOS 编程，到目前为止，我在这里找到的教程和答案对前进有很大帮助。然而，这个特殊的问题让我整晚都在烦恼，我找不到“感觉正确”的答案。

我正在编写一个连接到远程服务的应用程序，用户需要先登录才能使用它。当他们开始使用应用程序时，他们的第一个视图应该是登录对话框；当他们之前通过身份验证时，他们会立即看到概览页面。

该项目使用故事板——我认为这是一个很棒的特性——所以大部分选择和加载根视图控制器的代码都已经处理好了。我认为添加逻辑的最佳位置是以下`application:didFinishLaunchingWithOptions:`方法`AppDelegate`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:
      (NSDictionary *)launchOptions
{
    // select my root view controller here based on credentials present or not
    return YES;
} 
```

但这带来了两个问题：

1.  在这个特定的委托方法中，根视图控制器已经根据故事板被选择（并加载？）。我是否可以在加载过程中移到更早的位置以覆盖第一个视图控制器选择，或者这会使事情变得不必要地复杂化？

2.  要覆盖第一个视图控制器，我需要对故事板的引用，但我找不到比使用`storyboardWithName:bundle:`. `UIStoryboard`感觉不对，应用程序应该已经有故事板的引用，但是我怎样才能访问它呢？

**更新**

我解决了我遇到的第二个问题，因为我在这里找到了答案：

[UIStoryboard：获取活动故事板的正确方法是什么？](https://stackoverflow.com/questions/9853608/uistoryboard-whats-the-correctest-way-to-get-the-active-storyboard)

```
NSBundle *bundle = [NSBundle mainBundle];
NSString *sbFile = [bundle objectForInfoDictionaryKey:@"UIMainStoryboardFile"];
UIStoryboard *sb = [UIStoryboard storyboardWithName:sbFile bundle:bundle]; 
```

以上将创建一个新的故事板实例；要获取活动实例，要简单得多：

```
UIStoryboard *sb = [[self.window rootViewController] storyboard]; 
```

在故事板文件本身中，您必须为要加载的视图设置标识符，例如`LoginDialog`. 之后，您像这样实例化视图：

```
LoginViewController *login = [sb instantiateViewControllerWithIdentifier:@"LoginDialog"];
[self.window setRootViewController:login]; 
```

在另一个视图控制器中，以下内容就足够了：

```
UIStoryboard *sb = self.storyboard;
LoginViewController *login = [sb instantiateViewControllerWithIdentifier:@"LoginDialog"];
[self presentViewController:login animated:NO completion:nil]; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-03T03:23:52.603

您可以重置窗口的根视图控制器

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:
      (NSDictionary *)launchOptions
{
   if(your_condition) {
       UIViewController *newRoot = [your implementation];
       self.window.rootViewController = newRoot;
   }
   return YES;
} 
```

这对我有用，Xcode5.0.1

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-02T06:58:26.100

我有一个和你类似的场景。我的应用程序使用 a`UINavigationController`作为根视图控制器。如果用户已登录，我想向他/她展示`NotLoggedInViewController`，而如果它已登录，我想显示`LoggedInViewController`.

在情节提要中，a`UINavigationController`只能有一个孩子，因此您必须能够以编程方式为其分配另一个根视图控制器。

我首先创建一个自定义导航控制器类，我们将其命名为`MyNavigationController`。在情节提要中，我将此自定义类分配给导航控制器对象。

仍然在情节提要中，然后我对两个视图控制器进行建模，并将其中一个连接到导航控制器对象。由于稍后我需要能够从我的代码中访问它们，因此我使用右侧的 XCode 检查器为它们中的每一个分配了一个标识符。这些标识符可以是任意字符串，但为了简单起见，我只使用类名。

最后，我`viewDidLoad`在类上实现该方法`MyNavigationController`：

```
BOOL isLoggedIn = ...;

- (void)viewDidLoad {
  id rootController;
  if (isLoggedIn) {
    rootController = [self.storyboard instantiateViewControllerWithIdentifier:@"LoggedInViewController"];
  } else {
    rootController = [self.storyboard instantiateViewControllerWithIdentifier:@"NotLoggedInViewController"];
  }
  self.viewControllers = [NSArray arrayWithObjects:rootController, nil];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T04:06:40.313

我几乎没有使用故事板，可能这不是您问题的确切答案。但是我会建议您以某种方式在我的项目中所做的工作，而无需使用情节提要。

在`didFinishLaunchingWithOptions` *AuthenticationViewController*中是加载的第一个视图。它询问登录凭据。输入后，它将输入项目使用的实际 ViewControllers（即 TabBar &all..）。

添加到项目中的有趣功能是，当您输入凭据时，我会弹出一个`UIAleretView`要求用户选择三个选项之一的选项。

1.  无需密码即可保存凭据
2.  使用密码保存凭据
3.  不要保存凭据

这里的密码只是用户输入的 4 位数字。每当他想“使用密码保存凭据”时，我`pushViewController`都会显示默认键盘的 NumberPad 以及`popviewController`完成输入密码的时间。如果用户“不保存凭据”以及稍后在播放应用程序时想要使用其他身份验证选项，那么我将 TabBarController 的最后一个选项卡添加为“设置”选项卡，在其中我允许用户选择其中一个身份验证选项，弹出`UIAlertView`如下登录后应用程序的开始。

不要忘记在[钥匙串中保存凭据](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html#//apple_ref/doc/uid/TP30000897-CH208-SW1)

简而言之，

1.  AuthenticationViewController-> 检查登录凭据是否存储在钥匙串中

1.1。如果未存储（即 3\. 不要保存凭据）-> 则显示登录页面。

1.2\. 如果凭据保存在钥匙串中-> 提取它们并查看它是否与密码绑定。

1.2.1。如果它与密码绑定（即 2\. 使用密码保存凭据）-> 然后显示密码页面。

**1.2.2。**如果它没有绑定（1.保存没有密码的凭证）->然后显示/加载您的项目`TabBarController`层次结构或其他内容。这里实际上是您的应用程序开始。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-16T13:29:22.530

已经加载了主故事板，只需找到它的引用，以便我可以实例化另一个根视图控制器：

```
UIStoryboard *mainStoryboard = self.window.rootViewController.storyboard;

self.window.rootViewController = [mainStoryboard 
    instantiateViewControllerWithIdentifier:@"view-controller-id"]; 
```

# java - QueryDSL查询异常

> ID：10827012
> 
> 赞同：1
> 
> 时间：2012-05-31T03:17:01.980
> 
> 标签：java, hibernate, jpa, querydsl

我对 QueryDSL 查询有疑问。课程：

```
@Entity
@Table(name="project")
@Cacheable(true)
@Cache(usage= CacheConcurrencyStrategy.NONSTRICT_READ_WRITE)
public class Project extends DomainObject implements Comparable<Project>, IconizedComponent, Commentable {

    @ManyToMany(targetEntity=Student.class)
    @JoinTable(name="project_student")
    @Sort(type=SortType.NATURAL) //Required by hibernate
        @QueryInit({"user"})
    private SortedSet<Student> projectParticipants = new TreeSet<Student>();

    private Project(){}

    //attributes, get+set methods etc

}

@Entity
@Cacheable(true)
@Cache(usage= CacheConcurrencyStrategy.NONSTRICT_READ_WRITE) //Hibernate specific
public class Student extends Role {

    public Student(){}

    //attributes, get+set methods etc

}

@Entity
@DiscriminatorColumn(name = "rolename", discriminatorType = DiscriminatorType.STRING, length = 8)
@Table(name="role", uniqueConstraints={@UniqueConstraint(columnNames={"user_id","rolename"}, name = "role_is_unique")})
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
public abstract class Role extends LazyDeletableDomainObject implements Comparable<Role> {

    @ManyToOne(optional=false)
    protected User user;

    public Role(){}

    //attributes, get+set methods etc
}

@Entity
@Table(name="user")
@Cacheable(true)
@Cache(usage= CacheConcurrencyStrategy.NONSTRICT_READ_WRITE) //Hibernate specific
public class User extends LazyDeletableDomainObject implements Comparable<User>, IconizedComponent {

    private String firstName;
    private String lastName;

    public User(){}

    //attributes, get+set methods etc

} 
```

询问：

```
private BooleanExpression authorsNameContains(String searchTerm){
        QUser user = new QUser("user");
        user.firstName.containsIgnoreCase(searchTerm).or(user.lastName.contains(searchTerm));
        QStudent student = new QStudent("student");
        student.user.eq(user);
        return QProject.project.projectParticipants.contains(student);

    //java.lang.IllegalArgumentException: Undeclared path 'student'. Add this path as a source to the query to be able to reference it.
} 
```

我也尝试过用

```
@QueryInit("*.*") 
```

但这给出了同样的例外。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T02:46:08.407

@Timo Westkämper @siebZ0r

感谢您的关注。对于延迟回复和措辞不正确的问题，我们深表歉意。实际上我想做的是写一个工作的 BooleanExpression。

结合已经做出的注释，这就是我所追求的：

```
private BooleanExpression authorsFirstNameContains(String searchTerm){
    return QProject.project.projectParticipants.any().user.firstName.containsIgnoreCase(searchTerm);
} 
```

在同事的帮助下，我做到了这一点。

# java - 使用 IntelliJ 设置 Scala

> ID：10827017
> 
> 赞同：71
> 
> 时间：2012-05-31T03:18:21.567
> 
> 标签：java, macos, scala, intellij-idea

我有 Intellij Ultimate 11.1，安装了 scala 插件。

我使用自制软件安装了 scala 2.9.2，它将 scala 放入：

```
/usr/local/Cellar/scala/2.9.2>

>which scala
/usr/local/bin/scala
>scala -version
Scala code runner version 2.9.2 -- Copyright 2002-2011, LAMP/EPFL 
```

创建一个新的 java 模块项目，我得到这个：

![在此处输入图像描述](../Images/3cd1824dc500f390ce131e8a981d082b.png)

![在此处输入图像描述](../Images/5bc68a47f0c5bc15550fecbb78fbe034.png)

![在此处输入图像描述](../Images/9e817dfa098f26c5b15c637d7447a66d.png)

![在此处输入图像描述](../Images/a2cd0050e8c194d34425b481843959f7.png)

有人可以帮我解决这些问题，为什么 scala 插件不能开箱即用？:)

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-31T06:12:51.457

您需要`/usr/local/Cellar/scala/2.9.2/libexec`在第一个屏幕截图上指定目录。这是特定于 Mac`brew`的，同样的情况对于`grails`通过`brew`.

标准[Scala 发行版下载](http://www.scala-lang.org/downloads/distrib/files/scala-2.9.2.tgz)具有 IDEA 正确理解的不同布局，`brew`正在创建`libexec`它写入的目录`/lib`和`/src`IDEA 预期的目录。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-09-19T00:20:17.047

***针对 Intellij 11.1.5 更新***

对于任何试图在 IntelliJ 中启动和运行 Scala 的人来说，这里是一步一步的。

**下载 Scala 插件**

IntelliJ > Preferences > Plugins > Browse Repositories... > Scala 单击 Ok 并允许 IntelliJ 重新启动

**下载斯卡拉**

在终端输入

```
brew install scala --with-docs 
```

**为 IntelliJ 发现过程设置符号链接**

```
ln -s /usr/local/Cellar/scala/<version>/libexec/src /usr/local/Cellar/scala/<version>/src
ln -s /usr/local/Cellar/scala/<version>/libexec/lib /usr/local/Cellar/scala/<version>/lib
mkdir -p /usr/local/Cellar/scala/<version>/doc/scala-devel-docs
ln -s /usr/local/Cellar/scala/<version>/share/doc/scala /usr/local/Cellar/scala/<version>/doc/scala-devel-docs/api 
```

**在 IntelliJ 中创建项目**

在这里，您将像往常一样从头开始创建一个 Java 项目。但是，在最后一步中，您将在“技术”页面中选择 Scala。

在**使用 Scala 分布**中输入`/usr/local/Cellar/scala/<version>`

在**编译器**下拉选择`scala-compiler`

点击 Ok，你就可以创建你的第一个 Scala 对象了

供参考-> [http://scalacookbook.blogspot.com/2012/09/scala-for-intellij.html](http://scalacookbook.blogspot.com/2012/09/scala-for-intellij.html)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-08-18T20:59:02.273

最新的 Brew 已经意识到了这个问题，并在安装 Scala 时创建了自动符号链接。

首先，使用文档安装 Scala

```
brew install scala --with-docs 
```

其次，在IntelliJ中提供如下路径

```
/usr/local/opt/scala/idea 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-12-22T17:09:11.623

`--with-docs`您可以在使用自制软件安装 scala 时使用该选项，而不是单独下载文档：

```
brew install scala --with-docs 
```

然后在 IntelliJ 中将 scala-library 中的 JavaDocs 路径指向`/usr/local/Cellar/scala/2.9.2/share/doc`.

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-12-01T20:36:50.950

我刚刚找到了另一种使用 intelJIdea 配置 scala 的方法。如果使用 brew 安装了 scala，则只需在终端中写入：

```
brew info scala 
```

你会看到这样的：

```
scala: stable 2.11.4 (bottled)
http://www.scala-lang.org/
/usr/local/Cellar/scala/2.11.4 (3401 files, 433M) *
  Built from source with: --with-docs
From: https://github.com/Homebrew/homebrew/blob/master/Library/Formula/scala.rb
==> Options
--with-docs
    Also install library documentation
--with-src
    Also install sources for IDE support
==> Caveats
To use with IntelliJ, set the Scala home to:
  /usr/local/opt/scala/idea

Bash completion has been installed to:
  /usr/local/etc/bash_completion.d 
```

然后只需将其包含`/usr/local/opt/scala/idea`到您的想法配置面板中即可。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-03-10T08:30:00.827

现在是2021年。我的（最新）环境是：

*   `IntelliJ IDEA`：`IntelliJ IDEA 2020.3.2 (Community Edition)`
*   `OS`：`macOS 10.14.6`

# 使用 IntelliJ IEA 设置 Scala 的步骤

## 在 Mac 中

*   使用 brew 安装 scala
    *   `brew install scala`

## 在 IntelliJ 中

*   安装`Scala`插件
    *   `IntelliJ IDEA`-> `Preferences`-> `Plugins`-> 搜索：`scala`-> `Search in Marketplace`-> `Install`->`Restart IDE`
        *   [![在此处输入图像描述](../Images/9126d2dc2ba9aa99ff389a2e88c760c5.png)](https://i.stack.imgur.com/V2kTy.png)
*   配置`Java JDK`+配置`Scala SDK`：第一次打开`*.scala`文件时，会注意到你：
    *   **项目 JDK 未定义**
        *   单击`Setup SDK`- >选择（您安装的）`Java 11`
            *   [![在此处输入图像描述](../Images/9469e4e341ab8e6df854ad0e968d3d47.png)](https://i.stack.imgur.com/HMqLk.png)
    *   **模块中没有 Scala SDK**
        *   点击`Setup Scala SDK`
            *   `Add Scala Support`-> `Use library`-> `Create`-> `Select JAR's for the new Scala SDK`-> 点击选择`Brew`->`OK`
                *   [![在此处输入图像描述](../Images/20d376a6ec206c1cf8f417a9996b31f7.png)](https://i.stack.imgur.com/VRVvk.png)
            *   `Add Scala Support`-> `Use library`->（然后）选择：**scala-sdk-2.13.5** ->`OK`
                *   [![在此处输入图像描述](../Images/81857fd3b5334285db76eb4d0e895c3b.png)](https://i.stack.imgur.com/LgABn.png)

终于可以愉快地调试scala（文件的类的`main`功能）：

[![在此处输入图像描述](../Images/3d08f8c5499936f71ff5cd2bcdb890d4.png)](https://i.stack.imgur.com/wZ2Bv.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-17T10:07:25.617

我正在使用优胜美地，以下对我有用。

```
brew install scala --with-docs 
```

然后我通过创建一个新项目、使用 Java SDK 和编译器来测试 IntelliJ：

```
/usr/local/Cellar/scala/[insertversion]/libexec 
```

[这是我使用这些设置创建新项目时在 IntelliJ 中看到的内容](http://i.stack.imgur.com/qVYtd.png)

[我测试了通过这个](http://scala-lang.org/documentation/getting-started.html?_ga=1.254517771.2007423835.1445004857#your_first_lines_of_code)编译一个 Hello World 程序，它正确编译到控制台。

请注意，我忽略了上面@Zagorulkin 所说的话，尽管如果 Homebrew 这么说我的编译路径应该与上面的不同，这似乎是合乎逻辑的。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-10-27T04:57:53.257

更改`/usr/local/Cellar/scala/2.9.2`为`/usr/local/Cellar/scala/`，您就可以开始了。

# asp.net-mvc-3 - 盒式磁带抛出安全异常

> ID：10827018
> 
> 赞同：1
> 
> 时间：2012-05-31T03:18:26.650
> 
> 标签：asp.net-mvc-3, medium-trust, cassette

我在具有中等信任安全级别的 Windows 2008 服务器上使用 Cassette 发布了 MVC 3 Web 应用程序（托管公司不允许我更改安全级别）。

根据[这个链接](http://groups.google.com/group/cassette/browse_thread/thread/157adbb9f26a42c0)，Cassette 在中等信任级别上运行，但是当我运行应用程序时，抛出以下异常：

> 安全异常：应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。
> 
> [安全异常：请求失败。]
> 
> > Cassette.CassetteApplicationContainer`1.CreateNewApplicationWhenFileSystemChanges(String rootDirectoryToWatch) +0
> > 
> > Cassette.CassetteApplicationContainerFactoryBase`1.CreateContainerFromConfiguration() +232
> > 
> > Cassette.Web.CassetteApplicationContainerFactory.CreateContainer() +21
> > 
> > Cassette.Web.StartUp.InitializeApplicationContainer() +22
> > 
> > Cassette.Web.StartUp.PostApplicationStart() +436

有谁知道如何解决这个问题或我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:16:41.203

问题解决了。我在调试模式下运行应用程序。只需要更改为发布模式。

# ios4 - ios：完成和取消不适用于apple tut网站的第二个应用程序教程

> ID：10827021
> 
> 赞同：1
> 
> 时间：2012-05-31T03:18:58.463
> 
> 标签：ios4

XCODE 4.3.2 版。这让我头疼不已，试图弄清楚如何做本教程。我已经对照他们的代码检查了代码，它看起来是正确的。我下载了别人的副本，它可以工作，但是我的副本完成并且取消不起作用。AddSightingViewController.m 代码如下所示

```
#import "AddSightingViewController.h"
@implementation AddSightingViewController

...
- (IBAction)cancel:(id)sender {
    [[self delegate] addSightingViewControllerDidCancel:self];
}
- (IBAction)done:(id)sender {
    [[self delegate] addSightingViewControllerDidFinish:self name:self.birdNameInput.text location:self.locationInput.text];
}
... 
```

并且这些行上的调试检查点工作正常但是在 BirdsMasterViewController.m 我有以下代码：

```
#import "BirdsMasterViewController.h"
#import "BirdsDetailViewController.h"
#import "BirdSightingDataController.h"
#import "BirdSighting.h"
#import "AddSightingViewController.h"
@interface BirdsMasterViewController () <AddSightingViewControllerDelegate>
@end
@implementation BirdsMasterViewController
@synthesize dataController = _dataController;

...

- (void)addSightingViewControllerDidCancel:(AddSightingViewController *)controller {
    [self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)addSightingViewControllerDidFinish:(AddSightingViewController *)controller name:(NSString *)name location:(NSString *)location {
    if ([name length] || [location length]) {
        [self.dataController addBirdSightingWithName:name location:location];
        [[self tableView] reloadData];
    }
    [self dismissModalViewControllerAnimated:YES];
}

... 
```

这些行上的调试检查点永远不会停止我的代码上的程序（但会在下载的代码上停止）。我到底想念什么才能让它发挥作用。

# visual-studio - 在构建期间将 Visual Studio 项目文件复制到输出目录

> ID：10827024
> 
> 赞同：47
> 
> 时间：2012-05-31T03:19:15.137
> 
> 标签：visual-studio, build, projects-and-solutions, visual-studio-2003

当我构建一个 Visual Studio 项目时，可执行文件被写入项目属性页中指定的输出目录。

我有一个项目，其中有一些程序使用的额外文件（例如`.ini`文件）。

如何配置项目以将文件复制到输出目录，以便在程序运行时，它的 CWD 中有另一个文件的副本？

我检查了文件的属性页，除了从构建中排除它的选项（已禁用）之外没有其他用处，并且 custom-build-tool 命令为空（加上它是一个纯文本文件不需要任何处理）。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-01T06:52:05.090

要将文件复制到 Visual Studio 2003 中的输出目录，您可以使用 Post-Build 事件：

1.  右键单击项目->属性
2.  通用属性->构建事件
3.  **将构建后事件命令行设置为：**

    ```
    xcopy /y $(ProjectDir)my_file.ini  $(ProjectDir)$(OutDir) 
    ```

4.  好的并建立！

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-31T06:24:21.113

请尝试在解决方案资源管理器中选择文件。然后您应该能够在“属性”窗口中看到它的属性（`F4`如果它不可见，请按）。你会发现有两个属性：

*   “建设行动”和
*   “复制到输出目录”

将“构建操作”设置为“内容”，然后 - 为“复制到输出目录”设置选择适当的值。

具有“构建操作”和“复制到输出目录”设置的文件属性窗口

![文件属性窗口](../Images/9e233e31a756fd7a7d0d7bef4c55053f.png)

如果上述方法不适合您，请阅读这篇文章“[使用 .inf 文件复制到输出目录问题](https://stackoverflow.com/questions/2083100/)”。然后看看这个“ [Visual Studio：非默认文件类型的默认构建操作](http://web.archive.org/web/20170321113639/http://blog.andreloker.de/post/2010/07/02/Visual-Studio-default-build-action-for-non-default-file-types.aspx)”

希望有帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-31T07:01:13.327

当我在文件的属性页中搜索构建操作字段时，我有一个想法：设置自定义构建步骤以*复制*文件（手动）。事实证明这比我想象的要容易。我认为它需要使用`cmd`或其他外部可执行文件（`xcopy`,`robocopy`等），但这不是必需的。

我将自定义构建步骤设置如下：

```
Command Line : copy $(InputFileName) $(OutDir)
Description  : Copying foobar...
Outputs      : $(InputFileName) 
```

设置输出字段（正确）对于防止 VS 始终认为项目已过时并需要重建（我不确定是否需要以 为前缀`$(OutDir)\`）至关重要。

它反映在“输出”窗口中，如下所示：

```
Copying foobar...
        1 file(s) copied.
Compiling resources...
Linking... 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-26T10:41:19.927

对于 VS 2017，Dmitry Pavlov 发布的命令如下：

```
xcopy /y "$(ProjectDir)my_file.ini"  "$(OutDir)" 
```

如果项目目录的路径中有空格，引号很重要。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-28T01:34:13.623

扩展 Synetech 的答案。

在 VS2019 中，在解决方案资源管理器中右键单击要复制的文件，然后选择属性。然后在 General >> Item Type 下更改为 Copy File，然后点击 Apply。
您现在应该在目的地等的属性页面中有 UI 字段。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-06-29T19:54:03.667

如果这对任何人都有帮助，我需要将我正在构建的项目的输出 dll 复制到另一个项目中。

```
xcopy /y "$(ProjectDir)$(OutDir)$(TargetName)$(TargetExt)" 
"C:\Application\MyApplicationName\bin\x86\Debug"

/y = overwrite file if already exists
$(ProjectDir) = location on your machine where the project lives
$(OutDir) = is where your current build setup outputs the build
$(TargetName) = What the project being built is set to be called. Ex: XXX of XXX.dll
$(TargetExt) = the extension of the build Ex: .dll of XXX.dll

"C:/..../x86/Debug" is the location to copy to. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-19T11:22:59.900

您需要额外的 $(OutDir)。否则，在重建/清理步骤中，它将丢弃您的源代码。

```
CommandLine : copy "$(SolutionDir)last-script.js" "$(TargetDir)Debug"

Outputs  : $(TargetDir)Debug\last-script.js 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-03T14:22:13.923

改进 Synetech 答案：

在 VS 2013 C++ 项目中 命令行：copy %(Identity) $(OutDir) 描述：Copying foobar... 输出：%(Identity) 有效，但是会导致循环依赖，即每次你要求增量时都会执行建立，没有米它已经被复制了。

要解决此问题，您可以将该项目添加到目标文件夹，将路径更改为 $(OutDir)，然后在第一个添加的项目中将其用作输出。缺点 - 两个具有相似名称的项目在解决方案中。

在构建后使用 /d /y 参数的 xcopy 也很有用 - 仅当目标文件日期较旧时才复制。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-03T17:09:49.643

您还可以在卸载项目后（右键单击项目>>卸载项目）在现有`<ItemGroup>`标签中添加以下内容：

```
<Content Include="..\..\Config\db.config">
  <Link>Config\db.config</Link>
  <CopyToOutputDirectory>Always</CopyToOutputDirectory>
  <SubType>Designer</SubType>
</Content> 
```

在这种情况下，它会从 2 个文件夹中抓取 db.config 文件，并在创建一个包含 db.config 文件的 Config 文件夹后将其放入输出文件夹（默认为 bin/Debug）

# java - 休眠中的mappedby到底是什么意思？

> ID：10827027
> 
> 赞同：0
> 
> 时间：2012-05-31T03:19:45.487
> 
> 标签：java, hibernate, one-to-many

我尝试了文档，但我什么也没有。我尝试在 google 和 stackoverflow 上搜索它，但仍然没有帮助。我有一个单例类，这个类与另一个类有单对多关系。这是我的代码。

```
@Entity
public class HomeLibrary extends BaseModelObject {
    @OneToMany(mappedBy = "homeLibrary", cascade = { CascadeType.ALL })
    private Collection<Book> books = new ArrayList<Book>();

    private static HomeLibrary sharedHomeLibrary = new HomeLibrary();

    public static HomeLibrary getSharedHomeLibrary() {
        return sharedHomeLibrary;
    }

    public Collection<Book> getBooks() {
        return books;
    }

    public void setBooks(Collection<Book> books) {
        this.books = books;
    }

    private HomeLibrary() {
    }
} 
```

我在测试中遇到了错误。似乎无法建表。

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [HibernateApplicationContext-aop.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on edu.fudan.ss.persistence.hibernate.Book.homeLibrary references an unknown entity: edu.fudan.ss.persistence.hibernate.HomeLibrary 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:23:50.393

Hibernate 需要您的默认构造函数才能创建实体，因为您的构造函数是隐藏的，它无法创建您的`HomeEntity`.

构造函数应该是公共的或包可见性，休眠应该能够使用 setAccessible(true) // 注意我没有尝试过包可见性选项。

`Class<T>.newInstance()`Hibernate 和一般框架通过反射创建实体使用。

mappedBy 表示映射由 Owning 方完成，依赖方无需定义映射。

`Book`因此，在您的情况下，如果您正在定义映射，您将把 mappedBy 放入，`HomeLibrary`反之亦然。

SO上的这篇[文章](https://stackoverflow.com/questions/953800/can-i-have-hibernate-create-an-object-through-factory-method/4092389#4092389)谈到了通过工厂方法创建对象，您可以使用它来拥有您的单例对象。

# javascript - 尝试在 javascript 中创建一个表单，该表单将检查我的 if else 并在 true 时重定向到 url

> ID：10827028
> 
> 赞同：0
> 
> 时间：2012-05-31T03:19:52.223
> 
> 标签：javascript, html

我正在尝试创建一个表单来提出一个简单的问题，例如“一只狗有几条腿？”（我知道我还没有添加那部分）具有三种不同的结果。

1.  输入字段中没有任何内容“糟糕！您还没有回答线索！”
2.  输入字段中的错误答案“抱歉错误答案”
3.  输入中的正确答案，然后将显示下一个问题的 URL。“干得好！转到下一个问题” www.url.com

这是我到目前为止所拥有的，我无法查看我对“下一页”的回答是否将我发送到一个 url

```
<pre>
<html>
<head>
<title>Form</title>
<script type="text/javascript">
function validateForm()
{
var x=document.forms["myForm"]["fname"].value;
if (x===null || x==="")
 {
  alert("Oops! You haven't answered the clue!");
  return false;
  } else (x==="next page")
   window.location="www.facebook.com"
}
</script>

</script>
</head>
<body>
<form name="myForm" method="post">
Answer: <input type="text" name="fname"><input type="submit" value="Submit">
</form>

</html>
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:41:13.533

`else`不带条件。您需要使用`else if`，如下所示：

```
if (x===null || x==="")
{
  alert("Oops! You haven't answered the clue!");
  return false;
} else if (x==="next page") {
   window.location="www.facebook.com"
} 
```

值得注意的是，您需要`http://`在该 URL 前面添加。此外，由于您在`return false`出现未回答的线索时退出函数，您实际上可以只使用两个`if`语句而不是`else if`：

```
if (x===null || x==="")
{
  alert("Oops! You haven't answered the clue!");
  return false;
}

if (x==="next page")
{
   window.location="http://www.facebook.com";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T03:43:01.793

首先，您没有`validateForm`在表单提交时调用您的函数。而且您的代码中有一些语法问题。

您的 if 语句应该是...

```
if (x===null || x==="") {
    alert("Oops! You haven't answered the clue!");
    return false;
} else if (x==="next page") {
    window.location="www.facebook.com";
} 
```

请参阅下面具有不同结果的代码的编辑版本...

```
<script type="text/javascript">
function validateForm() {
    var x=document.forms["myForm"]["fname"].value;
    if (x===null || x==="") {
        alert("Oops! You haven't answered the clue!");
        return false;
    } else if (x != "4") {
        alert("Sorry wrong answer!");
        return false;
    } else if (x==="4") {
        alert("Good Job! Go to the next question");
        window.location="www.facebook.com"
    }

return false;
}
</script>
</head>
<body>
<form name="myForm" method="post" onSubmit="return validateForm()">
Answer: <input type="text" name="fname"><input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T03:48:59.297

要访问 url，您需要添加`else if`：

```
<pre>
<html>
<head>
<title>Form</title>
</head>
<body>
<form name="myForm" method="post">
Answer: <input type="text" name="fname"><input type="submit" value="Submit">
</form>
<script type="text/javascript">
function validateForm() {
    var x = document.forms["myForm"]["fname"].value;
    if (x === null || x ==="") {
        alert("Oops! You haven't answered the clue!");
    } else if (x === "next page") {
        alert("Good Job! Go to the next question");
        document.forms["myForm"].innerHTML += "<a href=\"http://www.facebook.com\">Next Question</a>";
    } else {
        alert("Sorry wrong answer");
    }
    return false;
}
document.forms["myForm"].onsubmit = validateForm;
</script>
</html>
</pre> 
```

# c++ - 如何在 gdb 中查看地图的值？

> ID：10827029
> 
> 赞同：1
> 
> 时间：2012-05-31T03:20:10.143
> 
> 标签：c++, gdb

我有所有 STL 容器的包装类。我希望在基于 gdb 调试我的代码库时查看其中一张地图中包含的值。我已经拥有所有 stl 视图的 .gdbinit。目前我的 gdb 正在识别所有 stl 命令，如 pmap、pvector 等，但是当我将包装器映射（或任何其他容器）对象作为参数提供给 stl 命令时，我收到以下错误。

```
(gdb) pmap wrapperMapObj
Invalid type combination in equality test. 
```

如何查看包装对象中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:31:16.683

> 我已经拥有所有 stl-views 的 .gdbinit

STL-views 在上个世纪是如此。如果您使用的是 GDB-7.x，新的[python 漂亮打印机](http://tromey.com/blog/?p=524)可能会提供*更好的*用户体验。

> 但是当我提供我的包装地图时

既然你还没有解释你的“包装图”是什么，我们怎么可能回答你的问题呢？

# jquery - 是什么导致 TypeError: undefined is not a function？

> ID：10827035
> 
> 赞同：7
> 
> 时间：2012-05-31T03:21:22.583
> 
> 标签：jquery

所有，我有一些我正在尝试调试的代码，我在我的 JS 控制台中使用了以下代码：

```
clickEvents = $('ul.breadcrumb[data-allownextonly]').data("events").click;
jQuery.each(clickEvents, function(key, value) {
    console.log(value.handler);
}) 
```

当我执行这个我得到错误： TypeError: undefined is not a function

我的问题是导致这种情况发生的原因是什么？从我阅读的大部分内容来看，它涉及 jQuery 未正确加载或两个脚本之间存在冲突的事实。jQuery 正在正确加载，因为我的页面上有 jQuery 可以正常工作的其他对象。我正在使用 Wordpress，所以已经没有冲突了。

在我的控制台中，我将 JS 调试更改为如下内容：

```
 clickEvents = jQuery('ul.breadcrumb[data-allownextonly]').data("events").click;
jQuery.each(clickEvents, function(key, value) {
    console.log(value.handler);
}) 
```

当我执行此操作时，出现以下错误： TypeError: Cannot read property 'click' of undefined

谁能让我知道我会收到这些错误的其他原因？如果我有一个冲突的脚本或类似的东西，我怎样才能找出冲突在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T03:45:45.547

根据 jQuery API，`.data( key )`如果匹配的元素没有任何与键匹配的数据，则该方法返回 undefined。看看它的用法[http://api.jquery.com/data/](http://api.jquery.com/data/)。它在任何情况下都只对匹配集中的第一个元素进行操作，因此您不能使用它来获取单击事件处理程序的数组。照原样，就是说第一个匹配的元素没有数据属性“事件”。一旦你得到附加的数据，做

```
var clickEvents = [];
$( selector ).data( key ).each( function() { 
    clickEvents.push( $(this).click );
}); 
```

收集点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T03:25:39.343

当您尝试执行未初始化或未正确初始化的函数时，您会收到该错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T03:30:34.283

似乎`jQuery('ul.breadcrumb[data-allownextonly]').data("events")`是`undefined`，因此任何取消引用都会引发错误。

顺便说一句，更改`$`为`jQuery`不会在您的代码中发生太大变化。如果没有加载 jQuery，它会给出不同的错误。

# c# - 当我有一个基类时，变量的 C# 命名约定？

> ID：10827042
> 
> 赞同：0
> 
> 时间：2012-05-31T03:23:22.240
> 
> 标签：c#

我需要一些关于我用于我的应用程序的命名约定的帮助。这是我所拥有的：

```
public class BaseController : Controller
    {
        public BaseController()
        {
        }

        [Dependency]
        public IContentService _cs { get; set; }
   }

public class ContentsController : BaseController
    {

        public ContentsController(
            IContentService contentService)
        {
            _cs = contentService;
        } 
```

有人可以让我知道我是否应该选择更好的命名约定以及我设置公共的方式是否正确？

**更新：**

我只在 Contents 控制器中使用 _cs。我应该为此设置不同的访问属性吗？它应该在基本控制器中是私有的还是受保护的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T03:30:49.320

您选择的成员变量命名 (_cs) 不适合公共属性（尽管这实际上是一个偏好问题）。使用带有下划线前缀的“小写驼峰”命名通常是为私有成员保留的（不过，.NET 建议使用小驼峰*不*带前缀）。公共属性通常应使用 UpperCamelCase 表示法声明；

```
public IContentsService ContentsService { get; set; 
```

您可以在此处找到有关 Microsoft 命名约定建议的信息：http: [//msdn.microsoft.com/en-us/library/ms229045.aspx](http://msdn.microsoft.com/en-us/library/ms229045.aspx)

至于您的基本控制器类，除非您有调用者将实例化 BaseController 的情况，而不是更具体的类型（例如 ContentsController）将类声明为抽象以使用法清晰（即；'BaseController' 不是直接创建或使用），并将构造函数声明为“受保护”；

```
public abstract class BaseController
{
    protected BaseController()
    {
        ...
    }
} 
```

最后考虑的是这个；IContentsService 是否属于 BaseController？从您的命名来看，似乎只有 ContentsController 会知道或使用 IContentsService，因此可能将该属性直接移到 ContentsController 类中。

HTH。

# java - 为什么我的 Java 项目可以在 Eclipse 中成功调用我的 DLL，而我将它们放在 JAVA_HOME\jre6\bin 中但使用 java.library.path 失败？

> ID：10827045
> 
> 赞同：0
> 
> 时间：2012-05-31T03:23:54.177
> 
> 标签：java, eclipse, dll, java-native-interface, java.library.path

经过一番研究，有人说我可以在我的项目**Run Configuration中添加以下****VM Argument**。在运行时，JVM 将搜索这些目录以查找 DDL。

 **```
-Djava.library.path="${workspace_loc}/GunCalibration/myLib/DLLs;${env_var:PATH}" 
```

**GunCalibration**是我工作区中的 Java 项目文件夹。 **DLLs**文件夹包含我所有使用我的 JNI 规范定义的 DLL。

结果，我收到此错误：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：D:\Software x64\eclipse3.7\Kai\workspace_RealW\GunCalibration\myLib\DLLs\sixense.dll：找不到依赖库

但是，如果我将一些特定的 dll 文件复制到**JAVA_HOME\jre6\bin**，我的代码可以正常工作。（我确实将此路径添加到我的系统环境 PATH 中。）

谁能解释为什么使用 java.library.path 的第一种方法不起作用？我怎么知道需要在**JAVA_HOME\jre6\bin**中放置哪个 ddl ？

非常感谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:05:35.117

JAVA_HOME\jre6\bin 实际上位于系统 PATH 中（因为它与正在运行的 java.exe 程序位于同一目录），这使得系统可以加载其中的任何 DLL。java.library.path 主要来自 PATH 的值，但它只影响 VM 查找本地库的位置，*而不*影响系统本身。

VM 可以根据 java.library.path 中的路径显式加载任何文件，但它不会影响系统查找任何依赖 DLL 的方式（除了告诉系统在其搜索中包含初始 DLL 的路径 - 请参阅[MSDN for LoadLibrary[Ex]](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684179%28v=vs.85%29.aspx) )

复制 DLL 的一种替代方法是将 DLL 的路径添加到 PATH 环境变量中。**

# android - 为什么 lstat() 在 fuse-mounted 目录中不起作用？

> ID：10827048
> 
> 赞同：0
> 
> 时间：2012-05-31T03:24:11.757
> 
> 标签：android, linux, android-emulator, linux-kernel, fuse

我有一个由 fuse 挂载的目录，我打算对这个目录使用 lstat()。但是，当我运行以下代码时，它只是在那里等待并且什么都不提示。顺便说一句，我在安卓模拟器中运行保险丝。代码是：

```
#include <sys/stat.h>
#include <stdio.h>

void main(){
    printf("new test!!!");
    char *path="/data/pwrite/test_12/";
    struct stat *stbuf;
    int res=12;
    res=lstat(path, stbuf);
    printf("%d",res);
} 
```

并且，“/data/pwrite/test_12/”是 fuse 挂载的目录。更重要的是，当我尝试另一个共享相同父目录但未由 fuse 挂载的目录时，如 /data/pwrite/test_13/，它可以工作！所以，我确定它是由fuse引导的。但是，我更困惑的是是否是由于fuse和android之间的冲突。有什么想法吗？thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:04:00.430

尝试没有错误，看看是否效果更好。

```
#include <sys/stat.h>
#include <stdio.h>

void main(){
    printf("new test!!!\n");
    const char *path="/data/pwrite/test_13/";
    struct stat stbuf; 
    int res=12;
    res=lstat(path, &stbuf);
    printf("%d\n",res);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:36:28.673

为什么它不起作用？因为目前有几个 fuse-deamon 运行。

# java - 使用归并排序对数组列表进行排序

> ID：10827051
> 
> 赞同：0
> 
> 时间：2012-05-31T03:24:48.277
> 
> 标签：java, sorting, arraylist

我无法将我的排序类转换为使用数组列表对对象进行排序。它目前正在对对象进行排序，但我无法将其转换为对 Arraylist 进行排序。这是代码：

```
package Merge_Sort_Objects_ArrayList;
import java.util.ArrayList;
public class mergesort {

    /**
     * Merges two sorted portion of items array
     * pre: items[start.mid] is sorted.  items[mid+1.end] sorted.  start <= mid <= end
     * post: items[start.end] is sorted
     */

    private static void merge(ArrayList <Comparable> items, int start, int mid, int end){
            Comparable temp;
            int pos1 = start;
            int pos2 = mid + 1;
            int spot = start;
            ArrayList <Comparable> objectSort = items;

            while (!(pos1 > mid && pos2 > end)){
                if ((pos1 > mid) || ((pos2 <= end) &&(items[pos2].getRadius() < items[pos1].getRadius()))){
                    temp[spot] = items[pos2];
                    pos2 +=1;
                }else{
                    temp[spot] = items[pos1];
                    pos1 += 1;
                }
                spot += 1;
            }
            /* copy values from temp back to items */

            for (int i = start;  i <= end; i++){
                items[i] = temp[i];
            }
    }

    /**
     * mergesort items[start..end]
     * pre: start > 0, end > 0
     * post: items[start..end] is sorted low to high
     */
    public static void mergesort(ArrayList <Comparable> items, int start, int end){
        if (start < end){
            int mid = (start + end) / 2;
            mergesort(items, start, mid);
            mergesort(items, mid + 1, end);
            merge(items, start, mid, end);
        }
    }
} 
```

现在我已经开始转换它了，但是我被困在这部分：

```
 while (!(pos1 > mid && pos2 > end)){
            if ((pos1 > mid) || ((pos2 <= end) &&(items[pos2].getRadius() < items[pos1].getRadius()))){
                temp[spot] = items[pos2];
                pos2 +=1;
            }else{
                temp[spot] = items[pos1];
                pos1 += 1;
            }
            spot += 1;
        }
        /* copy values from temp back to items */

        for (int i = start;  i <= end; i++){
            items[i] = temp[i];
        } 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:36:39.007

利用这个事实

```
Foo[] array = ......;
Foo rhs = .....;
Foo lhs;
array[i] = rhs;
lhs = array[j]; 
```

类似于：

```
ArrayList<Foo> list = .....;
Foo rhs = ......;
Foo lhs;
list.set(i, rhs);
lhs = list.get(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:27:23.467

如果不是为了练习，您可以查看用于对 ArrayList 进行排序的[Collections 排序](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)方法。

# objective-c - Cocos2D - 检测碰撞

> ID：10827053
> 
> 赞同：0
> 
> 时间：2012-05-31T03:24:55.107
> 
> 标签：objective-c, ios, cocos2d-iphone, collision-detection

我是 cocos2d 的初学者，我面临着检测硬币碰撞的问题。有时它起作用，有时它不起作用。

所以基本上，我正在创建一个游戏，用户（船）必须避开障碍物并在途中收集硬币。障碍物的碰撞效果很好，但对于硬币来说却不行。我在想也许创建许多硬币的循环是问题，但我不确定。

任何人都可以帮忙吗？

我的代码：

```
- (void)update:(ccTime)dt{
double curTime = CACurrentMediaTime();
if (curTime > _nextBridgeSpawn) {

    float randSecs = [self randomValueBetween:3.0 andValue:5.0];
    _nextBridgeSpawn = randSecs + curTime;

    float randX = [self randomValueBetween:50 andValue:500];
    float randDuration = [self randomValueBetween:8.0 andValue:10.0];

    CCSprite *bridge = [_bridge objectAtIndex:_nextBridge];

    _nextBridge++;

    if (_nextBridge >= _bridge.count) _nextBridge = 0;

    [bridge stopAllActions];
    bridge.position = ccp(winSize.width/2, winSize.height);
    bridge.visible = YES;

    [bridge runAction:[CCSequence actions:
                         [CCMoveBy actionWithDuration:randDuration position:ccp(0, -winSize.height)],
                         [CCCallFuncN actionWithTarget:self selector:@selector(setInvisible:)],
                         nil]]; 
```

这是我声明我的硬币的地方（续更新方法）

```
 int randCoin = [self randomValueBetween:0 andValue:5];
    _coin = [[CCArray alloc] initWithCapacity:randCoin];
    for(int i = 0; i < randCoin; ++i) {
        coin = [CCSprite spriteWithFile:@"coin.png"];
        coin.visible = NO;
        [self addChild:coin];
        [_coin addObject:coin];
    }

    float randCoinX = [self randomValueBetween:winSize.width/5 andValue:winSize.width - (border.contentSize.width *2)];
    float randCoinY = [self randomValueBetween:100 andValue:700];
    float randCoinPlace = [self randomValueBetween:30 andValue:60];
    for (int i = 0; i < _coin.count; ++i) {
        CCSprite *coin2 = [_coin objectAtIndex:i];
        coin2.position = ccp(randCoinX, (bridge.position.y + randCoinY) + (randCoinPlace *i));
        coin2.visible = YES;
        [coin2 runAction:[CCSequence actions:
                          [CCMoveBy actionWithDuration:randDuration position:ccp(0, -winSize.height-2000)],
                          [CCCallFuncN actionWithTarget:self selector:@selector(setInvisible:)],
                          nil]];  
    }

} 
```

这是为了检查碰撞（也在更新方法中）

```
for (CCSprite *bridge in _bridge) {        
    if (!bridge.visible) continue;

if (CGRectIntersectsRect(ship.boundingBox, bridge.boundingBox)){
            bridge.visible = NO;
            [ship runAction:[CCBlink actionWithDuration:1.0 blinks:5]];         

        }
    }
}

//this is the collision for coins which only work at times
    for (CCSprite *coin2 in _coin) { 

        if (!coin2.visible) continue;

        if (CGRectIntersectsRect(ship.boundingBox, coin2.boundingBox)) {
            NSLog(@"Coin collected");
            coin2.visible = NO;
        }

    } 
```

}

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:36:54.763

为什么你不检查距离？

```
 float dist = ccpDistance(ship.position, coin2.position); 
 float allowedDist = ship.contentSize.width*0.5 + coin2.contentSize.width*0.5;
 if (dist<allowedDist){
   NSLog(@"Collision detected");
 } 
```

如果您的精灵不在同一层上，则这些层应至少具有相同的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:02:00.707

最后一段代码中的电话是什么？你在那里检查它的boundingBox是否与硬币相交，但我在其他任何地方都看不到它。另一个，boundingBox 仅当您的对象具有相同的父对象时才有效，因为它返回“本地”矩形，相对于它的父对象

另一点是，如果您的对象的移动速度过快，它们可能会在滴答时间内互相通过。我的意思是，一个更新将在碰撞之前被调用，所以它不会检测到它，下一个将在碰撞完成后调用，所以它也不会检测到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:08:31.590

我通过在 init 中创建一个计时器并每 10 秒调用一次来创建我的硬币来解决我的问题。

我的代码：

```
-(void) createCoins:(ccTime)delta{ 

CGSize winSize = [CCDirector sharedDirector].winSize;

int randCoin = [self randomValueBetween:0 andValue:10];
_coin = [[CCArray alloc] initWithCapacity:randCoin];
for(int i = 0; i < randCoin; i++) {
    coin = [CCSprite spriteWithFile:@"coin30p.png"];
    coin.visible = NO;
    [self addChild:coin];
    [_coin addObject:coin];
}
float randCoinX = [self randomValueBetween:winSize.width/5 andValue:winSize.width - (border.contentSize.width *2)];
float randCoinY = [self randomValueBetween:100 andValue:700];
float randCoinPlace = [self randomValueBetween:30 andValue:60];
for (int i = 0; i < _coin.count; i++) {
    CCSprite *coin2 = [_coin objectAtIndex:i];
    coin2.position = ccp(randCoinX, (winSize.height + randCoinY) + (randCoinPlace *i));
    coin2.visible = YES;

    [coin2 runAction:[CCSequence actions:
                      [CCMoveBy actionWithDuration:8 position:ccp(0, -winSize.height-2000)],
                      [CCCallFuncN actionWithTarget:self selector:@selector(setInvisible:)],
                      nil]];  
} 
```

}

在更新方法中：

```
for (CCSprite *coins in _coin){
    if (!coins.visible) continue;
    if (CGRectIntersectsRect(phone.boundingBox, coins.boundingBox)) {
        NSLog(@"Coin collected");
        coins.visible = NO;
    }

} 
```

谢谢大家的帮助（：

# nhibernate - 如何将主键生成从“increment”迁移到“hi-lo”？

> ID：10827054
> 
> 赞同：2
> 
> 时间：2012-05-31T03:25:08.807
> 
> 标签：nhibernate, migration, primary-key

我正在使用一个中等大小的 SQL Server 2008 数据库（大约 120 个表，备份压缩大约 4GB），其中所有表主键都声明为简单的 int 列。

**目前，NHibernate 使用增量**标识生成器生成主键值，该生成器迄今为止运行良好，但无法迁移到多处理环境。

系统上的负载正在增长，因此我正在评估允许使用多个服务器访问公共数据库后端所需的工作。

过渡到**hi-lo**生成器似乎是最好的方法，但我找不到很多关于这种迁移如何工作的细节。

*NHibernate 会自动为我在 hi-lo 表中创建行，还是我需要手动编写这些脚本？*

*如果 NHibernate 确实自动插入行，它是否正确考虑了现有的键值？*

如果 NHibernate 确实自动处理事情，那就太好了。如果没有，是否有任何工具可以提供帮助？

**更新**

NHibernate 的*增量*标识符生成器完全在内存中工作。它是通过从表中选择已用标识符的最大值来播种的，但从那时起，它会通过简单的增量分配新值，而不参考底层数据库表。如果任何其他进程向表中添加行，则最终会导致主键冲突。你可以在一个进程中运行多个线程就好了，但你不能运行多个进程。

相比之下，NHibernate*身份*生成器通过使用身份列配置数据库表来工作，将主键生成的控制权交给数据库。这很好用，但会损害工作单元模式。

*hi-lo*算法介于两者之间——主键的生成通过数据库进行协调，允许多处理，但实际分配可以完全在内存中进行，避免了工作单元模式的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:31:10.807

要使用 hi-lo 生成器，您需要创建查找表，该表将存储生成键的“Hi”部分的下一个值。您可以选择为每个实体表创建单独的列、将由所有实体使用的单个列或两个选项的组合。

如果使用共享列，则每个生成的键将仅由单个实体使用。如果有很多实体表，这可能更可取，但它会减少可以生成的 Id 总数。

例如，我们的项目使用一个`HiLoLookup`包含三列的表：

```
NextEntityId BIGINT NOT NULL,
NextAuthenticationLogId BIGINT NOT NULL,
NextConfigurationLogId BIGINT NOT NULL 
```

日志表有大量的插入，因此被赋予了一个单独的 Hi 值池。我们常规实体表的主键列使用 64 位`BIGINT`数据类型，因此即使 id 序列存在较大间隙，也不存在溢出的危险。共享 ID 池用于减少管理开销。

hi-lo 生成器没有内置支持使用与现有键不冲突的起始值初始化自身 - 所以这需要手动执行。用作起始“hi”值的值取决于几个考虑因素：

*   最大现有 id 值 - 生成的 id 需要高于此值以避免重复
*   在从 db ( ) 请求新的“hi”值之前应该生成多少个 id `max_lo`- 较大的值会提高并发性，但会增加 id 被浪费的可能性，尤其是在服务频繁重启的情况下

`max_lo`在确定您的起始“hi”值应该是什么时，实体映射中提供的值至关重要。例如，考虑一个表，最大现有id值为12345，回数据库前应该生成的id个数是1000。这种情况下，起始hi值应该是`(12345 / 1000) + 1 = 13`，第一个生成的id会是13000 . 由于 HiLoGenerator 实现中的一个怪癖，实体配置中提供*的`max_lo`值需要是 999，**而不是**1000*。

如果使用`.hbm`映射：

```
<generator class="hilo">
    <param name="table">dbo.HiLoLookup</param>
    <param name="column">NextEntityId</param>
    <param name="max_lo">999</param>
</generator> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:21:44.753

除了传统的 HiLo，您可能还想研究新的增强型 id 生成器。它们可以使用与 HiLo 工作方式在本质上相似的表（或序列，如果数据库支持），但内置支持不同实体的单独数字序列（如果需要）。使用增强的 id 生成器，您还可以选择使用 HiLo 算法或池化算法。“池化”的好处是 id 生成器表显示的是实际值，而不仅仅是其中的一部分。

这些是 NHibernate 3.3 中的新功能。参考文档还没有提到它们，但是 Hibernate 文档有。它们在 NHibernate 中的工作方式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T04:30:24.913

我更喜欢使用 HILO，因为它不会破坏 UOW，并且允许我向服务器发送多个插入语句。

现在为您的问题：-

*NHibernate 会自动为我在 hi-lo 表中创建行，还是我需要手动编写这些脚本？*

您将需要创建您的 hilo 表，hilo 有两种风格，您的所有表中的单个数字或任何表的数字。我更喜欢后者。

*如果 NHibernate 确实自动插入行，它是否正确考虑了现有的键值？*

您需要手动设置 maxhi/maxlo，lo 位于映射中，hi 位于表中，因此您需要将 XML 映射更改为：-

```
<id name="Id" column="Id" unsaved-value="0">
    <generator class="hilo">
        <param name="column">NextHi</param>
        <param name="where">TableName='CmsLogin'</param>
        <param name="max_lo">100</param>
    </generator>
</id> 
```

然后可以（手动）生成以下 SQL：-

```
CREATE TABLE hibernate_unique_key (
  TableName varchar(25) NOT NULL,
  NextHi bigint NOT NULL
) 
```

然后为您希望使用 hilo 的每个表在数据库中添加一行：例如

```
CmsLogin,123
Address, 456 
```

请注意，这里的 123 将开始我的下一个插入 id 到 (123 x 100) = 12300 因此只要 12300 大于我当前的身份，那么一切都应该是好的！

如果你不喜欢默认的表名`hibernate_unique_key`，那么你可以把它混在一起

```
<param name="table">HiloValues</param> 
```

# python - 输入字符串和整数

> ID：10827058
> 
> 赞同：0
> 
> 时间：2012-05-31T03:25:55.013
> 
> 标签：python, string, input, integer, raw-input

只是一个简单的问题，因为我真的找不到解决问题的简单方法。有没有办法让用户输入是一个整数，但是当输入一个字符串时，程序不会中断，而是显示“错误”

我一直在尝试通过将字符串转换为整数来解决它，反之亦然，但我经常收到“invalid literal for int() with base 10”错误，或者当它显示“错误”时它会在无限循环中这样做.

这是我的代码，只是为了帮助解决问题

```
choice = input("Enter your choice: ")

while choice != 3:
    if choice == 1:
        get_songs()
        print
        main()
    elif choice == 2:
        read_songs()
        print
        main()
    else:
        print "Invalid choice" 
```

所以基本上我希望 else 操作适用于字符串以及大于 3 或小于 1 的整数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T03:37:22.983

> 但我经常收到“invalid literal for int() with base 10”错误

你得到一个例外，特别是一个`ValueError`. 您可以使用`except`块捕获异常。有关更多信息，请参阅您迄今为止使用的任何语言教程，或尝试使用 Google 获取`except block Python`.

> 当它显示“错误”时，它会在无限循环中这样做。

当您检测到输入不正确时，您需要在再次尝试循环之前获取新输入。将获取输入的内容放入循环中。除了循环之外，*不要*`main()`使用递归（从内部调用）；`main`你只会这样迷惑自己。因为在进入循环之前你不会得到一个值，所以当你找到合适的值时`choice`更容易显式地退出循环，而不是尝试用它来控制循环（即在条件中测试它） .`break``choice``while`

我们还可以使用它`continue`来简化循环结构：不是在块中完成所有工作`try`，而是将其限制在提取数字的部分。当我们没有实际数字时，我们`continue`在块中使用以跳过循环的其余部分，并且仅在我们有时才执行循环的其余部分。`except`（毕竟，也许我们要求`choice == 1`或`choice == 2`可能`raise ValueError`出于某些完全不同的原因的代码，我们想做一些不同的事情。）

```
while True:
    try:
        choice = int(raw_input("Give me a number"))
    except ValueError:
        print "Could you at least give me an actual number?"
        continue

    if choice == 1:
        do_something()
    elif choice == 2:
        do_something_else()
    elif choice == 3:
        break
    else:
        print "Try a different number" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T03:32:51.937

由于该选择始终！= 3，因此您将获得无限循环。如果它跳入“else”条件，您应该再次获得输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T03:32:53.437

事情是这样的：我不喜欢让用户`""`在字符串周围输入。

```
ch = raw_input("Enter choice: ")
#ch *is* a string at this point
if ch.isdigit():
   choice = int(ch)
else:
    print "Invalid choice" 
```

**编辑**（来自评论）：

> `isdigit`可能无法正确处理语言环境编码。在 Python 3 中，您可以`isdecimal`改用。— JF塞巴斯蒂安

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T03:33:08.447

在您的代码中，`while`循环应该封装该`input()`行。但是，以下是更清晰的替代方案：

创建一个获取用户输入的函数：

```
def getInteger(prompt):
    while True:
        userIn = input(prompt)
        try:
            return int(userIn)
        except ValueError:
            print "Error" 
```

# opencv - 在 JavaCV 中将 IPL_DEPTH_16S 图像转换为 IPL_DEPTH_8U

> ID：10827066
> 
> 赞同：1
> 
> 时间：2012-05-31T03:27:42.770
> 
> 标签：opencv, javacv

我有一个深度为 IPL_DEPTH_16S 的图像

```
IplImage result = cvCreateImage(cvGetSize(smoothImage), IPL_DEPTH_16S, 1);
cvSobel(smoothImage, result, 0, 1, 3); 
```

我想将该结果图像传递给需要 IPL_DEPTH_8U 图像的其他对象。那么有没有办法在 JavaCV 中将 IPL_DEPTH_16S 转换为 IPL_DEPTH_8U。

我已经尝试使用 cvConvertScale() 方法。但我找不到该方法的确切参数。

谢谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:14:29.120

使用与您的代码相同的样式，这应该可以工作：

```
IplImage i = cvCreateImage(cvGetSize(result), IPL_DEPTH_8U, 1);
cvConvertScale(result, i, 1, 0); 
```

# android - 强制刷新不可见的 Android 布局

> ID：10827068
> 
> 赞同：0
> 
> 时间：2012-05-31T03:27:55.537
> 
> 标签：android, android-layout

有谁知道强制刷新/绘制不可见布局的方法？

我有一个复杂的应用程序，其中一个布局目前可能不可见，但我们希望将其转换为位图并以另一个更小、缩放、可见的布局显示。

我可以轻松地将布局复制到位图，然后将该位图放入较小的可见窗口中的 ImageView 中。但我们遇到的问题是，如果视图在不可见窗口中被更改、删除或添加，Android 实际上并没有绘制它。因此，放置在较小可见布局中的获取位图是陈旧且静态的。

那么有没有办法强制不可见的布局重新绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:42:01.197

扩展`LinearLayout`和覆盖`onMeasure`功能，返回您的完整布局大小（屏幕上 + 屏幕外）。将此布局用作您的不可见布局

这段代码可能会让你开始..

```
public class YourLayout extends LinearLayout {
  private Context myContext;

  public YourLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
  }

  @Override
  protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec){
    /*
     *  Magic!!!  Android doesn't draw parts of layout which is offscreen. Since YourLinear layout has some offscreen part
     *  its offscreen portions didn't get drawn. 
     *  This onMeasure function determines how much pixel of a layout need to be drawn. 
     *  widthMeasureSpec        ->  Width of YourLayout onscreen
     *  heightMeasureSpec       ->  height of YourLayout on screen
     *  your_view_offscreen_width   ->  width of offscreen part
     *  your_view_offscreen_height->   height of offscreen part
     *  So heightMeasureSpec + your_view_offscreen_height draws complete height of YourLayout whether it is onscreen or offscreen. 
     *  So widthMeasureSpec + your_view_offscreen_width draws complete width of YourLayout whether it is onscreen or offscreen
     */
      super.onMeasure(widthMeasureSpec + your_view_offscreen_width, heightMeasureSpec + your_view_offscreen_height);
   }
} 
```

现在您可以将此布局用作您的不可见布局.. 即，如果您使用 xml 进行布局，您可以像这样使用它

```
 <com.your.package.YourLayout layout_width="fill_parent" layout_height="fill_parent"
  ......
 > 
```

# oracle - 将 PL/SQL 脚本转换为存储过程

> ID：10827072
> 
> 赞同：2
> 
> 时间：2012-05-31T03:28:39.100
> 
> 标签：oracle, plsql, oracle10g

现在我正在将数据导入并转换到 Oracle 数据库中，如下所示：

*   程序定期轮询特定文件夹，一旦找到文件，它就会执行一个批处理文件，该文件在 Python 和 bash 中进行一些简单的转换，然后调用 SQL*Loader 将 CSV 文件加载到临时表中。

*   然后，批处理脚本调用 SQL 脚本（通过 SQLPlus）进行最终转换，并将转换后的数据插入到主表中，用于各自的临时表。

这种方法的问题是在 SQLPlus 端没有错误处理，例如。如果“insert into”语句由于违反约束（或任何其他原因）而失败，它仍将继续执行 SQL 脚本中包含的其余语句。

理想情况下，如果发生任何异常，我希望回滚所有更改并将异常的详细信息插入到 etl 日志表中。

存储过程似乎很合适，因为异常处理是内置的。但是，我在语法上苦苦挣扎——特别是我如何使用我的大 SQL 脚本（它们只是 INSERT INTO、UPDATE、CREATE、DROP、DELETE 等语句的组合）并将它们放入存储过程中基本错误处理。

我希望的是：

*   一个快速而肮脏的假人指南，用于获取我令人沮丧的 PL/SQL 块并让它在存储过程中执行或
*   提供相同功能的任何替代方案（如果存储过程不合适），即。一种执行一堆 SQL 语句并在这些语句中的任何一个抛出异常时回滚的方法。

关于我的尝试 - 我尝试将我的 SQL 脚本的一部分复制到存储过程中，但它们总是无法编译并出现错误“PLS-00103 在期望以下之一时遇到符号”。例如。

```
CREATE OR REPLACE PROCEDURE ETL_2618A AS 
   BEGIN
       DROP SEQUENCE "METER_REPORTING"."SEQ_2618"; 
       CREATE SEQUENCE SEQ_2618; 
END ETL_2618A; 
```

Oracle 文档不是很容易访问，而且我在谷歌搜索/搜索 StackOverflow 方面运气不佳，但如果我遗漏了一些明显的东西，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T03:44:25.970

要在 PL/SQL 中执行 DDL，您需要使用动态 sql。

```
CREATE OR REPLACE PROCEDURE testProc IS
   s_sql    VARCHAR2(500);
BEGIN
   s_sql := 'DROP SEQUENCE "METER_REPORTING"."SEQ_2618"';
   EXECUTE IMMEDIATE s_sql;

   s_sql := 'CREATE SEQUENCE "METER_REPORTING"."SEQ_2618"';
   EXECUTE IMMEDIATE s_sql;

EXCEPTION

   WHEN OTHERS THEN
       NULL;
end testProc;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:42:43.227

如果您在 sqlplus 中运行脚本，您可以使用：

每当 sqlerror

控制发生错误时应该发生的事情。

[http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12052.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12052.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T11:24:15.517

向 PL/SQL 过程或脚本添加异常处理并不困难，但当然需要一些编码。这是您的程序，添加了一些非常基本的错误报告：

```
CREATE OR REPLACE PROCEDURE ETL_2618A AS
  nCheckpoint  NUMBER;
BEGIN
  nCheckpoint := 1;

  EXECUTE IMMEDIATE 'DROP SEQUENCE "METER_REPORTING"."SEQ_2618"';

  nCheckpoint := 2;

  EXECUTE IMMEDIATE 'CREATE SEQUENCE SEQ_2618';

  RETURN;
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('ETL_2618A failed at checkpoint ' || nCheckpoint ||
                         ' with error ' || SQLCODE || ' : ' || SQLERRM);
    RAISE;
END ETL_2618A; 
```

未在动物身上进行测试 - 你会是第一个！:-)

# c# - 如何将 c++ dll printf 导入到 c# 文本框

> ID：10827073
> 
> 赞同：1
> 
> 时间：2012-05-31T03:28:41.737
> 
> 标签：c#, c++, printf, dllimport

我希望使 C++ DLL 与 C# 代码进行通信，但我无法让它工作，我必须从 C++ DLL 导入“printf”消息才能在 C# 文本框中打印，只要有谁能帮我解决这个问题它工作对我来说很好，有人可以指导我吗？我的主要优先事项是 C# 将能够在 C++ DLL 中打印“printf”函数 C++ DLL 代码，但代码被编译为 C：

```
ReceiverInformation()
{
     //Initialize Winsock version 2.2
     if( WSAStartup(MAKEWORD(2,2), &wsaData) != 0)
     {
          printf("Server: WSAStartup failed with error %ld\n", WSAGetLastError());
          return -1;
     }
     else
     {
         printf("Server: The Winsock DLL status is %s.\n", wsaData.szSystemStatus);
         // Create a new socket to receive datagrams on.
         ReceivingSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);

         if (ReceivingSocket == INVALID_SOCKET)
         {
              printf("Server: Error at socket(): %ld\n", WSAGetLastError());
              // Clean up
              WSACleanup();
              // Exit with error
              return -1;
         }
         else
         {
              printf("Server: socket() is OK!\n");
         }
     }
} 
```

这是 C# 代码，我尝试导入 C++ DLL 有人可以指出我应该如何处理由我的代码制作的示例代码：

```
public partial class Form1 : Form
    {
        [DllImport(@"C:\Users\Documents\Visual Studio 2010\Projects\Server_Receiver Solution DLL\Debug\Server_Receiver.dll", EntryPoint = "DllMain")]
        private static extern int ReceiverInformation();

        private static int ReceiverInformation(IntPtr hWnd)
        {
            throw new NotImplementedException();
        }

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            //textBox1.Text = "Hello";
            this.Close();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }           
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:47:09.980

不要使用`printf`. 将您的字符串传递给 C#。像这样：

C++ DLL 代码片段如下：

```
extern "C" __declspec(dllexport) int Test(char* message, int length)
{
    _snprintf(message, length, "Test");
    return 1;
} 
```

C# 片段如下：

```
[DllImport(@"test.dll")]
private static extern int Test(StringBuilder sb, int capacity);

static void Main(string[] args)
{
    var sb = new StringBuilder(32);
    Test(sb, sb.Capacity);

    // Do what you need here. In your case, testBox1.Text = sb.ToString()
    Console.WriteLine(sb);
} 
```

确保您`StringBuilder`的容量可以适合您从 DLL 导出中输出的任何消息。否则，它将被截断。

# magento - Shop This Look / Shop By Look - 创建包含多个产品和快速购物车的页面

> ID：10827077
> 
> 赞同：0
> 
> 时间：2012-05-31T03:29:31.987
> 
> 标签：magento, e-commerce

我想建立一个 Shop This Look 页面，该页面将易于编辑和更新，每次更新时都不会进行太多黑客攻击。

理想情况下，我希望它像这样工作：[http](http://shop.crooksncastles.com/collections/shop-by-look-mens-look-2) ://shop.crooksncastles.com/collections/shop-by-look-mens-look-2 在其中我上传了外观照片，然后选择要出现的产品（即使是通过使用他们的产品）。

我对如何实现这一点的想法：
1）专门为每种外观创建一个类别，但将它们设置为隐藏。例如。
外观>
* 外观1
* 外观2
* 外观3

2）然后在CMS页面上的静态块中显示类别。然后将选定的产品添加到外观类别中。

这个想法是客户可以选择他们的尺寸并在该页面上添加外观的每个产品而无需离开。

这是解决这个问题的正确方法吗？

有没有更好的方法来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:22:24.227

我认为最好的方法是在 app/local 中创建自己的模块。此外，您应该查看可配置产品及其属性，也许这足以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T00:50:08.920

解决的办法是更多地利用magento的分类功能。

我在模板文件中构建了两个新主题，一个用于类别，一个用于产品列表。

我使用的类别结构是

```
SHOP THIS LOOK > LOOK 1
               > LOOK 2
               > LOOK 3 
```

应用于“Shop This Look”父类别的模板已删除所有产品列表片段，仅显示子类别（Look 1、Look 2 和 Look 3）的图像。

然后，我将外观图像添加到每个外观 1 - 外观 3 类别和产品（通过类别产品选项卡）。

Look 页面也有自己的 list.phtml 文件。在左侧显示类别（外观）图像，然后在右侧显示产品列表。我对其进行了编辑，因此产品图像/标题不再链接到产品，并在底部添加了“查看完整产品详细信息”链接。这鼓励人们将他们的产品从外观添加到页面并保留在页面上以添加外观的其余部分。

与选择单个选项相比，另一种考虑购买整体外观的好方法是捆绑产品。

总的来说，功能正是我想要的。更新对于 Magento 外行来说很容易，而且看起来很棒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T05:17:05.147

作为一种替代方法，您可以查看 Altima Lookbook 以创建“[购买外观](http://shop.altima.net.au/altima-lookbook-professional.html)”体验。它以一种不同的方式进行 - 允许您放置一张幻灯片（作为幻灯片的一部分），其中多个产品与该幻灯片链接为交互式标签，放置在实际图像的顶部。

# vba - Excel VBA图表无法识别值

> ID：10827079
> 
> 赞同：2
> 
> 时间：2012-05-31T03:30:04.763
> 
> 标签：vba, graph, excel, charts

我还有一个非常令人困惑的问题，你们中的一个人也许能够解决。所以基本上我有这段代码可以使用 Excel VBA 编写折线图。它的制作使其可以是动态的，并且可以在添加更多值时更改。但是它将第一个值读取为 0，将最后一个值读取为 0，即使它们不是 0。这是我用来将图表放在页面上的代码。

```
Sub createchart4()

lastA = Range("A1").End(xlDown).Row
ActiveSheet.Shapes.AddChart.Select
ActiveChart.ChartType = xlLine
ActiveChart.SetSourceData Source:=Range("Main!$A$1:$A$" & lastA)
ActiveChart.ChartTitle.Select
ActiveChart.SeriesCollection(1).Name = "=Main!$A$1"
ActiveChart.SeriesCollection(1).Values = "=Main!$A$3:$A$" & lastA

End Sub 
```

意思是 A3 的值实际上是 1534 时为 0，并且当 A10 和 A11 不同时也将它们读为 0。

如果你能弄清楚这一点，我会很惊讶：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T04:03:19.453

图表忽略数字的唯一情况是数字存储为文本。见快照

![在此处输入图像描述](../Images/a250a6e48145932c777043bef4d8e670.png)

如何知道数字是否存储为文本以及我们如何纠正它？

如果您使用的是**Excel 2003**，请转到菜单`Tools | Options`。在`Error Checking`选项卡下，确保选中该复选框`Number Stored as text`。

在**Excel 2007/2010**中，单击`Excel Options`可以从`Office Icon`Excel **2007**中或**Excel 2010**`Options`中的`File`选项卡中访问的。

 **转到`Formulas`选项卡并确保`Numbers formatted as text or preceded by an apostrophe`已选中。

如果上面的复选框被选中，那么您会注意到一个小的**绿色三角形**，如上面的快照所示。选择从第一个具有**绿色三角形的****单元格**开始的整个范围。点击。点击，你就完成了。**`Exclamation mark``Convert to number`**

 **![在此处输入图像描述](../Images/e7438b660898d6312dc908015e9dd0e7.png)****

# mongodb - 在数组中搜索并返回结果

> ID：10827082
> 
> 赞同：-1
> 
> 时间：2012-05-31T03:30:34.447
> 
> 标签：mongodb

我有一个集合，像这样：

```
post = {"topics":["japan","japanese","england","chinese"]}
post = {"topics":["canada","japan"]}
post = {"topics":["usa"]} 
```

现在我想实现一个查询，可以通过检查“主题”字段来查看它是否包含某个字符来返回一个元素列表。

例如查询“ja”，返回所有以“ja”开头的标签：["japan", "japanese"],

查询 "c"，返回 ["chinese","canada"]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:37:41.777

您无法通过单个查询来解决此问题。您必须维护所有标签的全局列表或集合，以便使用正则表达式有效地搜索它们，或者您需要遍历所有文档以单独匹配每个文档的标签。

# coded-ui-tests - 是否有使用编码 UI 捕获 SQL 数据表的方法？

> ID：10827086
> 
> 赞同：0
> 
> 时间：2012-05-31T03:31:04.987
> 
> 标签：coded-ui-tests

在 SQL Server 上运行查询后，我想获取数据表中每个单元格的值，但测试生成器无法捕获单元格或表的值。有没有为此目的的扩展？

谢谢，兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:13:59.617

我对您为什么要这样做感到困惑，使用代码 UI 测试数据库查询效率非常低。您最好编写一个单元测试来检查查询返回的值。

如果由于某种原因您无法编写单元测试，或者无法在 SQL Server 中测试实际数据表。您可以通过在单元格内单击来获取数据表中的值，然后搜索编辑框或标签并从中获取值，然后使用 sendkeys 导航数据表。

您通常可以通过在 UITest Builder 中使用 Windows Key + I 来获取编辑框的搜索属性。另请注意，编辑框可能仅在 Coded UI 获得焦点时才可见（因此单击），并且对网格的单击将指向控件中的特定点，并且可能对屏幕分辨率的变化很敏感。

# ios - 如何将 libphonenumber 的 base.js 文件嵌入到 iOS 项目中

> ID：10827087
> 
> 赞同：4
> 
> 时间：2012-05-31T03:31:09.410
> 
> 标签：ios

我想在我的 iPhone 项目中使用**libphonenumber 。**

对于*demo.html*（javascript 分支），base.js 是一个远程文件。

我希望 base.js 可以作为本地文件嵌入到我的项目中。

从：

```
<script src="http://closure-library.googlecode.com/svn/trunk/closure/goog/base.js"></script> 
```

改成：

```
 <script src="base.js"> 
```

但是当我下载 base.js 并将其放入我的项目中时。demo.html不再起作用*。*

那么如何使用 base.js 呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T09:05:11.643

应该`<script src="base.js" />`

# matlab - 免费能源强化学习实施

> ID：10827089
> 
> 赞同：8
> 
> 时间：2012-05-31T03:31:31.020
> 
> 标签：matlab, machine-learning, artificial-intelligence, bayesian-networks, reinforcement-learning

我一直在尝试实现[此处](http://www.cs.toronto.edu/~hinton/absps/sallans04a.pdf)描述的算法，然后在同一篇论文中描述的“大型动作任务”上对其进行测试。

**算法概述：**

![在此处输入图像描述](../Images/59ba8f6358f76eec25cc179adf21396e.png)

简而言之，该算法使用如下所示形式的 RBM 通过更改其权重来解决强化学习问题，使得网络配置的自由能等于为该状态动作对给出的奖励信号。

为了选择一个动作，该算法在保持状态变量固定的同时执行吉布斯采样。如果有足够的时间，这会产生具有最低自由能的动作，从而产生给定状态的最高奖励。

**大动作任务概述：**

![在此处输入图像描述](../Images/2a33ff5068a6a1dc8f44dd067ba5f2b2.png)

**作者的实施指南概述：**

> 具有 13 个隐藏变量的受限玻尔兹曼机在具有 12 位状态空间和 40 位动作空间的大型动作任务的实例化上进行了训练。随机选择了 13 个关键状态。该网络运行了 12000 个动作，学习率从 0.1 到 0.01，温度从 1.0 到 0.1 在训练过程中呈指数增长。每次迭代都以随机状态初始化。每个动作选择由 100 次 Gibbs 抽样迭代组成。

**重要省略的细节：**

*   是否需要偏置单元？
*   需要减重吗？如果是这样，L1 还是 L2？
*   权重和/或激活是否需要稀疏约束？
*   梯度下降是否有修改？（例如动量）
*   这些附加机制需要哪些元参数？

**我的实现：**

我最初假设作者没有使用指南中描述的机制，所以我尝试在没有偏差单元的情况下训练网络。这导致了近乎偶然的表现，并且是我的第一个线索，即使用的某些机制必须被作者认为是“显而易见的”，因此被忽略了。

我玩弄了上面提到的各种省略的机制，并通过使用获得了最好的结果：

*   softmax 隐藏单元
*   0.9 的动量（0.5 直到第 5 次迭代）
*   隐藏层和可见层的偏置单元
*   学习率是作者列出的学习率的 1/100。
*   l2 重量衰减 0.0002

但即使进行了所有这些修改，在 12000 次迭代后，我在任务上的表现通常在平均奖励 28 左右。

**每次迭代的代码：**

```
 %%%%%%%%% START POSITIVE PHASE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    data = [batchdata(:,:,(batch)) rand(1,numactiondims)>.5];
    poshidprobs = softmax(data*vishid + hidbiases);

    %%%%%%%%% END OF POSITIVE PHASE  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    hidstates = softmax_sample(poshidprobs);

    %%%%%%%%% START ACTION SELECTION PHASE  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    if test
        [negaction poshidprobs] = choose_factored_action(data(1:numdims),hidstates,vishid,hidbiases,visbiases,cdsteps,0);
    else
        [negaction poshidprobs] = choose_factored_action(data(1:numdims),hidstates,vishid,hidbiases,visbiases,cdsteps,temp);
    end

    data(numdims+1:end) = negaction > rand(numcases,numactiondims);

    if mod(batch,100) == 1
        disp(poshidprobs);
        disp(min(~xor(repmat(correct_action(:,(batch)),1,size(key_actions,2)), key_actions(:,:))));
    end

    posprods    = data' * poshidprobs;
    poshidact   = poshidprobs;
    posvisact = data;

    %%%%%%%%% END OF ACTION SELECTION PHASE %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    if batch>5,
        momentum=.9;
    else
        momentum=.5;
    end;

    %%%%%%%%% UPDATE WEIGHTS AND BIASES %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    F = calcF_softmax2(data,vishid,hidbiases,visbiases,temp);

    Q = -F;
    action = data(numdims+1:end);
    reward = maxreward - sum(abs(correct_action(:,(batch))' - action));
    if correct_action(:,(batch)) == correct_action(:,1)
        reward_dataA = [reward_dataA reward];
        Q_A = [Q_A Q];
    else
        reward_dataB = [reward_dataB reward];
        Q_B = [Q_B Q];
    end
    reward_error = sum(reward - Q);
    rewardsum = rewardsum + reward;
    errsum = errsum + abs(reward_error);
    error_data(ind) = reward_error;
    reward_data(ind) = reward;
    Q_data(ind) = Q;

    vishidinc = momentum*vishidinc + ...
        epsilonw*( (posprods*reward_error)/numcases - weightcost*vishid);
    visbiasinc = momentum*visbiasinc + (epsilonvb/numcases)*((posvisact)*reward_error - weightcost*visbiases);
    hidbiasinc = momentum*hidbiasinc + (epsilonhb/numcases)*((poshidact)*reward_error - weightcost*hidbiases);

    vishid = vishid + vishidinc;
    hidbiases = hidbiases + hidbiasinc;
    visbiases = visbiases + visbiasinc;

    %%%%%%%%%%%%%%%% END OF UPDATES %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
```

**我要的是什么：**

所以，如果你们中的任何人都能让这个算法正常工作（作者声称在 12000 次迭代后平均获得约 40 个奖励），我将非常感激。

如果我的代码似乎在做一些明显错误的事情，那么引起注意也将构成一个很好的答案。

我希望作者遗漏的内容对于比我有更多基于能量的学习经验的人来说确实是显而易见的，在这种情况下，只需指出工作实施中需要包含的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T12:38:31.280

1.  论文中的算法看起来很奇怪。他们使用一种增加连接强度的赫比学习，但没有衰减它们的机制。相比之下，常规 CD 将错误幻想的能量推高，平衡整体活动。我推测你将需要强大的稀缺性调节和/或重量衰减。
2.  偏见永远不会伤害:)
3.  动量和其他花哨的东西可能会加速，但通常不是必需的。
4.  为什么要在隐藏层上使用 softmax？它应该只是sigmoid吗？

# sql-server - 在 F# 3 中设置 SQL Server DateTime 值

> ID：10827090
> 
> 赞同：0
> 
> 时间：2012-05-31T03:31:33.387
> 
> 标签：sql-server, f#, type-providers, f#-3.0

我有一个使用我在 Visual Studio 11 中构建的 typeproviders 的 F# 3.0 程序。我有一个 SQL Server 2012 数据库，其中包含一个名为 Article 的表，该表有一个 DateTime 列 Harvest_Time（非空）。

在我的程序中，我有：

```
let newrec = new dbSchema.ServiceTypes.Article( Article_Id = System.Convert.ToInt64(ai))
newrec.Url <- art.Item("url").InnerText
newrec.Source <- art.Item("source").InnerText
newrec.Harvest_time = DateTime.Now
db.Article.InsertOnSubmit(newrec)
db.DataContext.SubmitChanges() 
```

失败是因为未设置 Harvest_time 列的值。如果我注释掉该行，则插入记录就好了。失败发生在 SubmitChanges() 上，它抱怨未设置日期时间值。不会产生其他错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T03:50:13.923

我看到了错误：

在将值分配给 newrec.Harvest_time 时，我应该使用 <- 而不是 =。

我是 F# 新手（我主要是 C# 编码器），只是犯了一个愚蠢的错误。

程序现在运行良好。

# iphone - UITextView 在粘贴文本时视觉上改变内容位置

> ID：10827091
> 
> 赞同：5
> 
> 时间：2012-05-31T03:31:33.597
> 
> 标签：iphone, objective-c, ios, uitextview

我有一个 UITextView，它被设计为在需要时放大以适应 contentView。但是，当我粘贴一段文本时，它会将内容的起点和终点垂直放置在错误的位置。输入或删除字符会将其重置回正确的位置。

任何想法为什么会这样？

```
-(void)textViewDidChange:(UITextView *)textView {
    self.textView.frame = CGRectMake(
        self.textView.frame.origin.x,
        self.textView.frame.origin.y,
        self.textView.frame.size.width,
        self.textView.contentSize.height + HEADER_ADDITIONAL_HEIGHT);

    self.textView.contentOffset = CGPointMake(0, 0);

    self.previousContentSize = textView.contentSize;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-26T14:04:12.077

当我使用：

```
textView.contentSize = textView.frame.size;  
textView.contentOffset = CGPointZero; 
```

它解决了我的问题，但产生了一个新问题，我们有时会在输入或删除文本时出现奇怪的滚动。所以，我用了这个：

```
textView.contentSize = CGSizeMake( textView.contentSize.width,
                                   textView.contentSize.height+1); 
```

这也解决了这个问题。我认为我们在这里都需要的是每当`contentSize`textview 更改时我们得到的效果。不幸的是，我不知道这种效果是什么。如果有人知道，请告诉。

更新：我找到了一种可以用来解决问题的方法（我用它来解决我的问题）。你可以让 NSLayoutMAnager 刷新整个布局：

```
[textView.textStorage edited:NSTextStorageEditedCharacters range:NSMakeRange(0, textView.textStorage.length) changeInLength:0]; 
```

NSLayoutManager 试图避免刷新布局，因为它耗时且需要大量工作，因此它设置为仅在绝对必要时（懒惰地）执行。有许多`invalidateLayout`与此类相关的函数，但它们在调用时都不会导致实际的重新布局。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-29T20:46:19.777

我知道这来晚了，但我遇到了这个问题，并认为我应该分享我的想法，以防其他人发现自己处于同样的情况。

您走在正确的轨道上，但是`textViewDidChange:`您错过了一件重要的事情：在更新帧高度后设置 contentSize 。

```
// I used 0.f for the height, but you can use another value because according to the docs:
//  "the actual bounding rectangle returned by this method can be larger 
//    than the constraints if additional space is needed to render the entire 
//    string. Typically, the renderer preserves the width constraint and 
//    adjusts the height constraint as needed."
CGSize size = CGSizeMake(textview.frame.size.width, 0.f);
CGRect rect = [string boundingRectWithSize:size
                                   options:OptionsYouNeedIfAny // NSStringDrawingOptions
                                   context:nil];

// Where MinTextViewHeight is the smallest height for a textView that 
//   your design can handle
CGFloat height = MAX(ceilf(rect.size.height), MinTextViewHeight); 
CGRect rect = textView.frame;
rect.size.height = height;
textView.frame = rect;

// Adjusting the textView contentSize after updating the frame height is one of the things you were missing
textView.contentSize = textView.frame.size;
textView.contentOffset = CGPointZero; 
```

我希望这有帮助！

[有关](https://developer.apple.com/library/ios/documentation/uikit/reference/NSAttributedString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSAttributedString/boundingRectWithSize%3aoptions%3acontext%3a)使用`boundingRectWithSize:options:context:`.

# clojure - JVM 与 CLR 上的 Clojure 性能

> ID：10827093
> 
> 赞同：12
> 
> 时间：2012-05-31T03:32:29.460
> 
> 标签：clojure, clojureclr

JVM 与 CLR 上的 Clojure 是否有性能比较？或者也许有人同时使用了性能敏感的代码可以给出一些轶事评论？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-31T16:36:14.720

Clojure JVM 的性能优于 Clojure CLR。我没有明确的基准可以指出，但我在两种环境中进行编译和运行测试都有很多经验，而且区别很明显。

造成这种差异的因素有很多。有些正在研究中。有些与 JVM 与 CLR 性能差异有关，因此超出了 ClojureCLR 开发人员的解决方法。

(1) 将 Clojure 代码编译为平台中间语言。
在最基本的层面上，生成的 IL 几乎是相同的。但是，动态语言运行时的某些限制所强制的设计选择会导致每个函数定义创建一个额外的类和函数调用以进行额外的方法调用。ClojureCLR 1.4 版（即将推出）消除了在大多数代码生成中使用 DLR。（DLR 仍将用于 CLR 互操作和多态内联缓存。）此时，生成的代码将与 JVM 版本基本相同。启动时间减少了 10%，简单的基准测试显示比 1.3 版改进了 4-16%。更多细节[在这里](http://clojureclr.blogspot.com/2012/03/code-gen-redo-preview.html)。

(2) 启动时间 Clojure JVM 的启动速度明显快于 Clojure CLR。其中大部分可以追溯到 JVM 能够选择性地加载类文件（相对于 CLR 加载整个程序集）以及 JIT 编译发生时间的差异。但是，如果 ClojureCLR 是 NGEN 的，那么启动时间会*非常*快。更多细节[在这里](http://clojureclr.blogspot.com/2011/12/using-ngen-to-improve-clojureclr.html)。

(3) JVM 与 CLR 的性能 一些人关注使 ClojureJVM 与 HotSpot 编译器优化一起工作。我没有明确的证据，但我猜 HotSpot 只是在编译的 Clojure 代码中的内联与 CLR JITter 相比做得更好。公平地说，没有人关注如何让 ClojureCLR 更好地利用 CLR JITter。

ClojureCLR 1.4 的发布将为一些基准测试提供一个很好的机会。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T03:54:52.597

我还没有真正使用过 CLR 版本，因此无法完全回答您的问题。

然而值得注意的是，到目前为止，大部分优化/开发工作都进入了 Clojure 的主线 JVM 版本。因此，您可以预期 Clojure 的 JVM 版本目前在大多数情况下性能要好得多。

JVM 上的 Clojure 已经是最快的动态类型语言之一 - 从[基准测试游戏](http://benchmarksgame.alioth.debian.org/u64q/which-programs-are-fastest.html)页面 Common Lisp 是唯一（稍微）更快的动态类型语言。

随着时间的推移，我预计 Clojure JVM/CLR 的差距会缩小，因为这两个版本都倾向于其主机平台的性能。但现在，如果性能是您最关心的问题，我肯定会推荐 JVM 版本（以及性能，JVM 版本也可能在整体成熟度、库可用性和跨平台支持方面更好）。

# java - AJAX 与 Spring MVC

> ID：10827096
> 
> 赞同：5
> 
> 时间：2012-05-31T03:32:59.833
> 
> 标签：java, ajax, spring, web-applications, spring-mvc

哪些 AJAX 库适用于 Spring MVC？

我是使用 Spring 和 Spring MVC 开发的新手。从[http://www.springsource.org](http://www.springsource.org)的文档中，我还不了解 Spring MVC 内置了哪些 AJAX 框架，或者建议哪些第三方 API 和工具可以很好地用于开发 Spring MVC 应用程序。

所有建议都表示赞赏。

我确实搜索了以前关于这个主题的 SO 讨论，但我没有得到任何明确的方向。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T03:46:10.680

Spring 非常容易与 Ajax 一起使用。如果 Jackson 在 classpath 上，Spring 可以使用它将 JSON 返回给调用者。像这样的东西：

```
@RequestMapping( "/my/path" )
public @ResponseBody MyObject doSomething( @RequestParam Long myVal ) {
    MyObject result = new MyObject( myVal );
    // do something interesting
    return result;
} 
```

`http://myserver/my/path`然后，您可以使用 jQuery（或您喜欢的其他 javascript 库）向生成的 JSON 对象发出请求并处理。

Google 的 GSON 也很容易使用。如：

```
@RequestMapping( "/my/path" )
public ResponseEntity<String> MyObject doSomething( @RequestParam Long myVal ) {
    MyObject result = new MyObject( myVal );
    // do something interesting
    HttpHeaders headers = new HttpHeaders();
    headers.set(  "Content-Type", "application/json" );
    String json = gson.toJson( result );
    return new ResponseEntity<String>( json, headers, HttpStatus.CREATED );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T14:04:47.373

请通过以下链接。它清楚地解释了它需要如何完成。

[http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-17T06:52:28.320

这是让 Spring MVC 与 ZK UI 组件一起工作的另一种方法 - [Rich Web Application with Spring MVC CRUD Demo](http://blog.zkoss.org/index.php/2015/11/17/rich-web-application-with-spring-mvc-crud-demo/)

在那篇文章中，它使用 Spring MVC 控制器与 ZK UI 组件进行通信。（全部在 Java 代码中）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T04:26:58.533

Spring 本身并不处理 Javascript 框架。我不知道 Springsource 是否支持任何特定的 Javascript 框架，或者它们是否不可知论。Ajax 实际上只是一种由浏览器技术结合 Javascript 语言实现的技术，重要的是能够在客户端和服务器之间传递某种序列化数据。编写自己的基本 AJAX 框架并不难，甚至可以设计自己的数据编码而不使用 JSON 或 XML。采用现有的框架和标准是明智的，因为您不想维护大量辅助代码或担心它，而是专注于您要解决的问题。这就是为什么有许多 Javascript 框架可以执行异步请求，并且有些框架具有一些非常好的特性和功能，可以让您的生活更轻松，例如 jQuery 提供了出色的 DOM 操作和与浏览器无关的功能。我认为将 Spring MVC 与服务器端的 Jackson JSON 库和客户端的 jQuery 结合使用是非常好的端到端解决方案的基础。我在 jQuery 和 jQuery-UI 方面取得了很大的成功，但其他 Javascript 框架也可以正常工作。对于复杂的应用程序，您基本上最终需要相当于客户端的第二个 MVC，因为您需要 UI 小部件之间的分解以及必须在客户端和服务器之间移动的数据。例如，jQuery 提供了出色的 DOM 操作和与浏览器无关的功能。我认为将 Spring MVC 与服务器端的 Jackson JSON 库和客户端的 jQuery 结合使用是非常好的端到端解决方案的基础。我在 jQuery 和 jQuery-UI 方面取得了很大的成功，但其他 Javascript 框架也可以正常工作。对于复杂的应用程序，您基本上最终需要相当于客户端的第二个 MVC，因为您需要 UI 小部件之间的分解以及必须在客户端和服务器之间移动的数据。例如，jQuery 提供了出色的 DOM 操作和与浏览器无关的功能。我认为将 Spring MVC 与服务器端的 Jackson JSON 库和客户端的 jQuery 结合使用是非常好的端到端解决方案的基础。我在 jQuery 和 jQuery-UI 方面取得了很大的成功，但其他 Javascript 框架也可以正常工作。对于复杂的应用程序，您基本上最终需要相当于客户端的第二个 MVC，因为您需要 UI 小部件之间的分解以及必须在客户端和服务器之间移动的数据。我在 jQuery 和 jQuery-UI 方面取得了很大的成功，但其他 Javascript 框架也可以正常工作。对于复杂的应用程序，您基本上最终需要相当于客户端的第二个 MVC，因为您需要 UI 小部件之间的分解以及必须在客户端和服务器之间移动的数据。我在 jQuery 和 jQuery-UI 方面取得了很大的成功，但其他 Javascript 框架也可以正常工作。对于复杂的应用程序，您基本上最终需要相当于客户端的第二个 MVC，因为您需要 UI 小部件之间的分解以及必须在客户端和服务器之间移动的数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T04:32:20.560

Spring JS 支持 Dojo JavaScript 框架。 [春天](http://static.springsource.org/spring-webflow/docs/2.0.x/reference/html/ch11.html)

# database - CQRS 设计模式更新

> ID：10827098
> 
> 赞同：0
> 
> 时间：2012-05-31T03:33:47.417
> 
> 标签：database, design-patterns, cqrs

我正在寻找实现 CQRS 模式。对于更新读数据库的过程，是最好使用windows服务，还是在更新数据库中创建新记录的时候更新视图？最好使用触发器还是其他一些过程？我已经看到了几种方法，但还没有下定决心实现这一目标的最佳方法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:47:07.467

我个人喜欢使用消息传递来解决这类问题。

您的命令在处理它们时会产生事件，如果您使用消息传递来发布事件，一个或多个下游读取服务可以订阅事件并处理它们以更新读取模型。

在这种情况下消息传递很好的原因是它允许您将写入端和读取端相互分离。此外，如果您发现需要它，它还可以让您轻松拥有多个订阅者。此外，使用 MSMQ 等持久排队系统进行消息传递可以重试失败的消息。这也意味着您可以离线读取模型（用于更新等），当它恢复时，它可以处理队列中的所有事件。

我不是关系数据库中触发器的朋友，但我想它一定很难测试。触发器会在不属于它的地方引入路由逻辑。难道也是如果触发动作失败了，整个写事务就回滚了？触发器可能是最不利的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:53:45.393

这取决于您的应用程序对最终一致性的容忍度。

如果您的应用程序在读取数据 5 分钟前没有问题，则无需在每次写入数据更改时进行非规范化。在这种情况下，例如每 n 分钟启动一次或仅在 CPU 消耗低于某个阈值时启动的后台服务可能是一个很好的解决方案。

另一方面，如果您的应用程序对时间敏感，例如在状态频繁变化、机器监控、证券交易所数据等情况下，那么您将希望尽可能降低延迟并在现场进行非规范化——也就是说，在进程中或至少是实时的。因此，在这种情况下，您可以选择在持续运行的进程中运行非规范化程序，或者直接在代码中将它们添加到事件处理程序链中。

你的来电。

# sql - 计算每个数据唯一的总元素

> ID：10827099
> 
> 赞同：0
> 
> 时间：2012-05-31T03:34:13.970
> 
> 标签：sql

这是情况。我创建了一个包含以下所有信息的视图

```
CREATE VIEW view2 AS
SELECT activity_id,
       subject_code,
       academic_period_code,
       DATEDIFF(HOUR,time_start,time_end) AS duration
FROM   activity 
```

好的，现在我正在尝试进行一个可以生成两列的查询，1\. 一列带有主题代码，并且 Academic_period 代码连接到一列 2\. 第二列包含该学术中每个主题的总持续时间时期

就像这样：academic_period 121 中的 CS123 总共有 5 个小时的活动。我对第一列很好，但我一直想知道如何获得第二列。如果我使用 SUM 函数，它只会对列本身进行总计，所以我不确定如何处理这个问题。

样本数据

```
Subject Code   Activity_code    Academic_Period_Code   Duration
CS123          1                 121                   2
CS123          2                 121                   3
CS123          3                 122                   2
CS123          4                 122                   2 
```

我做了什么？]

```
SELECT subject_code + academic_period_code AS subject,
       (I think I have to do a subquery but I'm not sure how its suppose to work out) AS total_activity_time 
```

从视图2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:38:20.970

假设 SQL Server 并且我了解您在寻找什么：

```
select
    subject_code + academic_period_code as [Type],
    sum(duration) as duration
from view2
group by
    subject_code + academic_period_code; 
```

应该把你带到我认为你想要到达的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:19:54.753

```
select
    subject_code + academic_period_code as subjects,
    sum(duration) as duration
from view2
group by
    subject_code, academic_period_code; 
```

# entity-framework - 如果您更改项目命名空间，是否可以让实体框架识别以前的迁移？

> ID：10827100
> 
> 赞同：4
> 
> 时间：2012-05-31T03:34:25.647
> 
> 标签：entity-framework, entity-framework-4.3, entity-framework-migrations

让我分解一下场景：

1.  我使用代码优先方法创建我的模型/映射

2.  我为`MigrateDatabaseToLatestVersion`

3.  我使用创建迁移`add-migration`

这会创建一个`Configuration`像这样的类：

```
namespace MyApp.Migrations
{
    internal sealed class ConfigurationInfo : DbMigrationsConfiguration<MyContext>
    {
    }
} 
```

我可以运行我的代码，数据库将毫无问题地自动创建。

现在我进入并更改我的`Configuration`班级所在的命名空间：

```
namespace MyApp.Data.Migrations // <-- new namespace
{
    internal sealed class ConfigurationInfo : DbMigrationsConfiguration<MyContext>
    {
    }
} 
```

我删除数据库并重新运行代码。我现在收到这条消息：

> 无法更新数据库以匹配当前模型，因为存在待处理的更改并且自动迁移已禁用。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。

当我重命名`Configuration`位于它下面的命名空间时，它不再识别以前创建的任何迁移。

我做了很多实验，当我`MigrationsNamespace`在构造函数中设置等于旧值时，`Configuration`如下所示：

```
 namespace MyApp.Data.Migrations
{
    internal sealed class ConfigurationInfo : DbMigrationsConfiguration<MyContext>
    {
        public ConfigurationInfo()
        {
            AutomaticMigrationsEnabled = false;
            MigrationsNamespace = "MyApp.Migrations"; // <-- this works
        }
    }
} 
```

现在一切正常，除了之前创建的所有迁移都需要在旧命名空间下才能工作，以及所有未来的迁移（它们会自动获取旧命名空间）。

这种解决方法并没有真正做到我想做的事情，它能够重构我的代码并且仍然让实体框架识别我以前的迁移。

如果我的项目名称发生更改，但我有多个安装依赖于 MigrateDatabaseToLatestVersion 数据库初始化程序来接收对我的代码的架构更改，该怎么办？

启用迁移后，我是否被锁定为我的 DAL 使用相同的命名空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:58:59.627

这是我自己的错，我手动进行了重构，并认为我已经更改了项目中所有文件的命名空间，但是我忘记扩展迁移文件并更新“设计器”文件！

当我在配置文件、迁移文件和迁移设计器文件之间设置相同的命名空间时，一切正常，我可以随时更改命名空间，而 EF 不会丢失旧迁移的踪迹。

# php - 来自孩子的PHP私有变量访问

> ID：10827101
> 
> 赞同：7
> 
> 时间：2012-05-31T03:34:30.437
> 
> 标签：php, oop, class, private, protected

所以我正在尝试解决我在设计 PHP 类时遇到的问题。我创建了一个基类，并分配了私有变量。我有扩展这个基类的子类，它们通过基类的函数对这些私有变量进行引用和更改。这是一个示例，请记住，我仍然对方法/变量之间的区别感到困惑`private`（`protected`如果我做错了，请告诉我！）：

基类.php

```
<?php
class Base {
    private $test;
    public function __construct(){
        require('sub.class.php');
        $sub = new Sub;
        echo($this->getTest());
    }
    public function getTest(){
        return $this->test;
    }
    protected function setTest($value){
        $this->test = $value;
    }
}
?> 
```

子类.php

```
<?php
class Sub extends Base {
    public function __construct(){
        parent::setTest('hello!');
    }
}
?> 
```

所以我希望结果会`hello!`打印在屏幕上——而不是什么都没有。我可能对课程有根本的误解，或者我只是做错了什么。非常感谢任何指导！谢谢。

编辑：

感谢所有提供答案的人-我认为，尽管有出色的解决方案，但子类实际上并不是我需要的-似乎委托类在这一点上可能更有用，因为我真的不需要参考 Base其他类中的函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T03:42:58.013

应该是这样的：

base.class.php：

```
class Base {
    private $test;
    public function __construct() {
        echo $this->getTest();
    }
    public function getTest() {
        return $this->test;
    }
    protected function setTest($value) {
        $this->test = $value;
    }
} 
```

子类.php：

```
class Sub extends Base {
    public function __construct() {
        parent::setTest('hello!');  // Or, $this->setTest('hello!');
        parent::__construct();
    }
} 
```

主要代码：

```
require 'base.class.php';
require 'sub.class.php';

$sub = new Sub;  // Will print: hello! 
```

# autohotkey - 有人可以帮我一个 AutoHotKey 脚本吗？

> ID：10827102
> 
> 赞同：-1
> 
> 时间：2012-05-31T03:34:35.653
> 
> 标签：autohotkey

我已经阅读了它的帮助和指南，但我就是想不通。我想要做的就是创建一个热键，当按下它时会移动我的鼠标，直到再次按下热键。谁能告诉我该怎么做？它应该很简单，但显然我错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T03:57:21.557

这几乎是有史以来最烦人的热键，但你去吧（热键是`Ctrl`++ `Alt`）`C`；

```
#MaxThreadsPerHotkey 3
^!c::
#MaxThreadsPerHotkey 1
if DoMouseMove
{
   DoMouseMove := false
   return
}

DoMouseMove := true
Loop
{
   Sleep 100
   Random, randX, 1, 1028
   Random, randY, 1, 800
   MouseMove, randX, randY, 25
   Sleep, 100

   if not DoMouseMove 
      break
}
DoMouseMove := false
return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:21:03.600

我会提出我的解决方案。

```
pause::
If (Toggle := !Toggle) ; Toggle the value True/False
    {
        ToolTip Mouse Mover,A_ScreenWidth/2,0 ; Show that Mouse Mover is active
        SetTimer MoveMouse, 1000 ; 1000 ms = 1 sec. Every minute (60000 ms) is probably enough.
    }
Else
    {
        Tooltip ;  Turn Mouse Mover alert window off
        SetTimer MoveMouse, Off ; Turn the timer off
    }
return

MoveMouse:
    MouseMove, 1, 0, 1, R ;Move the mouse one pixel to the right
    Sleep, 50 ; Wait 50 ms. Not realy required, but makes the move visible
    MouseMove, -1, 0, 1, R ;Move the mouse back one pixel
return 
```

# jquery - Jquery 的 Ajax 自动完成：OnSelect 函数重定向到 url

> ID：10827103
> 
> 赞同：0
> 
> 时间：2012-05-31T03:34:46.723
> 
> 标签：jquery, python, google-app-engine, autocomplete

嘿，我在我的 GAE 应用程序中使用 Tomas (http://www.devbridge.com/projects/autocomplete/jquery/) 的 Ajax Autocomplete for Jquery。我有一个城市搜索模块，其中一个人键入一个城市，可供选择的城市名称列表出现在下拉列表中。我正在按照自动完成库的要求返回一个 json 响应。我可以在下拉列表中显示城市列表，但是我希望用户在从列表中选择一个选项时被重定向到特定的 url。我还返回一个数据对象，它是 json 结果中的可选参数。所以现在我要返回三件事。

```
1\. 'query': 'Ade'
2\. 'suggestions': ['Adelaide', 'Adelaide Hills', 'Adelia Maria']
3\. 'data': [{'Adelaide': '/Oceania/Australia/Adelaide'},{'Adelaide Hills':'/Oceania/Australia/Adelaide Hills'},{'Adelia Maria':'/Oceania/Australia/Adelia Maria'}] 
```

这是我发送 json 结果的代码：

```
class SearchCity(TemplateHandler):
  def get(self):
    results, data, url = [], [], ''
    word = self.request.get('query')
    search = models.City.all().filter('name >=', word.capitalize()).filter('name <', word.capitalize()     + u'\ufffd')
    for res in search:
      url = '/' + res.country.continent.name + '/' + res.country.url_name + '/' + res.name + '/'
      results.append(res.name)
      data.append({res.name:url})
    json_results = {
     'query' : word, 
     'suggestions' : results,
     'data': data
    }
  self.response.out.write(json.dumps(json_results)) 
```

这是我试图触发自动完成功能的Javascript：

```
<script type="text/javascript">
  //<![CDATA[
   var a = $('#search-city').autocomplete({
     serviceUrl:'/search_city',
     delimiter: /(,|;)\s*/, // regex or character
     maxHeight:140,
     width:170,
     zIndex: 9999,
     deferRequestBy: 0, //miliseconds
     noCache: false, //default is false, set to true to disable caching
   });
  //]]>
</script> 
```

现在根据插件作者的说法，我们可以使用类似这样的回调函数：

```
// callback function:
onSelect: function(value, data){ alert('You selected: ' + value + ', ' + data); }, 
```

问题：

1.) 我如何访问具有用户选择的键的字典中 url 的值并将用户重定向到该 url ？

2.) 如果我只是在“数据”对象中传递 url 列表，我是否能够将正确的名称链接到正确的 url？

3.) 另外，如果建议列表中没有结果，我有没有办法显示“未找到匹配项”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:55:34.450

抱歉，这就像更改一样简单：

```
data.append({res.name:url}) 
```

到

```
data.append(url) 
```

并将以下内容添加到 JS 配置中：

```
onSelect: function(value, data){ window.location.replace(data); }, 
```

# android - 如何在广播接收器的 onreceive() 中一次显示一个吐司，而不是一次全部显示

> ID：10827105
> 
> 赞同：0
> 
> 时间：2012-05-31T03:35:00.030
> 
> 标签：android, bluetooth, broadcastreceiver, wifi, toast

我在广播接收器的 OnReceive() 中限制 toast 消息时遇到了一个奇怪的问题

我已经编写了用于在启用/禁用 wifi 和蓝牙时显示 toast 的代码

但是如果我启用/禁用 wifi，也会出现蓝牙吐司，反之亦然，即当我启用/禁用蓝牙和 wifi 时，所有 4 条吐司消息都会一一出现

我想要做的是我想在 wifi 关闭/打开时显示一个 toast 并且单独显示蓝牙

像

```
 if WIFI is on  -  "wifi enabled"
 if WIFI is off -   "wifi disabled"
If bluetooth is on - "Bluetooth enabled"
If bluetooth is off - "Bluetooth disabled" 
```

一次只吐司不是全部

如何解决这个问题？

这是我的代码

```
 public class MyService extends BroadcastReceiver {
private WifiManager wifiManager;
@Override
public void onReceive(Context context, Intent arg1) {
    // TODO Auto-generated method stub

    wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
      BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();

    if(wifiManager.isWifiEnabled()){  
        Toast.makeText(context.getApplicationContext(), "WIFI  Enabled", Toast.LENGTH_LONG).show();
    }else {    
        Toast.makeText(context.getApplicationContext(), "WIFI Disabled", Toast.LENGTH_LONG).show();
    }  
    if(adapter.isEnabled()){

        Toast.makeText(context.getApplicationContext(), "Bluetooth Enabled", Toast.LENGTH_LONG).show();

    }else {    
        Toast.makeText(context.getApplicationContext(), " Bluetooth Disabled", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:47:20.820

每当 Wifi 状态发生变化时，您的接收器就会被调用。并且您显示了 Wifi 和蓝牙的 Toast。所以它显示了两个 toasts。它不像启用或禁用蓝牙时那样您的 wifi 没有启用或禁用。wifi 和蓝牙具有启用或禁用状态。

要解决您的问题，您可以尝试

```
public void onReceive(Context context, Intent arg1) {
    // TODO Auto-generated method stub
    if(arg1.getAction().equals(WifiManager.WIFI_STATE_CHANGED_ACTION))  {  
            wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
            if(wifiManager.getWifiState()==WifiManager.WIFI_STATE_ENABLED||wifiManager.getWifiState()==WifiManager.WIFI_STATE_ENABLING){  
                  Toast.makeText(context.getApplicationContext(), "WIFI  Enabled", Toast.LENGTH_LONG).show();
            }else {    
                  Toast.makeText(context.getApplicationContext(), "WIFI Disabled", Toast.LENGTH_LONG).show();
            }
    }else {  
            BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();
            if(adapter.isEnabled()){
                  Toast.makeText(context.getApplicationContext(), "Bluetooth Enabled", Toast.LENGTH_LONG).show();

            }else {    
                  Toast.makeText(context.getApplicationContext(), " Bluetooth Disabled", Toast.LENGTH_LONG).show();
            }  
     }            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:00:23.643

在您的代码中，您有两个不同的**if**条件，这是您显示两个 Toast 的唯一原因。在这里查看我更新的代码，它将解决您的问题。

```
public class MyService extends BroadcastReceiver 
{
    private WifiManager wifiManager;
    @Override
    public void onReceive(Context context, Intent arg1) 
    {
        // TODO Auto-generated method stub
        wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
        BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();

        if(wifiManager.isWifiEnabled() )
        {  
            Toast.makeText(context.getApplicationContext(), "WIFI  Enabled", Toast.LENGTH_LONG).show();
        }
        else if (!wifiManager.isWifiEnabled() ) 
        {    
            Toast.makeText(context.getApplicationContext(), "WIFI Disabled", Toast.LENGTH_LONG).show();
        }  
        else if(adapter.isEnabled() )
        {
            Toast.makeText(context.getApplicationContext(), "Bluetooth Enabled", Toast.LENGTH_LONG).show();
        }
        else if  (!adapter.isEnabled() )
        {    
            Toast.makeText(context.getApplicationContext(), " Bluetooth Disabled", Toast.LENGTH_LONG).show();
        }  
    }
} 
```

# core-data - NSManagedObject 的 objectID：是否一致？

> ID：10827107
> 
> 赞同：10
> 
> 时间：2012-05-31T03:35:16.963
> 
> 标签：core-data, nsmanagedobject

我需要一些唯一且一致的 ID 来索引数据，我尝试使用 NSManagedObject 的 objectID，但看起来对于同一个实体，它的 objectID 不断变化，有人知道这是否不一致吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-31T03:54:46.330

除非您尚未保存新对象，否则 objectID 是唯一且一致的。

引用[核心数据编程指南](https://developer.apple.com/library/watchos/documentation/Cocoa/Conceptual/CoreData/index.html)：

> **托管对象 ID 和 URI**
> 
> NSManagedObjectID 对象是托管对象的通用标识符，并为核心数据框架中的唯一性提供了基础。受管对象 ID 在单个应用程序中的受管对象上下文之间和多个应用程序（如在分布式系统中）中唯一标识相同的受管对象。与数据库中的主键一样，标识符包含准确描述持久存储中的对象所需的信息，尽管详细信息并未公开。该框架完全封装了“外部”信息，并呈现了一个干净的面向对象接口。
> 
> ```
> NSManagedObjectID *moID = [managedObject objectID]; 
> ```
> 
> 对象 ID 有两种形式。首次创建托管对象时，Core Data 为其分配一个临时 ID；只有当它被保存到持久存储时，Core Data 才会为托管对象分配一个永久 ID。您可以轻松发现 ID 是否是临时的：
> 
> ```
> BOOL isTemporary = [[managedObject objectID] isTemporaryID]; 
> ```

# mongoose - Mongoose：检查对象是否为猫鼬对象

> ID：10827108
> 
> 赞同：30
> 
> 时间：2012-05-31T03:35:34.437
> 
> 标签：mongoose

任何人都知道检查对象是否是猫鼬对象的最简单方法是什么？我是否最好检查是否定义了 toObject() 或者是否有更有效的方法。非常感谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-31T12:46:10.387

您可以通过操作员检查对象的原型，`instanceof`以确认它是您的猫鼬模型的实例。[使用来自mongoosejs.com](http://mongoosejs.com/)的示例模式：

```
if (obj instanceof Cat) {
    // yes, it's a mongoose Cat model object
    ...
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-11-04T07:33:02.100

我正在使用这个

```
if (object.constructor.name === 'model') {
  // object is mongoose object
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-12T16:53:00.810

我确定一个对象是否是 Mongoose 模型的首选方法几乎和上面一样简单，但不完全是：

```
function isModel(obj) {
    obj = obj || {}
    return obj.prototype instanceof mongoose.Model
} 
```

在我使用它的上下文中，我不想得到未定义的返回，但确实需要验证我没有得到“3”或一些我期望模型的奇怪值。

当然，在进一步考虑之后，成为“猫鼬对象”的方法不止一种。我有时将 DTO 误认为是 Mongoose 模型，然后误用它，因此我在上面的测试......但如果我只需要验证某个东西是一个实例，但由于某种原因无法知道实例类型，我会做类似于 Lukasz 上面所做的事情并查看构造函数基础。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-29T08:40:53.127

一种确定方法是您是否执行

```
if (data.toObject) 
```

如果为真，它将返回一个 Function 语句，如果不是，则返回 undefined；

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-17T21:13:55.143

另一种简单的方法：

```
const isMongooseModel = (object instanceof Mongoose.Model); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-08-09T21:17:48.610

这个，如果你想确保它是你期望的模型。

`dog.constructor.modelName === 'Dog'`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-14T22:44:17.563

在检查 ObjectID 是填充对象还是只是 ObjectID 时，我的以下情况：

```
if (object._id.constructor.name === 'ObjectID') {
    // Not a populated object, only its ID
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-29T07:19:50.203

尝试这个：

```
var mongoose = require('mongoose');

function isMongoModel(yourObject){

    return yourObject.hasOwnProperty('schema') && yourObject.schema instanceof mongoose.Schema;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-28T15:39:53.040

要检查是否`obj`是 Mongoose 对象，请使用以下代码段：

```
const _ = require('lodash');
const mongoose = require('mongoose');

function checkIfMongooseObject(obj) {
  return _.get(obj, 'constructor.base') instanceof mongoose.Mongoose;
} 
```

`obj`与提供的其他解决方案相反，这个解决方案是安全的 - 无论类型是什么（甚至是 String 或 Int），它都不会失败。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-12T08:39:08.460

如果您正在使用打字稿并使用打字稿导入，那么这会有所帮助

```
import { Mongoose } from 'mongoose';

...
const isMongooseModel = (object instanceof Mongoose.prototype.Model); // true if object is of type Model
const isMongooseDocument = (object instanceof Mongoose.prototype.Document); // true if object is of type Document
const isMongooseQuery = (object instanceof Mongoose.prototype.Query); // true if object is of type Query 
```

# java - 迭代构建路径中具有给定扩展名的所有文件的 ant 目标

> ID：10827110
> 
> 赞同：0
> 
> 时间：2012-05-31T03:35:47.183
> 
> 标签：java, ant

对于给定扩展名的脚本文件，我有一个简单的语法，它可以转换为我想要创建的 java 类文件，每个文件都包含一个可以通过反射调用的给定函数。

我想编写一个可以从 ant 脚本调用的 main 函数，该脚本可以看到 ant 构建目录，遍历所有具有我的扩展名的文件，并将每个文件转换为我没有放在 bin 目录中的 java 文件但是在包含我的扩展名的文件（脚本）的 src 目录包中。

这可能吗？

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:08:12.940

这是一个示例，说明如何在目录中为目录中的每个文件创建一个`.java`文件。`src``.ext``bin`

但是对于代码生成，我希望您需要实现一个自定义 Ant 任务。

```
<project default="test">

    <target name="test">
        <copy todir="src">
            <fileset dir="bin">
                <include name="**/*.ext"/>
            </fileset>
            <globmapper from="*.ext" to="*.java"/>
            <filterchain>
                <!--
                    You will do some custom filtering
                    to create your new Java src file.
                    This is just for illustration.
                 -->
                <headfilter lines="1"/>
                <tokenfilter>
                    <replaceregex pattern=".*" replace="your new content"/>
                </tokenfilter>
            </filterchain>
        </copy>
    </target>

    <!-- use with care! -->
    <target name="clean">
        <delete dir="src">
            <include name="**/*.java"/>
        </delete>
    </target>

</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T03:44:02.480

试试 ant-contrib 项目。它有一个接受文件集的任务。然后你可以用它做任何你想做的事情：

```
<ac:for param="file">
  <fileset ... />
  <sequential>
    <echo message="@{file}" />
  </sequential>
</ac:for> 
```

警告：我是这个项目的所有者。它尚未采用 ant 1.7/1.8 构造（即资源集合），但这项工作正在进行中。

# python - 从python数组中获取文件名

> ID：10827111
> 
> 赞同：1
> 
> 时间：2012-05-31T03:35:50.967
> 
> 标签：python, arrays

您好，我需要您对以下问题的帮助。我正在解析看起来像这样的文件

```
@<TRIPOS>MOLECULE
NAME123
line3
line4
line5
line6
@<TRIPOS>MOLECULE
NAME434543
line3
line4
line5
@<TRIPOS>MOLECULE
NAME343566
line3
line4 
```

我目前有这个工作正常的代码......

```
mols = [] 
with open("test2.mol2", mode="r") as molfile: 
    for line in molfile: 
        if line.startswith("@<TRIPOS>MOLECULE"): 
            mols.append(line) 
        else: 
            mols[-1] += line
#
for i in range(len(mols)): 
    out_filename = "file%d.mol2" % i 
    with open(out_filename, mode="w") as out_file: out_file.write(mols[i]); 
```

但是当我尝试根据数组的第二个字段（@MOLECULE (NAME....) 之后的那个，使用这样的代码保存文件时） - 它不起作用。请帮我修复代码。谢谢！

```
for i in mols:
    out_filename = str(i.split()[1]) + ".mol2" % i
    with open(out_filename, mode="w") as out_file: out_file.write(mols[i]); 
```

错误是

```
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
TypeError: not all arguments converted during string formatting 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:41:00.277

您的代码包括`".mol2" % i`应该是字符串插值的外观，但没有提供要插值的占位符。假设您知道如何使用带有 % 符号的字符串插值，也许您的意思是`".mol%s" % i`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T03:47:41.107

我建议使用更结构化的列表：

```
for line in molfile:
    if line.startswith("@"):
        mols.append([])
        mols[-1].append(line) # Keep first line
    else:
        mols[-1].append(line) 
```

然后：

```
for i in mols:
    out_filename = i[0].strip() + ".mol2"
    with open(out_filename, mode="w") as out_file:
        out_file.write(''.join(i)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T03:45:07.940

当您在 Python 中使用“%”后跟变量名时，它将在您的字符串中查找字符串格式化序列并尝试对其进行格式化。在您的第二个代码片段中，Python 没有在您的字符串中找到格式说明符。

# python - 使用 Fabric 处理故障

> ID：10827112
> 
> 赞同：5
> 
> 时间：2012-05-31T03:35:53.047
> 
> 标签：python, deployment, fabric

我正在尝试处理织物上的故障，但是我在文档上看到的示例过于本地化，不适合我的口味。如果许多操作中的任何一个失败，我需要执行回滚操作。然后，我尝试使用上下文来处理它，如下所示：

```
@_contextmanager
def failwrapper():
    with settings(warn_only=True):
        result = yield
    if result.failed:
        rollback()
        abort("********* Failed to execute deploy! *********") 
```

进而

```
@task
def deploy():
    with failwrapper():
        updateCode()
        migrateDb()
        restartServer() 
```

不幸的是，当其中一项任务失败时，我在`result`.

有没有办法做到这一点？或者是否有另一种处理这种情况的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:16:34.030

根据我的测试，您可以这样做：

```
from contextlib import contextmanager

@contextmanager
def failwrapper():
    try:
        yield
    except SystemExit:
        rollback()
        abort("********* Failed to execute deploy! *********") 
```

正如您所看到的，我摆脱了 warn_only 设置，因为我认为如果可以执行回滚并且您无论如何都使用 abort() 中止执行，则您不需要它。

Fabric 在遇到错误并且未使用 warn_only 设置时引发 SystemExit 异常。我们可以捕获异常并进行回滚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T18:34:04.457

继亨利的回答之后，这也处理键盘中断（Ctrl-C）和其他异常：

```
@_contextmanager
def failwrapper():
    try:
        yield
    except:
        rollback()
        raise 
```

# ruby - Ruby：遍历哈希并检查是否存在键以确定要显示的标记和数据

> ID：10827113
> 
> 赞同：2
> 
> 时间：2012-05-31T03:36:00.083
> 
> 标签：ruby, haml

这是我第一次使用 Ruby，所以我可能会错误地处理这个问题。

我正在尝试通过哈希来显示它的内容。当我浏览哈希时，我需要测试一个键是否存在，比如city。如果城市不存在，则不应显示地址。这是我开始构建哈希的地方：

```
# app.rb
set :haml, :format => :html5
get "/" do
    @users = Hash[
                  [["name", "bill"], ["city", "nyc"],  ["address", "street"]],
                  [["name", "ted"], ["city", "denver"]],
                  [["name", "sam"], ["address", "road"]]
                 ]
    haml :index
end 
```

这就是我循环哈希的方式：

```
# layout.haml
- @users.each do |user|
    - user.each do |u|
        - u.each do |b|
            = b 
```

一旦我到达 b 它将显示所有内容，如下所示：

```
["name", "bill"]
["city", "nyc"]
["address", "street"]
["name", "ted"]
["city", "denver"] 
```

在循环中，如何显示名称以及检查每个用户的地址是否存在以确定是否应显示城市以及可能需要添加的任何标记？理想情况下，它会显示如下内容：

```
<p>bill, <span class="address">nyc, street</span></p>
<p>ted</p>
<p>sam, <span class="address">road</span></p> 
```

我是否以这种方式正确创建哈希？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T03:51:40.163

与其尝试在散列中使用嵌套*数组*，不如使用包含`user`散列的数组：

```
@users = [
           { :name => 'bill', :city => 'city', :address => 'street' },
           { :name => 'ted', :city => 'denver' },
           { :name => 'sam', :address => 'road' }
         ] 
```

有了它，你可以做这样的事情：

```
- @users.each do |user|
    = user[:name]
    - if user.has_key?(:address) && user.has_key?(:city)
        = "#{user[:address]}, #{user[:city]}"
    - elsif user.has_key?(:address)
        = "#{user[:address]}" 
```

# json - JSONP 请求：“资源解释为脚本，但使用 MIME 类型文本/html 传输”

> ID：10827116
> 
> 赞同：1
> 
> 时间：2012-05-31T03:36:40.707
> 
> 标签：json, jsonp

我正在尝试使用 JSONP 执行我的第一个交叉请求，以从外部 URL 获取横幅。

```
<script type="text/javascript">
    function handleResponse(json){
    var data = JSON.parse(json);
    alert(data);
    }
</script>
<script src="http://lujanventas.com/plugins/banners/?callback=handleResponse"></script> 
```

这段代码我认为这是一个非常基本的 JSONP 请求。我的问题是我收到错误消息：“资源解释为脚本，但使用 MIME 类型文本/html 传输”。

我没有以任何方式修改文件来为请求做准备。（我相信我必须以某种方式对其进行修改，但不知道该怎么做）。

我必须怎么做才能毫无问题地获得文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:59:46.273

我的 jsonp 请求也有同样的问题。我有

> 资源解释为脚本，但使用 MIME 类型 text/plain 传输

，但是一旦我将响应“Content-Type”标头设置为“text/javascript”，我就会解决它。但这只有在您控制服务器的情况下才能完成。因此，要么告诉 lujanventas.com 尝试更改“ContentType”标头，要么忽略它:)

干杯!

# java - JFrame中的图像显示

> ID：10827117
> 
> 赞同：2
> 
> 时间：2012-05-31T03:36:49.613
> 
> 标签：java, image, swing, jframe, jlabel

我只是想知道为什么这个 100x100 像素的 .gif 图像没有出现在屏幕上。该图像位于同一目录中，因此程序应该没有问题找到它。有谁知道如何解决这个问题？

```
import java.awt.*;
import java.awt.image.ImageObserver;
import java.io.File;
import javax.imageio.*;
import javax.swing.*;

public class Window extends JFrame{
//the pictures
ImageIcon guy = new ImageIcon("tester.gif");
JLabel pn = new JLabel(guy);
JPanel panel = new JPanel();

Window(){
    super("Photuris Lucicrescens");

    //Important
    setSize(700,600);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    add(panel);
    setVisible(true);
    //Decoration
    Image customIcon = Toolkit.getDefaultToolkit().getImage("iconImage.gif");
    setIconImage(customIcon);
    //Adding the image
    add(pn);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:05:23.520

问题是您向 JFrame 添加了两个组件。当您将组件添加到 JFrame 时，它​​实际上会将其添加到其内容窗格中。默认情况下，内容窗格使用 BorderLayout 作为其 LayoutManager。如果您不设置约束，则该组件被视为在中心。因此，这里有两个组件位于中心并从 LayoutManager 接收相同的边界，导致只有一个组件被显示，另一个被隐藏。这就是您看到 JPanel 而不是 JLabel 的原因。

如果您想查看 JLabel，请不要将该面板添加到框架中。

其他备注：

*   setVisible() 应该在创建组件层次结构后调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:19:26.810

我在我的电脑上试用它，图像显示在图标上。如果您想在背景上显示图像，请尝试以下操作：

```
import java.awt.Image;
import java.awt.Toolkit;
import javax.swing.*;

        public class Caine extends JFrame{
        //the pictures
        ImageIcon guy = new ImageIcon("tester.gif");
        JLabel pn = new JLabel(guy);
        JPanel panel = new JPanel();

        Caine(){
            super("Photuris Lucicrescens");

            //Important
            setSize(700,600);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            add(panel);
            setVisible(true);
            JLabel im = new JLabel(new ImageIcon("iconImage.gif"));
            setIconImage(customIcon);
            panel.add(im);
            add(pn);
        }
        } 
```

# mysql - 正则表达式中的 MySQL 和单词边界

> ID：10827125
> 
> 赞同：3
> 
> 时间：2012-05-31T03:38:55.973
> 
> 标签：mysql, sql, regex

如何在 MySQL 查询中使用正则表达式单词边界？

例如，我想匹配“产品”或“时事通讯”，

它适用于`OR`,

```
IF(? = 'product' OR ? = 'newsletter', ... , ...) 
```

但是正则表达式呢？我想它会像下面这样？

```
IF(? REGEXP '^('product'||'newsletter')+$', ..., ... ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T10:09:04.917

```
SELECT *
FROM tbl
WHERE description REGEXP '[[:<:]]red[[:>:]]|[[:<:]]blue[[:>:]]' 
```

或者，作为选择表达式：

```
SELECT IF(description REGEXP '[[:<:]]red[[:>:]]|[[:<:]]blue[[:>:]]', 1, 0) AS is_matched, tbl.*
FROM description 
```

您可以`RLIKE`用作同义词，但`REGEXP`似乎更受欢迎^([需要引用])。

## 区分大小写

来自[REGEXP 的 MySQL 手册](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)：

REGEXP 不区分大小写，除非与二进制字符串一起使用。

```
mysql> SELECT 'a' REGEXP 'A', 'a' REGEXP BINARY 'A';
        -> 1  0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T03:41:53.363

使用`REGEXP`或`RLIKE`。

[`Regular expressions in MySQL`](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

在您的情况下，您可以将[`MATCH() ... AGAINST`](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html#function_match)全文搜索与 MyISAM 存储引擎一起使用。

或者你可以[`IN()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_in)像@Wiseguy 提到的那样使用

# sql - 如何使用另一个表中的列添加唯一约束？

> ID：10827137
> 
> 赞同：5
> 
> 时间：2012-05-31T03:41:09.400
> 
> 标签：sql, sql-server, sql-server-2008-r2, unique-constraint

我在 SQL Server 2008 R2 中有 3 个表，如下所示：

![数据库模型](../Images/d8bc3a91dfb9944865260a7a2ed8ffa9.png)

一家公司可能有许多 LSP。一个 LSP 可能有许多 SERVICE。

我需要确保 SERVICE_CODE 唯一标识公司内的服务记录。也就是说，COMPANY_ID + SERVICE_CODE 应该唯一标识整个系统中的一条SERVICE记录。

例如：COMPANY-A 可能没有 2 个具有相同 SERVICE_CODE 的服务（具有 2 个不同的 SERVICE_ID）。但是 COMPANY-A 和 COMPANY-B 可能都有 2 个单独的 SERVICES（同样，具有不同的 SERVICE_ID），SERVICE_CODE = "PREMIUM"。

我需要这样的东西：

```
alter table "SERVICE" 
add constraint "SERVICE_Index01" 
unique ("COMPANY_ID", "SERVICE_CODE") 
```

但是（显然）这会失败，因为 COMPANY_ID 列不在 SERVICE 表中。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T07:50:50.080

您可以使用[索引视图](http://msdn.microsoft.com/en-us/library/ms191432%28v=sql.105%29.aspx)作为外部约束：

```
CREATE VIEW dbo.CompanyServices
WITH SCHEMABINDING
AS
SELECT
  c.COMPANY_ID,
  s.SERVICE_CODE
FROM       dbo.COMPANY c
INNER JOIN dbo.LSP     l ON c.COMPANY_ID = l.COMPANY_ID
INNER JOIN dbo.SERVICE s ON l.LSP_ID     = s.LSP_ID
GO

CREATE UNIQUE CLUSTERED INDEX UQ_CompanyServices
ON dbo.CompanyServices (COMPANY_ID, SERVICE_CODE); 
```

该索引将确保`(COMPANY_ID, SERVICE_CODE)`您的数据中没有重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T03:56:53.243

每个公司是否仅限于一个 LSP？Service_Code 是否唯一（或者是否有两个具有不同 Service_ID 的服务代码“PREMIUM”）？

```
CREATE TABLE dbo.Company
(
  CompanyID INT PRIMARY KEY
  -- , ...
);

CREATE TABLE dbo.LSP
(
  LSPID      INT PRIMARY KEY, 
  CompanyID  INT FOREIGN KEY REFERENCES dbo.Company(CompanyID) -- UNIQUE?
  -- , ...
);

CREATE TABLE dbo.Service
(
  ServiceID    INT PRIMARY KEY
  -- , ...
);

CREATE TABLE dbo.LSP_Service
(
  LSPID        INT FOREIGN KEY REFERENCES dbo.LSP(LSPID), 
  ServiceID    INT FOREIGN KEY REFERENCES dbo.Service(ServiceID), 
  PRIMARY KEY (LSPID, ServiceID)
); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T04:02:13.680

将 COMPANY_ID 添加到服务表。

如果您需要服务表中的行通过此 id 是唯一的，则在此表中保留外键引用是有意义的。

# c# - 如何从一直漂浮到屏幕上的小行星射出三角形？

> ID：10827142
> 
> 赞同：3
> 
> 时间：2012-05-31T03:41:42.060
> 
> 标签：c#, vector, xna, drawing

我目前为我正在编写的游戏加载了一个小行星纹理作为我的“测试玩家”。我试图弄清楚如何做的是从小行星的中心拍摄一个三角形，然后继续前进，直到它到达屏幕的顶部。在我的情况下会发生什么（正如您从我发布的代码中看到的那样），三角形会显示出来，但是它要么是一条长线，要么只是一个位于同一位置的三角形当小行星四处移动时（当我停止按空格键时它会消失），或者它根本不会出现。我尝试了许多不同的方法，但我可以在这里使用一个公式。

我要做的就是在 C# 中为我的期末考试编写一个太空侵略者克隆。我知道如何很好地编码，我的公式只需要工作就可以了。

到目前为止，这就是我所拥有的：

**主逻辑代码**

```
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(ClearOptions.Target, Color.Black, 1, 1);

    mAsteroid.Draw(mSpriteBatch);

    if (mIsFired)
    {
        mPositions.Add(mAsteroid.LastPosition);
        mRay.Fire(mPositions);
        mIsFired = false;
        mRay.Bullets.Clear();
        mPositions.Clear();
    }

    base.Draw(gameTime);
} 
```

**绘制代码**

```
public void Draw()
{
    VertexPositionColor[] vertices = new VertexPositionColor[3];

    int stopDrawing = mGraphicsDevice.Viewport.Width / mGraphicsDevice.Viewport.Height;

    for (int i = 0; i < mRayPos.Length(); ++i)
    {
        vertices[0].Position = new Vector3(mRayPos.X, mRayPos.Y + 5f, 10);
        vertices[0].Color = Color.Blue;
        vertices[1].Position = new Vector3(mRayPos.X - 5f, mRayPos.Y - 5f, 10);
        vertices[1].Color = Color.White;
        vertices[2].Position = new Vector3(mRayPos.X + 5f, mRayPos.Y - 5f, 10);
        vertices[2].Color = Color.Red;

        mShader.CurrentTechnique.Passes[0].Apply();
        mGraphicsDevice.DrawUserPrimitives<VertexPositionColor>(PrimitiveType.TriangleStrip, vertices, 0, 1);

        mRayPos += new Vector2(0, 1f);

        mGraphicsDevice.ReferenceStencil = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:40:08.637

这不是您应该如何在世界空间中操纵模型的位置的方式，而且由于您在每个单独的并条框中创建一个新的顶点数组，您会发现当您绘制更多时它的性能非常糟糕比几个三角形。

只需在 LoadContent 方法中为您的三角形声明一次顶点和索引列表。

```
VertexBuffer triangleVertexBuffer;
IndexBuffer triangleIndexBuffer;

protected override void LoadContent()
{
    // Setup a basic effect to draw the triangles with.
    mEffect = new BasicEffect(GraphicsDevice);

    // setup the triangle vertext buffer and load up it's content.
    triangleVertexBuffer = new VertexBuffer(GraphicsDevice, typeof(VertexPositionColor), 3, BufferUsage.WriteOnly);
    triangleVertexBuffer.SetData<VertexPositionColor>(new VertexPositionColor[] 
    {
        new VertexPositionColor (new Vector3 (0f, -1f, 0.0f), Color.Blue),  // Top Point
        new VertexPositionColor (new Vector3 (-1f, 1f, 0.0f), Color.White), // Bottom Left
        new VertexPositionColor (new Vector3 (1f, 1f, 0.0f), Color.Red),    // Bottom Right
    });

    // setup an index buffer to join the dots!
    triangleIndexBuffer = new IndexBuffer(GraphicsDevice, IndexElementSize.SixteenBits, 3, BufferUsage.WriteOnly);
    triangleIndexBuffer.SetData<short>(new short[]
    { 
        0, 
        1, 
        2, 
    });
} 
```

在此假设您的效果考虑到世界变换（基本效果）之后，您可以使用该参数来移动三角形。

```
 protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            for (int i = 0; i < mRayPos.Length ; i++)
            {
                // This is the line that moves the triangle along your ray.
                mEffect.World = Matrix.CreateTranslation(new Vector3(mRayPos[i].X, mRayPos[i].Y, mRayPos[i].Z));
                mEffect.Techniques[0].Passes[0].Apply();

                // These lines tell the graphics card that you want to draw your triangle.
                GraphicsDevice.SetVertexBuffer(triangleVertexBuffer);
                GraphicsDevice.Indices = triangleIndexBuffer;
                GraphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, 3, 0, 1);
            }

            base.Draw(gameTime);
        } 
```

如果您使用此方法，使用 Matrix.CreateRotation 和 Matrix.CreateScale 旋转或缩放您的三角形将变得非常简单。

# javascript - HTML5 视频不暂停

> ID：10827154
> 
> 赞同：0
> 
> 时间：2012-05-31T03:43:09.453
> 
> 标签：javascript, jquery, html, html5-video

我正在开发一个包含两个视频的 iPad HTML 应用程序。HTML 代码是动态加载的。该页面有两个视频，其文本对应于它们。这些视频也只有两个控件。播放和暂停。但是我遇到的问题是视频只会在另一个播放时暂停。基本上在我的 if / else 语句中根本没有调用 else。这是我的代码。任何人都知道为什么尝试再次单击叠加层时它不会暂停？先感谢您！

```
$('div[class*="video-overlay"]').bind('mousedown', function() {

    var video       = $(this).next('video')[0];
    var text        = $(this).attr('data-play');

    if (video.paused) {

        video.play();

        $('p').addClass('fade');
        $('#' + text).removeClass('fade');

        $(this).removeClass('overlay');
        $('div[class*="video-overlay"]').not(this).addClass('overlay');

        $(this).children().removeClass('video-play');

        $('video').not($(this).next(el)).get(0).pause();

        $('.play').not($(this).children()).addClass('video-play');

        $(video).on('ended', function() {
            $(this).prev('div').children().addClass('video-play');
            video.pause();
        });

    } else {

        video.pause();
        console.log('Hey mom, I paused all by myself!');
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:24:44.400

没有你的html，我不能确定，所以我只能猜测。

```
var video       = $(this).next('video')[0]; 
```

将此行更改为

```
var video       = $(this).find('video')[0]; 
```

要获得更明确的答案，请提供您的 html 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T01:47:32.690

它实际上在我的 CSS 中。我没有在视频前面覆盖。所以我将 z-index 更改为更高的值并修复它。我前面有播放按钮，所以它正在播放视频，而不是覆盖。嗬！

# java - 为什么我可以查看某些异常的实时调用堆栈，而不能查看其他异常？

> ID：10827155
> 
> 赞同：1
> 
> 时间：2012-05-31T03:43:20.790
> 
> 标签：java, android, eclipse, debugging, exception

在 Eclipse 中，我可以在任何异常上设置断点选项，这样我就可以在抛出异常时调试应用程序状态。

## 情况1

在第一个示例中，一切正常。它显示了完整的调用堆栈，我可以单击调用堆栈的任何级别并查看崩溃时的局部变量。

![在此处输入图像描述](../Images/289b1fee6ddcb716530a4ae23f653cb3.png)

* * *

## 案例2

但是，如果我在代码的其他部分（UI 线程或 GLSurfaceView 线程上的任何内容）遇到异常，我会得到完全无用的行为。强制关闭后，我可以在 logcat 中看到异常：

```
05-30 20:18:10.905: E/AndroidRuntime(23982): FATAL EXCEPTION: GLThread 13
05-30 20:18:10.905: E/AndroidRuntime(23982): java.lang.NullPointerException
05-30 20:18:10.905: E/AndroidRuntime(23982):    at x.x.x.Graphics.MyRenderer.drawSubRenderable(MyRenderer.java:237)
05-30 20:18:10.905: E/AndroidRuntime(23982):    at x.x.x.Graphics.MyRenderer.onDrawFrame(MyRenderer.java:181)
05-30 20:18:10.905: E/AndroidRuntime(23982):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1363)
05-30 20:18:10.905: E/AndroidRuntime(23982):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118) 
```

但我无法在崩溃时停止应用程序。应用程序停止，但我只得到这个（我在调用堆栈中看不到我自己的代码）：

![在此处输入图像描述](../Images/e60d1c750ee02c934e8cf03e6f80c145.png)

* * *

* * *

## 案例3

最后，如果我在 UI 线程上抛出异常，我会得到这个怪物，但我的抛出异常的代码仍然无处可寻：

![在此处输入图像描述](../Images/c3030e752547118c1ced2654066d59f7.png)

## 问题

为什么我不能在所有情况下都让代码在我的实际代码上断点，以便我可以检查抛出异常的原因？为什么它在某些情况下有效，而在其他情况下无效？如果我安装了android源代码会有帮助吗？（目前，当我遇到异常时，只会收到“找不到源”消息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:03:16.863

所以我做了更多的研究，我想我可以猜到发生了什么。

我目前只捕获未捕获的异常，我猜想在 android 回调中发生的任何异常都会被处理并重新抛出，从而从活动堆栈跟踪中删除我的源。

如果我捕获所有捕获的异常，那么在所有情况下，我都会在调用堆栈中找到我想要的代码。

不幸的是，如果我捕获所有捕获的异常，我可能会中断 100 多个在 android 框架内部生成和处理的异常，这使得捕获异常的中断有点无用。

希望这里有更好的解决方案，如果您有任何了解，请回答！

# git - 撤消 git 存储

> ID：10827160
> 
> 赞同：496
> 
> 时间：2012-05-31T03:44:38.577
> 
> 标签：git

我只是在一个我没有提交的项目中做了一个隐藏。有没有办法回到我藏起来之前的状态？我怎么能这样做？我关闭了终端，我的笔记本电脑也关闭了。我做了一些研究，似乎没有办法做到这一点。

* * *

## 回答 #1

> 赞同：926
> 
> 时间：2012-05-31T03:46:47.733

你可以运行：

```
git stash pop 
```

它将取消您的更改。

如果要保留文件的状态（暂存与工作），请使用

```
git stash apply --index 
```

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2012-05-31T03:47:53.473

`git stash list`列出您隐藏的更改。

`git stash show`查看`n`以下命令中的内容。

`git stash apply`应用最近的存储。

`git stash apply stash@{n}`应用较旧的存储。

[https://git-scm.com/book/en/v2/Git-Tools-Stashing-and-Cleaning](https://git-scm.com/book/en/v2/Git-Tools-Stashing-and-Cleaning)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-09-10T20:50:58.527

这也将恢复登台目录：

```
git stash apply --index 
```

# types - 平等有什么难的？

> ID：10827161
> 
> 赞同：0
> 
> 时间：2012-05-31T03:44:50.030
> 
> 标签：types, theory, equality

例如，在 Javascript 中`[1,2,3] === [1,2,3]`和`[1,2,3] == [1,2,3]`都是假的。即使是空数组的简单情况也是错误的。原因是数组是引用类型，`[1,2,3]`并且与`[1,2,3]`引用不同。Javascript 在这方面并不是独一无二的，几乎每种语言都将相等作为引用相等来实现，除了最基本的类型，如整数，也许还有一些内置类型。

为什么会这样？使默认的相等运算符更强大有什么难的？那么，除了比较参考文献之外，为什么还很难比较结构特性呢？

我知道许多语言提供了使某些运算符重载以表示其他含义的工具，这样就`==`可以表示您想要的含义，而不是通常的弱引用相等。我的问题不是语言是否提供了这样的功能，而是为什么默认的相等运算符不是更明智的，因此`[1,2,3] == [1,2,3]`默认情况下评估为 true 并且不需要程序员干预。

在 python 中，上面的示例计算结果为 true，但是如果您定义以下类

```
class A:
  def __init__(self, prop):
    self.prop = prop 
```

然后比较`a = A(1)`然后`b = A(1)`答案将是错误的，即使在结构上`a`并且`b`是相同的，并且如果您所知道的只是定义对象的位模式，则无法区分它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T03:53:19.930

并非所有语言都按照您描述的方式工作。例如，在 Python`==`中是相等并且`is`是引用比较：

```
>>> a = [1,2,3]
>>> b = [1,2,3]
>>> a == b
True
>>> a is b
False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T03:48:50.683

并非所有语言都这样做。C++ 使用`==`对象表示相等（尽管`==`指针表示引用相等）。我相信（尽管我不完全确定）D 编程语言保留`==`值相等，`is`运算符保留引用相等。

我认为这只是 JavaScript 和其他一些语言的设计决定。没有理由必须这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-31T18:12:04.577

> 几乎每种语言都将相等作为引用相等

正如`types`这个问题上的标签所示，许多语言将相等性作为类型的行为来实现。这是有道理的：大多数类型都会有一些属性可以在实例上更改，而不会更改该实例的语义“值”。

所以我给出的答案是：相等并不难，由类型来定义哪些实例相等。在没有这种明确决定的情况下，任何默认值都应该是保守的。

如果您正在创建自定义类型，那么您有责任做出决定；如果语言支持继承，用它来表达你的决定“平等应该表现得像其他更基本的类型”。否则，请为该类型显式编码相等测试，就像对您认为具有正确行为的现有类型所做的那样。

# php - PHP 错误表单 - 将表单内容保留在重定向上

> ID：10827162
> 
> 赞同：0
> 
> 时间：2012-05-31T03:44:56.333
> 
> 标签：php, mysql

我有一个简单的登录表单，如果出现错误（例如密码错误），我需要它能够记住输入的用户名。我会去做这个 PHP 或 Javascript，因为我不允许使用 JQuery。

我当前的 PHP - （不包括 HTML 表单）

```
<?php
//MySQl Connection
 mysql_connect("localhost", "root", "") or die(mysql_error()); 
 mysql_select_db("clubresults") or die(mysql_error()); 

//Initiates New Session - Cookie
session_start(); // Start a new session

// Get the data passed from the form
$username = $_POST['username'];
$password = md5($_POST['pass']);

// Do some basic sanitizing
$username = mysql_real_escape_string($username);
$password = mysql_real_escape_string($password);

//Performs SQL Query to retrieve Login Details from DB
$sql = "select * from admin_passwords where username = '$username' and password = '$password'";
$result = mysql_query($sql) or die ( mysql_error() );

//Assigns a Variable Count to 0
$count = 0;

//Exectues a loop to increment on Successful Login
while ($line = mysql_fetch_assoc($result)) {
     $count++;
}
//If count is equal to 1 Redirect user to the Members Page and Set Cookie
if ($count == 1) {
     $_SESSION['loggedIn'] = "true";
     header("Location: members.php"); // This is wherever you want to redirect the user to
} else {

//Else Echo that login was a failure.
die('Login Failed. <a href=login.php>Click Here to Try Again</a>');

}

?> 
```

任何帮助，将不胜感激。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:47:08.140

您可以使用 $_SESSION 或 $_COOKIE。

对于 $_COOKIE，只需使用[setcookie(...)](http://php.net/manual/en/function.setcookie.php) (for `localhost`, on `$domain`, use `false`)

对于 $_SESSION，只需像任何其他数组一样设置它

要检查值是否存在，请使用[isset(...)](http://php.net/manual/en/function.isset.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:50:25.933

不要使用会话变量..当登录失败时，您可以通过将用户名作为参数传递给登录表单来实现这一点..

//Else 回显登录失败。die('登录失败，点击这里重试');

在表单中 if (isset($_GET['username']) 将其设置为登录用户名字段，否则将其保留为空

# java - 使用 Java 的系统级代理切换器

> ID：10827165
> 
> 赞同：1
> 
> 时间：2012-05-31T03:45:28.703
> 
> 标签：java, winapi, networking, proxy

我们可以使用 Java（包括 JNA）即时更改 Windows 代理设置（系统级别，而不仅仅是 JVM）。我发现了一些 C# 代码片段，它们使用的是 wininte.dll 提供的 InternetSetOption() API。我已经尝试过，但它也不起作用。我想要的只是通过运行 JAR 文件（桌面应用程序）来更改 IE 和 Chrome 代理设置，而无需重新启动浏览器。

太感谢了！

# graph-theory - 如何在graphshortestpath中添加权重值 - Matlab

> ID：10827166
> 
> 赞同：0
> 
> 时间：2012-05-31T03:45:34.003
> 
> 标签：graph-theory, matlab

目前我了解`graphshortestpath`在 MATLAB 中的使用。但是如何为函数中的某些路径添加权重值。

**已编辑**我正在使用 MATLAB 开发路由系统，并且我想阻止某些路径。那些块路径将不得不去另一个最短路径路径。

有什么例子可以参考吗？？

```
W = [.41 .99 .51 .32 .15 .45 .38 .32 .36 .29 .21];
DG = sparse([6 1 2 2 3 4 4 5 5 6 1],[2 6 3 5 4 1 6 3 4 3 5],W);
UG = tril(DG + DG');
h = view(biograph(DG,[],'ShowWeights','on'));
[dist,path,pred] = graphshortestpath(DG,1,6);
set(h.Nodes(path),'Color',[1 0.4 0.4])
edges = getedgesbynodeid(h,get(h.Nodes(path),'ID'));
set(edges,'LineColor',[1 0 0])
set(edges,'LineWidth',1.5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:53:59.120

```
% path weights，if you want to block
% one edge，you could set the value very large.
W = [.41 .99 .51 .32 .15 .45 .38 .32 .36 .29 .21];

DG = sparse([6 1 2 2 3 4 4 5 5 6 1],[2 6 3 5 4 1 6 3 4 3 5],W)

DG =
   (4,1)       0.4500
   (6,2)       0.4100
   (2,3)       0.5100
   (5,3)       0.3200
   (6,3)       0.2900
   (3,4)       0.1500
   (5,4)       0.3600
   (1,5)       0.2100
   (2,5)       0.3200
   (1,6)       0.9900
   (4,6)       0.3800

[dist,path,pred] = graphshortestpath(DG,1,6）
%Find the shortest path in the graph from node 1 to node 6. 
```

# windows-phone-7 - 隔离存储（Windows Phone）中的临时文件夹在哪里？

> ID：10827168
> 
> 赞同：0
> 
> 时间：2012-05-31T03:45:46.640
> 
> 标签：windows-phone-7, isolatedstorage

我找不到要添加临时文件的临时文件夹在哪里。我怎么找到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:14:19.480

您只需创建自己的文件夹并管理内容：

```
private void SaveTempFile(string fileName, object data)
{
    var storage = IsolatedStorageFile.GetUserStoreForApplication();
    if (storage.DirectoryExists("temp") == false) 
        storage.CreateDirectory("temp");

    fileName = Path.Combine("temp", fileName);
    using (var fileStream = new IsolatedStorageFileStream(fileName, FileMode.Create, storage))
    {
       //Write the data
       using (var isoFileWriter = new StreamWriter(fileStream))
       {
            // write your data in the format of your choice
        }
    }
} 
```

随时删除文件

```
public void DeleteTempFile(string fileName)
{
    try
    {
        var storage = IsolatedStorageFile.GetUserStoreForApplication();
        if (storage.DirectoryExists("temp") == false) return;

        fileName = Path.Combine("temp", fileName);
        if (storage.FileExists(fileName))
        {
            storage.DeleteFile(fileName);
        }
     }
    catch (Exception) { }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:26:22.137

Windows Phone 上没有为应用程序准备的那种文件夹。您必须自己创建它并在不再需要时管理清除那里的内容表单。但是，当您的应用程序被卸载时，您无需担心删除该文件 - 然后整个应用程序文件夹将从隔离存储中删除。

# php - PHP & MySQL 加入

> ID：10827169
> 
> 赞同：0
> 
> 时间：2012-05-31T03:46:00.323
> 
> 标签：php, mysql, codeigniter, join, group-by

一般来说，我对编码相对较新，一年级的 CS 学生等等。我正在使用 PHP 显示学校课程类别列表和每个类别中的作业帖子列表。所需的输出将是这样的：

```
CATEGORY 1
-Assign Post 1
-Assign Post 2

CATEGORY 2
-Assign Post 0 
```

使用 join 为我提供了部分功能，因为它获取所有分配的帖子，但是当我循环并发布数据时，它不止一次发布类别标题。然后我尝试使用 group_by ，但每个类别只发布一篇文章。

我不会发布我所有的代码，只是发布数据库查询。如果您认为问题可能存在，我会很乐意发布其他代码。

```
//Select our classes, and get assignments from each class
$this->db->select('*');
$this->db->from('categories');
$this->db->join('assignments', 'categories.cat_id = assignments.assign_cat_id');
$this->db->group_by("cat_id"); 

//Return the classes and assignments in an array
$query = $this->db->get();
return $query->result_array(); 
```

不会很棘手吧？当然感谢任何帮助:)。

**更新**

我发现 group_concat 将发布分配名称，然后我可以分解结果。这是唯一的方法，还是有办法让它在一个友好的数组中发布。我问的唯一原因是我觉得这在我的视图文件中添加了不必要的代码，我正在爆炸数据。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:43:32.760

不要使用 group by ...使用按类别 id 排序，在显示/或准备数据数组时，您可以根据类别记录记录..您无法通过单个 SQL 来实现这一点

# javascript - 在 Javascript 中删除复选框

> ID：10827173
> 
> 赞同：1
> 
> 时间：2012-05-31T03:47:05.270
> 
> 标签：javascript

我对 Javascript 非常陌生，因此欢迎任何和所有输入。我在创建用于删除选定复选框的函数时遇到问题。我尝试了很多东西，但最终只是删除了整个功能。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Shopping List</title>
        <script>
            /*
            Create a shopping list program using javascript.  The page should have a text input, an “add” button, a “delete checked” button, and a list of items.  Each item should have a checkbox next to it.  If you fill out the text input and click” add,” it should add a list item to the end of the list.  If you check a box (or boxes) next to a list item then click “delete checked,” it should remove the list items that were checked.  Style the page using CSS.  
            */
            function addIt() {
                var list = document.getElementById("list"); //used to grab the parent level "list"
                var li = document.createElement("li"); //creates a "li" in the document
                var userTxt = document.getElementById("product"); //used to grab the user text input "product"
                var childText = userTxt.value; //returns the userTxt value and sets it equal to childText
                var childTextNode = document.createTextNode(childText); //creates a textNode in the document based on what the user entered in the "product" text field
                var chkBox = document.createElement("input"); //creates a new input based on the user input
                chkBox.type = "checkbox"; //creates a checkbox next to the user input from "product"

                //form the relationship
                li.appendChild(chkBox); //
                li.appendChild(childTextNode); //
                //attach to the parent element
                list.appendChild(li); //
                inputText.value = "";
                inputText.focus();
            }
        </script>
    </head>

    <body>
        <div id="content">
            <h1>Shopping Cart</h1>
            <input id="product" type="text" />
            <input type="button" id="Add" value="Add" onclick="addIt()" />
            <input type="button" id="Delete" value="Delete" onclick="deleteIt()" />
            <ul id="list">
                <li>
                    <input type="checkbox" />Eggs</li>
            </ul>
        </div>
        </div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:55:28.460

您需要将它们作为父包装器的子级删除。

然后你可以使用这个： [https ://developer.mozilla.org/En/DOM/Node.removeChild](https://developer.mozilla.org/En/DOM/Node.removeChild)

在将子项传递给方法时将其删除

```
function deleteCheckbox(cbId){
  document.getElementById("content").removeChild(document.getElementById(cbId));
} 
```

在你的 html 中

```
<checkbox onclick="deleteCheckbox(id)"> 
```

假设你知道它的 ID。如果你不这样做，你可以根据它的顺序访问它。我不完全清楚您希望删除哪个复选框，但它的完成方式与您添加孩子的方式相同，只是相反:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:13:57.053

通用`removeElement`函数可能是：

```
function removeElement(element) {
  if (element && element.parentNode) {
    element.parentNode.removeChild(element);
  }
}

// Use example
removeElement(document.getElementById('someId')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T04:50:49.777

在 html 中输入（添加名称标签）

```
 <ul id="list">
    <li><input type="checkbox" name='food'>Eggs</input></li>
  </ul> 
```

添加时（在 addIt() 中将名称添加到复选框）

```
 chkBox.type="checkbox";                                 

 chkBox.name = 'food'; 
```

现在 deleteIt 函数

```
function deleteIt(){
    var food = document.getElementsByName('food'); // get the checkbox
    for (i=0; i<food.length; i++) // loop through it
    {
    // if the current state is checked, unchecked and vice-versa
            if (food[i].checked) // if its checked
            {
            var remElm = food[i];   // element to be removed
        var list=document.getElementById("list"); // also li to be removed           
        food[i].nextSibling.nodeValue = ''; // Text value set to 
        remElm.parentNode.removeChild(remElm);
        ul = document.getElementsByTagName('ul')[0];
        li = ul.getElementsByTagName('li');
        ul.removeChild(li[i]);
            } else {       
            }
    }
} 
```

# ruby - ImageList#montage 不包括大多数照片

> ID：10827176
> 
> 赞同：1
> 
> 时间：2012-05-31T03:47:22.223
> 
> 标签：ruby, rmagick

我有这个代码：

```
marginsBetween = 20
background = '#000000'

columns = 6
rows = 12

collage = images.montage {
  self.geometry = '+' + (marginsBetween/2).to_s + '+' + (marginsBetween/2).to_s
  self.tile = columns.to_s + 'x' + rows.to_s
  self.background_color = background
} 
```

`images`是一个包含 96 个图像的 ImageList，填充如下

```
images = ImageList.new()
urls.each do |url|
  images << Image.read(url)[0]
end 
```

哪里`urls`只是一组图像 URL

出于某种原因，在调用`collage.flatten_image`并保存生成的图像后，网格中只有 24 张照片，其余的空白填充。有没有人见过这种行为？

**编辑：** 这似乎只发生在 96 张图像中......任何其他数字都可以正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:38:10.883

弄清楚了。

看起来在某些情况下，蒙太奇会返回一组图像。你需要以某种方式处理它。

就我而言，我曾经`resample`获得正确的 DPI 并一次性合并图像。

# android - 如何使 ListView 项目均匀

> ID：10827177
> 
> 赞同：0
> 
> 时间：2012-05-31T03:47:30.213
> 
> 标签：android, listview

我希望我的列表视图项目被排列并显示为表格数据。我在每个 ListItem 中有四个 TextView。我什至在边缘都有第一个和第四个。我不能让中间排队。有一个更好的方法吗？

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="40dp"
  android:background="@color/row_selector"
android:paddingLeft="10dp"
 android:paddingRight="5dp"
android:paddingBottom="10dp"
android:paddingTop="10dp" >
<TextView
    android:id="@+id/labelGas"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="25"
    android:text="@+id/label"
    android:textColor="#222"
     >
</TextView>
<TextView
    android:id="@+id/labelDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="15"
    android:text="@+id/label"
    android:textColor="#222"
    >
</TextView>
<TextView
    android:id="@+id/labelApr"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="35"
    android:text="@+id/label"
    android:textSize="18dp" >
</TextView>
<TextView
    android:id="@+id/labelFee"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="5"
    android:text="@+id/label"
   >
</TextView>
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:52:07.280

如果您`android:layout_width="0dp"`为所有 TextView 标签设置，则视图将具有完全根据权重的宽度，而不管它们的实际内容如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:01:04.917

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="40dp"
  android:background="@color/row_selector"
  android:paddingLeft="10dp"
  android:paddingRight="5dp"
  android:paddingBottom="10dp"
  android:paddingTop="10dp" >
<TextView
    android:id="@+id/labelGas"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="TextView1"
    android:textColor="#FFFF00"      >
 </TextView>
 <TextView
    android:id="@+id/labelDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="TextView2"
    android:visibility="invisible"
    android:textColor="#ffff0000"    >
 </TextView>
 <TextView
    android:id="@+id/labelApr"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="TextView3"
    android:visibility="invisible"
    android:textColor="#ff00ff00" >
 </TextView>
 <TextView
    android:id="@+id/labelFee"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="TextView4"
    android:textColor="#ffff6666"   >
 </TextView>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T03:55:36.267

尝试使用RelativeLayout，它更强大更高效：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="40dp"
android:background="@color/row_selector"
android:paddingLeft="10dp"
android:paddingRight="5dp"
android:paddingBottom="10dp"
android:paddingTop="10dp" >
<TextView
    android:id="@+id/labelGas"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:text="@+id/label"
    android:textColor="#222"
     >
</TextView>
<TextView
    android:id="@+id/labelDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/labelGas"
    android:layout_alignParentTop="true"
    android:text="@+id/label"
    android:textColor="#222"
    >
</TextView>
<TextView
    android:id="@+id/labelApr"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/labelDate"
    android:layout_alignParentTop="true"
    android:text="@+id/label"
    android:textSize="18dp" >
</TextView>
<TextView
    android:id="@+id/labelFee"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/labelApr"
    android:layout_alignParentTop="true"
    android:text="@+id/label"
   >
</TextView>
 </RelativeLayout> 
```

# parsing - DateTimeFormat.parse() 失败

> ID：10827179
> 
> 赞同：2
> 
> 时间：2012-05-31T03:47:42.647
> 
> 标签：parsing, gwt, datetime-format

代码：

```
 DateTimeFormat dateFormat = DateTimeFormat
            .getFormat("EEE MMM dd HH:mm:ss zzz yyyy");

    Date date = dateFormat.parse("Wed May 30 18:33:22 PDT 2012"); 
```

结果：

```
Uncaught java.lang.IllegalArgumentException: Wed May 30 18:33:22 PDT 2012 
```

为什么？

我已经[根据文档](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/i18n/client/DateTimeFormat.html)检查并仔细检查了我的模式。将模式插入[SimpleDateFormat 测试器](http://www.fileformat.info/tip/java/simpledateformat.htm)也会得到预期的结果，尽管这显然不是一个决定性的测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T04:32:31.940

根据您提到的[文档，日期解析的支持有限：](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/i18n/client/DateTimeFormat.html)

> 解析的时区支持是有限的。仅支持标准 GMT 和 RFC 格式。不支持使用时区 ID 的时区规范（如 America/Los_Angeles）、时区名称（如 PST、太平洋标准时间）。

进一步来说

> 在当前实现中，时区解析仅支持 GMT:hhmm、GMT:+hhmm 和 GMT:-hhmm。

因此，以下代码可以正常工作：

```
 DateTimeFormat dateFormat = DateTimeFormat
            .getFormat("EEE MMM dd HH:mm:ss zzz yyyy");
    Date date = dateFormat.parse("Thu May 31 09:45:21  GMT-07:00 2012");
    GWT.log("Date "+date); 
```

# git - 对不受信任的用户隐藏部分 git repo

> ID：10827186
> 
> 赞同：4
> 
> 时间：2012-05-31T03:48:55.843
> 
> 标签：git, version-control

我正在尝试以某种方式使用 git，以使项目中的某些子目录对“不受信任”用户保密/隐藏，但对其他“受信任”用户可见。请注意，这不仅仅是写保护；也不能允许不受信任的用户读取机密文件。我希望用户体验就像是一个单一的 git repo，而不是像子模块这样的东西。

我会告诉你到目前为止我唯一的想法，以防引发一些讨论或批评。我正在考虑在服务器的幕后拥有两个并行存储库。受信任的用户克隆/拉/推受信任的存储库。不受信任的用户克隆/拉/推不受信任的存储库。当对受信任的存储库进行提交时，将对其进行过滤以删除机密内容，然后再将其应用于不受信任的存储库。另一方面，对不受信任的存储库的提交进行过滤，以避免在应用于受信任的存储库之前破坏秘密内容。

我应该如何实现这个目标？我提出的解决方案疯了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T04:00:23.363

是的，这是可能的，而且是经常性的需求。

为此，您应该将您的存储库拆分为一些不同的存储库，`git submodule`并将主题组合到一个存储库中。然后，您关闭对不受信任用户的秘密回购的读取权限。

例如，我的 home 配置是 github 中的公共 repo：[https](https://github.com/perfectworks/home) ://github.com/perfectworks/home 。您可以在其中找到一个`private`目录，该目录是另一个私有 git 存储库的子模块。不受信任的用户不能在这个目录下得到任何东西，除非我授权他们。

您可以在此处找到更多信息：http `git submodule`: [//git-scm.com/book/ch6-6.html](http://git-scm.com/book/ch6-6.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:02:41.600

既然你说你不想使用子模块，你可能想看看[git-subtree](https://github.com/apenwarr/git-subtree)，它允许你将存储库的子目录拆分到它自己的存储库中，并将刚刚提交的更改合并到那个其他存储库。然后您可以使用以下结构：

```
full-repo
\
 .git
 public
 private 
```

...并用于`git-subtree split`生成仅代表`public`子目录历史的分支，并将该分支提取到新创建的存储库中。然后让特权用户 clone `full-repo`，而不受信任的用户只能克隆代表`public`子目录的新存储库。当更改提交到表示`public`子目录的存储库时，您可以`full-repo`通过提取到原始存储库并运行`git-subtree merge`. 同样，在 中所做的更改`full-repo`可以将影响`public`传播到拆分分支的部分`git subtree split`，并将该分支拉入拆分存储库。

请注意，如果要执行此操作，则在将更改传播回表示 的存储库时`public`，您需要非常小心，不要将私有对象获取到公共存储库中。例如，确保您只获取拆分分支，而不是存储库中的所有内容。我不会在安全性至关重要的情况下使用这种方法，以防万一犯了这种错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T03:53:23.937

没有办法限制对回购部分的访问。

将秘密内容放在不同的存储库中并将该存储库作为主要存储库的子模块是最直接的方法。使两个被过滤的存储库保持同步实际上并不可行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T03:57:51.087

假设您计划自行破解，这在技术上可能是可行的`git`。您需要回答的几个问题：

*   在推送到服务器期间，您将如何识别“秘密”文件？
*   您将如何确保连接到*您的*服务器？由于没有其他服务器会正​​确过滤，因此推送到错误的服务器将共享所有秘密内容。

如果你破解 git，一切皆有可能。

# php - ui-dahow 显示在 jquery ui-date 选择器中选择的未来日期

> ID：10827201
> 
> 赞同：0
> 
> 时间：2012-05-31T03:51:15.623
> 
> 标签：php, javascript, jquery-ui

我已经下载了 jquery ui-date 选择器并在我的 php 网站中实现。当我单击日期选择器文本框时，它显示当前日期为选中状态。我需要显示未来日期（当前日期+2）作为选择默认值

可能吗？

查看我的代码

```
$(function (){

                // Datepicker
                $('#requTravel').datepicker({
                    inline: true,
                    minDate: 0  

                });

                //hover states on the static widgets
                $('#dialog_link, ul#icons li').hover(
                    function() { $(this).addClass('ui-state-hover'); }, 
                    function() { $(this).removeClass('ui-state-hover'); }
                );

            }); 
```

有人知道吗？

我还有一个疑问。我有两个日历。当我从第一个日历中选择一个日期时说（1/07/2012），那么我的第二个日历将显示 03/07/2012。即从第一个砑光日期+2 有可能吗？请回复

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T03:56:50.240

minDate 选项接受几种格式：http: [//jqueryui.com/demos/datepicker/#option-minDate](http://jqueryui.com/demos/datepicker/#option-minDate)

[http://jsfiddle.net/n1ck/5GxcZ/5/](http://jsfiddle.net/n1ck/5GxcZ/5/)

```
// Not Allowed to select before current date, default is 2 days from now
$('#requTravel').datepicker({
    inline: true,
    minDate: +2,
    defaultDate: +2
});

// Allowed to select before current date, default is 2 days from now
$('#requTravel2').datepicker({
    inline: true,
    defaultDate: +2
});

​ 
```

# ruby - 将字符串推入数组中的数组会产生意外结果

> ID：10827202
> 
> 赞同：6
> 
> 时间：2012-05-31T03:51:18.263
> 
> 标签：ruby

我在 Ruby 中有一个由 5 个空数组组成的数组。我正在尝试使用`<<`运算符将​​字符串推送到第一个数组中，但结果是字符串被推送到所有数组中。请帮助我理解这一点。

预期的输出是：

```
# => [["car"], [], [], [], []] 
```

但相反，我得到：

```
# => [["car"], ["car"], ["car"], ["car"], ["car"]] 
```

irb转储：

```
1.9.3-p194 :001 > output = Array.new(5, [])
 => [[], [], [], [], []] 
1.9.3-p194 :002 > output.inspect
 => "[[], [], [], [], []]" 
1.9.3-p194 :003 > output[0].inspect
 => "[]" 
1.9.3-p194 :004 > output[0] << "car"
 => ["car"] 
1.9.3-p194 :005 > output.inspect
 => "[[\"car\"], [\"car\"], [\"car\"], [\"car\"], [\"car\"]]" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T03:54:56.370

它们都是同一个对象：

```
ree-1.8.7-2012.02 :001 > output = Array.new(5, [])
 => [[], [], [], [], []] 
ree-1.8.7-2012.02 :002 > output[0]
 => [] 
ree-1.8.7-2012.02 :003 > output[0].object_id
 => 2219989240 
ree-1.8.7-2012.02 :004 > output[1].object_id
 => 2219989240 
ree-1.8.7-2012.02 :005 > output[2].object_id
 => 2219989240 
ree-1.8.7-2012.02 :006 > output[3].object_id
 => 2219989240 
ree-1.8.7-2012.02 :007 > output[4].object_id
 => 2219989240 
ree-1.8.7-2012.02 :008 > 
```

试试这个：

```
ree-1.8.7-2012.02 :008 > output = []
 => [] 
ree-1.8.7-2012.02 :009 > 5.times{output << []}
 => 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T04:04:31.380

正如 Pedro Nascimento 所指出的，如果数组以这种方式初始化，它们都具有相同的对象 ID。您可以通过使用[类似的语法](http://www.ruby-doc.org/core-1.9.3/Array.html#method-c-new)来创建嵌套数组来解决此问题：

```
irb(main):047:0> output = Array.new(5) {[]}
=> [[], [], [], [], []]
irb(main):048:0> output.each {|i| puts i.object_id}
10941700
10941680
10941660
10941640
10941620 
```

所以你的追加`output[0]`将按预期工作：

```
irb(main):049:0> output[0] << "cat"
=> ["cat"]
irb(main):050:0> output
=> [["cat"], [], [], [], []] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T04:30:53.903

编码

```
output = Array.new(5, []) 
```

试图只创建一个对象的副本，

所以

```
ree-1.8.7-2012.02 :003 > output[0].object_id
 => 2219989240 
ree-1.8.7-2012.02 :004 > output[1].object_id
 => 2219989240 
ree-1.8.7-2012.02 :005 > output[2].object_id
 => 2219989240 
ree-1.8.7-2012.02 :006 > output[3].object_id
 => 2219989240 
ree-1.8.7-2012.02 :007 > output[4].object_id
 => 2219989240 
```

如果要创建对象的多个副本，请使用此

```
 output = Array.new(5) {[]}    #=> [[], [], [], [], []] 
```

编码

```
 output.each {|i| puts i.object_id} 
```

会告诉你

```
1.9.3-p194 :005 >  output.each {|i| puts i.object_id}
13417360
13417340
13417320
13417300
13417280
 => [[], [], [], [], []] 
```

# xcode - 如何在情节提要中应用基于条件的自定义转场

> ID：10827203
> 
> 赞同：6
> 
> 时间：2012-05-31T03:51:20.693
> 
> 标签：xcode, conditional, segue, uistoryboard

我正在处理情节提要，它在第一次查看时有几个视图放置了我想要的条件，如果条件满足，那么只有导航应该发生

为此，我使用了自定义 segue，但无论我的条件是否满足，它都会导航到新视图。

我在自定义 segue 类中创建了方法

```
- (void) perform{

    NSLog(@"source %@",self.sourceViewController);
    NSLog(@"dest %@",self.destinationViewController);

    UIViewController *sVC=self.sourceViewController;
    UIViewController *dVC=self.destinationViewController;

    [sVC.navigationController pushViewController:dVC animated:YES];

} 
```

如果结果为 1，我想设置条件，那么只有它应该导航。将 prepareforsegue 或 initwithsegue 为我提供任何帮助

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-31T05:00:08.107

你是说你只想在条件为真时执行转场？

如果是这样，请不要直接从控件或表格单元格创建转场，而是创建无触发器转场。无触发器的 segue 以视图控制器为源，它永远不会自动触发。相反，您可以随时以编程方式触发它，包括从 IBAction 触发。

要创建无触发转场，请从场景底部场景停靠栏中的包含视图控制器图标开始控制并拖动转场。像往常一样拖动到目标场景，然后选择转场类型。选择 segue，然后在检查器中选择一个 segue 标识符。

在运行时，当您想要执行 segue 时，调用 -[UIViewController performSegueWithIdentifier:sender:]。您可以为发件人传递您想要的任何对象，包括 nil。如果发件人对你没有用处，则传递 nil。

所以，总结一下：

*   创建从视图控制器到目标场景的无触发转场
*   在检查器中为 segue 设置标识符
*   在运行时和表单代码中，当您想要触发 segue 时，调用 -[UIViewController performSegueWithIdentifier:sender:]。

# php - 链接网址我的网站

> ID：10827204
> 
> 赞同：0
> 
> 时间：2012-05-31T03:51:20.740
> 
> 标签：php

我有一个包含 2 种语言的网站，即 En 和 kh。每种语言在不同的文件夹中都有相同的文件名，即 /en/ 和 /th/。我在包含的头文件 (php) 上创建了在这两种语言之间切换的标签。

问题是如何在任何地方获取当前路径，并将文件夹名称更改为 en 或 kh？（如果您在英语联系页面，点击 kh 将带您进入泰语联系页面。）

如何在我的网站中链接该语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:21:50.653

您可以使用 $_SERVER['PHP_SELF'] 查找路径，使用 str_replace 将 en 更改为 kh ，反之亦然，然后重定向到您的新路径 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:25:24.877

要在语言之间切换，您首先需要将用户偏好保存在 cookie 中，以便下一个请求将获得选定的语言。

要呈现所需的文件，您可以只编写 url/或使用基于 gcookie 的语言信息加载语言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T04:16:26.143

尝试查看 $_SERVER 预定义值。使用此信息，您可以计算出用户当前的位置并相应地切换语言链接。

下面可以看到一个很好的起点。

`<?php echo $_SERVER['PHP_SELF']; ?>`

更多可以在此链接中找到[保留变量服务器](http://php.net/manual/en/reserved.variables.server.php)

# facebook - 如何使用 facebook API 作为粉丝页面的管理员分享到 facebook 粉丝页面的链接

> ID：10827208
> 
> 赞同：3
> 
> 时间：2012-05-31T03:51:49.617
> 
> 标签：facebook, api, facebook-page

我对 facebook API 有疑问。我创建了一个粉丝页面并设置了页面管理员，这是我的帐户 facebook。之后，我想使用 Facebook API 将提要发布到粉丝页面。在这种情况下，我测试了两种类型：状态消息和共享链接。

1>在粉丝专页留言：

```
    $publishStream = $fb->api("/" . $fbPageId ."/feed", 'post',
    大批（
        '消息' => '测试' 。时间（） 。'http://example.com',
        )
    );

```

结果：我已成功发布到粉丝专页，并且提要的所有者是**粉丝专页**。

2> 分享粉丝专页链接

```
    $publishStream = $fb->api("/" . $fbPageId ."/feed", 'post',
    大批（
        '链接' => 'http://example.com',
        )
    );

```

结果：我已经发布了指向粉丝页面成功的链接，并且提要的所有者是**user**。此提要将显示在**ABC 页面上其他人的最新帖子中**（ABC 是粉丝专页的名称）。有没有人和我一样的问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T12:26:51.170

用**链接**替换**提要**

 **```
$publishStream = $fb->api("/" . $fbPageId ."/feed", 'post', (...) 
```

至

```
$publishStream = $fb->api("/" . $fbPageId ."/links", 'post', (...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:38:32.617

我刚刚确认了这种行为，真是出乎意料。当使用用户令牌并仅使用消息属性发布时，将其发布为页面。

管理员设置中未选中“始终以 Page.. 的身份在您的页面上发表评论和发布”框，这更奇怪。他们必须使用不同的后端来发布消息，因为他们不必为 og 标签抓取外部 url 链接。

无论如何，使用来自 graph.facebook.com/USER_ID/accounts 端点的页面 access_tokens 以获得一致的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:14:51.197

我有同样的问题。而且我每次都使用页面访问令牌。如果帖子有“消息”，它会进入页面（并因此与喜欢该页面的人共享）。如果它只有一个“链接”，它会转到我的个人新闻提要，并且只与朋友共享。

顺便说一句，我尝试同时包含“消息”和“链接”，它出现在我的个人新提要上，而不是页面上。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-31T08:29:55.350

您每次使用哪种访问令牌？看起来您第一次使用了页面访问令牌，第二次使用了用户访问令牌。**

# c++ - Laderman 的 3x3 矩阵乘法只有 23 次乘法，值得吗？

> ID：10827209
> 
> 赞同：19
> 
> 时间：2012-05-31T03:52:03.070
> 
> 标签：c++, algorithm, linear-algebra, matrix-multiplication

取两个 3x3 矩阵的乘积`A*B=C`。[天真地，这需要使用标准算法](http://en.wikipedia.org/wiki/Matrix_multiplication#Matrix_product_.28two_matrices.29)进行 27 次乘法运算。如果有人聪明的话，你可以只使用 23 次乘法，[这是 Laderman 在 1973 年发现的结果](http://www.ams.org/journals/bull/1976-82-01/S0002-9904-1976-13988-2/S0002-9904-1976-13988-2.pdf)。该技术涉及节省中间步骤并以正确的方式组合它们。

现在让我们修复一种语言和一种类型，比如带有`double`. 如果 Laderman 算法是硬编码而不是简单的双循环，我们能否期望现代编译器的性能能够消除算法的差异？

**关于这个问题的注释：**这是一个*编程*站点，这个问题是在时间关键内循环的最佳实践的上下文中提出的；过早优化这不是。非常欢迎作为评论的实施提示。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T04:05:26.350

关键是掌握平台上的指令集。这取决于您的平台。有几种技术，当您倾向于需要最大可能的性能时，您的编译器将附带分析工具，其中一些内置了优化提示。对于最细粒度的操作，请查看汇编器输出，看看是否有任何改进也在那个水平。

同时指令多个数据命令对多个操作数并行执行相同的操作。这样你就可以拿

```
double a,b,c,d;
double w = d + a; 
double x = a + b;
double y = b + c;
double z = c + d; 
```

并将其替换为

```
double256 dabc = pack256(d, a, b, c);
double256 abcd = pack256(a, b, c, d);
double256 wxyz = dabc + abcd; 
```

因此，当值被加载到寄存器中时，它们被加载到一个 256 位宽的寄存器中，用于某些具有 256 位宽寄存器的虚构平台。

浮点是一个重要的考虑因素，一些 DSP 可以显着加快整数运算。GPU 在浮点方面往往表现出色，尽管有些 GPU 在单精度上的速度要快 2 倍。这个问题的 3x3 情况可以适合单个 CUDA 线程，因此您可以同时流式传输 256 个这些计算。

选择你的平台，阅读文档，实现几种不同的方法并分析它们。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-31T15:04:06.863

# 计时测试：

我自己进行了计时测试，结果让我感到惊讶（因此我首先问这个问题）。简而言之，在标准编译下，`laderman`速度要快 225%，但使用`-03`优化标志时*要慢 50%*！在标志期间，我每次都必须在矩阵中添加一个随机元素，`-O3`否则编译器会*完全优化*简单的乘法，在时钟精度内花费零时间。由于该`laderman`算法很难检查/仔细检查，我将在下面发布完整的代码以供后代使用。

规格：Ubuntu 12.04，戴尔 Prevision T1600，gcc。时间百分比差异：

*   `g++ [2.22, 2.23, 2.27]`
*   `g++ -O3 [-0.48, -0.49, -0.48]`
*   `g++ -funroll-loops -O3 [-0.48, -0.48, -0.47]` 

基准代码以及 Laderman 实现：

```
#include <iostream>
#include <ctime>
#include <cstdio>
#include <cstdlib>
using namespace std;

void simple_mul(const double a[3][3], 
        const double b[3][3],
        double c[3][3]) {
  int i,j,m,n;
  for(i=0;i<3;i++) {
    for(j=0;j<3;j++) {
      c[i][j] = 0;
      for(m=0;m<3;m++) 
    c[i][j] += a[i][m]*b[m][j];
    }
  }
}

void laderman_mul(const double a[3][3], 
           const double b[3][3],
           double c[3][3]) {

   double m[24]; // not off by one, just wanted to match the index from the paper

   m[1 ]= (a[0][0]+a[0][1]+a[0][2]-a[1][0]-a[1][1]-a[2][1]-a[2][2])*b[1][1];
   m[2 ]= (a[0][0]-a[1][0])*(-b[0][1]+b[1][1]);
   m[3 ]= a[1][1]*(-b[0][0]+b[0][1]+b[1][0]-b[1][1]-b[1][2]-b[2][0]+b[2][2]);
   m[4 ]= (-a[0][0]+a[1][0]+a[1][1])*(b[0][0]-b[0][1]+b[1][1]);
   m[5 ]= (a[1][0]+a[1][1])*(-b[0][0]+b[0][1]);
   m[6 ]= a[0][0]*b[0][0];
   m[7 ]= (-a[0][0]+a[2][0]+a[2][1])*(b[0][0]-b[0][2]+b[1][2]);
   m[8 ]= (-a[0][0]+a[2][0])*(b[0][2]-b[1][2]);
   m[9 ]= (a[2][0]+a[2][1])*(-b[0][0]+b[0][2]);
   m[10]= (a[0][0]+a[0][1]+a[0][2]-a[1][1]-a[1][2]-a[2][0]-a[2][1])*b[1][2];
   m[11]= a[2][1]*(-b[0][0]+b[0][2]+b[1][0]-b[1][1]-b[1][2]-b[2][0]+b[2][1]);
   m[12]= (-a[0][2]+a[2][1]+a[2][2])*(b[1][1]+b[2][0]-b[2][1]);
   m[13]= (a[0][2]-a[2][2])*(b[1][1]-b[2][1]);
   m[14]= a[0][2]*b[2][0];
   m[15]= (a[2][1]+a[2][2])*(-b[2][0]+b[2][1]);
   m[16]= (-a[0][2]+a[1][1]+a[1][2])*(b[1][2]+b[2][0]-b[2][2]);
   m[17]= (a[0][2]-a[1][2])*(b[1][2]-b[2][2]);
   m[18]= (a[1][1]+a[1][2])*(-b[2][0]+b[2][2]);
   m[19]= a[0][1]*b[1][0];
   m[20]= a[1][2]*b[2][1];
   m[21]= a[1][0]*b[0][2];
   m[22]= a[2][0]*b[0][1];
   m[23]= a[2][2]*b[2][2];

  c[0][0] = m[6]+m[14]+m[19];
  c[0][1] = m[1]+m[4]+m[5]+m[6]+m[12]+m[14]+m[15];
  c[0][2] = m[6]+m[7]+m[9]+m[10]+m[14]+m[16]+m[18];
  c[1][0] = m[2]+m[3]+m[4]+m[6]+m[14]+m[16]+m[17];
  c[1][1] = m[2]+m[4]+m[5]+m[6]+m[20];
  c[1][2] = m[14]+m[16]+m[17]+m[18]+m[21];
  c[2][0] = m[6]+m[7]+m[8]+m[11]+m[12]+m[13]+m[14];
  c[2][1] = m[12]+m[13]+m[14]+m[15]+m[22];
  c[2][2] = m[6]+m[7]+m[8]+m[9]+m[23];    
}

int main() {
  int N = 1000000000;
  double A[3][3], C[3][3];
  std::clock_t t0,t1;
  timespec tm0, tm1;

  A[0][0] = 3/5.; A[0][1] = 1/5.; A[0][2] = 2/5.;
  A[1][0] = 3/7.; A[1][1] = 1/7.; A[1][2] = 3/7.;
  A[2][0] = 1/3.; A[2][1] = 1/3.; A[2][2] = 1/3.;

  t0 = std::clock();
  for(int i=0;i<N;i++) {
    // A[0][0] = double(rand())/RAND_MAX; // Keep this in for -O3
    simple_mul(A,A,C);
  }
  t1 = std::clock();
  double tdiff_simple = (t1-t0)/1000.;

  cout << C[0][0] << ' ' << C[0][1] << ' ' << C[0][2] << endl;
  cout << C[1][0] << ' ' << C[1][1] << ' ' << C[1][2] << endl;
  cout << C[2][0] << ' ' << C[2][1] << ' ' << C[2][2] << endl;
  cout << tdiff_simple << endl;
  cout << endl;

  t0 = std::clock();
  for(int i=0;i<N;i++) {
    // A[0][0] = double(rand())/RAND_MAX; // Keep this in for -O3
    laderman_mul(A,A,C);
  }
  t1 = std::clock();
  double tdiff_laderman = (t1-t0)/1000.;

  cout << C[0][0] << ' ' << C[0][1] << ' ' << C[0][2] << endl;
  cout << C[1][0] << ' ' << C[1][1] << ' ' << C[1][2] << endl;
  cout << C[2][0] << ' ' << C[2][1] << ' ' << C[2][2] << endl;
  cout << tdiff_laderman << endl;
  cout << endl;

  double speedup = (tdiff_simple-tdiff_laderman)/tdiff_laderman;
  cout << "Approximate speedup: " << speedup << endl;

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-16T07:15:00.593

虽然问题提到了 C++，但我在 C#（.NET 4.5）中实现了 3x3 矩阵乘法 C=A*B，并在我的 64 位 windows 7 机器上运行了一些基本的时序测试并进行了优化。10,000,000 次乘法大约需要

1.  0.556 秒，简单的实现和
2.  0.874 秒，来自另一个答案的拉德曼代码。

有趣的是，laderman 代码比简单的方式要慢。我没有使用分析器进行调查，但我猜额外的分配比一些额外的乘法更昂贵。

似乎当前的编译器足够聪明，可以为我们做这些优化，这很好。这是我使用的天真的代码，供您参考：

```
 public static Matrix3D operator *(Matrix3D a, Matrix3D b)
    {
        double c11 = a.M11 * b.M11 + a.M12 * b.M21 + a.M13 * b.M31;
        double c12 = a.M11 * b.M12 + a.M12 * b.M22 + a.M13 * b.M32;
        double c13 = a.M11 * b.M13 + a.M12 * b.M23 + a.M13 * b.M33;
        double c21 = a.M21 * b.M11 + a.M22 * b.M21 + a.M23 * b.M31;
        double c22 = a.M21 * b.M12 + a.M22 * b.M22 + a.M23 * b.M32;
        double c23 = a.M21 * b.M13 + a.M22 * b.M23 + a.M23 * b.M33;
        double c31 = a.M31 * b.M11 + a.M32 * b.M21 + a.M33 * b.M31;
        double c32 = a.M31 * b.M12 + a.M32 * b.M22 + a.M33 * b.M32;
        double c33 = a.M31 * b.M13 + a.M32 * b.M23 + a.M33 * b.M33;
        return new Matrix3D(
            c11, c12, c13,
            c21, c22, c23,
            c31, c32, c33);
    } 
```

其中 Matrix3D 是一个不可变结构（只读双字段）。

棘手的事情是提出一个*有效*的基准，您可以在其中测量您的代码，而不是，编译器对您的代码做了什么（调试器有大量额外的东西，或者在没有实际代码的情况下进行优化，因为结果从未使用过）。我通常会尝试“触摸”结果，这样编译器就无法删除被测代码（例如检查矩阵元素是否与 89038.8989384 相等，如果相等则抛出）。但是，最后我什至不确定编译器是否会破解这个比较:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T08:17:41.887

我预计主要的性能问题将是内存延迟。A`double[9]`通常为 72 个字节。这已经是一笔不小的数目，而您正在使用其中的三个。

# ios - 为什么当我在导航控制器中重置视图控制器的框架时什么都没有发生

> ID：10827210
> 
> 赞同：0
> 
> 时间：2012-05-31T03:52:05.017
> 
> 标签：ios, viewcontroller, navigationcontroller

假设视图控制器 1 是在导航控制器中推送的视图控制器，并且我更改了视图控制器 1 的框架，但这没有区别。视野依旧充满了屏幕。有谁知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:21:34.943

@Virgil 我对你的问题做了一些研究，发现当我们将视图控制器推到导航控制器上时，视图控制器的框架会调整大小。我认为这就是我们无法更改视图控制器视图框架的原因，更详细的研究请参阅[此处的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# facebook-javascript-sdk - 有没有办法使用 JavaScript SDK 在灯箱中提示权限？

> ID：10827214
> 
> 赞同：0
> 
> 时间：2012-05-31T03:52:46.173
> 
> 标签：facebook-javascript-sdk, platform, facebook-canvas, iframe-app

在 FBML 应用程序中，您可以提示扩展权限，如下所示：

```
Facebook.showPermissionDialog('publish_stream', callback); 
```

这渲染了一个灯箱（很像 FB.ui({method: 'foo', display: 'iframe'}); 那样）。

从我在文档中看到的内容来看，现在提示更多扩展权限的唯一方法是使用 FB.login() 弹出一个窗口，或者将用户重定向到 oauth 对话框全屏。我们不想依赖前者，因为弹出窗口不可靠，而后者在我们的用户交互流程中毫无意义。灯箱是唯一有意义的方法。

如果 oauth 对话框可以显示为 iframe，则此代码理论上可以工作：

```
FB.ui({method: 'oauth',
    display: 'iframe',
    access_token: 'foo',
    scope: 'publish_stream'
    }, callback); 
```

但是 oauth 对话框只支持显示为“page”和“mobile”。

有什么我忽略的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:36:19.267

想一想：当然*不可能*在 iframe 中使用身份验证对话框，因为这是一个**安全问题**。

在弹出窗口中显示或重定向到它使用户能够检查站点地址实际上是 facebook.com。

如果您在哪里使用灯箱中的身份验证对话框作为 iframe 或类似内容，作为用户，我将无法查看它放入登录表单的数据（如果我没有登录，则会显示）到 Facebook）实际上是发送到 Facebook，或者如果您刚刚设置了自己的表单，将数据发送到*您的*服务器，因为您正试图通过**网络钓鱼**获取我的 Facebook 登录数据……</p>

# javascript - 如何读取具有部分选定子节点的父节点

> ID：10827216
> 
> 赞同：1
> 
> 时间：2012-05-31T03:53:12.533
> 
> 标签：javascript, jquery, dynatree

我在我的代码中使用 dynaTree [http://wwwendt.de/tech/dynatree/index.html](http://wwwendt.de/tech/dynatree/index.html)来显示一个 2 级树。此树显示为`selectMode = 3`，`checkboxes`当用户选中节点复选框时，其父级变为`gray mode`.

在下一阶段，当用户单击按钮时，我会将所有选定的节点发送到服务器进行处理。我想做的是也发送所有`gray mode`复选框。

我怎样才能实现这个目标？

编辑：这是您需要的所有代码

```
<html>
<head>
    <link type="text/css" href="../css/ui.dynatree.css" rel="stylesheet">
    <script type="text/javascript" src="../js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="../js/jquery-ui-1.8.16.custom.min.js"></script>
    <script type="text/javascript" src="../js/jquery.dynatree.min.js"></script>
    <script type="text/javascript">
        var treeData = [
            { key: "key1", title: "Text 1" },
            { key: "Key2", title: "Text 2",
                children: [
                    { key: "Key2_1", title: "Text 2_1" },
                    { key: "Key2_2", title: "Text 2_2" },
                ]
            },
        ];

        $(function () {
            $("#tree").dynatree({
                checkbox: true,
                selectMode: 3,
                children: treeData,
                imagePath: "../images/Tree/",
                onSelect: function (select, node) {
                    var selKeys = $.map(node.tree.getSelectedNodes(), function (node) {
                        return node.data.key;
                    });
                    $('#textField').val(selKeys.join(", "));
                }
            });
        });
    </script>
</head>
<body>
    <div id="tree"></div>
    <input type="text" id="textField" value="" /><input type="button" id="button" onclick="alert($('#textField').val())" value="Send" />
</body>
</html> 
```

选择时`Key2_1`，`Key2`转到`gray state`您会看到`Key2_1`已添加到`textField`文本框中，我也希望在`textField`字段中包含 Key2。

`Key2_1`注意：选择和的两个子节点`Key2_2`也会选择父节点（key_2），但不会在它位于`gray mode`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:00:24.840

似乎 dynaTree 没有查找部分选定节点的方法。另一种解决方案是查找此类节点的类名。默认情况下，如果部分选择的节点的类名没有更改，它将是`dynatree-partsel`，但是具有完全选择的子节点的节点也分配了该类，因此我们需要选择其类中没有的节点`dynatree-selected`。

一个肮脏的解决方案将 onSelect 方法定义更改为：

```
onSelect: function (select, node) {
    var selKeys = $.map(node.tree.getSelectedNodes(), function (node) {
        return node.data.key;
    });
    var partsel = new Array();
    $(".dynatree-partsel:not(.dynatree-selected)").each(function () {
        var node = $.ui.dynatree.getNode(this);
        partsel.push(node.data.key);
    });
    selKeys = selKeys.concat(partsel);
    $('#textField').val(selKeys.join(", "));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T10:18:15.450

```
var parent = node.getParent();
var parentnode = parent.data.key; 
```

在`parentnode`变量中，您将获得父节点的值

# scala - 有没有办法从 scala 程序中获取终端大小？

> ID：10827219
> 
> 赞同：5
> 
> 时间：2012-05-31T03:53:22.040
> 
> 标签：scala

我听说没有纯粹的跨平台解决方案。但也许对于最常用的平台（Linux、Mac、Win）有三种独立的解决方案，它们可以组合起来在大多数情况下获得所需的价值？

这需要包含在库中，因此我无法添加某种预启动脚本来获取宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:48:50.923

我建议使用 JLine - 具体来说，您可以使用 `Terminal.getTerminalWidth' 来获取终端宽度。

[JLine 终端](http://jline.sourceforge.net/apidocs/jline/Terminal.html#getTerminalWidth%28%29)

# haskell - 如何从 Haskell 中的复杂或复合分布中采样？

> ID：10827221
> 
> 赞同：6
> 
> 时间：2012-05-31T03:53:27.603
> 
> 标签：haskell, statistics, sampling, normal-distribution, procedural-generation

我正在尝试为 Haskell 中的假设行星生成随机质量。我想通过对双峰分布（理想情况下是两个正态分布的叠加：一个对应于小行星，一个对应于气态巨行星）进行采样来产生这些质量。我查看了[统计包](http://hackage.haskell.org/package/statistics-0.10.1.0 "统计包")，它提供了`quantile`可以将一个均匀分布`Double`变成一个`Double`对多个分布的函数。但似乎没有任何支持编写发行版。

这种特殊情况可以通过选择一个分布或另一个分布来预先采样，但我想用一个分布来做，特别是因为我以后可能需要调整整体分布。最终，我可能会用来自天空调查的真实数据代替正态分布。

我正在考虑自己实现[拒绝抽样](http://en.wikipedia.org/wiki/Rejection_sampling)，它可以相当简单地处理任意分布，但它似乎效率很低，如果解决方案已经作为库存在，那么实现它肯定不是一个好主意。

是否有支持从组合或明确指定的分布中采样的 Haskell 库？还是现有的拒绝抽样的 Haskell 实现？或者，是否有一个明确的公式来计算两个正态分布之和的 CDF 的倒数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T08:27:00.300

在简单混合分布的情况下，您可以通过您首先提到的“hack”获得高效的采样器：

> 这种特殊情况可以通过选择一个分布或另一个分布来预先采样，但我想用一个分布来做，特别是因为我以后可能需要调整整体分布。

这实际上是一个吉布斯抽样的例子，在统计学中非常普遍。它非常灵活，如果你知道你使用的混合物的数量，它可能很难被击败。从整个集合中选择一个单独的分布进行采样，然后从该条件分布中进行采样。冲洗并重复。

这是一个简单的、未优化的 Haskell 实现，用于混合高斯 Gibbs 采样器。这是非常基本的，但你明白了：

```
import System.Random
import Control.Monad.State

type ModeList = [(Double, Double)]                 -- A list of mean/stdev pairs, for each mode.

-- Generate a Gaussian (0, 1) variate.
boxMuller :: StdGen -> (Double, StdGen)
boxMuller gen = (sqrt (-2 * log u1) * cos (2 * pi * u2), gen'')
    where (u1, gen')  = randomR (0, 1) gen 
          (u2, gen'') = randomR (0, 1) gen'

sampler :: ModeList -> State StdGen Double
sampler modeInfo = do
    gen <- get
    let n           = length modeInfo
        (z0, g0)    = boxMuller gen
        (c,  g1)    = randomR (0, n - 1) g0        -- Sample from the components.
        (cmu, csig) = modeInfo !! c                
    put g1
    return $ cmu + csig * z0                       -- Sample from the conditional distribution. 
```

这是一个示例运行：从两个高斯的一维混合中采样 100 次。众数为`x = -3`和`x = 2.5`，每个混合分量都有自己独立的方差。您可以在此处添加任意数量的模式。

```
main = do
let gen      = mkStdGen 42
    modeInfo = [(2.5, 1.0), (-3, 1.5)]
    samples     = (`evalState` gen) . replicateM 100 $ sampler modeInfo
print samples 
```

这是这 100 个样本的平滑密度图（使用 R 和 ggplot2）：

![高斯混合](../Images/48ff8c885c1e56c84ae3c0a44b3a4f6c.png)

更通用的算法将是拒绝或重要性采样器，并且在更复杂的分布的情况下，您可能想要手动滚动适当的 MCMC 例程。 [这](http://videolectures.net/mlss09uk_murray_mcmc/)是对 Monte Carlo 和 MCMC 的一个很好的介绍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T08:01:26.463

嗯。我熟悉的最好方法是调整[MonadRandom 包](http://hackage.haskell.org/package/MonadRandom)以获得“概率单子”，从[http://en.wikipedia.org/wiki/Normal_distribution#Generating_values_from_normal_distribution](http://en.wikipedia.org/wiki/Normal_distribution#Generating_values_from_normal_distribution)借用一些工具：

```
getRandomStrictlyBetween :: (Ord a, Random a, RandomGen m) => 
    (a, a) -> a
getRandomStrictlyBetween (lo, hi) = do
  x <- getRandomR (lo, hi)
  -- x is uniformly randomly chosen from the *closed* interval
  if lo < x && x < hi then return x else getRandomStrictlyBetween (lo, hi)

normalValue :: MonadRandom m => m Double
normalValue = do
  u <- getRandomStrictlyBetween (0, 1)
  v <- getRandomStrictlyBetween (0, 2 * pi)
  return (sqrt (-2 * log u) * cos v) -- according to Wikipedia 
```

然后您可以得出或多或少的任意分布；例如，要获得`y`具有概率`p`和`z`概率的随机变量的分布`(1 - p)`，您只需编写

```
do alpha <- getRandom -- double chosen from [0, 1)
   if alpha < p then y else z 
```

其中双峰分布似乎是一种特殊情况。要从这些分布`evalRandIO distribution`中采样，只需在`IO`monad 中采样。

# c# - 我正在尝试用数据表中的行填充客户模型

> ID：10827224
> 
> 赞同：0
> 
> 时间：2012-05-31T03:53:51.853
> 
> 标签：c#, asp.net-mvc, ienumerable

我正在尝试用数据表中的行填充客户模型，但无法获得正确的语法。原始代码取自本教程[Your First ASP.NET Web API (C#](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api) )。

我已将 DataTable 添加到控制器，但我无法弄清楚如何将表中的行获取到我的客户模型中。我以为我可以用 foreach 来做到这一点，但正如我所说，我无法让语法正确。这就是我所拥有的

```
 Customer[] customers = new Customer[]
    {
        //new Customer {Id = "123", FirstName = "Buk", LastName = "Hix" }
        // Replace hard coded customer information with foreach loop.

        //commented out because it causes compile warnings
        //foreach (DataRow row in GetAllData().Rows)
        //{
        //    yield return new Customer
        //    {
        //        CustomerId = Convert.ToString(row["CustomerId"]),
        //        FirstName = Convert.ToString(row["FirstName"]),
        //        LastName = Convert.ToString(row["LastName"])
        //    };
        //}
    };

    public IEnumerable<Customer> GetAllCustomers()
    {            
        return customers;
    } 
```

完成我想做的事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:10:19.493

您可以使用 LINQ：

```
Customer[] customers = GetAllData()
    .Rows
    .Cast<DataRow>()
    .Select(row => new Customer
    {
        CustomerId = Convert.ToString(row["CustomerId"]),
        FirstName = Convert.ToString(row["FirstName"]),
        LastName = Convert.ToString(row["LastName"])
    })
    .ToArray(); 
```

确保您已添加`System.Linq`到`using`指令中以将扩展方法纳入范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:01:14.360

你很近。创建迭代器（返回使用 的 IEnumerable/IEnumerator 的函数`yield`）时，您只需将代码主体中的代码放入`yield`必要的值中。无需将它们放入另一个集合中。编译器将为代码生成一个迭代器。

```
public IEnumerable<Customer> GetAllCustomers()
{
    foreach (DataRow row in GetAllData().Rows)
    {
        yield return new Customer
        {
            CustomerId = row.Field<string>("CustomerId"),
            FirstName = row.Field<string>("FirstName"),
            LastName = row.Field<string>("LastName"),
        };
    }
} 
```

如果您愿意，在这里使用 LINQ 会更好。

```
public IEnumerable<Customer> GetAllCustomers()
{
    return
        from row in GetAllData().Rows
        select new Customer
        {
            CustomerId = row.Field<string>("CustomerId"),
            FirstName = row.Field<string>("FirstName"),
            LastName = row.Field<string>("LastName"),
        };
} 
```

# java - 使用扫描仪的逻辑错误。文本文件的第一行未打印到标准输出

> ID：10827225
> 
> 赞同：0
> 
> 时间：2012-05-31T03:53:54.390
> 
> 标签：java, file-io, text-files, java.util.scanner

我有以下代码和一个包含所有数字的输入文件，因此 txt 文件中的每一行只有一个数字。我将每行上的每个数字打印到标准输出上，如果遇到数字 42，我将停止打印。但问题是我用来读取文件的扫描仪对象未显示第一个数字，而仅从第二个数字打印我的 txt 文件的编号。我认为这与我不知道的scanner.nextline 函数有关，但我希望scanner 有一个getcurrent 或类似的东西以使事情变得更简单。无论如何，谁能告诉我如何解决这个问题并让第一行显示出来。

这是我的代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class driver {

    /**
     * @param args
     * @throws FileNotFoundException 
     */
    public static void main(String[] args) throws FileNotFoundException {
        // TODO Auto-generated method stub

        File theFile = new File("filepath.../input.txt");

        Scanner theScanner = new Scanner(theFile);

        //so that the scanner always starts from the first line of the document.
        theScanner.reset();

        while(theScanner.hasNext())
        {
            if(theScanner.nextInt() == 42)
            {
                break;
            }

            System.out.println(theScanner.nextInt());

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T04:03:27.823

问题是您在进行检查时正在读取一个数字，然后在读取另一个您打印出来的新数字。这意味着您每秒钟打印一次数字。要解决它，只需先存储数字：

```
 int number = theScanner.nextInt() 
       if(number == 42)
        {
            break;
        }

        System.out.println(number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:02:48.440

在打印到标准输出之前，我在扫描仪对象上调用了 nextInt() 方法两次。一次在 if 语句中，再次在 System.out.println 中。因此扫描仪从 txt 文件的第二行开始打印。

但解决方案将包括一行代码，如下所示：

```
 int temp = theScanner.nextInt(); 
```

在 if 语句之前，然后将 if 语句修改为：

```
if(temp == 42)
   { 
      break;

   }

   System.out.println(temp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T04:23:11.523

注意你调用了多少次 nextInt() 方法。即两次，因此您的代码必须从文件中跳过每隔一个整数。（如果您只从文件中读取两个整数，则只有第一个数字）

所以最简单的解决方案是将整数存储在一个局部变量中，并用它来比较和打印。

IE：

```
 while(theScanner.hasNext())
        {
            int nextInteger=theScanner.nextInt();
            if(nextInteger == 42)
            {
                break;
            }

            System.out.println(nextInteger);

        }
        theScanner.close(); 
```

# php - Linux中的PHP配置文件

> ID：10827226
> 
> 赞同：0
> 
> 时间：2012-05-31T03:54:06.417
> 
> 标签：php

系统：红帽

配置：

```
./configure --prefix=/path/to/php/share/php --with-apxs2=/path/to/apache2/bin/apxs --with-mysql --with-libdir=lib64 --with-ldap --with-ldap-sasl --with-config-file-path=/path/to/php/share/php.ini 
```

在 php.ini 中，我将**upload_max_filesize**设置为**50**并重新启动 apache。

我用

```
<?php
phpinfo();
?> 
```

去检查。配置文件（php.ini）路径是正确的，但是upload_max_filesize还是2M。有谁知道为什么配置失败？谢谢。

* * *

```
; Maximum allowed size for uploaded files.
; http://php.net/upload-max-filesize
upload_max_filesize = 50M

; Defines the default timezone used by the date functions
; http://php.net/date.timezone
date.timezone = Asia/Shanghai 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T04:10:41.700

在 phpinfo() 显示 php.ini 路径的信息中，仔细检查您是否正在编辑正确的路径，在进行修改后您应该重新启动 apache :-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:13:59.987

你的 phpinfo 输出到底是什么样的？您可能还必须增加 post_max_size 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:09:57.653

**我无法访问我的服务器，所以我现在无法检查它，但您可以尝试按照此[链接](http://blog.jc21.com/2007-05-03/change-the-maximum-upload-size-with-php/)中的说明操作，看看是否能解决您的问题。– 巴克斯**

谢谢巴克斯。.htaccess 有效！但我仍然不明白为什么 php.ini 不起作用。

# python - 更新集合 MongoDB 中的每个元素

> ID：10827227
> 
> 赞同：1
> 
> 时间：2012-05-31T03:54:08.233
> 
> 标签：python, mongodb, pymongo, updating

我正在尝试一次更新一个集合的每个元素。我的伪代码是：

```
for e in myColl.find():
    # ...calculations involving variables of 'e'
    myColl.update({'_id':e['_id']}, { '$set': {'myvar':123}}) 
```

在哪里`myvar`添加了一个新变量`e`。

此更新不会导致集合中的任何更改。

我想这是因为光标已经在循环`myColl`，因此无法在集合内更新，但我不知道如何绕过它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:05:08.060

```
for row in myColl.find():
    row['myvar'] = 123
    myColl.save(row) 
```

# iphone - 不能做 git stash apply

> ID：10827228
> 
> 赞同：2
> 
> 时间：2012-05-31T03:54:14.577
> 
> 标签：iphone, objective-c, ios, git, github

我试着做`git stash apply`，我得到：

```
warning: Cannot merge binary files: app.xcodeproj/project.xcworkspace/xcuserdata/aditya15417.xcuserdatad/UserInterfaceState.xcuserstate (Updated upstream vs. Stashed changes)

Auto-merging app.xcodeproj/project.xcworkspace/xcuserdata/aditya15417.xcuserdatad/UserInterfaceState.xcuserstate
CONFLICT (content): Merge conflict in app.xcodeproj/project.xcworkspace/xcuserdata/aditya15417.xcuserdatad/UserInterfaceState.xcuserstate 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T03:58:01.890

xcworkspace 文件通常只适用于您正在使用的机器和帐户（例如用户名 aditya15417），不应通过 Git 签入或跟踪。

我签入到我自己的 GitHub 帐户的唯一项目文件是“ `project.pbxproj`”。

因此，通过“”将它们从 git 中删除`git rm ________`（在此处插入文件名）

# php - PHP 电子邮件“发件人”字段中的额外字符

> ID：10827233
> 
> 赞同：0
> 
> 时间：2012-05-31T03:55:11.757
> 
> 标签：php, email

我正在尝试从 PHP 发送电子邮件，虽然它正在工作，但我注意到我在电子邮件的“发件人”部分收到了很多额外的东西。我**假设**额外的东西是来自我的服务器的信息？

例如，如果`$from = "myname"`，而不是`"myname"`仅按原样通过来自字段的电子邮件，我会得到如下信息：

> myname@p3nlhg.phx3.secureserver.net

这是我正在玩的 PHP，重要的部分是我的`$from`var：

```
$from = "myname";

mail($to,$formSubj,$formMssg,$from); 
```

老实说，这就是我所拥有的，不多也不少（就目前`$from`而言）。我怎样才能清理它或使它只有`$from`在这种情况下的普通值才会`"myname"`出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T04:19:15.397

mail 函数的第 4 个参数不能这样工作。它期望标题信息。要实现您想做的事情，请使用：

```
$header = "From: myname <no-reply@test.com> \r\n";
mail($to,$formSubj,$formMssg,$header); 
```

你也不应该使用孤独`myname`的。您需要一个有效的电子邮件地址字符串：`myname <no-reply@test.com>`或`no-reply@test.com`. 如果您只是`myname`输入 ，PHP 会尝试将其解释为电子邮件地址。这就是为什么你得到`myname@p3nlhg.phx3.secureserver.net`. `p3nlhg.phx3.secureserver.net`必须是您的服务器的主机名。

header 参数的一个好处是您可以使用它来指定其他不太常见的字段。例如：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n"; 
```

`\r\n`请注意，您需要在每个标题属性的末尾放置一个回车/换行 ( )。简单的换行将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T04:07:52.557

根据[`mail`文档](http://php.net/manual/en/function.mail.php)，您将`$from`其用作`$additional_headers`参数。

相反，更改`$from`为适当的标题。例如，

```
$from = "myname";
$headers = "From: $from <user@example.com>";
mail($to, $formSubj, $formMssg, $headers); 
```

根据文档`additional_headers`，

> 发送邮件时，邮件***必须***包含***From***标头。这可以通过***`additional_headers`***参数设置，也可以在 php.ini 中设置默认值。
> 
> 不这样做将导致类似于**警告的错误消息：mail(): "sendmail_from" not set in php.ini or custom "From:" header missing**。***From***标头还设置了 Windows 下的***Return-Path 。***

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T04:03:29.247

它来自您在服务器中安装的邮件服务器，尝试切换到另一个，如 postfix、courier 或其他。

# java - 将数据库内容缓存在内存中以提高性能

> ID：10827235
> 
> 赞同：0
> 
> 时间：2012-05-31T03:55:28.950
> 
> 标签：java, jdbc, database-caching

我有一个在 Glassfish 上运行的消息驱动 bean。它每秒接收数百条消息。收到消息后，需要读取JDBC数据库中的值并进行处理。

但是，数据库中的值每天只会更新一次或更少。因此，MDB 将读取的内容大部分时间都是一致的。那么，有没有什么好办法可以将内容缓存到内存中以提高性能呢？

更新：是否可以在 Glassfish 中为 MDB 配置内存数据库 JDBC 连接池？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:25:21.990

如果您认为使用第三方解决方案（如[memcached](http://memcached.org/)）会过大，您可能会受到[身份映射模式的启发并实现自己的缓存机制（使用自己的过期策略）。](http://martinfowler.com/eaaCatalog/identityMap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:57:19.337

最明显的答案是将表定义为 MEMORY 表类型。如果底层硬件不容易崩溃并且操作系统稳定并且连接了UPS，您可能需要考虑这一点。它还取决于自上次备份失败时丢失许多事务的后果。但在性能方面，这是闪电般的速度。可以在[此处](https://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)找到有关 MySQL 的更多信息。(YMMV)

我已经以这种方式实现了多个表，它对我来说非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:21:39.550

您可以使用一个简单的基于[SoftReference](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/SoftReference.html) HashMap 的缓存。这是完整的实现示例[SoftReference Cache](http://www.javaspecialists.eu/archive/Issue015.html)此外，您可以定期清除完整的 Map 以引入新数据。
或者，如果您可以使用 3rd 方库，您可以使用作为 Apache Collections 的一部分提供的[ReferenceMap 。](http://commons.apache.org/collections/api-2.1.1/org/apache/commons/collections/ReferenceMap.html)

# c# - 如何使用检索到的分层结果集创建对象？

> ID：10827237
> 
> 赞同：3
> 
> 时间：2012-05-31T03:55:46.183
> 
> 标签：c#

我正在使用 C# 语言。我的问题是我不知道如何将检索到的分层结果集存储到我的对象中。

这是我的对象：

```
public class CategoryItem
{
    public string Name { get; set; }
    public int CategoryID { get; set; }
    public int ParentID { get; set; }
    public List<CategoryItem> SubCategory = new List<CategoryItem>();
    public List<CategoryItem> GetSubCategory()
    {
        return SubCategory;
    }
    public void AddSubCategory(CategoryItem ci)
    {
        SubCategory.Add(ci);
    }
    public void RemoveSubCategory(CategoryItem ci)
    {
        for (int i = 0; i < SubCategory.Count; i++)
        {
            if (SubCategory.ElementAt(i).CategoryID == ci.CategoryID)
            {
                SubCategory.RemoveAt(i);
                break;
            }
        }
    }
} 
```

这是我从 MSSQL 服务器检索数据集的示例

```
ID  PrntID  Title   
_______ _______     
1   0   Node1   
2   1   Node2   
3   1   Node3   
4   2   Node4   
5   2   Node5   
6   2   Node6   
7   3   Node7   
8   4   Node8   
9   4   Node9   
10  9   Node10 
```

便于参考的树状图

```
Node 1
-Node 2
--Node 4
---Node 8
---Node 9
----Node 10
--Node 5
--Node 6
-Node 3
--Node 7 
```

我的问题是如何将此结果存储到我的“CategoryItem 对象”中。我不知道我需要为此使用迭代吗？特别是当节点为 2 级时。我想以这样的方式存储它：

```
List<CategoryItem> items = new List<CategoryItem>(); 
```

有了这个，我可以挖掘“项目”对象中的每个对象，并且可以使用我类的 GetSubCategory() 方法访问它的子类别/子类别/子项。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T04:55:58.913

如果您知道在您的 DataSet 中一个节点永远不会出现在其父节点之前，您可以使用此代码。当您可以查找新读取节点的父节点时，您可以在此处跟踪字典中已读取的项目。如果找到父节点，则将新项目添加到其子节点，否则它是第一级节点。

```
 public static List<CategoryItem> LoadFromDataSet(DataSet aDS)
    {
        List<CategoryItem> result = new List<CategoryItem>();
        Dictionary<int, CategoryItem> alreadyRead = new Dictionary<int, CategoryItem>();
        foreach (DataRow aRow in aDS.Tables["YourTable"].Rows)
        {
            CategoryItem newItem = new CategoryItem();
            newItem.CategoryID = (int)aRow["ID"];
            newItem.ParentID = (int)aRow["PrntID"];
            newItem.Name = (string)aRow["Title"];
            alreadyRead[newItem.CategoryID] = newItem;
            CategoryItem aParent;
            if (alreadyRead.TryGetValue(newItem.ParentID, out aParent))
                aParent.AddSubCategory(newItem);
            else
                result.Add(newItem);
        }
        return result;
    } 
```

如果我的假设不成立（即一个节点有可能在其父节点之前出现在 DataSet 中），您必须首先读取所有节点（并将它们放入 Dictionary），然后遍历同一个 Dictionary 以构建结果。像这样的东西：

```
 public static List<CategoryItem> LoadFromDataSet(DataSet aDS)
    {
        List<CategoryItem> result = new List<CategoryItem>();
        Dictionary<int, CategoryItem> alreadyRead = new Dictionary<int, CategoryItem>();
        foreach (DataRow aRow in aDS.Tables["YourTable"].Rows)
        {
            CategoryItem newItem = new CategoryItem();
            newItem.CategoryID = (int)aRow["ID"];
            newItem.ParentID = (int)aRow["PrntID"];
            newItem.Name = (string)aRow["Title"];
            alreadyRead[newItem.CategoryID] = newItem;
        }
        foreach (CategoryItem newItem in alreadyRead.Values)
        {
            CategoryItem aParent;
            if (alreadyRead.TryGetValue(newItem.ParentID, out aParent))
                aParent.AddSubCategory(newItem);
            else
                result.Add(newItem);
        }
        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:03:55.047

你必须编写递归代码来实现这一点。

```
//First of all, find the root level parent
int  baseParent = "0"; 
// Find the lowest root parent value
 foreach (var selection in collection)
 {
     //assign any random parent id, if not assigned before
      if (string.IsNullOrEmpty(baseParent))
        baseParent = selection["PrntID"];

     //check whether it is the minimum value
     if (Convert.ToInt32(selection["PrntID"]) < Convert.ToInt32(baseParent))
       baseParent = selection["PrntID"];
 }
//If you are sure that your parent root level node would always be zero, then you could   //probably skip the above part.
//Now start building your hierarchy
foreach (var selection in collection)
{
  CategoryItem item = new CategoryItem();
  //start from root
  if(selection["Id"] == baseParentId)
  {
    //add item property
    item.Id = selection["id];
    //go recursive to bring all children
    //get all children
    GetAllChildren(item , collection);
  }
}

private void GetAllChildren(CategoryItem parent, List<Rows> Collection)
{
  foreach(var selection in Collection)
  {
     //find all children of that parent
     if(selection["PrntID"] = parent.Id)
     {
       CategoryItem child = new CategoryItem ();
       //set properties
       child.Id = selection["Id"];
       //add the child to the parent
       parent.AddSubCategory(child);
       //go recursive and find all child for this node now
       GetAllChildren(child, Collection);
     }
   }
} 
```

注意：这不是完全有效的代码。但这会让您深入了解如何构建一个必须表示为对象的分层数据结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:04:42.893

将您的表加载到数据表中并首先找到根节点并创建根对象

```
DataRow[] rootRow = table.Select("PrntID = 0");
CategoryItem root = new CategoryItem() { CategoryID = (int)rootRow[0]["ID"].ToString(), Name = rootRow[0]["Title"].ToString(), ParentID = (int)rootRow[0]["PrntID"].ToString() }; 
```

然后你需要调用递归方法来添加子类别，

```
GetCategoryItem((int)rootRow[0]["ID"].ToString(), root); 
```

根据需要更改以下方法。

```
public void GetCategoryItem(CategoryItem parant)
{
    DataRow[] rootRow = table.Select("PrntID =" + parant.CategoryID);
    for (int i = 0; i < rootRow.Length; i++)
    {
        CategoryItem child = new CategoryItem() { CategoryID = (int)rootRow[i]["ID"].ToString(), Name = rootRow[i]["Title"].ToString(), ParentID = (int)rootRow[i]["PrntID"].ToString() };
        GetCategoryItem(child);
        parant.SubCategory.Add(child);
    }
} 
```

# ios - Macbook 1,1 - IOS 5.0.1 - Xcode 4.2 - 如果我在此开发，它可以在当前的设备上运行吗？

> ID：10827238
> 
> 赞同：2
> 
> 时间：2012-05-31T03:55:51.410
> 
> 标签：ios, xcode

我只有 Macbook，无法升级到 Lion。我想开始开发 IOS 应用程序。我有一个 iPod Touch 5.0.1，所以我很好。我的主要问题是这个-

当我完成应用程序并将它们部署到 Apple 后，它们是否可以在其他设备上正常工作，例如 iPhone 4S 5.1.1？

另外，如果我向 Apple 支付 100 美元进行开发，他们会支持我的 Xcode 4.2 全年吗？

我是否能够使用这种方案部署我的应用程序而不必担心 Apple 会阻止我？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:01:43.513

Xcode 4.2 是在 Snow Leopard 上运行的最后一个官方支持的 Xcode 版本，但如果你在其上进行开发，任何适用于旧 iOS 的东西都将在运行新操作系统的 iDevices 上运行。 [您*也许*可以让更新的 SDK 与 Xcode 4.2 一起运行，](https://stackoverflow.com/questions/9613565/is-is-possible-to-get-the-ios-5-1-sdk-for-use-with-xcode-4-2-on-snow-leopard)但我自己不会冒险。

我认为您将遇到的大问题是，如果您在 iDevice 上安装新操作系统进行测试，您最终可能无法使用您的设备进行测试（在 Xcode 管理器中）。因此，您可能希望至少将一台设备保留在 Xcode 4.2 的最后一个受支持的 iOS 版本上。

这应该会照顾你一整年。

希望你能从你正在构建的任何应用程序中赚到足够的钱来买一台 Macintosh，在那里你可以运行 Mountain Lion (OS 10.8) 和 Xcode 4.4 或 5 或一年后将推出的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:51:09.413

1.  是的。
2.  是的。
3.  是的。

你拥有哪个 Xcode 并不重要。你甚至可以拥有 Xcode 3 ;)

# ios - 在后台模式下保持流式音频连续

> ID：10827240
> 
> 赞同：2
> 
> 时间：2012-05-31T03:56:18.170
> 
> 标签：ios, http-live-streaming

我们的项目是用 AVPlayerItem + AVPlayer 播放流式直播音频（HTTP live streaming）。

但是我遇到两个问题：

1.  系统进入睡眠模式，30分钟后系统会自动断开wifi，音频暂停。如何防止系统自动断开wifi？
2.  我们的应用进入后台模式后，有时会因为m3u8播放列表在几秒钟内没有变化而暂停音频，然后应用由系统从后台状态转移到暂停状态。我该如何解决？

我们项目的设置：

*   在项目 plist 文件中的“UIBackgroundModes”上添加“音频”。
*   将 AudioSession 类别设置为 AVAudioSessionCategoryPlayback

播放列表（m3u8）：[http ://dload.kandian.com:22111/945622950.m3u8](http://dload.kandian.com:22111/945622950.m3u8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T12:22:27.153

这可能会解决您的问题：

1.  对于第一个问题`Application uses WiFi`，在 plist 文件中设置属性（参见[http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252 -SW12](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW12)

2.  对于第二个问题，您可以在开始媒体播放之前尝试调用它：

    ```
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
    ```

希望这可以帮助。

干杯

# php - 了解“发布/重定向/获取”模式

> ID：10827242
> 
> 赞同：41
> 
> 时间：2012-05-31T03:56:38.117
> 
> 标签：php, html, forms, session, post-redirect-get

我很难理解“发布/重定向/获取”的确切过程。

我已经通过这个网站和网络梳理了几个小时，除了“这里的概念”之外找不到任何东西。

如何理解发布/重定向/获取模式？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-01-30T13:11:26.623

[维基百科](http://en.wikipedia.org/wiki/Post/Redirect/Get)很好地解释了这*一点*！

## 问题

![问题](../Images/2dee6a6a8d0e6053930ebe04b6139f85.png)

## 解决方案

![解决方案](../Images/782125276dc6a2b9a6ff4a2b88326bb0.png)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-31T04:07:54.330

从您的[研究](http://wordsideasandthings.blogspot.ca/2013/04/post-redirect-get-pattern-in-php.html)中您可能知道，`POST`-redirect-`GET`看起来像这样：

*   客户得到一个带有表单的页面。
*   `POST`发送到服务器的表单。
*   服务器执行该操作，然后重定向到另一个页面。
*   客户端遵循重定向。

例如，假设我们有这样的网站结构：

*   `/posts`（显示帖子列表和“添加帖子”链接）
    *   `/<id>`（查看特定帖子）
    *   `/create`（如果使用该`GET`方法请求，则返回一个发布给自身的表单；如果是`POST`请求，则创建帖子并重定向到`/<id>`端点）

`/posts`它本身与这个特定的模式并没有真正的关系，所以我会忽略它。

`/posts/<id>`可以这样实现：

*   在数据库中找到具有该 ID 的帖子。
*   使用该帖子的内容呈现模板。

`/posts/create`可以这样实现：

*   如果请求是`GET`请求：
    *   显示一个空表单，其中目标设置为自身，方法设置为`POST`。
*   如果请求是`POST`请求：
    *   验证字段。
    *   如果存在无效字段，请再次显示表单并指出错误。
    *   否则，如果所有字段都有效：
        *   将帖子添加到数据库。
        *   重定向到`/posts/<id>`（`<id>`从调用数据库返回的位置）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-31T04:00:22.433

我会试着解释一下。也许不同的观点对你有用。

使用 PRG，浏览器最终会发出两个请求。第一个请求是 POST 请求，通常用于修改数据。服务器在响应中使用 Location 标头进行响应，而正文中没有 HTML。这会导致浏览器被重定向到一个新的 URL。然后，浏览器向新 URL 发出 GET 请求，该 URL 以浏览器呈现的 HTML 内容进行响应。

我将尝试解释为什么应该使用 PRG。GET 方法不应该修改数据。当用户点击一个链接时，浏览器或代理服务器可能会返回一个缓存的响应，而不会将请求发送到服务器；这意味着当您想要修改数据时，它没有被修改。此外，不应使用 POST 请求来返回数据，因为如果用户只想获取数据的新副本，他们将被迫重新执行请求，这将使服务器再次修改数据。这就是为什么浏览器会给你一个模糊的对话框，询问你是否确定要重新发送请求并可能再次修改数据或再次发送电子邮件。

PRG 是 POST 和 GET 的组合，它们将各自用于各自的用途。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-04-01T10:06:15.690

只是为了让人们可以看到一个代码示例（这是使用 express）：

```
app.post('/data', function(req, res) {
  data = req.body;  //do stuff with data
  res.redirect('public/db.html');
}); 
```

因此，为了澄清，它会立即刷新网页等刷新该网页（例如，如果您更新了其上的元素），它不会重新发布表单数据。

我的代码曾经看起来像这样：

```
app.post('/data', function(req, res) {
   data = req.body;
   res.sendFile('public/db.html');
}); 
```

所以这里的响应是在 /data 地址发送 html 文件。所以在地址栏中，按下提交按钮后，它会为我说：`localhost:8080/data`. 但这意味着在刷新该页面时，如果您刚刚提交了表单，它将再次提交。而且您不希望在数据库中提交两次相同的表单。因此，将其重定向到网页（*res.redirect*）而不是发送文件（*res.sendFile*），会停止重新提交该表单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-01T10:43:33.353

这都是一个概念问题，没有更多要理解的：

*   POST 是让客户端向服务器发送数据
*   GET用于客户端向服务器请求数据

因此，从概念上讲，服务器在 POST 请求中使用资源数据进行回答是没有意义的，这就是为什么重定向到（通常）已创建/更新的相同资源的原因。因此，如果 POST 成功，服务器认为客户端想要获取新数据，从而通知它对其进行 GET。

# c++ - 使用 C++、libpng 和 OpenMP 并行创建 PNG 文件

> ID：10827247
> 
> 赞同：10
> 
> 时间：2012-05-31T03:57:06.220
> 
> 标签：c++, parallel-processing, png, openmp, libpng

我目前正在尝试在 C++ 中实现基于 libpng 的 PNG 编码器，该编码器使用 OpenMP 来加速压缩过程。该工具已经能够从各种图像格式生成 PNG 文件。我将完整的源代码上传到了 pastebin.com，所以你可以看到我到目前为止所做的：http: [//pastebin.com/8wiFzcgV](http://pastebin.com/8wiFzcgV)

到目前为止，一切都很好！现在，我的问题是找到一种方法来并行生成包含压缩图像数据的 IDAT 块。通常，libpng 函数 png_write_row 在 for 循环中被调用，其中包含指向包含有关 PNG 文件的所有信息的结构的指针和包含单个图像行的像素数据的行指针。

（Pastebin 文件中的第 114-117 行）

```
//Loop through image
for (i = 0, rp = info_ptr->row_pointers; i < png_ptr->height; i++, rp++) {
    png_write_row(png_ptr, *rp);
} 
```

Libpng 然后逐行压缩并用压缩数据填充内部缓冲区。一旦缓冲区已满，压缩数据就会以 IDAT 块的形式刷新到图像文件中。

我的方法是将图像分成多个部分，让一个线程将第 1 行压缩到第 10 行，另一个线程将第 11 行压缩到第 20 行，依此类推。但是由于 libpng 使用的是内部缓冲区，它并不像我最初想的那么容易 :) 我必须让 libpng 将压缩数据写入每个线程的单独缓冲区。之后我需要一种方法以正确的顺序连接缓冲区，以便我可以将它们一起写入输出图像文件。

那么，有人知道我如何使用 OpenMP 来做到这一点，并对 libpng 进行一些调整吗？非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T05:00:11.200

这对于评论来说太长了，但也不是真正的答案——

我不确定您是否可以在不修改 libpng （或编写自己的编码器）的情况下做到这一点。无论如何，如果您了解 PNG 压缩的实现方式，将会有所帮助：

在高层次上，图像是一组像素行（通常代表 RGBA 元组的 32 位值）。

每行可以独立地应用一个[过滤器](http://www.w3.org/TR/PNG-Filters.html)——过滤器的唯一目的是使该行更“可压缩”。例如，“子”过滤器使每个像素的值与其左侧的值之间的差异。这种增量编码乍一看可能看起来很傻，但如果相邻像素之间的颜色相似（往往是这种情况），那么无论它们代表的实际颜色如何，结果值都非常小。压缩此类数据更容易，因为它的重复性更高。

再往下看，图像数据可以看作是字节流（行不再相互区分）。这些字节被压缩，产生另一个字节流。压缩后的数据被任意分割成段（你想要的任何地方！），每个段写入一个 IDAT 块（以及每个块的一点簿记开销，包括 CRC 校验和）。

最低级别将我们带到有趣的部分，即压缩步骤本身。PNG 格式使用[zlib](http://www.ietf.org/rfc/rfc1950.txt)压缩数据格式。zlib 本身只是一个包装器（有更多的簿记，包括 Adler-32 校验和），围绕着真正的压缩数据格式，[deflate](http://www.ietf.org/rfc/rfc1951.txt)（zip 文件也使用它）。deflate 支持两种压缩技术：霍夫曼编码（考虑到字符串中每个不同字节出现的频率，它将表示某个字节串所需的位数减少到最佳数量）和 LZ77 编码（它允许重复的字符串已经发生被引用而不是两次写入输出）。

并行化 deflate 压缩的棘手部分是，一般来说，压缩输入流的一部分需要前一部分也可用，以防需要引用。*但是*，就像 PNG 可以有多个 IDAT 块一样，deflate 被分解为多个“块”。一个块中的数据可以引用另一个块中先前编码的数据，但不是*必须*的（当然，如果不这样做可能会影响压缩率）。

因此，并行化 deflate 的一般策略是将输入分成多个*大部分*（以便压缩比保持高），将每个部分压缩成一系列块，然后将块粘合在一起（这实际上很棘手，因为块不' 并不总是以字节边界结束——但您可以放置​​一个空的非压缩块（类型 00），它将与字节边界对齐，在部分之间）。然而，这并非微不足道，需要控制最低级别的压缩（手动创建 deflate 块），创建跨越所有块的正确 zlib 包装器，并将所有这些填充到 IDAT 块中。

如果您想使用自己的实现，我建议您阅读[我自己的 zlib/deflate 实现](https://github.com/cameron314/PNGEncoder2/blob/master/DeflateStream.hx)（以及[我如何使用它](https://github.com/cameron314/PNGEncoder2/blob/ee76bd0a7b2bca5f8dab11e96bfb361c37ad2fcf/PNGEncoder2.hx#L918)），它是我为压缩 PNG 专门创建的（它是用 Haxe for Flash 编写的，但应该比较容易移植到C++）。由于 Flash 是单线程的，因此我不进行任何并行化，但我确实将编码拆分为多个帧上几乎独立的部分（“实际上”，因为在部分之间保留了小数字节状态），这在很大程度上相当于一样。

祝你好运！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-01T04:58:01.040

我终于得到了它来并行化压缩过程。正如 Cameron 在对他的回答的评论中提到的那样，我必须从 zstreams 中剥离 zlib 标头以将它们组合起来。不需要剥离页脚，因为 zlib 提供了一个名为 Z_SYNC_FLUSH 的选项，该选项可用于所有块（除了必须用 Z_FINISH 写入的最后一个块）以写入字节边界。因此，您可以在之后简单地连接流输出。最终，必须在所有线程上计算 adler32 校验和并将其复制到组合 zstream 的末尾。

如果您对结果感兴趣，可以在[https://github.com/anvio/png-parallel找到完整的概念证明](https://github.com/anvio/png-parallel)

# php - 在 Yii 中渲染位于当前主题视图中的静态页面

> ID：10827249
> 
> 赞同：1
> 
> 时间：2012-05-31T03:57:36.893
> 
> 标签：php, model-view-controller, yii

好的，我在 Yii 中有一个控制器类，除了使用其默认视图文件夹之外，我还想使用不同的视图文件夹。

自然行为是当`$this->render("<view file>");`您使用以下内容在项目中导航您的视图文件时......

> "//" 导航项目默认视图文件夹
> 
> “/”导航当前主题视图文件夹
> 
> 或者不使用任何东西在控制器的默认视图文件夹中自动选择视图

但我的问题是我没有呈现**视图文件**，而是呈现驻留在某个视图文件夹的文件夹中的**静态页面。**`/pages`我要导航的静态页面是驻留**在我当前主题文件夹**视图中的静态页面，但默认是控制器导航`/protected/view`文件夹内的静态页面

我也尝试过这个覆盖来修改控制器的视图文件夹。我将此代码放在我想在主题文件夹中呈现静态页面的控制器中

```
public function init(){
    $this->layout = "//layouts/script";
    $this->viewPath = "/js";
} 
```

但问题是 viewPath 是只读变量。

> *现在我的问题是如何渲染驻留在当前主题的视图文件夹中的静态页面？*

注意：如果您不理解我的问题，请不要投反对票。我愿意改变并尽可能为你解释我的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:43:42.947

当您以某种方式覆盖 中的`actions`方法时`SiteController`，您需要更改`CViewAction`的[basePath](http://www.yiiframework.com/doc/api/1.1/CViewAction#basePath-detail)属性。正如文档所说，它默认为页面。

你能试试这样的东西吗？

```
 public function actions()
 {
     return array(
        'page'=>array(
            'class'=>'CViewAction',
            'basePath'=>'path/to/your/theme/folder'
        ),
     );
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:09:03.410

为自己创建一个辅助类并声明此方法（更改文件路径和其他内容）：

```
public static function renderInternal($_viewFile_, $_data_ = null, $_return_ = false) {
        // we use special variable names here to avoid conflict when extracting data
        if (is_array($_data_)) {
            extract($_data_, EXTR_PREFIX_SAME, 'data');
        } else {
            $data = $_data_;
        }

        $viewsDir = '/protected/views/internals/';

        if ($_return_) {
            ob_start();
            ob_implicit_flush(false);
            require(getcwd() . $viewsDir . $_viewFile_ . '.php');
            return ob_get_clean();
        } else {
            require(getcwd() . $viewsDir . $_viewFile_ . '.php');
        }
    } 
```

使用它/调用它：

```
MyHelperClass::renderInternal( 'myviewfile', array( /* YOUR DATA */ ), /* RETURN CONTENTS OR NOT */ ) 
```

**注意**：更改`$viewsDir`为您想要的目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T05:19:17.973

在您的任何站点控制器或任何控制器中尝试此操作..

```
 public function actions()
    {
        return array(
            'page'=>array(
                'class'=>'CViewAction',
            ),
        );
    } 
```

或参考此链接...

```
http://www.yiiframework.com/wiki/22/how-to-display-static-pages-in-yii/ 
```

# google-app-engine - AppEngine应用程序中的在线和聊天

> ID：10827250
> 
> 赞同：0
> 
> 时间：2012-05-31T03:57:43.663
> 
> 标签：google-app-engine

我有一个使用 Google 帐户作为身份验证的 AppEngine 应用程序。查看某人是否在线或使用该应用程序的方法或想法是什么？并且能够与在线用户聊天。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:23:46.250

您可以使用 XMPP API 获取用户状态，并向他们发送出现在 Google Chat 中的消息。

[https://developers.google.com/appengine/docs/python/xmpp/](https://developers.google.com/appengine/docs/python/xmpp/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:22:20.877

在 App Engine 上实现聊天的官方方法是使用[Channel API](https://developers.google.com/appengine/docs/python/channel/overview)。但是，[配额](https://developers.google.com/appengine/docs/quotas#Channel)很奇怪，而且[0.01 美元/100 个连接](http://www.google.com/enterprise/cloud/appengine/pricing.html)相当昂贵。

我建议使用像[Pusher](http://www.pusher.com)这样的托管 Web 套接字服务，或者在另一台主机上运行您自己的 nodejs 服务器。

# ruby-on-rails - 一些 bootstrap-sass (v2.0.3) 变量的自定义值不起作用

> ID：10827255
> 
> 赞同：8
> 
> 时间：2012-05-31T03:58:33.347
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass

我正在尝试覆盖引导程序提供的一些默认变量，尤其是一些默认颜色和字体设置，但似乎只有少数几个正在生效。这是我的 custom.css.scss 的顶部：

```
$myOrange:#f89406;
$myBlueDark: #304269;
$myBlue: #91BED4;
$myBlueLight: #D9E8F5;
$myWhite: #eee;
$myGrayBlue: #43464C;

/* colors */
$linkColor: $myBlueDark;
$navbarBackground: $myBlueDark;
$navbarBackgroundHighlight: lighten($navbarBackground, 10);
$navbarLinkColor: darken($myOrange, 10);
$navbarLinkColorHover: $myOrange;
$bodyBackground: #000;
$dropdownBackground: $myBlueDark;
$dropdownLinkColor: $myOrange;
$hrBorder: $myBlue;
$heroUnitBackground: lighten($myOrange, 20);
$dropdownLinkColorHover: $myOrange;

/* typography */
$sansFontFamily: 'PT Sans Narrow', 'Lucida Grande', serif;
$baseFontSize: 16px;

@import 'bootstrap';

// ... rest of the css .... 
```

在这里，我为一些引导变量指定了值，并希望字体是指定的字体，链接颜色是我设置的值。

但是，我注意到这些值中只有少数有效。例如，我页面上的字体仍保持引导默认值（Helvetica Neue），但导航栏颜色更改为正确的值。

我在互联网上四处搜索，但我找到的解决方案都没有奏效。记录了一个类似于此问题的问题，但它已被关闭：[https ://github.com/thomas-mcdonald/bootstrap-sass/issues/102](https://github.com/thomas-mcdonald/bootstrap-sass/issues/102)

我会继续对该线程发表评论，但我只是想确保我没有遗漏任何东西。

当我稍后在 custom.css.scss 中明确执行此操作时，这里要注意的另一件事：

```
@mixin default_font {
  font-family: "PT Sans Narrow", "Lucida Grande", sans-serif;
  font-weight: 400;
}

body {
  padding-top: 60px;
  background-color: #D9E8F5;

  @include default_font;
} 
```

字体显示正常。`background-color`由于同样的问题，我在这里指定。

我正在使用 bootstrap-sass v2.0.3。我做错了什么或遗漏了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:39:47.213

当我正在开发一个演示应用程序来重现我的问题时：[https](https://github.com/verma/bootstrap-sass-tests) ://github.com/verma/bootstrap-sass-tests我重新启动了 Rails 开发服务器。

这似乎解决了这个问题。我不确定这是否是永久修复，所以我会等待，然后再将此问题标记为已回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T05:34:43.667

**从header**元素的 class 属性中删除**navbar-inverse**样式可能会解决此问题。

 **使用例如：

```
<header class="navbar navbar-fixed-top"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T04:06:17.547

嗯，我很幸运地将它用于字体和链接颜色：

```
$baseFontSize:          17px;
$baseFontFamily:        'Crete Round', 'Helvetica Neue', Helvetica, Arial, sans-serif !default;
$baseLineHeight:        20px;
$altFontFamily:         'Open Sans Condensed', Georgia, "Times New Roman", Times, serif !default;

$headingsFontFamily:    'Alfa Slab One'; // empty to use BS default, @baseFontFamily
$headingsFontWeight:    normal;    // instead of browser default, bold
$headingsColor:         $blueDark;

$linkColor:             $blueDark; 
```

您可以使用的变量可以在[_varibles.scss 文件](https://github.com/thomas-mcdonald/bootstrap-sass/blob/f0035b8cb721d8652d4d998258f68df0613d5dbc/vendor/assets/stylesheets/bootstrap/_variables.scss)中找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-07T17:53:48.613

你的 application.css.scss 文件是什么样的？我遇到了类似的问题，发现我有另一个样式表覆盖了我的基本字体，这是我不想要的。确保您没有其他文件导致覆盖（例如scaffolds.css），并确保您没有启用require_tree 选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-20T00:26:05.553

我将 !important 添加到 body 的 font-family 并解决了我的问题。

上下文：我的 Rails 5 应用程序遇到了类似的问题，我的自定义字体 (.otf) 未应用。在开发人员控制台中，我看到正文字体应用为“Helvetica Neue”，我认为它来自 bootstrap-sass。

```
body { 
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif 
... 
```

当我取消选中字体系列：“Helvetica Neue”时，我看到了我的字体，所以我知道我的自定义字体的资产管道工作正常。

前置 !important 似乎解决了我的问题。

```
body {
  font-family: 'Din-Light', 'Helvetica', 'Arial', 'sans-serif' !important;
} 
```**

# javascript - 如何检测javascript中的复制和粘贴？

> ID：10827256
> 
> 赞同：7
> 
> 时间：2012-05-31T03:59:36.950
> 
> 标签：javascript, html, forms

我有两个字段，一个是`emailid`，另一个是`password`我的表单。我想阻止用户粘贴到这些字段中。应该强制他们手动输入，例如 Google 表单。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T04:36:39.247

**您也可以禁用`ctrl+v`组合`right click`。**

对于 IE，您可以使用以下事件处理程序：

```
onpaste="return false;" 
oncut="return false;" 
oncontextmenu="return false;" 
oncopy="return false;". 
```

以下是适用于所有浏览器的解决方法：

```
function noCTRL(e) {
      var code = (document.all) ? event.keyCode : e.which;
      var ctrl = (document.all) ? event.ctrlKey : e.modifiers & Event.CONTROL_MASK;
      var msg = "Sorry, this functionality is disabled.";
      if (document.all) {
        if (ctrl && code == 86) {
          //CTRL+V
          alert(msg);
          window.event.returnValue = false;
        } else if (ctrl && code == 67) { 
         //CTRL+C (Copy)
          alert(msg);
          window.event.returnValue = false;
        }
      } else {
        if (ctrl == 2) {
          //CTRL key
          alert(msg);
          return false;
        }
      }
    } 
```

在 HTML 部分中，您的字段如下所示：

```
Email :<input name="email" type="text" value=""/><br/>
Password :<input name="password" type="password" value=""/><br/>
Confirm Email :<input name="email" type="text" value="" onkeydown="return noCTRL(event)"/>    
Confirm Password :<input name="password" type="password" value="" onkeydown="return noCTRL(event)"/> 
```

如果输入类型为，我认为用户不能复制密码字段`password`

希望这可以帮助。

**笔记：**

1.  在浏览器中禁用 JavaScript 将让用户为所欲为
2.  永远记住这一点：尊重用户的自由。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-03-19T16:45:34.837

## 2020 年更新

您可以使用一些事件来阻止这些操作[`copy`](https://developer.mozilla.org/en-US/docs/Web/API/Element/copy_event)，[`paste`](https://developer.mozilla.org/en-US/docs/Web/API/Element/paste_event)或修改正在复制或粘贴的数据。（请参阅浏览器支持的链接）

```
<input type="text" onpaste="return false">
```

或者更长的 javascript 版本：

```
const elem = document.getElementById('nopaste');

elem.addEventListener('paste', (event) => {
  event.preventDefault();
});
```

```
<input type="text" placeholder="can paste"><br>
<input type="text" id="nopaste" placeholder="can not paste">
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-06T21:58:14.927

你应该使用onpaste。当用户尝试粘贴文本时会触发粘贴事件。

HTML

```
<h3>Play with this text area:</h3>
<textarea id="editor" rows="3">Try copying and pasting text into this field!</textarea>

<h3>Log:</h3>
<p id="log"></p> 
```

JavaScript

```
function logCopy(event) {
  log.innerText = 'Copied!\n' + log.innerText;
}

function logPaste(event) {
  log.innerText = 'Pasted!\n' + log.innerText;
}

const editor = document.getElementById('editor');
const log = document.getElementById('log');

editor.oncopy = logCopy;
editor.onpaste = logPaste; 
```

# c++ - 析构函数中的分段超出范围错误

> ID：10827258
> 
> 赞同：0
> 
> 时间：2012-05-31T04:00:06.460
> 
> 标签：c++, segmentation-fault, destructor

我的析构函数中有分段错误，但我不太清楚为什么。该代码用于存储在节点数组中并链接以避免冲突的键/值对映射。

```
template<class V>
map<string, V>::~map()
{
    for(unsigned int i = 0; i < SIZE; i++){
        if(hashArray[i] != NULL){
            Node* tmpNode = hashArray[i];
             Node* currentNode = hashArray[i];
            while(currentNode->next != NULL){
                currentNode = currentNode->next;
                delete tmpNode;
                tmpNode = currentNode;
            }
            delete tmpNode;
        }
    }

    delete [] hashArray;
} 
```

调试器指向这条线，但我确定我不会超出范围。

```
while(currentNode->next != NULL){ 
```

如果需要，可以提供任何其他代码。预先感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:12:10.747

`hashArray[i]`我通过删除重复的 s对其进行了一些清理。还摆脱了对 null 的重复检查：

```
template<class V>
map<string, V>::~map()
{
    for(unsigned int i = 0; i < SIZE; i++) {
        Node* currentNode = hashArray[i];
        while(currentNode) {
            Node* next = currentNode->next;
            delete currentNode;
            currentNode = next;
        }
    }

    delete [] hashArray;
} 
```

# database - 如何将数据库作为 Perl 脚本的输入？

> ID：10827262
> 
> 赞同：0
> 
> 时间：2012-05-31T04:00:25.203
> 
> 标签：database, perl

我编写了一个 Perl 脚本，它读取整个目录并将目录中的所有文件作为输入。现在，我不想给一个目录作为输入，而是给一个数据库作为输入，它必须读取数据库中的所有表，就像读取目录中的文件一样。

我怎样才能做到这一点？请给我一个方法或想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:07:08.937

Perl [DBI](http://search.cpan.org/perldoc?DBI)（数据库接口）是数据库的主要 DBMS 中立接口。不同的 DBMS有单独的[DBD](http://search.cpan.org/modlist/Database_Interfaces/DBD)（数据库驱动程序）模块。您需要 DBI 和适当的 DBD 模块来访问数据库。您可以在 CPAN 上找到所有这些，当然，在[Database Interfaces](http://search.cpan.org/modlist/Database_Interfaces)下。

在 DBI 中，有一些方法可以查询系统目录，查找表的名称和表中的列以及类型等等。你可以用它来执行你的侦察任务。

# asp.net-mvc - 将 ajax actionlink 转换为引导按钮

> ID：10827264
> 
> 赞同：10
> 
> 时间：2012-05-31T04:00:47.113
> 
> 标签：asp.net-mvc, twitter-bootstrap

我有一个像这样的ajax actionlink：

```
 <div style="float:left"> @Ajax.ActionLink("EMPLOYEE", "_PartialEmployeeIndex", "Employee", new AjaxOptions() { UpdateTargetId = "divToUpdate" }) </div> 
```

我通常使用引导程序来设置按钮的样式，如下所示：

```
 <input class="btn btn-info" type="button" value="Input"> 
```

或者像这样

```
 <button class="btn btn-success" type="submit"> </button> 
```

那么如何将 ajax 操作链接转换为引导按钮？

我不想将类名放在包含 ajax actionlink 的 div 中，因为该按钮以黑色字体和下划线显示...

我希望它显示为没有下划线和白色字体的实际按钮

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-01T20:35:08.807

您应该能够使用[htmlAttributes](http://msdn.microsoft.com/en-us/library/dd470546.aspx)参数添加您想要的任何 Bootstrap 类：

```
@Ajax.ActionLink("EMPLOYEE", "_PartialEmployeeIndex", "Employee", new AjaxOptions() { UpdateTargetId = "divToUpdate" }, new { @class = "btn" }) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-18T12:15:11.203

如果你只想要一个图标，你可以这样做：

```
 @Ajax.ActionLink(" ", "Delete", new { id = 1 }, new AjaxOptions
                                        {
                                            Confirm = "Are you sure you wish to delete?",
                                            HttpMethod = "Delete",
                                            InsertionMode = InsertionMode.Replace,
                                            LoadingElementId = "div_loading"
                                        }, new { @class = "glyphicon glyphicon-trash" }) 
```

*   名称ationlink不能为null或为空，所以我推荐一个空格。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-27T09:02:41.300

如果您想要一个实际的 Ajax`button`元素，而不是样式 hack，它也是可能的，但有点复杂。遗憾的是，MS 尚未选择将 ActionButton 添加到 Html 和 Ajax 帮助程序，因为当您删除私有支持方法的重复时，差异实际上非常小（您只需要下面显示的`ActionButton`和方法）。`GenerateButton`

最终结果是您可以拥有像 ajax 动作链接一样触发的真实按钮：

## 例如

```
@Ajax.ActionButton("Delete", "Delete", "document", 
     new { id = ViewBag.Id }, 
     new AjaxOptions() 
     { 
         Confirm="Do you really want to delete this file?", 
         HttpMethod = "Get", 
         UpdateTargetId = "documentlist" }, 
         new { id = "RefreshDocuments" 
     }) 
```

## 1.创建一个AjaxHelper扩展

下面的代码基于 AjaxExtensions 类的反编译，因为许多必需的帮助方法未在 HtmlHelper 上公开。

```
public static partial class AjaxExtensions
{
    public static MvcHtmlString ActionButton(this AjaxHelper ajaxHelper, string buttonText, string actionName, string controllerName, object routeValuesBlah, AjaxOptions ajaxOptions, object htmlAttributesBlah)
    {
        // Convert generic objects to specific collections
        RouteValueDictionary routeValues = new RouteValueDictionary(routeValuesBlah);
        RouteValueDictionary htmlAttributes = HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributesBlah);

        if (string.IsNullOrEmpty(buttonText))
            throw new ArgumentException("Button text must be provided");
        string targetUrl = UrlHelper.GenerateUrl((string)null, actionName, controllerName, routeValues, ajaxHelper.RouteCollection, ajaxHelper.ViewContext.RequestContext, true);
        return MvcHtmlString.Create(GenerateButton(ajaxHelper, buttonText, targetUrl, AjaxExtensions.GetAjaxOptions(ajaxOptions), htmlAttributes));
    }

    public static string GenerateButton(AjaxHelper ajaxHelper, string linkText, string targetUrl, AjaxOptions ajaxOptions, IDictionary<string, object> htmlAttributes)
    {
        TagBuilder tagBuilder = new TagBuilder("input");
        tagBuilder.MergeAttribute("value", linkText);
        tagBuilder.MergeAttributes<string, object>(htmlAttributes);
        tagBuilder.MergeAttribute("href", targetUrl);
        tagBuilder.MergeAttribute("type", "button");
        if (ajaxHelper.ViewContext.UnobtrusiveJavaScriptEnabled)
            tagBuilder.MergeAttributes<string, object>(ajaxOptions.ToUnobtrusiveHtmlAttributes());
        else
            tagBuilder.MergeAttribute("onclick", AjaxExtensions.GenerateAjaxScript(ajaxOptions, "Sys.Mvc.AsyncHyperlink.handleClick(this, new Sys.UI.DomEvent(event), {0});"));
        return tagBuilder.ToString(TagRenderMode.Normal);
    }

    private static string GenerateAjaxScript(AjaxOptions ajaxOptions, string scriptFormat)
    {
        string str = ajaxOptions.ToJavascriptString();
        return string.Format((IFormatProvider)CultureInfo.InvariantCulture, scriptFormat, new object[1] { str });
    }

    private static AjaxOptions GetAjaxOptions(AjaxOptions ajaxOptions)
    {
        if (ajaxOptions == null)
            return new AjaxOptions();
        else
            return ajaxOptions;
    }

    public static string ToJavascriptString(this AjaxOptions ajaxOptions)
    {
        StringBuilder stringBuilder = new StringBuilder("{");
        stringBuilder.Append(string.Format((IFormatProvider)CultureInfo.InvariantCulture, " insertionMode: {0},", new object[1]
        {
             ajaxOptions.InsertionModeString()
        }));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("confirm", ajaxOptions.Confirm));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("httpMethod", ajaxOptions.HttpMethod));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("loadingElementId", ajaxOptions.LoadingElementId));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("updateTargetId", ajaxOptions.UpdateTargetId));
        stringBuilder.Append(ajaxOptions.PropertyStringIfSpecified("url", ajaxOptions.Url));
        stringBuilder.Append(ajaxOptions.EventStringIfSpecified("onBegin", ajaxOptions.OnBegin));
        stringBuilder.Append(ajaxOptions.EventStringIfSpecified("onComplete", ajaxOptions.OnComplete));
        stringBuilder.Append(ajaxOptions.EventStringIfSpecified("onFailure", ajaxOptions.OnFailure));
        stringBuilder.Append(ajaxOptions.EventStringIfSpecified("onSuccess", ajaxOptions.OnSuccess));
        --stringBuilder.Length;
        stringBuilder.Append(" }");
        return ((object)stringBuilder).ToString();
    }

    public static string InsertionModeString(this AjaxOptions ajaxOptions)
    {
        switch (ajaxOptions.InsertionMode)
        {
            case InsertionMode.Replace:
                return "Sys.Mvc.InsertionMode.replace";
            case InsertionMode.InsertBefore:
                return "Sys.Mvc.InsertionMode.insertBefore";
            case InsertionMode.InsertAfter:
                return "Sys.Mvc.InsertionMode.insertAfter";
            default:
                return ((int)ajaxOptions.InsertionMode).ToString((IFormatProvider)CultureInfo.InvariantCulture);
        }
    }

    public static string EventStringIfSpecified(this AjaxOptions ajaxOptions, string propertyName, string handler)
    {
        if (string.IsNullOrEmpty(handler))
            return string.Empty;
        return string.Format((IFormatProvider)CultureInfo.InvariantCulture, " {0}: Function.createDelegate(this, {1}),",
            new object[2]
              {
                propertyName,
                handler
              });
    }

    public static string PropertyStringIfSpecified(this AjaxOptions ajaxOptions, string propertyName, string propertyValue)
    {
        if (string.IsNullOrEmpty(propertyValue))
            return string.Empty;
        string str = propertyValue.Replace("'", "\\'");
        return string.Format((IFormatProvider)CultureInfo.InvariantCulture, " {0}: '{1}',",
            new object[2]
              {
                propertyName,
                str
              });
    }
} 
```

## 2.修改jquery.unobtrusive-ajax.js

只需要对 jquery.unobtrusive-ajax.js 的 JQuery 进行小的更改即可接受新的按钮对象，因为它非常接近开始。首先，选择器需要接受按钮和链接，然后 href 需要来自一个属性，以便非链接可以提供它（不严格兼容浏览器，但目前可以使用）。

```
$(document).on("click", "input[data-ajax=true],a[data-ajax=true]", function (evt) {
        evt.preventDefault();
        asyncRequest(this, {
            url: $(this).attr("href"),
            type: "GET",
            data: []
        });
    }); 
```

*注意：这是使用截至回答日期的所有内容的最新版本（MVC 5）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T17:28:00.600

如果您不想担心为每个 Bootstrap 元素分配适当的类，请查看[TwitterBootstrapMVC](https://www.twitterbootstrapmvc.com/)

在带有 ajax 链接的示例中，您将编写如下内容：

```
@Ajax.ActionLink("EMPLOYEE", "_PartialEmployeeIndex", "Employee", ).AjaxOptions(new AjaxOptions() { UpdateTargetId = "divToUpdate" }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-29T21:00:21.440

另一种方法是使用 Ajax.BeginForm，它允许您直接输入 HTML。这假设您尚未进入表单。

```
@using (Ajax.BeginForm("EMPLOYEE", "_PartialEmployeeIndex", "Employee", new AjaxOptions() { UpdateTargetId = "divToUpdate" }))
{
    <button type="submit" id="EmployeeButton" title="Employee" aria-label="Employee Button">
        <span class="glyphicon glyphicon-trash"></span>
    </button>
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-12T22:22:15.120

添加到特里答案，如果你想添加 html 到按钮，最好的方法是使用 Javascript 来附加 html 代码。Ajax.Actionlink 的 linkText 参数自动对您提供的任何文本进行编码，您无法避免这种情况（除了编写您自己的帮助程序）。

JQuery append 或 prepend 之类的东西会起作用。

```
<div> 
@Ajax.ActionLink("EMPLOYEE", "_PartialEmployeeIndex", "Employee", new AjaxOptions() { UpdateTargetId = "divToUpdate" }, new { @class = "btn btn-default my-custom-class" }) 
</div>

<script>
    $(".my-custom-class").prepend("<span class=\"glyphicon glyphicon-pencil\"></span>&nbsp; ");
</script> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-02-07T13:03:46.420

```
@Ajax.ActionLink(" ", "EditUser/" + Model.Id, null, new AjaxOptions { 
      OnSuccess = "userEditGet", 
      HttpMethod = "post", 
      LoadingElementId = "ajaxLoader" }
 ,new { @class = "btn btn-default glyphicon glyphicon-edit" }) 
```

# java - 如何防止在spring cacheable中更改缓存的返回值

> ID：10827267
> 
> 赞同：2
> 
> 时间：2012-05-31T04:01:06.503
> 
> 标签：java, spring, caching, ehcache

我正在使用 ehcache 作为缓存实现来解决 spring 3.1 注释缓存。

像这样返回值的方法

```
@Cacheable("cache")
public MyObject getObj(Object param); 
```

我第一次得到了一个 myobject 返回值，它是可编辑的。ehcache 可以通过设置“copyOnRead”或“copyOnWrite”来做一些事情。它将在读/写时强制序列化对象。但是第一次spring不会从缓存中获取值，它总是通过方法本身返回。

有没有办法获得一个只读的返回值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T22:15:53.970

您可以编写自己的方面，始终创建返回值的副本，这将使您独立于某些 Ehcache 设置。

起初，像`@CopyReturnValue`这样的标记注释可以很好地表达切入点：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface CopyReturnValue {
} 
```

现在，切面可以将此注解用于切入点表达式：

```
@Aspect
@Component
public class CopyReturnValueAspect {
    @Around("@annotation(CopyReturnValue)")
    public Object doCopyReturnValue(ProceedingJoinPoint pjp) throws Throwable {
        Object retVal = pjp.proceed();
        Object copy = BeanUtils.cloneBean(retVal); // create a copy in some way
        return copy;
    }
} 
```

最后，将注释添加到您的方法中：

```
@CopyReturnValue
@Cacheable("cache")
public MyObject getObj(Object param); 
```

对于`CopyReturnValueAspect`我[`BeanUtils`](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/BeanUtils.html)用来创建返回值的副本 - 仅作为示例。有关该主题的更多信息，您可能需要查看[如何将属性从一个 Java bean 复制到另一个？](https://stackoverflow.com/questions/835416/how-to-copy-properties-from-one-java-bean-to-another)

哦，别忘了在 Spring 配置中启用 @AspectJ 支持（如果您还没有的话）：

```
<aop:aspectj-autoproxy /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-02T14:28:13.127

我对弹簧缓存有同样的问题。我不想从缓存中接收相同的 java 对象。

就我而言，我想缓存具有许多字段等的大型 Java 对象。所以用深拷贝来拷贝所有的数据类是很痛苦的。我阅读了有关使用序列化复制 java 对象的文章。

[http://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html](http://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html)

这让我想到了只缓存序列化数据的想法。每次从缓存中读取对象时，都会对其进行反序列化。

对于序列化，我使用了 apache commons helper 方法

```
@Override
public SerializedQuestions readUserQuestion(UID questionId, Locale locale) {
 byte[] serializedData = readCachedUserQuestion(questionId, locale);
 Object deserializedobject = org.apache.commons.lang.SerializationUtils.deserialize(serializedData);
 return (SerializedQuestions) deserialize;
}

@Override
@Cacheable(value = SpringCacheKeys.USER_QUESTION_CACHE)
  public byte[] readCachedUserQuestion(UID questionId, Locale locale) {

  //read object from db
  SerializedQuestions questions = new SerializedQuestions()

  return org.apache.commons.lang.SerializationUtils.serialize(questions);
} 
```

*如果对readCachedUserQuestion*的调用可能在同一个类中，则取决于 spring 配置。默认情况下，仅缓存对方法的外部调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-02T15:59:03.707

我找到了一个对我有用的肮脏的解决方案。通过创建另一个类，它包含与返回的对象相同的属性，然后我使用 ModelMapper 将返回的对象映射到我的新对象。例如我有一个 MyObject 类：

```
 public class MyObject {
     private Long id;
     private Long label;

    //getters and setters
    } 
```

新的 Created 类：

```
public class MyObjectCopy {
    private Long id;
    private Long label;

    //getters and setters
} 
```

以及一个返回 MyObject 的可缓存方法：

```
 @Cacheable("cache")
public MyObject getMyObject(); 
```

并防止缓存被修改：我必须将该对象映射到我的 classCopy 然后我处理它：

```
MyObjectCopy myObjectCopy = modelMapper.map(myobject, MyObjectCopy.class); 
```

不要忘记为嵌套对象创建一个复制类；

# sql - 包装存储过程 SQL

> ID：10827268
> 
> 赞同：0
> 
> 时间：2012-05-31T04:01:07.040
> 
> 标签：sql, oracle, function, procedure

使用 oracle 对 sql 语句进行编码，得到了一些我不完全理解/难以掌握的作业（因此，如果您有任何关于基本 sql 过程/功能的好的教程/链接，将不胜感激。

## 这是问题

一种存储过程，其中列出了 La Trobe 电子拍卖数据库系统中所有物品的名称、描述和价值，以及一列显示：如果拍卖已经结束，则显示“已售出”，如果拍卖已售出，则显示“无出价”如果拍卖已经结束但未达到保留价，则已关闭且未对“无销售”项目进行投标

## 如果该物品的拍卖仍在进行中，则为“拍卖中”

```
Item (itemNumber, itemName, itemDescription, itemValue, itemLocation, 
categoryID, sellerUsername)   

Auction (auctionNumber, currency, startDateTime, endDateTime, shippingTerms, 
startBidAmount, reserveAmount, bidIncrementAmount, noOfItems, itemSold, 
itemNumber feedbackDateAndTime, rating, comments, paymentDate, paymentid)

Bid (bidderUsername, auctionNumber, bidDateTime,bidAmount) 
```

这是我制定的理论，但我不知道如何编码。

```
status column -  a)sold, closed and item is sold
                 b)no bid, auction is close and no bids
                 c)no sale, the auction is closed but reserve wasnt met
                 d)on auction, auction for the item is still open

                 a) if i.itemnumber=a.itemnumber and itemSold='y'
                 b) if a.auctionnumber != b.auctionnumber and systemdate>endDateTime
                 c) if sysdate>endDatetime and a.auctionnumber=b.auctionnumber 
                 and reserveamount>select b.bidAmount 
                 from bid where a.auctionnumber=b.auctionnumber 
                 and b.bidAmount.max;
                 d) if itemSold ='n' and sysdate<endDateTime;

CREATE OR REPLACE PROCEDURE allItemStatus
AS 
    p_itemName Item.itemName%TYPE;
    p_itemDescription Item.itemDescription%TYPE;
    p_itemValue Item.itemValue%TYPE;
    P_itemSold Auction.itemSold%TYPE;
    BEGIN
SELECT i.itemName, i.itemDescription, i.itemValue, a.itemSold
INTO p_itemName, p_itemDescription, p_itemValue , p_itemSold
FROM dbf12.Item i, dbf12.Auction a
WHERE i.itemNumber=a.itemNumber 
AND a.itemSold='Y';
DBMS_OUTPUT.PUT_LINE('Item Name: '||p_itemName);
DBMS_OUTPUT.PUT_LINE('Item Description: '||p_itemDescription);
DBMS_OUTPUT.PUT_LINE('Item Value: '||p_itemValue);
        DBMS_OUTPUT.PUT_LINE('Item Sold: '||p_itemSold);
    END allItemStatus; 
```

任何帮助将不胜感激。我知道我几乎没有写出整件事，但我不知道该去哪里。

这是我当前的代码，它不喜欢我的 sysdate>a.enddattime

```
SELECT
   i.itemname,
   i.itemdescription,
   i.itemvalue,
   CASE
       WHEN i.itemnumber=a.itemnumber and a.itemSold='y' THEN 'Sold'
       WHEN a.auctionnumber != b.auctionnumber and systemdate>endDateTime THEN 'No Bids on that closed auction'
       WHEN TO_CHAR(sysdate,'DD-MON-YY')<a.endDatetime and a.auctionnumber=b.auctionnumber 
                 and reserveamount>(
                 SELECT b.bidAmount 
                 WHERE a.auctionnumber=b.auctionnumber 
                 AND b.bidAmount.max) THEN 'No Bids that meets the reserve'
        ELSE 'Auction Still Open'
   END 
FROM 
   dbf12.item i, dbf12.auction a, dbf12.bid b; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:14:23.323

使用 CASE 语句

```
SELECT
   itemname,
   itemdescription,
   itemvalue,
   CASE
       WHEN status=1 THEN 'Sold'
       WHEN status=2 THEN 'No Bid'
       WHEN status=3 AND (another condition here) THEN 'Closed'
       ELSE 'What Else'
   END display
FROM 
    eAuction 
```

“display”是显示“Sold”等的列的名称。

# java - Jasper 报告打开时间过长

> ID：10827275
> 
> 赞同：0
> 
> 时间：2012-05-31T04:01:47.583
> 
> 标签：java, swing, jasper-reports

我从面板的报告预览表单中调用此函数。

演示：主面板 - [调用] - ReportSelectionDialog(Frame) - [打开] Report(Frame)

问题是当我直接从 MainPanel 打开报告时

演示：主面板 - - 报告（框架）

JasperFillManager 只需要一秒钟来填写报告，但是当我进行第一个演示时，JasperFillManager 需要 20-30 秒来填写报告。我检查了所需的参数（连接、参数映射），并在打开 ReportSelectionDialog 时立即加载它们。我需要 ReportSelectionDialog，但我不想为了打开报告而等待这么久。请帮忙。这是我加载报告的代码。是否有另一种方法来填写报告。还有有没有办法只加载 .jasper 文件而不是每次都编译报告？

```
private void openReport(){
    String reportFile = getFileName(reportList.getSelectedValue().toString());
    FileInputStream fs = null;

    try {
        fs = new FileInputStream(reportPath+reportFile);
        JasperDesign jasperDesign = JRXmlLoader.load(fs);
        JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign);
        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, parameters, conn);
        javax.swing.JFrame jframe = new javax.swing.JFrame();
        jframe.setIconImage(Toolkit.getDefaultToolkit().getImage(this.getClass().getResource("/timsoftware/images/timlogo.png")));
        jframe.getContentPane().add(new JRViewer(jasperPrint));
        jframe.pack();
        jframe.setExtendedState(javax.swing.JFrame.MAXIMIZED_BOTH);
        jframe.setVisible(true);
    } catch (FileNotFoundException | JRException | HeadlessException e) {
        clsErrorHandler.printError(e.toString(), panelName, "PrintRecord");
    } finally {
        try {
            fs.close();
        } catch (IOException ex) {
            Logger.getLogger(ReportPreviewForm.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    this.dispose();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:03:27.620

```
 JasperDesign jasperDesign = JRXmlLoader.load(fs);
 JasperReport jasperReport = JasperCompileManager.compileReport(jasperDesign); 
```

将这些行移出方法和初始化序列中的某个位置。可能是构造函数？它应该可以解决问题。问题是您在方法中一遍又一遍地编译报告，这不是必需的。如果你做一次初始化`jasperReport`就足够了。

# android - 使用 AsyncTask 类进行并行操作并显示进度条

> ID：10827280
> 
> 赞同：1
> 
> 时间：2012-05-31T04:02:41.773
> 
> 标签：android, android-asynctask, android-progressbar

我正在使用异步任务类显示一个进度条，并且同时在并行操作中，我想从另一个类的函数中检索一个字符串数组，该函数需要一些时间来返回字符串数组。

问题是，当我将函数调用放在执行 AsyncTask 类的背景函数中时，它会在执行背景中给出错误，并且在执行背景时给出无法更改 UI 的消息。

因此，我将函数调用放在 Asynctask 类的 post Execute 方法中。它不会给出错误，但在进度条达到 100% 后，屏幕会变黑并需要一些时间才能开始新的活动。

我如何显示进度条并同时调用函数。？？请帮助，m 遇险

这是代码

```
package com.integrated.mpr;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Progess extends Activity implements OnClickListener{

    static String[] display = new String[Choose.n];
    Button bprogress;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progress);  
        bprogress = (Button) findViewById(R.id.bProgress);
        bprogress.setOnClickListener(this); 
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch(v.getId()){
        case R.id.bProgress:        
            String x ="abc";    
            new loadSomeStuff().execute(x);     
            break;
        }
    }

    public class loadSomeStuff extends AsyncTask<String , Integer , String>{

        ProgressDialog dialog;
        protected void onPreExecute(){
            dialog = new ProgressDialog(Progess.this);
            dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            dialog.setMax(100);
            dialog.show();
        }
        @Override
        protected String doInBackground(String... arg0) {
            // TODO Auto-generated method stub

            for(int i = 0 ;i<40;i++){
                publishProgress(5);

                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            dialog.dismiss();
            String y ="abc";
            return y;
        }

        protected void onProgressUpdate(Integer...progress){

            dialog.incrementProgressBy(progress[0]);
        }

        protected void onPostExecute(String result){
            display = new Logic().finaldata();
            Intent openList = new Intent("com.integrated.mpr.SENSITIVELIST");
            startActivity(openList);    
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:16:46.983

您不能在 doInBackground() 中关闭对话框 - 即使关闭对话框也需要 UI 任务。将 dialog.dismiss() 移动到 AsyncTask 的 onPostExecute()。

# performance - cudaEventRecord 返回零

> ID：10827282
> 
> 赞同：1
> 
> 时间：2012-05-31T04:02:52.247
> 
> 标签：performance, time, cuda

我在 GPU 上运行图像过滤器，我需要测量程序的每个部分进行比较所需的时间。首先我尝试了 time.h 库，但它总是返回零。然后我读[了这篇文章](https://stackoverflow.com/questions/10378801/calculating-time-using-clock-gives-value-as-zero-linux)

并在调用内核之前和之后在我的程序中使用了相同的代码，但它仍然返回零。谁能告诉我可能是什么问题？

这是我的代码：

```
cudaEvent_t start,stop;
cudaEventCreate(&start);
cudaEventCreate(&stop);
float Elapsed=0,Cycle;
while(count)
{
    cudaEventRecord(start,0);
    ImgFilter<<<dimGrid,dimBlock>>>...
    cudaEventRecord(stop,0);
    cudaElapsedTime(&Cycle,statr,stop);
    Elapsed += Cycle;
}
printf("Time = %f",Elapsed); 
```

我也尝试打印“循环”，但它总是为零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:38:26.617

你错过了调用`cudaEventSynchronize`函数

```
cudaEvent_t start,stop;
cudaEventCreate(&start);
cudaEventCreate(&stop);
float Elapsed=0,Cycle;
while(count)
{
    cudaEventRecord(start,0);
    ImgFilter<<<dimGrid,dimBlock>>>...
    cudaEventRecord(stop,0);
    cudaEventSynchronize(stop);
    cudaElapsedTime(&Cycle,statr,stop);
    Elapsed += Cycle;
}
printf("Time = %f",Elapsed); 
```

请注意，该设备函数在所有 CUDA 线程完成执行之前返回，您需要`cudaThreadSynchronize`在内核调用之后使用。

# php - PHP使用默认邮件客户端打开新电子邮件

> ID：10827287
> 
> 赞同：4
> 
> 时间：2012-05-31T04:03:47.247
> 
> 标签：php, html, email

我想从一个链接打开一封电子邮件，该链接是个人电子邮件地址，该地址显示在带有他们个人信息的表格中。

我可以“有点”让它发挥作用；

```
<a href="mailto:<?php $person['Person']['primEmail']; ?>"><?php echo $person['Person']['primEmail']; ?></a> 
```

新电子邮件使用默认邮件客户端打开，但是电子邮件地址未填充在“收件人：”字段中，这正是我所追求的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T04:06:22.293

您拥有的代码产生以下内容：

```
<a href="mailto:">info@example.com</a> 
```

这会导致您遇到的行为，因为该`href`属性未指向实际的电子邮件地址。这是由于缺少`print`或`echo`在`href`属性中。您的代码应如下所示：

```
<a href="mailto:<?php echo $person['Person']['primEmail']; ?>"><?php echo $person['Person']['primEmail']; ?></a> 
```

这将产生：

```
<a href="mailto:info@example.com">info@example.com</a> 
```

并将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:17:03.723

您的代码是编写的...未填充的原因要解决的是您的代码中存在小问题..锚标记中没有回显...

```
<a href="mailto:<?php echo $person['Person']['primEmail']; ?>"><?php echo $person['Person']['primEmail']; ?></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T01:58:39.707

试试这个

```
<?php

    header("location: mailto:".$person['Person']['primEmail']);

?> 
```

这个对我有用

# java - 第一个安卓应用——谷歌和全球定位系统？

> ID：10827291
> 
> 赞同：0
> 
> 时间：2012-05-31T04:04:00.367
> 
> 标签：java, android, google-maps

我是一名 .Net 开发人员，想要制作我的第一个 Android 应用程序。我已经安装了 Eclipse 并且能够制作通常的 Hello World 应用程序。现在，我的下一步是一个有用的应用程序（对我来说），它会根据我的位置向我显示地理信息。

我希望这是一个编写简单的应用程序，并且是第一个 Andoid 应用程序的良好入门。

我想创建一个简单的屏幕，显示离我当前位置最近的郊区。所以，一个非常基本的屏幕，保持打开（不锁定？），并简单地显示“你在里面”。我不确定这是否可能，但如果我能显示“您最近的火车站是”，那就太好了

我想请一位导师，或者可以指导我的人，但那是我的运气，我正在寻找有关如何做到这一点的指示和想法。然后，我想将其作为初学者（但经验丰富的开发人员）可以使用 Android 做什么的示例来分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:14:33.967

[http://android-er.blogspot.in/2009/11/mapview-to-center-on-current-location.html](http://android-er.blogspot.in/2009/11/mapview-to-center-on-current-location.html)

对不起，我错过了一个'c'。现在它的工作：D再次一切顺利

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:30:19.077

1） [本](http://www.vogella.com/articles/AndroidLocationAPI/article.html)教程将帮助您学习谷歌地图

2） [本](http://developer.android.com/guide/topics/location/obtaining-user-location.html)教程将帮助您找到设备的当前位置。

3) [本](https://developers.google.com/maps/documentation/places/)教程将帮助您使用 Google Place API 找到最近的地方

4) 如果您想在谷歌地图上显示点（android 术语中的叠加层），[本教程将为您提供帮助。](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)

希望这个帮助。维普尔

# facebook - 强制登录使用APP

> ID：10827294
> 
> 赞同：-1
> 
> 时间：2012-05-31T04:04:34.230
> 
> 标签：facebook

强制登录才能使用我的APP？我可以像下面的例子那样做吗？

当没有登录的人进入您的应用程序时，例如：
[https](https://apps.facebook.com/gmteste/)
://apps.facebook.com/gmteste/ 他们可以在没有登录的情况下看到您的整个应用程序，我可以强制他们登录吗？例如：
[https ://apps.facebook.com/ruaevolution/](https://apps.facebook.com/ruaevolution/)

另外，我在这里没有找到任何这样回答的问题。或在 Facebook 本身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:29:19.457

只需解析 signed_request，看看它是否设置了 oauth_token 属性 - 如果是，则用户已授权您的应用程序，否则没有。

[https://developers.facebook.com/docs/authentication/signed_request/](https://developers.facebook.com/docs/authentication/signed_request/)

# asp.net - 令人困惑的 Page_Load 行为

> ID：10827295
> 
> 赞同：0
> 
> 时间：2012-05-31T04:04:54.870
> 
> 标签：asp.net

这就是我正在尝试的：

公共部分类_默认：System.Web.UI.Page
{

```
String test = "hi ";

protected void Page_Load(object sender, EventArgs e)
{

        test = test + test;
        Button1.Value =  test;

}

protected void Button2_Click(object sender, EventArgs e)
{
    Button1.Value = "u're trolled !";
}
protected void Button1_Click(object sender, EventArgs e)
{

} 
```

}

首次加载页面时，它会显示“hi hi”作为 Button1 的值。但是每当我单击 Button2 时，它都会显示“你被拖了！” 作为 Button1 的值。我的问题是，如果每次单击按钮并调用 Page_Load 时页面都会回发，那么为什么它会显示“你被拖了！” 而不是附加“嗨”？？不是每次页面重新加载时都会调用 Page_Load 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:04:49.827

您需要了解 ASP.NET 页面生命周期，正如 Code addict 所说的那样，它是导致您出现问题的事件序列。

以下链接将对您非常有帮助。

[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:12:42.617

使用此代码可以知道何时出现哪个值：

```
String test = "hi ";

 protected void Page_Load(object sender, EventArgs e)
{

    test = test + test;
    Button1.Value +=  test;

}

protected void Button2_Click(object sender, EventArgs e)
{
Button1.Value += "u're trolled !";
}
protected void Button1_Click(object sender, EventArgs e)
{

} 
```

# ruby - 如何使用 Ruby 显示图像？

> ID：10827296
> 
> 赞同：2
> 
> 时间：2012-05-31T04:05:01.593
> 
> 标签：ruby, image, png, draw, tk

我正在制作一个简单的图像程序。我安装了 chunky_png gem 来处理 png 图像，但我不知道如何在窗口中绘制：

```
require 'chunky_png'
require 'tk'
town = ChunkyPNG::Image.from_file("town.png")
root = TkRoot.new
Tk.mainloop 
```

我需要做什么才能在根窗口中绘制图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:55:39.050

看看`tk`文档[http://www.tutorialspoint.com/ruby/ruby_tk_fonts_colors_images.htm](http://www.tutorialspoint.com/ruby/ruby_tk_fonts_colors_images.htm)

以下是如何显示图像的示例：

```
require 'tk'

$resultsVar = TkVariable.new
root = TkRoot.new
root.title = "Window"

image = TkPhotoImage.new
image.file = "zara.gif"

label = TkLabel.new(root) 
label.image = image
label.place('height' => image.height, 
            'width' => image.width, 
            'x' => 10, 'y' => 10)
Tk.mainloop 
```

# c# - ASP.NET 应用程序中的 WebSphere 身份验证

> ID：10827298
> 
> 赞同：1
> 
> 时间：2012-05-31T04:05:12.250
> 
> 标签：c#, asp.net, authentication, cookies, websphere

我正在尝试在 ASP.NET 应用程序中对 WebSphere 用户进行预身份验证。情况是我想在 ASP.NET Web 部件中显示来自 WebSphere 的内容......并且它仅在用户已经拥有 WebSphere 身份验证 cookie 时才有效。

在我的研究中，我发现了很多关于 WebSphere 附加产品的信息，这些产品将允许各种单点登录 (SSO) 选项，但我正在使用单点解决方案，不能添加东西或更改 WebSphere 的配置。

有没有办法让我检查 cookie 的存在，然后在代码中发送 HTTP 请求，或者调用一些本机 WebSphere Web 服务，这将执行身份验证并为用户提供访问 WebSphere 内容所需的 cookie？

提前致谢。

# arrays - 匹配R中的两个向量

> ID：10827300
> 
> 赞同：18
> 
> 时间：2012-05-31T04:05:52.933
> 
> 标签：arrays, r

我在 R 中有两个向量，如下所示。第一个代表缺少一些位置的氨基酸编号，而第二个代表完整列表。我需要以某种方式获得匹配的索引，但是当我尝试以下操作时，我没有成功。

```
which(PDBRenum.3V5Q[,2]==PDBXPoly.3V5Q[[1]][,3]) 
```

数据如下。请注意，顶部数组从 544 跳转到 551。因此，对于顶部数组中的位置 16，我需要它返回底部数组中的位置 22。谢谢您的帮助！

```
> PDBRenum.3V5Q[,2]
[1] 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 551 552 553 554 555 556 557 558 559 560 561 562 563 564 565 566 567
[33] 568 569 570 571 572 573 574 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593 594 595 596 597 598 599 600 601
[65] 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625 626 627 628 629 630 631 632 633
[97] 634 650 651 652 653 654 655 656 657 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680
[129] 681 682 683 684 685 686 687 688 689 690 691 692 693 694 695 696 697 698 699 700 703 704 705 706 707 708 709 710 711 730 731 732
[161] 733 734 735 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764
[193] 765 766 767 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796
[225] 797 798 799 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828
[257] 829 830 831 832

> PDBXPoly.3V5Q[[1]][,3]
[1] 530 531 532 533 534 535 536 537 538 539 540 541 542 543 544 545 546 547 548 549 550 551 552 553 554 555 556 557 558 559 560 561
[33] 562 563 564 565 566 567 568 569 570 571 572 573 574 575 576 577 578 579 580 581 582 583 584 585 586 587 588 589 590 591 592 593
[65] 594 595 596 597 598 599 600 601 602 603 604 605 606 607 608 609 610 611 612 613 614 615 616 617 618 619 620 621 622 623 624 625
 [97] 626 627 628 629 630 631 632 633 634 635 636 637 638 639 640 641 642 643 644 645 646 647 648 649 650 651 652 653 654 655 656 657
[129] 658 659 660 661 662 663 664 665 666 667 668 669 670 671 672 673 674 675 676 677 678 679 680 681 682 683 684 685 686 687 688 689
[161] 690 691 692 693 694 695 696 697 698 699 700 701 702 703 704 705 706 707 708 709 710 711 726 727 728 729 730 731 732 733 734 735
[193] 736 737 738 739 740 741 742 743 744 745 746 747 748 749 750 751 752 753 754 755 756 757 758 759 760 761 762 763 764 765 766 767
[225] 768 769 770 771 772 773 774 775 776 777 778 779 780 781 782 783 784 785 786 787 788 789 790 791 792 793 794 795 796 797 798 799
[257] 800 801 802 803 804 805 806 807 808 809 810 811 812 813 814 815 816 817 818 819 820 821 822 823 824 825 826 827 828 829 830 831
[289] 832 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-31T06:25:02.877

使用`match`：

```
match(PDBRenum.3V5Q[,2], PDBXPoly.3V5Q[[1]][,3]) 
```

对于`match(x,y)`，输出的第 i 个元素是`y`匹配的第一个索引`x[i]`，除非`x[i]`没有出现在 中`y`，在这种情况下它给出`NA`。

`match``y`当没有重复值时最有用。

例如：

```
> match( c(1,3,5), c(2,6,7,3,1) )
[1]  5  4 NA
> match( c(1,3,5), c(2,6,7,3,1, 8,1,3) )
[1]  5  4 NA 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T07:53:41.127

返回索引使用 %in%

```
> (a <- letters[1:5])
[1] "a" "b" "c" "d" "e"
> b <- c("a", "b", "e", "f")
> (which(a%in%b))
[1] 1 2 5
> (which(b%in%a))
[1] 1 2 3 
```

# php - mongoDB 删除子数组

> ID：10827301
> 
> 赞同：0
> 
> 时间：2012-05-31T04:05:55.787
> 
> 标签：php, json, mongodb

好的，有没有一种快速的方法可以通过 PHP mongodb 删除以下内容

这是我们的 mongoDB 行

```
{
  "today":""
  "session": "6266262626",
  "products": [
    {
      "barcode": "27788822",
      "item": "village day ticket",
      "price": 1315,
      "qty": "3"
    },
    {
      "barcode": "8544122",
      "item": "village night ticket",
      "price": 1433,
      "qty": "1"
    }
  ]
} 
```

我想删除产品

```
{
      "barcode": "8544122",
      "item": "village night ticket",
      "price": 1433,
      "qty": "1"
} 
```

我知道如何更新和插入，但不知道如何删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-19T05:42:37.940

这是一个删除项目的 mongo 命令，给定它的条形码：

db.collection.update({session:'6266262626'},{ $pull: { products: { 条形码: '8544122' } }})

如果要从 products 数组中删除多个项目，给定一个条形码数组：

db.collection.update({session:'6266262626'},{ $pull: { products: { 条形码 : {$in : ['27788822','8544122'] } } }})

我不知道这些命令的 PHP 等价物，但这里有一个使用 $pull 和 PHP 的相关问题，它可能会有所帮助：

[MongoDB 从集合中提取数组元素](https://stackoverflow.com/questions/4058748/mongodb-pull-array-element-from-a-collection)

这个问题已经很老了，但是在一个查询中删除多个数组项今天给我带来了麻烦，在我的情况下，上面的工作正在解决，所以也许它会帮助其他人，谢谢。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-31T04:23:14.607

阅读文档是您的朋友。使用位置运算符

[http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator](http://www.mongodb.org/display/DOCS/Updating#Updating-The%24positionaloperator)

# solr - 显示实际索引字段

> ID：10827305
> 
> 赞同：1
> 
> 时间：2012-05-31T04:06:28.537
> 
> 标签：solr

目前我正在研究 Solr 的最佳配置是什么，以适应我的应用程序范围。它涉及大量测试，我想知道是否可以显示 Solr 保存为索引的内容。即我想查看我的文档的标记化、词干化、小写等版本。Solr 有什么方法可以提供这些信息吗？

谢谢简

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T04:09:51.820

看看卢克：[http ://www.getopt.org/luke/](http://www.getopt.org/luke/)

Solr 还内置了一个 Luke 处理程序：[https ://wiki.apache.org/solr/LukeRequestHandler](https://wiki.apache.org/solr/LukeRequestHandler)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T17:45:10.073

You can use the Solr Analysis which is provided on Solr admin interface. [http://wiki.apache.org/solr/SolrAdminGUI](http://wiki.apache.org/solr/SolrAdminGUI)

When on the analysis page, just putting the 'field type' or 'field name' you want the analysis on and put in any field value. Solr Analysis will show you what each Filter/Tokenizer is doing and how exactly does your content look after each step. Its great for testing and debugging.

You can do the same on a query if you have set such analyzers (tokenizers/filters) on your query as well in the schema.

Hope this helps.

# sql-server-2008 - 无法使用 SQL Server Management Studio 连接到 SQL Azure

> ID：10827307
> 
> 赞同：4
> 
> 时间：2012-05-31T04:06:42.767
> 
> 标签：sql-server-2008, azure-sql-database

我在 Azure 门户上创建了一个 SQL Azure 数据库，现在我想使用 SQL Server Management Studio 连接到它。我已经这样设置了我的属性：

```
Server Type:Database Engine:
Server Name:[mycred].database.windows.net
Authentification: SQL Server Authentification
username: myusername
password: mypassword 
```

但是当我尝试连接这些属性时，我得到一个错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序：命名管道提供程序，错误：40 - 无法打开与 SQL Server 的连接）（Microsoft SQL Server，错误：53）

而我已经在我的 SQL Azure 数据库上配置了防火墙。如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T05:42:35.643

您的请求没有离开您的机器，这就是它返回网络错误的原因。可能有几个问题，首先从 SQL Server Management Studio 开始。您必须拥有 SSMS R2 2008。任何非 R2 版本都无法使用。

以下是您需要执行的测试列表以解决问题并应用解决方案：

[http://social.technet.microsoft.com/wiki/contents/articles/sql-azure-connectivity-troubleshooting-guide.aspx](http://social.technet.microsoft.com/wiki/contents/articles/sql-azure-connectivity-troubleshooting-guide.aspx)

# html - 悬停时双线

> ID：10827310
> 
> 赞同：0
> 
> 时间：2012-05-31T04:06:51.787
> 
> 标签：html, css

请访问此网站：[http](http://dev.taarana.org.my/) ://dev.taarana.org.my/ 转到业务线，然后将鼠标悬停到房地产开发和项目管理。

悬停时菜单变为双线。

如何防止这种情况？我想将它保持在单行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:09:36.963

这可能是由于字体更改为 font-weight:bold; 这将增加文本的宽度，因此它会换行到下一行。您需要增加菜单的宽度或减小文本的大小，或者在悬停时不要使其变为粗体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:10:57.247

发生这种情况是因为您将字体更改为粗体，这使文本比菜单更宽。

`ul`将类的宽度更改`"sub-menu"`为`24.5em`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T04:29:00.413

是的..我遇到了问题...您将需要增加分配给子菜单的宽度..或减少作为“物业开发和项目管理”给出的长文本标题一些小东西

# javascript - 防止 JavaScript 重定向

> ID：10827317
> 
> 赞同：2
> 
> 时间：2012-05-31T04:08:03.463
> 
> 标签：javascript, redirect, onbeforeunload, window.location

我需要防止由 JavaScript（例如，`window.location.href = 'http://some.thing'`或`window.location.reload()`）引起的任何页面重定向/重新加载。
我还需要不为用户显示提示窗口（例如“您确定要离开此页面吗？”）

我寻找解决方案，看起来一切都在改变。在某些文章中，它被写为可以覆盖`window.location`，在其他文章中，它说这是不可能的。因此，我不确定此类问题的当前情况。

我试过：
- 覆盖`window.location`对象，但看起来这是不可能的（正如这里提到的[https://stackoverflow.com/a/7990537](https://stackoverflow.com/a/7990537)和我在 Chrome 和 FF 中尝试的那样）。
- 使用`onbeforeunload`事件。以这种方式可以防止重新加载页面，但会为用户显示一个提示窗口。

有没有办法防止javascript重定向/重新加载没有任何提示窗口？

# php - MySQL 管理目录视图

> ID：10827318
> 
> 赞同：3
> 
> 时间：2012-05-31T04:08:19.557
> 
> 标签：php, mysql

我的一个朋友有一个目录，目前包含大约 500 行或 500 个项目。我们正在寻找可以提供目录报告的方法，包括查看项目的次数和查看日期。

他的网站平均每月有大约 25,000 次页面展示，如果我们假设其中一半是目录项，那么我们会假设每月查看大约 12,000 个目录项。

我的问题是管理数据库中项目视图的最佳方式。

第一个选项是将目录 ID 插入表中，然后增加其查看次数。这样做的好处是它的紧凑性。表中的行数只会与目录项的数量一样多。

```
`catalogue_id`, `views` 
```

缺点是没有保存日期信息，没有维护上次查看项目的时间。

第二个选项是每次查看项目时插入一个新行。

```
`catalogue_id`, `timestamp` 
```

如果我们继续假设 12,000 个项目视图，这意味着每个月向表中添加 12,000 行，或者每年增加 144,000 行。这样做的好处是我们知道该项目被查看的次数，以及查看它的日期。

缺点是桌子的大小。一个有 144,000 行的表对 MySQL 来说太大了吗？

有兴趣听到有关如何实现这一目标的任何想法或建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:37:22.680

正如您所提到的，第一个更紧凑但有限。但是，如果您更详细地查看选项 2；例如，如果您希望存储的不仅仅是查看次数，例如进入/退出页面、主机 IP 等。这些信息对于统计和跟踪可能是无价的。另一个问题是这 25,000 次展示是独一无二的吗？如果不是，您可以通过用户名、ip 或其他一些唯一标识符进行跟踪，这可能使您不使用尽可能多的行。您的问题的答案取决于您希望存储多少细节？数据的重要性是什么？

**更新：**

诚然，由于时间间隔限制给定项目的重复将是一个很好的解决方案。还知道是否有人访问了相同的项目可能对建议的项目 perdition 小部件有用，类似于亚马逊所做的。还知道有人多次访问某个项目对我说，这是一个很好的项目，可以在邮寄、新闻通讯或流行产品页面中向他们或其他人推广。跟踪独特的视图将提供更真实的视图计数，您可以选择显示或存储。在限制重复访问者价值的问题上，这主要取决于您显示的信息。这一切都是以最适合您的方式构建信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:43:28.123

您的问题陈述：*我们希望能够跟踪特定目录项的查看次数。*

让我们回顾一下您的选择。

**第一个选项：**

在此选项中，您将存储 catalogue_id 和项目视图数的整数值。

**好处：**

1.  好吧，因为你真的有一对一的关系，所以新表会很小。如果您有 500 个项目，您将有 50000 行。如果您选择这条路线，我建议您不要创建新表，而是在目录表中添加另一列，其中包含视图数。

**缺点：**

1.  这里的问题是，由于您将相对频繁地更新此表，它将是一个非常繁忙的小表。例如，10 个用户正在查看同一个项目。这 10 个更新必须一个接一个地运行。假设您正在使用 InnoDB，第一个视图操作将锁定行更新计数器释放锁定。其他更新将在它后面排队。因此，虽然表上​​的数据很小，但它可能会在以后成为瓶颈，尤其是当您开始扩展系统时。

2.  您正在丢失粒度数据，即您没有跟踪原始数据。例如，假设网站开始增长，您有一个感兴趣的投资者，他们希望查看过去 6 个月每周浏览量的细分。如果您使用此选项，您将无法向投资者提供数据。本质上，您正在保留摘要。

**第二种选择：**

在此选项中，您将创建一个至少包含以下最小字段 catalogue_id 和时间戳的日志记录表。您可以扩展它以添加用户名/IP 地址或其他一些信息，使其更加精细。

**好处：**

1.  您正在保留粒度数据。这将允许您以多种方式汇总数据。例如，您可以添加一个 ip 地址列来存储访问者的 IP，然后制作一份月度报告，显示按国家/地区查看的产品（您可以进行 IP 地址查找以了解他们来自哪个国家/地区）。另一个例子是查看上个季度哪些产品的浏览量最高等。这些数据对于帮助您决定如何发展业务非常重要。如果你想知道什么是有效的，什么是无效的，就产品而言，这个细节是绝对关键的。

2.  您的新表将是一个日志记录表。它只会是插入操作。插入几乎可以并行发生。如果您使用此选项，与不断更新的表格相比，它可能会随着网站的增长而更好地扩展。

**缺点：**

1.  该表将更大，可能是数据库中最大的表。然而，这不是问题。我经常处理 500 000 000 行以上的表格。我的一些表本身就超过 750GB，我仍然可以对其进行报告。您只需要了解您的查询以及如何优化它们。这真的不是问题，因为 MySQL 旨在轻松处理数百万行。请记住，您可以将一些信息存档到其他表中。假设您每 3 年归档一次数据，您可以将超过 3 年的数据移动到另一个表中。您不必将所有数据都保存在那里。您对 144 000 行的估计意味着您可以安全地保留大约 15 年以上的价值，而不必担心表的性能。

我给你的建议是认真考虑第二种选择。如果您决定采用这条路线，请使用建议的表结构更新您的问题，让我们来看看。不要害怕大数据，而要害怕糟糕的设计，它更难处理。

然而，一如既往的选择是你的。

# ruby-on-rails - Rails 设计模式：大量子模型覆盖特定功能

> ID：10827323
> 
> 赞同：1
> 
> 时间：2012-05-31T04:09:10.727
> 
> 标签：ruby-on-rails, design-patterns, decorator, sti

我有一个模型，它会被调用大约 50 次来创建 50 个带有 rake 任务的文件。

大约 90% 的代码可以重用，但我需要重写一些方法。我正在考虑只是从原始表继承，但这可能会导致大约 40-50 个模型，这感觉不对：

```
class Dog 
  def bark
     "woof"
  end
end

class Wolf << Dog
  def bark
     "growl"
  end
end 
```

我可能需要在每个模型中覆盖大约 3-4 种方法。

我的另一个想法是使用这篇文章中的 MODULE + EXTEND + SUPER DECORATOR：[http](http://robots.thoughtbot.com/post/14825364877/evaluating-alternative-decorator-implementations-in) ://robots.thoughtbot.com/post/14825364877/evaluating-alternative-decorator-implementations-in Ie

```
class Dog
  def bark
   "woof"
  end
end

module Wolf
  def bark
   "growl"
  end
end

dog = Dog.new
dog.extend(Wolf)
dog.bark   #growl 
```

然后拥有 50 个模块并在创建时扩展适当的模块。

那么哪个是最好的选择，或者这种情况有更好的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:37:31.517

从您描述依赖关系的方式来看，这实际上听起来像是策略模式的完美情况，而不是子类化或混合。

通过子类化或混入，您将表明特定可能调用基础的方法，并且它可能扩展基础 API。此外，私有方法应始终被视为潜在的代码异味。如果具体是一个策略对象（例如，具有模块方法的模块），基础有一个实例并调用其方法，那么它提供了您实际拥有的依赖关系的最清晰的规范。

另见：[http](http://en.wikipedia.org/wiki/Composition_over_inheritance) : //en.wikipedia.org/wiki/Composition_over_inheritance，http://c2.com/cgi/wiki? [StrategyPattern](http://c2.com/cgi/wiki?StrategyPattern)

# google-apps-script - 使用 Apps 脚本提交 UiApp 自定义表单后查询 Fusion 表

> ID：10827324
> 
> 赞同：0
> 
> 时间：2012-05-31T04:09:18.693
> 
> 标签：google-apps-script, google-fusion-tables

我使用 UiApp 脚本设计了小型表单，该脚本收集的信息很少，之后应该进行大量的 Fusion 表数据操作。我希望在关闭表单并返回应用程序后完成所有处理，因此用户无需等待所有 Fusion 任务完成。我打算先将数据发送到电子表格，触发 onFormSubmit 并使用 onFormSubmit 上的触发器执行我的所有 Fusion 任务。但是，当我从我的网站 onFormSubmit 在电子表格中的 UiApp 应用程序脚本中进行 doPost() 时，它不起作用。我正在寻找类似 SQL 触发器的功能，以便在将记录插入 Fusion 表后处理数据。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:12:59.840

论坛提交事件仅在用户填写附加到电子表格的表单时触发。通过 Apps 脚本将行插入电子表格（或融合表）不会触发事件。一种解决方案是使用[脚本服务](https://developers.google.com/apps-script/service_script)来安排一次性触发器，它可以进行离线处理。

# eclipse - 日食靛蓝主要错误

> ID：10827325
> 
> 赞同：0
> 
> 时间：2012-05-31T04:09:24.610
> 
> 标签：eclipse, macos, eclipse-indigo

我一直在使用 Eclipse，但直到今天我才升级到 Indigo。

*   在 Mac 10.6 上使用 Eclipse Indigo *

文件在编辑和保存后不会更新。如果我添加空行然后保存，那么如果我开始调试，调试器将遍历之前的行，但现在这些行是空的，调试器正在执行的实际行是下面几行（由于到添加的空白行）。调试器执行空行？？！！如果我更改代码，同样的事情。如果文件说X=5，我改X=6，那么调试，X还是5？？？？？？！！！我错过了一些编辑器缓存选项或smth ????

我尝试过的事情：1\. 清理所有项目，重建所有项目 2\. 删除项目，重新添加它们 3\. 删除文件，从头开始编写它们 4\. 所有自动构建和自动刷新选项都打开 5\. 试图改变工作区，错误仍然存​​在 6\. 尝试使用 .ini 文件中的 -xms128M 和 -Xmx786M 选项 7\. 尝试重新启动 Eclipse 并重新启动计算机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:46:52.073

问题是 VM 的 java 版本和项目的“facet”版本之间存在一些差异。（不管那是什么）。

我不明白的是，如果“问题”视图报告了问题并且甚至没有编译新的 .class 文件，为什么项目仍在运行。当实际显示的代码不同时，为什么它运行的是过时的 .java 文件？（因此鬼影效果）。

如果没有新的 .class 文件可以编译导致编译错误，是否有允许 eclipse 运行过时的 .class 文件的选项？

# c++ - 使用半非结构化 INI 文件

> ID：10827327
> 
> 赞同：1
> 
> 时间：2012-05-31T04:09:39.763
> 
> 标签：c++, ini

我正在寻找一种在 C++（MFC/ATL 是选项）中使用半非结构化 INI 文件的方法，例如以下示例。

```
[Fruits]
Apples
Bananas
Cherries

[Colors]
Red
Orange

[Stooges]
Curly
Larry
Moe
Shemp 
```

一种解决方法是向每个部分的每个条目添加数字，以便可以使用简单的 while 循环读取它们，并将计数器（转换为字符串）作为键传递。不幸的是，这使维护变得不愉快，因为添加或重新排列项目需要跟踪数字，而删除项目更糟糕。

有谁知道实现这一目标的方法？我尝试了几个有助于使用 INI 文件的类，但没有一个支持这种格式。

# java - 卡片布局问题

> ID：10827333
> 
> 赞同：0
> 
> 时间：2012-05-31T04:10:55.350
> 
> 标签：java, swing, cardlayout

我有这个主窗口，它扩展了一个 JFrame，它翻转了很多不同的 JPanel，所以我认为 CardLayout 对这种行为很有用。

我在 CardLayout 中添加了两个窗格，一个窗格比另一个窗格大得多，当我添加两个窗格时，显示的是较小的第一个窗格，而较大的第二个不是（良好行为），但它在第一个窗格下方留下了一个巨大的空间。

我不知道 CardLayout 上的尺寸是如何工作的，但它不响应 pack()，看起来它使用特定的算法来确定布局的首选尺寸。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T04:13:38.860

`CardLayout`允许 GUI 到**最大**卡片`pack()`的大小。

 **您可以为较小的卡片“以视觉上令人愉悦的方式排列空白”，并将较大的卡片放入滚动窗格中。

> 第一个窗格是登录表单

我会在一个`JOptionPane`（例如[这里](https://stackoverflow.com/a/10773412/418556)显示- 下面的屏幕截图）或一个 modal中展示它`JDialog`。

![](../Images/f1d7eafde0ed8c95544fb732aaf8690e.png)**

# html - 我如何编写此代码以在 nodejs 中正常工作

> ID：10827335
> 
> 赞同：1
> 
> 时间：2012-05-31T04:11:03.247
> 
> 标签：html, node.js, object

我的 nodejs 项目中有 config.js

```
var mysql  = require('mysql');
var db_name = 'node';
var client = mysql.createClient({
  user: 'root',
  password: 'pass',
});
client.query('USE '+db_name); 
```

我已将其用作项目的配置文件。我如何使用此代码来调用 mysql 查询。

我在 user.js 中有这段代码

```
var global = require('./config.js');

this.CheckUserValid = function (login, pass) {
    var sql = "SELECT * FROM `user` WHERE login = ? AND pass= ?";
    global.client.query(sql, [login, pass], function selectResutl(err, results, fields) {
        if (!err) return results;
        else
            throw err;
    });
}

TypeError: Cannot call method 'query' of undefined
    at Object.CheckUserValid (C:\wamp\www\Node\user.js:6:19) 
```

有人可以帮助我让我知道如何以更好的方式做到这一点。实际上我过去使用的是 asp.net mvc，所以我已经尝试过了。有人告诉我用 nodejs 编写代码的更好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T04:17:37.840

当你`require()`是一个文件/模块时，你得到的结果是模块通过`exports`属性导出的任何内容。其他任何东西都封装在模块中，无法从外部访问。在您的情况下，`config.js`您可以在最后添加：

```
exports.client = client; 
```

这样，无论何时您`require()`的 config.js 都可以访问它。

这种创建模块的方式在 CommonJS 规范中定义：

*   [http://commonjs.org/specs/modules/1.0/](http://commonjs.org/specs/modules/1.0/)
*   [http://wiki.commonjs.org/wiki/Modules/1.1](http://wiki.commonjs.org/wiki/Modules/1.1)

**编辑**：并且由于 commonjs.org 似乎已关闭，这里是另一个链接，其中包含有关此类模块的信息：http: [//dailyjs.com/2010/10/18/modules/](http://dailyjs.com/2010/10/18/modules/)

# c# - C#中“get”和“set”属性的目的是什么

> ID：10827337
> 
> 赞同：7
> 
> 时间：2012-05-31T04:11:11.703
> 
> 标签：c#, asp.net, c#-4.0

我看到了一些设置值的 get set 方法。谁能告诉我这样做的目的？

```
public string HTTP_USER_NAME
{
      get 
      {
            return UserName; 
      }
      set 
      {
            UserName = value; 
      }
}

public string HTTP_USER_PASSWORD
{
      get 
      {
            return UserPwd; 
      }
      set 
      {
            UserPwd = value; 
      }
} 
```

其实为什么要使用这些东西。对于全球访问，还是有其他原因导致这种事情？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T04:12:15.897

它们只是访问器和突变器。这就是在 C# 中实现属性的方式

在 C# 3 中，您可以使用如下自动实现的属性：

```
public int MyProperty { get; set; } 
```

此代码由编译器自动转换为与您发布的代码相似的代码，使用此代码更容易声明属性，如果您不想在`set`or`get`方法中实现自定义逻辑，它们是理想的，您甚至可以使用不同的`set`使属性不可变的方法的访问器

```
public int MyProperty { get; private set; } 
```

在前面的示例中，`MyProperty`将只能在声明它的类之外读取，改变它的唯一方法是公开一个方法来完成它，或者只是通过类的构造函数。当您想要控制和明确实体的状态更改时，这很有用

当您想向属性添加一些逻辑时，您需要手动编写属性来实现`get`和`set`方法，就像您发布的那样：

实现自定义逻辑的示例

```
private int myProperty;
public int MyProperty
{
   get
   {
       return this.myProperty;
   }
   set
   {
       if(this.myProperty <=5)
          throw new ArgumentOutOfRangeException("bad user");
       this.myProperty = value;
   }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-31T06:56:22.333

似乎您了解 getter 和 setter 的功能，而其他人回答了这个问题。“普通”类变量（没有 getter 和 setter）称为“字段”，而“属性”（具有 getter 和 setter）封装字段。

属性的*目的*是控制外部对字段的访问。如果您希望变量对外部逻辑只读，则可以省略设置器，如下所示：

```
private int dataID;

public int DataID {
    get { return dataID; }
} 
```

您还可以将 setter 设为私有并实现相同的只读功能。

如果一个对象有可能为空（无论出于何种原因），您可以保证一个实例始终存在，如下所示：

```
private Object instance;

public Object Instance {
    get {
        if (instance == null)
            instance = new Object();
        return instance;
    }
} 
```

属性的另一个用途是定义索引器。

```
//in class named DataSet

private List<int> members;

public int this[int index] {
    get { return members[index]; }
} 
```

定义该索引器后，您可以像这样访问 DataSet 的实例：

```
int member = dataSet[3]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T04:20:15.457

检查这些链接，..他们给出了明确的解释。

[http://www.dotnetperls.com/property](http://www.dotnetperls.com/property)

[http://code.anjanesh.net/2008/02/property-getters-setters.html](http://code.anjanesh.net/2008/02/property-getters-setters.html)

如果 UserName 和 UserPwd 是类变量，最好像这样使用

```
_userName 
_userPwd 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T04:13:36.210

在 C#中实现[属性的](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.100%29.aspx)标准方法。`UserName`并且是定义这两种方法的类`UserPwd`的私有成员变量（`string`类型）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T04:15:54.013

`HTTP_USER_NAME`并且`HTTP_USER_PASSWORD`是您班级的公共财产。`UserName`并且`UserPwd` 可能是您的私人领域。而且您允许其他人通过这些公共属性设置或获取值。不能直接访问私有财产。您也可以在属性的 get 方法中执行一些逻辑。例如：您将有一个名为的公共属性`Age`，在该方法的 get 方法中，您可以读取名为“ `dateOfBirth`”的私有字段的值并进行一些计算（ CurrentYear- dateOfBirth) 并将其作为年龄返回。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-31T04:16:40.370

属性只是字段的访问器。它们允许执行某些操作（如果需要），并提供对字段的受控访问。

如果您想知道何时使用属性以及何时使用 Only fields，请查看链接[Properties vs Fields – Why Does It Matter？（乔纳森·阿内贾）](http://blogs.msdn.com/b/vbteam/archive/2009/09/04/properties-vs-fields-why-does-it-matter-jonathan-aneja.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-18T15:03:39.270

从[**属性（C# 编程指南）**](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)

属性是提供灵活机制来读取、写入或计算私有字段值的成员。属性可以像公共数据成员一样使用，但它们实际上是称为访问器的特殊方法。这使得数据可以轻松访问，并且仍然有助于提高方法的安全性和灵活性。

在此示例中，`TimePeriod`该类存储一个时间段。该类在内部以秒为单位存储时间，但名为的属性`Hours`使客户端能够以小时为单位指定时间。Hours 属性的访问器执行小时和秒之间的转换。

**例子**

```
class TimePeriod
{
    private double seconds;

    public double Hours
    {
        get { return seconds / 3600; }
        set { seconds = value * 3600; }
    }
}

class Program
{
    static void Main()
    {
        TimePeriod t = new TimePeriod();

        // Assigning the Hours property causes the 'set' accessor to be called.
        t.Hours = 24;

        // Evaluating the Hours property causes the 'get' accessor to be called.
        System.Console.WriteLine("Time in hours: " + t.Hours);
    }
}
// Output: Time in hours: 24 
```

**属性概述**

*   属性使类能够公开获取和设置值的公共方式，同时隐藏实现或验证代码。

*   [get](http://msdn.microsoft.com/en-us/library/ms228503.aspx)属性访问器用于返回属性值，而[set](http://msdn.microsoft.com/en-us/library/ms228368.aspx)访问器用于分配新值。这些访问器可以具有不同的访问级别。有关详细信息，请参阅[限制访问器可访问性（C# 编程指南）](http://msdn.microsoft.com/en-us/library/75e8y5dd.aspx)。

*   [value](http://msdn.microsoft.com/en-us/library/a1khb4f8.aspx)关键字用于定义由**set**访问器分配的值。

*   未实现**set**访问器的属性是只读的。

*   对于不需要自定义访问器代码的简单属性，请考虑使用自动实现属性的选项。有关详细信息，请参阅[自动实现的属性（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb384054.aspx)。

# android - 使用 siegmann 读取 epub 文件时出错

> ID：10827341
> 
> 赞同：0
> 
> 时间：2012-05-31T04:12:23.243
> 
> 标签：android, epub

我试图在此链接中使用 siegmann 方法读取 epub 文件：[http](http://www.siegmann.nl/epublib/android) ://www.siegmann.nl/epublib/android但我有一个问题，当我调试时，它有一个错误：

```
`Book book = (new EpubReader()).readEpub(epubInputStream);` 
```

当我使用命令进行测试时：
`EpubReader epub = new EpubReader();` 该行仍然有错误。请帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T06:17:32.507

您没有将 slf4 lib 文件加载到项目中。将 slf4-api 和 slf4-simple 添加到 libs 文件夹中的 slf4-android 并将其添加到构建路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T17:32:49.657

您可以将您的 epub 文件放入文件夹“assets”并尝试以下操作：

```
InputStream is = getAssets().open("bookName.epub");
Book book = new EpubReader().readEpub(is); 
```

# google-analytics - 谷歌分析退出插件是否意味着我可能有未注册的访问？

> ID：10827342
> 
> 赞同：0
> 
> 时间：2012-05-31T04:12:29.860
> 
> 标签：google-analytics, privacy

我已阅读有关 Google Analytics 的“选择退出”插件的信息。这允许最终用户表明他们不希望 Google Analytics 跟踪他们。在这里阅读更多：

[https://chrome.google.com/webstore/detail/fllaojicojecljbmefodhfapmkghcbnh?hl=en](https://chrome.google.com/webstore/detail/fllaojicojecljbmefodhfapmkghcbnh?hl=en)

我的问题是：这是否意味着如果我的访问者安装了这个插件，我的访问将不会出现在 Google Analytics 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:18:02.843

是的，这个插件允许用户不在谷歌分析中被跟踪。

还有其他多个禁用分析跟踪的扩展。由于所有跟踪都是在客户端完成的，因此始终可以禁用它。

# javascript - 正则表达式字符串匹配？

> ID：10827344
> 
> 赞同：18
> 
> 时间：2012-05-31T04:13:01.347
> 
> 标签：javascript, regex, string, match

我在 javascript 中有一个很长的字符串，比如

`var string = 'abc234832748374asdf7943278934haskhjd';`

我正在尝试匹配

`abc234832748374`- 那就是 - 我试过了

`string.match(\abc[^abc]|\def[^def]|)`但这并没有让我得到两个字符串，因为我需要它们后面的数字？

基本上我需要`abc`+ 8 个字符之后和`def`8-11 个字符之后？我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-31T04:17:09.310

如果您想要文字字符串`abc`或`def`后跟 8-11 位数字，则需要以下内容：

```
(abc|def)[0-9]{8,11} 
```

你可以在这里测试它：[http ://www.regular-expressions.info/javascriptexample.html](http://www.regular-expressions.info/javascriptexample.html)

请注意，如果您不想匹配*超过*11 个数字，则需要`[^0-9]`在字符串末尾添加一个锚点（或 ）。如果只有 8 个或更多，则可以替换`{8,11}`为`{8}`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-31T04:36:50.380

要详细说明已经发布的答案，您需要一个全局匹配，如下所示：

```
var matches = string.match(/(abc|def)\d{8,11}/g); 
```

这将匹配字符串的所有子集：

*   以“abc”或“def”开头。这是“（abc | def）”部分
*   然后是 8-11 位数字。这是“\d{8,11}”部分。\d 匹配数字。

“g”标志（全局）为您提供所有匹配项的列表，而不仅仅是第一个匹配项。

在您的问题中，您要求输入 8-11 个**字符**而不是数字。如果它们是数字还是其他字符都没有关系，您可以使用“。” 而不是“\d”。

我还注意到，您的每个示例匹配在“abc”或“def”之后都有超过 11 个字符。如果可以使用任意数量的数字，那么以下正则表达式可能更适合：

*   任意位数 -`var matches = string.match(/(abc|def)\d*/g);`
*   至少一位数字——`var matches = string.match(/(abc|def)\d+/g);`
*   至少 8 位数字 -`var matches = string.match(/(abc|def)\d{8,}/g);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T04:16:52.233

您可以匹配后跟 8 位数字`abc[0-9]{8}`的字符串。`abc`

如果前三个字符是任意的，然后是 8-11 位，请尝试`[a-z]{3}[0-9]{8,11}`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T04:26:26.350

使用下面的正则表达式来获得完全匹配，

```
string.match(/(abc|def)\d{8,11}/g); 
```

以 g 结尾

`"g"`为全球

`"i"`对于忽略大小写

`"m"`用于多线

# java - 在 java 中使用默认构造函数，即使参数化构造函数存在

> ID：10827346
> 
> 赞同：0
> 
> 时间：2012-05-31T04:13:24.233
> 
> 标签：java, constructor, default-constructor

我只是想在这里澄清我的概念，所以我问......

如果我为我的类定义了一个显式的参数化构造函数，我是否仍然可以调用 java 编译器提供的默认构造函数（默认情况下为每个类提供）？

还是在这种情况下会导致编译时错误？请解释编译器调用的具体情况！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T04:16:57.710

**当且仅当** 没有提供构造函数时，编译器才会创建无参数构造函数。

JLS 在[第 8 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)中指出：

> 如果一个类不包含构造函数声明，则隐式声明一个没有形式参数且没有 throws 子句的默认构造函数。

一个“捕获”是：

> 如果隐式声明了默认构造函数但超类没有可访问的构造函数（第 6.6 节），该构造函数不接受任何参数并且没有 throws 子句，则这是编译时错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T04:18:31.133

如果您只定义参数化构造函数，那么编译器将不会提供默认构造函数

它会打印一个错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T04:19:39.717

[8.8.9 默认构造函数](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.8.9)

> 如果一个类不包含构造函数声明，则自动提供一个不带参数的默认构造函数：
> 
> *   如果声明的类是原始类 Object，则默认构造函数的主体为空。
> *   否则，默认构造函数不带参数，只是调用不带参数的超类构造函数

.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T04:20:22.667

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)非常有用，而且实际上很容易阅读。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T04:34:04.147

*   对于每个没有任何构造函数的类，java 将自动添加默认构造函数——没有参数。并且没有 args 超级电话。
*   如果您向类添加至少一个构造函数，则 java 将不包含默认构造函数。
*   因此，当您尝试不使用 args 构造函数时，会出现编译错误。

除此之外，这可能会导致一些额外的编译错误。测试这段代码。

```
class A{
  A(int i){}
}

class B extends A{}

class Test{
  PSVM{
    B b = new B();
  }
} 
```

此代码给出编译错误。

B 类没有任何构造函数。所以java会把这样的东西作为默认构造函数。

```
B(){
  super();
} 
```

但是 A 类（B 类）的 Supper 类没有不带参数的构造函数。所以它会产生编译错误。

因此，最好在您编写的每个类中都有一个无参数构造函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-31T04:34:20.313

Java 仅为那些没有为它们显式定义构造函数的类提供默认的无参数构造函数。一旦程序员定义了构造函数（即使它是无参数的构造函数），就不会提供默认构造函数。

现在你在问错误：

*   如果你为你的类定义了一个无参数的构造函数，那么你的类的构造函数的无参数调用将调用这个构造函数并且不会抛出编译器错误
*   如果您只定义了接受参数的构造函数，那么对类的构造函数的无参数调用将引发编译器错误，因为将不存在无参数构造函数。

建议彻底阅读[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-31T05:08:07.230

如果一个类不包含构造函数声明，则隐式声明一个没有形式参数且没有 throws 子句的默认构造函数。

如果声明的类是原始类 Object，则默认构造函数的主体为空。否则，默认构造函数只是调用不带参数的超类构造函数。

如果隐式声明了默认构造函数，但超类没有可访问的构造函数，该构造函数不带参数且没有 throws 子句，则这是编译时错误。

在一个类类型中，如果该类被声明为public，那么默认构造函数被隐式地赋予访问修饰符public；如果该类被声明为受保护，则默认构造函数被隐式赋予访问修饰符保护；如果该类被声明为私有，则默认构造函数被隐式赋予访问修饰符私有；否则，默认构造函数具有没有访问修饰符隐含的默认访问权限。

# iphone - 如何检查任何文本字段输入的值不是数字并且是否为负然后显示消息

> ID：10827350
> 
> 赞同：0
> 
> 时间：2012-05-31T04:13:40.173
> 
> 标签：iphone, xcode

我有很多用于计算的文本字段输入，如果任何输入不是数字和负数，那么它会在按钮单击时显示错误消息，而不是移动到另一个屏幕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T04:22:09.043

詹姆斯，至少有几种方法可以解决这个问题。

#1)[为情节提要/xib 文件中那些特定的纯数字文本字段指定数字键盘](https://stackoverflow.com/questions/3796772/objective-c-iphone-how-can-i-show-the-numeric-keyboard-by-default)

#2) 为文本字段设置一个委托，当用户完成编辑（例如[`textFieldDidEndEditing:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textFieldDidEndEditing:)）时，查看文本字段的内容，如果您看到任何不是数字的内容，则抛出 UIAlert。

一种方法是：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    NSRange rangeOfInvalidCharacter = [textField.text rangeOfCharacterFromSet: [[NSCharacterSet decimalDigitCharacterSet] invertedSet]];

    if(rangeOfInvalidCharacter.location != NSNotFound)
    {
        // throw up a UIAlert here

        // and, if you want, erase the bogus text via:
        textField.text = @"";
        return;
    }

    // and if we get here, that means the text field contents are only digits.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:26:43.273

试试这个代码

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
{
  NSCharacterSet * set = [[NSCharacterSet characterSetWithCharactersInString:@"0123456789"] invertedSet];

if ([string rangeOfCharacterFromSet:set].location != NSNotFound) {
  return NO;  // For don't add this character
}

return YES; // For input a true character

} 
```

# c++ - g++ 调用的等效 gcc 标志

> ID：10827353
> 
> 赞同：1
> 
> 时间：2012-05-31T04:14:13.360
> 
> 标签：c++, gcc, g++, qcc

我正在玩一个似乎包装 gcc (qcc) 的工具链，但也将 g++ 用于一些事情。当我无法使用 g(q)cc 链接我用 g++ 构建的库时，这引起了一些混乱，即使它是用于相同的架构（由于缺少库错误）。经过更多研究，我发现 g++ 基本上是 gcc，带有一些默认标志和文件扩展名的解释机制略有不同（我可能已经浏览过其他差异）。我想确切地知道哪些标志可以传递给 gcc 以达到等效的 g++ 调用。例如：

```
g++ -g -c hello.cpp   // I know at the very least that this links in stl
gcc -g -c -???        // I want the exact same result as I got with g++... what flags do I use? 
```

工具链的设置方式使得简单地用 g++ 替换 gcc 调用有点困难。知道我需要通过哪些标志会容易得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T04:28:48.657

`gcc`使用与`g++`编译 C++ 代码的区别在于(a) 将具有、和扩展名`g++`的文件编译为 C++ 而不是 C，并且 (b) 它自动与 C++ 标准库 ( ) 链接。请参阅[手册页](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Invoking-G_002b_002b.html#Invoking-G_002b_002b)。`.c``.h``.i``-lstdc++`

因此，假设您没有将 、 或 文件编译`.c`为`.h.`C `.i`++，您需要做的`gcc`就是`g++`将`-lstdc++`命令行选项添加到链接器标志中。如果您*将*这些其他文件编译为 C++，您可以添加`-x c++`，但我建议您将它们重命名为使用`.cc`或`.ii`文件（`.h`如果您使用的是预编译头文件，可以保持这种方式）。

# sql-server - 如何在连接两个表时更新 Sql Server 表列？

> ID：10827358
> 
> 赞同：5
> 
> 时间：2012-05-31T04:14:49.733
> 
> 标签：sql-server, join

我正在尝试更新一列，同时将其加入另一个表。我使用了下面的查询，但它给了我错误。

```
UPDATE  TABLE_2 
INNER JOIN
      TABLE_1
ON     (T2.ID=T1.ID)
SET      TABLE_2.DEPT='HUMAN RESOURCE'
WHERE    TABLE_2.DEPT='HR'
AND T1.COMPANY =1 
```

谁可以帮我这个事？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T04:17:54.613

一方面，您正在使用未在任何地方定义的表别名（`T2`等`T1`），这可能很好地解决您的问题。如果不是，那么正确的语法很大程度上取决于 SQL 风格。

例如，在 SQL Server 中，语法是

```
UPDATE T2
SET T2.dept = 'HUMAN RESOURCE'
FROM Table2 T2
   INNER JOIN Table1 T1
        ON T1.[ID] = T2.[ID] 
```

虽然你甚至不需要在这里加入，但你只想要

```
UPDATE Table2 T2
SET T2.dept = 'HUMAN RESOURCE'
WHERE EXISTS(SELECT * FROM  Table1 T1
        ON T1.[ID] = T2.[ID]) 
```

在 MySQL 中，语法是

```
UPDATE FROM TABLE2 AS T2 
    INNER JOIN TABLE1 as T1 
        ON T2.id = T1.id 
SET T2.Dept = 'Human Resources' 
```

当然，该`WHERE EXISTS`方法也适用于 MySQL

```
UPDATE FROM Table2 AS T2
   SET Dept="Human Resources" 
   WHERE EXISTS (SELECT * FROM  Table1 T1
            ON T1.[ID] = T2.[ID]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:25:07.213

如果是 MSSQL，那么查询应该是

```
UPDATE TABLE_2 SET DEPT='Human Resource'
FROM TABLE_1
WHERE TABLE_2.ID = TABLE_1.ID
AND TABLE_2.DEPT = 'HR'
AND TABLE_1.COMPANY = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T15:27:18.170

`UPDATE TABLE_2 SET DEPT='Human Resource' FROM TABLE_1,Table2 WHERE TABLE_2.ID = TABLE_1.ID AND TABLE_2.DEPT = 'HR' AND TABLE_1.COMPANY = 1`

因为当我们在加入时更新一个表时，我们从关闭中使用两个表

# javascript - 如何将动画 div 限制在其父 div

> ID：10827361
> 
> 赞同：0
> 
> 时间：2012-05-31T04:15:38.630
> 
> 标签：javascript, css, animation, html

我在 div 中放置了一个动画 div，我只希望这个 div 能够在它的父级空间中移动。我该怎么做呢？

简单地说：我希望青蛙包含在青蛙中。

**HTML**

```
<div id="frogger">                          <!-- Animate start -->
  <button id="left">&laquo;</button> <button id="right">&raquo;</button>
    <div id="frog">
    </div>
</div>                                      <!-- Animate end --> 
```

**CSS**

```
#frogger
{
    width: 500px;
    height: 500px;
    border: solid;
    margin: 0 auto;
}

#frog
{
  position:relative;
  background-color:#abc;
  left:50px;
  width:90px;
  height:90px;
  margin:5px;
} 
```

**Javascript**

```
$("#right").click(function(){
    if ($(':animated').length) {
        return false;
    } else {
        $("#frog").animate({"left": "+=50px"}, {queue: false}, "slow");
    }   
});

$("#left").click(function(){
    if ($(':animated').length) {
        return false;
    } else {
        $("#frog").animate({"left": "-=50px"}, {queue: false}, "slow");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:46:42.130

一种方法是测试当前位置，如果太靠近边缘则不移动：

```
var $frog = $("#frog");

$("#right").click(function(){
    if (parseInt($frog.css('left')) >= 400 || $(':animated').length) {
        return false;
    } else {
        $frog.animate({"left": "+=50px"}, {queue: false}, "slow");
    }   
});

$("#left").click(function(){

    if (parseInt($frog.css('left')) < 50 || $(':animated').length) {
        return false;
    } else {
        $frog.animate({"left": "-=50px"}, {queue: false}, "slow");
    }
}); 
```

演示：http: [//jsfiddle.net/n3NgY/](http://jsfiddle.net/n3NgY/)

当然，您可以通过以编程方式确定青蛙及其容器的宽度来使其更加健壮，但出于快速演示的目的，我只是硬编码了适当的左右边界数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:48:02.740

是的，您需要做一些简单的碰撞检测，不幸的是，仅 CSS 不允许您这样做。但是您可以像这样动态地执行此操作：

```
$("#right").click(function(){
    var frog_right = $("#frog").offset().left + $("#frog").width();
    var frogger_right = $("#frogger").offset().left + $("#frogger").width();

    if ($(':animated').length || frog_right >= frogger_right ) {
        return false;
    } else {
        $("#frog").animate({"left": "+=50px"}, {queue: false}, "slow");
    }   
});

$("#left").click(function(){
    var frog_left = $("#frog").offset().left;
    var frogger_left = $("#frogger").offset().left;

    if ($(':animated').length || frog_left <= frogger_left) {
        return false;
    } else {
        $("#frog").animate({"left": "-=50px"}, {queue: false}, "slow");
    }
}); 
```

# oracle - 如何使用分组查询

> ID：10827364
> 
> 赞同：0
> 
> 时间：2012-05-31T04:16:07.950
> 
> 标签：oracle

嗨，请帮我解决我的疑问，我在 oracle9i 中得到这样的输出，

```
S.No   Column1     Column2  Column3  DateCol

1      A            B        C        10/2001 

2      A            B        C        03/2001  

3      B            B        C        02/2001 

4      B            B        C        01/2001

5      A            B        C        03/2000 
```

但我的真实情况是，我需要在下面的结构中填充输出

```
S.No   Column1     Column2  Column3  DateCol

1      A            B        C        10/2001 

       A            B        C        03/2001  

2      B            B        C        02/2001 

       B            B        C        01/2001

3      A            B        C        03/2000 
```

我不知道如何形成查询，检索结构，请帮帮我，我的学术项目已经过时了，请任何人为我提供解决方案..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T04:50:49.360

```
CREATE TABLE SCOTT.GROUP_SHOW_ONCE
(
  SR_NO    NUMBER,
  COL1     VARCHAR2(20 BYTE),
  COL2     VARCHAR2(20 BYTE),
  COL3     VARCHAR2(20 BYTE),
  DATECOL  DATE
)

Insert into GROUP_SHOW_ONCE
   (SR_NO, COL1, COL2, COL3, DATECOL)
 Values
   (1, 'A', 'B', 'C', TO_DATE('10/11/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into GROUP_SHOW_ONCE
   (SR_NO, COL1, COL2, COL3, DATECOL)
 Values
   (2, 'A', 'B', 'C', TO_DATE('03/11/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into GROUP_SHOW_ONCE
   (SR_NO, COL1, COL2, COL3, DATECOL)
 Values
   (3, 'B', 'B', 'C', TO_DATE('02/11/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into GROUP_SHOW_ONCE
   (SR_NO, COL1, COL2, COL3, DATECOL)
 Values
   (4, 'B', 'B', 'C', TO_DATE('01/11/2012 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
Insert into GROUP_SHOW_ONCE
   (SR_NO, COL1, COL2, COL3, DATECOL)
 Values
   (5, 'A', 'B', 'C', TO_DATE('03/11/2011 00:00:00', 'MM/DD/YYYY HH24:MI:SS'));
COMMIT; 
```

---您的查询会喜欢

```
SELECT DECODE (rnn, LAG (rnn) OVER (ORDER BY TO_NUMBER (rnn)), NULL, rnn) sr_no,col1, col2, col3,datecol
  FROM (SELECT   col1, col2, col3,DATECOL,
                 ROW_NUMBER () OVER (PARTITION BY rn ORDER BY rn) rnn
            FROM (SELECT sr_no, col1, col2, col3,DATECOL,
                         ROW_NUMBER () OVER (PARTITION BY col1, col2, col3 ORDER BY sr_no)  rn
                    FROM group_show_once)
        ORDER BY rnn) 
```

# ssis - oracle和sql如何保持表数据一致

> ID：10827365
> 
> 赞同：0
> 
> 时间：2012-05-31T04:16:09.883
> 
> 标签：ssis, data-warehouse

我正在尝试在 sql server 中构建一个数据库，以复制 oracle 生产数据库中表中存在的确切数据。sql server 中的数据库将用于报告和分析。我希望在大约 1 小时的时间跨度内，oracle 表中的每个新数据或**更新**数据都出现在 sql server 表中。sql server 集成服务对此有帮助吗？是否有任何工具可以做到这一点，即它确保存在于 oracle 表和 sql server 表中的数据始终相同（忽略 1 小时延迟？）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:07:30.417

您可以研究两件事：复制和 SSIS。SQL Server 复制允许您将[数据从 Oracle 复制到 MSSQL](http://msdn.microsoft.com/en-us/library/ms151243.aspx)，因此这是处理数据副本的一种方式。另一方面，如果您计划进行数据转换、映射等，那么您可能想要使用 SSIS，因为它是一个完整的 ETL 工具。

一个重要的问题是如何识别 Oracle 中的新数据，因为这可能至少决定了解决方案的第一部分。然后，您必须决定将数据复制到 SQL Server 后需要进行哪些转换；也许您需要运行一些存储过程来清理数据并将其放入报告表中。由于您的报告系统与源是不同的平台，因此无论您选择何种解决方案，您都需要在某些时候处理数据类型转换。

你的问题很笼统，如果没有关于你的环境、你的要求、你的资源等的更多细节，你真的不可能说出你应该做什么。我建议您尝试将您的任务分解为更小的任务，然后您应该能够提出更具体的问题。

# javascript - 创建一个继承数组的 JavaScript 构造函数

> ID：10827370
> 
> 赞同：0
> 
> 时间：2012-05-31T04:16:43.240
> 
> 标签：javascript, inheritance

我想在 javascript 中创建一个构造函数，它具有 .prototype 属性，并且可以与 new 关键字一起使用来创建在其原型链中具有此属性的新对象。我也希望这个对象继承一个数组。

我已经能够创建一个子类化数组的对象（所有需要的功能都有效）我还没有弄清楚如何使这个对象充当一个函数，以便它可以用作构造函数。

```
SubArray = function() {this.push.apply(this, arguments);};
SubArray.prototype = Object.create(Array.prototype);
SubArray.prototype.constructor = SubArray;
SubArray.prototype.last = function(){return this[this.length -1]};

var arr = new SubArray(0); // [0]
arr.push(1,2,3); // [0,1,2,3]
console.log(arr, arr.length); // [0,1,2,3], 4
arr.length = 2;
console.log(arr, arr.length); // [0,1], 2
console.log(arr.last()); // 2                                
console.log(arr instanceof Array); // true
console.log(arr instanceof SubArray);  // true 
```

我已经读过，通过向 arr 对象添加某些键，它可以用作构造函数。我相信我必须做这样的事情。

```
var arrayFunction = new SubArray(0); // [0]
arrayFunction.prototype = {
    constructor: arrayFunction,
    //shared functions
};
arrayFunction.call = function(){//this would be the constructor?};
arrayFunction.constructpr = function(){//I remember seeing this as well, but I can't find the original source where I saw this}; 
```

我非常感谢您对如何做到这一点的任何见解，在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:55:30.423

我记得 John Resig 试图为 Jquery 子类化一个数组，但发现它不可能。

# android - 通过 Android 将照片上传到 Dropbox

> ID：10827371
> 
> 赞同：0
> 
> 时间：2012-05-31T04:16:45.417
> 
> 标签：android, dropbox

我正在开发一个 android 应用程序来将照片上传到 dropbox。我可以使用 facebook sdk 和 twitter4j 将照片上传到 facebook 和 twitter，但我不知道如何将照片上传到 dropbox？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:03:42.407

[Dropbox 开发者页面](https://www.dropbox.com/developers/reference/sdk)包含大量信息。

对于 Android，您可以在[此处](https://www.dropbox.com/developers/start/setup#android)阅读详细信息。对于[REST API 参考](https://www.dropbox.com/developers/reference/api)。特别是[文件 POST](https://www.dropbox.com/developers/reference/api#files-POST)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T13:06:20.837

给你..它上传各种文件..

```
 String outPath = "/mnt/sdcard/" + filename;
    File outFile = new File(outPath);
    FileInputStream fis = new FileInputStream(outFile);
    mRequest = mApi.putFileOverwriteRequest("/"+filename, fis, outFile.length(),null); 
```

mApi 是 DropboxAPI 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-03T22:10:49.020

接受的答案现在已弃用（库的 v1）。

[在这里](https://github.com/dropbox/dropbox-sdk-java#dropbox-for-java-tutorial)，您可以使用当前 API 跟随示例。请记住，此 API 一般适用于 Java，没有适用于 Android 的官方 SDK。作为Android，你必须考虑的是将所有与网络相关的操作放在另一个线程中（除了UI线程）。通常，最好的方法是使用服务（因为上传图像可能需要很长时间）。

# char - JRuby 访问字符

> ID：10827377
> 
> 赞同：0
> 
> 时间：2012-05-31T04:17:08.093
> 
> 标签：char, jruby, type-conversion

我正在尝试使用参数类型为的 Java 类中的方法`char`，但我似乎无法让它工作。如果我尝试构建 的新实例`java.lang.Character`，则会引发错误：

```
org.jruby.exceptions.RaiseException: (TypeError) cannot convert instance of class org.jruby.java.proxies.ConcreteJavaProxy to char
...[stacktrace; not important]... 
```

当我尝试创建`Java::char`using的新实例时`Java::char.java_class.new(my_number)`，它会引发`java.lang.StackOverflowError`. 好吧，在 jirb 中，它给了我这个：

```
NoMethodError: undefined method `new' for class char:Java::JavaClass 
```

或者如果我使用`Java::char.to_java.new(my_number)`，它会给出错误：

```
NoMethodError: undefined method `new' for #<Class:0x1556b277f> 
```

我真的很纠结该怎么做；我所需要的只是以某种方式获得一个可以成功通过类型系统的java字符。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:27:33.983

弄清楚了; 显然，如果需要，Jruby 会强制将 Ruby Fixnums 转换为 Java 字符。问题解决了。

# logging - 使用远程桌面时，我在哪里可以找到我的非 .NET 角色的日志？

> ID：10827388
> 
> 赞同：1
> 
> 时间：2012-05-31T04:18:47.500
> 
> 标签：logging, azure, remote-desktop, azure-worker-roles

我正在使用非 .NET 辅助角色，通过在服务定义中设置[ProgramEntryPoint进行配置。](http://msdn.microsoft.com/en-us/library/windowsazure/gg557552.aspx#ProgramEntryPoint)这意味着[我的应用程序](https://github.com/ariofrio/oration/tree/master/templates/azure/java)中**没有 .NET 代码**，它是用 Java 和 Python 编写的。

当我在本地运行我的工作角色时，我可以打开 Windows Azure Compute Emulator 应用程序并查看我的工作进程的标准输出和错误。

当我将桌面远程访问到我的 Azure 实例时，我不知道从哪里获得相同的信息。我在哪里可以找到标准输出和错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:18:47.810

一个简单的策略是将程序的输出重定向到一个文件：

```
<ProgramEntryPoint commandLine="run.bat >> app.log 2>&amp;1" ... "/> 
```

这`&amp;`对保持 XML 解析器满意很重要。

请注意，执行此操作后，您将无法再在 Windows Azure Compute Emulator 中看到日志。要查看日志，请打开 PowerShell 并键入：

```
cd E:\approot # or myapp.csx\roles\WorkerRole\approot if running locally
cat -wait app.log 
```

另请注意，此策略要求您将桌面远程访问 Azure 实例以查看日志。如果有的话，这可能是快速入门的好方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:52:48.617

直接回答上面的问题：

```
<ProgramEntryPoint commandLine="run.bat >> app.log 2>&amp;1" ... "/> 
```

当您在计算模拟器中运行上述命令时，您要求将命令 shell 输出重定向到 run.bat 所在的相同位置。就是这样。当您在计算模拟器中启动工作角色时，它会从 CSX 文件夹内的位置启动，并在那里创建 app.log。

现在，如果您使用完全相同的代码并在 Windows Azure 上进行部署，那么当执行“run.bat >> app.log”时，app.log 文件将直接在您的 run.bat 所在的位置创建。你可以在你的 RDP 你的 Azure 实例之后在 E:\Approot\ 找到它。

上述方法是正确的，但策略**不正确**。这是因为：

1.  日志将不会保留在 Azure VM 中 Azure VM 被回收
2.  您需要 RDP 到 Azure VM 来检查，（如果您有 100 个实例，您会 RDP 到每个实例以获取日志吗？）

最好的策略是将这些由 3rd 方应用程序创建的自定义日志直接传输到 Azure 存储。

在任何有自定义应用程序（即 java.exe、php.exe、python 等）的情况下，我建议直接在“本地存储”文件夹中创建日志文件，然后在 Worker Role (WorkerRole.cs) 中初始化 Azure 诊断以导出这些自定义日志文件直接从 Azure VM 到 Azure Blob 存储。

[此处](http://msdn.microsoft.com/en-us/library/windowsazure/hh411528.aspx)描述了如何在本地存储上创建自定义日志

# google-chrome - 单个标签会导致 chrome 损坏？

> ID：10827392
> 
> 赞同：0
> 
> 时间：2012-05-31T04:19:23.337
> 
> 标签：google-chrome, rendering

好的，所以我遇到了这个奇怪的错误，我不知道如何继续。

我正在构建一个相当基本的静态网站，只是 HTML/CSS 和一些用于轻微动画的 Jquery 没什么大不了的。

html是页面是

```
 <!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Quick Metal Finishers</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="css/style.css">

    <script src="js/libs/modernizr-2.5.3.min.js"></script>
</head>
<body>
<header id="topHeader">
    <div id="topName">
        <h1>Quick Metal Finishers</h1>
        <h2>Electroplating | Powder Coating | Metal Painting</h2>
    </div>
    <div id="topContact">
        <h2>Questions?</h2>
        <h1>EMAIL NOW: <strong>info@quickmetalfinishers.com</strong></h1>
    </div>
    <div class="clearfix">&nbsp;</div>
</header>
<hr/>
<nav id="topNav">
<ul>
    <li><a href="">HOME</a></li>
    <li><a href="">ABOUT</a></li>
    <li><a href="">SERVICES</a></li>
    <li><a href="">CONTACT</a></li>
</ul>
</nav>
<div role="main">

<!--Awesome image slidy thingy-->
<div id='coin-slider'>
    <a href="" target="_blank">
        <img src='images/main_img1.jpg' >
        <span>
            Description for img01
        </span>
    </a>
    <a href="">
        <img src='images/main_img2.jpg' >
        <span>
            Description for imgN
        </span>
    </a>
</div>

<!--Next up we have the business blurb-->
<div id="mainCatchy">
<div id="mainCatchyLine">
Choose Us for we are the best this should be slighly long.
</div>
<div id="mainCatchyDescription">
<p>
Fusce varius euismod lorem, nec semper ante ullamcorper condimentum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam eu tortor eget nunc blandit rutrum. Praesent hendrerit ante sed nulla molestie gravida vestibulum.
</p>
<p>
Ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia. Nam quis cursus massa. Dapibus, turpis quis ultricies tincidunt , elit augue facilisis turpis, et suscipit nibh eros eget tortor. Vivamus eleifend dictum.
</p>
</div>
<div class="clearfix">&nbsp;</div>
</div>

</div>
<footer>

</footer>
<script src="js/libs/jquery-1.7.2.min.js"></script>

<script src="js/plugins.js"></script>
<script src="js/script.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('#coin-slider').coinslider({ width: 960, navigation: false, delay: 5000 });
    });
</script>
</body>
</html> 
```

CSS是

```
html{
    background:hsl(50, 7%, 84%) url(images/bg-body.png) repeat top left;
}

body{
    width:960px;
    margin:4em auto;
    background-color: #f9f9f9;
    box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.85);
    -moz-box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.85);
    -webkit-box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.85);
}

#topHeader{
    font-family:Arial, Arial, Helvetica, sans-serif;
    padding:4em 77px 0 77px ;
}

#topName{
    width:auto;
    float:left;
    vertical-align:baseline;
}

#topName h1, #topName h2{
    font-weight:normal;
    font-size:14pt;
    margin:0;
    padding:0;
}
#topName h2{
    font-size:10pt;
    color:#808080;
}

#topContact{
    width:auto;
    float:right;
    margin-top:3pt;
    text-align:right;
}
#topContact h1, #topContact h2{
    font-weight:normal;
    font-size:10pt;
    margin:0;
    padding:0;
    color:#808080;
}
#topContact strong{
    color:#000;
}

/*Top Navigation*/
#topNav{
    font-family:Arial, Arial, Helvetica, sans-serif;
    padding:0 77px 0 77px ;
}
#topNav ul{
    list-style-type:none;
    margin:0 0 1em 0;
}
#topNav li{
    display:inline;
    margin-right:5ex;
}
#topNav a{
    text-decoration:none;
    font-size:11pt;
    color:#808080;
}

#mainCatchy{
    margin:2em 77px 0 77px;
    padding:0;
}

#mainCatchyLine{
    width:240px;
    float:left;
    font-family:'Open Sans', sans-serif;
    font-size:16pt;
    padding:20px 30px;
    color:#333;
}
#mainCatchyDescription{
    float:left;
    width: 506px;   
    font-size:10pt;
    color:#555;
}
/*Generic Styles*/
hr{
    border:none;
    border-top:1px dotted rgba(0,0,0,.2);
    height:0;
    width:98%;
    margin:2em auto 0.7em auto;
} 
```

问题是页面根本不会在 chrome 中呈现。标题栏中的蓝色旋转物一直在旋转，没有任何渲染。

这是踢球者：如果我`<p>`从该 div 中删除标签并将文本单独放置或放置在另一个 div 中`<div>`，则 chrome 呈现它没有问题。

到目前为止，该页面在 Firefox 中完美运行。

我不知道是什么导致了这个问题。

编辑：

我已将代码上传到 [http://dm.finearts.yorku.ca/~raveesh/test/](http://dm.finearts.yorku.ca/~raveesh/test/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T00:52:29.343

好的，问题似乎是我使用的 chrome 的开发版本，它在常规频道版本上运行良好。Dev 频道中似乎有很多渲染错误。

干杯，-tR

# python - Python 无效语法是我的空白

> ID：10827393
> 
> 赞同：1
> 
> 时间：2012-05-31T04:19:27.703
> 
> 标签：python

我对python相当陌生，但我知道很多。我做了一个简单的程序，将项目添加到购物清单。我遇到了一个问题，它在打印项目后立即关闭，所以我正在努力解决它。这是整个程序。

```
grocery_list = open('list.txt', 'a')
print 'This is your python grocery list project.'
newitems = raw_input('Add items (seperate with commas):')
grocery_list.write(newitems)
grocery_list = open('list.txt', 'r')
list = grocery_list.readlines()
print list
choice = raw_input('Do you want to close your grocery list? (y/n)')
if choice == 'y'
  exit()
elif
  raw_input("We're waiting, please enter y to close") 
```

我现在的问题是，在第 9 行，后面的空格都是无效的语法！我做错了什么，有没有更好的方法来解决我在打印项目后立即关闭的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T04:22:04.233

你忘记了一个冒号：

```
if choice == 'y' 
```

应该

```
if choice == 'y': 
```

此外，您需要一个条件（和一个冒号）在`elif`.

ETA：此外，一旦程序结束，程序将自行关闭，无需调用`exit()`（特别是因为如果您键入所有发生的事情`n`就是它无论如何都会关闭）。如果您想让程序在程序退出之前等待用户键入密钥，只需执行以下操作：

```
raw_input("Press enter to exit") 
```

（无需检查输入是什么）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T04:21:52.597

你需要`:`在你的 if 和 elif 语句之后

语法应该是这样的：

```
 if condition:
        do..something..
    elif condition:
        do..something..
    else:
        do..something.. 
```

在[这里](http://docs.python.org/tutorial/controlflow.html)查看更多信息

# html - AJAX 加载的 HTML 内容 - 字体看起来很奇怪

> ID：10827394
> 
> 赞同：0
> 
> 时间：2012-05-31T04:19:30.857
> 
> 标签：html, ajax, internet-explorer, fonts

我有一个页面，当单击按钮时，会显示一个 div，通过 AJAX 加载 HTML，然后将响应放入 div。

虽然一切正常，但我注意到在 Internet Explorer 中，字体看起来很奇怪。 ![AJAX 在 IE 中加载 HTML](../Images/879da9156dd02070205f0f18b9786adc.png)

这仅在 IE 中，例如 Chrome 没有问题正确显示 ![AJAX 在 Chrome 中加载 HTML](../Images/ce144a8a77243a16870713201905f204.png)

什么可能导致这样的事情？

**更新**：我已经在我们的终端服务器上试过了，它也安装了 IE8，似乎没有这个问题。

# php - Perl 正则表达式：用空格和制表符分隔但避免文件名上的空格？

> ID：10827395
> 
> 赞同：-1
> 
> 时间：2012-05-31T04:19:31.437
> 
> 标签：php, regex, parsing, command-line, pcre

我正在解析一个命令行应用程序的输出，如下所示：

```
0644    1276317623781623132132      Crappy little message        filename.txt
0644    1276317623781623132132      Crappy little message        My File.txt
0644    1276317623781623132132      Crappy little message        Crazy FILE.txt 
```

有时字段由制表符隔开，有时由空格隔开。如何编写正则表达式来分隔字段？我将 preg_split 与 [\s]+ 一起使用，但这会弄乱消息和文件名。我很迷失在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:18:57.660

解决方案是构建一个更具体的正则表达式来匹配：

例如，假设最后一个是选项卡，您可以使用：

您可以使用拆分

```
preg_match('/^([0-9]{4}).*([0-9]{22})[\s]*([^\t]*)[\s]*(.*)$/', $string, $aMatches); 
```

如果上面的示例发生波动，您可以改变它以满足您的需求。或者最后一个不是制表符而是一堆空格，然后查找所需的空格数等。

# facebook - 脸书错误代码191

> ID：10827396
> 
> 赞同：0
> 
> 时间：2012-05-31T04:19:37.503
> 
> 标签：facebook

我已经搜遍了整个地方，但我仍然被困住了。我觉得有点可笑，但我已经把头撞在墙上几个小时了。

这是我的 FB 应用程序设置：

```
App Domain: name.local
Site URL: http://name.local:4000 
```

我正在运行一个本地 Web 服务器，并且有一个 Web 应用程序正在运行。

身份验证有效（这似乎很奇怪，因为我的 redirect_url 在身份验证 URL 和对话/提要 URL 中是相同的）

name.local 在我的 /etc/hosts 文件中并指向 127.0.0.1。

我在端口 4000 上运行。

此网址无效：

[https://www.facebook.com/dialog/feed?client_id=nnnnnn&redirect_uri=http%3A%2F%2Fname.local%3A4000&name=aname&caption=acaption&description=descr&show_error=true](https://www.facebook.com/dialog/feed?client_id=nnnnnn&redirect_uri=http%3A%2F%2Fname.local%3A4000&name=aname&caption=acaption&description=descr&show_error=true)

我收到此错误消息：

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: redirect_uri is not owned by the application. 
```

我正在使用测试用户（使用 FB 测试用户 API 创建）。

我检查了我的站点 URL 和重定向 URL 是否一致大约一百万次。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T10:29:59.553

站点 url 和应用程序 url 必须是羞耻的。app url 不应包含协议信息。

网站网址应包含协议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:57:57.070

我喜欢电脑，它们完全按照你告诉他们的去做:)

我不得不使用**app_id**而不是**client_id**（这就是我从我的授权代码中复制和粘贴的结果）。

# gwt - 有人知道gwt celltree 作为celltable 列吗？？？因为 GWT 没有树表

> ID：10827398
> 
> 赞同：0
> 
> 时间：2012-05-31T04:19:43.333
> 
> 标签：gwt

我想使用单元格树作为单元格表列。因为 GWT 没有树表。在我当前的项目中，我必须制作类似项目的功能，它是单元格表中的子项目。所以没有树表是不可能的

如果任何机构对此有想法，请帮助使其成为可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:06:56.967

GWT 2.5（将在一个月左右发布）将添加一个`CellTableBuilder`可以让您生成其他行的；处理它们上的事件将允许您显示/隐藏“子行”，模仿树表。

或者，无需等待 2.5，您可以将单元格放在`CellTree`渲染列中（使用 a`CompositeCell`以实现灵活性和重用）。因此，AFAICT 是 Google Groups 如何为您最喜欢的群组显示未读计数和菜单的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:19:06.767

我正在尝试仅使用树小部件和 flextable 构建树表。在两者的帮助下，我能够创建自定义树表小部件。

[http://examples.roughian.com/index.htm#Widgets~Tree](http://examples.roughian.com/index.htm#Widgets~Tree)

最后..我能够根据需要创建自定义树表。

# c# - 我是否必须将变量声明为 public 才能在 Unity 中使用 [Dependency]？

> ID：10827399
> 
> 赞同：0
> 
> 时间：2012-05-31T04:20:08.690
> 
> 标签：c#, unity-container

```
using Microsoft.Practices.Unity;   
..
..
public class ContentsController : BaseController
{
    [Dependency]
    public IContentService contentService { get; set; }

} 
```

我正在使用 Unity 给我一个 IContentService 实例。但是，只有当我将其声明为公开时，它才会起作用。如果我声明私有，那么它 _cs 是否为空？

我可以通过将其声明为 public 来使其工作的唯一方法吗？

我可以在控制器构造函数中声明 IContentService 吗？如果我这样做了，那么有人可以向我展示最佳语法以及如何将其连接到私有变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:55:53.700

这里已经有了答案： [Unity 框架 DependencyAttribute 仅适用于公共属性？](https://stackoverflow.com/questions/473575/unity-framework-dependencyattribute-only-works-for-public-properties) 您必须将变量声明为 public 以使该属性按您期望的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:32:36.927

至于关于构造函数注入的部分：

```
public class ContentsController : BaseController
{
  private readonly IContentService service;
  public ContentsController(IContentService service)
  {
    if(service == null) throw new ArgumentNullException("service");
    this.service = service;
  }
}

var container = new UnityContainer();
container.RegisterType<IContentService, MyContentService>();
var controller = container.Resolve<ContentsController>(); 
```

# ios - 找到 iOS 设备的法线向量

> ID：10827401
> 
> 赞同：26
> 
> 时间：2012-05-31T04:20:19.093
> 
> 标签：ios, gyroscope, core-motion

我想使用 CMAttitude 来了解与 iPad/iPhone 屏幕玻璃垂直的矢量（相对于地面）。因此，我会得到如下向量：

![在此处输入图像描述](../Images/cf1702abf07b4dc28ef23b320d93e0d1.png)

请注意，这与方向不同，因为我不关心设备如何围绕 z 轴旋转。因此，如果我将 iPad 面朝下举过头顶，它会显示 (0,-1,0)，即使我在头顶上方旋转它（就像直升机一样），它也会继续显示 (0,- 1,0):

![在此处输入图像描述](../Images/4953e52af4fd0d1f7e9b4bddefed7dc8.png)

我觉得这可能很容易，但由于我是四元数的新手并且不完全理解设备运动的参考框架选项，所以它整天都在逃避我。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-31T15:45:36.527

1.  在您的情况下，我们可以说设备的旋转等于设备法线的旋转（围绕法线本身的旋转就像您指定的那样被忽略）
2.  您可以通过 CMMotionManager.deviceMotion 获得 [的](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html)[CMAttitude](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/occ/instp/CMMotionManager/deviceMotion)提供 **相对于参考框架**的旋转。它的性质四元数、旋转矩阵和欧拉角只是不同的表示。
3.  [当您使用 CMMotionManager 的startDeviceMotionUpdatesUsingReferenceFrame](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/occ/instm/CMMotionManager/startDeviceMotionUpdatesUsingReferenceFrame:toQueue:withHandler:)方法启动设备运动更新时，可以指定参考帧。在 iOS 4 之前，您必须使用[multiplyByInverseOfAttitude](http://developer.apple.com/library/ios/documentation/CoreMotion/Reference/CMAttitude_Class/Reference/Reference.html#//apple_ref/occ/instm/CMAttitude/multiplyByInverseOfAttitude:)

把它放在一起，当设备面朝上放在桌子上时，您只需以*正确的方式将四元数与法线向量相乘。*现在我们需要这种表示旋转的四元数乘法的*正确方法*：根据[旋转向量](http://content.gpwiki.org/index.php/OpenGL:Tutorials:Using_Quaternions_to_represent_rotation#Rotating_vectors)，这是通过以下方式完成的：

**n = q * e * q'**其中**q**是 CMAttitude [w, (x, y, z)] 传递的四元数，**q'**是它的共轭 [w, (-x, -y, -z)]，**e**是面朝上法线 [0, (0, 0, 1)] 的四元数表示。不幸的是，Apple 的 CMQuaternion 是 struct ，因此您需要一个小的帮助类。

```
Quaternion e = [[Quaternion alloc] initWithValues:0 y:0 z:1 w:0];
CMQuaternion cm = deviceMotion.attitude.quaternion;
Quaternion quat = [[Quaternion alloc] initWithValues:cm.x y:cm.y z:cm.z w: cm.w];
Quaternion quatConjugate = [[Quaternion alloc] initWithValues:-cm.x y:-cm.y z:-cm.z w: cm.w];
[quat multiplyWithRight:e];
[quat multiplyWithRight:quatConjugate];
// quat.x, .y, .z contain your normal 
```

四元数.h：

```
@interface Quaternion : NSObject {
    double w;
    double x;
    double y;
    double z;
}

@property(readwrite, assign)double w;
@property(readwrite, assign)double x;
@property(readwrite, assign)double y;
@property(readwrite, assign)double z; 
```

四元数.m：

```
- (Quaternion*) multiplyWithRight:(Quaternion*)q {
    double newW = w*q.w - x*q.x - y*q.y - z*q.z;
    double newX = w*q.x + x*q.w + y*q.z - z*q.y;
    double newY = w*q.y + y*q.w + z*q.x - x*q.z;
    double newZ = w*q.z + z*q.w + x*q.y - y*q.x;
    w = newW;
    x = newX;
    y = newY;
    z = newZ;
    // one multiplication won't denormalise but when multipling again and again 
    // we should assure that the result is normalised
    return self;
}

- (id) initWithValues:(double)w2 x:(double)x2 y:(double)y2 z:(double)z2 {
        if ((self = [super init])) {
            x = x2; y = y2; z = z2; w = w2;
        }
        return self;
} 
```

我知道四元数一开始有点奇怪，但是一旦你有了一个想法，它们就真的很棒了。它帮助我将四元数想象为围绕向量 (x, y, z) 的旋转，而 w 是角度的（余弦）。

如果您需要对它们进行更多操作，请查看[cocoamath](http://code.google.com/p/cocoamath/)开源项目。Quaternion 类及其扩展 QuaternionOperations 是一个很好的起点。

为了完整起见，是的，您也可以使用矩阵乘法来做到这一点：

**n = M * e**

但我更喜欢四元数的方式，它可以为你省去所有三角函数的麻烦并且表现更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-13T11:25:30.777

感谢 Kay 提出解决方案的起点。这是我对任何需要它的人的实现。我花了几个星期来听凯对我的情况提出的建议。作为提醒，我正在使用仅横向演示。我有更新变量 _isLandscapeLeft 的代码，以对向量的方向进行必要的调整。

四元数

```
 @interface Quaternion : NSObject{
    //double w;
    //double x;
    //double y;
    //double z;
}

@property(readwrite, assign)double w;
@property(readwrite, assign)double x;
@property(readwrite, assign)double y;
@property(readwrite, assign)double z;

- (id) initWithValues:(double)w2 x:(double)x2 y:(double)y2 z:(double)z2;
- (Quaternion*) multiplyWithRight:(Quaternion*)q;
@end 
```

四元数.m

```
#import "Quaternion.h"

@implementation Quaternion

- (Quaternion*) multiplyWithRight:(Quaternion*)q {
    double newW = _w*q.w - _x*q.x - _y*q.y - _z*q.z;
    double newX = _w*q.x + _x*q.w + _y*q.z - _z*q.y;
    double newY = _w*q.y + _y*q.w + _z*q.x - _x*q.z;
    double newZ = _w*q.z + _z*q.w + _x*q.y - _y*q.x;
    _w = newW;
    _x = newX;
    _y = newY;
    _z = newZ;
    // one multiplication won't denormalise but when multipling again and again
    // we should assure that the result is normalised
    return self;
}

- (id) initWithValues:(double)w2 x:(double)x2 y:(double)y2 z:(double)z2 {
    if ((self = [super init])) {
        _x = x2; _y = y2; _z = z2; _w = w2;
    }
    return self;
}

@end 
```

还有我使用四元数进行射击的游戏类：

```
-(void)fireWeapon{
    ProjectileBaseClass *bullet = [[ProjectileBaseClass alloc] init];
    bullet.position = SCNVector3Make(0, 1, 0);
    [self.rootNode addChildNode:bullet];

    Quaternion *e = [[Quaternion alloc] initWithValues:0 x:0 y:0 z:1];
    CMQuaternion cm = _currentAttitude.quaternion;
    Quaternion *quat = [[Quaternion alloc] initWithValues:cm.w x:cm.x y:cm.y z:cm.z];
    Quaternion *quatConjugate = [[Quaternion alloc] initWithValues:cm.w x:-cm.x y:-cm.y z:-cm.z];
    quat = [quat multiplyWithRight:e];
    quat = [quat multiplyWithRight:quatConjugate];
    SCNVector3 directionToShoot;
    if (_isLandscapeLeft) {
        directionToShoot = SCNVector3Make(quat.y, -quat.x, -quat.z);

    }else{
        directionToShoot = SCNVector3Make(-quat.y, quat.x, -quat.z);

    }

    SCNAction *shootBullet = [SCNAction moveBy:directionToShoot duration:.1];
    [bullet runAction:[SCNAction repeatActionForever:shootBullet]];
} 
```

# spring-mvc - 带有图块的嵌套模板

> ID：10827403
> 
> 赞同：1
> 
> 时间：2012-05-31T04:20:25.833
> 
> 标签：spring-mvc, tiles, tiles2

我想要一些带有瓷砖的嵌套模板，但目前没有任何运气。

我的主要模板：

```
[...]
<div id=body><tiles:insertAttribute name="body"/></div>
[...] 
```

我的嵌套模板：

```
[...]
<div id=sub><tiles:insertAttribute name="sub"/></div>
[...] 
```

我的视图定义：

```
<tiles-definitions>
    <definition name="mainTemplate" template="/mainTemplate.jspx">
    </definition>
    <definition extends="mainTemplate" name="subTemplate">
        <put-attribute name="body" value="/subTemplate.jspx"/>
    </definition>
    <definition extends="mainTemplate" name="myView">
        <put-attribute name="sub" value="blablabla"/>
    </definition>
</tiles-definitions> 
```

我的期望：

```
<div id=body><div id=sub>blablabla</div></div> 
```

我得到了什么：

```
<div id=body><div id=sub></div></div> 
```

我已经[在瓷砖网站上](http://tiles.apache.org/framework/tutorial/advanced/nesting-extending.html)看到了关于这个主题的文档，但我无法让它发挥作用:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T19:39:49.360

实际上，“subTemplate”和“myView”是两个扩展“mainTemplate”的不同定义。据我了解，您希望“myView”图块嵌套在“subTemplate”图块中。

你可以尝试这样的事情：

```
<tiles-definitions>
    <definition name="mainTemplate" template="/mainTemplate.jspx">
    <definition name="subTemplate" extends="mainTemplate">
        <put-attribute name="body">
            <definition template="/subTemplate.jspx">
                <put-attribute name="myView" value="blablabla" />
            </definition>
        </put-attribute>
     </definition>
</tiles-definition> 
```

# c# - 从 C# 使用此查询时，索引超出范围异常

> ID：10827404
> 
> 赞同：0
> 
> 时间：2012-05-31T04:20:41.797
> 
> 标签：c#, sql-server

我在我的 SQL 查询中使用计算。如何在 C# 中使用该计算字段？当我尝试时，我得到一个*索引超出范围*异常。

我的查询是：

```
 Select OwnerCompanyLog.olog_name,inlt_companyid,inlt_childcompid,inlt_effectinterest,inlt_percent,inlt_sharetype,inlt_shares,inlt_childbase,inlt_effdate,
   ((inlt_percent * inlt_effectinterest)/100)eff
    from InterestLogTable 
    INNER JOIN OwnerCompanyLog 
    ON 
    InterestLogTable.inlt_childcompid = OwnerCompanyLog.olog_companyid 
    where inlt_companyid=5 
    Order By inlt_childcompid 
```

我想`inlt_percent * inlt_effectinterest)/100`在我的 C# 代码中使用：

```
 entity.ParentCompany = new List<Company>();
     while (parentCompanyReader.Read())
            {
    ParentCompany.Effect = parentCompanyReader["eff"].ToString();
    entity.ParentCompany.Add(ParentCompany);
            }

            parentCompanyReader.Close(); 
```

但是我得到了上面的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:40:29.240

问题仅在于计算字段。上面的评论是绝对正确的。可能是您的 parentCompanyReader 类有错误。同时你可以尝试一些事情来确认错误。

将 eff 列移动到某个中间位置。可能是您的 parentCompanyReader 无法仅处理有限数量的列。

还有什么是“eff”，一列？还要在计算列之后放置一个 AS。

```
Select (inlt_percent * inlt_effectinterest)/100)eff AS EFF, OwnerCompanyLog.olog_name,inlt_companyid,inlt_childcompid,inlt_effectinterest,inlt_percent,inlt_sharetype,inlt_shares,inlt_childbase,inlt_effdate 
```

注意：这些只是黑暗中的箭头！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:49:37.883

尝试将它与 index 而不是 column name 一起使用。

```
 while (parentCompanyReader.Read())
        {
        ParentCompany.Effect = Convert.ToInt32(parentCompanyReader[5]);
        entity.ParentCompany.Add(ParentCompany);
        }

        parentCompanyReader.Close(); 
```

我假设计算的字段返回一个整数

并确保你使用 using 语句，这样如果出现错误，连接将被关闭并处理

# python - Python 中的字典

> ID：10827406
> 
> 赞同：0
> 
> 时间：2012-05-31T04:21:09.623
> 
> 标签：python

我有一个文本文件，指示频率，如“阅读 1 迪克 1 约翰 1 本书 1 阅读 1 个不同的 1 a 1 个不同的 1”我也有一个为这些词定义的字典 dict={'a':1,'book':2 }

我想用它们的字典值替换单词。谁能让我知道这是怎么做的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T04:30:05.647

```
text = # your text here
dictionary = # your dictionary here (don't call it dict!)
' '.join(str(dictionary.get(word, word)) for word in text.split(' ')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:26:19.293

这很容易：

```
text = # your text here
for word in dictionary:
    text = text.replace(word, str(dictionary[word])) 
```

**编辑**

对于子字符串的问题，可以使用正则表达式：

```
import re
text = # your text here
for word in dictionary:
    text = re.sub('^|\s' + word + '\s|$', str(dictionary[word]) + ' ', text) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T04:38:16.983

```
import re
text = # your text here
dictionary = # your dictionary here (don't call it dict!)
re.sub("\\b.+?\\b", lambda x: str(dictionary.get(*[x.group()]*2)), text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T04:39:27.883

您也可以使用`re.sub`，但提供一个[函数作为替换参数](http://docs.python.org/library/re.html#re.sub)：

```
import re

frequencies = {'a': 1, 'book': 2}

input_string = "read 1 dick 1 john 1 book 1 read 1 different 1 a 1 different 1 "

def replace_if_found(m):
    word = m.group(1)
    return str(frequencies.get(word, word)) + m.group(2)

print re.sub(r'(\w+)( \d+)', replace_if_found, input_string) 
```

...它为您提供输出：

```
read 1 dick 1 john 1 2 1 read 1 different 1 1 1 different 1 
```

这样做的好处是它只替换你有一个或多个单词字符后跟一个或多个数字的地方。

# r - Matlab和R中的相同随机种子

> ID：10827413
> 
> 赞同：27
> 
> 时间：2012-05-31T04:22:06.603
> 
> 标签：r, matlab

我在 R 和 Matlab 中为 2 个单独的分析生成数据，我想确定这两个系统中的结果是否相等。由于随机数生成器，这两组代码之间存在固有的可变性。如果可能的话，我想消除这种可变性的来源。有谁知道在 Matlab 和 R 中设置相同的起始种子的方法？我在下面提供了一些演示代码。

```
%Matlab code
seed=rng %save seed
matlabtime1=randn(1,5) %generate 5 random numbers from standard normal 
rng(seed) %get saved seed
matlabtime2=randn(1,5) %generates same output as matlabtime1

#R code
set.seed(3) #save seed
r.time1=rnorm(5) #generate 5 random numbers from standard normal 
set.seed(3) #get saved seed
r.time2=rnorm(5) #generates same output as r.time1 
```

本质上，我希望 matlabtime2 和 r.time2 的结果完全匹配。（我使用的代码比这个说明性演示更复杂，因此仅用一种语言重写并不是一个真正可行的选择。）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T05:03:29.953

> 我发现很难在 R 和 MATLAB 中获得相同的随机数 - 即使对相同的算法使用相同的种子（Mersenne Twister）。

我想这是关于它们是如何实现的——即使使用相同的种子，它们也有不同的初始状态（您可以在 R 和 MATLAB 中打印和检查状态）。

过去，当我需要这个时，我会生成随机输入，将其保存为磁盘上的文件，然后将其提供给 MATLAB 和 R。

另一种选择是为 R 和 MATLAB 编写随机数生成器的 C 包装器（C/C++ 中有很多），并调用它们而不是内置的。

# unit-testing - 为什么 `#import("dart:unittest")` 无法运行？

> ID：10827415
> 
> 赞同：5
> 
> 时间：2012-05-31T04:22:13.570
> 
> 标签：unit-testing, dart

我写了一些飞镖测试代码：

```
#import("dart:unittest");
main() {
  test('this is a test', () {
    int x = 2+3;
    expect(x).equals(5);
  });
} 
```

它在飞镖编辑器中没有显示任何错误，但是当我按下“运行”按钮时，它会报告：

```
Do not know how to load 'dart:unittest''file:///home/freewind/dev/dart/editor
/samples/shuzu.org/test/model_test.dart': 
Error: line 1 pos 1: library handler failed
#import("dart:unittest");
^ 
```

我看到我的 dart-sdk 中有一个“dart:unittest”库。为什么不能运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T04:35:00.210

不幸的是，unittest 库还没有连接到 dart: 命名空间。在此之前，如果发生这种情况，您将需要使用相对路径来访问 unittest 库。

就像是：

```
#import('path-to-dart/lib/unittest/unitest.dart'); 
```

更多示例在这里：[http ://api.dartlang.org/unittest.html](http://api.dartlang.org/unittest.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T15:16:03.353

此页面一直显示在 Google 搜索结果中`dart`和`unittest`，所以我想我会添加一个更新。现在可以通过Dart 的包管理器轻松安装该`unittest`库。`pub`为此，请确保您：

检查`Add pub support`何时创建新的 Dart 应用程序。`unittest`然后在文件中添加（或取消注释）包的依赖项`pubspec.yaml`。该文件应如下所示：

```
name:  range
description:  A sample application

dependencies:
    unittest: { sdk: unittest } 
```

运行`pub install`（虽然如果你使用 Dart 编辑器，这个命令应该会自动为你运行）。然后，在您将要编写测试的文件中，添加以下导入声明：

```
import "package:unittest/unittest.dart"; 
```

你应该很高兴。

# ruby-on-rails - RefineryCMS 试图调整每页的布局

> ID：10827416
> 
> 赞同：2
> 
> 时间：2012-05-31T04:22:36.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refinerycms

我是 RefineryCMS 的新手，对 Rails 也很陌生。我想要做的是在我的布局文件中使用相同的页眉和页脚，然后在从 CMS 数据库中提取的动态部分中，每页使用不同的标记。

示例模板：

```
<header>
...
</header>

# want to insert "home" page or "about" page here depending on url.

<footer>
...
</footer> 
```

我希望主页插入模板的示例：

```
<div>
  <%= raw @page.content_for(:body) %>
</div> 
```

我希望将页面插入模板的示例：

```
<div>
  <div>
    <div>
      <%= raw @page.content_for(:body) %>
    </div>
  </div>
</div> 
```

如何更改每页的标记，而不必在 CMS 的所见即所得编辑器中添加标记？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T05:32:58.567

您使用的是哪个版本？

如果您使用的是 2.0.x，那么里面有两个选项`config/initializers/refinery/pages.rb`——第一个应该是`config.view_template_whitelist`，第二个应该是`config.use_view_templates`.

对于`config.view_template_whitelist`，您可以指定与文件夹中的视图匹配的符号数组`app/views/refinery/pages/`（即，如果您有`about_us.html.erb`，则将 [:about_us] 列入白名单，就像您要`render :about_us`在控制器中说的那样。

`config.use_view_templates`只需将其设置为 true 即可启用后端的下拉菜单，该下拉菜单可让您从白名单中选择模板。

如果你很好奇，也有`config.layout_template_whitelist`一些`config.use_layout_template`选项可以做同样的事情，但是有布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T04:14:57.957

如果您希望更改标题而不是整个布局，那么您可以覆盖`_header`部分：

```
cp  /var/lib/gems/1.8/gems/refinerycms-core-2.0.6/app/views/refinery/_header.html.erb  app/views/refinery/_header.html.erb 
```

..然后编辑`app/views/refinery/_header.html.erb`并重新启动应用程序（如果需要）。

这使我可以在导航菜单上方放置标题图像，而无需创建自定义布局。

# iphone - 将随机图像分别动态分配为按钮的背景

> ID：10827417
> 
> 赞同：4
> 
> 时间：2012-05-31T04:22:51.893
> 
> 标签：iphone, objective-c, ipad

```
-(void)setButtons_AsPerTheMatrixSelection
{

        for(UIView *subview in [viewWithButtons subviews])
        {        
            if ([subview isKindOfClass:[UIButton class]])
            {
            [subview removeFromSuperview];
            }
        }
    viewWithButtons = [[UIView alloc] init];

    width = 48;
    height = 48;

    pw = 49;
    ph = 49;

    arrButton = [[NSMutableArray alloc] init];
    UIImage *imgDefaultBG = [UIImage imageNamed:@"bg.jpg"];

    viewWithButtons.frame = CGRectMake(50, 40, 200, 260);

    ch = 4;
    cv = 4;

    for ( i = 0 ; i < cv ; ++i )
    {
        for ( j = 0 ; j < ch ; ++j )
        {
            btnMatrix = [[[UIButton alloc] initWithFrame:CGRectMake(10+pw*j, 51+ph*i, width, height)] autorelease];
            btnMatrix.tag = i*ch+j;
            btnMatrix.userInteractionEnabled = TRUE;

            bulImageStatus = FALSE;

            [btnMatrix addTarget:self action:@selector(changeImage:) forControlEvents:UIControlEventTouchDown];
            [btnMatrix setBackgroundImage:imgDefaultBG forState:UIControlStateNormal];

            [viewWithButtons addSubview:btnMatrix];

            [arrButton addObject:btnMatrix];
        }
    }
    NSLog(@"arrButton object count is:--> %d",[arrButton count]);
        [self.view addSubview:viewWithButtons];
}

-(void)AddImageToArray
{

    arr_FirstSet = [[NSMutableArray alloc] init];
    NSString *strImageName;

if(appDelegate.intCategoryBtnTag == 0)
{
    for (intimg = 1; intimg <= 28; intimg++)
    {
        strImageName = [NSString stringWithFormat:@"%d_1.png",intimg];
        NSLog(@"strImageName is :--> %@",strImageName);
        [arr_FirstSet addObject:strImageName];
    }
    NSLog(@"arr_FirstSet objects are...%@",arr_FirstSet);
}
}

-(void)changeImage:(id)sender
{
    UIImage *img;
    NSString *strImageName;
    strImageName = [arr_FirstSet objectAtIndex:arc4random() % [arr_FirstSet count]/2];
    NSLog(@"btnMatrix is:--> %@",strImageName);
    img = [UIImage imageNamed:strImageName];
    //[btnMatrix setImage:img forState:UIControlEventTouchDown];
    NSLog(@"sender detail is:--> %@",sender);
    [sender setBackgroundImage:img forState:UIControlStateHighlighted];
} 
```

**这是我在“ setButtons_AsPerTheMatrixSelection** ”方法中设置动态按钮的代码，

“ **AddImageToArray** ”方法用于将bundle中的图像逐个添加到NSMutableArray（arr_FirstSet）中。

“ **changeImage** ”方法用于设置特定按钮的背景。

我可以将图像随机设置为按钮的背景，

但主要问题是我必须为特定按钮设置固定的动态图像。

现在，每次单击特定按钮时，当我按一次、两次、三次等时，我都会更改随机图像...

我必须将在“changeImage”中随机生成的任何特定图像设置为单个按钮，并将其他按钮设置为单个。

然后我必须检查两个按钮是否具有相同的背景，然后这两个按钮将从矩阵中删除。

请指导我犯的错误并帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:49:37.023

```
 //Please replace this method

    -(void)changeImage:(UIButton *)sender   
    {    
            UIImage *img;    
            NSString *strImageName;
            strImageName = [arr_FirstSet objectAtIndex:arc4random() % [arr_FirstSet count]/2];    

            img = [UIImage imageNamed:strImageName];   

    //for the first time sender.imageView.image property will be null then only we set image to the button. 
//For second click this condition fails and does not set the other image.
            if(!sender.imageView.image)   
            {
                [sender setImage:img forState:UIControlStateHighlighted];
                [sender setImage:img forState:UIControlStateSelected];
            }
// Calling a method to check if two images of buttons are same.
            [self checkIfTwoImagesAreSame:sender];
    }

    //And Add this method

    - (void)checkIfTwoImagesAreSameImageMaching:(UIButton *)sender
    {
        for(UIView *subview in [viewWithButtons subviews])
        {
            if ([subview isKindOfClass:[UIButton class]])
            {
                UIButton *btn = (UIButton *)subview;
// This condition is comparing clicked button image with all the buttons images of the viewWithButtons view if it isEqual: 
                if(sender.imageView.image && btn.imageView.image && [sender.imageView.image isEqual:btn.imageView.image])
                {
// this is checking if the clicked button is not comparing with itself
                    if(btn.tag != sender.tag)
                    {
                        [btn removeFromSuperview];
                        [sender removeFromSuperview];
    //                    OR
    //                    btn.selected = YES;
    //                    sender.selected = YES;
    //                    OR                    
    //                    btn.hidden = YES;
    //                    sender.hidden = YES;
                    }
                }
            }
        }
    } 
```

# c# - c# .net4 - 正则表达式 vs html 敏捷包

> ID：10827421
> 
> 赞同：1
> 
> 时间：2012-05-31T04:23:10.693
> 
> 标签：c#, regex, memory, html-agility-pack

什么更快？我刚刚制作了一个使用 HTML Agility 包的网络爬虫，它消耗了大量内存。

使用内存分析器对其进行分析，我发现 HTMLDocument、HTMLNode 等实例占用了最多的内存。

我觉得使用正则表达式可能会更快，更有效，我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:29:13.257

根据您的具体操作，确实可以使用正则表达式加快速度并释放一些内存。问题是 - 您从中提取数据的页面有多严格和格式良好。正则表达式更容易被您可能在野外遇到的完全有效但出乎意料的 HTML 构造所混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:30:54.083

reg-ex 将比 html agilty pack 快得多。

但是您应该记住，html 不必总是格式正确。仅使用 reg-ex 搜索您想要的正确数据可能会失败。浏览器对错误非常宽容。

敏捷包是一个很棒的工具。它为消耗的内存提供了许多功能。

# javascript - 使用 Javascript 的 HTML5 画布幻灯片

> ID：10827424
> 
> 赞同：0
> 
> 时间：2012-05-31T04:23:13.577
> 
> 标签：javascript, html5-canvas

我不确定我的问题到底出在哪里，我对画布和 JavaScript 都比较陌生，所以如果这很模糊，我很抱歉，但我无法让我的幻灯片画布正常工作，更不用说显示图像了。

```
<!DOCTYPE html>

<html>
<head>
<title>PhotoGenesis</title>
<LINK REL=StyleSheet HREF="homecss.css" TYPE="text/css" MEDIA=screen>
<script type="text/javascript" src="homescript.js"></script>
</head>

<body onLoad="javascript:preloader()">
<header>
    <a href=http://localhost.com/home><img id=logo alt="PhotoGenesis" src="logo.png""/>         </a>
    <nav id=headernav>        
        <a href=http://localhost.com/home>home</a>
        <a href=http://localhost.com/news>news</a>
        <a href=http://localhost.com/photography>photography</a>
        <a href=http://localhost.com/video>video</a>
        <script type="text/javascript">
            var lightbox="lightbox ("+"0"+")";
            document.write("<a href=http://localhost.come/lighbox>" + lightbox + "</a>");            
        </script>
        <a href=http://localhost.com/about>about</a>
        <a href=http://localhost.com/contact>contact</a>
        <a href=http://localhost.com/blog>blog</a>
    </nav>
    <span id=search></span>
    <img id=miscone alt="Full Screen" src="miscone.png"/>
    <img id=misctwo alt="Share" src="misctwo.png"/>
</header>
<main onLoad="javascript:canvasslider()">
    <canvas id="defaultbackground" width=100%; height=100%;/>    
</main>
<footer>
            <nav id="footernav">
                <a href=http://www.facebook.com><img id="fbnav" alt="Facebook" src="fbooknav.png"/></a>
                <a href=http://www.twitter.com><img id="tnav" alt="Twitter" src="twitternav.png"/></a>
                <a href=http://www.stumbleupon.com><img id="snav" alt="StumbleUpon" src="stumblenav.png"/></a>
            </nav>
</footer>
</body>
</html>

<script language="JavaScript">
function preloader() 
 {

     // counter
     var i = 0;

     // create object
     imageObj = new Image();

     // set image list
     images = new Array();
     images[0]="background1.png"
     images[1]="background2.png"
     images[2]="background3.png"

     // start preloading
     for(i=0; i<=images.length; i++) 
     {
          var backstring ="background"+i+".png";
      images[i].id=backstring;
          imageObj.src=images[i];
     }

 }

 function canvasslide()
 {
    function init()
    {
        defaultbackground = document.getElementById("defaultbackground");
        ctx = defaultbackground.getContext("2d");
            for(i=0; i<=images.length; i++){
                var backstring ="background"+i+".png";
                sprite = document.getElementById(backstring);
                ctx.drawImage(sprite,0,0);}
        }
}
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:55:16.370

```
sprite.onload = function() {
  ctx.drawImage(sprite,0,0);
} 
```

当您在画布上绘制图像时，我很确定您的图像尚未加载。尝试这样的事情，我不确定这是正确的代码，因为我没有得到你代码的每一部分，但你必须在将它绘制到画布上之前使用 image.onload 函数。

# c# - 使用 HLSL 设置 TextureAddressMode

> ID：10827433
> 
> 赞同：0
> 
> 时间：2012-05-31T04:25:18.407
> 
> 标签：c#, xna, xna-4.0, hlsl, lighting

我一直在使用我自己没有编写的着色器在 XNA 中实现一个照明系统，但我遇到了一个问题：如果游戏的尺寸是 2 的幂（现在它运行在 1024x512），则系统可以完美运行，但否则会在该行发生故障`GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleStrip, Vertices, 0, 2);`，抛出异常，指出“XNA Framework Reach profile requires TextureAddressMode to be Clamp when using texture sizes that are not the power of two.”

在互联网搜索中，最常见的解决方案是将线`GraphicsDevice.SamplerStates[0] = SamplerState.LinearClamp`直接放在上面的线上方。这个我试过了，没有效果。事实上，在我试图梳理出一个解决方案的过程中，在我用那条线设置它之前它似乎`GraphicsDevice.SamplerStates[0]`是空的，这让我相信这个问题也可以通过选择它作为活动采样器状态来解决——尽管我也不知道该怎么做。

否则，根据我发现的其他信息，我相信我需要从着色器中设置 TextureAddressMode。我被引导[到此页面](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509644%28v=vs.85%29.aspx)以获取有关如何执行此操作的信息，但我承认仍然感到困惑——我以前从未使用过 HLSL，而且我不确定如何使用该页面上的信息。

如果我需要提供更多信息，我将非常乐意提供，我首先问了一个问题，这让我想到了我现在的[问题](https://stackoverflow.com/questions/10792151/clamping-textureaddressmode-in-xna)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:06:10.667

在您的 HLSL 中查找声明像素着色器正在使用的采样器的行。

您可以将地址模式设置为夹在该行中。

```
SamplerState somethingLikeThis {
    Filter = MIN_MAG_MIP_LINEAR;
    AddressU = Clamp;
    AddressV = Clamp;
}; 
```

# sql-server - 什么是活锁？在 SQL 中，它何时/如何发生？T-SQL 开发人员可以做些什么来避免它？

> ID：10827438
> 
> 赞同：1
> 
> 时间：2012-05-31T04:26:13.337
> 
> 标签：sql-server, tsql, livelock

我遇到过 SQL Server 的这个术语，我只是无法理解它在 SQL Server 中到底发生了什么。我正在查看它发生的一些 SQL Server 示例...

我一直在谷歌上搜索，但一直在走廊示例中找到 2 个人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T04:38:43.400

当两个进程竞争相同的资源，但按导致僵局的顺序时，就会发生死锁。例如，A 锁定 X，然后尝试锁定 Y，而 B 锁定 Y 并尝试锁定 X。关键是这两个（或更多）进程正在阻止对方做任何事情。

当有重叠的共享锁阻止另一个进程获取它需要的独占锁时，就会发生活锁。不同之处在于所有这些重叠的进程继续完成它们的工作，所以它们仍然是“活的”——只有受害者被阻塞，直到它们完成。这可能永远不会出现在一个足够繁忙、设计不佳的系统上。:-) 您可以通过提高编写器的死锁优先级来克服这种情况，但老实说，这不是我经常看到的情况，而且我从 6.5 开始就使用 SQL Server ...

# backbone.js - 在 jqMobi Nav 中绑定主干事件，或者当 dom 元素在 dom 中重复时

> ID：10827440
> 
> 赞同：1
> 
> 时间：2012-05-31T04:26:22.303
> 
> 标签：backbone.js, jqmobi

我一直在移植我的应用程序以使用 jqMobi 和 jqUI，但我遇到了主干委派事件的问题。

jqUI 创建侧导航栏的方式是 umm.... 至少可以说很有趣。

每个面板都可以有一个不同的导航栏，但导航栏对用户实际上是不可见的，您填充导航栏，然后 jqUI 将 html 复制到`div#menu`元素中。

我的观点相当简单

```
MyApp.Views.UserMenu = Backbone.View.extend({
  el: 'nav#user_menu',

  initialize: function(){
    //empty out and unbind in-case it is already populated
    $(this.el).empty().unbind();

    this.render();
  },

  events: {
    "click div#add_friend": "new_friend"
  },

  render: function(){
    $(this.el).append(HandlebarsTemplates['friends/new_friend']());

    // here I am trying to change the 'el' to point to where the menu is in the DOM
    this.el = 'div#menu';                        
    this.delegateEvents();
    return this;       
  },

  new_friend: function(){
    alert('clicked');
  }
}); 
```

我尝试在填充 之后将更改`el`为，但这不起作用。我也尝试过直接填充，但这似乎也不起作用。`div#menu``nav``div#menu`

有什么建议么？我假设问题是元素正在被移动，但它可能是别的东西，也许我不确定如何调试另一种情况。

# python - 如何在 django 管理界面中获取谷歌地图位置坐标？

> ID：10827443
> 
> 赞同：2
> 
> 时间：2012-05-31T04:26:44.710
> 
> 标签：python, django, google-maps, django-admin

我正在 django 中实现一个网站，该网站存储有关各个地方的信息。我想要 django-admin 中的一个功能来选择（点击）谷歌地图上的一个位置并将其存储在我的数据库中，以便我可以在需要时在谷歌地图上显示我的位置。

在 Django 中有哪些不同的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-09T01:50:24.833

迟到总比没有好...尝试[django-geoposition](http://django-geoposition.readthedocs.org/en/latest/)

# cakephp - CakePHP 全文搜索 MySQL 和评级

> ID：10827444
> 
> 赞同：2
> 
> 时间：2012-05-31T04:26:50.573
> 
> 标签：cakephp, cakephp-2.0

我已经读过，为了能够对搜索结果进行排名，您可以像这样查询 MySQL：

```
SELECT * , 
MATCH (title, body) AGAINST ('$search') AS rating 
FROM posts 
WHERE MATCH (title, body) AGAINST ('$search') 
ORDER BY rating DESC 
```

在 CakePHP 2.X 中有没有办法做到这一点？另外，我需要在分页的同时执行此操作。所以我认为我需要为分页器编写条件，而不是直接的“查询”。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-06T07:56:14.430

像这样使用它也会防止mysql注入

```
array("MATCH(User.current_position) AGAINST(? IN BOOLEAN MODE)" => $srch_arr['text']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T08:14:42.777

好的，我花了一些时间......因为关键问题是对结果匹配进行评分，所以这个查询中复杂的部分是特定字段：

`MATCH (title, body) AGAINST ('$search') AS rating`

我想我应该只在分页数组中的“字段”选项中写入该字段。结果代码如下：

```
 $this->paginate = array(
            'limit' => 15,
            'fields' => array('*', "MATCH (data) AGAINST ('$q') AS rating"),
            'conditions' =>  "MATCH(SearchIndex.data) AGAINST('$q' IN BOOLEAN MODE)",
            'order' => array(
                'rating' => 'desc',
            ),
    );
    $paginatedResults = $this->paginate('SearchIndex'); 
```

这无缝地工作了！

我认为这是使用 Cake 实现真实搜索结果的最佳方式。除非有人有更好的选择:)

在双引号之间搜索短语将为您提供应有的结果！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-02T10:54:49.917

我已经使用了 Thomas 的上述数据库调用（谢谢），它确实可以无缝工作。

但是代码：

```
'conditions' =>  "MATCH(SearchIndex.data) AGAINST('$q' IN BOOLEAN MODE)", 
```

删除数据抽象层并打开您的站点以进行 SQL 注入。

它可能不太好（还没有完全测试过），但试试：

```
'SearchIndex.data LIKE'=>'%'.$search.'%' 
```

我希望这在某种程度上有所帮助。

# android - 包含 jni 文件的项目

> ID：10827448
> 
> 赞同：2
> 
> 时间：2012-05-31T04:27:24.320
> 
> 标签：android, android-ndk, java-native-interface

我正在尝试将一个 android 项目导入到我的 Eclipse 中。当我运行这个项目时，我得到一个错误，“库为空”。我发现这个项目不同，它包含一个名为“jni”的文件。我的图书馆在那个文件里。我猜这个文件中的库从未编译过（我不知道为什么）我在某些主题中看到我需要使用 NDK？有人对此有明确的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:30:52.187

请参阅以下链接。[ndk](http://developer.android.com/sdk/ndk/index.html) [示例 1](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/) [示例 2下载链接](http://marakana.com/forums/android/examples/49.html)

**Step1：**首先创建一个项目，然后在你的项目目录下创建一个名为jni的文件夹

**步骤2：**在jni文件夹中创建addition.c文件并添加以下行。

```
#include "com_ndkadd_Addition.h"

JNIEXPORT jint JNICALL Java_com_ndkadd_Addition_messageFromNativeCode

(JNIEnv * env, jobject jObj,jint value1, jint value2)
{

return (value1 + value2);

} 
```

**Step3：**在jni文件夹和下面的代码中创建Android.mk文件

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := Addition
LOCAL_SRC_FILES := addition.c

include $(BUILD_SHARED_LIBRARY) 
```

**第4 步：**从命令提示符导航到项目的 bin 文件夹。键入以下行并按 Enter。

```
javah -jni com.ndkadd.Addition 
```

**Step5：**将创建的**com_ndkadd_Addition.h**文件移动到 jni 文件夹。

**第6步：**现在从命令提示符编译本机代码如下。

```
location_of_ndk\project_name> location_of_ndk\ndk-build 
```

**第7 步：**在您的活动和使用在您的 libs 文件夹中创建的 .so 文件的代码代码下方。

```
public class Addition extends Activity {
    TextView txtHello;

    static
    {
    System.loadLibrary("Addition");
    }
    public native int messageFromNativeCode(int v1,int v2);
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView txtHello = new TextView(this);
        txtHello.setText(""+messageFromNativeCode(5,5));        
        setContentView(txtHello);        
    }
} 
```

**注意::**最好在你有 SDK 的地方有 NDK，并且在 android-ndk-r8 文件夹中包含 JNI 的项目。

# php - 将变量从表单传递到 php

> ID：10827451
> 
> 赞同：0
> 
> 时间：2012-05-31T04:27:35.643
> 
> 标签：php, javascript, html, forms

我尽力不发布这个问题，但我就是想不通这个问题。我正在尝试将我的 html 表单中的变量传递给 php 脚本，到目前为止代码看起来像这样

```
<?PHP
echo "<b>Previously Submitted</b><br />";
echo "<select name='files' onChange='updateInfo();'>";
echo "<option value=''></option>";
$files = scandir("businesses");
foreach ($files as $file)
    if($file != "."){
      if($file != ".."){
        if($file != "form.php"){
          echo "<option value='$file'>". htmlspecialchars($file) ."</option>";
        }
      }
    }
echo "</select>";
?>

<script type="text/javascript">
function updateInfo(){
  <?PHP
    mysql_connect("HOSTHERE","USERNAME","PASSWORD");
    mysql_select_db("USERNAME");
    //This is the line that is of interest i can't figure how to pass document.forms['frm'].files.value to my query
    $bizname = mysql_query("SELECT `Value` FROM `" . document.forms['frm'].files.value . "` WHERE `Variable` LIKE 'Name'");
    $bizValue = mysql_fetch_assoc($bizname);
    echo "document.forms['frm'].businessname.value = '" . $bizValue['Value'] . "';";
    mysql_close();
  ?>
}
</script> 
```

关于如何将下拉列表中的值传递给 php 代码的任何帮助将不胜感激。

**编辑**

只是为了弄清楚我在做什么对不起一些混乱基本上我有一个下拉菜单当下拉菜单更改时我想使用下拉菜单中的任何内容作为查询中的表来查询我的数据库然后是什么我从数据库中获得的值在我的表单中的文本字段中设置。这一切都在一页中，只是在更改下拉列表时尝试更新文本文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:04:39.243

您编写 updateInfo 脚本的方式是不可能的。使用 php 连接（即“.”），您只能连接 php 变量而不连接 java-script。PHP 不明白。

我建议你使用ajax。在您的 updateInfo 中传递更改的值。

```
<?php
echo "<select name='files' onChange='updateInfo(this.value);'>";
echo "<option value=''></option>";
$files = scandir("business");
foreach ($files as $file)
    if($file != "."){
      if($file != ".."){
        if($file != "form.php"){
          echo "<option value='$file'>". htmlspecialchars($file) ."</option>";
        }
      }
    }
echo "</select>";
?> 
```

然后发送ajax并得到响应。并根据需要处理响应

```
<script type="text/javascript">
function updateInfo(val){
$.ajax({
   url: '/path/to/ajaxrequest.php',
   type: 'post',
   data: {'file':val}
   success: function(response){
      document.forms['frm'].businessname.value = response;
   }
});
</script> 
```

和你的 ajaxrequest.php

```
<?php
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH'])=='xmlhttprequest'){

mysql_connect("HOSTHERE","USERNAME","PASSWORD");
mysql_select_db("USERNAME");

$file = mysql_real_escape_string($_POST['file']);

$bizname = mysql_query("SELECT `Value` FROM ".$file." WHERE `Variable` LIKE 'Name'");
$bizValue = mysql_fetch_assoc($bizname);
$assignVal = $bizValue['Value']; 
mysql_close();

echo $assignVal;
}
?> 
```

如果你不明白，请告诉我。谢谢你。

这里我给你一个[下载代码的链接](https://docs.google.com/open?id=0B_MdP7QR7kseYlVQUVI3ajBveG8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:32:34.373

将标签放在 HTML 表单元素中。我也不明白你为什么要合并 javascript 和 PHP mysql 更新功能。你可以编写像 1.Form Element 这样的代码

完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T04:33:31.243

您需要提交表格。您可以使用 post 或 get 作为方法。但如果不提交，您不能将变量从 html 传递到 php。

```
<?PHP
echo "<form name='frm_1' id='frm_1' action='your_destination_page.php' method='post>'";
echo "<b>Previously Submitted</b><br />";
echo "<select name='files' onChange='updateInfo();'>";
echo "<option value=''></option>";
$files = scandir("businesses");
foreach ($files as $file)
    if($file != "."){
      if($file != ".."){
        if($file != "form.php"){
          echo "<option value='$file'>". htmlspecialchars($file) ."</option>";
        }
      }
    }
echo "</select></form>"; 
```

?>

在目标页面上写在页面顶部

```
<?php echo "<pre>";print_r($_POST);echo "</pre>";?> 
```

您将拥有 $_POST 数组中所有控件的值。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-31T04:34:29.600

```
<?PHP
echo "<b>Previously Submitted</b><br />";
echo "<select name='files' onChange='updateInfo();'>";
echo "<option value=''></option>";
$files = scandir("businesses");
foreach ($files as $file)
    if($file != "."){
      if($file != ".."){
        if($file != "form.php"){
          echo "<option value='$file'>". htmlspecialchars($file) ."</option>";
        }
      }
    }
echo "</select>";
?>

<script type="text/javascript">
function updateInfo(){
  <?PHP
    mysql_connect("HOSTHERE","USERNAME","PASSWORD");
    mysql_select_db("USERNAME");
    //This is the line that is of interest i can't figure how to pass document.forms['frm'].files.value to my query
    $bizname = mysql_query("SELECT `Value` FROM `" . document.forms['frm'].files.value . "` WHERE `Variable` LIKE 'Name'");
    $bizValue = mysql_fetch_assoc($bizname);
    $assignVal = $bizValue['Value'];
    echo "<script>document.forms['frm'].businessname.value = '" .$assignVal . "';</script>";
    mysql_close();

     ?>
} 
```

尝试包含在脚本标签中。

# java - 为什么当我正确导入所述类并在其目录中查看它时，我会得到 ClassNotFoundExpection？

> ID：10827452
> 
> 赞同：3
> 
> 时间：2012-05-31T04:27:42.493
> 
> 标签：java, classnotfoundexception, java-3d

这是我的 Javac 编译语句：

> javac -cp "C:\java\code\j3D\j3dcore.jar;C:\java\code\j3D\j3dutils.jar;C:\java\code\j3D\vecmath.jar" Simple.java

*   编译没有问题。

三个 jar 文件（`j3dcore`、`j3dutils`和`vecmath`）是我的程序必不可少的 jar 文件（或者至少根据[这个关于 J3D 的官方教程，我被引导相信](http://java.sun.com/developer/onlineTraining/java3d/j3d_tutorial_ch1.pdf)

作为记录，我几乎从上面的 pdf 文件中逐行撕掉了这段代码。

*   jar 文件正确位于引用的位置

当我运行我的`Simple`程序时， ( `java Simple`) 我受到了欢迎

> 线程“main”中的异常 java.lang.NoClassDefFoundError: javax/media/j3d/Cavas3d 原因：**java.lang.ClassNotFoundExpection: javax.media.j3d.Canvas3D**

目前我正盯着这个`Canvas3D.class`位于`j3dcore.jar\javax\media\j3d\`

wtfisthis.jpg

这是源代码：

```
//First java3D Program
import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Frame;
import java.awt.event.*;
import com.sun.j3d.utils.applet.MainFrame;
import com.sun.j3d.utils.universe.*;
import com.sun.j3d.utils.geometry.ColorCube;
import javax.media.j3d.*;
import javax.vecmath.*;
import java.awt.GraphicsConfiguration;

public class Simple extends Applet {
    public Simple() {
        setLayout(new BorderLayout());
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        Canvas3D canvas3D = new Canvas3D(config);
        add("Center", canvas3D);

        BranchGroup scene = createSceneGraph();
        scene.compile();

        // SimpleUniverse is a Convenience Utility class
        SimpleUniverse simpleU = new SimpleUniverse(canvas3D);

        // This moves the ViewPlatform back a bit so the
        // objects in the scene can be viewed.
        simpleU.getViewingPlatform().setNominalViewingTransform();

        simpleU.addBranchGraph(scene);
    }   // end of HelloJava3Da (constructor)
    public BranchGroup createSceneGraph() {
        // Create the root of the branch graph
        BranchGroup objRoot = new BranchGroup();

        // Create a simple shape leaf node, add it to the scene graph.
        // ColorCube is a Convenience Utility class
        objRoot.addChild(new ColorCube(0.4));

        return objRoot;
    }
    public static void main(String args[]){
        Simple world = new Simple();
    }
} 
```

1.  我是否正确导入？
2.  我是否在 Javac 语句中错误地引用了我的 jar 文件？
3.  如果我`Canvas3D`在其正确的目录中清楚地看到为什么 java 找不到它？
4.  `j3dcore.jar`两者中的第一个文件夹`vecmath.jar`是“javax”。编译器是否感到困惑？
5.  如果编译器感到困惑，我如何在我的源代码中引用它时指定在哪里找到确切的类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T04:34:43.677

尝试：

```
java -cp "C:\java\code\j3D\j3dcore.jar;C:\java\code\j3D\j3dutils.jar;C:\java\code\j3D\vecmath.jar"  Simple 
```

您还需要在`java`命令行中包含类路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:34:57.103

只是做`java simple`不会有帮助。您需要在运行程序时将所有这些 jar 文件放入类路径中。就像你编译它一样。

java -cp`C:\java\code\j3D\j3dcore.jar;C:\java\code\j3D\j3dutils.jar;C:\java\code\j3D\vecmath.jar Simple`

请检查[设置类路径](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)

# c++ - 我需要动态分配双数组来传递它们吗？

> ID：10827453
> 
> 赞同：0
> 
> 时间：2012-05-31T04:27:46.160
> 
> 标签：c++

这是一个简单的编译错误，我正在分配双数组，如下所示：

```
double mixmu[][1]  = {{1},{-1}};
double mixvar[][1] = {{1},{1}};
double coef[]      = {1,1}; 
```

我不能将这些作为双**对象传递吗？

```
error: no matching function for call to ‘MixtureModel::MixtureModel(int, int, double [2], double [2][1], double [2][1], Distribution*)’
./problems/MixtureModel.h:25: note: candidates are: MixtureModel::MixtureModel(int, int, double*, double**, double**, Distribution*) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:35:18.657

> **我需要动态分配双数组来传递它们吗？**

不，你没有！
您的误解/怀疑源于（不正确的）事实，即数组是指针

***不！数组不是指针！！***
在数组名称无效的情况下，数组名称有时会衰减为指向其第一个元素的指针。

二维数组不会衰减为双指针。它衰减为指向数组的指针。

您的声明必须是：

```
MixtureModel::MixtureModel(int, int, double [2], double [2][1], double [2][1], Distribution*); 
```

或者

```
MixtureModel::MixtureModel(int, int, double *, double(*)[1], double (*)[1], Distribution*); 
```

* * *

**好读：**
[如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

# android - 单击按钮时展开 EpandableListView

> ID：10827454
> 
> 赞同：3
> 
> 时间：2012-05-31T04:27:47.983
> 
> 标签：android, onclick, expandablelistview

我正在尝试在我的项目中实现 exapndablelistview。我能够展开 listView，问题是我只想在单击图像时展开它，但是每当我单击 listview 行上的任意位置时，列表就会展开。请帮我解决这个问题。

提前致谢。

我在 xml 中的代码是

```
<ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true" 
        android:layout_weight="1"
        android:drawSelectorOnTop="false"
        android:groupIndicator="@android:color/transparent">
   </ExpandableListView> 
```

我的java类是

```
public class MainActivity extends ExpandableListActivity{
    TextView tv;
    ExpandableListView lv;
    Button b1;
     Integer imgk[]={R.drawable.dhoni,R.drawable.ganguly,R.drawable.irfan,R.drawable.rahul,R.drawable.sachin,R.drawable.sehwag,R.drawable.singh,R.drawable.sri,R.drawable.uthapa,R.drawable.yuvi};
    String[] names={"MS Dhoni","Sorav Ganguly","Irfan Pathan","Rahul Dravid","Sachin Tendulkar","Virender Sehwag","Harbajan Singh","Sreeshanth","Robin Uthapa","Yuvraj Singh"};
    String matches[]={"21","12","13","15","35","22","25","18","21","31"};
    String[] fifty={"12","21","16","10","16","18","10","20","19","22"};
    String hund[]={"21","12","17","18","13","21","23","10","21","14"};
    String[] team={"India","pakistan","bangladesh","australia","new zealand","south Africa","england","zimbabwe","west indies","sri lanka"};
    String[][] childs={{"India","pakistan"},{"India","pakistan"},{"India","pakistan"},{"India","pakistan"},{"India","pakistan"},{"India","pakistan"},{"India","pakistan"},{"India","pakistan"},{"India","pakistan"},{"India","pakistan"}};
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.myscreen);

        tv = (TextView) this.findViewById(R.id.textView1);  
        tv.setSelected(true); 

        lv=getExpandableListView();

    CustomAdapter ca=new CustomAdapter(MainActivity.this);
        lv.setAdapter(ca);
    }

  public class CustomAdapter extends BaseExpandableListAdapter{
     Context con;
     private LayoutInflater myInflater;
     private Bitmap bm;
     int count=0;
    public CustomAdapter(Context con) {
        // TODO Auto-generated constructor stub
        this.con=con;
        myInflater=LayoutInflater.from(con);
    }

    @Override
    public int getGroupCount() {
        // TODO Auto-generated method stub
        return names.length;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        // TODO Auto-generated method stub
        return childs[groupPosition].length;
    }

    @Override
    public Object getGroup(int groupPosition) {
        // TODO Auto-generated method stub
        return names[groupPosition];
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return childs[groupPosition][childPosition];
    }

    @Override
    public long getGroupId(int groupPosition) {
        // TODO Auto-generated method stub
        return groupPosition;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return childPosition;
    }

    @Override
    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return true;
    }

    @Override
    public View getGroupView(final int groupPosition, final boolean isExpanded,
            View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        final ViewHolder holder;
          if (convertView == null) {
           convertView = myInflater.inflate(R.layout.inflatexml, null);
           holder = new ViewHolder();

           holder.txtName = (TextView) convertView.findViewById(R.id.textView1);

           holder.img=(ImageView)convertView.findViewById(R.id.imageView1);
           holder.img1= (ImageView)convertView.findViewById(R.id.imageView2);
           holder.down=(ImageView)convertView.findViewById(R.id.imageView4);
           convertView.setTag(holder);
          } 
          else {
           holder = (ViewHolder) convertView.getTag();
          }

          holder.txtName.setText(names[groupPosition]);
          holder.img.setImageResource(imgk[groupPosition]);

            holder.img1.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Bitmap bm=BitmapFactory.decodeResource(MainActivity.this.getResources(),
                        imgk[groupPosition]);
                    ByteArrayOutputStream baos = new ByteArrayOutputStream();  
                    bm.compress(Bitmap.CompressFormat.PNG, 100, baos);   
                    byte[] b = baos.toByteArray(); 
                    Intent in=new Intent(MainActivity.this,Details.class);
                    in.putExtra("img", b);
                    in.putExtra("names", names[groupPosition]);
                    in.putExtra("matches", matches[groupPosition]);
                    in.putExtra("fifty", fifty[groupPosition]);
                    in.putExtra("hund", hund[groupPosition]);
                    in.putExtra("team", team[groupPosition]);
                    startActivity(in);
                }
            });
            holder.down.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    count++;
                    if(isExpanded){
                        holder.down.setFocusable(false);
                        lv.collapseGroup(groupPosition);
                        System.out.println("collapsed.....");
                    }

                    else{
                        holder.down.setFocusable(false);
                        lv.expandGroup(groupPosition);
                        System.out.println("Expanded.....");
                    }
                }
            });

          return convertView;

    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        TextView tv=getGenericView();
        tv.setText(""+childs[groupPosition][childPosition]);
        return tv;
    }

    public TextView getGenericView() {
        // TODO Auto-generated method stub
        AbsListView.LayoutParams lp=new LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT);
        TextView textView = new TextView(MainActivity.this);
        textView.setLayoutParams(lp);
        return textView;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return true;
    }

}
  static class ViewHolder {
      TextView txtName;
      ImageView img,img1,down;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-22T11:38:42.200

如果要通过单击特定按钮或其他视图来展开/折叠组，则必须在适配器类的 getGroupView 方法中获取该按钮。然后，在你的 Button 的 onClick 方法中，要么将父级转换为 ExpandableListView，要么在创建适配器时在构造函数中传递 List 的引用。

我更喜欢第一种方法。这是代码，假设您有一个 TextView 和一个 ImageView 是箭头。我也添加了更改箭头状态。@Override public View getGroupView(final int groupPosition, final boolean isExpanded, View convertView, final ViewGroup parent) {

```
String headerTitle = (String) getGroup(groupPosition);

if (convertView == null) {
    LayoutInflater infalInflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = infalInflater.inflate(R.layout.left_drawer_list_group, parent, false);
}

TextView listHeaderText = (TextView) convertView
        .findViewById(R.id.left_menu_list_header_text);
ImageView listHeaderArrow = (ImageView) convertView.findViewById(R.id.left_menu_list_header_arrow);

listHeaderText.setText(headerTitle);

//Set the arrow programatically, so we can control it
int imageResourceId = isExpanded ? android.R.drawable.arrow_up_float : android.R.drawable.arrow_down_float;
listHeaderArrow.setImageResource(imageResourceId);

listHeaderArrow.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        if(isExpanded) ((ExpandableListView) parent).collapseGroup(groupPosition);
        else ((ExpandableListView) parent).expandGroup(groupPosition, true);

    }
});

return convertView; 
```

}

# javascript - Moment.js 文本格式和类

> ID：10827455
> 
> 赞同：4
> 
> 时间：2012-05-31T04:27:51.973
> 
> 标签：javascript, jquery, momentjs

第一次发帖。所以我必须在一个看起来像这样的元素中格式化一些文本

```
<div class="entry-time">
  2012-05-30T20:11:06+00:00 
</div> 
```

我正在尝试使用[moment.js](http://momentjs.com/docs/)将其格式化为更具可读性的内容。我只能从前端使用 javascript 执行此操作。我写了一个看起来像这样的函数。

```
$(document).ready(function() {
    function formatDate(date) {
        formattedDate = date.text();
        var d = moment(formattedDate, "YYYY-MM-DDTHH:mm:ss");
        $(date).html( d.format("dddd, MMMM Do YYYY, h:mm:ss a"));
    };

    formatDate($('.entry-date'));
}); 
```

如果有一个元素，则此方法有效，但当有多个元素时，它将所有内容格式化为一个日期。我知道这与 jQuery 拉入一组元素有关，但我不知道如何使用 entry-date 类对每个元素执行我所做的操作。

任何人都可以帮忙吗？先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T04:41:28.127

At the heart of what's wrong is that the jQuery .text() method gets "the combined text contents of each element in the set of matched elements, including their descendants" ([api.jquery.com/text](http://api.jquery.com/text/)) rather than iterating over the set of elements as you intend.

Something like this should work, passing a function into the jQuery .html() setter method:

```
$(".entry-date").html(function(index, value) {
    return moment(value, "YYYY-MM-DDTHH:mm:ss").format("dddd, MMMM Do YYYY, h:mm:ss a");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T04:31:22.307

您需要使用 jquery 的 .each 方法遍历每个匹配项：

```
$(date).each(function(){  Format date here  }); 
```

这将进入您现在现有的函数 formatDate。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T04:43:25.687

You will want to loop through the elements passed to the function. This could be done with a $.each() in jQuery. Here's a quick example:

[http://jsfiddle.net/n1ck/QQYq2/1/](http://jsfiddle.net/n1ck/QQYq2/1/)

```
$(function(){
    function formatDate(dates) {
        dates.each(function(){
            //get date
            formattedDate = $(this).text();

            //format it
            var d = moment(formattedDate, "YYYY-MM-DDTHH:mm:ss");

            //replace it
            $(this).html(d.format("dddd, MMMM Do YYYY, h:mm:ss a"));
        });
    };

 formatDate($('.entry-time'));
});
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T04:37:46.030

Based on your current code you can modify your `formatDate` function like this

```
 $(document).ready(function() {
    function formatDate(date) {
      date.each(function(){
        var formattedDate = $(this).text();
        var d = moment(formattedDate, "YYYY-MM-DDTHH:mm:ss");
        $(this).html( d.format("dddd, MMMM Do YYYY, h:mm:ss a"));

      });
  };

 formatDate($('.entry-time'));
}); 
```

And you actual class name is `entry-time` but you are calling like `formatDate($('.entry-date'));` which will get nothing as the class `entry-date` doesn't exist.

[Working Fiddle](http://jsfiddle.net/joycse06/g3LqA/)​</p>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T04:38:32.497

You have to use **each** because your selector is a **class(since you used '.')** which can be used with multiple DOM's as well..so may be your jquery thing is returning an array which is to be traversed using **each**.

```
$('.entry-date').each(function(){
   formatDate($(this).val());//if it is a text box
}); 
```

OR

```
$('.entry-date').each(function(){
   formatDate($(this).text());//if it is a label
}); 
```

# ios - iPad QR 扫描仪 - 如何调整 Zxing 扫描仪的对焦区域

> ID：10827456
> 
> 赞同：2
> 
> 时间：2012-05-31T04:28:04.210
> 
> 标签：ios, ipad, zxing

目前矩形框几乎占据了整个屏幕，请问有没有办法缩小对焦区域？

因为我发现如果我在 iPad 上使用内置 Zxing 的 iPhone 应用程序，效率比 iPad 应用程序要好。

所以我正在尝试减少焦点区域，希望这可以让我在 iPad 上获得更好的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:24:41.257

你说的是 iPad 3 吗？iPad 2 有一个定焦摄像头。最近检测到 iPad 3 支持存在问题，导致解码率低，尤其是对于密集代码。通过调整 ZXing 要求 iOS 提供的分辨率已部分修复，但此时修复尚未完成。

或者您只是在考虑裁剪 ZXing 查看的区域以检测代码？这不太可能产生更好的解码率。鉴于 ZXing 要求 iOS 提供的分辨率，它可以非常快速地扫描整个捕获图像。从理论上讲，无关的杂乱可能会混淆它，而裁剪可以减少这种情况，但我不会花任何精力尝试改进裁剪，直到我确定混淆确实发生了。我没有看到任何证据。

# titanium - 在 Android (titanium) 中禁用运行时错误对话框

> ID：10827463
> 
> 赞同：3
> 
> 时间：2012-05-31T04:29:36.027
> 
> 标签：titanium, titanium-mobile

有什么方法可以配置钛 android 使其不会向用户显示运行时错误对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:19:01.607

不，现在没有。不过，将来可能会有。如果您仍然想要它，请加入这张票：

[https://jira.appcelerator.org/browse/TIMOB-9735](https://jira.appcelerator.org/browse/TIMOB-9735)

# ruby-on-rails-3 - 在 Deivse rails 中发送加密密码表单以进行身份 验证

> ID：10827467
> 
> 赞同：1
> 
> 时间：2012-05-31T04:30:26.623
> 
> 标签：ruby-on-rails-3, authentication, devise

我正在开发一个将被移动设备使用的 api。设计是我选择启用 auth_token 的身份验证。我的问题是我想从移动设备发送散列密码进行身份验证。我不知道 Devise 是如何加密密码的。我需要一种方法来覆盖设计加密，以便我可以在移动设备和服务器端使用我的

# jquery - jQuery移动链接多个html文档

> ID：10827468
> 
> 赞同：0
> 
> 时间：2012-05-31T04:30:46.160
> 
> 标签：jquery, html, ajax, mobile

我有多个 html 文档，它们共享一个 css 样式表（不是一个 html 中的多个页面 div 部分），用于使用 jQuery 移动框架的 Web 应用程序项目。所有 html 文档单独工作都很好，但如果一个页面从另一个页面的链接打开，则所有脚本和样式都不再适用。有没有办法让每个 html 页面在链接时保持刷新？我已经尝试过`data-ajax="false"`并`rel="external"`在`<a>`标签中，但他们没有工作。您的帮助将不胜感激！

是的，每个 html 在 head 标签中都有插件链接：

```
<link rel="stylesheet" href="style/custom.css"> 
<link rel="stylesheet" href="style/jquery.mobile-1.0.1.min.css" /> 
<script src="js/jquery-1.6.4.min.js"></script> 
<script src="js/jquery.mobile-1.0.1.min.js"></script> 
<script type="text/javascript">
 $(document).ready(function(event){ 
//custom script in each html 
}); 
```

并且 html 与其标签中的标签链接：

```
<a href="page1.html">page 1</a> 
<a href="page2.html">page 2</a> 
<a href="page3.html">page 3</a> 
```

链接有效，但当从前一页打开新的 html 时，不再应用自定义样式表和脚本。如果我在标签中添加 data-ajax="false" 或 rel="external" ，即使链接也不再起作用。

感谢您查看代码！

PS。抱歉，我不熟悉 jsfiddle 并为两个单独的 html 文件复制了我的代码。如果我先打开 page2.html，滑块可以正常工作。但是如果我从 page1.html 的菜单中打开它，滑块就不起作用。

这是 page1.html：

```
<!doctype html> 
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function(event){
    $(document).toggle(
      function(){
      $('.navigation').css("display", "block");},
      function(){
      $('.navigation').css("display", "none");
      });
});
</script>
<style type="text/css">
.navigation{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:40px;
    background:#cfcfcf;
    display:none;
}
.menu{
    float:left;
    margin: 10px 20px;
    text-decoration:none;
}
.main{
    margin: 50px;
}
</style>
<body>
<div data-role="page">
    <div id="page1">
        <div class="navigation">
            <a class="menu" href="page1.html">page 1</a> 
            <a class="menu" href="page2.html">page 2</a> 
        </div>
        <p class="main"> this is page1 <br> click anywhere</p>
    </div>
</div>
</body>
</html> 
```

这是 page2.html：

```
<!doctype html> 
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function(event){
    $(document).toggle(
      function(){
      $('.navigation').css("display", "block");},
      function(){
      $('.navigation').css("display", "none");
      });

    $('.slider').change(function(){
        var wid= $(this).val() + "px";
        $('#box').css("width", wid);
    });  
});
</script>
<style type="text/css">
.navigation{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:40px;
    background:#cfcfcf;
    display:none;
}
.menu{
    float:left;
    margin: 10px 20px;
    text-decoration:none;
}
.main{
    margin: 50px;
}

#box{
    width:10px;
    height:30px;
    margin: 0px 50px;
    background:#000;
}

</style>
<body>
<div data-role="page">
    <div id="page2">
        <div class="navigation">
            <a class="menu" href="page1.html">page 1</a> 
            <a class="menu" href="page2.html">page 2</a> 
        </div>
        <p class="main"> this is page2 <br>adjust box width with slider </p>
        <div id="box"></div>
        <input type="range" class="slider" min="5" max="600" step="1" value="10"/> 
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:47:55.500

把你的css和脚本放到每个页面的head标签上

* * *

试试这个

```
 <!doctype html> 
<html>
<head>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />

<script type="text/javascript">

$( document ).delegate("#page1", "pageinit", function() {     

    $(document).toggle(
      function(){
      $('.navigation').css("display", "block");},
      function(){
      $('.navigation').css("display", "none");
      });                 
});

</script>
<style type="text/css">
.navigation{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:40px;
    background:#cfcfcf;
    display:none;
}
.menu{
    float:left;
    margin: 10px 20px;
    text-decoration:none;
}
.main{
    margin: 50px;
}
</style>
<body>
<div data-role="page" id="page1">
    <div>
        <div class="navigation">
            <a class="menu" href="page1.html">page 1</a> 
            <a class="menu" href="page2.html">page 2</a> 
        </div>
        <p class="main"> this is page1 <br> click anywhere</p>
    </div>
</div>

<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
</body>
</html> 
```

和 page2.html ，

```
 <!doctype html> 
<html>
<head>   

<body>

<div data-role="page" id="page2">

 <script type="text/javascript">

$( document ).delegate("#page2", "pageinit", function() { 
    $(document).toggle(
      function(){
      $('.navigation').css("display", "block");},
      function(){
      $('.navigation').css("display", "none");
      });

    $('.slider').change(function(){
        var wid= $(this).val() + "px";
        $('#box').css("width", wid);
    });  
});
</script>
<style type="text/css">
.navigation{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:40px;
    background:#cfcfcf;
    display:none;
}
.menu{
    float:left;
    margin: 10px 20px;
    text-decoration:none;
}
.main{
    margin: 50px;
}

#box{
    width:10px;
    height:30px;
    margin: 0px 50px;
    background:#000;
}

</style>
    <div >
        <div class="navigation">
            <a class="menu" href="page1.html">page 1</a> 
            <a class="menu" href="page2.html">page 2</a> 
        </div>
        <p class="main"> this is page2 <br>adjust box width with slider </p>
        <div id="box"></div>
        <input type="range" class="slider" min="5" max="600" step="1" value="10"/> 
    </div>
</div>
</body>
</html> 
```

试试这个

# python - 使用 pyodbc 连接到 PostgreSQL

> ID：10827471
> 
> 赞同：4
> 
> 时间：2012-05-31T04:30:58.837
> 
> 标签：python, sql, postgresql, odbc, pyodbc

我有一个在 localhost 上运行的 PostgreSQL。我安装了 psqlODBC 驱动程序。现在，当我尝试使用 pyodbc 连接到服务器时：

```
import pyodbc
connection = pyodbc.connect("DRIVER={psqlOBDC};SERVER=localhost;DATABASE=weather;UID=postgres;PWD=password") 
```

但我收到此错误：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
pyodbc.Error: ('08001', '[08001] Already connected. (202) (SQLDriverConnect)') 
```

有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T12:48:10.543

当然，您必须安装 ODBC 驱动程序。我不知道 Mac，但在 Windows 中有配置数据源的 ODBC 管理器。对于 PostgreSQL 驱动程序，还有“测试”按钮来检查是否可以建立连接。

正如雾注意到的那样，您还可以使用其他技术连接到 PostgreSQL。如果您可以使用 Jython，那么您可以使用 JDBC 驱动程序。还有像 psycopg、PyGreSQL 和 pg8000（纯 Python）这样的原生驱动程序。你能给他们试试吗？

# asp.net-mvc-3 - 在我的 Asp.net mvc3 中将 CkFinder 与 Ckeditor 集成失败。如何成功集成它？

> ID：10827478
> 
> 赞同：1
> 
> 时间：2012-05-31T04:32:05.927
> 
> 标签：asp.net-mvc-3, ckeditor

除了浏览服务器和其他功能外，我的 ckeditor 效果很好。

**在ckeditor的配置文件中**

```
 CKEDITOR.editorConfig = function (config) {
    config.htmlEncodeOutput = true,
    config.filebrowserBrowseUrl = true,
    config.filebrowserImageBrowseUrl=true
   };

    var editor = CKEDITOR.replace("profiel_lange_beschrijving", { toolbar: 'Full' });
    CKFinder.setupCKEditor(editor, '~/Scripts/ckfinder');
    CKEDITOR.replace('editor',
    {
    filebrowserBrowseUrl: '~/Scripts/ckfinder/ckfinder.html',
    filebrowserImageBrowseUrl: '~/Scripts/ckfinder/ckfinder.html?type=Images',

   filebrowserUploadUrl: '~/Scripts/ckfinder/core/connector/aspx/connector.aspx? command=QuickUpload&type=Files',
    filebrowserImageUploadUrl: '~/Scripts/ckfinder/core/connector/aspx/connector.aspx?   command=QuickUpload&type=Images'
  command=QuickUpload&type=Flash'
}); 
```

如何成功地将 ckfinder 集成到 ckeditor 中？请帮助朋友

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T10:38:12.833

将 Ckfinder 集成到 ckeditor 中。然后将其添加到您的 Razor 视图中

```
CKEDITOR.replace('editor',
{
 filebrowserImageBrowseUrl: '/Scripts/ckfinder/ckfinder.html?type=UploadedImages',
 filebrowserUploadUrl: '/Scripts/ckfinder/core/connector/aspx/connector.aspx?       command=QuickUpload&type=Files',
 filebrowserImageUploadUrl:'/UploadImage/Upload'

}
); 
```

其中 'editor' 是文本框 id 。

然后创建一个 UploadImage 控制器

```
 public ActionResult Upload(HttpPostedFileBase upload, string CKEditorFuncNum, string CKEditor, string langCode)
    {
        string url; // url to return
        string message; // message to display (optional)
        message = "Image successfully saved ";

   //do save image code here
        url =  "/" + path + "/" + filename;
      string output = @"<html><body><script>window.parent.CKEDITOR.tools.callFunction(" + CKEditorFuncNum + ", \"" + url + "\", \"" + message + "\");</script></body></html>";

            return Content(output);
        } 
```

试试这个效果很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:41:12.777

你可能把事情复杂化了。这是 CKFinder[安装指南](http://docs.cksource.com/CKFinder_2.x/Developers_Guide/ASP.NET/Installation)的链接和[配置指南](http://docs.cksource.com/CKFinder_2.x/Developers_Guide/ASP.NET/Configuration)的链接，两者都适用于 CKFinder 的[ASP.NET](http://download.cksource.com/CKFinder/CKFinder%20for%20ASP.NET/2.2.1/ckfinder_aspnet_2.2.1.zip)版本。

# regex - 我可以在正则表达式中使用布尔 AND 条件吗？

> ID：10827480
> 
> 赞同：6
> 
> 时间：2012-05-31T04:32:17.190
> 
> 标签：regex, boolean-operations

说，如果我有一个 DN 字符串，是这样的：

```
OU=Karen,OU=Office,OU=admin,DC=corp,DC=Fabrikam,DC=COM 
```

如何制作正则表达式以仅选择同时具有`OU=Karen`和的 DN `OU=admin`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T04:50:01.313

这是正则表达式前瞻解决方案，如果它包含任何顺序的所需部分，则匹配整个字符串以供参考。如果您不将模式存储在某种可配置变量中，我会坚持使用 nhahtdh 的解决方案。

```
/^(?=.*OU=Karen)(?=.*OU=admin).*$/

^        - line start
(?=      - start zero-width positive lookahead
.*       - anything or nothing
OU=Karen - literal
)        - end zero-width positive lookahead
         - place as many positive or negative look-aheads as required
.*       - the whole line
$        - line end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T04:35:37.033

您意识到您不必使用单个正则表达式甚至*一个正则表达式来做**所有事情*。

 *正则表达式非常适合捕获输入类，但是，如果您有两个完全固定的字符串，您可以`contains()`对它们都使用 -type 方法，然后再`and`使用结果。

或者，如果您需要使用正则表达式，您可以执行*两次*（每个字符串一次）并将`and`结果放在一起。

如果您需要使用*单个*正则表达式来执行此操作，您可以尝试以下操作：

```
,OU=Karen,.*,OU=admin,|,OU=admin,.*,OU=Karen, 
```

但是您还必须担心这些节何时出现在行的开头或结尾，以及各种其他边缘情况（一个或两个在开头或结尾，彼此相邻，名称如`Karen7`or `administrator-lesser`，以及很快）。

不得不考虑*所有*可能性最终可能会导致一些可怕的事情，例如：

```
^OU=Karen(,[^,]*)*,OU=admin,|
^OU=Karen(,[^,]*)*,OU=admin$|
,OU=Karen(,[^,]*)*,OU=admin,|
,OU=Karen(,[^,]*)*,OU=admin$|
^OU=admin(,[^,]*)*,OU=Karen,|
^OU=admin(,[^,]*)*,OU=Karen$|
,OU=admin(,[^,]*)*,OU=Karen,|
,OU=admin(,[^,]*)*,OU=Karen$ 
```

虽然，使用先进的 enouge 正则表达式引擎，这可能会简化为更小的东西（尽管它不太可能更快，仅仅是因为所有的前瞻性/回溯）。

*在没有复杂正则表达式的情况下可以*改进的一种方法是事先稍微按摩你的字符串，这样就不需要边界检查：

```
newString = "," + origString.replace (",", ",,") + "," 
```

以便它以逗号开头和结尾，并且其中的所有逗号都重复：

```
,OU=Karen,,OU=Office,,OU=admin,,DC=corp,,DC=Fabrikam,,DC=COM, 
```

然后你只需要检查更简单的：

```
,OU=Karen,.*,OU=admin,|,OU=admin,.*,OU=Karen, 
```

这消除了所有提到的潜在问题：

*   要么在字符串的开头。
*   要么在字符串的末尾。
*   两者紧靠在一起。
*   扩展名称，例如`Karen2`意外匹配。

* * *

可能*最好*的方法（如果您的语言允许）是简单地将字符串拆分为逗号并检查它们，例如：

```
str = "OU=Karen,OU=Office,OU=admin,DC=corp,DC=Fabrikam,DC=COM"
elems[] = str.splitOn(",")

gotKaren = false
gotAdmin = false
for each elem in elems:
    if elem = "OU=Karen": gotKaren = true
    if elem = "OU=admin": gotAdmin = true

if gotKaren and gotAdmin:
    weaveYourMagicHere() 
```

这既忽略了它们可能出现的顺序，又绕过了检测边缘情况可能需要的任何正则表达式“体操”。

它还具有可能比等效的正则表达式更具可读性的优点:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T04:35:29.850

如果您必须使用正则表达式，您可以使用

```
/OU=Karen.*?OU=admin|OU=admin.*?OU=Karen/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T04:34:24.387

您可以`contains()`，或`indexOf()`与条件的数量一样多次来检查确切的字符串。不需要正则表达式。

可扩展的正则表达式（因为它可以支持更多条件）可能会向前看，但我怀疑它会表现得更好。

**如果你想对同一个**字符串多次执行这种类型的操作，并且字符串上有很多标记，那么你可以考虑解析字符串并存储在一些数据结构中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T04:35:21.493

不，除非您使用的是`vi`：它有一个`\&`运算符

```
/(OU=Karen.*OU=admin|ou=admin.*OU=Karen)/ 
```

不过，这可能足够接近或类似。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-31T04:42:00.060

您可以使用类似 (OU\=Karen*

# java - 输入后程序冻结？

> ID：10827487
> 
> 赞同：0
> 
> 时间：2012-05-31T04:33:08.420
> 
> 标签：java, loops, input, while-loop, freeze

在用户输入他们的选择后，该程序似乎再次提供相同的选择，然后完全冻结。它只设置在那里给他们一次选项（我相信），然后按照下面的选择。相反，它似乎恢复到顶部，然后由于某种奇怪的原因冻结。尝试了一段时间，但无济于事。

```
public void init() //Initialize method {

    setSize(1000, 800); //Set size
    Container c = getContentPane();
    c.setBackground(Color.GREEN); //Set background
}    

public void paint(Graphics g)  {

    super.paint(g); //Start paint method
    g.setFont(new Font("Veranda", Font.PLAIN, 20));
    g.setColor(Color.BLACK);
    g.drawString("Hello", 250, 25); //top display message
    String number = JOptionPane.showInputDialog("Would you like a custom loop count or an infinite? 1\. Custom 2\. Infinite"); //test choice
    n = Integer.parseInt(number);

    while (n>0 || n<2)
    if (n==1) { 
            String number2 = JOptionPane.showInputDialog("How many times would you like to loop?");
            integer = Integer.parseInt(number2);
            while (integer>0)
                while (x < integer) {   
                    g.drawString("hi", 200, y); 
                    x+=1;
                    y = y+40; //test
                }//end while
    }//end if 
    else if (n==2)  {
        while (true); //im aware this is an endless loop. Can't find anything more stable for an endless one, so its just there for now..
    }//end if   
    else;
    g.drawString("Please pick a valid choice", 200, 200);               
}//end paint
}//end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:01:17.650

这是我理解的

```
while (integer>0) {
    while (x < integer)
    {   
        g.drawString("hi", 200, y); 
        x+=1;
        y = y+40; //test
    }//end while
    integer --; // <-- This is missing
}
break; // <-- Also missing 
```

当 x = integer 但 integer 总是 > 0 时，内部 while 结束，你必须`integer --`在外部循环结束时做，所以它可以在某个时候变为 0

请使用适当的缩进...它有帮助

我编辑了代码...看看我把“整数-”放在哪里

尝试将您转换`while(n>0 || n<2)`为`if(n>0 && n<2)`

尽量不要使用`while`而不是`if`，它会减少混乱

为您的所有代码块添加括号`{}`，更易于阅读，因此更易于调试，也许您只需这样做就可以解决

也是`;`最后一个`else`打算的之后吗？

# wordpress - 编辑文件时不会反映对 Wordpress 主题模板/样式表的更新

> ID：10827498
> 
> 赞同：0
> 
> 时间：2012-05-31T04:34:59.913
> 
> 标签：wordpress, caching, varnish

我正在 Wordpress 中开发一个主题。我有一个问题，在将文件的新版本通过 FTP 传输到服务器后，我的样式表 (style.css) 的更新没有反映在浏览器中。等待很长时间（15 分钟以上）后，编辑才会显示在浏览器中。我已经尝试了[这里提到的所有东西](http://codex.wordpress.org/I_Make_Changes_and_Nothing_Happens) **（编辑：现在更新以解决这个问题）**，但没有奏效。这些包括：

*   确保没有在 Wordpress 中安装缓存插件
*   清除浏览器缓存
*   从不同的浏览器尝试
*   确保我正在编辑和访问正确的文件
*   检查缓存插件的 webhost 配置面板

似乎有些东西正在缓存样式表，但我不确定这是怎么回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:35:00.130

事实证明，我的托管公司（Certified Hosting）在他们的共享服务器上使用了一个名为 Varnish 的网页缓存插件。不幸的是，配置面板中没有提到这一点 - 为域禁用它的唯一方法是提交支持票。一旦他们在后端修复它，我的更改现在可以正确反映，而无需像以前那样等待一段时间。

# google-sheets - Google Apps 脚本中是否有类似 SQL 的功能？

> ID：10827507
> 
> 赞同：0
> 
> 时间：2012-05-31T04:35:35.690
> 
> 标签：google-sheets, google-apps-script, google-spreadsheet-api

是否可以使用 SQL 类型的查询连接到 GAS 中的 Google 电子表格？如果是这样，任何工作样本？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T05:05:44.067

根据您要执行的操作，有两种选择。

1）您可以拥有一个 SQL 数据库并使用 Jdbc 服务（[https://developers.google.com/apps-script/service_jdbc](https://developers.google.com/apps-script/service_jdbc)）连接到它。

2) 我之前使用过的另一个选项是使用 QUERY() 函数。您可以将单元格上的公式设置为类似 SQL 的查询，然后读取后续单元格。（[https://support.google.com/docs/bin/answer.py?hl=en&answer=1388882](https://support.google.com/docs/bin/answer.py?hl=en&answer=1388882)）。

Google I/O 2012 之后更新：您可能已经注意到，Google 可能听到了您的意见并介绍了 ScriptDB，它比提到的两个选项更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:07:06.073

您还可以使用电子表格 API 中可用的“结构化查询”参数进行如下调用：`&sq=filter:7`其中 filter 是您的列的名称，您希望返回该列中值为 7 的任何行的结果。请参阅列表电子表格 API 的 Feed 部分。

# .htaccess - CakePHP Webroot .htaccess

> ID：10827511
> 
> 赞同：0
> 
> 时间：2012-05-31T04:36:36.033
> 
> 标签：.htaccess, cakephp, mod-rewrite

通常会有一个看起来像这样的 webroot：

```
/www/
  |
  +--index.php
  |
  +-- js/
  |   |
  |   +-- xyz.js
  |
  +-- css/
  |    |
  |    +--xyz.css
  |
  +---etc..... 
```

通过我的设置，将所有内容移动到一个公共子文件夹中对我最有利，将 Cake 应用程序的 index.php 留在根目录中。IE：

```
/www/
  |
  +--index.php
  |
  |
  +-- resources
         |
         +-- js/
         |   |
         |   +-- xyz.js
         |
         +-- css/
         |    |
         |    +--xyz.css
         |
         +---etc..... 
```

我的 .htaccess 会是什么样子？

# django - Django 模板 CSS/IMG 在 URL 中“关闭”

> ID：10827513
> 
> 赞同：2
> 
> 时间：2012-05-31T04:36:46.657
> 
> 标签：django, django-templates

我有

```
/path/to/my/theme/static/css/frontend.css 
```

由 base.html 调用

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/frontend.css" media="all" /> 
```

其中我有标题的背景：

```
#header-wrapper 
        min-width: 960px;
        height: 150px;
        background: transparent url(img/header-bg.png) repeat-x center bottom;
} 
```

该文件是

```
/path/to/my/theme/static/img 
```

我已经运行 manage.py collectstatic 来收集文件，几乎所有内容看起来都是正确的，除了生成的链接如下所示：[http ://example.com/static/css/img/header-bg.png](http://example.com/static/css/img/header-bg.png)

其中没有显示图片，因为正确的 URL 是：[http ://example.com/static/img/header-bg.png](http://example.com/static/img/header-bg.png)

我哪里错了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-15T22:35:28.777

`url()`相对于 css 文件的路径：也许你可以使用`url(../img/header-bg.png)`

# java - 如何使用 Android 手机获取系统的 IP 地址？

> ID：10827520
> 
> 赞同：3
> 
> 时间：2012-05-31T04:37:45.867
> 
> 标签：java, android, networking, android-intent, network-programming

如何使用Android手机获取PC的IP地址？（特别是如何获取具有特定 MAC 地址的系统的 IP 地址，与 Android 手机连接在同一网络上）？

```
 wired         wired    
modem--------router---------PC(mac:EE:00:B3:2F:56:12)
               |
               |
               |
             wireless
               |
               |
               |
               -------------android phone(A) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:10:22.047

```
private String getIP(String mac) {
  String ip = null;
  try {
    BufferedReader br = new BufferedReader(new FileReader("/proc/net/arp"));
    String line = "";
    while((line = br.readLine()) != null) {
      String[] tokens = line.split("\\s+");
      // The ARP table has the form:
      //   IP address        HW type    Flags     HW address           Mask   Device
      //   192.168.178.21    0x1        0x2       00:1a:2b:3c:4d:5e    *      tiwlan0
      if(tokens.length >= 4 && tokens[3].equalsIgnoreCase(mac)) {
        ip = tokens[0];
        break;
      }
    }
    br.close();
  }
  catch(Exception e) { Log.e(TAG, e.toString()); }
  return ip;
} 
```

但请注意：除非您已经与您的 PC 建立了联系（并且您需要它的 IP 地址或名称），否则 ARP 表将为空。

我想你想反过来做，与只知道它的 MAC 地址的 PC 建立连接。那么事情就没有那么简单了。您可能会尝试 ping 本地网络上的每个人 ( `Runtime.getRuntime().exec("ping -b 192.168.178.255");`) 只是为了填充 ARP 表。

或者，也许，您可以从路由器获取所有客户端及其 IP 地址的列表？

# asp.net - 具有三级域格式的用户配置文件 URL

> ID：10827526
> 
> 赞同：1
> 
> 时间：2012-05-31T04:38:25.953
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, w3c

是否可以将用户配置文件地址更改为： **{username}.domainname.com**而不是**domainname.com/{username}**（目前我有这个）？

这种第三级域格式是什么？如何在我的 ASP.Net MVC 应用程序中实现相同的功能？我被要求在我的网站中进行此更改以访问用户个人资料。拥有这种格式有什么好处，我该如何实现呢？

如果我决定进行此更改，这将如何实现？

# html - 使用 IE10 中的 :active css 规则使整个 div 可点击

> ID：10827534
> 
> 赞同：19
> 
> 时间：2012-05-31T04:39:32.227
> 
> 标签：html, css, internet-explorer-10

我正在为一个包含多个文本元素和图像的 html 应用程序设计一个可点击的面板。

据我了解，这通常是用 div 完成的。像这样的东西：

```
<div class="myButton">
    <h2>Text</h2>
    <h3>Some more text</h3>
    <img ...>
</div> 
```

通过一些样式和连接单击事件，这可以正常工作，但是我在设置活动状态时遇到问题：

```
.myButton {
    cursor:pointer;
}
    .myButton:active{
        -ms-transition-duration: 0.2s;
        -ms-transform: scale(0.95);
    } 
```

在这个例子中，我试图做一个 css 动画（仅限 IE），但这实际上可以是任何东西。问题是活动状态仅在我单击 div 时有效，但在我单击 div 的任何子项时不起作用。

这是一个展示场景的 JS Fiddle：

[http://jsfiddle.net/S9JrH/13/](http://jsfiddle.net/S9JrH/13/)

**更新：**感谢 David Thomas 指出代码中的错字并确认这在 Chrome 中有效。

不幸的是，在 IE10 中，这仅在您单击 div 的下部，远离文本时才有效。

有谁知道如何让它在 IE10 中正常工作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-04T17:24:02.860

### 目前不可能（我认为）

据我所知，目前这是不可能的，因为`:active`child 的状态没有传播到 parent `div`。使用元素进行测试时， Internet Explorer 10 和 Opera 11.64 都无法将`:active`状态传播到父级。`div`

小提琴：http: [//jsfiddle.net/jonathansampson/UrN39/](http://jsfiddle.net/jonathansampson/UrN39/)

### 解决方法

想到的唯一其他解决方案是在 JavaScript 中使用事件传播。幸运的是，mousedown 事件将在 DOM 上向上传播，并传播到 parent 上`div`。以下示例使用 jQuery：

```
$(".myButton").on("mousedown mouseup mouseleave", function(e){
    $(this).toggleClass( "active", e.type === "mousedown" );
}); 
```

请注意，我已将`:active`伪类修改为实际类`.active`。这已经在 IE10 中进行了测试并且可以工作。鉴于这种方法，它应该在几乎所有主要浏览器中都可以正常工作。

小提琴：http: [//jsfiddle.net/jonathansampson/S9JrH/8/](http://jsfiddle.net/jonathansampson/S9JrH/8/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T05:26:25.560

为什么不使用 HTML`<button>`元素。它是为您的案例创建的。Div 没有获得焦点，而按钮获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-06T22:23:10.293

您可以在要忽略鼠标事件的子元素上使用 CSS `pointer-events: none;`，它会适当地冒泡到其父元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-08T21:03:58.887

我使用覆盖元素，`:after`以便子项不可点击。

```
.myButton:after {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: #fff;
    opacity: 0;
    filter: alpha(opacity=0);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T05:20:00.833

```
.myButton:active, .myButton *:active{
  -ms-transition-duration: 0.2s;
  -ms-transform: scale(0.95);
} 
```

老实说，我不知道你是否可以在 IE 中使用 *:pseudo-selector，但你可以使用 chrome，所以值得一试。

# android - Android：SQLite 数据库未创建

> ID：10827537
> 
> 赞同：1
> 
> 时间：2012-05-31T04:40:26.327
> 
> 标签：android, sqlite

我使用以下代码创建表并将数据插入表中。该代码仅在 select 语句位于同一文件中时才显示数据。我注意到 /data/data 中没有数据库。我错过了一些东西还是这个过程实际上是错误的？如果错了，我该怎么办？

```
surgicalmstDB =  this.openOrCreateDatabase("surgicalmstDB ", SQLiteDatabase.CREATE_IF_NECESSARY, null);
        surgicalmstDB.setVersion(1);
        surgicalmstDB.setLocale(Locale.getDefault());
        surgicalmstDB.setLockingEnabled(true);
        surgicalmstDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                " instrument " +
               " (id int,instrumnt TEXT, category TEXT, details TEXT);");

surgicalmstDB.execSQL("INSERT INTO " +
                "instrument" +
                " Values (2,'#3 Long Knife Handle ','Cutting and dissecting','Used to cut deeper tissue.');");

//-----------------------------------------------------------------
 String query="SELECT * from instrument WHERE id=2";
                Cursor cursor=surgicalmstDB.rawQuery(query, null);
                while (cursor.moveToNext()) {
                    String title =cursor.getString(cursor
                            .getColumnIndex("instrumnt"));
                    String author= cursor.getString(cursor
                            .getColumnIndex("category"));
                    String price= cursor.getString(cursor
                            .getColumnIndex("details"));
                       txt.setText(title+"-----"+author+"-------"+price);
                    }
                    cursor.close();
                    surgicalmstDB.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:40:31.647

我建议您参考 SQLiteOpenHelper 而不是硬编码查询。

以下代码将为您提供帮助

**员工模型班**

```
package com.database;

public class Employee {

    int _id;
    String _name;
    String _phone_number;

    public Employee (){

    }
    // constructor
    public Employee (int id, String name, String _phone_number){
        this._id = id;
        this._name = name;
        this._phone_number = _phone_number;
    }

    // constructor
    public Employee (String name, String _phone_number){
        this._name = name;
        this._phone_number = _phone_number;
    }
    // getting ID
    public int getID(){
        return this._id;
    }

    // setting id
    public void setID(int id){
        this._id = id;
    }

    // getting name
    public String getName(){
        return this._name;
    }

    // setting name
    public void setName(String name){
        this._name = name;
    }

    // getting phone number
    public String getPhoneNumber(){
        return this._phone_number;
    }

    // setting phone number
    public void setPhoneNumber(String phone_number){
        this._phone_number = phone_number;
    }
} 
```

**SQLite 助手类**

公共类 DatabaseHelper 扩展 SQLiteOpenHelper {

```
 private static final int DATABASE_VERSION = 1;

  private static final String DATABASE_NAME = "employeeDB";

  private static final String TABLE_EMPLOYEE = "employee";

private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_PH_NO = "phone_number";

public DatabaseHelper (Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_EMPLOYEE + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

    // Create tables again
    onCreate(db);
} 
```

**CRUD 操作**

//**添加新员工**

```
public void addEmployee(Employee employee) {} 
```

//**获取单个员工**

```
public Contact getEmployee(int id) {} 
```

//**获取所有员工**

```
public List<Employee> getAllEmployees() {} 
```

//**获取员工数量**

```
public int getEmployeesCount() {} 
```

//**更新单个员工**

```
public int updateEmployee(Employee employee) {} 
```

//**删除单个员工**

```
public void deleteEmployee(Employee employee) {} 
```

**插入新记录**

```
public void addemployee(Employee employee) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, employee.getName()); 
    values.put(KEY_PH_NO, employee.getPhoneNumber()); 
    db.insert(TABLE_EMPLOYEE, null, values);
    db.close();
} 
```

**阅读行**

```
public Contact getEmployee(int id) {
    SQLiteDatabase db = this.getReadableDatabase();

    Cursor cursor = db.query(TABLE_EMPLOYEE, new String[] { KEY_ID,
            KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
            new String[] { String.valueOf(id) }, null, null, null, null);
    if (cursor != null)
        cursor.moveToFirst();

    Employee employee= new Employee(Integer.parseInt(cursor.getString(0)),
            cursor.getString(1), cursor.getString(2));

    return employee;
} 
```

**让所有员工**

```
public List<Contact> getAllEmployees() {
    List<Employee> employeeList = new ArrayList<Employee>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_EMPLOYEE;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Employee employee= new Employee();
            employee.setID(Integer.parseInt(cursor.getString(0)));
            employee.setName(cursor.getString(1));
            employee.setPhoneNumber(cursor.getString(2));

            employeeList.add(employee);
        } while (cursor.moveToNext());
    }

       return employeeList;
} 
```

**获取所有员工人数**

```
 public int getEmployeesCount() {
        String countQuery = "SELECT  * FROM " + TABLE_EMPLOYEE;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();

        // return count
        return cursor.getCount();
    } 
```

**更新记录**

```
public int updateEmployee(Employee employee) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, employee.getName());
    values.put(KEY_PH_NO, employee.getPhoneNumber());

    // updating row
    return db.update(TABLE_EMPLOYEE, values, KEY_ID + " = ?",
            new String[] { String.valueOf(employee.getID()) });
} 
```

**删除记录**

```
public void deleteEmployee(Employee employee) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(TABLE_EMPLOYEE, KEY_ID + " = ?",
            new String[] { String.valueOf(employee.getID()) });
    db.close();
} 
```

# php - 如何根据下拉菜单中的选项更改页面的样式表

> ID：10827539
> 
> 赞同：1
> 
> 时间：2012-05-31T04:40:29.957
> 
> 标签：php, html, css

我正在创建一个与外部样式表有链接的页面，现在我创建了更多样式表并在页面中添加了一个下拉菜单，现在如何将这些选项与外部样式表链接起来，这样一旦用户从下拉菜单中选择一个选项，该页面的样式表应该完全更改为新的样式表...我该怎么做？

```
<div style="float:right;padding:26px 0 0 0;color:#fff;"><select>
      <option>please select your choice</option>
<option value="one">green</option>
<option value="two">red</option>
</select>

</div> 
```

我有上面的下拉菜单..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:21:11.307

```
 try this :)

1\. give a id to your select box say(giveAId)
2\. then in jquery function pass this id and apply a change function('this will notice the   the change made in your select box').
3\. get it's value from option box 
4\. then pass it to the link href like in this example

 <script type="text/javascript">
    $(function() {
        $("#giveAId").change(function(){ //2 step
           var stylesheet = $(this).val(); // 3 step
           $('link').attr('href',stylesheet+ '.css'); //4 step done here
          });
    });

 </script>

    <div  style="float:right;padding:26px 0 0 0;color:#fff;">
       <select id="giveAId"> // 1 step
          <option>please select your choice</option>
          <option value="one">green</option>
          <option value="two">red</option>
        </select>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T04:54:50.877

您可以给用户一个 cookie，它会记住他们从菜单中选择了哪个样式表，并根据该 cookie 为页面加载 CSS。然后只需让它在点击时刷新页面，如果需要，可以使用 AJAX。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:04:22.660

提交表单并使用会话/cookies 来记住选择

例如

```
$_SESSION['selected_stylesheet'] = $_POST['stylesheet']; 
```

然后当你调用外部 css 文件时你应该​​使用 $_SESSION['selected_stylesheet']

```
<link type="text/css" href="<? echo $_SESSION['selected_stylesheet'] ?>.css" rel="stylesheet" /> 
```

我认为这会奏效

# ruby-on-rails - rails，如何给模型中的关系起别名？

> ID：10827540
> 
> 赞同：11
> 
> 时间：2012-05-31T04:41:16.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我需要覆盖关系的名称，这是我的模型：

```
class User < ActiveRecord::Base

  has_many :class_rooms_member_ships

  has_many :class_rooms
  has_many :class_rooms, :through=> :class_rooms_member_ships

end 
```

现在，当我想获得时，我需要使用另一个名称`class_rooms :through=> :class_rooms_member_ships`

我怎样才能做到这一点：

```
user.class_rooms
user.class_rooms_through 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T10:19:42.063

```
has_many :classrooms_though_memberships, :through=> :class_rooms_member_ships, 
                                     :class_name => 'ClassRoom', 
                                     :foreign_key => 'class_room_id',
                                     :source => :class_room 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:11:11.510

像这样的东西应该工作：

```
has_many :classrooms_though_memberships, :through=> :class_rooms_member_ships, 
                                         :class_name => 'ClassRoom', 
                                         :foreign_key => 'class_room_id' 
```

# c++ - “fs::path::string”的未解析重载函数类型

> ID：10827542
> 
> 赞同：3
> 
> 时间：2012-05-31T04:41:28.817
> 
> 标签：c++, boost

提升 1.49 gcc 版本 4.6.3

```
 std::transform(barcodeFiles.begin(), barcodeFiles.end(), std::ostream_iterator<std::string>(std::cerr, "\n"),
            boost::bind(&fs::path::string, _1)); 
```

如何编辑此代码？

```
[ 65%] 构建 CXX 对象 c++/lib/demultiplex/CMakeFiles/casava_demultiplex.dir/BclDemultiplexer.cpp.o
/bak/software/Linux/CASAVA_v1.8.2/src/c++/lib/demultiplex/BclDemultiplexer.cpp: 在成员函数'const casava::demultiplex::BclDemultiplexer::ClusterCorrectedBarcodeIndex casava::demultiplex::BclDemultiplexer::mapClusterBarcodes(unsigned int) 常量':
/bak/software/Linux/CASAVA_v1.8.2/src/c++/lib/demultiplex/BclDemultiplexer.cpp:65:50：错误：没有匹配函数调用'bind(, boost::arg&)'
/bak/software/Linux/CASAVA_v1.8.2/src/c++/lib/demultiplex/BclDemultiplexer.cpp:65:50

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T05:45:38.663

答案可以在[boost bind的FAQ中找到](http://www.boost.org/doc/libs/1_49_0/libs/bind/bind.html#err_overloaded)

```
std::transform(
    paths.begin(), paths.end(),
    std::ostream_iterator<std::string>(
        std::cerr, "\n"
    ),
    boost::bind(
        static_cast<
            std::string const & (boost::filesystem::path::*)() const
        >(&boost::filesystem::path::string), 
        _1
    )
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T09:39:59.327

如果您可以使用 C++11（GCC 4.6 使用标志 -std=c++0x 支持它），那么您可以使用 lambda 函数，它会变得更具可读性：

```
std::transform(barcodeFiles.begin(), barcodeFiles.end(),
               std::ostream_iterator<std::string>(std::cerr, "\n"),
               [](const fs::path& p) {
                   return p.string();
               }
); 
```

# php - 首先是 PHP 或 HTML 还是有关系？

> ID：10827545
> 
> 赞同：5
> 
> 时间：2012-05-31T04:42:10.950
> 
> 标签：php, html, syntax, tags

**我有一个可能很愚蠢的问题，但无论如何我都会问。**

首先是 PHP 还是 HTML 代码是否重要？

例如：PHP 是在 HTML 之前，在 HTML 之后，还是根本不重要？

```
<?php

echo "This is text";

?>

<html>
<head>
</head>
<body>
<center>
<font size="2">This is text</font>
</center>
</body>
</html> 
```

* * *

**或者：**

```
<html>
<head>
</head>
<body>
<center>
<font size="2">This is text</font>
</center>
</body>
</html>

<?php

echo "This is text";

?> 
```

* * *

**或者：**

```
<html>
<head>
</head>
<body>

<?php

echo "This is text";

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T04:45:28.063

第三种是正确的方式（假设您希望文本在正文中回显）。

如上所示，PHP 可以跳入和跳出 HTML。

```
<html>
<head>
</head>
<body>
<center>
<font size="2"><?php echo "This is text"; ?></font>
</center>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T04:44:59.430

就我个人而言，通过将 html 页面用作 MVC 模式中的纯视图，我将 PHP 尽可能地放在页面顶部，甚至更好地完全放在 html 页面之外。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T06:56:22.567

HTML 不会去任何地方，但 PHP 脚本会去服务器执行并将响应返回到客户端。现在该响应与 HTML 代码一起显示/处理。HTML 仅适用于使用 PHP 脚本调用服务或对数据库执行操作的浏览器。因此，首先是 PHP（服务器），然后是 HTML（客户端）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T04:49:07.727

在 html 代码之前添加您的 php 代码。

这允许您更改输出类型、设置所需的变量、根据需要添加 http 响应标头等。

您可以在 html 之间有很多 php 嵌入标签。

如果您在 . 确保您的输出是有效的 html。

不要对浏览器不好，因为他们会尝试使用你给他们的任何东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-31T04:45:29.940

只有你必须保持有效的 html 结构。`html`所以你不能在标签之外放任何东西。所以第三个选项是最有效的。但如果你使用任何其他人，它会打印你想要的任何东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-31T04:55:31.237

不是一个 php 人，一般意义上会尝试回答这个问题。HTML 用于浏览器，而 php 用于服务器端。当您的页面到达浏览器时，只有 HTML，而如果我没有错，因为 php 的行为应该与 jsp 类似，在服务器端 html 被视为需要在流中打印出来的简单字符串。所以理想情况下，这不应该先出现什么。

从良好实践的角度来看，由于这是输出为 html 的 php 代码（在我的情况下为 jsp），因此我尝试为我的代码文件提供更多 java 的感觉。

# c# - Parallel.Invoke - 动态创建更多“线程”

> ID：10827546
> 
> 赞同：5
> 
> 时间：2012-05-31T04:42:28.207
> 
> 标签：c#, task-parallel-library

我正在对自己进行有关 Parallel.Invoke 和一般并行处理的教育，以便在当前项目中使用。我需要朝着正确的方向努力，以了解如何根据需要动态\智能地分配更多并行“线程”。

举个例子。假设您正在解析大型日志文件。这涉及从文件中读取，对返回的行进行某种解析，最后写入数据库。

所以对我来说，这是一个可以从并行处理中受益的典型问题。

作为简单的第一遍，以下代码实现了这一点。

```
Parallel.Invoke(
  ()=> readFileLinesToBuffer(),
  ()=> parseFileLinesFromBuffer(),
  ()=> updateResultsToDatabase()    
); 
```

在幕后

1.  readFileLinesToBuffer() 读取每一行并存储到缓冲区。
2.  parseFileLinesFromBuffer 出现并使用缓冲区中的行，然后假设它将它们放在另一个缓冲区上，以便 updateResultsToDatabase() 可以出现并使用此缓冲区。

因此，显示的代码假定三个步骤中的每一个都使用相同的时间\资源，但是可以说 parseFileLinesFromBuffer() 是一个长时间运行的过程，因此您希望并行运行两个方法，而不是只运行其中一个方法。

您如何让代码根据它可能感知到的任何瓶颈智能地决定执行此操作？

从概念上讲，我可以看到一些监视缓冲区大小的方法可能如何工作，例如产生一个新的“线程”以增加速率消耗缓冲区......但我认为在组合 TPL 库时已经考虑了这种类型的问题.

一些示例代码会很棒，但我真的只需要一个线索来了解我接下来应该研究哪些概念。看起来可能 System.Threading.Tasks.TaskScheduler 掌握着关键？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T04:45:57.367

您是否尝试过响应式扩展？

[http://msdn.microsoft.com/en-us/data/gg577609.aspx](http://msdn.microsoft.com/en-us/data/gg577609.aspx)

Rx 是 Microsoft 的一项新技术，其重点如官方网站所述：

> Reactive Extensions (Rx)... ...是一个使用可观察集合和 LINQ 样式查询运算符组成异步和基于事件的程序的库。

您可以将其作为 Nuget 包下载

[https://nuget.org/packages/Rx-Main/1.0.11226](https://nuget.org/packages/Rx-Main/1.0.11226)

由于我目前正在学习 Rx，所以我想举这个例子，只是为它编写代码，我最终得到的代码实际上并不是并行执行的，而是完全异步的，并且保证了源代码行是按顺序执行的。

也许这不是最好的实现，但就像我说的我正在学习 Rx，（线程安全应该是一个很好的改进）

这是我用来从后台线程返回数据的 DTO

```
class MyItem
{
    public string Line { get; set; }
    public int CurrentThread { get; set; }
} 
```

这些是做实际工作的基本方法，我用一个简单的方法来模拟时间，`Thread.Sleep`我正在返回用于执行每个方法的线程`Thread.CurrentThread.ManagedThreadId`。注意它的定时器`ProcessLine`是4秒，这是最耗时的操作

```
private IEnumerable<MyItem> ReadLinesFromFile(string fileName)
{
    var source = from e in Enumerable.Range(1, 10)
                 let v = e.ToString()
                 select v;

    foreach (var item in source)
    {
        Thread.Sleep(1000);
        yield return new MyItem { CurrentThread = Thread.CurrentThread.ManagedThreadId, Line = item };
    }
}

private MyItem UpdateResultToDatabase(string processedLine)
{
    Thread.Sleep(700);
    return new MyItem { Line = "s" + processedLine, CurrentThread = Thread.CurrentThread.ManagedThreadId };
}

private MyItem ProcessLine(string line)
{
    Thread.Sleep(4000);
    return new MyItem { Line = "p" + line, CurrentThread = Thread.CurrentThread.ManagedThreadId };
} 
```

以下方法我使用它只是为了更新 UI

```
private void DisplayResults(MyItem myItem, Color color, string message)
{
    this.listView1.Items.Add(
        new ListViewItem(
            new[]
            {
                message, 
                myItem.Line ,
                myItem.CurrentThread.ToString(), 
                Thread.CurrentThread.ManagedThreadId.ToString()
            }
        )
        {
            ForeColor = color
        }
    );
} 
```

**最后这是调用 Rx API 的方法**

```
private void PlayWithRx()
{
    // we init the observavble with the lines read from the file
    var source = this.ReadLinesFromFile("some file").ToObservable(Scheduler.TaskPool);

    source.ObserveOn(this).Subscribe(x =>
    {
        // for each line read, we update the UI
        this.DisplayResults(x, Color.Red, "Read");

        // for each line read, we subscribe the line to the ProcessLine method
        var process = Observable.Start(() => this.ProcessLine(x.Line), Scheduler.TaskPool)
            .ObserveOn(this).Subscribe(c =>
            {
                // for each line processed, we update the UI
                this.DisplayResults(c, Color.Blue, "Processed");

                // for each line processed we subscribe to the final process the UpdateResultToDatabase method
                // finally, we update the UI when the line processed has been saved to the database
                var persist = Observable.Start(() => this.UpdateResultToDatabase(c.Line), Scheduler.TaskPool)
                    .ObserveOn(this).Subscribe(z => this.DisplayResults(z, Color.Black, "Saved"));
            });
    });
} 
```

此过程完全在后台运行，这是生成的输出：

![在此处输入图像描述](../Images/ee32596281e5ad206feeae316e1f923b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:19:24.853

在 async/await 世​​界中，你会有类似的东西：

```
public async Task ProcessFileAsync(string filename)
{
    var lines = await ReadLinesFromFileAsync(filename);
    var parsed = await ParseLinesAsync(lines);
    await UpdateDatabaseAsync(parsed);
} 
```

然后调用者可以做 var tasks = filenames.Select(ProcessFileAsync).ToArray(); 和任何东西（WaitAll、WhenAll 等，取决于上下文）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:33:25.580

使用几个`BlockingCollection`. [这是一个例子](http://msdn.microsoft.com/en-us/library/dd460715.aspx)

这个想法是您创建一个`producer`将数据放入集合中的

```
while (true) {
    var data = ReadData();
    blockingCollection1.Add(data);
} 
```

然后创建任意数量的从集合中读取的消费者

```
while (true) {
    var data = blockingCollection1.Take();
    var processedData = ProcessData(data);
    blockingCollection2.Add(processedData);
} 
```

等等

您还可以使用 Parallel.Foreach 让 TPL 处理消费者的数量

```
Parallel.ForEach(blockingCollection1.GetConsumingPartitioner(),
                 data => {
                          var processedData = ProcessData(data);
                          blockingCollection2.Add(processedData);
                 }); 
```

（请注意，您需要使用`GetConsumingPartitioner`not `GetConsumingEnumerable`（[请参见此处](https://stackoverflow.com/questions/10208330/why-does-iterating-over-getconsumingenumerable-not-fully-empty-the-underlying/10209254#10209254)）

# django - 在 Heroku 上运行 Django 1.3

> ID：10827549
> 
> 赞同：1
> 
> 时间：2012-05-31T04:42:39.517
> 
> 标签：django, heroku, python-2.7

我试图弄清楚是否有可能让 django 1.3 在heroku 上运行。我已经离开了他们的[教程](https://devcenter.heroku.com/articles/django)，假设用户使用的是最新版本（1.4）的 django。如果我按照教程进行操作，除了显式使用 Django==1.3 而不是最新的 django 版本，我在运行时会收到错误`django-admin.py startproject hellodjango .`（注意点）

错误：文件“/home/my_dir/.virtualenvs/hellodjango/local/lib/python2.7/site-packages/django/utils/importlib.py”，第 28 行，在 import_module raise TypeError（“相对导入需要'包“参数”）类型错误：相对导入需要“包”参数

它仍然会创建项目并出现欢迎页面`http://127.0.0.1:8000/`。如果我继续学习本教程并将其推送到heroku，我会得到

ImportError at / No module named hellodjango.urls

似乎教程和 django 1.3 之间的文件结构之间存在一些不匹配。

有关如何安装 Django 1.3 的说明将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T04:13:14.067

这个 '。' 即使使用 Django 1.4，该选项对我也不起作用，我遇到与您相同的错误。所以我忽略了这个点：

```
django-admin.py startproject hellodjango 
```

然后我将所有文件从 hellodjango 文件夹移动到它的父文件夹（这就是 Heroku 需要的）并删除了 hellodjango 文件夹。

遵循所有步骤，这样我就可以让应用程序在 heroku 上运行，但我又遇到了和你一样的错误，“没有名为 hellodjango.urls 的模块”。我解决了这个问题，从 settings.py 中删除了这个 hellodjango 部分，因为我将文件更改为新路径，因此 settings.py 现在反映了该更改，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T18:17:26.260

这 '。' 在 ./manage.py startproject myproject 的末尾。表示“在当前目录”启动一个项目（此功能在 djago 1.4 中添加）。在 django 1.4 中，不是从 myproject import myapp 导入，而是直接导入 yourapp。您的应用程序不再与您的项目绑定。

我在网上找到了这篇文章，可以帮助您解决问题： [http ://bitkickers.blogspot.com/2012/04/djangoheroku-quickstart-for-existing.html](http://bitkickers.blogspot.com/2012/04/djangoheroku-quickstart-for-existing.html)

# linux - 如何将字符串输入重定向到 sudo？

> ID：10827555
> 
> 赞同：1
> 
> 时间：2012-05-31T04:44:02.613
> 
> 标签：linux, bash, shell

我正在编写一个需要 root 访问权限的 bash 脚本，所以我需要做的是编写类似

```
$my_psswd >> sudo some_command parameter1 parameter2 
```

使过程自动化。我不担心这是否会打开安全漏洞。这或多或少是我能想到的一个例子。但问题是，当我启动 sudo 任何东西时，它会要求用户输入，我不确定如何自动化或作为变量提供。

我试过像

```
$my_psswd >1 sudo something
echo $my_psswd | sudo something 
```

但这都不是我想要的。这也必须是一个bash脚本，我不能使用像expect这样的程序。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T04:50:55.647

sudo 命令需要 -S 开关：

`-S The -S (stdin) option causes sudo to read the password from the standard input instead of the terminal device. The password must be followed by a newline character`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T06:55:39.977

我建议完全不要这样做。您将以纯文本形式存储您的密码，这意味着其他人可以访问它。或者它将在进程列表中可见，再次可供其他用户使用。

有几种方法可以防止这种情况：

1.  使用 sudo 运行整个脚本。不要在脚本本身中使用 sudo，而是以提升的权限运行所有内容。不利的一面是，您可能正在执行不需要它但没有更多背景的提升权限的事情，这是不可能的。
2.  最好将您的帐户配置为通过 sudo 执行这些特定命令，而无需提供密码。这样，您就可以只执行需要它的命令并提升权限，而不会出现提供密码的问题。
3.  一种解决方法可能是`sudo -l`在调用脚本之前运行。这样 sudo 将有一个活动会话并且不会提示输入密码。这只是一种解决方法，如果其中一个命令的执行时间比为 sudo 配置的宽限时间长，它就会失败。但在小脚本中，这可能是一个简单的修复。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T04:50:08.783

尝试回声 $PW | 须藤 -S cmd

它可能对你有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T05:48:20.990

您不应该以这种方式使用 sudo ，使用 visudo 指定允许哪些用户使用哪些命令，那么您不必担心密码。

# c - 如何从我的 c 程序运行 bcdedit？

> ID：10827556
> 
> 赞同：1
> 
> 时间：2012-05-31T04:44:13.913
> 
> 标签：c

我不明白为什么从 ac 程序运行以下代码会返回“'bcdedit' 不是内部或外部命令”。bcdedit 在 cmd 行上运行良好。我怎样才能让它工作？

```
#include <stdio.h>

int main ()
{
    system("bcdedit");
    system("TIMEOUT /T 3");
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T12:58:25.960

发生这种情况是因为当您`Command Prompt`通过“开始菜单”甚至“执行”窗口运行时，您正在运行位于 的 64 位`cmd`版本，`C:\Windows\System32\cmd.exe`但是当`cmd`从您的 c 程序调用时，它会调用位于 的 32 位`cmd`版本`C:\Windows\SySWOW64\cmd.exe`。**这是因为您的 C 编译器生成了一个 32 位应用程序。**

根据 MSDN：

> %windir%\System32 目录是为 64 位应用程序保留的。大多数 DLL 文件名在创建 64 位版本的 DLL 时没有更改，因此 32 位版本的 DLL 存储在不同的目录中。WOW64 通过使用文件系统重定向器隐藏了这种差异。
> 
> **在大多数情况下，每当 32 位应用程序尝试访问 %windir%\System32 时，访问都会重定向到 %windir%\SysWOW64。**

来源：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)

如果你比较两个`cmd`s，你会发现它们是相同的，不同的是dll。

问题是 Windows x64`bcdedit.exe`在`System32`文件夹中提供 64 位，但在任何地方都没有提供 32 位`bcdedit.exe`。**所以 32-bit`cmd`不能运行 64-bit `bcdedit`，所以返回这个命令无效。**

**解决方案：**您既可以`bcdedit`从 Windows x86 版本获取 32 位，也可以编译 64 位应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:52:57.990

很可能是因为它找不到可执行文件。确保您的路径正确^((a))或使用完整路径名：

```
system ("c:\\windows\\system32\\bcdedit.exe"); 
```

而且，当然，这不言而喻：确保您以管理用户身份运行它。

* * *

^((a))您应该能够通过以下方式确认这一点：

```
system ("path"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:42:32.280

我认为您已将一个命令分为两部分。并且我认为您想运行“bcdedit.exe /timeout 3”，但是您将系统命令的参数分为两部分，一个是“bcedit.exe”，另一个是“ /超时 3"。我认为你应该写这个

```
system("bcdedit.exe /timeout 3"); 
```

运行你想要的命令。希望这会对你有所帮助

# xslt - 访问xslt中节点的命名空间

> ID：10827557
> 
> 赞同：1
> 
> 时间：2012-05-31T04:44:33.303
> 
> 标签：xslt, xpath, xslt-1.0

资源：

```
 <Data>
    <heading xmlns="Some Uri">
                <text>aaa</text>

    </heading>
    <Data> 
```

XSLT 写道

```
 <?xml version="1.0" encoding="utf-8"?>
            <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:link1="Some Uri">
                <xsl:output method="xml" indent="yes"/>

                  <xsl:template match="Data">
                    <xsl:value-of select="link1:heading/namespace-uri()"/>

                  </xsl:template>

            </xsl:stylesheet> 
```

我收到错误。

任何人都可以帮助如何获取命名空间。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:22:20.343

nonnb 应该让评论成为答案......

namespace-uri() 函数可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:59:07.353

> ```
> <xsl:value-of select="link1:heading/namespace-uri()"/> 
> ```

**在 XSLT 1.0/XPath 1.0 中，这是一个语法错误**。

**将此更正为**：

```
<xsl:value-of select="namespace-uri(link1:heading)"/> 
```

**在 XSLT 2.0 / XPath 2.0 中，这又是一个错误（`namespace-uri()`不能省略的参数。更正为：**

```
<xsl:value-of select="link1:heading/namespace-uri(.)"/> 
```

# javascript - 获取 div 的文本

> ID：10827559
> 
> 赞同：0
> 
> 时间：2012-05-31T04:45:16.273
> 
> 标签：javascript

我一直在尝试仅使用 javascript 从 div 中获取文本。

我使用以下代码从 jQuery 开始：

```
var divText = $("div.Xr3").html(); 
```

然后对于我的 JavaScript，我尝试了：

```
var divText = document.getElementsByClassName("Xr3").innerHtml; 
```

返回未定义。如何仅使用 JavaScript 完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:48:20.330

`getElementsByClassName`返回一个 HTML 元素的实时数组，所以你不能`innerHTML`像这样直接访问。您将不得不循环其结果，或者如果您知道只有一个，`[0]`请在访问`innerHTML`.

```
var divTexts = [];
var divs = document.getElementsByClassName("Xr3");
var numDivs = divs.length;
while (var i = 0; i < numDivs; i++) {
  divTexts.push(divs[i].innerHtml);
} 
```

或者，在单元素场景中，

```
var divText = document.getElementsByClassName("Xr3")[0].innerHtml; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:48:49.943

如果`Xr3`使用一次，您可以使用

`var divText = document.getElementsByClassName("Xr3")[0].innerHtml;`

# android - EofSensorInputStream 最佳用例场景

> ID：10827562
> 
> 赞同：0
> 
> 时间：2012-05-31T04:45:56.243
> 
> 标签：android, sockets, connection, inputstream

`EofSensorInputStream`在 Android中使用的最佳场景和实践是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T04:45:56.693

`EofSensorInputStream``close()`是在和上触发操作的流包装器`EOF`。主要用于在响应主体被消耗或不再需要时自动释放底层连接。

如果您确定服务器迭代次数并希望在连接关闭时执行一些操作，例如退出应用程序或通知某些内容，那么这是最好的做法。

对

# generics - 如何将对象转换为通用字典？

> ID：10827565
> 
> 赞同：0
> 
> 时间：2012-05-31T04:46:02.113
> 
> 标签：generics, dictionary

通用字典如下：

```
public class ConcurrentDictionary<TKey, TValue> : IDictionary<TKey, TValue> 
```

具体的字典可以如下：

```
var container = new ConcurrentDictionary<string, Unit>();
var container = new ConcurrentDictionary<string, CustomUnitClass>(); 
```

这些特殊字典（具有不同的参数）已添加到应用程序状态：

```
HttpContext.Current.Application[key] = container; 
```

当我从应用程序状态获取项目时（这里的一些人帮助了我；谢谢他们），我可以通过这种方式检查类型是否为 ConcurrentDictionary：

```
object d = HttpContext.Current.Application[i];
if (d.GetType().GetGenericTypeDefinition() == typeof(ConcurrentDictionary<,>)) 
```

最后一点是 - 如何将对象 d 转换为通用 ConcurrentDictionary：

```
ConcurrentDictionary<?, ?> unit = d as ConcurrentDictionary<?, ?>; 
```

我不想使用特定的演员如下：

```
ConcurrentDictionary<string, Unit> unit = d as ConcurrentDictionary<string, Unit>; 
```

因为第二个参数可以是另一种类型。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:44:26.533

我*认为*您可能以稍微错误的方式看待泛型，但没关系，让我们谈谈！

您`IDictionary<TKey, TValue>`是完美的，并且您正确使用了它，但是我认为在回退时，除非您明确知道您期望的类型是什么，否则强制转换它没有*真正*意义。

或者，出于强类型可爱的目的，我会推荐什么；您提到可能是第二种类型，也就是`TValue`会有所不同……这是使用界面的最佳时机！让我演示一下。

## 我们的界面

```
public interface IModeOfTransport
{
    string Name { get; set; }
    string Colour { get; set; }
    bool CanFloat { get; set; }
    bool CanFly { get; set; }
    int NumberOfPassengers { get; set; }
} 
```

## 我们的对象

```
public class Car : IModeOfTransport
{
    // ...
}
public class Plane : IModeOfTransport
{
    // ...
}
public class Boat : IModeOfTransport
{
    // ...
} 
```

## 我们的实施

```
var modesOfTransport = new Dictionary<string, IModeOfTransport>();
modesOfTransport.Add("First", new Car());
modesOfTransport.Add("First", new Plane());
modesOfTransport.Add("First", new Boat()); 
```

## 我们休息下吧

从上面可以看出，我们有一个键类型为`string`，值类型为的字典`IModeOfTransport`。这允许我们对接口的所有属性和方法进行显式的强类型访问`IModeOfTransport`。如果您需要访问字典中泛型值的特定信息，并且您不知道实际的对象类型转换是什么，则建议您这样做。通过使用接口，我们可以找到相似之处。

## 快完成了

```
object dictionary = HttpContext.Current.Application[i];
if (dictionary.GetType().GetGenericTypeDefinition() == typeof(Dictionary<,>))
{
    var modesOfTransport = dictionary as Dictionary<string, IModeOfTransport>;
    foreach (var keyValuePair in modesOfTransport)
    {
        // ...
    }
} 
```

# javascript - 将事件添加到 ajax 附加内容

> ID：10827566
> 
> 赞同：4
> 
> 时间：2012-05-31T04:46:16.237
> 
> 标签：javascript, jquery, ajax

假设我有一些要添加 javascript 操作的链接：

```
<a class='test'>
<a class='test'>
<a class='test'> 
```

当我的页面加载时，我给他们一个点击事件：

```
$('.test').click(function(){
  alert("I've been clicked!")
}); 
```

但让我们说之后我添加了另一个元素，我想给它同样的事件。我不能这样做：

```
$('.test').click(function(){
  alert("I've been clicked!")
}); 
```

因为那么前 3 个将有 2 个事件。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T04:48:26.370

您可以像这样将 $.on 绑定到将始终存在于 dom 中的父元素。

```
$(document).on('click','.test', function() {
            console.log('Test clicked');
        }); 
```

**请注意：** 您可以替换`document`为将始终存在于 dom 中的元素的任何父元素，并且父元素越接近越好。

简单的事件绑定`click`不会`click`将事件处理程序绑定到绑定时已存在于 dom 中的元素。因此它不适用于以后通过 Ajax 或 jQuery 动态添加到 dom 的元素。为此，您必须使用`event delegation`. 您可以将`$.on`其用于此目的。

检查[$.on的文档](http://api.jquery.com/on)

您可以使用`$.live`，但 $live 已贬值。改用 $.on 。$.on 的等效语法用于 $.live 和 $.delegate 做同样的事情

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

在这种情况下，事件处理程序将绑定到`document`. `test`在这个案例类中，事件将由 jQuery 委托给目标元素。

**更新**

我建议您将`$.on`所有其他方法用于所有事件处理目的，因为所有其他方法都通过`$.on`和`$.off`引擎盖下的方法。

从 jQuery 源代码 v.1.7.2 检查这些函数的定义

```
bind: function( types, data, fn ) {
    return this.on( types, null, data, fn );
},
unbind: function( types, fn ) {
    return this.off( types, null, fn );
},

live: function( types, data, fn ) {
    jQuery( this.context ).on( types, this.selector, data, fn );
    return this;
},
die: function( types, fn ) {
    jQuery( this.context ).off( types, this.selector || "**", fn );
    return this;
},

delegate: function( selector, types, data, fn ) {
    return this.on( types, selector, data, fn );
},
undelegate: function( selector, types, fn ) {
    // ( namespace ) or ( selector, types [, fn] )
    return arguments.length == 1? this.off( selector, "**" ) : this.off( types, selector, fn );
} 
```

对于这些方便的事件处理程序也是如此

```
blur focus focusin focusout load resize scroll unload click dblclick mousedown 
mouseup mousemove mouseover mouseout mouseenter mouseleave change select 
submit keydown keypress keyup error contextmenu 
```

您可以看到所有正在使用的方法`$.on`以及`$.off`它们本身。因此，使用`$.on`您至少可以保存一个函数调用，尽管在大多数情况下这并不重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T04:48:19.790

由于您`.test`是通过 ajax 附加的，因此您需要委托事件，普通绑定不会影响它们。**委托绑定将应用于 DOM 中存在的所有元素，并将添加到 DOM。**

```
$('body').on('click', '.test', function() {
   // your code
}); 
```

代替`body`你可以使用所有`.test`已经属于 DOM 的容器。

了解更多**[`.on()`](http://api.jquery.com/on)**

你也可以**[`.delegate()`](http://api.jquery.com/delegate)**像下面这样使用：

```
$('#container').delegate('.test', 'click', function() {
   // your code
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T04:51:39.020

如果元素是动态添加到页面的，请查看 jQuery [on event](http://api.jquery.com/on/)。并考虑以下示例：

[http://jsfiddle.net/n1ck/QQYq2/2/](http://jsfiddle.net/n1ck/QQYq2/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T04:48:47.947

使用`on()`，并将其附加到它们的包含元素。

```
$(".container").on("click", ".test", function(){
    alert("You clicked me!");   
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T04:49:00.347

因为当您向 DOM 注入新内容（通过 ajax 或 javascript）时，现有绑定将不起作用。您必须重新绑定事件或使用`jQuery on`对当前元素和未来元素有效的事件

[http://api.jquery.com/on/](http://api.jquery.com/on/)

所以要解决这个问题，改变

```
$('.test').click(function(){
  alert("I've been clicked!")
}); 
```

到

```
$(document).on('click','.test',function(){
  alert("I've been clicked!")
}); 
```

# php - 每小时重置和多次投票的 PHP 投票脚本

> ID：10827572
> 
> 赞同：1
> 
> 时间：2012-05-31T04:47:20.843
> 
> 标签：php, voting-system

我正在寻找一个脚本（或者我可以轻松修改以执行此操作的脚本），它允许访问者每小时或每天投票 10 次。在他们达到该限制后，它可以将其与 IP 或 cookie 进行比较，并说他们投票过多。

我不需要它是防弹的，因为人们通过删除 cookie 或屏蔽他们的 IP 来滥用它。我只是希望他们能够在预定的时间内投票 10 次，然后才能再次投票。

我已经为这样的脚本寻找了两个星期，但无济于事。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:03:41.677

有一些令人印象深刻的 php 代码可用于此目的。你可以根据你的要求选择。

前 1 [http://www.dbscripts.net/poll/](http://www.dbscripts.net/poll/)

前 2 [http://www.webresourcesdepot.com/free-php-ajax-poll-script-zoki-poll/](http://www.webresourcesdepot.com/free-php-ajax-poll-script-zoki-poll/)

前 3 [http://www.hotscripts.com/listing/php-poll-with-images/](http://www.hotscripts.com/listing/php-poll-with-images/)

# kernel - 如何从用户空间应用程序插入内核模块？

> ID：10827579
> 
> 赞同：1
> 
> 时间：2012-05-31T04:48:14.067
> 
> 标签：kernel, kernel-module

我正在寻找一件事：

如何从用户空间程序中插入内核模块？谁能给我提供与这种情况相关的任何示例？

谢谢

**拉赫尔**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:03:17.097

经过一番搜索，我发现有一个系统调用名为

```
#include <linux/module.h>
int init_module(const char *name, struct module *image); 
```

如果您想了解更多详细信息，可以查看此手册页。
[http://www.kernel.org/doc/man-pages/online/pages/man2/init_module.2.html](http://www.kernel.org/doc/man-pages/online/pages/man2/init_module.2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:37:05.787

谢谢 Adel C Kod，我刚刚解决了这个问题，在这里我发布一个简单的示例代码：

```
char cmnd[10];

if (strcmp(cmnd, "insert")==0) {
  system ("/sbin/insmod /home/xyzUBUNtu/Desktop/MyMod/kernel1.ko");
  printf("Your Module inserted");
  return 1;
} 
```

谢谢

拉赫尔..

# hadoop - Hadoop 中的地图侧连接失去了优势数据局部性？

> ID：10827580
> 
> 赞同：1
> 
> 时间：2012-05-31T04:48:15.300
> 
> 标签：hadoop

我的问题与 Hadoop 中的 Map 端加入有关。前几天我在看 ProHadoop 我没看懂下面这句话

“map-side join 提供了一个对多个排序数据集执行操作的框架。**虽然 join 中的各个 map 任务失去了数据局部性的大部分优势**，但由于消除了 reduce 阶段和/或减少所需的数据量大大减少。”

如果将排序的数据集存储在 HDFS 上，它怎么会失去数据局部性的优势？Hadoop 中的作业跟踪器不会在数据集块本地化的同一位置上运行任务跟踪器吗？

请纠正我的理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:09:16.540

陈述是正确的。您不会丢失所有数据局部性，而是丢失其中的一部分。
让我们看看它是如何工作的：我们通常区分连接的较小和较大部分。连接的较小分区分布到存储相应较大分区的位置。
结果，我们丢失了其中一个连接数据集的数据局部性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:14:38.967

我不知道 David 是什么意思，但对我来说，这是因为你只有 map 阶段，然后你只是去那里通过将不同的表放在一起完成你的工作，而对 HDFS 没有任何收获？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-16T23:51:28.960

这是 Map-side join 中遵循的过程：

1.  假设我们有两个数据集 R 和 S，假设它们都适合主内存。R 大，S 小。

2.  较小的数据集被迭代地加载到主内存中，以匹配与 R 的对。

在这种情况下，我们实现了 R 而不是 S 的数据局部性。

# php - 如何使用 PHP 阻止多个 Web 请求

> ID：10827581
> 
> 赞同：0
> 
> 时间：2012-05-31T04:48:17.333
> 
> 标签：php, mysql

我需要帮助来锁定多个 Web 请求

我正在开发一个计费系统，我提供了保存常用配置的选项。所以一次只有一个用户可以保存他自己的配置。

所以现在我的问题是，如果多个用户点击提交配置按钮，只有一个用户可以提交配置，其他用户必须等到完成第一个

我怎样才能在 PHP 中做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:01:30.623

如果每个用户都可以有自己的一套通用配置，为什么要限制其他用户呢？

现在，我知道在某些情况下您只需要授予一次使用权限（修改共享配置）。

任何形式的网络锁定都必须​​非常谨慎。我建议您在数据库中的表中保留用户 A 目前正在修改配置的条目（获取锁）。

当用户 B 尝试打开配置进行编辑时，请检查 A 何时尝试锁定它。如果锁定在超时期限（例如 10 分钟）之前授予 A 锁定。这将确保您最终不会永久锁定资源。如果用户 A 仍然持有有效的锁，则相应地通知用户 B。

Javascripts 可以警告用户 A 他的锁即将到期，并在需要时更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:03:31.017

您应该为此类事情使用数据库。每个用户都应该在数据库中拥有自己的记录，以便每条记录都是唯一的。当用户提交表单时，他们的记录 ID 将与之关联，这样您就不会发生冲突。

# ios5 - 设备上无法识别 InAppSettingKit 自定义包

> ID：10827585
> 
> 赞同：0
> 
> 时间：2012-05-31T04:48:25.883
> 
> 标签：ios5, settings.bundle, inappsettingskit

我设置了 InAppSettingsKit 并希望仅在应用程序中提供某些易失性设置。这些与跳板的 settings.app 中的内容不同。我添加了一个包 InAppSettings.Bundle 并创建了适当的 plist 文件。它在模拟器中按预期工作，但就像我的新包在设备上不存在一样。该设备仅显示与 settings.bundle/root.plist 中的 settings.app 属性相同的内容。

如何在不删除并重新安装应用程序的情况下将新捆绑包放入用户的设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:00:15.407

在这种情况下，这是一个开发人员错误的“案例”。显然，文件名中字符的大小写在模拟器中并不特定。我的包中的文件没有正确命名。当它应该是 Root.inApp.plist 时，我有 root.inApp.plist。在模拟器中工作，而不是在设备上。一旦我意识到这一点并重命名了文件，设备就会按预期读取并显示正确的文件。那是浪费大约 5 个小时来追逐我的故事。我希望这些信息可以帮助人们避免同样令人讨厌的疏忽。

# uiimageview - 我的程序因 SIGABRT 而崩溃？

> ID：10827588
> 
> 赞同：0
> 
> 时间：2012-05-31T04:48:44.483
> 
> 标签：uiimageview, sigabrt

```
 2012-05-31 00:17:51.384 SAMPLEGAME[2901:10703] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<SAMPLEGAMEViewController 0x752c140> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key girlHeadView.'
*** First throw call stack:
(0x1460022 0x1a7dcd6 0x145fee1 0xe47022 0xdb8f6b 0xdb8edb 0xdd3d50 0x6bb71a 0x1461dea 0x13cb7f1 0x6ba26e 0x5601fc 0x560779 0x56099b 0x4bf401 0x4bf670 0x4bf836 0x4c672a 0x497596 0x498274 0x4a7183 0x4a7c38 0x49b634 0x3aa1ef5 0x1434195 0x1398ff2 0x13978da 0x1396d84 0x1396c9b 0x497c65 0x499626 0x21fd 0x2165)
terminate called throwing an exception(lldb) 
```

大家好，

我是 iOS 编程的新手，迷失了一些东西。我从“yelOrb”重命名了我原来的 UIIMAGEVIEW ......这对于最终替换黄色球体的真实对象来说效率低下。所以我将它重命名为“girlHeadView”。（请注意，这就是我用箭头键控制的 UIImageView 的名称。）

现在，每当我运行程序时，我都会在 SIGABRT 中告诉我这一点 [在上面的代码中]。我什至将“girlHeadView”重命名为“yelOrb”。

我浏览了我的 .h 和 .m 文件，没有杂散字或拼写错误导致此问题。

我该如何解决这个问题？我刚刚实现了一个按钮功能来更改 UIImageView（我什至将其全部注释掉以查看是否导致它 - 仍然是 SIGABRT 问题），我什至无法运行模拟器。

谢谢！

编辑：发现我的问题，我不得不在情节提要上删除并重新添加 yelOrb 的图像。奇怪，但它奏效了。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:08:03.577

听起来界面构建器中有一个出口将 UIImageView 连接到旧属性名称`yelOrb`. 然后，当视图控制器的视图加载时，它会尝试建立`yelOrb`不再存在的连接，因此您会收到该错误。

# c - 来自 gtk_label_set_text 的内存泄漏

> ID：10827589
> 
> 赞同：0
> 
> 时间：2012-05-31T04:48:46.493
> 
> 标签：c, gtk

我希望有人可以帮助我找出让我发疯的内存泄漏。通过多轮故障排除，我将问题缩小到一个特定功能的一个特定部分，该部分根据传入的网络消息更新 GTK 标签。只要程序正在运行，此功能就会每 200 毫秒在计时器上重复一次。如果没有传入的网络消息或没有与我要查找的消息匹配的传入消息，则没有问题。但是当我开始发送匹配的消息并触发 gtk_label_set_text 调用时，我开始看到缓慢的内存泄漏。只要匹配的消息不断进入，内存每 30-60 秒就会减少 60k。如果我停止发送匹配的消息，泄漏会立即停止。

这是我的功能：

```
static gboolean get_incoming_message()
{

gchar *buffer = g_malloc(1024);
gssize incoming_size;
GError *err = NULL;

incoming_size = g_socket_receive(listenSocket, (gchar *)buffer, 1024, NULL, &err);

if ( incoming_size > 0 )
{
    gchar *incoming_message = g_strndup ((const gchar *)buffer, incoming_size);

    if ((g_strcmp0(incoming_message, "Show 1 in Progress")==0) || (g_strcmp0(incoming_message, "Show 2 in Progress")==0))
    {

        gtk_label_set_text (GTK_LABEL (current_status_message_box), (const gchar *)incoming_message);
    }

    g_free(incoming_message);
    g_free(buffer);
    g_error_free(err);
    return TRUE;
}
else
{
    g_free(buffer);
    g_error_free(err);
    return TRUE;
}

return FALSE;

} 
```

同样，仅当其中带有 g_strcmp0 的 if 语句评估为 TRUE 时才会发生泄漏。

希望有人能告诉我哪里出错了，或者如果这实际上是 GTK 中的一个问题，有没有办法解决它？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:57:17.550

您的使用`gtk_label_set_text()`似乎很好。

乍一看，这与您的描述不完全相符，但我注意到您从来没有 free `incoming_message`，因此每次收到消息时都会泄漏。也许没有与您的*条件*不匹配的非零大小的消息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:38:58.153

您的代码存在一些问题：

1.  如果您不关心错误处理，请使用`NULL`代替`err`;
2.  if `err`is `NULL`，它不能是`g_error_free`'d: 实际上它恰好可以工作，但不要指望它；
3.  如果`buffer`对您的函数是本地的，只需使用本地数组：它将避免`g_free()`在每个退出点上；
4.  `return FALSE`永远达不到；

我会这样重写它：

```
static gboolean get_incoming_message()
{   
    gchar buffer[1024];
    gssize incoming_size;

    incoming_size = g_socket_receive(listenSocket, buffer, 1024, NULL, NULL);
    if (incoming_size < 0)
        return FALSE;

    if (incoming_size > 0 &&
        (strncmp(buffer, "Show 1 in Progress", 1024) == 0 ||
         strncmp(buffer, "Show 2 in Progress", 1024) == 0))
        gtk_label_set_text(GTK_LABEL(current_status_message_box), buffer);

    return TRUE;
} 
```

除此之外，您发布的代码中没有泄漏。

# jquery - 对表元素的重复 ajax 请求

> ID：10827597
> 
> 赞同：2
> 
> 时间：2012-05-31T04:49:23.357
> 
> 标签：jquery, ajax, html-table, iteration

我正在编写一个脚本，该脚本应该遍历用户表（见下文），完成用户 ID，并发出一堆 API 请求，这些请求将使用关于这些用户的任意元数据更新在线客户端数据库。

这是表格：

```
<table id="msisdns_to_process">
        <tr class="header">
            <th>phone</th>
            <th>First</th>
            <th>Last</th>
            <th>Favorite Book</th>
        </tr>
        <tr subid="4e8d1d81e89f75ffc1fd71b1">
            <td class="unprocessed" mdid="4eb838400cf2384c4bd32ba5">18005882300</td>
            <td class="unprocessed" mdid="4eb838400cf2384b3ac22ba5">Quentin</td>
            <td class="unprocessed" mdid="4eb838480cf2384b3ac22ba6">Tarantino</td>
            <td class="unprocessed" mdid="4ef3c054696e84d9342c46c1">Naked Lunch</td>
        </tr>
        <tr subid="4e8d92560cf24f1d7e67de28">
            <td class="unprocessed" mdid="4eb838400cf2384c4bd32ba5">18005882300</td>
            <td class="unprocessed" mdid="4eb838400cf2384b3ac22ba5">Wes</td>
            <td class="unprocessed" mdid="4eb838480cf2384b3ac22ba6">Anderson</td>
            <td class="unprocessed" mdid="4ef3c054696e84d9342c46c1">The Ticket That Exploded</td>
        </tr>
        <tr subid="4e8eacac2d6afa11cbdece8a">
            <td class="unprocessed" mdid="4eb838400cf2384c4bd32ba5">18005882300</td>
            <td class="unprocessed" mdid="4eb838400cf2384b3ac22ba5">David</td>
            <td class="unprocessed" mdid="4eb838480cf2384b3ac22ba6">Cronenberg</td>
            <td class="unprocessed" mdid="4ef3c054696e84d9342c46c1">Junky</td>
        </tr>
</table> 
```

所以我需要做的是按下按钮，它将遍历所有非标题单元格，进行 API 调用，然后使用行的 subid 属性、单元格的 mdid 属性和单元格的值。就像是：

```
http://api.foo.bar/update/[subid]
POST payload: {"id":"[mdid]","value":"[cell text]"} 
```

我对 jQuery 很陌生，所以我可能会因为使用正确的选择器而被绊倒，但这就是我所拥有的：

```
$("button#process_md").click(function(){
        $("table#msisdns_to_process tr").each(function(){
                var subid = this.attr("subid");
                $("td.unprocessed").each(function(){
                        var mdid = this.attr("mdid");
                        var cont = this.contents();
                        $.ajax("/update"+subid,
                        {
                            data: { 'id': mdid,
                            'value':cont
                            },
                            headers: {'Accept': 'application/json'},
                            type: 'POST',
                            statusCode: {
                                200: function() {
                                    $(this).addClass("processed");
                                    $(this).removeClass("unprocessed");
                                }

                            }
                        }
        });     
}); 
```

...但我没有得到任何结果。我想，再一次，我做错了选择或迭代。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:55:25.183

在用下面的代码替换您的代码后尝试，我已经修复了一些选择器，这些选择器是使该代码工作所需的。

```
$(document).ready(function() {

    $("button#process_md").click(function() {
        $("table#msisdns_to_process tr[subid]").each(function() {
            var subid = $(this).attr("subid");
            $("td.unprocessed").each(function() {
                var mdid = $(this).attr("mdid");
                var cont = $(this).html();
              //Ajax call go here 

            });
        });

    });

}); 
```

推荐使用调试器（firebug,chrome）来查看你的代码是否工作，你可以使用alerts和console.log()来查看你的代码是否工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:13:04.050

您的代码中有几个一般错误。

1) 当它实际上是一个 DOM 元素时，你将它视为一个 jQuery 对象。所以这：

```
var mdid = this.attr("mdid"); 
```

应该：

```
var mdid = $(this).attr("mdid"); 
```

2）您不能将'$（selector）.contents（）'作为参数传递给ajax调用，因为它会引发异常。你可能是说

```
$(selector).text() 
```

3) 除非您明确使用 jQuery 代理函数，否则不会通过回调函数保留关键字“this”。因此，成功的功能将没有“this”的正确范围。请参阅下面代码中的 $.proxy。

下面的代码被重新格式化，使其更易读。

```
function    setProcessed(data){
    $(this).addClass("processed");
    $(this).removeClass("unprocessed");
}

function processRow(){

    var subid = $(this).attr("subid");

    try{
        $(this).find("td.unprocessed").each(function(){

            var mdid = $(this).attr("mdid");
            var cont = $(this).text();

            var params = {};
            params.id = mdid;
            params.value = cont;

            $.ajax({
                url: "/update" + subid,
                data: params,
                type: 'POST',
                success:$.proxy(this, setProcessed),
            });
        });
    }
    catch(error){
        alert("error caught in processRow: " + error);
    }
}

function processTable(){
    $("table#msisdns_to_process tr").each(processRow);
}

$("button#process_md").click(processTable); 
```

但是我应该注意，您的页面几乎肯定不会像您希望使用这种方法那样工作。基本上大多数浏览器一次只会打开两个连接到服务器，因此 Ajax 请求将被大量排队和延迟，可能会超时。

您最好找到大量需要处理到服务器的行，在一个请求中将它们全部传递，然后在请求中取回数据。

# android - 在 Android 上实现 NTRU 加密短信

> ID：10827599
> 
> 赞同：1
> 
> 时间：2012-05-31T04:49:41.887
> 
> 标签：android, ntruencrypt

我正在构建一个 android 短信应用程序，该应用程序在发送之前在发件人站点加密消息。但是，在将消息转换为系数为 -1、0、1 的多项式 m 时，我使用的是 Base-3 转换。因此，sam 中的每个字符都被转换为多项式的 5 个系数。这使我最多只能发送 32( 5 * 32 = 160 ) 个字符。如何将消息转换为多项式以便发送更多字符？

希望我把问题说清楚了！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:46:39.117

NTRUEncrypt 输出模 q 的多项式，而不是 3（您可能正在考虑的输入是模 3 的多项式）。

通常，q=2048=2^11。假设 160 个字符 = 160 个字节，则一条 SMS 消息可以达到 1280 位，因此您可以在一条加密消息中发送 1280/11 = 116 个系数。为了相当安全，您需要数百个系数，加上一些额外的字节来防止某些类型的攻击。

因此，一条加密消息无法放入一条 SMS 消息中并且仍然是安全的，但您始终可以将其拆分为多条消息。如果您使用[开放 NTRU 实现](http://ntru.sf.net/)中的 APR2011_439_FAST 参数，则加密消息将为 604 字节，这意味着您需要 4 条 SMS 消息。

或者您可以使用 256 位[ECC](https://en.wikipedia.org/wiki/Elliptic_curve_cryptography)而不是 NTRU，如果您发送包含 AES 密钥和盐的 32 个 ECC 加密字节，然后是 96 个 AES 加密字节，则您可以将 96 个字节放入一条消息中。

# ruby - Ruby 中的远程执行（Capistrano 或 MCollective）以收集云服务器性能指标

> ID：10827601
> 
> 赞同：2
> 
> 时间：2012-05-31T04:49:45.517
> 
> 标签：ruby, monitoring, capistrano, rackspace-cloud

我正在寻找一种从各种云实例（EC2、Rackpsace）远程收集数据的方法。Rackspace API 无法通过其 API 收集服务器性能指标（即平均负载、cpu 使用率、内存），否则永远不会被询问。

我开始研究像 Capistrano 或 Mcollective（我也考虑过 collectd）这样的解决方案，但我不确定哪一个最适合我的应用程序。我试图避免将 ssh 密钥用于趋势目的（我不想一直登录以收集这些指标）数字。因为这些提供者不会通过他们的 API 公开这些指标，所以我正在寻找一种自己收集它们的方法，而且我是 Ruby 社区的新手，所以在简要介绍了所有这些工具的文档之后，我仍然没有能够了解哪种框架效果最好，或者是否有其他替代方案。

听起来 Capistrano 更适合作为部署工具，虽然它可以执行远程任务，所以在我阅读了文档之后，它几乎不适合我的脚本。

MCollective 看起来对我正在尝试做的事情非常有吸引力，但似乎我必须为此编写自己的 RPC 样式插件。

我也考虑过插入一些更大的监控系统，例如 Nagios、Munin、Zenoss、Hyperic 等，但是当我只想收集一些简单的指标时，我宁愿不安装一些大型批量监控系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:59:50.767

如果您的意图是*根据系统性能触发某些操作*（例如当 cpu 使用率过高时重新启动），您应该检查[god](http://godrb.com/)。

我不确定当您想在更长的时间段内生成一些性能统计信息时这是否也有用。就个人而言，我为此使用 Munin，但如果你不喜欢它，也许你可以在[Ruby Toolbox |上找到一些东西。服务器监控](https://www.ruby-toolbox.com/categories/server_monitoring)。

# javascript - datetimepicker 在点击外部时将日期设置为今天的日期

> ID：10827605
> 
> 赞同：2
> 
> 时间：2012-05-31T04:49:56.733
> 
> 标签：javascript, jquery, datetimepicker

我一直在寻找这个问题的答案，但没有运气，所以现在我不得不问......

我有来自 Trent Richardson 的 datetimepicker，由于某些原因，设置的选项非常少，当我在外部单击而不选择日期时，它会自动将日期字段设置为今天的日期。

有人知道发生了什么吗？

这是我的代码：

```
$('input.datetime').datetimepicker({
        ampm: true,
        timeFormat: 'hh:mm tt',
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false },
     }); 
```

感谢我能得到的所有帮助，这给使用该应用程序的员工造成了一些混乱......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:09:28.833

我也搜索了高低，但是在放置了一些调试消息之后，答案很明显。我注意到 onClose 方法有一个“值”参数，它具有您选择的实际日期，或者如果您什么都不选择，它具有您文本框中的原始值。将其设置为输入框和walaaaa的值！问题解决了。

如果您不这样做，当您只想关闭 datetimepicker 时，当前日期将替换您的原始日期。

```
$('input.datetime').datetimepicker({
        ampm: true,
        timeFormat: 'hh:mm tt',
        addSliderAccess: true,
        sliderAccessArgs: { touchonly: false },
        onClose: function (value) {
                        $('input.datetime').val(value);
                    }
     }); 
```

# android - 如何在 Android 手机状态栏上添加通知图标？

> ID：10827609
> 
> 赞同：-1
> 
> 时间：2012-05-31T04:50:16.513
> 
> 标签：android, android-service, android-notification-bar

我是 Android 编程新手，需要帮助。如果你们中的任何人有一个在电话上添加（图标/消息）通知的简单示例，并且在单击它时会将应用程序恢复到其状态。目的是用户可以在不退出我的应用程序的情况下打开任何其他应用程序。就像 AIRDROID 一样。

我创建了一个应用程序，用户可以在其中登录并执行一些任务。但是当我单击 HOME 时，它会退出应用程序，用户将不得不再次登录。（保存用户/通行证对我的项目来说并不理想）。

有人有链接/示例/建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:57:40.293

遵循本教程，希望对您有所帮助 :) - [http://www.youtube.com/watch?v=e74z0_Z5QWI&feature=relmfu](http://www.youtube.com/watch?v=e74z0_Z5QWI&feature=relmfu)

# django - 使用 Django 在 Google 地图上放置标记

> ID：10827613
> 
> 赞同：5
> 
> 时间：2012-05-31T04:50:30.383
> 
> 标签：django, google-maps-api-3, django-templates

我正在尝试使用 API 和 HTML5 地理位置根据存储在模型中的纬度和经度放置标记。

问题是如何使用模板关键字遍历存储在 JavaScript 标记中的每个对象的纬度/经度信息，我不相信这可以在 Django 中完成。

我在这里发现了一个类似的问题，[在 Javascript 中添加带有 DJango 模板标签的 Google 地图标记](https://stackoverflow.com/questions/8857795/adding-google-map-markers-with-django-template-tags-in-javascript)，我对其进行了轻微修改并放置在模板中——不是单独的脚本文件——但它似乎不起作用：

```
function loadMarkers(){
        {% for story in stories %}
            var point = new google.maps.LatLng({{story.latitude}},{{story.longitude}});
            var marker = new google.maps.Marker({
            position: point,
            map: map
        });
        {% endfor %}    
    } 
```

任何有关如何使用 lat、lon 信息正确遍历存储的 Django 对象中的项目并使用 API 将它们放置在 Google Map 上的任何见解都将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T19:59:24.153

我使用[django-geoposition](http://django-geoposition.readthedocs.org/en/latest/)来管理我的地理数据

```
from django.db import models
from geoposition.fields import GeopositionField

class Zone(models.Model):
    name = models.CharField(max_length = 50 )
    kuerzel = models.CharField(max_length = 3 )
    kn_nr = models.CharField(max_length = 5 )
    beschreibung = models.CharField(max_length = 300 )
    adresse = models.CharField(max_length = 100 )
    position = GeopositionField() 
```

**视图.py**

```
from geo.models import Zone
from django.shortcuts import render_to_response, get_object_or_404, redirect

def ShowZonen(request):
    zone=Zone.objects.all()
    return render_to_response('zonen.html', {"zone": zone})

def showZoneDetail(request, zone_id):
    zone=Zone.objects.get(id=zone_id)
    return render_to_response('zonendetail.html', {"zone": zone}) 
```

**模板** zonendetail.html

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

  var map;
  function initialize() {
    var mapDiv = document.getElementById('map-canvas');
    map = new google.maps.Map(mapDiv, {
      center: new google.maps.LatLng(48.208174,16.373819),
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    google.maps.event.addListenerOnce(map, 'tilesloaded', addMarkers);

  }
  function addMarkers() {

      {% for mark in zone %}
        var point = new google.maps.LatLng({{mark.position.latitude}},{{mark.position.longitude}});
            var image = '{{ STATIC_PREFIX }}'+ 'checkmark.png';
            var marker = new google.maps.Marker({
            position: point,
            map: map,
            icon: image, 
            url: 'http://172.16.0.101:8882/zone/' + {{mark.id}},
           title: '{{ mark.id }}',
        });
             marker['infowindow']  = new google.maps.InfoWindow({
                     content: "<h1>{{mark.name}}</h1> <br> {{ mark.name }} <p> <a href=\"http:\/\/172.16.0.101:8882\/zone\/{{ mark.id }}\"> {{ mark.name }}</a>",
        });
            google.maps.event.addListener(marker, 'click', function() {
                //window.location.href = this.url;
                 this['infowindow'].open(map, this);
            });
           google.maps.event.addListener(marker, 'mouseover', function() {
                // this['infowindow'].open(map, this);
                    });
           google.maps.event.addListener(marker, 'mouseout', function() {
                // this['infowindow'].close(map, this);

            });

        {% endfor %}    

  }

  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

# xml - 如何使用特殊字符/使用 Transform 解析 XML

> ID：10827623
> 
> 赞同：0
> 
> 时间：2012-05-31T04:51:44.740
> 
> 标签：xml, xslt, transform, using

我正在使用 javax.xml.transform.Transformer 使用 XSLT 转换 XML。在其中一个属性名称中有特殊字符'/'。它失败并出现错误“与元素类型“XXXXXXX”关联的属性名称“XXX”必须后跟'='字符”。如果我在属性名称中删除 /，则 XML 将被解析。但这不是正确的修复。我们需要在转换 XML 时忽略这个特殊字符。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:20:57.893

您不是在尝试转换 XML，而是在尝试转换非 XML，因为如果属性名称中有“/”，那么它就不是 XML。因此，要么将内容更改为有效的 XML，要么寻找非 XML 工具来完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:06:12.940

等等，你有一个属性*名称*包含斜线字符的 XML？

根据官方 XML 规范，这*不是*合法的属性名称。

[http://www.w3.org/TR/xml/#NT-Name](http://www.w3.org/TR/xml/#NT-Name)

所以你的 XML 是非法的。如果要处理属性名称中带有斜线的“XML”文档，则必须修改现成的解析器或编写自己的解析器。由于您的 XML 是非法的，因此您不能期望 XSLT 解析器能够正常工作。

# python - Python 类堆栈框架限制

> ID：10827624
> 
> 赞同：1
> 
> 时间：2012-05-31T04:51:45.917
> 
> 标签：python, class, stack-frame

如果我有以下格式的课程：

```
class TestClass:
  def __init__(self):
    self.value = 0

  def getNewObject(self):
    return TestClass() 
```

我可以调用该函数的次数是否有限制？例如：

```
obj = TestClass()
obj.getNewObject().getNewObject() 
```

`getNewObject()`我可以调用的返回值的次数是否有限制`getNewObject()`？如果是这样，哪些因素会影响这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T04:57:39.500

我对此表示怀疑。让我怀疑的一个原因是，如果我们有这个功能：

```
def test(obj):
    obj.getNewObject().getNewObject().getNewObject() 
```

我们[拆解它](http://docs.python.org/library/dis.html#dis.dis)：

```
import dis
dis.dis(test) 
```

我们得到这个：

```
 2           0 LOAD_FAST                0 (obj)
              3 LOAD_ATTR                0 (getNewObject)
              6 CALL_FUNCTION            0
              9 LOAD_ATTR                0 (getNewObject)
             12 CALL_FUNCTION            0
             15 LOAD_ATTR                0 (getNewObject)
             18 CALL_FUNCTION            0
             21 POP_TOP             
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

这只是重复的[`LOAD_ATTR`](http://docs.python.org/library/dis.html#opcode-LOAD_ATTR)其次[`CALL_FUNCTION`](http://docs.python.org/library/dis.html#opcode-CALL_FUNCTION)。我无法想象这将需要大量内存或其他资源来管理。因此，可能没有限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T04:57:31.997

Python 中存在递归限制（可调整），但这无关紧要。每个调用都是在前一个调用完成后进行的，因此它们都是从堆栈帧的同一级别（即从您的用户代码）调用的。现在，您可能会遇到行长限制或其他问题，尤其是对于交互式 Python shell。

# jquery - 如何一次又一次地连续重复文字动画

> ID：10827626
> 
> 赞同：0
> 
> 时间：2012-05-31T04:52:36.913
> 
> 标签：jquery, html

我正在使用下面的代码一次又一次地为文本设置动画，但下面的代码以我在下面的代码中提到的 10 个案例结束，但我需要一次又一次地为文本设置动画。

```
<html lang="en">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>jQuery TextFX - A jQuery Text Animation Engine</title>
    <style type="text/css">
    body{margin:0;padding:0;color:#333}#effectTwo{display:none}
    </style>
    <link rel="stylesheet" type="text/css" href="cj-text-fx.min.css" />
    <script src="jquery-1.6.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">jQuery.noConflict();</script>
    <script src="jquery.easing.1.3.min.js" type="text/javascript"></script>
    <script src="cj-text-fx.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    var isOn = 0,
sets, fx, toAnimate = "#effect",
settings = {
    animation: 8,
    animationType: "in",
    backwards: !1,
    easing: "easeOutQuint",
    speed: 1E3,
    sequenceDelay: 100,
    startDelay: 0,
    offsetX: 100,
    offsetY: 50,
    onComplete: fireThis,
    restoreHTML: !0
};
jQuery(document).ready(function () {
    fx = jQuery("#effect");
    jQuery.cjTextFx(settings);
    jQuery.cjTextFx.animate(toAnimate)
});

function fireThis() {
    if (isOn !== 13) {
        isOn < 13 ? isOn++ : isOn = 0;
        switch (isOn) {
        case 1:
            sets = {
                animationType: "out",
                restoreHTML: !1
            };
            break;
        case 2:
            fx.html("Systematic Approch for Innovation");
            sets = {
                animation: 11
            };
            break;
        case 3:
            sets = {
                animation: 11,
                animationType: "out",
                restoreHTML: !1
            };
            break;
        case 4:
            fx.html("Systematic Approch for Innovation");
            sets = {
                animation: 1
            };
            break;
        case 5:
            sets = {
                animation: 1,
                animationType: "out",
                restoreHTML: !1
            };
            break;
        case 6:
            fx.html("Systematic Approch for Innovation");
            sets = {
                animation: 6,
                backwards: !0
            };
            break;
        case 7:
            sets = {
                animation: 4,
                animationType: "out",
                backwards: !0,
                restoreHTML: !1
            };
            break;
        case 8:
            fx.html("Systematic Approch for Innovation");
            sets = {
                animation: 2,
                easing: "easeOutBounce"
            };
            break;
        case 9:
            sets = {
                animation: 2,
                animationType: "out",
                speed: 500,
                easing: "easeInBack",
                restoreHTML: !1
            };
            break;
        case 10:
            fx.html("Systematic Approch for Innovation"), sets = {
                animation: 14,
                startDelay: 1E3,
                linked: !0,
                hyperlink: "generator.html",
                color: "#0000FF",
                linkTarget: "_self",
                onComplete: null
            }
        }
        jQuery.cjTextFx.animate(toAnimate, sets)
    }
};

    </script>
    </head>
    <body>
    <div id="container">
    <div id="text-fx">
    <div id="effect">Systematic Approch for Innovation</div>
    </div>
    </div>
    </body>
    </html> 
```

请告诉我一个解决问题的方法。迫在眉睫。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:04:15.693

改变：

```
 if (isOn !== 13) {
 isOn < 13 ? isOn++ : isOn = 0; 
```

和

```
 case 10:
        fx.html("Systematic Approch for Innovation"), sets = {
            animation: 14,
            startDelay: 1E3,
            linked: !0,
            hyperlink: "generator.html",
            color: "#0000FF",
            linkTarget: "_self",
            onComplete: null
        }
    }
    jQuery.cjTextFx.animate(toAnimate, sets) 
```

至：

```
 isOn !== 11 ? isOn++ : isOn = 0; 
```

和

```
 case 10:
        fx.html("Systematic Approch for Innovation"), sets = {
            animation: 14,
            startDelay: 1E3,
            linked: !0,
            hyperlink: "generator.html",
            color: "#0000FF",
            linkTarget: "_self",
            onComplete: function(){
                 jQuery.cjTextFx.animate(toAnimate, sets)
            }
        }
    } 
```

# windows-phone-7 - 在后台下载文件

> ID：10827630
> 
> 赞同：1
> 
> 时间：2012-05-31T04:53:09.093
> 
> 标签：windows-phone-7

是否允许使用后台进程在后台下载文件？我知道有一个限制，它只允许每 15 分钟左右运行一次，但还有其他限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:17:47.637

是的，您可以使用后台代理。这篇[msdn 文章](http://msdn.microsoft.com/en-us/library/hh202942%28v=vs.92%29)有助于解释在后台代理中可以做什么和不可以做什么。您需要根据需要完成的工作量在 PeriodicTask 和 ResourceIntensiveTask 之间进行选择。

# c# - C# 组合框所有者绘制

> ID：10827631
> 
> 赞同：0
> 
> 时间：2012-05-31T04:53:47.290
> 
> 标签：c#

我的组合框是空的。

```
 public frmDlgGraphOptions()
    {

        InitializeComponent();
        this.comboBox1 = new System.Windows.Forms.ComboBox();
        arr = new String[4];
        arr[0] = "Solid Line";
        arr[1] = "Dashed line";
        arr[2] = "Dotted Line";
        arr[3] = "Dotted Line";
         imageArr = new Image[4];
         imageArr[0] = new Bitmap("C:\\SolidLine.png");
        imageArr[1] = new Bitmap("C:\\dashedline.png");
        imageArr[2] = new Bitmap("C:\\Dotted.png");
        imageArr[3] = new Bitmap("C:\\Dotted.png");

        comboBox1.DrawMode = DrawMode.OwnerDrawFixed;
        comboBox1.DropDownStyle = ComboBoxStyle.DropDownList;
        comboBox1.DrawItem += new DrawItemEventHandler(comboBox1_DrawItem);
        this.comboBox1.TabIndex = 1;    
        this.comboBox1.ForeColor = System.Drawing.Color.FromArgb(((System.Byte)(192)), ((System.Byte)(192)), ((System.Byte)(255)));
        this.comboBox1.ItemHeight = 20;
        this.comboBox1.Location = new System.Drawing.Point(84, 137);
        this.comboBox1.Name = "comboBox1";
        this.comboBox1.Size = new System.Drawing.Size(200, 26);
        groupBox1.Controls.Add(comboBox1); 
```

这是 OnDrawItem 的代码

```
 private void comboBox1_DrawItem(object sender, DrawItemEventArgs e)
    {
        // Let's highlight the currently selected item like any well 
        // behaved combo box should
        e.Graphics.FillRectangle(Brushes.Bisque, e.Bounds); 
        e.Graphics.DrawImage(imageArr[e.Index], new Point(e.Bounds.X, e.Bounds.Y));   
        e.Graphics.FillRectangle(Brushes.Bisque, e.Bounds);
        //is the mouse hovering over a combobox item??            
        if ((e.State & DrawItemState.Focus) == 0)
        {
            //this code keeps the last item drawn from having a Bisque background. 
            e.Graphics.FillRectangle(Brushes.White, e.Bounds);

            e.Graphics.DrawImage(imageArr[e.Index], new Point(e.Bounds.X, e.Bounds.Y));
        } 
```

首先，我在组合框中看不到任何项目。我看到了空的组合框。另外，当我将鼠标悬停在组合框上时， e.index= -1 并引发错误

谢谢你孙

```
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:06:45.073

覆盖`Paint`事件并将`ownerdraw`属性设置为`True`

# c++ - 天空盒旋转与世界不同步

> ID：10827635
> 
> 赞同：0
> 
> 时间：2012-05-31T04:54:20.223
> 
> 标签：c++, opengl, glsl

我有一个带有加载网格、地平面和天空盒的小场景。我正在生成一个立方体，并使用顶点位置作为立方体贴图纹理坐标。

水平旋转（围绕 y 轴）完美运行，并且世界运动与天空盒对齐。垂直旋转（关于相机的 x 轴）似乎与其他物体的运动不匹配，除了奇怪的是，当相机看着立方体面的中心时，一切似乎都对齐了。换句话说，运动是非线性的，我会尽力用一些图像来说明效果：

首先，据我所知，水平运动是正确的：

面向前方：![面向前方](../Images/b2ee1b567dc530a59b2ee8ed892ae259.png)

在几乎 45 度时面向左： ![在几乎 45 度时面向左](../Images/a1b2778c97dc542c9b1f76cacd77f2ec.png)

在 90 度向左： ![90 度面朝左](../Images/178a9df9c948f7e04e0dba8d522bec62.png)

现在的垂直运动似乎在运动上有一些差异：

再次向前看： ![再次面向前方](../Images/5f4b94aec5942df07bbc47a206b40bf8.png)

注意这张图片中地平面相对于天空盒的位置。我稍微向左旋转以使太阳在不应该被遮挡的情况下更加明显。

面朝下： ![脸稍微向下](../Images/9bf60946c7e60ca421c42539a9f2ec91.png)

最后，一个直接向上显示视图的视图正确地居中在（天空盒）立方体面上。

正面朝上： ![正对着](../Images/17f094e6d372f3f294a7906ef028b321.png)

这是我的绘图代码，为简洁起见，省略了地平面和网格图。（请注意，中心的立方体是一个加载的网格，不是由天空盒的相同函数生成的）。

```
void MeshWidget::draw() {

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glPushMatrix();

    glRotatef(-rot_[MOVE_CAMERA][1], 0.0f, 1.0f, 0.0f);
    glRotatef(-rot_[MOVE_CAMERA][0], 1.0f, 0.0f, 0.0f);
    glRotatef(-rot_[MOVE_CAMERA][2], 0.0f, 0.0f, 1.0f);

    glDisable(GL_DEPTH_TEST);
    glUseProgramObjectARB(shader_prog_ids_[2]);
    glBindBuffer(GL_ARRAY_BUFFER, SkyBoxVBOID);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, sizeof(Vec3), BUFFER_OFFSET(0));

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, SkyIndexVBOID);
    glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_SHORT, BUFFER_OFFSET(0));
    glUseProgramObjectARB(shader_prog_ids_[0]);
    glEnable(GL_DEPTH_TEST);

    glPopMatrix();

    glTranslatef(0.0f, 0.0f, -4.0f + zoom_factor_);

    glRotatef(rot_[MOVE_CAMERA][0], 1.0f, 0.0f, 0.0f);
    glRotatef(rot_[MOVE_CAMERA][1], 0.0f, 1.0f, 0.0f);
    glRotatef(rot_[MOVE_CAMERA][2], 0.0f, 0.0f, 1.0f);

    glPushMatrix();

    // Transform light to be relative to world, not camera.
    glRotatef(rot_[MOVE_LIGHT][1], 0.0f, 1.0f, 0.0f);
    glRotatef(rot_[MOVE_LIGHT][0], 1.0f, 0.0f, 0.0f);
    glRotatef(rot_[MOVE_LIGHT][2], 0.0f, 0.0f, 1.0f);

    float lightpos[] = {10.0f, 0.0f, 0.0f, 1.0f};
    glLightfv(GL_LIGHT0, GL_POSITION, lightpos);

    glPopMatrix();

    if (show_ground_) {

        // Draw ground...
    }

    glPushMatrix();

    // Transform and draw mesh...

    glPopMatrix();
} 
```

最后，这是天空盒的 GLSL 代码，它生成纹理坐标：

顶点着色器：

```
void main()
{
    vec4 vVertex = vec4(gl_ModelViewMatrix * gl_Vertex);

    gl_TexCoord[0].xyz = normalize(vVertex).xyz;
    gl_TexCoord[0].w = 1.0;

    gl_TexCoord[0].x = -gl_TexCoord[0].x;

    gl_Position = gl_Vertex;
} 
```

片段着色器：

```
uniform samplerCube cubeMap;

void main()
{
    gl_FragColor = texture(cubeMap, gl_TexCoord[0]);
} 
```

我还想知道对所有相机和对象旋转使用四元数是否会有所帮助。

如果您需要更多信息（或图像），请询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:50:35.680

我认为您应该基于世界空间向量（gl_Vertex？）而不是视图空间向量（vVertex）生成天空盒纹理查找。

我假设您的天空盒坐标已经在世界空间中定义，因为在绘制它之前我没有看到模型矩阵变换（只有相机旋转）。在这种情况下，您应该根据顶点的世界空间位置对天空盒纹理进行采样，它不需要被相机转换。您已经通过相机平移了顶点，您也不需要平移查找向量。

尝试替换`normalize(vVertex)`，`normalize(gl_Vertex)`看看是否可以改善情况。

另外我可能会摆脱 x = -x 的东西，我怀疑这是为了补偿纹理最初以错误的方向旋转的事实？

> 我还想知道对所有相机和对象旋转使用四元数是否会有所帮助。

怎么帮忙？与使用矩阵相比，它没有提供任何新功能。我已经听到过关于矩阵或四元数是否具有更好性能的两种说法，但我认为没有必要使用它们。

# javascript - Chrome 是否会因为其扩展而停止某些 JavaScript 代码的运行？

> ID：10827636
> 
> 赞同：6
> 
> 时间：2012-05-31T04:54:40.533
> 
> 标签：javascript, google-chrome-extension

我的页面中有一个小代码

```
 <script type="text/javascript">
 function doPost() {
 document.forms["form"].submit();
}  
  function Func1Delay()
{
setTimeout("doPost()", 0);
} 
```

……

```
 <body onload="Func1Delay()"> 
```

我在控制台中有这个错误说

> 未捕获的类型错误：无法调用未定义的方法“创建”

在右边，这是由于 chrome 扩展 MeasureIt。当我禁用它时，我的脚本可以工作。有解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T11:39:03.583

简短的回答是肯定的。但完整的答案是否定的，不是 Chrome，而是一些干扰您的代码的扩展程序。例如：

1）内容脚本可以添加监听器并使用stopPropagation。在这种情况下，您的代码将不会收到该事件。我可以想象一个更具体的场景，其中内容脚本失败并因此阻止其他侦听器执行。

2) 内容脚本可能会弄乱您页面的元素。它可以删除一些，并添加它的 owm。如果扩展添加一个带有与你的完全相同的 var 或函数的 SCRIPT 元素会发生什么？

我们无法确定扩展程序的代码写得有多好。

顺便说一句，有很多 Chrome 的扩展程序会干扰页面。几个月前，Chrome 的 Skype 扩展程序因干扰和破坏该浏览器中的网页和视频播放而被判有罪。

# android - 如何将 cookie 与 android webview 同步？

> ID：10827639
> 
> 赞同：2
> 
> 时间：2012-05-31T04:55:04.517
> 
> 标签：android, webview

我一直在创建一个包含网站登录页面的应用程序。我正在使用 HttpGet 方法和 DefaultHttpClient 进行连接。一切正常。一旦登录成功，我将收到 json 响应，其中我将获得一个 URL 以使用 web-view 加载。在网络视图中加载 URL 时，cookie 没有同步。过去一周我一直在头疼。任何人都可以帮我解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:58:14.333

终于在花了 10 天后，我找到了解决方案。

```
if (!Utils.cookies.isEmpty()){
                CookieSyncManager.createInstance(WebViewActivity.this);
                CookieManager cookieManager = CookieManager.getInstance();
                for (Cookie cookie : Utils.cookies) {
                    Cookie sessionInfo = cookie;
                    String cookieString = sessionInfo.getName() + "=" + sessionInfo.getValue() + ";    domain=" + sessionInfo.getDomain();
                    cookieManager.setCookie(sessionInfo.getDomain(), cookieString);
                    CookieSyncManager.getInstance().sync();
                }
            } 
```

这段代码对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-29T12:19:42.140

对于较新的 API，即 API 21(Lollipop) 及更高版本，`CookieSyncManager`已被弃用，`CookieSyncManager.getInstance().sync();`可以替换`CookieManager.getInstance().flush();`为将 cookie 写入持久存储。

# raphael - 获取与 Raphael 纸元素关联的 DOM 节点的最有效方法

> ID：10827642
> 
> 赞同：1
> 
> 时间：2012-05-31T04:55:32.823
> 
> 标签：raphael

好吧，这让我感到有点生气，因为它看起来应该是直截了当的，但是……不是吗？

我有一种情况，我使用特定的 z-index 属性将多个 SVG 和 div 层叠在一起，以控​​制它们的渲染顺序。所有这些都可以正常工作，但我发现获取给定纸张元素的 DOM 节点的唯一方法如下：

```
// given containerID, width, height, and zIndex are in scope
var canvas = Raphael( containerID, width, height );
var tempObject = canvas.rect( 0, 0, 1, 1, 0 ).attr( { fill: 'none', stroke: 'none' } );
var svgNode = tempObject.node.parentNode;
$(svgNode).css( { 'z-index': zIndex } ); 
```

这行得通，但它显然是不优雅的。有人知道如何直接获取论文的 svg 节点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:09:18.003

`canvas.canvas`应该做的伎俩。

为避免命名混淆，您可以执行以下操作：

```
var paper = Raphael( containerID, width, height );
var svgNode = paper.canvas; 
```

# php - 我的 PHP 表单不会发送给多个用户

> ID：10827645
> 
> 赞同：0
> 
> 时间：2012-05-31T04:55:54.040
> 
> 标签：php, forms

嗨，我有一个 php 表单，当它向一个人发送电子邮件时效果很好，但是当我添加另一个电子邮件地址时，它不会向任何一个地址发送电子邮件。我一直在查看 php 网站，但不明白为什么我的表单现在在添加第二个电子邮件地址后拒绝发送电子邮件。

```
 <?php 
    function isRequestSet( $name ) { 
if ( isset ( $_REQUEST[$name] ) ) { 
    return ( $_REQUEST[$name] != "" ) ;
}
return false;
    }

    $name = "";
     if ( isRequestSet('name' ) ) { 
$name = $_REQUEST['name'];
    } 
    $number = "";
    if ( isRequestSet('number') ) { 
$number = $_REQUEST['number'];
    }
    $email = "";
    if ( isRequestSet( 'email' ) ) { 
$email = $_REQUEST['email'];
    }
     $postcode = "";
     if ( isRequestSet('postcode' ) ) { 
$location = $_REQEUST['postcode'];
     }

     $how_did_you_hear_about_us = array();
     if ( isset( $_REQUEST['how_did_you_hear_about_us'] )  ) { 
$how_did_you_hear_about_us = $_REQUEST['how_did_you_hear_about_us']; 
    }

     $message = "";
      if ( isRequestSet('message' ) ) { 
$location = $_REQEUST['message'];
      }
     $apartment_price_range = array();
      if ( isset( $_REQUEST['apartment_price_range'] )  ) { 
$apartment_price_range = $_REQUEST['apartment_price_range']; 
     }

    $url = "";{
$url = $_REQUEST['url'];
}

    $property = "";{
$property = $_REQUEST['property'];
}

    if ( ($name !="") && ($number != "") && ($email != "") && ($isspam !="yes") ) { 
$to = 'name@email.com,name@email2.com';
$from = $to;
$headers =  'From: ' . $to . "\n" .
            'Reply-To: ' . $to . "\n";
$vars = array( 'name' , 'number' , 'email' , 'postcode' , 'message' ) ;
$message = "-----------\n" ;
foreach ( $vars as $v ) { 
    $value = $_REQUEST[$v];
    $message .= "$v:\t$value\n";
}
$message .= "-----------\n" ;
$message .= "\nHow did you hear about apartments?:\n"  ;
foreach ( $how_did_you_hear_about_us as $how_did_you_hear_about_us ) { 

    $message .= "$how_did_you_hear_about_us\n" ; 
}

$message .= "-----------\n" ;
$message .= "\nApartment price range:\n"  ;
foreach ( $apartment_price_range as $apartment_price_range ) { 

    $message .= "$apartment_price_range\n" ; 
}
$subject = "From: $name <$email>";
mail( $to , $subject , $message , $headers,  "-f $from" );
$confirm = true;
//redirect to the 'thank you' page
header("Location:http://website.com/file/thankyou.php");
     } else { 
$confirm = false;
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T04:58:54.687

很可能是因为您对 From 和 Reply-to 字段使用了多个地址：

```
$to = 'name@email.com,name@email2.com';
$from = $to; 
```

将其更改为使用第一封电子邮件或类似 your-service-name@you-domain-name.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:09:56.750

From 和Reply-To 只使用一个地址。

```
$from = 'me@my-domain.com';
$headers =  'From: ' . $from . "\n" .
            'Reply-To: ' . $from . "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:15:11.303

“在下面的行中，您应该将 $to 字段分解为一个数组。

```
mail( $to , $subject , $message , $headers,  "-f $from" ); 
```

例如

```
$address_array = split(",", $to);

foreach($address_array as $address)
{
mail( $address, $subject , $message , $headers,  "-f $from" );
} 
```

这允许您 $to 字符串包含所需数量的电子邮件。

注意，如果您想跳过分割线，只需将 $to 存储为数组

```
$to = array("name@email.com","name@email2.com"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T05:27:26.440

使您的电子邮件成为功能的一部分。将更容易为您传递电子邮件地址。

```
function email_to_user($email_address){
   $to = $email_address;

   <rest of the codes>

} 
```

并且您可以轻松传递电子邮件地址

```
email_to_user(name1@mail.com);
email_to_user(name2@mail.com); 
```

# scala - Scala将函数调用的结果添加到映射中的值

> ID：10827662
> 
> 赞同：0
> 
> 时间：2012-05-31T04:58:10.217
> 
> 标签：scala, scala-collections

我遇到了 Scala 的一个奇怪的功能，其中以下两个不等价：

```
var map = Map[A,B]() 
map += ( key -> (valueGen(key))) 
```

没有给出相同的结果

```
var map = Map[A,B]() 
val result = valueGen(key)
map += ( key -> result) 
```

第二个片段执行您期望的操作，而第一个片段没有正确添加到地图中，而是覆盖了以前的值，以便地图只包含最近写入的值，而不是添加到其中的所有值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T05:13:06.973

我以前见过这个，只有当`valueGen`函数和这段代码一起递归时才会导致问题。我相信这是因为括号中的表达式不能保证首先执行。括号仅绑定运算符。Scala 必须像这样解释地图上的 +=：

`map = map + (expression)`

当它执行时`map + (expression)`，它首先将映射操作数读取到加号运算符并保​​存。然后它尝试评估`(expression)`. 在`(expression)`包含对该`valueGen`函数的调用的情况下，它会进行调用，然后将其添加到此特定调用的*缓存*映射中。如果调用`valueGen`最终递归并调用此函数（并首先修改地图），这将使用此调用的缓存版本+结果覆盖这些更改。这就是为什么如果您的函数是递归的，您希望将`valueGen`函数与 += 运算符分开调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:11:37.293

当我跑

```
object test {
    def main(args: Array[String]) {
        var map = Map[String,Int]()
        map += ("hello" -> (valueGen("hello")))
        map += ("bye" -> (valueGen("bye")))
        println(map)
    }

    def valueGen(x: String) = x.length
} 
```

我明白了

```
Map(hello -> 5, bye -> 3) 
```

您能否提供一个可运行的示例来说明您所看到的内容？

# html - CSS 图像精灵在 IE7 中不起作用

> ID：10827663
> 
> 赞同：0
> 
> 时间：2012-05-31T04:58:30.703
> 
> 标签：html, css

嗨，我想知道为什么在 IE7 中我的 CSS Sprites 图像没有显示，例如顶部的标志图标和页脚中的社交媒体图标。

你能告诉我为什么吗？

这是链接 [http://indivar.us/StackOverFlow/PTCNews/Website/](http://indivar.us/StackOverFlow/PTCNews/Website/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:01:07.717

不检查您的链接（因为该站点很大）IE7/6 如果使用精灵，则需要设置背景颜色。您也可以将其设置为透明。

```
background: transparent url(../images/flags.png) no-repeat -57.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:08:13.587

好，我知道了..

参考我上面提供的链接，下面提到了IE7中FLAGS ICONS的CSS。通过提供`float:left`和`display:inline`in `p.flags a`，它显示了标志的CSS精灵图像！

```
p.flags a 
{
  display:inline;
  text-indent:-9999px;
  margin-right:5px;
  position:inherit;
  float:left;
} 
```

# rabbitmq - 使用 Ruby-Amqp 时如何保持 AMQP 连接打开？

> ID：10827666
> 
> 赞同：3
> 
> 时间：2012-05-31T04:58:45.867
> 
> 标签：rabbitmq, amqp

我在 Rails 中使用 RabbitMQ 和[ruby​​-amqp](https://github.com/ruby-amqp/amqp)。当控制器收到消息时，我执行以下操作：

```
def create 
  AMQP.start("amqp://localhost:5672") do |connection|
    channel  = AMQP::Channel.new(connection)
    exchange = channel.direct("")
    exchange.publish("some msg", :routing_key => "some key")

    EventMachine.add_timer(2) do
      exchange.delete
      connection.close { EventMachine.stop }
    end
  end
end 
```

1.  有没有办法让 AMQP 连接保持打开状态，这样我就不必在`start`每次请求进入时都调用？

我假设打开到 Rabbit MQ 的连接效率很低，但是我还没有找到将代码块传递给持久连接的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:09:26.283

如果您只想保持 AMQP 连接打开，请尝试设置一个全局变量以保持连接唯一。

```
def start_em
  EventMachine.run do
    $connection = AMQP.connect(CONNECTION_SETTING) unless $connection
    yield
  end
end

def publish(message, options = {})
  start_em {
    channel  = AMQP::Channel.new($connection)           
    exchange = channel.direct('')                          
    exchange.publish(message, {:routing_key => 'rails01'}.merge(options))
    EventMachine.add_timer(1) { exchange.delete }        
  }
end 
```

并且不要忘记在发布消息后删除频道。

# wordpress - 如何使用 get_posts 获取大于 X (ID) 的帖子

> ID：10827671
> 
> 赞同：4
> 
> 时间：2012-05-31T04:59:49.253
> 
> 标签：wordpress, arguments, posts

```
$args = array('numberposts' => 10, 'tag' => 'my-tag', 'ID' => 555');
$posts = get_posts($args); 
```

我只想从特定标签中提取 10 条记录，并且 ID 小于数字。有没有办法用 get_posts 参数做到这一点？如何在参数数组中指定大于、小于或不喜欢？

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-28T08:07:00.860

如果您想获取 ID 低于 X 的帖子，这是一个不错的解决方案：

```
$post_ids = range(1, 555); 

$args = array('numberposts' => 10, 
'tag' => 'my-tag', 
'post__in' => $post_ids');

$posts = get_posts($args); 
```

此处为girlieworks 提供道具：[https ://wordpress.org/support/topic/wp_query-how-to-get-posts-with-and-id-lower-than?replies=7#post-8203891](https://wordpress.org/support/topic/wp_query-how-to-get-posts-with-and-id-lower-than?replies=7#post-8203891)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-26T16:49:06.543

您需要先获取 ID，然后将这些 ID 添加到 wp_query。

```
global $wpdb;

$post_ids = [];

// Get all the IDs you want to choose from
$sql = $wpdb->prepare(
    "
        SELECT ID
        FROM $wpdb->posts
        WHERE ID > %d
    ", 555 );

$results = $wpdb->get_results( $sql );

// Convert the IDs from row objects to an array of IDs
foreach ( $results as $row ) {
    array_push( $post_ids, $row->ID );
}

// Set up your query
$custom_args = array(
    'posts_per_page' => 10,
    'tag' => 'my-tag',
    'post__in' => $post_ids
    );

// Do the query
$custom_query = new WP_Query( $custom_args );

// the loop
if( $custom_query->have_posts() ) :
    while( $custom_query->have_posts() ) : $custom_query->the_post();
        echo get_the_title() . '<br>';
    endwhile;
endif; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:10:08.383

您必须查询所有这些，并在查询循环中检查 id 是大于还是小于您选择的数字。

据我所知，查询本身无法处理此类请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-03T08:04:08.193

我喜欢[Web-Entwickler 的想法](https://stackoverflow.com/a/36258386/3638151)，但使用相反的方向（因为它在问题中）。如果您设置最新的已知 ID 并使用 not_in 方法，它甚至是面向未来的。所以我的解决方案是如果你想要 555+：

```
$args['post__not_in'] = range(1, 555); 
```

如果你想要 1-555：

```
$args['post__in'] = range(1, 555); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-27T23:25:26.460

您可以使用`posts_where`过滤器来更改 SQL 查询，以将结果限制为 ID 小于（或大于）某个数字的帖子：

```
$args   = [
    'tag'              => 'my-tag',
    'posts_per_page'   => 10,
    // Required: posts_where is not triggered without setting suppress_filters to false.
    'suppress_filters' => false,
];
$max_id = 155;

$filter_handler = function( $where ) use ( $max_id ) {
    global $wpdb;

    return $where . $wpdb->prepare( " AND {$wpdb->posts}.ID < %d", $max_id );
};

add_filter( 'posts_where', $filter_handler );

$posts = get_posts( $args );

remove_filter( 'posts_where', $filter_handler ); 
```

# sql-loader - SQL Loader - 不需要 dat 文件

> ID：10827673
> 
> 赞同：0
> 
> 时间：2012-05-31T04:59:57.827
> 
> 标签：sql-loader

我正在尝试将记录插入表中。我不需要访问 dat 文件，因为所有值要么是常量，要么是在控制文件本身中生成的。

一个例子是 -

```
OPTIONS(LOAD=1)
LOAD DATA
APPEND
INTO TABLE table_name
(P_ID CONSTANT 202, NAME CONSTANT "ABC", NUM CONSTANT 1, CREATED_BY CONSTANT "DEF",
CREATION_DATE EXPRESSION "current_timestamp(6)") 
```

但是，当我对上述 ctl 文件执行 sqlldr 命令时，出现以下错误 -

```
SQL*Loader-500: Unable to open file (<file_name>.dat)
SQL*Loader-553: file not found
SQL*Loader-509: System error: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T06:20:51.267

我认为您需要更正您的控制文件：

> 加载数据
> 
> **文件 ***

# android - Sencha Touch 2：使用“淡入淡出”动画在两个面板之间切换？

> ID：10827674
> 
> 赞同：3
> 
> 时间：2012-05-31T05:00:02.900
> 
> 标签：android, performance, animation, extjs, sencha-touch-2

我想知道用淡化效果换掉屏幕上的两个面板的最佳方法是什么？

我有两个面板，我使用 CSS 将它们放置在彼此之上。panelOne 是可见的， panelTwo 是隐藏的。

单击另一个按钮（不在任一面板上）时，我希望 panelOne 淡出并且 panelTwo 淡入。

我目前使用下面的代码进行这项工作，但我发现它在我们这里用于测试的某些 Android 设备上相当滞后。有没有比我目前使用的更好的方法？我该如何改进这个动画？

此代码在按钮点击时执行：

```
Ext.Anim.run(panelOne, 'fade', {
   duration: 100,
   after: function() {
      panelOne.hide();
   }
});
Ext.Anim.run(panelTwo, 'fade', {
   out: false,
   duration: 100,
   before: function() {
      panelTwo.show();
   }
}); 
```

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:22:31.713

没必要用`Ext.Anim`这么久。

例如，您的应用程序有一个`Ext.Container`which 分别包含`panelOne`和`panelTwo`作为第一项和第二项。

然后，如果您想使用动画从`panelOne`到导航，只需使用：`panelTwo``fade`

`Ext.getCmp('your_container_id').animateActiveItem(1,'fade')`

**或者**你可以这样做：

*   添加`showAnimation: 'fadeIn'`到您的 panelTwo 的配置中
*   添加`hideAnimation: 'fadeOut'`到您的 panelOne 的配置中

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:31:32.293

要控制其他配置，例如持续时间，请使用：

hideAnimation: {type:'fadeOut', duration: 1000}

# python - 向 Django 模型添加动态字段

> ID：10827677
> 
> 赞同：3
> 
> 时间：2012-05-31T05:00:27.173
> 
> 标签：python, django, django-models, model

如何在模型上创建动态字段？

假设我正在编写一个与股票市场相关的应用程序。我在某一天进行了购买，稍后我想根据今天的价格检查收益（或损失）。我会有这样的模型：

```
class Purchase(models.Model):
  ticker = models.CharField(max_length=5)
  date = models.DateField()
  price = models.DecimalField(max_digits=20, decimal_places=3)
  quantity = models.IntegerField() 
```

我想做的是定义一个像这样的模型：

```
class PurchaseGain(Purchase):
  gain = models.DecimalField(max_digits=20, decimal_places=3)
  class Meta:
    proxy = True 
```

这样我就可以这样做：

```
todays_price = get_price_from_webservice(ticker)
for p in PurchaseGain.objects.get_purchase_gain(todays_price):
  print '%s bought on %s for a gain of %s' % (p.ticker, p.date, p.gain) 
```

其中 p.gain 是根据 get_purchase_gain 的输入动态计算的。我想使用模型而不只是即时构建字典，因为我想传递它并从实例中生成表单、保存更改等。

我尝试创建一个派生的 QuerySet，但这导致了循环依赖，因为 Purchase 需要了解 QuerySet（通过自定义管理器），并且 QuerySet 返回了一个迭代器，该迭代器需要实例化从 Purchase 派生的 PurchaseGain。

我有什么选择？

谢谢，克雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:24:54.610

为什么不在模型中添加*gain()*方法？

```
class Purchase(models.Model):
    ticker = models.CharField(max_length=5)
    date = models.DateField()
    price = models.DecimalField(max_digits=20, decimal_places=3)
    quantity = models.IntegerField()

    def gain(self, todays_price=None):
        if not todays_price:
            todays_price = get_price_from_webservice(self.ticker)
        result_gain = todays_price - self.price
        return result_gain 
```

然后你几乎可以做你想做的事：

```
for p in Purchase.objects.all():
    print '%s bought on %s for a gain of %s' % (p.ticker, p.date, p.gain()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T18:18:44.320

创建代理类让我感到困惑。通过向购买添加属性，我能够完成我想要的。

```
class PurchaseQuerySet(QuerySet):
  def __init__(self, *args, **kwargs):
    super(PurchaseQuerySet, self).__init__(*args, **kwargs)
    self.todays_price = None

  def get_with_todays_price(self, todays_price):
    self.todays_price = todays_price
    cloned = self.all()
    cloned.todays_price = todays_price
    return cloned

  def iterator(self):
    for p in super(PurchaseQuerySet, self).iterator():
      p.todays_price = self.todays_price
      yield p

class PurchaseManager(models.Manager):
  def get_query_set(self):
    return PurchaseQuerySet(self.model)

  def __getattr__(self, name)
    return getattr(self.get_query_set(), name)

class Purchase(models.Model):
  ticker = models.CharField(max_length=5)
  date = models.DateField()
  price = models.DecimalField(max_digits=20, decimal_places=3)
  quantity = models.IntegerField()

  objects = PurchaseManager()

  @property
  def gain(self):
    return self.todays_price - self.price 
```

现在我可以这样做：

```
for p in Purchase.objects.filter(ticker=ticker).get_with_todays_price(100):
  print p
  print p.gain 
```

# drupal - 在drupal中使用unicode进行GZIP压缩

> ID：10827679
> 
> 赞同：1
> 
> 时间：2012-05-31T05:01:03.520
> 
> 标签：drupal, unicode, gzip

我有一个印地语/马拉地语网站，并且我在 drupal 中应用了 gzip。但不知何故，它不适用于所有页面。我确实在[http://www.gidnetwork.com/tools/gzip-test.php](http://www.gidnetwork.com/tools/gzip-test.php)上检查过，它显示 gzip 和网页压缩为“是”。我看不到那里出现问题。谁能告诉如何在 drupal 中启用对 unicode 的支持？我是drupal的新手。请帮忙。

# html - 在父项内滚动子元素？

> ID：10827680
> 
> 赞同：0
> 
> 时间：2012-05-31T05:01:04.130
> 
> 标签：html, css

我有一个有两个孩子的父元素。一个孩子是一个动态的 ul，管理员可以随意添加和删除菜单链接。第二个孩子是一个滚动框，里面有提要。你可以把它想象成一个 Twitter 提要，因为它让我想起了它。

我遇到的问题是，由于我无法定义第一个孩子的身高，我无法让第二个孩子正确行事。我不想在父级上使用滚动条，但希望在第二个子级到达父级底部轴的末端时在第二个子级上有一个滚动条。到目前为止，我可以让父母有一个滚动条并在底部访问中切断第二个孩子，或者我可以让第二个孩子完全溢出父母。

谢谢。

```
<style>
.inline-block { display: inline-block; vertical-align: top; }
.nowrap { white-space: nowrap; }
#sidebar { width: 256px; padding: 11px 10px 10px; margin: 0 20px 0 0; border: 2px solid #969696; background: #e8e8e8; height: 636px; }
#ad_list { width: 244px; border: 1px solid #969696; padding: 6px 5px 5px; margin: 20px 0 0; overflow: auto; }
.ad_link { white-space: normal; margin-bottom: 10px; border-bottom: 1px solid #969696; padding-bottom: 10px; }
</style>

<aside id="sidebar" class="inline-block">
    <ul id="sidebar_links">
        <li class="link_button">Item 1</li>
        <li class="link_button">Item 2</li>
    </ul>
    <ul id="ad_list">
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
        <li class="ad_link"><a href="/">This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy. This is some ad copy.</a></li>
    </ul>
</aside> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:32:16.357

只需增加一个高度就可以`#ad_list`了。

```
#ad_list { height:500px; } 
```

# actionscript-3 - AS3 如何在舞台上看不到一组影片剪辑时切换到不同的场景？

> ID：10827685
> 
> 赞同：1
> 
> 时间：2012-05-31T05:01:18.010
> 
> 标签：actionscript-3, flash, flash-cs5

我正在制作一个应用程序，该应用程序的一部分非常简单，您有 4 个花瓣，然后您将所有 4 个花瓣都摘了下来，这会将您带到一个不同的场景，该场景显示一个徽标“再试一次”，出于某种原因，我什至无法追踪活动一次这些花瓣是在那个舞台上采摘的（每个花瓣都是一个电影剪辑）。我还通过类将movieclip作为变量写入AS3，我什至不知道这是否真的有必要，并且当movieclip“one”不可见并且这也不会发生时，我将句子“helloworld”进行跟踪。（我也尝试过数组，如果（“array”.visible == false 然后 gotoandplay “other scene” 得到相同的结果。）；“那个地方”是我在摘下花瓣后想去的场景。

这是我当前的代码，没有错误，但它不能像我希望的那样工作，因为它没有记录电影剪辑不可见，也没有转到另一个场景。

```
var one = new sunflowerpetal10;
var two = new sunflowerpetal12;
var three = new sunflowerpetal13;
var four = new sunflowerpetal14;
var five = new sunflowerpetal15;
var six = new sunflowerpetal16;

var hello:String;
hello = "helloworld";

if(one.visible == false, two.visible == false, three.visible == false, four.visible == false, five.visible == false, six.visible == false)
{
 trace(hello); 

 gotoAndPlay(1, "theplace");
} 
```

**请帮忙！** 我已经在舞台上的电影剪辑没有在 AS3 上注册吗？或者似乎是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:07:40.273

您在这里有很多错误，很难确定您实际上在做什么。Flash 在何处以及如何被引用方面非常令人困惑。

对于初学者，当你调用新的东西时，你需要给它加上括号。所以...

```
new sunflowerpetal15(); 
```

这假设您的库中有一个名为 sunflowerpetal15 的 MC，并且该标签是“导出到 actionscript”的方式，而不仅仅是它在库中的名称。

接下来你必须把这个项目实际放在舞台上

```
this.addChild(new sunflowerpetal15()); 
```

在您的 if 语句中，您的下一个是非法的。我认为您的意思是 && （逻辑与）在您的项目之间，但同样，不确定您在做什么）。

当所有这些都解决后，你*应该让它去播放第 1 帧，但我怀疑你从来没有离开过第 1 帧！所以......再次，我怀疑你不清楚你在这里做什么。

你*真正需要的是一个关于开始使用 Flash 和 AS3 的分步教程。你在地图上到处都是，Flash 是一个绝对错误的环境，如果没有一个好的指南就独自去，因为它非常不直观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:39:43.657

答案！：

每一个花瓣都有这个代码（这是一旦你点击它就使对象不可见的代码）：

```
sunflowerpetal1.addEventListener(MouseEvent.CLICK, fl_ClickToHide);

function fl_ClickToHide(event:MouseEvent):void
{
    sunflowerpetal1.visible = false;
} 
```

*   现在每次我试图做一个`if`声明，这样一旦所有的花瓣都消失了，它就会传递到另一个屏幕，它就不起作用了！

前任：

```
if(sunflowerpetal1.visible == false && sunflowerpetal2.visible == false && sunflowerpetal3.visible == false && sunflowerpetal4.visible == false && sunflowerpetal5.visible == false && sunflowerpetal6.visible == false)
{
    gotoAndPlay(1, "theplace");
} 
```

*   诀窍是把这个“if”语句放在每个花瓣当前代码的括号内，如下所示：

    sunflowerpetal1.addEventListener(MouseEvent.CLICK, fl_ClickToHide);

    函数 fl_ClickToHide(event:MouseEvent):void { sunflowerpetal1.visible = false;

    ```
    if(sunflowerpetal1.visible == false && sunflowerpetal2.visible == false && sunflowerpetal3.visible == false && sunflowerpetal4.visible == false && sunflowerpetal5.visible == false && sunflowerpetal6.visible == false) 
    ```

    { gotoAndPlay(1, "那个地方"); }

    }

*将“if”语句放在每个花瓣（或消失的对象）代码中，您将全部设置好，一旦单击所有花瓣（或电影剪辑），您将被发送到您命令它的场景。（在将您带到另一个名为`"theplace"`“再试一次”的屏幕之前，我需要点击 6 个花瓣）

**问题解决了=）**

# jquery - 追加使用 jquery 到表行

> ID：10827686
> 
> 赞同：0
> 
> 时间：2012-05-31T05:01:27.670
> 
> 标签：jquery, struts2

我们如何使用 jquery append 将 struts 标签添加到表中。我在我的操作中定义了一个列表，并将其用作标签的列表。我尝试过

```
$("tableid").append(
"<tr><td><s:select name='test' id='test'  list='listfromAction'/></td></tr>"); 
```

但它不起作用谁能告诉我这里缺少什么；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:03:45.110

上面的代码不起作用，因为您使用`"`不当。

如果您使用`append("`to 开始，那么您不能在`"`不转义它们的情况下再次使用，或者改为使用`apostrophes`.

```
$("tableid").append("<tr><td><s:select name='test' id='test' list='listfrmoAction'/></td></tr>"); 
```

这将正常工作。查看[jsFiddle 的实际应用](http://jsfiddle.net/fgUQ9/)。

*（注意：我没有使用自封闭标签，只是为了方便。虽然它们确实有效，但您可以删除并测试并查看。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T07:17:16.410

我面临同样的问题。上面的答案不能正常工作。标签被转换为正确的 html 标签，但浏览器（chrome）给出了解析问题。但是，如果您使用已解析的 html 代码并将其全部放在一行中。它完美地工作。所以问题是，据我所知，解析后的 html 代码有多行。

要解决这个问题..我正在做的是..您使用 struts 标签在 jsp 中创建一个示例行，使用 jquery 只需再追加这一行一次。像这样

`var tbody = document.getElementById("interfaceMessagesTable") .getElementsByTagName('tbody')[0]; tbody.append($("#onerow"));`

我的桌子是这样的 `<table id="interfaceMessagesTable" width="100%"> <tbody id="tableBody" valign="top"> <tr> <td> <s:select ..../> </td> </tr> </tbody> </table>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T00:30:50.690

对不起，但这个问题对我来说没有意义。

jQuery（和所有 JavaScript）在 HTML 生成之后运行。创建 strugs 标签会创建一些不会被 struts 解析的东西。

您需要生成由 struts 输出的 HTML，而不是 struts 标签

# java - Android自定义相机预览？

> ID：10827689
> 
> 赞同：0
> 
> 时间：2012-05-31T05:02:27.770
> 
> 标签：java, android, camera, android-camera

我正在`camera`为`android`. 我希望我的`camera preview`活动如下图所示（例如）。我想将我的`camera preview`活动分成四个或多个部分。

也就是在我点击一张图片后`camera`，当我回到我的（相机图像预览活动）`activity`时，我想把活动`screen`分成四个或更多部分，每个部分都应该有`preview image`。

这样做的原因是我想用图像`render-script`效果来试验每个预览[但该解决方案超出了我的问题范围，因为我知道如何使用渲染脚本]，并且每个部分都应该有单独`rendering`的 .

任何人都可以帮我找到解决方案吗？

![从相机拍照后，四个图像预览而不是一个](../Images/c4e88ac90b9545e49e0c03c9969c8aaf.png)

如果有任何示例或教程，这将是一个很大的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:13:06.720

经过努力，我找到了解决办法。啊啊啊！！！

相机.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <FrameLayout 
        android:id="@+id/preview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    </FrameLayout>
    <LinearLayout
        android:id="@+id/imageViewLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="gone"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" >

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1" >

                <ImageView
                    android:id="@+id/img1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:background="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1" >

                <ImageView
                    android:id="@+id/img2"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:background="@drawable/ic_launcher" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" >

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1" >

                <ImageView
                    android:id="@+id/img3"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:background="@drawable/ic_launcher" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="fill_parent"
                android:layout_weight="1" >

                <ImageView
                    android:id="@+id/img4"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:background="@drawable/ic_launcher" />
            </LinearLayout>
        </LinearLayout>
    </LinearLayout>

    <Button
        android:id="@+id/clickButton"
        style="@android:style/Animation.Translucent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="@string/click" />

</RelativeLayout> 
```

你的相机活动应该是这样的：我只发布我认为你应该关注的主要部分，其余部分你可以实现。如果你卡在某个地方，请问我。首先，您应该从您的活动中调用：

```
final Button clickButton = (Button) findViewById(R.id.clickButton);
            clickButton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(final View view) {
                    camera.takePicture(null, null, mPicture);
                }
            }); 
```

你的 onPictureTaken() 应该是这样的：

```
/**
     * This will be called after taking picture from camera.
     */
    final transient private PictureCallback mPicture = new PictureCallback() {
        /**
         * After taking picture, onPictureTaken() will be called where image
         * will be saved.
         * 
         */
        @Override
        public void onPictureTaken(final byte[] data, final Camera camera) {
            OutputStream outStream = null;
            try {
                outStream = new BufferedOutputStream(new FileOutputStream(
                        mGetFile));
                outStream.write(data); // Write the data to corresponding place.
                ((FrameLayout) findViewById(R.id.preview))
                        .setVisibility(View.GONE);
                ((LinearLayout) findViewById(R.id.imageViewLayout))
                        .setVisibility(View.VISIBLE);
                final Options options = new Options();
                options.inScaled = true;
                options.inPurgeable = true;

                // to scale the image to 1/8
                options.inSampleSize = 8;

                Bitmap imageBitmap = BitmapFactory.decodeByteArray(data, 0,
                        data.length, options);
                ImageView image1 = (ImageView) findViewById(R.id.img1);
                ImageView image2 = (ImageView) findViewById(R.id.img2);
                ImageView image3 = (ImageView) findViewById(R.id.img3);
                ImageView image4 = (ImageView) findViewById(R.id.img4);

                image1.setImageBitmap(imageBitmap);
                image2.setImageBitmap(imageBitmap);
                image3.setImageBitmap(imageBitmap);
                image4.setImageBitmap(imageBitmap);
            } catch (FileNotFoundException e) {
                camera.release();
            } catch (IOException e) {
                camera.release();
            } finally {
                try {
                    outStream.close();

                } catch (IOException e) {
                    camera.release();
                } 
            }
        }
    }; 
```

这将显示捕获的图像，就像您上面提到的那样。

谢谢 ：）

# reference - doxygen 显示无法解析的引用

> ID：10827692
> 
> 赞同：1
> 
> 时间：2012-05-31T05:03:02.230
> 
> 标签：reference, doxygen

有没有办法在 Doxygen 输出中显示对不可解析函数或全局变量的引用？它似乎只是隐藏了解析时找不到的所有内容。如果我能单独得到这些，那将是一个额外的好处——甚至作为日志文件的警告输出。

到目前为止，我已经尝试过：

```
REFERENCES_RELATION  = YES
HIDE_UNDOC_RELATIONS = NO      (i believe this is just for callgraph output?)   
HIDE_UNDOC_MEMBERS   = NO
# WARN_IF_UNDOCUMENTED = YES   (this only shows warnings for resolvable members with no docs)
EXTRACT_ANON_NSPACES = YES 
```

我希望用它来跟踪我想导入的一些旧代码中无法解析的引用，但到目前为止它并没有太大帮助）：

# php - PHP preg_replace 两个字符串之间的文本

> ID：10827693
> 
> 赞同：0
> 
> 时间：2012-05-31T05:03:07.207
> 
> 标签：php, regex

我有一个字符串，它的模式与下面的 $string 类似（从论坛帖子中提取）。

```
$string = "[quote=\"abc123\":27zslwh3]I don't agree with most of the statements made here.[/quote:27zslwh3] I don't think that is very nice of you.";
$pattern = "/\[quote\=.\*\[\/quote.*\]/";
$replace = "";

$updated_text = preg_replace($pattern,$replace,$string);
echo $updated_text; 
```

我正在尝试使用 preg_replace 删除开始和结束 [quote] 标记之间的所有文本并回显剩余的字符串：“我不认为你很好。” 仅（来自上面的 $string）。

我用于正则表达式的模式应该寻找开始 [quote] 标记的开头，然后搜索直到找到结束 [quote] 标记和标记的最后 ]。

上面的内容似乎无法正常工作，而且我对 reg 表达式不太精通，所以被困在这里。任何帮助，将不胜感激。

**.**

**注意：**我尝试了**draw010**和**bsdnoobz**提供的两个代码（感谢代码和解释），但它仍然不起作用。问题是我没有正确捕获 $string 文本。它应该读作：

```
$string = '[quote=&quot;abc123&quot;:27zslwh3]I dont agree with most of the statements made here.

abc123[/quote:27zslwh3]
I dont think that is very nice of you.'; 
```

双引号有 html 字符，并且似乎是换行符或回车符，这可能是阻止下面提交的正则表达式对我不起作用的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:07:34.173

```
$string = '[quote="abc123":27zslwh3]I don\'t agree with most of the statements made here.[/quote:27zslwh3] I don\'t think that is very nice of you.';
echo preg_replace('/\[quote.+?\].+?\[\/quote.+?\]/is', '',$string);
// will print: I don't think that is very nice of you. 
```

**注意：**输入字符串中有单引号和双引号。此示例用单引号包裹输入字符串，并转义字符串中的任何单引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:09:10.073

这是一个也有效的模式：

```
$pattern = '/\[quote[^\]]*\].*?\[\/quote[^\]]*\]/is'; 
```

它将匹配您所拥有的格式，或者只是简单的引号，例如`[quote]Text...[/quote]`

分解它：

`\[quote[^\]]*\]`表示匹配文本和*除*0 次或多次 以外`[quote`的任何字符 *`]`*

 *`\]`匹配`]`开始`[quote]`标签末尾的结束。

`.*?`匹配任何字符 0 次或更多次。在`?`这种情况下，这个匹配是不贪婪的（这意味着它将在它首先匹配模式的下一部分时停止，而不是最后一个。

`\[\/quote[^\]]*\]`然后匹配*除*0 次或多次以外`[/quote`的任何字符，最后我们消耗结束 *`]``]`**

# php - 如何使用 FuelPHP 框架获取参数 POST 或 GET 并在控制器中显示

> ID：10827694
> 
> 赞同：0
> 
> 时间：2012-05-31T05:03:15.413
> 
> 标签：php, fuelphp

当我想从 FuelPHP 框架中的方法 POST 或 GET 获取参数值时遇到问题 **我的问题**

1) 与`$_GET['params']`or相同`$_POST['params']`？如果同样我想我会做一些事情来保护它，我希望有任何自动功能来保护帖子并从fuelphp框架获取参数，有人知道吗？

2）我如何在控制器中显示该参数？我只是尝试像这样使用

```
 /*
        * for getting request param for client and save to database
        */
       public function action_input(){
        echo Input::post('name');                                                                                                                                                 
        } 
```

但我得到这样的错误

```
Fuel\Core\FuelException [ Error ]: The controller action called or it's after() method must return a Response object. 
```

我该如何解决？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:07:54.657

[http://docs.fuelphp.com/classes/input.html](http://docs.fuelphp.com/classes/input.html)

```
<?php echo Input::post('foo') ?>
```

其中“foo”是您的 POSTed 参数。

使用“视图”（如上面评论中的建议）来显示您的响应或在您的控制器操作中执行以下操作。

```
返回新的响应（输入::post(<your_parameter_here>));
```

主要原因是文档中引用的。
[http://docs.fuelphp.com/general/controllers/base.html](http://docs.fuelphp.com/general/controllers/base.html)

“控制器操作必须返回一个响应对象。您可以选择指定特殊的 HTTP 标头或自定义 HTTP 状态代码（“200 OK”以外的代码）。

如果您的控制器扩展了基本控制器之一，您的操作还可以返回任何可以转换为字符串的值，例如 View 对象。基本控制器的 after() 方法将为您将其转换为 Response 对象。

如果您的控制器没有扩展基本控制器之一，并且您想使用此功能，则您的控制器必须包含它自己的 after() 方法，该方法将接受操作返回值，并且必须将其包装到它必须的 Reponse 对象中返回。"

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T05:08:01.757

请看一下fuelPHP中的这个[POST方法](http://docs.fuelphp.com/classes/input.html#/method_post)

# git - Git：计数自标记以来的提交

> ID：10827695
> 
> 赞同：7
> 
> 时间：2012-05-31T05:03:20.513
> 
> 标签：git

我正在尝试计算自标记以来的提交次数。

我尝试过使用`git rev-list`，但无论我尝试什么，它似乎都会返回相同的结果。这是我尝试过的：

```
$ git rev-list 1.7Start^..HEAD | wc -l
13902
$ git rev-list HEAD | wc -l
13902 
```

试图计算自 1.7Start 标签创建以来的提交次数。我目前正在`master`使用`HEAD`，但使用`git rev-list master | wc -l`给了我同样的结果。

自 1.7 以来没有超过 13000 次提交

应该`git rev-list master`向我展示 master 中的每一个提交，从而产生一个更大的数字，而不是`1.7Start^..master`应该给我带来差异的数字吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T05:45:38.583

您得到的结果表明`1.7Start^`and之间没有共同的历史记录`HEAD`，因此`1.7Start`and`HEAD`必须具有不同的根提交。`a..b`（传递给的语法仅表示“不在 . 中的`git rev-list`每个提交。）`b``a`

在上面的评论中，提问者指出这是因为存储库是从 Subversion 迁移的，并且与指向`master`的导入分支完全不同`1.7Start`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-03T00:50:04.740

Git 有 git rev-list --count 比 wc-l 更快。

git 后期版本中还有 git rev-list --use-bitmap-index --count ，是对 --count 的优化。

rev-list 需要一个提交，举个例子，在你的 repo 中为你当前的分支找到所有提交。

```
git rev-list --count HEAD 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-22T17:50:22.137

如果您只关心**最后一个标签**，通常`git describe`会告诉您**最后一个标签是什么以及自它以来在当前分支中进行了多少次提交**。例如，在下面的输出中，最后一个标签是 0.1.9，并且在当前分支中进行了 67 次提交。

```
$ git describe --tags

0.1.9-67-gff9fd30 
```

为了验证，您可以使用以下命令查看完整的提交列表。

```
$ git log --oneline $(git describe --tags --abbrev=0).. 
```

如果将其输出通过管道传输到`wc -l`，则应返回相同的计数。请注意，这`!!`是 Bash 中的前一个命令。

```
$ !! | wc -l

67 
```

# python - FormView：视图没有返回 HttpResponse 对象

> ID：10827696
> 
> 赞同：1
> 
> 时间：2012-05-31T05:03:23.753
> 
> 标签：python, django, django-generic-views

我知道这是由于视图的代码路径显然不返回`HttpResponse`. 我是 django 的新手，所以这可能是完全错误的。

这是 FormView 代码。我需要覆盖`render_to_response`吗？

```
class AddAdvertView(FormView):
    form_class = NewAdForm

    def get(self, *args, **kwargs):
            self.campaign = get_object_or_404(Campaign, id__exact = self.kwargs['campaign_id'])

    def post(self, request, *args, **kwargs):
            pass

    def get_form(self, form_class):
            return form_class(initial = {}, campaign = self.campaign)

    def get_success_url(self):
            return self.request.META.get('HTTP_REFERER', None)

    def form_valid(self, form):
            return HttpResponse('form valid')

    def form_invalid(self, form):
            return HttpResponse('form invalid') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T06:37:59.263

这可能是您在`get`方法中想要的：

```
 def get(self, *args, **kwargs):
     campaign = get_object_or_404(Campaign, id=self.kwargs['campaign_id'])
     ctx = self.get_context_data()
     ctx['campaign'] = campaign
     return self.render_to_response(ctx) 
```

如果你不做任何事情`post`，你不应该有一个方法来覆盖它。同样，您不需要覆盖`get_form`.

基于类的视图在 django 中是新的，它们的文档与其他组件不相称；希望这会很快改变。目前，了解基于类的视图如何工作的最佳位置是查看它们的 mixin 提供了什么。

对于[`FormView`](https://docs.djangoproject.com/en/dev/ref/class-based-views/#formview)，mixin 是[`FormMixin`](https://docs.djangoproject.com/en/dev/ref/class-based-views/#django.views.generic.edit.FormMixin)和[`ProcessFormView`](https://docs.djangoproject.com/en/dev/ref/class-based-views/#django.views.generic.edit.ProcessFormView)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T06:07:57.123

`post`您至少应该从和`get`方法返回一些东西`super(AddAdvertView, self).get(*args, **kwargs)`。在您的代码中`get`刚刚创建了一个属性（尽管它应该返回一个空表单），并且`post`什么都不做（尽管它应该处理表单）。看来您根本不应该重新定义`post`和`get`，并在`dispatch`方法中检索您的活动（不要忘记调用`super(AddAdvertView, self).dispatch(dispatch arguments)`）

# solr - Solr，在数据导入期间无法执行查询

> ID：10827699
> 
> 赞同：0
> 
> 时间：2012-05-31T05:03:31.757
> 
> 标签：solr, data-import

我使用许多表进行索引。这些表也被爬虫用于在数据导入期间插入、更新。

在数据导入期间，我收到一些表的错误，例如“无法执行查询”。但是下一次，当我尝试为该表导入数据时，我可以成功完成而不会出现任何错误。

```
[Thread-17] ERROR o.a.s.h.d.EntityProcessorWrapper - Exception in entity : 
test_5:org.apache.solr.handler.dataimport.DataImportHandlerException: 
Unable to execute query: 
SELECT Title, url, synonym, description FROM test_5 WHERE status in ('1','s')  Processing Document # 11046

at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAndThrow(DataImportHandlerException.java:72)
at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.<init>(JdbcDataSource.java:253)
at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:210)
at org.apache.solr.handler.dataimport.JdbcDataSource.getData(JdbcDataSource.java:39)
at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:59)
at org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:73)
at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:238)
at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:596)
at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:268)
at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:187)
at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:359)
at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:427)
at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:408)

Caused by: java.sql.SQLException: ResultSet is from UPDATE. No Data.
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
at com.mysql.jdbc.ResultSetImpl.next(ResultSetImpl.java:7152)
at com.mysql.jdbc.ConnectionImpl.loadServerVariables(ConnectionImpl.java:3870)
at com.mysql.jdbc.ConnectionImpl.initializePropsFromServer(ConnectionImpl.java:3407)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2384)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.GeneratedConstructorAccessor12.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
at org.apache.solr.handler.dataimport.JdbcDataSource$1.call(JdbcDataSource.java:161)
at org.apache.solr.handler.dataimport.JdbcDataSource$1.call(JdbcDataSource.java:128)
at org.apache.solr.handler.dataimport.JdbcDataSource.getConnection(JdbcDataSource.java:363)
at org.apache.solr.handler.dataimport.JdbcDataSource.access$200(JdbcDataSource.java:39)
at org.apache.solr.handler.dataimport.JdbcDataSource$ResultSetIterator.<init>(JdbcDataSource.java:240)
... 11 more 
```

我在 data-config.xml 中设置了 connettimeout、readtimeout，但我经常收到此错误。如果我使用其他进程（插入、更新、删除）使用的数据导入表，我会收到这样的错误吗？如何索引我的所有表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:53:34.180

尝试在 data-config.xml 文件中设置“readOnly=True”。

```
 <dataSource 
    type="JdbcDataSource"  
    driver="com.mysql.jdbc.Driver" 
    url="jdbc:mysql://my.ip/my_db" 
    user="my_db_user" 
    password="my_password" 
    readOnly="True"
  /> 
```

# ruby-on-rails-3.2 - ajax 不适用于具有生产环境的 Rails 3.2

> ID：10827702
> 
> 赞同：0
> 
> 时间：2012-05-31T05:03:35.577
> 
> 标签：ruby-on-rails-3.2

每个人。

我创建了一个新项目和脚手架。当我使用 'RAILS_ENV=production rails s' 执行 rails 服务器时，ajax 似乎不起作用。

> 轨道新的testpro
> 
> cd testpro
> 
> rails g 脚手架 用户名：字符串 电子邮件：字符串
> 
> rake 资产：预编译
> 
> RAILS_ENV=生产 rake db:migrate
> 
> RAILS_ENV=生产轨道 s

我添加了一条记录，然后返回索引页面。我可以看到记录并显示、编辑、销毁链接。当我单击销毁链接时，它只显示记录。似乎链接工作得到请求。

它应该弹出删除确认。

Webrick 报告以下消息。

> 在 2012-05-31 14:02:12 +0900 开始 GET "/assets/application-f79f879edae5d837e15161fba0ee9d3d.js" 为 127.0.0.1
> 
> ActionController::RoutingError (没有路由匹配 [GET] "/assets/application-f79f879edae5d837e15161fba0ee9d3d.js"):

实际上，我在其他项目中遇到了同样的问题，并尝试用一个普通的项目来澄清问题。

我的环境如下： Rails 3.2.3 ruby​​ 1.9.3p125 sqlite3

其他项目：Rails 3.2.0 ruby​​ 1.9.3p125 MySQL Apache2 + Passenger

佑介。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:21:17.410

production.rb 中的 config.serve_static_assets = true 对新项目效果很好。

至于我的项目，我修改了 application.js 并且我的项目运行良好。

前：

```
//= require twitter/bootstrap
//= require jquery  
//= require jquery_ujs 
```

后：

```
//= require jquery  
//= require jquery_ujs  
//= require twitter/bootstrap 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:17:55.447

我相信你根本没有预编译你的资产

```
rake assets:precompile 
```

默认情况下，在生产模式下，资产编译所需的 gem 不会被加载，并且假定资产已被预编译成可以以最快速度提供服务的文件。

# r - R中的条件和

> ID：10827705
> 
> 赞同：6
> 
> 时间：2012-05-31T05:03:47.540
> 
> 标签：r, conditional, sum

我有一个 200 行 x 6 列的数据框。我有兴趣计算 Col A 中的值小于特定数字的总次数。该号码可以是硬编码的。我不知道从哪里开始...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-09T13:31:25.227

对于稍微复杂一点的问题，使用“which”来告诉“sum”在哪里求和：如果 DF 是数据框：

```
 Ozone Solar.R  Wind Temp Month Day
 1      41     190  7.4   67     5   1
 2      97     267  6.3   92     7   8   
 3      97     272  5.7   92     7   9 
```

示例：汇总 Solar.R（第 2 列）的值，其中 Column1 或 Ozone>30 AND Column 4 或 Temp>90

```
sum(DF[which(DF[,1]>30 & DF[,4]>90),2]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T05:20:27.407

要计算有多少值低于某个数字，您可以使用`?sum`

```
sum( df$columnA < NUMBER ) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T05:22:22.290

只需根据您的情况使用 sum 即可。逻辑值转换为 0 表示 FALSE，1 表示 TRUE，因此对逻辑求和可以告诉您有多少值是 TRUE。

```
 dat <- as.data.frame(matrix(1:36,6,6))
 colnames(dat) <- paste0("Col", LETTERS[1:6])
 dat$ColA
# [1] 1 2 3 4 5 6
 dat$ColA < 3
# [1]  TRUE  TRUE FALSE FALSE FALSE FALSE
 sum(dat$ColA < 3)
# [1] 2 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-09-20T14:43:18.473

虽然答案`sum( df$columnA < NUMBER )`是正确的，但稍微扩展一下可能会更好。

假设您想对值求和而不是计数，您可以使用：

`sum(df[df$columnA < Number,]$columnA)`

或者如果有`NA`值使用：

`sum(df[df$columnA < Number,]$columnA, na.rm=TRUE)`
`sum(df[(df$columnA < Number)&(!is.na(df$columnA)),]$columnA)`

基本上发生的情况是您创建了一个基于您的条件的具有 TRUE/FALSE 的 columnA 的布尔向量。然后，您将获取原始数据帧的一个子集，并在这种情况下使用它来对 columnA 进行求和。

这是一个您可以用来尝试的示例：

```
df = data.frame(colA=c(1, 2, 3, 4, NA), colB=c('a', NA, 'c', 'd', 'e'))

# Count
sum(df$colA) # NA
sum(df$colA, na.rm=TRUE) # 10 This is actually sum of values since colA wasn't turned into vector of booleans
sum(df$colA > 0, na.rm=TRUE) # 4
sum(df$colA > 2, na.rm=TRUE) # 2
sum((df$colA > 2) & (df$colB == 'd'), na.rm=TRUE) # 1

# Sum of values
sum(df$colA, na.rm=TRUE) # 10
sum(df[df$colA > 0,]$colA, na.rm=TRUE) # 10
sum(df[df$colA > 2,]$colA, na.rm=TRUE) # 7
bn_vector = (df$colA > 2)&(df$colB=='d') # Boolean vector
sub_df = df[bn_vector,] # Subset of the dataframe. Leaving the second argument in [] empty uses all the columns
sub_df_colA = df[bn_vector, 'colA'] # Content of column 'colA' which is vector of numbers
sum(sub_df$colA) # 4
sum(sub_df_colA) # 4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-26T21:13:56.153

> 臭氧<-c(41,97,97)
> 
> Solar.R<-c(190,267,272)
> 
> 风<-c(7.4,6.3,5.7)
> 
> 温度<-c(67,92,92)
> 
> 月<-c(5,7,7)
> 
> 日<-c(1,8,9)
> 
> tbl<-data.frame（臭氧、太阳能、风、温度、月、日）
> 
> 表

臭氧 | 太阳能.R | 风 | 温度 | 月 | 第 1 天 41 | 190 | 7.4 | 67 | 5 | 1 2 97 | 267 | 6.3 | 92 | 7 | 8 3 97 | 272 | 5.7 | 92 | 7 | 9

> sum(tbl$Temp) / sum(!is.na(tbl$Temp))

[1] 84

# javascript - 如何使用 javascript 或其他方式清除 IE DNS 缓存？

> ID：10827711
> 
> 赞同：1
> 
> 时间：2012-05-31T05:04:34.517
> 
> 标签：javascript, internet-explorer, dns

我想清除 InternetExplorer DNS 缓存 usnig javascript 或其他。不是本地 DNS 缓存。

我知道 IE 进程正在自己的缓存中缓存 DNS。

是否有任何 javascript 代码可以清除 IE 的 DNS 缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T01:27:49.643

关于浏览器缓存的一些背景以及从中删除内容的难度：

[http://dyn.com/web-browser-dns-caching-bad-thing/](http://dyn.com/web-browser-dns-caching-bad-thing/)

# php - 保存加密/解密密钥的最佳方法？

> ID：10827714
> 
> 赞同：3
> 
> 时间：2012-05-31T05:04:39.547
> 
> 标签：php, encryption

我正在开发一个 wordpress 插件。在该插件中，用户需要输入一些重要的登录详细信息，我将在 cron-job 中使用这些详细信息。

我当然喜欢加密密码，并发现了这个有用的东西： [使用 PHP 加密和解密密码的最佳方法？](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)

但是，我应该如何保存密钥？我无法将其保存在文件中，因为当用户更新插件时所有文件都将被替换。并将其保存在数据库中，好吧 - 我猜这不太聪明。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:52:32.237

如果您加密，您仍然必须将加密密钥存储在同一台机器上 - 只有代码混淆才能**减缓**攻击的发生。

在最好的情况下，只有您的数据库容易受到攻击，在这种情况下，将加密的密码存储在数据库中并将密钥存储在文件系统中并不是一个糟糕的解决方案。

最坏的情况是，系统被彻底破坏。在这种情况下，如果您必须将密钥存储在显而易见的地方，那么再多的加密也无法挽救您。混淆可能会使事情复杂化，给所有者足够的时间来保护帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:35:45.497

如果您将密钥保存在数据库表上，我认为它会更好。关于部分*`securing the database and making sure that the data in the table will only be accessible by the authorized person`*，您可以创建第二个用户，具有访问和读取此类重要表的权限。

因此，创建一个单独的用户，该用户将有权访问表及其内容。现在，当您需要访问加密密钥和其他重要信息时，以不同的用户使用该网站并切换到管理数据库用户。

# asp.net - 如何在 GridView ItemTemplate 中为 ImageButton 添加更新命令？

> ID：10827718
> 
> 赞同：0
> 
> 时间：2012-05-31T05:05:06.903
> 
> 标签：asp.net, vb.net, gridview, imagebutton

我有点迷路了。

我有一个带有 ItemTemplate 的 GridView。我正在尝试使用 ImageButton 批准和拒绝预订，但我不知道在哪里以及如何放置 sql 命令来更新预订状态。

我需要提示来继续我的编码。

这是我的接受和拒绝图像按钮的 ItemTemplate：

```
<asp:TemplateField HeaderText="Action">
<ItemTemplate>
<asp:ImageButton runat="server" ID="acceptBooking"
         ImageUrl="~/images/accept.png"
  OnClientClick="if (!window.confirm('Are you sure you want to accept this booking?')) return false;" />
</ItemTemplate>                                  
</asp:TemplateField>

<asp:TemplateField HeaderText="Action">
<ItemTemplate>
<asp:ImageButton runat="server" ID="rejectBooking"
         ImageUrl="~/images/reject.png"
  OnClientClick="if (!window.confirm('Are you sure you want to reject this booking?')) return false;" />
</ItemTemplate>                                  
</asp:TemplateField> 
```

我的 SQL 数据源：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>"
            SelectCommand="SELECT [bookingScheduleID], [eventTitle], [week1], [week2], [week3], [week4], [week5], [week6], [week7], [week8], [exhibitorname], [boothAlias], [category], [status], [dateBook],[custNo] FROM [bookingschedule]" 
          >
        </asp:SqlDataSource> 
```

我希望从表 [bookingschedule] 更新字段 [status]

我的界面： ![在此处输入图像描述](../Images/45a7b3277d9e36dd37c63a121198e282.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:22:16.530

您是否有任何服务器端代码来处理 OnClientClick 事件？如果是这样，您只需在其中执行 SQL 逻辑，同时获取您询问的确认结果。否则，请制作一个 js 脚本来处理 SQL 逻辑......我只是希望您可以访问某种 [bookingschedule] 的 ID，如果您想更新一个。

无论如何，到您将代码放在哪里：在 OnClientClick 事件的处理中。如何更多由您决定。您可以在库中使用`SqlClient`库`System.Data`。或者使用 LINQ 技术甚至 Hibernate。一切都取决于你。在互联网上进行一些研究，你会很高兴的。

# php - 在没有页面刷新的情况下更新 PHP 中的字符串，AJAX 类型函数

> ID：10827719
> 
> 赞同：0
> 
> 时间：2012-05-31T05:05:32.213
> 
> 标签：php, ajax

我想看看是否有办法在 PHP 中执行类似的任务。当单击提交按钮时，我使用 javascript 将“boldStuff”id 中的字符串更新为另一个字符串，在本例中为用户名。重要的概念是包含“boldStuff”的页面或部分会在不刷新页面的情况下更新。基本上，我想在 PHP 中执行类似的功能，而无需在每次有人单击提交按钮时刷新页面。任何帮助，将不胜感激。

```
<script type="text/javascript">

function displayMessage(firstName, lastName) {
document.getElementById('boldStuff').innerHTML = firstName + " " + lastName; //prints

}
</script>

<p>Welcome to my website, <b id='boldStuff'>dude</b> </p> 
</br>

<div id="hg">

<form>
First name:
<input type="input" name="yourName" /> </br>
First name:
<input type="input" name="yourLast" /> </br>
<input
type="button"
onclick="javascript:displayMessage(form.yourName.value, form.yourLast.value)"
value="Display Message" />
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:25:31.413

PHP 在服务器上运行，而不是在浏览器中。它无法直接与浏览器中加载的页面进行交互。PHP 可以生成一个页面并将其发送到浏览器进行显示，但这就是故事的结尾。如果您想在不重新加载的情况下操作页面，则需要客户端技术。这意味着 99.9% 的情况下使用 Javascript。

如果您需要来自服务器的某些东西，您可以使用 Javascript 获取 PHP 脚本的结果并将其插入您的页面而无需重新加载，但是，即使涉及 PHP，所有客户端操作都将由 Javascript 执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:20:35.983

您的 html 文件应该类似于：

```
<html>
<head>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" >
$(document).ready(function(){
    $("form#submit").submit(function() {
    // we want to store the values from the form input box, then send via ajax below
    var fname     = $('#fname').attr('value');
    var lname     = $('#lname').attr('value');
    $.ajax({
            type: "POST",
            url: "ajax.php",
            data: "fname="+ fname +"&amp; lname="+ lname,
            success: function(){
                $('form#submit').hide(function(){$('div.success').fadeIn();});

            }
        });
    return false;
    });

});
</script>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
<title>Insert title here</title>
</head>
<body>
<form id="submit" method="post">
<fieldset><legend>Enter Information</legend> 
<label for="fname">Client First Name:</label>
 <input id="fname" class="text" type="text" name="fname" size="20" />
  <label for="lname">Client Last Name:</label> 
  <input id="lname" class="text" type="text" name="lname" size="20" /> 
  <button class="button positive">  Add Client </button>
  </fieldset>
</form>
<div class="success" style="display: none;">Client has been added.</div>
</body>
</html> 
```

和 ajax.php

```
<?php

    include ("../../inc/config.inc.php");

    // CLIENT INFORMATION
    $fname        = htmlspecialchars(trim($_POST['fname']));
    $lname        = htmlspecialchars(trim($_POST['lname']));

    $addClient  = "INSERT INTO clients (fname,lname) VALUES ('$fname','$lname')";
    mysql_query($addClient) or die(mysql_error());

?> 
```

我从 [在此处输入链接描述][1] 复制此代码

[1]：[http](http://www.ryancoughlin.com/2008/11/04/use-jquery-to-submit-form/) ://www.ryancoughlin.com/2008/11/04/use-jquery-to-submit-form/ 我测试过。

# html - Facebook Like 按钮和 Google Plus Badge 在 HTML 表格中不起作用

> ID：10827730
> 
> 赞同：1
> 
> 时间：2012-05-31T05:07:09.040
> 
> 标签：html, facebook, facebook-like

我想在我的网站上使用 facebook Like 按钮和 Google+ 徽章。为此，我添加了此代码：

```
<table align='right'>
    <tr>
        <td align='right'>
        <div class="fb-like" data-href="https://www.facebook.com/RideForHealth" data-send="true" data-layout="box_count" data-width="100" data-show-faces="true"></div>

        </td>
        <td>
        <g:plus href="https://plus.google.com/107539471286877449345" rel="publisher" width="300" height="131" theme="light"></g:plus>
        </td>

    </tr>
</table> 
```

但这不起作用。我单击按钮，但没有任何反应。当我删除 HTML 表格时，两者都可以正常工作。这是我使用它的[网站。](http://ride4health.weebly.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:12:48.967

我想说试试这个插件的谷歌徽章

我在我的 wordpress 上使用它，它对我有用..

[http://wordpress.org/extend/plugins/kd-google-plus-badge/](http://wordpress.org/extend/plugins/kd-google-plus-badge/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:17:10.063

我想你忘记在你的脑海中添加这个js......

```
 (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })(); 
```

# jquery - 带有单选按钮的 Jquery 未选中复选框

> ID：10827733
> 
> 赞同：1
> 
> 时间：2012-05-31T05:07:11.583
> 
> 标签：jquery, checkbox, radio-button, implementation

使用 jQuery，我隐藏了所有复选框和单选按钮，并使用 CSS`background`来指示主题状态。我想取消选中所有带有单选按钮的复选框，但我的实现将不起作用，因为尽管 CSS 已更改，但我的复选框仍处于选中状态：

```
 var fliter_radio=$(".item input[name='group1_radio']");
 var fliter_checkbox=$(".item input[name='group1']");

 fliter_radio.next().click(function(){
                          $(this).prev()[0].checked=true; 
                          $(this).addClass("checked");

                          //#unchecked all checkbox
                          fliter_checkbox.each(function(){
                                 $(this).checked=false;
                                 $(this).next().removeClass("checked"); 
                          })
  })

<li class="item"><input type="radio" id="radio" name="group1_radio" checked="checked" value="unchecked" /><strong>radio button</strong></li>
<li class="item"><input type="checkbox" id="CheckBox1" name="group1" value="news" /><strong>Checkbox1</strong></li>
<li class="item"><input type="checkbox" id="CheckBox2" name="group1" value="news" /><strong>Checkbox2</strong></li> 
```

我在这里重写了一个完整的演示：http: [//jsfiddle.net/badjohnny/MnujS/8/](http://jsfiddle.net/badjohnny/MnujS/8/)

你能帮我正确实施吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T05:14:30.773

`$(this).checked=false;`到`$(this).prop("checked",false);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:17:17.893

```
$(document).ready(function() {
    function custom_uncheck(radio, checkbox) {
        var fliter_checkbox = $(checkbox);
        var fliter_radio = $(radio);

        fliter_checkbox.hide();
        fliter_radio.hide();

        fliter_radio.next().on('click', function() {

            $(this).addClass('checked')  // add checked class to strong
                  .prev().prop('checked', true); // make check the radio

            fliter_checkbox.prop('checked', false)   // make checkbox uncheck
                   .next('strong').removeClass('checked');  // remove checked class

        }).click();  // trigger the initial click

        fliter_checkbox.next('strong').on('click', function() {// click on checkbox
            $(this).toggleClass('checked')  // changing checked class
                  .prev()  // go to checkbox
                  .prop('checked', function() { // change checkbox check status
                                return !this.checked;
                           });
            // make uncheck the radio and remove checked class from strong
            fliter_radio.prop('checked', false).next().removeClass('checked');
        });
    }
    custom_uncheck('input[name="all"]', 'input[name="c"]');
})​; 
```

**[工作样本](http://jsfiddle.net/MnujS/14/)**

# c# - 在其上绘制文本时图像质量低（C#）

> ID：10827734
> 
> 赞同：1
> 
> 时间：2012-05-31T05:07:32.167
> 
> 标签：c#, image, image-processing

我将创建一个位图图像并绘制一个文本，但是用于打印目的的图像质量很低，并且像素是可见的，并且不像我通过 Microsoft Word 打印时那样。

出于几个原因，我不想使用 PrintDocument。

抗锯齿也没有帮助我，我尝试了所有图像类型（Tif、bmp、png）

以下是我们使用的部分代码。

```
MyBitmap = new System.Drawing.Bitmap(GetMaxWidthOfReport(), MyActualPageSizeInfo.Height);

Mygraphics =System.Drawing.Graphics.FromImage(MyBitmap);

Mygraphics.TextContrast = 4;
Mygraphics.PageUnit = System.Drawing.GraphicsUnit.Display; 
Mygraphics.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.AntiAlias; 
Mygraphics.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality; 
Mygraphics.CompositingMode = System.Drawing.Drawing2D.CompositingMode.SourceOver; 
Mygraphics.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality; 
Mygraphics.InterpolationMode =     System.Drawing.Drawing2D.InterpolationMode.HighQualityBilinear; 

Mygraphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.ClearTypeGridFit; 
```

如果您有任何解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:30:01.870

请尝试以下方法：

```
var bmp = new Bitmap(300, 100, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
using(Graphics g = Graphics.FromImage(bmp)) {
    g.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
    System.Windows.Forms.TextRenderer.DrawText(g, 
        @"low image quality when draw text on it", Font, new Point(10, 10), Color.Black);
} 
```

# android - 如何创建包含引用库的 Android 库项目？

> ID：10827736
> 
> 赞同：1
> 
> 时间：2012-05-31T05:07:39.767
> 
> 标签：android

我想创建一个通用的 Android 库（jar）。所以我在 Eclipse 中创建了一个 Android 库项目。在这个项目中，我包含了一些其他开源库（jar），它们在 Android 库项目中的引用库下指定。主jar文件是在bin选项下生成的。但是当我将bin选项下的jar文件用于其他android应用程序时，引用的库选项不起作用。引用库中的方法不包含在jar文件中。我该如何创建一个 jar 文件，包括 Eclipse Android 中的引用库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:11:46.650

首先将您的库项目声明为库：右键单击项目 -> 属性 -> Android -> 在底部标记“Is Library”。

该项目的构建路径中应该有第 3 方 jars（属性 -> 构建路径 -> 添加 Jar / External Jar）。

现在，要在另一个项目中使用这个库和jar，你不能直接使用bin下的jar。您必须将此项目用作库项目，方法是转到项目的属性 -> Android -> 单击右下角的“添加”并选择库项目。这（假设您使用的是最新的 ADT 插件）将在您的项目中创建依赖项，该依赖项将包含库项目和外部 jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:44:02.500

我有一个类似的问题，我的应用程序使用 maven 来管理依赖项。我使用以下技术解决了它

1.  创建一个 android 项目并将其标记为库项目。

2.  使用 m2 eclipse 插件并使用 Project -> 右键单击​​ -> 配置 -> 转换为 maven 项目将项目转换为 maven

3.  使用 Project -> 右键单击​​ -> Maven -> 添加依赖项向此项目添加依赖项

4.  验证您需要的依赖项是构建路径的一部分，并且在构建路径设置的“订购和导出”面板下可用。

5.  使用另一个android项目中的库项目。

您可以用来检查 Android 是否选择您的 3rd 方类的一种技巧是在您的目标项目上创建一个具有相同包名称的重复类。例如，如果您使用 org.apache.Logger，请在您的 android 应用程序上创建另一个 org.apache.Logger。如果Android抱怨由于重复而无法制作apk，那么您就在正确的轨道上

> java.lang.IllegalArgumentException：已添加：Lcom.your.class.name

**参考：**

[http://developer.android.com/tools/projects/index.html#LibraryProjects](http://developer.android.com/tools/projects/index.html#LibraryProjects)

[Java Eclipse Android 初学者问题 - 如何添加库或链接文件夹。初学者参考](https://stackoverflow.com/questions/5991299/java-eclipse-android-beginner-question-how-to-add-libraries-or-linked-folder/5991535#5991535)

[http://developer.android.com/tools/projects/projects-eclipse.html](http://developer.android.com/tools/projects/projects-eclipse.html)

# iphone - UItable 视图不会滚动我想像标题一样使用的第一行，而且我已经有了部分标题

> ID：10827738
> 
> 赞同：2
> 
> 时间：2012-05-31T05:07:47.653
> 
> 标签：iphone, ios, ios4, ios5

如何在 iPhone SDK 中将 UITableview 的第一行设为静态（非滚动）？就像第一行将是静态的。

现在第一行是我的标题，我希望它需要是静态的意味着不能滚动？我已经有了节标题，因为我有行数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:36:20.297

只需制作 2 个表格视图 - 一个在您的视图顶部，带有不可滚动的单元格，第二个 - 在第一个下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:36:31.273

在下面的代码中，我正在为标题部分创建一个视图并添加标签和按钮..

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    // create the parent view that will hold header Label
    if (customView == nil) {
        customView = [[UIView alloc] initWithFrame:CGRectMake(10.0, 0.0, 300.0, 44.0)] ;
        // create the button object
        headerLabel = [[UILabel alloc] initWithFrame:CGRectZero];

        headerLabel.backgroundColor = [UIColor clearColor];
        headerLabel.opaque = NO;
        headerLabel.textColor = [UIColor blackColor];
        headerLabel.highlightedTextColor = [UIColor whiteColor];
        headerLabel.font = [UIFont boldSystemFontOfSize:20];
        headerLabel.frame = CGRectMake(10.0, 0.0, 300.0, 44.0);

        // If you want to align the header text as centered
        // headerLabel.frame = CGRectMake(150.0, 0.0, 300.0, 44.0);

        headerLabel.text = [NSString stringWithFormat:@"Child: Name"];

        [customView addSubview:headerLabel];  

        UIButton *aReportButton = [UIButton buttonWithType:UIButtonTypeCustom];
        aReportButton.frame = CGRectMake(270, 3, 38, 38);
        [aReportButton setImage:[UIImage imageNamed:@"pdf_document.png"] forState:UIControlStateNormal];
        [aReportButton addTarget:self action:@selector(createPDF:) forControlEvents:UIControlEventTouchUpInside];
        [customView addSubview:aReportButton];
        aVoiceRecordingButton = [UIButton buttonWithType:UIButtonTypeCustom];
        aVoiceRecordingButton.frame = CGRectMake(220, 3, 38, 38);
        [aVoiceRecordingButton setImage:[UIImage imageNamed:@"microphone_document.png"] forState:UIControlStateNormal];
        [aVoiceRecordingButton addTarget:self action:@selector(alertBeforeRecord:) forControlEvents:UIControlEventTouchUpInside];

        [customView addSubview:aVoiceRecordingButton];
    }

    return customView;
}

- (CGFloat) tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 44.0;
} 
```

在您的情况下，您必须增加表格部分标题高度以包括您的部分标题和您的第一个内容的`UITableViewCell`内容。希望这会有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:09:10.867

需要为第一个 tableviewCell 获取自定义视图并在 Header sectionView 中添加子视图

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

在标题视图下方设置自定义视图框架，并为标题视图正确设置剪辑绑定 NO。在标题视图中添加子视图自定义视图之后。

希望这会有所帮助。

# jquery - 如何在 jquery 自动完成组合框中触发搜索？

> ID：10827742
> 
> 赞同：0
> 
> 时间：2012-05-31T05:08:35.330
> 
> 标签：jquery, autocomplete, combobox, jquery-autocomplete

我正在使用 jquery 组合框并依赖那里提供的源代码。我需要从远程源提供的数据，所以我将它与 ajax 连接起来。但是，由于 AJAX 是异步调用，因此我需要使用搜索结果数据更新组合框。

> 如何触发组合框上的搜索？

片段：

```
/* In 
$.widget( "ui.combobox", {
            _create: function() {
// input definition
*/
.autocomplete({
    delay: 0,
    minLength: 0,
    source: function( request, response ) {
        // implements retrieving and filtering data from the select
        var term = request.term;

        if(term.length >= 2){
            var abbreviation = term.substring(0,2);
            if(!(abbreviation in cache)){
                searchResultData = searchCities(abbreviation);
                updateOptions(select, searchResultData);
                cache[abbreviation] = 1;
            }
        }

        // updates the search widget with options matching request.term
        var responseData = filterOptionsForResponse(select, term);

        response(responseData);
    }, 
```

其余代码与 jquery 站点上提供的代码相同。`searchCities(abbreviation)`上面的代码在返回本地对象数组时工作得很好。

*   `searchCities(abbreviation)`：返回匹配缩写的城市数组
*   `updateOptions(select, data)`：使用给定数据更新选择组合框中的选项
*   `filterOptionsForResponse(select, term)`：使用基于正则表达式的选项匹配项更新组合框

我当前使用 ajax 的 searchCities 版本：

```
function searchCities(abbreviation){
    if(!!abbreviation){
        $.ajax({
                url: "/wah/destinationsJson.action",
                dataType: "json",
                data: {
                    term: abbreviation
                },
                type: "GET",
                success: function(data){
                    updateOptions($("#searchbox"), data.cities);
                    // $("#searchbox input").trigger('autocompleteselect', data.term);
                    // return data.cities;
                }
            });
    }
} 
```

上面的触发器不会触发搜索！有人可以解释一下如何触发对这个组合框的搜索。

PS：我很抱歉没有提供 jsfiddle/jsbin，因为我无法让它在那里渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:10:18.400

我终于让它工作了！

[http://jsfiddle.net/SRekL/](http://jsfiddle.net/SRekL/)

兴趣线：

> 输入 -> 源 -> ajax -> 成功

```
success: function(data) {
    optionData = $.map(data.geonames,function(item){
        return new Object( {name: item.adminName1} ); ;
    });

    updateOptions(select, optionData);
    response(filterOptionsForResponse(select, term));
    return;
} 
```

**笔记：**

*   将 optionData 转换为对象数组，因为我的函数`updateOptions(...)`依赖于属性“名称”。
*   `updateOptions(select, optionData)`：使用返回的数据更新此组合框的选项
*   `filterOptionsForResponse(select, term)`：根据术语过滤选项并突出显示匹配的文本。

该解决方案是针对我需要使用前两个字符访问服务器的要求量身定制的。我根据搜索词过滤选项，并将结果集附加到给定的选项列表中。

为了演示，我使用“ [http://ws.geonames.org/searchJSON](http://ws.geonames.org/searchJSON) ”作为 jsFiddle 中 ajax 调用的 URL。

此外，SO 上的一系列线程对我有很大帮助：

*   [Under the hood of jquery combobox](http://www.learningjquery.com/2010/06/a-jquery-ui-combobox-under-the-hood) - 一篇最有价值的文章，解释了组合框的内部

`Clue trail`

*   [如何使用带有 jquery ui 组合框的远程源？](https://stackoverflow.com/questions/8011323/how-to-use-remote-source-with-jquery-ui-combobox)
*   [为 ajax 源修改的 jquery ui 自动完成组合框小部件示例](https://stackoverflow.com/questions/5804869/jquery-ui-autocomplete-combobox-widget-example-modified-for-ajax-source)
*   [http://jsfiddle.net/and7ey/TFerw/3/](http://jsfiddle.net/and7ey/TFerw/3/)

# windows - 不同会话、服务和用户会话的 DLL 共享内存问题

> ID：10827743
> 
> 赞同：0
> 
> 时间：2012-05-31T05:08:38.233
> 
> 标签：windows, session, sync, shared

首先，谢谢你读到这个:)

我使用 DLL 共享内存并使用 interlocked~ 函数。（赢 7）

由服务 exe 和用户应用程序 exe 加载的 DLL。

您知道，服务会话为 0，用户会话为 1，如此不同。

如果用户应用 exe 更改了 DLL 的共享内存值，则不会反映服务的 DLL 共享内存值。

有没有办法同步服务和用户应用程序的 DLL 共享内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T10:10:48.487

共享部分不再跨会话边界工作。微软认为这是一个安全问题，并故意破坏了该功能，如果没记错的话，这是很久以前的事了。我相信每个会话现在都会看到它自己的部分的私人副本。

但是内存映射文件（MMF）工作正常，我现在用它代替共享部分。唯一令人沮丧的是，必须以高权限创建全局可用的 MMF，因此我使用服务来创建 MMF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:23:53.187

尝试使用全局共享内存。 [微软的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)说：

> 使用“Global\”前缀文件映射对象名称允许进程相互通信，即使它们处于不同的终端服务器会话中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:34:42.333

不要忘记，在跨会话共享内存时，[凭据](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)也会发挥作用。

> 这要求第一个进程必须具有 SeCreateGlobalPrivilege 权限

# xml - 如何使用具有复杂规则的 xslt 翻译 xml

> ID：10827744
> 
> 赞同：2
> 
> 时间：2012-05-31T05:08:51.380
> 
> 标签：xml, xslt

我有一个 xml 文件，并希望使用具有复杂规则的 xslt 来翻译它。源xml是这样的：

```
<analysis>
    <blocks>
        <block id="35" original="5,13">
            <contain>6 ,7</contain>
        </block>
        <block id="33" original="20">
            <contain>11, 8, 9, 10</contain>
        </block>
    </blocks>
    <images>
        <image id = "11">./img/a.jpg </image>
    </images>
    <lines>
        <line id="6"/>
            <char font="2">a</char>
            <char font="2">a</char>
            <char font="2">a</char>
            <char font="2">a</char>
        <line id="7"/>
            <char font="2">b</char>
            <char font="2">b</char>
            <char font="2">b</char>
            <char font="2">b</char>
        <line id="8"/>
            <char font="2">c</char>
            <char font="2">c</char>
            <char font="2">c</char>
            <char font="2">c</char>
        <line id="9"/>
            <char font="2">d</char>
            <char font="2">d</char>
            <char font="2">d</char>
            <char font="2">d</char>
        <line id="10"/>
            <char font="2">e</char>
            <char font="2">e</char>
            <char font="2">e</char>
            <char font="2">e</char>
    </lines>
</analysis> 
```

结果xml是：

```
<result>
    <block id="35">
        <text>
            aaaabbbb
        </text>
    </block>
    <block id="33">
        <text>
            cccc
        </text>
        <image ref="./img/a.jpg"/>
        <text>
            ddddeeee
        </text>
    </block>
</result> 
```

规则是：在“block”标签下，有“contain”标志，其内容是block引用的id集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:24:00.830

问题中唯一没有意义的部分是输出`img`中两个`text`元素之间的结果如何。

这是一个 XSLT 2.0 示例。这并不准确，但可能足够接近您进行修改以实现您需要的内容。

**XML 输入**

```
<analysis>
    <blocks>
        <block id="35" original="5,13">
            <contain>6 ,7</contain>
        </block>
        <block id="33" original="20">
            <contain>11, 8, 9, 10</contain>
        </block>
    </blocks>
    <images>
        <image id = "11">./img/a.jpg </image>
    </images>
    <lines>
        <line id="6"/>
            <char font="2">a</char>
            <char font="2">a</char>
            <char font="2">a</char>
            <char font="2">a</char>
        <line id="7"/>
            <char font="2">b</char>
            <char font="2">b</char>
            <char font="2">b</char>
            <char font="2">b</char>
        <line id="8"/>
            <char font="2">c</char>
            <char font="2">c</char>
            <char font="2">c</char>
            <char font="2">c</char>
        <line id="9"/>
            <char font="2">d</char>
            <char font="2">d</char>
            <char font="2">d</char>
            <char font="2">d</char>
        <line id="10"/>
            <char font="2">e</char>
            <char font="2">e</char>
            <char font="2">e</char>
            <char font="2">e</char>
    </lines>
</analysis> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/">
        <results>
            <xsl:apply-templates select="analysis/blocks/block"/>
        </results>
    </xsl:template>

    <xsl:template match="block">
        <xsl:copy>
            <xsl:apply-templates select="@*[not(name()='original')]"/>
            <xsl:apply-templates select="/*/*/image[@id=tokenize(current()/contain,'\s*,\s*')]"/>
            <text>
                <xsl:apply-templates select="/*/*/line[@id=tokenize(current()/contain,'\s*,\s*')]/following-sibling::char[preceding-sibling::line[1][@id=tokenize(current()/contain,'\s*,\s*')]]/text()"/>
            </text>         
        </xsl:copy>     
    </xsl:template>

    <xsl:template match="image">
        <image ref="{normalize-space(.)}"/>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<results>
   <block id="35">
      <text>aaaabbbb</text>
   </block>
   <block id="33">
      <image ref="./img/a.jpg"/>
      <text>ccccddddeeee</text>
   </block>
</results> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:58:11.730

这个样式表...

```
<xsl:stylesheet
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema" >
<xsl:output method="xml" indent="yes" encoding="utf-8" />
<xsl:strip-space elements="text"/>
<xsl:key name="text-resource" match="line" use="normalize-space(@id)" />
<xsl:key name="image-resource" match="image" use="normalize-space(@id)" />

<xsl:template match="/">
 <result>
  <xsl:apply-templates select="analysis/blocks/block" />
 </result>
</xsl:template>

<xsl:template match="block">
  <block id="{@id}">
  <xsl:variable name="block" select="." />

  <xsl:variable name="block-texts" as="xs:string+">
    <xsl:for-each select="tokenize(contain/text(),'\s?,\s?')" >
     <xsl:variable name="id" select="." />
     <xsl:for-each select="$block" >
      <xsl:sequence select="key('text-resource',$id)/following-sibling::char[preceding-sibling::line[1][@id=$id]]" />
     </xsl:for-each>
    </xsl:for-each>
  </xsl:variable>

  <xsl:if test="count( $block-texts) != 0" >
   <text>
    <xsl:for-each select="$block-texts" >
     <xsl:value-of select="." />
    </xsl:for-each>
   </text>
  </xsl:if>

    <xsl:for-each select="tokenize(contain/text(),'\s?,\s?')" >
     <xsl:variable name="id" select="." />
     <xsl:for-each select="$block" >
      <xsl:for-each select="key('image-resource',$id)" >
       <image href="{.}" />
      </xsl:for-each>
      </xsl:for-each>
     </xsl:for-each>
  </block>
</xsl:template>

</xsl:stylesheet> 
```

...当应用于问题中给出的输入文档时，产生...

```
<?xml version="1.0" encoding="utf-8"?>
<result xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <block id="35">
      <text>aaaabbbb</text>
   </block>
   <block id="33">
      <text>ccccddddeeee</text>
      <image href="./img/a.jpg "/>
   </block>
</result> 
```

我希望你能找到我最接近的解决方案。

# android - PageCurl（杂志）与来自网络的图像

> ID：10827745
> 
> 赞同：4
> 
> 时间：2012-05-31T05:09:05.467
> 
> 标签：android, image, lazy-loading, image-loading, page-curl

我正在使用*Harism Page Curl(Open GL* ) [https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)，它的工作原理非常好

![在此处输入图像描述](../Images/f9d8a6f09ae7cc864ea82d80764b21f9.png)

但在这个例子中，我发现的条件是我们必须准备好所有位图资源（下载），但我想要的是图像将从网络加载（运行时），并将像这样被缓存以备将来使用。

![在此处输入图像描述](../Images/a272f389f6f1f1386140b3800dcd8af5.png)

想知道我将如何实现这一目标？一个小的帮助/提示也很感激。:)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T06:01:15.857

*这个答案假设您**想**使用 Harri Smått 的 Page Curl（harism）而不是别的。*

有不同的方法来实现带有进度条的等待屏幕：

1.  创建一个自定义视图，将显示每个页面的图像。当所需的图片不可用时，在后台下载图片时会显示等待消息和进度条。`BitmapProvider`返回从此自定义视图中捕获的位图（通过使用 a或`Canvas`使用`drawingCache`）。需要注意的是，`CurlView`每当发生更改时，都需要使用视图中的最新图像进行更新。这可以通过`requestRender`方法来完成。
2.  创建一个 OpenGL 进度小部件。每当图像不可用且需要下载时，此进度小部件与消息一起显示在页面的位置。下载完成后，视图将使用下载的图像重新渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T10:22:19.113

一种选择是做这样的事情[如何应用点击监听器？](https://stackoverflow.com/questions/13859425/how-to-apply-click-listener/14195107#14195107)，这建议保持两个视图（一个在另一个之上）。

第一个将保存您需要的视图（如果已加载，则为当前页面，否则为 ProgressBar）。第二个是harism的OpenGL表面视图，它会使页面卷曲。这样，您可以在需要时隐藏/显示/将它们带到顶部/底部。

# c++ - 如何将复杂数据打包到 QtDBus 回复中？

> ID：10827749
> 
> 赞同：2
> 
> 时间：2012-05-31T05:09:21.380
> 
> 标签：c++, qt, dbus, qtdbus

我必须在 Qt 中实现一个 DBus 服务，该服务必须返回一个遵循给定规范的相当复杂的数据。数据本质上是一系列经过测试的映射、数组、结构和其他变体。

我找不到一种方便的方法将所有这些都打包到我的方法的回复中。看来我应该可以为此使用该`QDBusArgument`课程。例如，要创建一个字符串数组，我应该可以这样做：

```
QDBusArgument arg;
arg.beginArray( qMetaTypeId<QString>());
arg << "Hello" << "World";
arg.endArray();
QVariant var = arg.asVariant(); 
```

但这不起作用。看来我需要煞费苦心地`QList`手动构造 s 的变体。肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:19:57.450

我认为这样的事情应该可以帮助你

```
QDBusMessage msg = QDBusMessage::createSignal( ... )
QStringList strlist;
strlist << "Hello" << "World";
msg << QVariant::fromValue( strlist);
QDBusConnection::systemBus().send( msg ); 
```

> 注意：如果您使用自定义类型，您应该使用 Q_DECLARE_METATYPE() 宏来注册您的自定义类型。

# python - 拦截所有日志消息

> ID：10827751
> 
> 赞同：1
> 
> 时间：2012-05-31T05:09:50.367
> 
> 标签：python, logging

我正在使用一个应用程序，其中几乎每个模块和每个类都发出`logging`消息。

我需要一种方法来捕获这些消息中的每一条，而无需将处理程序通过显式附加`.addHandler()`到每个日志记录实例（这就是我现在正在做的事情）。

有没有办法一次将处理程序附加到*每个*日志记录实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T05:15:35.670

`logging`使用记录器的层次结构。将处理程序添加到根记录器，它也会接收来自子记录器的记录消息。

要访问根记录器，请使用`logging.getLogger()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:19:42.690

为了将所有内容记录到标准输出，您可以使用方法[logging.basicConfig](http://docs.python.org/py3k/library/logging.html?highlight=logging.basicconfig#logging.basicConfig)来初始化日志配置：

```
logging.basicConfig(level=logging.DEBUG, stream=sys.stdout) 
```

# cuda - 用 sm_20 得到 nan

> ID：10827757
> 
> 赞同：-1
> 
> 时间：2012-05-31T05:10:04.807
> 
> 标签：cuda, tesla

我正在使用特斯拉 C2050。我想用“-arch=sm_20”运行我的代码，但我得到-nan，而使用“-arch=sm_13”的计算是正确的？！我应该找出什么问题？

谢谢，贝扎德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:13:11.757

在 CUDA 调试器中逐步检查程序的每个版本，并注意它们的不同之处。

# python - tktable 中的单元格是空白的，而不是显示内容

> ID：10827758
> 
> 赞同：1
> 
> 时间：2012-05-31T05:10:06.750
> 
> 标签：python, tkinter

导入的 TkTable 模块中的示例 GUI 工作正常。但是当我尝试在自己的工作中使用 TkTable 时，表格中的每个单元格都是空的。我的测试代码如下

```
from Tkinter import *
import TkTable

class App:

    def __init__(self, master): 
        """master is the top level window"""

        master.geometry(("%dx%d")%(250,60))
        master.title("Test")

        frame = Frame(master)
        frame.pack()

        var = TkTable.ArrayVar(frame)
        for y in range(6):
            for x in range(6):
                index = "%i,%i" % (y, x)
                var[index] = index

        label = Label(frame, text="test2")
        label.pack(side = 'top', fill = 'x')

        quit = Button(frame, text="QUIT", command=root.destroy)
        quit.pack(side = 'bottom', fill = 'x')

        test = TkTable.Table(frame,
                 rows=6,
                 cols=6,
                 state='disabled',
                 width=6,
                 height=6,
                 titlerows=1,
                 titlecols=0,
                 roworigin=0,
                 colorigin=0,
                 selectmode='browse',
                 selecttype='row',
                 rowstretch='unset',
                 colstretch='last',
                 flashmode='on',
                 variable=var,
                 usecommand=0)
        test.pack(expand=1, fill='both')
        test.tag_configure('sel', background = 'yellow')
        test.tag_configure('active', background = 'blue')
        test.tag_configure('title', anchor='w', bg='red', relief='sunken')

root = Tk()
app = App(root)
root.mainloop() 
```

显示的窗口有一个包含所有空单元格的表格。

我正在使用 Python 2.6、Mac OS 10.6 和 Eclipse PyDev，尽管我认为这些都不重要。我认为很重要，但我无法确定原因，是我从 SourceForge 下载的 TkTable 模块中提供的示例代码（[http://tkinter.unpy.net/wiki/TkTableWrapper](http://tkinter.unpy.net/wiki/TkTableWrapper)）以稍微不同的方式运行表格方式。它有：

```
if __name__ == '__main__':
    sample_test() 
```

其中 sample_test() 包含

```
root = Tk() 
```

和

```
root.mainloop() 
```

为什么该示例方法有效但我的方法无效？提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T00:44:33.287

您可能需要阅读**局部变量**、**全局变量**和**实例变量**！

用 替换所有出现`var`的`self.var`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T16:11:02.080

改变你的脚本：

```
for y in range(6):
    for x in range(6):
        index = "%i,%i" % (y, x)
        var[index] = index 
```

到：

```
for y in range(6):
    for x in range(6):
        index = "%i,%i" % (y, x)
        var.set(index,index) 
```

# clojure - mini-Kanren，core.logic，clojure：推理方案练习60

> ID：10827761
> 
> 赞同：7
> 
> 时间：2012-05-31T05:10:58.393
> 
> 标签：clojure, logic, minikanren, clojure-core.logic

这不是家庭作业——解决方案已经在文本中。我只是无法理解解决方案。

## 问题

```
(run* (q)
  (let [a (== true q)
        b (== false q)]
    b)) 
```

## 正确的解决方案

```
(false) 
```

## 我相信的解决方案

```
() 
```

## 我的困惑

显然“a (== true q)”行没有被执行，因为只有 b 是目标。这让我很困惑。到目前为止，我的逻辑编程心智模型是：

*   考虑对 q 的所有可能分配
*   输出设法通过整个程序的那些

    因此，“a (== true q)”强制 q = true，这使得不可能满足“b (== false q)”行。

    然而，显然只执行“计算目标所需的事情”。这是怎么回事？core.logic / mini-kanren 的正确心理执行模型是什么？

谢谢

（顺便说一句，我显然错了，因为 mini-karen + core.logic 彼此一致——我只是想了解我做错了什么。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T09:49:44.333

`==`产生一个目标。但是你没有通过`a`目标来运行。所以run对此一无所知。类似的情况是这样的：

```
(defn call [f] (f))

(call
  (let [a #(println "a")
        b #(println "b")]
    b)) 
```

该`a`函数已创建但未传递给`call`. 所以它永远不会被执行。

# php - 获取页面的序列化输出，然后进行转换

> ID：10827766
> 
> 赞同：0
> 
> 时间：2012-05-31T05:11:39.377
> 
> 标签：php

我有一个 CURL 发布表单的序列化输出

你可以在这里检查输出

```
http://shopnineteen.com/new-admin/payu.php 
```

输出是 CURL 表单操作 url 的返回

我想捕获这个输出并反序列化它

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:15:54.983

我不确定这是否是您所追求的，但这是对该 URL 的一个非常简单的 cURL 请求，然后它对结果进行反序列化。

```
<?php

$url = 'http://shopnineteen.com/new-admin/payu.php';

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);

$result = curl_exec($ch);
curl_close($ch);

if ($result) {
    $data = unserialize($result);

    if (!$data) {
        echo "Not valid serialized data.";
    } else {
        var_dump($data);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:15:32.753

字符串是`JSON`格式

使用[JSON 解码](http://php.net/manual/en/function.json-decode.php)

你可以随心所欲地处理数据

# apache - Mod-Security 配置错误的详细 Apache 错误日志

> ID：10827770
> 
> 赞同：1
> 
> 时间：2012-05-31T05:12:13.537
> 
> 标签：apache, mod-security

我已经在 Apache 2.2.21 上配置了 Mod 安全性，并且我已经成功配置了 Mod 安全规则。我面临的问题是，如果我在 Mod 安全规则配置文件中配置了错误的规则，那么 Apache 服务器将无法启动，而我有两个手动搜索有问题的规则。Apache 错误日志没有提供有关 Mod-Security Rule 中错误的足够信息。Mod Security 审计日志在这里不相关，因为它们记录了哪些规则是触发器以及原因。我是否需要配置 Apache 错误日志以及如何配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T07:42:34.000

日志不会在启动时帮助您，这不仅适用于 modsecurity。通常，在服务器完全运行之前，它不会连接到日志或写入任何内容。

我建议您在一个单独的配置文件中一一测试您的规则，并且只尝试加载该文件。您可以在测试系统上执行此操作，速度非常快。修复后放入完整的设置并尝试在那里重新启动。如果失败，那么您与其他现有规则有冲突。

# sql - 如何修改我编写的此查询以显示所需的结果？

> ID：10827774
> 
> 赞同：0
> 
> 时间：2012-05-31T05:13:13.300
> 
> 标签：sql, oracle, plsql

使用 BOOK_ORDER、ORDER_ITEMS 和 BOOKS 表，使用 OUTER JOIN 操作创建一个查询，该操作将列出 BOOKS 表中所有书籍的书名、订购日期和订购号。按 ORDER_ITEMS.BOOKID 降序排列您的输出。有三本书从未订购过，它们应该显示在您的列表顶部。

我写了这个查询： -

```
SELECT B.TITLE, BO.ORDERDATE, ORD.ORDERID FROM BOOKS B, BOOK_ORDER BO, ORDERITEMS ORD
WHERE B.BOOKID = ORD.BOOKID
AND BO.ORDERID = ORD.ORDERID(+)
ORDER BY ORD.ORDERID DESC 
```

我得到了结果，但对问题的以下部分感到困惑：-

“有三本从未订购过的书应该出现在您的列表顶部。”

我猜这意味着我需要将那些具有 Orderdate 和 OrderId 的书籍显示为 NULL 或空白。但是如何让这些行位于结果集之上？我应该在我写的查询中更改什么？

这是BOOKS表：-

```
Name                                      Null?    Type
----------------------------------------- -------- ---------------
BOOKID                                    NOT NULL NUMBER(15)
ISBN                                               VARCHAR2(10)
TITLE                                              VARCHAR2(30)
PUBDATE                                            DATE
PUBID                                              NUMBER(2)
COST                                               NUMBER(5,2)
RETAIL                                             NUMBER(5,2)
CATEGORY                                           VARCHAR2(12) 
```

这是 ORDER_ITEMS 表：-

```
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------
 ORDERID                                   NOT NULL NUMBER(4)
 ITEMNUM                                   NOT NULL NUMBER(2)
 BOOKID                                    NOT NULL NUMBER(15)
 QUANTITY                                           NUMBER(3) 
```

这是 BOOK_ORDER 表结构：-

```
 Name                                      Null?    Type
 ----------------------------------------- -------- --------------
 ORDERID                                   NOT NULL NUMBER(4)
 CUSTOMERID                                         NUMBER(4)
 ORDERDATE                                          DATE
 SHIPDATE                                           DATE
 SHIPSTREET                                         VARCHAR2(20)
 SHIPCITY                                           VARCHAR2(20)
 SHIPSTATE                                          VARCHAR2(2)
 SHIPZIP                                            VARCHAR2(5) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:05:10.193

试试这个：

```
SELECT B.TITLE,
       BO.ORDERDATE,
       ORD.ORDERID
FROM BOOKS B,
     BOOK_ORDER BO,
     ORDER_ITEMS ORD
WHERE B.BOOKID = ORD.BOOKID(+)
  AND BO.ORDERID(+) = ORD.ORDERID
ORDER BY ORD.ORDERID DESC 
```

顺便说一句，恕我直言，最好不要使用`(+)`运算符，而是使用 ANSI`JOIN`关键字：

```
SELECT B.TITLE,
       BO.ORDERDATE,
       ORD.ORDERID
FROM BOOKS B
LEFT OUTER JOIN ORDER_ITEMS ORD ON B.BOOKID = ORD.BOOKID
FULL OUTER JOIN  BOOK_ORDER BO ON BO.ORDERID = ORD.ORDERID
ORDER BY ORD.ORDERID DESC 
```

[这](http://sqlfiddle.com/#!4/4b788/20)是一个小提琴

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:57:01.497

我认为这将显示未在顶部排序的书籍

```
SELECT B.TITLE, BO.ORDERDATE, ORD.ORDERID FROM BOOKS B, BOOK_ORDER BO, ORDERITEMS ORD
WHERE B.BOOKID = ORD.BOOKID
AND BO.ORDERID = ORD.ORDERID(+)
ORDER BY nvl(ORD.ORDERID,0) 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:26:41.513

也许这会有所帮助

```
 SELECT DISTINCT B.TITLE,
                (CASE
                  WHEN B.BOOKID = ORD.BOOKID THEN
                   BO.ORDERDATE
                  ELSE
                   NULL
                END) AS ORDERDATE,
                (CASE
                  WHEN B.BOOKID = ORD.BOOKID THEN
                   ORD.ORDERID
                  ELSE
                   NULL
                END) AS ORDERID
  FROM SO_BOOKS B, SO_BOOK_ORDER BO, SO_ORDER_ITEMS ORD
 WHERE (B.BOOKID = ORD.BOOKID AND BO.ORDERID = ORD.ORDERID)
    OR (B.BOOKID NOT IN
       (SELECT DISTINCT ORD.BOOKID FROM SO_ORDER_ITEMS ORD))
 ORDER BY ORDERID DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T00:21:20.010

在开场白中，它声明“按 ORDER_ITEMS.BOOKID 降序排列您的输出”。给出的示例虽然有效，但不要使用此请求的命令/查询。

我会推荐以下脚本：

```
SELECT Books.Title, Book_Order.OrderDate, Order_Items.OrderID
FROM Books, Book_Order, Order_Items
WHERE Books.BookID = Order_Items.BookID(+)
AND Book_Order.OrderID(+) = Order_Items.OrderID
ORDER BY Order_Items.BookID DESC; 
```

# c++ - 在日志中添加时间

> ID：10827776
> 
> 赞同：2
> 
> 时间：2012-05-31T05:13:24.293
> 
> 标签：c++, logging, stderr, sfml

我正在使用 SFML 1.6 制作游戏，有时会出现错误，当用户运行游戏时，我不希望控制台出现，所以我重定向`stderr`（SFML 显然用来记录错误）到以当前日期命名的文件。因此，如果出现错误，用户只需检查日志即可。现在我还想把时间放在每个日志之前，所以日志文件看起来像这样：

```
12:34:17 CDT
failed to load image "sprite.png"

12:35:01 CDT
failed to load file "font.ttf" 
```

有没有办法将当前时间“附加”到任何输出以获得上面显示的结果？

**编辑**

我忘了提一下，SFML 库是记录大多数错误的库，可以这么说，我想在它离开应用程序时添加时间。有点像收费站，除了任何离开的东西都会有时间。我知道如何将时间作为字符串获取，而且我不是调用 printf 或任何其他类似函数的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:18:13.300

您可以做得比简单的重定向更好：您实际上可以在传入的字符流和写入文件之间插入自己的代码。

基本思想是从 派生一个类`filebuf`，以控制放置的字符。

你有两种策略：

*   简单的方法是每次读取一个`\n`字符时设置一个标志，然后在第一次`put`插入时间戳（并取消设置标志）
*   困难的方法是您缓冲输出直到`\n`遇到一个字符，此时您格式化您的时间戳，然后刷新缓冲区（直到`\n`）

如果我们认为每行格式化的开始和结束之间没有太多时间，那么简单的方法应该足够可靠地工作。

我认为覆盖`xsputn`应该足以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:26:25.203

如果您可以修改执行实际打印的函数，那么可以（我建议您查看函数、`time`和`ctime`）。如果*不能*修改功能，那就不行。`localtime``strftime`

# google-maps - 谷歌地图kmz多边形` `$[name] 突然不在气球中解释

> ID：10827777
> 
> 赞同：0
> 
> 时间：2012-05-31T05:13:34.737
> 
> 标签：google-maps, kml, polygon, kmz

这个问题最近才出现，但我找不到任何关于谷歌改变任何相关内容的参考。

我有一个站点，我想在单击时仅在地图上*显示*`<name>`一个区域的名称，而不是始终显示可怕的默认样式。

因此，在`<BalloonStyle><text>`添加 $[description] 和`<description>`添加 CDATA $[name]

这在谷歌地图中运行良好，直到不久前，在我的谷歌地图中运行良好。

现在（当它们可点击时）我的多边形显示巨大的名称，如果`<description>`.

部分气球内部（来自视图选择源）： `<div jstcache="0" style="font-weight: bold; font-size: medium; margin-bottom: 0em;" torrens_rural_catchment=""> Torrens Rural Catchment </div> <div jstcache="0" id="iw_kml"><div jstcache="0">$[name]</div></div>`

和！我的一个多边形完全不可见，但可以点击！（在地球上完全可见）

我完全不知道为什么会发生这种情况。我想不出我对代码所做的任何事情来影响它。

站点：[http](http://wds.amlr.waterdata.com.au/Amlr.aspx) ://wds.amlr.waterdata.com.au/Amlr.aspx （单击绿色区域下方附近的不可见多边形。另外，站点未完成）

使用 Shabdar 的 Google Maps Control for ASP.NET

所有 kmz 都在 30 kb 以下

请帮忙！

* * *

" `<description>`HTML 内容是允许的，但经过清理以防止跨浏览器攻击；`$[dataName]`不支持表单的实体替换。" 好的，很公平，我如何只显示名称（最好是小文本）？它总是打破！

kml 详细信息：谷歌地球仅以小文本显示名称，地图显示其下方的大名称和描述文本。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
    <Document>
    <name>Fleurieu_Peninsula_Catchment.kml</name>
    <StyleMap id="default1">
    <Pair>
    <key>normal</key>
    <styleUrl>#default</styleUrl>
    </Pair>
    <Pair>
    <key>highlight</key>
     <styleUrl>#default0</styleUrl>
    </Pair>
</StyleMap>
<Style id="default">
    <IconStyle>
        <scale>0.7</scale>
    </IconStyle>
    <LabelStyle>
        <color>00ffffff</color>
    </LabelStyle>
    <BalloonStyle>
        <text><![CDATA[$[name]]]></text>
    </BalloonStyle>
    <LineStyle>
        <width>0.5</width>
        <color>cc94c934</color>
    </LineStyle>
    <PolyStyle>
        <color>7fffc24f</color>
        <outline>0</outline>
    </PolyStyle>
</Style>
<Style id="default0">
    <IconStyle>
        <scale>0.7</scale>
    </IconStyle>
    <LabelStyle>
        <color>00ffffff</color>
    </LabelStyle>
    <BalloonStyle>
        <text><![CDATA[$[name]]]></text>
    </BalloonStyle>
    <LineStyle>
        <width>0.5</width>
        <color>cc94c934</color>
    </LineStyle>
    <PolyStyle>
        <color>7fffc24f</color>
        <outline>0</outline>
    </PolyStyle>
</Style>
<Placemark id="p2">
    <name>Fleurieu Peninsula Catchment</name>
    <snippet maxLines="0"></snippet>
    <description>Don't show this</description>
    <styleUrl>#default1</styleUrl>
    <Polygon>
        <outerBoundaryIs>
            <LinearRing>
                <coordinates>
                    138.585914080646,-35.3888737733775,0 138.58279412306,-35.3890538078642,0 138.578014195374,-35.3898638645537,0 138.574064275831,-35.3919539205289,0 138.57115435005,-35.3942239666534,0 ...
    </coordinates>
    </LinearRing>
    </outerBoundaryIs>
    </Polygon>
    </Placemark>
    </Document>
    </kml> 
```

当我刷新页面时，kml 不再可点击。

谷歌最近改变了解释这些事情的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:46:43.763

丁：

行。经过大量的填充之后，这就是发生的事情。

谷歌必须强制执行

> " `<description>`HTML 内容是允许的，但经过清理以防止跨浏览器攻击；不支持 $[dataName] 形式的实体替换。"

这打破了我之前在 infowindows 中所做的事情。现在我已经删除`<BalloonStyle>`并且`<name>`只在`<description>`标签中显示名称（带有样式 inc.padding-top:20px;），这给了我很好的小文本。

“不超过五个 kmls”规则发生了，它不仅停止渲染 kmls，还破坏了一些东西：一个 kml 没有显示，但仍然可以通过其信息窗口单击，并且某些可见的 kmls 有时无法单击刷新。

我在我所有的 kmls 上都使用了验证器[http://www.kmlvalidator.org/ ，它们都可以验证。](http://www.kmlvalidator.org/)

除了！当我通过 Google Earth (v6.2.2.6613) 将它们保存为 kmz 格式时，google 会`<innderBoubdaryIs>`从内部删除连续的标签，以便所有标签周围`<Polygon>`只有一个标签。这只会导致第一个标签在多边形中创建一个洞，而忽略其余部分。（嗯……我需要特别提醒某人吗？或者更新会解决这个问题吗？）`<innderBoubdaryIs>``<LinearRing>``<innderBoubdaryIs><LinearRing>`

所以，我要去自己压缩所有的kmls。

# c# - 设置 EventQuery.Uri 会重置 EventQuery 状态

> ID：10827780
> 
> 赞同：3
> 
> 时间：2012-05-31T05:14:03.170
> 
> 标签：c#, google-calendar-api

这有效：

```
public override bool GetAppointments(CalendarModel calendar, DateTime startDate, DateTime endDate) {
    foreach (var googcal in _settings.Calendars.Where(googcal => googcal.Selected)) {
        var eventQuery = new EventQuery {
            Uri = new Uri(googcal.ProviderData),
            // Passed in startDate/endDate are inclusive
            StartTime = startDate.Date,
            EndTime = endDate.Date.AddDays(1).AddMilliseconds(-1)
        };
        var eventFeed = Service.Query(eventQuery);
        foreach (EventEntry appt in eventFeed.Entries) {
...
        }
    }
    return true;
} 
```

这不会：

```
public override bool GetAppointments(CalendarModel calendar, DateTime startDate, DateTime endDate) {
    foreach (var googcal in _settings.Calendars.Where(googcal => googcal.Selected)) {
        var eventQuery = new EventQuery {
            // Passed in startDate/endDate are inclusive
            StartTime = startDate.Date,
            EndTime = endDate.Date.AddDays(1).AddMilliseconds(-1),
            Uri = new Uri(googcal.ProviderData)
        };
        var eventFeed = Service.Query(eventQuery);
        foreach (EventEntry appt in eventFeed.Entries) {
...
        }
    }
    return true;
} 
```

在第一种情况下`Event.Query.StartTime`，`EndTime`按预期正确设置。

在第二种情况下，它们是未初始化的 ( `1/1/0001 12:00:00 AM`)。

唯一的区别是对象初始值设定项中属性的顺序。

为了咧嘴笑，我做了这样的命令：

```
// Passed in startDate/endDate are inclusive
StartTime = startDate.Date,
Uri = new Uri(googcal.ProviderData),
EndTime = endDate.Date.AddDays(1).AddMilliseconds(-1) 
```

果然`EndTime`是正确的，但未`StartTime`初始化。

这对我来说毫无意义。怎么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:17:45.140

对象初始化器*只是设置属性*。在另一个属性之前设置一个属性的任何副作用都将是可见的，就像您直接写出来一样：

```
var tmp = new EventQuery();
tmp.StartTime = startDate.Date;
tmp.EndTime = endDate.Date.AddDays(1).AddMilliseconds(-1);
tmp.Uri = new Uri(googcal.ProviderData);
var eventQuery = tmp; 
```

在这种情况下，我怀疑通过设置*添加了*`StartTime`一些内部状态/`EndTime`但通过设置*重置*`Uri`。

编辑：好的，我现在找到[了相关代码](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/src/core/feedquery.cs)。

`EventQuery`源自`FeedQuery`。设置`Uri`on`FeedQuery`调用`ParseUri`依次设置所有内部属性。

基本上，当您拥有相互关联的属性时，这种事情总会发生。想象一下，你有一个`Size`反映宽度和高度的类型的属性，它也可以独立设置——你可以这样写：

```
var foo = new Foo {
    Width = 100,
    Size = new Size(200, 50),
    Height = 20
}; 
```

最终尺寸为 200x20。基本上，当您了解它是代表完整查询 URI 的属性时，这一切都是有意义`Uri`的，而不仅仅是词干。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:20:52.850

令人惊讶的是，在 Stack Overflow 上提问可以帮助您了解正在发生的事情。我把这个问题留在这里，这样遇到这个问题的任何其他人都会知道发生了什么......我不能成为唯一会遇到这个问题的人。

在 Google Calendar API V2 中，我在这里使用的 .NET 库有我认为是`EventQuery`类中的错误。

具体来说，设置`Uri`对对象有副作用。具体来说，它会导致`StartTime`和`EndTime`属性被初始化。

我通过这样做修复了我的代码：

```
var eventQuery = new EventQuery(googcal.ProviderData) {
    StartTime = startDate.Date, 
    EndTime = endDate.Date.AddDays(1).AddMilliseconds(-1)
}; 
```

IOW，在构造函数中设置 Uri。

# wcf - SQL 缓存依赖于 WCF 服务

> ID：10827781
> 
> 赞同：0
> 
> 时间：2012-05-31T05:14:03.763
> 
> 标签：wcf

谁能告诉我如何在我计划在 IIS 6 服务器上托管的 WCF 服务应用程序中实现 SQL 缓存依赖项？

我已经为我们的 Web 应用程序工作过，它在那里工作得很好。我希望我的 WCF 服务每 5 分钟轮询一次数据库并获取该数据。

我已经为我的数据库启用了查询通知。无法找到在 WCF 服务中执行此操作的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:19:34.020

使用 WCF 缓存[http://msdn.microsoft.com/en-us/library/ee230443.aspx](http://msdn.microsoft.com/en-us/library/ee230443.aspx)检查 Sql 部分

但我也建议检查下面的链接，它列出了所有的步骤。和你需要的完全不一样，但还是能在一定程度上解决你的问题。

[http://www.codeproject.com/Articles/46945/WCF-Cache](http://www.codeproject.com/Articles/46945/WCF-Cache)

PS :-读到 System.Web.Caching.Cache 类不适合在 WCF 中使用。

# php - 如何从 PHP 中的邮件程序中获取表单值？

> ID：10827795
> 
> 赞同：1
> 
> 时间：2012-05-31T05:15:50.377
> 
> 标签：php, forms, smtp, sendmail

我正在通过 SMTP 发送包含表单的邮件，当表单提交时，我想获取表单详细信息并显示到表单提交的操作 URL

这是表格

```
<form id="myForm" name="myForm" action="thanks.php" method="post">
<input type="text" name="name1 " id="name1" />

<input type="submit" name="button" id="button" value="Submit" />
</form> 
```

操作 URL where(thanks.php) 我正在尝试获取表单值

```
<?php echo $_POST['name1']; ?> 
```

但没有显示，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:21:03.117

提供您的 php 文件的完整 url。因为它从远程服务器发布。

action="http://www.yoursite.com/thanks.php"

更多详情：[TechNew.In](http://www.technew.in)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:24:51.377

你的代码看起来不错。它可能与您的安装或测试环境有关。

```
<?php print_r($_POST); ?> 
```

在您的Thanks.php 中尝试以确保您的服务器正在获取发布的内容。您还可以在 PHP 标记之外尝试一些虚拟内容，以确保您的表单发布到正确的文件，再次在您的 Thanks.php 中

```
<em>Dummy content</em>
<?php echo 'PHP test'; ?> 
```

作为最后的手段，测试您的请求

```
<?php print_r($_REQUEST); ?> 
```

如果这些都没有导致您的表单内容，则您的服务器安装或客户端可能有错误。

使用 Firebug 等工具检查来自浏览器的发布请求。通过编写更简单的脚本来检查您的 PHP，只需检查 $_REQUEST 和 $_POST 变量的存在。

# events - 需要帮助使用 Graph API 拉取 100k 公共事件

> ID：10827800
> 
> 赞同：1
> 
> 时间：2012-05-31T05:16:34.413
> 
> 标签：events, facebook-graph-api

我正在寻找一种方法来使用 Graph API 提取与单个 Facebook 用户/创建者帐户关联的大约 10 万个公共事件。

所有事件都是“公开的”并且与特定用户帐户相关联。我想获取这些并将它们存储在我的数据库中，以便更好地查询和过滤。

当我尝试使用 Graph API Explorer (https://graph.facebook.com/[userid]/events) 时，它在尝试提取这些数据时显然会挂起。我想知道是否有一种方法可以有效地做到这一点，而不会惹恼 Facebook 或触发任何危险信号或违反任何 Facebook 使用条款。

由于这些事件只是公开的，我希望这不会成为问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:15:04.097

> 当我尝试使用 Graph API Explorer (https://graph.facebook.com/[userid]/events) 时，它在尝试提取这些数据时显然会挂起。

尝试使用限制参数，然后使用图形响应提供的分页 URL 来读取下一个数据块。

# sql - 计算平均生命周期价值

> ID：10827802
> 
> 赞同：-1
> 
> 时间：2012-05-31T05:17:26.433
> 
> 标签：sql, ms-access

我正在尝试确定所有客户的客户的平均生命周期价值，以及第二个查询以确定过去 30 天内的同一件事。

我有一个客户表（tblcustomer），其中包含：

客户ID 客户名

我还有一个服务表（tblservice），其中包含：

serviceID 日期格式：(mm/dd/yyyy) 价格

这里查询我到目前为止计算总数的平均值：

```
SELECT Sum(tblservice.Total) AS Totals
FROM tblservice; 
```

到目前为止，我在这里查询用于计算过去 30 天总数的平均值：

```
SELECT Sum(tblservice.Total) AS Totals
FROM tblservice
WHERE ((tblservice.Timing)>=DateAdd("d",-30,Date())); 
```

如果有人能够帮助我计算每个查询的平均值，我将不胜感激。我几乎没有 SQL 经验。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:24:20.410

我相信我已经找到了答案，因为这似乎解决了我的问题：

```
SELECT AVG(tblservice.Total) AS OrderAverage FROM tblservice;

SELECT AVG(tblservice.Total) AS OrderAverage FROM tblservice
WHERE ((tblservice.Timing)>=DateAdd("d",-30,Date())); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T05:29:16.490

```
SELECT AVG((tblservice.Total) AS average FROM tblservice;

SELECT AVG(tblservice.Total) AS OrderAverage FROM tblservice
WHERE ((tblservice.Timing)>=DateAdd("d",-30,Date())); 
```

# .net - 如何在 .NET Reporting RDLC 中的特定条件下隐藏或不打印页面

> ID：10827804
> 
> 赞同：2
> 
> 时间：2012-05-31T05:17:29.377
> 
> 标签：.net, reporting, rdlc

我有一个报告，其中有三个分组。我在某些条件下显示详细信息行，例如，我在详细信息组中创建了一个过滤器，其中 Status = True 并在页脚中显示它们的总数。而 Status = False 用于页面上的其他计算。所以我不能只修改数据源查询，使其只有 Status = True 的行。所有行都是必需的。

现在我的问题是如果没有Status = True的行，那么页面仍然会生成页眉，没有行并且页脚中的total = 0。如果没有显示详细信息并且总计 = 0，我不想生成页面。

有没有一种方法可以控制 RDLC 报告中页面的条件可见性？

**解决方案**

如果有人需要解决方案。我通过创建一个过滤器解决了这个问题，它跳过了没有显示行的页面。我在最上面的组中创建了一个过滤器

```
Sum(IIf(Fields!Status.Value = False,1,0)) = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T03:34:57.023

如果有人需要解决方案。我通过创建一个过滤器解决了这个问题，它跳过了没有显示行的页面。我在最上面的组中创建了一个过滤器

```
Sum(IIf(Fields!Status.Value = False,1,0)) = 0 
```

# android - 远程登录教程

> ID：10827810
> 
> 赞同：1
> 
> 时间：2012-05-31T05:17:46.430
> 
> 标签：android, telnet

```
package project.robot.network;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

import project.robot.BluetoothConnection;
import android.os.AsyncTask;

public class TCPServer extends AsyncTask<Void, Integer, Void> {
    int port;               //Port on which server is running
    String clientIP;        //IP address of remote client
    ServerSocket serverSocket;  //Server Socket
    Socket clientSocket;    //Socket connected to client
    DataOutputStream out;   //Output stream object to send data
    DataInputStream in;         //Input Stream object to receive data

    boolean flag;
    boolean videoFlag;  //Used to toggle video
    private VideoThread vthread;    //Video Thread Object

    public static BluetoothConnection conn;

    /*
     * Starts a TCP Server which listens to incoming connections
     */
    public TCPServer(int port) {
        this.port = port;
        videoFlag = false;
        vthread = null;
    }

    @Override
    protected Void doInBackground(Void... arg0) {
        int msg;    

        //Initiating server socket
        try {
            serverSocket = new ServerSocket(port);
            flag = true;
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            System.out.println("Tcpserver: unable to bind socket");
            e1.printStackTrace();
            flag = false;
        }

        System.out.println("TCPServer: Server started");

        while(flag) {
            try {
                //Accepting incoming connection
                clientSocket = serverSocket.accept();
                clientIP = clientSocket.getInetAddress().getHostAddress();
                System.out.println("TCPServer: Connected to client at " + clientIP);

                //Getting input and output streams
                in = new DataInputStream(clientSocket.getInputStream());
                out = new DataOutputStream(clientSocket.getOutputStream());
                msg = 1;

                //Start VideoThread
                try {
                    vthread = new VideoThread(clientIP);
                    vthread.startVideo();
                    System.out.println("TCPServer: Video started");
                    videoFlag = true;
                } catch (Exception e) {
                    e.printStackTrace();
                    vthread = null;
                    System.out.println("TCPServer: Error while starting video");
                }

                //Reading input commands and signaling processing function
                while(flag && msg != 0) {
                    msg = in.readInt();
                    publishProgress(msg);
                }

                //Stopping video streaming if running
                if(vthread != null) {
                    vthread.stopVideo();
                    vthread = null;
                }
                System.out.println("TCPServer: Video stopped");

                //Closing Connection to client
                clientSocket.close();
                clientSocket = null;
                System.out.println("TCPServer: Closed connection to host at " + clientIP);
                clientIP = "null";

            } catch (IOException e) {
                if(clientSocket != null) {
                    clientSocket = null;
                }
                flag = false;
                System.out.println("TCPServer: Error while accepting or closing client connection");
            }
        }

        //Closing serverSocket
        if(serverSocket != null) {
            try {
                serverSocket.close();
                System.out.println("TCPServer: Server Socket Closed");
            } catch (IOException e) {
                e.printStackTrace();
                System.out.println("TCPServer: Error while closing socket");
            }
            serverSocket = null;
        }

        System.out.println("TCPServer: Server stopped");
        return null;
    }

    private void sendSignal(int signal) {
        if(conn != null)
            conn.send(signal);
        else
            System.out.println("TCPServer: null conn, can't send value");
    }

    @Override
    protected void onProgressUpdate(Integer... integers) {
        //Method is called every time a publishProgress is called from doInBackground
        for(Integer integer : integers) {
            System.out.println("TCPServer: Message received - " + integer);
            switch(integer) {
            case 1:
                //Enable SMS service
                if(vthread != null)
                    vthread.msgFlag = true;
                break;
            case 2:
                //Move backward
                sendSignal(2);
                break;
            case 4:
                //Move left
                sendSignal(4);
                break;
            case 5:
                //Stop
                sendSignal(5);
                break;
            case 6:
                //Move right
                sendSignal(6);
                break;
            case 7:
                //Buzzer toggle
                sendSignal(7);
            case 8:
                //Move forward
                sendSignal(8);
                break;
            case 9:
                //Toggle Video
                toggleVideo();
                break;
            default:
                System.out.println("TCPServer: Unrecognized instruction : " + integers[0]);
                break;
            }
        }
    }

    /*
     * Toggles video streaming state
     * if it was on then it will stop it
     * else it will start video streaming
     */
    private void toggleVideo() {
        //If videoFlag is true then stop Video else start video
        if(vthread==null)
            return;

        if(vthread.videoStream) {
            vthread.videoStream = false;
            System.out.println("TCPServer: Video streamming stopped");
        } else {
            System.out.println("TCPServer: Video streamming started");
            vthread.videoStream = true;
        }
    }

    /*
     * `s the server process
     */
    public void stop() {
        System.out.println("TCPServer: Stopping server");
        flag = false;

        //Stopping video if it is running
        if(vthread != null) {
            vthread.stopVideo();
            vthread = null;
        }
        System.out.println("TCPServer: Video stopped");

        //Closing server socket
        if(serverSocket != null) {
            try {
                serverSocket.close();
                System.out.println("TCPServer: Server Socket Closed");
            } catch (IOException e) {
                e.printStackTrace();
                System.out.println("TCPServer: Error while closing socket");
            }
            serverSocket = null;
        }
    }
} 
```

请有人告诉我 telnet 是如何工作的（或者告诉我在哪里可以找到有关该教程的教程）。我得到了上面的代码。我必须将上面的代码（适用于蓝牙）更改为 telnet 代码（适用于 wifi）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:31:04.510

你的问题有点奇怪，就像问“浏览器教程”，显示下载网页的代码，并询问浏览器的工作原理。

**Telnet 只是一个可以连接到服务器并发送接收文本的应用程序（如浏览器）**。这段代码也是一个连接到服务器并发送接收信息的应用程序（快速浏览后，主要是整数）。

很多代码主要处理建立连接和传递参数。您会感兴趣的是数据连接：

```
 //Getting input and output streams
            in = new DataInputStream(clientSocket.getInputStream());
            out = new DataOutputStream(clientSocket.getOutputStream()); 
```

稍后的

```
 //Reading input commands and signaling processing function
            while(flag && msg != 0) {
                msg = in.readInt();
                publishProgress(msg);
            } 
```

然后

```
private void sendSignal(int signal) {
    if(conn != null)
        conn.send(signal);
    else
        System.out.println("TCPServer: null conn, can't send value");
} 
```

**您应该首先了解 Java 中的 Socket 编程（[此处为教程](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)）**。在你理解了这一点之后，你就会明白为什么你的问题有点奇怪了。您还可以开始弄清楚如何编写代码以使用其他协议进行连接。是的，在编写代码之前，您可以先使用 telnet 手动尝试。

如果你真的需要“telnet 教程”，你可以下载任何使用纯文本连接的 RFC，然后在 telnet 上模拟协议。HTTP、FTP、SMTP 和 IRC 都很容易上手。尝试使用 telnet 发送电子邮件。

# ruby - MongoDB 中与 Ruby 一起使用的字符串数据类型的最大长度是多少？

> ID：10827812
> 
> 赞同：29
> 
> 时间：2012-05-31T05:17:48.847
> 
> 标签：ruby, mongodb, mongoid

我无法在 mongodb.org 主站点上找到有关 MongoDB 中字符串数据类型的最大长度的任何信息。我来自关系数据库背景，通常有最大长度。谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-31T05:20:38.327

这个[另一个问题](https://stackoverflow.com/questions/4667597/understanding-mongodb-bson-document-size-limit)应该回答你的问题：

> 大于 4MB 的文档（转换为 BSON 时）无法保存到数据库中。这是一个有点武断的限制（将来可能会提高）；它主要是为了防止糟糕的架构设计并确保一致的性能。

请注意，在为该问题选择的答案中，评论者提到它现在可能大到 8mb 或 16mb。

因此，要回答您的问题，不一定单个字符串只能是一定长度，而是*整个文档*必须小于 16MB。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-08T09:45:41.013

看到[这个](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&uact=8&sqi=2&ved=0ahUKEwjP7Ie2-q3UAhVFWBQKHevCCw0QFggmMAI&url=http%3A%2F%2Fdocs.mongodb.com%2Fmanual%2Freference%2Flimits&usg=AFQjCNF_VYd3syNxwYa6r8yL5k0124GUDQ&sig2=Khdr4hZUTO6S1TnqTdLvbg)：

> BSON 文档的最大大小为**16 兆字节**。最大文档大小有助于确保单个文档不会使用过多的 RAM，或者在传输期间不会使用过多的带宽。为了存储大于最大大小的文档，MongoDB 提供了 **GridFS API**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-15T07:54:45.847

关注[这里](https://docs.mongodb.com/manual/reference/limits/)

> BSON 文档的最大大小为 16 兆字节。
> 
> 最大文档大小有助于确保单个文档不会使用过多的 RAM，或者在传输期间不会使用过多的带宽。为了存储大于最大大小的文档，MongoDB 提供了 GridFS API。有关 GridFS 的更多信息，请参阅 mongofiles 和驱动程序文档。

# jquery - cordova.js 文件的动态包含在 Windows Phone 7 中不起作用？

> ID：10827830
> 
> 赞同：2
> 
> 时间：2012-05-31T05:19:59.060
> 
> 标签：jquery, android, windows-phone-7, cordova

我正在开发一个支持 Android、BlackBerry、iphone 和 Windows Phone 7**的电话间隙应用程序。互联网连接检查仅在 Windows Phone 7 中不起作用。**每个平台都有单独的 cordova.js 文件，所以我将这些文件保存在具有相应名称的不同文件夹中，如 android、iphone 等。我根据应用程序正在加载的设备类型动态加载 js 文件，比如如果该应用程序在**Android**中运行我正在加载 android/cordova.js。它在除**Windows Phone**之外的所有平台上都可以正常工作。**如果**我直接在 head 标记中加载 js 文件，则连接检查正在**工作**在 Windows Phone 7 中，动态加载 js 文件不起作用。我将在下面给出代码片段（文件路径是正确的，我已经检查过了）

```
<script type="text/javascript" charset="utf-8">
function test() {
    $('head').append('<script type="text/javascript" src="' + filePath + '"' + '></' + 'script>');
}
test();
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady(){                               
    offLineModeTest();
}           
function offLineModeTest(){
    try {
        var networkState = navigator.network.connection.type;
        if (Connection.NONE == networkState || Connection.UNKNOWN == networkState) {
            //do something......
        }
    }catch(err){

    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:48:15.257

这是由于在 IEMobile 中以这种方式加载时不执行 javascript 的方式。

没有解决此问题，但等待操作系统更新或直到 Cordova 的所有版本都使用相同的 js 文件。

作为替代方案，您是否可以尝试始终包含 hte WP7 版本，然后将其删除并在其他平台上加载适当的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:18:31.143

对 Cordova 的建议是始终将其直接加载到 HEAD 标记中，并将其作为您加载的第一个脚本。如果您不这样做，您将面临事件无法正确触发的风险，因为它需要连接到某些加载事件本身。

为什么不构建您的项目，以便您可以使用相对路径静态加载特定于平台的 JS 文件，而不是动态加载？这就是我用于我的 Android 和 iOS 应用程序的方法。

**编辑**

[这个答案](https://stackoverflow.com/a/10930085/42865)显示了 JS 文件的文件结构和相对包含。

# python - 动态查找两个字符串之间的多个空格

> ID：10827832
> 
> 赞同：1
> 
> 时间：2012-05-31T05:20:03.367
> 
> 标签：python, implementation, string-matching

我正在用 Python 编写代码，并从不同的变量中获取两个或多个单词并尝试在给定文本中找到匹配项。

例如，两个变量可能声明如下：

```
string1 = 'Polluted' 
string2 = 'air' 
```

匹配的文本可能是：

`'Polluted\t\t\t air '`或`'Polluted\tair'`。

单词/标记之间也可能有多个空格。

我需要找到类似于以下内容的解决方案：`re.search(string1'\t+'string2,var)`

您能否提供解决方案以按预期实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:23:18.403

使用[`\s`](http://docs.python.org/library/re.html)相当于 set 的`[ \t\n\r\f\v]`内容，加上 Unicode 字符属性数据库中归类为空格的任何内容（如果`re.UNICODE`使用）。

```
>>> var = 'Polluted\t\t\t air, Polluted\tair'
>>> re.findall(re.escape(string1) + '\s+' + re.escape(string2), var)
['Polluted\t\t\t air', 'Polluted\tair']

>>> re.search('(\w+)\s+(\w+)', 'Polluted\t\t\t air').groups()
('Polluted', 'air') 
```

# scala - 为什么有时 scala 编译器以不同的方式解释空格和点

> ID：10827839
> 
> 赞同：1
> 
> 时间：2012-05-31T05:20:52.453
> 
> 标签：scala

例如，如果我写这个函数：

```
def function1() : Unit = {            
 aVar = myList.map { ( s :Something ) => (s.id, s.name) } toList
 function2()
}

def function2() : Unit = {
   //bla
} 
```

编译器在调用时会抱怨`function2`expecting `Int`but found `Unit`。我只是无法弄清楚所需的`Int`来自哪里。

现在，如果我`function1`按如下方式编写，它将完全按照我的预期编译和工作：

```
def function1() : Unit = {            
     aVar = myList.map { ( s :Something ) => (s.id, s.name) } toList
     var x = function2()
} 
```

为什么！！！！？？？？只是分配`function2`一个`var`改变行为？首先`function2`定义为返回`Unit`...

接下来它变得更加纠结，接下来的两个`function1`定义中的任何一个都可以完美地工作：

```
def function1() : Unit = {            
         aVar = myList.map { ( s :Something ) => (s.id, s.name) }.toList
         function2()
    }

def function1() : Unit = {            
         aVar = (myList.map { ( s :Something ) => (s.id, s.name) } toList)
         function2()
    } 
```

看起来有一个空格而不是一个点有时可能很危险，但我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:20:18.920

使用空间而不是`.`在 scala 中应该**最好**通过以下方式与一个参数函数一起使用：

```
myObject itsFunction param 
```

因此，当您键入 myMap 时`toList`，编译器仍在等待一个参数，并从下一行代码中获取它，而当您键入`myMap.toList`它时，它不会等待任何内容，它会将 function2 视为独立指令。`function2`当您将结果分配给 a时，情况完全相同`var`。编译器一看到`var`声明，就知道前面的语句是关闭的，不再需要参数。

在这里，您应该想知道编译器期望什么参数，因为`toList`不需要任何参数。实际上，`toList`返回一个`List`并`List`有一个`apply`方法......这正是编译器正在等待的：`List`apply 方法的参数。

也许这个 REPL 会话会帮助你：

```
scala> Map(1 -> 2) toList 0
res0: (Int, Int) = (1,2) 
```

# windows - 使用 RaiseEvent 语句引发事件 VB.NET

> ID：10827841
> 
> 赞同：-1
> 
> 时间：2012-05-31T05:21:02.050
> 
> 标签：windows, vb.net, aforge, raiseevent

我收到此错误：

> 错误 1 ​​'Public Event NewFrame(sender As Object, eventArgs As
> AForge.Video.NewFrameEventArgs)' 是一个事件，不能直接调用。
> 使用“RaiseEvent”语句来引发事件。
> C:\Users\Jonathan\Documents\Visual Studio 2010\Projects\Stream\Stream\Form1.vb
> 9 9 流

我的代码是：

![在此处输入图像描述](../Images/b7254858ed7c79cf7956ddc675e7de9f.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T05:54:22.750

不是 VB 爱好者，但我不认为您在 VB 中订阅事件的方式。尝试：

```
Dim stream As New MJPEGStream("...")
AddHandler stream.NewFrame, AddressOf Me.video_NewFrame
... 
```

# sql-server - 从数据库中获取高于平均水平的学生

> ID：10827852
> 
> 赞同：1
> 
> 时间：2012-05-31T05:22:47.360
> 
> 标签：sql-server, tsql, average

我创建了一个包含以下内容的视图：

```
 student_full_name    subject_code    result
 Jennifer Higgins     CS1234          81
 Jennifer Higgins     CS1235          90
 Kal Penn             CS1234          70
 Kal Penn             CS1235          60
 Han Solo             CS1234          45
 Han Solo             CS1235          70 
```

我试图得到：

1.  每个学生的平均成绩，比如 Jennifer Higgins 就读于 CS1234 和 CS1235。她的平均分数是 85.50。

2.  然后将 Jennifer Higgins 的分数与所有注册的平均分数进行比较，因此将所有科目的 AVG（结果）相加。

3.  然后查询将列出所有得分高于平均分的学生。

我知道我必须在这里使用子查询才能获得所有结果的 AVG。嗯，这是一种伪代码。我很困惑，因为我不确定如何使子查询与查询结果进行比较。我很确定我需要两个 group by 语句，一个用于按 student_full_name 分组，另一个用于获得所有平均结果。

```
 SELECT student_full_name,
        AVG(results) AS average_result
 FROM viewEnrol
 WHERE average_result > ( SELECT (AVG(results))
                          FROM viewEnrol

 GROUP BY student_full_name 
```

//编辑

输出应该看起来像。Kal Penn 和 Han Solo 没有被列出，因为他们没有达到平均水平。所有科目的平均分是 69.33。Han Solo 得到 57.5，Kal Penn 得到 65。

```
 student_full_name    subject_code    result
 Jennifer Higgins     CS1234          85.5 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:29:23.823

如果要在聚合*后*`avg`过滤结果（如），则需要使用`having`而不是`where`.

一般规则是：

*   `where`在聚合发生*之前*过滤您从实际数据库中获得的原始（非聚合）行；和
*   `having`过滤最终交付给您的（可能是聚合的）行。

类似的东西（虽然未经测试）：

```
SELECT   student_full_name,
         AVG (results) AS average_result
FROM     viewEnrol
GROUP BY student_full_name
HAVING   AVG (results) > ( SELECT AVG (results) FROM viewEnrol ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T05:34:21.023

这应该可以完成这项工作。第一个内部查询将为您提供所有学生的平均结果。而第二个将给出表格的平均值。

```
 SELECT student_full_name 
    FROM (SELECT student_full_name,
                 AVG(results) AS average_Sresult
          FROM viewEnrol
          GROUP BY student_full_name) sre, 
         (SELECT (AVG(results)) tavg
          FROM viewEnrol) ta
     WHERE sre.average_Sresult > ta.tavg 
```

PS：你不应该取平均值而不是取所有结果的平均值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:34:39.997

获取平均结果应该只是过滤的问题，因此在计算全局平均值时不需要引用外部查询。您的伪代码非常接近您的需要。您可能希望将 where 子句转换为 having 子句。您似乎也在比较高于平均水平的学生 - 而不是表现高于净平均水平的学生。确保你完全清楚平均值的定义是什么。

这张表格上的东西：

```
select student_full_name, avg(results) as avg_result
from viewEnrol
group by student_full_name
having avg(results) > (
    select avg(avg_results)
    from (
        select name, avg(results) as avg_results
        group by student_full_name
        )
    ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T05:58:31.217

每个问题作为解决方案，我创建了一个表

```
CREATE TABLE STUD
(SNAME varchar(20),
 SCODE NUMBER    PRIMARY KEY,
 MARKS NUMBER(4,2)) 
```

插入的值

```
SNAME   SCODE   MARKS
--------------------
SAM     1001    90
VAS     1001    80
SAM     1002    60
ANAND   1001    80
VAS     1002    70
ANAND   1002    50 
```

查询是

```
SELECT SNAME,AVG(MARKS) FROM STUD GROUP BY SNAME HAVING AVG(MARKS)>=
(SELECT MAX(MARKS ) FROM STUD WHERE SNAME='VAS') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-05T12:17:05.207

```
select * from viewEnrol group by student_full_name having result>( select avg(result) from Student); 
```

# objective-c - 将图像添加到字典 iPhone VS iPad

> ID：10827854
> 
> 赞同：0
> 
> 时间：2012-05-31T05:23:07.950
> 
> 标签：objective-c, image, ipad, dictionary

我有一个非常奇怪的问题，我无法理解。我创建了一个仅限 iPhone 的应用程序，它完全按照我在 iPhone 上的要求运行；但是，在 iPad 上一次又一次地崩溃。我正在使用以下代码将礼物图像添加到字典中：

```
 [dictionary setObject:giftImage forKey:key]; 
```

在 iPhone 上这工作正常；但是，在 iPad 上，它会导致以下异常：

```
-[__NSCFDictionary setObject:forKey:]: attempt to insert nil value (key: A877373A-B588-4631-A850-06C2F23A45F7) 
```

我不明白为什么在使用 iPad 时图像会为零，但会在 iPhone 上正确创建。

任何帮助将不胜感激！

编辑：

我做了更多的测试，并且在 iPhone 上的 giftImage 被赋予了一个值；然而，在 iPad 上它是空的，但我不知道为什么......

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage *giftImage = [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T06:48:32.377

查看`info`提供给图像选择器委托方法的字典中的其他键，您可能会明白为什么图像不在您期望的位置。

# android - 从 SQLiteDatabase 检索数据并将其显示在新活动中

> ID：10827862
> 
> 赞同：0
> 
> 时间：2012-05-31T05:23:59.730
> 
> 标签：android, database, sqlite, android-listview, data-retrieval

我可以从我的 in 中填充我`ListView`的项目。现在我想点击一个项目（里面共有 8 个项目）并转到一个名为的新活动并显示它的所有营养成分。`SQLiteDatabase``lunch.java``ListView``Display.java`

**编辑后**

**午餐.java：**

```
public void onItemClick(AdapterView<?> parent, View v, int pos, long id) {
    switch(pos)

    {
    case 0 :
        String mealName = (String) parent.getItemAtPosition(pos);
        Cursor cursor = dbopener.getBreakfastDetails(mealName);
        cursor.moveToNext();
        id = cursor.getLong(cursor.getColumnIndex(mealName));
        String message = cursor.getString(1)  + "\n" + cursor.getInt(2);
        Intent event1 = new Intent("com.edu.tp.iit.mns.Display");
        event1.putExtra("name", id);
        startActivity(event1);
        break; 
```

**显示.java**

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);

        TextView tv = (TextView) findViewById(R.id.tvfoodName);     

        Intent intent = getIntent();
        long id = intent.getLongExtra("name", -1);
        if(id == -1){
            return;
        }

        tv.setText(-1); 

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T05:05:50.300

在`onItemcClick`您已经拥有`id`被单击的元素的`id`参数。使用它来识别下一个活动中的项目：

```
public void onItemClick(AdapterView<?> parent, View v, int pos, long id) {    
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    newActivity.putExtra("the_key", id);
    startActivity(newActivity);
} 
```

然后在您的`Display`活动中获取该长值并从数据库中获取与该值对应的数据`id`：

```
Intent newActivity = getIntent();
long id = newActivity.getLongExtras("the_key", -1);
if (id == -1) {
    //something has gone wrong or the activity is not started by the launch activity
    return
}
//then query the database and get the data corresponding to the item with the id above 
```

上面的代码适用于`Cursor`基于适配器的情况。但是您可能使用基于列表的适配器（因为`getItemAtPosition(pos)`返回 a`String`而不是 a `Cursor`）。在这种情况下，我将使用该`getLunchDetails`方法返回该`id`餐名的唯一性并将其传递给`Details`活动：

```
public void onItemClick(AdapterView<?> parent, View v, int pos, long id) {
    String mealName = (String)parent.getItemAtPosition(pos);
    Cursor cursor = dbopener.getLunchDetails(mealName);
    cursor.moveToNext();
    long id = cursor.getLong(cursor.getColumnIndex("the name of the id column(probably _id"));
    Intent newActivity = new Intent("com.edu.tp.iit.mns.Display");
    newActivity.putExtra("the_key", id);
    startActivity(newActivity);
} 
```

# graph - 随机数据的可视化

> ID：10827866
> 
> 赞同：0
> 
> 时间：2012-05-31T05:24:34.940
> 
> 标签：graph, visualization, d3.js

我有一个应用程序每秒生成随机数据集，例如：

```
Dataset 1:
[{time:"00:00:01",class:"Class_A",stats:"45"}]

Dataset 2:
[{time:"00:00:02",class:"Class_A",stats:"50"},{time:"00:00:02",class:"Class_B",stats:"45"}]

Dataset 3:
[{time:"00:00:03",class:"Class_A",stats:"30"}]

Dataset 4:
[{time:"00:00:04",class:"Class_A",stats:"60"}]

Dataset 5:
[{time:"00:00:05",class:"Class_A",stats:"50"}]

Dataset 6:
[{time:"00:00:06",class:"Class_A",stats:"10"},{time:"00:00:06",class:"Class_B",stats:"60"}]
.
.
. 
```

因此，在特定秒，系统生成了一个新数据集，我们事先不知道其数据将出现的类，例如在第 2 秒，数据集包含 A 类和 B 类的数据，但在接下来的三秒内，B 类的数据没有出现，顺便说一句，这并不意味着 B 级的统计数据等于零。当特定数据集的数据没有出现时，根本不应该绘制它。

可视化这种不相交数据的最佳方法是什么？我正在考虑使用 d3.js 在实时多折线图的帮助下对其进行可视化，但 d3 会期望在特定实例中为每个类提供数据，否则它将显示为零，而当数据不存在时，它的线不应该完全被绘制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:42:48.270

我会将其显示为点。在将数据传递给 d3 之前，对其进行重组，以便特定类的数据点一起在一个数组中。也就是说，将`.data()`一个数组数组传递给函数，其中顶级数组的第一个元素是一个数组，其中包含 Class_A 的数据，第二个元素是 Class_B 的数据，依此类推。

这样，您可以简单地绘制它们出现的点，而不必担心间隙。

# c# - 为什么我的值会级联到列表中的每个其他索引中？

> ID：10827867
> 
> 赞同：2
> 
> 时间：2012-05-31T05:24:39.463
> 
> 标签：c#

有另一个我不太确定的 C# 问题。我知道问题出在哪里，但不明白为什么会发生。

我正在使用 List.Add(); 满足某些条件时添加 int[] 的方法。我发现当循环完成并且我应该包含所有值时，每个索引中的所有值都是相同的。

在调试期间，我发现它正确添加了第一个，但是当添加第二个时，它会覆盖第一个但也添加了第二个。我以前从未见过 List.Add() 发生这种情况，但也许是因为我这次存储的是 int[] 对象？

这是添加所有内容的代码。对我来说看起来无害，但这可能是我缺乏知识的地方：

```
NumbersForTriples[0] = (int)Math.Sqrt(a);
NumbersForTriples[1] = (int)Math.Sqrt(b);
NumbersForTriples[2] = (int)Math.Sqrt(c);
Triples.Add(NumbersForTriples); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:29:50.640

我认为您只初始化 NumbersForTriplets 一次。您应该`NumbersForTriplets = new int[3]`在每个序列语句之前执行计算平方根并将数组添加到列表中，否则您将一次又一次地覆盖相同的内存部分并将相同的指针添加到列表中多次。

# asp.net - 如何使用 c# 访问 web config 中的文件夹路径

> ID：10827870
> 
> 赞同：2
> 
> 时间：2012-05-31T05:24:54.847
> 
> 标签：asp.net, c#-4.0

如何使用 c# 代码从 web.config 访问文件夹路径。这是一个示例代码。

如何将此路径放在网络配置中`C:\\whatever\\Data\\sample.xml`

我必须从网络配置中读取此路径。

```
string folderpath = ConfigurationSettings.AppSettings["path"].ToString();

using (XmlWriter xw = XmlWriter.Create(folderpath, new XmlWriterSettings { Indent = false })) 
```

请帮忙.....

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T05:32:22.573

这是一些可以帮助您的示例代码

这将进入您的 web.config。

```
<configuration>
    <appSettings>
        <add key="myFilePath" value="C:\\whatever\\Data\\sample.xml"/>
    </appSettings>
</configuration> 
```

这就是您阅读它的方式：

```
path = System.Web.Configuration.WebConfigurationManager.AppSettings["myFilePath"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:37:31.777

配置文件。

```
 <configuration>
      <appSettings>
        <add key="path" value="c:\dev"/>
      </appSettings>
    </configuration> 
```

访问它的代码。

```
 string path = System.Configuration.ConfigurationSettings.AppSettings["path"].ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:42:21.693

我建议你创建一个`SettingsManager`类，它有两种方法：

```
public class SettingsManager
{
    public string Get(string key) 
    {
       // Reading settings from anywhere, in your case from web.config;
    }

    public string Save(string key, string value)
    {
       // Saving settings in a storage, here in web.config; 
    }
} 
```

然后从 web.config 中读取，只需使用`WebConfigurationManager`using：

```
return WebConfigurationManager.AppSettings[key]; 
```

# c# - C#(ASP.NET) 中的缓存

> ID：10827871
> 
> 赞同：2
> 
> 时间：2012-05-31T05:24:55.883
> 
> 标签：c#, asp.net

我正在尝试在我的程序中实现缓存。我有一个 Web 应用程序，可让用户访问某些学习课程。当用户登录时，我从我们的数据库中对他进行身份验证。现在，如果从列表中访问不同的课程，我不想返回数据库。相反，我想将值存储在缓存中，让我们说 20 分钟。程序应该 1) 对用户进行身份验证，并让他访问课程。如果他改变了课程，程序应该在缓存中查找。如果用户 id 存在，让他访问课程而无需返回服务器。2) 提供一种机制，如果 20 分钟后用户仍在系统上，则自动更新时间。因此，用户不会被注销。我尝试过这样的事情

```
Cache ch = new Cache();
ch.Add("key","value); 
```

但我在第二条语句中得到空引用异常。我以前从未使用过缓存，因此将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:29:10.177

好吧，这就是我使用它的方式：

```
/// <summary>
/// Get Data
/// </summary>
/// <returns>data</returns>
public static ElementOut GetData()
{
    //function return value
    ElementOut functionReturnValue = new ElementOut();

    try
    {
        string key = "data";
        if (HttpRuntime.Cache[key] == null)
        {
            //fetch data
            var data = CreateBLLAdapter().GetData();

            //validate data
            if (data == null) throw new Exception("data is empty!");

            //set cache to 12 hours
            DateTime timeToExpire = DateTime.Now.AddHours(12);

            //set cache
            HttpRuntime.Cache.Insert(key, data, null, timeToExpire, Cache.NoSlidingExpiration);
        }

        //set return from cache
        functionReturnValue = (ElementOut)HttpRuntime.Cache[key];

    }
    catch (Exception ex)
    {
        //Log.WriteServerErrorLog(ex);
    }

    return functionReturnValue;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:34:20.343

`Cache`当前 HTTP 上下文的使用：

`HttpContext.Current.Cache`

描述：当一个新的 HTTP 请求到来时，应用程序会在一个通常称为**Request Process Pipeline**的管道中处理该请求，也就是说，它会一个接一个地对请求执行一些操作，然后再将请求交给您的处理程序进行处理。

ASP.NET 执行的操作之一是根据某些参数加载会话和缓存数据。

`HttpContext.Current.Cache`是加载的缓存，你可以使用它。然后，当您在该缓存中存储某些内容时，ASP.NET 再次负责存储该缓存并将其保存在下一个 HTTP 请求中。

您还可以使用页面的属性访问该全局对象`Cache`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:30:55.830

如果您在 ASP.NET 中开发，您可以简单地使用[ASP.NET session store](http://msdn.microsoft.com/en-us/library/ms178581.aspx)，它为每个用户存储值，只要他的会话持续（默认情况下是他最后一次操作后的 20 分钟）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T05:31:55.600

您可以尝试输出缓存。

请参阅下面的链接了解更多详情。 [http://msdn.microsoft.com/en-us/library/ms178597.aspx](http://msdn.microsoft.com/en-us/library/ms178597.aspx)

# java - String replace() 和 replaceAll() 的区别

> ID：10827872
> 
> 赞同：279
> 
> 时间：2012-05-31T05:24:58.027
> 
> 标签：java, string, replace

`replace()`java.lang.String和方法之间有什么区别`replaceAll()`，除了后来使用正则表达式？对于像替换这样的简单替换`.`，`/` 有什么区别吗？

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2012-05-31T05:28:07.683

在[`java.lang.String`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html)中，该`replace`方法要么采用一对 char ，要么采用一对`CharSequence`'（其中 String 是一个子类，因此它很乐意采用一对 String）。该`replace`方法将替换所有出现的 char 或`CharSequence`. 另一方面， and的第一个`String`参数是正则表达式（regex）。使用错误的函数可能会导致细微的错误。`replaceFirst``replaceAll`

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2012-05-31T05:29:13.230

**问：**除了后者使用正则表达式之外，`java.lang.String`方法`replace()`和之间有什么区别。`replaceAll()`

**答：**只是正则表达式。他们都**替换了所有**:)

[http://docs.oracle.com/javase/8/docs/api/java/lang/String.html](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html)

PS：

还有一个`replaceFirst()`（需要一个正则表达式）

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2017-11-14T02:28:19.820

两者都`replace()`替换`replaceAll()`字符串中的所有匹配项。

# 例子

我总是找到有助于理解差异的示例。

# [`replace()`](https://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence))

如果`replace()`您只想用另一个替换一些`char`或`char`用`String`另一个替换一些`String`（实际上`CharSequence`），请使用。

**示例 1**

`x`用替换所有出现的字符`o`。

```
String myString = "__x___x___x_x____xx_";

char oldChar = 'x';
char newChar = 'o';

String newString = myString.replace(oldChar, newChar);
// __o___o___o_o____oo_ 
```

**示例 2**

`fish`用替换所有出现的字符串`sheep`。

```
String myString = "one fish, two fish, three fish";

String target = "fish";
String replacement = "sheep";

String newString = myString.replace(target, replacement);
// one sheep, two sheep, three sheep 
```

# [`replaceAll()`](https://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String))

`replaceAll()`如果您想使用正[则表达式模式](https://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)，请使用。

**示例 3**

用 替换任何数字`x`。

```
String myString = "__1_6____3__6_345____0";

String regex = "\\d";
String replacement = "x";

String newString = myString.replaceAll(regex, replacement); 
// __x_x____x__x_xxx____x 
```

**示例 4**

删除所有空格。

```
String myString = "   Horse         Cow\n\n   \r Camel \t\t Sheep \n Goat        ";

String regex = "\\s";
String replacement = "";

String newString = myString.replaceAll(regex, replacement); 
// HorseCowCamelSheepGoat 
```

# 也可以看看

文档

*   [`replace(char oldChar, char newChar)`](https://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace(char,%20char))
*   [`replace(CharSequence target, CharSequence replacement)`](https://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace(java.lang.CharSequence,%20java.lang.CharSequence))
*   [`replaceAll(String regex, String replacement)`](https://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String))
*   [`replaceFirst(String regex, String replacement)`](http://replaceFirst(String%20regex,%20String%20replacement))

常用表达

*   [教程](http://www.ocpsoft.org/opensource/guide-to-regular-expressions-in-java-part-1/)
*   [模式列表](https://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2012-05-31T05:33:22.237

该`replace()`方法被重载以接受原语`char`和 a`CharSequence`作为参数。

现在就性能而言，该`replace()`方法比后者要快一点，`replaceAll()`因为后者首先编译正则表达式模式，然后在最终替换之前匹配，而前者只是匹配提供的参数并替换。

由于我们知道正则表达式模式匹配有点复杂，因此速度较慢，因此建议尽可能`replace()`优先使用。`replaceAll()`

例如，对于您提到的简单替换，最好使用：

```
replace('.', '\\'); 
```

代替：

```
replaceAll("\\.", "\\\\"); 
```

注意：上述转换方法参数是系统相关的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-02-17T06:13:46.483

1.  replace() 和 replaceAll() 都接受两个参数，并用第二个子字符串（第二个参数）替换字符串中第一个子字符串（第一个参数）的所有出现。
2.  replace() 接受一对 char 或 charsequence，replaceAll() 接受一对正则表达式。
3.  replace() 比 replaceAll() 工作得更快是不正确的，因为两者在其实现中使用相同的代码

    Pattern.compile(regex).matcher(this).replaceAll(replacement);

现在的问题是什么时候使用replace，什么时候使用replaceAll()。当您想用另一个子字符串替换一个子字符串时，无论它在字符串中出现的位置如何，请使用 replace()。但是，如果您有一些特殊的偏好或条件，例如仅替换字符串开头或结尾的那些子字符串，请使用 replaceAll()。下面举几个例子来证明我的观点：

```
String str = new String("==qwerty==").replaceAll("^==", "?"); \\str: "?qwerty=="
String str = new String("==qwerty==").replaceAll("==$", "?"); \\str: "==qwerty?"
String str = new String("===qwerty==").replaceAll("(=)+", "?"); \\str: "?qwerty?" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-30T07:34:37.930

```
String replace(char oldChar, char newChar) 
```

返回一个新字符串，该字符串是用 newChar 替换此字符串中所有出现的 oldChar 所产生的。

```
String replaceAll(String regex, String replacement 
```

用给定的替换替换此字符串中与给定正则表达式匹配的每个子字符串。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-05-24T08:37:10.110

举一个例子来说明两者如何在以下代码中工作：

```
public static void main(String[] args)
{
    String s = "My\\s aaab\\s is\\s aaab\\s name";
    String s1 = s.replace("\\s", "c");
    System.out.println(s1);
    String s2 = s.replaceAll("\\s", "c");
    System.out.println(s2);
} 
```

**输出：**

```
Myc aaabc isc aaabc name
My\scaaab\scis\scaaab\scname 
```

**解释**

s.replace 用 c 替换 "\\s" 字符序列。因此，第一行的输出。s.replaceAll 将 \\s 视为一个正则表达式（相当于空格）并用 c 替换空格。String s 中的 \\s 与遇到的第一个 \ 一起转义并变为 \s。

Intellij Idea 足够聪明，可以通知您使用情况。如果您仔细查看下图，您会看到 Intellij idea 对 replace 和 replaceAll 用法的解释不同。

[![在此处输入图像描述](../Images/96fe0f6979be2027cb8c6116b1ea93e8.png)](https://i.stack.imgur.com/ICXW7.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-24T21:58:55.693

正如 wickeD 的回答中提到的那样，使用 replaceAll 替换字符串在 replace 和 replaceAll 之间的处理方式不同。我希望 a[3] 和 a[4] 具有相同的值，但它们是不同的。

```
public static void main(String[] args) {
    String[] a = new String[5];
    a[0] = "\\";
    a[1] = "X";
    a[2] = a[0] + a[1];
    a[3] = a[1].replaceAll("X", a[0] + "X");
    a[4] = a[1].replace("X", a[0] + "X");

    for (String s : a) {
        System.out.println(s + "\t" + s.length());
    }
} 
```

这个的输出是：

```
\   1
X   1
\X  2
X   1
\X  2 
```

这与 perl 不同，其中替换不需要额外的转义级别：

```
#!/bin/perl
$esc = "\\";
$s = "X";

$s =~ s/X/${esc}X/;
print "$s " . length($s) . "\n"; 
```

打印 \X 2

这可能很麻烦，因为当尝试将 java.sql.DatabaseMetaData.getSearchStringEscape() 返回的值与 replaceAll() 一起使用时。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-03T13:49:31.197

从 Java 9 开始，replace 方法进行了一些优化。

在 Java 8 中，它使用正则表达式。

```
public String replace(CharSequence target, CharSequence replacement) {
    return Pattern.compile(target.toString(), Pattern.LITERAL).matcher(
            this).replaceAll(Matcher.quoteReplacement(replacement.toString()));
} 
```

从 Java 9 开始。

[![在此处输入图像描述](../Images/ef2934a2c4790643eefb7571607435aa.png)](https://i.stack.imgur.com/TMb7B.png)

和 Stringlatin 实现。

[![在此处输入图像描述](../Images/1dd4a15e054b8debeabc2f855bed4edb.png)](https://i.stack.imgur.com/7RW94.png)

哪个表现更好。

[https://medium.com/madhash/composite-pattern-in-a-nutshell-ad1bf78479cc?source=post_internal_links---------2--------------- ---](https://medium.com/madhash/composite-pattern-in-a-nutshell-ad1bf78479cc?source=post_internal_links---------2------------------)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-22T13:18:50.187

我知道旧线程，但我对 Java 有点陌生，发现其中一件很奇怪的事情。我使用过`String.replaceAll()`但得到不可预测的结果。

像这样的东西弄乱了字符串：

```
sUrl = sUrl.replaceAll( "./", "//").replaceAll( "//", "/"); 
```

所以我设计了这个函数来解决这个奇怪的问题：

```
//String.replaceAll does not work OK, that's why this function is here
public String strReplace( String s1, String s2, String s ) 
{
    if((( s == null ) || (s.length() == 0 )) || (( s1 == null ) || (s1.length() == 0 )))
     { return s; }

   while( (s != null) && (s.indexOf( s1 ) >= 0) )
    { s = s.replace( s1, s2 ); }
  return s;
} 
```

这使您能够做到：

```
sUrl=this.strReplace("./", "//", sUrl );
sUrl=this.strReplace( "//", "/", sUrl ); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-10T07:07:37.837

`replace()`方法不使用正则表达式模式，而`replaceAll()`方法使用正则表达式模式。所以`replace()`执行速度比`replaceAll()`.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-07T21:28:59.760

添加到已经选择的“最佳答案”（以及其他与 Suragch 一样好的答案），`String.replace()`受到替换顺序字符的限制（因此采用`CharSequence`）。但是，`String.replaceAll()`不仅限于替换连续字符。只要您的正则表达式是以这种方式构造的，您就可以替换非连续字符。

此外（最重要且非常明显）`replace()`只能替换文字值；而`replaceAll`可以替换“喜欢”的序列（不一定相同）。

* * *

## 回答 #13

> 赞同：-5
> 
> 时间：2012-05-31T05:35:51.733

replace 适用于 char 数据类型，但 replaceAll 适用于 String 数据类型，并且都将第一个参数的所有出现替换为第二个参数。

# jakarta-ee - 网络消息彗星跨域bayeux webmsgServlet

> ID：10827885
> 
> 赞同：0
> 
> 时间：2012-05-31T05:26:39.463
> 
> 标签：jakarta-ee, servlets, dojo, websphere, bayeux

我正在使用订阅 SIBus jms 主题的 phonegap 编写移动应用程序。

首先，我能够在配置后运行演示，但我无法从不同的域运行它，因为应用程序必须在服务器的外部域上运行。

我对 web 服务的跨域 ajax 调用有很多问题，解决方案是将标头更改为`header("Access-Control-Allow-Origin", "*");` 我正在考虑如何解决此问题以将标头更改为传入请求

```
dojo.require("dojox.cometd");
   dojo.addOnLoad(function(){
      dojox.cometd.init("http://localhost:9080/ClientWeb/webmsgServlet");
      dojox.cometd.subscribe("/T.Frs", window, "display");
     }
   );
   function display(msg) {
   console.log(msg);
       alert("Message " + msg.data.test);
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:36:31.600

看看 Jetty 的[CrossOriginFilter](http://wiki.eclipse.org/Jetty/Feature/Cross_Origin_Filter)，它是一个可移植的过滤器，您可以在任何实现 CORS 规范的 servlet 容器中运行，让您可以无缝访问跨源资源。

CometD 默认在演示中提供此过滤器，因此您可以在那里查看配置方式，或查看[CometD 参考](http://docs.cometd.org/reference/)，第 5.4.1.3 节。

# ajax - ASP.NET MVC 并将不同的模型提交给 Action

> ID：10827886
> 
> 赞同：0
> 
> 时间：2012-05-31T05:26:43.450
> 
> 标签：ajax, asp.net-mvc-3, model

我有一个场景，我有一个从同一个基类 ( `BaseFilter`) 继承的过滤器列表。这会根据用户的选择以一定的顺序用不同的模板呈现在几个模板中。通过 javascript 获取该数据并通过 ajax 请求将其提交给强类型`List<IBaseFilter>`的`ActionResult`. 我应该使用模型活页夹，如果是的话，如何使用列表`IFilters`？

```
public ActionResult Save(List<IFilter> filters)
{
}

public FirstFilter : BaseFilter {
  // Has Two Properties
}

public SecondFilter : BaseFilter {
  // Has One Property
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:47:24.570

基本上，Binders 获取 FormCollection 中的内容，并将它们转换为适合您的模型对象。您可能可以创建一个自定义的活页夹（IModelBinder 实现）来为您完成所有这些工作。请参阅[这篇文章](http://develoq.net/2011/asp-net-mvc-model-binders-and-how-to-create-custom-model-binder/)以了解它们的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:32:39.423

从子级转换为父级意味着您丢失了所有子级属性，而您只能获得父级属性。如果您对绑定过滤器建模，`IFilter`那么您只能使用现有的属性`IFilter`。我建议您创建两个操作方法，并尽可能连续保存过滤器，并在这些操作中使用强类型模型绑定。另一种选择可能是将数据发送到操作方法，但手动从 HTTP 请求中提取信息，而不是让 ASP.NET MVC 将传入参数绑定到您的`List<IFilter>`参数。

# plsql - 在 Oracle DBMS_OBFUSCATION_TOOLKIT.MD5 中将 NVARCHAR2 转换为 MD5 哈希

> ID：10827888
> 
> 赞同：1
> 
> 时间：2012-05-31T05:26:47.620
> 
> 标签：plsql, oracle11g, md5sum

```
DECLARE
  l_string  NVARCHAR2(600) := '123456';
  checksum  NVARCHAR2(600);

BEGIN

   DBMS_OUTPUT.DISABLE;
   DBMS_OUTPUT.ENABLE(1000000);

   DBMS_OBFUSCATION_TOOLKIT.md5 (input_string  => l_string, checksum_string => checksum);

   DBMS_OUTPUT.PUT_LINE(RAWTONHEX(utl_raw.cast_to_raw(checksum)));

END; 
```

期望值：e10adc3949ba59abbe56e057f20f883e

但它返回：FFFD00390049FFFD0059FFFDFFFD0056FFFD000FFFFD003E

注意我想维护 nvarchar2 数据类型。校验和变量的值存储在 nvarchar2 类型的列中。

我知道 md5 接受并返回 varchar2 中的数据。但是，如果有人可以使用 nvarchar2 数据类型帮助我解决这个问题，那就太好了。

NLS_CHARACTERSET = AL32UTF8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:01:36.040

以下应该通过 dbms_crypto 使用 hash()

```
declare
  l_src nvarchar2(100) := '123456';
  l_raw_hash raw(100);
begin
  l_raw_hash := dbms_crypto.hash(to_clob(l_src), dbms_crypto.HASH_MD5);
  dbms_output.put_line(l_raw_hash);
end; 
```

结果：E10ADC3949BA59ABBE56E057F20F883E

l_raw_hash 将是原始格式。您可以使用 UTL_RAW 将其转换为另一种数据类型。只需确保您的显示器显示正确的字符集，否则看起来会很有趣。

# eclipse - Eclipse CDT 可以在我键入时检查语法错误吗？

> ID：10827890
> 
> 赞同：1
> 
> 时间：2012-05-31T05:27:04.157
> 
> 标签：eclipse, eclipse-cdt

我正在使用 Eclipse Juno 4.2 和 CDT 8.1，它们运行良好。但是有一些问题：Eclipse 可以警告我一些拼写错误，比如缺少 ; 和拼写错误的名称。但它可以警告我错误，例如将错误的参数传递给函数，或使用非法参数初始化对象。这些只能在构建之后显示。此外，键入包含在另一个构建之前不会显示效果。有什么方法可以显示这些错误并使 include 立即可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:08:38.007

并不真地。CDT 调用您的编译器来查找所有语法和语义错误。

您可以从索引器获得更多错误报告：

*   转到 Window > Preferences > General > Editors > Text Editors > Annotations 并打开 C/C++ Indexer Markers
*   转到 Window > Preferences > C/C++ > Editor > Syntax Coloring，然后选择 Code > Problems 并单击 Enable 复选框。

此外，如果您打开了 codan，它也应该报告一些错误。

# javascript - 如何从对象字面量数组中切片数组？

> ID：10827894
> 
> 赞同：6
> 
> 时间：2012-05-31T05:27:30.473
> 
> 标签：javascript, arrays, sorting, slice, object-literal

我有这个数组，其中每个索引都包含一个对象文字。所有对象字面量都具有相同的属性。某些对象文字对于给定属性具有相同的值，我想创建一个**仅**包含这些对象文字的新数组。

我的想法是对数组进行排序，并将其切片成一个新数组......

这是数组：

```
var arr = [];

arr[0] =
{
    country: "United States",
    num: 27
};

arr[1] =
{
    country: "Australia",
    num: 5
};

arr[2] =
{
    country: "United States",
    num: 7
}; 
```

所以，我想创建一个新数组，其中只包含属性`country`为“美国”的那些对象。到目前为止，这是我的疯狂想法，但它不起作用：

```
function getNewArray(arr)
{
    var arr2 = [];

    for(var key in arr)
    {
        for(var i = 0; i < arr.length - 1; i++)
        {
            if(arr.hasOwnProperty(key) && arr[i].name == arr[i + 1].name)
            {
                    arr2[i] = arr.slice(key);
            }
        }
    }

    return arr2;
}

var arr3 = getNewArray(arr).sort(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:35:10.063

> *“我想创建一个新数组，其中仅包含属性国家为“美国”的那些对象”*

这正是该[`Array.filter()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)的用途：

```
var filteredArray = arr.filter(function(val, i, a) {
                                  return val.country==="United States";
                    }); 
```

请注意，该`.filter()`方法在版本 9 之前的 IE 中不可用，但我上面链接到的 MDN 页面向您展示了如何实现它，因此阅读该页面本身就应该回答您的问题。

另请注意，在问题的（非工作）代码中，您的两个`for`循环基本上彼此做同样的事情，因为它们都在迭代`arr`，所以像这样嵌套它们没有意义。您不应该在数组上使用 for..in 循环，但是如果您这样做，`key`值将是数字索引，它不会以某种方式获取存储在每个索引处的对象的属性。

编辑：

> *“某些对象文字对于给定属性具有相同的值，我想创建一个仅包含这些对象文字的新数组。”*

好的，重新阅读我猜您并不想通过指定国家/地区来选择元素，您想为任何具有重复条目的国家/地区选择元素？因此，如果还有另外三个元素都具有“新西兰”，那么*除了*“美国”元素之外，您还想选择它们吗？如果是这样，您可以执行以下操作：

```
var countryCount = {},
    i;
for (i = 0; i < arr.length; i++)
    if (countryCount.hasOwnProperty(arr[i].country)
       countryCount[arr[i].country]++;
    else
       countryCount[arr[i].country] = 1;

var filteredArr = arr.filter(function(val, i, a) {
                      return countryCount[val.country] > 1;
                  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:34:52.980

有一种更简单的方法，我认为这就是您想要 `var new_arr = arr.filter(function(obj){ return obj['country'] === 'United States'; })` 的 这会将您的结果过滤到 new_arr 当然，您可以使它比“美国”更好，更通用

编辑：哎呀，刚才有你的问题

答案：嵌套过滤器:)

```
function getKeyStuff(key) {
    return arr.filter( function(obj) { 
        var new_arr = arr.filter( function(inner_obj) { 
            return inner_obj[key] === obj[key]; 
        });
        return new_arr.length > 1; 
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T05:41:37.307

```
var getCountry = function (country) {
    var out = [];
    for (var i = 0, len = arr.length; i < len; i++)
        if (arr[i].country === country) out.push(arr[i]);
    return out;
}; 
```

**演示：http:** [//jsfiddle.net/YwytD/1/](http://jsfiddle.net/YwytD/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T05:34:32.663

这是我的解决方案：

```
// assuming arr is already set

var num_obj = arr.length;
var obj_by_country = {}, obj;
for (var i = 0; i < num_obj; i++) {
  obj = arr[i];
  if (!obj_by_country[obj.country]) {
    obj_by_country[obj.country] = [];
  }
  obj_by_country[obj.country].push(obj);
}

// build final array
var final_array = [];
for (i in obj_by_country) {
  if (obj_by_country[i].length > 1) {
    final_array.push(obj_by_country[i]);
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T05:38:14.867

可以用 JQuery 吗？

```
var arr = [];
arr[0] = { country: "United States", num: 27 };
arr[1] = { country: "Australia", num: 5 };
arr[2] = { country: "United States", num: 7 };

var newArray = [];
$.each(arr, function(){
   if(this.country == "United States")
      newArray.push(this);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T05:34:28.190

```
getByKey = function(arr, key, value) {
    var results = [];
    for(var i = 0; i < arr.length; i++) {
       if(arr[i][key] === value) {
           results.push(arr[i]);
       }
    }
    return results
} 
```

这是一个工作示例 [http://jsfiddle.net/michaelghayes/UyHYz/2/](http://jsfiddle.net/michaelghayes/UyHYz/2/)

# .net - .Net 中的 IOrderedEnumerable.ThenBy() 是如何工作的？

> ID：10827899
> 
> 赞同：14
> 
> 时间：2012-05-31T05:27:53.530
> 
> 标签：.net, vb.net, ienumerable, iorderedenumerable

我想了解 ThenBy 在 .Net 中的工作原理。（我知道怎么用，就是不明白微软是怎么实现的！）

根据文档，`string_list.OrderBy(Function (x) x.length).ThenBy(Function (x) x)`应该输出一个按长度排序的字符串列表，*然后*按字母顺序排列。它怎么可能起作用？！？第一种是按长度排序。第二个排序应该撤消第一个排序！

假设这段代码：

```
Dim sorted_by_length As IOrderedEnumerable(Of String)
sorted_by_length = string_list.OrderBy(Function (x) x.length)
sorted_by_length = sorted_by_length.ThenBy(Function 
```

这是我尝试在不使用的情况下实现最后一行`ThenBy`：

```
Dim sorted_by_length As IOrderedEnumerable(Of String)
sorted_by_length = string_list.OrderBy(Function (x) x.length)
'my implementation of OrderBy:
Dim e as IEnumerator(Of String) = sorted_by_length.GetEnumerator
Do While e.MoveNext
    'I have no idea what to write here!
Loop 
```

这里发生了一些魔术......是否有一些 e.GetPreviousKeySelector() 函数？事实上，我什至无法编写返回 IOrderedEnumerable 的函数！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T05:36:04.163

> 它怎么可能起作用？！？第一种是按长度排序。第二个排序应该撤消第一个排序！

不，第二次排序比较仅在主要比较找到两个相等的值时进行。

该`IOrderedEnumerable`实现通过有效地记住所有比较来做到这一点 - 或者，作为另一种说法，允许您从“当前比较和另一个在返回 0 时咨询的比较”构建比较。

我有一个[博客文章系列](https://codeblog.jonskeet.uk/2011/03/18/edulinq-the-e-book/)，它深入探讨了 LINQ to Objects，提供了一个完整的替代实现。[26a](https://codeblog.jonskeet.uk/2011/01/04/reimplementing-linq-to-objects-part-26a-iorderedenumerable.aspx)和[26b](https://codeblog.jonskeet.uk/2011/01/05/reimplementing-linq-to-objects-part-26b-orderby-descending-thenby-descending.aspx)`IOrderedEnumerable`部分介绍了的基础，[26c](https://codeblog.jonskeet.uk/2011/01/06/reimplementing-linq-to-objects-part-26c-optimizing-orderedenumerable.aspx)和[26d](https://codeblog.jonskeet.uk/2011/01/07/reimplementing-linq-to-objects-part-26d-fixing-the-key-selectors-and-yielding-early.aspx)部分提供了更多细节和优化。

> 事实上，我什至无法编写返回 IOrderedEnumerable 的函数！

您绝对可以 - 通过返回从 中返回的值`OrderBy`，或者自己实现它。

# java - 使用休眠时数据库连接过多

> ID：10827901
> 
> 赞同：1
> 
> 时间：2012-05-31T05:28:21.203
> 
> 标签：java, oracle, spring, hibernate

我是新来的冬眠和春天。我们有一个基于 Spring 的服务，它使用 Oracle 数据库和休眠。此服务部署到 4 个主机。

我们有一个外部 Java 客户端正在使用我们的服务。它每秒进行约 40 次服务调用。所以理想情况下，最多应该有 40(calls)*4(hosts)=160 个打开的连接。但由于某种原因，我们的服务使用的数据库连接数增长了 600 多个。

我们可以设置一些指标来检查数据库连接中的泄漏吗？我们如何才能找出这些泄漏连接？

任何帮助，将不胜感激。

谢谢，凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:40:58.660

如果您使用 3rd 方 jars 进行连接轮询，则可以启用它们的日志记录并将 logAbandoned 属性设置为 true。所以它会记录你所有的 logAbandoned 连接。

如下所示 -

```
<bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource" destroy-method="close">
        <property name="driverClassName" value="${dataSource.driverClassName}" />
        <property name="url" value="${dataSource.url}" />
        <property name="username" value="${dataSource.username}" />
        <property name="password" value="${dataSource.password}" />
        <property name="validationQuery" value="${datasource.validationQuery}" />
        <property name="maxActive" value="${datasource.maxActive}" />
        <property name="maxIdle" value="${datasource.maxIdle}" />
        <property name="maxWait" value="${datasource.maxWait}" />
        <property name="testOnBorrow" value="true" />
        <property name="testWhileIdle" value="true" />      
        <property name="minIdle" value="${datasource.minIdle}" />
        <property name="initialSize" value="${datasource.initialSize}" />
        <property name="timeBetweenEvictionRunsMillis" value="${datasource.timeBetweenEvictionRunsMillis}" />
        <property name="logAbandoned" value="${datasource.logAbandoned}" />
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:40:41.233

如果您在 Hibernate 中使用连接池，那么您的池提供程序可能会保留大量连接，即使它们没有被使用。如果是 c3po，请检查`connection.minPoolSize`和`connection.maxPoolSize`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:09:38.957

我的数据源 bean 如下所示：

```
<bean id="fssDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="driverClass">
         <util:property-path path="FSSConfiguration.driverName"/>
    </property>
    <property name="jdbcUrl">
        <util:property-path path="FSSConfiguration.url" />
    </property>
    <property name="user">
            <util:property-path path="FSSConfiguration.username" />
    </property>
    <property name="password">
            <util:property-path path="FSSConfiguration.password" />
    </property>
    <property name="initialPoolSize" value="1" />
    <property name="minPoolSize" value="1" />
    <property name="maxPoolSize" value="20" />
    <property name="maxIdleTime" value="240" />
    <property name="checkoutTimeout" value="60000" />
    <property name="acquireRetryAttempts" value="0" />
    <property name="acquireRetryDelay" value="1000" />
    <property name="debugUnreturnedConnectionStackTraces" value="true" />
    <property name="unreturnedConnectionTimeout" value="300" />
    <property name="numHelperThreads" value="1" />
    <property name="preferredTestQuery" value="SELECT 1 FROM DUAL" />
</bean> 
```

你能验证一下吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:21:08.987

您可以在 log4j.xml 中添加以下附加程序，所有 c3p0 日志将被定向到 ${catalina.home}/logs/c3poLog.log 文件 -

```
<appender name="c3poLogs" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="Threshold" value="DEBUG"/>
    <param name="Append" value="true"/>
    <param name="File" value="${catalina.home}/logs/c3poLog.log"/>
    <!--<param name="DatePattern" value=".yyyy-MM-dd"/>-->
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n"/>
    </layout>
</appender>

<category name="com.mchange.v2" additivity="false">
    <priority value="${log4j.category.com.mchange.v2}"/>
    <appender-ref ref="c3poLogs"/>
</category> 
```

# oop - 辅助类的设计方法

> ID：10827902
> 
> 赞同：1
> 
> 时间：2012-05-31T05:28:21.810
> 
> 标签：oop, design-patterns

我希望设计一个类以在某些对象上具有辅助方法。通常最好的方法是什么。所有功能都将作用于这两个对象。

```
SomeObj someObj;
AnotherObj anotherObj;

public SomeClass(SomeObj someObj,AnotherObj anotherObj){
this.someObj=someObj;
this.anotherObj=anotherObj;
}

somefunction(){
//act on the instance vars
} 
```

或者我应该有没有实例变量（无状态）的简单类并使函数接受所需的变量

```
public SomeClass(){

}

somefunction(SomeObj someObj,AnotherObj anotherObj){
//act on the local vars
} 
```

就设计而言，哪种方法被认为是好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:37:28.530

如果对`SomeObj`and`AnotherObj`对象起作用的唯一方法是 someFunction() 那么它们可能不需要存储为实例变量。如果它们将被使用/需要修改`SomeClass`from someFunction() 和其他内部方法的状态，那么我会说它们确实应该被存储。

您可以考虑一些关于`SomeClass`类实现的替代方案：

*   如果它没有任何状态，那么方法应该是静态的
*   根据操作的复杂程度以及您将拥有多少辅助方法，您可以使用[访问者设计模式](http://en.wikipedia.org/wiki/Visitor_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:37:11.533

我想说这取决于如何使用“帮助器”方法，以及调用类如何与 SomeObj 和 AnotherObj 交互/依赖。通过创建 SomeClass 的实例，以及对 SomeObj 和 AnotherObj 的内部引用，您可以将调用类与这些类分离，这可能是一件好事。另一方面，如果调用类已经具有对 someObj 和 anotherObj 的引用，我认为创建额外的对象没有意义，而我会使用静态辅助方法。

# android - 如何在android中的一个imageview上设置两个onclicklisteners？

> ID：10827907
> 
> 赞同：0
> 
> 时间：2012-05-31T05:29:03.930
> 
> 标签：android, image

我是android开发的新手。

我在布局中有一个图像。我为该图像使用了缩放动画。我能够在特定点停止图像的缩放。现在我想在另一个 clicklistener 上调整该图像的大小。

怎么做？如果有任何想法，请帮助。

这是我的代码。

```
final ImageView img_graph= (ImageView)findViewById(R.id.graph01);
   final Animation AnimationScale= AnimationUtils.loadAnimation(this,R.anim.anim_scale);
   final Animation AnimationScale_reverse= AnimationUtils.loadAnimation(this,R.anim.anim_scale_reverse);

        if(flag ==FLAG_SCALE_IN) { 
            if(resp==0){
   img_graph.setOnClickListener(new ImageView.OnClickListener(){

       public void onClick(View arg0) {

        // TODO Auto-generated method stub

         img_graph.setBackgroundResource(R.drawable.page01_graph);
         img_graph.startAnimation(AnimationScale);
       }});     
            }     
            }      
        if(flag==FLAG_SCALE_OUT) { 
            if(resp==1){
   img_graph.setOnClickListener(new ImageView.OnClickListener(){

       public void onClick(View arg0) {

        // TODO Auto-generated method stub

         img_graph.setBackgroundResource(R.drawable.page01_graph);
         img_graph.startAnimation(AnimationScale_reverse);
       }});
            }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T05:32:09.590

我们不能在同一个列表器中使用 if else 来处理这种情况吗？

```
 img_graph.setOnClickListener(new ImageView.OnClickListener(){

       public void onClick(View arg0) {

                      if(resp==0 && flag ==FLAG_SCALE_IN) { 
                             img_graph.setBackgroundResource(R.drawable.page01_graph);
                             img_graph.startAnimation(AnimationScale);
                      }else if( resp==1 &&flag ==FLAG_SCALE_OUT) {
                           img_graph.setBackgroundResource(R.drawable.page01_graph);
                            img_graph.startAnimation(AnimationScale_reverse);
                          }
                }
       }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T05:40:02.320

更多优化：

```
public void imageViewClick(View v)
{
    if(flag==FLAG_SCALE_IN && resp==0)
        {
        }
        else if(flag==FLAG_SCALE_OUT && resp==1)
        {                     
        }
} 
```

# android - 如何将 Qt 4.8 移植到 Android 平台

> ID：10827908
> 
> 赞同：3
> 
> 时间：2012-05-31T05:29:08.470
> 
> 标签：android, qt, ubuntu, qt4

我正在尝试将 Calligra 移植到 Android。但我真的对 Qt 部分感到困惑——如何处理它。我对在 Android 上移植 calligra 需要识别的依赖项感到满意，但我没有找到任何方法需要在移植 Calligra 之前在 Android 上移植 Qt。有人可以帮我解决这个问题，或者如果有人对如何将我在 Ubuntu 上构建的 Calligra 移植到 Android 平台有任何其他想法。

有人可以帮助我指导如何在 Android 上移植 Qt。我知道这是一件棘手的事情，但如果有人以前在这方面工作过。

问候， Ankit

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T06:05:10.993

它已经完成了：寻找必需品。为您提供了已编译的二进制文件和源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:20:28.170

您可能想在 Freenode 上的#Calligra IRC 频道上与 Calligra 团队的 Mek 联系，他在过去几个月一直在为 Android 开发 Calligra。既然你们两个似乎在做同样的事情，而且他远远领先于你，你可能想帮助他而不是做双重工作:)

截至写作时间的最新博客条目：http: [//blogs.kde.org/node/4553](http://blogs.kde.org/node/4553)

# google-maps - 如何将按钮链接到谷歌地图标记？

> ID：10827909
> 
> 赞同：1
> 
> 时间：2012-05-31T05:29:08.987
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在尝试使用谷歌地图创建自己的地图。

我想创建一个列表，显示地图上所有现有的标记。当用户单击列表中的一个按钮/链接时，相应的标记将居中并显示其信息窗口，即与用户单击标记的效果相同。

我已经尝试了许多解决方案，但我无法让它们都起作用。谁能为此提供一个简单的解决方案？提前致谢！

我现有的代码如下，

```
 google.maps.event.addDomListener(window, 'load', function() {
      var map = new google.maps.Map(document.getElementById('map'), {
          center: new google.maps.LatLng(19.642588,151.171875),
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          mapTypeControl: false
      });
      var infoWindow = new google.maps.InfoWindow;
      var onMarkerClick1 = function() {
      var marker = this;     
      infoWindow.setContent('content of infowindow');
      infoWindow.open(map, marker);
  };
  var marker1 = new google.maps.Marker({
      map: map,
      position: new google.maps.LatLng(19.642588,151.171875),
  });
  google.maps.event.addListener(marker1, 'click', onMarkerClick1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:37:23.307

这不会使地图居中，但会移动以使整个气球可见

[http://econym.org.uk/gmap/example_map2.htm](http://econym.org.uk/gmap/example_map2.htm)

* * *

尽可能简单。是的，请使用 GMarker 等。

不要忘记在标题`<script src="http://maps.google.com/maps?`中...

你需要包含的 html

```
 <div id="map" style="width: 550px; height: 450px"></div>
 <div id="side_bar"><a href="javascript:myclick(marker)">Marker One</a><br /></div> 
```

然后是 javascript

```
 var map = new GMap2(document.getElementById("map"));
    map.setCenter(new GLatLng(19.642588, 151.171875), 8);

    var point = new GLatLng(19.642588, 151.171875);
    var marker = new GMarker(point);

    GEvent.addListener(marker, "click", function () {
        marker.openInfoWindowHtml("this marker has been clicked");
    });

    function myclick(i) {
        GEvent.trigger(marker, "click");
    }

    map.addOverlay(marker); 
```

# oracle - 什么是使用 Oracle 数据库空间？("ORA-12953: ...超过了允许的最大数据库大小")

> ID：10827911
> 
> 赞同：4
> 
> 时间：2012-05-31T05:29:11.733
> 
> 标签：oracle, oracle-xe, oracle11gr2

我的 oracle 数据库中只有物化视图（行数很少），除了我的数据库之外什么都没有：

```
Error report:
SQL Error: ORA-12953: The request exceeds the maximum allowed database size of 11 GB

select sum(size_in_mb) from 
(
SELECT owner,
       segment_name,
       segment_type,
       sum(bytes)/1024/1024 size_in_mb
  FROM dba_segments
 WHERE owner NOT IN ('SYS','SYSTEM')
 GROUP BY owner, 
          segment_name,
          segment_type
 ORDER BY SUM(bytes)/1024/1024
 ); 
```

我如何找到在 oracle 中使用了多少空间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T05:33:16.503

我从错误中假设您使用的是数据库的快速版本。

```
SELECT owner,
       segment_name,
       segment_type,
       sum(bytes)/1024/1024 size_in_mb
  FROM dba_segments
 WHERE owner NOT IN ('SYS','SYSTEM')
 GROUP BY owner, 
          segment_name,
          segment_type
 ORDER BY SUM(bytes)/1024/1024 
```

将向您显示用户拥有的对象的大小，而不是`SYS`按其`SYSTEM`大小（以 MB 为单位）排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T05:32:59.610

有几个 DBA 视图，它们着眼于“空间”的几个不同方面：

```
* dba_free_space

* dba_data_files

* dba_tablespaces 
```

以下是几个简单且有用的脚本：

*   [http://www.dba-oracle.com/t_free_space_script.htm](http://www.dba-oracle.com/t_free_space_script.htm)

我肯定会看看这些脚本：

*   [http://asktom.oracle.com/pls/asktom/f?p=100:11:::::P11_QUESTION_ID:285415955510](http://asktom.oracle.com/pls/asktom/f?p=100:11:::::P11_QUESTION_ID:285415955510)

# image - 在 magento 中上传一些产品图片后出现错误

> ID：10827915
> 
> 赞同：0
> 
> 时间：2012-05-31T05:29:33.657
> 
> 标签：image, magento

上传产品图片后，我在 magento 中遇到了一个奇怪的错误。我只有一些图像有这个问题。

当我通过后端产品上传部分上传图像时，它工作得很好，当我将鼠标悬停在图像上时我可以看到图像。但是当我去前端并浏览产品详细信息页面或该产品的类别页面时，我得到了一个空白屏幕。我只有几张图片有这个问题。图像为 jpeg 格式。

然后，当我将 magento 默认图像重置为基础图像并保存产品时，问题就解决了。我无法弄清楚实际的问题是什么。有没有人有想法。请与我分享...

在此先感谢蒂宾马修

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:45:41.793

一个空白屏幕让我觉得你在代码的某个地方有错误。你能检查一下 index.php 中是否有 display_errors = On 和 error_reporting = E_ALL 吗？

```
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', 1); //uncomment this line to see errors 
```

或者，也许您尝试调试像布局块这样的大对象并且浏览器无法向您显示它，同时寻找可能尝试打印非常大数据的异常。

# gdata - 未收到 Google OAuth 刷新令牌

> ID：10827920
> 
> 赞同：324
> 
> 时间：2012-05-31T05:30:07.320
> 
> 标签：gdata, gdata-api, access-token

我想从 Google 获取访问令牌。 [Google API 表示](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Server_Side_Web_Applications_Flow)要获取访问令牌，将代码和其他参数发送到令牌生成页面，响应将是一个 JSON 对象，例如：

```
{
"access_token" : "ya29.AHES6ZTtm7SuokEB-RGtbBty9IIlNiP9-eNMMQKtXdMP3sfjL1Fc",
"token_type" : "Bearer",
"expires_in" : 3600,
"refresh_token" : "1/HKSmLFXzqP0leUihZp2xUt3-5wkU7Gmu2Os_eBnzw74"
} 
```

但是，我没有收到刷新令牌。我的情况是：

```
{
 "access_token" : "ya29.sddsdsdsdsds_h9v_nF0IR7XcwDK8XFB2EbvtxmgvB-4oZ8oU",
"token_type" : "Bearer",
"expires_in" : 3600
} 
```

* * *

## 回答 #1

> 赞同：814
> 
> 时间：2012-06-01T21:51:56.980

`refresh_token`仅在用户首次授权时提供。后续授权，例如您在测试 OAuth2 集成时所做的授权，将不会`refresh_token`再次返回。:)

1.  转到显示有权访问您帐户的应用程序的页面： [https](https://myaccount.google.com/u/0/permissions) ://myaccount.google.com/u/0/permissions 。
2.  在第三方应用程序菜单下，选择您的应用程序。
3.  单击删除访问权限，然后单击确定以确认
4.  您发出的下一个 OAuth2 请求将返回一个`refresh_token`（前提是它还包括 'access_type=offline' 查询参数。

或者，您可以将查询参数添加`prompt=consent&access_type=offline`到 OAuth 重定向（请参阅 Google 的[OAuth 2.0 for Web Server Applications](https://developers.google.com/accounts/docs/OAuth2WebServer#formingtheurl)页面）。

这将提示用户再次授权应用程序并始终返回一个`refresh_token`.

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-01-01T08:21:21.767

为了获得刷新令牌，您必须同时添加两者`approval_prompt=force`，`access_type="offline"` 如果您使用的是 Google 提供的 java 客户端，它将如下所示：

```
GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
            HTTP_TRANSPORT, JSON_FACTORY, getClientSecrets(), scopes)
            .build();

AuthorizationCodeRequestUrl authorizationUrl =
            flow.newAuthorizationUrl().setRedirectUri(callBackUrl)
                    .setApprovalPrompt("force")
                    .setAccessType("offline"); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-11-06T12:56:10.033

我搜索了一个漫长的夜晚，这就是诀窍：

从 admin-sdk 修改 user-example.php

```
$client->setAccessType('offline');
$client->setApprovalPrompt('force');
$authUrl = $client->createAuthUrl();
echo "<a class='login' href='" . $authUrl . "'>Connect Me!</a>"; 
```

然后您在重定向 url 处获取代码并使用代码进行身份验证并获取刷新令牌

```
$client()->authenticate($_GET['code']);
echo $client()->getRefreshToken(); 
```

你现在应该把它存起来；）

当您的访问密钥超时时

```
$client->refreshToken($theRefreshTokenYouHadStored); 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-05-15T13:12:39.557

这让我有些困惑，所以我想我会分享一下我辛苦学习的东西：

当您使用`access_type=offline`和`approval_prompt=force`参数请求访问时，您应该同时收到**访问**令牌和**刷新**令牌。**访问**令牌在您收到后很快就会过期，您需要刷新它。

**您正确地发出了获取新访问**令牌的请求，并收到了包含新**访问**令牌的响应。我也对我没有获得新的**刷新**令牌这一事实感到困惑。但是，这就是它的本意，因为您可以一遍又一遍地使用相同的**刷新令牌。**

我认为其他一些答案假设您出于某种原因想要获得一个新的**刷新**令牌，并建议您重新授权用户，但实际上，您不需要这样做，因为您拥有的**刷新**令牌将一直工作到被用户撤销。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2021-01-13T12:34:14.017

我想为那些遇到此问题的沮丧灵魂添加有关此主题的更多信息。获取离线应用程序刷新令牌的关键是确保您正在显示**同意屏幕**。`refresh_token`仅在用户通过单击“允许”授予授权后立即返回。

[![在此处输入图像描述](../Images/6accf30060225bf1a49c8de44ca2324c.png)](https://i.stack.imgur.com/fxLiZ.png)

在我在开发环境中进行了一些测试并因此已经在给定帐户上*授权了我的应用程序*之后，我（我怀疑还有许多其他问题）出现了这个问题。然后我转到生产环境并尝试使用已授权的帐户再次进行身份验证。在这种情况下，同意屏幕不会再次出现，api*也不会返回新的刷新令牌*。要完成这项工作，您必须通过以下任一方式强制同意屏幕再次出现：

```
prompt=consent 
```

或者

```
approval_prompt=force 
```

任何一个都可以，但你不应该同时使用。**截至 2021 年，我建议使用`prompt=consent`**它，因为它取代了旧参数`approval_prompt`，并且在某些 api 版本中，后者实际上已损坏（[https://github.com/googleapis/oauth2client/issues/453](https://github.com/googleapis/oauth2client/issues/453)）。此外，`prompt`它是一个以空格分隔的列表，因此您可以将其设置为`prompt=select_account%20consent`两者都需要。

当然你还需要：

```
access_type=offline 
```

补充阅读：

*   文档：[https ://developers.google.com/identity/protocols/oauth2/web-server#request-parameter-prompt](https://developers.google.com/identity/protocols/oauth2/web-server#request-parameter-prompt)
*   文档：[https ://developers.google.com/identity/protocols/oauth2/openid-connect#re-consent](https://developers.google.com/identity/protocols/oauth2/openid-connect#re-consent)
*   关于这个问题的讨论：[https ://github.com/googleapis/google-api-python-client/issues/213](https://github.com/googleapis/google-api-python-client/issues/213)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-12-12T02:47:06.087

[Rich Sutton 的回答](https://stackoverflow.com/a/10857806/539149)终于对我有用，因为我意识到添加`access_type=offline`是在**前端**客户端对授权代码的请求上完成的，**而不是**在将该代码交换为 access_token 的后端请求上完成。我在他的回答和[谷歌的这个链接中](https://developers.google.com/identity/protocols/OAuth2WebServer)添加了评论，以获取有关刷新令牌的更多信息。

PS 如果您使用的是 Satellizer，[这里是如何将该选项添加到 AngularJS 中的 $authProvider.google 的方法](https://github.com/sahat/satellizer/issues/205)。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-09-20T23:16:46.117

In order to get the `refresh_token` you need to include `access_type=offline` in the OAuth request URL. When a user authenticates for the first time you will get back a non-nil `refresh_token` as well as an `access_token` that expires.

If you have a situation where a user might re-authenticate an account you already have an authentication token for (like @SsjCosty mentions above), you need to get back information from Google on which account the token is for. To do that, add `profile` to your scopes. Using the OAuth2 Ruby gem, your final request might look something like this:

```
client = OAuth2::Client.new(
  ENV["GOOGLE_CLIENT_ID"],
  ENV["GOOGLE_CLIENT_SECRET"],
  authorize_url: "https://accounts.google.com/o/oauth2/auth",
  token_url: "https://accounts.google.com/o/oauth2/token"
)

# Configure authorization url
client.authorize_url(
  scope: "https://www.googleapis.com/auth/analytics.readonly profile",
  redirect_uri: callback_url,
  access_type: "offline",
  prompt: "select_account"
) 
```

Note the scope has two space-delimited entries, one for read-only access to Google Analytics, and the other is just `profile`, which is an OpenID Connect standard.

This will result in Google providing an additional attribute called `id_token` in the `get_token` response. To get information out of the id_token, [check out this page](https://developers.google.com/identity/protocols/OpenIDConnect#obtainuserinfo) in the Google docs. There are a handful of Google-provided libraries that will validate and “decode” this for you (I used the Ruby [google-id-token gem](https://github.com/google/google-id-token)). Once you get it parsed, the `sub` parameter is effectively the unique Google account ID.

Worth noting, if you *change* the scope, you'll get back a refresh token again for users that have already authenticated with the original scope. This is useful if, say, you have a bunch of users already and don't want to make them all un-auth the app in Google.

Oh, and one final note: you don't *need* `prompt=select_account`, but it's useful if you have a situation where your users might want to authenticate with more than one Google account (i.e., you're not using this for sign-in / authentication).

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-20T08:36:28.867

**1.**如何获得'refresh_token'？

**解决方案：**生成 authURL 时应使用 access_type='offline' 选项。来源：[为 Web 服务器应用程序使用 OAuth 2.0](https://developers.google.com/identity/protocols/OAuth2WebServer)

**2.**但即使使用“access_type=offline”，我也没有得到“refresh_token”？

**解决方案：**请注意，您只会在第一次请求时获得它，所以如果您将它存储在某个地方并且在您的代码中规定在先前过期后获取新的 access_token 时覆盖它，那么请确保不要覆盖这个值。

来自 Google Auth Doc：（此值 = access_type）

> 此值指示 Google 授权服务器在您的应用程序第一次为令牌交换授权代码时返回刷新令牌和访问令牌。

[如果您再次需要“refresh_token”，那么您需要按照Rich Sutton 的回答](https://stackoverflow.com/a/10857806/8094364)中所写的步骤删除您的应用程序的访问权限。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-09-06T22:00:43.963

设置此项将导致每次发送刷新令牌：

```
$client->setApprovalPrompt('force'); 
```

下面给出一个例子（php）：

```
$client = new Google_Client();
$client->setClientId($client_id);
$client->setClientSecret($client_secret);
$client->setRedirectUri($redirect_uri);
$client->addScope("email");
$client->addScope("profile"); 
$client->setAccessType('offline');
$client->setApprovalPrompt('force'); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-11-13T05:38:18.897

对我来说，我正在尝试`CalendarSampleServlet`由 Google 提供。1 小时后，**access_key**超时并且重定向到 401 页面。我尝试了上述所有选项，但它们都不起作用。最后在检查*'AbstractAuthorizationCodeServlet'*的源代码时，我可以看到如果存在凭据，重定向将被禁用，但理想情况下它应该检查`refresh token!=null`. 我添加了下面的代码，`CalendarSampleServlet`然后它就起作用了。在经历了这么多小时的挫折之后，我如释重负。感谢上帝。

```
if (credential.getRefreshToken() == null) {
    AuthorizationCodeRequestUrl authorizationUrl = authFlow.newAuthorizationUrl();
    authorizationUrl.setRedirectUri(getRedirectUri(req));
    onAuthorization(req, resp, authorizationUrl);
    credential = null;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-12-02T12:53:28.297

我正在使用 nodejs 客户端访问私有数据

解决方案是将带有值**同意的****提示属性添加到 oAuth2Client.generateAuthUrl****函数**中的设置对象。这是我的代码：

 ****```
const getNewToken = (oAuth2Client, callback) => {
    const authUrl = oAuth2Client.generateAuthUrl({
        access_type: 'offline',
        prompt: 'consent',
        scope: SCOPES,
    })
    console.log('Authorize this app by visiting this url:', authUrl)
    const rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout,
    })
    rl.question('Enter the code from that page here: ', (code) => {
        rl.close()
        oAuth2Client.getToken(code, (err, token) => {
            if (err) return console.error('Error while trying to retrieve access token', err)
            oAuth2Client.setCredentials(token)
            // Store the token to disk for later program executions
            fs.writeFile(TOKEN_PATH, JSON.stringify(token), (err) => {
                if (err) return console.error(err)
                console.log('Token stored to', TOKEN_PATH)
            })
            callback(oAuth2Client)
        })
    })
} 
```

您可以使用在线参数提取器获取生成令牌的代码：

[在线参数提取器](https://www.freeformatter.com/url-parser-query-string-splitter.html)

以下是谷歌官方文档的完整代码：

[https://developers.google.com/sheets/api/quickstart/nodejs](https://developers.google.com/sheets/api/quickstart/nodejs)

我希望这些信息有用

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-01-18T13:55:10.493

使用**离线访问**和**提示：同意**对我来说效果很好：

```
 auth2 = gapi.auth2.init({
                    client_id: '{cliend_id}' 
   });

   auth2.grantOfflineAccess({prompt:'consent'}).then(signInCallback); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-07T11:40:11.267

为了在每次身份验证时获得新的 refresh_token，在仪表板中创建的 OAuth 2.0 凭据的类型应为“其他”。同样如上所述，在生成 authURL 时应使用 access_type='offline' 选项。

当使用类型为“Web 应用程序”的凭据时，提示/approval_prompt 变量的组合将不起作用 - 您仍将仅在第一次请求时获得 refresh_token。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-08-08T15:06:15.333

```
 #!/usr/bin/env perl

    use strict;
    use warnings;
    use 5.010_000;
    use utf8;
    binmode STDOUT, ":encoding(utf8)";

    use Text::CSV_XS;
    use FindBin;
    use lib $FindBin::Bin . '/../lib';
    use Net::Google::Spreadsheets::V4;

    use Net::Google::DataAPI::Auth::OAuth2;

    use lib 'lib';
    use Term::Prompt;
    use Net::Google::DataAPI::Auth::OAuth2;
    use Net::Google::Spreadsheets;
    use Data::Printer ;

    my $oauth2 = Net::Google::DataAPI::Auth::OAuth2->new(
         client_id => $ENV{CLIENT_ID},
         client_secret => $ENV{CLIENT_SECRET},
         scope => ['https://www.googleapis.com/auth/spreadsheets'],
    );
    my $url = $oauth2->authorize_url();
    # system("open '$url'");
    print "go to the following url with your browser \n" ;
    print "$url\n" ;
    my $code = prompt('x', 'paste code: ', '', '');
    my $objToken = $oauth2->get_access_token($code);

    my $refresh_token = $objToken->refresh_token() ;

    print "my refresh token is : \n" ;
    # debug p($refresh_token ) ;
    p ( $objToken ) ;

    my $gs = Net::Google::Spreadsheets::V4->new(
            client_id      => $ENV{CLIENT_ID}
         , client_secret  => $ENV{CLIENT_SECRET}
         , refresh_token  => $refresh_token
         , spreadsheet_id => '1hGNULaWpYwtnMDDPPkZT73zLGDUgv5blwJtK7hAiVIU'
    );

    my($content, $res);

    my $title = 'My foobar sheet';

    my $sheet = $gs->get_sheet(title => $title);

    # create a sheet if does not exit
    unless ($sheet) {
         ($content, $res) = $gs->request(
              POST => ':batchUpdate',
              {
                    requests => [
                         {
                              addSheet => {
                                    properties => {
                                         title => $title,
                                         index => 0,
                                    },
                              },
                         },
                    ],
              },
         );

         $sheet = $content->{replies}[0]{addSheet};
    }

    my $sheet_prop = $sheet->{properties};

    # clear all cells
    $gs->clear_sheet(sheet_id => $sheet_prop->{sheetId});

    # import data
    my @requests = ();
    my $idx = 0;

    my @rows = (
         [qw(name age favorite)], # header
         [qw(tarou 31 curry)],
         [qw(jirou 18 gyoza)],
         [qw(saburou 27 ramen)],
    );

    for my $row (@rows) {
         push @requests, {
              pasteData => {
                    coordinate => {
                         sheetId     => $sheet_prop->{sheetId},
                         rowIndex    => $idx++,
                         columnIndex => 0,
                    },
                    data => $gs->to_csv(@$row),
                    type => 'PASTE_NORMAL',
                    delimiter => ',',
              },
         };
    }

    # format a header row
    push @requests, {
         repeatCell => {
              range => {
                    sheetId       => $sheet_prop->{sheetId},
                    startRowIndex => 0,
                    endRowIndex   => 1,
              },
              cell => {
                    userEnteredFormat => {
                         backgroundColor => {
                              red   => 0.0,
                              green => 0.0,
                              blue  => 0.0,
                         },
                         horizontalAlignment => 'CENTER',
                         textFormat => {
                              foregroundColor => {
                                    red   => 1.0,
                                    green => 1.0,
                                    blue  => 1.0
                              },
                              bold => \1,
                         },
                    },
              },
              fields => 'userEnteredFormat(backgroundColor,textFormat,horizontalAlignment)',
         },
    };

    ($content, $res) = $gs->request(
         POST => ':batchUpdate',
         {
              requests => \@requests,
         },
    );

    exit;

    #Google Sheets API, v4

    # Scopes
    # https://www.googleapis.com/auth/drive   View and manage the files in your Google D# # i# rive
    # https://www.googleapis.com/auth/drive.file View and manage Google Drive files and folders that you have opened or created with this app
    # https://www.googleapis.com/auth/drive.readonly   View the files in your Google Drive
    # https://www.googleapis.com/auth/spreadsheets  View and manage your spreadsheets in Google Drive
    # https://www.googleapis.com/auth/spreadsheets.readonly  View your Google Spreadsheets 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-22T16:24:14.467

添加`access_type=offline`到授权 Google 授权 URL 对我有用。我正在使用 Java 和 Spring 框架。

这是创建客户端注册的代码：

```
return CommonOAuth2Provider.GOOGLE
                    .getBuilder(client)
                    .scope("openid", "profile", "email", "https://www.googleapis.com/auth/gmail.send")
                    .authorizationGrantType(AuthorizationGrantType.AUTHORIZATION_CODE)
                    .authorizationUri("https://accounts.google.com/o/oauth2/v2/auth?access_type=offline")
                    .clientId(clientId)
                    .redirectUriTemplate("{baseUrl}/{action}/oauth2/code/{registrationId}")
                    .clientSecret(clientSecret)
                    .build(); 
```

这里的重要部分`?access_type=offline`是附加的授权 URI。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-04T16:13:21.203

我的解决方案有点奇怪..我尝试了我在互联网上找到的所有解决方案，但什么也没有。令人惊讶的是，这有效：删除凭据.json，刷新，再次在您的帐户中更新您的应用程序。新的 credentials.json 文件将具有刷新令牌。将此文件备份到某处。然后继续使用您的应用程序，直到刷新令牌错误再次出现。删除现在只有一条错误消息的 crendetials.json 文件（在我的情况下发生这种情况），然后将旧凭据文件粘贴到文件夹中，完成！自从我这样做以来已经 1 周了，没有更多问题了。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-06-08T04:26:01.980

现在谷歌在我的请求中拒绝了这些参数（access_type，prompt）...... :(并且根本没有“撤销访问”按钮。我很沮丧因为找回了我的 refresh_token 哈哈

[更新：我在这里找到了答案：D 您可以通过请求https://developers.google.com/identity/protocols/OAuth2WebServer](https://developers.google.com/identity/protocols/OAuth2WebServer)取回刷新令牌

> curl -H“内容类型：应用程序/x-www-form-urlencoded”\ [https://accounts.google.com/o/oauth2/revoke?token=](https://accounts.google.com/o/oauth2/revoke?token=) {token}
> 
> 令牌可以是访问令牌或刷新令牌。如果令牌是访问令牌并且有相应的刷新令牌，那么刷新令牌也会被撤销。
> 
> 如果撤销处理成功，则响应的状态码为 200。对于错误情况，返回状态码 400 和错误码。****

# dart - 飞镖中重复的顶级声明'METHOD main'

> ID：10827924
> 
> 赞同：2
> 
> 时间：2012-05-31T05:30:53.280
> 
> 标签：dart

我是 dart 新手，并试图使用 dart 编写一个 hello world 和一个单元测试，但我得到了错误：

```
duplicate top-level declaration 'METHOD main' at ../app.dart::5:6 
```

我的项目目录是`test-dart`，它有 3 个文件。

**测试飞镖/models.dart**

```
class User {
  hello(String name) {
    print("Hello, ${name}");
  }
} 
```

**测试飞镖/app.dart**

```
#library("app");

#source("./models.dart");

void main() {
  new User().hello("app");
} 
```

**测试飞镖/测试/test.dart**

```
#library("test");

#import("../app.dart");

void main() {
  print("hello, test");
} 
```

现在 "test.dart" on 有一个错误`void main()`，错误信息是：

```
duplicate top-level declaration 'METHOD main' at ../app.dart::5:6 
```

这两种`main()`方法在不同的库中，为什么它们仍然重复？如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T06:19:45.850

如果您像这样导入一个库`#import('../app.dart)`，那么所有来自的名称都`app.dart`将在导入代码中可见（实际上是所有*公共*名称——那些*不*以 a 开头的名称`_`）。所以在你的`test.dart`库中，你现在有两个`main`可见的函数。那显然是碰撞。有两种方法可以解决它（我知道）。

首先：导入带有前缀的库，如下所示：`#import('../app.dart', prefix: 'app')`. 然后，来自的所有公共名称`app.dart`仍然可见，但只有`app`前缀，因此`main`函数 from`app.dart`只能由 访问`app.main`。这里没有冲突，但是您每次都必须使用前缀。

第二：使用`show`组合器，如下所示：`#import('../app.dart', show: ['a', 'b'])`. 然后，不再是*所有*的名字`app.dart`都是可见的，只有那些明确命名的（`a`和`b`这里）。不过，我不确定这是否已经实施。

也许将来，我们会得到与`show`组合器相反的东西，这样你就可以做到`#import('../app.dart', hide: ['main'])`。这将是您问题的最佳解决方案，但它不是当前语言（由 0.09 指定）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T06:12:15.550

您正在导入 app.dart 而不带前缀，这意味着如果您的示例中存在重复项，则导入库和导入库的符号可能会发生冲突。

为了解决这些冲突，库导入允许您在导入前加上标识符。如果您按如下方式更改 test.dart，您的示例应该可以工作：

```
#library("test");

#import("../app.dart", prefix: "app");

void main() {
  print("hello, test");
  app.main();
  new app.User().hello("main");
} 
```

注意 app.dart 库中的类和顶级函数现在是如何使用“app”前缀访问的，因此不会与 test.dart 中的名称冲突。

# iphone - 如何将 3d 视图旋转 360 度？

> ID：10827926
> 
> 赞同：2
> 
> 时间：2012-05-31T05:31:08.653
> 
> 标签：iphone, objective-c, ios, rotation, catransformlayer

我正在开发一个应用程序，其中我将视图旋转 360 度，但我无法将其旋转 360 度。它旋转了 180 度，旋转后又回到了原来的位置。

```
animation = [CABasicAnimation animationWithKeyPath:@"transform"];
transform = CATransform3DMakeRotation(3.14f, 1.0f, 1.0f, 1.0f);  
value = [NSValue valueWithCATransform3D:transform]; 
[animation setToValue:value];
[animation setAutoreverses:YES]; 
[animation setDuration:0.9];
[[rotatBall layer] addAnimation:animation forKey:@"180"];  //rotatBall is a view 
```

换句话说，它正在来回旋转。如何连续旋转它......请帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:56:55.817

这有点棘手，但您可以在[docs](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAMediaTiming_protocol/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004511-CH1-SW5)中找到它。
要连续旋转它，您首先需要设置`toValue`然后将动画重复计数设置为`HUGH_VALF`（在 math.h 中定义）。

```
 CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.x"];

    transform = CATransform3DMakeRotation(1.0f, 1.0f, 1.0f, 1.0f);  
    fromValue = [NSValue valueWithCATransform3D:transform];

    transform = CATransform3DMakeRotation(M_PI*2, 1.0f, 1.0f, 1.0f);  
    toValue = [NSValue valueWithCATransform3D:transform];

    animation.fromValue = fromValue;
    animation.toValue = toValue;
    animation.duration = 0.9f; 
    animation.repeatCount = HUGE_VALF;     // HUGE_VALF is defined in math.h so import it
    [rotatBall.layer addAnimation:animation forKey:@"rotation"]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T06:45:31.690

您的动画在完成后正在反转，因为您设置`autoreverses`为`YES`. 就是`autoreverses`这样。

至于为什么你旋转180度而不是360度...... 360度是多少弧度？

# javascript - javascript 数据结构：优先级队列、字典、平衡二叉树？

> ID：10827928
> 
> 赞同：0
> 
> 时间：2012-05-31T05:31:11.900
> 
> 标签：javascript, data-structures

是否有提供通用数据结构的 javascript 库，例如优先级队列、字典和后继查询（平衡树）？我可以自己动手，但我宁愿拥有一个黑匣子，尤其是如果它已经“优化”过的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:37:12.823

Google 的 Closure Library 应该有您需要的大部分内容： [https ://developers.google.com/closure/library/](https://developers.google.com/closure/library/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-05T11:33:23.803

使用下面已经实现的集合类的库：[https ://www.npmjs.com/package/collectiondatalib](https://www.npmjs.com/package/collectiondatalib)

例子：

const lib = require('collectiondatalib') lib.Search.binary_search([1,2,3,4,5], 5)

4

lib.Sort.bubble_sort([3,5,1,4,2])

[ 1、2、3、4、5]

lib.Sort.merge_sort([3,5,1,4,2])

[ 1、2、3、4、5]

让列表 = 新的 lib.SinglyLinkedList()

list.push(12) list.push(13) list.push(14) console.log(list)

SingleLinkedList { head: Node { val: 12, next: Node { val: 13, next: [Node] } }, tail: Node { val: 14, next: null }, length: 3 }

`let queue=new lib.PriorityQueue()` `queue.enqueue("hello",5)` `queue.enqueue("hi",4)`

# c++ - 如何按索引存储向量的向量

> ID：10827929
> 
> 赞同：0
> 
> 时间：2012-05-31T05:31:39.267
> 
> 标签：c++, stl, vector

嗨，我必须以向量格式的向量存储下面提到的信息...

```
 vector <vector <int>> ph;
 vector<int> p, q;
 p.push_back(1);
 p.push_back(2);
 p.push_back(3);

 q.push_back(10);
 q.push_back(20);
 q.push_back(30);
 q.push_back(40); 
```

现在而不是使用：

```
 ph.push_back(p);
 ph.push_back(q); 
```

我想使用：

```
 ph.at(0)=p
 ph.at(1)=q 
```

（这是我在使用它时遇到的错误：在抛出 'std::out_of_range' what(): vector::_M_range_check 的实例后调用终止）

我想以这种方式存储它的原因是......稍后我想访问由其索引标识的特定向量的元素，即 1 或 0。

例如，我希望访问 ph[0].size() 即 p 的大小...由其索引标识。也就是说，我想执行与我们在 C++ 中的简单数组情况下能够执行的操作相同的操作，即将该数组中的数据存储在特定索引处并从特定索引访问数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:35:33.710

您收到错误是因为当您实例化向量的向量时，它的大小为 0，并且`at()`允许该方法进行绑定检查并引发异常。

如果您想通过这样的索引访问，那么最好使用[std::map](http://en.cppreference.com/w/cpp/container/map)或[std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)。这使得索引独立于插入顺序：

```
std::map<int, std::vector<int>> MapOfVectors;
std::vector<int> p, q;
// fill vectors
MapOfVectors[1] = q;
MapOfVectors[0] = p; 
```

否则，您必须确保您的向量向量足够大以按索引插入元素：

```
// instantiate vector with size 2\. You can insert p and q by index. (0, 1) only
vector<vector<int>> ph(2); 
```

或者，在创建后调整大小：

```
vector<vector<int>> ph;
ph.resize(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:44:32.250

> 我想使用：

```
ph.at(0)=p  ph.at(1)=q 
```

这试图访问数组末尾之后的索引，因此出现异常。

> 我想以这种方式存储它的原因是....稍后我想访问由其索引标识的特定向量的元素，即 1 或 0。
> 
> 例如，我希望访问 ph[0].size() 即 p 的大小...由其索引标识。也就是说，我想执行与 c++ 中简单数组相同的操作，即将该数组中的数据存储在特定索引处，并从特定索引访问数据。

您可以通过首先用空的内部向量填充外部向量来实现此目的：

```
vector<vector<int> > ph(2); 
```

在这里，`2`表示构造外部向量以包含 2 个默认构造的元素（它们本身`vector<int>`）。

或者，您可以使用：

```
vector<vector<int> > ph;
ph.resize(2); 
```

完成此操作后，访问元素以存储非默认构造值将是安全的。这意味着以下内容不会抛出：

```
ph.at(0)=p;  ph.at(1)=q; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T05:40:02.773

当你定义`vector<vector<int>> ph`向量`ph`是空的。当`.at()`您尝试写入不存在的元素时，成员函数会进行边界检查并正确抛出异常。

您可以这样`ph.resize(2)`做，然后索引 0-1 将是有效的，或者`push_back`就像您现在一样使用。

# c# - 如何中止长时间运行的方法？

> ID：10827930
> 
> 赞同：2
> 
> 时间：2012-05-31T05:31:43.430
> 
> 标签：c#, .net-4.0, process

我有一个长时间运行的方法，我想在其中添加超时。这样做可行吗？就像是：

```
AbortWaitSeconds(20)
{
    this.LongRunningMethod();
} 
```

当达到 20 秒时，该方法将被中止。该方法没有循环，我没有对该方法的控制/代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:46:48.880

尝试这个

```
class Program
{
    static void Main(string[] args)
    {
        if (RunWithTimeout(LongRunningOperation, TimeSpan.FromMilliseconds(3000)))
        {
            Console.WriteLine("Worker thread finished.");
        }
        else
        {
            Console.WriteLine("Worker thread was aborted.");
        }
    }

    static bool RunWithTimeout(ThreadStart threadStart, TimeSpan timeout)
    {
        Thread workerThread = new Thread(threadStart);

        workerThread.Start();

        bool finished = workerThread.Join(timeout);
        if (!finished)
            workerThread.Abort();

        return finished;
    }

    static void LongRunningOperation()
    {
        Thread.Sleep(5000);
    }
} 
```

你可以[看到](https://stackoverflow.com/questions/3607359/stop-executing-code-in-thread-after-30s)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T05:48:54.687

有关通用解决方案，请参阅[我对这个问题的回答。](https://stackoverflow.com/a/9461311/15541)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T05:52:18.383

由于您无法控制该代码，我相信正确的方法是使用 WaitHandles 和 ThreadPool 运行该代码：

```
WaitHandle waitHandle = new AutoResetEvent(false);
ThreadPool.QueueUserWorkItem(new WaitCallback(<long running task delegate>), waitHandle);
WaitHandle.WaitAll(new[]{ waitHandle }, <timeout>); 
```

[在这里](http://msdn.microsoft.com/en-us/library/27y100eh.aspx)您可以找到有关 WaitHandle 工作原理的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T05:39:23.623

在后台线程中进行计算并等待线程完成。要中止计算，请使用，这将在计算线程中`Thread.Abort()`抛出一个。`ThreadAbortException`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T05:49:01.923

如果您有一个代码点来引入检查和退出，则只能从同一线程中止长时间运行的进程。这是因为 - 显然 - 线程很忙，所以它不能处理检查以中止自己。因此，您的示例仅包含对“LongRunningMethod”的一次调用不能从同一个线程中止。您需要显示更多代码才能获得指导。

作为一般规则，长时间运行的任务最好发送到不同的线程（例如，通过 BackgroundWorker 或新线程），以便*可以*中止它们。

这是一种简单的方法；

```
private void StartThread()
{
    Thread t = new Thread(LongRunningMethod);
    t.Start();
    if (!t.Join(10000)) // give the operation 10s to complete
    {
        // the thread did not complete on its own, so we will abort it now
        t.Abort();
    }
}

private void LongRunningMethod()
{
    // do something that'll take awhile
} 
```

# javascript - 单击表格行时打开信息窗口

> ID：10827931
> 
> 赞同：0
> 
> 时间：2012-05-31T05:31:48.597
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试从 MySQL 表中加载几个城市的 ID、名称和位置，然后将其填充到 HTML 表中。还有一个带有指向这些城市的标记的谷歌地图。

当用户单击 HTML 行之一（tr 标签）时，我希望在城市标记上弹出一个信息窗口。我正在使用没有任何 jQuery 的 PHP、Javascript 和 XML。

我的 HTML：

```
<?php
   $query = "SELECT id, name, lat, lng FROM city ORDER BY id";
   $arrCities = mysql_query ($query);
?>

<div id="gmap" style="width: 550px; height: 450px"></div>

<table id="tblData">
   <tr>
       <th>ID</th>
       <th>City</th>
   </tr>

   <?php while ($row = mysql_fetch_assoc($arrCities)) { ?>

       <tr id="<?php echo $row['id']; ?>">

           <td><?php echo $row['id']; ?></td>
           <td><?php echo $row['name']; ?></td>

       </tr>
   <?php } ?>
</table> 
```

我的 PHP 用于创建 XML 来填充标记（my-xml-generator.php）：

```
<?php
    $query = "SELECT id, name, lat, lng FROM city ORDER BY id";
    $arrCities = mysql_query ($query);

    $dom = new DOMDocument('1.0', 'utf-8');
    $node = $dom->createElement ('markers');
    $parNode = $dom->appendChild ($node);

    header('Content-type: text/xml');

    while ($row = mysql_fetch_assoc($arrCities))
    {
            $node = $dom->createElement ('marker');
            $newNode = $parNode->appendChild ($node);
            $newNode->setAttribute ('id', $row['id']);
            $newNode->setAttribute ('name', $row['name']);
            $newNode->setAttribute ('lat', $row['lat']);
            $newNode->setAttribute ('lng', $row['lng']);
    }

    echo $dom->saveXML();
?> 
```

我的Javascript：

```
 var gmap = new google.maps.Map (mapDiv, options);

    var arrMarkers = []; 
    var infoWindow = new google.maps.InfoWindow;

    // add markers to the map
    DownloadUrl ("my-xml-generator.php", function(data)
    {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName ("marker");

        for (var i = 0; i < markers.length; i++)
        {
            var id = markers[i].getAttribute("id");

            var lat = parseFloat (markers[i].getAttribute("lat"));
            var lng = parseFloat (markers[i].getAttribute("lng"));
            var pos = new google.maps.LatLng (lat, lng);

            var markerOptions =
            {
                position    : pos,
                map         : gmap,
                draggable   : false
            };

            // add the marker
            var marker = new google.maps.Marker (markerOptions);
            arrMarkers.push(marker);

            // this part of code is not working
            var tr = document.getElementById(id);
            google.maps.event.addDomListener (tr, "click",  function() { RowClick(i); });

            // add info window
            var html = '<div>' + id + '</div>';

            BindInfoWindow (marker, gmap, infoWindow, html);
        }
    });

    function BindInfoWindow (marker, map, infoWindow, html)
    {
        google.maps.event.addListener (marker, "click", function()
        {
            infoWindow.setContent (html);
            infoWindow.open (map, marker);
        });
    }

    function RowClick (i)
    {
        google.maps.event.trigger (arrMarkers[i], "click");
    }

    function DownloadUrl (url, callback)
    {
        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function()
        {
            if (xhr.readyState == 4)
            {
                xhr.onreadystatechange = DoNothing;
                callback(xhr, xhr.status);
            }
        };

        xhr.open ('GET', url, true);
        xhr.send (null);
    }

    function DoNothing() {} 
```

不工作的部分是上面 javascript 中的这个部分：

```
var tr = document.getElementById(id);
google.maps.event.addDomListener (tr, "click", function() { RowClick(i); }); 
```

这样做的正确方法是什么？

附加信息：如果我将我的 javascript 更改为这样：

```
var tr = document.getElementById(id);
google.maps.event.addDomListener (tr, "click", function() { alert(tr.id); }); 
```

然后当我单击该行时会弹出警告框，但无论我单击哪一行，显示的 ID 始终是最后一行的 ID。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:48:03.623

该函数需要一个回调，但要保存您的变量状态，您将不得不将其设为闭包。：

我认为这应该有效。

```
google.maps.event.addDomListener (tr, "click", 
(function(i){
    var row = i;
    return function(){
    RowClick(row);
    }
 })(i)
); 
```

# php - 在 php 中取消设置 POST 值

> ID：10827941
> 
> 赞同：0
> 
> 时间：2012-05-31T05:32:44.613
> 
> 标签：php, post

活动.php

```
//Form start

   <form action=''>

   </form>

//Form End

//Get POST Values

<?php 

$_POST[''];

?>

//End 
```

如果我在提交表单后刷新页面，所有发布的值都会重新提交，原因是所有值都在浏览器中，所以它们被重新提交。当我为此搜索解决方案时，我得到的信息是，如果表单和发布操作在单独的 php 文件中完成，那么在刷新时发布值就不会再出现问题了。

这是解决方案吗？但现在我必须在单个文件中同时执行 POST 值不应该在刷新时再次提交.. 有没有办法做到这一点？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T05:36:51.280

学习 PRG 模式，这样你就可以正确地做到这一点:)

[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

例如，您正在尝试处理用户注册表单，因此您所做的就是获取一堆`POST`ed 值，并将其保存到数据库中。

```
if(!empty($_POST)) {
   // validate and save to db

   // get last inserted user_id
} 
```

完成此操作后，您不会返回具有先前 ed 值的同一页面，而是`POST`将新用户重定向到他的个人资料页面（假设您没有激活要求）

```
if(!empty($_POST)) {
   // validate and save to db

   // get last inserted user_id, say in $user_id

   header("Location: /users/$user_id");
} 
```

这样，浏览器就会重定向，并且每当用户点击刷新时，您就不会遇到双重注册的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T05:35:51.383

保存到数据库后，重新加载页面：

```
if ($_POST) {
  // Save $_POST to database and other stuffs

  // Reload current page to discard $_POST
  header('Location: my_page.php');
} 
```

这称为 PRG 或[Post/Reload/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T05:35:17.377

您可以使用`unset($var)`取消设置变量。但是，我认为问题出在浏览器上；他们中的一些人试图变得聪明，并且无论何时刷新页面都会记住表单数据。如果您在 URL 栏上点击“go”或“enter”，它会执行“true”刷新。

# jquery - jqgrid 不可点击

> ID：10827951
> 
> 赞同：1
> 
> 时间：2012-05-31T05:34:29.923
> 
> 标签：jquery, asp.net-mvc-3, jqgrid

我的 jqgrid 是不可点击的，因为它在一个对话框下，上面写着：WARNING PLease, select row... （见图）![在此处输入图像描述](../Images/382dc6b247b4ddb09d216c457a48497b.png)

尽管对话框位于页面底部，但 jqgrid 似乎位于对话框的层下...当我尝试单击对话框的 X 按钮时，它没有关闭。

这是我对 jqrid 的实现：

```
 $('#grid2').jqGrid({
    url: '/Room/JsonRoom',
    datatype: 'json',
    mtype: 'GET',
    colNames: ['ROOM NAME', 'OPERATIONS'],
    colModel: [
{ name: 'ROOM NAME', index: 'name', width: 200, sortable: false, align: 'center' },
{ name: 'OPERATIONS', index: 'operation', width: 200, sortable: false, search: false, align: 'center'}],
    rowNum: 10,
    rowList: [10, 20, 30],
    pager: '#pager2',
    sortname: 'name',
    viewrecords: true,
    sortorder: "desc",
    width: 900,
    height: "100%",
    caption: "ROOMS"
});
jQuery("#grid2").jqGrid('navGrid', '#pager2', { del: false, add: false, edit: false }, {}, {}, {}, { width: 600 }); 
```

我怎么能解决这个...

更新：这是我调用 css 和 js 文件的方式

```
 <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
    <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/themes/base/css")" rel="stylesheet" type="text/css" />
    <link href="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Content/jquery.jqGrid/css")" rel="stylesheet" type="text/css" />
    <script src="@System.Web.Optimization.BundleTable.Bundles.ResolveBundleUrl("~/Scripts/js")" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:41:32.047

我想你忘了包括 jQuery UI CSS。您应该以任何方式验证页面上的*完整*HTML 代码，包括所有 CSS、JavaScript 文件及其顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T06:42:57.420

我知道这一点，我也面临着这么久的背影。
这主要是由于`model`和`jqModel`。

```
modal:true,  
jqModal:true, 
```

如果您在网格代码中有上述内容，则当对话框或警报消息作为弹出窗口出现时，您无法单击背景对象。

将这样的代码放入您的网格代码中：`modal:false, jqModal:true, <your remaining code>`. [在这里](https://stackoverflow.com/questions/8217920/jqgrid-edit-form-closing-when-click-off-form/8224212#8224212)
查看我的答案。

# facebook - 如何只获取上传个人资料照片的朋友，而忽略那些默认剪影的用户？

> ID：10827962
> 
> 赞同：1
> 
> 时间：2012-05-31T05:35:14.990
> 
> 标签：facebook, facebook-graph-api, facebook-fql, social-networking

我想不出办法只用个人资料照片来交朋友。我可以使用多查询来检查每个朋友是否有照片，但这会导致流量很大。

有没有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:00:15.500

这可以通过简单的 FQL 来实现。

```
SELECT uid, name, pic_small FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND pic_small != 'https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v1/yP/r/FdhqUFlRalU.jpg' 
```

seb-query 会得到你所有的朋友`uids`。另一个查询将匹配 uids 与配置文件数据检查是否`pic_small`指的是 Facebook 用作[占位符](https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v1/yP/r/FdhqUFlRalU.jpg)的内容。

[您可以在这里](https://developers.facebook.com/tools/explorer/?fql=SELECT%20uid,%20name,%20pic_small%20FROM%20user%20WHERE%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20=%20me%28%29%29%20AND%20pic_small%20!=%20%27https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v1/yP/r/FdhqUFlRalU.jpg%27)快速测试它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:12:14.913

尽管 Gajus 建议的查询现在*可能*有效，但一旦 Facebook 更改其 CDN 上默认图片的 URL，它就会中断。（可能发生，可能不会发生。）

所以我建议这个改进：

该`profile_pic`表有一个名为 的字段`is_silhouette`，它是一个布尔值，用于指示用户是否有自己的个人资料图片集。

因此，要仅获取具有个人资料图片集的朋友，您可以使用

```
SELECT uid, name FROM user WHERE uid IN
  (SELECT id FROM profile_pic WHERE
    id IN (SELECT uid1 FROM friend WHERE uid2 = me() )
    AND NOT is_silhouette
  ) 
```

–>[在 Graph API Explorer 中尝试此查询。](https://developers.facebook.com/tools/explorer?fql=%20%20%20%20SELECT%20uid,%20name%20FROM%20user%20WHERE%20uid%20IN%0A%20%20%20%20%20%20%28SELECT%20id%20FROM%20profile_pic%20WHERE%0A%20%20%20%20%20%20%20%20id%20IN%20%28SELECT%20uid1%20FROM%20friend%20WHERE%20uid2%20%3D%20me%28%29%20%29%0A%20%20%20%20%20%20%20%20AND%20NOT%20is_silhouette%0A%20%20%20%20%20%20%29)

# php - 在线文件存储逻辑

> ID：10827975
> 
> 赞同：6
> 
> 时间：2012-05-31T05:36:36.827
> 
> 标签：php, file-manager

我想开发一个像文件管理器这样的网站。用户注册并获得固定磁盘空间的地方可以说是 20MB。现在用户可以将他们的 pdf、doc、txt、jpeg 等文件上传到他们的磁盘限制。我可以使用 PHP 进行开发。

现在下面是我的问题：

1) 如果用户的文件损坏，他们可以在 2-3 天前回滚他们的文件夹。当用户上传他们的重要文件时，文件必须是安全的并且不受病毒侵害。

是否有任何提供此类设施的第三方存储服务器？

2）还应从浏览器预览所有文件。我正在使用谷歌文档查看器。在浏览器中预览文件是一种安全的好方法吗？但是所有人都可以访问谷歌链接，我需要添加一些限制，因为文件只能由其所有者查看。

我知道这是一项重大任务，但我只需要某种逻辑。请分享你的想法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T05:48:07.100

1.  任何云存储服务都可以用于此。您将获得硬盘空间。没有为此提供修订控制系统的存储服务器。不过，您可以为此使用 git、svn。但由于文件是二进制文件，您无法获得这些工具的全部功能。

2.  如何预览文件取决于您。如果您使用 PHP，您可以创建站点，并在后端使用 API 与存储服务进行交互。如果您使用 PHP，则不能使用 Google 文档。另请注意，Google 链接可以设为私有。

我建议你这个，

*   查找云存储服务并使用服务器中的存储。任何人都会做。
*   使用 PHP 创建 UI 并使用 PHP 控制访问。
*   直接在您的服务器中或通过 API 在 3rd 方存储服务器中操作文件
*   使用修订控制系统来跟踪更改。并在 PHP 端使用它的 API。

一些云存储服务

1.  [亚马逊 S3](http://aws.amazon.com/cloudfront/)。它还支持版本控制。
2.  [谷歌云存储](https://developers.google.com/storage/)
3.  [微软天青](http://msdn.microsoft.com/en-us/windowsazure/default.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T05:43:57.337

试试 Microsoft SkyDrive 或 Google Drive 或 Dropbox

# java - Java SSL 通信

> ID：10827978
> 
> 赞同：0
> 
> 时间：2012-05-31T05:36:54.307
> 
> 标签：java, security, ssl, certificate

我正在尝试在客户端/服务器之间进行 SSL 通信。

到目前为止，我已经`java.security.cert.X509Certificate`从**keystore**创建了。接下来我应该怎么做才能使这次交流成功。任何示例都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T05:41:31.353

> 到目前为止，我已经创建了 java.security.cert.X509Certificate

你不需要那个。

遵循[JSSE 参考指南](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html)中的所有说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:06:16.060

这个答案解决了我的问题。[https://stackoverflow.com/a/859271/420613](https://stackoverflow.com/a/859271/420613) 另请参阅此[代码](http://www.imrantariq.com/blog/?p=867)。

# javascript - 如何在 sencha touch 中实现 iPhone 外观相似的警报框？

> ID：10827982
> 
> 赞同：0
> 
> 时间：2012-05-31T05:37:16.803
> 
> 标签：javascript, iphone, sencha-touch, extjs, alert

我正在尝试在看起来类似于 iPhone 警报框的 sencha touch 应用程序中实现警报框。

我曾经`Ext.Msg.alert('', 'Hello World')`实现过警报框，但它看起来与 iPhone 警报框不同。我附上了两张图片以供参考。![iPhone警报框](../Images/85ee4fafea5c73f3227d4122571573fa.png)

![煎茶警报框](../Images/2b82ac4147249210e3746f80025843c4.png)

任何指导都会非常有帮助。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:13:49.230

首先你需要添加

```
requires: ['Ext.device.Notification'] 
```

注册通知方法然后使用下面的代码来提醒

```
Ext.device.Notification.show({
    title: 'Test Adi',
    message: 'Is your email address is: adnan@sencha.com',
    buttons: Ext.MessageBox.OKCANCEL,
    callback: function(button) {
        if (button == "ok") {
            console.log('Verified');
        } else {
            console.log('Nope.');
        }
    }
}); 
```

代替

```
Ext.Msg.alert('', 'Hello World') 
```

# amazon-s3 - 在亚马逊服务器中托管动态网站

> ID：10827984
> 
> 赞同：3
> 
> 时间：2012-05-31T05:37:25.623
> 
> 标签：amazon-s3

我正在做一个项目，我们在 S3 Amazon 服务器中托管我们的文件（仅由用户上传）。现在的问题是亚马逊托管的内容加载速度很快。但是托管在我们服务器中的 JS、CSS 和 CSS 图像（非常小的图像）需要花费太多时间来加载。无论如何将我们的整个动态网站托管到 Amazon S3，是否可以将 DNS 配置到亚马逊？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T05:45:34.517

将您的静态文件也托管到 S3。

1.  创建一个名为`static.yourcompany.com`
2.  C将存储桶 URL 命名为`static.yourcomapany.com`
3.  在您的网页中，使用基本 URL 为 CSS、JS、图像的绝对路径`http://static.yourcompany.com`
4.  您可能希望利用 JetS3t 等工具将文件与最新更改同步。

参考：

*   [如何使用 S3 为您的子域起别名](http://carltonbale.com/how-to-alias-a-domain-name-or-sub-domain-to-amazon-s3/)
*   [JetS3t 文档](http://jets3t.s3.amazonaws.com/toolkit/code-samples.html)
*   [存储桶的虚拟托管](http://docs.amazonwebservices.com/AmazonS3/latest/dev/VirtualHosting.html)
*   [在 S3 上托管您的静态网站](http://aws.typepad.com/aws/2011/02/host-your-static-website-on-amazon-s3.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T06:44:22.380

您也可以阅读这篇博客，作者已经非常详细地描述了该过程 [http://geekospace.com/hosting-static-web-sites-in-aws-simple-storage-service/](http://geekospace.com/hosting-static-web-sites-in-aws-simple-storage-service/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T23:40:46.470

对于您网站的动态部分，请查看[http://aws.amazon.com/elasticbeanstalk/](http://aws.amazon.com/elasticbeanstalk/)但路由 53 本质上是一种将 DNS 配置到亚马逊的方法。[http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html)

# php - 加载一个 php 扩展

> ID：10827986
> 
> 赞同：0
> 
> 时间：2012-05-31T05:37:30.533
> 
> 标签：php

我想将此库加载到内存中： [http://www.php.net/manual/en/book.mailparse.php](http://www.php.net/manual/en/book.mailparse.php) http://pecl.php.net/package/mailparse

网络主机不会永久安装它，但有没有办法可以在运行时将它加载到我的脚本中？

我看到这个功能：[http ://www.php.net/manual/en/function.dl.php](http://www.php.net/manual/en/function.dl.php)

在文档中，他们有一个看起来正确的代码片段：

```
if (!extension_loaded("mailparse")) {
    dl("mailparse.so");
} 
```

它是我应该使用的吗？可能吗？

谢谢，

垫

# windows-phone-7 - WP7：在 XNA 中播放系统声音最简单的方法是什么

> ID：10827989
> 
> 赞同：1
> 
> 时间：2012-05-31T05:38:09.730
> 
> 标签：windows-phone-7, xna, playback, audio

我只需要在我的 XNA 游戏中播放一些简单的声音，比如简单的“点击”。最简单的方法是什么。有什么方法可以从系统中找到声音文件？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:48:27.800

如果我理解正确，您想为您的 XNA 游戏添加一些音效。为此，您似乎只需将其添加到内容管道中即可。我在这里找到了几个样本：

[http://msdn.microsoft.com/en-us/library/bb195053.aspx](http://msdn.microsoft.com/en-us/library/bb195053.aspx)

[http://msdn.microsoft.com/en-us/library/bb203895(v=xnagamestudio.31).aspx](http://msdn.microsoft.com/en-us/library/bb203895(v=xnagamestudio.31).aspx)

# codeigniter - 为什么 codeIgniter 复制和附加 URL？

> ID：10827994
> 
> 赞同：2
> 
> 时间：2012-05-31T05:39:06.627
> 
> 标签：codeigniter, url

当我将工作中的 CI webapp 从本地主机移动到虚拟主机时，我遇到了“复制和附加 URL”问题。

在我的本地主机中，这有效（显示登录页面）： http: **//mylocal/someapp/** --> 将重定向到 http: **//mylocal/someapp/index.php/login**

但是，在迁移到虚拟主机后，尝试像这样访问它： http://webhosting.com/someapp/ **，**不知何故它会自动附加为**http://webhosting.com/someapp/%20//webhosting.com/someapp /index.php/登录**

我的 .htaccess 不包含任何内容（适用于本地主机）

在 config.php 中，

```
$config['base_url']= ''; 
```

将重定向到***登录***控制器（然后是***登录***视图）的***主***控制器如下所示：

 **```
class Home extends CI_Controller {

 function __construct()
 {
   parent::__construct();
 }

 function index()
 {
   if($this->session->userdata('logged_in'))
   {
     $session_data = $this->session->userdata('logged_in');
     $data['username'] = $session_data['username'];
     $this->load->view('home_view', $data);
   }
   else
   {
     //If no session, redirect to login page
     redirect('login', 'refresh');
   }
 }

 function logout()
 {
   $this->session->unset_userdata('logged_in');
   session_destroy();
   redirect('home', 'refresh');
 }

} 
```

或者我需要配置的虚拟主机中的一些设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-29T05:31:07.933

例如，在基本 url 之前使用`http://`前缀 `$config['base_url'];`

```
$config['base_url']=http://localhost/islam; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:12:21.107

```
$config['base_url']= ''; 
```

应包含您网站的基本网址。我认为这就是问题所在。

应该：

```
$config['base_url']= 'http://yoursite.com/'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T05:07:52.223

我自己找到了答案。事实证明，一些虚拟主机没有正确处理 CI 刷新。

```
header("Refresh:0;url=..."); 
```

相反，它只想要这个：

```
header("Location: ..."); 
```

所以，我改变了**url_helper.php** (system/helpers/url_helper.php line:543)，从

```
case 'refresh' 
```

至

```
case 'xxxrefresh' 
```

以便它始终跳过标头刷新并仅使用标头位置。我不知道这是否是正确的解决方案，但它适用于我的网站。在从本地计算机迁移 CodeIgniter 代码之前测试您的虚拟主机特性。

希望这对将来的人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-22T20:27:43.813

我在本地安装时遇到了同样的“重复问题”。这是我的解决方案：在 application/config/config.php 中设置您的基本 URL，例如：

```
$config['base_url'] = 'http://localhost/ci/'; 
```

添加`http://`or`https://`前缀以解决“重复问题”很重要。当然，结尾的斜线也是必须的。**

# cuda - Nsight 跳过（忽略）VS10 Cuda 中的断点工作正常，nsight 始终跳过几个断点

> ID：10827995
> 
> 赞同：5
> 
> 时间：2012-05-31T05:39:09.547
> 
> 标签：cuda, gpgpu, gpu, nsight

我正在使用 nsight 2.2、Toolkit 4.2、最新的 nvidia 驱动程序，我在我的计算机中使用了几个 GPU。构建自定义 4.2。我在 CUDA 的项目属性上设置了“生成 GPU 输出”，nsight 监视器打开（一切看起来都很棒）。

我在全局内核函数上设置了几个断点。nsight 在函数声明处停止，但会跳过几个断点。这就像 nsight 决定是打断点还是跳过断点。有趣的是，nsight 会在 for 循环处停止，但不会在简单的赋值操作上停止。

另一个问题是我无法设置焦点或将变量添加到监视列表。在这种情况下（请参阅随附的屏幕截图），我无法解析变量的值：“posss”或“testDetctoinRate1”在这种情况下是寄存器。另一方面，共享内存或块内存会自动插入到本地列表中。

[这是内核的屏幕截图，在调试之前](http://postimage.org/image/tao73fjaj/full/)

[这是调试期间的屏幕截图](http://postimage.org/image/5c68lwrap/full/)

我通过以下调用唤起我的内核函数：

```
checkCUDA<<<1, 32>>>(sumMat->rows,sumMat->cols , (UINT *)pGPUsumMat); 
cudaError = cudaGetLastError();
if(cudaError != cudaSuccess)
{
    printf("CUDA error: %s\n", cudaGetErrorString(cudaError));
    exit(-1);
} 
```

内核调用没有错误。

是否有任何选项可以强制 nsight 在所有断点处停止？如何将线程的寄存器添加到我的观察列表？

## 更新

最初，我的调试命令行如下：

```
# Runtime API (NVCC Compilation Type is hybrid object or .c file)
set CUDAFE_FLAGS=--sdk_dir "c:\Program Files\Microsoft SDKs\Windows\v7.0A\"
"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" --use-local-env --cl-version 2010 -ccbin "C:\Program Files\Microsoft Visual Studio 10.0\VC\bin" -I"..\..\..\opencv\modules\gpu\src\opencv2\gpu\device" -I"..\..\..\opencv\modules\gpu\include\opencv2\gpu" -I"..\..\..\build\include\\"   -G  --keep-dir "Debug" -maxrregcount=0  --machine 32 --compile  -g    -Xcompiler "/EHsc /nologo /Od /Zi  /MDd  " -o "Debug\%(Filename)%(Extension).obj" "%(FullPath)" 
```

我在属性页上更改了 --> cuda --> 主机 --> 生成托管调试信息 --> 否

现在我的命令行不包含 -g 和 -O 字母，我的命令行如下：

```
# Runtime API (NVCC Compilation Type is hybrid object or .c file)
set CUDAFE_FLAGS=--sdk_dir "c:\Program Files\Microsoft SDKs\Windows\v7.0A\"
"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" --use-local-env --cl-version 2010 -ccbin "C:\Program Files\Microsoft Visual Studio 10.0\VC\bin" -I"..\..\..\opencv\modules\gpu\src\opencv2\gpu\device" -I"..\..\..\opencv\modules\gpu\include\opencv2\gpu" -I"..\..\..\build\include\\"   -G  --keep-dir "Debug" -maxrregcount=0  --machine 32 --compile      -Xcompiler "/EHsc /nologo /Od /Zi  /MDd  " -o "Debug\%(Filename)%(Extension).obj" "%(FullPath)" 
```

虽然，我用 进行调试`-o`，这有关系吗？它没有任何改变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T17:08:00.283

右键单击解决方案资源管理器中的 .cu 文件，然后转到`CUDA C/C++ | Device`并设置`Generate GPU Debug Information`为`Yes (-G0)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T03:31:02.330

检查Nsight下的“Enable CUDA Memory Checker”是否关闭。它可能允许 NSight 在 VS C++ 2010 的调试模式下停止 CUDA 内核代码的断点。至少，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:34:46.927

在调试版本中，您是否将 -O 和 -g 选项都传递给 nvcc？如果是这样，请尝试删除 -O。

背景：这听起来像是尝试调试已由编译器优化的代码时遇到的问题。在优化期间，编译器会更改代码，使某些源代码行不再有任何与之关联的机器代码指令，从而使调试器无法在这些行上设置断点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T07:59:27.370

我有类似的问题。Nsight 并没有在任何断点处停止。但完成执行。

如果我使用 -G0 作为调试信息选项。它给出了一个错误。

我正在使用带有 cuda 4.2 和 cuda 5 工具包的 nvidia 2.2.0.1225。带有 301.42 图形驱动程序。

# tomcat - Tomcat不解压缩war文件？

> ID：10827996
> 
> 赞同：0
> 
> 时间：2012-05-31T05:39:17.813
> 
> 标签：tomcat, servlets

我`Tomcat 6`用来部署我的 servlet Web 应用程序。当我将战争文件 ( `myapp.war`) 复制到 Tomcat 的 webapp 文件夹中时。有时我注意到 myapp.war 被解压缩到名为 的文件夹`myapp`中，但有时它没有被解压缩。在这两种情况下，当我从浏览器评估我的 web 应用程序时，它仍然可以正常工作。

为什么有时 Tomcat 不解压缩我的 war 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-06T18:30:02.437

当我没有为“myapp”目录设置适当的权限时，我遇到了类似的问题。如果您在 linux 上运行 tomcat，请将 Tomcat 设置为“myapp”目录的所有者。