# StackOverflow 问答 12205000-12205999

# jquery - Jquery 2 Clicks 函数动画

> ID：12205002
> 
> 赞同：1
> 
> 时间：2012-08-30T20:32:38.563
> 
> 标签：jquery, jquery-animate

我想在第一次单击时向右滑动 div，当再次单击时，我希望它返回到原始位置

我有以下内容，但 div 没有移动，并且 console.log 显示 clicked-2 即使在第一次点击时也是如此。

```
$('.note-title').click(function(){
        console.log("clicked-1");
        $(this).animate({'margin-left':'200px'},200);
    },function(){
        console.log("clicked-2");
        $(this).animate({'margin-left':'0px'},200);
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:34:52.810

简单地使用布尔标志怎么样？

```
var clickOne = true;
$('.note-title').click(function(){
  if (clickOne){
    $(this).animate({'margin-left':'200px'},200);
  }else{
    $(this).animate({'margin-left':'0px'},200);
  }
  clickOne = !clickOne;
} 
```

每次单击都会切换标志的值并执行条件表达式的不同部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:33:53.587

**注意**此方法已[折旧](http://bugs.jquery.com/ticket/11786)。您应该使用 Lix 的解决方案。

* * *

利用[`.toggle`](http://api.jquery.com/toggle-event/)

```
$('.note-title').toggle(function(){
    console.log("clicked-1");
    $(this).animate({'margin-left':'200px'},200);
},function(){
    console.log("clicked-2");
    $(this).animate({'margin-left':'0px'},200);
}); 
```

使用`.click`，所有传入的回调将在每次点击时触发，一个接一个。

# javascript - 是否可以使用 CSS 分配数据属性？

> ID：12205004
> 
> 赞同：0
> 
> 时间：2012-08-30T20:32:41.857
> 
> 标签：javascript, html, css, dom, custom-data-attribute

我可以通过它的 CSS 向元素添加数据属性吗？

```
.myClass{
/* assign data attribute here */
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:33:42.463

CSS 用于演示而不是数据（操纵标记）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:33:58.510

不，这是不可能的。你必须使用其他东西，比如javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T20:36:46.677

不，这不是 CSS 的用途。CSS 的理念恰恰是关于表现的，而不是关于数据的。如果必须，您可以做的是在不同元素中具有不同的可能值，并通过 CSS 更改哪个元素可见。

# ios5 - iOS AUGraph 在 Mixer 和 kAudioUnitSubType_RemoteIO 之间连接 kAudioUnitSubType_Reverb2 单元

> ID：12205005
> 
> 赞同：0
> 
> 时间：2012-08-30T20:32:45.320
> 
> 标签：ios5, audio, core-audio

在我的 AuGraph 中，我有以下情况：

采样器 --------->

```
 mixer ----> remoteIO 
```

6个回调----->

```
AudioUnitGraph 0x311E02A:   
Member Nodes:   
   node 1: 'auou' 'rioc' 'appl', instance 0xc66c020 O       
   node 2: 'aumx' 'mcmx' 'appl', instance 0x598f20 O    
   node 3: 'aumu' 'samp' 'appl', instance 0x59ba40 O    
Connections:    node   3 bus   0 => node   2 bus   7  [ 2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved]  
                node   2 bus   0 => node   1 bus   0  [ 2 ch,      0 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]   
Input Callbacks:    {0x1a7bb1, 0xd1f5648} => node   2 bus   0  [1 ch, 44100 Hz]
                    {0x1a7bb1, 0xd1f5648} => node   2 bus   1  [1 ch, 44100 Hz]     {0x1a7bb1, 0xd1f5648} => node   2 bus   2  [1 ch, 44100 Hz]     
                    {0x1a7bb1, 0xd1f5648} => node   2 bus   3  [1 ch, 44100 Hz]     
                    {0x1a7bb1, 0xd1f5648} => node   2 bus   4  [1 ch, 44100 Hz]     
                    {0x1a7bb1, 0xd1f5648} => node   2 bus   5  [1 ch, 44100 Hz]           
                    {0x1a7bb1, 0xd1f5648} => node   2 bus   6  [1 ch, 44100 Hz] 
```

一切正常，但格式不匹配。回调工作和采样器听起来很迷人。

现在我尝试像这样插入混响：

样品->

混音器 ---->**混响**--> remoteIO

6 呼叫-->

我得到这张图：

```
AudioUnitGraph 0x313402A:
  Member Nodes:
    node 1: 'auou' 'rioc' 'appl', instance 0x569060 O  
    node 2: 'aumx' 'mcmx' 'appl', instance 0x56a210 O  
    node 3: 'aumu' 'samp' 'appl', instance 0x56b200 O  
    node 4: 'aufx' 'rvb2' 'appl', instance 0x56ba30 O  
  Connections:
    node   3 bus   0 => node   2 bus   7  [ 2 ch,  44100 Hz, 'lpcm' (0x00000C2C) 8.24-bit little-endian signed integer, deinterleaved]
    node   2 bus   0 => node   4 bus   0  [ 2 ch,  44100 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]
    node   4 bus   0 => node   1 bus   0  [ 2 ch,      0 Hz, 'lpcm' (0x00000029) 32-bit little-endian float, deinterleaved]

    Input Callbacks: (the same as before) 
```

和错误：**AUGraphInitialize 错误：-10868* **

 *连接代码：

```
result = AUGraphConnectNodeInput ( processingGraph,
            mixerNode,         // source node
             0,                 // source node output bus number
             revNode,            // destination node
             0                  // desintation node input bus number
         );

result = AUGraphConnectNodeInput ( processingGraph,
                                                                    revNode,         // source node
                                                                    0,                 // source node output bus number
                                                                    iONode,            // destination node
                                                                    0                  // desintation node input bus number                                                         ); 
```

我还尝试统一混响和混音器的格式：

```
AudioStreamBasicDescription asbd;
UInt32 asbdSize = sizeof (asbd);
memset (&asbd, 0, sizeof (asbd));

AudioUnitGetProperty(mixerUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Input, 0, &asbd, &asbdSize);
AudioUnitSetProperty(reverbUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &asbd, sizeof(asbd)); 
```

我究竟做错了什么？抱歉格式错误，今天加入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:25:28.427

我遇到了同样的问题，但发现我必须从混音器输入的其中一个单元复制 ASBD，并将其设置为混音器单元的输出范围。

```
AudioStreamBasicDescription asbd;
UInt32 sz = sizeof(asbd);
result = AudioUnitGetProperty(someUnitBeforeMixer, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, 0, &asbd, &sz);
NSCAssert (result == noErr, @"Unable to get ASBD. Error code: %d '%.4s'", (int) result, (const char *)&result);
result = AudioUnitSetProperty(mixerUnit,
                              kAudioUnitProperty_StreamFormat,
                              kAudioUnitScope_Output,
                              0,
                              &asbd,
                              sizeof(asbd));
NSCAssert (result == noErr, @"Unable to set ASBD. Error code: %d '%.4s'", (int) result, (const char *)&result); 
```

如果您知道它应该是什么格式，则可以手动设置它，而不是复制 ASBD。*

# java - 带有 2 个 JPanel 的 JSplitPane，移动分隔线后获取 JPanel 的大小

> ID：12205006
> 
> 赞同：1
> 
> 时间：2012-08-30T20:32:47.863
> 
> 标签：java, swing, jsplitpane, propertychangelistener

**状态：** 我想显示 2 个 JPanel，其中包含使用 JSplitPane 的图像（顶部一个图像，底部一个图像）

当我移动窗格的分隔线时，我希望两个面板都相应地调整大小。（图像占用最大可能空间）

**问题：** 我正在使用 PropertyChangeListener 来跟踪分隔线位置的变化，但该事件似乎在实际“重绘”之前被触发？窗口的发生

**我尝试过的：** - 在读取大小之前重新绘制组件

**最小工作示例：**

```
public class Main {
public static void main(String argv[]) {
    MyFrame f = new MyFrame();
}
}

class MyFrame extends JFrame {
/**
 * 
 */
private static final long serialVersionUID = 1L;
JPanel anyPanel, anyPanel2;
JSplitPane p;

public MyFrame() {
    PropertyChangeListener resizeHandler = new PropertyChangeListener() {
        @Override
        public void propertyChange(PropertyChangeEvent evt) {
            System.out.println(anyPanel.getHeight());
        }
    };

    anyPanel = new JPanel();
    anyPanel2 = new JPanel();
    p = new JSplitPane(JSplitPane.VERTICAL_SPLIT, anyPanel, anyPanel2);
    p.addPropertyChangeListener(JSplitPane.DIVIDER_LOCATION_PROPERTY, resizeHandler);
    getContentPane().add(p);
    this.add(p);
    this.pack();
    this.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:02:02.493

您需要添加到构造函数

```
p.setContinuousLayout(true); 
```

# c# - JSON数据无法在jQuery中正确序列化

> ID：12205007
> 
> 赞同：1
> 
> 时间：2012-08-30T20:32:56.993
> 
> 标签：c#, jquery, ajax, json, ashx

我一直在玩最近发布的 jQueryGannt 插件/应用程序[，](https://github.com/robicch/jQUeryGantt)我正在尝试编写一个下拉列表，其中填充了服务器上不同存储甘特图的名称。要生成此下拉列表，我使用此功能：

```
$.ajax({
    url: "GanttLoader.ashx?action=getGantts",
    context: document.body, 
    type: "GET",
    dataType: "json",
    success: function(data) {
        if(data.gantts != null) {
            for(var gantt in data.gantts) {
                alert(gantt.name + " is locked " + gantt.locked);
                var toAppend = $("<option/>").val(gantt.name).html(gantt.name);
                if(gantt.locked) { toAppend.attr("disabled", "disabled"); }
                $("#saved_gantts").append(toAppend);
            }
            $("#saved_gantts").append($("<option/>").val("add new").html("add new"));
                saved_gantts_loaded = true;
            }
            else if(data.status == "none") {
                $("#saved_gantts").append($("<option/>").val("add new").html("add new"));
            }
        },
        error: function() { alert("couldn't load gantt charts"); }
}); 
```

目前，这是服务器发送以生成下拉列表的内容（尚未发送甘特图数据，只是一个简单的甘特图打开列表和当前正在编辑的列表）：

```
{
  "gantts": [
    {
      "name": "other",
      "locked": true
    },
    {
      "name": "test",
      "locked": true
    }
  ]
} 
```

由于某种原因，在成功函数的调用中，for 循环遍历存储在数组中的两个对象，但警报始终打印`"undefined is locked undefined"`. 有人知道我的处理程序或返回的 JSON 有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:37:46.977

您应该使用`data.gantts[gantt].name`而不是`gantt.name`.

这是更新的代码：

```
$.ajax({
    url: "GanttLoader.ashx?action=getGantts",
    context: document.body, 
    type: "GET",
    dataType: "json",
    success: function(data) {
        if(data.gantts != null) {
            var gantts = data.gantts;
            for(var i in gantts) {
                alert(gantts[i].name + " is locked " + gantts[i].locked);
                var toAppend = $("<option/>").val(gantts[i].name).html(gantts[i].name);
                if(gantts[i].locked) { toAppend.attr("disabled", "disabled"); }
                $("#saved_gantts").append(toAppend);
            }
            $("#saved_gantts").append($("<option/>").val("add new").html("add new"));
                saved_gantts_loaded = true;
            }
            else if(data.status == "none") {
                $("#saved_gantts").append($("<option/>").val("add new").html("add new"));
            }
        },
        error: function() { alert("couldn't load gantt charts"); }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:43:48.300

您可能想使用

```
for (i=0;i<data.gantts.length;i++) {
    alert(data.gantts[i] + " is locked " + data.gantts[i].locked); 
```

在处理某些框架时，我发现 for(... in ...) 格式有些不可靠

# android - 未调用 OnSharedPreferenceChangeListener

> ID：12205016
> 
> 赞同：0
> 
> 时间：2012-08-30T20:33:30.377
> 
> 标签：android

这是我的主要活动中的代码，从未调用过，更改是在另一个活动中完成的，这有关系吗？

```
SharedPreferences.OnSharedPreferenceChangeListener listener = new
  SharedPreferences.OnSharedPreferenceChangeListener() {

    @Override
    public void onSharedPreferenceChanged(SharedPreferences prefs, String key)
    {
        Toast.makeText(getBaseContext(), "clef modifiee : " + key,
            Toast.LENGTH_LONG).show();
        if(key == "LibraryName" || key == "LibraryPath")
        {
            LoadLibFile();
        }
    }
};

SharedPreferences prefs = getSharedPreferences(PREFS_NAME, 0);
prefs.registerOnSharedPreferenceChangeListener(listener); 
```

抱歉缩进，在平板电脑上。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:41:21.797

是的，一旦您从事其他活动（这不是主要活动），这很重要。您的共享首选项更改侦听器不再有效并且不会被调用。您可能可以在更改共享首选项的活动中实现一个侦听器。

# javascript - jquery - 添加/删除/更改输入文本的部分值

> ID：12205019
> 
> 赞同：1
> 
> 时间：2012-08-30T20:33:42.637
> 
> 标签：javascript, jquery

我正在使用这个插件： http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)做一个建议字段，用户可以开始输入，选择他们想要的项目，他们可以添加多个建议。

这个插件有一个 onAdd 和一个 onDelete 回调。

我想要做的是，onAdd，我想将元素 id 存储在隐藏输入的值中。他们可以添加多个项目，因此输入值最终为：123,145,875,968

还行吧。现在我需要帮助的地方是 OnDelete 事件。我需要更新输入值以反映他们删除了一个项目的事实。

这是代码

```
onAdd: function (item) {
   var value = $("#itemID").val();
   $("#itemID").val(value + item.id + ',');
},
onDelete: function (item) {
   ???? In word: Remove that specific ID from the input value, but keep the other value
} 
```

PS。我将这些 ID 存储在输入中，以便以后能够轻松获取我的值列表以进行 ajax 调用。现在，我不确定这是否是最好的方法，但是是的，这就是我作为“新”程序员的想法:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:47:41.077

我认为您不需要在添加或删除项目时存储建议字段的整体值。每当您准备好进行 ajax 调用时，请使用以下命令获取建议字段的当前值：

```
selector.tokenInput("get"); 
```

这记录在您在“方法”部分中引用的 jQuery Tokeninput 页面上。这将为您提供值的 JSON 表示形式，如下所示：

```
[{id: 0, name: "something"},{id: 1, name: "something else"}] 
```

然后你可以遍历它，获取 ids（如果你想要的话），然后将它们连接成一个字符串并通过 AJAX 提交它们。

必要时进行序列化。如果您要对数据进行额外的工作，请将其保持在最容易完成工作的格式中，直到您需要对其进行序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:55:23.577

### 更新

查看该插件文档：

`selector.tokenInput("get");` 从 tokeninput 中获取所选标记的数组（每个项目都是 kind 的对象`{id: x, name: y}`）。

尝试这样的事情：

```
// do this at time of submit()
var tokens = $('#your-plugin-element-id').tokenInput( 'get' );
var output = [];
$.each( tokens, function( i, el ) {
  output.push( el.id );
});
var outputString = output.join( ',' ); 
```

这样您就不必在单独的隐藏输入中跟踪。

更干净，但可能更难理解使用`map()`

```
var tokens = $('#your-plugin-element-id').tokenInput( 'get' );
var outputString = $.map( tokens, function( el ) { return el.id; } ).join( ',' ); 
```

-

### 老的

这应该工作：

```
var itemList = $('#itemID').val().split(',');
for( var i=0 ; i<itemList.length ; i++ ) {
  if( itemList[i] == item.id ) {
    itemList.splice( i, 1 );
    break;
  }
}
$('#itemID').val( itemList.join( ',' ) ); 
```

编辑：这是对现有代码的快速修复，但在提交时进行序列化会更好，如另一条评论中所述

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:09:46.923

检查此代码

```
 onDelete: function (item) {
                var idd  = item.id;
                alert (idd);
                var value = $("#itemID").val();  
                var x = value.replace( idd+ ',', "" );
                $("#itemID").val(x);
                } 
```

itemID 是隐藏的输入

# android - 如何重写这个 xml 布局以使用更多的 RelativeLayout？

> ID：12205024
> 
> 赞同：0
> 
> 时间：2012-08-30T20:33:50.100
> 
> 标签：android, android-layout, android-relativelayout, textview

简单的问题。我有这个 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:id="@+id/plancus">

     <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/LoggerContents"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal"
        android:layout_above="@+id/ButtonsTopLine">
        <TextView
            android:id="@+id/leftpane"
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:ems="10"
            android:gravity="center"
            android:layout_weight="1" 
            android:text="@string/logger"/>
        <TextView
            android:id="@+id/rightpane"
            android:layout_width="0dip"
            android:layout_height="fill_parent"
            android:gravity="top"
            android:freezesText="true"
            android:maxLines = "50"
            android:scrollbars = "vertical"
            android:layout_weight="2"/>
    </LinearLayout>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ButtonsTopLine"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_above="@+id/ButtonsBottomtLine">
        <Button
            android:id="@+id/askas2"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/askas2"
            android:onClick="rollLogger"/>
        <Button
             android:id="@+id/askas3"
             android:layout_width="0dip"
             android:layout_height="wrap_content"
             android:layout_weight="1"
             android:text="@string/askas3"
             android:onClick="rollLogger"/>
        <Button
             android:id="@+id/askas4"
             android:layout_width="0dip"
             android:layout_height="wrap_content"
             android:layout_weight="1"
             android:text="@string/askas4"
             android:onClick="rollLogger"/>
        <Button
             android:id="@+id/askas6"
             android:layout_width="0dip"
             android:layout_height="wrap_content"
             android:layout_weight="1"
             android:text="@string/askas6"
             android:onClick="rollLogger"/>
    </LinearLayout>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ButtonsBottomtLine"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" 
        android:layout_alignParentBottom="true">
        <Button
           android:id="@+id/askas8"
           android:layout_width="0dip"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:text="@string/askas8"
           android:onClick="rollLogger"/>
        <Button
           android:id="@+id/askas10"
           android:layout_width="0dip"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:text="@string/askas10"
           android:onClick="rollLogger"/>
        <Button
           android:id="@+id/askas12"
           android:layout_width="0dip"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:text="@string/askas12"
           android:onClick="rollLogger"/>
        <Button
           android:id="@+id/askas20"
           android:layout_width="0dip"
           android:layout_height="wrap_content"
           android:layout_weight="1"
           android:text="@string/askas20"
           android:onClick="rollLogger"/>
    </LinearLayout>         
</RelativeLayout> 
```

有没有办法改变它，所以不需要 `LinearLayout`包含两个的第一个？`TextViews`

第一个`TextView`是左窗格，而另一个是右窗格。最后一个应该比第一个更大（不一定是 2:1）。`TextViews`应该填充从顶部到按钮线性视图开头的所有空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:48:45.660

```
> Is there a way to change it so the first linear layout, which contains two textviews, is not needed?

yes, there is, 

    <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/plancus"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/ButtonsTopLine"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/ButtonsBottomtLine"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/askas2"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="rollLogger"
            android:text="@string/askas2" />

        <Button
            android:id="@+id/askas3"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="rollLogger"
            android:text="@string/askas3" />

        <Button
            android:id="@+id/askas4"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="rollLogger"
            android:text="@string/askas4" />

        <Button
            android:id="@+id/askas6"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="rollLogger"
            android:text="@string/askas6" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ButtonsBottomtLine"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/askas8"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="rollLogger"
            android:text="@string/askas8" />

        <Button
            android:id="@+id/askas10"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="rollLogger"
            android:text="@string/askas10" />

        <Button
            android:id="@+id/askas12"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="rollLogger"
            android:text="@string/askas12" />

        <Button
            android:id="@+id/askas20"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:onClick="rollLogger"
            android:text="@string/askas20" />
    </LinearLayout>

    <TextView
        android:id="@+id/leftpane"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_above="@+id/ButtonsTopLine"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:ems="10"
        android:gravity="center"
        android:text="@string/logger" />

    <TextView
        android:id="@+id/rightpane"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/ButtonsTopLine"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@+id/leftpane"
        android:freezesText="true"
        android:gravity="top"
        android:maxLines="50"
        android:scrollbars="vertical" />

</RelativeLayout>

**notice the build order which start from the bottom to the up,**  

by the way `xmlns:android="http://schemas.android.com/apk/res/android"`
not needed in every layout just once for the root layout 
```

# c++ - C++ 中的正确形式

> ID：12205028
> 
> 赞同：0
> 
> 时间：2012-08-30T20:34:05.547
> 
> 标签：c++, defensive-programming

> **可能重复：**
> [这些（bCondition == NULL）和（NULL==bCondition）有什么区别？](https://stackoverflow.com/questions/5854317/what-is-the-difference-between-these-bcondition-null-and-null-bcondition)

从[this question](https://stackoverflow.com/questions/12193170/defensive-programming-whats-the-purpose-of-using-for-a-single-line)它说“比较左侧的const对象”比其他方式“更好”。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:37:06.163

任何体面的编译器都会警告您有关条件表达式中的赋值，因此如今这种形式并不是很相关。

> 在另一点上“对> = 0的变量使用无符号//好技巧”我听说使用无符号可能会令人困惑，除非有原因，否则不应使用。有人同意或反驳这一点吗？

`unsigned`值应为 时使用`unsigned`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:36:51.527

这是为了避免“=”与“==”的错误。如果你的意思是“==”但输入“=”并且 LHS 上的对象是常量，编译器会抱怨。例如，

```
if ( 3 == x ) 
```

优先于

```
if ( x == 3 ) 
```

因为如果你输入

```
if ( 3 = x ) 
```

那么你会得到一个错误，但如果你输入

```
if ( x = 3 ) 
```

那么你可能会得到一个错误！

# c++ - 错误使用 std::future？

> ID：12205031
> 
> 赞同：3
> 
> 时间：2012-08-30T20:34:30.023
> 
> 标签：c++, c++11, valgrind, race-condition, future

我已经将我的一个错误归结为这个小片段，但我不明白为什么它不起作用。

```
#include <future>

int main()
{
    int ret = 0;

    std::future<int> parseSentence = std::async(std::launch::async, []() { return 3;} );
    ret = parseSentence.get();  

    return ret;
} 
```

代码有效，但 helgrind 发现发生了竞争情况。由于日志有点长，我把它放在一个单独的文件中，可以在[这里](http://bpaste.net/show/42898/)找到。

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:38:45.990

代码是正确的，因此如果存在竞争条件，则它在实现`future`或其同伴中。

# excel - VBA 代码不一致地使 Excel 崩溃（运行时错误 80010108）

> ID：12205033
> 
> 赞同：2
> 
> 时间：2012-08-30T20:34:32.090
> 
> 标签：excel, vba

我正在使用以下 VBA 代码自动将一张纸上的一行移动到另一张纸上。大约 1/3 的时间，它会给出“运行时错误 '-2147417848 (80010108)”，然后导致 Excel 崩溃。我找不到一个共同的原因。崩溃后，我可以在同一行上执行相同的代码，下次它可能会或可能不会正常工作。

谁能说出为什么下面的代码应该不稳定？

```
Sub Move_to_Sheet2 ()
'
' Move_to_Sheet2 Macro
'
' Keyboard Shortcut: Ctrl+r
'
    Rows(ActiveCell.Row).Select
    Selection.Copy
    Set Rng = Nothing
    Sheets("Sheet2").Select
    Rows("4:4").Select
    Selection.Insert Shift:=xlDown
    Sheets("Sheet1").Select
    Selection.Delete Shift:=xlUp
    ActiveWorkbook.save
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:39:50.267

您需要完全限定您的行。请参阅此示例。

```
Sub Move_to_Sheet2()
    Dim ws As Worksheet

    '~~> Change this to the relevant sheet name
    Set ws = Sheets("Sheet1")

    With ws
        .Rows(ActiveCell.Row).Copy
        Sheets("Sheet2").Rows("4:4").Insert Shift:=xlDown
        .Rows(ActiveCell.Row).Delete
    End With
    ActiveWorkbook.Save
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T19:05:42.217

```
Sub Test()

' Test Macro

    Range("A24:C30").Select
    Selection.Copy
    ActiveWindow.ScrollRow = 4
    ActiveWindow.ScrollRow = 5
    ActiveWindow.ScrollRow = 6
    ActiveWindow.ScrollRow = 7
    ActiveWindow.ScrollRow = 9
    ActiveWindow.ScrollRow = 10
    Range("A31").Select
    Selection.PasteSpecial Paste:=xlPasteValuesAndNumberFormats, Operation:= _
        xlNone, SkipBlanks:=False, Transpose:=False
    Application.CutCopyMode = False
    Selection.Copy

    Sheets("Save Sales").Select
    Range("B6").Select
    Selection.Insert Shift:=xlDown

    Sheets("Invoice").Select
    Application.CutCopyMode = False

    ActiveCell.FormulaR1C1 = ""
    Range("B9").Select
    MsgBox "Print Now"

End Sub 
```

# c - 显示突然行为的全局变量

> ID：12205035
> 
> 赞同：3
> 
> 时间：2012-08-30T20:34:43.667
> 
> 标签：c, recursion, global-variables

[这](http://ideone.com/iNlTe)是我的代码。

```
#include <stdio.h>
#define MAX(a,b) ((a)>(b)?(a):(b))
#define SZA(a) (sizeof(a)/sizeof(a[0]))

int anish=0; // global variable showing abrupt behaviour
int a[]={0,1,5,8,9,10,17,17,20,24,30};
int n= SZA(a);

int cache[100];
int road(int len)
{
    anish++;

    if(cache[len]!=-1)
        return cache[len];
    if(len<=0)
        return 0;
    int max=0;
    int i;
    for(i=1;(i<n && len>=i);i++)
    {
        max=MAX(max,a[i]+road(len-i));
    }
    return cache[len]=max;
}

void f()
{
    anish=13;
}

int main()
{
    int i;
    for(i=0;i<=13;i++)
        cache[i]=-1;
    int len=10;
    // f();

    printf("%d %d\n",road(len),anish);
    return 0;
} 
```

在这个，`road()`是一个递归函数，我想计算这个函数被执行的次数。所以，我通过一个全局变量来做到这一点`anish`。但是`anish`这个函数中的值没有改变`road()`，而函数中`f()`的值`anish`正在被修改。

这种荒谬的行为有什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:46:30.840

在

```
printf("%d %d\n",road(len),anish); 
```

未指定评估参数的顺序。在这种情况下，它似乎`anish`是在 之前评估`road(len)`的，因此传递给的值`printf`是未修改的值。

`road(len)`在调用之前进行评估`printf`并将结果存储在临时变量中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T20:42:11.113

您的 c 代码显示一个过时的`anish`变量连续 printf 显示不同的值

这与c的内部有关

它与此有关：[在 C 中调用函数之前的参数评估顺序](https://stackoverflow.com/questions/376278/parameter-evaluation-order-before-a-function-calling-in-c)

洛基阿斯塔里 说：

> 评估函数参数的顺序是未指定的行为。（这不会使您的程序崩溃、爆炸或订购披萨……不像未定义的行为。）
> 
> 唯一的要求是在调用函数之前必须对所有参数进行全面评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T20:46:23.053

试试这个：

```
int main()
{    int i;
    for(i=0;i<=13;i++)
      cache[i]=-1;
      int len=10;
     // f();

  printf("%d\n",road(len));
  printf("%d\n", anish);
  return 0;
} 
```

最有可能发生的事情是`printf()`使用返回`anish`前的值。`road(len)`

[有关详细信息，请参阅此。](http://www.eetimes.com/discussion/programming-pointers/4023961/Evaluating-Function-Arguments)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T20:45:50.747

If you do it like this, it'll work:

```
printf("%d ",road(len));
printf("%d\n",anish); 
```

may be its because of something inside the printf definition,

# c# - 在调用属性 DefaultPrintTicket() 之前，PrintQueue::GetPrintCapabilitiesAsXml() 不会初始化

> ID：12205036
> 
> 赞同：0
> 
> 时间：2012-08-30T20:34:44.417
> 
> 标签：c#, .net, printing, printqueue

这听起来像是某些打印机上的初始化问题。这是用例：

```
 // Get the default printer.
 PrintQueue printer = LocalPrintServer.GetDefaultPrintQueue();

 // Get the printer properties as XML from the system and populate the instance of PrinterProperties.
 Stream printerDocmentStream = printer.GetPrintCapabilitiesAsXml(); 
```

从检索到的 XML 文档中，XML 元素 PageMediaSize 不包含特定类别打印机支持的页面大小的完整列表。

但是，在调用 DefaultPrintTicket 后检索 XML 文档时，XML 元素 PageMediaSize 返回所有受支持的页面大小。代码如下：

```
 // This call initializes the printer properties.  <--------------------
 PrintTicket dummyPrintTicket = printer.DefaultPrintTicket; <-----------

 // Get the default printer.
 PrintQueue printer = LocalPrintServer.GetDefaultPrintQueue();

 // Get the printer properties as XML from the system and populate the instance of PrinterProperties.
 Stream printerDocmentStream = printer.GetPrintCapabilitiesAsXml(); 
```

我猜对 DefaultPrintTicket 的调用会初始化 PrintQueue 的实例，有一个初始化的方法，但它是受保护的。

这是错误吗？有没有人看到类似的行为？

PS：我使用的打印机是：HP Designjet T7100ps HPGL2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:11:43.317

这是确认的Bug。如果 GetPrintCapablitiesAsXml() 是 PrintQueue 实例调用的第一个方法，则返回的 XML 不会正确枚举打印机的所有属性。

# java - 无法使用 spring mvc 3 获得瓷砖

> ID：12205040
> 
> 赞同：1
> 
> 时间：2012-08-30T20:34:57.317
> 
> 标签：java, spring, spring-mvc, tiles

我有一个 Spring 项目，我可以使用 InternalResourceViewResolver 呈现普通视图。现在我正在尝试使用磁贴来模块化 UI。当我将浏览器指向**http://localhost:8080/myapp/tradeaggregation**时，我得到：

未找到带有 URI [/myapp/tradeaggregation] 的 HTTP 请求的映射。

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<annotation-driven />

<resources mapping="/resources/**" location="/resources/" />

<beans:bean name="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <beans:property name="viewClass"
        value="org.springframework.web.servlet.view.tiles2.TilesView" />
</beans:bean>

<beans:bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/views/tiles.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean>

<context:component-scan base-package="com.ks.kdweb.controllers" />

</beans:beans> 
```

瓷砖.xml

```
<!DOCTYPE tiles-definitions PUBLIC 
    "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN" 
    "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">

<tiles-definitions>
    <definition name="tradeaggregation" template="/WEB-INF/views/index.jsp">
        <put-attribute name="content" value="/WEB-INF/views/tradeAggregation.jsp"/>
    </definition>
</tiles-definitions> 
```

我的控制器：

```
@Controller
public class TradeAggregatorController {
    private static final String TITLE = "Trade Aggregation";
    private static final String[] columns = new String[] { "listvalues", "numtrades", "sizesum" };

    @Autowired
    private JdbcAggConfigDefDao aggConfigDefDao;

    @RequestMapping("/tradeaggregation")
    public String load(@RequestParam("configdefid") long configDefId, @RequestParam("aggid") String aggId, Model model) {
        List<AggConfigDef> configs = this.aggConfigDefDao.getAggConfigDefsByType(TradeAggregation.class.getName());
        model.addAttribute("aggConfigs", configs);
        model.addAttribute("title", TITLE);
        model.addAttribute("tradeAggs", this.aggConfigDefDao.getTradeAggregations(configDefId, aggId));
        model.addAttribute("columns", columns);
        return "tradeaggregation";
    }

    public void setAggConfigDefDao(JdbcAggConfigDefDao aggConfigDefDao) {
        this.aggConfigDefDao = aggConfigDefDao;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:47:54.800

在您的 web.xml 文件中尝试：

```
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

# json - Jquery Mobile 预加载页面

> ID：12205041
> 
> 赞同：1
> 
> 时间：2012-08-30T20:35:00.623
> 
> 标签：json, api, jquery-mobile

我在使用 jquery mobile 时遇到问题，当我加载页面时，它会从暴露的 JSon 格式的 API 中提取数据，对其进行解析，然后将数据插入 DOM 以显示页面，但发生的情况是页面显示，然后在解析数据时经过 2-4 秒，然后将数据插入到页面上，这在视觉上并不是很令人愉悦，只是想知道如何在 pageChange 动画触发之前预加载 DOM 并解析 JSON .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:59:27.240

在 JQuery Mobile 中处理动态生成的页面的正确方法是将页面检索绑定到文档的 beforepagechange 事件。检索页面后，您可以继续进行正确的更改页面。

例如，使用 getPageFromAPI 函数检索通过 URL“newPageURL”访问的页面的完整 Jquery 对象

```
$(document).bind( "pagebeforechange", function( e, data ) {
    if ( (typeof data.toPage === "string") && (data.toPage == "newPageURL")  ) {
        e.preventDefault();    //to make sure we prevent standard page change
        getPageFromAPI({success: function (newPage) {
                $.mobile.changePage(newPage)
            }
        });
    }
}); 
```

# java - 动态实例化 JMX MBean

> ID：12205042
> 
> 赞同：2
> 
> 时间：2012-08-30T20:35:01.917
> 
> 标签：java, spring, jmx

我有一个白标/多租户服务器，提供相同的服务，但为多个客户打上品牌。我想使用 JMX 来监控每​​个客户的状态（调用次数、错误次数等）。

我知道如何使用 Spring JMX 注释来连接我的 POJO（根据下面的代码）。我真正想要的是每个客户一个 MBean，但是因为客户是在服务器启动时动态加载的，所以我不知道如何使用注释来连接它。

这可能吗？如果没有，是否可以在启动时实例化我的 MBean？

```
@Component
@ManagedResource(objectName = "TravelAPI:name=Customer") 
public class CustomerStatus extends GeneralCustomerStatus {

    @ManagedAttribute
    String customerId;
    .
    .
    .

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T21:26:10.660

> 我真正想要的是每个客户一个 MBean，但是因为客户是在服务器启动时动态加载的，所以我不知道如何使用注释来连接它。

我们所做的是让实体实例化您的动态对象，通过`MBeanExporter`. 我们将`MBeanExporter`实例注入工厂实体，然后调用`MBeanExporter.registerManagedResource(...)`.

例如，我们执行以下操作：

```
...
mbeanExporter.registerManagedResource(beanInstance);
...

@Required
public void setMbeanExporter(MBeanExporter mbeanExporter) {
    this.mbeanExporter = mbeanExporter;
} 
```

我们还使用 a `NamingPolicy`，以便动态对象可以提供自己的名称以使它们独一无二。在此处查看更多详细信息：

> [动态更改@ManagedResource objectName](https://stackoverflow.com/questions/11506486/change-managedresource-objectname-dynamically/11506648#11506648)

顺便说一句，我的[SimpleJMX 包](http://256stuff.com/sources/simplejmx/)有一些代码可以帮助处理动态对象。

# ios - CoreData vs. SQLite vs. 自定义实体和 pLists

> ID：12205043
> 
> 赞同：0
> 
> 时间：2012-08-30T20:35:13.877
> 
> 标签：ios, sqlite, core-data

我有一个在 iOS 版本 5 中构建的应用程序。这个应用程序使用的是用 C# 构建的 WebAPI，它调用 SQL Server 存储过程。WebAPI 使用 RESTful 调用来填充我的 iOS 应用程序中的项目，这些项目在 JSON 格式的身份验证质询后返回到我的 iOS。所有这些都运作良好。作为最佳实践，我对使用数据并将数据返回数据库的最佳方法感兴趣。现在我有一些自定义类或实体来表示从我的服务返回的数据，例如，我根据某个类别或子类别提取所有产品数据并填充一个 Product 类型的数组。这个 Product 类与返回的数据的确切结构相匹配，即 ProductID、ProductDescription 等。我知道这可以与 SQLite 和 CoreData 重复。我想知道的是这个。使用CoreData有意义吗，

另外，这个问题的第二部分。对于很少更改的项目数组，将这些项目放在 pLists 中是否有意义？此类数据的一个示例可能类似于计量单位，其中夸脱、杯、加仑等将列在 UITableView 中供用户选择，但应用程序不太可能需要经常更新这些值（如果有的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:41:42.570

我会推荐[RestKit。](http://restkit.org)来自 RestKit 网站：

> RestKit 可以为您填充核心数据关联，允许基于自然属性遍历您的数据模型。它还在 Core Data 原语之上提供了一个很好的 API，可以简化配置和查询用例。

它似乎满足您的要求。

我不会选择 SQLite。这似乎更容易，但使用带有[Core Data](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreData_ObjC/_index.html#//apple_ref/doc/uid/TP40001181)的 RestKit会给你带来更多。

# javascript - javascript / jquery - 获取滚动条位置的回调

> ID：12205047
> 
> 赞同：0
> 
> 时间：2012-08-30T20:35:33.127
> 
> 标签：javascript, jquery, callback, scroll

我正在尝试使用 javascript 获取浏览器滚动条的垂直位置。我目前正在使用 jquery scroll() 函数，但我觉得回调有点慢，我想知道当用户在浏览器中滚动时是否有更快、更原生的方式来使用回调。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:15:18.520

这是要监听的浏览器 DOM 级别事件。我推荐使用 jQuery，因为它会使用相同的原生事件，并且可以消除有时可能出现的粗劣平台/跨浏览器问题。

```
window.addEventListener ("scroll", function(){console.log('scrolling');}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:53:35.560

如果您觉得回调运行时间过长，您可以限制它。只需跟踪上次调用它的时间：http: [//jsfiddle.net/fjjAw/](http://jsfiddle.net/fjjAw/)。

```
var lastCalled = 0;
$(window).on("scroll", function() {
  var now = Date.now();
  if(now - lastCalled > 1000) {  // only proceed if it has been one second since last call
    lastCalled = now;
    // do things
  }
}); 
```

# mysql - MySQL：查询数据库时出错 *AFTER* 将数据库复制并粘贴到 MySQL\Data 文件夹中

> ID：12205048
> 
> 赞同：0
> 
> 时间：2012-08-30T20:35:37.463
> 
> 标签：mysql, mysql-error-1064

我已经在本地安装了 apache、php 和 mysql server 5.5，并且现在愉快地运行了一段时间，能够查询数据库和所有内容。今天，我将示例数据库**复制并粘贴**到了 SQL Query 课程书的 Mysql\Data 文件夹中：John Viescas 的 SQL Queries for Mere Mortals。

**问题**

当我尝试查询数据库时，我收到一条错误消息，告诉我**数据库表**不存在，而它们实际上确实存在。

错误代码：1146。表 'bowlingleagueexample.bowler_scores' 不存在

**我试过的**

根据我的研究，它可能与权限有关？我不是数据库专家，但我正在努力学习。我用 MySQL Workbench 和 PHPMyAdmin 查看了数据库。工作台向我展示了表格，但查询执行出错了。PhpMyAdmin 甚至不会向我展示表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:24:45.900

您通常不能热交换数据库表。您需要使用正确的`mysqldump`恢复程序。如果你养成这样做的习惯，你可能会严重破坏你的 MySQL 安装，尤其是使用 InnoDB 表。

PhpMyAdmin 有一个加载和保存快照功能，可以帮助处理这类事情。给它一个有效的`.sql`文件，你应该没问题。

# ios - 更改 mkmapview（删除注释）

> ID：12205051
> 
> 赞同：1
> 
> 时间：2012-08-30T20:35:51.157
> 
> 标签：ios, mkmapview

我的应用程序发生了一个奇怪的崩溃首先，我让你看一下应用程序，有一个包含许多注释的地图，并且我将这些注释的标注自定义为包含按钮和许多信息的视图，它包含一个按钮，该按钮具有转到应用程序中另一个选项卡的操作，它被称为 DisclosureButton ![在哪里更新地图](../Images/7cea470713e3cf4ee5a7fc10aed528df.png)

![DisclosureButton 的操作](../Images/16b5c2b3a98aa88e5f5380221bfb3794.png)

我在项目中添加了一个断点异常，因此我得到了应用程序崩溃的位置，您可以在上面的第 173 行看到它正如您在上面的控制台中看到的那样，view.annotation 为空，因此注释在某些时候被删除了。检查线程 1（主线程，您可以在下面看到）执行的操作后，我看到在从地图中删除注释时，执行了显示按钮操作。为什么主线程停止执行 updateMap 方法并启动显示按钮的操作？这就是控制台首先显示的“在删除注释之前”然后是在disclosureButton 的操作中的日志而不记录“在创建注释之前”，这很奇怪，我不确定此时发生了什么？？？ ![mainThread 的 stackTrace](../Images/6be0e3d05df456e5534318c92ee20f9d.png)

我不确定发生了什么，任何建议/评论/帮助将不胜感激

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T22:04:10.513

iOS 6 喜欢爆破地图中的注释，谁知道为什么。我的解决方案是只保留所属类中的注释，并处理内存。它现在可以工作，但它不会让本机 mapKit 处理它......不确定是否有新的 WWDC 视频我应该观看或添加到 MKMap 编程文档中的页面，但现在这有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T12:01:31.350

我想我有同样的问题。我的后台线程正在添加/删除注释，但注释上的按钮将添加到主线程中。这也意味着主线程对注释进行枚举（出于某种原因）。我通过在主线程中添加来修复它。

问题仅存在于 iOS 6 上。

我不确定你的例外是什么，但我的例外是：

> ***集合 <__NSArrayM: 0x136d57c0> 在枚举时发生了变异。

```
0   CoreFoundation                      0x0330e02e __exceptionPreprocess + 206
1   libobjc.A.dylib                     0x02735e7e objc_exception_throw + 44
2   CoreFoundation                      0x03396cc5 __NSFastEnumerationMutationHandler + 165
3   MapKit                              0x0231748c -[MKAnnotationContainerView _updateAnnotationViewPerspective] + 399
4   MapKit                              0x02305520 -[MKMapView _updateScrollContainerView:] + 2478
5   MapKit                              0x02303e10 -[MKMapView _didChangeRegionMidstream:] + 97
6   MapKit                              0x02305d66 -[MKMapView _goToMapRegion:duration:animationType:] + 828
7   MapKit                              0x023061bd -[MKMapView _setZoomScale:centerMapPoint:duration:animationType:] + 711
8   MapKit                              0x02305a24 -[MKMapView _setZoomScale:centerCoordinate:duration:animationType:] + 121
9   MapKit                              0x02307f8f -[MKMapView _goToCenterCoordinate:zoomLevel:animationType:cancelDefaultLocationTimer:] + 950
10  MapKit                              0x023075fb -[MKMapView goToCenterCoordinate:zoomLevel:animationType:] + 81
11  MapKit                              0x023076c9 -[MKMapView goToCenterCoordinate:longLatSpan:animationType:] + 178
12  MapKit                              0x0230992a -[MKMapView goToDefaultLocation] + 415
13  Foundation                          0x009a0b90 __NSFireTimer + 97
14  CoreFoundation                      0x032cd376 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
15  CoreFoundation                      0x032cce06 __CFRunLoopDoTimer + 534
16  CoreFoundation                      0x032b4a82 __CFRunLoopRun + 1810
17  CoreFoundation                      0x032b3f44 CFRunLoopRunSpecific + 276
18  CoreFoundation                      0x032b3e1b CFRunLoopRunInMode + 123
19  GraphicsServices                    0x03c557e3 GSEventRunModal + 88
20  GraphicsServices                    0x03c55668 GSEventRun + 104
21  UIKit                               0x00d3465c UIApplicationMain + 1211
22  myApp                               0x00002c93 myApp + 7315
23  myApp                               0x00002bd5 myApp + 7125 
```

# c - 如何反转一个 int 但在 C 中按 2 位分组？

> ID：12205054
> 
> 赞同：4
> 
> 时间：2012-08-30T20:36:00.093
> 
> 标签：c, bit-manipulation

像这样：

```
input:  10010011
(10->01->00->11)

output: 11000110
(11->00->01->10)

input:  11010001
(11->01->00->01)

output: 01000111
(01->00->01->11) 
```

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T20:56:29.020

比[lserni](https://stackoverflow.com/users/1428679/lserni)的[算法](https://stackoverflow.com/a/12205195/1011995)更少的操作：

```
uint32_t reverseByTwo(uint32_t value) {
    value = ((value & 0x03030303) << 2) | ((value >> 2) & 0x03030303); // swap adjacent pairs
    value = ((value & 0x0F0F0F0F) << 4) | ((value >> 4) & 0x0F0F0F0F); // swap nibbles
    value = ((value & 0x00FF00FF) << 8) | ((value >> 8) & 0x00FF00FF); // swap bytes
    value = ((value & 0x0000FFFF) << 16) | ((value >> 16) & 0x0000FFFF);
    return value;
} 
```

对于 64 位值，只需为 32 位一半添加另一个交换，对于较小的类型，只需省略最后几个交换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T20:45:03.257

Weird request. I'd do it like this:

```
uint32_t reverseByTwo(uint32_t value)
{
    int i;
    uint32_t new_value = 0;
    for (i = 0; i < 16; i++)
    {
        new_value <<= 2;            
        new_value |= (value & 0x3);
        value >>= 2;
    }
    return new_value;
} 
```

At each iteration, the two LSB of value are placed in the two LSB of new_value, which is shifted to the left.

For an eight-bit value,

```
uint8_t reverseByTwo(uint8_t value)
{
    int i;
    uint32_t new_value = 0;
    for (i = 0; i < 4; i++)
    {
        new_value <<= 2;            
        new_value |= (value & 0x3);
        value >>= 2;
    }
    return new_value;
} 
```

if performances are at a premium, you can manually unroll the loop (GCC should do this by itself, but sometimes doesn't bother) and declare the function as `inline`.

```
 new_value = 0;
    // new_value <<= 2; // First time not necessary
    new_value |= (value & 0x3);
    value >>= 2;
    new_value <<= 2;            
    new_value |= (value & 0x3);
    value >>= 2;
    new_value <<= 2;            
    new_value |= (value & 0x3);
    value >>= 2;
    new_value <<= 2;            
    new_value |= (value & 0x3);
    // value >>= 2; 
    return new_value; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T21:22:41.533

将单个字节 (char) 中的位转换为另一个单个字节的最快方法是自己构建一个数组：

```
unsigned char rev[256];
rev[0]   = 0;     /* 00000000 -> 00000000 */
...
rev[147] = 198;   /* 10010011 -> 11000110 */
...
rev[198] = 147;   /* 11000110 -> 10010011 */
...
rev[255] = 255;   /* 11111111 -> 11111111 */ 
```

要将数字 x 转换为其位反转形式，只需编写`rev[x]`. 如果您有多个字节要转换，例如在 4-byte`int`中，只需查找`rev`表中的 4 个字节。

编写此代码时，您需要将二进制转换为另一个基数（这里，我使用十进制），因为 C 没有二进制常量（这将比八进制常量有用十倍）。

您也可以将值放入初始化程序，但您必须计算位置以确保所有内容都在正确的位置。（也许写一个小程序来做到这一点！）

```
unsigned char rev[256] = {0, ..., 198, ..., 147, ..., 255}; 
```

在正确的位置填写`...`所有其他数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T21:14:22.743

```
$x = (($x & 0x33333333) << 2) | (($x & 0xCCCCCCCC) >> 2);
$x = (($x & 0x0F0F0F0F) << 4) | (($x & 0xFOFOFOFO) >> 4);
$x = (($x & 0x00FF00FF) << 8) | (($x & 0xFF00FF00) >> 8);
$x = (($x & 0x0000FFFF) << 16) | (($x & 0xFFFF0000) >> 16); 
```

值得称赞的是，这个算法出自 Henry S. Warren, Jr. 的“Hacker's Delight”。唯一的区别是书中的算法没有成对反转；它只是颠倒了这些位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-30T20:54:36.387

```
#include <limits.h>

#define INT_BITS  (sizeof(int) * CHAR_BIT)

unsigned reverse_bits(unsigned x) {
#define PAIR(i)       ((((x) >> (i*2)) & 3) << (INT_BITS - (i+1)*2))
    unsigned result = 0;
    unsigned i;
    for(i = 0; i < INT_BITS/2; i++) {
        result |= PAIR(i);
    }
    return result;
} 
```

虽然这对于 unsigned int 可以做到这一点，但您可能希望将`int`and替换`unsigned`为`char`and `unsigned char`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T20:56:43.420

如果你想尽可能快：

```
output =
  ((input & 0xc0) >> 6) |
  ((input & 0x30) >> 2) |
  ((input & 0xc) << 2) |
  ((input & 0x3) << 6); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T10:48:50.573

你有位 (ab cd ef gh) 和想要 (gh ef cd ab)
如果你乘以 0x101 并存储在 16 位 int 中，你得到 (ab cd ef gh ab cd ef gh)。
然后，您将在该数字中的位模式分为两组，每组四位：

*   (00 00 **ef** 00 **ab** 00 00 00),
*   (00 00 00 **gh** 00 **cd** 00 00)

所以你只需要适当地转移和掩盖

```
unsigned char swap_bit_pairs(unsigned char b)
{
    unsigned int a = 0x101*b;
    return ((a >> 6) & 0x33) | ((a >> 2) & 0xCC);
} 
```

所以有可能在 6 次操作中

**编辑：**哎呀！我写的是 0x66 而不是 0xCC

# c - 零基索引

> ID：12205055
> 
> 赞同：0
> 
> 时间：2012-08-30T20:36:02.350
> 
> 标签：c, timer

有谁知道这意味着什么

> param[in] timer /*定时器从零开始的索引。*
> 
> param[in] delay_us /*延迟时间，以微秒为单位。*/
> 
> void Timer_Wait(const uint8_t timer, const uint32_t delay_us);

这是地址映射

> 定时器 0 0x80000000 定时器 1 0x80000100

我只想知道“基于零的计时器索引”是什么意思

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:56:50.297

从零开始的索引意味着数组的第一个元素是索引 0。到目前为止的例子：

整数[] = {1,2,3,4};

如果您想要数组中的第一个元素，您将使用 numbers[0] （即 1 ）。
但是，数组中包含 1 的元素的索引为 0 ( numbers[0] )。

所以基本上如果你想要数组中的第 n 个元素，你会使用 nth-1 是索引。
示例：
您要打印 3。它是第 3 个元素，但索引为 2。
printf("%d\n", numbers[ 3-1 ]);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:38:49.527

从零开始意味着如果您有三个计时器，它们的编号是 0,1,2，而不是 1,2,3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:38:53.350

表示第一个参数为定时器索引，第一个定时器的索引为0。

# c++builder - 如何在 JVCL Docking 组件中设置非活动（隐藏）停靠客户端选项卡的大小？

> ID：12205056
> 
> 赞同：0
> 
> 时间：2012-08-30T20:36:05.547
> 
> 标签：c++builder, docking, jvcl

我知道 JVCL 中唯一具有自动隐藏功能（固定停靠客户端）的停靠样式是 JvDockVSNetStyle。我正在使用它，但我无法设置非活动固定窗格选项卡的大小。隐藏时，选项卡不显示窗格的标题，仅显示活动窗格的名称。抱歉，我无法发布示例图片，因为这是我的第一个问题。

在对象检查器中有一个名为 ChannelOption 的选项，带有 ActivePaneSize 属性。有没有办法设置非活动窗格大小以便显示其名称？或者，也许我缺少另一种具有相同功能的码头风格？

我正在使用 C++Builder 和 JVCL 3.45。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:34:55.730

我通过注释掉这些代码部分来做到这一点：

```
procedure TJvDockVSChannel.GetBlockRect(Block: TJvDockVSBlock; Index: Integer;
  var ARect: TRect);
var
  BlockWidth: Integer;
begin
// HERE 

//  if Block.VSPane[Index] <> Block.ActivePane then
//    BlockWidth := Block.InactiveBlockWidth
//  else
    BlockWidth := Block.ActiveBlockWidth;

<snip>

procedure TJvDockVSChannel.Paint;
var
  I: Integer;

<snip>

  begin
    VisiblePaneCount := 0;
    for I := 0 to Block.VSPaneCount - 1 do
    begin
      if not Block.VSPane[I].FVisible then
        Continue;

      GetBlockRect(Block, I, DrawRect);
      Canvas.Brush.Color := TabColor;
      Canvas.FillRect(DrawRect);
      Canvas.Brush.Color := clGray;
      Canvas.FrameRect(DrawRect);

      AdjustImagePos;
      Block.FImageList.Draw(Canvas, DrawRect.Left, DrawRect.Top, I, dsTransparent, itImage);

// HERE 
//      if Block.ActivePane = Block.VSPane[I] then
      begin
        if Align in [alTop, alBottom] then
          Inc(DrawRect.Left, Block.InactiveBlockWidth)
        else
        if Align in [alLeft, alRight] then
        begin
          Inc(DrawRect.Top, Block.InactiveBlockWidth);
          if Align = alLeft then
            DrawRect.Left := 15
          else
            DrawRect.Left := 20;
          DrawRect.Right := DrawRect.Left + (DrawRect.Bottom - DrawRect.Top);
        end;
        Canvas.Brush.Color := TabColor;
        Canvas.Pen.Color := clBlack;

        Dec(DrawRect.Right, 3);

        OldGraphicsMode := SetGraphicsMode(Canvas.Handle, GM_ADVANCED);
        Canvas.Brush.Style := bsClear;
// HERE (changed options)
        DrawText(Canvas.Handle, PChar(Block.VSPane[I].FDockForm.Caption), -1, DrawRect, {DT_END_ELLIPSIS or} DT_NOCLIP); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:51:09.200

TJvDockServer 中有一个名为 DoFinishSetDockPanelSize 的事件。

在您为该事件创建的函数中，您可以使用 Dockpanel 访问表单的大小。可能有一种方法可以从这里设置选项卡的大小。

# groovy - 为了让 groovy 闭包修改委托范围内定义的变量，您是否需要显式指定 delegate.theVariableName？

> ID：12205058
> 
> 赞同：8
> 
> 时间：2012-08-30T20:36:15.337
> 
> 标签：groovy, closures, scope

我偶然发现了一些带有 Groovy 闭包和委托的东西，我不确定它们是否是该语言的官方部分，甚至可能是一个错误。

基本上，我定义了一个闭包，我从外部源作为字符串读入，并且类中定义闭包的变量之一需要由闭包修改。我写了一个简单的例子，展示了我发现什么是有效的，什么是无效的。

如果您查看下面的测试代码，您将看到一个定义变量的类

```
animal = "cat" 
```

以及从试图修改动物变量的字符串中动态定义的两个闭包。

这有效>

```
String code = "{ ->   delegate.animal = 'bear';   return name + 'xx' ; }" 
```

但这并不

```
String code = "{ ->   animal = 'bear';   return name + 'xx' ; }" 
```

似乎我需要用“委托”明确限定我的待修改变量。为此工作。（我想我也可以在封闭类中定义一个 setter 来调用闭包来修改值。）

所以....我已经找到了如何进行这项工作，但如果有人能指出我一些解释其背后规则的常规文档，我会很感兴趣。

具体....为什么会简单的赋值

```
animal = 'bear' 
```

影响原始变量？这里有影本吗？

```
import org.junit.Test

/*
 * Author: cbedford
 * Date: 8/30/12
 * Time: 1:16 PM
 */

class GroovyTest {
    String animal = "cat"
    String name = "fred"

    @Test
    public void testDelegateWithModificationOfDelegateVariable() {
    String code = "{ ->   delegate.animal = 'bear';   return name + 'xx' ; }"
    def shell = new GroovyShell()
    def closure = shell.evaluate(code)

    closure.delegate = this
    def result = closure()

    println "result is $result"
    println "animal is $animal"

    assert animal == 'bear'
    assert result == 'fredxx'
    }

    // This test will FAIL.
    @Test
    public void testDelegateWithFailedModificationOfDelegateVariable() {
    String code = "{ ->   animal = 'bear';   return name + 'xx' ; }"
    def shell = new GroovyShell()
    def closure = shell.evaluate(code)

    closure.delegate = this
    def result = closure()

    println "result is $result"
    println "animal is $animal"

    assert animal == 'bear'
    assert result == 'fredxx'
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T20:51:50.243

Groovy 闭包有[五种策略](http://groovy.codehaus.org/api/groovy/lang/Closure.html#setResolveStrategy%28int%29)来解析闭包内的符号：

*   `OWNER_FIRST`：首先检查所有者（定义闭包的地方），然后检查委托
*   `OWNER_ONLY`：检查所有者，仅在显式引用时检查委托
*   `DELEGATE_FIRST`：首先检查委托，然后检查所有者
*   `DELEGATE_ONLY`：首先检查委托，仅在明确引用时检查所有者
*   `TO_SELF`: 既不检查委托也不检查所有者

默认值为`OWNER_FIRST`. 由于闭包是动态定义的，因此您的所有者是一个本身具有特殊规则的脚本对象。用脚本编写`animal = 'bear'`实际上会创建一个名为`animal`并分配`'bear'`给它的新绑定。

您可以在不显式引用委托的情况下修复您的测试，只需在调用之前更改闭包上的解析策略：

```
closure.resolveStrategy = Closure.DELEGATE_FIRST 
```

这将避免奇怪的脚本绑定并按预期使用委托。

# php - 在 Restler iAuthenticate 实施中获取请求的服务

> ID：12205062
> 
> 赞同：1
> 
> 时间：2012-08-30T20:36:32.140
> 
> 标签：php, regex, url, restler

我正在使用 Restler 开发一个 REST api，我需要从 iAuthenticate 实现中获取请求的服务。

到目前为止，我已经设法到达这里：

```
$m = preg_match('/.+?\/(?P<api>.+?)\/(?P<service>\w+)/', $_SERVER['REQUEST_URI']); 
```

并`$_SERVER['REQUEST_URI']`具有这种形式：`/somedir/apiclass/requestedservice?...`

我在这里尝试了我的正则表达式：[http](http://www.spaweditor.com/scripts/regex/index.php) ://www.spaweditor.com/scripts/regex/index.php与我的实际uri，它完美地工作。当我尝试在我的 iAuthenticate 实现中解析请求 url 时，它不起作用。

有人知道如何在 restler iAuthenticate 实现中启用正则表达式吗？如何在 Restler 中显示错误而不是空白页？

谢谢！

[编辑]

我没有传递变量来存储匹配对象， `preg_match`而是接收第三个参数来存储它并只返回一个布尔值。结案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T16:10:51.850

我终于像这样解决了：

```
preg_match('/.+?\/(?P<api>.+?)\/(?P<service>\w+)/', $_SERVER['REQUEST_URI'], $mo);

$api = $mo['api'];
$service = $mo['service']; 
```

# c# - 获取只有文件扩展名的 Shell Icon

> ID：12205063
> 
> 赞同：1
> 
> 时间：2012-08-30T20:36:32.877
> 
> 标签：c#, .net, windows, windows-shell, shell-icons

我想获取文件类型的 Windows 系统图标，而不必提供现有文件路径（[SHGetFileInfo](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http://msdn.microsoft.com/en-us/library/windows/desktop/bb762179%28v=vs.85%29.aspx&ei=SM4_UObiH83oigKM9ICQDA&usg=AFQjCNGcorBOIKoRPzRO7DhlB_fYyrdItQ)需要）

这可能吗，还是我必须求助于创建临时文件或读取注册表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:48:39.987

是的，可以使用文件扩展名作为[SHGetFileInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762179%28v=vs.85%29.aspx)中的第一个参数。您还必须使用 SHGFI_USEFILEATTRIBUTES 标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:11:06.123

如果您对实现感兴趣，我在 2004 年有一篇关于此的博客文章，仍然可以在这里找到（关于第三个条目）[旧博客文章](http://web.archive.org/web/20081225164919/http://www.dotnetjunkies.com/WebLog/malio/default.aspx)

# php - 插入了额外行的 PHP 文件？

> ID：12205068
> 
> 赞同：0
> 
> 时间：2012-08-30T20:37:03.837
> 
> 标签：php, ftp, text-editor

我在 Windows 7 机器和 Notepad++ 上工作以完成多项任务。我注意到，当我在 Mac 上与尝试编辑文件的人一起工作，然后我稍后访问它时，总是有多余的行，有时缺少行，空白都是疯狂的。通常是额外的行。

有时，更少的行或代码只是折叠起来，就好像所有的空白都被删除了一样。

我敢肯定这不是恶作剧，因为这些年来已经发生过很多次了。我终于好奇地问是否有人知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-05T03:23:31.617

当您通过 FTP ASCII 将 Linux 中的文件下载到 Windows 时会发生这种情况，您可以使用 FileZilla 选择下载文件：

转账 -> 转账类型 -> 二进制

这样，EOL 的传输就很好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:47:22.247

可能发生的情况是 Mac 用户以稍微不同的方式对文件进行编码。Notepad++ 正在准备文件，但不希望必须处理 Mac 编码文件——因此它呈现奇怪。

例如，该软件可能会将制表符转换为空格。另一个例子是系统之间使用的特殊字符，例如：

```
\n = CR (Carriage Return) - used as a new line character in Unix
\r = LF (Line Feed) - used as a new line character in Mac OS
\n\r = CR + LF - used as a new line character in Windows 
```

这是我的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:42:40.427

这可能是由您在编辑器中选择的 EOL 或行尾字符引起的。我也在 Windows 7 机器上编码，但必须将我的文件推送到 UNIX，如果我查看文件，我会在 VI 中看到 ^M 或其他奇怪字符。如果我没记错的话，请转到 Edit -> EOL Conversion 并转换为 UNIX/MAC。只要确保始终将 EOL 设置为 UNIX，您就不会再看到问题了。

这是关于 SO 的类似主题的链接： [https ://stackoverflow.com/questions/2889163/eol-in-notepad-and-notepad](https://stackoverflow.com/questions/2889163/eol-in-notepad-and-notepad)

# facebook-graph-api - 阅读用户的帖子并且他们喜欢照片时，如何获取照片 URL？

> ID：12205070
> 
> 赞同：6
> 
> 时间：2012-08-30T20:37:07.240
> 
> 标签：facebook-graph-api, facebook-like, photo, posts

我正在使用 Graph API "/637674567/posts" 阅读我用户朋友的墙贴。其中一个数据项是他喜欢一张照片。有没有办法获取照片的 URL？当我获得有关该项目的信息时，我得到以下信息（下）。我已经验证 Darryl 允许应用查看他的照片和状态更新。我已经尝试获得适用于我的应用程序的所有权限。我想不通。有什么帮助吗？谢谢！

```
{
  "id": "637674567_10151119619094448",   
  "from": {    
    "name": "Darryl Green",     
    "id": "637674567"  
  },   
  "story": "Darryl Green likes a photo.",   
  "story_tags": {    
    "0": [      
      {        
        "id": 637674567,         
        "name": "Darryl Green",         
        "offset": 0,         
        "length": 19,         
        "type": "user"      
      }    
    ]  
  },   
  "type": "status",   
  "application": {    
    "name": "Likes",     
    "id": "2409997254"  
  },   
  "created_time": "2012-08-29T03:29:03+0000",   
  "updated_time": "2012-08-29T03:29:03+0000",   
  "comments": {    
    "count": 0  
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:44:52.063

您的朋友可能已启用应用程序来访问他的照片。但是还有另一个级别的隐私设置，即他的朋友（您）使用的应用程序可以从他的提要中访问哪些数据？
很有可能，如果这些设置不允许在您尝试通过您的应用访问他的照片时访问他们，您将无法这样做。
有关更详细的解释，请查看此回复 - [http://facebook.stackoverflow.com/a/12151338/1628782](http://facebook.stackoverflow.com/a/12151338/1628782)。

# macos - 渲染 silverlight 站点时 WebView 崩溃

> ID：12205081
> 
> 赞同：1
> 
> 时间：2012-08-30T20:37:41.463
> 
> 标签：macos, silverlight, mono

我需要从嵌入 MonoMac 应用程序的浏览器访问 silverlight 5 应用程序。对于浏览器，我正在使用 MonoMac.WebKit.WebView 例如，当尝试访问任何 silverlight 应用程序时

webView.MainFrame.LoadRequest(new NSUrlRequest(new NSUrl("http://samples.msdn.microsoft.com/Silverlight/SampleBrowser/")));

我收到以下错误[http://pastebin.com/s8PDfDyq](http://pastebin.com/s8PDfDyq)。我对 XCode 中的本机 WebView 进行了同样的尝试，它正确加载，所以我相信是影响它的单声道桥。

除了 WebView 之外，还有其他方法可以将浏览器嵌入到 Mono OSX 应用程序中吗？

谢谢，克劳迪奥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T19:40:18.813

经过大量的网络搜索和尝试不同的事情后，我能够在最新的 MonoDevelop 中运行。这里实际上有两个不同的问题。第一个在我的测试中影响 OSX 10.6 及更高版本（无法访问 10.5）。第二个影响 OSX 10.7 及更高版本。

1.  即使在 OSX 10.6 中，许多 silverlight 网站也会在 webView 中崩溃。您可以通过更改用户代理来修复崩溃

    ```
    webBrowser.CustomUserAgent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.13+ (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2"; 
    ```

    很难相信这能解决问题，但它确实做到了，即使没有这个的 useragent 字符串非常相似：

    ```
    Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/534.57.2 (KHTML, like Gecko) 
    ```

2.  即使使用此修复程序，OSX 10.7 或更高版本上的最新 MonoDevelop webView + Silverlight = 崩溃。为什么？在 10.7 及更高版本中，silverlight 插件似乎存在堆执行安全问题。MonoDevelop 2.8.8.4 没有在 unix 可执行文件上设置标志以防止堆执行，但最新的 MonoDevelop 确实如此。从 MonoDevelop 中，我不知道您是否可以将传递给 ld 的参数更改为执行 -allow_heap_execute。但是您可以使用十六进制编辑器在 appbundle 中的 unix 可执行文件中自己修改标志...

    我抓住了[HexFiend](http://ridiculousfish.com/hexfiend/)，然后把它放在我的应用程序文件夹中。显示输出应用程序包的内容（通过右键单击），然后深入 Contents/MacOS/ 。那里会有一个文件。在 HexFiend 中打开它。你会看到这样的字节：

    ```
    CEFAEDFE 07000000 03000000 02000000 13000000 3C080000 85002001 
    ```

    看到最后一张了吗？那是无堆执行标志。通过将 1 更改为 0 来关闭它。这让我的 webView 显示了带有 Silverlight 的页面，可以在 OSX 10.8 上顺利运行

    我最终编写了一个小的单控制台应用程序，我称之为后期构建步骤来为我执行此操作。它被调用为

    ```
    mono "<path-to-console-app-exe>" "<path-to-mac.app-package>" 
    ```

    这是主要功能：

    ```
    public static void Main (string[] args)
    {
        if (args.Length > 0)
        {
            if (Directory.Exists(args[0]))
            {
                string containingFolder = Path.Combine (Path.Combine(args[0], "Contents"), "MacOS");
                var files = Directory.GetFiles (containingFolder);
                if (files.Length == 1)
                {
                    var bytes = File.ReadAllBytes(files[0]);
                    byte one = (byte)1;
                    byte allButOne = (byte)~one;
                    bytes[27] = (byte)(bytes[27] & allButOne); 
                    File.WriteAllBytes(files[0], bytes);
                    return;
                }
            }
        }
        throw new InvalidOperationException("Failed to allow heap execution");
    } 
    ```

就其价值而言，Mac 上的 Silverlight 似乎是一个**非常**脆弱的提议。我真的没有一个短期的选择，你可能也没有，但弄清楚这一点让我浏览了各种搜索结果，这些结果显示人们对 Silverlight 和 OSX 的更新版本有各种问题。

以下是帮助我找到答案的链接：

[Firefox 与 silverlight 和相同的堆栈崩溃，在修复时考虑关闭堆保护的东西](https://bugzilla.mozilla.org/show_bug.cgi?id=753248)

[通过在允许堆执行的进程外运行 silverlight 插件解决了问题的链接 Firefox 崩溃](https://bugzilla.mozilla.org/show_bug.cgi?id=759364)

[标题中标志上的 Apple 资源](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/MachORuntime/Reference/reference.html)

[Chromium 错误实际上列出了堆执行的标志 - 不是在苹果的文档中 - 太棒了！](http://code.google.com/p/chromium/issues/detail?id=79642)

[在 Connect 上提交的关于通过更改用户代理字符串修复的崩溃的错误 1](http://connect.microsoft.com/VisualStudio/feedback/details/717806/silverlight-mac-plugin-version-5-0-61118-0-crashing)

[在 Connect 上提交的关于通过更改用户代理字符串修复的崩溃的错误 2](http://connect.microsoft.com/VisualStudio/feedback/details/719288/silverlight-crashes-on-load-in-webview-on-mac)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T21:36:58.237

为了帮助...我们现在遇到了完全相同的问题。

特别有趣的是，我们在旧版本的 MonoDevelop+MonoMac (2.8.8.4) 中使用了这个功能。我们最近升级到最新的 MonoDevelop 以纠正一些其他问题，现在看到了这个问题。

同样有趣的是，崩溃似乎只发生在 OSX 10.7 及更高版本上。我们的应用程序在 OSX 10.6 机器上运行良好......

在研究崩溃堆栈时，我遇到了一些引起我注意的有趣的事情，但到目前为止我对它们一无所知。一个是

[https://bugzilla.mozilla.org/show_bug.cgi?id=753248](https://bugzilla.mozilla.org/show_bug.cgi?id=753248)

Silverlight 在哪里使 Firefox 崩溃，但仅在 OSX 10.7 及更高版本上，具有非常相似的堆栈。

# c# - DataGridView 的过程数据

> ID：12205086
> 
> 赞同：0
> 
> 时间：2012-08-30T20:37:57.687
> 
> 标签：c#, winforms, oracle, stored-procedures, datagridview

我在 C# 中创建了一个 Windows 窗体应用程序，它将使用 Oracle 数据库中的一个过程。

在这种形式中`DataGridView`，我打算通过这个过程带来数据，但不知道我的代码中缺少什么，因为它没有给我带来任何数据。以下是两者的代码：

**甲骨文程序：**

```
PROCEDURE P_TRANSFITENS(vID in NUMBER) is
  cursor vAUX is
    select t.pro_in_codigo,
           t.alm_in_codigo,
           t.loc_in_codigo,
           u.loc_st_nome,
           t.nat_st_codigo,
           t.mvs_re_quantidade,
           t.mvs_st_loteforne
      from bd.est_movsumarizado t, bd.est_almoxlocal u
     where t.pro_in_codigo = vID
       and u.loc_in_codigo = t.loc_in_codigo;
  rDadosItem vAUX%ROWTYPE;  
begin
  open vAUX;
  loop
    fetch vAUX
      into rDadosItem;
    exit when vAUX%NOTFOUND;
  end loop;
  close vAUX;
end; 
```

**C#（按钮单击处理程序）：**

```
OracleDataAdapter adp = new OracleDataAdapter();
OracleConnection objConn = new OracleConnection();
objConn.ConnectionString = "Data Source=dtsource;User Id=user;Password=pass";
objConn.Open();
adp.SelectCommand = new OracleCommand();
adp.SelectCommand.Connection = objConn;

adp.SelectCommand.CommandText = "P_TRANSFITENS";
adp.SelectCommand.CommandType = System.Data.CommandType.StoredProcedure;
adp.SelectCommand.Parameters.Add("@vID", Convert.ToInt32(mskdId.Text)); 
DataTable dt = new DataTable();
adp.Fill(dt);
dtgrvDetalhesItem.DataSource = dt; 
```

非常感谢！

PS：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:18:30.593

我认为格式应该是

```
PROCEDURE P_TRANSFITENS(vID in NUMBER, _RESULTS OUT SYS_REFCURSOR)
IS

BEGIN

    OPEN _RESULTS FOR
       select t.pro_in_codigo,
       t.alm_in_codigo,
       t.loc_in_codigo,
       u.loc_st_nome,
       t.nat_st_codigo,
       t.mvs_re_quantidade,
       t.mvs_st_loteforne
  from bd.est_movsumarizado t, bd.est_almoxlocal u
 where t.pro_in_codigo = vID
   and u.loc_in_codigo = t.loc_in_codigo;

END P_TRANSFITENS; 
```

然后你添加这个

```
 cmd.CommandType = CommandType.StoredProcedure;
 OracleParameter refcursor = new OracleParameter("_RESULTS", OracleDbType.RefCursor);
 refcursor.Direction = ParameterDirection.Output;
 cmd.Parameters.Add(refcursor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:13:32.750

在我看来，您没有正确配置输入/输出参数。

尝试这样的事情：

```
OracleParameter param = cmd.Parameters.Add("vAUX", OracleDbType.RefCursor);
param.Direction = ParameterDirection.Output;
OracleParameter param2 = cmd.Parameters.Add("vID", OracleDbType.Int32);
param2.Direction = ParameterDirection.Input; 
```

我无法测试它，但也许，试一试。

# opengl - 为什么 glutFullScreen() 在 win7 Enterprise 上的子窗口崩溃？

> ID：12205090
> 
> 赞同：2
> 
> 时间：2012-08-30T20:38:07.077
> 
> 标签：opengl, windows-7, glut

相同的代码在 32 位 xp、64 位 win7Ultr（32 位应用程序）上运行良好。但是在amd机器上64位win7企业版就崩溃了。我追踪了它，发现：

```
 subWindow = glutCreateSubWindow(main_w, 0, 0, width, height);
glutDisplayFunc(displayf);
glClearColor(background[0], background[1],background[2], background[3]);
glutSetWindow(subWindow);

glutKeyboardFunc(keyboardf);
glutSpecialFunc(sqecial_keysf);
glutPositionWindow(0, 0);
glutReshapeWindow(width, height);
glDisable(GL_BLEND);

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
glLoadIdentity();
glPushMatrix();    

glColor3f(1.0,1.0,1.0); 
//glutFullScreen( );  ----- crash!!

glutSwapBuffers( ); 
```

知道为什么这个函数会崩溃吗？使用原始的 glut 库。

# oracle - 如何在 oracle 查询中在字符串的前两个字符处显示星号？

> ID：12205091
> 
> 赞同：0
> 
> 时间：2012-08-30T20:38:14.940
> 
> 标签：oracle

例如，如果 ID 是 1213，我想显示 **13。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:40:46.233

如果是数字

```
select '**' || substr(to_char(id),3)
  from my_table 
```

或者，如果它已经是一个角色

```
select '**' || substr(id,3)
  from my_table 
```

这`**`使用 Oracle 连接运算符连接到字符串的开头，`||`并删除 using 的前两个`id`字符[`substr`](http://www.techonthenet.com/oracle/functions/substr.php)。

这是一个 要演示的[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/c1f06/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:28:24.623

如果您不想过多牺牲性能，可以使用掩盖前两个字符 -

```
SQL> select regexp_replace('1213','(.)2','**') from dual; --if VARCHAR

MASKED
------------
**13

SQL> select regexp_replace(1213,'(.)2','**') from dual;  --if NUMBER

MASKED
------------
**13 
```

`REGEXP_REPLACE`将同样有效`NUMBER`，`VARCHAR`因此您可以节省一些转换时间。

连续地，您可以在函数操作上创建一个[基于函数的索引](http://www.dba-oracle.com/t_regular_expressions_tuning_index.htm)`regexp`来优化查询，例如（考虑到您总是希望只屏蔽 的前两个字符`ID`） -

```
CREATE INDEX
   mask_id
ON
   table_name
 (regexp_replace(id,'(.)2','**')); 
```

# objective-c - LLDB 相当于 GDB 的宏

> ID：12205094
> 
> 赞同：8
> 
> 时间：2012-08-30T20:38:37.033
> 
> 标签：objective-c, gdb, lldb

我定义了一个非常有用的宏`.gdbinit`

```
define rc
call (int)[$arg0 retainCount]
end 
```

**有没有为lldb**定义相同的宏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T21:25:26.913

您可以使用 lldb 中的以下命令定义来执行此操作：

```
command regex rc 's/(.+)/print (int)[%1 retainCount]/' 
```

例子：

```
(lldb) rc indexPath
print (int)[indexPath retainCount]
(int) $2 = 2 
```

您可以将其放入`~/.lldbinit`（并重新启动 Xcode）。

人们应该认为像

```
command alias rc print (int)[%1 retainCount] 
```

应该可以工作，但正如[我无法让这个简单的 LLDB 别名工作](https://stackoverflow.com/questions/7690181/i-cant-get-this-simple-lldb-alias-to-work/12195214#12195214)中所解释的那样， %1 扩展不适用于表达式，并且`command regex`是一种解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:31:42.107

顺便说一句，在函数参数通过寄存器（x86_64、armv7）传递的架构上，lldb 定义了一系列寄存器别名，这些别名映射到用于传递整数值的寄存器——arg1、arg2 等。例如，

```
#include <stdio.h>
int main ()
{
  char *mytext = "hello world\n";
  puts (mytext);
  return 0;
} 
```

我们可以很容易地看到传入 puts 的参数，而无需记住 ABI 约定，

```
 4      char *mytext = "hello world\n";
-> 5      puts (mytext);
   6      return 0;
   7    }
(lldb) p mytext
(char *) $0 = 0x0000000100000f54 "hello world\n"
(lldb) br se -n puts
Breakpoint created: 2: name = 'puts', locations = 1, resolved = 1
(lldb) c
Process 2325 resuming
Process 2325 stopped

libsystem_c.dylib`puts:
-> 0x7fff99ce1d9a:  pushq  %rbp
   0x7fff99ce1d9b:  movq   %rsp, %rbp
   0x7fff99ce1d9e:  pushq  %rbx
   0x7fff99ce1d9f:  subq   $56, %rsp

(lldb) p/x $arg1
(unsigned long) $2 = 0x0000000100000f54
(lldb) 
```

x86_64 和 armv7 都在寄存器中传递前“少数”整数值——除此之外，它们可以存储在堆栈或其他地方，并且这些别名不起作用。lldb 目前没有为浮点参数提供类似的便利别名。但对于最常见的情况，这涵盖了人们的需求。

# java - 如何从 Service/DAO 向 UI 传达“警告”消息？

> ID：12205095
> 
> 赞同：4
> 
> 时间：2012-08-30T20:38:38.973
> 
> 标签：java, model-view-controller, jsp, jakarta-ee

我有一个 Java Web 应用程序。基本上是这样的：

```
editUser.jsp -> ControllerServlet.java -> UpdateUserCommand.java -> UserService.java -> UserDAO.java -> USER_TABLE.db 
```

用户单击 editUser.jsp 页面上的“保存更改”按钮，成功后，视图将重定向到 viewUser.jsp 页面，在该页面中，用户会看到用户的只读视图和“用户更改已成功保存”消息被展示。

例如，UpdateUserCommand.java 会：

```
user.setWhatevers( /* whatevers */ );
try {
  user = this.userService.updateUser(user);
  messages.recordSuccessMessageForView("User changes successfully saved.");
} catch (Exception x) {
  messages.recordErrorMessageForView("There was an error; "+x.getMessage());
}
/* redirect to viewUser.jsp page */ 
```

我的问题是，在 UserService.java 中我调用了其他东西——比如说发送电子邮件的 NotificationService.java。如果发送电子邮件失败，我会记录电子邮件发送错误，但我会正常进行。

结果是，用户看到“成功保存！” 消息，但没有明显的迹象表明电子邮件未发送。（即使发送电子邮件错误记录在服务器上。）

例如，UserService.java 会：

```
public User updateUser(User user) throws Exception {
  try {

    this.userDAO.updateUser(user);

    try {
      this.notificationService.sendEmail("bob@bob.com", "user saved");
    } catch (Exception x) {
      logger.log("Error sending email; "+x.getMessage();
    }

  } catch (Exception x) {
    throw new Exception("Error saving!", x);
  }
} 
```

所以我的问题是，您如何建议我从 UserService 向 UpdateUserCommand 传达在 UI 中显示与电子邮件相关的警告消息？

UpdateUserCommand.java 可以轻松做到：

```
messages.recordWarning("Could not send the email."); 
```

但 UserService.java 无权访问“消息”对象。而且我不希望 UserService 抛出异常，因为我希望一切都像一切正常一样继续进行。

任何建议都非常感谢！

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:41:29.407

两种可能的解决方案：

1.  让您的 Service 方法返回某种类型，该类型既封装了`User`它当前响应的内容，也封装了表示通知类型消息的内容。这个解决方案比#2 更好，因为它更容易测试。

2.  让 noticiationService 或其他一些服务在 ThreadLocal 中记录它的“Web 用户消息”，然后您可以在 UI 层访问并清除它。这个选项有点难看，因为您基本上保留了全局数据（并且您假设一个线程 = 一个请求），但它不需要更改现有方法的签名。

# php - sql server 图像数据 - 使用 php 的 sqlsrv_query 的空值

> ID：12205096
> 
> 赞同：1
> 
> 时间：2012-08-30T20:38:44.183
> 
> 标签：php, image, sql-server-2008

我正在获取存储在数据库中的图像数据 - 类似于 0X92384902340923904823 ..... 使用 sqlsrv_query 从 php 进行调用。

尽管数据库中有这些图像的数据，但它总是返回 null。

```
$sql = "SELECT ProdImage FROM Product WHERE ProdId=".addslashes($prod_id)
                $params = array();
                $options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET );
                $result = sqlsrv_query( $conn, $sql , $params, $options );

                if($result != NULL && sqlsrv_num_rows($result) > 0)
                {
                    $obj = sqlsrv_fetch_object($result);
                    return ($obj->ProdImage);
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:52:05.583

[`sqlsrv_query()`](http://msdn.microsoft.com/en-us/library/cc296184%28v=sql.105%29.aspx)`?`支持带有占位符的预处理语句。您正在连接 in `$prod_id`，但您没有在单引号中正确引用它作为字符串 - 这是 SQL 中的语法错误。相反，请使用占位符`?`。

```
 $sql = "SELECT ProdImage FROM Product WHERE ProdId = ?";
 // pass $prod_id as a parameter.
 $params = array($prod_id);
 $options =  array( "Scrollable" => SQLSRV_CURSOR_KEYSET );
 $result = sqlsrv_query( $conn, $sql , $params, $options ); 
```

使用*不推荐*的普通查询方法，您需要`$prod_id`用单引号引用。`$prod_id`如果来自任何类型的用户输入，请不要这样做。

```
 $sql = "SELECT ProdImage FROM Product WHERE ProdId = '$prod_id'"; 
```

# java - 从组件树中读取复合组件的属性字面值

> ID：12205103
> 
> 赞同：1
> 
> 时间：2012-08-30T20:39:05.423
> 
> 标签：java, jsf-2

我有一个与此类似的复合标签：

```
<ui:decorate template="....">
   <ui:define name="...">
       <h:inputText value="#{value}"/>
   </ui:define>
</ui:decorate> 
```

它用于类似的页面

```
<ns:tag value="#{some.el.expression}"/> 
```

It works fine as it is. Now I want to access the "some.el.expression" from java code. I need something similiar to *component.getValueExpression("value")* . It doesn't seems to work, if I cann it on the inputText node it give me "#{value}" which is not what I want. I am couldn't figure a way to access this value. Any thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:45:58.147

You can use [`Application#evaluateExpressionGet()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html#evaluateExpressionGet%28javax.faces.context.FacesContext,%20java.lang.String,%20java.lang.Class%29) to evaluate an EL expression programmatically.

```
FacesContext context = FacesContext.getCurrentInstance();
Object value = context.getApplication().evaluateExpressionGet(
    context, "#{some.el.expression}", Object.class); 
```

Where `Object.class` can be substituted by the real return type. Note that whatever it returns is dependent on the exact moment when you're evaluating the expression. It might not be in the EL scope yet, or it might already have been removed from the EL scope.

# tsql - SQL Server 2012 中的联接表查询

> ID：12205105
> 
> 赞同：0
> 
> 时间：2012-08-30T20:39:09.853
> 
> 标签：tsql, sql-server-2012

我有两个如下表：

```
TableA --> categoryId(pk), categoryParentId, catName
TableB --> empId(pk), categoryId, empName, empDesignation 
```

![在此处输入图像描述](../Images/aa7511fc92c5d2f8b2aa6d264e08b831.png)

我想从其中of等于of中获取`catName`具有相应 categoryId 的所有内容。请帮忙。`TableA``categoryId=2``TableB``categoryParentId=2``TableA`

结果：

```
1002   SE
1003   MD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:54:24.060

我希望这个查询能满足您的需求

```
 SELECT TABLEA.CATNAME AS CATEGORY
    from TABLEB INNER JOIN TABLEA 
    ON TABLEA.CATEGORYPARENTID = TABLEB.CATEGORYID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:45:19.620

Something like this?

```
SELECT DISTINCT catName FROM TABLEA WHERE categoryParentId IN (SELECT DISTINCT categoryID from TABLEB); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:49:32.650

解决方案`INNER JOIN`：

```
select TableA.catName
from TableA
inner join TableB on TableA.categoryParentId = TableB.categoryId 
```

Using`INNER JOIN`是用于连接表的推荐方法（而不是`SELECT ... FROM TableA, TableB ...`）

看：

*   [INNER JOIN ON vs WHERE 子句](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)
    *（这个问题实际上是关于MySql，但答案说它与SQL Server 相同）*
*   [SQL Server 中 INNER 联接和笛卡尔联接的区别](https://stackoverflow.com/questions/12029947/difference-in-inner-join-and-cartesian-join-in-sql-server)

* * *

回答您的评论（我假设您想要`categoryId`from `TableA`）：

```
select TableA.catName, TableA.categoryId
from TableA
inner join TableB on TableA.categoryParentId = TableB.categoryId
where TableB.categoryId = 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T21:04:18.817

另一种方法...

```
SELECT 
  catname
from
  tablea a INNER JOIN
  tableb b ON 
    a.categoryParentID = b.categoryID
  group by
  catname 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-30T20:44:51.557

This should do the trick

```
SELECT tableA.catName
 FROM tableA, tableB
WHERE tableB.categoryId = table1.categoryParentId
  AND tableB.categoryId = 2; 
```

If you want the unique catNames, you can use

```
SELECT distinct tableA.catName
 FROM tableA, tableB
WHERE tableB.categoryId = table1.categoryParentId
  AND tableB.categoryId = 2; 
```

# ruby-on-rails - 如何更改文件夹网址？

> ID：12205106
> 
> 赞同：0
> 
> 时间：2012-08-30T20:39:11.343
> 
> 标签：ruby-on-rails, ruby, url, directory

我在 RoR 中有一个简单的问题，我找不到简单的解决方案

我有一个 www.example.com/items 文件夹，我想为每个网址将其重命名为 www.example.com/admin。

有没有办法在 routes.rb 中做到这一点？我试过这个

这是我在 routes.rb 上命名它的方式：

```
Portal::Application.routes.draw do
  resources :items do
    resources :requisitos
    resources :videos
  end 
```

但它没有用。

另外，我不能只重命名文件夹，因为有很多文件和链接依赖于它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:48:30.533

你设置`:path`参数：

```
match '/items' => 'items#index', :as => 'admin', :path => '/admin' 
```

请记住路线的优先顺序。上面的行很可能优先于第二行更改后的路径`/admin`

# export - 是否有用于从问题跟踪器导出问题的标准文件格式？

> ID：12205108
> 
> 赞同：13
> 
> 时间：2012-08-30T20:39:15.050
> 
> 标签：export, file-format, issue-tracking

*背景：
我为 Mercurial/Git 托管程序 Bitbucket 编写[了一个备份工具](http://christianspecht.de/bitbucket-backup/)，它要求输入用户名，通过 Bitbucket API 获取用户存储库的列表，并将每个存储库克隆到本地计算机。*

每个 Bitbucket 存储库都有一个问题跟踪器，现在我有一个新功能请求：[也备份问题](https://bitbucket.org/christianspecht/bitbucket-backup/issue/17/backup-of-issues)。

我实际上可以从 Bitbucket API 获取 JSON 格式的问题。
这是一个示例：[https ://api.bitbucket.org/1.0/repositories/christianspecht/bitbucket-backup/issues/](https://api.bitbucket.org/1.0/repositories/christianspecht/bitbucket-backup/issues/)

但是如何将其备份到本地计算机？
我可以将 JSON 保存在文本文件中，但我认为您无法对 JSON 格式的问题列表做任何有用的事情。
**是否存在诸如错误/问题的标准文件格式之类的东西？**

在一个完美的世界里，也许最广泛的问题跟踪系统能够导入任何东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-14T16:53:24.703

我怀疑答案是否定的，没有标准。以下是一些选项：

## 布吉拉：

Bugzilla 可以[导入/导出 CSV 和 XML](https://wiki.mozilla.org/Bugzilla:FAQ#Does_Bugzilla_allow_data_to_be_imported_and_exported.3F_.28Say.2C_from.2Fto_Word_or_Excel..29)：

这是这个搜索：[https](https://bugzilla.mozilla.org/buglist.cgi?quicksearch=css3+text) ://bugzilla.mozilla.org/buglist.cgi?quicksearch=css3+text导出到[CSV](https://gist.github.com/dflock/5577275)和[XML](https://gist.github.com/dflock/5577272)，这是这个错误：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=156881) ://bugzilla.mozilla.org/show_bug.cgi?id=156881导出为[XML](https://gist.github.com/dflock/5577266)。

## 吉拉：

[显然](http://www.atlassian.com/software/jira/features)， JIRA 可以从 Pivotal Tracker、Bugzilla、FogBugz、Mantis、Trac 等导入，并且可以导出为 XML 和 CSV。

这是这个错误：[https](https://jira.atlassian.com/browse/WBS-49) ://jira.atlassian.com/browse/WBS-49导出为[XML](https://gist.github.com/dflock/5577448)和此搜索：[https ://jira.atlassian.com/browse/GHS-5597?jql=text~%22greenhopper%20api %20plugin%22](https://jira.atlassian.com/browse/GHS-5597?jql=text~%22greenhopper%20api%20plugin%22)导出为[XML](https://gist.github.com/dflock/5577461) - 您也可以将这些导出为 .xls 文件。

## 围捕

roundup-admin CLI 有一个子命令导出，可用于创建一堆 .csv 文件以及包含消息和文件附件的子目录。请参阅[http://roundup.sourceforge.net/docs/admin_guide.html#migrating-backends](http://roundup.sourceforge.net/docs/admin_guide.html#migrating-backends)了解如何使用它来将问题数据迁移到另一个数据库。

## TRAC

Trac 可以导出为 CSV 和 TSV。这是这个搜索：[http://trac.edgewall.org/report/2](http://trac.edgewall.org/report/2)导出到[CSV](https://gist.github.com/dflock/5577487)和这个错误：[http://trac.edgewall.org/ticket/886](http://trac.edgewall.org/ticket/886)导出到[CSV](https://gist.github.com/dflock/5577493)和[TSV](https://gist.github.com/dflock/5577500)。

# jakarta-ee - Richfaces 中的水平 ScrollableDatatable

> ID：12205109
> 
> 赞同：0
> 
> 时间：2012-08-30T20:39:26.180
> 
> 标签：jakarta-ee, jsf-2, richfaces, scrollable

我每天至少发布一个问题。:) 我正在使用 JSF2.0 和 Richfaces 4.X。我有一个要在页面中显示的图像列表。我希望它们显示在只有 1 行图像的 ScrollableDataTable 中。这样图像就会像一个水平条。这是我的代码。

```
 <h:panelGrid>
                            <rich:scrollableDataTable width="100px" height="100px" frozenColCount="0" rows="1" value="#{startupBean.colorList}"  var="colorBO">
                                <rich:column width="100px">
                                    <f:facet name="header" >
                                      <h:outputText value="Colors"/>
                                    </f:facet>
                                    <a4j:commandLink id="color" actionListener="#{startupBean.getColor}"> 
                                         <h:graphicImage width="100px" height="100px" id="colors" alt="jsf-sun" url="#{colorBO.color_url}" value="#{colorBO.color_url}" binding="#{startupBean.graphicColor}" > 
                                        </h:graphicImage> 
                                    </a4j:commandLink>

                                </rich:column>
                        </rich:scrollableDataTable>
                    </h:panelGrid> 
```

我尝试过处理数据表和列属性，但没有成功。问题是，如果我在数据表中给出 rows=1，则只显示列表中的第一个图像。如果我不给 rows=1，那么整个列表将垂直显示。

谁能告诉我是否有解决方法？

谢谢，简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:00:24.133

我正在使用 dataGrid 而不是 ScrollableDataTable 来实现这一点。

谢谢，简

# c# - 在数据库表或内存中跟踪在线用户是个好主意吗？

> ID：12205112
> 
> 赞同：2
> 
> 时间：2012-08-30T20:39:31.983
> 
> 标签：c#, asp.net, signalr

我正在尝试决定是否要在数据库表中或仅在内存中跟踪我的在线用户。在内存中对我来说似乎更容易并且很有意义，因为如果重新启动服务器，每次系统启动时我都必须截断表。此外，我系统上的每个用户都可以添加联系人（其他用户），每次用户登录时，我都会获得他或她是朋友的用户列表，并向他们发送 signalR 消息，告知用户在线。因此，对于这样的事情，我觉得从内存中获取数据会快得多，但是当我决定向外扩展时会发生什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:46:44.520

> 对于这样的事情，我觉得从内存中获取数据会快得多

过早的优化是万恶之源，我鼓励您将信息保存在数据库中并根据需要检索它。然后，如果在线用户数量开始出现性能问题，您可以运行指标并进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:42:58.997

如果您需要在生产环境中添加更多服务器，则需要将 Session 保留在数据库中，因此您的在线用户列表将需要在数据库中，以便可以在所有服务器之间共享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:29:16.103

如果您开始向外扩展，则无论如何都需要在服务器之间共享此信息，因此我会从一开始就将其放入数据库中。[JabbR](http://jabbr.net)是 SignalR 的参考应用程序，它也这样做，所以它不会太糟糕。

# c++ - C++ 可以做类似 ML 案例表达式的事情吗？

> ID：12205115
> 
> 赞同：3
> 
> 时间：2012-08-30T20:39:39.107
> 
> 标签：c++, pattern-matching, switch-statement

所以，我在 C++ 中遇到过几次这样的事情，我真的很想写类似的东西

```
case (a,b,c,d) of
     (true, true, _, _ )     => expr
   | (false, true, _, false) => expr
   | ... 
```

但在 C++ 中，我总是会得到这样的结果：

```
bool c11 = color1.count(e.first)>0;
bool c21 = color2.count(e.first)>0;
bool c12 = color1.count(e.second)>0;
bool c22 = color2.count(e.second)>0;
// no vertex in this edge is colored
// requeue
if( !(c11||c21||c12||c22) )
{
    edges.push(e);
}
// endpoints already same color
// failure condition
else if( (c11&&c12)||(c21&&c22) )
{
    results.push_back("NOT BICOLORABLE.");
    return true;
}
// nothing to do: nodes are already
// colored and different from one another
else if( (c11&&c22)||(c21&&c12) )
{
}
// first is c1, second is not set
else if( c11 && !(c12||c22) )
{
    color2.insert( e.second );
}
// first is c2, second is not set
else if( c21 && !(c12||c22) )
{
    color1.insert( e.second );
}
// first is not set, second is c1
else if( !(c11||c21) && c12 )
{
    color2.insert( e.first );
}
// first is not set, second is c2
else if( !(c11||c21) && c22 )
{
    color1.insert( e.first );
}
else
{
    std::cout << "Something went wrong.\n";
} 
```

我想知道是否有任何方法可以清除所有这些 if 和 else 的情况，因为它似乎特别容易出错。如果在 case 表达式（或 C++ 中的语句）不是详尽无遗的情况下能够像 SML 那样让编译器抱怨，那就更好了。我意识到这个问题有点模糊。也许，总而言之，如何在 C++ 中简洁地表示具有任意数量变量的详尽真值表？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T23:46:01.660

我喜欢艾伦的解决方案，但我恭敬地不同意他的结论，即它太复杂了。如果您可以访问 C++11，它会为您提供几乎所有您需要的工具。你只需要写一个类和两个函数：

```
namespace always {

struct always_eq_t {
};

template <class lhs_t>
bool operator==(lhs_t const&, always_eq_t)
{
    return true;
}

template <class rhs_t>
bool operator==(always_eq_t, rhs_t const&)
{
    return true;
}

}  // always 
```

然后你可以用与 ML 比较相似的方式来编写你的函数：

```
#include <tuple>
#include <iostream>

void f(bool a, bool b, bool c, bool d)
{
    always::always_eq_t _;

    auto abcd = std::make_tuple(a, b, c, d);

    if (abcd        == std::make_tuple(true,  true, _, _)) {
        std::cout << "true, true, _, _\n";
    } else if (abcd == std::make_tuple(false, true, _, false)) {
        std::cout << "false, true, _, false\n";
    } else {
        std::cout << "else\n";
    }
}

int
main()
{
    f(true, true, true, true);
    f(false, true, true, false);

    return 0;
} 
```

在 C++ 中，您经常想考虑是否有一种我可以创建的合理类型来帮助我更轻松地编写代码？此外，我认为如果您有 ML 方面的背景，您将从检查 C++ 模板中受益匪浅。它们对于在 C++ 中应用函数式编程风格非常有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T20:53:06.957

C++ 传统上是面向个人的，无论语法如何，你都不能做类似以下的事情。

```
if ([a,b,c,d] == [true,true,false, false]) {} 
```

新 C++ 标准有一些东西可以让您定义内联常量数组，因此可以定义一个将数组作为构造函数并支持此类比较的类。就像是

```
auto x = multi_val({a,b,c,d});
if (x == multi_val({true, true, false, false}))
{ ... }
else if (x == multi_val(etc.)) 
```

但是现在要像使用 _ 那样进行部分匹配，这不是直接支持的，你必须让你的类更加复杂才能使用它，比如使用可能的模板类型并继续

```
multi_val(true, true, maybe<bool>(), maybe<bool>) 
```

这进入了相当令人兴奋的 C++ 领域，绝对不是我会为如此基本的东西做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T23:36:16.153

对于 C++11，假设您只想匹配固定数量的布尔值并且可以在没有 _ 模式匹配的情况下生存，然后 [1]（扩展到您需要的变量数量）。

我仍在研究另一种解决方案，使用模板来匹配任意类型，使用 lambda 或仿函数作为表达式。

-编辑-

正如所承诺的，[2] 任意类型的模式匹配，包括。未指定的值。

请注意几个警告：

1.  此代码仅适用于 4 个变量（实际上是我第一次涉足模板元编程）。这可以通过可变参数模板得到很大改善。
2.  它可以工作，但不是很整洁或井井有条。更多的是在引入生产代码之前需要清理的概念证明。
3.  我对匹配功能不满意。我希望使用初始化列表来传递要评估的表达式并在第一个匹配时停止（在当前实现中，每个匹配条件都将被执行） - 但是我无法快速想到如何传递不同类型的表达式匹配对象通过单个初始化器列表。

我想不出一种方法来验证真值表是否详尽。

干杯，

-缺口

[1]

```
constexpr int match(bool v, int c)
{
    return v ? (1 << c) : 0;
}
constexpr int match(bool a, bool b)
{
    return match(a, 0) | match(b, 1);
}

int main()
{
    int a = true;
    int b = false;

    switch(match(a, b))
    {
        case match(false, false):
            break;
        case match(false, true):
            break;
        case match(true, false):
            break;
        case match(true, true):
            break;
    }

} 
```

[2]

```
template<typename V1, typename V2, typename V3, typename V4>
class pattern_match_t
{
private:
    V1 value_0;
    V2 value_1;
    V3 value_2;
    V4 value_3;
public:
    typedef std::function<void(V1, V2, V3, V4)> expr_fn;

    template <typename C1, typename C2, typename C3, typename C4>
    pattern_match_t<V1, V2, V3, V4>& match(C1 a, C2 b, C3 c, C4 d, expr_fn fn)
    {
        if(value_0 == a && value_1 == b && value_2 == c && value_3 == d)
            fn(value_0, value_1, value_2, value_3);
        return *this;
    }

    pattern_match_t(V1 a, V2 b, V3 c, V4 d)
     : value_0(a), value_1(b), value_2(c), value_3(d)
    {
    }
};

template<typename T>
class unspecified
{};

template<typename T>
constexpr bool operator==(unspecified<T>, const T&)
{
    return true;
}

template<typename T>
constexpr bool operator==(const T&, unspecified<T>)
{
    return true;
}

template<typename V1, typename V2, typename V3, typename V4>
pattern_match_t<V1, V2, V3, V4> pattern_match(V1 a, V2 b, V3 c, V4 d)
{
    return pattern_match_t<V1, V2, V3, V4>(a, b, c, d);
}

int main()
{

    bool test_a = true;
    std::string test_b = "some value";
    bool test_c = false;
    bool test_d = true;

    pattern_match(test_a, test_b, test_c, test_d)
        .match(true, unspecified<std::string>(), false, true, [](bool, std::string, bool, bool)
        {
            return;
        })
        .match(true, "some value", false, true, [](bool, std::string, bool, bool)
        {
            return;
        });
} 
```

# asp.net-mvc-3 - 如何创建存储库（使用 EF）以便我可以从 MVC 项目中删除 EF 引用/DLL？

> ID：12205120
> 
> 赞同：0
> 
> 时间：2012-08-30T20:39:59.120
> 
> 标签：asp.net-mvc-3, entity-framework, repository

我想创建一个 DataAccess / DataLayer 项目并在那里封装 EF，这样我的 MVC 项目就不会知道我实际上在使用 EF。未来我可能会决定使用 NHibernate，Visual Studio 创建的开箱即用的 MVC 项目将 EF referece/DLL 添加到 web 项目中。我当然不能从 MVC 访问 DbContext，因为它需要 EF 引用。

结果，由于需要 EF，我将无法使用 Code First 数据注释。

是否值得创建一个存储库，或者我应该保持它“简单”并将 EF 引用添加到我的 MVC 项目？

对我来说，我需要将对 EF 的引用添加到我所有使用上下文/数据库的项目、测试和客户端中，这对我来说毫无意义。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:59:13.627

您要创建的是典型的图层模式。在顶部是表示层，在中间是业务层，在底部（或最后一层）是 DAL 层。

你如何设计你的层完全取决于意见和需要，但我上面描述的方式需要你有 3 个不同的项目。一个 MVC 项目、一个逻辑项目和一个 DAL 项目。DAL 项目将包含您的 EF 引用和您的存储库对象。然后由您将 DbContext/ObjectContext 项目转换为 POCO 以在业务层中使用它们。业务层将了解 EF（取决于您如何传递 EF 对象），但业务层随后会将其自己的对象（将它们从您的 DAL 层对象映射）传递给 MVC——从而将 EF 与 MVC 层完全解耦.

如果你打算使用这种类型的模式，你应该更进一步，将依赖注入与一个引导容器（使用 Unity 框架的横切项目，或类似的东西）结合起来。

请参阅 Microsoft 模式和实践， http: [//msdn.microsoft.com/en-us/library/ff650706](http://msdn.microsoft.com/en-us/library/ff650706)（第 25 章是分层的一个很好的例子）。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:48:13.020

我选择在几乎所有项目中实现存储库系统的确切目的是将我的 DAL 与任何一种 DataAccess 技术甚至特定数据库分离。

# matlab - 符号方程求解器，保存符号方程

> ID：12205122
> 
> 赞同：0
> 
> 时间：2012-08-30T20:40:02.170
> 
> 标签：matlab

> **可能重复：**
> [保存符号方程供以后使用？](https://stackoverflow.com/questions/12203456/saving-a-symbolic-equation-for-later-use)

从[这里开始](http://www.mathworks.com/help/releases/R2011a/toolbox/symbolic/brvfu8o-1.html#brvfxem-1)，我试图解决这样的符号方程组

```
syms x y z;
[x, y, z] = solve('z = 4*x', 'x = y', 'z = x^2 + y^2')
x =
0
2

y =
0
2

z =
0
8 
```

除了我的方程是在 m 文件中的不同点和随机系数生成的。我的问题是如何完成以下...

```
// Generate the first equation.
n = *random number generated here*;
E1 = (z == n*x + 2*n);   // <--- How to save this symbolic equation to use in "solve(...)" later?

// Other work, generate other eqs.
...

// Solve system of eqs.
[x, y, z] = solve( E1 , E2, E3)   // What/How to call/use the previously saved symbolic equations. 
```

谢谢您的帮助！

# c++ - 包装一个 Boost.Fusion 序列

> ID：12205124
> 
> 赞同：5
> 
> 时间：2012-08-30T20:40:04.397
> 
> 标签：c++, boost-fusion

我正在寻找一种方法来创建一个*Boost.Fusion*序列包装器，它本身就是一个*Fusion*序列，并将所有“调用”转发到它的包装序列。有点像

```
template< typename Sequence >
struct sequence_wrapper
{
    explicit sequence_wrapper( Sequence const& s ) : seq( s ){}

    Sequence seq;
}; 
```

where`sequence_wrapper< Sequence >`也是一个*Fusion*序列，并且可以正常工作`Sequence`。我需要这个的原因是我有几个在*Fusion*序列上运行的函数（其中所有元素都满足一些特殊要求），并且我想添加一些语法糖，我需要一个自定义类型来添加重载运算符。我也不需要对 sequence_wrapper 的操作结果来返回一个 sequence_wrapper，只有与语法糖相关的调用会返回一个（手动）包装的序列。例如，使用逗号运算符将元素附加到序列（有点像*Boost.Assign* for *Fusion*序列）：

```
template< typename Sequence, typename T >
sequence_wrapper<
    typename boost::fusion::result_of::push_back<
        Sequence const&
      , T
    >::type
> operator ,( Sequence const& seq, T const& v )
{
    return
        sequence_wrapper<
            typename boost::fusion::result_of::push_back<
                Sequence const&
              , T
            >::type
        >( boost::fusion::push_back( seq, v ) )
        ;
} 
```

实现这一目标的最佳方法是什么（如果图书馆确实支持它）？我特别想避免从头开始创建*Fusion*序列，因为我想使用*Fusion*操作返回的任何序列。继承+特化`tag_of`返回包装序列的标签是否有效？还是我需要定义自己的标签并实现所有必需的功能来转发呼叫？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T23:13:39.137

这就是我最终做的事情：

```
template<
    typename Derived
  , typename Sequence
  , typename TraversalTag = 
        typename boost::fusion::traits::category_of< Sequence >::type
  , typename IsView =
        typename boost::fusion::traits::is_view< Sequence >::type
>
class fusion_sequence_wrapper
  : public boost::fusion::sequence_facade< Derived, TraversalTag, IsView >
{
    typedef Sequence base_sequence_type;

public:
    explicit fusion_sequence_wrapper( base_sequence_type const& sequence )
      : _seq( sequence )
    {}

    base_sequence_type const& base() const
    {
        return _seq;
    }
    base_sequence_type& base()
    {
        return _seq;
    }

public:
    template< typename Seq >
    struct begin
    {
        typedef
            typename boost::fusion::result_of::begin<
                typename boost::mpl::if_<
                    boost::is_const< Seq >
                  , base_sequence_type const
                  , base_sequence_type
                >::type
            >::type type;

        static type call( Seq& s ){ return boost::fusion::begin( s._seq ); }
    };

    template< typename Seq >
    struct end
    {
        typedef
            typename boost::fusion::result_of::end<
                typename boost::mpl::if_<
                    boost::is_const< Seq >
                  , base_sequence_type const
                  , base_sequence_type
                >::type
            >::type type;

        static type call( Seq& s ){ return boost::fusion::end( s._seq ); }
    };

    template< typename Seq >
    struct size
    {
        typedef
            typename boost::fusion::result_of::size<
                typename boost::mpl::if_<
                    boost::is_const< Seq >
                  , base_sequence_type const
                  , base_sequence_type
                >::type
            >::type type;

        static type call( Seq& s ){ return boost::fusion::size( s._seq ); }
    };

    template< typename Seq >
    struct empty
    {
        typedef
            typename boost::fusion::result_of::empty<
                typename boost::mpl::if_<
                    boost::is_const< Seq >
                  , base_sequence_type const
                  , base_sequence_type
                >::type
            >::type type;

        static type call( Seq& s ){ return boost::fusion::empty( s._seq ); }
    };

    template< typename Seq, typename N >
    struct at
    {
        typedef
            typename boost::fusion::result_of::at<
                typename boost::mpl::if_<
                    boost::is_const< Seq >
                  , base_sequence_type const
                  , base_sequence_type
                >::type
              , N
            >::type type;

        static type call( Seq& s ){ return boost::fusion::at( s._seq ); }
    };

    template< typename Seq, typename N >
    struct value_at
    {
        typedef
            typename boost::fusion::result_of::value_at<
                typename boost::mpl::if_<
                    boost::is_const< Seq >
                  , base_sequence_type const
                  , base_sequence_type
                >::type
              , N
            >::type type;
    };

private:
    base_sequence_type _seq;
}; 
```

# c# - 时间：2019-01-10 标签：c#convert PDF to Tif

> ID：12205125
> 
> 赞同：0
> 
> 时间：2012-08-30T20:40:07.483
> 
> 标签：c#, ocr

我使用 ghostscript 将 PDF 转换为带有 C$ 类包装器的 Tif，然后使用 OCR tessnet2 读取图像文件的内容，但 tif 图像几乎不可读，图像非常褪色，看起来不正确，而且 OCR 引擎无法阅读任何内容。是否有任何开源或库可以花费我几美元来将 PDF 转换为高质量的 TIf？或任何读取 PDF 的开源 OCR 引擎，因为 tessnet2 无法读取 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:29:34.837

正如 DaNet 所说，我不确定是否有任何开源 DLL 或免费方法可以做到这一点。我们使用了一个名为leadtools 的第三方工具包，它在OCR PDF 文档时为我们提供了非常好的结果。您可以使用它对图像进行一些处理（即二值化，从图像中删除不需要的点，将其转换为 1 位黑白，将其保存为 TIF 图像等），然后将其传递给他们的 OCR引擎。我知道他们有一个在线演示，你可以试试。这是演示的链接：http: [//demo.leadtools.com/OnlineRecognitionDemo](http://demo.leadtools.com/OnlineRecognitionDemo)

如果结果符合您的要求，您可以查看本教程： [扫描到可搜索的 PDF](http://www.leadtools.com/help/leadtools/v175/dh/to/leadtools.topics.forms.ocr~fo.topics.ocrtutorialscanningtosearchablepdf.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:25:59.180

我不确定开源 OCR，但如果你使用 ghostscript 生成的 tiff 的分辨率输出，你应该没有问题。

尝试将 -r150 添加到 ghostscript 包装器的“字符串 args”中以更改分辨率，并希望得到一个合适大小的兆字节文件！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:05:45.303

我必须将 imageMagicNET 类输出格式的属性更改为 png16m 和 DPI，以便生成的图像质量高且对 OCR 引擎可读

# c#-4.0 - 遍历数据阅读器并根据唯一组合发送一次电子邮件

> ID：12205126
> 
> 赞同：0
> 
> 时间：2012-08-30T20:40:21.677
> 
> 标签：c#-4.0, iteration, unique, datareader

我有一个数据阅读器，它在通过 SP 填充的其他列中具有这样的列：

```
ColX    ColY   ColZ 
NYC     100    200
NYC     101    200
EWR     100    200
EWR     100    200 
```

我正在尝试迭代这个结果，并执行一个操作，比如为 ColX、ColY、ColZ 组合中的每个副本发送电子邮件；在上面的例子中 EWR-100-200

鉴于我无法控制在 C# 中返回此数据的 SP，实现此目的的有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:09:54.887

`Hashset<string>`为您发送电子邮件的项目创建一个保存密钥。您可以通过以下方式创建密钥：

```
string key = ColX.ToString() + ColY.ToString() + ColZ.ToString(); 
```

所以：

```
var keysUsed = new Hashset<string>();
while (reader.Read())
{
    // Assuming you got the values from the columns...
    string key = ColX.ToString() + ColY.ToString() + ColZ.ToString();
    if (keysUsed.Add(key))
    {
        // send email
    }
} 
```

这里的要点是，如果`keysUsed.Add`将`true`项目添加到`Hashset`. 如果密钥已经存在，该方法将返回`false`。

# clojure - 在 Clojure 中“使用”库的正确方法？

> ID：12205129
> 
> 赞同：2
> 
> 时间：2012-08-30T20:40:32.817
> 
> 标签：clojure

我正在研究“Clojure in Action”，并被指示在“源目录中名为 chapter08 的文件夹中”创建一个文件并尝试要求它。

我创建了以下文件（尝试了 - 和 _ 分隔）

```
~/clojure-1.4.0$ ls src/chapter08/
date-operations-spec.clj    date_operations.clj
date-operations.clj     date_operations_spec.clj 
```

我尝试使用书中的代码在 REPL 中要求，但一直失败：

```
~/clojure-1.4.0$ java -cp clojure-1.4.0.jar clojure.main
Clojure 1.4.0
user=> 
(ns chapter08.date-operations-spec
  (:use chapter08.date-operations)
  (:use clojure.test))
FileNotFoundException Could not locate chapter08/date_operations__init.class or chapter08/date_operations.clj on classpath:   clojure.lang.RT.load (RT.java:432) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T21:03:57.460

使用 leiningen，自从 Amit 出版了那本优秀的书以来，它已成为管理此类事情的无处不在的工具。我只是花了比设置 leiningen 所需的时间更长的时间来写这篇文章。

然后运行 ​​lein new chapter8。
将文件复制到chapter8/src/chapter8/
运行lein repl

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:00:41.437

使用普通的 java 启动 clojure 是一件令人头疼的事情。例如，您的`java -cp ...`调用不会将 ./src 放在 classpath 上。请只使用[leiningen](https://github.com/technomancy/leiningen)。

# sql - sql 一对多

> ID：12205130
> 
> 赞同：1
> 
> 时间：2012-08-30T20:40:37.280
> 
> 标签：sql, tsql

我只是想确保这是一对多的关系。

我有一个调查，其中有一个复选框列表，用户可以在复选框列表中选择多个问题。所以我设置了三个表

```
SurveyResults             SurveyProblems                 ProblemTypes                   
-------------             --------------                 -------------
SurveyResultID            SurveyProblemsID               ProblemTypeID
                          SurveyResultID                 ProblemName
                          ProblemTypeID 
```

如果调查可能有多种问题类型，这是创建数据库表的正确方法吗？这是一对多的关系，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:43:43.350

从技术上讲，这是一个*多对多的*关系，因为在这种结构下，一个`ProblemTypeID`可以与多个相关联，`SurveyResultID` *除非*您定义一个强制唯一性的键`SurveyProblems.ProblemTypeID`。

但就我对您的结构的理解而言，这将正常工作。

### 多对多示例：

在下面的示例中， 有两个可能的值`SurveyResultID`，并且`ProblemTypeID`1,3 都用在*了* `SurveyResultID`中，这使得它是多对多的。

```
SurveyProblemsID SurveyResultID ProblemTypeID
1                1              1
2                1              2
3                1              3
4                2              1
5                2              3 
```

请注意，代理键`SurveyProblemsID`并不是绝对必要的，考虑到您需要通过在它们之间`SurveyResultID, ProblemTypeID`定义复合主键来强制它们之间的唯一性。

```
PRIMARY KEY (SurveyResultID, ProblemTypeID) 
```

真正*的一对多*结构不需要中间表来将调查与问题联系起来。相反，它可以直接将外键链接到`SurveyResultID`表`ProblemType`中：

### 一对多结构：

```
SurveyResults           ProblemType
---------------------------------------------------
SurveyResultID          ProblemTypeID
                        ProblemName
                        SurveyResultID (foreign key) 
```

即使您确实缩进了*一对多*而不是您定义*的多对多*，如果您将来需要扩展为*多对多*，您当前的结构可能会更加灵活......甚至虽然查询是否有额外的连接有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:12:48.750

我认为你说得对，但为什么需要 SurveyProblemsID？使用 SurveyResultID 和 ProblemTypeID 作为复合主键，因此问题类型不能重复。

```
SurveyResults             SurveyProblems                 ProblemTypes                   
-------------             --------------                 -------------
SurveyResultID PK         SurveyResultID PK, FK          ProblemTypeID  PK
                          ProblemTypeID  PK, KK          ProblemName 
```

这实际上是多对多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:43:00.890

创建一个调查表，然后为问题创建一个查找表，并创建第三个表以将问题与调查表相关联。

# c++ - 通过增加 x 和 y 坐标来排序点

> ID：12205140
> 
> 赞同：-4
> 
> 时间：2012-08-30T20:40:59.083
> 
> 标签：c++, sorting

我很困惑通过增加 x 和 y 坐标来对点进行排序是什么意思？例如，如果我们有

```
struct point
{
int x,y;
} 
```

当然我们必须创建我们的排序功能

```
bool compare(const point &a,const point &b)
{

//here i think we have to use this comparison method
  if(a.x!=b.x)
 return (a.x>b.x);
else
 return (a.y>b.y);

} 
```

最后我们会有

```
vector<point>points;
sort(points.begin(),points.end(),compare); 
```

我对我的比较方法是否正确感兴趣，我的意思是通过增加 x 坐标和 y 坐标进行排序是我的比较方法的作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:44:11.913

C++ 标准库中的所有`sort`方法都假定您传递的比较方法`true`在左侧“小于”右侧时返回。因此，您的`compare`方法可能会与您希望它做的基本相反。

另外，请考虑`operator <`为您的结构编写一个方法——该方法可以有效地用作隐式比较函数，并且您`sort`只能使用两个参数进行调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:49:26.643

这意味着您使用 x 坐标订购点，如果 x 坐标相等，则使用 y 坐标。类似的东西（未测试）：

```
bool compare(const point &a,const point &b)
{
  if (a.x < b.x)
  {
    return true;
  }
  else if (a.x > b.x)
  {
    return false;
  }
  else if (a.y < b.y)
  {
    return true;
  }

  return false;
} 
```

# c++ - C ++中是否有浮点文字后缀来使数字双精度？

> ID：12205141
> 
> 赞同：17
> 
> 时间：2012-08-30T20:41:02.770
> 
> 标签：c++, gcc, precision, literals

我目前正在从事一个进行数值计算的 C++ 项目。绝大多数代码使用单精度浮点值，并且可以很好地使用它。因此，我使用编译器标志来使基本的浮点文字单精度而不是双精度，这是默认的。我发现这使表达式更易于阅读，而且我不必担心在某处忘记“f”。但是，我时不时需要双精度计算提供的额外精度，我的问题是如何将双精度文字放入这样的表达式中。到目前为止，我尝试过的每种方法都首先将值存储在单精度变量中，然后将截断的值转换为双精度值。不是我想要的。

下面给出了我迄今为止尝试过的一些方法。

```
#include <iostream>

int main()
{
  std::cout << sizeof(1.0E200) << std::endl;
  std::cout << 1.0E200 << std::endl;

  std::cout << sizeof(1.0E200L) << std::endl;
  std::cout << 1.0E200L << std::endl;

  std::cout << sizeof(double(1.0E200)) << std::endl;
  std::cout << double(1.0E200) << std::endl;

  std::cout << sizeof(static_cast<double>(1.0E200)) << std::endl;
  std::cout << static_cast<double>(1.0E200) << std::endl;

  return 0;
} 
```

使用单精度常量运行会产生以下结果。

```
~/path$ g++ test.cpp -fsingle-precision-constant && ./a.out
test.cpp:6:3: warning: floating constant exceeds range of ‘float’ [-Woverflow]
test.cpp:7:3: warning: floating constant exceeds range of ‘float’ [-Woverflow]
test.cpp:12:3: warning: floating constant exceeds range of ‘float’ [-Woverflow]
test.cpp:13:3: warning: floating constant exceeds range of ‘float’ [-Woverflow]
test.cpp:15:3: warning: floating constant exceeds range of ‘float’ [-Woverflow]
test.cpp:16:3: warning: floating constant exceeds range of ‘float’ [-Woverflow]
4
inf
16
1e+200
8
inf
8
inf 
```

据我了解，最后两种情况提供的 8 个字节应该足以容纳 1.0E200，这是由以下输出支持的理论，其中相同的程序在没有 -fsingle-precision-constant 的情况下编译。

```
~/path$ g++ test.cpp  && ./a.out
8
1e+200
16
1e+200
8
1e+200
8
1e+200 
```

上述示例建议的一种可能的解决方法是在我最初打算使用双精度的任何地方使用四精度浮点文字，并在库等需要时转换为双精度。但是，这感觉有点浪费。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-30T20:57:26.303

就像马克说的那样，标准说它是双精度的，除非它后面跟着一个 f。

标准背后有充分的理由，为了方便而使用编译器标志来绕过它是不好的做法。

因此，正确的方法是：

1.  删除编译器标志
2.  修复在浮点变量中存储双精度值时所有关于丢失精度的警告（添加所有 f 后缀）
3.  当你需要双精度时，省略 f 后缀。

它可能不是您要寻找的答案，但如果您关心代码库的寿命，那么它是您应该使用的方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-30T20:49:40.163

如果您阅读 2.13.3/1，您会看到：

> 除非由后缀明确指定，否则浮动文字的类型是 double。后缀 f 和 F 指定 float，后缀 l 和 L 指定 long double。

换句话说，`double`如果您将默认值更改为`float`. 不幸的是，在这种情况下你不能两全其美。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-30T21:07:16.093

如果您负担得起 GCC 4.7 或 Clang 3.1，请使用用户定义的文字：

```
double operator "" _d(long double v) { return v; } 
```

用法：

```
std::cout << sizeof(1.0E200_d) << std::endl;
std::cout << 1.0E200_d << std::endl; 
```

结果：

```
8
1e+200 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-30T21:06:51.817

你不能定义你自己的后缀，但也许像一个宏

```
#define D(x) (double(x##L)) 
```

会为你工作。编译器应该只发出一个双常量，并`-O2`在我的系统上显示为 with。

# mysql - REPLACE INTO，它会重新使用主键吗？

> ID：12205158
> 
> 赞同：15
> 
> 时间：2012-08-30T20:42:17.083
> 
> 标签：mysql, sql, duplicates, sql-insert, sql-delete

MySQL 中的`REPLACE INTO`函数以删除和插入行的方式工作。在我的表中，主键 ( `id`) 是自动递增的，所以我期待它删除然后`id`在数据库尾部插入一个表。

但是，它会出乎意料并以相同的方式插入它`id`！这是预期的行为，还是我在这里遗漏了什么？`id`（调用`REPLACE INTO`语句时我没有设置）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T20:55:13.673

如果您的表中有另一个索引，则这是一种预期的行为，`UNIQUE`否则它会按照您的预期添加该行。请参阅文档：

> REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。请参见第 13.2.5 节，“INSERT 语法”。

[https://dev.mysql.com/doc/refman/5.5/en/replace.html](https://dev.mysql.com/doc/refman/5.5/en/replace.html)

这也很有意义，因为 mySQL 将如何找到要替换的行？它只能扫描整个表，这将非常耗时。我创建了一个 SQL Fiddle 来演示这一点，请看[这里](http://sqlfiddle.com/#!2/8fb74/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T20:48:38.660

这是预期的行为。从技术上讲，如果要替换/插入的数据上的所有唯一键（不仅仅是主键）与现有行匹配，MySQL 实际上会删除现有行并使用替换数据插入新行，使用相同的值对于所有唯一键。因此，如果您查看此类查询中受影响的行数，每次替换将获得 2 个受影响的行，而对于直接插入，您将获得 2 个受影响的行。

# java - Android NFC 未在点击时打开正确的类

> ID：12205161
> 
> 赞同：0
> 
> 时间：2012-08-30T20:42:26.327
> 
> 标签：java, android, nfc, rfid, ndef

我有一个包含 2 个类的应用程序，`CardActivity`当 NFC 标签轻按/刷卡时，我需要我的应用程序打开第二个类。该应用程序可以正常打开，但`MainActivity`正在运行，而不是`CardActivity`.

我会冒险猜测这是我的清单的问题，但它看起来是正确的。这是无论如何：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.spotsofmagic.spotsofmagic"
    android:versionCode="1"
    android:versionName="1.0" android:installLocation="auto">

    <uses-sdk android:minSdkVersion="14" android:targetSdkVersion="14" />

    <uses-permission android:name="android.permission.NFC" />
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    <uses-feature android:name="android.hardware.nfc" android:required="true" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

         <activity
            android:name=".CardActivity"
            android:label="@string/app_name" >

            <!-- Handle a collectable card NDEF record -->
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
                <data android:mimeType="application/vnd.spotsofmagic.spotsofmagic"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
         </activity>

    </application>

</manifest> 
```

我确信标签本身是正确的，因为我已经在另一个应用程序中打开它来查看它的内容。

下面是两个类。

卡片活动：

```
package com.spotsofmagic.spotsofmagic;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.util.Log;
import android.bluetooth.*;

public class CardActivity extends Activity implements OnClickListener {

    private static final String TAG = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.card_activity);

        // see if app was started from a tag and show game console
        Intent intent = getIntent();

        Log.e(TAG, "Hello world.  Intent Type: "+ intent.getType());

        if(intent.getType() != null && intent.getType().equals(MimeType.NFC_DEMO)) {
            Parcelable[] rawMsgs = getIntent().getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
            NdefMessage msg = (NdefMessage) rawMsgs[0];
            NdefRecord cardRecord = msg.getRecords()[0];
            String payload = new String(cardRecord.getPayload());
            turnBluetoothOn(payload);
        }
    }

    private void turnBluetoothOn(String payload) {

        final AlertDialog.Builder builder=new AlertDialog.Builder(this);
        builder.setTitle("Alert Dialog");
        builder.setMessage(payload);
        builder.setIcon(android.R.drawable.ic_dialog_alert);

        BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (mBluetoothAdapter == null) {
            // Device does not support Bluetooth
        }
        if (!mBluetoothAdapter.isEnabled()) {
            Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBtIntent, 1);
        }
        android.os.Process.killProcess(android.os.Process.myPid());

    }

    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

    }
} 
```

主要活动：

```
package com.spotsofmagic.spotsofmagic;

import android.app.Activity;
import android.app.AlertDialog;
import android.bluetooth.BluetoothAdapter;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.util.Log;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {
    private static final String TAG = "Activity...";
    private NfcAdapter mAdapter;
    private TextView mTextView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_activity);

        // grab our NFC Adapter
        mAdapter = NfcAdapter.getDefaultAdapter(this);

        // TextView that we'll use to output messages to screen
        mTextView = (TextView)findViewById(R.id.text_view);

        displayMessage("Loading payload...");

    }

    private void displayMessage(String message) {
        mTextView.setText(message);
    }

    public void onClick(DialogInterface arg0, int arg1) {
        // TODO Auto-generated method stub

    }
} 
```

这是我用来编写标签的代码。顺便说一句，这是在另一个应用程序上完成的：

```
NdefRecord appRecord = NdefRecord.createApplicationRecord("com.spotsofmagic.spotsofmagic");

        // record that contains our custom "retro console" game data, using custom MIME_TYPE
        byte[] payload = getPayload().getBytes();
        byte[] mimeBytes = MimeType.NFC_DEMO.getBytes(Charset.forName("US-ASCII"));
        NdefRecord cardRecord = new NdefRecord(NdefRecord.TNF_MIME_MEDIA, mimeBytes, 
                                                new byte[0], payload);
        NdefMessage message = new NdefMessage(new NdefRecord[] { cardRecord, appRecord});

// Some code here removed for readability

 Ndef ndef = Ndef.get(tag);
    if (ndef != null) {
        ndef.connect();
        ndef.writeNdefMessage(message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:59:57.980

标签上的 NDEF 消息是否包含[Android 应用程序记录](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#aar)？这可以解释 MainActivity 是如何启动的。但是，只有当 AAR 是标签上 NDEF 消息的第一条记录或者第一条记录与意图过滤器不匹配时，才会出现这种情况。

# c# - 代码首次尝试创建数据库时出现异常

> ID：12205165
> 
> 赞同：24
> 
> 时间：2012-08-30T20:42:48.747
> 
> 标签：c#, asp.net-mvc, entity-framework, entity-framework-4, ef-code-first

我创建了一个新的 ASP.NET MVC 4 应用程序，并希望它首先使用代码。但是，如果它不存在，它似乎最初不会创建数据库文件。如果我从 App_Data 文件夹中删除 .mdf 文件，那么当应用程序尝试访问数据库时会出现以下异常：

```
System.Data.SqlClient.SqlException: Cannot attach the file '<path-to-db-file>.mdf' as database '<my-db-file-name>'. 
```

如果我在调试器的应用程序中运行它，那么我可以看到在调用 LazyInitializer.EnsureInitialized 时在 InitializeSimpleMembershipAttribute::OnActionExecuting 方法中发生了异常。捕获的异常是：

```
[System.Reflection.TargetInvocationException]   {"Exception has been thrown by the target of an invocation."}   System.Reflection.TargetInvocationException 
```

除了内部例外：

```
[System.InvalidOperationException]  {"The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588"} System.InvalidOperationException 
```

然后有我上面提到的第一个例外作为内部例外。

任何想法我做错了什么？

**更新**

我刚刚尝试了一个全新的 MVC4 应用程序。我可以通过执行以下操作来复制它：

1.  在 VS 向导中创建 MVC 应用程序。
2.  第一次运行应用程序并转到登录页面（注意现在生成了 mdf 文件）。
3.  删除 mdf 文件，返回登录页面。现在抛出异常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-14T13:02:17.393

遇到同样的问题，在[这里](http://www.dotnetexamples.com/2013/05/cannot-attach-mdf-file-as-database.html)找到了我的解决方案。您所要做的就是通过打开 VS 开发人员命令提示符并输入（不带引号）来停止 LocalDb：

“sqllocaldb.exe 停止 v11.0”

“sqllocaldb.exe 删除 v11.0”

下次 EF 将重新生成文件以及数据库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-25T14:55:35.900

如果您深入研究应用程序的 InitializeSimpleMembershipAttribute 类，您将看到它继承自 ActionFilterAttribute 类的以下重写方法：

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Ensure ASP.NET Simple Membership is initialized only once per app start
        LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
    } 
```

注意那条评论。应用程序每次运行都会检查一次，以确保简单成员资格已正确初始化。查看类顶部的私有变量：

```
 private static SimpleMembershipInitializer _initializer;
    private static object _initializerLock = new object();
    private static bool _isInitialized; 
```

它们都是静态的，并且都作为 refs 传递。对于您的情况，重要的是`_isInitialized`。LazyInitializer.EnsureInitialized 所做的是检查`_isInitialized`标志，如果它为假，它会初始化它传递的 ref 目标，在这种情况下`_initializer`是 type `SimpleMembershipInitializer`。此时，它将标志设置为 true 并继续前进。如果`LazyInitializer.EnsureInitialized`看到标志为真，它只返回目标。由于该标志是一个静态变量，因此它在应用程序的整个生命周期内保持其值，这意味着在第一次初始化之后，EnsureInitialized 将始终简单地返回目标，即使数据库文件不再存在。换句话说，如果您在初始化后删除 .mdf 文件，应用程序将不知道，并且当应用程序尝试从数据库读取或写入时将引发异常。为了解决这个问题，您必须重新启动应用程序，这意味着如果您正在使用开发服务器，则终止开发服务器或在 IIS 中重新启动应用程序。

这就是您面临的问题，但我怀疑许多遇到此问题的人都遇到类似但不同的问题，他们在尝试登录时收到与此类似的错误消息：

> CREATE FILE 在尝试打开或创建物理文件“C:\path\to\your\project\App_Data\dbfile.mdf”时遇到操作系统错误 5（拒绝访问。）。创建数据库失败。无法创建列出的某些文件名。检查相关错误。

这很容易解决，我也会在这里快速介绍。

默认情况下，Visual Studio 2012 使用称为 LocalDB 的简化版 SQL Server Express。LocalDB 将启动应用程序的子进程，如果您在 Visual Studio 的开发服务器上运行您的应用程序（例如 http://localhost:[port] 显示在您的浏览器中），那么您正在运行这两个应用程序和 LocalDB 在您的用户帐户下，而不是在 SYSTEM 或 NETWORKSERVICE 下。解决此问题所需要做的就是为您的用户分配项目的 App_Data 文件夹的修改权限。再次尝试登录，应该会成功创建 .mdf 文件。

如果您好奇，可以[在此处了解有关 LocalDB 的更多信息。](http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T16:48:10.743

您可以在项目根文件夹中 Global.asax 文件的 Application_Start 方法中处理 Code First 数据库初始化，如下所示：

```
 protected void Application_Start()
    {
        Database.SetInitializer<MyDBContext>(null);
    } 
```

如果您将 null 传递给 SetInitializer，它不会创建或更改您的数据库表，您应该手动进行。

没有重新生成数据库的原因是 Application_Start 在应用程序生命周期内只被触发一次。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-17T13:52:40.807

MVC 生成的代码使用名为“DefaultConnection”的数据库连接字符串。如果您在 Web.config 中使用了不同的名称，则需要在以下位置引用该名称：

1.  InitializeSimpleMembershipAttribute.cs 中的 InitializeSimpleMembershipAttribute.SimpleMembershipInitializer.ctor()。
2.  AccountModel.cs 中的 UsersContext.ctor()

（或者只是在您的项目中搜索“DefaultConnection”）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T03:45:35.637

永远不要在资源管理器中删除自动创建的 .mdf 文件，只能通过 SQL 管理工具或在对象资源管理器中删除。

您遇到的问题（并且可以在您提供的步骤中复制）是数据库仍在 LocalDb 中注册。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T14:43:34.183

您必须停止 IISExpress 实例并再次重新启动它（通过在 Visual Studio 中按 F5）。然后您将能够再次创建数据库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-08T06:30:22.847

当我收到此错误时，为我解决的问题是我更改了我的 VS 项目的 App.config 文件中的连接字符串。

我在连接字符串中添加了这个：

```
 <connectionStrings>
<add name="Blog" connectionString="Data Source=(LocalDb)\MSSQLLocalDB;Integrated Security=true;AttachDbFileName=C:\Users\kostadin\Database1.mdf" providerName="System.Data.SqlClient" /> 
```

希望这对其他人有帮助。

# javascript - 语法错误：Web 控制台中的“意外令牌 <”

> ID：12205171
> 
> 赞同：1
> 
> 时间：2012-08-30T20:43:34.637
> 
> 标签：javascript, web, syntax-error

为什么我在 Web 控制台中收到此错误？它只是说“第 1 行，第 1 列”带有该错误。当我单击链接时，我被带到了我的主页的来源，它告诉我它没想到`<`在文档类型中！

（对于 SEO：左尖括号，小于号）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-14T06:39:17.093

# TL;博士

检查 file.js 的错误路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:43:34.637

在我的例子中，我使用了一个 javascript 库并加载了一个主题文件作为配置的一部分。我拼错了文件的路径，这就是造成这一切的原因。为什么它没有给我一个更好的错误信息？因为我的网站设置为**将所有 404 重定向到主页**。所以它试图将我的主页 HTML 解释为 js 主题文件。

如果您遇到这样的奇怪错误，那么您很可能只是打错了字。

如果您将 404 重定向到主页，那么在开发过程中禁用它可能是个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T11:08:33.270

我不知道这是否可以帮助任何人，因为这是一个旧帖子。如果您使用像 Sub Lime 这样的任何文本编辑器，则很有可能使用从智能感知中选择的标签，并且您第一次输入的开始标签“<”仍然存在。检查是否可以找到任何内容。在这种情况下，请查看您的 DOCTYPE 标签在 HTML 的开头

# ios - 在 UITableViewCell 内不断更新 UISlider

> ID：12205175
> 
> 赞同：3
> 
> 时间：2012-08-30T20:43:44.263
> 
> 标签：ios, uitableview, uislider

我希望将 UISlider 用作“音频 VU Meter”类型指示器，其中音轨的级别不断更新 UISlider 的值。我的应用程序中的每个轨道当前都位于一个 UITableViewCell 中，VU Meter 是单元格内容视图中的一个子视图。一次显示多达 12 首曲目。

VU 表的更新是通过 TCP/IP 端口进行的，所以一旦我收到新的 VU 电平并设置推子值 ( `mySlider.value = newValue`)。但是，我可以让滑块立即更新的唯一方法是调用`performSelectorOnMainThread:@selector(reloadData) withObject:myTableView waitUntilDone:NO`. 似乎我不应该重新加载整个表的数据。

代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    TrackTableCell *cell = (TrackTableCell *)[tableView dequeueReusableCellWithIdentifier:@"TrackTableCell"];

    if(cell == nil)
    {
        [[NSBundle mainBundle] loadNibNamed:@"TrackTableCell" owner:self options:nil];
        cell = [self trackTableCell];

        /**************************/
        /********* FADER  *********/
        /**************************/
        VolumeSlider *fader = [[VolumeSlider alloc] initWithFrame:CGRectMake(0, 0, 265, 30)];
        [fader setRotatedThumbImage:[UIImage imageNamed:@"FaderCap.png"]];
        [fader setRotatedMinTrackImage:[UIImage imageNamed:@"VolumeSlider.png"]];
        [fader setRotatedMaxTrackImage:[UIImage imageNamed:@"VolumeSlider.png"]];

        [fader addTarget:self action:@selector(volumeFaderSliderAction:) forControlEvents:UIControlEventValueChanged];

        fader.value = 0;

        // rotate the slider
        fader.transform = CGAffineTransformMakeRotation(-M_PI_2);
        [cell.contentView addSubview:fader];

        fader.bounds = CGRectMake(0, 0, 265, 30);
        fader.center = CGPointMake(70, 515);

        // property of the cell
        cell.volumeSlider = fader;
    }

    // set the slider to 0
    cell.volumeSlider.value = [[self.tracks objectAtIndex:indexPath.row] volume];

    return cell;
} 
```

`[[tracks objectAtIndex:trackNumber] volume]`通过数据模型 ( ) 已更新的通知调用以下方法。

```
- (void) updateVolumeFader:(NSNotification *)note
{
    NSDictionary *extraInfo = [note userInfo];
    int trackNumber = [[extraInfo objectForKey:@"trackNumber"] intValue];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:trackNumber inSection:0];

    TrackTableCell *cell = (TrackTableCell *)[self.tracksTableView cellForRowAtIndexPath:indexPath];

    cell.volumeSlider.value = [[tracks objectAtIndex:trackNumber] volume]; 
} 
```

在查看代码时，我的猜测是我获取单元格指针的方式。我猜打电话`cellForRowAtIndexPath`不是最好的方法。此外，我现在才意识到调用本身应该将推子更新为数组`cellForRowAtIndexPath`中的新值。`tracks`

正如所建议的那样，最好保留我所有轨道滑块（或我所有单元格，就此而言）的缓存数组。虽然这肯定不是最有效的代码，但我仍然不明白为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:58:52.520

如果您的通知未通过主线程传递，则更新滑块的代码将不起作用。您的通知方法中的代码在其他方面很好；只需将它放在一个块中并在主线程上执行，或者在您注册通知时在主线程（操作队列）上注册。

# html - 在 XML 文件中传输 HTML 片段

> ID：12205179
> 
> 赞同：1
> 
> 时间：2012-08-30T20:43:58.983
> 
> 标签：html, xml, plist, data-transfer

我想在 plist 文件中传输 HTML 片段。例如，我想包括：

```
<a href="http://www.something.com?a=1&b=2">My Link</a> 
```

在我的 iOS 应用程序从远程服务器下载的 plist 文件中。**如何在 XML 格式的文件（如从远程服务器下载的 plist）中包含 HTML 片段**？

# ruby - 在 Ruby 中实现二叉树

> ID：12205180
> 
> 赞同：6
> 
> 时间：2012-08-30T20:44:05.067
> 
> 标签：ruby, binary-tree, stack-overflow

我一直在尝试在 Ruby 中实现 BinaryTree 类，但我得到了`stack level too deep`错误，尽管我似乎没有在那段特定的代码中使用任何递归：

```
1\.  class BinaryTree
2\.    include Enumerable
3\.      
4\.      attr_accessor :value
5\.      
6\.      def initialize( value = nil )
7\.          @value = value
8\.          @left = BinaryTree.new  # stack level too deep here
9\.          @right = BinaryTree.new # and here
10\.     end
11\.     
12\.     def empty?
13\.         ( self.value == nil ) ? true : false
14\.     end
15\.         
16\.         def <<( value )
17\.           return self.value = value if self.empty?
18\. 
19\.           test = self.value <=> value
20\.           case test
21\.             when -1, 0 
22\.                 self.right << value
23\.             when 1 
24\.                 self.left << value
25\.           end
26\.         end     # <<
27\.     
28\.  end 
```

编辑：我的问题有点偏离轨道。当前的代码设置`stack level too deep`在第 8 行给了我错误。但是，如果我采用 Ed S. 的解决方案

```
@left = @right = nil 
```

然后该`<<`方法抱怨说：`undefined method '<<' for nil:NilClass (NoMethodError)`在第22行。

谁能建议如何解决这个问题？我的想法是，如果我能以某种方式告诉`BinaryTree`类变量`left`和`right`是`BinaryTree`（即它们的类型是`BinaryTree`）的实例，那一切都会好起来的。我错了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-30T20:46:38.067

> 虽然我似乎没有在那段特定的代码中使用任何递归：

然而...

```
def initialize( value = nil )
    @value = value
    @left = BinaryTree.new  # this calls initialize again
    @right = BinaryTree.new # and so does this, but you never get there
end 
```

那就是无限递归。你打电话`initilize`，后者又打电话`new`，而后者又打电话`initialize`……然后我们就走了。

您需要在其中添加一个守卫来检测您已经初始化了主节点并且现在正在初始化叶子，在这种情况下，`@left`应该`@right`设置为`nil`.

```
def initialize( value=nil, is_sub_node=false )
    @value = value
    @left = is_sub_node ? nil : BinaryTree.new(nil, true)
    @right = is_sub_node ? nil : BinaryTree.new(nil, true)
end 
```

* * *

不过老实说......你为什么不从零开始左右初始化呢？他们还没有价值，那么你得到了什么？它在语义上更有意义；您创建一个包含一个元素的新列表，即左侧和右侧的元素尚不存在。我只会使用：

```
def initialize(value=nil)
    @value = value
    @left = @right = nil
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T23:19:44.393

```
1\.  class BinaryTree
2\.    include Enumerable
3\.      
4\.      attr_accessor :value
5\.      
6\.      def initialize( value = nil )
7\.          @value = value
8\.      end 
9\.      
10\.     def each # visit
11\.         return if self.nil?
12\.         
13\.         yield self.value
14\.         self.left.each( &block ) if self.left
15\.         self.right.each( &block ) if self.right     
16\.     end
17\. 
18\.     def empty?
19\.         # code here
20\.     end
21\.         
22\.     def <<( value ) # insert
23\.         return self.value = value if self.value == nil
24\. 
25\.         test = self.value <=> value
26\.         case test
27\.             when -1, 0
28\.                 @right = BinaryTree.new if self.value == nil
29\.                 self.right << value
30\.             when 1 
31\.                 @left = BinaryTree.new if self.value == nil
32\.                 self.left << value
33\.         end
34\.     end     # <<
35\.  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-24T22:53:38.147

您可能需要修复代码中的无限递归。这是一个二叉树的工作示例。您需要有一个基本条件才能在某处终止递归，否则它将是无限深度的堆栈。

自引用数据结构示例 - 二叉树

```
class TreeNode
  attr_accessor :value, :left, :right

  # The Tree node contains a value, and a pointer to two children - left and right 
  # Values lesser than this node will be inserted on its left
  # Values greater than it will be inserted on its right
  def initialize val, left, right
    @value = val
    @left = left
    @right = right
  end
end

class BinarySearchTree

  # Initialize the Root Node
  def initialize val
    puts "Initializing with: " + val.to_s
    @root = TreeNode.new(val, nil, nil)
  end

  # Pre-Order Traversal
  def preOrderTraversal(node = @root)
    return if (node == nil)
    preOrderTraversal(node.left)
    preOrderTraversal(node.right)
    puts node.value.to_s
  end

  # Post-Order Traversal
  def postOrderTraversal(node = @root)
    return if (node == nil)
    puts node.value.to_s
    postOrderTraversal(node.left)
    postOrderTraversal(node.right)
  end

  # In-Order Traversal : Displays the final output in sorted order
  # Display smaller children first (by going left)
  # Then display the value in the current node 
  # Then display the larger children on the right
  def inOrderTraversal(node = @root)
    return if (node == nil)
    inOrderTraversal(node.left)
    puts node.value.to_s
    inOrderTraversal(node.right)
  end

  # Inserting a value
  # When value > current node, go towards the right
  # when value < current node, go towards the left
  # when you hit a nil node, it means, the new node should be created there
  # Duplicate values are not inserted in the tree
  def insert(value)
    puts "Inserting :" + value.to_s
    current_node = @root
    while nil != current_node
      if (value < current_node.value) && (current_node.left == nil)
        current_node.left = TreeNode.new(value, nil, nil)
      elsif (value > current_node.value) && (current_node.right == nil)
        current_node.right = TreeNode.new(value, nil, nil)
      elsif (value < current_node.value)
        current_node = current_node.left
      elsif (value > current_node.value)
        current_node = current_node.right
      else
        return
      end
    end
  end
end

bst = BinarySearchTree.new(10)
bst.insert(11)
bst.insert(9)
bst.insert(5)
bst.insert(7)
bst.insert(18)
bst.insert(17)
# Demonstrating Different Kinds of Traversals
puts "In-Order Traversal:"
bst.inOrderTraversal
puts "Pre-Order Traversal:"
bst.preOrderTraversal
puts "Post-Order Traversal:"
bst.postOrderTraversal

=begin

   Output :
     Initializing with: 10
   Inserting :11
   Inserting :9
   Inserting :5
   Inserting :7
   Inserting :18
   Inserting :17
   In-Order Traversal:
     5
   7
   9
   10
   11
   17
   18
   Pre-Order Traversal:
     7
   5
   9
   17
   18
   11
   10
   Post-Order Traversal:
     10
   9
   5
   7
   11
   18
   17

   =end 
```

参考：[http ://www.thelearningpoint.net/computer-science/basic-data-structures-in-ruby---binary-search-tre](http://www.thelearningpoint.net/computer-science/basic-data-structures-in-ruby---binary-search-tre)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-04T19:22:34.620

@pranshantb1984 - 你给的 ref 很好，但我认为代码有一个小的变化。需要更新 PreOrder 和 PostOrder 代码，如下所示

```
# Post-Order Traversal
def postOrderTraversal(node= @root)
    return if (node == nil)
    postOrderTraversal(node.left)
    postOrderTraversal(node.right)
    puts node.value.to_s
end 

# Pre-Order Traversal
def preOrderTraversal(node = @root)
    return if (node == nil)
    puts node.value.to_s
    preOrderTraversal(node.left)
    preOrderTraversal(node.right)
end 
```

**预购遍历**

10 -> 9 -> 5 -> 7 -> 11 -> 18 -> 17

**后序遍历**

7 -> 5 -> 9 -> 17 -> 18 -> 11 -> 10

# iphone - Possible to measure distance with an iPhone and laser pointer?

> ID：12205182
> 
> 赞同：1
> 
> 时间：2012-08-30T20:44:13.350
> 
> 标签：iphone, distance

I want to make this phone app that can measure distance. I want to know how far away something is from the phone. So let's say I want to know how far away a wall is...I'd like my phone to tell me.

So how might this work? Well, I can shine an ordinary red laser pointer against the wall (in the dark) and have the phone's camera "see" the dot.

The further away the phone is from the dot, the smaller the dot will be. The picture below shows the dot from 1 foot, 5 feet, 10 feet, 20 feet, and 25 feet away. I think the app could then measure the size of the dot and figure out how far away the dot actually is from the phone. And then it could use a simple ratio or formula to determine distance for other sizes.

So my question is: **Would this likely work for measuring distance?**

![enter image description here](../Images/0626959224406bb845551d3b40ad748d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:36:19.423

只要你能清楚地识别激光点我会说：是的。我在进行识别时看到了问题。距离测量只是一些数学和物理的东西（我不确定要使用什么，但我认为可能有一些有用的光学东西......截距定理？）或者你可以通过测试创建一个“算法”（然后是准确性可能是个问题；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T04:59:56.027

所以，我认为双激光笔的理念优于单激光笔的理念。

但是，由于摄像头离墙壁越来越远，我相信倾斜激光指示器是一个不可行的解决方案。

相反，我认为让激光指示器保持平行是解决方案。这样，你走得越远，光束在照片中看起来越来越近，但它们之间的距离仍然相同。然后你可以很容易地想出一些公式来根据照片中点的距离来测量距离。

# curl - Why is etag "null" from the returned File object when uploading a file?

> ID：12205183
> 
> 赞同：1
> 
> 时间：2012-08-30T20:44:18.577
> 
> 标签：curl, etag, box-api

When I upload a file, I would like to have the etag so I can delete it afterwards. With the current API, the etag always returns null when uploading the file. Is there a way that I can get the etag without making 2 API calls: uploading the file -> get information about the file?

Even the documentation example returns null for the etag: [http://developers.box.com/docs/#files-upload-a-file](http://developers.box.com/docs/#files-upload-a-file)

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T22:50:22.710

作为性能优化，Etag 计算与上传响应分开。在计算之前（通常在上传后的 100 毫秒内），我们将其保留为空。

如前所述，您可以在上传完成后不久在 /files/ 端点上调用 GET，并且 eTag 值将在那里。

我们确实计划将 eTag 计算与上传并行移动，并将其包含在对 POST /files/data 调用的响应中，但我们只会在性能是我们认为合理的情况下才会这样做。

# javascript - Sort the order of Soundcloud Custom Player playlists

> ID：12205184
> 
> 赞同：0
> 
> 时间：2012-08-30T20:44:25.033
> 
> 标签：javascript, jquery, api, soundcloud

I am using the soundcloud custom player to pull in favorites. my question is how do i sort by date favorited, not by date uploaded which is the default in the minimal demo?

[http://developers.soundcloud.com/docs/custom-player](http://developers.soundcloud.com/docs/custom-player)

the script i'm working off of is here: [https://github.com/soundcloud/soundcloud-custom-player/blob/master/js/sc-player.js](https://github.com/soundcloud/soundcloud-custom-player/blob/master/js/sc-player.js)

in my implementation i built the player using:

```
<div class="post faves">
<a href="http://soundcloud.com/mr-tunes/favorites" class="sc-player"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T11:23:54.077

Soundcloud 不提供通过其 API 对曲目进行排序的方法，仅用于过滤它们。API 不提供用户何时将曲目设置为收藏的参数。

默认情况下，它应该按设置为收藏的时间排序，您可以通过将每个轨道添加到数组中并在其上运行 array.reverse() 来反转它。

要按字母顺序或 API 提供的任何其他参数排序，您可以使用相同的方法，将参数放入数组并使用 .sort() 和/或 .reverse()

# mysql - 从大表中检索聚合数据的更快方法？

> ID：12205185
> 
> 赞同：4
> 
> 时间：2012-08-30T20:44:26.930
> 
> 标签：mysql

我有一张每天增长数千万行的表。表中的行包含有关页面查看流量的每小时信息。

**表中的索引在 url 和 datetime 上。**

我想按天而不是按小时汇总信息。我该怎么做？这是一个举例说明我正在尝试做的查询：

```
SELECT url, sum(pageviews), sum(int_views), sum(ext_views)
FROM news
WHERE datetime >= "2012-08-29 00:00:00" AND datetime <= "2012-08-29 23:00:00"
GROUP BY url
ORDER BY pageviews DESC
LIMIT 10; 
```

但是，上面的查询永远不会完成。表中有数百万行。有没有更有效的方法可以获取这些汇总数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T22:49:38.560

*每天*几千万行是相当多的。

假设：

*   每天只有 1000 万条新记录；
*   您的表格仅包含您在问题中提到的列；
*   `url`是`TEXT`平均（Punycode）长度约为[77 个字符](http://www.supermind.org/blog/740/average-length-of-a-url-part-2)的类型；
*   `pageviews`是类型`INT`；
*   `int_views`是类型`INT`；
*   `ext_views`是类型`INT`；和
*   `datetime`是类型`DATETIME`

那么每天的数据将占用大约 9.9 × 10 ⁸个字节，几乎是 1GiB/天。实际上它可能要多得多，因为上述假设相当保守。

除其他事项外， MySQL 的[最大表大小](http://dev.mysql.com/doc/en/table-size-limit.html)由其数据文件所在的底层文件系统确定。如果您在 Windows 或 Linux 上使用 MyISAM 引擎（如您在下面的评论中所建议的那样）而不进行分区，那么几个 GiB 的限制并不少见；这意味着该表将在一个工作周内达到其容量！

正如[@Gordon Linoff](https://stackoverflow.com/questions/12205185/faster-way-of-retrieving-aggregate-data-from-large-table#comment16347655_12205185)提到的，您应该对表进行[分区](http://dev.mysql.com/doc/en/partitioning.html)；但是，每个表有 1024 个分区的[限制](http://dev.mysql.com/doc/en/partitioning-limitations.html#partitioning-limitations-max-partitions)。每天 1 个分区（这在您的情况下是非常明智的），在分区开始被重用之前，您将被限制在一个表中存储 3 年以下的数据。

因此，我建议您将每年的数据保存在自己的表中，每个表都按天分区。此外，正如[@Ben 解释](https://stackoverflow.com/a/12205569/623041)的那样，复合索引`(datetime, url)`会有所帮助（我实际上建议创建一个`date`列`DATE(datetime)`并为其编制索引，因为它将使 MySQL在执行查询时能够[修剪分区）；](http://dev.mysql.com/doc/en/partitioning-pruning.html)并且，如果行级锁定和事务完整性对您不重要（对于此类表，它们可能不重要），使用 MyISAM 可能并不愚蠢：

```
CREATE TABLE news_2012 (
  INDEX (date, url(100))
)
Engine = MyISAM
PARTITION BY HASH(TO_DAYS(date)) PARTITIONS 366
SELECT *, DATE(datetime) AS date FROM news WHERE YEAR(datetime) = 2012;

CREATE TRIGGER news_2012_insert BEFORE INSERT ON news_2012 FOR EACH ROW
  SET NEW.date = DATE(NEW.datetime);

CREATE TRIGGER news_2012_update BEFORE UPDATE ON news_2012 FOR EACH ROW
  SET NEW.date = DATE(NEW.datetime); 
```

如果您选择使用MyISAM ，您不仅可以存档已完成的年份[*`myisampack`*](http://dev.mysql.com/doc/en/myisampack.html)（[`MERGE`](http://dev.mysql.com/doc/en/merge-storage-engine.html)使用，但它只对语句有用，因为视图既不可更新也不可插入）：`UNION`[`VIEW`](http://dev.mysql.com/doc/en/views.html)`SELECT``UNION`

```
DROP TABLE news;
CREATE TABLE news (
  date DATE,
  INDEX (date, url(100))
)
Engine = MERGE
INSERT_METHOD = FIRST
UNION = (news_2012, news_2011, ...)
SELECT * FROM news_2012 WHERE FALSE; 
```

然后，您可以在此合并表上运行上述查询（以及任何其他查询）：

```
SELECT   url, SUM(pageviews), SUM(int_views), SUM(ext_views)
FROM     news
WHERE    date = '2012-08-29'
GROUP BY url
ORDER BY SUM(pageviews) DESC
LIMIT    10; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T21:09:26.660

几点：

1.  此外，作为您要过滤的唯一谓词，您可能应该将索引`datetime`作为第一列。
2.  您按 订购`pageviews`。我会假设您想按`sum(pageviews)`.
3.  `<`您查询的是 23 小时而不是 24 小时的数据。您可能希望从第二天午夜开始使用显式小于 ,以避免遗漏任何内容。

```
SELECT url, sum(pageviews), sum(int_views), sum(ext_views)
  FROM news
 WHERE datetime >= '2012-08-29 00:00:00'
   AND datetime < '2012-08-30 00:00:00'
 GROUP BY url
 ORDER BY sum(pageviews) DESC
 LIMIT 10; 
```

您可以将其编入索引，`datetime, url, pageviews, int_views, ext_views`但我认为这太过分了；所以，如果索引不是太大`datetime, url`似乎是一个好方法。唯一可以确定的方法是对其进行*测试*并确定查询中的任何性能改进是否值得在索引维护中花费额外的时间。

正如 Gordon 在评论中刚刚提到的，您可能需要研究[partitioning](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)。这使您能够查询一个较小的“表”，它是较大的“表”的一部分。如果您的所有查询都基于日级别，那么听起来您可能需要每天创建一个新查询。

# java - 将双精度数格式化为字符串

> ID：12205190
> 
> 赞同：0
> 
> 时间：2012-08-30T20:44:38.083
> 
> 标签：java, android, number-formatting

> **可能重复：**
> [如何很好地将浮动类型格式化为字符串？](https://stackoverflow.com/questions/703396/how-to-nicely-format-floating-types-to-string)

如何列出最多两位小数的数字？我试过这个方法： http: [//developer.android.com/reference/java/text/NumberFormat.html](http://developer.android.com/reference/java/text/NumberFormat.html)但没有运气。下面的代码。也许有人可以帮助我。

```
package karcio.fuel.economy;

public class FuelEconomy extends Activity 
{
    private EditText editText1;
    private EditText editText2;

private TextView textView4;
private TextView textView6;

private Button button1;

private double miles;
private double liters;
private double result;
private double convertMilesToKm;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    initParams();
}

private void initParams()
{
    editText1 = (EditText)findViewById(R.id.editText1);
    editText2 = (EditText)findViewById(R.id.editText2);

    textView4 = (TextView)findViewById(R.id.textView4);
    textView6 = (TextView)findViewById(R.id.textView6);

    button1 = (Button)findViewById(R.id.button1);

    button1.setOnClickListener(new Button.OnClickListener() 
    { 
        public void onClick (View v)
        { 
            calculate(); 
        }
    });

}

private void calculate()
{
    miles = Double.parseDouble(editText1.getText().toString());
    liters = Double.parseDouble(editText2.getText().toString());

    convertMilesToKm = miles * 1.61;
    result = 100 * liters / convertMilesToKm;

    textView6.setText(Double.toString(convertMilesToKm));
    textView4.setText(Double.toString(result));         
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T20:51:54.863

你可以这样做：

```
String str = String.format("%.2f", 3.99999);
textView.setText(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:52:19.437

好吧，您可以尝试手动执行此操作。

```
//This is just an example
double number = result;  //result is YOUR variable (ex. result = 23.1231231241920312)
int tmp = number * 100;   //2312.31231241920312
number = (double)tmp / 100;  //23.12 
```

希望这可以帮助。

**注意：**如果您在另一行执行，您可以跳过我声明 INT 的步骤。

**更新：**使用这种方法的好处是你不需要创建一个更快的对象，但是当然有很多方法。

# objective-c - How do i get files from a GIT repository in objective c?

> ID：12205191
> 
> 赞同：1
> 
> 时间：2012-08-30T20:44:38.960
> 
> 标签：objective-c, xcode, cocoa, git, nsurlconnection

So I have files stores in a GIT repository. Now I usually do a `git pull` to get the latest revisions. Since the path to the file I wish to get is basically a URL like: [https://github.com/.../myfile.extention](https://github.com/.../myfile.extention), is there a way I can get the file in Objective C?

I know how to get data from a url using NSURL and NSURLRequest, but i'm not sure of the following: 1\. GET ? or POST? 2\. How do i authenticate?

I've searched on Google but gotten mostly results that give me some sort of frame work. Is there any way to do this in the simplest way without some extra framework?

`Update:` Some below have suggested I use the Git.Framework, but they do not as yet support remote pushing and pulling as seen below.

![enter image description here](../Images/d62eb750617d390f13016a15d10b27f9.png)

Does any one know how to pull and push a file from objective c code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:58:52.903

试试[Git.framework](https://github.com/geoffgarside/Git.framework)。它似乎是完成这项任务的合适工具。从他们的网站：

> 该项目目前支持的功能是
> 
> *   阅读散装和包装的物品
> *   从 .git/refs 解析 refs
> *   读取本地和远程分支
> *   以广度和深度为首的提交枚举
> *   rev-list 一定程度的支持，目前还没有完全兼容 git rev-list
> *   初步 PACK 文件和索引生成支持（API 需要工作，当前不支持增量）

# php - How to use a ${variable} as part of the hint/default in Netbeans code templates

> ID：12205192
> 
> 赞同：0
> 
> 时间：2012-08-30T20:44:46.233
> 
> 标签：php, netbeans, ide, freemarker, template-engine

I have something like the following in a Netbeans code template:

```
/**
 * stuff 
 */
$name = '${name}';
array('${var1 default="persons_${name}"}'); 
```

How can I make the `default` value for `var1` actually expand the `name` variable as input in the preceding line when using the code template?

I expect to get:

```
/**
 * stuff 
 */
$name = 'joseph';
array('person_joseph'); 
```

When I fill in joseph for the name variable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T06:58:05.483

看起来您的问题不在于扩展`${name}`，而在于指定默认值。假设你想得到`person_joseph`when `var1`is`null`或 undefined 它应该是：

```
array('${var1!"persons_${name}"}'); 
```

# asp.net-mvc-3 - AutoMapViewResult from put your controllers on a diet video by Jimmy Bogard

> ID：12205198
> 
> 赞同：2
> 
> 时间：2012-08-30T20:45:25.243
> 
> 标签：asp.net-mvc-3, automapper-2

I've watched this [video](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://www.viddler.com/v/b568679c&ei=csw_UJ7nIKHdyAGMk4FA&usg=AFQjCNE7zKsnRJoxm0dPZCtOnIbSo2WhMA&sig2=2LBGmGri2ydiFPeIzzW7tA) a couple of times and really like the custom ActionResult that he creates that handles mapping your source object to your destination object. My problem is a lot of the time my ViewModel's will have a collection property that will be shown as a DropDownList or Listbox in my view but is not available in the source object. Therefore I call another service to retrieve the collection of source objects and then map this to the VeiwModel's property.

**Example:**

```
LetterEditModel editModel = _mappingEngine.Map<Letter, LetterEditModel>(_letterRepository.GetLetter(1));
editModel.Departments = _mappingEngine.Map<Department[], SelectOptionModel[]>(_departmentRepository.GetAllDepartments()); 
```

Since Departments are not a property of the Letter object, I must make another query in order to retrieve my options for the DropDownList. This requires another AutoMapper call in order to populate the ViewModel property.

I found the [google group for AutoMapper](https://groups.google.com/forum/?fromgroups=#!topic/automapper-users/cU9pl86PH1k) in which Jimmy kind of explains some approaches to this.

> **Jimmy Bogard's comments on this:**
> 
> We have a few ways of doing this, depending on how the select list varies. If it's a hard list of items, then often there's some model behind it (like State or Country), so our view model just has that one type and our editor templates takes care of actually pulling the list of states.
> 
> If it varies based on some parameter, we have to pass the actual select list down, and basically do a Mapper.Map + post-map manipulation (not in AutoMapper) to fill in the pieces. We use AutoMapper to fill in the major pieces, and the details w/ something else.
> 
> Finally, we might have something like a select list provider-type approach in our view:
> 
> Html.InputFor(m => m.UserRoles, opt => opt.SelectListProvider());
> 
> HTH,
> 
> Jimmy

I'm guessing that the EditorFor template would be using the DependencyResolver in order to get the correct service in order to query for your collection that you can generate your DropDownList or ListBox for. I don't know if that code belongs in a server-side code block in the EditorFor template. Something about this just doesn't seem right to me but I could be completely wrong. I always felt that any data access calls would be done in the body of the action and not from a view.

I'm not really sure what he means by his second and third recommendations.

I have to believe someone has solved this problem and has an elegant solution for this. Any recommendations or ideas would be greatly appreciated.

# ms-access - Enter Parameter Value Dialog Box

> ID：12205199
> 
> 赞同：1
> 
> 时间：2012-08-30T20:45:28.277
> 
> 标签：ms-access

I copied a report from another database, and changed a control source for a textbox to match a column in my current recordsource (which is a query). But I still keep getting the "Enter Parameter Dialog" box with the name of the column I changed. I tried running just the query and it works fine, I don't get the Dialog box then. But when I try running the report, I keep getting the dialog box. (ORDERDT is the name of the column in the query in OLD database, which I changed it to match to the column , ORDERDATE in the new query in the new DB)

So I ran the database documenter and got the following result:

```
Objects

Group Level 0
ControlSource: SITE GroupFooter: True
GroupHeader: True GroupInterval: 1
GroupOn: Each Value KeepTogether: Per Page
SortOrder: False

Group Level 1
ControlSource: Customer GroupFooter: False
GroupHeader: False GroupInterval: 1
GroupOn: Each Value KeepTogether: Per Page
SortOrder: False

Group Level 2
ControlSource: ORDERDT GroupFooter: False
GroupHeader: False GroupInterval: 1
GroupOn: Each Value KeepTogether: Per Page
SortOrder: False 
```

So does the result mean, the old 'ORDERDT' column or text still exists somewhere on the report?

I was not able to find it anywhere on my report.

Can somebody decode what the result of the database documenter means?

# iphone - iOS 5“通知中心”API？

> ID：12205200
> 
> 赞同：6
> 
> 时间：2012-08-30T20:45:46.623
> 
> 标签：iphone, objective-c, ios

我说的是这个： [http ://reviews.cnet.com/8301-19512_7-20120625-233/ios-5-notifications-a-deeper-look/](http://reviews.cnet.com/8301-19512_7-20120625-233/ios-5-notifications-a-deeper-look/)

iOS 上的那些下拉菜单，出于对生活的热爱，我找不到任何有关如何发出通知以便它在另一个应用程序中显示更新的文档。我不知道我是否只是使用了错误的术语或什么，但它是“NSNotificationCenter”，它的任何文档在哪里？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T21:20:19.273

数字徽章不是本地通知的唯一属性。它还可以显示横幅和播放声音。这些横幅随后被添加到通知中心。

这是一个例子：

```
- (void)addNotification {
    UILocalNotification *localNotification = [[UILocalNotification alloc] init];

    localNotification.fireDate = self.datePicker.date;
    localNotification.alertBody = self.messageField.text;
    localNotification.soundName = UILocalNotificationDefaultSoundName;
    localNotification.applicationIconBadgeNumber = 1;

    NSDictionary *infoDict = [NSDictionary dictionaryWithObjectsAndKeys:@"Object 1", @"Key 1", @"Object 2", @"Key 2", nil];
    localNotification.userInfo = infoDict;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
    [localNotification release];
} 
```

这是一个教程： http: [//www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/](http://www.icodeblog.com/2010/07/29/iphone-programming-tutorial-local-notifications/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T21:14:42.367

参考苹果的[本地和推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)：

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40008194-CH1-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html%23//apple_ref/doc/uid/TP40008194-CH1-SW1)

`NSNotificationCenter`实际上是不相关的，并提供 API 以在应用程序本身内部传递通知。

# javascript - Dynamically change the color of progress bar by javascript for Twitter Bootstrap

> ID：12205206
> 
> 赞同：1
> 
> 时间：2012-08-30T20:45:59.513
> 
> 标签：javascript, twitter-bootstrap, progress-bar

Bootstrap has many pre-defined styles for progress bar, but how to make them some dynamic changing feature. With my poor knowledge of javascript (first stages on codeacademy), can't make them change dynamically by width style changing, and that's the question.

```
<div class="progress bar-success">
<div class="bar" style="width: 'value'%"></div>
</div> 
```

need to define by javascript if 'value', if "bar" style width >50% when remove parent class "bar-success" and add class "bar-warning", when style width >80% change it to "bar-danger".

found smth like this with jquery [http://jsfiddle.net/ZQrnC/](http://jsfiddle.net/ZQrnC/) but think it would be better to have such a script for pure js to use it in bootstrap.

in [this question](https://stackoverflow.com/questions/9952446/how-to-change-the-color-of-a-bootstrap-twitter-progress-bar-at-runtime) also reccomended to use addClass but this seems too difficult for me

here some bootstrap progress bar markup [http://jsfiddle.net/pZ5mG/](http://jsfiddle.net/pZ5mG/)

Thank you!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:02:24.500

这是一个严格的 vanilla.js 解决方案：http: [//jsfiddle.net/pZ5mG/2/](http://jsfiddle.net/pZ5mG/2/)

HTML

```
<div class="progress">
    <div id="myProgress" class="bar bar-danger"></div>
</div>​ 
```

JS

```
var bar = document.getElementById("myProgress");
var progress = 0;

function setProgress(percent){
    bar.style.width = percent + "%";

    if (percent > 90)
        bar.className = "bar bar-success";
    else if (percent > 50)
        bar.className = "bar bar-warning";
}

var interval = setInterval(
    function(){
        setProgress(++progress);
        if (progress == 100) window.clearInterval(interval);
    }, 100); 
```

这是关于你想要完成的事情吗？（显然你不会使用间隔来更新进度）

# ios - ZBar SDK iOS：删除扫描仪视图中的取消按钮？

> ID：12205207
> 
> 赞同：1
> 
> 时间：2012-08-30T20:46:02.343
> 
> 标签：ios, xcode, uiimagepickercontroller, zbar-sdk

有没有办法在初始扫描视图中删除取消按钮？我将我的应用程序设置为立即进入扫描仪，因此取消是不必要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T18:37:30.730

假设您使用的是 SDK 1.2 版并且还使用 ZBarReaderViewController，您可以设置属性 showsZBarControls = NO;

这将删除取消和信息按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:32:07.537

找到了。虽然设置 showZBarControls = NO 会删除整个栏，但我需要一些可以删除取消按钮的东西。最好的方法是删除 ZbarControls 并创建一个新的工具栏并覆盖它。

# c# - 将 Wpf 页面导航到功能区应用程序

> ID：12205208
> 
> 赞同：3
> 
> 时间：2012-08-30T20:46:03.820
> 
> 标签：c#, wpf, navigation, ribbon

我正在尝试将页面导航到功能区窗口，但出现此错误：

> 'WpfRibbonApplication1.MainWindow' 根元素对导航无效'

我在页面中的导航代码是：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    NavigationService nav = NavigationService.GetNavigationService(this);
    nav.Navigate(new System.Uri("MainWindow.xaml", UriKind.RelativeOrAbsolute));
} 
```

有人帮忙吗？

# html - CSS3：父元素有悬停，里面有动画元素

> ID：12205212
> 
> 赞同：1
> 
> 时间：2012-08-30T20:46:24.410
> 
> 标签：html, css, css-transitions

```
<div style="width: 310px; height: 160px; position: relative;" class="feature-box">                          
    <a href="" style="display: block; width: 310px; height: 160px; position: relative;">
        <div class="feature-box-link">My Service</div>
    </a>
</div> 
```

我正在尝试做`CSS3 transition`的`div`是`a`......所以当你`hover`在动画`feature-box a:hover`中：`.feature-box-link`

```
-webkit-transition: all 0.3s ease-in-out;
-moz-transition: all 0.3s ease-in-out;
-o-transition: all 0.3s ease-in-out;
transition: all 0.3s ease-in-out;
line-height: 19px; 
```

至：

```
line-height: 50px;
background: #FF9E00;
background: rgba(255, 158, 0, 0.75); 
height: 40px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:51:34.600

试试这个 -[**演示**](http://jsfiddle.net/cQy34/)

```
.feature-box a .feature-box-link {
    -webkit-transition: all 0.3s ease-in-out;
    -moz-transition: all 0.3s ease-in-out;
    -o-transition: all 0.3s ease-in-out;
    transition: all 0.3s ease-in-out;
    line-height: 19px;
}

.feature-box a:hover .feature-box-link  {
    line-height: 50px;
    background: #FF9E00;
    background: rgba(255, 158, 0, 0.75);
    height: 40px;
} 
```

# python - Python Mechanize - 如何在单个 .open() 调用中添加标头？

> ID：12205221
> 
> 赞同：4
> 
> 时间：2012-08-30T20:46:45.530
> 
> 标签：python, mechanize

我试图绕过某个没有 API 的服务，并决定尝试 Mechanize（我通常使用 urllib）。

如何为一个`open`呼叫添加特定标头？

或者有没有办法用自己的标头构造一个 Request 实例，然后让我的`mechanize.Browser`实例处理它？

```
browser = mechanize.Browser()
headers = [
    ('Accept', 'text/javascript, text/html, application/xml, text/xml, */*'),
    ('Content-type', 'application/x-www-form-urlencoded; charset=UTF-8'),
    ('User-Agent', 'Foobar'),
]

browser.addheaders = headers
# log in, do stuff, etc.

# here, for this one browser request, I need to add an AJAX header
browser.open('/a_url_to_ajax_post/', urllib.urlencode({'foo': 'bar'})) 
```

我的解决方法是临时修改 addheaders 列表，但哇，这很难看！

```
browser.addheaders.append(AJAX_HEADER)
browser.open('/admin/discounts', urllib.urlencode(pulled_params))
browser.addheaders.pop() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T02:36:42.977

像这样做：

```
import mechanize
import urllib2

browser = mechanize.Browser()

# setup your header, add anything you want
header = {'User-Agent': 'Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1', 'Referer': 'http://whateveritis.com'}
url = "http://google.com"

# wrap the request. You can replace None with the needed data if it's a POST request
request = urllib2.Request(url, None, header)

# here you go
response = browser.open(request)

print response.geturl()
print response.read()
response.close() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-06T22:11:55.653

您可以使用 python`with`语句。制作这样的课程：

```
class ExtraHeaders(object):
    def __init__(self, br, headers):
        self.extra_headers = headers
        self.br = br
    def __enter__(self):
        self.old_headers = self.br.addheaders
        self.br.addheaders = self.extra_headers + [h for h in self.br.addheaders if 
            not reduce(
                lambda accum, ex_h: accum or ex_h[0] == h[0],self.extra_headers,False)]
        return self.br
    def __exit__(self, type, value, traceback):
        self.br.addheaders = self.old_headers 
```

然后以这种方式使用它：

```
with ExtraHeaders(browser, [AJAX_HEADER]):
    browser.open('/admin/discounts', urllib.urlencode(pulled_params))
#requests beyond this point won't have AJAX_HEADER 
```

请注意，如果您使用的是多线程，那么当另一个线程在 with 语句中时，任何访问浏览器的线程也将具有额外的标头。

# c++ - g++ 文件格式无法识别；将 Object.o 视为链接描述文件

> ID：12205222
> 
> 赞同：0
> 
> 时间：2012-08-30T20:46:49.480
> 
> 标签：c++, linker, makefile, g++, linker-errors

**对象.hpp**

```
#ifndef OBJECT_HPP
#define OBJECT_HPP

#include <SFML/Graphics.hpp>

using namespace std;

class Object {
  private:
    sf::Image image;

  public:
    float x;
    float y;
    int width;
    int height;
    sf::Sprite sprite;

    virtual void update();
};

#endif 
```

**对象.cpp**

```
void Object::update() {

} 
```

这是我的Makefile：

```
LIBS=-lsfml-graphics -lsfml-window -lsfml-system

all:
    @echo "** Building mahgame"

State.o : State.cpp
    g++ -c State.cpp

PlayState.o : PlayState.cpp
    g++ -c PlayState.cpp

Game.o : Game.cpp
    g++ -c Game.cpp

Object.o : Object.cpp
    g++ -c Object.cpp

Player.o : Player.cpp
    g++ -c Player.cpp

mahgame : Game.o State.o PlayState.o Object.o Player.o
    g++ -o mahgame Game.o State.o PlayState.o Object.o Player.o $(LIBS)

    #g++ -c "State.cpp" -o State.o
    #g++ -c "PlayState.cpp" -o PlayState.o
    #g++ -c "Game.cpp" -o Game.o
    #g++ -c "Object.hpp" -o Object.o
    #g++ -c "Player.hpp" -o Player.o
    #g++ -o mahgame Game.o State.o PlayState.o Object.o Player.o $(LIBS)

clean:
    @echo "** Removing object files and executable..."
    rm -f mahgame

install:
    @echo '** Installing...'
    cp mahgame /usr/bin

uninstall:
    @echo '** Uninstalling...'
    rm mahgame 
```

这是我在构建时遇到的错误（构建后，这是一个链接器错误）：

```
/usr/bin/ld:Object.o: file format not recognized; treating as linker script
/usr/bin/ld:Object.o:1: syntax error
collect2: error: ld returned 1 exit status
make: *** [all] Error 1 
```

知道发生了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:23:23.637

Were you, by any chance, using ccache? I just had a very similar problem to yours and omitting ccache in the compilation solved it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:49:27.050

makefile 的格式为：

```
xxx.o : xxx.cpp
   g++ -c xxx.cpp 
```

你的看起来不像那样。因此，将您的更改为：

```
LIBS=.....

[EDIT]
all : mahgame rmerr

rmerr :
   rm -f err
[/EDIT]

State.o : State.cpp
   g++ -c State.cpp 2>>err

PlayState.o : PlayState.cpp
   g++ -c PlayState.cpp 2>>err

.....

mahgame : Game.o State.o .....
   g++ -o mahgame Game.o State.o PlayState.o Object.o Player.o $(LIBS) 2>>err 
```

请注意，这些是您的第一步，有更好的方法来编写不包含源文件/目标文件/等的每个细节的 makefile。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:13:51.140

您的 Makefile 看起来很完美，虽然有点冗长，并且缺少标题依赖项。我假设 shell 命令有一个前导制表符。我假设您的构建命令是`make mahgame`.

正如你所说，你有一个链接器错误。`Object.o`似乎不是一个有效的`.o`. 让编译器重新生成它。

```
$ rm Object.o
$ make mahgame
g++ -c Object.cpp
g++ -o mahgame Game.o State.o PlayState.o Object.o Player.o... 
```

# java - 刽子手屏蔽字符串，取消隐藏字符

> ID：12205223
> 
> 赞同：0
> 
> 时间：2012-08-30T20:46:51.077
> 
> 标签：java

我正在编写一个刽子手应用程序，并且我必须编写代码以使用“-”隐藏字符串中的每个字符（被猜测的单词）......而且我已经发布了很多问题锄头做它，我的答复之一是：[刽子手 - 隐藏字符串，然后如果猜对了则取消隐藏每个字符](https://stackoverflow.com/questions/12073860/hangman-hide-string-and-then-unhide-each-char-if-guessed-correct)

```
public class HangmanWord {

private static final char HIDECHAR = '_';

private String original;     
private String hidden;  

public HangmanWord(String original) {
    this.original = original;
    this.hidden = this.createHidden();
}

private String createHidden() {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < this.original.length; i++) {
        sb.append(HIDECHAR);
    }
    return sb.toString();
}

public boolean check(char input) {
    boolean found = false;
    for (int i = 0; i < this.original.length; i++) {
        if (this.original[i].equals(input)) {
            found = true;
            this.hidden[i] = this.original[i];
        }
    }
    return found;
}

//getter and setter
} 
```

* * *

```
public class TestClass() {

public static void main(String[] args) {
    String secret = "stackoverflow";
    int wrongGuesses = 0;
    HangmanWord hngm = new HangmanWord(secret);
    System.out.println(hngm.getHidden()); // _____________
    if (hngm.check('a')) {
        System.out.println(hngm.getHidden()); // __a_________
    }
    else {
       wrongGuesses++;
    }
    //... and so on...
}
} 
```

我尝试将此代码与我的代码一起使用，但我遇到了很多错误并得出结论，它不适用于我的代码。在我的代码中，我创建了一个数组按钮，如果该人单击一个按钮，我会收到一条消息，说明该字母是否在单词中......现在我想用它没有给我的地方替换这个代码一条消息，但取消隐藏字符，如果没有字符，则必须更改图像

如果可能的话，任何人都可以解释为什么它不适用于我的代码，或者任何人都可以向我解释该怎么做......

我的按钮数组：

```
public JButton getButton(final String text){
   final JButton button = new JButton(text);
    button.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             if(original.toUpperCase().indexOf(button.getText())!=-1){
                 JOptionPane.showMessageDialog(null, "Your word does contain " + text       );
             }
             else{
                 JOptionPane.showMessageDialog(null, "There is no " + text );
                 error++;
                    if(error >= 0) imageName = "hangman1.jpg";
                    if(error >= 1) imageName = "hangman2.jpg";
                    if(error >= 2) imageName = "hangman3.jpg";
                    if(error >= 3) imageName = "hangman4.jpg";
                    if(error >= 4) imageName = "hangman5.jpg";
                    if(error >= 5) imageName = "hangman6.jpg";
                    if(error >= 7) imageName = "hangman7.jpg"; 
             }
             }
             });
             return button;
} 
```

我的完整代码：

```
import java.awt.*;
import java.awt.event.*;
import java.util.Arrays;
import javax.swing.*;
import java.io.*;
import java.util.ArrayList;
import java.util.Random;
import java.util.List;

public final class Hangman extends JFrame implements ActionListener{
String original = readWord();
int error;
String imageName;

JButton btnAddWord = new JButton("Add New Word");
JButton btnRestart = new JButton("Restart");
JButton btnHelp = new JButton("Help");
JButton btnExit = new JButton("Exit");

JLabel word = new JLabel(original);

static JPanel panel1 = new JPanel();
static JPanel panel2 = new JPanel();
static JPanel panel3 = new JPanel();
static JPanel panel4 = new JPanel();

public Hangman(){
    Container content =getContentPane();
    content.setLayout(new GridLayout(0,1));

   btnAddWord.addActionListener(this);
   btnRestart.addActionListener(this);
   btnHelp.addActionListener(this);
   btnExit.addActionListener(this);

   ImageIcon icon = null;
   if(imageName != null){
   icon = new ImageIcon(imageName);
                    }
  JLabel image = new JLabel();
  image.setIcon(icon);
  panel2.add(image);

   panel3.add(word);
   panel4.add(btnAddWord);
   panel4.add(btnRestart);
   panel4.add(btnHelp);
   panel4.add(btnExit);

    for(char i = 'A'; i <= 'Z'; i++){
        String buttonText = new Character(i).toString();
        JButton button = getButton(buttonText);
        panel1.add(button);
    }
}

public JButton getButton(final String text){
   final JButton button = new JButton(text);
    button.addActionListener(new ActionListener(){
         public void actionPerformed(ActionEvent e){
             if(original.toUpperCase().indexOf(button.getText())!=-1){
                 JOptionPane.showMessageDialog(null, "Your word does contain " + text     );
             }
             else{
                 JOptionPane.showMessageDialog(null, "There is no " + text );
                 error++;
                    if(error >= 0) imageName = "hangman1.jpg";
                    if(error >= 1) imageName = "hangman2.jpg";
                    if(error >= 2) imageName = "hangman3.jpg";
                    if(error >= 3) imageName = "hangman4.jpg";
                    if(error >= 4) imageName = "hangman5.jpg";
                    if(error >= 5) imageName = "hangman6.jpg";
                    if(error >= 7) imageName = "hangman7.jpg"; 
             }
             }
             });
             return button;
}
public String readWord(){
    try{
        BufferedReader reader = new BufferedReader(new FileReader("Words.txt"));
        String line = reader.readLine();
        List<String> words = new ArrayList<String>();
        while(line != null){
            String[] wordsLine = line.split(" ");
            boolean addAll = words.addAll(Arrays.asList(wordsLine));
            line = reader.readLine();
        }
        Random rand = new Random(System.currentTimeMillis());
        String randomWord = words.get(rand.nextInt(words.size()));
        return randomWord;

}catch (Exception e){
    return null;
}
}
public void actionPerformed(ActionEvent e){
    if(e.getSource() == btnAddWord){
        try{
            FileWriter fw = new FileWriter("Words.txt", true);
            PrintWriter pw = new PrintWriter(fw, true);

            String word = JOptionPane.showInputDialog("Please enter a word: ");

            pw.println(word);
            pw.close();
        }
        catch(IOException ie){
            System.out.println("Error Thrown" + ie.getMessage());
        }
    }
    if(e.getSource() == btnRestart){

    }
    if(e.getSource() == btnHelp){
        String message = "The word to guess is represented by a row of dashes, giving the number of letters and category of the word."
               + "\nIf the guessing player suggests a letter which occurs in the word, the other player writes it in all its correct positions."
               + "\nIf the suggested letter does not occur in the word, the other player draws one element of the hangman diagram as a tally mark."
               + "\n"
               + "\nThe game is over when:"
               + "\nThe guessing player completes the word, or guesses the whole word correctly"
               + "\nThe other player completes the diagram";
       JOptionPane.showMessageDialog(null,message, "Help",JOptionPane.INFORMATION_MESSAGE);
    }
    if(e.getSource() == btnExit){
        System.exit(0);
    }
}

public static void main (String [] args){
    Hangman frame = new Hangman();
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 600);
    frame.add(panel1, BorderLayout.NORTH);
    frame.add(panel2, BorderLayout.CENTER);
    frame.add(panel3, BorderLayout.SOUTH);
    frame.add(panel4, BorderLayout.SOUTH);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:13:36.230

您的代码已经有了一个良好的开端，但在编写代码*之前，您首先需要在脑海中清楚设计。*让我们考虑一下，分步骤：

*   当应用程序启动时，您加载文件中的所有单词。所以这是一个只执行一次的步骤，其结果（文件中的单词）应该被保存。
*   上一步似乎与您的 GUI 代码无关，因此您可能希望在您的`main`方法中执行此操作，然后将结果传递给您的 GUI 类。您甚至可以将此功能提取到一个单独的类中，同时选择一个随机词。
*   显示 GUI 后，您会显示一个象征隐藏单词的标签。此标签的文本应包含`'-'`与单词字符一样多的隐藏字符 ( )。
*   每当按下正确的按钮时，应显示单词中的所有匹配字符。
*   每当按下错误的按钮时，错误计数器就会增加并显示图像。
*   当发现整个单词时，应禁用字符按钮。

这导致了一个设计，其中您有一个单独的帮助类，其中一个用于读取单词文件的方法和另一个用于选择随机单词的方法。可能是这样的：

```
class WordsReader {
    public String[] readWords(String filename) {
        // ...
    }

    public String chooseWord(String[] words) {
        // ...
    }
} 
```

一旦选择了一个新词，您应该更新标签。这就是`HangmanWord`上面建议的类派上用场的地方。它存储原始单词及其隐藏表示。这允许您在按钮的处理程序中调用该`check`方法，并使用更新的隐藏表示来更新标签的文本。您的其余代码应该可以正常工作，尽管它仍然可以改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:52:34.337

您可以获取字符串的字符，并在新字符串中用“-”替换猜测的字母，并显示它（虽然在幕后你仍然有完整的）

```
public [static] String hideString(String string, int[] guessedLetterIndices) {
    char[] chars = string.toCharArray();
    for(int index : guessedLetterIndices)
        chars[i] = '-';//Replace this with any letter
    for(int i = 0; i < chars.length; i++) {
        char c = '-';
        for(int index : guessedLetterIndices)
            if(index == i)
                c = chars[i];
        chars[i] = c;
    }

    return new String(chars);
} 
```

或者，如果您当前有他们选择的字符数组，而不是字符索引...

```
public [static] String hideString(String string, char[] guessedLetters) {
    char[] chars = string.toCharArray();
    char[] hidden = (string.replaceAll("(.|\n)", "-").toCharArray();
    for(int i=0;i<chars.length;i++) {
        for(char c : guessedLetters)
            if(chars[i] == c) {
                hidden[i] = chars[i];
                break;
            }
    ]
    return new String(chars);
} 
```

这就是我要做的。至于为什么你的不起作用，你能告诉我你得到的错误吗？确保您正在导入 StringBuilder 和其他东西（无论他们使用什么）

# asp.net - MVC ASP.NET - 手动授权某人并通过表单身份验证保持授权

> ID：12205229
> 
> 赞同：11
> 
> 时间：2012-08-30T20:47:02.203
> 
> 标签：asp.net, asp.net-mvc-3, forms-authentication

我想要 ASP.NET 中表单身份验证的好处。我希望它为我等保持授权，但我的情况有一点不同；我想针对一个简单的 Web 服务（具体由客户端提供）进行身份验证。

我有我的代码来查看网站，看看他们*是否应该*被授权，但是我如何在他们知道当前用户被授权的 ASP.NET 中设置 cookie[？] 或授权标志。

基本上...

```
if (HttpContext.Current.User.Identity.IsAuthenticated)
// we're all good

//Other wise...
bool success = CheckClientsWebService(string username, string password);

if (success)
// Somehow tell .NET that they're authorized 
```

*注意：这是一个相当简单的服务，不涉及组或角色。只需检查用户是否可以查看该站点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T00:42:24.277

在表单身份验证中不能证明您在表单身份验证 cookie 中的身份。？考虑到这一点，您不能在自定义登录表单中创建票证而不必创建自定义提供程序吗？我肯定认为你可以。进行快速测试并创建表单身份验证票证，并查看开箱即用的成员资格提供商是否认为用户已通过身份验证。

我很好奇 - 所以这里有一些代码..

**模型**

```
public class SignInViewModel
{
    public string Username { get; set; }
    public string Password { get; set; }
} 
```

**控制器**

```
public class SignInController : Controller
{

    public ActionResult Index()
    {
        var model = new SignInViewModel {};
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(SignInViewModel model)
    {
        if (model.Username == "Fred" && model.Password == "Mertz")
        {
            FormsAuthentication.SetAuthCookie(model.Username, false);
            return RedirectToAction("Secure");
        }
        return View(model);
    }

    [Authorize]
    public ActionResult Secure(SignInViewModel model)
    {
        return View();
    }

    [Authorize]
    public ActionResult Logout(SignInViewModel model)
    {
        FormsAuthentication.SignOut();
        return RedirectToAction("Index");
    } 
```

**索引.cshtml**

```
@using (Html.BeginForm()) {
    <fieldset>
        <legend>SignInViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Username)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Username)
            @Html.ValidationMessageFor(model => model.Username)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Password)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Password)
            @Html.ValidationMessageFor(model => model.Password)
        </div>

        <p>
            <input type="submit" value="Login" />
        </p>
    </fieldset>
} 
```

**安全.cshtml**

```
<h2>Secure</h2>
@Html.ActionLink("Logout", "Logout") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T04:39:35.857

我可能过度简化了这一点，但我阅读的方式如下：

1.  如果用户未通过身份验证，则您有一个收集用户名/密码的表单
2.  该表单的结果将传递给 Web 服务以进行授权
3.  如果该授权成功，您需要一种方法让 Web 应用程序知道他们已经登录。
4.  如果他们经过身份验证，请做一些事情

如果以上是正确的，您不需要会员提供商。[Authorize] 属性只是查看表单身份验证 cookie 以查看它是否已设置并且在 cookie 的当前生命周期内有效。此身份验证 cookie 存储用户的用户名和 cookie 的到期时间（以及其他内容，但在这里并不重要）。

鉴于此，您只需要设置 web.config 配置元素并具有设置身份验证 cookie 的方法。

**网络配置**

```
<system.web>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
</system.web> 
```

**登录 URL GET 操作**

```
public ActionResult Logon(){
   //if the user is logged in, send the to the home page
   if(httpContext.User.Identity.IsAuthenticated_{
        Return RedirectToAction("Index", "Home");
   }
   Return this.View(new LoginViewModel());
} 
```

**登录 URL POST 操作**

```
[HttpPost]
public ActionResult Logon(LoginViewModel model){
   //Check for model errors
   if(!ModelState.IsValid()){
       Return this.View(model);
   }

   //Validate against web service - return error if false
   if(!CheckClientsWebService(model.UserName, model.Password)){
       ModelState.AddModelError("","The username or password is invalid");
       Return this.View(model);
   } 

   //Manually set the authentication cookie
   FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);  
   //Send them on to the home page, they now have a authorization cookie
   Return RedirectToAction("Index", "Home");
} 
```

调用该`.SetAuthCookie()`函数后，用户现在将拥有一个身份验证票，并且`HttpContext.User.Identity.IsAuthenticated`只要 cookie 未过期，调用 to 就会为真，并且您可以从中获取用户名`HttpContext.User.Identity.Name`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:16:05.900

正如 Wiktor 评论的那样，实现您自己的[MembershipProvider](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29.aspx)。只需实现您需要的方法，其余的扔一个`NotImplementedException`.

在您的情况下，您似乎只需要实现`public bool ValidateUser(string username, string password)`- 其实现只需要调用您的 Web 服务。

然后，您可以使用所有标准的内置身份验证和授权内容。

# jsp - Webflow - 根据模型数据显示不同的视图

> ID：12205232
> 
> 赞同：0
> 
> 时间：2012-08-30T20:47:11.080
> 
> 标签：jsp, viewstate, spring-webflow-2

我正在构建一个包含大约 10 个屏幕的 webflow 应用程序。我的流程定义文件定义了所有视图状态之间的流程，其中每个视图状态都由一个 .jsp 视图文件表示。

我现在想介绍应用程序白标的概念——能够呈现相同的流程，但使用不同的“皮肤”或视图文件，具体取决于模型属性——${brand}。

我不认为我可以单独使用 css 做到这一点。品牌之间的 html 标记将非常不同，并且某些字段将显示不同的文本等（即，品牌 X 可能会说“您的名字是什么”，品牌 Y 可能会说“请输入您的名字”）。

我可以在每个 jsp 文件中放入大量逻辑以在适当的情况下呈现不同的标记和文本，但这感觉很混乱，我想我最终会得到一个巨大的 if/else，每个品牌的标记都在相关if/else 身体。

我可以使用视图 jsp 来“决定”显示哪个 jsp。像这样的东西：

```
<view-state id="AboutYou" view="common/AboutYou" /> 
```

然后在 common/AboutYou.jsp 中执行以下操作：

```
<c:chooose>
    <c:when test="${brand == 'X'}>
        <jsp:include page="brandX/AboutYou.jsp" />
    </c:when>
    <c:when test="${brand == 'Y'}>
        <jsp:include page="brandY/AboutYou.jsp" />
    </c:when>
</c:choose> 
```

我可以看到这个工作，但我不确定它的效率如何 - 我将有 10 个额外的 .jsp 文件，其中“通用”.jsp 文件的唯一工作是决定显示哪个品牌的 .jsp。

另一种方法是复制我的所有视图状态，然后在我的流定义文件中放入大量决策状态。但这看起来真的很混乱，并且会导致大量臃肿的流 def 文件。

所以我想知道是否有另一种/更好/更智能的方式来做到这一点。也许能够在流定义文件中使用 EL。像这样的东西：

```
<view-state id="AboutYou" view="brand${brand}/AboutYou" /> 
```

这行得通吗？或者这是解决这个问题的另一种方法？

干杯，

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:32:34.913

我找到了答案 - 您可以使用 # 而不是 $ 访问模型 不确定有什么区别，但这有效：

```
<view-state id="AboutYou" view="brand#{brand}/AboutYou" /> 
```

这导致它使用名为brandX/AboutYou.jsp 的视图文件

快乐的时光 ：）

# c++ - QMainWindow 中的 QT 4.8 填充

> ID：12205244
> 
> 赞同：5
> 
> 时间：2012-08-30T20:47:38.113
> 
> 标签：c++, qt, qt4.8, qmainwindow

我开始学习QT。当我创建一个 MainWindow 并在布局中放置一些小部件时，窗口边缘和小部件之间存在间隙，如下所示：

![在此处输入图像描述](../Images/d6c5f5d06e656a6547ed6913502ed718.png)

我怎样才能关闭这个差距？

`layout()->setContentsMargins(0,0,0,0);` 和编辑窗口的样式表，但没有效果。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T21:05:37.780

A`QMainWindow`与 a 略有不同，`QDialog`或`QWidget`在于它具有“中央小部件”的概念。该窗口具有预定义的区域来处理工具栏、菜单和停靠栏等内容，并将中央小部件定义为窗口的主要内容。窗口本身通常不分配布局。但是我假设您正在做的是在窗口布局上设置值（这不会产生影响）。

您设置为中心小部件的小部件很可能有自己的布局。默认情况下，中央小部件已经可以扩展到边缘。首先考虑这个例子：

```
#include <QApplication>
#include <QMainWindow>
#include <QVBoxLayout>
#include <QListWidget>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QMainWindow *window = new QMainWindow;
    window->resize(800,600);

    QListWidget *listWidget = new QListWidget;
    window->setCentralWidget(listWidget);

    window->show();

    return a.exec();
} 
```

您将看到列表小部件完全扩展到边缘。但在一个更现实的例子中：

```
#include <QApplication>
#include <QMainWindow>
#include <QVBoxLayout>
#include <QListWidget>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QMainWindow *window = new QMainWindow;
    window->resize(800,600);

    QWidget *central = new QWidget;
    QListWidget *listWidget = new QListWidget;

    QVBoxLayout *layout = new QVBoxLayout;
    layout->addWidget(listWidget);

    //Uncomment this following line to remove margins
    //layout->setContentsMargins(0,0,0,0);

    central->setLayout(layout);

    window->setCentralWidget(central);

    window->show();

    return a.exec();
} 
```

您有一个容器小部件，然后由布局和列表小部件组成。这个中央小部件的布局是引入边距的布局。

# c# - 为什么位图比较不等于自身？

> ID：12205247
> 
> 赞同：6
> 
> 时间：2012-08-30T20:47:48.240
> 
> 标签：c#, gdi+, memcmp

这在这里有点令人费解。以下代码是一个小测试应用程序的一部分，用于验证代码更改没有引入回归。为了让它更快，我们使用`memcmp`了这[似乎是比较两个相同大小的图像的最快方法](https://stackoverflow.com/q/2031217/73070)（不足为奇）。

然而，我们有一些测试图像表现出一个相当令人惊讶的问题：`memcmp`位图数据告诉我们它们不相等，但是，逐像素比较根本没有发现任何差异。我的印象是，`LockBits`在 a 上使用时，`Bitmap`您会得到图像的实际原始字节。对于 24 bpp 位图，有点难以想象像素相同但底层像素*数据*不同的情况。

一些令人惊讶的事情：

1.  差异*始终*`00`是一个图像和另一个图像中的单个字节`FF`。
2.  如果将 for 更改为`PixelFormat`or ，则比较成功。`LockBits``Format32bppRgb``Format32bppArgb`
3.  如果将`BitmapData`第一次调用返回的`LockBits`值作为第四个参数传递给第二个，则比较成功。
4.  如上所述，逐像素比较也成功。

我在这里有点难过，因为坦率地说，我无法想象*为什么*会发生这种情况。

（简化）代码如下。只需编译`csc /unsafe`并传递 24bpp PNG 图像作为第一个参数。

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;

class Program
{
    public static void Main(string[] args)
    {
        Bitmap title = new Bitmap(args[0]);
        Console.WriteLine(CompareImageResult(title, new Bitmap(title)));
    }

    private static string CompareImageResult(Bitmap bmp, Bitmap expected)
    {
        string retval = "";

        unsafe
        {
            var rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
            var resultData = bmp.LockBits(rect, ImageLockMode.ReadOnly, bmp.PixelFormat);
            var expectedData = expected.LockBits(rect, ImageLockMode.ReadOnly, expected.PixelFormat);

            try
            {
                if (memcmp(resultData.Scan0, expectedData.Scan0, resultData.Stride * resultData.Height) != 0)
                    retval += "Bitmap data did not match\n";
            }
            finally
            {
                bmp.UnlockBits(resultData);
                expected.UnlockBits(expectedData);
            }
        }

        for (var x = 0; x < bmp.Width; x++)
            for (var y = 0; y < bmp.Height; y++)
                if (bmp.GetPixel(x, y) != expected.GetPixel(x, y))
                {
                    Console.WriteLine("Pixel diff at {0}, {1}: {2} - {3}", x, y, bmp.GetPixel(x, y), expected.GetPixel(x, y));
                    retval += "pixel fail";
                }

        return retval != "" ? retval : "success";
    }

    [DllImport("msvcrt.dll", CallingConvention = CallingConvention.Cdecl)]
    static extern int memcmp(IntPtr b1, IntPtr b2, long count);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T20:58:11.303

看一下这个，它以图形方式说明了一个 LockBits 缓冲区 - 它显示了 Strides 的行以及 Padding 可以出现在 Stride 末尾的位置（如果需要）。

*   [https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)

*   [http://supercomputingblog.com/graphics/using-lockbits-in-gdi/](http://supercomputingblog.com/graphics/using-lockbits-in-gdi/)

一个步幅可能与 32 位（即字）边界对齐（出于效率目的）......并且步幅末尾的额外未使用空间是为了使下一个步幅对齐。

所以这就是在比较过程中给你随机行为的原因......填充区域中的虚假数据。

当您使用 Format32bppRgb 和 Format32bppArgb 时，它自然是字对齐的，所以我猜您最后没有任何额外的未使用位，这就是它起作用的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T20:53:10.380

只是一个有根据的猜测：

24 位（3 个字节）在 32/64 位硬件上有点尴尬。

使用这种格式，肯定会有缓冲区被刷新为 4 个字节的倍数，留下 1 个或更多字节为 'don't care' 。它们可以包含随机数据，并且软件不需要将它们归零。这将使 memcmp 失败。

# bash - 有没有办法将 bash 中的输出重定向到具有不同过滤器的不同位置？

> ID：12205250
> 
> 赞同：5
> 
> 时间：2012-08-30T20:47:59.923
> 
> 标签：bash, io-redirection

如果我有一个过程`a.out`，我可以`./a.out | grep foo`看到由 foo 过滤的 a.out 的标准输出。我也可以说`./a.out 2>&1 | grep foo`看到 err 和 out 被 foo 过滤。使用该`tee`命令，我可以将标准输出发送到终端和可能的文件输出。但是有没有办法单独过滤它们？如：

```
./a.out | tee grep foo file.txt 
```

但是这样`file.txt`过滤到的内容与 foo 匹配，但与我在屏幕上看到的不匹配……或者甚至更好的是，我在屏幕上看到的内容被 baz 而不是 foo 过滤？如果在 bash 中没有办法这样做，我会写我自己的“tee”，但我想有一些方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:42:54.850

非常简单，只需对文件句柄使用进程替换：

```
./a.out | tee >(grep foo > out.txt) | grep baz 
```

另请注意，它`tee`可以采用任意数量的参数，因此您可以执行以下操作：

```
./a.out | tee >(grep foo > foo.txt) >(grep bar > bar.txt) [etc] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T20:58:04.027

要将所有内容显示到终端，并将输出过滤到文件，请尝试：

```
./a.out| tee /dev/tty | grep foo > file 
```

如果您使用的是带有 /proc 文件系统的系统（例如 linux），您可以使用以下命令过滤到终端的输出：

```
{ ./a.out | tee /proc/self/fd/3 | grep foo > file; } 3>&1 | grep bar 
```

但即便如此，也可能工作太辛苦了。只需这样做：

```
./a.out | awk '/foo/{ print > "file" } 1' | grep bar 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T21:04:59.420

```
{ { ( myCommandThatOutputsOnStdOutandStdErr; ) \
| ( awk ' ... filters stdout ... ' - ; ) >&3; } 2>&1 \
| ( awk ' ... filters stderr ... ' - ; ) >&4; } 3>&1 4>&2 
```

这是伪代码。awk 简介不是真实的，但可以用您自己的过滤器替换。这个想法是两个单独的过滤器可以独立地对 stderr 和 stdout 进行操作，但将未在 stdout 上过滤的内容留在 stdout 上，将未在 stderr 上过滤的内容留在 stderr 上。

最后的`3>&1`and`4>&2`也可以很容易地变成`3>my.stdout`and `4>my.stderr`。

# orm - 使用 Magento ORM 的布尔字段

> ID：12205251
> 
> 赞同：3
> 
> 时间：2012-08-30T20:47:59.870
> 
> 标签：orm, boolean, magento-1.5, magento

我正在为我的自定义实体开发一个后端编辑页面。我几乎可以正常工作，包括保存一堆不同的文本字段。但是，在尝试设置布尔字段的值时，我遇到了一个问题。

我努力了：

```
$landingPage->setEnabled(1);
$landingPage->setEnabled(TRUE);
$landingPage->setEnabled(0);
$landingPage->setEnabled(FALSE); 
```

似乎没有人对我的数据库进行更改。

您应该如何使用 magento ORM 设置布尔字段？

*编辑* 查看我的数据库，mysql 将该字段存储为 tinyint(1)，因此 magento 可能将其视为 int 而不是 bool。仍然无法设置它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T17:44:52.443

这个话题让我产生了好奇。虽然已经回答了，但我想分享我发现的东西，虽然我没有做密集的追踪。

是否启用/禁用缓存无关紧要，表模式将被缓存。

它将在保存过程中被缓存。

`Mage_Core_Model_Abstract -> save()`

`Mage_Core_Model_Resource_Db_Abstract -> save(Mage_Core_Model_Abstract $object)`

* * *

```
Mage_Core_Model_Resource_Db_Abstract

public function save(Mage_Core_Model_Abstract $object)
{
    ...
    //any conditional will eventually call for:
    $this->_prepareDataForSave($object);
    ...
}

protected function _prepareDataForSave(Mage_Core_Model_Abstract $object)
{
    return $this->_prepareDataForTable($object, $this->getMainTable());
} 
```

* * *

```
Mage_Core_Model_Resource_Abstract

protected function _prepareDataForTable(Varien_Object $object, $table)
{
    $data = array();
    $fields = $this->_getWriteAdapter()->describeTable($table);
    foreach (array_keys($fields) as $field) {
        if ($object->hasData($field)) {
            $fieldValue = $object->getData($field);
            if ($fieldValue instanceof Zend_Db_Expr) {
                $data[$field] = $fieldValue;
            } else {
                if (null !== $fieldValue) {
                    $fieldValue   = $this->_prepareTableValueForSave($fieldValue, $fields[$field]['DATA_TYPE']);
                    $data[$field] = $this->_getWriteAdapter()->prepareColumnValue($fields[$field], $fieldValue);
                } else if (!empty($fields[$field]['NULLABLE'])) {
                    $data[$field] = null;
                }
            }
        }
    }
    return $data;
} 
```

* * *

见行：`$fields = $this->_getWriteAdapter()->describeTable($table);`

```
Varien_Db_Adapter_Pdo_Mysql

public function describeTable($tableName, $schemaName = null)
{
    $cacheKey = $this->_getTableName($tableName, $schemaName);
    $ddl = $this->loadDdlCache($cacheKey, self::DDL_DESCRIBE);
    if ($ddl === false) {
        $ddl = parent::describeTable($tableName, $schemaName);
        /**
         * Remove bug in some MySQL versions, when int-column without default value is described as:
         * having default empty string value
         */
        $affected = array('tinyint', 'smallint', 'mediumint', 'int', 'bigint');
        foreach ($ddl as $key => $columnData) {
            if (($columnData['DEFAULT'] === '') && (array_search($columnData['DATA_TYPE'], $affected) !== FALSE)) {
                $ddl[$key]['DEFAULT'] = null;
            }
        }
        $this->saveDdlCache($cacheKey, self::DDL_DESCRIBE, $ddl);
    }

    return $ddl;
} 
```

正如我们所见：

`$ddl = $this->loadDdlCache($cacheKey, self::DDL_DESCRIBE);`

将尝试从缓存中加载模式。

如果该值不存在：`if ($ddl === false)`

它将创建一个：`$this->saveDdlCache($cacheKey, self::DDL_DESCRIBE, $ddl);`

因此，如果我们保存要更改的模型（添加列等），就会发生这个问题中出现的问题。

因为它曾经是`$model->save()`，架构将被缓存。后来在他添加新列并“保存”后，它将从缓存中加载模式（不包含新列）并导致：新列的数据未能保存在数据库中

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T22:43:10.723

删除 var/cache/* - 即使新列已添加到 MySQL 表中，Magento 也会缓存您的 DB 模式。

# c# - 多对多映射未创建正确的表

> ID：12205252
> 
> 赞同：1
> 
> 时间：2012-08-30T20:48:01.557
> 
> 标签：c#, .net, ef-code-first, entity-framework-5

我有一个**模板**类

```
public class Template
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Category> Categories { get; set; }
    public virtual Template RelatedTemplate { get; set; }
    public virtual Field RelatedTemplatePrimaryField { get; set; }
    public virtual ICollection<Field> Fields { get; set; }
} 
```

还有一个**Field**类

```
public class Field
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int Min { get; set; }
    public int Max { get; set; }
    public bool AllowEmpty { get; set; }
    public bool IsCollection { get; set; }
    public virtual ICollection<Template> Templates { get; set; }
} 
```

问题是它没有创建多对多关系，它只是在字段表上添加了一个 FK，我想要一个多对多关系

```
Fields ICollection<Field> Fields 
```

和

```
ICollection<Template> Templates 
```

编辑：如果我删除

```
public virtual Template RelatedTemplate { get; set; }
public virtual Field RelatedTemplatePrimaryField { get; set; } 
```

它有效......有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:00:49.600

在这种情况下，您必须帮助 EF 正确识别您的关系。您可以通过数据注释来做到这一点：

```
[InverseProperty("Fields")]
public virtual ICollection<Template> Templates { get; set; } 
```

或通过流利的API：

```
modelBuilder.Entity<Template>()
            .HasMany(t => t.Fields)
            .WithMany(f => f.Templates); 
```

# ruby-on-rails - 这个规范和控制器代码有什么问题？

> ID：12205253
> 
> 赞同：1
> 
> 时间：2012-08-30T20:48:07.997
> 
> 标签：ruby-on-rails, ruby, rspec

我正在尝试使用 rspec 测试现有的 rails 项目。我想测试一个控制器，但遇到一个我无法解决的错误：S

这是我的规格代码；

```
require 'spec_helper'

describe BriefNotesController do

  before(:all) do
    @customer=Factory(:customer)
    @project=Factory(:project_started, :owner => @customer)
  end

  context 'get :new' do

    it 'should redirect to login page for not signed in users' do
      get :new, :project_id => @project.id
      response.should redirect_to("/kullanici-girisi")
    end

    it 'should be success and render new brief note page for project owner' do
      sign_in @customer
      get :new, :project_id => @project.id
      response.should be_success
    end

  end

end 
```

这是我的控制器代码；

```
class BriefNotesController < ApplicationController
  before_filter :authenticate_user!
  before_filter :find_project

  def new
    @brief_note = @project.brief_notes.new
  end

  def create
    @brief_note = @project.brief_notes.build(params[:brief_note])
    if @brief_note.save
      redirect_to brief_project_path(@project)
    else
      render :action => :new
    end
  end

private
  def find_project
    @project = current_user.projects.find_by_cached_slug([params[:project_id]])
  end
end 
```

我认为 current_user.projects.find_by_cached_slug 方法不起作用。所以这是错误；

```
Failures:

  1) BriefNotesController get :new should be success and render new brief note page for         project owner
 Failure/Error: get :new, :project_id => @project.id
 NoMethodError:
   undefined method `brief_notes' for nil:NilClass
 # ./app/controllers/brief_notes_controller.rb:6:in `new'
 # ./spec/controllers/brief_notes_controller_spec.rb:19:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:36:36.880

错误来自您的`find_project`过滤器：`find_by_cached_slug`返回一个 nil，它被分配给`@project`，并且在调用它时触发未定义的方法错误`brief_notes`（在`new`操作中）。

根据您的规范描述，我假设它甚至不应该执行`new`代码，而是重定向到`authenticate_user!`? 我自己不使用设计（这是一种设计方法，对吗？）所以我不确定该方法的细节，但我认为这就是你的问题所在。

我认为问题不在于您的 FactoryGirl 语法，该语法已被弃用，但仍应有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T15:50:25.473

如果没有关于您的模型的更多信息，我不能肯定地说，但可能的罪魁祸首是您将 @project.id 作为请求参数传递，但您正在通过 cached_slug 进行查找。请改用@project.to_param。

# php - 将数组拆分为子数组

> ID：12205255
> 
> 赞同：4
> 
> 时间：2012-08-30T20:48:08.807
> 
> 标签：php, arrays

我想拆分一个数组：

```
$o = json_decode('[{"id":"1","color":"green"},{"id":"2","color":"green"},{"id":"3","color":"yellow"},{"id":"4","color":"green"}]'); 
```

根据每个item的颜色属性，填充对应的子数组

```
$a = array("green", "yellow", "blue");

function isGreen($var){
    return($var->color == "green");
}

$greens = array_filter($o, "isGreen");
$yellows = array_filter($o, "isYellow");
// and all possible categories in $a.. 
```

my`$a`的长度 > 20，并且可以增加更多，所以我需要一种通用的方法而不是手动编写函数

似乎不存在一个函数 array_split 来生成所有过滤的数组
，否则我可能需要一种 lambda 函数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T21:00:10.127

您可以执行以下操作：

```
$o = json_decode('[{"id":"1","color":"green"},{"id":"2","color":"green"},{"id":"3","color":"yellow"},{"id":"4","color":"green"}]');

$greens = array_filter($o, function($item) {
    if ($item->color == 'green') {
        return true;
    }

    return false;
}); 
```

或者，如果您想创建一些真正通用的东西，您可以执行以下操作：

```
function filterArray($array, $type, $value)
{
    $result = array();
    foreach($array as $item) {
        if ($item->{$type} == $value) {
            $result[] = $item;
        }
    }

    return $result;
}

$o = json_decode('[{"id":"1","color":"green"},{"id":"2","color":"green"},{"id":"3","color":"yellow"},{"id":"4","color":"green"}]');
$greens = filterArray($o, 'color', 'green');
$yellows = filterArray($o, 'color', 'yellow'); 
```

在我的第二个示例中，您可以只传递数组并告诉函数根据什么值过滤（例如颜色或其他一些未来属性）。

*请注意，我没有做任何错误检查属性是否真的存在*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:59:45.213

我不会走上手动或动态创建大量函数的道路。

这是我的想法，并且可以修改设计以使过滤器可以链接：

```
<?php
class ItemsFilter
{
    protected $items = array();

    public function __construct($items) {
        $this->items = $items;
    }

    public function byColor($color)
    {
        $items = array();

        foreach ($this->items as $item) {
            // I don't like this: I would prefer each item was an object and had getColor()
            if (empty($item->color) || $item->color != $color)
                continue;

            $items[] = $item;
        }

        return $items;
    }
}

$items = json_decode('[{"id":"1","color":"green"},{"id":"2","color":"green"},{"id":"3","color":"yellow"},{"id":"4","color":"green"}]');
$filter = new ItemsFilter($items);
$greens = $filter->byColor('green');

echo '<pre>';
print_r($greens);
echo '</pre>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-22T23:22:05.390

如果您需要更多参数，可以使用此函数：

```
function splitArray($array, $params) {
    $result = array();

    foreach ($array as $item) {

        $status = true;

        foreach ($params as $key => $value) {
            if ($item[$key] != $value) {
                $status = false;
                continue;
            }
        }

        if ($status == true) {
            $result[] = $item;
        }
    }

    return $result;
}

$greensAndID1 = splitArray($o, array('color' => 'green', 'id' => 1)); 
```

# eclipse - gdb 在 Eclipse 中失败

> ID：12205256
> 
> 赞同：4
> 
> 时间：2012-08-30T20:48:08.863
> 
> 标签：eclipse, gdb, scons, eclipse-cdt

这是工具堆栈： 安装在 Windows 7 (x64) 上的是带有 CDT 和[SConsolidator](http://sconsolidator.com/)插件的 Eclipse (Juno x64)。下面是安装了 64 位支持的[TDM-GCC (x64) 包。](http://tdm-gcc.tdragon.net/download)

如果我构建一个 64 位应用程序并使用 Eclipse（它使用与 GCC 捆绑的 gdb）对其进行调试，它构建时不会出错并且调试良好。

当我构建一个 32 位应用程序并尝试使用 Eclipse 对其进行调试时，它构建良好但 gdb 失败：

```
gdb: unknown target exception 0x4000001f... 
```

通过命令行使用相同的 gdb 调试它可以正常工作。

关于如何解决这个问题的任何想法？

仅供参考：以下是导致 gdb 异常的一些警告：

```
warning: `C:\Windows\system32\ntdll.dll': Shared library architecture i386:x86-64 is not compatible with target architecture i386.
warning: `C:\Windows\SYSTEM32\wow64.dll': Shared library architecture i386:x86-64 is not compatible with target architecture i386.
warning: `C:\Windows\SYSTEM32\wow64win.dll': Shared library architecture i386:x86-64 is not compatible with target architecture i386.
warning: `C:\Windows\SYSTEM32\wow64cpu.dll': Shared library architecture i386:x86-64 is not compatible with target architecture i386.
warning: Could not load shared library symbols for ntdll32.dll.
Do you need "set solib-search-path" or "set sysroot"?
warning: Could not load shared library symbols for WOW64_IMAGE_SECTION.
Do you need "set solib-search-path" or "set sysroot"?
warning: Could not load shared library symbols for WOW64_IMAGE_SECTION.
Do you need "set solib-search-path" or "set sysroot"?
warning: Could not load shared library symbols for NOT_AN_IMAGE.
Do you need "set solib-search-path" or "set sysroot"?
warning: Could not load shared library symbols for NOT_AN_IMAGE.
Do you need "set solib-search-path" or "set sysroot"? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T21:49:21.270

我在不同的场景中遇到了类似的问题，但我认为该解决方案也应该适用于这里。

[我是从http://www.equation.com/servlet/equation.cmd?fa=gdb](http://www.equation.com/servlet/equation.cmd?fa=gdb)下载的gdb.exe来调试一个C++ 程序。我首先尝试了 64 位，因为我的电脑是 64 位的，但我得到了与上面 Paul 相同的错误。然后我尝试了 32 位 gdb.exe 并且它有效。

我还关注了 Paul 提供的链接，并且还有适用于 32 位的捆绑包。所以我假设捆绑包取决于应用程序的类型而不是平台的配置。但是，我怀疑 64 位捆绑包是否适用于 32 位架构。我没有尝试过，也不能肯定地说。

我建议安装支持 32 位的包来调试 32 位应用程序。

# php - 如何将参数传递给类构造函数 - 而不是数组

> ID：12205258
> 
> 赞同：0
> 
> 时间：2012-08-30T20:48:12.140
> 
> 标签：php, codeigniter

我在 stackoverflow 上阅读了其他一些关于将参数传递给类库的帖子（例如，[如何将多个参数传递给 CodeIgniter 中的库？](https://stackoverflow.com/questions/9141933/how-to-pass-multiple-parameters-to-a-library-in-codeigniter)），我还阅读了库部分下的用户手册。

我想知道是否可以将参数作为单个变量而不是数组传递？

我的课程——我想在我的 codeigniter 解决方案之外使用——看起来像这样：

```
 <?php

     class ABC
     {

     private $_hostname;
     private $_password;
     private $_username;
     private $_connection;
     private $_data;
     private $_timeout;
     private $_prompt;

public function __construct($hostname, $password, $username = "", $timeout = 10) 

{
    set_include_path(get_include_path() . PATH_SEPARATOR . '/var/www/phpseclib');
    include('Net/SSH2.php');

    $this->_hostname = $hostname;
    $this->_password = $password;
    $this->_username = $username;

} // __construct

    public function connect()
    {
    }

    public function dosomething()
    {
    } 
```

我知道我可以做类似的事情：

```
 $params = array('_hostname' => $ip, '_password' => 'password', '_username' => '');
$this->load->library($classname,$params ); 
```

但我不想使用数组，因为此类将被非 CI 解决方案重用。我尝试恢复使用标准的 include() 语句。所以代码看起来像：

```
 set_include_path(get_include_path() . PATH_SEPARATOR . 'var/www/myCIapp/application/libraries');
      include_once('libraries/'.$classname.'.php'); 
```

但它抱怨说它找不到包含文件。具体消息是：

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：include_once() [function.include]：无法打开“libraries/HP5406_ssh.php”以包含（include_path='.:/usr/share/php:/usr/share/pear:var/www/myCIapp/application/图书馆/'）
> 
> 文件名：models/ss_model.php
> 
> 行号：88

任何建议，将不胜感激。谢谢阅读...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:51:41.627

`APPPATH`使用 CI CONSTANT进行包含的简单方法是圆顶：

```
include_once(APPPATH.'libraries/'.$classname.'.php'; 
```

这个 CONSTANT 由 CodeIgniter 在 index.php 中设置，因此您知道它将始终指向您的应用程序目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T00:00:59.110

包含不起作用的解决方案是将包含语句更改为：

```
 include_once dirname(__FILE__) . '/../libraries/'.$classname.'.php'; 
```

我假设它会自动从当前文件的位置开始。但事实并非如此。上面的行将强制它从当前文件的位置开始。

# css - CSS - Bootstrap：低于 767px 视口每行 2 个（或更多）而不是 1 个

> ID：12205260
> 
> 赞同：5
> 
> 时间：2012-08-30T20:48:28.703
> 
> 标签：css, twitter-bootstrap, responsive-design

Bootstrap 有一个默认方法，或者我如何编辑以在 767px（移动）以下执行此操作，每个跨度在一行中不会变为 100%？我只希望他们达到 50% ......例如有 2 个并排的跨度，而不是一个在另一个下方。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T22:56:55.520

我知道这个问题很老，但我在寻找解决同样问题的方法时遇到了它，然后我自己想通了。我想我应该发布我的解决方案，以防其他人找到这个页面。

我的问题是我有一个响应式引导页面，其中包含四列（四个 span3 列表项）和另一个包含三列（三个 span4 列表项）的页面。我希望它们在 767 像素以下时变成两列。对于四列页面，我的结构是这样的，行流体在 span12 内重复了几次：

```
<div class="span12">
    <div class="row-fluid">
        <ul class="thumbnails">
            <li class="span3"></li>
            <li class="span3"></li>
            <li class="span3"></li>
            <li class="span3"></li>
        </ul>
    </div>
  </div> 
```

对于三列页面，我的结构是这样的，在 span12 中再次使用 row-fluid 重复多次：

```
<div class="span12">
    <div class="row-fluid">
        <ul class="thumbnails">
            <li class="span4"></li>
            <li class="span4"></li>
            <li class="span4"></li>
        </ul>
    </div>
</div> 
```

该结构取自关于缩略图的 Bootstrap 部分。这是我添加的 CSS 以使它们都变成低于 767px 的两列：

```
@media screen and (max-width: 767px) {
/* remove clear from each ul to stop them from breaking into rows */
ul.thumbnails::after {
    clear: none;
}

/* make the width of each span equal to 47% instead of 100%.
You could make it closer to 50% if you have no borders or padding etc. */
ul.thumbnails li[class*="span"]{
    width: 47%; 
    float: left;
}
    // select the second span in each row (ul) on the 3 column page
[class*="span"] .span4:nth-child(2),
    // select the first span in the even rows on the 3 column page
[class*="span"] .row-fluid:nth-child(even) .span4:nth-child(1),
    // select the even spans in each row on the 4 column page
[class*="span"] .span3:nth-child(even)
{
    float: right; //float them all to the right
}
} 
```

如果您不使用相同的结构，则必须调整这些选择器。它们也不是最优雅的选择器，所以如果你能写得更好，请这样做。一旦我让他们工作，我就再也懒得和他们一起玩了。我希望这可以帮助别人！

[编辑] 我刚刚注意到我实际上在所有代码中都使用了流体行，而不是行流体......所以你可能需要将它更改为那个。不过，fluid-row 在我的样式表中没有任何规则。

链接到在 CSS 中使用正确的选择器：http: [//jsfiddle.net/rUCgS/4/](http://jsfiddle.net/rUCgS/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:06:19.427

我只是修改了`.row-fluid [class*="span"]`inside的行为，`@media (max-width: 767px) { ... }`并在我点击`max-width: 480px`. 我还在`.span-control`一行的前 2 个跨度中添加了一个类，以确保它们都删除了左边距。

应该看起来像[这样](http://jsfiddle.net/XXKh5/)

这些`!important`标签对 jsfiddle 很有用，但您的样式表中不需要它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T20:55:12.907

尝试使用 row-fluid 代替带有两个 span6 的 row。

HTML：

```
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.1.0/css/bootstrap-combined.min.css" rel='stylesheet' type='text/css' />
<div id='wrap' class='container'>
        <div id='row1' class='row-fluid'>
            <div id='box1' class='span6'>
               box1
            </div>
             <div id='box2' class='span6'>
                 box2
                </div>
        </div>
</div> 
```

CSS：

```
#wrap{
    background-color:black;
    height:50px;
}
#box1{
        background-color:green;
}

#box2{
        background-color:red;
} 
```

在这里检查[jsFiddle](http://jsfiddle.net/maxisam/ZjRZZ/6/)

# c# - HttpException 未被捕获

> ID：12205267
> 
> 赞同：1
> 
> 时间：2012-08-30T20:48:41.757
> 
> 标签：c#, asp.net, .net, sql-server-2005, iis-6

我有这个例外：

```
Server Error in '/datalab' Application.

Request timed out.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: Request timed out.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[HttpException (0x80004005): Request timed out.] 
```

但是我在 /datalab 和 /datalab/powerstats 目录中添加了一个 Global.asax 文件（datalab 目录是根目录，而超时的页面是 datalab/powerstats/output.aspx）：

```
<%@ Application Language="C#" %>

<script runat="server">

void Application_Error(object sender, EventArgs e) 
{ 
    Exception exc = Server.GetLastError();

  // Handle HTTP errors
  if (exc.GetType() == typeof(HttpException))
  {
  Response.Write("<h2>Global Page Error</h2>\n");

        // The Complete Error Handling Example generates
        // some errors using URLs with "NoCatch" in them;
        // ignore these here to simulate what would happen
        // if a global.asax handler were not implemented.
        if (exc.Message.Contains("NoCatch") || exc.Message.Contains("maxUrlLength"))
            return;

        //Redirect HTTP errors to HttpError page
        //Server.Transfer("HttpErrorPage.aspx");
        return;
    }

}

</script> 
```

我如何捕捉到这个异常？为什么不被caought？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:51:36.957

`Application_Error`当发生未处理的异常时调用该事件。

您无法返回并更改响应，因为内部服务器错误 500 响应已发送到客户端。

您的问题的答案是修复超时的原因，或者以编程方式增加超时期限。要在 web.config 中执行此操作，请尝试添加：

```
<httpRuntime executionTimeout="<numOfSeconds>" /> 
```

请参阅[http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/e1f13641(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:52:28.923

您以前使用过堆栈跟踪吗？

Look up MSDN documentation on how to use them. They have different type of stack trace depending on your application.

# sql - Caché SQL - 将分钟格式转换为小时

> ID：12205271
> 
> 赞同：0
> 
> 时间：2012-08-30T20:49:07.130
> 
> 标签：sql, intersystems-cache

我正在使用一个已经存在的表，该表的列以某种分钟格式格式化。看起来它应该是 hh:mm，但它并不完全是。例如，它应该是 03:00，它说 01:80 持续 180 分钟。或者对于 1:30，它表示 00:90。如何将这些列转换为 hh:mm 格式？任何帮助都会很棒，我正在努力！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:30:45.057

以下优雅的代码：

```
SELECT ((myField*100)+RIGHT(myField,2))/60 
         || ':' 
         || RIGHT('00'(((myField*100)+RIGHT(myField,2))#60),2) 
From myTable 
```

似乎工作。

# php - 如何比较数组 a 和 b 并创建新数组 c（a 和 b 中的项目）、d（a 中的项目，而不是 b 中的项目）和 e（b 中的项目，而不是 a 中的项目）？

> ID：12205272
> 
> 赞同：0
> 
> 时间：2012-08-30T20:49:15.253
> 
> 标签：php

考虑以下数组。他们代表 和 的前 5 名表现最佳的`yesterday`员工`today`：

```
$yesterday = array(
   6 => array('name' => 'Tod', 'score' => 9.5),
  12 => array('name' => 'Jim', 'score' => 7.3),
  18 => array('name' => 'Bob', 'score' => 8.4),
   7 => array('name' => 'Jan', 'score' => 6.2),
  20 => array('name' => 'Sam', 'score' => 6.0),
);

$today = array(
   6 => array('name' => 'Tod', 'score' => 9.1),
   9 => array('name' => 'Jef', 'score' => 9.3),
  35 => array('name' => 'Axl', 'score' => 7.6),
   7 => array('name' => 'Jan', 'score' => 6.5),
  41 => array('name' => 'Ted', 'score' => 8.0),
); 
```

我需要从上面编译的 3 个新数组：`$stay`持有​​昨天进入前 5 名的员工，今天仍然是，`$gone`，持有昨天进入前 5 名但不再是的员工，以及`$new`，持有新人到`$today`榜首-5 名单：

```
// notice that the scores in $stay come from $today, not $yesterday
// also notice that index keys are maintained

$stay = array(
  6 => array('name' => 'Tod', 'score' => 9.1),
  7 => array('name' => 'Jan', 'score' => 6.5)

);

$gone = array(
  12 => array('name' => 'Jim', 'score' => 7.3),
  18 => array('name' => 'Bob', 'score' => 8.4),
  20 => array('name' => 'Sam', 'score' => 6.0)
);

$new = array(
   9 => array('name' => 'Jef', 'score' => 9.3),
  35 => array('name' => 'Axl', 'score' => 7.6),
  41 => array('name' => 'Ted', 'score' => 8.0)
); 
```

我不知道如何在这里建立逻辑。我从一个循环开始，但没有走远。我相信它应该是这样的。你能帮我解决这个问题吗？

```
for ($i = 0; $i < count($yesterday); $i++) {
  // I'm comparing key numbers, but not key values
  // how do I compare key values?
  if (in_array($yesterday[$i], $today) {
    // add to $stay array
  }
  else {
    // add to $gone array
  }
}

for ($i = 0; $i < count($today); $i++) {
  if (!in_array($today[$i], $yesterday) {
    // add to $new array
  }
} 
```

PS我不知道这是否有帮助，但总是`$yesterday`等`$today`长（在这种情况下，5个项目，但其他情况下两个数组都可以容纳7或10个项目）。`$stay`和的组合项在`$new`逻辑上总是等于`$yesterday`或`$today`:-)中的项数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:58:36.617

[https://www.php.net/manual/function.array-intersect.php](https://www.php.net/manual/function.array-intersect.php)
[https://www.php.net/manual/function.array-diff.php](https://www.php.net/manual/function.array-diff.php)

```
$c = array_intersect($a, $b);
$d = array_diff($a, $b);
$e = array_diff($b, $a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:18:58.050

我认为这应该可行，但我认为这不是最快的方法。

```
$stay = array();
$gone = array();
$new = array();
$found = false;
foreach($yesterday as $yKey)
{         
  $found = false;
  foreach($today as $tKey)
  {
    if($tKey['name'] == $yKey['name'])
    {
      $found = true;
      $stay[]['name'] = $tKey['name'];  
      break;
    }  
    else
    {
      $found = false;
    }
  }
  if($found == false)
    {
      $gone[]['name'] = $yKey['name'];
    }  
}

foreach($today as $tKey)
{
  $found = false;
  foreach($yesterday as $yKey){
    if($yKey['name'] == $tKey['name'])
    {
      $found = true;
      break;
    }  
    else{
      $found = false;
    }
  }
  if($found == false)
    {
      $gone[]['name'] = $tKey['name'];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:28:56.620

这可以使用 PHP 的许多强大的[数组函数](http://php.net/manual/en/ref.array.php)中的几个来完成：

```
$stay = array_intersect_assoc($yesterday, $today);
$gone = array_diff_assoc($yesterday, $today);
$new = array_diff_assoc($today, $yesterday); 
```

# d3.js - 以编程方式在 d3.js 或 graphviz 或类似工具中绘制框图

> ID：12205273
> 
> 赞同：4
> 
> 时间：2012-08-30T20:49:20.420
> 
> 标签：d3.js, graphviz

我想以编程方式绘制控制理论和系统分析中使用的类型的框图。参见例如[http://en.wikibooks.org/wiki/Control_Systems/Block_Diagrams](http://en.wikibooks.org/wiki/Control_Systems/Block_Diagrams)。

我找到的最好的工具是[http://blockdiag.com/](http://blockdiag.com/)但是边缘标签不是很好：我需要不在盒子里和边缘一侧的标签。

为了了解这个问题，我得到（来自blockdiag）： http://interactive.blockdiag.com/?compression=deflate&src= [eJyr5lJQcFTQtVNwAhHO1kAuGIC5LgrROYlJqTm2SklKsXApF4hymFQiSKoWABD8D8U](http://interactive.blockdiag.com/?compression=deflate&src=eJyr5lJQcFTQtVNwAhHO1kAuGIC5LgrROYlJqTm2SklKsXApF4hymFQiSKoWABD8D8U)

相关qns： [电路/框图绘图](https://stackoverflow.com/questions/6422603/circuit-block-diagram-drawing/12205193#12205193)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T17:57:23.850

您可以使用以下在线工具以编程方式绘制带有 LaTeX 样式 MathJax 标签的 SVG 框图：http: [//puzlet.com/m/b00b1](http://puzlet.com/m/b00b1)。这里的初始框图示例是一个控制系统（[http://en.wikipedia.org/wiki/State_observer](http://en.wikipedia.org/wiki/State_observer)）。它的来源是 CoffeeScript。您编辑图表源以满足您的需要或从新的画布开始，然后将图表导出为 SVG（独立文件或保存在服务器上的图表的链接）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-31T16:54:15.910

参加聚会太晚了，但现在您不必在 d3.js 和 graphviz 之间做出选择。您可以同时使用[d3-graphviz](https://github.com/magjac/d3-graphviz)：

```
<!DOCTYPE html>
<meta charset="utf-8">
<body>
<script src="//d3js.org/d3.v4.min.js"></script>
<script src="http://viz-js.com/bower_components/viz.js/viz-lite.js"></script>
<script src="https://github.com/magjac/d3-graphviz/releases/download/v0.1.2/d3-graphviz.min.js"></script>
<div id="graph" style="text-align: center;"></div>
<script>

  var dot = `
digraph G {
    graph [rankdir=LR]
    node [shape="polygon"]
        A -> B -> C;
        B -> D [label="b"];
        D -> B [label="a"];
}
`;

  d3.select("#graph").graphviz()
    .renderDot(dot);

</script>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T08:37:01.917

那么 d3.js 和 graphviz 都应该能够产生您正在寻找的那种结果。如果您的问题是选择哪一个，从 gaphviz 生成 png 或 pdf 文件更容易，但使用 d3.js 创建交互式可视化更容易。

# jquery - 使用 Jsrender 遍历嵌套的 json 模型

> ID：12205286
> 
> 赞同：2
> 
> 时间：2012-08-30T20:49:55.977
> 
> 标签：jquery, python, jsrender

我从服务器发送了以下 json，我一直在尝试使用 jsrender 对其进行迭代但没有成功

```
{
"1": {
    "username": "one",
    "sent_email": false,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": "email",
    "date_registered": null,
    "key": "key",
    "password": "password",
    "id": 1
},
"2": {
    "username": "Madawar",
    "sent_email": true,
    "group": "admin",
    "date_activated": "2012-07-17T00:00:00",
    "activated_email": true,
    "email": "dennis.wanyoike@gmail.com",
    "date_registered": "2012-08-22T11:21:39",
    "key": "e4hVRItub_A=",
    "password": "$2a$12$F3aBLpF.MyyiVDAocPzE9uJn0K5DZ1V4qRim54wl8f3tEv.7VC4ji",
    "id": 2
},
"3": {
    "username": "one",
    "sent_email": false,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": "email",
    "date_registered": null,
    "key": "key",
    "password": "password",
    "id": 3
},
"4": {
    "username": "one",
    "sent_email": false,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": "email",
    "date_registered": null,
    "key": "key",
    "password": "password",
    "id": 4
},
"5": {
    "username": "one",
    "sent_email": false,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": "email",
    "date_registered": null,
    "key": "key",
    "password": "password",
    "id": 5
},
"6": {
    "username": "one",
    "sent_email": false,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": "email",
    "date_registered": null,
    "key": "key",
    "password": "password",
    "id": 6
},
"7": {
    "username": "one",
    "sent_email": false,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": "email",
    "date_registered": null,
    "key": "key",
    "password": "password",
    "id": 7
},
"10": {
    "username": "Madawar12",
    "sent_email": true,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": "dennis.wanyoike@gmail12.com",
    "date_registered": "2012-08-30T17:13:07",
    "key": "JehBfVpoheE=",
    "password": "$2a$12$V04xpEqCWSLIWl0rte2U7OQC5/TqFcDehKJiuiqRALiW3uEYTBFsK",
    "id": 10
},
"11": {
    "username": null,
    "sent_email": true,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": null,
    "date_registered": "2012-08-30T17:16:32",
    "key": "MG7kgSUzNK0=",
    "password": "$2a$12$6gJa1L0MZn9HB/fZNk1cXe1RDjAIOaAv1ASTgBJu.OrhOMpNfCkOG",
    "id": 11
},
"12": {
    "username": null,
    "sent_email": true,
    "group": "blogger",
    "date_activated": null,
    "activated_email": false,
    "email": null,
    "date_registered": "2012-08-30T17:17:30",
    "key": "qJisSUS8osQ=",
    "password": "$2a$12$tfDdBODJFTz/afhAvm7EjOpH.Zp.Q8Jw.h312uFZCwJQTlKRI0k6G",
    "id": 12
} 
```

}

数字 1-12 代表记录号，不一定是连续的，是否可以使用 jsrender 显示此记录，或者我是否必须更改服务器的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T22:51:51.260

为了给你一些想法，看看这个[示例](https://github.com/BorisMoore/jsrender/blob/master/demos/scenarios/03_iterating-through-fields-scenario.html)，它展示了 JsRender 中迭代字段的几种方法。您可以将这些方法应用于您的场景。（现场演示在[这里](http://borismoore.github.com/jsrender/demos/scenarios/03_iterating-through-fields-scenario.html)）。

***更新***：当前文档在这里： [http: //www.jsviews.com/#propstag](http://www.jsviews.com/#propstag)。

至于迭代到任何深度，您确实可以`{{props}}`在递归使用的模板或标签中使用 - 因此将数组和对象的层次结构遍历到任何深度。

这里有一个[编码](//www.jsviews.com/download/sample-tag-controls/jsonview/jsonview.js)`{{jsonview/}}`的标签可以做到这一点，并在[这个 jsfiddle 示例](https://jsfiddle.net/BorisMoore/dg7x8mrc/)中使用，例如......

在这种情况下，它使用数据链接，因此当您以任何方式更改“树”中的数据时，jsonview 输出会增量更新。相同的 {{jsonview}} 可以仅与 JsRender 一起使用。（在这种情况下，您可以根据需要更改数据链接`{^{...}}`标签`{{...}}`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T20:54:48.827

您可以将其渲染如下

var collection = json
$.each(collection, function(key,value){
alert(key + "-----"+ value);
$.each(value,function(k,v){ alert(k+"+ +++++++"+v)}); });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T13:08:08.483

我使用了@BorisMoore 的答案并制作了一个模板，将 JSON 中的所有内容都放入一个表中：

```
<script type="text/x-jsrender" id="prooops">
  <table>
    {{props #data}}
      <tr>
        <td>{{>key}}</td>
        <td>
          {{props prop}}
            {{>key}}: {{>prop}}<br/>
          {{/props}}
        </td>
      </tr>
    {{/props}}
  </table>
</script> 
```

[这](https://jsfiddle.net/gradient/rfjwsq7y/)是一个 jsFiddle 向您展示它是如何工作的。

公平地说，这是一个 4 岁的问题，我怀疑你仍然有这个问题。只是把它放在这里向后代展示它是如何完成的

# php - Wordpress：带有“&orderby=date&order=asc”的类别集合，但顺序拒绝上升

> ID：12205287
> 
> 赞同：0
> 
> 时间：2012-08-30T20:49:57.080
> 
> 标签：php, wordpress-theming, wordpress

这是我试图从[这个](http://wordpress.org/support/topic/display-the-posts-of-one-category-in-a-page-solved)主题使用的一些代码：

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<?php endwhile; else: endif; ?>

<?php query_posts('category_name='.get_the_title().
'&order=ASC&orderby=date&posts_per_page=10'.'&post_status=publish,future');?>

<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
<p><?php the_content(); ?>
<?php endwhile; else: endif; ?> 
```

到帖子加载时，使用“orderby”是否为时已晚？这就是为什么它顽固地保持“最新帖子优先”的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:54:06.523

先尝试orderby，然后再订购。

```
&orderby=date&order=ASC 
```

# android - 使用 soundpool 和 setOnLoadCompleteListener 的问题

> ID：12205289
> 
> 赞同：1
> 
> 时间：2012-08-30T20:50:06.570
> 
> 标签：android, soundpool

所以我使用 soundpool 在计时器结束时播放声音。onCreate 我正在这样做

```
int mySoundId;
SoundPool soundPool;

// load sound

soundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);

AssetManager am = this.getAssets();

//Use in whatever method is used to load the sounds
try {
    mySoundId = soundPool.load(am.openFd("alarm.wav"), 1);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我得到

> 样本 0 未就绪

所以我想我必须使用

```
soundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
    @Override
    public void onLoadComplete(SoundPool soundPool, int mySoundId, int status) {
        loaded = true;
    }
}); 
```

但我的问题是，setOnLoadCompleteListener 给了我以下错误

> SoundPool 类型中的方法 setOnLoadCompleteListener(SoundPool.OnLoadCompleteListener) 不适用于参数 (new OnLoadCompleteListener(){})

我尝试了各种[方法](https://stackoverflow.com/questions/7637144/android-requires-compiler-compliance-level-5-0-or-6-0-found-1-7-instead-plea)，例如“Android 工具 -> 修复项目属性”和摆弄“属性 -> Java 编译器”，但没有任何乐趣。我的 API 范围是 10 - 16，所以应该没问题。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:23:50.163

使用下面的代码。也许你的进口是错误的。无论如何，这应该工作

```
soundPool.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {
    @Override
    public void onLoadComplete(SoundPool soundPool, int mySoundId, int status) {
        loaded = true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-25T15:40:48.367

我遇到了同样的问题，然后我注意到我只需要导入**android.media.SoundPool.OnLoadCompleteListener** ...

# c# - 自定义标签到 PDF

> ID：12205290
> 
> 赞同：3
> 
> 时间：2012-08-30T20:50:11.227
> 
> 标签：c#, .net, pdf, pdf-generation

我有以下要求。我将不得不生成一个自定义标签，其中包含 PDF 的用户信息。

这是一个多行标签，每行都有不同的文本格式和不同的字体大小（请参阅附件 - 下文）。

![例子](../Images/cbd205b099e020376f27eb942ad9f0a2.png)

图片网址：[http](http://www34.zippyshare.com/v/84819344/file.html) ://www34.zippyshare.com/v/84819344/file.html （因为堆栈溢出不允许我添加图片）

我可以实现这样的目标吗？如何实现？

我使用 .net framework 3.5 和 Visual Studio 2010 和 C#。请提供 C# 中的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:57:19.573

您应该查看[iTextSharp](http://sourceforge.net/projects/itextsharp/)库。它会做你需要的，而且不是特别复杂。对于开源软件，它也是免费的（AGPL 许可）。

# javascript - 当源工作表添加了一行时，如何编写在一个工作表中添加一行的脚本？

> ID：12205291
> 
> 赞同：0
> 
> 时间：2012-08-30T20:50:19.180
> 
> 标签：javascript, function, google-apps-script, google-sheets

我有一个填充谷歌电子表格（源表）的谷歌表单。我找到并自定义了一个脚本，以将某些列（整体）从源工作表中拉到一个新的选项卡/工作表中。显然，两个工作表中的行数必须相同，脚本才能正常运行。如果不是，它会返回一个错误。每次提交新表单时，都会在源工作表中添加一行，使两个工作表不同步并破坏脚本。

我想帮助弄清楚我需要向现有脚本添加什么功能（或者我可以对其进行哪些更改），因此当源工作表中出现新行时（因为已提交表单），会出现一个空白行在目标表中。

我需要调整脚本或添加新功能吗？

```
function importFunction(a) {
  var ss = SpreadsheetApp.openById("0ApTaY3v27-UqdElwZTBvanNpaC1UckpxaTJRZS1XNWc");
  var sourceSheet = ss.getSheets()[0];
  var ss2 = SpreadsheetApp.openById("0ApTaY3v27-UqdElwZTBvanNpaC1UckpxaTJRZS1XNWc");
  var targetSheet = ss2.getSheets()[1];
  var values1 = sourceSheet.setActiveSelection("C:C").getValues();
  var values2 = sourceSheet.setActiveSelection("AD:AD").getValues();
  var values3 = sourceSheet.setActiveSelection("D:E").getValues();
  var values4 = sourceSheet.setActiveSelection("AE:AE").getValues();
  var values5 = sourceSheet.setActiveSelection("F:H").getValues();
  var values6 = sourceSheet.setActiveSelection("N:U").getValues();
  targetSheet.setActiveSelection("A:A").setValues(values1);
  targetSheet.setActiveSelection("B:B").setValues(values2);
  targetSheet.setActiveSelection("C:D").setValues(values3);
  targetSheet.setActiveSelection("E:E").setValues(values4);
  targetSheet.setActiveSelection("F:H").setValues(values5);
  targetSheet.setActiveSelection("I:P").setValues(values6);
} 
```

根据下面的建议，我尝试将脚本更改为以下内容，但出现错误 - 找不到方法 appendRow()。我该如何解决？

```
 function importFunction(a) {
      var ss = SpreadsheetApp.openById("0ApTaY3v27-UqdElwZTBvanNpaC1UckpxaTJRZS1XNWc");
      var sourceSheet = ss.getSheets()[0];
      var ss2 = SpreadsheetApp.openById("0ApTaY3v27-UqdElwZTBvanNpaC1UckpxaTJRZS1XNWc");
      var targetSheet = ss2.getSheets()[1];
      var targetMax = targetSheet.getMaxRows();
      var values1 = sourceSheet.setActiveSelection("C:C").getValues();
      var values2 = sourceSheet.setActiveSelection("AD:AD").getValues();
      var values3 = sourceSheet.setActiveSelection("D:E").getValues();
      var values4 = sourceSheet.setActiveSelection("AE:AE").getValues();
      var values5 = sourceSheet.setActiveSelection("F:H").getValues();
      var values6 = sourceSheet.setActiveSelection("N:U").getValues();
      if(targetMax == values1.length) {
        targetSheet.setActiveSelection("A:A").setValues(values1);
        targetSheet.setActiveSelection("B:B").setValues(values2);
        targetSheet.setActiveSelection("C:D").setValues(values3);
        targetSheet.setActiveSelection("E:E").setValues(values4);
        targetSheet.setActiveSelection("F:H").setValues(values5);
        targetSheet.setActiveSelection("I:P").setValues(values6);
      }
      else
        targetSheet.appendRow();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:25:45.967

[您可以在使用getMaxRows()](https://developers.google.com/apps-script/class_sheet?hl=fr-FR#getMaxRows)写入值之前简单地检查工作表 SS2 中的可用行数，并将其与数据数组的长度进行比较`value1.length`，然后，根据此比较，最终使用[appendRow()](https://developers.google.com/apps-script/class_sheet?hl=fr-FR#appendRow)添加您需要的行 for下一个循环。

编辑：在您的编辑之后，我进行了进一步测试，它似乎`appendRow()`不像我想的那样工作，它在空白表的开头附加 Rows ......所以我尝试了这个：

```
 if(targetMax < values1.length) {
  var RowsToAdd = values1.length-targetMax
  for(nn=0;nn<RowsToAdd;++nn){targetSheet.insertRowAfter(targetMax)}
  } 
```

直接放在后面`var value6=...`

抱歉这个小错误;-)

# .htaccess - .htaccess 重定向不起作用

> ID：12205293
> 
> 赞同：0
> 
> 时间：2012-08-30T20:50:28.500
> 
> 标签：.htaccess, redirect, joomla

我希望将 URL www.michelenerna.nl 重定向到 www.michelenerna.nl/wycliffe。

实际的 Joomla 路径是 /wycliffe = [http://www.michelenerna.nl/index.php?option=com_content&view=article&id=97&Itemid=249](http://www.michelenerna.nl/index.php?option=com_content&view=article&id=97&Itemid=249)

所以，我想： .htaccess 中的以下几行应该是合适的，但它不起作用。www.michelenerna.nl 仍然指向 www.michelenerna.nl

这是代码：

```
Options SymlinksIfOwnerMatch
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.michelenerna.nl [NC]
RewriteRule ^article(.*)$ http://www.michelenerna.nl/index.php?option=com_content&view=article&id=97&Itemid=249/$1 [R=301,L] 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:54:09.093

以下对我有用：

```
RewriteCond %{HTTP_HOST} ^(www.)?michelenerna.nl$
RewriteRule ^(/)?$ wycliffe [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:24:04.620

尝试使用以下内容：

```
RewriteCond %{HTTP_HOST} ^(www.)?michelenerna.nl$ [NC]
RewriteRule ^(/)?$ wycliffe/index.php [L] 
```

您还可以通过转到“重定向”页面并选择适用于您的选项在您的服务器 cPanel 中实现此目的。

# c++ - 如何从内部运算符构造函数中正确调用复制构造函数？

> ID：12205294
> 
> 赞同：1
> 
> 时间：2012-08-30T20:50:38.753
> 
> 标签：c++, operator-keyword, copy-constructor, function-call

我的代码也可以在[这里](http://pastebin.com/xG3j1epw)找到。

这段代码可以工作（但有很多代码重复）：

```
Employee::Employee(const Employee& x)
{
        name=new char [strlen(x.name)+1];
        strcpy(name, x. name);
        strcpy(EGN, x.EGN);
        salary=x.salary;
}

void Employee::operator=(const Employee& x)
{
        delete[] name;
        name=new char [strlen(x.name)+1];
        strcpy(name, x. name);
        strcpy(EGN, x.EGN);
        salary=x.salary;
}

Employee::Employee(char* n, char* e, double s)
{
        name = new char [strlen(n)+1];
        strcpy(name, n);
        strcpy(EGN, e);
        salary=s;
} 
```

下面是我试图避免写三遍相同的东西......但它不起作用。难道不能让代码更短吗？

```
Employee::Employee(char* n, char* e, double s)
{
        name = new char [strlen(n)+1];
        strcpy(name, n);
        strcpy(EGN, e);
        salary=s;
}

Employee::Employee(const Employee& x)
{
        Employee(x.name, x.EGN, x.salary);
}

void Employee::operator=(const Employee& x)
{
        delete[] name;
        Employee(x);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T20:55:32.963

语言不允许您尝试进行的操作。但是，C++11 允许[*委托构造函数*](http://www.stroustrup.com/C++11FAQ.html#delegating-ctor)，因此您可以执行以下操作：

```
Employee::Employee(const Employee& x) : Employee(x.name, x.EGN, x.salary){} 
```

请注意，在另一个的初始化列表中调用了一个构造函数。

在 C++11 之前，一种选择是从所有构造函数中调用某种类型的初始化函数。但是，这在语义上是不同的，因为函数调用执行的是对成员变量的赋值，而不是初始化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T20:53:51.130

您不能将构造函数作为成员函数调用。您可以创建一个成员函数，并从构造函数和所有其他地方调用它。

```
void Employee::Init(const char* n, const char* e, double s)
{
        name = new char [strlen(n)+1];
        strcpy(name, n);
        strcpy(EGN, e);
        salary=s;
}

void Employee::Init(const Employee &x)
{
        Init(x.name, x.EGN, x.salary);
}

Employee::Employee(char* n, char* e, double s)
{
    Init(n,e,s);
}

Employee::Employee(const Employee& x)
{
     Init(x);
}

void Employee::operator=(const Employee& x)
{
        delete[] name;
        Init(x);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:07:56.070

在 C++11 中试试这个

```
Employee::Employee(char* n, char* e, double s)
{
        name = new char [strlen(n)+1];
        strcpy(name, n);
        strcpy(EGN, e);
        salary=s;
}

// Constructor chaining (delegation) like this.
Employee::Employee(const Employee& x)
    : Employee(x.name, x.EGN, x.salary)
{}

// Use copy and swap for the assignment operator:

// Common convention to return a reference to yourself to allow chaingin.
Employee& Employee::operator=(Employee x)   // Pass by value to get the copy.
{ 
    x.swap(*this);                          // Then swap members
    return *this;
}                                           // Destructor will then cleanup. 
```

# python - 子串提取

> ID：12205296
> 
> 赞同：-3
> 
> 时间：2012-08-30T20:50:52.417
> 
> 标签：python, python-3.x, python-2.7

我有一个以下格式的字符串：

```
00:aa:bb:cc:dd:ee 
```

我需要拆分它并只输出前 3 个字段，即 00:aa:bb。我在用

```
s.split(':')[1:3] 
```

在我的程序中完成这项工作，但它没有帮助。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:52:18.243

几乎：Python 是 0 索引的（从 0 开始计数）：

```
>>> s = '00:aa:bb:cc:dd:ee'
>>> s.split(":")
['00', 'aa', 'bb', 'cc', 'dd', 'ee']
>>> s.split(":")[0:3]
['00', 'aa', 'bb']
>>> s.split(":")[:3]
['00', 'aa', 'bb'] 
```

你可以重新组合它们：

```
>>> ':'.join(s.split(":")[:3])
'00:aa:bb' 
```

如果这是问题所在，您可以查看[此问题](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)以简要回顾 Python 切片的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:53:30.350

你是什​​么意思它没有帮助？是因为结果是一个列表吗？要将其转回字符串，请尝试：

```
':'.join(s.split(':')[0:3]) 
```

还要注意零索引。

# java - 如何使用 String 的 Controller 和 RestTemplate 设置多个参数？

> ID：12205298
> 
> 赞同：2
> 
> 时间：2012-08-30T20:50:58.883
> 
> 标签：java, spring, rest, spring-mvc

您好我需要修改现有的 Rest 接口。旧的 Rest 界面只取一个电话号码然后查找记录。电话号码曾经在表格中是唯一的。现在是电话和号码的组合（batchid）。所以我需要修改服务实现和调用它的客户端。这是旧控制器：

```
@RequestMapping(value="/{phone}", method = RequestMethod.GET)
        @ResponseBody
        public BatchDetail  findByPhone(@PathVariable String phone) {
            return batchDetailService.findByPhone(phone);

        } 
```

这是旧客户访问它的方式：

```
private static final String URL_GET_BATCHDETAIL_PHONE = "http://localhost:8080/Web2Ivr/restful/batchdetail/{phone}";
batchdetail = restTemplate.getForObject(URL_GET_BATCHDETAIL_PHONE, BatchDetail.class, phone);           
batchdetail.setStatus("OK");
restTemplate.put(URL_TO_UPDATE_BATCHDETAIL, batchdetail, batchdetail.getId()) 
```

;

所以我的问题将是如何修改控制器和 restemplate 的客户端调用以支持两个变量，电话和号码（batchid），例如：

```
http://localhost:8080/Web2Ivr/restful/batchdetail/{batchid}/{phone} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:52:59.313

```
@RequestMapping(value="/{batchid}/{phone}", method = RequestMethod.GET)
@ResponseBody
public BatchDetail  findByPhone(@PathVariable String phone, @PathVariable String batchid) {
    return batchDetailService.findByPhone(phone);

} 
```

# vim - 如何在 VIM 中清除函数调用的输出？

> ID：12205299
> 
> 赞同：4
> 
> 时间：2012-08-30T20:51:09.847
> 
> 标签：vim

我知道我的问题标题解释性不够，所以让我试着解释一下。

我创建了一个`vim function`显示我当前电池状态的。我的功能如下：

```
function! BatteryStatus()

     let l:status = system("~/battery_status.sh")
     echo join(split(l:status))

endfunction 
```

我已将上述函数映射为`nnoremap <F3> :call BatteryStatus()<cr>`. 现在，当我按下`F3`它时，它会显示我的电池状态，`Discharging, 56%, 05:01:42 remaining`这是我需要的输出，但我的问题是如何使上述输出消失。

目前发生的情况是在函数调用之后它不断显示输出，我必须手动使用`:echo`来清除命令窗口（`:`）。

因此，需要在我的函数中进行哪些必要的更改，以便我可以实现类似切换的行为。

**电池状态.sh**

```
acpi | awk -F ": " '{print $2}' 
```

PS：这是学习练习的一部分。所以，请不要建议替代品`vim scripts`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T06:07:18.920

切换输出的简单直接方法：

```
let s:battery_status_output_flag = "show"

function! BatteryStatus()

    if s:battery_status_output_flag == "show"
        let l:status = system("~/battery_status.sh")
        echo join(split(l:status))
        let s:battery_status_output_flag = "clear"
    else
        echo ""
        let s:battery_status_output_flag = "show"
    endif

endfunction 
```

注意`s:`前缀，见`:help script-variable`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T00:33:16.653

您可以定义一个`autocmd`：

```
:au CursorHold * redraw! 
```

Vim 在空闲 4 秒后重绘自己（由`updatetime`选项设置）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-22T12:25:37.627

```
vim
function! pseudocl#render#clear()
  echon "\r\r"
  echon ''
endfunction 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-05T09:19:42.917

您只需`Ctrl`+`L`即可清除状态行上的消息。

# c# - 我是否在 EF 中以一种好的方式获得列表

> ID：12205302
> 
> 赞同：2
> 
> 时间：2012-08-30T20:51:31.370
> 
> 标签：c#, entity-framework, entity-framework-4.1

我还是实体框架的新手。如果问题是假的，请原谅我:)
我有一个域类，它从数据库中获取一些数据的列表：

```
public IEnumerable<Item> GetItems()
        {
            return context.Items.ToList();
        } 
```

此代码返回数据库中的所有项目。
在我使用分页的网站上，每页只需要 10 个项目。
所以我做了这样的事情：

```
var model = itemsRepository.GetItems().
                    Where(x => x.CategoryId == categoryId).
                    OrderByDescending(x => x.CreatedOnDate).
                    Skip(0).
                    Take(pageSize); 
```

现在我看到我在这里所做的是，我从 db 中获取所有项目并过滤它们。
如果我将新方法放入域中并将以下代码放入其中，我会得到一些好处：

```
return context.Items.Where(x => x.CategoryId == categoryId).
                    OrderByDescending(x => x.CreatedOnDate).
                    Skip(0).
                    Take(pageSize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:55:43.947

是的你应该。我假设您使用 SQL 作为您的上下文的后端，但最终使用您的新方法构建的查询只会拉出这 10 条记录并将它们作为`IEnumerable`（延迟执行）返回，而不是从数据库，然后只过滤掉前 10 个结果。

我认为使用延迟执行的第二种（新）方法会更好。

您是否也通过 SQL Profiler 看到了性能的改进？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:56:22.100

是的。您将受益于后一种情况下的 LINQ 查询将被转换为 SQL 并在数据库中执行。**因此，您的第一个示例会将整个表**加载到内存中 - 而第二个示例将在数据库中进行更有效的查询。

从本质上讲，`.ToList()`中断延迟了执行——但你也可以返回`IQueryable<T>`而不是返回`IEnumerable<T>`，然后在上层处理它——这取决于你的要求。另外，请尝试阅读[此问题和答案](https://stackoverflow.com/questions/2876616/returning-ienumerablet-vs-iqueryablet)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:00:15.040

您的代码中存在一些问题：

1.  不要在 for 类中使用变量`context`，每次需要时，创建并处理它（使用 using）：

    using(var context = new ...) { // 做数据库的东西 }

2.  不要调用`ToList()`, 来获取所有项目，使用正常的分页然后调用 ToList （类似于你的第二个示例，但使用，...）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T21:00:38.703

第二种方法的问题是域现在与上下文耦合。这违背了存储库模式的主要目的之一。我建议您在存储库中使用第二种方法，您将要检索的页码传递给它，然后它会将它们返回给您。在您的存储库中有类似的东西

```
public IEnumerable<Item> GetItemsForPage(int pageNumber)
    {
        return context.Items.Where(x => x.CategoryId == categoryId).
                OrderByDescending(x => x.CreatedOnDate).
                Skip(pageNumber * pageSize).  //Note not always 0
                Take(pageSize);

    } 
```

在您的域中，您将调用 repository.GetItemsForPage()。这为您提供了延迟执行的好处，同时保持了域和上下文的解耦。

# bash - 无法在 ssh 会话中设置 JAVA_HOME（在 root 用户上）

> ID：12205303
> 
> 赞同：2
> 
> 时间：2012-08-30T20:51:31.233
> 
> 标签：bash, scripting, environment-variables, java-home

我想要一个带有`root`帐户和环境变量的 ssh 会话`JAVA_HOME`。我有出口`JAVA_HOME`。`/etc/bash.bashrc`运行命令时，

> ssh -t root@localhost "source /etc/bash.bashrc; echo javahome=\$JAVA_HOME"

shell 中的打印输出是`javahome=`. 但是在执行以下操作时，我可以看到`JAVA_HOME`设置正确。

> ssh root@localhost
> 
> 源 /etc/bash.bashrc
> 
> 回声 javahome=$JAVA_HOME

可能的原因是什么？通常，如何使用`JAVA_HOME`set 进行 ssh 会话。脚本以`bash4`on运行`ubuntu12.04-64`

PS：我终于将配置脚本放入`/root/.profile`，然后一切正常...这是一种解决方法，但不是问题的解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T01:52:30.827

将变量定义添加到`/etc/environment`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T21:01:13.387

也许这会有所帮助：[.bashrc at ssh login](https://stackoverflow.com/questions/820517/bashrc-at-ssh-login) 虽然我不确定当我期望 .bashrc 时您使用 bash.bashrc 文件是否正确

# php - php 检查链接是否被点击

> ID：12205307
> 
> 赞同：5
> 
> 时间：2012-08-30T20:51:42.980
> 
> 标签：php

嗨，我是 php 的新手，请帮忙。我正在制作一个网站，它有一个菜单，我需要它，这样如果单击“link1”之类的链接 page1.php 将加载到 mainSection div 中，如果单击 link2 page2.php 将加载到 mainSection 等。所以所有页面：page1、page2、page3 等将根据点击的链接加载到这个单一页面中。这可能我不知道从哪里开始。谢谢

```
 <body>
        <?php
            <ul>
                <li><a href="#" name="link1">link 1</a></li>
                <li><a href="#" name="link2">link 2</a></li>
                <li><a href="#" name="link3">link 3</a></li>
                <li><a href="#" name="link4">link 4</a></li>    
            </ul>
        ?>

       <div id="mainSection">
            <?php
        if (link1 == true){
             include 'page1.php';
        }
        if (link2 == true){
            include 'page2.php';
        }
        if (link3 == true){
            include 'page3.php';
        }
        if (link4 == true){
            include 'page4.php';
        }
            ?>  
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:56:37.020

你可以从这里开始

```
<body>
            <ul>
                <li><a href="?link=1" name="link1">link 1</a></li>
                <li><a href="?link=2" name="link2">link 2</a></li>
                <li><a href="?link=3" name="link3">link 3</a></li>
                <li><a href="?link=4" name="link4">link 4</a></li>    
            </ul>

       <div id="mainSection">
            <?php
        $link=$_GET['link'];
        if ($link == '1'){
             include 'page1.php';
        }
        if ($link == '2'){
            include 'page2.php';
        }
        if ($link == '3'){
            include 'page3.php';
        }
        if ($link == '4'){
            include 'page4.php';
        }
            ?>  
        </div>
    </body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-03T10:18:26.877

除了 majid 的代码之外，您还必须检查链接是否已设置，否则会引发 undefined $link 错误。

*   链接 1
*   链接 2
*   链接 3
*   链接 4

```
 <div id="mainSection">
        <?php
    if(isset($_GET['link'])){
    $link=$_GET['link'];
    if ($link == '1'){
         include 'page1.php';
    }
    if ($link == '2'){
        include 'page2.php';
    }
    if ($link == '3'){
        include 'page3.php';
    }
    if ($link == '4'){
        include 'page4.php';
    }
      }  ?>  
    </div>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T20:57:20.550

将链接的格式更改为：

```
<a href="/?1" name="link1">link 1</a>... 
```

然后将您的 PHP 更改为：

```
<?php
        if ($_SERVER['QUERY_STRING'] == 1){
             include 'page1.php';
        }
        if ($_SERVER['QUERY_STRING'] == 2){
            include 'page2.php';
        }
        if ($_SERVER['QUERY_STRING'] == 3){
            include 'page3.php';
        }
        if ($_SERVER['QUERY_STRING'] == 4){
            include 'page4.php';
        }
?> 
```

# objective-c - 如何从 gdb 调用 NSObject“类”方法？

> ID：12205318
> 
> 赞同：0
> 
> 时间：2012-08-30T20:52:19.773
> 
> 标签：objective-c, xcode, macos, debugging, gdb

我正在使用 gdb 6.3.50，它是 Xcode 4.4.1 附带的。`class`我试图在调试器中调用对象似乎让我感到困惑。

```
(gdb) po [JSONObject class]
A syntax error in expression, near `]'. 
```

我认为它被“类”这个词绊倒了，它必须是某种保留符号，也许是因为我正在使用 Objective-C++。当然，如果我尝试使用其他 C 关键字，我可以用相同的措辞将其引发错误：

```
(gdb) po [JSONObject struct]
A syntax error in expression, near `]'. 
```

对象本身似乎没有任何问题，因为 gdb 可以在其上调用其他方法：

```
(gdb) po [JSONObject objectForKey:@"UTIMESTAMP"]
<__NSCFArray 0x89c9b0>( ...(etc.>) 
```

是否有一些构造、符号或其他东西可以放在命令行中，以强制 gdb 将“类”视为一个选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:22:45.637

尝试直接使用 Objective-C 信使功能：

```
po (id)objc_msgSend(JSONObject, @selector(class)) 
```

# javascript - 在 javascript 中为预定义对象设置原型

> ID：12205325
> 
> 赞同：0
> 
> 时间：2012-08-30T20:52:41.940
> 
> 标签：javascript, prototypejs, prototype, javascript-objects

如何操作`prototype`预定义对象（例如 an `Array`）的 ，以便在创建该对象的实例时执行某些操作？

`alert('an array was created!')`只要实例化一个数组，我就想这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:57:58.537

您可以通过将数组添加到`Array.prototype`对象来在数组上设置新方法：

```
Array.prototype.fizz = function () {
    alert('works');
};

var arr = [];
arr.fizz(); 
```

但是，这只允许您创建新方法，不允许您扩展现有方法*，也不允许您覆盖`Array`构造函数。

***向现有类型添加新方法时要小心。***这会对整个脚本环境产生不利影响，并导致某些库出现意外行为。尽管有些人可能会称其为“不好的做法”，但使用 polyfills 来实现跨浏览器兼容性是很常见的，例如通过创建[`Array.prototype.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf).

没有“新”数组之类的东西，这个词是“实例化的”：

```
var a1, a2;
a1 = []; //a1 was instantiated with a new Array
a2 = new Array(); //a2 was also instantiated with a new Array 
```

没有覆盖`Array`构造函数的跨浏览器方法。

[* 可以将现有方法包装在函数中，以便在调用时，现有方法除了执行新功能外，还执行其原始功能。尽管这可能被称为*扩展*现有方法，但实际上是在创建新方法。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T21:00:48.503

您可以尝试`Array`使用自己的功能覆盖。它似乎在做的时候起作用`new Array`，但在做的时候却不起作用`[]`。

```
(function() {
    var _ac = Array;
    Array = function() {
        alert('an array was newed!');
        return _ac.apply(this, arguments);
    };
}()); 
```

演示：http: [//jsfiddle.net/DAg9A/](http://jsfiddle.net/DAg9A/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:06:03.060

我建议你为它创建一个数组命名空间：

```
array = {};
array.create = function() {

    alert("Created an array");     
    return [];

} 
```

所以每当你创建一个数组时，你都会使用：array.create(); .

您不应该并且在这种情况下也不能更改本机功能。您必须负责每个数组的创建。

# informix - 这个 SQL 语句在这个 Informix 4GL 代码中做了什么？

> ID：12205332
> 
> 赞同：1
> 
> 时间：2012-08-30T20:53:13.027
> 
> 标签：informix, 4gl

我错过了一些东西。请问有人可以告诉我这是如何工作的吗？

```
 let rpt.chgkey = null
  select cuschage.chgkey from cuschage where cuschage.cuschnum in
     (select shtwrd_no from crbookid where  
         crbookid.book_no = rpt.book_no and crbookid.line_no <= 3)

    let scratch = rpt.chgkey
    call make_charge_section(scratch) returning rpt.chgkey
 if rpt.chgkey is not null then
    print
    column 1, ESC, "(s0p12h0s3b4099T", ESC, "&a0.5R"
    print
    column 70, rpt.chgkey using "<<<<<<<<<"
end if 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:08:20.920

嗯……那 SELECT 语句几乎毫无意义。您通常^*执行 SELECT 语句将数据放入变量中，但没有 INTO 子句可将返回值放入。

鉴于 SELECT 与 无关`rpt.chgkey`，因此 in 的`scratch`值为 NULL。使用此值 (NULL) 调用该函数`make_charge_section`，并将结果保存在`rpt.chgkey`; 相当于`CALL`：

```
LET rpt.chgkey = make_charge_section(scratch) 
```

或者您可以不使用临时变量并编写：

```
LET rpt.chgkey = make_charge_section(rpt.chgkey) 
```

（你也可以用`CALL`符号来做到这一点）。

此后，您向终端显示一些奇怪的控制序列——我不会尝试找出哪个终端或它做什么；你确定你不能用I4GL本身达到同样的效果吗？然后显示 的新（非空）值`rpt.chgkey`。

所以，这里最大的未知数是“为什么在没有 INTO 子句的情况下编写 SELECT 语句”，以及“`make_charge_section()`当给定 NULL 值作为输入时会做什么”？

* * *

^*没有 INTO 的 SELECT 的“异常”使用将取决于您检测到 SQL 中的错误。发生的方式取决于您将 WHENEVER ERROR 设置设置为什么。

# c++ - 向量下标超出范围 - 冒泡排序

> ID：12205337
> 
> 赞同：0
> 
> 时间：2012-08-30T20:53:23.577
> 
> 标签：c++, vector, sorting

我有这段代码实现了数组的冒泡排序。在 MS VS 2012 中编译它可以工作到一定程度：

UPD：我添加了很多检查来跟踪发生崩溃的确切位置，就像这样：它交换数组的前两个元素，打印出交换了这些元素的数组，然后打印出“正在检查”并因“向量下标超出范围”而崩溃

```
#include "stdafx.h"
#include <stdio.h>
#include <iostream>
#include <stdlib.h>
#include <vector>
using namespace std;

int Check(vector<int> Array)
{
printf ("Checking: \n");
for (int i = 0; i < Array.size(); i++)
    if((int*) Array[i] == NULL)
    {
        cerr << "Array [" << i << "] is fubared";
        return -1;
    }
}

int PrintOut(vector<int> Array)
{
printf ("Your array appears to be as follows: \n");
for (int i = 0; i < Array.size(); i++)
    printf("%d  ", Array[i]);
return 0;
}

int bubble_sort()
{
int or_size = 2;
int i, j, size, temp;

printf("Specify array size\n");
scanf_s("%d", &size);
printf(" Now, input all elements of the array \n");

vector<int> Array(size, 0);
if (size > or_size)
    Array.resize(size);

for (i = 0; i < size; i++)
{
    printf("Array [%d] is now re-initialised as ", i);
    scanf_s("%d", &temp);
    printf("\n");
    Array[i] = temp;
}

Check(Array);

PrintOut(Array);

for (i = 1; i < size; i++)
    for (j = 0; j < size-i ; j--)
    {
        printf ("Attempting to swap Array[%d], which = %d, and Array [%d], which = %d \n",j, Array[j], j+1, Array[j+1]);
        if (Array[j] > Array[j+1])
        {
            Array[j]+=Array[j+1];
            Array[j+1] = Array[j] - Array[j+1];
            Array[j] = Array[j] - Array[j+1];
            printf("Swapped \n");
        }
        PrintOut(Array);
        Check(Array);
    }

printf ("\n Your Array has been bubble_sorted and should know look like this: \n");
for (i = 0; i < size; i++)
    printf("%d ", Array[i]);

Array.clear();

return 0;
}

int main()
{
    bubble_sort();
    return 0;
} 
```

它一定很简单，但我无法触及。PS现在没有尴尬的_asm ;-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:58:15.430

```
for (j = size; i > 0; i--) 
```

必须成为

```
for (j = size - 1; i > 0; i--) 
```

对于维度为 N 的数组，索引从 0 变为 N - 1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:59:03.277

你有一个“off-by-one”错误：

```
for (i = 0; i < size; i++)
    for (j = size; i > 0; i--)
    //   ^^^^
    //   j is out or range, the last valid index is size-1
        if (Array[j] < Array[j-1])
            swap(Array[j], Array[j-1]); 
```

# extjs3 - ExtJS 2.3/3.x 网格存储

> ID：12205338
> 
> 赞同：0
> 
> 时间：2012-08-30T20:53:25.317
> 
> 标签：extjs3, extjs2

我有一个使用 Json 存储的网格，在网格上我使用检查选择模型。我想用从第一个网格中选择的记录填充另一个网格。最好的方法是什么？我正在考虑克隆商店，先执行 removeAll()，然后执行 insert()。或者也许我可以做一个过滤器？我在我的应用程序的许多部分都使用这个商店，所有视图都会被过滤吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:50:46.847

```
var grid1 = Ext.grid.GridPanel({ 
  store: store1
});
var grid2 = Ext.grid.GridPanel({
  store: store2
});

var records = [];
var selectedRecs = grid1.getSelectionModel().getSelections();
for (var i =0 ; i < selectedRecs.length; i ++) {
  records[records.length] = selectedRecs[i];
}

store2.add(records); 
```

# java - @ViewScoped bean 意外存活

> ID：12205348
> 
> 赞同：0
> 
> 时间：2012-08-30T20:53:53.917
> 
> 标签：java, xml, spring, icefaces, spring-webflow

我正在开发一个由对象创建表单和现有对象列表*creablocco.xhtml组成的***视图**：

 *```
<?xml version="1.0"?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:ace="http://www.icefaces.org/icefaces/components" 
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/resources/includes/templates/template.xhtml">
    <ui:param name="pageTitle" value="Crea blocco" />
    <ui:define name="page-content">
        <ace:panel id="personalInfoInputPanel" header="Crea blocco">
            <div class="div_creablocco">
                <h:form id="creabloccoform">
                    <h:panelGrid id="creabloccoInputGrid" columns="1" styleClass="table_creablocco">
                        <ace:textEntry id="numeroFile" value="#{creaBloccoBean.numeroFile}" label="Numero file:" labelPosition="left" required="true" requiredIndicator="(*)" indicatorPosition="right">
                        </ace:textEntry>
                        <ace:textEntry id="numeroColonne" value="#{creaBloccoBean.numeroColonne}" label="Numero colonne:" labelPosition="left" required="true" requiredIndicator="(*)" indicatorPosition="right">
                        </ace:textEntry>
                        <ace:textEntry id="posizioneX" value="#{creaBloccoBean.posizioneX}" label="Coordinata X:" labelPosition="left" required="true" requiredIndicator="(*)" indicatorPosition="right">
                        </ace:textEntry>
                        <ace:textEntry id="posizioneY" value="#{creaBloccoBean.posizioneY}" label="Coordinata Y:" labelPosition="left" required="true" requiredIndicator="(*)" indicatorPosition="right">
                        </ace:textEntry>
                        <ace:pushButton id="pushBttnCreaBlocco"  value="Crea blocco" action="creaBlocco"/>
                    </h:panelGrid>
                </h:form>
            </div>
        </ace:panel>

        <ace:panel id="blocchiPanel" header="Blocchi">
            <h:form id="blocchiTableForm">
                <ace:menuBar id="iconeBloccoMenu" rendered="#{!blocchiBean.modificaInCorso}">
                    <ace:menuItem id="dettagliBloccoButton" value="Dettagli" action="dettagliBlocco" icon="ui-icon ui-icon-search" />
                    <ace:menuItem id="modificaBloccoButton" value="Modifica" action="modificaBlocco" icon="ui-icon ui-icon-pencil" />
                    <ace:menuItem id="cancellaBloccoButton" value="Cancella" action="cancellaBlocco" icon="ui-icon ui-icon-closethick" />
                </ace:menuBar>
                <ace:menuBar id="iconeModificaBloccoMenu" rendered="#{blocchiBean.modificaInCorso}">
                    <ace:menuItem id="annullaModificheButton" value="Annulla" action="annullaModificheBlocco" icon="ui-icon ui-icon-arrow-1-w" />
                    <ace:menuItem id="salvaModifiche" value="Salva" action="salvaModificheBlocco" icon="ui-icon ui-icon-disk" />
                </ace:menuBar>
                <ace:dataTable id="blocchiTable" value="#{blocchi}"
                    binding="#{blocchiBean.table}" stateMap="#{blocchiBean.stateMap}"
                    selectionMode="multiple" doubleClickSelect="false"
                    rowSelectListener="#{blocchiBean.selectListener}"
                    rowUnselectListener="#{blocchiBean.deselectListener}" var="blocco"
                    lazy="true" rows="10" paginator="true" paginatorPosition="bottom">
                    <ace:column id="idBloccoColumn" headerText="ID" styleClass="id">
                        <h:outputText id="idBloccoText" value="#{blocco.id}" />
                    </ace:column>
                    <ace:column id="numeroFileBloccoColumn" headerText="Numero file"
                        styleClass="numFile">
                        <ace:cellEditor>
                            <f:facet name="output">
                                <h:outputText id="numeroFileBloccoText"
                                    value="#{blocco.numeroFile}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="numeroFileBloccoInput"
                                    value="#{blocco.numeroFile}" />
                            </f:facet>
                        </ace:cellEditor>

                    </ace:column>
                    <ace:column id="numeroColonneBloccoColumn"
                        headerText="Numero colonne" styleClass="numColonne">
                        <ace:cellEditor>
                            <f:facet name="output">
                                <h:outputText id="numeroColonneBloccoText"
                                    value="#{blocco.numeroColonne}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="numeroColonneBloccoInput"
                                    value="#{blocco.numeroColonne}" />
                            </f:facet>
                        </ace:cellEditor>

                    </ace:column>
                    <ace:column id="posizioneXBloccoColumn" headerText="Posizione X"
                        styleClass="posX">
                        <ace:cellEditor>
                            <f:facet name="output">
                                <h:outputText id="posizioneXBloccoText"
                                    value="#{blocco.posizioneX}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="posizioneXBloccoInput"
                                    value="#{blocco.posizioneX}" />
                            </f:facet>
                        </ace:cellEditor>

                    </ace:column>
                    <ace:column id="posizioneYBloccoColumn" headerText="Posizione Y"
                        styleClass="posY">
                        <ace:cellEditor>
                            <f:facet name="output">
                                <h:outputText id="posizioneYBloccoText"
                                    value="#{blocco.posizioneY}" />
                            </f:facet>
                            <f:facet name="input">
                                <h:inputText id="posizioneYBloccoInput"
                                    value="#{blocco.posizioneY}" />
                            </f:facet>
                        </ace:cellEditor>

                    </ace:column>
                </ace:dataTable>
            </h:form>
        </ace:panel>
    </ui:define>
</ui:composition> 
```

“对象创建表单” ( `<h:form id="creabloccoform">`) 由文本输入和按钮 ( `<ace:pushButton id="pushBttnCreaBlocco" ... />`) 组成。
“现有对象列表”是一个表格（`<ace:dataTable id="blocchiTable" .. />`），用作编辑选定对象属性或删除选定对象的起点。

删除和编辑过程是通过选择表格中的一些行并按下菜单栏中的正确按钮（查看`<ace:menuBar id="iconeBloccoMenu" .. />`和`<ace:menuBar id="iconeModificaBloccoMenu" ... />`）来完成的。

这是使用 Spring Webflow，*creablocco-flow.xml定义的***流程**：

 *```
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <var name="creaBloccoBean" class="com.infoone.siglo.viewbeans.CreaBloccoBean" />

    <view-state id="creablocco">
        <on-entry>
            <evaluate expression="blocchiBean.getBlocchi()" result="flowScope.blocchi" />
        </on-entry>
        <transition on="creaBlocco" to="fine">
            <evaluate expression="gestoreBlocchiCtr.creaBlocco(creaBloccoBean)" />
        </transition>
        <transition on="cancellaBlocco" to="decidiCancellazione">
            <evaluate expression="blocchiBean.getRigheSelezionate()" result="flowScope.righeSelezionate"/>
        </transition>
        <transition on="modificaBlocco" to="decidiModifica">
            <evaluate expression="blocchiBean.getRigheSelezionate()" result="flowScope.righeSelezionate"/>
        </transition>
    </view-state>

    <decision-state id="decidiCancellazione">
        <if test="!(flowScope.righeSelezionate).isEmpty()" then="cancellaBlocco" else="fine" /> 
    </decision-state>
    <decision-state id="decidiModifica">
        <if test="!(flowScope.righeSelezionate).isEmpty()" then="modificaBlocco" else="fine" /> 
    </decision-state>

    <action-state id="cancellaBlocco">
        <evaluate expression="gestoreBlocchiCtr.rimuoviBlocchi(flowScope.righeSelezionate)" />
        <transition to="fine"/>
    </action-state>
    <action-state id="modificaBlocco">
        <evaluate expression="blocchiBean.abilitaModifica()"/>
        <transition to="fine"/>
    </action-state>

    <end-state id="fine" />

</flow> 
```

这是导致标题中提到的问题的**bean ，** *BlocchiBean.java*：

```
package com.infoone.siglo.viewbeans;

import java.io.Serializable;
import java.util.Arrays;
import java.util.List;
import java.util.Set;
import java.util.concurrent.ConcurrentSkipListSet;

import javax.annotation.PostConstruct;
import javax.faces.bean.ViewScoped;

import org.icefaces.ace.component.column.Column;
import org.icefaces.ace.component.datatable.DataTable;
import org.icefaces.ace.event.SelectEvent;
import org.icefaces.ace.event.UnselectEvent;
import org.icefaces.ace.model.table.RowState;
import org.icefaces.ace.model.table.RowStateMap;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.infoone.siglo.viewbeans.lazyLoaders.BlocchiLazyLoader;

@Component
@ViewScoped
public class BlocchiBean implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = -7007046069743684498L;

    @Autowired
    private transient BlocchiLazyLoader blocchi;
    private DataTable table;
    private RowStateMap stateMap;
    private Set<CreaBloccoBean> righeSelezionate;
    private boolean modificaInCorso;

    public BlocchiBean()
    {
    }

    @SuppressWarnings("unused")
    @PostConstruct
    private void initBlocchi()
    {
        stateMap = new RowStateMap();
        stateMap.setAllSelectable(true);

        righeSelezionate = new ConcurrentSkipListSet<CreaBloccoBean>();

        blocchi.setRowCount(blocchi.getPageSize());

        modificaInCorso = false;
    }

    //BlocchiLazyLoader blocchi
    public void setBlocchi(BlocchiLazyLoader blocchi) {
        this.blocchi = blocchi;
    }   
    public BlocchiLazyLoader getBlocchi() {
        return blocchi;
    }

    //RowStateMap stateMap
    public RowStateMap getStateMap() {
        return stateMap;
    }
    public void setStateMap(RowStateMap stateMap) {
        this.stateMap = stateMap;
    }

    //DataTable table
    public DataTable getTable() {
        return table;
    }
    public void setTable(DataTable table) {
        this.table = table;
    }

    //Selection listeners
    public void selectListener(SelectEvent event) {
        Object[] oggettiSelezionati = event.getObjects();
        for (Object oggettoSelezionato : oggettiSelezionati) {
            CreaBloccoBean bloccoSelezionato = (CreaBloccoBean) oggettoSelezionato;
            righeSelezionate.add(bloccoSelezionato);
        }
    }

    public void deselectListener(UnselectEvent event) {
        Object oggettoDeselezionato = event.getObject();
        CreaBloccoBean bloccoDeselezionato = (CreaBloccoBean) oggettoDeselezionato;
        righeSelezionate.remove(bloccoDeselezionato);
    }

    //List<CreaBloccoBean> righeSelezionate
    public List<CreaBloccoBean> getRigheSelezionate() {
        CreaBloccoBean[] array = new CreaBloccoBean[righeSelezionate.size()];
        array = righeSelezionate.toArray(array);
        return Arrays.asList(array);
    }
    public void setRigheSelezionate(List<CreaBloccoBean> righeSelezionate) {
        this.righeSelezionate.clear();
        this.righeSelezionate.addAll(righeSelezionate);
    }

    public boolean isModificaInCorso() {
        return modificaInCorso;
    }

    public void setModificaInCorso(boolean modificaInCorso) {
        this.modificaInCorso = modificaInCorso;
    }

    //Abilitazione dell'editing
    public void abilitaModifica() {
        if (!righeSelezionate.isEmpty())
        {
            modificaInCorso = true;
            List<Column> colonne = table.getColumns();
            for (Object oggettoCorrente : stateMap.getSelected()) {
                CreaBloccoBean beanCorrente = (CreaBloccoBean) oggettoCorrente;
                RowState statoCorrente = stateMap.get(beanCorrente);
                if (righeSelezionate.contains(beanCorrente)) {
                    for (Column colonna : colonne) {
                        statoCorrente.addActiveCellEditor(colonna.getCellEditor());
                    }
                }
            }
        }
    }
} 
```

现在，假设我正在使用以下 URL 访问流：`http://<project base URL>/<flow path>?execution=<execution key 1>`并且我选择了其中一行。显然，*BlocchiBean对象的**stateMap*和*righeSelezionate*属性将由底层引擎正确更新（后者通过 (de)selection 侦听器）。之后，我单击*Modifica*按钮（意大利语为*Edit*），*cellEditor*s 被正确激活。到目前为止，一切都很好。

 ***问题来了。如果我更改地址栏中的执行键，获得类似的内容`http://<project base URL>/<flow path>?execution=<execution key 2>`，然后按*Return*（因此启动流的另一个实例），流的起始视图会再次打开，但“表的状态”不会看起来重置。我选择的行仍然被选中，*BlocchiBean对象的**stateMap*和*righeSelezionate*属性看起来没有变化。这很奇怪，尤其是因为*BlocchiBean*被声明为**@ViewScoped**：

 ****```
@Component
@ViewScoped
public class BlocchiBean implements Serializable { 
```

因此，当流的新实例启动时，预计会从头开始重新创建。

我已经尝试过使用示波器，但它并没有解决问题。

为了完整起见，我提到了*BlocchiBean*对象的前面注释：

```
@Component("blocchiBean")
@ViewScoped
public class BlocchiBean implements Serializable { 
```

我的目标是将组件名称与视图和流中使用的 bean 名称相匹配。不幸的是，这个注释也不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:41:04.977

我找到了补救办法。
我还不能完全解释为什么我的问题中提供的解决方案不起作用，但至少我想出了一个正确的解决方案。

我在我的流程中声明了一个流程变量：

```
<var name="blocchiBean" class="com.infoone.siglo.viewbeans.BlocchiBean" /> 
```

并从类定义中删除任何注释：

```
package com.infoone.siglo.viewbeans;
//imports
public class BlocchiBean implements Serializable { 
```

对于那些这样做的人，**不要在您的 xml 配置文件中明确将其声明为 bean**。它必须只是一个 Spring Flow 变量，没有别的。

现在可以了。无论如何，不​​要期望 Spring Web Flow 在同一个流实例中总是使用相同的 BlocchiBean 对象，即使它本质上是 flowScoped（它是一个流变量，因此它是 flowScoped）。
实际上，如果您运行调试器并查看对象 ID，您会发现 Spring Web Flow 在同一个流实例中使用不同的实例。起初听起来很奇怪，但最终它起作用了：确实，每次 bean 实例被垃圾回收时，它的状态都会被正确保存在“某处”，因此可以通过它设置同一流执行中下一个实例的状态setter 方法，就在它的实例化之后。

Obviously, if another instance of the flow starts, a fresh new flow variable will be constructed and its state won't be altered by invoking its setter methods. In other words, it will behave as a flowScoped variable is expected to behave.*********

# unit-testing - 在 IBM JRE 上运行 jMockit 测试时出现 AttachNotSupportedException

> ID：12205354
> 
> 赞同：4
> 
> 时间：2012-08-30T20:54:21.707
> 
> 标签：unit-testing, junit, jmockit

当我尝试使用 IBM JDK 运行简单的 jMockit/JUnit 测试时，出现以下异常。有没有人遇到过这个问题？我尝试`-Dcom.ibm.tools.attach.enable=yes`作为 VM 参数给出，但没有运气。相同的代码在 Sun JDK 中运行良好。

```
java.lang.RuntimeException: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism
    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:89)
    at mockit.internal.startup.JDK6AgentLoader.loadAgent(JDK6AgentLoader.java:54)
    at mockit.internal.startup.AgentInitialization.initializeAccordingToJDKVersion(AgentInitialization.java:21)
    at mockit.internal.startup.Startup.initializeIfNeeded(Startup.java:98)
    at mockit.internal.startup.Startup.initializeIfPossible(Startup.java:112)
    at org.junit.runner.Runner.<clinit>(Runner.java:22)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)
    at org.junit.internal.builders.JUnit4Builder.runnerForClass(JUnit4Builder.java:13)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism
    at sun.tools.attach.WindowsVirtualMachine.<init>(WindowsVirtualMachine.java:64)
    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:73)
    ... 22 more
java.lang.NoClassDefFoundError: org.junit.internal.runners.ErrorReportingRunner (initialization failure)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:140)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.<init>(JUnit4TestReference.java:33)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.<init>(JUnit4TestClassReference.java:25)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.NoClassDefFoundError: org.junit.runner.Runner (initialization failure)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:140)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    ... 9 more
Caused by: java.lang.RuntimeException: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism
    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:89)
    at mockit.internal.startup.JDK6AgentLoader.loadAgent(JDK6AgentLoader.java:54)
    at mockit.internal.startup.AgentInitialization.initializeAccordingToJDKVersion(AgentInitialization.java:21)
    at mockit.internal.startup.Startup.initializeIfNeeded(Startup.java:98)
    at mockit.internal.startup.Startup.initializeIfPossible(Startup.java:112)
    at org.junit.runner.Runner.<clinit>(Runner.java:22)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:167)
    at org.junit.internal.builders.JUnit4Builder.runnerForClass(JUnit4Builder.java:13)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    ... 11 more
Caused by: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism
    at sun.tools.attach.WindowsVirtualMachine.<init>(WindowsVirtualMachine.java:64)
    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:73)
    ... 22 more 
```

我尝试按照 Kevin Welker 的建议给出 VM 参数`-javaagent:jmockit.jar`，但得到了以下异常。

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:600)
    at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:335)
    at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:350)
Caused by: java.lang.NullPointerException
    at mockit.internal.annotations.MockClassSetup.validateRealClass(MockClassSetup.java:59)
    at mockit.internal.annotations.MockClassSetup.<init>(MockClassSetup.java:38)
    at mockit.internal.annotations.MockClassSetup.<init>(MockClassSetup.java:77)
    at mockit.internal.annotations.MockClassSetup.<init>(MockClassSetup.java:99)
    at mockit.internal.startup.JMockitInitialization.setUpInternalStartupMock(JMockitInitialization.java:56)
    at mockit.internal.startup.JMockitInitialization.initialize(JMockitInitialization.java:29)
    at mockit.internal.startup.Startup.initialize(Startup.java:68)
    at mockit.internal.startup.Startup.premain(Startup.java:56)
    ... 6 more

Fatal error: processing of -javaagent failed 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T16:37:36.297

附加 API 在 IBM JDK 6.0 中根本不起作用，至少在 Windows 上是这样。因此，有必要使用该`-javaagent:jmockit.jar`参数。

使用时`NullPointerException`发生的是由 IBM JDK 中的错误引起的。当注释属性（在本例中为 ）中引用的类型不存在于类路径中时，JDK 应该抛出一个. Oracle JDK 按预期执行此操作，但 IBM JDK改为返回属性值。`MockClassSetup.java:59``-javaagent``@MockClass``TypeNotPresentException``null`

我刚刚在 class 中实现了一个解决方法`MockClassSetup`，它将在 9 月底之前在下一个 JMockit 版本中提供。现在，您可以通过将 TestNG 添加到类路径来避免该问题（因为“找不到类型”是`org.testng.TestNG`类）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T16:30:46.620

以上使用 -javaagent 的答案是正确的。如果您使用的是 maven，这有点棘手，所以我是这样做的：

1.  添加 maven-dependency-plugin 以便您可以生成依赖项的绝对路径：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <version>2.5.1</version>
  <executions>
    <execution>
      <id>getClasspathFilenames</id>
      <goals>
         <goal>properties</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

2.添加`-javaagent`到surefire插件

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <version>2.13</version>
  <configuration>
    <argLine>-javaagent:${com.googlecode.jmockit:jmockit:jar} -XX:-UseSplitVerifier</argLine>
  </configuration>
</plugin> 
```

3\. 另外，您不必这样做，但我建议使用相对较新版本的 jmockit。这个问题是在 1.1 中检测到的（@Rogério 在 2012 年 9 月修复之前，但添加 -javaagent 无论如何都会修复它。作为参考，我正在使用 maven Central（2.5）中可用的最新版本作为此评论：

```
<dependency>
  <groupId>com.googlecode.jmockit</groupId>
  <artifactId>jmockit</artifactId>
  <!-- Use latest version. 1.1 gives AttachNotSupportedException -->
  <version>1.5</version>
  <scope>test</scope>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T03:03:02.237

某些版本的 IBM JDK 不正确地支持附加机制。您可以尝试使用 -javaagent:jmockit.jar 参数运行。以下信息有点旧，但它可能仍然适用，因为其他 JDK 不一定完全支持附加机制。

看到这个：[http ://code.google.com/p/jmockit/issues/detail?id=18](http://code.google.com/p/jmockit/issues/detail?id=18)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-19T03:54:33.283

我还尝试使用 JMockit 覆盖 3rd 方库中的类中的最终方法。我遇到了上面讨论的相同问题，再次添加 VM arg`-javaagent:C:/<Path-to-jar>/jmockit.jar`只会给我一个不同类型的错误。我也在使用 Websphere 附带的 IBM JDK 6.0。很遗憾，但看起来实际上不可能覆盖最终方法：我找不到任何其他测试框架可以做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-04T03:12:54.253

您只需要将 JDK 更新到 1.8。我测试了这个版本的JDK，这个问题已经解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-26T15:50:42.950

javagent for surefire 使用 maven 的设置如下所示：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.18.1</version>
    <configuration>
        ....
        <argLine>-javaagent:"${settings.localRepository}"/org/jmockit/jmockit/1.11/jmockit-1.11.jar</argLine>
    </configuration>
  </plugin> 
```

以上假设您正在使用以下依赖项：

```
 <dependency>
    <groupId>org.jmockit</groupId>
    <artifactId>jmockit</artifactId>
    <version>1.11</version>
    <scope>test</scope>
  </dependency> 
```

如果您使用不同的版本，请适当修改 argLine 值。

来源：http: [//jmockit.googlecode.com/svn-history/r1166/trunk/www/installation.html](http://jmockit.googlecode.com/svn-history/r1166/trunk/www/installation.html)

# linux - 有没有办法查看为 su 密码键入的字符

> ID：12205358
> 
> 赞同：2
> 
> 时间：2012-08-30T20:54:33.453
> 
> 标签：linux, bash, su

我正在编写一个可能需要 su 来运行命令的 bash 脚本。像这样的东西-

echo "安装XYZ系统" echo "请输入root密码-" su -c "java -cp ./Installer.jar com.company.FmMain ; exit"

有没有办法让 su 打印字符（星号或其他东西），以便用户在输入密码时有一些视觉反馈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:34:59.853

您必须首先将密码读入变量中，在`su`. 请参阅问题[如何在使用“read”读取密码时回显星号 (*)？](https://stackoverflow.com/questions/1923435/how-do-i-put-stars-into-read)`read`有关使用来完成此操作的示例。

然后，您必须使用`expect`将此密码传递给出现的密码提示`su`。请参阅问题[如何使用 expect 通过 ssh 连接到系统并更改主机系统的密码？](https://stackoverflow.com/questions/4566830/how-do-i-use-expect-to-connect-via-ssh-to-a-system-and-change-the-password-of-th)做类似事情的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:59:55.140

我不建议在 Linux 中使用掩码密码，因为它违背了预期的正常行为，并且可能会使用户感到困惑，特别是如果他们是有经验的 Linux 用户。读取密码的标准方法是在接受密码之前关闭回显并禁用对特殊字符（如转义序列等）的处理（这通常通过设置终端属性 - tcsetattr 等来完成），这就是 su 的工作方式。

有标准库函数，例如 getpass 可以为您执行此操作： [http ://www.gnu.org/s/hello/manual/libc/getpass.html](http://www.gnu.org/s/hello/manual/libc/getpass.html)

尝试实现您自己的方法会带来潜在的安全隐患。我强烈警告这一点。

# c# - Moq 未调用名为 Finalize 的方法

> ID：12205360
> 
> 赞同：1
> 
> 时间：2012-08-30T20:54:40.940
> 
> 标签：c#, unit-testing, moq

好吧，我在这一点上感到困惑。Moq 没有调用我的一个方法，但验证上的断言确实表明它正在调用我所有其他非无参数的方法。我什至添加了以下内容：

```
.Throws<Exception>() 
```

只是看看它是否会抛出，但仍然没有（但将其添加到其他方法中有效）。我知道正在使用的对象是我的模拟对象，因为我添加了一个调用，该调用在调用之后立即被记录。

方法名称是`Finalize()`. 我怀疑方法的命名是问题，但我已经尝试了其他所有方法。

代码通过公开主要方法简化为最简单的解决方案后：

```
 var asyncRecognizerMock = new Mock<AsyncRecognizer>();
  var asyncRecognizerFactoryMock = new Mock<AsyncRecognizerFactory>();
  var trainerMock = new Mock<Trainer>();
  trainerMock.Setup(trainer => trainer.Finalize()).Verifiable();
  var trainerDataRepository = new TrainerDataRepository(asyncRecognizerFactoryMock.Object, asyncRecognizerMock.Object);

  trainerDataRepository.FinalizeTrainer(trainerMock.Object);

  trainerMock.Verify(trainer => trainer.Finalize(), Times.Once()); 
```

我现在的方法是：

```
public void FinalizeTrainer(Trainer wordTrainer)
{
  wordTrainer.Finalize();
} 
```

此外，最小起订量为 4.0.10827.0，针对 .Net 3.5 运行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:10:27.430

将您的方法重命名为`Finalize`. 如果我复制/粘贴您的代码并重命名该方法，它就会开始正常工作。

它还会生成[编译器警告 CS0465](http://msdn.microsoft.com/en-us/library/02wtfwbt%28v=vs.80%29.aspx)，应避免使用。

这不起作用的原因是它`Finalize`实际上是类析构函数的保留名称。如果您编写此 C# 代码：

```
public class Trainer
{
    ~Trainer()
    {
        int x = 1;
    }
} 
```

`Finalize()`编译器实际上在 IL 代码中命名了析构函数：

```
.method family hidebysig virtual instance void 
        Finalize() cil managed
{
  // Code size       16 (0x10)
  .maxstack  1
  .locals init ([0] int32 x)
  .try
  {
    IL_0000:  nop
    IL_0001:  ldc.i4.1
    IL_0002:  stloc.0
    IL_0003:  nop
    IL_0004:  leave.s    IL_000e
  }  // end .try
  finally
  {
    IL_0006:  ldarg.0
    IL_0007:  call       instance void [mscorlib]System.Object::Finalize()
    IL_000c:  nop
    IL_000d:  endfinally
  }  // end handler
  IL_000e:  nop
  IL_000f:  ret
} // end of method Trainer::Finalize 
```

实际上，如果您尝试同时添加析构函数和 Finalize 方法：

```
public class Trainer
{
    ~Trainer()
    {
    }

    public virtual Finalize()
    {
    }
} 
```

这段代码将不再编译，因为这两种方法是一样的。棘手，是吗？:)

ECMA-335 中也指出：

> **I I.10.5.2 实例终结器**
> 
> 终结器的行为在分区 I 中指定。特定类型的终结方法是通过覆盖 System.Object 中的虚拟方法 Finalize 来指定的。

# java - 通用和强制转换 java 规则

> ID：12205368
> 
> 赞同：2
> 
> 时间：2012-08-30T20:55:19.797
> 
> 标签：java, generics

我已经阅读了一些通用限制

当谈到强制转换时，它说我们不能将强制转换与参数化类型一起使用

谁能解释在什么情况下我们可以将 Object 数据类型转换为其子类，因为泛型在必要时会自动执行转换？

假设我有以下代码：

`T[] arrayVar =(T[]) new Object[1]`// 它会导致编译器警告但仍然可以

为什么我应该在这种情况下使用演员表？它不是说在一般情况下，演员会自动完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:05:06.680

假设`T`不定义为`<T extends NotObject>`，则

```
T[] arrayVar =(T[]) new Object[1]// it causes a compiler warning but still okay 
```

后擦除是

```
Object[] arrayVar = (Object[]) new Object[1]; 
```

它有一个多余的未经检查的演员表。

这不是类型安全的。

考虑当你这样做时会发生什么

```
f(arrayVar) 
```

在哪里

```
void f(Object[] out) { out[0] = "A string"; } 
```

如果在`String`不是的子类时会发生这种情况，`T`那么您就违反了类型安全。

* * *

要解决此问题，您可以尝试创建更具体类型的数组。如果你可以带一个类型的参数

```
Class<T> clazz 
```

然后你可以创建你的数组

```
T[] varArray = (T[]) Array.newInstance(clazz, 1); 
```

这是更类型安全的，因为试图做

```
out[0] = ""; 
```

例如on a`Number[]`将导致在`ArrayStoreException`运行时。

它不是完全（动态）类型安全的，因为`T`可能是一个类似的类型`List<String>`，你仍然可以将 a`List<Number>`放入`List[]`没有 a 的`ArrayStoreException`.

# testing - 使用 CSV 数据集配置时强制线程使用相同的输入行

> ID：12205371
> 
> 赞同：1
> 
> 时间：2012-08-30T20:55:33.717
> 
> 标签：testing, jmeter

我正在尝试构建一个可以对服务器进行 http 调用的 Jmeter 测试计划。线程组中的每个线程将从 CSV 文件中读取 2 个参数并使用参数进行 http 调用，并继续使用相同的参数进行相同的调用，例如 1000 次，每个线程执行之间的延迟为 10 秒。

http调用看起来像

```
/service/method?param1=${param1}¶m2=${param2}

```

CSV 是这样的：

```
1,2
3,4
5,6
7,8

```

我已经设置了测试计划，除了单个问题外，大部分情况下都可以使用。我希望每个线程在线程执行时使用相同的参数（相同的输入行）。目前唯一的方法是设置`Recycle on EOF = true`，但线程随机选择值。Param1 和 Param2 可以是随机生成的值，只要它们在整个执行过程中坚持使用相同的线程即可。

无论如何我可以做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:01:16.817

我不确定我是否正确理解了您的问题（您可以更明确地描述它或使用示例），但下面的架构应该实现您的测试计划描述：

```
测试计划
    线程组
    线程数：N
        . . .
        While Controller 
        Condition: ${__javaScript("${param2"!="<EOF>",)} *- 读取 csv 文件，直到 EOF * 
            CSV 数据集配置
            文件名：[包含测试数据的文件的路径]
            变量名称：param1,param2
            在 EOF 上回收？错误的
            在 EOF 上停止线程？真的
            共享模式：当前线程组
            循环控制器
            循环计数 = 1000 *- 每个线程的循环数，具有相同的参数*
                HTTP 请求 *- 你的 http 调用*
                测试操作
                目标 = 当前线程
                动作 = 暂停
                持续时间（毫秒）= 10000 *- 呼叫之间的暂停*
            . . .

```

如果您需要 N 个线程中的每一个从 csv 文件中读取并使用**单个且唯一的**行，您必须`Sharing mode: Current thread group`为 CSV 数据集配置设置（在这种情况下，csv 条目的数量应该与线程数相同，或者`Recycle on EOF? False`应该是否则设置）。
如果您需要 N 个线程中的每一个都读取并使用csv 文件中的**所有**行，您必须`Sharing mode: Current thread`为 CSV 数据集配置进行设置。

如果这不是您想要的，请更清楚地描述您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T03:19:17.770

我能够找到一种黑客。基本上，我只是为每个线程设置了一个常量计时器，并使用线程号 ${__threadNum} 作为参数来适应我对同一线程使用相同参数的约束。

我仍然更喜欢从 csv 文件中读取参数的方法。

# asp.net - 从 EF 模型优先图生成类

> ID：12205373
> 
> 赞同：4
> 
> 时间：2012-08-30T20:55:37.240
> 
> 标签：asp.net, entity-framework, code-generation, visual-studio-2012

当我在 Visual Studio 2012 中创建新的 ADO.NET 实体数据模型时，它为我提供了一个免费的 EF 5.x DbContext Generator 代码生成项。换句话说，如果我在解决方案资源管理器中展开我的 edmx 项目，我会看到一对 .tt 文件，理论上，它们应该会神奇地生成包含我的 POCO 类和我的 DbContext 类的 .cs 文件。

我的问题是我无法说服 Visual Studio 实际创建这些类。Model1.tt 包含一个空的 Model1.cs，Model1.Context.tt 包含一个 DbContext 对象，但它不包含与我的实体关联的 DbSet<> 集合。

如果我从我的解决方案中删除两个 .tt 项，然后右键单击设计器图面，选择添加代码生成项，然后添加一个 EF 5.x DbContext 生成器，然后一切正常，我得到生成的类。

我已经验证了我删除的 *.tt 文件实际上与我重新添加的文件相同。

有什么智慧之言吗？这是一个错误，还是我错过了什么？

鲍勃

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T22:22:30.480

检查[这个](http://thedatafarm.com/blog/data-access/watch-out-for-vs2012-edmx-code-generation-special-case/)。当 EDMX 不在项目根目录中时，VS2012 中有一个错误会导致此行为。因此，您可以使用您的解决方法并手动添加模板，或者您必须手动触发自定义工具以强制生成代码，如链接中所述。

# c# - 使用 XMLSpreadsheet 从 Excel 粘贴到剪贴板

> ID：12205385
> 
> 赞同：1
> 
> 时间：2012-08-30T20:56:30.907
> 
> 标签：c#, excel, clipboard

我在 Excel 电子表格中有数据，其值如下：31% 和 69%

解析剪贴板后，我得到的值为 0.31 和 0.69。我期望得到 31 和 69 或 31% 和 69%

我有一个 C# 程序可以从剪贴板上解析这些数据。

```
const string ClipboardFormat = "XML Spreadsheet";
if (Clipboard.ContainsData(ClipboardFormat))

{

  object clipData = Clipboard.GetData(ClipboardFormat);
  MemoryStream ms = clipData as MemoryStream;
  XmlDocument xml = new XmlDocument();
  xml.Load(ms);

  XmlNodeList table = xml.GetElementsByTagName("Table");

  foreach (XmlNode row in table[0].ChildNodes)
  {
    foreach (XmlNode cell in row.ChildNodes)
    {

    GridView.SetRowCellValue(iRowIndex, GridView.Columns[iColIndex], cell.InnerText);
    iColIndex++;
    }
  iRowIndex++;
  } 
```

cell.InnerText 总是给我 0.31 和 0.69 的值，而我期望值 31 和 69 或 31% 和 69%。我想使用“XML 电子表格”格式，因为它可以帮助我找到我正在寻找的正确日期格式 [Feb-14 给我 02/01/2014]。

请建议我如何使用“XML 电子表格”数据格式解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:59:42.400

如您所知，Excel 将百分比数据存储为 1 的一部分，因此当您在 Excel 单元格中看到“50%”时，xls 文件中实际存储了“0.50”。我可以想到3个选项：

1.  如果您使用的是 DevExpress Gridview（如我所见 - 您确实如此），您可以使用以下代码将数据显示为百分比，而不是 1 的份额：

    ```
    //myPercentColumn - a column in which you want to put your percentile data...
    myPercentColumn.DisplayFormat.FormatType = FormatType.Numeric;
    myPercentColumn.DisplayFormat.FormatString = "p0"; 
    ```

2.  将 Excel 的单元格格式更改为“文本” - 最糟糕的选择，因为您无法在 Excel 公式中使用该单元格值。

3.  解析 C# 代码中的值，例如将值乘以 100（或在相乘后将其转换为字符串，并添加“%”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T09:04:41.603

如果您有一个包含值“61%”的单元格，那么实际上，这是**VALUE 0.61**，但**格式化为 percent**。

Excel 将其复制到剪贴板，如下所示：

```
<?xml version="1.0"?>
<?mso-application progid="Excel.Sheet"?>
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:html="http://www.w3.org/TR/REC-html40">
 <Styles>
  <Style ss:ID="Default" ss:Name="Normal">
   <Alignment ss:Vertical="Bottom"/>
   <Borders/>
   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="11" ss:Color="#000000"/>
   <Interior/>
   <NumberFormat/>
   <Protection/>
  </Style>
  <Style ss:ID="s69">
   <NumberFormat ss:Format="0%"/>
  </Style>
 </Styles>
 <Worksheet ss:Name="Tabelle1">
  <Table ss:ExpandedColumnCount="1" ss:ExpandedRowCount="1"
   ss:DefaultColumnWidth="60" ss:DefaultRowHeight="14.5">
   <Row>
    <Cell ss:StyleID="s69"><Data ss:Type="Number">0.61</Data></Cell>
   </Row>
  </Table>
 </Worksheet>
</Workbook> 
```

不幸的是，您需要做一些努力才能正确提取值。在 <CELL> 标签中，请注意这个属性：

```
ss:StyleID="s69" 
```

然后查看 <Styles> 部分，您会在其中找到此样式和 <NUMBERFORMAT> 标记：

```
<NumberFormat ss:Format="0%"/> 
```

所以实际上，“0% 是将应用于 VALUE 0.61 的格式。

提取格式有点复杂，但实际上所有信息都在 XML 文本中。

# canvas - 如何在 android 的同一画布上绘制的多个位图中检查特定位图的触摸？

> ID：12205386
> 
> 赞同：4
> 
> 时间：2012-08-30T20:56:32.000
> 
> 标签：canvas, bitmap

我需要帮助来检查绘制到同一画布上的多个位图中特定位图上的 onTouch 事件...我可以在所有位图中移动该位图，但问题是它在触摸整个画布时移动，而它应该只在触摸时移动位图区...

```
 canvas.drawBitmap(MainActivity.bmp, MainActivity.bPX[i], MainActivity.bPY[i], null);
  canvas.drawBitmap(MainActivity.bmp1, MainActivity.bPX[i], MainActivity.bPY[i], null); 
```

在我的代码中，使用 if 条件代替 bmp.getDensity() 我使用了 bmp.getWidth() 但在这种情况下，我的条件永远不会变为真......

```
 if(mLastTouchX >= mPX[i] && mLastTouchX < (mPX[i]+bmp.getDensity()) 
                        && mLastTouchY >= mPY[i] && mLastTouchY < (mPY[i]+bmp.getDensity()) 
```

那么我应该在这里使用什么，以便我的条件变为真实......

# c++ - 服务器/客户端 TCP 异步 (winsock) // FD_WRITE 问题

> ID：12205393
> 
> 赞同：1
> 
> 时间：2012-08-30T20:56:59.363
> 
> 标签：c++, sockets, asynchronous, tcp, winsock

我需要你的帮助，因为我必须在 C++ 中制作两个控制台应用程序：一个客户端能够向服务器发送尽可能多的字符串（以便发送坐标）。我成功地制作了一个阻塞套接字，但由于我必须在每个帧调用我的脚本的开发平台（3D VIA Virtools）中集成它，所以除了使用异步套接字之外我没有其他解决方案。

*我的问题是我只能发送一次字符串，并且在我不再收到 FD_WRITE 之后......*

这开始让我发疯，所以任何帮助都将受到高度赞赏（我是编程的初学者），提前感谢所有对我的问题感到有点担心的人

这是我的代码，

**服务器**

```
#include <winsock2.h> 
#include <Windows.h> 
#include <conio.h> 

#pragma comment(lib, "ws2_32.lib") 

#define   SOCKET_ERRNO   WSAGetLastError() 
#define ADDRESS "127.0.0.1" 
#define PORT 1234 

static SOCKET ListenFirstFreePort() 
{ 
   struct sockaddr_in addr; 
   int len = sizeof(addr);    
   SOCKET hSocket; 

   // Create socket 
   hSocket = socket( PF_INET, SOCK_STREAM, 0 ); 
   if( hSocket == INVALID_SOCKET ) 
   { 
      printf( "socket() error %d\n", SOCKET_ERRNO ); 
      exit(1); 
   } 

   // Connexion setting for local connexion 
   addr.sin_family = AF_INET ; 
   addr.sin_addr.s_addr = inet_addr(ADDRESS); 
   addr.sin_port = htons (PORT); 

   // bind socket 
   if ( bind( hSocket, (struct sockaddr *)&addr, sizeof(addr)) == SOCKET_ERROR ) 
   { 
      printf( "bind() error %d\n", SOCKET_ERRNO ); 
      exit(1); 
   } 

   // listen 
   if ( listen( hSocket, 100) == SOCKET_ERROR ) 
   { 
      printf( "listen() error %d\n", SOCKET_ERRNO ); 
      exit(1); 
   } 

   return hSocket; 
} 

void main() 
{ 
   WSADATA stack_info; 
   SOCKET ahSocket[2]; 
   WSAEVENT ahEvents[2]; 
   DWORD dwEvent; 
   WSANETWORKEVENTS NetworkEvents; 
   int rc; 

   // Initialize Winsock 
   WSAStartup(MAKEWORD(2,0), &stack_info) ; 

   // Create events 
   ahEvents[0] = WSACreateEvent(); 
   ahEvents[1] = WSACreateEvent(); 

   // Create listening socket 
   ahSocket[0] = ListenFirstFreePort(); 
   rc = WSAEventSelect(ahSocket[0], ahEvents[0], FD_ACCEPT ); 
   if( rc == SOCKET_ERROR ) 
   { 
      printf( "WSAEventSelect() error %d\n", SOCKET_ERRNO ); 
      exit(1); 
   } 

   while (TRUE) 
   { 
      // Waiting for so;ething to happen 
      // Basically we'll firstly receive the connexion of the client socket 
      // and then we'll be notificated when there will be some data to read 

      // look for events 
      dwEvent = WSAWaitForMultipleEvents( 2, ahEvents, FALSE, WSA_INFINITE, FALSE); 

      switch (dwEvent) 
      { 
      case WSA_WAIT_FAILED: 
         printf("WSAEventSelect: %d\n", WSAGetLastError()); 
         break; 
      case WAIT_IO_COMPLETION: 
      case WSA_WAIT_TIMEOUT: 
         break; 

      default: 

         //if there is one dwEvent-WSA_WAIT_EVENT_0 has to be substracted so as to dwEvent correspond to the index of the concerned socket 
         dwEvent -= WSA_WAIT_EVENT_0; 

         // enumeration of the events on the socket[dwEvent] 
         if (SOCKET_ERROR == WSAEnumNetworkEvents(ahSocket[dwEvent], ahEvents[dwEvent], &NetworkEvents)) 
         { 
            printf("WSAEnumNetworkEvent: %d lNetworkEvent %X\n",  
               WSAGetLastError(), NetworkEvents.lNetworkEvents); 
            NetworkEvents.lNetworkEvents = 0; 
         } 
         else  
         { 

            if (FD_CLOSE   & NetworkEvents.lNetworkEvents) 
            { 

               printf( "FD_CLOSE ok (dwEvent=%d)\n", dwEvent ); 
               printf( "press a key to exit\n" ); 
               getch(); // require conio.h 

               WSACloseEvent( ahEvents[0] ); 
               WSACloseEvent( ahEvents[1] ); 
               exit(0); 
            } 
            if (FD_READ & NetworkEvents.lNetworkEvents) 
            { 
               char szBuffer[256]; int cbRecv; 

               // Only the second socket expect to receive data 
               printf( "FD_READ ok (dwEvent=%d)\n", dwEvent ); 

               // read data 
               cbRecv = recv( ahSocket[dwEvent], szBuffer, sizeof(szBuffer) - 1, 0 ); 
               if( cbRecv <= 0 ) 
               { 
                  printf( "recv() error %d\n", SOCKET_ERRNO ); 
                  exit(1); 
               } 

               // On ecrit ce paquet (On remet le 0 au cas ou le paquet 
               // ait ete coupe en 2 - je sais, ca n'arrivera jamais en local) 
               // we put the 0 in case it has been cut - unlikey to happen on local network 
               szBuffer[cbRecv] = 0; 

               // write data in console window 
               printf( "socket %d : '%s'\n", dwEvent, szBuffer ); 
            } 
         } 
         if (FD_ACCEPT & NetworkEvents.lNetworkEvents) 
         { 
            struct sockaddr_in addrAccept; 
            int lenAccept; 
            lenAccept = sizeof( addrAccept ); 

            // we should have dwEvent=0 
            printf( "accept ok (dwEvent=%d)\n", dwEvent ); 

            // we create another socket to accept the connexion with the client socket 
            ahSocket[1] = accept(ahSocket[dwEvent], (struct sockaddr *)&addrAccept, &lenAccept); 

            // we want to be informed on when we'll be able read data from it 
            rc = WSAEventSelect(ahSocket[1], ahEvents[1], FD_READ|FD_CLOSE  ); 
            if( rc == SOCKET_ERROR ) 
            { 
               printf( "WSAEventSelect() error %d\n", SOCKET_ERRNO ); 
               exit(1); 
            } 
         } 
      } 
   } 
} 
```

**客户**

```
#include <winsock2.h> 
#include <conio.h> 
#include <time.h> 

#pragma comment(lib, "ws2_32.lib") 

#define   SOCKET_ERRNO   WSAGetLastError() 
#define ADDRESS "127.0.0.1" 
#define PORT 1234 

SOCKET ConnectToPort() 
{ 
   struct sockaddr_in addr; 
   SOCKET hSocket; 
   u_long arg; int err; 

   // Create socket 
   hSocket = socket( PF_INET, SOCK_STREAM, 0 ); 
   if( hSocket == INVALID_SOCKET ) 
   { 
      printf( "socket() error %d\n", SOCKET_ERRNO ); 
      exit(1); 
   } 

   // Connexion setting for local connexion 
   addr.sin_family = AF_INET ; 
   addr.sin_addr.s_addr = inet_addr(ADDRESS); 
   addr.sin_port = htons (PORT); 

   // Connect 
   if( connect( hSocket, (struct sockaddr *)&addr, sizeof(addr) ) == SOCKET_ERROR ) 
   { 
      // As we are in non-blocking mode we'll always have the error 
      // WSAEWOULDBLOCK whichis actually not one 
      if( SOCKET_ERRNO != WSAEWOULDBLOCK ) 
      { 
         printf( "connect() error (%d)\n", SOCKET_ERRNO ); 
         exit(1); 
      } 
   } 

   return hSocket; 
} 

void main() 
{ 
   int initClockTime; 
   WSADATA stack_info; 
   SOCKET ahSocket[1]; 
   WSAEVENT ahEvents[1]; 
   DWORD dwEvent; 
   WSANETWORKEVENTS NetworkEvents; 
   int rc; 

   // Initialize Winsock 
   WSAStartup(MAKEWORD(2,0), &stack_info) ; 

   // Create event 
   ahEvents[0] = WSACreateEvent(); 

   // Create and connect a socket on the server socket 
   ahSocket[0]= ConnectToPort(); 

   // not sure if I have to use or not 
   /*u_long arg = 1; 
   ioctlsocket( ahSocket[0] , FIONBIO, &arg );*/ 

   // the application wants to receive notification of a completed connection 
   rc = WSAEventSelect(ahSocket[0], ahEvents[0], FD_CONNECT  ); 
   if( rc == SOCKET_ERROR ) 
   { 
      printf( "WSAEventSelect() error %d\n", SOCKET_ERRNO ); 
      exit(1); 
   } 

   while (TRUE) 
   { 
      // look for events 
      dwEvent = WSAWaitForMultipleEvents( 1, ahEvents, FALSE, 1000, FALSE); 

      switch (dwEvent) 
      { 
      case WSA_WAIT_FAILED: 
         printf("WSAEventSelect: %d\n", WSAGetLastError()); 
         break; 
      case WAIT_IO_COMPLETION: 
      case WSA_WAIT_TIMEOUT: 
         break; 

      default: 

         printf("while\n"); 

         //if there is one dwEvent-WSA_WAIT_EVENT_0 has to be substracted so as to dwEvent correspond to the index of the concerned socket 
         dwEvent -= WSA_WAIT_EVENT_0; 

         // enumeration of the events on the socket[dwEvent] 
         if (SOCKET_ERROR == WSAEnumNetworkEvents(ahSocket[dwEvent], ahEvents[dwEvent], &NetworkEvents)) 
         { 
            printf("WSAEnumNetworkEvent: %d lNetworkEvent %X\n", WSAGetLastError(), NetworkEvents.lNetworkEvents); 
            NetworkEvents.lNetworkEvents = 0; 
         } 
         else  
         { 

            if (FD_CONNECT & NetworkEvents.lNetworkEvents) 
            { 
               //connexion is OK 
               printf( "FD_CONNECT ok (dwEvent=%d)\n", dwEvent ); 

               // now that we are connected we want to send data or be aware when the other socket is disconnected 
               rc = WSAEventSelect(ahSocket[dwEvent], ahEvents[dwEvent], FD_CLOSE | FD_WRITE ); 
               if( rc == SOCKET_ERROR ) 
               { 
                  printf( "WSAEventSelect() error %d\n", SOCKET_ERRNO ); 
                  exit(1); 
               } 
            } 
            if (FD_CLOSE   & NetworkEvents.lNetworkEvents) 
            { 
               printf( "FD_CLOSE ok (dwEvent=%d)\n", dwEvent ); 
               printf( "press a key to exit\n" ); 
               getch(); 

               WSACloseEvent( ahEvents[0] ); 
               exit(0); 
            } 

            if (FD_WRITE & NetworkEvents.lNetworkEvents) 
            { 
               char szBuffer[256]; int cbBuffer; 

               printf( "FD_WRITE ok (dwEvent=%d)\n", dwEvent ); 

               // create string and return the size 
               cbBuffer = sprintf( szBuffer, "Coucou", dwEvent ); 

               // send the string with 0 at the end 
               rc = send( ahSocket[dwEvent], szBuffer, cbBuffer + 1, 0 ); 
               if (SOCKET_ERROR ==  rc) 
               { 
                  printf("WSAEnumNetworkEvent: %d lNetworkEvent %X\n",  WSAGetLastError(), NetworkEvents.lNetworkEvents); 
               } 

               // not sure if I have to use it 
               //WSAResetEvent(ahEvents[0]); 

            } 

         } 
      } 
   } 
} 
```

下载 .cpp 文件：[https ://www.dropbox.com/s/pjuipz7v4iwr5ea/Clientserver%20TCP.zip](https://www.dropbox.com/s/pjuipz7v4iwr5ea/Clientserver%20TCP.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T04:32:06.210

在第一个通知之后您没有收到`FD_WRITE`通知，因为您没有考虑[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741576.aspx)中的以下段落：

> FD_WRITE 网络事件的处理方式略有不同。FD_WRITE 网络事件在第一次通过调用 connect、ConnectEx、WSAConnect、WSAConnectByList 或 WSAConnectByName 函数连接套接字时，或者在使用 accept、AcceptEx 或 WSAAccept 函数接受套接字，然后在发送失败后使用 WSAEWOULDBLOCK 时记录并且缓冲区空间变得可用。因此，应用程序可以假设可以从第一个 FD_WRITE 网络事件设置开始发送并持续到发送返回 WSAEWOULDBLOCK。在这样的失败之后，当记录 FD_WRITE 网络事件并设置关联的事件对象时，应用程序将发现再次可以发送。

在您第一次调用 之后`send()`，套接字仍然是可写的，因为它的出站缓冲区未满。只要你还有数据要发送，就一直调用，`send()`直到它报告一个`WSAWOULDBLOCK`错误，表明缓冲区已满。此时，您必须跟踪剩余数据，直到收到`FD_WRITE`指示套接字再次可写的通知，以便您可以从上次中断的地方继续发送剩余数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:42:47.640

我建议先查看常规[`select()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740141%28v=vs.85%29.aspx)的非阻塞 I/O。这里有几个链接供您入门：

*   [非阻塞 I/O 和 select()](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/rzab6/rzab6xnonblock.htm)（链接断开）
*   [TCP/IP 中的非阻塞套接字](http://www.win32developer.com/tutorial/winsock/winsock_tutorial_4.shtm)

# ajax - 数据输入的浏览器覆盖：客户端还是服务器端？

> ID：12205396
> 
> 赞同：0
> 
> 时间：2012-08-30T20:57:03.363
> 
> 标签：ajax, django, proxy

我正在开发一个 Django 应用程序，它基本上用作网站的数据输入工具。该用例有一个受信任的用户或付费技术人员浏览 Web。当他们浏览时，他们将数据输入到与您在许多代理网站上看到的类似的重叠栏中，但包含一个允许用户编写有关网站的元数据（在本例中为 ML 算法的训练分类数据）并将其提交给我的应用程序。

请参阅[http://hidemyass.com/proxy/](http://hidemyass.com/proxy/)以获取代理网站的示例，该示例将叠加层插入浏览的网站。

我听到了关于如何解决这个问题的相互矛盾的建议。

## 将网站作为代理服务

通过 django 应用程序使用[http://httpproxy.yvandermeer.net/](http://httpproxy.yvandermeer.net/)之类的管道传输所有 url 请求，并重写响应以包含标头。

**优点**

*   我可以使用像 NLTK 这样的性感科学库来处理响应
*   无 AJAX 故障转移。用户无需提交计算数据即可提交人工数据（尽管比较麻烦）。

**缺点**

*   流量大大增加。现在我的 webapp 必须检索所有网站并将它们上传给用户。
*   某些网站可能会阻止代理请求。我的意图是将其部署在 Heroku 上，但他们可能会不赞成生成如此多请求的应用程序。

## 用户在 iFrame 中浏览

叠加层通过 iFrame 与内容分开，我使用 javascript 通知当前正在浏览的页面上的叠加层

**优点**

*   分布式计算。用户机器用于发出请求并进行任何必要的计算。服务器不再是瓶颈。
*   更紧密的 Ajax 集成。我可以只发布一个代表我的整个模型的 JSON 对象。

**缺点**

*   iframe 并不是真正为全面浏览而设计的。一些网站强迫自己退出 iframe，我担心这不是一种可靠的浏览方法。
*   我不会使用所有那些性感的 python 库。我的语言处理必须在 javascript 中完成。

## 问题

我以前从来没有做过这样的事情。我对所涉及的所有工具都很陌生，并且在两种截然不同的方法之间进行选择时遇到了严重的麻烦。

**你会建议哪种方法？为什么？有没有我遗漏的注意事项？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:17:09.690

OKFN 的注释器为您尝试完成的工作提供了良好的基础[http://okfn.github.com/annotator/](http://okfn.github.com/annotator/)

# java - 使用 easymock 收到错误

> ID：12205402
> 
> 赞同：5
> 
> 时间：2012-08-30T20:57:44.617
> 
> 标签：java, junit4, easymock

我正在做一个新项目，他们一直在使用我不太熟悉的 EasyMock (v2.4)。我需要能够做到以下几点，但没有人有答案。当前框架使用`BaseDao.class`我想根据以下示例模拟的一个，但我收到一个错误。我正在寻找一些方向。

```
BaseDao baseDao = EasyMock.mock(BaseDao.class);

EasyMock.expect(baseDao.findByNamedQuery("abc.query"), EasyMock.anyLong()).andReturn(...);
EasyMock.replay(baseDao);

EasyMock.expect(baseDao.findByNamedQuery("def.query"), EasyMock.anyLong).andReturn(..);
EasyMock.replay(baseDao); 
```

我得到的错误如下......

```
java.lang.AssertionError: 
  Unexpected method call findByNamedQuery("def.query"):
    findByNamedQuery("abc.query", 1): expected: 1, actual: 0
at org.easymock.internal.MockInvocationHandler.invoke(MockInvocationHandler.java:32)
at org.easymock.internal.ObjectMethodsFilter.invoke(ObjectMethodsFilter.java:61)
at $Proxy5.findByNamedQuery(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:46:42.557

您定义了`replay(...)`两次，因此只有第一个会计算在内。它是这样定义的，直到您调用`reset(...)`.

要解决此问题，您可以：

1）删除导致测试失败的调用：

```
EasyMock.expecting(baseDao.findByNamedQuery("def.query"), EasyMock.anyLong)
   .andReturn(...);
EasyMock.replay(baseDao); 
```

2）您可以期望*任何*字符串，而不是在您的期望中定义一个固定的字符串：

```
EasyMock.expecting(baseDao.findByNamedQuery((String)EasyMock.anyObject()), 
   EasyMock.anyLong).andReturn(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:11:37.330

看起来测试*期望*使用参数“abc.query”进行方法调用，但该方法是使用“def.query”调用的。

逐步调试测试应该有助于发现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:56:02.620

如果您希望 findByNamedQuery 被调用两次，则删除对 replay 方法的第一次调用。只需要一次，毕竟您对测试的期望已经设定。

```
BaseDao baseDao = EasyMock.mock(BaseDao.class);

EasyMock.expect(baseDao.findByNamedQuery("abc.query"), EasyMock.anyLong()).andReturn(...);
// Remove EasyMock.replay(baseDao);

EasyMock.expect(baseDao.findByNamedQuery("def.query"), EasyMock.anyLong).andReturn(..);
EasyMock.replay(baseDao); 
```

# c# - 我应该将我的上下文注入我的存储库类吗？

> ID：12205404
> 
> 赞同：1
> 
> 时间：2012-08-30T20:57:51.437
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, ninject.web.mvc

我有许多如下所示的存储库类：

```
public class ProfileRepository : IProfileRepository{
     private MyEntities myEnt = new MyEntites();
     ...
} 
```

该类`MyEntities`是我使用实体框架在我的 .edmx 文件中生成的实体。我经常在我的所有存储库类中使用这个对象，并且我所有的存储库类都被注入到我的控制器中。有没有办法/将对象注入到我的存储库类中是一种好习惯，`myEnt`并且它是否也会以与并发相同的方式工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:00:16.413

`MyEntities`是你的上下文，我假设。如果是这样，那么是的，这是将上下文注入存储库的好习惯。这样，您可以模拟您的存储库，然后您的单元测试可以测试功能，而不必担心数据库（或其他持久性存储）的连接性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:05:44.097

答案是“是”。

基本原理如下：通过在存储库中创建上下文实例，您不允许调用者控制上下文的生命周期。

例如，在基于 Web 的场景中，您不希望每次创建存储库类的实例时都重新创建上下文。相反，您希望上下文在服务器上持续处理请求时一直存在。

# javascript - 设置fancybox的宽高

> ID：12205405
> 
> 赞同：1
> 
> 时间：2012-08-30T20:57:54.060
> 
> 标签：javascript, jquery, fancybox, width

我已经尝试了以下代码，但几乎没有效果：

```
 $(document).ready(function(e){
        $(".iframe").fancybox(
                {
                    height: 950,
                    width: 400                        }
        );
    }); 
```

我把所有的东西都放在引号里，所有的东西都没有引号，似乎没有任何东西对fancybox有任何影响。宽度似乎确实有一些影响，但它是不规则的和气质的。据我所知，包括宽度在内的所有内容都将宽度设置为默认值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T21:17:07.177

尝试：

```
$(document).ready(function() {
    $(".iframe").fancybox({
       maxWidth  : 950,
       maxHeight : 400,
       fitToView : false,
       width     : '100%',
       height    : '100%',
       autoSize  : false
    });
}); 
```

# php - 如何使用 jQuery 隐藏和禁用依赖于另一个字段值的字段

> ID：12205417
> 
> 赞同：0
> 
> 时间：2012-08-30T20:58:37.147
> 
> 标签：php, javascript, jquery, symfony1

下面的代码有效，但我有以下问题：

1.  这甚至是获得预期结果的最有效/最优雅的解决方案吗？如果没有，有人可以指出我正确的方向吗？
2.  在页面加载时，jQuery 没有读取表单上 MainWidgetName （选择输入）的值......导致在对该字段进行更改之前不会显示任何内容。
3.  如何在更改或禁用 javascript 时清除值并禁用未使用/未关联字段的选择输入？

jQuery：

```
<script type="text/javascript">
$(document).ready(function() 
{
  $.viewMap = {
    '0' : $([]),
    '6' : $('#result1'),
    '7' : $('#result2'),
    '8' : $('#result3'),
    '9' : $('#result4'),
    '10': $('#result5'),
    '11': $('#result6')
  };

  $('#mainWidgetName').change(function() 
  {
    // hide all
    $.each($.viewMap, function() {$(this).hide(); });
    // show current
    $.viewMap[$(this).val()].show();
   });
  });
  </script> 
```

HTML：

```
<table class="simple">
    <?php echo $form['mainWidgetName']->renderRow(); ?>    
    <tr id="result1" style="display:none"><th><?php echo $form[‘widgetName1’]->renderLabel()  ?></th><td><?php echo $form['widgetName1']->render(); ?></td></tr>  
    <tr id="result2" style="display:none"><th><?php echo $form[‘widgetName2’]->renderLabel()  ?></th><td><?php echo $form['widgetName2']->render(); ?>t</td></tr>
    <tr id="result3" style="display:none"><th><?php echo $form[‘widgetName3’]->renderLabel()  ?></th><td><?php echo $form['widgetName3']->render(); ?></td></tr>
    <tr id="result4" style="display:none"><th><?php echo $form[‘widgetName4’]->renderLabel()  ?></th><td><?php echo $form['widgetName4']->render(); ?></td></tr>
    <tr id="result5" style="display:none"><th><?php echo $form[‘widgetName5’]->renderLabel()  ?></th><td><?php echo $form['widgetName5']->render(); ?></td></tr>​
    <tr id="result6" style="display:none"><th><?php echo $form[‘widgetName6’]->renderLabel()  ?></th><td><?php echo $form['widgetName6']->render(); ?></td></tr>​
    <tr><td></td><td><input type="submit" value="Submit" /></td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:23:43.043

我找到了一个很棒的插件，可以达到我想要的结果：

[http://www.erichynds.com/jquery/jquery-related-dependent-selects-plugin/](http://www.erichynds.com/jquery/jquery-related-dependent-selects-plugin/)

# ajax - 如果先前被触发，jQuery 函数会跳跃 10px？

> ID：12205418
> 
> 赞同：0
> 
> 时间：2012-08-30T20:58:41.173
> 
> 标签：ajax, jquery

我已经构建了两个 jQuery 函数，在测试它们时，我注意到如果在它们已经被触发时单击选项卡，它们会向上跳大约 10px，然后跳回正常。

我到处搜索，似乎找不到有效的解决方案。

我有以下代码：

```
<div id="zoe">

            <div class="floating-rim-container">

            <a href="#">
                <img src="images/rim-middle.png" class="floating-rim-wrapper-zoe" id="rim-7">
            </a>        
            <a href="#">
                <img src="images/rim-middle.png" class="floating-rim-wrapper-zoe" id="rim-8">
            </a>        
            <a href="#">
                <img src="images/rim-middle.png" class="floating-rim-wrapper-zoe" id="rim-9">
            </a>
            <a href="#">
                <img src="images/rim-middle.png" class="floating-rim-wrapper-zoe" id="rim-10">
            </a>
            <a href="#">
                <img src="images/rim-middle.png" class="floating-rim-wrapper-zoe" id="rim-11">
            </a>
            <a href="#">
                <img src="images/rim-middle.png" class="floating-rim-wrapper-zoe" id="rim-12">
            </a>
                <div class="shadow-container">
                    <img src="images/shadow.png" class="shadow-zoe">
                    <img src="images/shadow.png" class="shadow-zoe">
                    <img src="images/shadow.png" class="shadow-zoe">
                    <img src="images/shadow.png" class="shadow-zoe">
                    <img src="images/shadow.png" class="shadow-zoe">
                    <img src="images/shadow.png" class="shadow-zoe">
                </div>
            </div>
        </div> 
```

我有这个 CSS：

```
.floating-rim-container {
    width:960px;
    height:300px;
    margin:-295px auto;
    vertical-align:top;
}
.floating-rim-wrapper-black, 
.floating-rim-wrapper-zoe {
    margin: 50px 0px;
    padding: 0px 23px;
    position:relative;
    left:0;
}
.shadow-black, .shadow-zoe {
    position:relative;
    padding: 0px 8px;
}
#tab-container {
    width:960px;
    margin:0 auto;
    font-family:'helvetica-light',Helvetica,Arial,sans-serif;
}
#blabel-tab {
    background:#3d3d3d;
    border-radius:0 0 15px 15px;
    -webkit-border-radius:0 0 15px 15px;
    border:1px solid rgba(0,0,0,0.6);
    border-top:none;
    padding:6px;
    letter-spacing:2px;
    position:relative;
    z-index:100;
    box-shadow:-2px 2px 4px 1px rgba(0,0,0,0.3);
    -webkit-box-shadow:-2px 2px 4px 1px rgba(0,0,0,0.3);
}
#zoe-tab {
    background:#3d3d3d;
    margin:0px 15px;
    border-radius:0 0 15px 15px;
    -moz-border-radius:0 0 15px 15px;
    -o-border-radius:0 0 15px 15px;
    border:1px solid rgba(0,0,0,0.6);
    border-top:none;
    padding:6px;
    position:relative;
    z-index:15;
    box-shadow:-2px 2px 4px 1px rgba(0,0,0,0.3);
    -webkit-box-shadow:-2px 2px 4px 1px rgba(0,0,0,0.3);
}
#blabel-tab:hover, #zoe-tab:hover {
    background:rgba(0,0,0,0.9);
}
#folder-placeholder {
    width:960px;
    height:275px;
    margin:-26px auto;
    background:#000;
    position:absolute;
    z-index:-1;
}
#folder-black {
    width:960px;
    background:#eee;
    margin:-30px auto;
    border-radius:0 0 10px 10px;
    -webkit-border-radius:0 0 10px 10px;
}
#folder-zoe {
    width:960px;
    margin:0 auto;
    background:#ccc;
    position:relative;
    top:4px;
    z-index:1;
    border-radius:0 0 10px 10px;
    -webkit-border-radius:0 0 10px 10px;
}
#zoe {
    position:relative;
    z-index:20;
} 
```

而这个jQuery：

```
function blabel_init() {
    $("#folder-black").show().animate({
        "height" : "300px"
    },600);
    $("#blabel-tab").animate({
        "top" : "295px"
    },{
        duration: 600,
        complete: function() {
            $("#blacklabel").fadeIn();
        }
    });
}
function blabel_switch() {
    $("#zoe-tab").click(function() {
        $("#blacklabel").fadeOut().promise().done(function() {
            $("#folder-black").animate({
                "height" : "0"
            });
            $("#blabel-tab").animate({
                "top" : "0"
            }).promise().done(function() {
                $("#folder-zoe").animate({
                    "height" : "300px"
                });
                $("#zoe-tab").animate({
                    "top" : "300px"
                },{
                    complete:function() {
                        $("#zoe").fadeIn();
                    }
                });
            });
        });
        return false;
    });
}
function zoe_switch() {
    $("#blabel-tab").click(function() {
        $("#zoe").fadeOut().promise().done(function() {
            $("#folder-zoe").animate({
                "height" : "0"
            });
            $("#zoe-tab").animate({
                "top" : "0"
            }).promise().done(function() {
                $("#folder-black").animate({
                    "height" : "300px"
                });
                $("#blabel-tab").animate({
                    "top" : "295px"
                },{
                    complete:function() {
                        $("#blacklabel").fadeIn();
                    }
                });
            });
        });
        return false;
    });   
} 
```

任何帮助将不胜感激！

可以在 zoewheels.com/beta 上查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:06:48.690

我认为这是因为`href="#"` 尝试替换为`href="javascript:void(0)"`. 另外，如果不需要href，请将其删除

# google-analytics - GoogleAnalyticsTracker：存储已满。不存储最后一个事件

> ID：12205424
> 
> 赞同：3
> 
> 时间：2012-08-30T20:59:08.830
> 
> 标签：google-analytics, analytics, google-analytics-api

我一直在 Logcat 中遇到此错误消息：

```
GoogleAnalyticsTracker: Store full. Not storing last event. 
```

我已经尝试了很多不同的事情，但我仍然不断收到错误。我正在使用 EasyTracker，但使用以下方法手动跟踪综合浏览量：

```
@Override
public void onStart(){
    super.onStart();
    try {
        EasyTracker.getTracker().trackPageView("Category Activity");
        //Tried adding the below line as well - didn't help
        //EasyTracker.getTracker().dispatch();
    }
    catch (NullPointerException e) {

    }
} 
```

我不确定我还能做什么。

# java - 为什么泛型方法改变了赋值中的参数化类型？

> ID：12205427
> 
> 赞同：4
> 
> 时间：2012-08-30T20:59:19.300
> 
> 标签：java, generics

在编写处理表单数据的通用方法时，我遇到了以下（如我所见）意外行为。给定以下代码：

```
public class Test {
   public <T> void someGenericMethod(Integer a) {
      @SuppressWarnings("unchecked")
      T t = (T) a;
      System.out.println(t);
      System.out.println(t.getClass());
   }

   public static void main(String[] args) {
      Test test = new Test();
      test.<BigDecimal>someGenericMethod(42);
   }  
} 
```

`ClassCastException`AFAIK，上面的代码应该在行中生成一个，`T t = (T) a`因为 main 中的方法调用将参数化类型设置为，并且不允许`BigDecimal`从 BigDecimal 强制转换，与我的预期相反，程序执行良好并打印了以下内容：`Integer`

```
42
class java.lang.Integer 
```

事实上，如果我在方法签名中添加另一个参数（如`String b`）并进行另一个分配`T t2 = (T) b`，程序会打印

```
42
class java.lang.String 
```

为什么`t`变量将其类型更改为`Integer`（无论如何，对类型 T 进行某种提升为 Object）？

欢迎对此行为进行任何解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:04:10.247

`(T) a`是*未经检查*的强制转换：由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，运行时无法知道类型`T`是什么，因此它实际上无法检查是否`a`属于 type `T`。

执行此操作时编译器会发出警告；在您的情况下，您已经通过编写`@SuppressWarnings("unchecked")`.

* * *

**编辑添加**（响应下面评论中的进一步问题）：

如果你想检查演员表，你可以这样写：

```
public class Test {
   public <T> void someGenericMethod(Class<T> clazz, Integer a) {
      T t = clazz.cast(a);
      System.out.println(t);
      System.out.println(t.getClass());
   }

   public static void main(String[] args) {
      Test test = new Test();
      // gives a ClassCastException at runtime:
      test.someGenericMethod(BigDecimal.class, 42);
   }
} 
```

通过传入`clazz`，您允许运行时检查演员表；而且，更重要的是，您允许编译器`T`从方法参数中进行推断，因此您不必再编写`test.<BigDecimal>someGenericMethod`了。

当然，调用该方法的代码仍然可以通过使用未经检查的强制转换来规避这一点：

```
public static void main(String[] args) {
   Test test = new Test();
   Class clazz = Object.class;
   test.someGenericMethod((Class<BigDecimal>) clazz, 42);
} 
```

但那是`main`' 的错，而不是`someGenericMethod`'。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T23:52:26.567

编译时，你上面的代码基本上变成了下面的非泛型方法：

```
public void someGenericMethod(Integer a) {
   Object t = a;
   System.out.println(t);
   System.out.println(t.getClass());
} 
```

没有演员表。没有例外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T00:30:33.667

您在方法签名中指定类型参数，但从不使用它。

我想你想要这样的东西：

```
public class Test {
   public <T> void someGenericMethod(T someItem) {
      System.out.println(someItem);
      System.out.println(someItem.getClass());
   }
}

public static void main(String[] args) {
    Test test = new Test();
    BigDecimal bd = new BigDecimal(42);

    test.someGenericMethod(42);    // Integer
    test.someGenericMethod("42");  // String
    test.someGenericMethod(42L);   // Long
    test.someGenericMethod(bd);    // BigDecimal
} 
```

请注意，无需强制转换。

参数类型在方法签名中声明并从参数中推断出来。

在您的代码中，您正在参数化方法调用（我从未见过）并传入一个 int。

很难理解您要做什么，因为您的示例代码什么都不做。

# ruby-on-rails - 在 activerecord 中存储 i18n 翻译——rails 3.2

> ID：12205428
> 
> 赞同：2
> 
> 时间：2012-08-30T20:59:21.983
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, internationalization

是否有任何内置方法可以在 Rails 3.2 的数据库中存储翻译？

我找到了一些宝石，例如[https://github.com/svenfuchs/i18n-active_record](https://github.com/svenfuchs/i18n-active_record)和这个文档[http://rubydoc.info/docs/rails/2.3.8/I18n/Backend/ActiveRecord](http://rubydoc.info/docs/rails/2.3.8/I18n/Backend/ActiveRecord) for 2.3 rails，但是我找不到 3.2 的相同解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T00:04:01.177

是的，全球化3：

*   [https://github.com/svenfuchs/globalize3](https://github.com/svenfuchs/globalize3)

Globalize3 上的好博文：

*   [http://www.synbioz.com/blog/2012/06/27/internationalization_with_globalize](http://www.synbioz.com/blog/2012/06/27/internationalization_with_globalize)

如果你对如何做 i18n 后端感到好奇：

*   [http://guides.rubyonrails.org/i18n.html#using-different-backends](http://guides.rubyonrails.org/i18n.html#using-different-backends)

如果您对使用 Tokyo Cabinet 或 Redis 的更快后端感到好奇：

*   [http://asciicasts.com/episodes/256-i18n-backends](http://asciicasts.com/episodes/256-i18n-backends)

# node.js - 在 Node.JS 中将 Grid/FS 流式传输到 WriteableStream 的问题

> ID：12205430
> 
> 赞同：4
> 
> 时间：2012-08-30T20:59:27.753
> 
> 标签：node.js, streaming, gridfs

我将图像存储在 Grid/FS 上，为了改进 UI，我想调整所有图像的大小以适应特定尺寸（拉伸和挤压效果超出范围）。目前，图像使用以下方式返回...

```
FileProvider.prototype.streamFile = function(res, _id, contenttype){
  var properId = this.db.bson_serializer.ObjectID.createFromHexString(_id)
  res.contentType(contenttype)
  var readstream = gfs.createReadStream(properId, {
    "content_type": contenttype,
    "id":true,
    "metadata":{
      "author": "Jackie"
    },
    "chunk_size": 1024*4 })
  readstream.pipe(res)
} 
```

这很好用，但现在我想截取图像并调整它的大小，所以我的想法是在内存中流式传输它而不是使用[imagemagik](https://github.com/rsms/node-imagemagick)进行调整大小（如果有更好的方法，请随时告诉我）。

但是，以下代码无法加载图像...

```
FileProvider.prototype.streamFile = function(res, _id, contenttype){
  var properId = this.db.bson_serializer.ObjectID.createFromHexString(_id)
  res.contentType(contenttype);
  var readstream = gfs.createReadStream(properId, {
      "content_type": contenttype,
      "id":true,
      "metadata":{
        "author": "Jackie"
      },
      "chunk_size": 1024*4 });
  var writestream = new stream.Stream()
  writestream.writeable = true
  writestream.write = function(data){
    console.log("Streaming.."+data)
  }
  writestream.pipe = function(src){
    console.log("Piping:"+src)
  }
  writestream.end = function (data){
    console.log(JSON.stringify(data))
    console.log("Completed")
  }
  readstream.pipe(writestream)
} 
```

这会将以下内容输出到控制台...

> 不明确的
> 
> 完全的

换句话说，没有数据被写入 writeStream。谁能看到我做错了什么？

# ipad - 媒体查询：iPad只有一个方向有效

> ID：12205431
> 
> 赞同：0
> 
> 时间：2012-08-30T20:59:32.503
> 
> 标签：ipad, css, responsive-design, media-queries

我目前正在转换为自适应网站的网站遇到麻烦。出于某种原因，我只能获得在 iPad 上工作的方向之一。如果我注释掉横向样式，则纵向样式适用于 ipad，反之亦然。我真的不明白我做错了什么......

这些是我正在使用的媒体查询：

```
@media all and (device-width : 768px) and (orientation: landscape) {}
@media all and (min-device-width:768px) and (max-device-width:1024px) and (orientation:portrait){} 
```

这是网站[www.imarken.dk的链接](http://www.imarken.dk/?page_id=37)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:05:21.250

我今天也遇到了同样的问题！事实证明，在元视口标签中删除我的 height=device-height 解决了这个问题，并允许 CSS 按预期在纵向和横向之间切换。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:13:30.027

问题出在`min-device-width`. 尝试使用 481 而不是 768。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:57:26.950

试一试：

```
@media only screen and (device-width: 768px) {
  /* targets iPad  */
}

@media only screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait) {
  /* targets iPad Portrait */
}

@media only screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) {
 /* targets iPad Landscape */
} 
```

# php - php pdo 多数组插入

> ID：12205432
> 
> 赞同：4
> 
> 时间：2012-08-30T20:59:34.197
> 
> 标签：php, arrays, insert, pdo

我已经玩了几个小时并试图解决这个问题，但看起来很难破解。

我能够进行单个数组插入

```
$person = array('name' => 'Wendy', 'age' => '32'); 
```

但如果我想要多个这样的：

```
$person = array(array('name'=>'Dan', 'age'=>'30'), array('name' => 'John', 'age' => '25'), array('name' => 'Wendy', 'age' => '32')); 
```

它不工作？任何帮助，将不胜感激。

对于多次插入：

```
public function insertPdo($table, $data){
    try{
        if (!is_array($data) || !count($data)) return false;

        $bind = ':' . implode(', :', array_keys($data));      
        $sql = 'INSERT INTO ' . $table . ' (' . implode(', ',array_keys($data)) . ') ' . 'values (' . $bind . ')';

        $sth = $this->__dbh->prepare($sql);
        $result = $sth->execute($data);

    }
    catch(PDOException $e){
        echo $e->getMessage();
    }
} 
```

单次插入

```
$person = array('name'=>'Dan', 'age'=>'30');
$db->insertPdo('test_pdo',$person);

// For Multi Insertion, I'm trying to use this in above function
foreach ($data as $row) {
    $result = $sth->execute($row);
};

$person = array(array('name'=>'Dan', 'age'=>'30'), array('name' => 'John', 'age' => '25'), array('name' => 'Wendy', 'age' => '32'));
$db->insertPdo('test_pdo',$person); 
```

和错误：

> 错误：SQLSTATE[HY093]：无效的参数号：绑定变量的数量与标记的数量不匹配

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:34:56.237

To take advantage of the insert speed of multiple inserts in MySQL ( [http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html) ), you can use a prepared statement that builds the larger query. This does add complexity over an more iterative approach, so is probably only worth it for high-demand systems or largish data sets.

If you have your data as you proposed above:

```
$person = array(array('name'=>'Dan', 'age'=>'30'), array('name' =>
'John', 'age' => '25'), array('name' => 'Wendy', 'age' => '32')); 
```

We're looking to generate a query that looks something like this:

```
insert into table (name, age) values (?,?), (?,?), (?,?); 
```

To pull this together you'll want something not totally unlike this:

```
$pdo->beginTransaction() // also helps speed up your inserts
$insert_values = array();
foreach($person as $p){
   $question_marks[] = '(?,?)';
   $insert_values = array_merge($insert_values, array_values($p));
}

$sql = "INSERT INTO table_name (name, age) VALUES " . implode(',', $question_marks);

$stmt = $pdo->prepare ($sql);
try {
    $stmt->execute($insert_values);
} catch (PDOException $e){
    // Do something smart about it...
}
$pdo->commit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T21:00:35.280

你不能自动做到这一点。相反，您必须手动迭代它并执行每条记录：

```
for ($person as $row) {
    $sth->execute($row);
} 
```

# visual-studio - 在对象浏览器中显示对象

> ID：12205436
> 
> 赞同：0
> 
> 时间：2012-08-30T21:00:00.517
> 
> 标签：visual-studio

是否有任何热键可以在对象浏览器中显示焦点对象？

喜欢`F12`但使用对象浏览器而不是代码编辑器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:40:02.523

正如您在“转到定义”的上下文菜单中看到的那样，快捷方式是`Shift`+ `F2`。

# wordpress - 如何将现有的 Wordpress 博客集成到 Magento

> ID：12205437
> 
> 赞同：0
> 
> 时间：2012-08-30T21:00:05.540
> 
> 标签：wordpress, magento, rss

我们公司有一个现有的 Wordpress 博客，我想将其整合到我们新的 Magento 网站中。

我需要在我的页面上显示最新的 5 个帖子。它可以通过 RSS 提要或其他方法来完成，但我宁愿不在同一台服务器上安装 Wordpress，以免落后于我网站的服务器。

任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:09:54.973

你已经有地方放它了吗？如果您已经了解如何为 Magento 设置主题，则可以在模板代码中执行此操作：

```
<?php $feed= new Zend_Feed_Rss('http://www.example.com/feed'); ?> 
```

然后`foreach`循环`$feed`抓取`->link()`或`->title()`其他任何你需要的东西。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-30T21:15:56.303

看看这个插件是否可以工作 [http://fishpig.co.uk/wordpress-integration.html](http://fishpig.co.uk/wordpress-integration.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T01:28:21.550

这里已经有两个非常好的答案。Zend 库的 DiY RSS 提要非常棒（正是我自己想要的，正在滚动我自己的，现在......）。use-the-Fishpig-integration 答案是非常合理的建议（该模块很棒）。

然而，梅根可能想要一些开箱即用的东西，可以在五分钟内安装，而不是浪费大量时间来修整。EM 主题的模块完成了这项工作，看起来很重要，并且在管理中具有选项，因此无论来源如何，都可以整齐地显示提要。

[http://www.magentocommerce.com/magento-connect/em-rss-atom-news-feed-widget.html](http://www.magentocommerce.com/magento-connect/em-rss-atom-news-feed-widget.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T15:34:24.267

Feedburner 是我选择的方式 - 它简单且易于集成：

```
<script src="http://feeds.feedburner.com/johnsoncreeksmokejuice/xZjR?format=sigpro&nItems=5&    dateLocation=above"
 type="text/javascript" ></script>
<noscript><p>Subscribe to RSS headline updates from: <a href="http://feeds.feedburner.com    /johnsoncreeksmokejuice/xZjR"></a></noscript> 
```

# emacs - 如何制作不设置背景颜色的 Emacs 颜色主题？

> ID：12205445
> 
> 赞同：2
> 
> 时间：2012-08-30T21:00:24.773
> 
> 标签：emacs, emacs23, dot-emacs

我正在尝试为我的终端制作一个 Emacs 颜色主题，它为所有文本等设置颜色，但使用终端的默认背景 - 主要是因为我喜欢我的终端配置文件所具有的透明度设置。进入我的颜色主题（我使用颜色主题明天晚上）并删除背景颜色可以实现我正在寻找的内容，但每次打开 Emacs 时都会抛出错误。谢谢你的帮助。

**编辑：**感谢 Mawile 的帮助，制作了一个新的 color-theme-tomorrow-night 变体。在这里，按预期工作：

```
(defun color-theme-tomorrow-night-term ()
  "Dark Tomorrow theme with background color removed for badass
terminal transparency"
  (interactive)
  (color-theme-tomorrow-real "nil" "#282a2e" "#373b41" "#c5c8c6" "#969896"
                             "#cc6666" "#de935f" "#f0c674" "#b5bd68" "#8abeb7"
                             "#81a2be" "#b294bb" "#aeafad"))
(provide 'color-theme-tomorrow-night-term) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:33:05.370

您始终可以将其设置为“ `nil`”（不带引号）而不是删除它...“ `nil`”是 Emacs 版本的“null”或“false”或“nonexistant”...

这几乎可以做的是让 Emacs 看到变量，并在它查找它时阻止它。它会看到变量，但它不会将您的背景颜色设置为任何东西，因为它被设置为这个神奇的“ `nil`”事物，在这种情况下有效地提供与删除变量时相同的功能，但没有错误。

我想[这](https://github.com/chriskempson/tomorrow-theme/blob/master/GNU%20Emacs/tomorrow-night-theme.el)是您正在使用的主题？在这种情况下，您可以将“ `nil`”放在第 16 行...

如果你想测试它，下面会将你的背景颜色设置为“ `nil`”。（您可以通过将这段代码粘贴到 Emacs 中的任何位置，将光标移到最后一个括号后，然后点击“ `C-x C-e`”来评估此代码）。

```
(set-background-color nil) 
```

# android - 布局XML中的Android包/类名？

> ID：12205453
> 
> 赞同：4
> 
> 时间：2012-08-30T21:01:01.687
> 
> 标签：android, xml, android-layout, view, package

这可能是一个小问题，但为什么有些人的 XML 布局文件中有包/类名称？

（如果这个问题是微不足道的，请不要投反对票，我什至不知道这叫什么，所以我无法查到）。

我正在看一个教程，我看到了这样的东西（在“sample.xml”中）：

```
<com.tutorials.foo
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

    <!-- some buttons and views here -->    

</com.tutorials.foo> 
```

我的问题是：

1）我假设“foo”是自定义视图？比如说，你想用你自己的 TextView 版本扩展 TextView 吗？

2）这种模式/技术甚至叫什么？

3）使用这种方法有什么好处？

提前非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:21:27.950

1.  是的，`<com.tutorials.foo .../>`是自定义视图。
2.  调用它会和 others.ex 一样：

    Foo foo=(Foo)findViewById(R.id.foo);

3.  我假设您的意思是创建布局静态（.xml）或使用代码动态。当您知道将在程序中使用此布局并且不会更改其格式时，xml 布局将具有优势。当然，您可以稍后添加或使用代码对其进行编辑。它也有利于可读性。

# python - Python正则表达式删除模式匹配中的空格

> ID：12205455
> 
> 赞同：2
> 
> 时间：2012-08-30T21:01:09.533
> 
> 标签：python, regex, string-substitution

我有一些行为良好的 xml 文件，我想使用正则表达式重新格式化（不解析！）。目标是让每一`<trkpt>`对都成为单线。

以下代码有效，但我希望在单个正则表达式替换而不是循环中执行操作，这样我就不需要将字符串连接回来。

```
import re

xml = """
    <trkseg>
      <trkpt lon="-51.2220657617" lat="-30.1072524581">
        <time>2012-08-25T10:20:44Z</time>
        <ele>0</ele>
      </trkpt>
      <trkpt lon="-51.2220657617" lat="-30.1072524581">
        <time>2012-08-25T10:20:44Z</time>
        <ele>0</ele>
      </trkpt>
      <trkpt lon="-51.2220657617" lat="-30.1072524581">
        <time>2012-08-25T10:20:44Z</time>
        <ele>0</ele>
      </trkpt>
    </trkseg>
"""

for trkpt in re.findall('<trkpt.*?</trkpt>', xml, re.DOTALL):
    print re.sub('>\s*<', '><', trkpt, re.DOTALL) 
```

`sed`也欢迎使用答案。

谢谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:53:20.493

这个怎么样：

```
>>> regex = re.compile(
    r"""\n[ \t]*  # Match a newline plus following whitespace
    (?=           # only if... 
     (?:          # ...the following can be matched:
      (?!<trkpt)  #  (unless an opening <trkpt> tag occurs first)
      .           #  any character
     )*           # any number of times,
     </trkpt>     # followed by a closing </trkpt> tag
    )             # End of lookahead""", 
    re.DOTALL | re.VERBOSE)
>>> print regex.sub("", xml)

    <trkseg>
      <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
      <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
      <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
    </trkseg> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:11:34.863

这并不是您真正要求的，但为了成为单线，这里有一个单线：

```
>>> print re.sub(r'(<trkpt.*?</trkpt>)',
                 lambda m: re.sub(r'>\s*<', '><', m.group(1), re.DOTALL),
                 xml, flags=re.DOTALL)

<trkseg>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
</trkseg> 
```

另请注意，如果任何字符串属性包含 string `"<trkpt"`，则此方法将中断，这可能不会发生，但这是不使用真正解析器的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:19:43.253

你想保留`<trkseg>`吗？如果是这样，这可能对您有用：

```
print re.sub('([^gt])>\s*<', '\g<1>><', xml, re.DOTALL) 
```

删除元素之间的所有空格，条件是前一个元素不以 t 或 g 结尾。

```
<trkseg>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44Z</time><ele>0</ele></trkpt>
</trkseg> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T21:25:26.153

另一个单行是

```
print re.sub("(<trkpt.+?>).*?(<time>.+?</time>).*?(<ele>.+?</ele>).*?(</trkpt>)",
             r'\1\2\3\4', xml, re.DOTALL) 
```

生产

```
<trkseg>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44</time><ele>0</ele></trkpt>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44</time><ele>0</ele></trkpt>
  <trkpt lon="-51.2220657617" lat="-30.1072524581"><time>2012-08-25T10:20:44</time><ele>0</ele></trkpt>
</trkseg> 
```

这具有易于更改其他标签的优点。

# android - 以英尺、英寸和四分之一英寸显示搜索栏的进度

> ID：12205457
> 
> 赞同：0
> 
> 时间：2012-08-30T21:01:29.203
> 
> 标签：android, increment, seekbar

我想要一个搜索栏，当用户滑动拇指垫时，它会以四分之一英寸的增量添加/减去。它需要从 0'-0.0" 开始并上升到 20'-0.0" 我是编程新手，我发现 seekbar 只接受“int”而不是 double（这是我需要的）。那么我是否需要使用每个单独的值创建和排列，然后获取进度条的结果，然后从我的数组中提取该数字以显示在 textView 中，或者有没有办法让进度条增加四分之一英寸？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:50:36.960

由于除了我在问题中所说的之外，我没有得到其他解决方案的回复，所以我是如何编码的，以防其他人可能需要知道。

```
ArrayList<String> arrayListName = new ArrayList<String>();    
for (int i = 0; i < 20; i++) {
        for (int ii = 0; ii < 12; ii++) {
            for (int iii = 0; iii < 4; iii++) {
                arrayListName.add(i + "'-" + ii + "." + iii + '"');
            } // end nested loop iii
        } // end nested loop ii
    } // end nested loop i
    String twenty = "20'-0.0\"";
    arrayListName.add(twenty);
    int lengthOfArrayListName = arrayListName.size(); 
```

上面的代码生成了一个包含 960 个元素的数组。然后我使用下一行来设置进度条的最大值

```
seekBarName.setMax(lengthOfArrayListName - 1); 
```

您需要从长度中减去 1，因为数组以 0 而不是 1 开头，否则您将得到一个 arrayoutofbounds FC

接下来在 SeekBar 的 onProgressChanged 中，我使用这一行来使用 seekbar 的位置值，然后从 arrayListName 设置 textView 的文本。

```
textViewName.setText(arrayListName.get(progress)); 
```

这种方法工作得很好，除了有这么大的数字可供选择，用户可能（很可能无法）在他们想要的数字上停止拇指按钮。所以我在搜索栏下添加了一个“+”和“-”按钮，将进度增加 1。

# matlab - 标准化一个巨大的稀疏矩阵

> ID：12205458
> 
> 赞同：1
> 
> 时间：2012-08-30T21:01:49.720
> 
> 标签：matlab, sparse-matrix

我有一组高维但非常稀疏的矩阵。我想对它们进行归一化，以便所有矩阵的列总和为 1。

这是我使用的示例代码：

```
bg = matrices{1};
for i = 2:length(matrices) , bg = bg + matrices{i}; end
normalizer = sum(bg);
for i = 1:length(matrices) 
    for j = 1:size(matrices{i},1)
        matrices{i}(j,:) = matrices{i}(j,:) ./ normalizer;
    end
end 
```

但是，您可以猜到这非常慢。一种选择是：

```
for i = 1:length(matrices) 
    matrices{i} = matrices{i} ./ repmat(normalizer,size(matrices{i},1),1);
end 
```

但这会停止，因为没有足够的内存来创建一个巨大且几乎完整的矩阵（使用规范化器重复）

你能推荐一个更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:10:43.223

如果您将问题转换为单个稀疏矩阵，那么您可以使用

```
bsxfun(@rdivide,A,normalizer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-09T18:02:25.050

@Jacob 的回答是正确的，但速度很慢。在 matlab 中使用稀疏矩阵乘法会快得多：

```
diag(sparse(normalizer.^-1)) * A; 
```

比较：

```
s=50000;A = sprand(s,s,6*s^-1);normalizer = sum(A,2);
tic;B = bsxfun(@rdivide,A,normalizer);toc
tic;C = diag(sparse(normalizer.^-1)) * A;toc
assert(max(max(abs(B-C))) < eps) 
```

在我的机器上，我得到：

```
Elapsed time is 6.393976 seconds.
Elapsed time is 0.009804 seconds. 
```

# android - 使用画布的 3d 立方体。需要一点改进

> ID：12205462
> 
> 赞同：3
> 
> 时间：2012-08-30T21:02:13.153
> 
> 标签：android, android-animation, android-canvas, live-wallpaper

我使用以下代码制作了这个 3d 立方体

```
Matrix mMatrix = canvas.getMatrix();

canvas.save();
camera.save();
camera.rotateY(-angle);
camera.getMatrix(mMatrix);
mMatrix.preTranslate(-width, 0);
mMatrix.postTranslate(width, 0);
canvas.concat(mMatrix);
canvas.drawBitmap(bmp1, 0, 0, null);
camera.restore();
canvas.restore();

camera.rotateY(90 - angle);
camera.getMatrix(mMatrix);
mMatrix.preTranslate(-width, 0);
mMatrix.postTranslate(width2, 0);
canvas.concat(mMatrix);
canvas.drawBitmap(bmp2, width, 0, null); 
```

这就是它给出的

![在此处输入图像描述](../Images/acd1b1ce57c38a1d7b5026f2b9df90a3.png)

但我需要的是

![在此处输入图像描述](../Images/6ffad11f9943a4c90c0a4926f707b12c.png)

这是因为当相机旋转图像时，图像的某些部分会被隐藏。像这样![在此处输入图像描述](../Images/0581d729e6686c67370b03a704910347.png)

但我认为这是可以做到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T03:36:47.127

实际上这很容易。图像必须沿其旋转的轴平移其宽度/高度的一半。

所以下面的改变做到了

```
mMatrix.preTranslate(-width, -height / 2);
mMatrix.postTranslate(width, height / 2); 
```

# python - 转换为 Python 2.7 后图像服务出错

> ID：12205464
> 
> 赞同：2
> 
> 时间：2012-08-30T21:02:22.763
> 
> 标签：python, google-app-engine

我正在将应用程序从 Python 2.5 切换到 2.7，并且开始遇到图像服务问题。例如，使用 db.put() 保存此实体：

```
from google.appengine.api import images

class Images(db.Expando):
    ImageTitle = db.StringProperty()
    ImageFile = blobstore.BlobReferenceProperty()
    ImageReference = db.StringProperty()

    def put(self, **kwargs):                    
        if not self.ImageReference:
            self.ImageReference = images.get_serving_url(self.ImageFile.key())
        super(Images, self).put(**kwargs) 
```

现在产生此错误：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\VB User\Bruha\src\handler_product_page_image.py", line 40, in post
    image.put()
  File "C:\Users\VB User\Bruha\src\db_models.py", line 56, in put
    self.ImageReference = images.get_serving_url(self.ImageFile.key())
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\images\__init__.py", line 1792, in get_serving_url
    rpc = get_serving_url_async(blob_key, size, crop, secure_url, filename, rpc)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\images\__init__.py", line 1907, in get_serving_url_async
    None)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\images\__init__.py", line 1034, in _make_async_call
    rpc = create_rpc()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\images\__init__.py", line 1028, in create_rpc
    return apiproxy_stub_map.UserRPC("images", deadline, callback)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 405, in __init__
    self.__rpc = CreateRPC(service, stubmap)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 69, in CreateRPC
    'a CreateRPC method.') % service)
AssertionError: The service "images" doesn't have a CreateRPC method. 
```

调用 'execute_transforms' 方法也会产生相同的错误。

任何帮助了解正在发生的事情将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T02:42:20.420

您正在运行开发服务器，因此在启动时检查此消息“无法初始化图像 API；您可能缺少“”Python“PIL”模块。导入错误：%s'，e

如果您收到此消息，则图像服务 RPC 未注册（`RegisterStub`在 dev_appserver 中的调用将失败）并且您将收到您看到的错误，因为`CreateRPC`调用中的断言失败。

因此，请检查是否为 Python 2.7 正确安装了 PIL

# css - 浮动沙袋元素的 Chrome 问题

> ID：12205466
> 
> 赞同：0
> 
> 时间：2012-08-30T21:02:26.820
> 
> 标签：css, google-chrome

我在 Chrome 中遇到段落文本与浮动元素重叠的问题。浮动元素被向下推以强制在容器的左下角显示图像。我已经设置了[http://jsfiddle.net/VMJGX/](http://jsfiddle.net/VMJGX/)，它重新创建了这个问题。该文本与 Chrome 中的 .indenter 元素重叠，但在 Firefox 或 IE 中不重叠。这是一个 Chrome 错误还是有更好的方法来完成这个？

Chrome 版本 21.0.1180.82

火狐版本 15.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:27:10.803

问题似乎是由于与段落中的 linehieght 相比的高度不同，压头的顶部被卡在了线条的中间。我猜 FF 和 Chrome 渲染的高度略有不同。如果您想继续使用您正在使用的相同方法，我建议您**摆脱高度类样式，而只使用*nbsp;* 填充缩进 div**，以便获得与段落行高一致的高度。

[这是一个例子。](http://jsfiddle.net/digthedoug/58fkC/)

**更新：**

我更新了小提琴以使用跨度作为段落内的缩进（而不是 div）并将宽度属性放回原处。由于段落上的*边距底部和缩进器上的**清除*，**您需要一个匹配的边距底部意向者，以便他们保持一致。**

# internet-explorer - 如何在 IE8 中播放 base64 wav 文件

> ID：12205468
> 
> 赞同：2
> 
> 时间：2012-08-30T21:02:34.867
> 
> 标签：internet-explorer, browser, html5-audio

我需要在 IE8 中播放 base64 wav 文件。对于其他浏览器我可以使用 HTML5 标签，但 IE8 不支持它。HTML5/Flash 播放器很多，但是 Flash 不支持 WAV 音频格式的问题 :(。另一个选项是使用标签在 IE 上播放 wav，如果将文件名设置为 SRC 参数，它就完美了，但是看起来不支持编码格式。任何人都可以提供一些解决方法吗？我无法更改音频格式或排除编码。

样本：

```
<embed autostart=true width=0 height=0 name="sound1"
    src="data:audio/wav;base64,UklGRhwMAABXQVZFZm10IBAAAAABAAEAgD4AAIA+AAABAAgAZGF0Ya4LAACAgICAgICAgICAgICAgICAgICAgICAgICAf3hxeH+AfXZ1eHx6dnR5fYGFgoOKi42aloubq6GOjI2Op7yt......">

```

此解决方案不起作用。

# php - 如何处理跨不同设备的会话？

> ID：12205470
> 
> 赞同：4
> 
> 时间：2012-08-30T21:02:45.410
> 
> 标签：php, mysql, ios, session

我正处于构建 php/mysql 后端的初始阶段，该后端将 REST 接口暴露给网站和 iphone/android/etc 设备。

我不太确定处理使用同一帐户的多个设备的会话的“标准”或“最佳实践”是什么。

以下是我目前对这将如何工作的想法：

1.  我现在会使用 MySQL 来存储会话，会话表如下：

    > id, session_id (hash), user_id (int), created (timestamp), expire (timestamp), device (enum)

2.  当用户通过 iOS 应用程序或 android 应用程序登录时，我会在成功 json 中返回一个会话令牌，以供将来使用的 api 调用使用。与进行 api 调用的网站相同。

3.  出于安全目的，如果用户重新登录，我应该重新生成并覆盖会话令牌，但仅限于该设备的 session_id。

4.  我还有一个 expire 列，它告诉我会话的到期时间，这样如果我愿意，我可以创建一个可以在两周内到期并由 CRON 作业定期清理的会话。

这对我来说似乎是一种合理的方法，但如果用户使用 iphone 和 ipad，或者使用同一个帐户的多个 android 设备，就会出现问题。任何时候用户使用其中一个登录都会导致另一个注销。

我注意到即使我从另一部 iPhone 登录，instagram 也不会使会话无效。

但是，我认为我不能复制这种行为，除非我在用户重新登录时从不覆盖会话令牌，或者每当用户从 iphone 登录时继续将会话行添加到我的会话表中？

跨不同设备处理会话的标准方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:17:16.640

我强烈建议您不要使用 mysql 来存储会话。我建议使用 redis 或 memcache。Redis 会将数据存储到磁盘中，以防您的服务器崩溃。Redis 还允许您设置 TTL 以使会话过期，这将解决 #4。

如果您使用的是基于休息的调用，我建议您将会话作为 cookie 添加到标头并来回传递。基本上模拟浏览器访问该页面的方式。我认为这也会使测试更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:14:52.917

好吧，您正在寻找的似乎不是大多数传统上所说的“会话”，这通常仅限于单个浏览器或客户端实例。

您似乎更多地谈论将应用程序状态附加到用户登录。在这种情况下，我不明白您为什么需要单独的会话表/令牌系统。您只需使用典型的客户端方法来保持登录，然后当登录的客户端联系您的 API 时，您将返回应用程序“会话”状态信息，而不管您正在与哪个实际客户端实例交谈。

这并不是说您不想使用某种代币交换系统为用户提供“新鲜”代币，以防您想在一段时间不活动后清除他们的状态，只是您可以拥有多个活动代币每次登录。

# java - OrientDB 慢写

> ID：12205471
> 
> 赞同：11
> 
> 时间：2012-08-30T21:02:49.997
> 
> 标签：java, orientdb

OrientDB官方网站说：

> 在普通硬件上，每秒最多可存储 150,000 个文档，每天可存储 100 亿个文档。大图在几毫秒内加载，无需执行昂贵的 JOIN，例如关系 DBMS。

但是，执行以下代码表明插入 150000 个简单文档需要大约 17000 毫秒。

```
import com.orientechnologies.orient.core.db.document.ODatabaseDocumentTx;
import com.orientechnologies.orient.core.record.impl.ODocument;

public final class OrientDBTrial {

    public static void main(String[] args) {
        ODatabaseDocumentTx db = new ODatabaseDocumentTx("remote:localhost/foo");
        try {
            db.open("admin", "admin");

            long a = System.currentTimeMillis();
            for (int i = 1; i < 150000; ++i) {
                final ODocument foo = new ODocument("Foo");
                foo.field("code", i);
                foo.save();
            }
            long b = System.currentTimeMillis();
            System.out.println(b - a + "ms");

            for (ODocument doc : db.browseClass("Foo")) {
                doc.delete();
            }
        } finally {
            db.close();
        }
    }

} 
```

我的硬件：

*   戴尔 Optiplex 780
*   Intel(R) Core(TM)2 双核 CPU E7500 @ 2.93Ghz
*   8GB 内存
*   视窗 7 64 位

我究竟做错了什么？

将保存拆分为 10 个并发线程以最小化 Java 的开销，使其运行时间约为 13000 毫秒。仍然比 OrientDB 头版说的慢得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T00:45:33.683

您可以通过使用“平面数据库”和 orientdb 作为 java 中的嵌入式库来实现这一点，请参阅此处 [http://code.google.com/p/orient/wiki/JavaAPI的更多解释](http://code.google.com/p/orient/wiki/JavaAPI)

您使用的是服务器模式，它会向 orientdb 服务器发送许多请求，根据您的基准测试判断，您每秒获得约 10 000 次插入，这还不错，例如，我认为 10 000 个请求/秒对于任何网络服务器（和 orientdb）来说都是非常好的性能服务器实际上是一个网络服务器，您可以通过 http 查询它，但我认为 java 使用的是二进制模式）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T09:25:27.373

OrientDB 站点的数字是针对本地数据库（没有网络开销）进行基准测试的，因此如果您使用远程协议，预计会有一些延迟。

正如 Krisztian 所指出的，尽可能重用对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T08:05:06.603

首先阅读有关如何获得最佳性能的文档！

几个小贴士：

**->**不要总是实例化 ODocument：

```
 final ODocument doc;
  for (...) {
    doc.reset();
    doc.setClassName("Class");
    // Put data to fields
    doc.save();
  } 
```

**->**不要依赖`System.currentTimeMillis()`- 使用`perf4j`或类似的工具来测量时间，因为第一个测量全局系统时间，因此包括系统上运行的所有其他程序的执行时间！

# java - 当行数 > 10,000 时，jxls 文件生成永远挂起

> ID：12205472
> 
> 赞同：4
> 
> 时间：2012-08-30T21:02:56.317
> 
> 标签：java, performance, jxls

我有一个生成的 excel 报告。大多数情况下，当行数达到约 2,000 时，它可以正常工作。

今天早上，我试图生成一个包含 11,000 行的报告，但无法弄清楚为什么它会挂起，因为它遵循相同的未更改代码 - 见下文。除了 XLSTransformer 可能真的很慢之外，我仍然无法弄清楚？

```
List<Map<String, Object>> maps = new ArrayList<Map<String, Object>>();
    Map<String, Object> sheetData = null;
    for(EntityForecastWrapper wrapper : wrappers) {
        sheetName = Integer.toString(wrapper.getEntityId());
        sheetNames.add(sheetName);
        sheetData = new HashMap<String, Object>();
        sheetData.put("wrapper", wrapper);
        maps.add(sheetData);
    }
    Map<String, Object> beansMap = new HashMap<String, Object>();
    Workbook workbook = null;
    XLSTransformer transformer = new XLSTransformer();
    try {
        Logger.getLogger(getClass()).error("generating excel");
        InputStream is = getClass().getResourceAsStream(getReportTemplate().getLabel());
        workbook = transformer.transformMultipleSheetsList(is, maps, sheetNames, "map", beansMap, 0);
        Logger.getLogger(getClass()).error("generated excel");
        /*FileOutputStream fos = new FileOutputStream(new File(fileName));
        workbook.write(fos);
        fos.flush();
        fos.close();*/
    } catch(Exception e) {
        Logger.getLogger(getClass()).error("Error writing excel data: ", e);
    } 
```

代码基本上永远不会从行返回：

```
workbook = transformer.transformMultipleSheetsList(is, maps, sheetNames, "map", beansMap, 0); 
```

当行数不是很大时（例如 500 到 1000 行），它非常快。行内容永远不会改变，相同的列数......

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T06:43:48.977

Jxls 尝试一次在 RAM 中构建整个文档。我快速翻阅了[代码](http://grepcode.com/file/repo1.maven.org/maven2/net.sf.jxls/jxls-core/0.9.9/net/sf/jxls/transformer/XLSTransformer.java)并看到，jxls 在内部使用 POI HSSFWorkbook - 没有流来帮助处理大量数据。

一个可行的解决方案是处理较小部分的数据（在我的情况下约为 1000 个条目）并将 jxls 的输出临时保存在文件系统上。处理完所有数据后，使用 poi 合并文件。不是一个非常漂亮的解决方案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T15:47:08.113

In our case this happens when the JXLS template uses [dynamic columns](http://jxls.sourceforge.net/samples/dynamiccolumnssample.html) or other tags. When we have a simple template just with `${name}` property access then it runs fast. We have switched to direct POI API for more complicated reports.

Update: also processing of XLSX templates consumes much more memory and time then XLS templates.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-30T13:40:31.207

我们对 Jxls XLS Transformer 进行了许多测试，并与 Jett XLS Transformer 进行了一些比较。

Jxls 转换器（2.6.0 版）：

*   当一切准备就绪（没有任何格式或公式，只有简单的文本）例如 12000 行需要 2 秒时，简单生成到 XLS 非常快（大约比 Jett 快 1.5-2 倍）。
*   生成到 XLSX 的速度非常慢（性能泄漏）。比生成到 XLS 慢大约**1000 倍（原文如此！），例如 12000 行需要 30 分钟。**
*   模板功能有限，有些东西不好用或者没有很好的解释，怎么用

Jett 变压器（0.11.0 测试版）：

*   快速简单地生成 XLS（比 Jxls 慢大约 1.5-2 倍），当一切准备就绪时（没有任何格式或公式，只有简单的文本），例如 12000 行需要 4 秒。
*   对 XLSX 的生成速度较慢。比生成到 XLS 慢大约 10 倍，例如 12000 行需要 40 秒。
*   模板语法更简单，功能更多（未测试）

# python - Searching a file with input from another file in python

> ID：12205474
> 
> 赞同：0
> 
> 时间：2012-08-30T21:03:02.810
> 
> 标签：python, file

What I am trying to do is read a line from one file to a string, then search another file for the line that contains that string and parse that line with `.split()`.

My code looks like this:

```
for line in portslist:
    marker = line.split()
    printername = marker[0]
    address = marker[1]

    for lines in constantfile:
        if address in line: #if the desired address is in the line
            lineholder = line
            lineholder = lineholder.split()
            oldonline = lineholder[4]
            oldutc = lineholder[5]
            status = lineholder[2] 
```

However, I get the error

```
in readermain oldonline=lineholder[4] IndexError: list index out of range 
```

After some trouble shooting it appears that the line from my constantfile is never being assigned to line. Instead it seems the line from the file portlist is being assigned to line, which only has an index of two.

My question is how to make the line that the string `"address"` is in assigned to line so I can parse and use it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:08:09.970

I think you are using `line` where you should be using `lines`:

```
for lines in constantfile:
    if address in lines: #if the desired address is in the line
        lineholder=lines.split()
        # etc. 
```

Also, if `constantfile` is a file object, that iterator will be exhausted after the first pass of the outer `for` loop.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:13:29.183

Your indentation makes it so that even if "address in line" evaluates false, the rest of the block will run.

Second, the line from constantfile should assign to variable "lines". Reword the corresponding code to

```
if address in lines:
    lineholder = lines
    ... 
```

and you should be good.

Furthermore, I would suggest a less arbitrary naming convention that makes it explicit that you are dealing with lines from 2 different files. For example

*   line -> portline
*   marker -> portlinesplit
*   lines -> constline
*   lineholder -> constlinesplit

That way it would be less confusing, and your code would be more readable.

# android - 测试安卓应用的建议方法

> ID：12205476
> 
> 赞同：1
> 
> 时间：2012-08-30T21:03:15.443
> 
> 标签：android, testing

我正准备在 Google Play 市场上发布 6 个应用程序，一个工作人员带来了一部新手机，该手机运行的 android 版本显示支持清单文件，但它没有按预期工作，即使它确实在模拟器上工作。这就提出了一个问题

> 如果不购买每台设备，我们如何确保我们的应用程序可以在运行清单文件表示支持的 android 版本的所有设备上运行？

有没有建议的方法来做到这一点？不同屏幕尺寸、密度和 android 版本的组合可以使 android 开发成为真正的痛苦。

编辑：

“没有按预期工作”的部分是一些 javascript 调用。特别是像 window.width 和 window.height 这样的调用，在 2.3.4 上，宽度被报告为高度，高度被报告为宽度，但不是 2.1 或 3+。另一个问题，同样是 2.3.4 和 javascript，window.open(url, target) 调用只会`shouldOverrideUrlLoading`在我`WebViewClient`第一次为每个目标而不是每次调用时调用。同样，它适用于 2.1 和 3+。

目前，我在运行 2.3.4、2.3.5、4.0.3 和 4.0.4 的设备上进行测试。我还在运行 2.1、2.2、2.3.3、3.0、3.1、3.2 和 4.1 的模拟器上进行了测试，这些模拟器具有各种屏幕尺寸和密度。javascript bug 不存在于 2.3.3 或任何其他模拟器上，这就是为什么我宁愿在设备上进行测试，它们让我更准确地了解用户会遇到什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:21:54.430

首先，[这是一个](http://www.scribd.com/doc/95607604/Pocket-Gems-Android-QA-Process)讨论如何潜在地解决问题的演示文稿。这显然不容易，但这[是另一个类似的 SO 帖子](https://stackoverflow.com/questions/1852248/is-there-an-android-testing-service-i-can-use-to-give-me-real-debug-information)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T22:28:00.167

我不完全是你所说的“没有按预期工作”的确切意思，但这可以帮助你很多：

在我看来，测试您的 Android 应用程序的最佳方法是安装 Jenkins 持续集成服务器，并使用 Android Emulator 插件在您的应用程序上执行应用程序，该应用程序构建在具有各种设置（屏幕密度、操作系统版本等）的模拟器上. 该插件可以自动截取屏幕截图，因此您可以在之后查看您的应用程序在每个配置上的外观。此外，构建和测试可以每天触发，或者每次您在 SCM（Git、SVN 等）上提交一些代码时触发。

插件的配置详见官网：[https ://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin)

# iphone - EKEventStoreChangedNotification 被多次调用

> ID：12205484
> 
> 赞同：8
> 
> 时间：2012-08-30T21:04:01.187
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ekeventkit

我在我的应用程序中使用 EKEventStore。我获取默认存储并注册以便在`EKEventStoreChangedNotification`对日历进行更改时收到通知。但是，当进行更改时，通知的发送者会被调用数次 (5-10) 次，有时每次调用之间的间隔长达 15 秒。这弄乱了我的代码，使事情变得更加难以处理。对此我能做些什么吗？

谢谢

**iOS7 编辑：**似乎在 iOS7 发布时，这个问题已经消失了。现在，无论对 CalendarStore 所做的更改如何，都只会`EKEventStoreChangedNotification`发送一个。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-30T21:22:20.100

这是通知的确切发送方式以及每个通知实际通知的内容的结果。以我的经验，您可以期望收到至少一个通知，用于更改项目（事件、提醒等），并且至少收到一个通知，以更改该项目的包含日历。

在没有看到您的代码并且不知道正在进行哪些更改的情况下，我不能对答案太具体；但是，一般来说，您有两种选择。

1.  更仔细地观察更改 - 如果某些通知涉及与您的应用程序无关的事件，或者您已经处理了特定项目的更改，那么您可以放心地忽略它们。
2.  将多个更改合并为一批处理程序代码。基本上，当您收到通知时，与其立即启动响应，不如启动一个计时器，该计时器将在一两秒内运行响应。然后，如果在计时器触发之前收到另一个通知，您可以取消计时器并重置它。这样，您可以批量处理在短时间内出现的多个通知，并且只响应一次（当计时器最终触发时）。

后一种解决方案是我的首选答案，可能看起来像（暂时忽略线程问题）：

```
@property (strong) NSTimer *handlerTimer;

- (void)handleNotification:(NSNotification *)note {
    // This is the function that gets called on EKEventStoreChangedNotifications
    [self.handlerTimer invalidate];
    self.handlerTimer = [NSTimer timerWithTimeInterval:2.0
                                                target:self
                                              selector:@selector(respond)
                                              userInfo:nil
                                               repeats:NO];
    [[NSRunLoop mainRunLoop] addTimer:self.handlerTimer
                              forMode:NSDefaultRunLoopMode];
}

- (void)respond {
    [self.handlerTimer invalidate];
    NSLog(@"Here's where you actually respond to the event changes");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-03T16:02:24.343

我也有这个问题。经过一些调试后，我意识到我导致了额外的`EKEventStoreChangedNotification`调用（例如，通过创建或删除`EKReminder`s）。当`EKEventStoreChangedNotification`我执行`estore.commit()`.

我通过像这样声明全局变量来解决这个问题：

```
// the estore.commit in another function causes a new EKEventStoreChangedNotification. In such cases I will set the ignoreEKEventStoreChangedNotification to true so that I DON'T trigger AGAIN some of the other actions.
var ignoreEKEventStoreChangedNotification = false 
```

然后在`AppDelegate.swift`我听的地方这样做`EKEventStoreChangedNotification`：

```
nc.addObserver(forName: NSNotification.Name(rawValue: "EKEventStoreChangedNotification"), object: estore, queue: updateQueue) {
            notification in

        if ignoreEKEventStoreChangedNotification {
            ignoreEKEventStoreChangedNotification = false
            return
        }

        // Rest of your code here.

} 
```

在我对 estore 进行更改的函数中，我这样做：

```
//
// lots of changes to estore here...
//
ignoreEKEventStoreChangedNotification = true        // the estore.commit causes a new EKEventStoreChangedNotification because I made changes. Ignore this EKEventStoreChangedNotification - I know that changes happened, I caused them!
try estore.commit() 
```

全局变量并不漂亮（特别是如果您从事函数式编程），但它确实有效。

# wordpress - wp_tag_cloud 用于分层分类法

> ID：12205490
> 
> 赞同：0
> 
> 时间：2012-08-30T21:04:31.813
> 
> 标签：wordpress, tag-cloud

我想使用自定义分层分类法在网站上显示标签云。

我的问题是默认 wp_tag_cloud 根据每个类别/标签的帖子数量显示。我希望它也能总结孩子们的人数。

希望这是有道理的，但要澄清

*   类别 1 1 个帖子
    *   Subcat1 2 个帖子
    *   Subcat2 1 个帖子
*   Cat2 5 个帖子

标签云中的 Cat 1 应该附加 4 个帖子，通过查看 subcat1（2 个帖子）或 subcat 2（1 个帖子）可以获得更大的特异性。目前，Cat 1 显示 1 个帖子。

目前我唯一能想到的就是将结果捕获到一个数组中，然后循环返回以在必要时进行更正 - 有没有人有更高效/优雅的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:38:15.557

所以，我查看了核心并能够解决这个问题，在这里回答以防其他人有同样的需求。

[wp_tag_cloud](http://codex.wordpress.org/Function_Reference/wp_tag_cloud)调用[get_terms](http://codex.wordpress.org/Function_Reference/get_terms)。get_terms 使用从 wp_tag_cloud 调用传递的参数调用，因此您实际上可以添加其他值来更改默认行为。具体来说，我可以利用 'pad_counts' 来解决我的问题。

最后的调用看起来像这样。

```
<?php wp_tag_cloud(array('taxonomy'=>'mycustomtaxonomy','pad_counts'=>1)); ?> 
```

# vba - 为什么我在这个 MS Access 代码中得到运行时错误 91？

> ID：12205496
> 
> 赞同：1
> 
> 时间：2012-08-30T21:04:51.713
> 
> 标签：vba, ms-access

所以，我有一个 MS Access 数据库应用程序。在这个应用程序中是一个主窗体，其中包含许多子窗体。特别是一个表单有一个下拉框，我用数据库查询中的日期填充它。选择这些日期之一时，我运行了一个子例程，该子例程应该用历史记录信息在子形式上更新记录集。下面是一些编辑过的代码（刚刚从查询中删除了大量字段）

```
Private Sub pickdate_AfterUpdate()
'''''''''''''''''''''''''''''''''''''''''
'   Add review history by selected date
'''''''''''''''''''''''''''''''''''''''''
Dim rs As Recordset
Set rs = CurrentDb.OpenRecordset("SELECT model, entered_date FROM history WHERE entered_date=#" & Me.pickdate.value & "# ORDER BY model DESC", dbOpenDynaset, dbSeeChanges)

If rs.BOF = False Then rs.MoveFirst
While rs.EOF = False

    Forms!main!histories.Form.Recordset.AddNew
    Forms!main!histories.Form.Recordset![model] = rs![model]
    Forms!main!histories.Form.Recordset![entered_date] = rs![entered_date]
    Forms!main!histories.Form.Recordset.Update

    rs.MoveNext
Wend
End Sub 
```

我在线上得到错误`Forms!main!histories.Form.Recordset.AddNew`。

我尝试了该行的以下版本：

```
Forms!main!histories.Form.Recordset.AddNew
main!histories.Form.Recordset.AddNew
histories.Form.Recordset.AddNew
Me.Form.Recordset.AddNew
Me.Recordset.AddNew
Me.AddNew
Me.main!histories.Form.Recordset.AddNew
Me!histories.Form.Recordset.Addnew
Me!main!histories.Form.Recordset.AddNew 
```

我真的不知所措，试图找出问题所在。该子表单具有存储信息的所有适当框。我给了他们标签以匹配他们将进入他们的数据库列。我尝试将它们的控制源设置为数据库列名，而不是将它们设置为任何内容。我查找了一百种不同的“解决方案”，但似乎没有一个适合问题或工作。

我觉得我忽略了一些非常容易的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:26:12.100

我估计你的名字有问题。检查所有这些。不要忘记子窗体由两部分组成，子窗体控件和包含的窗体。这些通常具有相同的名称，但并非总是如此。在您使用的代码中，您必须具有子窗体控件的名称，而不是包含的窗体。如果手动将数据输入子表单无法正常工作，则您的控件未绑定。

这适用于我的示例表。

```
Dim rs As Recordset
Set rs = CurrentDb.OpenRecordset("SELECT atext from table1 WHERE akey=21")

If rs.BOF = False Then rs.MoveFirst
While Not rs.EOF '= False
    Me.Table1_subform1.Form.Recordset.AddNew
    Me.Table1_subform1.Form.Recordset!AText = rs!AText
    Me.Table1_subform1.Form.Recordset.Update

    rs.MoveNext
Wend 
```

要运行查询，您可以说：

```
sSQL="INSERT INTO NameOfTable (model, entered_date) " _
& "SELECT model, entered_date FROM history WHERE entered_date=#" _
& Me.pickdate.value & "#"

CurrentDB.execute, dbfailOnError 
```

您可以在查询设计窗口中检查 sql 的工作情况。

# asp.net-mvc - Meleze.web 和 Web.Config 转换

> ID：12205498
> 
> 赞同：0
> 
> 时间：2012-08-30T21:05:01.913
> 
> 标签：asp.net-mvc, web-config, minify

我正在为我的 Web 应用程序使用 Meleze.Web 库，并且我只想在发布版本上添加压缩。

我试图做一个 web.config 转换，但在 Web.Release.config 文件中，当我尝试做

```
<configuration>

   <system.web.webPages.razor>
      <host xdt:Transform="Replace" factoryType="Meleze.Web.Razor.MinifyHtmlWebRazorHostFactory, Meleze.Web, Version=1.4.0.3, Culture=neutral, PublicKeyToken=0a868b5321967eda" />
   </system.web.webPages.razor>

</configuration> 
```

给我一个错误，说 :Transform 没有声明。任何帮助，将不胜感激。请注意，这是 Views 文件夹中的 Web.Config。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T13:22:42.827

您可以使用以下 Web.Release.config 文件来转换您的 Web.config 文件。

```
<?xml version="1.0" encoding="utf-8"?>

<!-- For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <!--
    In the example below, the "SetAttributes" transform will change the value of 
    "connectionString" to use "ReleaseSQLServer" only when the "Match" locator 
    finds an attribute "name" that has a value of "MyDB".

    <connectionStrings>
      <add name="MyDB" 
        connectionString="Data Source=ReleaseSQLServer;Initial Catalog=MyReleaseDB;Integrated Security=True" 
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
    </connectionStrings>
  -->
  <system.web.webPages.razor>
    <host factoryType="Meleze.Web.Razor.MinifyHtmlWebRazorHostFactory, Meleze.Web, Version=1.4.0.6, Culture=neutral, PublicKeyToken=0a868b5321967eda" xdt:Transform="Replace" />
  </system.web.webPages.razor>

  <system.web>
    <!--
      In the example below, the "Replace" transform will replace the entire 
      <customErrors> section of your web.config file.
      Note that because there is only one customErrors section under the 
      <system.web> node, there is no need to use the "xdt:Locator" attribute.

      <customErrors defaultRedirect="GenericError.htm"
        mode="RemoteOnly" xdt:Transform="Replace">
        <error statusCode="500" redirect="InternalError.htm"/>
      </customErrors>
    -->
  </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T18:09:54.430

对我来说，它工作得很好。我遵循的步骤在这里：

1.  通过包管理器控制台安装 Meleze.Web`PM> Install-Package Meleze.Web`
2.  打开`View/Web.config`并将`<host...../>`里面的行`<system.web.webPages.razor>`替换为`<host factoryType="Meleze.Web.Razor.MinifyHtmlWebRazorHostFactory, Meleze.Web, Version=1.4.0.3, Culture=neutral, PublicKeyToken=0a868b5321967eda" />`

这就是我所做的。顺便说一句，我正在使用 MVC 4。

# vbscript - .Batch or .VBS (Win_Server_2003)

> ID：12205505
> 
> 赞同：0
> 
> 时间：2012-08-30T21:05:32.130
> 
> 标签：vbscript, batch-file

I have two .csv files: inputfile.csv and mainfile.csv

I need to write a script that:

1- will read one by one all the records in inputfile.csv

2- then find if there is a match in the mainfile.csv

3- if there is a match then do nothing and read the next record from inputfile.csv

4- else if there is not a match in the mainfile.csv write that record from the inputfile.csv to the mainfile.csv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T02:30:18.343

此解决方案用于`Scripting.Dictionary`记录`mainfile.csv`. 然后，要查看 in 中的一行`inputfile.csv`是否是新行，只需查看该行是否存在于字典中。例如：

**主文件.csv**

```
exists,one
exists,two
exists,three
exists,four
exists,five 
```

**输入文件.csv**

```
exists,two
new,one
exists,four
new,two
new,three 
```

**mainfile.csv** *（运行程序后）*

```
exists,one
exists,two
exists,three
exists,four
exists,five
new,one
new,two
new,three 
```

**这是代码：**

* * *

```
Option Explicit

Const ForReading = 1, ForWriting = 4, ForAppending = 8

Dim oFso : Set oFso = CreateObject("Scripting.FileSystemObject")
Dim oDict : Set oDict = CreateObject("Scripting.Dictionary")

'
' Read the contents of 'mainfile.csv'. Add each line to a dictionary
' to allow for a quick lookup.
'
Dim oFileMain : Set oFileMain = oFso.OpenTextFile("mainfile.csv", ForReading)
Dim sLine
While Not oFileMain.AtEndOfStream
    sLine = oFileMain.ReadLine()
    oDict.Add sLine, True
Wend
oFileMain.Close
Set oFileMain = Nothing

'
' Re-open 'mainfile.csv' in append mode.
'
Set oFileMain = oFso.OpenTextFile("mainfile.csv", ForAppending)

'
' Read the contents of 'inputfile.csv'. Write a line to 'mainfile.csv'
' only if that line does not exist in the dictionary.
'
Dim oFileInput : Set oFileInput = oFso.OpenTextFile("inputfile.csv", ForReading)
While Not oFileInput.AtEndOfStream
    sLine = oFileInput.ReadLine()
    If Not oDict.Exists(sLine) Then  ' not a duplicate!
        WScript.Echo "Found new line: [" & sLine & "]"
        oFileMain.WriteLine sLine
    End If
Wend
oFileInput.Close
Set oFileInput = Nothing

'
' Wrap it up.
'
oFileMain.Close
Set oFileMain = Nothing

Set oDict = Nothing
Set oFso = Nothing

' End 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:28:57.737

这是我在 python 中进行的最佳尝试，不知道文件的结构：

```
with open("mainfile.csv", "r") as main:
    records = [x.strip() for x in main.readlines()]
with open("inputfile.csv", "r") as input:
    inputs = [x.strip() for x in input.readlines()]
for input in inputs:
    if input not in records:
        records.append(input)
with open("mainfile.csv", "w") as main:
    for record in records:
        main.write(record + "\n") 
```

因此，对于以下文件，您可以从以下内容开始：

输入文件.csv：

```
A quick brown fix
Two turtle doves
Feather boa 
```

主文件.csv：

```
Some other stuff
Two turtle doves
Friends in low places
Feather boa
Another Fairly boring thing 
```

运行脚本后 mainfile.csv 如下所示：

```
Some other stuff
Two turtle doves
Friends in low places
Feather boa
Another Fairly boring thing
A quick brown fix 
```

# sqlite - 临时表写入是否会在 SQLite 中锁定数据库？

> ID：12205506
> 
> 赞同：0
> 
> 时间：2012-08-30T21:05:31.843
> 
> 标签：sqlite, concurrency, temp-tables, system.data.sqlite

根据[SQLite 常见问题解答](http://www.sqlite.org/faq.html#q5)：

> 多个进程可以同时执行 SELECT。但是只有一个进程可以在任何时候对数据库进行更改......

当 2 个进程同时创建/插入/更新/删除/删除*临时表*时会发生什么？这些操作是否也会锁定数据库？

我正在使用 .NET 端口 System.Data.SQLite 如果这有所作为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T22:49:36.197

[http://www.sqlite.org/lockingv3.html](http://www.sqlite.org/lockingv3.html)说不参与事务的数据库不会得到日志。在任何情况下，修改临时表只会在 TEMP 数据库上设置写锁，这是每个进程私有的。

# php - 如何使用 CodeIgniter 强制执行描述性 URL？

> ID：12205510
> 
> 赞同：1
> 
> 时间：2012-08-30T21:05:38.130
> 
> 标签：php, codeigniter, mod-rewrite, friendly-url, codeigniter-url

这个问题可能存在于其他地方，如果是这样，我道歉。在搜索了一个小时没有成功后，我不禁认为我走错了路。

本质上，我正在寻找的是一种在页面 URL 中强制描述或标题的方法。我正在使用 CodeIgniter，因此将漂亮的 URL 放在任何我想要的地方都非常简单。

我本可以有：

```
http://mysite.com/controller/function/what-ever-i-want/can-go-here 
```

它总是会去：

```
http://mysite.com/controller/function/ 
```

与变量值`what-ever-i-want`和`can-go-here`

如果只给出控制器/功能，我想要的是自动重写 URL 以包含标题。

所以，如果有人去：

```
http://mysite.com/controller/function/ 
```

它应该自动将 url 重写为

```
http://mysite.com/controller/function/a-more-descriptive-title/ 
```

我正在谈论的功能的一个很好的例子是 SO URL。如果您访问[https://stackoverflow.com/questions/789439](https://stackoverflow.com/questions/789439 "https://stackoverflow.com/questions/789439")，它会自动将其重写为[https://stackoverflow.com/questions/789439/how-can-i-parse-descriptive-text-to-a-datetime -目的](https://stackoverflow.com/questions/789439/how-can-i-parse-descriptive-text-to-a-datetime-object "https://stackoverflow.com/questions/789439/how-can-i-parse-descriptive-text-to-a-datetime-object")

我怀疑涉及到 mod_rewrite，但我想提出最适合使用 CodeIgniter 的解决方案。

我对漂亮的 url 场景非常陌生，并且拼命寻求有更多经验的人的建议。提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:15:04.783

我不使用 CodeIgniter，但您应该能够将代码放置在控制器的 __construct 中，或者如果 CI 有这些，则可以放置在某种预操作事件中。

您只需查找正在查看的实体的相应 URL，并在必要时执行 301 重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T23:31:37.990

我使用 Fiddler2 来了解 Stackoverflow 是如何做到这一点的。

部分回应来自`http://stackoverflow.com/questions/12205510/`

```
HTTP/1.1 301 Moved Permanently
Location: /questions/12205510/how-can-i-enforce-a-descriptive-url-with-codeigniter
Vary: *
Content-Length: 0 
```

所以基本上当我们去的时候，`controller/function/`我们需要将用户重定向到`controller/function/my-awesome-title`. 我编写了简单的控制器来做到这一点：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Controller extends CI_Controller
{
    protected $_remap_names = array();

    function __construct()
    {
        parent::__construct();

        $this->_remap_names['func'] = "My Awesome Title";
    }

    function _remap($method, $arguments)
    {
        if(
            isset($this->_remap_names[$method])
            && sizeof($arguments) == 0
            && method_exists($this, $method)
            )
        {

            $this->load->helper("url");

            $title = str_replace(" ", "-", $this->_remap_names[$method]);
            $title = strtolower($title);

            $url   = strtolower(__CLASS__)."/$method/$title";
            $url   = site_url($url);

            // if you dont want to have index.php in url
            $url   = preg_replace("/index\.php\//", "", $url);

            header("HTTP/1.1 301 Moved Permanently");
            header("Location: $url");
            header("Vary: *");
        }
        else
        {
            call_user_func_array(array($this,$method), $arguments);
        }
    }

    function func()
    {
        echo "<h1>";
        echo $this->_remap_names[__FUNCTION__];
        echo "</h1>";
    }

}; 
```

CodeIgniters`_remap`函数的文档可以[在](http://codeigniter.com/user_guide/general/controllers.html)Remapping Function Calls 部分找到。

# php - 使用 CASE WHEN THEN 语句更新 MySQL 表中的多行 - 不起作用

> ID：12205518
> 
> 赞同：0
> 
> 时间：2012-08-30T21:05:56.697
> 
> 标签：php, mysql, sql-update, case, case-when

这让我发疯，所以任何帮助将不胜感激。

我正在尝试通过用户给出的数字来增加表格特定行中​​的点总数。我有一些 PHP 可以根据表单输入动态生成此语句：

```
UPDATE users SET points = CASE userID 
    WHEN 11 THEN (points + 1) 
    WHEN 16 THEN (points + 6) 
    WHEN 7 THEN (points + 7) 
    WHEN 10 THEN (points + 10) 
WHERE userID IN (11,16,7,10) 
END 
```

由于多个访问器的问题，我不想将值存储在 PHP 变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:10:24.357

你的语法是错误的。

您需要在 WHERE 之前添加“END”：

```
UPDATE users
    SET points =
        (CASE userID 
             WHEN 11 THEN (points + 1) 
             WHEN 16 THEN (points + 6) 
             WHEN 7 THEN (points + 7) 
             WHEN 10 THEN (points + 10) 
         end)
WHERE userID IN (11,16,7,10) 
```

我重新格式化了查询。我强调将“CASE”的“END”放在同一列中，以防止出现此类问题。

# android - Android 共享首选项

> ID：12205525
> 
> 赞同：0
> 
> 时间：2012-08-30T21:06:15.680
> 
> 标签：android, sharedpreferences

我有一个偏好屏幕，我可以在其中更改一些设置。在代码中，我可以毫无问题地通过共享首选项编辑它们。

我有 2 个问题： - 当手机重新启动时，这些设置是否会保存在某个地方？- 我可以在 sharedprefs 中插入其他设置吗？我的意思是未在首选项屏幕中声明的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:08:50.460

**当手机重新启动时，这些设置是否会保存在某个地方？**

是的，它们保存在设备上的 xml 文件中。

**我可以在 sharedprefs 中插入其他设置吗？**

是的，您可以在 sharedprefs 中有很多设置，通过 PreferenceActivity 显示或修改的唯一设置是您在布局文件中设置的那些，它们的键将是布局文件中指定的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:21:06.533

如前所述，**SharedPreferences 是持久化**的（写入 xml 文件），因此即使您重新启动它们也始终可用（只要您在属于 SharedPreference 的编辑器上调用 commit()）。

至于将其他设置插入共享首选项，

**如果您想要更有条理，您实际上可以拥有多个 SharedPreferences（在不同的文件中），但您绝对可以在其中保存您想要的任何内容。**

要获取活动上下文的默认共享首选项：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context); 
```

要获取您创建的许多 SharedPreference 之一，请使用以下命令：

```
SharedPreferences prefs = context.getSharedPreferences(String name, int mode) 
```

name 是文件模式的名称，模式为 MODE_PRIVATE、MODE_WORLD_READABLE、MODE_WORLD_WRITEABLE、MODE_MULTI_PROCESS，具体取决于您希望其他应用程序如何访问您的应用程序首选项，这可能很有用

# c# - 将数据从多个线程发送回主线程的最佳方法是什么？

> ID：12205528
> 
> 赞同：1
> 
> 时间：2012-08-30T21:06:26.937
> 
> 标签：c#, multithreading

我有一个主线程，我确实创建了另一个 n 线程。每个 n 线程正在填充一个`List<String>`. 当所有线程都完成后，它们会被加入，我希望将所有这些 n 线程列表放在主线程的`List<List<String>>`BUT 中。主线程应该能够对其进行操作`List<List<String>>`。每个 n 线程贡献了一个`List<String>`.

我有 c# .NET 3.5，我想避免`static List<List<String>>`

```
 Thread t = new Thread(someObjectForThreading.goPopulateList);
            list_threads.Add(t);
            list_threads.last().start() 
```

list_threads 中的所有线程继续并填充它们的列表，当它们完成时，我想要类似的东西

```
 //this = mainThread
 this.doSomethingWith(List<List<String>>) 
```

编辑：**嗯没有“标准概念”如何解决这样的任务？**许多线程在一个列表上操作，当所有线程都加入时，主线程可以继续对列表进行操作。

Edit2：**不能是静态****的。`List<List<String>> listOfLists`**可以`public or private`。首先，我需要 n 线程来操作（并锁定）listOfLists，插入它们的列表，并且在所有 n 线程完成插入它们的列表之后，我将加入线程并且主线程可以继续进行业务逻辑并在`listOfLists`

[我想我会重新阅读http://www.albahari.com/threading/](http://www.albahari.com/threading/)的某些部分报告回来

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T21:31:11.523

这是一个使用等待句柄（在 ManualResetEvent 的情况下）的简单实现，以允许每个工作线程向主线程发出信号，表明它已完成其工作。我希望这有点不言自明：

```
private List<List<string>> _listOfLists;

public void CreateListOfLists()
{
    var waitHandles = new List<WaitHandle>();

    foreach (int count in Enumerable.Range(1, 5))
    {
        var t = new Thread(CreateListOfStringWorker);
        var handle = new ManualResetEvent(false);
        t.Start(handle);
        waitHandles.Add(handle);
    }

    // wait for all threads to complete by calling Set()
    WaitHandle.WaitAll(waitHandles.ToArray());

    // do something with _listOfLists
    // ...
}

public void CreateListOfStringWorker(object state)
{
    var list = new List<string>();
    lock (_listOfLists)
    {
        _listOfLists.Add(list);
    }

    list.Add("foo");
    list.Add("bar");

    ((ManualResetEvent) state).Set(); // i'm done
} 
```

请注意，当我将每个线程的列表添加到列表的主列表时，我只是在锁定。没有必要为每个添加锁定主列表，因为每个线程都有自己的列表。有道理？

**编辑：**

使用等待句柄的目的是在处理列表列表之前等待每个线程完成。如果您不等待，那么您可能会在工作人员仍在向其中添加字符串时尝试枚举其中一个 List 实例。这将导致抛出 InvalidOperationException，并且您的线程将死亡。您不能枚举一个集合并同时修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:09:43.360

而不是使`static List<List<String>>`make 成为本地`List<List<String>>`并将其传递给线程将运行的对象。当然，您需要将其包装`List`在同步包装器中，因为它被多个线程访问。

```
List<List<String>> list = ArrayList.synchronized(new ArrayList<List<String>>());

// later
SomeObject o = new SomeObjectForThreading(list);
Thread t = new Thread(o.goPopulateList);
list_threads.Add(t);
list_threads.last().start();

// even later
this.doSomethingWith(list); 
```

在`o.goPopulateList`中，您可能有

```
List<String> temp = new ArrayList<String>();
temp.add(random text);
temp.add(other random text);
this.list.add(temp); // this.list was passed in at construct time 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:12:58.033

我将为每个线程提供一个回调方法，该方法更新主线程中的列表，并受`lock`语句保护。

编辑：

```
class Program
{
    static List<string> listOfStuff = new List<string>();

    static void Main(string[] args)
    {
        List<Thread> threads = new List<Thread>();
        for (int i = 0; i < 20; i++)
        {
            var thread = new Thread(() => { new Worker(new AppendToListDelegate(AppendToList)).DoWork(); });
            thread.IsBackground = true;
            threads.Add(thread);
        }
        threads.ForEach(n => n.Start());
        threads.ForEach(n => n.Join());
        Console.WriteLine("Count: " + listOfStuff.Count());
        Console.ReadLine();
    }

    static void AppendToList(string arg)
    {
        lock (listOfStuff)
        {
            listOfStuff.Add(arg);
        }
    }
}

public delegate void AppendToListDelegate(string arg);
class Worker
{
    AppendToListDelegate Appender;

    public Worker(AppendToListDelegate appenderArg)
    {
        Appender = appenderArg;
    }

    public void DoWork()
    {
        for (int j = 0; j < 10000; j++)
        {
            Appender(Thread.CurrentThread.ManagedThreadId.ToString() + "." + j.ToString());
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T21:28:25.600

```
private void someObjectForThreading.goPopulateList()
{
    Do threaded stuff...
    populate threaded list..

    All done..
    for (List list in myThreadedList)
    {
        myMainList.Add(list);
    }
} 
```

# vb.net - 串口读取包括在 vb.net 中写入的内容

> ID：12205531
> 
> 赞同：2
> 
> 时间：2012-08-30T21:06:35.727
> 
> 标签：vb.net, sms, serial-port, at-command

所以我正在尝试使用 AT 命令与 gsm 调制解调器通话，我正在尝试通过发送命令 AT 并接收 OK 来进行基本测试以确保调制解调器正常。问题是我收到“AT Blank Line OK”，有什么办法让我发送 AT 时，我只读 OK？

```
Imports System.IO.Ports

Public Class GUI
Dim Device As New System.IO.Ports.SerialPort()
Private Sub GUI_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)         Handles MyBase.Load
    Port.Text = "Select Port"
    For Each item As String In IO.Ports.SerialPort.GetPortNames
        Port.Items.Add(item)
    Next
    Device.BaudRate = 9600
    Device.Parity = Parity.None
    Device.StopBits = StopBits.One
    Device.DataBits = 8
    Device.Handshake = Handshake.RequestToSend
    Device.DtrEnable = True
    Device.RtsEnable = True
    Device.NewLine = vbCrLf
    Device.WriteTimeout = 5000
End Sub

Private Sub Port_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Port.SelectedIndexChanged
    Device.PortName = Port.SelectedItem.ToString
End Sub

Private Sub Send_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Send.Click
    Try
        Device.Open()
        Dim msg As String
        msg = Message.Text
        Device.DiscardInBuffer()
        Device.DiscardOutBuffer()
        Device.Write("AT" & vbCrLf)
        MsgBox(Device.ReadExisting())
    Catch ex As Exception
        MsgBox("Error!")
    End Try
    Device.Close()
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:08:46.597

听起来调制解调器设置为 Echo 命令。要关闭此功能，请先尝试发送`E0`。

[更多信息在这里](http://www.modemhelp.net/basicatcommand.shtml#E)

# c# - Git Repository 包含意外推送，如何保留本地工作副本而不是存储库中的内容？

> ID：12205532
> 
> 赞同：1
> 
> 时间：2012-08-30T21:06:35.093
> 
> 标签：c#, git

我团队中的某个人不小心向 GIT 推送了一个任何人都不应该拉取的提交（因为它包含许多更改并且基本上破坏了我们所拥有的一切）。

他试图恢复到另一个版本，但得到了一个错误。

所以基本上，他整天都在处理他的本地副本。没有人从存储库中推送或拉取。

我们想要做的是以某种方式保留他的本地更改，但删除他推送的内容。

我们怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:20:07.573

`git push --force`将强制推送您的本地分支，即使远程存储库上有新的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:23:29.753

您要么想要将本地 git repo 重置为预推送状态并将其推送到远程源，要么如果您有权访问您的 git 服务器，只需直接将其还原。

本地机器：

```
1\. git log
   get the commit id for the last usable commit
2\. git reset --hard <commit id>
   replace <commit id> with the id you retrieved in step 1
3\. git push -f origin <branch name> 
```

在 git 服务器上：

```
1\. git log
   get the commit id for the last usable commit
2\. git reset --hard <commit id>
   replace <commit id> with the id you retrieved in step 1 
```

一旦错误的提交消失，只需像往常一样推送新的更改。

这是一个常见的问题。[以前](https://stackoverflow.com/questions/588414/git-rolling-back-a-remote-repository)已针对此类事情发布了修复程序。请务必在询问之前搜索，可能会节省一些时间！

# javascript - node-mongodb-native - 游标在每次调用期间返回 null 作为最后一个值

> ID：12205533
> 
> 赞同：8
> 
> 时间：2012-08-30T21:06:39.597
> 
> 标签：javascript, node.js, mongodb, node-mongodb-native

所以。我有一个非常基本的脚本，它连接到数据库并`find`在包含大量文档的集合上执行操作并将其限制为 3 个项目。一切都运行顺利，除了在我的结果结束时，`null`脚本不会终止，而是在成功后安静地关闭连接。

在这里我声明我的参数并创建我的数据库对象：

```
var SERVER = 'localhost',
 PORT = 27017,
 DATABASE = 'test',
 COLLECTION = 'coll',
 mongo = require('mongodb'),
 db = new mongo.Db(DATABASE,
  new mongo.Server(SERVER, PORT, {auto_reconnect: true}),
  {}); 
```

在这里我连接到数据库并继续使用`find`游标和`each`函数查询它：

```
db.open(function(err, db) {
 if(err) throw err;
 var collection = new mongo.Collection(db, COLLECTION),
  cursor = collection.find({}, {}).limit(3);
 cursor.each(function(err, doc) {
  if(err) throw err;
  console.log(doc);
 });
 db.close();
}); 
```

结果很好：

```
{ _id: '1',
  a: 'first object' }
{ _id: '2',
  a: 'second object' }
{ _id: '3',
  a: 'third object' } 
```

直到一个点

```
null 
```

出现。

如上所述，脚本然后继续不终止。

我不明白为什么，并希望得到有关如何使它很好地终止的指针。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-23T20:09:26.653

这个问题已经有几年的历史了，并且已经有了一个可能的答案，但我只是想为那些在阅读本文后仍然感到困惑的人指出另一种可能性。事实证明，`each`重复调用`nextObject`实际上是为了在游标耗尽时返回 null 。

这里的答案是我需要的答案：[Node Mongo Native - 如何判断光标何时用尽？](https://stackoverflow.com/questions/12826520/node-mongo-native-how-to-tell-when-a-cursor-is-exhausted)

从节点 MongoDB 驱动程序文档： http: [//mongodb.github.io/node-mongodb-native/api-generated/cursor.html#nextobject](http://mongodb.github.io/node-mongodb-native/api-generated/cursor.html#nextobject)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T22:24:06.020

好吧，那太愚蠢了。没有在异步设置中编程的时间太长，您会犯错误：`db.close()`调用是在`each`循环结束之前进行的。因此返回`null`并被绞死。这是正确的代码：

```
db.open(function(err, db) {
 if(err) throw err;
 var collection = new mongo.Collection(db, COLLECTION),
  cursor = collection.find({}, {}).limit(3);
 cursor.each(function(err, doc) {
  if(err) throw err;
  if(doc !== null) console.log(doc);
  else db.close();
 });
}); 
```

我希望它会以某种方式为某人节省一些时间。

# ios - iOS - 是美国的用户吗？

> ID：12205539
> 
> 赞同：7
> 
> 时间：2012-08-30T21:07:05.517
> 
> 标签：ios, location, wifi, locale

我有什么方法可以在不询问用户位置的情况下检测用户是否在美国？例如，当我在计算机上访问 Fandango 时，它仅根据我的 WiFi 就知道我在哪个县和州。

如果我有一个没有 GPS 的设备，也许是 iPod Touch，我想验证它是否在美国，并且它们已连接到*WiFi* ……或者如果我有一部 iPhone，并且它已连接到*3G*和我想确保用户在美国，有没有办法可以在没有小的警报视图“ **__**想使用您当前的位置”的情况下检查该信息？我不需要确切的坐标，我只需要确认这些用户在美国（包括夏威夷和阿拉斯加）...地区？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T02:50:44.080

好的，您如何使用 IP 来做到这一点。

所以，geoplugin.net 有它很棒的 JSON api，它默认 IP 为当前连接，所以你要做的就是向这个地址发出请求：

```
http://www.geoplugin.net/json.gp 
```

惊人！对我来说，它返回以下数据：

```
geoPlugin({
  "geoplugin_request":"201.6.226.233",
  "geoplugin_status":200,
  "geoplugin_city":null,
  "geoplugin_region":"S&atilde;o Paulo",
  "geoplugin_areaCode":0,
  "geoplugin_dmaCode":0,
  "geoplugin_countryCode":"BR",
  "geoplugin_countryName":"Brazil",
  "geoplugin_continentCode":"SA",
  "geoplugin_latitude":-23.473301,
  "geoplugin_longitude":-46.665798,
  "geoplugin_regionCode":27,
  "geoplugin_regionName":"S&atilde;o Paulo",
  "geoplugin_currencyCode":"BRL",
  "geoplugin_currencySymbol":"&#82;&#36;",
  "geoplugin_currencyConverter":2.0198
}) 
```

好吧，现在你要做的就是解析这个“JSON”。它实际上不是 JSON，因为它有这个`geoplugin( {data} )`包装器。所以你可以懒惰地执行一些过滤，删除 NSSTring 的那些部分，也许。

我看你很着急，所以我利用空闲时间为你写了一些代码。这是非常不标准的，因为我不知道您是否正在使用任何有用的 REST 框架，但这里是：

```
NSString *url = [NSString stringWithFormat:@"http://www.geoplugin.net/json.gp"];

    NSString *locationData = [[NSString alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url]]
                                                encoding:NSUTF8StringEncoding]];

    locationData = [locationData stringByReplacingOccurrencesOfString:@"geoPlugin(" withString:@""];
    locationData = [locationData stringByReplacingOccurrencesOfString:@")" withString:@""];

    //user some json parser here.
    if([[[locationData JSONValue] valueForkey:@"geoplugin_countryCode"] isEqualToString:@"US"]){

        //proceed.
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T22:59:18.823

我会首先尝试检查运营商的[Mobile Country Code](http://developer.apple.com/library/ios/DOCUMENTATION/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html#//apple_ref/doc/uid/TP40009596-CH1-DontLinkElementID_3)。它将告诉您用户的蜂窝服务提供商的数字移动国家代码，并且用户不能更改，除非他们切换到不同国家的服务提供商。

```
#import <CoreTelephony/CTTelephonyNetworkInfo.h>
#import <CoreTelephony/CTCarrier.h>

CTTelephonyNetworkInfo *netInfo = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier *carrier = [netInfo subscriberCellularProvider];
NSString *mcc = [carrier mobileCountryCode]; 
```

这当然不适用于未连接到移动运营商的设备（iPod Touch、某些 iPad 等）。因此，作为后备，我将使用或创建自己的[IP 地理定位](http://en.wikipedia.org/wiki/IP_geolocation)API。您可以获得一个在国家一级准确率为 99.5% 的[免费数据库](http://www.maxmind.com/app/geolite)。这对于检测没有移动提供商的设备所在的国家/地区非常有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T06:36:59.460

在网络环境中，用户的[位置通常](http://en.wikipedia.org/wiki/Geolocation_software)通过 IP 地址来“识别”。

~~美国内部/外部确定的目的是什么？它有多准确/故障安全？~~ 当用户被错误地识别为在美国境内时，会有什么后果？当您产生假阴性时，后果是什么？当您有误报时，您是否违反了合同或许可？甚至犯罪？还是您只是不喜欢外国人，而伤害的是您（或您的雇主）的尊严？

真正的问题是：通过本地化 IP 地址获得的信息有多可靠，这种可靠性是否足以满足您的目的？

由于您有办法获取给定 IP 地址的国家/地区代码，因此您只需将其与给定的一组允许代码进行比较即可完成。也就是说，如果所述代码的源代码质量符合您的要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T11:46:19.797

最简单的解决方案是查询现有的 Web 服务，例如 hostip.info。

请注意，这只是一个示例（您应该以不同的方式查询 Web 服务），但为了简单起见：

```
NSError* error = nil;
NSString* country = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://api.hostip.info/country.php"] encoding:NSUTF8StringEncoding error:&error];
//will show US if user is in the United States
NSLog(@"%@", country); 
```

您还可以自己从[http://www.maxmind.com/app/installation](http://www.maxmind.com/app/installation)获得一个（免费）数据库，然后创建一个 Web 服务或将其包含在您的应用程序中（不推荐。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T17:55:48.463

看看[geoPlugin](http://www.geoplugin.com)，它有几个网络服务，您可以使用它来获取基于 IP 的用户位置及其免费。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T23:32:13.333

如果您不允许询问用户的位置，则使用基于 IP 的反向地理定位服务是唯一的方法。不幸的是，我从未使用过任何公共服务，因此我无法评论其中任何一项的质量。就美国境内的地区而言，这可能是不准确的（我已经看到来自 3G 连接的 IP 很遥远）。这可能会击败临时用户。

当然，老练的“攻击者”可以通过代理轻松绕过这个问题。似乎有[办法检测请求是否来自代理](https://stackoverflow.com/questions/4527345/determine-if-user-is-using-proxy)，但这些似乎也不是 100%。

如果使用用户的位置成为一个选项，那么您可以使用`CLGeocoder`，或使用从通过核心位置收集的纬度和经度值进行反向地理编码的 Web 服务。要获得更高级别的安全性，请签署纬度和经度值以帮助确保其完整性。我认为，如果您确实需要对国际用户参与提供最好的保护，那么这可能是最好的选择。

希望这有助于您走上正确的轨道。那里有很多选择，所以我相信根据您的需求，您将能够找到一个好的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T11:56:02.800

如果您想使用当前位置信息（纬度、经度）获取有关当前城市 - 国家/地区等的信息，您可以使用[它](http://dev.virtualearth.net/REST/v1/Locations/50.120578,8.701172?o=xml&key=AkB6nN7605FwtzAl0QyZFEGxuzkHP0ybZ-RU9GmsIkABXAF0hZAqiASEzmwpeAk-)

希望对你有用。祝你好运。

编辑：

哦，对不起，我没有看到有关 GPS 的信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-12T14:02:15.280

您将很容易在网络上找到数据库，该数据库会根据用户的 IP 告诉您用户所在的国家/地区，然后创建一个网络服务来检测用户 IP 并返回美国的标志。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-13T00:41:29.933

您说您不能向用户询问位置。您可以使用 CoreLocation 进行定位服务吗？如果您是，那么您很可能无需询问他们就可以获取他们的位置，只需使用定位服务即可。只要启用了wifi，就不需要GPS。在[这个线程](https://stackoverflow.com/questions/5786762/current-location-without-using-gps)中有几个很好的观点。

获得位置后，您可以使用地理编码器来确定它是否位于美国。

如果您需要更多详细信息，请询问，但这种方法确实非常简单。

# android - 在不创建帐户的情况下使用 SyncAdapter

> ID：12205540
> 
> 赞同：8
> 
> 时间：2012-08-30T21:07:09.327
> 
> 标签：android, asynchronous, android-syncadapter, android-account

我的应用程序允许人们使用和管理他们的数据，无论他们是否登录。不过，由于我唯一标识每台设备，我也想同步来自我的匿名用户（未登录的用户）的数据。所以，我想知道在这种情况下创建一个匿名帐户是否是一个好习惯，因为 SyncAdapters 仅适用于帐户。

我应该为我的匿名用户创建一个帐户，还是应该将他们的数据与线程/AsyncTasks/Loaders 同步？特别是，有什么方法可以让[ContentResolver.requestSync()](http://developer.android.com/reference/android/content/ContentResolver.html#requestSync%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle%29)在不需要帐户的情况下工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T04:26:03.690

在 Android 中使用 SyncAdapter/AccountManager 坦率地说，麻烦多于其价值。仅当您期望大量其他应用程序想要共享您的帐户数据（例如 Twitter 或 Facebook）时，才最好使用该特定模式。

我建议您只需编写自己的后台`Service`实现来进行同步。您可以使用`AlarmManager`通知服务定期同步。否则，您可以在用户使用基本的`AsyncTask`.

# email - 如何在一封电子邮件中向用户显示不同的内容

> ID：12205544
> 
> 赞同：0
> 
> 时间：2012-08-30T21:07:29.197
> 
> 标签：email, html-email

我们的软件系统旨在针对某些触发器（即输入的订单、打印的发票等）自动发送电子邮件。电子邮件格式为 HTML。电子邮件可以发送给员工和外部用户。

我们收到了一项功能请求，要求在我们的电子邮件底部添加一些文本和超链接。但是，这应该只对我们的员工可见，而不是对外部用户可见。我们*不想*发送每封电子邮件的两份副本（内部和外部）。

我们的员工都在使用某些版本的 Outlook。我们无法控制外部用户使用的电子邮件客户端。

是否可以根据正在阅读电子邮件的用户来更改电子邮件的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:43:25.323

一种可能的解决方案可以在发送电子邮件时完成。

例如，您将拥有一个电子邮件收件人数据库。在数据库中添加一个标志来说明他们是否是员工。

当您到达发送时间时，检查此标志并为该用户添加一些额外的 html。

这样，普通用户和员工似乎会收到“不同”的电子邮件。

# javascript - 流星排序不区分大小写

> ID：12205546
> 
> 赞同：4
> 
> 时间：2012-08-30T21:07:37.433
> 
> 标签：javascript, mongodb, underscore.js, meteor

有没有办法做一个不区分大小写的流星集合？如果是这样，我会在下面添加什么代码？

```
 var movies = Movies.find({}, {sort: {name: 1}}); 
```

或者是现在对获取的数据使用下划线（或其他一些普通 JS）的唯一选择？

```
var movies = Movies.find().fetch(); 
return _.sortBy(movies, function(movie) {
// do your sorting here
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T06:46:10.760

MongoDB（至少在 2.2.0 中）不支持不区分大小写的索引。

一种常见的基本方法是添加要搜索的字段的索引小写版本，然后在从应用程序搜索时添加小写搜索词。您可以在插入/更新文档时更新搜索字段。

更灵活的搜索可以通过使用词干、停用词和其他搜索策略将原始字段标记为多个索引搜索词来进一步实现这一点。

另请参阅： [MongoDB 中的全文搜索](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)。

您可以在 MongoDB 问题跟踪器中观看或对[SERVER-90](https://jira.mongodb.org/browse/SERVER-90)功能请求（“不区分大小写的索引”）进行投票。

# c++ - 从 const char* 转换为 char* 修改 VC++ 中的数据

> ID：12205547
> 
> 赞同：2
> 
> 时间：2012-08-30T21:07:43.813
> 
> 标签：c++, visual-c++, g++

在 VC++ 中，当我对 to 返回的值进行类型转换并`const char*`打印转换后的值时，屏幕上不会打印任何内容。这是代码片段`std::string::c_str()``char*`

```
#include "stdafx.h"
#include <string>

using namespace std;

string test() { return(string("HELLO"));}

int _tmain(int argc, _TCHAR* argv[])
{
  char* val;
  val = (char*) test().c_str();
  printf("\n %s\n", val);
  return 0;
} 
```

当我简单地检查 ASCII 值时，`val[0]`它是 0。但是在 G++ 下，文本`HELLO`会显示出来。

从 const char* 到 char* 的强制转换是非标准的，其结果未定义吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T21:11:17.710

只要您在更改字符串后不修改值或从中读取值，强制转换就可以了（尽管您*至少*应该得到一个警告）。

问题是您在临时上调用该函数（临时是由`string`返回的`cat()`）。在 之后`;`，临时对象超出范围，`val`仍然指向由临时对象管理的内存。它是 UB 从中读取的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T21:10:56.053

你得到未定义的行为，因为临时返回的`test()`立即被销毁。演员与它无关。

要消除此问题，请将返回的值分配给`test()`局部变量。现在它将通过对 的调用继续存在`printf`。

```
int _tmain(int argc, _TCHAR* argv[])
{
  string temp;
  char* val;
  temp = test();
  val = (char*) temp.c_str();
  printf("\n %s\n", val);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:23:53.540

请注意，如果没有演员表，您会得到类似的行为（将类型更改`val`为`char const*`）：

```
char const* val;
val =  test().c_str();
printf("\n %s\n", val); 
```

正如其他答案中提到的，这个特定示例中的问题不是强制转换，而是由返回的指针指向的数据的生命周期`c_str()`。当从它获取的对象死亡时，该数据无效（在这种情况下，它位于行尾的分号，因为它是`test()`函数返回的临时对象）。

请注意，正如克里斯在评论中指出的那样，即使指针是从`c_str()`对寿命较长的对象的调用中获得的，数据也可能由于其他原因变得无效（基本上是在字符串对象被修改的情况下）。

# java - 比较整数时出现意外结果

> ID：12205548
> 
> 赞同：5
> 
> 时间：2012-08-30T21:07:48.813
> 
> 标签：java

> **可能重复：**
> [整数包装器对象仅在值 127 内共享相同的实例？](https://stackoverflow.com/questions/5117132/integer-wrapper-objects-share-the-same-instances-only-within-the-value-127)
> [!= 和 == 运算符如何处理 Java 中的整数？](https://stackoverflow.com/questions/9824053/how-and-operators-work-on-integers-in-java)

我试图将两个整数与以下情况进行比较，得到了意想不到的结果

1.  当我执行以下操作时，@@@ 被打印出来。

    ```
     class C {
       static Integer a = 127;
       static Integer b = 127;
       public static void main(String args[]){
       if(a==b){
          System.out.println("@@@"); 
       }
       }
     } 
    ```

2.  当我执行以下操作时，@@@ 未打印。

    ```
     class C {
       static Integer a = 145;
       static Integer b = 145;
       public static void main(String args[]){
       if(a==b){
          System.out.println("@@@"); 
       }
       }
     } 
    ```

谁能告诉我可能是什么原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-30T21:11:30.440

您正在比较对象的身份。对于低于 128 的值，Integer 类缓存其对象。这就是为什么它在第一个例子中是相等的。另一个示例是未缓存的更高值。

正如@niklon 指出的那样，缓存的下边界也为-128。

可以使用 VM arg 调整上边框`-Djava.lang.Integer.IntegerCache.high=4711`。

在彼得有趣的博客文章中进一步阅读：http: [//vanillajava.blogspot.co.uk/2012/01/surprising-results-of-autoboxing.html](http://vanillajava.blogspot.co.uk/2012/01/surprising-results-of-autoboxing.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T21:09:53.557

您不是在比较`int`s，而是在比较对象的引用相等性。使用`.equals`，或使用 type`int`代替`Object`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:12:05.770

使用`if(a.equals(b))`和不使用`==`来比较作为 Object 类的子类的 Object。

`==`运算符仅适用于 int、long 等原始类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T21:10:14.780

在这里，您使用的是`Integer`对象而不是`int`基元。因此，您应该将这两个实例与`.equals(...)`而不是`==`. 如果您改用原始类型，您将使用`==`.

重要的是要注意，在处理对象时，`==`比较两个对象的*引用*，而不是实际值 - 所以它有时可能会返回看似奇怪的结果。

# android - 创建持久通知并阻止状态栏中的通知

> ID：12205551
> 
> 赞同：29
> 
> 时间：2012-08-30T21:07:56.017
> 
> 标签：android, notifications

我有以下用于 android 应用程序的代码：

```
package com.authorwjf.e_notifications;

import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;

public class Main extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Bitmap bm = Bitmap.createScaledBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.avatar), 
                getResources().getDimensionPixelSize(android.R.dimen.notification_large_icon_width),
                getResources().getDimensionPixelSize(android.R.dimen.notification_large_icon_height), 
                true);
        Intent intent = new Intent(this, Main.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 01, intent, Intent.FLAG_ACTIVITY_CLEAR_TASK);
        Notification.Builder builder = new Notification.Builder(getApplicationContext());
        builder.setContentTitle("This is the title");
        builder.setContentText("This is the text");
        builder.setSubText("Some sub text");
        builder.setNumber(101);
        builder.setContentIntent(pendingIntent);
        builder.setTicker("Fancy Notification");
        builder.setSmallIcon(R.drawable.ic_launcher);
        builder.setLargeIcon(bm);
        builder.setAutoCancel(true);
        builder.setPriority(0);
        Notification notification = builder.build();
        NotificationManager notificationManger = 
                (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        notificationManger.notify(01, notification);        
    }

} 
```

基本上应用程序在启动时会创建一个通知，现在我有几个问题：

*   是否有可能在启动应用程序时，通知显示在下拉通知列表中，但状态栏中没有图标。IE。参考

[http://imagebin.org/226494](http://imagebin.org/226494)

红圈的图标可以不显示吗？最终，我想创建一个仅位于下拉通知中的服务。

*   是否可以使下拉通知中的通知持续存在，即。如果按下蓝色圆圈（[http://imagebin.org/226494](http://imagebin.org/226494)）的图标，通知仍然存在？

我是 android dev 的新手，只是想了解我可以用通知做什么。

谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-30T22:37:49.093

*   A1：要删除状态栏图标，请使用以下技巧：

    ```
    builder.setSmallIcon(android.R.color.transparent); //Tested and worked in API 14 
    ```

*   A2：要进行持久通知，请添加以下行：

    ```
    builder.setOngoing(true) 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T21:12:41.967

看看[正在进行的事件标志](http://developer.android.com/reference/android/app/Notification.html#FLAG_ONGOING_EVENT)。我相信这可以创建类似于系统的 wifi 和 USB 连接通知的持续通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T08:06:37.873

```
 public class AlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

        Toast.makeText(context, "Hello  Toast", Toast.LENGTH_SHORT).show();
        Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
        Ringtone r = RingtoneManager.getRingtone(context, notification);
        r.play();
       /* Intent launchIntent =context.getPackageManager().getLaunchIntentForPackage("com.sonisony.clarityitapp");
            context.startActivity(launchIntent);*/
        Intent i = new Intent(context, CheckAppActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK| Intent.FLAG_ACTIVITY_CLEAR_TASK);
        PendingIntent pendingIntent = PendingIntent.getActivity(context,0,i,0);

        NotificationCompat.Builder builder = new NotificationCompat.Builder(context,"TestAndro")
                .setContentTitle("Andro Open Test Alert")
                .setContentText("Hello Hello ...........")
                .setAutoCancel(true)
                .setDefaults(NotificationCompat.DEFAULT_ALL)
                .setPriority(NotificationCompat.PRIORITY_HIGH)
                .setContentIntent(pendingIntent)
//                for Persistent
                .setOngoing(true);

        NotificationManagerCompat notificationCompat = NotificationManagerCompat.from(context);
        notificationCompat.notify(123,builder.build());
    }
} 
```

# python - 使用ffmpeg将电影转换成可以在苹果产品上观看的格式的简单例子

> ID：12205553
> 
> 赞同：0
> 
> 时间：2012-08-30T21:07:57.717
> 
> 标签：python, ffmpeg

我有一个从我的数码相机拍摄的 AVI 和 MOV 电影的目录。我想编写一个 Python 脚本来遍历它们，并为它找到的每个 AVI 或 MOV 生成一个可以在 Apple 产品（iPad、Apple TV 等）上查看的文件。我的视频是 1080p，我有兴趣尽可能多地保留原始质量。

有关如何使用 ffmpeg 执行此操作的任何示例？具体来说，传递给可执行文件的标志？我要进行一次或两次编码吗（有什么区别？）

我希望在 Python 中完成脚本部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:57:48.210

好吧，设备屏幕比 1080p 小得多。因此，尝试在 720p 屏幕上显示 1080p 视频是没有意义的。最好是你有几个配置文件。一种用于大屏幕，一种用于较小的屏幕。

要播放单个流，您需要基线配置文件单个参考帧 H.264。如果要从服务器播放流，则创建 hls 文件。如果要在本地播放，我认为 mp4 就足够了。

```
ffmpeg -i <input> -acodec aac -strict -2 -b:a <audio bitrate> -profile baseline -s <widthxheight> -b:v <video bitrate> -pass 1 output.mp4 
```

后跟相同的命令，但 pass 设置为 2

以上内容足以创建视频。两次通过优于 1，因为编码器有第二次机会查看内容，并且在第一次通过时它会收集一些统计信息。

谷歌一下其他一些标志。那里有很多例子。上面的那些应该可以工作。将 < > 部分替换为您想要的值

这是一个实际示例： ffmpeg -i input.ts -acodec aac -strict -2 -b:a 128k -profile baseline -s 320x240 -b:v 2000k -pass 1 output.mp4

# c++ - 如何使用在 Visual Studio 可执行项目中定义的类

> ID：12205554
> 
> 赞同：1
> 
> 时间：2012-08-30T21:07:58.720
> 
> 标签：c++, visual-studio, visual-studio-2008, dependencies, executable

使用 Visual Studio 2008，我有一个包含两个可执行项目 A 和 B 的解决方案。项目 B 想要使用项目 A 中的一些类。我尝试在 B->Properties->Project Dependencies 中设置依赖关系，但没有工作。我该怎么做呢？我已经读过我应该将 B 设置为包含 B 的引用。我试过了，但没有用（我可能做错了）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:22:20.430

在`B->Properties->Project Dependencies`您设置 A 将首先编译。要在 B 上设置 aviable A 功能，您需要将 A 设置为 dll 项目并添加链接器 A.lib 并在 linkerAdditionalPath 中为其设置路径。我希望这能帮到您。下次为了避免这个问题，我建议你在你的项目中使用 CMake。

# iphone - Settings.bundle 中的本地化字符串格式

> ID：12205555
> 
> 赞同：0
> 
> 时间：2012-08-30T21:08:05.833
> 
> 标签：iphone, objective-c, ios, xcode, ios4

我对 iOS 开发还很陌生，如果你继续阅读，我相信这会是一个很大的冲击……哈哈……

我对在我的应用程序中使用 Settings.bundle 有疑问。我已经设置好了，到目前为止我取得了巨大的成功，但是我遇到了一些我不确定如何处理的事情，甚至不确定它是否可以**完成**。

我正在做的是将页脚文本添加到设置中我的组的末尾。现在，由于我正在编写一个本地化的应用程序，我希望能够在我的页脚文本字符串中进行字符串格式化或字符串替换。例如说我在 Root.strings 中有以下内容：

```
"DEFAULTS_FOOTER"="This allows %@ to operate without you having to switch the settings each time.";
"APP_NAME"="My iOS App"; 
```

然后，如您所料，在我的 Root.plist 文件中，我有类似的内容：

```
...    
    <key>FooterText</key>
    <string>DEFAULTS_FOOTER</string>
... 
```

那么，有谁知道在这种情况下是否可以进行字符串替换或格式化？现在，老实说，我没有尝试过任何简单的事情，比如：

```
"DEFAULTS_FOOTER"="This allows " + APP_NAME + " to operate without you having to switch setting each time."; 
```

我有一种感觉，Xcode（或者它会是 IB？）不太允许这种类型的语法......但是，我*将*尝试这个，而我正在等待对这个问题的答复。

如果有人知道可以做到这一点的方法，我会全力以赴。如果你想知道*为什么*我想做这样的事情，请记住，上面只是一个例子。我知道大多数应用程序不仅会启动和更改名称，即使在版本之间也是如此，但我确实需要这个，而且由于它是本地化的，我可以在语言需要的主字符串中的任何位置找到替换的字符串。

预先感谢您的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:34:52.133

我相信首选的字符串连接方法如下：

```
NSString* default = [NSString stringWithFormat:@"DEFAULTS_FOOTER",APP_NAME]; 
```

显然你会想要在此之前查找本地化...

# c++ - 修复加载命中存储

> ID：12205557
> 
> 赞同：-1
> 
> 时间：2012-08-30T21:08:15.620
> 
> 标签：c++

LHS 将如何在[此代码](http://macton.smugmug.com/gallery/8936708_T6zQX/1/593426709_ZX4pZ#!i=593420229&k=v7zei)中修复？

首先，LHS 发生在哪里？我猜它在第二次`else if`阅读`s.r`。

从我一直在阅读的关于 LHS 的内容来看，我相信添加一个本地可以解决它：

```
float radius = s.r;

if( d <= -radius )
    ...
else if( d >= radius)
    ... 
```

但是由于 <= 是一个函数，它会阻止 <= 或任何其他将本地作为参考的函数修改它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:25:06.810

没有，请看[下一张幻灯片](http://macton.smugmug.com/gallery/8936708_T6zQX/1/593426709_ZX4pZ#!i=607382246&k=uJbp4)。它会导致管道刷新。也很有可能会出现分支错误预测。

# ruby-on-rails - Cancan 嵌套资源限制对索引的访问

> ID：12205559
> 
> 赞同：3
> 
> 时间：2012-08-30T21:08:44.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

我目前在我的网络应用程序中使用cancan，到目前为止它工作得很好，但是我遇到了关于rails中嵌套资源的问题。访问索引页面时，cancan 不会限制用户查看其他登录用户可以看到的内容。它适用于显示页面，但在访问索引页面时它不起作用。

**路线.rb**

```
resources :skater do
  resources :videos
end 
```

**能力.rb**

```
can :manage, Video, :skater => { :user_id => user.id } 
```

**video_controller.rb**

```
load_and_authorize_resource :skater
load_and_authorize_resource :video, :through => :current_user 
```

如何限制对其他用户索引视图的访问，以使用户 A 无法查看用户 B 视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T02:30:40.703

尝试删除`:through => :current_user`以查看是否解决了您的问题。查看 CanCan Wiki 中的[第二个代码示例](https://github.com/ryanb/cancan/wiki/Nested-Resources)，了解应该如何使用嵌套资源。

CanCan 将通过您应用程序中的方法获取当前用户`current_user`。因此，您不必在[授权控制器操作](https://github.com/ryanb/cancan/wiki/Authorizing-controller-actions)时定义它。

* * *

**更新：**尝试在您的控制器中使用它。

```
load_and_authorize_resource :skater
load_and_authorize_resource :video, :through => :skater 
```

* * *

**更新 2：**我不知道 CanCan 是因为[能力优先](https://github.com/ryanb/cancan/wiki/Ability-Precedence)还是因为当前用户未经授权而失败。

根据我到目前为止所看到的，这就是您的`ability.rb`文件的外观。第二行将覆盖第一行，允许您限制可以查看和更改的内容。我决定使用`:manage`它是因为它通过包含所有权限“涵盖了所有基础”。

```
cannot :manage, Video # this will include :read, :show, :edit, :update, and :delete
can :manage, Video, :skater => { :user_id => user.id } 
```

我担心的是您没有正确过滤溜冰者。如果您有任何问题，我建议您尝试一下。

```
can :manage, Video, :user_id => user.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:22:41.893

你应该检查这个问题，它和你一样的问题。

[Cancan nested_routes 限制对 :index 的访问](https://stackoverflow.com/questions/9371781/cancan-nested-routes-restrict-acces-to-index)

# jquery - 如何使用 jquery 方法 .load() 将参数传递给局部视图

> ID：12205562
> 
> 赞同：0
> 
> 时间：2012-08-30T21:08:51.690
> 
> 标签：jquery, asp.net-mvc, razor, load, asp.net-mvc-partialview

如何使用 jquery 方法 .load() 将参数传递给局部视图，我有这个功能

```
 var str;
    var x;
    x = $("#whereQuery");
    str = x.attr("value");
    $("#btnSearch").click(function () {
        $('#budgetsKey').dialog({
            modal: true,
            title: "Clave presupuestal de ingresos",
            width: 550,
            minWidth: 400,
            maxWidth: 650,
            show: "slide",
            hide: "slide",
            draggable: false,
            resizable: false,
            open: function(event, ui) {
            //Load the CreateAlbumPartial action which will return 
            // the partial view _CreateAlbumPartial
            $(this).load("@Url.Action("Prueba2")", { str: str});
        }

        });
        return false;
    });
}); 
```

在我的控制器中我有这个

```
 public PartialViewResult Prueba2(String str)
    {
        List<PTI_IncomeBudgetTransference> incomeBudgetTransferenceList;
        cmp_Company = this.masterService.company.GetById(1);
        //Recupera las cuentas por pagar por autorizar
        incomeBudgetTransferenceList = siagService.incomeBudgetTransference.GetAll(this.cmp_Company.CMP_ID, "Pendiente de Autorización");
        return PartialView("Prueba2", incomeBudgetTransferenceList);
    } 
```

我需要那个“str”来在我的控制器中执行查询，但是我怎样才能将它发送到我的操作中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:15:27.303

您应该在打开的处理程序中执行此操作

```
$(this).load('@Url.Action("Prueba2", new { str = str})'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T23:48:34.730

它仅在您知道字符串时才有效，在我的情况下，字符串是客户端变量，因此我将代码更改为如下所示并且有效：

$(this).load('@Url.Action("Prueba2"') + '/' + str);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-02T11:48:42.313

这也可以。

```
`$("#divForPartialView").load("/HelloWorld/GetAwesomePartialView",
  { param1: "hello", param2: 22},function (){/do other cool client side stuff} 
```

);`

# c# - Joining a CSV file to query results

> ID：12205565
> 
> 赞同：2
> 
> 时间：2012-08-30T21:09:06.013
> 
> 标签：c#, linq

I have a linq query written to read in a `.csv` file:

```
var csv =
    from line in File.ReadAllLines("C:/file.csv")
    let customerRecord = line.Split(',')
    select new Customer()
        {
            contactID = customerRecord[0],
            surveyDate = customerRecord[1],
            project = customerRecord[2],
            projectCode = customerRecord[3]
        }; 
```

From here, I'd like to inner join this data on `contactID` to another query:

```
var prods = 
    from prd in products
    join con in contacts
    on prd.PrimaryContact equals con.ContactID
    select new {createdDate = prd.CreatedDate, contactID = con.ContactID}; 
```

I'm new to linq, and would like to know how I can join the data from csv to prods on the contactID field.

Thank you for your help in advance, it's much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:12:36.813

编辑：我想我有它。

```
var merged = from cr in csv
  join pr in prods
  on cr.contactID equals pr.contactID
  select new{
    cr.contactID,
    cr.surveyDate,
    cr.project,
    cr.projectCode,
    pr.createdDate}; 
```

我假设两者都有 string `contactID`。如果没有，那么您需要采用一种或另一种方式。

# windows - 使用 Windows 的 Mac 的 Haxe 交叉编译

> ID：12205567
> 
> 赞同：2
> 
> 时间：2012-08-30T21:09:11.283
> 
> 标签：windows, macos, cross-compiling, haxe

我正在使用 Haxe 开发一个简单的控制台应用程序（例如，一个 md5sum 等效项）。没有库、特定于操作系统的函数等，只有标准输入/标准输出和文件。

我可以在使用 Windows 作为开发环境的同时构建 Mac 二进制文件（不是 AIR，不是 Flash）吗？

甚至可能吗？

此外，构建 linux ELF 也很好，但不是必需的，因为我有 Linux VM 但没有 Mac。

**更新：找到[xCross](http://code.google.com/p/xcross/wiki/help)**，现在尝试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:13:09.103

xCross thingy（用于创建 haxe 安装程序，IIRC）似乎很好地完成了这项工作[。](http://code.google.com/p/xcross/wiki/help)虽然二进制文件有点过时了，所以至少自己构建一次是明智的；）

UPD：它有效。但是，是的，您需要一台 Mac 来从源代码重建它。

# javascript - highcharts - 堆积柱形图数据标签的精度

> ID：12205568
> 
> 赞同：3
> 
> 时间：2012-08-30T21:09:22.677
> 
> 标签：javascript, highcharts

我们正在使用 highcharts 并尝试使用堆叠图表，但遇到了一些问题。请参阅以下小提琴：

[http://jsfiddle.net/ggoforth/n5yba/](http://jsfiddle.net/ggoforth/n5yba/)

我能够以给定的精度显示数字，但是数据标签（这是堆栈的总和）未四舍五入。有没有办法将这些数据标签切割到精度 X？正常的 plotOptions.series.dataLabels.formatter 似乎在这里不起作用。

![在此处输入图像描述](../Images/4d2dfee4874ee339e6ab827519f3f980.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:35:50.127

看起来我需要 yAxis.stackLabels.formatter 直到现在我才找到；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T23:43:29.657

```
stackLabels: {
    enabled: true,
    style: {
        fontWeight: 'bold',
        color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
    },
    formatter: function() {
        return  Highcharts.numberFormat(this.total, 2, ',');
    }
} 
```

[**演示**](http://jsfiddle.net/n5yba/2/)

# c++ - 为什么 QWebView 在通过 setHtml 加载时不显示任何图像？

> ID：12205571
> 
> 赞同：1
> 
> 时间：2012-08-30T21:09:28.390
> 
> 标签：c++, image, qt

每当我尝试通过以下方式加载页面时：

```
QWebView *view = new QWebView();
view->settings()->setAttribute(QWebSettings::AutoLoadImages, true);
view->settings()->setAttribute(QWebSettings::LocalContentCanAccessRemoteUrls, true);
view->settings()->setAttribute(QWebSettings::LocalContentCanAccessFileUrls, true);
view->settings()->setAttribute(QWebSettings::LocalStorageEnabled, true);
view->setUrl(QUrl(QString("https://registration.experient-inc.com/HTMLProduction/ShowCES131/ConfirmationImages/CES131_Header.JPG"))); // this does not load images
//view->setUrl(QUrl(QString("http://www.google.com"))); // <= this does load images 
```

为什么通过字符串加载不会加载相关图像？我如何让它这样做？（相关图片在网络上，使用绝对网址指定）

谢谢！

更新：这似乎与图像的 url 是`https`. 当我手动将其更改为 http 时，它会加载图像。但是，这不是解决方法，因为有时该网站需要 https。此外，当我检查错误时，我的连接超时。这很奇怪，因为它可以访问该站点的非 https 版本，任何其他浏览器也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T04:15:31.453

哈！这是一个 OpenSSL 问题！`curl -v "https://registration.experient-inc.com/HTMLProduction/ShowCES131/ConfirmationImages/CES131_Header.JPG"`也不行！

# spotify - 登录窗口中的 Spotify 试用消息

> ID：12205572
> 
> 赞同：0
> 
> 时间：2012-08-30T21:09:37.237
> 
> 标签：spotify, trial

我正在使用 CocoaLibSpotify，效果很好。但是当登录窗口出现时，每次我使用我的帐户登录时，我都会看到“获取 Spotify！” 之后的消息，鼓励我从试用帐户升级（我有一个高级帐户）。这仅仅是因为我没有安装 Spotify 应用程序吗？（我住在加拿大，所以我无法使用它）。如果是这样，措辞有点混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:48:35.470

是的，这是因为您没有安装 Spotify 客户端。措辞将很快得到修正。

# javascript - 使用javascript查找元素位置的最快方法？

> ID：12205577
> 
> 赞同：0
> 
> 时间：2012-08-30T21:09:47.487
> 
> 标签：javascript, jquery

我使用了 jquery 的 offset().top，但是当它在循环中运行 4000 次时，浏览器会冻结几秒钟。有没有更快的方法来获得这个？

这发生在 iPAD 上，桌面速度更快。

```
for (counter=1; counter<4000; counter++)
{
   yPos = Math.round($("#star_"+counter).offset().top); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:16:38.187

`.offset().top`总是返回一个整数，因此不需要四舍五入。此外，您可以缓存 jQuery 对象以提高效率：

```
$box = $('#box');
// start your loop here
    yPos = $box.offset().top;
// end loop 
```

**更新**

为每个星分配一个类，这样您就不必不断创建新的 jQuery 对象：

```
$('.stars').each(function(i,el) { 
    var yPos = this.offsetTop; 
}); 
```

[http://api.jquery.com/each](http://api.jquery.com/each)

[https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop](https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:29:51.777

你也不能使用 jQuery...

```
var element = document.getElementById("box");
var top = element.offsetTop;
while (element.parentNode) {

    element = element.parentNode;
    top += element.offsetTop;

}
console.log(top); 
```

与纯 javascript 相比，jQuery 在获取 div 方面做了一些额外的工作。所以如果速度在这里是个问题，你应该使用纯javascript。

但如果这些是天空中的星星，您可以使用 offsetTop 并确保它们包含在填充整个屏幕的 div 中：

```
document.getElementById("box").offsetTop; 
```

但我也猜想你首先做了一些计算把星星放在那里。您应该创建一个星星数组，引用 div。就像是：

```
var stars = [];

for (var x = 0; x < 4000; x++) {

    var star = document.createElement("DIV");
    var position = setStarPosition(star);
    stars.push({

        star: star,
        position: position

    });
    document.body.appendChild(star);

}

function setStarPosition(star) {

    // Some positioning code which stores left and top position in variables

    return {

        left: left,
        top: top

    }

} 
```

当你想操纵星星时，你会通过数组，它有位置和对 div 的引用。

在 javascript 环境中引用 div（f.ex. 在数组中）比在 DOM 中引用它们要快很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:39:10.090

而不是这个：

```
for (counter=1; counter<4000; counter++) {
    yPos = Math.round($("#star_"+counter).offset().top);
    // etc
} 
```

为所有星星分配一个类（我们称其为 class="starry"）并执行以下操作：

```
var cacheStars = $(".starry"); 
```

除非您添加或删除星星，否则这永远不需要更新，在这种情况下您可以刷新它。然后你的循环变成：

```
cacheStars.each(function(index, element) {
    ypos = element.offsetTop;
}); 
```

# java - 在 Java < 1.7 中访问文件元数据

> ID：12205582
> 
> 赞同：0
> 
> 时间：2012-08-30T21:09:53.853
> 
> 标签：java, file

在低于 1.7 的 Java 中，如果您想获取文件的元数据/属性，比如说`lastModified`，获取它的唯一方法是通过 File 实例的`.lastModified()`方法。

如果您无权访问文件对象并且只能访问`InputStream`/ `OutputStream`，您如何访问底层文件的元数据/属性？

我上面描述的一个典型场景是在使用一些 SDK 函数时，比如`.getResourceAsStream()`etc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:11:36.243

我认为唯一的方法是使用 jna 或 jni 并使用对操作系统的本机调用。

Windows 上还有 cacls.exe 可能有用。您可以使用 ProcessBuilder 运行它，然后解析输出。

两者都需要文件。不确定你可以用流做任何事情

# sql - 将字符串中的值提取到多列中

> ID：12205585
> 
> 赞同：0
> 
> 时间：2012-08-30T21:09:59.250
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个名为 Types 的表，数据如下：

```
Item_Name 

Hardware \ Hardware Laptop \ Display
Application \ Application Configuration Request
Application \ Application File Request
Application 
```

我试图将它们分成 3 个不同的列。所以尝试通过以下查询来做到这一点：

```
select parsename(replace([Item_Name],'\','.'),3) as First,
 parsename(replace([Item_Name],'\','.'),2) as Second,
 parsename(replace([Item_Name],'\','.'),1) as third
from dbo.Types 
```

但我没有得到我想要的输出的确切结果：

```
First          Second                                      Third
Hardware       Hardware Laptop                             Display
Application    Application Configuration Request           NULL
Application    Application File Request                    NULL
Application    NULL                                        NULL 
```

但我得到的输出为：

```
First          Second                          Third
Hardware       Hardware Laptop                 Display
NULL           Application                     Application Configuration Request           
NULL           Application                     Application File Request                    
NULL           NULL                            Application 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T05:45:26.090

这可能有用

```
Declare @t table(Item_Name Varchar(100))
Insert Into @t 
Select 'Hardware \ Hardware Laptop \ Display' Union All 
Select 'Application \ Application Configuration Request' Union All
Select 'Application \ Application File Request' Union All
Select 'Application'

;WITH CTE AS(
SELECT 
    Item_Name
    ,NoOfOccurance = (LEN(Item_Name) - LEN(REPLACE(Item_Name, '\', ''))) 
    ,New_Item_Name = CASE (LEN(Item_Name) - LEN(REPLACE(Item_Name, '\', ''))) 
                         WHEN 0 THEN 'Col1 \ Col2 \ ' +Item_Name
                         WHEN 1 THEN 'Col1 \ ' +Item_Name 
                         ELSE Item_Name
                     END
FROM @t)
,cte2 AS(
SELECT 
    [First] = LEFT(New_Item_Name,CHARINDEX('\',New_Item_Name,0)-1)  
    , [Second] = SUBSTRING(
                 New_Item_Name
                 ,CHARINDEX('\',New_Item_Name,0)+1
                 ,CHARINDEX('\',SUBSTRING(New_Item_Name,CHARINDEX('\',New_Item_Name,0)+1,len(New_Item_Name)),0)-1
               )
    ,[Third] = REVERSE(LEFT(REVERSE (New_Item_Name),CHARINDEX('\',REVERSE (New_Item_Name),0)-1))

FROM CTE)
SELECT
    [First] = CASE WHEN LTRIM(RTRIM([First])) = 'Col1' THEN REPLACE([First], 'Col1', NULL) ELSE [First] END
    ,[Second] = CASE WHEN LTRIM(RTRIM([Second])) = 'Col2' THEN REPLACE([Second], 'Col2', NULL) ELSE [Second] END 
    ,[Third]    
FROM Cte2 
```

//结果

```
First   Second  Third
Hardware     Hardware Laptop     Display
NULL     Application     Application Configuration Request
NULL     Application     Application File Request
NULL    NULL     Application 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:23:09.863

我认为这是蛮力，但它有效。这个想法是在末尾添加足够的斜杠以形成全名。这将把事情推过去：

```
with types as (select 'Hardware \ Hardware Laptop \ Display' as item_name union all
               select 'Application \ Application Configuration Request' union all
               select 'Application \ Application File Request' union all
               select 'Application'
              )
select parsename(replace([Item_Name]+suffix, '\', '.'), 3) as First,
       parsename(replace([Item_Name]+suffix, '\', '.'), 2) as Second,
       parsename(replace([Item_Name]+suffix, '\', '.'), 1) as third
from (select item_name, LEN(Item_name) - LEN(replace(item_name, '\', '')) as numslash,
             REPLICATE('. ', 2-(LEN(Item_name) - LEN(replace(item_name, '\', '')))) as suffix
      from Types
     ) t 
```

一个细微的区别是，这会为空槽生成空格而不是 NULL。如果你想要 NULL，你需要额外的逻辑。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T21:23:27.683

```
WITH CTE AS(
 SELECT CASE LEN(Item_Name)-LEN(REPLACE(Item_Name,'\','')) WHEN 2 THEN [Item_Name] WHEN 1 THEN  
         [Item_Name]+'.' Else [Item_Name]+'..' as Item_Name
 FROM dbo.Types 
 )
SELECT parsename(Item_Name,'\','.'),3) as First,
       parsename(Item_Name,'\','.'),2) as Second,
       parsename(Item_Name,'\','.'),1) as third 
FROM CTE 
```

# android - 将 ImageView 绑定到 WebView（滚动时）

> ID：12205586
> 
> 赞同：3
> 
> 时间：2012-08-30T21:10:01.157
> 
> 标签：android, android-layout, android-webview, android-imageview

在我的 android 应用程序中，我有一个 "main" `Webview`。最重要的是，`WebView`我想使用一个`ImageView`. （示例）应用程序如下所示：

![Webview 之上的 ImageView](../Images/f4735d60e4573dd09f319bdef4ce7915.png)

（`WebView`大 android 徽标）是可滚动/可缩放的。我的目标是`ImageView`（小图标）自动滚动（但不缩放）**。**`WebView`它应该保持在 android 徽标的同一位置。它基本上是谷歌地图“我的位置”精确定位行为：

![谷歌地图精确定位](../Images/62284b7eba5be3a693fcb200ba83149a.png)

如果有人能指出我正确的方向或提供一些好的建议（也许是正确的听众`WebView`），那就太好了。

**注意：**是的，我必须使用 a`WebView`因为我要加载一个 .gif 文件。

我的（简化的）代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    WebView wv = (WebView) findViewById(R.id.mainWebView);
    wv.getSettings().setBuiltInZoomControls(true);
    wv.getSettings().setDisplayZoomControls(false);           
    wv.loadUrl("http://www.myurl.com/android.gif");
} 
```

省略的布局 .xml 文件仅包含 a`WebView`和`ImageView`.

# scala - SBT 任务将属性文件从项目文件夹复制到 webapp

> ID：12205587
> 
> 赞同：5
> 
> 时间：2012-08-30T21:10:06.037
> 
> 标签：scala, sbt

我是 scala 和 Sbt 的新手。我正在尝试使用 JQuery i18n 插件实现国际化。我的项目文件夹结构包含 /src/main/resources/i18n 文件夹中的 messages.properties 文件，该文件将在 sbt compile/package 期间复制到 classes 文件夹。只有当文件在 webapp 文件夹下时，Jquery 才能访问。有没有办法在 build.sbt 中创建一个任务，将属性文件从 src/main/resources 文件夹复制到 webapp 文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:35:53.303

您是否尝试过使用 /classpath URL 来加载 jQuery 插件的属性，而不是这样做？

# javascript - 使用 jQuery 在 js 中的日历上创建事件，我遇到了一个奇怪的错误

> ID：12205590
> 
> 赞同：1
> 
> 时间：2012-08-30T21:10:16.567
> 
> 标签：javascript, jquery, loops

我在代码中遇到了一个奇怪的错误。实际上，我修改了不太清楚的遗留代码并最终遇到了这个问题。你可以[在这里看到一个 fiddle](http://jsfiddle.net/4Ng9x/1/)的例子。

基本上我有一个日历，我需要延长多天的活动，以便它们跨越正确的天数。一切正常，但只有一种情况：如果一个月的第一天是一周的第一天。在这种情况下，跨越多天的事件仅在第一周缩短一天。我通过使用解决方法解决了这个问题

```
// There is a bug that happens only when the first day of the 
// month is the first day of the week. In that case events that start on the first of the month
// or multy day events that span from the previous month end up being a day too short in the 
// first week. So for example an event that lasted the full month was only six days in the first week.
// This workaround works for me, couldn't understand what's wrong.
// if (startDay === 1 && daysFirstWeek === 7) {
   // days += 1;
// } 
```

如果您取消注释这些行一切正常，但显然这不是解决方案。

我需要对这件事有一些新的看法，可能整个事情背后的概念是错误的，我应该从头开始，但是当我找不到解决方案时我很生气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:28:09.680

**更新**

好的，这次明白了。在另一种情况下，您的检查是错误的：

```
 if (cellNum !== 0) {
            // Extend initial event bar to the end of first (!) week.
            if (curLine === 0) {
                days++;
            }
        } else if (day > startDay && daysLeft !== 0) {    // WRONG CHECK HERE! 
```

day > startDay 必须是 day >= startDay。然后一切正常。

之所以会出现这种情况，是因为循环初始检查：

```
if (day >= startDay && day <= endDay) { 
```

由于后面的检查是 day > startDay，它错过了添加天数的第一个单元格，并且 curLine 不会按时递增。下一行的第一个单元格最终被处理，curLine 比它应该的少 1。如果您通过控制台记录 curLine 和 cellNum，您会看到它们是这样运行的，并且不会在应有的位置排列。通过修复，处理进入第一个单元格的内部条件，就像它应该的那样。

# html - 在 HTML5 画布鼠标悬停上更改渐变颜色

> ID：12205595
> 
> 赞同：1
> 
> 时间：2012-08-30T21:10:48.380
> 
> 标签：html, canvas, html5-canvas, gradient

我正在尝试在鼠标悬停时更改画布颜色（渐变）。

现在我有这个代码 - [http://jsfiddle.net/juodikis/p7htB/4/](http://jsfiddle.net/juodikis/p7htB/4/)

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T23:05:21.373

您可以只参数化您的绘图函数，然后将鼠标悬停/鼠标退出事件添加到您的画布，以使用不同的参数调用绘图函数。

> canvas.addEventListener("mouseover", function() { draw("#ff0000", "#00ff00", "#0000ff"); });
> 
> canvas.addEventListener("mouseout", function() { draw("#474747", "#6a6a6a", "#b9b9b9"); });​</p>

在哪里

> var draw = function(color1, color2, shadow) {
> 
> [...]
> 
> ```
>  var lingrd = context.createLinearGradient(0, 0, 0, 195);
>   lingrd.addColorStop(1, color1);
>   lingrd.addColorStop(0, color2);
>   context.fillStyle = lingrd;
>   context.shadowColor = shadow; 
> ```
> 
> [...]
> 
> }

[你可以在这个小提琴](http://jsfiddle.net/jbalsas/p7htB/7/)中看到这个工作

# c# - 来自 AJAX 的 Web 服务调用，未找到服务

> ID：12205611
> 
> 赞同：1
> 
> 时间：2012-08-30T21:12:06.550
> 
> 标签：c#, ajax, web-services, iis

我有一个通过 AJAX 调用启动的 Web 方法，这是我的 Web 方法：

```
 [WebMethod(EnableSession=true)]
 public void ProcessAddress(Dictionary<string, string> Header, bool AddrValues)
 {

    _service.ProcessNoMatchModal(Header, AddrValues);
 } 
```

从此调用：

```
 $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "../Services/Address.asmx/ProcessAddress",
        data: JSON.stringify(data),
        dataType: "json",
        success: function(data) {
            alert("success");
        },
        error: function() { 
            alert("error");
        },
        complete: function() { },
        asynch: false
    }); 
```

更令人困惑的是我有两个指向相同代码源的虚拟目录，第一个该服务有效并且可用，但第二个它不起作用，我在 firebug 中看到 404

任何线索/建议都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:25:12.023

[从这里：](http://geekswithblogs.net/frankw/archive/2008/03/13/asp.net-ajax-callbacks-to-web-methods-in-aspx-pages.aspx)

> 1.  方法必须是静态的
> 2.  方法需要用 [WebMethod()] 修饰
> 3.  如果要对方法进行 ASP.NET AJAX 回调，则该方法需要用 [ScriptMethod()] 修饰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:15:08.073

由于这是一个 404 http 错误，我会责怪您在 url 设置中所做的相对路径引用（带有双点）。

从您的第一个位置开始，您使用正确的路径调用 web 服务，从第二个位置开始，您的目标路径错误......尝试使用 Fiddler 或 Chrome 开发人员工具查看您调用的实际路径，看看我是否正确。

如果您从具有不同深度的虚拟目录调用此函数，则最好不要使用相对路径引用，而是从根目录开始。我猜以下其中一项应该有效：

```
url: "Services/Address.asmx/ProcessAddress"
url: document.location.hostname + "/Services/Address.asmx/ProcessAddress" 
```

# c# - 关于单元测试的对象状态

> ID：12205612
> 
> 赞同：2
> 
> 时间：2012-08-30T21:12:08.873
> 
> 标签：c#, java, unit-testing, junit, nunit

我有以下课程：

```
class UserValidator{

     // no constructor , default is fine. 

     void Validate(Request request, Response response){
        // some validation logic on request
        // if fails, add the message to response.
     }

} 
```

同样，我可以执行以下操作：

```
class UserValidator{

     private Request request;
     private Response response;

     UserValidator(Request _request, Response _response)
     {
         request = _request;
         response = _response;
     }

     void Validate(){
        // some validation logic for request
        // if fails, add the message to response.
     }

} 
```

对于测试，哪个更可取？我可以说第二个 UserValidator 类有一个状态，因此更容易测试，而第一个没有状态并且更难测试吗？事实上，第一个也可以是一个静态类，它不能传递给其他方法，但是如果静态调用它就不起作用。

哪一个在可测试性方面更好？哪个包含状态？哪个更理想？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:17:54.103

只有第二个包含状态。

就个人而言，我会静态使用第一个，比如

```
class UserValidator{

     private UserValidator() { } // no constructor

     public static void Validate(Request request, Response response){
        // some validation logic on request
        // if fails, add the message to response.
     }

} 
```

但是，存储结果有一个优势——您可以一次又一次地运行它，而无需实际运行它。

```
class UserValidator {
    public static enum ValidatorState { NOT_RUN, PASSED, FAILED }
    private ValidatorState state = NOT_RUN;
    private final Request request;
    private final Response response;
    public UserValidator(Request request, Response response) {
        this.request = request;
        this.response = response;
    }
    public ValidatorState validate() {
        if(state != NOT_RUN) return state;
        if(blah blah)
            state = PASSED;
        else
            state = FAILED;
        return state;
    }
} 
```

要获得各种验证器的列表，您将需要某种接口来执行该操作。

```
public interface Validator {
    boolean validate(Request request, Response response);
} 
```

然后，您将创建一个包含所有验证的静态方法库。请注意，这些都是虚构的示例，但包含一些真实世界的逻辑。

```
public class ValidationLibrary {
    private ValidationLibrary() { }
    public boolean validateUsername(Request request, Response response) {
        String name = request.getProperty("username");
        if(name.length() < 3) return false;
        if(name.length() > 12) return false;
        if(name.equals(name.reverse()) return false; // who knows?
        return true;
    }
    public boolean validateSecurity(Request request, Response response) {
        // what page is the user trying to reach?
        SecurityRealm realm = SecurityRealm.realmForPage(request.getProperty("page"));
        String username = request.getProperty("name");
        return realm.allows(username);
    }
} 
```

稍后如果您需要多个验证器，您可以简单地执行此操作

```
List<Validator> validators = new ArrayList<Validator>();
validators.add(new Validator(){ 
    public boolean validate(Request req, Response res) { ValidationLibrary.validateUsername(req,res); } 
});
validators.add(new Validator(){ 
    public boolean validate(Request req, Response res) { ValidationLibrary.validateSecurity(req,res); } 
}); 
```

然后，当您收到请求时，您只需执行以下操作即可对其进行验证：

```
for(Validator v : validators) if(!v.validate(request,response)) return false; 
```

# wordpress - 如何使用 wordpress 将页面摘录显示为小部件？

> ID：12205621
> 
> 赞同：1
> 
> 时间：2012-08-30T21:12:54.427
> 
> 标签：wordpress, widget, sidebar

我正在制作一个网站并将 wordpress 用作 CMS。我有一个首页，其中有一些小部件就绪区域。我还有其他几个静态页面（例如“关于我”）这些页面有一个摘录（在“更多”行上方）和正文（在更多行下方）。

我已经尝试了几个小时，但我找不到一个好的插件或一些有用的代码，让我在小部件区域（侧边栏）中显示某个页面的摘录。

如果有人可以帮助我，那就太棒了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:18:44.697

试试这个代码的摘录..

```
<?php query_posts('cat=ID'.'&showposts=NO. OF POST') ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<h3><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h3>
<?php the_post_thumbnail(); ?>
<p><?php echo substr(get_the_excerpt(), 0,65).' [...]'; ?></p>
<a href="<?php the_permalink(); ?>">Read More...</a>

<?php endwhile; ?>
<?php wp_reset_query(); ?>
<?php endif;?> 
```

更改帖子的类别 ID 和限制...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:06:25.240

您可以使用插件来做到这一点，但自己实现它可能更有益。它根本不是很复杂。您必须做两件事才能在小部件中获取帖子摘录。默认情况下，WordPress 不允许您在小部件内运行 php。要解决此问题，请进入您的`functions.php`文件并在文件底部添加以下代码：

```
add_filter('widget_text', 'execute_php', 100);

function execute_php($html) {
    if (strpos($html,"<"."?php")!==false) {
        ob_start();
        eval("?".">".$html);
        $html=ob_get_contents();
        ob_end_clean();
    }
    return $html;
} 
```

这允许您在小部件中运行 php 代码。完成后，转到您的小部件菜单并将一个新文本框拖到侧边栏，然后将以下代码放入文本框中：

```
<?php
    global $post;
    $tmp_post = $post;      
    $args = array( 'numberposts' => 5, 'category__in' => array(11));
    $myposts = get_posts( $args );
    foreach( $myposts as $post ) : setup_postdata($post);
        the_excerpt();
    endforeach;
    $post = $tmp_post;
?> 
```

此代码将遍历并输出除类别 11 中的前五个帖子之外的内容。您显然可以修改代码以获得您正在寻找的任何特定结果。如果您需要更直接地针对您的具体案例量身定制的代码，请告诉我，我会为您提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T03:07:21.787

首先你必须安装[PHP Code Widget](http://wordpress.org/extend/plugins/php-code-widget/)插件。

将此插件小部件拖动到侧边栏并将此代码放在那里

```
<?php

// The Query
$the_query = new WP_Query( 'pagename=your page slug' );

// The Loop
while ( $the_query->have_posts() ) : $the_query->the_post();
echo '<li>';
the_content('Read more...');
echo '</li>';
endwhile;

// Reset Post Data
wp_reset_postdata();

?> 
```

希望这会有所帮助

# iphone - git commit 不会将文件添加到 xcodeproj

> ID：12205630
> 
> 赞同：0
> 
> 时间：2012-08-30T21:13:39.113
> 
> 标签：iphone, objective-c, ios, ipad, git

当我从其他计算机进行拉取时，我的 xcode 项目（ttf、xib、图像）中的某些资产没有添加到我的项目中，我遇到了问题。知道可能是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:17:09.183

那里有一些不好的建议，建议您应该将您的添加`.xcodeproj`到您的 gitignore 中。这是它引起的问题之一。如果你已经这样做了，那么你应该将它从你的 gitignore 中删除并将你的`.xcodeproj`包签入 Git。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:17:59.190

忽略文件的机器可能已配置为忽略某些文件。

通过运行检查`core.excludesfile`您`gitconfig`的值`git config -l`。该值应该是包含要忽略的文件列表的文件的路径 - 检查以确保您没有忽略您在原始问题中列出的任何文件，如果是，请删除它们。

[这](http://gitready.com/beginner/2009/01/19/ignoring-files.html)是有关忽略文件的更多信息。

# php - htaccess：删除部分网址

> ID：12205631
> 
> 赞同：1
> 
> 时间：2012-08-30T21:13:46.290
> 
> 标签：php, .htaccess, mod-rewrite, rewrite

如果我的网址是： `http://mywebsite.com/lawyer/my-lawyer-profile`

`lawyer`对于所有类似请求，我如何从 URL 中删除？

```
RewriteRule ^lawyer/(.+)/$ /$1 
```

这似乎不起作用......当然，我可以访问网址，`http://mywebsite.com/my-lawyer-profile`但我需要始终重写网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:17:30.863

尝试添加`[R=301]`标志并去掉尾部斜杠：

```
RewriteRule ^lawyer/(.+)$ /$1 [R=301,L] 
```

这使得当有人去：

```
http://mywebsite.com/lawyer/my-lawyer-profile 
```

浏览器被重定向到：

```
http://mywebsite.com/my-lawyer-profile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:18:18.173

您需要确保在命令末尾有正确的标志，以便在客户端浏览器中实际执行重写。所以是这样的：

```
RewriteRule ^lawyer/(.*)$ /$1 [R=301,L] 
```

这里`R=301`将向浏览器（以及搜索引擎蜘蛛等）提供一个 301 FOUND 标头，指示要使用的正确 URL。该`L`标志将表明这是要运行的最后一条规则（即现在进行重定向，不要继续查看 .htaccess 文件的其余部分）。

请注意，我也稍微更改了您的规则，这样 /lawyer/ 将重定向到 / 并且您不需要在 URI 末尾添加斜杠（例如，对于您可能有查询字符串的情况）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:48:06.527

您的模式缺少前导，并且仅与结尾的`/`URL 匹配。`/`你可能不想要那个。

```
RewriteRule ^/lawyer/(.+)$ /$1 [NE] 
```

（NE 标志防止应用额外的 % 转义层，因为您正在写入路径部分而不是查询段。）

> 我需要它自动将 url 从 /lawyer/my-lawyer-profile 更改为 /my-lawyer-profile/

如果您说要将浏览器中显示的 URL 推送到较短的版本：这不是重写，而是普通的旧重定向。您*可以*使用 R 标志进行重定向（如上所述），但实际上没有必要使用 mod_rewrite 的 Swiss Army Chainsaw 进行简单的重定向。

```
Redirect permanent /lawyer / 
```

# internet-explorer - express 为 IE 重复请求返回 304

> ID：12205632
> 
> 赞同：11
> 
> 时间：2012-08-30T21:13:57.617
> 
> 标签：internet-explorer, node.js, express

我遇到了 ExpressJS 的一些奇怪行为。在对我的基于 node.js/express 的 API URL 的第二次请求时，它总是向 IE 返回 304 Not Modified 响应代码。其他浏览器获得 200（Chrome/FF）。问题是，即使内容实际上已更改，它也会返回 304。我试图搜索，但找不到有关该主题的任何内容。此外，我试图找出 IE 和 Chrome 的请求标头中的差异，并且可以看到任何可能导致这种情况的标头。任何帮助将不胜感激。

我必须添加连接通过 SSL，以防万一

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T06:16:55.727

Cache-Control 标头**是**一种解决方法。该错误存在于 Internet Explorer 对标头的 HTTP 1.1 规范的解释中。

我将此添加到我的路由处理程序中，从而解决了问题。您还需要一个`Last-Modified`或`ETag`标头，但 express 已经为我发送了该标头。

```
res.setHeader("Expires", "-1");
res.setHeader("Cache-Control", "must-revalidate, private"); 
```

请参阅：[使 IE 缓存资源但始终重新验证](https://stackoverflow.com/questions/5017454/make-ie-to-cache-resources-but-always-revalidate)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T10:32:57.037

有同样的问题我环顾四周，事实证明问题来自 IE 对 ajax get 请求的愚蠢激进缓存。事实上，当您看到这个 304 时，实际请求从未到达服务器，但 IE 会使用缓存中的最新数据进行响应。这是 MS 的预期行为，因此只有解决方法。

我的首选是为每个 ajax get 请求附加一个包含当前时间的无用查询参数。它将强制 IE 始终从服务器检索。好的部分是如果你使用 jQuery，你可以自动配置它

```
$.ajaxSetup({cache:false}) 
```

另一种解决方法是使用 POST 请求而不是 GET，但这并不总是一种选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T20:31:13.850

好吧，我设法通过添加 Cache-Control 标头来修复它

# spotify - Spotify“显示检查员”不起作用

> ID：12205633
> 
> 赞同：1
> 
> 时间：2012-08-30T21:14:01.143
> 
> 标签：spotify

我不断收到一条错误消息，提示“请选择您要检查的应用程序”。

我知道我只能使用本地应用程序执行此操作 - 我正在使用刚开始使用 Spotify 的教程执行此操作，这应该没问题。

我已经尝试过的事情：

1.  首先右键单击应用程序，然后从顶部菜单中选择“显示检查器”。

2.  选择应用程序并使用快捷键 ctrl+alt+j

3.  重新启动并重新安装 Spotify

我还注意到，当我想重新加载应用程序时，我遇到了同样的错误。

有任何想法吗？

# php - Php Archives (Phar) 不解压缩文本文件

> ID：12205634
> 
> 赞同：1
> 
> 时间：2012-08-30T21:14:16.173
> 
> 标签：php, apache, phar

我将我的 Php 应用程序部署为压缩的 Php 存档 (Phar)，我注意到当使用 gzip 压缩时，css 和其他文本文件没有解压缩并且看起来像乱码。禁用压缩时它们很好。

我正在使用为 css 文件设置 mime 类型的默认存根。为了让 Phar 解压缩非 php 文件，我必须启用一些设置吗？或者 Phar 是否按预期工作，我需要从 Php 脚本中回显文本文件的内容？

# ios5 - 需要帮助为 drawRect 中的内容设置动画

> ID：12205635
> 
> 赞同：0
> 
> 时间：2012-08-30T21:14:16.693
> 
> 标签：ios5, core-animation, core-graphics

我试图了解如何在我的 UIView 子类（称为 MyView）中为 - (void)drawRect:(CGRect)rect 中的简单对象设置动画。我是核心动画的新手，只是不确定做这种事情的最佳方法。

我基本上希望能够捕获触摸坐标并将它们表示为移动对象。我可以很好地使用 NSMutableArray 保存触摸。

我花了很多时间阅读 Core Animation Programming Guide 和 Quartz2D Programming Guide。我熟悉使用子图层和图层，所以如果这是我应该使用的，请指出正确的方向。

我的主要目标是能够捕获接触点并将它们表示为任何可以移动的形状。任何帮助表示赞赏。

```
#import "MyView.h"

@implementation MyView

@synthesize lastPoint;

NSMutableArray *myPoints;
CADisplayLink *theTimer;
float position = 0;

- (void) initializeTimer 
{   
    theTimer = [CADisplayLink displayLinkWithTarget:self selector:@selector(animateStuff:)];
    theTimer.frameInterval = 2; // run every other frame (ie 30fps)
    [theTimer addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void) animateStuff:(NSTimer *)theTimer 
{
    position++;
    [self setNeedsDisplay];

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code             
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)decoder
{
    if ((self = [super initWithCoder:decoder])) {

        // init array
        myPoints = [NSMutableArray array];

        position = 1;

        [self initializeTimer];

    }
    return self; 
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{            
    // store point in array
    UITouch *touch = [touches anyObject];
    lastPoint = [touch locationInView:self];
    [myPoints addObject:[NSValue valueWithCGPoint:lastPoint]]; // store CGPoint as NSValue

}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 2.0);
    CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);    
    CGContextSetFillColorWithColor(context, [UIColor orangeColor].CGColor);

    // draw all points in array
    NSUInteger pointCount = [myPoints count];
    for (int i = 0; i < pointCount; i++) {
        NSValue *v = [myPoints objectAtIndex:i];
        CGPoint p = v.CGPointValue;

        CGRect currentRect = CGRectMake(p.x-10+position, p.y-10, 20, 20);    
        CGContextAddRect(context, currentRect);  
    }
    CGContextDrawPath(context, kCGPathFillStroke);         
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:44:34.313

drawRect 中的动画绝对是绝对错误的方法。这迫使图形硬件每次都重新渲染整个视图。这将非常缓慢和生涩。您希望尽可能避免触发 drawRect。

相反，您应该使用某种形式的动画。有很多选择。

您可以使每个对象成为一个视图，并使用 UIView 动画方法，如 animateWithDuration:completion: 或其变体之一。

您可以制作您想要为图层设置动画的每一件事，将这些图层添加为视图的子图层，并使用隐式动画（您只需更改图层的位置属性或其他“动画”属性，系统会为它们设置动画）为您更改）或显式动画（您可以在其中创建不同类型的 CAAnimation 对象并将它们添加到您的图层中。）

最后，您可以使用 CAShapeLayer，并对安装在层中的路径进行动画处理。只要您在动画步骤之间的路径中保持相同数量和类型的控制点，您就可以使用形状图层一次为一大堆形状制作动画。您还可以动画曲线以复杂的方式改变形状和许多其他有趣的效果。在 CAShapeLayer 中动画曲线意味着同时使用 CGPath 对象和 CAAnimation 对象。

UIView 动画是迄今为止最容易使用的，并且针对性能进行了优化。如果您可以使用视图动画来做您想做的事，那么您可能应该这样做。

接下来的复杂程度是隐式层动画。

使用 CAAnimation 对象的显式动画是最复杂的，但也是最强大的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T22:20:11.827

您真正需要的是绘制一个简单的 CALayer，具有您想要的任何形状-例如，20x20 Rect，并且每次触摸发生时-您说，您已经可以抓取位置，只需更改该图层的位置-您就可以了需要，只是：

```
layer.position = newPosition; 
```

它会隐含地动画。

# unix - 用 SED 替换 KSH 中的空格

> ID：12205640
> 
> 赞同：2
> 
> 时间：2012-08-30T21:14:31.773
> 
> 标签：unix, sed, ksh

我正在以编程方式构建一个查找命令：

```
find  "${SRC_DIR}" "${FILE_NAMES}" -type f -mtime +14 -level 0 
```

其中 FILE_NAMES 是我需要匹配的文件模式，它是一个简单的以空格分隔的模式列表（*.txt、*.html 等）。

要为 find 命令正确格式化此列表，它不能只是一个列表，它必须看起来像：

```
-name *.txt -o -name *.html 
```

我的解决方案是使用：

```
FILE_NAMES=$(echo ${FILES} | sed -e 's/\s+/-o -name /g') 
```

但它不起作用，特别是它似乎不明白我想替换空格。有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:52:22.153

并非所有 seds 都支持类似 perl 的空格、数字等占位符。我没有办法测试您的确切情况，但以下应该是一个很好的指南。

另外，请注意`find -predicate -predicate ....`默认情况下是 ANDed。要完成这项`-o`工作，您必须将整个事情包裹在`( (parens) )`AND 中，这样外壳就不会将括号视为启动子外壳的请求，您必须转义括号，即`\( .... -o .... \)`. 所以这导致我们

```
 set -vx; SRC_DIR="." ; FILE_NAMES="a b c"
 find  "${SRC_DIR}" \( $(echo "$FILE_NAMES"| sed 's/ / -o -name /g;s/^/-name /') \) -type f -mtime +14 -level 0 
```

输出

```
+ echo 'a b c'
+ sed 's/ / -o -name /g;s/^/-name /'
+ find . '\( -name a -o -name b  -o -name c \)' -type f -mtime +14 -level 0
find: invalid predicate `-level' 
```

这只是表明我的 find 也不支持 -level 。

**编辑**删除`"`了`\(....\)`.

**还**

如果您使用的是 ksh93，则可以使用变量修饰符，例如

```
${FILE_NAME// / -o -name} 
```

但是您需要仅连接开头`-name`或对 FILE_NAME 的保存值进行第二次替换。

您可以通过发出以下 cmd 来查看您是否有 ksh93

```
echo ${.sh.version} 
```

如果你得到一个值，那么你有 ksh93。

IHTH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T23:17:07.177

克什：

```
FILES='*.txt *.html'
FILE_NAMES=$(
  # $() runs this script in a subshell
  conjunction=""
  set -f   # turn off file pattern expansion
  for patt in $FILES; do
    printf "%s -name '%s' " "$conjunction" "$patt"
    conjunction="-o"
  done
)
find  "${SRC_DIR}" ${FILE_NAMES} -type f -mtime +14 -level 0 
```

请注意，`$FILE_NAMES`没有*引用*- 您希望 shell 将变量拆分为单独的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:35:04.653

采取不同的方法可能更容易：

```
find ${SRC_DIR} -type f -mtime +14 | egrep '\.(txt|html)$' 
```

我忽略了这`-level 0`一点，因为我不知道它的用途 - 它在我手头的版本中不存在。你总是可以把它放回去...

# java - 在 Java Applet 中以随机方向移动对象

> ID：12205641
> 
> 赞同：2
> 
> 时间：2012-08-30T21:14:33.313
> 
> 标签：java, random, applet, mouseevent

我正在尝试创建一个小程序，其中用户通过将狗移向羊并使羊沿随机方向远离狗来将羊放入笔中。羊和狗被定义为对象。

该小程序仍处于早期阶段。到目前为止，我可以在屏幕上拖动狗对象，当狗对象靠近绵羊对象时，它会移动，但只能在某个区域内（在我设置的范围内）。我不是在寻找解决方案，我只是在寻求帮助。

我想要帮助的是当狗对象进入我设定的范围内时，让绵羊对象在远离狗的随机方向上移动，而不仅仅是在设定的范围内移动。任何帮助或提示将不胜感激。这是我的代码：

```
 package mandAndDog;

import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;

public class SheepDog extends Applet implements ActionListener, MouseListener, MouseMotionListener
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    /**
     * 
     */

    Dog dog;
    Sheep sheep;
    int xposR;
    int yposR;
    int sheepx;
    int sheepy;
    int sheepBoundsx;
    int sheepBoundsy;

    public void init()
    {
        addMouseListener(this);
        addMouseMotionListener(this);
        dog = new Dog(10, 10);
        sheep = new Sheep(200, 100);
        sheepx = 175;
        sheepy = 75;
        sheepBoundsx = 50;
        sheepBoundsy = 50;

    }
    public void paint(Graphics g)
    {
        dog.display(g);
        sheep.display(g);

    }
    public void actionPerformed(ActionEvent ev)
    {}
    public void mousePressed(MouseEvent e)
    {}
    public void mouseReleased(MouseEvent e)
    {}
    public void mouseEntered(MouseEvent e)
    {}
    public void mouseExited(MouseEvent e)
    {}
    public void mouseMoved(MouseEvent e)
    {
    }
    public void mouseClicked(MouseEvent e)
    {}
    public void mouseDragged(MouseEvent e)
    {
        dog.setLocation(xposR, yposR);
        if (xposR > sheepx&& xposR < sheepx+sheepBoundsx && yposR > sheepy
                && yposR < sheepy+sheepBoundsy){
            sheep.setLocation(xposR + 50, yposR + 50);
        }

        xposR = e.getX();
        yposR = e.getY();
        repaint();

    }
}

class Dog 
{
    int xpos;
    int ypos;
    int circleWidth = 30;
    int circleHeight = 30;

    public Dog(int x, int y)
    {
        xpos = x;
        ypos = y;

    }

    public void setLocation(int lx, int ly)
    {
        xpos = lx;
        ypos = ly;
    }

    public void display(Graphics g)
    {
        g.setColor(Color.blue);
        g.fillOval(xpos, ypos, circleWidth, circleHeight);
    }       
}
class Sheep
{
    int xpos;
    int ypos;
    int circleWidth = 10;
    int circleHeight = 10;

    public Sheep(int x, int y)
    {
        xpos = x;
        ypos = y;

    }

    public void setLocation(int lx, int ly)
    {
        xpos = lx;
        ypos = ly;
    }

    public void display(Graphics g)
    {
        g.setColor(Color.green);
        g.fillOval(xpos , ypos, circleWidth, circleHeight);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:41:51.633

你不是在寻找代码，所以这就是我要做的。这是非常基本的，并且由于 JVM 的随机性可能会产生可预测的结果但是，我喜欢使用内置的 Math.random() 函数来生成随机数和模运算符将随机数绑定到某个整数介于 0 和上限之间的值。

我建议将行进的方向和距离计算为向量。

```
 int MAX_DISTANCE = 50;
  int direction = (int) (Math.random() * 360) % 360;
  int distance = (int) (Math.random() * MAX_DISTANCE) % MAX_DISTANCE; 
```

这里距离是像素的度量，方向是行进角度的度量，以度为单位。

由于我们在向量中工作，我们可以使用角度和距离以及一些非常基本的三角函数来计算新的像素位置。

我建议把它放到一个函数中来计算新的目标位置，这样，函数就可以计算出新的位置，如果那个位置离狗太近，你可以决定一条新的路径。

如果我可以提出建议，我建议将绵羊类放入重新计算绵羊下一步运动的 Timer 类中。这样，羊就可以四处游荡了。在徘徊时，绵羊每次移动的 MAX_DISTANCE 可能要小得多。从而模拟一定程度的威胁。

如果你真的想进入模拟，你可以测量狗到羊的距离，并根据距离，缩放羊的移动速度，这样狗离得越近，羊移动的越快（不超过最大距离）。如果你这样做，我建议你考虑使用 Math.log() 来缩放运动，这样当狗离羊 200 像素时，狗与羊之间的距离减少 10 像素对羊的运动的影响比狗距离 15 像素。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:27:33.360

查看 Java 标准库中的[Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)类，因为它可能会有所帮助。您可以轻松生成伪随机整数并调整角色的 (x,y)。添加一些错误检查以确保它们彼此远离，您应该一切顺利！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:27:35.907

我会将您要移动绵羊的方向划分为一个数字。如果羊可以上下左右移动，而你减去狼来自的方向，说左，你剩下三个。上下左右。

使用数学随机函数来选择其中一个随机函数，您可以查看 API，但基本上乘以您想要随机的最大数字并转换为 Int 以摆脱小数。

```
int intDirection = (int)(Math.random()*3); 
```

这将给你 0、1 和 2。然后做一个案例陈述以根据数字移动方向。也许为了良好的做法，请查看三个方向的枚举器。

如果你想有更多的方向，你可以查看向量，这就是你做随机的方式。

# sql-server - 我可以用人工 PK 定义识别关系吗

> ID：12205642
> 
> 赞同：1
> 
> 时间：2012-08-30T21:14:36.197
> 
> 标签：sql-server, entity-framework, ef-code-first, foreign-keys

我的项目中有几个模型确实应该使用识别关系，但是出于速度和简单性的原因，我将它们设置为具有唯一的自动增量主键。例如，联系人中的电子邮件地址：

```
Public Class EmailAddress
    'This is currently the primary key
    Public Property EmailAddressID As Integer

    'These three properties really make a composite primary key in an identifying relationship with contacts
    Public Property ContactID As Integer
    Public Property Address As String
    Public Property Domain As String
End Class 
```

我对此设置有两个问题：

1.  在复合键中包含字段是否`nvarchar`真的会减慢数据库的速度，足以保证不使用它（因为我被引导相信学校）？
2.  如果是 1，有没有办法（在数据注释或 Fluent API 中）通知 EF 这实际上是与人工主键的识别关系，从而[获得好处](http://msdn.microsoft.com/en-us/library/ee373856%28v=vs.100%29.aspx)（在标题“识别和非识别的注意事项”下关系”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:38:00.763

1.  不。密钥是一种逻辑的、数据完整性的特性；性能取决于许多其他因素。

2.  在关系模型和 SQL 中，标识关系和非标识关系之间的区别非常小或根本不重要。您可能会发现这些术语有助于理解概念模型，但它们并不是制定数据库设计决策的真正基础。您所指的所谓的“好处”本质上只是语法糖。

# ruby-on-rails - 与 Mongoid 聚合

> ID：12205650
> 
> 赞同：17
> 
> 时间：2012-08-30T21:15:48.147
> 
> 标签：ruby-on-rails, mongodb, mongoid, aggregation-framework

MongoDB 有一个新的[聚合框架](http://docs.mongodb.org/manual/reference/aggregation/)，我正在尝试弄清楚如何将它与 Mongoid 一起使用。似乎有一个具有此功能的 Moped 分支，如此[处](https://github.com/mongoid/moped/issues/49)所述。我已经更新到 MongoDB 2.2 并尝试在我的应用程序上安装这个 Moped 分支，如下所示：

> 宝石'轻便摩托车'，git：'git：//github.com/mongoid/moped.git'，分支：'聚合支持'

但聚合仍然不起作用。这是我用来测试它的调用：

> = Post.all.aggregate({ "$group" => { "_id" => "$_id" } })

**更新**

在 mongo shell 中，这是有效的：

> db.users.aggregate({ $group : { _id : "$_id" }})

所以我认为这是一个 Mongoid 问题......任何关于此的词都会很棒！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-21T18:16:45.323

从 3.0.1 开始，Mongoid 需要 MongoDB 2.2 并支持新的聚合框架。

您现在可以调用`aggregate`集合：

```
project = {"$project" => 
  {
    "charges" => 1,
    "year"    => { "$year" => "$created"}, "month" => { "$month" => "$created"},
    "week"    => { "$week" => "$created"}, "day"   => { "$dayOfYear" => "$created"} 
  }
}
group =  { "$group" =>
  { "_id" => {"year"=>"$year", "week"=>"$week"}, "count" => { "$sum" => 1 } } 
}
Charge.collection.aggregate([project,group]) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-25T21:34:38.873

目前，mongoid 没有提供超出 Moped 公开的额外语法。如果您愿意在 Gemfile 中包含 Moped（指向 master），则可以测试 Moped 对聚合的支持。

```
gem 'moped', :git => 'git://github.com/mongoid/moped.git' 
```

你要记得在 1.3.0 发布后拉取它，然后通过`gem update moped`.

有了它，您可以使用以下命令运行查询：

```
 Post.collection.aggregate({ "$group" => { "_id" => "$_id" } }) 
```

有关更多信息，请参阅助力车变更[日志](https://github.com/mongoid/moped/blob/master/CHANGELOG.md)。

# jaxb - 使用 annox 编辑 JAXB 生成的注释并在参数中添加命名空间

> ID：12205652
> 
> 赞同：4
> 
> 时间：2012-08-30T21:15:52.983
> 
> 标签：jaxb, jaxb2, jaxb2-basics, annox

我在 JAXB 生成的类中有以下注释

```
@XmlType(name = "MessageInfoType", propOrder = {
    "debugTraceBoolean",
    "clientHostnameString",
    "endUserIPAddress"
}) 
```

需要在具有自定义绑定的 JAXB 类中生成以下注释。即需要编辑上述注释并使用 annox 添加命名空间，如下所示。

```
 @XmlType(name = "MessageInfoType", propOrder = {
            "debugTraceBoolean",
            "clientHostnameString",
            "endUserIPAddress"
        }, namespace="urn:expedia:e3:data:messagetypes:defn:v4") 
```

我的 xjb 文件是：

```
 <jaxb:bindings schemaLocation="../../serviceDescription/atlantis/common/com.expedia.e3.data.messagetypes.v4.xsd">

    <jaxb:bindings node="//xs:complexType[@name='MessageInfoType']">
        <annox:annotate target="field">
            <annox:annotate annox:class="javax.xml.bind.annotation.XmlType" 
                   namespace="urn:expedia:e3:data:messagetypes:defn:v4"/>
        </annox:annotate>
    </jaxb:bindings>
  </jaxb:bindings> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T06:08:35.287

隶属关系免责声明：我是[Annotate Plugin](http://confluence.highsource.org/display/J2B/Annotate+Plugin)的作者。

如果您尝试添加已存在的注释（相同位置、相同注释类），这将修改现有注释而不是添加第二个注释。目前我不确定这是否会覆盖所有属性或合并新属性，但这绝对值得一试。

更新：

我已经重新检查了这一点。确实，它已经实现（应该是 0.6.4 版本，我刚刚检查了 0.6.5-SNAPSHOT）。

检查此示例：

[https://svn.java.net/svn/jaxb2-commons~svn/basics/trunk/tests/annotate/src/main/resources/bindings.xjb](https://svn.java.net/svn/jaxb2-commons~svn/basics/trunk/tests/annotate/src/main/resources/bindings.xjb)

这是绑定：

```
 <jaxb:bindings node="xs:complexType[@name='issueJIIB39CType']/xs:attribute[@name='test']">
        <annox:annotate target="field">
            <annox:annotate annox:class="javax.xml.bind.annotation.XmlAttribute" required="false"/>
        </annox:annotate>
    </jaxb:bindings> 
```

如果存在此绑定，您将获得：

```
@XmlAttribute(name = "test", required = false)
protected String test; 
```

如果不是，它将是这样的：

```
@XmlAttribute(name = "test", required = true)
protected String test; 
```

因此，正如我所说，如果您在同一位置和同一类添加注释，它们将被合并。

# node.js - 我应该在哪个路径中安装 socket.io 以进行 node.js 编程

> ID：12205654
> 
> 赞同：0
> 
> 时间：2012-08-30T21:15:56.687
> 
> 标签：node.js, socket.io

我应该在哪个路径中安装用于 node.js 编程的 socket.io。我应该将它安装在与 node.js 相同的路径中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:17:45.833

你最好的方法是用来`npm`安装你的包：

```
npm install socket.io 
```

这会将其安装在您为该特定项目运行它的文件夹中。

如果您希望它为您的所有项目全局安装：

```
npm install -g socket.io 
```

# django - Django，没有数据契约的 SOA 风格站点的单元测试

> ID：12205655
> 
> 赞同：1
> 
> 时间：2012-08-30T21:15:57.983
> 
> 标签：django, testing, contract

假设我在公司有 2 个 django 项目，A 和 B，B 通过 restful API 使用来自 A 的数据，并且它没有 WADL

最初我的单元测试（更像是功能测试）直接使用来自 A 的数据，但是在 Jenkins 等集成服务器中运行会带来很多问题。

为了解决这个问题，我需要创建一些假数据来输入项目 B（你可以说这是单元测试的正确方法）。

现在提出的另一个问题是，A 可能会更改关键数据结构，而 B 继续使用模拟数据通过单元测试。

所以在我开始做任何事情之前，我想问：你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:30:22.790

可能带有固定装置和自定义测试运行器。这取决于 a 和 b 之间的模型有何不同，以及在每种格式之间转换的难易程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:17:37.993

让 A 的测试套件记录返回的数据 - 之后运行 B 的测试，使用 A 的测试套件生成的数据作为输入。

# java - 在 Netbeans Web 应用程序中使用小程序

> ID：12205656
> 
> 赞同：1
> 
> 时间：2012-08-30T21:15:58.060
> 
> 标签：java, web-applications, netbeans, jar, applet

```
<applet archive='AlienWar.jar' code='AlienWarApplet.class' width='387' height='410'>
                                </applet> 
```

我有一个小程序，当我在 html 中使用它并将 .jar 放在同一目录中时，它的工作正常。但现在我正在 netbeans 中构建一个 Web 应用程序（我使用 JSF 框架和 Apache Tomcat 服务器）。我在 index.xhtml 中插入相同的代码并将 .jar 添加到编译时库，但我得到了一个 classNotFoundExeception。

我应该把 .jar 放在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T03:22:11.463

如果您在浏览器地址栏中键入地址并点击，则 Jar 需要位于服务器上可以从中获取的位置`Enter`

对于网络应用程序，这尤其意味着。**不要**将存档放在`WEB-INF/lib`您可能用于 servlet/JSP 库的目录中。该目录不提供给最终用户进行浏览。

可以通过将存档与 HTML 放在同一目录中来使代码工作（假设 HTML 位于通过“获取测试”的位置），但这很草率并且可能导致同一个 Jar 在许多目录中对于许多小程序。

相反，我通常会将所有小程序存档放在域根目录的单个目录中。具体来说（这里没有硬性规定）`lib`。在 applet 元素中指定`codebase="/lib"`，JRE 将在[http://your.com/lib](http://your.com/lib)`archive`路径中查找属性中逗号分隔列表中的任何档案。

# macos - 是否每台配备 Lion 的 Mac 都支持 OpenGL 3.2？

> ID：12205660
> 
> 赞同：5
> 
> 时间：2012-08-30T21:16:31.050
> 
> 标签：macos, opengl, osx-lion, opengl-3

我正在编写一个 mac 应用程序，它使用带有旧配置文件的 OpenGL 在 NSOpenGLView 上绘制它的一些 UI。

我的应用程序面向 OS X 10.7 及更高版本。

如果我迁移到 OpenGL 3.2，它会阻止一些使用 Lion 的用户运行它，还是每台使用 Lion 的 Mac 都支持 OpenGL 3.2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-23T17:11:36.453

OSX 有一个软件后备渲染器，当硬件中没有 OpenGL 功能时，它会自动使用。每台运行 Lion 的 OSX 机器都通过此软件后备渲染器支持完整的 OpenGL 3.2 Core 规范。如果您请求硬件中不可用的功能，那么 OpenGL 框架将默默地退回到图形管道的该阶段的软件渲染。

这意味着每台运行 Lion 的 Mac 都将运行您的 OpenGL 3.2 应用程序，无论硬件如何。您不会收到运行时错误，但您可能会或可能不会获得可接受的性能——这取决于 GPU 在硬件中支持的功能以及渲染任务的复杂程度。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T00:34:16.267

OS X 10.7 的 SDK 包括 OpenGL 3.2 的核心配置文件，但实际的运行时支持需要存在兼容 OpenGL 3.2 的 GPU 和驱动程序。

OpenGL 3.2 于 2008 年发布，OS X 10.7 Lion 支持可追溯到 2006 年的某些 Mac 机型。2006 年末的 Core 2 Duo MacBook Pro 运行 Lion 并具有 ATI Mobility Radeon X1600，它是一个 OpenGL 2.0 GPU。

通过该示例可以看出，能够运行 10.7 Lion 的计算机集是能够运行 OpenGL 3.2 程序的计算机集的超集。

请注意，我既不是 Mac 专家也不是 OpenGL 程序员，我不知道 OpenGL 向后兼容的程度。我想针对 OpenGL 3.2 库进行编译很好，但是如果您尝试使用任何硬件加速 3.2 功能，那么您会遇到运行时错误。但是，您应该在使用之前测试某个功能是否受支持，因此您的程序应该可以在较旧的 Mac 上正常运行，前提是您进行了一些小的修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T20:29:33.073

那里的答案是正确的，如果您禁用软件渲染器后备选项，该选项可用于每台运行 Lion 但不是硬件加速的 Mac。

以下是不同 GPU 和系统软件渲染器支持的 OpenGL 功能的详细列表：[https ://developer.apple.com/graphicsimaging/opengl/capabilities/GLInfo_1075_Core.html](https://developer.apple.com/graphicsimaging/opengl/capabilities/GLInfo_1075_Core.html)

# css - 结合 :nth-of-type() 和 :not

> ID：12205664
> 
> 赞同：1
> 
> 时间：2012-08-30T21:16:53.863
> 
> 标签：css, css-selectors

我有一个尝试结合两个伪类的奇怪案例：`:not`并`:nth-of-type()`在非隐藏项目上获得彩虹条纹

拥有一个`:not([selector]):nth-of-type([rule])`，我假设 css 会`:not`在应用规则之前先过滤项目`:nth-of-type`，但是以任何顺序排列它们都会给我相同的结果。

这是一个演示这一点的 jsfiddle：http: [//jsfiddle.net/j7hjU/](http://jsfiddle.net/j7hjU/)

做这些时我可能会忽略一些东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T21:31:53.840

> 我假设 css 在应用 :nth-of-type 之前会先过滤 :not 项目

没有。CSS 是完全声明性的；每个选择器都是一个简单的条件，它独立于任何选择器部分为真或假。它不是一种程序语言，您可以在其中获取一组并对其进行处理，并逐步缩小范围。具有过程规则的选择器语言将不受多种优化的影响，并且速度较慢。

所以`nth-of-type`只是关于元素父级中的位置，而不是“到目前为止的结果列表”中的位置，因为 CSS 选择器没有这样的概念。`nth-of-type`选择器引擎可以在使用 缩小测试范围之前查找测试`not`，因为规则不会相互干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:39:49.747

这似乎是这个问题的重复：[Css coloring table problem](https://stackoverflow.com/questions/7054891/css-coloring-table-problem)

答案基本上是否定的，但您可以将一个类应用于可见行以使其工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-30T21:30:35.770

CSS 从右到左解析。您是否尝试过翻转`:not`and `:nth-of-type`？

[为什么浏览器从右到左匹配 CSS 选择器？](https://stackoverflow.com/questions/5797014/why-do-browsers-match-css-selectors-from-right-to-left)

# java - ANTLR：空格缩进？

> ID：12205669
> 
> 赞同：7
> 
> 时间：2012-08-30T21:17:29.517
> 
> 标签：java, antlr, lexer

我想用空格缩进创建一个非常简单的语法。每行由 1 个或多个单词组成，但像 python 一样缩进（4 个空格或一个制表符是一个缩进），并且缩进没有关闭，例如：

```
if something cool occurs
    do this
else
    otherwise do this
    loop around something
       each time doing this
       and do that
say good byte 
```

不是读取每一行，而是计算缩进并手动构建一棵树，是否可以在 ANTLR 语法中完成所有这些操作？我的目标语言是Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T05:59:54.013

这个有可能。您所做的就是定义一个规则并让它被跳过。

干得好：

```
Ignore :  (' ' | '\t' | '\n' | '\r')+ {skip();}; 
```

或者如果您需要识别 \n 或 \r

```
Ignore :  (' ' | '\t')+ {skip();}; 
```

将此添加到您的语法中，所有空格和制表符都将被忽略。

# c# - 在 avalon 编辑中更改默认行高

> ID：12205676
> 
> 赞同：3
> 
> 时间：2012-08-30T21:17:59.547
> 
> 标签：c#, avalonedit

我正在使用 avalon edit 编写自定义软件，并且正在寻找一种方法来使行之间的空间（高度）更大。目前，每当用户写完一行并想写另一行时，我都被迫添加一个空行。

我已经开始研究`TextView`似乎计算 defaultLineHeight 的类，但我唯一能影响的是视觉插入符号的高度，而不是内容本身。

目前我正在考虑让每对线不可见，但我希望有一种更简单的方法来实现在线之间添加更多空间的简单操作。

这是`TextView`我目前正在检查的课程中的方法。欢迎任何提示或提示。

```
void CalculateDefaultTextMetrics()
{
    if (defaultTextMetricsValid)
    {
        return;
    }

    defaultTextMetricsValid = true;
    if (formatter != null)
    {
        var textRunProperties = CreateGlobalTextRunProperties();
        using (
            var line = formatter.FormatLine(
                new SimpleTextSource("x", textRunProperties),
                0,
                32000,
                new VisualLineTextParagraphProperties { defaultTextRunProperties = textRunProperties },
                null))
        {
            wideSpaceWidth = Math.Max(1, line.WidthIncludingTrailingWhitespace);
            defaultBaseline = Math.Max(1, line.Baseline);
            defaultLineHeight = Math.Max(1, line.Height);
        }
    }
    else
    {
        wideSpaceWidth = FontSize / 2;
        defaultBaseline = FontSize;
        **defaultLineHeight = FontSize + 3; // bigger value only affects caret height :(**
    }

    // Update heightTree.DefaultLineHeight, if a document is loaded.
    if (heightTree != null)
    {
        heightTree.DefaultLineHeight = defaultLineHeight;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:44:50.320

是默认字体中一行的`DefaultLineHeight`高度，用作每行高度的初始假设。（例如用于计算滚动条位置）

每当一条线被实际测量（`TextView.BuildVisualLine`）时，测量的高度就会存储在高度树中，覆盖默认高度。这是因为自动换行（或更改字体大小的换行符）会导致每行具有不同的高度。

目前并不真正支持行间距。如果您想添加它，您可以尝试更改 的高度计算`VisualLine`，例如通过更改`VisualLine.SetTextLines()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-20T01:54:01.797

包括@Peter Moore 所说的。为了强制文本正确呈现，还需要一个步骤。

底部`VisualLine.cs`是`VisualLineDrawingVisual`负责绘制实际文本但无权访问该类的`TextView`类。

修改构造函数以包含作为参数并将by 的`double lineSpacing`所有实例相乘。`textLine.Height``lineSpacing`

在中，作为现在修改的构造函数的辅助参数`VisualLine.Render()`传递。在此之后，一切都应该正确绘制。`textView.LineSpacing``VisualLineDrawingVisual`

**这是修改后的代码的完整视图：**

文本视图.cs

```
public static readonly DependencyProperty LineSpacingProperty =
    DependencyProperty.Register("LineSpacing", typeof(double), typeof(TextView),
                                new FrameworkPropertyMetadata(1.0));

public double LineSpacing {
    get { return (double) GetValue(LineSpacingProperty); }
    set { SetValue(LineSpacingProperty, value); }
} 
```

视觉线.cs

*第 269 行*

```
internal void SetTextLines(List<TextLine> textLines) {
    this.textLines = textLines.AsReadOnly();
    Height = 0;
    foreach (TextLine line in textLines)
        Height += line.Height * textView.LineSpacing;
} 
```

*335号线*

```
public double GetTextLineVisualYPosition(TextLine textLine, VisualYPosition yPositionMode) {
    if (textLine == null)
        throw new ArgumentNullException("textLine");
    double pos = VisualTop;
    foreach (TextLine tl in TextLines) {
        if (tl == textLine) {
            switch (yPositionMode) {
            case VisualYPosition.LineTop:
                return pos;
            case VisualYPosition.LineMiddle:
                return pos + tl.Height / 2 * textView.LineSpacing;
            case VisualYPosition.LineBottom:
                return pos + tl.Height * textView.LineSpacing;
            case VisualYPosition.TextTop:
                return pos + tl.Baseline - textView.DefaultBaseline;
            case VisualYPosition.TextBottom:
                return pos + tl.Baseline - textView.DefaultBaseline + textView.DefaultLineHeight;
            case VisualYPosition.TextMiddle:
                return pos + tl.Baseline - textView.DefaultBaseline + textView.DefaultLineHeight / 2;
            case VisualYPosition.Baseline:
                return pos + tl.Baseline;
            default:
                throw new ArgumentException("Invalid yPositionMode:" + yPositionMode);
            }
        }
        else {
            pos += tl.Height * textView.LineSpacing;
        }
    }
    throw new ArgumentException("textLine is not a line in this VisualLine");
} 
```

*386 号线*

```
public TextLine GetTextLineByVisualYPosition(double visualTop) {
    const double epsilon = 0.0001;
    double pos = this.VisualTop;
    foreach (TextLine tl in TextLines) {
        pos += tl.Height * textView.LineSpacing;
        if (visualTop + epsilon < pos)
            return tl;
    }
    return TextLines[TextLines.Count - 1];
} 
```

*701线*

```
internal VisualLineDrawingVisual Render() {
    Debug.Assert(phase == LifetimePhase.Live);
    if (visual == null)
        visual = new VisualLineDrawingVisual(this, textView.LineSpacing);
    return visual;
} 
```

*714线*

```
public VisualLineDrawingVisual(VisualLine visualLine, double lineSpacing) {
    this.VisualLine = visualLine;
    var drawingContext = RenderOpen();
    double pos = 0;
    foreach (TextLine textLine in visualLine.TextLines) {
        textLine.Draw(drawingContext, new Point(0, pos), InvertAxes.None);
        pos += textLine.Height * lineSpacing;
    }
    this.Height = pos;
    drawingContext.Close();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-09T17:45:30.580

我知道这是一篇旧帖子，但我只是遇到了同样的问题。通过以下修改，我设法很容易地添加了行距：

1.  添加一个新的`double`依赖属性来`TextView`调用`LineSpacing`，默认值为`1.0`
2.  在，`VisualLine.SetTextLines`乘以`line.Height``textView.LineSpacing`
3.  在`VisualLine.GetTextLineVisualYPosition`and`VisualLine.GetTextLineByVisualYPosition`中，每次出现的`tl.Height`乘以`textView.LineSpacing`

然后您可以`TextView.LineSpacing`直接在代码中或通过自定义 XAML 样式等进行设置。

这似乎是所有必要的。

PS - AvalonEdit 太棒了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-20T18:39:47.947

除了@Robert Jordan 所说的之外，我还必须进行一些更改才能获得令人满意的结果。

首先，要使文本标记覆盖覆盖行的整个高度，请在 BackgroundGeometryBuilder.cs 中更改以下行

ProcessTextLines 方法，第 196 行：

*第 215 行：*

```
yield return new Rect(pos, y, 1, line.Height * textView.LineSpacing); 
```

*第 259 行：*

```
lastRect = new Rect(Math.Min(left, right), y, Math.Abs(right - left), line.Height * textView.LineSpacing); 
```

*第 259 行：*

```
Rect extendSelection = new Rect(Math.Min(left, right), y, Math.Abs(right - left), line.Height * textView.LineSpacing); 
```

我遇到的第二个问题是文本呈现在现在扩展行高的顶部，而不是底部。为了解决这个问题，需要在渲染行之前添加额外的空间，而不是之后。因此，进行以下更改：

VisualLine.cs，第 714 行

```
public VisualLineDrawingVisual(VisualLine visualLine, double lineSpacing) {
    this.VisualLine = visualLine;
    var drawingContext = RenderOpen();
    double pos = 0;
    foreach (TextLine textLine in visualLine.TextLines) {
        pos +=(textLine.Height * lineSpacing)-textLine.Height
        textLine.Draw(drawingContext, new Point(0, pos), InvertAxes.None);
        pos += textLine.Height;
    }
    this.Height = pos;
    drawingContext.Close();
} 
```

此外，我发现将其转换为支持动态逐行行距很简单。只需将 LineSpacing 属性移动到 VisualLine，然后像这样添加一个 VisualLineTransformer：

```
class LinePaddingTransformer : IVisualLineTransformer
{
    public LinePaddingTransformer()
    {

    }
    public void Transform(ITextRunConstructionContext context, IList<VisualLineElement> elements)
    {
        int index = context.VisualLine.FirstDocumentLine.LineNumber - 1;
       //You need to calculate your padding from the line index somehow.
       //for example create a list of objects with the spacing in them and pass to this transformer.
        double spacing= MyCalculateLinePaddingMethod(index);  
        context.VisualLine.LineSpacing= spacing;
    }
} 
```

如果您只需要在文本换行的情况下将间距添加到第一行，则需要遍历之前与 LineSpacing 属性相乘的每个位置，并检查 TextLine 是否是集合中的第一行。

# php - SQL - 复杂的 JOIN 查询

> ID：12205679
> 
> 赞同：0
> 
> 时间：2012-08-30T21:18:15.053
> 
> 标签：php, mysql, sql, join

在一个教程中，我看到了这个 SQL 查询：

```
SELECT a.id as a_id, a.info as a_info, 
       b.id as b_id, b.info as b_info 
FROM stats AS a 
JOIN stats as b
ON a.id != b.id 
LIMIT 25 
```

查询运行良好，但现在我需要添加**WHERE**条件。我有桌子`users`。该表`stats`包含列`user_id`。我尝试从表中获取所有用户`stats`（`users.city=1`例如），但我仍然找不到方法，如何实现...

我的问题是，我目前不知道如何将另一个 JOIN （对于 table ）放入查询中`users`。

我会感谢每一个建议，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:26:34.680

为方便起见，我重新格式化了您的原始 SQL 语句，使其可供人类阅读。

```
SELECT a.id   AS a_id
     , a.info AS a_info
     , b.id   AS b_id
     , b.info AS b_info
  FROM stats a
  JOIN stats b
    ON a.id != b.id 
 LIMIT 25 
```

您当前的查询几乎返回笛卡尔积。stats 中的每一行都与 stats 中的每一行匹配，除了匹配自身。（假设这`stats.id`是一个主键或唯一键。）

要向 users 表添加连接，以限制从 返回的行`a`，例如：

```
SELECT a.id   AS a_id
     , a.info AS a_info
     , b.id   AS b_id
     , b.info AS b_info
  FROM stats a
  JOIN users au ON au.id = a.user_id AND au.city=1
  JOIN stats b ON a.id != b.id 
 LIMIT 25 
```

如果要限制返回的行`a`和`b`，请向表中添加另一个联接`users`：

```
SELECT a.id   AS a_id
     , a.info AS a_info
     , b.id   AS b_id
     , b.info AS b_info
  FROM stats a
  JOIN users au ON au.id = a.user_id AND au.city=1
  JOIN stats b ON a.id != b.id 
  JOIN users bu ON bu.id = b.user_id AND bu.city=1
 LIMIT 25 
```

这不是实现这一目标的唯一方法。例如，您可以使用一个`a.user_id IN (subquery)`或一个`EXISTS (subquery)`谓词。

（如果您将 SQL 格式化为可读的格式，那么它的使用会容易得多。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:26:34.693

这是一种方法：

```
SELECT a.id as a_id, a.info as a_info, 
       b.id as b_id, b.info as b_info 
FROM stats AS a 
JOIN stats as b
     ON a.id != b.id 
where a.user_id in (select user_id from users where users.city = 1)
LIMIT 25 
```

您也可以将其表示为连接（在 MySQL 中更有效）：

```
SELECT a.id as a_id, a.info as a_info, 
       b.id as b_id, b.info as b_info 
FROM stats AS a 
JOIN stats AS b
     ON a.id != b.id 
JOIN users AS u
     ON a.user_id = u.user_id 
     AND u.city_id = 1
LIMIT 25 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:26:34.747

好吧，当您`stats`在查询中两次使用该表时，您实际上也需要该`users`表的两个连接。（用于统计 A 和统计 B）

```
SELECT a.id as a_id, a.info as a_info, 
       b.id as b_id, b.info as b_info 
FROM stats AS a 
JOIN stats AS b ON a.id != b.id 
JOIN users AS a_users ON a.user_id = a_users.id
JOIN users AS b_users ON b.user_id = b_users.id
WHERE a_users.city = 1 
   OR b_users.city = 1
LIMIT 25 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T21:25:15.257

所以这就是你所拥有的...

这就是你返回的

```
SELECT a.id as a_id, a.info as a_info, b.id as b_id, b.info as b_info 
```

这就是它的来源

```
FROM stats AS a 
JOIN stats as b on a.id != b.id 
```

这是你想要的数量

```
LIMIT 25 
```

因此，如果要添加 users 表，请在其他联接之后添加

```
JOIN users ON a.user_id = users.id 
```

并过滤它，在连接之后添加它

```
WHERE users.city=1 
```

给予

```
SELECT a.id as a_id, a.info as a_info, b.id as b_id, b.info as b_info 
FROM stats AS a 
JOIN stats as b on a.id != b.id 
JOIN users ON a.user_id = users.id
WHERE users.city=1
LIMIT 25 
```

# jquery - jQuery 移动框架、HTML 属性或 CSS 属性来解析按钮宽度

> ID：12205685
> 
> 赞同：0
> 
> 时间：2012-08-30T21:18:39.447
> 
> 标签：jquery, jquery-mobile

您好，我正在开发一个 jQuery 移动网站，

关于我的红色按钮的呈现我的问题，标题中“主页”和“产品”按钮的宽度似乎由它们内部的文本决定。这意味着一个按钮看起来比另一个更薄。有没有办法将按钮设置为相等一致的宽度？我想在标题中实现一致的按钮宽度。

也许我为按钮使用了错误的 HTML 属性？

```
<div data-role="header" data-theme="c" class="mainNav">
                <a href="index.php" id="headerLogo" data-role="none"><span class="logo"></span></a>
                    <div class="ui-btn-right menuBtn">
                        <a data-role="button" href="index.php" data-icon="home" data-iconpos="top">Home</a>
                        <a data-role="button" href="products.php" data-icon="settings" data-iconpos="top">Products</a>
                    </div>
</div> 
```

我的移动网站在这里： [http ://www.test-bed.co.uk/mobile/index.php](http://www.test-bed.co.uk/mobile/index.php)

jQuery 移动按钮的文档在这里：

[http://jquerymobile.com/demos/1.2.0-pre/docs/buttons/index.html](http://jquerymobile.com/demos/1.2.0-pre/docs/buttons/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:45:33.463

最好的办法是编辑与 JQuery Mobile 一起使用的 CSS 主题，以便在所有页面上获得一致的按钮大小。如果您不喜欢这样做，只需将它们设为同一个类并在您提供的 CSS 页面中设置宽度

```
class mobi-button {
   display: inline-block;
   width: 32px;
   height: 46px;
} 
```

这个之前已经[讨论过了](https://stackoverflow.com/questions/4743254/setting-a-width-and-height-on-an-a-tag)，下次问之前一定要搜索一下。可能会为自己节省一些时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:38:19.720

只需在链接上设置宽度：

```
<a data-role="button" href="index.php" data-icon="home" data-iconpos="top" style="width:75px;">Home</a>
<a data-role="button" href="products.php" data-icon="settings" data-iconpos="top" style="width:75px;">Products</a> 
```

或者你可以在你的 CSS 样式表中这样做：

```
.ui-page .ui-header .menuBtn a {
    width : 75px;
} 
```

这是一个演示：http: [//jsfiddle.net/5mvF9/](http://jsfiddle.net/5mvF9/)

# ruby-on-rails - 从rails中的另一个控制器将参数传递给路径

> ID：12205688
> 
> 赞同：0
> 
> 时间：2012-08-30T21:19:17.067
> 
> 标签：ruby-on-rails

这段代码运行良好，但我确信 rails 有更好的方法来实现相同的结果。

```
<%= link_to (image_tag post.image1(:thumb)), (posts_path+"/"+(post.id).to_s) %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:32:23.420

这也应该有效：

```
<%= link_to (image_tag post.image1(:thumb)), post %> 
```

# c# - 我应该在不同的视图中重用视图模型吗？

> ID：12205689
> 
> 赞同：15
> 
> 时间：2012-08-30T21:19:26.427
> 
> 标签：c#, asp.net-mvc, viewmodel

我注意到我的观点需要与其他人一样的信息。但有时您需要视图模型的 5 个属性，有时只需要 2 个。

您是在多个视图上**共享**这样的视图模型，还是为每个视图创建**单独的视图模型，或者您更喜欢****继承**或**组合**策略？

对我来说，共享视图模型有一些缺点：

1.  最小惊喜原则：一个视图模型只填充5个属性的2个并得到空引用异常是很奇怪的，因为你不想查询数据库的额外数据。当视图模型有 5 个属性时，我希望所有属性都被填充。例外证明了规则。
2.  关注点分离/单一职责原则：视图模型在复杂的站点上杂乱无章，因为您必须满足每个视图的不同需求。如果涉及逻辑，它也会变得更加复杂。

你怎么看？你如何处理这样的情况？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T22:00:15.893

人们倾向于根据他们的使用角度对 ViewModel 有不同的理念。ViewModel 是视图和模型之间的粘合剂，人们通常会根据他们喜欢更严格的两端中的哪一个来回答。

*   如果您希望您的模型/数据对象更严格，那么您将倾向于将 ViewModel 更接近模型/数据 - 即您将拥有一个用于多个视图的 ViewModel，并让 ViewModel 确定哪些属性根据您希望如何处理数据加载（并推迟图像或其他长时间加载属性等）进行检索。
*   如果您希望您的视图更加严格，那么您将把 ViewModel 绑定到更靠近视图的位置——即每个视图都有一个单独的 ViewModel，并让模型/数据对象在您从一个视图移动到另一个视图时处理诸如同步之类的事情。

就我个人而言，我更喜欢第一个，因为我的数据往往更严格，因为它比视图更不可能改变（在*我的*项目中——我不认为这是数据和视图的通用属性）。由于更改通知是 ViewModel 的一个自然特性，因此如果用户碰巧有两个显示相同/相似数据的视图，我不必让我的模型对象传达更改。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T21:48:24.290

在我正在处理的项目中，每个视图都有自己的 ViewModel，但是我们也有 CollectionViewModels，它们由多个视图模型共享/引用。

想想 - 供应商列表，需要在应用程序的多个屏幕中显示 - 并绑定到各种控件 - 列表框、网格视图，无论您需要什么。只有一个 ViewModel 可以简化供应商列表的更新/刷新逻辑。

TLDR：如果所有用例都以相同的方式使用 ViewModel，我只会重用视图模型。即它们都使用相同的属性等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-30T21:42:29.530

对于每个视图，我都会有一个单独的 ViewModel。未使用的属性使代码的可读性降低（如果不使用该属性，为什么会出现该属性？）。如果您对多个视图的一组固定属性具有相同的功能，我可以看到使用包含这些属性的基类。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-30T22:16:05.717

绝对每个视图一个 ViewModel，恕我直言。

随着应用程序复杂性的增长，共享的 ViewModel 会趋于增长，当一个 View 只需要一个属性时，将具有 50 个属性的对象传递给一个 View 感觉并不好。

此外，有时您可能希望在 ViewModel 中添加绝对特定于您的 View 而在其他 View 中不需要的额外属性。假设您有一个依赖于 ViewModel 属性的 CSS 类。您无需在 View 中编写 if else 语句，而是在 ViewModel 中创建一个属性，该属性根据您拥有的任何业务规则返回正确的 css 类。通过这种方式，您可以使视图尽可能苗条，并且使用专用的 ViewModel，您不会与并不真正关心它的视图共享 CSS 类名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-30T21:45:36.953

我通常共享 ViewModel。据我了解，使用视图模型的优点是（a）安全性，因为应该隐藏的属性是和（b）业务层和表示层之间的关注点分离。(b) 在共享视图模型时完成同样的操作。

至于（a），我很少遇到暴露财产在一个地方存在安全风险但在另一个地方没有安全风险的情况。如果一个属性需要隐藏，它可能需要到处隐藏。当然，YMMV，但这似乎是一个相当主观的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T21:47:57.220

我将实体框架与 Code First 结合使用，因此我的域类需要保持相当严格，因为它们将被映射到 sql 数据库。

有些视图只使用一个直接映射的实体，这很好，所以我使用相同的域层实体。如果该实体需要更多信息（例如两个密码字段），我将使用组合。'组合应该优于继承'，所以如果你可以使用组合，通常因为它只是附加属性，所以可以使用组合。

如果有一个屏幕只使用该实体的两个属性，或者出于安全考虑我想隐藏属性，我会创建一个新的视图模型并只检索必要的数据。我将重用视图模型，但前提是在其他视图中需要相同的属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-24T17:47:33.310

仅当所有视图都使用所有属性变量和方法时，我才会在多个视图之间共享一个 VM，否则我将使用继承和抽象基础视图模型，如果这不能解决。做1对1

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-27T10:51:44.770

TLDR：是的（如果您真的想使用它并且知道如何明智地使用它）。

我可以想到视图模型层需要的三个职责：

1.  将视图层和模型层耦合在一起
2.  提供单元测试接口
3.  当单个页面很复杂时将逻辑分成小块

第一个职责实际上与第二个职责相冲突。因为一旦视图模型知道（耦合）要启动的视图类，它就不能进行单元测试。知道要启动的模型（及其提供者）类不会导致此问题。但是，如果提供者是单例，则单元测试变得不那么“单元”。

说到第三个职责，有一种逻辑我称之为路由。例如，单击按钮后，用户应该会看到下一页。这种逻辑应该在哪一层？看法？模型？当然不！除了查看模型，它无处可去。一旦视图模型知道要启动的下一页的视图模型的类，它就会生成一个巨大的视图模型树来处理。因为这是递归发生的——下一页也知道下一页。无论在这个视图模型树中的哪个节点上，一旦发生变化，它就会反映在父节点上。如何处理这些反射？子类化？请记住，在树中，一个节点可以有数百个直接/间接子节点。

结论——视图模型只有在放弃第一个职责时才擅长第三个职责。它唯一真正擅长的是第二个责任。但是，我看到没有人在这个问题下提到它。

# ios - 带有自定义字体的 unicode 数据在 ipad 中无法正常工作

> ID：12205695
> 
> 赞同：2
> 
> 时间：2012-08-30T21:20:10.210
> 
> 标签：ios, ipad, fonts

我正在使用从 unicode 字符获得的标签和字符串的自定义字体。而且字体没有变化。这是我的代码片段：

```
 NSString* str = @"\u05D0\u05D1\u05D2";
[mMatchingLabel setText:str];
mMatchingLabel.font = [UIFont fontWithName:@"David New Hebrew" size:26]; 
```

但是当我写例如：

```
NSString* str = @"label";  [mMatchingLabel setText:str];
mMatchingLabel.font = [UIFont fontWithName:@"David New Hebrew" size:26]; 
```

字体效果很明显。

有人可以解释这里出了什么问题吗？

# javascript - 将 Visual Studio 2012 JavaScript Intellisense 标记移动到单独的文件

> ID：12205697
> 
> 赞同：3
> 
> 时间：2012-08-30T21:20:23.773
> 
> 标签：javascript, intellisense, visual-studio-2012

我喜欢 Visual Studio 的智能感知功能，包括为我创建的方法生成我自己的 XML 标记的能力。然而，有时评论实际上妨碍了我正在做的事情（特别是当方法只有几行并且它的智能感知比代码本身长三到四倍时！）

在 Visual Studio 2012 下，应该可以[将智能感知标记移动](http://msdn.microsoft.com/en-us/library/hh874692.aspx)到单独的文件中，添加`.intellisense.js`到文件名的末尾并将文件放在同一目录中。不幸的是，我似乎无法让它工作。

例如，假设文件`module.js`包含以下代码：

```
var module = (function (my) {
    /// <summary>Description of the module</summary>

    my.action = function(doThis) {
        /// <summary>Take an action</summary>
        /// <param type="String">Do this action</param>
        /// <returns type="String" />
        return doThis.toLowerCase();
    }

    return my;
}(module || {})); 
```

我尝试在同一个目录中创建一个文件，`module.intellisense.js`并将 XML 注释从`module.js`这里移到：

```
intellisense.annotate(module, {
    'action': function() {
        /// <summary>Take an action</summary>
        /// <param type="String">Do this action</param>
        /// <returns type="String" />
    }
});

intellisense.annotate(window, {
    'module': function() {
        /// <summary>Description of the module</summary>
    }
}); 
```

保存文件后，我点击`Ctrl``Shift``J`强制智能感知更新，然后给它一点时间思考。之后，当我键入时`module.action(`，我没有得到智能感知帮助。 **在 Visual Studio 2012 中制作功能性、自定义的外部文件 JavaScript 智能感知需要做什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:52:39.650

1.  您的 module.js 示例中有一个额外的右括号，因此它可能是一个问题。
2.  据我了解， module.intellisense.js 不适用于 module.js 本身。但是其他将使用 module.js 的文件可以正常工作。
3.  module.intellisense.js 中的更改不会立即应用，即使使用 Ctrl+Shift+J - 需要一些时间或对文件进行操作。

# windows - 从 Windows Batch 打印网页

> ID：12205698
> 
> 赞同：1
> 
> 时间：2012-08-30T21:20:38.057
> 
> 标签：windows, batch-file

是否可以使用 Windows 批处理脚本打开网页并将其内容打印到默认打印机？像这样简单的东西：

```
@echo off
start /d IEXPLORE.EXE www.google.com 
```

现在我想将该页面发送到打印机。但我不确定语法，也无法在网上找到任何具体或有用的东西。

有谁知道是否可以使用 Windows 批处理命令打印网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:03:31.507

不是来自[iexplore switch](http://msdn.microsoft.com/en-us/library/ee330728%28VS.85%29.aspx)，但 vbscript 可以工作：

```
Const PRINT = 6
Const DONTPROMPTUSER = 2
Const BUSY=4

Dim oIExplorer
Set oIExplorer = CreateObject("InternetExplorer.Application")
oIExplorer.Navigate "http://www.stackoverflow.com/"
oIExplorer.Visible = 1

Do while oIExplorer.ReadyState <> BUSY
wscript.sleep 1000
Loop

oIExplorer.ExecWB PRINT, DONTPROMPTUSER 
```

# nosql - 不能使用 --pipe 进行 redis 批量插入

> ID：12205701
> 
> 赞同：2
> 
> 时间：2012-08-30T21:20:58.820
> 
> 标签：nosql, redis, bulkinsert

我正在使用 Redis 存储大量数据。我正在尝试使用官方文档中描述的批量插入。但是，当我运行命令时，

```
cat data.txt | redis-cli --pipe 
```

Redis 告诉我命令 --pipe 尚未找到。我使用的是 2.4.13 版。谁能告诉我我做错了什么？

提前感谢丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T22:08:27.043

Redis 2.4.14 引入了管道模式。尝试升级您的 Redis 版本。

Redis 2.4 的更新日志： [https ://raw.github.com/antirez/redis/2.4/00-RELEASENOTES](https://raw.github.com/antirez/redis/2.4/00-RELEASENOTES)

Redis 2.6 的更新日志： [https ://raw.github.com/antirez/redis/2.6/00-RELEASENOTES](https://raw.github.com/antirez/redis/2.6/00-RELEASENOTES)

在使用此功能之前，请务必阅读[http://redis.io/topics/mass-insert 。](http://redis.io/topics/mass-insert)

# java - 在云提供商上初始化虚拟机并在该机器上运行一些自定义代码

> ID：12205704
> 
> 赞同：0
> 
> 时间：2012-08-30T21:21:27.470
> 
> 标签：java, ruby, amazon-ec2, cloud, rackspace-cloud

我想在云提供商（如 Amazon EC2、Rackspace CloudServers、HP Cloud 等）上初始化虚拟机，然后在该机器上运行一些自定义代码——代码可能是 Java/Ruby/任何其他语言。

现在，这是否意味着我必须首先启动服务器，然后安装 JRE（用于 java）或运行我想在该机器上执行的代码所需的其他库/框架？有没有更快的方法来做到这一点？也许是一个允许我这样做的框架？

我想到的一种方法是创建一个虚拟机，在其上安装 JRE，然后创建一个服务器映像 - 之后我只需要使用该映像来初始化虚拟机 - 但这会导致我另一个问题 - 将在每个云提供商中创建这样的服务器后，我必须在每个云提供商中创建一个自定义映像吗？或者有没有一种方法可以跨多个云提供商使用一个服务器映像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:57:48.033

如果您的操作系统是 Ubuntu，您可以使用[CloudInit](https://help.ubuntu.com/community/CloudInit)。它可用于在首次启动时运行用户数据脚本。

# javascript - 捕获图像的加载事件动态更改其源

> ID：12205707
> 
> 赞同：2
> 
> 时间：2012-08-30T21:21:52.753
> 
> 标签：javascript, jquery

我正在动态更改图像的 src 并希望捕获该图像的加载事件。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T21:29:21.463

几年前，我`.src`第二次设置时发现onload事件在某些浏览器（我不记得是哪些）中不可靠。因此，我决定替换图像对象。我会创建一个新的图像对象，设置 onload 处理程序，设置`.src`值，然后在加载时将其插入到页面中以代替现有图像。

在 javascript 中从头开始创建图像时，您可以这样做：

```
var img = new Image();
img.onload = function() {
    // put your onload code here
};
img.src = "xxx.jpg" 
```

如果您只想更改`.src`图像的属性，只需在页面中找到 DOM 对象并设置它的`.src`属性即可。

```
var img = document.getElementById("myImage");
img.src = "xxx.jpg"; 
```

如果您想在重置时尝试捕获 onload 事件`.src`（几年前我遇到了可靠性问题，您可以这样做：

```
var img = document.getElementById("myImage");
img.onload = function() {
    // your code here
};
img.src = "xxx.jpg"; 
```

如果要加载新图像并在加载时用它替换现有图像，您可以这样做：

```
function replaceImg(oldImage, newSrc) {
    var img = new Image();
    img.onload = function() {
        var parent = oldImage.parentNode;
        parent.insertBefore(img, oldImage);
        parent.removeChild(oldImage);
        // put any other code you want here when the 
        // replacement image is loaded and in place
    };
    img.src = newSrc;
} 
```

而且，你会这样称呼它：

```
<img id="myImage" src="yyy.jpg">

var oldImage = document.getElementById("myImage");
replaceImg(oldImage, "xxx.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:24:45.623

```
// create image object
var image = new Image();
image.onload = function () { 
    // do stuff 

    $('#myimageelementid').prop('src', image.src); // set the element in the DOM with this image
}

image.src = "image.jpg"; // will trigger onload when loaded 
```

# mysql - 在 Magento 中安全截断的表列表？

> ID：12205714
> 
> 赞同：22
> 
> 时间：2012-08-30T21:22:31.583
> 
> 标签：mysql, sql, magento, truncate

是否有可以在 Magento 中安全截断的表列表？安全，我的意思是保存产品。

我有一些，但想知道是否还有更多：

*   core_url_rewrite # 只有在没有自定义重写时才安全
*   目录_product_flat_1
*   catalog_product_flat_#（# 取决于多商店）
*   log_customer
*   日志报价
*   日志摘要
*   log_summary_type
*   日志网址
*   log_url_info
*   log_visitor
*   log_visitor_info
*   log_visitor_online

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2015-01-21T00:06:00.760

## 在你做任何事情之前

*   确保首先在非生产环境中测试清除此数据。
*   在永远丢失数据之前始终进行备份。
*   确保你在`truncate`ing，而不是在`drop`ing。
*   在大量删除记录后通过 shell 重新索引所有内容可能是个好主意

* * *

## 更新：

你可以使用[这个`n98-magerun`模块](https://github.com/steverobbins/Magerun-DBClean)来清理你的表。

或者按照以下说明手动操作。

* * *

为了扩展 Jim 的回答，Magento 支持在他们要求您的数据库副本时不需要这些表的内容，因此您可以认为它们不是必需的。

### 缓存表

```
core_cache
core_cache_tag 
```

缓存数据是临时的。清除这些应该是安全的。

### 会话表

```
core_session 
```

无需保留一年前的课程。将自动创建新会话（尽管它会导致人们退出/中断当前的结帐流程）。

### 数据流表

```
dataflow_batch_export
dataflow_batch_import 
```

每次运行批处理时基本上都有日志，并不重要。

### 管理员日志

```
enterprise_logging_event
enterprise_logging_event_changes 
```

这些是哪些管理员在后端做什么的日志。非常适合追踪“谁破坏了什么”，但不需要永远保留。您可以安全地截断这些。

**专业提示：确保在*系统 > 配置 > 高级 > 系统 > 管理员操作日志存档中清除旧记录***

### 支持表

```
enterprise_support_backup
enterprise_support_backup_item 
```

Magento 的支持历史，对您来说可能存在也可能不存在。

### 索引表

```
index_event
index_process_event 
```

需要更新的索引条目的积压日志。但是，一旦过时，它们就不会删除自己。

### 日志表

```
log_customer
log_quote
log_summary
log_summary_type
log_url
log_url_info
log_visitor
log_visitor_info
log_visitor_online 
```

日志数据，大部分未使用。但是，我已经看到“按浏览次数排序”模块使用该`log_visitor_info`表，所以要小心。

**专业提示：确保您正在清理*系统 > 配置 > 高级 > 系统 > 日志清理*中的旧记录（这仅适用于访问者、客户和 url）**

### 报告表

```
report_event
report_viewed_product_index 
```

这些是可以在运行报告时重建的聚合表。

* * *

其他可以偶尔使用修剪的表是

### 报价表

```
sales_flat_quote
sales_flat_quote_address
sales_flat_quote_address_item
sales_flat_quote_item
sales_flat_quote_item_option
sales_flat_quote_payment
sales_flat_quote_shipping_rate 
```

如果拥有 3 年前的废弃购物车数据对您来说并不重要，请考虑截断这些数据。请记住，当前的购物车在此处，因此请在非工作时间安排此操作或删除`updated_at`超过 X 天的行。

**专业提示：安装[Aoe_QuoteCleaner](https://github.com/fbrnc/Aoe_QuoteCleaner)**

### 暂存表

如果您使用 Enterprise 的暂存功能，您可能会开始看到带有`s_`前缀的表。一旦暂存站点被删除，这些就不会被清理。如果您的`enterprise_staging`表是空的，则不再需要这些表。

### 变更日志表

```
catalog_category_flat_cl
catalog_category_product_cat_cl
catalog_category_product_index_cl
catalog_product_flat_cl
catalog_product_index_price_cl
cataloginventory_stock_status_cl
catalogsearch_fulltext_cl
enterprise_url_rewrite_category_cl
enterprise_url_rewrite_product_cl
enterprise_url_rewrite_redirect_cl 
```

Magento 引入了 MySQL 触发器，该触发器在某些表的数据被修改时写入更改日志表。稍后，调度程序索引器会拾取更改日志条目并更新项目。但是，完成后它不会清理。您可以不时清除这些。

### 类别和产品平面表

```
catalog_category_flat_store_1
catalog_category_flat_store_2
catalog_category_flat_store_3
catalog_category_flat_store_4
catalog_category_flat_store_5
catalog_category_flat_store_6
catalog_category_flat_store_7
catalog_product_flat_1
catalog_product_flat_2
catalog_product_flat_3
catalog_product_flat_4
catalog_product_flat_5
catalog_product_flat_6
catalog_product_flat_7 
```

这些表我倾向于`drop`。重新索引后，他们将重新创建自己。在某些情况下，商店`7`可能不再存在，但您仍然拥有死板。

### URL 重写表

在这里要小心，您可能不想截断所有这些。

```
core_url_rewrite
enterprise_url_rewrite 
```

首先检查是否有任何记录`is_system = 0`。如果是这样，您不想截断，您将丢失自定义重定向。试试`DELETE FROM core_url_rewrite WHERE is_system = 1`吧。重新索引重写将用其余部分重新填充此表。

### 更多报告表

```
report_viewed_product_aggregated_daily
report_viewed_product_aggregated_monthly
report_viewed_product_aggregated_yearly 
```

这些是聚合的，可以重建（如索引）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-31T01:26:52.440

当您使用 Magento 支持记录问题并且他们要求您提供数据库转储时，他们为您提供的脚本仅转储以下表格的架构：

```
core_cache
core_cache_option
core_cache_tag
core_session
dataflow_batch_export
dataflow_batch_import
enterprise_logging_event
enterprise_logging_event_changes
enterprise_support_backup
enterprise_support_backup_item
index_event
index_process_event
log_customer
log_quote
log_summary
log_summary_type
log_url
log_url_info
log_visitor
log_visitor_info
log_visitor_online
report_event
report_viewed_product_index 
```

如果 Magento 支持不需要这些表的内容来解决问题，那么可以安全地假设它们可以被安全地截断。

表`catalog_product_flat_*`和`catalog_category_flat_*`表也可以被截断，因为重新索引将重新填充它们。

用户可以`core_url_rewrite`从后端手动将条目添加到表中，我不想保证具有相同 URL 键的两个产品 pr 类别在 truncating 后总是具有相同的 URL `core_url_rewrite`。这不是我能够安全截断的依赖。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-07T00:49:48.277

我想添加到列表中，您还可以截断“catalogrule_product”和“catalogrule_product_price”。您可以通过在 Pormos > 目录规则中运行应用规则来重新生成它。我已经将这张表截断了好几次才知道它是安全的。注意！在您重新运行规则之前，您的所有目录规则价格都将从前端消失。

如果这些表格被清除，我也很想看看是否有人可以描述该网站会发生什么。例如，我假设删除 core_session（如果我们使用数据库来存储这些）将删除所有客户当前“登录”的会话，它还会删除客人的购物车吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T18:40:59.927

我怀疑截断 ie admin_* 表是否有用。如果您遵循上面列出的唯一有价值的表格，就完成了。您将不得不再次添加管理员。

没有检查任何进一步的表。刚刚偶然发现了我安装的前 3 个表。

# javascript - 基于使用 Google Maps API Directions Service 构建的替代路线

> ID：12205718
> 
> 赞同：0
> 
> 时间：2012-08-30T21:22:47.073
> 
> 标签：javascript, google-maps, google-maps-api-3, maps

是否可以将 Google Directions API 与施工数据结合使用？例如，如果我有一张地图，我进入了一堆建筑区域，那么 Google 方向是否可以意识到这些并避开它们，从而提供更好的路线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:42:46.930

（目前）没有办法输入“路障”。请参阅此功能请求（如果您想支持它，请加注星标）：

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=214](http://code.google.com/p/gmaps-api-issues/issues/detail?id=214)

# maven - 是否可以默认启用 -fae/--fail-at-end ？

> ID：12205720
> 
> 赞同：2
> 
> 时间：2012-08-30T21:22:49.263
> 
> 标签：maven

我知道我可以使用 -fae/--fail-at-end 命令行选项指示 Maven 在失败后继续运行。有没有办法将此行为设置为给定模块的默认行为？

一些背景知识：
我正在从 Ant 构建迁移到基于 Maven 的构建，团队中的其他开发人员习惯于构建完成，即使单元测试失败。对于大约 200 个模块的产品，构建需要相当长的时间，如果开发人员可以从一开始就看到*所有*失败的测试，而不必记住添加 -fae 选项，那将是理想的选择。

通过阅读 Maven 文档，我觉得答案是一个响亮的“不”，但我只想覆盖我的基础并确保没有某种无证的方式来做到这一点......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:01:42.113

查看 Maven 源代码后，我可以确认默认情况下无法配置。

在 Maven 跟踪器上打开了一个现有问题：http: [//jira.codehaus.org/browse/MNG-5342](http://jira.codehaus.org/browse/MNG-5342)（如果您仍然想要它，请投票 - 只是注意到您确实打开了它，因此您无法对其进行投票；）） ...

问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:35:44.573

要跳过测试失败，您可以使用 property `maven.test.failure.ignore`。当然，如果你有父和子 pom，你可以在每个模块中使用这个属性。

# javascript - 三星电视上的多分辨率支持

> ID：12205726
> 
> 赞同：2
> 
> 时间：2012-08-30T21:23:16.687
> 
> 标签：javascript, samsung-smart-tv

我试图让我的应用程序以高于 540x960 的分辨率显示，但没有运气。

我已经添加了

```
'resolutions' : ['540p','720p'], 
```

到app.json，并添加css文件app/stylesheets/540p/Main.css, app/stylesheets/720p/Main.css

仅此一项并没有解决问题，它仍然以 540x960 显示（在支持高达 1080p 的 20120 型号电视上）

我还注意到在 config.xml 中指定了宽度和高度。我不确定在那里做什么来支持多种分辨率，或者是否涉及到。

感谢您的任何见解....

以下是一些相关链接：

[http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/apps_framework/manage_scenes/add_scene.html](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/apps_framework/manage_scenes/add_scene.html)

[http://www.samsungdforum.com/SamsungDForum/ForumView/7e2b7fa90012098b?forumID=f69ed7370fdb3193](http://www.samsungdforum.com/SamsungDForum/ForumView/7e2b7fa90012098b?forumID=f69ed7370fdb3193)

[http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_3.5/API_Reference/JavaScript_APIs/AppsFramework_APIs/Framework_API/Core_API/sf.env/getResolution](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_3.5/API_Reference/JavaScript_APIs/AppsFramework_APIs/Framework_API/Core_API/sf.env/getResolution)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:59:02.117

Emulator 3.5 不支持 1920x1080 分辨率。但是，如果您按照[http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/apps_framework/manage_scenes/add_scene.html](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_3/apps_framework/manage_scenes/add_scene.html)中的说明进行操作， 那么您的应用程序支持多分辨率！那么当您测试时您在电视上的应用程序将运行。你需要小心 css，锁定它并使用[http://www.samsungdforum.com/upload_files/files/guide/data/html/ux_guideline20/06_application_layout/application_screen_resolution.html](http://www.samsungdforum.com/upload_files/files/guide/data/html/ux_guideline20/06_application_layout/application_screen_resolution.html)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:57:51.990

如果电视机支持 1080p - 这并不意味着智能电视应用程序也可以在此分辨率下工作：

*   在三星 2010 中只有一种分辨率：960x540px
*   在三星 2011 中，您有两个：960x540px、1280x720px
*   而三星 2012：1280x720px

对于 2012 年，我从未检查过您是否可以设置 FullHD，但也许

您只能通过一种方式更改应用程序分辨率 - 更改 config.xml 文件中的值。

因此，当您想要支持所有型号时，您至少需要制作两种布局：一种用于 540p（2010 型号），一种用于 720p（2011、2012 型号）。

没有选项可以自动将应用程序“拉伸”到另一个分辨率。

# .net - 如何使用绑定变量返回 .NET 的“通用可排序时间”？（另外：to_char 中的任意字符串）

> ID：12205727
> 
> 赞同：0
> 
> 时间：2012-08-30T21:23:17.350
> 
> 标签：.net, oracle, datetime, formatting

我想使用 .NET 的[通用可排序时间格式](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx#UniversalSortable)使 Oracle 返回日期，这样我就可以始终如一地使用这种相当不错的日期/时间格式，因此我可以轻松地将结果解析为 DateTime，只需使用“u”作为格式：

```
// "u" is less unwieldy than "yyyy'-'MM'-'dd HH':'mm':'ss'Z'"
myDT = DateTime.ParseExact(oraString, "u", CultureInfo.InvariantCulture); 
```

我可以很容易地让 Oracle 返回这种格式：

```
SELECT to_char(sysdate, 'YYYY-MM-DD HH:MM:SS') || 'Z' udt FROM dual 
```

但是，使用连接添加的“Z”会使查询实际上无法使用以下格式的绑定变量：

```
someBindMethod("uformat", "YYYY-MM-DD HH:MM:SS"); // Hypothetical .NET/Oracle lib

-- No matter the format string, date/time will always end with 'Z'.
SELECT to_char(sysdate, :uformat) || 'Z' udt FROM dual 
```

（如果 'Z' 结束格式字符串，Oracle 会抱怨）

如何传递绑定字符串以便可以返回通用可排序时间格式，但仍可以使用任何其他日期格式而不更改查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:23:17.350

（问答格式自我回答）：您可以在绑定变量或单引号 Oracle SQL 文本中使用双引号添加任意字符串，例如：

```
SELECT to_char(sysdate, 'YYYY"SOMESTRING"') foo FROM dual
-- returns "2012SOMESTRING" 
```

我不知道这个功能，至少在我的搜索环境中找到它有点棘手。

现在您可以绑定任何格式，但仍然可以在通用格式上获得“Z”结尾：

```
const string oraUniversalFormat = "YYYY-MM-DD HH:MM:SS\"Z\"";
const string anyOtherFormat = "YYYY"; // use later
someBindMethod("uformat", oraUniversalFormat); 
```

# css - 平面 CSS3 菜单图像淡入淡出

> ID：12205729
> 
> 赞同：1
> 
> 时间：2012-08-30T21:23:19.660
> 
> 标签：css

1.  我想知道如何在[**http://toall.org**](http://toall.org)获得这个菜单来淡出背景图像，所以基本上从透明图标切换到透明文本？**请不要 jQuery**。这在平面 CSS3 中可能吗？

2.  是否可以设置图标的活动链接，但不透明度为 50%？

有人可以帮我吗？谢谢！

**CSS**

```
.home {
    display: inline-block;
    position: relative;
    text-indent: -9999px;
    width: 170px;
    height: 112px;
    background: url(../images/qui_menu.png) no-repeat;
    background-position: 0px 0px;
}

.home span {
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
    background: url(../images/qui_menu.png) no-repeat;
    background-position: 0px -112px;
    opacity: 0;
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s;
}

.home:hover span {
    opacity: 1;
}

.services {
    display: inline-block;
    position: relative;
    text-indent: -9999px;
    width: 170px;
    height: 112px;
    background: url(../images/qui_menu.png) no-repeat;
    background-position: -170px 0px;
}

.services span {
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
    background: url(../images/qui_menu.png) no-repeat;
    background-position: -170px -112px;
    opacity: 0;
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s;
}

.services:hover span {
    opacity: 1;
}

.portfolio {
    display: inline-block;
    position: relative;
    text-indent: -9999px;
    width: 170px;
    height: 112px;
    background: url(../images/qui_menu.png) no-repeat;
    background-position: -340px 0px;
}

.portfolio span {
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
    background: url(../images/qui_menu.png) no-repeat;
    background-position: -340px -112px;
    opacity: 0;
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s;
}

.portfolio:hover span {
    opacity: 1;
}

.contacts {
    display: inline-block;
    position: relative;
    text-indent: -9999px;
    width: 170px;
    height: 112px;
    background: url(../images/qui_menu.png) no-repeat;
    background-position: -510px 0px;
}

.contacts span {
    position: absolute;
    top: 0; left: 0; bottom: 0; right: 0;
    background: url(../images/qui_menu.png) no-repeat;
    background-position: -510px -112px;
    opacity: 0;
    -webkit-transition: opacity 0.5s;
    -moz-transition:    opacity 0.5s;
    -o-transition:      opacity 0.5s;
}

.contacts:hover span {
    opacity: 1;
} 
```

# jquery - 功能面板悬停变换器效果

> ID：12205734
> 
> 赞同：1
> 
> 时间：2012-08-30T21:23:35.093
> 
> 标签：jquery

以前没见过，所以希望有人能轻松解决，我有一个并排的 3 个功能面板 div，我想要发生的是第一个面板添加了一个“悬停”类，这样我就可以更改背景等然后打开一个时间间隔，悬停类跳到下一个面板，然后是下一个面板，然后回到循环的开始。

另外在旁注中，您是否可以记住代码以便能够添加超过 3 个功能 div，以便您可以拥有例如 6 个或更多或更少等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:43:49.470

这是一个简单的实现：http: [//jsfiddle.net/joplomacedo/j4Abt/](http://jsfiddle.net/joplomacedo/j4Abt/)

**编辑：** *解决方案更新以允许在鼠标悬停时禁用动画，并在鼠标离开时启用。*

```
 var timeout,
        els = $('.box').children(),
        el = els.first().addClass('active'),
        el0 = el,

        startCycle = function () {
            function f() {
                el.removeClass('active');
                el = el.next().length ? el.next() : el0;
                el.addClass('active');
                timeout = setTimeout(f, 3000);
            }

            timeout = setTimeout(f, 3000);
        };

    els.on({
        mouseover: function (e) {
            var tg = $(e.target);
            if ( !tg.hasClass('active') ) {
                el.removeClass('active');
                el = tg.addClass('active');
            }
            clearTimeout(timeout);
        },
        mouseleave: function () {
            startCycle();
        }
    });

    startCycle(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:58:47.023

## *[jsBin 演示](http://jsbin.com/umegej/2/edit)*

```
var box=$('.box'), c=0;
function loop(){
   box.removeClass('active').eq(c++%box.length).addClass('active');
}loop();
setInterval(loop, 1000); 
```

您可以随意添加*框*！

**编辑：在悬停时停止循环并从上次悬停继续**

## *[jsBin 演示 2](http://jsbin.com/umegej/6/edit)*

```
var box=$('.box'), c=0, int;
function tglClass(){   
   box.removeClass('active').eq(c++%box.length).addClass('active');
}
function loop(){
   int=setInterval(tglClass,1000);
}loop();
box.on('mouseenter mouseleave',function(e){
   c=$(this).index();  
   var evt=e.type=='mouseenter' ? (tglClass())(clearInterval(int)) : loop();
}); 
```

在这个解决方案中，您甚至不需要 CSS`:hover`状态！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:36:40.843

怎么样的东西：

```
function jump($container, timeout) {
    var $current = $('.active', $container);
    var $next = $current.next();

    $('.active', $container).removeClass('active');

    if ($next.length) {
        $next.addClass('active');
    } else {
        $('.panel', $container).first().addClass('active');
    }

    setTimeout(function() {
        jump($container, timeout);
    }, timeout);
}

(function($) {
    var timeout = 1000;
    $('.slider-container').each(function() {
        var $container = $(this);
        setTimeout(function() {
            jump($container, timeout);
        }, timeout);
    });
})(jQuery);​ 
```

演示：http: [//jsfiddle.net/KgYDu/](http://jsfiddle.net/KgYDu/)

# objective-c - 任意精度位操作（目标 C）

> ID：12205740
> 
> 赞同：0
> 
> 时间：2012-08-30T21:23:57.263
> 
> 标签：objective-c, integer, bit-manipulation, nsdata, arbitrary-precision

我需要对 Objective C 中任意精度数字的表示进行位操作。到目前为止，我一直在使用 NSData 对象来保存数字——有没有办法对这些内容进行位移？如果没有，是否有不同的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:11:09.603

使用`NSMutableData`您可以获取 a 中的字节`char`，移动您的位并将其替换为`-replaceBytesInRange:withBytes:`.

除了使用缓冲区编写自己的日期保持器类`char *`来保存原始数据之外，我没有看到任何其他解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T22:22:37.793

如您所见，Apple 不提供任意精度支持。没有提供比[vecLib](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/vecLib/Reference/reference.html)中的 1024 位整数更大的内容。

我也不认为`NSData`提供轮班和轮班。所以你将不得不自己动手。例如一个非常幼稚的版本，当我在这里直接输入时可能会有一些小错误：

```
@interface NSData (Shifts)

- (NSData *)dataByShiftingLeft:(NSUInteger)bitCount
{
    // we'll work byte by byte
    int wholeBytes = bitCount >> 3;
    int extraBits = bitCount&7;

    NSMutableData *newData = [NSMutableData dataWithLength:self.length + wholeBytes + (extraBits ? 1 : 0)];

    if(extraBits)
    {
        uint8_t *sourceBytes = [self bytes];
        uint8_t *destinationBytes = [newData mutableBytes];

        for(int index = 0; index < self.length-1; index++)
        {
            destinationBytes[index] =
                  (sourceBytes[index] >> (8-extraBits)) |
                  (sourceBytes[index+1] << extraBits);
        }
        destinationBytes[index] = roll >> (8-extraBits);
    }
    else 
        /* just copy all of self into the beginning of newData */

    return newData;
}

@end 
```

当然，这假设您想要移动的位数本身可以表示为`NSUInteger`，以及其他罪过。

# javascript - html5：一个好的加载方法？

> ID：12205745
> 
> 赞同：1
> 
> 时间：2012-08-30T21:24:30.580
> 
> 标签：javascript, css, html, jquery-plugins

我正在编写我的第一个 HTML5 + jquery.mobile 网络应用程序。该应用程序基本上是一个菜单，它重定向到在同一 index.html 中定义的内部页面 (data-role="page")。我不会将页面写为外部文件以避免重新加载和重写 - 基本上 - 相同的 <head>：我想跳转到内部标签比加载新页面更快......

现在，我有一个页面需要一些特定的 jquery 插件和一些特定的 css。没有其他页面需要这些插件或 CSS。

当然，我可以在 <head> 主部分加载这些 js/css，但是这种方法会减慢第一页的加载速度，毫无用处。

我可以用 CSS 解决问题，方法是：

```
$('head:first').append('<link rel="stylesheet" type="text/css" href="' + file + '" />'); 
```

我什至可以用 JS 解决问题，但仅限于“标准”JavaScript，例如：

```
<script>
    $(document).ready(function() {
        $('#page-availability').live('pageinit', function () {
            $.getScript("js/jqm-datebox.core.js");
            $.getScript("js/jqm-datebox.mode.calbox.js");
            $.getScript("js/jquery.mobile.datebox.i18n.en.utf8.js");

            $('#datepicker').data({
                "mode": "calbox",
                ...
            });
            ...
        });
        ...
    }); 
```

不幸的是，这种方法似乎不适用于 jquery 插件（萤火虫呱呱声：“TypeError：a.mobile.datebox 未定义”......）：看起来它们没有被评估......（即使它们在那里，在结束之前<head> 部分的，查看“生成的源”...）。

我正在使用 Firefox (15) 进行调试，但我想这不是重点......

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:41:30.080

如果满足以下条件，单页方法可能适用于移动设备：

1.  您无需加载太多额外内容即可支持用户可能从该页面显示的所有内容。
2.  您不必加载太多代码来支持所有行为。
3.  典型的用户实际上确实会访问几个不同的虚拟页面，因此该方案可以节省它们的加载时间，并使后续虚拟页面加载速度更快。

做得好，用户在加载第一页时获得了良好的性能，并且在进入其他“嵌入式”页面时获得了非常快的性能，而这些页面不必通过网络加载新内容。

在以下情况下，单页方法不太好：

1.  由于必须加载的东西量很大，初始加载时间只是超过了它的价值。
2.  无论如何，您必须动态加载子页面的内容。
3.  您有 SEO 问题，因为搜索引擎无法真正找到/正确索引您的所有虚拟页面。

所以，最后，这是一个真正的权衡，很大程度上取决于东西有多大，你要加载多少东西，以及实际性能如何。如果页面保持非常轻量并且每个页面必须满足的请求非常少，那么紧凑的移动站点可以非常快速地从一个页面到下一个页面提供服务器加载的页面视图。

通常，您希望进行以下类型的优化：

1.  压缩/缩小所有 javascript。
2.  减少必须加载的单独项目的数量（样式表、javascript 文件、图像）。
3.  减少必须加载的顺序事物的数量（加载一个，等待加载，加载另一个）。移动设备不擅长往返和加载大量资源。加载一些东西没问题。
4.  使浏览器可以轻松缓存 javascript 文件。使用一些常见的 javascript 文件，每个文件都可以满足许多页面的需求。在开始时加载更多，然后允许在所有未来页面加载时从缓存中加载 javascript 文件，如果用户将访问您网站上的许多连续页面，那就更好了。外部 CSS 文件也是如此。
5.  非常非常小心很多图像，即使是小图像。为了加载页面而进行的大量 http 请求对移动设备的加载时间不利，并且您请求的每个图像都是一个 http 请求（除非它来自浏览器缓存）。
6.  确保您的服务器配置为最大化浏览器缓存，以获取可以有效缓存的内容。

其他需要注意的事项：

1.  By default dynamic loading of script files is asynchronous and unordered. If your script files must execute in a specific order, then you will have to either not load them dynamically or you will have to write code (or use a library) that serializes their execution in the desired order.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:39:35.870

$.getscript 是一个简写的 AJAX 函数，它接受一个回调作为第二个参数。查看文档： [http ://dochub.io/#jquery/jquery.getscript](http://dochub.io/#jquery/jquery.getscript)

您可以连接这些脚本，然后在回调中执行您的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:40:55.567

这与旧的 Flash 资源加载问题并没有太大的不同。

我的策略是什么？仅加载初始页面视图所需的内容。当它被加载并且用户可以查看页面/应用程序时，逐步加载所有其他资产。

如果资产特别重，那么我将禁用指向该特定页面的链接，直到加载所需的资产。

在这种情况下，您可能会在一开始就禁用指向特定页面的链接，启动其资产的加载，并在它们准备好时启用该链接。

不确定您是否有任何语法问题，但您当然可以使用正确的源将新的脚本元素注入头部，它会启动下载（就像您使用 css 所做的那样。但您可能知道 ;D )

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T21:41:15.190

我只需将所有 JS 合并/缩小并压缩到一个文件中，然后始终加载它。这是只下载一次的东西（具有正确的缓存），因此您不必过多担心性能。

> 当然我可以在主要部分加载这些 js/css

我经常只是在`</body>`and 标签之前添加它。`.live()`另请注意，除了已[弃用](http://api.jquery.com/live/)的事实之外，它的速度也[很慢](http://jsperf.com/jquery-live-vs-delegate-vs-on)。所以不要使用它，而是使用`.on()`.

# python - 使用 Python 解析 Fortigate 配置文件

> ID：12205746
> 
> 赞同：0
> 
> 时间：2012-08-30T21:24:33.730
> 
> 标签：python, acl

我基本上是在尝试继续这个关于解析强化配置文件的未回答问题。

[使用 Python 读取强化配置文件](https://stackoverflow.com/questions/7552364/reading-a-fortigate-configuration-file-with-python)

根本问题是这个配置包含许多这样的记录，

```
edit 1
    set srcintf "port26"
    set dstintf "port25"
        set srcaddr "all"             
        set dstaddr "all"             
    set action accept
    set utm-status enable
    set schedule "always"
        set service "ANY"             
    set av-profile "default"
    set nat enable
    set central-nat enable
next 
```

我想在一行中获取每个 acl 的输出，以便将它们导入 CSV。问题是每条记录可以有可变数量的行，并且缩进显示了前一行的子部分。另一篇文章确实正确地得到了一些，但它不处理缩进。我想出了一些用任意字符替换空格的解决方法，但我不知道是否有一种方法可以读取数字制表符/空格并使用它来指示定位。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:09:01.417

因此，我设法阅读了您的文本并将其转换为 python 中的字典。这很简单。您基本上必须按照以下方式做一些事情：

```
conFigFile=open('./config.txt')

data=dict()
record=0

for line in conFigFile:
    if line.find('edit')>=0:
        record=int(line.replace('edit',''))
        data[record]={}
    if line.find('set')>=0:
        line=line.replace('set','')
        line=line.strip()
        print line
        key,val=line.split(' ')
        data[record][key]=val
conFigFile.close() 
```

这将生成一个字典，然后允许您进行如下调用：

```
>>> data[1]['nat']
'enable'
>>> data[1].keys()
['nat', 'service', 'schedule', 'central-nat', 'srcaddr', 'av-profile', 'dstintf', 'srcintf', 'action', 'dstaddr', 'utm-status'] 
```

所以现在可以生成一个csv文件：

```
csvFile=open('./data.csv','w')
records=data.keys()
for record in records:
    values=data[record].keys()
    valList=['Record',str(record)]
    for val in values:
        valList.append(val)
        valList.append(data[record][val])
    csvFile.write(",".join(valList))
csvFile.close() 
```

生成 csv 文件：

```
Record,1,nat,enable,service,"ANY",schedule,"always",central-nat,enable,srcaddr,"all",av-profile,"default",dstintf,"port25",srcintf,"port26",action,accept,dstaddr,"all",utm-status,enable 
```

如果您真的想计算行前的空格，可以执行以下操作：

```
>>> a='     test: one     '
>>> a.count(' ') #count all spaces
11
>>> (len(a) - len(a.lstrip())) #count leading spaces
5 
```

# ios - 免费报亭订阅是否需要收据验证？

> ID：12205748
> 
> 赞同：2
> 
> 时间：2012-08-30T21:24:40.360
> 
> 标签：ios, push-notification, newsstand-kit

我的报亭应用程序只提供一个订阅，而且是免费的。我知道如果报亭应用程序不使用 iTunes Connect 订阅，它们将被拒绝。

苹果会关心我从不验证收据吗？我使用收据的唯一目的是确定他们是否订阅了，如果他们订阅了，那么我注册推送通知。

此外，发布到 iTunes Connect 的问题信息中的“问题”概念似乎不是绝对必要的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T09:32:02.997

@Revanth 我认为 3 个月内需要 1 个问题，即一年需要 4 个问题。但是正如您所说的问题不是强制性的，您能否提供任何链接来支持您与该问题部分相关的答案，我也在寻找这个答案。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T07:18:34.723

对于报亭应用程序的批准，收据验证不是强制性的。

除非您为应用程序提供默认封面，否则问题部分也不是强制性的。

# c# - 如何从流程开始和结束之间的时间获取数据？

> ID：12205752
> 
> 赞同：0
> 
> 时间：2012-08-30T21:24:55.163
> 
> 标签：c#

我有这个代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using DannyGeneral;

namespace CpuUsage
{
    public partial class Form1 : Form
    {
        private List<float> processValues;
        private bool alreadyRun;
        private DateTime dt;
        private DateTime dt1;
        private PerformanceCounter theCPUCounter;
        private PerformanceCounter theMemCounter;
        private PerformanceCounter specProcessCPUCounter;
        private float cpuUsage;
        private float memUsage;
        private List<float> Values;

        public Form1()
        {
            InitializeComponent();

            processValues = new List<float>();
            alreadyRun = false;
            dt = DateTime.Now;

            Values = new List<float>();
                theCPUCounter = new PerformanceCounter("Processor", "% Processor Time", "_Total");
                theMemCounter = new PerformanceCounter("Memory", "Available MBytes");
                specProcessCPUCounter = new PerformanceCounter("Process", "% Processor Time", Process.GetCurrentProcess().ProcessName);

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            memUsage = theMemCounter.NextValue();
            label1.Text = memUsage.ToString();
            Logger.Write("Memory Usage   " + memUsage.ToString());
            cpuUsage = this.theCPUCounter.NextValue();
            label2.Text = cpuUsage.ToString();
            Logger.Write("Cpu Usage   " + this.cpuUsage.ToString());
            Values.Add(cpuUsage);
            isProcessRunning();
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            dt1 = DateTime.Now;
            float Maximum = Values.Max();
            float Minimum = Values.Min();
            float Average = Values.Average();
            string t = string.Format("Maximum --- {0} , Minimum --- {1} , Average --- {2}", Maximum, Minimum, Average);
            Logger.Write(t);

            TimeSpan ts = (dt1 - dt);
            string time = ts.ToString(@"hh\:mm\:ss");
            Logger.Write("Time The Program Was Running ---   " + time);

        }

        private void isProcessRunning()
        {

                Process[] proclist = Process.GetProcessesByName("BFBC2Game");

                    if (proclist.Length > 0)
                    {
                        if (alreadyRun == false)
                        {
                            Logger.Write("Bfbc2 Started");
                            alreadyRun = true;
                        }
                    }
                    else
                    {
                        if (alreadyRun == true)
                        {
                            Logger.Write("Bfbc2 Exited");
                            alreadyRun = false;
                        }
                    }

        }

    }
} 
```

我刚刚添加了一个新列表：processValues。我想要做的是，当我退出进程时，例如在这种情况下：BFBC2Game 它会从进程开始到结束时为我写入记录器 Max() Min() 和 Average()。

问题是该过程可能在程序运行几分钟并已经记录了一些信息后开始。我只想在过程开始和结束的时间之间获得最大最小值和平均值。

因此，当我关闭表单时，程序退出记录器文本文件中的程序，我现在看到最后：

```
8/31/2012--12:18 AM ==> Maximum --- 42.05113 , Minimum --- 0 , Average --- 13.19243
8/31/2012--12:18 AM ==> Time The Program Was Running ---   00:00:49 
```

当进程开始和退出时，我看到中间的某个地方：

```
8/31/2012--12:17 AM ==> Memory Usage   4435
8/31/2012--12:17 AM ==> Cpu Usage   5.57648
8/31/2012--12:17 AM ==> Bfbc2 Started
8/31/2012--12:17 AM ==> Memory Usage   4412
8/31/2012--12:17 AM ==> Cpu Usage   15.38422
8/31/2012--12:17 AM ==> Bfbc2 Exited
8/31/2012--12:18 AM ==> Memory Usage   4432
8/31/2012--12:18 AM ==> Cpu Usage   13.26883 
```

现在我希望当我退出应用程序时它会在文件末尾写下这样的内容：

```
8/31/2012--12:18 AM ==> Bfbc2 Started at 8/31/2012--12:17 AM
8/31/2012--12:19 AM ==> Maximum --- 42.05113 , Minimum --- 0 , Average --- 13.19243
8/31/2012--12:19 AM ==> Bfbc2 Exited at 8/31/2012--12:17 AM 
```

所以我会知道当进程开始和结束时查看文件的末尾，以及进程运行时间的最小值和平均值混合值是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-14T14:26:40.200

您可以使用 System.Diagnostics.Stopwatch 类。这是一个示例代码。这是指向相应 Microsoft 文档的[链接。](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch?view=net-5.0)

```
using System;
using System.Diagnostics;

class Program
{
    static void Main(string[] args)
    {
        int[] array = new int[] { 4, 2, 5, 1, 3 };
        Stopwatch clock = Stopwatch.StartNew();
        SortRecursivly(array);
        clock.Stop();
        Console.WriteLine($"Array sorted in {clock.ElapsedMilliseconds}ms");
    }
} 
```

# iphone - NSComparisonResult 不会产生正确的结果

> ID：12205755
> 
> 赞同：0
> 
> 时间：2012-08-30T21:25:08.807
> 
> 标签：iphone

我需要比较以下格式的两个时间。

NSDate *dt1;

NSDate *dt2;

NSComparisonResult *cr = [dt1 比较：dt2]; 比较不考虑 AM/PM 并产生错误的结果。

例如：如果时间是下午 6.12，那么在比较过程中结果是正确的。但如果是上午 6.12，它仍然认为是下午 6.12。

请帮助我解决与 AM/PM 相关的问题。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:30:05.130

我觉得你很困惑。

```
NSDate *dt1 = 4:30 AM; 
```

甚至远不接近有效语法。你的实际对象是什么？

我在这里猜测您实际上并没有 2 个`NSDate*`对象，而是有其他对象。

# c# - 从Repeater ItemTemplate 服务器端获取控制权

> ID：12205766
> 
> 赞同：0
> 
> 时间：2012-08-30T21:25:55.047
> 
> 标签：c#, asp.net, itemtemplate, asprepeater

我正在尝试使用中继器制作表格。但是，在转发器的项目中，我需要对某些特定控件实施一些逻辑，例如 div。

我试过[了](https://stackoverflow.com/questions/3293739/repeater-itemtemplate-server-side)，但没有用，**我总是得到：**

> 异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。
> 
> 源错误：

```
Line 35:         HtmlGenericControl myDiv = (HtmlGenericControl)e.Item.FindControl("RepeaterBG");
Line 36: 
Line 37:         myDiv.Style.Add("background-color","green");
Line 38:     }
Line 39: } 
```

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

**我的 HTML 是：**

```
<asp:Repeater runat="server" ID="MyStudents"
        OnItemDataBound="rptArticleContent_ItemDataBound">
            <HeaderTemplate>
                <table><tr>
            </HeaderTemplate>
            <ItemTemplate> 

                <td>
                    <div  runat="server" ID="RepeaterBG" > helli there</div>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("Name") %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label2" runat="server" Text='<%# Bind("RegistrationDate") %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="Label3" runat="server" Text='<%# Bind("Email") %>'></asp:Label>
                </td>

            </ItemTemplate>
            <FooterTemplate>
                </tr></table>
            </FooterTemplate>
        </asp:Repeater> 
```

**我的.CS**

```
protected void rptArticleContent_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    Label lb = new Label();
    lb.Text = "</tr><tr>";
    e.Item.Controls.Add(lb);

    HtmlGenericControl myDiv = (HtmlGenericControl)e.Item.FindControl("RepeaterBG"); // i get null here, it seems to not find it at all!
    myDiv.Style.Add("background-color","green"); // problem here
} 
```

我哪里做错了？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:50:48.250

例如，您可能应该检查项目类型以不“在标题中搜索”

```
protected void rptArticleContent_ItemDataBound(object sender, RepeaterItemEventArgs e)
    if (e.Item.ItemType == ListItemType.Item ||
        e.Item.ItemType == ListItemType.AlternatingItem) {
        // search for control here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:51:09.033

您需要检查并确保您的项目是数据项。如果您在发布的示例链接中看到，ItemDataBound 事件中的第一行是：

```
if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType !=   
       ListItemType.AlternatingItem) return; 
```

IIRC，这是因为 ItemDataBound 事件中的第一项是标题项。您必须检查该项目是否为数据项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T21:30:02.597

您无法在运行时以这种方式从转发器内部获取项目，因为转发器中的控件是在执行代码后添加的。

相反，您需要对数据绑定中的单个项目执行 FindControl。为此，请在中继器上设置一个 onItemDataBound 事件，并在为每个项目触发的事件中执行您的逻辑。您可以在事件参数的项目属性中找到项目模板中的控件。

例如：

在您的中继器上：

```
<asp:Repeater id="Repeater1" OnItemDataBound="Repeater1OnItemDataBound" runat="server"> 
```

在您的代码隐藏中：

```
Public void Repeater1OnItemDataBound(Object Sender, RepeaterItemEventArgs e) {
    HtmlGenericControl myDynamicRepeaterControl = 
     ((HtmlGenericControl)e.Item.FindControl("MyDiv"))
    //...do some work on myDynamicRepeaterControl 
} 
```

# ms-access-2010 - 仅在按钮单击时添加记录

> ID：12205769
> 
> 赞同：1
> 
> 时间：2012-08-30T21:26:12.450
> 
> 标签：ms-access-2010

我有一个将“数据输入”属性设置为“是”的表单。它绑定到一张桌子。当我开始填写表格时，它会自动保存它。我不希望这种情况发生。我只想在按下按钮时将表单保存到表格中。有什么简单的方法可以做到这一点？没有 vba。如果我只能用 vba 做到这一点，请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:37:17.427

最好的方法是使用未绑定的表单。当用户单击保存时，您可以运行查询以从控件更新您的表。

**使用记录集**

```
 Dim rs As Recordset
 Set rs=CurrentDB.Openrecordset("MyTable")

 rs.AddNew
 rs!Field1 = Me.Field1
 rs.Update 
```

如果你想更新一条你已经知道主键的记录，你可以说：

```
 Dim rs As Recordset
 Set rs=CurrentDB.Openrecordset("SELECT * FROM MyTable WHERE ID=" & Me.txtID)

 rs.Edit
 rs!Field1 = Me.Field1
 rs.Update 
```

**使用您在查询设计窗口中创建的查询**

查询的 SQL

```
 INSERT INTO MyTable (Field1) 
 VALUES ( Forms!MyForm!Field1 ) 
```

VBA

这将发出警告

```
 DoCmd.OpenQuery "MyQuery" 
```

这不会

```
 CurrentDb.Execute "Query2", dbFailOnError 
```

您还可以使用动态 SQL 或带有您在代码中分配的参数的查询。

# iphone - 可以使用本机 facebook 应用程序登录移动 html5 应用程序吗？在 iPhone 上

> ID：12205771
> 
> 赞同：16
> 
> 时间：2012-08-30T21:26:28.900
> 
> 标签：iphone, facebook, html, authentication, mobile

我试图让我的 html5 网站打开原生 iPhone Facebook 应用程序来验证用户身份。

该网站目前在服务器端使用 OAuth 2 - 因此它将所有人重定向到 Facebook 的网络版本。这是一个问题，因为我不想强迫人们在小键盘上登录。

您可以让 html5 应用程序在 Safari 中打开并通过本机 FB 应用程序进行身份验证吗？

如果 Facebook 无法做到这一点，那么 Twitter 应用程序是否可以做到这一点？在安卓上是怎样的体验？

我知道您可以在原生 iPhone 应用程序和原生 Facebook 应用程序之间进行身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:34:19.307

是的，您可以这样做，只需使用网站的 facebook 开发人员部分中的样板代码并完全按照[指南](https://developers.facebook.com/docs/guides/mobile/web/)进行操作...我已经尝试过，它对我有用，您只需要找到一种方法将您的 oAuth 连接到此...

# css - 带有一些电子书阅读器的带有下沉帽的越野车边距

> ID：12205778
> 
> 赞同：1
> 
> 时间：2012-08-30T21:27:07.813
> 
> 标签：css, epub

我有以下代码在电子书中生成首字下沉：

```
<p class="noindent">
  <span class="lettrine">
    <span class="lettrine-letter">D</span>
  </span>
  <span class="lettrine-line">ésirant</span> développer une relation intime avec Abram, …
</p> 
```

和

```
.lettrine {
    float: left;
    line-height: 0.7;
    margin-bottom: -1em;
    margin-left: -0.1em;
    margin-right: 0.2em
    }
.lettrine-letter {
    color: gray;
    font-size: 4em;
    font-style: normal
    }
.lettrine-line {
    font-family: "EB Garamond SC", serif;
    font-variant: small-caps
    } 
```

在网络浏览器和 readium 中，首字下沉看起来不错（来自 Firefox 14 的屏幕截图）：

![在火狐14](../Images/f4e512b519c590f13164fc51ca6db7ed.png)

在其他一些阅读器（calibre's `ebook-viewer`，Aldiko）中，首字下沉太低（Aldiko 2.1.0 的屏幕截图）：

![在阿尔迪科](../Images/b848c8e9143ad3bf4e6d222e3ac5e209.png)

什么可以解释这种差异？我怎么能避免呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T02:05:02.603

我也见过这个。文件错误。假设您没有使用超出 CSS 2 定义的任何 CSS 属性（并且您似乎没有使用），那么呈现 HTML/CSS 的正确方法正是一种。如果 EPUB 阅读器的呈现方式与浏览器不同，这是阅读器中的错误，需要修复（当然，除非它是基本阅读器，忽略了大部分 CSS 规范，但那些阅读器通常会忽略下限也是）。

因为 EPUB 格式不允许使用 JavaScript（除非您正在构建 EPUB 3 内容），所以我很确定没有办法有效地解决这些问题，只要阅读器供应商修复他们的问题就不会中断错误。最好的办法是提交错误，并希望制造读者的公司能够及时修复它们。

顺便说一句，我对 Calibre 提出了一个错误，他们说这是一个 WebKit 问题。我没有在当前版本的 QTWebKit 中看到问题，所以希望每当 Calibre 选择 QT5（在最终版本之后，目前计划在 2012 年底发生）和更新的 WebKit 版本以匹配时，这个问题应该会消失.

假设 Aldiko 也基于 QTWebKit，那么同样的事情可能适用于该读者。

# asp.net - RadSplitter 删除边框不起作用

> ID：12205782
> 
> 赞同：1
> 
> 时间：2012-08-30T21:27:24.790
> 
> 标签：asp.net, webforms, telerik

我正在开发一个 Asp .net 项目，我正在使用 RadSplitter 来拆分我的网站。我想从分离器中删除边框。下面是我的 asp 代码，我删除了边框，但它们仍然出现。任何人都可以帮助我吗？

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="webbetv1.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
    <html runat="server">
    <head >
    <style type="text/css">

    .RadSplitter .pane,  
.RadSplitter .paneHorizontal 
{ 
    border: 0px  !important; 
    padding: 0px !important;
}
        .style1
        {
            width: 100%;
            margin-bottom: 33px;
        }
    </style>
    <script type="text/javascript">
        //Put your JavaScript code here.
    </script>
    </head>
     <form id="Form1" runat="server">
    <body>

    <telerik:RadScriptManager ID="RadScriptManager1" Runat="server">
</telerik:RadScriptManager>
    <telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
    </telerik:RadAjaxManager>
    <div  style="height:800px; width: auto;">
        <telerik:RadSplitter ID="MainSplitter" runat="server" Width="100%" Height="100%" ExpandMode="FullExpandItem" 
            Orientation="Horizontal" LiveResize="false" BorderSize="0" BorderWidth="0px"  BorderStyle="None" CssClass="pane"   >
            <telerik:RadPane ID="TopPane" runat="server" Height="120" MinHeight="85" MaxHeight="150" BorderWidth="0px"   
                Scrolling="none" CssClass="pane" >
                <asp:PlaceHolder ID="PlaceHolder3" runat="server"></asp:PlaceHolder>

                <table class="style1">
                    <tr>
                        <td>
                            &nbsp;</td>
                        <td>
                            &nbsp;</td>
                    </tr>
                    <tr>
                        <td>
                            sadasd</td>
                        <td>
                            &nbsp;</td>
                    </tr>
                </table>

            </telerik:RadPane>
            <telerik:RadSplitBar ID="RadsplitbarTop" runat="server" CollapseMode="Forward" Height="100%" BorderWidth="0px" BorderStyle="None" />
            </telerik:RadSplitter>
            </div>
             </body>
            </form>

            </html> 
```

![这里的图像：](../Images/d8a1747a9c83dcfb3b30b09b4929ebf1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T12:46:14.393

为了删除边框，不需要 css：在 RadSplitter 集上：

```
PanesBorderSize="0" BorderWidth="0" 
```

在 RadPane 集上：

```
BorderWidth="0" 
```

现在图像是可见的，也许您只想隐藏 RadSplitBar。在这种情况下，您既可以删除它，也可以只设置`Visible="False"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T15:40:20.100

尝试添加

```
border: none; 
```

到你的`.pane` **CSS**类。

我有同样的问题，我不得不将它添加到 css 类以及设置`BorderStyle="None"`和`BorderSize="0"`. 我正在使用母版页，我怀疑该属性在某处被覆盖。

# javascript - 使用javascript读取本地XML文件并在html页面中显示

> ID：12205783
> 
> 赞同：0
> 
> 时间：2012-08-30T21:27:25.903
> 
> 标签：javascript, html, xml

我正在尝试通过 javascript 读取 xml 文件并将其显示在 HTML 页面中。

我正在使用以下代码。

```
function readxml() {
alert("calledreadxml");
var myXML, studentnode;    
myXML= document.all("config.xml").XMLDocumentalert(myXML);
studentnode = myXML.documentElement
var string;
var nxtnode;
while(nxtnode)
{
    string = "the value of "+nxtnode.nodeName+"is :"+ nxtnode.nodeValue+"\n";
    nxtnode = myXML.nextSibling;
}
} 
```

这段代码不起作用..有人可以帮忙吗

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-04-22T12:02:23.530

```
<script type="text/javascript">

                           if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                               xmlhttp = new XMLHttpRequest();
                           }
                           else {// code for IE6, IE5
                               xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                           }
                           xmlhttp.open("GET", "Images-Info.xml", false);
                           xmlhttp.send();
                           xmlDoc = xmlhttp.responseXML;

                                                   var x = xmlDoc.getElementsByTagName("Image_Store");

                           for (i = 0; i < x.length; i++) 
                           {
                              var type = x[i].getElementsByTagName("Image_Type")[0].childNodes[0].nodeValue;
                               var title = x[i].getElementsByTagName("Image_Title")[0].childNodes[0].nodeValue;
                              var des = x[i].getElementsByTagName("Image_Description")[0].childNodes[0].nodeValue;
                               var ph = x[i].getElementsByTagName("Image_Photo")[0].childNodes[0].nodeValue;
                               var thm = x[i].getElementsByTagName("Thumbnail_Photo")[0].childNodes[0].nodeValue;
                              // Ul1.innerHTML = Ul1.appendChild("<li><div><a  href=\"" + ph + "\" \><img src=\"" + thm + "\" \/></a><p>" + title + "</p></div><div class=\"data\"><div><h1>" + title + "</h1>" + des + "</div></div></li>");
                               document.write("<li>");
                               document.write("<div>");
                               document.write("<a  href=\"" + ph + "\" \>");
                               document.write("<img src=\"" + thm + "\" \/>");
                               document.write("</a>");
                               document.write("<p>");
                               document.write(title);
                               document.write("</p>");
                               document.write("</div>");
                               document.write("<div class=\"data\">");
                               document.write("<div>");
                               document.write("<h1>");
                               document.write(title);
                               document.write("</h1>");
                               document.write(des);
                               document.write("</div>");
                               document.write("</div>");
                               document.write("</li>");
                           }                
        </script> 
```

# ios - Getting bundle file references / paths at app launch

> ID：12205785
> 
> 赞同：31
> 
> 时间：2012-08-30T21:27:34.907
> 
> 标签：ios, ios5, nsfilemanager, nsbundle

Suppose I have an arbitrary set of files included in the Main App Bundle. I would like to fetch the file URLs for those at launch and store them somewhere. Is this possible using `NSFileManager`? The documentation is unclear in that regard.

Note: I only need the file URLs, I do not need to access the actual files.

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-30T21:34:24.200

You can get the URL of a file in the main bundle using

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"SomeFile" ofType:@"jpeg"];
NSURL *url = [NSURL fileURLWithPath:path]; 
```

You can write this URL to, for example, a property list file in the Documents directory:

```
NSString *docsDir = [NSSearchForDirectoriesInDomains(NSDocumentsDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *plistPath = [docsDir stringByAppendingPathComponent:@"Files.plist"];
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:[url absoluteString] forKey:@"SomeFile.jpeg"];
[dict writeToFile:plistPath atomically:YES]; 
```

If you don't know the names of the files and you just want to list all the files in the bundle, use

```
NSArray *files = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[[NSBundle mainBundle] bundlePath] error:NULL];
for (NSString *fileName in files) {
    NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:nil];
    NSURL *url = [NSURL fileURLWithPath:path];
    // do something with `url`
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-17T10:25:21.663

Or in Swift 4:

```
 let url = Bundle.main.url(forResource: "FileName", withExtension: ".xyz") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-30T21:34:16.090

Yes, you would get their path:

```
NSString *path = [NSBundle mainBundle] pathForResource:@"file1" ofType:@"png"];
NSURL *fileURL = [NSURL fileURLWithPath:path]

// save it as any other object or in a dictionary:

[myMutableDictionary setObject:fileURL forKey:@"file1.png"]; 
```

EDIT: to get the complete list of files, use the NSFileManager, get the path to the bundle itself, then walk each directory getting the files, making URLs, and saving them somewhere. There is oodles of code on SO how to walk a directory to do this. [You should update your question to be more specific on what you want, this was not made clear at all originally]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-04T18:08:05.713

There's an API on `NSBundle` ([documentation](https://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/URLForResource:withExtension:)) available on 10.6 or iOS 4 to get an `NSURL` directly, rather than passing a path to the `NSURL` constructor:

```
- (NSURL *)URLForResource:(NSString *)name withExtension:(NSString *)ext; 
```

It also has variants that take a `subdirectory` and `localizationName`, the same as its `-pathForResource:` equivalents.

# jquery - 我应该在客户端增强 Jquery Mobile 元素还是使用 data-enhance="false" 发送增强标记？

> ID：12205787
> 
> 赞同：3
> 
> 时间：2012-08-30T21:27:41.810
> 
> 标签：jquery, performance, jquery-mobile

我有一个产品搜索，我在其中发回结果，每个结果都包含一个两个按钮 JQM 控制组。

我一次发送 24 条记录，所以这将是 24 个要增强的控制组，如下所示：

```
<div data-role="controlgroup" data-type="horizontal" class="submitButton linkBox">
    <input type="button" class="singleLoader" data-brand="#d#" data-index="#e#" value="#tx#" />
    <input type="button" class="selector" data-brand="#d#" data-index="#e#" data-iconpos="notext" data-icon="fav" value="#tx#" />
</div> 
```

如果我将控制组作为纯 HTML 发送并在客户端上增强它们，服务器响应是`1sec`, data send `20k`，并且页面会明显停止大约 1-2 秒，这可能是因为 JQM 正忙于增强控制组。

我现在正在尝试替代方案，即

```
 $.mobile.ignoreContentEnabled = true; 
```

并发送完全增强的标记而不是控制组。所以现在我发送这个：

```
<div data-enhance="false" class="ui-corner-all ui-controlgroup ui-controlgroup-horizontal">
     <div class="ui-controlgroup-controls">
           <div data-icon="" data-iconpos="" class="ui-btn ui-corner-left ui-btn-up-c" aria-disabled="false">
                <span class="ui-btn-inner ui-corner-left">
                     <span class="ui-btn-text">#tx#</span>
                </span>
                <input type="button" value="#tx#" class="ui-btn-hidden" aria-disabled="false">
      </div>
      <div data-icon="fav" data-iconpos="notext" title="#tx#" class="ui-btn ui-btn-icon-notext ui-corner-right ui-controlgroup-last ui-btn-up-c" aria-disabled="false">
           <span class="ui-btn-inner ui-corner-right ui-controlgroup-last">
                <span class="ui-btn-text">#tx#</span>
                <span class="ui-icon ui-icon-fav ui-icon-shadow">&nbsp;</span>
           </span>
           <input type="button" value="#tx#" data-icon="fav" data-iconpos="notext" class="ui-btn-hidden" aria-disabled="false">
       </div>
    </div>
 </div> 
```

这增加了传输大小`34k`和响应时间`1.5sec`，但页面感觉明显更快，因为没有什么可以增强的。但是，我也读到了 using `data-enhance=false`，这是对设备的性能影响。

**问题：**
其他人有如何处理这个问题的经验吗？如果页面感觉更快，我应该选择大文件大小/传输时间/性能损失吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:23:27.587

行。基本上有三种选择。我用 Firebug 运行了每一个，以检查文件大小/加载时间以及由于渲染项目而导致的视觉停滞。

**a) 正如**
我正在加载一个列表视图，我的 24 个搜索结果中的每一个都是列表项，每个都有一个两个按钮控制组。

```
1 listview
24 list items
24 two button controlgroups 
```

浏览基本内容的标记，我正在接收`20k`，即将`1sec`发送结果，但是在创建所有项目之前，页面视觉上又停顿了大约 1-2 秒。

**b) data-enhance=false**
这也需要设置`$.mobile.ignoreContentEnabled=true`，因为 JQM 说扫描`data-enhanced`会影响性能（请参阅[此处](http://jquerymobile.com/test/docs/api/data-attributes.html)）。不过我真的没注意到。

这样做意味着您必须自己增强您需要的任何东西（在我的情况下是服务器端），所以我发送了完全增强的标记（注意：您也可以尝试删除数据属性，因为它们似乎只向 JQM 表明，什么要分配的课程等）

现在我的搜索返回`35k`了`1.5sec`，但是页面渲染要快得多，所以感觉好多了。

**c）不要增强**
我仍在`trigger('create')`发送的东西上使用的内容。但是，如果我不需要触发`create`元素来增强它们，因为我已经增强了服务器端，我不需要`data-enhance=false`全局配置，这也可以节省隐含的性能损失。

事实证明这也很好用。文件大小仍然相同，我相信它会更快（希望这是可测量的）......

所以现在我更愿意发送更多数据（`40k`包括分页和增强的列表视图/列表项），它似乎响应速度更快。

仍然好奇其他人有什么经验，所以请发布您的发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T10:54:37.257

如果我正确理解 JQM 的渐进增强，其目的是能够使用这种客户端方法（优雅降级：[jQuery 和动态元素与显示 css 属性](https://stackoverflow.com/questions/11333950/jquery-and-dynamic-elements-vs-display-css-attribute/11334556#11334556)）适应客户端的服务平台。如果您在服务器端呈现所有内容，您要么需要为不同平台提供增强标记，要么只能支持一个平台：您复制增强标记的平台。

如果后者是您的要求，例如仅支持版本 XY 的 Android Chrome 浏览器，那么这可以提高性能，否则可能会变得乏味。

I'm currently facing the same performance issue due to the enhancement of up to 60 form elements which takes 1s on Desktop but 6s on a Nexus 4 which is unbearable. These are my thoughts which I want to share before trying out to serve enhanced markup. We need to also support Windows Mobile 8 and iOS7 platform which why I'm hesitating.

# c# - 为什么即使在适当的热身之后，我的测试性能课也会给我不一致的结果？

> ID：12205800
> 
> 赞同：0
> 
> 时间：2012-08-30T21:28:35.607
> 
> 标签：c#, performance

我做了一门课，可以帮助我测量 Ticks 中任何方法的时间。

基本上，它运行测试方法 100x，并强制 GC，然后记录另一个 100x 方法运行所花费的时间。x64 发布 ctrl+f5 VS2012/VS2010

结果如下：

```
2,914    2,909    2,913    2,909    2,908
2,907    2,909    2,998    2,976    2,855
2,446    2,415    2,435    2,401    2,402
2,402    2,399    2,401    2,401    2,400
2,399    2,400    2,404    2,402    2,401
2,399    2,400    2,402    2,404    2,403
2,401    2,403    2,401    2,400    2,399
2,414    2,405    2,401    2,407    2,399
2,401    2,402    2,401    2,404    2,401
2,404    2,405    2,368    1,577    1,579
1,626    1,578    1,576    1,578    1,577
1,577    1,576    1,578    1,576    1,578
1,577    1,578    1,576    1,578    1,577
1,579    1,585    1,576    1,579    1,577
1,579    1,578    1,579    1,577    1,578
1,577    1,578    1,576    1,578    1,577
1,578    1,599    1,579    1,578    1,582
1,576    1,578    1,576    1,579    1,577
1,578    1,577    1,591    1,577    1,578
1,578    1,576    1,578    1,576    1,578 
```

如您所见，有 3 个阶段，第一个是 ~2,900，第二个是 ~2,400，然后是 ~1,550

可能是什么原因造成的？

### 更新

**我现在强烈怀疑，当我使用英特尔 I5 时，是 cpu turbo boost 干扰了结果。但是，即使我禁用了涡轮增压，它仍然不稳定。同时 Core 2 Quad 产生稳定的基准**

测试性能类代码如下：

```
 public static void RunTests(Func<long> myTest)
    {
        const int numTrials = 100;
        Stopwatch sw = new Stopwatch();
        double[] sample = new double[numTrials];

        Console.WriteLine("Checksum is {0:N0}", myTest());

        sw.Start();
        myTest();
        sw.Stop();

        Console.WriteLine("Estimated time per test is {0:N0} ticks\n", sw.ElapsedTicks);

        for (int i = 0; i < numTrials; i++)
        {
            myTest();
        }
        GC.Collect();
        string testName = myTest.Method.Name;
        Console.WriteLine("----> Starting benchmark {0}\n", myTest.Method.Name);
        for (int i = 0; i < numTrials; i++)
        {
            sw.Restart();
            myTest();
            sw.Stop();
            sample[i] = sw.ElapsedTicks;
        }
        double testResult = DataSetAnalysis.Report(sample);

        for (int j = 0; j < numTrials; j = j + 5)
            Console.WriteLine("{0,8:N0} {1,8:N0} {2,8:N0} {3,8:N0} {4,8:N0}", sample[j], sample[j + 1], sample[j + 2], sample[j + 3], sample[j + 4]);
        Console.WriteLine("\n----> End of benchmark");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:22:19.930

如果我没看错你的帖子，它只会执行一个方法 100 次，那是一个非常*小的*样本池。在做即兴秒表时，我倾向于运行数百万次操作，具体取决于操作的复杂程度。

对于您的一般案例包装器，您可能希望让另一个线程启动秒表，向性能部件发送 eventwaithandle 信号以运行，并让您的秒表线程每 200 毫秒检查一次，直到达到 2 分钟，发送信号并检查您的性能部件表示每次迭代都停止。

查看这 2 分钟内完成了多少次迭代。

试试这个，运行 10 次，看看百分比方差是多少，总数可能相差数千，但总百分比差异应该小得多。

就在我的头顶..

```
public class PerfTester
{
    private EventWaitHandle _running = new EventWaitHandle(false, EventResetMode.ManualReset, "awesome_Woo");
    private int _count;

    public Run(Action actionToRun)
    {
        ParameterizedThreadStart runner = new ParameterizedThreadStart((state) =>
        {
            Action action = state as Action;
            EventWaitHandle run = = new EventWaitHandle(false, EventResetMode.ManualReset, "awesome_Woo", false);
            while(true)
            {
                run.WaitOne();
                action();
                _count++;
            }
        });

        Thread runnerThread = new Thread(runner);
        runnerThread.Start(actionToRun);

        StopWatch timer = new StopWatch();
        timer.Start();
        _running.Set();
        while(timer.ElapsedSeconds < 120) Thread.Sleep(500);
        _running.Reset();

        Console.WriteLine(_count);
    }
} 
```

或者也许只是使用布尔值而不是等待句柄，我刚刚养成了使用它们进行跨界通信的习惯..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:07:04.927

好像是快手？速度从 1/2x 开始，当它完全预热时，它会全速运行。

当我同时运行[TMonitor](http://www.cpuid.com/softwares/tmonitor.html#top)时，基准变得稳定，甚至不需要预热

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T00:49:30.777

我认为每个滴答声大约是 1000 个时钟周期，所以 1000-2000 个滴答声并不是那么小。虽然这样做仍然更好：

```
myTest();
myTest();
myTest();
myTest();
myTest();

myTest();
myTest();
myTest();
myTest();
myTest(); 
```

那就是在不使用循环的情况下调用相同的方法 10 次以避免循环成本；然后将结果除以 10。

至于区别，如果您的 myTest 代码执行任何内存分配、使用任何类型的缓存或使用弱引用，则可能是这样。我最近发现在低端机器上调用 .Net 反射 API 会产生奇怪的性能结果。

# mysql - 关于数据库更新/插入速率限制的一些查询（基于 SQL 或基于 NoSQL）

> ID：12205802
> 
> 赞同：1
> 
> 时间：2012-08-30T21:28:39.913
> 
> 标签：mysql, sql, sql-server, mongodb, amazon-dynamodb

在应用程序中，我需要更新大量记录/将大量记录几乎同时插入数据库。

是否有任何此类插入/更新限制会成为我的应用程序的瓶颈？我可以做些什么来最大化插入/更新率。

另外，关于更新，同一条记录不会被更新——一张表中的许多记录（可以通过键清楚地识别）将被更新——这是否意味着更新率可以显着提高？

我上面的问题适用于关系数据库和 NoSQL 数据库。

我现在正在考虑使用像 SQL Server/MySQL 这样的关系数据库——但是在这个阶段我也愿意考虑像 Mongo DB/Dynamo DB 这样的 noSQL 数据库——我最终选择的 db 取决于哪个数据库提供更高的插入/更新限制.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:53:52.277

### 一般注意事项

最大 R/W 容量很大程度上取决于硬件（HDD 与 SSD）和节点数量。另外，我相信，由于没有强制执行 ACID 和一致性，因此更容易扩展 NoSQL 以进行写入操作。

### 对于问题的 DynamoDB 部分

DynamoDB 是一项**托管服务**。您**保留给定的 R/W 容量**（所谓的“单位”），Amazon 会为您扩展您的数据库。但是，仍然有几点需要考虑：

*   读取的最大保留吞吐量为 10,000
*   写入的最大保留吞吐量为 10,000

基本上，您每秒每次一致读取或写入以及每个不可分割的 kB 消耗 1 个单位。（嗯，实际上，它甚至更棘手）。

但是，为了扩展，您的表在**partitions**之间进行拆分。保留的吞吐量也是如此。因此，为了达到最大可能的吞吐量，您要求的密钥需要尽可能均匀地分布。

这些是数据库方面的考虑。

在**客户端**，还需要考虑多个因素：

*   TCP/HTTP 延迟
*   一次最大打开套接字

您可以使用 batch_get_item 和/或 batch_write_items 进行分组以减少延迟影响。

例如，我从来没有能够从我的办公室计算机上达到预置的 1000 写入，因此，您最好使用多个实例/服务器来发出您的数据库请求。

### **TL;DR** (DynamoDB)

*   您保留吞吐量，Amazon 扩展以提供它
*   还有一些与内部实现相关的问题
*   需要优化延迟
*   需要仔细并行化

我不是其他数据库类型的专家，所以我只能猜测客户端的考虑会以某种方式相同，对于 MySQL 来说可能更少，因为它使用二进制协议。此外，您可能必须管理数据库。

# c++ - VOID NTAPI 是什么意思，我在哪里可以找到它的参考资料？

> ID：12205803
> 
> 赞同：2
> 
> 时间：2012-08-30T21:28:49.623
> 
> 标签：c++, c, windows

我找到了这段代码，但我不明白。我找不到`NTAPI`. 对我来说，它定义了一个名为`TestForWr`但`NTAPI`令人困惑的函数。

```
VOID NTAPI TestForWr(PVOID Ad, ULONG Le, ULONG Al); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T21:37:03.863

从`WinNT.h`

```
#define NTAPI __stdcall 
```

> [`__stdcall`](http://msdn.microsoft.com/en-us/library/zxk0tw93%28v=vs.80%29.aspx)调用约定用于调用 Win32 API 函数。被调用者清理堆栈，因此编译器生成可变参数函数 `__cdecl`。

# html - 绝对位置和 css3 的 Chrome 渲染错误

> ID：12205804
> 
> 赞同：2
> 
> 时间：2012-08-30T21:28:55.080
> 
> 标签：html, google-chrome, css

我一直在破坏自己，试图弄清楚这么大的 html 发生了什么。它可以在最新的 Firefox、Safari 和 chrome canary 上正确呈现，但普通的 chrome 会呈现这些奇怪的线条，我不知道为什么。

我用我的代码摘录创建了一个 JS fiddle，它是一个更大的项目的一部分，但我在 fiddle 和我的应用程序中都看到了渲染问题。我附上了我在小提琴中看到的屏幕截图以供参考。

[小提琴](http://jsfiddle.net/mateuszwijas/fzqPT/)

错误截图： ![错误截图](../Images/5c20723bd57bfc32d41a827e16ec9989.png)

红色中间线不应该像“关闭”左侧的线一样存在。这只是一个例子，当我将鼠标悬停在模态框上时，我会看到到处都是线条。

由于难以复制，因此提出了一个不太重要的问题。调整浏览器大小有助于显示错误。我的小提琴有很多 html 和 css。我不希望任何人真正梳理它并解决问题。我只想彻底地提出问题。

我试过在网上寻找，但据我所知，我找不到任何人报告同样的问题。

如果有人对可能导致此问题的原因有任何想法，如何解决它或将我指向相关链接/SO问题，我将不胜感激。

我已经排除/调查的事情： - 不是由页面上的其他内容引起的，因为我将它提取到 jsfiddle 并且它仍然在发生。我还在我的应用程序中使用控制台删除了正文内容，但没有任何区别。- 我不认为渐变或过渡导致它，因为删除它们似乎没有效果 - 可能/可能与绝对定位有关？当我删除主包装元素上的绝对位置时，我没有看到这种情况发生。- 我读到对这些元素应用 z-index 可能会有所帮助，但它对这些问题没有任何作用。

TL，DR：为什么谷歌浏览器，但不是金丝雀或野生动物园，在自由使用css3渐变、阴影和过渡的绝对定位元素上显示渲染错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T01:47:45.980

当我删除#vfs_uploader 上的'-webkit-transform: scale(0.95)' 和#vfs_uploader.visible 上的'-webkit-transform: scale(1)' 时，它显示正常：http: [//jsfiddle.net/cjc343 /fzqPT/2/](http://jsfiddle.net/cjc343/fzqPT/2/)

我不知道这对 Safari 有何影响，或者它是否对 Chrome 有其他影响，但它似乎不会影响示例中的布局。

# python - 在 Python 中与正则表达式匹配的字符串周围添加括号

> ID：12205808
> 
> 赞同：4
> 
> 时间：2012-08-30T21:29:00.340
> 
> 标签：python, regex

给定一个正则表达式和一个字符串 s，我想生成一个新字符串，其中与正则表达式匹配的 s 的任何子字符串都用括号括起来。

例如：我的原始字符串 s 是“Alan Turing 1912-1954”，而我的正则表达式恰好匹配“1912-1954”。新生成的字符串应该是“Alan Turing (1912-1954)”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-30T21:31:13.507

**解决方案1：**

```
>>> re.sub(r"\d{4}-\d{4}", r"(\g<0>)", "Alan Turing 1912-1954")
'Alan Turing (1912-1954)' 
```

`\g<0>`是对整个匹配项的反向引用（`\0`不起作用；它将被解释为`\x00`）。

**解决方案2：**

```
>>> regex = re.compile(r"\d{4}-\d{4}")
>>> regex.sub(lambda m: '({0})'.format(m.group(0)), "Alan Turing 1912-1954")
'Alan Turing (1912-1954)' 
```

# asp.net-membership - MVC4 应用程序看不到任何会员部分

> ID：12205810
> 
> 赞同：0
> 
> 时间：2012-08-30T21:29:02.300
> 
> 标签：asp.net-membership, asp.net-mvc-4, sqlmembershipprovider

刚刚安装了 VS 2012(Ultimate) 并创建了一个 MVC4 应用程序。

当我查看 web.config 时，我找不到任何成员资格、角色或配置文件提供程序部分。

很想知道它们的设置位置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:05:24.757

实际上它从 machine.config 中获取值。默认提供程序是“AspNetSqlMembershipProvider”

谢谢

# php - 如何在 CakePHP 中设置 authError 重定向操作？

> ID：12205812
> 
> 赞同：0
> 
> 时间：2012-08-30T21:29:20.450
> 
> 标签：php, redirect, action, cakephp-2.2

这是一种自定义`authError`URL的方法`CakePHP`吗？如果我查看我放入的`Auth`组件，`AppController`我有一个重定向操作`loginRedirect`，`logoutRedirect`但我不知道是否可以设置如下内容`authErrorRedirect`：

```
<?php
class AppController extends Controller {

    public $components = array(
        'Session',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'users', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'users', 'action' => 'index'),
            'authError' => 'You don\'t have the right to go there.',
            // something like this
            'authErrorRedirect' => array('controller' => 'users', 'action' => 'login'),
            'authorize' => array(
                'Controller',
                'Actions' => array(
                    'actionPath' => 'controllers'
                )
            ),
            'authenticate' => array(
                'Form' => array(
                    'fields' => array('username' => 'email')
                )
            )
        ),
        'Acl'
    ); 
```

我可以设置 authError 重定向操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:02:23.430

不可以。如果您遵循简单的身份验证和授权应用程序示例[@CakePHP Cookbook v2.x 文档](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)，您应该在登录操作中重定向，因为“无效的用户名或密码...”登录失败。仅当您想重定向不同的操作时，这些才有意义，在以下示例 login2 中

```
public function login() {
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {
            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash(__('Invalid username or password, try again'));
            $this->redirect(array('controller' => 'users', 'action' => 'login2'));
        }
    }
} 
```

# mysql - 在 CakePHP 中使用 $useDbConfig 在 readOnly 和 writeOnly 数据库之间切换？

> ID：12205815
> 
> 赞同：1
> 
> 时间：2012-08-30T21:29:41.097
> 
> 标签：mysql, model, cakephp-2.2

我有一个主从数据库。为了平衡一些负载，我希望我的所有 INSERT/UPDATE 查询都转到主服务器，而我所有的 SELECT 查询都转到从服务器（因为你不能在不弄乱它的情况下写入从服务器）。我在 database.php 中定义了数据库。这就是我尝试进行切换的方式：

在 AppModel.php **beforeFind()**中，我正在设置：

```
$this->useDBConfig = 'readOnly'; 
```

在**beforeSave()**中，我正在设置：

```
$this->useDBConfig = 'writeOnly'; 
```

但是，在深入研究之后，我想知道 useDBConfig 是否是一对一的关系模型到数据库。意思是，也许 useDBConfig 仅用于将单个模型指向单个数据库，因为这并不总是像我期望的那样工作。有时 INSERT / UPDATE 将尝试在具有只读权限的只读设备上运行并失败。

如果是这种情况，如何更改我的 CakePHP 应用程序以将请求发送到适当的数据库？我应该以不同的方式这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:41:28.357

基本上，您覆盖 AppModel 中的所有保存方法（save、saveField、saveAssociated、saveAll、UpdateAll、delete、deleteAll 等），并封装两个 setDatasource 调用之间的父调用。

# git - 创建了一个指向外部 git 存储库的 git 远程。当我拉动时权限被拒绝

> ID：12205820
> 
> 赞同：1
> 
> 时间：2012-08-30T21:29:52.600
> 
> 标签：git, git-branch, git-remote

我有一个项目，我想将“官方”代码推送到一台服务器，而在另一台服务器上“测试”代码。我有两个 git 存储库位于两个完全不同的服务器中（出于我无法控制的原因）。我们将服务器称为 Server_ONE 和 Server_TWO。由于这两个项目的代码是相同的，我想从本地机器上的一个地方管理这个项目。

所以我这样做了：

```
#These work fine
git clone ssh://user@SERVER_TWO:my_project.git
git remote add Server1_branch user@SERVER_ONE:my_project.git

#This fails
git fetch Server1_branch master
user@SERVER_ONE's password: #I have no idea what password to enter. 
Permission denied (publickey,gssapi-with-mic,password). 
```

我知道 Server_ONE 拒绝权限。但我不知道在哪里添加权限？

我没有使用 Github。这些都是私有存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:36:33.070

实际上...我刚刚发现了解决方案！问题是我必须做

```
git remote add Server1_branch ssh://user@SERVER_ONE:my_project.git 
```

代替

```
git remote add Server1_branch user@SERVER_ONE:my_project.git 
```

# jakarta-ee - 何时使用依赖注入与服务定位器

> ID：12205826
> 
> 赞同：5
> 
> 时间：2012-08-30T21:30:18.333
> 
> 标签：jakarta-ee, dependencies, service-locator

什么时候使用依赖注入？使用依赖注入有什么压倒性的好处吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T21:50:03.977

[Fowler 在他的Inversion of Control Containers 和 Dependency Injection 模式 Heading](http://martinfowler.com/articles/injection.html)中对两者进行了很好的比较。在他的总结性想法中，他说

> 依赖注入是服务定位器的有用替代方案。在构建应用程序类时，两者大致相当，但我认为 Service Locator 有一点优势，因为它的行为更直接。但是，如果您正在构建要在多个应用程序中使用的类，那么依赖注入是一个更好的选择。

[你可以在这里](http://www.cookcomputing.com/blog/archives/000587.html)找到更多的观点和比较

对于 DI：

*   更容易确定组件具有哪些依赖项 - 查看构造函数。
*   组件不依赖于 Service Locator，因此如果该组件与不同的框架一起使用，则不会出现问题。
*   DI 可能使测试更容易，但良好的服务定位器机制将使存根同样可行

反对 DI：

*   更难调试和理解。
*   组件一旦配置就不能从注入器请求额外的服务。

# php - 根据自定义选项交换 Magento 产品图像

> ID：12205827
> 
> 赞同：0
> 
> 时间：2012-08-30T21:30:19.670
> 
> 标签：php, image, magento, collections, product

我的产品以网格格式显示，并直接从该页面购买。它们是具有自定义选项的简单产品。每个选项都是一种颜色。有没有办法为每个产品/颜色组合分配图像并在选择关联颜色的下拉菜单时显示该图像？

```
 ` <?php $_collectionSize = $_productCollection->count() ?>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_productCollection as $_product): ?>
        <?php if ($i++%$_columnCount==0): ?>
        <ul class="products-grid">
        <?php endif ?>
            <li class="productthumb" item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
<a href="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(600); ?>" rel="lightbox" title="<?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?>" />
               <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(220); ?>" width="220" height="160" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
                <h2 class="product-name"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></h2>
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                <?php endif; ?>
                <?php echo $this->getPriceHtml($_product, true) ?>
                <form action="<?php echo Mage::getBaseUrl(); ?>checkout/cart/add/" method="post" style="display:block; clear:both;"> 
` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T01:59:16.793

有几个商业模块承诺在产品页面而不是类别页面上提供此功能。因此，没有现成的简单选择。

由于 SKU 数量、从类别页面订购和数据库可维护性的原因，可配置产品可能不是这里的方式。

一个简单的解决方法是创建 media/swatch/red.jpg、media/swatch/orange.jpg、media/swatch/redgreenstripes.jpg 等。然后在前端代码中，拉出与所需选项匹配的样本。对于每个颜色选项，您需要 strtolower 代码，将其与 get-base-dir-media-swatches 连接并将其弹出图像标签。

Blutak 和字符串解决方案？是的，但您不需要花一整天时间编写模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T23:24:07.430

使用可配置的产品。然后，您可以为每个组合分配一个图像。

去做这个：

*   为每个产品创建一个可配置的产品
*   为每个产品+颜色组合创建一个简单的产品，确保它们与正确的可配置产品相​​关联
*   为您刚刚创建的每个简单产品分配一个图像

然后，在您的网格中，改为显示可配置产品，但在选项下拉列表中显示相关简单产品的颜色属性，并在选择时切换到正确的图像。

如果您不熟悉可配置产品，请参阅[此页面](http://www.magentocommerce.com/wiki/welcome_to_the_magento_user_s_guide/chapter_3/#creating_a_configurable_product)。它们比单独的简单产品要复杂一些，但值得学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-03T10:30:51.087

要将图像分配给每个产品/颜色组合并在您的商店中显示该图像，请使用**Encoresky/CustomOptionimage**扩展访问此演示链接[http://mage.encoreskydev.com/custom-option-image](http://mage.encoreskydev.com/custom-option-image)

# javascript - 用js代码重定位文本

> ID：12205839
> 
> 赞同：1
> 
> 时间：2012-08-30T21:31:28.827
> 
> 标签：javascript, jquery

我想颠倒`25/0`字符串中单词（例如）的顺序。

如下例：

```
In Normal:        25/0 24/5 23/9 23/7 23/9
After Relocation: 23/9 23/7 23/9 24/5 25/0  // I want this my output 
```

如何通过 jQuery 或 javascript 来完成？
请告诉我以防万一[http://jsfiddle.net/](http://jsfiddle.net/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T21:34:23.177

See [http://jsfiddle.net/A8End/](http://jsfiddle.net/A8End/)

```
var text="25/0 24/5 23/9 23/7 23/9";
alert(text.split(' ').reverse().join(' ')); 
```

You can `split` the text in order to have an array. Then you can easily `reverse` it and `join` it to a string again.

# javascript - 如何使用 .get() 函数将从 XML 读取的值存储到本地对象的成员

> ID：12205840
> 
> 赞同：2
> 
> 时间：2012-08-30T21:31:28.460
> 
> 标签：javascript, jquery, xml

我认为这是我在 jQuery 和 javascript 中遇到的另一个技巧变量范围和 ajax 问题。

假设我有一个对象：

```
Container = function()
{
//CSS Style Paramaters:
    this.width = "";
    this.height = "";
    this.margin = "";
    this.margin_option = "";
    this.position = ""; 
} 
```

我有这个对象的一个​​方法，它应该从一个 xml 文件中读取一些 xml 数据并将它们存储到这个对象的成员中：

```
Container.prototype.readXML4Container =function()
{
            var self = this;
        $.get("assest/xml/layout.xml",function(xml)
        {
                  $(xml).find("body").each(function(){
                     self.width = ($(this).find("width").text());
                     self.height = ($(this).find("height").text());
                     self.margin = ($(this).find("margin").text());
                     //And more code like this.
        });
       });
} 
```

在这个函数之后，还有另一个函数需要调用它，并使用 .css() 应用 CSS 数据

```
Container.prototype.applyCSS = function()
{
    this.readXML4Container();

    $("#container").css({
        'width':this.width,
        'height':this.height,
        'position':this.position,
        'margin': this.margin
    });

} 
```

XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>

<root>
<body>
    <margin>0</margin>
    <padding>0</padding>
    <font-family>Trebuchet MS, sans-serif</font-family>
    <color>#666</color>
</body> 
<container>
    <width>1220px</width>
    <height>730px</height>
    <margin>0 auto</margin>
    <position>relative</position>
    <font-size>1.0em</font-size>
    <font-color>blue</font-color>
</container>

<Menubar>
    <width>660px</width>
    <height>58px</height>
    <position>absolute</position>
    <left>275px</left>  
</Menubar>

<Mainsection>
    <width>664px</width>
    <height>660px</height>
    <position>absolute</position>
    <position-left>270px</position-left>
    <position-top>60px</position-top>   
</Mainsection>
</root> 
```

我的问题是，该值似乎从未存储到成员变量中。当我创建该对象的实例并调用这两个函数时，CSS 样式永远不会应用于 HTML 中的 DOM。

但是，如果我不读取 XML 文件而只是在开始时给出一些值，它就可以正常工作。所以我知道我的 applyCSS 部分应该不错。问题应该在读取和存储阶段。

我试图解决这个问题超过一天......有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:55:08.920

好吧，走着瞧。你有大约3个问题。

1) `self.margin = ($(this).find("margin).text());`

您缺少围绕边距的结束双引号

2) 您的 XML 无效：`<position-left>275px</left>`

3) 最后一点：记住，您使用的是 AJAX。不要忘记 A 代表什么:)。您的函数执行此操作：

```
 this.readXML4Container();

        $("#container").css({
            'width':this.width,
            'height':this.height,
            'position':this.position,
            'margin': this.margin
        });

But readXML4Container is ASYNCHRONOUS. So you call your readXML method and then immediately try to apply the CSS, but the css hasn't been loaded yet from the server. 
```

你真的应该只有一个这样的功能：

```
 Container.prototype.readXML4Container =function()
        {
            var self = this;
            $.get("XMLFile1.xml",function(xml)
            {                
                $(xml).find("body").each(function () {

                    self.width = ($(this).find("width").text());
                    self.height = ($(this).find("height").text());
                    self.margin = ($(this).find("margin").text());
                });

                $("#container").css({
                    'width': self.width,
                    'height': self.height,
                    'position': self.position
                });
            });
        } 
```

当然，你还有其他问题，比如为什么你有两个 body 标签？只有最后一个适用。然后，当然，您的正文 XML 甚至没有“具有”宽度和高度的属性......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:50:28.597

我遇到过这个问题几次。我通常在设计 Javascript 类时略有不同，并且从未遇到过这种方法的范围问题。

下面的示例可以满足您的需求（使用一些虚拟数据，在虚拟 Ajax 请求和循环中满足范围问题）。它还创建了两个带有随机数据的对象，以测试它们是否没有静态存储在原型中。超时是为了保证Ajax请求在输出数据之前已经完成。[http://jsfiddle.net/wERTp/16/](http://jsfiddle.net/wERTp/16/)

```
var Container = function()
{
};

Container.prototype = {    
    width: '',
    height: '',
    margin: '',
    margin_option: '',
    position: '',

    readXML4Container: function()
    {
        $.get("", this.saveValues.bind(this));
    },

    saveValues: function(xml) {
        var self = this;
        var values = [{
            width: 10 + Math.random(),
            height: 10 + Math.random(),
            margin: 10 + Math.random(),
            margin_option: '',
            position: 'relative'
        }];
        $.each(values, function() {
            self.width = this.width;
            self.height = this.height;
            self.margin = this.margin;
            self.margin_option = this.margin_option;
            self.position = this.position;
        });
    },

    outputValues: function() {
        console.log(this.width, this.height, this.margin, this.margin_option, this.position);
    }
}

var container = new Container();
container.readXML4Container();
setTimeout(function() {
    container.outputValues();
}, 1000);

var container2 = new Container();
container2.readXML4Container();
setTimeout(function() {
    container2.outputValues();
}, 1000);​ 
```

# url - 用于屏蔽 XSS url 以进行测试的模式

> ID：12205841
> 
> 赞同：0
> 
> 时间：2012-08-30T21:31:33.357
> 
> 标签：url, xss, validation

我将允许用户在我的网站上设置带有链接的图像。例如个人资料图片和个人资料链接。

我不会让他们上传所述图片，但让他们提供一个我将插入到 img src 中的 url。

我想对有人可能会使用我的网站的最了解的 xss 模式进行基本检查，但事实是，我没有样本列表来检查我的函数是否有效。事实上，即使我编写了一个完全符合 RFC 的解析器来检查 URL 的各个方面，我仍然不知道我应该防范什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T07:55:29.800

[使用OWASP Zed 攻击代理](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project)(ZAP)对其进行扫描。

ZAP 是一个免费的开源安全工具，它非常擅长发现 XSS 漏洞。

西蒙（ZAP 项目负责人）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:41:34.217

我会做以下事情

*   检查 URI 是否以 http:// 或 https:// 开头
*   URI 在将 URI 打印到 img src 之前对其进行编码。

第一个是确保不允许使用 javascript:、vbscript: 等 URL。第二种是转义任何可能造成损坏的字符（如“、'、<、>等）。

仍然是一个很好的模式资源，虽然有点过时：[http](http://ha.ckers.org/xss.html) ://ha.ckers.org/xss.html 另一个很好的资源：[http ://html5sec.org](http://html5sec.org)

# android - Android 平板电脑和蓝牙 HFP

> ID：12205842
> 
> 赞同：0
> 
> 时间：2012-08-30T21:31:36.477
> 
> 标签：android, bluetooth, headset

我正在编写一个从蓝牙耳机录制音频的应用程序。我一直在测试我的 HTC Evo 4g LTE(4.0.3)。耳机配对和应用程序按预期工作。为了进一步测试，我正在尝试将蓝牙耳机连接到一些 Android 平板电脑。耳机配对很好，但随后无法连接。我没有收到错误对话框，但从我的配对设备列表中选择耳机没有响应。我的假设是，这两款设备的免提配置文件都已从这两款设备中删除，因为其中缺少手机。我测试过的设备包括 Asus Nexus 7 (4.1) 和 Motorola Xoom(4.0)。

考虑到我的假设是正确的，有没有办法用缺少的 HFP 蓝牙配置文件打包应用程序而不需要 root 访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T10:59:29.530

我不知道向设备添加蓝牙配置文件的方法。正如 zapl 指出的那样：我认为它必须得到特定的 android 设备的支持。
但是对于 Nexus 7，其中包含 HFP：http: [//support.google.com/nexus/bin/answer.py](http://support.google.com/nexus/bin/answer.py?hl=en&answer=2739735)

?hl=en&answer=2739735所以我认为您的问题不是由缺少 HFP 引起的。可能是由于此配置文件的角色不合适。该规范定义了两个不同的角色：Audio Gatewy (AG) 和免提单元 (HF)。您必须在设备上使用 HF 角色才能将其用作耳机。（[蓝牙免提配置文件](http://www.bluetooth.org/Building/HowTechnologyWorks/ProfilesAndProtocols/HFP.htm)） 不幸的是，当前的[Android API](http://source-android.frandroid.com/external/bluetooth/bluez/doc/hfp-api.txt)
不支持此角色...

# git - Git 将随机文件显示为克隆后修改；不能丢弃它们

> ID：12205846
> 
> 赞同：10
> 
> 时间：2012-08-30T21:32:14.427
> 
> 标签：git, github

在我的 macbook pro 上克隆某个 repo 后，我会立即看到在该 repo 中修改过的文件。我试过 git pull、git checkout、git reset，似乎没有什么能让这些所谓的修改过的文件消失。我已经使用 git 一段时间了，以前从未见过这种情况。可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T22:13:21.407

有一个配置文件将某些类型的源文件标记为文本，换行符将被转换。`.gitattributes`存储库的根目录中有一个文件，或者`~/.gitattributes`您的主目录中有一个全局文件。

你可以做两件事：

*   修改`.gitattributes`配置，使文件`text`不再被标记为
*   提交提议的更改，以便存储库与规范一致；我会推荐这个解决方案

我想说的目的是让 git 正确处理换行符，因此有人在使用 Windows CRLF endlines 提交了一些文件`.gitattributes` *之后*添加了配置，当这种情况发生时，git 不会自动修复已经检查过的现有文件在工作树中。但是一个新的克隆会将这些文件重新放入工作树并自动修复它们，因此下次您将工作树与索引进行比较时 git 会抱怨。

# variables - Repetier V0.70b firmware uploading to Printrboard

> ID：12205851
> 
> 赞同：1
> 
> 时间：2012-08-30T21:32:51.600
> 
> 标签：variables, upload, compiler-errors, arduino, firmware

I am new to the [RepRap](http://en.wikipedia.org/wiki/RepRap_Project) community, 3D printing in general, and the new [Printrbot PLUS](http://printrbot.com/shop/plus/). I am trying to update the firmware to Repetier's package as I would like to use their software and want as much compatibility as possible.

I've heard the Sprinter firmware works well on the Printrboard but considering the Repetier recently updated their package for the Printrboard as well, I'd like to give it a go.

I go to hit upload in Arduino 1.01 after changing the first configuration setting to 9 (for Printrboard) and then get these errors:

```
 In file included from Commands.cpp:23:
/Reptier.h: In function 'void extruder_unstep()':
Reptier.h:189: error: 'DIO34_WPORT' was not declared in this scope
Reptier.h:189: error: 'DIO34_PIN' was not declared in this scope
Reptier.h:189: error: 'DIO34_WPORT' was not declared in this scope
Reptier.h:189: error: 'DIO34_PIN' was not declared in this scope
/Reptier.h: In function 'void extruder_set_direction(byte)':
Reptier.h:212: error: 'DIO35_WPORT' was not declared in this scope
Reptier.h:212: error: 'DIO35_PIN' was not declared in this scope
Reptier.h:212: error: 'DIO35_WPORT' was not declared in this scope
Reptier.h:212: error: 'DIO35_PIN' was not declared in this scope
Reptier.h:214: error: 'DIO35_WPORT' was not declared in this scope
Reptier.h:214: error: 'DIO35_PIN' was not declared in this scope
Reptier.h:214: error: 'DIO35_WPORT' was not declared in this scope
Reptier.h:214: error: 'DIO35_PIN' was not declared in this scope 
```

This is all on the "Repetier.h" tab of the file stack which reads as follows.

```
 /*
    This file is part of Repetier-Firmware.

    Repetier-Firmware is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Foobar is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Foobar.  If not, see <http://www.gnu.org/licenses/>.

    This firmware is a nearly complete rewrite of the sprinter firmware
    by kliment (https://github.com/kliment/Sprinter)
    which based on Tonokip RepRap firmware rewrite based off of Hydra-mmm firmware.
*/

#if defined(ARDUINO) && ARDUINO >= 100
#include "Arduino.h"
#else
#include "WProgram.h"
#define COMPAT_PRE1
#endif
#include "gcode.h"
#include "fastio.h"
#ifdef SDSUPPORT
#include "Sd2Card.h"
#include "SdFat.h"
extern void initsd();
#endif
#define REPETIER_VERSION "0.71"

#define uint uint16_t
#define uint8 uint8_t
#define int8 int8_t
#define uint32 uint32_t
#define int32 int32_t

/*#if MOTHERBOARD==6 || MOTHERBOARD==62 || MOTHERBOARD==7
#if MOTHERBOARD!=7
#define SIMULATE_PWM
#endif
#define EXTRUDER_TIMER_VECTOR TIMER2_COMPA_vect
#define EXTRUDER_OCR OCR2A
#define EXTRUDER_TCCR TCCR2A
#define EXTRUDER_TIMSK TIMSK2
#define EXTRUDER_OCIE OCIE2A
#define PWM_TIMER_VECTOR TIMER2_COMPB_vect
#define PWM_OCR OCR2B
#define PWM_TCCR TCCR2B
#define PWM_TIMSK TIMSK2
#define PWM_OCIE OCIE2B
#else*/
#define EXTRUDER_TIMER_VECTOR TIMER0_COMPA_vect
#define EXTRUDER_OCR OCR0A
#define EXTRUDER_TCCR TCCR0A
#define EXTRUDER_TIMSK TIMSK0
#define EXTRUDER_OCIE OCIE0A
#define PWM_TIMER_VECTOR TIMER0_COMPB_vect
#define PWM_OCR OCR0B
#define PWM_TCCR TCCR0A
#define PWM_TIMSK TIMSK0
#define PWM_OCIE OCIE0B
//#endif

/** \brief Data to drive one extruder.

This structure contains all definitions for an extruder and all
current state variables, like current temperature, feeder position etc.
*/
typedef struct { // Size: 12*1 Byte+12*4 Byte+4*2Byte = 68 Byte
  byte id;
  long xOffset;
  long yOffset;
  float stepsPerMM; ///< Steps per mm.
  byte sensorType; ///< Type of temperature sensor.
  byte sensorPin; ///< Pin to read extruder temperature.
  byte enablePin; ///< Pin to enable extruder stepper motor.
//  byte directionPin; ///< Pin number to assign the direction.
//  byte stepPin; ///< Pin number for a step.
  byte enableOn;
//  byte invertDir; ///< 1 if the direction of the extruder should be inverted.
  float maxFeedrate;
  float maxAcceleration; ///< Maximum acceleration in mm/s^2.
  float maxStartFeedrate; ///< Maximum start feedrate in mm/s.
  long extrudePosition; ///< Current extruder position in steps.
  int currentTemperature; ///< Currenttemperature value read from sensor.
  int targetTemperature; ///< Target temperature value in units of sensor.
  int currentTemperatureC; ///< Current temperature in °C.
  int targetTemperatureC; ///< Target temperature in °C.
  long lastTemperatureUpdate; ///< Time in millis of the last temperature update.
  char heatManager; ///< How is temperature controled. 0 = on/off, 1 = PID-Control
  int watchPeriod; ///< Time in seconds, a M109 command will wait to stabalize temperature
#ifdef USE_ADVANCE
#ifdef ENABLE_QUADRATIC_ADVANCE
  float advanceK; ///< Koefficient for advance algorithm. 0 = off
#endif
  float advanceL;
#endif
 // byte output; ///< Output value 0 = off, 255=MAX
#ifdef TEMP_PID
  long tempIState; ///< Temp. var. for PID computation.
  byte pidDriveMax; ///< Used for windup in PID calculation.
  byte pidDriveMin; ///< Used for windup in PID calculation.
  long pidPGain; ///< Pgain (proportional gain) for PID temperature control [0,01 Units].
  long pidIGain; ///< Igain (integral) for PID temperature control [0,01 Units].
  long pidDGain;  ///< Dgain (damping) for PID temperature control [0,01 Units].
  byte pidMax; ///< Maximum PWM value, the heater should be set.
  long tempIStateLimitMax;
  long tempIStateLimitMin;
  byte tempPointer;
  int tempArray[8];
#endif
} Extruder;

extern const uint8 osAnalogInputChannels[] PROGMEM;
extern uint8 osAnalogInputCounter[ANALOG_INPUTS];
extern uint osAnalogInputBuildup[ANALOG_INPUTS];
extern uint8 osAnalogInputPos; // Current sampling position
extern volatile uint osAnalogInputValues[ANALOG_INPUTS];
extern byte pwm_pos[4]; // 0-2 = Heater 0-2 of extruder, 3 = Fan
extern int target_bed_celsius;
#if HEATED_BED_SENSOR_TYPE!=0
extern int current_bed_raw;
extern int target_bed_raw;
#endif
#ifdef USE_ADVANCE
#ifdef ENABLE_QUADRATIC_ADVANCE
extern int maxadv;
#endif
extern int maxadv2;
extern float maxadvspeed;
#endif

extern Extruder *current_extruder;
extern Extruder extruder[];
// Initalize extruder and heated bed related pins
extern void initExtruder();
extern void extruder_select(byte ext_num);
// Set current extruder position
//extern void extruder_set_position(float pos,bool relative);
// set the temperature of current extruder
extern void extruder_set_temperature(int temp_celsius,byte extr);
extern int extruder_get_temperature();
// Set temperature of heated bed
extern void heated_bed_set_temperature(int temp_celsius);
//extern long extruder_steps_to_position(float value,byte relative);
extern void extruder_set_direction(byte steps);
extern void extruder_disable();
extern byte heated_bed_output;
//#ifdef TEMP_PID
//extern byte current_extruder_out;
//#endif

/** \brief Sends the high-signal to the stepper for next extruder step.

Call this function only, if interrupts are disabled.
*/
inline void extruder_step() {
#if NUM_EXTRUDER==1

#else
  switch(current_extruder->id) {
  case 0:
    WRITE(EXT0_STEP_PIN,HIGH);
    break;
#ifdef EXT1_STEP_PIN
  case 1:
    WRITE(EXT1_STEP_PIN,HIGH);
    break;
#endif
#ifdef EXT2_STEP_PIN
  case 2:
    WRITE(EXT2_STEP_PIN,HIGH);
    break;
#endif
  }
#endif
}
/** \brief Sets stepper signal to low for current extruder.

Call this function only, if interrupts are disabled.
*/
inline void extruder_unstep() {
#if NUM_EXTRUDER==1
  WRITE(EXT0_STEP_PIN,LOW);
#else
  switch(current_extruder->id) {
  case 0:
    WRITE(EXT0_STEP_PIN,LOW);
    break;
#ifdef EXT1_STEP_PIN
  case 1:
    WRITE(EXT1_STEP_PIN,LOW);
    break;
#endif
#ifdef EXT2_STEP_PIN
  case 2:
    WRITE(EXT2_STEP_PIN,LOW);
    break;
#endif
  }
#endif
}
/** \brief Activates the extruder stepper and sets the direction. */
inline void extruder_set_direction(byte dir) {
#if NUM_EXTRUDER==1
  if(dir)
    WRITE(EXT0_DIR_PIN,!EXT0_INVERSE);
  else
    WRITE(EXT0_DIR_PIN,EXT0_INVERSE);
#else
  switch(current_extruder->id) {
  case 0:
  if(dir)
    WRITE(EXT0_DIR_PIN,!EXT0_INVERSE);
  else
    WRITE(EXT0_DIR_PIN,EXT0_INVERSE);
    break;
#ifdef EXT1_DIR_PIN
  case 1:
  if(dir)
    WRITE(EXT1_DIR_PIN,!EXT1_INVERSE);
  else
    WRITE(EXT1_DIR_PIN,EXT1_INVERSE);
    break;
#endif
#ifdef EXT2_DIR_PIN
  case 2:
  if(dir)
    WRITE(EXT2_DIR_PIN,!EXT2_INVERSE);
  else
    WRITE(EXT2_DIR_PIN,EXT2_INVERSE);
    break;
#endif
  }
#endif
}
inline void extruder_enable() {
#if NUM_EXTRUDER==1
#if EXT0_ENABLE_PIN>-1
    WRITE(EXT0_ENABLE_PIN,EXT0_ENABLE_ON );
#endif
#else
  if(current_extruder->enablePin > -1)
    digitalWrite(current_extruder->enablePin,current_extruder->enableOn);
#endif
}
extern void(* resetFunc) (void);
// Read a temperature and return its value in °C
// this high level method supports all known methods
extern int read_raw_temperature(byte type,byte pin);
extern int heated_bed_get_temperature();
// Convert a raw temperature value into °C
extern int conv_raw_temp(byte type,int raw_temp);
// Converts a temperture temp in °C into a raw value
// which can be compared with results of read_raw_temperature
extern int conv_temp_raw(byte type,int temp);
// Updates the temperature of all extruders and heated bed if it's time.
// Toggels the heater power if necessary.
extern void manage_temperatures();

extern byte manage_monitor;

void process_command(GCode *code);

void manage_inactivity(byte debug);

extern void wait_until_end_of_move();
extern void update_ramps_parameter();
extern void finishNextSegment();
extern void printPosition();
extern void change_feedrate_multiply(int factor); ///< Set feedrate multiplier
extern void set_fan_speed(int speed,bool wait); /// Set fan speed 0..255
extern void home_axis(bool xaxis,bool yaxis,bool zaxis); /// Home axis
extern byte get_coordinates(GCode *com);
extern void move_steps(long x,long y,long z,long e,float feedrate,bool waitEnd,bool check_endstop);
extern void queue_move(byte check_endstops,byte pathOptimize);
extern void linear_move(long steps_remaining[]);
extern inline void disable_x();
extern inline void disable_y();
extern inline void disable_z();
extern inline void enable_x();
extern inline void enable_y();
extern inline void enable_z();

extern void kill(byte only_steppers);

extern float axis_steps_per_unit[];
extern float inv_axis_steps_per_unit[];
extern float max_feedrate[];
extern float homing_feedrate[];
extern float max_start_speed_units_per_second[];
extern long max_acceleration_units_per_sq_second[];
extern long max_travel_acceleration_units_per_sq_second[];
extern unsigned long axis_steps_per_sqr_second[];
extern unsigned long axis_travel_steps_per_sqr_second[];
extern byte relative_mode;    ///< Determines absolute (false) or relative Coordinates (true).
extern byte relative_mode_e;  ///< Determines Absolute or Relative E Codes while in Absolute Coordinates mode. E is always relative in Relative Coordinates mode.

extern byte unit_inches;
extern unsigned long previous_millis_cmd;
extern unsigned long max_inactive_time;
extern unsigned long stepper_inactive_time;

extern void setupTimerInterrupt();

typedef struct { // RAM usage: 72 Byte
  byte flag0; // 1 = stepper disabled
#if USE_OPS==1 || defined(USE_ADVANCE)
  volatile int extruderStepsNeeded; ///< This many extruder steps are still needed, <0 = reverse steps needed.
//  float extruderSpeed;              ///< Extruder speed in mm/s.
  byte minExtruderSpeed;            ///< Timer delay for start extruder speed
  byte maxExtruderSpeed;            ///< Timer delay for end extruder speed
  byte extruderAccelerateDelay;     ///< delay between 2 speec increases
#endif
  long interval;                    ///< Last step duration in ticks.
#if USE_OPS==1
  bool filamentRetracted;           ///< Is the extruder filament retracted
#endif
  unsigned long timer;              ///< used for acceleration/deceleration timing
  unsigned long stepNumber;         ///< Step number in current move.
#ifdef USE_ADVANCE
#ifdef ENABLE_QUADRATIC_ADVANCE
  long advance_executed;             ///< Executed advance steps
#endif
  int advance_steps_set;
  unsigned int advance_lin_set;
#endif
  long currentPositionSteps[4];     ///< Position in steps from origin.
  long destinationSteps[4];         ///< Target position in steps.
#if USE_OPS==1
  int opsRetractSteps;              ///< Retract filament this much steps
  int opsPushbackSteps;             ///< Retract+extra distance for backslash
  float opsMinDistance;
  float opsRetractDistance;
  float opsRetractBackslash;
  byte opsMode;                     ///< OPS operation mode. 0 = Off, 1 = Classic, 2 = Fast
  float opsMoveAfter;               ///< Start move after opsModeAfter percent off full retract.
  int opsMoveAfterSteps;            ///< opsMoveAfter converted in steps (negative value!).
#endif
  long xMaxSteps;                   ///< For software endstops, limit of move in positive direction.
  long yMaxSteps;                   ///< For software endstops, limit of move in positive direction.
  long zMaxSteps;                   ///< For software endstops, limit of move in positive direction.
  float feedrate;                   ///< Last requested feedrate.
  int feedrateMultiply;             ///< Multiplier for feedrate in percent (factor 1 = 100)
  unsigned int extrudeMultiply;     ///< Flow multiplier in percdent (factor 1 = 100)
  float maxJerk;                    ///< Maximum allowed jerk in mm/s
  float maxZJerk;                   ///< Maximum allowed jerk in z direction in mm/s
  long offsetX;                     ///< X-offset for different extruder positions.
  long offsetY;                     ///< Y-offset for different extruder positions.
  unsigned int vMaxReached;       ///< MAximumu reached speed
  byte stepper_loops;
} PrinterState;
extern PrinterState printer_state;

/** Marks the first step of a new move */
#define FLAG_WARMUP 1
#define FLAG_ACCELERATING 2
#define FLAG_DECELERATING 4
#define FLAG_ACCELERATION_ENABLED 8
#define FLAG_CHECK_ENDSTOPS 16
#define FLAG_SKIP_ACCELERATING 32
#define FLAG_SKIP_DEACCELERATING 64
#define FLAG_BLOCKED 128

/** Are the step parameter computed */
#define FLAG_JOIN_STEPPARAMS_COMPUTED 1
/** The right speed is fixed. Don't check this block or any block to the left. */
#define FLAG_JOIN_END_FIXED 2
/** The left speed is fixed. Don't check left block. */
#define FLAG_JOIN_START_FIXED 4
/** Start filament retraction at move start */
#define FLAG_JOIN_START_RETRACT 8
/** Wait for filament pushback, before ending move */
#define FLAG_JOIN_END_RETRACT 16
/** Disable retract for this line */
#define FLAG_JOIN_NO_RETRACT 32
/** Wait for the extruder to finish it's up movement */
#define FLAG_JOIN_WAIT_EXTRUDER_UP 64
/** Wait for the extruder to finish it's down movement */
#define FLAG_JOIN_WAIT_EXTRUDER_DOWN 128
// Printing related data
typedef struct { // RAM usage: 24*4+15 = 111 Byte
  byte primaryAxis;
  byte flags;
  byte joinFlags;
  byte halfstep;                  ///< 0 = disabled, 1 = halfstep, 2 = fulstep
  byte dir;                       ///< Direction of movement. 1 = X+, 2 = Y+, 4= Z+, values can be combined.
  long delta[4];                  ///< Steps we want to move.
  long error[4];                  ///< Error calculation for Bresenham algorithm
  float speedX;                   ///< Speed in x direction at fullInterval in mm/s
  float speedY;                   ///< Speed in y direction at fullInterval in mm/s
  float speedZ;                   ///< Speed in z direction at fullInterval in mm/s
  float fullSpeed;                ///< Desired speed mm/s
  float acceleration;             ///< Real acceleration mm/s²
  float distance;
  float startFactor;
  float endFactor;
  unsigned long fullInterval;     ///< interval at full speed in ticks/step.
  unsigned long stepsRemaining;   ///< Remaining steps, until move is finished
  unsigned int accelSteps;        ///< How much steps does it take, to reach the plateau.
  unsigned int decelSteps;        ///< How much steps does it take, to reach the end speed.
  unsigned long accelerationPrim; ///< Acceleration along primary axis
  unsigned long facceleration;    ///< accelerationPrim*262144/F_CPU
  unsigned int vMax;              ///< Maximum reached speed in steps/s.
  unsigned int vStart;            ///< Starting speed in steps/s.
  unsigned int vEnd;              ///< End speed in steps/s
#ifdef USE_ADVANCE
#ifdef ENABLE_QUADRATIC_ADVANCE
  long advanceRate;               ///< Advance steps at full speed
  long advanceFull;               ///< Maximum advance at fullInterval [steps*65536]
  long advanceStart;
  long advanceEnd;
#endif
  unsigned int advanceL;         ///< Recomputated L value
#endif
#if USE_OPS==1
  long opsReverseSteps;           ///< How many steps are needed to reverse retracted filament at full speed
#endif
#ifdef DEBUG_STEPCOUNT
  long totalStepsRemaining;
#endif
} PrintLine;

extern PrintLine lines[];
extern byte lines_write_pos; // Position where we write the next cached line move
extern byte lines_pos; // Position for executing line movement
extern volatile byte lines_count; // Number of lines cached 0 = nothing to do
extern byte printmoveSeen;
extern long baudrate;
#ifdef SIMULATE_FAN_PWM
extern int fan_speed;
#endif
#if OS_ANALOG_INPUTS>0
// Get last result for pin x
extern volatile uint osAnalogInputValues[OS_ANALOG_INPUTS];
#endif
#define BEGIN_INTERRUPT_PROTECTED {byte sreg=SREG;__asm volatile( "cli" ::: "memory" );
#define END_INTERRUPT_PROTECTED SREG=sreg;}
#define ESCAPE_INTERRUPT_PROTECTED SREG=sreg;

#define SECONDS_TO_TICKS(s) (unsigned long)(s*(float)F_CPU)
extern long CPUDivU2(unsigned int divisor);

extern byte counter_periodical;
extern volatile byte execute_periodical;
extern byte counter_250ms;
extern void write_monitor();
extern void check_periodical();
#define CELSIUS_EXTRA_BITS 3
#define ANALOG_REDUCE_BITS 0
#define ANALOG_REDUCE_FACTOR 1

#ifdef SDSUPPORT
extern Sd2Card card; // ~14 Byte
extern SdVolume volume;
extern SdFile root;
extern SdFile file;
extern uint32_t filesize;
extern uint32_t sdpos;
extern bool sdmode;
extern bool sdactive;
extern bool savetosd;
extern int16_t n;

#endif 
```

I don't know what to declare as those variables, but I know they are variables that need to be defined. How can I fix this problem?

# python - Lack of ROLLBACK within TestCase causes unique contraint violation in multi-db django app

> ID：12205855
> 
> 赞同：6
> 
> 时间：2012-08-30T21:33:16.300
> 
> 标签：python, django, unit-testing, factory-boy

I'm just getting started with the [factory_boy](https://github.com/dnerdy/factory_boy) django library for test factories, and having an issue with a duplicate key constraint violation.

## test_member_programme.py

```
from datetime import date, timedelta

from django.test import TestCase

from app.test.factories import MemberFactory, ProgrammeFactory
from app.models.member_programme import MemberProgramme

class MemberProgrammeTestCase(TestCase):

    def member_programme(self):
        yesterday = date.today() - timedelta(days=1)
        return MemberProgramme.objects.create(
                mem=MemberFactory(),
                prg=ProgrammeFactory(),
                date_registered=yesterday)

    def date_registered_should_be_defined_test(self):
        # This test passes
        memprg = self.member_programme()
        assert hasattr(memprg, 'date_registered')

    def date_registered_should_be_in_past_test(self):
        # This test fails
        memprg = self.member_programme()
        assert memprg.date_registered < date.today() 
```

## factories.py

```
class CountryOfOriginFactory(factory.Factory):
    """ Factory class for app.models.CountryOfOrigin
    """
    FACTORY_FOR = CountryOfOrigin

    code = 'UK'
    the_country = 'United Kingdom'

class MemberFactory(factory.Factory):
    """ Factory class for app.models.Member
    """
    FACTORY_FOR = Member

    first_name = 'Test'
    surname = 'User'
    sex = 'M'
    date_of_birth = datetime.date(1990, 1, 1)
    origin = factory.LazyAttribute(lambda a: CountryOfOriginFactory()) 
```

* * *

When running the first test passes successfully, but the second fails with the following error:

```
IntegrityError: duplicate key value violates unique constraint "country_of_origin_code_key" 
```

My understanding is that every TestCase should run within a transaction, yet the creation of the foreign key does not appear to have rolled back before the second test runs. Clearly I'm doing something fundamentally wrong, but I'm a bit stumped! Thanks!

* * *

I've tracked down the problem, but unfortunately don't know how to resolve it. The issue is that ROLLBACKs **are** occurring, but only on one database (this app has 2 databases). For legacy reasons, we have a separate database for django auth, flatpages etc and another db for our app.

```
dba test_app 127.0.0.1 2012-09-04 21:51:50.806 UTC LOG:  duration: 0.038 ms  statement: BEGIN; SET TRANSACTION ISOLATION LEVEL READ COMMITTED
dba test_app 127.0.0.1 2012-09-04 21:51:50.808 UTC LOG:  duration: 0.903 ms  statement: INSERT INTO "member_programme" ("mem_id", "prgm_id", "date_registered", "date_completed", "ordinality") VALUES (1, 1, E'2012-09-04', NULL, 1)
dba test_app 127.0.0.1 2012-09-04 21:51:50.808 UTC LOG:  duration: 0.150 ms  statement: SELECT CURRVAL(pg_get_serial_sequence('"member_programme"','id'))
dba test_app 127.0.0.1 2012-09-04 21:51:50.810 UTC LOG:  duration: 1.796 ms  statement: COMMIT
dba test_app_django 127.0.0.1 2012-09-04 21:51:50.811 UTC LOG:  duration: 0.056 ms  statement: ROLLBACK <---- ROLLBACK ON DJANGO DB ONLY
dba test_app_django 127.0.0.1 2012-09-04 21:51:50.814 UTC LOG:  disconnection: session time: 0:00:21.005 user=dba database=test_app_django host=127.0.0.1 port=60355
dba test_app 127.0.0.1 2012-09-04 21:51:50.818 UTC LOG:  disconnection: session time: 0:00:04.751 user=dba database=test_app host=127.0.0.1 port=60357
dba test_app 127.0.0.1 2012-09-04 21:54:00.796 UTC LOG:  connection authorized: user=dba database=test_app
dba test_app 127.0.0.1 2012-09-04 21:54:00.802 UTC LOG:  duration: 0.243 ms  statement: SET DATESTYLE TO 'ISO'
dba test_app 127.0.0.1 2012-09-04 21:54:00.802 UTC LOG:  duration: 0.156 ms  statement: SHOW client_encoding
dba test_app 127.0.0.1 2012-09-04 21:54:00.803 UTC LOG:  duration: 0.047 ms  statement: SHOW default_transaction_isolation
dba test_app 127.0.0.1 2012-09-04 21:54:00.803 UTC LOG:  duration: 0.068 ms  statement: BEGIN; SET TRANSACTION ISOLATION LEVEL READ COMMITTED
dba test_app 127.0.0.1 2012-09-04 21:54:00.804 UTC LOG:  duration: 0.410 ms  statement: SET TIME ZONE E'Pacific/Auckland'
dba test_app 127.0.0.1 2012-09-04 21:54:00.805 UTC ERROR:  duplicate key value violates unique constraint "country_of_origin_code_key" 
```

* * *

Someone with a similar problem [here](https://stackoverflow.com/questions/10121485/django-testcase-not-using-transactions-on-secondary-database).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:23:53.427

Django从 1.2**开始**就[支持对多个数据库进行测试！](https://docs.djangoproject.com/en/1.2/topics/testing/#django.test.TestCase.multi_db)

将以下属性添加到我的 TestCase 解决了该问题：

```
multi_db = True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T03:11:21.877

哈！我想我在重新阅读您的问题后找到了它。

您的工厂类`origin`在构建期间定义为其默认值的一部分。但是我们没有在设置中传递任何值，因此是增量。因此，要解决此问题，可以执行以下操作：

**工厂班**

```
class CountryOfOriginFactory(factory.Factory):
    """ Factory class for app.models.CountryOfOrigin
    """
    FACTORY_FOR = CountryOfOrigin

    code = 'UK'
    the_country = 'United Kingdom'

class MemberFactory(factory.Factory):
    """ Factory class for app.models.Member
    """
    FACTORY_FOR = Member

    first_name = 'Test'
    surname = 'User'
    sex = 'M'
    date_of_birth = datetime.date(1990, 1, 1)
    origin = factory.LazyAttribute(lambda a: CountryOfOriginFactory())

class MemberProgramme(factory.Factory):
    FACTORY_FOR = MemberProgramme

    mem = factory.LazyAttribute(lambda a: MemberFactory())
    prg = factory.LazyAttribute(lambda a: ProgrammeFactory())
    date_registered = date.today() - timedelta(days=1) 
```

**测试**

```
class MemberProgrammeTestCase(TestCase):

    def setUp(self):
        self.prog = ProgrammeFactory()
        self.country_of_origin = CountryOfOriginFactory()
        self.member = MemberFactory(origin=self.country_of_origin)
        self.member_programme = MemberProgramme(mem=self.mem, prg=self.prog)

    def date_registered_should_be_defined_test(self):
        # This test passes
        memprg = self.member_programme
        assert hasattr(memprg, 'date_registered')

    def date_registered_should_be_in_past_test(self):
        # This test fails
        memprg = self.member_programme
        assert memprg.date_registered < date.today() 
```

# teechart - Exporting a teechart chart to stream

> ID：12205856
> 
> 赞同：0
> 
> 时间：2012-08-30T21:33:20.113
> 
> 标签：teechart

I want to save a image to file and the documentation mentions ImageExportFormat method: Chart1.getExport().getImage().getJPEG().save(javax.imageio.stream.ImageOutputStream ios)

Doco: [http://www.steema.com/files/public/teechart/java/v1/docs/JavaDoc/com/steema/teechart/exports/ImageExportFormat.html](http://www.steema.com/files/public/teechart/java/v1/docs/JavaDoc/com/steema/teechart/exports/ImageExportFormat.html)

This method is not recognised by my code. Has this been removed ? Is there an alternate way I can do this via a stream?

Regards, Clayton

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:07:17.283

下面的示例显示了如何在 Swing 中导出为 jpeg 文件。可以本机使用流而不是使用“文件”。

```
public void save() throws IOException {

    Image img = chart1.image(chart1.getWidth(), chart1.getHeight());
    RenderedImage rendImage = (RenderedImage) img;
    Iterator iter = ImageIO.getImageWritersByFormatName("jpg");

    File outfile = new File("c:\\output\\testjavaChart.jpg");
    ImageOutputStream ios = ImageIO.createImageOutputStream(outfile);

    ImageWriter writer = (ImageWriter) iter.next();

    ImageWriteParam format = new javax.imageio.plugins.jpeg.JPEGImageWriteParam(java.util.Locale.getDefault());

    writer.setOutput(ios);
    // Write the image
    writer.write(null, new IIOImage(rendImage, null, null), format);

    // Cleanup
    ios.flush();
    ios.close();
    writer.dispose();
} 
```

如果您正在使用 SWT，请随时告诉我们。

# android - Android Theme Panel whole width

> ID：12205857
> 
> 赞同：1
> 
> 时间：2012-08-30T21:33:24.320
> 
> 标签：android, xml, width, panel

I want an activity to take the whole screen's width but not the screen's height. and, I want to see the activity that is below.

I use this in the manifest :

```
<activity
        android:name="activities.Dialoger"
        android:label="@string/app_name"
        android:launchMode="singleTop"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Panel"/> 
```

But, the "dialoger" doesn't use the whole width even if I wrote this in the XML file :

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/semi_transparent"
    android:gravity="center"
    android:orientation="vertical"> 
```

So, how the activity can take the whole width?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:40:39.313

没关系。

我找到了解决方案。在清单中：

```
android:theme="@android:style/Theme.Panel" 
```

在 XML 中：

```
android:minWidth="400dp" 
```

# redis - PooledRedisClientManager throws with Appharbor Redis URL

> ID：12205858
> 
> 赞同：2
> 
> 时间：2012-08-30T21:33:25.580
> 
> 标签：redis, servicestack, appharbor

I am trying out Redis on Appharbor in an MVC4 application. I am using the [ServiceStack C# client for Redis](https://github.com/ServiceStack/ServiceStack.Redis). Everything was working when using the `RedisClient` from `ServiceStack.Redis`. However, because I only plan to use Redis for caching, I attempted to wire up the `ICacheClient` that ServiceStack provides as a wrapper. Here is my StructureMap configuration ([https://github.com/ServiceStack/ServiceStack/wiki/Caching](https://github.com/ServiceStack/ServiceStack/wiki/Caching)):

```
x.For<IRedisClientsManager>().Use(() => new PooledRedisClientManager(redisUrl));
x.For<ICacheClient>().Use(c => c.GetInstance<IRedisClientsManager>().GetCacheClient()); 
```

My problem is that the `PooledRedisClientManager` is throwing error, "`input string was not in a correct format`" when I use the Redis-to-Go URL provided by Appharbor. Here is what that looks like:

```
redis://redistogo-appharbor:abunchofrandomcharacters@drum.redistogo.com:9081/ 
```

If I replace the Redis-to-Go URL with `localhost:5051` everything works. What am I missing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:11:57.310

前缀 a`redis://`不是任何已知的 redis 约定 - 它必须是 RedisToGo 或 AppHarbor 约定。

ServiceStack 的 C# RedisClient 支持标准的“password@host:port”约定，例如：

```
container.Register(c => new PooledRedisClientManager(
    "redistogo-appharbor:abunchofrandomcharacters@drum.redistogo.com:9081"
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T21:09:54.790

经过一些试验和错误，这可以工作。

```
string redisUrl = ConfigurationManager.AppSettings["REDISTOGO_URL"].Replace("redis://",    "").Replace("redistogo:","").Replace("/", "");
ControllerBuilder.Current.SetControllerFactory(new FunqControllerFactory(container));
SetConfig(new HostConfig{HandlerFactoryPath = "api"});
container.Register<IRedisClientsManager>(c => new PooledRedisClientManager(redisUrl));
container.Register<IDbRepository>(r => new DbRepository(r.Resolve<IRedisClientsManager>())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T04:42:47.097

像这样的东西对我有用：

```
container.Register(c => new PooledRedisClientManager(
    @"abunchofrandomcharacters@drum.redistogo.com:9081"
)); 
```

# javascript - Is it possible to filter extjs charts?

> ID：12205859
> 
> 赞同：0
> 
> 时间：2012-08-30T21:33:32.170
> 
> 标签：javascript, charts, extjs4, extjs

Here's an example: I have a bar chart representing the status of my runs. I would like to make some sort of button or filter... so that I could change the range of the date. Ex: 1 day, 7 days, 30 days... etc. Is this even possible with an extjs chart? With grids it is, but I'm thinking something similar just with a chart. Something so that upon user selection, it sends the new date and changes the query.

Opinions, examples?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:57:57.733

是的，它将以完全相同的方式工作。只需在商店中调用适当的方法（排序、过滤、加载），图表就会更新。

# android - Android, Flurry, and endTimedEvent

> ID：12205860
> 
> 赞同：1
> 
> 时间：2012-08-30T21:33:34.393
> 
> 标签：android, flurry

The Flurry SDK for iOS has a method `[Flurry endTimedEvent:@"EVENT_NAME" withParameters:YOUR_NSDictionary]`. Is there an equivalent way to implement this functionality in Android?

I'm aware that you can *start* a timed event with parameters using `FlurryAgent.logEvent("EVENT_NAME", myDictionary, true)`, but I'd like to update the values in the dictionary before ending the event.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:21:13.560

Android SDK 目前不支持此功能。我已经记下来了，谢谢你的建议。

（免责声明：我在 Flurry 开发 Android SDK）

# php - PHP runtime type checking

> ID：12205861
> 
> 赞同：0
> 
> 时间：2012-08-30T21:33:34.623
> 
> 标签：php

I am trying to figure out the order in which PHP check types/object during runtime. So I can become a better coder. Thanks

Which type do php check first. Does it validate if a object is Boolean first? null? array?

which faster:

```
if (ID != null)

if (ID !== false)

if (ID == 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:35:52.263

这些是微优化。你的时间会花在更好地优化其他东西上。

我不确定这是否有任何比较，但请查看[http://www.phpbench.com](http://www.phpbench.com)。

此外，您可以查看[http://php.net/manual/en/types.comparisons.php](http://php.net/manual/en/types.comparisons.php)和 [http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)，尽管它们没有给你基准。

同样，您的时间可能会花在优化其他内容上。

# java - OpenGL (LWJGL+SlickUTIL) - How to cut the texture at specific coords

> ID：12205864
> 
> 赞同：0
> 
> 时间：2012-08-30T21:34:06.173
> 
> 标签：java, opengl, lwjgl

I have a 512x512 png image. It is loaded into a texture using SlickUtil, but I cannot figure out how to cut a specific quad from the texture to bind to my glQuad.

Its like a sprite sheet, where I could cut specific images from there.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:23:15.313

只需使用 OpenGL 纹理坐标即可。在旧的 GL 中，这将是：

```
glBegin (GL_QUADS);
  glTexCoord2f (0.0, 0.5); glVertex2f (0, 0);
  glTexCoord2f (0.5, 0.5); glVertex2f (1, 0);
  glTexCoord2f (0.5, 1.0); glVertex2f (1, 1);
  glTexCoord2f (0.0, 1.0); glVertex2f (0, 1);
glEnd (); 
```

这将使用图像的左上四分之一。

# php - Creation paging for multiple queries

> ID：12205870
> 
> 赞同：0
> 
> 时间：2012-08-30T21:34:27.077
> 
> 标签：php, mysql, database

I have 7 queries different and I use this code for merge query and sort query:

```
$array= array_merge($aPhotos, $aVideos, $aMusics, $aSongs, $aBlogs, $aPolls, $aQuizzes);

foreach ($arry as $k => $v) {   
 $sort[$k] = $v[$sortNode];
}

array_multisort($sort, SORT_DESC, $array); 
```

Now I want create paginator for final array $array

I use on each query the same LIMIT, example LIMIT 0, 10

Sometimes the query return 7 rows, other 10 rows, or 0 rows.

Each query return different number of query.

All work fine with my paginator when the query returned is 70 (7*10)

Paginator don't work when rows is different.

My question is how to create a paginator in this case.

**The best solution is use UNION!**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:43:58.493

我从不尝试对多个查询进行分页。我知道 7 个查询很多，但我认为花点时间弄清楚如何将它们组合成一个查询是值得的。MySQL 有一些强大的功能，根据我的经验，我经常对我可以通过单个查询完成的事情感到惊讶。

# wcf - Can you configure default settings for the XmlWriter used by WCF?

> ID：12205872
> 
> 赞同：1
> 
> 时间：2012-08-30T21:34:31.897
> 
> 标签：wcf, xmlwriter

Is there any way to configure the default XmlWriter used by WCF service with DataContractSerializer when serializing data?

Out of the box WCF service using DataContractSerializer is losing the new lines (\r\n).

**[Edit:** I apologize for the confusion. Out of the box WCF DOES NOT lose the new lines.**]**

I am able to make XmlWriter encode the new lines to `&#xD;` by using XmlWriterSettings (NewLineHandling.Entitize), but I want to make WCF behave the same way when serialize my object.

```
public string Serialize<T>(T object)
  {
     var serializer = new DataContractSerializer(typeof(T));
     using (var stringWriter = new StringWriter())
     {
       var settings = new XmlWriterSettings { NewLineHandling = NewLineHandling.Entitize };
       using (var xmlWriter = XmlWriter.Create(stringWriter, settings))
       {
          serializer.WriteObject(xmlWriter, object);
          string xml = stringWriter.ToString();
          return xml;
       }
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:56:32.027

如果您想使用不同的`XmlWriter`，则需要使用自定义消息编码器。[http://msdn.microsoft.com/en-us/library/ms751486.aspx](http://msdn.microsoft.com/en-us/library/ms751486.aspx)上的示例显示了如何编写一个。

但我从未见过 WCF 丢失`\r\n`字符 - 它正确地将 in 实体化`\r`，`&#XD;`至少在我检查的所有时间。当我运行下面的代码时，它显示正确返回的字符：

```
public class StackOverflow_12205872
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        string Echo(string text);
    }
    public class Service : ITest
    {
        public string Echo(string text)
        {
            return text;
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "");
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        ITest proxy = factory.CreateChannel();
        string str = proxy.Echo("Hello\r\nworld");
        Console.WriteLine(str);
        Console.WriteLine(str[5] == '\r' && str[6] == '\n');

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

Fiddler 显示正在发送此请求：

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Header></s:Header><s:Body><Echo xmlns="http://tempuri.org/"><text>Hello&#xD;
world</text></Echo></s:Body></s:Envelope> 
```

响应还包含实体化的 CR 字符。您能否分享有关您的配置（包括绑定）的更多详细信息？

# java - 替换 out.println 中的回车和换行？

> ID：12205873
> 
> 赞同：0
> 
> 时间：2012-08-30T21:34:34.043
> 
> 标签：java, string, escaping, carriage-return

我是一名新手编码员，我正在使用以下代码打印一组图像关键字并输入“|” 它们之间。

```
<% Set allKeywords = new HashSet();
for (AlbumObject ao : currentObjects) {
XmpManager mgr = ao.getXmpManager();
if (mgr != null) {
allKeywords.addAll(mgr.getKeywordSet());    
  }
}
//get the Iterator
Iterator itr = allKeywords.iterator();
while(itr.hasNext()){
  String str = itr.next();
out.println(str +"|");   
} %> 
```

我希望输出是这样的：

```
red|blue|green|yellow 
```

但它打印出来：

```
red|
blue|
green|
yellow 
```

这破坏了我的代码。我试过这个：

```
str.replaceAll("\n", "");  
str.replaceAll("\r", ""); 
```

和

```
str.replaceAll("(?:\\n|\\r)", ""); 
```

没运气。我真的很感激一些帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:36:29.543

改用就好[`out.print`](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html#print%28java.lang.String%29)了。这样您就不必与不需要的换行符抗衡。

# sql - 如何使用 SQL 设置列的排序规则？

> ID：12205881
> 
> 赞同：24
> 
> 时间：2012-08-30T21:35:00.860
> 
> 标签：sql, sql-server, collation

最初，我在本地计算机上创建了我的 SQL Server 数据库。我将其排序规则设置为`Latin1_General_CI_AI`，一切正常。当我将完成的工作移到托管 SQL Server 的 Web 上时，我遇到了问题：他们使用不同的数据库排序规则。那我现在能做什么？

更具体地说，我需要`Latin1_General_CI_AI`，但他们有`Czech_CI_AS`。在比较捷克语中的字符串时，这两者有很大不同（令人惊讶的是，我需要 latin1 通用语，而不是捷克语，才能获得正确的结果。）

当我尝试更改数据库的排序规则时，服务器抱怨说我没有这样做的用户权限。我试图联系支持台，但没有成功。我可以帮助自己吗？

我知道可能每个单个表列都可以有自己的排序规则，所以也许我应该将所有字符串列设置为`Latin1_CI_AI`. 但我不知道该怎么做。我只有对数据库的 SQL 访问权限（不幸的是没有 SQL Server Management Studio）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-30T22:16:07.663

更改数据库的排序规则

```
ALTER DATABASE MyDataBase COLLATE [NewCollation] 
```

更改列的排序规则

```
ALTER TABLE MyTable ALTER COLUMN Column1 [TYPE] COLLATE [NewCollation] 
```

但是对于何时可以执行此操作有许多限制，非常值得注意的是，如果在任何索引中使用该列，则此操作将被拒绝。
在某些情况下，您可以在 SSMS 中做更多事情。
语法文档列出了限制：

*   [https://docs.microsoft.com/en-us/sql/t-sql/statements/alter-table-transact-sql?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/t-sql/statements/alter-table-transact-sql?view=sql-server-2017)
*   [https://docs.microsoft.com/en-us/sql/t-sql/statements/collat​​ions?view=sql-server-2017](https://docs.microsoft.com/en-us/sql/t-sql/statements/collations?view=sql-server-2017)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-12T12:59:38.073

我尝试了这段代码，它对我有用：

```
ALTER TABLE dbo.MyTable 
ALTER COLUMN CharCol VARCHAR(50) COLLATE Latin1_General_100_CI_AI_SC_UTF8 
```

参考： [https ://docs.microsoft.com/en-us/sql/relational-databases/collat​​ions/set-or-change-the-column-collat​​ion?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/relational-databases/collations/set-or-change-the-column-collation?view=sql-server-ver15)

# javascript - 空白页上的书签

> ID：12205883
> 
> 赞同：3
> 
> 时间：2012-08-30T21:35:09.893
> 
> 标签：javascript, bookmarklet, window.open

我编写了一个简单的书签，只需单击一下即可打开多个网页：

```
javascript:(function(){window.open("http://www.w3schools.com");window.open("http://www.google.com");window.open("http://www.yahoo.com");})(); 
```

我无法打开浏览器并立即单击它，但是除非窗口中已经加载了页面，否则小书签将不起作用。我更喜欢将浏览器主页设置为“空白”以提高速度。有没有办法让这个小书签在没有加载页面的情况下执行？

另外，如果确实加载了某些内容，我希望小书签替换窗口中加载的任何页面。目前，它打开了 3 个新标签页。我已经在第一个 window.open 上尝试了“name”属性的“_self”和“_parent”值，但它似乎不起作用。我可能没有正确格式化它。

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:46:09.500

无法在任何页面中打开书签。

相反，您可以尝试将您的主页设置为类似`data:text/html,Welcome!`（是的，它是一个有效的 URL）。

要在同一选项卡中打开页面，请键入：

```
location.href='http://www.w3schools.com' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:20:57.730

我遇到了同样的问题，并从互联网上了解到，如果你去你的 about:config，搜索**browser.newtab.url**并将其更改为**about:blank**而不是默认的**about:newtab**你的 javascript 书签应该可以工作（只是试过了，它的工作原理！）。这应该比发送 data:text/html 消息更干净（无论如何，即使您设置了主页，它也不适用于每个新选项卡，只有一次用于新窗口）

# javascript - 如何从 window.location 中提取哈希子字符串值并将它们写入 HTML？

> ID：12205884
> 
> 赞同：1
> 
> 时间：2012-08-30T21:35:11.357
> 
> 标签：javascript, query-string, substring, window.location, url-parameters

我正在尝试**从 window.location 提取哈希子字符串值并将它们写入 HTML 以供用户查看**，其 URL 语法不允许`?`用作查询字符串分隔符。

所以我正在使用这个简单的页面：

```
<html>

<input type="button" id="test" value="Test" />
<!-- input buton is here just to test the script -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script>
$(function() {
    $('#test').click(function() {
        window.location = (window.location);
        GetURLParameter('source');  
    });
});

function GetURLParameter(sParam) {
    var sPageURL = window.location.hash.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            alert(sParameterName[1]);
            return sParameterName[1];
        }
    }
} 
</script>

</html> 
```

我使用如下所示的 URL 调用页面，即客户端 window.location：

```
http://example.com/pagename.html#source=FOO&medium=BAR&campaign=FRED 
```

我想在页面中写入 FOO、BAR、FRED，以便用户可以看到。

（注意`?`在 URL 中没有作为查询字符串分隔符，只是`#`）

...单击输入按钮时，我收到一个成功的警报（如预期的那样），显示来自 URL 的源“FOO”。伟大的。

But **how do I get the other two SParamaterNames, and then how do I write them into the page as HTML** for the user to see, rather than return an alert?

* * *

**UPDATE UPDATE UPDATE** (below)

Thanks, @sam-baker!! ... Great answer. I used your first example, but changed the first two lines in your code to `$(window).load(function() {` so that the script runs onload, which was my intent.

So, I am still using this same URL:

```
http://example.com/pagename.html#source=FOO&medium=BAR&campaign=FRED 
```

But I want to insert the hash substring values into hardcoded HTML, like this:

```
<body>
<span class="style1">$need_source_value_here</span><br />
<span class="style1">$need_medium_value_here</span><br />
<span class="style3">$need_campaign_value_here</span><br /> 
```

I will style each value individually, by hardcoding span or div styles into the HTML.

* * *

**UPDATE UPDATE UPDATE**

**Here's the solution:**

Hit the following simple page in the code example bellow with this URL syntax, and it will output the substring vars to the user, onload, wherever you want them on the page.

```
http://example.com/pagename.html#dyntext=FOO+MAN+CHU&dynterm=BAR+HOPPING&dynimage=FRED+IS+DEAD

<html>
<body>

<span id="dyntext-span" style="font-weight: bold;"></span><br />
<span id="dynterm-span" style="font-style: italic;"></span><br />
<span id="dynimage-span" style="text-decoration: underline;"></span><br />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script>
$(document).ready(function() {
        var tags = ["dyntext", "dynterm", "dynimage"];
        for (var i = 0; i < tags.length; ++i) {
            var param = GetURLParameter(tags[i]);
            if (param) {
                var dyntext = GetURLParameter('dyntext');
                var dynterm = GetURLParameter('dynterm');
                var dynimage = GetURLParameter('dynimage');
            }
        }

        var elem = document.getElementById("dyntext-span");
        var text = document.createTextNode(dyntext);
        elem.appendChild(text);
        var elem = document.getElementById("dynterm-span");
        var text = document.createTextNode(dynterm);
        elem.appendChild(text);
        var elem = document.getElementById("dynimage-span");
        var text = document.createTextNode(dynimage);
        elem.appendChild(text);     
});

function GetURLParameter(sParam) {
    var sPageURL = window.location.hash.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    }
}

</script>

</body>
</html> 
```

Had some crossbroswer issues because `innerText` is not supported by Firefox, did not want to deal with cross-browser fallback to `textContent`, etc, so just walked DOM tree and created text nodes, replacing the `+` unicode character with space. Hope this is useful to you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:26:24.707

You're only requesting the first of the 3 parameters using:

```
GetURLParameter('source'); 
```

If you want all 3 parameters and you know the names, you can use:

```
var source = GetURLParameter('source');
var medium = GetURLParameter('medium');
var campaign = GetURLParameter('campaign'); 
```

To add those vars to the page, you can insert them in divs like this:

```
<input type="button" id="test" value="Test" />
<!-- input buton is here just to test the script -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script>
$(function() {
    $('#test').click(function() {
        // Iterate through a known list of tags
        var tags = ["source", "medium", "campaign"];
        for (var i = 0; i < tags.length; ++i) {
            var param = GetURLParameter(tags[i]);
            if (param) {
                var div = document.createElement('div');
                div.innerText = param;
                div.className = "query-string-param";
                document.body.appendChild(div);
            }
        }
    });
});

function GetURLParameter(sParam) {
    var sPageURL = window.location.hash.substring(1);

    console.log(sPageURL);

    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    }
} 
</script>

</html> 
```

That version queries each of the 3 tags and creates a new div in the page for that tag with the tag's value as the content.

It also adds a CSS class, query-string-param to those divs so that you can style the text - presumably you'll want to do that, and add more HTML to each div since it's not clear why that text is displayed.

If you don't know the query string keys upfront (source, medium and campaign), you could use a function I created, GetAllURLParameters that returns an array of objects with both the key ("source") and the value ("FOO") for each param.

That would look like this:

```
<input type="button" id="test" value="Test" />
<!-- input buton is here just to test the script -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

<script>
$(function() {
    $('#test').click(function() {
        // Iterate through a known list of tags
        var params = GetAllURLParameters();
        for (var i = 0; i < params.length; ++i) {
            var param = params[i];
            var div = document.createElement('div');
            div.innerText = "Value of param '" + param.key + "' is '" + param.value + "'";
            div.className = "query-string-param";
            document.body.appendChild(div);
        }
    });
});

function GetURLParameter(sParam) {
    var sPageURL = window.location.hash.substring(1);

    console.log(sPageURL);

    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) {
            return sParameterName[1];
        }
    }
} 

function GetAllURLParameters() {
    var sPageURL = window.location.hash.substring(1);
    var params = [];
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        params.push({
            key: sParameterName[0],
            value: sParameterName[1]
        });
    }
    return params;
}
</script>

</html> 
```

Which then shows the names and values of all query parameters.

**UPDATE**

Since you already have hardcoded HTML that looks like this:

```
<span class="style1">$need_source_value_here</span><br />
<span class="style1">$need_medium_value_here</span><br />
<span class="style3">$need_campaign_value_here</span><br /> 
```

The easiest way to insert your values would be to add an id to each of those spans:

```
<span id="source-span" class="style1"></span><br />
<span id="medium-span" class="style1"></span><br />
<span id="campaign-span" class="style3"></span><br /> 
```

Then after you query the parameters, you can insert them like this:

```
var source = GetURLParameter('source');
document.getElementById('source-span').innerText = source;
var medium = GetURLParameter('medium');
document.getElementById('medium-span').innerText = medium;
var campaign = GetURLParameter('campaign');
document.getElementById('campaign-span').innerText = campaign; 
```

# perl - 使用环境变量 %ALLUSERSPROFILE%

> ID：12205886
> 
> 赞同：-1
> 
> 时间：2012-08-30T21:35:15.570
> 
> 标签：perl, variables, environment

我正在使用 Perl 编写一个基本脚本，但遇到了环境变量问题。我需要 %ALLUSERSPROFILE% 变量（在 ms-dos 中可用）但在 Perl 中找不到它。是否有任何模块或方法可以批量使用所有这些变量？

这是另一个问题。为了解决这个问题，我想批量重定向'echo.%ALLUSERSPROFILE%'的输出，但是没有用。这是我尝试过的：

```
open (ENV, "echo.%ALLUSERSPROFILE%");
while (<ENV>) {
  print "$_\n";
} 
```

这个问题有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T21:48:13.290

环境变量可用作 hash `%ENV`。所以你的特定变量是

```
 $ENV{ALLUSERSPROFILE} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T21:48:18.943

您的代码尝试打开一个名称非常奇怪的文件...

环境变量可以通过 访问[`%ENV`](http://perldoc.perl.org/perlvar.html#%ENV)，变量的名字很简单`ALLUSERSPROFILE`。

```
$ENV{ALLUSERSPROFILE} 
```

# android - Paint.setTextSize() 采用 sp。设计师提供pt尺寸

> ID：12205888
> 
> 赞同：0
> 
> 时间：2012-08-30T21:35:23.177
> 
> 标签：android, graphics, units-of-measurement

所以我得到了这个字体，必须在我的应用程序中以 9 pt 的大小使用。这就是我的设计师，一个安卓文盲，告诉我的。没问题：

```
9 pt = (1 / 72) * 9 = 1 / 8 in.

@ 285 dpi, this means 9 pt = 285/8 px

Being xhdpi, 9 pt = 285 / 16 dp. 
```

整洁的！现在如何将此值转换为 sp 以便我可以将其提供给标题中的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:44:42.727

它没有在文档中指定，但我相当肯定`Paint.setTextSize()`接受像素值，而不是 sp 值，在这种情况下，您只需传入像素尺寸 (285/8)。问题是试图得到你的确切密度，据[我所知](https://stackoverflow.com/a/12115903/321697)，这是不可能的。您将不得不使用您的密度“桶”值（例如 hdpi = 240）。

编辑：如果你真的在谈论，`TextView.setTextSize()`那么你实际上可以使用`setTextSize(TypedValue.COMPLEX_UNIT_PT, 9)`并跳过整个转换问题。

# c# - 查找相似图片

> ID：12205889
> 
> 赞同：2
> 
> 时间：2012-08-30T21:35:27.593
> 
> 标签：c#, asp.net, asp.net-mvc, image-processing, mono

> **可能重复：**
> [比较两个图像的算法](https://stackoverflow.com/questions/23931/algorithm-to-compare-two-images)

我正在寻找找到类似图像的解决方案。我需要lib，它将拍摄图像，然后构建“地图”，我将其写入数据库，然后在下一次上传时，我将构建相同的地图，然后寻找相似的图像。如果它与 MONO 一起使用也会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:44:51.817

您应该[为 OpenCV 使用 .Net (dotNet) 包装器吗？](https://stackoverflow.com/questions/85569/net-dotnet-wrappers-for-opencv) 并尝试自学图像处理最简单的解决方案是在两者之间建立相关性，即[金字塔](http://en.wikipedia.org/wiki/Pyramid_%28image_processing%29)

尝试阅读这两个帖子：

[比较两个图像的算法](https://stackoverflow.com/questions/23931/algorithm-to-compare-two-images)

[图像比较 - 快速算法](https://stackoverflow.com/questions/843972/image-comparison-fast-algorithm)

# java - Spring roo 多模块依赖

> ID：12205890
> 
> 赞同：2
> 
> 时间：2012-08-30T21:35:32.610
> 
> 标签：java, spring, jakarta-ee, maven, spring-roo

我刚开始第一次玩春袋鼠，第一印象很刺激。目前我正在努力创建多模块项目，希望你们能帮助我。

假设我有父 POM 和 2 个 Jar 项目和 1 个战争项目。让我们将它们命名如下。

1.  父 (POM)
2.  服务 API (jar)
3.  服务 IMPL (jar)
4.  网络（战争）

我需要它们在父项目内的对等级别安排所有 jar 和 war 文件。因此，所有三个项目都应该有一个单亲，即主 POM。

依赖关系应该是——Web 依赖 >> Services Impl 依赖 >> Services API

我不太了解 spring roo 多模块功能如何帮助我实现这一点。等待您的专业知识。干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T00:30:28.967

Spring Roo 从 1.2.0 版本开始支持多模块 Maven 项目，请查看[Spring Roo - 参考文档](http://static.springsource.org/spring-roo/reference/html/architecture.html#architecture-maven-multi-module)。

在命令提示符下，您可以简单地运行：

> roo 脚本 multimodule.roo

这将创建一个示例多模块项目，该项目具有以下目录结构：

```
my-project/
  pom.xml -- <packaging>pom</packaging>
  core/
    pom.xml -- <packaging>jar</packaging>
    src/
  ui/
    pom.xml -- <packaging>pom</packaging>
    mvc/
      pom.xml -- <packaging>war</packaging>
      src/ 
```

子模块 mvc 项目在其 pom.xml 中具有子模块核心作为依赖项。创建此示例项目后，您可以对其进行处理并根据您的目的手动更改其结构，然后将其附加到 Eclipse 等 IDE。

Spring Roo 还提供了一些内置命令帮助您创建新的子模块项目并管理相互依赖关系，查看参考文档中的特性和限制。

希望这可以帮助。

# java - 何时以及如何有效地使用 StringBuilder/Buffer？

> ID：12205896
> 
> 赞同：1
> 
> 时间：2012-08-30T21:35:52.510
> 
> 标签：java, string, stringbuilder, stringbuffer

我想创建一个由大约 3000 个其他字符串连接而成的字符串。我听说使用这么多字符串可能效率低下，因为它们位于某种池中，并且在不需要它们后可能不会立即被 GC 拾取。

这是最好的解决方法吗-

```
StringBuilder sb = new StringBuilder("");

for(String s : arrayWith3000Strings)
{
  sb.append(s);
} 
```

还是应该将所有字符串连接成一个字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:37:55.317

这绝对是首选 StringBuilder 的情况。

字符串是“不可变的”。任何修改字符串的操作（包括“追加”）都会创建一个新字符串。使用 stringbuilder 可以避免这笔费用。

此链接（众多链接之一）进一步解释：

*   [http://javarevisited.blogspot.com/2011/07/string-vs-stringbuffer-vs-stringbuilder.html](http://javarevisited.blogspot.com/2011/07/string-vs-stringbuffer-vs-stringbuilder.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T21:38:23.807

是的，你的代码很好。

即使您使用字符串连接，它也会创建新`String objects`的，因为字符串是不可变的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T21:39:48.610

`StringBuffer`具有比 更好的性能`StringBuilder`，但`StringBuffer`不是线程安全的！

编辑：当然，反之亦然:)

# jquery - jQuery全高75%宽滑动页面

> ID：12205897
> 
> 赞同：0
> 
> 时间：2012-08-30T21:35:55.560
> 
> 标签：jquery

我正在尝试创建一个滑动页面，该页面覆盖了我网站宽度的大约 75%，一旦被点击，就会退到大约 15% 的网站（在左侧）。滑块上会有内容，但我不希望滑动页面影响它后面页面上的内容。我没有任何运气找到这些特定问题的编码帮助。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:53:58.550

您可以使用 jquery animate 函数为滑动设置动画：

```
$("#slideLeft").click(function () {
    $("#slider").animate({left:-550}, 2000);
});​ 
```

小提琴示例：http: [//jsfiddle.net/johnkoer/FPVmc/27/](http://jsfiddle.net/johnkoer/FPVmc/27/)

# sql - 在 SQL 中存储多个可空布尔值的策略

> ID：12205902
> 
> 赞同：2
> 
> 时间：2012-08-30T21:36:25.670
> 
> 标签：sql, sql-server

我有一个对象（恰好是 C#），其中包含大约 20 个可为空的布尔值的属性。可能会有几百万个这样的对象持久化到 SQL 数据库（目前是 SQL Server 2008 R2，但将来可能需要支持 MySQL）。实例本身相对较大，因为它们包含大约一段文本以及一些其他不相关的属性。

对于给定的对象实例，大多数属性大部分时间都将为*空*。

当用户搜索此类对象的实例时，他们可能会选择 1-3 个可为空的布尔属性并搜索这 1-3 个属性中至少有一个为非空的实例（OR 搜索）。

我的第一个想法是将对象持久化到一个表中，其中可以为空的 BIT 列表示可为空的布尔属性。但是，此策略将要求每个 BIT 列有一个索引，以避免在搜索时执行表扫描。此外，每个索引不会特别有选择性，因为每个索引只有三个可能的值。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:47:19.130

出于性能原因，我建议您将表拆分为两个表。

使用用于索引的位字段创建主键。有另一个包含附加数据的表（例如段落）。将第一个用于 WHERE 条件，加入第二个以获得所需的数据。就像是：

```
select p.*
from BitFields bf join
     Paragraph p
     on bf.bfid = p.bfid
where <conditions on the bit fields> 
```

对于一堆二元/三元字段，我认为索引不会有太大帮助，因此查询引擎将诉诸全表扫描。如果将位域放在一张表中，就可以将表存储在内存中，从而获得良好的性能。

另一种方法是将字段存储为名称值对。如果您确实有很多这样的字段（例如数百或数千个）并且在给定的行中只使用了几个（例如十几个），那么实体-属性-值 (EAV) 结构可能会更好。这是一个包含三个重要列的表：

1.  实体 id（我在上面称为 bfid）。
2.  属性 id（特定属性）
3.  值（真或假）

# css - 关于悬停摇晃效果的CSS问题

> ID：12205904
> 
> 赞同：0
> 
> 时间：2012-08-30T21:36:29.627
> 
> 标签：css, html, hover, anchor

```
<style type="text/css">
    .linkcontainer{border-right: solid 0.2px white;margin-right:1px}
    .hardlink{color: #FFF !important; border: 1px solid transparent; }      
    .hardlink:hover{
          background:url("/_layouts/images/bgximg.png") repeat-x -0px -489px;
          display:inline-block; 
          background-color:#21374C;
          border:0.2px solid #5badff; 
          line-height:20px; 
          text-decoration:none !important;} 
</style>

<div style="padding-bottom:3px;background:transparent; color:white!important; float:left; margin-right:20px; line-height:42px;">
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px;" href="http://hronline">HROnline</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px; " href="http://hronline/ec">Employee Center</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px; " href="http://hronline/businesscommunities">Business Communities</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px;" href="http://hronline/internalservices">Internal Services</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px;" href="http://hronline/policiesprocedures">Policies&procedures</a>
    </span>
    <span class="linkcontainer">
        <a class="hardlink" style="padding:0 10px;" href="http://hronline/qualitybestpractices">Best Practices</a>
    </span>
</div> 
```

我为包含菜单链接的跨度添加了一个右边框。当我将鼠标悬停在每个菜单链接上时，它也有一些背景。这对整个容器造成了不稳定的影响。是什么导致了悬停时的不稳定影响？我好像没搞清楚——再说一遍。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:50:41.400

您的 .hardlink 类有 1px 边框，悬停时的同一个类有 0.2px 边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:54:34.983

正如 Slave 所提到的，您更改了边框大小。不幸的是，小于 1 px 不存在。如果您添加`margin-left: 1px; margin-right: 1px;`到悬停 css 并放置`border`它，`0px`它不会跳转。如果您想保留边框，请尝试使用不同的（可能更暗）颜色。

# javascript - 对数组中的范围进行排序

> ID：12205908
> 
> 赞同：1
> 
> 时间：2012-08-30T21:36:41.217
> 
> 标签：javascript, google-apps-script, google-sheets

我有我们公司的时间表电子表格，我需要按每个时间表块（15 行 x 20 列）对员工进行排序。我有以下代码，我得到了帮助，但是一旦遇到没有员工姓名的块，数组就会退出排序（我希望这些被洗牌到底部）。我遇到的另一个问题是这些单元格中有许多公式，当我按原样运行它时，它会删除它们。如果可能的话，我想保持这些完好无损。这是代码：

```
function sortSections() 
{
  var activeSheet = SpreadsheetApp.getActiveSheet();
  //SETTINGS
  var sheetName = activeSheet.getSheetName(); //name of sheet to be sorted
  var headerRows = 53; //number of header rows
  var pageHeaderRows = 5; //page totals to top of next emp section
  var sortColumn = 11; //index of column to be sorted by; 1 = column A
  var pageSize = 65;
  var sectionSize = 15; //number of rows in each section

  var col = sortColumn-1;
  var sheet = SpreadsheetApp.getActive().getSheetByName(sheetName);
  var data = sheet.getRange(headerRows+1, 1, sheet.getMaxRows()-headerRows, sheet.getLastColumn()).getValues();
  var data3d = [];
  var dataLength = data.length/sectionSize;
  for (var i = 0; i < dataLength; i++) {
    data3d[i] = data.splice(0, sectionSize);
  }
  data3d.sort(function(a,b){return(((a[0][col]<b[0][col])&&a[0][col])?-1:((a[0][col]>b[0][col])?1:0))});
  var sortedData = [];
  for (var k in data3d) {
    for (var l in data3d[k]) {
      sortedData.push(data3d[k][l]);
    }
  }
  sheet.getRange(headerRows+1, 1, sortedData.length, sortedData[0].length).setValues(sortedData); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:41:26.163

我认为可以使用[Range.sort](https://developers.google.com/apps-script/class_range#sort)函数而不是自定义代码来解决您的问题。排序函数也重新定位公式，但以一种棘手的方式 - 如果单元格公式包含单元格引用，排序函数将重新定位单元格中的行索引更改为具有新的单元格行索引，例如，最初单元格`C1`包含`=A1*B1`公式，排序操作后，第 1 行重新定位到第 3 行，单元格“C3”将包含 not `=A1*B1`，但是`=A3*B3`。

通过此修改，您的代码应如下所示

```
function sortSections() 
{
  var activeSheet = SpreadsheetApp.getActiveSheet();
  //SETTINGS
  var sheetName = activeSheet.getSheetName(); //name of sheet to be sorted
  var headerRows = 53; //number of header rows
  var pageHeaderRows = 5; //page totals to top of next emp section
  var sortColumn = 11; //index of column to be sorted by; 1 = column A
  var pageSize = 65;
  var sectionSize = 15; //number of rows in each section

  var col = sortColumn-1;
  var sheet = SpreadsheetApp.getActive().getSheetByName(sheetName);
  var range = sheet.getRange(headerRows+1, 1, sheet.getMaxRows()-headerRows, sheet.getLastColumn());
  range.sort({column: sortColumn, ascending: true});
  ...
} 
```

# ruby-on-rails - 您如何对 select_tag 和 text_field_tag 进行分组？

> ID：12205912
> 
> 赞同：0
> 
> 时间：2012-08-30T21:37:01.593
> 
> 标签：ruby-on-rails

我正在尝试构建一个表单，用户可以在其中选择现有类别或定义自己的类别。

我的表格看起来像这样......

```
<%= f.select :category, category_options, prompt: "Select">
<%= f.text_field :category %> 
```

但是，此 UI 令人困惑。用户可以在选择框中选择某些内容，然后输入自定义类别。在这种情况下，最终的结果并不明显。

你们对如何处理这种情况有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:39:27.710

默认情况下，文本字段将被隐藏和禁用 当用户选择“其他”选项时，
下拉菜单应该有“其他”选项， 文本字段将被启用和显示，然后用户应该能够在那里输入值。

# ios - presentModalViewController 与 xib 作品，你如何做同样的故事板？

> ID：12205924
> 
> 赞同：1
> 
> 时间：2012-08-30T21:38:18.267
> 
> 标签：ios, presentmodalviewcontroller

我可以让它与 xib 一起使用，但是如何使用 Storyboards 实现相同的效果？我相信我需要使用 prepareForSegue，但不知道如何实现它。这是我的代码：

```
- (void)buttonTouched:(id)sender {
// When picture is touched, open a viewcontroller with the image
PFObject *theObject = (PFObject *)[allImages objectAtIndex:[sender tag]];
PFFile *theImage = [theObject objectForKey:@"imageFile"];

NSData *imageData;
imageData = [theImage getData];
UIImage *selectedPhoto = [UIImage imageWithData:imageData];
PhotoDetailViewController *pdvc = [[PhotoDetailViewController alloc] init];

pdvc.selectedImage = selectedPhoto;
[self presentModalViewController:pdvc animated:YES]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:42:35.190

要手动创建在故事板中定义的视图控制器，您必须给它一个*标识符*

视图控制器：

```
[self.storyBoard instantiateViewControllerWithIdentifier:(NSString *)indentifier];
[self.storyBoard instantiateInitialViewController]; 
```

将从情节提要中返回一个视图控制器

**修复**了来自@jere 的感谢

# c# - 减少文件操作的内存占用

> ID：12205930
> 
> 赞同：2
> 
> 时间：2012-08-30T21:38:36.713
> 
> 标签：c#, file-io, memory-leaks, out-of-memory

我正在尝试运行此方法，它工作正常，但每次经过数百次内部迭代后，我都会遇到内存不足异常：

```
...
MNDBEntities db = new MNDBEntities();
var regs = new List<DOCUMENTS>();
var query = from reg in db.DOCUMENTS
            where reg.TAG_KEYS.Any(p => p.TAG_DATE_VALUES.FirstOrDefault().TAG_DATE_VALUE.HasValue 
                && p.TAG_DATE_VALUES.FirstOrDefault().TAG_DATE_VALUE.Value.Year == 2012)
            select reg;

var pages = new List<string>();
foreach (var item in query)
{
    Document cert = new Document();

    var tags = item.TAG_KEYS;
    foreach (var tag in tags)
    {
        // Basic stuff...
    }

    var pagesS = item.PAGES;
    foreach (var page in pagesS)
    {
        var path = @"C:\Kumquat\" + (int)page.NUMBER + ".vpimg";
        File.WriteAllBytes(path, page.IMAGE);
        pages.Add(path);
        Console.WriteLine(path);
    }

    //cms.Save(cert, pages.ToArray()).Wait();
    foreach (var pageFile in pages)
        File.Delete(pageFile);

    pagesS = null;
    pages.Clear();
}
... 
```

我很确定问题与 File.WriteAllBytes 或 File.Delete 有关，因为如果我评论这些行，该方法将毫无例外地运行。我所做的基本上是从数据库和文档图像中获取一些标签，然后将该图像保存到磁盘上，然后存储到 cms 中，然后从磁盘中删除。老实说，不知道我对 File 调用做错了什么。任何的想法？

这是 PerfView 显示的内容：

![PerfView 的方法](../Images/eadf5254b4edfe563ebaeea0f3c046b8.png)

这就是 Visual Studio 2012 Profiler 显示的热点，问题是：这是所有生成的代码（在实体模型中）我做错了什么可能是模型的属性吗？

![在此处输入图像描述](../Images/a327ed5cf12bd96e54234380082c0558.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:54:12.560

尝试使用[http://www.microsoft.com/en-us/download/details.aspx?id=28567](http://www.microsoft.com/en-us/download/details.aspx?id=28567)来分析您的代码，重点关注 GC 事件和 CLR 管理的分配滴答事件。

page.IMAGE 可能是问题所在。它很可能会分配一个字节数组并且永远不会删除它。最好将代码更改为：

```
page.WriteTo(path); 
```

显示的其余代码看起来确实不错。唯一可能的问题是大对象分配，这可能导致[LOH](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)中的碎片问题。

# python - 如何将 python 套接字通过管道传输到标准输入/标准输出

> ID：12205934
> 
> 赞同：0
> 
> 时间：2012-08-30T21:38:48.373
> 
> 标签：python, sockets, pipe

我需要编写一个应用程序来联系服务器。发送一些消息后，它应该允许用户通过发送命令和接收结果与服务器交互。

我应该如何管道我当前的套接字，以便用户可以与服务器交互而无需从/向 stdin/stdout 读取输入和写入输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T21:55:07.707

你的意思是像使用netcat？

```
cat initial_command_file - | nc host:port 
```

答案是，*有些东西*需要读写。在上面的示例 shell 脚本`cat`中，依次从两个源读取，并写入单个管道；`nc`从该管道读取并写入套接字，但也从套接字读取并写入其`stdout`.

所以*总会*有一些阅读和写作……然而，你可以构建你的代码，这样就不会侵入通信逻辑。

例如，您使用[itertools.chain](http://docs.python.org/library/itertools.html#itertools.chain)创建一个行为类似于 的输入迭代器`cat`，因此您的面向 TCP 的代码可以采用单个输入可迭代：

```
def netcat(input, output, remote):
    """trivial example for 1:1 request-response protocol"""
    for request in input:
        remote.write(request)
        response = remote.read()
        output.write(response)

handshake = ['connect', 'initial', 'handshake', 'stuff']
cat = itertools.chain(handshake, sys.stdin)

server = ('localhost', 9000)
netcat(cat, sys.stdout, socket.create_connection(server)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-30T21:55:48.383

你可能想要像[pexpect](http://pexpect.sourceforge.net/pexpect.html)这样的东西。基本上，您将创建一个`spawn`启动连接的对象（例如 via `ssh`），然后使用该对象的方法`expect()`和`sendline()`方法来发出您要在提示时发送的命令。然后您可以使用该`interact()`方法将控制权交给用户。

# c++ - 正确使用 ARC 和 C++ 互操作的 __bridge？（如何避免内存泄漏？）

> ID：12205937
> 
> 赞同：0
> 
> 时间：2012-08-30T21:39:04.913
> 
> 标签：c++, objective-c, automatic-ref-counting

我有一些纯 C++ 代码，它借助指向 Objective C 类中方法的函数指针从 Objective-C 数据结构中读取。我将要读取的 Objective-C 类实例视为一个不透明的指针。例如，进行读取的 C++ 方法具有如下签名：

```
typedef void(*DataGetterFunc)(void * dataSource, int key, int * outValue);
...
void readData(void * dataSource, DataGetterFunc dataReadingFunc); 
```

当我从 Objective-C 调用 C++ 方法时，我执行以下操作：

```
MYDataStructure * objectiveCData;
cppObject->readData((__bridge void*)objectiveCData, DataGetterFuncImpl); 
```

最后，`DataGetterFuncImpl`像这样取消引用 Objective-C 类：

```
void DataGetterFuncImpl(void * dataSource, int key, int * outValue)
{
    MYDataStructure * objCData = (__bridge MYDataStructure*)dataSource;
    ...
} 
```

最初是在`DataGetterFuncImpl`我使用`__bridge_transfer`的，但是在下次调用 ARC 时我得到了 EXC_BAD_ACCESS `retain`，`MYDataStructure`所以我认为它被过度释放了，`__bridge_transfer`并将其更改为`__bridge`.

是否有任何内存泄漏我应该通过使用来寻找`__bridge`，或者在这种情况下我是否需要使用`__bridge_retain`and的某种组合`__bridge_transfer`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T22:02:55.797

当您`__bridge`用于转换为 objc 或从 objc 转换时，所有权不受影响。这意味着，当您在 C++ 中使用该对象时，您必须确保周围仍然存在强引用。

另一方面，如果您使用`__bridge_retain`to 转换为 void* 并`__bridge_transfer`转换回`id`（或任何其他可保留的对象类型），则必须确保每个`__bridge_retain`都在以后完全匹配`__bridge_transfer`。

# ios - 自定义 UITextField 委托

> ID：12205940
> 
> 赞同：1
> 
> 时间：2012-08-30T21:39:22.487
> 
> 标签：ios, uitextfield, automatic-ref-counting

我有一个`uitextfield`子类和`init`方法，`setDelegate`我有这个：

```
- (void) setDelegate:(id<UITextFieldDelegate>)paramDelegate{
    [super setDelegate:paramDelegate];

    MRAAdvancedTextFieldDelegate *limitedDelegate = [[MRAAdvancedTextFieldDelegate alloc] init];
    self.delegate = limitedDelegate;
} 
```

我正在使用 ARC，但这会导致 BAD_ACCESS。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:41:43.820

你用`self.delegate = limitedDelgate`你的`setDelegate:`方法写作。这与调用完全相同`[self setDelegate:limiatedDelegate]`。由于您在`-setDelegate:`方法本身内，因此您正在导致无限递归。希望这可以帮助！

编辑：根据您对意图的评论，像这样覆盖它：

```
- (void) setDelegate:(id<UITextFieldDelegate>)paramDelegate{
    MRAAdvancedTextFieldDelegate *limitedDelegate = [[MRAAdvancedTextFieldDelegate alloc] init];
    [super setDelegate:limitedDelegate];
} 
```

但我不认为这样做是个好主意——你应该让你的客户端代码在你的委托实例中传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:43:23.690

```
self.delegate = limitedDelegate; 
```

变成了

```
[self setDelegate:limitedDelegate]; 
```

由编译器，导致无限循环。解决方案：不要使用属性，而是在自定义setter方法中使用实例变量：

```
delegate = limitedDelegate; 
```

# javascript - 使用 javascript 解释更改 div 样式。

> ID：12205947
> 
> 赞同：0
> 
> 时间：2012-08-30T21:39:49.967
> 
> 标签：javascript

嗨对不起，如果这是重复的，但我不知道要搜索什么。下面的代码无需我执行 document.getElementByID 即可工作。这是为什么？这比通过 id 获取元素更快、相同或更慢吗？

[http://jsfiddle.net/eQXZa/](http://jsfiddle.net/eQXZa/)

HTML

```
<div id="box1" style="background-color: #ff0000; width: 100px; height:100px;"></div> 
```

JS

```
obj(box1);
function obj(object) 
{
    object.style.background = "#ccc";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:41:39.340

在某些浏览器中，元素通过其 id 存储为全局变量，因此您可以直接访问它们。为了安全起见，您不应依赖此功能，而应使用`getElementById`.

# vba - 获取变量的内容并将其用作变量名本身

> ID：12205949
> 
> 赞同：2
> 
> 时间：2012-08-30T21:40:01.573
> 
> 标签：vba, variables

我有一个 9 行的表格，每行有 4 个逻辑元素。每行只能有 1 个“真实”条件（类比可能是：Row1-eyes “Blue”、“Green”、“Grey”、Brown”。Row2-hair “Blond(e)”、“Brunette”、 “Redhead”，“None”......等等。）。这些实际上是用户表单上的“单选按钮”。它们目前正常运行，但 100% 手动运行 - 我需要保留该功能。

我的问题是我还希望能够使用在其他地方确定的“标准”配置来重置它们。按钮标记为 B11 - B49

在“其他地方”中，我有以下示例代码，它创建了我想要将按钮设置为的值：

```
`Sub bMostCommon() 'This is the most common profile
For iRow = LBound(xLiabilities, 1) To UBound(xLiabilities, 1)
    For iCol = LBound(xLiabilities, 2) To UBound(xLiabilities, 2)
        xLiabilities(iRow, iCol) = False
    Next iCol
Next iRow

'store commomn settings
xLiabilities(1, 1) = True 
xLiabilities(2, 2) = True 
xLiabilities(2, 3) = True 
xLiabilities(1, 4) = True 
xLiabilities(1, 5) = True 
xLiabilities(1, 6) = True 
xLiabilities(1, 7) = True 
xLiabilities(1, 8) = True 
xLiabilities(2, 9) = True
end sub 
```

初始变量的尺寸如下：

```
Dim xLiabilities(1 To 4, 1 To 9)
Dim iRow As Integer, iCol As Integer 
```

这将创建一个二维数组，我想将其映射到相应的单选按钮上。

在包含单选按钮数组的用户窗体中，我有以下代码来创建按钮名称：

```
 For iRow = LBound(xLiabilities, 1) To UBound(xLiabilities, 1)
For iCol = LBound(xLiabilities, 2) To UBound(xLiabilities, 2)
    mRadioButton = "B" & iRow & iCol
    Debug.Print "xLiabilities(" & iRow & "," & iCol & ")" '&
    Debug.Print "Radio Button"; mRadioButton
    Next iCol
Next iRow 
```

我相信通过研究 debug.print 结果，这会产生正确的输出，但我看不出有办法提取输出数据并使用它（例如 B23.Value = Array(2,3).Value 等等，对于所有 36 个单选按钮/元素。

可以这样做还是我错过了更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T00:03:58.453

在用户窗体上，您可以使用以下命令访问特定控件：

```
Me.Controls("yourControlName") 
```

# java - Collections.sort 与 Arrays.sort - 在 Java 中

> ID：12205950
> 
> 赞同：2
> 
> 时间：2012-08-30T21:40:13.337
> 
> 标签：java, arrays, sorting, arraylist

我是先做这样的：

```
List<String> items = new ArrayList<String>();

Comparator<items> ignoreLeadingThe = new Comparator<items>() {
    public int compare(String a, String b) {
        a = a.replaceAll("(?i(^the\\s+", "");
        b = b.replaceAll("(?i(^the\\s+", "");
        return a.compareToIgnoreCase(b);
    }
};

Collections.sort(items, ignoreLeadingThe); 
```

现在我正在这样做：

```
ItemObject[] io = new ItemObject[items.size()];

Comparator<ItemObject> ignoreLeadingThe = new Comparator<ItemObject>() {
    public int compare(ItemObject a, ItemObject b) {
        a.name = a.name.replaceAll("(?i(^the\\s+", "");
        b.name = b.name.replaceAll("(?i(^the\\s+", "");
        return a.name.compareToIgnoreCase(b.name);
    }
};

Arrays.sort(io, ignoreLeadingThe); 
```

当我对`ArrayList`顶部进行排序时，它表现正常；它忽略了“The”并相应地排序了列表；但它实际上并没有影响列表的输出。

但是，当我对常规`Array`（填充对象而不是字符串）进行排序时，底部代码实际上删除了“The”。例如，“小丑”将变成“小丑”。

有谁看到这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T21:46:10.557

正如我在[评论](https://stackoverflow.com/questions/12205950/collections-sort-vs-arrays-sort-in-java#comment16348476_12205950)中所说，

> 您正在覆盖`a.name`和`b.name`. 为转换后的名称声明单独的局部变量，并在您的`compareToIgnoreCase`.

...或者只使用一个大表达式。所以，尝试这样的事情......

```
final Comparator<ItemObject> ignoreLeadingThe = new Comparator<ItemObject>() {

  final Pattern pattern = Pattern.compile("(?i(^the\\s+");

  public int compare(final ItemObject a, final ItemObject b) {
    return pattern.matcher(a.name).replaceAll("")
        .compareToIgnoreCase(pattern.matcher(b.name).replaceAll(""));
  }
}; 
```

# javascript - 单击链接时将三重 HTTP 请求发送到服务器

> ID：12205951
> 
> 赞同：2
> 
> 时间：2012-08-30T21:40:18.233
> 
> 标签：javascript, forms, request, submit

有人可以建议吗，我整周都在努力解决这个问题，但仍然没有运气。

我的问题是网络应用程序。当用户单击一个链接时，在单击特定链接后（其他链接工作正常），IE8 浏览器向服务器发送三个 HTTP 请求。它假设只发送一个请求。

第一个 HTTP 请求是 POST - Header 和 Body 数据正确（所有参数看起来都不错）

第二个 HTTP 请求是 POST - Header 和 Body 数据正确（所有参数看起来都不错）

第三个 HTTP 请求是 GET - Header 中没有 Referer，正文中没有任何内容（因为它是 GET）。

第三个请求导致 Servlet 抛出 NULL 指针异常，因为 Servlet 尝试读取 FORM 参数。

所有的请求都发送到同一个 Servlet。这三个请求在 1 - 2 秒内发生。我确定这与多次点击无关。

用户正在使用带有 Window XP 的 IE8。这无法在我的环境中重现。

我在互联网上研究了一个星期，我注意到 IE8 的一个已知问题会创建对服务器的双重请求，这种情况似乎与 Javascript 中的“.submit()”有关。我已经非常详细地研究了我的代码，我相信事实并非如此。

这是链接的样子。请建议。

```
<a href=\"#\" onClick=\"test.goToNextPage();return false;\">Test link</a>

this.goToNextPage = function()
{
// do some paramter manipulation here (such as customer data),
    //not related to this issue
createForm().submit();

}

function createForm()
{

bcForm = document.createElement("form");
bcForm.setAttribute("method", "POST");

//real code add some hidden parameter(e.g. action, Form ID) and value here...

document.body.appendChild(bcForm);

return bcForm;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:52:09.003

我遇到了同样的问题。这是关于 onclick 事件在嵌套 HTML 元素上的传播。例如：如果您在*<td onclick="">中有一个**<a onclick="">*，并且您只需单击*<a>*，那么两个 onclick 都会执行。

 **这种现象称为“事件冒泡”，您可以使用 JavaScript 修复这种情况。以下函数停止 onclick 事件的传播：

```
function crossbrowser_stopPropagation(e){
    if (!e) {
       e = window.event; 
    }

    e.cancelBubble = true;      

    if (e.stopPropagation) {
       e.stopPropagation(); 
    }       
} 
```

现在，您必须在 onclicks 中调用此函数，如下所示：

```
<a href="#" onClick="crossbrowser_stopPropagation(event);test.goToNextPage();return false;">Test link</a> 
```

如果您的 <A> 标记位于另一个实现 onclick 事件的 HTML 标记内，请记住在该标记中也使用此函数。

查看此链接了解更多信息： http://forums.mozillazine.org/viewtopic.php?f=38& [t=549571](http://forums.mozillazine.org/viewtopic.php?f=38&t=549571)**

# php - 带有注册商标的访问数组键

> ID：12205954
> 
> 赞同：3
> 
> 时间：2012-08-30T21:40:47.670
> 
> 标签：php, arrays, key, symbols

我正在尝试使用键访问数组值。我的代码工作正常，除非密钥中有注册商标。我该如何解决这个问题？

```
$map = array(
    'Education'=>'643',
    'STORMS®'=>'644',
);

print $csv_line[$i];        // prints STORMS®
print $map[$csv_line[$i]];  // prints nothing
print $map['STORMS®'];      // prints the value I need 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:35:31.360

它是 html 特殊字符，您可以`preg_replace or str_replace`根据需要使用它。

> 注册商标**可以通过**® **或** ®

[特殊字符](http://www.degraeve.com/reference/specialcharacters.php), [htmlentities](http://php.net/manual/en/function.htmlentities.php) ,[规范化器](http://www.php.net/manual/en/normalizer.normalize.php)

* * *

```
$Content = preg_replace("/&#?[a-z0-9]+;/i","",$Content); 
```

# c++ - 文件搜索进度条

> ID：12205955
> 
> 赞同：0
> 
> 时间：2012-08-30T21:40:50.543
> 
> 标签：c++, windows, winapi

> **可能重复：**
> [在文件搜索期间更新进度条](https://stackoverflow.com/questions/12042159/updating-progress-bar-during-a-file-search)

我正在使用`FindFirstFile`并`FindNextFile`递归地通过搜索 20 级深度来搜索文件。
我将如何添加进度条？显示搜索的进度？

当您搜索文件时，我想要类似于资源管理器中的进度条。

但是我如何计算出我必须搜索多少个文件才能计算出完成的百分比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:47:21.003

如果您唯一要做的就是搜索文件，那么我唯一想到的就是计算每个目录的平均文件数量。我猜你的文件比目录多得多，所以当你在目录中前进时，你将 100% 除以越来越大的数字。当然，您可能会看到进度停滞甚至倒退。

如果您为每个文件执行某些操作，我建议您运行一个单独的线程，该线程将遍历您的文件系统，而其他线程将对每个找到的文件执行操作。当遍历线程计算所有文件，甚至它们的总大小时，您的进度将变得最准确（当然，您在活动的文件系统上会遇到一些问题，同时可能会添加或删除文件。）

# asp.net - 预填充 gridview 空数据源

> ID：12205956
> 
> 赞同：1
> 
> 时间：2012-08-30T21:40:55.270
> 
> 标签：asp.net

我使用 gridview 空数据源进行批量插入，如何使用下拉框的值预填充例如 A 列？到目前为止，我在下面，但它不起作用

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        TextBox tb = (TextBox)e.Row.FindControl("YourTextBoxID");
        if(tb != null)
        {
            tb.Text = DropDownList1.SelectedItem.Text;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:59:34.363

我不明白你对*空*数据源的意思。我假设您实际上是指使用默认值自动填充的 DataSource。

您可以使用`DataTable`：

```
var tbl = new DataTable();
tbl.Columns.Add("ColumnA");
var defText = DropDownList1.SelectedItem.Text;
for(int i = 0; i < 1000; i++)
{
    tbl.Rows.Add(defText);
}
GridView1.DataSource = tbl;
GridView1.DataBind(); 
```

# java - Eclipse 远程调试不适用于伪分布式模式下的 hadoop

> ID：12205967
> 
> 赞同：1
> 
> 时间：2012-08-30T21:42:10.773
> 
> 标签：java, eclipse, debugging, hadoop, remote-debugging

在独立模式下运行 hadoop 时，我对 Eclipse 的远程调试没有任何问题。但是，当我在伪分布式模式下运行 hadoop 时，它不起作用。以下是我在伪分布式模式下尝试使用 hadoop 进行 eclipse 远程调试的方法：

我在我的 hadoop 脚本中添加了一行，如下所示：

```
#added this line to enable remote debugging
HADOOP_OPTS="$HADOOP_OPTS -agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5000"

# run it
exec "$JAVA" $JAVA_HEAP_MAX $HADOOP_OPTS -classpath "$CLASSPATH" $CLASS "$@" 
```

然后我创建一个远程调试配置，如下所示：

![创建远程调试配置](../Images/d509086c51b25e5a793ef5f3c9b7598f.png)

我从命令行运行作业，它说明了它应该做什么：

```
Listening for transport dt_socket at address: 5000 
```

然后我回到 Eclipse 并运行调试配置。它像它应该那样进入我的 main() 函数：

![在此处输入图像描述](../Images/8cb638b5f281db835c8486468823042a.png)

但是，它没有命中我在映射器或减速器中设置的任何断点。

这里有什么问题？它如何在独立模式下与 hadoop 一起工作，而不是伪分布式模式？是否可以在伪分布式模式下使用 hadoop 进行远程调试？如果不是，那么在 Eclipse 中调试我的 mapreduce 代码的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:12:25.947

请参阅上面的 Lorand 评论。远程调试只能在独立模式下工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T08:35:47.917

您可以指定：

```
<property>
  <name>mapred.map.child.java.opts</name>
  <value>-Xdebug -Xrunjdwp:transport=dt_socket,address=5001,server=y,suspend=y</value>
</property> 
```

这将以调试模式启动地图任务。另请参阅[使用 Eclipse 调试多个 hadoop jvm](https://stackoverflow.com/questions/11499763/debugging-multiple-hadoop-jvms-with-eclipse/17718446#17718446)

# api - GET 或 PUT 重启远程资源？

> ID：12205968
> 
> 赞同：1
> 
> 时间：2012-08-30T21:42:13.757
> 
> 标签：api, http, rest, get, put

我正在努力（在某种意义上）确定哪种 HTTP 方法更适合重新启动远程资源：GET 还是 PUT？

一方面，调用似乎更具语义性，`http://tools.serviceprovider.net/canopies/d34db33fc4f3?reboot=true`因为人们可能想要获取一个新重新启动的树冠的表示。

另一方面，重启不是“安全的”（也不一定是幂等的，但是机盖或调制解调器不仅仅是数据库中的一行），因此将机盖置于重启状态似乎更具语义，然后让服务器返回 202 以指示重新启动已启动并正在处理。

上周我一直在阅读 HTTP/1.1、REST、HATEOAS 和其他相关概念，所以我仍在整理这些内容。能否请一位经验丰富的开发人员权衡并确认或消除我的预感？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:59:45.803

GET 似乎不合适，因为正如您所说，期望 GET 是“安全的”。即除了检索之外没有任何动作。

PUT 似乎不合适，因为 PUT 预计是幂等的。即多个相同的操作会导致与单个操作相同的副作用。此外，通常使用 PUT将请求 URI 处的内容*替换*为请求正文。

POST 似乎在这里最合适。因为：

1.  POST 不一定是安全的
2.  POST 不必是幂等的

这似乎也很有意义，因为您正在发布重新启动请求（很像提交表单，这也通过 POST 发生），然后可以对其进行处理，可能会导致一个新的 URI 包含与`303 See Other`状态一起返回的重新启动日志/结果代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T22:10:05.550

有趣的是，Tim Bray 写了[一篇](http://www.tbray.org/ongoing/When/200x/2009/03/20/Rest-Casuistry)关于这个确切主题的博文（使用哪种方法告诉代表虚拟机的资源自行重启），其中他还主张使用 POST。在那篇文章的底部有关于该主题的后续链接，其中包括来自 Roy Fielding 本人的链接，他对此表示赞同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T21:03:23.953

Rest 绝对不是 HTTP。但是 HTTP 绝对不只有四个（或八个）方法。任何方法在技术上都是有效的（即使作为扩展方法），并且任何方法在*自我描述*时都是 RESTful 的——例如“LOCK”、“REBOOT”、“DELETE”等。像“MUSHROOM”这样的东西，虽然作为一个有效的HTTP 扩展，没有明确的含义或容易预期的行为，因此它不会是 RESTful。

Fielding 曾表示：“REST 风格并不表示限制方法集是可取的目标。[..] 特别是，REST 鼓励为晦涩的操作创建新方法”，并且“在真正的基于 REST 的架构中更有效，因为有一百种不同的方法具有不同的（非重复的）通用语义。”</p>

资料来源：

[http://xent.com/pipermail/fork/2001-August/003191.html](http://xent.com/pipermail/fork/2001-August/003191.html)

[http://tech.groups.yahoo.com/group/rest-discuss/message/4732](http://tech.groups.yahoo.com/group/rest-discuss/message/4732)

考虑到这一切，我将“自我描述”并使用 REBOOT 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-16T23:03:05.620

是的，您可以使用 POST 有效地创建一个新命令 REBOOT。但是有一种[完全幂等的方法可以使用 PUT 进行重启](http://nicholassterling.wordpress.com/2014/02/16/rebootrestart-in-a-rest-api-using-put/)。

有一个包含服务器上次重新启动时间的 last_reboot 字段。如果传入时间比当前时间新，则使用当前时间对该字段进行 PUT 会导致重新启动。如果中间服务器重新发送 PUT，没问题——它与第一个命令具有相同的值，因此它是无操作的。尝试向后设置 last_reboot 时间是错误的。

您可能希望从正在重新启动的服务器获取当前时间，除非您知道客户端和服务器的时间同步合理。

# krl - 在 KRL 搜索注释中为多个域格式化的正确方法

> ID：12205972
> 
> 赞同：1
> 
> 时间：2012-08-30T21:42:45.817
> 
> 标签：krl

我正在 KRL 中配置一条规则，以根据搜索结果中显示的 2+ 个不同域的结果进行注释。第一个域工作正常，但添加第二个或更多会违反规则。我在下面使用的代码示例 - 还有另一种列出这些域的方法吗？

```
rule search_annotate_cust is active {
select using "google.com|bing.com/search|search.yahoo.com/search" setting()
every {
  emit <<
    function annotate_cust(toAnnotate, wrapper, data) {
      if (data.domain == "exampleurl.com" ||
         (data.domain == "anotherurl.com" ||
         (data.domain == "sub.exampleurl.com) {
        wrapper.append("<div style='border: 0px solid red'><img  src=http://www.example.com/uploads/product/cust_icon.jpg>");
        wrapper.show();
      }
    }
  >>;
  annotate:annotate("cust") with
    annotator = <| annotate_cust |>;
 }
} 
```

# html - TD 内 100% 高度 DIV

> ID：12205979
> 
> 赞同：0
> 
> 时间：2012-08-30T21:43:06.123
> 
> 标签：html, css, css-tables

我正在尝试在 TD 内设置 DIV 的高度，以用一些填充来填充 TD 的高度，以达到良好的测量效果。

这是一个[jsfiddle](http://jsfiddle.net/sygad/FWw4G/)展示它应该如何，（好的浏览器）

奇怪的是，它在 IE7/8 中运行良好，但在 IE9 中完全是炸弹。

有人有任何基于 CSS 的解决方案吗？

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:52:16.303

目前是IE9的问题。桌子现在有问题。在以前的版本、Chrome 或 Firefox 中应该看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:49:47.087

您可以对 div 应用高度，如果它比单元格高，表格单元格将适应它。`

# php - 在 PHP 中按父级循环遍历数据库行

> ID：12205980
> 
> 赞同：0
> 
> 时间：2012-08-30T21:43:06.347
> 
> 标签：php, mysql

请考虑以下表结构：

```
+----+-----------+--------+
| id | page_name | parent |
+----+-----------+--------+
|  1 |   Page 1  |   0    |
+----+-----------+--------+
|  2 |   Page 2  |   1    |
+----+-----------+--------+
|  3 |   Page 3  |   2    |
+----+-----------+--------+
|  4 |   Page 4  |   1    |
+----+-----------+--------+ 
```

我希望遍历每一页，当我们沿着树向下时缩进它们。问题是对育儿级别没有限制（即任何页面都可以有孩子）。我想将它们输出到一个`<select>`元素中，如下所示：

```
Page 1
  Page 2
    Page 3
  Page 4 
```

我在 Page 类中有两个函数，一个是`HasChildren()`，另一个是`FetchChildren()`。这是我的想法，但它只输出第一级子页面：

```
while($record = $result->fetch_object())
{
    $page = new self($record->id);
    $selected = ($page->id == $selectedVal) ? ' selected="selected"' : '';
    $select.= '<option value="'. $page->id .'"'. $selected .'>'. $page->name .'</option>';

    $i = 1;
    $child = $page;

    while($child->HasChildren($active))
    {
        $indentString= '&nbsp;-&nbsp;';
        for($j = 1; $j <= $i; $j++) { $indentString = '&nbsp;'.$indentString; }

        foreach($child->FetchChildren($active) as $child_child)
        {
        $selected = ($child_child->id == $selectedVal) ? ' selected="selected"' : '';
        $select.= '<option value="'. $child_child->id .'"'. $selected .'>'. $indentString.$child_child->name .'</option>';

        $child = $child_child;
        }
        $i++;
    }
} 
```

谁能指出我正确的方向？这是漫长的一天，所以我可能遗漏了一些非常明显的东西。

# cuda - 有效载荷中的 Optix 动态大小数组

> ID：12205982
> 
> 赞同：5
> 
> 时间：2012-08-30T21:43:23.643
> 
> 标签：cuda, nvidia, raytracing, optix

有没有办法在 optix 中声明一个动态大小的数组有效负载？我搜索并阅读了 Optix 文档，却发现 Optix 不允许使用 malloc。有什么办法可以做类似以下的事情吗？

```
struct PerRayData_radiance
{
 float3 result;
 float  importance;
 int depth;
 float stuff[N];
}; 
```

我是否根据某些用户参数将数组的大小调整为 N 大小。

我尝试在 NVIDIA 论坛上搜索过去的问题，但似乎由于一些安全问题它已被关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:10:21.067

你不能。当我想为我的应用程序这样做时，我在 NVIDIA OptiX 论坛上问了这个问题（希望我能给你一个 http 指针）。不幸的是，OptiX 使用的 ptx 生成文件的一个限制是您不能在您传递的辐射射线中进行这种动态分配。

对于我们的应用程序，我们必须改为使用一个具有最大大小的数组和一个指定当前运行长度的 uint。我知道这很浪费内存，但我看不出有什么办法。

您将希望为您的应用程序和硬件设置最大大小，因为在这种情况下可能会推送堆栈大小。

# c - 可变长度数组中的静态提示

> ID：12205983
> 
> 赞同：4
> 
> 时间：2012-08-30T21:43:33.897
> 
> 标签：c, arrays, c99

在 C99 中，我对这里的区别有点困惑：

```
int myfunc (int array[n], int n) { ... } 
```

不会编译。据我所知，您必须始终将对数组大小的引用放在首位，因此必须编写：

```
int myfunc (int n, int array[n]) { ... } 
```

但是，如果您提供 static 关键字，这绝对可以正常工作：

```
int myfunc (int array[static 1], int n) { ... } 
```

这个顺序对我来说更可取，因为我习惯于在函数调用中将数组放在第一位，但为什么会这样呢？

编辑：意识到第三个示例实际上不是 VLA 有助于...

作为参考，这是我正在查看的导致问题的代码：

```
int sum_array(int n, int m, int a[n][m])
{
  int i, j, sum = 0;
  for (i = 0; i < n; i++)
    for (j = 0; j < m; j++)
      sum += a[i][j];
  return sum;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-30T22:03:36.540

之所以

```
int myfunc (int n, int array[n]) { ... } 
```

有效并且

```
int myfunc (int array[n], int n) { ... } 
```

不是由于 C 的词法范围规则。标识符在被引入范围之前不能使用。这条规则有一些例外，但这不是其中之一。

**编辑**：这是C标准的相关段落：

> （C99，6.2.1p7）“任何其他标识符的范围都在其声明符完成后开始。”

此规则也适用于函数原型范围内的参数声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T22:07:49.870

错误的原因已经给你解释过了：你必须先声明`n` *，然后*才能在其他声明中使用它。

然而，值得注意的是，这些声明都没有真正声明可变长度数组，正如您所相信的那样。

的确，with 语法`[n]`首先在 C99 中被允许，并且它正式是一个 VLA 声明，但是在给定的上下文中，所有这些声明都声明`array`为`int *`类型参数，就像在 C89/90 中一样。这`[n]`部分不是任何形式的暗示。您可以`[n]`在此声明中使用的事实确实是 VLA 支持的副作用，但这是与 VLA 的任何关系结束的地方。这`[n]`被简单地忽略了。

“提示”声明需要`static`在`[]`. 因此，您的声明`[static 1]`等同于经典`int array[1]`声明（意味着`1`被忽略并且参数具有 type `int *`），除了它向编译器提示至少`1`元素必须存在于指向的内存位置`array`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T21:58:44.500

这是因为数组必须用常量值声明，因此您不能使用可变大小创建数组，因此不能传递具有可变大小的数组。此外，如果它只是一个单维数组，您根本不需要传递值，那就是传递第二个参数来告诉您数组的长度。

为了让它正常工作，只需像这样编写函数头：

```
int myfunc (int myArray[], int n) {...} 
```

顺序无关紧要，但是您不能将要传递的数组的大小设置为变量，它必须是一个常量值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-30T22:07:40.260

如果你正在使用 GCC 并且愿意使用他们的一些扩展，你可以在这里完成你想要的：

```
int myFunc (int len; /* notice the semicolon!! */ int data[len], int len)
{

} 
```

此扩展（可变长度数组）的文档在[此处](http://www.cs.fsu.edu/~baker/ada/gnat/html/gcc_5.html#SEC87)。

请注意，由于某种原因，这个扩展在[clang](http://clang.llvm.org)中不可用，不过我不太确定为什么。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-30T21:57:46.890

编辑：Derp，范围，当然。

我的问题是；为什么你需要这样做？无论如何，您确实得到了一个指针（您不能将数组传递给 C 中的函数，它们会降级为指针，而不管函数的签名如何）。它有助于让调用者知道输入的预期大小，但除此之外它就没用了。由于他们已经通过了大小，只需使用...

```
int myfunc(int arr[], size_t size) {
    // ...
} 
```

或者

```
int myfunc(int *arr, size_t size) {
    // ...
} 
```

# ruby-on-rails - 延迟作业参数错误

> ID：12205987
> 
> 赞同：3
> 
> 时间：2012-08-30T21:44:02.693
> 
> 标签：ruby-on-rails, delayed-job

我对使用 active_record 分支（[链接](https://github.com/collectiveidea/delayed_job_active_record)）的延迟作业感到困扰。

在控制器中：

```
guide = Rightsguide.new
guide.run(@works, current_user) 
```

在 Rightsguide ruby​​ 类中：

```
require 'delayed_job'
require 'delayed/tasks'
require 'prawn'
require 'open-uri'

class Runrightsguide

  def run(works, current_user)
    pdf = Rightsguidereport.new(works, current_user)
    filename     = "#{Rails.root}/public/#{Date.today}_rightsguide.pdf"
    pdf.render_file(filename)
    pdf_file = File.open(filename)
    archive = RightsguideArchive.new(:user_id => current_user)
    archive.pdf = pdf_file
    archive.save!

    User.find(current_user).notice "<a href='/rightsguide_archives' target='_blank'>View Rights Guide</a>", :level => :notice, :sticky => true, :title => "AIs generated." 
  end

end 
```

以上工作正常，但是当我使用延迟作业之一调用时，例如在我得到`handle_asynchronously :run`的方法之后。`run``wrong number of arguments (2 for 1)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:30:34.613

唔。原来`@works`争论是问题所在。这是一个 ActiveRecord 关系。Delayed_job 不喜欢它。将关系转换为 ID 数组就可以了。

# php - 需要帮助在表格中显示代码结果

> ID：12205989
> 
> 赞同：0
> 
> 时间：2012-08-30T21:44:13.990
> 
> 标签：php, javascript, html

我试图得到这个

```
for ($r = 1; $r <= 10; $r++) {
    if ($shirt_info[$r][0] != "Select One")
    {
        echo "<div class='shirtinfo'>Order $r: </div>";
        echo "<div class='shirtinfo'>Size: ".$shirt_info[$r][0]."</div>";
        echo "<div class='shirtinfo'>Price: ".$shirt_info[$r][1]."</div>";
        echo "<div class='shirtinfo'>Qty: ".$shirt_info[$r][2]."</div>";
        echo "<div class='shirtinfo'>SPE: ".$shirt_info[$r][5]."</div>";
        echo "<div class='shirtinfo'>LIA: ".$shirt_info[$r][6]."</div>";
        echo "<div class='shirtinfo'>Vendor: ".$shirt_info[$r][7]."</div>";
        echo "<div class='shirtinfo'>Style: ".$shirt_info[$r][8]."</div>";
        echo "<div class='shirtinfo'>Color: ".$shirt_info[$r][9]."</div>";
        echo "<div style='clear:both;'></div>";
    }
} 
```

在表格中显示，我不确定如何。我不断收到语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:51:18.130

你的`for`结尾不是`}` 我也建议你使用`table`而不是`div`如果你想显示一个表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:46:24.380

您向我们展示的代码有一个未终止的 for 循环。也许这是语法错误。

# java - 从动态自定义表、行中获取 id

> ID：12205991
> 
> 赞同：2
> 
> 时间：2012-08-30T21:44:22.617
> 
> 标签：java, android, onclicklistener

我正在创建一个带有动态自定义表格行的表格。我需要在活动类中获取 id。

main_Activity-->MyTableLayoutView-->MyTableRow

我的问题是，如何将在表格（TextViews）中单击的单元格的 id 获取到 main_Activiy。

MyTableRowView：

```
 public void addRow(String[] data, int[] rowId) {
    for (int i = 0; i < data.length; i++) {
        TextView tv = parseTextView(data[i]);
        tv.setId(rowId[i]);
        tv.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                TextView tv2 = (TextView) v;
                clickedText = tv2.getText().toString();
                Debug.debugMsg(clickedText + " " + tv2.getId());
            }
        });
        this.addView(tv);
    }
} 
```

据我所知，是从 TablerowView 类中获取 id，但我需要它在 Activity 类中，请如果有人能启发我。提前致谢。

活动类：

```
 private void showTables() {
    db.open();
    db.importDb();// TODO
    table = new TableLayoutView(this,Converter.toArrayListStringArray(db.getDbTablesForChoose()));
    table.addDataListArray(Converter.toArrayListStringArray(db.getDbTablesForChoose()),true);
    llChooseSQLTable.addView(table);
} 
```

表格布局视图：

```
 public void addDataListArray(ArrayList<String[]> data, boolean header) {

    for (int i = 0; i < ROW_NUMBERS; i++) {
        TableRowView tableRow = new TableRowView(context);

        tableRow.setLayoutParams(new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        tableRow.addRow(data.get(i),idHandler.getNextIdsRow());//idHandles passes unique id.
        this.addView(tableRow); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T22:18:46.003

您似乎可以从上面的代码中获取 ID。如果您主要关心的是将该 id 从视图传播回父类，那么您可以通过多种方式进行。一种方法是获取视图的上下文，然后将其转换为特定的活动并在该活动中调用一个函数，例如在 onClick() 操作中：

```
public void onClick(View v) {
  ((MyActivity)v.getContext()).insertNotificationMethod(v.getId());
} 
```

您的活动称为 MyActivity 并且您实现了一个名为 insertNotificationmethod 的方法，该方法采用整数。只有当这个视图总是在这个函数中时，这才有效，即使这样，它也是一种相当粗糙的方法。

你也可以直接在 onClick() 方法中调用它，使用：

```
MyActivity.this.insertNotificationMethod(v.getId()); 
```

但是，这种做事方式会将这种观点限制为仅在此特定活动中有用。

对于更通用的方式，您可以使用 BroadcastReceivers ，这可能会比您想要的更复杂一些。有关这些的更多信息，您可以在此处查看 Android 文档：http: [//developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T22:25:15.767

我能想到的唯一解决方案是将您的方法`addRow()`和`addDataListArray()`方法移至 Activity*并进行一些修改*：

```
public void addRow(String[] data, int[] rowId, TableRowView tableRow) {
for (int i = 0; i < data.length; i++) {
    TextView tv = parseTextView(data[i]);
    tv.setId(rowId[i]);
    tv.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            TextView tv2 = (TextView) v;
            clickedText = tv2.getText().toString();
            clickedId = tv2.getId());
        }
    });
    tableRow.addView(tv);
}
}

public void addDataListArray(ArrayList<String[]> data, boolean header, TableLayoutView table) {

for (int i = 0; i < ROW_NUMBERS; i++) {
    TableRowView tableRow = new TableRowView(context);

    tableRow.setLayoutParams(new LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    addRow(data.get(i),idHandler.getNextIdsRow(), tableRow);//idHandles passes unique id.
    table.addView(tableRow); 
}
} 
```

在您的活动中更改此行：

```
//table.addDataListArray(Converter.toArrayListStringArray(db.getDbTablesForChoose()),true);
addDataListArray(Converter.toArrayListStringArray(db.getDbTablesForChoose()),true, table); 
```

虽然我不知道你的应用程序的其他部分是否会受到我所做的*巨大*修改的影响。

祝你好运！

# clojure - 交换！atom 然后： java.lang.ClassCastException: java.lang.String 不能转换为 clojure.lang.IFn

> ID：12205996
> 
> 赞同：2
> 
> 时间：2012-08-30T21:44:50.747
> 
> 标签：clojure

所以，在我的 core.clj 文件中，我有：

```
(def page-buffer (BufferedReader. (InputStreamReader. (clojure.java.io/input-stream               (clojure.java.io/resource "mitochondria.html")))))    
(def parsed-page (atom "")) 
```

然后：

```
(defn -main [& args]
(let [port (Integer/parseInt (first args))]
(swap! parsed-page  (with-open []
                      (.toString (reduce #(.append %1 %2)
                                         (StringBuffer.) (line-seq page-buffer)))))
(println "Server is starting")
(println "port: " port)
(run-server port))) 
```

这会编译，然后我把它变成一个 uberjar。但是当我运行它时，我得到了交换线！炸毁：

```
Exception in thread "main" java.lang.ClassCastException: java.lang.String cannot be cast to clojure.lang.IFn
at clojure.core$swap_BANG_.invoke(core.clj:2106)
at serve_pages_from_memory.core$_main.doInvoke(core.clj:29)
at clojure.lang.RestFn.applyTo(RestFn.java:137)
at serve_pages_from_memory.core.main(Unknown Source) 
```

我在不使用原子的情况下尝试了这个，一切正常（使用用“def”定义的 var 作为字符串）但最终我想将此 var 发送到多个线程，所以我需要它是一个原子或代理。

我做错了什么？

更新：

杰里米·海勒，谢谢。已修复，但结果很丑陋：

```
(defn parse-buffer [& everything-else]
(with-open []
(.toString (reduce #(.append %1 %2)
                   (StringBuffer.) (line-seq page-buffer)))))

(defn -main [& args]
(let [port (Integer/parseInt (first args))]
(swap! parsed-page parse-buffer)
(println "Server is starting")
(println "port: " port)
(run-server port))) 
```

我必须给 parse-buffer 一个参数，否则我会出错。但我不使用这个论点，所以这很难看。我一定是写错了，是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T22:17:19.943

您需要将函数传递给`swap!`. 现在你正在传递一个值。

```
(let [foo (atom 1)]
  (swap! foo + 2)
  @foo) 
```

上面的表达式将返回 3。传入的函数取原子的当前值，返回值成为原子的新值。任何额外的参数都会传递给给定的函数。

* * *

要评论您的更新：是的，您确实需要为`swap!`. 第一个参数是原子的当前值。但是，您无需破解`parse-buffer`即可使其正常工作。你可以用一个匿名函数来包装它。

而且，`parse-buffer`可以大大简化。由于`line-seq`从给定阅读器返回一系列行，并在内部`str`使用 a `StringBuilder`，因此您可以将其应用于序列。

```
(defn parse-buffer []
  (with-open [buf page-buffer]
    (apply str (line-seq buf))))

(defn -main [& args]
  (let [port (Integer/parseInt (first args))]
    (swap! parsed-page (fn [cur-val] (parse-buffer)))
    (println "Server is starting")
    (println "port: " port)
    (run-server port))) 
```

# c# - 将模型元素值添加到 @Url.Content 问题

> ID：12205998
> 
> 赞同：0
> 
> 时间：2012-08-30T21:44:54.283
> 
> 标签：c#, asp.net-mvc-3

我只是向 Url.Content 添加一些模型元素值，但不知道该怎么做。

有什么线索吗？

谢谢！

那些行不行...

```
<img alt="" src="@Url.Content("~/Images/Houses/@(house.ImageFileName)")" />

<img alt="" src="@Url.Content("~/Images/Houses/@house.ImageFileName")" />

<img alt="" src="@Url.Content("~/Images/Houses/" + @house.ImageFileName + ")" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T21:47:34.363

您不需要`@`之前的，`house` `object`因为您已经声明了第一个代码块 at `@Url`。但这是下面最好的方法。

假设`house`是有效`object`的`context`：

```
<img alt="" src="@Url.Content(String.Format("~/Images/Houses/{0}", house.ImageFileName))" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T21:51:30.743

你也可以试试这个

```
<img alt="" src="@Url.Content("~/Images/Houses/" + house.ImageFileName)" /> 
```