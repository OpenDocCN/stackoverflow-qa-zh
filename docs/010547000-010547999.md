# StackOverflow 问答 10547000-10547999

# mobile - 尝试在移动控件视图中“加载更多”时引发 NoAccessSignal 异常

> ID：10547001
> 
> 赞同：0
> 
> 时间：2012-05-11T07:10:13.010
> 
> 标签：mobile, xpages

我有一个在 8.5.3 UP1 上运行的 XPages 应用程序，带有移动控制界面。它在我的开发和测试服务器上运行良好，但在生产中，当用户单击视图控件中的“加载更多”按钮时，我们会看到以下间歇性错误：

2012 年 5 月 10 日下午 4:12：在 com.ibm.domino.xsp.module.nsf.NotesContext.checkAccess(NotesContext.java:1611) 在 com.ibm.domino 处抛出异常 com.ibm.xsp.acl.NoAccessSignal .xsp.module.nsf.NotesContext.serverProcessSignedResource(NotesContext.java:955) 在 com.ibm.domino.xsp.module.nsf.NotesContext.setSignerSessionRights(NotesContext.java:926) 在 com.ibm.domino.xsp.module .nsf.ModuleClassLoader$DynamicClassLoader.loadClass(ModuleClassLoader.java:349) at java.lang.ClassLoader.loadClass(ClassLoader.java:619) at com.ibm.domino.xsp.module.nsf.ModuleClassLoader.loadClass(ModuleClassLoader.java :171) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:619) 在 com.ibm.designer.runtime.Application.loadClass(Application.java:708) 在 com.ibm.xsp.library.ApplicationFacesClassLoader.loadClass( ApplicationFacesClassLoader.java：54) 在 com.ibm.xsp.page.compiled.CompiledPageDriver.loadPage(CompiledPageDriver.java:61) 在 com.ibm.xsp 的 com.ibm.xsp.page.compiled.CompiledPageDriver.getClassForPageName(CompiledPageDriver.java:166) .application.ViewHandlerExImpl._createViewRoot(ViewHandlerExImpl.java:489) 在 com.ibm.xsp.application.ViewHandlerExImpl.createViewRoot(ViewHandlerExImpl.java:557) 在 com.ibm.xsp.application.ViewHandlerExImpl.doCreateView(ViewHandlerExImpl.java:141 ) 在 com.ibm.xsp.application.ViewHandlerEx.createView(ViewHandlerEx.java:90) 在 com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:238) 在 com.ibm.xsp.webapp.FacesServletEx .serviceView(FacesServletEx.java:200) 在 com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160) 在 com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137) 在 com。 ibm。xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103) 在 com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576) 在 com.ibm.domino.xsp.module.nsf。 NSFComponentModule.invokeServlet(NSFComponentModule.java:1267) 在 com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847) 在 com.ibm.designer.runtime.domino.adapter.ComponentModule$ ServletInvoker.doService(ComponentModule.java:796) 在 com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565) 在 com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService (NSFComponentModule.java:1251) 在 com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:598) 在 com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:421) 在 com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341) 在 com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)在 com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)

2012 年 5 月 10 日下午 4:43：在 com.ibm.domino.xsp.module.nsf.NotesContext.checkAccess(NotesContext.java:1611) 处抛出 com.ibm.xsp.acl.NoAccessSignal 异常 在 com.ibm.domino.xsp.module.nsf.NotesContext.serverProcessSignedResource(NotesContext.java:955) 在 com.ibm.domino.xsp.module.nsf.NotesContext.setSignerSessionRights(NotesContext.java:926) 在 com.ibm .domino.xsp.module.nsf.ModuleClassLoader$DynamicClassLoader.loadClass(ModuleClassLoader.java:349) at java.lang.ClassLoader.loadClass(ClassLoader.java:619) at com.ibm.domino.xsp.module.nsf.ModuleClassLoader com.ibm.designer.runtime.Application.loadClass(Application.java:708) 上 com.ibm.xsp 上的 java.lang.ClassLoader.loadClass(ClassLoader.java:619) 上的 .loadClass(ModuleClassLoader.java:171)。库.ApplicationFacesClassLoader.loadClass(ApplicationFacesClassLoader.java: xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)   在 com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576) 在 com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1267) 在 com.ibm .designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847) 在 com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796) 在 com.ibm .designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565) 在 com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1251) 在 com.ibm.domino.xsp .module.nsf.NSFService.doServiceInternal(NSFService.java:598) 在 com.ibm.domino.xsp.module.nsf.NSFService。com.ibm.designer.runtime.domino.adapter 上的 doService(NSFService.java:421)。LCDEnvironment.doService(LCDEnvironment.java:341) 位于 com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297) 位于 com.ibm.domino.xsp.bridge.http.engine.XspCmdManager。服务（XspCmdManager.java:272）

任何想法将不胜感激。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:09:36.807

Keith 和我都在以下场景中遇到过这种行为（在不同的应用程序中）：

1.  当前用户已通过目录服务进行身份验证；换句话说，他们在主 Domino 目录中没有帐户。
2.  XPage 具有特定于页面的 ACL

例如，我曾经在 watrCoolr 中使用页面 ACL 来指定经过身份验证的用户将拥有对聊天数据源的编辑器访问权限，但匿名用户只能拥有阅读器。只要我作为在 names.nsf 中明确注册的用户进行身份验证，它就可以正常工作。如果我以 LDAP 目录中定义的用户身份进行身份验证，该页面将堆栈跟踪。一旦我切换到简单地对匿名用户隐藏可编辑控件并删除页面 ACL，就不再有堆栈跟踪。

这可以解释为什么它在开发和测试中运行良好但在生产中崩溃，如果您没有在前者中使用目录帮助，而它们在后者中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:07:43.740

好的，这被证明是一个非常奇怪的问题，它特别影响了 iOS 设备。我编写了一些额外的代码来检测应用程序是否在独立模式下运行（即用户在主屏幕上创建了应用程序的快捷方式）。此代码循环遍历所有具有 onclick 事件的标签，并阻止它们启动 Safari 并强制它们在独立浏览器窗口中运行。在加载更多按钮的情况下，这就是导致服务器错误的原因。我仍然不明白*为什么*这是一个错误，但它很容易修复，当我循环浏览页面中的所有其他内容时，只需不要处理“加载更多”按钮。

谢谢各位的帮助。

# ruby-on-rails - 如何在 Bootstrap 2 中更改响应式设计的默认宽度

> ID：10547004
> 
> 赞同：1
> 
> 时间：2012-05-11T07:10:22.417
> 
> 标签：ruby-on-rails, css, twitter-bootstrap, responsive-design

如何在引导程序中更改响应式设计的默认宽度？

```
@import "twitter/bootstrap/bootstrap";
body { padding-top: 60px; }
@import "twitter/bootstrap/responsive"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:32:09.733

[我刚刚在这里](https://stackoverflow.com/questions/10539361/how-to-customize-responsive-columns-and-inputs-fields-in-twitter-bootstrap/10549587#10549587)回答了一个类似的问题，此外我还可以推荐：

如果您使用较少尝试：

```
// Default 940px grid
// -------------------------
@gridColumns: 12;
@gridColumnWidth: 60px;
@gridGutterWidth: 20px;
@gridRowWidth: (@gridColumns * @gridColumnWidth) + (@gridGutterWidth * (@gridColumns - 1));

// Fluid grid
// -------------------------
@fluidGridColumnWidth: 6.382978723%;
@fluidGridGutterWidth: 2.127659574%; 
```

更多变量可以在[git上找到](https://github.com/twitter/bootstrap/blob/master/less/variables.less)

* * *

如果您使用的是 sass，请尝试：

```
// Default 940px grid
// -------------------------
$gridColumns: 12;
$gridColumnWidth: 60px;
$gridGutterWidth: 20px;
$gridRowWidth: ($gridColumns * $gridColumnWidth) + ($gridGutterWidth * ($gridColumns - 1));

// Fluid grid
// -------------------------
$fluidGridColumnWidth: 6.382978723%;
$fluidGridGutterWidth: 2.127659574%; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T08:01:45.540

实际上所有的 fluidGridGutterWidth 和 ColumnWidth 东西都被完全忽略了。可以在任何我想要的地方设置东西。什么都没有改变...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T09:41:45.660

您可以使用他们的网络界面修改网格宽度和其他任何内容，然后只需点击“**自定义和下载**”，您将获得修改后的 CSS：

# [http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

# java - 无法在目标定义中找到可安装单元

> ID：10547007
> 
> 赞同：9
> 
> 时间：2012-05-11T07:10:32.247
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-pde

我创建了自己的目标定义。到现在为止它工作得很好。今天我打开了这个目标定义，发现所有软件站点都出现以下错误：

```
Unable to locate installable unit <unit name> 
```

目标定义文件如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?pde version="3.6"?>

<target name="indigo" sequenceNumber="20">
<locations>
<location includeAllPlatforms="false" includeMode="planner" includeSource="true" type="InstallableUnit">
<unit id="org.eclipse.zest.feature.group" version="1.3.0.v20110425-2050-67A18yF6F18CBD5A7N54242"/>
<unit id="org.eclipse.zest.sdk.feature.group" version="1.3.0.v20110425-2050-67C18COMPIAKSVKGQaRTQTiSN8WP"/>
<unit id="org.eclipse.zest.source.feature.group" version="1.3.0.v20110425-2050-67A18yF6F18CBD5A7N54242"/>
<repository location="http://download.eclipse.org/releases/indigo"/>
</location>
<location includeAllPlatforms="false" includeMode="planner" includeSource="true" type="InstallableUnit">
<unit id="org.eclipse.jdt.feature.group" version="3.7.2.v20120120-1414-7z8gFcuFMP7BW5XTz0jLTnz0l9B1"/>
<unit id="org.eclipse.jdt.source.feature.group" version="3.7.2.v20120120-1414-7z8gFcuFMP7BW5XTz0jLTnz0l9B1"/>
<unit id="org.eclipse.pde.source.feature.group" version="3.7.2.v20120120-1420-7b7rFUOFEx2Xnqafnpz0E--0"/>
<unit id="org.eclipse.platform.sdk" version="3.7.2.M20120208-0800"/>
<unit id="org.eclipse.rcp.id" version="3.7.2.M20120208-0800"/>
<unit id="org.eclipse.rcp.sdk.id" version="3.7.2.M20120208-0800"/>
<repository location="http://download.eclipse.org/eclipse/updates/3.7"/>
</location>
<location includeAllPlatforms="false" includeMode="planner" includeSource="true" type="InstallableUnit">
<unit id="org.eclipse.egit.feature.group" version="1.3.0.201202151440-r"/>
<unit id="org.eclipse.egit.source.feature.group" version="1.3.0.201202151440-r"/>
<unit id="org.eclipse.jgit.feature.group" version="1.3.0.201202151440-r"/>
<unit id="org.eclipse.jgit.source.feature.group" version="1.3.0.201202151440-r"/>
<repository location="http://download.eclipse.org/egit/updates"/>
</location>
<location path="${project_loc}/lib" type="Directory"/>
<location includeAllPlatforms="false" includeMode="planner" includeSource="true" type="InstallableUnit">
<unit id="org.tmatesoft.svnkit.feature.group" version="1.7.4.t20120412_2022"/>
<repository location="http://eclipse.svnkit.com/1.7.x"/>
</location>
<location path="${project_loc}/lib/deltapack" type="Profile"/>
</locations>
</target> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-11-07T12:21:02.223

`.target`对我来说，手动编辑文件并增加`sequenceNumber`属性每次都有效（到目前为止）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-18T13:07:41.557

这是 Eclipse 的一个已知问题，不幸的是，没有明确的解决方案。可以解决这个问题的事情：

*   重启 Eclipse
*   选择所有条目并点击“重新加载”
*   使用 -clean 命令行选项重新启动 Eclipse（不用担心，不会擦除工作区）
*   选择一个条目并打开它（点击“添加...”）。旧的选择将丢失，因此您必须重新选择它。关闭后，目标平台将被重新加载，运气好的话，不仅仅是您刚刚编辑的更新站点。
*   核选项：删除工作区中的 .metadata 文件夹 - 您必须重新设置工作区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-06T14:45:05.677

您也可以删除 P2 池目录。在 Linux 上，这通常位于您的主目录下的 .p2/pool 文件夹中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-17T09:02:04.060

今天我遇到了同样的问题，我做了以下事情。

*   我删除了用户目录中的“.m2/repositories”文件夹。
*   之后，我尝试更新 *.target 文件中的所有软件站点。

然后发生了一个错误，我的关系上的另一个存储库丢失了。

*   首先，我手动从 *.target 文件中删除了这个存储库并再次更新它。

`unable to locate installable unit <unit name>`错误消失了。然后我修复了缺少存储库的问题，一切似乎都很好。我希望这会有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-08T17:00:38.897

我将您的目标定义缩减到其中一个站点（eclipse/updates/3.7）并且目标正确解析。

您收到的错误意味着您尝试下载的网站没有您要求的内容。这可能意味着您正在请求站点上不再存在的单元或版本，或者可能意味着该站点无法访问。

# sql - Sql比较和更新

> ID：10547018
> 
> 赞同：0
> 
> 时间：2012-05-11T07:11:29.097
> 
> 标签：sql, sql-server

选择表中的行，比较 yesderday 和 today 之间的一列，如果今天的值不等于 yesderaday 的值，因此表中的其他列应更新为“已更改”或“未更改”...有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:39:10.770

在同一张表之间使用自联接。

```
SELECT *, 
       CASE 
         WHEN a.value = b.value THEN 'Not' 
         ELSE 'Changed' 
       END AS Modified 
FROM   MyTable a 
       INNER JOIN MyTable b 
         ON Dateadd(d, -1, a.mydate) = b.mydate 
```

# haskell - 改变 succ 和 pred 函数的值返回

> ID：10547019
> 
> 赞同：1
> 
> 时间：2012-05-11T07:11:31.223
> 
> 标签：haskell

我想定义一个通用函数来获取范围内的下一个值。我有以下函数定义：

```
nextValInRange :: (Enum a) => a -> a
nextValInRange = succ 
```

上述定义的问题在于，对于分数值，我想更改 succ 函数增量的值。我希望 succ 不增加 1.0，而是增加 0.2。例如：

```
(succ 10.0) = 10.2, not 11.0 
```

问题是我仍然希望 nextValInRange 函数适用于 Enum 类型类中的任何值。

我可以写：

```
nextValInRange :: (Enum a, Num a) => a -> a -> a
nextValInRange stepVal rangeVal = rangeVal + stepVal 
```

但我不想添加 Num 类型的类限制。

有没有一些我可以用来实现这一目标的haskell voodoo？

我能想到的另一个解决方案是有 2 个单独的 nextValInRange 函数，1 个用于 Nums，另一个用于普通 Enums。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:36:40.287

您能否修改[EnumFromTo](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/base-4.2.0.1/Prelude.html#v%3aenumFromThenTo)的工作方式以满足您的需求？除非您可以使用 newtype，否则我希望您需要自己的多态函数或自己的类型类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T23:45:47.830

> 有没有一些我可以用来实现这一目标的haskell voodoo？

本质上，没有。你可以让它与一个额外的 typeclass 和一些可怕的 LANGUAGE pragma 一起工作，但这可能比首先为你自己的 typeclass 定义实例更工作。

我建议`enumFromTo`按照 Chris 的建议使用，因为这基本上解决了您正在解决的问题。

但是，您可以只`nextValInRange`使用调用者提供的函数。假设它被用在这样的一些代码中：

```
makeRange :: Enum a => a -> a -> [a]
makeRange lo hi
  | lo < hi = lo : makeRange (nextValInRange lo) hi
  | otherwise = [] 
```

只需将传递的隐式枚举字典更改为显式函数传递

```
makeRange :: (a -> a) -> a -> a -> [a]
makeRange mySucc lo hi
  | lo < hi = lo : makeRange (mySucc lo) hi
  | otherwise = [] 
```

然后你可以传入`(+ 0.1)`浮点函数，以及`succ`你认为合适的任何类型。

# php - 设计一个模板数据库，该数据库可以有效地重新用于其他相同的项目，只需稍作改动

> ID：10547021
> 
> 赞同：0
> 
> 时间：2012-05-11T07:11:44.350
> 
> 标签：php, sql

我经历过，不同数据库项目的大多数要求几乎相同。例如，两个不同学院或医院的数据库几乎相同。我在想是否可以实施一些技术来设计模板数据库，该数据库可以有效地重用于具有相同要求的其他项目。我们所要做的就是改变设计。这也将节省开发人员的大量时间。我们如何设计一个数据库模板，只需稍作改动就可以在其他项目中重复使用？在设计/构建此类模板时，通常需要牢记哪些事项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:56:12.790

> 我经历过，不同数据库项目的大多数要求几乎相同。例如，两个不同学院或医院的数据库几乎相同。

通常，重用内容的规则是封装变化的内容：确定哪些部分相同，将其存储在 .SQL 文件中，以便您可以反复重用。但是我确实注意到了；我设计了很多数据库，从管理软件到简单的网站，再到网上商店，我没有看到设计中有很多重叠。

# c# - 使用 Aspx 从 Mysql 下载 BLOB 文件

> ID：10547024
> 
> 赞同：1
> 
> 时间：2012-05-11T07:11:59.800
> 
> 标签：c#, asp.net, mysql, download, blob

我们将文件作为 BLOB 存储在 mysql 中，其文件名也是如此。同时上传它的工作正常。现在我们想从 gridview 下载它，这也很完美。但问题是，当我们尝试打开它时，下载罚款后显示文件格式错误。我们只处理办公文件和pdf。

```
try
{
  int did = Convert.ToInt32(e.CommandArgument);
  DataSet path = download.GetresourcePath(did);
  byte[] fileFromDatabase = null;
  DataRow row = path.Tables[0].Rows[0];
  fileFromDatabase = (byte[])row["UPLFILE"];
  string filename = (string)row["FILENAME"];

  if (fileFromDatabase.Length > 0)
  {
    Response.Clear();
    Response.Buffer = true;
    Response.ContentType = string.Format("application/{0}",
      Path.GetExtension(filename).Substring(1));
    Response.AddHeader("content-disposition", 
      string.Format("attachment;filename={0}", filename));
    Response.BinaryWrite(fileFromDatabase);
    Response.Flush();
    Response.End();
  }
}
catch (Exception)
{
  return;
} 
```

1.  这里 did 是我们从网格视图中获取的文件的 ID。
2.  filename 是我们从数据库中获取的文件的名称。
3.  fileFromDatabase 是来自 Mysql 的 BLOB 文件，我们将其转换为 Byte。

那么有人可以建议我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:23:51.767

尝试删除标题条目并手动添加。

```
 Response.Clear();
 Response.ClearHeaders();
 Response.AddHeader("Content-Type", "application/octet-stream");
 Response.AddHeader("Content-Length", fileFromDatabase.Length.ToString());
 Response.AddHeader("Content-Disposition",string.Format("attachment;filename={0}", filename));
 Response.BinaryWrite(fileFromDatabase);
 Response.Flush();
 Response.End(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:15:16.867

我建议您不要将文件存储为 BLOB。如果没有别的，这对性能非常不利。

您应该将文件存储在服务器的文件系统中，并在数据库中存储文件的路径。

# c# - 如何使用javascript在asp.net中gridview内的按钮单击上应用文本框空白验证？

> ID：10547025
> 
> 赞同：3
> 
> 时间：2012-05-11T07:12:07.427
> 
> 标签：c#, javascript, asp.net, vb.net, validation

如何在javascript中的gridview内单击按钮时应用文本框空白验证？我有一个gridview，其中包含2个文本框和每行中的一个保存按钮。我想在相应的保存按钮单击时验证文本框。

我已经应用了逻辑，但问题是它只适用于硬编码的文本框 id。如何修改此代码以使其适用于所有 gridview 行？

```
function gvValidate() {

var grid = document.getElementById('<%= GridViewCTInformation.ClientID %>');
 if(grid!=null) 
  {
   var Inputs = grid.getElementsByTagName("input"); 
    for(i = 0; i < Inputs.length; i++) 
     {
      if(Inputs[i].type == 'text' ) 
       {
           if (Inputs[i].id == 'ctl00_contentPlaceHolderSubScreen_GridViewCTInformation_ctl02_TextBoxCTTermCode') 
             {
                 if (Inputs[i].value == "") {
                     alert("Enter values,blank is not allowed");
                     return false;
                 }

             }
             else if (Inputs[i].id == 'ctl00_contentPlaceHolderSubScreen_GridViewCTInformation_ctl02_TextBoxCTTermDesc') {
                 if (Inputs[i].value == "") {
                     alert("Enter values,blank is not allowed");
                     return false;
                 }
             }

      }
     }
     return true;
 } 
```

}

```
 Protected Sub GridViewTaxInformation_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridViewTaxInformation.RowDataBound
    Try
        If e.Row.RowType = DataControlRowType.DataRow Then

            Dim btnSave As Button = DirectCast(e.Row.FindControl("ButtonSave"), Button)
            btnSave.Attributes.Add("onclick", "return gvValidate()")
        End If
    Catch ex As Exception
        Common.WriteLog(ex.Message)
        Common.WriteLog((ex.StackTrace))
        Response.Redirect("..\Errors.aspx", False)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T15:16:08.610

最后我得到了我的问题的解决方案..我刚刚将 gridview 行的索引传递给了 javascript 函数。

这是代码

```
 function gvValidate(rowIndex) {

var grid = document.getElementById('<%= GridViewCTInformation.ClientID %>');
 if(grid!=null) {
     var Inputs = grid.rows[rowIndex + 1].getElementsByTagName("input"); 
    for(i = 0; i < Inputs.length; i++) 
     {
      if(Inputs[i].type == 'text' ) 
       {
                  if (Inputs[i].value == "") {
                     alert("Enter values,blank is not allowed");
                     return false;
                 }

      }
     }
     return true;
 } 
```

}

```
Protected Sub GridViewCTInformation_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridViewCTInformation.RowDataBound
    Try
        If e.Row.RowType = DataControlRowType.DataRow Then
            Dim btnSave As Button = DirectCast(e.Row.FindControl("ButtonCTInfoSave"), Button)
            btnSave.Attributes.Add("onclick", "return gvValidate(" + e.Row.RowIndex.ToString() + ")")
        End If
    Catch ex As Exception
        Common.WriteLog(ex.Message)
        Common.WriteLog((ex.StackTrace))
        Response.Redirect("..\Errors.aspx", False)
    End Try
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:14:53.983

不要查身份证。只需检查空白值。

```
 if(Inputs[i].type == 'text' ) 
 {

             if (Inputs[i].value == "") {
                 alert("Enter values,blank is not allowed");
                 return false;
             }

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:39:54.510

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="*" ControlToValidate="the name of your textbox to be validated" ForeColor="Red"></asp:RequiredFieldValidator> 
```

试试看可能对你有帮助，你可以使用验证控件来验证任何输入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-06T10:26:05.850

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
$(function () {
    $("[id*=GridView1] [id*=lnkUpdate]").click(function () {
        //Find the GridView Row using the LinkButton reference.
        var row = $(this).closest("tr");

        //Find the TextBox control.
        var txtName = row.find("[id*=txtName]");

        //Find the DropDownList control.
        var ddlCountries = row.find("[id*=ddlCountries]");

        var message = "";

        //Validate the TextBox control.
        if ($.trim(txtName.val()) == "") {
            message += "Please enter Name.\n";
        }

        //Validate the DropDownList control.
        if (ddlCountries.val() == "") {
            message += "Please select Country.";
        }

        //Display error message.
        if (message != "") {
            alert(message);
            return false;
        }
        return true;
    });
});
</script> 
```

您可以尝试上面的代码进行网格视图验证。

# asp.net-mvc - 在MVC中如何管理不同区域和前端的单独登录和注销

> ID：10547032
> 
> 赞同：2
> 
> 时间：2012-05-11T07:12:19.610
> 
> 标签：asp.net-mvc, model-view-controller, form-authentication

在 MVC 中，我在一个应用程序中有四个不同的区域。因此，当我在一个浏览器中打开两个区域并从一个区域注销时，它也会将我从另一个区域注销。

我在包含一个区域管理员和前端的 MVC 应用程序中使用表单身份验证。当我登录管理员并且如果我在同一个浏览器中打开前端或者当我从前端注销时，它也会将我从管理员中注销。

是否可以使用表单认证来管理区域认证。

我可以使用以下代码为所有区域管理不同的 web.config：

```
<location path="Admin" >    
<system.web>
        <authentication mode="Forms">
            <forms 
                name="MyAreaCookie"
                loginUrl="~/MyArea/Account/LogOn" 
                timeout="2880" 
            />
        </authentication>
    </system.web>
</location> 
```

但以上代码仅适用于“区域”下的视图。现在的情况是当我从任何“区域”部分注销时，它会自动从前端注销我。有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:15:33.663

不。

但是，您可以按照我在这里描述的方式在不同的选项卡中使用不同的会话：http: [//blog.gauffin.org/2012/02/get-a-unique-session-in-each-browser-tab/](http://blog.gauffin.org/2012/02/get-a-unique-session-in-each-browser-tab/)

# prolog - 序言中的模式

> ID：10547033
> 
> 赞同：0
> 
> 时间：2012-05-11T07:12:28.097
> 
> 标签：prolog, cycle

取所有长度为 N 的不同位模式，并将它们排列在一个循环中，以使每个模式与 N - 1 位中的两个相邻模式重叠。然后将循环扁平化为 Prolog 列表。

编写一个谓词`pattern(N,L)`，返回一个包含所有长度为 N > 0 的位模式的位列表，遵循上述规则。请注意，有多种可能的解决方案。你只需要生产一个。

```
?- pattern(1, L).
L = [0,1]
?- pattern(2, L).
L = [0,0,1,1]
?- pattern(3, L).
L = [0,0,0,1,1,1,0,1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:24:01.963

Abbas Alkahim在[A Simple Combinatorial Algorithm for De Bruijn Sequences](http://duch.mimuw.edu.pl/~rytter/TEACHING/TEKSTY/PreferOpposite.pdf)中给出了生成这些的简洁方法。

它可能适用于稍作调整的 Prolog 实现。将他的方法称为 Prefer Opposite Algorithm，对于模式长度 N，概述的步骤如下：

1.  将列表的前 N ​​个“位”设置为 0。
2.  对于下一个“位”，考虑与前一个*相反*的奇偶校验位。
3.  如果生成的 N 位模式以前不存在于列表中，则将该位连接到列表的末尾并继续。（返回第 2 步）
4.  另一方面，如果该模式确实存在，请尝试下一个与前一个*相等*的奇偶校验位。
5.  如果该 N 位模式不存在，则将该位连接到列表的末尾并继续。（返回步骤 2）。
6.  否则停止。

这导致一个序列包含长度为 N 的所有二进制模式，*除了*N 1 的模式，并以 N-1 1 后跟 N-1 0 的模式结束。要获得完整的 De Bruijn 序列，请将最后的 N-1 个 0 替换为单个 1 条目（并且该序列应在该点环绕到长度为 2^N 的循环）。

对于 Prolog 实现，我怀疑如果将位添加到列表的开头而不是末尾，事情会最容易进行。不管怎样，我会试一试，让你知道它是否能像我希望的那样工作。

* * *

我昨晚写了我的代码，今天早上测试了它，首先尝试相反的奇偶校验位，然后将位添加到列表的开头。N = 1 的情况看起来有点反常，在努力编写与 N > 1 相同的代码后，我回到只返回 N = 1 的 [1,0]。

[另一个很好的练习是使用差异列表](http://www.cs.cmu.edu/~fp/courses/lp/lectures/11-diff.pdf)技术编写将位添加到序列末尾的代码。

* * *

**补充：（代码）**

这是一个实现，它通过在列表的前面添加条目来构建表示 De Bruijn 序列的列表，确定性谓词**binaryDeBruijnSeq/2**采用（绑定）正整数 N 作为模式长度并将所述列表作为第二个参数返回：

```
/*
   Prolog implementation of PreferOpposite
     "A Simple Combinatorial Algorithm
          for De Bruijn Sequences"
             by Abbas Alkahim:
   http://duch.mimuw.edu.pl/~rytter/TEACHING/TEKSTY/PreferOpposite.pdf

   Construct binary De Bruijn sequence for all N bit patterns
   (a list construed as cycle) by adding to front of list:

    1\.  If N = 1, return [1,0]; otherwise begin the sequence
        with N zeros.
    2\.  For next bit, first try one of parity opposite to the
        previous one, then try one of the same parity, so that
        an N bit pattern not already found results.  Repeat.
    3\.  When no further bits can be added, the final N-1 bits
        will be zeros.  Replace them with a single one bit.
*/
binaryDeBruijnSeq(1,[1,0]).
binaryDeBruijnSeq(N,[1|ZeroStrip]) :-
    N > 1,
    zeroNFill(N,ZeroNBits),
    accrueDeBruijn(ZeroNBits,ZeroNBits,Accrue),
    zeroStrip(Accrue,ZeroStrip).

zeroNFill(0,[ ]).
zeroNFill(N,[0|Fill]) :-
    N > 0,
    M is N-1,
    zeroNFill(M,Fill).

accrueDeBruijn(NBits,SoFar,Final) :-
    NBits = [Bit|_],
    shorten(NBits,Short),
    Opp is 1 - Bit,
    not(alreadyFound([Opp|Short],SoFar)),
    !,
    accrueDeBruijn([Opp|Short],[Opp|SoFar],Final).
accrueDeBruijn(NBits,SoFar,Final) :-
    NBits = [Bit|_],
    shorten(NBits,Short),
    not(alreadyFound([Bit|Short],SoFar)),
    !,
    accrueDeBruijn([Bit|Short],[Bit|SoFar],Final).
accrueDeBruijn(_,Final,Final).

shorten([_],[ ]) :- !.
shorten([H|T],[H|S]) :- shorten(T,S).

/* alreadyFound(NBits,DeBruijn) */
alreadyFound(NBits,DeBruijn) :-
    initialSeq(NBits,DeBruijn).
alreadyFound(NBits,[_|DeBruijn]) :-
    alreadyFound(NBits,DeBruijn).

initialSeq([ ],_).
initialSeq([H|T],[H|L]) :-
    initialSeq(T,L).

zeroStrip([0|T],S) :- !, zeroStrip(T,S).
zeroStrip(S,S). 
```

这也是我的后续练习的代码，**pattern/2**通过添加到尾部来构建列表。**即使考虑到从上面重用谓词initialSeq/2**的事实，得到的实现也稍微紧凑：

```
/* follow-up, build De Bruijn sequence by adding to tail */
pattern(1,[0,1]).
pattern(N,DeBruijn) :-
    N > 1,
    zeroNFront(N,[1|X],DeBruijn),
    DeBruijn = [0|NBits],
    patternAux(N,DeBruijn,NBits,[1|X],1),
    !.

zeroNFront(0,Last,Last).
zeroNFront(N,List,Last) :-
    N > 0,
    M is N-1,
    zeroNFront(M,[0|List],Last).

patternAux(N,DeBruijn,_,[1,1],C) :-
    C is N-1,
    !.
patternAux(N,DeBruijn,NBits,[Bit|X],C) :-
    Opp is 1-Bit,
    X = [Opp|Y],
    NBits = [_|MBits],
    not(alreadyFoundAux(DeBruijn,MBits,Y)),
    patternAux(N,DeBruijn,MBits,[Opp|Y],Opp).
patternAux(N,DeBruijn,NBits,[Bit|X],C) :-
    X = [Bit|Y],
    NBits = [_|MBits],
    ( Bit = 1 -> D is C+1 ; D = 0 ),
    patternAux(N,DeBruijn,MBits,[Bit|Y],D).

alreadyFoundAux(L,L,[ ]) :- !, fail.
alreadyFoundAux(K,L,[ ]) :-
    initialSeq(L,K).
alreadyFoundAux([_|K],L,Y) :-
    alreadyFoundAux(K,L,Y). 
```

注意：对于相同的 N，**binaryDeBruijnSeq/2的结果将是****pattern/2**的反向列表。

# facebook - 如何创建像雅虎这样的 Facebook 登录：

> ID：10547034
> 
> 赞同：1
> 
> 时间：2012-05-11T07:12:31.170
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

如果你点击这里：

[http://shine.yahoo.com/parenting/time-magazines-breastfeeding-cover-moms-react-185700989.html](http://shine.yahoo.com/parenting/time-magazines-breastfeeding-cover-moms-react-185700989.html)

然后单击“**使用 Facebook 登录**”，然后将打开一个弹出窗口。在此弹出窗口中，您可以进行 facebook 登录，但它与经典的 facebook 登录不同：

事实上，**发布操作权限**出现在此弹出窗口中，而不是在经典的 facebook 登录中，发布操作权限出现在下一步中。

如何创建像 yahoo 这样的 facebook 登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:37:55.937

如果您检查呈现的弹出窗口中的 iframe，则对话框中的所有内容都是从 Facebook 提供的。这一定是雅虎与 Facebook 建立某种特殊合作关系的结果。这可能是从 2006 年雅虎提出收购 Facebook 时开始的。

我的猜测是要进行这种设置，您需要认识 Facebook bizdev 中的某个人，并且能够为他们的网站带来大量流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T11:38:28.933

Facebook 和 yahoo 都使用 openID 进行身份验证，使用 Outh 进行授权。在 facebook 中使用您需要向我们提供 api 库进行授权阅读[此处的文档](http://developers.facebook.com/docs/appsonfacebook/tutorial/#feed)你应该有一些javascript或服务器端脚本语言knowledege。对于雅虎，同样适用。雅虎使用oauth 2.0进行授权。当雅虎用户点击登录按钮时，如果他/她使用outh系统将他/她重定向到雅虎/she 允许您的应用程序然后使用您在使用 yahoo 创建应用程序中指定的 url 将他/她重定向到您的站点。如果您需要创建类似 facebook 样式的对话框，请在此处阅读文档>/a>，那么您需要有一些 css javascript 或 jquery 知识，但是有一个简单的插件 lightbox 或 fancybox 插件，您可以在其中创建一个 iframe 或 div 标签来保存对话框的内容。

# php - 从服务器目录填充选择 PHP jQuery AJAX

> ID：10547038
> 
> 赞同：2
> 
> 时间：2012-05-11T07:12:49.237
> 
> 标签：php, jquery, html, ajax, directory

我的服务器上有一个文件结构，看起来像这样：

![在此处输入图像描述](../Images/b9933b44e2ce9ba204740470b492ffc3.png)

我的问题相对复杂：如何`<select>`从服务器子文件的内容中逐步填充 html 标签。

例如，下面我有 3 个`<select>`标签，它们反映了上面显示的文件结构。当第一个选择改变时，jQuery 应该使用 AJAX 和 PHP 在服务器上找到该目录，并将所有子文件列出到第二个`<select>`. 单击第二个时，应列出该文件夹的所有子文件，依此类推。最终我想要5个`<select>`标签。

![在此处输入图像描述](../Images/f1d0d1138bae9c83080ab3ff98a4c733.png)

我认为这最好使用 jQuery 来完成，它会检测到选择中的变化：

```
$("select").change(function() {
        var selected = $(this).children("option:selected").text();
}); 
```

将该变量发送到 AJAX，它要求 PHP 文件返回该文件夹的子文件数组，并用该数组中的数据填充下一个选择。我不太自信的地方是 PHP。

我尝试过的：查看[TreeView](http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/)系统 - 不合适。试图修改[TreeView](http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/)系统以使用选择 - 没有结果！也许有人可以尝试修改我链接的那个？

在此先感谢，任何帮助将一如既往，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:22:30.297

使用此处讨论的方法获取目录路径 -->[使用 scandir() 在目录中查找文件夹 (PHP)](https://stackoverflow.com/questions/608450/using-scandir-to-find-folders-in-a-directory-php)

收集子目录/文件的字符串（路径）并构建下一级

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:25:09.543

1.  通过 JQuery 在`select`选择器中附加一个容器更改第一个选择时发出 AJAX 请求，如下所示：`$('ajax_process.php #select_a').post()`
2.  像这样设置您的接收 AJAX 页面：

    ```
    //<?php
    //work, etc

    //you said "return array of the sub-files", so I reckon:

    $select = "<select id='data'>";
    foreach ($array as $select_item) {
       $select .= "<option value='$select_item'" . $select_item . "</option>";
    }
    $select .= "</select>";

    //now $select contains your HTML code for your select box.
    ?>

    //break out of php, then:
    <span id="select_a">
    <?php print $select; ?>
    </span> 
    ```

3.  您的 AJAX 调用现在可以返回您的动态选择框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:36:46.950

使用文件夹目录填充选择选项值：

```
<div class="selects">
    <select name="folder1">
        <option value="folder1">folder1</option>
        <option value="folder2">folder2</option>
        <option value="folder3">folder3</option>
    </select>
</div> 
```

jQuery：

```
// Use live. Because the other selects will be filled with jquery.
$("select").live("change", function() {
    var folder = $(this).val();
    var select_id = $(this).attr("name").replace('folder', '');

    $.ajax({
        url: 'ajax.php',
        type: "POST",
        data: {"folder": folder},
        success: function(data) {
            var select = $("<select>");

            select_id++;

            select.attr("name", "folder"+select_id).append(data);
            $(".selects").append(select);
        }
    });
}); 
```

php：

```
<?php
    $shared = "some/path/to/shared/folders/";
    $folder = $_POST['folder'];

    $scan = scandir($shared.$folder);

    $bad = array(".", "..", ".DS_Store", "_notes", "Thumbs.db");

    $scan = array_diff($scan, $bad);

    foreach ($scan as $val)
    {
        if (is_dir($shared.$folder.'/'.$val))
            echo '<option value="'.$folder.'/'.$val.'">'.$val.'</option>';
    }
?> 
```

我没有测试它可能有一些拼写错误，但这应该可以解决问题

# objective-c - 如何阅读苹果开发者网站上的文档？

> ID：10547041
> 
> 赞同：0
> 
> 时间：2012-05-11T07:12:57.893
> 
> 标签：objective-c, macos, cocoa

我是可可编程的新手，有人告诉我苹果开发者网站上的文档是“最好的书”，我的问题是，有很多文档，谁能告诉我 Mac 的阅读顺序（**不是 iOS**）编程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:24:39.207

Apple 的文档是一个很好的参考，而不是操作指南。

如果你从零开始，一定要先看一些书。我会推荐任何上面写着“Big Nerd Ranch”的东西。亚伦·希勒加斯（Aaron Hillegas）可能比这个星球上的任何人都更了解教人们可可。

*   [Objective-C 编程：大书呆子牧场指南](https://rads.stackoverflow.com/amzn/click/com/0321706285)
*   [Mac OS X 的 Cocoa 编程](https://rads.stackoverflow.com/amzn/click/com/0321774086)

一旦你在基础上站稳了脚跟，Apple 文档就是一个了不起的参考。特别是，请查看[“指南”部分](https://developer.apple.com/library/mac/navigation/#section=Resource%20Types&topic=Guides)。以下是一些更重要的（排名不分先后）：

*   [Objective-C 编程语言](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html)
*   [Objective-C 编程中的概念](https://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010810)
*   [Xcode 4 用户指南](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010215)
*   [你的第一个 Mac 应用](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Mac101/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010611)
*   [Mac OS X 人机界面指南](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)
*   [高级内存管理编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

不过，请查看整个指南部分，那里有很多好东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:24:52.877

如果你问我，我不能说 Apple Docs 是最好的书。如果您想找到特定的东西，它们非常有用，即您知道要找到什么。

如果您是 Cocoa 开发的新手，并且只想快速入门，那么最好转向某种“开始 mac 开发”书籍或其他开发资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:26:24.200

从 Objective-C 编程语言开始 [https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Introduction/introObjectiveC.html)

# python - 如何使 TextBox 正确放置在 Tkinter 中的搜索条目下？

> ID：10547043
> 
> 赞同：0
> 
> 时间：2012-05-11T07:13:04.710
> 
> 标签：python, tkinter

```
def initUI(self):
     self.columnconfigure(5, weight=1)
     self.rowconfigure(3, weight=1)
     self.search_label = Label(self, text='Keyword:')
     self.search_label.grid(row=0, column=0, padx=5)

     self.keywords = StringVar()
     self.search_bar = Entry(self, width=30,textvariable=self.keywords)
     self.search_bar.grid(row=0, column=1)

     self.search_button = Button(self, text="Search",
                          command=self.handler_search)
     self.search_button.grid(row=0, column=3, padx=5)
     self.pack(fill=BOTH)#, expand='yes')
     #self.pack(fill=BOTH)
     self.box = Text(self, state='disabled')
     self.box.grid(row=1, column=0) 
```

UI 由三个子框架组成，文本编辑器是一个，侧边按钮在另一个框架内，搜索在另一个框架内。上面的代码片段是搜索的 UI。

见截图：http: [//i.imgur.com/Vip1t.png](http://i.imgur.com/Vip1t.png)

我想放置一个文本框作为搜索框的一部分，该框位于搜索条目下方。我希望它尽可能地扩展底部区域。

我尝试过扩展、填充等，但它并没有解决条目被拉伸的问题，并且我的文本框被切断（我之前添加了滚动条，但它也被切断了）。

哪里有问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:25:11.960

给自己一张方格纸并画出你的 GUI。问题应该很明显了。

您将条目小部件放在第 1 列，将文本小部件放在第 0 列。我不完全确定您正在寻找的效果，但您可以将文本小部件移动到第 1 列，或者将其保留在第 0 列和让它跨越几列。

假设您希望文本小部件是标签输入按钮组合的整个宽度，并且您希望标签小部件只有它需要的大小，我将停止使用网格并开始在这部分使用 pack GUI 通过执行以下操作：

1.  为整个区域创建一个框架；如果你想让它不可见，你可以将它的边框宽度设置为零
2.  为条目小部件、标签和搜索按钮创建一个内部框架。将其打包到顶部，填充=x
3.  创建文本小部件，将其打包到底部，fill=both，expand=True
4.  创建标签，将其打包在内框的左侧
5.  创建搜索按钮，将其打包在内框的右侧
6.  创建入口小部件，将其打包在内框的左侧，fill=x，expand=True

这将为您提供一个具有适当调整大小行为的独立超小部件，您可以将其放置在主应用程序中的任何位置。

分段构建您的 GUI，并充分利用内部框架来实现您所追求的外观和行为，并使用适合每个部分的几何管理器。如果您需要在网格中对齐的东西，请使用网格。如果您不需要真正的网格，但确实有独立的行或列，请使用 pack。pack 擅长将东西放在行或列中。网格擅长将事物排列在网格中。为工作选择合适的工具。

# android - 带四边形的手指画：如何避免奇怪的眨眼

> ID：10547044
> 
> 赞同：1
> 
> 时间：2012-05-11T07:13:05.880
> 
> 标签：android, opengl-es

我正在尝试通过 GLSurfaceView 实现手指画应用程序。

但是四边形闪烁太多，以至于我不得不重新绘制它们几次（请参阅 PaintGL 类中的 onTouchEvent）。似乎我正在使用不同的帧缓冲区，但我不知道如何在它们之间切换或禁用它们以避免这种讨厌的闪烁。

这是我的渲染器：

```
public class PaintRenderer implements GLSurfaceView.Renderer 
{

    private FloatBuffer vertexBuffer;
    public ArrayList<HardPoint> l;
    public boolean isPressed = false;

    public PaintRenderer()
    {
        super ();
        l = new ArrayList<HardPoint>();
    }

    public void onDrawFrame(GL10 gl) 
    {

        ArrayList<HardPoint> n;
        int count;

        synchronized (l) 
        {
            n = (ArrayList<HardPoint>) l.clone();
        }

        if (n.size() == 0)
            return;

        n.add(n.get(n.size() - 1));

        for (int i = 1; i < n.size(); i++) {

            HardPoint start = n.get(i-1);
            HardPoint end = n.get(i);

            if (!end.isPressed)
                continue;

            float dx = end.x - start.x;
            float dy = end.y - start.y;

            count = (int) Math.ceil(Math.max(Math.sqrt(dx * dx + dy * dy), 1));

            for (int j = 0; j < count; j++) 
            {
                drawQuad(gl, new PointF(start.x + dx * (float)j/count , start.y + dy * (float)j/count), 40.0f);
            }

        }

    }

    public void onSurfaceChanged(GL10 gl, int width, int height) 
    {
        gl.glViewport(0, 0, width, height);

        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrthof(0.0f, width, 0.0f, height, -1.0f, 1.0f);

        gl.glMatrixMode(GL10.GL_MODELVIEW);

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisable(GL10.GL_DEPTH_TEST);

    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) 
    {
    }

    public void drawQuad(GL10 gl_main, PointF center, float side)
    {
        int VERTEX_COUNT = 4;
        float vertices[] = 
            {
                // Вершины квадрата
                  center.x - side/2, center.y + side/2,  // 0\. левая нижняя
                  center.x + side/2, center.y + side/2,  // 1\. правая нижняя
                  center.x - side/2, center.y - side/2,  // 2\. левая верхняя
                  center.x + side/2, center.y - side/2,   // 3\. правая верхняя
            };

        ByteBuffer vbb = ByteBuffer.allocateDirect(VERTEX_COUNT * 3 * 4);
        vbb.order(ByteOrder.nativeOrder());
        vertexBuffer = vbb.asFloatBuffer();

        vertexBuffer.put(vertices);

        vertexBuffer.position(0);

        gl_main.glColor4f(0.0f, 1.0f, 0.0f, 1.0f);
        gl_main.glVertexPointer(2, GL10.GL_FLOAT, 0, vertexBuffer);

        gl_main.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, 4);

    }

} 
```

这是我的 GLSurfaceView 类：

```
public class PaintGL extends GLSurfaceView
{

    private Context mContext;
    private PaintRenderer renderer;
    private PointF prev_loc, cur_loc;

    public PaintGL(Context context) {
        super(context);
        mContext = context;
        renderer = new PaintRenderer();
        setRenderer(renderer);
        setRenderMode(RENDERMODE_WHEN_DIRTY);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) 
    {
        if (event.getAction() == MotionEvent.ACTION_DOWN)
        {
            synchronized (renderer.l) 
            {
                renderer.l.add(0, new HardPoint(event.getX(), this.getHeight() - event.getY(), true));
            }
        }
        if (event.getAction() == MotionEvent.ACTION_MOVE || event.getAction() == MotionEvent.ACTION_UP)
        {
            //FIXME Мерцание первого quad'a при достаточно большом количестве точек
            int count = 10;
            synchronized (renderer.l) {
                renderer.l.add(0, new HardPoint(event.getX(), this.getHeight() - event.getY(), 
                        event.getAction() == MotionEvent.ACTION_UP ? false : true));
                while (renderer.l.size() > count)
                {
                    renderer.l.remove(count);
                }
            }
            requestRender();
            Log.d("x", renderer.l.size()+" ");
        }

        return true;
    }

} 
```

和 HardPoint 类：

```
public class HardPoint extends PointF 
{
    boolean isPressed;

    public HardPoint() 
    {
        isPressed = false;
    }

    public HardPoint (float x, float y, boolean pressed)
    {
        super(x, y);
        isPressed = pressed;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T16:29:04.487

几点：

*   请参阅[性能设计](http://developer.android.com/guide/practices/design/performance.html)：

> 编写高效代码有两个基本规则：
> 
> *   不要做你不需要做的工作。
> *   如果可以避免，请不要分配内存。

*   [ArrayList.clone](https://stackoverflow.com/questions/2592985/arraylist-shallow-copy-iterate-or-clone)创建一个浅拷贝。您必须为深层副本添加代码或使用[克隆](https://stackoverflow.com/a/1241100/1262542)之类的库。

*   摆脱单一列表上 UI- 和 Renderthread 之间的同步。使用第二个列表，其中 UI 线程仅添加`HardPoint`实例（同步）。在开始时`onDrawFrame`，将`HardPoint`实例转移到“渲染”列表（同步）。然后，您可以限制列表的大小。这消除了`clone`.

*   不要每次都重新创建四边形几何，而是创建一次，然后将其转换到正确的位置。

*   为了消除`HardPoint`实例的创建，您可以应用一个池（[这里是 AndEngine 之一](http://code.google.com/p/andengine/source/browse/src/org/anddev/andengine/util/pool/GenericPool.java?r=2d9721dbefaf46f1b0bc67a869528c699a2a1f76)）预分配实例。

# asp-classic - CWBZZ5008 尝试连接系统时发生安全错误

> ID：10547047
> 
> 赞同：3
> 
> 时间：2012-05-11T07:13:13.743
> 
> 标签：asp-classic, transactions, ibm-midrange

我们有一个 ASP Classic*旧版 Web 应用程序*，它托管在 IIS 中的 Windows Server 2003 中，它连接到我们的数据库服务器中，它是一个**[AS/400](http://en.wikipedia.org/wiki/IBM_System_i)**。我们目前刚刚将数据库服务器从*v5r4m0*升级到*v6r1m0*，因此我们在 Web 服务器中安装[更新](http://www-03.ibm.com/systems/i/software/access/windows/supportedos.html)以连接到新的数据库服务器并将所有连接字符串更改为正确的数据库服务器。

我们的 ASP Classic 站点中有此代码：

```
set objConn2 = server.CreateObject("ADODB.Connection")
objConn2.open connStringGlobal

objConn2.BeginTrans

if rsCheck.eof then
    objConn2.execute(InsertQuery)
    objConn2.execute(InsertQueryRCDREF)
    objConn2.execute(UpdateQuery)
end if

objConn2.CommitTrans

if err.number <> 0 then
    session("errMsg") = "An error occured while processing your request. Please try again. <br><br>[Error Description : " & err.Description & "]<br><br>" & InsertQuery & "<br><br>" & UpdateQuery & "<br><br>" & InsertQueryRCDREF
    objConn2.RollBackTrans  
    objConn2.close
    set objConn2 = nothing
    response.Redirect(request.ServerVariables("HTTP_REFERER"))
else    
    objConn2.close
    set objConn2 = nothing
    response.Redirect("default.asp?p=pending")
end if 
```

但它会在以下行中引发错误`objConn2.BeginTrans`：

> **CWBZZ5008尝试连接系统时**发生安全错误****

 **这里发生的是打开连接并`objConn2.execute`执行行，数据被插入到我们的数据库中，尽管它经历了回滚事务并关闭连接并在 UI 中显示错误消息。

到目前为止，这是我们尝试过的：

*   将连接字符串服务器名替换为数据库服务器的IP地址
*   如果有未关闭的连接，请检查所有*遗留代码*

但我们仍然没有运气。该站点目前正在生产中，由于此错误而停止，因此我们确实需要修复此问题，并且已经尝试修复此问题好几天了。请我们真的需要帮助。

* * *

我们在同一台服务器上运行的其他站点以及在 ASP Classic 中使用事务连接到同一数据库服务器的站点工作正常，只有具有此代码的站点会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T02:26:43.070

问题是因为从旧数据库服务器迁移到新数据库服务器的表还没有任何日志，所以在使用事务时出现错误。

> **日记帐维护交易和数据库更改的审计跟踪。**使用事务日志和数据库更改日志，事务日志记录了每个事务的所有基本数据，包括数据值、事务时间和终端号。数据库更改日志包含由事务修改的记录的前后副本。-*[维基百科.org](http://en.wikipedia.org/wiki/Transaction_processing_system)***

# apache - Hadoop生态系统部署步骤

> ID：10547050
> 
> 赞同：1
> 
> 时间：2012-05-11T07:13:21.610
> 
> 标签：apache, deployment, configuration, hadoop, mapreduce

我正在尝试在一个集群中设置来自 Apache Hadoop 堆栈的所有项目。搭建 apache hadoop 生态系统框架的顺序是什么。例如：Hadoop、HBase……如果你用一些特定的步骤进行测试，你能知道在部署过程中会遇到什么样的问题。主要部署框架（Hadoop、HBase、Pig、Hive、HCatalog、Mahout、Giraph、ZooKeeper、Oozie、avro、sqoop、mrunit、crunch，如果我遗漏了什么请补充）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:04:36.263

由于并非所有列出的产品都是依赖的，因此有不同的订单。
简而言之：
1\. Hadoop（HDFS、MapReduce）
2\. Pig、Hive、sqoop、Oozie
2\. Zookeeper（HBase 需要）
3\. HBase

我不是 100% 确定 Mahout、MRUnit 依赖项，但我认为只有在需要时才会使用 Hadoop。
Avro 不直接依赖于 hadoop——它是序列化库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T17:24:40.613

我会说部署是根据主要要求完成的，并且根据要求，您将选择需要哪些其他组件。我认为 Hadoop 设置如下： 1\. Hadoop 核心（Hadoop Common + HDFS + MapReduce -> 一个大组件） 2\. Hadoop 组件（取决于选择）

例如，您仅设置 1) 您仍然可以在将数据处理到 HDFS 时运行 MapReduce 作业。我希望你明白我的意思。

例如，现在您希望使用 Hive 和 Pig 进行数据分析工作，为此您可以在其上设置 Hive 和 Pig。

同时，您决定将此 Hadoop 集群与 SQL Server/SQL Azure 连接，以便将数据从 SQL Server/SQL Azure 导入 HDFS。为此，您可以设置 HiveODBC 和 Sqoop，这将为您提供将数据导入/导出 HDFS 到 SQL Server/Azure 的功能。HiveODBC 和 Sqoop 为您提供了将本地 Excel 和 Power Pivot 直接连接到 HDFS 并从那里获取配置单元表的功能。

如果你想在 HDFS 之上设置一个非 SQL 数据库，你当然可以选择 HBASE，它位于 HDFS 之上，你可以在其上运行 MapReduce 作业。

依此类推，取决于您的要求，您可以创建所需的列表并在集群/集群中进行设置。只要您有基本的 Hadoop 核心（见上文），就没有硬性规定需要什么，其余的可以在任何核心设置之上完成。

我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T09:11:13.680

您可能会发现两个有趣的开源项目，它们可能会帮助您为您提供指导和想法：

*   Apache Whirr - [http://whirr.apache.org/](http://whirr.apache.org/)
*   Apache Bigtop - [http://incubator.apache.org/bigtop/](http://incubator.apache.org/bigtop/)

看看他们做什么/用什么来部署你提到的项目，然后问自己：“你真的需要自己做/以不同的方式做吗？” ;-)

# java - 球之间的碰撞

> ID：10547053
> 
> 赞同：0
> 
> 时间：2012-05-11T07:13:35.383
> 
> 标签：java, collision-detection

我有一种方法可以将球反射到墙上，也可以相互反射。每个球的半径为 50。

```
public void reflectBalls(){
    for(int j = 0; j < 2; j++){
        if(ball[j].getY() <= NWall) ball[j].flipVertical();
        else if(ball[j].getY() >= (SWall - 50)) ball[j].flipVertical();
        else if(ball[j].getX() <= WWall) ball[j].flipHorizontal();
        else if(ball[j].getX() >= (EWall - 50)) ball[j].flipHorizontal();
    }
    for(int i = 0; i < 2; i++){
        for(int j = 0; j < 2; j++){
            if(i == j){
                continue;
            }else{
                double ax = (double)ball[i].getX();
                double ay = (double)ball[i].getY();
                double bx = (double)ball[j].getX();
                double by = (double)ball[j].getY();
                double distx = (ax-bx)*(ax-bx);
                double disty = (ay-by)*(ay-by);
                double distance = Math.sqrt(distx + disty);
                if(Math.floor(distance) <= 100){
                    ball[i].flipHorizontal();
                    ball[j].flipVertical();
                    ball[i].flipVertical();
                    ball[j].flipHorizontal();
                }
            }
        }
    }
} 
```

第一部分（对墙壁的反射）效果很好。但是，球不会碰撞；他们只是互相穿过。我尝试了许多不同的方法，但也许我缺少某种数学。我的算法基于勾股定理工作，其中 X 坐标之间的差异和 Y 坐标之间的差异都是平方的，它们的总和是中心之间的距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:18:57.623

这是您的问题-您发现球 i 与球 j 碰撞并且您将其翻转。然后你发现球 j 与球 i 碰撞并再次翻转它们。结果没有发生碰撞。仅在 j > i 时才执行碰撞检查，并且一切都应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:19:40.487

你可能只是翻转*两次*，因为你的循环会发现每个碰撞两次。

最好确保不是翻转，而是真正使对象彼此*远离*。最后，让他们*远离*墙壁。否则，在直接与墙壁发生碰撞时，您可能最终会得到一个实际上移动到外面的球！

作为快速修复，您可以更改

```
for(int j = i+1; j < 2; j++){ 
```

注意`i+1`. 这是“*以后*的球”。

# java - JAVA 中基于 Rest 的 Web 服务

> ID：10547057
> 
> 赞同：1
> 
> 时间：2012-05-11T07:13:55.850
> 
> 标签：java, servlets, spring-mvc, jax-rs

在 Java 中实现基于 ReST 的 Web 服务的最佳方法是什么。我应该去 JAX-RS 实现吗？或者我应该选择 Spring MVC 还是直接通过 Servlets？那么这些有什么实际区别呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:21:54.377

我更喜欢使用 JAX-RS，它需要为相同的结果编写更少的代码。

春季MVC：

```
@Controller
@RequestMapping(value = "/convert", produces = MediaType.APPLICATION_JSON_VALUE, consumes = MediaType.APPLICATION_JSON_VALUE)
public class ConversionController extends BaseController {

    @RequestMapping(method = RequestMethod.POST, produces = MediaType.APPLICATION_XML_VALUE, consumes = MediaType.APPLICATION_JSON_VALUE)
    @ResponseBody
    public String jsonToXml(@RequestBody String jsonString) throws JSONException {
        //method body
    }
} 
```

JAX-RS：

```
@Path("/venue")
@Consumes(Const.FORMAT_APPLICATION_JSON_UTF8)
@Produces(Const.FORMAT_APPLICATION_JSON_UTF8)
public class ConversionController 
{
    @POST
    public Venue addVenueToDatastore(Venue aVenue) {
         //method body
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:15:12.307

您应该使用 JAX-RS 实现。我推荐[Jersey](http://jersey.java.net/)或[Resteasy](http://www.jboss.org/resteasy)。Spring MVC 有点冗长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:25:02.030

我正在使用[Play Framework](http://www.playframework.org/) for Web 服务。这是一些如何做到这一点的[例子。](http://playframework.wordpress.com/2010/08/15/web-services-using-play/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:17:48.997

我使用[VRaptor MVC 框架](http://vraptor.caelum.com.br/en/)以更简单的方式构建 RESTful 和面向服务的应用程序，就像我在编写常见的 Web 应用程序一样......可能值得一看[十分钟指南](http://vraptor.caelum.com.br/documentation/vraptor3-ten-minutes-guide/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T07:22:07.360

我在 Spring MVC 和 Jersey 中开发了 REST 服务。如果您只需要创建 REST api 使用 JERSEY 并且如果您的项目更多然后 REST Api 您可以使用 Spring MVC 。一些有用的链接如下 -

[http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/](http://www.ibm.com/developerworks/web/library/wa-aj-tomcat/)

[http://jersey.java.net/](http://jersey.java.net/)

# asp.net-mvc - Uploadify 3.1 和 MVC 3.0 HTTP 500 错误

> ID：10547058
> 
> 赞同：2
> 
> 时间：2012-05-11T07:14:00.313
> 
> 标签：asp.net-mvc, asp.net-mvc-3, uploadify

在uploadify中上传文件时，我不断收到500错误。不知道我可能做错了什么......

```
jQuery(document).ready(function () {
    jQuery("#file_upload").uploadify({
        'swf': '@Url.Content("~/Content/uploadify/uploadify.swf")',
        'buttonText': 'Browse Files',
        'uploader': '@Url.Action("upload", "upload")',
        'debug': true,
        'fileObjName': 'file',
        // 'scriptData': { 'fname':$("#fname").val(), 'fname2':fname},
        'fileSizeLimit': '38000000',
        'multi': true,
        'auto': true,
       'onUploadError' : function(file, errorCode, errorMsg, errorString) {
           alert('The file ' + file.name + ' could not be uploaded: ' + errorString)
       }, 
        onAllComplete: function (event, queueID, fileObj, response, data) {
            alert(response);

        }
    });
}); 
```

//控制器：

```
 [HttpPost]
         public ActionResult Upload(HttpPostedFileBase file)
        {

            var fileName = Path.GetFileName(file.FileName); 
            file.SaveAs("D:\\inetpub\\wwwroot\\RTDOTNETMEMBER\\audio\\songs\\mp3\\" + fileName);
            return Content(fileName);

        } 
```

调试文件：

```
---SWFUpload Instance Info---
Version: 2.2.0 2009-03-25
Movie Name: SWFUpload_0
Settings:
    upload_url:               /upload/upload
    flash_url:                /Content/uploadify/uploadify.swf?preventswfcaching=1336720242632
    use_query_string:         false
    requeue_on_error:         false
    http_success:             
    assume_success_timeout:   30
    file_post_name:           file
    post_params:              [object Object]
    file_types:               *.*
    file_types_description:   All Files
    file_size_limit:          38000000
    file_upload_limit:        0
    file_queue_limit:         999
    debug:                    true
    prevent_swf_caching:      true
    button_placeholder_id:    file_upload
    button_placeholder:       Not Set
    button_image_url:         /Song/
    button_width:             120
    button_height:            30
    button_text:              
    button_text_style:        color: #000000; font-size: 16pt;
    button_text_top_padding:  0
    button_text_left_padding: 0
    button_action:            -110
    button_disabled:          false
    custom_settings:          [object Object]
Event Handlers:
    swfupload_loaded_handler assigned:  false
    file_dialog_start_handler assigned: true
    file_queued_handler assigned:       true
    file_queue_error_handler assigned:  true
    upload_start_handler assigned:      true
    upload_progress_handler assigned:   true
    upload_error_handler assigned:      true
    upload_success_handler assigned:    true
    upload_complete_handler assigned:   true
    debug_handler assigned:             true

SWF DEBUG: SWFUpload Init Complete
SWF DEBUG: 
SWF DEBUG: ----- SWF DEBUG OUTPUT ----
SWF DEBUG: Build Number:           SWFUPLOAD 2.2.0
SWF DEBUG: movieName:              SWFUpload_0
SWF DEBUG: Upload URL:             /upload/upload
SWF DEBUG: File Types String:      *.*
SWF DEBUG: Parsed File Types:      
SWF DEBUG: HTTP Success:           0
SWF DEBUG: File Types Description: All Files (*.*)
SWF DEBUG: File Size Limit:        38912000000 bytes
SWF DEBUG: File Upload Limit:      0
SWF DEBUG: File Queue Limit:       999
SWF DEBUG: Post Params:
SWF DEBUG: ----- END SWF DEBUG OUTPUT ----
SWF DEBUG: 
SWF DEBUG: Event: fileDialogStart : Browsing files. Multi Select. Allowed file types: *.*
SWF DEBUG: Select Handler: Received the files selected from the dialog. Processing the file list...
SWF DEBUG: Event: fileQueued : File ID: SWFUpload_0_0
SWF DEBUG: Event: fileDialogComplete : Finished processing selected files. Files selected: 1\. Files Queued: 1
SWF DEBUG: StartUpload: First file in queue
SWF DEBUG: Event: uploadStart : File ID: SWFUpload_0_0
SWF DEBUG: ReturnUploadStart(): File accepted by startUpload event and readied for upload.  Starting upload to /upload/upload for File ID: SWFUpload_0_0
SWF DEBUG: Event: uploadProgress (OPEN): File ID: SWFUpload_0_0
SWF DEBUG: Event: uploadProgress: File ID: SWFUpload_0_0\. Bytes: 3545865\. Total: 3545865
SWF DEBUG: Event: uploadError: HTTP ERROR : File ID: SWFUpload_0_0\. HTTP Status: 500.
SWF DEBUG: Event: uploadComplete : Upload cycle complete.
SWF DEBUG: Event: AssumeSuccess: 30 passed without server response 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:24:48.627

添加以下开关：

```
fileDataName: 'file' 
```

此外，您似乎混淆了`swf`和`uploader`论点。试试这样：

```
jQuery(document).ready(function () {
    jQuery("#file_upload").uploadify({
        uploader: '@Url.Content("~/Content/uploadify/uploadify.swf")',
        script: '@Url.Action("upload", "upload")',
        fileDataName: 'file',
        sizeLimit: 38000000,
        cancelImg: '@Url.Content("~/Content/uploadify/cancel.png")',
        auto: true,
        debug: true,
        onError: function() {
            alert('some error occurred. Sorry');
        },
        onComplete: function (event, queueId, fileObj, response, data) {
            alert(response);
        }
    });
}); 
```

在服务器上：

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase file)
{
    if (file != null && file.ContentLength > 0)
    {
        // TODO: storing uploaded files to the App_Data folder on the server. 
        // Adjust this location to fit your requirements
        var appData = Server.MapPath("~/app_data");
        var filename = Path.Combine(appData, Path.GetFileName(file.FileName));
        file.SaveAs(filename);
    }
    return Json(true);
} 
```

# eclipse - Eclipse 3.7.2 on ubuntu 12.04 大括号自动关闭不起作用

> ID：10547061
> 
> 赞同：0
> 
> 时间：2012-05-11T07:14:15.603
> 
> 标签：eclipse, ubuntu

我已经检查了 Window|preferences|java|editor|typing|automatically close|{braces}，
但它仍然无法自动关闭大括号。
'(','[','<' 工作正常。

# android - Android模拟器停止

> ID：10547065
> 
> 赞同：2
> 
> 时间：2012-05-11T07:14:44.943
> 
> 标签：android, multithreading, android-intent, android-emulator

所以我一直在让它运行时遇到问题。这是一个直接从 android 基础培训中提取的教程。我收到以下错误消息：

> invokeNative(Native Method) 05-11 06:59:39.617: E/AndroidRuntime(623): at java.lang.reflect.Method.invoke(Method.java:511) 05-11 06:59:39.617: E/AndroidRuntime (623): 在 android.view.View$1.onClick(View.java:3039) 05-11 06:59:39.617: E/AndroidRuntime(623): ... 11 更多 05-11 06:59:39.617: E/AndroidRuntime(623)：原因：android.content.ActivityNotFoundException：无法找到显式活动类{com.example.namespace/com.example.namespace.DisplayMessageActivity}；您是否在 AndroidManifest.xml 中声明了此活动？05-11 06:59:39.617: E/AndroidRuntime(623): 在 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508) 05-11 06:59:39.617: E/AndroidRuntime(623): 在 android. app.Instrumentation.execStartActivity(Instrumentation.java:1384) 05-11 06:59:39.617: E/AndroidRuntime(623): 在 android.app。

这是我的两个java文件，

```
package com.example.namespace;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.widget.TextView;

    public class DisplayMessageActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MyFirstAppActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    setContentView(textView);
}
} 
```

和

```
package com.example.namespace;

 import android.app.Activity;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.EditText;

 public class MyFirstAppActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.myapp.MESSAGE";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public void sendMessage(View view) {
    // Do something in response to button
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
}
} 
```

这是我的 androidmanifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.namespace"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
     <activity android:name="com.example.myapp.DisplayMessageActivity" />
    <activity
        android:name=".MyFirstAppActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

和我的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal">
<EditText android:id="@+id/edit_message"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />
<Button android:id="@+id/button_send"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send" 
    android:onClick="sendMessage"/>
 </LinearLayout> 
```

每次我运行它时，都会在调用“sendMessage”的那一刻，得到“不幸的是，myFirstApp 已停止”。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:24:25.143

日志中的答案。“您是否在 AndroidManifest.xml 中声明了此活动？”

将活动 DisplayMessageActivity 添加到 AndroidManifest.xml

```
<activity android:name=".DisplayMessageActivity" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:23:30.260

我认为这应该是

```
 android:name="com.example.myapp.DisplayMessageActivity" 
```

变成

```
 android:name="com.example.namespace.DisplayMessageActivity" 
```

因为没有包**com.example.myapp**

# java - 如何在 Java 中对各种大小的数组进行排序？像 10、20、50、100、1000 个元素？

> ID：10547076
> 
> 赞同：0
> 
> 时间：2012-05-11T07:15:36.257
> 
> 标签：java

我需要对不同大小的数组进行排序。这些尺寸是：10 个元素、50 个元素、100 个元素、500 个元素和 1000 个元素。对于这些数组大小中的每一个，我应该使用一个已经排序的数组、另一个部分排序的数组和一个随机的数组。我应该使用三种排序，例如快速排序、插入或冒泡排序。我已经为此工作了 2 周，但似乎无法创建对数组的调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:38:23.497

以下是一些创建测试数组并验证您的排序方法是否正常工作的实用方法：

```
public static Integer[] createRandomArray(int size) {
    Integer[] result = new Integer[size];
    Random randomGenerator = new Random();
    for(int i = 0; i < size; i++) {
        result[i] = randomGenerator.nextInt(size*100);
    }
    return result;
}

public static Integer[] createSortedArray(int size) {
    return createPartiallySortedArray(size, 0, size);
}

public static Integer[] createPartiallySortedArray(int size, int from, int to) {
    Integer[] result = createRandomArray(size);
    Arrays.sort(result, from, to);
    return result;
}

public static boolean isSorted(Integer[] original, Integer[] sorted) {
    Integer[] clonedOriginal = Arrays.copyOf(original, original.length);
    Arrays.sort(clonedOriginal);
    return Arrays.equals(clonedOriginal, sorted);
} 
```

注意 -`from`和`to`参数必须在 的范围`[0..size-1]`内`from < to`。

* * *

这是您可以用来创建数组、将它们输入排序器并验证结果的片段：

```
public static void main(String[] args) {
    List<Integer[]> arrays = new ArrayList<Integer[]>();
    int size = 100;
    arrays.add(createRandomArray(size));
    arrays.add(createPartiallySortedArray(size, 0, size/2));
    arrays.add(createSortedArray(size));

    List<Integer[]> result = doBubbleSort(arrays);  // <- implement that method
    for (int i = 0; i < arrays.size(); i++)
        System.out.println(isSorted(arrays.get(i), result.get(i)));
} 
```

# android - Google 应用内结算：restoreTransactions() 行为

> ID：10547077
> 
> 赞同：1
> 
> 时间：2012-05-11T07:15:39.873
> 
> 标签：android, in-app-billing

我正在为一个应用程序进行谷歌应用内购买。我创建了一个 id 为“app.test.item”的托管产品项目。我遵循了谷歌文档中指定的所有其他步骤。第一次购买应用程序运行良好。但是当我尝试卸载应用程序并再次安装时。该应用程序运行恢复事务请求。onRestoreTransactionsResponse() 方法被调用，我根据从市场返回的 RESULT_OK 使购买状态为真。我的疑问是应用程序如何知道只有名为“app.test.item”的项目被购买并因此被恢复。我还有其他一些项目，例如 "app.test.second.item" 。应用内计费如何看出两者之间的差异。我使用了 Google 提供的应用内结算代码。刚刚提到了一些共享偏好来存储购买状态。我在这里做错什么了吗。请指导我。

我也想在调试模式下测试这个应用程序，以便我可以追踪工作流程。但是应用程序应该使用发布版本进行签名。有什么方法可以在调试版本中完全运行这个应用程序（测试恢复事务）。我了解使用保留 productId 作为“android.test.purchased”进行一般购买的一般工作流程。但我需要测试 restoreTransactions()。任何帮助表示赞赏。

我在这里发布 PurchaseObserver 示例代码。

谢谢，

```
private class DungeonsPurchaseObserver extends PurchaseObserver {
    public DungeonsPurchaseObserver(Handler handler) {
        super(Dungeons.this, handler);
    }

    @Override
    public void onBillingSupported(boolean supported) {
        if (Consts.DEBUG) {
            Log.i(TAG, "supported: " + supported);
        }
        if (supported) {
            restoreDatabase();
        } else {
            showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
        }
    }

    @Override
    public void onPurchaseStateChange(PurchaseState purchaseState, String itemId,
            int quantity, long purchaseTime, String developerPayload) {
        if (Consts.DEBUG) {
            Log.i(TAG, "onPurchaseStateChange() itemId: " + itemId + " " + purchaseState);
        }

        if (developerPayload == null) {
            logProductActivity(itemId, purchaseState.toString());
        } else {
            logProductActivity(itemId, purchaseState + "\n\t" + developerPayload);
        }

        if (purchaseState == PurchaseState.PURCHASED) {
            mOwnedItems.add(itemId);
            logProductActivity("APPLICATION", ": STATE PURCHASED");
            SharedPreferences pref = getSharedPreferences(PREF_FILE, MODE_PRIVATE);
            SharedPreferences.Editor editor = pref.edit();
            editor.putString(PURCHASE_STATUS, "ITEM PURCHASED");
            editor.commit();
        }
        if(purchaseState == PurchaseState.CANCELED)
        {
            logProductActivity("APPLICATION", ": STATE CANCELLED");
            SharedPreferences pref = getSharedPreferences(PREF_FILE, MODE_PRIVATE);
            SharedPreferences.Editor editor = pref.edit();
            editor.putString(PURCHASE_STATUS, "ITEM CANCELLED");
            editor.commit();
        }
        if(purchaseState == PurchaseState.REFUNDED)
        {
            logProductActivity("APPLICATION", ": STATE REFUNDED");
            SharedPreferences pref = getSharedPreferences(PREF_FILE, MODE_PRIVATE);
            SharedPreferences.Editor editor = pref.edit();
            editor.putString(PURCHASE_STATUS, "ITEM REFUNDED");
            editor.commit();
        }
    }

    @Override
    public void onRequestPurchaseResponse(RequestPurchase request,
            ResponseCode responseCode) {
        if (Consts.DEBUG) {
            Log.d(TAG, request.mProductId + ": " + responseCode);
        }
        if (responseCode == ResponseCode.RESULT_OK) {
            if (Consts.DEBUG) {
                Log.i(TAG, "purchase was successfully sent to server");
            }
            logProductActivity(request.mProductId, "sending purchase request");
        } else if (responseCode == ResponseCode.RESULT_USER_CANCELED) {
            if (Consts.DEBUG) {
                Log.i(TAG, "user canceled purchase");
            }
            logProductActivity(request.mProductId, "dismissed purchase dialog");
        } else {
            if (Consts.DEBUG) {
                Log.i(TAG, "purchase failed");
            }
            logProductActivity(request.mProductId, "request purchase returned " + responseCode);
        }
    }

    @Override
    public void onRestoreTransactionsResponse(RestoreTransactions request,
            ResponseCode responseCode) {
        if (responseCode == ResponseCode.RESULT_OK) {
            if (Consts.DEBUG) {
                Log.d(TAG, "completed RestoreTransactions request");
            }
            // Update the shared preferences so that we don't perform
            // a RestoreTransactions again.
            SharedPreferences prefs = getSharedPreferences(PREF_FILE, MODE_PRIVATE);
            SharedPreferences.Editor edit = prefs.edit();
            edit.putBoolean(DB_INITIALIZED, true);
            edit.putString(PURCHASE_STATUS, "ITEM PURCHASE RESTORED");
            edit.commit();
            logProductActivity("onRestoreTransactionsResponse() method in PurchaseObserver", "ITEM PURCHASE RESTORED");
        } else {
            if (Consts.DEBUG) {
                Log.d(TAG, "RestoreTransactions error: " + responseCode);
            }
        }
        logProductActivity("onRestoreTransactionsResponse() method in PurchaseObserver", responseCode.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:35:16.143

调试托管产品可能很困难，因为除非应用程序使用发布密钥签名，否则您无法使用它们。出于这个原因，我在测试 IAB 时使用我的发布密钥签署了我的调试版本。

对于多个产品，您需要检查项目ID。`onPurchaseStateChange`将为每个产品调用。

例如

```
public void onPurchaseStateChange(PurchaseState purchaseState, String itemId, int quantity, long purchaseTime, String developerPayload) {

    if (itemId.equals("app.test.item") {
        switch (purchaseState) {

        case PURCHASED:
            Log.i("Billing","Purchased app.test.item");
            break;

        default:
            Log.i("Billing","Something else");
            break;

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:46:12.843

如果您在 AndroidManifest.xml 中将 'debuggable' 标志设置为 true，您可以将调试器附加到您的应用程序。它使用发布密钥签名的事实与调试无关。至于应用程序如何知道是否购买了商品，如果您使用托管商品，它们会与您的谷歌帐户相关联。当您请求 RESTORE_TRANSACTIONS 时，您的帐户（GMail 地址）将发送到 Google Play/Market 服务器，并检查此人/帐户购买了哪些商品。如果使用非托管项，则需要自己跟踪项，不能使用 RESTORE_TRANSACTIONS。

# vb.net - Tabpro 第三方控件在从 vb6 转换为 vb.net 时未完全转换

> ID：10547083
> 
> 赞同：0
> 
> 时间：2012-05-11T07:16:19.313
> 
> 标签：vb.net, vb6-migration

我将申请表 vb6 迁移到 vb.net。在 vb6 中使用了 Tabpro 第三方控件。

Tabpro 控件有多个选项卡，当我转换时，只有控件的第一个选项卡被转换。所有其他选项卡都是空白的。

请建议 Tabpro 表格控件有什么问题，它与 vb.net 不兼容还是有解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T03:59:13.863

有些控件根本无法完全迁移以在 VB.Net 中工作。在我看来，这可能只是这些控件之一。

# javascript - JS中有这样的模式吗？

> ID：10547087
> 
> 赞同：0
> 
> 时间：2012-05-11T07:16:28.720
> 
> 标签：javascript, prototype

有没有一种简洁的方法来实现以下设计模式？

```
function a() {
    function x() { /* code */ }
    function y() { /* code */ }
    /* more code */
    x(); y(); // these can be called here
}

a();
a.x();
a.y(); 
```

我最近熟悉了原型，可能会使用这样的东西：

```
a = function() { }
a.prototype.x = function() { }
a.prototype.y = function() { } 
```

但也许有更苗条的方法？由于在我的代码中`a`也属于其他东西的原型，即

```
function plugin() { ... }
plugin.prototype.a = function () {}
plugin.prototype.a.prototype.x = function () {}
plugin.prototype.a.prototype.y = function () {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:33:31.690

**为什么不使用简单地定义函数 * *a****像这样：* *

```
function a( x , y){
   x();
   y();
} 
```

**并这样称呼它：**

```
x = function(){
 // some code
}

y = function(){
 // some code
}

a(x,y); 
```

**或者像这样**

```
a(
function(){
  // some code
},
function(){
 // some code
}

); 
```

**即使'a'属于别人的原型**

你可以这样做 ：-

```
 someOtherObj.prototype.a = function( x , y){
       x();
       y();
     } 
```

并且在定义后或匿名调用时只需传递 x 和 y 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:40:45.323

你可以这样写：

```
function a() {
    this.x = function () { /* code */ }
    this.y = function () { /* code */ }
    /* more code */
    this.x(); this.y(); // these can be called here
}

var test = new a();
test.x();
test.y(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:49:18.217

您可以通过使用[单例或模块模式](http://www.yuiblog.com/blog/2007/06/12/module-pattern/)来保持代码状态并避免冲突：

```
var foo = function(){
  // private members
  var bar;
  baz: function(){return bar;}

  // public members go here
  return {
    getBaz: baz
  }
}(); 
```

只有您通过`return`上面提供的成员可用于外部范围，其余仅保留在该对象内。

有关更多设计模式的想法，请参阅：

*   [学习 JavaScript 设计模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T08:28:52.953

如果您正在寻找支持动态对象组合的 JavaScript 语言机制，就像您在问题中描述的那样，那么有三个相关的功能`Object`可能会有所帮助（**请注意，这三个功能都需要** [JavaScript 1.8.5](https://developer.mozilla.org/en/JavaScript/New_in_JavaScript/1.8.5)）：

*   [对象.create](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/create)
*   [对象.defineProperty](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)
*   [对象.defineProperties](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperties)

如果您正在寻找更多*实际的设计模式*，那么有很多涉及到您的问题的各个方面，但我相信最适合构建块方法的设计模式似乎是您问题的主要主题，在这些中进行了描述关于在 JavaScript 中实现设计模式的文章（由不同的作者撰写）：

*   [复合模式](http://www.joezimjs.com/javascript/javascript-design-patterns-composite/)，来自[Joe Zim 的 JavaScript 博客](http://www.joezimjs.com/)
*   [Mixin Pattern](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#mixinpatternjavascript)，来自免费的在线书籍：[Learning JavaScript Design Patterns](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)

希望这会有所帮助-

# android - Imageview xml解析器错误

> ID：10547090
> 
> 赞同：0
> 
> 时间：2012-05-11T07:16:47.817
> 
> 标签：android, android-intent

嗨，我在一个 android 应用程序中开发了一个 xml 解析器。这里的 xml 在 listview（产品列表）中成功解析。现在我已经实现了这个活动，意图是另一个活动。

```
list.setOnItemClickListener(new OnItemClickListener() {

@Override
public void onItemClick(AdapterView parent, View view,
int position, long id) {
String Name = ((TextView) view.findViewById(R.id.title)).getText().toString();
String Category = ((TextView) view.findViewById(R.id.artist)).getText().toString();
String Price = ((TextView) view.findViewById(R.id.duration)).getText().toString();
String Image=((ImageView)view.findViewById(R.id.list_image)).getImageMatrix().toString();

// Starting new intent
Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
in.putExtra(KEY_TITLE, Name);
in.putExtra(KEY_ARTIST, Category);
in.putExtra(KEY_THUMB_URL, Image);
in.putExtra(KEY_DURATION, Price);
startActivity(in); 
```

下一个活动的目的是用户从产品列表中单击一个特定产品，此时下一个活动必须显示该特定产品的详细信息。

nextactivity 是 SingleMenuLietItem.java 源代码是

```
package com.example.truebranches;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Matrix;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.TextView;

public class SingleMenuItemActivity extends Activity {

// XML node keys
static final String KEY_TITLE = "Name";
static final String KEY_ARTIST = "Category";
static final String KEY_THUMB_URL = "Image";
static final String KEY_DURATION = "Price";

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.single_list_item);

// getting intent data
Intent in = getIntent();

// Get XML values from previous intent
String Name = in.getStringExtra(KEY_TITLE);
String ProductURL = in.getStringExtra(KEY_ARTIST);
String Image = in.getStringExtra(KEY_THUMB_URL);
String Price = in.getStringExtra(KEY_DURATION);

// Displaying all values on the screen
TextView lblName = (TextView) findViewById(R.id.name_label);
TextView lblProductURL = (TextView) findViewById(R.id.producturl_label);
ImageView lblImage = (ImageView) findViewById(R.id.image_label);
TextView lblCost = (TextView) findViewById(R.id.price_label);

lblName.setText(Name);
lblProductURL.setText(ProductURL);
lblImage.setImageResource(Image);
lblCost.setText(Price);

}
} 
```

在这里，下一个活动必须显示 textview 产品详细信息..但是没有显示图像..因为我在这部分中挣扎......所以我必须为图像更改的哪一行将显示在下一个活动中。这里是
lblImage。 setImageResource(Image) 显示错误 ImageView 类型中的 setImageResource(int) 方法不适用于参数（字符串）...如何清除。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:24:31.593

你不能像设置列表项图像时那样设置图像吗？

我认为它不工作，因为这个：

```
String Image=((ImageView)view.findViewById(R.id.list_image)).getImageMatrix().toString(); 
```

更新：使用此方法下载图像：

```
public void downloadImage(String url, String pictureName) {
        final HttpClient client = new DefaultHttpClient();
        final HttpGet getRequest = new HttpGet(url);

    String packageName = Environment.getExternalStorageDirectory() + "/"
      + getString(R.string.app_name); 

    folder = new File(packageName);
    folder.mkdirs();
    File f = new File(folder, pictureName);

    try {
        HttpResponse response = client.execute(getRequest);
        final int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode != HttpStatus.SC_OK) {
            Log.w("ImageDownloader", "Error " + statusCode +
                    " while retrieving bitmap from " + url);

        }

        final HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream inputStream = null;
            try {
                inputStream = entity.getContent();
                // Bug on slow connections, fixed in future release.
                Bitmap bm = BitmapFactory.decodeStream(new FlushedInputStream(inputStream));
                 try {
                     FileOutputStream out = new FileOutputStream(f.getAbsolutePath());
                     bm.compress(Bitmap.CompressFormat.PNG, 90, out);
                 } catch (Exception e) {
                        e.printStackTrace();
                 }
                 bm.recycle();
            } finally {
                if (inputStream != null) {
                    inputStream.close();
                }
                entity.consumeContent();
            }
        }
    } catch (IOException e) {
        getRequest.abort();
        Log.w("ImageDownload", "I/O error while retrieving bitmap from " + url, e);
    } catch (IllegalStateException e) {
        getRequest.abort();
        Log.w("ImageDownload", "Incorrect URL: " + url);
    } catch (Exception e) {
        getRequest.abort();
        Log.w("ImageDownload", "Error while retrieving bitmap from " + url, e);
    } finally {
    }
} 
```

在您的 SingleMenuItemActivity 中：

```
String  packageName = Environment.getExternalStorageDirectory() + "/"
            + getString(R.string.app_name);

folder = new File(packageName);
folder.mkdirs();
File f = new File(folder, pictureName);
Bitmap bitmap = null;
if (f.isFile())
    try {
        bitmap =  BitmapFactory.decodeStream(f.toURL().openStream());
    } catch (MalformedURLException e) {
         e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
if (bitmap != null)
    lblImage.setImageBitmap(bitmap); 
```

# javascript - jQuery | 更改 ul->li->a 的内部 html 内容

> ID：10547093
> 
> 赞同：3
> 
> 时间：2012-05-11T07:16:54.260
> 
> 标签：javascript, jquery

我有以下html

```
 <ul class="links main-menu">
    <li class="menu-385 active-trail first active"><a class="active" title="" href="/caribootrunk/">HOME</a></li>
    <li class="menu-386 active"><a class="active" title="" href="/caribootrunk/">FIND LOCAL PRODUCTS</a></li>
    <li class="menu-387 active"><a class="active" title="" href="/caribootrunk/">DO BUSINESS LOCALLY</a></li>
    <li class="menu-388 active"><a class="active" title="" href="/caribootrunk/">LOCAL NEWS &amp; EVENTS</a></li>
    <li class="menu-389 active"><a class="active" title="" href="/caribootrunk/">BLOG</a></li>
    <li class="menu-390 last active"><a class="active" title="" href="/caribootrunk/">ABOUT US</a></li>
    </ul> 
```

我是 jquery 的新手。我想要的是我想将锚标记（例如 Home 等）的内部 html 包装在一个跨度中。我希望通过 jquery 在文档上准备好这个功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:18:07.187

您可以使用 jQuery[`contents()`](http://api.jquery.com/contents/)获取所有内容（textNodes 和子元素），然后使用[`wrapAll()`](http://api.jquery.com/wrapAll/).

```
$(function(){
    $('.main-menu a')   //your target
        .contents()           //get target contents (elements and textNodes)
        .wrapAll('<span>');   //wrap them all with a span

}); 
```

如果你想用 span 包裹每个文本节点和元素`<a>`，让我们稍微修改一下代码，现在使用[`wrap()`](http://api.jquery.com/wrap/)：

```
$(function(){
    $('.main-menu a')   //your target
        .contents()           //get target contents (elements and textNodes)
        .wrap('<span>');      //wrap each with span
}); 
```

jQuery 的方法名称非常冗长，您可以搜索您想要做的事情，并且他们有一个等效的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:24:03.770

使用[wrapInner()](http://api.jquery.com/wrapInner/)

```
$(function(){
    $('.links a').wrapInner('<span />');   
    /** 
     * wrapInner: Wrap an HTML structure around the content of 
     * each element in the set of matched elements.
     */
}); 
```

小提琴示例：http: [//jsfiddle.net/8qPME/](http://jsfiddle.net/8qPME/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:51:48.470

JSFiddle 工作示例：[点击这里](http://jsfiddle.net/ykzQp/1/)

这是正确的方法：

```
​​$(document).ready(function() {
    $("ul.links a").wrapInner('<span>');   
}); 
```

它转变

```
<li><a>BLOG</a></li>
<li><a>DO BUSINESS LOCALLY</a></li> 
```

到

```
<li><a><span>BLOG</span></a></li>
<li><a><span>DO BUSINESS LOCALLY</span></a></li> 
```

JSFiddle 工作示例：[点击这里](http://jsfiddle.net/ykzQp/1/)

# c# - 为什么 tlbimp 会将接口转换为 coclass？

> ID：10547097
> 
> 赞同：4
> 
> 时间：2012-05-11T07:17:02.313
> 
> 标签：c#, .net, com, tlbimp, coclass

实际上，在大多数情况下[tlbimp 会将接口转换为 coclass 的一个功能](http://jpassing.com/2009/01/05/working-around-tlbimps-cleverness/)。具体来说，如果在 IDL 我有

```
interface IFirst {
}
interface ISecond {
    HRESULT GetFirst( IFirst** );
}

coclass First {
   interface IFirst;
} 
```

然后 tlbimp 将看到这`First`是唯一要实现的类`IFirst`，因此它创建了一个 .NET 接口，其中`interface IFirst`替换为`class First`

```
interface ISecond {
    First GetFirst(); // co-class returned, not interface
} 
```

这在某种程度上可能是有帮助的。

这怎么可能有用？我的意思是无论如何`class First`都会有相同的方法`interface IFirst`，所以它不会添加任何东西，所以如果没有这种转换，我可以`interface IFirst`到处传递并获得完全相同的效果。这个转换有什么用？

# google-apps-script - Apps 脚本导出 GUI？

> ID：10547098
> 
> 赞同：1
> 
> 时间：2012-05-11T07:17:10.120
> 
> 标签：google-apps-script

我正在决定是使用 UI Builder 构建 UI 还是仅对其进行编码。

UI Builder 似乎是一种快捷方式，但它是否允许您导出代码以便与其他人共享？从我所看到的，没有选择这样做。

谁能证实这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:39:56.217

它不允许您从 UI 编辑器导出。这是我选择不使用它的主要原因之一。在进行部署时，我不能拥有 dev/pre-prod/prod 类型的环境。

我还发现 UI 编辑器在静态大小的布局上要好得多，我更喜欢在其中构建我的布局，它们将动态扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T15:33:02.290

关于使用 UI Builder，我不知道的一件事是并非所有控件都可用。例如，我需要添加一个 DateBox，所以我必须更改表单的布局，以便它显示为最后一个控件（它属于 FlowPanel）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T21:47:45.180

有一种方法可以从 Apps Script GUI Builder 导出 UI - 与某人共享整个文档，他可以制作包括您的 UI 在内的文档副本。

但我同意@mzimmerman 的观点，它不适用于更大的项目。我只在一些小型原型案例中使用它。

# python - Python 2 和 3，字节码（pyo 和 pyc）是否向后兼容？

> ID：10547099
> 
> 赞同：8
> 
> 时间：2012-05-11T07:17:10.500
> 
> 标签：python, bytecode, backwards-compatibility, pyc

Python 2 和 3，字节码（pyo 和 pyc）是否向后兼容？

我可以用 python 3 执行 python 2 pyo 和 pyc 文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T07:18:26.720

不，它们通常甚至在次要版本之间不兼容（例如 2.6 与 2.7）。
但是，由于您通常也有 .py 文件，python 会自动为当前使用的版本编译它们。

# c# - LinqToSql - 已添加具有相同键的项目

> ID：10547101
> 
> 赞同：1
> 
> 时间：2012-05-11T07:17:12.757
> 
> 标签：c#, asp.net-mvc, linq-to-sql

我将 LinqToSql 用于 mvc Web 应用程序。如果很多人大致同时访问网络应用程序，我会看到一个`An item with the same key has already been added.`错误。此错误的堆栈如下所示：

```
[ArgumentException: An item with the same key has already been added.]
   System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add) +12673712
   System.Data.Linq.DataContext.GetTable(MetaTable metaTable) +286
   System.Data.Linq.DataContext.GetTable() +100
   CableSense.Domain.Repository.Concrete.RoleRepository.GetRolesForUser(String userName) in c:\BuildAgent\work\271278ff356daf1\CableSense.Domain\Repository\Concrete\RoleRepository.cs:84 
```

这只*发生*在我的 RoleRrovider 类中，它是 .net RoleProvider 的自定义实现。在那里，我的 ctor 从 Ninject 获得了一个存储库，如下所示：

```
 public CustomRoleProvider()
    {
        _roleRepository = NinjectMVC3.Resolve<IRoleRepository>();
    } 
```

出错的方法：

```
 public override string[] GetRolesForUser(string username)
    {
        return _roleRepository.GetRolesForUser(username);
    } 
```

在我的仓库中，只是一个返回数据的 linq 查询——仓库在内部实例化了一个上下文，没有什么是静态的或共享的。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:49:26.333

我不知道 Ninject 是否可以选择执行此操作，但每次调用 resolve 时它都应该返回所需上下文的新实例。

这是因为 EF 上下文不是线程安全的。

例如，我使用 Castle.Windsor 作为我选择的 IoC，它有一个 LifeStyle 选项，将其设置为 Transient 而不是 Singleton（这是默认设置）可以获得所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:29:51.870

```
private object _lockHandle=new object();

 public override string[] GetRolesForUser(string username)
    {
lock(_lockHandle){
        return _roleRepository.GetRolesForUser(username);
}
    } 
```

# scala - 使用清单实例化视图有界类型

> ID：10547102
> 
> 赞同：3
> 
> 时间：2012-05-11T07:17:14.213
> 
> 标签：scala, reflection, manifest, type-erasure, view-bound

我正在尝试使用 Scala 的清单来实例化一个类型，当该类型在具有视图绑定的类型上参数化时，我遇到了问题。我已将问题提炼为以下代码：

```
class foo[X <% Ordered[X]]() {}

def boo[T](implicit m : Manifest[T]) = { m.erasure.newInstance().asInstanceOf[T] }

boo[foo[String]]

java.lang.InstantiationException: foo
    at java.lang.Class.newInstance0(Class.java:357)
    at java.lang.Class.newInstance(Class.java:325)
    . . . 
```

所以你可以看到我们有一个简单的类 foo，它是在 X 上参数化的；这是由 Ordered[X] 限制的视图。boo 函数只是尝试使用清单实例化 foo[String] 的新实例。然而，当这个函数被调用时，事情变得非常糟糕，我得到了如我所展示的那样开始的堆栈跟踪。当 foo 的类型参数不是视图有界时，实例化工作没有问题。我认为这与以下事实有关：视图绑定只是 X => Ordered[X] 的隐式转换存在的语法糖，并且以某种方式依赖于另一个清单的清单会导致问题。但是，我不知道到底发生了什么，或者更重要的是，不知道如何解决它。这在 Scala 中是否可能，如果没有，人们如何实现类似的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T07:38:11.173

`newInstance`仅在`T`具有无参数构造函数时才有效。`foo`没有。视图绑定`<%`（就像上下文绑定一样`:`）是构造函数中隐式参数的快捷方式。

`class foo[X <% Ordered[X]]`是一样的`class foo(implicit freshName: X => Ordered[X])`。`foo`缺少,的无参数构造函数`newInstance`失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T09:09:12.667

You could make it work the following way:

```
def boo[A, B[_]](implicit toOrdA: A => Ordered[A], mf: Manifest[B[A]]): B[A] = {
  val constructor = mf.erasure.getConstructor(classOf[A => Ordered[A]])
  constructor.newInstance(toOrdA).asInstanceOf[B[A]]
} 
```

# android - OnClickListener 使应用程序崩溃

> ID：10547105
> 
> 赞同：0
> 
> 时间：2012-05-11T07:17:37.670
> 
> 标签：android, android-activity

我正在学习安卓开发。我创建了一个由按钮 (id:button1) 组成的简单布局。我向此按钮添加了一个 OnClickListener，单击该按钮时会显示下一页（布局）。代码中似乎没有错误，但是当我运行它时，它只是崩溃了。我尝试使用 android 2.3.3 和 2.2 模拟器，但没有成功。当我注释掉 onclicklistener 部分时，应用程序运行。我搜索了各种网站和问题，但没有成功。这是java代码：

```
package com.sid.next;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class mySplash extends Activity {
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final Button b1 = (Button)findViewById(R.id.button1);
        b1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                startActivity(new Intent("com.sid.next.SHOWMENU"));
            }
        });

    }
} 
```

**编辑1：堆栈** [跟踪](http://pastebin.com/NU3uikWk)

**编辑2：** [main.xml](http://pastebin.com/G0dnpB0T)

**Edit3：[已*解决*！]我没有为 myMenu.java 活动设置任何内容视图。不管怎么说，多谢拉！**

edit4：将**android.R.id.button1**更改为**R.id.button1**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:26:44.613

代替

```
 final Button b1 = (Button)findViewById(android.R.id.button1); 
```

经过：

```
 final Button b1 = (Button)findViewById(R.id.button1); 
```

那就是用**R**替换**android.R**。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T07:00:30.517

好的。所以最后我自己想通了！我没有为 myMenu.java 类设置任何 contentView。

还将**android.R.id.button1**更改为**R.id.button1**。（信用：伊姆兰拉纳）

谢谢大家！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:26:00.150

如果`SHOWMENU`是活动，则在清单文件中声明。

根据给定的数据，我认为这是您剩下的选择。

```
<activity
        android:name=".SHOWMENU"
        android:label="@string/app_name" /> 
```

在文件中的`<application > </application>`标签内添加`AndroidManifest.xml`

只需复制并粘贴到您的 xml 中

```
<application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <activity
        android:name="com.sid.next.SHOWMENU"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.sid.next.SHOWMENU"
        android:label="@string/app_name" />
</application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:44:47.557

宁愿以这种方式调用活动

```
startActivity(new Intent("com.sid.next.SHOWMENU")); 
```

试试这个方法

```
Intent g = new Intent(new Intent(mySplash .this, SHOWMENU.class));
            startActivity(g); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T07:53:36.550

尝试这个

```
Intent i = new Intent(new Intent(CURRENT_SCREEN_NAME.this, NEXT_SCREEN_NAME.class));
startActivity(i); 
```

并且不要忘记将其写在活动下方的清单中。

```
<activity android:name=".NEXT_SCREEN_NAME" ></activity> 
```**

# bash - 如何使用 bash 打印增量值

> ID：10547107
> 
> 赞同：1
> 
> 时间：2012-05-11T07:17:42.563
> 
> 标签：bash

```
for i in $(seq 1 100)
do
   ADDRESS=$(head -$i "$project_name/address" | tail -1 | cut -f2)
   sed -i.old "20s/.\{60\}/&${ADDRESS}/" "Desktop/lscript.ld"
done 
```

我根据这个使用这个代码：

```
if [[ i = 1 ]]
then
    ADDRESS=$(head -1 "$project_name/address" | tail -1 | cut -f2)
fi 
```

将被执行，但我希望该`head`值每次都增加 1。

当`i=1`我想`head -2`被处决时，因为`i=2`我想`head -3`。我如何使用 Bash 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:31:13.017

您可以使用`(())`

```
$((i + 1)) 
```

所以特别

```
ADDRESS=$(head -$((i + 1)) "$project_name/address" | tail -1 | cut -f2) 
```

这不会改变`i`（可以通过 实现`$((i++))`）的当前值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:20:46.843

我赞同 Dennis Williamson 在他的评论中所写的内容，但即使代码主体没有什么用处，我还是想展示一种不同的、更有效的方式。您已经熟悉了`sed`使 ADDRESS 分配更清晰所需的所有功能：

```
ADDRESS=$(sed -n "$i"'s/.*\t\([^\t]*\)\t.*/\1/p' "$project_name/address") 
```

您还可以使用来驱动循环`nl`以获取行号：

```
head -n 100 "$project_name/address" |
cut -f2 |
nl |
while read i address; do
    ... do something with $i and $address ...
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:21:25.750

怎么样：

```
for i in $(seq 1 100)
do
   ADDRESS=$(head -n $((i + 1)) "$project_name/address" | tail -1 | cut -f2)
   sed -i.old "20s/.\{60\}/&${ADDRESS}/" "Desktop/lscript.ld"
done 
```

# sharepoint-2010 - 在 Sharepoint 网站中开发轮播/滑块的方法

> ID：10547109
> 
> 赞同：0
> 
> 时间：2012-05-11T07:17:45.977
> 
> 标签：sharepoint-2010

我需要在 sharepoint 网站上开发一个轮播/滑块。这个轮播/滑块会以不同的格式向我展示不同的列表。

我现在一直在决定使用哪种架构。

我有以下方法：

1) 服务器对象模型 a) 创建不同的 Web 部件并使用 JQuery 并在 jQuery carousel 中注册这些用户控件 2) 客户端对象模型 a) 使用 JQuery 和 sharepoint Web 服务来投射不同的列表项 b) 使用 Silverlight

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:56:36.590

答案是：D - 以上所有。

这些选项中的任何一个都可以用来实现目标。选择最适合您、您的组织以及您的 SharePoint 服务器环境和配置的才能和限制的一种，以平衡开发时间、可维护性、性能、可用​​性和可重用性。

# maven - 如何使用Maven将多个项目资源添加到一个项目中

> ID：10547112
> 
> 赞同：0
> 
> 时间：2012-05-11T07:17:57.147
> 
> 标签：maven, maven-2, maven-plugin

我有大约 5 个项目，A、B、C、D、E... 我想从项目 A 中生成一个 jar 文件，它必须包含来自项目 B、C、D、E 的 .class 文件。所有这些项目都是 maven 项目，我已经编译它们并将它们安装在存储库中，并且我在项目 A 的 POM.xml 中添加了 B、C、D、E 项目的依赖项，当我在项目 A 的 pom.xml 上运行安装时正在生成 jar，但它没有任何类，因此请指导如何在生成项目 A 的 jar 时包含来自其他项目的源

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:22:38.967

你需要一个[Maven 组装插件](http://maven.apache.org/plugins/maven-assembly-plugin/)。看看[一些例子](http://maven.apache.org/plugins/maven-assembly-plugin/examples/index.html)。

# java - 返回 XPath 正确顺序（文档顺序的 insted）

> ID：10547114
> 
> 赞同：2
> 
> 时间：2012-05-11T07:18:06.337
> 
> 标签：java, xpath

因此，我在我的大学中获得了“修复” XPath 的任务，并让它以正确的顺序返回节点。

我一直在试图找到一种方法来绕过编写很长的代码并将每个表达式分解成小小的和平，然后重新组合起来。

我想到了一些想法，但我需要帮助来实现它们:)

1.  在 XPath jar 中找到对节点进行排序并将其删除的方法 - 问题是我不知道它是否可以看到 XPath jar 代码，并且没有在网上找到它。 - 如果你能指出它，那就太好了！

2.  我发现这个选项看起来应该可以解决问题 [http://cafeconleche.org/books/xmljava/chapters/ch16s06.html](http://cafeconleche.org/books/xmljava/chapters/ch16s06.html)
    但它需要 XPath 3.0 的 dom 实现，我无法在任何地方找到该 dom - 如果有的话那种东西 ？

3.  如果您有任何其他想法，我很想听听！

例如：对于这个 xml

```
 <library> 
 <book name="book1"> 
  hello 
 </book> 
 <book name="book2"> 
  world 
 </book>
 <book name="book3">
  !!! 
 </book>
 </library> 
```

这个表达式：/library/book[3]/preceding-sibling::book 我得到

书 1 书 2

安装：

书 2 书 1

我可以使用任何东西，只要我在 java 程序中使用它

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:40:36.937

在 XPath 1.0 中，没有节点序列，只有节点集。XPath 1.0 规范没有定义节点集中的节点顺序。许多 API 也没有定义它，但它们总是按文档顺序返回节点集中的节点 - 不是因为 XPath 需要它，而是因为 XSLT 需要它，并且 XSLT 已经设定了 XPath 引擎应该如何表现的期望。

如果您希望节点序列能够控制排序，则必须迁移到 XPath 2.0（或 XQuery 1.0，它是 XPath 2.0 的超集）。在 XPath 2.0 中，以下表达式返回您想要的内容：

```
reverse(/library/book[3]/preceding-sibling::book) 
```

# node.js - 为什么猫鼬总是在我的收藏名称末尾添加一个s

> ID：10547118
> 
> 赞同：148
> 
> 时间：2012-05-11T07:18:39.687
> 
> 标签：node.js, mongodb, mongoose

例如，此代码会创建一个名为“datas”的集合

```
var Dataset = mongoose.model('data', dataSchema); 
```

这段代码会创建一个名为“users”的集合

```
var User = mongoose.model('user', dataSchema); 
```

谢谢

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2012-05-11T23:49:04.930

Mongoose 试图通过使您的收藏名称复数来变得聪明。但是，您可以强制它成为您想要的任何东西：

`var dataSchema = new Schema({..}, { collection: 'data' })`

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-06-28T05:44:14.453

mongoose.model 的 API 结构是这样的：

```
Mongoose#model(name, [schema], [collection], [skipInit]) 
```

mongoose 所做的是，当没有传递集合参数时，Mongoose 通过复数模型名称来生成集合名称。如果您不喜欢这种行为，请传递集合名称或设置您的模式集合名称选项。

例子：

```
var schema = new Schema({ name: String }, { collection: 'actor' }); 
```

或者

```
schema.set('collection', 'actor'); 
```

或者

```
var collectionName = 'actor'
var M = mongoose.model('Actor', schema, collectionName); 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2019-02-22T18:07:41.880

从 mongoose 5.x 开始，您可以完全禁用它：

```
mongoose.pluralize(null); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-07-19T21:54:05.683

您可以简单地添加一个字符串作为第三个参数来定义集合的实际名称。`data`扩展您的示例，以`user`分别保留名称：

```
var Dataset = mongoose.model('data', dataSchema, 'data');

var User = mongoose.model('user', dataSchema, 'user'); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-07-22T01:49:45.580

```
//Mongoose's definition file. NOT your model files
1 const mongoose = require("mongoose");
2 mongoose.pluralize(null); 
```

`mongoose.pluralize(null)`在 Mongoose 文件中添加该行将防止集合名称复数。您不需要将此行添加到模型文件中。

[如此处](https://github.com/Automattic/mongoose/issues/5947)所见。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-03T06:36:18.617

您可以将集合名称添加为第三个参数。请参阅使用 Typescript 的示例：

```
import DataAccess = require('../DataAccess');
import IUser = require("../../Models/Interfaces/IUser");

var mongoose = DataAccess.mongooseInstance;
var mongooseConnection = DataAccess.mongooseConnection;

class UserSchema {
        static get schema () {
        var schema =  mongoose.Schema({
            _id : {
                type: String
            },
            Name: {
                type: String,
                required: true
            },
            Age: {
                type: Number,
                required: true
            }
        });

        return schema;
    }
}
var schema:any = mongooseConnection.model<IUser>("User", 
UserSchema.schema,"User");
export = schema; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-11T10:53:29.610

在下一行定义您的架构结束时使用此代码

```
module.exports = mongoose.model("State", "StateSchema", "state") 
```

假设您的状态是您想在数据库上使用的状态，以避免 s 作为状态

[点击链接正确查看图片](https://i.stack.imgur.com/XShpJ.jpg)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2020-06-09T05:19:17.620

当您运行此命令时，Mongoose 会为您编译模型

```
var schema = new mongoose.Schema({ name: 'string', size: 'string' });
var child = mongoose.model('child', schema); 
```

第一个参数是您的模型所针对的集合的单数名称。**Mongoose 会自动查找您的型号名称的复数、*小写*版本。**因此，对于上面的示例，模型 child 用于数据库中的 children 集合。

**注意：**该`.model()`函数会复制模式。在调用`.model()`!

# ruby-on-rails-3 - 独角兽与 heroku 竹堆

> ID：10547119
> 
> 赞同：2
> 
> 时间：2012-05-11T07:18:54.520
> 
> 标签：ruby-on-rails-3, heroku, webserver, unicorn

我刚刚看到[这篇文章。](http://blog.railsonfire.com/2012/05/06/Unicorn-on-Heroku.html?utm_source=rubyweekly&utm_medium=email)它很好地解释了在 heroku cedar 堆栈上为 rails 应用程序配置独角兽服务器。

我在我的 gem 文件中添加了独角兽，并在 0.0.0.0:8080 上启动了我的服务器，它工作得非常好。我已经在我的配置目录中添加了 unicorn.rb，正如我在上面提到的帖子中给出的那样。我怎样才能在我的开发环境中知道 unicorn 添加了工人？我也**可以将独角兽与heroku竹堆一起使用吗？如果是的话如何？**

我是该领域的新手，即设置和配置 Rails 服务器，我没有任何方法可以前进，对此也没有太多了解。所以请建议一些资源来了解如何设置和配置 Rails 服务器从头开始应用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:38:59.080

Bamboo 堆栈不支持在生产中使用 Unicorn 时需要的 Procfile。您需要迁移到 Cedar 堆栈才能在 Heroku 上使用 Unicorn。

# php - Json Data 有多少条记录？

> ID：10547125
> 
> 赞同：0
> 
> 时间：2012-05-11T07:19:24.460
> 
> 标签：php, json

是否有功能可以找出正在解码的重新编码数量

```
 $doctors=  json_decode(file_get_contents($url_containing_doctors_list),true); 
```

所以我必须写一个forloop然后增加Count变量的计数器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:22:09.730

您可以使用来确定 $doctors 数组的长度`count($docters)`。json 函数不返回它已反序列化的记录数。

# php - Zend 1.11 + 不能在另一个模块的引导程序中使用模块资源

> ID：10547126
> 
> 赞同：0
> 
> 时间：2012-05-11T07:19:35.350
> 
> 标签：php, zend-framework, zend-app-bootstrap

我有一个 Zend 应用程序，它有一个 CMS 模块和一个用户模块。我需要在 CMS 模块的引导程序中做一些涉及用户模块下的服务的事情。

当我尝试实例化服务类时，我收到“找不到类”错误，表明用户模块中的资源尚未自动加载。

我想强调我必须在引导期间而不是之后这样做。

如何从我的管理模块的引导程序中从我的用户模块加载资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T17:42:52.707

您可以在全局引导程序中（而不是在特定于模块的引导程序中）执行所有必需的应用程序类和命名空间的自动加载：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {
    protected function _initAutoloaders()
    {

        // require / require_once for libs/modules with specific autoloaders

        // Load HTML purifier autoloader
        require_once 'HTMLPurifier' . DS . 'HTMLPurifier.auto.php';

        // Load WideImage
        require_once 'WideImage' . DS . 'WideImage.php';

        // ...

        // Use Zend autoloader for other stuff

        $zendAutoloader = Zend_Loader_Autoloader::getInstance();

        // Register stuff.
        $autoloader = array(new SomeClassLoader('SomeLib', LIB_PATH), 'loadClass');
        $zendAutoloader->pushAutoloader($autoloader, 'LibName\\');

        // ...

    }

    // ... Other initializers
} 
```

# php - 将 PHP 文件从一台服务器复制到另一台服务器

> ID：10547131
> 
> 赞同：0
> 
> 时间：2012-05-11T07:19:55.503
> 
> 标签：php, copy

我正在尝试使用 PHP 将一些文件从一台服务器复制到另一台服务器。它非常适合文本和图像文件，但是，如果我尝试复制的文件是 PHP 文件本身，它会轰炸并复制一些有趣的数据，就好像它正在尝试执行文件一样。有没有一种特殊的方法可以将 example.php 从服务器 A 复制到服务器 B？

```
for($i = 0; $i < count($serverAFiles); $i++) 
{
  set_time_limit(1800);
  $serverAFiles[$i] = trim($serverAFiles[$i] );
  copy ($serverAFiles[$i] , $serverBFiles[$i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:22:50.767

当然，您可以使用具有正确凭据的 FTP 或 ssh。对于 ssh 你可以使用[shell_exec](http://no.php.net/manual/en/function.shell-exec.php)而对于 FTP 有一个[扩展名](http://no.php.net/manual/en/book.ftp.php)。要复制执行的文件，请先尝试复制内容并将其发送出去。

# iis - 使用 powerShell 脚本停止网站

> ID：10547145
> 
> 赞同：2
> 
> 时间：2012-05-11T07:21:43.940
> 
> 标签：iis, powershell, windows-server-2008

我有一个停止网站的脚本：

```
param($HostName = "localhost", $SiteName)

$server = $HostName
$siteName = $SiteName
$iis = [ADSI]"IIS://$server/W3SVC"
$site = $iis.psbase.children | where { $_.keyType -eq "IIsWebServer" -AND $_.ServerComment -eq $siteName}
$site.start()

# SIG # Begin signature block ... 
```

但是当我在具有高安全策略的服务器上运行脚本时，我收到了这个错误：

```
The following exception was thrown when trying to enumerate the collection: "Unknown error (0x80005000)".
At D:\DeploymentScripts\Common\StopSite.ps1:6 char:8
+ $site = <<<<  $iis.psbase.children | where { $_.keyType -eq "IIsWebServer" -AND $_.ServerComment -eq $siteName}
    + CategoryInfo          : NotSpecified: (:) [], ExtendedTypeSystemException
    + FullyQualifiedErrorId : ExceptionInGetEnumerator 
```

从我读到的内容来看，如果我无权访问 IIS，但我以管理员身份运行脚本，这可能不会授予我所需的访问权限吗？

网络管理模块是否提供更多访问权限？我没有导入它，因为我不必在其他服务器上执行此操作，如果我需要导入 webadministration 还有另一个问题，当我尝试时我收到错误消息说 WebAdministrationAliases.ps1 没有数字签名.. .

我已经在其他服务器上测试了脚本没有问题，但是这个脚本有更严格的策略，如上所述，它不是更改策略的选项。

我在带有 IIS 7.5 的 Windows 服务器 2008 R2 上运行它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T08:19:09.643

```
Import-Module WebAdministration
Stop-WebSite 'Default Web Site'
Start-WebSite 'Default Web Site' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-19T15:19:50.957

根据大卫的回答：

在最新版本的 Windows（10、2016 和更高版本）中，您需要导入 IISAdministration 而不是 WebAdministration

```
Import-Module IISAdministration
Stop-WebSite 'Default Web Site'
Start-WebSite 'Default Web Site' 
```

对于旧版本的 Windows 和 IIS，你需要做

```
Import-Module WebAdministration
Stop-WebSite 'Default Web Site'
Start-WebSite 'Default Web Site' 
```

阅读更多：

1- [https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10/iisadministration-powershell-cmdlets](https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-10/iisadministration-powershell-cmdlets)

2- [https://blogs.iis.net/iisteam/introducing-iisadministration-in-the-powershell-gallery](https://blogs.iis.net/iisteam/introducing-iisadministration-in-the-powershell-gallery)

# image - Magento 前端未显示图像

> ID：10547146
> 
> 赞同：0
> 
> 时间：2012-05-11T07:21:44.773
> 
> 标签：image, magento, product

我店里有大约 200-300 件产品，但我在前端有一个与产品图片相关的问题。在前端只有一些图像显示其余是空白的。我已经用原始图像替换了所有图像，但问题仍然存在。

请注意，所有图像的尺寸都超过 2500 x 2500。

建议我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:40:38.297

确保您安装了 PHP GD 的扩展并且工作正常。当我将 Magento 的安装移动到另一台服务器时，这种情况发生在我身上。

# c# - 一个工作的 GMap.NET 应用程序源

> ID：10547147
> 
> 赞同：1
> 
> 时间：2012-05-11T07:21:45.953
> 
> 标签：c#, gmap.net

我是第一次使用 GMap，但我的地图不会显示...我正在寻找一个可以工作的 ac# 应用程序源。你能帮助我吗？

注意：我已经从[http://greatmaps.codeplex.com下载](http://greatmaps.codeplex.com)[了这个](http://greatmaps.codeplex.com/releases/view/20235#DownloadId=67818)和[这个](http://greatmaps.codeplex.com/releases/view/20235#DownloadId=51274)文件，但它们只是应用程序，不包括源代码......

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T08:00:37.667

这是上面的表格`gMapControl1`。`Gmap.NET.Core`为您的`Gmap.NET.WindowsForms`项目添加参考。

```
using System;
using System.Windows.Forms;
using GMap.NET.MapProviders;
using GMap.NET;

namespace gmap
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            //use google provider
            gMapControl1.MapProvider = GoogleMapProvider.Instance;
            //get tiles from server only
            gMapControl1.Manager.Mode = AccessMode.ServerOnly;
            //not use proxy
            GMapProvider.WebProxy = null;
            //center map on moscow
            gMapControl1.Position = new PointLatLng(55.755786121111, 37.617633343333);

            //zoom min/max; default both = 2
            gMapControl1.MinZoom = 1;
            gMapControl1.MaxZoom = 20;
            //set zoom
            gMapControl1.Zoom = 10;
        }
    }
} 
```

# html - 如何根据另一个值从 Ruby 类中获取值

> ID：10547150
> 
> 赞同：0
> 
> 时间：2012-05-11T07:22:02.613
> 
> 标签：html, ruby-on-rails

我有一些代码可以根据问题的值来格式化编辑页面。

```
 <% (1..@question.qvalues_count.to_i).each do |qvalue| %>
    <% case qvalue
         when 1
          answer_value = @answer.value1
        when 2
          answer_value = @answer.value2
        when 3
          answer_value = @answer.value3
        when 4
          answer_value = @answer.value4
        when 5
          answer_value = @answer.value5
        end %>
       <label for="answer[value<%=qvalue%>]" class="fieldLabel" >Value<%=qvalue%></label>
      <input type="text" id="answer[value<%=qvalue%>]" name="answer[value<%=qvalue%>]" 
        value="<%=answer_value%>" 
      />
   <% end %> 
```

这看起来非常混乱且不可扩展。如何用不需要我为每个 value1..n 类变量都有一个案例的东西替换 case 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:27:03.937

将答案值放入哈希中，然后您可以使用一条语句获取值。你可以把它放在一个辅助方法中。

```
values = {1 => 'my value 1', 2 => 'my value'}
answer_value = values[qvalue] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T00:28:55.773

I have success with the old stand by, dynamic code, ie: the eval.

```
<% answer_value = eval( '@answer.value' + qvalue.to_s ) %> 
```

or more correctly, as pointed out by Abe

```
<% answer_value = @answer.send( 'value'+qvalue.to_s) %> 
```

for some reason unknown, this would not work.

```
<% answer_value = @answer.send( 'value#{qvalue}' ) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T01:07:39.810

如果您使用的是不错的 ORM（例如 DataMapper），您应该能够指定数据库字段映射到的内容。否则，对您当前情况的简单修复可能是这样的：

```
class Answer
  def value(i)
    self.send("value#{i}")
  end
end 
```

# mysql - SQL中的格式化列

> ID：10547153
> 
> 赞同：0
> 
> 时间：2012-05-11T07:22:06.780
> 
> 标签：mysql, sql

I would like to insert the pipe character | in a column to separate two sections of the output. Is there a way to put one in every row of a column as long as there is data in that row?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:24:13.670

```
select   column1, 
         column2,
         case 
           when column3 is not null 
           then '|' 
           else '' 
         end
from your_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:24:48.463

不是每列都起作用的。您将不得不为每一列重复它。

像这样的东西；

`SELECT CASE col IS NULL THEN NULL ELSE CONCAT('|', col) END CASE FROM Table`

# django - 使用 django-pipeline 编译 Less 时，NoneType 没有属性 'rfind'

> ID：10547161
> 
> 赞同：2
> 
> 时间：2012-05-11T07:22:41.107
> 
> 标签：django, less, nonetype

我正在尝试`.less`使用`django-pipeline`. 当我运行时`collectstatic`，所有内容都正确复制，然后出现此错误：

```
Traceback (most recent call last):
  File "manage.py", line 35, in <module>
    execute_manager(settings)
  File ".../lib/python2.7/site-packages/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File ".../lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ".../lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ".../lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File ".../lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File ".../lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 163, in handle_noargs
    collected = self.collect()
  File ".../lib/python2.7/site-packages/django/contrib/staticfiles/management/commands/collectstatic.py", line 119, in collect
    dry_run=self.dry_run)
  File ".../lib/python2.7/site-packages/pipeline/storage.py", line 26, in post_process
    output_file = packager.pack_stylesheets(package)
  File ".../lib/python2.7/site-packages/pipeline/packager.py", line 90, in pack_stylesheets
    variant=package.variant, **kwargs)
  File ".../lib/python2.7/site-packages/pipeline/packager.py", line 99, in pack
    paths = self.compile(package.paths)
  File ".../lib/python2.7/site-packages/pipeline/packager.py", line 93, in compile
    return self.compiler.compile(paths)
  File ".../lib/python2.7/site-packages/pipeline/compilers/__init__.py", line 34, in compile
    compiled_content = compiler.compile_file(content, finders.find(path))
  File ".../lib/python2.7/site-packages/pipeline/compilers/less.py", line 19, in compile_file
    cwd = os.path.dirname(path)
  File ".../lib64/python2.7/posixpath.py", line 120, in dirname
    i = p.rfind('/') + 1
AttributeError: 'NoneType' object has no attribute 'rfind' 
```

我不认为我对 my 中的类型做了任何奇怪的事情`settings.py`，但为了以防万一，这里有一些相关的内容：

```
STATICFILES_STORAGE = "pipeline.storage.PipelineCachedStorage"

PIPELINE = True

STATICFILES_DIRS = (
    ("projectname", os.path.join(REPO_ROOT, "static")),
)

PIPELINE_COMPILERS = (
    'pipeline.compilers.coffee.CoffeeScriptCompiler',
    'pipeline.compilers.less.LessCompiler'
)

PIPELINE_JS = {
    'projectname': {
        'source_filenames': ('js/*.coffee',),
        'output_filename': 'projectname/js.js'
    }
}

PIPELINE_CSS = {
    'projectname': {
        'source_filenames': ('css/style.less',),
        'output_filename': 'projectname/css.css'
    }
} 
```

`source_filenames`如果我用 glob (ie )替换我的 CSS ，`css/*.less`我会得到相同的结果。该文件绝对是我要告诉它的位置（至少，如果我用我知道错误的路径替换它，我会得到一个不同的错误）。`PIPELINE_CSS`注释掉这些行后，我的 CoffeeScript 就可以很好地编译为 JS。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T19:36:23.770

你可以尝试运行这个：

`$ python manage.py findstatic css/style.less`

如果你有这个结果：

`No matching file found for 'css/style.less'.`

您可能配置错误`staticfiles`，否则也请告诉我。

# windows - 事件 1014：在没有配置的 DNS 服务器响应后，名称 xyz.database.windows.net 的名称解析超时

> ID：10547162
> 
> 赞同：0
> 
> 时间：2012-05-11T07:22:42.527
> 
> 标签：windows, azure, dns, azure-sql-database, event-log

我在 W2008R2 上使用 ASP.NET 连接到 Azure SQL 数据库。

在事件日志中，我收到“在没有配置的 DNS 服务器响应后，名称 xyz.database.windows.net 的名称解析超时。” 频繁地。

它似乎不会影响连接，但我很好奇是否可以通过使用 Microsoft 的特定 DNS 服务器来解决这个问题。有没有其他人看到这些事件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:10:25.100

鉴于您在事件日志中收到与 DNS 解析相关的特定错误，我首先让您网络之外的人尝试访问该名称。如果防火墙规则未配置为允许他们进入，他们应该会收到拒绝访问消息。只需让他们使用自己喜欢的浏览器尝试访问 URI。

如果可行，我知道您的本地计算机上有一些选项可以更改您的 DNS 选项，但不记得具体是如何做到的。如果您能找到这些并让它们工作，那么您将无法与您的网络团队合作，以发现您的内部 DNS 缓存出了什么问题。

# java - 在 Java 中使用 C++ API

> ID：10547167
> 
> 赞同：3
> 
> 时间：2012-05-11T07:23:17.877
> 
> 标签：java, c++, java-native-interface, wrapper

我目前正在用 Java 开发游戏，并希望在完成后将其发布到 Steam 上。他们的网站说 Steam API 是用 C++ 编写的，当我给他们发电子邮件询问是否有办法在 Java 中使用 API 时，他们告诉我必须为此编写一个包装器

我的问题是：我如何编写这样的包装器，或者其他人以前写​​过这个并使其可供下载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:28:39.100

您可以使用[SWIG](http://www.swig.org/)自动生成胶水代码 (JNI)。

您需要 C++ 头文件，并且可以创建
可以在项目中使用的 java 包和类。
有关详细信息，请参阅[Swig 和 Java](http://www.swig.org/Doc2.0/SWIGDocumentation.html#Java)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T07:25:18.660

您正在寻找的关键技术是[Java 本机接口](http://en.wikipedia.org/wiki/Java_Native_Interface)

# c - virt_to_bus() 在 linux 内核模块编译中被弃用

> ID：10547171
> 
> 赞同：2
> 
> 时间：2012-05-11T07:23:30.477
> 
> 标签：c, linux-kernel, kernel-module

嗨，我编写了一个内核模块，它执行 2 MB kmalloc（用于物理连续内存）并将其虚拟地址转换为总线地址，用于将其`virt_to_bus()`发送回应用程序。

我需要总线地址，因为我必须将它传输到另一个运行 linux 的系统并使用 pcie-link 连接到主机系统。现在另一个系统将能够使用该总线地址启动 DMA 传输。

问题是：`virt_to_bus()`已弃用并导致警告，还有其他方法可以将此地址转换为总线地址吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:25:11.313

> 有没有其他方法可以将此地址转换为总线地址

是的，使用`virt_to_phys`. 内核中的快速浏览显示了 x86 的情况：

```
#define virt_to_bus virt_to_phys
#define bus_to_virt phys_to_virt 
```

它们的通用对应物，在 asm-generic/io.h 中定义，分别简单地转换为`unsigned long`/ `void *`。

* * *

当然你知道你总是可以减去`PAGE_OFFSET`线性映射内存来获得物理地址。

### 编辑

> 我正在使用手臂

在这种情况下，您可能正在寻找`dma_map_single`.

```
static inline dma_addr_t dma_map_single(struct device *dev, void *cpu_addr,
    size_t size, enum dma_data_direction dir) 
```

> 缓冲区必须预先分配（例如使用 kmalloc()）。它的 DMA 使用 dma_map_single() 设置。

* * *

我对 DMA 的经验真的很少，但是有很多信息指出`dma_map*`应该替换`virt_to_bus`.

# c - 地址比较和字符串存储

> ID：10547178
> 
> 赞同：5
> 
> 时间：2012-05-11T07:24:04.407
> 
> 标签：c

> **可能的重复：**
> [如何在 C 中编译字符串文字？](https://stackoverflow.com/questions/6680819/how-are-string-literals-compiled-in-c)

我写了下面的小代码。在这段代码中，我认为将比较第一个和第二个“hello”字符串的地址。我对此感到困惑。乍一看，我认为这两个字符串都将存储在只读内存中，因此会有不同的地址。但是执行后会打印“相等”。

当我看到 objdump 时，我看不到字符串 hello。我知道我没有使用变量来存储它们，但是“你好”会存储在哪里。

它会存储在堆栈上吗？还是将其存储在代码段中？

```
#include<stdio.h>
int main()
{
    if ("hello" == "hello")
        printf("\n equal ");
    else
        printf("\n not equal");
    return 0;
} 
```

当我将 if 条件更改为 时 `if ("hello" == "hell1")`，打印了“不等于”。同样，字符串的存储位置和方式。它会存储在堆栈上吗？还是将其存储在代码段中？

如果有人在这里给我详细的答案，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:28:31.267

在您的特定示例中，“hello”字符串甚至不是代码的一部分。编译器足够聪明，可以检测到代码将永远永远打印​​“相等”，因此它将它们完全剥离。

但是，如果您的代码看起来像这样：

```
#include<stdio.h>
int main()
{
    const char *h1 = "hello";
    const char *h2 = "hello";
    if (h1 == h2)
        printf("\n equal ");
    else
        printf("\n not equal");
    return 0;
} 
```

但是，您*仍然*会得到“相等”，尽管实际上会进行比较（在没有额外优化的情况下编译时）。这是一种优化 - 编译器检测到您有两个相同的硬编码字符串，并将它们合并到生成的二进制文件中。

然而，如果您的代码看起来像这样，编译器将无法猜测（默认情况下）它们是相同的，并且您将看到“不等于”消息：

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

int main()
{
    char *h1 = malloc(sizeof(char) * 10);
    char *h2 = malloc(sizeof(char) * 10);

    strcpy(h1, "hello");
    strcpy(h2, "hello");

    if (h1 == h2)
        printf("\n equal ");
    else
        printf("\n not equal");

    free(h1);
    free(h2);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:23:31.103

如果两个字符串比较相等，例如“hello”==“hello”，则正如 Pavan Manjunath 所说，main 中根本没有比较。组装如下：

```
    .file“你好.c”
    .section .rodata
.LC0：
    .string "\n 等于 "
    。文本
.globl 主要
    .type 主要，@function

```

但是如果这两个字符串不相等，比如"hello2" == "hello"，那么编译器会在.rodata中为它们分配内存，从acembly看来，如下：

```
    .file“你好.c”
    .section .rodata
.LC0：
    .string "hello2"
.LC1：
    .string "你好"

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:23:10.340

字符串文字，因为您的两个`"hello"`可以由编译器在只读内存中实现，此外，如果值一致，他有权只实现一个这样的文字。

因此，您比较的结果是实现定义的，甚至可能因同一编译器的不同版本或您提供的不同优化选项而异。

# android - 带有 txt 的按钮和图像

> ID：10547180
> 
> 赞同：0
> 
> 时间：2012-05-11T07:24:11.090
> 
> 标签：android, android-layout, button

我想在有图标和文本的地方创建按钮。这是我创建的：

![在此处输入图像描述](../Images/72d492090dd6f669a4f8a3b799b7520d.png)

这是xml：

> ```
>  <Button
>             android:id="@+id/call_button"
>             android:layout_width="match_parent"
>             android:layout_height="0dp"
>           android:layout_marginTop="30dp"
>             android:background="@drawable/button"
>             android:layout_weight="40" 
>             android:drawableLeft="@drawable/phone"
>             android:text="Call"
>             android:textColor="@color/white"
>             /> 
> ```

如何将此电话图标移近文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:30:18.837

您是否尝试提供 paddingLeft 属性。

```
<Button android:drawableLeft="@drawable/ic_launcher"
        android:layout_width="100dip"
        android:paddingLeft="10dip"
        android:layout_height="50dip"
        android:text="hello" /> 
```

它帮助我将 Drawable 移向文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:37:43.140

这可能会指导您进行安排，

[http://developer.android.com/resources/articles/layout-tricks-efficiency.html](http://developer.android.com/resources/articles/layout-tricks-efficiency.html)

代码：

```
<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/home_btn_test"
        android:drawableTop="@drawable/home_icon_test"
        android:textColor="#FFFFFF"
        android:id="@+id/ButtonTest"
        android:paddingTop="32sp"
        android:drawablePadding="-15sp"
        android:text="this is text"></Button> 
```

参考：[Android：在 Button 或 ImageButton 上组合文本和图像](https://stackoverflow.com/questions/1532876/android-combining-text-image-on-a-button-or-imagebutton)

另请参阅此处：[http ://www.mokasocial.com/2010/04/create-a-button-with-an-image-and-text-android/](http://www.mokasocial.com/2010/04/create-a-button-with-an-image-and-text-android/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:30:45.403

恐怕您无法设置复合可绘制对象的位置，但是您可以在图像周围添加一些透明像素，并且应该这样做:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:43:26.773

你可以做一件事。根据需要创建图像并将其放入可绘制文件夹中。创建一个图像视图并设置该图像，然后您可以将 onclick 事件设置为该图像。

```
ImageView img = (ImageView) findViewById(R.id.myImageId);
img.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
   // your code here
}
}); 
```

# java - 这段代码什么时候崩溃？

> ID：10547189
> 
> 赞同：0
> 
> 时间：2012-05-11T07:24:50.877
> 
> 标签：java, windows, file, file-io

这段代码来自我使用的一个库，由于错误而我反编译了。

在 Windows 32 上，如果启动程序的用户是机器的管理员，它可以正常工作，否则它会崩溃。在linux上它也崩溃了。

```
/*      */   public static String cambiaEstensione(String nomeFile, String nuovaEstensione)
/*      */   {
/*  140 */     int p = nomeFile.lastIndexOf('.');
/*  141 */     if (p < 0) {
/*  142 */       return nomeFile + "." + nuovaEstensione;
/*      */     }
/*  144 */     return nomeFile.substring(0, p) + "." + nuovaEstensione;
/*      */   } 
```

该函数的调用者是这样的：

```
/* 182 */       if (this.fl_scrivi) {
/* 183 */         stato = "Apertura archivio dichiarazioni da inviare...";
/* 184 */         this.dcm = new Dcm();
/* 185 */         this.dcm.setNomeDcm(Util.cambiaEstensione(args[2], "dcm"));
/* 186 */         this.dcm.setFileDcm(new FileOutputStream(this.dcm.getNomeDcm()));
/*     */       } 
```

例外是：

```
java.io.FileNotFoundException: .dcm (Accesso negato)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at java.io.FileOutputStream.<init>(Unknown Source)
    at it.finanze.entrate.sco.main.M77S11.elaboraFile(M77S11.java:186) 
```

其中*“Accesso negato”的*意思是*“拒绝访问*”。

你能帮我理解错误的原因吗？

* * *

**更新：**问题的原因是我在`args[2]`.

在具有管理员权限的 Windows 上，它没有崩溃，因为它创建了文件`C:\.dcm`，不确定我是否必须考虑该功能或错误。

非常感谢所有回答的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:27:34.920

不了解 Java，但您似乎收到拒绝访问错误（“java.io.FileNotFoundException: .dcm (Accesso negato)”）。

你确定你有正确的访问权限吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:27:17.783

该调用`this.dcm.getNomeDcm()`返回字符串`".dcm"`（无论出于何种原因），并且不存在具有该名称的文件。这并不奇怪，因为 Windows 应用程序通常不会只使用这样的扩展名来命名文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:27:41.327

我猜“Accesso negato”意味着您没有打开文件的权限。您可以尝试将文件移动到另一个目录，以管理员身份运行程序，或更改所需的权限。

在 linux 上，您可以使用检查权限`ls -l <file>` 并更改它们`chmod 666 <file>`（所有人的读写权限）

另请[参阅](http://en.wikipedia.org/wiki/Chmod)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T07:28:21.203

它就在堆栈跟踪中。

```
java.io.FileNotFoundException: .dcm (Accesso negato) 
```

它找不到名为“.dcm”的文件，所以看起来：

**调用**函数为文件名传递了一个空字符串，换句话说，args[2] 在这一行返回一个空字符串

```
this.dcm.setNomeDcm(Util.cambiaEstensione(args[2], "dcm")); 
```

**或**（因为这发生在 Linux 上）args[2] 包含一个类似“.something”的值，所以这一行

```
int p = nomeFile.lastIndexOf('.'); 
```

返回零，然后是这一行

```
return nomeFile.substring(0, p) + "." + nuovaEstensione; 
```

只返回空字符串 + "." + 扩展。（即“.dcm”）

Linux 使用“.filename”来表示隐藏文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T07:30:16.603

```
int p = nomeFile.lastIndexOf('.'); 
```

如果`nomeFile`是空字符串，那么这将返回 -1 并且以下条件为真：

```
 if (p < 0) {
     return nomeFile + "." + nuovaEstensione;
 } 
```

这将返回一个空字符串、一个点和传入的文件扩展名的连接，从而返回“.dmc”。具有此名称的文件似乎不存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T07:26:56.840

您应该检查文件是否确实存在并具有正确的权限。

# c# - 在 wpf 应用程序中使用 process.start 来调用另一个 wpf 应用程序

> ID：10547195
> 
> 赞同：9
> 
> 时间：2012-05-11T07:25:09.027
> 
> 标签：c#, wpf, process, argument-passing, calling-convention

我正在尝试从另一个 wpf 应用程序调用一个 wpf 应用程序。调用 wpf 应用程序进行调用

```
ProcessStartInfo BOM = new ProcessStartInfo();

BOM.FileName = @"D:\WPFAPPLICATION.exe";

BOM.Arguments = temp;

Process.Start(BOM); 
```

现在在调用的应用程序中，我尝试检索使用传递的参数

```
 string arguments =Process.GetCurrentProcess().StartInfo.Arguments; 
```

但是参数没有通过。为什么是这样？？

我还尝试了另一种方法，其中：

```
 public partial class App : Application
    {
    public static String[] mArgs;

    private void Application_Startup(object sender, StartupEventArgs e)
    {

        if (e.Args.Length > 0)
        {
            mArgs = e.Args;

        }
    }
    }
    } 
```

然而这也不起作用！！！请帮忙！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:51:45.087

尝试使用[Environment](http://msdn.microsoft.com/de-de/library/system.environment.getcommandlineargs.aspx)类来获取命令行参数。

```
string[] args = Environment.GetCommandLineArgs 
```

或使用传递给 WPF 应用程序 (App.xaml.cs) 的主要方法的字符串 []。

```
public partial class App : Application {

    protected override void OnStartup(StartupEventArgs e) {
        string[] args = e.Args;
    }
} 
```

**注意：** 调用

```
string arguments =Process.GetCurrentProcess().StartInfo.Arguments; 
```

不会返回任何值。请参阅此[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.startinfo.aspx)条目

> 如果您没有使用 Start 方法启动进程，则 StartInfo 属性不会反映用于启动进程的参数。例如，如果您使用 GetProcesses 获取计算机上运行的进程数组，则每个 Process 的 StartInfo 属性不包含用于启动进程的原始文件名或参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:28:51.110

好吧，如果有人感兴趣，我终于找到了我的问题的解决方案。在调用应用程序中，我维护了之前使用的相同代码：

```
ProcessStartInfo BOM = new ProcessStartInfo();
BOM.FileName = @"D:\WPFAPPLICATION.exe";
BOM.Arguments = temp;
Process.Start(BOM); 
```

在被调用的应用程序中，为了成功接收参数，我只需要：

```
 System.Text.StringBuilder strbuilder= new System.Text.StringBuilder();

    foreach (String arg in Environment.GetCommandLineArgs())
    {
        strbuilder.AppendLine(arg);
        barcode = arg;
    }
    psnfo = strbuilder.ToString(); 
```

我没有以正确的方式处理传递给进程的参数

所以在显示psnfo时

代码返回：

```
 D:\WPFAPPLICATION.exe temp 
```

来源： http: [//www.codeproject.com/Questions/386260/Using-process-start-in-a-wpf-application-to-invoke](http://www.codeproject.com/Questions/386260/Using-process-start-in-a-wpf-application-to-invoke)

# javascript - Adipoli jQuery 图像悬停效果

> ID：10547198
> 
> 赞同：2
> 
> 时间：2012-05-11T07:25:11.980
> 
> 标签：javascript, jquery, image

我正在使用[Adipoli jQuery 图像悬停效果](http://jobyj.in/adipoli/)，但在更改某些属性时遇到问题。图像更改为灰度和鼠标悬停它会更改为颜色，但是我设置了当我单击图像时它应该保持彩色，但它已损坏，因为它不是替换图像而是在顶部添加图像并在其上添加另一个图像（但它是未定义的所以它没有显示）。以下是我正在使用的代码，但您可以从[www.filedropper.com/adipoli-test下载完整示例](http://www.filedropper.com/adipoli-test)

```
<script type="text/javascript">
$(document).ready(function() {
    $('#image1').adipoli({
        'startEffect' : 'grayscale',
        'hoverEffect' : 'popout'
    });
}); 

function select(n){       
    $('#image1').adipoli({
        'startEffect' : 'normal',
        'hoverEffect' : 'popout'
    });                        
}
</script>
<div style="width:650px; height: 400px; display:block; margin: 60px;">
 <a href="javascript:void(0)" onclick="select(1)"><img src="image1.jpg" class="img1" id="image1"></a>
</div> 
```

我真的很想做到这一点，我希望一些 jQuery 专家可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T18:07:29.460

我制作了新的 jquery 函数“adipoliDestroy”，它从元素中破坏了 adipoli。现在在元素上重新初始化 adipoli 之前，再次调用 destroy 和 init adipoli。

```
(function($){
    $.fn.adipoliDestroy = function(){
        var clone = this.clone().css('display', 'block'),
                wrapper = null;
        if (wrapper = this.parents('.adipoli-wrapper')){
            wrapper.replaceWith(clone);
        }
        return clone;
    }
})(jQuery);

function select(n){
    $('#image1').adipoliDestroy().adipoli({
        'startEffect' : 'normal',
        'hoverEffect' : 'popout'
    });
} 
```

# .net - 需要帮助从堆栈跟踪字节偏移量中查找源代码行

> ID：10547200
> 
> 赞同：2
> 
> 时间：2012-05-11T07:25:17.300
> 
> 标签：.net, windows-phone-7

谁能告诉我如何在 wp7 中使用字节偏移（来自堆栈跟踪）找到源代码行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:24:42.110

这是我用过的东西，但它不是特定于赢得手机的 - 但它可能对你有用：

```
private static string lineAndMethod() {
    int stack_frame_depth = 5;
    StackFrame sf = new StackFrame(stack_frame_depth, true);
    while (sf.GetFileName() == null && stack_frame_depth > 0)
    sf = new StackFrame(--stack_frame_depth, true);
    if (sf.GetFileName() == null) // Failed.
        return "";
    MethodBase mb_caller = sf.GetMethod();
    retrun string.Format("{0}, {1}: {2}]",
                         Path.GetFileName(sf.GetFileName()),
                         mb_caller.Name, sf.GetFileLineNumber());
} 
```

# asp.net-mvc-3 - 获取MVC3中继承页面的Model类的名称

> ID：10547205
> 
> 赞同：0
> 
> 时间：2012-05-11T07:25:41.927
> 
> 标签：asp.net-mvc-3

公共静态类 WebViewPageExtensions { 公共静态字符串 RenderMenu(this WebViewPage wp,string CategoryType) { } }

上面是一个静态类，它的函数 RenderMenu 在 MVC3 的布局页面上调用，在我的应用程序中，所有的 Viewpages 都是从相同的布局页面和不同的模型类继承的，所以每当页面刷新或新的 viewPage 加载上面的方法 RenderMenu 被调用。我想知道继承页面的模型类的名称

我试过 wp.Model

但由于模型名称是动态的，我无法获得 wp.model 的返回

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:32:36.330

Model 属性是对象类型。你可以检查它的类型：

```
public static class WebViewPageExtensions
{
    public static string RenderMenu(this WebViewPage wp, string CategoryType)
    {        
        string modelTypeName = wp.Model.GetType().Name;
        ...
    }
} 
```

# c++ - QwtPlot：使最后绘制的点看起来不同的颜色或大小

> ID：10547207
> 
> 赞同：0
> 
> 时间：2012-05-11T07:25:52.257
> 
> 标签：c++, qwt

我有一个将点绘制到 QwtPlot 中的系统。我想要的是在任何时候以不同的颜色绘制最后一个绘制点，所以我总能知道哪个是目前最后一个绘制的点。

有没有直接的方法可以做到这一点，或者我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:18:42.947

您可以使用*QwtPlotMarker*。以下代码摘自名为“Bode”的 qwt 示例，位于 QwtPlot`this`的子类中（即 QwtPlot 的子类）：

```
d_mrk2 = new QwtPlotMarker();
d_mrk2->setLineStyle(QwtPlotMarker::HLine);
d_mrk2->setLabelAlignment(Qt::AlignRight | Qt::AlignBottom);
d_mrk2->setLinePen(QPen(QColor(200,150,0), 0, Qt::DashDotLine));
d_mrk2->setSymbol( QwtSymbol(QwtSymbol::Diamond, QColor(Qt::yellow), QColor(Qt::green), QSize(7,7)));
d_mrk2->attach(this); 
```

稍后在示例中，标记位于：

```
d_mrk2->setValue(x, y); 
```

有关更多信息，请查看 Qwt“Bode”示例，该示例应位于 qwt 目录中。

# objective-c - 连续更改 Imageview 的图像会在 iphone sdk 中发出内存警告

> ID：10547210
> 
> 赞同：1
> 
> 时间：2012-05-11T07:26:00.130
> 
> 标签：objective-c, ios

我必须不断更改图像视图的图像。但是在更改时，我收到了内存警告并崩溃了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:58:17.840

当我在我的应用程序中做某事时，您只需将所有图像放在一个数组中。您可以尝试，因为图像是基于持续时间的变化。你可以做..

```
UIImage *img1 = [UIImage imageNamed:@"1.png"];
UIImage *img2 = [UIImage imageNamed:@"7.png"];
UIImage *img3 = [UIImage imageNamed:@"8.png"];
UIImage *img4 = [UIImage imageNamed:@"9.png"];
UIImage *img5 = [UIImage imageNamed:@"10.png"];

animationImages = [[NSArray alloc] initWithObjects:img1,img2,img3,img4,img5,nil];
[imgView setAnimationImages:animationImages];
[imgView setAnimationDuration:1.5];
[imgView startAnimating]; 
```

然后在要停止此效果的位置应用 [imgView stopAnimaiton]。这对我来说可以。

# django - Django Johnny 缓存 - 使用 MAN_IN_BLACKLIST 包含表而不是排除？

> ID：10547213
> 
> 赞同：1
> 
> 时间：2012-05-11T07:26:10.643
> 
> 标签：django, django-cache, django-johnny-cache

我知道 Johnny 缓存`MAN_IN_BLACKLIST`和`JOHNNY_TABLE_BLACKLIST`. 有没有办法指定相反的？那就是只指定需要缓存的表？我想这样做的原因很简单，因为我们在应用程序中有超过 200 个表，我想缓存一些并且不希望我`MAN_IN_BLACKLIST`的表非常大。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:01:45.860

恐怕你需要破解`johnny/cache.py`，而不是明确地写表，主要是行包含`blacklist_match`。最简单的方法是直接修改函数`blacklist_match`：

```
# set WHITELIST in johnny/settings.py, just as BLACKLIST
WHITELIST = getattr(settings, 'MAN_IN_WHITELIST',
            getattr(settings, 'JOHNNY_TABLE_WHITELIST', []))
WHITELIST = set(WHITELIST)

def blacklist_match(*tables):
    return not WHITELIST.issuperset(tables) or \
           bool(settings.BLACKLIST.intersection(tables)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T07:45:46.217

从 1.4 版开始，Johnny Cache 实际上支持白名单。添加`JOHNNY_TABLE_WHITELIST`到您的设置并为其分配要缓存的表列表，例如：

```
JOHNNY_TABLE_WHITELIST = ['appname_tablename', 'someotherapp_differenttable'] 
```

[来源](http://pythonhosted.org/johnny-cache/queryset_cache.html#settings)

# iphone - 是否可以从我的应用程序启动（将用户重定向到）iphone的本机照片库应用程序，

> ID：10547214
> 
> 赞同：2
> 
> 时间：2012-05-11T07:26:12.550
> 
> 标签：iphone, ipad

是否可以从我的应用程序启动（将用户重定向到）本机照片库应用程序而不是短信或 iPhone 电话，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-31T12:33:20.147

您可以像这样使用`photos-redirect://`URL 方案`openURL:`：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"photos-redirect://"]]; 
```

[...正如在此处](https://stackoverflow.com/questions/17564019/how-can-i-show-last-saved-photo-in-photos-app-ios-via-photos-redirect-url-sch)指出的那样。请记住，它不是公共 URL 方案，可能会导致 App Store 拒绝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:52:56.893

最好的方法是自定义 URL 方案，但 AFAIK 没有照片应用程序的方案。 [在此处查看](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007891-SW1 "这里")本机 iOS 应用程序的现有自定义 URL 方案。

如果您想显示用户的照片，您可以使用：
- UIImagePickerController（您可以在网络上找到教程）或
- ALAssetsLibrary 来访问照片和视频（这需要更多的工作，因为您必须创建GUI 自己显示照片）。[见这里](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html "这里")。

# c++ - C++ - 二维数组作为方法参数

> ID：10547227
> 
> 赞同：1
> 
> 时间：2012-05-11T07:27:22.620
> 
> 标签：c++

我有类似这样的课程：

```
class Krzyzowka
{
    protected:
    char model[40][40];
    int x, y;

    public:
        Krzyzowka() { }

            Krzyzowka(char model[][40], int x, int y)
            {
                this->model=model;
            }
}; 
```

现在，我在 main() 中声明：

```
char array[10][10]; 
```

并希望将其传递给：

```
Krzyzowka(char model[][40], int x, int y) 
```

我是这样做的：

```
Krzyzowka obj(array, 10, 10); 
```

但后来我想用传递的数组设置模型二维数组：

```
this->model=model; 
```

但是编译器返回两个错误：

```
error: no matching function for call to ‘Krzyzowka::Krzyzowka(char [10][10], int, int)’

error: incompatible types in assignment of ‘char (*)[40]’ to ‘char [40][40]’ 
```

我怎样才能正确地做到这一点？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:51:26.127

参数`char model[][40]`只能用于数组，如`parameter[x][40]`.

如果您真的想将任何行数组传递给该方法，您可以使用指针：

```
class Krzyzowka
{
    protected:
        char **pp_model;
        int x, y;

    public:
        Krzyzowka() { }

        Krzyzowka(char **pp_model, int x, int y)
        {
            this->pp_model = pp_model;

            // do not miss follow two line
            this->x = x;
            this->y = y;
        }
}; 
```

然后，您可以传递`char **`参数来实例化对象，而不是使用`char array[x][y]`.

And Now that you use `c++`. You'd better not use row array. that's [evil](http://www.parashift.com/c++-faq-lite/containers.html). You could use stl vector instead.

May that be helpful for you :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:34:16.403

没有可用的操作可以自动将一个数组分配给另一个数组。

想到的可能的解决方法：

* * *

使用循环手动将数据复制分配到您的内部数组（确保跟踪有效的`nrows`and `ncols`）。为了规避编译器投诉，您可以使用模板（假设大小在编译时已知）：

```
 template<int NROWS, int NCOLS>
    Krzyzowka(char (&model)[NROWS][NCOLS])
    {
        nrows = NROWS > nrows ? nrows : NROWS;
        ncols = NCOLS > ncols ? ncols : NCOLS;
        for (int row = 0; row < nrows; row++)
          for (int col = 0; col < ncols; col++) 
            this->model[row][col] = model[row][col];
    } 
```

现在您可以创建如下对象：

```
char array[][2] = {{'a', 'b'}, {'c', 'd'}};
Krzyzowka k(array); 
```

* * *

如果数组的维度仅在运行时已知（例如基于用户输入，`char** array`并由 nested 动态分配`new[]`），您可能需要采用[此处给出](https://stackoverflow.com/a/10547506/1025391)的方法或切换到以下方法。

* * *

更好的可能是使用一些标准的数组类型，比如`std::vector`（你可以交换或分配）。那么你对编译器类型不兼容的抱怨也没有问题。

```
std::vector<std::vector<char> > array(nrows, std::vector<char>(ncols));
std::vector<std::vector<char> > model;
model = array; // or model.swap(array); if you don't need the copy 
```

# c# - 在 C# 中的 Zip 文件中创建文件

> ID：10547229
> 
> 赞同：0
> 
> 时间：2012-05-11T07:27:27.447
> 
> 标签：c#, zip, dotnetzip

是否可以在 Zip 文件中创建文件？

假设我有一个文件`abc.zip`并想在其中创建一个名为`SomeFile.txt`. 是否可以？[我正在使用有助于 Zip 文件操作的 dll Ionic.Zip]。另外，我想在不解压缩的情况下执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:32:59.637

当然。例如，如果您已经创建`SomeFile.txt`：

```
using (var zip = ZipFile.Read("abc.zip"))
{
    zip.AddFile("SomeFile.txt");
    zip.Save();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:40:18.977

[在 .NET 中使用 Zip 文件](http://blogs.msdn.com/b/bclteam/archive/2010/06/28/working-with-zip-files-in-net.aspx)

# android - 垂直和倒置的 SeekBar

> ID：10547231
> 
> 赞同：2
> 
> 时间：2012-05-11T07:27:40.580
> 
> 标签：android, seekbar

我正在寻找一个垂直 SeekBar 的实现并发现了这个：[如何在 Android 中获得一个工作的垂直 SeekBar？](https://stackoverflow.com/questions/4892179/need-working-vertical-seekbar)

它工作正常。但是我希望它被“反转”，ei min 在顶部，max 在底部。这可能吗？我试图以不同的角度旋转它，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T11:06:19.640

我已经解决了您的问题并提出了解决方案。我已经在 [这里给了我们答案。](https://stackoverflow.com/a/7341546/603744)我稍微修改了代码并实现了您的目标。这是我的项目的链接，

[https://github.com/AndroSelva/Vertical-SeekBar-Android](https://github.com/AndroSelva/Vertical-SeekBar-Android)

只需在 onDraw() 中稍作修改，

```
protected void onDraw(Canvas c) {
    c.rotate(90);
    c.translate(0, -getWidth());

    super.onDraw(c);
} 
```

和 onTouchEvent(),

```
switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
            int i=0;
            i=getMax() - (int) (getMax() * event.getY() / getHeight());
            setProgress(100-i);
            Log.i("Progress",getProgress()+"");
            onSizeChanged(getWidth(), getHeight(), 0, 0);
            break;

        case MotionEvent.ACTION_CANCEL:
            break;
    } 
```

# underscore.js - Underscore.js 未捕获的 TypeError：无法调用 null 的方法“模板”

> ID：10547234
> 
> 赞同：2
> 
> 时间：2012-05-11T07:27:44.177
> 
> 标签：underscore.js, requirejs

```
require.config({
     paths: {
         jquery: 'libs/jquery',
         underscore: 'libs/underscore',
    }
});
define([
    'jquery',
    'underscore',
    ], function($,_){
        var test = _.template("hello: <%= name %>",{name:"warren"});

}); 
```

鉴于上述代码使用 requirejs 加载 jquery 和下划线，为什么我会收到此错误...

```
Uncaught TypeError: Cannot call method 'template' of null 
```

所有 JS 似乎都在加载...错误指向 _.template 行。这真让我抓狂...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T07:37:30.743

你确定你已经捆绑了下划线库以便与 requireJS 一起使用吗？

当你写：

```
define([
    'jquery',
    'underscore',
  ], function($,_){
      var test = _.template("hello: <%= name %>",{name:"warren"});

}); 
```

'_' 变量（回调函数的第二个参数）分配有下划线库的导出（指定的第二个依赖项）。

我猜你使用了原始版本的下划线，它不是 requireJS 的包。在您的 underscore.js 文件中，在开头添加以下行：

```
define(function () { 
```

最后这一行：

```
return _;}); 
```

因此，导出配置良好。

另一种可能的解决方案是使用全局“_”变量：您需要做的就是删除回调的第二个参数。

```
define([
    'jquery',
    'underscore',
  ], function(){
      var test = _.template("hello: <%= name %>",{name:"warren"});

}); 
```

从那里，您的浏览器将使用“_”全局变量，该变量在下划线中定义，并在调用回调时设置。

jQuery 也有同样的行为。

# drupal - 视图中的 Drupal 列表或表格全局自定义文本

> ID：10547237
> 
> 赞同：0
> 
> 时间：2012-05-11T07:27:58.907
> 
> 标签：drupal, views

我想通过视图显示一些内容并相应地进行主题我使用了全局自定义文本，我可以在其中显示内容，但全局自定义文本正在重复每一行的全部内容。即，如果我想在表格或列表中显示行，我无法做到这一点。

我发现[这个链接](https://stackoverflow.com/questions/4888040/how-to-create-custom-style-output-in-views-in-drupal-6-besides-grid-table-ht)可以帮助我，但它似乎太高级了，在我的情况下不需要。

有没有更简单的方法来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T03:03:14.627

为什么不能使用表格样式（D6/D7：点击“样式”旁边的“未格式化”并选择“表格”）

有模块，视图自定义字段和语义视图，为您提供了一些方法来主题化输出，而无需编辑 tpl.php 文件。

对于 Chuck Norris 主题，单击 Views UI 中的主题信息链接并选择适当的文件名并将该名称指定给从 Views 模块文件夹中的模板复制的文件。编辑它！

# php - mysql_num_columns？是否有等效于 mysql_num_rows 的函数来计算列数？

> ID：10547238
> 
> 赞同：0
> 
> 时间：2012-05-11T07:28:01.313
> 
> 标签：php, mysql

是否有相当于`mysql_num_rows`计算 PHP mysql 记录集中的列数的函数？

如果不是，那么您可以告诉我制作执行此功能的最佳方法，而不仅仅是这么说。

我已经看过：[http](http://www.daniweb.com/web-development/php/threads/277417/to-find-the-number-of-columns-in-a-table-using-mysql-query) ://www.daniweb.com/web-development/php/threads/277417/to-find-the-number-of-columns-in-a-table-using-mysql-query和[http://www.ozzu.com/programming-forum/mysql-number-columns-table-t67489.html](http://www.ozzu.com/programming-forum/mysql-number-columns-table-t67489.html)但这些解决方案都不是特别优雅。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:32:16.847

[http://php.net/manual/en/function.mysql-num-fields.php](http://php.net/manual/en/function.mysql-num-fields.php)
mysql_num_fields();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:32:21.363

mysql_num_fields： http: [//php.net/manual/en/function.mysql-num-fields.php](http://php.net/manual/en/function.mysql-num-fields.php)

# c# - 禁用交互式登录

> ID：10547239
> 
> 赞同：4
> 
> 时间：2012-05-11T07:28:02.737
> 
> 标签：c#, .net, windows

我需要在部署时为我的应用程序创建一个用户。我想阻止其他人使用该用户登录。如何使用 c# 禁用此用户的交互式登录？

换句话说，如何`SeDenyInteractiveLogonRight`为那个用户设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:29:11.763

您正在寻找的功能是[`LsaAddAccountRights`](http://msdn.microsoft.com/en-us/library/ms721786%28v=vs.85%29).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T07:45:23.380

如果您的帐户属于 Windows 域：

1.  创建一个新的 OU。
2.  将此服务帐户放置在此 OU 中。
3.  现在为这个OU创建一个新的组策略，在Security Options->Deny logon local，添加这些服务账户。

# amazon-web-services - ELB 可以根据 URL 重定向请求吗？

> ID：10547246
> 
> 赞同：46
> 
> 时间：2012-05-11T07:28:59.077
> 
> 标签：amazon-web-services, load-balancing, amazon-elb

我正在尝试在 Amazon Elastic Load Balancer 后面设置我的应用程序服务器。我正在考虑让一台服务器专用于旧版本，而所有其他服务器专用于新版本。我正在考虑使用路径参数中的版本 ID 来实现这一点

例如

当前版本（3.0）：[http ://example.com/APPNAME/service](http://example.com/APPNAME/service)

旧版本（2.2）：[http ://example.com/APPNAME/v2.2/service](http://example.com/APPNAME/v2.2/service)

我想知道：

1.  ELB 是否有能力查看 HTTP 请求？
2.  ELB 可以根据 URL 路径参数重定向请求吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-11T14:15:13.107

# 2017-04-05 更新

在去年夏天推出具有基于路径的路由支持的新 Application Load Balancer 之后（请参阅之前的更新），AWS 现在还[为 AWS Application Load Balancer 添加了基于主机的路由支持](https://aws.amazon.com/blogs/aws/new-host-based-routing-support-for-aws-application-load-balancers/)：

> [[...] 您现在可以创建 Application Load Balancer 规则，根据Host](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Host)标头中指定的域名路由传入流量。对**api.example.com**的请求可以发送给一个目标组，对**mobile.example.com**的请求可以发送给另一个目标组，而所有其他（通过默认规则）可以发送给第三个目标组。您还可以创建结合基于主机的路由和基于路径的路由的规则。这将允许您将请求路由到**api.example.com/production**和 **api.example.com/sandbox**到不同的目标组。

# 2016-08-11 更新

AWS 刚刚（2016 年 8 月 11 日）[为 Elastic Load Balancing 服务推出了新的 Application Load Balancer，](https://aws.amazon.com/about-aws/whats-new/2016/08/announcing-application-load-balancer-for-elastic-load-balancing/)旨在*提高实时应用程序、微服务、基于容器的架构和流式应用程序的灵活性和性能*：

> **这个新的负载均衡器**也支持 WebSocket 协议和 HTTP/2，**运行在应用层，提供基于内容的路由**支持。这允许 Application Load Balancer 跨多个服务或运行在一个或多个 Amazon Elastic Compute Cloud (Amazon EC2) 实例上的容器路由请求，从而有助于降低成本并简化服务发现。*[强调我的]*

正如[介绍性博客文章](https://aws.amazon.com/blogs/aws/new-aws-application-load-balancer/)中所强调的那样，ELB 的这个新的*应用程序负载均衡器选项 [...] 在第 7 层运行并支持许多高级功能 [其中] 原始选项（现在称为 Classic Load Balancer）仍然可用于您并继续提供第 4 层和第 7 层功能*。

更具体地说，ELB 现在支持手头的场景，因为*每个 Application Load Balancer 允许您定义多达 10 个基于 URL 的规则来将请求路由到目标组*（随着时间的推移， AWS 计划*让您访问其他路由方法）。*

* * *

# 初步答案

这是不可能的 - [Amazon ELB](http://aws.amazon.com/elasticloadbalancing/)主要（但见下文）提供*传输层负载平衡（[OSI](http://en.wikipedia.org/wiki/OSI_model)第 4 层）*，其负载平衡决策仅基于 TCP 连接，但忽略应用程序有效负载。后者将允许*应用程序层负载平衡（[OSI](http://en.wikipedia.org/wiki/OSI_model)第 7 层）*，其中应用程序有效负载确实被考虑到负载平衡决策。

Amazon ELB 中的默认配置实际上为 HTTP/HTTPS/SSL 提供了基本的应用程序级别支持（例如终止 SSL 连接和插入`X-Forwarded-*`标头），但您无法调整此配置；换句话说，ELB 确实在这里*查看了 HTTP 请求*，但是在这方面您无法控制 ELB 行为。

[这在为您的负载均衡器选择侦听器](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/elb-listener-config.html)中进行了更详细的解释，例如：

> **将 TCP/SSL（第 4 层）与 Elastic Load Balancing 结合使用**
> 
> 当您对前端和后端连接都使用 TCP 时，您的负载均衡器会将**请求转发到后端实例，而不修改标头**。此配置也不会为会话粘性或 X-Forwarded-* 标头插入 cookie。
> 
> [...]
> 
> **将 HTTP/HTTPS（第 7 层）与 Elastic Load Balancing 结合使用**
> 
> 当您对前端和后端连接使用 HTTP（第 7 层）时，负载均衡器**会解析请求中的标头并终止连接，然后再将请求重新发送到已注册的实例**。这是 Elastic Load Balancing 提供的默认配置。
> 
> *[强调我的]*

[架构概述](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/SvcIntro_arch_workflow.html)还提供了说明和更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-11T17:42:11.580

自从您发布问题以来已经有好几年了，但亚马逊最近宣布了应用程序（第 7 层）负载平衡功能。这应该支持您正在寻找的内容。

基本上，您可以根据“规则”（例如，URL 路径模式）定义流量路由到的不同目标组。可以根据需要对规则进行优先级排序。

请参阅[https://aws.amazon.com/elasticloadbalancing/applicationloadbalancer/上的详细信息](https://aws.amazon.com/elasticloadbalancing/applicationloadbalancer/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T12:27:45.183

这是我见过的一个可能的解决方案。它不如使用本机 Nginx Plus 进行负载平衡那么理想，但如果您需要使用 ELB，它可以工作。

让我们想象一下这样的架构：

```
 ELB
                         |
          Server 1    Server 2   Server...
          (Current)   (Current)  (Current)
              \           |         /
                      Server X
                      (Legacy) 
```

第一层中的每个服务器都运行“当前”实现。他们还在应用程序层之前运行 Nginx 或 Apache 作为 Web 服务器（这通常是任何 Web 应用程序之前的最佳实践，IMO）。

每个 Nginx/Apache 配置文件都包含对 URL 参数的行检查，表明这是一个将请求代理到服务器 X 的旧调用。如果它不是旧调用，它只会继续对“当前”应用程序的请求。

缺点是您在当前服务器中使用了几个周期来代理旧服务器，但您的架构非常简单，并且您有一个集中的流程。

# javascript - 单击 PrettyPhoto 后 JavaScript window.close 未触发

> ID：10547247
> 
> 赞同：0
> 
> 时间：2012-05-11T07:29:07.277
> 
> 标签：javascript, jquery, buttonclick, jquery-callback, prettyphoto

单击并查看 PrettyPhoto 图像后，JavaScript 事件 onClick 关闭窗口未触发。

HTML

```
<button type="button" onClick="closeWin()">Close Window</button> 
```

JavaScript

```
function closeWin() {
    window.close();
} 
```

jQuery

```
$(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto({
        callback: function() {
            closeWin();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T04:21:00.177

得到了关闭窗口的另一个答案

```
window.open('','_self');
self.close(); 
```

检查这个[小提琴](http://jsfiddle.net/ranganadh/MPHh3/show/)

适用于 Chrome、Safari。

在 FF 中，您需要将`dom.allow_scripts_to_close_windows`值更改为`true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T12:00:54.780

您可以`window.close();`仅通过设置“关闭”安全标志来关闭窗口

在 Firefox 中，您可以通过进入 about:config 来执行此操作，单击“我会小心，我保证”按钮并搜索

```
dom.allow_scripts_to_close_windows 
```

你会看到它被设置为假。

做到这一点，您可以使用 window.close() 关闭窗口

但这会带来安全问题。

关闭窗口还有另一种解决方案，您可以关闭您打开的窗口。

在这里检查：[jsFiddle](http://jsfiddle.net/ranganadh/bkCbH/)

# java - javafx 2.0 css 样式不起作用

> ID：10547253
> 
> 赞同：2
> 
> 时间：2012-05-11T07:29:45.887
> 
> 标签：java, css, javafx, javafx-2

我有以下代码：

```
primaryStage.setTitle("Hello World!");

GridPane root = new GridPane();
final Scene scene = new Scene(root);
Label logol = new Label("Test logo");
logol.setStyle("-fx-color: red;");
root.add(logol, 0, 0);
primaryStage.setScene(scene);
primaryStage.show(); 
```

我要做的只是标签 logol 将具有红色前景色，但它坚持保持黑色。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:09:28.807

没有 CSS 属性“-fx-color”。要更改前景色，请改用“ [-fx-text-fill](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#labeled) : red”。

# tridion - 导入尚未在新环境中的出版物时出现问题

> ID：10547254
> 
> 赞同：-5
> 
> 时间：2012-05-11T07:29:46.687
> 
> 标签：tridion

在将新出版物导入尚未存在的环境时出现以下错误

```
The given key was not present in the dictionary.
   at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(
      SoapClientMessage message, WebResponse response, 
      Stream responseStream, Boolean asyncCall)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(
                                                String methodName, Object[] parameters)
   at Tridion.ContentPorter.Models.ImportExportService.ImportExportService.FinishProcess(
                                                                      String processId)
   at Tridion.ContentPorter.Models.ContentPorterModel.FinishProcess(
                                                       Boolean canceled, Exception error) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:10:49.477

正如@Peter 和@Igor 所说 - 无法根据您提供的信息专门回答这个问题，但是如果您查看[SDL Tridion World](http://sdltridionworld.com/)网站或联系 SDL 客户支持，我很确定有一个热修复程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T13:04:38.240

我已经看到这是由以下原因引起的：身份验证问题。允许的上传大小/超时太小。网络问题。

您需要发布更多数据以供我们协助。

# jquery - 在 Javascript/jQuery 中解码 base64 文件以供下载

> ID：10547255
> 
> 赞同：3
> 
> 时间：2012-05-11T07:29:50.927
> 
> 标签：jquery, sql, ajax, base64, download

今天我一直在试验 SQL 二进制对象。我首先将图像存储在表中，发出 AJAX 请求以对图像进行 base64 编码，然后将其显示出来。

```
<img src="data:image/jpeg;base64,' + base64imageReturnedWithAjax + '">') 
```

图像显示正常。

我正在处理的 Web 项目还需要文件下载（主要是 PDF） - 太好了，我想，我也会将 PDF 存储为 SQL 二进制对象，以相同的方式从服务器收集它，然后以某种方式神奇地解码它在另一端下载。

帮助！

我首先尝试使用 jQuery base64 解码器（https://github.com/carlo/jquery-base64）对其进行解码：

```
$.base64.decode(base64fileReturnedWithAjax) 
```

这会在控制台中生成以下错误：

```
Uncaught Cannot decode base64
_getbyte64
_decode
$.ajax.success
f.Callbacks.o
f.Callbacks.p.fireWith
w
f.support.ajax.f.ajaxTransport.send.d 
```

因此，我的问题是：这是处理文件下载的可行方法吗？如果是这样，如何！如果没有，是否有建议的方法允许从 SQL 表下载文件？

亲切的问候， ATfPT

* * *

编辑：如果有帮助，这是从数据库/服务器（在 VB.NET 中）检索和发送文件的网络方法。Fileblob 是数据库中的二进制对象。

```
 'Having connected to the table
    While lrd.Read()
        Dim fileBytes = CType(lrd("Fileblob"), Byte())
        Dim stream = New MemoryStream(fileBytes, 0, fileBytes.Length)
        Dim base64String = Convert.ToBase64String(stream.ToArray())
        document.Add(base64String)
    End While

    Dim serializer As New JavaScriptSerializer()
    Dim returnVal As String = serializer.Serialize(document)

    Return returnVal 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:41:51.857

Inline base 64 适用于图像（只要它们很小），因此您可能在正确的轨道上。但是，我不认为您正在为 PDF 或大多数其他 blob（`varbinary(max)`在 SQL Server 中）走正确的道路。

我这样做的方法是创建一个 HTTP 处理程序（控制器、ASHX、ASPX 等），它设置正确的 HTTP 标头并将从 SQL Server 检索到的数据`Response.BinaryWrite()`作为字节数组传递。这是快速、干净和可靠的。它还需要很少的代码。

相比之下，base 64 编码会增加文件大小，而且我不知道有任何可靠的方法可以在客户端处理 base 64 字符串并指示浏览器使用正确的应用程序打开它。另外，编码/解码是完全不必要的开销（这在大文件上可能很重要）。

顺便说一句，您还可以对图像使用 HTTP 处理程序。或者，您可以继续使用 base 64，但在单个 JSON 对象中提供所有图像，这将减少您的请求计数（以更多客户端处理代码为代价）。

## HTTP 处理程序示例

*我将一些生产代码剥离为处理 PDF 的部分。这应该以最少的修改工作。*

首先将通用处理程序添加到 Visual Studio 中的项目。它将具有 ASHX 扩展名。

```
public partial class RequestHandler : IHttpHandler
{
    public void ProcessRequest( HttpContext context ) {
        HttpRequest request = context.Request;
        HttpResponse response = context.Response;

        byte[] bytes = null; // get from your database
        string fileName = null; // get from database or put something generic here like "file.pdf"

        response.ContentType = "application/pdf";
        response.AddHeader( "content-disposition", "inline;filename=" + fileName );
        response.AddHeader( "Content-Length", bytes.Length.ToString() );

        response.Buffer = true;
        response.BinaryWrite( bytes );
        response.Flush();
    }

    public bool IsReusable {
        get {
            return true;
        }
    }
} 
```

要调用此代码，您可以简单地链接到它，例如`<a href="RequestHandler.ashx?id=abc">Download</a>`. 您还可以将此代码放在 ASPX 页面中并触发它以响应按钮单击、页面事件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:06:05.427

如果我遵循您的目标，那么问题不在于解码，而在于javascript无法触发下载这一事实。这是因为它无法向浏览器（本身）发送内容处置 http 标头。

您可以执行以下操作之一（我能想到）：

1.  使用传统`object`元素嵌入 PDF。您可以使用 jquery 动态生成它。并将对象源 URL 设置为`data:`URI。

2.  （这只是一个理论），您可以使用`window.location.assign('data:xxx`) 将用户带到 PDF 或触发下载，这取决于如何处理没有内容处置的 PDF。

但是，我很确定，如果 ajax 请求`download`在响应标头中获得 content-disposition ，它将冒泡并且向用户呈现下载选项，这将消除对数据模式的需要。

# linux - 多个管道后将输出字符串复制到变量

> ID：10547258
> 
> 赞同：1
> 
> 时间：2012-05-11T07:30:10.553
> 
> 标签：linux, shell

我试图将一组命令的输出存储到 shell 脚本中的变量中。明显的反引号和 eval 失败了。有人可以帮我解决这个问题。

我想存储的输出

```
head -"$errno" tmptmptmp2 | tail -1 | sed 's/,//' 
```

成一个变量。

顺便说一句，该命令工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:33:05.030

你可以做：

```
var=$(head -"$errno" tmptmptmp2 | tail -1 | sed 's/,//') 
```

# objective-c - 找不到“SenTestCase”的接口声明

> ID：10547260
> 
> 赞同：0
> 
> 时间：2012-05-11T07:30:12.703
> 
> 标签：objective-c, cocoa, unit-testing

当我尝试将另一个文件添加到我的测试目标时，它找不到 SenTestKit 框架。

```
error: cannot find interface declaration for 'SenTestCase', superclass of 'RandomClassTests' 
```

当我添加文件时，我确实检查了该文件的测试目标，这对于其他人来说似乎是一个陷阱，但即使我将文件添加到正确的目标，我也会得到这个。

当我选择 .m 文件时，我看到它已添加到正确的目标中，与您从一开始就提供的主要测试文件完全一样。

我的新文件出现在测试目标的构建阶段下的“编译源”阶段下。我找不到任何其他地方来查找错误。

提前致谢！

**编辑**

我确实包含了框架，整个文件如下所示：

```
#import <SenTestingKit/SenTestingKit.h>

@interface SituationAnalysisTests : SenTestCase

@end 
```

**编辑** 我也在雪豹下运行xcode 4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:49:51.187

确保在 SenTestCase 子类的 .h 文件中，您执行以下操作：

`#import <SenTestingKit/SenTestingKit.h>`

# jquery - 获取jquery中元素的第n个子编号

> ID：10547261
> 
> 赞同：35
> 
> 时间：2012-05-11T07:30:13.937
> 
> 标签：jquery, html

我有一个包含多个“DIV”元素的类，其中包含“p”元素列表。见下文：

```
<div class="container">
    <p>This is content 1</p>
    <p>This is content 2</p>
    <p>This is content 3</p>
</div>
<div class="container">
    <p>This is content 1</p>
    <p>This is content 2</p>
    <p>This is content 3</p>
</div> 
```

这是我通过悬停调用“p”元素的 jQuery 代码：

```
$('.container').children('p').hover(function(){
    //get the nth child of p from parent class 'container'
}); 
```

如何从其父容器类“容器”中获取元素“p”的第 n 个子编号？

就像如果你悬停

> 这是内容1

它应该触发输出为1；

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-11T07:33:12.023

您可以为此使用 jQuery 的[`index`功能](http://api.jquery.com/index/)。它告诉你给定元素相对于它的兄弟元素的位置：

```
var index = $(this).index(); 
```

[实例](http://jsbin.com/oyiwig)| [来源](http://jsbin.com/oyiwig/edit)

索引是基于 0 的，因此如果您正在寻找基于 1 的索引（例如，第一个索引是`1`而不是`0`），只需向其添加一个：

```
var index = $(this).index() + 1; 
```

* * *

如果您没有使用 jQuery 并且遇到了这个问题和答案（OP 使用的是 jQuery），那么没有它也很简单。`nth-child`只考虑*元素*，所以：

```
function findChildIndex(node) {
    var index = 1;                         // nth-child starts with 1 = first child
    // (You could argue that you should throw an exception here if the
    // `node` passed in is not an element [e.g., is a text node etc.]
    // or null.)
    while (node.previousSibling) {
        node = node.previousSibling;
        if (node && node.nodeType === 1) { // 1 = element
            ++index;
        }
    }
    return index;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-11T07:33:39.403

使用该[`.index()`](http://api.jquery.com/index/)方法的无参数版本来查找元素相对于其兄弟元素的位置：

```
$('.container').children('p').hover(function() {
     var index = $(this).index() + 1;
}); 
```

请注意，结果`.index()`将是从零开始的，而不是从一开始的，因此`+ 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:34:09.633

```
$('.container').children('p').hover(function(){
    //get the nth child of p from parent class 'container'
    var n = 1;
    var child = $(this).parent().find("p:eq("+n+")");
}); 
```

应该管用！

或者，如果您想知道悬停元素的索引：

```
$('.container').children('p').each(function(index,element) {
    // use closure to retain index
    $(element).hover(function(index){
        return function() { alert(index); }
    }(index);
} 
```

见[http://api.jquery.com/each/](http://api.jquery.com/each/)

# sql-server - 具有全文搜索功能的多站点 CMS 和 SQL Server 查询优化器

> ID：10547267
> 
> 赞同：2
> 
> 时间：2012-05-11T07:30:49.083
> 
> 标签：sql-server, full-text-search, query-optimization, database-optimization

我们有表格`Site`并且`Content`在我们的数据库中。

每个站点由不同的客户运营，每个站点都有自己的内容。

在网站的前端，我们提供了一个搜索框，它在内容表上使用全文/自由文本搜索来返回结果，但每个网站只能从其自身返回结果，而不是从数据库中的其他网站返回结果。

SQL Server 查询优化器在这里表现不佳。如果它针对内容很少的站点优化查询，那么对于内容很多导致超时的站点，查询的执行会非常糟糕。

我们知道我们可以添加`OPTION(RECOMPILE)`到查询的末尾来解决这个问题，但我的问题是......

为每个站点创建一个缓存表，以便可以定期缓存每个站点的内容并让搜索存储过程查找缓存表而不是使用参数会更好吗？

仅在添加/更改内容时才会更新/刷新缓存。

我的想法是，这将......

a) 减少被搜索表的大小，只包含正确站点的记录

b) 允许全文搜索为每个站点生成更准确的内容索引

c) 允许查询优化器独立缓存每个站点的优化查询

它是否正确？我这样做对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:10:06.260

您是否尝试过“选项（优化未知）”？无论预期有多少行，这将为您的所有输入生成一个通用执行计划。对于较小的站点，它将比以前花费更多，但对于较大的站点应该没问题，对于较小的站点仍然可以接受。这是一篇详细介绍内部工作原理的博客文章：[http](http://www.benjaminnevarez.com/2010/06/how-optimize-for-unknown-works/) ://www.benjaminnevarez.com/2010/06/how-optimize-for-unknown-works/ 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:35:54.760

你在问正确的问题。这是一个权衡。您必须决定哪个对您的情况更好/或更差。

您会经常添加网站吗？您预计每个站点总共有多少行？一般来说，SQL Server 2008 全文搜索最多可以处理 10 的数百万行。如果您期望更多，我会将站点拆分为单独的表。

请记住，即使您拆分为多个表，由于从给定搜索词返回的数量或单词，您的查询计划仍然可能有很大差异。您可能仍需要考虑使用 OPTION(RECOMPILE)。

以下是每条路线的一些优点：

**单表**

*   无需更改架构即可添加其他站点。
*   更容易管理。
*   无需担心单独的存储过程或动态 SQL 来处理多个表。

**多个表**

*   较小的表和索引（不需要 SiteId）。
*   由于目录更小，全文性能更好。
*   可能更好地分离数据。

# windows-7 - 从未调用重塑回调的原因可能是什么？

> ID：10547274
> 
> 赞同：0
> 
> 时间：2012-05-11T07:31:20.203
> 
> 标签：windows-7, glut, freeglut

我正在使用 Visual Studio Express 2010，链接了 freeglut_static.lib（在 Properties>Linker>Input>Additional Dependencies，2.8.0 版中）并定义了 FREEGLUT_STATIC。代码构建和编译，尽管我确实必须调整一堆属性才能使其链接。我正在运行 Window-7 64 位，尽管代码被编译为 32 位可执行文件。

代码是

```
// -----------------------------------
static void reshape(int w, int h) { 
    // free old buffers; allocate new ones; update global state
    // etc...
    ;
}

static void display() { glutSwapBuffers(); }

int main(int argc; char **argv)
{
    glutInitWindowSize(500, 500);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE);
    glutInit(argc, argv);
    glutSetOption(GLUT_ACTION_ON_WINDOW_CLOSE, GLUT_ACTION_GLUTMAINLOOP_RETURNS);
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    // glutIdleFunc(display);
    glutCreateWindow("Hmm");
    glutMainLoop();
    // free resources
    return 0;
}
// ---------- 
```

问题是 display() 或 reshape() 都没有被调用过。当窗口调整大小时，它的左上部分保持白色，其余部分变为黑色。

取消注释 glutIdleFunc() 行会导致现在调用显示函数，并且调整窗口大小使其全黑。但是，仍然没有调用 reshape()。

我盯着 freeglut 源代码看，看不出问题出在哪里。不幸的是，我对调试 freeglut 的 Windows API 知之甚少。

任何想法为什么回调不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:40:45.200

`glutDisplayFunc`设置*当前*窗口的功能。你必须先`glutCreateWindow`打电话`glutDisplayFunc`。

# pattern-matching - 如何根据模式匹配从数组中找到创建子数组？

> ID：10547275
> 
> 赞同：0
> 
> 时间：2012-05-11T07:31:21.413
> 
> 标签：pattern-matching, sub-array

我想从基于模式匹配的数组创建一个子数组。例如：

```
Object[] o = {"123","134","432","213"} 
```

我想创建一个数组，它应该只包含那些从 1 开始的元素。即

```
 {"123","134"} 
```

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:38:02.770

我能想到的最快的解决方案。

```
matchArray(regex,array)
    {
    ArrayList list=new ArrayList();
    for(String o in array){
    if(o.match(regex)){
    list.add(o);
    }
    }
    return list.toArray();
    } 
```

# django - 在 Django SessionWizardView 中获取会话数据

> ID：10547276
> 
> 赞同：0
> 
> 时间：2012-05-11T07:31:26.137
> 
> 标签：django, django-views

我正在使用 SessionWizardView 并想获取有关当前登录用户的信息。据我所知，通过执行以下操作可以在正常视图中实现类似的效果：

```
user_profile = (User.objects.get(id=request.session['_auth_user_id'])).get_profile() 
```

由于 SessionWizardView 应该基于会话，我希望这是一项简单的任务，但我根本找不到解决方案......或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:36:18.343

也许我没有让你正确，但如果你使用默认的 django 身份验证系统，你总是可以通过调用来获取当前登录的用户`request.user`（如此处所示[）](https://docs.djangoproject.com/en/dev/topics/auth/#authentication-in-web-requests)。

# magento - Magento 错误：模块“Mage_Api”需要模块“Mage_Core”

> ID：10547281
> 
> 赞同：1
> 
> 时间：2012-05-11T07:32:02.463
> 
> 标签：magento

我的生产站点无缘无故地消失了。我知道我安装的最后一个扩展，但那是三天前。我在每一页上都收到此错误：

```
a:4:{i:0;s:46:"Module "Mage_Api" requires module "Mage_Core".";i:1;s:702:"#0 /app/code/core/Mage/Core/Model/Config.php(804): Mage::throwException('Module "Mage_Ap...')
#1 /app/code/core/Mage/Core/Model/Config.php(769): Mage_Core_Model_Config->_sortModuleDepends(Array)
#2 /app/code/core/Mage/Core/Model/Config.php(315): Mage_Core_Model_Config->_loadDeclaredModules()
#3 /app/code/core/Mage/Core/Model/App.php(396): Mage_Core_Model_Config->loadModules()
#4 /app/code/core/Mage/Core/Model/App.php(329): Mage_Core_Model_App->_initModules()
#5 /app/Mage.php(627): Mage_Core_Model_App->run(Array)
#6 /index.php(87): Mage::run('', 'store')
#7 {main}";s:3:"url";s:1:"/";s:11:"script_name";s:10:"/index.php";} 
```

我该怎么做才能让我的生产现场恢复工作？

PS Mage_Core 未在 core_config_data 中禁用。Magento 1.5.1.0

**已解决**：我对 app/etc 文件夹下的配置文件的权限错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T10:43:24.577

您应该检查模块配置文件的权限。

# parsing - 带有 GWT 的 Jsoup（制作兼容的 JAR）

> ID：10547282
> 
> 赞同：3
> 
> 时间：2012-05-11T07:32:12.267
> 
> 标签：parsing, gwt, jsoup

我想在客户端使用 Jsoup 作为带有 GWT 的外部 JAR。但是 Jsoup 的 .jar 不是为 GWT 制作的。（没有 .gwt.xml）。

我需要将 Java 文件与类文件和 .gwt.xml 文件一起打包，以便能够将其用作模块并在 GWT 中继承它。

但我不知道该怎么做。

链接：Jsoup - [http://jsoup.org/](http://jsoup.org/)

谢谢

编辑：我的应用程序只有一个客户端。没有服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:38:15.087

您可以使用任何 java 反编译器来提取 java 类并将它们添加到您的 src 文件夹中。或者您可以下载源代码并将它们附加到项目中。应该管用。

**UPD**

1.  为避免此类错误，您必须将类移动到客户端包。
2.  即使那样，这些课程也不起作用。因为这个库使用了 GWT 映射 (java->js) 中不存在的 java 类。所以最好的建议是尝试自己重写冲突的导入。

**UPD2**

正如我所看到的，只有 4 个冲突。这应该很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:23:09.563

很可能你不能这样做。一种可能的方法是在服务器端使用 JSoup 并从客户端进行 RPC 调用以检索所需的数据。

# linux - gio.h 没有这样的文件或目录

> ID：10547290
> 
> 赞同：1
> 
> 时间：2012-05-11T07:32:44.843
> 
> 标签：linux, gio

我正在尝试在[developer.gnome.org](http://developer.gnome.org/gio/stable/GDBusServer.html)链接上编译 GIO 示例程序代码。我用来编译它的命令是

```
 g++ gdbserver.cpp `pkg-config glib-2.0 --libs --cflags gtk+-2.0 gio-unix-2.0` 
```

但是一个错误信息

```
 package gio-unix-2.0 was not found in the pkg-config search path
    (... the remaining pkg-config message ...)
    error: gio/gio.h: No such file or directory
    (... other g++ error messages ...) 
```

glib 和 glib-devel 已安装（我认为 GIO 带有 glib，对吗？）我在这里做错了。

编辑：我正在使用的centos5.5（我应该使用它）有glib2 2.12版本，只有2.15或更高版本的glib2与GIO一起出现。我不确定如何单独安装 GIO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T04:27:45.087

CentOS 5.5 没有 gio。它使用 gvfs 代替。

# java - 将字符串转换为特定的日期格式

> ID：10547303
> 
> 赞同：-2
> 
> 时间：2012-05-11T07:33:25.940
> 
> 标签：java

我有一个格式的日期：.`Thu- Mar 22 2012`它是在字符串变量date1中获得的。我需要将字符串变量中的日期转换为日期格式。我尝试了下面的ccode但无法解析日期；请帮忙。

```
DateFormat formatter;
Date formatted_date= null;

formatter = new SimpleDateFormat("EEE-MM d yyyy");
try {
        formatted_date= (Date) formatter.parse(date1);
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:35:32.663

您需要三个 Ms 'MMM' 来解析像 'Mar' 这样的月份缩写。请检查“EEE-”后的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:35:28.677

将其更改为以下格式

```
EEE- MMM d yyyy 
```

`-`注意和之后的空格`MMM`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:37:15.637

```
Thu- Mar 22 2012
EEE- MMM dd yyyy 
```

我想你需要这样的东西

UPD：日期格式：

```
SimpleDateFormat toStringFormatter = new SimpleDateFormat("EEE MMM dd yyyy");
String formattedDate = toStringFormatter.format(date); 
```

`parse()`对于`String`->也是如此`Date`，`format()`对于- `Date`>也是如此`String`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:42:25.867

如果已经发布的答案不起作用，那么您肯定对语言环境有问题。尝试以下操作`SimpleDateFormat`：

```
formatter = new SimpleDateFormat("EEE- MMM d yyyy", Locale.ENGLISH); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T09:18:09.473

我感谢使用给定的模式并给定语言环境的默认日期格式符号构造函数 SimpleDateFormat。注意：此构造函数可能不支持所有语言环境。覆盖所有语言环境

```
public SimpleDateFormat(String pattern,Locale locale)
   //local:Locale.ENGLISH
   //default is not English
   formatter = new SimpleDateFormat("EEE, MMM d, ''yy", Locale.ENGLISH);
   try {
        formatted_date= (Date) formatter.parse("Wed, Jul 4, '01");
   } catch (ParseException e) {
        e.printStackTrace();
} 
```

# android - 安卓屏幕分辨率

> ID：10547308
> 
> 赞同：1
> 
> 时间：2012-05-11T07:33:59.010
> 
> 标签：android, screen

我正在为“Samsung GT-S5830 mobile”和“samsung galxy s5360”开发应用程序。任何人都可以建议我。Android 应用程序适用的分辨率或 dpi 是多少？

我想知道“我应该为我们的应用程序选择什么配置？比如 Eclipse 中的“2.7in Qvca”我们必须使用的任何自定义。那么 x 和 y 应该是什么”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:28:23.413

对于银河王牌 HVGA(320X480) 和银河 y QVGA(240X320) 。并制作 Layout-normal-ldpi 并将您的 xmls 放入其中进行设计..

# javascript - jpicker - 不完美的彩色显示

> ID：10547309
> 
> 赞同：0
> 
> 时间：2012-05-11T07:33:59.200
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我在我的 Web 应用程序中使用 jPicker [http://www.digitalmagicpro.com/jPicker/ 。](http://www.digitalmagicpro.com/jPicker/)使用文档中显示的简单 .jPicker() 实现。但是颜色选择器工具不完美，图像损坏，颜色不完美，一半颜色不显示。我已正确链接 css 文件和图像，但仍然无法正常工作。

这是 jPicker 的 Html 代码 [https://gist.github.com/2658154](https://gist.github.com/2658154)

jQuery部分：

```
$(function() {
$("#ncolor").jPicker();
}); 
```

我在这里找不到问题。有人可以指导我吗？

谢谢！

# iphone - 如何将iphone音频文件保存在文档目录中

> ID：10547315
> 
> 赞同：0
> 
> 时间：2012-05-11T07:34:12.820
> 
> 标签：iphone

我已经在我的应用程序中实现了录音，但我需要知道如何将录音文件保存在文档目录中并在其他类中检索相同的文件以播放音频。

这是源代码。

```
-(void)startPushed
{
        NSMutableDictionary *rs = [[NSMutableDictionary alloc] init];
        [rs setValue:[NSNumber numberWithInt:kAudioFormatAppleIMA4] forKey:AVFormatIDKey];
        [rs setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey];
        [rs setValue:[NSNumber numberWithInt:2] forKey:AVNumberOfChannelsKey];
        recordedTmpFile = [NSURL fileURLWithPath:[NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"%.0f.%@", [NSDate timeIntervalSinceReferenceDate] * 1000.0, @"caf"]]];

        recorder = [[AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:rs error:&error];
        [recorder setDelegate:self];
        [recorder prepareToRecord];
        [recorder record];

        NSArray *docPath = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
        NSString *docDir = [docPath objectAtIndex:0];
        NSString *fullPath = [docDir stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", recordedTmpFile]];
        NSLog(@"%@", fullPath);
}

 -(void)playbackPushed
    {
    AVAudioPlayer *avPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:recordedTmpFile error:&error];
        NSLog(@"Play Path:%@", recordedTmpFile);
        [avPlayer prepareToPlay];
        [avPlayer play];
    } 
```

请告诉我如何读取和写入文档目录中的音频文件（.caf 格式），并提供在其他类中播放音频的信息。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:06:46.230

使用此代码访问 iOS 中的文档目录

```
-(NSURL *)documentDirectory{
return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject]; 
```

}

并使用 NSFileManager 将文件复制到路径。

# java - Java 构造函数具有比其类更广泛的访问级别

> ID：10547317
> 
> 赞同：3
> 
> 时间：2012-05-11T07:34:19.880
> 
> 标签：java, constructor, access-modifiers

Java 规范允许具有默认访问权限的类具有其构造函数的公共访问权限，它的目的是什么，因为它不能在其包之外被引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T07:46:12.977

我想将此作为评论，但由于评论中不允许使用代码标签......

关于您对 CristopheDs 回答的评论：

```
package bob;

class MySuperHiddenClass {

  public MySuperHiddenClass() {
        System.out.println("bob");
  }
} 
```

和

```
package bob;
public class MyPublicClass extends MySuperHiddenClass {

} 
```

MyPublicClass 中没有声明构造函数，但您仍然可以从任何包中调用 new MyPublicClass。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:36:48.380

如果您问为什么可以拥有`public`构造函数：这是因为您可以在*扩展*基类时显式（或隐式）调用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:34:49.510

类可见性决定了外部世界如何创建类的实例。因此包私有类只能在它们声明的包中实例化。方法可见性（包括构造函数）决定了已经实例化的实例如何在其类定义之外使用。

如果你声明一个包私有类，带有一个私有/受保护的构造函数，你将如何从同一个包中的另一个类实例化它？

两件事：类可见性 - 确定如何在其定义包之外创建实例。方法可见性（包括构造函数） - 确定如何控制对成员的访问，而不考虑包的可见性。

# c++ - 如何通过派生类的方法复制来设置基类字段？

> ID：10547320
> 
> 赞同：1
> 
> 时间：2012-05-11T07:34:55.543
> 
> 标签：c++, inheritance

```
class Base{
public:
float a,b;
};

class Derived:public Base{
public:
int someInteger, otherInt;

void assignNthElement(vector<Base> &myArray,int i){
this=myArray[i-1];//??? How ???
}

void simpleMethodOfAssigningNthElement(vector<Base>&myArray,int i){
a=myArray[i-1].a;
b=myArray[i-1].b;
}

}; 
```

如何从 myArray 直接复制描述派生类中基类的值？也许最好像在“simpleMethodOfAssigningNthElement”中那样做？哪个更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:42:14.173

您不能将基类对象分配给派生类对象，因为`assignNthElement()`这会给您带来编译错误。

请注意，允许反向操作，即：您可以将派生类对象分配给基类对象，但这最终会分割派生类对象的成员。这种现象称为**对象切片**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:38:02.093

你不能按照你尝试的方式来做`assignNthElement`，它只需要像这样实现`simpleMethodOfAssigningNthElement`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:42:55.260

您可以使用一些 C-hacks，但这是不好的方法。最好的方法是 simpleMethodOfAssigningNthElement。如果你愿意，你可以超载`operator=`上课`Derived`。

```
class Base{
public:
float a,b;
};

class Derived : public Base{
public:
    int someInteger, otherInt;

    void assignNthElement(vector<Base> &myArray,int i){
        this = myArray[i-1];// It's OK now
    }

    const Derived & operator=(const Base &base){
        a=base.a;
        b=base.b;
    }

}; 
```

# java - 将多个值表单数据库添加到 RichList Blackberry

> ID：10547321
> 
> 赞同：2
> 
> 时间：2012-05-11T07:34:58.663
> 
> 标签：java, blackberry, blackberry-eclipse-plugin

我正在使用黑莓插件，我正在使用黑莓的丰富列表。我想让列表出现的次数与数据库表中的条目相同。我正在使用下面的代码，但它在列表视图中只显示一个名称。我需要将数据库中的所有条目显示到列表视图中...请帮助我..

我已经用过 list.add(); 在 for 循环内，但它显示 Exception: java.lang.IllegalStateException: Field added to a manager while it has been parented。

```
 public static void richlistshow(){

    String name = null;

    list = new RichList(mainManager, true, 2, 0);

    Bitmap logoBitmap = Bitmap.getBitmapResource("delete.png");
    delete = new BitmapField(logoBitmap, Field.FIELD_HCENTER);

    for (int c = 0; c < target_list.size();c++){

        City tar_city = new City();
        tar_city = (City)target_list.elementAt(c);

        name = tar_city.get_city_name().toString();

         }

            //adding lists to the screen
    list.add(new Object[] {delete,name,"time-date"});

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:00:11.553

您没有发布您正在使用的完整代码。但以下代码可能会帮助您摆脱`IllegalStateException`. `BitmapField`您为每个列表条目添加了相同的实例，这导致了异常。

```
public static void richlistshow() {
    final Bitmap logoBitmap = Bitmap.getBitmapResource("delete.png");

    list = new RichList(mainManager, true, 2, 0);

    for (int c = 0; c < target_list.size(); c++) {
        // create a new BitmapField for every entry.
        // An UI Field can't have more than one parent.
        final BitmapField delete = new BitmapField(logoBitmap, Field.FIELD_HCENTER);
        City tar_city = (City) target_list.elementAt(c);
        final String name = tar_city.get_city_name().toString();
        // add to list
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                list.add(new Object[] { delete, name, "time-date" });
            }
        });
    }
} 
```

# java - 如何使用 64 位浏览器和 64 位 java 插件在 64 位 Linux 上获取 32 位 JRE 路径

> ID：10547326
> 
> 赞同：2
> 
> 时间：2012-05-11T07:35:27.390
> 
> 标签：java, linux, ubuntu, applet, 32bit-64bit

我的应用程序由三个组件组成：

1.  小程序
2.  Java 程序 (myapp.jar)
3.  JNI 库 (myjni.so)

请注意，JNI 库是为 32 位构建的。在 32 位操作系统上，小程序使用`java.home`属性来获取 JRE 路径。一旦小程序获得 JRE 路径，它就会像这样启动 JAR

```
JRE-path myapp.jar 
```

现在我需要在 64 位 Linux 上运行这个应用程序。在这里，我有两个选择：

1.  为 64 位构建 JNI 库。这是不可能的，因为所有依赖的库都需要为 64 位构建。（这是我最后的一个约束）
2.  要求用户安装 32 位 JVM 现在的问题是如何获取 32 位 JRE 路径，因为`java.home`属性给出了 64 位 JRE 路径。（因为浏览器和插件都是 64 位的）。一种选择是使用`update-alternatives –list java`命令获取所有 JRE 安装路径。然后对于每个安装路径，运行`JRE-path -d32 –version`命令查看是否支持32位JVM

    *   如果它支持 32 位 JVM，请使用该 JRE 路径来启动 JAR 文件
    *   如果没有任何 java 安装支持 32 位 JVM，则显示安装 32 位 JVM 的消息

问题：

1.  上述解决方案有什么问题吗？（我需要在 Ubuntu、Redhat 和 OpenSuse 上使用这个解决方案）
2.  在 64 位 Linux 上获得 32 个 JRE 路径是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:11:21.573

使用选项 1。构建 32 位和 64 位 JNI 库，并基于 32 位或 64 位 VM 加载相关的 .so。

您可以使用`sun.arch.data.model`Sun JDK 的系统属性

您可以使用`com.ibm.vm.bitmode`IBM websphere VM

或者`64`在`os.arch`系统属性中查找子字符串（它是基于 64 位英特尔的 VM 上的 x86_64/amd64）

由于您无法构建 64 位变体`.so`及其所有依赖`.a`和`.so`文件（这实际上是很好的软件配置管理实践），因此以下 shell 脚本应该是一个很好的努力。如果在调用它结束时脚本以 退出`66`，则没有有效的 32 位 java

```
#!/bin/bash -p

# attempt to find a 32bit VM
# uses a dummy class file (it's just an empty file)

trap 'rm -f /tmp/testclass$$.class /tmp/jlocations.$$' EXIT HUP

touch /tmp/testclass$$.class

tryj() {
    while read java; do
        errout=$($java -cp /tmp -d32 testclass$$ 2>&1)
        if grep -q 'java.lang.ClassFormatError' <<<$errout; then
            # good VM - run with this
            rm -f /tmp/testclass$$.class /tmp/jlocations.$$
            # echo $java "$@"
            exec $java "$@"
        fi
    done </tmp/jlocations.$$
    return 1
}

# try update-alternatives - debian/ubuntu
update-alternatives --list java > /tmp/jlocations.$$ 2>/dev/null

tryj "$@"

# Try alternatives - redhat
alternatives --list java > /tmp/jlocations.$$ 2>/dev/null

tryj "$@"

# then try locate - generic linux/unix
locate java | grep 'bin/java$' > /tmp/jlocations.$$

tryj "$@"

# if we had no luck, then use find - this will be sloooooooooow
find / -wholename '*/bin/java' >/tmp/jlocations.$$ 2>/dev/null
tryj "$@"

exit 66 
```

# c++ - 如何将类的实例与 C++ 中的 char * 变量进行比较？

> ID：10547329
> 
> 赞同：2
> 
> 时间：2012-05-11T07:35:31.727
> 
> 标签：c++, char, compare, instance

我的家庭作业需要帮助。我需要为停车场编写代码。为了编写它，我需要将我的类“ `Parkbox`”实例的输入，它是在堆上并通过另一个类“Parkinggarage”创建的，`#define EMPTY "--------".` 所以这是我的代码：Parkbox 定义：

```
class Parkbox{
char *license_plate; // car's license plate

public:
Parkbox(); //Default CTOR
Parkbox(char * ); // CTOR
~Parkbox(); // DTOR
void show();
};
and ParkingGarage:
class ParkingGarage{
Parkbox ***p2parkboxes; 
```

和我的 CTOR 或 ParkingGarage 以便在堆上创建 Parkbox 实例：

```
ParkingGarage::ParkingGarage(const int rw,const int clm, const int plns){

        p2parkboxes = new Parkbox **[plns];//points to the floors and make the arraq of p2p same size as number as floors
        for(int p=0;p<plns;p++){
            p2parkboxes[p]= new Parkbox *[plns];//for each Plane creats an array of pointer that is same with the num of rows
            for(int r=0;r<rw;r++)
                p2parkboxes[p][r]= new Parkbox [clm];
        }
    }

void ParkingGarage::find_next_free_parking_position()
{
    for(int f=0;f<dimensions_of_parkhouse[0];f++){
        for(int r=0;r<dimensions_of_parkhouse[1];r++){
            for (int c=0;c<dimensions_of_parkhouse[2];c++){ 
                //p2parkboxes[f][r][c] is the instance of the class Pakbox
                if(p2parkboxes[f][r][c]==EMPTY)
                {
                    next_free_parking_position[0]=p;
                    next_free_parking_position[1]=r;
                    next_free_parking_position[2]=c;
                }
            }
        }
    }
} 
```

无论如何，“ `p2parkboxes[f][r][c]==EMPTY`”它给了我“没有运算符”==匹配这些操作数的错误，。那么如何将一个类实例直接与另一个变量（如 EMPTY）进行比较？

我不知道我对你是否清楚。但是请帮助我，因为如果我不解决这个问题，我将无法继续完成我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:43:29.173

一般来说，您只能比较两种相同的类型。通过运算符重载，您可以定义自己的比较运算符来解决此问题。但是，C++ 默认无法比较两个类。

因此，在您的代码中，您似乎正在将 char* 类型与您的类类型进行比较。您应该将 char* 与另一个 char* 进行比较。如果将其视为字符串，则应使用 strcmp 以提高安全性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:44:16.203

您必须创建一个匹配的运算符重载。编译器错误应该为您命名参数，但该成员很可能看起来像下面这样：

```
bool Pakbox::operator==(const char *other) {
    return !strcmp(other, this->memberstring);
} 
```

请注意，`memberstring`必须由持有该批次物品的实际成员替换。

# python - 在没有系统包的 virtualenv 上安装 m2crypto

> ID：10547332
> 
> 赞同：18
> 
> 时间：2012-05-11T07:35:51.567
> 
> 标签：python, ubuntu, virtualenv, m2crypto

我在 Ubuntu 中使用 python 的 virtualenv 创建了一个没有系统包的虚拟环境并安装了 m2crypto，但是当我执行 shell 并尝试导入 M2Crypto 时，出现以下错误：

```
ImportError: /home/imediava/.virtualenvs/myenv/local/lib/python2.7/site-          
packages/M2Crypto/__m2crypto.so: undefined symbol: SSLv2_method 
```

从环境外部我遇到了同样的问题，除非我从 ubuntu 安装 python-m2crypto 和 apt-get。我知道我可以使用系统包创建环境，但我不想这样做。

无论如何，我可以在没有系统包的情况下创建一个虚拟环境，然后使用 pip 安装 m2crypto 而不会运行到 SSLv2_method？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-17T15:55:16.807

早期版本的 M2Crypto 似乎存在回归错误。

将[M2Crypto 的源代码](http://chandlerproject.org/Projects/MeTooCrypto#Downloads) 放入您的 virtualenv 后，您可以尝试使用下面的[差异](http://en.wikipedia.org/wiki/Diff)代码对其进行[修补。](http://linux.die.net/man/1/patch)

您可以通过下载源代码来完成此操作，并通过以下方式解压： `tar -xzf M2Crypto-0.21.1.tar.gz`

这应该创建`M2Crypto-0.21.1`将包含该目录的`SWIG`目录

在`SWIG`你会发现`_ssl.i`，这是要修补的文件。在同一目录中创建一个名为`_ssl.i.patch`例如使用[nano](http://linux.die.net/man/1/nano)编辑器的文件，并将下面列出的完整差异代码粘贴到其中。

接下来发出`patch _ssl.i _ssl.i.patch`将补丁合并到代码中的命令。（之后，您可以根据需要删除补丁文件。）

最后发出命令：

`python setup.py build`

其次是：

`python setup.py install`

手动安装。

**差异代码：**

```
--- SWIG/_ssl.i 2011-01-15 20:10:06.000000000 +0100
+++ SWIG/_ssl.i 2012-06-17 17:39:05.292769292 +0200
@@ -48,8 +48,10 @@
 %rename(ssl_get_alert_desc_v) SSL_alert_desc_string_long;
 extern const char *SSL_alert_desc_string_long(int);

+#ifndef OPENSSL_NO_SSL2
 %rename(sslv2_method) SSLv2_method;
 extern SSL_METHOD *SSLv2_method(void);
+#endif
 %rename(sslv3_method) SSLv3_method;
 extern SSL_METHOD *SSLv3_method(void);
 %rename(sslv23_method) SSLv23_method; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-11T08:18:51.980

你可以在你的全局环境中安装这个库，然后从你的全局站点包复制到 virtualenv。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-11T12:53:26.017

M2Crypto 0.22.3（pypi 中的当前版本）修复了这个问题，所以现在最简单的解决方案就是：

```
pip install --upgrade M2Crypto 
```

M2Crypto 0.22.3 已从[martinpaljak 的 github 存储库](https://github.com/martinpaljak/M2Crypto/tree/v0.22.3)发布，而不是从原始[M2Crypto 存储库发布](https://github.com/M2Crypto/M2Crypto)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-30T02:49:50.680

我对当前版本（M2Crypto-0.22.5）有同样的问题。最新的 RC 版本对我有用。

```
pip install M2Crypto==0.22.6rc4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-03T02:57:04.877

有一个计划用于 0.26.1的[补丁。](https://gitlab.com/m2crypto/m2crypto/merge_requests/117)

同时，您可以克隆 repo、应用补丁并从源代码安装。

```
git clone https://gitlab.com/m2crypto/m2crypto.git
(
    cd m2crypto
    git checkout 0.25.1
    curl 'https://gitlab.com/m2crypto/m2crypto/merge_requests/117.diff' | git apply -v
)
pip install -U m2crypto 
```

# visual-studio-2010 - 我可以设置 ReSharper 的 TestRunner 来告诉我测试中哪条线失败了吗？

> ID：10547334
> 
> 赞同：3
> 
> 时间：2012-05-11T07:36:00.580
> 
> 标签：visual-studio-2010, nunit, resharper

当我在 ReSharper 的 TestRunner 中运行单元测试时，它们只会告诉我发生的失败，而不是测试的位置！它有时甚至会截断大部分错误消息（因为它不适合屏幕）。为了解决这个问题，我需要运行在调试模式下失败的测试，它会在失败的行上停止，但这需要更多的时间。

有没有办法只启用行号输出和完整的错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:19:02.987

您是否激活了ReSharper 的*单元测试会话窗口中的***输出窗格**？

 *然后您可以**单击您的测试**和输出窗格，显示所有错误和输出（来自`Console.Out.Write(...)`）。通常有一个堆栈跟踪，您可以在其中单击一行以导航到代码。*

# java - 计算 Java Collection 差异或交集的性能

> ID：10547335
> 
> 赞同：2
> 
> 时间：2012-05-11T07:36:09.817
> 
> 标签：java, collections, set-difference, set-intersection

Java 允许通过[Collection 接口](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/Collection.html)的和方法计算[（集合论）差](http://en.wikipedia.org/wiki/Difference_%28set_theory%29#Relative_complement)和两个 Collection 对象的[交集](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)。`removeAll()``retainAll()`

这两个方法在Java 6的[AbstractCollection 类中的实现是](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/AbstractCollection.html)

```
public boolean removeAll(Collection<?> c) { // Difference
boolean modified = false;
Iterator<?> e = iterator();
while (e.hasNext()) {
    if (c.contains(e.next())) {
    e.remove();
    modified = true;
    }
}
return modified;
}

public boolean retainAll(Collection<?> c) { // Intersection
boolean modified = false;
Iterator<E> e = iterator();
while (e.hasNext()) {
    if (!c.contains(e.next())) {
    e.remove();
    modified = true;
    }
}
return modified;
} 
```

有什么方法可以更快地实现或执行上述（显然很昂贵）操作？

例如，在计算差异或交集之前对集合进行排序是否会带来任何整体性能提升？

是否有任何类别的 Collections 框架更适合使用这些操作（在性能方面）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:42:51.887

是的，有一种更快的方法可能。您提供的代码针对 e 的每个元素通过 c 循环。对于两个 100 个元素的数组，它将比较大约 100,000 个元素。

如果先对两个数组进行排序，则只需继续比较前两个元素。这将进行数百次比较。这类似于归并排序。做排序集合的交集`left`和`right`：

```
function intersect(left, right)
    var list result
    while length(left) > 0 and length(right) > 0
        if first(left) == first(right)
            append first(left) to result
            left = rest(left)
            right = rest(right)
        else if first(left) < first(right)
            left = rest(left)
        else
            right = rest(right)
    end while
    return result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:44:08.157

这些实现在`AbstractCollection`其中，因此它们非常通用，因为在这个抽象级别上，对集合知之甚少，并且可用操作的数量非常有限。`Collection`仅考虑接口允许的内容并且对集合的类型及其实现细节一无所知，很难有任何更智能的东西。排序可能有效也可能无效，具体取决于所讨论集合的大小和类型，在此级别代码无法知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:45:47.113

阅读以下的javadoc `AbstractCollection`：

> 要实现一个不可修改的集合，程序员只需要扩展这个类并提供迭代器的实现[...]

因此，我认为您应该检查 Iterator 是如何为特定类实现的，以真正了解这些方法的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T01:22:17.370

> 有什么方法可以更快地实现或执行上述（显然很昂贵）操作？

这些操作到底有多昂贵取决于作为参数传递的集合如何实现 contains()。如果它是`HashSet`,`contains`是一个常数（预期）时间操作，导致`removeAll`或`retainAll`完成线性（预期）时间。

排序会更昂贵。

好吧，集合操作在 a 上完成时最有效是合理的`Set`，不是吗？

如果集合中的元素是枚举或密集整数，您可以使用 a`EnumSet`或 a获得更快的速度`BitSet`。

# email - 黑莓邮件

> ID：10547338
> 
> 赞同：1
> 
> 时间：2012-05-11T07:36:23.030
> 
> 标签：email, blackberry, service, blocking

有没有人知道如何使用黑莓禁用企业电子邮件

```
net.rim.blackberry.api.mail 
```

我尝试了很多方法，但没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T12:36:11.520

企业电子邮件由 BES 服务器提供服务，因此受 IT 策略控制。如果有任何方法可以使用 API 禁用它，我会感到非常惊讶。要从 BES 中删除 BlackBerry，您必须删除 IT 策略。

# python - 将对象添加到python的集合中并通过对象的属性确定

> ID：10547343
> 
> 赞同：9
> 
> 时间：2012-05-11T07:36:51.483
> 
> 标签：python, set

我有这样的`Person`课：

```
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __repr__(self):
        return '<Person {}>'.format(self.name) 
```

我想将此类的一些实例添加到集合中，如下所示：

```
tom = Person('tom', 18)
mary = Person('mary', 22)
mary2 = Person('mary2', 22)

person_set = {tom, mary, mary2}
print(person_set)
# output: {<Person tom>, <Person mary>, <Person mary2>} 
```

如您所见，集合中有 2 个玛丽。我怎样才能使`Person`具有相同年龄的实例被认为是同一个人，并且只添加到集合中一次？

换句话说，我怎样才能得到结果`{<Person tom>, <Person mary>}`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-11T07:57:28.403

当一个新对象被添加到 python 集合中时，首先计算对象的哈希码，然后，如果集合中已经有一个或多个具有相同哈希码的对象，则测试这些对象是否与新对象。

这样做的结果是你需要在你的类上实现[`__hash__(...)`](http://docs.python.org/reference/datamodel.html#object.__hash__)and[`__eq__(...)`](http://docs.python.org/reference/datamodel.html#object.__eq__)方法。例如：

```
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __eq__(self, other):
        return self.age == other.age

    def __hash__(self):
        return hash(self.age)

    def __repr__(self):
        return '<Person {}>'.format(self.name)

tom = Person('tom', 18)
mary = Person('mary', 22)
mary2 = Person('mary2', 22)

person_set = {tom, mary, mary2}
print(person_set)
# output: {<Person tom>, <Person mary>} 
```

However, you should think very carefully about what the correct implementation of `__hash__` and `__eq__` should be for your class. The above example works, but is non-sensical (e.g. in that both `__hash__` and `__eq__` are defined only in terms of age).

# c# - 如何在没有 ZipArchive (zlib.net) 的情况下在 Windows 8 Metro 中解压缩 ZIP 文件

> ID：10547361
> 
> 赞同：2
> 
> 时间：2012-05-11T07:38:38.230
> 
> 标签：c#, zip, windows-8

我有一个用 C# 编写的 Windows 8 Metro 应用程序。我需要打开一个 ZIP 文件并读取其中包含的 XML 文件。我使用了 ZipArchive 类，但它在当前版本中变得有问题并且不再有效。还有其他方法吗？

我尝试搜索其他 ZIP 库，但我可以在 WinRT 中工作的唯一一个是 zlib.net，而且这个库没有非常友好的界面。如何在 C# 中使用 zlib.net 从 ZIP 中将 XML 文件作为字符串读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:41:20.787

如何使用内置库类[GZipStream](https://stackoverflow.com/a/1348305/759558)或 Deflate。

文档说[system.io.compressions.Deflate](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)支持 zip (RFC 1951)。

# java - 缓冲阅读器的解释？

> ID：10547362
> 
> 赞同：1
> 
> 时间：2012-05-11T07:38:38.477
> 
> 标签：java

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); 
```

`System.in(Standard input stream)-`从键盘获取输入（以字节为单位）

`InputStreamReader:`将字节转换为 Unicode 字符/将标准输入转换为阅读器对象以与 BufferedReader 一起使用

`Finally BufferedReader`：用于从字符输入流中读取（输入流阅读器）

`String c = br.ReadLine();`-- 一种用于从输入流中读取字符并将它们一次性放入字符串中的方法，而不是逐个字节。

上面的一切都正确吗？如有错误请指正！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T07:40:33.830

快到了，但是这个：

> `String c = br.readLine();`-- 一种用于从输入流中读取字符并将它们一次性放入字符串中的方法，而不是逐个字节。

它从输入*阅读器*读取字符（`BufferedReader`不知道流）并一次返回一整行，而不是*逐个字符*。分层考虑，在“之上”`InputStreamReader`层，“字节”的概念不再存在。

另外，请注意，您可以在`Reader`不读取一行的情况下读取带有 a 的字符块：`read(char[], int, int)`- 关键`readLine()`是它将为您进行行尾检测。

（如评论中所述，它也是`readLine`，不是`ReadLine`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-26T03:29:31.733

# BufferedReader 的目的是什么，解释一下？

Bufferedreader是一个java类，下面是这个类的层次结构。

**java.lang.Object ==> java.io.Reader ==> java.io.BufferedReader**

此外，BufferedReader 提供了一种读取内容的有效方式。很简单。。我们看看下面的例子就明白了。

```
import java.io.BufferedReader;
import java.io.FileReader;

public class Main {

    public static void main(String[] args) {

        BufferedReader contentReader = null;
        int total = 0; // variable total hold the number that we will add

        //Create instance of class BufferedReader
        //FileReader is built in class that takes care of the details of reading content from a file
        //BufferedReader is something that adds some buffering on top of that to make reading fom a file more efficient.
        try{
            contentReader = new BufferedReader(new FileReader("c:\\Numbers.txt"));
            String line = null;

            while((line = contentReader.readLine()) != null)

                total += Integer.valueOf(line);

            System.out.println("Total: " + total);
        }

        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }

        finally{
            try{
                if(contentReader != null)
                    contentReader.close();
            }

            catch (Exception e)
            {
                System.out.println(e.getMessage());
            }
        }

    }
} 
```

# python - AttributeError：“NoneType”对象在 Openerp 中没有属性“fields_get”

> ID：10547363
> 
> 赞同：0
> 
> 时间：2012-05-11T07:38:43.080
> 
> 标签：python, xml, openerp

为什么会出现这个错误？有谁熟悉这个错误。当我单击任何选项卡时出现此错误，例如：销售、采购、人力资源、会计等。

```
Traceback (most recent call last):
File "/home/openERP/src/openerp-server/bin/osv/osv.py", line 122, in wrapper
return f(self, dbname, *args, **kwargs)
File "/home/openERP/src/openerp-server/bin/osv/osv.py", line 176, in execute
res = self.execute_cr(cr, uid, obj, method, *args, **kw)
File "/home/openERP/src/openerp-server/bin/osv/osv.py", line 167, in execute_cr
return getattr(object, method)(cr, uid, *args, **kw)
File "/home/openERP/src/openerp-server/bin/addons/hr/hr_department.py", line 94, in read
res = super(ir_action_window, self).read(cr, uid, select, fields=fields, context=context, load=load)
File "/home/openERP/src/openerp-server/bin/osv/orm.py", line 2944, in read
result = self._read_flat(cr, user, select, fields, context, load)
File "/home/openERP/src/openerp-server/bin/osv/orm.py", line 3064, in _read_flat
res2 = self._columns[f].get(cr, self, ids, f, user, context=context, values=res)
File "/home/openERP/src/openerp-server/bin/osv/fields.py", line 800, in get
res = self._fnct(obj, cr, user, ids, name, self._arg, context)
File "/home/openERP/src/openerp-server/bin/addons/base/ir/ir_actions.py", line 193, in _search_view
fields_from_fields_get = self.pool.get(act.res_model).fields_get(cr, uid, context=context)
AttributeError: 'NoneType' object has no attribute 'fields_get' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:52:44.323

It looks like the problem in:

```
self.pool.get(act.res_model) 
```

It should be the name which you are using `_name` attributes

Try with

```
self.pool.get(act.res.model) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:43:49.363

`self.pool.get(act.res_model)`正在返回`None`（因为字典`pool`没有带有 key 的条目`act.res_model`）。

因此，`.fields_get(...)`对该对象的调用失败（因为`None`显然没有这样的方法，这是错误消息试图告诉你的）。

# web-services - 使用 WWEx 网络服务时如何解决错误？

> ID：10547366
> 
> 赞同：0
> 
> 时间：2012-05-11T07:38:55.790
> 
> 标签：web-services, coldfusion, shipping

我正在尝试使用 webservice 来从 webserivce **"http://www.wwexship.com/webServices/services/FreightShipmentQuote?wsdl"**获取运费，它给出了一个错误，“Web service operation getShipmentSimpleQuote with parameters {.... } 找不到”。而我提供有效的登录名、密码、许可证密钥、帐号和其他必需的详细信息。

请建议我如何使用这个网络服务？
**wsdl 文件——**

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://www.wwexship.com" xmlns:impl="http://www.wwexship.com" xmlns:intf="http://www.wwexship.com" xmlns:apachesoap="http://xml.apache.org/xml-soap" xmlns:wsdlsoap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
<!--WSDL created by Apache Axis version: 1.4
Built on Apr 22, 2006 (06:55:48 PDT)-->
 <wsdl:types>
  <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.wwexship.com" elementFormDefault="qualified">
   <complexType name="AuthenticationToken">
    <sequence>
     <element name="loginId" nillable="true" type="xsd:string"/>
     <element name="password" nillable="true" type="xsd:string"/>
     <element name="licenseKey" nillable="true" type="xsd:string"/>
     <element name="accountNumber" nillable="true" type="xsd:string"/>
    </sequence>
   </complexType>
   <element name="AuthenticationToken" type="impl:AuthenticationToken" maxOccurs="1"/>   
   <complexType name="QuoteLineItem">
    <sequence>
     <element name="nmfcClass" nillable="true" type="xsd:string"/>
     <element name="weight" nillable="true" type="xsd:string"/>
    </sequence>
   </complexType>
   <complexType name="ArrayOfQuoteLineItem">
    <sequence>
     <element name="lineItem" nillable="true" type="impl:QuoteLineItem" maxOccurs="unbounded"/>
    </sequence>
   </complexType>
   <complexType name="FreightShipmentQuoteRequest">
    <sequence>
     <element name="senderCity" nillable="true" type="xsd:string"/>
     <element name="senderState" nillable="true" type="xsd:string"/>
     <element name="senderZip" nillable="true" type="xsd:string"/>
     <element name="receiverCity" nillable="true" type="xsd:string"/>
     <element name="receiverState" nillable="true" type="xsd:string"/>
     <element name="receiverZip" nillable="true" type="xsd:string"/>
     <element name="lineItems" nillable="true" type="impl:ArrayOfQuoteLineItem"/>
     <element name="hazmatShipment" nillable="true" type="xsd:string"/>
     <element name="insidePickup" nillable="true" type="xsd:string"/>
     <element name="liftgatePickup" nillable="true" type="xsd:string"/>
     <element name="residentialPickup" nillable="true" type="xsd:string"/>
     <element name="tradeshowPickup" nillable="true" type="xsd:string"/>
     <element name="constructionSitePickup" nillable="true" type="xsd:string"/>
     <element name="insideDelivery" nillable="true" type="xsd:string"/>
     <element name="liftgateDelivery" nillable="true" type="xsd:string"/>
     <element name="residentialDelivery" nillable="true" type="xsd:string"/>
     <element name="tradeshowDelivery" nillable="true" type="xsd:string"/>
     <element name="constructionSiteDelivery" nillable="true" type="xsd:string"/>
     <element name="notifyBeforeDelivery" nillable="true" type="xsd:string"/>
    </sequence>
   </complexType>
   <element name="freightShipmentQuoteRequest" type="impl:FreightShipmentQuoteRequest"/>
   <complexType name="ErrorDescription">
    <sequence>
     <element name="errorDescription" nillable="true" type="xsd:string" maxOccurs="unbounded"/>
    </sequence>
   </complexType>
   <complexType name="CarrierQuoteResult">
    <sequence>
     <element name="carrierName" nillable="true" type="xsd:string"/>
     <element name="carrierSCAC" nillable="true" type="xsd:string"/>
     <element name="totalPrice" nillable="true" type="xsd:string"/>
     <element name="transitDays" nillable="true" type="xsd:string"/>
     <element name="interline" nillable="true" type="xsd:string"/>
     <element name="guaranteedService" nillable="true" type="xsd:string"/>
     <element name="highCostDeliveryShipment" nillable="true" type="xsd:string"/>
     <element name="nmfcRequired" nillable="true" type="xsd:string"/>
    </sequence>
   </complexType>
   <complexType name="ArrayOfCarrierQuoteResult">
    <sequence>
     <element name="carrierQuoteResult" nillable="true" type="impl:CarrierQuoteResult" maxOccurs="unbounded"/>
    </sequence>
   </complexType>
   <complexType name="FreightShipmentQuoteResponse">
    <sequence>
     <element name="responseStatusCode" nillable="true" type="xsd:string"/>
     <element name="responseStatusDescription" nillable="true" type="xsd:string"/>
     <element name="errorDescriptions" nillable="true" type="impl:ErrorDescription"/>
     <element name="quoteResults" nillable="true" type="impl:ArrayOfCarrierQuoteResult"/>
    </sequence>
   </complexType>
   <element name="freightShipmentQuoteResponse" type="impl:FreightShipmentQuoteResponse"/>
  </schema>
 </wsdl:types>
 <wsdl:message name="getShipmentSimpleQuoteResponse">
  <wsdl:part name="freightShipmentQuoteResponse" element="impl:freightShipmentQuoteResponse"/>
 </wsdl:message>
 <wsdl:message name="FreightShipmentQuoteRequestHeaders">
  <wsdl:part name="authenticationToken" element="impl:AuthenticationToken"/>
 </wsdl:message>
 <wsdl:message name="getShipmentSimpleQuoteRequest">
  <wsdl:part name="freightShipmentQuoteRequest" element="impl:freightShipmentQuoteRequest"/>
 </wsdl:message>
 <wsdl:portType name="FreightShipmentQuote">
  <wsdl:operation name="getShipmentSimpleQuote" parameterOrder="freightShipmentQuoteRequest">
   <wsdl:input name="getShipmentSimpleQuoteRequest" message="impl:getShipmentSimpleQuoteRequest"/>
   <wsdl:output name="getShipmentSimpleQuoteResponse" message="impl:getShipmentSimpleQuoteResponse"/>
  </wsdl:operation>
 </wsdl:portType>
 <wsdl:binding name="FreightShipmentQuoteSoapBinding" type="impl:FreightShipmentQuote">
  <wsdlsoap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
  <wsdl:operation name="getShipmentSimpleQuote">
   <wsdlsoap:operation soapAction=""/>
   <wsdl:input name="getShipmentSimpleQuoteRequest">
    <wsdlsoap:body use="literal"/>
    <wsdlsoap:header message="impl:FreightShipmentQuoteRequestHeaders" part="authenticationToken" use="literal">
    </wsdlsoap:header>
   </wsdl:input>
   <wsdl:output name="getShipmentSimpleQuoteResponse">
    <wsdlsoap:body use="literal"/>
   </wsdl:output>
  </wsdl:operation>
 </wsdl:binding>
 <wsdl:service name="FreightShipmentQuoteService">
  <wsdl:port name="FreightShipmentQuote" binding="impl:FreightShipmentQuoteSoapBinding">
   <wsdlsoap:address location="http://www.wwexship.com/webServices/services/FreightShipmentQuote"/>
  </wsdl:port>
 </wsdl:service>
</wsdl:definitions> 
```

**调用网络服务的代码是-**

```
<!--- items data --->
<cfset items = arrayNew(1) /> 
<cfset str = structNew() /> 
<cfset str.nmfcClass = "apple" />
<cfset str.weight = "15" />
<cfset arrayAppend(items, str) />

<!--- freightShipmentQuoteRequest data--->
<cfset st = structNew() /> 
<cfset st.senderCity = "Freeport" />
<cfset st.senderState = "NY" />
<cfset st.senderZip = "11520" />
<cfset st.receiverCity = "Staten Island" />
<cfset st.receiverState = "NY" />
<cfset st.receiverZip = "10314" />
<cfset st.lineItems = "#items#" />
<cfset st.hazmatShipment = "N" />
<cfset st.insidePickup = "N" />
<cfset st.liftgatePickup = "N" />
<cfset st.residentialPickup = "N" />
<cfset st.tradeshowPickup = "N" />
<cfset st.constructionSitePickup = "N" />
<cfset st.insideDelivery = "N" />
<cfset st.liftgateDelivery = "N" />
<cfset st.residentialDelivery = "N" />
<cfset st.tradeshowDelivery = "N" />
<cfset st.constructionSiteDelivery = "N" />
<cfset st.notifyBeforeDelivery = "N" />

<cfinvoke 
  webservice="http://www.wwexship.com/webServices/services/FreightShipmentQuote?wsdl"
  method="getShipmentSimpleQuote"
  username="copssship"
  password="password"
  returnvariable="retTemp">
    <cfheader name="loginId" value="copssship">
    <cfheader name="password" value="password">
    <cfheader name="licenseKey" value="hhrWQ7RMJEDKJMh4">
    <cfheader name="accountNumber" value="W922601302">
    <!---<cfheader name="AuthenticationToken" value="#stAuth#" />--->
    <cfinvokeargument name="freightShipmentQuoteRequest" value="#st#" />
  </cfinvoke>

  <cfdump var="#retTemp#"><br/>
  <cfoutput>
  <b>retTemp:</b>#retTemp#<br/><br/>
  <b>retTemp.ResponseStatusCode:</b>#retTemp.ResponseStatusCode#<br/>
  <b>retTemp.responseStatusDescription:</b>#retTemp.responseStatusDescription#<br/>
  <b>retTemp.errorDescriptions:</b>#retTemp.errorDescriptions[1]#<br/>
  </cfoutput> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:13:07.447

在我看来，您通过的弧线与预期的弧线之间存在不匹配。这是我要尝试的两件事：

1：使用 foo=CreateObject("webservice","http://server/wsdl"); 然后转储对象。你应该看到它上面的方法和参数，这可能与你上面的参数不同。

2：下载并安装[提琴手](http://www.fiddler2.com)。然后启动它并将 proxyServer="localhost" proxyPort="8888" 添加到您的呼叫中。ColdFusion 现在将通过 Fiddler 路由所有 Web 服务请求，您可以检查传入和传出远程服务器的内容。对于这种事情来说，这是一种非常强大的技术。

我认为克里斯是对的，您需要将结构作为参数传递。我可以使用以下代码调用该服务：

```
<cfoutput>
<cfset shipService = CreateObject("webservice","http://www.wwexship.com/webServices/services/FreightShipmentQuote?wsdl")>
<cfdump var="#shipService#">
<cfset response=shipService.getShipmentSimpleQuote({})>
<cfdump var="#response#">
<cfdump var="#response.getResponseStatusCode()#">
<cfdump var="#response.getResponseStatusDescription()#"> 
```

该服务正在返回一个失败代码，但它确实执行了。WSDL 将 FreightShipmentQuoteRequest 的所有成员定义为 nillabla，这就是我的代码工作的原因，但是当您正确实现时，您可能需要为 lineItems 元素使用一个结构数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:14:51.203

我无法测试此解决方案，因为我无法登录到该服务，但是看起来 getShipmentSimpleQuote 采用了一个名为“freightShipmentQuoteRequest”的结构参数，其中您尝试将键作为参数传递给它。

```
<cfinvoke 
  webservice="http:.....FreightShipmentQuote?wsdl"
  method="getShipmentSimpleQuote"
  returnvariable="aTemp">
    <cfinvokeargument name="freightShipmentQuoteRequest" value="#{
      "senderCity" = "Freeport",
      "senderState" = "NY",
      ....
    }#" />
</cfinvoke> 
```

如果这不起作用，您可以尝试在所有字段中添加前缀“freightShipmentQuoteRequest”。IE。

```
 <cfinvokeargument name="freightShipmentQuoteRequest.senderCity" value="Freeport"/> 
```

我在 wsdl 中看不到的是对登录参数的任何引用。

# avaudioplayer - 应用程序中的 .caf 文件无法在 iPod 中播放

> ID：10547371
> 
> 赞同：0
> 
> 时间：2012-05-11T07:39:16.250
> 
> 标签：avaudioplayer

在我的应用程序中，我有一些 .caf 音频文件（格式：IMA 4:1，立体声，44.100 kHz）。我面临的问题是这些音频文件在按钮操作时播放（每个铃声一个按钮）。它们在 iphone（ios 版本 3 到 5）上播放良好，但我无法在 ipod 上收听。我已经按照其他站点上描述的解决方案完成了所有声音设置更改，但没有任何反应。ipod也没有卡在耳机模式（这个问题有时会在我们在播放任何音频文件时拔掉耳机时发生）。所以请尽快给出任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:53:40.440

首先你导入框架然后使用下面的代码：

```
#import <AudioToolbox/AudioToolbox.h> 
```

随时通过此方法调用：

```
[self BackgroundSound:@"sounf file name"];//must have in resource(.wav,.mp3,.caf) 
```

通过上述方法编写此函数用于调用：

```
- (void)BackgroundSound:(NSString *) name 
{
    NSString *spath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:name];
  AVAudioPlayer*  BackgroundPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:spath] error:nil];
    BackgroundPlayer.numberOfLoops = -1; // set to -1 to loop repeated
    BackgroundPlayer.volume = 0.5; // value is from 0 to 1.0 (float)
    [BackgroundPlayer play]; // play
} 
```

在我的应用程序中都可以在 iPad/iPhone 上工作。我希望，它对你也有帮助。

# android - Adobe AIR CameraUI 叠加图像

> ID：10547373
> 
> 赞同：3
> 
> 时间：2012-05-11T07:39:51.937
> 
> 标签：android, ios, actionscript-3, air

我正在使用 ActionScript 和其他 Adob​​e 应用程序通过 AIR 2.7 开发一种针对 ios 和 Android 的小型游戏应用程序。

我的要求是在覆盖图像的同时启动相机，以便用户可以在覆盖图像中显示的边界内拍摄一个人的照片。

启动相机，将其保存为相机胶卷，CameraUI 一切正常，但看不到任何设置叠加图像的选项。

AIR 原生扩展是唯一的方法吗？请有任何替代方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:29:43.977

不是 100% 确定对于 android 是否相同，但是使用 iOS，您可以像从普通闪存中的网络摄像头获取视频一样获取视频，并将其附加到视频实例。

```
var cam:Camera = Camera.getCamera(); 
if (cam != null) 
{ 
    var vid:Video = new Video(cam.width, cam.height); 
    vid.attachCamera(cam); 
    addChild(vid); 
} 
```

在 iPhone 和 iPad 上运行良好

# javascript - javascript将元素添加到li标签

> ID：10547375
> 
> 赞同：2
> 
> 时间：2012-05-11T07:40:14.330
> 
> 标签：javascript, html

嗨，我想在按下链接时向 LI 添加
元素我可以像这样将元素添加到 DIV

我也看到过这个问题[JavaScript 链接应该使用哪个“href”值，“#”还是“javascript:void(0)”？](https://stackoverflow.com/questions/134845/href-attribute-for-javascript-links-or-javascriptvoid0?rq=1)

# html代码

```
<div id="div">
<a href="" onclick="add()">add</a>
</div> 
```

# javascript代码

```
function add(){

    var bigDiv = document.getElementById('div');
    var input = document.createElement('input');
    input.setAttribute('type', 'text');
    bigDiv.appendChild(input);
    } 
```

它工作得很好
但是如果我像这样将html代码从 div 更改为 li

# html代码

```
<ul>
<li id="li">
<a href="" onclick="add()">add</a>
</li>
</ul> 
```

# javascript

```
function add(){
var bigLi = document.getElementById('li');
var input = document.createElement('input');
input.setAttribute('type', 'text');
bigLi.appendChild(input);
} 
```

它不起作用
我确保没有语法错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:46:52.383

检查您的 HTML：

*   你没有关闭`</a>`
*   您的 onclick 代码没有`""`像`onclick="add()"`
*   您没有禁止链接的默认操作（即重定向）。尝试[添加`href="#"`](http://jsfiddle.net/udJ8d/)以防止它移动并[添加`return false`](http://jsfiddle.net/udJ8d/1/)到函数的末尾。

    ```
    <a href="#" onclick="add()">a</a>

    //AND

    function add(){
        ...
        return false;
    } 
    ```

# php - 子域的 session_set_cookie_params

> ID：10547380
> 
> 赞同：0
> 
> 时间：2012-05-11T07:40:41.863
> 
> 标签：php, subdomain, sessionid

这可能有点令人困惑，所以请耐心等待我解释这个问题。

我有一个网站 www.mydomain.com 和一个手机版 m.mydomain.com 主网站没有任何具体的cookie_params设置 手机网站具体设置

```
session_set_cookie_params(0, '/', '.mydomain.com'); 
```

移动设备会自动检测并定向到移动站点。

移动站点使用[https://www.mydomain.com/mobile/](https://www.mydomain.com/mobile/)进行结帐，以便 SSL 证书有效。所以我们从 m 切换。到 www。当我们安全的时候。

这就是奇怪开始的地方......

在我的 iPhone 上，我可以毫无问题地完成整个过程。

但是，当我使用计算机浏览器并特别选择使用移动网站时，我无法进入结帐 - 原因是 session_id 在 m. 和万维网。（& 数据库找不到您的购物篮项目，因此它不会让您进入结帐）或者更确切地说有 2 个会话 ID - 一个用于 www。& 一个给米。

鉴于移动网站的每个页面都设置了上述参数，为什么计算机浏览器选择使用 www. 会话ID？

任何解决这个问题的建议都非常感谢。

附加信息：我从 Firefox 中删除了所有 cookie 并重新启动了浏览器。我直接去了 m.mydomain.com 并且这工作正常，可以结帐。

因此，也许有了这些信息，问题就变成了有没有办法强制移动网站——​​不管 URL 是什么——使用特定的 cookie 参数名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:04:06.223

```
session_set_cookie_params(0, '/', '.'.str_replace('www.','',$_SERVER['HTTP_HOST']));
session_name('ses_name');
session_start(); 
```

# c# - C# - 选择实体和变量 LINQ/查询

> ID：10547381
> 
> 赞同：1
> 
> 时间：2012-05-11T07:40:42.830
> 
> 标签：c#, entity-framework-4.1

我正在使用 C# 构建文件下载服务 - 该过程的一部分验证来自一个或多个数据库的下载并提供下载的详细信息。

验证过程可以调用四个数据库——这实际上取决于下载用于哪个服务。数据库是 MSSQL 或 MySQL，可以使用存储过程（复杂类型）或具有多个连接的 LINQ 查询。所有结果都将包含相同的列信息。

我已经在实体框架中定义了数据库，并且我对单个实例中的代码感到满意 - 如果我查询不同的数据库，我不想再次编写执行相同任务的代码。

我已经搜索了几个小时，试图找到一个解决方案，使我能够根据条件指定要使用的实体和查询，并保持强类型。

对于存储过程查询，我使用如下代码：

```
using (myEntity1 ctx = new myEntity1())
{
    var results = ctx.MyStoredProcedure(param1, param2);

    foreach (var result in results)
    {
        // do stuff here
    }
} 
```

对于 LINQ 查询，我可以使用如下代码：

```
using (myEntity2 ctx = new myEntity2())
{
    var results = (from t in ctx.table select new { t.Col1, t.Col2,});

    foreach (var result in results)
    {
        // do stuff here
    }
} 
```

简而言之，我希望能够根据多个条件指定实体和查询。我还希望结果是强类型的。看起来很简单，但我找不到有效的答案。

谢谢

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T21:11:00.370

经过一年的不间断学习，如果我现在这样做，我可能会使用存储库将每个数据集加载到其 POCO 中，然后将这些 POCO 投影到我真正想要的一个中，也许使用这种扩展方法：

```
public static class QueryableExtensions
{

    public static ProjectionExpression<TSource> Project<TSource>(this IQueryable<TSource> source)
    {
        return new ProjectionExpression<TSource>(source);
    }

    public static string GetSQL<TSource>(this IQueryable<TSource> source)
    {
        return source.ToString();
    }
}

public class ProjectionExpression<TSource>
{
    private static readonly Dictionary<string, Expression> ExpressionCache = new Dictionary<string, Expression>();

    private readonly IQueryable<TSource> _source;

    public ProjectionExpression(IQueryable<TSource> source)
    {
        _source = source;
    }

    public IQueryable<TDest> To<TDest>()
    {
        var queryExpression = GetCachedExpression<TDest>() ?? BuildExpression<TDest>();

        return _source.Select(queryExpression);
    }

    private static Expression<Func<TSource, TDest>> GetCachedExpression<TDest>()
    {
        var key = GetCacheKey<TDest>();

        return ExpressionCache.ContainsKey(key) ? ExpressionCache[key] as Expression<Func<TSource, TDest>> : null;
    }

    private static Expression<Func<TSource, TDest>> BuildExpression<TDest>()
    {
        var sourceProperties = typeof(TSource).GetProperties();
        var destinationProperties = typeof(TDest).GetProperties().Where(dest => dest.CanWrite);
        var parameterExpression = Expression.Parameter(typeof(TSource), "src");

        var bindings = destinationProperties
                            .Select(destinationProperty => BuildBinding(parameterExpression, destinationProperty, sourceProperties))
                            .Where(binding => binding != null);

        var expression = Expression.Lambda<Func<TSource, TDest>>(Expression.MemberInit(Expression.New(typeof(TDest)), bindings), parameterExpression);

        var key = GetCacheKey<TDest>();

        ExpressionCache.Add(key, expression);

        return expression;
    }

    private static MemberAssignment BuildBinding(Expression parameterExpression, MemberInfo destinationProperty, IEnumerable<PropertyInfo> sourceProperties)
    {
        var sourceProperty = sourceProperties.FirstOrDefault(src => src.Name == destinationProperty.Name);

        if (sourceProperty != null)
        {
            return Expression.Bind(destinationProperty, Expression.Property(parameterExpression, sourceProperty));
        }

        var propertyNames = SplitCamelCase(destinationProperty.Name);

        if (propertyNames.Length == 2)
        {
            sourceProperty = sourceProperties.FirstOrDefault(src => src.Name == propertyNames[0]);

            if (sourceProperty != null)
            {
                var sourceChildProperty = sourceProperty.PropertyType.GetProperties().FirstOrDefault(src => src.Name == propertyNames[1]);

                if (sourceChildProperty != null)
                {
                    return Expression.Bind(destinationProperty, Expression.Property(Expression.Property(parameterExpression, sourceProperty), sourceChildProperty));
                }
            }
        }

        return null;
    }

    private static string GetCacheKey<TDest>()
    {
        return string.Concat(typeof(TSource).FullName, typeof(TDest).FullName);
    }

    private static string[] SplitCamelCase(string input)
    {
        return Regex.Replace(input, "([A-Z])", " $1", RegexOptions.Compiled).Trim().Split(' ');
    }
} 
```

[http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-code](http://www.devtrends.co.uk/blog/stop-using-automapper-in-your-data-access-code)

# iphone - 如何测试本地化“巴西葡萄牙语”？

> ID：10547385
> 
> 赞同：4
> 
> 时间：2012-05-11T07:40:58.210
> 
> 标签：iphone, ios, localization

我想知道如何在 iphone 中触发本地化语言葡萄牙语-巴西？（或者模拟器都可以）？也就是说，如何在 iphone 上测试葡萄牙语-巴西本地化？

我发现国际环境中只有葡萄牙语和葡萄牙语（葡萄牙），但不幸的是，两者都不是答案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T23:22:32.870

好的，我有同样的问题，我刚刚解决了。

在您的项目中使用“葡萄牙语”而不是“葡萄牙语-巴西”，您的葡萄牙语设备应该可以正常工作。

这是问题所在：

当我选择项目文件时，我试图在“+”处使用葡萄牙语-巴西设置葡萄牙语，当我将设备和模拟器（用于测试）语言更改为葡萄牙语时（一旦没有葡萄牙语-巴西)，文本来自默认语言（英语），这意味着它不起作用。

我尝试删除“葡萄牙语-巴西”并添加“葡萄牙语”，当我将设备更改为葡萄牙语时它起作用了；

我认为这是 XCode 中的一个错误，即语言“葡萄牙语-巴西”，因为该设备在“设置”>“通用”>“国际”> 设备语言中没有类似的语言，只有“葡萄牙语”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:46:13.353

好吧，我是葡萄牙人，要触发这些，您应该将语言设置为葡萄牙语。如果它不适用于您的情况，则可能是与代码相关的问题。尝试执行以下操作：

*   仅保留 1 个版本的 Localized.strings 文件作为葡萄牙语版本，删除其他所有内容（仅用于测试）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T12:44:10.090

也许您正在查看错误的设置。要在 iOS 中更改语言，请前往“设置”>“通用”>“国际”>“语言”。还有设置>常规>国际>区域格式，但此设置控制日期、时间和数字格式（即区域设置格式，而不是本地化）等内容

当您更改语言设置时，即使在模拟器中，您也会看到 iOS 用户界面已更改为新语言。如果您随后启动您的应用程序，但没有看到它按预期进行本地化（假设您当然添加了该语言的本地化资源），那么就出了问题！

# vb.net - 想要在 Web 浏览器中将 VB.Net 桌面应用程序作为 Web 应用程序运行

> ID：10547391
> 
> 赞同：0
> 
> 时间：2012-05-11T07:41:44.140
> 
> 标签：vb.net

我有一个用 VB.Net 和 SQL Server 开发的小型 ERP 财务软件，包括 HRM、Accounts、General Ledger 等模块。

现在我想在 web 上运行一些模块，但是在 asp.net 或其他 web 工具中创建所有应用程序需要太多时间。

有什么方法可以在 Web 浏览器中特别是在 Web 上运行此桌面应用程序。?

任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:15:18.100

如果您不想重新编写应用程序，可以查看[Go Global](http://www.resource-dynamics.com/goglobal.asp)。

我不能保证它，因为我个人从未使用过它，但我知道有人使用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T14:45:32.343

我已经测试过它作为过去的概念证明，它运行得很好。叫.net零部署，大家可以查一下。唯一需要担心的是您需要访问数据库，记住您是通过端口 80 支付的，因此可能需要一个 Web 服务来访问数据库调用。不确定我还有代码试用版，但我可以看看。

# octave - 如何制作一个独立的包/函数库

> ID：10547396
> 
> 赞同：2
> 
> 时间：2012-05-11T07:42:04.043
> 
> 标签：octave

我正在 Matlab/Octave 的公共子集中编写一些支持代码，这些代码以一堆函数的形式出现。我们称它为一个包。

我希望能够组织包裹，即

1.  将所有相关的函数文件放在一个地方，用户不应该存储他们的代码；
2.  有一些内部组织（“子包”）；
3.  防止命名空间污染；
4.  有一些机制让用户代码“导入”包的一部分；
5.  我不一定希望我提供的所有功能都对用户客户端可见。

在 Matlab 方面，这个功能几乎是由包目录和“导入”机制提供的。不过，此功能在 Octave 中似乎不可用（从 3.6.1 开始）。

鉴于此，我想知道在 Octave 中组织我的支持代码包还有哪些选择。

将所有内容放在一个目录中并让用户代码执行 ADDPATH 的选项感觉相当不完善，并且没有提供我想要的控制级别——它只解决了上面列表中的第 1 点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:16:45.150

[这里](http://www.gnu.org/software/octave/doc/interpreter/Creating-Packages.html)有很多文档， [OctaveForge](http://octave.sourceforge.net/)中有很多例子。只需浏览 SVN。

周围还有个人包裹。比如[这个](https://files.ifi.uzh.ch/ailab/people/carbajal/DRD/drd.html)

快乐编码！

# java - Java编程中的对象引用

> ID：10547400
> 
> 赞同：0
> 
> 时间：2012-05-11T07:42:21.180
> 
> 标签：java

我想知道在为子类创建对象但分配 A 类引用而不是分配 B 类引用之间的优势。这显示在代码下面的第 1 行、第 2 行中

```
 class A
    {
         int b=10;
     }
    class B extends A
    { 
         int b=12;

        }
    class Test
    {
         public static void main(String[] args)
         {
               A a=new B(); //line1 
               //B a=new B();//line2
            System.our.println(a.b);
         }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T07:52:51.230

如果您不需要任何特定于 的方法`B`，换句话说，您将严格将其用作`A`，那么这样说明可读性是一个优势。

但是，当您在方法声明中使用通用类型时，主要优势就会显现出来：

```
public String resolveName(A a) { ... } 
```

如果您`B`无缘无故地在这里使用，那么您将不必要地削弱您的方法。它可能适用于任何人`A`，但它只适用于`B`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:49:32.337

尝试阅读：[多态性](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:50:28.190

在您的简短示例中，没有真正的优势。但总的来说，您的问题是多态性有什么好处？

答案可以追溯到 OOP 方法论的需要。简而言之，它使您能够从用法中封装和抽象实现，并且可以帮助您将来替换实现而无需更改用法。

有关更多详细信息，请参阅[http://en.wikipedia.org/wiki/Polymorphism_(computer_science](http://en.wikipedia.org/wiki/Polymorphism_(computer_science) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:56:22.740

在那个例子中，我认为您不能谈论优势（或劣势），因为您的两行代码各有不同的作用。

如果变量的类型`a`是`A`，则`a.b`指`b`具有值的字段`10`。

但是，如果您将 的 类型更改为`a`，`B`则`a.b`指的是完全不同的字段，即在内部声明的字段，`B`其值为`12`。

如果相反`b`是一种方法，那么在中声明的方法`B`将“覆盖”在中声明的方法`A`，这是一种非常不同的情况。例如

```
class A
{
     public int b() { return 10; };
}
class B extends A
{ 
     public int b() { return 12; }
} 
```

调用代码是：

```
A a=new B(); //line1 
//B a=new B();//line2
System.our.println(a.b()); 
```

也就是我们调用方法`b`来获取返回值。现在无论`a`是`A`还是的类型都对行为没有影响`B`。重要的是所`a`引用的对象的类型，它总是`B`并且因此总是具有在 中定义的行为，因此无论如何`B`它都会打印。`12`

这样做的好处是你可以有一个对象的集合（例如各种车辆），它们可以是汽车、船、火车等的混合体。每个都有自己的`start`方法实现，所以你可以把它们全部处理同样的方法。

尽管通常在 a 中定义此类方法`interface`比在 a中更清晰`class`。车辆没有通用`start`的方法，因此没有理由拥有一个对`start`. 相反，您只需使用接口来声明方法的“形状”，而不给它任何实现。

# sql - 编写SQL脚本插入数据

> ID：10547403
> 
> 赞同：1
> 
> 时间：2012-05-11T07:42:31.350
> 
> 标签：sql, postgresql, insert, sql-scripts

在包含许多表的数据库中，如果数据不存在，我需要编写一个 SQL 脚本来插入数据。

表**币**

```
| id     | Code    | lastupdate | rate      |
+--------+---------+------------+-----------+
| 1      | USD     | 05-11-2012 | 2         |
| 2      | EUR     | 05-11-2012 | 3         | 
```

表**客户端**

```
| id     | name    | createdate | currencyId|
+--------+---------+------------+-----------+
| 4      | tony    | 11-24-2010 | 1         |
| 5      | john    | 09-14-2010 | 2         | 
```

表：**账户**

```
| id     | number  | createdate | clientId  |
+--------+---------+------------+-----------+
| 7      | 1234    | 12-24-2010 | 4         |
| 8      | 5648    | 12-14-2010 | 5         | 
```

我需要插入：

1.  `currency`( `id=3, Code=JPY, lastupdate=today, rate=4`)
2.  `client`( `id=6, name=Joe, createdate=today, currencyId=Currency with Code 'USD'`)
3.  `account`( `id=9, number=0910, createdate=today, clientId=Client with name 'Joe'`)

**问题：**

1.  脚本必须在插入新数据之前检查行是否存在
2.  脚本必须允许我们将外键添加到新行，该外键与数据库中已找到的行相关（如客户表中的 currencyId）
3.  脚本必须允许我们将当前日期时间添加到插入语句中的列（例如`createdate`在`client`表中）
4.  脚本必须允许我们向新行添加外键，该外键与插入同一脚本中的行相关（例如`clientId`在`account`表中）

**注意：**我尝试了以下 SQL 语句，但它只解决了第一个问题

```
INSERT INTO Client (id, name, createdate, currencyId)
SELECT 6, 'Joe', '05-11-2012', 1
WHERE not exists (SELECT * FROM Client where id=6); 
```

此查询运行时没有任何错误，但正如您所看到的我手动编写`createdate`的`currencyid`，我需要从带有 where 子句的 select 语句中获取货币 id（我试图用 select 语句替换 1，但查询失败）。

这是一个关于我需要的示例，在我的数据库中，我需要这个脚本在 10 多个表中插入 30 多行。

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:50:46.317

你写了

> 我试图用 select 语句替换 1 但查询失败

但我想知道为什么它失败了？你尝试了什么？这应该有效：

```
INSERT INTO Client (id, name, createdate, currencyId)
SELECT 
    6, 
    'Joe', 
    current_date, 
    (select c.id from currency as c where c.code = 'USD') as currencyId
WHERE not exists (SELECT * FROM Client where id=6); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:57:32.510

看起来您可以确定数据是否存在。这是用 SQL Server / Sybase 编写的一小段代码，我认为它可以回答您的基本问题：

```
create table currency(
    id numeric(16,0) identity primary key,
    code varchar(3) not null,
    lastupdated datetime not null,
    rate smallint
);

create table client(
    id numeric(16,0) identity primary key,
    createddate datetime not null,
    currencyid numeric(16,0) foreign key references currency(id)
);

insert into currency (code, lastupdated, rate)
values('EUR',GETDATE(),3)

--inserts the date and last allocated identity into client
insert into client(createddate, currencyid)
values(GETDATE(), @@IDENTITY)

go 
```

# php - 我的脚本在我的本地主机上工作，而不是在互联网托管上工作

> ID：10547404
> 
> 赞同：0
> 
> 时间：2012-05-11T07:42:35.460
> 
> 标签：php, mysql, warnings

我在虚拟主机上收到此警告，页面 (report-hours-male.php) 如下

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in /home/hatimmak/public_html/ssp12/report-hours-male.php on line 28 
```

我的问题是：该脚本在我的计算机上的本地主机 >> 上运行良好，而不能在互联网托管上运行!!!!!

这是页面

```
 <?php

include 'config.php';

?><BR>

Report for year <?php echo $_SESSION['year']; ?>  semester <?php echo $_SESSION['sem']; ?>  

<?php
 // list of teachers Table rows and total hours

echo "<table border='0' id='hor-minimalist-b' >
<tr>
<th scope='col'>Instructor name</th>
<th scope='col'>Total hours for this semester</th>
</tr>"; 

        //$gender = $_SESSION['gender'];
        $year = $_SESSION['year'];
        $sem = $_SESSION['sem'];

        $tab = "Report$year$sem";
        $query = "SELECT teacher, SUM(hours) FROM $tab GROUP BY teacher"; 
        $result = mysql_query($query) ;

while($row = mysql_fetch_array($result))
{

        $time = gmdate(DATE_RFC822);

        //$gender = $_SESSION['gender'];
        $year = $_SESSION['year'];
        $sem = $_SESSION['sem'];
        //$teacher = $_row['teacher'];
        //$sumhours = $_row['SUM(hours)'];

echo "<tr>";
echo "<td> ". $row['teacher']." </td>";
echo "<td> ". $row['SUM(hours)']." </td>";

echo "</tr>";
}
echo "</table>";

?>

<!--chart-->
<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'hours');
        data.addRows([

<?php

        $queryr = "SELECT teacher, SUM(hours) FROM $tab GROUP BY teacher"; 
        $resultr = mysql_query($queryr) ;

while($rowr = mysql_fetch_array($resultr))
{
        $teacherr = $_rowr['teacher'];
        $sumhoursr = $_rowr['SUM(hours)'];

echo "['".$rowr['teacher']."' , ".$rowr['SUM(hours)']."]," ;
}

?>
          ['', 0]

        ]);

        // Set chart options

        var options = {'title':'Contact hours/instructor',
                'legend':'left',
                'is3D':true,

                'width':800,
                'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
        chart.draw(data, options);
        }
    </script>

  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <center><div id="chart_div"></div></center>

   <form>
<input type="button" value="Print This Report" onclick="window.print();">  </form>

  </body>
</html>

<?php

ob_end_flush();

?> 
```

这是 config.php

```
<?php

$con = mysql_connect("localhost","hatimmak_ssp","userpass");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$sel = mysql_select_db("hatimmak_ssp", $con) or die();

?> 
```

请帮帮我 ：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:11:39.893

我怀疑是这些中的任何一个的值：$tab、老师、小时。
它们需要在您的主机上完全匹配。

```
 $tab = "Report$year$sem";
    $query = "SELECT teacher, SUM(hours) FROM $tab GROUP BY teacher"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T07:48:01.557

你确定查询成功了吗？您应该检查错误：

```
if (mysql_query($sql))
{
    // your code
}
else 
{
    die(mysql_error());
} 
```

# ios - 用于 JSON 解析的 AFNetworking 错误

> ID：10547405
> 
> 赞同：3
> 
> 时间：2012-05-11T07:42:35.477
> 
> 标签：ios, json, afnetworking

我有以下 JSON 解析代码：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://www.dropbox.com/s/qz16qyi3julygl9/facebook.json"]];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

    NSLog(@"Request Success %@",[JSON class]);

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failure Because %@",[error userInfo]);
}];

[operation start]; 
```

但我有以下错误消息的请求失败：

> NSErrorFailingURLKey = " [https://www.dropbox.com/s/qz16qyi3julygl9/facebook.json](https://www.dropbox.com/s/qz16qyi3julygl9/facebook.json) "; NSLocalizedDescription = "预期的内容类型 {(\n \"text/json\",\n \"application/json\",\n \"text/javascript\"\n)}，得到 text/html";

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-04T03:07:54.710

在我的错误日志中，它打印“ *got text/html* ”。所以只需添加

```
[AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"text/html"]] 
```

有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-12T17:58:56.720

```
[AFJSONRequestOperation addAcceptableContentTypes:@"text/plain"] 
```

以上内容已从 AFNetworking 2.x 中弃用。相反，您可以在 AFHTTPRequestOperation 的实例上调用以下内容，如下所示

```
manager.responseSerializer.acceptableContentTypes = [NSSet setWithObject:@"text/plain"]; 
```

manager 是您的 AFHTTPRequestOperation 实例。

来源：[https ://github.com/AFNetworking/AFNetworking/issues/1381](https://github.com/AFNetworking/AFNetworking/issues/1381)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T07:46:02.240

因为您提供的链接不会热链接文件。它链接到 HTML 页面以下载文件。尝试在浏览器中访问那里...

试试这个链接： [https](https://dl.dropbox.com/s/qz16qyi3julygl9/facebook.json?dl=1) ://dl.dropbox.com/s/qz16qyi3julygl9/facebook.json?dl=1 不保证它会工作。许多公司不赞成以这种方式直接链接到文件。

# javascript - Jquery 帧间通信

> ID：10547406
> 
> 赞同：2
> 
> 时间：2012-05-11T07:42:36.963
> 
> 标签：javascript, jquery, html, frame

我`main_page.htm`有

```
<frameset rows="30,*" frameborder=0 border=0>
       <frame name="top_frame" src="top.htm">
       <frame name="bottom_frame" src="bottom.htm">
</frameset> 
```

bottom.htm 中的代码是：

```
<div id="BottomFrameTest">Hi There!</div> 
```

现在如何更改上面的文本，`top.htm`其中位于 top_frame

top.htm 中的代码是：

```
<script>
   function ChnageDivText()
   {
      $("#BottomFrameTest").html("Hello World. This text is changed");
   }
</script>
<body>
   <input type="button" value="Change Text" onclick="ChnageDivText()" />
</body> 
```

上面的代码显然不起作用。我如何与`bottom_frame`from沟通`top_frame`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T07:48:51.340

假设您所有的框架都来自您可以使用的同一个域

```
 parent.bottom_frame.getElementById("BottomFrameTest").innerHTML = "Hello World. This text is changed"; 
```

当然，如果你真的想使用 jquery，你可以这样做

```
 $(parent.bottom_frame).find("#BottomFrameTest").html("Hello World. This text is changed"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:50:12.960

您可以尝试这样的事情，实际上您正在尝试更新其他框架的元素，因此您正在尝试跨框架 jquery 操作

```
$(document).ready(function(){
    function ChnageDivText()
       {
          $(parent.BottomFrameTest.document).contents().find(‘#TextBox1′).val(‘Hello World. This text is changed’);
       }

}); 
```

例如，我使用了文本框，您可以在 find 方法中设置所需元素的 id。[你可以在这里](http://jamesmccaffrey.wordpress.com/2009/07/30/cross-frame-access-with-jquery/)更深入地找到它。

如果`$.contents()`对您来说是新的，您可以[在此处](http://api.jquery.com/contents/)找到它的文档。

[这](http://api.jquery.com/contents/#example-1)是来自 jquery docs 的一个有点类似的例子。

希望对您有所帮助。

# java - 将文件保存为 .csv 时，如何删除文件名中的连字符

> ID：10547409
> 
> 赞同：-6
> 
> 时间：2012-05-11T07:42:46.400
> 
> 标签：java

保存文件名时说“01-01-2012.csv”。如何使用 java 代码自动删除给定文件名之间的连字符。执行代码后，我需要文件名显示为“01012012.csv”。

我需要接受 N 个输入的代码。

```
"01-01-2012.csv" ---after executing the code --- "01012012.csv"
"02-01-2012.csv" ---after executing the code --- "02012012.csv" 
```

对于 N 个输入，依此类推。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:45:09.437

```
"01-01-2012.csv".replaceAll("-", ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:20:08.937

```
 String hyphenString = "a-string-that-contains-hyphens";

 String noHyphenString = hyphenString.replaceAll("-", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T07:48:04.433

```
public List<String> convertFnames(List<String> fnames) {
  final List<String> newStrings = new ArrayList<String>();
  for (String s : fnames) newStrings.add(s.replaceAll("-", "");
  return newStrings;
} 
```

# python - 如何将 Ruby 的模块移植到 Python

> ID：10547411
> 
> 赞同：1
> 
> 时间：2012-05-11T07:42:53.077
> 
> 标签：python, ruby, sass

或者我怎样才能快速学习 Ruby？是否有将 ruby​​ 模块移植到 python 的模式？

我想在Sass中添加scope系统，但是对ruby知之甚少，刚开始的时候发现一个模块的内容在好几个文件里，里面有很多未定义但被引用的变量或类。

require关键字和python的导入有什么区别？

或者至少，是否有一个 ruby​​ IDE 可以告诉我像 PyDev 那样定义的模块、类、变量在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:23:07.050

可能有 IDE 内置了一些代码帮助，但我通常不觉得我需要它。大多数 Ruby 库都有特定的结构模式。尤其是设计的宝石。如果您是 Ruby 新手，一开始可能不会注意到它，但一旦您掌握了窍门；仅通过命名就很容易导航。

根据您问题的初衷。我认为没有一种简单的方法可以将一段像 SASS 这样的 Ruby 代码快速移植到 python。它需要两种语言的足够知识才能很好地翻译它。在某种程度上，这有点像翻译的工作，如果您对任何一种语言都不太了解，那么您将无法理解您正在制作的内容。

在 Ruby 中，需要加载一个文件并执行它。一个库通常会有一个名称与库类似的文件，该文件将包含其组件的其他部分，以使其中的模块为人所知。

```
# req.rb
puts 'Hello World'

# irb
1.9.2p290 :001 > require './req.rb'
Hello World
=> true 
```

所以它基本上和python中的导入一样。你命名一个你想使用的模块，它会在需要/导入它后为你工作（假设它是你的加载路径已知的）。如果您正在寻找与 python 的等价物

```
from <modulename> import * 
```

你应该参考

```
include <modulename> 
```

在 ruby​​ 中，它不像在 python 中那样不受欢迎。

希望这能回答你的大部分问题。

# ruby-on-rails - 基于 vim 中 rails 项目片段的语法完成

> ID：10547413
> 
> 赞同：0
> 
> 时间：2012-05-11T07:42:55.663
> 
> 标签：ruby-on-rails, vim

我想知道是否存在一些基于 rails 片段（来自 snipmate）提供语法补全的插件。例子：

按照规范，我提供`shou`，按热键，我得到了可能的完成列表（如 Ctrl-p）。从列表中选择任何内容，将插入一个片段。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:45:04.597

您可以`<C-r><Tab>`在*插入*模式下点击以弹出可用片段列表，点击`<Enter>`选择正确的片段并点击`<Tab>`展开片段。但是菜单没有提供描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T12:41:41.643

这不是 SnipMate 特有的，但您可能还会发现 Vim 的行完成功能在这里很有用。在插入模式下，`Ctl-x``Ctl-l`将为整行提供可能的完成。因此，如果您的开放缓冲区中已经有类似以下内容：

```
it { should belong_to(:user) }
it { should validate_presence_of(:title) } 
```

然后你开始打字

`it {``Ctl-x``Ctl-l`

...您将获得匹配的可能的完整行完成列表。

# zend-framework - Zend Framework：基于 Pincodes / Zipcodes 的动态内容

> ID：10547421
> 
> 赞同：0
> 
> 时间：2012-05-11T07:43:39.143
> 
> 标签：zend-framework

这对我来说似乎是一个挑战！我需要显示不同密码/邮政编码的动态内容。因此，如果我没记错的话，zend 使用 url 的方式是控制器/动作！

通常用户将通过单击锚标签来选择密码/邮政编码。那么我如何创建实现这一点的逻辑。显然，创建不同的 pincode / zipcode 控制器和操作以及各自的视图是一个坏主意。

你会推荐我的最好方法是什么？如果不清楚，请原谅我。如果需要，我会尝试提供更多信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:59:00.827

You might pass the pincodes/zipcodes in the URL as parameters to your action. For instance, you could have something like:

```
<a href="http://yourhost/yourcontroller/youraction/zipcode/12345">12345</a> 
```

And then, inside your controller, you can get the value of the parameter like that:

```
public function youractionAction()
{
    $zipcode = $this->_getParam('zipcode', '');

    //
    // Generate the dynamic content based on the value of the zip code...
    //
} 
```

Hope that helps,

# ios - Application exit with status 45

> ID：10547428
> 
> 赞同：2
> 
> 时间：2012-05-11T07:44:26.433
> 
> 标签：ios, xcode

I have jailbroken device ios version 5.0.1

When ever I try to debug my app on device the app exit with status 45. I am using xcode 3.2.5 to debug. Is it not possible to debug on device os version higher than xcode sdk?

By the way here is the console log I got

```
unable to read unknown load command 0x25
unable to read unknown load command 0x26
Program loaded.
target remote-mobile /tmp/.XcodeGDBRemote-414-49
Switching to remote-macosx protocol
mem 0x1000 0x3fffffff cache
mem 0x40000000 0xffffffff none
mem 0x00000000 0x0fff none
run
Running…
[Switching to thread 7171]
[Switching to thread 7171]
sharedlibrary apply-load-rules all
continue

Debugger stopped.
Program exited with status value:45 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:13:53.867

No it isn't possible, this is most likely due to Xcode 3 not knowing how to handle your version of iOS. You'll either have to find a way to downgrade your device, or upgrade to Xcode 4.2 which supports iOS 5.0.1.

# jquery - 用于 PDF 下载、location.href、jQuery Modal 和 IE8 标头的 Spring Controller

> ID：10547432
> 
> 赞同：2
> 
> 时间：2012-05-11T07:44:54.550
> 
> 标签：jquery, spring, internet-explorer, pdf, download

我有一个简单的 Spring MVC 控制器方法来返回 PDF：

```
@RequestMapping(value="/attachment/portfolios/{investorNum}/reports/{reportId}/periods/{reportingPeriod}")
    public ResponseEntity<byte[]>  getReportForDownload(@PathVariable String reportId, @PathVariable long investorNum, @PathVariable long reportingPeriod) throws IOException{
        InputStream in = servletContext.getResourceAsStream("/sample.pdf");
        final HttpHeaders headers = new HttpHeaders();
        //headers.setContentType(MediaType.valueOf("application/pdf"));
        headers.add("Content-Type", "application/pdf");
        headers.add("Content-disposition", "attachment; filename=abcd.pdf");
        return new ResponseEntity<byte[]>(IOUtils.toByteArray(in), headers, HttpStatus.CREATED);
    } 
```

还有一个弹簧字节数组消息转换器：

```
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
       <property name="messageConverters">
         <util:list>
                <bean id="byteArrayMessageConverter" class="org.springframework.http.converter.ByteArrayHttpMessageConverter"/>
         </util:list>
         </property>
    </bean> 
```

还有一个 jQuery 模态框供下载：

```
"Download" : function() {
 location.href = "./attachment/portfolios/2201/reports/DELINQSUM/periods/1137";
} 
```

下载按钮在 FF、Chrome 中非常好用，但在 IE 中却不行。IE 说

> Internet Explorer 无法从 localhost 下载 1137。
> 
> > Internet Explorer 无法打开此 Internet 站点。请求的站点不可用或找不到。请稍后再试。

我按照[http://support.microsoft.com/kb/316431](http://support.microsoft.com/kb/316431)和[2](http://chiragrdarji.wordpress.com/2008/01/28/internet-explorer-was-not-able-to-open-the-internet-site-the-requested-site-is-either-unavailable-or-can-not-be-foundplease-try-again-later/)中的标题进行操作，但没有任何反应，IE 继续报告问题。

此外，我正在通过以下更改在模态内流式传输 PDF 以进行嵌入式显示，并且效果很好：

```
headers.add("Content-disposition", "inline; filename=abcd.pdf"); 
```

我在tomcat上运行它。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-02T17:09:58.860

我有同样的问题。我正在使用 Apache FOP 生成一个 PDF，并以 Spring 方式将其写入响应，其中的标头与`ResponseEntity`. 我通过在构造函数中选择`HttpStatus.OK`而不是解决了这个问题。`HttpStatus.CREATED``ResponseEntity`

显然 IE8 不理解 201 (CREATED) 作为响应代码。

# php - 需要 zend 框架操作堆栈帮助

> ID：10547434
> 
> 赞同：0
> 
> 时间：2012-05-11T07:45:16.117
> 
> 标签：php, zend-framework, request

我`action stack`在我的 ZF 应用程序中使用。我将在这里解释场景。在第一个动作中，我有一个带有选择框和提交按钮的简单表单。现在在发布后，我验证数据并保存并将我的第二个操作推送到`action stack`.

我推入堆栈的第二个动作也有一个表格，可以在帖子中保存数据。

现在问题出现在这里：当动作堆栈被处理时，它会弹出堆栈并转发我存储在堆栈中的第二个动作。现在，当我的第二个动作被调用时，它直接进入 post 中的循环并尝试验证数据，因为第一个动作请求是 post，而我没有从第二个动作中获取表单。

我知道动作堆栈是邪恶的，但到目前为止我别无选择。这只是我试图解释我的问题的一种情况。

如果我无法正确解释问题，我很乐意更详细地解释......

```
public function firstactionAction() {
    if($this->getRequest()->isPost()) {
        //validate and save form
        $helper = Zend_Controller_Action_HelperBroker::getStaticHelper('actionStack');
        $request = new Zend_Controller_Request_Http();
        $request->setControllerName('index');
        $request->setModuleName('default');
        $request->setActionName('secondaction');
        $helper->pushStack($request);
    } else {
        //creating form object and assigning to view.
    }
}
public function secondactionAction() {
    if($this->getRequest()->isPost()) {
        //Problem is here.. when action stack gets processed.. it directly comes here. as it uses forward internally..
    } else {
        //creating form object and assigning to view.
    }
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:06:12.750

我看到了一种简单的方法：只需向每个表单添加一个简单的隐藏字段并执行下一个条件：

```
if($this->getRequest()->isPost() && $this->getRequest()->getPost('hidden') == 'second_form') {
    // ...
} 
```

# c# - ASP ListView 到 Winforms

> ID：10547435
> 
> 赞同：0
> 
> 时间：2012-05-11T07:45:20.443
> 
> 标签：c#, asp.net, winforms, listview, user-interface

ASP ListView 可以很容易地在 lick 上更改项目的视图，例如显示一个表格，但是当单击该项目时，展开它并以不同于表格的某些自定义格式显示详细信息。（例如一些多行文本）有没有人看过任何免费控件，或制作具有类似行为但用于winforms的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:22:12.360

快速的网络搜索发现： http: [//www.componentowl.com/better-listview](http://www.componentowl.com/better-listview)。

我敢肯定，进一步的搜索会在各种预算和功能方面揭示更多信息。

# autocomplete - Solr 仅返回 Suggester 组件的一个排序规则

> ID：10547438
> 
> 赞同：6
> 
> 时间：2012-05-11T07:45:45.103
> 
> 标签：autocomplete, solr, collation, autosuggest

我使用 solr 3.6，我想使用来自建议者的排序规则作为多词搜索的自动完成解决方案。不幸的是，对于多词搜索，Suggester 只返回一个排序规则，即使每个单个词存在很多建议。根据我的测试搜索和基础索引数据，我确信必须存在更多排序规则。

我的 Suggester 配置有问题吗？

```
 <!--configuration -->
<searchComponent class="solr.SpellCheckComponent" name="suggest">
<lst name="spellchecker">
  <str name="name">suggest</str>
  <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
  <str name="lookupImpl">org.apache.solr.spelling.suggest.fst.WFSTLookupFactory</str>
  <str name="field">text</str>  <!-- the indexed field to derive suggestions from -->
  <!--<float name="threshold">0.0005</float> disabled for test-->
  <str name="buildOnCommit">true</str>
</lst>
</searchComponent>

<requestHandler class="org.apache.solr.handler.component.SearchHandler" name="/suggest">
<lst name="defaults">
  <str name="spellcheck">true</str>
  <str name="spellcheck.dictionary">suggest</str>
  <str name="spellcheck.onlyMorePopular">true</str>
  <str name="spellcheck.count">200</str>
  <str name="spellcheck.collate">true</str>
  <str name="spellcheck.maxCollations">10</str>
</lst>
<arr name="components">
  <str>suggest</str>
</arr>
</requestHandler> 
```

q=bio+ber 的示例响应：

```
<response>
<lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">4</int>
</lst>
<lst name="spellcheck">
    <lst name="suggestions">
        <lst name="bio">
            <int name="numFound">27</int>
            <int name="startOffset">0</int>
            <int name="endOffset">3</int>
            <arr name="suggestion">
                <str>bio</str>
                <str>bio-estetica</str>
                <str>bio-kosmetik</str>
                                    ...
            </arr>
        </lst>
        <lst name="ber">
            <int name="numFound">81</int>
            <int name="startOffset">4</int>
            <int name="endOffset">7</int>
            <arr name="suggestion">
                <str>beratung</str>
                <str>bern</str>
                ...
            </arr>
        </lst>
        <str name="collation">bio beratung</str>
    </lst>
</lst>
</response> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T17:52:02.430

我遇到了和你一样的问题，我设法解决了。事实证明，为了让多个排序规则正常工作，您需要了解几件事。

**首先**，您必须`QueryComponent`在. 否则你不知道如何查询索引，所以它无法计算出每个更正的查询有多少命中，所以你只会得到一个。如果您已添加到查询中，您会看到为 0，这表明 Solr 没有费心根据索引检查更正后的查询。`components``requestHandler``solrconfig.xml``requestHandler``spellcheck.collateExtendedResults=true``hits`

他们用一个有点不透明的错误信息暗示了这一点：

`INFO: Could not find an instance of QueryComponent. Disabling collation verification against the index.`

添加它的最简单方法是使用默认值`QueryComponent`，称为“查询”。因此，在您在上面发布的 XML 中，您将“组件”部分更改为：

```
<arr name="components">
  <str>suggest</str>
  <str>query</str>
</arr> 
```

**其次，**您需要设置`spellcheck.maxCollations`为大于 1（duh），不太直观，您需要设置`spellcheck.maxCollationTries`为一些较大的数字（例如 1000）。如果其中任何一个设置为默认值（均为 0），那么 Solr 只会给您一个排序规则。此外，您需要设置`spellcheck.count`为大于 1。

**第三，**您需要修改查询以包含您要搜索的字段，并且这些术语必须用引号括起来以确保正确排序。因此，对于您的查询：

`q=bio+ber`

这真的应该是：

`q=text:"bio+ber"`

显然，在您的情况下，“文本”是默认字段，因此您不需要它。但就我而言，我使用的是非默认字段，所以我必须指定它。否则，Solr 会针对“文本”字段计算点击数，所有结果都会有 0 次点击，因此排名将毫无用处。

所以在我的例子中，查询看起来像这样：

```
q=my_field:"brain+c"
&spellcheck.count=5
&spellcheck.maxCollations=10
&spellcheck.maxCollationTries=1000
&spellcheck.collateExtendedResults=true 
```

我的回复是这样的：

```
<response>
  <lst name="responseHeader">
    <int name="status">0</int>
    <int name="QTime">4</int>
  </lst>
  <lst name="spellcheck">
    <lst name="suggestions">
      <lst name="brain">
        <int name="numFound">1</int>
        <int name="startOffset">15</int>
        <int name="endOffset">20</int>
        <arr name="suggestion">
          <str>brain</str>
        </arr>
      </lst>
      <lst name="c">
        <int name="numFound">4</int>
        <int name="startOffset">21</int>
        <int name="endOffset">23</int>
        <arr name="suggestion">
          <str>cancer</str>
          <str>cambrian</str>
          <str>contusion</str>
          <str>cells</str>
        </arr>
      </lst>
      <lst name="collation">
        <str name="collationQuery">my_field:"brain cancer"</str>
        <int name="hits">2</int>
        <lst name="misspellingsAndCorrections">
          <str name="brain">brain</str>
          <str name="c">cancer</str>
        </lst>
      </lst>
      <lst name="collation">
        <str name="collationQuery">my_field:"brain contusion"</str>
        <int name="hits">1</int>
        <lst name="misspellingsAndCorrections">
          <str name="brain">brain</str>
          <str name="c">contusion</str>
        </lst>
      </lst>
      <lst name="collation">
        <str name="collationQuery">my_field:"brain cells"</str>
        <int name="hits">1</int>
        <lst name="misspellingsAndCorrections">
          <str name="brain">brain</str>
          <str name="c">cells</str>
        </lst>
      </lst>
    </lst>
  </lst>
  <result name="response" numFound="0" start="0"/>
</response> 
```

成功！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:56:42.347

有同样的问题。

这是 Solr 3.6.1 的一个错误（不确定以前的版本）。请检查：[https](https://issues.apache.org/jira/browse/SOLR-2853) ://issues.apache.org/jira/browse/SOLR-2853 。

实际上，这条评论很重要：[https ://issues.apache.org/jira/browse/SOLR-2853?focusedCommentId=13136014&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13136014](https://issues.apache.org/jira/browse/SOLR-2853?focusedCommentId=13136014&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13136014)

一种可能的解决方法是将 spellcheck.maxCollat​​ionTries 指定为等于您需要的排序规则的数量，但这也会强制 Solr 根据搜索索引检查这些排序规则。所以要小心将此属性设置为一个很大的数字。更多关于这个参数在这里：[http](http://wiki.apache.org/solr/SpellCheckComponent#spellcheck.maxCollationTries) ://wiki.apache.org/solr/SpellCheckComponent#spellcheck.maxCollat​​ionTries 。

Bug 没有关闭，但是已经提交了补丁。

我还检查了 Solr 4.0.0-BETA 的代码 - 修复程序已经存在。

祝你好运！）

# android - 如何在滚动检查条件无法正常工作时解决自定义列表视图

> ID：10547440
> 
> 赞同：1
> 
> 时间：2012-05-11T07:45:47.953
> 
> 标签：android

我已经用 arrayadapter 实现了自定义列表视图。使用 Arraylist 数据对象我正在设置列表视图行的值。使用数据对象值我正在检查条件，如果该值是卖方，我可以看到该行。当我滚动它时它不能正常工作。它对于其他一些值也是可见的。任何人都可以告诉什么是问题如何解决它？

谢谢

# c - 获取结构数组中结构的值

> ID：10547441
> 
> 赞同：-1
> 
> 时间：2012-05-11T07:46:02.007
> 
> 标签：c

```
typedef struct{
  int number;
  char name[100];
} Apple

typedef struct{
  Apple *apple;
  int bit[2];
} AppleArray;

int main(){
  AppleArray *aArray;
  loadApple(&aArray);
}

loadApple(AppleArray **aArray){
  *aArray = NULL;
  for(i=0; i<100; i++){
    *aArray = realloc(*aArray, (i+1) * sizeof(AppleArray));

    /*SEGFAULT here*/
    aArray[i]->apple = NULL;

    for(j=0; j<2; j++){
      aArray[i]->apple = realloc(aArray[i]->apple, sizeof(Apple) * (j+1))
    }
  }

} 
```

我想要一个具有特定大小的 AppleArray。每个 AppleArray 将有两个 Apple。但是，当我将 NULL 分配给 aArray[i]->apple 时，我得到了段错误。那里有什么问题？

**编辑 ：**

```
loadApple(AppleArray **aArray){
  *aArray = malloc(100 * sizeof(AppleArray));
  for(i=0; i<100; i++){

    /*SEGFAULT here*/
    aArray[i]->apple = NULL;

    for(j=0; j<2; j++){
      aArray[i]->apple = realloc(aArray[i]->apple, sizeof(Apple) * (j+1))
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:02:41.003

除了上面提到的 Als 之外，您还遇到了数组越界读取问题，因为在您的循环之后，i 值将是 100 并且您正在尝试访问`aArray[100]`，而在您的逻辑中（尽管不正确）您将分配内存直到`aArray[99]`.

您的 loadApple 函数可以重写如下：

```
loadApple(AppleArray **aArray)
{   
   *aArray = NULL;   
   *aArray = malloc(100 * sizeof(AppleArray));

   //I have shown index as 0 here just as an example.
   (*aArray)[0].apple = NULL;      
   (*aArray)[0].apple = malloc(2 * sizeof(Apple));

} 
```

此代码还应提供与您的代码逻辑试图实现的相同行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:48:17.710

您只能调用`realloc()`由先前的内存分配函数返回给您的地址，`malloc()`否则`calloc()`它会给您**Undefined Behavior**。

**C99 标准 7.20.3.4-3：realloc 函数：**

```
void *realloc(void *ptr, size_t size); 
```

> 如果`ptr`是空指针，则 realloc 函数的行为类似于指定大小的 malloc 函数。否则，**如果 ptr 与内存管理函数先前返回的指针不匹配，或者如果空间已通过调用 free 或 realloc 函数被释放，则行为未定义。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:12:00.177

```
<pre>
#include "stdio.h"
#include "stdlib.h"

#define MAX_SIZE 5
#define NAME_SIZE 100
#define APPLE_NUM 2

typedef struct
{
    int number;
    char name[NAME_SIZE];
}Apple;

typedef struct
{
    Apple* apple;
    int bit[2];
}AppleArray;

void printApple(AppleArray** aArray)
{
    int i;
    for (i = 0; i < MAX_SIZE; ++i)
    {
        fprintf(stderr, "%4d: bit[0] = %d, bit[1] = %d\n", i, (*aArray + i)->bit[0], (*aArray + i)->bit[1]);

        int j;
        for (j = 0; j < APPLE_NUM; ++j)
        {
            fprintf(stderr, "\tapple[%d]: number = %d, name = %s\n", 
                    j, 
                    (*aArray + i)->apple[j].number, 
                    (*aArray + i)->apple[j].name);
        }

        printf("\n");
    }
}

void loadApple(AppleArray **aArray)
{
    *aArray = NULL;
    int i;
    for(i = 0; i < MAX_SIZE; i++)
    {
        AppleArray* tmp = (AppleArray*)realloc(*aArray, (i+1) * sizeof(AppleArray));
        if (tmp != NULL)
        {
            *aArray = tmp;
        }
        else
        {
            //error
            free(*aArray);
            *aArray = NULL;
            exit(0);
        }

        /*SEGFAULT here*/
        //aArray[i]->apple = NULL;
        (*aArray + i)->apple = NULL;
        (*aArray + i)->bit[0] = i;
        (*aArray + i)->bit[1] = i + 1;

        /*
        int j;
        for (j = 0; j < 2; j++)
        {
            (*aArray + i)->apple = realloc(aArray[i]->apple, sizeof(Apple) * (j+1));
        }
        */

        (*aArray + i)->apple = (Apple*)realloc(NULL, sizeof(Apple) * APPLE_NUM);

        int j;
        for (j = 0; j < APPLE_NUM; ++j)
        {
            (*aArray + i)->apple[j].number = j;
            snprintf( (*aArray + i)->apple[j].name, NAME_SIZE, "apple_%d_%d", i, j);
        }
  }//for
}

void destroyApple(AppleArray* thiz)
{
    if (thiz == NULL)
    {
        return;
    }

    int i;
    for (i = 0; i < MAX_SIZE; ++i)
    {
        free(thiz[i].apple);
        thiz[i].apple = NULL;
    }

    free(thiz);
}

int main()
{
    AppleArray *aArray;
    loadApple(&aArray);
    printApple(&aArray);
    destroyApple(aArray);

    return 0;
} 
```

# javascript - nyroModal 尺寸不适用于版本 2

> ID：10547445
> 
> 赞同：2
> 
> 时间：2012-05-11T07:46:15.370
> 
> 标签：javascript, jquery, plugins, nyromodal

我已经下载了 nyroModal 的第 2 版，但无法使用这些尺寸。我努力了：

```
 $('.nyroModal').nyroModal(
    {
        sizes:
        {
             w: 300,
             h: 300
        }
    }); 
```

还有这个：

```
 $.nmObj(
    {
            sizes:
            {
                 w: 300,
                 h: 300
            }
    });

    $('.nyroModal').nyroModal(); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T02:32:34.733

你可以试试这个：

```
<input type="button" value="show Pop" onclick="ShowPop("pop.htm",300,280);">

function ShowPop(url,width,height){
   $.nmManual(url, {
        callbacks: {
            afterShowCont: function (nm) {
                alert(nm.elts.cont);
                nm.sizes.initW = width;
                nm.sizes.initH = height;
                nm.resize(true);
            }
        }
});
}
```

这在我的项目中工作正常，希望这会对你有所帮助。这现在有意义吗。参数 url 是弹出窗口的路径。使用回调和过滤 afterShowCont 来调整弹出窗口的大小。

# javascript - Javascript 闭包 VS dojo lang.hitch

> ID：10547448
> 
> 赞同：2
> 
> 时间：2012-05-11T07:46:45.680
> 
> 标签：javascript, dojo, closures

哪个是最佳实践，哪个会带来更好的性能？

使用闭包还是 dojo.lang.hitch ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:16:12.453

实际上`lang.hitch(scope, method)`返回一个闭包，即它返回一个函数，它将调用`method`给定的函数`scope`。这在面向对象代码中定义回调时特别有用，因此您可以编写：

```
on(dom.byId("button"), "click", lang.hitch(this, "callback")); 
```

代替：

```
on(dom.byId("button"), "click", function(scope, method) {
    return function() {
        method.apply(scope);
    }
}(this, this["callback"])); // execute the anonymous function immediately to get a closure 
```

像这样的东西会起作用：

```
on(dom.byId("button"), "click", this["callback"]); 
```

但是方法`this`里面`callback`会指向`button`.

请参阅 jsFiddle 中的完整代码和其他详细信息：http: [//jsfiddle.net/phusick/r7jLr/](http://jsfiddle.net/phusick/r7jLr/)

# c# - 为什么构造函数中不允许类型参数？

> ID：10547451
> 
> 赞同：5
> 
> 时间：2012-05-11T07:46:52.790
> 
> 标签：c#

方法有类型参数。为什么构造函数没有类型参数？

## 例子

我认为有几个（不是很多）例子会很有用。我目前的问题如下：

```
internal class ClassA
{
   private readonly Delegate _delegate;

   public ClassA<T>(Func<T> func)
   {
     _delegate = func;
   }
} 
```

我的课一个`Delegate`就够了。但是要将其作为*方法组*传递，我需要将参数定义为`Func<T>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:48:25.667

他们只是没有包含该功能，可能是假设它不是很有用。

如果构造函数需要它，则整个类型可能都需要它。但在你不这样做的情况下，你可能仍然可以使用 Object 。

如果你不能......是的，我认为没有什么办法可以解决，抱歉。:\ 你可以使用反射，但当然会慢得离谱......或者你可以玩动态生成方法的技巧，这可能是值得的，具体取决于你的用例，但也可能很慢（它至少增加了 1额外的间接调用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:48:37.003

因为构造函数是类的一部分，所以类型参数可能属于整个类型。

如果您在构造泛型类的实例时可以选择使用不同的类型参数，那么您实际上是在构造不同类型的类。我知道它与 C++ 中的模板类不同，但概念相似。

要解决您的特定问题，您可以使用“模板化”工厂方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T08:17:25.687

After reading the C# specification it actually does make sense, but it can be confusing.

Each class has an associated *instance type*, and for a generic class declaration the instance type is formed by creating a *constructed type* from the type declaration, with each of the supplied type arguments being the corresponding type parameter.

```
class C<T>
{ 
} 
```

`C<T>` is a constructed type, and an instance type will be created by the process of *constructing the type* using the type parameters.

```
C<String> c = new C<String>(); 
```

The compiler took the constructed type `C<T>`, and using the supplied type parameters an instance type of `C<String>` was created. Generics is only a compile time construct, everything is executed in the terms of closed constructed types at runtime.

Now let's take your question and put it to the test here.

```
class C
{
    public C<T>() 
    {
    }
} 
```

This isn't possible, because you are trying to construct a type that doesn't exist.

```
C c = new C<String>(); 
```

What is the `implicit` or `explicit` conversion between `C` and `C<String>`? There is none. It doesn't even make sense.

Because `C` is a non-generic type in this example, the instance type is the class declaration itself. So how do you expect `C<String>` to construct `C`?

The proper declaration for what you want to do is this.

```
internal class Class<T> 
{
    private readonly Delegate _delegate;

    public Class(Func<T> function) 
    {
        _delegate = function;
    }
} 
```

Here because we have a constructed type `Class<T>`, the proper instance type can be created by the compiler.

```
Func<String> function = new Func<String>(() => { return String.Empty; });
Class<String> c = new Class<String>(function); 
```

If you tried to do it the way you want in your question.

```
Func<String> function = new Func<String>(() => { return String.Empty; });
Class c = new Class<String>(function); 
```

The constructed type would be `Class<String>`, which is not the same as type `C`, and there is no `implicit` or `explicit` conversion from either one. If this was allowed by the compiler, `C` would be in some unknown and unusable state.

What you do need to know about constructed types, is this.

```
class C<T>
{
    public C<T>() 
    {
    }
} 
```

While you cannot explicitly declare a generic constructor, it is valid but only as a closed type constructor at runtime.

```
C<String> c = new C<String>(); 
```

At compile time, the following constructor is created.

```
public C<String>() 
{
} 
```

Which is why this is valid:

```
C<String> c = new C<String>(); // We just used the closed type constructor 
```

If what you wanted was allowed, something like this could happen.

```
class C<T>
{
    public C<U>() 
    {
    }
}

// ???
C<String> c = new C<Int32>(); 
```

You can see the problems now that would arise if the construct was allowed. Hopefully this sheds some insight, the specification is rather long and there are *many many many* sections that cover generics, type parameters, constructed types, closed and open types, bound and unbound.

It can get very confusing, but its a good thing that this isn't allowed by the compiler rules.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T08:14:13.433

You can pass in a delegate instead of a strongly typed Func<T>. You will not be able to know the type at compile time, but you wouldn't have that when you pass in the Func<T> either. When you want that you'd have to make the whole class generic.

```
class Program {
        static void Main(string[] args) {
            Func<int> i = () => 10;
            var a1 = new ClassA(i);

            Func<string> s = () => "Hi there";
            var a2 = new ClassA(s);            
        }
    }

    internal class ClassA {
        private readonly Delegate _delegate;

        public ClassA(Delegate func) { // just pass in a delegate instead of Func<T>
            _delegate = func;
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T08:08:57.767

因为你可以通过将你的类声明为泛型来实现

```
internal class ClassA<T>
{
 private readonly Delegate _delegate;

  public ClassA(Func<T> func)
  {
    _delegate = func;
  }
} 
```

then you will have implicitly a generic construct

# primefaces - PrimeFaces 图表

> ID：10547452
> 
> 赞同：1
> 
> 时间：2012-05-11T07:46:54.550
> 
> 标签：primefaces

我在我的项目中使用 primefaces 3.0，我已经在 testing1.xhtml 中实现了图表，但是该页面内容需要显示在 main.xhtml 上，但图表不是第一次呈现。仅提供刷新后的图表渲染，但它不应该是这样的..我附上了模型片段供您参考..请帮我解决这个问题..

testing1.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.prime.com.tr/ui"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich"
       xmlns:portlet="http://java.sun.com/portlet"
      xmlns:c="http://java.sun.com/jstl/core">

      <h:form id="testForm">

      <p:lineChart id="testChart"  value="#{testBean.chart}"
      style="float:left; margin-top:150px; border:0px; margin-left:0px; padding:0px; height:140px; width:230px; "/> 
    <h:form>

</ui:composition> 
```

我从 main.xhtml 调用这个页面

main.xhtml

```
 <body onLoad="loadData();" >

        <h:panelGrid style="height:33px;"/>
        <h:form style="margin:0px; padding:0px;">
    <p:remoteCommand name="loadData" action="#{testBean.chartLoad}"  update="testChart" />

 <p:panel  style="height:auto; width:238px;" id="testPanel" header="Testing" closable="false" toggleable="true">
              <ui:include src="testing1.xhtml"/>
            </p:panel> 
```

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:27:23.313

看起来是一个嵌套的`form`问题......

尝试`<h:form id="testForm">`从您的内页中删除，因为它已经被`form`外页的标签包围...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-08T18:01:24.483

只需在页面中添加这些行。加载 js/css 时出现错误

```
<h:outputScript name="charts/charts.js" library="primefaces" />

<h:outputStylesheet name="charts/charts.css" library="primefaces" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-26T10:43:41.130

删除 testing1.xhtml 中的表单标签

在 testing1.xhtml 页面的 head 部分添加以下内容：

```
<h:head>
    <link rel="stylesheet" href="/javax.faces.resource/charts/charts.css.jsf?ln=primefaces"/>
    ......
</h:head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T10:32:19.563

从 testing1.xhtml 中删除标签。由于您的主页有 ah:form 标签，因此您不必在 ui:include 中添加另一个标签。

即使它不起作用，也可以在 p:lineChart 中添加一个 ID 并添加 update=":< yourGivenFormID >"

# facebook - Web.Authenticate.Facebook 发生了什么？

> ID：10547456
> 
> 赞同：0
> 
> 时间：2012-05-11T07:47:41.297
> 
> 标签：facebook, haskell

在之前版本的[身份验证包](http://hackage.haskell.org/packages/archive/authenticate/0.11.1/doc/html/Web-Authenticate-Facebook.html)中，有一些用于 Facebook 身份验证的内容。为什么它在[较新的版本](http://hackage.haskell.org/package/authenticate)中不存在？这是否与 Facebook API 发生变化有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T09:39:33.900

该代码被更全面的[fb 包](http://hackage.haskell.org/package/fb)所取代。我没有在包描述本身中提及这一点是一个错误（你不是第一个被这个变化抓住的人）。我已经更新了 cabal 文件并将[新版本上传到 Hackage](http://hackage.haskell.org/package/authenticate)。希望这将避免进一步的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:54:12.227

[它在此提交](https://github.com/yesodweb/authenticate/commit/22f331b726ac142bde3765d98aa3c539f148ae39)中被删除。至于为什么，你得问迈克尔·斯诺曼本人；我找不到与提交相对应的问题。我怀疑代码只是因为 Facebook 更新而变得过时。

但是，由于[Facebook 支持 OAuth](http://developers.facebook.com/docs/authentication/)（实际上这似乎是旧代码所基于的），您可以使用[authenticate-oath](http://hackage.haskell.org/package/authenticate-oauth)，其中包含从正确身份验证中分离出来的 OAuth 代码。（如果这确实有效，那么这可能就是 Facebook 特定支持被删除的原因：这对于通用 OAuth 代码来说是多余的。）

# android - 只有创建视图层次结构的原始线程才能接触其视图。安卓

> ID：10547457
> 
> 赞同：2
> 
> 时间：2012-05-11T07:47:55.443
> 
> 标签：android, multithreading, handler, progressdialog

```
public class master extends Activity {
    ProgressDialog    progressDialog;
    EditText tahmini_kelime;
    EditText girilen_sayi ;
    EditText toplam_harf_sayisi ;
    Button tamamdir; 
    TextView jTextArea1;
    Vector vector_all,vect_end,vect,recent_search;
    BufferedReader read;
    String recent_tahmin_kelime; 
    boolean bayrak,bayrak2 ;
    int column_number  ;
    InputStreamReader inputreader ;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
         requestWindowFeature(Window.FEATURE_NO_TITLE);
     setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
           getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.master);
        column_number=0;
        bayrak=true;
          toplam_harf_sayisi=(EditText)findViewById(R.id.toplam_harf);
          tahmini_kelime=(EditText)findViewById(R.id.tahmini_kelime);
          girilen_sayi=(EditText)findViewById(R.id.sayi_gir);
          tamamdir=(Button)findViewById(R.id.tamamdirrrr);
            jTextArea1=(TextView)findViewById(R.id.jte);
            bayrak2=true;

            recent_search = new Vector();
            InputStream  inputStream =  getResources().openRawResource(R.raw.sozluk);
            try {
                  inputreader     = new InputStreamReader(inputStream,"utf-8");
            } catch (UnsupportedEncodingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            };
            read = new BufferedReader(inputreader);

            int k = 0;
            String result = "";
            try {

                vector_all = new Vector();
                while (read.ready()) {

                    result = read.readLine();
                    vector_all.add(result);
                    jTextArea1.append(result + "\n");
                    k = k + 1;
                }

                String size = "" + k;

            } catch (IOException ex) {
            }

          tamamdir.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                if( bayrak2 )
                {  
                    if(Integer.parseInt(toplam_harf_sayisi.getText().toString())>8 || Integer.parseInt(toplam_harf_sayisi.getText().toString())<=1)
                    { 
                            toplam_harf_sayisi.setText("");
                            Dialog  dl=new Dialog(master.this);
                            dl.setTitle("hatalı giriş");
                            dl.setCanceledOnTouchOutside(true);
                            dl.show(); 
                            return;
                    }

                     int findwordlength = Integer.parseInt(toplam_harf_sayisi.getText().toString());

                        int k = 0;
                        String result = "";
                        jTextArea1.setText("");
                        InputStream  inputStream =  getResources().openRawResource(R.raw.sozluk);
                        try {
                              inputreader     = new InputStreamReader(inputStream,"utf-8");
                        } catch (UnsupportedEncodingException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        };
                        read = new BufferedReader(inputreader);

                        String resultword = "";
                        try {

                            vect = new Vector();

                             while (read.ready()) {

                                result = read.readLine();

                                if (result.length() == findwordlength) {

                                    vect.addElement(result);
                                    resultword = resultword + result + "\n";
                                    k = k + 1;
                                }
                                jTextArea1.setText("");
                            }

                            jTextArea1.append(resultword + "\n");

                            RandomKelime(vector_all,0 );

                        } catch (IOException ex) {
                        }

                        toplam_harf_sayisi.setEnabled(false);
                        girilen_sayi.setEnabled(true);
                        bayrak2=false;
                }
                else
                { 

                    progressDialog = ProgressDialog.show(master.this, "Bir Düşüneyim :D", "lütfen bekleyiniz...");
                    Thread thread = new Thread(new Runnable() {
                        public void run() {

                     mainGuessWord(column_number);

                     handler.sendEmptyMessage(0);
                        }
                    });
                    thread.start();  

                     girilen_sayi.setText("");

                         }

                        }

        });

    }

    private void mainGuessWord(int look) {
        int result_int = 0;
        String randomword = "";
        int randomword2 = 0;

        randomword = tahmini_kelime.getText().toString();

            result_int = Integer.parseInt(girilen_sayi.getText().toString());

        if (result_int == 0) {
            mevcut_degil(vect, randomword);
        } else {
            elemeAgaci(vect, randomword, result_int);
        }

    }

    public void elemeAgaci(Vector vect, String elem, int length) {
        String word = elem.toString();
        Vector cmp_vect;
        cmp_vect = new Vector();
        vect_end = new Vector();
        int count = 0;
        int countword = 0;  // toplam word sayısı
        int each_word_total = 0; // her kelimede bulunan harf sayısı
        jTextArea1.setText("");

            String compare = "";
            for (int i = 0; i < vect.size(); i++) {
                each_word_total = 0;
                compare = "";
                for (int j = 0; j < word.length(); j++) {

                    if(!compare.contains(""+word.charAt(j)))
                    {
                   for (int k = 0; k < vect.get(i).toString().length(); k++) {
                        if (vect.get(i).toString().charAt(k) == word.charAt(j)) {
                            each_word_total++;

                        }

                    }

                   compare=""+compare+word.charAt(j);
                    }

                }
                System.out.println("" + vect.get(i) + "  =>  " + each_word_total);

                if (length == each_word_total) {
                    cmp_vect.add(vect.get(i));
                    jTextArea1.append(vect.get(i) + "\n");
                    countword++;
                }

            }

            vect.clear();
            for (int l = 0; l < cmp_vect.size(); l++) {
                vect.add(cmp_vect.get(l));
            }

        if (countword == 1) {
                Dialog  dl=new Dialog(master.this);
                dl.setTitle("The Word id : "+jTextArea1.getText().toString());
                dl.setCanceledOnTouchOutside(true);
                dl.show(); 

        } else {
            column_number = column_number + 1;
            if(vect.size()<10){
            RandomKelime_Table(vect);
            }else{
            RandomKelime(vector_all, column_number);
            }
        }
    }

    public void mevcut_degil(Vector vect, String m) {
        char control[];
        control = m.toCharArray();
        boolean flag = false;
        int countword = 0;
        Vector detect;
        detect = new Vector();

        jTextArea1.setText("");
        for (int k = 0; k < vect.size(); k++) {
            flag = false;
            for (int s = 0; s < control.length; s++) {
                if (vect.get(k).toString().contains("" + control[s])) {
                    flag = true;
                }

            }
            if (!flag) {
                detect.addElement(vect.get(k));
                countword = countword + 1;
            }

        }
        vect.clear();
        for (int s = 0; s < detect.size(); s++) {
            vect.addElement(detect.get(s));
        }
        for (int a = 0; a < countword; a++) {
            jTextArea1.append(vect.get(a).toString() + "\n");
        }

        if (countword == 1) {
                Dialog  dl=new Dialog(master.this);
                dl.setTitle("The Word id : "+jTextArea1.getText().toString());
                dl.setCanceledOnTouchOutside(true);
                dl.show();
        } 

        else {
            column_number = column_number + 1;
            RandomKelime(vect, column_number);
        }
    }

    public void RandomKelime(Vector vector, int k)
    {
        String sesli[]={"a","e","ı","i","o","ö","u","ü"};

        Random a = new Random();

        if (k == 0) { 
            String passedword = "";
            passedword = vector_all.get((int) (Math.random() * vector_all.size())).toString();

            while (passedword.length() < 8) {
                passedword = vector_all.get((int) (Math.random() * vector_all.size())).toString();

            }

            tahmini_kelime.setText(passedword);
            recent_tahmin_kelime=passedword;

       // jTable1.setValueAt(vector_all.get((int) (Math.random() * vector_all.size())), k, 0);
        } else {
        recent_search.addElement(recent_tahmin_kelime );
        int say = 0;
        String design = "";
        String guess_words = "";
        String as="";
        int f=0;
        int count=0;
        int calculate_all=0;

        for (int u = 0; u < recent_search.size(); u++) {
        design = recent_search.get(u).toString();
        bayrak = false;
        as="";
        count=0;
        for(int  s=0;s<sesli.length;s++)
        {
        if(design.contains(""+sesli[s]) && count==0){
        as+=""+sesli[s];
        count++;
        }

        }

        guess_words = vector_all.get((int) a.nextInt(vector_all.size())).toString();

           while (guess_words.length() < 8) {
                guess_words = vector_all.get((int) (Math.random() * vector_all.size())).toString();

            }

        while (say < design.length()) {
          calculate_all=0;
        while (guess_words.contains("" + as) && !design.equals(guess_words)) {
        say = 0;
        calculate_all++;
        guess_words = vector_all.get( a.nextInt(vector_all.size())).toString();

          while (guess_words.length() < 8) {
                guess_words = vector_all.get((int) (Math.random() * vector_all.size())).toString();

            }

        f=f+1;
        System.out.println("Tahmın: " + guess_words + " => " + design);
        if(calculate_all>vect.size())
        {
        break;
        }
        }
        say++;
        System.out.println("coutn: " + say);
        }
        }

        if (true) {
        tahmini_kelime.setText(guess_words);
        }

        } 
    } 

     public void RandomKelime_Table(Vector vector ) {
            String passedword = "";
            Random a = new Random();

            try {

            passedword = vect.get(a.nextInt(vect.size())).toString();
            } catch (Exception e) {
                    Dialog  dl=new Dialog(master.this);
                    dl.setTitle("Hatalı Giriş.Yeniden Başlayın.");
                    dl.setCanceledOnTouchOutside(true);
                    dl.show(); 
                yeniden_basla();
            }
            tahmini_kelime.setText(passedword );

     }

     public void yeniden_basla()
     {  
         bayrak2=true;
         girilen_sayi.setEnabled(false);
         toplam_harf_sayisi.setEnabled(true);
         toplam_harf_sayisi.setText("");
         vect.clear();
         vector_all.clear();
         vect_end.clear();
         recent_search.clear();
         jTextArea1.setText("");
         recent_tahmin_kelime="";
         column_number=0;
         bayrak=true;
         InputStream  inputStream =  getResources().openRawResource(R.raw.sozluk);
            try {
                  inputreader     = new InputStreamReader(inputStream,"utf-8");
            } catch (UnsupportedEncodingException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            };
            read = new BufferedReader(inputreader);

            int k = 0;
            String result = "";
            try {

                vector_all = new Vector();
                while (read.ready()) {

                    result = read.readLine();
                    vector_all.add(result);
                    jTextArea1.append(result + "\n");
                    k = k + 1;
                }

                String size = "" + k;

            } catch (IOException ex) {
            }
     }

     private Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {

                progressDialog.dismiss();

            }
        };  

} 
```

这是我所有的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:11:06.087

你没有显示你在哪里创建你的处理程序（onCreate？onStart？其他地方？）。它是从主线程开始的吗？如果是这样，您需要提供更完整的堆栈跟踪以便我们理解。

如果您从另一个线程启动它，那么这就是问题所在，因为它正在尝试更改 progressDialog 并且必须从主线程完成。

PS：如果你使用了 AsyncTask，你就不必为此费神了，因为它旨在完全按照你的意愿去做，并且是线程安全的。

*发表评论：*使用 AsyncThread：在 onPreExecute() 中添加进度条，将 run() 更改为 doInBackground() 并将dismiss() 移动到 onPostExecute(

# c# - Access查询中获取行号

> ID：10547464
> 
> 赞同：-1
> 
> 时间：2012-05-11T07:48:22.033
> 
> 标签：c#, ms-access

我将如何获取与条件匹配的特定行的行号（或索引）？

例子：

如果我想选择：

```
SELECT * FROM tblAccount WHERE [Account ID] = 2343 LIMIT 0, 1 
```

我将如何获得该选定行的行号？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:05:14.140

看看下面的代码

```
OleDbConnection cn = new OleDbConnection();
OleDbCommand cmd = new OleDbCommand();
DataTable schemaTable; 
OleDbDataReader myReader; 

//Open a connection to the SQL Server Northwind database.
cn.ConnectionString = "Provider=SQLOLEDB;Data Source=server;User ID=login;
                       Password=password;Initial Catalog=Northwind";
cn.Open();

//Retrieve records from the Employees table into a DataReader.
cmd.Connection = cn;
cmd.CommandText = "SELECT * FROM tblAccount WHERE [Account ID] = 2343 LIMIT 0, 1";
myReader = cmd.ExecuteReader(CommandBehavior.KeyInfo); 

//Retrieve column schema into a DataTable.
schemaTable = myReader.GetSchemaTable();
... 
```

`schemaTable`会告诉你所有喜欢`schemaTable.Column.Count`告诉列号的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:01:24.877

行号不是 SQL 查询结果的属性，而不是键 - 但我想这不是你想要的。如果您在访问表中需要它，那么您必须将其作为表中的列来创建和维护。

将结果提取到 DataTable 后，您可以使用 Select 和 IndexOf 方法找到特定于 DataTable 的行号。

你能提供更多关于你想用它做什么的信息吗？

# javascript - 如何格式化日期时间

> ID：10547472
> 
> 赞同：1
> 
> 时间：2012-05-11T07:48:48.020
> 
> 标签：javascript, datetime, date, formatting

好的，我有以下问题。我想获取当前的日期时间，然后想检查我输入的日期是否大于当前的日期时间。我的 dateTime 格式应该是这样的。

```
03/11/2012 09:37 AM 
```

这是我如何获取当前日期时间的函数。

```
function getCurrentDateTime()
{
    var currentTime = new Date()
    // Date
    var month = currentTime.getMonth() + 1;
    if (month < 10){
        month = "0" + month;
    }
    var day = currentTime.getDate();
    var year = currentTime.getFullYear();

    // Time
    var hours = currentTime.getHours();
    var minutes = currentTime.getMinutes();
    if (minutes < 10){
        minutes = "0" + minutes;
    }

    if(hours > 11){
        var dateString = month + "/" + day + "/" + year + " " + hours + ":" + minutes + " " + "PM";
        test = new Date(dateString);
        return dateString ;
    } else {
        var dateString = month + "/" + day + "/" + year + " " + hours + ":" + minutes + " " + "AM";

        return dateString;

    }
} 
```

如您所见，它是如何返回字符串的。但是当我想用这个函数把它转换成一个日期时。我得到了这个格式 Fri May 11 2012 09:37:00 GMT+0200 (Romance Daylight Time)

```
date = new Date(dateString); 
```

有了这个我无法计算。

谁能帮助我如何以这种格式获取当前日期以便进行检查？

亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:52:32.577

Javascript 提供了非常有限的功能来处理开箱即用的日期。[使用像momentjs](http://momentjs.com/)这样的外部库。

例如，您的功能将简化为

```
var stringDate = moment().format("DD/MM/YYYY HH:mm A"); 
```

您可以将其转换并与当前时间进行比较

```
var earlierDate = moment(stringDate, "DD/MM/YYYY HH:mm A");
if (earlierDate.valueOf() < moment().valueOf()) {
    // earlier indeed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:58:45.367

[datejs](http://www.datejs.com)是另一个解决日期操作问题的库

# ios - 单视图层次结构中的 UIView 组不透明度

> ID：10547474
> 
> 赞同：7
> 
> 时间：2012-05-11T07:48:56.797
> 
> 标签：ios, uiview

我正在编写一个 UI 库，我希望能够在其中拥有 UIViews 的 alpha，就像设置了 UIViewGroupOpacity info.plist ket 一样。请参阅以下链接：

[使 UIView 和子视图作为一层半透明，而不是单独](https://stackoverflow.com/questions/6458427/make-uiview-and-subviews-translucent-as-one-layer-not-individually)

[iOS 控制子视图的 UIView alpha 行为](https://stackoverflow.com/questions/8581994/ios-controlling-uiview-alpha-behaviour-for-subviews)

但是，当我正在编写一个库时，我不希望项目必须设置这个全局键，并影响主项目的行为。

有没有其他方法可以实现这一目标？我不想循环浏览所有子视图并设置每个子视图的 alpha，因为包含我的 lib 的项目可能启用了此密钥...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-12T15:04:53.037

是的，您可以设置[`shouldRasterize`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/shouldRasterize)视图的图层。

```
containerView.layer.shouldRasterize = YES;
// Not setting rasterizationScale, will cause blurry images on retina displays:
containerView.layer.rasterizationScale = [[UIScreen mainScreen] scale]; 
```

这将具有与子视图相同的效果，`UIViewGroupOpacity`但仅适用于`containerView`它的子视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T15:50:09.400

**对于 iOS 7.0 及更高版本：**

从 iOS 7.0 开始，这可以`CALayer`通过`allowsGroupOpacity`属性单独控制。通过将其设置为`YES`，您将获得与设置相同的行为`UIViewGroupOpacity`，但仅针对该特定层。

# database - 从多对多对象中获取所有实例名称？

> ID：10547486
> 
> 赞同：0
> 
> 时间：2012-05-11T07:49:40.217
> 
> 标签：database, django

我尝试用这段代码查询 Db：

```
Makesite.objects.values_list('ref_id', flat =True) 
```

它返回 [1,2,None]。我发现这有点令人困惑。我假设 python 用它们自己的名字而不是它只是分配给它们的数字来保存实例。任何有关代码的帮助或解释为什么 python 将它们保存为数字而不是它们的名称都会非常感谢。

在模型.py

```
class Makesite(models.Model):
    sitename = models.CharField(max_length=100, unique = True) 
    siteinfo = models.ManyToManyField(Siteinfo)
    ref_id = models.ManyToManyField(RefID)
    report = models.ManyToManyField(Report) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:01:42.083

Django 不会通过它们的“名称”来保存 m2m。它使用它们的主键（在你的情况下 - 整数）。您可以通过查看数据库表来检查它。

`makesite.sitename`当您只使用Django 之类的东西时，会进行另一个查询来获取站点名称实例。

但是当您使用时，`values_list`您不需要额外的查询或连接，这就是 Django**从单个表**返回数据的原因。它所能得到的一切都是一个主键。

如果您想优化相关查询，请查看[select_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#select-related) / [prefetch_related](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)方法或使用缓存。

# r - 完全删除 facet_wrap 标签

> ID：10547487
> 
> 赞同：101
> 
> 时间：2012-05-11T07:49:49.747
> 
> 标签：r, graphics, ggplot2

我想完全删除刻面的标签以创建一种*迷你*图效果，至于标签无关紧要的观众，我能想到的最好的方法是：

```
library(MASS)
library(ggplot2)
qplot(week,y,data=bacteria,group=ID, geom=c('point','line'), xlab='', ylab='') + 
     facet_wrap(~ID) + 
     theme(strip.text.x = element_text(size=0)) 
```

那么我可以完全摆脱（现在是空白的）strip.background 以便为“迷你图”留出更多空间吗？

或者，对于像这样的大量二进制值时间序列，是否有更好的方法来获得这种“*迷你图”效果？*

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-05-11T08:30:51.327

对于 ggplot v2.1.0 或更高版本，用于`element_blank()`删除不需要的元素：

```
library(MASS) # To get the data
library(ggplot2)

qplot(
  week,
  y,
  data = bacteria,
  group = ID,
  geom = c('point', 'line'),
  xlab = '',
  ylab = ''
) + 
facet_wrap(~ ID) + 
theme(
  strip.background = element_blank(),
  strip.text.x = element_blank()
) 
```

在这种情况下，您尝试删除的元素称为`strip`.

[![ggplot2 没有面板标题的图](../Images/f0aa51c1c718e498c6cc9a1632baa7ae.png)](https://i.stack.imgur.com/yiuUU.png)

* * *

# 使用 ggplot grob 布局的替代方案

在旧版本`ggplot`（v2.1.0 之前）中，条形文本占据 gtable 布局中的行。

`element_blank`删除文本和背景，但不会删除行占用的空间。

此代码从布局中删除这些行：

```
library(ggplot2)
library(grid)

p <- qplot(
  week,
  y,
  data = bacteria,
  group = ID,
  geom = c('point', 'line'),
  xlab = '',
  ylab = ''
) + 
facet_wrap(~ ID)

# Get the ggplot grob
gt <- ggplotGrob(p)

# Locate the tops of the plot panels
panels <- grep("panel", gt$layout$name)
top <- unique(gt$layout$t[panels])

# Remove the rows immediately above the plot panel
gt = gt[-(top-1), ]

# Draw it
grid.newpage()
grid.draw(gt) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-07-31T11:45:50.350

我正在使用 ggplot2 版本 1，并且所需的命令已更改。代替

```
ggplot() ... + 
opts(strip.background = theme_blank(), strip.text.x = theme_blank()) 
```

你现在用

```
ggplot() ... + 
theme(strip.background = element_blank(), strip.text = element_blank()) 
```

有关更多详细信息，请参阅[http://docs.ggplot2.org/current/theme.html](http://docs.ggplot2.org/current/theme.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-03-15T14:43:54.543

桑迪的更新答案似乎不错，但可能已因更新 ggplot 而过时？据我所知，以下代码（桑迪原始答案的简化版本）复制了肖恩的原始图形，没有任何额外的空间：

```
library(ggplot2)
library(grid)
qplot(week,y,data=bacteria,group=ID, geom=c('point','line'), xlab='', ylab='') + 
 facet_wrap(~ID) + 
 theme(strip.text.x = element_blank()) 
```

我正在使用 ggplot 2.0.0。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-22T02:12:38.353

据我所知，桑迪的回答是正确的，但我认为值得一提的是，没有刻面的图的宽度和去除刻面的图的宽度似乎存在细微差别。

除非您正在寻找它，否则这并不明显，但是，如果您使用 Wickham 在他的书中推荐的视口布局来堆叠绘图，则差异会变得很明显。

# django - 如何根据投票教程使用 Django 创建 HotOrNot/FaceMash 站点？

> ID：10547492
> 
> 赞同：0
> 
> 时间：2012-05-11T07:50:17.363
> 
> 标签：django, django-forms, django-admin

我已经阅读了 Django 的基本投票教程，我意识到我可以在这里和那里改变一些东西，并从中制作一个 HotOrNot/FaceMash 风格的网站。但是，由于我还是个菜鸟，我只能想出它的概念——我没有办法知道该怎么做。所以这个概念是，不是显示投票的所有选择，而是只显示两个随机选择（不应该是相同的）。此外，需要有一种方法可以从计算机批量上传或从外部存储/服务器获取所有图像作为投票的选择。谁能告诉我如何做到这一点？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:52:46.510

好吧，这还不清楚，但让我们试一试。我猜你想比较两张随机的照片，让用户选择最好的。我想到了一种简单的方法来做到这一点，不一定使用民意调查应用程序。

首先，创建一个模型来存储图像。例如：

```
class Image(models.Model):
  picture = models.ImageField("Face picture", max_length=255, upload_path=<your upload path function>) 
```

然后不要使用民意调查，而是自己制作：

```
class Match(models.Model):
  winner = models.ForeignKey('yourapp.Image')
  loser = models.ForeignKey('yourapp.Image') 
```

制作表单并将投票结果保存在 Match 实例中。要知道一张图片显示了多少次，只需查找获胜者或失败者是图片的匹配行：

```
times_shown = Match.objects.filter(Q(winner=pic)|Q(loser=pic)).count() 
```

然后同样适用于知道一张图片有多受欢迎。如果它经常是赢家，那么你可以假设它看起来很漂亮。希望这可以帮助。

# c - 如何从用户空间恐慌内核

> ID：10547494
> 
> 赞同：2
> 
> 时间：2012-05-11T07:50:21.873
> 
> 标签：c, kernel

完成某些操作后，我需要使内核恐慌并验证执行了什么操作

有人可以帮助我知道是否有任何方法吗？我搜索了很多但没有运气

我正在寻找一些通用的电话

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T07:54:56.847

您可以尝试[sysrq 触发器](http://www.kernel.org/doc/Documentation/sysrq.txt)：

```
echo c > /proc/sysrq-trigger 
```

> 'c' - 将通过 NULL 指针取消引用执行系统崩溃。如果已配置，将进行故障转储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T07:56:33.520

更高的地址范围映射到内核。如果你在那里写了一些东西，例如说 0xFFFFFF7 内核退出你的进程并出现分段错误，抱怨访问了非法内存位置。在用户空间中，您的进程更像是一个沙盒，任何非法访问进程外的内存都会被内核以违反分段错误的方式杀死您的进程而罚款。

要使内核恐慌，您可以尝试设置一些错误的硬件寄存器，通常是调用 syscntl sys 调用。

# ajax - ExtJS - 网格为空但存储已加载

> ID：10547496
> 
> 赞同：3
> 
> 时间：2012-05-11T07:50:24.723
> 
> 标签：ajax, extjs, model, store

我的网格没有填满，虽然商店里填满了 json 数据。怎么了？我希望将所有数据`"csv":[...]`写入网格列。如果我`console.log()`是商店，我的 json 数据位于`store.proxy.reader.[jsonData|rawData].data.csv`=> Array[4]

json数据：

```
{"status":{"status":0,"msg":"Ok","protocolversion":"1.1.json"},"data":{"headline":{"headline":"headline"},"csv":[{"key":"0","value":"...lugin\/monitor\/files\/logfilefilter_worker_error.log"},{"key":"1","value":"...les\/logfilefilter-worker01-progress.log.1331769600"},{"key":"2","value":"...\/application\/x\/plugin\/monitor\/files\/Test.log"},{"key":"3","value":"...ind\/plugin\/monitor\/files\/logfile_for_navi_test.log"}]}} 
```

模型：

```
Ext.define( 'Monitor.model.ComboLogfiles', {
  extend: 'Ext.data.Model',
  fields: [ {name: 'key'}, {name: 'value'} ] 
 } ); 
```

店铺：

```
Ext.define( 'Monitor.store.ComboLogfiles', {
  extend  : 'Ext.data.Store',
  model   : 'Monitor.model.ComboLogfiles',
  proxy   : {
     type       : 'ajax',
     url        : '/devel/phi/dev/04-presentation/http-api/index.php',
     extraParams: {
        user      : 'test',
        pass      : 'test',
        vers      : '1.1.json',
        module    : 'monitor',
        func      : 'getLogfiles'
     },
     reader     : {
        type: 'json',
        root: 'csv'
        // root: 'data'
     }

  },
  autoLoad: true
} ); 
```

控制器

```
var store = Ext.create('Monitor.store.ComboLogfiles');

oLogfileSelector = Ext.create("Ext.window.Window", {
        title: 'Logfiles',
        width: '200',
        height: '400',
        autoScroll: true,
        flex: 1,
        minimizable: false,
        maximizable: false,
        style: 'background-color: #fff;',
        items: [{
              xtype: 'panel',
              items: [
                 Ext.create('Ext.grid.Panel', {
                    id: 'mygrid',
                    store: store,
                    width: 200,
                    height: 200,
                    title: 'Logfiles',
                    columns: [
                       {
                             text: 'Key',
                             width: 50,
                             sortable: false,
                             dataIndex: 'key'
                       }
                       ,{
                             text: 'File',
                             width: 100,
                             sortable: false,
                             dataIndex: 'value'
                       }
                    ]
                 })
              ]

        }]

     }).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:13:55.893

也许试试这样：

```
reader: {
    type: 'json',
    root: 'data.csv',
    successProperty:false
} 
```

# javascript - 如何覆盖 Backbone.sync 以便在最后添加 apikey 和用户名？

> ID：10547498
> 
> 赞同：3
> 
> 时间：2012-05-11T07:50:44.070
> 
> 标签：javascript, backbone.js

我正在使用骨干美味，但我很难让它正常工作。在 Tastypie 中，我将 ApiKeyAuthentication 用于我的资源，因此每个 ajax 请求，我需要将 apikey 和用户名附加到请求的末尾，或者发送附加的标头以添加用户名和 api 密钥。

我正在尝试使用带有以下代码的主干删除视图及其模型：

```
// Remove the goal update view from the DOM
removeItem: function() {
  this.model.destroy({wait: true, success: function() {
    console.log("success");
  }, error: function() {
    console.log("error");
  }});
}, 
```

函数执行后，浏览器尝试对以下 URL 执行 GET 请求：

```
:8000/api/v1/update/2/ 
```

它不包括末尾的 api_key 或用户名，并且在 url 的末尾有一个斜杠。我认为它正在尝试使用 Backbone.oldSync 来执行 GET 请求。我将如何做到这一点，以便同步在末尾包含用户名/api 键并删除尾部斜杠？

在所有其他请求中，我已经通过将以下代码添加到主干美味来将 api 密钥和用户名附加到 http 请求的末尾：

```
if ( !resp && ( xhr.status === 201 || xhr.status === 202 || xhr.status === 204 ) ) { // 201 CREATED, 202 ACCEPTED or 204 NO CONTENT; response null or empty.
  var location = xhr.getResponseHeader( 'Location' ) || model.id;
  return $.ajax( {
       url: location + "?" + "username=" + window.app.settings.credentials.username + "&api_key=" + window.app.settings.credentials.api_key,
       success: dfd.resolve,
       error: dfd.reject,
    });
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-11T09:19:10.350

让我们探索可能性

**使用标题**

Backbone.sync 仍然只使用 jQuery ajax，因此您可以覆盖 ajaxSend 并使用标头发送信息。

```
$(document).ajaxSend(function(e, xhr, options) 
{
    xhr.setRequestHeader("username", window.app.settings.credentials.username);
    xhr.setRequestHeader("api_key", window.app.settings.credentials.api_key);
}); 
```

**使用 Ajax 选项**

如果您只需要在一个或两个位置发送信息，请记住`destroy`、和方法只是 ajax 调用者的快捷方式。因此，您可以将[所有 jQuery ajax 参数](http://api.jquery.com/jQuery.ajax/)添加到这些方法中，如下所示：`fetch``update``save`

```
// Remove the goal update view from the DOM
removeItem: function ()
{
    this.model.destroy({
        wait: true,
        success: function () 
        {
            console.log("success");
        },
        error: function ()
        {
            console.log("error");
        },
        data: 
        {
            username: window.app.settings.credentials.username,
            api_key: window.app.settings.credentials.api_key
        }
    });
} 
```

**覆盖jQuery的ajax方法**

根据您的需要，这可能是更好的实现（请注意，这不是生产代码，您可能需要对其进行修改以满足您的需要并在使用之前对其进行测试）

```
(function ($) {
    var _ajax = $.ajax;
    $.extend(
    {
        ajax: function (options)
        {
            var data = options.data || {}; 
            data = _.defaults(data, {
                username: window.app.settings.credentials.username,
                api_key: window.app.settings.credentials.api_key
            });
            options.data = data;
            return _ajax.call(this, options);
        }
    });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T04:10:23.500

只是为了这篇文章的未来读者，当您执行 model.destroy() 时，您不能传递任何数据，因为删除请求没有正文，请参阅此问题以获取更多信息： [https ://github.com/文档云/骨干网/问题/789](https://github.com/documentcloud/backbone/issues/789)

# android - Android Layout_weight

> ID：10547499
> 
> 赞同：3
> 
> 时间：2012-05-11T07:50:47.733
> 
> 标签：android, android-relativelayout, android-linearlayout

也许我误解了 layout_weight 参数，但我不明白为什么这样的东西不起作用......

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" android:weightSum="1">

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="TextView" android:layout_weight="0.3" android:background="@color/apr_blue"/>

<TextView
    android:id="@+id/textView2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.2"
    android:text="TextView" 
    android:background="@color/apr_brightyellow"/>

<TextView
    android:id="@+id/textView3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:text="TextView" 
    android:background="@color/apr_yellow"/>

</LinearLayout> 
```

我在 LinearLayout 中有三个或更多文本视图。我想将它们放在具有百分比宽度的列中。这就是它产生的结果：

将 layout_weight 设置为 0.3 / 0.2 / 0.5

![Android layout_weight 不正确](../Images/bb1ff868b796ea51c2712940a0cc176a.png)

然后我稍微改变了 layout_weight 参数，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" android:weightSum="1">

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="TextView" android:layout_weight="0.3" android:background="@color/apr_blue"/>

<TextView
    android:id="@+id/textView2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.3"
    android:text="TextView" 
    android:background="@color/apr_brightyellow"/>

<TextView
    android:id="@+id/textView3"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.4"
    android:text="TextView" 
    android:background="@color/apr_yellow"/>

</LinearLayout> 
```

现在我得到了我想要的：

将 layout_weight 设置为 0.3 / 0.2 / 0.5

![Android layout_weight 正确](../Images/d253e2dbd74a2f9faa148eba52ddbd9e.png)

这是一个错误还是我真的误解了 layout_weight 的全部内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-11T07:56:55.347

使用`android:layout_weight`时应设置`android:layout_width="0dp"`（以防垂直方向 - `android:layout_height="0dp"`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T07:59:38.540

![在此处输入图像描述](../Images/9dc8cd3dc1c63bb9d88bd1ba4ce6e507.png)

尝试这个....

```
 <TextView
            android:background="#F2e"
            android:layout_weight="3"
            android:id="@+id/textView1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
             android:background="#F6e"
            android:layout_weight="2"
            android:id="@+id/textView2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="TextView" />

        <TextView
             android:background="#F45"
            android:layout_weight="5"
            android:id="@+id/textView3"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </LinearLayout> 
```

# ruby-on-rails-3 - 使用 simple_form 附加/前置引导图标

> ID：10547502
> 
> 赞同：26
> 
> 时间：2012-05-11T07:50:50.063
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, simple-form

[Twitter Bootstrap 图标在这里](http://twitter.github.com/bootstrap/base-css.html#icons)非常致命。

查看该部分的右下角。看到那封带有图标的电子邮件了吗？这就是我想做的。我想让 simple_form 和 boostrap 玩得很好。

这是我发现的将图标添加到输入的内容：

```
= f.input :email, :wrapper => :append do
  = f.input_field :email
  <span class="add-on"><i class="icon-envelope"></i></span> 
```

但它不是齐平的（可以通过更改 CSS 中的偏移量来修复）而且它非常难看。作为参考，这里是 CSS 修复（将其添加到 bootstrap_overrides.css.less 文件中）：

```
.input-prepend .add-on,
.input-append input {
  float: left; } 
```

有人知道用引导程序添加simple_form 或附加图标的不那么老套的方法吗？

### 更新：

下面的答案让我又看了一遍。HAML 通常会在任何地方添加空格，但有一种[解决方法](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#whitespace_removal__and_)

这是原始 HAML 的更新，它删除了空格并且不需要 CSS hack：

```
= f.input :email, :wrapper => :append do
  = f.input_field :email
  %span.add-on>
    %i.icon-envelope 
```

比 (>) 稍大一点就完全不同了。输出 HTML 在输入和跨度之间没有换行符。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-28T15:28:59.387

It's due to whitespace between the rendered `input` and `span` elements. In this case, a line break.

I am not familiar enough with HAML to tell you how to eliminate the whitespace, but the equivalent ERB would go something like:

```
<%= f.input :email, :wrapper => :append do %>
  <%= f.input_field :email %><span class="add-on"><i class="icon-envelope"></i></span>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T17:31:50.300

我想出了一个更好的方法来做到这一点，保持`placeholder`,`label`和其他选项不变。

对于仍在使用旧 Bootstrap 2.3.x 的用户

```
<div class="input-prepend">
  <span class="add-on">@</span>
  <%= f.input_field :password, :required => true, :label=>false, :placeholder=>"Password" %>
</div> 
```

关键是`f.input_field`用来删除所有 div 包装器。

**更新**

您可以使用其他解决方案来包含占位符，但您不能使用该解决方案删除标签。

```
<%= f.input :email, :wrapper => :append do %>
  <%= f.input_field :email, placeholder: "hello" %><span class="add-on"><i class="icon-envelope"></i></span>
<% end %> 
```

# android - 无法获取 Kindle fire 谷歌地图和 GPS 位置

> ID：10547503
> 
> 赞同：-2
> 
> 时间：2012-05-11T07:50:55.053
> 
> 标签：android, google-maps, map, kindle-fire

有两件事我需要找到答案。谁能告诉我？

1.  我们可以在新的 Kindle fire 中找到设备的 GPS 位置吗？正如我几天前搜索的那样......客户猜测现在支持GPS..所以目前kindle fire支持GPS？

2.  谷歌地图集成是允许的，或者我们需要使用替代地图，如开放街道地图等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:03:06.857

```
see below link 
http://mobiforge.com/developing/story/using-google-maps-android 
```

# java - Maven 和 POM.xml 中的插件

> ID：10547504
> 
> 赞同：60
> 
> 时间：2012-05-11T07:51:09.360
> 
> 标签：java, maven, maven-3, pom.xml, maven-plugin

我刚开始使用 Maven，我读到插件是可以使用的附加组件。
文件的典型结构`pom.xml`是

```
<project>
  <groupId>org.koshik.javabrains</groupId>
  <artifactId>JarName</artifactId> (A fldernamed JarName was created) 
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>JarName</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

**问题**：我应该在哪里插入`plugin`标签？例如：

```
<plugin>
  <groupId>org.jibx</groupId>
  <artifactId>jibx-maven-plugin</artifactId>
  <version>1.2.4</version>
  <executions>
    <execution>
      <goals>
        <goal>bind</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

在依赖项之前还是在`dependency`标签之后？有关系吗？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-05-11T07:58:50.023

```
<project>
    <groupId>org.koshik.javabrains</groupId>
    <artifactId>JarName</artifactId> (A fldernamed JarName was created) 
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>JarName</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.jibx</groupId>
                <artifactId>jibx-maven-plugin</artifactId>
                <version>1.2.4</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>bind</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
</project> 
```

如果您使用 Maven 配置文件，您还可以将插件放置在`<build>`部分中。`<profile>`顺序无关紧要。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-06-15T11:32:17.680

**对两个重要点的后期澄清**

**`plugin`**在大多数情况下，确实应该在/部分中添加**放置**
A的位置，但是将其放置在其中与将其放置在/之间存在**重要区别**。`plugin``build``plugins`**`plugins``pluginManagement``plugins`**

 **这种误解**通常**是 Maven 中未调用插件的原因或更难的故障排除：

*   `build`/下的插件`plugins`直接是默认 Maven 构建的一部分，如果它们指定`execution`或为默认构建配置某些东西（见下文）
*   `build`//下的插件不一定是Maven默认构建的一部分，也就是说，是一个管理，是给maven的一个提示：如果你碰巧使用了这个插件，那么请使用我这里指定的版本、配置、执行`pluginManagement`，`plugins`在这个管理中。

    **但是*使用*手段会发生什么？**意思是：如果/部分**也**存在相同的插件，则应用此管理（只有这样它才会有效）；**或者**如果插件默认被 Maven 调用，那么也应用它。 `build``plugins`

     ****但是默认情况下如何调用插件？**这是 maven 背后的主要理念的一部分：约定优于配置。按照惯例，当您指定某个`packaging`（默认值`jar`，但可以是`war`例如）时，您希望调用某些插件。要构建一个`jar`，[默认情况下](http://maven.apache.org/ref/3.3.9/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging)调用`maven-jar-plugin`; 构建一个`war`，[默认](http://maven.apache.org/ref/3.3.9/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging)调用的`maven-war-plugin`等等。`build`因此，如果您在//`pluginManagement`中`plugin`为与 Maven 构建具有默认绑定的插件指定插件配置，那么它也将被使用。** 

 ****排序**
关于`pom.xml`文件中部分的顺序，**需要进一步说明**：在大多数情况下确实无关紧要，但是/部分中的`plugin`元素顺序可能很重要。从 Maven **3.0.3** ( ) 开始，附加到同一 Maven 阶段的不同插件执行将按照它们在文件中的声明顺序被调用。也就是说，在这种情况下，**排序很重要**，因为它可能会影响构建的行为。`build``plugins`**[`MNG-2258`](https://issues.apache.org/jira/browse/MNG-2258)`pom.xml`**

 ****此外，声明的顺序也可能会影响您对[Dependency Mediation](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)`dependency`的构建，也就是说，在与传递依赖冲突的情况下，第一个声明的依赖获胜。**因此，在某些情况下**，排序再次很重要。

 **最后但同样重要的是，虽然文件的其他部分的顺序并不重要，但`pom.xml`良好的习惯是遵循[Maven 官方建议](https://maven.apache.org/developers/conventions/code.html)，并且作为简化版本，遵循以下声明顺序：

```
<project>
  <modelVersion/>

  <parent/>

  <groupId/>
  <artifactId/>
  <version/>
  <packaging/>

  <properties/>

  <dependencyManagement/>
  <dependencies/>

  <build/>

  <reporting/>

  <profiles/>
</project> 
```

[`sortpom-maven-plugin`](https://github.com/Ekryd/sortpom)也可用于自动应用此标准排序，只需在相关文件上调用以下内容`pom.xml`：

```
mvn com.github.ekryd.sortpom:sortpom-maven-plugin:2.5.0:sort \
     -Dsort.keepBlankLines -Dsort.predefinedSortOrder=recommended_2008_06 
```

* * *

**进一步阅读**：

*   [堆栈溢出：Maven：什么是插件管理？](https://stackoverflow.com/questions/10483180/maven-what-is-pluginmanagement)
*   [Maven 官方文档：Maven POM 参考、插件管理](https://maven.apache.org/pom.html#Plugin_Management)
*   [官方 Maven 默认绑定](http://maven.apache.org/ref/3.3.9/maven-core/default-bindings.html)
*   [官方 Maven 文档：依赖中介](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)
*   [官方 Maven 文档：Maven 代码风格和代码约定](https://maven.apache.org/developers/conventions/code.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T07:55:25.877

`<plugin>`应该放入`<plugins>`应该放入`<build>`或`<pluginManagement>`部分的部分。`<dependency>`或部分的顺序`<build>`无关紧要。

关于 pom.xml 的完整参考在这里：[http ://maven.apache.org/pom.html](http://maven.apache.org/pom.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-11T07:57:44.290

如果您想使用插件进行构建，您可以使用以下结构。

```
<project>
 <build>
  <plugins>
  </plugins>
 </build>
</project> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-11T07:54:06.533

您可以在 pom.xml 文件中两个`<plugins>` `</plugins>`标签之间的任何位置插入第二个代码段。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-11T07:58:34.053

POM 中的部分顺序无关紧要。一般来说，Maven 中有构建插件和报告插件。您的情况是使用构建插件，因此您必须将此`<plugin>`块放入`<project><build><plugins>...`部分中。

看看[这个](http://maven.apache.org/guides/mini/guide-configuring-plugins.html)关于插件的一些基础知识。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-13T06:58:13.297

作为报告插件（例如 maven-checkstyle-plugin）的附加答案，在构建和报告下，插件可以在 pom.xml 中进入 2 个标签。

> 使用报告标签 VS 构建标签
> 
> 在 pom 的 or 元素中配置报告插件没有相同的行为！
> 
> mvn网站
> 
> 它仅使用在元素中指定的每个报告插件的元素中定义的参数，即站点总是忽略在 中指定的每个插件的元素中定义的参数。
> 
> mvn aplugin:areportgoal
> 
> 它首先使用元素中指定的每个报告插件的元素中定义的参数；如果未找到参数，它将查找在 中指定的每个插件的元素中定义的参数。

来源：[https ://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_reporting_Tag_VS_build_Tag](https://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_reporting_Tag_VS_build_Tag)**********

# android - 可以将应用内付款的清单接收器移至 Java 代码吗？

> ID：10547507
> 
> 赞同：0
> 
> 时间：2012-05-11T07:51:40.557
> 
> 标签：android, air, broadcastreceiver, android-manifest, air-native-extension

Google 应用内付款示例建议添加清单条目以接收付款确认。但是在 AIR 的 Native Extension 中，接收器将不会被发现为不同的包。所以我将接收器部分移动到代码如下

```
final IntentFilter filter = new IntentFilter("com.android.vending.billing.IN_APP_NOTIFY");
filter.addAction("com.android.vending.billing.RESPONSE_CODE");
filter.addAction("com.android.vending.billing.PURCHASE_STATE_CHANGED");

a.registerReceiver(billingReceiver, filter); 
```

但是服务的 onreceive() 方法永远不会被调用。

是否有不同的方法来注册活动以获取接收者呼叫？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:05:43.677

根据一些参考网站，在代码中添加计费接收器不起作用。所以将它移动到清单文件，删除包并从根目录引用它。所以问题解决了。

AIR 应用程序的清单看起来像这样，为那些正在尝试的人提供更多信息！

```
<android>
    <manifestAdditions>

      <![CDATA[
      <manifest android:installLocation="auto">
       <uses-permission android:name="com.android.vending.BILLING" />
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.RECORD_AUDIO"/>
      <uses-permission android:name="android.permission.VIBRATE"/>

        <application>

        <service android:name="<package>.BillingService" />

        <receiver android:name="<package>.BillingReceiver">
            <intent-filter>
                <action android:name="com.android.vending.billing.IN_APP_NOTIFY" />
                <action android:name="com.android.vending.billing.RESPONSE_CODE" />
                <action android:name="com.android.vending.billing.PURCHASE_STATE_CHANGED" />
            </intent-filter>
        </receiver>

      </application>

</manifest>]]>
    </manifestAdditions>
  </android> 
```

# asp.net - 重新发布代码时是否会触发 global.asax 中的 Application_Start 事件？

> ID：10547513
> 
> 赞同：9
> 
> 时间：2012-05-11T07:51:59.810
> 
> 标签：asp.net, asp.net-mvc-3, iis-6

当新发布的代码保存在项目的 IIS Web 根目录中时，是否调用 global.asax 中的 Application_Start，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T07:53:43.280

`Application_Start`每次应用程序池被回收时触发，这通常在您更新 bin 文件夹或 web.config 中的某些文件时发生。因此，如果您重新发布站点并更新其中一些文件，IIS 将卸载应用程序并`Application_Start`在下次请求进入时触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T09:19:39.077

如果您的 Global.asax Application_Start 代码未在 IIS 发布的 Web 上触发：

尝试将您的应用程序 AppPool 更改为 ASP.NET v4.0 Classic。停止 AppPool 启动 AppPool 回收 AppPool。

检查它是否有效。

# java - 通过相应的文档顺序获取术语频率被索引

> ID：10547516
> 
> 赞同：0
> 
> 时间：2012-05-11T07:52:14.333
> 
> 标签：java, lucene

我收集了文档（比如 10 个文档），我通过存储术语向量以这种方式对它们进行索引

```
StringReader strRdElt = new StringReader(content);

    Document doc = new Document();
    String docname=docNames[docNo];
    doc.add(new Field("doccontent", strRdElt, Field.TermVector.YES));

    IndexWriter iW;
    try {
        NIOFSDirectory dir = new NIOFSDirectory(new File(pathToIndex)) ;

        iW = new IndexWriter(dir, new IndexWriterConfig(Version.LUCENE_35,
                new StandardAnalyzer(Version.LUCENE_35)));
        iW.addDocument(doc);
        iW.close();

    } 
```

在索引所有文档之后，我以这种方式获取每个文档的术语频率

```
IndexReader re = IndexReader.open(FSDirectory.open(new File(pathToIndex)), true) ;
TermFreqVector termsFreq[]; //size of number of documents

for(int i=0;i<noOfDocs;i++){
        termsFreq[i] = re.getTermFreqVector(i, "doccontent");
      } 
```

我的问题是我没有得到相应的 termfreqncy 向量。说我已经索引的第二个文档，我在“termsFreq [9]”得到了相应的术语频率和术语

这是什么原因？，我怎样才能通过我索引文档的顺序得到相应的termfrequncies？

# regex - Perl 正则表达式 /foo|bar/ 否定

> ID：10547518
> 
> 赞同：2
> 
> 时间：2012-05-11T07:52:18.170
> 
> 标签：regex, perl, regex-negation

```
/\d/         # contains a digit
/^\D*$/      # doesn't contain a digit

/[abc]/      # contains either the letter a, b, or c
/^[^abc]*$/  # doesn't contain a, b, or c

/foo|bar/    # contains foo or bar
/???????/    # doesn't contain foo or bar 
```

谁能帮我解决这个问题？我找不到任何解决方案，但我需要一个正则表达式来否定它**，而无需**任何可编程逻辑。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T07:58:42.430

您可以将否定前瞻断言用作：

```
/^(?!.*(?:foo|bar)).*$/    # doesn't contain foo or bar 
```

[**看见**](http://www.rubular.com/r/HbJrY3glNb)

# ios - MDM OTA：iDevice 注册中的最后一个配置文件

> ID：10547520
> 
> 赞同：0
> 
> 时间：2012-05-11T07:52:24.613
> 
> 标签：ios, mdm, ota

我在设备上安装最后一个配置文件时遇到问题，控制台抱怨：基础错误：MDM com.company.com.mdm5：MDM 有效负载 com.company.com.mdm5 包含无效主题。

我认为我输入了错误的主题值，我尝试了以下值，但都失败了。1\. Developer 证书的Subject UID。2\. 我的 .mobileprovision 文件中的“应用程序标识符”值

有什么建议么？提前致谢。

SCEP 证书已从设备成功颁发，我的配置文件由 iPCU 生成。打击是我的目标配置文件的一部分：

```
<dict>
                    <key>AccessRights</key>
                    <integer>8191</integer>
                    <key>CheckInURL</key>
                    <string>https://192.168.0.105/cgi-bin/checkin.py</string>
                    <key>CheckOutWhenRemoved</key>
                    <true/>
                    <key>IdentityCertificateUUID</key>
                    <string>000000-0000-0000-0000-0000</string>
                    <key>PayloadDescription</key>
                    <string>Configures MobileDeviceManagement.</string>
                    <key>PayloadIdentifier</key>
                    <string>com.company.com.mdm5</string>
                    <key>PayloadOrganization</key>
                    <string>Company</string>
                    <key>PayloadType</key>
                    <string>com.apple.mdm</string>
                    <key>PayloadUUID</key>
                    <string>7AF006C2-E2BC-4606-8C3B-29A9C421F62D</string>
                    <key>PayloadVersion</key>
                    <integer>1</integer>
                    <key>ServerURL</key>
                    <string>https://192.168.0.105/cgi-bin/server.py</string>
                    <key>SignMessage</key>
                    <false/>
                    <key>Topic</key>
                    <string>com.apple.pineapple</string>
                    <key>UseDevelopmentAPNS</key>
                    <true/>
            </dict> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-12T19:08:12.983

该主题应如下所示：

```
com.apple.mgmt.External.b503419d-1e2a-a60f-7451-5b8832b5a9cb 
```

您可以通过查看 Apple 为您的 MDM 服务提供的 APNS 证书的主题找到它（使用 openssl 显示证书的详细信息）。

用于在 MDM 系统中注册设备的配置文件包含“主题”字符串标识符。除非用于发送通知的证书主题与注册主题匹配，否则设备将不会响应 MDM 推送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T11:04:49.963

首先，您必须生成具有正确数据和格式的证书请求。然后，您将登录到您的 identity.apple.com 帐户，并上传此证书请求，然后苹果会向您发送（通过浏览器下载）签名的推送证书。这包含 rlandster 描述的有效主题。这是您必须生成/写入您的注册资料的主题。当您将命令发送到设备时，之前的推送证书主题和注册配置文件中的主题必须匹配，否则设备将不会听您的命令！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T16:54:00.783

所有主题都必须以 com.apple.mgmt. 开头，但是它们必须与您的 MDM 推送证书 ID 的值相匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T03:23:53.137

如果您的企业开发者帐户有多个用户，则更喜欢使用代理帐户创建 APNS 证书，并验证 APNS 证书主题应包含`com.apple.mgmt.External.b503419d-1e2a-a60f-7451-5b8832b5a9cb`如 rlandster 所述。

# java - 为rabbitmq配置HAProxy

> ID：10547523
> 
> 赞同：3
> 
> 时间：2012-05-11T07:52:41.563
> 
> 标签：java, load-balancing, rabbitmq, haproxy, round-robin

我想使用 HAProxy 作为负载均衡器。我想把两个rabbitmq服务器放在haproxy后面。两个rabbitmq 服务器都在不同的EC2 实例上。我已经按照[这个参考](http://www.joshdevins.net/2010/04/16/rabbitmq-ha-testing-with-haproxy/)配置了 HAProxy 服务器。我工作，但问题是消息没有以循环模式发布。消息仅在一台服务器上发布。我的要求有什么不同的配置吗？

我在 /etc/haproxy/haproxy.cfg 中的配置

```
listen rabbitmq 0.0.0.0:5672
     mode    tcp
     stats   enable
     balance roundrobin
    option tcplog
    no  option clitcpka
    no option srvtcpka
     server  rabbit01 46.XX.XX.XX:5672 check
     server  rabbit02 176.XX.XX.XX:5672 check
listen  web-service *:80
          mode    http
         balance roundrobin
        option httpchk HEAD / HTTP/1.0
         option httpclose
        option forwardfor
        option httpchk OPTIONS /health_check.html
        stats enable
        stats refresh 10s
        stats hide-version
        stats scope   .
        stats uri     /lb?stats
        stats realm   LB2\ Statistics
        stats auth    admin:Adm1nn 
```

**更新：**

我对此进行了一些研发，发现HAProxy是在rabbitmq服务器上循环连接的。例如：如果我请求 10 个连接，那么它将在我的 2 个 rabbitmq 服务器上循环 10 个连接并发布消息。

但问题是我想轮询消息，而不是连接它应该由 HAProxy 服务器管理。即，如果我一次向 HAProxy 发送 1000 条消息，那么 500 条消息应该发送到 rabbit server1，500 条 msg 应该发送到 rabbit server2。我必须遵循什么配置？

**更新：**

我还用 minimumconn 进行了平衡测试，但 HAProxy 的行为出乎意料。我已经在[serverfault.com上发布了这个问题](https://serverfault.com/questions/388801/unexpected-behaviour-when-dynamically-add-node-in-haproxy-server)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T20:35:28.780

消息被发布到将路由到队列的交换器。

您可能没有使用 {"x-ha-policy","all"} 配置队列。基于交换路由在两个节点上都有效的事实，这可能就是您所缺少的。

注意：在 Rabbit 3.0 之前，您可以使用 x-ha-policy 参数声明一个队列，它会被镜像。使用rabbit 3.0，您需要应用策略（ha-mode = all）。您可以通过 api 或 api 工具（rabbitmqctl、管理 gui）设置策略。IE

`rabbitmqctl set_policy -p '/' MirrorAllQueues '.+' '{"ha-mode": "all"}'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T16:26:50.893

AMQP 协议旨在使用*持久*连接，这意味着您不会为每个 AMQP 消息获得一个新连接（以避免不断重新连接的开销）。这意味着像 HAProxy 这样的负载平衡器不能有效地平衡您的消息——它只能帮助平衡您的*连接*。

因此，您无法实现既定目标。但是，如果您的实际目标是将消息平均分配给那些 RabbitMQ 实例的*消费者*，那么您可以使用 Karsten 描述的集群，也可以使用[federation](https://www.rabbitmq.com/federation.html)。

# 联邦设置：

首先，您需要启用联邦插件：

```
rabbitmq-plugins enable rabbitmq_federation
rabbitmq-plugins enable rabbitmq_federation_management 
```

然后，对于您的每台服务器，以管理员身份登录到 RabbitMQ Web UI，然后转到 Admin > “Federation Upstreams” > “Add a new upstream”，并将其他服务器添加为上游。

现在您需要为要联合的每个交换/队列定义一个策略。我只设法让联邦为队列工作请注意，所以我会先尝试。转到管理>“策略”>“添加/更新策略”并添加针对您想要联合的队列的策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T15:26:17.787

从服务器定义中删除“备份”。

备份服务器是在所有其他服务器都关闭时使用的服务器。将所有服务器指定为`backup`不使用`option allbackups`可能会产生不良后果。

将配置的相关部分更改为以下内容：

```
listen  rebbitmq *:5672
        mode    tcp
        balance roundrobin
        stats enable
        option  forwardfor
        option  tcpka
        server  web2 46.XX.XX.XXX:5672 check inter 5000
        server web1 176.XX.XX.XX:5672 check inter 5000 
```

# c# - SQL：保存 MIME 类型或扩展名？

> ID：10547530
> 
> 赞同：8
> 
> 时间：2012-05-11T07:53:24.477
> 
> 标签：c#, sql, file, blob

在数据库中存储有关 BLOB 的信息的最佳方式是什么？文件扩展名（.txt、.rar）还是 MIME 类型？

另外，更好的是：存储带有或不带有扩展名的文件名（“file”或“file.txt”）？

我主要谈论的是桌面应用程序，而不是 Web 应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T07:56:17.060

例如，如果我们谈论文件上传存储，我将始终存储以下字段：

*   文件 - varbinary(MAX)
*   文件名 - nvarchar(255)（包括文件扩展名，例如“myfile.txt”）
*   FileType - nvarchar(255)（MIME 类型）

如果 MIME 类型是基于 Web 的应用程序并且您希望在某个时候允许下载文件，则 MIME 类型很重要。拥有 MIME 类型允许您告诉浏览器如何最好地处理文件。

因此，您问题的直接答案是保存 MIME 类型和扩展名。原因是您无法确保提供了正确的文件扩展名，因此您需要 MIME 类型来识别文件类型。但是您应该使用文件名存储扩展名，以便在下载时提供有效的文件名。

# c# - 如何删除 asp.net 配置文件属性值？

> ID：10547533
> 
> 赞同：0
> 
> 时间：2012-05-11T07:53:41.577
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-profiles

我创建了一个带有 1 个属性的 asp.net 用户配置文件，`List<string> Password`它包含 24 个密码，现在我想从此属性值中删除 4 个密码，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:23:47.767

删除范围

```
Password.RemoveRange(index,count); 
```

删除已知索引

```
Password.RemoveAt(index); 
```

索引始终从零开始。[所有方法列表](http://msdn.microsoft.com/en-us/library/s6hkc2c4)

# android - Android 视频编辑器 API

> ID：10547543
> 
> 赞同：1
> 
> 时间：2012-05-11T07:54:33.583
> 
> 标签：android, android-video-player

我在使用 Andoid 的视频编辑器项目时遇到问题。我已经从**Codeaurora.org** “platform/packages/apps/VideoEditor.git”克隆了它，但它需要另一个“VideoEditor API”子项目。我在哪里可以找到它？它是否使用 libvideoeditor 库“platform/frameworks/media/libvideoeditor.git”？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T23:59:22.387

我也很好奇，所以我决定去看看。

看起来编译项目所需的代码位于 Android 框架树中。可以在 GitHub 上找到[它](https://github.com/android/platform_frameworks_base/tree/kitkat-release/media/java/android/media/videoeditor)。然后，我使用此目录中的源代码制作了一个 Android 库项目。我刚刚注释掉的堆转储函数有一个错误，它在我的带有 ICS 的 Acer Iconia A100 上编译和运行良好，实际上已经有 Movie Studio 应用程序。

# c# - 为 clickevent 处理生成的按钮

> ID：10547547
> 
> 赞同：0
> 
> 时间：2012-05-11T07:54:45.610
> 
> 标签：c#

我有一个类可以根据我的数据库创建带有控件的面板。它创建一个面板，每个面板上都有一个按钮，数据库中的每一行。如何处理一个特定按钮以进行点击事件？

我是个菜鸟，也许有点过头了，但你不会学会在浅水中游泳；）任何帮助表示赞赏！

```
while (myDataReader.Read())
{
  i++;
  Oppdrag p1 = new Oppdrag();
  p1.Location = new Point (0, (i++) * 65);
  oppdragPanel.Controls.Add(p1);
  p1.makePanel();
}

class Oppdrag : Panel
{
  Button infoBtn = new Button();

  public void makePanel()
  {
    this.BackColor = Color.White;
    this.Height = 60;
    this.Dock = DockStyle.Top;
    this.Location = new Point(0, (iTeller) * 45);

    infoBtn.Location = new Point(860, 27);
    infoBtn.Name = "infoBtn";
    infoBtn.Size = new Size(139, 23);
    infoBtn.TabIndex = 18;
    infoBtn.Text = "Edit";
    infoBtn.UseVisualStyleBackColor = true;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:22:02.227

您可以在创建按钮时为该按钮添加事件处理程序。您甚至可以为`CommandArgument`每个按钮添加一个唯一的按钮，以便将一个按钮与另一个按钮区分开来。

```
public void makePanel()
{
  /* ... */
  infoBtn.UseVisualStyleBackColor = true;
  infoBtn.Click += new EventHandler(ButtonClick);
  infoBtn.CommandArgument = "xxxxxxx"; // optional
}

public void ButtonClick(object sender, EventArgs e)
{
  Button button = (Button)sender;
  string argument = button.CommandArgument; // optional
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:04:36.203

您需要一个与单击按钮引发的事件相匹配的方法。

IE）

```
void Button_Click(object sender, EventArgs e)
{

    // Do whatever on the event
} 
```

然后您需要将点击事件分配给该方法。

```
p1.infoBtn.Click += new System.EventHandler(Button_Click); 
```

希望这可以帮助。

# ember.js - 如何使用与 kedoui 的下拉列表绑定？

> ID：10547548
> 
> 赞同：1
> 
> 时间：2012-05-11T07:54:50.760
> 
> 标签：ember.js

我在 emberjs 中有下拉列表，我在下面声明它

```
{{view Ember.Select contentBinding="ResAdmin.adminController.serviceAreaList"        selectionBinding="ResAdmin.adminController.serviceAreaSelection"                                 optionLabelPath="content.ZipCode"     optionValuePath="content.ServiceAreaID"}} 
```

但我想使用 kendo ui 的下拉列表，我可以像下面这样使用

```
<input id="dropDownList" />
$(document).ready(function() {
    $("#dropDownList").kendoDropDownList({
        dataTextField: "text",
        dataValueField: "value",
        dataSource: [
            { text: "Item1", value: "1" },
            { text: "Item2", value: "2" }
        ]
    });
}); 
```

我想在 ember 中使用 kendoui 下拉列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T03:16:09.730

像[wycats 的 jqueryUI 示例一样尝试](http://yehudakatz.com/2011/06/11/using-sproutcore-2-0-with-jquery-ui/)

```
App.KendoSelectView = Em.Select.extend({
    didInsertElement: function () {
        this.$().kendoDropDownList({
            dataTextField: ....
        });
    }
}); 
```

您可能可以从选择属性中选择 DDL 的属性。

# ios - UISlider.value 逻辑/条件

> ID：10547553
> 
> 赞同：0
> 
> 时间：2012-05-11T07:55:14.777
> 
> 标签：ios, logic, conditional, uislider

使用这个：

```
if (_sizeSlider.value <= 0.25) {
    //set to 256sq
    _exportSize = 256;
} else if ((_sizeSlider.value >= 0.26) && (_sizeSlider.value < 0.5)) {
    //set to 512
    _exportSize = 512;
} else if ((_sizeSlider.value >= 0.5) && (_sizeSlider.value < 0.75)) {
    //set to 1024
    _exportSize = 1024;
} else {
    //set to 1800
    _exportSize = 1800;
} 
```

如果滑块正好在 0.25，它认为它在 1。问题不会发生在任何其他点。任何想法为什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:05:50.407

你需要做的是改变条件如下

```
<= 0.25

>0.25 to < 0.5

>=0.5 to < 0.75 
```

只要改变这个，你的问题就会得到解决，我觉得很快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T07:59:51.623

0.25 和 0.26 之间存在差距，您的逻辑未涵盖。这将进入最后的案例。

# database - 通过 Eclipse 访问 SQLite 数据库

> ID：10547555
> 
> 赞同：1
> 
> 时间：2012-05-11T07:55:20.237
> 
> 标签：database, sqlite

如何检查数据是否保存在 SQLite 数据库中？我正在通过eclipse访问SQLite数据库，在数据库中写入数据时没有错误。Bus 检索记录时，不返回任何记录。

所以请建议我如何访问 SQLite 数据库中的数据？

# e-commerce - 需要一起购买的产品的技术电子商务术语

> ID：10547556
> 
> 赞同：0
> 
> 时间：2012-05-11T07:55:21.227
> 
> 标签：e-commerce

我正在寻找一个可以允许以下功能的电子商务解决方案......

例如，用户必须购买手机，他们必须购买带有它的耳机。所以，在购买手机的时候，电商解决方案也应该提供一个选择耳机的选项……

问：这个功能叫什么，我记得在一些技术文档中读到过这个功能，但不记得它的名字。我正在 Magento、PrestaShop 和 X-Cart 中寻找这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:41:18.160

刚刚找到答案。他们叫

> 捆绑产品

# shell - rsync 错误：rsync 协议数据流中的错误（代码 12）

> ID：10547558
> 
> 赞同：5
> 
> 时间：2012-05-11T07:55:37.567
> 
> 标签：shell, unix, ssh, rsync, scp

我正在尝试进行 rsync 以将 500GB 的文件从一台服务器传输到另一台服务器。我使用这个命令；

> rsync -vrPt -e 'ssh -p 2222' uname@server.com:/folder /newfolder

它可以正常工作并同步大约 10/15 分钟，然后每次都会抛出此错误；

> rsync：连接意外关闭（到目前为止已收到 5321016884 个字节） [receiver] rsync：writefd_unbuffered 无法将 4 个字节写入套接字 [generator]：Broken pipe (32) rsync 错误：rsync 协议数据流中的错误（代码 12）在 io。 c(1525) [generator=3.0.6] rsync 错误：在 io.c(600) [receiver=3.0.6] 的 rsync 协议数据流（代码 12）中出错

问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:57:47.983

看起来是路由器超时了 NAT 表条目。（我假设其中一台服务器位于 DSL 链路上。）

或者它可能是这样的：“空闲连接导致路由器或远程外壳服务器关闭连接。” 来自[http://rsync.samba.org/issues.html](http://rsync.samba.org/issues.html)

# objective-c - UITableView tableViewHeader 背景被切断

> ID：10547559
> 
> 赞同：3
> 
> 时间：2012-05-11T07:55:41.070
> 
> 标签：objective-c, ios

我有一个正在尝试加载到 tableViewHeader 的自定义视图。奇怪的是，背景的底部总是被切断。就好像导航栏正在按下按钮，而不是视图的其余部分。

笔尖看起来像这样：

![笔尖图片](../Images/278885532d5f2d48ffa1e09565b4b56e.png)

我在我的 tableviewcontroller 中这样设置它：

```
[[NSBundle mainBundle] loadNibNamed:@"MenuNav" owner:self options:nil];
[self.tableView setTableHeaderView:headerView]; 
```

这就是它在模拟器中的样子。这些按钮也不处理下半部分的点击。

![模拟器中的图像](../Images/f78736a5629dfcc5bdb309ddb43690f8.png)

我尝试过的： - 将子视图放在前面：

```
[self.tableView bringSubviewToFront:headerView]; 
```

- 设置表格视图的需要布局：

```
[self.tableView setNeedsLayout] 
```

- 我还检查了视图的框架是否正确。

有任何想法吗？谢谢！

# 编辑

我找到了罪魁祸首。我不得不取消选中 IB 中的 Autoresize Subviews：http: [//i.imgur.com/jH2bs.png](https://i.imgur.com/jH2bs.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:11:49.953

也许你可以尝试：

*   (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section;

返回您的视图和 Jacky Boy 所说的返回标题高度的方法：

-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:05:42.390

您是否尝试过使用视图的 autoresizingMask ？我将在您的代码中添加类似这样的内容：

```
headerView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

# c# - 在更多文件中分离 web 服务

> ID：10547560
> 
> 赞同：1
> 
> 时间：2012-05-11T07:55:43.257
> 
> 标签：c#, python, web-services, mono, split

是否可以将 Web 服务拆分为更多文件？我正在用 C# 编写 web 服务，并在 Linux 下使用 Mono 朗姆酒。现在它已经有大约 80 个 webmethod 并且文件不透明而且非常大。如何将 Web 服务方法拆分/分离为更多文件，以便服务器从外部（对于客户端）看起来是一个单元？我也在 python 中尝试过这个（ladon webservice），但我找不到任何方法来拆分它。

请帮助某人，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:15:23.237

也许您可以将 Web 服务类分解为[部分类](http://www.4guysfromrolla.com/articles/071509-1.aspx)——这至少可以让您将这个大服务分解为更小的部分。目标是让每个部分都有一个单一的责任。

您还可以重构服务，使服务端点仅包含 80 个 Web 方法，但每个函数曾经包含的所有代码现在都封装在适当的类中

例如：

```
public myWethodToLogSomething(string something)
{
  //connect to db
  //save, do something
  //close connection
} 
```

变成

```
public myWethodToLogSomething(string something)
{
  //move all the code out of the web service itself
  LogClass.Log(string)
} 
```

所以这 80 个 webmethods 只是调用执行工作的类的存根 = 每个类都是可管理的，并且您不会违反与客户的服务合同。

# c# - 一旦调用停止，阻止线程进一步处理

> ID：10547562
> 
> 赞同：1
> 
> 时间：2012-05-11T07:55:46.827
> 
> 标签：c#, multithreading, windows-services, thread-safety, thread-abort

我有一个 Windows 服务，它将启动和停止某些进程的执行，这些进程正在使用持有的线程完成。

我有两个类如下：

```
public class PerformTask
{
    Thread _thread = null;
    public void StartTask()
    {
        _thread = new Thread(new ThreadStart(DoSomeWork));
        _thread.Start();
    }

    public void DoSomeWork()
    {
        // Do Some Work
        _thread = null;
    }

    public void Abort()
    {
        if (_thread != null)
        {
            try
            {
                _thread.Abort();
            }
            catch (ThreadAbortException) {}
        }
    }
}

public class Engine
{
    List<PerformTask> _task = new List<PerformTask>();
    public void Start()
    {
        var task = new PerformTask();
        _task.Add(task);
        // Add task to the timed action queue
        _actionQueue.Add(s => task.StartTask(), TimeSpan.FromSeconds(10));
    }

    public void Stop()
    {
        _task.ForEach(task => task.Abort());
        _task.Clear();
        _actionQueue.Stop();
        _actionQueue.Clear();
    }
} 
```

_actionQueue 是一个自定义源代码，用于在指定的重复时间间隔执行指定的操作。所有动作都保留在队列中，并在指定的时间间隔内调用。

现在，Windows 服务的 OnStart 和 OnStop 方法将分别调用 Engine 类的 Start 和 Stop 方法。

我想要的是当 Windows 服务停止时，所有正在运行的线程都应该停止它们的处理/执行。

但是，这里发生的事情是在创建新线程实例时，我有一个 Windows 服务，该服务将启动和停止某些进程的执行，该进程正在使用持有的线程完成。

我有两个类如下：

```
public class PerformTask
{
    Thread _thread = null;
    public void StartTask()
    {
        _thread = new Thread(new ThreadStart(DoSomeWork));
        _thread.Start();
    }

    public void DoSomeWork()
    {
        // Do Some Work
        _thread = null;
    }

    public void Abort()
    {
        if (_thread != null)
        {
            try
            {
                _thread.Abort();
            }
            catch (ThreadAbortException) {}
        }
    }
}

public class Engine
{
    List<PerformTask> _task = new List<PerformTask>();
    ActionQueue _actionQueue = new ActionQueue();
    public void Start()
    {
        foreach(.....)
        {
            var task = new PerformTask();
            _task.Add(task);
            // Add task to the timed action queue
            _actionQueue.Add(s => task.StartTask(), TimeSpan.FromSeconds(10));
        }
        _actionQueue.Start();
    }

    public void Stop()
    {
        _task.ForEach(task => task.Abort());
        _task.Clear();
        _actionQueue.Stop();
        _actionQueue.Clear();
    }
} 
```

ActionQueue 是一个自定义的源代码，用于在指定的重复时间间隔执行指定的操作。所有动作都保留在队列中，并在指定的时间间隔内调用。

现在，Windows 服务的 OnStart 和 OnStop 方法将分别调用 Engine 类的 Start 和 Stop 方法。

我想要的是当 Windows 服务停止时，所有正在运行的线程都应该停止它们的处理/执行。

但是，这里发生的是在 StartTask 方法中创建新线程实例时，当我调用 _task.ForEach(task => task.Abort()) 我没有正确的 Thread 实例，这就是所有实例_thread = new Thread(....); 没有被访问，因为同一个 PerformTask 类会有多个队列。

注意：我无法更改 ActionQueue。

1.  Abort 方法是停止线程的正确方法吗？

2.  如何停止所有线程（包括源代码创建的 Thread 类的所有实例）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:02:28.087

通常你会创建一个`WaitHandle`（`ManualResetEvent`例如）这样的：

```
ManualResetEvent stopAllThreads = new ManualResetEvent(false); 
```

所以事件是“未设置”。更改线程方法中的循环，以便它们循环直到所有工作完成或设置手动重置事件。

```
while (!stopAllThreads.WaitOne(50)) 
```

或类似的。

然后，在服务的`OnStop`方法中，你只需设置事件（不要忘记在 中重新设置它`OnStart`，否则在服务重新启动时线程将不会再次运行）：

```
stopAllThreads.Set(); 
```

并等待所有线程完成。

实际上，中止线程并不是停止线程的好方法——你应该总是选择类似上面的方法。

# symfony - 如何在 Symfony 2 中获取当前捆绑包？

> ID：10547563
> 
> 赞同：10
> 
> 时间：2012-05-11T07:55:48.090
> 
> 标签：symfony

如何检测我在哪个捆绑包中？

例如，当我在 web.com/participants/list 中时，我想阅读“参与者”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T08:42:45.153

为了在控制器中获取**包名称：**

```
// Display "AcmeHelloBundle"
echo $this->getRequest()->attributes->get('_template')->get('bundle'); 
```

在 Twig 模板中：

```
{{ app.request.get('_template').get('bundle') }} 
```

为了在控制器中获取**控制器名称**：

```
// Display "Default"
echo $this->getRequest()->attributes->get('_template')->get('controller'); 
```

在 Twig 模板中：

```
{{ app.request.get('_template').get('controller') }} 
```

为了在控制器中获取**动作名称：**

```
// Displays "index"
echo $this->getRequest()->attributes->get('_template')->get('name'); 
```

在 Twig 模板中：

```
{{ app.request.get('_template').get('name') }} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T09:07:02.310

AFAIK 这还不可能（至少以一种简单的方式）。你应该使用反射。我编写了一个快速而肮脏的服务来根据我的约定获取包名称和猜测实体/存储库/表单名称。可能有问题，看看： http: [//pastebin.com/BzeXAduH](http://pastebin.com/BzeXAduH)

它仅在您传递从 Controller (Symfony2) 继承的类时才有效。用法：

```
entity_management_guesser:
  class: Acme\HelloBundle\Service\EntityManagementGuesser 
```

在您的控制器中：

```
$guesser = $this->get('entity_management_guesser')->inizialize($this);

$bundleName  = $guesser->getBundleName();      // Acme/HelloBundle
$bundleShort = $guesser->getBundleShortName(); // AcmeHelloBundle 
```

另一种可能性是使用内核获取所有捆绑包：[Get a bundle name from an entity](https://stackoverflow.com/questions/9519471/get-a-bundle-name-from-an-entity)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-11T11:45:07.690

那么你可以通过以下方式获得当前路线的控制器，

```
$request->attributes->get('_controller'); 
```

您可以从中解析捆绑名称。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-10T20:42:36.503

您可以像这样在**控制器**中获取包名称：

```
// Display "SybioCoreBundle"
echo $this->getRequest()->attributes->get('_template')->get('bundle'); 
```

在**Twig 模板**内：

```
{{ app.request.get('_template').get('bundle') }} 
```

# postgresql - 使用 Postgres 快速插入数组

> ID：10547564
> 
> 赞同：2
> 
> 时间：2012-05-11T07:55:53.443
> 
> 标签：postgresql

在 Oracle OCI 和 OCCI 中，有一些 API 工具可以执行数组插入，您可以在客户端中构建一个值数组，并将该数组连同准备好的语句一起发送到服务器，以便一次将数千个条目插入到表中，从而导致在某些情况下巨大的性能改进。PostgreSQL 中有类似的东西吗？

我正在使用股票 PostgreSQL C API。

一些伪代码来说明我的想法：

```
stmt = con->prepare("INSERT INTO mytable VALUES ($1, $2, $3)");
pg_c_api_array arr(stmt);
for triplet(a, b, c) in mylongarray:
    pg_c_api_variant var = arr.add();
    var.bind(1, a);
    var.bind(2, b);
    var.bind(3, c);
stmt->bindarray(arr);
stmt->exec() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T09:04:52.260

PostgreSQL has similar functionality - statement COPY and COPY API - it is very fast

[libpq documentation](http://www.postgresql.org/docs/9.1/static/libpq-copy.html)

```
char *data = "10\t20\40\n20\t30\t40";

pres = PQexec(pconn, "COPY mytable FROM stdin");

/* can be call repeatedly */ 
copy_result = PQputCopyData(pconn, data, sizeof(data));
if (copy_result != 1)
{
        fprintf(stderr, "Copy to target table failed: %s\n",
                                        PQerrorMessage(pconn));
        EXIT;
}

if (PQputCopyEnd(pconn, NULL) == -1)
{
         fprintf(stderr, "Copy to target table failed: %s\n",
                                            PQerrorMessage(pconn));
                            EXIT;
}

pres = PQgetResult(pconn);
if (PQresultStatus(pres) != PGRES_COMMAND_OK)
{
       fprintf(stderr, "Copy to target table failed:%s\n",
                                            PQerrorMessage(pconn));
           EXIT;
}

PQclear(pres); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T09:19:12.527

我喜欢这种在单个命令中创建数千行的方式：

```
INSERT INTO mytable VALUES (UNNEST($1), UNNEST($2), UNNEST($3)); 
```

将第 1 列的值的数组绑定到`$1`，将第 2 列的值的数组绑定到`$2`等等！当您习惯于按行思考时，在列中提供值一开始可能看起来有点奇怪。

您需要 PostgreSQL >= 8.4 for`UNNEST`或您自己的函数来将数组转换为集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T09:49:34.050

正如 Pavel Stehule 指出的那样，有 COPY 命令，当在 C 中使用 libpq 时，还有用于传输复制数据的相关函数。我没用过这些。我主要在 Python 中针对 PostgreSQL 进行编程，使用过 psycopg2 的类似功能。这非常简单：

```
conn = psycopg2.connect(CONN_STR)
cursor = conn.cursor()
f = open('data.tsv')
cusor.copy_from(f, 'incoming')
f.close() 
```

事实上，我经常`open`用一个类似文件的包装器对象替换它，它首先执行一些基本的数据清理。它非常无缝。

# android - 将挂起的 Intent 的结果返回给创建它的 Activity

> ID：10547566
> 
> 赞同：1
> 
> 时间：2012-05-11T07:56:09.253
> 
> 标签：android, android-intent

我正在从指定`requestCode`in的 Activity 创建通知

```
PendingIntent.getActivity(context,requestCode,intent, flags) 
```

我想将结果返回给创建它的那个 Activity

有可能实现这一目标吗？如果没有，那么将不胜感激任何其他优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:39:49.510

您将需要您的待定意图来启动您的活动，因为当用户触摸通知时它可能会关闭。因此，您可以为该活动的开始意图提供您希望的任何额外内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-28T02:37:50.583

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
  } 
```

我想这就是这个问题的答案。请在您上面调用的活动中扩展此方法。

# system.reactive - Rx 中基于数据的缓冲

> ID：10547573
> 
> 赞同：1
> 
> 时间：2012-05-11T07:56:26.893
> 
> 标签：system.reactive

让我先解释一下我想要实现的目标。

假设我从事件流中传入以下数据

```
var data = new string[] { 
                "hello", 
                "Using", 
                "ok:michael", 
                "ok", 
                "begin:events", 
                "1:232", 
                "2:343", 
                "end:events", 
                "error:dfljsdf",
                "fdl", 
                "error:fjkdjslf",
                "ok"  
            }; 
```

当我订阅数据源时，我想得到以下结果

```
"ok:michael"
"ok"
"begin:events 1:232 2:343 end:events"
"error:dfljsdf"
"error:fjkdjslf"
"ok" 
```

基本上，我想获取以*ok 或 error开头的任何数据**以及 begin 和 end 之间*的数据。

到目前为止我已经尝试过了..

```
var data = new string[] { 
                "hello", 
                "Using", 
                "ok:michael", 
                "ok", 
                "begin:events", 
                "1:232", 
                "2:343", 
                "end:events", 
                "error:dfljsdf",
                "fdl", 
                "error:fjkdjslf",
                "ok"  
            };

            var dataStream = Observable.Generate(
                                data.GetEnumerator(), 
                                e => e.MoveNext(), 
                                e => e, 
                                e => e.Current.ToString(), 
                                e => TimeSpan.FromSeconds(0.1));         

            var onelineStream = from d in dataStream
                                where d.StartsWith("ok") || d.StartsWith("error")
                                select d;

            // ???
            // may be need to buffer? I want to get data like "begin:events 1:232 2:343 end:events"
            // but it is not working...
            var multiLineStream = from list in dataStream.Buffer<string, string, string>(
                                bufferOpenings: dataStream.Where(d => d.StartsWith("begin")),
                                bufferClosingSelector: b => dataStream.Where(d => d.StartsWith("end")))
                              select String.Join(" ", list);

            // merge two stream????
            // but I have no clue how to merge these twos :(

            mergeStream .Subscribe(d =>
            {
                Console.WriteLine(d);
                Console.WriteLine();
            }); 
```

由于我对响应式编程非常陌生，因此我无法让自己以响应式方式思考。:(

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-12T01:01:01.753

你是如此，如此接近正确答案！

本质上，您的`onelineStream`&`multiLineStream`查询几乎是正确的。

将它们合并在一起非常容易。只需这样做：

```
onelineStream.Merge(multiLineStream) 
```

但是，您的查询不足之处`Observable.Generate`在于您用来引入值之间的延迟。这会创建一个 observable，如果您有多个订阅者，则可以将值“扇出”。

给定您的数据和定义，`dataStream`看看这段代码的行为方式：

```
dataStream.Select(x => "!" + x).Subscribe(Console.WriteLine);
dataStream.Select(x => "@" + x).Subscribe(Console.WriteLine); 
```

你得到这些值：

```
!hello
@Using
!ok:michael
@ok
@1:232
!begin:events
@2:343
!end:events
!fdl
@error:dfljsdf
!error:fjkdjslf
@ok 
```

请注意，一些订阅由一个订阅处理，而另一些则由另一个订阅处理。这意味着即使您的`onelineStream`&`multiLineStream`查询几乎是正确的，它们也只会看到一些数据，因此不会像您预期的那样运行。

您还可以获得可以跳过和重复值的竞争条件。所以最好避免这种可观察的。

在值之间引入延迟的更好方法是这样做：

```
var dataStream = data.ToObservable().Do(_ => Thread.Sleep(100)); 
```

现在这创建了一个“冷”可观察对象，这意味着每个新订阅者都将获得可观察对象的新订阅，因此从第一个值开始。

您的`multiLineStream`查询将无法在冷的 observable 上正常工作。

为了使数据流成为“热的”可观察的（在订阅者之间共享值），我们使用`Publish`操作符。

所以，`multiLineStream`现在看起来像这样：

```
var multiLineStream =
    dataStream.Publish(ds =>
        from list in ds.Buffer(
            ds.Where(d => d.StartsWith("begin")),
            b => ds.Where(d => d.StartsWith("end")))
        select String.Join(" ", list)); 
```

然后你可以得到你的结果，如下所示：

```
onelineStream.Merge(multiLineStream).Subscribe(d =>
{
    Console.WriteLine(d);
    Console.WriteLine();
}); 
```

这就是我得到的：

```
ok:michael
ok
begin:events 1:232 2:343 end:events
error:dfljsdf
error:fjkdjslf
ok 
```

让我知道这是否适合你。

# android - 远程服务如何向绑定的 Activity 发送消息？

> ID：10547577
> 
> 赞同：9
> 
> 时间：2012-05-11T07:56:46.753
> 
> 标签：android, android-service, ipc, android-binder

我已阅读[有关 Bound Services 的文档](http://developer.android.com/guide/topics/fundamentals/bound-services.html)，其中显示您可以通过*Messages*从 Activity 轻松地与远程（即不在同一上下文中）Service 进行通信，但是有什么方法可以将消息从*Service*发送到*绑定活动*？例如，我的活动绑定到同一应用程序的正在运行的后台服务，向它发送一条消息，并在收到此消息后，服务回复一条消息给活动。我该如何实现呢？您能否指出一些解释该主题的文档？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-18T00:37:15.207

注意：这仅适用于进程中的服务和活动，而不是远程问题。

使用服务与活动通信涉及创建一个侦听器，您可以将其从活动传递给服务。

您需要制作绑定到活动的服务。

第一步是提供服务。在服务中确保你有一个 Binder 对象和返回一个 binder 对象的方法。以下是我在服务中用于检索活页夹的示例。另请注意，此绑定器具有设置侦听器的方法，该侦听器将作为 BoundServiceListener 类型字段保存在服务中。

```
/**
 * Class used for the client Binder.  Because we know this service always
 * runs in the same process as its clients, we don't need to deal with IPC.
 */
public class DownloadBgBinder extends Binder {

    public DownloadBgService getService() {
        // Return this instance of LocalService so clients can call public methods
        return DownloadBgService.this;
    }

    public void setListener(BoundServiceListener listener) {
        mListener = listener;
    }
}

@Override
public IBinder onBind(Intent intent) {
    return mBinder;
} 
```

现在您需要创建某种接口，您可以将其传递给您的服务可以用来向其发送更新的 binder 对象。下面是我的 BoundServiceListener。

```
public interface BoundServiceListener {

    public void sendProgress(double progress);
    public void finishedDownloading();
} 
```

现在在您的活动中，您需要创建一个用于绑定到服务的 ServiceConnection 对象。所以添加这样的东西。

```
/** Defines callbacks for service binding, passed to bindService() */
private ServiceConnection mConnection = new ServiceConnection() {

    @Override
    public void onServiceDisconnected(ComponentName arg0) {
        mBound = false;
    }

    @Override
    public void onServiceConnected(ComponentName name, IBinder service) {
        // We've bound to LocalService, cast the IBinder and get LocalService instance
        DownloadBgBinder binder = (DownloadBgBinder) service;
        mService = binder.getService();
        binder.setListener(new BoundServiceListener() {

            @Override
            public void sendProgress(double progress) {
                // Use this method to update our download progress
            }

            @Override
            public void finishedDownloading() {

            }   
        });

        mBound = true;
    } 
```

现在要注意的关键是

```
binder.setListener(new BoundServiceListener() {

    @Override
    public void sendProgress(double progress) {
        // Use this method to update our download progress
    }

    @Override
    public void finishedDownloading() {

    }
}); 
```

这部分是我实际将我的 BoundServiceListener 接口发送到服务类的地方。然后服务类在此处使用该侦听器对象

```
 if (mListener!=null)
        mListener.finishedDownloading();
    if (mListener!=null)
        mListener.sendProgress(percent); 
```

现在您可以将它放在您的服务类中您需要的任何位置，您的活动将收到您的进度更新。

还要确保在您的活动中包含以下内容以实际绑定和启动服务。

```
Intent intent = new Intent(this, DownloadBgService.class);
startService(intent);
bindService(intent, mConnection, Context.BIND_AUTO_CREATE); 
```

请记住，即使您绑定到服务，它也不会真正启动，直到您调用启动服务。绑定到服务只是将服务连接到活动。startService() 方法调用服务

```
onStartCommand(Intent intent, int flags, int startId) 
```

还要在清单中声明您的服务

```
<service android:name=".services.DownloadBgService" /> 
```

当活动离开时也取消绑定服务

```
@Override
protected void onStop() {
    super.onStop();
    // Unbind from the service
    if (mBound) {
        unbindService(mConnection);
        mBound = false;
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T09:07:43.590

[在Remote Messenger Service Sample](http://developer.android.com/reference/android/app/Service.html#RemoteMessengerServiceSample)的参考文档中找到示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-27T01:53:47.923

简而言之，答案是将带有 ResponseHandler 的 Messenger 分配给**msg.replyTo()**。让我们在下面的示例中看看我们是如何做到的。

**简要说明此示例的作用：** 在此示例中，我们在 MainActivity 中有一个按钮，其 onClick() 链接到 sendMessage(View view)。单击按钮后，我们会向 RemoteService 发送自定义消息。一旦在远程服务中收到自定义消息，我们将 CurrentTime 附加到自定义消息并将其发送回 MainActivity。

**MainActivity.java**

```
public class MainActivity extends AppCompatActivity {

    ServiceConnector serviceConnector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.serviceConnector = new ServiceConnector();
        Intent intent = new Intent(this,RemoteService.class);
        bindService(intent,serviceConnector, Context.BIND_AUTO_CREATE);
    }

    public void sendMessage(View view) {
        Message msg = Message.obtain();
        msg.replyTo = new Messenger(new ResponseHandler(this));
        Bundle bundle = new Bundle();
        bundle.putString("MyString", "Time");
        msg.setData(bundle);
        try {
            this.serviceConnector.getMessenger().send(msg);
        } catch (RemoteException e) {
            e.printStackTrace();
        }
    }
} 
```

**响应处理程序.java**

```
public class ResponseHandler extends Handler {

    MainActivity mainActivity;
    public ResponseHandler(Context context){
        this.mainActivity = (MainActivity) context;
    }
    @Override
    public void handleMessage(@NonNull Message msg) {
        Bundle data = msg.getData();
        String dataString = data.getString("respData");
        Toast.makeText(this.mainActivity,dataString,Toast.LENGTH_SHORT).show();
    }
} 
```

**服务连接器.java**

```
public class ServiceConnector implements ServiceConnection {

    private Messenger messenger;

    @Override
    public void onServiceConnected(ComponentName componentName, IBinder iBinder) 
   {
          this.messenger = new Messenger(iBinder);
    }

    @Override
    public void onServiceDisconnected(ComponentName componentName) {
        this.messenger = null;
    }

    public Messenger getMessenger(){
        return this.messenger;
    }
} 
```

**远程服务.java**

```
public class RemoteService extends Service {

    private final IBinder iBinder = new Messenger(new IncomingHandler(this)).getBinder();

    @Override
    public IBinder onBind(Intent intent) {
        // TODO: Return the communication channel to the service.
        return iBinder;
    }

} 
```

**传入处理程序.java**

```
public class IncomingHandler extends Handler {

    private RemoteService remoteService;

    public IncomingHandler(Context context)
    {
        this.remoteService = (RemoteService)context;
    }

    public RemoteService getService()
    {
        return this.remoteService;
    }

    @Override
    public void handleMessage(@NonNull Message msg) {
        try {
            msg.replyTo.send(getCurrentTime(msg));
        } catch (RemoteException e) {
            e.printStackTrace();
        }
    }

    public Message getCurrentTime(Message msg){
        SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss MM/dd/yyyy", Locale.US);
        Message resp = Message.obtain();
        Bundle bResp = new Bundle();
        bResp.putString("respData", msg.getData().getString("MyString") + " : " +(dateFormat.format(new Date())).toString());
        resp.setData(bResp);
        return resp;

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-24T14:04:02.617

1) 在自己的 Binder.class 和实现 IInterface.class 对象（匿名或通过直接扩展类）中实现 transact/onTransact 方法，方法是使用传入的 Parcel.class 对象
2) 将本地接口附加到自己的 Binder 对象 3 ) 创建服务并从 onBind 方法返回绑定器代理实现 4) 使用 bindService(ServiceConnection) 创建绑定 5) 这将导致通过在接口实现中创建绑定返回代理绑定器

这是使用内核绑定器空间的 IPC 的 android 实现

简化代码示例：

```
class ServiceIPC extends Service {

    @Override
    public Binder onBind()  {
        return new IInterface() {

            IInterface _local = this;         

            @Override 
            public IBinder asBinder() {
               return new Binder() 

                           {   
                               //
                               // allow distinguish local/remote impl 
                               // avoid overhead by ipc call 
                               // see Binder.queryLocalInterface("descriptor");
                               //
                               attachLocalInterface(_local,"descriptor");
                           }

                           @Override
                           public boolean onTransact(int code,
                                                     Parcel in,
                                                     Parcel out,
                                                     int flags) 
                                   throws RemoteException {
                               //
                               //  your talk between client & service goes here 
                               //
                               return whatsoever // se super.onTransact(); 
                           }
                      }
            }    

        }.asBinder();
    }

} 
```

*然后您可以在客户端和服务端使用 IBinder 的事务方法相互交谈（4 个使用奇数/前夕代码来恶心本地远程端的示例，因为我们对展位端使用相同的 onTransact 方法）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-11T06:10:09.753

应该能够使用 . 像 android billing api 这样的[AIDL 文件。](https://developer.android.com/guide/components/aidl)它是一种进行 RPC 调用（跨远程进程通信）的方法。但是您必须声明要使用的每种方法。有点像上面已经提到的界面。

# mysql - 如何在 MySQL 中旋转该表

> ID：10547579
> 
> 赞同：0
> 
> 时间：2012-05-11T07:57:05.520
> 
> 标签：mysql, pivot-table

你将如何在 MySQL 中旋转这个表？它按日期顺序排列。

```
+--------+----------+-----------+
| grpid  | status   | msg       |
+--------+----------+-----------+
|      1 | OK       | text6     |
|      1 | PROGRESS | text5     |
|      1 | PROGRESS | text4     |
|      2 | FAIL     | text3     |
|      2 | PROGRESS | text2     |
|      2 | PROGRESS | text1     |
+--------+----------+-----------+ 
```

到这个表格：

```
+--------+----------+-------------------+
| grpid  | status   | progress          |
+--------+----------+-------------------+
|      1 | OK       | text4,text5,text6 |
|      2 | FAIL     | text1,text2,text3 |
+--------+----------+-------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:01:24.723

这不是一个支点，它是一个`GROUP BY`using [`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

```
SELECT   grpid,
         GROUP_CONCAT(CASE WHEN status IN ('OK','FAIL') THEN status END) AS status,
         GROUP_CONCAT(msg) AS progress
FROM     my_table
GROUP BY grpid 
```

# asp.net - VS 2011 中 Web 部署项目的替代方案

> ID：10547580
> 
> 赞同：2
> 
> 时间：2012-05-11T07:57:10.663
> 
> 标签：asp.net, .net, visual-studio, webforms, asp.net-4.5

我试图找出在 VS2011 中使用 Web 部署项目的替代方法，因为它们似乎不再受支持。

我们有许多项目，我们使用它们在不同项目之间共享 .ascx 组件。现在推荐的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T21:09:15.053

我们尚未最终确定 VS 11 的 Web 部署项目计划。我们将在接下来的一周内完成这些计划。如果您有一个特定的场景想要解除阻止，我可以尝试帮助您。请随时通过 sayedha {at}[microsoft{dotcom} 向我发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T21:22:05.253

我们正在使用非常直接的 MsBuild 来做事。秘密是一个名为 _CopyWebApplication 的隐藏目标——它实际上将构建的 Web 应用程序等复制到一个文件夹中。

我不知道为什么这种有用的东西被隐藏和无证。

# javascript - Codeigniter 中 ajax 上传的奇怪 MIME 类型

> ID：10547582
> 
> 赞同：0
> 
> 时间：2012-05-11T07:57:24.460
> 
> 标签：javascript, jquery, ajax, codeigniter, csv

在 codeigniter 中上传 csv 文件时，我总是遇到无效的文件类型错误。我已经用谷歌搜索了 csv 可能的 mime 类型，但仍然没有任何效果。所以我打扰回显 echo $_FILES['userfile']['type']; 我得到了这个 MIME 类型：'application/force-download'。下面是来自控制器的片段和来自视图的片段

控制器：

```
public function upload_file()
{

 $status = "";
 $msg = "";
 $file_element_name = 'userfile';

 if (empty($_POST['title']))
 {
  $status = "error";
  $msg = "Please enter a title";
 }

 if ($status != "error")
 {
  $config['upload_path'] = './uploads/csv_list/';
  $config['allowed_types'] = 'gif|jpg|png|doc|txt|.csv';
  $config['max_size']  = 1024 * 8;

  if (!$this->upload->do_upload($file_element_name))
  {
     $status = 'error';
     $msg = $this->upload->display_errors('', '');

  }
  else
  {

        $status = "success";
        $msg = "File successfully uploaded";

  }
  @unlink($_FILES[$file_element_name]);
  }
  echo json_encode(array('status' => $status, 'msg' => $msg));
} 
```

看法：

```
 <input type="text" name="title" id="title" value="a" style ="display:none"/>

<p>
  <input type="text" name="title" id="title" value="a" style ="display:none"/>  
  <label for="userfile">Upload CSV File</label>
  <input type="file" name="userfile" id="userfile" size="20" />
  <input type="submit" name="submit" id="submit" value ="Upload"/>
</p> 
```

```
<script>
    $(function () {
        $('#upload_file').submit(function (e) {
            e.preventDefault();
            $.ajaxFileUpload({
                url: '../upload/upload_file/',
                secureuri: false,
                fileElementId: 'userfile',
                dataType: 'json',
                data: {
                    'title': $('#title').val()
                },
                success: function (data, status) {
                    if (data.status != 'error') {
                        $('#files').html('<p>Reloading files...</p>');
                        // refresh_files();
                        // $("#userfile").replaceWith("<input type=\"file\" id=\"userfile\" size =    \"20\" />");
                        $('#files').html('File Uploaded');
                        // $('#title').val('');
                    }
                    alert(data.msg);
                }
            });
            return false;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:03:47.533

这里的问题是不同的网络浏览器对文件的类型有不同的想法。由于 CodeIgniter 的上传类依赖于文件类型，这可能会变得混乱。

我按照几条指令向字段中的字段添加更多类型，`config/`但也没有成功。

我最终允许所有类型`$config['allowed_types'] = '*'`并像这样进行验证：

```
if (in_array(end(explode('.', $str_file_name)), array('php')))
    return FALSE; 
```

或者在你的情况下：

```
$arr_validate = array('gif', 'jpg', 'png', 'doc', 'txt', 'csv');

if ( ! in_array(end(explode('.', $str_file_name)), $arr_validate))
    return FALSE; 
```

# django - 为模型覆盖 django 的 RelatedManager

> ID：10547583
> 
> 赞同：2
> 
> 时间：2012-05-11T07:57:25.703
> 
> 标签：django, relation

我如何覆盖关系经理？例如：

```
user.entry_set # django.db.models.fields.related.RelatedManager 
```

但我需要我自己的经理。我尝试了这段代码，但这不起作用：

```
class EntryManager(models.Manager):
    use_for_related_fields = True 
```

谢谢。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-05-11T08:05:35.483

您的任务需要相当复杂的代码，这将很难维护和理解（如果可能的话）。

那这个呢？

```
class EntryManager(models.Manager):
    def by_user(self, user):
        # do anything you want

# usage
Entry.objects.by_user(user=user) 
```

# java - 创建持久连接

> ID：10547588
> 
> 赞同：0
> 
> 时间：2012-05-11T07:58:06.420
> 
> 标签：java, android

在我的 android 应用程序中，我正在尝试为下载图像创建持久连接。这是我的代码

```
 public class PersActivity extends  Activity {
    ImageView img;
    String imageUrl="http://192.168.1.4/JRec/";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button bt3= (Button)findViewById(R.id.download);
        bt3.setOnClickListener(getImgListener);
        img = (ImageView)findViewById(R.id.image);
    } 

    View.OnClickListener getImgListener = new View.OnClickListener()
    {

        @Override
        public void onClick(View view) {

            for (int i = 0; i<4;i++){
            downloadFile(i,imageUrl+"images/"+i+".png");

            }

        }

    };

    Bitmap bmImg;
    void downloadFile(int i, String fileUrl){

        URL myFileUrl =null; 
        try {
            myFileUrl= new URL(fileUrl);
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {

            System.out.println("Opening connection");
            HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
            conn.setRequestProperty("Connection", "keep-alive");
            conn.setDoInput(true);
            conn.connect();

            System.out.println("Downloading"+fileUrl);
            InputStream is = conn.getInputStream();

            bmImg = BitmapFactory.decodeStream(is);
            img.setImageBitmap(bmImg);

            if (i ==3){
                System.out.println("Disconnected");
                conn.disconnect();
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

当我每次开始下载文件时，它应该打开连接进行下载，我只想打开一次连接，当应用程序结束下载所有文件时，连接必须断开。有没有办法做到这一点。

感谢任何关注此问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:13:33.950

Http 连接是“无状态的”，因此没有像 SSH 连接那样保持打开的连接；因此，您下载的每个图像都将在单独的请求/连接中完成。（这也是网络浏览器做的）。

另外，您为什么将 URL 的创建放在单独的 try/catch 中？这是没有意义的，因为如果您未能创建 URL 对象，当您尝试打开连接时，您将获得一个空指针。

# c# - 在没有 API 的情况下将已经打开的 winform 应用程序带到前面？

> ID：10547594
> 
> 赞同：0
> 
> 时间：2012-05-11T07:58:34.097
> 
> 标签：c#, winforms, topmost

**你好，**

假设我们在后台运行了一个 WinForm 应用程序（app1），现在另一个应用程序（app2）（最上面的活动应用程序）触发了一个带有 app1 的 startProcess。

现在我需要 app1 使用现有实例并将其带到最顶层的应用程序（不仅在 app1 应用程序内）。

我发现了这个：[http ://sanity-free.org/143/csharp_dotnet_single_instance_application.html](http://sanity-free.org/143/csharp_dotnet_single_instance_application.html)

没有API就不可能做到这一点，这是真的吗？我看过 att BringToFront、Activate 和 Focus，但所有这些似乎只在应用程序内有效，而不在应用程序之间有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:16:54.180

我不知道您的意思是“没有 API”或为什么这很重要。

然而，最简单的方法是 via `WindowsFormsApplicationBase`。只需几行代码，它就可以为您提供所需的一切。

您需要添加对`Microsoft.VisualBasic`程序集的引用 - 但它可以通过 C# 使用。

制作这个类：

```
public class SingleInstanceApplication : WindowsFormsApplicationBase
{
    private SingleInstanceApplication()
    {
        IsSingleInstance = true;
    }

    public static void Run(Form form)
    {
        var app = new SingleInstanceApplication
        {
            MainForm = form
        };

        app.StartupNextInstance += (s, e) => e.BringToForeground = true;

        app.Run(Environment.GetCommandLineArgs());
    }
} 
```

在您的 Program.cs 中，更改运行行以使用它：

```
//Application.Run(new Form1());
SingleInstanceApplication.Run(new Form1()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:25:43.317

您确实需要在 2 个应用程序之间进行某种通信。在文章中链接到您发布的通信是通过 WinApi 消息。您也可以通过套接字或文件和 FileWatchers 来做到这一点。

UPD1：使用来自另一个应用程序的计时器模拟消息模拟最小化并在该消息上最大化的代码：

```
public partial class Form1 : Form
{
    private Timer _timer = null;

    public Form1()
    {
        InitializeComponent();

        this.Load += OnFormLoad;
    }

    private void OnFormLoad(object sender, EventArgs e)
    {
        Button btn = new Button();
        btn.Text = "Hide and top most on timer";
        btn.Width = 200;
        btn.Click += OnButtonClick;

        this.Controls.Add(btn);
    }

    private void OnButtonClick(object sender, EventArgs e)
    {
        //minimize app to task bar
        WindowState = FormWindowState.Minimized;

        //timer to simulate message from another app
        _timer = new Timer();
        //time after wich form will be maximize
        _timer.Interval = 2000;
        _timer.Tick += new EventHandler(OnTimerTick);
        _timer.Start();
    }

    private void OnTimerTick(object sender, EventArgs e)
    {
        _timer.Stop();

        //message from another app came - we should 
        WindowState = FormWindowState.Normal;
        TopMost = true;
    }
} 
```

# java - apache karaf中的activemq，使用xbean加载配置

> ID：10547595
> 
> 赞同：1
> 
> 时间：2012-05-11T07:58:36.427
> 
> 标签：java, dependency-injection, osgi, activemq, apache-karaf

我想在 Apache Karaf 上运行的 OSGi 包中使用 xbean 配置创建嵌入式 ActiveMQ 代理。这段代码：

```
brokerService = BrokerFactory.createBroker("xbean:file:etc/config.xml"); 
```

失败，但有以下异常：

```
org.springframework.beans.factory.BeanDefinitionStoreException: Failed to load type: org.apache.activemq.xbean.XBeanBrokerService. Reason: java.lang.ClassNotFoundException: org.apache.activemq.xbean.XBeanBrokerService not found by org.apache.xbean.spring [81]; nested exception is java.lang.ClassNotFoundException: org.apache.activemq.xbean.XBeanBrokerService not found by org.apache.xbean.spring [81]
        at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.getBeanInfo(XBeanQNameHelper.java:75)
        at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.coerceNamespaceAwarePropertyValues(XBeanQNameHelper.java:54)
        at org.apache.xbean.spring.context.v2c.XBeanBeanDefinitionParserDelegate.parseBeanDefinitionElement(XBeanBeanDefinitionParserDelegate.java:59)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseBeanDefinitionElement(BeanDefinitionParserDelegate.java:396)
        at org.apache.xbean.spring.context.v2c.XBeanNamespaceHandler.parseBeanFromExtensionElement(XBeanNamespaceHandler.java:224)
        at org.apache.xbean.spring.context.v2c.XBeanNamespaceHandler.parseBeanFromExtensionElement(XBeanNamespaceHandler.java:276)
        at org.apache.xbean.spring.context.v2c.XBeanNamespaceHandler.parse(XBeanNamespaceHandler.java:156)
        at org.apache.xbean.spring.context.v2.XBeanNamespaceHandler.parse(XBeanNamespaceHandler.java:49)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1338)
        at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1328)
        at org.apache.xbean.spring.context.v2.XBeanBeanDefinitionDocumentReader.parseBeanDefinitions(XBeanBeanDefinitionDocumentReader.java:84)
        at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
        at org.apache.xbean.spring.context.v2.XBeanXmlBeanDefinitionReader.registerBeanDefinitions(XBeanXmlBeanDefinitionReader.java:79)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:111)
        at org.apache.xbean.spring.context.ResourceXmlApplicationContext.loadBeanDefinitions(ResourceXmlApplicationContext.java:104)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
        at org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:64)
        at org.apache.xbean.spring.context.ResourceXmlApplicationContext.<init>(ResourceXmlApplicationContext.java:52)
        at org.apache.activemq.xbean.XBeanBrokerFactory$1.<init>(XBeanBrokerFactory.java:114)
        at org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:114)
        at org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:70)
        at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:71)
        at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:54)
        at org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:85)
        at jmstest.bundle.TestActivator.start(TestActivator.java:18)
        at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:629)
        at org.apache.felix.framework.Felix.activateBundle(Felix.java:1842)
        at org.apache.felix.framework.Felix.startBundle(Felix.java:1759)
        at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1163)
        at org.apache.felix.framework.StartLevelImpl.run(StartLevelImpl.java:264)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: org.apache.activemq.xbean.XBeanBrokerService not found by org.apache.xbean.spring [81]
        at org.apache.felix.framework.ModuleImpl.findClassOrResourceByDelegation(ModuleImpl.java:787)
        at org.apache.felix.framework.ModuleImpl.access$400(ModuleImpl.java:71)
        at org.apache.felix.framework.ModuleImpl$ModuleClassLoader.loadClass(ModuleImpl.java:1768)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.loadClass(XBeanQNameHelper.java:107)
        at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.getBeanInfo(XBeanQNameHelper.java:72)
        ... 36 more 
```

所有需要的包（activemq、activemq-spring、xbean-spring）都已加载并运行，我的包将它们全部放在`Import-Package`.

从独立 ActiveMQ 代理加载的相同配置文件可以正常工作。

我相信这是因为 xbean 无法从它不导入的包中访问类。有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T05:48:49.963

自己解决了这个问题，但它看起来像一个黑客。感谢有人告诉如果可能的话如何使它正确。

这个想法是用加载当前类的类替换默认类加载器（在我的例子中是捆绑激活器）：

```
ClassLoader c = Thread.currentThread().getContextClassLoader();
Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());

brokerService = BrokerFactory.createBroker("xbean:file:etc/config.xml");
brokerService.start();

Thread.currentThread().setContextClassLoader(c); 
```

XBean 在加载一个类时会尝试几个类加载器，包括线程上下文类加载器。当然，`getClass().getClassLoader()`加载器知道我的包的导入，因此 XBean 设法加载所有需要的类（假设它们在`Import-Package`标题中）。也许这对其他人也有帮助。

# spring - Spring MVC：如何在标有@RequestMapping 的方法中获取映射的URI

> ID：10547603
> 
> 赞同：0
> 
> 时间：2012-05-11T07:59:09.507
> 
> 标签：spring, spring-mvc

我目前正在开发一个 Spring MVC 应用程序，当我在 web.xml 文件中将所有传入 URL 映射到单个 DispatcherServlet 时，我想知道是否可以检索已有效映射的 URI。这是一个例子来说明我的担忧：

```
import static org.springframework.web.bind.annotation.RequestMethod.*;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class HomeController {

    @RequestMapping(method={GET})
    public String processAllRequest(){
        return "viewName";
    }
} 
```

由于我在 web.xml 中将 URL-MAPPING 定义为“/*”，所有传入的请求都将在我的控制器类中结束，如上所示。例如，以下两个请求都将由我的控制器中的 processAllRequest() 方法处理。

*   我的应用程序上下文/主页
*   myApplicationContext/注销

是否有可能以某种方式检索映射的 URI？也就是说，一旦我进入 processAllRequest()，我怎么知道它是被调用为 .../home 还是 .../logout？是否可以通过注入 HttpServletRequest 或另一个对象作为方法的参数来检索这种信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:27:59.523

如果你把它放在你的处理程序参数中， Spring 确实会注入`HttpServletRequest`，所以如果你愿意，你可以这样做。

但是如果你需要区分不同的 URL，只需将它们放在不同的处理程序中：

```
@Controller
public class HomeController {

    @RequestMapping(value="/home", method={GET})
    public String processHome(){
        return "viewName";
    }

    @RequestMapping(value="/login", method={GET})
    public String processLogin(){
        return "viewName";
    }
} 
```

web.xml 中的映射将所有请求转发到 spring servlet。您仍然可以编写任意数量`@Controller`的 s，并使用类级别和方法级别`@RequestMapping`将应用程序拆分为逻辑组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T20:26:17.220

我可能以一种模棱两可的方式提出了我的问题，但我正在寻找的是路径变量。所以我的问题就这样解决了：

@Controller 公共类 HomeController {

```
@RequestMapping(value="/{uri}", method={GET})
public String processMappedUri(@PathVariable uri){
    return uri;
} 
```

}

使用此解决方案，每当我请求以下请求时，我的 processMappedUri() 方法中的 uri 参数将保存变量值：

*   myApplicationContext/home --> uri = home
*   myApplicationContext/logout --> uri = logout

# iphone - 多人加入请求

> ID：10547609
> 
> 赞同：0
> 
> 时间：2012-05-11T07:59:33.220
> 
> 标签：iphone, ios, game-center, multiplayer

我正在开发一款将与 Game Center 集成的多人 iOS 游戏。我想知道是否可以向其他玩家发送邀请加入游戏？我阅读了描述如何加入比赛的文件，但我的案例游戏玩家根本不是比赛 - 它只是一个每个人都可以加入的世界。我可能可以将世界呈现为一场托管比赛，但在这种情况下，我对每场比赛最多 16 名球员的限制并不满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:01:49.953

您只能向您的游戏中心好友发送邀请。另外，我在某处读到，仅允许游戏使用游戏中心功能，违反此规定的应用程序将被拒绝。

# c# - 将数据从 DataTable 插入到 Excel 工作表中

> ID：10547619
> 
> 赞同：1
> 
> 时间：2012-05-11T08:00:06.997
> 
> 标签：c#, asp.net

我正在将数据库中的数据提取到 a 中`DataTable`，并通过将其绑定到`Repeater`控件来显示它。现在我需要将相同的数据复制到 Excel 电子表格中。我如何使用它`DataTable`来填充电子表格。请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T08:07:52.123

我建议创建一个真正的 excel 文件而不是 html 表（很多人都这样做）。因此，我可以热烈推荐[`EPPlus`](http://epplus.codeplex.com/)（[LGPL 许可证](http://epplus.codeplex.com/license)）。

然后很简单。假设您有一个按钮`BtnExportExcel`：

```
protected void BtnExcelExport_Click(object sender, System.Web.UI.ImageClickEventArgs e)
{
    try {
        var pck = new OfficeOpenXml.ExcelPackage();
        var ws = pck.Workbook.Worksheets.Add("Name of the Worksheet");
        // get your DataTable
        var tbl = GetDataTable();
        ws.Cells["A1"].LoadFromDataTable(tbl, true, OfficeOpenXml.Table.TableStyles.Medium6);
        foreach (DataColumn col in tbl.Columns) {
            if (col.DataType == typeof(System.DateTime)) {
                var colNumber = col.Ordinal + 1;
                var range = ws.Cells[1, colNumber, tbl.Rows.Count, colNumber];
                // apply the correct date format, here for germany
                range.Style.Numberformat.Format = "dd.MM.yyyy";
            }
        }
        var dataRange = ws.Cells[ws.Dimension.Address.ToString()];
        dataRange.AutoFitColumns();

        Response.Clear();
        Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
        Response.AddHeader("content-disposition", "attachment;  filename=NameOfExcelFile.xlsx");
        Response.BinaryWrite(pck.GetAsByteArray());
    } catch (Exception ex) {
        // log exception
        throw;
    } 
    Response.End();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:07:19.007

您可以创建一个 .csv 文件。这既快速又简单，并且可以在 excel 中打开它。

这篇文章与你有关：

[将 DataTable 转换为 CSV 流](https://stackoverflow.com/questions/888181/convert-datatable-to-csv-stream)

# core-plot - 如何更改 CPTXYGraph 的主题

> ID：10547620
> 
> 赞同：0
> 
> 时间：2012-05-11T08:00:13.430
> 
> 标签：core-plot

我正在尝试更改我的图表的主题。

我的代码是：

```
graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
graph.plotAreaFrame.borderLineStyle = nil; 
```

我认为这样做会使图形的边界消失。但它没有。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T20:10:08.293

图形的几个部分可以有边界线。试试这些：

```
graph.borderLineStyle = nil;
graph.plotAreaFrame.plotArea.borderLineStyle = nil; 
```

# ruby-on-rails - 如何在 Rails 3 应用程序中配置 memprof？

> ID：10547621
> 
> 赞同：0
> 
> 时间：2012-05-11T08:00:15.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memory-leaks, memprof

（首先我不会说我希望的英语，我希望你原谅我的错误：S）

我是 Ruby 和 Rails 的新手，我非常困惑和沮丧，因为我的应用程序在生产模式下运行时出现内存泄漏。

我的服务器正在关闭我的应用程序，因为它达到了 800MB 的内存：O 我用谷歌搜索过它，我发现一种解决方案是使用一种工具来查找泄漏：Bleackhouse（我还没有设法安装应用程序）或 memprof（安装没问题）。

我安装 memprof：

```
$ gem install memprof 
```

安装后，我可以将它与“irb”一起使用并对其进行测试，但我不可能让它与我的 Rails 3 应用程序一起运行，我知道这是因为我对 Rails 非常陌生 :(

我已经阅读了太多关于 memprof 的网页、教程和幻灯片，但我找不到任何解释如何在 Rails 中安装它的参考资料。

我将这些行添加到我的 config/environment.rb

```
require `gem which memprof/signal`.strip 
```

配置/环境.rb：

```
# -*- encoding : utf-8 -*-

require `gem which memprof/signal`.strip

# Load the rails application
require File.expand_path('../application', __FILE__)

# Initialize the rails application
NameApp::Application.initialize! 
```

但是当我运行我的应用程序（Apache + Phusion Passenger）时，它会抛出一个错误：

```
"Ruby (Rack) application could not be started"

A source file that the application requires, is missing.
It is possible that you didn't upload your application files correctly. Please check whether all your application files are uploaded.
A required library may not installed. Please install all libraries that this application requires.

Error message:
no such file to load --

/path/to/my/app/config/environment.rb   3   in `require'
... 
```

我真的不知道为什么我可以在 irb 中运行 memprof，但我不能在我的 Rails 应用程序中使用它。

* * *

**编辑1：**

我做了 Frederick Cheung 给出的建议，现在我让它运行了，但我不知道如何启动它并将数据写入 json 文件：S

如果有人可以帮助我解决这个问题，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:56:50.330

使用信号内容，您只需要发送一个 URG 信号（kill -s URG pid），它将写入 /tmp 中的文件

您还可以使用 memprof 包含的中间件（[请参阅文档](https://github.com/ice799/memprof)

有两个中间件，允许您使用`Memprof.track`或包装每个请求`Memprof.trace_request`。您可以通过将其放入初始化程序（在 config/initializers 中）来打开它们

```
require 'memprof/middleware'
config.middlewares.use(Memprof::Middleware)

require 'memprof/tracer'
config.middleware.insert(0, Memprof::Tracer) 
```

# jquery - 触发更改事件无论如何使用jquery我可以在页面加载时触发选择框上的更改事件并选择特定选项。也是通过在将函数绑定到事件后添加触发器来执行的函数。我试图输出这样的东西 <select class="check"><option value="one">one</option> <option value="two">two</option></select> $(function( ){ $('.check').tr

> ID：10547622
> 
> 赞同：171
> 
> 时间：2012-05-11T08:00:19.060
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：332
> 
> 时间：2012-05-11T08:04:07.120

用于`val()`更改*值*（不是文本）并`trigger()`手动触发事件。

必须在触发器之前声明更改事件处理程序。

[这是一个示例](http://jsfiddle.net/v7QWd/3/)

```
$('.check').change(function(){
  var data= $(this).val();
  alert(data);            
});

$('.check')
    .val('two')
    .trigger('change'); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-11T08:02:18.977

要选择一个选项，`.val('value-of-the-option')`请在选择元素上使用。要触发更改元素，请使用`.change()`或`.trigger('change')`。

您的代码中的问题是逗号而不是点，`$('.check'),trigger('change');`以及您在绑定事件处理程序之前调用它的事实。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-03-01T13:05:17.533

```
$('#edit_user_details').find('select').trigger('change'); 
```

它将更改**选择**html 标记下拉项`id="edit_user_details"`。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2019-01-10T10:21:22.550

对于那些被 jQuery 触发器处理程序阻止的人来说，另一个可行的解决方案是，在本机事件上触发的剂量将如下所示（100% 工作）：

```
var sortBySelect = document.querySelector("select.your-class"); 
sortBySelect.value = "new value"; 
sortBySelect.dispatchEvent(new Event("change")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-13T09:09:58.133

给出选项标签值的链接

```
<select size="1" name="links" onchange="window.location.href=this.value;">
   <option value="http://www.google.com">Google</option>
   <option value="http://www.yahoo.com">Yahoo</option>
</select> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-29T10:37:01.907

根据 Mohamed23gharbi 的回答：

```
function change(selector, value) {
    var sortBySelect = document.querySelector(selector);
    sortBySelect.value = value;
    sortBySelect.dispatchEvent(new Event("change"));
}

function click(selector) {
    var sortBySelect = document.querySelector(selector);
    sortBySelect.dispatchEvent(new Event("click"));
}

function test() {
    change("select#MySelect", 19);
    click("button#MyButton");
    click("a#MyLink");
} 
```

在我的例子中，元素是由 vue 创建的，这是唯一可行的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-13T09:15:55.233

如果您想做一些检查，请使用这种方式

```
 <select size="1" name="links" onchange="functionToTriggerClick(this.value)">
    <option value="">Select a Search Engine</option>        
    <option value="http://www.google.com">Google</option>
    <option value="http://www.yahoo.com">Yahoo</option>
</select>

<script>

   function functionToTriggerClick(link) {

     if(link != ''){
        window.location.href=link;
        }
    }  

</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-20T10:21:01.370

您可以尝试以下代码来解决您的问题。

默认情况下，第一个选项选择：

```
jQuery('.select').find('option')[0].selected=true; 
```

# jquery - jQuery 自动完成多值字段，如 Google 搜索字段

> ID：10547625
> 
> 赞同：0
> 
> 时间：2012-05-11T08:00:56.713
> 
> 标签：jquery, autocomplete

我想为我的网站的搜索功能实现一个 jQuery 建议多值字段，没有逗号分隔的值，但像谷歌那样用空格分隔的值。

该字段将获得完成用户所写单词的建议：搜索多值字段。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:04:55.820

你的意思是这样的： http: [//aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)

# iphone - 这是否包含加密？

> ID：10547626
> 
> 赞同：0
> 
> 时间：2012-05-11T08:01:02.400
> 
> 标签：iphone, encryption

我对 iPhone 应用程序中的加密是什么感到有点困惑……这是我的一个应用程序的一部分，我想确保它不包含加密。有人可以帮我解决这个问题吗？

```
- (void)embedYouTube:(NSString *)urlString frame:(CGRect)frame {
    NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";
    NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width, frame.size.height];
    UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:html baseURL:nil];
    [self.view addSubview:videoView];
}

#pragma mark - Twitter Interactions
-(void)getTweet
{
    // Specify the URL and parameters
    NSURL *url = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/user_timeline.json?screen_name=youdabrogames&include_rts=1"];
    NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:@"1", @"count", nil];
    // Create the TweetRequest object
    TWRequest *tweetRequest = [[TWRequest alloc] initWithURL:url parameters:parameters requestMethod:TWRequestMethodGET];
    [tweetRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        // Request completed and we have data
        // Output it!
        NSError *jsonError = nil;
        id timelineData = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&jsonError];
        if(timelineData == NULL) {
            // There was an error changing the data to a Foundation Object,
            // so we'll output a bunch of debug information.
            NSString *myString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
            NSLog(@"\n\nConversion to object failed.");
            NSLog(@"HTTP Response code: %d", [urlResponse statusCode]);
            NSLog(@"Output from server: %@", myString);
            NSLog(@"JSON Error: %@\n\n", [jsonError localizedDescription]);
            abort();
            // TODO: Show a graceful error message here
        }
        NSDictionary *timelineDict = (NSDictionary*) timelineData;
        NSLog(@"\n\nConversion succeeded!");
        NSLog(@"%@\n\n", timelineDict);
        tweetLabel.text = @"";
        tweetLabel.text = [[(NSArray*)timelineDict objectAtIndex:0] objectForKey:@"text"];
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:57:44.057

我看到[JSON](http://www.json.org/)；我看不到这个级别的加密。

# android - 如何在android中创建一个二维码阅读器？（请逐步探索）

> ID：10547629
> 
> 赞同：1
> 
> 时间：2012-05-11T08:01:12.900
> 
> 标签：android

你好朋友，我想为安卓开发一个二维码阅读器应用程序，这对我来说是第一次，所以我不知道开发二维码阅读器的起点在哪里。所以请任何人探索发展的方式（逐步指导）。请帮帮我......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-11T08:06:41.987

干得好：

`Step 1\. Read http://developer.android.com/reference/packages.html`

`Step 1a. Google for QR reader library for android`

`Step 2\. Program App`

`Step 3\. Post code you are having trouble with to StackOverflow`

`Step 4\. Release app to market and make lots of money`

小丑:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T08:04:40.597

你看过谷歌开发的这个库：[Zxing](http://code.google.com/p/zxing/)吗？我已经使用了一个 Android 项目，它工作得很好。

# java - 通过谓词划分集合的库方法

> ID：10547631
> 
> 赞同：28
> 
> 时间：2012-05-11T08:01:18.190
> 
> 标签：java, collections, guava

我有一个对象集合，我想将它们划分为两个集合，其中一个通过谓词，另一个通过谓词失败。我希望有一种[Guava](http://code.google.com/p/guava-libraries/)方法可以做到这一点，但他们最接近的是[filter](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Collections2.html#filter-java.util.Collection-com.google.common.base.Predicate-)，它不会给我其他集合。

我会想象该方法的签名将是这样的：

```
public static <E> Pair<Collection<E>, Collection<E>> partition(Collection<E> source, Predicate<? super E> predicate) 
```

我意识到这对自己进行编码非常快，但我正在寻找一种现有的库方法来满足我的需求。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-11T08:14:19.550

使用番石榴的[`Multimaps.index`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Multimaps.html#index-java.lang.Iterable-com.google.common.base.Function-).

这是一个示例，它将单词列表分成两部分：长度大于 3 的部分和不长度的部分。

```
List<String> words = Arrays.asList("foo", "bar", "hello", "world");

ImmutableListMultimap<Boolean, String> partitionedMap = Multimaps.index(words, new Function<String, Boolean>(){
    @Override
    public Boolean apply(String input) {
        return input.length() > 3;
    }
});
System.out.println(partitionedMap); 
```

印刷：

```
false=[foo, bar], true=[hello, world] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-06-23T09:18:04.360

使用新的 java 8 功能（[流](https://docs.oracle.com/javase/tutorial/collections/streams/)和[lambda epressions](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)），您可以编写：

```
List<String> words = Arrays.asList("foo", "bar", "hello", "world");

Map<Boolean, List<String>> partitionedMap =
        words.stream().collect(
                Collectors.partitioningBy(word -> word.length() > 3));

System.out.println(partitionedMap); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-15T16:54:47.357

如果您使用的是[Eclipse Collections](http://www.eclipse.org/collections/)（以前称为 GS Collections），则可以`partition`在所有`RichIterables`.

```
MutableList<Integer> integers = FastList.newListWith(-3, -2, -1, 0, 1, 2, 3);
PartitionMutableList<Integer> result = integers.partition(IntegerPredicates.isEven());
Assert.assertEquals(FastList.newListWith(-2, 0, 2), result.getSelected());
Assert.assertEquals(FastList.newListWith(-3, -1, 1, 3), result.getRejected()); 
```

使用自定义类型 ,`PartitionMutableList`而不是的原因`Pair`是允许 getSelected() 和 getRejected() 的协变返回类型。例如，对 a 进行分区`MutableCollection`会给出两个集合而不是列表。

```
MutableCollection<Integer> integers = ...;
PartitionMutableCollection<Integer> result = integers.partition(IntegerPredicates.isEven());
MutableCollection<Integer> selected = result.getSelected(); 
```

如果您的集合不是`RichIterable`，您仍然可以使用 Eclipse Collections 中的静态实用程序。

```
PartitionIterable<Integer> partitionIterable = Iterate.partition(integers, IntegerPredicates.isEven());
PartitionMutableList<Integer> partitionList = ListIterate.partition(integers, IntegerPredicates.isEven()); 
```

**注意：**我是 Eclipse Collections 的提交者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-03T15:32:57.097

对于新的 Java 12 来说，这似乎是一份不错的工作`Collectors::teeing`：

```
var dividedStrings = Stream.of("foo", "hello", "bar", "world")
            .collect(Collectors.teeing(
                    Collectors.filtering(s -> s.length() <= 3, Collectors.toList()),
                    Collectors.filtering(s -> s.length() > 3, Collectors.toList()),
                    List::of
            ));
System.out.println(dividedStrings.get(0)); //[foo, bar]
System.out.println(dividedStrings.get(1)); //[hello, world] 
```

[您可以在此处](https://adrian.md/2021/05/09/teeing-collector/)找到更多示例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-28T09:04:35.753

[Apache Commons Collections](https://commons.apache.org/proper/commons-collections/) 提供了基于一个或多个谓词对对象[`IterableUtils`](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/IterableUtils.html)进行分区的方法。`Iterable`（寻找`partition(...)`方法。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-01T08:45:43.660

请注意，在有限的一组预先知道的分区键的情况下，对于每个分区键再次迭代集合可能会更有效，在每次迭代中跳过所有不同的键项。因为这不会为垃圾收集器分配许多新对象。

```
LocalDate start = LocalDate.now().with(TemporalAdjusters.firstDayOfYear());
LocalDate endExclusive = LocalDate.now().plusYears(1);
List<LocalDate> daysCollection = Stream.iterate(start, date -> date.plusDays(1))
        .limit(ChronoUnit.DAYS.between(start, endExclusive))
        .collect(Collectors.toList());
List<DayOfWeek> keys = Arrays.asList(DayOfWeek.values());

for (DayOfWeek key : keys) {
    int count = 0;
    for (LocalDate day : daysCollection) {
        if (key == day.getDayOfWeek()) {
            ++count;
        }
    }
    System.out.println(String.format("%s: %d days in this year", key, count));
} 
```

另一种对 GC 友好且封装的方法是使用 Java 8 过滤原始集合周围的包装流：

```
List<AbstractMap.SimpleEntry<DayOfWeek, Stream<LocalDate>>> partitions = keys.stream().map(
        key -> new AbstractMap.SimpleEntry<>(
                key, daysCollection.stream().filter(
                    day -> key == day.getDayOfWeek())))
        .collect(Collectors.toList());
// partitions could be passed somewhere before being used
partitions.forEach(pair -> System.out.println(
        String.format("%s: %d days in this year", pair.getKey(), pair.getValue().count()))); 
```

两个片段都打印了这个：

```
MONDAY: 57 days in this year
TUESDAY: 57 days in this year
WEDNESDAY: 57 days in this year
THURSDAY: 57 days in this year
FRIDAY: 56 days in this year
SATURDAY: 56 days in this year
SUNDAY: 56 days in this year 
```

# c# - 如何将 SQL 语句作为 DataTable 接收

> ID：10547638
> 
> 赞同：1
> 
> 时间：2012-05-11T08:01:42.027
> 
> 标签：c#, sql, datatable

我有以下代码：

```
public static DataTable GetDataTable(string sConnStr, string sTable)
{
    DataTable dt = new DataTable();

    SqlConnection sqlConn10 = new SqlConnection(sConnStr);
    sqlConn10.Open();
    SqlCommand sqlComm10 = new SqlCommand("SELECT * FROM " + sTable, sqlConn10);
    SqlDataReader myReader10 = sqlComm10.ExecuteReader();

    try
    {
        while (myReader10.Read())
        {
            // Code needed
        }
    }
    catch
    {
        myReader10.Close();
        sqlConn10.Close();
    }

    return dt;
} 
```

问题是，我不知道怎么继续。我想要的只是从 SQL 语句中获取包含数据的 DataTable。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:06:16.940

您可以使用数据适配器：

```
public static DataTable GetDataTable(string sConnStr, string sTable)
{
    using (SqlConnection sqlConn10 = new SqlConnection(sConnStr))
    using (SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM EmployeeIDs", sqlConn10))
    {
        sqlConn10.Open();
        DataTable dt = new DataTable();
        adapter.Fill(dt);
        return dt;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:03:22.453

不要使用 a `SqlDataReader`，使用 a `SqlDataAdapter`。A`DataReader`用于快速、仅向前的操作，而`DataAdapter`用于基于集合的操作。

请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)

有关简单示例，请参见[http://www.dotnetperls.com/sqldataadapter](http://www.dotnetperls.com/sqldataadapter)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:04:17.190

```
DataAdapter.Fill(DataTable, mySqlQuery); 
```

[http://msdn.microsoft.com/en-us/library/497b1k4t.aspx](http://msdn.microsoft.com/en-us/library/497b1k4t.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:08:21.997

只需这样做：

```
SqlDataReader myReader10 = sqlComm10.ExecuteReader();
dt.Load(myReader10); 
```

和`return dt;`

所以你会是这样的：

```
 try
    {
        ~~while (myReader10.Read())~~
         ~~{~~
            dt.Load(myReader10);
         ~~}~~
    }
    catch
    {
        myReader10.Close();
        sqlConn10.Close();
    }
return dt; 
```

**最简单的方法是使用 DataAdapter 填充数据表。**

```
 public static DataTable GetDataTable(string sConnStr, string sTable)
{
    using (SqlConnection sqlConn10 = new SqlConnection(sConnStr))
    using (SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM " + sTable, sqlConn10))
    {
        sqlConn10.Open();
        DataTable dt = new DataTable();
        adapter.Fill(dt);
        return dt;
    }
} 
```

*// 你应该使用最佳实践，在工作完成后使用 using 语句来处理连接和其他对象。*

```
 public static DataTable GetDataTable(string sConnStr, string sTable)
{    
   DataTable dt = new DataTable();
   try
   {
       using (SqlConnection sqlConn10 = new SqlConnection(sConnStr))
       using (SqlCommand sqlComm10 = new SqlCommand("SELECT * FROM " + sTable, sqlConn10))
       {
           sqlConn10.Open();
           using (SqlDataReader myReader10 = sqlComm10.ExecuteReader())
           {                     
               dt.Load(myReader10);
           }
       }
   }
   catch(Exception ex)
   {
   }
   return dt;
} 
```

参考：[在我处理 SqlDataReader 数据时将其放入 DataTable](https://stackoverflow.com/questions/9534718/put-sqldatareader-data-into-a-datatable-while-i-process-it)

# php - PHP '->' 变成 '.'

> ID：10547641
> 
> 赞同：0
> 
> 时间：2012-05-11T08:02:17.137
> 
> 标签：php, object, operator-keyword

是否可以将对象运算符“->”更改为“.”，因此访问类方法看起来像这样：`$user.add()`而不是`$user->add()`?

我想这不是一个非常聪明的问题，但是您必须同意，当您键入“->”时，您有两个符号，其中一个您必须按 SHIFT，这比“.”要复杂得多。点看起来更漂亮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T08:03:27.323

不，那是不可能的。可能即使通过修改语言的语法也会非常困难，因为它可能会导致歧义 -`$foo.bar()`然后可能是方法调用或连接`$foo`以及`bar()`.

如果您不想，请使用不同的语言`->`。我的建议是 python - 无论如何它比 PHP 要聪明得多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T08:04:07.557

可以通过更改代码解析器来做到这一点。您当然需要仔细测试，然后重新编译 PHP。您不能在 PHP 中做到这一点，只能通过重写 C 源代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-11T08:04:28.800

我猜这是不可能的，因为`.`它被用作连接运算符。如果每个人都可以改变这些东西，我们会在哪里，我猜这种语言会非常不稳定。

所以：不。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-11T08:03:46.823

不，你不能那样做，它来自你无法改变的语言的*核心*。AFAIK 某些其他语言也使用它，PHP 遵守约定。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-11T08:03:42.797

快速回答：不，这不可能！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-28T01:13:35.397

基本上 PHP 是开源的，因此您可以获取源代码并根据需要进行修改。但实际上，由于以下几个原因，这样的修改是一个坏主意：

*   请注意，点是一个 php 运算符！默认情况下，$foo.bar() 将被解释为变量 $foo 和函数 bar() 的返回类型之间的连接，因此有必要将点运算符更改为其他内容，也许是一个加号用其他语言处理
*   由于项目或其他原因可能想要检查您的代码或与您合作的所有其他 PHP 开发人员都会因为这些更改而感到困惑
*   在每个 PHP 更新中，您必须将更改应用到新版本上，并且可能会编辑您的更改，因为它们不再与新版本兼容 - 两者都会导致额外工作，尤其是在安全更新上，这很糟糕
*   也许你将来会成为一名 PHP 开发人员，然后你会因为在一家使用默认语法的公司工作而感到困惑

您的主要想法是将这两个字符替换为一个还不错，但是您会看到这些更改会导致一些其他问题，这些问题与您通过此修改保存的时间无关。我自己是一名 PHP 开发人员，我可以告诉你，一开始使用 -> 代替点会让你感到困惑，尤其是当你来自使用点的其他语言（如 Java 或 C#）时。

But after writing some code you get familiar with these type of syntax and it shouldn't be a problem any more. You can put your forefinger of your right hand on the '-' key, your little finger on the shift key right of the minus and the little finger of your right hand to the '|' key. Then it will not cause you much overhead to type a -> instead of a dot :)

# nhibernate - 流利的nhibernate中的聚合查询

> ID：10547651
> 
> 赞同：1
> 
> 时间：2012-05-11T08:02:53.563
> 
> 标签：nhibernate

```
select T.Id, count(Th.ampount)
from TH, T
where Th.Tid= T.id
group by T.Id 
```

如何使用流利的 nhibernate 编写上述查询。我不想使用 CreateSQLQuery()。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T13:04:21.873

```
session.QueryOver<TH>()
    .JoinAlias(th => th.Ts, () => tAlias)
    .SelectList(list => list
        .SelectGroup(th => th.Id)
        .SelectCount(() => tAlias.amount)
        // or did you mean
        .SelectSum(() => tAlias.amount)
    )
    .List<object[]>(); 
```

# php - 将值作为新数组中的键返回

> ID：10547652
> 
> 赞同：0
> 
> 时间：2012-05-11T08:03:00.350
> 
> 标签：php, arrays

我有一个 PHP 数组。

```
array
  0 => int 1
  1 => int 13
  2 => int 16
  3 => int 17
  4 => int 18 
```

我想要返回的是一个像这样的新数组：

```
array(1, 13, 16, 17, 18) 
```

IE。这些值现在是新数组的键

我试过`array_flip`了，但我需要删除这些值。我用谷歌搜索了一下，似乎没有任何相关的东西。

如果有人能指出我正确的方向或提供更好的解决方案，将不胜感激。

编辑：

`array_flip`返回：

```
array
  1 => int 0
  13 => int 1
  16 => int 2
  17 => int 3
  18 => int 4 
```

我想要的只是：`array(1, 13, 16, 17, 18)`。

我理解错了吗？我想要的输出实际上在每个键上都有空值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:13:35.197

你似乎不明白数组是如何工作的。每个包含至少一个值的数组总是有一个键和一个值。在这种情况下：

```
array(1, 13, 16, 17, 18) 
```

值是 1,13,16,... 并且键是由 PHP 隐式设置的。在这种情况下，值 1 具有键 0，值 13 具有键 1，依此类推。

第一个数组和第二个数组之间的唯一区别是，在第一个数组中，您明确定义了键。简而言之，数组是相同的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-11T08:22:36.057

你可以做一个关联数组：

```
$hello_im_the_new_array=Array();
foreach $array_with_keys as $im_a_key_to_other_array {
         $hello_im_the_new_array[$im_a_key_to_other_array]=$im_the_content_of_that_key_in_the_new_array
} 
```

或者如果您正在寻找读取其他数组的值：

```
foreach $array_with_keys as $im_a_key_to_other_array {
    echo $the_array_with_values[$im_a_key_to_other_array];
} 
```

如果你不是在寻找这个......我不明白你的问题

# c# - 网页的维护状态

> ID：10547654
> 
> 赞同：0
> 
> 时间：2012-05-11T08:03:09.443
> 
> 标签：c#, asp.net, .net-4.0, viewstate

在我的网络应用程序中，我有一个 GridView 和其他一些控件。用户可以对网格视图进行排序和过滤。他们还允许单击链接并转到其他页面。然后他们也可以转到其他更多页面。但是当他们回到第一个 gridview 页面时。网格与他们离开页面的内容相同。例如分页、排序等。

我找到了一个解决方案。但我不是很明白。 [http://www.codeproject.com/Articles/7655/Persisting-the-state-of-a-web-page](http://www.codeproject.com/Articles/7655/Persisting-the-state-of-a-web-page)

这是我的编码 WebForm1.aspx

```
 protected void Button2_Click(object sender, EventArgs e)
    {

                    PersistentStatePage abc = new PersistentStatePage();
        abc.RedirectSavingPageState("WebForm2.aspx");
    } 
```

WebForm2.aspx

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        PersistentStatePage.RedirectToSavedPage("WebForm1.aspx", true);
    } 
```

谁能给我举个例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:07:08.993

那篇 codeproject 文章并不真正适用于这种情况。它是将视图状态保存到安全的服务器位置，而不是将其全部发送给隐藏的输入字段中的用户，这会导致大量膨胀。

解决这个问题的最好方法是会话。

创建一个自定义对象来存储您想要保留的信息并将其放入会话中。查看以下关于使用会话的文章[http://asp.net-tutorials.com/state/sessions/](http://asp.net-tutorials.com/state/sessions/)

这样您就不必担心在所有其他页面中传递详细信息。

# ubuntu - 构建验证：在 pkg-config 搜索路径中找不到包 libval a-0.12

> ID：10547655
> 
> 赞同：1
> 
> 时间：2012-05-11T08:03:11.043
> 
> 标签：ubuntu, vala, waf

我正在尝试构建最新版本的[valide](https://launchpad.net/valide) (0.7.1)

我已经在我的机器（Ubuntu 10.0.4 LTS）上成功构建了 VALA（v 0.17.0）。当我跑

`./waf configure`在 valide src 目录中，我得到以下输出：

```
Checking for program gcc or cc           : /usr/bin/gcc 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for gcc                         : ok  
Checking for program valac               : /usr/local/bin/valac 
Checking for gobject-2.0                 : yes 
Checking for gthread-2.0                 : yes 
Checking for program version valac >= 0.1.6 : ok 0.17.0 
Checking for program msgfmt                 : /usr/bin/msgfmt 
Checking for program intltool-merge         : /usr/bin/intltool-merge 
Checking for header locale.h                : yes 
Checking for program valadoc                : not found 
Checking for glib-2.0 >= 2.18.0             : yes 
Checking for gio-2.0 >= 2.18.0              : yes 
Checking for gobject-2.0 >= 2.18.0          : yes 
Checking for gmodule-2.0 >= 2.18.0          : yes 
Checking for gtk+-2.0 >= 2.18.0             : yes 
Checking for libxml-2.0 >= 2.5.0            : yes 
Checking for gtksourceview-2.0 >= 2.10.0    : yes 
Checking for libvala-0.12 >= 0.12.0         : Package libvala-0.12 was not found in the pkg-config search path.
Perhaps you should add the directory containing `libvala-0.12.pc'
to the PKG_CONFIG_PATH environment variable
No package 'libvala-0.12' found 

/path/to/valide-0.7.1/wscript:53: error: the configuration failed (see '/path/to/valide-0.7.1/_build_/config.log') 
```

我在我的系统上检查了相关的 .pc 文件

```
me@yourbox:~/path/to/valide-0.7.1$ find ../vala/ -name 'libvala*.pc' -type f
../vala/vala-0.17.0/libvala-0.18.pc
../vala/vala-0.17.0/libvala.pc 
```

然后我按如下方式导出了相关的 ENV VAR：

```
export PKG_CONFIG_PATH=/path/to/vala/vala-0.17.0 
```

然后我运行`./waf configure`。令我沮丧的是，我得到了与之前发布的完全相同的输出。

在 Ubuntu 10.0.4 LTS 上构建验证需要解决什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:05:31.933

`pkg-config`正在寻找`libvala-0.12.pc`。你有`libvala-0.18.pc`. 这两个文件描述了 libval​​a API 的不同版本，并且可能不兼容。您需要将 Valide 移植到新的 API，或者降级 Vala（0.16 应该可以。）

# python - 如何为存储在数组中的函数提供常量和动态参数

> ID：10547659
> 
> 赞同：1
> 
> 时间：2012-05-11T08:03:38.793
> 
> 标签：python, arrays

我使用一个数组来存储需要连续调用的函数：

```
def do_xslt(xsl, xml):
    newxml = dosomethingwithit(xsl,xml)
    return newxml

TRANSFORM_PIPELINE = [
    do_xslt('pass1.xsl'),
    do_xslt('pass2.xsl'),
    do_xslt('pass3.xsl'),
] 
```

我现在想做的是`TRANSFORM_PIPELINE`用给定的参数和一个动态的参数来调用。

我脑子里有这样的东西，应该循环调用`do_xslt('passX.xsl', xml)`

```
for transform in TRANSFORM_PIPELINE:
    xml = transform(xml) 
```

这种做法当然是错误的。但是如何在 Python 中使用正确的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:06:26.103

用于[`functools.partial()`](http://docs.python.org/library/functools.html#functools.partial)部分*应用*函数：

```
from functools import partial
TRANSFORM_PIPELINE = [
    partial(do_xslt, 'pass1.xsl'),
    partial(do_xslt, 'pass2.xsl'),
    partial(do_xslt, 'pass3.xsl')
] 
```

调用返回的函数`partial()`将调用`do_xslt('pass1.xsl', *args, **kwargs)`并作为传递给新函数的参数`*args`。`**kwargs`

演示：

```
>>> def do_xslt(xsl, xml):
...     print 'do_xslt(%r, %r)' % (xsl, xml)
...     return xml + '*' + xsl
...
>>> from functools import partial
>>> TRANSFORM_PIPELINE = [
...     partial(do_xslt, 'pass1.xsl'),
...     partial(do_xslt, 'pass2.xsl'),
...     partial(do_xslt, 'pass3.xsl')
... ]
>>> x = 'xml is lame'
>>> for transform in TRANSFORM_PIPELINE:
...     x = transform(x)
...     print x
...
do_xslt('pass1.xsl', 'xml is lame')
xml is lame*pass1.xsl
do_xslt('pass2.xsl', 'xml is lame*pass1.xsl')
xml is lame*pass1.xsl*pass2.xsl
do_xslt('pass3.xsl', 'xml is lame*pass1.xsl*pass2.xsl')
xml is lame*pass1.xsl*pass2.xsl*pass3.xsl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:06:58.930

使用`functools.partial()`- [http://docs.python.org/library/functools.html#functools.partial](http://docs.python.org/library/functools.html#functools.partial)

```
TRANSFORM_PIPELINE = [
    functools.partial(do_xslt, 'pass1.xsl'),
    functools.partial(do_xslt, 'pass2.xsl'),
    functools.partial(do_xslt, 'pass3.xsl'),
] 
```

或者，您也可以像这样使用闭包：

```
def do_xslt(xsl):
    def inner(xml):
        newxml = dosomethingwithit(xsl,xml)
        return newxml
    return inner 
```

这样，您可以完全按照现在的方式保留 TRANSFORM_PIPELINE。

# php - 安装 SonataNewsBundle

> ID：10547660
> 
> 赞同：0
> 
> 时间：2012-05-11T08:03:42.410
> 
> 标签：php, symfony, symfony-sonata

我学习 Symfony 2。我想有 SonataAdminBundle 的例子。我发现：

[http://sonata-project.org/bundles/news/2-0/doc/reference/installation.html](http://sonata-project.org/bundles/news/2-0/doc/reference/installation.html)

但这还不是第一点。我发现：

```
[SonataAdminBundle]
    git=http://github.com/sonata-project/SonataAdminBundle.git
    target=/bundles/Sonata/AdminBundle

[SonataBlockBundle]
    git=http://github.com/sonata-project/SonataBlockBundle.git
    target=/bundles/Sonata/BlockBundle

[SonataCacheBundle]
    git=http://github.com/sonata-project/SonataCacheBundle.git
    target=/bundles/Sonata/CacheBundle

[SonatajQueryBundle]
    git=http://github.com/sonata-project/SonatajQueryBundle.git
    target=/bundles/Sonata/jQueryBundle

[SonataDoctrineORMAdminBundle]
    git=http://github.com/sonata-project/SonataDoctrineORMAdminBundle.git
    target=/bundles/Sonata/DoctrineORMAdminBundle

[KnpMenuBundle]
    git=http://github.com/KnpLabs/KnpMenuBundle.git
    target=/bundles/Knp/Bundle/MenuBundle

[KnpMenu]
    git=http://github.com/KnpLabs/KnpMenu.git
    target=/knp/menu

[Exporter]
    git=http://github.com/sonata-project/exporter.git
    target=/exporter

[SonataNewsBundle]
    git=http://github.com/sonata-project/SonataNewsBundle.git
    target=/bundles/Sonata/NewsBundle 
```

并运行**bin/install 供应商。**. 安装正确。Id 将行添加到 AppKernel 并自动加载，如果我运行：

```
php app/console sonata:easy-extends:generate SonataNewsBundle 
```

我有错误：

> [InvalidArgumentException]
> 包“ApplicationSonataNewsBundle”不存在或未启用。

所以我补充说：

```
new Application\Sonata\NewsBundle\ApplicationSonataNewsBundle(), 
```

并运行

```
php app/console sonata:easy-extends:generate SonataNewsBundle 
```

然后我有错误：

> PHP 致命错误：在第 29 行的 /home/lanox06/Projects/sym2/app/AppKernel.php 中找不到类 'Application\Sonata\NewsBundle\ApplicationSonataNewsBundle'

我怎么能做这个？我想测试这些应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:27:46.633

您应该将`./app/Application`文件夹从目录`./app`移至`./src`目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T19:38:10.303

另一种解决方案是添加 --dest=src 选项，如下所示：

```
php app/console sonata:easy-extends:generate --dest=src SonataNewsBundle 
```

# php - 新的会话登录脚本在 PHP 中不起作用

> ID：10547668
> 
> 赞同：1
> 
> 时间：2012-05-11T08:04:14.787
> 
> 标签：php

我正在使用这个脚本，见下文，我从这个站点获得了登录用户并根据他们的登录重定向到网页。它工作得很好，但我无法将用户名拉到他们重定向到的页面中。下面的新会话脚本通常适用于简单脚本，但似乎不适用于此重定向脚本。如果有人能指出我正确的方向，我将不胜感激，因为我对 PHP 很陌生，这是我的第一次尝试。谢谢艾伦

重定向脚本效果很好。

```
<?php 
$host="localhost"; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name="trydata"; // Database name 
$tbl_name="users"; // Table name

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB"); 
// username and password sent from form 
$myusername=$_POST['username']; 
$mypassword=$_POST['password']; 

// To protect MySQL injection (more detail about MySQL injection) 
$myusername = stripslashes($myusername); 
$mypassword = stripslashes($mypassword); 
$myusername = mysql_real_escape_string($myusername); 
$mypassword = mysql_real_escape_string($mypassword); 

$sql = "SELECT * FROM $tbl_name WHERE username='$myusername' and   password='$mypassword'"; 
$result = mysql_query($sql); 

// Mysql_num_row is counting table row 
$count = mysql_num_rows($result); 

// If result matched $myusername and $mypassword, table row must be 1 row 
if($count == 1){ 
    // Register $myusername, $mypassword and redirect to file"login_success.php" 
    $_SESSION['username'] = $myusername; 
    $_SESSION['password'] = $mypassword; 

    $result = mysql_fetch_array($result); // get the result set from the query

    $redirect = trim($result['redirect']); // get the redirect column's value

    if ($redirect == '') {
        echo "No redirect value was set!";
    } else {
        header('Location: ' . $redirect);
        exit;
    }
} else { 
    echo "Wrong Username or Password"; 
} 

?>

New session script not pulling loin information through.

<?php 
session_start(); // start up your PHP session! 

if (isset($_SESSION['username'])
{

    echo "You are logged in as ".$_SESSION['username'];
    echo "<p>";

    echo "<a href='logout.php'> Click here to logout<a/>";
    }

else

header ("Location: form.php");

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:06:21.487

在重定向之前尝试使用[session_write_close ：](http://php.net/manual/en/function.session-write-close.php)

```
if ($redirect == '') {
    echo "No redirect value was set!";
} else {
    session_write_close(); 
    header('Location: ' . $redirect);
    exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:06:37.467

确保设置 session_start(); 在顶行，在访问 $_SESSION 数组`<?php`的**两个脚本行之后。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:11:38.583

```
<?php
session_start(); <----------------Session should start here 
$host="localhost"; // Host name 
$username=""; // Mysql username 
$password=""; // Mysql password 
$db_name="trydata"; // Database name 
$tbl_name="users"; // Table name

mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB"); 
// username and password sent from form 
$myusername=$_POST['username']; 
$mypassword=$_POST['password']; 

// To protect MySQL injection (more detail about MySQL injection) 
$myusername = stripslashes($myusername); 
$mypassword = stripslashes($mypassword); 
$myusername = mysql_real_escape_string($myusername); 
$mypassword = mysql_real_escape_string($mypassword); 

$sql = "SELECT * FROM $tbl_name WHERE username='$myusername' and   password='$mypassword'"; 
$result = mysql_query($sql); 

// Mysql_num_row is counting table row 
$count = mysql_num_rows($result); 

// If result matched $myusername and $mypassword, table row must be 1 row 
if($count == 1){ 
    // Register $myusername, $mypassword and redirect to file"login_success.php" 
    $_SESSION['username'] = $myusername; 
    $_SESSION['password'] = $mypassword; 

    $result = mysql_fetch_array($result); // get the result set from the query

    $redirect = trim($result['redirect']); // get the redirect column's value

    if ($redirect == '') {
        echo "No redirect value was set!";
    } else {
        header('Location: ' . $redirect);
        exit;
    }
} else { 
    echo "Wrong Username or Password"; 
} 

?>

New session script not pulling loin information through.

<?php 

if (isset($_SESSION['username'])
{

    echo "You are logged in as ".$_SESSION['username'];
    echo "<p>";

    echo "<a href='logout.php'> Click here to logout<a/>";
    }

else

header ("Location: form.php");

?> 
```

你需要`session_start()`在一开始就打电话。

我建议你学习[PDO](http://www.phpeveryday.com/articles/PDO-Prepared-Statement-P550.html)

# javascript - 报告服务在新选项卡中打开报告

> ID：10547671
> 
> 赞同：1
> 
> 时间：2012-05-11T08:04:29.307
> 
> 标签：javascript, url, service, tabs, report

我需要在另一个选项卡中打开一个 URL 链接。我已经测试了在新窗口中打开的这段代码。

```
="javascript:void(window.open('http://www.google.com'))" 
```

但是，我怎样才能在另一个标签中打开它..？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:33:41.387

你几乎明白了

```
 ="javascript:void(window.open('http://www.google.com','_blank'))" 
```

# sql - 如何知道事务方案何时可序列化？

> ID：10547673
> 
> 赞同：1
> 
> 时间：2012-05-11T08:04:33.687
> 
> 标签：sql, transactions

我正在研究SQL，需要知道某个事务方案是否可序列化。我理解确定这一点的方法是制作一个图表，其中交易作为节点和节点之间的方向，如果图表是循环的，那么该方案是不可序列化的。但它是什么意思，又是什么决定了图中是否存在从一个事务到另一个事务的有向边？在这种情况下，序列化与将对象写入磁盘的序列化类型相同吗？

感谢您的任何见解

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:48:50.013

事务序列化与对象序列化无关。可序列化事务隔离级别在完全实现后，可确保任何一组并发可序列化事务的行为与*某些*串行（一次一个）执行序列一致——就好像这些事务已经在一个时间。这意味着如果你能证明一个数据库事务在单独运行时会做正确的事情，它会在任何可序列化事务的组合中做正确的事情，或者它会在序列化失败时回滚以便可以重试从头开始。

可序列化事务隔离可以通过多种方式实施。最常见的方案是严格的两阶段锁定 (S2PL)。这个很常见，以至于您经常在 SO 上看到仅根据此技术讨论事物的答案。还有乐观并发控制 (OCC)、可序列化快照隔离 (SSI) 等。

9.1 之前的 PostgreSQL 版本、某些配置中的 MS SQL Server 以及所有版本的 Oracle 实际上并不提供可序列化的事务。它们让您请求它们，但实际上提供了快照隔离。从 9.1 开始的 PostgreSQL 版本在请求可序列化事务隔离时使用[SSI 。](http://wiki.postgresql.org/wiki/SSI)

不可能彻底讨论这些技术中的任何一种在 SO 答案中是如何工作的，但总结一下上面提到的技术：

*   在 S2PL 下，事务中的每个写入都获取一个不能与任何东西共享的锁，事务中的每个读取都获取一个可以与其他读取共享但不能与写入共享的锁。读锁需要覆盖扫描索引中的“空白”。锁一直保持到事务结束，并随着事务的工作对其他事务可见而自动释放。如果阻塞创建了一个循环，这称为“死锁”，循环中涉及的事务之一被回滚。

*   在 OCC 下，事务跟踪它使用的数据，而不锁定它。当请求事务提交时，事务检查是否有任何其他事务修改了它的任何数据并提交。如果是这样，则提交请求失败并且工作被回滚。

*   在 SSI 下，写入会相互阻塞，但读取不会阻塞写入，写入不会阻塞读取。跟踪读写依赖关系以寻找可见性模式，这将在明显的执行顺序中创建一个循环。如果发现“危险结构”，这意味着可能执行明显执行顺序的循环，则回滚可能循环中涉及的事务之一。它更像 OCC 而不是 S2PL，但在更高的争用下没有那么多的回滚。

全面披露：我与麻省理工学院的 Dan RK Ports 合作，在 PostgreSQL 9.1 中实现了新的基于 SSI 的可序列化事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:19:06.027

序列化意味着事务可以以串行方式执行，一个接一个（与对象序列化无关），基本上一个事务是可序列化的方式，如果图是循环的，那么它是不可序列化的，并且存在一些冲突的风险，在这里你的隔离级别将有助于决定是否应该以串行方式执行事务，即第一个然后另一个或者是否它应该尝试以交错的方式执行它，希望没有冲突。它不是一个完整的答案，但我希望这会有所帮助。

# sql-server - 如何在 Node.JS 应用程序中同时支持 PostgreSQL 和 SQL Server？

> ID：10547677
> 
> 赞同：1
> 
> 时间：2012-05-11T08:04:37.597
> 
> 标签：sql-server, postgresql, node.js, orm

我目前正在开发一个需要能够在 PostgreSQL 和 SQL Server 数据库之间切换的 Node.js 应用程序。两个数据库都有相同的表，操作也相同（基本的 CRUD，没什么特别的）。

我已经完成了研究，并且知道周围有足够的库可以访问这两个数据库。

理想情况下，我想使用 ORM 并让它处理差异。但是，我似乎无法找到一个兼具两者的 ORM 框架。事实上，我找不到任何支持 SQL Server 的 ORM，而几乎所有的 ORM 都支持 Postgres。

所以我的问题是：是否有支持两者的 ORM？如果没有，是否有其他抽象工具/框架可以让我的开发人员生活更轻松？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T19:02:00.097

这里有一定数量的[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)，但是如果你找不到支持两者的 ORM，你下一个最好的选择是只使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)并确保你没有直接在代码中使用 ORM，而是通过包装。然后，如果/当您需要对 SQL Server 的支持时，您可以为将替换 PostgreSQL 实现的包装器创建实现。

# javascript - 我在 javascript 中做什么来获得所需的结果？

> ID：10547679
> 
> 赞同：0
> 
> 时间：2012-05-11T08:04:44.757
> 
> 标签：javascript, required

这是我的javascript代码

```
for (var i = 1; i <= _MAXPAGECOUNT - 2; i++) {

        e = document.getElementsByName("q" + i + "[]");
        for (var j = 0; j <= e.length - 1; j++) {
            if (e[j].checked) {
                result = result + "," + i + ":" +  e[j].value;

               // break;
            }
        }} 
```

问题是这样的，它 在代码中显示这样的结果**1:2,1:3,1:4,2:3,2:4,2:5**`i`表示问题编号和`j`答案编号，但我希望结果为像这样**1:2,3,4 ; 2:3,4,5**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:10:05.510

尝试这个

```
for (var i = 1; i <= _MAXPAGECOUNT - 2; i++) {
        result = result+i+":";
        e = document.getElementsByName("q" + i + "[]");
        for (var j = 0; j <= e.length - 1; j++) {
            if (e[j].checked) {
                result = result + e[j].value;
               // break;
            }
        }
        if(i<_MAXPAGECOUNT - 2)
        {
             result = result+" ; ";
        }
} 
```

# java - 使用 MonitorEnter：我应该如何调用同步方法？

> ID：10547684
> 
> 赞同：1
> 
> 时间：2012-05-11T08:05:08.247
> 
> 标签：java, c, multithreading, java-native-interface

```
void Java_Package_Multithreading_againCallReadFile
  (JNIEnv *env, jobject obj) {

 if((*env)->MonitorEnter(env,obj) == JNI_OK) {
   printf("Now you can call the synchronised method !");
 } else {
     printf("oops ! Failed to acquire the lock.");
   }
} 
```

从上面的方法我想检查我是否可以调用同步的方法并且可以被另一个线程使用。`MonitorEnter`实际检查什么。我已经阅读了它的文档，但不明白它是什么。我想要做的是，在检查调用该方法是否安全后调用该同步方法。上面的方法似乎不对，因为即使`if`满足语句，我也会得到一个致命错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:05:16.253

> “我想做的是，在检查调用该方法是否安全后调用该同步方法。”

这没有任何意义。就叫吧。如果该方法已经同步，则您不会添加任何值。调用“MonitorEnter”根本不会“检查调用该方法是否安全”。它要求锁定您提供的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:34:42.973

根据[文档](http://java.sun.com/docs/books/jni/html/other.html)做 MonitorEnter(env, obj) 就像[在对象上使用本机 java synchronizatioin 语句](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)

```
synchronized (obj) {
    ... // synchronized block
} 
```

因此，在您的示例中，您将其`this`用作同步对象，我认为这应该没问题。但不要忘记在通话结束时使用 MonitorExit()。

异常的堆栈跟踪是什么？

# java - 动态复选框和组合框

> ID：10547685
> 
> 赞同：0
> 
> 时间：2012-05-11T08:05:11.060
> 
> 标签：java, dynamic, checkbox, combobox

我对动态复选框有疑问。I want a combobox to show beside the checbox/checkboxes when one or more is selected. 但是我只得到一个组合框，每当我选择一个新的复选框时，它就会四处移动。那么任何人都可以通过告诉我出了什么问题以及如何获得多个组合框来帮助我吗？

```
for(int i = 0; i < names.length; i++) {
        // ParameterField
        JTextField fieldParam = new JTextField();
        fieldParam.setText(names[i]);
        fieldParam.setEditable(false);
        addElement(contentPanel, fieldParam, 25, yPos, 100, 20);

        // ValueField
        JTextField fieldValue = new JTextField();
        fieldValue.setText("" + values[i]);
        fieldValue.setEditable(false);
        addElement(contentPanel, fieldValue, 160, yPos, 100, 20);

        //RadioButtonField          
        final JCheckBox checkboxes = new JCheckBox();
        checkboxes.setActionCommand(names[i]);
        checkboxes.addActionListener(this);
        addElement(contentPanel, checkboxes, 325, yPos, 100, 20);

        final int checkBoxIndex = i;
        checkboxes.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae2) {
                if (checkboxes.isSelected()) {
                    comboProcent.setEnabled(true);
                    comboProcent.setModel(new javax.swing.DefaultComboBoxModel(new String[]{"2%", "5%", "10%"}));
                    addElement(contentPanel, comboProcent, 435, 50 + checkBoxIndex * 25, 80, 20);

                    setVisible(true);

                }

                    if (!checkboxes.isSelected()) {
                    contentPanel.remove(comboProcent);

                }

                System.out.println("checkbox is: " + checkBoxIndex);
            }
        });

        yPos = yPos + 25;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:11:46.337

您需要为每个复选框创建一个新的组合框实例。我认为最好的方法是根据复选框的值何时更改来更改它们的可见性。（我以前也这样做过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:09:07.143

我不知道我是否理解正确，但如果你想要一个 dinamyc 组合框，你应该实现自己的 ComboBoxModel。

# html - HTML：图像向左浮动？

> ID：10547688
> 
> 赞同：1
> 
> 时间：2012-05-11T08:05:40.957
> 
> 标签：html, css, layout, image-resizing

我想制作一个显示大量图像的页面。

```
<style>
img{margin-bottom: 3px; float: left}
</style>

<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png">
<img src="myimg.png"> 
```

如果它们都具有相同的宽度和高度，它看起来很好。但是当其中一个尺寸更大时会发生什么？它弄乱了所有布局，显示出一个使它看起来很难看的空白区域。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:09:23.510

你为什么不把 width: 150px 或任何你想要的大小放在那个css里面？

```
<style>
img{margin-bottom: 3px; width: 150px; float: left}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:10:38.740

使用一点 javascript，您可以将它们全部设置为相同的大小。但它看起来不会好很多。也许相同的宽度和不会令人讨厌的简单重复背景将是一种妥协。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:34:08.900

## 限制尺寸

```
img {
    max-width: 100px;
    max-height: 100px;

    border: 1px solid grey; /* show visible element size */
} 
```

示例：http:
[//jsfiddle.net/UqGW7/3/](http://jsfiddle.net/UqGW7/3/)

## 修正尺寸（拉伸）

```
img {
    width: 100px;
    height: 100px;

    border: 1px solid grey; /* show visible element size */
} 
```

示例：http:
[//jsfiddle.net/UqGW7/4/](http://jsfiddle.net/UqGW7/4/)

## 裁剪图像（使用包装）

```
<span class="wrapper">
    <img src="http://profile.ak.fbcdn.net/hprofile-ak-snc4/592211_21253884267_736366040_q.jpg" />
</span>

.wrapper {
    width: 100px;
    height: 100px;

    display: inline-block;
    overflow: hidden; /* crop larger images */

    border: 1px solid grey; /* show visible element size */

    text-align:center; /* center horizontally */
} 
```

示例：http:
[//jsfiddle.net/UqGW7/5/](http://jsfiddle.net/UqGW7/5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:33:30.307

如果不是非常需要显示整个图像，您可以考虑将图像放在 div 标签中，或者作为背景图像，将它们居中，然后为 div 元素设置固定的宽度和高度。

```
<style>
.imgpanel{
  margin-bottom: 3px; 
  float: left;
  background-repeat:no-repeat;
  background-position:center;
  width:200px;
  height:200px; 
}
</style>

<div class="imgpanel" style="background-image:url('/images/sample.png');"></div>
<div class="imgpanel" style="background-image:url('/images/sample.png');"></div>
<div class="imgpanel" style="background-image:url('/images/sample.png');"></div>
<div class="imgpanel" style="background-image:url('/images/sample.png');"></div> 
```

或者您可以将图像放在 div 标签中并将溢出设置为隐藏：

```
<style>
.imgpanel{
  margin-bottom: 3px; 
  float: left;
  width:200px;
  height:200px; 
  overflow:hidden;
}
</style>

<div class="imgpanel"><img src="/images/sample.png" /></div>
<div class="imgpanel"><img src="/images/sample.png" /></div>
<div class="imgpanel"><img src="/images/sample.png" /></div> 
```

或者，您可以使用缩略图生成脚本来创建始终为您想要的特定大小的图像，如果重新调整图像大小是可以的。检查[http://sourceforge.net](http://sourceforge.net)以获取缩略图生成器的代码示例。

# configuration - 配置 windsor 拦截器以仅挂钩标记的方法

> ID：10547690
> 
> 赞同：1
> 
> 时间：2012-05-11T08:05:49.067
> 
> 标签：configuration, castle-windsor, interceptor

是否有可能将拦截器配置为仅挂钩特殊接口或基类的方法？目前，我已经注册了适用于与一个数据库的连接范围的拦截器。现在我添加了另一个与另一个数据库一起工作的作用域，并想添加另一个拦截器，它将挂钩第二个作用域的方法。可以通过 xml 文件配置拦截器，而不是检查调用属性的目标。

我通过组件添加了拦截器：

```
 <component
    type="Common.IoC.SessionScopeInterceptor, Common"
    lifestyle="transient">
 </component> 
```

AFAIK 这个拦截器拦截在 Windsor 容器中注册的所有类的所有方法。

我想添加这样的东西^

```
 <component
    type="Common.IoC.SessionScopeInterceptor, Common"
    lifestyle="transient"
    interceptOnlyVirtualMethods="true"
    interceptClass="Common.IoC.SessionScope1, Common"
    >
 </component> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:08:05.193

您需要创建自己的 AbstractFacility 来实现您想要的行为。本质上，您需要实现类似于 Mikael Sundberg 在回答[这个](https://stackoverflow.com/questions/420891/how-do-i-tell-windsor-to-add-an-interceptor-to-all-components-registered-that-im)问题时所做的事情。

# grails - 在 Intellij IDEA 中调试 Spock 测试

> ID：10547692
> 
> 赞同：8
> 
> 时间：2012-05-11T08:05:53.500
> 
> 标签：grails, intellij-idea, spock

我正在通过“右键单击 -> 运行 -> 测试名称”运行 Spock 测试。如何在调试模式下运行测试？调试图标运行测试但不会在断点处停止

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:55:15.020

我相信这可能是元类如何在 groovy 中工作的一个错误。我发现如果断点不在控制结构或闭包上，它将起作用。我在 intellij 论坛上找到了解决方法：

[http://youtrack.jetbrains.com/issue/IDEA-82741](http://youtrack.jetbrains.com/issue/IDEA-82741)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:22:20.013

通常这工作正常。如果不是，则可能是您的 IDE 和 Groovy 或 Grails 有问题。我建议尝试使用最新版本的 IDEA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-05T15:40:21.990

我遇到了“相同”的问题（不确定它是否与 OP 的原因相同）

在我这边，它在某种程度上与 gradle 和 IntelliJ IDEA 相关。

在执行和调试 groovy 测试时，IDEA 默认使用本地系统的 gradle 构建系统。

但是有一个选项可以在 IDEA 的构建系统中“本地”运行测试。

我已经尝试了基于 IDEA 的构建系统设置来运行 groovy 测试，然后它就可以工作了。

设置可以在下面找到`Preferences -> Build, Execution, Deployment -> Build Tools -> Gradle`

[![在此处输入图像描述](../Images/720f4b46780dc4573a879550172b8382.png)](https://i.stack.imgur.com/Zi9sJ.png)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-04-19T15:00:27.420

也许你应该使用 RightClick -> **Debug** (Not Run)

# variables - Symfony2 Twig：如何在模板中使用 config.yml 变量而不设置 twig 全局变量？

> ID：10547693
> 
> 赞同：0
> 
> 时间：2012-05-11T08:05:57.373
> 
> 标签：variables, symfony, global-variables, twig

我如何从我的 config.yml 文件中获取价值，但没有设置为 Twig 全局。例如：

```
mopa_boostrap:
    initializr:
        meta: ~ 
```

当我尝试

```
{{ mopa_bootstrap.initializr.meta }} 
```

我收到错误，该模板中没有设置这样的变量。

**更新** 由于没有 Twig Globals 是不可能的，我已经完成了 Twig 扩展，它将 config.yml 中的选定变量映射到 Twig Globals 并使其可从模板中使用。

整个实现看这里：[https ://github.com/nysander/MopaBootstrapBundle/commit/d36269184cfad6d8fd465d8b622f92a302dea104](https://github.com/nysander/MopaBootstrapBundle/commit/d36269184cfad6d8fd465d8b622f92a302dea104)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:58:42.433

There is no way to do this. You have to set globals to use them in twig.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T09:22:53.637

解决方案可能是创建一个带有输出您想要的功能的树枝扩展。Twig 扩展将被注册为服务，你可以将任何你想要的东西传递给它。

# php - 以多页形式返回

> ID：10547694
> 
> 赞同：2
> 
> 时间：2012-05-11T08:06:00.593
> 
> 标签：php, forms, session

我目前正在使用 构建一个多页表单`$_SESSION`，到目前为止一切正常。然而，即使我能够在 6 页末尾检索所有数据，但如果用户出错，似乎无法返回表单。

假设他在第 5 页，并且他意识到他需要回到第 3 页来更改某些内容，但他将无法这样做。Firefox 给出此错误消息：

*文档已过期 此文档不再可用。请求的文档在 Firefox 的缓存中不可用。作为安全预防措施，Firefox 不会自动重新请求敏感文档。单击重试可从网站重新请求文档。*

这是我的表单的样子，这个是 Form-1.php ：

```
<form action="Form-2.php" method="post">
        <fieldset>
                <legend>Information</legend>
                <p>
                    <label for="name">Name</label>
                    <input id="name" type="text" name="name" required/>
                </p>
                <p>
                    <label for="age">Age</label>
                    <input id="age" type="number" name="age" placeholder="Ex. 1988" required/>
                </p>
                <p>
                    <input id="sex-m" type="radio" name="sex" value="Male" required/>
                    <label for="sex-m">Male</label>
                    <input id="sex-f" type="radio" name="sex" value="Female" required/>
                    <label for="sex-f">Female</label>
                </p>
        </fieldset>
        <input type="submit" value="Next page"/>
</form> 
```

我`SESSION`用来从以前的表单中检索数据，这个来自 Form-2.php ：

```
session_start();

$_SESSION['name'] = $_POST['name'];
$_SESSION['age'] = $_POST['age'];
$_SESSION['sex'] = $_POST['sex']; 
```

六页以此类推。

它工作正常，它可以正确检索所有值，但是在填写表单时无法返回。

我究竟做错了什么？如果用户犯了错误，我如何确保用户能够返回？

谢谢你的帮助。

编辑 ：

我最终得到了以下代码，解决了我的一半问题。仍然来自 Form-2.php ：

```
session_start();

if (isset($_SESSION['location']) && isset($_SESSION['job'])) {
        $location = $_SESSION['location'];
        $job = $_SESSION['job'];
} else {
        $_SESSION['name'] = $_POST['name'];
        $_SESSION['age'] = $_POST['age'];
        $_SESSION['sex'] = $_POST['sex'];

        $location = '';
        $job = '';
} 
```

然后我简单地显示字段中的值：

如果文本：`<?php echo $location; ?>`

如果收音机：`<?php if(isset($job) && $job == "Yes"){echo "checked=\"checked\" ";} ?>`

它工作得很好，不同的形式 - 如果已经设置了值 - 预先填充就好了。

如您所见，我的问题是，如果我返回并**更改**一个值，则不会考虑它，因为我忽略`POST`了`SESSION`.

我不知道如何使它正常工作......有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:14:36.087

不是最好的解决方案，但确实有效：不要使用后退按钮，提供您自己的前进、后退、“步进”按钮。然后使用存储在会话中的数据填充表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:25:56.223

djot 是对的，您需要一个 << back >> 和 << forward >> 按钮，您可以在功能上做的是，如果单击后退按钮，则将页面/表单的值作为隐藏输入字段传递并使用填充字段隐藏的价值..

# php - 如何实现 AJAX 以实现 LIKE 按钮

> ID：10547695
> 
> 赞同：0
> 
> 时间：2012-05-11T08:06:04.230
> 
> 标签：php, javascript, mysql, ajax

我在为我的网站实施 LIKE 按钮时遇到问题。我正在尝试做一个功能，当点击 LIKE 按钮时，总喜欢显示在屏幕上而不重新加载页面。我在下面显示的代码用于获取特定文章下的评论，包括每个评论的点赞数。在这个阶段一切正常，但我如何将它传递给 AJAX/在脚本上实现 AJAX。

当 LIKE 按钮被点击时，<ah ref=" " > 中使用了什么链接？AJAX 是单独编写的还是在 PHP 中编写的？如何使它不离开当前页面，同时仍然从数据库中显示更新的喜欢？

请我不是在寻找一个做所有的代码，我所需要的只是如何让自己开始使用它。

感谢您的时间和精力。我最欣赏它。谢谢

```
$query6 = mysql_query("
  SELECT
    c.user , c.body  , c.date, c.like                                                                     
  FROM
    comment AS c  
      INNER JOIN about_ AS ac ON c.article_id = ac.about_id
  WHERE
    c.article_id =  '".$article_id."'
    AND page_name = '".$page_name."'
") or die (mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:09:04.653

谷歌AJAX教程...

这里有一些：

*   [http://www.sitepoint.com/ajax-jquery/](http://www.sitepoint.com/ajax-jquery/)
*   [http://www.php4every1.com/tutorials/jquery-ajax-tutorial/](http://www.php4every1.com/tutorials/jquery-ajax-tutorial/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-11T08:32:58.137

```
$(document).ready(function(){
                $('#likeButton').click(function(e){ <------ click event
                   dataString = 'param1='+ 'value1'+'&param2='+'value2'; <----- The variables which you will pass along with the request. 
                    $.ajax({
                        type: 'POST', <---------- GET or POST
                        url: 'process.php', <---------- The Url (Which will process the data)
                        data: dataString, <-------- The data
                        success: function(data){ <----- if request is success, do something with the response
                            alert(data); <----- you can output by $('#output').html(data) where output can be a div
                        },
                        error: function(request, status, error){ <----- if Error returns, then check the error or do something else.
                            alert(request.responseText);
                        }
                    })
                })
            }) 
```

如果你一步一步地去做，这并不难。我更喜欢 $.ajax，因为它可以更好地控制发送的数据。**现在修改上面的代码以满足您的需要。**

您可以在上面添加更多功能。[在这里](http://api.jquery.com/jQuery.ajax/)阅读

# html - 如何打破DIV的标题属性的文本

> ID：10547699
> 
> 赞同：0
> 
> 时间：2012-05-11T08:06:08.990
> 
> 标签：html, title, break

在下面的 div 中，我想打破 title 属性的文本（想在不同的行中显示公司 ID、名称和活动）。谁能建议我解决这个问题的最佳方法。谢谢

DIV id="window6" class="组件窗口" style="top:300px;left:250px;" title="CompanyID:25 名称:Company 25 活动:,INVHLDGS, MallOwned:123 " 6000000

/DIV

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:51:38.000

如果您希望为 div 标题显示的工具提示有换行符，那么如何使用像这样的 jquery 插件：http: [//twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

您可以将`<br />`标签添加到弹出内容（数据内容）：

```
<a href="#" class="btn btn-danger" rel="popover" data-content="a=1<br /> b=2<br />" data-original-title="A Title">hover for popover</a> 
```

我看到 JS Bootstrap 在线示例使用“a”标签，但它也应该与“div”标签一起使用。注意：此插件还需要包含 Tooltip 库。如果你喜欢这个插件，请阅读他们的文档。当然，它们还有许多其他类似的插件，尤其是 jQuery 可能具有此特定功能。

# c# - 微软表达式 SDK

> ID：10547702
> 
> 赞同：1
> 
> 时间：2012-05-11T08:06:20.817
> 
> 标签：c#

我正在使用表达式编码器 sdk 4 使用以下代码将 mp3 转换为 wma

生成了一个 wma 文件，但它缺少 mp3 文件中的缩略图/图像/封面。

```
using (var job = new Job())
{
    var mediaItem = new MediaItem(input.FullName)
            {
                 OutputFileName = outputFileName,
                 OutputFormat =
                         {
                             AudioProfile =
                             {
                                 Codec = AudioCodec.Wma,
                                 Bitrate = BitRate ?? BitRate,
                                 Channels = 1
                             }
                         }
            };

    job.MediaItems.Add(mediaItem);

    job.OutputDirectory = OutputDirectory;
    job.CreateSubfolder = false;
    job.Encode();
} 
```

我尝试了以下方法：

1)

```
mediaItem.MarkerThumbnailCodec = ImageFormat.Jpeg;
mediaItem.MarkerThumbnailJpegCompression = 0;
mediaItem.MarkerThumbnailSize = new Size(50, 50); 
```

2)

```
mediaItem.ThumbnailCodec = ImageFormat.Jpeg;
mediaItem.ThumbnailEmbed = true;
mediaItem.ThumbnailJpegCompression = 50;
mediaItem.ThumbnailMode = ThumbnailMode.BestFrame;
mediaItem.ThumbnailSize = new Size(50, 50);
mediaItem.ThumbnailTime = TimeSpan.FromSeconds(0); 
```

3)

```
mediaItem.OverlayFileName = @"c:\Chrysanthemum.jpg";
mediaItem.OverlayStartTime = TimeSpan.FromSeconds(0); 
```

..但它没有帮助。

请帮我 ：）

# matlab - Matlab/Simulink SimState 错误

> ID：10547708
> 
> 赞同：0
> 
> 时间：2012-05-11T08:06:37.943
> 
> 标签：matlab, simulink

我正在使用 Simulink (Matlab)，但我遇到了一个问题：我开始一个模拟，每一次我都需要停止它，将系统状态保存为 Simstate，然后通过更改一些来恢复系统状态变量。例如，我正在使用基本模型“带动画的倒立摆”（penddemo.mdl），当我恢复状态时，我必须改变摆的质量，这里有一些代码：

```
set_param('penddemo','LoadInitialState','on','InitialState','init_state'); % load the initial state
set_param('penddemo','SaveFinalState','on','FinalStateName', 'xFinal','SaveCompleteFinalSimState', 'on'); % save the complete simstate
set_param('penddemo/Pendulum','Mcart','0.600'); % change the mass
sim('penddemo',time); %starting the simulation 
```

问题是我收到此错误：

*无法加载 Simulink SimState 因为初始模型“penddemo”在保存 SimState 后已更改。再次运行模拟并重新保存 SimState。*

我知道使用 Simstate 有一些限制：

*在保存 SimState 和使用 SimState 恢复模拟之间，您不能对模型进行任何结构更改。例如，您不能在保存 SimState 后添加或删除块，而无需重复模拟并保存新的 SimState。*

但我不认为改变单个变量是结构性变化。也许有人知道在恢复 Simstate 之前更改某些变量的另一种方法。

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T01:14:43.317

我相信您只能更改“可调”参数。尝试关闭“内联参数”，有关详细信息，请参阅[有关可调参数的文档](http://www.mathworks.com/help/toolbox/simulink/ug/f13-87137.html)

# asp.net-mvc-3 - 将表单的值从视图传递到控制器

> ID：10547709
> 
> 赞同：0
> 
> 时间：2012-05-11T08:06:37.940
> 
> 标签：asp.net-mvc-3, view, controller, parameter-passing

我如何将表单的值（我假设）一个日期字符串传递给控制器​​......

这是我的看法：

```
<script type="text/javascript" language="javascript">
$(function () {
    $(".datepicker").datepicker({ onSelect: function (dateText, inst) { $("FORM").submit(); },
        altField: ".alternate"
    });

});

</script>
@model IEnumerable<CorReservation.Models.Reservation>
@{
ViewBag.Title = "Index";
}
<div class="divRightSide">

<div>
    <div class="datepicker">
    </div>
    <form action="/" title="fff">
    <input type="text" class="alternate" readonly="readonly" />
    </form>
</div>
// do something eg.  foreach (var item in Model)
        { @Html.DisplayFor(modelItem => item.Date)} 
```

这是我的控制器：我想将从日期选择器中选择的日期传递给控制器​​，然后控制器将返回一个 Ienumerable 的保留...

```
 DateTime date = System.DateTime.Now;
    private ReservationEntities db = new ReservationEntities();

    public ViewResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(string dateInput)
    {

        date = Convert.ToDateTime(dateInput);

        var reservations = db.Reservations.Where(r=> r.Date ==date).Include(r => r.Employee).Include(r => r.Room).OrderByDescending(r => r.Date);

        return View(reservations);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:09:43.237

有两种方法可以做到这一点。使表单输入名称属性与控制器中的预期属性匹配。

例如：

```
<input type="text" class="alternate" readonly="readonly" name="dateInput" /> 
```

或者，如果有很多输入值，请使用模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:10:49.870

它是根据您要提交的 HTML 字段的“名称”属性自动完成的。

将您的表格更改为

```
<form action="/" title="fff">
    <input name="dateInput" type="text" class="alternate" readonly="readonly"  />
</form> 
```

它应该像那样工作。

此外，当您使用 Razor 语法时，您可以像这样使用 Razor HTML 帮助程序

```
@model IEnumerable<CorReservation.Models.Reservation>
@{
    ViewBag.Title = "Index";
}
<div class="divRightSide">

<div>
    <div class="datepicker">
    </div>
    @using(@Html.BeginForm("<your controller name>", "<your action name e.g. Index>"){
      Html.TextBox("dateInput", "", new { @readonly="readonly", @class="alternate" })
    }
</div>
// do something eg.  foreach (var item in Model)
        { @Html.DisplayFor(modelItem => item.Date)} 
```

# android - 有什么方法可以在没有拦截 ACTION_DOWN 的视图中捕获 ACTION_UP？

> ID：10547710
> 
> 赞同：2
> 
> 时间：2012-05-11T08:06:40.427
> 
> 标签：android

我正在尝试为 pre-honeycomb 设备实现拖放功能。我想在一个框架布局中触摸一个项目，将其拖到另一个框架布局上，然后让第二个框架看到 ACTION_UP 事件。不幸的是，还没有找到这样做的方法，似乎只有看到原始 ACTION_DOWN 的视图层次结构才会收到 ACTION_UP 的通知。

我已经让拖动部分工作了，但是当我松开手指时，ACTION_UP 下方的视图根本没有收到任何通知。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:01:11.420

我最终通过拦截框架视图中的所有事件来解决这个问题`onInterceptTouchEvent`

# plugins - 为 Adob e Photoshop（或 After Effects）编程自定义混合模式

> ID：10547711
> 
> 赞同：1
> 
> 时间：2012-05-11T08:06:41.577
> 
> 标签：plugins, adobe, blend

为 Adob​​e Photoshop 创建自定义混合模式的最简单方法是什么？

我希望能够根据无法通过组合现有混合模式创建的规则将两个图像混合在一起

（即混合结果应为 dst = backLayer + (frontlayer*2-1) 这不能通过两次应用线性减淡然后减去白色层来实现，因为会发生钳位 - 在 32 位工作空间中工作时，混合模式将不再像预期的那样表现）

我尝试在 PixelBender 中编写 pbk 内核，但 Photoshop 的 PixelBender 似乎不支持将多个图像作为输入的 pbk 内核（只能在单个图像上用作过滤器）。

最直接的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T06:22:56.047

检查以下技术是否有效： [http ://www.photoshopgurus.com/forum/general-photoshop-board/25925-custom-blending-modes-possible.html](http://www.photoshopgurus.com/forum/general-photoshop-board/25925-custom-blending-modes-possible.html)

# php - PHP 数组和指针混淆

> ID：10547718
> 
> 赞同：1
> 
> 时间：2012-05-11T08:07:04.873
> 
> 标签：php, arrays, pointers

假设我有这样的功能：

```
function z($zzz){
   for($c=0;$c<5;$c++){
   $zzz[$c]= 10;  
   //more and more codes
   }    
} 
```

我想写一个`loop`这样

第一次执行函数时， **传递****参数`$array`**

第二次：**参数 `$array[0]`通过**

而第三次：**参数 `$array[1]`通过**

......

第 12 次： **参数 `$array[0][0]`通过**

这就是我想到的：

```
$a = -1;
$b = -1;
$array = array();

while($a<10){
    while($b<10){
         z($array);
         $b++;
         $array= &$array[$b];
    }
    $a++;
    $array= &$array[$a];  
} 
```

我试过了，但没有用。。

如果有人可以提供解决方案，我将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:13:04.293

如果 z() 应该改变传递的数组，你的函数定义应该是：

```
function z(&$zzz) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:28:14.987

```
$a = 0;
while ($a < 99)         // <-- edit as applicable
{
   $b = 0
   while ($b < 12)
   {
      if ($b == 0)
      {
         Z($array[$a]);
      } else
      {
         Z($array[$a][$b]);
      }
     $b++;
   }
   $a++;
} 
```

正如杰克所说，您需要`$array`通过引用传递变量以进行更新。不太确定该功能试图实现什么。如果您需要用预定维度填充数组，可能`array_fill`会更有用。

[http://www.php.net/manual/en/function.array-fill.php](http://www.php.net/manual/en/function.array-fill.php)

```
function z(&$zzz){
   for($c=0;$c<5;$c++){
      $zzz[$c]= 10;  
      //more and more codes
   }    
} 
```

# c# - Facebook 从 C# 发布到页面

> ID：10547720
> 
> 赞同：1
> 
> 时间：2012-05-11T08:07:13.457
> 
> 标签：c#, facebook-graph-api, facebook-c#-sdk

我有一个带有 cms 系统的 web 应用程序。我创建了一个任务，当有人在页面上发布新闻文章时执行。简单的事情。我想做的是将这篇新闻文章作为页面发布在我们的 Facebook 页面上。

那里有很多旧版本的 api 和东西，所以我无法弄清楚这样做的最新版本是什么。

有人可以解释我需要执行的步骤来验证应用程序以发布到页面，以及如何实际发布消息吗？

此时我没有任何用户输入选项，但我发现的大多数指南都需要用户在某些身份验证对话框等中输入。必须可以对应用程序进行身份验证，然后请求令牌并发布页面，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:45:26.893

按照此处的步骤 1 到 4：http: [//developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

确保您在第 1 步中输入了“manage_pages”和“publish_stream”权限。这应该会给您一个有效的访问令牌。

使用此访问令牌，您可以调用以下 api 方法：（将 xxxxxxx 替换为 access_token）

[https://graph.facebook.com/me/accounts?access_token=XXXXXXXX](https://graph.facebook.com/me/accounts?access_token=XXXXXXXX)

在输出中，您应该会看到与此类似的内容：

```
 {
   "data": [
      {
         "name": "My App",
         "category": "Application",
         "id": "10258853",
          "access_token": "yyyyyyyyyyyyyy"
      }
   ]
} 
```

使用 yyyyyyyyyyy access_token，您可以像作为用户一样发布到任何墙上。

[https://graph.facebook.com/ThePageId/feed/message=MyFirstPost&access_token=yyyyyyyyyyyyyy](https://graph.facebook.com/ThePageId/feed/message=MyFirstPost&access_token=yyyyyyyyyyyyyy)

我之前一直在问同样的问题。有关我当时使用的代码，请[在此处](https://stackoverflow.com/questions/5687310/how-can-my-facebook-application-post-message-to-a-wall)查看我的问题。我认为你应该管理这个和我上面的答案。

我希望我至少可以为你澄清一些事情。如果没有，问我，我会尽力帮助你。

# css - css 和 IE 中的菜单 css3 样式

> ID：10547724
> 
> 赞同：0
> 
> 时间：2012-05-11T08:07:23.917
> 
> 标签：css

我有一个问题，我需要这样的东西

```
background: -webkit-gradient(linear, left bottom, left top, from(#1e3c84), to(#2a5bd0)) #1CA6D6;
    border-radius: 3px;
    border-bottom: 3px solid #021748;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    -o-border-radius: 3px;
    -khtml-border-radius: 3px;
    -ms-border-radius: 3px;
margin-right: 5px; 
```

但是在 CSS2 中？在 IE 和其他浏览器中正确显示

我怎么能这样做？什么是属性或者我可以用图像做什么？如何？或类似的东西非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:13:44.823

所有现代浏览器都支持圆角和渐变。旧版本的 ie 可以使用诸如[css3pie 之](http://css3pie.com/)类的脚本来支持这些功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:09:37.177

边框半径在旧版浏览器中不起作用...您必须自己绘制角，切片然后自己构建 div 或按钮 :)

[http://caniuse.com/#search=border-radius](http://caniuse.com/#search=border-radius)

[http://www.search-this.com/2007/02/12/css-liquid-round-corners/](http://www.search-this.com/2007/02/12/css-liquid-round-corners/)

**更新**

或使用@Sotiris 链接:)

# regex - Rails 3：如果没有输入值，则验证 REGEX 失败

> ID：10547731
> 
> 赞同：2
> 
> 时间：2012-05-11T08:08:21.810
> 
> 标签：regex, ruby-on-rails-3, validation

我正在使用以下正则表达式

```
VALID_WEBSITE_REGEX = /^(http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?$/ix 
```

使用此规则验证网站条目：

```
validates :website, length: { maximum: 150 }, format: { with: VALID_WEBSITE_REGEX } 
```

（150 是任意的）。

但是，当我保存/更新表单时，我收到一个验证错误“网站无效”。如何确保仅在有内容要处理时才处理验证规则的“格式”部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:51:19.213

您可以使用 allow_blank 选项进行验证

```
:allow_blank => true 
```

如果属性的值为空白，此选项将让验证通过？例如 nil 或空字符串。阅读更多： http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#allow_blank](http://guides.rubyonrails.org/active_record_validations_callbacks.html#allow_blank)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:46:48.113

用操作员将整个事物括起来`?`，例如

```
VALID_WEBSITE_REGEX = /^((http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?)?$/ix 
```

如果您也想允许空格，请`\s*`在每一端添加，例如

```
VALID_WEBSITE_REGEX = /^\s*((http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?)?\s*$/ix 
```

# mysql - 翻译城市名称和国家

> ID：10547738
> 
> 赞同：-4
> 
> 时间：2012-05-11T08:08:57.223
> 
> 标签：mysql, database

我有世界各国 e 城市的 mysql 数据库；它是英文的，但我的网站是多语言的（意大利文、法文、俄文 ecc） - 我该如何翻译各个地区？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T08:11:40.707

您可以使用[http://www.geonames.org](http://www.geonames.org)。世界上所有的城市都有翻译。

**更新**：您可以使用地理名称网络服务，例如[莫斯科的翻译](http://api.geonames.org/search?name=moskva&country=RU&featureCode=PPLC&maxRows=10&type=rdf&username=demo)。当然你要解析这个 XML 数据 :)

# objective-c - 在不同的 UIViewControllers 之间共享 NSArray

> ID：10547748
> 
> 赞同：-1
> 
> 时间：2012-05-11T08:09:33.453
> 
> 标签：objective-c, ios, cocoa-touch, uiviewcontroller

我正在制作一个应用程序，它使用 webService 来获取 JSON 格式的数据......我得到了我将它们解析成对象 NSArray 的数据......我使用它......它工作正常......
现在，如果用户单击一个按钮我需要将他发送到另一个 Uiview ...其中包含有关单击对象的更多数据..
问题就在这里...我不想再次请求并从服务器下载结果...因为我已经这样做了……我想要的只是访问我在第一个 UIViewController 中拥有的 NSArray。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:15:24.947

您可以在 AnotherView.h 上添加另一个属性：

```
@property (nonatomic, retain) NSArray *jsonData; 
```

在 AnotherView.m 上合成它。当您要从 InitialView 调用 AnotherView 时，您可以使用您在 InitialView 上检索到的数据设置 jsonData。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:20:35.137

您可以将数组设置为属性。您可以创建一个新类并将数组设置为属性，然后在获取数组后设置属性。或者，您可以创建现有 UIVIewController 类的属性并传递对象。

无论哪种方式，您都必须设置属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:17:02.917

在您的其他视图控制器中创建一个自定义初始化程序，如下所示：

```
#import <UIKit/UIKit.h>

@interface OtherViewController : UIViewController 

@property (nonatomic, strong) NSArray *myArray;

- (id)initWithArray:(NSArray *)anArray;

@end 
```

然后像这样实现它：

```
#import "OtherViewController.h"

@implementation OtherViewController
@synthesize myArray=_myArray;

- (id)initWithArray:(NSArray *)anArray {
    if (!(self = [self initWithNibName:@"OtherViewController" bundle:nil]))
        return nil;

    if (!anArray) {
        @throw [NSException exceptionWithName:@"OtherViewControllerBadInitCall" reason:@"array is nil" userInfo:nil];
    }

    _myArray = anArray;

    return self;
}

//...
@end 
```

然后您可以像这样初始化并显示您的控制器：

```
OtherViewController *otherViewController = [[OtherViewController alloc] initWithArray:greatJSONArray];
[self.navigationController pushViewController:otherViewController animated:YES]; 
```

你去吧。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:34:50.867

好吧，您还没有概述是向前还是向后发送数据。在后一种情况下，您将需要实现协议和委托（定义您自己的协议），但对于前一种情况，您只需要创建要在任何其他类中访问的对象的属性。在 Web 服务的情况下，如果您遵守 MVC 架构的规范，最好使用协议和委托。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T08:29:35.403

您可以在第二个 ViewController 中定义一个包含 NSArray 的新属性，并在显示之前将第一个数组传递给第二个 ViewController。

# java - Google TV 视频播放器不播放视频

> ID：10547749
> 
> 赞同：1
> 
> 时间：2012-05-11T08:09:37.003
> 
> 标签：java, android, android-emulator, google-tv

我在 Google TV 模拟器上播放视频时遇到问题。

我下载了 Google TV Emulator 的 google-tv-videoplayer 示例。我用 Ubuntu (KVM) 设置了 Eclipse，模拟器加载正常，没有错误。

我没有大量更改代码，只是添加了缺失的资源，并更改了 JSON 请求 url。问题是，它似乎不想播放任何视频。我在错误报告的某处读到它在播放视频时遇到了一些问题，所以我希望有人能提供一些见解或一些关于如何解决这个问题的方向，或者我的选择可以是什么。

简而言之，它从 JSON 响应中获取视频文件的直接 URL，所有解析和功能在模拟器上似乎都很好，我看到我的所有 json 条目都正确显示，并且我检查了我的博客以确保 JSON 的正在播放的视频 URL 是正确的，并且没有返回 404。我正在返回一个原始文件，我不知道模拟器是否期望响应中包含一些 HTTP 标头...

Google TV 模拟器在播放我迄今为止测试过的 MPG、MPEG、MP4、WMV 文件时遇到问题。它似乎播放的唯一视频是 m4v 类型的文件。尽管在播放该视频时，分辨率看起来有些失真，但我附上了一张屏幕截图，显示了发生的情况。似乎是一个较大的视频帧卡在了背景中，然后实际上在其上播放了一个较小的视频...（检查图片链接）

[http://priceswagger.com/src/priceswagger_stuff/images/sshelp.png](http://priceswagger.com/src/priceswagger_stuff/images/sshelp.png)

请问有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T00:23:01.003

视频很少在模拟器上运行。

# iphone - 如何获取 UITextField.tag+1？

> ID：10547756
> 
> 赞同：1
> 
> 时间：2012-05-11T08:10:31.737
> 
> 标签：iphone, tags, uitextfield

我正在尝试在下一个文本字段的文本字段中进行更改。例如，如果我调用 TextFieldShouldReturn 方法（当时此方法中的标签为 0，我想对标签为 1 的文本字段执行操作），现在我尝试让我的下一个文本字段成为第一响应者。两个文本字段具有相同的 IBOutlet 但不同的标签。

我是新手，所以请不要介意我的愚蠢问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:41:41.597

您可以使用 UIViews 方法[`viewWithTag:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW26)来获取下一个 UITextField。

也许是这样的：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    UITextField *nextTextField = (UITextField *)[self.view viewWithTag:textField.tag+1];
    [nextTextField becomeFirstResponder];
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:18:45.333

你的意思是你想在 textFieldShouldReturn 方法中获取标签号？

这是方法：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    int tag = textField.tag; // then do whatever you want with this information
} 
```

# ios - 函数“vDSP_vfltu16”（在 vDSP 中）实际上是做什么的？

> ID：10547758
> 
> 赞同：0
> 
> 时间：2012-05-11T08:10:41.650
> 
> 标签：ios, accelerate-framework

它是 iOS 中 vDSP 中的一个功能。参考说这个功能

```
Converts an array of unsigned 16-bit integers to single-precision floating-point values. 
```

但实际上创造了什么？例如，我有一系列存储语音样本的 16 位整数。当我调用这个函数时，我实际上得到了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:18:09.547

什么都没有被*创造*。您在参数中传入一个包含 N 个无符号 16 位短整数`A`的数组和一个包含 N 个浮点数的数组，`__vDSP_C`并且例程将无符号短整数值转换为浮点数。例如，如果`A[0] = 42`then`__vDSP_C[0]`将被设置为`42.0f`.

```
void vDSP_vfltu16 (
   unsigned short *A,
   vDSP_Stride __vDSP_I,
   float *__vDSP_C,
   vDSP_Stride __vDSP_K,
   vDSP_Length __vDSP_N
); 
```

[developer.apple.com](http://developer.apple.com)上有合理的文档：[https ://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Accelerate/Reference/vDSPRef/Reference/reference.html)

# android - 如何在通知内的 Android 中制作更新的进度条？

> ID：10547759
> 
> 赞同：0
> 
> 时间：2012-05-11T08:10:43.873
> 
> 标签：android, notifications, progress-bar

我对 Android 中的 Notification + ProgressBar 有疑问。我想开发一个功能，比如从 Google Play 安装 apk。我想要的是当任何人从市场上安装任何应用程序时，用户将能够在通知区域中看到该安装的进度。我想在我的应用程序中开发同样的东西。如何在通知区域显示某些活动的更新进度？

如果有人有任何想法，请帮助我或为我提供一些教程资源。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:15:23.823

为您的通知提供自定义视图：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#CustomExpandedView)

# android - 影子不工作“Android”

> ID：10547764
> 
> 赞同：3
> 
> 时间：2012-05-11T08:11:08.597
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/am"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="Admissions"
        android:layout_marginLeft="14dp"            
        android:textColor="#33b5e5"
        android:shadowColor="#ffffff"
        android:textSize="28dp"
        android:shadowDx="4"
        android:shadowDy="4"
        android:textAppearance="?android:attr/textAppearanceLarge"
    />
</RelativeLayout>

</LinearLayout> 
```

这是我的代码..我正在尝试为我的文字赋予雕刻效果..所以我将白色阴影应用于蓝色类颜色..但没有阴影效果..告诉我该怎么做..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-11T08:14:13.123

你错过了：

```
android:shadowRadius="5" 
```

没有半径就行不通。

# symfony - 是否可以使用 symfony2 中的 FormBuilder 生成动态表单？

> ID：10547766
> 
> 赞同：2
> 
> 时间：2012-05-11T08:11:20.797
> 
> 标签：symfony

如此处所示[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)可以使用数据事件动态生成表单。

在给定的示例中，新字段添加了一个*FormFactory*，这比*buildForm*方法中提供的*FormBuilder方便一些。*

 **在buildForm*方法中有一种构建动态表单的方法：

```
$this->createForm(new MyFormType(), $object); 
```

在*buildForm*方法中，您可以将选项数组中的对象作为“数据”，从而提供一种根据数据动态构建表单的方法。

这不如数据事件强大（请求绑定就是一个例子）。

有没有办法将数据事件与*FormBuilder*一起使用？我认为无论您是构建静态表单还是动态表单，表单构建都应该是无缝的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T18:48:53.667

您可以创建字段：

```
public function buildView(FormView $view, FormInterface $form)
{
    $data = $form->getClientData();
    if ($data && is_array($data) && count($data)) {
        $children = $form->getChildren();
        foreach ($data as $k => $v) {
            $children[$k]->add($this->form_factory->createNamed('hidden', 'name', $v))
        }
    }
} 
```*

# object - 钛移动 - 普通 JS。启动 fireEvent 时对象值丢失

> ID：10547774
> 
> 赞同：2
> 
> 时间：2012-05-11T08:11:59.060
> 
> 标签：object, titanium, undefined, titanium-mobile, commonjs

我正在用javascript开发一个钛手机应用程序。动态菜单将每个新对象(id,text,...., page) 插入到 for (var x in tab) 的循环中。

有了这些项目，就形成了具体的看法。

变种物品 = []; var menuIconsItem = require('view/module/menuIconsItem');

```
for(var i in itemTab) {
    var page = itemTab[i].page;

    items[i] = new menuIconsItem(itemTab[i]);

    menuFirstLine.add(items[i]);
    (function(itemsEvent) {
        itemsEvent.addEventListener('click', function() {

            Ti.App.fireEvent('test' +i, {
                id : i
            });
        })
    })(items[i]);

} 
```

在另一控制器端，我只得到最后一个 id 参考。

如果 i = 0 到 5，我只得到最后一个引用。其余的未定义。

请问我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T11:33:12.277

首先你必须`id`为你的 menuIconsItem 设置，我在这里以按钮为例。

```
items[i] = Titanium.UI.createButton({
        id:"button_"+i,
        _index: i
}) 
```

然后这样做：

```
(function(itemsEvent) {
       itemsEvent.addEventListener('click', function(e) {

           alert(e.source.id);
       })
 })(items[i]); 
```

# c# - 在 Compact Framework 中编组字符数组

> ID：10547776
> 
> 赞同：0
> 
> 时间：2012-05-11T08:12:17.380
> 
> 标签：c#, compact-framework, pinvoke

在紧凑的框架（3.5）上，我有一个 pinvoke 如下：

```
[DllImport("VAMDll.dll", SetLastError = true, EntryPoint = "openLiteSpatial")]
public static extern int OpenLiteSpatial(byte[] mode, byte[] data, byte[] capture, IntPtr callback); 
```

对于以下本机函数 sig：

```
int openLiteSpatial(char *mode, char *data, char *capture, void callBack(char *, char *)); 
```

向内传递参数可以正常工作，如下所示：

```
Native.OpenLiteSpatial(Encoding.UTF8.GetBytes(Mode.FunctionalLocation), Encoding.UTF8.GetBytes(functionalLocation), Encoding.UTF8.GetBytes(capture), Marshal.GetFunctionPointerForDelegate(callback)); 
```

但是在我的回调中，我必须对回调参数字符串进行一些奇怪的转换：

```
public delegate void LiteSpatialCallback(string attributeData, string geoCoordinate);
    public static void Callback(string attributeData, string geoCoordinate)
    {
        byte[] decodedAttributeData = Encoding.Unicode.GetBytes(attributeData);
        byte[] decodedGeoCoordinate = Encoding.Unicode.GetBytes(geoCoordinate);

        attributeData = Encoding.UTF8.GetString(decodedAttributeData, 0, decodedAttributeData.Length);
        geoCoordinate = Encoding.UTF8.GetString(decodedGeoCoordinate, 0, decodedGeoCoordinate.Length);
    } 
```

我尝试在 DllImport 属性上指定 Charset，并使用 byte[] 数组（这会导致根本不调用回调），并指定各种 MarshalAs 选项。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T02:35:33.490

我倾向于将 IntPtrs 传递给委托参数，然后使用内存窗口来查看它们返回的确切内容。它是指向数据的指针吗？指向指针的指针？数据本身？它是 Unicode 还是 ASCII？所有这些都可以通过遍历返回的地址来确定。然后，您可以直接从该目标手动复制，也可以根据您的发现重新处理 P/Invoke 和/或委托签名。

# glassfish - 计数未初始化类 JRLoader

> ID：10547777
> 
> 赞同：0
> 
> 时间：2012-05-11T08:12:20.797
> 
> 标签：glassfish, jasper-reports, ejb

我正在尝试将 JR 报告嵌入到 EJB 中，然后使用 web 服务呈现为 pdf。我将报告文件放入 src\reports 文件夹。该*`getResourceAsStream`*方法工作正常并返回一个流，但是当我调用时*`JRLoader.loadObject`*出现此错误：

```
java.lang.NoClassDefFoundError: Could not initialize class net.sf.jasperreports.engine.util.JRLoader 
```

我正在使用 NetBeans 开发并在 GlassFish 服务器上运行（在 Windows 上）

```
InputStream reportStream = this.getClass().getResourceAsStream("/reports/AlterDesignReport.jasper"); 
JasperReport jasperReport = (JasperReport)JRLoader.loadObject(reportStream); 
```

PS：此报告取自 JasperReports 的示例项目，但我尝试使用我的报告

# symfony - 将自定义属性添加到所有 symfony2 控制器

> ID：10547778
> 
> 赞同：1
> 
> 时间：2012-05-11T08:12:20.893
> 
> 标签：symfony

有没有办法以某种方式预处理控制器数据。我将从会话中获取参数，对其进行验证并将其分配为控制器属性，并将其用作 $this->myVar 内部某个控制器的操作或所有控制器（如果可能）。使用控制器的构造函数什么也没给我，我无法访问请求和会话数据。谢谢！

UPD：谢谢，[jkucharovic](https://stackoverflow.com/users/1178578/jkucharovic)，非常好的解决方案。还有一个更脏的解决方案，没有注入： setContainer() 方法，在 $controller = new Controller(); 之后直接调用

```
use Symfony\Component\DependencyInjection\ContainerAwareInterface,
    Symfony\Component\DependencyInjection\ContainerInterface;

class AppServiceController extends Controller {
 private $my_property;

 /**
  * Used as constructor
  */
 public function setContainer(ContainerInterface $container = null)
 {
    parent::setContainer($container);   
    $this->my_property = 'foo';
    // your controller code
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:34:41.843

我不确定你不想做的事情是否很有用。每次调用控制器时都会创建一个控制器实例。每次调用控制器时，会话和请求都会有所不同。

我认为您应该使用快捷方法创建一个`BaseController`类扩展`Controller`类，以在会话中访问您的 MyVar 值。

```
class BaseController extends Controller 
{
    public function getMyVar()
    {
        return $this->get('session')->get('MyVarSessionKey');
    }
} 
```

您的所有其他 Controller 都将从 this 扩展`BaseController`。

要获取请求，只需使用`Controller`类提供的快捷方式，`Controller::getRequest()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:49:50.280

如果要在`__construct`方法中使用服务，则必须先[注入该服务](http://symfony.com/doc/current/book/service_container.html#core-symfony-and-third-party-bundle-services)。然后您可以在任何其他方法之前使用它们。例如：

```
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Session;

public function __construct(Request $request, Session $session)
{
    …
} 
```

# javascript - 暂时禁用 touchmove 上的滚动（移动）

> ID：10547779
> 
> 赞同：0
> 
> 时间：2012-05-11T08:12:23.350
> 
> 标签：javascript, jquery, mobile

我已经在网上搜索了几天，但没有找到解决我问题的方法。我正在构建一个移动网站，上面会有一些元素，可以通过在它们上滑动手指来水平滚动。到目前为止，这工作正常。

为了防止页面在滑动时垂直滚动，我将 event.preventDefault() 添加到 touchmove 事件中，这就是问题所在；我希望用户能够在垂直滑动此元素时滚动页面，但前提是他/她滑动它，比如说 60 像素（垂直）。我怎样才能做到这一点？使用我使用的代码，执行“else”（当滚动长度超过 70px 时），但不会发生滚动。我想做的甚至可能吗，在那种情况下怎么做？

这是我尝试过的一些代码：

```
$(Carousel_Wrapper).bind('touchstart', function(event) 
{
    // Some other stuff happens here

    // Set last y-coord
    Carousel_LastPageY = event.originalEvent.touches[0].pageY;

    // Bind the touchmove event
    $(Carousel_Wrapper).bind('touchmove', function(event) 
    {
        // The function which scrolls the content of the element
        Carousel_Drag(event.originalEvent.touches[0].pageX, event);

        // Calculate the vertical swipe length
        var Carousel_VerticalSwipeLength = event.originalEvent.touches[0].pageY - Carousel_LastPageY;

        // Convert to a positive value
        if(Carousel_VerticalSwipeLength < 0)
        {
            Carousel_VerticalSwipeLength = Carousel_VerticalSwipeLength * -1;
        }

        // If the vertical scroll-length is less than 70px
        if(Carousel_VerticalSwipeLength < 70)
        {
            event.preventDefault();
        }

        // The scroll-length was more than 70px, resume scrolling
        else
        {
            // I've tried this:
            return true;

            // Then this:
            $(Carousel_Wrapper).unbind('touchmove');

            // And at last this:
            $(Carousel_Wrapper).unbind('touchmove');
            $(Carousel_Wrapper).trigger('touchmove');
        }
    });
}); 
```

任何帮助表示赞赏！

谢谢， 亨里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:32:07.933

您的变量应该存储触摸差异的总和。您的变量看起来只查看每个差异的数量，而不是它们的总和。

# ruby-on-rails - 如何通过ajax刷新div

> ID：10547780
> 
> 赞同：0
> 
> 时间：2012-05-11T08:12:31.860
> 
> 标签：ruby-on-rails, ajax

目前我正在使用 rails 3.0.3 开发一个网站。

我有一个名为**events**的模型。在我的**events_controller.rb**文件中，我有这样的代码：

```
def destroy
  @event = Event.find(params[:id])
  @event.destroy
  #redirect_to events_url
  respond_to do |format|
    format.html { redirect_to (events_url), :notice => 'Event deleted' }
    format.js
  end
end 
```

* * *

我有一个**index.html.haml**文件，我写了这个：

```
- content_for :title do
  Listing Events

%div#event
  = render :partial => "task" 
```

* * *

我有一个名为**_task.html.haml的****部分**文件 ，我在其中分配了 div id 和 ajax 远程 true：像这样-

 **```
- @events.each do |event|
  %ol.hoverbox
    %li.all{:id =>"event_#{event.id}"}
      = link_to image_tag(event.photo.url), event_path(event)
      .abc
        = event.name
        %br/
      .bca
        = event.start_date
        = event.start_time
        = link_to 'Delete', event, :confirm => 'Are you sure?',
                                   :method => :delete,
                                   :remote => :true 
```

* * *

最后我有我 写的**destroy.js.haml** -

```
$('##{dom_id(@event)}').remove(); 
```

* * *

它使用 ajax 成功删除，但计数器显示相同的值，手动刷新页面后计数器正在减少。请告诉如何通过 ajax 更新。

在我的模型**event.rb**文件中，我正在计算这样的事件数以维护计数器：

```
 def current_date
        Date.today
    end

    def self.find_current
        Event.find :all, :conditions => ['(start_date  = current_date)'], :order => 'start_date '
    end

    def self.count_past(current_date = Date.today)
       Event.count :all, :conditions => ['start_date < ?', current_date], :order => 'start_date'
    end

    def self.count_upcoming(current_date = Date.today)
       Event.count :all, :conditions => ['start_date > ?', current_date], :order => 'start_date'
   end

    def self.count_today(current_date = Date.today)
        Event.count :all, :conditions => ['start_date = ?', current_date], :order => 'start_date'
    end 
```

* * *

我还有一个部分位于名为**subnav.html.haml**的布局中，我在网页上显示计数

```
 %li
        - if params[:controller] == "brands"
          // my code
        - elsif params[:controller] == "events"
          %a.blue.tt-top-center{:title => "Today's Events", :href => events_path(:view => "today") }#{Event.count_today}
          %span Today's Events

  %li
    - if params[:controller] == "brands"
 //my code
    - elsif params[:controller] == "events"
      /= link_to "Upcomming events", events_path(:view => "upcoming") 
      %a.tt-top-center{:title => "upcomming Events", :href => events_path(:view => "upcoming") }#{Event.count_upcoming}
      %span Upcoming Events 
```

我搜索了许多链接，但没有更新我的计数的方法，请帮助我并以详尽的方式让我理解，因为在网站上他们给出的提示与我的标准不匹配，所以请帮助我并使用相同的名称我在我的代码中使用的类和 url，我非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:20:43.443

入档`$('##{dom_id(@event)}').reset();`。`destroy.js.erb`**

# ubuntu - 试图建立第二个站点

> ID：10547781
> 
> 赞同：1
> 
> 时间：2012-05-11T08:12:53.730
> 
> 标签：ubuntu, apache2, web-hosting, multiple-sites

我在`apache2`服务器上设置第二个站点时遇到问题。我目前有一个站点启动并运行，它甚至还活着。但是，我正在开发另一个站点，并尝试在本地托管它。我创建了一个名为 newsite 的站点可用文件，其中包含以下内容

```
&#60;VirtualHost *:80>
        ServerName newsite
        ServerAdmin webmaster@localhost

    DocumentRoot /var/www/newsite/
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/newsite/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory> 
```

我用`a2ensite`newsite启用它

我编辑主机文件 127.0.0.1 www.newsite.com

我已经运行了`a2ensite`newsite

现在，当我查看新站点时它工作正常，但是当我尝试查看我的原始站点时，我只得到新站点

如果我禁用新站点（a2dissite newsite），则原始站点显示正常

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T10:43:20.143

我认为你没有正确设置你的`ServerName`和`ServerAlias`指令。

对于您的两个虚拟主机，它们应该是这样的

```
 ServerName newsite.com 
 ServerAlias www.newsite.com 
 ServerName oldsite.com 
 ServerAlias www.oldsite.com 
```

当前发生的情况是您已经设置了一个名为 newsite 的虚拟主机。如果你这样做`http://newsite/`：你会看到新网站，不管你在做什么`www.newsite.com`。同样，如果你这样做`http://oldsite/`（假设它的设置方式相同），你也会看到 oldsite.

当您这样做时`www.newsite.com`，您的 DNS 会将您定向到环回接口，但是，当 apache 收到请求时，它不知道如何处理它。所以它只选择了一个。这与您尝试仅通过 IP 访问没有什么不同。

因此，解决方案是您调用`http://newsite/`或修复您的`ServerName`and`ServerAlias`指令。

# algorithm - 如何计算 B+ 树的查找时间为 O(log(n))

> ID：10547785
> 
> 赞同：4
> 
> 时间：2012-05-11T08:13:04.590
> 
> 标签：algorithm, tree, indexing, b-tree

我正在研究 B+树的索引，我试图理解的不仅仅是记住结构。据我了解，B+树的内部节点在叶子上形成一个索引，叶子包含指向数据在磁盘上存储位置的指针。正确的？那么查找是如何进行的呢？如果 B+tree 比二叉树好得多，为什么我们不到处使用 B+tree 而不是二叉树呢？

我阅读了关于 B+ 树的维基百科文章，我了解其结构，但不了解实际查找的执行方式。你能指导我一些阅读材料的链接吗？

除了数据库索引之外，B+ 树还有哪些其他用途？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T18:43:48.837

> 我正在研究 B+树的索引，我试图理解的不仅仅是记住结构。据我了解，B+树的内部节点在叶子上形成一个索引，叶子包含指向数据在磁盘上存储位置的指针。正确的？

不，索引由*内部*节点（非叶子）形成。根据实现，叶子可能包含键/值对或键/指向值对的指针。例如，数据库索引使用后者，除非它是 IOT（索引组织表），在这种情况下，值内联在叶子中。这主要取决于密钥的值是否非常大。

> 那么查找是如何进行的呢？

在根节点不是叶子的一般情况下（起初确实会发生），根节点包含一个由 N 个键和 N+1 个指针组成的排序数组。您对两个键 S0 和 S1 进行二进制搜索`S0 <= K < S1`（其中 K 是您要查找的内容），这将为您提供指向下一个节点的指针。

你重复这个过程，直到你（最终）点击一个叶子节点，它包含一个排序的键值对列表，并对它们进行最后的二分搜索。

> 如果 B+tree 比二叉树好得多，为什么我们不到处使用 B+tree 而不是二叉树呢？

*   二叉树更容易实现。一个带有 B+Trees 的 cookie 是调整内部节点中键/指针的数量和叶节点中键/值对的数量。另一个虽然 cookie 是决定导致分组两个节点或爆炸一个节点的低水位线和高水位线。
*   二叉树还提供内存稳定性：插入的元素在内存中根本不会移动。另一方面，在 B+Tree 中插入一个元素或删除一个元素可能会导致元素混洗
*   B+Trees 是为小键/大值的情况量身定制的。他们还要求可以复制密钥（希望便宜）。

> 你能指导我一些阅读材料的链接吗？

我希望我解释的粗略算法有所帮助，否则请随时在评论中提问。

> 除了数据库索引之外，B+ 树还有哪些其他用途？

同样：文件系统索引也有好处。

这个想法总是一样的：B+Tree 非常适合小键/大值和缓存。这个想法是让所有的键（内部节点）都在你的*快速*内存中（CPU 缓存 >> RAM >> 磁盘），B+Tree 通过将键推到底部来实现大型集合。由于所有内部节点都在快速内存中，每次搜索时您只有一次慢速内存访问（以获取值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T08:32:43.987

B+ 树比二叉树好，所有 dbms 都使用它们，

在 B+Tree 中查找是 LOGF N 是 F LOG 的基数和扇出。查找的执行方式与二叉树完全相同，但扇出更大且高度更低，这就是为什么它更好的原因。

B+Tree 通常以在叶子中拥有数据而闻名（如果它们是非集群的，则可能不是），这意味着您不必再次跳转到磁盘来获取数据，您只需从叶子中获取数据。

B+Tree 几乎无处不在，操作系统使用它们，数据仓库（这里不多，但仍然如此），许多应用程序。

B+Tree 非常适合范围查询，只要您有唯一值（如主键或任何具有低基数的字段），就可以使用 B+Tree。

如果你能得到这本书[http://www.amazon.com/Database-Management-Systems-Raghu-Ramakrishnan/dp/0072465638](https://rads.stackoverflow.com/amzn/click/com/0072465638)它是最好的之一。它基本上是任何数据库人员的圣经。

# objective-c - ASIHTTPRequest requestFinished 未调用

> ID：10547787
> 
> 赞同：1
> 
> 时间：2012-05-11T08:13:18.880
> 
> 标签：objective-c, ios, asihttprequest, static-libraries

我正在为 iphone 编写一个小静态库 (lib.a)，我正在使用 ASIHTTPRequest 来管理我的数据发布等。

我有主实现（@implementation BlaBla），但在主 .m 文件中，我有另一个（@interface Foo）和（@implementation Foo）用于私有方法。

我已经在 (@interface Foo) 中实现了 ASIHTTPRequestDelegate，但是 - (void)requestFinished:(ASIHTTPRequest *)request，但是这个方法没有执行！

不管我做什么，它都不起作用。我添加了 NSLog 来记录 requestFinished 方法，但它不起作用。

示例代码：

```
@interface  ActionsManager : NSObject <ASIHTTPRequestDelegate>

+ (void)blabla; 

@end

@implementation ActionsManager 

+ (void)blabla{

    NSURL *requestUrl = [NSURL URLWithString:[NSString stringWithFormat:@"Bla.com/bla"]];

    BlaRequest = [[[ASIFormDataRequest alloc] initWithURL:requestUrl]autorelease];

    self = [BlaRequest delegate];
    [BlaRequest setPostValue:blabla forKey:@"bla"];
     [BlaRequest setRequestMethod:@"POST"];
    [BlaRequest startAsynchronous];

}

- (void)requestFinished:(ASIHTTPRequest *)request{
      NSLog(@"request finished");

}

- (void)requestStarted:(ASIHTTPRequest *)request{

    NSLog(@"request started");

}

@end

@implementation MainImplementation 

- (id)init
{    
    self = [super init];
    if (self) {

    }

    return self;

}

+ (void)bbb{

[ActionsManager blabla];

}

@end 
```

我会非常感谢任何帮助！

顺便说一句，可能是因为实例方法（-）还是类方法（+）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:39:23.390

你从一个类方法调用 self ，你的代码应该是这样的：

```
@interface  ActionsManager : NSObject <ASIHTTPRequestDelegate>
- (void)blabla; 
@end

@implementation ActionsManager 

    - (void)blabla{

        NSURL *requestUrl = [NSURL URLWithString:[NSString stringWithFormat:@"Bla.com/bla"]];

        ASIFormDataRequest *blaRequest = [ASIFormDataRequest requestWithURL:requestUrl];

        blaRequest.delegate = self;
        [blaRequest setPostValue:@"blabla" forKey:@"bla"];
        [blaRequest setRequestMethod:@"POST"];
        [blaRequest startAsynchronous];

    }

    - (void)requestFinished:(ASIHTTPRequest *)request{
          NSLog(@"request finished");

    }

    - (void)requestStarted:(ASIHTTPRequest *)request{

        NSLog(@"request started");

    }

    @end

    @implementation MainImplementation 

    - (id)init
    {    
        self = [super init];
        if (self) {

        }

        return self;

    }

    + (ActionsManager *)bbb{

    ActionsManager *a = [ActionsManager new];
    [a blabla];
    return [a autorelease]; 
    }

    @end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:19:55.070

不应该是：

```
 BlaRequest.delegate = self; 
```

代替：

```
 self = [BlaRequest delegate]; 
```

# xdebug - Xdebug + KcacheGrind 输出图显示百分比高于 100%

> ID：10547790
> 
> 赞同：2
> 
> 时间：2012-05-11T08:13:36.803
> 
> 标签：xdebug, kcachegrind

我正在使用 kcacheGrind 来可视化由 xdebug 保存的 symfony 应用程序的调试输出。我指的是“调用图”来查看执行图及其时间。

我在 kCacheGrind 中设置了以下选项，如下所示。

*   %相对 - 开启
*   相对于父级 - 开启
*   循环检测 - 关闭

我的部分输出如下。![在此处输入图像描述](../Images/b89cea380ce6a57ff5e1ec5f97506547.png)

问题在于它在某些课程中显示的时间百分比超过 100。可以看到 sfFilterChain->execute() 占用了 216% 的执行时间。这可能吗。那是什么信息。

我也启用了循环检测，但并没有解决混乱。

有人可以澄清这个关于执行时间百分比的问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:24:21.423

这是一个错误。Xdebug 目前无法正确检测递归调用。这也有一个错误：[http](http://bugs.xdebug.org/view.php?id=77) ://bugs.xdebug.org/view.php?id=77 - 这非常需要注意。对于 Xdebug 2.3，我打算重做 Xdebug 中的大部分分析器功能。

# javascript - 非常简单，非常流畅，JavaScript 字幕

> ID：10547797
> 
> 赞同：32
> 
> 时间：2012-05-11T08:13:54.370
> 
> 标签：javascript, jquery, html, marquee

我试图找到一个非常简单流畅、轻量级的 javascript 或 jquery marquee。我已经尝试过[丝绸选框](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/)或其他东西，但它不适用于我正在使用的应用程序。所以越简单越短越好——也更容易调试。有人知道一个易于实现的 javascript 替换选框吗？

[巴斯宾](http://pastebin.com/L9EmncR1)

**代码**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script type="text/javascript">
var tWidth='300px';                  // width (in pixels)
var tHeight='25px';                  // height (in pixels)
var tcolour='#ffffcc';               // background colour:
var moStop=true;                     // pause on mouseover (true or false)
var fontfamily = 'arial,sans-serif'; // font for content
var tSpeed=3;                        // scroll speed (1 = slow, 5 = fast)

// enter your ticker content here (use \/ and \' in place of / and ' respectively)
var content='Are you looking for loads of useful information <a href="http:\/\/javascript.about.com\/">About Javascript<\/a>? Well now you\'ve found it.';

var cps=-tSpeed; var aw, mq; var fsz = parseInt(tHeight) - 4; function startticker(){if (document.getElementById) {var tick = '<div style="position:relative;width:'+tWidth+';height:'+tHeight+';overflow:hidden;background-color:'+tcolour+'"'; if (moStop) tick += ' onmouseover="cps=0" onmouseout="cps=-tSpeed"'; tick +='><div id="mq" style="position:absolute;right:0px;top:0px;font-family:'+fontfamily+';font-size:'+fsz+'px;white-space:nowrap;"><\/div><\/div>'; document.getElementById('ticker').innerHTML = tick; mq = document.getElementById("mq"); mq.style.right=(10+parseInt(tWidth))+"px"; mq.innerHTML='<span id="tx">'+content+'<\/span>'; aw = document.getElementById("tx").offsetWidth; lefttime=setInterval("scrollticker()",50);}} function scrollticker(){mq.style.right = (parseInt(mq.style.right)>(-10 - aw)) ?
mq.style.right = parseInt(mq.style.right)+cps+"px": parseInt(tWidth)+10+"px";} window.onload=startticker;
</script>
</head>
<body>
<div id="ticker">
    this is a simple scrolling text!
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-11T08:30:37.797

来自上述评论中的建议的 **简单演示：** [http](http://jsfiddle.net/FWWEn/) : //jsfiddle.net/FWWEn/

鼠标悬停**暂停**功能：http: [//jsfiddle.net/zrW5q/](http://jsfiddle.net/zrW5q/)

希望这会有所帮助，祝你愉快，干杯！

**html**

```
<h1>Hello World!</h1>
<h2>I'll marquee twice</h2>
<h3>I go fast!</h3>
<h4>Left to right</h4>
<h5>I'll defer that question</h5>​ 
```

**jQuery代码**

```
 (function($) {
        $.fn.textWidth = function(){
             var calc = '<span style="display:none">' + $(this).text() + '</span>';
             $('body').append(calc);
             var width = $('body').find('span:last').width();
             $('body').find('span:last').remove();
            return width;
        };

        $.fn.marquee = function(args) {
            var that = $(this);
            var textWidth = that.textWidth(),
                offset = that.width(),
                width = offset,
                css = {
                    'text-indent' : that.css('text-indent'),
                    'overflow' : that.css('overflow'),
                    'white-space' : that.css('white-space')
                },
                marqueeCss = {
                    'text-indent' : width,
                    'overflow' : 'hidden',
                    'white-space' : 'nowrap'
                },
                args = $.extend(true, { count: -1, speed: 1e1, leftToRight: false }, args),
                i = 0,
                stop = textWidth*-1,
                dfd = $.Deferred();

            function go() {
                if(!that.length) return dfd.reject();
                if(width == stop) {
                    i++;
                    if(i == args.count) {
                        that.css(css);
                        return dfd.resolve();
                    }
                    if(args.leftToRight) {
                        width = textWidth*-1;
                    } else {
                        width = offset;
                    }
                }
                that.css('text-indent', width + 'px');
                if(args.leftToRight) {
                    width++;
                } else {
                    width--;
                }
                setTimeout(go, args.speed);
            };
            if(args.leftToRight) {
                width = textWidth*-1;
                width++;
                stop = offset;
            } else {
                width--;            
            }
            that.css(marqueeCss);
            go();
            return dfd.promise();
        };
    })(jQuery);

$('h1').marquee();
$('h2').marquee({ count: 2 });
$('h3').marquee({ speed: 5 });
$('h4').marquee({ leftToRight: true });
$('h5').marquee({ count: 1, speed: 2 }).done(function() { $('h5').css('color', '#f00'); })​ 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-03T19:35:30.483

我为选取框做了非常简单的功能。请参阅：http: [//jsfiddle.net/vivekw/pHNpk/2/](http://jsfiddle.net/vivekw/pHNpk/2/) 它在鼠标悬停时暂停并在鼠标离开时恢复。速度可以变化。容易明白。

```
function marquee(a, b) {
var width = b.width();
var start_pos = a.width();
var end_pos = -width;

function scroll() {
    if (b.position().left <= -width) {
        b.css('left', start_pos);
        scroll();
    }
    else {
        time = (parseInt(b.position().left, 10) - end_pos) *
            (10000 / (start_pos - end_pos)); // Increase or decrease speed by changing value 10000
        b.animate({
            'left': -width
        }, time, 'linear', function() {
            scroll();
        });
    }
}

b.css({
    'width': width,
    'left': start_pos
});
scroll(a, b);
b.mouseenter(function() {     // Remove these lines
    b.stop();                 //
    b.clearQueue();           // if you don't want
});                           //
b.mouseleave(function() {     // marquee to pause
    scroll(a, b);             //
});                           // on mouse over
}

$(document).ready(function() {
    marquee($('#display'), $('#text'));  //Enter name of container element & marquee element
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-11T15:00:11.257

我刚刚为此创建了一个简单的 jQuery 插件。尝试一下 ;）

[https://github.com/aamirafridi/jQuery.Marquee](https://github.com/aamirafridi/jQuery.Marquee)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-11T08:27:48.757

以下作品：

[http://jsfiddle.net/xAGRJ/4/](http://jsfiddle.net/xAGRJ/4/)

您的原始代码的问题是您`scrollticker()`通过将字符串传递给来调用`setInterval`，您应该在其中传递函数名称并将其视为变量：

```
lefttime = setInterval(scrollticker, 50); 
```

代替

```
lefttime = setInterval("scrollticker()", 50); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-08-05T15:32:05.127

为什么要为 Marquee 编写自定义 jQuery 代码...只需使用 jQuery 插件 - marquee() 并像下面的示例一样使用它：

首先包括：

```
<script type='text/javascript' src='//cdn.jsdelivr.net/jquery.marquee/1.3.1/jquery.marquee.min.js'></script> 
```

进而：

```
//proporcional speed counter (for responsive/fluid use)
var widths = $('.marquee').width()
var duration = widths * 7;

$('.marquee').marquee({
    //speed in milliseconds of the marquee
    duration: duration, // for responsive/fluid use
    //duration: 8000, // for fixed container
    //gap in pixels between the tickers
    gap: $('.marquee').width(),
    //time in milliseconds before the marquee will start animating
    delayBeforeStart: 0,
    //'left' or 'right'
    direction: 'left',
    //true or false - should the marquee be duplicated to show an effect of continues flow
    duplicated: true
}); 
```

如果你能让它更简单更好，我敢说你们所有人:)。不要让你的生活比它应该的更困难。有关此插件及其功能的更多信息，请访问：http: [//aamirafridi.com/jquery/jquery-marquee-plugin](http://aamirafridi.com/jquery/jquery-marquee-plugin)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-08T20:12:36.677

我根据@Tats_innit 上面提供的代码制作了自己的版本。不同的是暂停功能。在这方面工作得更好一些。

```
(function ($) {
var timeVar, width=0;

$.fn.textWidth = function () {
    var calc = '<span style="display:none">' + $(this).text() + '</span>';
    $('body').append(calc);
    var width = $('body').find('span:last').width();
    $('body').find('span:last').remove();
    return width;
};

$.fn.marquee = function (args) {
    var that = $(this);
    if (width == 0) { width = that.width(); };
    var textWidth = that.textWidth(), offset = that.width(), i = 0, stop = textWidth * -1, dfd = $.Deferred(),
        css = {
            'text-indent': that.css('text-indent'),
            'overflow': that.css('overflow'),
            'white-space': that.css('white-space')
        },
        marqueeCss = {
            'text-indent': width,
            'overflow': 'hidden',
            'white-space': 'nowrap'
        },
        args = $.extend(true, { count: -1, speed: 1e1, leftToRight: false, pause: false }, args);

    function go() {
        if (!that.length) return dfd.reject();
        if (width <= stop) {
            i++;
            if (i <= args.count) {
                that.css(css);
                return dfd.resolve();
            }
            if (args.leftToRight) {
                width = textWidth * -1;
            } else {
                width = offset;
            }
        }
        that.css('text-indent', width + 'px');
        if (args.leftToRight) {
            width++;
        } else {
            width=width-2;
        }
        if (args.pause == false) { timeVar = setTimeout(function () { go() }, args.speed); };
        if (args.pause == true) { clearTimeout(timeVar); };
    };

    if (args.leftToRight) {
        width = textWidth * -1;
        width++;
        stop = offset;
    } else {
        width--;
    }
    that.css(marqueeCss);

    timeVar = setTimeout(function () { go() }, 100);

    return dfd.promise();
};
})(jQuery); 
```

用法：

开始： $('#Text1').marquee()

pause: $('#Text1').marquee({ pause: true })

恢复：$('#Text1').marquee({ pause: false })

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-28T19:54:51.910

响应式抵抗 jQuery marquee 简单插件。教程：

```
// start plugin
    (function($){
        $.fn.marque = function(options, callback){

            // check callback

            if(typeof callback == 'function'){
                callback.call(this);
            } else{
                console.log("second argument (callback) is not a function");
                // throw "callback must be a function"; //only if callback for some reason is required
                // return this; //only if callback for some reason is required
            }

            //set and overwrite default functions
            var defOptions = $.extend({
                speedPixelsInOneSecound: 150, //speed will behave same for different screen where duration will be different for each size of the screen
                select: $('.message div'),
                clickSelect: '', // selector that on click will redirect user ... (optional)
                clickUrl: '' //... to this url. (optional)
            }, options);

            //Run marque plugin
            var windowWidth = $(window).width();
            var textWidth = defOptions.select.outerWidth();
            var duration = (windowWidth + textWidth) * 1000 / defOptions.speedPixelsInOneSecound;
            var startingPosition = (windowWidth + textWidth);
            var curentPosition = (windowWidth + textWidth);
            var speedProportionToLocation = curentPosition / startingPosition;
            defOptions.select.css({'right': -(textWidth)});
            defOptions.select.show();
            var animation;

            function marquee(animation){
                curentPosition = (windowWidth + defOptions.select.outerWidth());
                speedProportionToLocation = curentPosition / startingPosition;
                animation = defOptions.select.animate({'right': windowWidth+'px'}, duration * speedProportionToLocation, "linear", function(){
                     defOptions.select.css({'right': -(textWidth)});
                });
            }
            var play = setInterval(marquee, 200);

            //add onclick behaviour
            if(defOptions.clickSelect != '' && defOptions.clickUrl != ''){
                defOptions.clickSelect.click(function(){
                    window.location.href = defOptions.clickUrl;
                });
            }
            return this;
        };

    }(jQuery)); 
// end plugin 
```

使用这个自定义的 jQuery 插件，如下所示：

```
//use example
$(window).marque({
    speedPixelsInOneSecound: 150, // spped pixels/secound
    select: $('.message div'), // select an object on which you want to apply marquee effects.
    clickSelect: $('.message'), // select clicable object (optional)
    clickUrl: 'services.php' // define redirection url (optional)
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-08T16:10:44.330

我的文本框可显示更多文本，并启用绝对位置

[http://jsfiddle.net/zrW5q/2075/](http://jsfiddle.net/zrW5q/2075/)

```
(function($) {
$.fn.textWidth = function() {
var calc = document.createElement('span');
$(calc).text($(this).text());
$(calc).css({
  position: 'absolute',
  visibility: 'hidden',
  height: 'auto',
  width: 'auto',
  'white-space': 'nowrap'
});
$('body').append(calc);
var width = $(calc).width();
$(calc).remove();
return width;
};

$.fn.marquee = function(args) {
var that = $(this);
var textWidth = that.textWidth(),
    offset = that.width(),
    width = offset,
    css = {
        'text-indent': that.css('text-indent'),
        'overflow': that.css('overflow'),
        'white-space': that.css('white-space')
    },
    marqueeCss = {
        'text-indent': width,
        'overflow': 'hidden',
        'white-space': 'nowrap'
    },
    args = $.extend(true, {
        count: -1,
        speed: 1e1,
        leftToRight: false
    }, args),
    i = 0,
    stop = textWidth * -1,
    dfd = $.Deferred();

function go() {
    if (that.css('overflow') != "hidden") {
        that.css('text-indent', width + 'px');
        return false;
    }
    if (!that.length) return dfd.reject();

    if (width <= stop) {
        i++;
        if (i == args.count) {
            that.css(css);
            return dfd.resolve();
        }
        if (args.leftToRight) {
            width = textWidth * -1;
        } else {
            width = offset;
        }
    }
    that.css('text-indent', width + 'px');
    if (args.leftToRight) {
        width++;
    } else {
        width--;
    }
    setTimeout(go, args.speed);
};

if (args.leftToRight) {
    width = textWidth * -1;
    width++;
    stop = offset;
} else {
    width--;
}
that.css(marqueeCss);
go();
return dfd.promise();
};
// $('h1').marquee();
$("h1").marquee();
$("h1").mouseover(function () {     
    $(this).removeAttr("style");
}).mouseout(function () {
    $(this).marquee();
});
})(jQuery); 
```

# asp.net - 解密个人地址给出错误 asp.net

> ID：10547799
> 
> 赞同：0
> 
> 时间：2012-05-11T08:14:01.763
> 
> 标签：asp.net, encryption

我想加密数据库中的地址，它毫无例外地保存，但是当我在加载时解密地址时它给出了错误：

```
Unable to load information. Possible reason: Error in DecodeInvalid length for a Base-64 char array. 

<asp:TextBox ID="txtAddress" runat="server" Width="200px" />
<ajaxToolkit:FilteredTextBoxExtender ID="ftxtAddress" runat="server" TargetControlID="txtAddress"
FilterType="Custom,Numbers, LowercaseLetters" InvalidChars="!@#$%^&*()~`*-/+|\}{[]<>?" ValidChars=",.?-_ " /> 
```

我用：

```
public string Decode(string sData)
{
  try
  {
    System.Text.UTF8Encoding encoder = new System.Text.UTF8Encoding();
    System.Text.Decoder utf8Decode = encoder.GetDecoder();

    byte[] todecode_byte = Convert.FromBase64String(sData);
    int charCount = utf8Decode.GetCharCount(todecode_byte, 0, todecode_byte.Length);
    char[] decoded_char = new char[charCount];
    utf8Decode.GetChars(todecode_byte, 0, todecode_byte.Length, decoded_char, 0);
    string result = new String(decoded_char);
    return result;
  }
  catch (Exception e)
  {
    throw new Exception("Error in Decode" + e.Message);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:00:51.980

在编码方面：

```
string rawText = "123 Any Street, Any City, Any State 99999, USA";
byte[] bytesE =  UTF8Encoding.UTF8.GetBytes(rawText);
//If you have your encryption code and it outputs a byte array, pass that to bytesE
string sData = Convert.ToBase64String(bytesE); 
```

*sData*然后将是“MTIzIEFueSBTdHJlZXQsIEFueSBDaXR5LCBBbnkgU3RhdGUgOTk5OTksIFVTQQ==”。我假设您然后将其存储在您的数据库中。

在解码方面：

```
byte[] bytesD = Convert.FromBase64String(sData);
//If you have your decryption program, you now pass bytesD to it.
string address = UTF8Encoding.UTF8.GetString(bytesD); 
```

*地址*现在将是“123 Any Street, Any City, Any State 99999, USA”

*sData*必须是正确终止的有效 Base64 编码字符串，否则 Convert.FromBase64String 将产生异常。

请记住，如果您没有加密代码，则上述提供的安全性**为零。**

# javascript - 如何管理javascript文件和封装JavaScript/jQuery函数

> ID：10547802
> 
> 赞同：1
> 
> 时间：2012-05-11T08:14:13.293
> 
> 标签：javascript, jquery

我需要为当前项目编写和管理大量 JavaScript 代码。

我主要基于模块将它们分成多个 .js 文件。

所以，现在我有例如：

```
Map.js // deal with google map issue
Common.js // common functions that will share by all modules
User.js // user module js code
Geofence.js // geofence module js code
etc..... 
```

例如，在我的 User.js 文件中

如果我想声明一个仅在 User.js 文件中使用的函数，外部无法访问怎么办？我能做些什么？

```
var User = {};

User.registerModule = function () {
    $('#user').click(function () {
        Common.showLeftScrollbar();

        getAllUsers();

        // ...
    });
}

function getAllUsers(){ // how to hide this function
    // get
    return users;
} 
```

所以，在我的主页中，我只需要协调多个 .js 文件。访问允许访问的内容。

```
 $(document).ready(function (data) {

        GoogleMap.initialiseGoogleMap();

        Common.refreshRightScrollbar();

        User.registerModule();

        // ...
    }); 
```

我是第一次写js，没时间看一整本书。那么，在您看来，这种结构是否适合许多 js 代码？以及如何隐藏我不想让外部访问的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:19:53.633

要隐藏该功能，您有不同的可能性

1.  只需将您的代码包含在一个立即自我执行的匿名函数中

    ```
    var User = {}; // this should not be enclosed too

    (function() {
        User.registerModule = function () {
            $('#user').click(function () {
                Common.showLeftScrollbar();

                getAllUsers();

                // ...
            });
        }

        function getAllUsers(){ // how to hide this function
            // get
            return users;
        }
    })(); 
    ```

2.  将该函数包含在`User.registerModule`函数中

    ```
    User.registerModule = function () {
        function getAllUsers() { ... }

        $('#user').click(function () {
            Common.showLeftScrollbar();

            getAllUsers();

            // ...
        });
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:15:55.103

将此函数放在范围内：

```
User.registerModule = function () {
    function getAllUsers(){ // how to hide this function
        // get
        return users;
    }
    $('#user').click(function () {
        Common.showLeftScrollbar();

        getAllUsers(); // returns users

        // ...
    });
} 
```

它将是*私有*的。

现在，如果您尝试在外部调用此函数，它将是`undefined`：

```
getAllUsers(); // undefined. 
```

# c# - “子串”一个数值

> ID：10547805
> 
> 赞同：3
> 
> 时间：2012-05-11T08:14:18.380
> 
> 标签：c#

在 C# 中，“子串”（因为没有更好的词）长值的最佳方法是什么。

我需要计算拖车记录的帐号总和，但只需要 16 个最低有效字符。

我可以通过将值转换为字符串来做到这一点，但想知道是否有更好的方法可以做到这一点。

```
long number = 1234567890123456789L;
const long _MAX_LENGTH = 9999999999999999L;

if (number > _MAX_LENGTH)
{
  string strNumber = number.ToString();
  number = Convert.ToInt64(strNumber.Substring(strNumber.Length - 16));
} 
```

这将返回值 4567890123456789。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T08:16:12.030

你可以这样做：

```
long number = 1234567890123456789L;
long countSignificant = 16;
long leastSignificant = number % (long) Math.Pow(10, countSignificant); 
```

这是如何运作的？好吧，如果你除以 10，你会去掉最后一位，对吧？其余的将是最后一个数字？100、1000 和`Math.Pow(1, n)`.

让我们只看最不重要的数字，因为我们可以在脑海中做到这一点：

> 1234 除以 10 是 123 余数 4

在 c# 中，这将是：

```
1234 / 10 == 123;
1234 % 10 == 4; 
```

因此，下一步是弄清楚如何获得最后 n 个有效数字。事实证明，这与除以 10*的*n 次方相同。由于 c# 没有指数运算符（如`**`在 python 中），我们使用库函数：

```
Math.Pow(10, 4) == 1000.0; // oops: a float! 
```

我们需要把它改回很长：

```
(long) Math.Pow(10, 4) == 1000; 
```

我认为现在您拥有创建自己的好功能的所有部分；）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T08:16:34.640

您可以使用模（`%`C# 中的运算符）。例如：

```
123456 % 100000 = 23456 
```

或者

```
123456 % 1000 = 456 
```

作为一个快速指南，我一直记得你得到的数字与除数中的零一样多。或者，反之亦然，除数需要尽可能多的零来保留数字。

所以在你的情况下，你需要：

```
long number = 1234567890123456789L;
long divisor = 10000000000000000L;
long result = number % divisor; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T08:36:45.733

完整代码，使用模运算符：

```
long number = 1234567890123456789L;
const long _MAX_LENGTH = 9999999999999999L;

number = number % (_MAX_LENGTH + 1);                

Console.WriteLine (number); 
```

现场测试：http: [//ideone.com/pKB6w](http://ideone.com/pKB6w)

* * *

~~在您对模数方法有所启发之前，您可以同时选择此方法：~~

 ~~```
long number = 1234567890123456789L;
const long _MAX_LENGTH = 9999999999999999L;

if (number > _MAX_LENGTH) {             
    long minus = number / (_MAX_LENGTH +  1) * (_MAX_LENGTH +  1);              
    number = number - minus;
}

Console.WriteLine(number); 
```~~ 

现场测试：http: [//ideone.com/oAkcy](http://ideone.com/oAkcy)

 ~~* * *

笔记：

强烈推荐，使用取模方法，不要使用减法。模数方法是最好的，没有极端情况，即不需要使用`if`语句。~~

# android - 在Android的对话框中显示警报对话框？

> ID：10547808
> 
> 赞同：0
> 
> 时间：2012-05-11T08:14:42.263
> 
> 标签：android

我有一个对话框，它是一个计算器。一旦用户从该计算器单击 OK 按钮，必须计算免费发行/折扣，这取决于需要显示构象更改对话框的标志。设计和显示警报对话框是可以的。

我的问题是显示对话框计算器，在那里我单击 OK ，它显示了警报对话框，无需等待警报对话框结果执行代码的结果。我该怎么办，一旦它得到警报对话框结果只需要做保留部分。

这是我的代码：

```
dialog = new Dialog(SalesActivityGroup.group.getParent());
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
View vLoad = LayoutInflater.from(SalesActivityGroup.group.getParent()).inflate(R.layout.key_pad, null);
dialog.setContentView(vLoad);       
android.view.WindowManager.LayoutParams lp= dialog.getWindow().getAttributes();  
lp.x = xVal;
lp.y = yVal;
lp.width = LayoutParams.WRAP_CONTENT;
lp.height = LayoutParams.WRAP_CONTENT;
lp.gravity = Gravity.TOP | Gravity.LEFT;
lp.dimAmount = 0;            
dialog.getWindow().setAttributes(lp);
dialog.setCancelable(false);
keyamDisplay  = (TextView)dialog.findViewById(R.id.keyamDisplay);
TextView txtName  = (TextView)dialog.findViewById(R.id.txtName);
txtName.setText("Q");

Button  txtDialogOK = (Button)dialog.findViewById(R.id.txtDialogOK);
txtDialogOK.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
    dialog.dismiss();
    popup = false;
    try {

          String productCode= txtCode.getText().toString();
          String number = txtNumber.getText().toString();
          int iVal = 0;  //getting i value
          if(number != "" &&  !number.equals("")){      
                iVal = Integer.parseInt(number);
          }         
         String enteredQty = keyAmount.toString();
         String tmpEnterdPrice = txtPrice.getText().toString();
         double enterdPrice = Double.parseDouble(tmpEnterdPrice);

   if(tmpQty > Double.parseDouble(stk.getText().toString())){
        if(disStockVali.equals("1")) { //Confirmation message if yes no discount , only entered <<Qty>>
            AlertDialog.Builder disco = new AlertDialog.Builder(SalesActivityGroup.group.getParent());
            disco.setMessage("Discount Qty Not Enough!! \n Do you want to continue without discount ?");
            disco.setCancelable(false);
            disco.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
               dialog.dismiss();
               disStatus ="YES";
             }
            });

            disco.setNegativeButton("No", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
                disStatus ="NO";
               }
          });
           disco.setTitle("Qty Not Enough");
           disco.show();
           System.out.println("==disStatus=="+disStatus);

           if(disStatus.equals("YES")) {
              System.out.println("==YES YES====");
              System.out.println("=YES=QTY==" + txtQty.getText().toString());
              disPro.setDiscountQty(0);
              disPro.setDiscountProductCode("");
              disPro.setDiscountValue(0.00);
           }else {
              enteredQty = "0";
              txtQty.setText("0");
              valueInDouble = 0.00;
              disPro.setDiscountQty(0);
              disPro.setDiscountProductCode("");
              disPro.setDiscountValue(0.00);
    }
}
   System.out.println("==2 QTY ==" +txtQty.getText().toString());
   System.out.println("==valueInDouble ==" +valueInDouble);
   double tmpNet = valueInDouble - disPro.getDiscountValue();
   txtVal.setText(df.format(tmpNet)); 
   // TAX calculation
   VatTax vatTax =  calculateLineTax(productCode,Double.parseDouble(txtVal.getText().toString()));

     }catch (Exception e) {
   e.printStackTrace();
      }
  dialog.dismiss();
 }
   });
  dialog.show(); 
```

![在此处输入图像描述](../Images/2c503525d8587ee245eef22d2d6106b9.png)

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:03:44.143

Are you expecting like this?

```
public void Alert(String text, String title)
    { 
        AlertDialog dialog=new AlertDialog.Builder(context).create();
        dialog.setTitle(title);
        dialog.setMessage(text);
        if(!title.equals("") && !text.equals(""))
        {
            dialog.setButton("OK",
                    new DialogInterface.OnClickListener()
                    {
                        public void onClick(DialogInterface dialog, int whichButton)
                        {
                            AlertDialog dg=new AlertDialog.Builder(context).create();
            dg.setTitle("OK Pressed");
            dg.show();
                        }
                    });
            dialog.setButton2("Cancel",
                    new DialogInterface.OnClickListener()
                    {
                        public void onClick(DialogInterface dialog, int whichButton)
                        {
                            AlertDialog dg=new AlertDialog.Builder(context).create();
            dg.setTitle("Cancel Pressed");
            dg.show();
                        }
                    });
        }

        dialog.show();

    } 
```

# c++ - C++ Noobie - 为什么移动这些行会破坏我的应用程序？

> ID：10547812
> 
> 赞同：4
> 
> 时间：2012-05-11T08:15:10.110
> 
> 标签：c++

这是我第一次尝试 C++，下面是一个通过控制台应用程序计算小费的示例。完整的（工作代码）如下所示：

```
// Week1.cpp : Defines the entry point for the console application.

#include "stdafx.h"
#include <iostream>
#include <string>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    // Declare variables
    double totalBill = 0.0;
    double liquour = 0.0;
    double tipPercentage = 0.0;
    double totalNoLiquour = 0.0;
    double tip = 0.0;
    string hadLiquour;

    // Capture inputs
    cout << "Did you drink any booze? (Yes or No)\t";
    getline(cin, hadLiquour, '\n');

    if(hadLiquour == "Yes") {
        cout << "Please enter you booze bill\t";
        cin >> liquour;
    }

    cout << "Please enter your total bill\t";
    cin >> totalBill;

    cout << "Enter the tip percentage (in decimal form)\t";
    cin >> tipPercentage;

    // Process inputs
    totalNoLiquour = totalBill - liquour;
    tip = totalNoLiquour * tipPercentage;

    // Output
    cout << "Tip: " << (char)156 << tip << endl;
    system("pause");

    return 0;
} 
```

这工作正常。但是，我想搬家：

```
cout << "Please enter your total bill\t";
cin >> totalBill; 
```

成为第一行：

```
 // Capture inputs 
```

但是当我执行应用程序中断时（它会编译，但只是忽略 if 语句，然后同时打印两个 cout。

我挠头，因为我不明白发生了什么——但我假设我是个白痴！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T08:35:59.103

试试这个

```
 // Capture inputs
cout << "Please enter your total bill\t";
cin >> totalBill;
cin.clear();
cin.sync(); 
```

请参阅 [c++ getline() 在多次调用时不等待来自控制台的输入](https://stackoverflow.com/questions/7786994/c-getline-isnt-waiting-for-input-from-console-when-called-multiple-times)

或者，最好不要使用 getline：

```
cout << "Please enter your total bill\t";
cin >> totalBill;

cout << "Did you drink any booze? (Yes or No)\t";
cin >> hadLiquour; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:39:28.560

`totalBill`是一个数字，即程序“消耗”您输入的所有数字。假设您输入了：

42.2[返回]

42.2 被复制到`totalBill`. [RETURN] 不匹配，并保留在输入缓冲区中。

现在，当您调用 时`getline()`，[RETURN] 仍然坐在那里......我相信您可以从那里找出其余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:51:18.557

Cin 不会从流中删除换行符或进行类型检查。因此，使用`cin>>var;`并跟进另一个`cin >> stringtype;`or`getline();`将收到空输入。最好***不要混合***cin 中不同类型的输入法。

[更多信息见[链接]](http://www.cplusplus.com/forum/articles/6046/)

你可以改变你的代码如下：

```
cout << "Please enter your total bill\t";
getline(cin, hadLiquour);          // i used the hadLiquour string var as a temp var 
                                   // so don't  be confused
stringstream myStream(hadLiquour);
myStream >> totalBill; 
```

# android - 如何以编程方式查找 Android 版本名称？

> ID：10547818
> 
> 赞同：32
> 
> 时间：2012-05-11T08:15:31.067
> 
> 标签：android, android-ndk

我编写代码来查找这样的Android版本

```
String version=Build.VERSION.RELEASE; 
```

通过使用此代码，我得到了版本号，但我想要版本名称。如何获取版本名称？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-06T20:17:13.563

如前所述，反思似乎是这个问题的关键。不需要 StringBuilder 和额外的格式，添加它只是为了说明用法。

```
import java.lang.reflect.Field;
...

StringBuilder builder = new StringBuilder();
builder.append("android : ").append(Build.VERSION.RELEASE);

Field[] fields = Build.VERSION_CODES.class.getFields();
for (Field field : fields) {
    String fieldName = field.getName();
    int fieldValue = -1;

    try {
        fieldValue = field.getInt(new Object());
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {
        e.printStackTrace();
    }

    if (fieldValue == Build.VERSION.SDK_INT) {
        builder.append(" : ").append(fieldName).append(" : ");
        builder.append("sdk=").append(fieldValue);
    }
}

Log.d(LOG_TAG, "OS: " + builder.toString()); 
```

在我的 4.1 模拟器上，我得到以下输出：

```
D/MainActivity( 1551): OS: android : 4.1.1 : JELLY_BEAN : sdk=16 
```

享受！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-07-28T13:45:02.197

优化代码，这将起作用：

```
import java.lang.reflect.Field;

Field[] fields = Build.VERSION_CODES.class.getFields();
String osName = fields[Build.VERSION.SDK_INT + 1].getName();
Log.d("Android OsName:",osName); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-05-02T05:36:31.187

在**API 28 (Android Pie)**之后，**Build.VERSION_CODES****更改**了一些字段。

所以，如果你使用：

```
Field[] fields = Build.VERSION_CODES.class.getFields();
String osName = fields[Build.VERSION.SDK_INT + 1].getName(); 
```

由于超出范围异常，将导致您的应用程序立即崩溃。

所有 API 级别的解决方案是：

```
Field[] fields = Build.VERSION_CODES.class.getFields();
String codeName = "UNKNOWN";
for (Field field : fields) {
    try {
        if (field.getInt(Build.VERSION_CODES.class) == Build.VERSION.SDK_INT) {
            codeName = field.getName();
        }
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
} 
```

或者在具有 Java 8 风格的 Kotlin 中：

```
val fields = Build.VERSION_CODES::class.java.fields
var codeName = "UNKNOWN"
fields.filter { it.getInt(Build.VERSION_CODES::class) == Build.VERSION.SDK_INT }
      .forEach { codeName = it.name } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-11T08:19:59.147

[http://developer.android.com/reference/android/os/Build.VERSION_CODES.html](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)包含具有您要查找的名称的字段。因此，您可以使用反射来查找与“版本”值对应的字段。

你为什么要这个名字？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-11T08:19:07.190

您将从这些信息中获取信息

```
android.os.Build.VERSION_CODES 

android.os.Build.VERSION.SDK_INT 
```

可以从此链接获得更多信息：

[以编程方式检索 Android API 版本](https://stackoverflow.com/questions/3423754/retrieving-android-api-version-programmatically)

希望这会帮助你。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-05-03T14:11:44.920

看一下这个：

```
// Names taken from android.os.build.VERSION_CODES
String[] mapper = new String[] {
    "ANDROID BASE", "ANDROID BASE 1.1", "CUPCAKE", "DONUT",
    "ECLAIR", "ECLAIR_0_1", "ECLAIR_MR1", "FROYO", "GINGERBREAD",
    "GINGERBREAD_MR1", "HONEYCOMB", "HONEYCOMB_MR1", "HONEYCOMB_MR2",
    "ICE_CREAM_SANDWICH", "ICE_CREAM_SANDWICH_MR1", "JELLY_BEAN"
};
int index = Build.VERSION.SDK_INT - 1;
String versionName = index < mapper.length? mapper[index] : "UNKNOWN_VERSION"; // > JELLY_BEAN) 
```

请注意，此解决方案仅在版本代码不断增加 1 时才有效，并且您必须使用每个新的 android 版本更新列表（如果准确很重要）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-21T09:45:15.707

如 android 文档中所述，手机运行的 SDK 级别（整数）可用于：

android.os.Build.VERSION.SDK_INT；

这个 int 对应的枚举在 android.os.Build.VERSION_CODES 类中。

代码示例：

```
int currentapiVersion = android.os.Build.VERSION.SDK_INT;
if (currentapiVersion >= android.os.Build.VERSION_CODES.FROYO){
    // Do something for froyo and above versions
} else{
    // do something for phones running an SDK before froyo
} 
```

编辑：此 SDK_INT 自 Donut (android 1.6 / API4) 起可用，因此请确保您的应用程序在使用时与 Cupcake (android 1.5 / API3) 不兼容，否则您的应用程序将崩溃（感谢程序员 Bruce 的精确度） .

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-09-20T11:22:18.850

我已经应用了上面的解决方案，但对“O”和“N”作为版本名称不太满意，所以我做了一些更改。希望它对其他人也有用

```
 /**
 * Gets the version name from version code. Note! Needs to be updated
 * when new versions arrive, or will return a single letter. Like Android 8.0 - Oreo
 * yields "O" as a version name.
 * @return version name of device's OS
 */
private static String getOsVersionName() {
    Field[] fields = Build.VERSION_CODES.class.getFields();
    String name =  fields[Build.VERSION.SDK_INT + 1].getName();

    if(name.equals("O")) name = "Oreo";
    if(name.equals("N")) name = "Nougat";
    if(name.equals("M")) name = "Marshmallow";

    if(name.startsWith("O_")) name = "Oreo++";
    if(name.startsWith("N_")) name = "Nougat++";

    return name;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-07T17:16:27.007

**初学者级别的友好解决方案。** 我使用版本代码，因为它们比代号更好，更不容易混淆。例如。果冻豆、奥利奥、棒棒糖等在单一代号下具有不同的版本代码。**无论如何，您可以用代号替换版本代码。**

```
 var androidVersion = ""
    androidVersion = when (android.os.Build.VERSION.SDK_INT){
        16 -> "Android 4.1"
        17 -> "Android 4.2"
        18 -> "Android 4.3"
        19 -> "Android 4.4"
        21 -> "Android 5.0"
        22 -> "Android 5.1"
        23 -> "Android 6.0"
        24 -> "Android 7.0"
        25 -> "Android 7.1"
        26 -> "Android 8.0"
        27 -> "Android 8.1"
        28 -> "Android 9"
        29 -> "Android 10"
        else -> "API " + android.os.Build.VERSION.SDK_INT
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-27T16:25:30.183

当我尝试在 API 19 上运行的模拟器时，反射不起作用。

所以我想出了“Nacho Coloma”和“Kevin Grant”的混合答案

```
String osName="";
Field[] fields = Build.VERSION_CODES.class.getFields();
for (Field field : fields) {
    String fieldName = field.getName();
    int fieldValue = -1;

    try {
        fieldValue = field.getInt(new Object());
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (NullPointerException e) {
        e.printStackTrace();
    }

    if (fieldValue == Build.VERSION.SDK_INT) {
        osName=fieldName; break;
    }
}
if(osName.isEmpty()) {
    String[] mapper = new String[]{
            "ANDROID BASE", "ANDROID BASE 1.1", "CUPCAKE", "DONUT",
            "ECLAIR", "ECLAIR_0_1", "ECLAIR_MR1", "FROYO",
            "GINGERBREAD", "GINGERBREAD_MR1", "HONEYCOMB", "HONEYCOMB_MR1",
            "HONEYCOMB_MR2", "ICE_CREAM_SANDWICH", "ICE_CREAM_SANDWICH_MR1", "JELLY_BEAN",
            "JELLY_BEAN", "JELLY_BEAN", "KITKAT", "KITKAT",
            "LOLLIPOOP", "LOLLIPOOP_MR1", "MARSHMALLOW", "NOUGAT",
            "NOUGAT", "OREO", "OREO", "ANDROID P"};
    int index = Build.VERSION.SDK_INT - 1;
    osName = index < mapper.length ? mapper[index] : "UNKNOWN_VERSION";
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-07-06T16:21:45.790

这个答案为 Marshmallow on 提供了更好的（完整）名称，同时如果您在新版本发布时不更新应用程序（两全其美），也可以保持面向未来。版本名称列表来自[这里](https://developer.android.com/reference/android/os/Build.VERSION_CODES)。

```
String versionName =
        Build.VERSION_CODES.class.getFields()[Build.VERSION.SDK_INT + 1].getName();
String[] versionNames = new String[]{
        "ANDROID BASE", "ANDROID BASE 1.1", "CUPCAKE", "DONUT",
        "ECLAIR", "ECLAIR_0_1", "ECLAIR_MR1", "FROYO", "GINGERBREAD",
        "GINGERBREAD_MR1", "HONEYCOMB", "HONEYCOMB_MR1", "HONEYCOMB_MR2",
        "ICE_CREAM_SANDWICH", "ICE_CREAM_SANDWICH_MR1",
        "JELLY_BEAN", "JELLY_BEAN_MR1", "JELLY_BEAN_MR2", "KITKAT", "KITKAT_WATCH",
        "LOLLIPOP", "LOLLIPOP_MR1", "MARSHMALLOW", "NOUGAT", "OREO", "OREO_MR1"
};
int nameIndex = Build.VERSION.SDK_INT - 1;
if (nameIndex < versionNames.length) {
    versionName = versionNames[nameIndex];
} 
```

显然这是从其他人的答案衍生而来的。根据我的经验，当您尝试编辑现有答案以改进它时，人们不喜欢它，因此我创建了一个新答案。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-28T06:27:30.800

构建.版本.SDK；返回正确的结果，但从 API 16 开始不推荐使用 SDK：Android 4.1 (Jelly Bean)。所以它会显示为 w

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-01-11T12:36:27.443

如果您正在寻找`Xamarin.Android`解决方案，只需：

```
Build.VERSION.SdkInt.ToString(); 
```

很简单。

原因是`SdkInt`映射到Android的`SDK_INT`：

```
[Register("SDK_INT", ApiSince = 4)]
public static BuildVersionCodes SdkInt
{
  get
  {
    return (BuildVersionCodes) Build.VERSION._members.StaticFields.GetInt32Value("SDK_INT.I");
  }
} 
```

它映射到一个枚举，并且在 C# 中，当`ToString`调用枚举时，会返回枚举的名称（而不是值）：

```
 public enum BuildVersionCodes
  {
    [IntDefinition("Android.OS.Build.VERSION_CODES.Base", JniField = "android/os/Build$VERSION_CODES.BASE")] Base = 1,
    [IntDefinition("Android.OS.Build.VERSION_CODES.Base11", JniField = "android/os/Build$VERSION_CODES.BASE_1_1")] Base11 = 2,
    [IntDefinition("Android.OS.Build.VERSION_CODES.Cupcake", JniField = "android/os/Build$VERSION_CODES.CUPCAKE")] Cupcake = 3,
 ... 
```

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2018-01-18T08:50:06.633

您可以尝试以下功能。

```
 public String AndroidOSName() {
    String os = Build.VERSION.SDK;
    System.out.println("here is my os" + " " + os);
    if (os.equals("23")) {
        return "Marshmallow";
    } else if (os.equals("21")) {
        return "Lollipop";
    } else if (os.equals("22")) {
        return "LOLLIPOP_MR1";
    } else if (os.equals("20")) {
        return "KitKat";
    } else if (os.equals("19")) {
        return "KitKat";
    } else if (os.equals("18")) {
        return "Jelly Bean";
    } else if (os.equals("17")) {

        return "Jelly Bean";
    } else if (os.equals("16")) {
        return "Jelly Bean";
    } else if (os.equals("15")) {
        return "Ice Cream Sandwich";
    } else if (os.equals("14")) {
        return "Ice Cream Sandwich";
    } else if (os.equals("13")) {
        return "Honeycomb";
    } else if (os.equals("12")) {
        return "Honeycomb";
    } else if (os.equals("11")) {
        return "Honeycomb";
    } else if (os.equals("10")) {
        return "Gingerbread";
    } else if (os.equals("9")) {
        return "Froyo";
    } else if (os.equals("8")) {
        return "Froyo";
    } else {
        return "Not Found";
    }

} 
```

# google-maps-api-3 - 巴黎的地址，75000 不是我所期望的

> ID：10547820
> 
> 赞同：0
> 
> 时间：2012-05-11T08:15:38.200
> 
> 标签：google-maps-api-3, geocoding

每当我尝试使用 address=paris,75000 的地理编码进行研究时，我都会得到一个奇怪的结果

[http://maps.googleapis.com/maps/api/geocode/json?address=paris,75000&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=paris,75000&sensor=false)

这让我回到了法国南部的一个地方，那里有一条叫做巴黎的小路！！！

```
"formatted_address" : "Paris, 83470 Seillons-Source-d'Argens, France",
     "geometry" : {
        "bounds" : {
           "northeast" : {
              "lat" : 43.4958460,
              "lng" : 5.8980320
           },
           "southwest" : {
              "lat" : 43.49187360,
              "lng" : 5.88903480
           }
        },* 
```

有人知道如何解决吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:15:38.320

添加：`region=fr`包含区域偏差[^(dev-guide-entry)](https://developers.google.com/maps/documentation/geocoding/#RegionCodes)会有所帮助（至少第一个结果更有意义，并且一些奇怪的结果已被删除），但我相信真正的问题是您提交的地址不完整。

此请求返回的所有结果都有: `partial_match: true`，这基本上是说地理编码器在请求中的不完整信息情况下已尽其所能。有什么方法可以为这个特定请求添加更多细节？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-22T23:22:15.153

75000 不是有效的邮政编码。请改用 75001（法语中的第一区或“区”）。

在法国，某些大城市有多个邮政编码。

*   750[01..20] 为巴黎
*   132[01..16] 代表马赛

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T10:28:23.807

看起来地理编码器被代码 75000 混淆了。将其排除在外会产生不同的结果。我知道每个区都有自己的号码，75001、75002 等：75000 是有效的**邮政编码**吗？75001 产生一个有效的结果。

无论如何，解决方法是不要使用该代码。

# iphone - 单击该警报视图中的按钮时如何关闭警报视图

> ID：10547821
> 
> 赞同：0
> 
> 时间：2012-05-11T08:15:39.230
> 
> 标签：iphone, objective-c, ios

我是 iOS 新手。

我正在处理警报视图。这是我的代码。这里有 2 个警报视图：`successfulallert`和`unsuccessfulallert`用于登录页面。我在这里也使用了 alertview 委托，它适用于两个 alertview，但我只想为成功的 alertview 工作，导航应该只为成功的 alertview 完成。如果有人知道这一点，请帮助我。

```
NSString *responseOfResult = [[NSString alloc]initWithString:[result response]];
    NSRange match;
    //  NSLog(@"string= %@", str);
    match = [responseOfResult rangeOfString: @"successful"];
    if(match.location == NSNotFound)
    {
        UIAlertView *unsuccessfulAllert = [[UIAlertView alloc]
                               initWithTitle:@"Alert"
                               message:responseOfResult
                               delegate:self
                               cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [unsuccessfulAllert show];

    }
    else {
        UIAlertView *successfulAllert = [[UIAlertView alloc]
                               initWithTitle:@"Message" message:@"Login successful." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [successfulAllert show];
     }
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if(buttonIndex == 0){
        [[self navigationController]pushViewController:registerUserScreen animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:19:03.513

你为什么不**把 "OK" 作为 cancelButtonTitle**？一切都会自动处理。

```
UIAlertView *successfulAllert = [[UIAlertView alloc]
                               initWithTitle:@"Message" message:@"Login successful." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [successfulAllert show]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:55:06.987

您有很多方法可以更正您的代码，第一种也是非常常见的方法是`tag`使用`UIView`. 由于`UIAlertview`继承自`UIView`，它具有`tag`属性，因此每次您要创建警报（或视图）时，请设置标签并检查您的条件，例如：

```
...
alert.tag=1;
[alert show]; 
```

然后知道哪个警报正在调用回调：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
  if(alertView.tag==theTagOfYourAlert){
     //do your stuff
   }
} 
```

在您的情况下，另一种方式可能是：

```
if([alertView.title isEqualToString:@"Alert"]){
       //do your stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:39:17.170

对于诸如登录状态更新之类的事情，您可能希望“登录成功”消息自动消失。试试这个：

[https://github.com/camclendenin/flashbox](https://github.com/camclendenin/flashbox)

这很好用，在这种情况下派上用场。另外，您不必处理与 UIAlertViews 相关的所有混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:25:08.640

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    if(buttonIndex == 0){
        //POP here with this:
        [self.navigationController pushViewController:addItemView animated:NO];

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T08:25:27.533

将标签添加到两个警报视图并检查警报视图委托中的标签。

示例代码：

```
NSString *responseOfResult = [[NSString alloc]initWithString:[result response]];
NSRange match;
//  NSLog(@"string= %@", str);
match = [responseOfResult rangeOfString: @"successful"];
if(match.location == NSNotFound)
{
    UIAlertView *unsuccessfulAllert = [[UIAlertView alloc]
                           initWithTitle:@"Alert"
                           message:responseOfResult
                           delegate:self
                           cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [unsuccessfulAllert setTag:1];
    [unsuccessfulAllert show];

}
else {
    UIAlertView *successfulAllert = [[UIAlertView alloc]
                           initWithTitle:@"Message" message:@"Login successful." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [successfulAllert setTag:2];
    [successfulAllert show];
 }

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
if(alertView.tag==2 && buttonIndex == 0){
    [[self navigationController]pushViewController:registerUserScreen animated:YES];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T08:29:06.730

是的，委托对两个警报视图都有效，但是您可以为每个警报视图对象分配一个标签并检查委托中的标签，然后如果该特定 AlertView onject 的标签匹配，则执行事件。如果您需要代码，我会提供。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T08:51:16.453

```
NSString *responseOfResult = [[NSString alloc]initWithString:[result response]];
NSRange match;
//  NSLog(@"string= %@", str);
match = [responseOfResult rangeOfString: @"successful"];
if(match.location == NSNotFound)
{
    UIAlertView *unsuccessfulAllert = [[UIAlertView alloc]
                           initWithTitle:@"Alert"
                           message:responseOfResult
                           delegate:self
                           cancelButtonTitle:nil otherButtonTitles:@"OK", nil];

    [unsuccessfulAllert setTag:1];

    [unsuccessfulAllert show];

}
else {
    UIAlertView *successfulAllert = [[UIAlertView alloc]
                           initWithTitle:@"Message" message:@"Login successful." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];

    [successfulAllert setTag:2];
    [successfulAllert show];
 }
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
if(alertView.tag == 2)
{
    [[self navigationController]pushViewController:registerUserScreen animated:YES];
}
 else
 {
    //[[self navigationController]pushViewController:registerUserScreen animated:NO];
     // OR
     return;
 }
} 
```

# django - 具有 RedHat 4.4.4-13 的亚马逊 ec2 实例上的 ngnix？

> ID：10547823
> 
> 赞同：1
> 
> 时间：2012-05-11T08:15:49.600
> 
> 标签：django, nginx, amazon-ec2

我有一个在亚马逊上运行的 ec2 实例，它有 AMI(ami-1b814f72)。它运行的是 RedHat 4.4.4-13 版本。

我想用 django 安装 ngnix 和 gunicorn。根据ngnix [http://wiki.nginx.org/Install#Official_Red_Hat.2FCentOS_packages](http://wiki.nginx.org/Install#Official_Red_Hat.2FCentOS_packages)页面，我需要创建一个文件`/etc/yum.repos.d/nginx.repo`并粘贴这些行以查找repo。但他们也提到：

> 由于 CentOS、RHEL 和 Scientific Linux 填充 $releasever 变量的方式不同，需要手动将 $releasever 替换为“5”（对于 5.x）或“6”（对于 6.x），具体取决于您的操作系统版本。

但我没有 5 或 6 版本。我有 RedHat 4.4.4-13 版本，那么在这种情况下我应该怎么做才能让它工作并在我的 ec2 实例上安装 ngnix。

如果我不更改 baseurl 并尝试安装 ngnix，我会收到此错误：

> [http://nginx.org/packages/rhel/latest/x86_64/repodata/repomd.xml：[Errno](http://nginx.org/packages/rhel/latest/x86_64/repodata/repomd.xml) 14] PYCURL ERROR 22 - “请求的 URL 返回错误：404”正在尝试其他镜像。错误：无法检索存储库的存储库元数据 (repomd.xml)：ngnix。请验证其路径并重试

**请注意：我想使用 AWS 免费使用套餐，并且不想被收费**

我希望有人会帮助我:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T08:26:23.410

所以我解决了我自己的问题并为我自己的问题写了答案。对于 RHEL 4.4，他们没有可用的 ngnix 包。我们要么从专门为 RHEL 4.4 的源代码构建，要么只是迁移到亚马逊上的更新版本的 AMI。我搬到了 ubuntu 11.10这是更新的一个，目前由 ubuntu 社区支持。

# c# - Regex.Split 加号和减号

> ID：10547824
> 
> 赞同：3
> 
> 时间：2012-05-11T08:15:53.713
> 
> 标签：c#, regex

我有一个字符串`1.5(+1.2/-0.5)`。我想使用正则**表达式**来提取数值：`{1.5, 1.2, 0.5}`.

我的计划是用`(`,`+`和`/`分割字符串`-`。当我使用 and 进行拆分时`(`，`/`它可以拆分，但是如果我还添加了`+`and `-`，那么程序就会崩溃。

```
string[] foo = Regex.Split("1.5(+1.5/-0.5)", @"(?=[(/)])");
// OK

string[] foo = Regex.Split("1.5(+1.5/-0.5)", @"(?=[(/+-)])"); 
// Exception catched 
```

捕获的异常是：

> System.ArgumentException: 解析 "(?=[(/+-)])" - [xy] 范围以相反的顺序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-11T08:18:29.427

在正则表达式的方括号内时，破折号是一个特殊字符。它表示一个范围：表示从到的`[a-z]`任何字符。当你写的时候，它实际上意味着，或者从to 的任何字符。该错误来自这样一个事实，即 ASCII 排序在 之前，因此字符范围无效。`a``z``[(/+-)]``(``+``)``)``+``[+-)]`

为了解决这个问题，破折号在括号中时必须始终位于第一个或最后一个，否则它需要被反斜杠。

我同意，我可能会使用全局正则表达式来挑选`[0-9.]+`，而不是拆分来削减其他所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:20:03.557

试图逃避像 + 这样的符号？

为什么不是 RegEx 之类的`/\d+\.?\d+/`？这不会拆分它，而是返回数字。

# sql-server - SQL Server 分页复杂查询

> ID：10547827
> 
> 赞同：0
> 
> 时间：2012-05-11T08:15:58.007
> 
> 标签：sql-server, pagination

我想对他的核心表进行分页。我有 2 张桌子：

**gs_score_table**

```
id (auto increment int)
project_id (int)
game_id (int)
user_id (int)
entry_date (datetime)
score (int) 
```

**用户**

```
id (auto increment int)
user_name (varchar) 
```

我想要的是通过 获取 hiscores 列表和 order 列表`scores DESC`，但我总是在第 5 行（this: `ROW_NUMBER() OVER (ORDER BY total_score DESC) AS RowNumber`）出现错误，说：

> 列名“total_score”无效。

任何人都可以帮忙吗？

```
SELECT TOP 50
    *
FROM
    (SELECT
        ROW_NUMBER() OVER (ORDER BY total_score DESC) AS RowNumber,
        gs.user_id,
        users.user_name,
        SUM(gs.score) AS total_score, 
        (SELECT COUNT(gs2.id) FROM gs_score_table AS gs2 WHERE gs2.user_id = gs.user_id AND gs2.game_id = 1) AS games_played,
        TotalRows=Count(*) OVER()
    FROM
        gs_score_table AS gs
    INNER JOIN
        users ON users.id = gs.user_id
    WHERE
        gs.project_id = 2
        AND gs.game_id = 1
        AND CAST(gs.entry_date AS date) BETWEEN '2012-04-23' AND '2012-04-23'
    GROUP BY
        gs.user_id, users.user_name) _tmpInlineView WHERE RowNumber >= 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:26:38.703

您不能在 ROW_NUMBER ORDER BY 子句中使用别名“total_score”。相反，您需要：

```
ROW_NUMBER() OVER (ORDER BY SUM(gs.score) DESC) AS RowNumber 
```

# java - 即使在JAVA中发生异常后，异常处理，创建日志并继续程序

> ID：10547828
> 
> 赞同：0
> 
> 时间：2012-05-11T08:16:04.103
> 
> 标签：java, exception

> **可能重复：**
> [异常处理、创建日志并在 JAVA 中继续程序](https://stackoverflow.com/questions/10546504/exception-handeling-creating-log-and-continue-the-program-in-java)

我正在用 JAVA 设计一个程序，它在大约 10 次迭代中捕获结果，之后我必须将所有结果写入日志文件，我需要一个解决方案，如果发生任何异常，那么它应该写入我的文本文件，其次程序不能停止，它必须一直持续到最后一次迭代完成......即如果任何迭代的任何部分发生错误，必须在我的结果中以错误的名称提及，并且程序不能在这里停止，它必须继续更新我的日志文件

仅举个例子：因为我的课程大约有 1800 行，所以不能全部粘贴到这里。

```
float j,i,t;
int []a={1,2,0,3,4,5};
int []b={6,6,9,3,4,5};
for(int i=0;i<6;i++)
{
   j=2/a[i];
   i=3/b[i];
   t=4/b[i];

 } 
```

所以这里由于数组的值列表中的 0 发生异常，因此停止整个迭代，我希望跳过，如果发生某些异常，则不能破坏循环，它只是省略该异常部分并写在文本上文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:20:13.653

尝试这个：

```
float j;
int []a={1,2,0,3,4,5};
for(int i=0;i<6;i++)
{
    try{
        j=2/a[i];
    catch(Exception e){ //a more specific exception would be preferable, but I don't know what other exceptions may occur here
        System.out.println("Exception occurred at iteration: "+i);
    }
} 
```

**编辑：**刚刚意识到，如果数组太小，打印语句中的值也可能导致异常。

**第二次编辑：**异常处理不如简单的检查有效`if(a[i] == 0)`，因此使用检查将是解决此问题的更有效方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:20:48.097

我认为您应该阅读[此问题](https://stackoverflow.com/questions/2259190/try-catch-problem)的答案以了解有关异常处理的更多信息。

# c# - 如何取消 RichTextBox 中的导航

> ID：10547834
> 
> 赞同：1
> 
> 时间：2012-05-11T08:16:18.853
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

在我的 Windows Phone 应用程序的 RichTextBox 代码中，我有：

```
 var link = new Hyperlink();
                        if (!string.IsNullOrEmpty(linkUrl))
                        {
                            link.NavigateUri = new Uri(linkUrl);
                        }
                        link.Foreground = new SolidColorBrush(Colors.Blue);
                        link.TargetName = "_blank";

                        var linkText = new Run() { Text = linkDesc };
                        link.Inlines.Add(linkText);
                        link.Click += new RoutedEventHandler(NavidateTo);

                        paragraph.Inlines.Add(link);

 private static void NavidateTo(object sender, RoutedEventArgs routedEventArgs)
        {

            if (MessageBox.Show(
                             Constants.BrowserNavigating,
                             "",
                              MessageBoxButton.OKCancel) == MessageBoxResult.Cancel)
            {
              //cancel Navigation
            }
            else
            {
                StateManager.Set("Browser", "true");
            }
        } 
```

如何取消 NavidateTo 方法中的导航？

**更新**

私有静态无效 NavidateTo（对象发送者，RoutedEventArgs routedEventArgs）{

```
 if (MessageBox.Show(
                     Constants.BrowserNavigating,
                     "",
                      MessageBoxButton.OKCancel) == MessageBoxResult.Cancel)
    {
        //cancel Navigation
        var phoneApplicationFrame = Application.Current.RootVisual as PhoneApplicationFrame;
        if (Application.Current.RootVisual as PhoneApplicationFrame != null)
            phoneApplicationFrame.Navigating += new NavigatingCancelEventHandler(NavigationService_Navigating);
    }
    else
    {
        StateManager.Set("Browser", "true");
    }
}

public static void NavigationService_Navigating(object sender, NavigatingCancelEventArgs e)
{
    {
        e.Cancel = true;
    }
} 
```

这没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:26:59.443

使用 this.NavigationService.StopLoading();

还要考虑这种方法：

订阅`Navigating`活动。

```
void NavigationService_Navigating(object sender, NavigatingCancelEventArgs e)
{
    // Don't allow refreshing of a static page
    if (DO SOME CHECKS)
        {
            e.Cancel = true;
        }
} 
```

并在 msdn 上查看这篇文章。

[http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.navigating.aspx](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.navigating.aspx)

# android - 如何从我的安卓设备获取指纹

> ID：10547835
> 
> 赞同：0
> 
> 时间：2012-05-11T08:16:22.980
> 
> 标签：android

我想从我的安卓设备上获取指纹？

我做了一项研究，它给了我以下命令：

C:>keytool -list -alias androiddebugkey -keystore C:\Users\abc_username.android\debug .keystore -storepass android -keypass android

我不会认为上面的命令是我的答案吗？关于命令的作用是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:09:27.560

see this link, it explains obtaining Maps API key through MD5 fingerprint with debug .keystore of Android: [http://eagle.phys.utk.edu/guidry/android/apiKey.html](http://eagle.phys.utk.edu/guidry/android/apiKey.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:30:02.777

请通过[这个](https://developers.google.com/maps/documentation/android/mapkey#getfingerprint)

使用以下命令，您不会为您的 android 设备生成指纹（更具体地说是 MD5 指纹）。您针对用于 android 开发的密钥库（在您的情况下为 C:\Users\abc_username.android\debug .keystore）生成 MD5 指纹。

```
C:>keytool -list -alias androiddebugkey -keystore C:\Users\abc_username.android\debug .keystore -storepass android -keypass android 
```

在 Android 中，这个指纹对于获取我们可以在 MapView 中使用的 Google Map api 密钥很有用。

如果您更改密钥库，则必须重新生成与新密钥库有关的指纹，以便从 Google 获取 MapView 的 api 密钥

关于keytool

> keytool 是一个密钥和证书管理实用程序。它使用户能够使用数字签名管理自己的公钥/私钥对和相关证书，以用于自我认证（用户向其他用户/服务认证他/她自己）或数据完整性和认证服务。它还允许用户缓存其通信对等方的公钥（以证书的形式）。

希望对你有帮助

# ms-access - 左外部加入访问？

> ID：10547837
> 
> 赞同：2
> 
> 时间：2012-05-11T08:16:49.407
> 
> 标签：ms-access

以下查询在访问中不起作用。

```
SELECT Fields.FieldId, PrecisionSettings.DecimalPlaces 

    from Fields left outer join FieldGroup on Fields.FieldGroupId = FieldGroup.FieldGroupId

    left outer join Category on FieldGroup.CategoryId = Category.CategoryId

    left outer join PrecisionSettings on 

    Category.InputAttributesID=PrecisionSettings.AttributesID 
```

它给出了查询表达式中缺少运算符的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T08:27:22.103

在 Access 中，您一次只能加入两个结果。要加入更多表格，您需要更多括号：

```
SELECT
    Fields.FieldId,
    PrecisionSettings.DecimalPlaces 
FROM
(
    (
        Fields
        LEFT OUTER JOIN FieldGroup ON Fields.FieldGroupId = FieldGroup.FieldGroupId
    )
    LEFT OUTER JOIN Category ON FieldGroup.CategoryId = Category.CategoryId
)
LEFT OUTER JOIN PrecisionSettings ON Category.InputAttributesID = PrecisionSettings.AttributesID 
```

# c# - 我可以让 WCF 服务的代码隐藏文件成为 T4 文件吗？

> ID：10547838
> 
> 赞同：1
> 
> 时间：2012-05-11T08:16:50.253
> 
> 标签：c#, wcf, visual-studio-2010, t4, code-behind

在 Visual Studio 2010 中创建 WCF 服务（文件类型 .svc）时，我想将 C# 代码隐藏文件（.svc.cs）制作成 T4 文件（.tt）。如果可能的话，我该怎么做？

**编辑：** 请注意，我正在编写 WCF 服务本身，而不是客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:46:25.813

**这个答案是正确的，*但不适用于所提出的问题*！**

**感谢您澄清问题，添加了新答案 - 这将被移动/删除:)**

理论上，您可以使用 TT 文件生成任何类型的文本文件。我们用它来生成数据库脚本、配置文件等（微软用它来生成各种代理）。

您遇到的问题是最初也会生成服务引用的 Reference.cs 文件，因此您也必须停止该过程。

*   单击解决方案浏览器中的“显示所有文件”按钮。这将公开底层的 Reference.cs 文件。

*   打开 reference.cs 文件并将其保存为 .TT 扩展名。**这必须首先完成，因为以下步骤会导致 .cs 文件消失！**

*   将新的 Reference.tt 文件包含到项目中。

*   从 Reference.svcmap 文件中删除“WCF 代理生成器”自定义工具选项。

*   如果您处于源代码控制之下，请撤消对 Reference.cs 文件的任何挂起删除。此删除是由上一步自动引起的。

*   确保 Reference.tt 文件的自定义构建选项是`TextTemplatingFileGenerator`. *当你重命名 cs 文件时，它应该默认添加这个*。

*   将您要用于 TT 脚本的语言类型添加到 Reference.tt 文件的顶部（总是明确的）：

    <#@ 模板语言="C#" #>

## 额外技巧：

当您使用 Visual Studio 2010 时，您还可以将模板上的自定义工具从 TextTemplatingFileGenerator 临时更改为 TextTemplatingFilePreprocessor。

这会将底层代码直接输出到您的项目中，而不是常规的模板输出！非常适合查看生成的代码。

*注意：如果您不是将 .CS 文件作为输出，您还需要在脚本的第一个条目中指定输出文件名。*例如，您在 TT 文件顶部所需的最小值将是：

```
<#@ template language="C#" #>
<#@ output extension="config" #> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T10:37:03.507

*根据问题的澄清更新了答案。*

## 如果要对 service.svc.cs 文件进行模板化，请执行以下操作：

*   打开 service.svc.cs 文件并将其保存为 .TT 扩展名。这将导致 svc.cs 文件自动消失（我假设是因为其中定义了类）。

*   确保构建操作设置为“内容”。

*   确保 service.svc.tt 文件的自定义构建选项是 TextTemplatingFileGenerator。

*   将您要用于 TT 脚本的语言类型添加到 Reference.tt 文件的顶部（总是明确的）：

    <#@ 模板语言="C#" #>

*   在 .tt 文件打开时随时单击保存以（重新）生成输出 cs 文件。

*我刚刚尝试并确认这些步骤适用于新的 WCF 服务项目。*

## 额外技巧：

当您使用 Visual Studio 2010 时，您还可以将模板上的自定义工具从 TextTemplatingFileGenerator 临时更改为 TextTemplatingFilePreprocessor。

这会将底层代码直接输出到您的项目中，而不是常规的模板输出！非常适合查看生成的代码。

# android - 如何在android中明智地显示pdf页面

> ID：10547843
> 
> 赞同：0
> 
> 时间：2012-05-11T08:17:15.603
> 
> 标签：android

如何在android中明智地显示pdf页面。

我有一个多页的PDF，但不能在android中显示它的组合，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:54:21.503

使用**Intents**在您的应用程序中显示 PDF 文档。这是优秀的[样本](http://developer.appcelerator.com/blog/2011/09/sharing-project-assets-with-android-intents.html)。

# php - PHP 数组插入

> ID：10547847
> 
> 赞同：0
> 
> 时间：2012-05-11T08:17:34.367
> 
> 标签：php, mysql, arrays, insert

真的可以做一些帮助。所以我有两个这样的数组

```
Array
(
    [0] => UK
    [1] => UK
    [2] => USA
    [3] => USA
    [4] => USA
    [5] => France
)
Array
(
    [0] =>  London
    [1] =>  Manchester
    [21] => New York
    [22] => Florida
    [23] => Hawaii 
    [24] => Paris
) 
```

我需要像这样将它插入mysql数据库

```
Country  City
UK       London, Manchester
USA      New York, Florida, Hawaii
France   Paris 
```

我对 PHP 没问题，但我真的坚持这个。没有任何代码可以显示，因为我完全不知道如何实现这一点。有人可以帮我实现这一目标吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:24:37.330

第一个数组是`$countries`，第二个数组是`$cities`。

```
$map = array();
while (!empty($countries) && !empty($cities)) {
  $map[array_shift($countries)][] = array_shift($cities);
}

foreach ($map as $country => $cities) {
  $cities = join(', ', $cities);
  // TODO: insert row with $country and $cities into database.
} 
```

作为旁注，我怀疑您的数据库未标准化。如果您还没有这样做，请阅读数据库的规范化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:20:49.843

阅读本教程：[http ://www.tizag.com/mysqlTutorial/](http://www.tizag.com/mysqlTutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T08:24:39.723

如果你重新索引你的数组，你可以并行迭代它们：

```
$cities = array_values($cities);
$countries = array_values($countries);
for($i = 0; $i < count($cities); ++$i) {
    $city = $cities[$i];
    $country = $countries[$i];

    // now do something with $city and $country
} 
```

现在让我们看看“做某事”部分可能是什么。如果要按国家/地区连接城市名称，则需要先按国家/地区分组。所以让我们这样做：

```
$groups = array();

for (...) {
    $city = $cities[$i];
    $country = $countries[$i];

    if (!isset($groups[$country])) $groups[$country] = array();
    $groups[$country][] = $city;
} 
```

此时您应该执行 a`print_r($groups)`以查看我们已经对城市进行了分组。将每个组转换为连接字符串很容易：

```
foreach($groups as &$group) { // ATTENTION: iterating by reference
    $group = implode(', ', $group);
} 
```

再做`print_r`一次。

但是，这种类型的数据库结构看起来不正确（取决于应用程序，因此不确定）。也许您应该考虑使用包含国家/城市列的表，以便输入数组中的每对元素对应一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T08:27:42.393

```
$countries = array("UK","UK","USA","USA","USA","FRANCE");
$cities = array(0=>"London",1=>"Manchester",23=>"New York",24=>"Florida",25=>"Hawaii",26=>"Paris");

$combined = array();
$cities = array_values($cities);
foreach ($countries as $index => $country)
{
    $combined[$country][] = $cities[$index];    
}

foreach ($combined as $country => $cityList)
{
    $sql = sprintf("INSERT INTO `MyTable` (Country,City) VALUES ('%s','%s')",$country,implode(',',$cityList)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T08:32:48.323

1.  您必须将国家代码与城市绑定，如下所示：

    ```
    Array
    (
        [0]['code'] => UK
        [0]['city'] => London
    )
    .... 
    ```

2.  如果您有带有 => 对的多维数组，则可以使用 foreach 和 case (if) 语句创建适当的 sql。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-11T08:43:29.447

因此，我不确定您要做什么，或者为什么您有两个可能应该为 1 的数组，这当然是假设该城市始终与其正确的国家/地区联系在一起。我会说曼彻斯特和伦敦都在英国，所以他们在数据库中的国家字段将是英国，然后你可以用一个简单的 MySQL 查询来调用它们，询问国家等于的所有城市城市代码

所以你的数据库看起来像这样

```
 ID      CITY       COUNTRY
 1       London     UK
 2       Manchester UK
 3       New York   USA
 4       Florida    USA
 5       Hawaii     USA
 6       Paris      France 
```

然后你可以随心所欲地用 MySQL 查询调用它，

```
 SELECT * FROM table WHERE country = 'UK' 
```

然后，这将为您提供伦敦和曼彻斯特的结果

这应该让你朝着正确的方向前进

# facebook - 如何使用backbone.js和实现FB.Event.subscribe

> ID：10547849
> 
> 赞同：0
> 
> 时间：2012-05-11T08:17:46.367
> 
> 标签：facebook, backbone.js

我正在使用backbone.js 来实现一个带有facebook 登录按钮的登录页面。

```
window.LoginPage = Backbone.View.extend({
    initialize:function () {
        this.template = _.template(tpl.get('login-page'));
    },

    render:function (eventName) {
        $(this.el).html(this.template(this.model.toJSON()));
         this.bind("nav", this.nav,this);
         this.model.bind("reset", this.render, this);
        return this;
    },

    events:{
        "click #login":"login"
    },

    login:function(){
          FB.login(
                 function(response) {
                   if (response.authResponse) {
                   console.log('Welcome!  Fetching your information.... ');
                   FB.api('/me', function(response) {
                          console.log('Good to see you, ' + response.name + '.');
                          }

                          );

                   } else {
                   console.log('User cancelled login or did not fully authorize.');
                   }
                 },
                 { scope: "email" }
                 );

    }                         

}); 
```

这行得通，我可以使用我的 Facebook 应用程序登录。但是登录后我希望触发 FB.event.subscribe 。但我不知道如何用backbone.js 来实现它

```
FB.Event.subscribe('auth.login', function(response) {   
    Backbone.history.navigate("#locallist",true)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:45:57.220

不确定“我希望触发 FB.event.subscribe”是什么意思。如果你的窗口上有 FB 对象，你可以在任何地方开始绑定事件。

我认为您的问题是您无法保证 FB 对象何时或是否在窗口上，所以我在我的应用程序中拥有的东西是创建一个全局事件并让我的应用程序监听该事件。这是 CoffeeScript 中的一些伪代码：

```
class FacebookServiceProvider extends ServiceProvider
    constructor: ->
        super

    initialize: (options) -> 
        FB.init
            appId: appId,
            status: true,
            cookie: true,
            xfbml: true,
            oauth: true

        app.trigger 'facebook:initialized'
        window.facebookInitialized = true
        @

class FacebookView extends Backbone.View
    initialize: (options) ->
        if window.facebookInitialized
            onFacebookInitialized.call @
        app.on 'facebook:initialized', @onFacebookInitialized, @
        @

    onFacebookInitialized: => 
        FB.Event.subscribe 'auth.authResponseChange', (response) -> console.log response
        @ 
```

基本上只是在窗口上使用一个全局变量来查看 facebook 服务提供者是否已经初始化，如果是这样，根据状态，我的视图只会在可以渲染或侦听 FB 事件时才会渲染或侦听事件。

# tsql - 根据给定条件计算剩余运行余额的 SQL 查询

> ID：10547851
> 
> 赞同：0
> 
> 时间：2012-05-11T08:17:53.227
> 
> 标签：tsql, sql-server-2005

我有一个这样的股票交易表：

```
StockID Item  TransDate   TranType  BatchNo Qty Price 
10001   ABC   01-Apr-2012   IN     71001000 200  750.0
10002   ABC   02-Apr-2012   OUT             100       
10003   ABC   03-Apr-2012   IN     71001001  50  700.0
10004   ABC   04-Apr-2012   IN     71001002  75  800.0
10005   ABC   10-Apr-2012   OUT             125       
10006   XYZ   05-Apr-2012   IN     71001003 150  350.0
10007   XYZ   05-Apr-2012   OUT             120       
10008   XYZ   15-Apr-2012   OUT              10       
10009   XYZ   20-Apr-2012   IN     71001004  90  340.0
10010   PQR   06-Apr-2012   IN     71001005  50  510.0
10011   PQR   15-Apr-2012   IN     71001006  60  505.0
10012   MNO   01-Apr-2012   IN     71001007  76  410.0
10013   MNO   11-Apr-2012   OUT              76 
```

我的每笔 IN 交易都有与之相关的价格和批号（批号）。现在我想通过先进先出（FIFO）规则计算剩余数量，这意味着先进应该与先出进行调整。调整数量后，将针对同一项目的每个 IN 交易计算剩余余额，如下所示：

```
StockID Item  TransDate   TranType  BatchNo Qty Price  RemainingQty
10001   ABC   01-Apr-2012   IN     71001000 200  750.0    0        
10002   ABC   02-Apr-2012   OUT             100             
10003   ABC   03-Apr-2012   IN     71001001  50  700.0   25        
10004   ABC   04-Apr-2012   IN     71001002  75  800.0   75        
10005   ABC   10-Apr-2012   OUT             125             
10006   XYZ   05-Apr-2012   IN     71001003 150  350.0   20        
10007   XYZ   05-Apr-2012   OUT             120             
10008   XYZ   15-Apr-2012   OUT              10             
10009   XYZ   20-Apr-2012   IN     71001004  90  340.0   90        
10010   PQR   06-Apr-2012   IN     71001005  50  510.0   50        
10011   PQR   15-Apr-2012   IN     71001006  60  505.0   60        
10012   MNO   01-Apr-2012   IN     71001007  76  410.0   0         
10013   MNO   11-Apr-2012   OUT              76 
```

从上表 ABC 中可以看出，在使用 FIFO 调整 (125 + 100) OUT 数量与 IN 数量 (100 + 50 + 75) 后，批次 71001000 的剩余数量为 0，71001001 为 25，批次71001002 是 75。从剩余数量可以得出该值。

请帮助我使用任何方法（基于光标或 CTE 或 JOINS 等）来实现此目的 提前感谢您的帮助。

StockOverflow 的一位用户提出了这个答案：

```
SELECT 10001   as stockid,'ABC' as item,'01-Apr-2012' as transdate,'IN' as trantype,     71001000 as batchno, 200 as qty,  750.0  as price INTO #sample
UNION ALL SELECT 10002   ,'ABC','02-Apr-2012','OUT', NULL            ,100,NULL        
UNION ALL SELECT 10003   ,'ABC','03-Apr-2012','IN',     71001001,  50 , 700.0 
UNION ALL SELECT 10004   ,'ABC','04-Apr-2012','IN',     71001002,  75 , 800.0 
UNION ALL SELECT 10005   ,'ABC','10-Apr-2012','OUT',     NULL        ,125,NULL        
UNION ALL SELECT 10006   ,'XYZ','05-Apr-2012','IN',     71001003, 150 , 350.0 
UNION ALL SELECT 10007   ,'XYZ','05-Apr-2012','OUT',      NULL      , 120    ,NULL    
UNION ALL SELECT 10008   ,'XYZ','15-Apr-2012','OUT',       NULL     ,  10        ,NULL
UNION ALL SELECT 10009   ,'XYZ','20-Apr-2012','IN',     71001004,  90 , 340.0 
UNION ALL SELECT 10010   ,'PQR','06-Apr-2012','IN',     71001005,  50 , 510.0 
UNION ALL SELECT 10011   ,'PQR','15-Apr-2012','IN',     71001006,  60 , 505.0 
UNION ALL SELECT 10012   ,'MNO','01-Apr-2012','IN',     71001007,  76 , 410.0 
UNION ALL SELECT 10013   ,'MNO','11-Apr-2012','OUT',    NULL    ,76 ,NULL

;WITH remaining AS
(
    SELECT *,
           CASE 
                WHEN trantype = 'IN' THEN 1
                ELSE -1
           END * qty AS stock_shift,
           ROW_NUMBER() OVER(PARTITION BY item ORDER BY transdate) AS row,
           CASE 
                WHEN trantype = 'OUT' THEN NULL
                ELSE ROW_NUMBER()OVER(PARTITION BY item, CASE WHEN trantype = 'IN' THEN 0 ELSE 1 END ORDER BY transdate)
           END AS in_row,
           SUM(CASE WHEN trantype = 'OUT' THEN qty END) OVER(PARTITION BY item) AS total_out
    FROM   #sample
)
,remaining2 AS
(
    SELECT r1.item,
           r1.stockid,
           MAX(r1.transdate) AS transdate,
           MAX(r1.trantype) AS trantype,
           MAX(r1.batchno) AS batchno,
           MAX(r1.qty) AS qty,
           MAX(r1.price) AS price,
           MAX(r1.total_out) AS total_out,
           MAX(r1.in_row) AS in_row,
           CASE 
                WHEN MAX(r1.trantype) = 'OUT' THEN NULL
                WHEN SUM(CASE WHEN r1.trantype = 'IN' THEN r2.qty ELSE 0 END) - MAX(r1.total_out) < 0 THEN SUM(CASE WHEN r1.trantype = 'IN' THEN r2.qty ELSE 0 END) 
                     - MAX(r1.total_out)
                ELSE 0
           END AS running_in
    FROM   remaining r1
           LEFT OUTER JOIN remaining r2
                ON  r2.row <= r1.row
                AND r2.item = r1.item
    GROUP BY
           r1.item,
           r1.stockid
)
SELECT r2.item,
       r2.stockid,
       MAX(r2.transdate) AS transdate,
       MAX(r2.trantype) AS trantype,
       MAX(r2.batchno) AS batchno,
       MAX(r2.qty) AS qty,
       MAX(r2.price) AS price,
       MAX(CASE WHEN r2.trantype = 'OUT' THEN NULL ELSE ISNULL(r2.qty + r3.running_in, 0) END) AS remaining_stock
FROM   remaining2 r2
       LEFT OUTER JOIN remaining2 r3
            ON  r2.in_row - 1 = r3.in_row
            AND r2.item = r3.item
GROUP BY
       r2.item,
       r2.stockid 
```

这个sql有问题，结果附在这里![查询结果](../Images/862dc130e62b930abb8184ad780835b6.png)。值不匹配的记录用黄色表示。请帮助解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:57:01.177

我认为这应该可以解决问题？

```
SELECT 10001   as stockid,'ABC' as item,'01-Apr-2012' as transdate,'IN' as trantype,     71001000 as batchno, 200 as qty,  750.0  as price INTO #sample
UNION ALL SELECT 10002   ,'ABC','02-Apr-2012','OUT', NULL            ,100,NULL        
UNION ALL SELECT 10003   ,'ABC','03-Apr-2012','IN',     71001001,  50 , 700.0 
UNION ALL SELECT 10004   ,'ABC','04-Apr-2012','IN',     71001002,  75 , 800.0 
UNION ALL SELECT 10005   ,'ABC','10-Apr-2012','OUT',     NULL        ,125,NULL        
UNION ALL SELECT 10006   ,'XYZ','05-Apr-2012','IN',     71001003, 150 , 350.0 
UNION ALL SELECT 10007   ,'XYZ','05-Apr-2012','OUT',      NULL      , 120    ,NULL    
UNION ALL SELECT 10008   ,'XYZ','15-Apr-2012','OUT',       NULL     ,  10        ,NULL
UNION ALL SELECT 10009   ,'XYZ','20-Apr-2012','IN',     71001004,  90 , 340.0 
UNION ALL SELECT 10010   ,'PQR','06-Apr-2012','IN',     71001005,  50 , 510.0 
UNION ALL SELECT 10011   ,'PQR','15-Apr-2012','IN',     71001006,  60 , 505.0 
UNION ALL SELECT 10012   ,'MNO','01-Apr-2012','IN',     71001007,  76 , 410.0 
UNION ALL SELECT 10013,'MNO','11-Apr-2012','OUT',          NULL    ,76 ,NULL

;with remaining_stock as
( 
SELECT * 
,CASE WHEN trantype = 'IN' THEN 1 ELSE -1 END * qty AS stock_shift
,row_number() OVER (PARTITION BY item ORDER BY transdate) as row
,CASE WHEN trantype = 'OUT' THEN NULL ELSE
row_number()OVER (PARTITION BY item,CASE WHEN trantype = 'IN' THEN 0 ELSE 1 END ORDER BY transdate) END as in_row
,CASE WHEN trantype = 'IN' THEN NULL ELSE
row_number()OVER (PARTITION BY item,CASE WHEN trantype = 'OUT' THEN 0 ELSE 1 END ORDER BY transdate) END as out_row
,ISNULL(SUM(CASE WHEN trantype = 'OUT' THEN qty END) OVER (PARTITION BY item),0) AS total_out
,ISNULL(SUM(CASE WHEN trantype = 'IN' THEN qty END) OVER (PARTITION BY item),0) AS total_in
FROM #sample
)
,remaining_stock2 AS
(
SELECT 
r1.item
,r1.stockid
,MAX(r1.transdate) as transdate
,MAX(r1.trantype) as trantype
,MAX(r1.batchno) as batchno
,MAX(r1.qty) as qty
,MAX(r1.price) as price
,MAX(r1.total_in) as total_in
,MAX(r1.total_out) as total_out
,SUM(r2.qty) as running_in
FROM remaining_stock r1 
LEFT OUTER JOIN remaining_stock r2 on r2.in_row <= r1.in_row
                    AND r2.item = r1.item       
GROUP BY
r1.item
,r1.stockid 
)
SELECT
item
,stockid
,transdate
,trantype
,batchno
,qty
,price
,CASE WHEN  trantype = 'OUT' THEN NULL
        WHEN total_out >= running_in THEN 0 
        WHEN (running_in - total_out) < qty THEN (running_in - total_out)
        WHEN (running_in - total_out) >= qty THEN qty 
        END as remaining_stocks
FROM remaining_stock2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T09:56:25.833

关于如何应用 FIFO 逻辑，您的问题对我来说不是很清楚。我将假设您希望将每条`IN`记录与下`OUT`一条记录（如果存在）相关联。要实现这一点，您需要像下面这样自行连接表

```
select
    t1.BatchNo,
    isnull(t1.Qty,0)  as 'IN Qty',
    isnull(t2.Qty,0)  as 'OUT Qty',
    isnull(t1.Qty,0) - isnull(t2.Qty,0) as 'Remaining Qty'
from 
    tbl_test t1
left join tbl_test t2
    on t2.StockID = (t1.StockID + 1)
    and t2.TranType = 'OUT'
where
    t1.TranType = 'IN' 
```

结果将显示您`ABC`问题的前 5 条记录的以下内容。

> ```
> BatchNo  | IN Qty | OUT Qty | Remaining Qty
> 71001000 | 200    | 100     | 100
> 71001001 | 50     | 0       | 50
> 71001002 | 75     | 125     | -50 
> ```

左连接假设每个 IN 记录的 StockID 总是比关联的 OUT 记录少一个数字。我个人认为您的数据模型需要改进。

*   OUT 记录应该有一个分配的 BatchNo 或对关联 IN 记录的 StockID 的引用
*   添加时间戳字段以进行顺序排序
*   添加一个 DateTime 字段以处理同一天发生的 IN/OUT

# python - 重命名python临时文件

> ID：10547859
> 
> 赞同：7
> 
> 时间：2012-05-11T08:18:54.360
> 
> 标签：python

重命名以下临时文件的方法是什么

```
pdf = render_me_some_pdf() #PDF RENDER
f = tempfile.NamedTemporaryFile()
f.write(pdf)
f.flush() 
```

我读了一些关于 os.rename 但我现在真的不知道如何应用它

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2016-04-22T04:09:21.037

> 最好的方法是复制文件并让python在关闭时删除临时文件：

我实际上认为你最好使用`os.link`：

```
with tempfile.NamedTemporaryFile(dir=os.path.dirname(actual_name)) as f:
  f.write(pdf)
  os.link(f.name, actual_name) 
```

这用于`os.link`创建到临时文件的硬链接，该硬链接将在临时文件被自动删除后持续存在。

这段代码有几个优点：

*   我们将`tempfile`对象用作上下文管理器，因此我们无需担心显式关闭它。
*   由于我们正在创建文件的硬链接，而不是复制它，因此我们无需担心由于复制大文件而导致的磁盘空间或时间消耗。
*   由于我们没有复制数据，我们不需要调用`f.flush()`. 该文件将在关闭时自动刷新。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-11T08:21:37.173

您可以通过 访问文件名`f.name`。但是，除非您使用`delete=False`python，否则将（尝试）在临时文件关闭后立即自动删除它。即使您不保存临时文件，禁用自动删除也会保留它 - 所以这不是一个好主意。

最好的方法是*复制*文件并让python在关闭时删除临时文件：

```
import shutil
shutil.copy(f.name, 'new-name') 
```

# java - Java：不同会话的 JMS 消息传递顺序

> ID：10547865
> 
> 赞同：1
> 
> 时间：2012-05-11T08:19:40.793
> 
> 标签：java, jms

最近我的一个同事这样说：

> 当使用不同的会话来产生和消费消息时，不能保证消息按照它们产生的顺序被传递。

现在我知道 JMS 通常不保证消息传递顺序，但是这种“多会话”角度对我来说是新的。有没有道理呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:35:32.377

根据[JMS 规范](http://docs.oracle.com/cd/E19957-01/816-5904-10/816-5904-10.pdf)（第 4.4.10 节消息顺序），只能保证从会话发送到目的地的消息顺序（即使这样也有一些警告）。

这表示：

*   未定义从*同一会话*发送到*两个不同目的地*的两条消息的顺序
*   未定义从*两个不同会话*发送到*同一目的地*的两条消息的顺序
*   未定义从*两个不同会话*发送到*两个不同目的地*的两条消息的顺序。

**只****定义了从***一个会话*发送到*同一目的地* 的两条消息的顺序。

 **请注意，给定的 JMS 实现可能*通常会*按照（全局）生成项目的顺序交付项目。但是你不应该以任何方式依赖它，因为它基本上是一个“尽力而为”的事情：如果他们能够管理它，它通常会更好。如果不能，它们仍然在规范范围内，您的应用程序必须能够处理。

**tl;博士**是的，你的同事是正确的。再次注意，即使是单一会话/单一目的地的情况下的保证也不是很强，尤其是在涉及不同消息选项的情况下（有关详细信息，请参阅链接的 PDF）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T12:04:47.610

由于 JMS 是“异步的”，因此永远无法保证消息传递的顺序。**

# delphi - Delphi：将列从一个excel表复制到另一个

> ID：10547873
> 
> 赞同：0
> 
> 时间：2012-05-11T08:20:14.390
> 
> 标签：delphi, excel, com

我需要找到第一个单元格具有指定值的列（在除 ProfitSheet 之外的每张表上）（它始终存在并且每张表只有一个），然后将列复制到另一张表。即类似的东西：

```
for i := 2 to MsExcel.Sheets.Count do // sheets loop. Sheets[1] —  ProfitSheet
begin
  MsExcel.Sheets[i].Select;
  for j := 1 to 15 do // columns loop to find "Profit column"
    if MsExcel.Cells[1, j].Text = 'Profit' then
      // copy j column, usually I use something like 
      // VariantArr := MsExcel.Range[MsExcel.Cells[1, j], MsExcel.Cells[299, j]].Value
      // and then 
      // Range := MsExcel.Range[MsExcel.Cells[1,i], MsExcel.Cells[299, i]];
      // Range.Value := VariantArr;
      // but I don't know how to find last column's cell (where 299)
  MsExcel.Sheets['ProfitSheet'].Select;
  // copy col to the i column of ProfitSheet
end; 
```

# backbone.js - 如何创建一个模块的实例并使用 requirejs 将其传递给另一个？

> ID：10547874
> 
> 赞同：0
> 
> 时间：2012-05-11T08:20:16.753
> 
> 标签：backbone.js, requirejs

我正在使用 Backbone 和 Requirejs 构建一个单页应用程序。

现在我一直从我的模块文件中返回一个新实例，文件结束为：

```
 return new moduleName; 
```

这工作正常，直到我不得不将参数传递给集合的初始化方法。由于在创建实例时调用了初始化，因此我将“新”从 return 语句中取出。

```
return mymoduleName; 
```

并在我的路由器中使用参数实例化集合：

```
myCollection = new library({paramname: "value"}); 
```

这确实创建了一个“库”实例——在我的路由器的定义块中引入的一个集合，但是我如何将它传递给负责渲染它的视图呢？

我的视图类在其定义块中具有相同的依赖关系，并且在其初始化中我将其绑定到集合的重置：

```
this.collection = library;
_.bindAll(this, 'render');
this.collection.bind('reset', this.render); 
```

这在从集合类中删除“新”之前有效（回顾起来根本没有意义！）但是现在视图永远不会被渲染，因为它是在路由器中实例化的——我如何将同一个实例传递给视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T09:48:05.343

不要在其初始化方法中设置集合，而是在您实例化视图的任何位置（在您的情况下为路由器）。

```
var myCollection = new library({paramname: "value"});
var myView = new myCustomView({ 
    collection: myCollection 
}); 
```

如果`myCollection`是一个您还需要从其他地方访问的变量，您可以在路由器（`myRouter.myCollection = ...`）上设置它，您可以创建一个包含全局对象的模型（`MyAppGlobals`），或者您可以简单地拥有一个全局变量（不推荐）。

# paypal - 即时创建贝宝按钮

> ID：10547875
> 
> 赞同：7
> 
> 时间：2012-05-11T08:20:26.787
> 
> 标签：paypal

我有一个 web 应用程序，用户可以在其中销售打印服务，我想让我的用户在他们的页面上添加立即付款按钮，以便客户可以为他们的服务付费。

我的用户在设置中指定他们的贝宝电子邮件地址等，并用价格等设置他们的服务。

我应该使用什么 API 来即时创建立即付款按钮？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T01:44:01.303

您不需要 API 来创建“立即付款”按钮。您可以在客户的 Paypal 帐户中创建按钮，也可以使用 HTML 动态生成（请参阅[Paypal Payments 标准的 HTML 变量](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)）。

从您/他们的 Paypal 帐户创建按钮的一个优点是您可以获得额外的安全层（支持加密表单或使用托管按钮 ID，因此用户无法更改提交给 Paypal 的金额）。

但是，如果您处理数百个不同的按钮，那么动态生成按钮并在 Paypal 发送回确认（通过[PDT 或 IPN](https://stackoverflow.com/questions/2836779/paypal-ipn-vs-pdt)）时执行额外的验证更有意义，然后再运送您的物品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-23T10:21:32.563

您可以使用 PayPal 的[JavaScriptButtons API](https://github.com/paypal/JavaScriptButtons)并通过以下方式动态创建按钮：

```
paypal.button.create(business, data, config, parentNode) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:55:15.260

有一个按钮管理器 API，可让您创建安全按钮 - 这里有更多信息：[https ://www.x.com/developers/paypal/products/button-manager](https://www.x.com/developers/paypal/products/button-manager)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-30T21:37:44.613

PayPal 根据您的要求提供不同的按钮。按照以下步骤生成 PayPal 按钮：

1.  登录您的贝宝账户
2.  点击工具 --> 所有工具
3.  点击支付宝按钮

现在您有几个按钮选项-> 如果有的话，立即购买就是其中之一。

按照这三个步骤操作，然后复制 3 个步骤末尾的代码并将其粘贴到您希望此按钮出现的页面中。

你很高兴接受付款！

# javascript - 聆听响应式网页设计的浏览器宽度？

> ID：10547876
> 
> 赞同：4
> 
> 时间：2012-05-11T08:20:33.367
> 
> 标签：javascript, css, responsive-design

我正在努力使我的网站对移动设备友好。

我想知道浏览器窗口的大小，以便在它比 728px 窄时做一些事情，而在它更大时做一些其他事情。

这必须考虑在 PC 上调整窗口大小以及在手机中从纵向模式更改为横向模式。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-11T08:30:24.250

正如 m90 建议的那样，如果您只想修改样式，那么您应该看看[media queries](https://developer.mozilla.org/en/CSS/Media_queries)。但是，如果您想做的不仅仅是修改样式，那么您必须依赖 JavaScript。

**纯 JavaScript**

问题是获得窗口的宽度并不完全直接，它因浏览器而异。所以你必须创建一个函数，像这样（未经测试）：

```
var width = 0;
function updateWindowSize() {
    if (document.body && document.body.offsetWidth) {
      width = document.body.offsetWidth;
    }
    if (document.compatMode=='CSS1Compat' &&
        document.documentElement &&
        document.documentElement.offsetWidth ) {
       width = document.documentElement.offsetWidth;
    }
    if (window.innerWidth) {
       width = window.innerWidth;
    }
} 
```

然后你可以监听 window onresize 事件，并在每次窗口更改时调用该函数来获取新的窗口大小。

```
window.onresize = function(event) {
    updateWindowSize();
} 
```

**jQuery**

如果您使用 jQuery，那么这可以做得更短一些，因为 jQuery 在幕后为您提供跨浏览器支持：

```
var width;
$(window).resize(function() {
  width = $(window).width();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T14:47:44.550

作为警告，IE8 及更低版本不支持媒体查询或 CSS3。如果你不关心 IE8，那就去吧。Respond.js、Modernizr 等可以帮助支持 IE6-8，但远非完美。

# java - java中`For`循环的最佳实践

> ID：10547884
> 
> 赞同：3
> 
> 时间：2012-05-11T08:20:52.633
> 
> 标签：java

> **可能重复：**
> [for循环优化](https://stackoverflow.com/questions/6093537/for-loop-optimization)

在java中我有一段代码：

```
List e = {element1, element2, ...., elementn};
for(int i = 0; i < e.size(); i++){//Do something in here
}; 
```

和另一个块：

```
List e = {element1, element2, ...., elementn};
int listSize = e.size();
for(int i = 0; i < listSize; i++){//Do something in here
}; 
```

我认为第二个块更好，因为在第一个块中， i​​f `i++`，我们必须再计算`e.size()`一次来比较`for`循环中的条件。是对还是错？比较上面的两个块，写作的最佳实践是什么？为什么？解释清楚并自己尝试这个循环

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-11T08:25:44.150

我个人会改用增强的 for 语句：

```
for (Object element : e) {
    // Use element
} 
```

当然，除非你*需要*索引。

如果我*必须*使用这两种形式中的一种，我会使用第一种，因为它更整洁（它不会引入另一个仅在该循环中使用的局部变量），直到我有具体证据表明它导致了问题。（在大多数列表实现中，`e.size()`是一个简单的变量访问，无论如何都可以由 JIT 内联。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-11T08:24:52.977

通常，最简短和可读的代码是最好的选择，一切都是平等的。在 Java 的情况下，增强的 for 循环（适用于任何实现 的类`Iterable`）是要走的路。

```
for (Object object : someCollection) { // do something } 
```

仅就您发布的两个而言，我认为第一个是更好的选择。它更具可读性，并且您必须记住，在底层，JIT 将尝试优化您编写的大量代码。

**编辑**：你听说过“过早的优化是万恶之源”这句话吗？你的第二个块是过早优化的一个例子。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-11T08:25:29.560

我会一直使用（如果你需要一个索引变量）：

```
List e = {element1, element2, ...., elementn};
for(int i = 0, size = e.size(); i < size; i++){
    // Do something in here
}; 
```

因为`e.size()`可能是一项昂贵的操作。

您的第二个选项不好，因为它在`for`循环之外引入了一个新变量。我建议尽可能限制可变可见性。

否则一个

```
for (MyClass myObj : list) {
    // Do something here
} 
```

更干净，但可能会带来小的性能损失（索引方法不需要实例化`Iterator`）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-11T08:26:45.110

如果您检查一个`LinkedList`类的 size() 实现，您会发现当从列表中添加或删除元素时，大小会增加或减少。调用`size()`只是返回这个属性的值，不涉及任何计算。
因此，直接调用 size() 方法应该会更好，因为您将保存另一个整数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-11T08:24:53.740

`size()`是的，由于您不重复执行方法调用，因此第二种形式的效率略高。编译器很好地自己进行这种优化。

**但是，这不太可能成为应用程序的性能瓶颈。 [避免过早优化](http://c2.com/cgi/wiki?PrematureOptimization)**。最重要的是使您的代码干净易读。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-11T08:24:49.963

第二个是更好的方法，因为在第一个块中，您调用的`e.size()`是一个方法，它是循环中的一个操作，对 JVM 来说是一个额外的负担。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-11T08:25:45.067

在大多数情况下，HotSpot 会将 e.size() 从循环中移出。所以它只会计算一次 List 的大小。

至于我，我更喜欢以下符号：

```
for (Object elem: e) {
   //Do something
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-11T08:26:24.400

我认为这应该更好..可能每次都初始化 int 变量可以从中逃脱..

```
List e = {element1, element2, ...., elementn};
int listSize = e.size();
int i=0;
for(i = 0; i < listSize; i++){//Do something in here
}; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-11T08:24:36.757

我不太确定，但我认为 java 的优化器会用静态值替换该值，所以最终它会是相同的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-05-11T08:29:16.273

为避免在编写代码时进行所有这些编号、迭代器和检查，请使用以下最简单易读的代码，该代码具有最大的性能。为什么这具有最佳性能（详细信息即将发布）

```
for (Object object : aCollection) { 
// Do something here
} 
```

如果需要索引，那么：
在上述两种形式之间进行选择：
第二种更好，因为它只计算了一次大小。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-11T08:31:08.933

我认为现在我们倾向于编写简短易懂的代码，所以第一个选项更好。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-05-11T08:23:53.483

第二个更好，因为在它的body中的第一个循环中可能你会做这个语句e.remove，然后e的大小会改变，所以最好在循环之前将大小保存在一个参数中

# pdf - 所有PDF文件都压缩了吗？

> ID：10547890
> 
> 赞同：18
> 
> 时间：2012-05-11T08:22:02.173
> 
> 标签：pdf, compression, gzip

所以这里有一些关于 PDF 压缩的线程说，由于 PDF 已经被压缩，压缩 PDF 有一些，但不是很多。

我的问题是：包括旧版格式在内的所有 PDF 都是如此吗？

此外，我确信有人（可能是白痴）可以将位图放入 PDF 而不是 JPEG 等。我们公司的数据库中有很多 PDF（可能是一些较旧的格式）。我们正在考虑在传输过程中使用 gzip 进行压缩，但不知道是否值得麻烦

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-11T09:35:36.233

PDF*通常*对其包含的对象使用内部压缩。但是根据文件格式规范，这种压缩绝不是强制性的。所有（或某些）对象可能看起来完全未压缩，它们仍然可以生成有效的 PDF。

有一些命令行工具能够解压缩大部分（如果不是全部）内部对象流（甚至是最现代的 PDF 版本）——并且新的未压缩版本的文件将在屏幕上呈现完全相同或在纸上（如果打印）。

所以回答你的问题：不，你不能假设 gzip 压缩只会增加麻烦而没有好处。您必须使用具有代表性的文件样本集对其进行测试。只需压缩它们并记下使用的时间和节省的空间。

它还取决于所使用的 PDF 制作软件的类型...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-11T14:20:17.027

通过使用 PDF 实用程序对格式中的内容应用压缩以及删除不需要的嵌入字体等内容，您将获得更好的收益，而不是应用 gzip 压缩。此类实用程序可以对图像进行下采样并应用适当的图像压缩，这将比 gzip 有效得多。JBIG2 可以应用于双层图像并且非常有效，JPEG 可以应用于自然图像，并根据您的需要选择质量级别。在 Acrobat Pro 中，您可以使用 Advanced -> PDF Optimizer 查看空间的使用情况并有选择地攻击这些消费者。还有一个通用的 Document -> Reduce File Size 可以自动应用这些缩减。

**更新：**

Ika 的答案有一个指向可以从 Java 中使用的 PDF 优化实用程序的链接。您可以在那里查看他们的[示例 Java 代码](http://www.pdftron.com/pdfnet/samplecode/OptimizerTest.java)。该代码准确地列出了我提到的内容：

*   删除重复的字体、图像、ICC 配置文件和任何其他数据流。
*   可选择将高质量或可打印的 PDF 文件转换为小型、高效且可用于网络的 PDF。
*   可选择将大图像下采样到给定的分辨率。
*   可选择使用 JBIG2 和 JPEG2000 压缩格式压缩或重新压缩 PDF 图像。
*   压缩未压缩的流并删除未使用的 PDF 对象。

# c# - 如何判断 HttpClient 何时超时？

> ID：10547895
> 
> 赞同：176
> 
> 时间：2012-05-11T08:22:46.757
> 
> 标签：c#, timeout, dotnet-httpclient

据我所知，没有办法知道它具体是发生了超时。我没有找对地方，还是我错过了更大的东西？

```
string baseAddress = "http://localhost:8080/";
var client = new HttpClient() 
{ 
    BaseAddress = new Uri(baseAddress), 
    Timeout = TimeSpan.FromMilliseconds(1) 
};
try
{
    var s = client.GetAsync("").Result;
}
catch(Exception e)
{
    Console.WriteLine(e.Message);
    Console.WriteLine(e.InnerException.Message);
} 
```

这将返回：

> 发生一个或多个错误。
> 
> 一个任务被取消了。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-11-06T20:59:04.033

我正在重现同样的问题，这真的很烦人。我发现这些很有用：

[HttpClient - 处理聚合异常](https://stackoverflow.com/questions/11239537/httpclient-dealing-with-aggregate-exceptions)

[HttpClient.GetAsync 中的错误应该抛出 WebException，而不是 TaskCanceledException](http://social.msdn.microsoft.com/Forums/en-US/d8d87789-0ac9-4294-84a0-91c9fa27e353/bug-in-httpclientgetasync-should-throw-webexception-not-taskcanceledexception?forum=netfxnetcom&prof=required)

一些代码以防链接无处可去：

```
var c = new HttpClient();
c.Timeout = TimeSpan.FromMilliseconds(10);
var cts = new CancellationTokenSource();
try
{
    var x = await c.GetAsync("http://linqpad.net", cts.Token);  
}
catch(WebException ex)
{
    // handle web exception
}
catch(TaskCanceledException ex)
{
    if(ex.CancellationToken == cts.Token)
    {
        // a real cancellation, triggered by the caller
    }
    else
    {
        // a web request timeout (possibly other things!?)
    }
} 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-10-15T18:10:31.293

您需要等待该`GetAsync`方法。`TaskCanceledException`如果超时，它会抛出一个。此外，`GetStringAsync`内部`GetStreamAsync`处理超时，所以他们永远不会抛出。

```
string baseAddress = "http://localhost:8080/";
var client = new HttpClient() 
{ 
    BaseAddress = new Uri(baseAddress), 
    Timeout = TimeSpan.FromMilliseconds(1) 
};
try
{
    var s = await client.GetAsync();
}
catch(Exception e)
{
    Console.WriteLine(e.Message);
    Console.WriteLine(e.InnerException.Message);
} 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2021-02-01T08:37:44.107

从 .NET 5 开始，[实现已经改变](https://devblogs.microsoft.com/dotnet/net-5-new-networking-improvements/)。`HttpClient`仍然抛出 a `TaskCanceledException`，但现在将 a 包装`TimeoutException`为`InnerException`。因此，您可以轻松检查请求是否被取消或超时（从链接的博客文章复制的代码示例）：

```
try
{
    using var response = await _client.GetAsync("http://localhost:5001/sleepFor?seconds=100");
}
// Filter by InnerException.
catch (TaskCanceledException ex) when (ex.InnerException is TimeoutException)
{
    // Handle timeout.
    Console.WriteLine("Timed out: "+ ex.Message);
}
catch (TaskCanceledException ex)
{
    // Handle cancellation.
    Console.WriteLine("Canceled: " + ex.Message);   
} 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-08-26T15:09:53.817

我发现确定服务调用是否超时的最佳方法是使用取消令牌而不是 HttpClient 的超时属性：

```
var cts = new CancellationTokenSource();
cts.CancelAfter(timeout); 
```

然后在服务调用期间处理 CancellationException ...

```
catch(TaskCanceledException)
{
    if(cts.Token.IsCancellationRequested)
    {
        // Timed Out
    }
    else
    {
        // Cancelled for some other reason
    }
} 
```

当然，如果超时发生在服务端，那应该可以由 WebException 处理。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-03-01T16:58:50.697

基本上，您需要捕获`OperationCanceledException`并检查传递给`SendAsync`（或`GetAsync`，或您正在使用的任何`HttpClient`方法）的取消令牌的状态：

*   如果它被取消（`IsCancellationRequested`为真），这意味着请求真的被取消了
*   如果不是，则表示请求超时

当然，这不是很方便……如果`TimeoutException`超时，最好接收一个。我在这里提出了一个基于自定义 HTTP 消息处理程序的解决方案：[Better timeout handling with HttpClient](https://www.thomaslevesque.com/2018/02/25/better-timeout-handling-with-httpclient/)

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-05-11T08:26:27.250

来自[http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.timeout.aspx)

> 域名系统 (DNS) 查询最多可能需要 15 秒才能返回或超时。如果您的请求包含需要解析的主机名，并且您将 Timeout 设置为小于 15 秒的值，则可能需要 15 秒或更长时间才能**引发 WebException 以指示您的请求超时**。

然后您可以访问该`Status`属性，请参阅[WebExceptionStatus](http://msdn.microsoft.com/en-us/library/system.net.webexceptionstatus.aspx)

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2018-09-05T04:36:17.390

```
_httpClient = new HttpClient(handler) {Timeout = TimeSpan.FromSeconds(5)}; 
```

是我通常做的事情，似乎对我来说非常好，使用代理时尤其好。

# java - 如何使用 libgdx 中的简单纹理绘制自定义形状？

> ID：10547897
> 
> 赞同：6
> 
> 时间：2012-05-11T08:22:59.207
> 
> 标签：java, opengl-es, libgdx

我想在我的游戏中绘制自定义静态形状，就像愤怒的小鸟所做的那样： ![愤怒的小鸟](../Images/7b8c0ee0aec4972a97f79ea8330486df.png)

但问题是纹理是方形的。

![静态接地](../Images/c49ea00d94a92dc472ececb4f8e4227e.png)

我们如何告诉“SpriteBatch”用一些顶点绘制形状？有人有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T09:03:27.160

根据[文档](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/g2d/SpriteBatch.html)：

> SpriteBatch 用于绘制引用纹理（区域）的 2D 矩形

因此，从本质上讲，此方法不允许您指定除矩形之外的任何其他几何图形。但是，有一个[draw方法](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/g2d/SpriteBatch.html#draw%28com.badlogic.gdx.graphics.Texture,%20float%5b%5d,%20int,%20int%29)可以让你指定“矩形”的四个坐标，然后把它变成别的东西。您必须将几何体分解为适合此*图元*的较小部分。看起来这种方法不适合几何形状的变化。

最好[创建一个网格](http://code.google.com/p/libgdx/wiki/MeshColorTexture)并绘制它。网格不支持三角剖分，因此使用[ObjLoader.loadObj*](http://libgdx.l33tlabs.org/docs/api/com/badlogic/gdx/graphics/g3d/loaders/obj/ObjLoader.html)方法以[Alias Wavefront OBJ](http://en.wikipedia.org/wiki/Wavefront_.obj_file)格式加载网格。指定几何图形不应该是一件麻烦事；文章链接到一些示例文件。

# jquery - jQuery中心屏幕加载消息

> ID：10547907
> 
> 赞同：4
> 
> 时间：2012-05-11T08:24:06.720
> 
> 标签：jquery, loading

我知道有一个 JQuery 函数 ajaxStart() 会在进行 ajax 调用时显示加载消息，我也知道为加载消息创建一个 div，这两种方式都显示[在这里，](https://stackoverflow.com/questions/1964839/jquery-please-waiting-loading-animation)但这些方法都创建一个在屏幕左下角加载我不想要的消息。

编辑：我已经使用了我给出的页面上提到的两种方法，但目前我正在使用 ajaxStart()

将此添加为脚本

```
<script type="text/javascript" charset="utf-8">
$("#loading").ajaxStart(function(){
    $(this).show();
}).ajaxStop(function(){
   $(this).hide();
});
</script> 
```

将此添加到 HTML

```
<div id="loading">
   <p><img src="loading.gif" /> Please Wait</p>
</div> 
```

有没有办法将这些方法中的一种或另一种在屏幕中心创建加载消息的方法居中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:34:11.520

将您的`Please Wait`消息放入`<div id="loading_text">`（例如）中。

然后样式它：

```
#loading_text {
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    margin-top: -10px;
    line-height: 20px;
    text-align: center;
} 
```

这将使单行文本（行高 20，负边距为 10）居中固定叠加层内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T08:29:40.210

这是我用来使对话框出现在屏幕中央的一些代码。在此示例中，`id`应该是`"#id"`您的 div 的选择器...

```
var winH = $(window).height();
var winW = $(window).width();

var dialog = $(id);

var maxheight = dialog.css("max-height");
var maxwidth = dialog.css("max-width");

var dialogheight = dialog.height();
var dialogwidth = dialog.width();

if (maxheight != "none") {
    dialogheight = Number(maxheight.replace("px", ""));
}
if (maxwidth != "none") {
    dialogwidth = Number(maxwidth.replace("px", ""));
}

dialog.css('top', winH / 2 - dialogheight / 2);
dialog.css('left', winW / 2 - dialogwidth / 2); 
```

另请注意，如果 DIV 在显示时动态调整大小，则它不会自动调整到屏幕的中心，但这在我的使用中并不重要，因为我的对话框通常是固定大小的

[这是一个工作示例](http://jsfiddle.net/ZTaTz/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T16:47:28.543

我意识到这篇文章有点晚了，但我找到了一个很好的解决方案，并认为我可以分享

我把它放在文档准备功能中

```
$('.progress').ajaxStart(function () {
    $(this).dialog({
        title: "Loading data...",
        modal: true,
        width: 50,
        height: 100,
        closeOnEscape: false,
        resizable: false,
        open: function () {
            $(".ui-dialog-titlebar-close", $(this).parent()).hide(); //hides the little 'x' button
        }
    });
}).ajaxStop(function () {
    $(this).dialog('close');
}); 
```

这也可以包含在单独的 .js 文件中。

然后在我看来我使用

这对我很有用。无论调用什么函数，如果它是一个 ajax 调用，就会显示这个加载图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T22:50:01.340

```
<script type="text/javascript">
$("#loading").ajaxStart(function(){
    $(this).css('position', 'fixed')
             .css('left', '45%')
             .css('top' '45%')
             .show();
}).ajaxStop(function(){
   $(this).hide();
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T08:34:52.740

您必须以这种方式将其与屏幕中心对齐：

```
left = (  this.parent().width() / 2   ) - (this.width() / 2 );
top = (  this.parent().height/ 2   ) - (this.height() / 2 );
this.css({top:top,left:left}); 
```

使用自爆 jQuery 插件，并调用

```
 <script type="text/javascript" charset="utf-8">
       $("#loading").ajaxStart(function(){
            $(this).show().align(); // for absolute position pass {position:'absolute'}
       }).ajaxStop(function(){
      $(this).hide();
   });
</script> 
```

* * *

您还可以在身体上创建叠加层`$('body').overlay();`

// 使用这段代码：

```
 ;(function($){
        $.extend($.fn,{
            // Overlay ; $(body).overlay();
            overlay: function(o){

                var d={
                addClass:'',
                css:{},
                opacity:0.5,
                autoOpen:true,
                zIndex:998,
                onOpen:function(){x.show();},
                onClose:function(){x.hide();},
                onRemove:function(){x.remove();}
            },x,l;

            // Merge Options
            o=$.extend({},d,o);

            // Create overlay element
            x=$('<div>',{css:{opacity:o.opacity,zIndex:o.zIndex}}).css(o.css).addClass('overlay '+o.addClass).hide().appendTo(this);

            // If appended to body element, set position fixed
            this[0].tagName.toLowerCase()=="body"&&x.css("position","fixed");

            // Overlay Control Object
            l = {
                remove:function(){o.onRemove(l)},
                open:function(){o.onOpen(l)},
                close:function(){o.onClose(l)},
                obj:x
            };

            // Call On Show
            o.autoOpen&& o.onOpen(l);

            // Return Object
            return l;
        },

        align:function(o){

            var d={
                x:'center',
                y:'center',
                position:'fixed',
                parent:window
            };

            o=$.extend({},d,o);

            var c=$(o.parent),
                t=$(this),
                s=c.scrollTop(),
                top,
                left;

            t.css('position',o.position); // Set Css Position

            if(o.y)top  = o.y=='center' ? (c.height()/2) - (t.innerHeight()/2) : o.y;
            if(o.x)left = o.x=='center' ? (c.width()/2) - (t.innerWidth()/2) : o.x;
            if(o.position=='absolute') top += s; // For absolute position
            if(top<0) top=0;

            t.css({top:top,left:left});
        },

    });

})(jQuery); 
```

覆盖的CSS：

```
html{height:100%;width:100%;}
.overlay{width:100%;height:100%;top:0;right:0;position:absolute;background:#000;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-22T07:40:20.923

如果您使用的是[Bootstrap](http://getbootstrap.com/css/)和[Font Awesome](http://fontawesome.io/icons/)，这是一个不错的解决方案：

**HTML -**您的加载消息（图标）需要放在主容器之外：

```
<!-- Page -->
<div class="page-content">
    My Content
</div>

<!-- Loading -->
<div id="loading" class="text-center hidden">
    <i class="fa fa-spinner fa-spin blue fa-4x"></i>
</div> 
```

**jQuery -**处理 Ajax 请求。

```
//Run when the page load (before images and other resource)
jQuery(function($) {

    //Ajax Loading Message
    $(document).ajaxStart( function() { 
        $(".page-content").addClass('disabled');
        $('#loading').removeClass('hidden');
    }).ajaxStop( function() {
        $(".page-content").removeClass('disabled');
        $('#loading').addClass('hidden');
    });
}); 
```

**CSS -**加载宽度（26px）需要等于你的加载图标宽度，背景颜色（#fff）需要等于你的`.page-content`背景颜色。

```
<!-- Style -->
<style>

    /* Ajax Disable */
    .page-content.disabled {
        pointer-events: none;
        opacity: 0.65;
    }
    #loading {
        position: fixed;
        top: calc(50% - 26px);
        left: calc(50% - 26px);
        z-index: 999;
        background: #fff;
    }

</style>
<!-- Style --> 
```

注意：`pointer-events:none;`防止用户点击页面上的任何按钮、输入等，[它支持 IE11+](http://caniuse.com/#feat=pointer-events)。

# php - PHP - 如何从 JSON 字符串创建对象或关联数组

> ID：10547912
> 
> 赞同：-3
> 
> 时间：2012-05-11T08:24:17.113
> 
> 标签：php, javascript, arrays, json, object

我需要从给定的字符串创建一个数组或一个对象。字符串在帖子中接收，是一个序列化的 js 对象。

我得到一个像这样的字符串：

```
{'id': n, 'propery 1': 'something', 'propery 2': 'something else', etc.} 
```

或者

```
{'whatever': bla bla, etc.} (without the id part). 
```

我需要将其转换为 php 对象或数组或......可用的东西。

我知道我可以提取子字符串，`explode(': ', $string)`但我效率不高。接收到的字符串非常接近 json 格式（只有 1 或 2 个例外，我可以单独处理）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T08:26:53.637

使用 json_decode($string) ==> php 对象（或数组，如果你强制使用参数）。

使用 json_encode($array) ==> 字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:25:57.820

看起来像 JSON。您可以使用 json_decode()：[http ://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T08:26:05.747

您可以在 PHP 中使用 JSON 解码方法：http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-11T08:26:21.370

这是您需要的 json_decode ：[http ://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-11T08:27:23.167

你可以使用`json_encode()`. [http://in.php.net/manual/en/function.json-encode.php](http://in.php.net/manual/en/function.json-encode.php)

# javascript - Alfresco : 非管理员用户无法将站点变为中等模式

> ID：10547915
> 
> 赞同：0
> 
> 时间：2012-05-11T08:24:26.630
> 
> 标签：javascript, share, alfresco, user-permissions, web-scripting

我的 Alfresco 应用程序的 Share 部分有问题。确实，当我以普通帐户（不是管理员）登录并访问未选中“中等”选项的已创建站点时，每次我想修改站点的详细信息时都会收到一条错误消息，并且检查中度选项。
错误消息如下：

```
04110011 Wrapped Exception (with status template): 04110169 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js': 04110168 Access denied. You don't have the permission to perform this operation. 
```

当站点已在“中等”选项下创建或您以管理员帐户登录时，该问题永远不会发生。

这里有控制台日志：

```
ERROR [extensions.webscripts.AbstractRuntime] Exception from executeScript - redirecting to status template error: 04110001 Wrapped Exception (with status template): 04110097 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js': 04110096 Access refusé.  Vous n'avez pas la permission de réaliser cette opération.
org.springframework.extensions.webscripts.WebScriptException: 04110001 Wrapped Exception (with status template): 04110097 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js': 04110096 Access refusé.  Vous n'avez pas la permission de réaliser cette opération.
    at org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:758)
    at org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:171)
    at org.alfresco.repo.web.scripts.RepositoryContainer$2.execute(RepositoryContainer.java:383)
    at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:381)
    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:436)
    at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:466)
    at org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:304)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:333)
    at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:189)
    at org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:118)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:58)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.alfresco.scripts.ScriptException: 04110097 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js': 04110096 Access refusé.  Vous n'avez pas la permission de réaliser cette opération.
    at org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:194)
    at org.alfresco.repo.processor.ScriptServiceImpl.executeScript(ScriptServiceImpl.java:282)
    at org.alfresco.repo.web.scripts.RepositoryScriptProcessor.executeScript(RepositoryScriptProcessor.java:102)
    at org.springframework.extensions.webscripts.AbstractWebScript.executeScript(AbstractWebScript.java:981)
    at org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:86)
    ... 24 more
Caused by: org.alfresco.repo.security.permissions.AccessDeniedException: 04110096 Access refusé.  Vous n'avez pas la permission de réaliser cette opération.
    at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:48)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.audit.AuditMethodInterceptor.proceedWithAudit(AuditMethodInterceptor.java:217)
    at org.alfresco.repo.audit.AuditMethodInterceptor.proceed(AuditMethodInterceptor.java:184)
    at org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:137)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:107)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy53.setPermission(Unknown Source)
    at org.alfresco.repo.site.SiteServiceImpl.setModeratedPermissions(SiteServiceImpl.java:1680)
    at org.alfresco.repo.site.SiteServiceImpl.updateSite(SiteServiceImpl.java:1068)
    at org.alfresco.repo.site.script.Site.save(Site.java:279)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.mozilla.javascript.MemberBox.invoke(MemberBox.java:155)
    at org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:243)
    at org.mozilla.javascript.optimizer.OptRuntime.callProp0(OptRuntime.java:119)
    at org.mozilla.javascript.gen.c44._c11(file:/C:/workspace_starter/Tomcat/home/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js:337)
    at org.mozilla.javascript.gen.c44.call(file:/C:/workspace_starter/Tomcat/home/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js)
    at org.mozilla.javascript.optimizer.OptRuntime.callName0(OptRuntime.java:108)
    at org.mozilla.javascript.gen.c44._c0(file:/C:/workspace_starter/Tomcat/home/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js:366)
    at org.mozilla.javascript.gen.c44.call(file:/C:/workspace_starter/Tomcat/home/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js)
    at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:393)
    at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2834)
    at org.mozilla.javascript.gen.c44.call(file:/C:/workspace_starter/Tomcat/home/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js)
    at org.mozilla.javascript.gen.c44.exec(file:/C:/workspace_starter/Tomcat/home/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/site/site.put.json.js)
    at org.alfresco.repo.jscript.RhinoScriptProcessor.executeScriptImpl(RhinoScriptProcessor.java:472)
    at org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:190)
    ... 28 more
Caused by: net.sf.acegisecurity.AccessDeniedException: Access is denied.
    at net.sf.acegisecurity.vote.AffirmativeBased.decide(AffirmativeBased.java:86)
    at net.sf.acegisecurity.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:394)
    at net.sf.acegisecurity.intercept.method.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:77)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:44)
    ... 58 more 
```

该错误来自“site.put.json.js”网页脚本，其中包含以下源代码：

```
<import resource="classpath:alfresco/module/customAlfrescoAMP/javascript/tsUtils.js">
<import resource="classpath:alfresco/module/customAlfrescoAMP/javascript/ts-constants.js">

function main()
{
    // Get the site
    var shortName = url.extension;
    var site = siteService.getSite(shortName);

    if (site != null)
    {   
        // Updafte the sites details
        if (json.has("title") == true)
        {
           site.title = json.get("title");
        }
        if (json.has("description") == true)
        {
           site.description = json.get("description");
        }

        // Use the visibility flag before the isPublic flag
        if (json.has("visibility") == true)
        {
           site.visibility = json.get("visibility");
        }
        else if (json.has("isPublic") == true)
        {
           // Deal with deprecated isPublic flag accordingly
           var isPublic = json.getBoolean("isPublic");
           if (isPublic == true)
           {
              site.visibility = siteService.PUBLIC_SITE;
           }
           else
           {
              site.visibility = siteService.PRIVATE_SITE;
           }
        }

        //début modif T&S
        if (!site.node.hasAspect("st:siteType"))
        {
            site.node.addAspect("st:siteType");
        }

        var siteType = "";
        if (json.has("type") == true)
        {
            siteType = json.get("type");
        }

        var assocs = site.node.assocs["st:siteTypeAssoc"];
        if (assocs != null && assocs.length == 1) {
            site.node.removeAssociation(assocs[0], "st:siteTypeAssoc");
            assocs[0].remove();
        }
        var siteTypeNode = site.node.createNode(null, "cm:content");
        siteTypeNode.content = siteType;
        site.node.createAssociation(siteTypeNode, "st:siteTypeAssoc");

        var siteiconNodeRef = null;
        if (json.has("siteiconNodeRef"))
        {
            siteiconNodeRef = json.get("siteiconNodeRef");
        }

        if (siteiconNodeRef != null && siteiconNodeRef != "")
        {
           var image = search.findNode(siteiconNodeRef);

           // ensure cm:person has 'cm:preferences' aspect applied - as we want to add the avatar as
           // the child node of the 'cm:preferenceImage' association
           if (!site.node.hasAspect("st:siteIcon"))
           {
               site.node.addAspect("st:siteIcon");
           }

           // remove old image child node if we already have one
           var assocs = site.node.assocs["st:siteIconAssoc"];
           if (assocs != null && assocs.length == 1)
           {
               site.node.removeAssociation(assocs[0], "st:siteIconAssoc");
               //no need to remove the image ?
               //assocs[0].remove();
           }

           //images are created in userhome, move them to the site
           image.move(site.node);

           site.node.createAssociation(image, "st:siteIconAssoc");
        }
        //fin modif T&S

        // Save the site
        site.save();

        var members = site.listMembers(null, null, 0);

        var templateNodeRef = search.luceneSearch( "@\\{http\\://www.alfresco.org/model/content/1.0\\}name:\"edit-site-mail.ftl\"")[0].nodeRef;

        for (username in members)
        {
        /*var mail = actions.create("mail");
        mail.parameters.to_many = users;
        mail.parameters.subject = EDIT_SITE_MAIL_SUBJECT + site.title;
        mail.parameters.template = templateNodeRef;
        mail.execute(site.node);
        */

        createAndSendHtmlMail(site.node, EDIT_SITE_MAIL_SUBJECT + site.title, people.getPerson(username).properties["cm:email"], "", templateNodeRef, null);
        }

        // Pass the model to the template
        model.site = site;
    }
    else
    {
        // Return 404
        status.setCode(status.STATUS_NOT_FOUND, "Site " + shortName + " does not exist");
        return;
    }
}

main(); 
```

所以，如果你有什么建议...

# perl - splice：当 LENGTH 的结尾超过数组时可以吗？

> ID：10547922
> 
> 赞同：3
> 
> 时间：2012-05-11T08:24:50.453
> 
> 标签：perl, splice

[拼接](http://perldoc.perl.org/functions/splice.html)

可以吗，什么时候`OFFSET`在数组内，但结尾超过了数组`LENGTH`的结尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T17:47:53.403

很容易尝试。

```
$ perl -wE'
   my @a = "a".."e";
   my @b = splice @a, 2, 10;
   say 0+@b, " elements were removed.";
   say 0+@a, " elements remain."
'
3 elements were removed.
2 elements remain. 
```

我完全相信这不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:40:17.930

这似乎是有效的。医生对这种情况说了什么。下面的代码说明超出边界的长度是有效的。

```
@array = ('this','is','for','testing','this','is','for','testing');
@array1 = (1,2,3,4,5,6,7,8,9,10);

splice @array,5,100,@array1;

print join "\n", @array ; 
```

# c# - 当 TCP 客户端向 TCP 服务器发送大量数据时，NetworkStream 数据被挤压

> ID：10547925
> 
> 赞同：0
> 
> 时间：2012-05-11T08:24:59.787
> 
> 标签：c#, networkstream

我有一个 C# 中的 TCP 服务器软件。我正在使用下面的代码读取来自客户端的数据。

```
DataLen = NetworkStream.Read(Data, 0, Data.Length); 
```

在这种情况下，当客户端在很短的时间内连续发送数据时，新数据会在我评估最后一个数据缓冲区时出现。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:29:43.490

TCP 协议提供可靠、有序的字节流传送。因此，您无需担心这一点。
当您阅读速度太慢并且网络缓冲区太小时，可能发生的最坏情况是重新排队。因此，您可能需要将读取和处理拆分为不同的线程。
requeues 对应用程序不透明，您只会看到速度很慢，并且需要像 wireshark/tcpdump 这样的工具来检测它们。

# android - 在 Android 中隐藏键盘

> ID：10547933
> 
> 赞同：1
> 
> 时间：2012-05-11T08:25:43.500
> 
> 标签：android, keyboard

我是 Android 应用程序开发的新手，但我有 iOS 的编程知识。我昨天才开始学习Andriod。当我单击 EditText 之外的任何位置时，我想隐藏键盘。但我找到了一个隐藏键盘的代码，如下所示：

```
"InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(txtUserName.getWindowToken(), 0);" 
```

然后我在我的项目中尝试了以下操作，但我无法隐藏键盘。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    txtUserName = (EditText)findViewById(R.id.txtUserName);

    InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(txtUserName.getWindowToken(), 0);
} 
```

我怀疑我是否需要添加任何 touchEvents 或 keyboardEvents。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:34:08.977

我这样做了`onCreate()`，它有帮助：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:39:56.167

```
 eidttext.setOnFocusChangeListener(new View.OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean arg1) {
            // TODO Auto-generated method stub
            if (!arg1) {
                hideKeyboard();

            }           

        }

        private void hideKeyboard() {
            // TODO Auto-generated method stub
            InputMethodManager inputManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            inputManager.hideSoftInputFromWindow(confpassword
                    .getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS);

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T08:49:47.773

这是我的代码，用于确保键盘永远不会出现在 EditText 框中。您也许可以根据您的情况对其进行调整。

```
protected void hideKeyboard(EditText et){
    et.setKeyListener(null);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T09:51:17.770

您的问题与以下相同，请参阅它可能对您有所帮助。

[http://3.bp.blogspot.com/-aOmfANlocYI/Tm9gJvI7s1I/AAAAAAAAAEA/yBEfcpoGX4U/s1600/3.JPG](http://3.bp.blogspot.com/-aOmfANlocYI/Tm9gJvI7s1I/AAAAAAAAAEA/yBEfcpoGX4U/s1600/3.JPG)

如果它真的对你有帮助，那就做对吧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T10:24:32.463

这将帮助您：

```
mInputMethodManager.hideSoftInputFromWindow(zipCodeEdt.getWindowToken(), 0); 
```

# ruby-on-rails - 未初始化的常量 Rake::DSL

> ID：10547937
> 
> 赞同：0
> 
> 时间：2012-05-11T08:25:49.710
> 
> 标签：ruby-on-rails, ruby

我遇到了“未初始化常量 Rake::DSL”的问题。我曾尝试在 Gemfile 中添加 gem 'rake','0.8.7'，但没有成功。有没有其他方法可以解决这个问题？谢谢！

```
n177-p118:testapp shuang$ rake db:migrate --trace
(in /Users/shuang/rails/testapp)
rake aborted!
uninitialized constant Rake::DSL
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2503:in `const_missing'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks/documentation.rake:11
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks.rb:15:in `load'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks.rb:15
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks.rb:6:in `each'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks.rb:6
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/application.rb:289:in `require'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/application.rb:289:in `initialize_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie.rb:184:in `instance_exec'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie.rb:184:in `load_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie.rb:184:in `each'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie.rb:184:in `load_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/engine.rb:424:in `load_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/application.rb:145:in `load_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `send'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/shuang/rails/testapp/rakefile:8
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2383:in `load'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2383:in `raw_load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2017:in `load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2016:in `load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2000:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:1998:in `run'
/usr/bin/rake:31 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T17:25:30.810

这可能是非常糟糕的形式，但是将其添加到我的 Rakefile 的顶部对我有用：

```
module Rake
  module DSL
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:32:29.417

检查您的 gemfile.lock，它的 rake 版本必须 > 0.8.7。如果是，则全部删除，然后删除版本的所有实例或删除 gemfile.lock 的所有内容，然后再次进行捆绑安装。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-11T08:39:40.580

您也可以尝试运行

```
bundle exec rake db:migrate 
```

# android - 如何提高性能：数据库还是文本文件？

> ID：10547938
> 
> 赞同：0
> 
> 时间：2012-05-11T08:25:51.843
> 
> 标签：android, database, performance

我的 Android 应用程序是一个从 Web 服务获取数据并将其显示给用户的客户端。我想知道如何提高性能并避免连续连接。

例如，每次单击按钮“显示”时，我都会建立连接并获取 json 字符串。我知道我的琴弦在白天不会改变（希望如此）。

最好是获取 json 字符串并将其保存在文本文件中，将字符串保存在数据库中（例如，使用“日期”和“字符串”列）然后反序列化它，或者直接反序列化字符串并保存为适当的对象数据库？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:30:18.203

如果它是一个小字符串，比如低于 1K，请将其放在[Shared Preferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)中。否则，如果您的数据要在几天内保持相关性，请使用数据库。如果您的数据几乎每天都会被丢弃并完全刷新，并且只有几 KB，请将其写入缓存文件。

# c - C中的简单服务器

> ID：10547940
> 
> 赞同：0
> 
> 时间：2012-05-11T08:25:54.307
> 
> 标签：c

我用 c 创建了一个简单的 TCP/IP 服务器，它可以在我的 Linux 机器上顺利运行。我可以以 localhost:80 身份连接，也可以从不同的机器连接，但显然我必须使用实验室计算机的 IP。

我的问题是：我如何从我自己的 Mac OS X 机器上运行服务器，比如说，并从外部连接到它？不知道如何正确地提出问题......如何为我的服务器分配特定的 IP？对不起，我还在探索这个领域！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:29:32.177

如果您的本地代理或机器配置为允许输入连接，最简单的方法是分配一个固定名称，该名称将映射到您的（动态）IP。

网上有很多免费的动态 DNS 解决方案（例如：[http](http://www.no-ip.com/) ://www.no-ip.com/ ）

如果您只想进行一次性测试，您可以通过这样的服务查看您拥有的 IP：http: [//www.whatismyip.com/](http://www.whatismyip.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:31:34.130

您所需要的只是一台具有全局可路由静态 IP 地址的机器。并在那台机器上运行你的服务器。

在你的 Mac 笔记本电脑上运行它是可以的，但是当你从一个 wifi 网络跳到另一个你的服务器时，你的服务器不再可用。

最好的方法是在你的实验室或家里找到一台机器，一个桌面连接到具有静态全局路由 IP 的 comcast isp 并在那里运行你的服务器。

# c# - 来自winforms的ssrs报告中的参数设置问题

> ID：10547953
> 
> 赞同：0
> 
> 时间：2012-05-11T08:26:45.930
> 
> 标签：c#, winforms, reporting-services

从我的 win 表单应用程序中，我无法将 int 和日期时间作为参数传递，当我尝试传递时，程序给出错误。所以在这里我将我的所有参数转换为字符串并传递，但报告接受，int，日期时间，日期时间，因为有来自相应存储过程的参数。所以它生成错误报告。

```
 string ID = "1 ";
                 string DateStart= DateTime.Today.AddDays(-1).ToString();
                 string DateEnd= DateTime.Today.ToString();
rptParameters[0] = new Microsoft.Reporting.WinForms.ReportParameter("@ID", ID);
 rptParameters[1] = new ReportParameter("@DateStart", DateStart)    
 rptParameters[2] = new ReportParameter("@DateEnd", DateEnd); 
```

除了将字符串参数从 winform 传递到 SSRS 报告之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:37:06.733

正如您[从文档](http://msdn.microsoft.com/en-US/library/microsoft.reporting.winforms.reportparameter.reportparameter%28v=vs.80%29)（和错误消息）中看到的那样，参数值应该是一个字符串。
使用`ID.ToString()`,`DateStart.ToString()` 和`DateEnd.ToString()`作为您的参数。

```
rptParameters[0] = new ReportParameter("@ID", ID.ToString());
rptParameters[1] = new ReportParameter("@DateStart", DateStart.ToString());    
rptParameters[2] = new ReportParameter("@DateEnd", DateEnd.ToString()); 
```

# django - 如何实现“阅读更多”功能

> ID：10547955
> 
> 赞同：0
> 
> 时间：2012-05-11T08:26:53.773
> 
> 标签：django, django-cms

我实际上想把一些条目页面放在首页，但我只想用“阅读更多”按钮显示条目的一些行。我发现一些用 Django CMS 设计的网站可以做到这一点。你能告诉我如何实现这些功能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T08:37:22.750

最基本和最灵活的版本是每个条目存储两个字段：摘要和全文。在首页上，您只会显示摘要，而在专用页面/onclick 上，您可以显示完整版本。

您当然可以提出“优化”来减少冗余，通常涉及某种类型的标记来表示自动从全文中提取的“摘要”部分，但它增加了解析和复杂性开销，降低了灵活性，而且通常不值得。

# java - Spring Roo 的用户界面

> ID：10547958
> 
> 赞同：2
> 
> 时间：2012-05-11T08:27:02.370
> 
> 标签：java, gwt, spring-roo, tiles

我正在使用 Spring Roo 开发一个应用程序。我需要决定我的应用程序的前端。
有人可以比较一下 Spring Roo 前端的 Apache Tiles 与 GWT 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:43:55.540

Apache Tiles 是一个模板框架。如果您有大量小部件和容器的工具包，则作为 GWT。所以GWT是结合Spring Roo进行UI开发的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:17:29.167

我同意 [tag]rui 并且 spring roo 有 vaadin 插件[https://vaadin.com/wiki/-/wiki/Main/Spring%20Roo%20Plugin](https://vaadin.com/wiki/-/wiki/Main/Spring%20Roo%20Plugin)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:21:22.030

我知道这不是你的问题，但你有没有给 Vaadin 机会而不是 GWT？Roo 的 Vaadin 插件允许您使用一些命令创建应用程序。Vaadin 位于 GWT 之上，为您管理组件中的大部分客户端-服务器通信。

# xtk - xtk-deps.js 文件丢失？

> ID：10547962
> 
> 赞同：1
> 
> 时间：2012-05-11T08:27:26.677
> 
> 标签：xtk

我参考[https://github.com/xtk/X/wiki/X:DevelopersHeadsUp](https://github.com/xtk/X/wiki/X:DevelopersHeadsUp) 我在开发过程中尝试运行 XTK。我做了以下步骤 1) 在 Github 上 Fork XTK 以获取最新的源[http://github.com/XTK/X](http://github.com/XTK/X) 2) 将其克隆到您的硬盘驱动器

但我在文件夹中找不到 xtk-deps.js 文件。

当我尝试

./build.py -d

它抱怨“命令行太长”并且没有生成 xtk-deps.js 文件。有人可以帮助我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:11:25.353

是的，错误来自通过 shell 命令行构建的 python 脚本，这对于 Windows 提示来说太长了。最好使用 Linux 或 Mac，或者我们可以给你一个，然后你必须在添加/删除类时手动编辑它，但这不是最简单的！

# wpf - 当我抛出错误异常（异步方法）时，WPF 自托管应用程序中的 WCF 服务崩溃

> ID：10547963
> 
> 赞同：0
> 
> 时间：2012-05-11T08:27:34.040
> 
> 标签：wpf, wcf, exception-handling

我有一个托管在 WPF 应用程序中的服务，该服务带有一个带有 Begin/end 方法的异步方法，当我在服务中捕获异常时，我想抛出一个 faultException 来警告客户端。

但是，当我尝试抛出 faultException 时，主机应用程序崩溃，突然关闭。

在我的存储库中，我捕获了 UpdateException，然后，我创建了一个自定义异常 UniqueKeyException，它被抛出给调用者。调用者是在 Begin 方法中调用的辅助方法。

这个辅助方法，捕获 UniqyeKeyException 并且只做一个“抛出”，即在我的 end 方法的 try/catch 块中捕获。这里有一些我不明白的地方，为什么最后这个异常是在AgregateException而不是UniqueKeyException的块中捕获的。

好吧，无论如何，在结束方法的catch块中，在AgregateException块中，我检查innerException是否为UniqueKeyException，如果是，我创建一个对象UniqueKeyArgs（一个带有要发送给客户端的信息的自定义类），创建一个 FaultException，最后抛出 FaultException。正是在这一步中，主机应用程序崩溃了。

我认为我的所有配置都正确，因为我的自定义类 UniqueKeyArgs 被装饰为 Datacontract 并将其属性装饰为 DataMember，在我的主机应用程序的 app.config 中，我将行为配置为包含异常详细信息，并在合同中使用 faultContract 进行装饰.

为什么应用程序崩溃？

我的代码如下：

存储库

```
public List<Usuers> updateUsers(List<Users> paramUsers)
{
....

catch(UpdateException ex)
{
SqlException innerEx = (SqlException)ex.InnerException;

                //Code 2627 is Unique Key exception from SQL Server.
                if (innerEx != null && innerEx.Number == 2627)
                {
                    //I create the conditions of searching
                    ConditionsUsers conditions = new conditions();

                    conditions.UserName = (Users)ex.StateEntries[0].Entity).userName;

                    //Search for the existing user
                    Users myUser = getUser(conditions);
                    string message = "the user " + conditions.userName + " exists.";
                    throw new UniqueKeyException(message, myUser);
                }
                throw;
} 
```

服务实施

```
//This is my auxiliar method, called in the Begin method.
private submitUpdates()
{
     ....

     catch(UniqueKeyException ex)
     {
          //The code enter here
          throw;
     }
}

public IAsyncResult BeginUpdateUsers(List<users> paramUsers, AsyncCallback callback, object state)
{
     Task<List<Users>> myTask= Task<List<Users>>.Factory.StartNew(p => sumbmitUpdates(paramUsers), state);
     return myTask.ContinueWith(res => callback(myTask));
}

public List<Users> EndUpdateusers(IAsyncResult result)
     {
          try
          {
               return ((Task<List<Users>>)result).Result;
          }
          //Why agregateException and not is catched in  the UniqueKeyException ???
          catch(AgregateException ex)
          {
               if (innerExceptions[0] is UsuariosValorUnicoException)
                    {
                        //I assign manually the data to debug, to discard other problems.
                        Users myUser = new Users();
                        myUser.UserName = "Jhon";
                        myUser.Password = "pass123";
                        UniqueKeyArgs myArgs = new UniqueUserArgs("unique key error", myUser);
                        FaultException<UniqueKeyArgs> myException = new FaultException<UniqueKeyArgs>(myArgs);

                        //Crash here, in the throw myException
                        throw myException;                        
                    }
                }
                throw;
          } 
```

我的合同

```
[FaultContract(typeof(UniqueKeyArgs))]
IAsyncResult BeginUpdateUsers(List<Users> paramUser, AsyncCallback callback, object state);
List<Users> EndUpdateUsers(IAsyncResult result); 
```

当我在 End 方法中抛出 myException 时崩溃。

我在这篇[文章](https://stackoverflow.com/questions/5606937/how-to-throw-faultexception-from-self-hosting-wcf-service)中看到，解决方案也是在主机应用程序中捕获异常，而不仅仅是在服务对象中。但是，此解决方案使用属于 System.Windows.Forms 命名空间的 Application.ThreadException，并且我使用的是 WPF 应用程序。

如何从 WPF 应用程序中托管的服务向客户端发送异常？

谢谢。

EDIT1：好吧，我在抛出异常的行中使用了 try/catch 块，我看到错误是我没有指出原因，所以当我创建我的 FaultException 时，我会这样做：

```
FaultException<UniqueKeyArgs> myException = new FaultException<UniqueKeyArgs>(myArgs, new FaultReason("DummyReason"); 
```

在这种情况下，异常消息是“DummyReason”，我在 FaultReason 中设置的消息，所以它什么也没说。FaultException 不抛出，并将一般异常抛出给客户端。

在这种情况下，主机应用程序不会关闭，而是关闭与客户端的连接，我必须重新连接。

似乎问题是FaultException的创建，但我没有看到问题。

@Roeal 建议也许只能将 faultException 与同步方法一起使用，但在此[链接](http://social.msdn.microsoft.com/Forums/en-US/async/thread/d7f6127c-0e51-4f2d-84c9-a49765fa83ac)中，我可以看到一个与异步方法一起使用的示例。我看过别人的例子，并不是唯一的。

谢谢。

EDIT2：我解决了我的问题。我的问题是，在 FaultException 中，T 是一个具有自跟踪实体属性的对象，这是一个问题，如果我没记错的话，我只能使用基本类型作为异常的属性。

然后，在例外情况下，我实现了 ISerialize。需要能够将信息发送到客户端，否则，客户端会收到带有 null 属性的 exception.Detail。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:55:15.100

您是否还在服务合同中声明了同步操作？在这种情况下，也许这会有所帮助：

> 如果在服务操作契约上定义了故障契约，则该`FaultContract`属性应仅应用于**同步操作**。
> *—— Juval Lowy，“编程 WCF 服务第 3 版”（p456）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T15:36:46.317

我解决了我的问题。我的问题是，在 FaultException 中，T 是一个具有自跟踪实体属性的对象，这是一个问题，如果我没记错的话，我只能使用基本类型作为异常的属性。

然后，在例外情况下，我实现了 ISerialize。需要能够将信息发送到客户端，否则，客户端会收到带有 null 属性的 exception.Detail。

# mysql - 将数组中的值插入到 mySQL 查询中

> ID：10547964
> 
> 赞同：-1
> 
> 时间：2012-05-11T08:27:38.997
> 
> 标签：mysql, arrays, cakephp

```
$test = array(10,20);
$rez = $this->Schimb->query("SELECT `pret`,`valuta` FROM schimb ORDER BY pret*{$test['valuta']} DESC"); 
```

我无法将数组中的值插入到 MySQL Query 中……问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:31:56.873

问题可能是您试图将常规数组用作*关联数组*（在这种情况下由字符串键索引）。尝试使用*数组位置*作为键。

```
$test[0], $test[1] etc... 
```

例子：

```
$rez = $this->Schimb->query("SELECT `pret`,`valuta` FROM schimb ORDER BY pret{$test[0]} DESC"); 
```

但是，您是否应该只`ORDER BY`使用 pret 列呢？

# java - Java 7：COM-API 不适用于 Quality Center (OTAClient.dll)，但适用于 Java 6

> ID：10547969
> 
> 赞同：8
> 
> 时间：2012-05-11T08:28:13.677
> 
> 标签：java, com, java-7, jacob, hp-quality-center

我们在 Windows 7 Enterprise、SP1、64 位上运行。我们刚刚在所有机器上安装了 Java 7，这会导致以下问题：

当我的程序尝试从 Quality Center 与 OpenTestArchitecture-API 通信时，它无法创建 ActiveX-Component。我使用[JACOB](http://sourceforge.net/projects/jacob-project/)作为我的 Java-COM 库。升级到最新版本的 JACOB 不会改变任何东西。

以下测试适用于 jdk1.6.0_24（32 位），但适用于 jdk1.7.0_04（32 位）：

```
import java.io.File;

import com.jacob.activeX.ActiveXComponent;
import com.jacob.com.ComThread;
import com.jacob.com.Dispatch;
import com.jacob.com.LibraryLoader;

public class JacobTest {
    static {
        File lib = new File("lib/" + LibraryLoader.getPreferredDLLName() + ".dll");
        System.setProperty(LibraryLoader.JACOB_DLL_PATH, lib.getAbsolutePath());

        System.out.println("JACOB_DLL_PATH = " + lib.getAbsolutePath());
        LibraryLoader.loadJacobLibrary();
    }

    public static void main(String[] args) {
        try {
            // Excel: Works with jdk1.6.0_24 AND jdk1.7.0_04
            System.out.println("new ActiveXComponent(\"Excel.Application\");");
            new ActiveXComponent("Excel.Application");

            // Quality Center OTAClient: Only works with jdk1.6.0_24
            System.out.println("ActiveXComponent component = new ActiveXComponent(\"TDApiOle80.TDConnection\");");
            ActiveXComponent component = new ActiveXComponent("TDApiOle80.TDConnection");

            System.out.println("ComThread.InitSTA();");
            ComThread.InitSTA();

            System.out.println("Dispatch.call(component, \"InitConnectionEx\", \"http://intranet/qcbin\");");
            Dispatch.call(component, "InitConnectionEx", "http://intranet/qcbin");
        }
        catch (Exception exception) {
            exception.printStackTrace();
        }
    }
} 
```

jdk1.6.0_24 输出：

```
JACOB_DLL_PATH = C:\Development\Java\Test\JacobTest\lib\jacob-1.17-M2-x86.dll

new ActiveXComponent("Excel.Application");
ActiveXComponent component = new ActiveXComponent("TDApiOle80.TDConnection");
ComThread.InitSTA();
Dispatch.call(component, "InitConnectionEx", "http://intranet/qcbin"); 
```

jdk1.7.0_04 输出：

```
JACOB_DLL_PATH = C:\Development\Java\Test\JacobTest\lib\jacob-1.17-M2-x86.dll

new ActiveXComponent("Excel.Application");
ActiveXComponent component = new ActiveXComponent("TDApiOle80.TDConnection");
com.jacob.com.ComFailException: Invalid access to memory location.
    at com.jacob.com.Dispatch.createInstanceNative(Native Method)
    at com.jacob.com.Dispatch.<init>(Dispatch.java:99)
    at com.jacob.activeX.ActiveXComponent.<init>(ActiveXComponent.java:58)
    at JacobTest.main(JacobTest.java:26) 
```

最初的 ComFailException-Message 是“无法共同创建对象”，但我在 jacob Dispatch.cpp 中编辑了以下代码：（我没有接触 CoCreateInstance，我只是想知道 HRESULT 是什么）

```
 // standard creation
  hr = CoCreateInstance(clsid,NULL,CLSCTX_LOCAL_SERVER|CLSCTX_INPROC_SERVER,IID_IUnknown, (void **)&punk);
  if (!SUCCEEDED(hr)) {
     if (hr == REGDB_E_CLASSNOTREG)
        ThrowComFail(env, "Can't co-create object: REGDB_E_CLASSNOTREG", hr);
     if (hr == CLASS_E_NOAGGREGATION)
        ThrowComFail(env, "Can't co-create object: CLASS_E_NOAGGREGATION", hr);
     if (hr == E_NOINTERFACE)
        ThrowComFail(env, "Can't co-create object: E_NOINTERFACE", hr);
     if (hr == E_POINTER)
        ThrowComFail(env, "Can't co-create object: E_POINTER", hr);

     _com_error error(hr);
     LPCTSTR errorText = error.ErrorMessage();

     ThrowComFail(env, errorText, hr);
     return;
  } 
```

有谁知道问题可能是什么？唯一的区别是我在 Java 6 和 Java 7 运行时之间切换。

非常感谢您的帮助！

PS：Excel 适用于这两个版本，切换到[com4j-Library](http://com4j.java.net/)不会改变任何内容。（我有一个com4j-Test，但我没有发布它，因为我已经发布了足够的代码）

**编辑：**同样的测试适用于 Windows XP、SP3 和 Java 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:18:27.657

Jacob DLL 与`jvm.dll`JRE 中的（方法和结构）链接。所以我的猜测是 Jacob DLL 应该从 Java 7 的源代码编译以正确加载到 Java 7 JRE 中。

您[并不孤单，](http://sourceforge.net/projects/jacob-project/forums/forum/375946/topic/4993599)但我想已经很少有人在运行 Java 7...

**更新：**我建议您首先使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)进行调查，如果您的 Java 进程中有一些库或系统调用失败，然后在调试器中运行进程本身......也许 OpenJDK 7 也可能是一个尝试的选项，它应该更容易然后进行调试，至少要诊断出问题所在。

# node.js - 如何将 node.js 安装为 Windows 服务？

> ID：10547974
> 
> 赞同：139
> 
> 时间：2012-05-11T08:28:36.293
> 
> 标签：node.js, windows-services

我已经下载了[node.js](http://nodejs.org/)可执行文件。如何将该可执行文件作为 Windows 服务运行？我不能使用标准的 node.js 安装程序，因为我需要同时运行多个版本的 node.js。

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-09-03T04:44:08.310

派对迟到了，但[节点窗口](http://github.com/coreybutler/node-windows)也可以解决问题。

![在此处输入图像描述](../Images/671028d758a33b8196fabdc92d5e5c6e.png)

它还内置了系统日志记录。

![在此处输入图像描述](../Images/b4344220df2312feea838c062c663be0.png)

有一个 API 可以从代码创建脚本，即

```
var Service = require('node-windows').Service;

// Create a new service object
var svc = new Service({
  name:'Hello World',
  description: 'The nodejs.org example web server.',
  script: 'C:\\path\\to\\helloworld.js'
});

// Listen for the "install" event, which indicates the
// process is available as a service.
svc.on('install',function(){
  svc.start();
});

svc.install(); 
```

FD：我是这个模块的作者。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2016-02-23T08:32:51.823

我发现这个东西非常有用，因此我围绕它构建了一个更易于使用的包装器（[npm](https://www.npmjs.com/package/qckwinsvc)、[github](https://github.com/tallesl/qckwinsvc)）。

安装它：

```
npm install -g qckwinsvc 
```

安装您的服务：

> qckwinsvc

```
prompt: Service name: [name for your service]
prompt: Service description: [description for it]
prompt: Node script path: [path of your node script]
Service installed 
```

卸载您的服务：

> qckwinsvc --卸载

```
prompt: Service name: [name of your service]
prompt: Node script path: [path of your node script]
Service stopped
Service uninstalled 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-07-13T12:40:00.463

[WinSer](http://jfromaniello.github.com/winser/)是流行的[NSSM（非吸吮服务管理器）的 node.js 友好包装器](http://nssm.cc/)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-10-29T20:48:28.447

我不是直接解决这个问题，而是提供一种替代方案，它也可能以更 node.js 的方式满足您的要求。

从功能上讲，要求是：

1.  让逻辑（应用程序）在后台运行
2.  能够启动/停止逻辑
3.  系统启动时自动启动逻辑

可以通过使用进程管理器 (PM) 并使进程管理器在系统启动时启动来满足这些要求。两个对 Windows 友好的好 PM 是：

*   [PM2](http://pm2.keymetrics.io/)
*   [永远](https://github.com/foreverjs/forever)

要让 PM 自动启动，最简单的方法是使用“At Startup”触发器创建计划任务：

[![在此处输入图像描述](../Images/3730f3ab538b7b20a3afe3072e5876b4.png)](https://i.stack.imgur.com/TtoR7.png)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-08-07T13:30:54.203

[从这个博客](https://tatham.blog/2011/03/16/node-js-on-windows/)

> 接下来，我想将节点作为服务托管，就像 IIS 一样。这样它就可以在我的机器上启动，在后台运行，如果它崩溃会自动重启等等。
> 
> 这就是[nssm](http://nssm.cc/)，非吸吮服务管理器，进入图片的地方。此工具可让您将普通 .exe 作为 Windows 服务托管。
> 
> 以下是我用来将节点应用程序实例设置为服务的命令，像管理员一样打开 cmd 并键入以下命令：
> 
> ```
> nssm.exe install service_name c:\your_nodejs_directory\node.exe c:\your_application_directory\server.js
> net start service_name 
> ```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-13T09:14:23.437

[https://nssm.cc/](https://nssm.cc/)服务助手非常适合通过我从 nssm 使用的批处理文件创建 Windows 服务，并且适用于任何应用程序和任何文件

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-24T01:03:56.510

我一年前发布的[流程管理器 + 任务调度器方法](https://stackoverflow.com/a/33424317/695964)适用于一些一次性服务安装。但最近我开始以微服务的方式设计系统，许多小服务通过 IPC 相互通信。所以手动配置每个服务变得难以忍受。

为了实现无需手动配置即可安装服务的目标，我创建了[serman](https://github.com/kflu/serman)，这是一个命令行工具（安装方式`npm i -g serman`），用于将可执行文件安装为服务。您只需编写一个简单的服务配置文件以及可执行文件即可（并且只需要编写一次）。跑

```
serman install <path_to_config_file> 
```

将安装该服务。`stdout`并`stderr`全部记录。有关更多信息，请查看[项目网站](https://github.com/kflu/serman)。

一个工作配置文件非常简单，如下所示。但它也有许多有用的功能`<env>`，`<persistent_env>`如下所示。

```
<service>
  <id>hello</id>
  <name>hello</name>
  <description>This service runs the hello application</description>

  <executable>node.exe</executable>

  <!-- 
       {{dir}} will be expanded to the containing directory of your 
       config file, which is normally where your executable locates 
   -->
  <arguments>"{{dir}}\hello.js"</arguments>

  <logmode>rotate</logmode>

  <!-- OPTIONAL FEATURE:
       NODE_ENV=production will be an environment variable 
       available to your application, but not visible outside 
       of your application
   -->
  <env name="NODE_ENV" value="production"/>

  <!-- OPTIONAL FEATURE:
       FOO_SERVICE_PORT=8989 will be persisted as an environment
       variable machine-wide.
   -->
  <persistent_env name="FOO_SERVICE_PORT" value="8989" />
</service> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-24T17:08:58.337

由于**qckwinsvc**有一段时间没有更新，所以有一个名为**qckwinsvc2** ( [npm](https://www.npmjs.com/package/qckwinsvc2) , [github](https://github.com/suyeonORG/qckwinsvc2) )的新版本

它现在支持传递给服务的参数。它还保留一个本地缓存，因此您不必在每次要执行操作时都提供路径

安装后使用**now** arg 启动服务

```
qckwinsvc2 install name="Hello" description="Hello World" path="C:\index.js" args="--y" now 
```

```
qckwinsvc2 uninstall name="Hello" 
```

```
qckwinsvc2 list 
```

# macos - NSTextView 中的 GlyphRange 和 CharacterRange 有什么区别？

> ID：10547975
> 
> 赞同：1
> 
> 时间：2012-05-11T08:28:39.407
> 
> 标签：macos, cocoa, nstextview

NSTextView 中的 GlyphRange 和 CharacterRange 有什么区别？

```
- (NSRectArray)rectArrayForCharacterRange:(NSRange)charRange withinSelectedCharacterRange:(NSRange)selCharRange inTextContainer:(NSTextContainer *)container rectCount:(NSUInteger *)rectCount;
- (NSRectArray)rectArrayForGlyphRange:(NSRange)glyphRange withinSelectedGlyphRange:(NSRange)selGlyphRange inTextContainer:(NSTextContainer *)container rectCount:(NSUInteger *)rectCount; 
```

我认为字形和字符总是具有相同的范围。在用法上我认为 glyphRange 和 charRange 是一样的，因为当我使用这两种方法时，我给 charRange 和 glyphRange 一个相同的范围值，输出 NSRectArray 是一样的。

我是不是误会了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:17:51.743

字形和字符之间并不总是一一对应的。连字是代表两个字符的字形示例。

由于这个原因，GlyphRange 和 CharacterRange 可能不相同。字符串“fi”包含两个字符，但布局管理器可能决定将其显示为单个字形（使用 fi 连字），因此字形范围的长度可能为 1。

请记住，字形是字符的图形表示。将像*a*这样的字符视为抽象实体，无论字体或字体样式如何，它都是相同的。作为一个角色，Times New Roman Italic *a*与 Comic Sans Bold *a*一样*多*。这种视觉外观上的区别仅在字形级别进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T08:49:47.033

`-rectArrayForCharacterRange`：

> 返回一个矩形数组，并通过引用返回此类矩形的数量，这些矩形定义了给定容器中包含给定**字符范围**的区域。

[关于 CharacterRange 的参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSLayoutManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSLayoutManager/rectArrayForCharacterRange%3awithinSelectedCharacterRange%3ainTextContainer%3arectCount%3a)。

`-rectArrayForGlyphRange`：

> 返回一个矩形数组，并通过引用返回此类矩形的数量，这些矩形定义了给定容器中包含给定**字形范围**的区域。

[关于 GlyphRange 的参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSLayoutManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSLayoutManager/rectArrayForGlyphRange%3awithinSelectedGlyphRange%3ainTextContainer%3arectCount%3a)。

# javascript - JS 函数 cancelFullScreen 按下 F11 后不起作用。有可能修复它吗？

> ID：10547979
> 
> 赞同：0
> 
> 时间：2012-05-11T08:29:07.537
> 
> 标签：javascript, firefox, google-chrome, fullscreen

这是退出全屏模式的源代码：

```
var cancelFullScreen = document.webkitCancelFullScreen || document.mozCancelFullScreen;
cancelFullScreen.call(document); 
```

当我使用函数 startFullScreen 进入全屏时它可以正常工作，但在按 F11 键后不工作 - 浏览器不会退出全屏模式。浏览器 Chrome 18 和 Firefox 12。为什么会这样？是错误，安全限制还是其他？有可能修复它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:35:47.530

`F11`并且`requestFullScreen`是浏览器中的不同事物。`requestFullScreen`需要用户的权限，而按`F11`则不需要。

此外，您可能会看到它们具有不同的界面。例如，在 Google Chrome 中以全屏模式（使用 JS）打开窗口不会告诉用户他可以`F11`在*本机*全屏时按下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T23:30:15.627

您的示例没有任何意义，因为您只能在元素上请求全屏，而不是在文档上。API 还要求您在请求全屏的元素上取消全屏。Gecko API 还会告诉您它认为处于全屏模式的元素，即您需要取消全屏模式的元素。如果按`F11`进入全屏，则该元素保持为空，因为您无法取消它。

# php - 如何显示上次登录时间（年、月、周、日、时间、秒）.. 我试过但输出错误

> ID：10547982
> 
> 赞同：0
> 
> 时间：2012-05-11T08:29:18.437
> 
> 标签：php

$lastLoginTime = date("Ymd H:i:s"); //最后一次登录，登录时将存储在数据库中

假设上次登录是：2012-05-11 07:57:46
当前时间是：$current_time = date("Ymd H:i:s")

```
 $diff_seconds  = strtotime($current_time) - strtotime($lastLoginTime);
    $diff_weeks    = floor($diff_seconds/604800);
    $diff_seconds -= $diff_weeks   * 604800;
    $diff_days     = floor($diff_seconds/86400);
    $diff_seconds -= $diff_days    * 86400;
    $diff_hours    = floor($diff_seconds/3600);
    $diff_seconds -= $diff_hours   * 3600;
    $diff_minutes  = floor($diff_seconds/60);
    $diff_seconds -= $diff_minutes * 60;

    echo "You last logged in $diff_weeks weeks, $diff_days days, ";
    echo "$diff_hours hours, $diff_minutes minutes, and $diff_seconds minutes ago."; 
```

错误的输出......！:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T08:33:14.033

谷歌（试一试）给了我这个：

```
<?php
function duration($seconds, $max_periods) {
    $periods = array("year" => 31536000, "month" => 2419200, "week" => 604800, "day" => 86400, "hour" => 3600, "minute" => 60, "second" => 1);
    $i = 1;
    foreach ( $periods as $period => $period_seconds )
    {
        $period_duration = floor($seconds / $period_seconds);
        $seconds = $seconds % $period_seconds;
        if ( $period_duration == 0 ) continue;
        $duration[] = "{$period_duration} {$period}" . ($period_duration > 1 ? 's' : '');
        $i++;
        if ( $i >  $max_periods ) break;
    }
    return implode(' ', $duration);
}
$diff_seconds  = strtotime($current_time) - strtotime($lastLoginTime);

print(duration($diff_seconds, 6));
?> 
```

[http://www.hawkee.com/snippet/2056/](http://www.hawkee.com/snippet/2056/)

# php - 抽象方法返回时PHP成员数据丢失

> ID：10547990
> 
> 赞同：1
> 
> 时间：2012-05-11T08:30:09.743
> 
> 标签：php, class, abstract

这是一个抽象类和派生类的示例。类 A 中有一个抽象方法“collectData”，它在类 B 中实现。当调用方法“getData”时，会调用“collectData”，在私有成员变量“$data”中设置值。之后，getData 返回此变量的内容。如果你运行它，你会期望返回值是 array(1, 2, 3)。但它是一个空数组。为什么？顺便说一句，我正在使用 PHP 5.3.10。

```
<?php

abstract class A
{
    private $data;

    public function __construct()
    {
        $this->data = array();  
    }

    abstract protected function collectData();

    public function getData()
    {
        $this->collectData();
        return $this->data;
    }
}

class B extends A
{
    protected function collectData()
    {
        $this->data = array(1, 2, 3);
    }
}

$test = new B();
$data = $test->getData();
print_r($data); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T08:34:48.777

它不应该是：

```
private $data; 
```

但：

```
protected $data; 
```

派生后私有属性不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T08:35:01.707

使`$data`属性`public`或`protected`您将看到...

如果该属性是私有的，`print_r`则看不到它...或调用`var_dump($data)`-这也应打印出私有成员...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T09:06:04.813

在抽象类中放置一个 setter 和一个 getter 来管理数据属性

```
public function setData($data){
   $this->data = $data;
}

public function getData($data){
   return $this->data;
} 
```