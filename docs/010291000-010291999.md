# StackOverflow 问答 10291000-10291999

# javascript - 通过 node-http-proxy 持久化基于 cookie 的会话

> ID：10291000
> 
> 赞同：11
> 
> 时间：2012-04-24T02:28:40.283
> 
> 标签：javascript, node.js, proxy, express, node-http-proxy

我有一个简单的基于 Express 的 Node.js Web 服务器，用于开发 JavaScript 应用程序。我将服务器设置为使用 node-http-proxy 来代理应用程序向在不同域和端口上运行的 Jetty 服务器发出的 API 请求。在我开始遇到会话管理问题之前，此设置一直运行良好。

验证后，应用程序服务器返回一个带有代表服务器会话的验证令牌的 cookie。当我从我的文件系统 (file://) 运行 JS 应用程序时，我可以看到一旦客户端收到 cookie，它就会在所有后续 API 请求中发送。当我在节点服务器上运行 JS 应用程序并通过 node-http-proxy (RoutingProxy) 代理 API 调用时，请求标头从不包含 cookie。

我需要手动处理一些事情以通过代理支持这种类型的会话持久性吗？我一直在研究 node-http-proxy 代码，但这有点过头了，因为我是 Node 新手。

[https://gist.github.com/2475547](https://gist.github.com/2475547)或：

```
var express = require('express'),
    routingProxy = require('http-proxy').RoutingProxy(),
    app = express.createServer();

var apiVersion = 1.0,
    apiHost = my.host.com,
    apiPort = 8080;

function apiProxy(pattern, host, port) {
    return function(req, res, next) {
        if (req.url.match(pattern)) {
            routingProxy.proxyRequest(req, res, {host: host, port: port});
        } else {
            next();
        }
    }
}

app.configure(function () {
    // API proxy middleware
    app.use(apiProxy(new RegExp('\/' + apiVersion + '\/.*'), apiHost, apiPort));

    // Static content middleware
    app.use(express.methodOverride());
    app.use(express.bodyParser());
    app.use(express.static(__dirname));
    app.use(express.errorHandler({
        dumpExceptions: true, 
        showStack: true
    }));
    app.use(app.router);
});

app.listen(3000); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-29T10:54:25.213

我通过手动查看响应来完成您的要求，查看它是否是 set-cookie，剪掉 JSESSSIONID，将其存储在变量中，并将其作为标头传递给所有后续请求。这种方式反向代理充当cookie。

```
on('proxyReq', function(proxyReq){ proxyReq.setHeader('cookie', 'sessionid=' + cookieSnippedValue) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-18T03:14:37.937

嗨@tomswift 您的本地服务器是否在http 协议上运行，但是从远程服务器接收的会话cookie 带有`Secure;`如下内容：

```
'set-cookie':
[ 'JSESSIONID=COOKIEWITHSECURE98123; Path=/;HttpOnly;Secure;'] 
```

如果是这样，在本地服务器响应客户端之前，`set-cookie`从原始响应（从远程服务器到本地服务器的响应）标头中提取，删除`Secure;`并将其余部分放入代理响应（从本地服务器到客户端的响应）标头中，例如：

```
'set-cookie':
[ 'JSESSIONID=COOKIEWITHSECURE98123; Path=/;HttpOnly;'] 
```

然后客户端将自动获取会话 cookie。

希望它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T02:56:26.107

理想情况下，代理的工作只是将请求转发到目的地，并且不应该剥离像 cookie 这样的关键标头，但如果是这样，我认为您应该在这里提出针对他们的问题[https://github.com/nodejitsu /node-http-proxy/issues](https://github.com/nodejitsu/node-http-proxy/issues)。

您还说请求标头从不包含cookie，客户端是否可能从未收到它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T22:02:31.683

我找到了一种通过分叉和修改 node-http-proxy 来实现这一点的方法。它服务于我目前的目的，即开发环境。对于任何形式的认真考虑，都需要将其充实为更合法的解决方案。

详细信息可以在我在 GitHub 提交的问题中找到：[https ://github.com/nodejitsu/node-http-proxy/issues/236#issuecomment-5334457](https://github.com/nodejitsu/node-http-proxy/issues/236#issuecomment-5334457)

我会喜欢这个解决方案的一些输入，特别是如果我完全走错了方向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-11T20:00:00.757

我有类似的问题，cookie 没有传递给客户端。解决方案：

1.  从代理响应中获取 cookie
2.  在代理请求中设置，稍微修改值

```
let cookie;
const webpackConfig = {
  proxy: {
    '/api': {
        ...
        onProxyReq: (proxyReq) => {
          if(cookie) {
            proxyReq.setHeader('Cookie', cookie);
          }
        },
        onProxyRes: (proxyRes) => {
          const sc = proxyRes.headers['set-cookie'];

          const raw = sc.filter(s => s.startsWith('JSESSIONID'));

          if(raw.length) {
            cookie = raw[0].split(';')[0];
          }
        }

    }
  }
} 
```

# hibernate - 是否有一些很好的方法可以确定 Hibernate 对象是否“活动”？

> ID：10291001
> 
> 赞同：1
> 
> 时间：2012-04-24T02:29:02.093
> 
> 标签：hibernate

给定一个 Hibernate 域对象，除了搜索它之外，有什么方法可以确定它是否存在（即存在于数据库中）？有什么方法可以使用`HIbernate.isObjectLive(domainObj)`或者`domainObj.amIAlive()`可能更有效吗？

我对 Hibernate 比较陌生。如果“否”是答案，我可以接受。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T02:51:03.230

Hibernate 只能通过检查数据库来知道一个对象是否根据该定义是“活动的”。你应该用[`Session.get(object.getClass(), object.getId())`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Session.html#get%28java.lang.Class,%20java.io.Serializable%29)看看是不是这样。如果对象不再存在于数据库中，它将返回 null。

请注意，它`Session`有一个缓存，因此如果对象已经在该缓存中，但同时已从数据库中删除，`Session.get(...)`则将返回一个引用。出于这个原因，您可能希望`Session`在进行检查之前获得一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:54:45.197

我认为最有效的方法是： `select o.id from Entity o where o.id=?`. 如果这返回空结果，那么那里没有对象。

另一种选择（可能这在并发环境中更可取）是使用乐观锁定，以便对象具有存储在数据库中的版本，并且在保存它时，它将执行以下操作：`update Entity set ... where id = ? and version = ?`. 如果对象已经过时（更新或删除），它将抛出异常。

但是 session.get() 也可以工作，如果对象应该在会话级缓存中，你只需要在调用之前调用 session.evict(object) 。

# wordpress - MAMP 包含错误 wp-blog-header.php

> ID：10291002
> 
> 赞同：0
> 
> 时间：2012-04-24T02:29:16.933
> 
> 标签：wordpress, mamp, require

我正在尝试在插件中使用全局 $wpdb 将数据插入我的一个表中。从文档中听起来我只需要包含 wp-blog-header.php 但是当我尝试这样做时，我遇到了一个错误。

PHP致命错误：require（）[function.require]：打开失败需要'http://localhost:8888/blog/wp-blog-header.php'（include_path='.:/Applications/MAMP/bin/php/第 4 行 /Applications/MAMP/htdocs/blog/wp-content/plugins/pluginname/submit/pick.php 中的 php5.3.6/lib/php')

我的 pluginname/submit/pick.php （由 AJAX 调用）具有以下代码

```
<?php
    $p = 'http://localhost:8888/blog/wp-blog-header.php';
    echo $p;
    require($p);
    echo 'hi';
?> 
```

如果我加载 pick.php，我会看到[http://localhost:8888/blog/wp-blog-header.php](http://localhost:8888/blog/wp-blog-header.php)就是这样。因此，正如错误日志所证实的那样，它必须在要求上失败。

路径是正确的，因为我在 wp-blog-header.php 中插入了一个快速回显，并将 pick.php 的输出复制粘贴到地址栏中并且它起作用了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T02:34:42.190

您不通过 url 包含 php 文件。您将包括的是脚本的执行输出。由于它是一个成熟的 url，因此您的内部 require() 与使用浏览器点击该 url 的人之间没有区别。您将得到的只是脚本的输出，可能是空白/无。

包括通过 url，即使它只是对您自己的服务器的本地请求，也会在安全漏洞方面打开一大堆蠕虫。

您不能简单地通过正常的本地文件请求包含它的任何原因，例如

```
require('blog/wp-blog-header.php'); 
```

?

# c# - 这么多标准

> ID：10291004
> 
> 赞同：0
> 
> 时间：2012-04-24T02:29:23.800
> 
> 标签：c#, asp.net-mvc-3, data-access-layer, business-logic-layer

我正在为互联网用户提供一些服务的互联网网站上工作。所以我们有一个管理系统，我的业务团队的合作者可以在其中获得他们想要的信息，例如最近 3 天内注册了多少新用户？或者发表了多少带有“笑话”标签的文章等。因此在管理系统中，有几个页面用于搜索一些带有条件的表格。这些页面非常相似：

* * *

用户ID：[--------------] 昵称关键字：[------------] 注册时间：[BEGIN]~[END] [搜索]

* * *

搜索结果在此处列出

* * *

该类`User`具有更多的属性，而不仅仅是 UserID/Nick/RegisterTime（以及用户表），但只有 3 个属性被视为条件。所以我有一个`UserSearchCriteria`像这样的课程：

```
public class UserSearchCriteria
{
    public long UserID { get; set; }
    public string NickKeyword { get; set; }
    public DateTime RegisteredTimeStart { get; set; }
    public DateTime RegisteredTimeEnd { get; set; }
} 
```

然后在数据访问层，search 方法接受一个带有其类型的参数`UserSearchCriteria`，并构建对应`Expression<Func<User, bool>>`的查询。而在DAL之外，其他开发者只能通过条件提供的3个条件搜索用户表，例如，他们无法搜索`City`属性为“纽约”的用户（这通常是因为该属性在DB，用它搜索很慢）。

**问题1：**这种封闭搜索的实现是否正确？有什么建议么？

**问题2：**现在我在项目中发现了更多的标准类，比如`ArticleSearchCriteria`，`FavouriteSearchCriteria`等等，我认为未来标准会越来越多。它们具有几乎相同的工作机制，但我需要重复代码。有更好的解决方案吗？

**PS**如果你需要这些信息：jQuery + ASP.NET MVC 3 + MongoDB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:43:53.250

对我来说很有意义。如果用户无法通过“任何内容”进行搜索，那么使用按模板搜索的方法就没有任何意义。此外，如果你试图让它更通用，它会变得非常混乱。例如，我不想编写如下代码：

```
class SearchCriteria{
   Dictionary<object,object> KeyValuePairs;
   EntityKind Entity;
} 
```

像这样使用：

```
SearchCriteria sc = new SearchCriteria();
sc.KeyValuePairs.Add("UserId",32);
sc.Entity = EntityKind.User; 
```

哇。没有编译时类型检查，没有检查实体和属性是否匹配等。

所以，我的回答是，是的 :)，我会使用您当前使用的设计模式。对我来说很有意义，而且任何人都可以直接看到你在做什么并跟上进度。

# .net - System.DirectoryServices.DirectorySearcher 导致“算术运算导致溢出”错误

> ID：10291009
> 
> 赞同：23
> 
> 时间：2012-04-24T02:30:09.583
> 
> 标签：.net, memory-leaks, active-directory, directoryservices

我收到以下与使用 `DirectorySearcher.FindOne()`或查询 AD 相关的间歇性错误`FindAll()`。

```
System.OverflowException: Arithmetic operation resulted in an overflow.
     at System.DirectoryServices.SearchResultCollection.ResultsEnumerator.GetCurrentResult()
     at System.DirectoryServices.SearchResultCollection.ResultsEnumerator.get_Current()
     at System.DirectoryServices.SearchResultCollection.ResultsEnumerator.System.Collections.IEnumerator.get_Current() 
```

这发生在网络应用程序中，并且似乎在应用程序运行几个小时后发生。

这是Microsoft Connect 上[记录的问题](http://connect.microsoft.com/VisualStudio/feedback/details/681135/system-directoryservices-arithmetic)，但看起来它已被标记为“不可重现”并已关闭。

[我在这里](http://forums.asp.net/t/1673012.aspx/1)找到的唯一解决方法是定期回收应用程序池，这是一种相当苛刻的解决方法，并且当您的用户正在工作时不可行。

有没有人经历过这种情况，如果有，这是如何解决的？

我曾尝试使用缓存，但这只会延迟不可避免的情况，直到您在 AD 调用数量方面达到某个阈值，因为人们报告说每次进行 API 调用时都会[泄漏内存](https://stackoverflow.com/questions/1883165/strange-issue-with-system-directoryservices-accountmanagement-userprincipal-find)。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-16T18:05:04.883

构建一个 AD API 并在它自己的应用程序池中运行它。每隔几个小时循环一次。所有 API 将处理对 AD 的调用。看起来你已经有了代码，只需要移动到 API。我发现 AD API 对于许多其他项目也非常有用，并且会继续将其作为参考点。

# yii - Yii 中外部操作的返回值

> ID：10291010
> 
> 赞同：1
> 
> 时间：2012-04-24T02:30:16.387
> 
> 标签：yii

如何将 Yii 中外部操作的值传递给它的父控制器？

例如：外部动作如下：

```
<?php
 class uploadAction extends CAction
{
/**
* Runs the action.
* This method is invoked by the controller owning this action.
*/
public function run()
{
    .....

        $fileName=$result['filename'];//GETTING FILE NAME

        $this->controller->image = $fileName; // this line does not work!!  

}
  } 
```

当我尝试在父控制器中获取图像的值时，没有任何返回！任何帮助我都会感激。

更新：我正在使用扩展来上传文件 .. [eajaxupload](http://www.yiiframework.com/extension/eajaxupload/)。

有很长的形式..有很多领域，其中之一是图像。我想在提交整个表单之前通过 Ajax 上传该图像。当然，在用户单击创建按钮后..控制器必须将所有字段加上图像名称存储在数据库中。风景 ..

```
<div class="elem">
            <?php echo $form->labelEx($model,'username'); ?>
            <?php echo $form->textField($model,'username',array('class'=>'inputbox grid-11-12','maxlength'=>45)); ?>
            <?php echo $form->error($model,'username'); ?>
        </div>

        <div class="elem">
            <?php echo $form->labelEx($model,'password1'); ?>
            <?php echo $form->passwordField($model,'password1',array('class'=>'inputbox grid-11-12')); ?>
            <?php echo $form->error($model,'password1'); ?>
        </div>

        <div class="elem">
            <?php echo $form->labelEx($model,'password2'); ?>
            <?php echo $form->passwordField($model,'password2',array('class'=>'inputbox grid-11-12')); ?>
            <?php echo $form->error($model,'password2'); ?>
        </div>

        <div class="elem">
            <?php echo $form->labelEx($model,'email'); ?>
            <?php echo $form->textField($model,'email',array('class'=>'inputbox grid-11-12','maxlength'=>45)); ?>
            <?php echo $form->error($model,'email'); ?>
        </div>

        <div class="elem">
            <label for="content">User Image:</label>
        <?php $this->widget('ext.EAjaxUpload.EAjaxUpload',
            array(
            'id'=>'uploadFile',
            'config'=>array(
                   'action'=>Yii::app()->request->baseUrl .'/backend.php/user/upload',
                   'allowedExtensions'=>array("jpg"),//array("jpg","jpeg","gif","exe","mov" and etc...
                   'sizeLimit'=>3*1024*1024,// maximum file size in bytes
                   'minSizeLimit'=>50*1024,// minimum file size in bytes
                   'multiple'=>false,
                   //'onComplete'=>Yii::app()->request->baseUrl .'/backend.php/user/saveStuff/?fn='. "js:function(id, fileName, responseJSON){ alert(fileName); }",
                   //'messages'=>array(
                   //                  'typeError'=>"{file} has invalid extension. Only {extensions} are allowed.",
                   //                  'sizeError'=>"{file} is too large, maximum file size is {sizeLimit}.",
                   //                  'minSizeError'=>"{file} is too small, minimum file size is {minSizeLimit}.",
                   //                  'emptyError'=>"{file} is empty, please select files again without it.",
                   //                  'onLeave'=>"The files are being uploaded, if you leave now the upload will be cancelled."
                   //                 ),
                   //'showMessage'=>"js:function(message){ alert(message); }"
          )
            )); ?>
        </div> 
```

这是控制器..

```
 <?php

    class UserController extends Controller
    {
/**
 * @var string the default layout for the views. Defaults to '//layouts/column2',     meaning
 * using two-column layout. See 'protected/views/layouts/column2.php'.
 */
public $layout='//layouts/column1';
public $image;

.......

public function actions()
{
    return array(
        'upload' => array(
        'class' => 'ext.actions.uploadAction',
        ),
        );
}

........

public function actionCreate()
{
    $model=new User;
    $profile=new UserProfile;
    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['User']))
    {
        $model->attributes=$_POST['User'];
        $profile->attributes=$_POST['UserProfile'];

        if(!$this->saveUser($model, $profile))
            Yii::app()->user->setFlash('error', 'Not Saved :)!');

    }

    $this->render('create',array(
        'model'=>$model,
        'profile'=>$profile,
    ));
}

public function saveUser($model, $profile)
{
    $userValid  = $model->validate();
    $profileValid  = $profile->validate();
    $valid = $userValid && $profileValid;
    if($valid)
    {
        $model->save(false);
        $profile->user_id = $model->id;
        $profile->image = !is_null($this->image)?  $this->image : null; // name of image file which uploaded 
        $profile->save(false);

        Yii::app()->user->setFlash('success', 'Saved :)!');
        $this->redirect(array('index'));
        return true;
    }
    return false;
} 
```

}

详细的外部操作是：

```
 <?php
 class uploadAction extends CAction
 {
/**
* Runs the action.
* This method is invoked by the controller owning this action.
*/
public function run()
{
    Yii::import("ext.EAjaxUpload.qqFileUploader");
        // make the directory to store the pic:
        $folder=Yii::getPathOfAlias('webroot') .'/images/' . $this->controller->id . '/';// folder for uploaded files
        if(!is_dir($folder))
        {
           mkdir($folder);
           chmod($folder, 0755); 
           // the default implementation makes it under 777 permission, which you could possibly change 
            //recursively before deployment, but here's less of a headache in case you don't
        }

        $allowedExtensions = array("jpg");//array("jpg","jpeg","gif","exe","mov" and etc...
        $sizeLimit = 10 * 1024 * 1024;// maximum file size in bytes
        $uploader = new qqFileUploader($allowedExtensions, $sizeLimit);
        $result = $uploader->handleUpload($folder);
        $return = htmlspecialchars(json_encode($result), ENT_NOQUOTES);

        $fileSize=filesize($folder.$result['filename']);//GETTING FILE SIZE
        $fileName=$result['filename'];//GETTING FILE NAME

        $this->controller->image = $fileName; // ??????

        echo $return;// it's array

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T15:52:44.790

我使用回调做了类似的事情。

所以在我的控制器操作（）配置中，我有一行：

```
'onSuccessCallback' => 'myCallback' 
```

在我的动作课中，在 run() 结束时，我有：

```
call_user_func( array($this->getController(),$this->onSuccessCallback), $fileName); 
```

在控制器中我有

```
function myCallback($fileName)
{
this->image = $fileName;
} 
```

然后我可以通过控制器从控制器访问该属性

> $这个->图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:14:26.210

做这个：

```
$this->controller->image = $fileName; // this line does not work!!  
$this->controller->renderText($this->controller->image); 
```

我敢打赌这将显示 $fileName。

您在哪里尝试访问控制器图像属性？

请求之间不保留值。

# oracle - 如何从 JDBC 创建或替换 Oracle 中的过程？

> ID：10291016
> 
> 赞同：0
> 
> 时间：2012-04-24T02:31:08.377
> 
> 标签：oracle, jdbc, procedure

如何在 JDBC 中创建或替换过程？我在 oracle 中创建了该过程，但无法从 Java 中替换该过程。

我有以下内容，但它不起作用：

```
Statement stmt0 = conn.createStatement();
String query0 =
"CREATE OR REPLACE PROCEDURE my_proc " +
//blah blah blah
//blah blah blah
//blah blah blah
"END; " +
". " +
"run; ";
stmt0.execute(query0); 
```

从在线教程中，我看到我应该使用类似的东西： cstmt = conn.prepareCall (SQL); 但我无法让它发挥作用。

如果您想查看更多我的代码，我会提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:58:14.450

首先，你可以做到这一点。

首先，您想从 jdbc 准备和执行。

其次，您需要用“.”和“run;”切断最后一行，它们看起来像是直接来自 SQL*Plus。

请注意，您没有在 Java 字符串中添加任何换行符，但这无关紧要。您似乎添加了必要的尾随空格。

我建议在执行之前记录或 system.out.println 字符串。

现在没有 DBMS，但应该是这样的

```
String sqlproc = 
    "CREATE OR REPLACE PROCEDURE FRED IS \n" +
    "BEGIN NULL; END FRED;";

System.out.println ("proc code: " + sqlproc);
Statement stmt = conn.prepareStatement (sqlproc);
stmt.execute(); 
```

# javascript - 如何获取刚刚单击的按钮用户的 ID？

> ID：10291017
> 
> 赞同：64
> 
> 时间：2012-04-24T02:31:24.357
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [获取使用 JQuery 触发事件的元素的 ID](https://stackoverflow.com/questions/48239/getting-the-id-of-the-element-that-fired-an-event-using-jquery)

我有很多带有 ID 属性的按钮。

```
<button id="some_id1"></button>
<button id="some_id2"></button>
<button id="some_id3"></button>
<button id="some_id4"></button>
<button id="some_id5"></button> 
```

假设用户点击了某个按钮，我想提醒用户刚刚点击的按钮的 ID。

如何通过 JavaScript 或 jQuery 做到这一点？

我想获取刚刚单击的按钮用户的 ID。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-04-24T02:34:32.787

```
$("button").click(function() {
    alert(this.id); // or alert($(this).attr('id'));
}); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-24T04:14:49.650

使用纯 JavaScript：

```
var buttons = document.getElementsByTagName("button");
var buttonsCount = buttons.length;
for (var i = 0; i <= buttonsCount; i += 1) {
    buttons[i].onclick = function(e) {
        alert(this.id);
    };
}​ 
```

[http://jsfiddle.net/TKKBV/2/](http://jsfiddle.net/TKKBV/2/)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-04-24T02:33:28.397

你也可以试试这个简单的单行代码。只需在**onclick**属性上调用**alert**方法。

 **```
<button id="some_id1" onclick="alert(this.id)"></button> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-24T02:33:02.397

```
$("button").click(function() {
    alert(this.id);
}); 
```**

# vb.net - VB 2008 移动绘图

> ID：10291021
> 
> 赞同：0
> 
> 时间：2012-04-24T02:31:51.170
> 
> 标签：vb.net, winforms

我开始学习 2D 图形，并制作了一个小型太空船旋转的程序，并找到了一些教程，然后当我尝试移动它时，我意识到 .location 不适用于位图......建议？我只是想移动图像...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:06:43.830

在你画你的船之前，移动坐标原点

```
g.TranslateTransform(dx,dy); 
```

您正在绘制`g`的对象在哪里。`Graphics`

# matlab - 超过最大功能计数

> ID：10291025
> 
> 赞同：0
> 
> 时间：2012-04-24T02:32:12.570
> 
> 标签：matlab

尝试使用以下代码评估作为 q,u 函数的三重积分。得到错误，

```
Warning: Maximum function count exceeded; singularity likely. 
In quad at 107
In test1>Inner at 12
In test1>@(x)Inner(x) at 5
In quad at 76
In test1 at 5 
```

有谁知道这段代码有什么问题？

```
function [r] = test1(q,u)
b = u;
r = zeros(1);
for i = 1 : length(q);
    r(i) = quad(@(x)Inner(x),-2,q);
end;

function [w] = Inner(k)
w = zeros(1);
for i = 1 : length(k);
    w(i) = quad(@(n)InnerIntegral(n).*unifpdf(k(i)-n,-1,1),0,k(i)-1,k(i)+1);
end;

function [y] = InnerIntegral(n)
y = zeros(1);
for i = 1 : length(n);
    y(i) = quad(@(m)unifpdf(n(i)-m, -b, b).*unifpdf(m,-b,b), n(i)-b,n(i)+b);
end;
end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T02:46:03.977

当你像这样定义多个函数时，每个函数的`end`语句必须在下一次调用之前`function`。目前，看起来这是一个巨大的函数，其中有一个名为的子函数`Inner`，而该子函数还有另一个名为 的子函数`InnerIntegral`。`test1`尝试调用 也是如此`Inner`，但' 的定义``Inner`直到稍后*在*`test1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-25T04:41:42.973

我遇到了同样的问题，然后我遇到了一个对我有用的解决方案。

尝试使用 quadgk(Function,lowerlimit,upperlimit) 而不是 quad(Function,lowerlimit,upperlimit)

hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T02:52:17.957

问题出在：

```
function [w] = Inner(k)
w = zeros(1);
for i = 1 : length(k);
    w(i) = quad(@(n)InnerIntegral(n).*unifpdf(k(i)-n,-1,1),0,k(i)-1,k(i)+1);
end 
```

它的设置方式： w(i) = quad(@(n)fcc(n),0,k(i)-1 , **k(i)+1** );

quad 的最后一个值设置为容差。我认为您想摆脱 0 术语：

```
w(i) = quad(@(n)InnerIntegral(n).*unifpdf(k(i)-n,-1,1),k(i)-1,k(i)+1); 
```

# javascript - Nivo Slider - 只有一张图像时停止动画

> ID：10291046
> 
> 赞同：2
> 
> 时间：2012-04-24T02:35:54.760
> 
> 标签：javascript, jquery, image, slider, nivo-slider

我正在为 Nivo Slider 使用 jQuery 插件，并且需要找到一种方法来阻止它在仅存在一个图像时进行转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T02:46:19.883

你可以设置选项：

```
manualAdvance: true 
```

那会有帮助吗？[这](http://nivo.dev7studios.com/support/jquery-plugin-usage/)是最新 NivoSlider 更新的文档。

如果这没有帮助，您可以发布用于启用滑块的代码吗？

这将是完整的代码：

```
$(window).load(function() {
    $('#slider').nivoSlider({
        slices: 1, // For slice animations
        startSlide: 0, // Set starting Slide (0 index)
        manualAdvance: true, // Force manual transitions
        captionOpacity: 0.8, // Universal caption opacity
        randomStart: false, // Start on a random slide
        beforeChange: function(){}, // Triggers before a slide transition
        afterChange: function(){}, // Triggers after a slide transition
        slideshowEnd: function(){}, // Triggers after all slides have been shown
        lastSlide: function(){}, // Triggers when last slide is shown
        afterLoad: function(){} // Triggers when slider has loaded
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:03:38.937

可能有更好的方法，但它对我有用：

```
if($('#slider img').length == 1) {
    $('#slider').nivoSlider({});
    $('.nivo-controlNav').css('display', 'none');
    $('.nivo-directionNav').css('display', 'none');
    $('#slider').data('nivo:vars').stop = true;
} else {
    $('#slider').nivoSlider({
        effect: 'slideInLeft'
    });
} 
```

PS。在初始化 Nivoslider 之前检查图像的数量很重要，因为它似乎重复了图像标签......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:21:30.577

没有一个答案对我很有效，因为我仍然希望显示一个带有标题的图像。我最终使用略有不同的选项来初始化 nivoSlider，具体取决于图像的数量（我的图像位于包含 id 为“hero-images”的 div 中）：

```
 var numImages = $('#hero-images img').length;

            if (numImages === 0) {
                //No images - hide the block
                $('#hero-images').hide();
            } else if (numImages === 1) {
                // 1 image - disable controls and set to manual advance to prevent animation
                $('#hero-images').nivoSlider({
                    directionNav: false,
                    manualAdvance: true,
                    controlNav: false
                });
            } else {
                // Multiple images, set up as normal
                $('#hero-images').nivoSlider({
                    effect: 'fade',
                    directionNav: false
                });
            } 
```

# asp.net - 将文本框值分配给同一页面上的模式框

> ID：10291047
> 
> 赞同：0
> 
> 时间：2012-04-24T02:35:58.083
> 
> 标签：asp.net, vb.net, button

如何在模式框上分配文本框值后获取代码隐藏文本框值？

这是模态框在页面上的显示方式：

```
<div id="dialog-form" title="Modal Box">
    <asp:TextBox ID="Textbox1" runat="server" ReadOnly="True">   
    <asp:Button ID="Save_Button" runat="server" Text="Save"></asp:Button>        
</div> 
```

为了在 上分配值`Textbox1`，我通过基于单击的 LinkBut​​ton 的代码隐藏将 Javascript 函数附加到 Gridview 上的 LinkBut​​ton（此处未显示代码）：

```
Dim myLinkButton As LinkButton    
For i As Integer = 0 To GV1.Rows.Count - 1
  myLinkButton = DirectCast(GV1.Rows(i).Cells(1).FindControl("LinkButton"), LinkButton)
  myLinkButton.Attributes.Add("onclick", "shopModalPopup('" + .Rows(i).Cells(0).Text & "'); return false;")
Next 
```

`Rows(i).Cells(0)`是 Gridview 上的第一列，它是“ `ID`”。这`ID`将分配给`Textbox1`单击链接按钮时。

Javascript 代码与 Gridview 代码在同一页面上：

```
<script>
var grid_modal_options = {
                    height: 450,
                    width: 550,
                    modal: true
                };

function shopModalPopup(id) {
                    var DataField = id;
                    grid_modal_options.open = function () {
                        $('#dialog-form #Textbox1').val(DataField);
                    };

                    $("#dialog-form").dialog(grid_modal_options);
                    $("#dialog-form").parent().appendTo('form:first');
                }
</script> 
```

当我单击模态框上的保存按钮时，`Textbox1`无法捕获代码隐藏上的值。它总是返回空值。怎么做？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:02:13.537

请阅读这个

[http://www.codeproject.com/Articles/37090/JQuery-UI-Dialog-with-ASP-NET-empty-post-values](http://www.codeproject.com/Articles/37090/JQuery-UI-Dialog-with-ASP-NET-empty-post-values)

我认为这可能对您有所帮助，问题可能是对话框的 div 移到了表单之外，您可以通过使用上面的参考或仅定义另一个隐藏输入并使用相同的值更新隐藏输入来解决它

```
 $('#dialog-form #Textbox1').val(DataField);
 $('hiddenfield').val(DataField); 
```

然后从隐藏字段中读取值

不确定它是否是最好的答案，但可以作为快速修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:04:44.260

没有它可以工作`Readonly="true"`吗？如果是这样，在您的`<asp:textbox>`，替换`Readonly="true"`为`Enabled="false"`。

我没有测试过这个，但我记得`Readonly`过去给我造成了这样的问题。

# c++ - c++ Build Error - 对基类构造函数的未定义引用

> ID：10291051
> 
> 赞同：3
> 
> 时间：2012-04-24T02:36:51.273
> 
> 标签：c++, oop

使用一个名为 Collection 的基类，我需要实现我的派生类 VariableArray。但是，我不断收到错误消息

**未定义对 `Collection::Collection()' 的引用**

我不确定我需要在这里做什么。我定义了一个构造函数（在我的基类中没有虚拟），以及一个复制构造函数和一个虚拟析构函数。在派生类定义文件中，我包含了以下代码，但仍然收到错误消息。

```
VariableArray::VariableArray():Collection()
  {         } 
```

请任何帮助将不胜感激。

# 基类

```
#include <iostream>
using namespace std;

class Collection
{
    public:
                Collection();
                Collection( const Collection & );
            virtual ~Collection()=0;
            virtual bool add(const int x) =0;
            virtual int& remove() = 0; 
            virtual Collection& operator=(const Collection& rhs)=0;
            virtual int& operator[](int index) =0;   
        virtual const int& operator[](int index)const =0; 
        Collection& copy(); 
                int size_();

    protected:

    private:
               int _size;  

}; 
```

# grails - 如何在 Grails 中实现基于权限的访问控制？

> ID：10291052
> 
> 赞同：2
> 
> 时间：2012-04-24T02:36:56.663
> 
> 标签：grails, groovy, permissions, role

我想实现[本文中讨论](http://springinpractice.com/2010/10/27/quick-tip-spring-security-role-based-authorization-and-permissions/)的基于权限的访问控制。

我不熟悉实施 - 有没有关于如何从头到尾实施的详细示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:26:38.243

你见过[Spring 安全插件](http://grails.org/plugin/spring-security-core)吗？ [主要文档在这里](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/)

就像在[这篇文章](https://stackoverflow.com/questions/8732286/which-security-framework-to-use-for-grails-application/8735464#8735464)中一样，您也可以考虑使用 Shiro 插件。我发现 Spring 安全插件更简单，但 Shiro 插件确实有一些优势，如帖子中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T08:05:15.583

我刚刚（大部分）解决了这个问题，所以我在这里发布以供参考。此解决方案适用于 Grails 2.2.4 和 Spring Security 2.0 RC

**1) 安全域模型** 您按照文章中的描述为您的安全域类建模，因此您最终将拥有这些域： - Permission - Role - RolePermission - User - UserRole

**2) 查询用户权限** 您确保您的 User 类返回 Permissions 而不是 Roles 作为 getAuthorities() 方法中的权限：

```
 /**
   * Gets authorities for the user.
   * 
   * It will return all of the Permissions of the User assigned by the Roles
   * which the User has
   */
  Set<Permission> getAuthorities() {

    Set allPermissions = []
    // Collect all Roles of the User
    UserRole.findAllByUser(this).each { userRole ->
      // Collect all Permissions from the Role  
      Role role = userRole.role
      // Returning the collected permissions
      RolePermission.findAllByRole(role).each { rp ->
        allPermissions.add(rp.permission)
      }
    }
    return allPermissions
  } 
```

**3) Spring 安全配置**

我在我的 Config.groovy 中有这个用于 Spring Security 配置（省略了不相关的部分）：

```
grails {
  plugin {
    springsecurity {
      ...      
      userLookup {
        userDomainClassName = 'limes.security.User'
      }
      authority {
        nameField = 'name'
        className = 'limes.security.Permission'
      }
      ...
    }
  }
} 
```

一个重要的亮点是 authority.nameField 必须符合您的 Permission 类。name 属性在我的模型（和文章）中称为“name”。

自然，您将 Permission 类设置为 authority.className 以使其符合 User.getAuthorities() 的返回值。

**4) 在安全表达式中使用**

上述解决方案并未解决 Grails Spring Security 插件只能使用以“ROLE_”开头的权限名称的限制。

因此，如果您想调用“PERM_PERMISSION1”之类的权限，那么您必须编写 EL 表达式以在任何地方进行检查（尤其是在控制器 @Secured 注释和静态 url 规则上）。

所以而不是

```
@Secured(["PERM_PERMISSION1"]) 
```

你写

```
@Secured(["hasRole('PERM_PERMISSION1')"]) 
```

# java - AspectJ 构造函数强制工厂模式

> ID：10291053
> 
> 赞同：2
> 
> 时间：2012-04-24T02:36:58.300
> 
> 标签：java, aspectj, factory-pattern

我想将对象返回从调用更改为构造函数

**从**

```
public class A  {

   public A(){
   }

   public String sayHello() {
    return "hello";
   }

   public String foo() {
      return "foo";
   }

} 
```

**至**

```
public class AWrapped extends A {

     private A wrapped;

     public AWrapped() {
       super();
     }

     public AWrapped(A pWrapped) {
        wrapped=pWrapped;
     }

     public String foo() {
       return wrapped.foo();
     }

     public String sayHello {
        return "gday mate";
     }

} 
```

我想要做的是更改从调用返回的对象

```
A a = new A();
a.sayHello() returns "gday mate" 
```

a 是 AWrapped 的实例

我知道这通常可以通过工厂模式完成，但我无法访问 A 的代码或生成新 A 的代码。并且有 1000 多个地方可以创建 A。

似乎 Aspectj 可能会做到这一点，但我对此了解不多，如果 AspectJ 能做到这一点，我将如何绕过无限包装，我需要知道它是从内部和方面构建的，因此它不会再次包装它。

感谢乔恩的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T14:22:06.643

如果我理解正确，您可以执行以下操作：

我创建了三个包：

![封装结构](../Images/33d173bfd768ea8afd1c60ca1a568602.png)

*   aspectj 用于方面和 AWrapped.java
*   A.java 未知（也可以是 Bytecode 但你必须使用[Load Time Weaving](http://www.eclipse.org/aspectj/doc/released/devguide/ltw.html)）
*   主要测试`A a = new A();`

如果对 A 类进行调用，MyAspect 返回 AWrapped 对象`new()`：

```
package aspectj;

import unknown.A;

@Aspect
public class MyAspect {

    @Pointcut("call(unknown.A.new(..)) && !within(aspectj..*)")
    public static void init(ProceedingJoinPoint pjp) {
    }

    @Around("init(pjp)")
    public Object initAdvice(ProceedingJoinPoint pjp) throws Throwable{
        Object ret = pjp.proceed();
        return new AWrapped((A) ret);
        }

} 
```

用于检测：

```
package main;

import unknown.A;

public class Main {

    public static void main(String[] args) {
        A a = new A();
        System.out.println(a.sayHello());
    }
} 
```

这输出：

```
gday mate 
```

# jquery - jQuery获取元素的更新位置

> ID：10291055
> 
> 赞同：0
> 
> 时间：2012-04-24T02:37:00.483
> 
> 标签：jquery

我正在尝试跟踪动画元素的位置，有两个按钮；一个向上移动元素，另一个向下移动，每个都应该在移动后打印新位置..这是代码：

```
<html>
<head>
    <style>
        div {
          position:absolute;
          background-color:#abc;
          left:50px;
          top :50px;
          width:90px;
          height:90px;
          margin:5px;
        }
    </style>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){

$("#up").click(function(){
  $(".block").animate({"top": "-=50px"}, "slow");
  top  = $(".block").position().top;
left = $(".block").position().left; 
  $("#position").html("X: "+left+" , Y:"+top) ;
});

$("#down").click(function(){
  $(".block").animate({"top": "+=50px"}, "slow");
  top  = $(".block").position().top;
  left = $(".block").position().left; 
  $("#position").html("X: "+left+" , Y:"+top) ;
});
});

</script>

</head>
    <body>
        <button id="down">v</button> <button id="up">^</button>
        <div class="block"></div><br/>
        <p id="position"></p>
    </body>
</html> 
```

它不像我想要的那样工作，每一步我都会得到相同的结果：`X: 50 , Y:[object Window]`
如何解决这个问题？是我使用的函数`position().left`以及`position().top`获取元素的 X 和 Y 的权利吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T02:52:53.270

我创建了一个 jsfiddle 来显示工作结果：http: [//jsfiddle.net/6JZCW/2/](http://jsfiddle.net/6JZCW/2/)

我注意到两件事：1，你在打电话

> 位置（）

代替

> 抵消（）

不同之处在于， position() 是相对于父元素的，而 offset 是相对于文档的。

2，您遇到了一些变量名称问题，其中 top 和 left 已经定义（我认为是 jquery 的一部分，但我不确定）。因此，将顶部和左侧分别重命名为“y”和“x”，我相信它会按照您的意图工作。

**这是另一个包含左右的更新：http:** [//jsfiddle.net/6JZCW/3/](http://jsfiddle.net/6JZCW/3/)

# jquery - 如何修改 SlickGrid 以支持带有 colspan&rowspan 的多级（列组）标题

> ID：10291059
> 
> 赞同：3
> 
> 时间：2012-04-24T02:38:24.167
> 
> 标签：jquery, jqgrid, slickgrid

像jquery easyui的datagrid： [在DataGrid中创建列组](http://www.jeasyui.com/tutorial/datagrid/datagrid9_demo.html)

和 jqgrid： [jqGrid 演示](http://trirand.com/blog/jqgrid/jqgrid.html)（在底部类别：Frozen Cols.Group Header）

# javascript - 使用 JQuery 的 textarea 文本框的水印

> ID：10291063
> 
> 赞同：3
> 
> 时间：2012-04-24T02:39:26.297
> 
> 标签：javascript, jquery, asp.net

我正在尝试将水印用于带有 jquery 的 asp.net 文本框控件，下面是我拥有的代码，我在我的 textarea 文本框上看到了标题，但是当我关注或单击文本框时，水印不清除。

我从这里得到了脚本。[http://www.ajaxblender.com/howto-add-hints-form-auto-focus-using-javascript.html](http://www.ajaxblender.com/howto-add-hints-form-auto-focus-using-javascript.html)

```
<asp:TextBox runat="server" ID="txtNew" class="auto-hint" title="Enter here ..." 
TextMode="MultiLine" Rows="7" Width="100%"></asp:TextBox>

<script type="text/javascript">
    $(document).ready(function () {
        // Focus auto-focus fields 
       $('.auto-focus:first').focus();

        // Initialize auto-hint fields 
        $('INPUT.auto-hint, TEXTAREA.auto-hint').focus(function () {
            if ($(this).val() == $(this).attr('title')) {
                $(this).val('');
                $(this).removeClass('auto-hint');
            }
        });

        $('INPUT.auto-hint, TEXTAREA.auto-hint').blur(function () {
            if ($(this).val() == '' && $(this).attr('title') != '') {
                $(this).val($(this).attr('title'));
                $(this).addClass('auto-hint');
            }
        });

        $('INPUT.auto-hint, TEXTAREA.auto-hint').each(function () {
            if ($(this).attr('title') == '') { return; }
            if ($(this).val() == '') { $(this).val($(this).attr('title')); }
            else { $(this).removeClass('auto-hint'); }
        });

    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T02:51:09.100

如果您只是使用水印的想法，那么有很多替代方法和更简单的方法来实现它

1）您可以尝试使用[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx)

2) 在 HTML5 中有一个用于输入文本的新属性，称为占位符，它将完全按照您的意愿执行。

3）您可以使用更高级的 jquery 插件，这样设置起来更容易，而且不需要太多努力 [http://code.google.com/p/jquery-watermark/](http://code.google.com/p/jquery-watermark/)

这里还有更多

[http://wiki.jqueryui.com/w/page/12138131/Watermark](http://wiki.jqueryui.com/w/page/12138131/Watermark)

我希望它以某种方式有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T02:51:46.640

代码本身工作得很好（见这个[演示](http://jsfiddle.net/PAcKA/)）

问题似乎出在您的选择器中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T17:35:24.270

您也可以使用需要较少的 WaterMark 控件，或者您可以说没有配置，只需将其放在代码下方即可...

```
<asp:TextBox runat="server" ID="txtNew" class="auto-hint" title="在这里输入..."
TextMode="MultiLine" Rows="7" Width="100%" data-watermark="在此处输入...">

```

如您所见，我有地方**data-watermark="Enter here..."**。

是的，请在 jquery.js 中包含 WaterMark Control JS，因为 Watermark Control JS 使用 jquery。是的，您可以使用 WaterMark Control 为您的水印制作动画。

[您可以从myjqueryplugin.com/watermark-control](http://myjqueryplugin.com/watermark-control)找到 Watermark Control JS 。

# java - 在我使用 java 的 GUI 中，我希望能够打开一个 pdf/doc 文件

> ID：10291067
> 
> 赞同：0
> 
> 时间：2012-04-24T02:40:13.033
> 
> 标签：java, file, user-interface

因此，在我的菜单栏下，我有一个关于菜单项，当我单击该项目时，我希望向用户打开一个 pdf/doc 文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T02:43:56.877

这不行吗？

```
Desktop.getDesktop().open(file); 
```

详情请参阅[`Desktop.open(File)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:33:48.973

我使用代码（在我自己的程序中）

```
File help = new File(FILEPATH);
if(help.exists() == false)
    throw new Exception();
Runtime.getRuntime().exec("rundll32 url.dll,FileProtocolHandler " + FILEPATH); 
```

你必须把你想要的 FILEPATH 放在哪里。这可能是特定于 Windows 的，不确定。：/

# php - PHP错误上传文件

> ID：10291068
> 
> 赞同：0
> 
> 时间：2012-04-24T02:40:13.097
> 
> 标签：php, file, upload

好的，所以我为网站设置了一个上传引擎，以便经过身份验证的用户可以上传库中歌曲的音频文件（密钥），但是当我尝试上传任何超过 5MB 的文件时遇到了这个奇怪的问题。

**顺便说一下，我将 php.ini 最大文件大小设置为 50MB**

一切都正确上传，但没有与另一端的文件关联的数据。

HTML 代码：

```
<form action="keyUpload.php?id=<?php echo $id;?>" method="post" enctype="multipart/form-data">
<p style="color:#fff;font-size:30px;font-family:Times">
Add a new Key:<br/><input name="uploaded" type="file" id="file"><br />
<input type="text" name="kname" id="kname" value placeholder="Key Name (Ex. Demo, A#, etc.)" style="width:300px;"><br/>
<button class="button">Upload File</button><br/>
<span style="font-size:12px;">*Max Filesize is 50 MB*</span>
</p>
</form> 
```

PHP代码：

```
<?php 
$id=$_GET["id"];
$name=$_POST["kname"];

$name = str_replace(" ","%20",$name);

$allowed_filetypes = array('.mp3','.m4a','.wav','.wma');

$filename = $_FILES['uploaded']['name'];
$ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); 
```

当我上传大于 5 MB 的文件时，$filename 和 $ext 都是空变量。在所有其他情况下，该引擎都可以完美运行。

回显时，根本没有任何反应，因此如果文件不存在，引擎显然不会保存文件。这是怎么回事？

var_dump：

```
array(0) { } 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T02:42:15.240

检查上传错误：

```
if ($_FILES['uploaded']['error'] !== UPLOAD_ERR_OK) {
   die("Upload failed with error code " . $_FILES['uploaded']['error']);
} 
```

错误代码在这里定义：[http ://www.php.net/manual/en/features.file-upload.errors.php](http://www.php.net/manual/en/features.file-upload.errors.php)

同样，不要使用文件名来验证上传。恶意用户伪造文件名并上传恶意文件并非易事，例如。

```
ren nastyvirus.exe good_tune.mp3 
```

并且不要对文件名使用字符串操作。有一整套用于文件名操作的 PHP 函数，例如[http://php.net/basename](http://php.net/basename)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:13:14.203

也设置`max_post_size`在 php.ini 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-18T05:28:32.787

```
body, html, iframe { 
  width: 100% ;
  height: 100% ;
  overflow: hidden ;
}

span {
  font-size:12px
}
```

```
 <form action="keyUpload.php" method="POST" enctype="multipart/form-data">
      Add a new Key:
      <input type="file" name="file" />
      <input type="submit" name="submit" value="Upload File" />
    </form>
    <span>*Max Filesize is 50 MB*</span>    
    <hr />
    <p>keyUpload.php</p>
    <iframe src="https://ideone.com/gKDwew"></iframe>
```

# c++ - OpenGL - 在表面上映射点

> ID：10291072
> 
> 赞同：0
> 
> 时间：2012-04-24T02:40:57.667
> 
> 标签：c++, opengl, 3d

我正在寻找 OpenGL 中的一种技术，我可以使用它来在表面上映射颜色点。每个点都定义了一种显示颜色和三个坐标（X、Y、Z）。映射这些数据的表面是根据主要用途（复杂形状）中的所有点的坐标构建的，但通常可以从标准形状（例如圆锥或球体）构建。由于点之间存在空隙（例如，沿 X 轴的两点之间存在一毫米步长），因此还需要在曲面上插入点数据。我正在考虑从点构建位图，然后在我的表面上应用这些位图，但我想知道 OpenGL 是否确实具有允许以“智能方式”执行此操作的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:08:11.127

在我看来，您要求的是基本的 OpenGL 行为。

如果你画一个三角形：

```
glBegin(GL_TRIANGLES);     
    glColor3f(1.0f,0.0f,0.0f);     // Red
    glVertex3f( 0.0f, 1.0f, 0.0f); // Top vertex
    glColor3f(0.0f,1.0f,0.0f);     // Green
    glVertex3f(-1.0f,-1.0f, 0.0f); // Bottom left vertex
    glColor3f(0.0f,0.0f,1.0f);     // Blue
    glVertex3f( 1.0f,-1.0f, 0.0f); // Bottom right vertex
glEnd(); 
```

结果是一个平滑（如果花哨）彩色实心三角形。

所以你的问题是构建一系列覆盖你的表面并将点设置为顶点的多边形（可能只是三角形）。

有关 OpenGL 的精彩介绍，请参阅[NeHe 的教程](http://nehe.gamedev.net)，包括上面的示例。

# php - 在 if 语句中测试数组为空

> ID：10291074
> 
> 赞同：0
> 
> 时间：2012-04-24T02:41:20.120
> 
> 标签：php, arrays, if-statement

我用这种方式测试数组 $arr 如果为空

```
if(!empty($arr)){ //do something } 
```

最近，我看到有人使用另一个类似：

```
if($arr){ //do something } 
```

只是想知道第二种方法不是测试数组的简单方法还是这里有一些潜在的风险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T02:45:36.670

第二个将数组转换为布尔值。空数组被强制转换为`false`，其他任何东西都被转换为`true`。所以`if($arr)`和`if(!empty($arr))`在功能上是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T02:47:31.400

一个空数组 like`array()`被认为等于`false`。所以一个简单的`if ($arr)`作品非常好。

`empty`如果变量根本不存在，则进行相同类型的比较，但不会触发`NOTICE`关于缺失变量的信息。如果您确定变量存在，则`$arr`不应使用，因为它会抑制有价值的错误报告。`empty`仅`empty`当您真的不知道变量是否存在并且无法控制时才使用。

有关更多信息，`empty`请参阅[PHP 的 isset 和 empty 权威指南](http://kunststube.net/isset/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T02:46:09.903

这两种方法在功能上是等效的。提及以下内容的文档[`empty()`](http://php.net/manual/en/function.empty.php)被认为是空的

```
"", 0, 0.0, "0", NULL, FALSE, array(), var $var; 
```

看一下[转换为 bool](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)，我们可以看到列表与列表匹配，这意味着两种方法以相同的方式处理不同的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T02:45:45.097

第二种方式并不理想。如果您使用第二种方法并确定您正在处理一个数组（而您不是）并将其传递给 foreach 语句，您最终会遇到错误。对于您要检查的内容，它也比使用 if($arr) 进行测试更有指导意义。

我的偏好是：

```
if (is_array($arr) && count($arr) > 0) {
    //work with array
} 
```

编辑：我认为我的基本观点是测试数组存在的能力只是问题的一部分。如果 $arr 原来是一个字符串，则需要进行更稳健的检查。

# javascript - 是否可以在调试模式下运行 chrome？

> ID：10291076
> 
> 赞同：7
> 
> 时间：2012-04-24T02:41:26.627
> 
> 标签：javascript, google-chrome, logging, webkit, google-chrome-devtools

首先，我真的不确定这是超级用户还是 Stack-Overflow 的问题。它可能对其他开发人员肯定有用，但它不是一个特定的代码问题。

在 Google Chrome 中有没有办法查看渲染引擎异常或一般调试信息？我有一些代码，我 99% 肯定会导致 chrome 的渲染/重绘引擎崩溃，但是（我在 Mac 上）在 Console.app 中我没有收到异常通知。我想知道是否有一种方法可以强制 chrome 在它的日志记录中更加冗长？也许这是一个 webkit 的东西，而不是特定于 chrome 的。

让我知道这是否真的不是堆栈溢出，我将删除/关闭问题，就像我说的那样，我知道这不是特定于代码的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-29T03:17:52.090

是的！

您可以在 mac 上从命令行启动 chrome。[在此处](https://superuser.com/questions/157484/start-google-chrome-on-mac-with-command-line-switches)查看上一个问题

像这样的东西：

`/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome`

您还可以通过附加一个标志来使 chrome 输出到日志文件：

`--enable-logging --v=1`

这应该写入一个日志文件，该文件位于您的目录`chrome_debug.log`中的某个位置。`~/.config/`

然后你可以跟踪该日志。我的命令是：

`$ tail -F ~/.config/chromium/chrome_debug.log`

您的日志文件路径可能不同。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:06:01.967

我不完全确定我是否理解正确，但也许您想查看 chromium.org HOW-TO for mac 而不是 windows。您有两种可能性来调试渲染器进程

a) 在单个进程中运行 Chrome 或 b) 启动后将 XCode 的调试器附加到渲染器进程

它们在[此处](http://www.chromium.org/developers/how-tos/debugging-on-os-x)进行了详细描述。希望有帮助

编辑：更新了链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-04T07:56:27.753

与[Rimian 的回答](https://stackoverflow.com/a/45930178/2271388)类似，在 Windows 中，您也可以从命令行启动 Chrome，从而启用日志记录。只需打开 CMD 并输入：

```
cd C:\Program Files (x86)\Google\Chrome\Application
chrome --enable-logging --v=1 
```

日志文件`chrome_debug.log`位于`C:\Users\<USERNAME>\AppData\Local\Google\Chrome\User Data`. 请注意，您必须替换您的用户名。

# python - 递归一个值，但沿途存储列表

> ID：10291078
> 
> 赞同：1
> 
> 时间：2012-04-24T02:41:48.907
> 
> 标签：python, list, recursion

我的问题是我有一个功能如下：

```
def myfunc(a):
    b=[]
    b.append(a)
    return myfunc(a-1), b* 
```

*= 我知道这会破坏我的功能
是否有任何可能的方法允许在让我的功能继续运行的同时`b`使用我使用的值进行更新？`a`与问题相关的代码是一个最大值。问题。所以我有一个权重和值列表，以及一个最大值。允许重量。我的函数发现最大值没问题，但我想看看我用什么值来到达那里。即 w=[1,2,3] v=[4,7,2] max weight= 3, max val is = 11。我希望我的函数在版本中显示的是列表，例如使用的权重=[1 ,2] 和使用的值=[4,7]。抱歉，没有发布实际代码，该网站不允许这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:09:45.713

我建议使用默认参数。

```
def myfunc(a, lst=None):
    if lst is None:
        lst = []
    lst.append(a)
    if a > 0:
        myfunc(a-1, lst)
    return lst

print(myfunc(5))  # prints: [5, 4, 3, 2, 1, 0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T02:47:14.107

你的意思是，像这样的东西？

```
def myfunc(a):
    if a == 0:
        return [a]
    return myfunc(a-1) + [a]

myfunc(5)

> [0, 1, 2, 3, 4, 5] 
```

# facebook - 如何在流中获取我的 Facebook 好友的图片？

> ID：10291080
> 
> 赞同：-1
> 
> 时间：2012-04-24T02:42:01.383
> 
> 标签：facebook, facebook-graph-api, image

如何在我的 facebook 应用程序上访问我的 facebook 好友最近的用户照片？我希望我的用户看到他们的朋友在 Facebook 上发布的图片的最新提要（无论该用户是否在图片中被标记。

我在一个 android 应用程序中看到了这一点，我想为一个网站应用程序编写它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:09:19.737

不知道为什么在此处标记 Android 但使用 Facebook API

# java - 在 NetBeans 7.1 中的 clean-build 上将 java jar lib 分发到多个目标

> ID：10291082
> 
> 赞同：1
> 
> 时间：2012-04-24T02:42:20.197
> 
> 标签：java, netbeans, jar

我有一个简单的 POJO 库（使用 NetBeans 7.1 构建）和几个依赖它的项目（一个 Grails，一个 Griffon，也许是 Android）。

在 NB 中运行“清理和构建项目”时，将生成的 .jar 推送到这些项目的最简单方法是什么？

或者我应该考虑在构建依赖于它的项目时“拉动”jar lib？我将 IntelliJ 用于“消费者”项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:12:32.063

您可以使您的 POJO 库和其他项目 maven 项目并将其添加为依赖项，因此它将自动作为 jar 包含在内。

# jquery - 按行过滤表格的选择菜单

> ID：10291086
> 
> 赞同：0
> 
> 时间：2012-04-24T02:42:26.530
> 
> 标签：jquery, jquery-ui-selectmenu

谁能看看我的小提琴，让我知道我哪里出错了？我只想检查表中的第二列，如果它包含所选菜单中的任何单词，它应该显示该行。

[http://jsfiddle.net/fuelishways/sEUSn/](http://jsfiddle.net/fuelishways/sEUSn/)

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:15:31.307

您需要将 if 语句更改为：

```
if (check && check.indexOf(letter) > 0) {
    $(this).parent().show();
} 
```

仅当所选值不喜欢（== 而不是 >）时，您的条件才成立。此外，要在 each() 循环中获取父对象，您始终需要引用当前对象。

在您的网站中，您需要将代码包装在`$( document ).ready()`事件中。尝试这个：

```
jQuery( document ).ready( function() {
    jQuery('select.filterMe').change( function(e) { 
       var letter = jQuery(this).val();
         if (letter === 'ALL') {
             jQuery('tr').show ();
         }
         else {
             jQuery('tr').each( function(rowIdx,tr) {
                 jQuery(this).hide().find('td').each( function(idx, td) {
                     if( idx === 0 || idx === 1) {
                         var check = jQuery(this).text();
                         if (check && check.indexOf(letter) > 0) {
                            jQuery(this).parent().show();
                        } 
                     }
                 });             

             });
         }             
     });​
 });​ 
````

# jquery - 单击单选按钮时，变量更改为另一个变量

> ID：10291091
> 
> 赞同：0
> 
> 时间：2012-04-24T02:43:25.457
> 
> 标签：jquery, variables, button, onclick, radio

我有一个简单的 2 选项单选按钮。我认为我的代码可以工作并尝试了许多其他版本，但我只是缺少一些东西。当单选按钮更改时，我需要更改 var typeOfCards。该变量用于后面的等式。

选中的输入值 155 应将 typeOfCards 更改为等于 boxCards 并且选中的输入值 145 应将 typeOfCards 更改为等于 singleCards

```
<input name="SELECT___CD-0035___33" value="155" onclick="change_option('SELECT___CD-0035___33',this.value)" type="radio">Box Cards (Sold in Multiples of 3) <br>
<input checked="checked" name="SELECT___CD-0035___33" value="154" onclick="change_option('SELECT___CD-0035___33',this.value)" type="radio"> Single Cards (Sold in sets of 12 Cards/12 Envelopes)<br>

var singleCards = 12
var boxCards = 3
var typeOfCards = singleCards
$("input[value='155']").click(function() {
    typeOfCards = boxCards;
});
$("input[value='154']").click(function() {
    typeOfCards = singleCards;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T02:50:44.687

处理程序可能没有附加，因为它们不在 document.ready 中，并且脚本在创建元素之前正在运行。

尝试：

```
$(document).ready(function(){
var singleCards = 12
var boxCards = 3
var typeOfCards = singleCards
$("input[value='155']").click(function() {
    typeOfCards = boxCards;
});
$("input[value='154']").click(function() {
    typeOfCards = singleCards;
});
}); 
```

顺便说一句，如果您有 jQuery 单击处理程序，您可能也不需要 onclick。

检查它，它在这个小提琴中工作：http: [//jsfiddle.net/ccross59/4K2R7/1/](http://jsfiddle.net/ccross59/4K2R7/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:23:12.393

不确定为什么您为单选按钮指定了“onclick”。

试试这个：

```
 <script>
    $(document).ready(function () {
        var singleCards = 12
        var boxCards = 3
        var typeOfCards = singleCards
        $(".radioSelect").click(function () {
            if ($(this).val() == "155")
                typeOfCards = boxCards;
            else
                typeOfCards = singleCards;
            alert(typeOfCards);
        });
    });
   </script>

<input name="SELECT___CD-0035___33" value="155" class="radioSelect" type="radio" />Box Cards (Sold in Multiples of 3) <br/>
<input checked="checked" name="SELECT___CD-0035___33" value="154" class="radioSelect" type="radio" /> Single Cards (Sold in sets of 12 Cards/12 Envelopes)<br/> 
```

# php - 使用 php 将 json 日期格式转换为类似 mm/dd/yy

> ID：10291092
> 
> 赞同：2
> 
> 时间：2012-04-24T02:43:26.550
> 
> 标签：php, json

如何将日期转换为可读格式，例如`mm/dd/yy`？下面的代码给了我这个：/Date(1335412800000)/

```
<?php echo '<td>'.$r['effdate'].'</td>'; ?> //displaying this now: /Date(1335412800000)/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T02:59:49.390

尝试：

```
<?php
    $effdate = date('m/j/Y', preg_replace('/[^\d]/','', $r['effdate'])/1000);    
    echo '<td>'.$effdate.'</td>';
?> 
```

我正在删除所有非数字。

`preg_replace('/[^\d]/','', $r['effdate'])`

在 JavaScript 中除以 1000 作为纪元时间是 x 1000。

`/1000`

然后我返回格式化的日期。

`date('m/j/Y', ...`

# javascript - 通过 $parent 绑定绑定单选按钮

> ID：10291093
> 
> 赞同：1
> 
> 时间：2012-04-24T02:43:29.417
> 
> 标签：javascript, knockout.js

我正在`foreach`循环生成单选按钮。我正在尝试将选中的属性绑定到父级中的基本 observable。不幸的是，当单击单选按钮时，单击处理程序中似乎没有更新父属性。

根据[之前的一些工作](https://stackoverflow.com/questions/10283580/binding-knockoutjs-to-radio-button-with-computed#comment13234822_10285883)，似乎点击处理程序应该是在视图模型上获取更新值的可接受位置。最奇怪的是，在您单击单选按钮几次之后，似乎开始出现正确的值。

[全小提琴](http://jsfiddle.net/PC4aF/4/)

代码：

```
function Question() {
    this.name = "My Question";

    this.answers = ko.observableArray([
        new Answer(1, "Answer 1", false),
        new Answer(2, "Answer 2", true),
        new Answer(3, "Answer 3", false)]);

    this.correctAnswer = ko.observable(2);
}

function Answer(id, name, isRight) {
    this.id = ko.observable(id);
    this.name = ko.observable(name);
    this.isRight = ko.observable(isRight);
}

ko.applyBindings(new Question());

$(document).on("click", "input[type='radio']", function () {
     var answer = ko.dataFor(this);
     var question = ko.contextFor(this).$parent;

     var answerId = answer.id();
     var correctAnswer = question.correctAnswer();

     alert(answerId + " should equal " + correctAnswer + 
           (answerId === correctAnswer ? " SWEET" : " DAMNIT"));
});
​ 
```

HTML

```
<div data-bind="text:name"></div>
<div data-bind="foreach:answers">
    <label>
        <span data-bind="text: name"></span>
        <input type="radio" name="X" data-bind="value: id, checked:$parent.correctAnswer" />
    </label>
    <br />
</div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:26:54.963

当您将选中的值绑定到 $parent.correctAnswer 时，这是一种双向绑定，这意味着您将正确答案更新为您单击的任何内容。

我建议用类似的东西替换它：

```
checked:$parent.isCorrectAnswer() 
```

这是一个 ko.computed 始终返回正确答案，但也可以在所选值更改时提醒您

```
this.isCorrectAnswer= ko.computed(function () {        
    alert('your message');
    return 2;//return correct answer
}); 
```

代码未经测试并提供给您：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T18:59:00.290

改变

```
answerId === correctAnswer 
```

至

```
answerId == correctAnswer 
```

让它每次都能正常工作。

希望这可以帮助！

# android - Android 项目不适用于外部 JAR 或项目参考

> ID：10291097
> 
> 赞同：0
> 
> 时间：2012-04-24T02:44:02.227
> 
> 标签：android, svn, jdbc, jar

我有一个为期一个学期的项目，我一直在与一个四人小组一起在 Android 上工作。明天到期。我打算使用 JDBC for Android，但我遇到了一个我以前见过的丑陋问题。无论我做什么，我的 Android**都无法识别外部引用。** 有一段时间我通过将源代码复制到我的项目中来避免这个问题。

但是，对于 JDBC，我需要一个 JAR 驱动程序才能连接到 MySQL 数据库。所以你知道，我通过以下方式添加 JAR：

1.  创建文件夹
2.  将 JAR 导入该文件夹
3.  将 JAR 添加到 Android 项目中的 BuildPath。

我还尝试通过将外部 Java 项目添加到 BuildPath 来添加它。没有编译错误，但在我的（冰淇淋三明治）手机上执行代码时出现 ClassNotFound 错误。该项目在 Android 2.2 中。我听说制作一个 Android 库项目可以解决这个问题，但我对该解决方案不感兴趣，因为它违背了我的项目参考的目的。

使用 JDBC 驱动程序，在我的项目中引发了以下 RuntimeException：

```
private final static String driver = "com.mysql.jdbc.Driver";
private final static String userName = "sqluser";
private final static String passwd = "sqlpw";

public Query() {
    try {
        Class.forName(driver);
    } catch (ClassNotFoundException e) {
//          System.err
//                  .println("error in DB connection: can not find the DB driver");
        throw new RuntimeException("Driver not found");
    } 
```

该代码可以作为 Java 应用程序正常工作。

任何有效的解决方案都将受到高度赞赏。由于该项目明天到期，它不一定是最优雅的方法。另外（没关系），我的项目通过 SubClipse 连接到 SVN 存储库。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:08:01.957

我不确定您将 JAR 放在哪个文件夹中，但对于 android 项目，您必须将它们放在文件夹“libs”中。

# javascript - Firefox Javascript URL 重定向

> ID：10291099
> 
> 赞同：0
> 
> 时间：2012-04-24T02:44:26.190
> 
> 标签：javascript

我正在为历史课制作一个经过审查的谷歌模拟版。用户输入一个搜索词，如果该词被“审查”，他们将被带到审查页面，否则他们将直接进入实际的谷歌页面。但是，仅在 Firefox 中，搜索似乎没有重定向到谷歌页面，而只有脚本的审查部分有效。我检查了谷歌浏览器，它工作正常。有任何想法吗？

这是代码：HTML：

```
 <input type="text" id = "search" name="search" size="85" onKeyUp="searchCensor()"/><br /> 
```

Javascript：

```
function searchCensor() 
{
    var keyTerms = document.getElementById("search").value;
    if(keyTerms == "censorship")
        window.location = "http://andrewgu12.kodingen.com/history/censor.php";
    else if(window.event.keyCode == 13)
        window.location = "https://www.google.com/search?q="+keyTerms;
} 
```

网站：[http ://andrewgu12.kodingen.com/history/](http://andrewgu12.kodingen.com/history/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T02:47:23.830

`window.event`是 Internet Explorer 8 及以下版本独有的。

你在哪里调用这个函数？您可能应该在`onsubmit`表单的事件中使用它，在这种情况下您不需要该 keyCode 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:07:07.950

我找到了这篇[文章](https://stackoverflow.com/questions/7146659/handling-enter-key-on-text-area-using-javascript)，并尝试了它的工作

将 onKeyUp 编辑为`onKeyUp="searchCensor(event)`

并将您的功能编辑为

```
function searchCensor(e) {
    var keyTerms = document.getElementById("search").value;
    if (keyTerms == "censorship") {
        window.location = "http://andrewgu12.kodingen.com/history/censor.php";
    }
    else {
        var code = (e.keyCode ? e.keyCode : e.which);
        if (code  == 13) window.location = "https://www.google.com/search?q=" + keyTerms;
    }
} 
```

# java - Android onTouch 事件没有发生？

> ID：10291101
> 
> 赞同：3
> 
> 时间：2012-04-24T02:45:22.290
> 
> 标签：java, android, textview, ontouchlistener

我一直在研究并努力使用我的代码来获得一个文本视图，以便在触摸“幽灵”时更新分数。

这是我的第一个 Android 应用程序，据我所知（我将 Log.w() 添加到 ontouch，但从未发布日志以及分数没有增加甚至出现）onTouch(View v, MotionEvent 事件) 永远不会被调用。下面是我的代码。

```
package com.cs461.Ian;

//TODO:Add accelerometer support
//TODO:Add Clickable ghosts
//TODO:Add camera background
/*Completed:(As of 2:30am 4/16)
 * Activity launches
 * Ghost appears on screen
 * Ghost will randomly move around the screen
 */

import java.util.Random;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.View;
import android.widget.TextView;

public class CameraActivity extends Activity{

Bitmap g;
Ghost a;
Ghost still;
SurfaceHolder mSurfaceHolder;
boolean firsttime=true;
int draw_x,draw_y,xSpeed,ySpeed,score=0;
TextView t;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game);
    a = new Ghost(getApplicationContext());
    still = new Ghost(getApplicationContext());
    //requestWindowFeature(Window.FEATURE_NO_TITLE);
    a.Initalize(BitmapFactory.decodeResource(getResources(), R.drawable.ghost), 20, 20);
    still.Initalize(BitmapFactory.decodeResource(getResources(), R.drawable.ghost), 120, 120);
    t = (TextView) findViewById(R.id.t);
    t.setText("TEST SCORE TO SEE IF TEXTVIEW SHOWS UP");

    a.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN){
                score++;
                t.setText("Score: "+score);

            }
            return true;
        }
    });
    still.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN){
                score++;
                t.setText("Score: "+score);
                Log.w("CLICKED","Clicked on ghost "+score+" times");

            }
            return true;
        }
    });

    setContentView(new Panel(this));
}

class Panel extends View {
    public Panel(Context context) {
        super(context);
    }

    @Override
    public void onDraw(Canvas canvas) {
        //g.Initalise(BitmapFactory.decodeFile("/res/drawable-hdpi/ghost.png"), 200, 150, 5, 5);;
        update(canvas);
        invalidate();
    }

    /*Places ghost on screen and bounces it around in the screen. My phone is apparently only API level 4(the most up to date is 15) so i didn't code it
     *for the accelerometer yet.
     */
    public void update(Canvas canvas) {
        Random rand = new Random();
        if(firsttime){
            draw_x = Math.round(System.currentTimeMillis() % (this.getWidth()*2)) ;
            draw_y = Math.round(System.currentTimeMillis() % (this.getHeight()*2)) ;
            xSpeed = rand.nextInt(10);
            ySpeed = rand.nextInt(10);

            firsttime=false;
        }
         draw_x+=xSpeed;
         draw_y+=ySpeed;
        draw_x = Math.round(System.currentTimeMillis() % (this.getWidth()*2)) ;
        draw_y = Math.round(System.currentTimeMillis() % (this.getHeight()*2)) ;
         if (draw_x>this.getWidth()){
          draw_x = (this.getWidth()*2)-draw_x;
          xSpeed = rand.nextInt(10);
          if(xSpeed >=5)
              xSpeed=-xSpeed;
         }
         if (draw_y>this.getHeight()){
          draw_y = (this.getHeight()*2)-draw_y;
          ySpeed = rand.nextInt(10);
          if(ySpeed >=5)
              ySpeed=-ySpeed;
         }
         g = BitmapFactory.decodeResource(getResources(), R.drawable.ghost);
         canvas.drawBitmap(g, draw_x, draw_y, null);
         still.draw(canvas);
         a.update(canvas);

        }
    }

} 
```

忘记添加类 Ghost：

```
package com.cs461.Ian;

import java.util.Random;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Rect;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;

public class Ghost extends View implements View.OnTouchListener{
public Ghost(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

private Bitmap mAnimation;
private int mXPos;
private int mYPos;
private Rect mSRectangle;
private int mSpriteHeight;
private int mSpriteWidth;
View v;
Rect dest;
int score = 0;

/*public Ghost() {
    mSRectangle = new Rect(0,0,0,0);
    mXPos = 80;
    mYPos = 200;
}*/

public void Initalize(Bitmap theBitmap, int Height, int Width) {
    mSRectangle = new Rect(0,0,0,0);
    mXPos = 80;
    mYPos = 200;
    mAnimation = theBitmap;
    mSpriteHeight = Height;
    mSpriteWidth = Width;
    mSRectangle.top = 0;
    mSRectangle.bottom = mSpriteHeight;
    mSRectangle.left = 0;
    mSRectangle.right = mSpriteWidth;
    dest = new Rect(mXPos, mYPos, mXPos + mSpriteWidth,
            mYPos + mSpriteHeight);

}
public void draw(Canvas canvas) {

    canvas.drawBitmap(mAnimation, mXPos, mYPos, null);
}

public void update(Canvas canvas) {
    new Random();

    mXPos = Math.round(System.currentTimeMillis() % (canvas.getWidth()*2)) ;
    mYPos = Math.round(System.currentTimeMillis() % (canvas.getHeight()*2)) ;
    if (mXPos>canvas.getWidth())
      mXPos = (canvas.getWidth()*2)-mXPos;
    if (mYPos>canvas.getHeight())
      mYPos = (canvas.getHeight()*2)-mYPos;

     draw(canvas);

}

public Rect getRect() {
    return mSRectangle;
}
@Override
public boolean onTouch(View v, MotionEvent event) {
    score++;
    //CameraActivity.t.setText("Score: "+CameraActivity.score);
    Log.w("CLICKED","Clicked on ghost "+score+" times");
    return true; //doesn't work if returns false either
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:33:25.313

覆盖`dispatchTouchEvent(MotionEvent event)`在你`Activity`处理所有可能发生的触摸事件。如果他们处理事件，则返回`false`以传递到层次结构中的下一个视图\布局。`MotionEvent`

# windows-phone-7 - 结合 WP7.5、phonegap 和 jqm 的历史问题

> ID：10291103
> 
> 赞同：1
> 
> 时间：2012-04-24T02:45:35.317
> 
> 标签：windows-phone-7, jquery-mobile, cordova

我有一个使用 jqm 的 phonegap 应用程序，它在 android 和 ios 中运行良好。

移植到 WP7 我对历史有疑问，特别是**history.back()**（还有**.go(-1)**等）。这指的是回到历史上，以前的“页面”在同一个物理 html 文件中，只是一个不同的**data-role=page** div。

在常规浏览器中使用 jwm 站点很好（在同一个 html 文件中有单独的“页面”）。此外，当我们在应用程序中从一个 html 文件转到另一个 html 文件时使用 history.back() 也很好。是WP7.5、jqm、PG的具体组合。

有没有人遇到过解决方案？它让我发疯，自 PG 1.4.1 和 jwm 1.0 以来一直是问题。

编辑1：在WP7.5上初始化webview的phonegap过程可能会在加载后以某种方式覆盖jqm历史覆盖。

编辑 2：绝对与 jqm 无法修改历史记录有关。每次“页面”更改时，history.length 仍为 0。

编辑 3：当我检查“历史”对象时，我发现没有用于**replaceState**或**pushState**的功能- 我知道 jqm 将其用于历史导航，也许这就是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:31:14.367

好的 - 这并不完美，但这是一个适合我的解决方案（阅读：hack）。它**仅**适用于页面哈希更改，而不是实际的 url 更改（但您可以为此添加正则表达式检查）。把它放在**ondeviceready**上运行的代码中的某个地方：

```
if (device.platform == 'WinCE') {
    window.history.back = function () {
        var p = $.mobile.urlHistory.getPrev();
        if (p) {
            $.mobile.changePage("#" + p.pageUrl, { reverse: true });
            $.mobile.urlHistory.stack.splice(-2, 2);
            $.mobile.urlHistory.activeIndex -= 2;
        }
    }
} 
```

# android - 错误致命异常：主要

> ID：10291121
> 
> 赞同：0
> 
> 时间：2012-04-24T02:47:08.630
> 
> 标签：android, camera

我想用数据库中的名称启动相机，我有三个数据库..我有这样的代码：

```
public void startCamera() 
{
    long tim=System.currentTimeMillis();
     SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");
     String curTime =df.format(tim);
     System.out.println("Time : " + curTime);

    Cursor c = helper.getKomp(almagId2);
    Cursor ca = helper.getSat(almagId);
    Cursor cb = helper.getUlok(almagId1);
    if(c.moveToFirst()){
        fileName =c.getString(1)+"_"+"kanan"+"_"+System.currentTimeMillis()+ ".jpg";
    }else if(ca.moveToFirst()){
        fileName =ca.getString(1)+"_"+"kanan"+"_"+System.currentTimeMillis()+ ".jpg";
    }else if(cb.moveToFirst()){
        fileName =cb.getString(1)+"_"+"kanan"+"_"+System.currentTimeMillis()+ ".jpg";
    }

    _path=Environment.getExternalStorageDirectory().toString() + "/DCIM/Camera/";

    file = new File(_path, fileName);
    try {
    file.createNewFile();
    } catch (IOException e) {
    e.printStackTrace();
    }               
    System.out.println(file);
    Uri outputFileUri = Uri.fromFile(file);
    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
    startActivityForResult(intent, IMAGE_CAPTURE);

    SQLiteDatabase db = helper.getWritableDatabase();
    if(c.moveToFirst()){
        db.execSQL("insert into image (kdstore,image1,tgl_buat) values ('"+c.getString(1)+"','"+file+"','"+curTime+"')");
    }else if(ca.moveToFirst()){
        db.execSQL("insert into image (kdstore,image1,tgl_buat) values ('"+ca.getString(1)+"','"+file+"','"+curTime+"')");
    }else if(cb.moveToFirst()){
        db.execSQL("insert into image (kdstore,image1,tgl_buat) values ('"+cb.getString(1)+"','"+file+"','"+curTime+"')");
    }
    db.close();

} 
```

但是当我想调用方法 startCamera 我得到这样的错误：

```
04-24 09:29:34.902: ERROR/AndroidRuntime(9411): FATAL EXCEPTION: main
04-24 09:29:34.902: ERROR/AndroidRuntime(9411): java.lang.NullPointerException
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at java.io.File.<init>(File.java:168)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at com.sat.alfaloc.Camera.startCamera1(Camera.java:153)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at com.sat.alfaloc.Camera.onClick(Camera.java:319)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at android.view.View.performClick(View.java:2408)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at android.view.View$PerformClick.run(View.java:8816)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at android.os.Handler.handleCallback(Handler.java:587)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at android.os.Looper.loop(Looper.java:123)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at java.lang.reflect.Method.invoke(Method.java:521)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-24 09:29:34.902: ERROR/AndroidRuntime(9411):     at dalvik.system.NativeStart.main(Native Method) 
```

我怎么能解决这个问题？谢谢你的反馈:)

上面的代码编辑如下：

```
public void startCamera1() 
{
    long tim=System.currentTimeMillis();
     SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd kk:mm:ss");
     String curTime =df.format(tim);
     System.out.println("Time : " + curTime);
     SQLiteDatabase db = helper.getWritableDatabase();

    Cursor c = helper.getKomp(almagId2);
    Cursor ca = helper.getSat(almagId);
    Cursor cb = helper.getUlok(almagId1);
    if(c.moveToFirst()){
        fileName =c.getString(1)+"_"+"kiri"+"_"+System.currentTimeMillis()+ ".jpg";
        _path=Environment.getExternalStorageDirectory().toString() + "/DCIM/Camera/";
        file = new File(_path, fileName);
        try {
        file.createNewFile();
        } catch (IOException e) {
        e.printStackTrace();
        }
        System.out.println(file);

        Uri outputFileUri = Uri.fromFile(file);
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, IMAGE_CAPTURE1);
        db.execSQL("insert into image (kdstore,image1,tgl_buat) values ('"+c.getString(1)+"','"+file+"','"+curTime+"')");
    }
    if(ca.moveToFirst()){
        fileName =ca.getString(1)+"_"+"kiri"+"_"+System.currentTimeMillis()+ ".jpg";
        file = new File(_path, fileName);
        try {
        file.createNewFile();
        } catch (IOException e) {
        e.printStackTrace();
        }
        System.out.println(file);

        Uri outputFileUri = Uri.fromFile(file);
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, IMAGE_CAPTURE1);
        db.execSQL("insert into image (kdstore,image1,tgl_buat) values ('"+ca.getString(1)+"','"+file+"','"+curTime+"')");
    }
    if(cb.moveToFirst()){
        fileName =cb.getString(1)+"_"+"kiri"+"_"+System.currentTimeMillis()+ ".jpg";
        file = new File(_path, fileName);
        try {
        file.createNewFile();
        } catch (IOException e) {
        e.printStackTrace();
        }
        System.out.println(file);

        Uri outputFileUri = Uri.fromFile(file);
        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
        startActivityForResult(intent, IMAGE_CAPTURE1);
        db.execSQL("insert into image (kdstore,image1,tgl_buat) values ('"+cb.getString(1)+"','"+file+"','"+curTime+"')");
    }

    db.close();

} 
```

这没有错误，但活动调用不起作用..如何解决它？谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:02:45.767

异常表示`File`构造函数的参数之一为空。不可能，`path_`因为那会导致先前的异常。一定是`filename_`。您的三向 if-else 允许*没有任何*分支为真，如果没有，则为`filename_`空 - 所以这一定是正在发生的事情。如果没有一个条件为真，你能有一个默认文件名吗？即，你可以在链的末尾添加一个`else`不带, 的文件名吗？`if`

# html - 编辑html的自动数字递增？

> ID：10291125
> 
> 赞同：-1
> 
> 时间：2012-04-24T02:47:41.583
> 
> 标签：html, autohotkey

我正在做一个平行段落突出显示的平行文本。大约完成了一半，这里：[http ://tinyurl.com/humecz2e](http://tinyurl.com/humecz2e)

问题是手动编辑html非常繁琐，因此每个段落的两侧都有递增的数字。例如：

```
<div class="indented numbered">
<label class="p2">
Those who have denied the reality of moral distinc&shy;tions, may be ranked among the disingenuous disputants; nor is it conceivable, that any human creature could ever seriously believe, that all characters and actions were alike entitled to the<span class="epagno"></span> affection and regard of everyone. The difference, which nature has placed between one man and another, is so wide, and this difference is still so much farther widened, by education, example, and habit, that, where the opposite extremes come at once under our apprehension, there is no scepticism so scrupulous, and scarce any assurance so determined, as absolutely to deny all distinction between them. Let a man&rsquo;s insensibility be ever so great, he must often be touched with the images of <strong>right</strong> and <strong>wrong</strong>; and let his prejudices be ever so obstinate, he must observe, that others are susceptible of like impressions. The only way, therefore, of converting an antagonist of this kind, is to leave him to himself. For, finding that nobody keeps up the controversy with him, it is probable he will, at last, of himself, from mere weariness, come over to the side of common sense and reason.
</label>
</div>

<div class="indented numberedlower"><div class="sbnumbered">
<label class="p3">
There has been a controversy started of late, much better worth examination, concerning the general foundation of <strong>morals</strong>; whether they be derived from <strong>reason</strong>, or from <strong>sentiment</strong>; whether we attain the knowledge of them by a chain of argument and induction, or by an immediate feeling and finer internal sense; whether, like all sound judgment of truth and falsehood, they should be the same to every rational intelligent being; or whether, like the perception of beauty and deformity, they be founded entirely on the particular fabric and constitution of the human species.
</label>
</div></div> 
```

我想自动而不是手动执行此操作，或者可能是自动和手动的混合。但我不知道该怎么做。我有 AutoHotKey，但我不确定它是否是一个理想的程序，甚至不确定如何让它增加数字。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:05:41.453

您需要使用 Javascript：

```
<script type="text/javascript">
    var elements = document.getElementsByTagName('label');
    for (var i in elements) {
        var elem = elements[i];
        elem.className += " p"+i;
    }
</script> 
```

您可以考虑使用唯一 ID 而不是唯一类名：

```
<script type="text/javascript">
    var elements = document.getElementsByTagName('label');
    for (var i in elements) {
        var elem = elements[i];
        elem.id = "p"+i;
    }
</script> 
```

如果您只是想为标签设置不同的样式，可以尝试使用[nth-child](http://www.w3.org/TR/selectors/#nth-child-pseudo) CSS 选择器：

```
<style type="text/css">
    div label:nth-child(odd) {
        background-color: red;
    }

    div label:nth-child(even) {
        background-color: blue;
    }
</style> 
```

# java - URL 和读取缓冲区不会导出

> ID：10291128
> 
> 赞同：0
> 
> 时间：2012-04-24T02:48:12.120
> 
> 标签：java

我有一个庞大的程序，我已经花费了 100 多个小时。即使它在 Ecipse 中运行良好，当我导出它时它也不起作用。我只用该代码制作了一个较小的程序来测试它。我已经搜索并更改了我的代码，但当我导出并运行我的 jar 文件时，我仍然无法让我的程序运行。它在 Eclipse 中运行良好。我尝试过文件阅读器、流、缓冲区、站在我的头上，并更改为我在网上看到的有关读取 jar 文件中包含的文件的任何内容。我是编码新手，所以有些事情仍然让我感到困惑。我将 .java 更改为 .zip 并查看了各个部分，文件就在那里。

我的阅读代码是

```
private void readFile(){
    try {
        System.out.println("starting array");       
        String[] myarray;  
        myarray = new String[5];  
        System.out.println("myarray"+myarray);  
        url = getClass().getResource("classifyinginfo.txt"); 
        System.out.println("url is "+url);
        readbuffer = new BufferedReader(new FileReader(url.getPath()));          
        line1 = readbuffer.readLine();
        line1 = readbuffer.readLine();                  
        line1 = readbuffer.readLine();                  
        line1 = readbuffer.readLine();                                      
        { String splitarray[] = line1.split(",");
            firstentry = splitarray[0];
            myarray[0]=splitarray[3];
            myarray[1]=splitarray[4];
            myarray[2]=splitarray[5];
            myarray[3]=splitarray[6];
            myarray[4]=splitarray[7]; 

            //line2 and 3 readbuffer etc

            Arrays.sort(myarray);
            for(int i=0; i < myarray.length; i++){
                System.out.println(myarray[i]);

                textArea.append(myarray[i]+"\n");}
        }       

        System.out.println(Arrays.toString(myarray)); 
        //  textArea.setText(Arrays.toString(myarray));

        readbuffer.close(); } catch (IOException e) {
        System.out.println("we have an error");}           
    System.out.println("Line: " + line1 );
} 
```

请告诉我如何在 Eclipse 内外进行这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T02:50:56.357

你只是这样做：

```
url = getClass().getResource("classifyinginfo.txt"); 
readbuffer = new BufferedReader(new InputStreamReader(url.openStream()));          
line1 = readbuffer.readLine(); 
```

该类`FileReader`可以读取磁盘上的单个文件，仅此而已。但是一旦有了 URL，就不需要使用它。以这种方式修改，无论文件是否在 jar 中，程序都可以运行。

您实际上可以完全消除 URL，然后执行以下操作：

```
readbuffer =
    new BufferedReader(new InputStreamReader(getClass().getResourceAsStream("classifyinginfo.txt")));          
line1 = readbuffer.readLine(); 
```

# python - 如何在 Python 中使用 os.umask()

> ID：10291131
> 
> 赞同：18
> 
> 时间：2012-04-24T02:48:50.760
> 
> 标签：python, linux, umask

我正在尝试使用 os 模块设置 umask。请注意我在 ~/.profile 中设置的正常 umask 是 umask 0027。

在 bash shell 中，

```
umask 0022 
```

将允许创建具有权限的文件

```
-rw-r--r-- 
```

但是，当我们导入 os 模块并执行此操作时：

```
os.umask(0022)
[do some other code here that creates a file] 
```

我获得了以下权限

```
---------- 
```

首先，如何让 os.umask(mask) 在 shell 中表现得像 umask？

二、两者区别的逻辑是什么？

注意：我尝试将 0022 转换为十进制，以防它通过以下方式期待小数：

```
os.umask(18) 
```

但它授予了以下权限

```
-----w--w- 
```

另请注意，我试过

```
os.umask(00022) 
```

和

```
os.mask(0o0022) 
```

这也不起作用。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-04-23T23:22:39.210

我认为对umask的误解。umask 设置默认**拒绝**，而不是默认**权限**。所以

```
import os
oldmask = os.umask (0o022)
fh1 = os.open ("qq1.junk", os.O_CREAT, 0o777)
fh2 = os.open ("qq2.junk", os.O_CREAT, 0o022)
os.umask (oldmask)
os.close (fh1)
os.close (fh2) 
```

确实应该产生如下文件：

```
-rwxr-xr-x 1 pax pax 0 Apr 24 11:11 qq1.junk
---------- 1 pax pax 0 Apr 24 11:11 qq2.junk 
```

umask 022 删除了组和其他人的写访问权限，这正是我们在那里看到的行为。我发现回到八进制数字所代表的二进制是有帮助的：

```
 usr grp others 
-rwx rwx rwx is represented in octal as 0777, requested for qq1.junk
-000 010 010 umask of 022 removes any permission where there is a 1
-rwx r-x r-x is the result achieved requesting 0777 with umask of 022

---- -w- -w- is represented in octal as 0022, requested for qq2.junk
-000 010 010 umask of 022 removes any permission where there is a 1
---- --- --- is the result achieved requesting 0022 with umask of 022 
```

程序按照您的要求运行，不一定按照您认为的那样运行。常见的情况，用电脑:-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T02:57:50.457

您可能需要向我们展示构成的代码：

```
[do some other code here that creates a file] 
```

您的代码在我的系统上运行良好：

```
import os
oldmask = os.umask (022)
fh1 = os.open ("qq1.junk", os.O_CREAT, 0777)
fh2 = os.open ("qq2.junk", os.O_CREAT, 0022)
os.umask (oldmask)
os.close (fh1)
os.close (fh2) 
```

生成文件如下：

```
-rwxr-xr-x 1 pax pax 0 Apr 24 11:11 qq1.junk
---------- 1 pax pax 0 Apr 24 11:11 qq2.junk 
```

您还应该注意旧`umask`值的恢复，从而最大限度地减少将其更改为本地操作的影响。

正如您从上面的结果中看到的那样，您还需要注意该`umask`值是从您用于创建文件的模式中“减去”的，我们不知道在您的特定情况下该模式是什么。

即使在您的`bash`示例中也很明显，因为创建模式文件时的`umask`值会导致，而不是您所拥有的。`022``777``r-xr-xr-x``rw-r--r--`

* * *

根据您在下面表明您使用`open`而不是的评论`os.open`，粗略地浏览一下 Python 源代码似乎表明这转换为用作初始模式的 C`fopen`调用。`0666`稍作修改的代码支持这一点：

```
import os
oldmask = os.umask (022)
fh3 = open ("qq3.junk", "w")
os.umask (0)
fh4 = open ("qq4.junk", "w")
os.umask (oldmask)
fh3.close()
fh4.close() 
```

这给了我们：

```
-rw-r--r-- 1 pax pax 0 Apr 24 11:44 qq3.junk
-rw-rw-rw- 1 pax pax 0 Apr 24 11:44 qq4.junk 
```

所以我不完全确定你为什么会`0000`在你的情况下获得权限。

当您在您的环境中运行上述程序时，看看结果如何是值得的。如果它与我得到的相同，那么问题很可能出在其他地方。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-07T12:26:43.890

挑剔/小心，并且与 Python 3k 兼容，这是我略有不同的答案（仍然没有解释 OP 的原始问题是什么）：

```
old_umask = os.umask(0o022) # u=rwx,g=rx,o=rx
try:
    # do stuff

finally:
    os.umask(old_umask) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-23T19:16:35.610

尽管这似乎是一个直接的系统调用，但在这种情况下，您使用的 Python 版本似乎很重要：

似乎 os.open 在 Python 2.x 和 Python 3.x 中处理预先存在的 umask 的方式不同，可能是因为 2.x 更接近操作系统，而 3.x 做了更多的抽象。

[https://docs.python.org/2/library/os.html](https://docs.python.org/2/library/os.html) “默认模式为0777（八进制），**当前umask值先被屏蔽掉。** ”

[https://docs.python.org/3/library/os.html](https://docs.python.org/3/library/os.html)中没有类似的说法

# ms-word - 需要对 MS word 文件进行加密/解密的建议

> ID：10291134
> 
> 赞同：0
> 
> 时间：2012-04-24T02:49:33.440
> 
> 标签：ms-word, aes

创建 MS Word 文档后，我需要将其放入服务器，但我不希望任何人看到它。我需要我自己的程序来解密并查看它。为此，我计划使用 AES 进行加密。任何拥有AES解密程序的程序员都可以解密它是真的吗？或者我可以在我的程序中添加任何特定的额外内容以使其仅供我访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:00:24.370

* * *

#                          保护 Word 文档

* * *

对于 Microsoft Word 文档（Word 2000 和更新版本），您可以在保存文件时选择更高级别的安全性。不要简单地单击“保存”，而是单击文件，然后单击另存为并按照以下步骤操作：

1.  点击文件保存对话框右上角的工具

2.  点击安全选项

3.  安全选项框提供了多种选项：
    *   如果您希望文件在没有密码的情况下完全无法访问，您可以在密码旁边的框中输入密码以打开
    *   在 Word 2002 和 2003 中，您可以单击密码框旁边的“高级”按钮来选择更难破解的更高级别的加密
    *   如果其他人可以打开文件，您可以在密码旁边的框中输入密码进行修改，但您想限制谁可以对文件进行更改

4.  安全选项框的底部还提供了一些保护文档隐私的选项：
    *   保存时从文件属性中删除个人信息
    *   在打印、保存或发送包含修订或评论的文件之前发出警告
    *   存储随机数以提高合并精度
    *   打开或保存时使隐藏的标记可见
5.  单击“确定”关闭“安全选项”框

6.  为您的文件选择一个名称，然后单击保存

* * *

                                                                 [更多信息](http://netsecurity.about.com/od/frequentlyaskedquestions/f/faq_encryptms.htm)

* * *

# architecture - 什么是指导构图的模式

> ID：10291137
> 
> 赞同：0
> 
> 时间：2012-04-24T02:49:50.743
> 
> 标签：architecture, software-design

用软件架构的说法，“指导组合的模式”是什么意思？是组件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:46:12.707

组合是将两个或多个类组合成一个新类，与为现有类扩展功能时的继承形成对比。

您应该始终支持[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)，因为使用组合创建定义明确的小型对象（遵循 SOLID 原则）比使用继承更容易（大型继承层次结构倾向于转向[GOD](http://en.wikipedia.org/wiki/God_object)类，因此至少违反了单一责任原则）。

# javascript - Javascript - 等待许多异步回调返回？

> ID：10291139
> 
> 赞同：14
> 
> 时间：2012-04-24T02:50:33.097
> 
> 标签：javascript, asynchronous, underscore.js

处理多个异步回调的最佳方式/库是什么？现在，我有这样的事情：

```
_.each(stuff, function(thing){
   async(thing, callback);
}); 
```

在为`stuff`.

最干净的方法是什么？我愿意使用图书馆。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-24T02:57:52.573

由于您已经在使用下划线，您可能会查看[`_.after`](http://documentcloud.github.com/underscore/#after). 它完全符合您的要求。从文档：

> **后**    `_.after(count, function)`
> 
> 创建仅在第一次调用 count 次后才运行的函数版本。对于分组异步响应很有用，您希望在继续之前确保所有异步调用都已完成。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-24T02:57:01.967

有一个很棒的库叫做[Async.js](https://github.com/caolan/async)，它可以通过许多异步和流控制助手来帮助解决此类问题。它提供了几个 forEach 函数，可以帮助您为数组/对象中的每个项目运行回调。

查看： [https ://github.com/caolan/async#forEach](https://github.com/caolan/async#forEach)

```
// will print 1,2,3,4,5,6,7,all done

var arr = [1,2,3,4,5,6,7];

function doSomething(item, done) {
  setTimeout(function() {
    console.log(item);
    done(); // call this when you're done with whatever you're doing
  }, 50);
}

async.forEach(arr, doSomething, function(err) {
    console.log("all done");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T03:00:26.300

我为此推荐[https://github.com/caolan/async 。](https://github.com/caolan/async)您可以使用它`async.parallel`来执行此操作。

```
function stuffDoer(thing) {
    return function (callback) {
        //Do stuff here with thing
        callback(null, thing);
    }
}

var work = _.map(stuff, stuffDoer)
async.parallel(work, function (error, results) {
    //error will be defined if anything passed an error to the callback
    //results will be an unordered array of whatever return value if any
    //the worker functions passed to the callback
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-28T18:09:05.780

async.parallel() / async.series 应该适合您的要求。您可以提供在所有 REST 调用成功时执行的最终回调。

```
async.parallel([
    function(){ ... },
    function(){ ... }
], callback);
async.series([
    function(){ ... },
    function(){ ... }
], callback); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T02:56:46.790

有一个柜台，说`async_count`。每次启动请求时（在循环内部）将其加一，并让回调将其减一并检查是否已达到零 - 如果是，则所有回调都已返回。

编辑：虽然，如果我是写这篇文章的人，我会链接请求而不是并行运行它们 - 换句话说，我有一个请求队列并让回调检查队列以获取下一个请求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T03:00:10.530

请参阅我对类似问题的回复：

[在 node.js 中协调并行执行](https://stackoverflow.com/questions/4631774/coordinating-parallel-execution-in-node-js/4631909#4631909)

我的`fork()`功能在内部自动维护计数器。

# jquery - 如何排队 jQuery ajax 请求？

> ID：10291147
> 
> 赞同：2
> 
> 时间：2012-04-24T02:51:23.470
> 
> 标签：jquery

我一直在做很多搜索，但我认为我找不到我要找的东西。

我有一个类似于 twitter 工作方式的系统，您需要通过单击按钮添加（或在 Twitter 中关注）多个人。

因此，例如，每次我单击下面的“添加”按钮时，它都会发出 AJAX 请求将它们添加到数据库中。

```
<ul>
    <li>Ben <a href="#" onclick="return addPerson(1);">Add</a></li>
    <li>Sarah <a href="#" onclick="return addPerson(2);">Add</a></li>
    <li>Chantelle <a href="#" onclick="return addPerson(3);">Add</a></li>
    <li>Alan <a href="#" onclick="return addPerson(4);">Add</a></li>
</ul> 
```

现在，如果我一个接一个地为每个人单击添加按钮，我认为为每个人排队一个 ajax 请求不会很好地利用资源。另外它会很慢。

在我单击每个“添加”按钮后，我在想的可能是延迟或类似的东西。所以它记录了我点击的人的所有ID，并为所有点击的人发送一个ajax请求。

是否有现有的脚本，或者你能推荐我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:08:51.237

这样的事情会奏效吗？

```
var sendDelay;
var peopleToSend = [];
addPerson = function(id) {
   if (sendDelay!=null) {
      clearTimeout(sendDelay);  // Clear timeout
   }
   sendDelay=setTimeout(addPersonDelayComplete,2000);  // Reset timeout
   peopleToSend.push(id);  // Add person to array
}

addPersonDelayComplete = function() {
   // Send the people in peopleToSend in a single ajax call here
   peopleToSend.length = 0;  // Reset the array
 } 
```

# ruby-on-rails - rails，检索除外键之外的另一个用户对象

> ID：10291151
> 
> 赞同：0
> 
> 时间：2012-04-24T02:51:42.397
> 
> 标签：ruby-on-rails, foreign-keys, associations

我有一个用户模型和一个消息模型。我的用户 has_many 消息和我的消息属于_to 用户。

在我的消息模型上，我有属性：content，：user_id，：to_id。

:user_id 充当外键，也可以被认为是“发送者”，而 :to_id 可以被认为是“接收者”。

在我的消息索引模板中，当我尝试显示所有消息时，我会执行类似...

```
<%= link_to message_item.user.name, message_item.user %> 
```

该行在显示我收到的消息时效果很好（我的 :to_id 和 :user_id 显示谁向我发送了消息）

但是，当我在我的“已发送”类别下列出消息时，执行上面的代码行将始终显示我的姓名（因为 im :user_id）而不是 :to_id，这会更有意义。

理想情况下，我想要类似的东西

```
<%= message_item.to_id %> 
```

对于我发送的类别。有没有办法获取我的 :to_id 类别中提到的用户对象？message_item.to_id.name 之类的东西不起作用，因为 message_item.to_id 返回一个整数而不是用户对象。有没有办法得到它？

在尝试显示和链接到发件人时，这是我失败的尝试

```
 <% if current_user == message_item.user %>
    <%= message_item.to_id %>
    <% else %>
        <%= link_to message_item.user.name, message_item.user %>
    <% end %> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T02:59:29.960

您需要做的是定义接收者的关系`message.rb`：

```
belongs_to :to,
  :class_name => 'User',
  :foreign_key => :to_id 
```

我发现如果你把事情称为是这样的事情通常会更清楚`to_id`，`to_user_id`所以很明显你在谈论用户而不是其他东西。

现在您可以致电：

```
<%= link_to(message.to.name, message.to) %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:23:17.027

这很有趣，我今天回答了一个类似的问题。

首先，[您必须像这样设置您的`Message`和`User`模型](https://stackoverflow.com/a/10289726/348508)。

因此，对于您发送的消息，您可以使用：

```
<%- current_user.messages.each do |message| -%>
  <%= link_to message.recipient.name, user_path(message.recipient) %>
<%- end -%> 
```

对于收到的消息：

```
<%- current_user.messages_received.each do |message| -%>
  <%= link_to message.user.name, user_path(message.user) %>
<%- end -%> 
```

这应该足够了。

# ruby - 如果使用 Net::SSH 库，如何获得执行命令的结果？

> ID：10291154
> 
> 赞同：0
> 
> 时间：2012-04-24T02:52:19.367
> 
> 标签：ruby, ssh, rubygems

我有一个功能

```
def run_through_ssh(command)
    host = $edumate_server
    user = 'user'
    pass = '******'

    output = Array.new      
    Net::SSH.start( host, user, :password => pass ) do|ssh|
        output = ssh.exec(command)
        #output = ssh.exec(command+" 2>&1")
    end

    return output
end 
```

它在远程服务器上正确执行我想要的命令，但`output`变量不包含远程执行的命令输出到屏幕的内容。我在 sinatra 中使用了这个函数，奇怪的是我可以在运行 sinatra 的屏幕上看到输出。

如何捕获远程执行命令的输出？

输出变量包含类似

```
#<Net::SSH::Connection::Channel:0x3fe40c0 @remote_maximum_window_size=2097152, @
eof=false, @on_open_failed=nil, @remote_window_size=2097152, @closing=true, @pro
perties={}, @local_maximum_packet_size=65536, @on_process=nil, @type="session",
@remote_id=0, @on_confirm_open=#<Proc:0x031f64a0@C:/Ruby187/lib/ruby/gems/1.8/ge
ms/net-ssh-2.2.1/lib/net/ssh/connection/session.rb:320>, @on_request={}, @local_
id=0, @on_extended_data=#<Proc:0x031f6560@C:/Ruby187/lib/ruby/gems/1.8/gems/net-
ssh-2.2.1/lib/net/ssh/connection/session.rb:332>, @local_maximum_window_size=131
072, @on_eof=nil, @connection=#<Net::SSH::Connection::Session:0x3fe42a0 @options
={:logger=>#<Logger:0x400cb90 @level=4, @progname=nil, @logdev=#<Logger::LogDevi 
```

使用

*   ruby 1.8.7 (2010-08-16 补丁级别 302) [i386-mingw32]
*   网络SSH（2.2.1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:54:07.137

像这样的东西应该工作：

```
Net::SSH.start( host, user, :password => pass ) do |ssh|
  output = ssh.exec!(command)
end
output 
```

执事！如果没有给出块，方法捕获标准输入/标准输出。见[http://net-ssh.github.com/ssh/v2/api/classes/Net/SSH/Connection/Session.html#M000094](http://net-ssh.github.com/ssh/v2/api/classes/Net/SSH/Connection/Session.html#M000094)

# c - 在 C 中停止守护进程

> ID：10291161
> 
> 赞同：0
> 
> 时间：2012-04-24T02:53:07.783
> 
> 标签：c, process, signals

我的信号处理程序如下所示：

```
volatile sig_atomic_t loop     = 1;

void handle()
{
    loop = 0;
} 
```

而且，我有一个守护进程，就像：

```
void _start_()
{
...
sa.sa_handler = handle;
sigaction(SIGINT, &sa, NULL);
while(loop)
{
   //add a line to a file
}
...
} 
```

我想要`stop`守护进程，来自另一个函数，例如：

```
void _stop_()
{
    raise(SIGINT);
} 
```

我的想法是，不知何故，如果 的值为`loop`0，那么`while`将被评估为假，并且守护程序退出。我打算使用这两个功能，例如：

```
_start_(); //daemon starts
//computation
_stop_() //daemon stops writing to the file. exits 
```

我怎样才能做到这一点？问题是我无法从`_stop_()`.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:04:40.063

_stop() 函数是从您的守护程序的单独进程调用的吗？如果是这样，那么它需要知道要发出信号的进程的 ID。通常的做法是守护进程将其进程 ID 写入一个文件（PID 文件），该文件可由停止守护进程的进程读取。

# cocoa - 在 Mac OS X 10.6 上获取相对于屏幕的 NSView 框架/边界

> ID：10291165
> 
> 赞同：13
> 
> 时间：2012-04-24T02:53:58.687
> 
> 标签：cocoa

我需要获取 NSView 相对于屏幕的框架/边界。换句话说，我需要 x 和 y 坐标是屏幕上的位置，而不是相对于它的超级视图的位置。

我根据评论提出了以下解决方案。

```
NSRect frameRelativeToWindow = [self.view
    convertRect:self.view.bounds toView:nil
];
#if MAC_OS_X_VERSION_MAX_ALLOWED > MAC_OS_X_VERSION_10_6
NSPoint pointRelativeToScreen = [self.view.window
    convertRectToScreen:frameRelativeToWindow
].origin;
#else
NSPoint pointRelativeToScreen = [self.view.window
    convertBaseToScreen:frameRelativeToWindow.origin
];
#endif

NSRect frame = self.view.frame;

frame.origin.x = pointRelativeToScreen.x;
frame.origin.y = pointRelativeToScreen.y; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-24T03:16:58.860

```
NSRect frameRelativeToWindow = [myView convertRect:myView.bounds toView:nil];
NSRect frameRelativeToScreen = [myView.window convertRectToScreen:frameInWindow]; 
```

# html - Chrome 浏览器保存表单输入 - 使用了哪些名称/ID，为什么只保存了一些？

> ID：10291166
> 
> 赞同：1
> 
> 时间：2012-04-24T02:54:01.700
> 
> 标签：html, browser, cross-browser

我的网站上有一个页面，其中包含两种形式，一种用于登录，一种用于注册。

```
LOG IN-
<form name="login" id="login" method="post" action="php/login.php">     
    Email:   <input id="email"    name="email"    type="text">
    Password:<input id="password" name="password" type="password">
</form>

REGISTER-
<form id="register" name="register" method="post" action="php/register.php">
    Email:           <input id="r_email"            name="r_email"            type="text">
    Confirm Email:   <input id="r_email_confirm"    name="r_email_confirm"    type="text">
    Password:        <input id="r_password"         name="r_password"         type="password">
    Confirm Password:<input id="r_password_confirm" name="r_password_confirm" type="password">
</form> 
```

当我测试它时，Chrome 正在保存登录表单的电子邮件和密码（id 电子邮件和密码）以及注册表单的确认电子邮件和密码（id r_email_confirm 和 r_password）。

任何想法为什么要保存这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:36:02.747

似乎这是 Chrome 中的一个问题： http://productforums.google.com/forum/#!topic/chrome/ [f6zhGC8lVw4](http://productforums.google.com/forum/#!topic/chrome/f6zhGC8lVw4)

建议使用

```
<form autocomplete="off"... 
```

暂时，这有点烦人。

# abap - 检查字符字段是否仅包含数字

> ID：10291167
> 
> 赞同：5
> 
> 时间：2012-04-24T02:54:01.933
> 
> 标签：abap

我从 excel 文件中读取数据。内表的cols都是char128，有2个cols只包含带小数点的数字。所以我需要检查仅包含数字或带小数点的数字的字段。

NUMERIC_CHECK功能模块，只能检查数字，如果数字带小数点就没有用了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T08:59:07.710

您可以使用`CO`（仅包含）：

```
IF value CO '1234567890.'.
  "OK
ELSE.
  "Error"
ENDIF. 
```

也许您的`IF _ CO`-statement 中还需要一个空格。

此检查不检测多个小数点（例如`123.45.67.89`）。

较新版本的 ABAP 支持正则表达式。

如果您的字符串中还有空格，您可以将它们添加到 CO-value::`IF value CO '1234567890 .'.`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T14:17:05.947

您可以尝试使用正则表达式。报告 DEMO_REGEX_TOY 允许您输入字符串并针对它们测试正则表达式。

一般来说，对 REGEX 更有经验的人可能会使其更加通用，但这是我想出的：

```
-?[0-9]+(\.[0-9]*)? 
```

**-？**可选地匹配“-”字符（允许否定或非否定

**[0-9]+**匹配数字（+ 使其匹配 1 或更多）

**\.?** 可选地匹配 '.' 字符（需要 \ ，因为 '.' 是运算符）

**([0-9]+)?** 可选匹配小数点后的任何数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T09:30:47.193

如果要检查字符串是否为有效的小数，可以使用以下模块函数：'HRCM_STRING_TO_AMOUNT_CONVERT'，它允许您将字符串转换为对应的数字，给定字符串、小数分隔符和千位分隔符。

问候

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-06T06:26:49.017

另一种检查号码的方法：

```
data: float_value type f.
try.
  float_value = <your string value here>.
catch cx_sy_conversion_no_number.
  " not a valid number
endtry. 
```

# c - 如何在没有对齐数组的情况下进行对齐添加

> ID：10291172
> 
> 赞同：2
> 
> 时间：2012-04-24T02:55:06.993
> 
> 标签：c, sse, simd

所以我试图做一个看起来像的数组操作

```
for (int i=0;i++i<32)
{
    output[offset+i] += input[i];
} 
```

where`output`和`input`是`float`数组（由于 16 字节对齐`malloc`）。但是，我不能保证`offset%4=0`。我想知道如何解决这些对齐问题。

我虽然像

```
while (offset+c %4 != 0)
{
    c++;
    output[offset+c] += input[c];
} 
```

后面跟着一个对齐的循环——显然这是行不通的，因为我们现在需要对`input`.

有没有办法矢量化我的原始循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T03:24:46.297

将评论移至答案：

对于未对齐的内存访问，有 SSE 指令。它们可以通过以下内在函数访问：

*   `_mm_loadu_ps()`-[文件](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_sse_load.htm)
*   `_mm_storeu_ps()`-[文件](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011/compiler_c/intref_cls/common/intref_sse2_fp_store.htm)

同样适用于所有`double`和整数类型。

因此，如果您不能保证对齐，那么这是最简单的方法。如果可能，理想的解决方案是从一开始就对齐阵列，这样您就可以完全避免这个问题。

未对齐的访问仍然会有性能损失，但它们是不可避免的，除非您采用极其混乱的移位/洗牌技巧（例如`_mm_alignr_epi8()`）。

使用`_mm_loadu_ps`和的代码`_mm_storeu_ps`- 这实际上比 gcc 本身慢 50%

```
for (int j=0;j<8;j++)
{
    float* out = &output[offset+j*4];
    __m128 in = ((__m128*)input)[j]; //this is aligned so no need for _mm_loadu_ps
    __m128 res  = _mm_add_ps(in,_mm_loadu_ps(out)); //add values 
    _mm_storeu_ps(out,res); //store result
} 
```

# c++ - 从 C++ 到 lua 的二维数组

> ID：10291173
> 
> 赞同：0
> 
> 时间：2012-04-24T02:55:26.353
> 
> 标签：c++, arrays, multidimensional-array, lua, luabind

那么，将多维数组从 C++ 传递到 Lua 真的可行吗？

或者我应该把它变成一个普通数组，将它传递给 Lua 并再次将它转换为 2d 数组？

如果可能的话，可以说我有这个

```
function AI(Array)
-- can I just call it like this?
   num= Array[1][2]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:03:54.650

可能像绑定库这样的东西会有所帮助
[http://sourceforge.net/projects/luabind/](http://sourceforge.net/projects/luabind/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:31:14.847

好吧，至少在我看来你不能这样做，所以最好的选择就是像一维数组一样发送它，然后将它转换回 LUA

# scala - 如何使用带有`self`引用的scala trait？

> ID：10291176
> 
> 赞同：28
> 
> 时间：2012-04-24T02:56:12.090
> 
> 标签：scala

我看到一些代码编写特征如下：

```
trait SelfAware { self: Self =>
 ....
}

class Self
val s = new Self with SelfAware // this is ok
println(s.self) // error happened

class X
new X with SelfAware // error happened here 
```

我想知道为什么会发生错误以及如何以这种方式使用特征？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T03:03:31.000

发生错误是因为您已将`this`引用的类型（您已命名`self`）限制为 type `Self`。当您说 时`new Self with SelfAware`，这没关系，因为该对象的类型`Self`与您询问的一样。但是当你说的时候`new X with SelfAware`，没有任何证据表明它`X`是`Self`.

在您的新类型对象中`X with SelfAware`，其`self`成员的类型是什么？好吧，它不是 type `Self`，而是 type `X`。但是您已经定义了特征`SelfAware`，因此它`self`必须是 type `Self`，所以您会收到类型错误。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-04-24T03:09:21.973

我也在这里找到了答案：http: [//markthomas.info/blog/ ?p=92](http://markthomas.info/blog/?p=92)

## 自我类型

Ordered 可以混入任何类；它不依赖于它所混入的类的任何方法或字段。有时，一个 trait 能够使用它所混入的类的字段或方法很有用，这可以通过为 trait 指定一个自身类型来完成。可以为类或特征指定自我类型，如下所示：

```
trait SpellChecker { self =>
  ...
} 
```

在 this trait 的上下文中的 self 将引用 this。别名 this 对于嵌套类或特征很有用，否则很难访问特定的 this。可以扩展语法以指定 this 的下限，完成此操作后，特征或类可以使用此下限类的功能，因此它可以扩展或修改其行为。

```
trait SpellChecker { self: RandomAccessSeq[char] =>
  ...
} 
```

编译器将检查包括 SpellChecker 在内的层次结构中的任何类是否是或扩展了 RandomAccessSeq[char]，因此 SpellChecker 现在可以使用 RandomAccessSeq[char] 的字段或方法

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-24T04:25:59.507

要回答您问题的另一半（为什么会`println(s.self)`产生错误？），那是因为`self`不是`SelfAware`. 但是，它可用于定义此类字段：

```
trait SelfAware { self =>
  val me = self
}

class X
val x = new X with SelfAware
println(s.me) 
```

# c# - 为什么在 List<> 中存在 Enumerable<> 中没有 Find 方法？

> ID：10291182
> 
> 赞同：0
> 
> 时间：2012-04-24T02:56:53.557
> 
> 标签：c#, .net, linq, ienumerable

我想我的问题说明了一切。为什么 Find 方法不存在`Enumerable<>`而存在于`List<>`. 如果他们在那里，它将减少编写大型`LINQ`查询以从中查找内容的负担`Enumerable<>`。我知道我可以使用将 Enumerable 更改为 List ，`.ToList()`但这将是一个 hack。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T02:58:30.163

[Enumerable.FirstOrDefault<TSource> 扩展方法](http://msdn.microsoft.com/en-us/library/bb340482.aspx)与[List<T>.Find 方法](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)完全相同。

> **Enumerable.FirstOrDefault<TSource> 方法**
> 
> 返回序列中满足**条件**的**第一个元素**，如果没有找到这样的元素，则返回**默认值。**
> 
>  *****返回值：*如果源为空或没有元素通过谓词指定的测试，则返回默认值（TSource）；否则，源中的第一个元素通过谓词指定的测试。****

 ****> **List<T>.Find 方法**
> 
> 搜索与指定谓词定义的**条件**匹配的元素，并返回整个 List<T> 中的**第一个匹配项。**
> 
> *返回值：*匹配指定谓词定义的条件的第一个元素，如果找到的话；否则，类型 T的**默认值。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:52:39.290

类包含比接口更多的“辅助函数”是很常见的，原因很简单，将辅助函数添加到类只需将代码和该方法的代码添加到一个地方（有问题的类），同时添加一个辅助函数对接口的函数强制该接口的每个实现都为该函数添加代码。

如果 CLR 的下一个版本可以提供一种接口可以为其成员指定默认实现的方法，这将很有帮助，特别是如果接口的旧版本的实现可以被视为实现新版本，使用任何新版本的默认实现成员。如果这样的事情是合法的，则`IEnumerable<T>`可以添加一个`Count`方法，该方法可以被任何能够确定项目数量而不必迭代它们的实现覆盖，但否则它将使用通过迭代计数的默认方法。如果存在这样的功能，添加喜欢`Find`的成员`IEnumerable<T>`会很有用。不幸的是，我知道没有计划实施这样的功能。****

# python - 如何向 Intersango API 发出请求

> ID：10291186
> 
> 赞同：1
> 
> 时间：2012-04-24T02:57:24.210
> 
> 标签：python, httprequest

我试图弄清楚[Intersango API](https://bitcoinconsultancy.com/wiki/Intersango/API)的正确 URL 格式是什么（文档很少）。我正在用 C# 编写我的客户端，但我正在查看[Python 示例](https://bitcoinconsultancy.com/wiki/Intersango/API/python)，我对实际放置在请求正文中的内容有点困惑：

```
def make_request(self,call_name,params):
    params.append(('api_key',self.api_key)) // <-- How does this get serialized?
    body = urllib.urlencode(params) 

    self.connect()

    try:
        self.connection.putrequest('POST','/api/authenticated/v'+self.version+'/'+call_name+'.php')
        self.connection.putheader('Connection','Keep-Alive')
        self.connection.putheader('Keep-Alive','30')
        self.connection.putheader('Content-type','application/x-www-form-urlencoded')
        self.connection.putheader('Content-length',len(body))
        self.connection.endheaders()

        self.connection.send(body)

        response = self.connection.getresponse()

        return json.load(response)
//... 
```

我无法弄清楚这段代码：`params.append(('api_key',self.api_key))`

它是某种字典，被序列化为 JSON、逗号分隔的东西，还是它究竟是如何被序列化的？当参数被编码并分配给它时，主体会是什么样子？

PS我没有任何东西可以用来运行代码，所以我可以调试它，但我只是希望这对于了解Python的人来说足够简单，并且他们能够告诉我发生了什么行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:11:09.733

`params`是 2 元素列表的列表。该列表看起来像（（`key1, value1), (key2, value2), ...)`

`params.append(('api_key',self.api_key))`将另一个 2 元素列表添加到现有参数列表中。

最后，`urllib.urlencode`获取此列表并将其转换为属性 urlencoded 字符串。在这种情况下，它将返回一个字符串`key1=value1&key2=value2&api_key=23423`。如果您的键或值中有任何特殊字符，urlencode 将对它们进行 %encode。请参阅[urlencode 的文档](http://docs.python.org/library/urllib.html#urllib.urlencode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T04:40:43.997

我试图让 C# 代码工作，但它一直失败并出现异常 {“远程服务器返回错误：(417) 预期失败。”}。我终于找到了问题所在。[你可以在这里](http://haacked.com/archive/2004/05/15/http-web-request-expect-100-continue.aspx)深入了解它

简而言之，让 C# 访问 Intersango API 的方法是添加以下代码：

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

此代码只需要运行一次。这是一个全局设置，因此它会影响您的整个应用程序，因此请注意其他内容可能会因此而中断。

这是一个示例代码：

```
System.Net.ServicePointManager.Expect100Continue = false;
var address = "https://intersango.com/api/authenticated/v0.1/listAccounts.php";
HttpWebRequest request = WebRequest.Create(address) as HttpWebRequest;
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
var postBytes = Encoding.UTF8.GetBytes("api_key=aa75***************fd65785");
request.ContentLength = postBytes.Length;
var dataStream = request.GetRequestStream();
dataStream.Write(postBytes, 0, postBytes.Length);
dataStream.Close();
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T19:59:10.400

小菜一碟，而`params.append(('api_key',self.api_key))` 不仅仅是写：

```
params['api_key']=self.api_key 
```

# r - 在 Windows 中编译 glmnet 失败

> ID：10291189
> 
> 赞同：3
> 
> 时间：2012-04-24T02:58:08.813
> 
> 标签：r, glmnet

由于 R 包 glmnet 没有为 windows 提供二进制文件，所以我必须在我的操作系统 win7 64bit 下编译它。我是如何收到此错误消息的：

```
gfortran -m64 -fdefault-real-8 -ffixed-form  -O2  -mtune=core2 -c  newGLMnet.f90
 -o newGLMnet.o
f951.exe: sorry, unimplemented: 64-bit mode not compiled in
make: *** [newGLMnet.o] Error 1
ERROR: compilation failed for package 'glmnet' 
```

我也尝试在 windows XP 32bit 下编译它，但出现“配置 glmnet 包失败”错误消息。

有人在 Windows 中成功编译 glmnet 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T04:22:08.133

Trevor Hastie 12 小时前在 r-help 上发布了这个：

“我们知道 glmnet_1.7.3 没有通过 windows 并正在调查问题。这与 gcc 编译器在 windows 和 linux/mac 平台上略有不同有关。一旦我们解决了这个问题，我们将向 CRAN 发布新版本”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:59:18.167

在 64 位 Windows 上，而不是默认的 PATH ：

```
C:\Rtools\MinGW\bin 
```

尝试 ：

```
C:\Rtools\gcc-4.6.3\bin 
```

然后当然，停止并启动一个新的 DOS 窗口来选择新的 PATH。

另见：[https ://stackoverflow.com/a/15221883/403310](https://stackoverflow.com/a/15221883/403310)

# git - 如何检测两个 git 存储库之间的冲突。

> ID：10291192
> 
> 赞同：7
> 
> 时间：2012-04-24T02:58:20.250
> 
> 标签：git, pull-request, grit

为了在我的项目中实现类似 github 的 fork/pull request 功能，自动合并功能需要在每次查看 pull request 时检测源/目标存储库之间的冲突。

我想到的一种解决方案是分析“git request-pull”输出。有没有更简单的方法来检测冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:13:40.580

我已经删除了我之前的答案，我不明白这个问题......

现在这是闪亮的新答案：

```
git merge --ff-only <branch> 
```

如果没有冲突，它将进行合并。发生冲突时，它会给您一条信息：`Not possible to fast-forward`. 在这种情况下，控制台返回码 (echo $?) 是 128。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T01:07:32.463

我们创建了一个 git-conflict-detector 来检查最新推送的提交与所有现有分支。

这是一个简单的单一脚本，由 GitHub WebHook URL 发起，甚至知道在检测到冲突时发送 HiChat 通知。

[如您在此处](https://github.com/sortex/git-conflict-detector/blob/master/detect_conflicts.php#L101)`git merge --ff-only <branch>`所见，我们的解决方案基于分析输出

我们已将其开源，因此所有人都可以享受、学习和贡献。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:34:40.783

据我所知，在您实际合并这些分支之前，您无法确定合并是否会产生冲突。

[这已经在：如何在没有实际合并的情况下测试合并](https://stackoverflow.com/questions/7484199/git-merge-test-first)中指出。

因此，要回答您的问题，如果您需要实现这种功能，您很可能应该尝试合并您的源/目标并回滚合并操作（使用`git reset --hard`）。

我从未使用过`git request-pull`，但查看输出，我没有看到任何可以帮助您解决问题的信息。`git diff`使用, `git wtf`,可能会得到相同的结果`git remote show <name>`。

参考：

*   `git wtf`：[https ://github.com/michaelklishin/git-wtf](https://github.com/michaelklishin/git-wtf)
*   `git request-pull`： http: [//progit.org/book/ch5-2.html](http://progit.org/book/ch5-2.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-20T07:41:03.450

最后我编写了自己的函数来检测冲突。

这很简单，只需获取所有差异行，然后比较是否有相同的修改。

# jquery - jQuery ajax 中文兼容性

> ID：10291196
> 
> 赞同：0
> 
> 时间：2012-04-24T02:59:03.750
> 
> 标签：jquery, jquery-ui

我使用 jquery easyui datagrid 列出数据，并用它进行搜索。jquery ajax

```
var username = $('#searchUsername').val();
var firstname = $('#searchFirstname').val();
$('#tt').datagrid({
        url: '/ajax/searchTeacher?username='+username+'&firstname='+firstname,
        title: 'search',
        width: 670,
        height: 'auto',
        fitColumns: true,
        rownumbers:true,
        singleSelect: true,
        columns:[[
                {field:'username',title:'工号',width:150},
                {field:'firstname',title:'姓名',width:150},
                {field:'academy',title:'学院',width:200},
                {field:'do',title:'操作',width:30,align:'left'}
            ]]
    }); 
```

但是 IE 和 FF 之间存在兼容性。
IE中的url：
/ajax/searchTeacher?username=&firstname=李<br> FF中的url：
/ajax/searchTeacher?username=&firstname=%E6%9D%8E

它是在 FF.Apache 中完成的，使用 utf8 作为默认字符集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:15:51.653

我建议你在调用 ajax 方法之前先使用 encodeURI/encodeURIComponent

例如：

```
encodeURI("/ajax/searchTeacher?username=&firstname=李") 
```

该值将是：“/ajax/searchTeacher?username=&firstname=%E6%9D%8E”

# linux - linux内核模块中的内存泄漏检测工具

> ID：10291201
> 
> 赞同：6
> 
> 时间：2012-04-24T03:00:15.993
> 
> 标签：linux, linux-kernel

我正在编写驱动程序，我想知道有助于扫描/分析 Linux 内核模块中的内存泄漏的工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:18:48.827

我在这里使用了[KEDR 框架](https://github.com/euspectre/kedr/wiki)并取得了一些成功。

还有[KMEMCHECK](http://kerneltrap.org/Linux/Debugging_With_kmemcheck)，但我没有使用它，所以我不能保证它的易用性。

# emacs - 自定义 emacs sql-mode 以执行 sql-blocks

> ID：10291204
> 
> 赞同：2
> 
> 时间：2012-04-24T03:00:37.057
> 
> 标签：emacs, sql-mode

EMACS 中的 REPL 确实是我非常喜欢的一个很棒的功能。但是在sql-mode下，我遇到了很多问题。

像：

1.  我想使用 db3（可以识别别名的 db2 包装器），我可以启动一个 db3 shell 缓冲区并让 sql-mode 将其识别为默认评估缓冲区吗？

2.  这实际上更重要，当我将一个区域发送到 eval 缓冲区时，eval 缓冲区将通过换行符执行该区域，这使我的 sql 代码几乎无法执行。那么我将如何自定义 sql-mode，以便它可以按块而不是 line-break 执行？

==========我自己找到了解决方案==================

对于问题 1：自定义 sql-db2 肯定更困难，我仍在挖掘，这涉及更多工作，例如为 emacs 编写插件 ==> 临时解决方案是我仍然可以使用别名连接到 db2

对于问题 2：事实证明 db2 确实有一个选项 -t 来设置终止字符，这完美地解决了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T01:55:49.503

==========我自己找到了解决方案==================

对于问题 1：自定义 sql-db2 肯定更困难，我仍在挖掘，这涉及更多工作，例如为 emacs 编写插件 ==> 临时解决方案是我仍然可以使用别名连接到 db2

对于问题 2：事实证明 db2 确实有一个选项 -t 来设置终止字符，这完美地解决了我的问题。

# python - 使用不带括号的 python 写入 CSV

> ID：10291205
> 
> 赞同：0
> 
> 时间：2012-04-24T03:01:00.683
> 
> 标签：python, csv, brackets

我正在尝试以这种格式将以下信息写入 csv 文件：

最小，-40

但是，我的输出如下所示，括号和引号围绕 -40：

Tmin, ['-40']

我的代码如下。基本上，我在 csv 文件中搜索特定短语，在本例中为“Tmin”，并读取右侧的条目 1 单元格。然后我想将“Tmin”和直接读取的值写入第二个 csv 文件。

我已经搜索了一种删除引号和括号的方法，但无法使其正常工作。我对python很陌生，所以任何帮助都会有所帮助。谢谢。

```
import csv
fileInput = "Input.csv"
fileOutput = "output.csv"
Name_Column = 0
Value_Column = 1

with open(fileInput, 'r') as file:
    reader = csv.reader(file)
    Tmin = [line[Value_Column] for line in reader if line[Name_Column] == 'Tmin']
    print "Tmin=", Tmin    #print to screen to check value read

with open (fileOutput,'w') as file:
   writer = csv.writer(file)
   print writer.writerow(['Tmin',Tmin]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:07:00.047

python 只是将 Tmin 打印为列表，您可以将 CSV 行打印为字符串，也可以仅打印行中的第一个元素。

尝试

```
print "Tmin=", ", ".join(Tmin) 
```

或者

```
print "Tmin=", Tmin[0] 
```

如果你想通过 csv writer 输出 csv，你需要一个列表，而不是列表中的列表：

尝试

```
writer.writerow(['Tmin']+Tmin) #note this is already printing the result to a file so dont "print" the return value 
```

# batch-file - 批量处理，windows xp 文字大小

> ID：10291208
> 
> 赞同：0
> 
> 时间：2012-04-24T03:01:38.227
> 
> 标签：batch-file

我不小心在学校玩了一些代码，然后我运行了一个代码，现在一切都塞满了。帮助。（运行Windows XP顺便说一句）

这是代码

```
@echo off
::turn off wallpaper
SET KEY="HKEY_CURRENT_USER\Control Panel\Desktop"
REG ADD %KEY% /V Wallpaper /t REG_SZ /d "(None)" /f

::Windows classic theme
set KEY="HKEY_CURRENT_USER\Software\Microsof…
REG ADD %KEY% /v ThemeActive /t REG_SZ /d "0" /f

::massive size
SET KEY="HKEY_CURRENT_USER\Control Panel\Desktop\WindowMetrics"
REG ADD %KEY% /v AppliedDPI /t REG_DWORD /d "0x120" /f

SET KEY="HKEY_CURRENT_USER\Control Panel\Mouse"
REG ADD %KEY% /v SwapMouseButtons /t REG_SZ /d "1" /f
shutdown -r
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:15:21.867

尝试这个：

```
SET KEY="HKEY_CURRENT_USER\Control Panel\Desktop\WindowMetrics"
REG ADD %KEY% /v AppliedDPI /t REG_DWORD /d "0x96" /f 
```

# javascript - Jquery GET 函数不执行

> ID：10291210
> 
> 赞同：0
> 
> 时间：2012-04-24T03:01:47.860
> 
> 标签：javascript, jquery, telerik, telerik-grid

jQuery GET 函数不执行。

我正在使用 Telerik Data 网格，它在选择一行时执行以下脚本

```
<script type="text/javascript">
function onRowSelected(e) {
    IPAddressId = e.row.cells[0].innerHTML;
    var dialogDiv = $('#result');
    var viewUrl = '/IPAddresses/Edit/' + IPAddressId;
    $.get(viewUrl, function (data) {
        alert(viewUrl);
    });
};
</script> 
```

我在 .get 函数中有用于测试的警报。我实际上还有其他代码要放在那里。

如果我将 alert(viewUrl) 放在 $.get 函数上方，则会显示警报，因为它显示在警报上方，但不会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:10:41.173

您的 $.get 是正确的。

您可能会收到 500 错误，并且您没有指定要调用的错误函数，因此您永远看不到它。打开您的控制台（Firebug、Chrome 开发人员工具等）并转到“网络面板”。它说什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:12:23.987

是`function(data){ alert( viewUrl ) }`一个回调函数。当ajax请求获得服务器正确响应时执行。

所以你应该调试这个，使用firefox的firebug扩展，或者使用chrome开发工具。观察 newwork 面板，查找这个请求，它是否得到了 http 代码“200”的响应？

# objective-c - 判断 NSManagedObject 相关属性对象是否存在的最佳方式

> ID：10291212
> 
> 赞同：0
> 
> 时间：2012-04-24T03:02:22.097
> 
> 标签：objective-c, cocoa, core-data

我得到了一个`log`由 检索的对象`NSFetchedResultsController`，它有一个可选属性，它是一个`slide`对象。它目前有故障。因此，如果我 log `log.slide`，它将返回一个错误对象。如何检查日志是否实际上附加了一个幻灯片对象？我希望能够使用`if(log.slide){...}`

我尝试将 NSFetchRequest 设置为 `[request setReturnsObjectsAsFaults:NO];`之前将其设置为`NSFetchedResultsController`. 但它仍然返回有故障的对象。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:06:40.477

当您访问一个错误时，它会自动完成，因此您可以简单地使用您的示例`if (log.slide) {...}`，它会像您期望的那样工作，并在必要时完成错误。

# python - 如何在生成器函数对象实例中存储和检索元信息？

> ID：10291213
> 
> 赞同：0
> 
> 时间：2012-04-24T03:02:27.383
> 
> 标签：python

有没有一种方法可以将更多信息返回给实例化生成器函数的调用者，而不仅仅是函数实例本身？

例如，

```
def genFn(a, b, c):
    # some initialisation / pre-computation
    startPt = fn(a, b, c)
    data = (yield None)
    while True:
        # perform some computation
        data = (yield result)

f = genFn(5, 6, 7)
start = f.get("startPt") # this line syntax is wrong - just to show what I want
f.send(None)
for data in dataseries[startPt:]:
    k = f.send(data)
    ... 
```

根据传入的参数 (a, b, c)，该函数具有计算所需最早数据的逻辑。我希望能够以某种方式将这些信息“它需要的最早数据”返回给调用者。虽然我当然可以让调用者计算并获得相同的信息 - 这是重复的工作并且它并不优雅，因为我想将复杂性封装在生成器函数中。

谢谢

吨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:19:36.877

您可以将其作为第一次`send`调用的当前未使用的返回值返回。

```
def genFn(a, b, c):
    # some initialisation / pre-computation
    startPt = fn(a, b, c)
    data = (yield startPt)
    while True:
        # perform some computation
        data = (yield result)

f = genFn(5, 6, 7)
startPt = f.send(None)  # first yield returns the start point
for data in dataseries[startPt:]:
    k = f.send(data) 
```

顺便说一句，`.send(None)`与 相同`.next()`。

或者您可以使用一个类并将生成器用作其方法之一。预计算将在其中完成，`__init__`并且可以通过实例属性访问数据。

```
class GenCl(object):
    def __init__(self, a, b, c):
        self.startPt = fn(a, b, c)

    def gen(self):
        startPt = self.startPt  # get the startPt calculated in __init__
        data = (yield None)
        while True:
            # perform some computation
            data = (yield result)

o = genCl(5, 6, 7)
startPt = o.startPt
f = o.gen()  # create the generator object
f.send(None)
for data in dataseries[startPt:]:
    k = f.send(data) 
```

还有一个想法是使用闭包。函数调用将返回生成器和起点，例如在元组中。

```
def genFn(a, b, c):
    # some initialisation / pre-computation
    startPt = fn(a, b, c)
    def gen():  # actual generator function
        data = (yield None)
        while True:
            # perform some computation
            data = (yield result)
    return gen(), startPt  # returns generator and startPt

f, startPt = genFn(5, 6, 7)
f.send(None)
for data in dataseries[startPt:]:
    k = f.send(data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:12:21.417

您可以创建一个可以发送到生成器的特殊类，以使其返回您的特殊值。

```
class GetStartPt:
    pass

def genFn(a, b, c):
    startPt = fn(a, b, c)
    data = (yield None)
    while True:
        if data is GetStartPt:
            data = (yield startPt)
            continue
        # compute here
        data = (yield result)

f = genFn(5, 6, 7)
f.send(GetStartPt) 
```

但是，您最好为此编写一个包装类：

```
class GenClass(object):
     def __init__(self, a, b, c):
         self.startPt = fn(a, b, c)
         def generator(startPt, a, b c):
             data = (yield None)
                 while True:
                 # compute here
             data = (yield result)
         self._generator = generator(self.startPt, a, b, c)
     def __iter__(self):
         return self._generator
     def next(self):
         return self._generator.next()
     def send(self, value):
         return self.generator.send(value) 
```

# c# - Javascript 确认框块背景

> ID：10291216
> 
> 赞同：0
> 
> 时间：2012-04-24T03:02:43.647
> 
> 标签：c#, javascript, asp.net

我在 GridView 中有一个按钮，单击它时会触发

```
protected void GridView_RowCommand(object sender, GridViewCommandEventArgs e) 
```

事件。在那里我有一些逻辑，最后我正在注册一些生成弹出窗口的 javascript。我遇到的问题是确认弹出时出现。它在背景上显示一个空白屏幕，当我单击取消时它会再次显示它，否则它会导航到另一个页面......但是当框向上时，背景是白色的。

我需要让它像“警报”弹出窗口一样显示，仍然在后台显示网站。请注意，我只能使用这些弹出窗口来完成这项工作，因为它们在整个网站中都使用过（“不确认”）。这是我必须添加的第一个确认框，但其他页面上有很多警报。所以不想改变它们，因为它会做太多的工作（150 多页的网站）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:10:45.490

在警告框出现之前，页面似乎没有机会呈现。将显示 JavaScript 警报的代码连接到 body.onload 事件；这将在显示警报之前等待页面完成其初始加载。

```
 Page.ClientScript.RegisterClientScriptBlock(
                this.GetType(), 
                "key",
                @"
function Redirect() {
  location.href = 'shoppingCart.aspx';
}

function showAlert() {
  if (confirm('***Message truncated***.') == true){
    Redirect();
  };
}

// If you're using JQuery, you could do something like this, otherwise you
// would need to add the function call to the HTML body tag's onload attribute.
// There are other alternatives, see:
// http://stackoverflow.com/questions/1235985/attach-a-body-onload-event-with-js
$(document).ready(function() {
  showAlert();
});

", true); 
```

# node.js - 在模块之间传递 Socket.IO 套接字的正确方法是什么？

> ID：10291218
> 
> 赞同：4
> 
> 时间：2012-04-24T03:03:28.333
> 
> 标签：node.js, socket.io

目前我有一个 getter/setter 套接字模块，如下所示

```
var socket;

module.exports.getSocket = getSocket;
module.exports.setSocket = setSocket;

function getSocket() {
    return socket;
}
function setSocket(sock) {
    if (undefined == socket) socket = sock;
} 
```

在 app.js 我设置如下

```
var sio = require('./lib/socket');
var io = require('socket.io').listen(app);
io.sockets.on('connection', function (socket) {
    sio.setSocket(socket);
}); 
```

在我的模块中，我使用如下

```
sio = require('./lib/socket');
socket.getSocket().broadcast.emit(...); 
```

似乎有点做作有没有更好的方法来做到这一点？

编辑：我想要一个通用的解决方案来解决触发不是由客户端套接字发起的消息的问题。例如，假设我从外部来源检索股票价格并希望在价格更新时触发一个事件。由于它不是客户端启动的，我如何才能访问套接字？或者，假设我希望触发套接字消息以响应 POST 请求。我再次不确定如何访问套接字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T06:30:37.323

有许多共享套接字的选项，但它有助于更​​多地了解您的模块将要做什么。在不了解更多信息的情况下，我建议您通过正在调用的函数将套接字传递给模块，而不是尝试使用某些共享状态。

如果您需要使用共享状态（您试图向特定用户发送消息，而不是套接字消息），那么我建议您坚持使用已建立的会话框架并保留套接字 id。您只需使用 id 即可获得正确的套接字。

请参阅此答案以了解如何将 socket.io 与会话一起使用：[socket.io 和会话？](https://stackoverflow.com/questions/4641053/socket-io-and-session)

添加更多细节，我会修改我的答案。

**更新**

如果您只是想向所有连接的人广播，则不需要套接字句柄。从任何引用 socket.io 的模块中，您都可以调用`io.sockets.emit('stuff')`.

# python - 散点图的轴限制不在 matplotlib 中

> ID：10291221
> 
> 赞同：19
> 
> 时间：2012-04-24T03:03:56.947
> 
> 标签：python, matplotlib

我正在尝试使用 matplotlib 将散点图叠加到等高线图上，其中包含

```
 plt.contourf(X, Y, XYprof.T, self.nLevels, extent=extentYPY, \
                 origin = 'lower')
    if self.doScatter == True and len(xyScatter['y']) != 0:
        plt.scatter(xyScatter['x'], xyScatter['y'], \
                    s=dSize, c=myColor, marker='.', edgecolor='none')
    plt.xlim(-xLimHist,  xLimHist)
    plt.ylim(-yLimHist, yLimHist)
    plt.xlabel(r'$x$')
    plt.ylabel(r'$y$') 
```

最终发生的是结果图扩展到包括所有散点，这可能超出等高线图的限制。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-24T03:45:13.937

我使用以下示例来尝试复制您的问题。如果保留默认值，x 和 y 的范围是 -3 到 3。我输入了 xlim 和 ylim，所以两者的范围都是 -2 到 2。它有效。

```
 import numpy as np
   import matplotlib.pyplot as plt
   from pylab import *

   # the random data
   x = np.random.randn(1000)
   y = np.random.randn(1000)

   fig = plt.figure(1, figsize=(5.5,5.5))

   X, Y = meshgrid(x, y)
   Z1 = bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
   Z2 = bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
   Z = 10 * (Z1 - Z2)

   origin = 'lower'
   CS = contourf(x, y, Z, 10, # [-1, -0.1, 0, 0.1],
                 cmap=cm.bone,
                 origin=origin)

   title('Nonsense')
   xlabel('x-stuff')
   ylabel('y-stuff')

   # the scatter plot:
   axScatter = plt.subplot(111)
   axScatter.scatter(x, y)

   # set axes range
   plt.xlim(-2, 2)
   plt.ylim(-2, 2)

   show() 
```

# c - glibc 检测到 *** free(): 无效指针

> ID：10291222
> 
> 赞同：1
> 
> 时间：2012-04-24T03:04:22.900
> 
> 标签：c, pointers, free, glibc

这段代码有以下问题。有人可以帮忙吗？

注意： QueueItem 是在不同的线程上创建的。

```
WorkItem * Dequeue(Queue ** Q)    
{    
    if(QueueIsEmpty(*Q)) return NULL;

    QueueItem * tmp = (*Q)->Head;
    (*Q)->Head = ((*Q)->Head)->NextItem;
    WorkItem * retval = tmp->workItem;
    free(tmp); //Generates  glibc detected *** free(): invalid pointer
    return retval;
} 
```

编辑当多个线程正在运行时，此功能在访问时受到保护。

```
WorkItem * DequeueSynchronous(Queue ** Q)
{
    WorkItem * retval;
    pthread_mutex_lock((*Q)->QueMutex);
    retval = Dequeue (Q);
    pthread_mutex_unlock((*Q)->QueMutex);
    return retval;
} 
```

(*Q)->头部；分配给我的malloc。

```
Queue * Queue_Init(pthread_mutex_t * mutex)
{
    Queue * retval = (Queue *)malloc(sizeof(Queue *));
    retval->Head = retval->Tail =NULL;
    retval->QueMutex = mutex;
    return retval;
}

void Enqueue (Queue * Q, WorkItem * WI)
{

   if(!Q)return;
   QueueItem * QI = (QueueItem *) malloc(sizeof(QueueItem *));
   QI->workItem = WI;
   QI->NextItem = NULL;

   if(QueueIsEmpty(Q))
   {
       Q->Head = Q->Tail = QI;
       return;
   }

   Q->Tail->NextItem = QI;
   Q->Tail = QI;
}

void EnqueueSynchronous (Queue * Q, WorkItem * WI)
{

   pthread_mutex_lock(Q->QueMutex);
   Enqueue (Q, WI);
   pthread_mutex_unlock(Q->QueMutex);
} 
```

还要感谢您的输入，我会看看 valgrind。

编辑 2

```
typedef struct {
    char ** FileNames;
    int  ** Results;
    int NumOfItems;
}WorkItem;

typedef struct QI{
    WorkItem * workItem;
    struct QI * NextItem;
}QueueItem;

typedef struct {
    QueueItem * Head, * Tail;
    pthread_mutex_t * QueMutex;
}Queue; 
```

Dequeue 被调用 -`Dequeue(&WorkQue)` 所有调用的线程`Dequeue`都`&WorkQue`作为其参数的一部分给出；

```
typedef struct{
    int ThreadID;
    WorkItem * workItem;
    char ** keywordsArray;
    int nKeywords;
    Queue ** WorkQueue, ** WorkCompletedQ;   
}ThreadArgs;

 pthread_t threads[NTHREADS];
ThreadArgs threadArgs[NTHREADS];

for(i=0;i<NTHREADS;i++)
{
    threadArgs[i].ThreadID=i;
    threadArgs[i].workItem = Dequeue(&WorkQue);
    threadArgs[i].WorkQueue = &WorkQue;
    threadArgs[i].WorkCompletedQ = &WorkCompletedQ;
    threadArgs[i].nKeywords=_kwlist->length;
    threadArgs[i].keywordsArray = ListToArray(*_kwlist);
}    

for(i=0;i<NTHREADS;i++)
{
    pthread_create(&threads[i], NULL, WorkerThread,(void *)&(threadArgs[i]));
} 
```

每个线程调用 dequeue 使用`myWork = DequeueSynchronous(myThreadArgs->WorkQueue);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:10:55.880

查看您更新的代码，我认为您由于以下几行而出现内存损坏：

```
Queue * retval = (Queue *)malloc(sizeof(Queue *)); 
```

请注意，您只为指向 Queue 的指针分配了足够的空间 - 您应该改为编写：

```
Queue * retval = (Queue *)malloc(sizeof(Queue)); // version one 
```

或更好：

```
Queue * retval = (Queue *)malloc(sizeof(*retval)); // version two 
```

第二个版本更好，因为它对`retval`.

这两行都说“为队列分配足够的空间，并将队列指针设置`retval`为指向它”。**您的上一行说“为队列指针**分配足够的空间，并将队列指针设置`retval`为指向它”。旧版本导致分配不足（因为结构几乎肯定比指针大）。

然后，当您分配超出实际分配空间的 Queue 结构部分时，您会标记内存的其他部分。我怀疑这会导致您标记一些`malloc()`内部控制数据，这就是后来导致无效免费的原因。您将需要更改所有`malloc()`调用 malloc 结构的大小而不是指针的大小。

请注意，您也不应该[转换 malloc 的结果](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)。在我看来，你的最终`malloc()`陈述应该是这样的：

```
Queue * retval = malloc(sizeof(*retval)); 
```

如果这不能解决问题，您可以编辑您的问题以包括：

1.  Queue结构的定义
2.  你是怎么打电话`DequeueSynchronous`的（或者，`*Q`变成的地方`**Q`）

* * *

不相关地，请注意，您还有一个错误，即当列表在出队后变为空时，您不会清除尾部。我怀疑你可能需要写：

```
(*Q)->Head = ((*Q)->Head)->NextItem;
if ((*Q)->Head == NULL) (*Q)->Tail = NULL; 
```

如果队列中现在没有头部，这将清除尾部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T03:08:52.143

据我们所知，这在本质上没有任何问题。但问题一定是`tmp`（换句话说，`(*Q)->Head`在进入函数时）不是指向由 . 分配的块的指针`malloc()`。如果它是以任何其他方式分配的——或者如果它是指向块中间而不是开始的指针——那么你不能用`free()`.

它也有可能已经被释放了；也许您的多个线程导致它被多次释放。

# image - 如何使用 adobe flash builder 4.6 访问图像高度和宽度、图像分辨率、文件大小？

> ID：10291224
> 
> 赞同：0
> 
> 时间：2012-04-24T03:04:35.700
> 
> 标签：image, file, air, flex4.5, flash-builder4.5

我的桌面 AIR 应用程序有一个拖放图像的区域。

假定图像来自运行应用程序的本地磁盘。

拖放的图像将被压缩成一个 zip 文件，然后上传到服务器。

图像通常首先存储到 ArrayCollection 中。

我想迭代地遍历每个文件并确定以下内容。

**高度和宽度（以像素为单位），分辨率（以 dpi 为单位）**

如果任何文件不符合某些预定标准，代码应提示错误消息并停止继续压缩。

如果将文件压缩成 zip 文件，我会将新的压缩文件存储在 applicationStorageDirectory 中等待上传。

**之后我想确定这个新生成的 zip 文件的大小（以 mB 为单位）**

如何使用 Adob​​e Flash Builder 4.6 访问上述 4 个统计数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:34:29.160

您可以解析出[JPG](http://www.anttikupila.com/flash/getting-jpg-dimensions-with-as3-without-loading-the-entire-file/)和[PNG](http://richardjdare.com/blog/2010/10/getting-the-size-of-a-png-without-loading-it/)的标头信息（包括高度、宽度，对于某些 JPG，还包括 DPI），而无需加载整个文件。我还没有完全评估链接中的方法，但是使用 a`FileStream`获取前几个字节然后将它们解析为标头的一般方法将适用于这些（和许多其他）格式。

创建 zip 文件后，[`FileReference.size`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/FileReference.html#size)将为您提供文件大小。（`File`继承此属性）。

# java - 清理一个从网页中不断构建字符串的程序

> ID：10291226
> 
> 赞同：0
> 
> 时间：2012-04-24T03:04:42.773
> 
> 标签：java, performance, memory-leaks, garbage-collection

我正在寻找清理或提高我的程序的效率，但我不确定如何。这是我的程序的作用：

我拿一个网页，把它变成一个字符串，扫描它的关键字，如果我没有找到关键字，我会重建字符串来处理任何可能的页面编辑（有效地刷新网页），这个程序永远持续下去. 如果网页不可用，它只会再次运行主程序。这是一个监控程序。

我可以想象这个常量字符串会随着时间的推移消耗内存，类似于内存泄漏。无论如何巧妙地解决这个问题？

另外，我可以在java程序中向windows命令提示符打印一条消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:15:45.793

只要您的代码释放对它持有的对象的引用，垃圾收集器就会为您释放内存。你不必做任何其他事情。

要打印到控制台，就这么简单。

```
System.out.println("Hello World"); 
```

或者

```
System.out.printf("Hello %s%n", "World"); 
```

# java - AKKA java 示例 akka-sample-remote conf

> ID：10291228
> 
> 赞同：0
> 
> 时间：2012-04-24T03:04:55.133
> 
> 标签：java, akka

我对 Akka 很陌生，但到目前为止我真的很喜欢它。我已经能够在本地运行一个小型应用程序，现在我想测试远程部署和使用远程参与者。

为此，我查看并编译了 Java Akka 2.0.1 akka-remote-sample 示例，位于 ..

[https://github.com/akka/akka/tree/master/akka-samples/akka-sample-remote](https://github.com/akka/akka/tree/master/akka-samples/akka-sample-remote)

但是当我尝试运行编译的示例时..

java -classpath `pwd`/src/main/resources:target/akka-remote-1.1.jar sample.remote.calculator.java.JCalcApp 我收到有关 application.conf 的错误

我已经多次尝试调整示例 application.conf 文件，但最接近成功运行远程示例应用程序的是..

线程“main”中的异常 akka.remote.RemoteTransportException：无法加载远程传输层 akka.remote.netty.NettyRemoteTransport

我正在使用 Maven shade 插件将我的所有依赖项包含在 jar 中。这适用于本地应用程序。

有人可以看看我的conf文件，让我知道我需要改变什么。

谢谢你 ！！

这是我的 application.conf 文件...

```
//#calculator
calculator {
include "common"

 akka {
    backoff-timeout = 0ms
    remote.backoff-timeout = 0ms
    remote.untrusted-mode = off
    remote.remote-daemon-ack-timeout = 30s
    remote.transport = "akka.remote.netty.NettyRemoteTransport"
    remote.log-received-messages = on
    remote.log-sent-messages = on
    remote.netty.port = 2552
  }
}
//#calculator

//#remotelookup
remotelookup {
  include "common"

  akka {
    backoff-timeout = 0ms
    remote.backoff-timeout = 0ms
    remote.untrusted-mode = off
    remote.remote-daemon-ack-timeout = 30s
    remote.log-received-messages = on
    remote.log-sent-messages = on
    remote.transport = "akka.remote.netty.NettyRemoteTransport"
    remote.netty.port = 2553
  }
}
//#remotelookup

//#remotecreation
remotecreation {
  include "common"

  akka {
    actor {
      deployment {
        /advancedCalculator {
          remote = "akka://CalculatorApplication@127.0.0.1:2552"
        }
      }
    }
    backoff-timeout = 0ms
    remote.untrusted-mode = off
    remote.remote-daemon-ack-timeout = 30s
    remote.log-received-messages = on
    remote.log-sent-messages = on
    remote.transport = "akka.remote.netty.NettyRemoteTransport"
    remote.netty.port = 2554
  }
}
//#remotecreation 
```

和 common.conf ...

```
akka {

  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }

  remote {
    netty {
      hostname = "127.0.0.1"
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:29:43.077

好的，想通了。使用此 application.conf，远程示例将起作用。

**注意**：还要确保在类路径中包含 application.conf 的路径。

```
//#calculator
calculator {
  include "common"

  akka {
    remote.netty.max-total-memory-size = 0b
    remote.netty.max-channel-memory-size = 0b
    remote.netty.execution-pool-size = 4
    remote.netty.execution-pool-keepalive = 60s
    remote.netty.backlog = 4096
    remote.netty.connection-timeout = 120s
    remote.netty.outbound-local-address = "auto"
    remote.netty.message-frame-size = 1 MiB
    remote.netty.reconnect-delay = 5s
    remote.netty.all-timeout = 0s
    remote.netty.write-timeout = 0s
    remote.netty.read-timeout = 0s
    remote.netty.reconnection-time-window = 600s
    remote.netty.backoff-timeout = 0ms
    remote.netty.secure-cookie = ""
    remote.netty.require-cookie = off
    remote.netty.use-passive-connections = on
    remote.backoff-timeout = 0ms
    remote.untrusted-mode = off
    remote.remote-daemon-ack-timeout = 30s
    remote.transport = "akka.remote.netty.NettyRemoteTransport"
    remote.log-received-messages = on
    remote.log-sent-messages = on
    remote.netty.port = 2552
  }
}
//#calculator

//#remotelookup
remotelookup {
  include "common"

  akka {
    remote.netty.max-total-memory-size = 0b
    remote.netty.max-channel-memory-size = 0b
    remote.netty.execution-pool-size = 4
    remote.netty.execution-pool-keepalive = 60s
    remote.netty.backlog = 4096
    remote.netty.connection-timeout = 120s
    remote.netty.outbound-local-address = "auto"
    remote.netty.message-frame-size = 1 MiB
    remote.netty.reconnect-delay = 5s
    remote.netty.all-timeout = 0s
    remote.netty.write-timeout = 0s
    remote.netty.read-timeout = 0s
    remote.netty.reconnection-time-window = 600s
    remote.netty.backoff-timeout = 0ms
    remote.netty.secure-cookie = ""
    remote.netty.require-cookie = off
    remote.netty.use-passive-connections = on
    remote.backoff-timeout = 0ms
    remote.untrusted-mode = off
    remote.remote-daemon-ack-timeout = 30s
    remote.log-received-messages = on
    remote.log-sent-messages = on
    remote.transport = "akka.remote.netty.NettyRemoteTransport"
    remote.netty.port = 2553
  }
}
//#remotelookup

//#remotecreation
remotecreation {
  include "common"

  akka {
    actor {
      deployment {
        /advancedCalculator {
          remote = "akka://CalculatorApplication@127.0.0.1:2552"
        }
      }
    }
    remote.netty.max-total-memory-size = 0b
    remote.netty.max-channel-memory-size = 0b
    remote.netty.execution-pool-size = 4
    remote.netty.execution-pool-keepalive = 60s
    remote.netty.backlog = 4096
    remote.netty.connection-timeout = 120s
    remote.netty.outbound-local-address = "auto"
    remote.netty.message-frame-size = 1 MiB
    remote.netty.reconnect-delay = 5s
    remote.netty.all-timeout = 0s
    remote.netty.write-timeout = 0s
    remote.netty.read-timeout = 0s
    remote.netty.reconnection-time-window = 600s
    remote.netty.backoff-timeout = 0ms
    remote.netty.secure-cookie = ""
    remote.netty.require-cookie = off
    remote.netty.use-passive-connections = on
    remote.untrusted-mode = off
    remote.remote-daemon-ack-timeout = 30s
    remote.log-received-messages = on
    remote.log-sent-messages = on
    remote.transport = "akka.remote.netty.NettyRemoteTransport"
    remote.netty.port = 2554
  }
}
//#remotecreation 
```

# google-maps - 谷歌卫星照片的规模有多准确？

> ID：10291233
> 
> 赞同：2
> 
> 时间：2012-04-24T03:06:28.707
> 
> 标签：google-maps

给定特定的缩放级别，谷歌地图中卫星视图提供的比例有多准确？

可以用它来准确确定图片中给定建筑物的平方英尺吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:30:51.317

图像非常准确，在最精细的缩放级别（19 或 20）下，您将能够非常精确地执行面积计算。谷歌地图中的位置信息肯定比尝试使用手持 GPS 设备获取读数更准确（有一些应用程序可以让您在周边设置航路点，然后根据这些航路点计算内部区域）。

这是一个相对简单的实用程序来证明这一点：

[http://www.daftlogic.com/projects-google-maps-area-calculator-tool.htm](http://www.daftlogic.com/projects-google-maps-area-calculator-tool.htm)

但是，如果您尝试使用图像计算平方英尺，那么一个问题是确定故事的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T14:16:43.280

不确定准确性。在 200 英尺的缩放级别上，我将比例叠加在休斯顿的莱斯体育场上，它显示的比赛场地略长 200 英尺，宽 50 米。这意味着宽度大约是正确的，但长度却相差甚远，因为标准足球场是 300 英尺长。可能跟照片的角度有关。如果卫星直接在头顶，它可能更准确。只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T17:23:45.917

放大和缩小时图形比例不一致。我将两个缩放图像放入 CAD 程序中，并通过测量图形比例来调整图像大小。我有两张不同大小的地图。

# asp.net-mvc - 在新项目中分离控制器？这是一个好的设计吗？

> ID：10291236
> 
> 赞同：3
> 
> 时间：2012-04-24T03:06:58.823
> 
> 标签：asp.net-mvc, controller

我的同事告诉我将我的控制器分开在一个单独的项目中，以使单元测试尽可能容易，他还告诉我为控制器项目和测试项目创建一个解决方案，以避免在进行单元测试时加载整个应用程序。在新项目中分离控制器是一种好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:31:25.317

从我的角度来看，让你将控制器移出一个单独的项目有两件事要考虑，如果你这样做，那么它会迫使你思考如何解决低耦合问题，并且可以更容易地测试低耦合类比紧耦合类。

另一方面，将控制器与视图放在同一个项目中是合乎逻辑的，因为控制器通常知道视图。

如果您考虑可重用性，这里可能存在争议，因为控制器通常是“胶水”组件，这意味着它们中有很多布线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:28:33.923

在我看来，您应该始终至少将控制器与视图项目（通常是我的 Web 项目）分开，因为这个想法是控制器应该能够与任何视图一起使用（也许稍后您决定将它们用于例如 Windows 窗体项目）。它也使命名空间更加干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:30:40.503

乍一看，这似乎是个好主意。在中间创建一个表示层并保持您的 MVC 项目仅包含视图，使其真正成为一个 UI 项目。另一方面，您可能会失去对视图的工具支持。由于您必须忽略所有警告，因此您必须确保所有视图都存在，并且对您的对象进行了强类型化。

我不明白在您的测试套件中引用您的 MVC 项目的担忧，因为无论如何您都可能会引入 MVC 命名空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T03:24:06.627

我不确定这个问题是否有一个简单的是或否答案。我认为您的项目必须非常非常大才能对您的单元测试产生影响。我*个人的意见*是将控制器与视图和视图模型一起留在 Web 项目中。但是，我喜欢将模型移到单独的项目中。我这样做的原因与更简单的单元测试关系不大，而是在其他应用程序中重用数据访问（模型）。

# javascript - 必须为内在事件指定默认脚本语言

> ID：10291243
> 
> 赞同：0
> 
> 时间：2012-04-24T03:07:28.853
> 
> 标签：javascript, html, css, accessibility, wcag

我正在通过验证器工具检查我的网站以获取可访问性。我有以下错误

> 使用样式属性时必须指定默认样式表语言：
> 
> 必须为内在事件指定默认脚本语言：

我已经指定了语言，但没有在元标记中。我在我的网站中指定它们的方式是：

```
<script type="text/javascript" src='javascript_code.js'></script>
<link href="style.css" rel="stylesheet" type="text/css" /> 
```

找到我网站的标题。由于这是对项目的检查，我将被标记为我的网站至少应符合 A 级 WCAG。我真的必须修复这些错误吗？或者这只是验证器的问题，因为它可能没有为此检查其他标签？任何的想法？谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:23:28.390

是否指定[默认脚本语言](http://www.w3.org/TR/html4/interact/scripts.html#h-18.2.2.1)在浏览器中的实际后果为零（除非您在 IE 中将 javascript 与 VB 混合使用，这种情况极为罕见，或者其他一些更不常见的主机和语言），但要让验证器满意：

```
<META http-equiv="Content-Script-Type" content="text/javascript"> 
```

应该做的工作。

请注意，[text/javascript](http://www.rfc-editor.org/rfc/rfc4329.txt)类型已过时。您可以尝试“application/javascript”或“application/ecmascript”，但不能在脚本元素中尝试，因为某些浏览器会忽略该脚本，因此请使用“text/javascript”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:55:34.617

当指定内部事件（onclick、onmouseover 等）时，应使用 Content-Script-Type HTTP 标头或标记指定默认脚本语言。

见[http://www.w3.org/TR/html401/interact/scripts.html#h-18.2.2.1](http://www.w3.org/TR/html401/interact/scripts.html#h-18.2.2.1)

使用样式属性时，应使用 Content-Style-Type HTTP 标头或标记指定默认样式表语言。

见[http://www.w3.org/TR/html401/present/styles.html#h-14.2.1](http://www.w3.org/TR/html401/present/styles.html#h-14.2.1)

# php - 在 PHP 中替换文档正文上的文本

> ID：10291244
> 
> 赞同：0
> 
> 时间：2012-04-24T03:07:40.420
> 
> 标签：php, string, templates, import, replace

如何在代码执行时替换 PHP 文件的活动文档正文上的文本？

我是否必须导入文件，替换其上的文本，然后回显它，或者我可以只操作运行 PHP 脚本的文档吗？

我正在尝试使用模板来简化 HTML 编辑，例如 :usernamecomeshere:，然后将 :usernamecomeshere: 替换为实际值。我想知道我是否只能在一个文件上执行此操作，而不是加载一个文件然后显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:13:17.690

如果我正确地回答了您的问题，则您无需重视文件并回显该文件。您可以直接操作文档本身。例如，在下面的示例中，您可以直接以`$username`穿插 HTML 代码的方式回显 的内容。

**索引.php**

```
 <?php
     // handle code to login
     $username = "David";
 ?>
 <html>
     <body>
         <p>Hello, your username is <?php echo $username ?></p>
     </body>
 </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T03:13:39.433

值得指出的是，PHP 本身就是一个模板引擎。如果要替换文本，可以使用 PHP 来完成，例如：

```
<?php
$user = 'Ugur';
?>
<html><head></head>
<body>
<h1>Hello <?php echo $user; ?></h1>
</body>
</html> 
```

除了这种简单的用法，您可能还想看看各种模板引擎，它们可以让您做更优雅但更复杂的事情。看看[小胡子](https://github.com/bobthecow/mustache.php)，也许？

如果您在页面加载后尝试进行这些修改，请记住 PHP 运行在服务器端，而不是用户端。为此，您需要 Javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:11:29.163

你会想在谷歌上查找 str_replace() 。您可以搜索整个字符串并简单地替换指定的关键字。

# forms - Joomla/Mootools 捕获 Sortables 的顺序

> ID：10291246
> 
> 赞同：1
> 
> 时间：2012-04-24T03:08:05.383
> 
> 标签：forms, joomla, mootools, submit, sortables

我正在尝试对数据库条目列表进行排序，然后使用 Joomla 中的新顺序更新数据库。

到目前为止，我有一个 mootools`Sortables`列表，每个列表都有`<li>`两个隐藏`<input>`来跟踪条目的 id 和 order。目前 order 变量没有改变，只是反映了原来的 order。

我希望捕获提交事件并将订单变量更改为现在应该是的，然后发送请求，但是我不知道该怎么做......

我有：

```
<li style="float:left">
    <input type="hidden" name="o<?php echo $row->order; ?>" value="<?php echo $i; ?>" />
    <input type="hidden" name="i<?php echo $row->order; ?>" value="<?php echo $row->lotid; ?>" />
    Lot <?php echo $row->lot_name; ?><br />
    <?php echo $row->address; ?>
</li> 
```

和：

```
window.addEvent('domready', function(){
    new Sortables('#order-grid', {opacity: 0.7});

    form = document.id('adminForm');
    list = document.id('order-grid');

    form.addEvent('submit', function(e) {
        var sortOrder = [];

        list.getElements('li').each(function(li) {
            sortOrder.push(li.retrieve... //Stuck!
        });
    });
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:42:58.247

文档页面是您的朋友。[http://mootools.net/docs/more/Drag/Sortables](http://mootools.net/docs/more/Drag/Sortables)

首先，我会说保存参考。

```
var sortables = new Sortables(options) 
```

然后您可以使用该`sortables.serialize()`方法检索新订单。默认情况下，序列化将返回元素 id - 但它需要一个函数参数 - 所以你可以返回任何你喜欢的东西。

例如。要获取新排序顺序的数组，只需执行

```
var newOrder = sortables.serialize(function(el, index) {
    return el.get('data-id'); // or el.retrieve('id'); if you have one. 
}); 
```

最后，无需在提交事件上执行此操作 - 您可以执行以下操作：

```
var orderField = document.id("i_something_order");
new Sortables('#order-grid', {
    onComplete: function() {
        orderField.set('value', this.serialize(function(el) {
            el.retrieve('id');
        }).join(','));
    }
}); 
```

请注意，这`retrieve`意味着您已经使用`store`过。如果它是您所追求的 DOM 属性，请`el.get('data-id')`按照建议执行或执行任何操作

# visual-c++ - 用什么代替 TThread

> ID：10291253
> 
> 赞同：0
> 
> 时间：2012-04-24T03:09:41.577
> 
> 标签：visual-c++, c++builder, tthread

我有用 Borland C++ 编写的 USB 通信源代码（“USBThread 类”），并使用 Visual Component Library（“vcl.h”）。现在我的任务是将它移植到 Visual C++，因为我们没有购买 Borland C++。

但是这个“USBThread 类”继承自“vcl.h”中的一个基类，称为“TThread”。

请问，在Visual C++中，我可以用什么样的基类来代替“TThread”作为新的继承源？

原始代码使用了TThread 来的“WaitFor”和“Terminate”方法，我不知道如何用Visual C++ 实现这两种方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T22:14:59.330

尽管您可以将 VCL 的`TThread`类翻译成 C++，但它不会很好地工作，因为它依赖于一些根本不翻译成 C++ 的 Delphi 语义（特别是`TObject::AfterConstruction()`方法）。您最好简单地重写 USBThread 以直接使用 Win32 线程函数，`CreateThread()`即 `WaitForSingleObject()`. 对于`Terminate()`，您只需在`bool`某个地方设置一个标志，您的线程过程可以定期查看并在设置为 true 时停止其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:50:32.037

这可能是一个困难的练习 imo，但它看起来像[Boost.Thread](http://www.boost.org/doc/libs/1_49_0/doc/html/thread/thread_management.html#thread.thread_management.thread)使用`join`for`WaitFor`和`interrupt`for`Terminate`会让你开始。

我基于对[此处找到的 VCL 文档的](http://docwiki.embarcadero.com/VCL/en/Classes.TThread)审查。我说这可能很困难，因为 VCL 可能具有未记录或其他意外的行为。

# java - 转换字节值，以便删除/恢复它们的 MSB

> ID：10291262
> 
> 赞同：0
> 
> 时间：2012-04-24T03:10:50.760
> 
> 标签：java, bit-manipulation, binary-data

我有一个二进制协议，它将每个有效载荷字节的 MSB 提取到一个 MSB 收集字节（septett）中进行传输，并在接收器端重新注入 MSB。有效载荷由 n 个四字节帧组成，具体取决于发送者（在我的情况下为 6 个）。

这是两个示例帧，它们的 septett（最后一个字节），如在线上所示：

```
0x2E 0x00 0x5F 0x00 0x04
0x79 0x01 0x38 0x22 0x04 
```

这些是相同的帧，客户端，重新注入了 MSB：

```
0x2E 0x00 0xDF 0x00
0x79 0x01 0xB8 0x22 
```

进行转换的 C 函数在[本文档](https://docs.google.com/file/d/0B1ga9YrTFDiVZWU3NjBiNmYtZDczNS00NjE1LTk1ZDAtZmJhNWVkMmI5ZTRj/edit?hl=en&authkey=CIzfn4UM&pli=1)的第 9 页和第 10 页中定义。我的 Java 版本如下。我遇到的问题是这些都不起作用，我很困惑为什么。我从电线中传递了我的四个字节，并得到相同的字节，原封不动。我可以使用一些帮助来找出这里出了什么问题（可能是一些我看不到的微不足道的事情）。

```
private static byte[] vbusExtractSeptett(byte[] data, int offset, int length) {
    byte septett = 0;
    for (int i = 0; i < length; i++) {
        if ((data[offset + i] & 0x80) != 0) {
            data[offset + i] &= 0x7F;
            septett |= 1 << i;
        }
    }

    data[offset + length] = septett;
    return data;
}

private static byte[] vbusInjectSeptett(final byte[] data, int offset, int length) {
    byte septett = data[offset + length];

    for (int i = 0; i < length; i++) {
        if ((septett & (1 << i)) != 0)
            data[offset + i] |= 0x80;
    }

    return data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:30:58.490

在 Java 中，一个字节是有*符号*的。如果不阅读您的所有代码，我敢打赌这就是问题所在。

文档中的 C 代码使用 unsigned char 数学。

由于 Java 没有“无符号”，您可能需要在短裤（或整数）中进行所有数学运算，然后再转换回字节。一定要屏蔽掉符号位，例如

```
byte theResult = theIntIDidtheMathOn & 0xFF;
data[index] = theResult; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:32:51.547

另一个答案是正确的，您没有考虑到 Java 对有符号字节的使用。

解决这个问题有几种可能性：

1.  你可以用“& 0xFF”做上面的事情
2.  您可以将所有内容都视为整数（如下所示）
3.  您可以使用图书馆来提供帮助。一些例子是[JOOU](http://code.google.com/p/joou/)（它是为了响应这种缺乏无符号类型而开始的）或[netty](http://netty.io/)通道缓冲区（注意：虽然 netty 专注于网络 IO，如套接字等，但它的通道缓冲区类非常适合处理字节流和有符号/无符号不同长度的类型，我已经用它来转换二进制协议，就像你正在处理的那样。）

我在下面为您的问题写了一个“解决方案”。

```
public class SOAnswer
{
    private static void vbusExtractSeptett(int[] data, int offset, int length) {
        int septett = 0;

        for (int i = 0; i < length; i++) {
            if ((data[offset + i] & 0x80) != 0) {
                data[offset + i] &= 0x7F;
                septett |= 1 << i;
            }
        }

        data[offset + length] = septett;
    }

    private static void vbusInjectSeptett(final int[] data, int offset, int length) {
        int septett = data[offset + length];

        for (int i = 0; i < length; i++) {
            if ((septett & (1 << i)) != 0)
                data[offset + i] |= 0x80;
        }

        // clear the septett byte
        data[offset + length] = 0x00;
    }

    private static void printIntArrayAsHEX(int[] array)
    {
        StringBuilder builder = new StringBuilder();

        for ( int a : array )
        {
            String s = Integer.toHexString( a );
            if (s.length() == 1)
                builder.append( "0" );
            builder.append(s + ":");
        }

        builder.substring( 0, builder.lastIndexOf( ":" ) - 1 );

        System.out.println(builder.toString());
    }

    public static void main( String[] args )
    {
        // Create an array long enough for the extracting/injecting
        int[] arr = new int[]{0x2E, 0x00, 0xDF, 0x00, 0x00};
        // see what it looks like
        printIntArrayAsHEX(arr);

        // perform extraction
        vbusExtractSeptett( arr, 0, 4 );
        // see what it looks like
        printIntArrayAsHEX(arr);

        // Perform injection
        vbusInjectSeptett( arr, 0, 4 );
        // see what it looks like
        printIntArrayAsHEX(arr);
    }
} 
```

我对您的一个建议是考虑您是否真的想逐字重新实现 C 代码（尤其是传递原始类型数组、数组中的偏移量和数组长度的函数式编程风格）。也许更像这样的东西会更面向对象：

```
private static int[] vbusExtractSeptettJAVASTYLE(int[] data) {
    int[] extractedData = Arrays.copyOf( data, data.length +1 );

    int septett = 0;

    for (int i = 0; i < data.length; i++) {
        if ((data[i] & 0x80) != 0) {
            extractedData[i] = data[i] &= 0x7F;
            septett |= 1 << i;
        }
    }

    extractedData[extractedData.length-1] = septett;

    return extractedData;
} 
```

# html - 来自 3rd 方脚本的 html5 地理定位权限

> ID：10291267
> 
> 赞同：1
> 
> 时间：2012-04-24T03:11:36.557
> 
> 标签：html, api, mobile, permissions, geolocation

我正在创建一个浏览器扩展程序，将一些 javascript 注入某些网站。

该脚本的功能需要知道用户是否为指定站点启用了地理定位。到目前为止，我只看到示例 javascript 请求站点上的用户许可，然后决定做什么。

为了尽可能不打扰用户，我想了解用户是否已经允许该站点使用其地理位置，如果有，请使用该信息，否则执行不需要它的代码。html5 geolocation api中是否有任何功能可以让我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:16:59.237

首先，Geolocation**不是**HTML5 的一部分，它是 W3C 规范。

其次，据我所知，没有办法做到这一点。快速浏览一下[W3C 地理定位规范](http://dev.w3.org/geo/api/spec-source.html)并没有发现任何问题。

我建议只是尝试通过 Geolocation 获取他们的位置，如果它有效，那么您可以假设已授予权限，如果没有运行不需要 API 的代码。

我知道您不想明确询问用户的许可，但它只会是一次，所以您也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:52:51.807

据我所知，没有这样的功能，我从来没有听说过，所以你可能要等待很长时间......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T20:15:38.973

看起来现在有一个“权限 API”，可让您查看已授予该站点的权限。

```
// Check for Geolocation API permissions              
navigator.permissions.query({name:'geolocation'})
    .then(function(permissionStatus) {  
        console.log('geolocation permission state is ', permissionStatus.state);

        permissionStatus.onchange = function() {  
            console.log('geolocation permission state has changed to ', this.state);
    };
}); 
```

[https://developers.google.com/web/updates/2015/04/permissions-api-for-the-web](https://developers.google.com/web/updates/2015/04/permissions-api-for-the-web)

但是，目前它在 Chrome 和 Firefox 之外还没有得到广泛支持：http: [//caniuse.com/#feat=permissions-api](http://caniuse.com/#feat=permissions-api)

# xcode - UITableView 拉伸问题

> ID：10291269
> 
> 赞同：0
> 
> 时间：2012-04-24T03:11:43.700
> 
> 标签：xcode, uitableview, ios5

我有一个 UIViewController，顶部有一个图像和标签，后跟一个 UITableView。在 IB 中它看起来很完美，但是当我在模拟器中运行应用程序时，UITableView 正在拉伸并占据整个屏幕。

我已经关闭了所有自动调整大小并将所有拉伸值设置为 0，但它仍然占据了整个屏幕。我什至尝试了我在另一篇文章中看到的一些建议，这些建议建议将 UITableView 放在大小合适的 UIView 中，但这也不起作用。

关于如何阻止 UITableView 调整大小和填充屏幕的任何建议？我正在使用 iOS5 运行 XCode 4.2.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:19:37.730

您可以像这样为您的 tableView 提供帧大小-

1）在 .h 类中创建 tableView 的 IBOutlet 属性，并在 .m 类中合成。2）在Xib中连接它。3）比在您的 .m 类中将此代码放在 viewDidLoad-

```
tblView.frame = CGRectMake(0.0f, 30.0f, 320.0f, 50.0f); // you can give any size to your table 
```

# ruby-on-rails-3.1 - 当项目有可选的子项目时，如何创建资源路由？

> ID：10291270
> 
> 赞同：0
> 
> 时间：2012-04-24T03:11:55.557
> 
> 标签：ruby-on-rails-3.1, ruby-on-rails-3.2

如何为具有选项子属性的模型创建路由？假设我正在创建一个帮助台应用程序，并且该工单可能与客户之前与我一起拥有的订单相关联，或者可能与他们尚未订购的目录中的项目相关联。

```
class CustomerServiceTicket
  belongs_to :order
  belongs_to :item
  belongs_to :buyer
  belongs_to :customer_service_category
end

class Order
  ...
  has_one :customer_service_ticket
  ...
end

class Item
  ...
  has_one :customer_service_ticket
  ...
end 
```

在 customer_service_ticket 的架构中，order_id 和 item_id 可以为空。

因此，我将在他们关闭的订单页面上说他们的 order_id 旁边有一个“创建客户服务票”链接......以及产品目录页面上 item_id 旁边的类似链接。

我在想 url 结构应该是这样的：

customer_service_ticket/new/order/123

对于创建的与订单相关的工单

和

customer_service_ticket/new/item/789

对于创建的与项目相关的工单

并且只有 customer_service_ticket/new 两者都没有（也适用于客户只有一般问题的情况）

我将如何构建最有效的路线？我没有与上面的 URL 结构结婚，如果有更好的方法我很乐意尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:35:30.110

根据您对路线的描述，听起来订单和商品在您需要创建新的客户服务工单时已经存在，对吗？如果是这样，那么最好像这样创建您的路线：

```
orders/123/customer_service_ticket/new
items/123/customer_service_ticket/new
customer_service_tickets/new 
```

每当您将资源添加到现有资源时，新资源通常会出现在最后，您正在执行的操作是 URL 的最后一部分。要创建这个结构，它会是这样的：

```
resources :orders do
  resource :customer_service_ticket
end

resources :items do
  resource :customer_service_ticket
end

resources :customer_service_ticket 
```

但是，您可能还想重新考虑您的人际关系。一旦关闭订单/商品的客户服务，您确定不会再有与该订单/商品相关的客户服务单吗？这可能表明一种`has_many`关系。您可能还想研究订单和商品与客户服务票证的多态关系。这样，如果您想添加更多与客户服务票证相关的实体，您就不必继续添加数据库字段。请注意，更改为 a`has_many`会稍微改变上面的路由声明。

# iphone - 将选择器上的分数格式设置为最小公分母？

> ID：10291274
> 
> 赞同：0
> 
> 时间：2012-04-24T03:12:31.377
> 
> 标签：iphone, ios, arrays, format, picker

以下是我目前如何格式化我的选择器。我真的希望它显示 1/8 而不是 2/16 或 1/2 而不是 8/16。如何调整它以显示我想要的输出？谢谢！

```
fractionArray = [[NSMutableArray alloc] init];
for(int frac = 0; frac <= 15; frac ++){ 
    NSString *fracString = [NSString stringWithFormat:@"%d/16", frac];
    [fractionArray addObject:fracString]; // Add the string. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:41:59.760

这应该适用于 2 分母的任何幂：

```
// dodge this special case:
[fractionArray addObject:@"0"];

for ( int numerator = 1; numerator <= 15; numerator++ )
{
    int denominator = 16;
    int num = numerator;

    while ( num % 2 == 0 )
    {
        num /= 2;
        denominator /= 2;
    }

    NSString *fracString = [NSString stringWithFormat:@"%d/%d", num, denominator];
    [fractionArray addObject:fracString]; // Add the string.
} 
```

并且很容易将其扩展到任何分母。（提示：用 n 替换 2，从 2 到 sqrt（分母）迭代 n。）

编辑：现在真的有效！

* * *

由于我继续对其进行编码，因此这是考虑任何分母的版本：

```
int denominator = 240;

for ( int numerator = 1; numerator < denominator; numerator++ )
{
    int denom = denominator;
    int num = numerator;
    int factor = 2;

    while ( factor * factor < denom )
    {
        while ( (num % factor) == 0 && (denom % factor) == 0 )
        {
            num /= factor;
            denom /= factor;
        }

        // don't worry about finding the next prime,
        // the loop above will skip composites
        ++factor; 
    }

    NSString *fracString = [NSString stringWithFormat:@"%d/%d", num, denom];
    [fractionArray addObject:fracString];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T17:17:34.437

现在的孩子们......[欧几里得算法](http://en.wikipedia.org/wiki/Greatest_common_divisor#Using_Euclid.27s_algorithm)......他们在学校教什么......抱怨抱怨......

```
int gcd(int a, int b) {
    // assumes a >= 0 && b > 0
    while (b != 0) {
        int t = a % b;
        a = b;
        b = t;
    }
    return a;
}

NSString *stringByReducingFraction(int a, int b) {
    if (a == 0) return @"0";
    if (a == b) return @"1";

    int g = gcd(a, b);
    return [NSString stringWithFormat:@"%d/%d", a / g, b / g];
} 
```

# c++ - 循环套接字连接尝试最终会断开互联网连接

> ID：10291286
> 
> 赞同：1
> 
> 时间：2012-04-24T03:14:38.150
> 
> 标签：c++, sockets, winsock2

```
char IP[30] = "127.0.0.1";
char PORT[10] = "1000";

void Connection(HWND hwnd)
{
    WORD wVersionRequested;
    WSADATA wsaData;
    char * ip = "";
    PHOSTENT hostinfo;
    wVersionRequested = MAKEWORD( 2, 0 );
    int ConRes, ConRes2;
    char Buffer [20] = "";

    if ( WSAStartup( wVersionRequested, &wsaData ) == 0 )
    {
        if((hostinfo = gethostbyname(IP)) != NULL)
        {
            ip = inet_ntoa (*(struct in_addr *)*hostinfo->h_addr_list);
        }   
    }

    InitWSA();

    begin:

    Sleep(1000);
    RemAdr.sin_family = AF_INET;
    RemAdr.sin_addr.s_addr=inet_addr(127.0.0.2);
    RemAdr.sin_port = htons (atoi(PORT));
    client = socket (AF_INET,SOCK_STREAM,0);

    switch(connect (client, (struct sockaddr *)&RemAdr,sizeof(RemAdr)))
    {
    case 0:
        WSAAsyncSelect(client,hwnd,RATMSG_SOCKET,FD_READ|FD_CLOSE|FD_CONNECT);
        return;
        break;

    default:
        Sleep(1000);    
        RemAdr.sin_family = AF_INET;
        RemAdr.sin_addr.s_addr=inet_addr(ip);
        RemAdr.sin_port = htons (atoi(PORT));
        client = socket (AF_INET,SOCK_STREAM,0);
        ConRes2=connect (client, (struct sockaddr *)&RemAdr,sizeof(RemAdr));
        break;
    }

    switch(ConRes2)
    {
    case 0:
        WSAAsyncSelect(client,hwnd,RATMSG_SOCKET,FD_READ|FD_CLOSE|FD_CONNECT);
        return;
        break;

    default:
        goto begin;
        break;
    }

    return;
} 
```

在尝试连接几个小时但连接失败后，用户的互联网最终将断开连接，直到您关闭应用程序。似乎是什么问题？我认为我的代码有点草率，所以任何有用的提示都会很棒，很想学习。

在这个过程中，我实际上是想设法让它有一个“备份”IP 地址来连接，以防第一个失败。因此，如果无法连接到 127.0.0.1，请尝试 127.0.0.2，然后再以 127.0.0.1 为例。我该如何管理？

PS 你在我的代码中看到的任何看起来像是“坏习惯”的东西，请指出，以便我将来学习/修复它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:08:55.007

你有一个手柄泄漏。如果第一个`connect()`失败，您将调用`socket()`分配一个新`SOCKET`句柄并将其分配给同一个`client`变量，从而丢失`SOCKET`您之前分配的。如果第二次调用`connect()`失败，您的循环将`socket()`再次调用并将其分配给同一个`client`变量，一次又一次，一次又一次，直到`connect()`最终成功，如果有的话。随着时间的推移，这将浪费资源。你需要摆脱额外的`socket()`电话。在进入循环之前只调用`socket()`一次，然后使用您已经拥有`connect()`的现有 IP 对每个 IP 进行循环调用。`SOCKET`

**编辑**尝试更像这样的东西：

```
std::string IP = "127.0.0.1";                 
std::string IP2 = "127.0.0.2";                 
std::string PORT = "1000";                 

void Connection(HWND hwnd) 
{ 
    std::string ip[2]; 
    ip[0] = IP;
    ip[1] = IP2;

    memset (&RemAdr, 0, sizeof(RemAdr));
    client = INVALID_SOCKET;

    WORD wVersionRequested = MAKEWORD(2, 0); 
    WSADATA wsaData; 

    if (WSAStartup(wVersionRequested, &wsaData) == 0) 
    { 
        for (int i = 0; i < 2; ++i)
        {
            PHOSTENT hostinfo = gethostbyname(ip[i].c_str());
            if (hostinfo != NULL) 
                ip[i] = inet_ntoa(*(struct in_addr *)(hostinfo->h_addr_list[0])); 
        }

        client = socket(AF_INET, SOCK_STREAM, 0); 
        if (client != INVALID_SOCKET)
        {
            RemAdr.sin_family = AF_INET;
            RemAdr.sin_port = htons(atoi(Port.c_str())); 

            do
            {
                for (int i = 0; i < 2; ++i)
                {
                    RemAdr.sin_addr.s_addr = inet_addr(ip[i].c_str()); 

                    if (connect(client, (struct sockaddr *)&RemAdr, sizeof(RemAdr)) == 0) 
                    { 
                        WSAAsyncSelect(client, hwnd, RATMSG_SOCKET, FD_READ | FD_CLOSE | FD_CONNECT); 
                        return; 
                    }

                    Sleep(1000);
                }     
            }
            while (true); 
        }
    }
} 
```

# google-app-engine - 使用游标分页或使用偏移量之间的成本差异是什么？

> ID：10291291
> 
> 赞同：5
> 
> 时间：2012-04-24T03:15:44.383
> 
> 标签：google-app-engine, google-cloud-datastore

使用 [Next Page] 和 [Prev Page] 按钮创建结果页面时，使用光标执行此操作或使用偏移量之间的成本差异是多少？每种技术的优缺点是什么？

作为一个具体的例子，读取结果 100-110 的成本是多少。

我已经看到 offset 使用“小型数据存储操作”的说法，有些人声称它对每个跳过的实体使用完整的“读取操作”。

使用游标，我读到它们不能向后翻页，但我今天第一次注意到一个新的[Cursor.reverse()](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Cursor#reverse%28%29)方法。

我认为使用光标的缺点是您不能按数字跳转到页面，例如直接跳转到结果 90-100。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T04:51:31.960

跳过结果会为每个跳过的结果花费一个数据存储小操作。它也比使用游标慢。

正如您所观察到的，现在可以使用反向游标，只要您的查询存在适当的索引，就可以向后翻页。

当然，如果你想跳到第'n'页，你可以结合光标和偏移量。

# jquery - jQuery添加自定义事件监听器

> ID：10291294
> 
> 赞同：0
> 
> 时间：2012-04-24T03:15:53.210
> 
> 标签：jquery

如何向 jQuery 添加自定义事件侦听器？
例如：我有一个动画元素，如何添加一个事件侦听器，一旦其坐标等于特定值，它就会应用一些动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:18:08.013

简短的回答是你不能完全按照你的意愿去做。

但是，您可以获得相同的效果。诀窍是，您需要将“触发器”放在将要改变的事物上。

因此，例如，在您的示例中，一旦对象的坐标处于某个值中，您就希望有一个动画事件。为此，您需要在每次对象移动时检查坐标（在您用于移动对象的任何函数中）。然后如果它们相等，则触发动画功能。

# c# - HotfixID= 'File 1' 的修补程序是什么？

> ID：10291296
> 
> 赞同：1
> 
> 时间：2012-04-24T03:16:20.557
> 
> 标签：c#, wmi-query, windows-update, hotfix

我正在创建一个应用程序，它应该在涉及许多查询过程的不同 Windows 操作系统版本上准确检索所有软件和修补程序更新。具体的一种方法是查询 Win32_QuickFixEngineering 类。现在使用以下 C# 代码，我可以这样做：

```
try
{
    ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2", "SELECT * FROM Win32_QuickFixEngineering"); 

    foreach (ManagementObject queryObj in searcher.Get())
    {
        Console.WriteLine("-----------------------------------");
        Console.WriteLine("Win32_QuickFixEngineering instance");
        Console.WriteLine("-----------------------------------");
        Console.WriteLine("HotFixID: {0}", queryObj["HotFixID"]);
    }
}
catch (ManagementException e)
{
    MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
} 
```

我得到了一系列与以下结果相同的结果：

```
HotfixID='File 1'
HotfixID='File 1'
HotfixID='File 1'
HotfixID='File 1'
HotfixID='File 1'
HotfixID='File 1'
HotfixID='File 1' 
```

但是当我查询属性“ServicePackInEffect”时，每个带有 HotfixID='File 1' 的查询都会显示如下内容：

```
ServicePackInEffect='KB2259213'
ServicePackInEffect='KB2431232'
ServicePackInEffect='KB2254332-IE7'
ServicePackInEffect='KB960680-v2'
ServicePackInEffect='KB2254343'
ServicePackInEffect='KB93089483' 
```

所以我的问题是，这些也是更新还是修补程序？或者是什么？如果是，为什么会有名为“文件 1”的 HotfixID？为什么他们的“ServicePackInEffect”会在 HotfixID 上说明它应该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-06T07:02:30.163

如果您有简单`File 1`的 as那么您可以从列`HotFixID`中检索相关标识符。`ServicePackInEffect`

```
HotFixID       ServicePackInEffect
==================================
KB941569\.      .
KB898461\.      SP3.
File 1\.        KB982665.
...            ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T06:19:02.053

是的，它们是更新。'File1' 表示特定的修补程序 ID 已被取代。只需跳过 'File1' HotFixID's (query-SELECT * FROM Win32_QuickFixEngineering where HotFixID <> 'File1' )。

来源：http : [//www.visualbasicscript.com/File-1-shows-in-HotFix-ID-column-m33401.aspx](http://www.visualbasicscript.com/File-1-shows-in-HotFix-ID-column-m33401.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T14:27:47.900

我有同样的交易。我正在检查是否是通过 configman 安装修补程序的方式。他们似乎首先运行修补程序，在前面，然后跟进常规补丁等。

# delphi - 如何在delphi 2010中显示父类别？

> ID：10291299
> 
> 赞同：0
> 
> 时间：2012-04-24T03:16:47.167
> 
> 标签：delphi, parent, dbgrid, tadoquery, tadotable

好的，我正在使用 Embarcadero Delphi 2010。目前我正在使用`flib.mdb`在该文件中命名的 Access 数据库文件，我创建了一个名为的表`MCategory`，其中有 4（四）列命名：`codecategory`作为文本和主键，`parentcategory`作为文本，`category`作为文本，`notes`作为文本。

对于数据库连接，我使用 ADOConnection。对于查询，我使用 ADOQuery。对于表，我使用 ADOTable。

因为代码是使用前缀自动生成的，但对于示例，我使用常规数字作为字符串。

只有一个ROOT：`codecategory="0" // parentcategory="" // category="ROOT"`不允许添加另一个ROOT（父类别为空的那个）

我的问题是如何重新屏蔽所有父类别，如下图所示？以及如何在 DBGrid 上查看它？

![父类掩蔽](../Images/17448efd543d93a24e74e3c382189b7e.png)

我应该使用递归吗？有什么简单的方法可以做到吗？

还有请在 Delphi 2010 中使用源代码.... ^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:26:00.600

您可以将数据集的所有记录转换为 TStringList 并对其进行排序。

在接口部分声明这个：

```
TForm1=class(...)
  RecordList:TStringList;
  constructor Create(AOwner:TComponent);override;
 destructor Destroy;override; 

end;
TCategoryItem=class
public:
   CategoryTitle:string;
   Id,ParentId:Variant;
end; 
```

在实施部分：

```
constructor TForm1.Create(AOwner: TComponent);  
begin
  inherited ;
  RecordList:=TstringList.create(true);  //  use this code in FormCreate  also

end;
 destructor TForm1.Destroy;
    begin
      ...
   RecordList.Free;//  use this code in FormDestory  also

    end;

procedure TForm1.AdoQuery1AfterOpen(DataSet:TDataSet);
var
  Item,RootItem:TCategoryItem;
begin
  DataSet.First;
  DataSet.DisableControls;

  try
   (*add abstract root item to RecordList if needed 
     RootItem:=TCategoryItem.Create;
     RootItem.CategoryTitle:='ROOT';
     RecordList.AddObject('',RootItem);*)
    while not DataSet.Eof do
    begin
      Item:=TCategoryItem.Create;
      Item.CategoryTitle:=DataSet['Cateogory'];
      Item.Id:=DataSet['CodeCategory'];
      Item.ParentId:=DataSet['ParentCategory'];
      RecordList.AddObject(VarToStr(Item.Id),Item);
      DataSet.Next;
    end;
  finally
    RecordList.Sort; // for use find(binary search)
    DataSet.EnableControls;
    DataSet.First;
  end;
end;
procedure TForm1.OnGetFieldText(Sender: TField; var Text: string;
  DisplayText: Boolean);
var 
  Idx:Integer;
  ParentValue:Variant;
  Item:TCategoryItem;
  Texts:TStringList;
begin
  ParentValue:=Sender.Value;
  Texts:=TStringList.create;
  try
    while RecordList.Find(varToStr(ParentValue),Idx) do
    begin
      Item:=RecordList.Objects[Idx] as TCategoryItem; 
      Texts.Insert(0,Item.CategoryTitle); 
      ParentValue:=Item.ParentId;
    end;
    Texts.Delimiter:='>';
    Text:=Texts.DelimitedText;
  finally
    Texts.Free;
  end;

end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ADOQuery1.FieldByName('parentcategory').OnGetText := OnGetFieldText;
  ADOQuery1.Refresh;
end; 
```

# selenium - 如何在 cucumber-jvm 的另一个功能中调用一个功能？

> ID：10291303
> 
> 赞同：5
> 
> 时间：2012-04-24T03:17:26.953
> 
> 标签：selenium, junit, cucumber, cucumber-jvm

我有一个功能文件

```
Feature: Create Profile

Scenario: Create Profile
Given I want to create a profile
When I create a profile
Then I should be navigated to Home Page
Then sign out link should exist 
```

所以上面的运行一切正常，并断言它确实回到了主页并且存在退出链接。

现在我有了另一个功能文件。

```
Feature: Go to my account page

Scenario: Go to my account page
Given I want to go to my account page    
When I go to my account page
Then I should be navigated to the my account page 
```

在运行`"When I go to my account page"`步骤之前，用户应该`"Create Profile"`.

所以我所做的是我附加了

```
When I create a profile
Then I should be navigated to Home Page
Then sign out link should exist 
```

之前`When I go to my account page`。

但我看到我复制了“创建配置文件”功能/场景中的相同代码。

如何在“转到我的帐户页面”场景中运行整个“创建配置文件”功能/场景？

我将 cucumber-jvm 与 Selenium 和 JUnit 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:15:18.137

该`Create Profile`功能指定 Given/When/Then，因为这是驱动功能实现的原因。

许多其他功能将需要存在有效的配置文件。您不应该通过重复从`Create Profile`. 相反，包括一些类似于`Given I have a valid profile`（可能在背景部分）的内容，并将其连接到创建配置文件的夹具代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:11:25.860

您看到背景 DSL 功能了吗？它适用于您的情况，但可能不是您真正要问的。在这种情况下，您可以要求用户通过以下方式创建配置文件：

```
Feature: Create Profile
  Background:
    Given I create a profile
    And I should be navigated to Home Page
    And sign out link should exist

  Scenario: Create Profile
    # do nothing because all actions are in background

  Scenario: Go to my account page
    When I go to my account page
    Then I should be navigated to the my account page 
```

但是您必须将两个功能文件合并为一个功能文件。

还可以查看 @Before 和 @After 黄瓜注释 - 如果以前的解决方案不适合您，您可以运行一些代码来初始化（或创建）您的测试帐户。

# .htaccess - .htaccess 重写以将根子目录重定向到另一个子目录

> ID：10291306
> 
> 赞同：0
> 
> 时间：2012-04-24T03:17:46.060
> 
> 标签：.htaccess, mod-rewrite

试图得到

```
www.example.com/alpha 
```

至

```
www.example.com/beta 
```

我正在尝试这个，但它不起作用

```
RewriteEngine on
rewritecond %{http_host} example.com/alpha [nc]
rewriterule ^(/)?$ beta [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:25:03.280

尝试这个：

```
RewriteEngine on
RewriteCond %{http_host} example.com\alpha$
RewriteRule \beta$ - [L] 
```

* * *

# 欲了解更多信息：[点击这里](http://wiki.apache.org/httpd/RewriteCond)

> [http://wiki.apache.org/httpd/RewriteCond](http://wiki.apache.org/httpd/RewriteCond)

* * *

# objective-c - 无法删除自定义表格视图单元格

> ID：10291307
> 
> 赞同：1
> 
> 时间：2012-04-24T03:17:49.187
> 
> 标签：objective-c, uitableview

在我的一个 ViewControllers 中，我添加了一个 tableview 作为子视图。

在这个 tableView 中，我实现了自定义表格视图单元格。

那么，当我们按下删除按钮时，如何从 tableView 中删除自定义的 Table View Cell。

谁能帮我吗..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:03:16.733

尝试这个，

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
     if (editingStyle == UITableViewCellEditingStyleDelete) 
     {
        [tableView beginUpdates];
        [self.itemTable removeObjectAtIndex:indexPath.row];

        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]    withRowAnimation:UITableViewRowAnimationFade];
        [tableView endUpdates];
} 
```

# ios - 为什么找不到“CPTAnnotation.h”？

> ID：10291309
> 
> 赞同：0
> 
> 时间：2012-04-24T03:18:12.003
> 
> 标签：ios, core-plot

我正在尝试通过这些说明为我的 iOS 应用程序安装 Core Plot。 [http://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications](http://code.google.com/p/core-plot/wiki/UsingCorePlotInApplications)

但是，我收到此错误

```
"CPTAnnotation.h" not found 
```

当我包含`#import "CorePlot-CocoaTouch.h"`在我的代码中时。为什么？

# mercurial - mercurial：提交后，推送前从已删除的存储库中恢复

> ID：10291313
> 
> 赞同：1
> 
> 时间：2012-04-24T03:18:23.100
> 
> 标签：mercurial

我有一个 mercurial 存储库`my_project`，托管在 bitbucket 上。今天我做了一些更改并将它们提交到我的本地存储库，但还没有将它们推出。

然后我主要塞满和胖手指`rm -rf my_project`（！！！！！！）。

鉴于我还没有将它们推出，有什么方法可以检索我今天提交的更改？我知道一天的提交价值听起来并不多，但确实如此！

我拥有的这个项目的所有其他克隆只是最新的推送（不包括今天的更改）。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:22:49.257

善变无法拯救你。来自 mercurial 的数据存储在项目文件夹底部的隐藏目录中。在您的情况下，可能在`my_project/.hg`. 您的递归删除也会破坏此文件夹。

那么也许是[文件恢复工具](http://www.cgsecurity.org/wiki/TestDisk_Download)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T03:23:17.557

不会。在您推送之前，更改仅存储在本地存储库目录（其中的 .hg 目录）中。它们永远不会放在其他任何地方（甚至 /tmp）。

不过，您有可能能够从磁盘中恢复已删除的文件；四处寻找相关说明和工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:56:54.403

恐怕提交与工作副本一起被删除，文件恢复工具是恢复丢失`.hg`文件夹的唯一选择。我看到您可以从安装中恢复代码 - 太棒了！

如果您害怕再次发生这种情况，那么您可以安装一个粗挂钩，例如

```
[hooks]
post-commit = R=~/backup-repos/$(basename "$PWD");
              (hg init "$R"; hg push -f "$R") > /dev/null 2>&1 || true 
```

这将强制将您所有提交的副本推送到`~/backup-repos`. 该`-f`标志确保您将推送备份，即使您使用修改历史的 rebase 或 mq 等扩展。它还将允许将变更集从不相关的存储库推送到同一个备份存储库中——想象两个不同的存储库名为`foo`. 因此，备份存储库将在一段时间后以大量变更集结束，您可能希望偶尔删除它们。

我对此进行了简要测试，对于日常工作，我认为您不会注意到额外副本的开销，稍后您可能会感谢自己:-)

# android - 每次更换电脑时，是否需要在 Facebook 应用设置中添加新的密钥哈希？

> ID：10291316
> 
> 赞同：7
> 
> 时间：2012-04-24T03:18:48.943
> 
> 标签：android, facebook

我从 git 下载 Hackbook 示例，然后创建并运行项目。它显示**登录失败：invalid_key**（我没有更改任何内容）因此，我尝试创建自己的新应用程序并将我从 keytool 获得的哈希键添加到 facebook 应用程序设置（Android 本机应用程序）然后，我更改`new Facebook("My_own_APP_ID");` 它它有效！

问题：

1.  每次更改开发计算机时是否需要添加新的密钥哈希（如果协作者很多，他们是否需要每次更改 Facebook_APP_ID ？
2.  以防万一，我想将这个应用程序推向市场。`keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64` 当我要求哈希键时，我需要更改它吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T03:55:31.980

根据我的经验回答

> 每次更改开发计算机时是否需要添加新的密钥哈希（如果协作者很多，他们是否需要每次更改 Facebook_APP_ID ？

您不需要每次都更改 Facebook_APP_ID。创建 facebook 应用程序后，您可以向其添加多个密钥哈希。如果您有很多合作者，请从他们那里获取 keyhash 并将 keyhash 添加到您的 facebook 应用程序中。

> 以防万一，我想将这个应用程序推向市场。我是否需要更改此 keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -二进制 | 当我要求哈希键时，openssl base64 ？

是的。您`~/.android/debug.keystore`用自己的发布密钥库替换并再次将该密钥哈希添加到 facebook 应用程序。

* * *

另一种选择，

如果您不想向 facebook 应用程序添加大量 keyhash，您始终可以使用一个通用调试密钥为所有协作者签署您的 android 应用程序。

但是，当然，不要将您的发布密钥分享给所有人。

# asp.net-mvc-3 - 放置 ViewModel 的位置

> ID：10291318
> 
> 赞同：0
> 
> 时间：2012-04-24T03:19:21.387
> 
> 标签：asp.net-mvc-3, viewmodel

我有一个可以在控制器、视图和核心中使用的视图模型。核心是一个单独的项目，而控制器和视图位于 Web 项目中。放置 ViewModel 的最佳位置在哪里，是在 Web 项目中还是在核心中，还是我只需要为 View Model 创建一个单独的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:52:56.823

> 我有一个可以在控制器、视图和核心中使用的视图模型。

不，您没有在核心中使用它。谷歌“关注点分离”。视图模型的职责是在视图中表示模型（核心项目）。它不应该用于其他任何事情。我在这里写过关于视图模型的文章：http: [//blog.gauffin.org/2011/07/three-reasons-to-why-you-should-use-view-models/](http://blog.gauffin.org/2011/07/three-reasons-to-why-you-should-use-view-models/)

*控制器负责从模型（核心项目）中获取所有内容并创建适当的视图模型。*

将视图模型放在某个地方以便它可以在核心中使用给了它不止一个改变的理由，这将打破单一责任原则（五个 SOLID 原则之一）。这意味着您的应用程序的几个部分将受到您所做的每项更改的影响，并且可能会导致小的变通方法或快速修复，这将使您在一年内成为维护噩梦。

**更新**

使用 AutoMapper 的示例：

```
public class FlairController
{
    public FlairController(IYourServiceOrRepository repos)
    {
    }

    public ActionResult Details(int id)
    {
        SomeCoreObject entity = _repos.Get(id);
        FlairViewModel model = new FlairViewModel();
        Mapper.Map(entity, model);
        return View(model);
    }
} 
```

您的示例代码（在评论中）是该方法在没有映射框架的情况下的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:27:43.860

由于 ViewModel 特定于 View，我通常会在我的 UI 项目下创建一个 ViewModel 文件夹并将其保留在那里。

![在此处输入图像描述](../Images/f55af4fd28a591fd84dc763bc0012a3d.png)

我将创建一个单独的服务层（另一个项目），用于在我的 ViewModel 和实体模型之间桥接数据。我的控制器操作方法使用 ViewModel 对象调用服务层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:23:24.517

视图模型通常是具有 UI 格式化数据的模型的包装器。您可能应该将模型类保留在核心项目中，并将视图模型类保留在 Web 项目中。

View Model 类的构造函数可以获取模型类的实例（以及填充视图所需的任何其他对象）并生成正确的视图数据。例如，如果您的模型有一个 DateTime 对象，那么您的视图模型可能有一个相应的 String 属性，其中包含您要显示的格式的 DateTime。

# java - 是否有可以为您的 java/scala 应用程序实现的自动更新程序/修补程序？

> ID：10291321
> 
> 赞同：1
> 
> 时间：2012-04-24T03:20:09.320
> 
> 标签：java, implementation, auto-update, patch

我正在制作一款游戏，我计划进行大量更新。我之前做的游戏，我只是让用户在每次发布新版本时下载整个游戏或补丁，但如果实现起来不太麻烦，我想实现在线自动补丁功能。像许多应用程序和在线游戏一样使用的自动修补程序。

我真的不想从头开始，如果太麻烦，我也不想花太多时间来构建补丁系统，最多可能一周左右。

是否有任何易于实现的自动修补程序库或软件或插件可用于 java/scala 应用程序？

我的游戏是用scala写的，是一个普通的离线游戏。用户需要以 zip 格式接收整个游戏文件夹或以 zip 格式更改的文件，然后提取并复制到游戏文件夹中。游戏只在windows上运行，不打算移植到android/iOS。至少，我不打算将自动修补程序用于其他平台。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:31:51.390

我从未尝试过，但也许 Scala 应用程序可以与 WebStart 一起使用。一旦您更改了服务器上的 jar，您的用户在下次启动应用程序时会被要求下载更新。这些更新可以是强制性的或可选的。

# android - android方向传感器的替代品是什么？

> ID：10291322
> 
> 赞同：17
> 
> 时间：2012-04-24T03:20:29.780
> 
> 标签：android, events, android-sensors

嗨，我正在为 Android 构建一个 3D 游戏。

我目前正在尝试在我的游戏中添加一个传感器，允许玩家倾斜 android 作为其控件。

理想情况下，我想使用 ORIENTATION 传感器，但我注意到它已被弃用。有谁知道如何检测android中的倾斜并且不使用这个传感器？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-24T03:40:30.497

没有实际的“方向”传感器——这实际上是（曾经）一个复合传感器，由加速度计和磁力计的组合产生。

来自[http://developer.android.com/reference/android/hardware/SensorEvent.html](http://developer.android.com/reference/android/hardware/SensorEvent.html)

“这种传感器类型由于遗留原因而存在，请结合使用[getRotationMatrix](http://developer.android.com/reference/android/hardware/SensorManager.html#getRotationMatrix%28float%5B%5D,%20float%5B%5D,%20float%5B%5D,%20float%5B%5D%29) [()](http://developer.android.com/reference/android/hardware/SensorManager.html#remapCoordinateSystem%28float%5B%5D,%20int,%20int,%20float%5B%5D%29)和 remapCoordinateSystem()和[getOrientation()](http://developer.android.com/reference/android/hardware/SensorManager.html#getOrientation%28float%5B%5D,%20float%5B%5D%29)来计算这些值。”

```
public class OrientationTestActivity extends Activity implements SensorEventListener
{
    private SensorManager mSensorManager;
    private Sensor mAccelerometer;
    private Sensor mMagnetometer;

    private float[] mLastAccelerometer = new float[3];
    private float[] mLastMagnetometer = new float[3];
    private boolean mLastAccelerometerSet = false;
    private boolean mLastMagnetometerSet = false;

    private float[] mR = new float[9];
    private float[] mOrientation = new float[3];

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
        mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
        mMagnetometer = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
    }

    protected void onResume() {
        super.onResume();
        mLastAccelerometerSet = false;
        mLastMagnetometerSet = false;
        mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL);
        mSensorManager.registerListener(this, mMagnetometer, SensorManager.SENSOR_DELAY_NORMAL);
    }

    protected void onPause() {
        super.onPause();
        mSensorManager.unregisterListener(this);
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        if (event.sensor == mAccelerometer) {
            System.arraycopy(event.values, 0, mLastAccelerometer, 0, event.values.length);
            mLastAccelerometerSet = true;
        } else if (event.sensor == mMagnetometer) {
            System.arraycopy(event.values, 0, mLastMagnetometer, 0, event.values.length);
            mLastMagnetometerSet = true;
        }
        if (mLastAccelerometerSet && mLastMagnetometerSet) {
            SensorManager.getRotationMatrix(mR, null, mLastAccelerometer, mLastMagnetometer);
            SensorManager.getOrientation(mR, mOrientation);
            Log.i("OrientationTestActivity", String.format("Orientation: %f, %f, %f",
                                                           mOrientation[0], mOrientation[1], mOrientation[2]));
        }
    }
} 
```

# java - 在一些 Java 代码中，为什么类 Deck 扩展了 Card 类？

> ID：10291323
> 
> 赞同：6
> 
> 时间：2012-04-24T03:20:55.610
> 
> 标签：java, oop, inheritance, ooad

我正在阅读一些我不熟悉的Java代码，但是如果一个类`Deck`（对于一副纸牌），它已经有一个数组的实例变量`Cards`，那么为什么要`Deck`扩展或继承`Card`呢？我认为只有当 A 是 B 时，A 类才继承 B 类（猫继承动物，因为猫是动物）。

代码如下：

```
public class Deck <T extends Card> {
    private ArrayList<T> cards;
    private int dealtIndex = 0; // marks first undealt card

    public Deck() {
    }

    public void setDeckOfCards(ArrayList<T> deckOfCards) {
        cards = deckOfCards;
    }

    public void shuffle() {
        for (int i = 0; i < cards.size(); i++) {

    [...]
}

public abstract class Card {
    private boolean available = true;

    /* number or face that's on card - a number 2 through 10, 
     * or 11 for Jack, 12 for Queen, 13 for King, or 1 for Ace 
     */
    protected int faceValue;
    protected Suit suit;

    public Card(int c, Suit s) {
        faceValue = c;
        suit = s;
    }

    public abstract int value();

    public Suit suit() { 
        return suit; 
    }

    [...]

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-24T03:23:16.203

```
 public class Deck <T extends Card> 
```

甲板*不*扩展卡。

这是一个泛型类型注释，它表示 Deck 可以是 T 类型，其中 T 是 Card 的子类。

这与 Java 的集合类相同，其中 String 的 List 也不扩展 String（但包含 String 实例）。

这使您可以编写如下代码：

```
Deck<PokerCard> pokerDeck = new Deck<PokerCard>();

PokerCard c = pokerDeck.getTopCard();   
// now you know it is a PokerCard, not just any old card

pokerDeck.insert(new MagicTheGatheringCard()); 
// get a compile error for wrong card type 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T03:25:58.740

类套牌*不扩展 Card*。它包含一个卡片的 ArrayList。

这个`<T extends Card>`符号有点混乱，但这意味着这个 Deck 是由 T“参数化”的，它必须扩展，（是一个子类）Cards。所以它可能是皮诺奇卡、桥牌、塔罗牌等......例如

```
Deck myTarot = new Deck<TarotCard>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:26:43.723

当一个类想要继承另一个类的属性时，它会扩展另一个类。例如。

```
Class A{

public void show()
{
//something to show
}
}

Class B extends A{

//B can now enjoy the show() function defined by A
} 
```

这就是继承的工作方式。

Cat 将扩展 Animal，因为 cat 是动物的一个子集，它可以属于该类别。

此处 Deck 不扩展卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T03:25:39.947

你解释错了。你应该阅读 class Deck of T（扩展 Card）。就像你有一个`List<Something>`（一些东西的清单）你在这里`Deck<Cards>`（一副牌）。`Deck<PokerCard>`如果 PokerCard 扩展 Card，那也可能是

# xcode - 应用程序图标在 Xcode 部署信息中显得很小

> ID：10291329
> 
> 赞同：4
> 
> 时间：2012-04-24T03:22:19.097
> 
> 标签：xcode, icons, size

我的头发快用完了。我创建了两个图标：

图标@2x.png (114x114) 图标.png (57x57)

然而，出于某种原因，它们看起来只有一半大小。看这个截图：

[https://docs.google.com/open?id=0BxSFZAq0OUFGbXFWbWNTVlo3RHc](https://docs.google.com/open?id=0BxSFZAq0OUFGbXFWbWNTVlo3RHc)

我 100% 确信我的图标大小与描述的一样。任何想法为什么会发生这种情况？

一些可能相关也可能不相关的附注： - 我使用的是 PhoneGap + JQueryMobile，而不是应该映射器 - 我将两个图标的引用拖到 Resources/icons 文件夹中，替换了原来的 icon.png 和 icon@ 2x.png 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T21:07:56.127

我也有这个问题。我进行了实验，发现它与像素/英寸分辨率有关。icon@2x 似乎希望全尺寸为 150 像素/英寸，300 像素/英寸为半尺寸，600 像素/英寸（这是我使用的）为四分之一尺寸。据我所知，图像分辨率并没有真正对放在 iPhone 上的图像质量产生太大影响。我的图标对渲染非常敏感，因此图像质量的任何下降都会很容易引起注意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T10:09:24.347

将所有图标从 300dpi 更改为 72dpi 解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:31:41.347

检查图标，因为这是 png 图像，所以有透明背景，因此裁剪从图像中蓝色开始位置开始的 png 文件。这解决了你的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T11:42:53.863

我只是有同样的问题。我的解决方案是在 Xee 中打开它们（可能很多其他程序都可以解决问题）并将它们重新保存为 png。我的图标最初是在 gimp 中创建的，这可能与 gimp 保存它们的方式有关。

我的默认文件发生了完全相同的事情 - 相同的解决方案修复了它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-13T00:56:46.743

我在使用 Gimp 创建资产时遇到了这个问题。为了解决它，我在导出对话框中取消选中“保存分辨率”。

[![Gimp 导出图像对话框](../Images/4648d520b2a0d3d57d3744c6580f37cb.png)](https://i.stack.imgur.com/Rli5r.png)

# delphi - FireMonkey PenMode 等效 - DrawLine

> ID：10291330
> 
> 赞同：2
> 
> 时间：2012-04-24T03:22:30.713
> 
> 标签：delphi, delphi-xe2, firemonkey

我在玩 FireMonkey 只是为了测试一些东西。其中之一是在画布上实现“非常简单”的绘图。例如直线、矩形等...

第一个问题是，是否有为 VCL for FireMonkey 提供的 graphex 演示的等价物？

否则，出于练习的目的，我正在尝试在 FireMonkey 中复制该演示，以及刚才的线条图。当我在预期的线条画周围移动鼠标时，我可以让线条图正常工作。不幸的是，我无法让它自动擦除在鼠标所在位置绘制的旧线。这似乎由 TPen 属性的 TPenMode 属性处理，据我所知，它是 FireMonkey 中的 TStroke 属性。即在绘制（移动鼠标）时将属性设置为 pmXor，然后在完成时将其设置为 pmCopy。

我将如何使用 FireMonkey 做类似的事情？

这是在 TImage 的 MouseMove 事件期间调用的例程：

```
 FDrawSurface.Bitmap.Canvas.BeginScene;
  try
    case FShapeToDraw of
      doLine:
      begin
        FDrawSurface.Bitmap.Canvas.DrawLine(PointF(TopLeft.X, TopLeft.Y), PointF(BottomRight.X, BottomRight.Y), 100);
      end;

    end;
  finally
    FDrawSurface.Bitmap.Canvas.EndScene;
    FDrawSurface.Bitmap.BitmapChanged;
  end; 
```

FDrawSurface 是一个 TImage。TopLeft 是一个 TPoint，它包含鼠标在 TImaeg 的 OnMouseDown 事件中捕获的位置的 X 和 Y，BottomRight 是来自 OnMouseMove 事件的当前 X 和 Y 坐标。

所以每次我移动鼠标时，我的图像上都会出现“附加”行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T21:59:36.523

AFAIK，FMX 没有这样的模式......此外，您在画布上绘制的内容并没有真正保存（如果您知道如何直接保存它，请在评论中解释我）：如果您将表单移到桌面之外，把它拿回来，画布被清洗了......

因此，要实现 graphex 演示，您必须使用其他技术对其进行编码。

例如，使用 TBitmap 存储您的真实“图像”，并且仅将画布用于“预览”......

```
unit main;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,
  FMX.Types, FMX.Controls, FMX.Forms, FMX.Dialogs, FMX.Objects;

type
  TfrmMain = class(TForm)
    recBoard: TRectangle;
    btnCopy: TButton;
    Image1: TImage;
    procedure recBoardMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Single);
    procedure recBoardMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Single);
    procedure recBoardMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Single);
    procedure recBoardMouseInOut(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure btnCopyClick(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private declarations }
    bmp: TBitmap;
    pFrom, pTo: TPointF;
  public
    { Public declarations }
  end;

var
  frmMain: TfrmMain;

implementation

{$R *.fmx}

procedure TfrmMain.btnCopyClick(Sender: TObject);
begin
  Image1.Bitmap.Assign(bmp);
end;

procedure TfrmMain.FormCreate(Sender: TObject);
begin
  pFrom := PointF(-1, -1);
  bmp := TBitmap.Create(Round(recBoard.Width), Round(recBoard.Height));
end;

procedure TfrmMain.FormDestroy(Sender: TObject);
begin
  bmp.Free;
end;

procedure TfrmMain.recBoardMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Single);
begin
  if Button = TMouseButton.mbLeft then
  begin
    pFrom := PointF(X, Y);
    pTo   := PointF(X, Y);
  end;
end;

procedure TfrmMain.recBoardMouseInOut(Sender: TObject);
begin
  pFrom := PointF(-1, -1);
end;

procedure TfrmMain.recBoardMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Single);
begin
  if ((pFrom.X <> -1) and (pFrom.X <> -1)) then
  with recBoard.Canvas do
  begin
    BeginScene;
    if ssLeft in Shift then
    begin
      FillRect(RectF(0, 0, bmp.Width, bmp.Height), 0, 0, [], 255);
      DrawBitmap(bmp, RectF(0, 0, bmp.Width, bmp.Height), RectF(0, 0, bmp.Width, bmp.Height), 255);
      Stroke.Color := claBlue;
      pTo := PointF(X, Y);
      DrawEllipse(RectF(pFrom.X, pFrom.Y, pTo.X, pTo.Y), 255);
    end;
    EndScene;
  end;
  Self.Caption := Format('(%0.0f;%0.0f)', [X, Y]);
end;

procedure TfrmMain.recBoardMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Single);
begin
  with bmp.Canvas do
  begin
    BeginScene;
    DrawEllipse(RectF(pFrom.X, pFrom.Y, pTo.X, pTo.Y), 255);
    EndScene;
  end;
  pFrom := PointF(-1, -1);
end;

end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T23:55:27.843

我最终所做的 - 基于上述 Whiler 的见解，将位图的状态存储在“绘制例程”开始时（即鼠标按下时），然后在 MouseMove 上，在我渲染新线之前（在本例中），我恢复状态，然后画新线......

```
procedure TFMXDrawSurface.DrawSurfaceMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Single);
begin
  FOrigin := PointF(X, Y);
  FMovePt := PointF(X, Y);
  FPrevPt := PointF(X, Y);
  FDrawing := True;
  FTempDrawbitmap.Assign(FDrawSurface.Bitmap);
end;

procedure TFMXDrawSurface.DrawSurfaceMouseMove(Sender: TObject; Shift: TShiftState; X, Y: Single);
begin
  if FDrawing then
  begin
    DrawShape(FOrigin, FMovePt);
    FMovePt := PointF(X, Y);
    DrawShape(FOrigin, FMovePt);
    FPrevPt := PointF(X, Y);
  end;
end;

procedure TFMXDrawSurface.DrawShape(TopLeft, BottomRight: TPointF);
var
  R: TRectF;
begin
  FDrawSurface.Bitmap.Canvas.BeginScene;
  try

    case FShapeToDraw of
      doLine:
      begin
        // restore canvas to initial state so we don't keep old movement data around
        R.TopLeft := PointF(0.0, 0.0);
        R.BottomRight := PointF(FDrawSurface.Width, FDrawSurface.Height);
        FDrawSurface.Bitmap.Canvas.DrawBitmap(FTempDrawBitmap, R, R, 100);
        FDrawSurface.Bitmap.Canvas.RestoreState(FDrawState);
        FDrawSurface.Bitmap.Canvas.DrawLine(PointF(TopLeft.X, TopLeft.Y), PointF(BottomRight.X, BottomRight.Y), 100);
      end;
    end;
  finally
    FDrawSurface.Bitmap.Canvas.EndScene;
    FDrawSurface.Bitmap.BitmapChanged;
  end;

end; 
```

它有效，但我不知道这是否是“正确”的方式......

# actionscript-3 - 我需要从一个巨大的 XML 文档创建一个 AS3 可过滤滚动列表

> ID：10291332
> 
> 赞同：0
> 
> 时间：2012-04-24T03:23:07.870
> 
> 标签：actionscript-3, list, filtering

所以我手头有一个情况。我有一个需要制作成 XML 文件的 excel 文件，这对于不同的帖子来说是个问题（XSLT 有人吗？）。该 XML 文件将表示大约 400 个项目的列表，这些项目被编码为大约 15 个不同的类别。这是该 XML 的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<hotel>

<hfloor number="18">
<d_location d_code="sw18.10N" d_type="sw" description="Ferbludgit thingamabob">
        <d_image>3e_pic1</d_image>
    <d_image>3e_pic2</d_image>
        <d_image>3e_pic3</d_image>
        <d_image>3e_pic4</d_image>
        <d_image>3e_pic5</d_image>
        <d_video>3e_vid_1</d_video>
        <d_video>3e_vid_2</d_video>
        <d_video></d_video>
</d_location>
</hfloor>

<hfloor number="15">
<d_location d_code="W3" d_type="sw" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
    <d_location d_code="LB12" d_type="sw" description="Screwed up whosamadingy">
        <d_image>media/lb15_12/LB-12 LOOKING NORTH.png</d_image>
    <d_image>media/lb15_12/LB-12 LOOKING SOUTH.png</d_image>
        <d_image>media/lb15_12/Pages from Level_15_Link_Beam_12.png</d_image>
    <d_image>media/lb15_12/Pages from Level_15_Link_Beam_12-2.png</d_image>
    <d_image>media/lb15_12/Post Demo from CITC018306365-2.png</d_image>
        <d_image>media/lb15_12/Rebuilt from CITC018306365.png</d_image>
    <d_image>media/lb15_12/WEI LB 12 level 15.png</d_image>
        <d_video>Video 1</d_video>
        <d_video>Video 2</d_video>
        <d_video>Video 3</d_video>
</d_location>
<d_location d_code="LB17" d_type="sw" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
</hfloor>

<hfloor number="s">
<d_location d_code="lbs.6e" d_type="sw" description="Whacked flogatron">
        <d_image></d_image>
    <d_image></d_image>
        <d_image></d_image>
        <d_image></d_image>
    <d_image></d_image>
        <d_video></d_video>
        <d_video></d_video>
        <d_video></d_video>
</d_location>
</hfloor>

<hfloor number="s2">
<d_location d_code="W1" d_type="sw" description="Broken fetzer valve">
        <d_image>3s_pic1</d_image>
</d_location>
<d_location d_code="SWS2.3" d_type="sw" description="Whacked flogatron">
        <d_image>media/sw_s2_3/CITC000155966.png</d_image>
    <d_image>media/sw_s2_3/CITC000155983.png</d_image>
        <d_image>media/sw_s2_3/CITC000155996.png</d_image>
        <d_image>media/sw_s2_3/CITC000156003.png</d_image>
        <d_image>media/sw_s2_3/Screen shot 2012-04-19 at 5.54.42 PM.png</d_image>
        <d_image>media/sw_s2_3/WEI SWS2.3.png</d_image>
        <d_video>lbs.6e vid</d_video>
        <d_video></d_video>
        <d_video></d_video>
</d_location>
</hfloor>
</hotel> 
```

用户需要能够在列表中查看所有这些 - 没问题，虽然这将是一个大滚动条 - 而且还可以通过上面代码中的 d_type 过滤该列表。如前所述，这些类型有 15 种，用户需要 15 个单选按钮，每个按钮一个，它将重新构建仅显示所选 d_type 的列表。

有没有人对如何做到这一点有任何想法？过滤算法以及如何在 AS3 中正确实现它？我假设我将需要创建第二个某种类型的 XML 对象，并在更新的、已排序的数据中进行转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:06:51.197

您应该能够使用 XML 和 XMLList 类过滤您的 XML。

一个很好的概述在这里：http: [//joshblog.net/2007/05/08/methods-to-filter-data-with-e4x-in-flash-9/](http://joshblog.net/2007/05/08/methods-to-filter-data-with-e4x-in-flash-9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:42:35.527

我会在 AS3 中解析 xml，将每个 d_location 传递给生成一个新对象的函数（代表您提到的项目）并将该项目添加到主列表（数组）和数组类型列表中。伪代码会像这样

```
all_items = [];
categories = new Object();
for each floor in hotel {
    for each d_location in floor {
        item = MakeItem(d_location);
        all_items.push(item);
        if (categories[item.type] == null) categories[item.type] = [];
        categories[item.type].push(item);
    }
} 
```

现在，您可以使用您的类别来快速访问该类型的所有项目，因为用户按下相应的单选按钮，如果他们想查看该批次，则可以使用 all_items。

items 对象本身没有重复，只是对它们的引用，因此它既节省空间又快速。此外，将项目作为对象使它们在 AS3 中更易于使用，然后是它们来自的 XML 对象。

您应该能够找到大量用于在 AS3 中解析 xml 的示例...例如，我使用它来解析 quest 文件，如下所示：

```
for each(var questXMLNode:XMLNode in questXMLNodes) 
{
    quests[quests.length] = new QuestClass(questXMLNode);
} 
```

虽然你的是两层深的hotel->hfloor->item

我希望这有帮助。

# .net - 使用 ObservableCollection 时 ，我还需要在类型 T 上实现 INotifyPropertyChanged 吗？

> ID：10291339
> 
> 赞同：9
> 
> 时间：2012-04-24T03:23:49.727
> 
> 标签：.net, observablecollection, inotifypropertychanged

[`ObservableCollection<T>`](https://msdn.microsoft.com/en-us/library/ms668604(v=vs.100).aspx)注释[的 MSDN 参考页面：](https://msdn.microsoft.com/en-us/library/ms668604(v=vs.100).aspx)

> “您的集合中的对象必须满足[绑定源概述](https://msdn.microsoft.com/en-us/library/ms743643(v=vs.100).aspx)中描述的要求。特别是，如果您使用[OneWay](https://msdn.microsoft.com/en-us/library/system.windows.data.bindingmode(v=vs.100).aspx)或[TwoWay](https://msdn.microsoft.com/en-us/library/system.windows.data.bindingmode(v=vs.100).aspx)（例如，您希望您的 UI 在源属性动态更改时更新），您必须实现一个合适的属性更改通知机制，例如[INotifyPropertyChanged](https://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged(v=vs.100).aspx)接口。"

既然`ObservableCollection<T>`已经实施了`INotifyPropertyChanged`，为什么我还需要再次实施`INotifyPropertyChanged`呢`T`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T03:35:21.400

将您的可观察集合视为表的数据源。集合中的每个对象占据一行，并跨多列显示在表中。

视图（即您的表格）需要知道何时修改每个单元格以响应对象属性的变化，以及响应向集合中添加和删除对象。

你的 observable 集合负责处理*表中的行*：当一个对象被插入、移除、移动等等时，它会通知它的观察者。但是，它缺乏对单个对象的了解，因此对处理*表列*没有帮助。

这就是你的对象进来的地方：通过实现`INotifyPropertyChanged`它们让你的表管理列中的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T03:35:12.500

`INotifyPropertyChanged`需要由其属性正在更改的对象引发。`ObservableCollection`不能简单地检测它包含的对象的变化并代表您传递这些变化。

集合实现的原因`INotifyPropertyChanged`并不是特别有用。我怀疑它只会为`Count`集合的属性引发一个更改事件，该事件会随着项目被添加/删除到集合中而改变。

如果您只对添加/删除的项目感兴趣，您可能不需要在您的类中实现此接口。但是，如果您的 UI 绑定到对象的属性，则如果您希望 UI 做出反应，则需要实现它。

# java - java计时器可以更快地工作吗？

> ID：10291349
> 
> 赞同：0
> 
> 时间：2012-04-24T03:26:08.977
> 
> 标签：java, timer

我目前正在使用 java 计时器来安排我的程序打印屏幕

```
timer.scheduleAtFixedRate(new PrintScreen(),0,1); 
```

这是我的代码，它计划以 0 秒延迟和 0.001 秒/图像执行 PrintScreen

由于结果图像在打印屏幕期间仍然有一些滞后，它可以更快地工作吗？

我目前每 0.001 秒使用一次 java 打印屏幕。我已将图像附加为 1.jpeg 和 2.jpeg

但我希望图像输出在某种程度上类似于 image3.jpg、image4.jpg 和 image5.jpg，它们可以看到微小的运动

1.jpg：[http ://www.java.net/sites/default/files/1.jpeg](http://www.java.net/sites/default/files/1.jpeg)

2.jpg：[http ://www.java.net/sites/default/files/2.jpeg](http://www.java.net/sites/default/files/2.jpeg)

image3.jpg : [http://www.java.net/sites/default/files/image3.jpg](http://www.java.net/sites/default/files/image3.jpg)

image4.jpg : [http://www.java.net/sites/default/files/image4.jpg](http://www.java.net/sites/default/files/image4.jpg)

image5.jpg : [http://www.java.net/sites/default/files/image5.jpg](http://www.java.net/sites/default/files/image5.jpg)

对此有什么建议吗？提前感谢您的回复。

==================================================== =================================更新这是我打印屏幕的全部代码

```
 Toolkit tool = Toolkit.getDefaultToolkit();
        Dimension d = tool.getScreenSize();
        Rectangle rect = new Rectangle(d);
        Robot robot = new Robot();
        ss.setScreenCount();
        int index = ss.getScreenCount();
        String screenFileName = "screenshot_" + index + ".jpeg";  
        File f = new File(screenFileName);
        BufferedImage img = robot.createScreenCapture(rect);
        ImageIO.write(img,"jpeg",f);

        int totalClient = ss.getTotalClient();
        for(int i=0;i<totalClient;i++)
        {
            RshScp rsThread = new RshScp(screenFileName,i,ss);
            Thread rs = new Thread(rsThread,"RshScpThread");        
            rs.start();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T03:28:44.153

在一秒钟内截取 1000 个屏幕截图似乎很难做到，而且考虑到大多数显示器的更新速度远不及这个速度，这也很奇怪。您似乎正在尝试捕获视频。视频往往以每秒 24 到 60 帧的速度运行。每秒 1000 帧有点荒谬。

# jquery - jQuery 选项卡需要刷新才能在 IE8 中加载？

> ID：10291350
> 
> 赞同：0
> 
> 时间：2012-04-24T03:26:35.467
> 
> 标签：jquery, internet-explorer-8, jquery-ui-tabs

在 IE8 中，并且只有 IE8，我的选项卡在第一次回发或刷新之前不会创建。我打赌其他人已经经历过这种情况，并且知道一种解决方法。我在用着

jquery-1.7.1.min.js，jquery-ui-1.8.18.custom.min.js

就是这么简单：

```
 // Tabs
    $tabs = $('#tab-control');

    // hide them until all logic and elements are wired up and ready ...
    //
    $tabs.hide();
    $tabs.tabs();

    $tabs.bind( "tabsselect", function(e, ui) {
    console.log('Setting cookie [' + cookieName + '] with value ' + ui.index + '...');
        $.cookies.set(cookieName, ui.index);
    });

    stickyTab = $.cookies.get(cookieName);

    if( ! isNaN( stickyTab ) ) {
        console.log('Now selecting tab: ' + stickyTab + '.');
        $tabs.tabs('select', stickyTab);
    }

    $tabs.show(300); 
```

自己检查一下（请使用 IE8）：[http ://senchaportfolios.com](http://senchaportfolios.com)

担

# java - 用于以编程方式将 HTML 页面转换为图像/PDF 的最佳 Java 库

> ID：10291352
> 
> 赞同：3
> 
> 时间：2012-04-24T03:26:42.527
> 
> 标签：java, flying-saucer, html-to-pdf, html-to-jpeg

我正在寻找最好的 Java 库，我可以将它传入一个 URL 并让它创建一个网页外观的图像，就像它在浏览器中一样。我尝试了[flysaucer](http://code.google.com/p/flying-saucer/) ，但似乎几乎每个网页都破坏了它——它甚至不会渲染 www.google.com 或 yahoo.com——我可以让它渲染的唯一网站是 www.w3c.org！

关于更好的工具使用的想法，或者可能允许飞碟在 xhtml 中更加宽松是可以接受的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:29:50.437

Flying Saucer 在许多页面上都失败了，因为它只允许 xhtml（参见手册）。

但是您可以使用一些 html 库来“清理”您的输入，然后使用 FS。

**网站 -> “清洁工” -> 飞碟**

一些好的和免费的库是：

1.  [JSoup](http://jsoup.org/)（个人推荐）
2.  [HtmlCleaner](http://htmlcleaner.sourceforge.net/)
3.  [JTidy](http://jtidy.sourceforge.net/)（有时比需要的更严格）
4.  [杰里科 HTML](http://jericho.htmlparser.net/docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:39:56.953

也许你可以试试itext.jar

从[http://itextpdf.com/download.php下载](http://itextpdf.com/download.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:45:23.150

关于html抓取：

使用来自 java 库的 URL。有很多关于这方面的例子。

关于PDF转换：

如果您使用的是 Spring 框架，则可以通过 iText api 使用 AbstractPdfView 类。[这](http://www.mkyong.com/spring-mvc/spring-mvc-export-data-to-pdf-file-via-abstractpdfview/)是我最喜欢的例子。我认为您可以轻松使用它。

关于图像转换：

我推荐这个：[http ://code.google.com/p/java-html2image/](http://code.google.com/p/java-html2image/)

全部的：

通过 URL 读取 html → 通过 iText 或 java-html2image 进行转换。我强烈建议你自己做，不要把它留给某个图书馆。

# ios - 可调整大小的 UIImage 和视网膜

> ID：10291354
> 
> 赞同：0
> 
> 时间：2012-04-24T03:27:25.623
> 
> 标签：ios, uikit, uiimage, retina-display

我不确定我应该为视网膜图像的可拉伸部分使用什么中间尺寸。文件说：

> 在图像的缩放或调整大小期间，被帽子覆盖的区域不会被缩放或调整大小。相反，每个方向上未被帽覆盖的像素区域从左到右和从上到下平铺，以调整图像大小。这种技术通常用于创建可变宽度按钮，这些按钮保留相同的圆角，但其中心区域会根据需要增大或缩小。为获得最佳性能，请使用大小为**1x1 像素**区域的平铺区域。

但是视网膜图像不应该是非视网膜图像大小的 2 倍吗？如果是这样，中间不应该是 1x1**点**== 2x2 像素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T03:05:16.080

1x1 像素和 2x2 像素区域都可以使用。根据文档，1x1 可能会为您带来更高的性能，但 2x2 更便于缩小视网膜尺寸资源。

# c# - 我应该如何修改此代码以使其在 Razor C# 中工作？

> ID：10291357
> 
> 赞同：0
> 
> 时间：2012-04-24T03:27:57.367
> 
> 标签：c#, razor, webmatrix

我想在 Razor C# 中添加 2 个变量。

因此我尝试了这个：

```
var newpenpoints = result.PenaltyPoints + int.Parse(penalty); 
```

但我认为当我尝试将图形放入数据库时​​它不起作用：

```
var sql5 = "UPDATE Permit SET PenaltyPoints=@0, Disqualification = @1, LastAccidentDate = @2 WHERE CDSID = @3";
        var para1 = new{newpenpoints, disqualification, dateocc, empcdsid};
        db.Execute(sql5,para1);
        Response.Redirect("~/AccidentConviction"); 
```

出现错误：

```
CS0746: Invalid anonymous type member declarator. Anonymous type members must be declared with a member assignment, simple name or member access. 
```

有谁知道我该如何修改我的代码以使其进行一些数学运算？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:42:27.207

生成匿名类型的代码有错误：

```
new{newpenpoints, disqualification, dateocc, empcdsid}; 
```

您确定所有变量（newpenpoints、disqualification、dateocc、empcdsid）都在生成编译器错误的上下文中声明吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:43:37.083

这不是有效的代码：

```
var para1 = new { newpenpoints, disqualification, dateocc, empcdsid }; 
```

这是试图创建一个具有四个字段的匿名类型] [1](http://msdn.microsoft.com/en-us/library/bb397696.aspx)，但您没有给它们命名。要创建这种类型，您必须使用您已经拥有的另一个对象的值初始化字段，或者显式命名它们：

```
var para1 = new 
{
  NewPenPoints = newpenpoints, 
  Disqualification = disqualification, 
  Dateocc = dateocc, 
  Empcdsid = empcdsid
}; 
```

但是，重新阅读您的示例代码，它怀疑您真正想要的是一个*对象数组*。你没有说`db`在这种情况下是什么，但我猜它`Execute`需要 a`string`和 an `object[]`for 参数。在这种情况下，你想要的是：

```
var para1 = new[] { newpenpoints, disqualification, dateocc, empcdsid }; 
```

请注意`[]`：这是创建一个新的对象数组，其中包含值列表，例如`para1[0] = newpenpoints`，等等。我*认为*这是您真正想要做的。

# wpf - 处置由 d:DesignInstance 创建的对象

> ID：10291358
> 
> 赞同：2
> 
> 时间：2012-04-24T03:28:20.353
> 
> 标签：wpf, dispose, design-time-data

有没有办法处理由以下标记创建的对象...

```
<UserControl x:Class="NodeBrowser"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="344" d:DesignWidth="589"
         d:DataContext="{d:DesignInstance Type=local:NodeBrowserViewModel, IsDesignTimeCreatable=True}"
         >
    <Whatever...>
</UserControl> 
```

我的设计实例创建了一个到数据库的连接，所以我第一次设计时测试这个控件一切正常，但第二次它抛出异常，因为第一个设计时数据仍然有一个打开的连接。

现在我知道这并没有什么意义，但它仍然提出了一个问题，即通过 d:DesignInstance 创建的对象似乎永远不会被释放，即使它们实现了 IDisposable。

是否有任何解决方案，或者我们基本上被迫提供不需要 IDisposable 设计数据的轻量级对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:08:36.827

您可以使用 Microsoft Expression Blend 在设计模式下模拟数据，而不是在设计时访问真实数据库，请查看此[**链接**](http://www.galasoft.ch/mydotnet/articles/article-2007091401.html)。

# c# - Windows 任务计划程序 DLL 缓存问题？

> ID：10291369
> 
> 赞同：1
> 
> 时间：2012-04-24T03:29:57.357
> 
> 标签：c#, scheduled-tasks

我遇到了一个问题，我可以简明扼要地证明任务计划程序正在运行我的可执行文件使用的支持 DLL 的旧版本。

这就是我所拥有的：AC# 控制台应用程序，它只调用类库中的管理器函数（更具体地说，它是数据访问层）。该类库为跨多个应用程序共享的“核心”功能导入另一个类库。

如果我从 Windows 资源管理器运行应用程序，它运行良好。

当它从任务调度程序运行时，它似乎至少运行了一个版本。从字面上看，三个核心功能的功能与之前的版本一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:25:02.510

我不确定运行我的可执行文件使用的旧版本的支持 DLL 是什么意思。

如果您的 C# 控制台使用 Microsoft Task Scheduler COM，则有不同版本的模式，但是您可以参考[Managed Wrapper](http://taskscheduler.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T00:59:06.357

在 Windows 中不可能发生这种情况。结果发现另一台我不知道的服务器将这些计划任务安排在我的任务执行前一分钟发生，并且该服务器没有运行最新版本的应用程序。

因此，如果您遇到这种情况：在发疯之前检查您托管的所有服务器。

# objective-c - 何时何地声明@property？（目标-C）

> ID：10291370
> 
> 赞同：0
> 
> 时间：2012-04-24T03:30:26.180
> 
> 标签：objective-c

有时它在头文件中完成，有时它在实现中完成。我对编程相当陌生。有人可以简要解释一下什么时候该做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:36:40.737

当它用于其他类时，请将其放在标题中。当它仅适用于该类时，将其放在实现文件中的类扩展中。

# database - 两种类型的订单ERD

> ID：10291377
> 
> 赞同：0
> 
> 时间：2012-04-24T03:31:12.333
> 
> 标签：database, database-design, erd

我是数据库设计的新手，我正在尝试为一家在线销售产品并接受重复处方订单的药房创建一个 ERD。

这是我的 ERD 的链接：http: [//i.imgur.com/aiKP0.png](http://i.imgur.com/aiKP0.png)

我想知道我如何只能为两个订单使用一个“付款”和“卡详细信息”实体，所以每个订单都有 2 个实体。我能否在 ORDER TYPE 实体和支付/卡详细信息实体之间建立关系。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:16:53.847

我试图找到一个很好的理由来同时使用`Prescription_Order`和`Product_Order`。应该只有一个`Orders`（复数化，因为 ORDER 是一个保留字无处不在）表，该`Customer_Recurring_Order`表（具有引用`Customer`和的自然键`Product`）打破了客户重复订单的规则，无论它们是否是处方性质的. 您的药物属性正确地属于产品表中的记录。

此外，`Card Details`表格应该正确链接到一个或多个`Customer`，因为我很确定卡详细信息在功能上取决于客户的存在。

一旦你清理了这些，你只需要一个`Payment`或`Card Details`实体。要记住的一个好的设计原则是，如果两个实体具有所有相同的属性，它们可能不是两个不同的实体。

为什么不将运输信息分解为一个单独的实体，`Order_Shipment`. 所有货物是否总是包含客户订单的所有部分？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:49:13.393

但是，您的设计存在一些缺陷：

1.  `Product Order`和`Order Product`。开发人员和管理员会疯狂地记住哪个表用于什么。
2.  目前还不清楚你为什么有 2 `Card Details`？而不是添加`Perscription_PaymentID`和`Product_PaymentID`列以相反的`Card Details`方式 - 将`CardID`字段添加到两个表。
3.  我不清楚加入的`Customer`意图`ORDER TYPE`。考虑更改名称。

此外，即使写了这么小的回复，也很难遵循包含空格、下划线、混合大小写名称、单数/复数变体的表/列名称。

请看一下这个[答案](https://stackoverflow.com/questions/10099684/db-design-critic-suggestions/10100537#10100537)，并考虑使用一些通用方法来命名您的关系、列和约束。

# c - 遇到反汇编时如何使静态字符串不可见？

> ID：10291383
> 
> 赞同：2
> 
> 时间：2012-04-24T03:32:16.270
> 
> 标签：c, public-key-encryption, password-encryption

我从第三方供应商处获得了几个许可证密钥，这些密钥已授权给我的移动应用程序（**C/C++ 语言**），为了不泄露给外界，供应商需要检查我的代码以确保这些密钥已加密以防止拆卸。

我得到的最初方法是加密（使用可逆加密方法）这些密钥并在使用时解密，但这不是最终的解决方案，极端地说，可以通过反转我的代码来解密它。

供应商建议使用**反向哈希**来加密这些密钥（我不知道**反向哈希**），还有其他选择（简单，易于实现但难以反汇编）我可以将这些密钥隐藏在我的代码中以防止反汇编吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:19:08.817

你可以让倒车变得更加困难，但你无法阻止它。无论您选择何种加密方式，黑客都可以从您的程序中获取密钥，因为您的程序会解密密钥以进行许可证检查。

黑客也可以破坏 3-rd 方库而不是窃取您的密钥 :)

我会向图书馆供应商索取代码示例，以展示如何保护密钥以满足他们的要求。

顺便说一下关于 SO: [Reversible hash function 的可逆哈希的问题？](https://stackoverflow.com/questions/4273466/reversible-hash-function)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:13:42.067

没有“反向哈希算法”之类的东西。任何散列算法都被设计为单向的并且意味着数据的丢失。如果是双向的，则称为密码。

只要用户能够运行您的应用程序，并且应用程序在某些时候使用这些密钥，这些密钥就可能会泄露。这可以通过反汇编和逆向工程、从内存中转储密钥或运行调试器来完成。因此，您能做的最好的事情就是以某种方式对其进行加密，并使其尽可能不明显地解密。

鉴于您正在为移动平台编写它，您可能会尝试依赖某些操作系统机制来保护密钥。或者，如果这些是某些 Web API 的密钥，您可以设置一个服务器来存储这些密钥并作为代理工作。或者实际上向您的第三方供应商询问他们保护密钥的最佳实践以及特定的实施细节，例如建议的加密机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T06:44:45.820

假设您将拥有这样的代码：

```
unsigned char *bytes;
some_extremely_complicated_function_which_decrypt_key(bytes);
add_some_confusing_things();
maybe_even_split_into_several_calls(bytes);
// ...
call_function_using_their_key(bytes,data1,data2,data3); 
```

这将导致汇编程序看起来像这样：

```
push [ebp+0004h]  // data3
push ecx          // data2
push [ebp+0024h]  // data1
push [eax]        // key (bytes)
call 123456h      // call to call_function_using_their_key 
```

您几乎总是能够`call_function_using_their_key`从导入/重定位表中获取地址（除非它是内联的、非常难以混淆的或很少有类似的技术）。

我只是自动添加断点到 each `call 123456h`, last push = key, key pointing to memory address `543216h`, get key from `543216h`.

任何加密都是无用的。

故事的寓意：首先确保他们的 API 对加密数据有意义，否则你会很好的：

```
char *globalBytesPtr;

int main(){
    globalBytesPtr = malloc(N);
    globalBytesPtr[8] = 0x35;
    globalBytesPtr[3] = 0x14;
    globalBytesPtr[5] = 0x20;
    ...
} 
```

因为这样你的密钥就不会出现在静态转储中。这不会降低安全性，因为最薄弱的地方是他们的 API 调用，你不能让应用程序在这个宇宙中更安全。

# c++ - 为 std::ostream 重载 << 运算符

> ID：10291385
> 
> 赞同：3
> 
> 时间：2012-04-24T03:33:07.353
> 
> 标签：c++, overloading

```
ostream& operator <<(ostream& osObject, const storageRentals& rentals)
{
    osObject << rentals.summaryReport();
    return osObject;
} 
```

`summaryReport()`是一个无效函数，它给了我一个错误：

> 没有运算符 "<<" 匹配这些操作数

`summaryReport`但是如果我将函数更改为 an ，则错误不存在`int`，但我遇到的问题是您必须返回一个值，并且它正在将其打印在屏幕上。

```
void storageRentals::summaryReport() const
{
   for (int count = 0; count < 8; count++)
      cout << "Unit: " << count + 1 << "    " << stoUnits[count] << endl;
} 
```

有没有办法`cout <<`用 void 函数重载？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T03:36:41.203

您应该将`summartReport`take定义`ostream&`为参数，如下所示：

```
std::ostream&  storageRentals::summaryReport(std::ostream & out) const
{
    //use out instead of cout
    for (int count = 0; count < 8; count++)
        out << "Unit: " << count + 1 << "    " << stoUnits[count] << endl;

    return out; //return so that op<< can be just one line!
} 
```

然后将其称为：

```
ostream& operator <<(ostream& osObject, const storageRentals& rentals)
{
    return rentals.summaryReport(osObject); //just one line!
} 
```

顺便说一句，它不称为*“重载 cout”*。你应该说，*“`operator<<`为`std::ostream`*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:38:37.460

您需要在这里做两件事。Make `storageRentals::summaryReport()`take an `std::ostream&`（您可以将其*默认*为`std::cout`）：

```
void storageRentals::summaryReport(std::ostream& os) const
{
    for (int count = 0; count < 8; count++)
    {
        os << "Unit: " << count + 1 << "    " << stoUnits[count] << endl;
    }
} 
```

然后这样称呼它：

```
ostream& operator <<(ostream& osObject, const storageRentals& rentals)
{
    rentals.summaryReport(osObject);
    return osObject;
} 
```

* * *

`storageRentals::summaryReport()`注意： make take an 的一个优点`std::ostream&`是您可以在单元测试中传递它`std::ostringstream`并断言它提供了正确的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:42:24.963

如果你重载`cout`，你可能会使其他地方使用`code`起来难以理解，或者更加混乱。实际上，您可以自己创建班级来完成这项工作。例如创建一个类`class MyPring`，并重载它的`operator <<`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T03:45:32.580

您的存储报告总是隐式地流式传输到 cout。想象一下有人以这种方式调用您的函数，并将租金放在 cout 而不是文件上。

```
fstream fs("out.txt");
storageRentals rentals;
fs << rentals; 
```

你为什么不像这样流式传输你的课程：

```
ostream& operator <<(ostream& osObject, const storageRentals& rentals)
{

  for (int count = 0; count < 8; count++) {
      osObject << "Unit: " << count + 1 << "    " << rentals.stoUnits[count] << endl;
  }
  return osObject;
} 
```

如果 stoUnits 成员是私有的，您需要使流函数成为您的存储类的朋友。

```
friend ostream& operator<<(ostream& osObject, const storageRentals& rentals); 
```

# iphone - 在iOS中将英制转换为公制？

> ID：10291390
> 
> 赞同：0
> 
> 时间：2012-04-24T03:33:31.600
> 
> 标签：iphone, ios, metric

是的，我已经看到了[这个问题](https://stackoverflow.com/q/325116/613858)，但它是针对 php 的。我还是编程新手，很惊讶没有为此发布 iOS 问题。这就是我将小数转换为分数的方式。认为它可能有助于从英制到公制的格式。所以问题是我将如何在 iOS 中从英制转换为公制？

```
//Converts Decimals to Fractions.
- (NSString *)DecToFrac:(float)input {

NSArray * array = [[NSArray alloc] initWithObjects: @"",@"",@"1/8",@"",@"1/4",@"",@"3/8",@"",@"1/2",@"",@"5/8",@"",@"3/4",@"",@"3/4",@"",@"7/8",@"",nil];

int fractions = lroundf((input - (int)input)/((float)1/(float)16));
if(fractions == 0 || fractions == 16) {
    return [NSString stringWithFormat:@"%d''",lroundf(input)];
} else {
    if([[array objectAtIndex:fractions] isEqualToString:@""]) {
        return [NSString stringWithFormat:@"%d %d/16''",(int)input,fractions];
    } else {
        return [NSString stringWithFormat:@"%d %@''",(int)input,[array objectAtIndex:fractions]];
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:35:31.683

因为大多数转换只是算术问题，iOS 应该能够处理任何你给它的东西。要使用我的英寸到厘米的示例，可以尝试：

```
-(float)centimetersToInches:(float)centimeters {
    float inches = centimeters/2.54;
    return inches;
} 
```

其他一切都是存储哪个公式与哪个配对的问题。

# c++ - NTFS 多个相似属性

> ID：10291395
> 
> 赞同：0
> 
> 时间：2012-04-24T03:34:32.303
> 
> 标签：c++, windows, attributes, ntfs

NTFS 文件可能具有多个文件名属性（对应于硬链接），它们具有相同的名称（未命名）和类型 ($FILE_NAME)。

是否存在其他相同类型和名称的属性在同一文件记录中多次出现的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:09:48.983

NTFS 文件（和目录）可以有多个 $DATA 属性。这些称为备用数据流 (ADS)。见[链接](https://stackoverflow.com/questions/1809725/ntfs-alternate-data-streams)。看一个好的[pdf文档](http://www.winitor.com/pdf/NtfsAlternateDataStreams.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:54:26.253

看起来只有`$FILE_NAME`属性可以以相同的类型和名称多次出现在文件记录中。这通过查看`$AttrDef`文件内容隐含地表明，其中仅`$FILE_NAME`设置了第 2 位（索引）。其余属性类型没有设置此位。

# android - HttpConnection 中的 setAllowUserInteraction() 是什么

> ID：10291397
> 
> 赞同：5
> 
> 时间：2012-04-24T03:34:40.377
> 
> 标签：android, http, httpconnection

这种方法`setAllowUserInteraction()`在`HttpConnection`内部如何工作？ **在这种情况下，用户交互的含义是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T03:43:10.730

它应该表明如果需要系统可以要求用户提供额外的输入（例如：如果在小程序中使用并且发出需要用户名/密码的 URL 请求，这表示系统 GUI 要求用户输入可以调用）。

# css - IE CSS 百分比

> ID：10291398
> 
> 赞同：1
> 
> 时间：2012-04-24T03:34:41.140
> 
> 标签：css

我正在为一个项目创建一个网站，并且我使用百分比来浮动我的 div，以实现跨多个分辨率/浏览器的交叉兼容性。它似乎适用于 Firefox、Safari 等，但主要问题来自 IE 9。这些项目似乎留在左上角。有任何想法吗？

CSS：

```
#center-container {
    width: 960px;   
    height: 100%;
    margin:0 auto;
}
img#google {
    padding-top: 17%;   
    padding-left:35%;
    margin: 0 auto;     
}
form#searchBox {
    padding-top: 25px;
    padding-left:25%;
    margin: 0 auto; 
}
#buttons {
    padding-top: 20px;
    padding-left: 40%;  
} 
```

HTML：

```
<div id = "center-container"> 
<img id="google" src="images/google.png" width="275" height="95" />
<form id="searchBox">
    <input type="text" id = "search" name="search" size="85"/><br />        
</form>
<div id="buttons">
    <a href="javascript:void(0)" onClick="searchCensor()" class="button">Google Search</a>
    <a href="#" class="button">I'm Feeling Lucky</a>
</div>

</div> 
```

网站：andrewgu12.kodingen.com/history

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:40:22.333

您缺少 DOCTYPE 语句，因此 IE 处于怪癖模式

[http://www.quirksmode.org/css/quirksmode.html](http://www.quirksmode.org/css/quirksmode.html)

使用 doctype，即使是 HTML5 doctype 也能​​正常工作。

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:40:34.817

我在 IE8 中打开了您的页面，发现它正在以 Quirks 模式呈现。当切换到标准模式时，所有的填充效果都很好，看起来和我在 Firefox 中的效果一模一样。

当您没有正确的 Doctype 时，Quirks Mode 将激活。添加一个，你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:44:11.287

您不会添加 doctype... IE 默认不支持很少的 css 属性...所以我们必须使用 doctype 明确地使其接受..

所以使用，

< !DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 过渡//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

它会工作...

# mysql - MySQL DB 视图：两个表是否需要具有相同的名称？

> ID：10291399
> 
> 赞同：0
> 
> 时间：2012-04-24T03:34:52.783
> 
> 标签：mysql, views

我知道如何在第二个数据库中使用 *example_table* 中的 *example_table* 视图。*example_table* 的视图可以在 *different_example_table* 中使用吗？

两个表都需要同名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:38:32.780

`VIEW`只是一种保存查询的特殊对象。

所以你可以给它任何你想要的语法正确的名字

# c++ - 普通功能和模板功能之间的优先级

> ID：10291405
> 
> 赞同：6
> 
> 时间：2012-04-24T03:35:39.610
> 
> 标签：c++, templates, overloading

在下面的代码中，主函数使用普通函数而不是模板函数。

```
#include <iostream>

using namespace std;

template <class T>
void num(T t){cout<<"T : "<<t;}

void num(int a){cout<<"wT : "<<a;}

int main()
{
    num(5);
    return 0;
} 
```

这背后的可能原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T09:27:20.777

看看 Herb Sutter 的优秀文章[“为什么不专门化函数模板？”](http://www.gotw.ca/publications/mill17.htm)

去引用：

“最后，我们只关注函数模板，考虑重载规则，看看在不同的情况下调用了哪些规则。规则很简单，至少在高层次上，可以表示为经典的二分类系统：

1.  **非模板函数是一等公民**。与参数类型以及任何函数模板相匹配的普通旧非模板函数将被选择，而不是其他情况相同的函数模板。

2.  如果没有至少一样好的一等公民可供选择，那么接下来参考**二等公民的功能基础模板**。根据一组相当神秘规则：

    *   如果很明显有一个“最专业的”功能基础模板，那么就会使用那个模板。如果该基本模板恰好专门用于正在使用的类型，则将使用该专门化，否则将使用以正确类型实例化的基本模板。

    *   否则，如果“最专业”的函数基模板存在平局，则该调用是模棱两可的，因为编译器无法确定哪个是更好的匹配。程序员必须做一些事情来限定调用并说出需要哪个调用。

    *   否则，如果没有可以匹配的函数基模板，则调用是错误的，程序员将不得不修复代码。”

在您的代码示例中，正如 David Z. 所指出的那样，`void num(int a)`将选择非模板函数，因为它在第一条规则中匹配。任何其他**功能模板只有在它们更匹配时才会被考虑**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T03:38:44.587

在这种情况下，要调用模板方法，您需要使用`num<int>(5)`而不是显式调用该方法`num(5)`。尽管编译器可以推断，但非泛型方法优于泛型方法。您可以在此处查看此行为[http://ideone.com/ccDJP](http://ideone.com/ccDJP)。

# java - 如何在java中按其组件对对象的arrayList进行排序

> ID：10291406
> 
> 赞同：0
> 
> 时间：2012-04-24T03:35:41.950
> 
> 标签：java

我试图以两种不同的方式对arrayList 进行排序，一种是通过arrayList 中对象的区域，另一种是通过arrayList 中对象的名称（shape1，shape2）。当我将对象打印到文件中时，它们看起来像这样： shape1: (points, radius, etc...) area = 0.0 并且形状继续存在。我尝试查看其他类似但都使用 Collections.sort 回答的问题。我不确定我应该使用这种方法。这是我正在使用的一些代码，可以为您提供一个想法：

```
for (int i =0; i <shapes.size();i++){
    for (int j = 1; j<shapes.size(); j++){
        if (shapes.get(i).getShape().area() > shapes.get(j).getShape().area())
        {
            //
        }
        else
        {
            //
        }
    }
} 
```

我不确定我应该如何去做。任何指针？对于按名称排序，我必须使用：

```
shapes.get(i).getName() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:50:49.423

**解决方案 1**

您的对象可以实现[Comparable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html)接口并使用[Collections.sort(List list)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)进行排序。

```
public class Shape implements Comparable<Shape> {
    @Override
    public int compareTo(Shape o) {
        if(o == null) {
            return 1;
        }
        if(getName() == null || o.getName() == null) {
            return 0;
        } else if(getName() != null && o.getName() == null) {
            return 1;
        } else if(getName() == null && o.getName() != null) {
            return -1;
        }
        return getName().compareTo(o.getName());
    }
}

Collections.sort(shapes); 
```

**解决方案 2**

创建一个实现[Comparator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)并使用[Collections.sort(List list, Comparator c)的类](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

```
public class ShapeComparator implements Comparator<Shape> {
    @Override
    public int compare(Shape s1, Shape s2) {
        if(s1 == null || s2 == null) {
            return 0;
        } else {
            return s1.getName().compareTo(s2.getName());
        }
    }
}

Collections.sort(shapes, new ShapeComparator()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T03:40:44.397

看一下[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)类和[`Collections.sort(List<T>, Comparator<? super T>`)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T03:43:49.390

由于这是作业，我不会发布任何代码。

如果您不允许使用`Arrays.sort`，您可以实现[*选择排序*](http://en.wikipedia.org/wiki/Selection_sort)- 它非常简单，并且您已经在代码中编写了它的开头部分。这个想法是在外循环的每次迭代中`i`选择从`i`到`shapes.size()`使用内循环 on的段中的最小元素`j`，并将该元素放置在`i`数组的第 -th 位置。您的内部循环应如下所示：

```
for(int j = i+1 ; j<shapes.size(); j++)
//          ^--- this is what's changed 
```

现在根据您的情况，您可以将-th 元素与-th`if`交换，或者将其保持在原位并继续前进。`j``i`

要对字符串进行排序，请在您的条件下使用[`compareTo`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)方法。`if`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T03:59:15.183

我认为你应该使用这样的东西：

```
 Collections.sort(shapes, new Comparator<Object>() {
            public int compare(Object obj1, Object obj2) {
                Shape shape1 = ((Shape) obj1).getShape();
                Shape shape2 = ((Shape) obj2).getShape();

                String name1 = ((Shape) obj1).getName();
                String name2 = ((Shape) obj1).getName();

                Double area1 = shape1.area();
                Double area2 = shape2.area();

                int areaCmp = area1 - area2;
                if( areaCmp!= 0 ) {
                    return areaCmp;
                }

                return name1.compareTo(name2);
            }
        }); 
```

了解更多[信息](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)

# objective-c - 具有字符编码问题的 JSON webservice 参数

> ID：10291409
> 
> 赞同：0
> 
> 时间：2012-04-24T03:36:33.507
> 
> 标签：objective-c, json, web-services, character-encoding

我正在我的 iPhone 应用程序中使用 Web 服务（返回 JSON 格式）。一切正常，我可以使用参数调用我的 Web 服务（在下面的示例中，参数是一个包含 JSON 格式的字符串）并从我的 Web 服务中获取 JSON 答案。我的问题是我的网络服务接收到带有转义字符（UTF8）的参数。这是代码：

```
// 1 - iOS app  

NSString *parameters = @"&user={"Name":"aName","Date":"2012-04-24 02:24:13 +0000"}";
NSData   *postData   = [parameters dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];    

NSString *urlString = @"http://myWebService:80/AddUser";
NSURL *url = [NSURL URLWithString:urlString];    

unsigned long long postLength = postData.length;
NSString *contentLength = [NSString stringWithFormat:@"%ull",postLength];    

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setValue:contentLength forHTTPHeaderField:@"Content-Length"];    

[request setHTTPBody:postData];

// send the request...

------------------------------------------------------------------------------

// 2 - Web service

[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public void AddUser(string user)
{
    Dictionary<string, string> userData = new JavaScriptSerializer().Deserialize<Dictionary<string, string>>(user);

    string name = userData["Name"];   // OK here, name == "aName"
    DateTime newDateTime = DateTime.Parse(userData["Date"]);  // ERROR here because userData["Date"] returns "2012-04-24%2002:24:13%20+0000" so Parse method crash

    // ... return the JSON answer
} 
```

首先，接收到的参数仍然包含转义字符是否正常？如果是，我怎样才能把字符串“用户”：

```
{"Name":"aName","Date":"2012-04-24%2002:24:13%20+0000"} 
```

进入那个：

```
{"Name":"aName","Date":"2012-04-24 02:24:13 +0000"} 
```

否则，当我在我的 iOS 应用程序上构建我的请求时，我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:53:56.137

这本身不是[“字符编码”](http://www.joelonsoftware.com/articles/Unicode.html)问题*。*该字符串`"2012-04-24%2002:24:13%20+0000"`是简单[的 URL 编码的](http://en.wikipedia.org/wiki/Percent-encoding)。

我真的不是 Objective-C 开发人员，但看起来问题源于您设置的[`Content-Type`标题：](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Requests)

```
[request setValue:@"application/x-www-form-urlencoded; ... ] 
```

我不确定你为什么要使用`Content-Type: application/x-www-form-urlencoded`，但这对我来说肯定很有趣。发送 JSON as[`application/json`](https://stackoverflow.com/a/477819/139010)应该可以解决问题。

# ruby-on-rails - # 未定义的方法“组”

> ID：10291412
> 
> 赞同：0
> 
> 时间：2012-04-24T03:36:47.967
> 
> 标签：ruby-on-rails, ruby

在提交表单以在 Rails 应用程序中创建新对象时，我收到以下错误：

```
NoMethodError in MembersController#create

undefined method `group' for #<Member:0x007fadb5222e40>

Application Trace | Framework Trace | Full Trace
app/controllers/members_controller.rb:58:in `block in create'
app/controllers/members_controller.rb:57:in `create' 
```

我的控制器中有问题的创建方法如下：

```
def create

@group = Group.find(params[:group_id])
@user = User.find(session[:user_id])

if @user and @group and @group.group_password == params[:password]
  @member = Member.new do |m|
    m.group_id = @group.id
    m.user_id = @user.id
    m.slug = @user.username
  end
  logger.debug("#{ @member.group_id}, #{ @member.user_id}, #{ @member.slug}")
  respond_to do |format|
    if @member.save
      format.html { redirect_to @group, notice: 'Member was successfully created.' }
      format.json { render json: @member, status: :created, location: @member }
    else
      format.html { render action: "new" }
      format.json { render json: @member.errors, status: :unprocessable_entity }
    end
  end
else
  redirect_to group_join_url(@group), alert: "Invalid group password"
end

end 
```

错误中提到的第 57 行是“respond_to do |format|”

为了更好地衡量，这是我的成员模块：

```
class Member < ActiveRecord::Base
  extend FriendlyId
    friendly_id :slug, :use => :scoped, :scope => :group

  attr_accessible :group_id, :slug, :user_id

  belongs_to :groups
  belongs_to :users
end 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:41:12.873

我可能会以错误的方式看待事物，但似乎您有一个范围，`:group`而您的模型 belongs_to `:groups`（复数）代替。您的用户类上似乎没有组属性的指示 - 但是，如果关联是单数的，则会有一个。

# html - 响应式设计：隐藏或改变元素的位置更好？

> ID：10291413
> 
> 赞同：3
> 
> 时间：2012-04-24T03:36:57.390
> 
> 标签：html, css, position, responsive-design

我有两个元素（菜单项）需要在响应式设计中移动（现在只有两种变体，假设一个宽度超过 750 像素，另一个小于 750 像素）：

我应该有两个单独的 html 块，每个变体一个，并根据设计大小隐藏/显示它们吗？

或者我应该只有一种 html 块和 css 样式可以使用位置？最后一个选项与我计划的设计有点复杂，所以真正的问题可能是：拥有两个不同的 html 块是否太糟糕了？该页面将有 javascript 和 ajax 交互，虽然我不确定到什么程度。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:46:51.243

对于响应式设计，我尝试牢记一些经验法则：

*   尽可能将其保存在 CSS 中。如果你的标记是健全[的，你可以通过改变 CSS 来控制这么多。](http://www.csszengarden.com/)推论：不要过度污染 HTML。
*   尽量减少发送到浏览器的数据量。移动数据连接速度缓慢、不可靠，并且越来越受到数据限制和限制。
*   页面应该是*合理*的，没有任何 CSS。想想 Googlebot 或屏幕阅读器会“看到”什么。*任何*网站都应该如此，但这并不意味着它经常如此*。*

基于这些，我会说**不要使用两个单独的 HTML 块。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T04:09:26.070

根据我的观点，使用两个 html 块不是一个好主意...在决定隐藏哪个和显示哪个时可能会造成混淆...但是在不了解您的设计和目的的情况下，无法决定.. .但一般尽量避免两个或更多的html块......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T03:44:11.857

说明它是否“坏”是主观的，并且与您的目标有关。从可访问性的角度来看，相同的标记出现两次并只是切换隐藏一个或另一个并不理想，但是如果不了解更多关于您的设计的细节，很难确定它应该或不应该是做了一个特定的方法。我会说，一般来说，它不应该那么困难，因为你的标记不应该根据布局或设计来构建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T03:54:27.840

我认为这取决于你如何改变设计。如果只是设计具有不同的宽度、高度、图像等的情况，那么拥有多个 HTML 将违反编程的标准规则之一：

[http://en.wikipedia.org/wiki/Don%27t_repeat_yourself](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)

但是，如果设计差异是结构性的，那么使用不同的 HTML 就可以了，而不是试图通过 CSS 来强制它。

顺便说一句，如果可能，通过 CSS 实现的一个好处是，当您的老板（不可避免地）出现并要求提供专门为 1024 像素或更宽的设备设计的第三个版本时。如果您选择了 CSS 路线，那么添加另一组尺寸将需要几分钟的工作。使用 HTML 路由，您将被锁定，使一切变得更加复杂。

# ruby - ruby 正则表达式扫描与 =~

> ID：10291415
> 
> 赞同：6
> 
> 时间：2012-04-24T03:37:17.337
> 
> 标签：ruby, regex

Ruby（1.9.3）文档似乎暗示 scan 等同于 =~ 除了

1.  scan 返回多个匹配项，而 =~ 仅返回第一个匹配项，并且
2.  scan 返回匹配数据，而 =~ 返回索引。

但是，在下面的示例中，这两种方法似乎为相同的字符串和表达式返回不同的结果。这是为什么？

```
1.9.3p0 :002 > str = "Perl and Python - the two languages"
 => "Perl and Python - the two languages" 
1.9.3p0 :008 > exp = /P(erl|ython)/
 => /P(erl|ython)/ 
1.9.3p0 :009 > str =~ exp
 => 0 
1.9.3p0 :010 > str.scan exp
 => [["erl"], ["ython"]] 
```

如果第一个匹配的索引为 0，是否不应该扫描返回“Perl”和“Python”而不是“erl”和“python”？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T03:42:04.517

当给定一个没有捕获组的正则表达式时，`scan`将返回一个字符串数组，其中每个字符串代表一个正则表达式的匹配项。如果您使用`scan(/P(?:erl|ython)/)`（与您的正则表达式相同，除了没有捕获组），您将得到`["Perl", "Python"]`，这是您所期望的。

但是，当给定带有捕获组的正则表达式时，`scan`将返回一个数组数组，其中每个子数组包含给定匹配项的捕获。因此，如果您有例如 regex `(\w*):(\w*)`，您将获得一个数组数组，其中每个子数组包含两个字符串：冒号之前的部分和冒号之后的部分。在您的示例中，每个子数组都包含一个字符串：由`(erl|ython)`.

# c# - 如何使用 sql 参数进行选择查询？

> ID：10291417
> 
> 赞同：3
> 
> 时间：2012-04-24T03:37:50.807
> 
> 标签：c#, sql-server

我需要根据一组记录的“喜欢”匹配来获取记录，

我使用的以下查询不起作用。有谁知道查询有什么问题？

```
 sqlCommand.CommandText =String.Format("SELECT * FROM Customer" +
                " WHERE (Name like @Name)","'%" +searchString.Trim()+"%'");
            sqlCommand.Parameters.AddWithValue("Name", searchString); 
```

此查询未获取所需的记录。

运行上述代码段时出现以下错误：

```
Must declare the scalar variable "@Name". 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T03:42:05.687

这种方式会发生什么？

```
sqlCommand.CommandText = "SELECT * FROM Customer WHERE Name LIKE @Name;";
sqlCommand.Parameters.AddWithValue("@Name", "%" + searchString + "%"); 
```

您还可以按如下方式对其进行编码，以避免首先使用所有通配符格式：

```
sqlCommand.CommandText = "SELECT * FROM Customer WHERE CHARINDEX(@Name, Name) > 0;";
sqlCommand.Parameters.AddWithValue("@Name", searchString); 
```

如果您要坚持以不安全的方式进行操作，至少将 中的任何单引号加倍`searchString`，例如

```
searchString.Replace("'", "''") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T03:45:18.083

String.Format 需要一个占位符，例如 {0} {1} 等。

```
sqlCommand.CommandText = "SELECT * FROM Customer WHERE Name LIKE @Name;";
sqlCommand.Parameters.AddWithValue("@Name", String.Format("%{0}%", searchString)); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-02-19T02:34:33.940

If Not con.State = ConnectionState.Open Then con.Open() End If

```
 Try

        Dim cmd As New OleDbCommand("UPDATE med_records SET Medicine=@Medicine,Dosage=@Dosage,Format=@Format,Expiration_date=@Expiration_date,Quantity=@Quantity where M_id=@M_id", con)
        cmd.Parameters.AddWithValue("@Medicine", txtMedicine.Text)
        cmd.Parameters.AddWithValue("@Dosage", txt_Dosage.Text)
        cmd.Parameters.AddWithValue("@Format", txt_Format.Text)
        cmd.Parameters.AddWithValue("@Expiration_date", txt_Expirationdate.Text)
        cmd.Parameters.AddWithValue("@Quantity", NumericUpDown1.Text)
        cmd.Parameters.AddWithValue("@M_id", txt_M_id.Text)
        cmd.ExecuteNonQuery()
        MsgBox("Update data")
        con.Close()
    Catch ex As Exception
        MsgBox(ex.Message)

    End Try 
```

# javascript - 显示弹出文本框

> ID：10291418
> 
> 赞同：-1
> 
> 时间：2012-04-24T03:37:58.610
> 
> 标签：javascript, html, textbox

我需要一些帮助。我需要显示一个弹出文本框。例如，用户需要插入一个数量来显示文本框：

```
Quantity : 3 
```

如果用户插入 3，则将显示 3 文本框。

```
ID : (Textbox)
     (Textbox)
     (Textbox) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:50:48.480

html:

```
<input type="text" name="qty" id="qty" />
<input type="button" name="btn" id="btn" /> 
```

js：

```
$(function() {
    $('#btn').click(function() {
        var qty = $('#qty').val();
        if (qty > 0) {
            for (var i = 0; i < qty; i++) {
                $('body').append('<input type="text" />');
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:41:58.573

```
 for(var i=0; i<quantity; i++)
        Alert("your message"); 
```

# java - Android 开发者示例代码未正确导入

> ID：10291424
> 
> 赞同：0
> 
> 时间：2012-04-24T03:39:03.460
> 
> 标签：java, android, sample, importerror

我一直在 Eclipse IDE 中使用 Android SDK，但在使用 Android SDK 提供的示例代码时遇到了问题。

我试图让记事本示例代码（特别是 NoteEditor）工作，每个类中的每个导入都不起作用，并说它无法解析为一种类型。如果我向下滚动并导入 android.jar 文件，则所有导入都有效，但变量 R 没有。我找不到 R 在哪里使用，也不知道它到底是什么。

有谁知道我是否缺少库之类的东西，或者为什么我每次都需要导入 android.jar。我希望这些示例项目开箱即用，所以我认为这是我做错了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:52:13.420

与进口的罐子。检查 Activity java 文件顶部的导入。确保您没有导入 {anything}.R 有时 eclipse 喜欢通过导入 android.R 或其他来自动更正导入，这会破坏您的项目对 R 成员的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:57:35.757

不要进口。从 Eclipse 中的现有示例在工作区中创建新项目。

# java - 在java中获取远程tcp连接的IP地址？

> ID：10291431
> 
> 赞同：2
> 
> 时间：2012-04-24T03:40:35.440
> 
> 标签：java, networking, tcp, ip

我使用著名且出色的[Knock Knock 服务器教程](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)作为学习 Java 网络的一种方式。我尝试使用 socket.getInetAddress() 找出已连接客户端的 IP 地址，但它总是返回我的路由器 192.168.1.254 的 IP，可能是因为连接在那里弹跳。有什么方法可以获取连接到 tcp 套接字的远程客户端的正确 ip？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T03:46:15.197

试试这个：

```
ServerSocket sSock;
Socket cSock;

sSock = new ServerSocket(port_number);
cSock = sSock.accept();
System.out.println(cSock.getRemoteSocketAddress()+" connected\n"); 
```

它将打印连接客户端的整个套接字地址，如下所示：

> /127.0.0.1:1878 已连接

# android - 设备离线时刷新注册 ID C2DM

> ID：10291432
> 
> 赞同：0
> 
> 时间：2012-04-24T03:40:39.653
> 
> 标签：android, android-c2dm

我有兴趣在我的应用程序中为推送通知功能实现 C2DM。但是，当我阅读文档 [https://developers.google.com/android/c2dm/#lifecycle](https://developers.google.com/android/c2dm/#lifecycle)时 ，它​​指出：“请注意，Google 可能会定期刷新注册 ID，因此您应该在设计应用程序时了解 REGISTRATION Intent 可能被多次调用。您的应用程序需要能够相应地响应“

如果谷歌刷新注册ID时设备没有连接怎么办？当然不会调用 REGISTRATION Intent。Google 是否会尝试再次刷新注册 ID？如果不是，设备怎么知道谷歌刷新了注册ID？

谢谢，

伦迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:25:32.280

来自 Google 的 C2DM 服务器的每条消息都会放入队列中以发送到设备。因此，如果设备离线（不可用），服务器会反复尝试将其推送到设备。尽管 Google 对此不做任何保证，但大多数情况下它都能正常工作（您可以自己尝试通过向离线设备发送消息，并在几个小时后将其连接到互联网。您应该会收到您的消息）。

注册ID也是如此。如果 Google 无法将新的注册 ID 发送到设备，它会定期尝试发送，直到成功。现在的问题是：在它成功之前，旧的注册 ID 是否仍然有效？它应该，但我真诚地不能保证这一点。

# c# - 如何从 C# 调用 VB6 EXE 函数

> ID：10291434
> 
> 赞同：0
> 
> 时间：2012-04-24T03:40:58.577
> 
> 标签：c#, .net, vb6

如何从 VB6 调用 dot net exe 并将一些信息传递给它？如果可能，我可以做同样的事情，从 dot net 应用程序调用 VB6 exe 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T03:46:27.737

如果您绝对必须使用 VB6，最好的办法是从 C# 调用 VB6 函数，即使用 COM 导出您的 VB6 功能，然后使用 C# 中的 Interop 来访问它：

[从 .NET DLL 调用 VB6 方法](https://stackoverflow.com/questions/617846/calling-a-vb6-method-from-a-net-dll)

如果您只想调用 .exe，您可以使用[ShellExec](http://support.microsoft.com/kb/170918)（来自 VB）或[Process.Start](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)（来自 C#）轻松完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T03:45:46.247

使用进程类。

```
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.FileName = "MyApplication.exe";
startInfo.Arguments = "The arguments";
Process.Start(startInfo); 
```

# vba - 使用 Excel VBA 定义新单元格时出错

> ID：10291438
> 
> 赞同：1
> 
> 时间：2012-04-24T03:41:17.117
> 
> 标签：vba, excel

`cell(10,1)`如果从未使用过，则在尝试执行以下代码时出现错误。

```
Dim targetCell As Range
targetCell = Cells(10, 1) 
```

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:56:04.780

几天前我刚开始阅读一本VBA书（这可能是错误的）：

```
Set targetCell = Cells(10, 1) 
```

# java - ActiveMQ 获取从 java 中收听主题的消费者数量

> ID：10291452
> 
> 赞同：10
> 
> 时间：2012-04-24T03:42:49.810
> 
> 标签：java, activemq, jmx

我希望能够在同一个 JVM 中为嵌入式 ActiveMQ（5.4.2）代理获取从 java 中监听主题的消费者数量。JMX 真的是这里唯一的选择吗？JMX 似乎是一个糟糕的选择，因为它可以被选择性地禁用。这篇文章展示了如何使用 JMX 获取连接列表：[ActiveMQ：通过 JMX 获取连接列表？](https://stackoverflow.com/questions/7431734/activemq-get-list-of-connections-through-jmx)

我更喜欢基于非 JMX 的解决方案，因为它可能被禁用。我猜如果 JMX 在禁用时仍然可以从 java 中使用，那它就可以了。我只是熟悉启用/禁用它以与 jconsole 一起使用。

我在 API 中遗漏了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T04:09:00.950

我认为统计插件中的消费者计数应该给你你想要的。而且我相当确定可以在嵌入式代理中启用统计插件。

[http://activemq.apache.org/statisticsplugin.html](http://activemq.apache.org/statisticsplugin.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T15:18:32.417

您可以使用[咨询消息](http://activemq.apache.org/advisory-message.html)来获取队列/主题的消费者数量（除其他外），而无需使用 JMX（请参阅 ActiveMQ.Advisory.Consumer.Topic 等）...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-23T22:11:26.727

我只是通过触发这个 GET 来做到这一点：http://localhost:8161/admin/xml/queues.jsp

它以 XML 格式返回具有注册消费者的所有队列的列表：

```
<?xml version="1.0" encoding="UTF-8"?>
<queues>
    <queue name="sauer_test2">
        <stats size="0" consumerCount="0" enqueueCount="0" dequeueCount="0"/>
        <feed>
            <atom>queueBrowse/sauer_test2?view=rss&amp;amp;feedType=atom_1.0</atom>
            <rss>queueBrowse/sauer_test2?view=rss&amp;amp;feedType=rss_2.0</rss>
        </feed>
    </queue>
    <queue name="sauer_test1">
        <stats size="0" consumerCount="1" enqueueCount="1" dequeueCount="1"/>
        <feed>
            <atom>queueBrowse/sauer_test1?view=rss&amp;amp;feedType=atom_1.0</atom>
            <rss>queueBrowse/sauer_test1?view=rss&amp;amp;feedType=rss_2.0</rss>
        </feed>
    </queue>
</queues> 
```

您可以看到“consumerCount”属性并做出相应的反应。还有一个获取给定队列的所有消费者详细信息的 get 方法：http://localhost:8161/admin/queueConsumers.jsp?JMSDestination=sauer_test1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-06T14:48:41.683

在嵌入式 ActiveMQ 的情况下，您可以使用 BrokerService，让消费者依靠主题。代码在 Scala 中，但在 Java 中应该没有太大区别。

```
 import org.apache.activemq.broker.{BrokerService, TransportConnector}

            val brokerService = new BrokerService()
            brokerService.setBrokerName("localhost")
            brokerService.setUseJmx(false)
            val transportConnector: TransportConnector = brokerServiceSetup.addConnector(s"tcp://localhost:61616")
            brokerService.start()
            brokerService.getDestination(new ActiveMQTopic(topicName))
            topic.getConsumers 
```

# jquery - 如何通过提供视频 URL 从时间轴中的所需点播放 YouTube 视频

> ID：10291454
> 
> 赞同：0
> 
> 时间：2012-04-24T03:43:05.490
> 
> 标签：jquery, html

我的本地服务器上存储了一些视频文件。我希望通过给用户一个附加了第二个值的视频 URL 来从视频中的特定点开始播放。是否有任何提供此功能的 jquery 库？

我正在寻找的示例（来自 YouTube）：youtube.com/watch?v=PjDw3azfZWI&start=15

上面的链接将导致视频开始播放 15 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:37:30.483

看看[Popcorn.js](http://popcornjs.org/)

我相信这有能力通过 URL 指定起点。

# backbone.js - Backbone.js .reset() 无法引导数据

> ID：10291457
> 
> 赞同：0
> 
> 时间：2012-04-24T03:43:33.667
> 
> 标签：backbone.js

我正在学习一些 JavaScript 书籍，使用 Node.js/Express/Jade/Backbone.js 并尝试使用一个简单的 Web 应用程序来跟踪扑克锦标赛，以提高我的新手 JS 技能，学习前面提到的技术，同时制作一个不错的扑克应用程序。这是我到目前为止的代码，首先使用网络上的各种资源和 PeepCodes Backbone.js Screencast（我将 node.js 设置为后端 api）：

```
(function ($) {
    window.Tournament = Backbone.Model.extend({});

    window.Tournaments = Backbone.Collection.extend({
        model: Tournament,
        url: '/tournaments'
    });

    window.tournaments = new Tournaments();

    // I removed this line once I attempted to bootstrap the data.
    window.tournaments.fetch(); 

    window.TournamentView = Backbone.View.extend({
        tagName: 'tr',
        className: 'tournaments',

        initialize: function () {
            _.bindAll(this, 'render');
            this.model.bind('change', this.render);
            this.template = _.template($("#tournament-template").html());
        },
        render: function () {
            var renderedContent = this.template(this.model.toJSON());
            $(this.el).html(renderedContent);
            return this;
        }
    });

    window.TournamentsView = Backbone.View.extend({
        initialize: function () {
            _.bindAll(this, 'render');
            this.collection.bind('reset', this.render);
        },
        render: function () {
            $(this.el).html($("#tournaments-template").html());
            (this.collection).each(function(tournament) {
                var view = new TournamentView({
                    model: tournament,
                    collection: this.collection
                });
                $("#tournaments").append(view.render().el);
            });
            return this;
        }
    });

    window.BackboneTournaments = Backbone.Router.extend({
        routes: {
            '': 'tournaments'
        },
        initialize: function () {
            this.tournamentsView = new TournamentsView({
                collection: window.tournaments
            });
        },
        tournaments: function () {
            $("#container").empty();
            $("#container").append(this.tournamentsView.render().el);
        }
    });

    $(function() {
        window.App = new BackboneTournaments();
        Backbone.history.start({});
    });

})(jQuery); 
```

这完美地工作。我有一个页面，上面有一张扑克锦标赛的填充表。但是在我尝试引导数据以使其在页面加载后不获取它（并在几分之一秒内显示一个未填充的表）之后，它不再起作用。我将以下代码放在应用程序的一页（app.jade，一个 Jade 模板）的正文中，紧跟在 Backbone.js 使用的容器 (#container) 之后，还删除了 windows.tournaments.fetch( ); 从上面的代码行。

```
script(type="text/javascript")
    tournaments.reset(!{JSON.stringify(tournies)}); 
```

tournies 对象从渲染它的 Node.js 路由传递到 Jade 模板 (app.jade)。使用 Firebug，我可以看到 reset() 函数成功地以 JSON 格式获取数据，并且表正在由 Backbone 创建......但它没有被填充。任何帮助将不胜感激，因为我完全不知道问题是什么。另外，如果我在问题的结构中犯了任何错误，我深表歉意，因为我以前没有在这里发布过。如果我有，请随时告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:22:24.927

我的第一个猜测是，执行脚本时文档还没有准备好，试试这个：

```
 $(document).ready(function(){
   tournaments.reset(!{JSON.stringify(tournies)});
 }); 
```

我的第二个是您需要查看 JSON 数据。尝试去控制台，手动将一些锦标赛添加到集合中，看看结果是什么，也许解析时出现了某种错误。

A side note on your code, to organize your code better you should use the module pattern and name things with a schema like this: [http://ricostacruz.com/backbone-patterns/#namespace_convention](http://ricostacruz.com/backbone-patterns/#namespace_convention)

# c# - 动态创建级联委托

> ID：10291460
> 
> 赞同：1
> 
> 时间：2012-04-24T03:43:40.617
> 
> 标签：c#, .net

我想写一系列相互调用的代表。它有点像多播委托，但并非如此——它是“串行”的串行需求。每个委托的内部逻辑表明，每个后续调用必须来自先前的委托，而不是来自编组机制。

**示例**：

```
 [Test]
    public void Test2() {
        Action a = () => {
            Action b = () => {
                Action c = () => {
                    Console.WriteLine("test");
                };
                c.Invoke();
            };
            b.Invoke();
        };
        a.Invoke();
    } 
```

这看起来可以通过 codegen 实现，但我不想那样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:39:59.883

代表的链接列表怎么样？像这样的东西：

```
public class Node
{
    protected Node Next { get; private set; }

    private Delegate m_actionDel;
    private object[] m_args;

    public Node(Node next, Delegate actionToPerform)
    {
        Next = next;
        m_actionDel = actionToPerform;
    }        

    public void InvokeChain()
    {
        try
        {
            m_actionDel.DynamicInvoke(m_args);
        }
        catch(Exception e)
        {
            // handle exception
        }

        if (Next != null)
            Next.InvokeChain();
    }
} 
```

这只是一个草稿，我还没有真正编译或运行这段代码，但它应该给你一个想法。

# .net - 我可以更改默认的卫星组件文件夹结构吗？

> ID：10291466
> 
> 赞同：0
> 
> 时间：2012-04-24T03:44:35.380
> 
> 标签：.net, wpf, assemblies, cultureinfo

来自[http://msdn.microsoft.com/en-us/library/sb6a8618(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/sb6a8618(v=vs.80).aspx) 似乎我需要在主执行程序集文件夹下有文化文件夹，例如它将是“myprogram/ de/", "myprogram/en/" 但是，我想知道我是否可以做一些类似 "myprogram/resources/de/", "myprogram/resources/en/" 这样我就不会有一堆资源文件夹主要项目地点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:45:19.153

是的。但是，您必须有一个 .config 文件。

例如，我们有一个 file.exe，在 File.exe.config 中有以下内容：

```
<?xml version="1.0"?>
<configuration>
   <runtime>
      <loadFromRemoteSources enabled="true"/>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
        <probing privatePath="Resources;"/>
      </assemblyBinding>
   </runtime>
</configuration> 
```

现在您必须确保已安装此 file.exe.config 并与 .exe 文件位于同一目录中。

# c++ - 使用函数指针在类之间传递数据

> ID：10291467
> 
> 赞同：2
> 
> 时间：2012-04-24T03:44:38.993
> 
> 标签：c++, class, function, pointers, member

我试图通过传递一个函数指针来让这样的东西工作。我知道您可以将第一个类的指针传递给第二个类，然后让第二个类通过指针触发第一个类的成员函数。但我不希望二等舱依靠知道谁是一等舱。这更像是我正在寻找实现这一目标的编码风格。谢谢

```
//////////////////////////////////////////////////
class Second
{
public:
    Second::Second(void (*SecondTriggered)(void));
};

Second::Second(void (*SecondTriggered)(void))
{
    SecondTriggered();
}

//////////////////////////////////////////////////
class First
{
public: 
    First::First();
    void SecondTriggered();
    Second *second;
};

First::First(){
        printf("first class was created"); 
    second = new Second(SecondTriggered);
}

void First::SecondTriggered(){
    printf("second class was created and responded"); 
}

/////////////////
int main()
{
    First *first = new First();
 } 
```

我收到此错误：

```
error C3867: 'First::SecondTriggered': function call missing argument list; 
use '&First::SecondTriggered' to create a pointer to member 
```

有任何想法吗。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T04:01:32.130

您正在尝试传递需要独立函数的非静态类成员。要执行您正在尝试的操作，您必须执行以下操作：

```
class Second
{
public:
    Second::Second(void (*SecondTriggered)(void*), void *arg);
};

Second::Second(void (*SecondTriggered)(void*), void *arg)
{
    SecondTriggered(arg);
}

//////////////////////////////////////////////////
class First
{
public: 
    First::First();
    static void SecondTriggered(void *arg);
    Second *second;
    void DoSomething();
};

First::First(){
    printf("first class was created"); 
    second = new Second(&SecondTriggered, this);
}

void First::SecondTriggered(void *arg){
    printf("second class was created and responded"); 
    static_cast<First*>(arg)->DoSomething();
}

void First::DoSomething(){
    printf("first class did something");
}

/////////////////
int main()
{
    First *first = new First();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T04:21:06.047

请记住，指向成员函数的指针和函数指针是非常不同的。您必须有一个对象来调用指向成员函数的指针。如果你想使用指向成员函数的指针，下面的代码可以工作（我只展示了让你的代码工作的语法。我建议在使用指向成员函数的指针之前理解 C++ 概念）：

```
#include <stdio.h>
//////////////////////////////////////////////////
class First; // Forward declaration needed

class Second
{
public:
    Second(void (First::*SecondTriggered)(void), First& f);
};

Second::Second(void (First::*SecondTriggered)(void), First& f)
{
    (f.*SecondTriggered)();
}

//////////////////////////////////////////////////
class First
{
public: 
    First();
    ~First() { delete second;} // Fix memory leak
    void SecondTriggered();
    Second *second;
};

First::First(){
    printf("first class was created\n"); // What are you using printf in C++? 
    second = new Second(&First::SecondTriggered, *this);
}

void First::SecondTriggered(){
    printf("second class was created and responded\n"); 
}

/////////////////
int main()
{
    First first; // No reason to use new here
} 
```

请阅读[此常见问题解答](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T04:26:27.713

您应该阅读[如何在 C++ 中实现回调？](https://stackoverflow.com/questions/3381829/how-do-i-implement-a-callback-in-c)并特别注意对[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的引用。如果您有两个这样紧密耦合的类，那么您可能需要重新考虑您的设计，因为测试它们很快就会变成一场噩梦。

也就是说，这里是如何完成你开始的实施......

```
#include <iostream>

class First;

// Typedefs make this much more readable: http://www.parashift.com/c++-faq-lite/pointers-to-members.html#faq-33.5
typedef void (First::*SecondTriggeredCallback)(void);

// And macros make the call much more readable:  http://www.parashift.com/c++-faq-lite/pointers-to-members.html#faq-33.6
#define CALL_MEMBER_FN(object, ptrToMember) ((object).*(ptrToMember))

class Second
{
public:
    // You'll also need an *instance* of the First class
    Second(SecondTriggeredCallback SecondTriggered, First& first)
    {
        CALL_MEMBER_FN(first, SecondTriggered)();
    }
};

class First
{
private:
    Second *second;

public:
    First()
    {
        std::cout << "first class was created" << std::endl;
        second = new Second(&First::SecondTriggered, *this);
    }

    ~First()
    {
        delete second;
    }

    void SecondTriggered()
    {
        std::cout << "second class was created and responded" << std::endl;
    }
};

int main()
{
    First first;
} 
```

[看它跑](http://ideone.com/7USO1)！

* * *

这是一个使用模板消除耦合的版本：

```
#include <iostream>

// Macros make the call much more readable: http://www.parashift.com/c++-faq-lite/pointers-to-members.html#faq-33.6
#define CALL_MEMBER_FN(object, ptrToMember) ((object).*(ptrToMember))
template <class T>
struct Second
{
    // Typedefs make this much more readable: http://www.parashift.com/c++-faq-lite/pointers-to-members.html#faq-33.5
    typedef void (T::*SecondTriggeredCallback)(void);

    // You'll also need an *instance* of the "T" class
    Second(SecondTriggeredCallback SecondTriggered, T& t)
    {
        CALL_MEMBER_FN(t, SecondTriggered)();
    }
};

class First
{
public:
    First()
        :second(NULL)
    {
        std::cout << "first class was created" << std::endl;
        second = new Second<First>(&First::SecondTriggered, *this);
    }

    ~First()
    {
        delete second;
    }

    void SecondTriggered()
    {
        std::cout << "second class was created and responded" << std::endl;
    }

private:
    First(const First&);
    First& operator =(const First&);
    Second<First>* second;
};

int main()
{
    First first;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T04:28:17.177

你也可以考虑传递一个函数对象：

```
class t_func {
protected:
    t_func() {
    }

    virtual ~t_func() {
    }

public:
    virtual void operator()() = 0;
private:
    t_func(const t_func&) = delete;
    t_func& operator=(const t_func&) = delete;
};

class Second {
public:
    Second(t_func& func);
};

Second::Second(t_func& func) {
    func();
}

class First {
public:
    First();
private:
    void SecondTriggered();
    Second* second;
};

First::First() {
    printf("first class was created\n");

    class t_trigger : public t_func {
    public:
        t_trigger(First& pFirst) : t_func(), first(pFirst) {
        }

        virtual void operator()() {
            return first.SecondTriggered();
        }

    private:
        First& first;
    };

    t_trigger trig(*this);
    second = new Second(trig);
}

void First::SecondTriggered() {
    printf("second class was created and responded\n");
}

int main() {
    First* first = new First();

    delete first;
    return 0;
} 
```

# python - Python - 线程和 urlopen (urllib2) 和解析

> ID：10291474
> 
> 赞同：-1
> 
> 时间：2012-04-24T03:45:18.977
> 
> 标签：python, multithreading, urllib2

提前抱歉占用您的时间，但我真的被阻止了！

我在 Python 中很牛，但我努力学习，我试图让这个脚本运行。它在没有线程的情况下工作，但为了学习和提高我的 python 技能，我想了解这出了什么问题！

问题： - 脚本永远不会结束 - 它没有解析任何东西...... urlopen 的东西似乎无法正常工作

非常感谢您的帮助，我还在努力:-)

```
import Queue
import threading
import urllib2
from urllib2 import urlopen
import time
from bs4 import BeautifulSoup as BeautifulSoup
import xlwt
import time
import socket

socket.setdefaulttimeout(20.0)

class Retry(object):
    default_exceptions = (Exception,)
    def __init__(self, tries, exceptions=None, delay=0):
        """
        Decorator for retrying a function if exception occurs

        tries -- num tries 
        exceptions -- exceptions to catch
        delay -- wait between retries
        """
        self.tries = tries
        if exceptions is None:
            exceptions = Retry.default_exceptions
        self.exceptions =  exceptions
        self.delay = delay

    def __call__(self, f):
        def fn(*args, **kwargs):
            exception = None
            for _ in range(self.tries):
                try:
                    return f(*args, **kwargs)
                except self.exceptions, e:
                    print "Retry, exception: "+str(e)
                    time.sleep(self.delay)
                    exception = e
            #if no success after tries, raise last exception
            raise exception
        return fn

@Retry(5)
def open_url(source):
    print("OPENING %s" % source)
    print("Retrying to open and read the page")
    resp = urlopen(source)
    resp = resp.read()
    return resp

queue = Queue.Queue()
out_queue = Queue.Queue()

class ThreadUrl(threading.Thread):
    """Threaded Url Grab"""
    def __init__(self, queue, out_queue):
        threading.Thread.__init__(self)
        self.queue = queue
        self.out_queue = out_queue

    def run(self):
        while True:
            #grabs host from queue
            host = self.queue.get()

            #grabs urls of hosts and then grabs chunk of webpage
            chunk = open_url(host)
            #chunk = url.read()

            #place chunk into out queue
            self.out_queue.put(chunk)

            #signals to queue job is done
            self.queue.task_done()

class DatamineThread(threading.Thread):
    """Threaded Url Grab"""
    def __init__(self, out_queue):
        threading.Thread.__init__(self)
        self.out_queue = out_queue

    def run(self):
        global x
        while True:
            #grabs host from queue
            chunk = self.out_queue.get()

            #parse the chunk
            soup = BeautifulSoup(chunk)
            #print soup
            tableau = soup.findAll('table')
        rows = tableau[1].findAll('tr')
            print("DONE")
        for tr in rows:
            cols = tr.findAll('td')
                y = 0
                x = x + 1
            for td in cols:
                    texte_bu = td.text
                    texte_bu = texte_bu.encode('utf-8')
            print texte_bu
                    ws.write(x,y,td.text)
                    y = y + 1
        wb.save("IA.xls")

            #signals to queue job is done
            self.out_queue.task_done()
            break

start = time.time()
def main():

    #spawn a pool of threads, and pass them queue instance
    for i in range(13):
        t = ThreadUrl(queue, out_queue)
        t.setDaemon(True)
        t.start()

    #populate queue with data
    for host in hosts:
        queue.put(host)

    for i in range(1):
        dt = DatamineThread(out_queue)
        dt.setDaemon(True)
        dt.start()

    #wait on the queue until everything has been processed
    queue.join()
    out_queue.join()

global x
x = 0

wb = xlwt.Workbook(encoding='utf-8')
ws = wb.add_sheet("BULATS_IA_PARSED")

Countries_List = ['Afghanistan','Armenia','Brazil','Argentina','Armenia','Australia','Austria','Azerbaijan','Bahrain','Bangladesh','Belgium','Belize','Bolivia','Bosnia and Herzegovina','Brazil','Brunei Darussalam','Bulgaria','Cameroon','Canada','Central African Republic','Chile','China','Colombia','Costa Rica','Croatia','Cuba','Cyprus','Czech Republic','Denmark','Dominican Republic','Ecuador','Egypt','Eritrea','Estonia','Ethiopia','Faroe Islands','Fiji','Finland','France','French Polynesia','Georgia','Germany','Gibraltar','Greece','Grenada','Hong Kong','Hungary','Iceland','India','Indonesia','Iran','Iraq','Ireland','Israel','Italy','Jamaica','Japan','Jordan','Kazakhstan','Kenya','Kuwait','Latvia','Lebanon','Libya','Liechtenstein','Lithuania','Luxembourg','Macau','Macedonia','Malaysia','Maldives','Malta','Mexico','Monaco','Montenegro','Morocco','Mozambique','Myanmar (Burma)','Nepal','Netherlands','New Caledonia','New Zealand','Nigeria','Norway','Oman','Pakistan','Palestine','Papua New Guinea','Paraguay','Peru','Philippines','Poland','Portugal','Qatar','Romania','Russia','Saudi Arabia','Serbia','Singapore','Slovakia','Slovenia','South Africa','South Korea','Spain','Sri Lanka','Sweden','Switzerland','Syria','Taiwan','Thailand','Trinadad and Tobago','Tunisia','Turkey','Ukraine','United Arab Emirates','United Kingdom','United States','Uruguay','Uzbekistan','Venezuela','Vietnam']
hosts = ["http://www.cambridgeesol.org/institutions/results.php?region=%s&type=&BULATS=on" % Countries for Countries in Countries_List]

main()

print "Elapsed Time: %s" % (time.time() - start) 
```

PS：另外，你认为 urllib3 (keep-connexion) 在这种情况下有用吗？你能解释一下谁来实现它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:18:28.740

脚本不会结束，因为 run 方法包含无限循环，没有什么可以让它们跳出这个循环

```
while True: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T03:49:08.300

我必须承认我没有审查您发布的全部代码，但是“线程”和“urllib2”一起足以引起警报。

不要尝试将 urllib2 用于单线程同步连接之外的任何东西！不是因为 urllib2 有什么问题，而仅仅是因为这个问题已经解决了，而且解决方案在[Twisted](http://twistedmatrix.com)中，这是一个文档齐全且使用良好的 Python 异步网络库。

# android - adb reboot 命令挂起模拟器选项

> ID：10291478
> 
> 赞同：1
> 
> 时间：2012-04-24T03:45:55.897
> 
> 标签：android, build, emulation, dalvik, reboot

我想制作新构建的文件 libdvm.so（在对 vm 代码进行一些更改之后）。构建后我得到了文件。我使用将文件推送到模拟器中

```
$ adb push libdvm.so /system/lib/libdvm.so 
```

由于要进行更改，我尝试使用

```
$adb reboot 
```

但这使模拟器挂断了。对这个问题有什么解决方案或建议吗？我也尝试过早期的 android 版本，但结果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:52:16.687

如果您从头开始构建 dalvik，为什么不直接构建仿真器和通用仿真器系统映像呢？

```
cd <android_source>
source build/envsetup.sh
lunch full-eng
make -j4
out/host/linux-x86/bin/emulator 
```

# java - 有没有办法生成所有类/方法的列表（没有实现）并使用 eclipse 保存为文本文件？

> ID：10291484
> 
> 赞同：1
> 
> 时间：2012-04-24T03:46:59.830
> 
> 标签：java, eclipse

通常 c++ 有一个头文件，但我只想让 java 生成所有类/方法的列表并将其保存为文本文件。这是我的报告的要求之一。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:08:54.857

Google[反射](http://code.google.com/p/reflections/)将以编程方式生成指定包中的类列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:03:33.390

其他人已经建议使用 javadoc，类似的方法是 doxygen。当您只需要纯文本时，只需`javap`在所有类文件上运行（您不说您使用哪个系统，在 unix 下您会使用`find basedir -name *.class -exec javap {} ;`.

那应该完全创建您想要的。

javap 是来自 sdk（类文件反汇编器）的实用程序。

默认只打印公共、包和受保护的类和成员，但如果你想要更多（也是私有的）或更少（只是公共的），你可以用命令行开关控制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:50:45.470

如果适合您，您可以[自动生成 Javadoc](https://stackoverflow.com/questions/29689/javadoc-template-generator)，然后将其复制到文本中。

如果您只需要描述，那么只需为您想要的可见性级别生成 Javadoc 就`Project -> Generate Javadoc`足够了。它将为您提供 html 格式的 Javadoc。

此外，编写 Javadoc 是一个好习惯；它可以为您的下一份报告节省大量时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T03:58:48.923

如果你有一些时间和创造力，你可以创建一个小程序，它将从你的项目的根目录开始，获取所有文件名的列表并保存到一个文本文件中。

谢谢阿比

# php - PHP 中的 Twitter 流 API 错误

> ID：10291487
> 
> 赞同：1
> 
> 时间：2012-04-24T03:47:33.447
> 
> 标签：php, twitter

我正在使用[140dev Twitter Database Server (PHP)](http://140dev.com/free-twitter-api-source-code-library/twitter-database-server/)以下代码，因为我在 get_tweet.php 中遇到错误

> 致命错误：在线 \htdocs\140dev\db\get_tweets.php 中超过了 30 秒的最大执行时间。

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:51:16.573

您的脚本超出了分配给脚本运行的最长时间（默认为 30 秒）。请参阅[`max_execution_time`](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)您的配置 (php.ini) 文件。

您可能不想更改当前设置，因为问题可能出在脚本本身。可能是您的脚本由于其设计而被拖出。如果没有更多细节，我们不能说。

此外，问题可能出在推特上（尽管可能性不大）。但是，如果您的脚本要等待 30 秒才能从 Twitter 获得响应，那么在我看来，这似乎是脚本本身的设计问题。

# matlab - 如何在matlab中检查数组中的所有元素是否相同？

> ID：10291488
> 
> 赞同：39
> 
> 时间：2012-04-24T03:48:24.300
> 
> 标签：matlab

必须有一个简单的matlab方法来做到这一点。我有一个行向量，我想检查所有元素是否相等。在循环中强制执行此操作很容易，但要寻找更有效的方法:) 元素是整数

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-24T03:50:13.750

我认为它可以很简单

```
if all(v == v(1)) 
```

另一种方法是

```
if range(v) == 0 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T07:55:10.497

另一种解决方案：

```
numel(unique(v))==1 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-07T20:33:31.820

怎么样：`max(v) == min(v)`？:-)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-24T13:21:37.780

另一种解决方案：

```
sum(abs(diff(v))) == 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-09T02:58:11.713

您甚至不需要上述`all`解决方案中的`if v == v(1)`.

# python - 在 perl 或 python 中将行转换为列

> ID：10291489
> 
> 赞同：1
> 
> 时间：2012-04-24T03:48:26.940
> 
> 标签：python, perl

我有这样的数据：

```
Re: Building A

Month
kWh
1
100
2
110
3
105

Re: Building B

Month
kWh
1
200
2
210
3
205 
```

我想将它转换为每个建筑物的多个文本文件。我的计划是：

1.  提取建筑物分隔线之间的值
2.  将行转换为表格

对于任务（1），我尝试像这样使用触发器运算符：

```
while( <DATA> ) {
  next unless /^Re: Building A/ .. /^Re: Building B/;
  my $line = $_;
  print $line;
} 
```

但它不起作用，因为上面将只显示建筑物 A 的数据。这些数据是针对多个建筑物（其中大约 50 个）的，所以我需要在某种程度上递归地执行此操作。我还没有开始做任务（2）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:03:31.943

我会做这样的事情：

```
#!/usr/bin/perl
use strict;
use warnings;

my %buildings;

while (<DATA>) {
    chomp;
    $buildings{$1} = [] if /^Re: Building ([AB])/;
    push @{$buildings{$1}}, $_ if $_;
}

while (my ($building, $data) = each %buildings) {
    open(my $out, '>', "$building.txt") or die "Unable to open file for writing: $!\n";

    for my $i (1 .. $#$data / 2) {
        print $out sprintf "%s\t%s\n", $data->[$i*2-1], $data->[$i*2];
    }
    close $out;
} 
```

一个.txt：

```
Month   kWh
1       100
2       110
3       105 
```

B.txt：

```
Month   kWh
1       200
2       210
3       205 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:07:43.487

我认为你可能会用一张桌子做得很好，所以我会告诉你如何做你要求的和我认为好的。

```
$name = "";
$data = {}; 
open(IN, "build.txt");
foreach my $line (<IN>){
    if($line =~ /Re: (.*)\n/) { # get building name
        $name = $1;
        $name =~ s/ /_/;
        $data->{$name} = []; # link to empty array
    } else {
        # make a new list and return to a list
        @{$data->{$name}} = (@{$data->{$name}}, $line); # add line to current building data
    }
}
close IN;
#
# write on file for each
#
foreach my $name (keys %{$data}){
    open(OUT, ">$name.txt");
    foreach my $line (@{$data->{$name}}){
        print OUT $line;
    }
    close OUT;
}
#
# or write into one file as a table
#
open(OUT, ">tabledata.txt");
foreach my $name (keys %{$data}){
    # because the data was not filtered on import we filter it now
    my $flag = 0;
    my @data; 
    foreach my $line (@{$data->{$name}}){
        if($line =~ /kWh/) {
            $flag = 1;
        } elsif($line =~ /^\n$/){ # skip blanks
        } elsif($flag == 1) {     # skip the counters
            $flag++; 
        } elsif($flag > 1) {
            chomp($line);
            @data = (@data, $line);
            $flag = 1;
        }   
    }
    # print pretty rows
    my $format = "%20s" . ("%10d" x @data);
    print OUT sprintf($format, $name, @data) . "\n";

}
close OUT; 
```

这会为每个建筑物创建一个带有建筑物名称的文件。Building_A.txt 的一个示例是：

```
Month
kWh
1
100
2
110
3
105 
```

表文件名为 tabledata.txt，如下所示：

```
 Building_A       100       110       105
          Building_B       200       210       205 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T03:53:42.680

在 python 中，我会将文本文件解析为数据结构，然后使用[asciitables](http://cxc.harvard.edu/contrib/asciitable/)输出它。理想情况下，您不会真正直接操作字符串，而是解析，然后显示为单独的操作。

您如何准确地进行解析取决于诸如文件格式的规则性以及您是否需要容忍文件中的错误或拼写错误等因素。

# java - 您能否提供一些伪代码来显示迷宫的路径？

> ID：10291493
> 
> 赞同：0
> 
> 时间：2012-04-24T03:48:36.873
> 
> 标签：java

我正在尝试编写一个算法来查找并显示迷宫中的路径。

迷宫轮廓从输入文件中读取并存储在二维数组中。

我需要在点 (1,1) 开始迷宫并找到穿过迷宫的任何路径。

我有一个 findpath() 方法，我可以用我写的东西找到出口，但是在找到出口后，我需要通过弹出堆栈来显示我到达那里的路径（这是我目前无法做到的，是我需要什么帮助）。找到目标后，堆栈应弹出完成，并且仅包含找到目标所采用的路径。（此时我只会更改这些房间内的值，但我知道该怎么做）

请查看我的推送发生在哪里，并就应该推送和弹出的顺序提供一些指导，以便满足上述标准。

非常感谢任何帮助。谢谢你。

这是当前输出： o 最初是一个空白空间，但当检测为目标时，它已更改

```
********************
*     *            *
** ** ***** ** *****
*  *  *      * *   *
*  *    *    * * * *
*       *        * *
*************  **  *
*                  O
******************** 
```

* * *

代码：

```
 public void findPath() {  
    Room start = rooms[1][1];
    push(start);
    while(!isEmpty()) { 
        current = pop();
        System.out.println("The value stored in current is" + current.getValue()+ "");
        if (current == null) 
            System.out.println("current is null");
        //This is finding the goal the walls will contain a * 
        else if(current.getValue() == ' ' && current.getRight() == null || current.getValue() == ' ' && current.getLeft() == null || current.getValue() == ' ' && current.getUp() == null || current.getValue() == ' ' && current.getRight() == null){
            current.setValue('O');
            for(int i = 0; i < tos; i++ ){
                pop();
            }

        System.out.println(" I found the end here is the path:" + current.getPrevious().getValue()+ " jjj");
        } else if(current.getBlocked() == false && current.getVisited() == false) {
            System.out.println("pushing currents neighbors left, right....etc" +  "current is at" + current.getCord());
            current.setVisited(true);
            if(current.getRight() != null){
                current.getRight().setPrevious(current);
                push(current.getRight());
                System.out.println("Inside push 1" +current.getRight().getCord());
            } else {
                System.out.println("Inside push right is null");
            }
            if(current.getLeft() != null) {
                current.getLeft().setPrevious(current);
                push(current.getLeft());
                System.out.println("Inside push 2 " + current.getLeft().getCord());
            } else {
                System.out.println("Inside push left is null");
            }
            if(current.getUp() != null)  {
                current.getUp().setPrevious(current);
                push(current.getUp());
                System.out.println("Inside push 3" + current.getUp().getCord());
            } else {
                System.out.println("Inside push up is null");
            }
            if(current.getDown() != null) {
                current.getDown().setPrevious(current);
                push(current.getDown());
                System.out.println("inside push 4" + current.getDown().getCord());
            }
        } else {
            System.out.println("Inside push down is null");
        }
    }
    for(int i = 0; i < rows ; i++) {
        for(int j = 0; j < columns ; j++) {
            System.out.print(rooms[i][j].getValue());
        }   
    System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:26:23.483

不是伪代码，而是一个话题：

想想你是如何穿越迷宫的。如果您在使用最佳路径时始终留下“面包屑”，那么您将标记您的最佳路径。

# javascript - moment.js - 显示日期或时间

> ID：10291495
> 
> 赞同：9
> 
> 时间：2012-04-24T03:49:11.210
> 
> 标签：javascript, momentjs

在我正在构建的页面上，需要显示日期（例如：8 月 15 日），或者，如果日期是今天，则只显示时间，例如：晚上 10 点。

从 moment.js 中哄骗这种行为的最佳方法是什么？

我想要的日期格式是“d MMM”，时间格式是“hA”（如果分钟为 0）或“h:mmA”（如果分钟不是 0）。

关于如何解决这个问题的任何想法？看起来 calendar() 函数可能能够支持类似的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T04:13:29.407

您想使用[moment.calendar](http://momentjs.com/docs/#/customization/calendar/)：设置除*d MMMM*和*h:mmA*之外`sameDay`的所有内容。你不能做比这更细的颗粒。*`sameDay`*

 **```
function timeTodayDateElse(date){
    moment.lang('en', {
        'calendar' : {
            'lastDay' : 'D MMMM',
             'sameDay' : 'h:mmA',
            'nextDay' : 'D MMMM',
            'lastWeek' : 'D MMMM',
            'nextWeek' : 'D MMMM',
            'sameElse' : 'D MMMM'
       }
    });

    return moment(date).calendar();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T22:15:26.573

你可以自己写一个微插件来做这件事。

```
moment.fn.formatTimeToday = function () {
    var now = moment(),
        format = "d MMM";
    if (this.date() === now.date() && 
        Math.abs(this.diff(now)) < 86400000) {
        // same day of month and less than 24 hours difference
        if (this.minutes() === 0) {
             format = "hA";
        } else {
             format = "h:mmA";
        }
    }
    return this.format(format);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T03:54:17.613

快速的 Google 搜索（moment.js 相对时间）提供了该文档的[链接。](http://momentjs.com/docs/#/customization/relative-time/)您应该能够使用所需的格式字符串对其进行自定义。**

# objective-c - 回收带有 UIImageViews 的 UIViews - 出现旧图像

> ID：10291501
> 
> 赞同：0
> 
> 时间：2012-04-24T03:50:39.207
> 
> 标签：objective-c, uiview, uiimageview

我正在回收其中包含 UIImageViews 的 UIViews。因此，当其中一个被重新使用时，我要做的第一件事就是清除它显示的旧图像。我似乎无法让它工作。我目前的代码是：

```
[self.imageView removeFromSuperview];
self.imageView = nil; 
```

然后我重新分配/初始化`UIImageView`，`UIImage`等等。这似乎没有奏效。旧图像出现，然后新图像出现在它上面。我还需要做什么来清除旧图像？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T18:39:29.843

如果你正在释放你的 UIImageView，你会失去很多回收视图的好处，因为你只是在重建它们。

当您回收 UIView 时，请确保将 UIImageView 的**image**属性设为 nil - 这样，当 UIView 处于回收状态时，您不会保留 UIImage - 这样做没有意义。

当您将 UIView 从回收中取出以重新使用它时，图像应该已被清除，您可以使用新的图像数据重置 UIImageView 的**图像**属性。此时您应该会看到新图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:27:39.580

的演示模型可能很脏`UIView`。`CALayer`尝试：

```
[self setNeedsDisplay]; //force refresh 
```

# c++ - 为我的模板化双向链表创建迭代器时出现问题

> ID：10291507
> 
> 赞同：1
> 
> 时间：2012-04-24T03:51:02.287
> 
> 标签：c++, templates, iterator, linked-list

我正在创建一个我自己的双向链表实现，并且我已经完成了列表本身的编写，但现在我正在尝试向它添加一个迭代器，但我对这些东西的语法规则感到困惑。这是我得到的错误：

```
error C2990: 'd_list' : non-class template has already been declared as a class template 
```

这是它全部位于的头文件：

```
/****************************/
/* d_list class             */
/* with exceptions classes  */
/****************************/
class d_list_error{};
class d_list_empty{};

template <class T>
class d_list_iter;

template <class T>
class d_list{
public:
    d_list();
    d_list(const d_list &_dl);
    d_list &operator=(const d_list &_dl);
    ~d_list();

    void push_back(T item);
    void push_front(T item);

    void pop_back();
    void pop_front();

    bool isEmpty() const;
    unsigned int size() const;

    void clear();
private:
    struct node{
        node *prev; 
        node *next;
        T    data;
    };
    node             *head;
    node             *tail;
    unsigned int     currSize;
    d_list_iter<T>   *dli;

    /* Utility Functions */
    void initFirstEle(T item, node* first);
    void copyAll(const d_list<T> &_dl);
};

/*************************/
/* d_list iterator class */ 
/*************************/

class d_iter_already_exists {};

template <class T>
class d_list_iter{
public:
    d_list_iter(const d_list &_dl);
    ~d_list_iter();
    T getNext() const;

private:
    friend class d_list;
    d_list<T>   *dl;
    node        *next;
    node        *prev;
    bool        valid;
}; 
```

下面是为 d_list 定义的所有成员函数。我还没有开始为迭代器编写它们。根据我的所有测试，d_list 运行良好。我想我只是遇到了语法错误，因为这对我来说是一个未知的领域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:55:48.140

您必须通过在类声明之外指定模板参数来指定模板类型。

具体来说，你应该写（类似的东西）`d_list<T>`而不是简单地`d_list`在`template <typename> class d_list_iter`'s 声明中。这包括您使用`friend`.

同样适用于节点。假设它们是公开的用于演示：

`typename d_list<T>::node`而不是简单地`node`在`template <typename> class d_list_iter`'s 声明中。

# javascript - CodeMirror 和 jQuery .keyup

> ID：10291510
> 
> 赞同：1
> 
> 时间：2012-04-24T03:51:49.270
> 
> 标签：javascript, jquery, codemirror

很难解释，但是当我输入常规文本区域时，我希望它更新 CodeMirror 文本区域。我正在使用 jQuery 的 keyup();，但它不起作用，我不知道为什么。我究竟做错了什么？

[http://jsfiddle.net/mretchin/VH25w/14/](http://jsfiddle.net/mretchin/VH25w/14/)

要测试，只需输入#test1

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:18:26.207

参考：[CodeMirror 手册](http://codemirror.net/doc/manual.html#fromTextArea)

检查这个**[演示](http://jsfiddle.net/dhirajbodicherla/VH25w/17/)**

1.  used `setValue`，而不是引用 textarea used`codemirror`对象
2.  为 textarea 修改了 jquery 包装器

希望这可以帮助

# linux - 麻省理工学院计划 REPL 历史

> ID：10291511
> 
> 赞同：10
> 
> 时间：2012-04-24T03:52:02.157
> 
> 标签：linux, command-line, scheme, read-eval-print-loop, mit-scheme

我已经使用 MIT-Scheme 有一段时间了，效果很好。但是，在 REPL 模式下，我真的很怀念我输入的所有命令的历史记录。如果出现小的印刷错误，重新输入一段代码是非常令人沮丧的。

如何启用该`history`模式？（如果存在这样的事情）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T07:21:57.237

rlwrap 程序为几乎所有命令行工具添加了命令历史记录和便捷的编辑功能。 [http://utopia.knoware.nl/~hlub/uck/rlwrap/](http://utopia.knoware.nl/~hlub/uck/rlwrap/)

更新网址[11/2016]： [https ://github.com/hanslub42/rlwrap](https://github.com/hanslub42/rlwrap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T03:55:49.353

MIT/GNU Scheme 文本编辑器[Edwin提供了一种与 Scheme 读取-评估-打印循环交互的](http://web.mit.edu/scheme_v9.0.1/doc/mit-scheme-user/Edwin.html#Edwin)[特殊机制](http://web.mit.edu/scheme_v9.0.1/doc/mit-scheme-user/Edwin-REPL-Mode.html#Edwin-REPL-Mode)：REPL 缓冲区。

每个 REPL 缓冲区都维护着输入到其中的表达式的历史记录。有几个命令允许您访问此历史记录的内容。命令 Mp 在历史记录中向后移动，在点处插入先前计算过的表达式。同样，Mn 在历史中前进。命令 Cc Cr 和 Cc Cs 在历史中向后和向前搜索特定字符串。

[http://web.mit.edu/scheme_v9.0.1/doc/mit-scheme-user/Edwin-REPL-Mode.html](http://web.mit.edu/scheme_v9.0.1/doc/mit-scheme-user/Edwin-REPL-Mode.html)

# c - 在 C 中使用 mpi 和 lapack 时出现分段错误

> ID：10291515
> 
> 赞同：1
> 
> 时间：2012-04-24T03:52:14.367
> 
> 标签：c, mpi, lapack, blas, scalapack

我正在尝试使用 Blac 的 pdgemm 执行矩阵乘法。我正在使用的矩阵乘法的确切子程序可以在这里找到：http: [//www.netlib.org/scalapack/html/pblas_qref.html#PvGEMM](http://www.netlib.org/scalapack/html/pblas_qref.html#PvGEMM)

但是，我的代码在 pdgemm 调用上返回“无法为线程本地数据分配内存：ABORT”。在我的代码中，我将一个矩阵自身相乘，它是一个方阵，因此得到的矩阵是相同的维度。这是有问题的代码

```
#include <stdlib.h>
#include <stdio.h>
#include "mpi.h"
#include <math.h>

#define gridSize 10

int main(int argc, char* argv[]) {
  int i,j,k, np, myid;
  int bufsize;
  double *buf;          /* Buffer for reading */

  MPI_Offset filesize;
  MPI_File myfile;    /* Shared file */
  MPI_Status status;  /* Status returned from read */

  /* Initialize MPI */
  MPI_Init(&argc, &argv);
  MPI_Comm_rank(MPI_COMM_WORLD, &myid);
  MPI_Comm_size(MPI_COMM_WORLD, &np);

  double *A = (double*) malloc(gridSize*gridSize*sizeof(double));

  /*MPI-IO Code removed for clarity including buf and bufsize assignments
  .
  .
  .
  .
  */
    //I use mpi-IO to read in a matrix from a file, each processor reads in a row and that row is store in the array called buf
    for (j = 0; j <bufsize;j++){
    A[myid*bufsize+j] = buf[j];
  }

  //BLACS portion
  int ictxt, nprow, npcol, myrow, mycol, nb;
  int info,itemp;
  int ZERO = 0, ONE = 1;
  nprow = 2; npcol = 2; nb = 2;

  Cblacs_pinfo(&myid,&np);
  Cblacs_get(-1,0,&ictxt);
  Cblacs_gridinit(&ictxt,"Row",nprow,npcol);
  Cblacs_gridinfo(ictxt,&nprow,&npcol,&myrow,&mycol);

  int M = gridSize;

  int descA[9], descx[9], descy[9];
  int mA = numroc_(&M, &nb, &myrow, &ZERO, &nprow);
  int nA = numroc_(&M, &nb, &mycol, &ZERO, &npcol);
  int nx = numroc_(&M, &nb, &myrow, &ZERO, &nprow);
  int my = numroc_(&M ,&nb, &myrow, &ZERO, &nprow);

  descinit_(descA,&M,&M,&nb,&nb,&ZERO,&ZERO,&ictxt,&mA,&info);
  descinit_(descx,&M,&M,&nb,&nb,&ZERO,&ZERO,&ictxt,&nx,&info);

  descinit_(descy,&M,&M,&nb,&nb,&ZERO,&ZERO,&ictxt,&my,&info);

  double* matrixA = (double*)malloc(mA*nA*sizeof(double));
  double* matrixB = (double*)malloc(mA*nA*sizeof(double));
  double* matrixC = (double*)calloc(mA*nA,sizeof(double));
  int sat,sut;

  for(i=0;i<mA;i++){
    for(j=0;j<nA;j++){
        sat = (myrow*nb)+i+(i/nb)*nb;
        sut = (mycol*nb)+j+(j/nb)*nb;
        matrixA[j*mA+i] = A[sat*M+sut];
        matrixB[j*mA+i] = A[sat*M+sut];
    }
  }

  double alpha = 1.0; double beta = 0.0;

  //call where seg fault happens
  pdgemm_("N","N",&M,&M,&M,&alpha,matrixA,&ONE,&ONE,descA,matrixB,&ONE,&ONE,descx,
      &beta,matrixC,&ONE,&ONE,descy);

  Cblacs_barrier(ictxt,"A");

  Cblacs_gridexit(0);

  /* Close the file */
  MPI_File_close(&myfile);

  if (myid==0) {
    printf("Done\n");

  }
  MPI_Finalize();

  exit(0);

} 
```

我对 ScaLapacs 没有太多经验，但是从我看过的示例中，我不确定为什么会出现分段错误，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:00:31.503

我通过将“int”更改为“long”和“double”更改为“long double”来做对了

我尝试过的另一种方法是静态链接库。

mpicc -w -oa ac -L$MKLPATH -I$IMKLPATH -Wl,--start-group $MKLPATH/libmkl_scalapack.a $MKLPATH/libmkl_blacs_openmpi_lp64.a $MKLPATH/libmkl_intel_lp64.a $MKLPATH/libmkl_intel_thread.a $MKLPATH/libmkl_core .a -static_mpi -Wl,--end-group -lpthread -lm -openmp

# javascript - 在 Javascript 中传递变量 - 不执行

> ID：10291517
> 
> 赞同：1
> 
> 时间：2012-04-24T03:52:52.280
> 
> 标签：javascript

我编写了以下代码将 File1 变量传递给 Javascript，但它没有执行，我不知道为什么。当我对 File1 使用 alert 时，它可以工作 - 但 document.write 脚本不工作。有什么帮助吗？

```
<script type="text/javascript">
var Order[0]="1";
var Order[2]="2";
var Order[3]="4";
var File1=Order[2]+"/"+Order[0]+"/"+%Order[4];

document.write("<script type='javascript' src=http://abc.com/i_sale_third/10957/'" + File1 + ">";

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:56:26.783

好吧，您确实弄乱了`document.write`. 我修复了它，看看它是否有效：

```
<script type="text/javascript">
var Order[0]="1";
var Order[2]="2";
var Order[3]="4";
var File1=Order[2]+"/"+Order[0]+"/"+%Order[4];

document.write("<script type='javascript' src='http://abc.com/i_sale_third/10957/" + File1 + "'>";

</script> 
```

### 编辑。试试下面的代码。

也许这个小东西`%`之前也把它搞砸了`Order[4]`（除了你可能没有定义的事实之外`Order[4]`）。我还将 console.log 添加到您的代码中，以便打开您的控制台（在 Chrome 和 Safari 中，它是开发工具）。您也不需要重复`var`关键字（如果您不知道，可以用逗号分隔它们）并且根据@ajax333221（和我），您需要`Order`通过以下方式进行初始化`Order = []`：

```
<script type="text/javascript">
var Order = [],
    Order[0] = "1",
    Order[2] = "2",
    Order[3] = "4",
    File1 = Order[2] + "/" + Order[0] + "/" + Order[3]; // I think you meant Order[3] not Order[4] here

if(console) console.log(File1); // this will print File1 into the console so you can see the string output

document.write("<script type='javascript' src='http://abc.com/i_sale_third/10957/" + File1 + "'></script>");
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T04:15:44.547

试试这个：

```
<script type="text/javascript">
    var Order = []; //created the array
    Order[0] = "1";
    Order[2] = "2";
    Order[3] = "4";

    var File1 = Order[2] + "/" + Order[0] + "/" + Order[3]; //added var and changed Order[3]

    document.write("<script type='javascript' src='http://abc.com/i_sale_third/10957/" + File1 + "'></script>"); //fixed quotes placement and closed with </script>
</script> 
```

有用的阅读链接：

*   [创建数组首先解决问题](https://stackoverflow.com/a/4669245/908879)
*   [如何关闭`<script>`](https://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work)

# mysql - 使用 Perl 更新 Ruby on Rails“created_at”日期

> ID：10291519
> 
> 赞同：1
> 
> 时间：2012-04-24T03:53:18.783
> 
> 标签：mysql, ruby-on-rails, perl

我正在使用 Perl 填充将通过 Ruby on Rails 显示的数据库。该数据库是通过 Rails 迁移创建的。

我有一个用 Perl 格式化的日期字符串以适应 Rails“created_at”日期约定，但 MySQL 不允许它。有没有办法做到这一点？

```
($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=localtime(time);
$rails_time = printf ("%4d-%02d-%02d %02d:%02d:%02d",$year+1900,$mon+1,$mday,$hour,$min,$sec);
print "$rails_time\n"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T04:09:13.823

Perl[`printf`](http://perldoc.perl.org/functions/printf.html)不返回格式化字符串：

> 等效于`print FILEHANDLE sprintf(FORMAT, LIST)`，但`$\`不附加（输出记录分隔符）。

所以你`$rails_time`最终会得到[`print`](http://perldoc.perl.org/functions/print.html)回报（最有可能`1`）。您想用来[`sprintf`](http://perldoc.perl.org/functions/sprintf.html)生成 ISO-8601-ish 时间戳：

```
$rails_time = sprintf("%4d-%02d-%02d %02d:%02d:%02d", $year + 1900, $mon + 1, $mday, $hour, $min, $sec); 
```

MySQL 很乐意接受它`$rails_time`作为时间戳值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:11:31.863

[`Time::Piece`](http://p3rl.org/Time%3a%3aPiece)使用（与 Perl 一起分发）更容易：

```
use Time::Piece qw(localtime);
localtime->strftime('%F %T');
# returns string '2012-04-24 12:11:31' 
```

# r - 从多个文件夹中读取所有脚本和数据文件

> ID：10291520
> 
> 赞同：26
> 
> 时间：2012-04-24T03:53:19.490
> 
> 标签：r, file-io

我有两个文件夹，`folder1`每个文件夹`folder2`大约有 200 个文件，要么是`*rda`要么`*R`. 我想从这两个目录中读取所有文件和数据集。我怎样才能做到这一点？

路径：

```
folder1:  C:\folder1
folder2:  C:\folder2 
```

我的审判

```
setwd("C:/folder1")
myls <- ls() # do work as this will only list that are already loaded in the system 
setwd("C:/folder2")
myls2 <- ls()
myls  # do work as this will only list that are already loaded in the system 
```

我知道这是一个简单的问题，但我没有任何答案。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-24T04:38:46.370

由于`.rda`requires`load`和`.R`requires `source`，我会做这样的事情：

```
file.sources = list.files(pattern="*.R")
data.sources = list.files(pattern="*.rda")
sapply(data.sources,load,.GlobalEnv)
sapply(file.sources,source,.GlobalEnv) 
```

## 一次读取多个文件夹的更新

```
file.sources = list.files(c("C:/folder1", "C:/folder2"), 
                          pattern="*.R$", full.names=TRUE, 
                          ignore.case=TRUE)
data.sources = list.files(c("C:/folder1", "C:/folder2"),
                          pattern="*.rda$", full.names=TRUE, 
                          ignore.case=TRUE)
sapply(data.sources,load,.GlobalEnv)
sapply(file.sources,source,.GlobalEnv) 
```

还要注意`$`在搜索模式末尾的使用，以确保它只匹配，例如，`.R`在行尾的 a，以及`ignore.case`在某些文件被命名的情况下使用，例如，`script.r`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T04:06:17.127

```
for (f in list.files(pattern="*.R")) {
    source(f)
}
for (f in list.files(pattern="*.rda")) {
    load(f)
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-02T21:28:21.163

如果要`tidyverse`改用，可以使用该`map`函数来简化：

```
my_path <- c("/path/to/files/")             # set your path
source_files <- list.files(my_path, "*.R$")  # locate all .R files
map(paste0(my_path, source_files), source)  # source all your R scripts! 
```

# python - 当dict声明不在列表迭代中时，将dict附加到python中for-in交互中的列表

> ID：10291521
> 
> 赞同：0
> 
> 时间：2012-04-24T03:53:21.547
> 
> 标签：python

如下所示，为什么最终的 r 不打印`[{'k': 1}, {'k': 2}]`？

```
l = [1, 2]
d = {}
r = []

for el in l:
    d['k'] = el
    print '> ' + str(d)
    r.append(d)

print r 
```

输出：

```
> {'k': 1}
> {'k': 2}
[{'k': 2}, {'k': 2}] 
```

它在附加操作之前按要求打印，但是在将字典附加到列表之后，为什么它会重复附加最后一个元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T03:58:05.953

当您第二次通过循环时，您正在为同一个键分配一个新值。

```
for el in l:
    d['k'] = el
    print '> ' + str(d)
    r.append(d)

print r 
```

第一次通过循环，`el`是`1`。`d['k']`设置为`1`，然后打印。然后`d`附加到`r`.

第二次通过循环，`el`是`2`。`d['k']`- 同一个字典的同一个键的同一个值 - 设置为`2`。然后将同一个字典 ,`d`附加到`r`。

现在`r`就像你说的一样

```
r = [d, d] 
```

从`d['k']`现在开始，列表中的`2`两个引用都产生了。`d``r``{'k': 2}`

如果您希望它有所不同，则每次循环都必须创建一个*新字典。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:17:58.963

你快到了。这只需要一个小修复：

```
l = [1, 2]
r = []

for el in l:
    d = {}
    d['k'] = el
    print '> ' + str(d)
    r.append(d)

print r 
```

作为思考的食物，这里有一个更高级的方法来使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
>>> [{'k': el} for el in [1, 2]]
[{'k': 1}, {'k': 2}] 
```

# c - 安全软件讨厌我的套接字

> ID：10291522
> 
> 赞同：2
> 
> 时间：2012-04-24T03:53:29.137
> 
> 标签：c, security, sockets, winsock

我正在编写一个我想分发给其他人的程序，但它使用套接字并且大多数安全软件将其视为恶意软件。如何在不告诉人们降低防火墙并使程序免于扫描的情况下使该程序正常工作？我的套接字是否有问题，或者这是我的程序没有数字证书的问题？

```
#include <stdio.h>
#include <stdlib.h>
#include <winsock2.h>
int client(char *ip,int port,SOCKET *sock)
{
    struct sockaddr_in addr;
    *sock=socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);
    addr.sin_family = AF_INET;
    addr.sin_addr.s_addr = inet_addr(ip);
    addr.sin_port = htons(port);
    connect(*sock,(SOCKADDR*)&addr,sizeof(addr));
    return 2;
}
void ssend(char *buffer,int len,SOCKET sock)
{
    int sent;
    int *tmp;
    char head[4];
    sent=0;
    tmp=(int*)&head;
    *tmp=htonl(len);
    while(sent<4)
    {
        sent+=send(sock,head,4-sent,0);
    }
    sent=0;
    while(sent<len)
    {
        sent+=send(sock,buffer,len-sent,0);
    }
}
void srecv(char *buffer,int *len,SOCKET sock)
{
    char head[4];
    recv(sock,head,4,MSG_WAITALL);
    *len=ntohl(*((int*)head));
    recv(sock,buffer,*len,MSG_WAITALL);
}
int main(int argc,char **argv)
{
    WSADATA dat;
    WSAStartup(MAKEWORD(2, 2),&dat);
    SOCKET sock;
    char ip[256];
    char msg[1024];
    int port;
    scanf("%s",ip);
    scanf("%d",&port);
    printf("%d\n",client(ip,port,&sock));
    while(1)
    {
        scanf("%s",msg);
        ssend(msg,strlen(msg),sock);
    }
} 
```

不漂亮的代码，我知道！我只是想在带有 C 的套接字上站稳脚跟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:06:43.527

你无能为力。防火墙软件不可能区分“打电话回家”或对其他机器发起攻击的恶意软件和合法程序。用户必须为此给出明确的例外。

好吧，您可以做一件事：让您的程序在广泛使用的端口上运行，例如 HTTP 端口 80 或 SSL 对应端口 443。

如果规则基于程序的身份，而不仅仅是端口，甚至不确定这是否会有所帮助。限制哪些应用程序可以通过端口 80 建立 HTTP 连接是有充分理由的。恶意软件经常使用端口 80 打电话回家和下载恶意垃圾。

# algorithm - 有哪些简单的令人尴尬的并行算法？

> ID：10291527
> 
> 赞同：2
> 
> 时间：2012-04-24T03:54:03.943
> 
> 标签：algorithm, parallel-processing

我正在为[Cicero](http://www.neptune-lang.org/2011/12/Version-013-Released)编写一个测试应用程序，我需要一个简单的令人尴尬的并行算法，该算法易于理解，但与向输入中添加一个算法相比稍微不那么琐碎。

现在，我只对只需要“映射”步骤的算法感兴趣。或者，我只对算法的“映射”步骤感兴趣。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:41:26.547

一种令人尴尬的并行算法是一种通常具有某种数据结构 D 的算法，该数据结构 D 通过某种操作 o 由元素 e 组合而成，例如连接。当您想将操作 X 应用于 D 时，您会遇到令人尴尬的并行性，例如计算 X(D)，并且您可以通过使用 D = po q 的分配律 X(D)= X(p) OX(q) 来获得它。通过将 D 划分为其元素，您可以将 X 应用于每个元素并相互依赖地计算答案。

许多应用逐元素运算的矩阵运算（例如，矩阵加法、减法）是令人尴尬的并行。FORTRAN 有一个 ELEMENTAL 函数，您可以将其应用于旨在用于此类操作的数组。

您可以概括 N 维中的连接操作或将组成子图的操作粘合在一起。

# sql-server - 如何将xml字段转换为sql中的表？

> ID：10291528
> 
> 赞同：0
> 
> 时间：2012-04-24T03:54:05.190
> 
> 标签：sql-server

我的表中有一个 XML 列，如下所示：

```
<word A="al"   B="h"   C="Ps" />
<word A="has"  B="es"  C="Pf" />
<word A="mom"  B="es"  C="Ph" /> 
```

我需要像这样转换成表格：

```
 word  | A  | B  | C
 ====================
   al  | A1 | B1 | C1
   has | A2 | B2 | C2
   mom | A3 | B2 | C3 
```

我想通过 SQL Server 中的一个函数来做。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:08:56.453

在这里猜测数据类型，并猜测您不是要转换`a1`->`A1`等。

```
DECLARE @x TABLE(XMLFIELD XML);

INSERT @x SELECT '<word A="a1"  B="b1"  C="c1" />'
UNION ALL SELECT '<word A="a2"  B="b2"  C="c2" />'
UNION ALL SELECT '<word A="a3"  B="b2"  C="c3" />';

-- INSERT INTO dbo.OtherTable
SELECT 
  A = x.a.value('@A', 'varchar(32)'),
  B = x.a.value('@B', 'varchar(32)'),
  C = x.a.value('@C', 'varchar(32)')
FROM @x AS src
CROSS APPLY src.XMLFIELD.nodes('word') AS x(a); 
```

结果：

```
A       B       C
------- ------- -------
a1      b1      c1
a2      b2      c2
a3      b2      c3 
```

**编辑**

现在您已经完全改变了问题，使我的回答看起来很疯狂并且与您的问题完全无关，让我们再试一次。我再次在这里进行一些猜测，因为您没有很好地描述您的逻辑或要求。每次看到新值时，B 列都会增加吗？与C列相同吗？是否有可能存在*不在*连续行中的重复项？

```
DECLARE @x TABLE(XMLFIELD XML);

INSERT @x SELECT '<word A="al"   B="h"   C="Ps" />'
UNION ALL SELECT '<word A="has"  B="es"  C="Pf" />'
UNION ALL SELECT '<word A="mom"  B="es"  C="Ph" />';

;WITH y AS
(
  SELECT 
    word = x.a.value('@A', 'varchar(32)'),
    n = ROW_NUMBER() OVER (ORDER BY x.a.value('@A', 'varchar(32)')),
    B = x.a.value('@B', 'varchar(32)'),
    C = x.a.value('@C', 'varchar(32)')
  FROM @x AS src
  CROSS APPLY src.XMLFIELD.nodes('word') AS x(a)
)
SELECT word, 
    A = 'A' + RTRIM(n),
    B = 'B' + RTRIM((SELECT COUNT(*)+1 FROM y AS y2 WHERE n < y.n AND B <> y.B)),
    C = 'C' + RTRIM((SELECT COUNT(*)+1 FROM y AS y2 WHERE n < y.n AND C <> y.C))
FROM y 
ORDER BY word; 
```

结果：

```
word   A    B    C
------ ---- ---- ----
al     A1   B1   C1
has    A2   B2   C2
mom    A3   B2   C3 
```

如果您想要能够真正解决您的问题的连贯答案，您应该努力很好地描述您的问题（并在第一次将其正确，然后花费大量精力尝试解决错误的问题）。

# java - Android Java：系统中的多人测验嗡嗡声以最小的延迟？

> ID：10291532
> 
> 赞同：0
> 
> 时间：2012-04-24T03:54:18.770
> 
> 标签：java, android, multiplayer, lag

所以我一直在想办法制作一个多人问答游戏，在这个游戏中显示一个问题，第一个发出声音的人（只是屏幕上的一个按钮）有机会回答这个问题。因此，有可能两个人几乎同时进入，那么确定真正的第一个进入的人是谁的最佳方法是什么？插座？像 Pusher 这样的服务？蓝牙？评分循环？斯基勒？OpenFeint？其他一些解决方案？

感谢您的任何输入/示例。

* * *

我决定用蓝牙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:41:45.523

抱歉回复晚了，也许你仍然可以改变主意。蓝牙很棒，但如果只是近距离游戏，它就不好玩了。如果来自南非的人可以与来自澳大利亚的人比赛，那将更具吸引力；）。

我们发布了一个新的 Android SDK，它支持实时多人游戏（不仅仅是回合制），而这正是您正在寻找的。您将能够设置游戏并实时发送按钮按下。[在www.skiller-games.com](http://www.skiller-games.com)下载我们的新 SDK，如果您有任何问题，请在此处发布或发送电子邮件至 developers@skiller-games.com。

享受！

# facebook - Facebook Graph API：知道用户评论过的 URL？

> ID：10291533
> 
> 赞同：0
> 
> 时间：2012-04-24T03:54:26.507
> 
> 标签：facebook, facebook-graph-api

我正在考虑在我的网站上实施 Facebook 的评论插件。问题是我需要知道我网站上用户评论过的页面。

我已经阅读了 Facebook 的文档，但我没有找到适当的权限来了解这一点。

是否可以知道用户评论了哪些 URL？在这种情况下，我的应用需要哪些权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T16:30:40.293

我知道您已经接受了答案，但我认为这会对您有所帮助。

您可以首先在此处生成[Facebook 评论](https://developers.facebook.com/docs/reference/plugins/comments/ "https://developers.facebook.com/docs/reference/plugins/comments/")的代码。

对于您在其中实现评论插件的每个页面，您将提供`href`用户正在阅读/访问的页面，因为它是插件所要求的。

您可以使用[Javascript SDK](https://developers.facebook.com/docs/reference/javascript/ "https://developers.facebook.com/docs/reference/javascript/")来监听[Facebook 事件](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/ "https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/")，特别是您有`comment.create`事件的评论，每次发表评论时都会触发该事件。该事件将一个`response`对象传递给它的回调函数，其中包含`href`前面提到的，以及`commentID`刚刚生成的注释的。因此，您可以轻松跟踪用户评论了哪个页面（网址）。

示例（看看我们如何监听 comment.create 事件）：

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here, this is where we listen to events
    FB.Event.subscribe('comment.create',
      function(response) {
        alert('You commented on the URL: ' + response.href + 'CommentID: ' + response.commentID);
        // do an ajax call to server to store user,commentID,href info if you require
      }
    );
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:25:04.447

称呼

```
graph.facebook.com/USER_ID/feed&fields=link 
```

对于您要查询的每个用户。此调用返回 id、name 和链接字段，该字段是评论对象的 url。并非所有帖子都有链接字段，因此您需要检查是否为空。然后，您可以比较链接字段以查找与您的网址匹配的内容。

提要包含来自评论框插件的评论帖子，仅在用户发布评论时选中“发布到 Facebook”框的情况下。

您需要向用户询问 read_stream 权限。

这一切都假设您知道用户是谁。您需要跟踪您身边的这些用户，因为无法查询 FB 的 API 以获取“在我的网站上发表评论的用户”。

# android - 当所有位置提供程序都被禁用时，如何在 android 中获取位置？

> ID：10291535
> 
> 赞同：4
> 
> 时间：2012-04-24T03:54:33.813
> 
> 标签：android, location, locationmanager

LocationManager 有一个方法，getlastknownlocation。从文档中，此方法：“返回一个位置，指示从给定提供程序获得的最后一个已知位置修复的数据。**这可以在不启动提供程序的情况下完成**”

但是，如果当前启用了提供程序，此方法仅返回一个位置。

我对此有点困惑，如果此方法可以在不启动提供程序的情况下获取缓存位置，为什么如果*当前*启用了提供程序，它只会返回一个位置？

即使所有提供商都被禁用，我如何保证一个位置，无论它多么不准确和过时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:46:15.247

你不能。如果用户没有启用任何位置提供程序，则您无法提供位置。如果用户没有启用 GPS 并且用户没有 Internet 连接，则无法获取基于网络的位置（基于网络的位置需要服务器的帮助）。

有时你只是不能告诉用户他在哪里（或曾经）。

# android - 无法在android中查看linearlayout中的textview

> ID：10291536
> 
> 赞同：0
> 
> 时间：2012-04-24T03:54:44.533
> 
> 标签：android, android-layout

我编写了一个简单的程序来熟悉 android 中的 UI 设计。我在线性布局中动态添加了文本。当我调试代码时，我在 logcat 中看不到任何错误，代码运行得很好。但我无法在我的设备中看到任何文字。我正在使用 Galaxy S2。我也尝试过使用模拟器。但什么都没有出现。我不知道为什么它没有在我的设备/模拟器中显示任何文本。请帮忙。

这是我的活动

```
public class ViewActivity extends Activity {
/** Called when the activity is first created. */
LinearLayout bar;
String myarray[]={"Foot Ball","Basket Ball","Cricket"};
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
setContentView(R.layout.main);
bar= (LinearLayout) findViewById(R.id.tag);// Map the Layout
bar.setVisibility(View.VISIBLE);
TextView bs_text[]= new TextView[myarray.length]; // Create TextView according to value in length variable;

for(int z=0;z< myarray.length ;z++)
{
try
{

bs_text[z] = (TextView) new TextView(this);
bs_text[z].setText( myarray [z]);
//bs_text[z].setTextSize(1);
bs_text[z].setBackgroundColor(android.graphics.Color.TRANSPARENT);
bs_text[z].setTextColor(android.graphics.Color.BLACK);
int height_in_pixels = bs_text[z].getLineCount() * bs_text[z].getLineHeight(); //approx height text
bs_text[z].setHeight(height_in_pixels);
//bs_text[z].setHeight(android.graphics.)
bar.addView(bs_text[z]);
}

catch(ArrayIndexOutOfBoundsException e)
{
Log.d("ArrayIndexOutOfBoundsException",e.toString());
}
}
}
    } 
```

这是我的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tag"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T04:05:20.157

将 layoutparams 设置为 textview 为：

```
bs_text[z].setBackgroundColor(0xffffffff);
bar.addView(bs_text[z],new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:01:01.863

尝试将 layoutparams 设置为 textview

```
LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
textview.setLayoutParams(lp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T04:03:52.797

当您第一次显示它时，您可能`LinearView`会显示为`width`=0 和=0：`height`

```
android:layout_width="wrap_content"
android:layout_height="wrap_content" 
```

由于它没有内容，因此大小为 0。您应该重置视​​图，例如：

```
LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT);
bar.setLayoutParams(lp); 
```

添加 TextViews 后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T06:48:55.327

如果你想给 TextViews 赋予特定的权重，那么你可以设置布局参数如下 -

```
LinearLayout.LayoutParams param = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT,1.0f); 
```

哪里`1.0f`是显示的重量`TextView`。然后将参数添加到`TextView`

```
bs_text[z].setLayoutParams(param); 
```

# ios - 在没有 UITableViewController 的情况下拉取刷新 UITableView

> ID：10291537
> 
> 赞同：181
> 
> 时间：2012-04-24T03:55:10.193
> 
> 标签：ios, objective-c, iphone, uitableview, pull-to-refresh

我正在尝试在 UIViewController 内的 UITableView 中实现拉动刷新功能。我不能使用 UITableViewController 因为我希望 UITableView 是视图控制器中的一个较小的子视图，上面还有一些其他的东西。我认为这是可能的，但有人看过它的实现吗？

* * *

## 回答 #1

> 赞同：469
> 
> 时间：2013-02-21T19:29:18.317

直接将刷新控件添加到 a`UITableView`而不使用 a `UITableViewController`：

```
override func viewDidLoad() {
    super.viewDidLoad()
    let refreshControl = UIRefreshControl()
    refreshControl.addTarget(self, action: #selector(refresh(_:)), for: .valueChanged)

    if #available(iOS 10.0, *) {
        tableView.refreshControl = refreshControl
    } else {
        tableView.backgroundView = refreshControl
    }
}

@objc func refresh(_ refreshControl: UIRefreshControl) {
    // Do your job, when done:
    refreshControl.endRefreshing()
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-08-09T09:05:44.097

***目标-C***：

这就是您可以为表视图实现拉取刷新的方式。与集合视图的情况相同。只需用集合视图替换表视图分配。

```
UITableView *tableViewDemo  =  [[UITableView alloc]init];
tableViewDemo.frame = CGRectMake(0,0,self.view.frame.size.width,self.view.frame.size.height);
tableViewDemo.dataSource =  self;
tableViewDemo.delegate =  self;
[self.view addSubView: tableViewDemo];

UIRefreshControl *refreshController = [[UIRefreshControl alloc] init];
[refreshController addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
[tableViewDemo addSubview:refreshController];

#pragma mark - Handle Refresh Method

-(void)handleRefresh : (id)sender
{
   NSLog (@"Pull To Refresh Method Called");
   [refreshController endRefreshing];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-04T14:19:44.023

@berik 的这个解决方案工作正常，但 UIController 显示在 UITableViewController 的顶部。修复它的方法是进行此更改：

```
override func viewDidLoad() {
    let refreshControl = UIRefreshControl()
    refreshControl.addTarget(self, action: "refresh:", forControlEvents: .ValueChanged)
    tableView.backgroundView = refreshControl // <- THIS!!!
}

func refresh(refreshControl: UIRefreshControl) {
    // Do your job, when done:
    refreshControl.endRefreshing()
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-24T03:58:37.020

我已经用 UIViewController 和一个简单的表格视图实现了 EGORefreshTableHeaderView，诀窍是在 EGO 将滚动视图作为参数的地方，如果您查看表格视图本身继承自滚动视图。

它只需要这个和一些额外的连接:)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-31T06:44:30.463

**似乎如果您在 viewController 的loadView**方法中创建 UIRefreshControl一切正常。UIRefreshControl 的行为应如此。使用 iOS 7.1 和 iOS 8.2 测试

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-05-25T02:31:48.000

我最终使用了[ODRefreshControl](https://github.com/Sephiroth87/ODRefreshControl)。它不需要像上面那样的任何 hack `tableView.backgroundView = refreshControl`，工作方式几乎相同，并提供更好看的 UI。

# haskell - 用于数据类型字段提取的模式匹配 vs 记录语法函数

> ID：10291550
> 
> 赞同：6
> 
> 时间：2012-04-24T03:56:42.633
> 
> 标签：haskell

给定一个具有记录语法的示例数据类型：

```
data VmInfo = VmInfo {infoVid   :: String
                     ,infoIndex :: Int
                     ,infoPid   :: Int
                     ,infoExe   :: String
                     } deriving (Show) 
```

和 (vmInfo :: String -> VmInfo) 函数，该函数生成并返回给定 vm 名称为字符串的上述数据结构。

我可以看到两种方法来提取 VmInfo 数据类型的各个部分。

```
(VmInfo vid _ _ _) <- vmInfo vm 
```

这只是一个模式匹配。和 ...

```
vid <- infoVid <$> vmInfo vm 
```

使用记录语法编译器生成的函数。

问题很简单：哪种方法是首选方法？

明智的打字量它们是相同的，所以我正在寻找速度和正确性/最佳实践。

我假设模式匹配会更快，但是记录语法有什么意义呢？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T04:22:51.170

这些在语义上并不等效。

让我们看第一个例子：

```
(VmInfo vid _ _ _) <- vmInfo vm 
```

这将在绑定操作中执行模式匹配。这有两个结果。首先是对动作结果的构造函数`vmInfo vm`求值。这意味着如果`vmInfo`以类似的行结尾`return undefined`，则评估引发的异常`undefined`将发生在此模式匹配时，而不是以后使用`vid`. 第二个是如果模式匹配被驳回（模式匹配不匹配值），monad 的`fail`实例将被调用模式匹配错误文本。在这种情况下这是不可能的，但通常在模式匹配绑定中的构造函数时是可能的。

现在，进入下一个示例：

```
vid <- infoVid <$> vmInfo vm 
```

根据 的定义`<$>`，这将在动作（而不是效果）返回的值中完全惰性。如果`vmInfo`以 结尾`return undefined`，则在执行`undefined`使用`vid`. 此外，如果`infoVoid`有能力抛出任何异常，它们最终不会发生，直到使用`vid`, best case.

有趣的是，这些差异只存在于单子绑定的范围内。如果`vmInfo`是纯的并且您将名称绑定到`vid`or`let`表达式`where`中，它们将生成相同的代码。

在这种情况下，您要使用哪一个完全取决于您。两者都是惯用的 Haskell。人们通常会选择在他们工作的环境中看起来更好的那个。

人们使用访问器函数的主要原因是简洁，因为记录具有如此多的字段，模式匹配很大，并且因为它们是实际函数 - 它们可以传递给其类型适合的任何高阶函数。您不能将模式匹配作为不同的构造传递。

# uitableview - 带有不透明标题的 UITableViewStylePlain

> ID：10291554
> 
> 赞同：4
> 
> 时间：2012-04-24T03:57:18.530
> 
> 标签：uitableview

我实现了一个风格为 UITableViewStylePlain 的 UITableView。我正在使用具有纯色背景颜色的自定义标题视图，它应该是不透明的。但是标题不是不透明的，当单元格在标题下滚动时，它们是可见的。我想让标题不透明，但我不明白这是怎么做到的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-17T01:33:48.143

当表格视图是普通视图时，如果其部分中的至少一个单元格在屏幕上，则它是可见的。所以看起来表格视图在内部某处为标题设置了一个背景视图，带有一些 alpha。但是您可以将背景视图设置为自定义视图，然后为其设置背景。

当您在以下位置创建自定义标题视图时，您可以这样做`tableView:viewForHeaderInSection:`：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
  UITableViewHeaderFooterView *header = ...
  header.backgroundView = [UIView new];
  header.backgroundView.backgroundColor = [UIColor greenColor];

  return header;
} 
```

或者，如果您不想创建自定义标题视图，那么您可能可以在`tableView:willDisplayHeaderView:forSection:`默认标题视图中设置背景。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T19:59:21.447

对于任何可能感兴趣的人来说，解决方案很简单，但并不明显。在找到可行的方法之前，我尝试了不同的方法。我知道这是可以做到的，因为我至少在另一个应用程序中看到过它。

这些涉及使用`tableView:viewForHeaderInSection:`委托方法创建的自定义标头。

**什么不起作用：**

1) 设置在此委托方法中创建的父视图的 backgroundColor 属性。出于某种原因，此颜色在用于自定义标题视图时会被忽略。

2）我注意到子视图不透明，所以我尝试在父视图和现有子视图之间放置一个中间视图。我将此视图的背景颜色设置为纯色。这也被忽略了。

**什么有效：**

3) 使用以下代码设置 backgroundColor 属性：

```
 [UIColor colorWithPatternImage:[UIImage imageNamed:@"anImage.png"]]; 
```

出于某种原因，简单的颜色不起作用，但从图像创建的颜色可以。

我将把这个问题留到另一天，以防有人想解释这里发生了什么，就如何呈现自定义标题视图而言。我在文档中没有看到关于这个小细节的任何内容，但我可能错过了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-30T19:24:13.600

我遇到了同样的问题。确实有效的解决方案是将 UITableViewHeaderFooterView 子类化，然后覆盖 drawRect ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-10T11:38:23.400

斯威夫特 4：

只需将 Tableview 单元格的背景颜色属性设置为白色或您想要的任何颜色。你可以从故事板本身设置它。

# ruby-on-rails - Rails 急切加载 CanCan 角色

> ID：10291555
> 
> 赞同：2
> 
> 时间：2012-04-24T03:57:32.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, cancan, eager-loading

我试图通过急切加载一些 sql 调用来加速我的应用程序。我正在使用 CanCan gem 来处理我的管理员授权。我有一个包含三个不同角色的角色表和一个多对多表角色_用户。每次使用 CanCan 功能集加载页面时，它都会执行三个单独的 sql 查询。

```
 Role Load (0.6ms)  SELECT "roles".* FROM "roles" INNER JOIN "roles_users" ON "roles"."id"    
= "roles_users"."role_id" WHERE "roles_users"."user_id" = 2 AND "roles"."name" = 'admin'  
  LIMIT 1
Role Load (0.4ms)  SELECT "roles".* FROM "roles" INNER JOIN "roles_users" ON "roles"."id" 
  = "roles_users"."role_id" WHERE "roles_users"."user_id" = 2 AND "roles"."name" =  
 'manager' LIMIT 1
 Role Load (0.3ms)  SELECT "roles".* FROM "roles" INNER JOIN "roles_users" ON "roles"."id" 
  = "roles_users"."role_id" WHERE "roles_users"."user_id" = 2 AND "roles"."name" = 'user' 
  LIMIT 1 
```

我尝试将 default_scope :include => :roles 放在 User 类中，并将 :includes 放在 has_and_belongs_to_many 调用中。

我在哪里可以急切加载 Roles 表以仅使用 1 个 SQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:41:04.607

看起来您可能有一些如下所示的代码。也就是说，它需要一个字符串或符号，您需要将其与角色记录中的某个值进行比较，而不是角色本身。所以寻找这样的东西：

```
def do_i_have_role(role_name_to_check)
  self.roles.detect do |role|
    role.name == role_name_to_check
  end
end 
```

你可以在这里做一些急切的加载来修复它，但是另一种给这只猫皮肤的方法是重组你的查询。即，首先查找角色对象，然后查看您的帐户是否具有该角色。

```
def do_i_have_role(role_name_to_check)
  role = Role.where(:name => role_name_to_check)
  self.roles.include? role
end 
```

现在它只是对角色数据库的一次命中，而不是 3 次（对帐户表的一次命中和对 account_user 表的另一次命中，您可能永远无法避免）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T04:27:25.383

您可以通过显示用于查询 cancan 系统的代码（对 cancan 的 api 调用）来改进您的问题。

看起来您正在执行单独的查询以查看用户是否属于管理员、经理或用户类别。

您应该对查询进行排序，以便首先查询最可能的用户类型。例如，如果一个人最有可能是用户，则首先查询该用户。

更好的是，在会话中缓存用户的角色。这样你只做一次查询。

**添加**

您可以在登录/注销后使用 devise 挂钩来设置会话中的值。[您可以使用Action Controller filters](http://guides.rubyonrails.org/action_controller_overview.html#filters)查找角色（从会话中）。[会话文档](http://guides.rubyonrails.org/action_controller_overview.html#session)

**安全问题**

*   注销后使用 devise 挂钩清除会话中的角色。
*   确保您的测试涵盖会话的角色 ID
*   您无需担心人们对其角色进行自我升级：会话已针对更改进行数字签名。请参阅会话文档。
*   即时删除/更改的用户：

根据您的安全级别，您可能需要涵盖用户已被删除或降级的情况，并且您希望立即进行更改（而不是等到用户下次登录时）。

这样做可能很棘手。一些技巧：

*   一种方法是将角色检查时间戳与角色 ID 一起存储在会话中。如果超过 30 分钟，则使 role_id 无效（再次查找）等。
*   或者将用户的 role_id 存储在内存缓存中，而不是会话存储中。然后另一个进程（执行删除用户）可以从缓存中删除活动用户会话的 role_id 值。
*   一种更简单的蛮力方式：为管理员提供一种清除所有当前会话的方法（需要*所有*当前用户再次登录）。这将解决不得不将某人从系统中引导出来的罕见情况。
*   与许多系统一样，几个小时后*所有*会话都会超时。或者每天清除一次所有会话。如果这样做，最好实现和测试自动重新登录。包括重新登录后返回到请求的页面。重新登录将阻止凭据已更改的人。

**使用常量**您可以将 role_ids 存储在会话（或内存缓存）中。但是将它们与常数进行比较。例如`user.role_id === ROLE_ADMIN` ，您可以在运行时通过从数据库中查找 role_ids 来设置常量。确保在初始化系统中的每个 rails 进程都执行一次此操作。不是每个传入请求一次。

# javascript - 使用 jquery 后，javascript 函数不起作用

> ID：10291558
> 
> 赞同：1
> 
> 时间：2012-04-24T03:58:08.317
> 
> 标签：javascript, jquery, asp.net

我正在使用这个 jquery 对 textarea 进行拼写检查。拼写检查工作正常，但在使用 jquery 进行拼写检查后，我的其他 javascript 函数无法正常工作。知道为什么吗？

```
<script type="text/javascript">
    $Spelling.SpellCheckAsYouType('txt_comment1');
    function showselected() {
        var input1 = document.getElementById('txt_comment1');
        var startPos = input1.selectionStart;
        var endPos = input1.selectionEnd;
        var doc = document.selection;

        if (doc && doc.createRange().text.length != 0) {
            alert(doc.createRange().text);
        } else if (!doc && input1.value.substring(startPos, endPos).length != 0) {
            document.getElementById('txt_addwords').value = input1.value.substring(startPos, endPos);
            //alert(input1.value.substring(startPos, endPos))
        }
    }
</script>

<asp:Button 
    ID="cmd_submit_good" 
    runat="server" 
    Height="38px" 
    OnClientClick="showselected();" 
    onclick="cmd_submit_good_Click" 
    Text="Good Word" 
    Font-Bold="False" 
    Font-Names="Arial" Font-Size="X-Small" 
    Width="80px" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:48:10.993

[http://forum.jquery.com/topic/calling-a-script-when-button-clicked](http://forum.jquery.com/topic/calling-a-script-when-button-clicked)，我得到了这个链接的答案。Jquery 转换了实际的文本框，这就是 javascript 没有在原始文本框上执行的原因。

# javascript - 是否存在与引擎无关的 Reflect.parse？

> ID：10291559
> 
> 赞同：4
> 
> 时间：2012-04-24T03:58:08.950
> 
> 标签：javascript, reflection, spidermonkey

Mozilla 提供了[一个用于解析 Javascript 模块](https://developer.mozilla.org/en/SpiderMonkey/Parser_API)以生成[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)的 API 。他们称之为**Reflect.parse**。

是否有一个 Reflect.parse 或类似的东西，用 Javascript 编写为一个独立的模块？我可以在任何 ES5 引擎上运行以生成语法树吗？失败的是，C++ 中有一个独立的工具可以为我做这件事吗？还是服务？

* * *

我尝试了 doctorjs.org 的一个非常简单的自我评估匿名函数，但它窒息了。我做错了吗？

```
(function (scope) {
  ....
}(this)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T04:23:19.917

试试 Esprima ( [esprima.org](http://esprima.org) )，这是我几个月前开始的一个项目。它的 AST 输出与 Mozilla Reflect.parse 兼容，它几乎可以在从 IE 6 到 Node.js 的任何地方运行，解析器非常快（在其竞争对手中最快），经过大量单元测试（500+ 并且还在增长），代码覆盖率为 100% .

Esprima 符合 ES5（包括严格模式），甚至还有 WIP 以支持 ES6（和 Harmony）功能。众所周知，可以毫无问题地解析大量 JavaScript，从 jQuery 等标准库到百万行 Web 应用程序代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T17:21:38.220

查看 Esprima：[http ://esprima.org/](http://esprima.org/)

这里有一个生成类似抽象语法树的单独项目：http: [//boshi.inimino.org/3box/PanPG/build/js_ast.html](http://boshi.inimino.org/3box/PanPG/build/js_ast.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T04:04:21.953

[JS.js](https://github.com/jterrace/js.js/)（用 Javascript 编写的 Javascript 解释器）可能有一个 Javascript 解析器作为组件，但我不知道从外部访问或使用它有多容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T04:41:56.223

> 我可以在任何 ES5 引擎上运行以生成语法树吗？失败的是，C++ 中有一个独立的工具可以为我做这件事吗？

您可以获取源代码并构建 SpiderMonkey JavaScript 独立 shell（Mozilla 的 Firefox 中的 JS 引擎），它内置了 Reflect.parse，因此您可以制作一个包含 SpiderMonkey 功能的小脚本，该脚本可用作工具。

# php - 用 PHP 向远程服务器发送邮件

> ID：10291563
> 
> 赞同：1
> 
> 时间：2012-04-24T03:58:31.827
> 
> 标签：php, html, email, smtp

如标题所述，我可以通过 25 端口远程登录到我的 Web 服务器。

但问题是，这里的这个简单代码不会发送电子邮件。输出表明它已发送出去，但没有迹象表明已收到电子邮件。

```
$to = "mycompanyemail@company.com";
$subject = "test";
$msg = "Ite!";
$headers = "From: mycompanyemail@company.com\r\nReply-To: mycompanyemail@company.com";
mail("$to", "$subject", "$msg", "$headers");
echo "finished!";
echo "Your mail was sent."; 
```

如下显示我的 php.ini 文件配置

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = smtp.realtest.com
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = mycompanyemail@company.com 
```

我已经被困在这种可怕的情况下两周了，根据之前的话题，没有任何帮助和提议，我真的需要这个继续下去。感谢你们。对不起我的经验不足。

另一方面，我意识到如果不需要身份验证，如何从电子邮件地址发送电子邮件？请回答我的澄清，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:06:08.787

您可以尝试这些链接 [http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)和[http://php.net/manual /en/ref.mail.php](http://php.net/manual/en/ref.mail.php)（你会发现也可以在 windows 上使用 sendmail ；））

此外，指定的电子邮件地址`sendmail_from`必须存在于 SMTP 服务器上，并确保您运行脚本的计算机的 IP 受 SMTP 服务器信任，因此它不会要求身份验证或加密。

如果您打算在生产中使用它，请不要忘记安全性。

# ios - CIUnsharpMask 不工作？

> ID：10291564
> 
> 赞同：0
> 
> 时间：2012-04-24T03:58:35.043
> 
> 标签：ios, core-image

我正在尝试使用 CIUnsharpMask 过滤器来处理图像。问题是返回的图像是空白的。图像视图中没有出现任何内容。我一直在为我的其余过滤器使用相同的模板，并且它们运行良好。radiusValue 和 intensityValue 都是 NSNumbers 顺便说一句。

```
CIImage *ciUnsharpMaskImage = [[CIImage alloc] initWithImage:preFilterImage];
CIContext *ciUnsharpMaskContext = [CIContext contextWithOptions:nil];
CIFilter *ciUnsharpMaskFilter = [CIFilter filterWithName:@"CIUnsharpMask" 
                                          keysAndValues: kCIInputImageKey, ciUnsharpMaskImage, 
                               @"inputRadius", radiusValue,
                                 @"inputIntensity", intensityValue, nil];
CIImage *ciUnsharpMaskOutputImage = [ciUnsharpMaskFilter outputImage];
CGImageRef ciUnsharpMaskCgimg = [ciUnsharpMaskContext 
                                 createCGImage:ciUnsharpMaskOutputImage 
                                 fromRect:[ciUnsharpMaskOutputImage extent]];
preFilterImage = [UIImage imageWithCGImage:ciUnsharpMaskCgimg];
CGImageRelease(ciUnsharpMaskCgimg);
NSLog(@"unsharp mask filter applied");

[self.imageView setImage:preFilterImage]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T17:59:15.037

CIUnsharpMask 在 iOS 6 中被添加到 Core Image。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T22:30:25.717

没关系，我使用以下代码来获取可用过滤器的列表，而 CIUnsharpMask 不是其中之一:(

```
NSArray *supportedFilters = [CIFilter filterNamesInCategory:kCICategoryBuiltIn];
for (CIFilter *filter in supportedFilters) {
    NSString *string = [NSString stringWithFormat:@"%@",[[CIFilter filterWithName:(NSString *)filter] inputKeys]];
    NSLog(@"%@ %@", filter, string);
} 
```

# css - 所有将“body”字体应用于“p”（段落）的浏览器，Internet Explorer 除外

> ID：10291566
> 
> 赞同：0
> 
> 时间：2012-04-24T03:58:39.753
> 
> 标签：css, internet-explorer, fonts, inheritance

这是一个演示网站：[http](http://reddledemo.wordpress.com) ://reddledemo.wordpress.com （不，这不是与 WordPress 相关的问题。）

我注意到，除了 Internet Explorer（在 IE9 上测试）之外，该页面的内容在所有现代浏览器（基本上是最新版本的 Chrome、FireFox、Safari、Opera）中都出现在“无衬线”字体系列中。

“body”标签有一个定义的字体，当它们继承样式时，它应该自动应用于菜单和“p”段落。但是在给定的示例中，这并没有发生。

查看 CSS，我没有发现明显的问题，除非我完全遗漏了一些东西。那么，它可能是什么？（这是我第一次遇到这样的错误。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T04:23:42.583

好吧，这听起来可能很愚蠢，但事实是，Internet Explorer 9 恰好是其家族中唯一支持`rem`aka font-size 值的浏览器（旧版本的IE ），**在使用**.`root em``font`**`rem`**

因此，

```
font: 1.3rem Verdana, sans-serif; 
```

应该在您的样式表中显示为（如下）：

```
font-size: 1.3rem;
font-family: Verdana, sans-serif; 
```

不用说，`rem`只有少数现代浏览器支持，IE 9 就是其中之一（除了这个错误）。

**概念证明 (wrt IE9):**

*   这个小提琴工作正常，我没有使用`rem`：http: [//jsfiddle.net/SBrda/3/](http://jsfiddle.net/SBrda/3/)

*   `rem`当使用而不是：http `em`: [//jsfiddle.net/SBrda/4/](http://jsfiddle.net/SBrda/4/)时，相同的小提琴不能正常工作

*   当我将`font`属性分解为`font-size`和`font-family`属性时，上面的小提琴似乎在使用时渲染得很好：http `rem`: [//jsfiddle.net/SBrda/5/](http://jsfiddle.net/SBrda/5/)

希望这会有所帮助：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:06:40.920

IE 9`rem`一般支持该单位，但不是`font`简写形式。演示：

```
<!doctype html>
<style>
p { font: 1.35rem Courier; }
</style>
<p>Hello world 
```

IE 9 忽略整个规则，使用其默认字体大小和默认字体系列。所以它的解析例程中显然存在一个错误，导致它在`rem`这里被视为无法识别，因此丢弃了该规则。

如果您将速记 CSS 规则拆分为两个规则，它会起作用：

```
p { font-size: 1.35rem; font-family: Courier; } 
```

# join - 原则：同一张表的两个连接

> ID：10291568
> 
> 赞同：2
> 
> 时间：2012-04-24T03:58:51.600
> 
> 标签：join, doctrine-orm

我有一个包含 ID 和名称字段的字符表。

> id 名称
> 1 甘道夫
> 2 佛罗多
> 3 咕噜
> 4 山姆怀斯

我有一个包含 ID、character1_id 和 character2_id 字段的 Matches 表。

```
id char1 char2
1    1     3
2    2     4 
```

我正在尝试编写一个查询，该查询将加入这些并根据 Matches 表提取名称。

> 第 1 场是甘道夫和咕噜
> 第 2 场是佛罗多和山姆怀斯

这是我的 YAML

```
ORM\Dynasties2\Matches:
  type: entity
  table: proposals
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    manyToOne:
      character1:
        targetEntity: ORM\Dynasties2\Characters
      character2:
        targetEntity: ORM\Dynasties2\Characters 
```

但是我没有运气给它写信或读它。

我已经尝试过这个查询，并以几种不同的方式对其进行了调整，但均未成功。

```
$query = $this -> doctrine -> em -> createQuery ("SELECT a, b, c
        FROM ORM\Dynasties2\Matches a 
        JOIN a.character1 b
        JOIN a.character2 c

        "); 
```

当我尝试写入实体时，例如

```
$new_match = new ORM\Dynasties2\Matches;
$new_match->setCharacter1($character1);
$new_match->setCharacter2($character2); 
```

我收到以下错误：

> 消息：spl_object_hash() 期望参数 1 是对象，给定字符串 消息：get_class() 期望参数 1 是对象，给定字符串

和

> 消息：传递给 ORM\Dynasties2\Proposals::setCharacter1() 的参数 1 必须是 ORM\Dynasties2\Characters 的实例，给定字符串

当我尝试解析和显示查询数据时，我得到：

> 消息：类 ORM\Dynasties2\Characters 的对象无法转换为字符串

我已经翻阅了[Doctrine 查询文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html)，但要么我遗漏了某些东西，要么没有理解某些东西。

（使用 CodeIgniter2，但我认为这与此无关）

编辑：

这是我的 Matches 实体

```
namespace ORM\Dynasties2;

use Doctrine\ORM\Mapping as ORM;

/**
 * ORM\Dynasties2\Matches
 */
class Matches
{
    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var ORM\Dynasties2\Characters
     */
    private $character1;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set character1
     *
     * @param ORM\Dynasties2\Characters $character1
     * @return Proposals
     */
    public function setCharacter1(\ORM\Dynasties2\Characters $character1 = null)
    {
        $this->character1 = $character1;
        return $this;
    }

    /**
     * Get character1
     *
     * @return ORM\Dynasties2\Characters 
     */
    public function getCharacter1()
    {
        return $this->character1;
    }
    /**
     * @var ORM\Dynasties2\Characters
     */
    private $character2;

    /**
     * Set character2
     *
     * @param ORM\Dynasties2\Characters $character2
     * @return Proposals
     */
    public function setCharacter2(\ORM\Dynasties2\Characters $character2 = null)
    {
        $this->character2 = $character2;
        return $this;
    }

    /**
     * Get character2
     *
     * @return ORM\Dynasties2\Characters 
     */
    public function getCharacter2()
    {
        return $this->character2;
    }
} 
```

和字符：

```
namespace ORM\Dynasties2;

use Doctrine\ORM\Mapping as ORM;

/**
 * ORM\Dynasties2\Characters
 */
class Characters
{
    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var string $name
     */
    private $name;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     * @return Characters
     */
    public function setName($name)
    {
        $this->name = $name;
        return $this;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    } 
```

编辑：更多错误输出

我手动将一些数据插入到 Matches 表中以测试查询。

我收到以下错误：

> 遇到 PHP 错误
> 
> 严重性：4096
> 
> 消息：类 ORM\Dynasties2\Characters 的对象无法转换为字符串
> 
> 文件名：family/display_view.php
> 
> 行号：23

这是该视图文件：

```
foreach ($data as $key => $row) {

$char1 = $row -> getCharacter1();
$char2 = $row -> getCharacter2();
//$target_turn = $row -> getTargetTurn();

echo "</br>You have proposed a match between " . $char1 . " and " . $char2 . ".</br>";
} 
```

第 23 行是“回声”。

当我尝试使用 setter 写入实体/表时，我得到以下信息：

> 遇到 PHP 错误
> 
> 严重性：4096
> 
> 消息：传递给 ORM\Dynasties2\Proposals::setCharacter1() 的参数 1 必须是 ORM\Dynasties2\Characters 的一个实例，给定字符串，在第 76 行的 /path/applicationFolder/models/display_family_model.php 中调用并定义
> 
> 文件名：Dynasties2/Matches.php
> 
> 行号：255

这是模型的第 76 行，

```
$char1 = $_SESSION["data_char1"];
$new_proposal->setCharacter1($char1);  // <-- line 76 
```

这是比赛的第 255 行

```
public function setCharacter1(\ORM\Dynasties2\Characters $character1 = null) // <-- line 255
    {
        $this->character1 = $character1;
        return $this;
    } 
```

> 遇到 PHP 错误
> 
> 严重性：4096
> 
> 消息：传递给 ORM\Dynasties2\Proposals::setCharacter2() 的参数 1 必须是 ORM\Dynasties2\Characters 的一个实例，给定字符串，在第 77 行的 /path2/applicationFolder/models/display_family_model.php 中调用并定义
> 
> 文件名：Dynasties2/Matches.php
> 
> 行号：282

```
$char2 = $_SESSION["data_char2"];
$new_proposal->setCharacter2($char2); // <-- line 77

public function setCharacter2(\ORM\Dynasties2\Characters $character2 = null) // <-- line 282
    {
        $this->character2 = $character2;
        return $this;
    } 
```

和

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：spl_object_hash() 期望参数 1 是对象，给定字符串
> 
> 文件名：ORM/UnitOfWork.php
> 
> 行号：1318

和

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：spl_object_hash() 期望参数 1 是对象，给定字符串
> 
> 文件名：ORM/UnitOfWork.php
> 
> 行号：734

和

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：get_class() 期望参数 1 是对象，给定字符串
> 
> 文件名：ORM/UnitOfWork.php
> 
> 行号：738

和

> 致命错误：在 /path/applicationFolder/libraries/Doctrine/ORM/UnitOfWork 中出现消息“在关联 ORM\Dynasties2\Matches#character1 上找到类型实体，但期待 ORM\Dynasties2\Characters”的未捕获异常“Doctrine\ORM\ORMException” .php:737 堆栈跟踪：#0 /path/applicationFolder/libraries/Doctrine/ORM/UnitOfWork.php(639): Doctrine\ORM\UnitOfWork->computeAssociationChanges(Array, '5') #1 /path/applicationFolder/libraries /Doctrine/ORM/UnitOfWork.php(376): Doctrine\ORM\UnitOfWork->computeChangeSet(Object(Doctrine\ORM\Mapping\ClassMetadata), Object(ORM\Dynasties2\Proposals)) #2 /path/applicationFolder/libraries/ Doctrine/ORM/UnitOfWork.php(661): Doctrine\ORM\UnitOfWork->computeScheduleInsertsChangeSets() #3 /path/applicationFolder/libraries/Doctrine/ORM/UnitOfWork.php(270):/path/applicationFolder/libraries/Doctrine/ORM/UnitOfWork.php 中的 Doctrine\ORM\UnitOf 第 737 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:59:34.307

我认为问题在于学说不知道要加入字符以匹配哪一列。列 character1_id 和 character2_id 需要被声明为连接列，因为学说会自动假设一个外键，目标实体“ORM\Dynasties2\Characters”作为characters_id。

尝试将以下内容添加到您的 YAML；

```
ORM\Dynasties2\Matches:
  type: entity
  table: proposals
  fields:
id:
  type: integer
  id: true
  generator:
    strategy: AUTO
manyToOne:
  character1:
    targetEntity: ORM\Dynasties2\Characters
    joinColumn:
        name: character1_id
        referenceColumnName: id
  character2:
     targetEntity: ORM\Dynasties2\Characters
     joinColumn:
        name: character2_id
        referenceColumnName: id 
```

# facebook - FB.Data.query 和 SSL

> ID：10291572
> 
> 赞同：0
> 
> 时间：2012-04-24T04:00:59.207
> 
> 标签：facebook, api

我将 FB.Data.query 用于用户注册页面。该页面使用 SSL 证书，我需要从 facebook 获取的项目之一是用户的照片。但是，当我抓住它时，它会给我 HTTP 链接，但我需要 HTTPS 链接。我知道您可以使用 return_ssl_resources = 1，但我不确定它是如何进入我的代码的。非常感谢您提供的任何帮助。

这是我的代码。

var query = FB.Data.query('select username, first_name, last_name, email, about_me, current_location, meeting_sex, sex, pic_square, pic_big,birthday_date from user where uid={' + zero + '}', my_facebook_id);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:32:21.043

据我所知，return_ssl_resources 已被弃用。我不知道您是否可以通过 FQL 获取 HTTPS 个人资料图片，但如果您只是通过 HTTPS 上的图形 api 获取基本用户信息，它将返回一个 HTTPS 个人资料图片 URL，您可以添加 ?type=large 来制作这是大图。

# javascript - 如何在 chrome 的书签 API 中获取数组？

> ID：10291574
> 
> 赞同：2
> 
> 时间：2012-04-24T04:01:03.610
> 
> 标签：javascript, google-chrome-extension

如果我写：

```
var source = new Array();
function doSomething(a){
   chrome.bookmarks.search(a,function(items){
      for(var i = 0;i<items.length;i++)
      {
          source[i] = items[i];

      }

   });
   console.log(source[0].title);
   alert(source[0].title);

} 
```

在控制台中我可以看到这些值，但警告的是“未定义”。

有人可以告诉我为什么以及如何写来获取这些值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:14:25.817

您`alert`在错误的范围内执行 - 您应该在回调函数中执行此操作。试试这个：

```
function doSomething(a){
   chrome.bookmarks.search(a,function(items){
      var source = [];
      for(var i = 0;i<items.length;i++)
      {
          source[i] = items[i];

      }
      console.log(source[0].title);
      alert(source[0].title);   
      doSomethingWithResult(source); 
   });      

} 
```

您已经在控制台中看到了正确的值，因为它显示了对此时已经填充的值的引用（在回调函数中）。

# c - 如何正确内联静态库

> ID：10291581
> 
> 赞同：17
> 
> 时间：2012-04-24T04:02:02.410
> 
> 标签：c

我正在重写我的一个小型 C 数学库，最终将成为用户的静态库，并希望从我的向量数学接口的内联中受益。

我有以下内容：

[mymath.h]

```
...
...
extern float clampf( float v, float min, float max );
...
... 
```

[mymath.c]

```
inline float clampf( float v, float min, float max )
{
    if( v < min ) v = min;
    if( v > max ) v = max;

   return v;
} 
```

由于我的库将是静态的，并且我只会向用户提供`.h`（和`.lib`），因此`clampf`编译时该函数是否会内联到他们的程序中？

我是否在做正确的事情，但`extern`在`.h`和 inline 中声明函数`.c`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T04:21:07.633

你几乎是正确的。你实际上有它倒退; 对于内联函数，您必须将`inline`定义放在头文件中，将`extern`声明放在 C 文件中。

```
// mymath.h
inline float clampf( float v, float min, float max )
{
    if( v < min ) v = min;
    if( v > max ) v = max;

    return v;
}

// mymath.c
#include "mymath.h"
extern float clampf( float v, float min, float max ); 
```

您必须将定义（全文）放在头文件中，如果编译器选择这样做，这将允许包含头文件的任何文件能够使用内联定义。

您必须将`extern`声明（原型）放在源文件中，以告诉编译器在库中发出函数的外部版本。这在您的库中为非内联版本提供了一个位置，因此编译器可以在内联函数或使用通用版本之间进行选择。

请注意，这可能不适用于 MSVC 编译器，它通常对 C 的支持很差（对 C99 的支持几乎为零）。对于 GCC，您必须为旧版本启用 C99 支持。现代 C 编译器默认支持这种语法。

**选择：**

您可以更改标题以获得一个`static inline`版本，

```
// mymath.h
static inline float clampf(float v, float min, float max)
{
    ...
} 
```

但是，这不提供函数的非内联版本，因此编译器可能被迫为每个翻译单元创建此函数的副本。

**笔记：**

1.  C99 内联规则并不完全直观。文章“ [C 中的内联函数](http://www.greenend.org.uk/rjk/tech/inline.html)”（[mirror](http://www.slacker.org/brandon/programming/inline.html)）详细描述了它们。特别是，跳到底部并查看“使用内联函数的策略”。我更喜欢方法#3，因为 GCC 一段时间以来一直默认使用 C99 方法。

2.  从技术上讲，您永远不需要添加`extern`函数声明（或定义），因为`extern`这是默认设置。我把它放在那里是为了强调。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T04:07:27.363

`static inline`您应该在 .h 文件中定义您的函数：

```
static inline float clampf( float v, float min, float max )
{
    if( v < min ) v = min;
    if( v > max ) v = max;

    return v;
} 
```

.c 文件中必须不存在该函数。

编译器可能决定不内联函数，而是使其成为正确的函数调用。因此，每个生成的 .o 文件都可能包含该函数的副本。

# c# - 从上一个对话框填充 CheckedBoxList1

> ID：10291584
> 
> 赞同：0
> 
> 时间：2012-04-24T04:02:20.050
> 
> 标签：c#, winforms, dialog, checkedlistbox

我使用的 API dosnt 响应 Form_Load 事件。所以我想用按钮中包含的代码填充 CheckedListBox1，我用来调用包含 CheckedlistBox1 的对话框。这是我的第一次尝试。

```
 private void button3_Click(object sender, EventArgs e)
    {
        TextSelectorForm textSelectionForm = new TextSelectorForm();

        CheckedListBox checkedListBox1;

        string line;
        StreamReader file = new StreamReader("test.txt");
        while ((line = file.ReadLine()) != null)
        {
            TextSelectorForm.checkedListBox1.Items.Add(line);
        }
        file.Close();

        textSelectionForm.Show();
    } 
```

想法，想法，例子？谢谢！

* * *

我收到错误“对象引用未设置为对象的实例”。我正在学习，慢慢来。这是我的代码。

```
 public partial class Form1 : System.Windows.Forms.Form
{
    public Form1(ExternalCommandData commandData)
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        CheckedListBox.ObjectCollection data = null;

        string line;
        StreamReader file = new StreamReader(@"C:\test.txt");

        while ((line = file.ReadLine()) != null)
        {
            data.Add(line);
        }

        file.Close();

        Form2 form2 = new Form2(data);
        form2.Show();
    }
}

    public partial class Form2 : System.Windows.Forms.Form
{
    public Form2(CheckedListBox.ObjectCollection formdata)
    {
        InitializeComponent();

        if (formdata != null)
        {
            this.checkedListBox1.Items.AddRange(formdata);
        }
    }
} 
```

（PS。如果我想补充我的问题怎么办？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:39:53.107

我不会说英语。我正在与谷歌翻译打交道。

如果我理解您的问题，您需要编写以下程序： 1\. 从文本文件中恢复数据以填充 CheckedListBox 2\. 将恢复的数据发送到将显示的表单。

我建议如下： 1\. 创建一个 ListBox.ObjectCollection 类型的对象，用于存储您需要的信息。2\. 创建一个以 ListBox.ObjectCollection 形式接受的构造函数作为参数。3\. 在窗体的构造函数中，将参数分配给 ListBox。

```
//CONSTRUCTOR IN TEXTSELECTORFORM
public TextSelectorForm(ListBox.ObjectCollection dataFromOtherForm) {
    InitializeComponents();
    //Add this code after InitializeComponents();
    if (dataFromOtherForm != null) {
        this.listBoxInThisForm.AddRange(dataFromOtherForm);
    }
}

//CODE FOR BUTTON IN OTHER FORM
private void button3_Click(object sender, EventArgs e) {
    //Stores the values ​​to display in the ListBox
    ListBox.ObjectCollection data = null;

    //Your code from retrieve data
    string line;
    StreamReader file = new StreamReader("test.txt");
    while ((line = file.ReadLine()) != null) {
        data.Add(line);
    }
    file.Close();

    //Form to send the data
    TextSelectorForm textSelectionForm = new TextSelectorForm(data);
    textSelectionForm.Show();
} 
```

我希望回答你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:32:54.437

对不起，没有测试代码。

确实会启动 NullReference，因为我没有创建类的新实例（立即分配 null 值），因此 Add 方法失​​败。

使用 ListBox.ObjectCollection 不是解决这个问题的正确方法，我很抱歉。对于这种情况，最好使用通用集合 List。重写代码：

```
public partial class Form1 : System.Windows.Forms.Form {
    public Form1(ExternalCommandData commandData) {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e) {
        List<string> data = new List<string>();

        string line;
        StreamReader file = new StreamReader(@"C:\test.txt");

        while ((line = file.ReadLine()) != null) {
            data.Add(line);
        }

        file.Close();

        Form2 form2 = new Form2(data);
        form2.Show();
    }
}

public partial class Form2 : System.Windows.Forms.Form {
    public Form2(List<string> formdata) {
        InitializeComponent();

        if (formdata != null) {
            this.checkedListBox1.Items.AddRange(formdata.ToArray());
        }
    }
} 
```

# iphone - iphone应用程序在第一次启动时崩溃

> ID：10291585
> 
> 赞同：3
> 
> 时间：2012-04-24T04:02:58.833
> 
> 标签：iphone, crash, startup

只是想知道为什么我新制作的应用程序第一次在我的 iPod 上运行时崩溃，但之后每次都运行。我一直在完全使用故事板进行开发，到目前为止我还没有编写任何代码。谁能告诉我第一次打开我的应用程序时如何修复崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:33:53.270

如果您在 Xcode 中运行您的应用程序（连接您的设备），您可以从 Xcode 添加断点。在左侧面板上，单击断点工具栏，按“+”添加异常断点...

这将停止在您的应用程序代码中，至少您应该有一些与您的故事板视图相关的控制器代码。

![在此处输入图像描述](../Images/e68edee0b5a2c4cc92b4f7afb866a369.png)

# iphone - 在编辑文本时在文本视图中添加移动图像

> ID：10291586
> 
> 赞同：1
> 
> 时间：2012-04-24T04:03:17.243
> 
> 标签：iphone, objective-c, ios5, uiimageview, uitextview

我有一个文本视图，我需要在文本视图中添加图像。文本视图的想法可以假设为文本和图像以及图像文本之后等等。我可以在文本视图上添加图像，但我的问题是当我再次编辑我的文本视图，文本位于图像后面。我想要的是假设图像是否低于我的光标位置并且我正在编辑文本，所以我的图像也应该向前或向后移动。请帮助我如何实现在编辑文本时移动图像。我的应用程序部署目标是 5.0，因此我们可以包含 ios 5.0 中提供的新功能。

在图像中，它显示了如何在编辑文本时将文本放在图像视图后面。这就是我需要转换图像视图的原因。

![](../Images/83e70276dfbb2135c2675c65e73343eb.png)

请帮帮我。我被困在这里。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:24:05.377

伙计 使用我的代码...

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text;
{
if ( [text isEqualToString:@"\n"] ) {

}
else
{
    NSString *yourstring = [[NSString alloc]init];
    yourstring = textView.text;
    CGSize s = [yourstring sizeWithFont:[UIFont systemFontOfSize:15] //define your textview font size
                      constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                          lineBreakMode:UILineBreakModeWordWrap];   
    CGRect frame = CGRectMake(0.0f, s.height+10, 320.0f, 20);//use YourImageView. height and width 
    YourImageView.frame=frame;
}
return YES;
} 
```

让我知道。如果您发现任何困难...

**已编辑** **附加....* *

```
//imgSwipe2 is my UIImgaeView you can use your imageview. May Be i forgot to release some object and i am sure that you can handle but it's working fine,

-(void)textViewDidChangeSelection:(UITextView *)textView
 {
  NSRange range = textView.selectedRange;
if(range.location<textView.text.length)
{
    NSString * firstHalfString = [txtView.text substringToIndex:range.location]; 

    CGSize s = [firstHalfString sizeWithFont:[UIFont systemFontOfSize:15] 
                           constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                               lineBreakMode:UILineBreakModeWordWrap];   

    if(s.height<imgSwipe2.frame.origin.y)
    {
        // You can use this code any number of image

        imgSwipe2.frame = CGRectMake(imgSwipe2.frame.origin.x, s.height, imgSwipe2.frame.size.width, imgSwipe2.frame.size.height);  

    }
    else
    {
        // Do what ever you want to do

        NSString * firstString1 = textView.text;                
        CGSize s = [firstString1 sizeWithFont:[UIFont systemFontOfSize:15] 
                            constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                                lineBreakMode:UILineBreakModeWordWrap];   
        imgSwipe2.frame = CGRectMake(imgSwipe2.frame.origin.x, s.height, imgSwipe2.frame.size.width, imgSwipe2.frame.size.height);

    }   
  }
} 
```

希望，这会帮助你...享受...

# java - Android Dialog OnClick 方法不起作用？

> ID：10291587
> 
> 赞同：0
> 
> 时间：2012-04-24T04:03:19.280
> 
> 标签：java, android

我在这个类文件中构建了一个 AlertDialog ，并且对话框很好，但是执行单击时似乎没有调用这些方法。我究竟做错了什么？谢谢你的帮助！

```
//AlertView Builder
    final AlertDialog.Builder builder;
    builder = new AlertDialog.Builder(this);
    builder.setTitle(" ");
    builder.setIcon(R.drawable.banner);
    builder.setMessage("Share this picture using any of the below!");

    builder.setPositiveButton("Email",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                  System.out.print("Emailing...");
                }
            });

    builder.setNeutralButton("Facebook",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    System.out.print("Facebooking...");
                }
            });

    builder.setNegativeButton("Twitter",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    System.out.print("Tweeting...");
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:07:53.623

你期待它做什么？你在那些块中有你现在没有的代码吗？

默认情况下，Android 不使用`System.out.print();`任何东西 - 使用 Log：

```
Log.d(getClass().getName(),"Facebooking..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:21:58.413

尝试以下代码，因为,`setNeutralButton`不适用于特定 API。`setPositiveButton``setNegativeButton`

```
//AlertView Builder
    final AlertDialog.Builder builder;
    builder = new AlertDialog.Builder(this);
    builder.setTitle(" ");
    builder.setIcon(R.drawable.banner);
    builder.setMessage("Share this picture using any of the below!");

    builder.setButton1("Email",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                  System.out.print("Emailing...");
                }
            });

    builder.setButton2("Facebook",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    System.out.print("Facebooking...");
                }
            });

    builder.setButton3("Twitter",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    System.out.print("Tweeting...");
                }
            }); 
```

希望能帮助到你...

# apache - 使用 Apache 代理剥离 Cache-Control？

> ID：10291592
> 
> 赞同：0
> 
> 时间：2012-04-24T04:03:58.087
> 
> 标签：apache, excel, http

我使用 Excel 的网络查询功能从 www.tmx.com 获取股票报价。前段时间 Excel 开始报告 Web 查询没有返回任何数据，即使网页很好。谷歌搜索表明一个可能的问题是 no-cache 指令。而且，如果我将报价单的网页保存到文件中，并将 Excel 的网络查询 (file://...) 指向它，那确实有效。

由于我无法控制 TMX 的 Web 服务器，也无法修复 Excel，我想我将 Apache 设置为 8080 上的本地服务器，将其配置为（转发）代理，去掉 Cache-Control 标头响应，看看这是否让 Excel 高兴。

我有 Windows 7 64 位、Excel 2007、Apache 2.2、Opera 11.61。Apache 在 127.0.0.1:8080 上手动运行，Opera 可以将其用作代理。

我无法说服 Apache 去掉那个标题。mod_headers 会将标头添加到传出请求中，但似乎不会触及响应。我无法在响应中添加/更改/取消设置任何标题。

asis 模块似乎仅适用于文件。mod_rewrite 用于 URL。其他似乎没什么用。mod_expires 只会更改标题；我想完全剥离它。

有没有办法让 Apache 从代理响应中剥离 Cache-Control:？

或者，有人可以推荐一个不同的 HTTP 1.1 代理来满足我的需要吗？

[第一次海报，有时是潜伏者。欢迎提出建设性的批评。]

我的 Apache conf、注释和空行被删除。

```
ServerRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2"
Listen 8080
LoadModule actions_module modules/mod_actions.so
LoadModule alias_module modules/mod_alias.so
LoadModule asis_module modules/mod_asis.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule authn_default_module modules/mod_authn_default.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authz_default_module modules/mod_authz_default.so
LoadModule authz_groupfile_module modules/mod_authz_groupfile.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule authz_user_module modules/mod_authz_user.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule dir_module modules/mod_dir.so
LoadModule env_module modules/mod_env.so
LoadModule headers_module modules/mod_headers.so
LoadModule include_module modules/mod_include.so
LoadModule isapi_module modules/mod_isapi.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module modules/mod_mime.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule setenvif_module modules/mod_setenvif.so
<IfModule !mpm_netware_module>
<IfModule !mpm_winnt_module>
User daemon
Group daemon
</IfModule>
</IfModule>
ServerAdmin smacdonald@cds.int
DocumentRoot "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs"
<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>
<Directory "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/htdocs">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>
<IfModule dir_module>
    DirectoryIndex index.html
</IfModule>
<FilesMatch "^\.ht">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>
ErrorLog "logs/error.log"
LogLevel warn
<IfModule log_config_module>
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    <IfModule logio_module>
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>
    CustomLog "logs/access.log" common
</IfModule>
<IfModule alias_module>
    ScriptAlias /cgi-bin/ "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/cgi-bin/"
</IfModule>
<IfModule cgid_module>
</IfModule>
<Directory "C:/Program Files (x86)/Apache Software Foundation/Apache2.2/cgi-bin">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>
DefaultType text/plain
<IfModule mime_module>
    TypesConfig conf/mime.types
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
</IfModule>
<IfModule ssl_module>
SSLRandomSeed startup builtin
SSLRandomSeed connect builtin
</IfModule>
<IfModule proxy_http_module>
ProxyRequests On
ProxyVia On
  <proxy *>
    Order deny,allow
    Allow from localhost
  </proxy>
</IfModule>
<IfModule headers_module>
Header set Cache-Control "public"
Header add MyHeader "MyHeader"
RequestHeader set Cache-Control "public"
RequestHeader add MyRequestHeader "MyRequestHeader"
</IfModule> 
```

# php - PHP 忽略来自 str_replace 的字符串块

> ID：10291595
> 
> 赞同：1
> 
> 时间：2012-04-24T04:04:25.670
> 
> 标签：php, regex

我正在使用 str_replace 清理 CSS 输出，但需要忽略具有定义的开始和结束的某些字符串块。

忽略以下开头的任何内容：

```
@media blah(this can be any value) { 
```

要忽略的内容：

```
 .class {
    property: value;
  } 
```

并以：

```
}/*ends*/ 
```

并在该块之外执行 str_replace ：

```
.otherclass {property:value;} 
```

PHP：

```
$output = str_replace("{", "{\n", $output);
$output = str_replace("}", "}\n", $output); 
```

原因是 @media 块需要适当的缩进，该缩进已经正确格式化，并且不应被 str_replace 触及，它简单地返回可读行：

```
 .otherclass {
  property:value;
  } 
```

你会用 PHP 怎么说？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:39:08.593

我还认为正则表达式是可行的方法，因为它们为您提供了更大的灵活性。

我想天真的解决方案是首先从输出源中获取所有这些事件，然后在剩余代码上使用 str_replace，然后将其放回去。也可以尝试逐行遍历代码并且只运行 str_replace

同样，您最好的机会是使用正则表达式。您正在寻找的似乎是 preg_replace，告诉它不匹配 @media 之前的任何内容

参考：

*   [http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)
*   [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:36:20.447

正则表达式不能计数，因此它们*通常*不适合解析（这就是您正在做的事情）。即，除非您可以限制输入格式超过全套有效 CSS，否则您可能会发现某些情况无法按预期工作。

您还可以尝试完全解析 CSS 并使用规则遍历生成的 CSS 树，以指定如何输出数据。这里显然有一个 CSS 解析器库：

[http://www.phpclasses.org/package/1289-PHP-CSS-parser-class.html](http://www.phpclasses.org/package/1289-PHP-CSS-parser-class.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T05:51:45.893

```
$string = 
"@media blah(this can be any value) {
.class {
    property: value;
  }
}/*ends*/

.otherclass {property:value;}

.otherclass {property:value;}

@media blah(this can be any value) {
.class {
    property: value;
  }
}/*ends*/

.otherclass {property:value;}

.otherclass {property:value;}";

$arr = explode("\r", $string);

$ignore_block = false;
for ($i = 0; $i < count($arr); $i++)
{
    if (strstr($arr[$i], '@media'))
        $ignore_block = true;
    elseif (strstr($arr[$i-1], '/*ends*/'))
        $ignore_block = false;

    if ($ignore_block == false)
    {
        $arr[$i] = str_replace("{", "{\n\t", $arr[$i]);
        $arr[$i] = str_replace("}", "\n}\n", $arr[$i]);
    }
}
file_put_contents("test.txt", implode("\n", $arr)); 
```

正则表达式不起作用，因为lookbehind 不允许可变长度。尝试遍历文件。

# android - 不能重复我们在 Android 应用中构建的应用内购买

> ID：10291596
> 
> 赞同：0
> 
> 时间：2012-04-24T04:04:37.003
> 
> 标签：android, in-app-purchase

我在我的应用中使用了 Android 应用内购买。当我测试购买该物品时，第一次是可以的，但第二次，UI 只显示帐户名称，没有信用卡信息。在中心按钮上，它显示“接受并下载”。但是如果你按下按钮，什么也不会发生。有人能告诉我什么是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T21:40:42.727

您购买的商品可能是托管商品。[在http://developer.android.com/guide/google/play/billing/billing_overview.html#billing-types](http://developer.android.com/guide/google/play/billing/billing_overview.html#billing-types)中搜索“购买类型”以获取更多信息。因此，您第二次尝试购买时，Google Play 不会让您购买，因为您已经购买了。没有任何反应，因为 Google Play 无法强制您的应用程序开始下载已购买的产品。我不确定，但我认为当一个人按下“接受并下载”按钮时，不会发送 PURCHASE_STATE_CHANGED 广播意图。

为避免这种情况，您可以使用非托管产品（不幸的是，您无法将现有产品更改为非托管产品），或者您可以在购买商品后让购买按钮消失。在后一种情况下，您可能还想在重新安装应用程序的情况下使用 RESTORE_TRANSACTIONS。

# salesforce - 如何返回 PageReference 以在 Salesforce 中创建 sObject

> ID：10291602
> 
> 赞同：4
> 
> 时间：2012-04-24T04:05:58.393
> 
> 标签：salesforce

我知道如何返回 PageReference 来编辑和查看 sObject：

```
PageReference ref =  new ApexPages.StandardController(bnk).edit(); 
```

但是 StandardController 类没有像 create 这样的方法。

如何返回页面以创建 sObject。

我也知道这样的方法：

```
PageReference ref =  new PageReference('/a00/e'); 
```

但是sObject有很多lookup fields，这个方法不能取出reference lookup fields，只能创建一个独立的sObject。

那么如何返回创建页面并取出参考查找字段呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:28:21.783

我假设您在下面的答案中询问如何设置查找字段。但是，如果您询问如何删除查找字段，则需要编辑 PageLayout，但这也会从“编辑”页面中删除这些字段。如果您需要编辑页面上的字段，而不是创建页面上的字段，您需要为您的对象创建一个新的创建 Visualforce 页面并将重定向设置到该页面。

* * *

创建页面是没有`id`参数的编辑页面。您拥有的代码应该可以工作：

```
PageReference ref =  new PageReference('/a00/e'); 
```

要更改通过 发送到新 Page 的任何参数`PageReference`，请使用`getParameters()`方法。下面的示例为帐户查找添加了一个参数（`CF00NC0000004htI5`在我的开发版中是字段 ID）。

```
PageReference.getParameters().put('CF00NC0000004htI5', 'sForce'); 
```

可以通过转到设置 > 创建 > 对象 > [您的对象] > [您的字段] 找到字段 ID。到达那里后，在页面地址 (URL) 中查找字段 ID `/`（但在`?`如果有 a之前`?`）。例如，我的字段 URL 是：`https://instance.salesforce.com/00NC0000004htI5?setupid=CustomObjects`. 获得 ID 后，`CF`在其前面添加。

对于查找字段，您可能还需要设置`CF`+FieldId+`_lktp`参数。这设置了引用记录的 ID。

这是我用来获取下一页的完整方法。

```
public PageReference NextPage()
{
    Account a = [Select Id, Name From Account Where Name like '%sForce%' Limit 1];

    PageReference myPage = new PageReference('/a03/e');

    // set the ID on a lookup field
    myPage.getParameters().put('CF00NC0000004htI5_lktp', a.Id); 
    // set the Name on a lookup field
    myPage.getParameters().put('CF00NC0000004htI5', a.Name);

    myPage.setRedirect(true);
    return myPage;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T21:13:52.423

尝试添加[保存和新建](http://www.fishofprey.com/2012/03/salesforce-save-and-new-method-for.html)按钮时遇到了同样的问题。StandardController 没有返回 PageReference 的 new() 方法似乎很奇怪。

如果您的 Apex 类要部署到另一个 Salesforce 组织（例如添加到出站更改集、放入托管或非托管包或使用 Eclipse 部署），我会避免对自定义对象键前缀进行硬编码，因为这可能会改变组织之间。相反，使用 DescribeSObjectResult 获取 KeyPrefix。

```
public PageReference customObjectPageReference() {
    Schema.DescribeSObjectResult R = YourCustomObject__c.SObjectType.getDescribe();
    // Add /o to end of URL to view recent
    return new PageReference('/' + R.getKeyPrefix() + '/e');
} 
```

# javascript - 这个 for 循环是如何工作的？对于 ( ; i < 长度; i++ )

> ID：10291607
> 
> 赞同：9
> 
> 时间：2012-04-24T04:06:19.100
> 
> 标签：javascript, loops

这个 for 循环是如何工作的？这对我来说没有意义。

```
for ( ; i < length; i++ ) { 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T04:08:10.110

只要`i`小于，循环就会简单地重复`length`。它只是假设`i`已经在别处声明。

实际上，`for`循环结构中的所有部分都是可选的。例如，这是创建无限循环的一种完全有效的方法：

```
​for(;;) window.alert('Are you sick of alerts yet?');​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T04:08:17.230

这是一个常规`for`循环，在初始化步骤中什么都不做。

这相当于写：

```
;
while (i < length) {
    // ...
    i++;
} 
```

除非主体中有 a ，在这种情况下，`continue`循环将在重新评估条件之前执行，而循环不会。`...``for``i++``while`

# sql-server - SQL Server 二进制文件存储

> ID：10291608
> 
> 赞同：2
> 
> 时间：2012-04-24T04:06:25.570
> 
> 标签：sql-server, database, data-storage

为了快速了解背景，我有一个我目前支持的应用程序，它在 Oracle 10.2 上运行，具有专门的 DBA。过去，当我想创建一个存储二进制数据的表（他们的世界中的 BLOB - 这可能是 PDF、DOCX 等）时，DBA 总是会“分区”该列/表的数据存储（不确定哪个）到磁盘上的单独物理区域。他们这样做的理由是，它有助于确保性能不会因将大量二进制文件存储在与发生查找的其余数据相同的文件中而受到影响。

我的问题是我是否应该为 SQL Server 做类似的事情（2012，尽管我怀疑版本是否重要）？如果是这样，我该怎么做？这样做的正确术语是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T04:17:33.517

您可以创建一个单独的文件组，其文件位于不同的卷上，然后显式创建将 LOB 数据存储在该文件组上的表。文件组指定是[CREATE TABLE](http://msdn.microsoft.com/en-us/library/ms174979.aspx)和[CREATE INDEX](http://msdn.microsoft.com/en-us/library/ms188783.aspx)语句的一部分，默认为 PRIMARY 文件组。

在 SQL Server 中存储文件也有不同的选择，在 2008+ 中，您可以使用[FILESTREAM](http://msdn.microsoft.com/en-us/library/bb933993.aspx)（另请参见[此处](http://msdn.microsoft.com/en-us/library/cc949109%28v=SQL.100%29.aspx)），在 2012 中，您可以使用[FILETABLE](http://msdn.microsoft.com/en-us/library/ff929144.aspx)。但是在大多数情况下，我很难证明将文件存储在数据库中的合理性。将文件存储在文件系统上并在数据库中存储指针通常不会出现问题。

您可以在我 12 年前写的[这篇常见问题解答文章](https://web.archive.org/web/20150216014146/http://databases.aspfaq.com/database/should-i-store-images-in-the-database-or-the-filesystem.html)中阅读我过时且冗长的观点。

请记住，某些技术已经发生了变化（显然 FILESTREAM 和 FILETABLE 当时不可用），其中一些要点仍然相关......

最后，[MSDN 上](http://msdn.microsoft.com/en-us/library/ms187087.aspx)关于文件/文件组处理的一些建议可能对阅读有用。

# c - Fortran 77 如何分配公共块变量？

> ID：10291609
> 
> 赞同：2
> 
> 时间：2012-04-24T04:06:36.133
> 
> 标签：c, fortran, heap-memory, fortran77, fortran-common-block

我正在用 C 语言开发一个可以与 C、C++ 或 Fortran 代码一起使用的库。它使用的一种机制是捕获对堆栈、堆或数据/bss 段中页面的写入。在这种情况下，“堆”是库从映射文件中创建的特殊堆。我发现我的库未能捕获对 Fortran 应用程序中变量的写入。变量声明为

```
double precision u(5,I,J,K) 
```

其中 I、J 和 K 是整数参数（即常量）。然后代码将 u 包含在一个称为“字段”的公共块中。

在GDB下调试的时候发现u的地址没有落入三个数据段中的任何一个的范围内。（因此库未能捕获写入！）然后我查看了 /proc//maps 伪文件，发现 u 的地址落入系统注释为“堆”的范围内。但是你是怎么进入这个“堆”的？在这种情况下，Fortran 77 代码不使用非标准的“allocate”关键字在堆上分配。谁能向我解释一下 Fortran 77（在 Ubuntu Linux x86-64 下）在“堆”上分配了哪些变量，以及如何首先创建这个“堆”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:03:13.580

我在一个公共块中玩弄了一个数组。看起来，Linux 中的 .bss 段确实与堆合并（或者至少使用相同的`brk(2)`机制分配空间）。

这是相关的 Fortran 代码：

```
double precision u(5,20,20,20)
common /a/ u 
```

产生的 GNU 汇编指令`gfortran`是：

```
.comm a_,320000,32 
```

这声明了一个名为`a_`320000 字节大的通用符号，并且应该在 32 字节边界上对齐。当链接器看到此声明并且没有其他定义`a_`为它在 .bss 中为其保留空间时，`objdump`在生成的二进制文件上运行时可以清楚地看到：

```
 Sections:
 Idx Name          Size      VMA               LMA               File off  Algn
 ...
  22 .data         00000010  0000000000600b40  0000000000600b40  00000b40  2**3
                   CONTENTS, ALLOC, LOAD, DATA
  23 .bss          0004e220  0000000000600b60  0000000000600b60  00000b50  2**5
                   ALLOC
 ... 
```

这里的 .bss 是 320000 (0x4e200) 字节加上一些 32 字节的附加数据。它仅被标记为可分配的，仅此而已 - 没有从文件中预填充数据。您还可以推断，从 VMA 0x600b80 开始，`a_`之前放置了 32 个字节的附加数据：`u`

```
(gdb) info address u
Symbol "u" is static storage at address 0x600b80.
(gdb) info symbol &u
a_ in section .bss of /path/to/a.out 
```

`u`实际上只是Fortran主函数中局部变量的符号，`a_`而是全局可见的存储。这就是为什么您可以在不同的子例程/函数中以不同的方式命名数组，但如果将它们放在适当的公共块中，仍然可以访问相同的内存。

看起来 .bss 的笨拙 VMA 是 ELF 文件中 .data 段偏移的结果，因为 .bss 位于内存中 .data 段之后。在 Linux 中加载 .data 段的方式是，它是`mmap(2)`从文件中 -ed 的，`MAP_PRIVATE`它为映射提供了写时复制语义：

```
00400000-00401000 r-xp 00000000 00:1d 25681168    /path/to/a.out
00600000-00601000 rw-p 00000000 00:1d 25681168    /path/to/a.out <-- .data
00601000-00670000 rw-p 00000000 00:00 0           [heap] 
```

.bss 与 .data 映射在同一页面中开始，这是有道理的，因为两者都保存读/写数据并且预计会被写入，并且通过不在单独的页面上启动 .bss 可以节省一些 VM。

.data 段之后的所有内容都没有文件映射备份，因此属于可见的动态可调整空间，如`[heap]`. 这个空间以及堆本身是通过移动数据段的末尾来控制的，`/proc/pid/maps`即所谓的*程序中断*`brk(2)`。内核中的 ELF 加载程序最初将程序中断移动得足够远，以便为 .bss 保留空间，如`strace`可执行文件所示：

```
execve("./a.out", ["a.out"], [/* 230 vars */]) = 0
brk(0)                          = 0x64f000 <-- already moved past the .bss 
```

我们知道 .data 段从 00600000 开始。.bss 从 00600B60 开始。公共块分配在 0x600b80，它的大小是 0x4e200，所以它在 0x64ed80 结束，四舍五入到页面边界得到 0x64f000。如果没有其他动态链接库自行分配空间，则真正的程序堆将在此处开始。

由于动态内存分配器`malloc(3)`使用相同的`brk(2)`机制（或匿名`mmap(2)`用于大型分配或数据段大小的限制已用完），因此数组是在 .bss 中还是使用 .bss 分配实际上并不重要`ALLOCATE()`。不同之处在于 .bss 最初用零填充，而由`malloc`or分配的内存内容`ALLOCATE()`保持原样。

# ruby-on-rails - 如何查看自动化日常 Rake 任务的输出？

> ID：10291610
> 
> 赞同：3
> 
> 时间：2012-04-24T04:06:39.423
> 
> 标签：ruby-on-rails, ruby, rake-task

我们公司使用rails作为我们的服务器，我们每天都会在没有监控的情况下收集任务。当 rake 中止时，我们无法获取中止信息，直到我们发现我们的数据很奇怪。

如何通过电子邮件或任何其他方法尽快获得 rake-aborting 信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:04:01.350

你可以试试这个 gem - [https://github.com/oscardelben/rake_notifier](https://github.com/oscardelben/rake_notifier)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:37:41.537

如果您通过 cron 运行您的 Rake 任务，您可以定义 MAILTO 变量（请参阅`man 5 crontab`详细信息）。这应该将标准输出和标准错误从您的 cron 作业发送到 MAILTO 定义的地址。

另一个常见问题是 cron 并不总是设置与普通 shell 相同的环境，因此您应该在 crontab 中设置适当的环境（这将是特定于实现的，并且可能无法实现和/或可移植）或只需创建一个包含运行任务所需的所有必要环境变量的 shell 脚本。

您的 crontab 应如下所示：

```
MAILTO=user@example.com

# This should work if your crontab environment knows about Ruby and Rake.
PATH=/path/to/ruby:$PATH
GEM_PATH=/path/to/gems
0 0 * * * cd /path/to/project; rake foo

# Otherwise, just create a shell script with a sane environment for running
# rake tasks, and call your rake tasks from the script.
1 0 * * * /path/to/your/script.sh 
```

# iphone - MPMoviePlayerController 覆盖所有其他视图

> ID：10291613
> 
> 赞同：1
> 
> 时间：2012-04-24T04:07:14.243
> 
> 标签：iphone, xcode, mpmovieplayercontroller, avcapturesession

我正在尝试全屏播放电影，其中 AVCaptureSession 在角落的较小视图中显示前置摄像头（想想 FaceTime）。如果我注释掉播放视频的代码，FrontCamera 会完美地显示在我放置包含它的 UIView 的角落。如果我让代码按原样运行，则只显示视频，覆盖包含 AVCapture 的 subLayer 的 UIView。另一个子问题是电影的控件和时间线栏显示，我想知道是否有办法在 MPMoviePlayerController 中禁用它。这是我正在使用的代码：

```
AVCaptureSession *session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPresetMedium;

CALayer *viewLayer = self.vImagePreview.layer;
NSLog(@"viewLayer = %@", viewLayer);

AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
captureVideoPreviewLayer.frame = self.vImagePreview.bounds;
[self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];

AVCaptureDevice *device = [self frontFacingCameraIfAvailable];

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}
[session addInput:input];

[session startRunning];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];
NSString *proud = [[documentsDirectoryPath stringByAppendingPathComponent:@"proud"] stringByAppendingPathComponent:selectedCountry];

NSURL  *movieURL = [[NSURL fileURLWithPath:proud] retain];
self.player =

[[MPMoviePlayerController alloc] initWithContentURL: movieURL];

[player prepareToPlay];

player.allowsAirPlay = NO;
player.scalingMode = MPMovieScalingModeFill;    
self.player.view.frame = self.view.frame;

[self.view addSubview: player.view];
[self.player setFullscreen:YES animated:YES];

// ...

[[NSNotificationCenter defaultCenter] 
 addObserver:self
 selector:@selector(movieFinishedCallback:)
 name:MPMoviePlayerPlaybackDidFinishNotification
 object:player];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(exitedFullscreen:) name:MPMoviePlayerDidExitFullscreenNotification object:player];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayerWillExitFullscreen:)
                                             name:MPMoviePlayerWillExitFullscreenNotification
                                           object:player];

[player play]; 
```

vImagePreview 是在标头中声明的 IBOutlet UIView 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:19:55.703

默认情况下，视图将显示最后添加的视图。所以当代码添加电影播放器​​视图时：

```
[self.view addSubview:player.view]; 
```

它位于其他所有内容之上，并且具有父级边界的完整大小的框架。如果您想保留某些子视图，则可以在添加电影播放器​​后将其放回顶部...

```
[self.view bringSubviewToFront:otherSubview]; 
```

..或将电影播放器​​放在它下面开始...

```
[self.view insertSubview:player.view belowSubview:otherSubview]; 
```

还有[很多其他方法可](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)用于控制视图层次结构。希望有帮助。

# javascript - 如何为每 5 个元素创建一个 DIV？

> ID：10291615
> 
> 赞同：0
> 
> 时间：2012-04-24T04:07:29.053
> 
> 标签：javascript, html

我想为每 5 个元素制作一个，我有一个 div。你可以在这里看到一个例子：[http ://www.nobregamedia.com/aa/](http://www.nobregamedia.com/aa/)

在底部，我有一个包含 5 个元素的画廊，可通过橙色小方块进行更改。每个橙色方块都有一个指向 DIV 名称的“链接”，例如：DIV1、DIV2、DIV3。考虑到我从 MySQL 数据库中提取的项目数量，我需要自动创建它。

例如：如果我拉出 7 个项目，它会创建 2 个正方形和 2 个 div：DIV1 和 DIV2。以此类推，以 5 的倍数计算。

这是我现在拥有的代码：

```
<div class="idTabs">
  <div class="col2">
    <a href="#pduno"><img class="pdimg" src="img/pduno.png" width="13" height="11" /></a>
    <a href="#pddos"><img class="pdimg" src="img/pddos.png" width="13" height="11" /></a>
    <a href="#pdtres"><img class="pdimg" src="img/pddos.png" width="13" height="11" /></a>
  </div>
</div>
<div class="row-end">&nbsp;</div>
<div class="row">
  <div class="col101">
    <div id="pduno">
      <table width="920" border="0" align="left" cellpadding="0" cellspacing="0" style="text-align:left">
        <tr>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <?PHP
                            while ($retdetsfinal = mysql_fetch_row($retdest)) {
                        ?>
            <td height="110">
              <div style="width:160px; height:112px; border:2px solid #c0bdb6">
                <img src="imagenes/thumbs/<?php echo $retdetsfinal[0];?>_x.jpg" style="border:6px solid #FFF;" width="148" height="100" />
              </div>
              <br />
              <?php echo ucfirst($retdetsfinal[1]);?> -
              <?php echo ucfirst($retdetsfinal[2]);?><br />Bs.
              <?php echo $retdetsfinal[3];?>
            </td>
            <td>&nbsp;</td>
            <?PHP   
                        }
                        ?>
        </tr>
      </table>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:43:39.753

看看这个[小提琴](http://jsfiddle.net/vhUW3/)。尽管它可能不完全符合您的需求，当然也没有可用的样式，但它应该为您提供正确的提示以开始

# asp.net - 使用 ASP.NET 创建精灵图像

> ID：10291618
> 
> 赞同：7
> 
> 时间：2012-04-24T04:07:41.760
> 
> 标签：asp.net, asp.net-mvc, css-sprites, imageresizer

我有一个主要的性能问题。问题出在我的一个网站上，有一个滑块可以调用大约 180 张图像。这 180 张图片中的每一张都是由客户端浏览器通过单独的 url 下载的。它们是 gif 和 jpg 的混合体，我想将它们组合成一个图像；最好是 jpg，因为透明度不是问题。图像存储在 SQL 数据库中，并通过 MVC 控制器显示。我想这个精灵也可以通过 MVC 控制器创建，而不是更传统的通用 ashx 处理程序。

我做了一些谷歌搜索，发现了[Scott Hanselman 的一篇博文](http://www.hanselman.com/blog/CompositingTwoImagesIntoOneFromTheASPNETServerSide.aspx)。该帖子解释了如何组合检查图像并通常做我想做的事情。它是在 2005 年写的，所以我很好奇是否有更好的方法。我一直在另一个项目上使用 ImageResizer。我听了[Hanselman 先生的播客，](http://www.hanselminutes.com/313/deep-inside-image-resizing-and-scaling-with-aspnet-and-iis-with-imageresizingnet-author-na)该播客与该项目的创始人谈论使用 IIS 和 .NET 调整图像大小。我从那个播客和我的经验中收集到，.NET 和 IIS 中的图像处理可能会变得很奇怪。

以这种方式调整图像大小并将图像合并到精灵中仍然是一个好主意吗？我不想要精灵生成器，我想要一种有效的方法将 .gif 和 jpg 组合成一个可以用作精灵的图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T18:34:10.020

我不建议将所有内容组合成一个*图像*，因为您将延迟任何图像的“初始外观”，直到整个文件下载。最好让可见的东西尽快加载并优化其余部分以提高整体吞吐量。

例如，如果图像每个小于 50KB，将它们组合为精灵图像可能是有意义的，但我建议一次组合 10 个。如果图像很小，比如每个 5KB，一次 30 个是合理的。

您需要担心一系列瓶颈

1.  HTTP 开销和并发连接限制（精灵图像对此有帮助）
2.  服务器吞吐量开销（可通过正确的磁盘缓存和边缘缓存解决）
3.  浏览器渲染开销（精灵最适合图标和小缩略图；它们不应该很大，尽量保持在 1 兆像素以下）。

将现有图像连接在一起并以 jpeg 形式重新压缩有时可以提高压缩率，有时会引入伪影。例如，混合线条艺术和照片是一个坏主意。Jpeg**不**擅长线条艺术。如果需要，可以使用 PNG，甚至是 PNG-8。有时您会发现 100% 质量的 JPEG 最终小于 GIF 或 PNG 版本，但大多数时候，线条艺术最好以 PNG 格式存储。

如果您有这些照片的 ID，并计划使用磁盘缓存进行动态路由，它确实可以显着简化您的任务。

[ImageResizer](http://imageresizing.net)库可让您轻松“插入”其动态管道和磁盘缓存系统。

在这种情况下，您将[实现`IVirtualImageProvider`](http://imageresizing.net/docs/plugins/virtualimageprovider)and `IVirtualBitmapFile`。有关生成位图并让管道处理其余部分的简单示例，请参阅[渐变插件](http://imageresizing.net/plugins/gradient)。

您必须定义您的 url 语法并在 FileExists 和 GetFile 方法中查找它。/combine-images.ashx?idlist=34,56,79,23&dir=horizo​​ntal&width=50&height=50 之类的东西。

然后，您必须加载每个图像，使用[托管 API](http://imageresizing.net/docs/managed)将其大小调整为位图实例，然后将其绘制在您分配的画布上。

您的大部分瓶颈可能在于从 SQL 中提取图像。如果服务器上的 RAM 有限，串行方法可能比并行方法更安全（即，一次从 SQL 获取一个图像，调整大小并绘制它，处理数据，然后继续）。如果您的源图像开始时很小，则多线程方法可能没问题。请记住，即使它被磁盘缓存，您也需要使其快速，因为请求默认在 30 秒后超时。正确完成后，您应该能够在 2 秒内使用空磁盘缓存提供 10 个图像精灵，缓存后为 20 毫秒。

如果这看起来有点压倒性，我确实提供[自定义插件开发](http://imageresizing.net/plugins/custom)，但有一个队列。

每个请求 1 个文件的方法有很多优点，在加入 Sprite 潮流之前，可能值得尝试 ImageResizer 的磁盘缓存和 SqlReader 插件。并不是说这是错误的方法，但未缓存的 MVC+SQL 可能会增加很多开销。

# python - 使用while循环在python中计算平均值

> ID：10291619
> 
> 赞同：-1
> 
> 时间：2012-04-24T04:07:52.337
> 
> 标签：python, while-loop, average

好吧，我很难在 python 中创建一个使用 while 循环来计算平均值的函数。使用 for 循环很简单，但我不知道如何使用 while 循环重新创建此函数。

```
def average(list):
    total = 0.0
    for number in list:
        total = total + number
    return total / len(list) 
```

谁能帮我看看如何为这个函数使用一个while循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:14:07.247

提示：

*   例如，您可以使用索引从列表中获取值`s[i]`。
*   while 循环需要测试以查看您何时到达列表的末尾。
*   *您可以使用len()*判断您何时位于列表的末尾

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:13:50.230

我会给你一个有用的提示。在 python 列表中，您可以使用方括号访问列表中的元素，如下所示`list[3]`：这将返回列表中的**第 4 个**元素。第一个元素位于索引 0 ( `list[0]`) 处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T04:15:01.543

```
i = 0
total = 0.0
while(i < len(list))
    total = total + list[i]
    i = i+1
return total/len(list) 
```

但是，为什么您首先要使用`for`and`while`来完成这项任务？使用函数式方法更容易，例如

```
return reduce(lambda x, y: x+y, list) / len(list) 
```

要不就

```
return sum(list) / len(list) 
```*

# android - Android SIP API - 如何接听来电

> ID：10291627
> 
> 赞同：4
> 
> 时间：2012-04-24T04:08:22.903
> 
> 标签：android

使用 SIP API 时，如何接听我收到的电话。我使用 sipdemo 中的incomingcallreceiver 类进行测试，并在WalkieTalkieActivity 类中添加了一个接听按钮，当有来电时应该启用该按钮，但我不知道如何接听来电。任何帮助或示例将不胜感激。

更具体地说，这是 IncomingCallReceiver 类的示例代码：

```
public class IncomingCallReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
SipAudioCall incomingCall = null;
try {
SipAudioCall.Listener listener = new SipAudioCall.Listener() {
@Override
public void onRinging(SipAudioCall call, SipProfile caller) {
try {
call.answerCall(30);
}
catch (Exception e) {
e.printStackTrace();
}}};
WalkieTalkieActivity wtActivity = (WalkieTalkieActivity) context;
incomingCall = wtActivity.manager.takeAudioCall(intent, listener);
incomingCall.answerCall(30);
incomingCall.startAudio();
incomingCall.setSpeakerMode(true);
if(incomingCall.isMuted()) {
incomingCall.toggleMute();
}
wtActivity.call = incomingCall;
wtActivity.updateStatus(incomingCall);
}
catch (Exception e) {
if (incomingCall != null) {
incomingCall.close();
}}}} 
```

WalkieTalkieActivity 类使用以下内容来接收呼叫： 在 onCreate 内

```
IntentFilter filter = new IntentFilter();
filter.addAction("android.SipDemo.INCOMING_CALL");
callReceiver = new IncomingCallReceiver();
this.registerReceiver(callReceiver, filter); 
```

以及创建配置文件的位置

```
Intent i = new Intent();
i.setAction("android.SipDemo.INCOMING_CALL");
PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, Intent.FILL_IN_DATA);
manager.open(me, pi, null); 
```

根据开发者 SIP[指南](http://developer.android.com/guide/topics/network/sip.html)：

当 SIP 服务接收到一个新呼叫时，它会使用应用程序提供的操作字符串发送一个意图。在 SipDemo 中，此操作字符串为 android.SipDemo.INCOMING_CALL。

这段来自 SipDemo 的代码摘录显示了 SipProfile 对象是如何根据操作字符串 android.SipDemo.INCOMING_CALL 以待定意图创建的。当 SipProfile 接收到调用时，PendingIntent 对象将执行广播：（这指的是上面创建配置文件的代码）然后指南继续说：广播将被意图过滤器拦截，然后触发接收器 (IncomingCallReceiver)。您可以在应用程序的清单文件中指定一个意图过滤器，或者在代码中执行此操作，如 SipDemo 示例应用程序的应用程序 Activity 的 onCreate() 方法：

我希望向启用 onRinging 的 WalkieTalkieActivity 类添加一个拾音按钮，并在单击时接听来电。

我已经成功处理了所有其他通用呼叫问题，例如保持、静音、扬声器、拨打电话和结束通话，但我无法弄清楚这一点。

编辑 - 这可以工作吗？：

```
public class IncomingCallReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
SipAudioCall incomingCall = null;
try {
SipAudioCall.Listener listener = new SipAudioCall.Listener() {
@Override
public void onRinging(SipAudioCall call, SipProfile caller) {
try {
call.answerCall(30);
}
catch (Exception e) {
e.printStackTrace();
}}};
WalkieTalkieActivity wtActivity = (WalkieTalkieActivity) context;
wtActivity.inbound = incomingCall;
wtActivity.updateStatus(incomingCall);
}
catch (Exception e) {
if (incomingCall != null) {
incomingCall.close();
}}}} 
```

然后在 walkietalkieactivity 类中设置一个新的 SipAudioCall 和一个用于 onRinging 的侦听器，其中包含 onclicklistener，然后进行正常的呼叫处理，例如：

```
inbound.answerCall(30);
inbound.startAudio();
inbound.setSpeakerMode(true);
if(inbound.isMuted()) {
inbound.toggleMute();
} 
```

——谢谢丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:15:04.327

经过几次不同的尝试后，我得以完成这项工作。我无法处理传入呼叫活动之外的任何呼叫对象。我必须从主 ui 类中的按钮调用来电活动中的方法。引用 IncomingCallReceiver.incomingCall.answercall 会将状态更改为正在接听，但不会失败，也不会实际接听，即使未建立呼叫，startaudio 也会发送 RTP。我尝试将其移动到 oncallbuilted 的侦听器中，但它没有发生，所以没关系。我对此还是很陌生，所以如果我的术语不正确，我深表歉意。

谢谢，丹尼尔

# c# - MonoTouch 的 QR 库？

> ID：10291630
> 
> 赞同：5
> 
> 时间：2012-04-24T04:08:55.987
> 
> 标签：c#, .net, ios, xamarin.ios, qr-code

我正在尝试在 MonoTouch 项目中读取并生成 QR 码（在应用程序中本地）。

是否有任何开源或商业库可以读取和生成 C#/MonoTouch 的 QR 码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T13:54:03.860

阅读二维码有几个选项

[ZXING.Net.Mobile](https://github.com/Redth/ZXing.Net.Mobile) [zxing库](http://code.google.com/p/zxing/)的MT端口

[RedLaser MonoTouch Binding](https://github.com/mono/monotouch-bindings/tree/master/RedLaser)是[RedLaser SDK](http://redlaser.com/developers/)的 MT 绑定，它是一个付费 SDK

这是一个使用 zxing.MonoTouch 和 MT.D 的示例应用[程序](https://github.com/GoranHalvarsson/BarcodeReader-MonoTouch)

所有这些都用于*读取*QR 码，我不知道在 MT 中生成 QR 码，但[这里](https://stackoverflow.com/questions/6106831/iphone-local-qr-code-generator)有一个 StackOverflow 问题，它指向您可以与 MT 绑定的几个 Objc 库

# javascript - jQuery 滚动幻灯片

> ID：10291644
> 
> 赞同：1
> 
> 时间：2012-04-24T04:12:19.577
> 
> 标签：javascript, jquery

我目前正在从头开始创建滚动幻灯片，但遇到了问题。

当我多次按下下一个按钮时，幻灯片开始一起运行，我怎样才能确保下一张幻灯片等到当前幻灯片停止后再开始下一张。

```
 var scrollAmount=910
    var image0Left=-scrollAmount;
    var image1Left=0;
    var image2Left=scrollAmount;
    var scrollSpeed0=2000;
    var scrollSpeed1=2000;
    var scrollSpeed2=2000;
    $(document).ready(function() {
        $("#left-arrow").click(showPreviousSlide);
        $("#right-arrow").click(showNextSlide);
    });

    function showPreviousSlide(){
        image0Left+=scrollAmount;
        if(image0Left > scrollAmount){
            image0Left=-scrollAmount;
            scrollSpeed0=0;
        }

        image1Left+=scrollAmount;
        if(image1Left > scrollAmount){
            image1Left=-scrollAmount;
            scrollSpeed1=0;
        }

        image2Left+=scrollAmount;
        if(image2Left > scrollAmount){
            image2Left=-scrollAmount;
            scrollSpeed2=0;
        }

        $("#slide0").animate({left: image0Left}, scrollSpeed0);
        scrollSpeed0=2000;
        $("#slide1").animate({left: image1Left}, scrollSpeed1);
        scrollSpeed1=2000;
        $("#slide2").animate({left: image2Left}, scrollSpeed2);
        scrollSpeed2=2000;
    }

    function showNextSlide() {
        image0Left-=scrollAmount;
        if(image0Left < -scrollAmount){
            image0Left=scrollAmount;
            scrollSpeed0=0;
        }

        image1Left-=scrollAmount;
        if(image1Left < -scrollAmount){
            image1Left=scrollAmount;
            scrollSpeed1=0;
        }

        image2Left-=scrollAmount;
        if(image2Left < -scrollAmount){
            image2Left=scrollAmount;
            scrollSpeed2=0;
        }

        $("#slide0").animate({left: image0Left}, scrollSpeed0);
        scrollSpeed0=2000;
        $("#slide1").animate({left: image1Left}, scrollSpeed1);
        scrollSpeed1=2000;
        $("#slide2").animate({left: image2Left}, scrollSpeed2);
        scrollSpeed2=2000;
    } 
```

这就是所有的控制脚本代码。这是指向实际站点的链接。[地点](http://sites.deyone.com/northeastchurch12/test)

每次调用 showPreviousSlide 或 showNextSlide 时都会移动三个图像幻灯片。如何确保 showPreviousSlide/showNextSlide 函数的一次迭代在再次调用之前完成移动我的幻灯片？我删除了我的幻灯片 div overfill:hidden，以便更容易看到我的幻灯片上发生了什么。

感谢您的帮助。

摩根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:38:37.457

您可以`.animate()`像这样传递完成回调：

```
animationCompleted = false;
$("#slide0").animate({left: image0Left}, scrollSpeed0, function() {
    animationCompleted = true;
}); 
```

然后检查`animationCompleted`函数中的值：

```
function showPreviousSlide(){
    if (!animationCompleted) return;
    // ...
} 
```

并查看[文档](http://api.jquery.com/animate/)以获取更多信息和示例。

# python - python 有没有像 $! 这样的错误报告消息？在 perl 中

> ID：10291648
> 
> 赞同：5
> 
> 时间：2012-04-24T04:13:42.680
> 
> 标签：python, perl

我想知道 python 的错误报告消息是否等于 $! 在 perl 中？任何能给我答案的人将不胜感激。

添加：

```
example% ./test
File "./test", line 7
  test1 = test.Test(dir)
  ^
SyntaxError: invalid syntax 
```

当发生异常时，我得到了类似的东西。如果我应用 try and catch 块，我可以捕获它并使用 sys.exit( **message** ) 来记录消息。但是，我有没有机会得到字符串**SyntaxError: invalid syntax**并将其放入**消息中**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T04:23:16.297

Python 通常使用异常来报告错误。如果某些操作系统操作返回错误代码，它会引发您在 try-except 块中捕获的异常。对于操作系统操作，即 OSError。errno 包含在异常实例中。

```
from __future__ import print_function
import os

try:
        os.stat("xxx")
except OSError as err:
        print (err)
        # The "err" object is on instance of OSError. It supports indexing, with the first element as the errno value.
        print(err[0]) 
```

输出：

```
[Errno 2] No such file or directory: 'xxx'
2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T04:23:33.943

据我所知，没有直接的等价物。

Python 倾向于改为抛出异常，这使您可以在之后以类似的方式访问错误消息，尽管是通过异常对象而不是特殊变量。

# matlab - 使用命令行在 MATLAB 中设置绘图的背景颜色？

> ID：10291651
> 
> 赞同：11
> 
> 时间：2012-04-24T04:14:08.140
> 
> 标签：matlab, colors, plot

我正在为我的编程课做作业，我需要创建一个绘图，以及仅使用 MATLAB 中的命令行最适合几个数据点的线。我知道如何使用图形编辑器设置背景，但我一生都无法弄清楚如何通过命令行进行设置。我需要将其设置为黄色。我该怎么做？我想我只是缺少一些简单的东西。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-24T06:56:09.080

要更改轴的背景颜色：

```
 set(gca, 'color', [1 1 0]) 
```

要更改图形的背景颜色：

```
 set(gcf, 'color', [1 1 0]) 
```

一般来说，如果你想知道一个情节的性质，试试

```
get(gca) % for axis properties  
get(gcf) % for figure properties 
```

这将返回可用属性名称和属性值的列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T07:07:28.757

@M.Huster 给出了您特定问题的解决方案。我将向您展示如何在这些情况下帮助自己。

只需制作您的情节并应用您想要的任何手动更改。然后，在图形窗口中选择“文件”菜单中的“生成代码”选项。这将生成一个 m 文件，该文件采用数据集并为该数据集重新创建图形。如果您查看该代码（通常非常易读），您将看到哪些命令负责某种效果。

正如@M.Huster 所说，您可以使用`get`来获取属性，使用更图形化的方式`inspect(gca)`，甚至更好的是[`uiinspect`](http://www.mathworks.com/matlabcentral/fileexchange/17935-uiinspect-display-methods-properties-callbacks-of-an-object)Yair Altman 编写的命令。

# xslt - XSL：当有多个标签名称相似的元素时，按属性值排序

> ID：10291653
> 
> 赞同：0
> 
> 时间：2012-04-24T04:14:19.450
> 
> 标签：xslt, sorting

这是 XML 文件的示例：

```
<Nodes version="1">
<Node name="root">
    <Node name="message 3">
        <Prp name="date" type="D" value="41019.2289042593"/>
        <Prp name="priority" type="I" value="300"/>
        <Prp name="child index" type="I" value="-1"/>
    </Node>
    <Node name="message 2">
        <Prp name="date" type="D" value="41019.2288970833"/>
        <Prp name="priority" type="I" value="300"/>
        <Prp name="child index" type="I" value="-1"/>
    </Node>
    <Node name="message 1">
        <Prp name="date" type="D" value="41019.2288965625"/>
        <Prp name="priority" type="I" value="300"/>
        <Prp name="child index" type="I" value="-1"/>
    </Node>
   </Node>
</Nodes> 
```

我必须根据日期对“messagex”节点进行排序（即 Prp name="date" type="D" value="41019.2288970833"/> 字段中的“value”属性）

我无法找到解决方案，因为标签具有相同的名称，属性也是如此。你能指导我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:25:32.353

```
<xsl:apply-templates select="/Nodes/Node[@name='root']/Node">
    <xsl:sort select="Prp[@name='date' and @type='D']/@value"/>
</xsl:apply-templates> 
```

# php - php move_uploaded_file()

> ID：10291655
> 
> 赞同：1
> 
> 时间：2012-04-24T04:14:48.367
> 
> 标签：php, file-upload, upload

所以我正在测试 w3schools 网站[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)上的 move_uploaded_file() php 脚本。这是我的代码。

```
if ($_FILES["file"]["size"] < 2000000)
{
    if ($_FILES["file"]["error"] > 0)
        echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    else
    {
        echo "Upload: " . $_FILES["file"]["name"] . "<br />";
        echo "Type: " . $_FILES["file"]["type"] . "<br />";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
        echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

        if (file_exists("/var/www/upload/" . $_FILES["file"]["name"]))
        {
          echo $_FILES["file"]["name"] . " already exists. ";
        }
        elseif(move_uploaded_file($_FILES["file"]["tmp_name"], "/var/www/upload/".$fileName))
            echo "Stored in: " . "/var/www/upload/".$fileName;
    }
}
else
    echo "Invalid file"; 
```

问题是一直`if(move_uploaded_file($_FILES["file"]["tmp_name"],"/var/www/upload/".$fileName))`返回 false 但似乎文件存储在`tmp`服务器上的文件夹中（例如：）`/tmp/php8rrKoW`。当我检查`tmp`文件夹时，文件不存在。（它应该在脚本完成执行后被删除。）我也没有看到该`/php8rrkoW`文件夹​​。我不确定它是否应该在那里。`tmp`我将文件夹和using的权限都设置了`/var/www/upload/`，但我不确定是否应该将所有者设置为. 所以我想知道为什么文件没有被复制到，以及是否有办法对此进行测试。`777``chmod``apache``/var/www/upload`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:55:09.540

这是我前几天为另一个问题做的一个基本的图像上传类，使用简单，也许你觉得它很有趣。

```
<?php 
error_reporting(E_ALL); //Will help you debug a [server/path/permission] issue
Class uploadHandler{
    public $upload_path;
    public $full_path;
    public $name;
    public $size;
    public $ext;
    public $output;
    public $input;
    public $prefix;
    private $allowed;

    function upload(){
        if($_SERVER['REQUEST_METHOD'] == 'POST'){
            if(isset($_FILES[$this->input]['error'])){
                if($_FILES[$this->input]['error'] == 0){
                    $this->name      = basename($_FILES[$this->input]['name']);
                    $file_p          = explode('.', $this->name);
                    $this->ext       = end($file_p);
                    $this->full_path = rtrim($this->upload_path,'/').'/'.preg_replace('/[^a-zA-Z0-9.-]/s', '_', $this->prefix.'_'.$file_p[0]).'.'.$this->ext;
                    $info            = getimagesize($_FILES[$this->input]['tmp_name']);
                    $this->size      = filesize($_FILES[$this->input]['tmp_name']);

                    if($info[0]>$this->allowed['dimensions']['width'] || $info[1] > $this->allowed['dimensions']['height']){
                        $this->output = 'File dimensions too large!';
                    }else{
                        if($info[0] > 0 && $info[1] > 0 && in_array($info['mime'],$this->allowed['types'])){
                            move_uploaded_file($_FILES[$this->input]['tmp_name'],$this->full_path);
                            $this->output = 'Upload success!';
                        }else{
                            $this->output = 'File not supported!';
                        }
                    }
                }else{
                    if($_FILES[$this->input]['error']==1){$this->output = 'The uploaded file exceeds the upload_max_filesize directive!';}
                    if($_FILES[$this->input]['error']==2){$this->output = 'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in our HTML form!';}
                    if($_FILES[$this->input]['error']==3){$this->output = 'The uploaded file was only partially uploaded!';}
                    if($_FILES[$this->input]['error']==4){$this->output = 'No file was uploaded!';}
                    if($_FILES[$this->input]['error']==6){$this->output = 'Missing a temporary folder!';}
                    if($_FILES[$this->input]['error']==7){$this->output = 'Failed to write uploaded file to disk!';}
                    if($_FILES[$this->input]['error']==8){$this->output = 'A PHP extension stopped the file upload!';}
                }
            }
        }
    }

    function setPath($var){
        $this->upload_path = $var;
    }
    function setAllowed($var=array()){
        $this->allowed = $var;
    }
    function setFilePrefix($var){
        $this->prefix = preg_replace('/[^a-zA-Z0-9.-]/s', '_', $var);
    }
    function setInput($var){
        $this->input = $var;
    }

}

//Start class
$upload = new uploadHandler();
//Set path
$upload->setPath('./');
//Prefix the file name
$upload->setFilePrefix('user_uploads');
//Allowed types
$upload->setAllowed(array('dimensions'=>array('width'=>200,'height'=>200),
                          'types'=>array('image/png','image/jpg','image/gif')));
//form property name                   
$upload->setInput('myfile');
//Do upload
$upload->upload();

//notice
if(isset($upload->output)){
    echo $upload->output;
}
?>

<form action="" method="POST" enctype="multipart/form-data">
     <!--1 MB = 1048576 bytes-->
     <input type="hidden" name="MAX_FILE_SIZE" value="1048000" />

     <p>Upload your image:<input type="file" name="myfile"><input type="submit" value="Upload"></p>

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:31:50.367

您要将文件移动到的目标目录应该可由网络服务器用户写入。也不要忘记一些网络服务器在 changeroot 内运行，因此可能不需要部分目标路径。PHP 帮助文档还说您应该检查 HTLM 表单以确保它是 enctype='multipart/form-data'。

最后： $filename 在哪里定义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T04:36:49.203

看来您应该使用 ./upload/ 而不是 /var/www/upload/ 因为您已经在可访问网站的主目录中。

您也可以参考[http://www.tizag.com/phpT/fileupload.php](http://www.tizag.com/phpT/fileupload.php) 或 API： http: [//php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)

让我知道这是否有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-26T19:22:56.450

您的路径必须包含“/home/usr-name”

尝试将 '/home/your-username' 添加到 '/var/www/upload' 的开头。

要了解一下，请将 info.php 添加到您的根目录中，在浏览器中打开它并查看“加载的配置文件”。

# java - 在 windows cmd CLI 上运行 java 文件。: 错误: 找不到符号

> ID：10291658
> 
> 赞同：-1
> 
> 时间：2012-04-24T04:15:29.900
> 
> 标签：java, command-line

我的电脑正在运行 Windows 7。我在位置 C:\Users\L33604\Desktop\Java Files 的 SAME 文件夹中有三个 java 文件。一个名为 DataLogger.java 的 java 文件调用另外两个类，就像创建 2 个 java 对象一样。其他 2 个类位于 CustomWiresharkLogFormatter.java 和 TextFileReader.java 中。

我通过 Windows 命令行界面输入 javac CustomWiresharkLogFormatter.java 和 javac TextFileReader.java 设法编译了 CustomWiresharkLogFormatter.java 和 TextFileReader.java，并且在同一个文件夹中创建了 2 个类的类文件。但是，我无法成功编译 DataLogger.java。当我尝试在 win cmd cli 上输入 javac DataLogger.java 时看到此错误。我可以使用 eclipse ide 运行这 3 个文件。

在 windows 命令行界面中看到的错误：

DataLogger.java :18 错误：找不到符号。

//这是DataLogger.java中的一行 String [] unLoggedTextLineArr = new TextFileReader().readTsharkTxtFile();

符号类：TextFileReader

位置类：DataLogger

//这是DataLogger.java中的一行 DataLogger.java :28 error: cannot find symbol。

String [] unLoggedTextLineArr = fileHandler.setFormatter(new CustomWiresharkLogFormatter());

符号类：CustomWiresharkLogFormatter

位置类：DataLogger

符号：类 CustomWiresharkLogFormatter

类 TextFileReader

2 个错误。

如何确保我可以运行 DataLogger java 文件，该文件使用 windows 命令行界面命令从其他 2 个 java 文件创建 2 个 java 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:23:56.323

将您的类路径设置为类文件所在的路径。

# mysql - 为什么更改为另一个主键索引会降低此查询的性能？

> ID：10291663
> 
> 赞同：0
> 
> 时间：2012-04-24T04:16:16.763
> 
> 标签：mysql

我有这个查询，它工作正常。

```
SELECT SUM(amount) FROM company.invoice_line WHERE item_id != shipping 
    AND item_id != '' 
    AND invoice_id IN 
        (SELECT id_invoices FROM company.invoices WHERE customer = 'XX' 
            AND sales_rep = 'XXX'); 
```

目的是总结**代表从****客户**那里获得的所有销售额。**客户**和**代表**数据相关并存储在表`invoice`中，`invoice line`表与表相关`invoice`。

对于我正在使用的数据大小，查询大约需要 0.015 秒

`id_invoices`我在查询中用另一个 VARCHAR PK更改了查询，但没有标记为唯一或不是。

原因是之前，我有一个糟糕的设计，其中 an`invoice`将被插入到数据库中，然后会立即执行一个查询，要求将`invoice`的自动递增 PK 用作外键。

为了有效地使用 BULK INSERT，我需要访问几乎所有数据的唯一标识符，而不依赖于自动递增的“普通”INT PK。我按照上面所说的那样完成了这一点，并添加了额外的列作为外键等。

我的插入速度现在很棒，但**现在查询需要 7+ seconds**。

重申一下，在此之前，我使用 vanilla auto-increment int 作为 PK。将外键切换为 VARCHAR 真的会破坏性能吗？

我的下一步似乎是恢复到 int id，但不是允许 MySQL 在插入时自动递增，而是手动创建这些 int 索引，以便我仍然可以使用批量插入。从查询的角度来看，这应该没关系......应该吗？

任何帮助，将不胜感激。

丹麦人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:25:10.037

好的，首先您需要使用 EXPLAIN 来确定查询计划中发生了什么，以查看其他可能发生的变化。

其次，VARCHAR 列的匹配速度比 INT 列慢，尽管通常它只是不断增加（例如，它是 k*O(n) vs O(n)，其中 k 与 n 无关）。....除非两个表上的字符集不同。然后它就变成了一个大问题，因为 MySQL 试图匹配两个不同的字符集。谁知道为什么，它只是慢mmkay。

第三，你的插入真的慢到需要这种大规模的重新设计吗？从您的问题中不清楚您在做什么，但是很难看出随机插入的性能如何对您的工作量造成如此大的影响，以至于您需要制作一个非常非标准的表结构，这使得其他一切工作变得更加困难和缓慢周围？

最后，关于批量插入的最后一个问题 - 如果您预先创建行，插入将不起作用（除非您使用 ON DUPLICATE KEY 执行某些操作）。但我总是会尝试在这类事情上坚持使用 int ID，除非有很好的理由不这样做。

# jsp - Servlet 丢失 - 请求的资源 () 不可用

> ID：10291681
> 
> 赞同：1
> 
> 时间：2012-04-24T04:18:49.250
> 
> 标签：jsp, tomcat, servlets

我正在尝试在 Eclipse 中使用 tomcat 运行此代码

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<form action="serv">
<input type="submit">
</form>
</body>
</html> 
```

当我单击提交按钮时，出现以下错误消息

```
HTTP Status 404 - /Ajax/serv

type Status report

message /Ajax/serv

description The requested resource (/Ajax/serv) is not available. 
```

我在一个 JSP 项目上工作没有任何问题，直到我删除了 JSP 和 Servers 项目并创建了新项目。从那时起，它就不起作用了。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:49:28.183

确保您的 servlet 类位于包内，并且`@WebServlet`注释的 URL 模式至少为`/serv`.

```
package com.example;

// ...

@WebServlet("/serv")
public class YourServletClassName extends HttpServlet {

    // ...

} 
```

URL 模式还`/serv/*`取决于您是否希望支持路径信息。

如果您的 servlet 类已经有一个，那么在 servlet 的构建或初始化过程中出现了一些问题。可以在 Eclipse 控制台中找到的服务器日志中应提供有关此的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T08:45:21.573

检查 WEB-INF 文件夹中是否存在 jsp 文件，如果存在，请将其移至网页内容下。这将解决您的问题

# iphone - 可编辑 div 的字符限制

> ID：10291682
> 
> 赞同：0
> 
> 时间：2012-04-24T04:18:52.653
> 
> 标签：iphone, ios, html, nsstring

我正在尝试在这个可编辑的 div 上添加字符限制。我应该遵循的最佳方法是什么？

```
NSString *html = [NSString stringWithFormat:@"<html><head><style>img{height:30px; width:auto;}</style></head><body style=\"background-color: transparent; padding:0; margin:0; background-image:url('%@'); background-repeat: no-repeat;\" ><div id=\"edit\" style=\"padding-top:50px; height:270px; padding-bottom:50px; padding-left:20px; padding-right:20px; \"> <div id=\"editable\" autofocus contenteditable=\"true\" style=\"font-size:25px; overflow:scroll; display:block; height:240px; \"></div></div></body></html>", imageURL]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:53:59.263

您可能可以将 java 脚本与 webview 一起使用，

```
[webView stringByEvaluatingJavaScriptFromString:@"your script"]; 
```

这是一篇有助于限制可编辑 div 中的字符数的[帖子。](https://stackoverflow.com/questions/2867479/limiting-number-of-characters-in-a-contenteditable-div)

# iphone - 无论iphone中图像中呈现的颜色如何，如何为图像着色？

> ID：10291683
> 
> 赞同：0
> 
> 时间：2012-04-24T04:18:56.280
> 
> 标签：iphone, colors, uiimage, touch, uibezierpath

我正在使用以下代码在触摸事件上为图像着色。我有子类 uiview 并使用以下代码来做到这一点。它正在工作，但图像不同部分的颜色不同。假设我用红色为图像着色并且有绿色，黄色或其他颜色出现在图像的不同部分。然后红色根据图像中已经存在的颜色具有不同的效果。而不是我希望在整个图像中填充相同的红色（或选择的任何颜色）。如何我做到了吗？

```
@synthesize selImage,isReset;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) 
    {
        arrBezierPaths = [[NSMutableArray alloc] init];
        globalPath = [[UIBezierPath alloc] init];
        myPath = [[UIBezierPath alloc] init];

        self.userInteractionEnabled = TRUE;

        myPath.lineWidth = 30;
        brushPattern = [UIColor redColor];

        NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:myPath, @"Path", brushPattern, @"Color", nil];
        [arrBezierPaths addObject:dict];
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    for (int i=0; i<[arrBezierPaths count]; i++)
    {
        NSDictionary *dict = [arrBezierPaths objectAtIndex:i];
        UIColor *tempBrushpatter = [[UIColor alloc] init];
        tempBrushpatter = [dict valueForKey:@"Color"];
        globalPath = [dict valueForKey:@"Path"];

        [globalPath strokeWithBlendMode:kCGBlendModeOverlay alpha:1.0];
        [tempBrushpatter setStroke];
    }
}

#pragma mark - Touch Methods

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *mytouch = [[touches allObjects] objectAtIndex:0];
    [globalPath moveToPoint:[mytouch locationInView:self]];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *mytouch = [[touches allObjects] objectAtIndex:0];
    CGPoint pointTouched = [mytouch locationInView:self];

    for (int i=0; i<[arrBezierPaths count]; i++)
    {
        UIBezierPath *tempErasePath = [[UIBezierPath alloc] init];
        NSDictionary *dictTemp = [arrBezierPaths objectAtIndex:0];
        UIBezierPath *temppath = [dictTemp valueForKey:@"Path"];
        if ([temppath containsPoint:pointTouched])
        {
            //[temppath removeAllPoints];
        }
    }

    [globalPath addLineToPoint:[mytouch locationInView:self]];

    [self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
}

-(void)changeColor:(UIColor *)color
{
    [arrRemovePaths removeAllObjects];
    UIBezierPath *temp = [[UIBezierPath alloc] init];

    temp.lineWidth = 30;
    UIColor *brushColor = color;
    NSLog(@"initWithFrame method called");
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:temp, @"Path", brushColor, @"Color", nil];
    [temp release];
    [arrBezierPaths addObject:dict];
    brushPattern = [color retain];
    [self setNeedsDisplay];
}

- (void)dealloc
{
    // [brushPattern release];
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:37:51.033

尝试`[globalPath strokeWithBlendMode:kCGBlendModeOverlay alpha:1.0];`用

```
[globalPath strokeWithBlendMode:kCGBlendModeCopy alpha:1.0];
            ; 
```

如果您想了解不同混合模式的工作原理，请看[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaDrawingGuide/GraphicsContexts/GraphicsContexts.html)（图 2-1）。

![混合模式](../Images/a03fe8eeed1fdf956f4daaada3983172.png)

# php - BasicAuth 并设置引用电子邮件地址的用户模型

> ID：10291684
> 
> 赞同：0
> 
> 时间：2012-04-24T04:19:02.380
> 
> 标签：php, atk4

我刚刚开始使用看起来非常漂亮的闪亮的新 ATK 4.2。但是，我在使用 BasicAuth 类时遇到了问题。我想使用 User 模型扩展 BasicAuth。但是，我的 User 模型不包含“电子邮件”字段，而是引用了包含电子邮件地址的 Person 模型。

DB表结构如下：

人表

*   id：主键
*   名称：字符
*   房间号：整数
*   电子邮件：char

用户表

*   id：主键
*   person_id：人表的外键（id）
*   密码：char

ATK4.2类如下：

## 人物模型

```
class Model_Person extends Model_Table {
public $entity_code='person';

function init(){
    parent::init();
    $this->addField('name');
    $this->addField('roomnumber');
    $this->addField('email');
}
} 
```

## 用户模型

# “用户”表包含密码字段。

```
class Model_User extends Model_Table {
public $entity_code='user';

function init(){
    parent::init();
    $this->hasOne('Person');
}
} 
```

## 用户认证类

```
class UserAuth extends BasicAuth {

function init() {
    parent::init();

    $this->setModel('Model_User', 'email', 'password');
    $this->getModel()->addField('password')->system(true);
    $this->usePasswordEncryption('sha256/salt');
}
} 
```

## 经理页面。

// 管理员管理 mySQL 数据库中的表。

```
class page_mgr extends Page {

function init() {
    parent::init();

    $tabs=$this->add('Tabs');

    $crud=$tabs->addTab('Users')->add('CRUD');
    $crud->setModel('User');

    if($crud->grid){

        // Add prompt using user model id field.
        $crud->grid->addColumn('prompt','set_password_prompt');

        if($_GET['set_password_prompt']){
            $auth = $this->add('UserAuth');
            // load User from DB using row ID.
            $model = $auth->getModel()->loadData($_GET['set_password_prompt']);

            $model->set('password', $_GET['value'])->debug()->update();
            $this->js()->univ()->successMessage('Changed password for '.$model->ref('person_id')->get('email'))
              ->execute();
        }
    }
}
} 
```

当我尝试在 CRUD 中设置用户密码时，按“确定”后出现以下错误。

#

```
Error in AJAXec response: SyntaxError: invalid XML attribute value 
```

基本异常

模型字段未加载

附加信息：

```
Raised by object: Object Model_User(testing_admin_mgr_userauth_model_user)
id: 1
field: email 
```

可能的行动：

```
Debug this Model 
```

/var/www/html/testing/atk4/lib/BaseException.php:38

```
Stack trace:
/var/www/html/testing/atk4/lib/BaseException.php    :38     BaseException BaseException->collectBasicData(Null, 1, 0)
/var/www/html/testing/atk4/lib/AbstractObject.php   :292    BaseException   BaseException->__construct("Model field was not loaded") / : (testing_admin_mgr_userauth_model_user Model_User->exception("Model field was not loaded")
/var/www/html/testing/atk4/lib/Model/Table.php  :87     Loggercall_user_func_array(Array(2), Array(1))
/var/www/html/testing/atk4/lib/Model.php    :115    testing_admin_mgr_userauth_model_user   Model_User->exception("Model field was not loaded")
/var/www/html/testing/atk4/lib/Model.php    :184    testing_admin_mgr_userauth_model_user   Model_User->get("email")
/var/www/html/testing/atk4/lib/Auth/Basic.php   :123    testing_admin_mgr_userauth_model_user   Model_User->offsetGet("email") /: Logger{closure}(Object(Model_User))
/var/www/html/testing/atk4/lib/AbstractObject.php   :427 (loggercall_user_func_array(Object(Closure), Array(1))
/var/www/html/testing/atk4/lib/Model/Table.php  :531    testing_admin_mgr_userauth_model_user   Model_User->hook("beforeSave")
/var/www/html/testing/atk4/lib/Model/Table.php  :612    testing_admin_mgr_userauth_model_user   Model_User->save()
/var/www/html/testing/admin/page/mgr.php    :26     testing_admin_mgr_userauth_model_user   Model_User->update()
/var/www/html/testing/atk4/lib/AbstractObject.php   :189    testing_admin_mgr   page_mgr->init()
/var/www/html/testing/atk4/lib/ApiFrontend.php  :92     testing_admin   Admin->add("page_mgr", "mgr", "Content")
/var/www/html/testing/atk4/lib/ApiWeb.php   :332    testing_admin   Admin->layout_Content()
/var/www/html/testing/atk4/lib/ApiFrontend.php  :33     testing_admin   Admin->addLayout("Content")
/var/www/html/testing/atk4/lib/ApiWeb.php   :208    testing_admin   Admin->initLayout()
/var/www/html/testing/admin/index.php   :7  testing_admin   Admin->main() 
```

是否可以告诉 BasicAuth 引用 Person 模型来获取电子邮件字段，或者我们可以在 User 模型中以某种方式为电子邮件地址设置别名？

干杯

# 更新 1

谢谢詹查，

为了让 CRUD 为用户显示与以前相同的字段并正确更新密码，我进行了以下更改。

## 人物模型

> > 和之前一样。

## 用户模型

# “用户”表包含密码字段。

```
class Model_User extends Model_Table {
public $entity_code='user';

function init(){
    parent::init();

    $person = $this->join("person", "person_id");
    $person->addField('email')->system(true);

    // hasOne() links the referenced table so CRUD can use 'id' and 'name' for drop down menus, etc.
    $this->hasOne('Person');
}
} 
```

## 用户认证类

> > 和之前一样。

## 经理页面。

// 管理员管理 mySQL 数据库中的表。

```
class page_mgr extends Page {

function init() {
    parent::init();

    $tabs=$this->add('Tabs');

    $crud=$tabs->addTab('Users')->add('CRUD');
    $crud->setModel('User');

    if($crud->grid){

        // Add prompt using user model id field.
        $crud->grid->addColumn('prompt','set_password_prompt');

        if($_GET['set_password_prompt']){
            $auth = $this->add('UserAuth');
            // load User from DB using row ID.
            $model = $auth->getModel()->loadData($_GET['set_password_prompt']);

            $model->set('password', $_GET['value'])->save();
            $this->js()->univ()->successMessage('Changed password for '.$model->get('email'))
              ->execute();
        }
    }
}
} 
```

以上更改效果很好，我可以成功更新用户的密码。

但是....因为用户和个人之间有一个 join() 。当我选择删除 User 条目时，Person 表中的相应人员也会被删除。来自 join() 文档：“查询将连接表、插入、更新和删除将应用于两个表”，因此会产生意想不到的副作用。

# 更新 2

好的，我想我已经通过将 join() 移动到身份验证类来解决它。这样 BasicAuth 类就可以访问“电子邮件”字段。而 CRUD 类看不到联接并删除用户模型中的联接条目。

## 用户模型

```
class Model_User extends Model_Table {
public $entity_code='user';

function init(){
    parent::init();

    $this->hasOne('Person');
}
} 
```

# 用户认证类

```
class UserAuth extends BasicAuth {

function init() {
    parent::init();

    $this->setModel('Model_User', 'email', 'password');
    $this->getModel()->addField('password')->system(true);

    $person = $this->getModel()->join("person", "person_id");
    $person->addField('email')->system(true);

    $this->usePasswordEncryption('sha256/salt');
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:32:47.403

1.  在你的用户模型中，你应该有以下 - 删除 hasOne ，而不是：

    $person = $this->join("Person.person_id", "id");
    **$person->addField("email");**

2.  使用`$model->load()`而不是`loadData();`

3.  使用`$model->save()`而不是`update();`

# jquery - IOS4清除缓存bug？！使用“添加到主屏幕”应用程序和本地存储

> ID：10291685
> 
> 赞同：0
> 
> 时间：2012-04-24T04:19:05.360
> 
> 标签：jquery, ios, html, jquery-mobile, local-storage

我们很快就会有一个应用程序上线，但我发现了一个看起来像 IOS4 错误的设置 --> Safari --> 清除缓存。

我们的应用程序被授权然后使用，在 Safari 中访问网站，授权，这将创建一个 localStorage 密钥，然后用户可以在应用程序模式下启动（从主屏幕）并获取 localStorage 密钥。

这在 IOS5 中运行良好，在 IOS4 中运行良好。直到！！！您删除缓存，然后 iPhone 不允许您的网站（基于我假设的 URL）创建任何未来的 localStorage 密钥。

每个主屏幕图标都有自己的本地存储键/值集，

IE

如果我从 myurl1.com 添加 localStorage 值，添加到主屏幕，清除缓存，加载，它会失败

然后，如果我从 myurl2.com 执行此操作（使用相同的键），我可以成功加载最新的主屏幕图标，但仍然不是最后一个。

无论如何，我的问题是，一旦用户清除了他们的缓存，他们似乎就无法再次从主屏幕启动应用程序，因为它永久不允许我们的网站创建更多的 localStorage 密钥..

我该怎么办？！？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:36:29.063

您是否尝试过调试，例如。与 Weinre（良好的在线版本：[http](http://debug.phonegap.com) ://debug.phonegap.com ）。我的意思是是否有任何错误抛出，很高兴在这里看到它们。

我们遇到了同样的问题，但它与隐私模式下的浏览有关，所以可能不是你的情况。

否则，我从未见过这种情况发生。无论缓存是否刷新，localStorage 一直运行良好。

# jtable - 如何使用 Java 检查 JTable 中的特定单元格是否更新？

> ID：10291687
> 
> 赞同：0
> 
> 时间：2012-04-24T04:19:36.113
> 
> 标签：jtable

我有一个 jtable，其中 15 行和 15 列。从数据库中，将值填充到表中。在保存回来时，需要更新到数据库中。每次，如果发生任何更改，用户需要通过单击更新按钮来更新值。所以现在，每当单击更新时，我都会更新 db 中的整个 vaue。但是有什么方法可以检查特定单元格是否已更新，我只需要更新该值而不是更新整个值。？请有人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:39:09.770

您需要将动作侦听器添加到行（[此处](http://forums.devx.com/archive/index.php/t-27297.html)有更多信息）。更新后，获取行的唯一 ID，将其添加到某个列表中。当您想更新到数据库时，只更新列表中的那些。希望有帮助。

# algorithm - 1000 个项目，1000 个节点，每个节点 3 个项目，最好的复制方案，以最大限度地减少节点故障时的数据丢失？

> ID：10291690
> 
> 赞同：10
> 
> 时间：2012-04-24T04:19:52.863
> 
> 标签：algorithm

我想知道Skiena*算法设计手册*（第 2 版）中[问题 2-44的正确答案是什么](http://www2.algorithm.cs.sunysb.edu:8080/mediawiki/index.php/Algo-analysis-TADM2E)

 *问题如下：

> 我们有 1,000 个数据项要存储在 1,000 个节点上。每个节点可以存储恰好三个不同项目的副本。提出一种复制方案，以最大程度地减少节点故障时的数据丢失。当三个随机节点发生故障时，预计丢失的数据条目数是多少？

我在考虑节点 n 具有来自 n、n+1 和 n+2 的数据项。

因此，如果丢失 3 个连续节点，那么我们会丢失 1 个项目。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:00:05.573

[您提出的方法还不错，但也可以在这里](http://en.wikipedia.org/wiki/RAID)看看。RAID中使用的想法可能会给您一些想法。例如，如果您有 2 个数据项，而不是存储 3 个数据项，如果另一个失败，您可以恢复其中任何一个。这个想法很简单 - 您将项目存储在 2 个节点中，并将它们的位异或存储在第三个项目中。我相信如果您利用这个想法，您将能够对单个数据项进行 3 个以上的备份（即，必须有 3 个以上的节点发生故障才能丢失信息）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-29T04:45:01.677

我想到了像 RAID 级别这样的方法，但 Skiena 说“每个节点可以存储恰好三个不同项目的副本”。尽管两个独立数据的 XOR'red 位模式可以存储在相同数量的空间中，但我不认为这是问题所在。

所以，我从 OP 的想法开始：将每个数据的三个副本以条带方式存储到其下两个邻居。例如，以下是当 N==6 并且数据是从 0 到 5 的整数时（4 和 5 环绕并使用节点 0 和 1）：

```
nodes:    0 1 2 3 4 5
          ===========
copy 0 -> 0 1 2 3 4 5 
copy 1 -> 5 0 1 2 3 4 
copy 2 -> 4 5 0 1 2 3 
```

在所有 20 种三节点故障组合中，有 6 种只丢失了一条数据。例如; 当节点 1、2 和 3 发生故障时，数据 1 会丢失：

```
===========
0 X X X 4 5 
5 X X X 3 4 
4 X X X 2 3 
```

彼此数据相似，使得 20 个组合中有 6 个丢失数据。由于 Skiena 没有描述“数据丢失”对应用程序意味着什么：单个数据点的丢失是否意味着整个集合都被浪费了，或者丢失单个数据点是可以接受的并且比丢失两个更好？

如果即使是单个数据点的丢失就意味着整个集合都被浪费了，那么我们可以做得更好。好三倍！:)

不是以条带方式将数据副本分发到右侧节点，而是定义共享数据的三个节点组。例如，让 0、1 和 2 共享他们的数据，让 3、4 和 5 共享他们的数据：

```
nodes:    0 1 2 3 4 5
          ===========
copy 0 -> 0 1 2 3 4 5
copy 1 -> 2 0 1 5 3 4
copy 2 -> 1 2 0 4 5 3 
```

这一次，20 种组合中只有 2 种会产生数据丢失。当节点 0、1 和 2 发生故障时，数据 0、1 和 2 一起丢失：

```
===========
x x x 3 4 5
x x x 5 3 4
x x x 4 5 3 
```

当节点 3、4 和 5 发生故障时，数据 3、4 和 5 会一起丢失：

```
===========
0 1 2 x x x
2 0 1 x x x
1 2 0 x x x 
```

这仅是 20 种三节点故障组合中的 2 种。当相同的节点共享相同的数据时，它有效地将数据丢失合并到更少的组合中。

阿里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T05:37:05.533

让，

```
 D = {1,...,d_i,...,d} denote the data items and d_i a given data element
 N = {1,...,n_k,...,n} denote the storage cluster and n_k a given storage node. 
 We say d_i is stored by n_k, loosely denoted by d_i \in n_k. 
```

我的复制模型有以下假设：

1- 在初始化期间，每个数据项必须至少存储在一个给定节点中。IE：

```
 Exist at least one 1 <= k <=n s.t. P(d_i \in n_k) = 1. 
```

2- 从 (1) 开始，在初始化时，d_i 在给定节点中的概率至少为 1/n。IE：

```
 For any data item 1 <= i <= d and a random node n, P(d_i \in n) >= 1/n. 
```

给定问题陈述，通过设计，我们希望这种分布在整个数据集中均匀分布。

3- 最后，根据设计，数据项 d_i 在给定节点 n 中的概率应该在数据项之间是独立的。IE：

```
 P(d_i \in n | d_j \in n) = P(d_i \in n) 
```

这是因为我们不假设节点故障的概率在相邻节点之间是独立的（例如：在数据中心中，相邻节点共享相同的网络交换机等）。

根据这些假设，我提出了以下复制模型（对于 d = n 且每个节点恰好存储 3 个不同数据项的问题实例）。

(1) 对数据集进行随机排列。(2) 使用长度为 3、步幅为 1 的滑动窗口，在打乱后的数据集上进行旋转，并将数据项映射到每个节点。

```
E.g.:
D = {A,B,C,D}
N = {1,2,3,4}

(1) {C, B, A, D}
(2) 1 -> {C, B, A}, 2 -> {B, A, D}, 3-> {A, D, C}, 4-> {D, C, B} 
```

随机洗牌将确保独立（3）和均匀分布（2）。而 stride 1 的滑动窗口保证 (1)。

让我们将给定节点 n_k 的滑动窗口表示为有序集 w_k = {w_k1, w_k2, w_k3}。n_k 被称为 w_k1（w_k 的第一个元素）的主节点。包含 w_k1 的任何其他节点 n_j 都是副本节点。注意：所提出的复制模型保证任何 d_i 都只有一个主节点，而复制节点的数量取决于窗口长度。

在上面的示例中：n_1 是 C 和 n_3 和 n_4 副本节点的主节点。

回到最初的问题，给定这个模式，我们可以说数据丢失的概率是主节点和给定数据项的所有副本的丢失。

P（d_i 丢失）= P（d_i 的主节点失败，副本 1 失败，副本 2 失败）。

如果没有正式的证明，上述步骤 (1) 中的无偏随机排列将导致

P（d_i 丢失）= P（d_i 的主节点失败）* P（副本 1 失败）* P（副本 2 失败）。

同样，随机排列是一种启发式方法，用于抽象节点故障的联合分布。

根据假设 (2) 和 (3)，P(d_i is lost) = c，对于任何 d_i，在初始化时。

这就是说 d = n = 1000 和复制因子 3（即：窗口长度等于 3）。

P(d_i 丢失) = 1/1000 * 1/999 * 1/998 ~ 10^-9

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T18:16:22.750

您的方法似乎基本正确，但可以从故障转移策略中受益。请注意，Skiena 教授要求“尽量减少节点故障时的数据丢失”，这表明节点故障将是一种常见的情况。

您可能想看看[一致的散列](http://en.wikipedia.org/wiki/Consistent_hashing)。

此外，reddit 工程师有一篇关于不使用一致散列（而不是使用固定 MOD 散列）的危险的[很棒的帖子。](http://www.redditblog.com/2010/03/and-fun-weekend-was-had-by-all.html)*

# javascript - 无法使用画布读取 null 的属性“getContext”

> ID：10291693
> 
> 赞同：63
> 
> 时间：2012-04-24T04:20:17.847
> 
> 标签：javascript, html, canvas

我收到错误`Uncaught TypeError: Cannot read property 'getContext' of null`，文件中的重要部分是......我想知道因为 game.js 在下面的目录中，它找不到画布？我应该怎么办？

./index.html:

```
<canvas id="canvas" width="640" height="480"></canvas> 
```

./javascript/game.js：

```
var Grid = function(width, height) {
        ...
        this.draw = function() {
        var canvas = document.getElementById("canvas");
        if(canvas.getContext) {
            var context = canvas.getContext("2d");
            for(var i = 0; i < width; i++) {
                for(var j = 0; j < height; j++) {
                    if(isLive(i, j)) {
                        context.fillStyle = "lightblue";
                    }
                    else {
                        context.fillStyle = "yellowgreen";
                    }
                    context.fillRect(i*15, j*15, 14, 14);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-04-24T04:37:42.317

我想问题是你的 js 在加载 html 之前运行。

如果您使用的是 jquery，则可以使用 document ready 函数来包装您的代码：

```
$(function() {
    var Grid = function(width, height) {
        // codes...
    }
}); 
```

或者干脆把你的 js 放在`<canvas>`.

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-11-15T20:30:53.970

把你的 JavaScript 代码放在你的标签之后`<canvas></canvas>`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-06-05T02:36:45.607

您不必包含 JQuery。

在 index.html 中：
`<canvas id="canvas" width="640" height="480"></canvas><script src="javascript/game.js">` 这应该在没有 JQuery 的情况下工作......

**编辑：您应该将脚本标签放在正文标签中......**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-21T12:36:21.707

以这种方式编写代码...

```
<canvas id="canvas" width="640" height="480"></canvas>
<script>
var Grid = function(width, height) {
    ...
    this.draw = function() {
    var canvas = document.getElementById("canvas");
    if(canvas.getContext) {
        var context = canvas.getContext("2d");
        for(var i = 0; i < width; i++) {
            for(var j = 0; j < height; j++) {
                if(isLive(i, j)) {
                    context.fillStyle = "lightblue";
                }
                else {
                    context.fillStyle = "yellowgreen";
                }
                context.fillRect(i*15, j*15, 14, 14);
                }
            }
        }
    }
 } 
```

先写画布标签，再写脚本标签。并在正文中写入脚本标签。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-09T15:49:34.550

您应该将 javascript 标记放在您的 html 文件中。因为浏览器会根据 html 流加载您的网页，所以您应该将您的 javascript 文件放在`<script src="javascript/game.js">` 元素`<canvas>`标记之后。否则，如果您将 javascript 放在 html.Browser 加载脚本的标题中，但它没有找到画布。所以你的画布不起作用。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-12-07T14:22:22.590

你只需要放在`<script src='./javascript/game.js'></script>`你的 <canvas> 之后。因为浏览器在画布之前没有找到你的 javascript 文件

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-06-07T15:06:17.497

我假设你在`<head>`标签内声明了你的 JS 文件，所以它保持一致，就像标准一样，然后在你的 JS 中确保画布初始化是*在*页面加载之后：

```
window.onload = function () {
    var myCanvas = document.getElementById('canvas');
    var ctx = myCanvas.getContext('2d');
} 
```

没有必要仅仅使用 jQuery 来初始化画布，很明显世界各地的大多数程序员都在不必要地使用它，而公认的答案就是对此的探索。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-20T01:02:42.450

这可能看起来有点矫枉过正，但如果在另一种情况下您试图从 js 加载画布（就像我正在做的那样），您可以使用 setInterval 函数和 if 语句来不断检查画布是否已加载。

```
//set up the interval
var thisInterval = setInterval(function{
  //this if statment checks if the id "thisCanvas" is linked to something
  if(document.getElementById("thisCanvas") != null){
    //do what you want

    //clearInterval() will remove the interval if you have given your interval a name.
    clearInterval(thisInterval)
  }
//the 500 means that you will loop through this every 500 milliseconds (1/2 a second)
},500) 
```

（在此示例中，我尝试加载的画布的 id 为“thisCanvas”）

# c++ - 在 C++ 中将字符串插入 AVL 树？

> ID：10291694
> 
> 赞同：0
> 
> 时间：2012-04-24T04:20:19.703
> 
> 标签：c++, binary-tree, avl-tree

我了解 AVL 树如何与整数一起工作。但我很难找到一种将字符串插入其中的方法。如何比较字符串？

我曾想过只使用 ASCII 总值并以这种方式排序。但在这种情况下，插入两个相同的 ASCII 词（例如“tied”和“diet”）似乎会返回错误。

你如何解决这个问题？我是否以错误的方式思考它，并且需要一种不同的方式来对节点进行排序？

不，它们不需要按字母顺序排列或任何东西......只需在 AVL 树中，这样我就可以快速搜索它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:41:47.313

处理字符串时，通常使用词法比较——即，从每个字符串的第一个字符开始。如果一个小于另一个（例如，“diet”与“tied”，“d”小于“t”），则比较基于该字母。当且仅当第一个字母相等时，您转到第二个字母，依此类推。仅当从字符串的开头到结尾的每个字符（按顺序）都相等时，两者才相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T04:25:18.803

好吧，由于 AVL 树是有序结构，因此该[`int string::compare(const string&) const`](http://www.cplusplus.com/reference/string/string/compare/)例程应该能够告诉您如何对字符串进行排序。

如果项目的顺序实际上无关紧要，那么您将从可以更好地利用您正在尝试做的事情的无序结构中获得更好的性能：[哈希表](http://en.wikipedia.org/wiki/Hash_table)。

将字符串等映射到固定大小的键称为[散列函数](http://en.wikipedia.org/wiki/Hash_function)，将多个键映射到同一个值的现象称为[冲突](http://en.wikipedia.org/wiki/Collision_%28computer_science%29)。预计在散列时偶尔会发生冲突，并且需要扩展基本数据结构来处理它，可能通过使每个节点成为所有项目的“桶”（链表，向量，数组，你有什么）碰撞哈希值，然后线性搜索。

# google-api - 我的 Google oAuth2 令牌看起来正确吗？

> ID：10291696
> 
> 赞同：7
> 
> 时间：2012-04-24T04:20:43.197
> 
> 标签：google-api, oauth-2.0

我正在编写一个 Web 服务器来支持 Google API 的 oAuth2，并且正在关注[这个文档](https://developers.google.com/accounts/docs/OAuth2WebServer)。在我尝试使用访问令牌制作 Google API 之前，一切似乎都运行良好。文档中的示例调用：

```
https://www.googleapis.com/oauth2/v1/userinfo?access_token=1/fFBGRNJru1FQd44AzqT3Zg 
```

当我用我的访问令牌尝试它时，我得到**401 invalid token**错误。

翻阅文献，所有示例都显示格式为**1/fFBGR......**的访问令牌。我的访问令牌的格式为**ya29.AHES67z.......**并且更长（请参阅下面包含来自 google 的响应的片段）。

```
oauth2 request:{
"access_token" : "ya29.AHES67zeEn-RDg9CA5gGKMLKuG4uVB7W4O4WjNr-NBfY6Dtad4vbIZ",
"token_type" : "Bearer",
"expires_in" : 3600
} 
```

所以看来我的令牌不正确。我必须对其进行编码/解码吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T13:40:14.480

我最近一直在玩 VBA 的 OAuth2.0。

```
Authorization Code Begins With: 4/Omoy    (30 Characters Long)  
Access_Token Begins With:       ya29.AHES (60 Characters Long)    
Refresh_Token Begins With:      1/Ry68    (45 Characters Long) 
```

我无需进行任何解码或编码即可使用这些值。这些是有效的功能价值。

# asp.net - 如何在 Oracle 中获取 BLOB 数据类型的二进制等效项

> ID：10291697
> 
> 赞同：0
> 
> 时间：2012-04-24T04:20:55.390
> 
> 标签：asp.net, oracle

我使用 C# 作为前端，使用 Oracle 作为数据库。我在表中有一个 BLOB 类型字段，用于包含图像。我真正需要做的是，每当表中的记录不包含任何图像时，我想在前端显示该特定记录的默认图片。为此，我可以在将其临时保存在数据库中之后获得该默认图像的二进制格式（不使用虚拟记录保存该图像），然后在查询中使用该二进制格式在图像不存在时显示默认图片任何记录。我现在得到的是：

```
 SELECT EMP_IMG FROM Employee_Master WHERE EMP_CODE = 1234
 ----------------------------------------------------------
 (BLOB) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:31:16.750

查看字节[]; 使用 Binary Serializer 获取对象的 byte[] 版本。看到这个：[C#对象二进制序列化](https://stackoverflow.com/questions/1749044/c-sharp-object-binary-serialization)

# java - Java中的连接重置

> ID：10291702
> 
> 赞同：0
> 
> 时间：2012-04-24T04:21:19.860
> 
> 标签：java, java.util.scanner, socketexception, printwriter

几天来，我一直在尝试修复此错误。真的。我只是不明白。代码很简单。为什么它不起作用？

```
 public class server
    {
public static void main(String[] args)
{
    String fileName = null;

    try
    {
        ServerSocket ss = new ServerSocket(9999, 3);

        Socket dataSocket = ss.accept();
        System.out.println("Server: Connection Established");

        InputStream is = dataSocket.getInputStream();
        //BufferedReader br = new BufferedReader(new InputStreamReader(is));
        Scanner sc = new Scanner(dataSocket.getInputStream());

        while(sc.hasNextByte())
        {
            System.out.println("True");
            fileName = fileName+sc.next();
        }

        FileWriter fw = new FileWriter("server"+fileName);
        while(dataSocket  != null)
        {
            fw.write(is.read());
        }

        fw.flush();
        dataSocket.close();
        ss.close();
            /*String[] nameParts;
            nameParts = fileName.split(".");
            File f = new File(nameParts[0]+"."+nameParts[1]);
            FileOutputStream fos = new FileOutputStream(f);
            System.out.println(nameParts[0]);*/
    }

    catch(Exception e)
    {
        e.printStackTrace();
    }
}

    } 
```

以上是服务器代码。客户端代码如下：

```
 public class client 
    {
public static void main(String[] args) 
{
    // Read a file
    try 
    {
        Socket dataSocket = new Socket();

        dataSocket.connect(new InetSocketAddress(InetAddress.getLocalHost(), 9999));
        System.out.println("Client: Connection Established");

        OutputStream os = dataSocket.getOutputStream();
        PrintWriter pw = new PrintWriter(os);

        String fileName = "text.txt";

        pw.write(fileName);

        File f = new File(fileName);
        Scanner sc = new Scanner(f);

        /*while(sc.hasNextInt())
        {
            pw.write(sc.nextInt());
        }*/

        //pw.flush();
        //pw.close();

        //dataSocket.close();

        /*String[] nameParts = new String[2];
        nameParts = args[0].split(".");

        while(sc.hasNextByte())
        {
            os.write(sc.nextByte());5
        }*/
    }

    catch (Exception e) 
    {
        e.printStackTrace();
    }
}

    } 
```

一开始，客户端和服务器都只是在等待对方说话，就像两个害羞的少年一样。经过一些更改，这开始发生。我收到**连接重置**错误。请帮忙。截止日期！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:27:39.307

`sc.hasNextByte()`在对等方关闭连接之前保持为真。所以你永远不会摆脱这个循环。您需要在文件名之前发送文件名长度，这样您就知道有多少传入数据是文件名。然后读取文件名，打开文件，读取并复制流的其余部分，直到 EOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:04:47.580

或者，您可以使用留置权编写文件名，如下所示：

pw.write(fileName + "\n");

或者用户一些作家来 writeLine(fileName)。

在服务器端，使用 bufferedReader 逐行读取：

while ((line = br.readLine()) != null) {

```
.... 
```

}

如果客户端关闭，它可以完成循环。

# imap - 在 Java 中更快地阅读收件箱

> ID：10291705
> 
> 赞同：6
> 
> 时间：2012-04-24T04:21:37.283
> 
> 标签：imap, pop3, gmail-imap, jakarta-mail

我想获得一个列表，列出曾经包含在我收件箱中的任何消息中的每个人。现在我可以使用 javax 邮件 API 通过 IMAP 连接并下载消息：

```
Folder folder = imapSslStore.getFolder("[Gmail]/All Mail");
folder.open(Folder.READ_ONLY);
Message[] messages = folder.getMessages();

for(int i = 0; i < messages.length; i++) {
  // This causes the message to be lazily loaded and is slow
  String[] from = messages[i].getFrom();
} 
```

行 messages[i].getFrom() 比我想要的要慢，因为它会导致消息被延迟加载。我能做些什么来加快速度吗？例如，我可以做某种批量加载而不是一个接一个地加载消息吗？这会加载整个消息吗？我可以做些什么来只加载 to/from/cc 字段或标题吗？POP 会比 IMAP 快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T00:25:44.197

您想在 for 循环之前添加以下内容

```
FetchProfile fetchProfile = new FetchProfile();
fetchProfile.add(FetchProfile.Item.ENVELOPE);
folder.fetch(messages, fetchProfile); 
```

这将为所有消息预取“信封”，其中包括 from/to/subject/cc 字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T04:38:36.033

您可以在文件夹中使用[fetch](http://javamail.kenai.com/nonav/javadocs/javax/mail/Folder.html#fetch%28javax.mail.Message%5B%5D,%20javax.mail.FetchProfile%29) -method。根据 Javadocs：

> 客户端使用此方法来指示对于给定的消息范围，指定的项目是整体需要的。期望实现以有效的方式检索给定消息范围的这些项目。请注意，此方法只是实现预取所需项目的提示。

用于从适当的 FetchProfile 获取是[ENVELOPE](http://javamail.kenai.com/nonav/javadocs/javax/mail/FetchProfile.Item.html#ENVELOPE)。当然，这仍然取决于实施，邮件服务器确实有帮助。

# math - 主动降噪背后的理论是什么？

> ID：10291710
> 
> 赞同：1
> 
> 时间：2012-04-24T04:22:00.653
> 
> 标签：math, audio, fft, frequency, noise-reduction

在上一个问题中，我曾问[为什么我不能简单地否定源时域幅度值来产生破坏性噪声信号？](https://stackoverflow.com/questions/10290862/by-reversing-the-polarity-of-a-time-domain-signal-can-i-cancel-the-source-audio)

其中一位海报说，虽然简单地产生一个反极性（否定）信号在理论上是可行的，但在实践中是不可能的

所以我问，主动降噪的基本方法（以某种半技术方式）是什么？

其次，为什么大多数关于这个主题的文献都在频域中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T04:24:35.730

这很简单。

### 当您发送反相信号时，噪音已经被听到了。

您需要查看正在生成的频率，然后产生适当的反相信号以消除它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T06:03:03.963

噪音消除是预测。您的算法必须预测未来某个时间噪声的声音（该时间由系统和音频时间延迟给出），然后预测未来同一时间什么信号会产生相反的声音（您的系统会失真和延迟，因此您必须考虑相反的失真和延迟）。

您可能能够使用几个连续的 FFT 来确定噪声中哪些频率没有变化，并假设或计算它们将在未来短时间内继续存在的概率。

如果您知道扬声器的频率响应曲线，您可能能够计算出匹配某些预测噪声频谱所需的信号的频率幅度。正弦曲线的相位角将随时间变化。如果您知道输出信号的时间延迟，您或许可以在未来某个时间点计算出正弦曲线的相位。如果您在某个时间和位置有一个特定频率噪声的预测相位，您可以将 π 添加到该相位角以估计降噪信号。

如果您不知道系统的频率响应和延迟，那么您将不知道要创建什么频率、幅度或相位来消除信号。你很可能最终会放大噪音而不是消除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-20T03:47:06.263

似乎缺少的是拦截和否定信号所需的传播延迟。KISS 规则最终将证明这一点。FFT 是一个复杂的计算，每次 N 次迭代都会由于处理信号所需的时间而引入产生的误差。要消除声波，需要提前截获、处理和反转。那么换能器的时间常数必须。E 考虑。我的经验是，靠近“噪音”源的麦克风通过电线和放大设备和换能器连接在要取消的位置附近。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-08T19:06:48.013

编辑：错字

ANC 的基本思想是找到重复的声音并播放*相反*的声音。如果重复的声音继续播放，我们将能够取消它。这与其他答案直接矛盾，但我会澄清一下。

播放*相反*的声音意味着以精确的功率和延迟再次播放它，可能会反转波形。延迟本身因每个频率而异。例如，对于 20Hz 的声音，我们必须以 1/20 = 0.05s 的精确倍数重放反转的声音。例如，对于 23Hz，延迟必须是 1/23 ~= 0.04347s 的倍数。

由于任何波形都可以通过正弦曲线的总和产生，因此一种方法是只担心*N*个最大的正弦曲线，以功率（幅度的平方）测量。为了找到正弦波的频率和功率，我们使用**傅里叶变换**，通常使用**FFT**算法。

如果我们取，例如 N=8，这意味着我们正在尝试消除 8 个最强大的波分量。对于它们中的每一个，我们存储：

*   波幅
*   波的偏移量，以计算机的时钟为基准。

比我们不断地播放 8 个正弦曲线，每个都在正确的功率和正确的延迟上。困难的部分是接下来会发生什么。我们需要不断地倾听以适应，但现在我们正在倾听环境声音+我们自己的声音。这种算法更难实现，但从概念上讲更容易，并且可以很容易地自己弄清楚如何去做。

因此，**与其他答案所说的相反，管理时间延迟至关重要**。不这样做是不可能创建 ANC 系统的。如果您只关心频域，那么您唯一可以做的就是过滤这些频率。在 ANC 系统上，这是没有意义的。

# ruby-on-rails - Ruby on Rails：从显示页面发送电子邮件

> ID：10291713
> 
> 赞同：0
> 
> 时间：2012-04-24T04:22:09.760
> 
> 标签：ruby-on-rails, routes, actionmailer

我是 Rails 菜鸟，从显示页面发送电子邮件时遇到问题。那里有几个联系表格教程，但我找不到一个从“显示”页面之类的页面发送电子邮件的地方。我相信我的路线有很大的错误。在模型中，我声明用户有多个促销，并且在促销显示页面上，我希望允许 current_user 向@user 发送电子邮件。

这里是 app/mailers/quote_mailer.rb

```
class QuoteMailer < ActionMailer::Base
  default :from => "tim@example.com"

  def quote_mail(promotion)
    @user = user
    mail(:to => user.email, :subject => "You have an inquiry homeboy!")
  end 
end 
```

在promotions_controller 我把这个动作我认为可能是错误的：

```
def quotedeliver
  QuoteMailer.quote_mail.deliver
  flash[:notice] = 'report sent!'
  redirect_to root_path # or wherever
end 
```

这是我用来发送电子邮件的表格（:url 可能是错误的，但我不知道它应该是什么样子）

```
<%= form_for quote_mail, :url => quotedeliver_promotion_path(promotion), :html => {:method => :put } do |f| %>
  <%= f.text_area :body %>
  <%= f.submit %>
<% end %> 
```

我很想得到一些帮助。我在stackoverflow上找不到类似的东西，我已经尝试了好几天。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:22:27.633

您可能错过了 config/routes.rb 中的路线

你可以像这样定义它

```
post '/quotedeliver_promotion' => 'promotions#quotedeliver', :as => quotedeliver_promotion 
```

请注意，quotedeliver 必须重写 quote_deliver 以遵循 ruby​​ 语法约定。你打电话时

```
QuoteMailer.quote_mail.deliver 
```

你没有给出参数，所以试试这个

```
QuoteMailer.quote_mail(current_user).deliver 
```

并改变你的方法

```
def quote_mail(user)
  mail ....
end 
```

你们都很好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:18:54.503

关于发送电子邮件[http://railscasts.com/?tag_id=28](http://railscasts.com/?tag_id=28)有一些出色的屏幕截图（通过 Railscasts） 。

最后一件事，不要将您的邮件发送方法附加到显示操作（如果您当前正在执行），原因是显示操作仅用于查看某些内容并且用户可能正在刷新该页面，因此，如果您将邮件附加到该页面，邮件可能会在每次刷新时发出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T04:46:33.287

```
def quote_mail(promotion)
   @user = user
  mail(:to => user.email, :subject => "You have an inquiry homeboy!")
end 
```

从您访问用户变量的位置，我认为应该是促销。

# asp.net - 仅加密 web.config ASP.NET 中的密码

> ID：10291714
> 
> 赞同：3
> 
> 时间：2012-04-24T04:22:37.820
> 
> 标签：asp.net, encryption, web-config

如何仅加密 web.config 文件中的密码？

```
<add name="PSystem" connectionString="Server=test;Database=Dev;User ID=testuser;Password=password@123;Trusted_Connection=False;Encrypt=True;" providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:28:35.727

我相信内置的加密机制适用于整个 connectionString 部分：

[有关更多信息，请参阅此网站](http://msdn.microsoft.com/en-us/library/dx0f3cf2%28v=vs.80%29.aspx)

如果您想加密内存密码，可能由用户通过登录表单输入，您可以使用[SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T21:51:52.590

您可以尝试在连接字符串中使用标志，如下所示：

```
<add name="PSystem" 
 connectionString="Server=test;
                   Database=Dev;
                   User ID=@UserID@;
                   Password=#Password#;
                   Trusted_Connection=False;
                   Encrypt=True;" 
  providerName="System.Data.SqlClient" /> 
```

然后您可以拥有加密的用户和密码，如下所示：

```
<add key="DB_User" value = [Encrypted Username]>
<add key="DB_Password" value = [Encrypted Password]> 
```

然后在代码中你只需替换标志：

```
string _connectionString = ConfigurationManager.ConnectionStrings["PSystem"].ConnectionString;

string user = Decrypt(ConfigurationManager.AppSettings["DB_User"]);
string password = Decrypt(ConfigurationManager.AppSettings["DB_Password"]);

_connectionString = _connectionString.Replace("##User##", user).Replace("##Password##", password); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T02:49:21.607

> 要加密配置文件内容，请使用带有 –pe 选项和要加密的配置元素名称的 Aspnet_regiis.exe 工具。
> 
> aspnet_regiis -pe "connectionStrings" -app "/SampleApplication" -prov "RsaProtectedConfigurationProvider"

来源： http: [//msdn.microsoft.com/en-us/library/zhhddkxy (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zhhddkxy(v=vs.100).aspx)

# jquery - 需要 Twitters boostrap 轮播优化解决方案

> ID：10291729
> 
> 赞同：1
> 
> 时间：2012-04-24T04:25:13.030
> 
> 标签：jquery, image, optimization, twitter-bootstrap

我有一个工作引导轮播。而且我刚刚意识到，甚至在用户可见之前，图像就已经被提前加载了。我的问题是我有一个循环的轮播列表。使我的页面加载缓慢。有没有办法只加载被请求的图像？通过jQuery？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:35:51.437

[滑动](http://twitter.github.com/bootstrap/javascript.html#carousel)事件发生后，您可以尝试设置“src” 。

```
$(".carousel").bind("slid", function(){
 $img = $(".active img", this)
 $img.attr("src", $img.data('lazy-load-src'))
} 
```

使用 HTML

```
<div class="carousel-inner">
  <div class="active item"><img data-lazy-load-src="/imgs/test.png"/></div>
  <div class="item"><img data-lazy-load-src="/imgs/test2.png"/></div>
  <div class="item"><img data-lazy-load-src="/imgs/test3.png"/></div>
</div> 
```

我相信你会想要积极地在 CSS 中设置项目容器的高度/宽度，因为浏览器不会加载图像。

# apc - 如何在定期更新的系统上使用 APC？

> ID：10291736
> 
> 赞同：2
> 
> 时间：2012-04-24T04:25:41.673
> 
> 标签：apc

我们有一个用 PHP 编写的系统，存储在生产服务器上。我们也安装了 APC。

我们的系统在 Mercurial 上使用特殊的本地存储库并定期更新 - 一些脚本由开发人员根据客户需求进行修改。

但据我了解，APC缓存会存储被修改文件的旧版本吗？这是否意味着，更新过程应如下所示：

*   从存储库中提取最新更改。
*   更新系统。
*   执行脚本以强制 APC 清除它的缓存。

我问这个是因为我不了解 APC 使用的机制。它是否计算校验和以查看脚本是否已更新？或者它无法处理这种情况，我将不得不手动清除缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:41:02.493

默认情况下，APC 将检查文件的更改并自动更新。无需手动执行任何操作。在非常高流量的应用程序上 可以将其设置为不检查文件更改，但 APC 进行测试所需的时间可以忽略不计，因此它可能不是您需要的。

# c# - 实体框架：如何处理与 obd.tablename 不同的 dbo.tablename

> ID：10291737
> 
> 赞同：0
> 
> 时间：2012-04-24T04:25:58.180
> 
> 标签：c#, entity-framework

我有针对 MyDatabase 运行的 website1 和 webiste2。

在 MyDatabase 我有一些表：dbo.Users、dbo1.Posts、dbo2.Posts。dbo.Users 和 dbo1.Posts 以及 dbo.Users 和 dbo2.Posts 之间存在外键关系。

我希望 website1 和 website2 运行相同的代码库，是否可以让网站一个从 dbo1.Posts 获得它的帖子，而 website2 从 dbo2.Posts 获得他们的帖子？

想法是所需的架构（dbo1 或 dbo2）将来自配置文件。

在我的情况下，dbo1.Posts 和 dbo2.Posts 中的信息可能被视为机密信息。可能有用户可以访问两者，或者可能有用户可以访问其中一个。因此，正如我所见，有两种方法，物理上或逻辑上分离数据库。我手头的任务是调查它是否可以在逻辑上完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:21:01.867

六步：

1.  使用类型库导入器为您的 ActiveX EXE 生成互操作程序集。
2.  在 C# 项目中添加对互操作程序集的引用。
3.  使用 Process.Start 启动 ActiveX EXE。
4.  使用 Marshal.GetActiveObject 在运行的 ActiveX EXE 中获取对象的运行实例（相当于 VB 中的 GetObject）。
5.  将上一步中返回的对象转换为互操作程序集中定义的等效类型。
6.  对对象做任何需要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T04:36:27.340

[此链接说明如何使用代码优先映射为类指定架构](http://www.devproconnections.com/article/entity-framework/entity-framework-schema-141882)。如果您不能重构您的应用程序以不在两个不同的模式中使用相同的类/表，恐怕您将不得不定义两个 Post 类：映射到 dbo1 的 Post1 和映射到 dbo2 的 Post2。此外，在尝试为用户获取帖子时，您会遇到阻碍，您必须拥有 User.Post1s 和 User.Post2s（粗略的示例，抱歉）。

因此，除非您别无选择，否则我将对其进行重构以解决重复的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T22:07:40.283

如果您想在创建上下文时动态设置架构名称，这是一个替代解决方案......基本上类似于@BradleyH 的答案，但不是从配置类中读取，而是将架构名称作为映射方法的参数/构造函数。

有关更详细的说明，请参见此处：[https ://stackoverflow.com/a/14782001/243607](https://stackoverflow.com/a/14782001/243607)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T04:29:15.667

好的，这就是最终发生的事情。仍然不确定这是否是最好的解决方案，但如果有人来寻找这个问题的答案，我确实想出了一种让它发挥作用的方法。

话虽如此，我仍然***同意***Matt 和 Hacked 的观点，认为应该有一种更简单的方法来做到这一点。

我的拼图有三个不同的图片。

首先，有一个实体映射到有问题的表中，我使用了以下内容：

```
this.ToTable("Posts", ConfigurationHelper.GetSiteSchema()); 
```

其次，我在从 Web.config 文件中的 AppSettings 读取的配置帮助程序中有一行

```
 public static string GetSiteSchema()
    {
        return ConfigurationManager.AppSettings["SiteSchema"];
    } 
```

在 web.config 文件的第三个中，我添加了一个 Appsettings，如下所示：

```
 <appSettings>
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <add key="SiteSchema" value="dbo1"/>
  </appSettings> 
```

构建应用程序并运行它后，我从 dbo1.Posts 获取帖子。然后我可以将 web.config 文件中的字符串切换为“dbo2”，刷新页面并查看来自 dbo2.Posts 的帖子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T04:30:07.530

老实说，我会重新评估您的设计，并在 Post 表中添加一列来指示来源。更简单，更清洁。

# ruby-on-rails - 条纹定期/订阅计费最佳设计/实践？

> ID：10291740
> 
> 赞同：15
> 
> 时间：2012-04-24T04:26:34.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, payment, stripe-payments

我打算将我的第一个网站与 Stripe 放在一起，但我觉得我可以设计我的 Stripe 集成比我有的更好。我遇到的主要问题是，我如何维护条带帐户的状态（试用和过期等）什么是重要的 webhook（以及处理所有事件的最佳方法），以及我应该有多少数据在我的数据库中复制，我应该从 Stripe 数据库中提取多少。

很想就什么是最好的提出一些想法。作为参考，我在 Ruby on rails 中开发了我的网站，部署到 heroku，使用 send grid heroku add on 发送有关账单、延迟付款等的电子邮件通知。

对于那些在 RoR 上使用条带的人来说，这里有一些我使用的很好的资源（尽管我还没有找到真正涵盖使用条带的定期/订阅计费的资源）：

RailsCast：

*   [http://railscasts.com/episodes/288-billing-with-stripe](http://railscasts.com/episodes/288-billing-with-stripe)

当然条纹文档和api：

*   [https://stripe.com/docs](https://stripe.com/docs)
*   [https://stripe.com/docs/api](https://stripe.com/docs/api)

这段用于 webhook/mailing 的小代码

*   [https://github.com/boucher/stripe-webhook-mailer/blob/master/mailer.rb](https://github.com/boucher/stripe-webhook-mailer/blob/master/mailer.rb)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T22:46:53.747

关于重复 - 我选择仅将 CustomerKey 存储在我的本地用户记录中。其他一切，发票，交易等都存储在 Stripe 中。IMO 最好不要试图在两个系统之间保持奇偶性 - 最好的情况是你会有重复的数据，最坏的情况是，你会因为不同步而引起各种头痛......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:22:30.217

[SaaS Rails 工具包](http://railskits.com/saas/)（我创建的）与 stripe 集成，只需将卡信息与 stripe 一起存储（不设置定期收费），取回令牌，然后在人们的帐户到期时通过每日 cron 作业对令牌计费。

这种方法的几个好处包括不必担心 webhook / 保持两个系统同步，并且除了每月固定费用之外还能够进行计量计费。

# iphone - 使用批量请求在 Facebook 上上传多张照片

> ID：10291741
> 
> 赞同：25
> 
> 时间：2012-04-24T04:26:58.020
> 
> 标签：iphone, objective-c, ipad, facebook-graph-api

我已经参考以下[链接](https://stackoverflow.com/questions/5353117/facebook-connect-batch-requests-and-fql-error-problem)完成了以下代码，以创建在 Facebook 中上传多张照片的批处理请求。

我有一些解决方案可以通过这个[Facebook 图形 API 在 Facebook 上上传多张照片。](http://developers.facebook.com/docs/reference/api/batch/)

**代码：**

```
 NSString *jsonRequest1 = @"{ \"method\": \"POST\", \"relative_url\": \"me/photos\" , \"body\": \"Hello 1\", \"attached_files\": \"file1\" }";
    NSString *jsonRequest2 = @"{ \"method\": \"POST\", \"relative_url\": \"me/photos\" , \"body\": \"Hello 2\", \"attached_files\": \"file2\" }";
    NSString *jsonRequestsArray = [NSString stringWithFormat:@"[ %@, %@ ]", jsonRequest1, jsonRequest2];
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:jsonRequestsArray,@"batch",nil];
    [params setObject:UIImagePNGRepresentation(self.image1) forKey:@"file1"];
    [params setObject:UIImagePNGRepresentation(self.image2) forKey:@"file2"];
    [objFacebook requestWithGraphPath:@"me" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

现在，当我运行此代码时，我得到了以下输出。

**结果字典在** `- (void)request:(FBRequest *)request didLoad:(id)result`

```
(
        {
        body = "{\"error\":0,\"error_description\":\"File file1 has not been attached\"}";
        code = 400;
        headers =         (
                        {
                name = "HTTP/1.1";
                value = "400 Bad Request";
            },
                        {
                name = "Content-Type";
                value = "text/javascript; charset=UTF-8";
            }
        );
    },
        {
        body = "{\"error\":0,\"error_description\":\"File file2 has not been attached\"}";
        code = 400;
        headers =         (
                        {
                name = "HTTP/1.1";
                value = "400 Bad Request";
            },
                        {
                name = "Content-Type";
                value = "text/javascript; charset=UTF-8";
            }
        );
    }
) 
```

我不知道这些文件是如何附加的。任何人都可以帮我解决这个问题。

我的代码是否有任何更改，请告诉我。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T06:04:13.680

我建议您使用 iOS 6 中新的集成 Facebook API 来执行此操作，而不是 Facebook 的 API：[https](https://developer.apple.com/videos/wwdc/2012/?id=306) ://developer.apple.com/videos/wwdc/2012/?id= 306 所有社交任务都有一个黄金 WWDC 视频。另外，在 iOS 6 中使用新的 API 比使用 Facebook 快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T21:03:57.090

For your NSDictionary of parameters ,use the NSData representation, instead of directly using the UIImage object.

Depending on the compression format of the images you are trying to upload, you'll need to use a different method to convert the UIImage to NSData. Here are two techniques, one for PNG and one for JPEG

```
//...cut...
[params setObject:UIImageJPEGRepresentation(self.jpegImage, 0.8) forKey:@"file1"];
[params setObject:UIImagePNGRepresentation(self.pngImage) forKey:@"file2"];
//...cut... 
```

This is a tutorial from the Facebook Developer blog that shows something similar (although it is for a video, and not the batch API), and one significant difference from your code is that the parameter passed is in NSData representation, not UIImage.

[http://developers.facebook.com/blog/post/532/](http://developers.facebook.com/blog/post/532/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:18:25.260

[参数 setObject:UIImagePNGRepresentation(self.image1) forKey:@"file1"];

这不应该是数据，它应该是该图像的路径。如果您提供路径而不是 NSData，它将正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T12:28:17.370

我得到了使用 FBgraph 上传多个文件的解决方案。

这是我的代码。

```
-(void) fbGraphCallback
{

FbGraphFile *graph_file = [[FbGraphFile alloc]initWithImage:imgView1.image];
FbGraphFile *graph_file1 = [[FbGraphFile alloc]initWithImage:imgView2.image];

NSString *jsonRequest1 = @"{ \"method\": \"POST\", \"relative_url\": \"me/photos\" , \"body\": \"First Image\", \"attached_files\": \"file1\" }";

NSString *jsonRequest2 = @"{ \"method\": \"POST\", \"relative_url\": \"me/photos\" , \"body\": \"Second Image\", \"attached_files\": \"file2\" }";

NSString *jsonRequestsArray = [NSString stringWithFormat:@"[ %@, %@ ]", jsonRequest1, jsonRequest2];

NSMutableDictionary *params = [NSMutableDictionary     dictionaryWithObjectsAndKeys:jsonRequestsArray,@"batch",nil];

[params setObject:graph_file forKey:@"file1"];
[params setObject:graph_file1 forKey:@"file2"];

[fbgraph doGraphPost:@"" withPostVars:params];

} 
```

谢谢梅胡尔。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-08T07:47:35.077

您错误地将二进制文件添加到 Dictionary 中。看看[Facebook 的示例应用](https://github.com/booyah/facebook-ios-sdk/blob/8470eb9bdc0449996bcfd2f2f954c92a5e33bae6/sample/DemoApp/Classes/DemoAppViewController.m)中的文件上传方法。您应该能够轻松地将 Facebook 的示例代码应用到您的应用程序中。

```
/** 
 * Upload a photo.
 */
-(IBAction)uploadPhoto:(id)sender 
{
  NSString *path = @"http://www.facebook.com/images/devsite/iphone_connect_btn.jpg";
  NSURL *url = [NSURL URLWithString:path];
  NSData *data = [NSData dataWithContentsOfURL:url];
  UIImage *img  = [[UIImage alloc] initWithData:data];

  NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                 img, @"picture",
                                 nil];
  [_facebook requestWithMethodName:@"photos.upload"
                         andParams:params
                     andHttpMethod:@"POST"
                       andDelegate:self];
  [img release];
} 
```

# android - INSTALL_REFERRER Intent 在 3.2 以上版本中不起作用

> ID：10291742
> 
> 赞同：3
> 
> 时间：2012-04-24T04:27:23.263
> 
> 标签：android

我们基于 INSTALL_REFERRER 意图开发了一个应用程序。我们的应用程序尝试检索在安装时从 Google Play 发送的 utm 参数。我们能够在 Android 2.3.5 设备上成功接收到意图（带有 utm 参数），但在 Android 3.2.* 版本的设备上没有接收到相同的意图。

这个问题在博客上似乎很常见，但我们没有找到任何解决方案来解决它。

是Android 3.2.)版本SDK的问题吗？INSTALL_REFERRER 行为是否改变了？如果有人有解决此问题的方法，请与我们分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:34:00.277

显然，Android 3.2 SDK 发生了一些变化，更具体地说是在更新期间。就像您指出的那样，这个问题似乎没有本地化。过去一周我一直在监控情况，而谷歌对于发生这种情况的原因一直保持沉默。但是，看到有多少人受到影响，如果这个问题在下一次更新中得到解决，我不会感到惊讶。

我似乎找到了您可以使用[的临时解决方法。](http://code.google.com/p/android/issues/detail?id=19247#c23)我自己没有尝试过，所以我不知道它会如何工作，但它看起来很可靠。

# postgresql - postgresql 进行时区更改，直到重新启动服务

> ID：10291752
> 
> 赞同：0
> 
> 时间：2012-04-24T04:28:55.580
> 
> 标签：postgresql, timezone

我对 postgresql 时区有点困惑 我正在检查某些行中的日期，我注意到其中的时区 -4 但我的实际时区是 -3 政府对夏令时时区和 tzdata 文件进行了更改系统日期很好，但 postgres 直到我重新启动它才注意到更改

我尝试使用 set TIME ZONE LOCAL 设置它，但它仍然得到了错误的时区 -4

```
select extract(epoch from now()),now();
date_part     |             now              
------------------+------------------------------
 1335240339.68894 | 2012-04-24 00:05:39.68894-04
(1 fila) 
```

但是在我重新启动postgresql之后

```
# select extract(epoch from now()),now(); 
```

日期部分 | 现在
----------------+--------------------------------

```
 1335240403.672 | 2012-04-24 01:06:43.672002-03
 (1 fila) 
```

我的时区总是

```
 show timezone;
     TimeZone     
------------------
 America/Santiago
(1 fila) 
```

每次更改 tzdata 信息时，我是否需要重新启动 postgres？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T06:08:41.720

According to this [FAQ entry](http://wiki.postgresql.org/wiki/FAQ#Will_PostgreSQL_handle_recent_daylight_saving_time_changes_in_various_countries.3F), PostgreSQL is coming with the latest tzdata database. In order to keep it up to date, one should install minor PostgreSQL releases on a regular basis.

It is also possible to have PostgreSQL compiled with system tzdata database support using the `--with-system-tzdata` configure option.

In both cases, running server will not monitor for changes in the tzdata databases, so you'll have to explicitly notify it via the restart.

# javascript - 在使用 SWFUpload 上传之前更改文件名

> ID：10291754
> 
> 赞同：1
> 
> 时间：2012-04-24T04:29:06.287
> 
> 标签：javascript, swfupload

我正在使用 SWFUpload 允许用户在任何浏览器中上传多个文件。用户可以为上传的文件提供自定义文件名。如何在上传文件之前遍历所有排队的文件并将文件的名称更新为自定义名称。

如果我无法更改文件名，如何为每个上传的文件添加一个 post 参数以在服务器端进行更改？我知道如何为所有文件添加参数，但我将如何为每个文件添加参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:43:52.087

您无法更新在文件上传的 POST 正文中发送的文件的实际名称，因为在内部，SWFUpload 使用的是 FileReference，它不允许您在上传文件之前更改任何文件的属性（而且没有办法在不使用 FileReference 进行上传的情况下获得正确的上传进度，因此这不是真正可以更改的东西）。

但是，您应该能够通过[`addFileParam`函数](http://demo.swfupload.org/Documentation/#addFileParam)为每个文件添加一个额外的 POST 参数。它的签名是：

```
addFileParam(file_id:String, name:String, value:String):Boolean 
```

# android - Android 上 3G/4G 无线数据连接的 UPnP NAT 穿越

> ID：10291759
> 
> 赞同：2
> 
> 时间：2012-04-24T04:30:06.607
> 
> 标签：android, networking, 3g, nat, upnp

有没有办法在具有 3G/4G 连接的 Android 上使用 UPnP 进行 NAT 遍历，如果是这样，它是否依赖于运营商？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T20:30:49.307

不，暂时你无法做到这一点，原因很简单，移动运营商不使用住宅级 NAT - 他们拥有的是“运营商级 NAT” CGN，请参见此处[http://en .wikipedia.org/wiki/Carrier-grade_NAT](http://en.wikipedia.org/wiki/Carrier-grade_NAT)，这些设备具有与住宅网关截然不同的端口分配和管理机制。

请参阅此集合中的运营商级 NAT (CGN) 相关文档：[http ://www.scribd.com/collections/3292450/P2P](http://www.scribd.com/collections/3292450/P2P)

PS 目前有一个为 CGN 考虑的类似 UPnP 的协议，即“端口控制协议”（PCP），请参见此处：[https ://datatracker.ietf.org/doc/html/draft-ietf-pcp-base -29](https://datatracker.ietf.org/doc/html/draft-ietf-pcp-base-29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:14:13.740

[Cling](http://4thline.org/projects/cling/)具有执行 UPnP 的 Android 特定类，从论坛消息及其文档的外观来看，它应该可以工作。我目前正在 PC 上对其进行测试，但最终我选择了它，因为他们支持 Android。我会在一两天后在这里发布我的测试结果。

检查 Cling Core，尤其是[支持库](http://4thline.org/projects/cling/support/manual/cling-support-manual.html#section.PortMapping)。在最基本的层面上，您只需要 4 行代码来进行端口映射。

[更新] Android 的 Cling 文档指出它只允许绑定到 Wi-Fi 接口，因此无法在蜂窝数据连接上进行端口映射（至少在 Cling 版本 1.0.5 中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T22:59:45.867

与其尝试使用 uPnP（这是一个安全风险，因为它租用了一个未映射的端口打开），您可能想要使用 STUN 来获取公共 ip/端口，然后建立一个 UDP 连接，您可以通过该连接隧道 psudo-TCP，或使用 TURN 服务器。对于运营商级 NAT，如果您不想为中继付费，也有这种技术，有时可能会起作用：

[https://drive.google.com/file/d/0B1IimJ20gG0SY2NvaE4wRVVMbG8/view?usp=sharing](https://drive.google.com/file/d/0B1IimJ20gG0SY2NvaE4wRVVMbG8/view?usp=sharing)

# ios - 使用 Apple Accelerate 框架进行倒谱和共振峰跟踪

> ID：10291761
> 
> 赞同：2
> 
> 时间：2012-04-24T04:30:27.987
> 
> 标签：ios, signal-processing, fft, accelerate-framework

我一直在使用这个网页作为语音共振峰跟踪的指南......

[http://iitg.vlab.co.in/?sub=59&brch=164&sim=615&cnt=1](http://iitg.vlab.co.in/?sub=59&brch=164&sim=615&cnt=1)

一切似乎进展顺利，除了最后一步，即将倒谱转换为平滑表示，用于共振峰跟踪的简单峰值拾取。光谱仪看起来不错，倒谱仪（我可以这么说吗？：P）看起来也不错（据我所知），但最后阶段的结果（平滑共振峰表示）不是我所期望的。

我将每个阶段的样本作为视觉图像上传到...

[http://imgur.com/a/62duS](https://imgur.com/a/62duS)

该样本用于声音“i”的语音，如“beed”。根据这个网站...

[http://home.cc.umanitoba.ca/~robh/howto.html#formants](http://home.cc.umanitoba.ca/~robh/howto.html#formants)

第一个共振峰应该在 500hz 左右，第二个和第三个共振峰分别在 2200hz 和 2800 hz 左右。光谱仪显示的东西非常相似，但在最后阶段我得到的结果类似于......

F1 - 891 F2 - 1550 F3 - 2329

任何见解将不胜感激。一段时间以来，我一直在兜圈子。我的代码如下所示...

```
// set up fft parameters
UInt32 log2n = 9;
UInt32 n = 512;
UInt32 window = n;
UInt32 halfN = n/2;
UInt32 stride = 1;
FFTSetup setupReal = [appDelegate getFftSetup];
int stepSize = (hpBuffer.sampleCount-window) / quantizeCount;

// calculate volume from raw samples, because it seems more reliable that fft
UInt32 volumeWindow = 128;
volumeBuffer = malloc(sizeof(float)*quantizeCount);
int windowPos = 0;
for (int i=0; i < quantizeCount; i++) {
    windowPos += stepSize;
    float total = 0.0f;
    float max = 0.0f;
    for (int p=windowPos; p < windowPos+volumeWindow; p++) {
        total += sampleBuffer.buffer[p];
        if (sampleBuffer.buffer[p] > max)
            max = sampleBuffer.buffer[p];
    }
    volumeBuffer[i] = max;
}

// normalize volumebuffer
[FloatAudioBuffer normalizePositiveBuffer:volumeBuffer ofSize:quantizeCount];

// allocate memory for complex array
COMPLEX_SPLIT complexArray;
complexArray.realp = (float*)malloc(4096*sizeof(float));
complexArray.imagp = (float*)malloc(4096*sizeof(float));

// allocate some space for temporary hamming buffer
float *hamBuffer = malloc(n*sizeof(float));

// create spectrum and feature buffer
spectrumBuffer = malloc(sizeof(float)*halfN*quantizeCount);
formantBuffer = malloc(sizeof(float)*4096*quantizeCount);
cepstrumBuffer = malloc(sizeof(float)*halfN*quantizeCount);
lowCepstrumBuffer = malloc(sizeof(float)*featureCount*quantizeCount);
featureBuffer = malloc(sizeof(float)*featureCount*quantizeCount);

// create data point for each quantize segment
float TWOPI = 2.0f * M_PI;
for (int s=0; s < quantizeCount; s++) {
    // copy buffer data into a seperate array and apply hamming window
    int offset = (int)(s * stepSize);
    for (int i=0; i < n; i++)
        hamBuffer[i] = hpBuffer.buffer[offset+i] * ((1.0f-0.46f) - 0.46f*cos(TWOPI*i/((float)n-1.0f)));

    // configure float array into acceptable input array format (interleaved)
    vDSP_ctoz((COMPLEX*)hamBuffer, 2, &complexArray, 1, halfN);

    // run FFT
    vDSP_fft_zrip(setupReal, &complexArray, stride, log2n, FFT_FORWARD);

    // Absolute square (equivalent to mag^2)
    complexArray.imagp[0] = 0.0f;
    vDSP_zvmags(&complexArray, 1, complexArray.realp, 1, halfN);
    bzero(complexArray.imagp, (halfN) * sizeof(float));

    // scale
    float scale = 1.0f / (2.0f*(float)n);
    vDSP_vsmul(complexArray.realp, 1, &scale, complexArray.realp, 1, halfN);

    // get log of absolute values for passing to inverse FFT for cepstrum
    for (int i=0; i < halfN; i++)
        complexArray.realp[i] = logf(sqrtf(complexArray.realp[i]));

    // save this into spectrum buffer
    memcpy(&spectrumBuffer[s*halfN], complexArray.realp, halfN*sizeof(float));

    // convert spectrum to interleaved ready for inverse fft
    vDSP_ctoz((COMPLEX*)&spectrumBuffer[s*halfN], 2, &complexArray, 1, halfN/2);

    // create cepstrum
    vDSP_fft_zrip(setupReal, &complexArray, stride, log2n-1, FFT_INVERSE);

    //convert interleaved to real and straight into cepstrum buffer
    vDSP_ztoc(&complexArray, 1, (COMPLEX*)&cepstrumBuffer[s*halfN], 2, halfN/2);

    // copy first part of cepstrum into low cepstrum buffer
    memcpy(&lowCepstrumBuffer[s*featureCount], &cepstrumBuffer[s*halfN], featureCount*sizeof(float));

    // make 8000 point array based on the first 15 values
    float *tempArray = malloc(8192*sizeof(float));
    for (int i=0; i < 8192; i++) {
        if (i < 15)
            tempArray[i] = cepstrumBuffer[s*halfN+i];
        else
            tempArray[i] = 0.0f;
    }
    vDSP_ctoz((COMPLEX*)tempArray, 2, &complexArray, 1, 4096);
    float newLog2n = log2f(8192.0f);
    complexArray.imagp[0] = 0.0f;
    vDSP_fft_zrip(setupReal, &complexArray, stride, newLog2n, FFT_FORWARD);
    vDSP_zvmags(&complexArray, 1, complexArray.realp, 1, 4096);
    bzero(complexArray.imagp, (4096) * sizeof(float));

    // scale
    scale = 1.0f / (2.0f*(float)8192);
    vDSP_vsmul(complexArray.realp, 1, &scale, complexArray.realp, 1, 4096);

    // get magnitude
    for (int i=0; i < 4096; i++)
        complexArray.realp[i] = sqrtf(complexArray.realp[i]);

    // write to formant buffer
    memcpy(&formantBuffer[s*4096], complexArray.realp, 4096*sizeof(float));

    // complex array now contains formant spectrum
    // it's large, so get features here!
    // try simple peak picking algorithm for first 3 formants
    int formantIndex = 0;
    float *peaks = malloc(6*sizeof(float));
    for (int i=0; i < 6; i++)
        peaks[i] = 0.0f;
    for (int i=1; i < 4096-1 && formantIndex < 6; i++) {
        if (complexArray.realp[i-1] < complexArray.realp[i] &&
            complexArray.realp[i+1] < complexArray.realp[i])
            peaks[formantIndex++] = i;
    } 
```

# mysql - MySQL Join with conditions on the join on the fly

> ID：10291763
> 
> 赞同：0
> 
> 时间：2012-04-24T04:30:46.423
> 
> 标签：mysql

我需要知道，我如何在飞行中做到这一点，

例如，我的客户处于不同的截止日期状态，我想选择 MAX（最近的截止日期）ON LEFT JOIN，当它加入两个表时，它选择了最旧的截止日期，这不是我想要的..

```
SELECT c.customerid, i.datedue
                        FROM  customers c
                               LEFT JOIN invoice i 
                                 ON i.customerid = c.customerid
                        WHERE  i.datedue <= UNIX_TIMESTAMP()
                               AND c.status!='d'
                        GROUP  BY i.customerid
                        ORDER BY i.datedue DESC
                        LIMIT  0, 1000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:40:30.957

您需要使用 max() 函数：

```
SELECT c.customerid, MAX(i.datedue)
FROM customers c LEFT JOIN invoice i ON i.customerid = c.customerid
WHERE i.datedue <= UNIX_TIMESTAMP() and c.status!='d'
GROUP BY i.customerid
ORDER BY i.datedue DESC
LIMIT 0,1000 
```

这将为您提供每位客户的最长到期日期。

# layout - 布局列中的水平对齐

> ID：10291766
> 
> 赞同：1
> 
> 时间：2012-04-24T04:31:43.510
> 
> 标签：layout, extjs4, alignment

这是EXT JS 4。一个简单的问题，我如何对齐布局列中的项目？

```
 layout:'column',
                    border: false,
                    items:
                    [
                    {
                        columnWidth:.5,
                        xtype: 'label',
                        text: 'item 1'
                    },
                    {
                        columnWidth: .5,
                        xtype: 'label',
                        text: 'item 2'
                    }
                    ] 
```

我所需要的只是将“项目 1”对齐到右侧，将“项目 2”对齐到左侧。所以，他们将在中心见面。仅使用 'align:right' 是行不通的。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:24:00.500

试试这个：

```
Ext.onReady(function() {
    Ext.create('Ext.panel.Panel', {
        renderTo: document.body,
        width: 200,
        height: 200,
        layout: 'column',
        items: [{
            columnWidth: 0.5,
            xtype: 'label',
            text: 'item 1',
            style: 'text-align: right;'
        }, {
            columnWidth: 0.5,
            xtype: 'label',
            text: 'item 2'
        }]
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:16:27.530

这是 Sencha 文档的引用：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Label](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Label)

**注意**`fieldLabel`：在大多数情况下，在字段组件本身中使用和相关的配置属性（`Ext.form.Labelable.labelAlign`,等）会更合适`Ext.form.Labelable.labelWidth`，因为这允许标签在整个表单中统一大小。`Ext.form.Label`仅当您的布局无法使用标准字段布局实现时才应使用。

# android - 有什么比 Jsoup 更快的 HTML 抓取？

> ID：10291767
> 
> 赞同：10
> 
> 时间：2012-04-24T04:31:54.527
> 
> 标签：android, jsoup

因此，我正在构建一个应用程序，该应用程序可以在更用户友好的界面中显示来自我访问的网站的图像板。目前它存在很多问题，但目前最大的问题是获取图像以显示它们。

我现在的方式是，图像显示在大小为 12 的 GridView 中，镜像图像板每页上的图像数量。我正在使用 Jsoup 为要在 GridView 中显示的缩略图图像 URL 抓取页面，并在用户单击缩略图时获取要显示的全尺寸图像的 URL。

现在的问题是，Jsoup 平均需要 8-12 秒才能获取 HTML 页面。我觉得这是不可接受的，我想知道是否有任何方法可以加快速度，或者这是否会成为我无能为力的固有瓶颈。

这是我用来获取要抓取的页面的代码：

```
try {
    Document doc = Jsoup.connect(url).get();
    Elements links = doc.select("img[src*=/alt2/]");
    for (Element link : links) {
        thumbURL = link.attr("src");
        linkURL = thumbURL.replace("/alt2/", "/").replace("s.jpg", ".jpg");
        imgSrc.add(new Pair<String, String>(thumbURL, linkURL));
    }
}
catch {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T04:41:29.513

我将 Jsoup 用于 TLFN 刮板，速度没有问题。你应该缩小瓶颈。我认为是您的刮擦导致了速度问题。尝试分别跟踪您的选择器和网络流量，看看应该归咎于哪个。如果你的选择器是罪魁祸首，那么考虑寻找另一种方法来查询和基准测试结果。

为了更快、更普遍地进行测试，您总是可以从一个普通的 Java 项目中运行 Jsoup，当您觉得自己已经改进了它时，将它放回设备上，看看它是否有类似的性能改进。

编辑

并不是说这是您的问题，但请注意，使用迭代器“可能”会触发相当多的垃圾收集。通常这不是问题，尽管如果您在许多地方重复使用它们，它们可能会导致某些设备的性能受到明显影响。

不是很好

```
for (Element link : links) 
```

更好的

```
int i;
Element tempLink;
for (i=0;i<links.size();i++) {
   tempLink = links.get(i);
} 
```

编辑 2

如果图像 URL 以 /alt2/ 开头，您可以使用 ^= 而不是 *=，这可能会使搜索速度更快。此外，根据 HTML 的数量，您可能会浪费大量时间在完全错误的位置查找这些图像。检查这些图像是否包装在可识别的容器中，例如`<div class="posts">`. 如果您可以缩小要筛选的 HTML 数量，可能会提高性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T20:07:41.980

虽然略有不同，但这个问题的答案与[Scraping dynamic generated html inside Android app](https://stackoverflow.com/questions/11093130/scraping-dynamically-generated-html-inside-android-app)的答案相同。

简而言之，您应该将“下载和解析”部分卸载到远程 Web 服务。有关讨论，请参阅[Android 中的 Web Scraping](http://www.subtorioussound.com/1/post/2012/07/bobik-web-scraping-from-android.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T13:22:36.103

我遇到了同样的问题：

我的 HTC One S 上的 Logcat 清楚地显示连接响应只需要前 4 秒（3 个并行连接）。解析几乎需要 30-40 秒，这是一个巨大的时间.. 请注意，HTC One S 具有非常快的双核 @ 1,4ghz .. 问题显然与模拟器无关

> ```
> 02-27 14:11:55.278: DEBUG/MyActivity(10735): =c>
> 02-27 14:11:55.278: DEBUG/MyActivity(10735): =c>
> 02-27 14:11:55.278: DEBUG/MyActivity(10735): =c>
> 02-27 14:11:59.002: DEBUG/MyActivity(10735): <r=
> 02-27 14:11:59.012: DEBUG/MyActivity(10735): <r=
> 02-27 14:11:59.422: DEBUG/MyActivity(10735): <r=
> 02-27 14:12:33.949: DEBUG/MyActivity(10735): <d=
> 02-27 14:12:37.463: DEBUG/MyActivity(10735): <d=
> 02-27 14:12:38.294: DEBUG/MyActivity(10735): <d= 
> ```

这是我的代码：

```
// Jsoup-Connection
Connection c = Jsoup.connect(urls[0]);
// Request timeout in ms
c.timeout(5000);
Connection.Response r = c.execute();
Log.d("MyActivity","<r= doInBackground ("+urls[0]+")");

// Get the actual Document
Document doc = r.parse();
Log.d("MyActivity","<d= doInBackground ("+urls[0]+")"); 
```

**更新：**

```
02-27 20:38:25.649: INFO/MyActivity(18253): !=c> 
02-27 20:38:27.511: INFO/MyActivity(18253): !<r= 
02-27 20:38:28.873: INFO/MyActivity(18253): !#d= 
```

我得到了一些新的结果 .. 以前的结果是在 android 上运行我的应用程序作为**调试**.. 现在发布的结果是在没有调试模式的情况下运行（来自 IntelliJ IDE）.. 有什么解释为什么调试会使 Jsoup 这么慢？

在我的 i5-Desktop-Machine 上运行调试，我没有受到性能惩罚。

我的代码在 Android 上这么慢的罪魁祸首绝对是**调试模式**模式 .. 它使 jsoup 减慢了 100 倍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T06:49:36.550

您能否更好地识别您想要获取的内容，因为只有一个原因会减慢代码的执行速度

```
select("img[src*=/alt2/]") 
```

您想要获得的图像是否有任何共同的“类”？

# appfabric - 无法连接到 AppFabric 缓存服务器

> ID：10291768
> 
> 赞同：3
> 
> 时间：2012-04-24T04:31:57.873
> 
> 标签：appfabric

我已经设置了一个 appfabric(v1.1) 缓存服务器。该服务在服务帐户下运行，并且集群配置存储在 SQL Server 中。服务帐户对 sql server 具有权限并且能够成功配置。

使用服务帐户用户打开管理控制台时，可以访问缓存。

**但问题是当我试图从另一台机器连接到这个缓存服务时，它无法连接。**

```
ErrorCode<ERRCA0017>:SubStatus<ES0006>:There is a temporary failure. Please retry later 
```

当我尝试在“NetWorkService”帐户中运行的文件共享和服务中使用 xml 配置时，我能够连接。

在缓存服务器上验证以下设置。

*   服务已启动并在端口 22233 上运行。
*   防火墙已关闭。
*   客户端计算机被授予访问缓存集群的权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:12:35.053

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T02:28:36.357

其他人看看这个：http: [//blogs.msdn.com/b/appfabriccat/archive/2010/11/03/appfabric-cache-cache-servers-and-cache-clients-on-different-domains.aspx](http://blogs.msdn.com/b/appfabriccat/archive/2010/11/03/appfabric-cache-cache-servers-and-cache-clients-on-different-domains.aspx)

让我很头疼。

基本上必须使用 IP 地址和我的 AppFabric 服务器的实际服务器名称来更新我的主机文件。

这解决了我遇到的错误

# javascript - 在 python mechanize for javascript 中提交请求

> ID：10291772
> 
> 赞同：1
> 
> 时间：2012-04-24T04:32:49.923
> 
> 标签：javascript, python, mechanize

我正在使用页面
[http://index.cepd.gov.tw/inQuery.aspx?lang=2&type=it02](http://index.cepd.gov.tw/inQuery.aspx?lang=2&type=it02)

在这个页面中，我使用 python mechanize 提交值。
但是，当我提交它时，它给了我相同的网址。
我想要提交后下一页的网址。

是因为javascript吗？
有什么方法可以使用 javascript 来获取下一个 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:45:20.490

如果在提交后你得到相同的页面，我假设 javascript 在验证后设置了一些隐藏字段。

尝试在浏览器中停止 javascript 执行并提交表单（从浏览器）。如果它不起作用，那么机械化就不够了（因为它不支持 javascript 执行），您将需要一些浏览器自动化工具。

# excel - vba 是否关心自动过滤器？

> ID：10291774
> 
> 赞同：4
> 
> 时间：2012-04-24T04:33:00.727
> 
> 标签：excel, vba

如果我在输入表上应用自动过滤器，然后运行 ​​VBA 代码，则代码不关心自动过滤器。

*但是*，有时在自动过滤的工作表上运行 VBA 代码会弄乱程序的结果。

*所以，*我的问题是；VBA 关心自动过滤器吗？

例如：

```
Sub check()
    Dim rng as range
    Set rng = Sheets("input").Range("A1")
    row = 0
    Do until rng.offset(row,0) = ""
        row = row + 1
    Loop
End Sub 
```

在上面的代码中，VBA 并不关心是否在 A 列上应用了自动过滤器，它仍然会遍历所有行。*但是，*如果我尝试在有自动过滤器的单元格上书写*，*它就会搞砸。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T06:51:11.590

VBA 不关心自动过滤器，除非您“告诉它”或尝试执行可能受自动过滤器影响的操作。

您**上面的**代码将适用于任何工作表，而不仅仅是“输入”工作表。

这是另一种效果很好的方法（实际上我一直都在使用它）

```
'~~> Remove any filters
ActiveSheet.AutoFilterMode = False

'~~> Filter, offset(to exclude headers) and delete visible rows   
With rRange 
  .AutoFilter Field:=1, Criteria1:=strCriteria
  .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Delete
End With

'~~> Remove any filters
ActiveSheet.AutoFilterMode = False 
```

这是一个不起作用的场景。

图表不显示自动过滤器过滤的数据。但是图表也没有显示隐藏行中存在的数据。**这适用于在图表中显示数据的 VBA 和非 VBA 方法**。

> > > 但是如果我尝试在应用了自动过滤器的特定单元格上写，它就会搞砸。

这取决于您编写它的方式和位置。

**这很好用**。请注意，在下面的代码中，行已被过滤并且不可见。但是，我们仍然可以写入它。

```
Option Explicit

Sub Sample()
    Dim rng As Range

    Set rng = Sheets("Sheet1").Range("A1")

    rng.AutoFilter Field:=1, Criteria1:="<>1", Operator:=xlAnd

    rng.Offset(1, 0).Value = "Sidd"
End Sub 
```

![在此处输入图像描述](../Images/d57f0da05ffb24456036172f93a9fdd4.png)

现在让我们来看另一个案例。**这行不通**。假设您有一个 A2 到 A10 的范围（A1 有 Header），它具有从 1 到 3 的各种值。现在您想用 1000 替换 A2:A10 中的所有值。如果出现此代码，则此代码不会给您预期的输出有一个自动过滤器。它不会改变所有的细胞。

```
Option Explicit

Sub Sample()
    Dim rng As Range

    Set rng = Sheets("Sheet1").Range("A1:A10")

    rng.AutoFilter Field:=1, Criteria1:="<>1", Operator:=xlAnd

    rng.Value = "1000"
End Sub 
```

为什么它会忽略具有“1”的单元格（即被过滤掉的行）并写入其余行？实际上它也与标题混淆了？？？

![在此处输入图像描述](../Images/cc1fa9a541fa14f4d3c606b4a376125c.png)

这很简单。拥有 Autofilter 的想法是根据我们的要求获取相关数据（目前它是 <> 1 的数据）。当您写入该范围`rng`时，它将写入该范围内所有可见的单元格（包括具有标题的单元格）。

那么在这种情况下我们该怎么办呢？

**你有两个选择**

**1)**移除自动过滤器 - 执行必要的操作 - 将过滤器放回原处

```
Sub Sample()
    Dim rng As Range

    Set rng = Sheets("Sheet1").Range("A1:A10")

    '~~> Put Filter
    rng.AutoFilter Field:=1, Criteria1:="<>1", Operator:=xlAnd

    '~~> Remove Filter
    ActiveSheet.AutoFilterMode = False

    '~~> Write value to the cells (See how we ignore the header)
    Sheets("Sheet1").Range("A2:A10").Value = "1000"

    '~~> Put Filter back
    rng.AutoFilter Field:=1, Criteria1:="<>1", Operator:=xlAnd
End Sub 
```

**2）**像您在问题中所做的那样循环范围

```
Sub Sample()
    Dim rng As Range, cl As Range

    Set rng = Sheets("Sheet2").Range("A1:A10")

    rng.AutoFilter Field:=1, Criteria1:="<>1", Operator:=xlAnd

    For Each cl In rng
        '~~> Ignoring the Header
        If cl.Row <> 1 then _
        cl.Value = "1000"
    Next
End Sub 
```

当您运行上述代码时，它会写入除标题之外的所有单元格。

我建议您阅读 Excel 的内置帮助，以了解自动筛选器的实际工作原理。这将帮助您了解它们，进而帮助您处理已打开自动过滤器的工作表。

高温高压

# google-app-engine - 日志显示 CPU 使用率和总成本 - 这与数据存储操作成本有何关系？

> ID：10291778
> 
> 赞同：0
> 
> 时间：2012-04-24T04:33:33.690
> 
> 标签：google-app-engine, google-cloud-datastore

日志告诉我某个请求的成本是多少

api_cpu_ms=278 cpm_usd=0.009244

使用新的计费模型，这个成本是否仍然准确？

我可以推断出请求使用的数据存储操作的数量吗？

有没有办法知道在单个请求期间使用的读取、写入和小型数据存储操作的确切数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:39:03.717

大约 2 个月前有人告诉我，它们不反映新的计费模式，而且我没有看到任何迹象表明它们已被修复以反映新的计费模式。

您可以通过在应用程序中启用 Appstats 来获取每个请求的操作数。

# jquery - last-child() 和 :after 不在 IE 8 中工作

> ID：10291782
> 
> 赞同：2
> 
> 时间：2012-04-24T04:34:03.160
> 
> 标签：jquery, css

您好朋友以下是我的代码

**HTML**

```
<ul class="menu-item">
    <li>item</li>
    <li>item</li>
    <li>item</li>
</ul> 
```

**CSS**

```
.clear-right{
color:red;
}
.menu-item:last-child{
    color:red;}
.menu-item:last-child:after
    {
content:'hi';
} 
```

我的代码在所有浏览器中都可以正常工作，但不能在 IE m 中尝试使用 jquery 做同样的事情

```
$(".menu-item li:last-child:after").css('content','"hi"'); 
```

你可以[在这里查看演示，](http://jsfiddle.net/PBAas/59/) 但它也不起作用，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T04:38:57.257

`:after`并且`:before`是伪元素，之后无法对其进行操作。所以你不能这样做。

另一个可能的选择器是这个

```
$(".menu-item li").last().css('content', 'hi'); 
```

* * *

***解决它的一个技巧是。***

使用您需要的 CSS 创建一个类

```
.newClass {}
.newClass:after { content: 'hi'; } 
```

现在使用 jQuery 切换它们。

```
$(".menu-item li").last().addClass("newClass"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T04:36:04.820

您不能`:after`在 jQuery 中使用伪选择器，因为该元素实际上并不存在于 DOM 中。它在您的示例中有效，因为它是在 CSS 中设置的，如果您删除该规则，它将不再有效。IE 的问题是伪选择器不完全受支持且存在缺陷。

# matrix - 如何将格式良好的矩阵作为表格导出到 MS Word？

> ID：10291785
> 
> 赞同：0
> 
> 时间：2012-04-24T04:34:50.433
> 
> 标签：matrix, formatting, stata

在 Stata 中，可以使用 outreg 将格式良好的回归结果导出到 MS Word 文档。我需要对矩阵做同样的事情。任何人都可以帮忙吗？有一些插件，例如 mat2txt、tabout 和 xml_tab，但我无法让它们完成简单的工作，即导出矩阵以使用标题以及列名和行名进行 Excel。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:49:16.813

我`mat2txt2`将标签、标题等添加到`mat2txt`.

这个问题是重复的（[https://stackoverflow.com/a/9975910/496475](https://stackoverflow.com/a/9975910/496475)）

# python - 在 Python 中包含外部文件

> ID：10291787
> 
> 赞同：1
> 
> 时间：2012-04-24T04:35:02.513
> 
> 标签：python, import, python-module

我正在编写一个运行一些模拟的 Python 脚本，但它需要很多输入参数（大约 20 个）。所以我正在考虑将所有模拟参数包含在一个外部文件中。最简单的方法是什么？

我找到的一个答案是在 Stack Overflow 问题*[How to import a module given the full path?](https://stackoverflow.com/questions/67631/how-to-import-a-module-given-the-full-path)* ，将所有模拟参数放在文件 parm.py 中，并使用 imp 包导入该模块。

这将允许运行此脚本的用户提供任何文件作为输入。如果我以这种方式导入模块：

```
parm = imp.load_source('parm', '/path/to/parm.py') 
```

那么所有参数都必须被引用为

```
parm.p1, parm.p2 
```

但是，我只想在我的脚本中将它们称为 p1、p2 等。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T05:26:21.083

从外部文件导入任意代码是个坏主意。

请将您的参数放在配置文件中，并使用 Python 的[**`ConfigParser`**](http://docs.python.org/library/configparser.html)模块将其读入。

例如：

```
==> multipliers.ini <==
[parameters]
p1=3
p2=4

==> multipliers.py <==
#!/usr/bin/env python

import ConfigParser

config = ConfigParser.SafeConfigParser()
config.read('multipliers.ini')

p1 = config.getint('parameters', 'p1')
p2 = config.getint('parameters', 'p2')

print p1 * p2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T04:49:52.773

您可以使用[`execfile()`](http://docs.python.org/library/functions.html#execfile)它，但您应该完全考虑另一种方式。

# php - php - 将密码与 root 密码进 行比较

> ID：10291788
> 
> 赞同：0
> 
> 时间：2012-04-24T04:35:02.773
> 
> 标签：php, mysql, passwords, comparison

希望这很简单。如果用户能够提供“root”密码，我正在尝试授予用户管理权限。有没有办法将这个新输入的密码与 root 密码进​​行比较？这是我的代码到目前为止的样子：

```
<form action='index.php?login=yes' method=POST>
Password: <input type=password name='pwd'><br />
<input type=submit value='Login' />
</form> 

<?php

    $pass=$_POST['pwd'];
    $login=$_GET['Login'];

    if($login=='yes') {

        $con=mysql_connect('localhost','root','');
        mysql_select_db('Login');

        $get=mysql_query("SELECT count(id) FROM Login WHERE pwd = '$pass'");
        $result=mysql_result($get, 0);

        mysql_close($con);

        if($result!=1)
            echo"Login Failure!";
        else {
            echo"Login Success";
        };  
    };
?>
</p> 
```

请温柔一点，因为 PHP 与我习惯的有很大不同（我更喜欢 java）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:06:56.740

您绝对应该考虑使用盐对密码进行哈希处理。md5() 算法并不真正推荐用于安全环境，但它至少确实使工作变得更加困难。

将密码保存在数据库中时，您应该执行以下操作

> $salt = 'dhg1d9h12h1029he01h2e1'; // 只是在这里有一些随机和长的东西
> $hashedpassword = md5($salt.md5($password, true)); // 或者你喜欢的任何其他组合

然后，您可以像这样将 $hashedpassword 保存到数据库中：

```
mysql_query(sprintf("UPDATE Login SET pwd = '%s' WHERE username = '%s'",  
    mysql_real_escape_string($hashedpassword),  
    mysql_real_escape_string($username)
)); 
```

然后，当您要检查密码是否匹配时，请执行与上述完全相同的步骤来计算 $hashedpassword 值，但传入他们的测试密码，然后将其与数据库中的密码进行比较，例如：

```
$result = mysql_query(sprintf("SELECT (pwd = '%s') AS authenticated FROM Login WHERE username = '%s'",
    mysql_real_escape_string($hashedpassword),
    mysql_real_escape_string($username)
));
$row = mysql_fetch_assoc($result);
if ($row['authenticated']) {
    echo "Success!";
} 
```

Aaaanyway，你看起来你才刚刚开始，所以我会非常小心你如何进行实际的密码验证。据我了解，bcrypt2 是您想要使用的而不是 md5，但我会让您继续阅读如何在 PHP 中做到这一点；你绝对应该阅读这些东西。

我还会检查您的登录表的结构。您可能需要多个用户，否则为什么不将哈希存储在代码本身而不是数据库中？

此外，您可以通过检查 $_SERVER['REQUEST_METHOD'] == 'POST' 来确定某人是否正在提交表单或获取表单，这比使用获取 URL 参数更干净（尽管我猜另一个没有问题方法...）

# heroku - Rails 3.2 的长轮询

> ID：10291789
> 
> 赞同：3
> 
> 时间：2012-04-24T04:35:11.607
> 
> 标签：heroku, ruby-on-rails-3.2, long-polling, cedar

我有一个载波上传，需要花费大量时间来处理，但需要先完成，然后用户才能继续浏览器中的下一个操作。我在前端使用 Ajax 文件上传，因此应用程序 UI 会提供上传和处理的进度更新。这在我的开发环境中运行良好，因为我的开发服务器上的超时时间相对较长，但在 Heroku 上不太好，因为如果没有发送响应，Cedar 会在 30 秒后超时请求。我一直在尝试创建一个流式响应，它每隔几秒钟发送一个空间，直到通过创建一个响应对象来响应每个响应对象完成该过程：

```
class LongPoller
  def initialize(yield_every=2,task)
    @yield_every = yield_every
    @task = task
  end

  def each
    t = Thread.new(&@task)
    while t.alive?
      sleep @yield_every
      yield ' '
    end
    yield t.value.to_json
  end
end 
```

但这并没有按预期工作，因为 Thin 似乎正在对响应进行批处理，而不是将它们发送回客户端。

任何人有任何想法我怎样才能让它工作？

# android - 如何在我的应用程序库中存储内置相机图像？

> ID：10291790
> 
> 赞同：1
> 
> 时间：2012-04-24T04:35:23.767
> 
> 标签：android, gallery

如何在我的应用程序库中存储内置相机图像？

我的应用程序中有一个画廊，我想将从内置相机拍摄的图像存储到我的画廊中。

是否可以将图像存储到我们自己的画廊？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:47:10.613

是的，从内置相机存储图像的位置获取图像。从该路径您可以将图像放入您的图库应用程序。一般路径是 sdcard/DCIM/camera

# .net - .NET 中的 SPI/ServiceProvider？（轻量级 IoC）

> ID：10291792
> 
> 赞同：1
> 
> 时间：2012-04-24T04:35:31.663
> 
> 标签：.net, dependency-injection, inversion-of-control, service-provider

是否类似于 Java 的[java.util.ServiceLoader](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)，它允许通过 SPI 动态查找和加载组件？

我正在寻找 .NET 的一些轻量级本机功能，它允许我轻松插入接口提供程序，而不是笨重的 DI 容器或必须自己编写它。

**更新**：这在 .NET 上似乎并不容易获得，因为没有像 Java 那样本机内置的 SPI 功能。我接受了第一个答案，因为它最接近我所追求的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T04:38:39.677

有一个本机 IServiceProvider[接口](http://msdn.microsoft.com/en-us/library/system.iserviceprovider.aspx)。

也就是说，有大量非常丰富的 IoC 容器可用于 .NET

*   温莎城堡
*   统一
*   AutoFac
*   N注入

仅举几例。其中许多都很轻巧。它们还提供高级特性，例如对象生命周期管理（单例、每线程等）和 AOP（面向方面​​编程）特性。

也就是说，如果您真的想要轻量级且没有依赖项，您可以在大约 30 行[代码](http://timross.wordpress.com/2010/01/21/creating-a-simple-ioc-container/)中自行开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:30:39.430

正如@JeffN825 所说，这些不是.NET 的本机容器。

也就是说，你说的笨重是什么意思？也许你提到了服务定位器模式的主要缺点：你到处都有对容器的引用，而且它非常具有侵入性。

借助[Composition Root 模式](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)，您可以将容器的使用转移到应用程序中的一个位置，从而减少使用容器的影响。这样您就可以消除“批量”：您配置一次，使用一次，然后就忘记它。

* * *

**更新**

回答您的意见：许多 IoC 容器具有某种可能满足您需求的自动注册功能。例如，这里是[相关结构图文档页面](http://docs.structuremap.net/ScanningAssemblies.htm)的链接。

然后，您可以让您的 IoC 容器选择具有不同实现配置的不同程序集 - 即存根而不是实际实现。

# php - 多个 headScript() 输出

> ID：10291793
> 
> 赞同：1
> 
> 时间：2012-04-24T04:35:58.860
> 
> 标签：php, zend-framework

是否可以拥有多个

```
<?php echo $this->headScript(); ?> 
```

在一个视图中？

喜欢

```
<?php $this->headScript()->appendFile('foo.js'); ?>
<?php echo $this->headScript(); ?>

some other html here

<?php $this->headScript()->appendFile('bar.js'); ?>
<?php echo $this->headScript(); ?> 
```

目前它重复`foo.js`了，那么有没有办法清洁`headScript`容器？

**更新**：

确切的问题是我对工作方式不满意`<?php $this->headScript()->captureStart(); ?>`。因为我不能`<script type="...">`在那里指定，所以我的 IDE 不会将和之间的代码`captureStart`视为`captureEnd`javascript。

所以我想将输出分成两部分，`<script type="text/javascript">`在它们之间

PS：我知道最好将js移动到单独的文件中，但是在这个特殊的地方我需要它被内联指定

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:51:50.633

可能是我错过了smth，为什么你不能使用`setFile` 呢`appendFile`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T14:50:46.813

问题是多个 .js 部分的分离。这是完全可行的，因为 headlink、headscript 等的 viewhelper 实现了 ArrayAccess 接口。

这就是我的做法 - 使用 ZF2 Bootstrap（来自 Skeleton 以保持一致）：

```
<!-- allows for comments as well, within diff. .js script tag outputs -->
<?php
$this->headScript()
    ->prependFile($this->basePath() . '/js/bootstrap.min.js')
    ->prependFile($this->basePath() . '/js/jquery.min.js')
    ->prependFile($this->basePath() . '/js/respond.min.js', 'text/javascript', array('conditional' => 'lt IE 9',))
    ->prependFile($this->basePath() . '/js/html5shiv.js',   'text/javascript', array('conditional' => 'lt IE 9',));

// Notice! below we'll echo out what we have in the headScript placeholder object
echo $this->headScript();

// Now, since it implements ArrayAccess interface, we can use exchangeArray() method
// to clear out (if you will) the stored array of .js files we've previously assigned
$this->headScript()->exchangeArray(array());
?>

<!-- Some other js file(s) I have to include -->
<?php 
$this->headScript()
     ->appendFile($this->basePath() . '/js/scripts.js', 'text/javascript');

// same as above for consistency
echo $this->headScript();
$this->headScript()->exchangeArray(array());
?> 
```

这应该有很大帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T04:49:36.193

The way this usually works is `<?php echo $this->headScript(); ?>` is in your layout. It will echo out all the scripts you assign it by calling headScript() once. I usually have a few scripts in my Boostrap, like jquery or modernizer.

```
//BootStrap.php
protected function _initView() {
        //Initialize view
        $view = new Zend_View();

        $view->doctype(Zend_Registry::get('config')->resources->view->doctype);

        $view->headMeta()->appendHttpEquiv('Content-Type', Zend_Registry::get(
                        'config')->resources->view->contentType);
        $view->headLink()->setStylesheet('/css/normalize.css');
        $view->headLink()->appendStylesheet('/css/blueprint/src/liquid.css');
        $view->headLink()->appendStylesheet('/css/blueprint/src/typography.css');
        $view->headLink()->appendStylesheet(
                '/javascript/mediaelement/build/mediaelementplayer.css');
        $view->headLink()->appendStylesheet('/css/main.css');
        $view->headLink()->appendStylesheet('/css/nav.css');
        $view->headLink()->appendStylesheet('/css/table.css');

        //add javascript files
        $view->headScript()->setFile('/javascript/mediaelement/build/jquery.js');
        $view->headScript()->appendFile('/javascript/modernizr.js');

        //add it to the view renderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
                        'ViewRenderer');
        $viewRenderer->setView($view);
        //Return it, so that it can be stored by the bootstrap
        return $view;
    } 
```

If I need to add scripts later it's just a matter of passing them in the controller usually in preDispatch() :

```
public function preDispatch() {

        if ($this->getRequest()->getActionName() == 'play') {
            $this->_helper->layout->setLayout('play');
            $this->view->headScript()->appendFile(
                    'http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js'
                    );
            $this->view->headScript()->appendFile(
                    '/javascript/mediaplayer/jwplayer.js'
                    );
        }
    } 
```

One call to `<?php echo $this->headScript(); ?>` will echo out all 4 of these script files.
The same kind of thing can be done with inline scripts using the inlineScript() helper. The inlineScript() helper is the one you use if you need javascript somewhere other then the head of you file.

# javascript - 如何访问同一 iframe 中的元素？

> ID：10291799
> 
> 赞同：0
> 
> 时间：2012-04-24T04:36:32.050
> 
> 标签：javascript, jquery, html, dom, iframe

我想访问同一个 iframe 中的元素（它们甚至在同一个用户控件中），但我知道的唯一方法是：

```
<div>
...
    <asp:Button CssClass="enoPlaceOrderButton enoHidden" runat="server" ID="SubmitButton" OnClick="SubmitButton_OnClick" Text="" />

<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery("body").bind("checkout.onStepChanged", function (event, data) {
        if (data.currentStep == "PaymentStep") {
            var temp = jQuery("#paymentMethodsFrame").contents().find('#<%=SubmitButton.ClientID %>');
        }
    });
});
</script>
</div> 
```

这是在 paymentMethodsFrame 中。

有一个更好的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:39:45.293

你不能用

```
jQuery('#SubmitButton'); 
```

# objective-c - 从数组和数据库中删除行

> ID：10291802
> 
> 赞同：2
> 
> 时间：2012-04-24T04:37:18.443
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我开发了一个应用程序，在该应用程序中我需要从数组和数据库中删除行......？在**cellForRowAtIndexPath**中，我写得像**cell.textLabel.Text=[myarray.objectAtIndexPath.row];** 我也想从数据库和数组中删除该行。在编辑方法中，我编写如下代码

```
MoneyAppDelegate *mydelegate=(MoneyAppDelegate *)[[UIApplication sharedApplication]delegate];

if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
        database *objdata=[[database alloc]init];
        [app deleteCategory:objdata];        
        [self.mytableview deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
} 
```

但它不起作用。在 deletecategory 方法中，我有类似的代码

```
-(void)deleteCategory:(database *)databaseObj
{
[databaseObj deleteCategory];
 [myarray removeObject:databaseObj];
} 
```

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

MoneyAppDelegate *app = (MoneyAppDelegate *)[[UIApplication sharedApplication]delegate];

静态 NSString *CellIdentifier = @"Cell";

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
}

  cell.textLabel.text = [app.myarray4 objectAtIndex:indexPath.row];

return cell;} 
```

deletecategory 是从 Database.nothing 中删除记录的方法。我如何从数据库中删除选定的行我知道它很简单但我很困惑..thnanx 提前:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:42:06.593

试试这样-

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
 return UITableViewCellEditingStyleDelete;
}

-(void) tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
[self delBtnPressed:indexPath.row];
} 
```

//在这里你放置你的代码-

```
-(void)delBtnPressed:(int)sender
 {  
NSString *titleStr=@"";
    NSString *table=@"";
NSString *attribute=@"";

sqlite3 *database;

if(![titleStr isEqualToString:@""])
{
    //-------------------------------deletion-------------------------  

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) 
    {

        NSString *  sqlStatement = [NSString stringWithFormat:@"delete from %@ where %@='%@' ",table,attribute,titleStr];

        if (sqlite3_exec(database, [sqlStatement cStringUsingEncoding:NSUTF8StringEncoding], NULL, NULL, NULL)  == SQLITE_OK)
        {

            [yourArr removeAllObjects];
            [self fetchAgain]; //here you need to fetch all records from DB and fill the yourArr again.
            [tblView reloadData];

        }
        sqlite3_close(database);

    }

}
else 
{
    NSLog(@"Error while deleting please try again");
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:24:47.090

检查这条线..

```
database *objdata=[[database alloc]init];
[app deleteCategory:objdata]; 
```

在第一行中，您只是为“”创建一个对象`database`作为“ `objdata`”并分配它。在这个地方，“”中将没有任何内容`objdata`。因此，当您将其传递给`deleteCategory`: 方法时，数据库中不会删除任何内容。所以这里有一个问题。

试试这个：

```
 database *objdata=[[database alloc]init];
 objdata = [myarray.objectAtIndexPath.row];
[app deleteCategory:objdata]; 
```

# audio - 单个 MIDI 轨道可以同时播放多个音符吗？

> ID：10291803
> 
> 赞同：2
> 
> 时间：2012-04-24T04:37:23.860
> 
> 标签：audio, midi

我正在编写自己的 MIDI 解析器，一切似乎都很顺利。

我正在测试我在野外看到的一些文件。我注意到一个 MIDI 轨道似乎永远不会同时有一个以上的音符（产生一个以上的音调）。这是设计使然吗，midi 音轨是否可以同时播放一个以上的音符？

（我不是指同时音轨的数量，我指的是单个音轨中的音调数量。）

我测试过的midi文件如下所示：

ON_NOTE71:ON_NOTE75:ON_NOTE79 ON_NOTE71:OFF_NOTE71:ON_NOTE75:OFF_NOTE75:ON_NOTE79:OFF_NOTE79

可以这样看吗？

ON_NOTE71:ON_NOTE73:OFF_NOTE73:OFF_NOTE71

如何检测这种替代结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:31:06.533

是的。一次演奏多个音符称为复音。不同的 MIDI 规范定义了对不同级别复音的支持。

见[http://www.midi.org/techspecs/gm.php](http://www.midi.org/techspecs/gm.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:40:32.447

一次可以播放的音符数量是硬件实现细节。您的软件应该允许同时播放任意数量的音符。我建议保留一张当前打开的音符的表格，以便在播放停止时为每个音符发送一个音符。理想情况下，表格应该对每个音符进行计数，当音符打开时增加，当音符关闭时减少。这样，如果某个音高有两个未决事件的音符，您可以发送两个音符关闭事件。您无法知道与之通信的设备将如何处理相同音高的连续音符事件，因此发送相同数量的音符关闭事件是最安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:26:09.150

是的。控制器和软件都可以产生这样的事件。

# asp.net - WCF 如何作为数据源工作？

> ID：10291808
> 
> 赞同：2
> 
> 时间：2012-04-24T04:38:08.010
> 
> 标签：asp.net, wcf, wcf-data-services, objectdatasource

作为标题，分页 wcf 如何作为数据源工作？Dataservicequery 有 setentitysetpagesize，select 的记录是有限的。在这种情况下，它应该如何作为数据源工作。如果将其绑定到web控件，查询所有记录时总记录会出错，并且分页也有分页。由于这个原因，我要疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:00:57.737

您需要使用泛型类作为返回类型并使这些类可序列化，然后在前端使用 Object 数据源。我确信它有效。

喜欢：Bizz 层作为 WCF 服务

```
 public List<Employee> GetEmployees()
        {

            try
            {

                List<Employee> emp = new List<Employee>();
                emp.Add(new Employee { Code = 1, DepartMentCode = 2, FatherName = "FatherName", ManagerCode = 2,  Name = "Bilal",ManagerName="mnagername", PhoneNumber = "24421" });
            return emp;
        }

        catch (TimeoutException te)
        {
            throw te;
        }
        catch (FaultException fe)
        {
            throw new FaultException();
        }
        catch (CommunicationException ce)
        {
            throw new CommunicationException();
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            if (client != null)
            {
                client.Close();
            }
        }
    } 
```

//实体类

```
 [Serializable()]
  [DataContract()]
  public class Employee
  {
    [DataMember]
    public int Code { get; set; }
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string FatherName { get; set; }
    [DataMember]
    public string PhoneNumber { get; set; }
    [DataMember]
    public int DepartMentCode { get; set; }
    [DataMember]
    public int ManagerCode { get; set; }
    [DataMember]
    public string ManagerName { get; set; }
} 
```

//这是页面级代码。我希望你能理解这一点。

```
 <div class="EmployeeMain">
    <div class="link" onclick="Show_Popup();">
        New Employee</div>
    <fieldset>
        <legend>Employees Details </legend>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="ODSEmployee"
            OnRowEditing="GridView1_RowEditing" BackColor="LightGoldenrodYellow" BorderColor="Tan"
            BorderWidth="1px" CellPadding="2" ForeColor="Black" GridLines="None" Width="100%"
            AllowPaging="True">
            <AlternatingRowStyle BackColor="PaleGoldenrod" />
            <Columns>
                <asp:BoundField FooterText="EmployeeID" DataField="Code" HeaderText="EmployeeID" />
                <asp:BoundField FooterText="Name" DataField="Name" HeaderText="Name" />
                <asp:BoundField FooterText="Father Name" DataField="FatherName" HeaderText="Father Name" />
                <asp:BoundField FooterText="Phone Number" DataField="PhoneNumber" HeaderText="Phone Number" />
                <asp:TemplateField FooterText="manager" HeaderText="Manager">
                    <ItemTemplate>
                        <asp:Label ID="lblMangerName" Text='<%# Eval("ManagerName") %>' runat="server"></asp:Label>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:DropDownList ID="ddlManager" runat="server" DataSourceID="ManagersDataSource"
                            DataTextField="ManagerName" DataValueField="ManagerCode" SelectedValue='<%# Bind("ManagerCode") %>'
                            AppendDataBoundItems="True">
                        </asp:DropDownList>
                        <asp:ObjectDataSource runat="server" ID="ManagersDataSource" SelectMethod="GetManagers"
                            TypeName="mytest.WebApplication.BizzLayerService.EmployeeClient"></asp:ObjectDataSource>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" ShowSelectButton="True" />
            </Columns>
            <FooterStyle BackColor="Tan" />
            <HeaderStyle BackColor="Tan" Font-Bold="True" />
            <PagerStyle BackColor="PaleGoldenrod" ForeColor="DarkSlateBlue" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="DarkSlateBlue" ForeColor="GhostWhite" />
            <SortedAscendingCellStyle BackColor="#FAFAE7" />
            <SortedAscendingHeaderStyle BackColor="#DAC09E" />
            <SortedDescendingCellStyle BackColor="#E1DB9C" />
            <SortedDescendingHeaderStyle BackColor="#C2A47B" />
        </asp:GridView>
        <asp:ObjectDataSource ID="ODSEmployee" runat="server" DeleteMethod="DeleteEmployeeRecord"
            InsertMethod="SaveEmployeeRecord" SelectMethod="GetEmployees" TypeName="mytest.WebApplication.BizzLayerService.EmployeeClient"
            UpdateMethod="UpdateEmployeeRecord">
            <DeleteParameters>
                <asp:Parameter Name="empCode" Type="Int32" />
            </DeleteParameters>
            <InsertParameters>
                <asp:Parameter Name="empCode" Type="Int32" />
                <asp:Parameter Name="empName" Type="String" />
                <asp:Parameter Name="empFatherName" Type="String" />
                <asp:Parameter Name="empPhoneNumber" Type="String" />
                <asp:Parameter Name="empAddress" Type="String" />
                <asp:Parameter Name="empDeparmentCode" Type="Int32" />
                <asp:Parameter Name="EmpManagerCode" Type="Int32" />
            </InsertParameters>
            <UpdateParameters>
                <asp:Parameter Name="empCode" Type="Int32" />
                <asp:Parameter Name="empName" Type="String" />
                <asp:Parameter Name="empFatherName" Type="String" />
                <asp:Parameter Name="empPhoneNumber" Type="String" />
                <asp:Parameter Name="empAddress" Type="String" />
                <asp:Parameter Name="empDeparmentCode" Type="Int32" />
                <asp:Parameter Name="EmpManagerCode" Type="Int32" />
            </UpdateParameters>
        </asp:ObjectDataSource>
        <br />
    </fieldset>
</div>
<div class="newAcount">
    <table>
    <tr>
    <td colspan="2">
    <h1>New Employee Record</h1>
    </td>
    </tr>
        <tr>
            <td>
                Name
            </td>
            <td>
                <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td>
                Father Name
            </td>
            <td>
                <asp:TextBox ID="txtFathername" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td>
                Phone Number
            </td>
            <td>
                <asp:TextBox ID="txtPhonuNumber" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td>
                Address
            </td>
            <td>
                <asp:TextBox ID="txtAddress" runat="server"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td>
                Department code
            </td>
            <td>
                <asp:DropDownList ID="ddlDeptCode" runat="server">
                </asp:DropDownList>

            </td>
        </tr>
        <tr>
            <td>
                Manager Code
            </td>
            <td>
              <asp:DropDownList ID="ddlManagerName" runat="server">
                </asp:DropDownList>

            </td>
        </tr>
        <tr>
            <td>
                <asp:Button ID="btnSaveRecord" runat="server" Text="Button" />
            </td>
            <td>
                <input id="Button1" type="button" value="close" onclick="Close_Popup()" />
            </td>
        </tr>
    </table>
</div> 
```

# php - 如何在while循环中回显没有结果的日子？

> ID：10291809
> 
> 赞同：0
> 
> 时间：2012-04-24T04:38:23.670
> 
> 标签：php, mysql

我想计算每天的帖子数量以创建图表。我的问题是，由于 SQL 几天没有找到结果（计数为 0），我缺少图表所需的行（因为我确实想显示没有帖子的日子）。

```
SELECT DATE(Date) AS Day, COUNT(*) AS COUNT 
FROM `Posts` 
GROUP By `Day`
ORDER BY Date DESC

while($row = mysql_fetch_array($result)) {
    echo $row['Date'] . ": " . $row['Count'];
    } 
```

由于循环不显示结果为 0 的天数，因此如果在星期三没有我收到的帖子：`monday-17-3: 5, tuesday-18-3: 2, thursday-20-3: 3`. 相反，我想填写空白，所以我得到类似：`wednesday-19-3: 0`.

如何在循环中回显没有结果的日子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:49:55.843

您可以通过日期表解决此问题，执行[`OUTER JOIN`](http://en.wikipedia.org/wiki/Join_(SQL)#Outer_joins)，然后执行分组。这将为您提供两者之间的日期（免责声明：我假设您的日期格式为 YYYY-MM-DD，否则您可能需要稍微调整 JOIN 语句。）。

```
SELECT A.Date AS Day, COUNT(Posts.Date) AS COUNT 
FROM 
   (
    select curdate() - INTERVAL (a.a + (10 * b.a) + (100 * c.a)) DAY as Date
    from (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as a
    cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as b
    cross join (select 0 as a union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) as c
) A
LEFT OUTER JOIN `Posts` ON A.Date = `Posts`.`Date`
WHERE A.Date >= DATE_ADD(CURDATE(), INTERVAL -15 DAY)
GROUP BY A.Date 
```

对于日期表，我使用以下帖子中的方法：[从日期范围生成天数](https://stackoverflow.com/questions/2157282/generate-days-from-date-range)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:50:59.923

使用循环遍历连续日期，使用如下函数：

```
$date = strtotime(date("Y-m-d", strtotime($date)) . " +1 day"); 
```

对于每个周期，应用您的查询结果。然后你会得到所有的日期。

# entity-framework - 急切加载实体框架导航属性错误

> ID：10291810
> 
> 赞同：2
> 
> 时间：2012-04-24T04:38:31.500
> 
> 标签：entity-framework, navigation, poco, eager-loading

我正在尝试像这样急切地加载一些子实体：

```
_context.Sites.Where(x => x.ID == siteID).Include(s => s.SiteLoggers).FirstOrDefault(); 
```

但是，我得到的错误是：

```
A specified Include path is not valid. The EntityType 'MyProject.Dal.EF.Site' does not declare a navigation property with the name 'SiteLoggers'. 
```

说的是正确的，因为 MyProject.Dal.EF.Site 不存在，该对象存在于 MyProject.Domain.Entities.Site

我错过了什么？？？谢谢！

POCO：

```
namespace MyProject.Domain.Entities
{
    public class Site
    {
        public int ID { get; set; }
        public int LocationID { get; set; }
        public bool Active { get; set; }
        public bool Deleted { get; set; }
        public string Name { get; set; }
        public virtual Location Location { get; set; }
        public virtual IEnumerable<SiteLogger> SiteLoggers { get; set; }
    }
}

namespace MyProject.Domain.Entities
{
    public class SiteLogger
    {
        public int ID { get; set; }
        public int UID { get; set; }
        public int SiteID { get; set; }
        public string Name { get; set; }
        public int LocationID { get; set; }
        public bool Active { get; set; }
        public bool Deleted { get; set; }
        public virtual Site Site { get; set; }
        public virtual Location Location { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T04:42:17.983

您需要使用`ICollection`而不是`IEnumerable`，因为 EF 要求您的导航属性定义为`ICollection<T>.`

```
 public virtual ICollection <SiteLogger> SiteLoggers { get; set; } 
```

# iphone - NSTimer 在设备被锁定时过期

> ID：10291818
> 
> 赞同：1
> 
> 时间：2012-04-24T04:39:20.607
> 
> 标签：iphone, ios, nstimer

我的应用程序支持 GPS，它在前台和后台运行。我已经启动了一个计时器，除非设备被锁定，否则它工作得很好。即使设备被锁定，我也希望计时器继续运行。

谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:36:05.620

无论您以哪种方式启动计时器，默认运行模式如下所示：

```
 Timer *timer = [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(run) userInfo:nil repeats:YES];

     [[ NSRunLoop currentRunLoop ] addTimer:timer forMode:NSDefaultRunLoopMode ]; 
```

使用`NSDefaultRunLoopMode`. 你想要更多的灵活性，所以改变 forMode 来`NSRunLoopCommonModes`代替，你应该没问题。

# php - 在插入时为输入数据添加后缀。这可能吗？(mysql/php)

> ID：10291820
> 
> 赞同：1
> 
> 时间：2012-04-24T04:39:29.420
> 
> 标签：php, mysql, insert

每次在 mySQL 中插入新记录时，我都需要在 reg 数据的末尾添加字母“v”作为后缀。

这是我的插入脚本。当客户端提交此 PHP 操作以插入时，是否可以将字母“v”放置到 reg 数据中？

```
<?
$order = "INSERT INTO reg_add ( 
connect_date, 
reg, 
first_name, 
last_name)

VALUES

('$_POST[connect_date]', 
'$_POST[reg]', 
'$_POST[first_name]', 
'$_POST[last_name]')";

$result = mysql_query($order);

if ($result) {

$reg =      $_REQUEST['reg'] ;
$first_name =   $_REQUEST['first_name'];

header("location: reg_add_success.php?reg=" . urlencode($reg) . "&first_name=" . urlencode($first_name));
}
else {
header("location: reg_add_fail.php");
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T04:45:29.060

你正在做的事情是非常危险的。您基本上是在为恶意用户提供执行 sql 注入所需的一切。

收集您的值，验证它们不包含任何恶意代码，然后执行您的插入（添加了您想要的任何后缀）！

说真的……这是一场注定会发生的灾难。

看看这个： [http ://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T05:16:02.280

首先，只需将 'v' 附加到字符串。

其次，您不应该使用普通的 mysql 库。您需要使用 mysqli（改进的 MySQL）库并使用准备好的语句。

[http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

否则你的代码容易受到 SQL 注入的攻击

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T04:44:56.760

当然可以。`$_POST[reg] .= 'v';`前加就好`$order = "...`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T04:44:58.557

```
$order = "INSERT INTO reg_add ( 
connect_date, 
reg, 
first_name, 
last_name)

VALUES

('$_POST[connect_date]', 
'{$_POST[reg]}v', 
'$_POST[first_name]', 
'$_POST[last_name]')"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T04:47:32.027

```
$reg = stripslashes($_POST['reg']);
$reg = sprintf("%s%s",$reg,'v');

'".mysql_real_escape_string($reg)."', 
```

在将 INSERT 插入 MySQL 期间，每个 VALUE 都必须具有 mysql_real_escape_string() 函数。

# opencl - 为什么在调试 openCL 主机代码时 `clEnqueueReadBuffer` 会中断？

> ID：10291824
> 
> 赞同：1
> 
> 时间：2012-04-24T04:40:05.857
> 
> 标签：opencl, amd-processor

```
__kernel void kmeans_kernel(__global float* data, int points, 
                            __global float* centroids, int clusters, 
                             int dimensions)
{           

    //extern __shared__ float storage_space[];
     __local float storage_space[];

    __local int iterations;
    __local float *means; 
    __local float *index; 
    __local float *mindist;
    __local float *s_data;

    iterations = points / ( get_global_size(0)) + 1;    

    if( get_local_id(0) == 0 ){
        s_data[get_local_id(0)] = data[get_local_id(0)];
        means=&storage_space[0];
        index=&storage_space[get_local_size(0)];
        mindist=&storage_space[2*get_local_size(0)];
    }

    //data = &data[blockDim.x * blockIdx.x + threadIdx.x];
    data = &data[get_global_id(0)];         

    while( iterations )
    {
        mindist[get_local_id(0)] = 3.402823466e+38F;                
        index[get_local_id(0)] = 0;             

        for( short j = 0; j < clusters; j++ )
        {                       
            if( get_local_id(0) <= dimensions )
                //means[get_local_id(0)] = centroids[get_local_id(0)+j*c_pitch];
                means[get_local_id(0)] = centroids[get_local_id(0)+j];
            //__syncthreads();      
            barrier(CLK_LOCAL_MEM_FENCE | CLK_GLOBAL_MEM_FENCE);

            if( !(data[get_local_id(0)] - s_data[get_local_id(0)] > points - 1) )
            {
                float dist = distance_gpu_transpose( means, data, dimensions);
                if( dist < mindist[get_local_id(0)] )
                {
                    mindist[get_local_id(0)] = dist;
                    index[get_local_id(0)] = j;
                }                   
            }           
            //__syncthreads();          
            barrier(CLK_LOCAL_MEM_FENCE | CLK_GLOBAL_MEM_FENCE);
        }

        if( !(data[get_local_id(0)] - s_data[get_local_id(0)] > points - 1) )                               
                data[0] = index[get_local_id(0)];

        data += (get_global_size(0));               
        if( get_local_id(0) == 0 )
            --iterations;
        //__syncthreads();
        barrier(CLK_LOCAL_MEM_FENCE | CLK_GLOBAL_MEM_FENCE);
    }
} 
```

我正在使用带有 ATI 3200 显卡的 AMD 处理器，它不支持 openCL，但其余代码在 CPU 本身上运行良好。

这次我的代码问题对我来说相当复杂。内核执行后，我无法使用`clEnqueueReadBuffer`. 在调试时它在这一点上被打破并说，

```
Unhandled exception at 0x10001098 in CL_kmeans.exe: 0xC000001D: Illegal Instruction. 
```

当我在这里按下休息时，它给出了

```
No symbols are loaded for any call stack frame. The source code cannot be displayed. 
```

这里可能有什么问题？请建议我一些解决方案。我的内核代码如上所示，我用来读取数据的语句是，

```
ret = clEnqueueReadBuffer(command_queue, gpu_data, CL_TRUE, 0,sizeof( float ) * instances->cols* 1 , instances->data, 0, NULL, NULL); 
```

我如何在这里检查可能的错误？

# android - Android，我从相机捕捉视频时如何播放歌曲？

> ID：10291826
> 
> 赞同：2
> 
> 时间：2012-04-24T04:40:43.197
> 
> 标签：android, video, intentfilter

当用户单击一个按钮时，我需要将他引导到一个包含歌曲列表的页面。然后当用户选择一个项目时，我需要播放歌曲并让他一起捕捉电影。它有点像卡拉OK。

是否可以？请告诉我如何找到参考？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:25:50.443

是的，这是可能的，我可以知道，因为我在录制时我的摄像头正在播放按钮点击声音。我认为您不需要为此提供服务，只需尝试使用[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:04:25.337

在这种情况下，使用服务将有所帮助。为此，您需要创建两项服务，一项用于录制视频，另一项用于播放音乐。通过您的主要活动控制两者。

我希望它能解决工作。但是根据看起来像三星设备的设备，它们不提供此功能。相机录制完成后，您无法播放音乐。

逻辑上使用服务我们可以完成任务。

让我知道它是否有效:)

# css - CSS字体大小，为什么不一致

> ID：10291830
> 
> 赞同：3
> 
> 时间：2012-04-24T04:41:10.023
> 
> 标签：css, font-size

我与在 Photoshop 中进行布局的绘图员一起工作，就像这里的每个人一样。我想知道为什么，palatino 字体 14pt/20pt 是 100% 在屏幕上显示的一种方式...

在 WordPress 样式表中输入相同的 css 信息后，相同的精确测量值在 Firefox 中要大得多...

```
#maintext p {
 font-family: "Palatino", "Book Antiqua", serif;
 font-size: 14pt;
 line-height: 20pt;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T04:50:27.193

点在 Photoshop 和浏览器上的显示不同。
看看下面的文章：

1）Photoshop和浏览器的PT区别：http: [//www.sherriwyche.com/tools/fontconversion.html](http://www.sherriwyche.com/tools/fontconversion.html)

2）不同浏览器的PT差异：http: [//css-tricks.com/css-font-size/](http://css-tricks.com/css-font-size/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T04:51:38.837

使用 'em' 而不是 'pt' 浏览以下网站

```
http://kyleschaeffer.com/best-practices/css-font-size-em-vs-px-vs-pt-vs/ 
```

# javascript - js文本文件的大小通常是其中的字符数加一吗？

> ID：10291836
> 
> 赞同：0
> 
> 时间：2012-04-24T04:41:59.157
> 
> 标签：javascript, file, filesize

我想根据一些文本输入确定文件有多大，但不必将其保存到文件中。

从测试来看，一个包含 4 个字符的文件将是 5 个字节。

一般情况下这是否成立，charcount + 1？

这是一堆我想要保存的javascript。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:49:49.560

好吧，当有人用他的母语发表评论时，这一切都会崩溃，使用一些大小不同的 UTF 字符（然后是一个字符！= 一个字节）。除此之外，存储文件的文件系统也存在一些差异；通常指定可以在硬盘驱动器上分配的最小单位，文件大小将始终是该数字的倍数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:02:01.407

不。

ASCII 文本文件的长度恰好是每个字符一个字节。但是换行符也是（一个或两个）字符，这可能是您的额外字节的来源。

对于非 ASCII 文本，每个字符可以占用超过一个字节，在 UTF-8 编码中通常为一到三个。

除此之外，该文件可能会占用磁盘上的一些额外空间，因为根据所使用的文件系统，它可能需要四舍五入到最小块大小，例如 8K。

# ssrs-2008 - SSRS 中所有页面中的 Diaply Header Name

> ID：10291837
> 
> 赞同：1
> 
> 时间：2012-04-24T04:42:02.930
> 
> 标签：ssrs-2008

我正在编写一份报告，其中我根据 Employee_ID 对日期进行了分组，并且我的报告应该根据 Employee_ID 获取报告的详细信息。

1.  在我的报告中，我有 4 个参数，例如 Employe_name，它是下拉字段和多选值。

2.  AsoFDate 参数，即文本字段。和另外两个参数。

    我从employee_name 参数中选择了两个值，例如我从employee_name 参数中选择了ram 和rahul 两个员工，我的报告必须根据他们的Eid 获取ram 和rahul 的详细信息。

在第 1 页 ram 的详细信息和第 2 页 rahul 的详细信息。到这里为止，它对我来说工作得很好。现在我需要在报告顶部显示员工的姓名。

例如，如果我正在获取 ram 的结果，我的报告必须像这样显示 Ram 的详细信息

```
Ram  

DepatID   Designation  salary  
1         Programmer    20k 
```

然后当我转到下一页时，它应该获取 rahul 详细信息，例如

```
Rahul  

 DepatID   Designation  salary  
    1       Programmer    20k  
    2       programmer    45K 
```

我可以显示详细信息，但不能显示相应报告顶部的员工姓名 Ram 和 Rahul。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:47:57.930

Yes i sorted out this issue, i placed employee_name parameter inside the table tablix. Now am able to get the desired outcome.

# objective-c - CCTMXTiledMap 触摸检测有点不对劲

> ID：10291839
> 
> 赞同：1
> 
> 时间：2012-04-24T04:42:21.120
> 
> 标签：objective-c, cocos2d-iphone

我使用了来自 www.raywenderlich.com 的瓷砖教程。我在横向视图中设置了一个平铺地图，并使用教程中的代码来检测触摸，如下所示：

```
 CGPoint touchLocation = [touch locationInView: [touch view]];       
    touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation]; 
```

并使用此位来确定它在哪个图块上：

```
 CGPoint touchTilePos = [self tileCoordForPosition:touchLocation];
    int tileIndex = [self tileIndexForTileCoord:(touchTilePos)];
    CCSprite *touchTile = [self.background tileAt:touchTilePos];
    self.player.position = [touchTile.parent convertToWorldSpace:touchTile.position]; 
```

问题是它有点偏离。靠近左侧的触摸相当接近，但靠近右侧的触摸被检测到离左侧很远。似乎是某种缩放问题，但我的代码中唯一的缩放是播放器精灵。

有任何想法吗？建议？非常感谢任何暂停！

编辑：这是代码中引用的两种方法：

```
- (CGPoint) tileCoordForPosition:(CGPoint)position 
{
    int x = position.x / _tileMap.tileSize.width;
    int y = ((_tileMap.mapSize.height * _tileMap.tileSize.height) - position.y) / _tileMap.tileSize.height;
    return ccp(x, y);  
}

- (int) tileIndexForTileCoord:(CGPoint)aTileCoord
{
    return aTileCoord.y*(self.tileMap.mapSize.width) + aTileCoord.x;
} 
```

更新：我简化了代码：

```
CGPoint touchLocation = [touch locationInView: [touch view]];
touchLocation = [[CCDirector sharedDirector] convertToGL: touchLocation];
touchLocation = [self.background convertToNodeSpace:touchLocation];

int x = touchLocation.x / _tileMap.tileSize.width;
int y = ((_tileMap.mapSize.height * _tileMap.tileSize.height) - touchLocation.y) / _tileMap.tileSize.height;
CGPoint touchTilePos = ccp(x,y); 
```

另外，我注意到一开始，touchLocation 就在左边，我认为这段代码不适用于我的情况（iPad/横向）：

```
CGPoint touchLocation = [touch locationInView: [touch view]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T03:48:12.913

我犯了一个致命的错误！我正在使用 HEX 瓷砖，它们有一点重叠（大约 1/4）。我必须对此负责！这就是为什么当我进一步向右点击时效果变得更糟的原因，这是修复它的代码：

```
 int x = (touchLocation.x - tileSize.width/8) / (_tileMap.tileSize.width * (3.0/4.0)) ;
    int y = 0;
    if(x % 2 == 0)
    {
        // even
        y = ((_tileMap.mapSize.height * tileSize.height) - touchLocation.y) / tileSize.height;
    }
    else
    {
        // odd
        y = ((_tileMap.mapSize.height * tileSize.height) - (touchLocation.y + tileSize.height/2)) / tileSize.height;
    }
    CGPoint touchTilePos = ccp(x,y); 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:45:06.280

教程代码看起来应该可以正常工作。我使用的代码在数学上与一致/正确的结果相同。

我唯一的建议是双重确保`self`这一行中的对象： `touchLocation = [self convertToNodeSpace:touchLocation];`是您的 TMXMap 的实际直接父节点。

在我的代码中，CCLayer 不是直接父节点，所以我最终明确标记了我的地图的父节点，这样我就可以像这样抓住它：

```
CCNode *parentNode = [self getChildByTag:kTagParentNode];
CGPoint worldPt = [parentNode convertToNodeSpace:touchLocation]; 
```

# android - 如何访问 Android 开发工具包中的串口？

> ID：10291843
> 
> 赞同：2
> 
> 时间：2012-04-24T04:43:15.150
> 
> 标签：android, serial-port

我有一个Android开发板。我想通过应用程序通过可用的 com 端口串行发送数据。这可能吗？如果是这样，任何人都可以展示它是如何完成的吗？我正在寻找一个星期，但找不到任何合适的东西。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:37:16.440

首先，您必须确保串行端口硬件功能正常，并且适当的 linux 内核驱动程序已链接或作为模块加载 - 这与任何其他嵌入式 linux 相同，此时您可能希望使用命令对其进行测试线工具或测试程序。

然后，您需要使其可访问应用程序。大致而言，有三种方法可以做到这一点。

*   您可以使串行端口的设备文件对所有用户可用。这很简单，但由您决定任意应用程序完全访问串行端口是否会成为问题。

*   您可以创建一个新的 unix 组和相应的 Android 权限，将包管理器设置为根据权限分配组中的成员，并将设备文件分配给该组。这就是处理诸如写入 sdcard 之类的事情的方式。

*   您可以限制对串行端口的访问并创建一个特权守护进程，该守护进程将管理串行端口并代表 android 应用程序执行通信，这些应用程序通过某些受支持的 IPC 方式联系它，例如 Binder、unix 套接字等。可能（在至少如果使用 Binder），您将需要客户端应用程序持有您为串行端口访问创建的 Android 权限。这有点类似于发送 SMS 消息的工作方式。

前两种方法将让（至少包含 ndk 代码）客户端应用程序使用 Linux 程序员熟悉的普通 posix 串行 API。第三种方法将串行端口呈现为 Android 风格的通信资源。

在编写任何代码之前，请先进行一些网络搜索。如果这个问题还没有被多次解决，我会感到非常惊讶。

# bash - BASH 有 UTF-8 替代品吗？

> ID：10291861
> 
> 赞同：0
> 
> 时间：2012-04-24T04:46:43.613
> 
> 标签：bash, utf-8

我经常需要在我的计算机上编写简单的 BASH 脚本来操作文件。BASH 似乎难以处理 UTF-8 内容。

*   是否有完全兼容 UTF-8 的 BASH 版本？
*   是否有 BASH 的替代品，它使用相似或相同的语法，但与 UTF-8 兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:13:30.623

Bash 本身使用 UTF8 应该没有任何问题。您的问题很可能是由另一个程序引起的，例如终端仿真器或编辑器。确保您的环境设置为使用 UTF8。有关这方面的更多信息，请参见[此处](http://fruit.je/utf-8)的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:16:14.290

我认为您的问题是通常的 sed/awk/grep... 等不支持 unicode，因此 stackoverflow 解决方案通常对您不起作用？

bash 本身在没有外部程序的情况下非常有限。

为了做你想做的事，你可能必须用 bash 以外的功能性更强的编程语言编写代码。UTF-8 本身不太适合处理，需要先解析成 2 字节或 4 字节字符再处理。（即转换为UTF-16或UTF-32）然后再转换回UTF-8进行存储。

# c++ - 使用 DirectXMath 获得 2 点之间距离的最佳方法是什么

> ID：10291862
> 
> 赞同：5
> 
> 时间：2012-04-24T04:46:55.310
> 
> 标签：c++, directx, direct3d, direct3d11, xna-math-library

使用新的 XMVECTOR 和 XMFLOAT3 类获得两点之间距离的最佳方法是什么？我在 XMVector* 函数系列中找不到执行此操作的函数，因此我想出了以下内容：

```
float distance(const XMFLOAT3& v1,const XMFLOAT3& v2)
{
    XMVECTOR vector1 = XMLoadFloat3(&v1);
    XMVECTOR vector2 = XMLoadFloat3(&v2);
    XMVECTOR vectorSub = XMVectorSubtract(vector1,vector2);
    XMVECTOR length = XMVector3Length(vectorSub);

    float distance = 0.0f;
    XMStoreFloat(&distance,length);
    return distance;
} 
```

这会比普通的 Vector3 类更快吗？只有 3 个浮点数用于 x、y、z，然后使用 sqrt，因为它使用了内在优化？即：

```
float Distance(const Vector3& point1,const Vector3& point2)
{
    float distance = sqrt( (point1.x - point2.x) * (point1.x - point2.x) +
                            (point1.y - point2.y) * (point1.y - point2.y) +
                            (point1.z - point2.z) * (point1.z - point2.z) );
    return distance;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T06:30:46.287

只有一种方法可以获得点之间的距离。这就是你描述的方式。`vec3 diff = b - a; float distance = sqrtf(dot(diff, diff));`

> 这会比普通的 Vector3 类更快吗？只有 3 个浮点数用于 x、y、z，然后使用 sqrt，因为它使用了内在优化？

如果您担心性能，您需要分析您的应用程序，而不是试图猜测什么会更快。“效率较低”解决方案的影响很有可能在您的应用程序中完全不明显。

如果您自己开始编写例程，也很有可能会降低它们的效率或引入错误。例如，您的“手写”代码可能（取决于编译器）执行比使用“XMVECTOR”的原始代码更多的浮点计算。在您的例程中，您计算​​两次向量之间的差异。如果编译器不优化它，你最终会得到**6**次减法、2 次加法、1 次 sqrtf 和 3 次乘法。在“XMVECTOR”代码中，您将使用**3 个**减法、2 个加法、3 个乘法和 1 个 sqrtf。

对于分析应用程序，您可以使用 AQTime 7 Standard（目前免费）或 gprof（如果您使用 gcc/g++ 编译）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-11T09:32:39.640

`D3DXVec3Length(&(Point1-Point2))`相当于距离公式。

# c++ - 将几个大文件映射到内存中

> ID：10291864
> 
> 赞同：2
> 
> 时间：2012-04-24T04:47:06.953
> 
> 标签：c++, windows-xp

在我们的应用程序中，我们必须能够将多个（即最多 4 个）文件映射到内存中（通过*mapViewOfFile*）。很长一段时间以来，这都不是问题，但是随着过去几年文件越来越大，现在内存碎片阻止了我们映射那些大文件（文件大约 200 MB）。如果此时没有加载其他文件，则问题可能已经存在。

我现在正在寻找一种方法来确保映射始终成功。因此，我想在程序开始时只为映射保留一块内存，因此碎片的影响要小得多。

我的第一种方法是*HeapCreate*一个私有堆，然后我会*HeapAlloc*一块足够大的内存来保存一个文件的映射，然后使用*MapViewOfFileEx*和该块的地址。当然，地址必须与内存分配粒度相匹配。但映射仍然失败，错误代码为 ERROR_INVALID_ADDRESS (487)。

接下来我用*VirtualAloc*尝试了同样的事情。我的理解是，当我传递参数 MEM_RESERVE 时，我就可以将该内存用于我想要的任何东西，例如映射文件视图。但我发现这是不可能的（与上面相同的错误代码），直到我再次用*VirtualFree完全释放整个块。*因此，将不再为下一个文件保留内存。

我已经在使用*低碎片堆*功能，它对我们几乎没有用处。重写我们的代码以仅使用文件的较小视图目前不是一种选择。我还看了这篇文章[Can address space becycled for multiple calls to MapViewOfFileEx without chance?](https://stackoverflow.com/questions/1770115/can-address-space-be-recycled-for-multiple-calls-to-mapviewoffileex-without-chan) 但没有发现它非常有用，并希望有另一种可能性。

你有什么建议我可以做什么或我的设计可能有问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:08:17.633

好吧，文档`MapViewOfFileEx`很清楚：“建议的地址用于指定文件应在多个进程中映射到同一地址。这要求地址空间区域在所有涉及的进程中都可用。没有其他内存分配可以发生在用于映射的区域，包括使用`VirtualAlloc`“

低碎片堆旨在防止即使相对较小的分配失败。即它避免了 1 个字节的空洞，因此 2 个字节的分配将保持更长时间。按照 32 位标准，您的分配并不小。

实际上，这会受到伤害。如果您真的需要它，请重新实现内存映射文件。所有必要的功能都可用。使用向量异常处理程序在源中分页，并用于`QueryWorkingSet`确定页面是否脏。

# android - 如何获取 itemTpl 中添加的复选框状态？

> ID：10291868
> 
> 赞同：0
> 
> 时间：2012-04-24T04:47:22.960
> 
> 标签：android, checkbox, sencha-touch-2

在 sencha touch 2.0 中，是否有可能获取 itemTpl 中添加的复选框的值。我有以下 itemTpl。如何获取它的值？

```
itemTpl: '<input type="checkbox" enabled="enabled" value="open" id="status"
name="comment_status" <tpl if="active">checked="checked"</tpl> /> {groupName}', 
```

**编辑：-**

这是我试图获取各个复选框的状态和 ID 的代码，但我无法获取它们。请帮助我提供一些代码片段或以正确的方式修改我的代码以获取状态和 ID。

```
var elements = Ext.DomQuery.select('#status');
Ext.each(elements, function(el){
            var item = Ext.get(el); 
            item.on('tap', function(){
                console.log('tapped:-'+item.getId());
            });
       }); 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:40:29.963

只需使用`Ext.DomQuery`，请参见：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.DomQuery](http://docs.sencha.com/touch/2-0/#!/api/Ext.DomQuery)

# c# - Int 到字节数组并返回在大数上没有给出相同的值

> ID：10291871
> 
> 赞同：2
> 
> 时间：2012-04-24T04:47:33.240
> 
> 标签：c#, c++, bytearray

我正在尝试将 int 转换为字节数组，然后执行 base64 为 Azure Rest API 创建一个 blockId。当我将 int 转换为 base64 字符串时，我得到了第一位正确的：

```
int a = 127;
int b = 4000; 
```

C＃：

```
byte[] blockIdBytes = BitConverter.GetBytes(a);
string blockIdBase64 = Convert.ToBase64String(blockIdBytes); 
```

`a`给出“fwAAAA==”并`b`给出“oA8AAA==”

C++

```
QByteArray temp;

for(int i = 0; i < sizeof(a); i++) {
    temp.append((char)(a >> (i * 8)));
} 
```

`a`给出“fwAAAA==”并`b`给出“oA8AAA==”（与上面的值相同，这是正确的）

现在的问题是，当我尝试将 base64 字符串转换回 int 时？我的 bytearray 到 int 方法不适用于大于 127 的数字，为什么？

```
int result = 0;

for(int i = temp.size(); i >= 0; i--) {
    result = (result << 8) + temp[i];
} 
```

127 有效，但是当我执行 128（例如）时，结果是“-128”。我意识到它溢出了，但是为什么以及在哪里？

编辑：

试过：

```
QByteArray temp;
int a = 340;

for(int i = 0; i < sizeof(a); i++) {
  temp.append((unsigned char)(a >> (i * 8)));
} 
```

当我将其转换回来时，它实际上给出“340”，“255”给出“-1”，“256”给出“256”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:01:28.033

当您转换回来时，您需要将 temp[i] 中的所有值视为`unsigned char` 或忽略有符号位。在下面的代码片段中，您最终将 temp[i] 提升为整数，然后我们明确地将有符号位（如果有）重置为 0，使其为正

`result = (result << 8) + ((int)(temp[i]) & 0xFF)`

您应该能够使用

`result = (result << 8) + ((unsigned char)(temp[i]))`

# xaml - 如何为 Metro/WinRT 应用程序的 ListView 项目单击设置不同的背景颜色？

> ID：10291873
> 
> 赞同：4
> 
> 时间：2012-04-24T04:48:09.287
> 
> 标签：xaml, expression-blend, windows-runtime, visual-studio-2012, expression-blend-5

我自己通过 Expression Blend 5 Beta 和 Visual Studio 11 Beta 尝试了大约半个小时，但无法弄清楚当您单击`ListView`标准海军绿色上的项目时如何应用不同的背景颜色应该是一项相当简单的任务带有似乎是带有 Windows 8 Consumer Preview 的 WinRT 应用程序标准的勾号。

我相信我需要在我的 ListView`<VisualStateManager/>`内部的 XAML 中声明`<DataTemplate/>`（与我在`Button`控件上所做的相同），但无法找到一种方法让 Blend 中的“状态”选项卡开始记录这些操作，并且此外，`VisualState`在我最终弄清楚如何做到这一点之后，我不确定该叫什么名字。

例如，在我右键单击并编辑它的控制模板后`Pressed`，为 a 自定义视觉状态`Button`相当容易，然后我可以访问 Blend 中的“状态”选项卡并开始记录我的 Pressed、Disabled、PointerOver 操作等，但似乎没有使用 ListView 或可能的其他控件会那么容易吗？

由于 Blend 5 和 VS 11 都是 Beta，因此很难知道 Blend 的 UI 中可能只是一个未编码的功能，或者只是我做错了！因此，我感谢任何人可以提供的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T08:35:25.497

选择状态应该是 ItemContainerStyle 的一部分 - 无论是视觉状态还是触发器的形式，但 ItemContainerStyle 似乎没有暴露在设计器视图中，因此很难修改它，但您可以添加一个 ListViewItem 到您的 XAML 和设计器会很高兴地告诉您它的样式和模板是什么，以便您可以更改它。

您可以通过设置修改 GridView 或 ListView 中的样式

```
ItemContainerStyle="{StaticResource ListViewItemStyle1}" 
```

并将这些资源添加到活动资源字典（例如 Page.Resources）：

```
<SolidColorBrush x:Key="ListViewItemHighlightBrush2" Color="Pink" />
<SolidColorBrush x:Key="ListViewItemCheckHintGlyphBrush2" Color="Red" />
<SolidColorBrush x:Key="ListViewItemPointerOverBrush2" Color="Purple" />
<SolidColorBrush x:Key="ListViewItemCheckGlyphBrush2" Color="Yellow" />
<SolidColorBrush x:Key="ListViewItemSelectedPointerOverBorderBrush2" Color="Orange" />
<Style x:Key="ListViewItemStyle1" TargetType="ListViewItem">
    <Setter Property="FontFamily" Value="{StaticResource ContentFontFamily}" />
    <Setter Property="FontSize" Value="{StaticResource ContentFontSize}" />
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="TabNavigation" Value="Local" />
    <Setter Property="IsHoldingEnabled" Value="True" />
    <Setter Property="Margin" Value="0,0,18,0" />
    <Setter Property="HorizontalContentAlignment" Value="Left" />
    <Setter Property="VerticalContentAlignment" Value="Top" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ListViewItem">
                <Border x:Name="OuterContainer">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="PointerOverBorder" />
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SelectionBackground">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBorderBrush2}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="SelectedBorder">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBorderBrush2}" />
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="SelectedEarmark">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListViewItemSelectedPointerOverBorderBrush2}" />
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <TapDownThemeAnimation TargetName="ContentContainer" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDisabledOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="contentPresenter" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="FocusVisual" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused" />
                            <VisualState x:Name="PointerFocused" />
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="SelectionHintStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.65" To="NoSelectionHint" />
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="VerticalSelectionHint">
                                <Storyboard>
                                    <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="SelectionBackground" ToVerticalOffset="25" />
                                    <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="ContentBorder" ToVerticalOffset="25" />
                                    <SwipeHintThemeAnimation ToHorizontalOffset="0" TargetName="SelectedCheckMark" ToVerticalOffset="25" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyph" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="HorizontalSelectionHint">
                                <Storyboard>
                                    <SwipeHintThemeAnimation ToHorizontalOffset="-25" TargetName="SelectionBackground" ToVerticalOffset="0" />
                                    <SwipeHintThemeAnimation ToHorizontalOffset="-25" TargetName="ContentBorder" ToVerticalOffset="0" />
                                    <SwipeHintThemeAnimation ToHorizontalOffset="-25" TargetName="SelectedCheckMark" ToVerticalOffset="0" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyph" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="NoSelectionHint" />
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="SelectionStates">
                            <VisualState x:Name="Selecting">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedBorder" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectingGlyph" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyphBorder" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Selected">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedBorder" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedCheckMark" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unselecting">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyphBorder" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unselected">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="HintGlyphBorder" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="SelectedUnfocused">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectionBackground" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedBorder" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="SelectedCheckMark" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="DragStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.650" To="NotDragging" />
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="NotDragging" />
                            <VisualState x:Name="Dragging">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDragOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="InnerDragContent" />
                                    <DragItemThemeAnimation TargetName="InnerDragContent" />
                                    <FadeOutThemeAnimation TargetName="SelectedCheckMarkOuter" />
                                    <FadeOutThemeAnimation TargetName="SelectedBorder" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="DraggingTarget">
                                <Storyboard>
                                    <DropTargetItemThemeAnimation TargetName="OuterContainer" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="MultipleDraggingPrimary">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="MultiArrangeOverlayBackground" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="MultiArrangeOverlayText" />
                                    <DoubleAnimation Duration="0" To="{StaticResource ListViewItemDragOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="InnerDragContent" />
                                    <FadeInThemeAnimation TargetName="MultiArrangeOverlayBackground" />
                                    <FadeInThemeAnimation TargetName="MultiArrangeOverlayText" />
                                    <DragItemThemeAnimation TargetName="InnerDragContent" />
                                    <FadeOutThemeAnimation TargetName="SelectedCheckMarkOuter" />
                                    <FadeOutThemeAnimation TargetName="SelectedBorder" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="MultipleDraggingSecondary">
                                <Storyboard>
                                    <FadeOutThemeAnimation TargetName="ContentContainer" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="ReorderHintStates">
                            <VisualStateGroup.Transitions>
                                <VisualTransition GeneratedDuration="0:0:0.650" To="NoReorderHint" />
                            </VisualStateGroup.Transitions>
                            <VisualState x:Name="NoReorderHint" />
                            <VisualState x:Name="BottomReorderHint">
                                <Storyboard>
                                    <DragOverThemeAnimation Direction="Bottom" ToOffset="{StaticResource ListViewItemReorderHintOffset}" TargetName="ReorderHintContent" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="TopReorderHint">
                                <Storyboard>
                                    <DragOverThemeAnimation Direction="Top" ToOffset="{StaticResource ListViewItemReorderHintOffset}" TargetName="ReorderHintContent" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="RightReorderHint">
                                <Storyboard>
                                    <DragOverThemeAnimation Direction="Right" ToOffset="{StaticResource ListViewItemReorderHintOffset}" TargetName="ReorderHintContent" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="LeftReorderHint">
                                <Storyboard>
                                    <DragOverThemeAnimation Direction="Left" ToOffset="{StaticResource ListViewItemReorderHintOffset}" TargetName="ReorderHintContent" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="DataVirtualizationStates">
                            <VisualState x:Name="DataAvailable" />
                            <VisualState x:Name="DataPlaceholder">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PlaceholderTextBlock">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetProperty="Visibility" Storyboard.TargetName="PlaceholderRect">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Visible</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Grid x:Name="ReorderHintContent" Background="Transparent">
                        <Path x:Name="SelectingGlyph" Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemHighlightBrush2}" HorizontalAlignment="Right" Height="13" Margin="0,5.5,5.5,0" Opacity="0" Stretch="Fill" VerticalAlignment="Top" Width="15" />
                        <Border x:Name="ContentContainer">
                            <Grid x:Name="InnerDragContent">
                                <Border x:Name="HintGlyphBorder" HorizontalAlignment="Right" Height="40" Margin="4" Opacity="0" VerticalAlignment="Top" Width="40">
                                    <Path x:Name="HintGlyph" Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemCheckHintGlyphBrush2}" HorizontalAlignment="Right" Height="13" Margin="0,5.5,5.5,0" Opacity="0" Stretch="Fill" VerticalAlignment="Top" Width="15" />
                                </Border>
                                <Rectangle x:Name="PointerOverBorder" Fill="{StaticResource ListViewItemPointerOverBrush2}" IsHitTestVisible="False" Margin="1" Opacity="0" />
                                <Rectangle x:Name="FocusVisual" IsHitTestVisible="False" Opacity="0" Stroke="{StaticResource ListViewItemKeyboardFocusBrush}" StrokeThickness="2" />
                                <Rectangle x:Name="SelectionBackground" Fill="{StaticResource ListViewItemHighlightBrush2}" Margin="4" Opacity="0" />
                                <Border x:Name="ContentBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Margin="4">
                                    <Grid>
                                        <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                                        <TextBlock x:Name="PlaceholderTextBlock" Foreground="{x:Null}" IsHitTestVisible="False" Margin="{TemplateBinding Padding}" Opacity="0" Text="Xg" />
                                        <Rectangle x:Name="PlaceholderRect" Fill="{StaticResource ListViewItemPlaceholderRectBrush}" IsHitTestVisible="False" Visibility="Collapsed" />
                                        <Rectangle x:Name="SelectedBorder" IsHitTestVisible="False" Opacity="0" Stroke="{StaticResource ListViewItemHighlightBrush2}" StrokeThickness="{StaticResource ListViewItemSelectedBorderThickness}" />
                                    </Grid>
                                </Border>
                                <Border x:Name="SelectedCheckMarkOuter" HorizontalAlignment="Right" IsHitTestVisible="False" Margin="4" Padding="{TemplateBinding BorderThickness}" VerticalAlignment="Top">
                                    <Grid x:Name="SelectedCheckMark" Height="40" Opacity="0" Width="40">
                                        <Path x:Name="SelectedEarmark" Data="M0,0 L40,0 L40,40 z" Fill="{StaticResource ListViewItemHighlightBrush2}" Stretch="Fill" />
                                        <Path Data="F1 M133.1,17.9 L137.2,13.2 L144.6,19.6 L156.4,5.8 L161.2,9.9 L145.6,28.4 z" Fill="{StaticResource ListViewItemCheckGlyphBrush2}" FlowDirection="LeftToRight" HorizontalAlignment="Right" Height="13" Margin="0,5.5,5.5,0" Stretch="Fill" VerticalAlignment="Top" Width="15" />
                                    </Grid>
                                </Border>
                                <Rectangle x:Name="MultiArrangeOverlayBackground" Fill="{StaticResource ListViewItemDragBackgroundBrush}" IsHitTestVisible="False" Margin="4" Opacity="0" />
                                <TextBlock x:Name="MultiArrangeOverlayText" HorizontalAlignment="Left" IsHitTestVisible="False" Margin="4" Opacity="0" TextWrapping="Wrap" Text="{Binding TemplateSettings.DragItemsCount, RelativeSource={RelativeSource Mode=TemplatedParent}}" VerticalAlignment="Top">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="White" />
                                            <Setter Property="FontSize" Value="56" />
                                            <Setter Property="FontFamily" Value="{StaticResource ContentFontFamily}" />
                                            <Setter Property="FontWeight" Value="Light" />
                                            <Setter Property="HorizontalAlignment" Value="Left" />
                                            <Setter Property="VerticalAlignment" Value="Bottom" />
                                            <Setter Property="Margin" Value="12,0,0,0" />
                                            <Setter Property="TextWrapping" Value="Wrap" />
                                            <Setter Property="TextTrimming" Value="WordEllipsis" />
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# ruby-on-rails - rake db:migrate 意外停止

> ID：10291874
> 
> 赞同：0
> 
> 时间：2012-04-24T04:48:15.130
> 
> 标签：ruby-on-rails, ruby, rake, dbmigrate

我一直在尝试让 R0R 应用程序在 CentOS 6.2、Ruby 1.9.2p318、Rails 3.0.7 和 rake 0.8.7 上运行。这是开发 Windows 和系统以及 CentOS 服务器上的软件包组合。捆绑安装运行干净。然后我运行了 bundle exec rake -t db:migrate。（追踪）。耙子开始正常，我得到：

在 /var/www/html/appdir Invoke db:migrate (first time) Invoke environmnet (first time) .... Invoke environmnet Execute db:schema::dump root@hostname#

rake 启动，然后在 schema:dump 行之后退出，没有其他错误，消息中没有任何内容。如果我运行 bundle exec rake -V，我会得到 0.8.7，如果我运行 rake -VI 会得到 0.9.2.2。

我尝试使用 gem uninstall rake -v '0.9.2.2' 卸载 rake 0.9.2.2 返回结果是我已经成功卸载了 rake -0.8.7 !!!!

任何 ieas 如何真正卸载 0.9.2.2 和/或如何修复此错误？

# php - 如何在 AJAX 内容加载中使用 get_adjacent_post_rel_link()？

> ID：10291875
> 
> 赞同：2
> 
> 时间：2012-04-24T04:48:19.217
> 
> 标签：php, javascript, jquery, wordpress

**[界面图片](http://vvcap.net/db/6gl3glIwxhYxU8OJ_oKt.htp)**
我创建了一个 jquery 脚本来 AJAX 加载内容。此内容包含由自定义帖子类型制作的帖子。作为参考，我使用[了 Loading WordPress posts with Ajax 和 jQuery](http://www.emanueleferonato.com/2010/04/01/loading-wordpress-posts-with-ajax-and-jquery/)。

**问题**我将用什么替换 .load URL，以允许每次单击 #ajaxNext 时它都会转到上一个提交的自定义帖子类型 URL？

示例：当前显示的自定义帖子发布于 2011 年 8 月 30 日。*点击 #ajaxNext 后帖子更新为 2011 年 8 月 24 日的帖子*

[参考 Wordpress 文档。](http://codex.wordpress.org/Function_Reference/get_adjacent_post_rel_link)
**[jQuery](http://vvcap.net/db/zlUKZgt40ATEAn_CP2z8.htp)**此代码保存在 single-custom_type.php 的标头中

```
<script type="text/javascript">
    $(document).ready(function(){
    $.ajaxSetup({cache:false});
    $("#ajaxNext").click(function(){
        var post_id = $(this).attr("rel")
        $("#container").html("loading...");
        $("#container").load("<?php get_adjacent_post_rel_link( $title, $in_same_cat, $excluded_categories, $previous ); ?>");
        return false;
    });
});
</script> 
```

这`$("#container").load('<?php get_adjacent_post_rel_link( $title, $in_same_cat, $excluded_categories, $previous ); ?>');`就是创建请求 URL 的原因（我输入了一个直接 URL 用于测试目的*，它可以工作。不幸的是，这个 php 不起作用*）。我希望 .load 的 URL 成为 wordpress 中的下一篇文章。我已经按照教程进行了操作。由于我使用自定义帖子类型，不得不进行一些调整。它仍然没有运气:(

**[PHP](http://vvcap.net/db/n12aaNhlg6paCjJDDUbv.htp)** *逻辑上的 home.php 包含下面的 PHP 参考*

```
<div id="wrapper">
  <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

    <article id="post-<?php the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">
        <div id="inner">
            <?php 
                if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
                  the_post_thumbnail(full);
                } 
            ?>

        </div>
</div> 
```

**[HTML](http://vvcap.net/db/6J_hUAm_MIYewDyN3lBN.htp)** *这个特定的 html 块包含执行 AJAX 调用的锚点*

```
 <section class="summary">
  <div>
    <header> <img src="<?php echo get_template_directory_uri(); ?>/library/images/works.png"  />
      <h1>Process</h1>
      <h2><a id="ajaxNext" href="<?php the_permalink() ?>" rel="<?php the_ID(); ?>" title="<?php the_title_attribute(); ?>">Next</a></h2>
    </header>
    <p>
      <p><?php getCustomField('Process'); ?></p>
    </p>
  </div>
</section> 
```

如果我缺少任何东西，请不要犹豫，问！我会立即回复。

最后，如果有前一个按钮并且代码完全不同，我将如何创建该 .load(); URL 请求，即转到最新的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:59:19.593

您使用了错误的功能。`get_adjacent_post_rel_link()`返回一个完整的链接——`<link rel="prev"...>`您需要原始 URL，而不是整个链接。不幸的是，令我惊讶的是，我找不到一个“正确”的功能。有[很多解决方案](http://wordpress.org/support/topic/nextpreviews-post-url-only?replies=7)可以解决这个问题，但我倾向于从我所拥有的内容中提取 URL。

```
$next = get_adjacent_post_rel_link();
preg_match('/href=\'([^\']*)\'/',$next,$matches);
var_dump($matches[1]); 
```

# nhibernate - 使用 OData 和 asp.net MVC webapi 查询 NHibernate 数据库

> ID：10291876
> 
> 赞同：1
> 
> 时间：2012-04-24T04:48:22.147
> 
> 标签：nhibernate, asp.net-mvc-4, asp.net-web-api

我怀疑这只是 NH​​ibernate 特有的。但我有如下代码....

```
public class ClientController : ApiController
    {
        // GET /api/<controller>
        public IQueryable<Api.Client> Get()
        {
            return Repositories.Clients.Query().Select(c => Mapper.Map<Client, Api.Client>(c));
        } 
```

我基本上想使用 Odata 标准查询数据库......获取相关的“客户端”对象，并将它们转换为 DTO 的“Api.Client”。

但是......按原样的代码不起作用。因为 NHibernate 不知道如何使用 Mapper.... 它确实希望查询位于 .Select 之前。但我不确定我能不能先得到 Odata Query？

如果我这样做，它会起作用

```
return Repositories.Clients.Query().Select(c => Mapper.Map<Client, Api.Client>(c)).ToList().AsQueryable(); 
```

但这有点糟糕，因为您必须从数据库中获取所有客户端才能执行 OData 查询。

无论如何，在 OData 查询之后发生“选择”吗？或者另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:02:15.827

我尚未对其进行测试，但开源项目[NHibernate.OData](https://github.com/pvginkel/NHibernate.OData)可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:31:13.873

问题是您试图`Mapper.Map`在 NH 调用中执行 C# 代码 ( )（即转换为 SQL）

您必须手动映射 Api.Client，或者创建一个返回 an 的 Mapper 实现并将`Expression<Func<Client, Api.Client>>`其作为参数直接传递给`Select()`.

即使这样，我也不确定 NHibernate 是否会翻译它。但是你可以试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T14:37:49.833

[AutoMapper 通过Queryable Extensions](https://github.com/AutoMapper/AutoMapper/wiki/Queryable-Extensions)支持这种情况

```
public IQueryable<Api.Client> Get() {
    return Repositories.Clients.Query().Select(c => Mapper.Map<Client, Api.Client>(c));
} 
```

变成

```
public IQueryable<Api.Client> Get() {
    return Repositories.Clients.Query().ProjectTo<Api.Client>(mapper.ConfigurationProvider);
} 
```

# python - 问题重新保护 python 对象和嵌套列表

> ID：10291877
> 
> 赞同：0
> 
> 时间：2012-04-24T04:48:55.050
> 
> 标签：python

好的，我会尽力提供尽可能多的信息，以便有时间给我一些建议的人更容易做到这一点，希望你们中的一个好人能够帮助我。

我正在编写一个算术训练类的程序。该程序的想法是用户创建一个“会话”，他们指定他们想要的数学运算（/，*，-，+），方程的数量，数字生成器的范围（2个数字，例如，如果他们指定 1 和 5，随机化的方程的所有数字都在这个范围内。）。

然后生成会话，用户完成方程式，最后用户可以检查他的答案，并显示准确百分比、完成会话所用的时间以及创建会话的确切日期和时间。

该程序是用面向对象编程编写的，每个会话都是一个对象。这些对象包含在一个经过腌制的列表中。这个想法是用户可以回到以前的会话并跟踪他们的改进或其他。

问题：我无法遍历每个对象并打印出所有数据。

我的程序的代码如下：

```
import pickle,time,random

class Session:
    def __init__(self,amount,operation,numgen_range):
        start_time = [int(time.strftime('%M', time.gmtime())),int(time.strftime('%S', time.gmtime()))]
        ID = main.get_id() + 1
        accuracy = 0
        rights = 0
        equations_data = []
        duration = [0,0]
        datetime = time.strftime('%a, %d %b %Y %H:%M:%S', time.gmtime())
        self.session_data = [ID,amount,operation,numgen_range,datetime,accuracy,rights,equations_data,duration]
        main.save_id()

        if self.session_data[2] == '+':
            for i in range(self.session_data[1]):
                a = random.randint(self.session_data[3][0],self.session_data[3][1])
                b = random.randint(self.session_data[3][0],self.session_data[3][1])
                answer = a + b
                user_answer = int(input('{0} + {1} = '.format(a,b)))
                if answer == user_answer:
                    rightwrong = True
                    self.session_data[6] += 1
                else:
                    rightwrong = False
                eq_data = [a,self.session_data[2],b,answer,user_answer,rightwrong]
                self.session_data[7].append(eq_data)
        elif self.session_data[2] == '*':
            for i in range(self.session_data[1]):
                a = random.randint(self.session_data[3][0],self.session_data[3][1])
                b = random.randint(self.session_data[3][0],self.session_data[3][1])
                answer = a * b
                user_answer = int(input('{0} * {1} = '.format(a,b)))
                if answer == user_answer:
                    rightwrong = True
                    self.session_data[6] += 1
                else:
                    rightwrong = False
                eq_data = [a,self.session_data[2],b,answer,user_answer,rightwrong]
                self.session_data[7].append(eq_data)
        elif self.session_data[2] == '-':
            for i in range(self.session_data[1]):
                a = random.randint(self.session_data[3][0],self.session_data[3][1])
                b = random.randint(self.session_data[3][0],self.session_data[3][1])
                answer = a - b
                user_answer = int(input('{0} - {1} = '.format(a,b)))
                if answer == user_answer:
                    rightwrong = True
                    self.session_data[6] += 1
                else:
                    rightwrong = False
                eq_data = [a,self.session_data[2],b,answer,user_answer,rightwrong]
                self.session_data[7].append(eq_data)
        elif self.session_data[2] == '/':
            for i in range(self.session_data[1]):
                a = random.randint(self.session_data[3][0],self.session_data[3][1])
                b = random.randint(self.session_data[3][0],self.session_data[3][1])
                answer = a / b
                user_answer = int(input('{0} / {1} = '.format(a,b)))
                if answer == user_answer:
                    rightwrong = True
                    self.session_data[6] += 1
                else:
                    rightwrong = False
                eq_data = [a,self.session_data[2],b,answer,user_answer,rightwrong]
                self.session_data[7].append(eq_data)

        end_time = [int(time.strftime('%M', time.gmtime())),int(time.strftime('%S', time.gmtime()))]
        if start_time[0] >= end_time[0]:
            self.session_data[8][0] = start_time[0] - end_time[0]
        else:
            self.session_data[8][0] = end_time[0] - start_time[0]
        if start_time[1] >= end_time[1]:
            self.session_data[8][1] = start_time[1] - end_time[1]
        else:
            self.session_data[8][1] = end_time[1] - start_time[1]

        self.session_data[5] = (self.session_data[6] / self.session_data[1]) * 100
        print('You got {0} problems correct out of {1}, your accuracy percentage was {2}%.\nYou took {3} minutes and {4} seconds to complete the session.'.format(self.session_data[6],self.session_data[1],int(self.session_data[5]),self.session_data[8][0],self.session_data[8][1]))

        while True:
            try:
                i = int(input('Enter 1 to check answers or 2 to return to the menu: '))
                if i == 1:
                    main.util = True
                    for i in self.session_data[7]:
                        if i[5]:
                            rw = 'CORRECT'
                        else:
                            rw = 'INCORRECT'
                        print('{0} {1} {2} = {3} Your Answer: {4} - {5}\n'.format(i[0],i[1],i[2],i[3],i[4],rw))
                elif i == 2:
                    main.util = False
                    pass
                else:
                    raise ValueError
                break
            except ValueError:
                print(main.input_error_msg)
                continue

with open('data/saved_sessions.txt','rb') as file:
    saved_sessions = pickle.load(file)

class main:
    util = None
    input_error_msg = 'You entered an invalid input, try again.'

    def create():
        print('Create Session.')

        while True:
            try:
                amount = int(input('Enter the amount of equations you want: '))
                if amount < 1:
                    raise ValueError
                if amount > 50:
                    print('Sorry, the limit for equation amounts is 50, try again.')
                    continue
                break
            except ValueError:
                print(main.input_error_msg)
                continue

        while True:
            try:
                operation = input('Enter operation: ')
                if operation == '':
                    print('You must specify an operation for the session!')
                    continue
                if len(operation) != 1:
                    print(main.input_error_msg)
                    continue
                if "+" not in operation:
                    if "-" not in operation:
                        if "*" not in operation:
                            if "/" not in operation:
                                print("You failed to enter a valid equation type. Please try again.")
                                continue
                break
            except ValueError:
                print(main.input_error_msg)
                continue

        numgen_range = [0,0]
        while True:
            try:
                numgen_range[0] = int(input('Enter base range number: '))
                if numgen_range[0] < 0:
                    raise ValueError
                break
            except ValueError:
                print(main.input_error_msg)
                continue

        while True:
            try:
                numgen_range[1] = int(input('Enter ceiling range number: '))
                if numgen_range[1] < numgen_range[0]:
                    print('Sorry the ceiling range number cannot be larger than the base range number.')
                    continue
                break
            except ValueError:
                print(main.input_error_msg)
                continue

        while True:
            try:
                i = int(input('Enter 1 to generate this session or 2 to enter new specifications: '))
                if i == 1:
                    saved_sessions.append(Session(amount,operation,numgen_range))
                    main.pickle_sessions()
                    if main.util:
                        main.menu()
                    else:
                        main.menu(rmenu=True)
                elif i == 2:
                    main.create()
                else:
                    raise ValueError
                break
            except ValueError:
                print(main.input_error_msg)
                continue

    def get_id():
        try:
            with open('data/id_count.txt','rb') as file:
                count = pickle.load(file)
        except IOError:
            pass
        else:
            return count

    def save_id():
        try:
            with open('data/id_count.txt','wb') as file:
                pickle.dump(ID,file)
        except IOError:
            pass
        else:
            print('id count pickled.')

    def view_archive():
        print('View Session Archive')
        #view archive code to go here.    

    def menu(rmenu=False):
        if rmenu:
            while True:
                try:
                    i = int(input('Enter 1 to return to the menu: '))
                    if i == 1:
                        main.menu()
                    else:
                        raise ValueError
                    break
                except ValueError:
                    print(main.input_error_msg)
                    continue
        else:
            print('Menu -[1]Create Session.[2]View Session Archive.[3]Exit.')
            while True:
                try:
                    i = int(input('Enter choice: '))
                    if i == 1:
                        main.create()
                    elif i == 2:
                        main.view_archive()
                    elif i == 3:
                        quit()
                    else:
                        raise ValueError
                    break
                except ValueError:
                    print(main.input_error_msg)
                    continue

    def pickle_sessions():
        try:
            with open('data/saved_sessions.txt','wb') as file:
                pickle.dump(saved_sessions,file)
        except IOError:
            pass
        else:
            print('Sessions have been pickled.')

    def start():
        if __name__ == '__main__':
            main.menu()

main.start() 
```

现在我想做的是，遍历每个对象，进入它的 session_data 列表，遍历它并打印出每一位数据，然后遍历 equations_data 列表，它是 session_data 列表中的元素 7，记住 equations_data填充了更多包含每个单独方程数据的列表，所以我想迭代它。

总结一下：打印出每个对象的所有数据。

```
I thought something like:
for i in saved_sessions:
    for y in i.session_data:
        #print out elements then loop over equations_data on line below
        for x in i.session_data[7]:
            #print out elements 
```

但是这不起作用，基本上我无法弄清楚如何访问 equations_data 列表中的列表，即 self.session_data [7]，但是当尝试迭代这个时，我返回了一个索引错误。

就像我说的那样，我想一一显示每个会话：

```
ID: 1
Date: some date
Time: some time
Operation: +
Equations: 5
Right Answers: 5
Accuracy: 100%
Time Taken: 15 seconds

Equations:
1 + 5 = 6 Your Answer: 6
1 + 6 = 7 Your Answer: 7
1 + 7 = 8 Your Answer: 8
1 + 8 = 9 Your Answer: 9
1 + 9 = 10 Your Answer: 10 
```

任何有关此问题的帮助将不胜感激。我也非常热衷于对我编程的各个方面的一些残酷诚实的反馈。鼓励建设性的批评。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:41:01.923

为什么将变量放在单个列表属性中？为什么不将它们全部设为类属性，以便您可以按名称而不是编号访问它们？例如, `self.equations_data`, `self.accuracy`, 等等？

嵌套循环的问题在于它太嵌套了。您正在迭代`i.session_data[7]`n 次，其中 n 显然是 9，即 session_data 的长度。你会想要这样的东西：

```
for i in saved_sessions:
    for j in range(len(i.session_data)):
        if j!=7:
            y=i.session_data[j]
            # print out your elements here
    for x in i.session_data[7]:
        #print out elements 
```

**但不要那样做。**修改您的方法，以便您不会在该列表中保存属性。至少将它们存储在字典中，以便您可以按名称访问它们。更好的是，将它们存储为类的属性。

至于打印出你的类，你应该实现`__str__(self)`方法 in`Session`将类实例中的数据按照你想要的格式放入一个字符串中，例如：

```
class Session(object):
    ...
    def __str__(self):
        out = 'ID:%s\nAMOUNT:%d ... '%(self.ID, self.amount, ...)   # And so on.
        return out 
```

这样你就可以执行：

```
for session in saved_sessions:
    print str(session) 
```

就是这样。多么可爱！`for ... in`（仅供参考，使用.循环时，使用描述性词作为变量名更符合 Pythonic

**其他建议**

1.  正如@David Robinson 指出的那样，您的课程`Main`不会按照您的意愿运行。在继续之前，您应该[阅读有关 Python 类](http://docs.python.org/tutorial/classes.html)的信息，因为您对它们做出了一些不正确的假设。如果你想在没有实例的情况下访问它们，你必须声明静态方法`@staticmethod`，我不认为这很 Pythonic。

2&3。使用`re`而不是嵌套`if`语句，例如：

```
if not re.search(r'[\*\-\+\/]', operation):
    # Invalid operation, you should raise an exception here
    raise ValueError 
```

4\. 查看[Python 的样式指南](http://www.python.org/dev/peps/pep-0008/)并适当地格式化您的代码。它将帮助您开始以 Python 方式编写更多内容，这将使您的代码更清晰、更好。

这些是引起我注意的事情

# c# - 投影 IQueryable 时 Automapper 失败 when object has a collection property So, here's my situation. I've got a my two classes: class FromClass { public string[] Foo { get; set; } } class ToClass { public string[ 问问题 问问题 2012-04-24T04:49:00.603 5567 次 This question shows research effort; it is useful and clear 7 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. So, here's my situation. I've got a my two classes: class FromClass { public string[] Foo { get; set; } } class ToClass { public string[] Foo { get; set; } } The classes have properties which are arrays. They could be List <t>or IEnumerable<t>, I get the same result in any of those cases. I try to map from one to the other using the AutoMapper.QueryableExtensions: class Program { static void Main(string[] args) { // create a "From" object string[] anArray = new string[] { "a", "b" }; FromClass anObject = new FromClass() { Foo = anArray }; // make a queryable set that includes the "From" object IQueryable <fromclass>queryableObjects = (new FromClass[] { anObject }).AsQueryable(); // set up AutoMapper Mapper.CreateMap<fromclass, toclass="">(); Mapper.AssertConfigurationIsValid(); // test plain mapping IQueryable <toclass>test1 = queryableObjects.Select(o => Mapper.Map<fromclass, toclass="">(o)); // success! // test queryable extensions IQueryable <toclass>test2 = queryableObjects.Project().To<toclass>(); // InvalidOperationException: "Sequence contains no elements" } } Why does test2 throw an InvalidOperationException? If I make the type of Foo something that's not a collection, e.g. a string or some other class -- then everything works perfectly. Am I doing something wrong? Not understanding something? Or have I hit a bug? Objective C: How to grab a number after a sub string from string I have a lengthy string as below Please plan to attend to provide upgrade to existing code morning meeting to acoomdate bum team members Meeting Number: 457 231 123 To join this meeting go to http://domainname.com enter password Now i want to grab number after the text "Meeting Number" i.e. 457 231 123 Any help please. thanks EDIT Lets say i have a string NSString *myString = @"Please plan to attend to provide upgrade to existing code morning meeting to acoomdate bum team members Meeting Number: 457 231 123 ----------------------------------------------------- to join this meeting ------------------------------------------------------ 1\. go to http://domainname.com 2\. enter password" c#.netautomapper 4 1 回答 1 This answer is useful 8 我会说：这是一个错误：请参阅Github Issue 159。 AutoMapper.QueryableExtensions 在Mapper.CreateMapExpression内部使用，所以如果你写： var expression = Mapper.CreateMapExpression<fromclass, toclass="">(); 它也将失败并出现相同的异常。 目前似乎Mapper.CreateMapExpression不支持： 值类型的通用集合，例如List<string>等。 复杂类型或值类型的数组，例如string[]等Bar[]。 但是，如果你做到Foo这一点，List<item>它可以工作： public class FromClass { public List <item>Foo { get; set; } } public class ToClass { public List <item>Foo { get; set; } } public class Item { public string Bar { get; set; } } var list = new List <item>{ new Item{ Bar = "a"}, new Item() { Bar= "b" }}; FromClass anObject = new FromClass() { Foo = list }; var queryableObjects = (new FromClass[] { anObject }).AsQueryable(); Mapper.CreateMap<fromclass, toclass="">(); Mapper.CreateMap<item, item="">(); var test2 = queryableObjects.Project().To<toclass>().ToArray(); 您可以评论上述问题或使用您的代码创建一个新问题（这是一个很好的错误重现） 于 2012-04-24T05:50:04.657 回答 Related 2 csv - 向量格式向量中两个 CSV 文件的 clojure 连接 1 asp.net-mvc-3 - 验证 HTML 时出错：标签元素的 for 属性必须引用表单控件 1 django - 具有多对多字段的 Django Dajax 验证模型 2 ruby - 运行 Rake 会加载它的测试套件？ 1 sql-server-ce - Umbraco - SQL Server CE - 存在文件共享冲突。不同的进程可能正在使用该文件 1 c - 如何使用 cups API 添加 System V 过滤器？ 1 css - 用伪应用 CSS 三角形 1 git - 可以增加远程 git 存储库（不是 git hub）在等待密码时挂起的时间段吗？ 4 javascript - 对象字面量内的 Javascript 对象字面量 3 mysql - 按时间和基于 ID 的首次出现对表进行排序 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</toclass></item,></fromclass,></item></item></item></item></string></fromclass,></toclass></toclass></fromclass,></toclass></fromclass,></fromclass></t></t>

> ID：10291879
> 
> 赞同：7
> 
> 时间：
> 
> 标签：c#, .net, automapper

So, here's my situation. I've got a my two classes:

```
class FromClass
{
    public string[] Foo { get; set; }
}

class ToClass
{
    public string[] Foo { get; set; }
} 
```

The classes have properties which are arrays. They could be `List<T>` or `IEnumerable<T>`, I get the same result in any of those cases.

I try to map from one to the other using the `AutoMapper.QueryableExtensions`:

```
class Program
{
    static void Main(string[] args)
    {
        // create a "From" object
        string[] anArray = new string[] { "a", "b" };
        FromClass anObject = new FromClass() { Foo = anArray };

        // make a queryable set that includes the "From" object
        IQueryable<FromClass> queryableObjects = (new FromClass[] { anObject }).AsQueryable();

        // set up AutoMapper
        Mapper.CreateMap<FromClass, ToClass>();
        Mapper.AssertConfigurationIsValid();

        // test plain mapping
        IQueryable<ToClass> test1 = queryableObjects.Select(o => Mapper.Map<FromClass, ToClass>(o));
            // success!

        // test queryable extensions
        IQueryable<ToClass> test2 = queryableObjects.Project().To<ToClass>();
            // InvalidOperationException: "Sequence contains no elements"

    }
} 
```

Why does test2 throw an `InvalidOperationException`? If I make the type of `Foo` something that's not a collection, e.g. a `string` or some other class -- then everything works perfectly.

Am I doing something wrong? Not understanding something? Or have I hit a bug?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T05:50:04.657

我会说：这是一个错误：请参阅[Github Issue 159](https://github.com/AutoMapper/AutoMapper/issues/159)。

AutoMapper.QueryableExtensions 在`Mapper.CreateMapExpression`内部使用，所以如果你写：

```
var expression = Mapper.CreateMapExpression<FromClass, ToClass>(); 
```

它也将失败并出现相同的异常。

目前似乎`Mapper.CreateMapExpression`不支持：

*   值类型的通用集合，例如`List<string>`等。
*   复杂类型或值类型的数组，例如`string[]`等`Bar[]`。

但是，如果你做到`Foo`这一点，`List<Item>`它可以工作：

```
public class FromClass
{
    public List<Item> Foo { get; set; }
}

public class ToClass
{
    public List<Item> Foo { get; set; }
}

public class Item
{
    public string Bar { get; set; }
}

var list =  new List<Item> { new Item{ Bar = "a"}, new Item() { Bar= "b" }};
FromClass anObject = new FromClass() { Foo = list };
var queryableObjects = (new FromClass[] { anObject }).AsQueryable();
Mapper.CreateMap<FromClass, ToClass>();
Mapper.CreateMap<Item, Item>();
var test2 = queryableObjects.Project().To<ToClass>().ToArray(); 
```

您可以评论上述问题或使用您的代码创建一个新问题（这是一个很好的错误重现）

# python - 在 django 模板中设置隐藏输入字段的值

> ID：10291880
> 
> 赞同：0
> 
> 时间：2012-04-24T04:49:19.093
> 
> 标签：python, html, django

我在我的 django 模板中定义了一个隐藏字段，其值是从上下文中的视图传递的

```
<input type="hidden" value={{name}}></input> 
```

我注意到一个奇怪的问题。如果上下文中的值是像“John Doe”这样的多字串，那么输入框是

```
<input type="hidden" value="John" doe></input> 
```

这背后的原因是什么？如何解决？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T04:54:32.430

你忘记了它周围的引号。

# iphone - 目标C：如何从字符串中获取子字符串后的数字

> ID：10291881
> 
> 赞同：3
> 
> 时间：2012-04-24T04:49:20.110
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsstring

我有一个很长的字符串，如下所示

> 请计划参加以提供对现有代码的升级
> 
> 早会安排流浪汉团队成员
> 
> 会议号码：457 231 123
> 
> * * *
> 
> ## 加入此会议
> 
> 1.  去[http://domainname.com](http://domainname.com)
> 2.  输入密码

现在我想在文本“会议号”之后获取号码，即 457 231 123

请提供任何帮助。谢谢

**编辑**

假设我有一个字符串

```
NSString *myString = @"Please plan to attend to provide upgrade to existing code morning meeting to acoomdate bum team members  Meeting Number: 457 231 123 ----------------------------------------------------- to join this meeting ------------------------------------------------------  1\. go to http://domainname.com 2\. enter password" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:16:36.610

你想要[NSScanner](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)。它是专门为这种事情而存在的。

```
NSScanner *scanner = [NSScanner scannerWithString:yourString];
NSString *prefix = @"Meeting number: ";
NSString *numbers;
[scanner scanUpToString:prefix intoString:NULL];
[scanner scanString:prefix intoString:NULL];
[scanner scanUpToCharactersFromSet:[NSCharacterSet newlineCharacterSet] intoString:&numbers];
// numbers now contains the numbers you want. 
```

`scanUpToCharactersFromSet:[NSCharacterSet decimalDigitCharacterSet]`（这可以通过做而不是带有前缀字符串的两行来轻松地适应任何数字。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T05:28:49.163

您也可以使用正则表达式来捕获数字（假设结果中只有数字字符和空格，并且总是有“会议编号：”前缀）：

```
NSString *text = @"Please plan to attend to provide upgrade to existing code\nmorning meeting to acoomdate bum team members\nMeeting Number: 457 231 123\nTo join this meeting\n\ngo to http://domainname.com\nenter password";
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"Meeting Number: ([0-9 ]+)" options:NSRegularExpressionCaseInsensitive error:&error];
NSArray *matches = [regex matchesInString:text
                                  options:0
                                    range:NSMakeRange(0, [text length])];
for (NSTextCheckingResult *match in matches) {
    NSRange matchRange = [match rangeAtIndex:1];
    NSString *result = [text substringWithRange:matchRange]; // Here is the result
} 
```

这可以用来一起解析多个输入，因为我们这里有一个循环。如果要求只是解析一个输入，请将正则表达式声明后的代码替换为：

```
NSTextCheckingResult *match = [regex firstMatchInString:text
                                                options:0
                                                  range:NSMakeRange(0, [text length])];
if (match) {
    NSRange matchRange = [match rangeAtIndex:1];
    NSString *result = [text substringWithRange:matchRange];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:41:35.080

您可以通过使用以下代码扫描上述字符串中的所有数字来完成上述任务。

```
NSString * inputString = @"Please plan to attend to provide upgrade to existing code morning meeting to acoomdate bum team membersMeeting Number: 457 231 123To join this meeting go tohttp://domainname.comenter password"; // Your input string 
NSString * subStr = [inputString substringWithRange:NSMakeRange([inputString rangeOfString:@"Meeting Number:"].location, 27)];
NSString *number = [[subStr componentsSeparatedByCharactersInSet: [[NSCharacterSet decimalDigitCharacterSet] invertedSet]] componentsJoinedByString:@""]; // Scans all numbers from input string
NSLog(@"%@",number); // Your required output printed in console 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T05:00:40.740

可能你可以使用类似的东西 -

```
NSCharacterSet *nonNumberSet = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];
int numberValue = [[@"Meeting Number: 457 231 123" stringByTrimmingCharactersInSet:nonNumberSet] intValue]; 
```

编辑 - 对于所有数字 -

```
NSCharacterSet *nonNumberSet = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];
int numberValue = [[[@"Meeting Number: 457 231 123" componentsSeparatedByCharactersInSet:nonNumberSet] componentsJoinedByString:@""] intValue]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T05:02:25.620

这将做到（几乎没有一般性）：

```
NSRange promptRange = [bigString rangeOfString:@"Meeting Number: "];
NSRange numberRange = NSMakeRange(promptRange.location + promptRange.length, 11);
NSString *answer = [bigString substringWithRange:numberRange]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T05:05:55.820

像

```
NSString *str = @"Meeting Number: 457 231 123"; 
```

由你的字符串分隔

```
NSArray *theList = [str componentsSeparatedByString:@":"];
NSString *getStr = [theList objectAtIndex:1];
[getStr stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T05:10:18.207

如果您想要一个数字，这应该这样做：

```
static int ReadMeetingNumber(NSString * string) {
    // ARC:
    // locate the line
    NSString * const prefix = @"Meeting Number: ";
    NSMutableString * meetingNumberLine = nil;
    for (NSString * line in [string componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]) {
        if ([line hasPrefix:prefix]) {
            meetingNumberLine = [line mutableCopy];
        }
    }

    if (nil == meetingNumberLine) {
        return nil; 
    }
    // trim and get int value
    [meetingNumberLine deleteCharactersInRange:NSMakeRange(0, prefix.length)];
    [meetingNumberLine replaceOccurrencesOfString:@" " withString:@"" options:0 range:NSMakeRange(0, meetingNumberLine.length)];
    return meetingNumberLine.intValue;
} 
```

* * *

如果您想找到*各个*号码，应该这样做：

```
// ARC:
// Returns an NSArray of NSNumbers
static NSArray * ReadMeetingNumbers(NSString * string) {
    // locate the line
    NSString * const prefix = @"Meeting Number: ";
    NSMutableString * meetingNumberLine = nil;
    for (NSString * line in [string componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]]) {
        if ([line hasPrefix:prefix]) {
            meetingNumberLine = [line mutableCopy];
        }
    }

    if (nil == meetingNumberLine) {
        return nil; 
    }

    [meetingNumberLine deleteCharactersInRange:NSMakeRange(0, prefix.length)];

    // locate the numbers:
    NSMutableArray * results = [NSMutableArray new];
    for (NSString * at in [meetingNumberLine componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]]) {
        const int   intValue = at.intValue;
        if (0 != intValue) {
            [results addObject:[NSNumber numberWithInt:intValue]];
        }
    }
    return [results copy];
} 
```

# c++ - How to deserialize json string in c++ without using any third party library

> ID：10291882
> 
> 赞同：5
> 
> 时间：2012-04-24T04:49:26.933
> 
> 标签：c++, json, visual-c++

I am creating a application in vc++ to call webservice in json format,without using json library to serialize /deserialize the string .I am sending the json string by manually constructing it.Can anybody help me how I can deserialize the jason string without using any library in c++

Response

```
{ 
    "Result": "1",
    "gs":"0",
    "ga":"0",
    "la":"0",
    "lb":"0",
    "lc":"0",
    "ld":"0",
    "ex":"0",
    "gd":"0"        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:38:05.697

这只是使用 stl 解析响应字符串的粗略实现，但您可以将其用作进一步处理的起点。如果您可以使用任何正则表达式（例如[boost::regex](http://www.boost.org/doc/libs/1_49_0/libs/regex/doc/html/index.html)），则此解析可以更简单，但是您也可以使用特定的 json 解析器，所以忘记这个；）

```
#include <iostream>
#include <sstream>
#include <string>

const char* response = "\
\
{\
    \"Result\": \"1\",\
    \"gs\":\"0\",\
    \"ga\":\"0\",\
    \"la\":\"0\",\
    \"lb\":\"0\",\
    \"lc\":\"0\",\
    \"ld\":\"0\",\
    \"ex\":\"0\",\
    \"gd\":\"0\"\
}";

int main(int argc, char* argv[])
{
    std::stringstream ss(response); //simulating an response stream
    const unsigned int BUFFERSIZE = 256;

    //temporary buffer
    char buffer[BUFFERSIZE];
    memset(buffer, 0, BUFFERSIZE * sizeof(char));

    //returnValue.first holds the variables name
    //returnValue.second holds the variables value
    std::pair<std::string, std::string> returnValue;

    //read until the opening bracket appears
    while(ss.peek() != '{')         
    {
        //ignore the { sign and go to next position
        ss.ignore();
    }

    //get response values until the closing bracket appears
    while(ss.peek() != '}')
    {
        //read until a opening variable quote sign appears
        ss.get(buffer, BUFFERSIZE, '\"'); 
        //and ignore it (go to next position in stream)
        ss.ignore();

        //read variable token excluding the closing variable quote sign
        ss.get(buffer, BUFFERSIZE, '\"');
        //and ignore it (go to next position in stream)
        ss.ignore();
        //store the variable name
        returnValue.first = buffer;

        //read until opening value quote appears(skips the : sign)
        ss.get(buffer, BUFFERSIZE, '\"');
        //and ignore it (go to next position in stream)
        ss.ignore();

        //read value token excluding the closing value quote sign
        ss.get(buffer, BUFFERSIZE, '\"');
        //and ignore it (go to next position in stream)
        ss.ignore();
        //store the variable name
        returnValue.second = buffer;

        //do something with those extracted values
        std::cout << "Read " << returnValue.first<< " = " << returnValue.second<< std::endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T06:44:46.837

这是一个小例子，说明如何将**boost::spirit::qi**用于此类目的。

请注意，**Boost**确实是第三方库！

假设您收到一个 JSON 文件并将其保存在**json-example.txt**中，内容如下：

```
{
    "结果":"1",
    "gs":"0",
    “嘎”：“0”，
    “拉”：“0”，
    “磅”：“0”，
    "lc":"0",
    “ld”：“0”，
    “前”：“0”，
    “gd”：“0”
}

```

现在，假设您想以**key:file**方式接收所有项目。你可以这样做：

```
#include <vector>
#include <string>
#include <fstream>
#include <map>
#include <boost/spirit/include/qi.hpp>
#include <boost/fusion/adapted/std_pair.hpp>

namespace qi = boost::spirit::qi;

template<typename Iterator>
struct jsonparser : qi::grammar<Iterator, std::map<std::string, int>()>
{
    jsonparser() : jsonparser::base_type(query, "JSON-parser")
    {
        using qi::char_;
        using qi::int_;
        using qi::blank;
        using qi::eol;
        using qi::omit;

        query = omit[-(char_('{') >> eol)] >> pair % (eol | (',' >> eol)) >> '}';

        pair  = key >> -(':' >> value);

        key   = omit[*blank] >> '"' >> char_("a-zA-Z_") >> *char_("a-zA-Z_0-9") >> '"';

        value = '"' >> int_ >> '"';

    };

    qi::rule<Iterator, std::map<std::string, int>()> query;
    qi::rule<Iterator, std::pair<std::string, int>()> pair;
    qi::rule<Iterator, std::string()> key;
    qi::rule<Iterator, int()> value;

};

void main(int argc, char** argv)
{
    // Copy json-example.txt right in the std::string
    std::string jsonstr
    (
        (
            std::istreambuf_iterator<char>
            (
                *(std::auto_ptr<std::ifstream>(new std::ifstream("json-example.txt"))).get()
            )
        ),
        std::istreambuf_iterator<char>()
    );

    typedef std::string::iterator StrIterator;

    StrIterator iter_beg = jsonstr.begin();
    StrIterator iter_end = jsonstr.end();

    jsonparser<StrIterator> grammar;

    std::map<std::string,int> output;

    // Parse the given json file
    qi::parse(iter_beg, iter_end, grammatic, output);

    // Output the result
    std::for_each(output.begin(), output.end(), 
            [](const std::pair<std::string, int> &item) -> void 
            { 
                    std::cout << item.first << ":" << item.second << std::endl; 
            });
} 
```

**输出：**

```
结果：1
gs:0
加：0
拉：0
磅：0
液晶：0
ld:0
例如：0
gd:0

```

# matlab - 如何使用坐标找到起点上的最短路径 - Matlab

> ID：10291889
> 
> 赞同：0
> 
> 时间：2012-04-24T04:49:53.783
> 
> 标签：matlab, map, plot, shortest-path

我目前正在研究人行道的地图路由系统。我找到了各种坐标并将其保存在excel中。并且还绘制了路径的结果，如下图所示。

![在此处输入图像描述](../Images/a59634f618a17e08e65ef84b04cebcd7.png)

**编辑** 我已经阅读了[http://blogs.mathworks.com/steve/2011/12/13/exploring-shortest-paths-part-5/](http://blogs.mathworks.com/steve/2011/12/13/exploring-shortest-paths-part-5/)并绘制了我想要的点。但我坚持生成最短路径。下面的例子； ![在此处输入图像描述](../Images/cce6d7915d1401d00be89668205b85e3.png)

我的代码是这样的：

```
M = xlsread('YCKMap.xlsx');
waypoints =[M(:,2), M(:,3)];
[lttrk,lntrk] = track('rh',waypoints,'degrees');
figure(),geoshow(lttrk,lntrk,'DisplayType','line', 'color','r');

% Place Marker
r1 = 1.382199;
c1 = 103.840638;

r2 = 1.379667;
c2 = 103.841963;

hold on
plot(c1, r1, 'g*', 'MarkerSize', 10)
plot(c2, r2, 'g*', 'MarkerSize', 10)
hold off 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:38:36.683

我认为这个[http://blogs.mathworks.com/steve/2011/12/13/exploring-shortest-paths-part-5/](http://blogs.mathworks.com/steve/2011/12/13/exploring-shortest-paths-part-5/)（以及该系列的其余部分）对您来说将是一个有趣的阅读。但是有很多方法可以做到这一点..

# php - PHP 会话后的清理

> ID：10291891
> 
> 赞同：0
> 
> 时间：2012-04-24T04:49:57.110
> 
> 标签：php, session

我是 PHP 的新手，甚至是 PHP Sessions 的新手，但我已经阅读了很多关于它的内容；但是，我无法找到我的问题的答案。这是一个简化版本： 1 - 用户在页面上的表单中输入名称 2 - 一个 php 文件获取名称，启动会话并在服务器上为用户创建一个目录，其中包含一些用户可以查看的自定义文件.

这是一个问题：由于这不是真正的登录机制，因此不会出现注销或会话超时，我不想强​​加超时。因此，只要她/他打开浏览器页面，在服务器上为用户创建的目录应该仍然可以访问。我如何知道浏览器何时关闭并且用户不再使用会话，以便我可以删除服务器上的自定义目录？是否有任何与服务器上可以使用的会话文件相关的内容：例如，如果垃圾收集清理了会话并且它不再存在，那么我可以运行一个脚本来检测它并删除与删除的会话。

我不清楚的是，如果 session_destroy() 从未被调用，服务器上的会话会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:59:27.180

> 我如何知道浏览器何时关闭并且用户不再使用会话，以便我可以删除服务器上的自定义目录？

从理论上讲，你永远无法知道这一点。你有两个选择。以下每个选项都有其自身的优点和缺点。

*   使用 body`onunload`事件向服务器发送请求以销毁会话。不会一直工作。当用户打开两个选项卡并关闭一个选项卡时的最简单示例。
*   每 3 分钟左右有一个 AJAX 请求访问服务器。在长期会议中无用。当然，您可以根据您在正常会话中的期望自定义“3 分钟”。

> 是否有任何与服务器上可以使用的会话文件相关的内容

在上述情况下，您正在手动销毁会话。您也可以在销毁会话时删除目录。

> 我不清楚的是，如果 session_destroy() 从未被调用，服务器上的会话会发生什么。

会话有一个过期时间。您可以使用以下方法“获取”它： `ini_get("session.gc_maxlifetime");`

并使用： ini_set("session.gc_maxlifetime","3600" ); //3600 分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:00:32.767

在无状态 HTTP 连接中，“只要浏览器打开”的定义非常棘手。长话短说：您无法*可靠地*判断浏览器窗口打开了多长时间或何时关闭，这仅仅是因为浏览器和服务器之间没有持久连接。浏览器请求一个页面，服务器交付它，连接关闭。该页面可能会或可能不会在浏览器中打开，并且浏览器最终可能会或可能不会返回请求另一个页面。你只是不知道。

这就是为什么所有服务器端状态（包括会话）都基于超时。如果客户在 x 时间内没有回来，您可以*假设*他已经离开并丢弃保存的数据。

做任何其他事情都很棘手并且有缺点。例如，您可以在页面上包含一段 Javascript，它每隔一段时间就会触发一个请求，告诉服务器用户仍然在那里。但是，这会给服务器带来更高的负担，当什么都没有发生时，会收到来自许多不同客户端的持续心跳。

另一种方法是挂钩`beforeunload`Javascript 事件，您可以使用该事件来检测用户何时关闭页面。但是，这绝对不能保证一直有效，由于各种原因，您不会在服务器上收到每一个 pageunload。因此，即使在这种情况下，您最终也需要自己丢弃旧数据。

最好的方法是围绕超时和删除过期数据的想法来构建您想要做的任何事情，因为这是唯一真正可靠的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T04:55:35.300

没有。绝对没有什么特别的事情发生。Seesions 会在一段时间后过期，需要重新进行身份验证，这正是 session_destroy 时发生的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T05:13:39.370

> 由于这不是真正的登录机制，因此不会出现注销或会话超时，我不想强​​加超时。

实际上 - 这是一个真正的登录机制 - 您让用户通过“在表单上输入名称”执行登录 - 然后他们登录。它与用户名不同。

您只是没有“注销”机制。

您不能依靠浏览器来告诉您何时关闭、离开等 - 它不可靠且无法正常工作。因此 - 您最好的（也是唯一真正的）解决方案是检查服务器端的会话状态。只需创建一个每 15 分钟左右运行一个 php 文件的 CRON 作业。每次运行 php 文件时，它都会检查所有会话的最后一次活动时间。如果上次活动时间长于超时限制，则运行您的清理。

我知道您说过您不想“强制超时”-但您将不得不在某处的沙子上画一条线，然后说“嘿，如果我的用户在 X 分钟（甚至 X 小时）内不活动）-那么可以安全地假设他们已经离开并且不会回来了！”。只需设置一个非常高的阈值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T05:36:19.373

If I remember correctly default time-out for session is 1440 seconds, so it will expire automatically. If it is OK for you, then do nothing.

# objective-c - Segue 到标签栏控制器

> ID：10291892
> 
> 赞同：0
> 
> 时间：2012-04-24T04:50:05.613
> 
> 标签：objective-c, ios, user-interface, uitabbarcontroller, segue

我有这个问题：

我有一个包含 2 个部分的应用程序，第一部分是当用户第一次打开应用程序时，会出现一个带有“你叫什么名字”的屏幕，然后他跟随一个有一些按钮的屏幕，它以一个表格视图结束他可以按下页脚中的按钮转到应用程序的另一部分，该部分是具有 2 个按钮的视图控制器：1 - 返回第一个按钮屏幕（在你的名字之后），2 - 转到标签栏控制器。我的问题是：当我转到标签栏控制器 2 导航栏时出现 oO。我通过互联网阅读了我无法将标签栏控制器推入导航堆栈，这是真的吗？

那么我的 UI 的解决方案是什么？因为我希望用户能够返回到那个测试屏幕，但我也想使用这个标签栏控制器。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T09:24:30.890

我正在使用它来将选项卡控制器推到导航控制器的顶部。只需在属性检查器上为您提供选项卡控制器或导航控制器的标识符。

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil];
UITabBarController *tab=[storyboard  instantiateViewControllerWithIdentifier:@"tabController"];
[self.navigationController presentViewController:tab animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T07:02:50.343

> 我通过互联网阅读了我无法将标签栏控制器推入导航堆栈，这是真的吗？

**对，是真的。**

看一下[的文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html#//apple_ref/occ/instm/UINavigationController/pushViewController%3aanimated%3a)，`-[UINavigationController pushViewController:animated:]`它说明了它作为参数的视图控制器：

> 此对象**不能是选项卡栏控制器的实例，**并且它不能已经在导航堆栈上。

（强调补充。）

> 那么我的 UI 的解决方案是什么？

以不同的方式组织您的应用程序。一种方法是将选项卡控制器设置为您的根控制器，并在应用程序首次启动时以模态方式呈现初始视图控制器。如果用户需要返回那里，请提供一个按钮或其他方式再次以模态方式显示初始视图控制器。或者只是将初始屏幕设置为另一个选项卡，以便用户可以随时返回它。

# c# - 在 Visual Studio 2010 中自动生成的捕获

> ID：10291902
> 
> 赞同：3
> 
> 时间：2012-04-24T04:52:57.767
> 
> 标签：c#, visual-studio-2010, try-catch, code-snippets

对于所有可能的异常，有什么方法可以在 vs 2010 或第三方应用程序中自动生成方法可以抛出的“catch”？

例如，如果我使用“Directory.CreateDirectory”，它将自动创建：

```
try
{
 Directory.CreateDirectory("blabla");
}
catch (PathTooLongException)
{}
catch (DirectoryNotFoundException)
{}
catch (IOException)
{}
catch (ArgumentNullException)
{}
catch (UnauthorizedAccessException)
{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:11:49.790

有一个工具可以在您的代码中找到未处理的异常：[Red Gate 软件的 Exception Hunter](http://www.red-gate.com/products/dotnet-development/exception-hunter/)。

事实证明，他们停止了它：

> 随着 .NET 4.0 和 WPF 的发布，CLR 可以抛出的异常数量大大增加，达到了压倒性的地步。排除列表不再涵盖 CLR 可能抛出的所有不太可能的异常。这意味着，尽管 Exception Hunter 会提供准确的结果，但这些结果将包含一长串潜在的异常，其中大部分都无需担心。

这应该表明“捕获方法可以抛出的所有异常”可能是一个坏主意。通常的模式是全局包罗万象

```
try {
    ...
} catch (Exception ex) {
    logAndShowErrorMessage(ex);
} 
```

仅在用户界面的*顶层*（WinForms），或处理专用方法中的错误（WPF：[Application.DispatcherUnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)，WebForms：[Application.Error](http://msdn.microsoft.com/en-us/library/24395wz3.aspx)）。

*仅在您希望*发生此异常并且您*知道*如何专门处理此异常以及之后如何继续执行程序的异常情况下，您才直接在代码中处理异常。

* * *

附带说明：您想要的看起来与称为“*检查异常*”的 Java 功能非常相似：它强制您处理异常或声明您的方法将重新抛出它。下面的问题解释了为什么 C# 的设计者故意选择*不*包含这个特性：

*   [为什么在 .NET 中不检查异常？](https://stackoverflow.com/questions/124143/why-are-exceptions-not-checked-in-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:56:27.730

默默地忽略异常是非常糟糕的做法，因此，当然，没有办法使用空主体自动生成捕获。此外，该方法可以抛出哪些异常是未知的，因为在 C# 中，没有声明函数可能抛出哪些异常（与 Java 相对）。

如果你仍然想忽略所有的异常，你可以只写`catch(Exception)`，它将捕获所有的异常，因为所有的异常都是从基`Exception`类继承的。但是你确定默默地忽略可能发生的一切是个好主意吗？最好让用户（或调用者）知道出了点问题，而不是默默地不做预期的工作（例如，想象一下 if`Directory.CreateDirectory`会以这种方式行事，这样您就永远不知道它是否成功创建了目录或不是，如果不是，是什么原因。

# tomcat - 当前在 Tomcat 6.0.35 下运行的 Web 应用程序。我需要在 Tomcat 5.5.23 下测试它，但它甚至不允许我添加它

> ID：10291904
> 
> 赞同：0
> 
> 时间：2012-04-24T04:53:14.500
> 
> 标签：tomcat

我改变了托管服务提供商，他们有 CentOS。他们免费安装 Tomcat 5.5（已经完成），但安装 Tomcat 6 或 7 需要不少钱。

要决定我需要在我自己的盒子上测试我的应用程序。它当前运行的是 Tomcat 6.0.35，而不是 5.5.23。

我非常有信心，没有什么需要改变的，或者很少改变，让它运行。但是，当我尝试将我的应用程序添加到 5.5.23 时，我会弹出一条消息说“没有可以从服务器添加或删除的应用程序”。

我相信项目中的某个地方可以更改，以便至少尝试运行它？

我将 6.0.35 与新安装的 5.5.23 放在一起。

我已从 6.0.23 中删除了该应用程序，但由于该弹出消息，我仍然无法将其添加到另一个应用程序中。

如果在删除后，我尝试运行该应用程序，它会自动添加到 6.0.23，而不会询问我想要哪一个。

有人知道可以改变什么，至少尝试运行它吗？

我使用 Eclipse Helios。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:24:10.110

您是否尝试将项目方面（在项目属性中）更改为 Web Module 2.4 并将目标运行时更改为 Tomcat 5？

# javascript - 将外部jsp加载到当前页面DOM时在jquery js中出错

> ID：10291906
> 
> 赞同：0
> 
> 时间：2012-04-24T04:53:36.787
> 
> 标签：javascript, jquery, ajax, jsp

我需要加载一个外部 jsp 页面，该页面将包含定义了函数的脚本标签。我必须将jsp页面的一部分加载到请求页面的div中，并将脚本加载到页面中并在当前页面中调用这些脚本函数。

我尝试使用带有 GET 类型和 async:false 的 jquery ajax 调用。但是当将返回的数据加载到当前页面 DIV 时，在 globalEval 函数中出现 jquery js 错误。

萤火虫指向jquery js源的这一部分..

```
// Evaluates a script in a global context
// Workarounds based on findings by Jim Driscoll
// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
    globalEval: function( data ) {
        if ( data && rnotwhite.test( data ) ) {
            // We use execScript on Internet Explorer
            // We use an anonymous function so that context is window
            // rather than jQuery in Firefox
            ( window.execScript || function( data ) {
                window[ "eval" ].call( window, data );
            } )( data );
        }
    }, 
```

下面是我正在使用的代码片段..

```
$.ajax({url:'/web/guest/campaignreports',success:function (data) {

                    alert('hi');

                    dialogData = $(data).find('.portlet-content');

                    $('body div#second_popupcontent').html(data);

                    Demographicshome_charts();
                    $('body div#second_popupcontent').dialog({title: "Pop Up",width: 600,modal: true,
                        buttons: {
                            "Cancel":function(){
                            $(this).dialog('close');
                            }
                            }
                        });

                    },cache:false,async:false,type:'GET'}); 
```

请指导我，让我知道我做错了什么，并帮助我解决这个问题并让我的要求工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:30:58.803

您是否找到脚本的哪一行触发了错误？

为什么要初始化 dialogData？尤其是那里！为什么不：

```
$('#second_popupcontent').html(data);
dialogData = $('#second_popupcontent .portlet-content'); 
```

也许你的问题来自这里......

此外，添加额外的选择器（例如 'body div#second_popupcontent'; ）是一种不好的做法。'#second_popupcontent' 就足够了，而且通常更快。

# java - JTable 在 GUI 中为空，控制台显示填充的 DefaultTableModel

> ID：10291908
> 
> 赞同：2
> 
> 时间：2012-04-24T04:54:18.863
> 
> 标签：java, swing, model-view-controller, user-interface, netbeans

使用 Netbeans GUI 构建器，可能是同步、线程或按值/引用传递问题，阻止将 DefaultTableModel 从实用程序类传递到 JFrame？

在任何一种情况下，控制台输出都是相同的，并且代码只是从实用程序类中复制/粘贴并放置在 JFrame 中。但是，如果使用实用程序类，则没有 GUI 输出。

如何追踪 JTable 为空或为空的原因？据我所知，DefaultTableModel 填充了数据。

控制台输出：

```
init:
Deleting: /home/thufir/NetBeansProjects/SwingNNTP/build/built-jar.properties
deps-jar:
Updating property file: /home/thufir/NetBeansProjects/SwingNNTP/build/built-jar.properties
Compiling 1 source file to /home/thufir/NetBeansProjects/SwingNNTP/build/classes
warning: [options] bootstrap class path not set in conjunction with -source 1.5
1 warning
compile:
run:
Apr 23, 2012 9:46:25 PM net.bounceme.dur.nntp.EnumNNTP <init>
INFO: SingletonNNTP..only once...
Apr 23, 2012 9:46:25 PM net.bounceme.dur.nntp.PropertiesReader getProps
INFO: NNTP.loadMessages...
Apr 23, 2012 9:46:25 PM net.bounceme.dur.nntp.EnumNNTP connect
INFO: SingletonNNTP.connect..
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.EnumNNTP setIndex
INFO: SingletonNNTP.setIndex..164
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.EnumNNTP page
INFO: SingletonNNTP.page..174
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.EnumNNTP setIndex
INFO: SingletonNNTP.setIndex..164
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.EnumNNTP getMessages
INFO: SingletonNNTP.getMessages..
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:26 PM net.bounceme.dur.nntp.MessageBean setFrom
INFO: MessageBean.setFrom..unknown <post@gwene.org>
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:24 PDT 2012The return of the euro crisis: Beyond battlefield medicine
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:24 PDT 2012North Korea’s gulag: Never again?
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:24 PDT 2012Nationalising YPF: Cristina scrapes the barrel
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:23 PDT 2012Charlemagne: April showers on the euro
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:23 PDT 2012Jihadist terrorism: Al-Qaeda is down, but far from out
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:23 PDT 2012Justice for dictators: History rules
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:23 PDT 2012Buttonwood: Feeling peaky
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:23 PDT 2012Couples and housework: The ironing lady
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:23 PDT 2012Markets
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:22 PDT 2012The World Bank: Kim selection
Apr 23, 2012 9:46:27 PM net.bounceme.dur.nntp.MessageUtils getDataTableModel
INFO: unknown <post@gwene.org>Sun Apr 22 02:58:22 PDT 2012The Economist commodity-price index
BUILD SUCCESSFUL (total time: 13 seconds) 
```

MessagesJFrame 中被注释掉的代码实际上可以工作，而将其传递给实用程序类会引入问题——显然是空的 JTable。

框架：

```
package net.bounceme.dur.nntp;

import java.util.List;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.Message;
import javax.swing.table.DefaultTableModel;

public class MessagesJFrame extends javax.swing.JFrame {

    private DefaultTableModel defaultTableModel = new DefaultTableModel();

    public MessagesJFrame() throws Exception {
        initComponents();
        MessageUtils.loadMessages();
        defaultTableModel = MessageUtils.getDataTableModel();
        /*
        EnumNNTP nntp = EnumNNTP.INSTANCE;
        List<Message> listOfMessages = nntp.getMessages(false);//nntp debug off
        Vector messages = new Vector();
        for (Message m : listOfMessages) {
            MessageBean messageBean = new MessageBean(m);
            messages.add(messageBean);
        }
        defaultTableModel.addColumn("from");
        defaultTableModel.addColumn("sent");
        defaultTableModel.addColumn("subject");
        for (Object o : messages) {  //awkward Vector manipulation
            MessageBean messageBean = (MessageBean) o;
            Vector messageBeanAsVector = messageBean.getVector();
            defaultTableModel.addRow(messageBeanAsVector);
        }*/
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jTable1.setModel(defaultTableModel);
        jScrollPane1.setViewportView(jTable1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 819, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 455, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MessagesJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MessagesJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MessagesJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MessagesJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                try {
                    new MessagesJFrame().setVisible(true);
                } catch (Exception ex) {
                    Logger.getLogger(MessagesJFrame.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable jTable1;
    // End of variables declaration
} 
```

实用类：

```
package net.bounceme.dur.nntp;

import java.util.Iterator;
import java.util.List;
import java.util.Vector;
import java.util.logging.Logger;
import javax.mail.Message;
import javax.swing.table.DefaultTableModel;

public class MessageUtils {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(MessageUtils.class.getName());
    private static DefaultTableModel defaultTableModel = new DefaultTableModel();
    private static EnumNNTP nntp = EnumNNTP.INSTANCE;
    private static Vector messages = new Vector();

    public static void loadMessages() throws Exception {
        List<Message> listOfMessages = nntp.getMessages(false);//nntp debug off
        messages.clear();
        for (Message m : listOfMessages) {
            MessageBean messageBean = new MessageBean(m);
            messages.add(messageBean);
        }
        loadTableModel();
    }

    private static void loadTableModel() {
        defaultTableModel = new DefaultTableModel();
        defaultTableModel.addColumn("from");
        defaultTableModel.addColumn("sent");
        defaultTableModel.addColumn("subject");
        for (Object o : messages) {  //awkward Vector manipulation
            MessageBean messageBean = (MessageBean) o;
            Vector messageBeanAsVector = messageBean.getVector();
            defaultTableModel.addRow(messageBeanAsVector);
        }
    }

    public static DefaultTableModel getDataTableModel() {
        Vector vector = defaultTableModel.getDataVector();
        Iterator it = vector.iterator();
        while (it.hasNext()) {
            Vector v = (Vector) it.next();
            Iterator i = v.iterator();
            StringBuilder row = new StringBuilder();
            while (i.hasNext()) {
                row.append(i.next());
            }
            LOG.info(row.toString());
        }
        return defaultTableModel;
    }

    public static void setDataTableModel(DefaultTableModel dataTableModel) {
        MessageUtils.defaultTableModel = dataTableModel;
    }

    public static Vector getMessages() {
        return messages;
    }

    public static void setMessages(Vector messages) {
        MessageUtils.messages = messages;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T05:31:10.723

当然，您最终会得到一个空的`JTable`. 您有两个被调用的实例`defaultTableModel`，它们没有任何共同之处。您需要将`defaultTableModel`您在 UI 中使用的 传递给实用程序类，并让实用程序类填充该特定模型（或相反，将`defaultTableModel`实用程序类中使用的实例设置为 的模型`JTable`）。

*编辑*

为了清楚起见，问题是你可能认为

```
defaultTableModel = MessageUtils.getDataTableModel(); 
```

将调整您在 上设置的模型`JTable`，但不会。它只是让您的`defaultTableModel`领域引用另一个`TableModel`然后是原始领域。如果您只是将此行移动为构造函数的第一行，那么您的代码将起作用，因为您实际上会将结果设置`MessageUtils.getDataTableModel()`为`TableModel``JTable`

# android - 如何在android中发送带有情感图标（笑脸）的发送消息？

> ID：10291910
> 
> 赞同：0
> 
> 时间：2012-04-24T04:54:36.487
> 
> 标签：android, message

我正在做一个小项目，它发送带有情感图标的消息。我使用以下函数将图像转换为 spannble 字符串以将情感图标作为文本发送，但问题是接收者无法在他的消息上看到情感图标，而不是接收者看到的情感图标 [ H]？？？？

```
 public SpannableStringBuilder addSmily(int position){
        Drawable happySmileys = mContext.getResources().getDrawable(mThumbIds[position]);
        happySmileys .setBounds(0, 0, happySmileys.getIntrinsicWidth(), happySmileys.getIntrinsicHeight());
        /*Drawable sadSmiley = this.getResources().getDrawable(R.drawable.progress_4);
        sadSmiley .setBounds(0, 0, sadSmiley.getIntrinsicWidth(), sadSmiley.getIntrinsicHeight());*/

        SpannableStringBuilder builder = new SpannableStringBuilder();
        builder.append("[h]");
        builder.setSpan(new ImageSpan(happySmileys), builder.length()-"[h]".length(), builder.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        return builder;
    } 
```

感谢您阅读我的问题。有什么建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:29:32.923

您要求做的不是所有设备都支持，管理用户电话消息的应用程序不知道该怎么做。如果你想让它工作，你需要编写自己的应用程序来阅读消息（顺便说一句，这并不难）。然后，当您向安装了您的应用程序的人发送消息时，您可以做任何事情......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:45:33.473

谢谢巴比布的概念。经过一番研究，我发现这里的解决方案就是我的实施方式。

我的应用程序发送消息，例如“我很高兴![在此处输入图像描述](../Images/7aacb762685cef45f8b36ab17876167c.png)”作为“我很高兴:-)”然后当我收到消息时，我检查模式:-) 并将其替换为 ![在此处输入图像描述](../Images/7aacb762685cef45f8b36ab17876167c.png).

这是我如何替换

```
public static CharSequence addSmileySpans(Context context, CharSequence your_recieved_message) {
    HashMap<Integer, String> smilyRegexMap = new HashMap<Integer, String>();

    smilyRegexMap.put(R.drawable.android_smile, ":-\\)");

    SpannableStringBuilder builder = new SpannableStringBuilder(your_recieved_message);
    @SuppressWarnings("rawtypes")
    Iterator it = smilyRegexMap.entrySet().iterator();
    while (it.hasNext()) {
        @SuppressWarnings("rawtypes")
        Map.Entry pairs = (Map.Entry) it.next();
        Pattern mPattern = Pattern.compile((String) pairs.getValue(),
                Pattern.CASE_INSENSITIVE);
        Matcher matcher = mPattern.matcher(your_recieved_message);
        while (matcher.find()) {
            Bitmap smiley = BitmapFactory.decodeResource(
                    context.getResources(), ((Integer) pairs.getKey()));
            builder.setSpan(new ImageSpan(smiley), matcher.start(),
                    matcher.end(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
        }
    }
    return builder;
} 
```

然后在 TextView 上设置函数的返回值，例如

```
messageTextView.setText(addSmileySpans(context,"i iam happy :-)")) 
```

# php - 简单的 HTML DOM 认为字符串是对象

> ID：10291911
> 
> 赞同：1
> 
> 时间：2012-04-24T04:54:40.147
> 
> 标签：php, parsing, simple-html-dom

我正在使用 Simple HTML DOM 将 HTML 电子邮件转换为文本电子邮件。我不断收到错误：

致命错误：不能将 simple_html_dom 类型的对象用作数组

我在尝试将对象传递给 $html = str_get_html($body); 时得到的 只是它不应该是一个对象，它应该是一个字符串。它可以在我的计算机上本地运行它，但不能在我的网络服务器上运行。这是怎么回事？

```
include '../classes/parser.class.php';
$textEmail = convertToText($_POST['htmlEmail']);

function convertToText($body)
{
    $html = str_get_html($body);
    $links = $html->find('a');

    // Replace links with text (http://www.link.com)
    foreach($links as $l)
    {
        $l->outertext = $l->innertext . ' (' . $l->href . ')';
    }

    // Save progress back into a string
    $str = $html; # also tried $str = $html->save();
    $html = str_get_html($str);

    // Only grab the text
    $text = $html->find('text');
    foreach($text as $t)
    {
        $textBody .= $t . "\n";
    }

    return $textBody;
} 
```

# css - 更改 primefaces 手风琴图标

> ID：10291919
> 
> 赞同：1
> 
> 时间：2012-04-24T04:55:13.350
> 
> 标签：css, jsf, icons, primefaces, accordion

有什么办法可以改变primefaces的手风琴面板中的图标吗？

我想将向右和向下箭头更改为 plus([+]) 和 minus([-]) 符号。

谁能解释一下怎么做？？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T05:18:07.163

您可以添加一些自定义 CSS，将默认图标的背景位置更改为加号和减号：

```
.ui-accordion .ui-icon.ui-icon-triangle-1-e {
    background-position: -16px -128px;
}
.ui-accordion .ui-icon.ui-icon-triangle-1-s {
    background-position: -48px -128px;
} 
```

在当前的 PrimeFaces 3.2 版本中，似乎没有更简洁的方法来显式指定组件上的`.ui-icon-plus`and 。您可能需要为此发布[增强请求](http://code.google.com/p/primefaces/issues/)。`.ui-icon-minus``<p:accordionPanel>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T11:38:00.897

you can using the JQuery:

```
$(document).ready(function() {
    $("#[accordion-id] h3 span.ui-icon").removeClass( "ui-icon-triangle-1-e" ).addClass( "ui-icon-plus" )
}); 
```

don't forget to replace the [accordion-id] with correct ***Accordion Id***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-06T14:47:57.773

您可以通过使用以下 CSS 代码来实现：

```
.ui-accordion .ui-accordion-header a .ui-accordion-toggle-icon::before { 
    content:'\e90d';
} 
```

# python - python中的站点包是什么，如果你不是root，你可以安装/使用它们吗？

> ID：10291922
> 
> 赞同：6
> 
> 时间：2012-04-24T04:55:31.410
> 
> 标签：python

我正在尝试将Linux 中的[lldb](http://lldb.llvm.org/)安装到我系统上的主目录（我没有 root 访问权限），并且在尝试在其中创建子目录的步骤中遇到了问题`/usr/lib/python2.6/site-packages`

我在 Makefile 中找到了设置此变量的行，它是：

```
PYTHON_DEST_DIR := $(DESTDIR)/$(call realpath,$(shell python -c 'import sys; print sys.exec_prefix')/lib/python$(shell python -c 'import sys; print sys.version[:3]')/site-packages) 
```

所以这不是我可以在配置 sciprt 中指定的东西，但我可以更改 Makefile 以将文件复制到我的主目录中的某个位置。但我真的不明白什么`site-packages`是或如何指定 python 应该在这些文件的其他位置查找。这是可能的事情还是我想做的有任何解决方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T05:15:00.657

回答上述问题：

site-packages 是安装第 3 方包的位置（即，不是核心 python 发行版的一部分）。在 Linux 上，您必须是 root 才能写入它。

要解决您的问题：

[virtualenv](http://pypi.python.org/pypi/virtualenv)是一个 python 环境管理器，它可以让你在你的主目录中创建你自己的 python 环境。要快速开始使用 virtualenv 和[virtualenvwrapper](http://www.doughellmann.com/projects/virtualenvwrapper/)（这使得 virtualenv 更易于使用），请查看[burrito](https://github.com/brainsik/virtualenv-burrito)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T05:06:48.190

一个可能有帮助的解决方案是安装[virtualenv](http://pypi.python.org/pypi/virtualenv)。它是一个 python 包，可帮助设置一些更烦人的路径重定向问题，并允许您使用 pip 和 easy_install 直接安装到您的主目录中。

那是漫长的路线。

除了 python 将查找的已知目录之外，site-packages 并没有多大意义。您可以在尝试导入时更改 PYTHONPATH 环境变量以包含其他目录。我不确定您是如何安装的，但是很多时候构建过程允许您指定 --prefix 来告诉构建和安装过程实际输出文件的位置。我对你的具体情况了解不多，无法判断这是否适用。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2015-06-02T12:30:57.873

这是简单的代码

sudo apt-get install pip

# c++ - getaddrinfo 失败并出现错误：C++ 中的 ai_socktype 不支持 Servname

> ID：10291923
> 
> 赞同：4
> 
> 时间：2012-04-24T04:55:32.357
> 
> 标签：c++, sockets

我观察到，这是因为端口。端口是 C++ 字符串。当我硬编码端口号说“4091”时，我没有看到这个问题。有什么建议么？

```
int sockfd;
struct addrinfo hints, *servinfo, *p;
int rv;

memset(&hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC; 
hints.ai_socktype = SOCK_DGRAM;
hints.ai_flags = AI_PASSIVE; 

cout << "port: " << port << endl;

const char * por = port.c_str();

if ((rv = getaddrinfo(NULL, por, &hints, &servinfo)) != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T05:33:59.080

这可能看起来绝对愚蠢，但这就是我修复它的方法。

```
 int pp = atoi(port.c_str());
    char buffer[50];
    sprintf( buffer, "%d", pp );   

    if ((rv = getaddrinfo(NULL, buffer, &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
    } 
```

编辑：实际问题是我正在从文件中读取端口信息。当我使用 getline() 时，无论出于何种原因，它都没有在末尾删除换行符。不再需要上述修复（如果您称其为修复）。

# virtual-machine - 删除文件后，VirtualBox VM 仍然很大

> ID：10291926
> 
> 赞同：0
> 
> 时间：2012-04-24T04:56:10.497
> 
> 标签：virtual-machine, virtualbox

我对 Oracle VirtualBox 有疑问，我已将一个大文件 (80GB) 移动到 VM 中，但在删除大文件后，我的 VM 仍然保持相同大小但没有释放。

任何想法？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:31:19.967

You need to use the following command:

```
VBoxManage modifyhd your_hd.vdi --compact 
```

You may also need to zero the free space first using a tool like [SDelete](http://technet.microsoft.com/en-us/sysinternals/bb897443) from the SysInternals group at Microsoft.

# javascript - CSS 框阴影在 IE7/8 中不起作用

> ID：10291927
> 
> 赞同：0
> 
> 时间：2012-04-24T04:56:11.617
> 
> 标签：javascript, jquery, css

嘿，我想弄清楚如何使盒子阴影在 IE 7 或 8 中工作。它目前在 IE9 和所有其他浏览器中工作正常。

这是我的 CSS 代码：

```
#main{
    -moz-box-shadow:#000 0px 0px 40px;
    -webkit-box-shadow:#000 0px 0px 40px;
    box-shadow: 0px 0px 40px #000;
    border: 1px solid #000;
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=50);
    -moz-opacity: 0.5;
    -khtml-opacity: 0.5;
    opacity: 0.5;
    behavior: url(ie-css3.htc); 
} 
```

在 IE8 中： ![即8](../Images/3b3f57a1ae649cc49baf22f1c476b7e7.png)

在 IE9 中： ![IE9](../Images/70a074557e572f43872c9f07f6ea9226.png)

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:01:59.017

看起来您需要在 Internet Explorer 7 和 8 中使用阴影过滤器来模拟它：

来源：[http ://caniuse.com/#search=box-shadow](http://caniuse.com/#search=box-shadow)

“影子”过滤器的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/ms533086 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms533086(v=vs.85).aspx)

# java - 如何使用listeditor作为对话框？

> ID：10291928
> 
> 赞同：0
> 
> 时间：2012-04-24T04:56:24.337
> 
> 标签：java, eclipse

我想要一个对话框，它在按钮栏中将有三个按钮作为全选，带有确定和取消按钮的向上和向下按钮。我可以在这里使用listeditor吗？它会怎样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:06:17.257

您可以覆盖`ListEditor.getButtonBoxControl()`. 请参阅此[示例](http://sandipchitale.blogspot.ca/2008/09/enhanced-listeditor-implementation.html)。

# c++ - 我可以在 cblas_gemm(...) 中传递与“C”和“A”矩阵相同的矩阵指针吗？

> ID：10291933
> 
> 赞同：0
> 
> 时间：2012-04-24T04:57:35.570
> 
> 标签：c++, c, blas

我想用值 C*B 更新 C。我还想用值 C*C 更新 C。

这样做安全吗？我不想给我的学生糟糕的代码。我目前正在将 cblas_gemm(...) 的临时结果复制回 C 矩阵...这很慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:42:14.583

如果使用相同的矩阵作为输入和输出是安全的，那么 BLAS 实现将需要使用临时工作区。由于您没有提供这样的工作空间，因为函数没有请求，我们可以得出结论，您不能使用相同的矩阵作为输入和输出。

事实上，如果 BLAS 例程将接受一个参数作为输入和输出，那么它将通过使用一个参数而不是两个参数来实现，并记录该参数同时用于输入和输出。

您说使用临时输出变量然后在 BLAS 调用后进行复制很慢。但是与矩阵相乘相比，该复制操作应该是微不足道的。您确定副本是瓶颈吗？你计时了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:16:19.747

BLAS 标准（[可在此处获得](http://www.netlib.org/blas/blast-forum/)）只是说：

> 该例程执行通用矩阵矩阵乘法，其中 .... A、B 和 C 是通用矩阵。

所以，我会说它是实现定义的，你可以假设这样做可能是不安全的。但是，如果您正在使用特定的实现，您可以随时检查该实现的来源。

或者，正如评论者所建议的那样，SYRK 可能会做你想做的事。

# mongodb - 从 MongoDB shell 生成具有新 GUID 的新行

> ID：10291936
> 
> 赞同：1
> 
> 时间：2012-04-24T04:58:40.483
> 
> 标签：mongodb, mongodb-shell, nosql

我在 MongoDB 集合中有一些带有 GUID 类型键的文档，我希望能够使用 shell 将它们复制到具有新 GUID 的新行。我试过这个：

```
db.schedules.find().forEach(function(x) { 
    x._id = null; 
    db.schedules.save(x); 
}); 
```

我希望**_id**字段在我将其设置为 null 后自动生成，但这当然是幼稚的。如果有的话，我怎么能在 shell 中生成一个新的 GUID？

**更新**

显然不可能从外壳生成 GUID。我最终用 C# 编写了一个迷你脚本，以便使用 Mongo C# 驱动程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T05:06:57.270

试试这个：

```
x._id = new ObjectId();
db.schedules.insert(x); 
```

你也可以这样做：

```
delete x._id;
db.schedules.insert(x); 
```

# silverlight - Silverlight 5 中的 Metro 风格 AppBar

> ID：10291937
> 
> 赞同：2
> 
> 时间：2012-04-24T04:58:53.353
> 
> 标签：silverlight, microsoft-metro, silverlight-5.0

我真的很喜欢即将推出的 Metro 应用程序 (Windows 8) 中的 AppBar UI 和 UX。我想知道是否有人已经在 Silverlight 应用程序中复制了这个，例如版本 5 或 4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:56:38.507

这是我创建的一个示例：http:
[//stevenhollidge.blogspot.co.uk/2012/06/silverlight-metro-app-bar.html](http://stevenhollidge.blogspot.co.uk/2012/06/silverlight-metro-app-bar.html)

# java - 不能在 ArrayList 中添加对象？

> ID：10291938
> 
> 赞同：2
> 
> 时间：2012-04-24T04:59:09.203
> 
> 标签：java, optimization

您好我正在尝试将对象添加到 Arraylist 中，我正在使用 Java。但它没有按我的预期工作。

假设我们有一个 class `Sentence`，所以代码看起来像

```
ArrayList<Sentence> result = new ArrayList<Sentence>();
for (int i =0; i<10;i++)
{
    Sentence s = new Sentence(i.toString(),i);
    //there is a string and an int in this Sentence object need to be set
    result.add(s); 
} 
```

以上工作正常。但我希望加快我的代码，所以我尝试只新建一个对象，代码变为：

```
ArrayList<Sentence> result = new ArrayList<Sentence>();
Sentence s = new Sentence(" ",0);
for (int i =0; i<10;i++)
{
    s.setString(i.toString());
    s.setInt(i);
    result.add(s); 
} 
```

但是，在这种情况下，我的结果将变为空。我想我确实更改了对象中的内容`s`，但我不知道为什么它在`result.add(s)`.

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T05:04:17.380

你的`s`变量总是指同一个对象。看起来您正在添加相同的对象 10 次，到 for 循环结束时，其字符串等于`"9"`且 int 等于`9`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T05:04:31.330

在第二种情况下，您将 10 个指向单个`Sentence`实例的指针添加到`ArrayList`.

您必须制作 10`Sentence`才能将 10 指针插入`ArrayList`.

我认为您正在搞乱 Java 中的按值传递和按引用传递，为了澄清这一点，请查看[这篇文章](https://stackoverflow.com/q/795160/593709)。

[这篇文章](https://stackoverflow.com/q/2777969/593709)也可能对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:28:55.637

```
ArrayList<Sentence> result = new ArrayList<Sentence>();
for (int i =0; i<10;i++)
{
    result.add(new Sentence(i.toString(),i)); 
} 
```

如果您想创建比使用此示例更少的代码行，但它不一定更优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T23:29:17.260

为了防止重复对象。始终在使用前实例化它们。这样，您的 List 将有 n 个唯一对象，

# android - 如何将图像直接存储到应用程序库而不存储在电话库中？

> ID：10291939
> 
> 赞同：0
> 
> 时间：2012-04-24T04:59:13.357
> 
> 标签：android, image-gallery

如何将图像直接存储到应用程序库而不存储在电话库中？

在我的应用程序 1 中想要将图像直接存储到我的应用程序库中？？

可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:15:39.427

在您的应用程序中创建一个 cameraActivity 将图片从那里存储到一个文件夹中，该文件夹将被隐藏，因此默认图库应用程序无法从隐藏文件夹中找到图像，然后当您启动应用程序时，从那里获取图像将它们显示在您的图库中。此链接将为您提供如何为您的应用程序创建相机视图。[如何编写 Android 相机应用程序](http://boundarydevices.com/blogs/how-to-write-an-android-camera-app)

# c# - 将用户名作为电子邮件地址第一部分的 DotNet SMTPMailclient 不起作用

> ID：10291943
> 
> 赞同：1
> 
> 时间：2012-04-24T04:59:29.957
> 
> 标签：c#, .net, smtp

我正在尝试与我的邮件服务器建立邮件客户端连接，我的邮件服务器只接受电子邮件的第一部分而不是完整的部分。在程序中这样做会给我一个异常，即指定的用户名字符串不是有效格式。这是使用的代码

```
SMTPMailClient client = new SMTPMailClient("Vijay", "Password1", server, port, subject, body, 
this.ssl.Checked); 
```

此语句适用于接受电子邮件地址的邮件服务器，其中我将用户名提供为“vijay@xxxxx.com”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:37:03.653

谷歌搜索时找不到您使用的客户端。但是邮件需要一个发件人，很可能您使用的类需要一个地址作为用户名和发件人地址。

您总是可以使用[SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)来发送邮件。

# sql - 使用递归 CTE 遍历父/子树？

> ID：10291945
> 
> 赞同：3
> 
> 时间：2012-04-24T04:59:33.117
> 
> 标签：sql, sql-server, recursion, common-table-expression

我被 cte 卡住了，我想要一个查询，其中第一个父项为空。和前一个父母的孩子，将成为下一个父母，依此类推。

```
WITH RESULT (PARENT,CHILD,TNAME,LEVEL)
AS
(
--anchor
 SELECT E.PARENT_GENERAL_KEY,E.M_GENERAL_KEY,E.NAME ,0 AS LEVEL
  FROM RPT_SYN_M_GENERAL AS E 
 WHERE E.PARENT_GENERAL_KEY IS NULL
 UNION ALL
 --outer
 SELECT e.PARENT_GENERAL_KEY,E.M_GENERAL_KEY,e.NAME ,LEVEL +1
 FROM RPT_SYN_M_GENERAL AS E
 INNER JOIN RESULT AS D  
 ON E.PARENT_GENERAL_KEY=D.CHILD 
)
SELECT PARENT,CHILD,TNAME,LEVEL FROM RESULT as d
order by PARENT,CHILD 
```

上面提到的是我的查询。请帮我遍历最后一个孩子。

我的输出是：

```
 PARENT CHILD   TNAME               LEVEL
  NULL  0       ACCOUNT_MASTER        0
   0    1       LIABILITIES           1
   0    2       ASSETS                1
   0    3       INCOME                1
   0    4       EXPENSE               1
   0    15003   POLISHED DIAMOND      1
   0    15004   DEMO                  1
   0    15005   DEMO ( FACTORY        1
   1    238     CAPITAL A/C.          2
   1    1067    PROVISION             2
   1    1284    SECURED LOANS         2 
   1    2968    UNSECURED LOANS       2
   1    3535    SHARE HOLDERS         2
   2    484     FIXED ASSETS A/C      2
   2    3301    INVESTMENTS           2
   2    4858    CURRENT ASSETS        2
   2    4859    LOANS ADVANCES        2
   3    867     OTHER INCOME          2
   3    1246    SALES                 2 
```

我想要的输出是：

```
 PARENT      CHILD  TNAME             LEVEL
   null      0                          0
    0        1                          1 
    1        238                        2
   238       982                        3
   982       26                         4
   982       894                        4        
   982       1321                       4
   238       7757                       3
   7757      7521                       4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:47:56.717

对于您指定的输出，需要对 CTE 中的行进行排名，然后您只需在每次迭代中过滤排名为 1 的行。

```
WITH RESULT (ROW_RANK, PARENT,CHILD,TNAME,[LEVEL])
AS
(
--anchor
 SELECT RANK() OVER (ORDER BY E.M_GENERAL_KEY), E.PARENT_GENERAL_KEY,E.M_GENERAL_KEY,E.NAME ,0 AS [LEVEL]
  FROM RPT_SYN_M_GENERAL AS E 
 WHERE E.PARENT_GENERAL_KEY IS NULL
 UNION ALL
 --outer
 SELECT RANK() OVER (ORDER BY E.M_GENERAL_KEY), E.PARENT_GENERAL_KEY,E.M_GENERAL_KEY,E.NAME, D.[LEVEL] +1 
 FROM RPT_SYN_M_GENERAL AS E
 INNER JOIN RESULT AS D  
 ON E.PARENT_GENERAL_KEY=D.CHILD AND ROW_RANK = 1
)
SELECT PARENT,CHILD,TNAME,LEVEL FROM RESULT as d
WHERE ROW_RANK = 1
order by PARENT,CHILD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:08:31.670

在没有看到您的基础表的情况下，我无法测试任何建议。但是，看看如果你在外部查询中切换父母和孩子会发生什么：

```
WITH RESULT (PARENT,CHILD,TNAME,LEVEL)
AS
(
--anchor
 SELECT E.PARENT_GENERAL_KEY,E.M_GENERAL_KEY,E.NAME ,0 AS LEVEL
  FROM RPT_SYN_M_GENERAL AS E 
 WHERE E.PARENT_GENERAL_KEY IS NULL
 UNION ALL
 --outer
 SELECT D.CHILD,D.PARENT,e.NAME ,LEVEL +1 --switched parent/child
 FROM RPT_SYN_M_GENERAL AS E
 INNER JOIN RESULT AS D  
 ON E.PARENT_GENERAL_KEY=D.CHILD 
WHERE LEVEL<100
)
SELECT PARENT,CHILD,TNAME,LEVEL FROM RESULT as d
order by PARENT,CHILD 
```

# c# - 在后面的代码中验证

> ID：10291948
> 
> 赞同：1
> 
> 时间：2012-04-24T05:00:21.203
> 
> 标签：c#, asp.net, validation, enterprise-library

在我的 ASP.net 应用程序中，我在我的业务对象类文件中引用以下 dll 文件进行验证。

```
using Microsoft.Practices.EnterpriseLibrary.Common;
using Microsoft.Practices.EnterpriseLibrary.Validation;
using Microsoft.Practices.EnterpriseLibrary.Validation.Validators; 
```

我正在验证这样的属性

```
[StringLengthValidator(1, 50, MessageTemplateResourceName = "INVALID_NAME", 
 MessageTemplateResourceType = typeof(ValidatioinErrors))]
[RegexValidator("[A-Za-z]*", MessageTemplateResourceName = "INVALID_NAME",
 MessageTemplateResourceType = typeof(ValidatioinErrors))]
public string Name
{
  get { return name; }
  set { name = value; }
} 
```

现在，当我使用 IsValid() 函数检查此验证时，我将 Name 的值传递为“test123”

```
public bool IsValid()
{
   return Validation.Validate<myclassname>(this).IsValid;
} 
```

当我在将 name 的值传递为“test123”后检查这个 IsValid() 函数时，它接受这个给定的名称，而不是通过拒绝它来返回无效的名称。

我在哪里犯错？有人能帮我一下吗....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:51:25.517

尝试使用`^[A-Za-z]*$`.

添加的 '^' 和 '$' 意味着该正则表达式应该匹配整个字符串而不是它的一部分。

asp.net regexvalidator 不需要这些，但这是一个例外。常规正则表达式需要这些锚点来匹配完整的输入，而且这个属性显然也可以。

# java - Java中的静态方法是继承的吗？

> ID：10291949
> 
> 赞同：164
> 
> 时间：2012-04-24T05:00:31.250
> 
> 标签：java, inheritance, static

我正在阅读Khalid Mughal*的 Java™ SCJP 认证程序员指南。*

在继承一章中，它解释了

> 成员的继承与其声明的可访问性密切相关。如果超类成员可以通过其在子类中的简单名称访问（不使用任何额外的语法，如 super），则该成员被认为是继承的

它还提到静态方法不是继承的。但是下面的代码完全没问题：

```
class A
{
    public static void display()
    {
        System.out.println("Inside static method of superclass");
    }
}

class B extends A
{
    public void show()
    {
        // This works - accessing display() by its simple name -
        // meaning it is inherited according to the book.
        display();
    }
} 
```

我怎样才能`display()`在课堂上直接使用`B`？更重要的是，`B.display()`也有效。

这本书的解释是否只适用于实例方法？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-04-24T05:11:14.493

所有可访问的方法都由子类继承。

来自 Sun Java[教程](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)：

> 子类继承其父类的所有公共和受保护成员，无论子类在哪个包中。如果子类与其父类在同一个包中，它也继承父类的包私有成员。您可以按原样使用继承的成员、替换它们、隐藏它们或用新成员补充它们

继承的静态（类）方法和继承的非静态（实例）方法的唯一区别是，当您编写具有相同签名的新静态方法时，旧的静态方法只是被隐藏，而不是被覆盖。

从[页面](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)上了解覆盖和隐藏之间的区别。

> 隐藏和覆盖之间的区别具有重要意义。被调用的重写方法的版本是子类中的版本。被调用的隐藏方法的版本取决于它是从超类调用还是从子类调用

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-11-21T05:47:21.743

您可以在以下代码中体验到不同之处，这是对您的代码的轻微修改。

```
class A {
    public static void display() {
        System.out.println("Inside static method of superclass");
    }
}

class B extends A {
    public void show() {
        display();
    }

    public static void display() {
        System.out.println("Inside static method of this class");
    }
}

public class Test {
    public static void main(String[] args) {
        B b = new B();
        // prints: Inside static method of this class
        b.display();

        A a = new B();
        // prints: Inside static method of superclass
        a.display();
    }
} 
```

这是因为静态方法是类方法。

A.display() 和 B.display() 将调用各自类的方法。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-04-19T03:43:36.217

如果这本书真的这么说，那就错了。 [1]

[Java 语言规范 #8.4.8](http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.4.8)指出：

> # 8.4.8 继承、覆盖和隐藏
> 
> 一个类 C 从它的直接超类继承了超类的所有具体方法 m（静态和实例），其中所有以下都为真：
> 
> *   m 是 C 的直接超类的成员。
>     
>     
> *   m 是公共的、受保护的或在与 C 相同的包中声明为具有包访问权限。
>     
>     
> *   C 中声明的任何方法都没有作为 m 签名的子签名（第 8.4.2 节）的签名。

[1] 在我的副本中没有这样说，第 1 版，2000。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-07-27T04:33:25.447

Java 中的静态方法是继承的，但不能被覆盖。如果在子类中声明相同的方法，则隐藏超类方法而不是覆盖它。静态方法不是多态的。在编译时，静态方法将被静态链接。

例子：

```
public class Writer {
    public static void write() {
        System.out.println("Writing");
    }
}

public class Author extends Writer {
    public static void write() {
        System.out.println("Writing book");
    }
}

public class Programmer extends Writer {

    public static void write() {
        System.out.println("Writing code");
    }

    public static void main(String[] args) {
        Writer w = new Programmer();
        w.write();

        Writer secondWriter = new Author();
        secondWriter.write();

        Writer thirdWriter = null;
        thirdWriter.write();

        Author firstAuthor = new Author();
        firstAuthor.write();
    }
} 
```

您将获得以下信息：

```
Writing
Writing
Writing
Writing book 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-24T05:12:59.737

B.display() 之所以有效，是因为静态声明使方法/成员属于类，而不是任何特定的类实例（又名对象）。[你可以在这里](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)阅读更多关于它的信息。

另一件需要注意的是，你不能重写静态方法，你可以让你的子类声明一个具有相同签名的静态方法，但它的行为可能与你期望的不同。这可能是它不被认为是继承的原因。[您可以在此处](http://geekexplains.blogspot.com/2008/06/can-you-override-static-methods-in-java.html)查看有问题的场景和解释。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-24T10:39:33.727

静态方法在 Java 中是继承的，但它们不参与多态性。如果我们试图覆盖静态方法，它们只会隐藏超类静态方法而不是覆盖它们。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-09-27T20:55:18.440

这个概念并不像看起来那么容易。我们可以在没有继承的情况下访问静态成员，这就是 HasA 关系。我们也可以通过扩展父类来访问静态成员。这并不意味着它是 ISA 关系（继承）。实际上静态成员属于类，静态不是访问修饰符。只要访问修饰符允许访问静态成员，我们就可以在其他类中使用它们。就像如果它是公共的，那么它可以在同一个包内和包外访问。对于私人我们不能在任何地方使用它。默认情况下，我们只能在包中使用它。但是为了受保护，我们必须扩展超类。因此，将静态方法传递给其他类并不依赖于静态。它取决于访问修饰符。所以，在我看来，如果访问修饰符允许，静态成员可以访问。否则，我们可以像使用 Hasa-relation 一样使用它们。并且有关系不是继承。同样，我们不能覆盖静态方法。如果我们可以使用其他方法但不能覆盖它，那么它就是 HasA-relation。如果我们不能覆盖它们，它就不是继承。所以作者是 100% 正确的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-26T05:03:27.340

所有公共和受保护成员都可以从任何类继承，而默认或包成员也可以从与超类相同的包中的类继承。它不依赖于它是静态成员还是非静态成员。

但是静态成员函数不参与动态绑定也是事实。如果该静态方法的签名在父类和子类中相同，则适用阴影概念，而不是多态性。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-07T11:01:18.153

静态方法在子类中继承，但它不是多态性。当您编写静态方法的实现时，父类方法被过度隐藏，而不是被覆盖。想一想，如果它不是继承的，那么你如何能够在没有 的情况下访问`classname.staticMethodname();`？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-06T06:32:46.937

您可以覆盖静态方法，但如果您尝试使用多态性，那么它们会根据类范围工作（与我们通常期望的相反）。

```
public class A {

    public static void display(){
        System.out.println("in static method of A");
    }
}

public class B extends A {

    void show(){
        display();
    }

     public static void display(){
        System.out.println("in static method of B");
    }

}
public class Test {

    public static void main(String[] args){
        B obj =new B();
        obj.show();

        A a_obj=new B();
        a_obj.display();

    }

} 
```

在第一种情况下，o/p 是“在 B 的静态方法中”# 成功覆盖在第二种情况下，o/p 是在“在 A 的静态方法中”# 静态方法 - 不会考虑多态性

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-03-02T13:21:48.077

类中的静态方法被继承，而接口中的静态方法不被继承。

类中的静态方法可以使用实例调用，而接口中的静态方法只能通过接口名称调用，因为它们不是继承的

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-04-04T02:24:24.210

我们可以在子类中声明具有相同签名的静态方法，但它不被视为重写，因为不会有任何运行时多态性。因为由于类的所有静态成员都是在类加载时加载的，所以它在编译时决定时间（在运行时覆盖）因此答案是“否”。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-02-09T03:29:20.803

许多人已经用文字说出了他们的答案。这是代码中的扩展解释：

```
public class A {
    public static void test() {
        System.out.println("A");
    }
    public static void test2() {
        System.out.println("Test");
    }
}

public class B extends A {
    public static void test() {
        System.out.println("B");
    }
}

// Called statically
A.test();
B.test();
System.out.println();

// Called statically, testing static inheritance
A.test2();
B.test2();
System.out.println();

// Called via instance object
A a = new A();
B b = new B();
a.test();
b.test();
System.out.println();

// Testing inheritance via instance call
a.test2();
b.test2();
System.out.println();

// Testing whether calling static method via instance object is dependent on compile or runtime type
((A) b).hi();
System.out.println();

// Testing whether null instance works
A nullObj = null;
nullObj.hi(); 
```

结果：

```
A
B

Test
Test

A
B

Test
Test

A

A 
```

因此，这是结论：

1.  当我们通过 . 以静态方式调用 static 时，它会查找该类中定义的静态，或者在继承链中最接近该静态的类。这证明静态方法是继承的。
2.  从实例调用静态方法时，它会调用编译时类型中定义的静态方法。
3.  可以从`null`实例调用静态方法。我的猜测是编译器将在编译期间使用变量类型来查找类，并将其转换为适当的静态方法调用。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-09-08T15:46:27.190

静态成员是通用成员。它们可以从任何地方访问。

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2016-01-16T06:52:16.407

静态成员不会被继承到子类，因为继承仅适用于非静态成员。静态成员将由类加载器加载到静态池中。继承仅适用于加载在对象内的那些成员

# visual-studio-2010 - 如何在 VC++ 中创建一个发送电子邮件的程序？

> ID：10291952
> 
> 赞同：0
> 
> 时间：2012-04-24T05:00:55.543
> 
> 标签：visual-studio-2010, c++-cli

我读了一篇文章 [如何在 VC++ 中发送电子邮件？](https://stackoverflow.com/questions/4597374/how-to-send-a-email-in-vc)

我认为 Mark Ransom 的答案对于像我这样的新学习者来说更简单。他提到我需要付费版本的 VS 才能使用 ATL 类。

我的问题是是否有任何免费方法可以做同样的事情？

另外，我怎么知道我的 VS 专业版是否有 ATL 类？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:27:02.457

您可以直接使用[Outlook MAPI 界面](http://msdn.microsoft.com/en-us/library/cc815799.aspx)。MAPI SDK 是一个单独的下载，它应该适用于任何 VS 版本。

VS10 专业版[包括 ATL](http://msdn.microsoft.com/en-us/library/hs24szh9.aspx)。

# python - 列表中的烛台数据到 matplotlib

> ID：10291954
> 
> 赞同：2
> 
> 时间：2012-04-24T05:01:04.147
> 
> 标签：python, numpy, matplotlib

我有一些烛台数据存储在列表中（日期时间、开盘、收盘、高点、低点）。使用 matplotlib 绘制这些数据的最佳方法是什么？我是否必须自动通过 numpy ？在这种情况下，我将如何将列表转换为 numpy 可以理解的内容？

提前致谢 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:33:04.927

Actually, there's no reason to do anything other than what you already have. Matplotlib will handle converting things for you.

It sounds like you have a list of sequences of time, open, close, high low?

Something like:

```
from datetime import datetime
#            date                 open   close    high    low
quotes = [(datetime(2012, 2, 1), 103.62, 102.01, 103.62, 101.90),
          (datetime(2012, 2, 2), 102.24, 102.90, 103.16, 102.09),
          ...
          (datetime(2012, 4, 12), 100.89, 102.59, 102.86, 100.51)] 
```

That's actually the exact data structure that matplotlib's candlestick function expects.

You just need to convert the datetimes to matplotlib's internal date format. Use `matplotlib.dates.date2num`.

E.g.

```
from matplotlib.dates import date2num

# I'm assuming you have tuples, so we can't modify them in-place...
quotes = [(date2num(item[0]),) + item[1:] for item in quotes] 
```

Other than that, have a look at some of the matplotlib finance examples. [This one is a good start.](http://matplotlib.sourceforge.net/examples/pylab_examples/finance_demo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:14:38.450

您可以轻松地将 python 列表转换为 numpy 列表

```
import numpy as np
l1 = [1, 2, 3, 4]
a = np.array(l1) 
```

尽管 matplotlib 也接受 python 列表（我认为它在内部将其转换为 numpy 数组）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:49:15.690

您可以使用`itemgetter`

```
from operator import itemgetter
data = [(1,2,3), (2,3,4), (3,4,5)]

import pylab as plt
plt.plot(map(itemgetter(0), data),map(itemgetter(1),data),'o') 
```

如果您有多个图（您可以根据日期时间数据绘制高、低、高低差等），最好将其转换为 numpy 数组，正如@Spot 所建议的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:07:50.210

可能最好的方法是将所有这些数据绘制在一个图表中，这样您就可以看到相对关系。您可以通过这种方式在图表中绘制多条线：

```
import pylab

data = [(5,2,3), (2,8,4), (3,5,9)]
t_data = zip(*data) #transform the data

crd = range(len(t_data[0])) #coordinates

pylab.plot(crd, t_data[0], crd, t_data[1], crd, t_data[2])

pylab.show() 
```

但是，如果您想在不同的图表中打印每个类别，您可以这样做：

```
fig = pylab.figure()

sub_fig_1 = fig.add_subplot(3,1,1)
sub_fig_1.plot(t_data[0])

sub_fig_2 = fig.add_subplot(3,1,2)
sub_fig_2.plot(t_data[1])

sub_fig_3 = fig.add_subplot(3,1,3)
sub_fig_3.plot(t_data[2])

pylab.show() 
```

# mysql - 我如何在 Navicat for MySQL 中查看我创建的存储过程

> ID：10291959
> 
> 赞同：3
> 
> 时间：2012-04-24T05:01:27.183
> 
> 标签：mysql, navicat

我在 Navicat for MySQL 中创建存储过程如下：

```
CREATE PROCEDURE myloop()

        BEGIN

                    DECLARE customerID INT DEFAULT 11;

                    first_loop: LOOP

                        SET customerID = customerID +1;

                        DECLARE itemID INT DEFAULT 0;                   

                    second_loop: LOOP

                        SET itemID = itemID +1;

                        Insert INTO tbl_order(customerId, itemId) VALUES
                        (customerID, itemID );  

                      IF itemID=3000 THEN
                         LEAVE second_loop;
                      END IF;
                    END LOOP second_loop;

                    IF customerID=3000 THEN
             LEAVE first_loop;
          END IF;
        END LOOP first_loop;

END 
```

但我找不到任何地方可以调用我的存储过程。

如何查看和调用我创建的存储过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:09:48.280

它就在表格选择的下方。

![截屏](../Images/e798b70e72b8fdb705e4aa5265d2a123.png)

或者，您可以只打开一个查询窗口并编写`call yourProcedure()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:09:30.243

在 Navicat 9.0.8 版本中，您创建的存储过程没有选项卡。

我更喜欢使用“SQLQueryBrowser”来解决您的问题。

# actionscript-3 - main.swf（基于 as3）重新加载 child.swf（基于 as2）

> ID：10291960
> 
> 赞同：2
> 
> 时间：2012-04-24T05:01:30.753
> 
> 标签：actionscript-3, flash, adobe, actionscript-2, flash-cs5

我在重新加载 child.swf 时遇到问题。在第一次加载（loadPattern（））时它工作正常，但在第二次卸载和加载时它工作不正确（不加载照片内容）没有任何错误。

Child.swf 建立在 as2 之上。

main.swf 建立在 as3 之上。

```
var childSwf:Object;
var loader:Loader = new Loader();
var childLoaded:Boolean = false;

function loadPatternHandler(event:Event):void 
{ 
   childSwf = event.target.content; 
   childSwf.x = 0;
   childSwf.y = -35;

} 

function loadPattern():void
{
    stopPattern();

    var myswf:String = "child.swf";

    var Xpos:Number = 0;
    var Ypos:Number = 0;

    var req:URLRequest = new URLRequest(myswf);

    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadPatternHandler); 

    //loader.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);

    loader.load(req);
    loader.x=Xpos;
    loader.y=Ypos;
    addChild(loader);
    childLoaded=true;

}

function stopPattern():void
{
    if(childLoaded)
    {
        loader.unloadAndStop();
        //loader.unload();
        removeChild(loader);
        loader=null;
        loader = new Loader();
        childLoaded = false;
    }
}

loadPattern(); 
```

它没有在 stopPattern() 上完全卸载吗？

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:06:32.550

您是否研究过通用 AS2 加载解决方案？我使用 SWFBridge 取得了很好的效果：

[http://gskinner.com/blog/archives/2007/07/swfbridge_easie.html](http://gskinner.com/blog/archives/2007/07/swfbridge_easie.html)

# flex-lexer - Flex 中的令牌识别错误

> ID：10291965
> 
> 赞同：-1
> 
> 时间：2012-04-24T05:02:02.097
> 
> 标签：flex-lexer, lexical-analysis

我正在实现一个解析器，其扫描仪（使用 Flex 实现）一次无法识别所有令牌。它只是从输入中获取第一个令牌并终止。有人可以帮我解决这个问题。这是我的“.lex”文件：

```
%{
/* need this for the call to atof() below */
#include <math.h>
#include<string.h> 
#include "parser.h"
#include "idf.tab.h"
char findname ( char *yytext) { return yytext[0]; }
%}

DIGIT    [0-9]
ID       [a-zA-Z]*
%option noyywrap

%%

{ID} | 
-?{DIGIT}+"."{DIGIT}* |
-?{DIGIT}+   { printf("ID or number:%s\n",yytext); /*yylval.a_variable =  (char*)findname(yytext);*/   return TOKID;}

";"        { printf("Semicolon\n");   return TOKSEMICOLON; }
":"        {   printf("Colon\n"); return TOKCOLON;}
","           return TOKCOMMA;
"."           return TOKDOT;
"-"           return TOKMINUS;

[ \t\n]          /* eat up whitespace */
.       return TOKUNRECOG;

%%

int main( int argc,char*  argv[] )
{
++argv, --argc; 
if ( argc > 0 )
yyin = fopen( argv[0], "r" );
else
yyin = stdin;

yylex();
} 
```

例如，如果我将输入作为`abc;`预期输出应该是：

```
ID or number: abc
Semicolon 
```

但实际输出是：

```
ID or number: abc 
```

也就是说，它只是识别第一个标记 abc 并在不识别分号的情况下终止。而如果输入只是`;`那么输出是

```
Semicolon 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:07:18.113

`yylex()`返回下一个可用令牌，假设在解析器的控制下被调用。如果要处理整个输入，请在循环中调用它，直到它返回`0`。

# asp.net-mvc - 如何将我的操作重定向到网站的根目录？

> ID：10291966
> 
> 赞同：37
> 
> 时间：2012-04-24T05:02:22.213
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我的控制器中有以下代码在他注销后重定向我的用户：

```
public ActionResult Logout()
        {
            FormsAuthentication.SignOut();
            return new RedirectToRouteResult(
                new RouteValueDictionary(
                    new {
                        area = "Administration",
                        controller = "Menus", 
                        action = "Home" 
                    }
                )
            );
        } 
```

我想将用户重定向到/或我网站的基本 URL（根）。有没有一种方法可以做到这一点，而无需提供区域、控制器和操作的详细信息？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-24T05:11:57.333

如果您不想使用`RedirectToAction`（对我来说是正确的选择），您可以使用

```
return Redirect(Url.Content("~/")); 
```

**更新**

如评论中所述，这也应该有效

```
return Redirect("~/"); 
```

# php - 如何使用 php 解析 svg 文件中的形状并将选择数据添加到数据库中？

> ID：10291967
> 
> 赞同：0
> 
> 时间：2012-04-24T05:02:22.353
> 
> 标签：php, xml, svg

实际上，我想要做的是从 svg 文件中提取形状信息并按 id 将形状存储到 mysql 数据库中。由于 php 有许多工具可用于读取 xml，因此我将 svg 文档转换为 xml 文档，但不幸的是 svg 文档中的形状被存储为属性。

我尝试使用 attributes() 方法但没有运气，因为我得到了 php 错误 Fatal error: Call to a member function attributes() on a non-object in phpdocument.php 当我试图从（现在) xml 文档 我用于示例的完整 xml 文档可以在这里找到 [http://pastebin.com/ZyNB7yKu](http://pastebin.com/ZyNB7yKu) 我使用的初始 xml 属性测试代码是这个

```
 $xml_file_open = simplexml_load_file("svgboard.xml");
 foreach($xml_file_open->rect[0]->attributes() as $a => $b)
{
echo $a, '="',$b,"\"</br>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:46:32.997

Assuming you open the file correctly (I assume your file checking is removed for clarity), the rect you are looking for is inside the G element, so $xml_file_open->rect[0] doesn't exist. You probabaly want $xml_file_open->g->rect[0]

# javascript - 图像和文本的 Jquery 悬停问题

> ID：10291971
> 
> 赞同：2
> 
> 时间：2012-04-24T05:03:11.577
> 
> 标签：javascript, jquery, html, css

尝试使此 jquery 代码正常工作时遇到问题。这个想法是当图像被突出显示时，不透明度应该改变。现在它正在使用 smallartcov 类标签来改变不透明度。问题是它上面有一些文字。所以文本算作鼠标离开图像区域，即使它从未离开过。我怎样才能解决这个问题？

[http://169.231.6.197/vathom/artist.php](http://169.231.6.197/vathom/artist.php)是托管测试对象的位置。如果你看@最右边的图片，你就会明白我的意思。这是我们在上面的html：

```
<div class="artistg">
    <div class="smallartcov"></div><span class="smallarttxt">702</span>
    <img class="smallartpic" src="images/df.jpg" />
</div> 
```

连同以下jQuery：

```
<script type="text/javascript">
$('.smallartcov').hover(function() {
    $(this).css('color', 'white');
    $(this).css('opacity', '0');
}, function() {
    $(this).css('color', 'white');
    $(this).css('opacity', '0.5');
});
</script> 
```

有任何想法吗？非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:13:11.443

您可以为文本添加悬停并很好地控制不透明度。这将解决您面临的问题。我已经通过添加以下代码对其进行了测试，

```
$('.smallarttxt').hover(function() {
    $('.smallartcov').css('color', 'white');
    $('.smallartcov').css('opacity', '0');
}, function() {
    $('.smallartcov').css('color', 'white');
    $('.smallartcov').css('opacity', '0.5');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:17:19.480

您是否尝试将 JS应用于包含所有信息的`.hover`完整元素？`artistg`也许将 JS 应用到包含的 div 会使您的鼠标悬停在文本上，而不是“离开”悬停状态。光标可能仍会变成 I 型梁，但只要您仍然获得悬停不透明度效果，您可以使用 CSS 将光标保持在您想要的任何位置，以免破坏图像悬停。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:24:52.050

只需将悬停功能向上移动到父容器，它将自动包含图像和文本：

```
$('.artistg').hover(function() {
        $(this).find('.smallartcov').css('opacity', 0);
    }, function() {
        $(this).find('.smallartcov').css('opacity', .5);
    }
); 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/LnLpM/](http://jsfiddle.net/jfriend00/LnLpM/)

仅供参考，我删除了颜色的设置，因为它似乎没有做任何事情，无论是否悬停都是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T05:08:41.077

如果您想在将鼠标悬停在图像上时更改图像的不透明度，那么您必须使用此 jquery 代码

```
<script type="text/javascript">
$('.smallartpic').hover(function() {
    $(this).css('color', 'white');
    $(this).css('opacity', '0');
}, function() {
    $(this).css('color', 'white');
    $(this).css('opacity', '0.5');
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T05:12:02.850

您可以设置`z-index: 1;`为 smallartcov 类，但文本也会变暗。

# iphone - 将自定义运行循环与 libdispatch 集成

> ID：10291972
> 
> 赞同：3
> 
> 时间：2012-04-24T05:03:27.133
> 
> 标签：iphone, objective-c, linux, objective-c-blocks, grand-central-dispatch

我正在尝试构建一个必须管理自己的运行循环的应用程序。我想在这个应用程序中使用 libdispatch。但是，使用 libdispatch 需要调用 dispatch_main() 这是一个阻塞方法。我无法阻塞主线程。

1.  有没有办法在不使用阻塞 dispatch_main() 的情况下将自定义运行循环与 libdispatch 集成？
2.  我在 libdispatch 的 queue.c 中看到了对 _dispatch_main_queue_callback_4CF 的引用，这看起来很有希望。有没有办法使用这种方法来实现相同的目标？这种方法的文档非常稀少。
3.  理想情况下，我不需要使用 NSRunLoop/CFRunLoop。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T05:30:49.083

libdispatch 不需要调用`dispatch_main()`，它通过 dispatch 主队列与主线程的 runloop 集成，见`dispatch_get_main_queue(3)`和`COMPATIBILITY`其中的部分。

不调用`dispatch_main()`且想使用主队列的可执行程序必须以常用模式之一运行主线程runloop，以便处理dispatch主队列上的块；通过标准框架方法（例如`NSApplicationMain()`）间接或直接通过 CFRunLoop 或 NSRunLoop API。

请不要尝试使用`_dispatch_main_queue_callback_4CF`符号，它是库内部的一个实现细节，将来很可能会发生变化，任何依赖它的代码都会在没有警告的情况下中断。

libdispatch 与自定义非主线程 CFRunLoops 的集成可以通过多种方式实现，例如通过`CFRunLoopPerformBlock()`API 或自定义 runloop 源。

* * *

**更新：**在 Linux 上，您必须修改 libdispatch 源，不支持与自定义运行循环 AFAIK 进行互操作。

在 Linux 上将主队列与现有 runloop 集成的最简单方法可能确实是`_dispatch_main_queue_callback_4CF()`每次通过事件循环调用（最好重命名）函数，并替换 `_dispatch_queue_wakeup_main()`为适合唤醒 runloop 的任何方法（例如写入runloop 正在等待的管道）。

# fuelphp - Is there a way to easily insert error messages to the output of Fuelphp's validation output?

> ID：10291985
> 
> 赞同：0
> 
> 时间：2012-04-24T05:04:48.623
> 
> 标签：fuelphp

In a controller, I am validating the input of the fields of a registration form. I am doing simple validation such as required fields, email validation etc.

When I get a successful submit, I then go on to attempt to create the user (I am using the Sentry package). I want to be able to catch the errors from this process and then append them to the validation errors and attach them to specific fields. For example: if the email already exists, I want to insert an error to the 'email field' and give it a custom error message.

I was hoping there was some easy way to do this, such as (pseudo-code):

> $validation->error()->insert_error($field_name, $message)

Any easy way of doing this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:16:31.610

The native Validation class does not allow that.

But I can see 2 solutions for your problem.

First solution (did not test, this is just to get the idea):

```
<?php
class CustomFieldError {
    function rule_which_always_fail($val) {
        return false;
    }
}
function insert_error($validation, $field_name, $error) {
    $validation->field($field_name)->->add_rule(array('CustomFieldError', 'rule_which_always_fail'))->set_message($error);
}

// You need to do that before $validation->run();
if ($duplicate_email) {
    insert_error($validation, 'email', 'Duplicate email');
} 
```

Second solution: [Replace and extends](http://docs.fuelphp.com/general/extending_core.html) the \Fuel\Core\Validation class with your own. This way you can add the insert_error() method directly inside the Validation class and add errors with `$this->errors['field_name'] = 'Error message';`

[edit] If you're wanting to use the 2nd solution, also be sure to submit them a feature request in their Github tracker :)

# jquery - 哪个更适合良好的 UI 体验（Html 页面或 data-role='page'）

> ID：10291992
> 
> 赞同：-1
> 
> 时间：2012-04-24T05:05:21.763
> 
> 标签：jquery, android, jquery-mobile

我正在使用 Jquery 移动框架和 phonegap 开发移动应用程序。所以，我想知道是否为我的应用程序使用不同的 html 页面，或者使用不同的 html 页面来使转换更流畅并提供更好的 UI 体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:28:56.513

请记住，如果您将整个应用程序包含在一个 html 文件中，那么您的[dom](https://developer.mozilla.org/en/DOM)大小很容易变得过大。引用文档

> 通常，将应用程序的页面存储在多个单页模板中而不是一个大型多页模板中是个好主意。这可以最小化页面 DOM 的大小。

下一段也可以帮助你。

> 使用单页模板时，您可以将页面预取到 DOM 中，以便在用户访问它们时立即可用。要预取页面，请将 data-prefetch 属性添加到指向该页面的链接。jQuery Mobile 会在主页面加载完毕并触发 pagecreate 事件后在后台加载目标页面。例如：

```
<a href="prefetchThisPage.html" data-prefetch> ... </a> 
```

> 您可以根据需要预取任意数量的链接页面。只需将数据预取添加到您要预取的所有链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:22:12.330

最好的方法是使用诅咒的[OpenGl ，然后是](http://developer.android.com/guide/topics/graphics/opengl.html)[canvas](http://developer.android.com/reference/android/view/SurfaceView.html)，然后是 html

# android - gst.h 没有这样的文件或目录

> ID：10291995
> 
> 赞同：0
> 
> 时间：2012-04-24T05:05:47.660
> 
> 标签：android, gstreamer

我正在尝试为 android 编译一个 gstreamer 插件。该插件有#include< `gst/gst.h`>

而且，我还将gst.h的路径添加到了Android.mk。但是当我使用 mm 命令编译时，我仍然收到错误“gst.h no such file or directory”。

在 Android.mk 中包含头文件路径的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:13:54.797

您没有正确遵循说明。您不需要向 Android.mk 添加额外的路径。请再看看其他插件包是如何集成的。理想情况下，包括一个指向您在此处托管插件代码的链接（如果可以的话）。

# python - 如何在列表理解中做作业？

> ID：10291997
> 
> 赞同：81
> 
> 时间：2012-04-24T05:05:55.900
> 
> 标签：python, list-comprehension

我想在列表理解中使用赋值运算符。我怎样才能做到这一点？

以下代码是无效的语法。如果匹配，我的意思是设置`lst[0]`为空字符串：`''``pattern`

```
[ lst[0] = '' for pattern in start_pattern if lst[0] == pattern ] 
```

谢谢！

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2019-02-04T10:56:51.203

Python 3.8 将引入[**赋值表达式**](https://www.python.org/dev/peps/pep-0572/)。

这是一个新符号：`:=`它允许在（除其他外）理解中赋值。这个新的算子也被称为**海象算子**。

从上面链接的 PEP 的以下片段中可以看出，它将引入大量潜在的计算/内存节省（适用于 SO 的格式）：

> ## 语法和语义
> 
> 在可以使用任意 Python 表达式的大多数上下文中，可以出现命名表达式。这是除无括号元组之外的任何有效 Python 表达式的形式，并且`NAME := expr`是 标识符。`expr``NAME`
> 
> 这种命名表达式的值与合并的表达式相同，具有额外的副作用，即为目标分配该值：
> 
> 1.  **处理匹配的正则表达式**
>     
>     
>     
>     ```
>     if (match := pattern.search(data)) is not None:
>         # Do something with match 
>     ```
>     
>     
> 2.  **无法使用 2-arg iter() 重写的循环**
>     
>     
>     
>     ```
>     while chunk := file.read(8192):
>         process(chunk) 
>     ```
>     
>     
> 3.  **重用计算成本高的值**
>     
>     
>     
>     ```
>     [y := f(x), y**2, y**3] 
>     ```
>     
>     
> 4.  **在理解过滤器子句及其输出之间共享子表达式**
>     
>     
>     
>     ```
>     filtered_data = [y for x in data if (y := f(x)) is not None] 
>     ```

这已经在最近发布的 alpha 版本中可用（不推荐用于生产系统！）。您可以[在此处找到 Python 3.8 的发布时间表](https://www.python.org/dev/peps/pep-0569/#id6)。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-24T05:11:56.670

看起来您将[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)与Python 中的[循环结构混淆了。](http://docs.python.org/tutorial/controlflow.html)

列表推导产生——一个列表！它不适合现有列表中的单个分配。（虽然你可以折磨语法来做到这一点......）

虽然尚不清楚您要从代码中做什么，但我认为它更类似于循环列表（流控制）与生成列表（列表理解）

像这样循环列表：

```
for pattern in patterns:
   if lst[0] == pattern: lst[0]='' 
```

这是一种合理的方法，也是您在 C、Pascal 等语言中所做的。但您也可以只测试列表中的一个值并更改它：

```
if lst[0] in patterns: lst[0] = '' 
```

或者，如果您不知道索引：

```
i=lst.index[pattern]
lst[i]='' 
```

或者，如果您有一个列表列表并且想要更改每个子列表的每个第一个元素：

```
for i, sublst in enumerate(lst):
    if sublst[i][0] in patterns: sublist[i][0]='' 
```

等等等等等等。

如果你想对列表的每个元素应用一些东西，那么你可以考虑使用列表推导、映射或 Python 工具包中的许多其他工具之一。

就个人而言，我通常倾向于更多地使用列表推导来创建列表：

```
 l=[[ x for x in range(5) ] for y in range(4)]  #init a list of lists... 
```

这比以下更自然：

```
l=[]
for i in range(4):
   l.append([])
   for j in range(5):
      l[i].append(j) 
```

但是要修改相同的列表列表，哪个更容易理解？

这个：

```
l=[['new value' if j==0 else l[i][j] for j in range(len(l[i]))] for i in range(len(l))] 
```

或这个：

```
for i,outter in enumerate(l):
    l[i][0]='new value' 
```

YMMV

[这](http://effbot.org/zone/python-list.htm)是一个很棒的教程。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-24T06:20:03.977

Python 语言对表达式和语句有不同的概念。

赋值是一个语句，即使语法有时会诱使您认为它是一个表达式（例如`a=b=99`有效，但它是一种特殊的语法情况，并不意味着它`b=99`是一个表达式，例如在 C 中）。

相反，列表推导式是表达式，因为它们返回一个值，从某种意义上说，它们执行的循环是一个事件，重点是返回的列表。

语句可以包含表达式，但表达式不能包含语句。

也就是说，列表项分配在内部转换为方法调用（以允许创建类似列表的对象）并且方法调用是表达式。因此，**从技术上讲**，您可以在表达式中使用列表项分配：

```
[ lst.__setitem__(0, '') for pattern in start_pattern if lst[0] == pattern ] 
```

然而，这被认为是不好的，因为它会损害可读性，并且阅读源代码的难易程度是Python 语言的*主要关注点。*例如，您应该改写...

```
for pattern in start_pattern:
    if lst[0] == pattern:
        lst[0] = '' 
```

顺便说一句，感谢`in`操作员相当于更具可读性

```
if lst[0] in start_pattern:
    lst[0] = '' 
```

列表推导用于它们的返回值，它们在内部创建一个循环......如果你想要的是循环，那么只需编写一个循环......任何阅读代码试图理解它的作用的人都会非常感激（并且几周后包括你自己的人）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-24T05:14:37.163

简而言之：你没有。列表推导用于生成列表，而不是修改现有列表。如果要修改列表，请使用 for 循环，因为这就是它们的用途。

编写该代码的 Pythonic 方式类似于：

```
for pattern in start_pattern:
    if lst[0] == pattern:
        lst[0] = ''
        #the following assumes that pattern will never be ''
        #if that's possible, you can ignore this bit
        break 
```

但是，如果您真的非常想在一个内部进行赋值，并且不介意每个处理过您的代码的 Python 程序员都讨厌它，那么您可以使用一些函数：

*   如果要分配的变量是全局变量，则可以

    ```
     globals().update(var=value) 
    ```

*   如果要分配的变量是可变序列或映射（例如列表或字典）

    ```
     list.__setitem__(index, value) 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-31T15:50:51.070

正如上面的答案中提到的，列表理解功能中不可能直接分配，但是有一种可破解的方法可以使用该`exec`方法来实现分配。

不仅`assignments`我们可以在方法中传递任何 python 表达式`exec`来评估它。

在你的情况下，它可以通过

```
 [ exec(f"lst[0] = ''") for pattern in start_pattern if lst[0] == pattern ] 
```

如果我们有一个对象列表，并且我们想在特定条件下为对象的特定属性分配一个值，那么它可能类似于：

```
[ exec("p.age_status=child") for p in persons_obj_list if p.age <= 18 ] 
```

注意：这将更改列表中现有对象的状态，并且不会返回对象列表，因为它在正常使用列表理解时返回。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-31T01:08:23.207

如果您在问题中提到的是：

```
[ lst[0] = '' for lst in listOfLists if lst[0] == pattern ] 
```

或模式列表

```
[ lst[0] = '' for lst in listOfLists if lst[0] in patterns ] 
```

这实际上可以很容易地完成

```
[ [''] + lst[1:] for lst in listOfLists if lst[0] == pattern ] 
```

或再次查看模式列表

```
[[''] + lst[1:] for lst in listOfLists if lst[0] in patterns ] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-08T06:26:52.323

也许这不是您正在寻找的东西，但我相信值得展示这种情况。

假设你有一个`list`字典，像这样：

```
>>> fruits
[{'name': 'apple', 'quantity': 5}, {'name': 'banana', 'quantity': 4}] 
```

通过正常的列表理解，您可能会找到您正在寻找的对象：

```
>>> [d for d in fruits if d['name'] == 'apple'] 
[{'name': 'apple', 'quantity': 5}] 
```

结果，由于上述条件，您有一个包含单个元素的列表`if`。

因此，您可以索引唯一的元素，访问字典键之一并分配一个值：

```
>>> [d for d in fruits if d['name'] == 'apple'][0]['quantity'] += 1 
```

结果如下：

```
>>> fruits
[{'name': 'apple', 'quantity': 6}, {'name': 'banana', 'quantity': 4}] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-03T22:16:14.303

我可以建议你，使用类而不是使用变量来赋值。当你使用一个类时，你可以简单地改变类的值，然后返回结果。

我添加了一个我做过的例子：

```
def foo():
class result:
    def __init__(self):
        self.key = 0
        self.value = 0

    def change(self, key, value):
        self.key= key
        self.value= value
        return key

result_object= result()
class_result= [result_object.change(key, value) for key, value in temp_dict.items() if value > result_object.value][-1]
return class_result 
```