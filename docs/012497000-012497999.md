# StackOverflow 问答 12497000-12497999

# linux - Linux中的Setfacl配置问题

> ID：12497001
> 
> 赞同：0
> 
> 时间：2012-09-19T14:36:09.023
> 
> 标签：linux, unix

我正在使用 ACL [访问控制列表] 配置 Linux 服务器。它不允许我对目录 /xfiles 之一执行 setfacl 操作。我能够以 /tmp /op/applocal/ 的形式在其他目录上执行 setfacl。我收到错误消息：

```
root@asifdl01devv # setfacl -m user:eqtrd:rw-,user:feedmgr:r--,user::---,group::r--,mask:rw-,other:--- /xfiles/change1/testfile setfacl: /xfiles/change1/testfile: Operation not supported 
```

我已经定义了我的`/etc/fstab as /dev/ROOTVG/rootlv / ext3 defaults 1 1 /dev/ROOTVG/varlv /var ext3 defaults 1 2 /dev/ROOTVG/optlv /opt ext3 defaults 1 2 /dev/ROOTVG/crashlv /var/crash ext3 defaults 1 2 /dev/ROOTVG/tmplv /tmp ext3 defaults 1 2 LABEL=/boot /boot ext3 defaults 1 2 tmpfs /dev/shm tmpfs defaults 0 0 devpts /dev/pts devpts gid=5,mode=620 0 0 sysfs /sys sysfs defaults 0 0 proc /proc proc defaults 0 0 /dev/ROOTVG/swaplv swap swap defaults 0 0 /dev/APPVG/home /home ext3 defaults 1 2 /dev/APPVG/archives /archives ext3 defaults 1 2 /dev/APPVG/test /test ext3 defaults 1 2 /dev/APPVG/oracle /opt/oracle ext3 defaults 1 2 /dev/APPVG/ifeeds /xfiles ext3 defaults 1 2`

我有一个 Solaris 服务器，其中 vfstab 定义为

猫 vfstab

```
 # fd - /dev/fd fd - no - /proc - /proc proc - no - /dev/vx/dsk/bootdg/swapvol - - swap - no - swap - /tmp tmpfs - yes size=1024m /dev/vx/dsk/bootdg/rootvol /dev/vx/rdsk/bootdg/rootvol / ufs 1 no logging /dev/vx/dsk/bootdg/var /dev/vx/rdsk/bootdg/var /var ufs 1 no logging /dev/vx/dsk/bootdg/home /dev/vx/rdsk/bootdg/home /home ufs 2 yes logging /dev/vx/dsk/APP/test /dev/vx/rdsk/APP/test /test vxfs 3 yes - /dev/vx/dsk/APP/archives /dev/vx/rdsk/APP/archives /archives vxfs 3 yes - /dev/vx/dsk/APP/oracle /dev/vx/rdsk/APP/oracle /opt/oracle vxfs 3 yes - /dev/vx/dsk/APP/xfiles /dev/vx/rdsk/APP/xfiles /xfiles vxfs 3 yes - 
```

我无法找出问题所在。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:00:30.430

`acl`您的 fstab 行不可读，但您可能需要在 /ifeeds 分区中打开ext3 选项：

```
/dev/APPVG/ifeeds /xfiles ext3 defaults,acl 1 2 
```

# jquery - 使用 jQuery 加载页面的一部分

> ID：12497002
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:36:11.837
> 
> 标签：jquery, html

我知道这可以通过函数加载来完成

```
 $('#result').load('what.html #div-id'); 
```

但是是一个问题，在html代码中只有一个`<div id ="example"></div>`和多个类，我不知道如何加载只有一个`<div class = "example"></div>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:40:45.523

不确定你是否理解正确，但类似

```
$.ajax({
     url: 'what.html',
     dataType: 'html',
     success: function(data) {

         $(data).find('div.example:first'); //the first div with example-class

         $(data).find('div.example').index(1); //second div using index

         $(data).find('div.example').eq(2); //third div using eq

         $(data).find('div.example:lt(4)'); //first three divs using lt

         $(data).find('div.example').slice(2,4); //div 2,3 and 4 using slice
     }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:43:13.883

尝试

```
$('#result').load('what.html .example'); 
```

当您只检索文档的一部分时，您不一定必须使用`id`选择器 - 它可以是任何有效的 CSS 选择器。

因此，如果您有`div.example`要加载的内容 - 您可以使用类选择器。

# c# - 集合未绑定到树视图

> ID：12497004
> 
> 赞同：0
> 
> 时间：2012-09-19T14:36:19.693
> 
> 标签：c#, wpf, binding, treeview

我有一个`Observablecollection`EntityBase 类型。EntityBase 是 Ticket,Project,... 类的基类。现在我想将该集合绑定到树视图，但是在调试时没有显示数据。输出调试窗口也没有绑定错误。

有代码：

```
public partial class ReminderExtendedWindow : Window , INotifyPropertyChanged
    {
        private ObservableCollection<EntityBase> coll;
        public ObservableCollection<EntityBase> Coll  
        { 
            get
            { if (coll == null) coll = new ObservableCollection<EntityBase>(); return coll; }
            set { coll = value; NotifiyPropertyChanged("Coll"); }
        }

        public ReminderExtendedWindow()
        {
            InitializeComponent();
            this.ResizeMode = ResizeMode.NoResize;
            Ticket ticket = new Ticket();
            ticket.TicketId = 3535;
            ticket.TicketUrl = "http://www.google.com";
            ticket.TicketRequestTypeName = "denemeticket";
            Project project = new Project();
            project.ProjectUrl = "http://www.google.com";
            project.ProjectId = 1221;
            project.ProjectTypeName = "denemeproj";
            Coll.Add(ticket);
            Coll.Add(project);

        }
} 
```

**XAML**文件代码：

```
<TreeView Height="500" Width="375" Background="Transparent" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,50,0,0" 
               BorderThickness="0,0,0,0" x:Name="EntityTree" ItemsSource="{Binding Coll}">
            <TreeView.Resources>
                  <HierarchicalDataTemplate DataType="{x:Type BusinessLayerEntity:Ticket}" ItemsSource="{Binding}">
                    <TextBlock>
                <Hyperlink RequestNavigate="Hyperlink_RequestNavigate" NavigateUri="{Binding TicketUrl}">
                    <TextBlock Text="{Binding TicketId}"></TextBlock>
                </Hyperlink>
                       <TextBlock Text="{Binding TicketRequestTypeName}"></TextBlock>
                  </TextBlock>
                </HierarchicalDataTemplate>
                <HierarchicalDataTemplate DataType="{x:Type BusinessLayerEntity:Project}" ItemsSource="{Binding}">
                    <TextBlock>
                <Hyperlink RequestNavigate="Hyperlink_RequestNavigate" NavigateUri="{Binding ProjectUrl}">
                    <TextBlock Text="{Binding ProjectId}" ></TextBlock>
                </Hyperlink>
                        <TextBlock Text="{Binding ProjectTypeName}"></TextBlock>
            </TextBlock>
                </HierarchicalDataTemplate>
            </TreeView.Resources>
        </TreeView> 
```

这是类：（票类也具有相同的属性）

```
public class Project : EntityBase, IEntityBase
{
    private string projectUrl;
    private string projectTypeName;
    private int projectId;

    public string ProjectUrl { get { return projectUrl; } set { projectUrl = value; } }
    public string ProjectTypeName { get { return projectTypeName; } set { projectTypeName = value; } }
    public int ProjectId { get { return projectId; } set { projectId = value; } }
} 
```

任何帮助将不胜感激:)谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:43:09.030

尝试添加`DataContext = this;`到`ReminderExtendedWindow`构造函数的末尾

# c# - 当 Internet Explorer 处于 Kiosk 模式时，将 PDF 置于前台

> ID：12497007
> 
> 赞同：2
> 
> 时间：2012-09-19T14:36:37.777
> 
> 标签：c#, internet-explorer, shell32

我正在处理一个需要在 Internet Explorer 信息亭模式窗口中显示 Flash 项目的项目。此外，Flash 使用套接字与我的 C# 应用程序进行通信，以完成 Flash 自身无法执行的各种任务。其中一项任务是打开 PDF 并将其置于前台。由于 Flash 安全性，Flash 无法直接打开 PDF，这迫使您选择网络或本地模式，而网络是该项目的唯一选择。

我遇到的问题是在使用 IE 8 的 Windows XP 上，kiosk 模式似乎与 Shell32 命令冲突，以最小化 Internet Explorer 和/或将 PDF 置于前台。我已经设法让它在 Windows 7 中工作（无法测试 Vista），但我尝试的任何东西似乎都无法在 Windows XP 中始终如一地工作。

我使用 C# 进程启动窗口，如下所示：

```
explorerProcess = new Process();
explorerProcess.StartInfo = new ProcessStartInfo("IEXPLORE.EXE", "-k file:\\\\" + path);
explorerProcess.Start(); 
```

Explorer 现在已打开并处于信息亭模式。接下来我打开PDF。

```
pdfProcess = new Process();
pdfProcess.StartInfo = new ProcessStartInfo(fileName);
pdfProcess.Start(); 
```

最后，使用 Shell32.dll 命令 ShowWindow 我在 PDF 上调用最大化，迫使用户注意它。

```
ShowWindow(pdfProcess.Handle, SW_MAXIMIZE); 
```

在 Windows 7 中，我现在将 PDF 最大化，并且信息亭模式 Internet Explorer 窗口位于 PDF 后面。这样，当 PDF 关闭时，用户将返回到信息亭模式窗口。在 Windows XP 中，PDF 在后台打开，似乎没有多少 ShowWindow 调用将它带到资源管理器实例的前面。我尝试最小化资源管理器实例，并尝试在 IE 和 PDF 上执行其他 Windows 事件，例如显示/隐藏/恢复，以尝试将 XP 哄骗到我想要的内容中，但没有成功。我不确定这是否真的是 XP 的错，或者它是否是 Windows 7（对我而言）在 XP 上有 IE9 和 IE8 的错。

还有其他人遇到过这种情况，或者知道有什么办法可以欺骗 XP 将 PDF 带到前台吗？

# android - 将listview中的android文本和图像对齐为相同

> ID：12497011
> 
> 赞同：0
> 
> 时间：2012-09-19T14:36:49.347
> 
> 标签：android, android-layout, alignment

我需要一些帮助来将自定义列表视图与图像和文本对齐。

我正在尝试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_weight="1"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center"
        android:paddingTop="20dp"
        android:layout_weight="2"
        android:text="TextView" />
</LinearLayout> 
```

而且我认为 weight 是保持元素的比例，而不是元素的内容，但显然它关心文本视图内部的东西，所以我的列表看起来很乱。

无论文本在文本视图中多长时间，如何对齐它是相同的？

![我的疯狂对齐](../Images/59a149d989915fc52a8613e44603d977.png)

所以绿线应该是垂直的直线，不管右手边的文字是什么。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:46:52.023

基本上，您的布局应该是这样的：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|center"
    android:paddingTop="20dp"
    android:layout_weight="2"
    android:drawableLeft="@drawable/ic_launcher"
    android:text="TextView" /> 
```

定义了最左边的`android:drawableLeft="@drawable/ic_launcher"`复合可绘制对象，它将很好地对齐。

![例子](../Images/75189e4895168fd90ff2854c9f0631fa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:40:32.147

采用

```
android:layout_height="0dp" 
```

在你的文本视图中。它将为您的所有元素提供固定大小。在这里，权重参数共享的大小是可变的，因为它取决于文本的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:42:42.543

试试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="0dp"
        android:layout_height="50dp"
        android:layout_gravity="center_vertical"
        android:layout_weight="1"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="2"
        android:text="TextView" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:01:41.563

删除`android:layout_weight`.

由于您定义了宽度，这将对齐您的图像。

如果您也想对齐文本，请将其删除`android:gravity`或设置为左侧。

您可以添加`android:marginRight`到 imageView 以获得更好的可读性。

# c - 如果静态编译的代码要访问内核模块代码中的一个变量，模块必须要静态编译吗？

> ID：12497016
> 
> 赞同：2
> 
> 时间：2012-09-19T14:36:57.443
> 
> 标签：c, linux, module, kernel

所以我相信内核模块代码可以使用静态编译的内核代码中的任何内容，只要它们被暴露出来。但是如果静态编译的内核代码要在模块代码中使用一个全局变量，这可能吗？

例如，我们在一个内核模块代码（任何可加载的内核模块）中有一个名为“int a”的全局变量。在静态编译的内核代码中（例如，在 /linux/sched/fair.c 中），我想访问该变量。

这将导致编译错误，因为模块是最后编译的（在编译静态编译的内核代码之后）并且在开始时没有加载。

如果我首先在静态编译的头文件中声明这个变量怎么办？但是在加载模块之前，该变量将毫无意义。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:26:52.873

我认为内核和任何模块都能够使用 find_symbol（在 kernel/module.c 中定义）来发现内核中任何其他符号的地址或任何加载的模块，无论是否静态编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:41:44.177

根据您的具体需求，可能会有不同的解决方案。我假设您至少控制了静态链接的代码，并且可以在需要时对其进行更改。

**方式一**

如果静态链接的代码可以导出一个函数（类似于`set_my_good_var_ptr()`），则动态加载的模块可以调用该函数以将所需变量的地址传递给前者。

或者，也许，静态链接的代码可以提供一个接口，动态加载的模块可以使用该接口来提供 get/set 回调，从而允许访问变量。

如果这一切都不适合您的项目（例如，如果您无法更改动态加载模块的代码），以下可能会有所帮助，尽管我认为这不是一个好习惯。

**方式二**

注意提供要加载的变量的内核模块（例如，参见[register_module_notifier()](http://lxr.free-electrons.com/ident?i=register_module_notifier)函数）。

请注意，通知函数将在模块加载后但**在**调用其初始化函数之前调用。

调用通知函数时，您可以使用[kallsyms_lookup_name()](http://lxr.free-electrons.com/ident?i=kallsyms_lookup_name)或[kallsyms_on_each_symbol()](http://lxr.free-electrons.com/ident?i=kallsyms_on_each_symbol)来获取所需变量的地址。

这需要在内核配置中进行设置`CONFIG_KALLSYMS`。`CONFIG_KALLSYMS_ALL`如果没有设置这些选项中的一个或两个，它仍然是可行的，但有点困难（例如，在模块的二进制文件中找到符号，获取符号所属的 ELF 部分的地址和其中的偏移量并传递所有这到您的代码等）

找到变量的地址后，静态链接的代码必须以某种方式确定何时可以实际使用该变量（何时初始化等）。如何做到这一点取决于所涉及的模块实际上做了什么，我对此没有任何建议。

# javascript - 对象结构中未定义变量的问题

> ID：12497022
> 
> 赞同：0
> 
> 时间：2012-09-19T14:37:36.287
> 
> 标签：javascript

我有这个类结构（或多或少）：

```
function DataLoader = function () {
    this.setup = function () {
        this.page = new Page();
        this.page.setup();
    };

    Page = function () {
        this.apiSelect = null;
        this.onchangelistener = function () {
            //---------------- look here ---------------
            console.log(this.apiSelect); //Why is this.apiSelect undefined?
            //---------------- look here ---------------
        };

        this.setup = function () {
            this.apiSelect = document.getElementById("foo");
            //This is also weird to me, I had to do it like this
            //to get the functionality I wanted...
            document.getElementById("foo").onchange = this.onchangelistener;
        };
    };
};

var dl = new DataLoader();
dl.setup(); 
```

我对 Javascript 很陌生，现在还没有太多的细节，但这对我来说似乎很奇怪。当 onchange 事件触发时，它会调用 onchangelistener。为什么 this.apiSelect 未定义？我的意思是我已经为它增加了价值。

我当前的代码看起来像这样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:41:58.917

```
 ...
 Page = function () {
        var self = this;
        this.apiSelect = null;
        this.onchangelistener = function () {
            console.log(self.apiSelect);
        }; 
```

内部`onchangelistener`函数的引用`this`与`this`外部范围内的引用不同。所以你需要创建一个对外部`this`（with `var self = this;`）的引用并在函数内部使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:43:09.313

```
Page = function () {
        var apiSelect = null;
        this.onchangelistener = function () {
            console.log(apiSelect);
        };
        ...
}; 
```

发生这种情况是因为`this`被绑定到新的“内部”函数并且它不知道`apiSelect`数据成员是什么。

# android - 片段替换后 EditText 未检测到文本

> ID：12497032
> 
> 赞同：0
> 
> 时间：2012-09-19T14:38:28.723
> 
> 标签：android, authentication, android-edittext

这是来自 Navigator.onClick() 的代码。Login.onResume() 中的代码似乎可以工作，但是在我这样做之后，无论我在用户 ID 和密码字段中输入什么，应用程序似乎都无法识别。它只是一直说“用户ID不能为空”。它只是第一次就可以正常工作。

```
private void buttonClick(final Button btnLeft, final Button btnRight,
        final Button btnQueue) {

    btnLeft.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            FragmentManager fragmentManager = getFragmentManager();
            FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
            previousScreen = btnLeft.getText().toString();
            if (previousScreen.equals("Login")) {
                errorMessage = loginProcedure();
                if (errorMessage.equals("")) {
                    showDetails(btnLeft, btnRight, btnQueue,
                            fragmentTransaction);
                } else {
                    FileIO.displayMessage(getActivity(), errorMessage, null);
                }
            } else if (...) {
            }

            fragmentTransaction.addToBackStack(null);
            fragmentTransaction.commit();
        }

    });

private String loginProcedure() {

    errorMessage = "";
    String userID = ((EditText) getActivity().findViewById(
            R.id.editUserid)).getText().toString();
    if (userID.trim().equals("")) {
        errorMessage = "User ID cannot be empty";
        return errorMessage;
    }

    String password = ((EditText) getActivity().findViewById(
            R.id.editPassword)).getText().toString();
    if (password.trim().equals("")) {
        errorMessage = "Password cannot be empty";
        return errorMessage;
    }

    if (!FileIO.UserList.contains((userID + "PR" + password)
            .toUpperCase())) {
        errorMessage = "UnAuthorized User";
        return errorMessage;
    } else {
        userID = userID;
        UserName = password;
    }

    return errorMessage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:12:21.073

看起来问题在于您的活动看到的 EditText 视图与屏幕上当前处于活动状态的视图不同。这可能会以几种方式发生，并且由于我看不到您的所有代码，因此很难准确判断发生了什么。

要测试将您的登录片段更改为：

```
public class Login extends Fragment {
    private View fragmentView;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        fragmentView = inflater.inflate(R.layout.login, null);
        return fragmentView;
    }

    @Override
    public void onResume() {
        super.onResume();

        EditText e1 = (EditText) fragmentView.findViewById(R.id.editUserid);
        e1.setText("");

        EditText e2 = (EditText) fragmentView.findViewById(R.id.editPassword);
        e2.setText("");
    }
} 
```

这将确保您正在设置当前登录片段用户并传递给“”。

# drupal - 如何让菜单面包屑出现在 Drupal 7 的导航栏中？

> ID：12497033
> 
> 赞同：3
> 
> 时间：2012-09-19T14:38:28.517
> 
> 标签：drupal, navigation, breadcrumbs

我在drupal 7中使用菜单面包屑模块​​，面包屑出现在我完成的页面的顶部，导航栏下方 - 我怎样才能让它们出现在其中？

如果这是不可能的，是否有任何建议使用面包屑模块​​，该模块将出现在我想要的位置并给出类似的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-21T18:11:50.933

在您的 drupal 文件夹中，转到`sites/all/themes/YourTheme/templates/page.tpl.php`并在记事本中打开它（或者，更好的是，记事本++）并查找“面包屑”。这段代码将如下所示：

```
<?php if ($breadcrumb): ?>
    <div id="breadcrumb"><?php print $breadcrumb; ?></div>
<?php endif; ?> 
```

将其移动到 php 文件中的导航标题将使其在该区域中呈现。确保您为当前使用的主题创建了一个子主题，因为将主题更新为新版本将删除您对默认版本所做的任何自定义更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:18:49.083

使用你的 CSS。

* * *

在 drupal 中移动事物的最简单方法是编辑控制每个元素位置的 css 文件。

该位置取决于您使用的主题，我强烈建议如果您不使用自定义主题，请使用一个，这样您就不会破坏默认文件。

CSS通常位于`sites/themes/themeName/CSS`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:13:36.420

[http://drupal.org/project/breadcrumb](http://drupal.org/project/breadcrumb) 公开一个包含面包屑的块。

没有下载，但你可以用 git [http://drupal.org/node/3229/git-instructions](http://drupal.org/node/3229/git-instructions)

# php - 目录、文件上传和图像处理类的设计

> ID：12497035
> 
> 赞同：0
> 
> 时间：2012-09-19T14:38:43.540
> 
> 标签：php, architecture, software-design

我正在 php 中实现**文件上传、目录**和**Imageupload**类。我计划在**Directory class**中实现的是以下功能，例如：

1.  检索文件列表，目录中的文件夹
2.  创建文件夹，递归搜索目录`{path}`

在**FileHandling.class.php**下面的方法如：

1.  文件是否存在于目录中，. C
2.  检查文件上传的文件扩展名
3.  处理将文件从一个位置移动到另一个位置
4.  重命名文件

**在 imageUpload.class.php 中的** 函数如：

1.  调整图像大小，
2.  创建水印。

我想知道的是，该函数应该存在于哪里，我应该只有一个`fileHandling.class.php`并且它包含 的方法`Directory.class.php`，还是将它们分开。

应该`ImageUpload.class.php`是组成`fileUpload.class.php`？我可以在这里应用什么特定的软件模式，例如 Facade、Singleton 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:32:26.653

您应该将所有 FileSystem 操作限制在一个 Factory 中。使用工厂模式来划分上传、文件列表等

# ruby-on-rails - Rails：为什么我不能在 current_user.friends 上运行 .paginate？

> ID：12497037
> 
> 赞同：0
> 
> 时间：2012-09-19T14:38:58.313
> 
> 标签：ruby-on-rails, model, pagination, associations

我正在使用 Amistad gem 创建一个朋友系统。它包括一个友谊模型和控制器，我假设它们以各种方式与我的用户模型相关联：通过方式等，到目前为止所有功能似乎都有效。

在视图中循环 current_user.friends 会给出*用户的朋友*，并允许您访问所有普通用户字段。例如 .email、.name 等。

现在我想分页并将 search_for 应用于 current_user.friends，就像我通常在我的用户模型上所做的那样，但它不起作用。

所以这个，有效：

```
User.order('created_at desc').search_for(params[:search]).paginate(per_page: 10, page: params[:page]) 
```

但是这个

```
current_user.friends.search_for(params[:search]).paginate(per_page: 10, page: params[:page]) 
```

给

```
NoMethodError (undefined method `search_for' for #<Array:0x007faac0b0db10>): 
```

或者这个，当我淘汰 search_for

```
NoMethodError (undefined method `paginate' for #<Array:0x007faac015c7d8>): 
```

希望这里有一个简单的答案！

**编辑**也许我可以通过做 User.where(current_user.friends) 或其他什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:12:04.010

User.order... 返回一个 ActiveRelation 对象，current_user.friends 返回一个数组。试试这个。

```
User.joins('INNER JOIN friendships ON friendships.friend_id = users.id').where(:friendships => {:user_id => current_user.id, :pending => false, :blocker_id => nil}) 
```

# java - 如何获得 flex-messaging-client-android.jar？

> ID：12497040
> 
> 赞同：0
> 
> 时间：2012-09-19T14:39:05.177
> 
> 标签：java, android, adobe, amf, dataservice

如何获得 flex-messaging-client-android.jar？请提供链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:56:52.840

“[创建调用数据服务的 Android 应用程序”](http://help.adobe.com/en_US/enterpriseplatform/10.0/AEPDeveloperGuide/WS4976f0ec3ef48246-1c24bbe312dc391a64f-8000.html)页面显示此 JAR 位于“dataservices-sdk-pkg.zip”中，您可以从“体验服务器”中检索该文件。页面上有关于如何下载的链接。

该 jar 还漂浮在各种 3rd 方下载站点周围……如果您愿意冒着被讨厌的软件感染的风险。

# ide - 崇高的文字可以做到这一点吗？

> ID：12497041
> 
> 赞同：1
> 
> 时间：2012-09-19T14:39:17.023
> 
> 标签：ide, sublimetext2, ctags

我想从 Komodo IDE 切换到 Sublime Text，但是这两件事阻碍了我：

*   我可以 CTRL+单击一个函数来获得它的定义吗？
*   Sublime 中有没有像样的 PHP/WordPress 调试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:50:45.480

查看 ctags 插件：

[https://github.com/SublimeText/CTags](https://github.com/SublimeText/CTags)

它将使您能够单击定义等。Rubymine 和 PHPStorm 在这方面做得非常非常好，但 ctags 会非常接近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:44:01.713

我认为 Sublime Text 的“Goto Anything”功能是您正在寻找的：[http ://www.sublimetext.com/](http://www.sublimetext.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:28:35.070

更好的是：[SublimeCodeIntel](https://github.com/Kronuz/SublimeCodeIntel)是从 Komodo IDE 移植的。我经常使用它，发现它非常好。

快速谷歌搜索“PHP debugger sublime text”产生了[SublimeXdebug](https://github.com/Kindari/SublimeXdebug)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T08:02:49.297

是的。

请查找[Paulius Zaliaduonis 关于 Sublime Text 3 as C++ IDE 的bendras.co.uk 博客文章](http://www.bendras.co.uk/blog/2016-06-30%20Sublime%20Text%203%20as%20C++%20IDE)。您将找到如何为 C++ 执行此操作。我看到有[Sublime PHP Companion](https://github.com/erichard/SublimePHPCompanion)和[XDebug Client](https://packagecontrol.io/packages/Xdebug%20Client)。

所有软件包都应该在大多数平台上运行：Windows、Linux、iOS？

# perl - Perl 的 srand() 默认种子，发布版本 5.004 的弱点是什么？

> ID：12497045
> 
> 赞同：5
> 
> 时间：2012-09-19T14:39:41.000
> 
> 标签：perl, security, random, reverse-engineering, srand

我可以找到大量关于`time()`Perl 版本 5.004 之前的使用问题的文档，但没有任何后续。

对于家庭作业，我们被要求对程序的结果进行逆向工程，前提是默认 Perl`srand()`在默认播种方面仍然存在缺陷。[perl 5.004 版本的变更日志](http://perldoc.perl.org/perl5004delta.html#New-and-changed-builtin-functions)指出，`srand()`默认种子现在基于“大量难以预测的系统相关值的混合”。

是这样吗？如果是这样，这些价值观是什么？它们是否有任何固有的弱点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T23:48:58.487

（我不是密码学家，但这些年来我吸收了很多东西。几年前我不得不帮助审查客户的随机数生成，这就是导致发现下面提到的 Crypt::Random 错误的原因。）

如果您正确缩进所有这些 ifdef，则种子代码更有意义。这是 5.16.0 中的代码。

```
U32
Perl_seed(pTHX)
{
    dVAR;
    /*
     * This is really just a quick hack which grabs various garbage
     * values.  It really should be a real hash algorithm which
     * spreads the effect of every input bit onto every output bit,
     * if someone who knows about such things would bother to write it.
     * Might be a good idea to add that function to CORE as well.
     * No numbers below come from careful analysis or anything here,
     * except they are primes and SEED_C1 > 1E6 to get a full-width
     * value from (tv_sec * SEED_C1 + tv_usec).  The multipliers should
     * probably be bigger too.
     */
#if RANDBITS > 16
#  define SEED_C1   1000003
#  define SEED_C4   73819
#else
#  define SEED_C1   25747
#  define SEED_C4   20639
#endif

#define   SEED_C2   3
#define   SEED_C3   269
#define   SEED_C5   26107

#ifndef PERL_NO_DEV_RANDOM
    int fd;
#endif

    U32 u;

#ifdef VMS
#  include <starlet.h>
    /* when[] = (low 32 bits, high 32 bits) of time since epoch
     * in 100-ns units, typically incremented ever 10 ms.        */
   unsigned int when[2];
#else
#  ifdef HAS_GETTIMEOFDAY
       struct timeval when;
#  else
       Time_t when;
#  endif
#endif

/* This test is an escape hatch, this symbol isn't set by Configure. */
#ifndef PERL_NO_DEV_RANDOM
#    ifndef PERL_RANDOM_DEVICE
         /* /dev/random isn't used by default because reads from it will block
          * if there isn't enough entropy available.  You can compile with
          * PERL_RANDOM_DEVICE to it if you'd prefer Perl to block until there
          * is enough real entropy to fill the seed. */
#        define PERL_RANDOM_DEVICE "/dev/urandom"
#    endif
     fd = PerlLIO_open(PERL_RANDOM_DEVICE, 0);
     if (fd != -1) {
        if (PerlLIO_read(fd, (void*)&u, sizeof u) != sizeof u)
        u = 0;
    PerlLIO_close(fd);
    if (u)
        return u;
    }
#endif

#ifdef VMS
    _ckvmssts(sys$gettim(when));
    u = (U32)SEED_C1 * when[0] + (U32)SEED_C2 * when[1];
#else
#  ifdef HAS_GETTIMEOFDAY
        PerlProc_gettimeofday(&when,NULL);
        u = (U32)SEED_C1 * when.tv_sec + (U32)SEED_C2 * when.tv_usec;
#  else
        (void)time(&when);
        u = (U32)SEED_C1 * when;
#  endif
#endif

    u += SEED_C3 * (U32)PerlProc_getpid();
    u += SEED_C4 * (U32)PTR2UV(PL_stack_sp);

#ifndef PLAN9           /* XXX Plan9 assembler chokes on this; fix needed  */
    u += SEED_C5 * (U32)PTR2UV(&when);
#endif

    return u;
} 
```

代码是如此令人困惑，因为它实际上是几种不同的方式将熵全部交错在一起。基本上有两条路径：系统随机设备和从解释器和环境的状态中收集。

*   系统随机设备。

这是最简单也可能是最强的方法。如果您的操作系统有一个不阻塞的随机设备，即。`/dev/urandom`从中读取 32 位。完毕！ `#ifndef PERL_NO_DEV_RANDOM`（漂亮的双重否定）控制该位。这几乎在每个 Unix 系统上都完成了。此时，Perl 随机种子的分析切换到您特定操作系统的实现`/dev/urandom`。

*   从时钟、pid 和堆栈指针派生一些东西。

如果您的系统没有随机设备，基本上是 Windows，Perl 会退回到通过混合一些希望难以预测的系统值来派生种子。

*   时间以微秒或几秒为单位，取决于是否`gettimeofday()`存在。
*   进程 ID `PerlProc_getpid()`，。
*   当前堆栈指针的内存位置，`PTR2UV(PL_stack_sp)`。

它*应该*用这些信息做什么，这就是开头的大评论的内容，是使用真正的散列算法将它们混合在一起。相反，它将它们乘以各种常量（`SEED_C1`等等`SEED_C2`）并将它们相加。这肯定是有缺陷的。

从理论上讲，所有这些信息都是可以预测的。我不知道预测系统信息的最新技术是什么，但是时间 + pid + 堆栈指针是一种相当常见的获取熵的方法，并且肯定会有关于该主题的论文。

Perl 的所有方法都有一个共同的缺陷，即使在 64 位机器上，它也只使用 32 位来完成这一切。它不会拉出 64 位`/dev/urandom`，只有 32 位。即使有 64 位信息，它也只会查看进程 ID、堆栈指针或时间信息的 32 位。

通读代码后，我担心三个问题。

*   它仅使用 32 位随机性。

多GPU系统可能会蛮力做到这一点。

*   (Unix) 你的`/dev/urandom`.

`/dev/urandom`如果你从熵中提取太多太快，可能会耗尽熵。它不会阻塞，而是会产生更弱的熵。这超出了 Perl 的控制，但却是系统范围的弱点。此外，一些程序可能会拉出比它们需要消耗更多的熵`/dev/urandom`。[几年前，](https://metacpan.org/source/VIPUL/Crypt-Random-1.25/Changes#L25)我们在 Crypt::Random 中发现了一个错误，它就是这样做的。

*   （Windows）那个弱散列算法。

除了 32 位问题，这可能是最薄弱的环节。

*   它使用什么随机函数？

一旦提供了种子，它将传递给哪个随机数函数？较差的 rand 函数更容易猜出种子。Perl 会查找几个，通常以`drand48`. 你可以看到它的用途：`use Config; print $Config{randfunc}'`. 我不知道它有多好用，但是 OS X drand48 手册页说`random(3)`更强大，Linux 手册页说[drand48 is obsolete](http://linux.die.net/man/3/drand48)。

自从......哦，天哪，90 年代后期，这个功能就没有被触及过。它已移至 util.c，但尚未被认真对待。 `git blame 132efe8bfb7cd0fb1beb15aaf284e33bf44eb1fa^ pp.c`显示真实历史，寻找`S_seed`。它可能需要一些爱。大多数其他语言都有[更高级的随机数生成器](http://en.wikipedia.org/wiki/Mersenne_twister#Applications)。

# asp.net-mvc - HttpContext.Session 设置后保证不为空？

> ID：12497049
> 
> 赞同：0
> 
> 时间：2012-09-19T14:39:53.577
> 
> 标签：asp.net-mvc

如果我执行以下操作：

```
 public ActionResult Login(String Username,String ClientCode)
    {

        HttpContext.Session["clientcode"] = ClientCode;
        HttpContext.Session["security"] = Repository.GetSomething(HttpContext.Session["clientcode"].ToString());
    } 
```

HttpContext.Session["clientcode]".ToString() 是否保证返回刚刚传入的值，或者它是否具有与 cookie 类似的行为，这是不可接受的，因为 cookie 不保证仍然存在，即使是一瞬间设置后呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:48:17.713

一旦 AppDomain 重置或用户会话超时，该值将丢失。所以，理论上，你不能保证。

但是为什么您不想在示例的第二行中使用“ClientCode”呢？

# c# - 在运行时更改代码中属性的值

> ID：12497054
> 
> 赞同：3
> 
> 时间：2012-09-19T14:40:00.527
> 
> 标签：c#, c++, xaml, windows-8, windows-runtime

我有这个 XAML，在运行时我想知道如何更改作为 WrapGrid 对象属性的 MaximumRowsOrColumns 属性的值：

```
<ScrollViewer x:Name="LayoutRoot" IsTabStop="True">
    <ItemsControl Name="m_pageContainer" ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollBarVisibility="Hidden" HorizontalAlignment="Center" VerticalAlignment="Center">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapGrid Orientation="Horizontal" MaximumRowsOrColumns="2"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>

        <Rectangle Margin="10,10,10,10" Height="50" Width="40" Fill="Pink" />
        <Rectangle Margin="10,10,10,10" Height="50" Width="40" Fill="YellowGreen" />
        <Rectangle Margin="10,10,10,10" Height="50" Width="40" Fill="Blue" />
        <Rectangle Margin="10,10,10,10" Height="50" Width="40" Fill="Red" />
        <Rectangle Margin="10,10,10,10" Height="50" Width="40" Fill="Yellow" />
        <Rectangle Margin="10,10,10,10" Height="50" Width="40" Fill="Green" />
        <Rectangle Margin="10,10,10,10" Height="50" Width="40" Fill="Gray" />
        <Rectangle Margin="10,10,10,10" Height="50" Width="40" Fill="LightBlue" />
    </ItemsControl>
</ScrollViewer> 
```

我一直在徒劳地寻找在 C# 或 C++/CX 中执行此操作的方法。

谢谢

罗杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:07:59.710

```
<WrapGrid Orientation="Horizontal" MaximumRowsOrColumns="{Binding MaxRowsOrColumns}"/> 
```

这假设您在数据上下文中调用`MaxRowsOrColumns`了一个属性（您应该添加它）。那么你所要做的就是改变你的财产的价值。

# jpa - JPA 类 有田野孩子的人

> ID：12497055
> 
> 赞同：1
> 
> 时间：2012-09-19T14:40:01.303
> 
> 标签：jpa, jpa-2.0

我有一个具有以下字段的数据库实体 Person：

1.  ID
2.  父亲
3.  母亲

而且我需要创建带有字段子项的 JPA 实体类。像这样的东西：

```
@Entity
public class Person implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;

    @Column(name = "father")
    private Integer fatherID;

    @Column(name = "mother")
    private Integer motherID;

    @OneToMany(mappedBy = "fatherId")
    private List<Person> children;
    } 
```

但问题是我还需要在`mappedBy`属性中确定母亲。结果可能如下所示：

```
SELECT * FROM person WHERE father = id OR mother = id 
```

有人可以帮我解决这个问题吗？使用 JPA 可以完成这项任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:16:21.700

您不能将“mappedBy”设置为非对象类型（因为这不是**双向**关系）。您必须具有 Person 类型（不是 Integer）的“mother”和“father”字段才能具有双向关系。得到父亲和母亲是微不足道的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:11:52.467

Apart from mapping issues that have been pointed out...

Not a JPA expert but I don't think JPA has this case considered directly. I would solve this using two mappings and an auxiliar fake getter. Sample below:

```
@OneToMany(mappedBy = "father")
private List<Person> childrenIfFather();

@OneToMany(mappedBy = "mother")
private List<Person> childrenIfMother();

public getChildren() {
    if (childrenIfFather != null) return childrenIfFather();
    else return childrenIfMother();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:03:01.933

尝试使用 EJBQL（或者此时是 JPQL？）来解决它：

```
 SELECT p FROM Person p WHERE p.father = ?1 OR p.mother = ?2 
```

另外，我会考虑使用不是整数的东西作为id。从长远来看，它真的会咬你一口（可能是 long 或 BigInteger）。

# php - 如果页面未在 colorbox/iframe 中打开，则阻止访问页面（重定向）

> ID：12497059
> 
> 赞同：0
> 
> 时间：2012-09-19T14:40:16.137
> 
> 标签：php, jquery, colorbox

我有一个页面，如果它没有在颜色框中打开，我不希望任何人能够访问它。我想将它们重定向回“/dashboard/”。

澄清一下，如果页面是直接访问的（不是在 iframe/colorbox 中），则重定向，否则，加载页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:48:14.873

您可以使用 javascript 检查当前页面是否为首页：

```
if (top == self) {
  top.location = '/dashboard/';
} 
```

但是当然可以关闭javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:48:33.800

这就是您可以防止在 jquery 中调用的方法，但我不明白为什么需要这样做，用户可以轻松地直接指向链接，如果您真的想要临时修复，那么您可以检查链接的父级是否存在

```
$('a').click(function(e){
    if($(e.target).parent('#colourBoxID').length > 0){

       //go to page

    }
    else{

    //redirect
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:45:05.140

如果您在 iframe 中打开项目，这实际上是不可能的，因为浏览器将加载 iframe，就像它直接访问页面时加载它一样。

你可以做一个 nonce 类型的事情，在页面加载时生成一个数字，并将其作为 GET 变量传递给 iframe，iframe 将检查以确保传递给它的 val 与存储在 SESSION 中的相同会话不存在或不同，重定向；如果相同，则从会话中删除该值并正常加载。

不过，我不确定它的效果如何；它破坏的一个例子可能是如果用户尝试刷新 iframe，它最终会将您所在的网页（/dashboard/）嵌入到 iframe 中。

所以简单的答案是否定的，如果没有一些复杂性并冒着破坏人们体验的风险，这是不可能的。

# grails - 如何让lesscss-resources插件在自己的插件中处理更少的文件？

> ID：12497060
> 
> 赞同：1
> 
> 时间：2012-09-19T14:40:16.880
> 
> 标签：grails, less, grails-plugin

我正在使用 Grails 2.1.0 和 lesscss-resources 1.3.0.3

我创建了一个包含较少和几个 css 文件的插件，安装了 lesscss-resources 插件 + 明确的插件依赖项。另一个 Grails 项目安装了我的自定义插件和完全相同的 lesscss-resources 插件。

单独运行插件时，所有的 css 文件和 less 文件都会正确地合并到一个 css 文件中。

当运行另一个 Grails 项目时，只有 css 文件被合并 - 但 less 文件被链接为 less 文件，如下所示： `<link href="/myproject/css/mystyle.less" type="text/css" rel="stylesheet/less" media="screen, projection" />`. 但是，项目中较少的资源可以很好地合并。

插件的较少资源不应该也合并吗？如果没有，是否有解决方法？对于如何解决这个问题的任何想法，我都会很高兴 - 我不知道在哪里寻找问题的根本原因......非常感谢。

顺便说一句，我不是在谈论这里描述的问题：[https](https://github.com/paulfairless/grails-lesscss-resources/issues/25) ://github.com/paulfairless/grails-lesscss-resources/issues/25 。我已经偶然发现了这个并添加了 dummy.css，它对我来说很好用。

插件和项目中安装的相关插件：

*   运行时“：缓存头：1.1.5”
*   运行时“：缓存资源：1.0”
*   运行时“：lesscss-resources：1.3.0.3”
*   运行时“：资源：1.1.6”
*   运行时“：压缩资源：1.0”

* * *

**编辑：** 仅供参考：与此同时，我做了更多的测试，并用最少的代码重现了这个问题。由于这似乎非常特定于 lesscss-resources 插件，因此我在[https://github.com/paulfairless/grails-lesscss-resources/issues/36提出了一个问题](https://github.com/paulfairless/grails-lesscss-resources/issues/36)

我会用那里可能弹出的任何信息来更新这个问题。如果有人有想法，我仍然很高兴听到它，我在这里上传了最少代码项目和插件： [http ://www.2shared.com/file/4OM-RVC6/lesstest .html](http://www.2shared.com/file/4OM-RVC6/lesstest.html)

* * *

**编辑 2：** 我还没有收到回复，但至少找到了适用于我的用例的解决方法。不幸的是，它涉及更改 lesscss-plugin 的代码。请参阅我在[https://github.com/paulfairless/grails-lesscss-resources/issues/36#issuecomment-8721813的评论](https://github.com/paulfairless/grails-lesscss-resources/issues/36#issuecomment-8721813)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:25:59.300

由于仍然没有关于上述问题的反馈，我现在添加我的解决方法作为答案。

我通过将 resourceMappers.LesscssResourceMapper 复制到我的插件项目（即覆盖 lesscss-resources 插件的默认行为）并将第 24 行更改为说

```
File input = originalFile 
```

代替

```
File input = getOriginalFileSystemFile(resource.sourceUrl); 
```

这样，一切对我来说都很好。据我所知，这种变化不会产生任何副作用。

# javascript - 在 TinyMCE 加载时重排 Highslide 弹出窗口

> ID：12497068
> 
> 赞同：1
> 
> 时间：2012-09-19T14:40:42.770
> 
> 标签：javascript, jquery, tinymce

我正在尝试在 TinyMCE 加载后重排一个 highslide 弹出窗口，因为它占用了更多空间。我曾尝试在 TinyMCE 中使用 init_instance_callback 和 oninit 参数，但是它仍然会在 TinyMCE 区域的完整 HTML 呈现之前触发，因此它不会重排页面。我有一个解决方法是在初始化后将超时设置为 1 秒，但是我认为会有更好的方法吗？

这是没有 setTimeout 解决方法的代码：

```
tinyMCE.init({
   ...
   oninit : "initTinyMCEComplete"
});

function initTinyMCEComplete() {
   var expander = top.hs.getExpander();
   if (expander) {
      expander.reflow();
   }
} 
```

如果您想知道，我已经检查以确保它到达了 expander.reflow()。

谢谢。

# function - 在gnuplot中拟合分段函数

> ID：12497073
> 
> 赞同：5
> 
> 时间：2012-09-19T14:40:52.467
> 
> 标签：function, gnuplot, bounds, curve-fitting, fitbounds

我想在 gnuplot 中拟合多个有界函数，同时也拟合边界值。

例如：

```
f(x)=a          (for x < b)

f(x)=a+(x-b)**c (for x > b)

fit f(x) 'data.dat' via a,b,c 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:21:59.210

嗯……有趣。您为什么不尝试以下方法：

```
f(x)=(x<b)?a:a+(x-b)**c
fit f(x) 'data.dat' via a,b,c 
```

*由@george 测试（见评论）。谢谢乔治！*

# maven - Maven war-inplace：清理类和 lib 文件夹

> ID：12497081
> 
> 赞同：10
> 
> 时间：2012-09-19T14:41:44.557
> 
> 标签：maven, maven-war-plugin

当您运行 maven war:inplace 时，所有类和库都将复制到项目的 webapp 文件夹中。当我更新库的版本号时，我最终会在 lib 文件夹中得到两个版本的相应 jar，旧版本和新版本。

有什么方法可以在复制新库之前清理 lib 文件夹？

（“mvn clean install war:inplace”不起作用...）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T15:04:33.473

我必须在我的项目中做同样的事情，这就是我所做的：

将以下内容添加到标记内的 pom.xml 中`<plugins>`，它自定义 clean 插件以删除 WEB-INF/classes 和 WEB-INF/lib 目录：

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.4.1</version>
    <configuration>
        <filesets>
            <fileset>
                <directory>src/main/webapp/WEB-INF/classes</directory>
            </fileset>
            <fileset>
                <directory>src/main/webapp/WEB-INF/lib</directory>
            </fileset>
        </filesets>
    </configuration>
</plugin> 
```

# python - 如何在结尾之间获取文本值

> ID：12497083
> 
> 赞同：2
> 
> 时间：2012-09-19T14:41:47.617
> 
> 标签：python, text, screen-scraping, beautifulsoup

我正在尝试使用 python 和 beautiuflsoup 进行屏幕抓取。我遇到一个问题是我之前不知道如何获取文本值`<br/>`

这是一个例子：

```
<h3>
    Francois  Abboud
</h3>
Professor,&nbsp;
Internal Medicine
<br />
<br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:53:29.333

我认为您可以使用`.next_sibling`：

```
>>> from bs4 import BeautifulSoup
>>> 
>>> html = """
... <h3>
...     Francois  Abboud
... </h3>
... Professor,&nbsp;
... Internal Medicine
... <br />
... <br />
... """
>>> 
>>> soup = BeautifulSoup(html)
>>> 
>>> for h3 in soup.findAll("h3"):
...     print 'h3:'
...     print repr(h3)
...     print 'next sibling:'
...     print repr(h3.next_sibling)
... 
h3:
<h3>
    Francois  Abboud
</h3>
next sibling:
u'\nProfessor,\xa0\nInternal Medicine\n' 
```

我应该说两分钟前我不知道该怎么做，但我知道`findAll`. 所以我得到了其中一个`h3`对象，我使用 IPython 的选项卡补全来查看里面有什么，它有类似的东西`h3.next_element`，`h3.next_sibling`我尝试了它们直到一个工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:51:50.413

tsup，如果您将该 html 分配给一个字符串值，如下所示：

```
html = 'your html here' 
```

然后你可以对其进行拆分，字符串将被拆分为一个字符串值数组，其中包含您指定的分隔符两侧的字符串：

```
def extractmyCrap(html):
   h3splitStrings = html.split('</h3>')
   h3splitStrings = h3splitStrings[1]
   extractedText = h3splitStrings.split('<br/>')
   return extractedText[0] 
```

如果您需要任何进一步的帮助，或者我对您的问题的理解不正确，请发表评论

# c# - 为具有所需控件的表单上的按钮启用逻辑

> ID：12497086
> 
> 赞同：0
> 
> 时间：2012-09-19T14:42:01.857
> 
> 标签：c#, winforms

假设我有一个带有一些文本框和组合框的表单，其中一些是必须填写的控件，然后才能启用表单上的 OK 按钮。

因此，一种方法是使用像 EnableOK() 方法这样的集中式方法来检查那些所需的组合框和文本框是否已填写...然后我必须继续这些所需控件的 TextChanged 或 IndexChanged 事件调用此 EnableOK( ） 方法。

所以我在想是否有更好的方法来做到这一点？也许我们可以使用一种模式？这样我就不必在每个地方都调用 EnableOk()，或者也许没有更好的方法，而这就是其他人都在这样做的方式？

PS：我正在使用 C# Winforms。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:46:40.410

一种方法是根本不禁用“确定”按钮。相反，当用户按下 OK 时，请检查并在出现问题时显示 MessageBox。

我喜欢这种方法有几个原因。

1.  用户永远不会想知道为什么没有启用 OK 按钮。
2.  您可以准确地告诉用户为什么不能继续。你可以告诉他们他们“搞砸了”的地方。

我个人更喜欢这种方法。用户不应该决定什么是可接受的输入。我更喜欢通过告诉他们在输入错误时需要在哪里修改输入来简单地轻推用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:46:21.807

创建一个观察者，它将订阅所有 textBox.TextChanged 事件。

```
public class IputValidator
{ 
     public event Action ValidationDone;
     private List<TextBox> boxes = new List<TextBox>();
     public void RegisterTextBox(TextBox tb) 
     { 
       tb.TextChanged += (s,e) => Validate;
       boxes.Add(tb);
     }
     public void Validate() 
     { 
        foreach(var t in boxes)
        {
          if(string.IsNullOrEmpty(t.Text)) return;
        }
        //all data inputed. fire validationDone event.
     }
} 
```

它将等待输入所有必要的数据。然后，它将启用确定按钮。

* * *

使用

```
public partial class YourForm : Form 

{
  private InputValidator _validator;

  public YourForm() 
  {
     InitializeComponents(); //I don't remember the right name in WinForms
     _validator = new InputValidator();
     _validator.RegisterTextBox(_textBox1);
     _validator.ValidatonDone += () => { _okButton.Enable = true;} 
  }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:58:55.663

这是使您能够在控制端进行一些复杂验证的架构方法：

1.  创建一个对所有控件类型都通用的接口，例如：

> ```
> interface iMyControls
> {
>     bool ValidateControl();
> } 
> ```

1.  创建您自己的类，这些类继承自所需的控件并实现 iMyControls：

    ```
    internal class MyTextBox : System.Windows.Forms.TextBox, iMyControls
    {
         public bool ValidateControl()
         {
             return this.Text != "";
         }
    } 
    ```

2.  在您的表单上，只需查看此控件并调用：

    ```
    bool isValid = myControl.ValidateControl(); 
    ```

# php - CodeIgniter 替换所有 POST 输入中的选定字符

> ID：12497087
> 
> 赞同：1
> 
> 时间：2012-09-19T14:42:05.013
> 
> 标签：php, codeigniter, post, character-encoding, replace

我打算将现有的 Intranet 系统转换为 CodeIgniter。我一直使用 UTF-8，因此它可以处理各种不同的字符，这对于系统来说是必不可少的（输出发票、地址标签等）。

我决定在输入时自动替换一些字符，因为它们最终会使系统用户感到困惑。

*   单引号和双引号。替换为正常的撇号/引号
*   En dash 和 em dash，替换为正常的连字符
*   省略号，替换为三个句号

至少这些标点符号现在都被一致地使用和存储了。

在这个系统中，要存储在数据库中的数据总是由 POST 接收，所以我在每次页面加载时在 POST 数组上运行以下函数......

```
function nasty_chars_replace(&$var) {

    $trans_table = array(
        chr(0xe2).chr(0x80).chr(0x9a) => '\'', //SINGLE LOW-9 QUOTATION MARK
        chr(0xe2).chr(0x80).chr(0x9e) => '"', //DOUBLE LOW-9 QUOTATION MARK
        chr(0xe2).chr(0x80).chr(0xa6) => '...', //HORIZONTAL ELLIPSIS
        chr(0xe2).chr(0x80).chr(0x98) => '\'', //LEFT SINGLE QUOTATION MARK
        chr(0xe2).chr(0x80).chr(0x99) => '\'', //RIGHT SINGLE QUOTATION MARK
        chr(0xe2).chr(0x80).chr(0x9c) => '"', //LEFT DOUBLE QUOTATION MARK
        chr(0xe2).chr(0x80).chr(0x9d) => '"', //RIGHT DOUBLE QUOTATION MARK
        chr(0xe2).chr(0x80).chr(0x93) => '-', //EN DASH
        chr(0xe2).chr(0x80).chr(0x94) => '-' //EM DASH
    );

    foreach ($trans_table as $utf8_code => $replace) {
        $var = str_replace($utf8_code, $replace, $var);
    }

    return trim($var);
}
array_walk_recursive($_POST, 'nasty_chars_replace');
```

是否有一种方法可以在 CodeIgniter 中全局对所有 POST 数据（如果 POST 存在）执行类似操作？

有没有其他人做这样的事情？
是否有任何其他容易混淆的字符我应该考虑“清理”（而不是这样清理）以保持数据一致性？
**编辑：**这甚至是个好主意吗？

**编辑 2：**我应该说我也`trim()`所有 POST 数据以及删除前导/尾随空格。因此，如果有人决定只用空格填充输入，验证可能会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:58:17.817

很好地回答您的部分问题 - 如果您使用 CI 的[输入类](http://codeigniter.com/user_guide/libraries/input.html)，它会为您执行安全过滤......当调用新控制器时会自动调用安全过滤功能。

所以如果你使用**$this->input->post()**而不是 $_POST.... 它

> 过滤 GET/POST/COOKIE 数组键，只允许字母数字（和一些其他）字符。

Input 类能够自动过滤输入以防止跨站点脚本攻击。如果您希望过滤器在每次遇到 POST 或 COOKIE 数据时自动运行，您可以通过打开 application/config/config.php 文件并设置它来启用它：

`$config['global_xss_filtering'] = TRUE;`

或仅在需要时使用 TRUE 作为第二个参数。

```
$this->input->post(NULL, TRUE); // returns all POST items with XSS filter 
```

所以我想你可以扩展核心 Input 类

```
class MY_Input extends CI_Input {

    function __construct()
    {
        parent::__construct();
    }
} 
```

并在此处添加您的自定义函数以替换某些字符并修剪值。然后这个 Input 类为您预处理全局输入数据以确保安全性和数据库一致性。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:45:30.583

如果您想在所有 POST 数据上运行它而不需要*每次都*调用该函数，请考虑将其放在控制器的构造函数中，或者放在控制器父级的构造函数中。

## 在控制器的构造函数中：

```
class Home extends CI_Controller{
    function __construct(){
        parent::__construct();
        if(!empty($_POST)) array_walk_recursive($_POST, 'nasty_chars_replace');
    }

    function index(){
        //typically a GET request, nasty_chars_replace will not execute.
    }

    function post_here1(){
        //will be nasty char cleaned.
    }

    function post_here2(){
        //will be nasty char cleaned.
    }

} 
```

现在您可以想象，这必须写在所有控制器的构造函数中。如果您只想编写一次，请考虑首先从基类扩展您的控制器并将其写入父类的构造函数中：

## 在父控制器的构造函数中：

```
class MY_Controller extends CI_Controller{
    function __construct(){
        parent::__construct();
        if(!empty($_POST)) array_walk_recursive($_POST, 'nasty_chars_replace');
    }
} 
```

...然后回到**home.php**：

```
class Home extends MY_Controller{
    function __construct(){
        parent::__construct();
    }

    function index(){
        //typically a GET request, nasty_chars_replace will not execute.
    }

    function post_here1(){
        //will be nasty char cleaned.
    }

    function post_here2(){
        //will be nasty char cleaned.
    }
} 
```

我鼓励您查看 Phil Sturgeon 的[Keeping It Dry](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-base-Classes-Keeping-it-DRY)帖子，了解有关如何使用此基类继承的更多信息。

# google-sheets - 我需要一个公式来返回唯一值在给定日期出现的次数

> ID：12497092
> 
> 赞同：-2
> 
> 时间：2012-09-19T14:42:12.270
> 
> 标签：google-sheets, google-sheets-formula, array-formulas

在 Google 电子表格的电子表格中，我试图解决这个问题：

```
17/02/2012  banana
17/02/2012  banana
17/02/2012  banana
17/02/2012  apple
18/02/2012  apple
18/02/2012  apple 
```

我需要一个公式来返回唯一值在给定日期出现的次数。

例子：

```
17/02/2012 - two unique values 
18/02/2012 - one unique value 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:54:13.813

为此，您将使用以下内容：

```
=ARRAYFORMULA(UNIQUE(B5:C10)) 
```

假设您的范围在`B5:C10`. 您可能需要调整范围。

# logging - 如何在带有 AD 的 Windows Server 2008 上记录文档更改？

> ID：12497093
> 
> 赞同：2
> 
> 时间：2012-09-19T14:42:14.920
> 
> 标签：logging, windows-server-2008, auditing, change-tracking

好的，所以我们有一个开发团队来处理存储在 Windows Server 2008 R2 上的文件，通常是 txt 文件。这些开发人员使用他们自己的用户名/密码从服务器上的 Active Directory 远程登录。他们都对服务器上的特定共享具有 rwx 访问权限。

最近，关于“没人”进行的神秘文档更改的问题很多。不幸的是，我们无法查看谁是最后修改特定文件的用户。

关于我们如何记录对文件所做的更改（包括进行修改的用户）的任何想法？

他们从计算机上的共享驱动器登录到服务器。（网络驱动器）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:31:20.693

这里的关键字是文件审核，请检查以下内容： [http ://www.techotopia.com/index.php/Auditing_Windows_Server_2008_File_and_Folder_Access](http://www.techotopia.com/index.php/Auditing_Windows_Server_2008_File_and_Folder_Access)

# extjs - 如何从树中删除项目

> ID：12497094
> 
> 赞同：8
> 
> 时间：2012-09-19T14:42:16.827
> 
> 标签：extjs, treeview, crud

我尝试使用此示例并将基本 CRUD 添加到树中。

[http://dev.sencha.com/deploy/ext-4.0.0/examples/tree/treegrid.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/tree/treegrid.html)

现在，我只想从树中删除一个项目。我添加了按钮，并在点击下点击：

```
click : function() {;
    var record = tree.getSelectionModel().getSelection()[0];
    store.destroy(record);
    store.sync();
} 
```

我已验证记录和存储存在。该商店的类型为 TreeStore，如示例中所示。如果我检查正在发送的请求，它只是`[]`. 我目前在我的代理中拥有的是：

```
var store = Ext.create('Ext.data.TreeStore', {
    storeId : 'treeStore',
    model : 'Task',
    proxy : {
        type : 'ajax',
        // the store will get the content from the .json file
        url : '../resources/data/treegrid.json'
    },
    folderSort : true
}); 
```

单击删除不会删除当前选定的项目。我是否需要在代理中设置正确的销毁 URL，为什么它不发送任何有关需要在请求标头中删除的内容的详细信息？我找不到其他从树上进行 CRUD 的示例。

![在此处输入图像描述](../Images/7c738afbfc1f533d361a2f1dc36867aa.png)

* * *

**编辑：**

请注意，使用混淆的原因`store.destroy(record)`是[Ext.data.Store](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store)有一个方法`remove(record)`，而[Ext.data.TreeStore](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.TreeStore)没有。此外，破坏的简写方法是`record.destroy()`而不是`record.remove(true)`.

但是请注意，我在执行`record.destroy()`or时收到错误`record.remove(true)`。据推测，商店需要保留节点以作为 JSON 发送，因此请`record.remove()`改用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T15:01:59.780

树存储没有方法销毁。由于记录来自树存储，它用[节点接口](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.NodeInterface)装饰。所以使用 remove 方法（带有可选的destroy）。

```
 var record = tree.getSelectionModel().getSelection()[0];
    record.remove(true);
    store.sync(); 
```

# error-handling - Processing.org 应用程序有时会在没有任何迹象的情况下崩溃

> ID：12497096
> 
> 赞同：0
> 
> 时间：2012-09-19T14:42:26.443
> 
> 标签：error-handling, crash, processing

我有两个使用 Processing.org 语言编写的应用程序。它们非常基本，可以定期拨打互联网电话并显示数据。

有时，这些程序运行一段时间后，会因为未知原因而崩溃。此时真正的问题是应用程序不会以任何方式发出崩溃信号。屏幕就在那里，就好像它在等待下一位数据——这通常可能是几分钟，所以屏幕是空白的似乎并不奇怪。

有没有办法让 Processing.org 应用程序在发生任何致命错误时关闭或显示错误消息？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:54:56.297

处理程序是 Java 程序。正如乔治在他的评论中提到的那样，从这个问题中无法判断出什么可能会引发导致程序崩溃的异常。

但是，如果异常是从主程序循环（Processing 的 draw() 函数）中生成的，则可以将其包装在 try-catch 块中并以可见的方式处理异常，例如：

```
void draw () {
    try {
        // your code here...
    } catch (Exception e) {
        // display the Exception message on-screen
    }
} 
```

您可能还需要设置一个标志，告诉程序仅将该异常消息绘制到屏幕上，而不继续运行有问题的代码。

由于异常可能是从程序中除 draw() 循环之外的某个位置抛出的*，*因此您不一定会在此处捕获它。那么，最好的办法是查看日志。如果您在 OSX 上，请尝试 Console.app（在 /Applications/Utilities 中）以查看您的程序是否向 stderr 吐出任何内容。我不知道 Windows 等价物，但应该在某处有日志。

简而言之，“乔治所说的”。但希望这个答案能以一种有用的方式详细说明这一点。

# windows - 在不知道 VID&PID 的情况下读取 USB HID 条码扫描器输入

> ID：12497105
> 
> 赞同：9
> 
> 时间：2012-09-19T14:43:05.693
> 
> 标签：windows, winapi, 64-bit, barcode, barcode-scanner

我正在尝试为条形码扫描仪开发设备独立库，它必须在 Windows 环境中工作。

我在这个领域做了一些研究，afaik 这个问题的大多数解决方案都取决于特定的设备 VID&PID（RawInput @ filter by vid&pid string），在我的情况下这是不可接受的，因为我正在尝试开发一个独立于设备的设备解决方案，它将与任何 USB 条形码扫描仪一起使用。

实际上，这件事非常具有挑战性，至少对我来说，这里有确切的要求。我也不能要求用户热插拔设备（在这种情况下，我可以检测到插入的设备并提取它的 vid/pid）。我也不能使用设备的 VID&PID 数据库。一般来说，我实际上根本无法使用 vid&pid。

我也不能以任何方式重新编程条形码扫描仪，除非它是从我的程序中完成的（也许我可以发送一些特定于条形码扫描仪的 IOCTL，这会让它回答我？）。

目前我将使用在这个问题中提出的解决方案： [Reading a barcode using a USB barcode scanner with ignoring keyboard data input while scanner product id and vendor id are not known](https://stackoverflow.com/questions/615036/reading-a-barcode-using-a-usb-barcode-scanner-along-with-ignoring-keyboard-data)

我也看过商业图书馆（这是offcourse没有任何来源和任何关于它是如何实现的信息，但考虑到他们在他们的变更日志中有一些“性能计数器”这个词，我猜他们在上面的链接中使用了解决方案），哪个实现了这个功能，但它在 x64 系统中不起作用。可能是因为代码混乱或因为它可能使用某种过滤器（迷你）驱动程序。它是加密的，我无法重新分发它。

**我的确切问题是：** 有没有办法确定这个 HID 键盘实际上不是键盘，而是条形码扫描仪？我在 Win 7 x64 上看到它连接为条形码扫描仪，而不是键盘（这是一个系统错误，或类似的）。

正是我现在正在做的事情：

1.  通过 RID_INPUTSINK 读取输入。
2.  通过设备的 vid&pid 区分所有输入
3.  当 VK_ENTER 显示在缓冲区上时，将所有输入放入单独的缓冲区并从缓冲区收集条形码。

我目前要做的事情：

1.  通过 RID_INPUTSINK 读取输入
2.  启动特定设备的计时器，如果下一个符号是 VK_ENTER - 停止计时器
3.  如果定时器超过 50 毫秒限制 - 关闭它并丢弃所有进一步的设备输入。
4.  如果设备将成功读取从第一个符号到 VK_ENTER 的字符序列 - 提取设备 VID&PID/句柄并以更方便的方式使用它（无需计时）。

我在 C++ 上开发它，纯 WinAPI，它将是一个 DLL 库，并且可以在 x32-86 和 x32-64 架构上的 Windows XP、Vista、7、8 上工作。

**更新 0：** 刚刚发现条形码扫描仪在 USB 规范中有自己的使用页面和使用情况： [http ://www.usb.org/developers/devclass_docs/pos1_02.pdf](http://www.usb.org/developers/devclass_docs/pos1_02.pdf)

根据此文档 USB 条码扫描仪有 UsagePage 0x8C 和 Usage 0x02。不幸的是，我未能将其用作 RAWINPUTDEVICE.dwUsage 和 RAWINPUTDEVICE.dwUsagePage。可能是因为系统在其上安装了 USB 键盘驱动程序，并且在用户模式下它与真正的 USB 键盘无法区分。可能这些值在内核模式环境中可用（其中一个选项是开发 hid 过滤器驱动程序）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-31T22:23:54.767

这不能回答你的具体问题，但无论如何......

一年多前，我在更不利的情况下实现了条码阅读器支持。它是用于与纯 Java 中的后勤数据相关联的报告应用程序（跨平台富客户端，主要在 Windows 上）。我发现您所说的键盘驱动程序与您所说的相同，它可以防止在用户模式下区分实际的 USB 设备，至少乍一看。有更昂贵的设备具有自己的驱动程序和高级功能，这将允许某种区别。我在那个环境中遇到的所有条码阅读器都以键盘的形式显示，用于简单地填写 SAP 表单字段并按下回车键，这是一种常见的情况。可以使用“魔术条形码”或其他制造商特定方法来配置终止。

因此，该决定反对任何基于 JNI 的、特定于平台的实现。相反，我还通过使用以下标准评估某些 Swing/AWT 表单中的通用键盘输入，实现了一种类似拦截的方法（您的扩展版本）：

*   由前两个字符确定的击键频率（最初/超时后）
*   抖动（频率/速率变化）
*   一组有效字符
*   终止换行符。

输入被缓冲区消耗，直到不满足机器生成输入的标准，或者验证通过，条形码侦听器将收到通知。在任何一种情况下，都可以转发输入，就好像什么都没发生一样。

这已被证明是非常准确的，因为对于人类来说，几乎不可能以条形码阅读器的速率输入有效序列，并且（几乎）零抖动。

* * *

**编辑：**

刚挖出Java源码；我可以给你上面实现的早期版本的代码作为例子（不保证，也考虑实现CR）：

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * A {@link KeyListener} implementation for barcode readers. This implementation
 * checks for input rate and jitter to distinguish human and scanner
 * input sequences by 'precision'. A barcode input sequence from a scanner is
 * typically terminated with a line break.
 * 
 * @author Me
 */
public abstract class AbstractBarcodeInputListener implements KeyListener {
    public static final int DEFAULT_MIN_PAUSE = 300;// [ms]
    public static final int DEFAULT_MAX_TIME_DELTA = 200;// [ms]
    public static final int DEFAULT_MAX_TIME_JITTER = 50;// [ms]

    public static Integer parseInt(Pattern pattern, int group, String line) {
        final Matcher matcher = pattern.matcher(line);
        if (matcher.matches())
            return Integer.parseInt(matcher.group(group));
        return null;
    }

    private String input;

    private final long minPause;
    private long maxTimeDelta;
    private final long maxTimeJitter;

    private long firstTime;
    private long firstTimeDelta;
    private long lastTimeDelta;
    private long lastTime;

    public AbstractBarcodeInputListener(long maxTimeDelta, long maxTimeJitter) {
        this.input = new String();

        this.minPause = AbstractBarcodeInputListener.DEFAULT_MIN_PAUSE;
        this.maxTimeDelta = maxTimeDelta;
        this.maxTimeJitter = maxTimeJitter;

        this.firstTime = 0;
        this.firstTimeDelta = 0;
        this.lastTimeDelta = 0;
        this.lastTime = 0;
    }

    public AbstractBarcodeInputListener() {
        this(AbstractBarcodeInputListener.DEFAULT_MAX_TIME_DELTA,
                AbstractBarcodeInputListener.DEFAULT_MAX_TIME_JITTER);
    }

    private boolean checkTiming(KeyEvent e) {
        final int inputLength = this.input.length();
        final long time = e.getWhen();
        long timeDelta = time - this.lastTime;
        long absJitter = 0;
        long relJitter = 0;

        boolean inputOK = true;

        switch (inputLength) {
        case 0: // pause check
            inputOK &= (timeDelta > this.minPause);
            this.firstTime = time;
            this.firstTimeDelta = timeDelta = 0;
            break;
        case 1: // delta check
            this.firstTimeDelta = timeDelta;
            inputOK &= (timeDelta < this.maxTimeDelta);
            break;
        default:// jitter check & delta check
            absJitter = Math.abs(timeDelta - this.firstTimeDelta);
            relJitter = Math.abs(timeDelta - this.lastTimeDelta);
            inputOK &= (absJitter < this.maxTimeJitter);
            inputOK &= (relJitter < this.maxTimeJitter);
            inputOK &= (timeDelta < this.maxTimeDelta);
            break;
        }

        this.lastTime = time;
        this.lastTimeDelta = timeDelta;

        return inputOK;
    }

    @Override
    public void keyPressed(KeyEvent e) {
    }

    private void clearInput() {
        this.input = new String();
    }

    private void commitInput(KeyEvent e) {
        final String code = this.input;
        if (!code.isEmpty()) {
            final long avgIntervalTime = e.getWhen() - this.firstTime;
            this.maxTimeDelta = (avgIntervalTime * 15) / 10;
            this.clearInput();
            this.codeRead(code);
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {
    }

    @Override
    public void keyTyped(KeyEvent e) {
        if (this.checkTiming(e)) {
            final char c = e.getKeyChar();
            switch (c) {
            case '\b':
                this.clearInput();
                break;
            case '\n':
                this.commitInput(e);
                break;
            default:
                this.input += c;
                break;
            }
        } else {
            this.clearInput();
        }
    }

    public abstract void codeRead(String line);
} 
```

# vim - 我的 vimrc 中的自动加载功能

> ID：12497106
> 
> 赞同：1
> 
> 时间：2012-09-19T14:43:06.347
> 
> 标签：vim

我有一个很酷的功能，`.vimrc`可以让我用`tab`. 这里是 ：

```
" Tab completion of tags/keywords if not at the beginning of the line.
function! InsertTabWrapper()
  let col = col('.') - 1
   if !col || getline('.')[col - 1] !~ '\k'
      return "\<tab>"
   else
      return "\<c-p>"
   endif
endfunction 
```

我用

```
inoremap <tab> <c-r>=InsertTabWrapper()<cr> 
```

但是当我打开文件时它不能正常工作，我需要`.vimrc`使用

```
:source $MYVIMRC<CR> 
```

让它工作。

**编辑：显然与***SnipMate*插件有冲突

```
<Tab> * <C-R>=TriggerSnippet()<CR>
Last set from ~/.vim/after/plugin/snipMate.vim 
```

有没有办法同时使用 Tab ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:19:05.100

显然你`.vimrc`没有来源，或者没有达到映射（有条件的？`:finish`某处？）。您可以检查加载了哪些脚本`:scriptnames`；它应该列出您的`.vimrc`. 还要寻找对`'runtimepath'`. 您可以通过启动 Vim 来逐个命令调试初始执行命令`vim -V15`。

无论如何，您可以通过以下方式检查映射是否存在`:verbose imap <Tab>`

# android - 组展开的可展开列表视图，更改展开组的图像

> ID：12497107
> 
> 赞同：0
> 
> 时间：2012-09-19T14:43:07.820
> 
> 标签：android, expandablelistview

我想在单击特定组时更改组上的图像。我创建了自己的自定义基本适配器来扩展可扩展列表。在里面`getGroupView`我有以下代码来更改扩展组上的图像。但是在扩展时，图像在未扩展的组中发生变化。

有什么解决办法吗？

```
public View getGroupView(int groupPosition, boolean isExpanded, 
                         View convertView, ViewGroup parent) {
    ImageView categoryImage = (ImageView)  
    convertView.findViewById(R.id.menu_category_image);
    category.setText(subItems.get(groupPosition).getCategoryName());
    if(isExpanded) {
        categoryImage.setImageResource(R.drawable.dn_arrow);
    } else 
        categoryImage.setImageResource(R.drawable.right_arrow);
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-04T07:36:18.210

```
((ImageView) convertView.findViewById(R.id.image_group_indicator))
       .setImageResource(isExpanded?R.drawable.arrowup:R.drawable.arrowdown); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:50:05.293

尝试这个..

```
list.setOnGroupClickListener(new OnGroupClickListener() 
{
            public boolean onGroupClick(ExpandableListView parent, View v,  int groupPosition, long id) 
            {
    //do your stuff here           
                 return false;
           }
        }
   }); 
```

有关更多信息，请尝试以下链接，在这里您将获得一些信息......

[http://qtcstation.com/2011/03/working-with-the-expandablelistview-part-1/](http://qtcstation.com/2011/03/working-with-the-expandablelistview-part-1/)

或者

[http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html](http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html)

或者

[http://www.coderzheaven.com/2011/04/10/expandable-listview-in-android-using-simpleexpandablelistadapter-a-simple-example/](http://www.coderzheaven.com/2011/04/10/expandable-listview-in-android-using-simpleexpandablelistadapter-a-simple-example/)

这可能会帮助你............

# c# - ASP.NET MVC 路由 '/category/{string}' 而不是 '/category/details/{string}'

> ID：12497108
> 
> 赞同：1
> 
> 时间：2012-09-19T14:43:07.510
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我想创建一个路由来访问我的类别，如下所示：`/category/{id}`而不是`/category/details/{id}`.

我已经尝试了很多可能的例子

```
routes.MapRoute(
    "Category",
    "category/{id}",
    new { controller = "category", action = "details", id = UrlParameter.Optional },
    new string[] { "Project.Controllers" }
); 
```

但它似乎不起作用。有人可以帮我弄这个吗？

这是我的控制器与动作

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace Project.Controllers
{
    public class CategoryController : Controller
    {
        public ActionResult Details(string id)
        {
            return Content(id);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:11:18.287

我做的一切都是正确的，我只是把它放在我的默认路由下面，需要把新的路由放在默认路由**之上**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:00:43.123

乍一看它是正确的，但你也可以有其他路线，这取决于位置。使用 Glimpse 调试您的应用程序： [NuGet Package of the Week #5 - 使用 Glimpse 调试 ASP.NET MVC 应用程序](http://www.hanselman.com/blog/NuGetPackageOfTheWeek5DebuggingASPNETMVCApplicationsWithGlimpse.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:04:33.763

我刚刚在我的本地机器上尝试过 localhost/Category/Details/1

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Category", action = "Details", id = UrlParameter.Optional     } // Parameter defaults
        );

public class CategoryController : Controller
{
    //
    // GET: /Category/

    public ActionResult Details(string id)
    {
        return View();
    }

} 
```

还是你在做 HttpGet 或 HttpPost？

# logging - Symfony2 没有记录自定义命令中抛出的异常

> ID：12497112
> 
> 赞同：1
> 
> 时间：2012-09-19T14:43:13.830
> 
> 标签：logging, symfony, exception-handling, symfony-2.1, monolog

当在正常的 http 请求期间发生错误时，Symfony2 会记录所有内容（取决于您的日志记录级别），您可以在 dev.log 或 app.log 中看到它。

但是，当您在执行自定义命令期间遇到错误时，它不会记录任何内容。它只是在标准输出中显示一条红色消息，甚至没有回溯。

我该怎么做才能记录所有错误，就像在第一种情况下一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:22:03.550

当您`--verbose`在运行命令时添加选项时，您应该会看到回溯。

我想如果你愿意的话，你可以从容器中捕获`\Exception`和使用独白记录器（命令可以访问 DIC）。

我认为如果需要，您也可以通过其他方式来做到这一点，例如通过扩展`Symfony\Component\Console\Application`类和方法`renderException`并在那里记录错误，但我从来没有真正这样做过，只是看到命令/应用程序 API 应该允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:50:10.377

我必须自己做，Symfony2 不会做。

创建一个 BaseCommand 来扩展它捕获所有错误和异常并记录它们。

# windows-7 - WebSphere 7.0.0.15 管理控制台日志

> ID：12497114
> 
> 赞同：0
> 
> 时间：2012-09-19T14:43:18.977
> 
> 标签：windows-7, websphere, websphere-7

WebSphere 管理控制台是否包含一些日志，我可以在其中看到加载控制台的活动？

我在从 FF 和 IE 加载 Windows 7 64 位控制台时遇到一些问题，而在 Windows XP 上通常加载控制台。

先感谢您！

最好的问候， Jurica Krizanic

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:37:24.540

这一定是浏览器问题（您可能使用的特定版本）。我同时使用 XP 和 Windows 7，它通常在这两台机器上的 FF 上运行良好。

您可以打开 ISC 的跟踪以查看服务器端的一些事件。

我会尝试手动从必须收集的数据中收集数据 [http://www-01.ibm.com/support/docview.wss?rs=0&context=SSCPPRK&q1=MustGatherDocument&uid=swg21199337&loc=en_US&cs=utf-8&lang=](http://www-01.ibm.com/support/docview.wss?rs=0&context=SSCPPRK&q1=MustGatherDocument&uid=swg21199337&loc=en_US&cs=utf-8&lang=)

并查看跟踪文件以了解服务器端发生了什么。

这不会让您更进一步，因为服务器端似乎不是问题。在 Windows7 中查看来自浏览器的日志/警告是值得的。这将为我们提供有关正在发生的事情的线索。为了让我们自己确信浏览器正在发出它的请求，这仍然值得做。

试试 Chrome，看看 ISC 是否显示在 Windows 7 的 Chrome 上？您使用的 FF 和 IE 的具体版本是什么？

# python - 从python中的文件中提取内容

> ID：12497115
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:43:19.577
> 
> 标签：python, regex

我有一个包含以下内容的文件...

```
2012-09-19_12:26:01
UPTIME report
 12:26:12 up 2 days, 22:53,  5 users,  load average: 0.13, 0.10, 0.03

FREE report
             total       used       free     shared    buffers     cached
Mem:       1914244     366692    1547552          0      85136     160928
-/+ buffers/cache:     120628    1793616
Swap:      4192956      35928    4157028

VMSTAT report
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----    
r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0  35928 1547552  85136 160928    3    4     4    79   16   40  1  6 92  0          0       

IOSTAT report
Linux 2.6.32-279.el6.x86_64 (progserver)        09/19/12        _x86_64_        (4 CPU)

avg-cpu:  %user   %nice %system %iowait  %steal   %idle
           1.17    0.00    6.22    0.10    0.07   92.44

Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn
xvdc              1.92        23.72        30.26    6052098    7720864
xvda             11.25         6.00       600.34    1530740  153196208

Top 10 cpu using processes
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root      9422  1.0  0.0  13492  1060 ?        R    12:26   0:00 ps auxww --sort=-pcpu
root       6520  0.2  0.2 143800  4308 pts/3    S+   12:25   0:00 vim LogicApp/Logic.py
root     28406  0.2  0.0  15024  1272 pts/4    S+   12:23   0:00 top
root         1  0.0  0.0  19228   292 ?        Ss   Sep16   0:01 /sbin/init
root         2  0.0  0.0      0     0 ?        S    Sep16   0:00 [kthreadd]
root         3  0.0  0.0      0     0 ?        S    Sep16   1:06 [migration/0]
root         4  0.0  0.0      0     0 ?        S    Sep16   0:02 [ksoftirqd/0]
root         5  0.0  0.0      0     0 ?        S    Sep16   0:00 [migration/0]

Top 10 memory using processes
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root      6520  0.2  0.2 143800  4308 pts/3    S+   12:25   0:00 vim LogicApp/Logic.py
postfix  12145  0.0  0.1  78752  3204 ?        S    11:36   0:00 pickup -l -t fifo -u
root       928  0.0  0.1 251576  2956 ?        Sl   Sep16   0:08 /sbin/rsyslogd -i     /var/run/syslogd.pid -c 5
root      6521  0.0  0.0 140096  1336 ?        S    12:26   0:00 CROND
root     28406  0.2  0.0  15024  1272 pts/4    S+   12:23   0:00 top
root     31822  0.0  0.0 108428  1084 pts/6    Ss+  Sep18   0:00 -bash
root      9424  1.0  0.0  13492  1064 ?        R    12:26   0:00 ps auxww --sort=-rss
root      4936  0.0  0.0 108428   936 pts/3    Ss   Sep18   0:00 -bash 
```

我想要做的是将此文件的一部分打印到屏幕上。因此，例如，我想获取文件的以下部分并在 python 中将其打印到屏幕上......

```
Top 10 cpu using processes
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root      9422  1.0  0.0  13492  1060 ?        R    12:26   0:00 ps auxww --sort=-pcpu
root       6520  0.2  0.2 143800  4308 pts/3    S+   12:25   0:00 vim LogicApp/Logic.py
root     28406  0.2  0.0  15024  1272 pts/4    S+   12:23   0:00 top
root         1  0.0  0.0  19228   292 ?        Ss   Sep16   0:01 /sbin/init
root         2  0.0  0.0      0     0 ?        S    Sep16   0:00 [kthreadd]
root         3  0.0  0.0      0     0 ?        S    Sep16   1:06 [migration/0]
root         4  0.0  0.0      0     0 ?        S    Sep16   0:02 [ksoftirqd/0]
root         5  0.0  0.0      0     0 ?        S    Sep16   0:00 [migration/0] 
```

我相信这将是正则表达式。我想将表示 cpu 的行与表示 memory 的行匹配。

任何想法我将如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:46:33.953

为此使用正则表达式是矫枉过正的。你基本上想提取两行之间的内容。这是有关如何执行此操作的示例：

```
cpu = []
with open('filename') as f:
    in_cpu = False
    for line in f:
        line = line.strip()
        if line == 'Top 10 cpu using processes':
            in_cpu = True
        elif line == 'Top 10 memory using processes':
            break
        elif in_cpu and line:
            cpu.append(line) 
```

如果将整个文件读入内存不是问题，您可以做得更好：

```
data = map(str.rstrip, open('filename'))
start_index = data.index('Top 10 cpu using processes')
end_index = data.index('Top 10 memory using processes')
cpu = data[start_index+1:end_index-1] 
```

请注意，`.index() will raise an exception in case no element is found! You need to use a`try..except` 块可以避免这种情况。

的`+1`起始索引不包括“前 10 名...”行；不`-1`包括结束标记之前的空行。

# javascript - 幻灯片控件 jQuery

> ID：12497120
> 
> 赞同：0
> 
> 时间：2012-09-19T14:43:33.050
> 
> 标签：javascript, jquery

我有一个幻灯片，我试图在单击控件时左右滑动，只是我在挣扎。

标记是...

左右

```
 <div class="clear"></div>

            <div id="promotional-slide">
                <div class="cover">
                    <div class="promo-section one">
                      <span class="text-one">Buy the cheapest heating oil in the UK with our exclusive Web Oil Price Guarantee</span>
                      <span class="text-two">Your village</span>
                    </div>
                     <div class="promo-section two">

                    </div>
                    <div class="promo-section three">

                    </div>
                </div> <!-- end of div cover -->
            </div>  <!-- end of div promotional-slide -->
        </div> 
```

我的 jQuery 是...

```
$('.scroll-right').click(function(){
    $('#promotional-slide .cover').animate({left:-640})  
});

$('.scroll-left').click(function(){
    $('#promotional-slide .cover').animate({left:640})  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:50:56.103

如果我添加它对我有用

```
#promotional-slide .cover {
    position: relative;
} 
```

[jsFiddle](http://jsfiddle.net/84gGw/)

# javascript - 当元素在视图中且未滚动过去时，如何使 jQuery 航点插件触发？

> ID：12497122
> 
> 赞同：18
> 
> 时间：2012-09-19T14:43:36.720
> 
> 标签：javascript, jquery, jquery-waypoints

请看这个：

[http://jsfiddle.net/5Zs6F/2/](http://jsfiddle.net/5Zs6F/2/)

正如您仅在滚动经过第一个红色矩形时才看到的那样，它变成蓝色，我希望它在进入视野的那一刻变成蓝色。这就是为什么第二个永远不会变成蓝色的原因，因为它下面没有足够的内容让您滚动过去。

HTML：

```
Scoll this window pane
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<div class="box"></div>
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<div class="box"></div>
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /> 
```

CSS：

```
.box { width: 250px; height: 100px; border: 2px solid red;  } 
```

jQuery：

```
$.getScript('http://imakewebthings.com/jquery-waypoints/waypoints.min.js', function() {

    $('.box').waypoint(function() {

        $(this).css({
            borderColor: 'blue'
        });

    });

}); 
```

一旦看到有问题的元素并且没有滚动过去，如何让它触发？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-20T16:39:26.697

该`offset`选项确定航点应该在相对于视口顶部的位置触发。默认情况下它是 0，所以你的元素会在它到达顶部时触发。因为您想要的是常见的，所以航点包含一个简单的别名，用于设置在整个元素进入视野时触发的偏移量。

```
$('.box').waypoint(function() {
  $(this).css({
    borderColor: 'blue'
  });
}, { offset: 'bottom-in-view' }); 
```

如果您希望它在元素的*任何部分*从底部窥视时触发，则应将其设置为“100%”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-30T09:31:25.420

好的。找到了一个可以正常工作的解决方案。

```
 jQuery('.zoomInDownInaktiv').waypoint(function(direction) {
    if (direction === "down") {
        jQuery(this.element).removeClass('zoomInDownInaktiv');
        jQuery(this.element).addClass('zoomInDown');
    }
}, { offset: '80%' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-30T09:22:24.607

不会为我工作。我有几个同名的类，如果页面加载/第一个元素在屏幕上，它们都会改变。

```
jQuery(document).ready(function(){

jQuery('.zoomInDownInaktiv').waypoint(function() {
    //jQuery(this).removeClass('zoomInDownInaktiv');
    jQuery(this).addClass('zoomInDown');
}, { offset: 'bottom-in-view' }); 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-12T06:28:06.017

如果你想用 css 解决这个问题，那么你也可以使用下面的 css 来解决。

```
img[data-src]::before {
    content: "";
    display: block;
    padding-top: 70%;
  } 
```

我们正在尝试使用伪元素（例如 ::before 和 ::after）来为 img 元素添加装饰。

浏览器不会渲染图像的伪元素，因为 img 是替换元素，这意味着它的布局由外部资源控制。

但是，该规则有一个例外：如果图像的 src 属性无效，浏览器将呈现其伪元素。因此，如果我们将图像的 src 存储在 data-src 中并且 src 为空，那么我们可以使用伪元素来设置纵横比：

一旦 data-src 变成 src，浏览器就会停止渲染 ::before 并且图像的自然纵横比接管。

# asp.net-mvc - 使用 JsonResult 时定义 JSON 字段名称

> ID：12497124
> 
> 赞同：3
> 
> 时间：2012-09-19T14:43:57.430
> 
> 标签：asp.net-mvc, json, serialization

我有一个在我的 ASP.Net MVC4 应用程序中返回 JsonResult 的操作。我将 Data 属性设置为预定义类的数组。我的问题是我想用不同的属性名称进行序列化。无论我使用什么属性，对象都会使用预定义的属性名称进行序列化。我试过以下没有结果：

```
[DataMember(Name = "iTotalRecords")]
[JsonProperty(PropertyName = "iTotalRecords")]
public int TotalRecords { get; set; } 
```

我知道“iTotalRecords”看起来很傻，但这个动作是为了支持一个需要“iTotalRecords”而不是“TotalRecords”的jQuery插件。当然，我想使用在我的代码隐藏中有意义的名称。

使用什么序列化器来解析 JsonResult？有什么我可以做的，还是我必须重新考虑将 JsonResult 作为操作结果返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:02:42.617

> 使用什么序列化器来解析 JsonResult？

[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx).

> 有什么我可以做的，还是我必须重新考虑将 JsonResult 作为操作结果返回？

想到了两种可能：

*   定义视图模型，然后将您的域模型映射到视图模型
*   编写使用 Json.NET 或 DataContractJsonSerializer 的自定义操作结果，并允许您控制序列化属性的名称。以下[问题](https://stackoverflow.com/questions/1302946/asp-net-mvc-controlling-serialization-of-property-names-with-jsonresult)说明了这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T15:27:37.443

感谢您的建议。我继续创建了一个使用 Json.Net 的 ActionResult：

```
public class JsonNetActionResult : ActionResult
{
    public Object Data { get; private set; }

    public JsonNetActionResult(Object data)
    {
        this.Data = data;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.ContentType = "application/json";
        context.HttpContext.Response.Write(JsonConvert.SerializeObject(Data));
    }
} 
```

仅供参考，看起来 Json.Net 尊重 [DataMember] 和 [JsonProperty]，但如果它们不同，[JsonProperty] 将胜过 [DataMember]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T11:16:35.220

我在[这里](http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net)和 SO 上找到了部分解决方案

```
public class JsonNetResult : ActionResult
    {
        public Encoding ContentEncoding { get; set; }
        public string ContentType { get; set; }
        public object Data { get; set; }

        public JsonSerializerSettings SerializerSettings { get; set; }
        public Formatting Formatting { get; set; }

        public JsonNetResult(object data, Formatting formatting)
            : this(data)
        {
            Formatting = formatting;
        }

        public JsonNetResult(object data):this()
        {
            Data = data;
        }

        public JsonNetResult()
        {
            Formatting = Formatting.None;
            SerializerSettings = new JsonSerializerSettings();
        }

        public override void ExecuteResult(ControllerContext context)
        {
            if (context == null)
                throw new ArgumentNullException("context");
            var response = context.HttpContext.Response;
            response.ContentType = !string.IsNullOrEmpty(ContentType)
              ? ContentType
              : "application/json";
            if (ContentEncoding != null)
                response.ContentEncoding = ContentEncoding;

            if (Data == null) return;

            var writer = new JsonTextWriter(response.Output) { Formatting = Formatting };
            var serializer = JsonSerializer.Create(SerializerSettings);
            serializer.Serialize(writer, Data);
            writer.Flush();
        }
    } 
```

所以在我的控制器中，我可以做到这一点

```
 return new JsonNetResult(result); 
```

在我的模型中，我现在可以拥有：

```
 [JsonProperty(PropertyName = "n")]
    public string Name { get; set; } 
```

请注意，现在，您必须将 设置为`JsonPropertyAttribute`要序列化的每个属性。

# javascript - 通过 jquery 或 javascript 从远程服务器复制图像

> ID：12497128
> 
> 赞同：0
> 
> 时间：2012-09-19T14:44:14.227
> 
> 标签：javascript, jquery, copy

任何人都知道如何通过 jQuery 或 JavaScript 从本地目录中的远程服务器复制图像？

通过 php 复制或 cURL 它不允许在我的网络空间。

此致

# assembly - AVR Assembly中ARGFRAME和LOCFRAME的含义

> ID：12497129
> 
> 赞同：0
> 
> 时间：2012-09-19T14:44:15.683
> 
> 标签：assembly, avr, iar

为了调试我编写的一些 C 代码中的问题，我正在检查由 IAR AVR 编译器生成的一些汇编代码。在 .s90 文件的顶部声明了几个函数。每个函数声明具有以下形式：

```
PUBLIC FunctionName1
FUNCTION FunctionName1,021201H
ARGFRAME CSTACK, 0, STACK
LOCFRAME RSTACK, 2, STACK 
```

有谁知道 ARGFRAME 和 LOCFRAME 指令是做什么的？它们仅在 IAR EWAVR 汇编器参考中简要提及。有时我看到使用 RSTACK 作为 ARGFRAME 的参数而不是 CSTACK 声明的函数：

```
PUBLIC FunctionName2
FUNCTION FunctionName2,021201H
ARGFRAME RSTACK, 0, STACK
LOCFRAME RSTACK, 2, STACK 
```

有人知道将 RSTACK 与 CSTACK 与 ARGFRAME 结合使用的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:58:11.177

正如我确定你已经知道的那样，`CSTACK`通常用作参数堆栈，并`RSTACK`在返回地址堆栈中。在您上面概述的情况下，没有参数。所以`RSTACK`在指令中使用是安全的，因为它实际上不会在那里存储任何东西。

就他们实际所做的而言，它们似乎有助于在正确的位置保留空间。 如果函数不需要可重入，则可以指向堆栈位置或静态区域`ARGFRAME`。`LOCFRAME`这似乎是关于如何完成的抽象。我已经很久没有使用 IAR 的 AVR 编译器了……我不记得 10 年前有过这个工具，所以很抱歉我在这方面无法提供更多帮助。

# twig - 如何在 Twig 模板中转义 Twig 分隔符？

> ID：12497130
> 
> 赞同：48
> 
> 时间：2012-09-19T14:44:16.823
> 
> 标签：twig

Twig 使用`{{ }}`, `{% %}`,`{# #}`分隔符。

但是如何`{{ }}`在 Twig 模板中显示？我不是在谈论 HTML 转义。

我问这个问题是因为我想在我的 Twig 模板中包含一个小胡子模板，以便我将填充来自 AJAX 调用的数据。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-19T14:46:58.683

`{{`最简单的方法是使用变量表达式输出变量分隔符 ( )：

```
{{ '{{' }} 
```

替代品（当你不得不逃避太多时使用）是原始的（从 1.12 开始[**逐字）块：**](http://twig.sensiolabs.org/doc/tags/verbatim.html)

```
{% raw %}
    <ul>
    {% for item in seq %}
        <li>{{ item }}</li>
    {% endfor %}
    </ul>
{% endraw %} 
```

实际上，它有[很好的文档记录](http://twig.sensiolabs.org/doc/templates.html#escaping)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T14:48:29.397

[Twig 文档](http://twig.sensiolabs.org/doc/templates.html#escaping)给出了两个建议。第一个是简单地输出一个字符串：

```
{{ '{{' }} 
```

否则，如果您想输出很长的部分（听起来像您这样做），您可以使用[`raw`标签](http://twig.sensiolabs.org/doc/tags/raw.html)：

```
{% raw %}
    your mustache content here
{% endraw %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-16T07:02:50.883

```
{% block body %} 
<table class="table table-striped"> 
    {% for temp in data %} 
    <tr> 
        <td>{{temp.fname}}</td> 
        <td>{{temp.lname}}</td> 
    </tr> 
    {% endfor %}
</table>
{% endblock %} 
```

# .net - Visual Studio 2010 Ultimate 中的负载测试

> ID：12497131
> 
> 赞同：1
> 
> 时间：2012-09-19T14:44:19.520
> 
> 标签：.net, visual-studio-2010, load-testing, performance-testing

我下载了 Visual Studio Ultimate 2010 的试用版。我创建了一个单元测试来测试 wcf 服务。现在，当我单击项目添加负载测试时，我看不到 Web 性能测试和负载测试选项。我只看到单元测试、编码 UI 测试、有序测试和通用测试。如果我需要下载其他东西，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:08:41.040

假设您的应用程序已启动并正在运行，我建议您考虑使用 Fiddler & Web Performance Test 为您的 WCF 服务生成负载测试。使用 fiddler，您可以捕获应用程序和 WCF 服务之间的所有 HTTP 流量，然后将其导出到 Web 测试中。Web 测试与 Visual Studio 中的负载测试有更好的集成。

我还建议您下载 Visual Studio 性能测试（不是这样）快速参考指南：http: [//vsptqrg.codeplex.com/](http://vsptqrg.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T17:59:25.287

我必须下载服务包 1。

# symfony - 在树枝模板中覆盖小部件时直接访问表单字段的值

> ID：12497133
> 
> 赞同：57
> 
> 时间：2012-09-19T14:44:25.707
> 
> 标签：symfony, twig

我想要做的是获取存储在表单视图中的变量。

```
{% form_theme edit_form _self %}

{% block field_widget %}
{% spaceless %}
{% set type = type|default('text') %}
<input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>

{# MY CODE #}
{% if type == "file" %}
<a class="BOpreview" href="{# NEED TO REPLACE VAR HERE #}">Aperçu</a>
{% endif %}

{# MY ATTEMPT #}
{{ form.title.get('value') }}
{{ form.vars.value.url }}

{% endspaceless %}
{% endblock field_widget %} 
```

我的表单具有 url、title 等属性，我试图在此处访问它们以在字段小部件块中使用它。

我搜索了它并来到[https://groups.google.com/forum/?fromgroups=#!topic/symfony2/onor9uFte9E](https://groups.google.com/forum/?fromgroups=#!topic/symfony2/onor9uFte9E)建议：

```
{{ form.title.get('value') }}
{{ form.vars.value.url }} 
```

这对我不起作用。

注意：如果我在控制器中对 $form->createView() 执行 var_dump，我会得到：

```
 object(Symfony\Component\Form\FormView)[331]
    private 'vars' => 
      array (size=15)
        'value' => 
          object(Panasonic\TestEtAvisBundle\Entity\Product)[168]
            protected 'reviewArray' => 
              object(Doctrine\ORM\PersistentCollection)[234]
                ...
            protected 'testArray' => 
              object(Doctrine\ORM\PersistentCollection)[221]
                ...
            protected 'fbshareArray' => 
              object(Doctrine\ORM\PersistentCollection)[317]
                ...
            private 'id' => int 2
            private 'name' => string 'Nom du produit' (length=14)
            private 'title' => string '<span>Titre </span>' (length=19)
            private 'image' => string 'bundles/testetavis/uploads/product/0d9d9550.png' (length=47)
            private 'fbImage' => string 'bundles/testetavis/uploads/product/facebook//product_e928cd96.jpg' (length=65)
            private 'description' => string '<span>Descriptif </span>' (length=24)
            private 'url' => string 'http://www.google.com' (length=21)
            private 'creationDate' => 
              object(DateTime)[210]
                ...
            private 'modificationDate' => 
              object(DateTime)[209]
                ...
            private 'isDeleted' => int 0
        'attr' => 
          array (size=0)
            empty
        'form' => 
          &object(Symfony\Component\Form\FormView)[331]
        'id' => string 'panasonic_testetavisbundle_producttype' (length=38)
        'name' => string 'panasonic_testetavisbundle_producttype' (length=38)
        'full_name' => string 'panasonic_testetavisbundle_producttype' (length=38) 
```

例如，我想访问该 url，但经过多次变化后似乎无法访问。包括使用 {{ value }}, {{ value.url }} 但是尽管有 vars，我可以做 {{ full_name }} 并获得 panasonic_testetavisbundle_producttype。

有任何想法吗？

**Edit2：**我发现了真正的问题......

**Edit3：**看到这个问题很受欢迎，我决定澄清我试图做的事情，以防它对处于相同情况的人有所帮助。如果您严格依赖问题所提出的问题，正如我在研究中所说的那样，Besnik 支持的确实是正确的。现在我想做的是对于每个输入类型文件，从用于呈现表单的对象中获取 url，并在输入类型文件旁边使用检索到的 url 附加预览链接。如果您尝试在我的代码中获取输入类型“文件”的表单变量，例如“{{ form.vars.value.url }}”，这将不起作用，因为如果我没记错的话，您会收到一个令牌而不是存储在对象内的 url。

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-09-19T14:47:34.287

您可以通过 form.vars.value 访问表单的当前数据：

```
{{ form.vars.value.title }} 
```

请参阅 Symfony2 表单文档：[http ://symfony.com/doc/current/book/forms.html#rendering-a-form-in-a-template](http://symfony.com/doc/current/book/forms.html#rendering-a-form-in-a-template)

使用`dump`函数转储变量：

```
{{ dump(form.vars.value) }} 
```

如果您正在使用子表单或想要具有特定字段的值：

```
{{ form.FIELD.vars.VALUE }} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-24T18:27:31.617

您可以使用小部件块访问父父级的值`form.parent.vars`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-13T04:57:12.853

例如，我们想要从一个名为primerNombre的类型文本字段中呈现值，我们将需要

```
{{ form.vars.value.primerNombre }} 
```

如果我们想渲染其中一个孩子的名字，我们将需要

```
{% for hijo in form.hijos %}
    <td><div align="left">{{ form_widget(hijo.vars.value.primerNombre) }}</div></td>
{% endfor %} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-11T15:20:09.667

在 Symfony > 3 中，您可以使用：

```
form.vars.value.Entity.someValue 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T05:53:07.677

编辑2：

最后，我确实在这里获得了 {{ value }} 中当前行的值：

```
{% block field_widget %}
{% spaceless %}
{% set type = type|default('text') %}
<input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ **value** }}" {% endif %}/>

{# MY CODE #}
{% if type == "file" %}
<a class="BOpreview" href="{{ value }}">Aperçu</a>
{% endif %}

{% endspaceless %}
{% endblock field_widget %} 
```

但在我的情况下，我得到一个令牌而不是值，因为我使用的是输入类型文件。这是由于 Symfony2 中的安全措施。

# sql - 在 ORDER BY 中使用 CASE 将一些记录推到最后

> ID：12497135
> 
> 赞同：3
> 
> 时间：2012-09-19T14:44:35.543
> 
> 标签：sql, sql-order-by, case

我通常使用类似于以下的构造：

```
ORDER BY CASE WHEN Location = 'ROOT' THEN '~' ELSE Location END 
```

在 ASCII 环境中，这成功地将所有带有 a`Location`的记录推`ROOT`到最后，而所有其他记录都正常排序。这是因为 '~' 字符接近字符集的末尾。但是，随着字符集比 ASCII 更广泛的数据库的使用越来越普遍，我预计这种技术有时会不起作用。

有什么选择？具体来说，我想要一种将字段中具有特定值的记录推送到列表末尾的技术。

我主要使用 MS SQL，但我也对一种通用技术以及可与 Oracle 一起使用的技术感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:46:03.330

要将值推`Location = 'ROOT'`到最后，请尝试以下操作：

```
ORDER BY CASE WHEN Location = 'ROOT' THEN 1 ELSE 0 END, Location 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T14:46:06.963

```
ORDER BY CASE WHEN Location = 'ROOT' THEN 1 ELSE 0 END, Location 
```

# vpn - 通过 VPN 连接发送所有流量

> ID：12497136
> 
> 赞同：0
> 
> 时间：2012-09-19T14:44:36.563
> 
> 标签：vpn

我想写一个mac vpn客户端，现在，在系统网络中，它有一个名为“通过VPN连接发送所有流量”的设置，如何通过代码设置它？我认为它不在SCNetworkConfiguration

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-03T10:53:41.527

这是我以前使用的一种方法。它非常直接地说明了如何获取当前的 ipv4 字典，然后对其进行更改并重新设置。根据您的需要将 CFSTR("1") 更改为 0 或 1

```
#define GetCasted(value, type) ((value) && (CFGetTypeID(value) == type##GetTypeID()) ? ((type##Ref)value) : NULL)

-(void)setIPv4Stuff:(SCNetworkServiceRef)service{

    SCNetworkProtocolRef protoR = SCNetworkServiceCopyProtocol(service, kSCNetworkProtocolTypeIPv4);
    CFDictionaryRef proxyDictR = SCNetworkProtocolGetConfiguration(protoR); 

    const void *configMethodP = proxyDictR ? CFDictionaryGetValue(proxyDictR, kSCPropNetIPv4ConfigMethod) : NULL;

    CFStringRef configMethod = GetCasted(configMethodP, CFString);

    CFMutableDictionaryRef newProxyDictR;

    newProxyDictR = CFDictionaryCreateMutable(NULL, 0, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);

    CFDictionarySetValue(newProxyDictR, kSCPropNetIPv4ConfigMethod, configMethod);
    CFDictionarySetValue(newProxyDictR, kSCPropNetOverridePrimary, CFSTR("1"));

    SCNetworkProtocolSetConfiguration(protoR, newProxyDictR);

    CFRelease(newProxyDictR);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T14:45:17.597

kSCPropNetOverridePrimary 为 0 应该禁用此功能（您可以在 ipv4 字典中查找该键）。

您需要为 ipv4 协议设置协议配置，并将该键设置为 0 或 1 以分别禁用或启用该标志。

# java - 尝试使用 junit 在 Spring 项目上测试服务时出错

> ID：12497137
> 
> 赞同：0
> 
> 时间：2012-09-19T14:44:37.243
> 
> 标签：java, spring, junit, spring-webflow

我正在尝试使用 junit 在 Eclipse 中的 Spring Web Flow 项目上运行我的第一个测试，也可以从控制台使用 mvn test 运行我的第一个测试，但给了我同样的错误。

```
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [WEB-INF/spring/root-config.xml]; nested exception is java.io.FileNotFoundException: class path resource [WEB-INF/spring/root-config.xml] cannot be opened because it does not exist 
```

我检查了一下，我确实在该位置有这个文件，所以我不知道为什么 Eclipse 和 Maven 没有找到它。有人可以帮我吗...下面是我的测试课

```
package org.uftwf.memberinquiry.text;

import junit.framework.Assert;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.uftwf.memberinquiry.model.MemberInquiryInformation;
import org.uftwf.memberinquiry.model.MemberRequest;
import org.uftwf.memberinquiry.service.MemberInquiryService;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/WEB-INF/spring/root-config.xml")
public class TestApp {

    @Autowired
    private MemberInquiryService service;

    @Test
    public void testgetMemeberRequestInformation() {

        MemberRequest inMemberRequest = new MemberRequest();

        MemberInquiryInformation testInfo = service.getMemeberRequestInformation(inMemberRequest);

        inMemberRequest.setRequestor("cpilling04@aol.com.dev");

        Assert.assertEquals(testInfo.getFirst_Name(), "Christine");
        Assert.assertEquals(testInfo.getLast_Name(), "Pillings");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:52:11.537

```
@ContextConfiguration(locations = {classpath:spring/root-config.xml}) 
```

或创建

```
TestApp-context.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:36:24.633

我更新到最新的 spring-test 和 junit 现在一切都找到了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-08T11:30:59.140

```
@ContextConfiguration(locations = "classpath:WEB-INF/spring/root-config.xml") 
```

当您以 / 开头的路径时，它被理解为绝对路径。

# ruby-on-rails - 找不到可寻址的宝石

> ID：12497138
> 
> 赞同：4
> 
> 时间：2012-09-19T14:44:41.737
> 
> 标签：ruby-on-rails, ruby

在我的 Gemfile 中，我有：

```
gem 'addressable' 
```

在 search_controller.rb 中：

```
uri = Addressable::URI.new
uri.query_values = {:q => query} 
```

我收到此错误：

```
NameError (uninitialized constant SearchController::Addressable): 
```

如果我把

```
require 'addressable/uri' 
```

在我的控制器之上，它工作！我已经完成了“sudo bundle install”，它显示已安装可寻址。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T14:55:50.770

查看可寻址的 gem 源，我发现它没有`lib/addressable.rb`哪个是 ruby​​gems 或 bundler 在加载所需的 gem 时需要的默认文件。所以看起来它是故意这样设计的——让你明确地只需要你需要的库。

# c++ - 嵌套 c++11 范围循环以查找组合

> ID：12497139
> 
> 赞同：1
> 
> 时间：2012-09-19T14:44:47.073
> 
> 标签：c++, for-loop, c++11, iterator, combinations

寻找组合涉及同一容器上的两个循环。

```
the first iterates over elements:
  pick an element
  iterate over the elements on the left
    print the first and the second iterated elements 
```

所以这是一个错误的例子：

```
vector<int> vec;
for(size_t i=0; i< 10 ; ++i) vec.push_back(i);
for(auto i : vec)
{
  auto j = i.increaseBy(1);
  for(j : vec) cout << i << j << "\n";
} 
```

在这个问题中，我感兴趣的是范围循环的语法是否不仅仅是一种简单的迭代元素的方法。关于 c++11 的文档不多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T15:07:13.077

假设您想要迭代`[(v[i], v[j]) | i <- [0..v.size()], j <- [0..i]]`（使用带有列表理解语法的伪代码），那么您可以在 Boost.Range 的帮助下执行以下操作：

```
for(auto i: boost::irange(0, v.size()))
    for(auto j: boost::irange(0, i)) {
        // use v[i] and v[j]
    } 
```

但是，除了示例之外，您的问题的答案是不， range-for 语句并没有太大的魔力。它也是不可扩展的。然而，好消息是还有另一种看待它的方式：range-for 语句可能非常愚蠢，但范围可以随心所欲。

这意味着虽然 range-for 可能只能遍历范围的元素，但该范围不必例如映射到实际的现有容器，这与您似乎期望的相反。例如，这个

```
namespace A = boost::adaptors;
for(auto&& e: A::strided(v, 2)) foo(e); 
```

调用`foo`的所有其他元素`v`。这里的工作是由 完成的`strided`，而不是 range-for 语句。

即使在 Boost.Range 的帮助下，我也想不出一种简洁的方式来仅在一个范围内表达您的示例。但这并不意味着它是不可能的，而且我过去确实研究过 C++ 中某种形式的列表理解。然而，表达它的工具今天不在这里。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T15:00:00.977

我猜你所追求的是*成对*的矢量元素的集合。

这不是基于范围的循环的用途。基于范围的循环用于遍历整个集合，只查看每个元素一次。不要将它们用于其他任何事情。仅仅因为它是一个新的、添加的语言功能并不意味着你必须抛弃你曾经知道的所有其他东西。新功能*丰富*了语言，他们不会*取代*它。

以下是获得唯一对的方法：

```
for (auto it1 = vec.begin(), end = vec.end(); it1 != end; ++it1)
{
     for (auto it2 = std::next(it1); it2 != end; ++it2)
     {
         std::cout << "[" << *it1 << ", " << *it2 << "]\n";
     }
} 
```

如果您还想包含对角线元素 ( `it1, it1`)，只需将第二个初始化替换为`auto it2 = it1`。

# git - 是否可以编写 git hook 来检查 git commiter 是否等于 gitolite 用户

> ID：12497140
> 
> 赞同：1
> 
> 时间：2012-09-19T14:44:46.860
> 
> 标签：git, gitolite

我意识到这打破了 DVCS 的核心思想，等等，但是，是否可以编写 git hook 来检查 git committer 是否与 gitolite 用户（在 authorized_keys 中指定的用户）相同？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:14:49.290

使用 gitolite V3，您甚至不必编写钩子，您可以编写[VREF](http://sitaramc.github.com/gitolite/vref.html)并对推送的提交进行各种检查。

这类似于“检查作者电子邮件”部分：

> 有些人希望确保“您只能推送自己的提交”。
> 
> 如果你把它强加给每个人，这是一个非常愚蠢的想法（参见 的“哲学笔记”部分[`src/VREF/EMAIL-CHECK`](https://github.com/sitaramc/gitolite/blob/master/src/VREF/EMAIL-CHECK)）。
> 
> 但是仅对初级开发人员执行它可能是有价值的。
> 
> 巧妙的是，现有`contrib/update.email-check`的只是被复制到[`src/VREF/EMAIL-CHECK`](https://github.com/sitaramc/gitolite/blob/master/src/VREF/EMAIL-CHECK)并且它可以工作，因为 VREF 获得相同的前 3 个参数，而这些都是它所关心的。
> （注意：如果您想使用它，您必须更改该脚本中的一个子程序）

# asp.net - 将 RouteValues 读入控制器

> ID：12497142
> 
> 赞同：2
> 
> 时间：2012-09-19T14:45:04.550
> 
> 标签：asp.net, asp.net-mvc-3, routevalues

所以我有一个 Url Action

```
<a href="@Url.Action("Create","Teacher", new { createAndAssign = true, teacherID = Model.AccountID })">Create new teacher & assign to account.</a> 
```

它传入两个 routeValue：createAndAssign 和teacherID。

现在，当我转到我的教师/创建页面时，我的 URL 是这样的：

```
.../Teacher/Create?createAndAssign=True&teacherID=ea817321-5633-4fdc-b388-5dba2c4a728e 
```

哪个好，我想要这个。现在，当我发布创建老师时，如何获取 createAndAssign 和teacherID 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:58:40.910

您可以在表单中的隐藏变量中设置 Querystring 值，并在 GET 操作方法中呈现，并在 POST 操作方法中接受它。

`GET`由您的操作呈现的视图

```
@using (Html.BeginForm())
{
 //Other form elements also
  @Html.Hidden("teacher",@Request.QueryString["teacherID"] as string)
  @Html.Hidden("createAndAssign",@Request.QueryString["createAndAssign"] 
                                                                    as string)
  <input type="submit" />
} 
```

现在`teacher`在您的操作方法中有一个参数和 createAndAssign 参数，`HttpPost`以便在您提交表单时可用。

```
[HttpPost]
public ActionResult Create(string teacher,string createAndAssign)
{
     //Save and Redirect      
} 
```

**如果你的视图是强类型的**（这是我个人的偏好），这很容易，

```
public ActionResult GET(string teacherID,string createdAndAssing)
{
   var yourVMObject=new YourViewModel();
   yourVMObject.TeacherID=teacherID;
   yourVMObject.CreateAndAssign=createdAndAssing;
   return View(createdAndAssing);
} 
```

在你的强类型视图中，

```
@model YourViewModel
@using (Html.BeginForm())
{
 //Other form elements also
  @Html.HiddenFor(x=>x.TeacherID)
  @Html.HiddenFor(x=>x.CreateAndAssign)                                     
  <input type="submit" />
} 
```

在你的`POST`行动中

```
[HttpPost]
public ActionResult Create(YourViewModel model)
{
     //look for model.TeacherID
     //Save and Redirect      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:49:50.677

您可以从查询字符串或控制器的参数中获取值，例如

```
var x =Request.QueryString["createAndAssign"]; 
```

或者

```
public ActionResult Create(bool createAndAssign, string teacherID){

 return View();
} 
```

# jquery - 如何让我的视频自动重启？

> ID：12497144
> 
> 赞同：0
> 
> 时间：2012-09-19T14:45:08.743
> 
> 标签：jquery, html, video

我需要在我的脚本中再添加一个功能，以使我的视频在完成后自动开始。这是脚本。我可能知道我必须将`currentTime`属性设置回 0。如何在我的脚本中配置它？还有其他方法可以实现吗？我正在使用这个[jQuery 插件](http://www.georgepaterson.com/sandbox/jquery-html5-video-background-demo/)

```
 <script>
            $(document).ready(function() {
                $('dl').toggle();
                $('h2').bind('click', function(event) {
                    event.preventDefault();
                    $(this).next('dl').slideToggle(500, function() {
                        $('.video-background').videobackground('resize');
                    });
                });
                $('.main').prepend('<div class="video-background"></div>');
                $('.video-background').videobackground({
                    videoSource: [['video/TimeLapse_Barcelona.mp4', 'video/mp4'],
                        ['video/TimeLapse_Barcelona.webm', 'video/webm'], 
                        ['video/TimeLapse_Barcelona.theora.ogv', 'video/ogg']], 
                    controlPosition: '#main',
                    poster: 'video/big-buck-bunny.jpg',
                    loadedCallback: function() {
                        $(this).videobackground('mute');
                    }
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:50:51.023

**环形：**

视频循环属性布尔值。默认为假。

所以尝试：

```
$('.video-background').videobackground({loop:true}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:49:46.747

如果您查看它声明的插件参数

> **loop** : 视频循环属性布尔值。默认为假。

将其设置为`true`, 将使视频循环..

* * *

```
$('.video-background').videobackground({
                videoSource: [['video/TimeLapse_Barcelona.mp4', 'video/mp4'],
                    ['video/TimeLapse_Barcelona.webm', 'video/webm'], 
                    ['video/TimeLapse_Barcelona.theora.ogv', 'video/ogg']], 
                controlPosition: '#main',
                loop: true, // ADDED THIS LINE !
                poster: 'video/big-buck-bunny.jpg',
                loadedCallback: function() {
                    $(this).videobackground('mute');
                }
            }); 
```

# android - 从 Azure Blob 存储下载 Android 会导致文件无效

> ID：12497156
> 
> 赞同：1
> 
> 时间：2012-09-19T14:45:57.977
> 
> 标签：android, azure, blob

从我的 Android 应用程序中，我尝试使用以下 URL 从 Windows Azure blob 存储下载：http: [//iclyps.blob.core.windows.net/broadcasts/23_6.mp4](http://iclyps.blob.core.windows.net/broadcasts/23_6.mp4)

当我从我的应用程序中下载生成的文件时，它已损坏。当我使用默认浏览器或 Chrome 下载它时，也会出现同样的错误。同样来自 Easy Downloader 应用程序，也会出现同样的错误。仅从我的 PC 下载或使用 Android 设备（或模拟器）的 Firefox Beta 即可正确检索文件。

我使用以下代码（片段）：

```
 try {
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

        //set up some things on the connection
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);

        //and connect!
        urlConnection.connect();

        bis = new BufferedInputStream(urlConnection.getInputStream(), BUFSIZE);
        bos = new BufferedOutputStream(
                context.openFileOutput(TMPFILE, Context.MODE_PRIVATE), BUFSIZE);
        /*
         * Read bytes to the buffer in chunks of BUFSIZE bytes until there is nothing more to read.
         * Each chunk is written to the output file.
         */
        byte[] buf = new byte[BUFSIZE];
        int nBytes = 0;
        int tBytes = 0;
        while ((nBytes = bis.read(buf, 0, BUFSIZE)) > 0) {
            bos.write(buf, 0, nBytes);
            tBytes += nBytes;
        }
        if (tBytes == 0) throw new Exception("no bytes received");
        bos.flush();
        MobyLog.d(TAG, "download succeeded: #bytes = " + Integer.toString(tBytes));
        return true;
    } catch (Exception e) {
        MobyLog.e(TAG, "download failed: " + e);
        context.deleteFile(TMPFILE);    // remove possibly present partial file.
        return false;
    } finally {
        if (bis != null) try { bis.close(); } catch (IOException e) {MobyLog.e(TAG, "bis close exception: " + e); };
        if (bos != null) try { bos.close(); } catch (IOException e) {MobyLog.e(TAG, "bos close exception: " + e); };
    } 
```

分析文件显示原始文件的第一部分（约 700K）在损坏的文件中重复多次，导致 mp4 文件无效。

将文件放在另一个网络服务器 (Apache/IIS) 上，然后从该位置下载文件确实会导致正确下载。

有没有人在从 Azure 下载时遇到过类似的问题？有人可以提供解决方案吗？

干杯，哈拉尔...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:22:37.797

您是否尝试过在您的 android 应用程序中使用[azure-sdk-for-java ？](https://github.com/WindowsAzure/azure-sdk-for-java)

我们的场景略有不同，因为我们使用 sdk 从 blob 存储中拉取和推送图像到自定义的 android 应用程序。但基本面应该是一样的。

# google-apps-script - 如何使用 Google Script 将日历事件复制（复制）到另一个日历中？

> ID：12497158
> 
> 赞同：3
> 
> 时间：2012-09-19T14:46:03.437
> 
> 标签：google-apps-script, google-calendar-api

我在 Google 日历中有几个日历。我正在学习 Google Script，并想创建一个脚本，将事件从我的一个日历复制到另一个日历，并有机会修改诸如重复之类的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:43:37.720

一些代码开始：

```
function myFunction() {
  var calendarSource = CalendarApp.getCalendarById("calendarID");
  var calendarDestination = CalendarApp.getCalendarById("calendarID");
  var eventToCopy = calendarSource.getEvents(new Date("July 21, 2009 EST"), new Date("July 22, 2009 EST"));

  //read up: https://developers.google.com/apps-script/class_recurrence
  var newRecurrence = CalendarApp.newRecurrence().addWeeklyRule().times(10);

  for (var i in eventToCopy){
    if (eventToCopy[i].getTitle() == "event name"){
      var newEvent = calendarDestination.createEventSeries(eventToCopy[i].getTitle(), eventToCopy[i].getStartTime(), eventToCopy[i].getEndTime(), newRecurrence);
    }

} 
```

这应该让你开始，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-09T05:20:01.993

这是一个旧线程，但这里是如何获取重复字段：

```
function test_allEventsFromTo() {
  var events = allEventsFromTo("primary", "1 feb 2018", "1 jul 2018");

  //display
  Logger.log("Events #%s\n", events.length);
  for (var i = 0; i < events.length; i++) {
    Logger.log("Title: %s, From: %s, To: %s, recurrence: %s", 
                events[i].summary, events[i].start.dateTime, events[i].end.dateTime, events[i].recurrence);
  }
}

function allEventsFromTo(calendarId, startDate, endDate) { 
  //filter setup
  var optionalArgs = {
    timeMin: (new Date(startDate)).toISOString(),
    timeMax: (new Date(endDate)).toISOString(),
    showDeleted: false,
    singleEvents: false,  //true expands recurring events
  };

  //Filter by calendarId and date range
  var response = Calendar.Events.list(calendarId, optionalArgs);

  return response.items;
} 
```

有关活动的更多信息：

事件、资源表示： [https ://developers.google.com/calendar/v3/reference/events](https://developers.google.com/calendar/v3/reference/events)

重复字段字符串格式： [https ://developers.google.com/calendar/concepts/events-calendars#recurring_events](https://developers.google.com/calendar/concepts/events-calendars#recurring_events)

# javascript - 主干 foreach 等待

> ID：12497171
> 
> 赞同：0
> 
> 时间：2012-09-19T14:46:44.347
> 
> 标签：javascript, backbone.js

我有一个轨道模型和一组轨道。模型本身有一个播放单个曲目的函数 play()。当单个曲目（按列表顺序）完成时，该集合应该能够逐个播放每个曲目。

**模型：**

```
app.Track = Backbone.Model.extend({
    defaults: {...},
    initialize: {...},
    play: function(playlist) {
       if(finished && playlist) {
           Backbone.pubSub.trigger('finishedPlaybackLoadNext')
       } else {
           Backbone.pubSub.trigger('finishedPlayback')  
       }
    },
}) 
```

**收藏：**

```
var TrackList = Backbone.Collection.extend({
    model: app.Track,
    nextOrder: function() {...},
    comparator: function( track ) {...},
    playAll: function() {
       this.models.forEach(function(item) {
          item.play(true); //true = play as playlist
       });
    }
}) 
```

正如预期的那样，forEach 不会等到列表中每个单独模型的播放完成。我怎样才能实现这种等待？

**编辑：**我正在使用全局触发器/订阅者来在不同的视图中共享它们。

```
Backbone.pubSub = _.extend({}, Backbone.Events); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:00:59.963

我认为你应该有两个模型来连续播放歌曲。首先，您有一个 Track 模型及其对应的 TrackList 集合，然后您将有另一个称为 PlayList 的模型和一个集合。

然后，Track 的播放函数应采用另一个参数，该参数是在 Track 播放完毕时必须执行的回调。这样，您也可以在 PlayList 上具有播放功能，并且该功能将通过嵌套回调处理连续播放所有歌曲（听起来像递归乐趣：P）。

编辑：我继续并破解了我所想的一些小实现。我在这里没有使用 Backbone，但我相信你可以适应这个想法，如果你有一些将回调函数传递给 Songs 播放函数的想法（顺便说一句......你实际上是如何播放你的歌曲的？） .

```
Song = function(name) {
  var play = function() {
    console.log(name);
    sleep(1000);
  };

  this.name = name;
  this.play = function(cb) {
    play();
    if (typeof cb == "function") {
      cb.call(this);
    }
  };
};

PlayList = function(songs) {
  this.play = function(cb) {
    // define a function that calls the first song with a callback 
    // that calls the next song with a callback that calls the next
    // ... untill the last songs play function gets called with cb 
    // (parameter top this function) as the callback.
    var playFirstSong = _.reduce(songs.reverse(), function(cb, song) { 
      return function() {
        song.play(cb);
      };
    }, cb);

    playFirstSong();
  };
}; 
```

我也用这个做了一个[jsFiddle](http://jsfiddle.net/6pejn/1/)。

# vb.net - 转换数据表

> ID：12497172
> 
> 赞同：0
> 
> 时间：2012-09-19T14:46:49.007
> 
> 标签：vb.net, linq, datatable

我有一个这样的数据表

```
 X,Y,Z
  0,0,A
  0,2,B
  0,0,C
  1,0,A
  1,0,C
  2,2,A
  2,2,B
  2,0,C
  3,2,B
  3,1,C
  4,3,A
  4,0,B
  4,1,C
  5,3,A
  5,2,B
  5,0,C 
```

我想把它转换成这样的东西：

```
 X,A,B,C
  0,0,2,0
  1,0, ,0
  2,2,2,0
  3, ,2,1
  4,3,0,1
  5,3,2,0 
```

我尝试使用数据集和 linq，但我并不幸运。

我的 linq 代码：

```
 Dim q = (From c In dt _
          Select c("Z") Distinct) 'I found out which categories I have in Z column (my example :A,B,C)
     Dim ldt(q.Count) As DataTable

     For i = 0 To q.Count - 1
        Dim sfil As String = q(i).ToString
        Dim r = (From c In dt _
        Select c Where c("Z") = sfil)
        ldt(i) = r.CopyToDataTable
     Next 
```

所以现在我有 3 个表（ldt(0) 的值为 A，ldt(1) 的值为 B，ldt(2) 的值为 C），我正在考虑做类似 leftJoin 的事情，但我尝试过的任何事情都失败了. 有什么解决方案甚至更好的主意吗？

谢谢

所以一个新的例子是：我有这个表：

```
 id,Price,Item
  0,0,Laptop
  0,2,Tablet
  0,0,Cellphone
  1,0,Laptop
  1,0,Tablet
  2,2,Laptop
  2,2,Cellphone
  2,0,Tablet
  3,2,Cellphone
  3,1,Tablet
  4,3,Laptop
  4,0,Cellphone
  4,1,Tablet
  5,3,Laptop
  5,2,Cellphone
  5,0,Tablet 
```

我想将其转换为：

```
 X,Laptop,Tablet,Cellphone
  0,0,2,0
  1,0, ,0
  2,2,2,0
  3, ,2,1
  4,3,0,1
  5,3,2,0 
```

笔记本电脑、平板电脑、手机每列的值是第一个表中的 Y 值。

我希望它现在更有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:37:04.190

我相信您可以使用与项目名称对应的列名称创建一个 DataTable。然后，您对先前的 DataTable 进行`id`分组，并使用每个分组来填充一行。如果我做错了什么，请原谅我。我不太会使用 VB 或 DataTables。

```
Dim itemNames = (From c In dt _
                 Select c("Item") Distinct)

Dim newDt as DataTable = new DataTable()
Dim idColumn As DataColumn = new DataColumn()
idColumn.DataType = System.Type.GetType("System.Int32")
idColumn.ColumnName = "id"
idColumn.ReadOnly = True
idColumn.Unique = True 

newDt.Columns.Add(idColumn)

For Each itemName As String In itemNames
    Dim column As DataColumn = new DataColumn()
    column.DataType = GetType(Nullable(Of Integer))
    column.ColumnName = itemName
    column.ReadOnly = True
    column.Unique = False
    newDt.Columns.Add(column)
Next

Dim groupingById = From row in dt
                   Group By Id = row("id")
                   Into RowsForId = Group

For Each grouping In groupingById
    Dim row as DataRow = newDt.NewRow()
    row("id") = grouping.Id
    For Each rowForId in grouping.RowsForId
        row(rowForId("Item")) = rowForId("Price")
    Next
    newDt.Rows.Add(row)
Next 
```

# java - 使用 SWIG 与数组交互的正确方法

> ID：12497175
> 
> 赞同：6
> 
> 时间：2012-09-19T14:46:54.360
> 
> 标签：java, c, swig

我对 swig 中的类型映射以及如何使用数组有点迷茫。我准备了一个使用 swig 在 java 和 c 之间使用数组的工作示例，但我不知道这是否是正确的方法。

基本上我想将一个字节数组`byte[]`从java传递给c作为'signed char *` +它的大小，在c中修改它并查看java中的变化并在c中创建一个数组并在Java中使用它。

我看看这些问题： [如何使用 Swig 将数组（java 中的 long 数组）从 Java 传递到 C++](https://stackoverflow.com/questions/10947560/how-to-pass-arrayarray-of-long-in-java-from-java-to-c-using-swig)， [将数组作为指针+大小或范围传递给包装函数](https://stackoverflow.com/questions/11584599/pass-an-array-to-a-wrapped-function-as-pointersize-or-range/11584600#11584600)， [如何使 Swig 正确包装一个字符* 在 C 中修改为 Java 的缓冲区？](https://stackoverflow.com/questions/2740068/how-can-i-make-swig-correctly-wrap-a-char-buffer-that-is-modified-in-c-as-a-jav)

事实上，使用这些解决方案作为指导来制作示例。

这是我在文件 arrays.h 中的代码：

```
#include <iostream>

bool createArray(signed char ** arrCA, int * lCA){
    *lCA = 10;
    *arrCA = (signed char*) calloc(*lCA, sizeof(signed char));

    for(int i = 0; i < *lCA; i++){
        (*arrCA)[i] = i;
    }

    return *arrCA != NULL;
}

bool readArray(const signed char arrRA[], const int lRA){
    for(int i = 0; i < lRA; i++){
        std::cout << ((unsigned int) arrRA[i]) << " ";
    }
    std::cout << std::endl;
    return true;
}

bool modifyArrayValues(signed char arrMA[], const int lMA){
    for(int i = 0; i < lMA; i++){
        arrMA[i] = arrMA[i] * 2;
    }
    return true;
}

bool modifyArrayLength(signed char arrMALIn[], int lMALIn, signed char ** arrMALOut, int * lMALOut){

    *lMALOut = 5;
    *arrMALOut = (signed char*) calloc(*lMALOut, sizeof(signed char));

    for(int i = 0; i < *lMALOut; i++){
        (*arrMALOut)[i] = arrMALIn[i];
    }
    return true;
} 
```

这是 swig (arrays.i) 的 .i 文件：

```
%module arrays

%{
    #include "arrays.h"
%}

%typemap(jtype) bool createArray "byte[]"
%typemap(jstype) bool createArray "byte[]"
%typemap(jni) bool createArray "jbyteArray"
%typemap(javaout) bool createArray { return $jnicall; }
%typemap(in, numinputs=0) signed char ** arrCA (signed char * temp) "$1=&temp;"
%typemap(in, numinputs=0) int * lCA (int l) "$1=&l;"
%typemap(argout) (signed char ** arrCA, int * lCA) {
    $result = JCALL1(NewByteArray, jenv, *$2);
    JCALL4(SetByteArrayRegion, jenv, $result, 0, *$2, (const jbyte*) *$1);
}
%typemap(out) bool createArray {
    if (!$1) {
        return NULL;
    }
}

%typemap(jtype) (const signed char arrRA[], const int lRA) "byte[]"
%typemap(jstype) (const signed char arrRA[], const int lRA) "byte[]"
%typemap(jni) (const signed char arrRA[], const int lRA) "jbyteArray"
%typemap(javain) (const signed char arrRA[], const int lRA) "$javainput"

%typemap(in,numinputs=1) (const signed char arrRA[], const int lRA) {
  $1 = JCALL2(GetByteArrayElements, jenv, $input, NULL);
  $2 = JCALL1(GetArrayLength, jenv, $input);
}

%typemap(freearg) (const signed char arrRA[], const int lRA) {
  // Or use  0 instead of ABORT to keep changes if it was a copy
  JCALL3(ReleaseByteArrayElements, jenv, $input, $1, JNI_ABORT); 
}

%typemap(jtype) (signed char arrMA[], const int lMA) "byte[]"
%typemap(jstype) (signed char arrMA[], const int lMA) "byte[]"
%typemap(jni) (signed char arrMA[], const int lMA) "jbyteArray"
%typemap(javain) (signed char arrMA[], const int lMA) "$javainput"

%typemap(in, numinputs=1) (signed char arrMA[], const int lMA) {
    $1 = JCALL2(GetByteArrayElements, jenv, $input, NULL);
    $2 = JCALL1(GetArrayLength, jenv, $input);
}

%typemap(freearg) (signed char arrMA[], const int lMA) {
  JCALL3(ReleaseByteArrayElements, jenv, $input, $1, 0); 
} 

%typemap(jtype) (signed char arrMALIn[], int lMALIn) "byte[]"
%typemap(jstype) (signed char arrMALIn[], int lMALIn) "byte[]"
%typemap(jni) (signed char arrMALIn[], int lMALIn) "jbyteArray"
%typemap(javain) (signed char arrMALIn[], int lMALIn) "$javainput"

%typemap(in, numinputs=1) (signed char arrMALIn[], int lMALIn) {
    $1 = JCALL2(GetByteArrayElements, jenv, $input, NULL);
    $2 = JCALL1(GetArrayLength, jenv, $input);
}

%typemap(freearg) (signed char arrMALIn[], int lMALIn) {
    JCALL3(ReleaseByteArrayElements, jenv, $input, $1, JNI_ABORT); 
}

%typemap(jtype) bool modifyArrayLength "byte[]"
%typemap(jstype) bool modifyArrayLength "byte[]"
%typemap(jni) bool modifyArrayLength "jbyteArray"
%typemap(javaout) bool modifyArrayLength { return $jnicall; }
%typemap(in, numinputs=0) signed char ** arrMALOut (signed char * temp) "$1=&temp;"
%typemap(in, numinputs=0) int * lMALOut (int l) "$1=&l;"
%typemap(argout) (signed char ** arrMALOut, int * lMALOut) {
    $result = JCALL1(NewByteArray, jenv, *$2);
    JCALL4(SetByteArrayRegion, jenv, $result, 0, *$2, (const jbyte*) *$1);
}
%typemap(out) bool modifyArrayLength {
    if (!$1) {
        return NULL;
    }
}

%include "arrays.h" 
```

最后是测试它的 Java 代码：

```
public class Run{

    static {
        System.loadLibrary("Arrays");
    }

    public static void main(String[] args){

        byte[] test = arrays.createArray();

        printArray(test);       

        arrays.readArray(test);

        arrays.modifyArrayValues(test);

        printArray(test);

        byte[] test2 = arrays.modifyArrayLength(test);

        printArray(test2);

    }

    private static void printArray(byte[] arr){

        System.out.println("Array ref: " + arr);

        if(arr != null){
            System.out.println("Array length: " + arr.length);

            System.out.print("Arrays items: ");

            for(int i =0; i < arr.length; i++){
                System.out.print(arr[i] + " ");
            }
        }
        System.out.println();
    }
} 
```

该示例有效，但我不确定这是正确的方法，我的意思是：

有没有更简单的方法来达到同样的效果？

这段代码是否有内存泄漏（一方面我认为这是因为我做了一个 calloc 但我没有释放它，但另一方面我将它传递给 SetByteArrayRegion，所以释放它可能会导致错误）？

SetByteArrayRegion 是复制值还是仅复制引用？例如，如果不是实际执行 calloc，而是通过引用从 c++ 对象获取数组，该数组在退出范围时将被销毁，该怎么办？

无效时返回给Java的数组是否正确释放？

有没有办法指定类型映射从哪里应用到哪里？我的意思是，在.i 代码中，我为每个函数提供了一个类型映射，我认为我可以重用其中的一些，但如果还有其他函数具有相同的功能我不想对它们进行类型映射的参数，我该怎么做，我可能无法修改函数的参数名称。

我已经看到了这个问题中描述的 carrays.i 可能性[How do I pass arrays from Java to C++ using Swig?](https://stackoverflow.com/questions/4167233/how-do-i-pass-arrays-from-java-to-c-using-swig) ，但这意味着如果数组的大小是 1000 项，并且我想通过 Java 套接字发送它或从中创建一个字符串，我必须为每个数组项进行 1 个 JNI 调用。而且我实际上想要一个**`byte[]`**在 Java 端，而不是一组函数来访问底层数组，所以已经存在的代码无需修改即可工作。

* * *

上下文：我想要实现这一点的原因是有一个具有某些功能的库，但这里的重要部分是它允许使用 Google 协议缓冲区从库中导入和导出数据。所以与这个问题相关的代码如下所示：

```
class SomeLibrary {

  bool export(const std::string & sName, std::string & toExport);

  bool import(const std::string & sName, const std::string & toImport);

} 
```

问题是 C++ 中的 Protobuf 使用 std::string 来存储数据，但是这个数据是二进制的，所以它不能作为普通的 Java 字符串返回，因为它会被截断，更多的是在[Swig 中：转换返回类型 std:: string(binary) 到 java byte[]](https://stackoverflow.com/questions/12192624/swig-convert-return-type-stdstringbinary-to-java-byte/12196522#comment16788430_12196522)。

所以我的想法是为序列化的 Protobuf 返回 Java a `byte[]`（就像协议缓冲区的 Java 版本一样）并接受`byte[]`解析 protobuf。为了避免进入`SWIGTYPE_p_std_string`导出的第二个参数，并为导入的第二个参数使用字符串，y 使用 %extend 包装了两个函数，如下所示：

```
%extend SomeLibrary{

  bool export(const std::string & sName, char ** toExportData, int * toExportLength);

  bool import(const std::string & sName, char * toImportData, int toImportLength);

} 
```

现在我应该能够制作类型图了。

但为了更通用，我要求将数组从 Java 操作到 SWIG，**具有**原生 Java `byte[]`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T18:58:50.527

不要自动打折 carrays.i。也就是说 SWIG 已经有了一些方便的类型图：

```
%module test

%apply(char *STRING, size_t LENGTH) { (char *str, size_t len) };

%inline %{
void some_func(char *str, size_t len) {
}
%} 
```

在 Java 接口中产生一个函数：

```
public static void some_func(byte[] str) 
```

即它需要一个数组，您可以像平常一样在Java 中构建，并为您填写指针和长度。几乎是免费的。

您的代码几乎肯定会泄漏 - 您希望`free()`在 argout 类型映射中调用以释放您分配的内存，一旦它被复制到新的 Java 数组中。

*您可以通过参数的类型和*名称选择性地应用类型映射。[有关类型映射匹配规则的更多信息，请参阅此文档](http://www.swig.org/Doc1.3/Typemaps.html#Typemaps_nn17)。您还可以请求显式使用类型映射，`%apply`如我上面显示的示例所示。（实际上它复制了类型映射，因此如果您只修改其中一个，在一般情况下它不会替换它）

一般来说，用于将数组从 Java 传递到 C++ 或使用已知大小的数组的类型映射比从 C++ 返回到 Java 的类型映射更简单，因为大小信息更明显。

我的建议是计划在 Java 中进行大量分配，并设计可能增长数组以在两种模式下运行的函数：一种指示所需的大小，另一种实际完成工作。你可以这样做：

```
ssize_t some_function(char *in, size_t in_sz) {
  if (in_sz < the_size_I_need) {
    return the_size_I_need; // query the size is pretty fast
  }

  // do some work on in if it's big enough

  // use negative sizes or exceptions to indicate errors

  return the_size_I_really_used; // send the real size back to Java
} 
```

这将允许您在 Java 中执行以下操作：

```
int sz = module.some_function(new byte[0]);
byte result[] = new byte[sz];
sz = module.some_function(result); 
```

请注意，使用默认类型映射`new byte[0]`是必需的，因为它们不允许`null`用作数组 - 如果需要，您可以添加允许这样做的类型映射，或者用于`%extend`提供不需要空数组的重载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-10T12:48:56.490

这里有很好的记录：http: [//swig.org/Doc3.0/SWIGDocumentation.html#Java_binary_char](http://swig.org/Doc3.0/SWIGDocumentation.html#Java_binary_char)

下面的接口文件会在java中生成byte[]方法：

```
%apply (char *STRING, size_t LENGTH) { (const char data[], size_t len) }
%inline %{
void binaryChar1(const char data[], size_t len) {
  printf("len: %d data: ", len);
  for (size_t i=0; i<len; ++i)
    printf("%x ", data[i]);
  printf("\n");
}
%} 
```

# java - 泛型类的多个实例

> ID：12497177
> 
> 赞同：0
> 
> 时间：2012-09-19T14:47:00.523
> 
> 标签：java, generics, instantiation

我正在尝试创建一个通用 DAO，以避免在许多单独的 DAO 中具有或多或少相同的代码。

我的问题是在以下代码行中：

```
private BaseDAOImpl<Artist> baseDAOArtist = new BaseDAOImpl<>(Artist.class);
private BaseDAOImpl<ArtistRelation> baseDAOArtistRelation = new BaseDAOImpl<>(ArtistRelation.class); 
```

第一个似乎被跳过了。

BaseDAOImpl 的摘录：

```
public class BaseDAOImpl<T> implements BaseDAO<T> {

    private Class<T> entity;
    private DAOFactory daoFactory = Config.getInstance().getDAOFactory();
    private static String SQL_FIND_BY_ID;

    public BaseDAOImpl(Class entity) {
        this.entity = entity;
        SQL_FIND_BY_ID = "SELECT * FROM VIEW_" + entity.getSimpleName() + " WHERE id = ?";        
    }
} 
```

不能以这种方式实例化多个对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:49:16.313

是的。目前尚不清楚“第一个似乎被跳过”是什么意思。但可能是您对“SQL_FIND_BY_ID”使用静态值？就目前而言：

```
private BaseDAOImpl<Artist> baseDAOArtist = new BaseDAOImpl<>(Artist.class); 
```

创建两个实例变量并设置 SQL_FIND_BY_ID 的值，然后：

```
private BaseDAOImpl<ArtistRelation> baseDAOArtistRelation = new BaseDAOImpl<>(ArtistRelation.class); 
```

创建两个新的实例变量并将更改两个实例的值“SQL_FIND_BY_ID”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:09:34.640

如果没有更详细的错误描述，我现在或多或少地猜测，但从变量名称和代码片段来看，我怀疑**静态**字段 SQL_FIND_BY_ID 是原因。

当你实例化两个 DAO 时，构造函数 BaseDAOImpl 的第二次执行将覆盖静态字段的值。如果 DAO 依赖存储在那里的 SQL 查询，它总是会查询最后一个实例化的 DAO 的实体。

静态字段和方法在类的所有实例之间共享，即使它们的泛型参数不同。与例如 C++ 的模板相比，没有为每个通用参数生成单独的类。

要为每个实体实现单独查询的所需行为，您可以将静态字段更改为非静态成员。

# javascript - 将警报更改为打印输出

> ID：12497178
> 
> 赞同：0
> 
> 时间：2012-09-19T14:47:01.677
> 
> 标签：javascript

我仍然在搞乱这个用 JavaScript 编码的计算器。我在问这个问题，我该如何让它停止显示输出警报并将其打印到名为“Output”下面的 div 标签中。

我已经将我认为应该在输出中的内容放入其中，并将其粘贴在下面：

```
 <html>
    <head>
    <link href="stylesheet/stylesheet.css" rel="stylesheet" type="text/css">

    <script type="text/javascript">

    function checkinputs(){
    var     A = parseInt(document.triangleform.input1.value);
    var     B = parseInt(document.triangleform.input2.value);
    var     C = parseInt(document.triangleform.input3.value);

        if (A == B && B == C) { alert("Equalateral"); } 
        if (A == B && B != C || B == C && A != B || C == A && A != B) {alert("Isosceles");} 
        if (A != B && B != C && C != A) {alert("Scalene!");} 
    }

    function keypress(evt) {
      var theEvent = evt || window.event;
      var key = theEvent.keyCode || theEvent.which;
      key = String.fromCharCode( key );
        var regex = /[0-9]|\./;
      if( !regex.test(key) ) {
        theEvent.returnValue = false;
        if(theEvent.preventDefault) theEvent.preventDefault();
      }
    }

    function notEmpty(field, NocharMsg){
        if(field.value.length == 0){
            alert(NocharMsg);
            field.focus();
            return false;
        }
        return true;
    }
    </script

    </head>
    <body>
    <div id="Container">

    <div id="Header"><h1></h1></div>

            <div id="Content_1">
                    <div id="Explanation">
                    This calculator will determine what
                    triangle you have made depending on
                    the integer values in the input fields.

                    </div>
                    <div id="Form">
                        <FORM NAME="triangleform">
                        Enter the triangle values below: <br>
                        <p>
                        <h4>Side 1: </h4><BR>
                        <INPUT TYPE="Integer" NAME="input1" onkeypress='keypress(event)' /><P>
                        <h4>Side 2: </h4><BR>
                        <INPUT TYPE="Integer" NAME="input2" onkeypress='keypress(event)' /><P>
                        <h4>Side 3:</h4> <BR>
                        <INPUT TYPE="Integer" NAME="input3" onkeypress='keypress(event)' /><P>
                        <INPUT TYPE="button" NAME="Submit" Value="Submit" onClick="checkinputs()" />
                        </FORM>
                    </div>
                    <div id="Verbal_Output">
                        <h2>You made a:</h2>
                        <p>        
                        <h2>Triangle</h2>
                    </div>

                </div>
                <p>
                <p>
            <div id="Content_2">

            <div id="Output">
            <script>
            document.getElementById("Output").value = checkinputs();

            </script>   
            </div>

    </body>
    </html> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:49:12.910

几乎在那里 - 一个 div 没有`value`属性（用于表单输入），但它**确实**有一个`innerHTML`属性。只要确保你`return`得到你想要的值`checkInputs()`，而不是`alert`ing 他们。

例如：

```
function checkinputs() {
    var A = parseInt(document.triangleform.input1.value),
        B = parseInt(document.triangleform.input2.value),
        C = parseInt(document.triangleform.input3.value),
        result;

    if (A == B && B == C) { result = "Equilateral"; } 
    if (A == B && B != C || B == C && A != B || C == A && A != B) { result ="Isosceles";} 
    if (A != B && B != C && C != A) { result = "Scalene!";} 

    // return result;
    document.getElementById("Output").innerHTML = result;
} 
```

然后在您的标记中：

```
<script>
        document.getElementById("Output").innerHTML = checkinputs();
</script> 
```

请注意，`.innerHTML`区分大小写。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T15:02:48.693

```
function checkinputs(){  
    var A = parseInt(document.triangleform.input1.value);
    var B = parseInt(document.triangleform.input2.value);
    var C = parseInt(document.triangleform.input3.value);

    if (A == B && B == C) { $('#output').html("<div>Equalateral</div>");}
    if (A == B && B != C || B == C && A != B || C == A && A != B) {$('#output').html("<div>Isosceles</div>");}
    if (A != B && B != C && C != A) {$('#output').html("<div>Scalene!</div>");}
} 
```

# python - 在 for 循环中赋值而不是引用

> ID：12497179
> 
> 赞同：0
> 
> 时间：2012-09-19T14:47:05.140
> 
> 标签：python, string, list, reference, variable-assignment

我有一个字符串列表，我希望列表中的每个字符串都将其存储在字典中并将其发送到另一个函数。到目前为止，它看起来像这样：

```
list = ['75001', '75002', '75003']
params = {}
for elt in list:
    params['elt'] = elt
    ...
    foo(params) 
```

但问题是我存储的是对 elt 的引用而不是值，所以在我的函数调用中，我总是有列表的最后一个元素：

```
params['elt'] = '75003' 
```

我怎么能只存储价值而不是参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:51:55.653

```
list = ['75001', '75002', '75003']
params = {}
for elt in list:
    params[elt] = elt
    ...
    foo(params) 
```

只需删除`elt`. `params['elt']`您当前正在做的是反复更改 key 的值`'elt'`。

如果您每次都想要一本新字典，但是您可以这样做：

```
list = ['75001', '75002', '75003']
for elt in list:
    foo({'elt': elt}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:53:22.890

问题是所有函数都得到相同的字典。试试这个：

```
list = ['75001', '75002', '75003']
for elt in list:
    params = {}
    params['elt'] = elt
    ...
    foo(params) 
```

现在每次调用`foo()`都会获得一个新容器，他们再也看不到对方了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T15:02:05.677

如果您想要一个在将其传递给 foo 后不会更改的 dict，则应该复制该 dict：

```
params = {}
for elt in list:
    params['elt'] = elt
    ...
    foo(params.copy()) 
```

现在，对循环后面的进一步更改`params`不会影响`params`您发送到的副本`foo`。

这与 Aaron Digulla 的回答不同，因为`params`最初仍然可以在循环之外创建。如果 params 在代码中声明得很远，并且您不想将其移入循环中，这将很有用；或者如果初始实例化很昂贵并且您不想多次执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T15:06:24.910

我想你想要这样的东西：

```
zip_codes = ['75001', '75002', '75003']
for zip_code in zip_codes:
    params = {}
    params['zip code'] = zip_code
    ...
    foo(params) 
```

每次通过循环都会创建一个新的空字典，并在调用之前将列表中的值添加到它，`foo()`尽管您实际上并不需要它，除非您确定每次通过循环都分配给相同的键。另一种方法是将其移出循环并在循环`params.clear()`顶部调用。当然，在调用之前可以根据需要添加其他键和相应的搜索信息`foo()`。

# oracle - Node.js 与 Oracle 11g 兼容吗？

> ID：12497182
> 
> 赞同：0
> 
> 时间：2012-09-19T14:47:21.773
> 
> 标签：oracle, node.js, oracle11g, compatibility

我一直在寻找这个，但我找不到任何东西。

在大学项目中，我们应该指定我们将用于给我们的项目的技术，这是一个大项目，所以我们考虑使用`Oracle` 和服务器，我们考虑`Node.js`，但是，它们兼容吗？我发现它与 兼容，但与此版本`9i`无关`11g`

# arrays - Emacs & LaTeX：表/矩阵/数组的列数

> ID：12497189
> 
> 赞同：8
> 
> 时间：2012-09-19T14:47:57.200
> 
> 标签：arrays, emacs, matrix, latex

有人会建议如何去做：

```
\begin{array}{cc}
Lorem & Ipsum \\
More & Stuff \\
\end{array} 
```

添加或删除`c`,`l`或`r`在数组之后的部分中将添加或删除`&`数组环境中所有行的 。

基本上相同的技巧可以应用于矩阵或表格环境。

至少我会对其他人如何处理这个“容易出错”、“难以有效改变”的任务感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:43:47.300

我通常从不同格式（制表符分隔值或组织模式表）生成表，其中此类操作更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T07:53:51.487

这不*完全*是答案，但这就是我的做法：

1.  在 & 上对齐，例如：`C-x . &`.

2.  使用常规选择命令选择我需要的整个列。

3.  使用 切割一个矩形区域`C-x r k`。

这不是超级自动的，但经过一些练习并不是真正的障碍，除非您必须重新格式化一些旧文档并同时进行大量更改。

**编辑**

```
(defun latex-merge-next-column (start end column)
  "Works on selected region, removes COLUMN'th ampersand
in every line in the selected region"
  (interactive "r\nnColumn to merge: ")
  (labels ((%nth-index-of 
            (line)
            (let ((i -1) (times 0))
              (while (and (< times column) i)
                (setq i (position ?\& line :start (1+ i))
                      times (1+ times))) i)))
    (let ((region (split-string (buffer-substring start end) "\n"))
          amp-pos
          replacement)
      (dolist (line region)
        (setq amp-pos (%nth-index-of line)
              replacement
              (cons (if amp-pos
                        (concat (subseq line 0 amp-pos)
                                (subseq line (1+ amp-pos)))
                      line) replacement)))
      (kill-region start end)
      (insert (mapconcat #'identity (reverse replacement) "\n"))))) 
```

这将适用于所选区域并删除每行中的第 n 个 & 符号。你可以将它绑定到一些你觉得舒服的键上，比如：

```
(global-set-key (kbd "C-c C-n") 'latex-merge-next-column) 
```

然后`C-c C-n 2`将删除所选行中的第二个＆符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:36:27.477

[正如建议](https://stackoverflow.com/questions/12497189/emacs-latex-amount-of-columns-for-tables-matrices-arrays#comment16835580_12498189)的那样，您可以制作一个[YASnippet](http://capitaomorte.github.com/yasnippet/)，根据第二个参数中的字母数量`array`自动将适当数量的`&`s 添加到数组的第一行：

```
# -*- mode: snippet -*-
# name: array
# key: arr
# expand-env: ((yas/indent-line 'fixed))
# --
\begin{array}{${1:cc}}$0
${1:$
(let ((row ""))
  (dotimes (i (- (string-width yas/text) 1) row)
    (setq row (concat row "& "))))
}\\\\
\end{array} 
```

该手册[举例说明了这种技术](http://capitaomorte.github.com/yasnippet/snippet-development.html#mirrors-with-transformations)。与的行`(yas/indent-line 'fixed)`是为了避免 AUCTeX 缩进该行。将片段 ( `$0`) 的退出点放置在数组声明的末尾而不是第一行的开头的原因是，当放置在第一行的开头时，退出点的行为与预期不同。

以下代码段还将添加与列一样多的行：

```
# -*- mode: snippet -*-
# name: array
# key: arr
# expand-env: ((yas/indent-line 'fixed))
# --
\begin{array}{${1:cc}}$0
${1:$
(let ((row "") (allrows ""))
  (dotimes (i (- (string-width yas/text) 1))
    (setq row (concat row "& ")))
  (dotimes (i (string-width yas/text) allrows)
    (setq allrows (concat allrows row "\\\\\\\\\n"))))
}\end{array} 
```

这个片段的一个问题是，`\\`即使只有一列，它也会添加，但这样的数组可能很少见。

在片段中向嵌入的 lisp 代码添加 lisp 注释似乎存在问题，所以我只是添加了一个仅 lisp 代码的注释版本来解释它：

```
;; Make an empty row with as many columns as symbols in $1 (the $1 in
;; the snippet which is what yas/text refer to)
(let ((row "") (allrows ""))
  ;; Make an empty row with as many columns as symbols in $1
  (dotimes (i (- (string-width yas/text) 1))
    (setq row (concat row "& ")))
  ;; Make as many rows as symbols in $1
  (dotimes (i (string-width yas/text) allrows)
    (setq allrows (concat allrows row "\\\\\\\\\n")))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T16:32:07.283

以@wvxvw 的解决方案为基础，`M-x align-current`在表格/矩阵/数组环境中使用然后使用块选择/插入命令进行操作怎么样？这似乎与转义的 & 符号一起智能地工作。我发现在此操作期间禁用包装很有用。我根本不觉得这很难编辑，因为相对定期的重新对齐使所有内容都非常可读。

# javascript - mouseenter 无法正常工作

> ID：12497191
> 
> 赞同：0
> 
> 时间：2012-09-19T14:48:11.567
> 
> 标签：javascript, jquery, css

我正在尝试使用 mouseenter 显示一个类，如下所示：

```
$(".stcommenttext").live({
    mouseenter:
        function() {
            $(this).attr('class');
        },
    mouseleave:
       function() {
       }
   }
); 
```

我的 HTML 和 CSS 如下所示：

```
 <div class="stcommentbody" id='stcommentbody19'>

        <div class="stcommentimg">
            <a href="/view_profile.php?id=5" style="border:0;"><img src="/photos/files/5/main/small_thumb.jpg?v=1348065832" class='small_face'/></a>
        </div>

        <div class="stcommenttext">
            <input type="hidden" id="home19" value="1" />
            <a class="stcommentdelete" href="#" id="cmt_19" rel="tooltip" title="Delete Comment"></a>                    
            <a href="/view_profile.php?id=5" style="border:0;"><b>psmith</b></a>  hello             <div class="stcommenttime">8 minutes ago <span style="float:right;"><img id="delcmticon_69" class="saving" src="/images/busy.gif" /></span></div> 
        </div>
    </div>
    <div class="stcommentbody" id='stcommentbody20'>

        <div class="stcommentimg">
            <a href="/view_profile.php?id=5" style="border:0;"><img src="/photos/files/5/main/small_thumb.jpg?v=1348065832" class='small_face'/></a>
        </div>

        <div class="stcommenttext">
            <input type="hidden" id="home20" value="1" />
            <a class="stcommentdelete" href="#" id="cmt_20" rel="tooltip" title="Delete Comment"></a>                    
            <a href="/view_profile.php?id=5" style="border:0;"><b>psmith</b></a>  testing this              <div class="stcommenttime">7 minutes ago <span style="float:right;"><img id="delcmticon_69" class="saving" src="/images/busy.gif" /></span></div> 
        </div>
    </div>
</div> 
```

CSS：

```
.stcommentdelete {
    float:right;
    cursor:pointer;
    background:url(/wall/icons/trashdull.png);
    display: none;
    height:20px;
    width:20px;
}
.stbody:hover .stcommentdelete {
    display: block;
}
.stcommentdelete:hover {
    background:url(/wall/icons/trash.png);
} 
```

我希望它会在鼠标输入时为单个 div 显示我的删除图标，但它会显示所有 div 的图标。知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:55:39.113

```
$(".stcommenttext").on({
    mouseenter:
        function() {
            $(this).addClass('stcommentdelete');
        },
    mouseleave:
       function() {
            $(this).removeClass('stcommentdelete');
       }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:09:11.433

您想在悬停 .stcommentbody 元素时显示 .stcommentdelete 元素吗？

```
$('.stcommentbody').hover(function() {
    $(this).find('.stcommentdelete').show();
}, function() {
    $(this).find('.stcommentdelete').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:57:31.550

从 jQuery 1.7 开始，该`.live()`方法已被弃用。[现场](http://api.jquery.com/live/)观看
，您可以像这样使用`.on()`代替`.live()`或单独 使用`.mouseover`and 。`.mouseleave`

```
$(".stcommenttext").mouseenter(function(){
   $(this).addClass('class');
}).mouseleave(function(){
   $(this).removeClass('class');
}); 
```

见[mouseenter](http://api.jquery.com/mouseenter/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:00:37.523

您可以使用`.hover`多个函数`mouseenter`和`mouseleave`事件，如下所示：

```
$(".stcommentbody").hover(
    function() {
        $(this).find(".stcommentdelete").addClass('stcommentdelete-active');
    }, function() {
        $(this).find(".stcommentdelete").removeClass('stcommentdelete-active');
    }
);​ 
```

演示： http: [//jsfiddle.net/SO_AMK/Vg2vZ/](http://jsfiddle.net/SO_AMK/Vg2vZ/)（我使用了不同图像的精确标记）

# python - Python 将 0 评估为 False

> ID：12497199
> 
> 赞同：21
> 
> 时间：2012-09-19T14:48:35.720
> 
> 标签：python, boolean

在 Python 控制台中：

```
>>> a = 0
>>> if a:
...   print "L"
... 
>>> a = 1
>>> if a:
...   print "L"
... 
L
>>> a = 2
>>> if a:
...   print "L"
... 
L 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-19T15:04:52.943

在 Python 中，`bool`是 的子类`int`，并且`False`具有值`0`; 即使值没有`bool`在`if`语句中隐式转换（它们是），`False == 0`也是如此。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T14:49:49.007

0 是 python 中的假值

虚假值：[来自（2.7）文档：](http://docs.python.org/library/stdtypes.html#truth-value-testing)

> 任何数字类型的零，例如 0、0L、0.0、0j。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T14:51:32.957

`if`子句中的任何内容都隐含地`bool`调用了它。所以，

```
if 1:
   ... 
```

是真的：

```
if bool(1):
   ... 
```

并`bool`调用`__nonzero__`¹表示对象是`True`或`False`

演示：

```
class foo(object):
    def __init__(self,val):
        self.val = val
    def __nonzero__(self):
        print "here"
        return bool(self.val)

a = foo(1)
bool(a)  #prints "here"
if a:    #prints "here"
    print "L"  #prints "L" since bool(1) is True. 
```

^(¹`__bool__`在 python3.x 上)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T17:00:21.543

我认为它只是以 0 或非 0 来判断：

```
>>> if 0:
    print 'aa'

>>> if not 0:
    print 'aa'

aa
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-24T17:49:50.693

首先，python 中的一切都是对象。因此，您的 0 也是一个对象，具体来说，是一个内置对象。

以下是被认为是错误的内置对象：

1.  定义为假的常量：无和假。
2.  任何数字类型的零：0, 0.0, 0j, Decimal(0), Fraction(0, 1)
3.  空序列和集合：'', (), [], {}, set(), range(0)

因此，当您将 0 置于 if 或 while 条件或布尔运算中时，将对其进行真值测试。

```
# call the __bool__ method of 0
>>> print((0).__bool__())
False

# 
>>> if not 0:
...     print('if not 0 is evaluated as True')
'if not 0 is evaluated as True' 
```

# java - 从 Apache James 服务器发送外部电子邮件

> ID：12497205
> 
> 赞同：0
> 
> 时间：2012-09-19T14:48:47.853
> 
> 标签：java, james

我在本地 Apache James 服务器上创建了用户。我可以从我的 Java Spring 代码发送电子邮件并且它可以工作，但是当发送到外部电子邮件地址时，我在服务器上收到以下异常：

james.mailet 上下文 | 临时异常投递邮件

我错过了我需要设置的东西吗？我正在使用 Apache James Server 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:51:16.327

本地主机无法发送电子邮件。尝试在启用 smtp 的服务器上上传代码，它应该可以工作。E-mail离开在线测试，本地不行。

# javascript - 使用 jquery 隐藏跨度不起作用

> ID：12497215
> 
> 赞同：0
> 
> 时间：2012-09-19T14:49:16.183
> 
> 标签：javascript, jquery

我有一个 sharepoint webpart，它显示了一些列表中的一些信息，这些列表是安全修剪的，所以如果用户没有对该列表的权限，它将显示访问被拒绝。这很好。

我想隐藏页面的那一部分。

我在这里找到了解决方法：http: [//www.timferro.com/wordpress/archives/227](http://www.timferro.com/wordpress/archives/227)

这是我的代码：

```
<script src="/_layouts/Scripts/jquery1.8.1.min.js"></script><script language="javascript">

$("span:contains('Error')").hide();
$("div:contains('Access denied'):not(:has(div))").hide();</script> 
```

这是显示我需要隐藏的屏幕截图。

[1](https://i.stack.imgur.com/nKh7p.png)

更好的图片在这里

![在此处输入图像描述](../Images/ed6e3ee65490f3fd538fad873fe69233.png)

**更新：** 当我隐藏它时，现在sharepoint它向我显示一条我想摆脱的蓝线，但如果我只隐藏蓝线，那么webpart之间会出现一个奇怪的空间，我认为最好是隐藏那个TD包含其余的东西？我怎么能隐藏它？

请看新的截图

![在此处输入图像描述](../Images/d24621a8f553026e5d80ce35d13316c5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:55:33.597

看起来你忘了把它放在[jQuery 就绪函数](http://api.jquery.com/ready/)中：

```
$(function(){
    $("span:contains('Error')").hide();
    $("div:contains('Access denied'):not(:has(div))").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:55:30.360

试试下面，

```
$(".UserGeneric span.ms-bold:contains('Error')").hide(); 
```

或者如果你想隐藏整个错误然后

```
$(".UserGeneric span.ms-bold:contains('Error')").parent().hide(); 
```

# .net - Visual Studio 2012 不会保存/覆盖只读文件

> ID：12497216
> 
> 赞同：15
> 
> 时间：2012-09-19T14:49:16.313
> 
> 标签：.net, visual-studio, visual-studio-2012

所以，直到我安装了 VS2012，当我试图在 VS2010 中编辑一个只读文件时，当我按下保存时，弹出一个对话框给我三个选项：

*   在内存中编辑
*   使可写
*   保存副本

突然间，它停止提供这些选项。有没有办法把它放回去，而不是每次都弹出保存对话框，然后告诉我文件是只读的。

我认为这可能与源代码控制相关，但我正在使用的项目并未在 IDE 中绑定到源代码控制，只是该文件在源代码控制中

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-09-17T19:52:20.957

我没有破解注册表，而是在工具>>选项>>源代码控制>>插件选择中选择了“无”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-30T20:23:54.067

我最近在使用 Visual Studio 2013 时遇到了同样的问题。我通过编辑注册表解决了这个问题：

*   转到 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0_Config\SourceControlProviders
*   删除处理 GitSccProvider 的密钥

不知道为什么会这样。鉴于此人在以下位置发布的帖子，我认为这可能与源代码控制集成有关：http: [//social.msdn.microsoft.com/Forums/vstudio/en-US/4e4c1878-3901-425e-a454-2c0d628275b0/when -saving-a-modified-readonly-file-it-always-pops-up-save-as-dialog?forum=vseditor](http://social.msdn.microsoft.com/Forums/vstudio/en-US/4e4c1878-3901-425e-a454-2c0d628275b0/when-saving-a-modified-readonly-file-it-always-pops-up-save-as-dialog?forum=vseditor)他通过禁用 Mercurial 插件解决了这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T15:01:34.387

使用设置复选框：

`Tools | Options... | Environment | Documents`

*   允许编辑只读文件；尝试保存时发出警告

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-23T11:57:50.753

在Tools->Options->Source Control Current source control plugin 中选择None。问题将得到解决

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-19T15:03:00.030

在 Visual Studio 2012 中，注册表项略有更改。新密钥是：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\SourceControl\AllowUncontrolledInMemoryEditing 
```

将该值设置为 0 将为您提供您习惯看到的对话框。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-01T12:43:10.837

您可能还会发现[此扩展](http://visualstudiogallery.msdn.microsoft.com/146b404a-3c91-46ff-932a-fb0f8b826f94)很有用，因为它确保每次加载解决方案时都会关闭 GIT 源代码控制。

# android - libgdx - 在我删除或更新应用程序后是否保存了首选项文件？

> ID：12497219
> 
> 赞同：2
> 
> 时间：2012-09-19T14:49:39.963
> 
> 标签：android, preferences, status, libgdx

我正在使用Libgdx进行游戏开发，我想使用preferences类来保存我的游戏状态，我的问题是：这个文件保存在哪里，并且在用户更新我的游戏后文件会被删除吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:18:30.067

在 android 上，它在桌面上保存为[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html) ，它在 user/preferenceName 目录中保存为 xml 类型文件

不，它不应该在 udpate 之后被删除，除非你（或用户）这样做，否则它不会被删除/修改。

此外，如果您在 android 上删除该应用程序，它将被删除。

# powerbuilder - 如何刷新 EXE 的资源文件？

> ID：12497221
> 
> 赞同：0
> 
> 时间：2012-09-19T14:49:42.800
> 
> 标签：powerbuilder, powerbuilder-build-deploy, powerbuilder.net

我正在尝试在我们现有的一个 powerbuilder 应用程序中包含一个自定义图标。我可以通过构建一个包含资源文件的运行时库来做到这一点。

看起来我之前的开发人员没有这个问题，因为我不必为了部署代码更改而使用资源文件进行构建。

**使用资源文件构建运行时库有哪些替代方法？**我们正在使用 PowerBuilder 11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:19:00.730

如果您只想包含一个图标，则无需构建特定的`.pbd`.

在与部署项目关联的资源文件中提及您的图标文件`.pbr`（在第一个选项卡设置中，您可以在其中选择生成 pcode 或机器代码）。它将直接包含在`.exe`.

# image - 链接 tt_news 中的图像

> ID：12497226
> 
> 赞同：0
> 
> 时间：2012-09-19T14:49:51.880
> 
> 标签：image, hyperlink, typo3, tt-news

我正在使用 TYPO3 4.2.8 和 tt_news 2.5.2。我尝试了以下[代码段](http://typo3.org/documentation/snippets/sd/240/)：

```
plugin.tt_news.displaySingle {
    image {
        # turn off default popup anchor
        imageLinkWrap = 0
        # add our link to the first URL in links field
        stdWrap.typolink {
            parameter = {current:1}
            parameter {
            setCurrent.field = links
            setCurrent.listNum = 0
                insertData = 1
        }
        }
    }
} 
```

然后我在我的新闻中添加了一张图片，并在链接字段中添加了一个链接（在标签关系中）。

```
<LINK http://www.yourwesite.com/fileadmin/user_upload/downloads/broschure.pdf _blank>Download brochure</LINK> 
```

但是，如果我查看新闻，则图像上没有链接。我必须更改哪些内容才能使其与旧版本的 tt_news 一起使用？

**编辑：**

现在我用 gernericmarkers 尝试了它（来自[这个主题](http://www.typo3forum.net/forum/news-tt_news-mininews-co/51541-tt_news-bilder-verlinken.html)的想法）。我的 TS 如下所示：

```
temp.img = COA
temp.img.5 = IMAGE
temp.img.5 < plugin.tt_news.displaySingle.image
temp.img.5 {
    required = 1
    wrap = |
    file {
        import = uploads/pics/
        import.field = image
        import.listNum = 0
    }
    titleText.field = title
    altText.field = title
    if.isTrue.field = links
    imageLinkWrap.typolink.parameter.data = field:links
}

plugin.tt_news.genericmarkers.imagewithlink < temp.img 
```

标记正在工作，但新闻中没有显示内容。我的 TS 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:30:56.560

我不知道这是否适用于您的旧 tt_news 版本，但至少从版本 3.0+ 开始，您可以简单地使用`<!--###LINK_ITEM###--> around your image <!--###LINK_ITEM###-->`模板中的标记将您喜欢的任何内容链接到详细信息页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:00:37.887

您的第一个片段有效，但您必须将不带标签的链接插入链接字段。例如

```
http://www.yourwesite.com/fileadmin/user_upload/downloads/broschure.pdf _blank 
```

# perl - 如何使包从一开始就用零填充数据？

> ID：12497243
> 
> 赞同：3
> 
> 时间：2012-09-19T14:50:47.420
> 
> 标签：perl, hex, pack

我[`pack / unpack`](http://perldoc.perl.org/functions/pack.html)在 perl 中使用将十六进制值转换为十进制，如下所示：

```
print unpack "S", reverse pack "H4", "1230";
> 4656 
```

一切都很好，而数据是 4 个十六进制符号。如果数据长度不足以适应请求的格式包，则在末尾添加零。

像这样：

```
print unpack "b*", pack "H4", "FF";
> 1111111100000000 
```

它导致：

```
print unpack "S", reverse pack "H4", "123";
> 4656 
```

虽然我希望它与以下内容相同[`oct`](http://perldoc.perl.org/functions/oct.html)：

```
print oct("0x123");
> 291

print unpack "S", reverse pack "H4", "0123";
> 291 
```

**当数据长度不足以适应格式时，如何使包在数据的开头添加零？**

## 简短的常见问题解答

**你想做什么？** 我有一堆函数来处理不同类型的数据（`float`、`short`、`long`、`ushort`、`ulong`等）。所有转换都使用`pack`/完成`unpack`。需要这些函数来转换第三方生成的数据。

**为什么不使用`oct`or `hex`？** 因为我必须处理有符号整数和浮点数。而且我希望所有功能都相似，以便更好地理解代码。

**你能提供更多的例子吗？**他们来了：

**示例 1：**有符号短整数（接收到完整数据）。系统`018F`从第三方接收十六进制数据。该数据应为`signed short`，因此按以下方式处理：

```
print unpack "s", reverse pack "H4", "018F";
> 399 
```

**示例 2：**有符号短整数（接收到一半数据）。系统`8F`从第三方接收十六进制数据。`8F`只有1个字节，而形成短整数需要2个字节。处理方式相同：

```
print unpack "s", reverse pack "H4", "8F";
> -28928 
```

但第三方意味着`008F`不是`8F00`：

```
print unpack "s", reverse pack "H4", "008F";
> 143

print unpack "s", reverse pack "H4", "8F00";
> -28928 
```

**字节序呢？** 在所有示例中接收到的数据都是`big-endian`，而我的系统就是`little-endian`这样`reverse`使用的。

**你现在怎么处理？**我正在使用 sprintf 添加零。

```
print unpack "s", reverse pack "H4", sprintf "%04s", "8F";
> 143 
```

**你用的是什么版本的perl？**5.8.8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:03:45.727

您知道有一个将十六进制值转换为十进制的内置`hex`函数，不是吗？

```
$ perl -e 'print hex("123")'
291 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:28:03.910

如果问题只是字节序，请在解压缩模板中使用`<`and修饰符。`>`见[`perldoc -f pack`](http://search.cpan.org/perldoc?perlfunc#pack)。Perl 的设计者对这些问题并非一无所知：

```
print unpack "s", reverse pack "H4", "008F";
> 143        (on little-endian system)

print unpack "s>", pack "H4", "8F";
> 143 
```

# nlp - 如何使用 k-means (Flann with python) 对文档进行聚类？

> ID：12497252
> 
> 赞同：11
> 
> 时间：2012-09-19T14:51:13.160
> 
> 标签：nlp, cluster-analysis, data-mining, k-means, text-mining

我想根据相似性对文档进行聚类。

我已经尝试过 ssdeep （相似性哈希），速度非常快，但我被告知 k-means 更快，而 flann 是所有实现中最快的，而且更准确，所以我正在尝试使用 python 绑定的 flann，但我找不到任何示例如何在文本上执行（它只支持数字数组）。

我对这个领域非常陌生（k-means，自然语言处理）。我需要的是速度和准确性。

我的问题是：

1.  我们可以使用 KMeans 进行文档相似性分组/聚类吗（Flann 似乎不允许任何文本输入）
2.  弗兰是正确的选择吗？如果不是，请建议我支持文本/文档集群的高性能库，它具有 python 包装器/API。
3.  k-means是正确的算法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T14:55:13.593

您需要将文档表示为数字数组（又名向量）。有很多方法可以做到这一点，具体取决于您想要的复杂程度，但最简单的方法就是将其表示为字数的向量。

所以这就是你要做的：

1.  计算每个单词在文档中出现的次数。

2.  选择一组将包含在向量中的“特征”词。这应该排除非常常见的词（又名“停用词”），如“the”、“a”等。

3.  根据特征词的数量为每个文档制作一个向量。

这是一个例子。

如果您的“文档”是单个句子，并且它们看起来像（每行一个文档）：

```
there is a dog who chased a cat
someone ate pizza for lunch
the dog and a cat walk down the street toward another dog 
```

如果我的一组特征词是`[dog, cat, street, pizza, lunch]`，那么我可以将每个文档转换为一个向量：

```
[1, 1, 0, 0, 0]  // dog 1 time, cat 1 time
[0, 0, 0, 1, 1]  // pizza 1 time, lunch 1 time
[2, 1, 1, 0, 0]  // dog 2 times, cat 1 time, street 1 time 
```

你可以在你的 k-means 算法中使用这些向量，它希望将第一句和第三句组合在一起，因为它们很相似，并且使第二句成为一个单独的集群，因为它非常不同。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T18:04:19.690

这里有一个大问题：

**K-means 是为欧几里得距离设计的。**

关键问题是均值函数。均值将减少欧几里得距离的方差，但对于不同的距离函数可能不会这样做。所以在最坏的情况下，k-means 将*不再收敛，而是在无限循环中运行*（尽管大多数实现支持在最大迭代次数处停止）。

*此外，对于稀疏*数据，均值不是很敏感，文本向量往往*非常*稀疏。粗略地说，问题在于大量文档的*均值将不再看起来像真实文档，并且这种方式变得与任何真实文档不同，而与其他均值向量更相似。*所以结果在某种程度上退化了。

对于文本向量，您可能需要使用不同的距离函数，例如余弦相似度。

当然，您首先需要计算数字向量。例如，通过使用相对词频，通过**TF-IDF**对其进行归一化。

k-means 有一个变体，称为**k-medoids**。它可以使用任意距离函数，并且通过使用对集群最核心的*真实*文档（“medoid”）来避免整个“平均”事情。但是已知的算法比 k-means 慢得多。

# jquery - Flexslider 和从右到左的语言支持

> ID：12497255
> 
> 赞同：8
> 
> 时间：2012-09-19T14:51:20.303
> 
> 标签：jquery, flexslider, right-to-left

我在 WordPress 上安装了一个包含 Flexslider 的模板。我的语言是从右到左 (RTL) 编写的。当页面为 RTL 时，Flexslider 停止并且没有图像出现。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T08:36:00.610

flex 滑块不支持 rtl 语言。修复它的唯一方法是让 div 持有滑块`direction: ltr`

1.  在您的主题上，如果主页上的滑块找到一个名为 index.php 的文件，则找到包含滑块的 div 以及所有这些代码， `style="direction:ltr;"` 这将完美地在滑块上​​显示您的文章

2.  `.flexslider .slides > li{`要从 rtl 修复文本方向，请在您的主题和包含代码的行（我的第 25 行）上找到一个名为 flexslider.css 的文件， 添加以下内容：
    `text-align:right;
    direction:rtl;`

这两个步骤为我修复了它。祝你好运

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-02T02:18:10.343

fatma的回答对我不起作用。有效的是`.flex-viewport`通过设置修改`direction: ltr`：

```
.flex-viewport { max-height: 2000px; -webkit-transition: all 1s ease; -moz-transition: all 1s  ease; transition: all 1s ease; direction: ltr; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-10T14:29:56.523

您需要同时更改 JS 和 CSS 才能使其正常工作。幸运的是，它不需要太多的工作。我分叉了项目并在[https://github.com/layalk/FlexSlider/tree/rtl](https://github.com/layalk/FlexSlider/tree/rtl)添加了支持。试试看。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T22:20:58.467

要修复定向导航，您自己的样式表中的这些规则应该覆盖 flexslider 规则：

```
/* Flexslider RTL */
.flex-direction-nav .flex-next {background-position: 0 0; left: -36px; right: auto;}
.flex-direction-nav .flex-prev {background-position: 100% 0; right: -36px; left: auto;}
.flexslider:hover .flex-next {left: 5px; right: auto;}
.flexslider:hover .flex-prev {right: 5px; left: auto;}
@media screen and (max-width: 860px) {
  .flex-direction-nav .flex-prev {opacity: 1; right: 0; left: auto;}
  .flex-direction-nav .flex-next {opacity: 1; left: 0; right: auto;}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-25T05:41:28.710

我`reverse:true,`在`flexslider()`函数中使用，滑块的工作方向与默认值相反。

和

```
.flexslider .slides li{
    direction: ltr;
} 
```

它对我有用。

# ldap - LDAP 服务器 - 用法

> ID：12497256
> 
> 赞同：0
> 
> 时间：2012-09-19T14:51:31.003
> 
> 标签：ldap

我知道 LDAP 服务器（或目录服务或目录）在面向对象的数据库中存储信息（主要用于存储用户信息）。

它只是一个“用户商店”吗？并且可以使用 LDAP API 或“服务器中的 LDAP 配置”进行用户身份验证和获取用户信息...

除了存储用户信息之外，LDAP 本身还提供任何其他功能吗？喜欢安全配置？策略配置？等等

如果使用关系数据库（比如 Oracle）来存储用户信息，性能会有多差？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:06:45.847

实际上，较新版本的 OpenLDAP 仅将其配置存储在其内部，如果尚未删除经典文本配置文件，则会被折旧。此功能在 OpenLDAP 中称为 cn=config [ [http://www.openldap.org/doc/admin24/slapdconf2.html#cn=config](http://www.openldap.org/doc/admin24/slapdconf2.html#cn=config)]。您可能正在考虑的是动态 ACI（不要与也提供的 ACL 混淆），当然，通常 LDAP 提供了很多类似的功能。还提供了监控后端，通常 LDAP 喜欢它自己，并被驱动到自我管理的方向。但是，它的目的与 RDBMS 完全不同，它针对搜索操作进行了优化，但不是对数据进行操作和计算。以这种方式思考 - 例如，用户信息或 DNS 信息的检索次数比修改次数要多得多，这就是 ldap 发挥作用的领域。您实际上很少需要对 UserID 求和，不是吗？:) 面向对象的数据库意味着 - 与 RDBMS 相反 - 数据以更接近 OO 类型（类、属性、继承等）的方式组织。

在此处查看 OpenLDAP 管理指南

[http://www.openldap.org/doc/admin24/](http://www.openldap.org/doc/admin24/)

关于存储自定义信息，您可以通过继承/组合现有实体或从头开始创建自己的类、对象甚至属性类型。天空是极限，伙计;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:14:29.857

LDAP 目录服务器存储`attributes`分组在 中的数据`entries`。条目中需要或允许哪些属性由称为 的属性定义`objectClass`。每个属性类型都有一个属性定义在`schema`. 属性类型定义有 a `syntax`，它定义了允许的数据类型，可能是 a`matching rule`和/或`ordering rule`定义如何比较属性值，以及描述属性的其他数据。任何类型的数据都可以存储在目录服务器数据库中，包括二进制数据。大多数情况下，目录服务器用于身份验证和配置文件信息。像 OpenLDAP 这样的传统目录服务器在更新（ADD、MOD、DELETE、MODRDN）方面的性能不如在身份验证或搜索方面，但更现代的服务器以非常高的速率执行更新。

# maven - maven 发布，动态插值变量，但不将替换保存到文件中

> ID：12497257
> 
> 赞同：0
> 
> 时间：2012-09-19T14:51:31.207
> 
> 标签：maven, runtime, interpolation, maven-release-plugin, maven-scm

在我们的 POM 文件中，我们有 scm 部分，我们在其中定义了 cvs 存储库的 url，包括来自环境设置的当前系统用户的变量。

```
<developerConnection>scm:cvs:pserver:${env.CVS_USER}@servercvs01:/path/to/cvs/project:module</developerConnection> 
```

现在的问题是，如果我执行 maven 目标 release:prepare 变量将使用当前用户进行插值（这通常很好）但是当执行结束时，我最终会得到一个 POM 文件，其中不仅`versionString`更新了（也很好），但`${env.CVS_USER}`变量也会被当前用户替换。如果我现在想因为更改的版本字符串而自动签入更改的 POM 文件，我也会突然签入绝对用户信息，这对其他用户没有任何意义。

所以我的问题是，为什么 maven 中的变量插值不仅仅在 RUNTIME 上起作用，而是让 POM 文件变量声明保持不变，这样唯一的变化就是`versionString`这个用例中的 ！

# git - 使用 EGit（类似 FTP）将更改从 Eclipse PDT 推送到生产服务器

> ID：12497261
> 
> 赞同：8
> 
> 时间：2012-09-19T14:51:37.840
> 
> 标签：git, sftp, egit, eclipse-pdt

我对 Git 完全陌生，所以我认为使用 EGit 会更幸运，因为我使用的是 Eclipse PDT。我是该项目中唯一的程序员。这就是我现在正在做的事情：

1.  我的本地机器和服务器上有两个相同的网站副本
2.  我正在更改本地版本、测试、调试等。
3.  当我对代码感到满意时，我打开 FileZilla 并上传我更改的每个文件

我想做的是： ... 3\. 提交更改 4\. 将更改的文件（我拖到 Staged Changes 的文件）推送到生产服务器

所以，这看起来是一个非常简单的请求。我不想在服务器上安装 Git，在服务器上安装 .git 文件夹等。我只想将新的和更改的文件推送到服务器，覆盖那些已经在服务器上的文件。我想这是可能的，因为当我右键单击项目并转到团队 > 远程 > 推送...时，协议有一个 sftp 选项。

我怎样才能做到这一点？我提到的表单上的输入（团队 > 远程 > 推送...）是什么样的？还是我错了，我必须在服务器上安装 Git？

EGit 可以用作 SFTP 客户端吗？

我对 Git 的唯一了解来自本教程：[http](http://www.vogella.com/articles/EGit/article.html) ://www.vogella.com/articles/EGit/article.html 。我已经搜索过 StackOverflow，但每个主题都是“特定于 Git”的方式，而且超出了我的知识范围，所以我不了解其中的大部分内容。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T16:46:56.660

我不确定它是否会起作用，但也许您可以使用导出功能（文件->导出->远程系统->远程文件系统）。我认为要使用此功能，您必须安装 RSE（远程系统资源管理器）。这应该导出干净的项目，没有 .git 文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-02T01:43:20.873

您看到的 sftp 协议只是 git 连接到另一台具有 git 存储库的计算机的协议。所以没有运气。

仅使用 git 命令无法实现该工作流程。当创建一个称为*裸*存储库的 git 服务器时，文件系统上的布局并不反映项目的文件，而是 git 的内部结构。因此，当您将更改推送到裸存储库时，您确实将文件发送到它，但为了“查看”这些文件，您需要克隆它。

执行第 3 步的最简单方法是创建一个脚本以使用 ftp 上传文件，而不是手动执行该过程。所以服务器上不需要 git 裸存储库。

还有其他不错的工作流程涉及在服务器上安装 git 仅供参考。

# maven - 如何为 maven 指定特定的 jdk 版本来构建我的项目？

> ID：12497262
> 
> 赞同：1
> 
> 时间：2012-09-19T14:51:40.117
> 
> 标签：maven

我的问题是：测试用例在本地是绿色的，但是由于不支持 jdk 版本，一些在 hudson 服务器上失败了。本地是ibm jdk1.6 sr4 windows，但是hudson server安装了ibm jdk1.6 sr9 linux。“此 Java 虚拟机不支持与 Blaze Advisor 一起使用，因为 java.beans.Introspector 的实现未能通过验证。”

有人告诉我 Hudson 服务器不能更改为其他 jdk，所以我认为有什么办法可以绕过这些故障吗？我可以告诉 maven 用特定的 jdk 编译项目吗？就像，1.6 版本带有 sr4，而不是 sr9。另外我需要 maven 下载 sr4 作为依赖，因为服务器上没有这个版本。

当我搜索时，似乎很难做到这一点。那么我还有什么选择呢？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:46:16.607

Maven 应该从 JAVA_HOME 中指定的 java 开始，如果你需要使用不同的版本，我会使用工具链插件来运行你指定的 jdk 版本的构建。不过，这将要求该版本已安装在服务器上。

[http://maven.apache.org/guides/mini/guide-using-toolchains.html](http://maven.apache.org/guides/mini/guide-using-toolchains.html)

您需要将插件添加到您的 pom 并添加一个 toolchains.xml 文件。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-toolchains-plugin</artifactId>
    <version>1.0</version>
    <executions>
      <execution>
        <phase>validate</phase>
        <goals>
          <goal>toolchain</goal>
            </goals>
      </execution>
    </executions>
    <configuration>
      <toolchains>
        <jdk>
          <version>1.5</version>
          <vendor>sun</vendor>
        </jdk>
      </toolchains>
    </configuration>
  </plugin> 
```

toolchains.xml 文件添加到 .m2 文件夹，该文件夹指定 jdk 的安装位置

```
<?xml version="1.0" encoding="UTF8"?>
<toolchains>
  <toolchain>
     <type>jdk</type>
     <provides>
         <version>1.5</version>
         <vendor>sun</vendor>
         <id>default</id>
     </provides>
     <configuration>
        <jdkHome>/path/to/jdk/1.5</jdkHome>
     </configuration>
  </toolchain> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:03:00.800

你确定吗？Hudson 应该支持切换 JDK，我已经在 J​​enkins 中完成了。在最坏的情况下，您可以在 Hudson 构建中指定 JAVA_HOME 环境变量。在maven里面是不可能改的，因为maven本身需要JDK启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:36:51.557

您可以在您的`maven-compiler-plugin`

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin> 
```

您还可以使用配置文件`-P`根据环境设置版本。

# sql - Oracle 期初余额和期末余额 - 需要 SQL 还是 PL/SQL？

> ID：12497274
> 
> 赞同：0
> 
> 时间：2012-09-19T14:52:28.460
> 
> 标签：sql, oracle

```
 select year, 
        month ,
        d.PROD_ID, 
        T.CUSTOMER_ID,
        SUM(CASE WHEN D.OP_TYPE = 1 THEN d.qty END)    EARNED,
        SUM(CASE WHEN D.OP_TYPE = 2 THEN d.qty END)    SPEND
FROM TXN_HEADER T  , 
     TXN_DETAIL d , 
     CUSTOMER A,
     PRODUCT e 
WHERE T.AMOUNT > 0 
AND   A.TYPE  =  0
AND   T.CUSTOMER_ID = A.CUSTOMER_ID
AND   T.TXN_PK = D.TXN_PK 
and   d.PROD_ID = e.PROD_ID
and   e.unit = 0
group by year, month ,d.PROD_ID, T.CUSTOMER_ID
ORDER BY 1,2,3,4 
```

输出如下（此处打开和关闭不是由查询生成的，但我要求必须来自查询）

```
YEAR MONTH PROD CUSTOMER OPENING EARNED SPEND CLOSING 
---- ----- ---- -------- ------- ------ ----- -------
2012     8  548    12033       0      8     2       6
2012     9  509    12033       0     24     0      24
2012     9  509    12047       0     14     0      14
2012     9  548    12033       6      1     0       7
2012     9  548    12047       0      1     0       1 
```

我需要生成上述输出。在这里，PROD_ID，CUSTOMER_ID 明智地动态地将上一个期末余额填充为期初，它应该按月计算期末余额（期初+收入支出），明智的客户，明智的产品。是否可以用 SQL 编写或需要使用 PL/SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:49:26.273

我会使用分析，在分区子句中使用 PROD_ID 和 CUSTOMER_ID 以避免混淆产品和客户。

```
WITH
MONTHLY_BALANCE AS
(
  SELECT
    YEAR,
    MONTH,
    D.PROD_ID,
    T.CUSTOMER_ID,
    SUM(CASE WHEN D.OP_TYPE = 1 THEN D.QTY ELSE NULL END) EARNED,
    SUM(CASE WHEN D.OP_TYPE = 2 THEN D.QTY ELSE NULL END) SPEND,
  FROM TXN_HEADER T
  JOIN CUSTOMER A 
  ON    T.CUSTOMER_ID = A.CUSTOMER_ID
  JOIN TXN_DETAIL D
  ON    T.TXN_PK = D.TXN_PK
  JOIN PRODUCT E
  ON    D.PROD_ID = E.PROD_ID
  WHERE T.AMOUNT > 0
  AND   A.TYPE = 0
  AND   E.UNIT = 0
  GROUP BY YEAR, MONTH, D.PROD_ID, T.CUSTOMER_ID
)
SELECT
  YEAR,
  MONTH,
  PROD_ID,
  CUSTOMER_ID,
  SUM(NVL(EARNED, 0) - NVL(SPEND, 0)) OVER(PARTITION BY PROD_ID, CUSTOMER_ID ORDER BY YEAR, MONTH ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING) OPENING,
  EARNED,
  SPEND,
  SUM(NVL(EARNED, 0) - NVL(SPEND, 0)) OVER(PARTITION BY PROD_ID, CUSTOMER_ID ORDER BY YEAR, MONTH ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT_ROW) CLOSING
FROM MONTHLY_BALANCE
ORDER BY 1, 2, 3, 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:57:35.917

您`CASE`需要一个`ELSE`

```
CASE WHEN D.OP_TYPE = 1 THEN d.qty ELSE 0 END 
```

如果没有 else ，当不等于和 any+ =时`CASE`将返回。当您不满意时，它会返回，这就是为什么您看不到这些列的任何内容。`NULL``D.OP_TYPE``1``NULL``NULL``WHEN``NULL`

要计算 OPENING 和 CLOSING，您可能需要使用和之类的[分析函数](http://www.oracle-base.com/articles/misc/lag-lead-analytic-functions.php)。`LEAD``LAG`

```
Select year,month,prod_id,customer_id,
       LAG(closing,1,0) OVER (order by year,month,prod_id,customer_id) as opening,
       earned,spend
      ,(LAG(closing,1,0) OVER (order by year,month,prod_id,customer_id)+closing) as closing
from (WITH temp AS (select year, 
                           month ,
                           d.PROD_ID, 
                           T.CUSTOMER_ID,
                           0 OPEN,
                          SUM(CASE WHEN D.OP_TYPE = 1 THEN d.qty END)    EARNED,
                          SUM(CASE WHEN D.OP_TYPE = 2 THEN d.qty END)    SPEND,
                          0 CLOSE
                     FROM TXN_HEADER T  , 
                          TXN_DETAIL d , 
                          CUSTOMER A,
                          PRODUCT e 
                    WHERE T.AMOUNT > 0 
                      AND   A.TYPE  =  0
                      AND   T.CUSTOMER_ID = A.CUSTOMER_ID
                      AND   T.TXN_PK = D.TXN_PK 
                      and   d.PROD_ID = e.PROD_ID
                      and   e.unit = 0
                     group by year, month ,d.PROD_ID, T.CUSTOMER_ID
                     ORDER BY 1,2,3,4)
   SELECT year,month,prod_id,customer_id,open,earned,spend,(open+earned-spend) as closing
     from temp); 
```

# vb.net - VB中的模除法

> ID：12497275
> 
> 赞同：0
> 
> 时间：2012-09-19T14:52:30.457
> 
> 标签：vb.net, visual-studio-2010

我对此感到有些不知所措。我的代码的问题和开头如下。有人能告诉我这是否走在正确的轨道上吗？如果没有，你能帮忙吗？任何建议表示赞赏。先感谢您。（这不是我的最终代码，只是问题的开始）。

客户需要特定数量的纸张。单张纸的费用为 0.10 美元，100 张的倍数为每张 0.055 美元，500 张的倍数为每张 0.04 美元，1000 张的倍数为每张 0.03 美元。考虑到客户需要的纸张数量，开发一种解决方案来计算客户应该购买的最少金额的包裹类型和数量。例如，如果客户需要 380 张，则购买 100 的倍数时她将支付的金额为 22.00 美元。但是，如果客户购买了 500 张，则成本为 20.00 美元。因此，客户购买一包 500 张的价格合算。（提示：使用模除法 (Mod) 求除法的余数）。

```
Imports System

Module Paper

    Sub Main()

      Dim Name as String
      Dim OrderNumber as String
      Dim Paper as Integer
      Dim Thousandpaper as Integer
      Dim FiveHundredPaper as Integer
      Dim FirstCut as Integer
      Dim SecondCUt as Integer

      'User Input Begins Here:
      Console.WriteLine("Hello! What is your name?")
      Name = console.readline()

      Console.WriteLine("Please enter a order number:")
      OrderNumber = console.readline()

      Console.WriteLine("Finally ,how much paper would you like?")
      Paper = console.readline()

      If (Paper > 1000)
        Thousandpaper = (Paper / 1000)
      End If

      If (Thousandpaper) > Paper Then
        GoTo 44
      End If

      FirstCut = (Paper mod 1000)

      If (FirstCut > 500)
        FiveHundredPaper= (FirstCut / 500)
      End If

      SecondCut = (FirstCut / 500)      

      44: Console.WriteLine("1000 paper pack:")
      Console.WriteLine(Thousandpaper)      
      Console.WriteLine("500 paper pack:")
      Console.WriteLine(FirstCut)                  

    End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T14:56:53.127

让我给你一些一般性的提示：

1.  VB.NET 中的模数是使用[Mod](http://msdn.microsoft.com/en-us/library/se0w9esz.aspx)运算符完成的。这回答了您标题中的问题，但不会帮助您解决当前的问题。
2.  停止编码。拿一张纸，试着从数学的角度来解决这个问题。尝试为问题陈述中要求的优化找到一个算法（在伪代码中）。
3.  只有当你有了你的算法*并且*你相当确定它是正确的之后，才开始用你选择的语言（VB.NET）来实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:28:25.233

**编辑**

首先从@Heinzi 的回答中获取建议是有道理的。我只能对“自上而下”的方法做出明智的尝试，因为我已经了解核心算法的结构。

* * *

这是一些面向对象的方法，可以帮助您入门。

```
Public Structure PaperPackage
    Public Size As Integer
    Public PricePerSheet As 
End Structure

Dim availablePackages = New List(of PaperPackage) _
    { _
        New PaperPackage With { .Size = 1000, .PricePerSheet = 0.03 }, _
        New PaperPackage With { .Size = 500, .PricePerSheet = 0.04 }, _
        New PaperPackage With { .Size = 100, .PricePerSheet = 0.055 }, _
        New PaperPackage With { .Size = 1, .PricePerSheet = 0.1 } _
    } 
```

然后你可能想写一个带有这样签名的函数，

```
Public Shared Function CheapestPaperChoices( _
    availableChoices As IList(of PaperPackage), _
    requiredSheets As Integer) As IDictionary(Of PaperPackage, Integer) 
```

这将返回一个`IDictionary`包含所需的每个纸包和`Integer`数量的计数。

为了提供更多帮助，您可能会发现，如果您编写函数，

```
Public Structure PackagesThatFitResult
    Public Quantity As Integer
    Public NewRemainingSheets As Integer 
End Structure

Private Shared Function PackagesThatFit( _
    remainingSheets As Integer, _
    package As PaperPackage) As PackagesThatFitResult 
```

你可以在我上面指定的函数中迭代地调用它。

只是最后一个警告，您可能会发现购买更大的包装是值得的，如果说，您的最后剩余部分是 49 张。

# php - php下载不在浏览器中显示进度

> ID：12497278
> 
> 赞同：2
> 
> 时间：2012-09-19T14:52:42.347
> 
> 标签：php

我对 php 管理的文件下载有问题，其中浏览器不显示文件下载的进度。实际上，浏览器似乎在等待，等待，等待，直到文件完全下载。然后该文件将出现在下载列表中（使用 chrome 和 firefox）。我什至无法用 IE8 下载文件。我希望浏览器显示实际文件大小和下载进度。

奇怪的是，下载甚至在 firebug 中都不可见（如果您粘贴下载 url，网络选项卡中不会出现任何行）。

我怀疑压缩/zlib 有问题，所以我禁用了两者：没有变化。我以相同的结果禁用了输出缓冲。

现场示例可以在这里找到：http: [//vps-1108994-11856.manage.myhosting.com/download.php](http://vps-1108994-11856.manage.myhosting.com/download.php) Phpinfo：http: [//vps-1108994-11856.manage.myhosting.com/phpinfo.php](http://vps-1108994-11856.manage.myhosting.com/phpinfo.php)

代码如下，感谢您的帮助。

```
<?php

$name = "bac.epub";
$publicname = "bac.epub";

@apache_setenv('no-gzip', 1);
ini_set("zlib.output_compression", "Off");

header("Content-Type: application/epub+zip");
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Transfer-Encoding: binary");
header("Content-Length: " . filesize($name));
header("Content-disposition: attachment; filename=" . $publicname) );
ob_end_flush();
flush();
// dump the file and stop the script
$chunksize = 1 * (128 * 1024); // how many bytes per chunk
$size = filesize($name);
if ($size > $chunksize) {
  $handle = fopen($name, 'rb');
  $buffer = '';
  while (!feof($handle)) {
    $buffer = fread($handle, $chunksize);
    echo $buffer;
    ob_flush();
    flush();
    sleep(1);
  }
  fclose($handle);
} else {
  readfile($name);
}
exit; 
```

代码中的休眠是为了确保下载足够长以查看进度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T07:54:46.507

```
 header("Content-Type: application/epub+zip");
            header("Pragma: public");
            header("Expires: 0");
            header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
            header("Cache-Control: public");
            header("Content-Description: File Transfer");
            header("Content-Transfer-Encoding: binary");
            header("Content-Length: " . filesize($file_path));
            header("Content-disposition: attachment; filename=" . $local_file_name);

            // dump the file and stop the script
            $chunksize = 128 * 1024; // how many bytes per chunk (128 KB)
            $size = filesize($file_path);
            if ($size > $chunksize)
            {
                $handle = fopen($file_path, 'rb');
                $buffer = '';
                while (!feof($handle))
                {
                    $buffer = fread($handle, $chunksize);
                    echo $buffer;
                    flush();
                    sleep(1);
                }
                fclose($handle);
            }
            else
            {
                readfile($file_path);
            } 
```

* * *

我已经修改了你的代码 Francis。现在它可以工作了...... :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:02:43.617

保持它，真的，真的，简单。

```
<?php

header("Content-Type: application/epub+zip");
header("Content-disposition: attachment; filename=" . $publicname) );

if(!readfile($name))    
    echo 'Error!';
?> 
```

这就是你真正需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T23:49:07.103

这可能是由您和远程站点之间的防火墙或某种代理引起的。我一直在努力解决同样的问题 - 禁用 gzip、刷新缓冲区等，直到我在 Web VPN 下尝试它并且进度指示器重新出现。

我不认为进度指示器有问题 - 只是内容在到达您之前被禁运，这在下载中显示为等待状态。然后，当内容被扫描或批准时，相对于您网站的正常下载速度，它可能会很快下降。对于足够大的文件，也许您可​​以在此阶段看到进度指示器。

除了确定这是否是这种行为的真正原因之外，您无能为力。

# javascript - 在 YUI3 日历中使用多个 disabledDatesRule

> ID：12497284
> 
> 赞同：0
> 
> 时间：2012-09-19T14:53:19.193
> 
> 标签：javascript, yui

我正在加载一个动态阻止日期的日历，从数据源中提取它们。问题是，我不能设置多个 disabledDatesRules。它是一个或另一个。这似乎有点愚蠢，根本没有帮助，尤其是在设置规则的方式上。我无法想象是这样，所以我想知道是否有人知道如何使用多个 disabledDatesRule。例如，

```
 var settings = {
       contentBox: "#calendar",
       width:'340px', 
       selectionMode: 'multiple',
       date: new Date()
     };
    var dtdate = Y.DataType.Date;
    var rules = {};
    rules[dYear] = {}
    rules[dYear][dMonth] = {}
    rules[dYear][dMonth][dWeek] = {}
    rules[dYear][dMonth][dWeek][friday] = 'weekdays'
    rules[dYear][dMonth][Weeks] = 'Weeks'
    settings.disabledDatesRule = 'Weeks','weekdays';
    var calendar = new Y.Calendar(settings).render(); 
```

我在任何地方都没有看到任何帮助。我已经看到如何使某些日期更漂亮，但这对我没有丝毫帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:11:05.737

I am the creator of the YUI 3 calendar, and just confirming that your solution is correct -- you can have multiple different rules with the same name, and they will all match.

There's going to be more flexible ways to define rules coming up in the next couple releases, too.

# jquery - 应用查找类型的设置时，Jquery SelectBox CSS 不起作用

> ID：12497285
> 
> 赞同：0
> 
> 时间：2012-09-19T14:53:20.490
> 
> 标签：jquery, drop-down-menu

我正在使用 Claviska Jquery Selectbox，我已经在他的 Github 上发布了一个问题，但还没有收到回复，我没有太多时间来解决这个问题，所以我希望其他人可以提供帮助我用这个。我需要选择查找类型 - 您可以在其中滚动选择菜单，具体取决于您选择的字母。但是当我为此应用设置时，CSS 就停止工作了。

这是要查找的类型的代码：

```
$(document).ready( function() {
    $("SELECT").selectBox('settings', {
        'loopOptions': 'boolean'
    });
}); 
```

这是原始代码：

```
$(document).ready( function() {
    $("SELECT").selectBox();
}); 
```

CSS 或表单没有什么特别之处，它只是一个非常基本的状态搜索。但无论如何，它就在这里。HTML表格：

```
<select name="state" id="state" class="selectBox-dropdown" tabindex="7">
<option value="" selected>&nbsp;</option>
<option value="AL" >Alabama</option>
<option value="AK" >Alaska</option>
<option value="AZ" >Arizona</option>
<option value="AR" >Arkansas</option>
<option value="CA" >California</option>
<option value="CO" >Colorado</option>
<option value="CT" >Connecticut</option>
<option value="DE" >Delaware</option>
<option value="DC" >District Of Columbia</option>
<option value="FL" >Florida</option>
<option value="GA" >Georgia</option>
<option value="GU" >Guam</option>
<option value="HI" >Hawaii</option>
<option value="ID" >Idaho</option>
<option value="IL" >Illinois</option>
<option value="IN" >Indiana</option>
<option value="IA" >Iowa</option>
<option value="KS" >Kansas</option>
<option value="KY" >Kentucky</option>
<option value="LA" >Louisiana</option>
<option value="ME" >Maine</option>
<option value="MD" >Maryland</option>
<option value="MA" >Massachusetts</option>
<option value="MI" >Michigan</option>
<option value="MN" >Minnesota</option>
<option value="MS" >Mississippi</option>
<option value="MO" >Missouri</option>
<option value="MT" >Montana</option>
<option value="NE" >Nebraska</option>
<option value="NV" >Nevada</option>
<option value="NH" >New hampshire</option>
<option value="NJ" >New jersey</option>
<option value="NM" >New mexico</option>
<option value="NY" >New york</option>
<option value="NC" >North carolina</option>
<option value="ND" >North dakota</option>
<option value="OH" >Ohio</option>
<option value="OK" >Oklahoma</option>
<option value="OR" >Oregon</option>
<option value="PW" >Palau</option>
<option value="PA" >Pennsylvania</option>
<option value="PR" >Puerto Rico</option>
<option value="RI" >Rhode Island</option>
<option value="SC" >South Carolina</option>
<option value="SD" >South Dakota</option>
<option value="TN" >Tennessee</option>
<option value="TX" >Texas</option>
<option value="UT" >Utah</option>
<option value="VT" >Vermont</option>
<option value="VI" >Virgin Islands</option>
<option value="VA" >Virginia</option>
<option value="WA" >Washington</option>
<option value="WV" >West Virginia</option>
<option value="WI" >Wisconsin</option>
<option value="WY" >Wyoming</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:11:55.020

```
$(document).ready( function() {
    $("SELECT").selectBox('settings', {
    loopOptions : true
   });
}); 
```

不要写 'Boolean' - 他们在示例中这样写是为了让您知道该值可以设置为 true 或 false

这个插件我没用过，不知道是要字符串 Boolean 还是实际 boolean ，两个都试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:24:01.073

我认为`loopOptions`不适合查找类型：

`loopOptions [boolean]`- 允许箭头键循环选项的标志

我没有在 claviska 的插件中找到解决方案，但我发现插件`Select2`可能适合您的需要，请参阅演示：http: [//ivaynberg.github.com/select2/#placeholders](http://ivaynberg.github.com/select2/#placeholders)

# android - 如何使用 ORMLite 更新列

> ID：12497287
> 
> 赞同：19
> 
> 时间：2012-09-19T14:53:25.407
> 
> 标签：android, sqlite, ormlite

我已经为 Android 应用程序创建了一个数据库，并且正在使用 ORMLite 来查询 SQLLite。

我在类别中添加了一列，我想在该列中插入数据。我有行，例如

```
catId=5 catname="food" catType=? 
```

我想`catType`在`catId`. 如何使用ORMLite 中`catType`的更新此列。`catId`

我正在使用这种方法：

```
Dao<Category, Integer> catDao = getHelper().getCategoryDao();
QueryBuilder<Category, Integer> queryBuilder = catDao.queryBuilder();
queryBuilder.where().eq("categoryId", 5);
PreparedQuery<Category> pq = queryBuilder.prepare();
Category category = catDao.queryForFirst(pq);
category.setCategoryType("BarType");
catDao.createOrUpdate(category); 
```

请给我一个更好的解决方案。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-09-21T12:33:49.547

> 我想在catId的基础上更新catType。如何使用 ORMLite 中的 catId 更新此 catType 列。

[ORMLite](http://ormlite.com/)还支持[`UpdateBuilder`](http://ormlite.com/docs/update-builder). 以下是您可以使用它的方法：

```
UpdateBuilder<Category, Integer> updateBuilder = catDao.updateBuilder();
// set the criteria like you would a QueryBuilder
updateBuilder.where().eq("categoryId", 5);
// update the value of your field(s)
updateBuilder.updateColumnValue("catType" /* column */, "BarType" /* value */);
updateBuilder.update(); 
```

有关更多示例，请参阅[`UpdateBuilder`文档](http://ormlite.com/docs/update-builder)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-02T12:08:42.180

```
Dao<Category, Integer> catDao = getHelper().getCategoryDao();
List <Category> categoryList = catDao.queryForAll();
for (Category c: categoryList ) {
    c.setCategoryType("BarType");
    catDao.update(c);
} 
```

# javascript - 使用 JQuery 添加“活动”类当前菜单项

> ID：12497289
> 
> 赞同：3
> 
> 时间：2012-09-19T14:53:36.323
> 
> 标签：javascript, jquery, html, css

对此有几个 SO 解决方案，但我没有任何运气让它们工作。JQuery 初学者试图通过一个解决方案在简单的导航菜单中将“活动”类添加到活动列表项：

```
 <div id="main-menu">

      <ul>
         <li><a href="/site/about">About Us</a></li>
         <li><a href="/site/work">Our Work</a></li>
         <li><a href="/site/contact">Contact Us</a></li>    
      </ul>

    </div> 
```

以前的 SO 帖子表明这有效，但到目前为止我还没有成功。我在 wordpress 中使用了漂亮的永久链接，因此任何页面的完整路径如下：

[http://www.foobar.com/site/about/](http://www.foobar.com/site/about/)

这是我到目前为止的工作：

```
<script>
$(function(){
    var url = window.location.pathname,
        urlRegExp = new RegExp(url.replace(/\/$/,''));    
        $('#main-menu li').each(function(){
            if(urlRegExp.test(this.href)){
                $(this).addClass('active');
            }
        });
});​
</script> 
```

我已经尝试了几种解决方案，包括更改我编写 href 的方式等。我真正模糊的代码部分是 urlRegExp 部分......有帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:54:45.103

尝试

```
 $('#main-menu li a').each(function(){
        if(urlRegExp.test(this.href)){

        ...
    }); 
```

代替

```
 $('#main-menu li').each(function(){
        if(urlRegExp.test(this.href)){
        ...
    }); 
```

因为`href`您在下一行查看的属性`this.href`应用于链接，而不是列表项

然后，如果您需要`active`在`<li>`元素上应用类，只需使用

```
 $(this).parent().addClass('active'); 
 // or  $(this).closest('li').addClass('active');
 // or pure-JS : this.parentNode.className += 'active'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:57:00.423

this.href 是错误的（应该是 $(this)，加上你正在检查列表元素，而不是 li。试试这个：

```
$('#main-menu li > a').each(function(){
        if(urlRegExp.test($(this).attr('href'))){
            $(this).addClass('active');
        }
    }); 
```

# javascript - 一段 JavaScript 破坏了另一段

> ID：12497291
> 
> 赞同：0
> 
> 时间：2012-09-19T14:53:57.193
> 
> 标签：javascript

该网站可以在这里找到：[http ://www.healthygit.com](http://www.healthygit.com)

基本上，当站点加载取决于我包含 javascript 的顺序时，取决于中断的内容，例如：

如果我首先包含菜单 JavaScript（如下），则菜单将不起作用，但图像滑块将起作用。

菜单 JS：

```
<script type="text/javascript" src="js/jquery.js"></script><!-- jQuery -->
<script type="text/javascript" src="js/jquery.easing.js"></script><!-- jQuery Easing   effects -->
<script type="text/javascript" src="js/megamenu_plugins.js"></script><!-- Mega Menu Plugins (scroller, form, hoverIntent) -->
<script type="text/javascript" src="js/megamenu.js"></script><!-- Mega Menu Script --> 
```

但是，如果我最后包含菜单文件，则菜单将起作用而滑块将不起作用，滑块文件是：

```
<script type="text/javascript" src="js/jquery.list-rotator.min.js"></script>
<script type="text/javascript" src="js/preview.js"></script> 
```

我得到的错误是：

```
ReferenceError: jQuery is not defined
...),delay:m(a(this).attr("delay"),bE),effect:r[a(this).attr("effect")]!=undefined?...

jquery....min.js (line 1) 
```

和

```
ReferenceError: $ is not defined

$(document).ready(

preview.js (line 1) 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:59:27.770

我在您的网页中注意到您最后放置了 jQuery。我觉得应该是第一。您是否按以下顺序尝试过：

```
<script type="text/javascript" src="js/jquery.js"></script><!-- jQuery -->

<script type="text/javascript" src="js/jquery.easing.js"></script><!-- jQuery Easing   effects -->
<script type="text/javascript" src="js/megamenu_plugins.js"></script><!-- Mega Menu Plugins (scroller, form, hoverIntent) -->
<script type="text/javascript" src="js/megamenu.js"></script><!-- Mega Menu Script -->

<script type="text/javascript" src="js/jquery.list-rotator.min.js"></script>
<script type="text/javascript" src="js/preview.js"></script> 
```

告诉我它是否有帮助。

# php - PHP/正则表达式。用 if within () 替换 ''

> ID：12497301
> 
> 赞同：-2
> 
> 时间：2012-09-19T14:55:04.023
> 
> 标签：php, regex

我似乎找不到一个正则表达式来执行以下操作。

我需要替换`（空格），`&nbsp;`但前提是它在括号内。`

 `例如

```
hello test('test some more') ; 
```

需要是

```
hello test('test&nbsp;some&nbsp;more') ; 
```

任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:06:52.590

好吧，从技术上讲，这可以用正则表达式完成：

```
$str = "hello test('test some more again') dads dasds ('and some more');";

$str = preg_replace('#(?<=\()([^)]+?) | (?=[^()]*\))#', '$1&nbsp;', $str);
var_dump($str); 
```

换句话说，我们在这里替换一个空格，该空格前面是`(`，但不是`(...)`，或者后面是`)`，但是，再次，不是`(...)`。

但是，问题是您是否应该对嵌套括号采取预防措施。`

# c++ - 线程监听UDP问题

> ID：12497302
> 
> 赞同：0
> 
> 时间：2012-09-19T14:55:07.820
> 
> 标签：c++, multithreading, udp

我的程序接收到一些 UDP 消息，每个消息都是由客户端通过鼠标单击发送的。该程序具有仅用于设置一些参数的主线程（GUI）和创建第二个线程，具有

```
CreateThread(NULL, 0, MyFunc, &Data, 0, &ThreadTd); 
```

即监听 UDP 数据包。这是 MyFunc：

```
... 
sd=socket(AF_INET, SOCK_DGRAM, 0);
if(bind(sd,(struct sockaddr *)&server,sizeof(struct sockaddr_in))==-1)
  ....
while(true){
bytes_received=recvfrom(sd,buffer,BUFFER_SIZE,0,(struct sockaddr *)&client,&client_length);
//parsing of the buffer
} 
```

为了证明没有丢包，如果我使用了一个简单的脚本来侦听客户端使用某个端口发送的 UDP 消息，则发送的所有数据包都被我的计算机接收。当我运行我的应用程序时，只要客户端第一次单击鼠标，就会收到 UDP 消息，但是如果我尝试发送其他消息（其他鼠标单击），服务器不会收到它们（就像他没有t 捕获它们）和客户端，用户必须在服务器捕获消息之前至少单击 2 次。主线程并不一直忙，第二个线程只解析传入的消息，增强了一些变量，我没有为线程分配任何优先级。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:47:39.463

除了 mark 的建议，您还可以使用 wireshark/netcat 查看数据报的发送时间/地点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:40:45.057

没有足够的信息知道为什么会出现丢包。在到达第一个 recvfrom 之前，接收线程是否可能存在延迟？调试跟踪可能会指明方向。我还假设 struct sockaddr 服务器在调用 bind() 之前填充了一些理智的东西？你没有展示那部分......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:01:20.383

这可能是与套接字编程有关的问题。我建议将调用`select()`或`epoll()`与调用合并到`recvfrom()`. 这是一种更标准的套接字编程方法。这样，UDP 服务器可以接收来自多个客户端的消息，并且不会无限期地阻塞。

此外，如果问题是客户端并不总是为每次点击发送一个数据包，或者服务器不总是以某种方式接收它们，您应该隔离。Wireshark 可以帮助查看何时发送数据包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T19:02:46.517

如果我正确理解了您的问题，您的线程服务器应用程序在快速突发发送时不会收到所有数据包。您可以尝试的一件事是增加服务器端的套接字接收缓冲区，这样当您的应用程序读取速度不够快时，可以将更多数据排队。看[`setsockopt`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740476%28v=vs.85%29.aspx)，使用`SO_RCVBUF`选项。

# php - Doctrine 1.2 水合物方法 - 数组到模型对象

> ID：12497310
> 
> 赞同：8
> 
> 时间：2012-09-19T14:55:30.653
> 
> 标签：php, doctrine, doctrine-1.2

`hydrate()`我对 Doctrine 模型方法有一点问题。我使用这种方法从给定的数组中水合一个具体模型的对象，如下所示：

```
$model = new Doctrine\Model\Model;
$model->hydrate($model_array); 
```

在没有嵌套子模型的情况下为简单对象补水时，一切都很完美。现在的问题是我需要水合（使用此方法）具有嵌套对象（其中一些也具有嵌套对象）的对象。

如果我使用`HYDRATE_RECORD`它会很好，但是查询中的所有记录都将作为对象返回，这意味着更多的内存消耗。因此，我正在使用`HYDRATE_ARRAY`并按需将该具体数组水合到一个对象中。

假设我有一个模型 A，它有嵌套模型 AB、AC（一对多），AD 和 AC 有另一个嵌套模型 ACE。在`print_r`A 数组之后，我们可以看到这个结构：

```
A Array (
    ...
    ab Array ( ... )
    ac Array (
        AC Array (
            ...
            ace Array ( ... )
        )
        AC Array (
            ...
            ace Array ( ... )
        )
        ...
    )
    ad Array ( ... )
) 
```

通常在使用水合物后，我会假设这将是我的目标：

```
A Object {
    ...
    ab Object { ... }
    ac Array (
        AC Object {
            ...
            ace Object { ... }
        }
        AC Object {
            ...
            ace Object { ... }
        }
        ...
    )
    ad Object { ... }
} 
```

但我得到的不是这个结构：

```
A Object {
    ...
    ab Array ( ... )
    ac Array (
        AC Array (
            ...
            ace Array ( ... )
        )
        AC Array (
            ...
            ace Array ( ... )
        )
        ...
    )
    ad Array ( ... )
} 
```

所以只有主模型被转换为对象。您知道如何将所有嵌套模型数组转换为预期结果的对象吗？

`HYDRATE_RECORD`不，查询数据库时我不能使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T23:54:00.510

如果偶然发现，请查看[文档](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/working-with-models.html#arrays-and-objects)。

你有没有尝试过`fromArray`而不是`hydrate`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:38:09.230

试图根据我的教义知识来回答这个问题，这并不多，因为我从未直接处理过水合作用。

使用数组作为水合方法的问题在于，您基本上会丢失所有附加到原始查询的元数据，最重要的是表名。

对此的解决方案可能是编写自己的水合方法，将数组转换回对象。

# c - 如果我只按 ENTER，在这样的 C 程序 [getchar()] 中会发生什么？

> ID：12497313
> 
> 赞同：-2
> 
> 时间：2012-09-19T14:55:36.290
> 
> 标签：c

这是代码：

```
char ch;
ch = getchar() ; 
```

如果我只按 Enter 而不输入任何其他字符，输入会是什么？如果可能解释为什么？

**编辑：**

我知道它输入了一个换行符，但我想知道为什么当我按'a'时输入'\n'它输入'a'？如果有任何列表显示 ENTER、SPACE.TAB 等的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:56:09.353

你会得到换行符 - `'\n'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:47:01.643

我可以假设您熟悉[ASCII](http://www.asciitable.com/)吗？

这就是你得到的。`getchar()`为您输入的任何字符返回一个整数 (ASCII) 值。例如，如果您有以下代码：

```
void main()
{
    char ch;
    while(1){
      ch = getchar();
      printf("%c, %#x\n",ch,(int)ch);
    }
    return;
} 
```

您可以输入说“4”并看到它表示为 `4, 0x34 (integer representation of '4')`

同样，这将适用于 \n 或 \t 或任何其他人。如果你输入 \t 你会看到： `, 0x9`

该字符是一个选项卡，因此您不会看到它出现，但`getchar()`确实抓住了该选项卡，您可以看到它是 0x9，正如我们所期望的那样。这有帮助吗？我不确定这是否是您要寻找的答案。

# java - 如何从 Java 中的字符串中检测重复的单词？

> ID：12497316
> 
> 赞同：0
> 
> 时间：2012-09-19T14:55:45.493
> 
> 标签：java, regex, string, pattern-matching, duplicates

可以通过哪些方式检测字符串中的重复单词？

例如“这是重复测试的测试消息”包含一个重复单词测试。

在这里，目标是检测字符串中出现的所有重复单词。

最好使用正则表达式来实现目标。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T15:03:52.510

您可以使用正则表达式做的最好的事情是`O(N^2)`搜索复杂性。`O(N)`通过将输入拆分为单词并使用 HashSet 检测重复项，您可以轻松实现时间和空间搜索的复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T14:55:45.493

以下 Java 代码解决了从字符串中检测重复项的问题。如果重复的单词用换行符或标点符号分隔，应该没有任何问题。

```
 String duplicatePattern = "(?i)\\b(\\w+)\\b[\\w\\W]*\\b\\1\\b";
    Pattern p = Pattern.compile(duplicatePattern);
    String phrase = "this is#$;%@;<>?|\\` p is a is Test\n of duplicate test";
    Matcher m = p.matcher(phrase);
    String val = null;
    while (m.find()) {
        val = m.group();
        System.out.println("Matching segment is \"" + val + "\"");
        System.out.println("Duplicate word: " + m.group(1)+ "\n");
    } 
```

代码的输出将是：

```
Matching segment is "is#$;%@;<>?|\` p is a is"
Duplicate word: is

Matching segment is "Test
 of duplicate test"
Duplicate word: Test 
```

这里，m.group(1) 语句表示与第一组模式匹配的字符串 [这里，它是 (\\w+)]。

# jquery - 拉斐尔调整大小无法正常工作

> ID：12497319
> 
> 赞同：1
> 
> 时间：2012-09-19T14:55:55.557
> 
> 标签：jquery, drawing, height, raphael

我很高兴尝试制作一个小工具来测试屏幕尺寸。到目前为止，蓝色宽度正确调整大小，但高度和文本框没有。有人注意到这段代码有什么问题吗？

页面加载时的工具正确呈现。

![在此处输入图像描述](../Images/de714e83ebe9215d27b0e5065a2783a4.png)

```
/* Sizing Script */
$(document).ready(function() {                
    var canvas = $('#canvas');
    var h = $(window).height();
    var w = $(window).width();                
    var txt = ('height: ' + h + '\n\n' + 'width: ' + w);
    draw(canvas.attr('id'), canvas.height(), canvas.width(), txt);

    $(window).resize(function() {
        var h = $(window).height();
        var w = $(window).width();                   
        draw(canvas.attr('id'), canvas.height(), canvas.width(),txt);

    });
});
function draw( id, h, w, txt) {

    var paper = Raphael(id, '100%', '100%'); //create new paper instance based on holder height and width

    paper.setViewBox(0, 0, 1500, 1500, true);
    paper.clear();
    var height_h = paper.rect(10, 0, 100, 10).attr({
        fill: '#291919',
        stroke: '#291919'
    });               
    var height_l = paper.rect(10, h-10, 100, 10).attr({
        fill: '#291919',
        stroke: '#291919'
    });
    var height_v = paper.rect(55, 0, 10, h).attr({
        fill: '#291919',
        stroke: '#291919'
    });

    var width_l = paper.rect(0, 10, 10, 100).attr({
        fill: '#549EFF',
        stroke: '#549EFF'
    });
    var width_r = paper.rect(w-10, 10, 10, 100).attr({
        fill: '#549EFF',
        stroke: '#549EFF'
    });
    var width_h = paper.rect(0, 55, w-10, 10).attr({
        fill: '#549EFF',
        stroke: '#549EFF'
    });

    var textbox = paper.rect(h/2 - 50, w/2 - 100, 200, 100).attr({
        fill: '#E6E6E6',
        stroke: '#ddd',
        'stroke-width': 5
    });
    var height_b = paper.rect(h / 2 - 12, w / 2 - 80, 125, 25).attr({
        fill: '#291919',
        stroke: '#ddd',
        'stroke-width': 5,
        opacity: 0.6
    });
    var width_b = paper.rect(h / 2 - 12, w / 2 - 45, 125, 25).attr({
        fill: '#549EFF',
        stroke: '#ddd',
        'stroke-width': 5,
        opacity: 0.6
    });
    var t = paper.text(h / 2 + 50, w / 2 - 50, txt).attr({
        "font-size": 16,
        "font-family": "Arial, Helvetica, sans-serif"                    
    });

} 
```

HTML

```
<div id="canvas"></div> 
```

CSS

```
body{
     width: 100%;
     height: 100%;
}
#canvas{
     width: 100%;
     height: 100%;                
     text-align: center;
     border: solid 1px black;
     padding: 0px;
     margin: 0 auto;
} 
```

我创建了一个 jsfiddle，但它根本无法正确呈现。[jsfiddle](http://jsfiddle.net/kbBFk/)我猜如果我能解决高度问题，黑条和盒子都会正确渲染。有没有办法清除所有内容并在调整大小时强制重新渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:09:54.997

问题解决了，想看的朋友可以看看。

Javascript

```
/* Sizing Script */
$(document).ready(function() {
    var canvas = $('#canvas');
    var h = $(window).height();
    var w = $(window).width();
    var txt = ('height: ' + h + ' px\n\n' + 'width: ' + w + ' px');
    draw(canvas.attr('id'), canvas.height(), canvas.width(), txt);

    $(window).resize(function() {
        var canvas = $('#canvas');
        canvas.empty();
        var h = $(window).height();
        var w = $(window).width();
        var txt = ('height: ' + h + ' px\n\n' + 'width: ' + w + ' px');
        draw(canvas.attr('id'), canvas.height(), canvas.width(), txt);
    });
});
function draw( id, h, w, txt) {

    var paper = Raphael(id, '100%', '100%'); //create new paper instance based on holder height and width
    var vert_width = w * .01;
    var vert_height = h * .01;
    var height_h = paper.rect(vert_width, 0, 100, vert_width).attr({
        fill: '#46FA70',
        stroke: '#46FA70'
    });
    var height_l = paper.rect(vert_width, h - vert_width, 100, vert_width).attr({
        fill: '#46FA70',
        stroke: '#46FA70'
    });
    var height_v = paper.rect(55, 0, vert_width, h).attr({
        fill: '#46FA70',
        stroke: '#46FA70'
    });

    var width_l = paper.rect(0, vert_height, vert_height, 100).attr({
        fill: '#549EFF',
        stroke: '#549EFF'
    });
    var width_r = paper.rect(w - vert_height, vert_height, vert_height, 100).attr({
        fill: '#549EFF',
        stroke: '#549EFF'
    });
    var width_h = paper.rect(0, 55, w - vert_height, vert_height).attr({
        fill: '#549EFF',
        stroke: '#549EFF'
    });

    var txtbox = [80, 75];
    var textbox = paper.rect(txtbox[0] , txtbox[1] , 200, 100).attr({
        fill: '#E6E6E6',
        stroke: '#ddd',
        'stroke-width': 5
    });
    var height_b = paper.rect(txtbox[0]+37, txtbox[1]+19, 125, 25).attr({
        fill: '#46FA70',
        stroke: '#ddd',
        'stroke-width': 5,
        opacity: 0.6
    });
    var width_b = paper.rect(txtbox[0]+ 37, txtbox[1] + 55, 125, 25).attr({
        fill: '#549EFF',
        stroke: '#ddd',
        'stroke-width': 5,
        opacity: 0.6
    });
    var t = paper.text(txtbox[0] + 100, txtbox[1] + 50, txt).attr({
        "font-size": 16,
        "font-family": "Arial, Helvetica, sans-serif"                    
    });

} 
```

和 CSS

```
body{
    width: 100%;
    height: 100%;
    background:#000000;
}
#canvas{
    background:#FFFFFF;
    width: 100%;
    height: 100%;                
    text-align: center;
    border: solid 1px black;
    padding: 0px;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:29:27.813

虽然你已经回答了你自己的问题，但我今天晚上在回家的路上看着这个，想和你分享我的想法。

在调整大小时重新创建纸张没有开销，我只是重新定位现有元素并调整纸张大小。

您或其他人可能会发现它很有用。我更新了你的[jsfiddle。](http://jsfiddle.net/kbBFk/2/)

```
 $(document).ready(function() {
        var canvas = $('#canvas'), paper, 
        top, vCentre, bottom, left, hCentre, right;
        var w = $(window).innerWidth();
        var h = $(window).innerHeight();
        draw(canvas.attr('id'), w, h);

        // on resize call the update with new dimensions
        $(window).resize(function() {
            w = $(window).innerWidth();
            h = $(window).innerHeight();
            update(w,h);
        });
    });

    // draw function takes id, width and height
    function draw( id, w, h) {
        paper = Raphael(id, '100%', '100%'); 

        // create our rectangular sections
        top = getRect(0, 0, 100, 10, '#46FA70');
        vCentre = getRect(45, 0, 10, h, '#46FA70');
        bottom = getRect(0, h-10, 100, 10, '#46FA70');
        left = getRect(0, 0, 10, 100, '#549EFF');
        hCentre = getRect(0, 45, w, 10, '#549EFF');
        right = getRect(w-25, 0, 10, 100, '#549EFF');
    }

    // helper to create rectangles
    function getRect(x, y, w, h, color){
        return paper.rect(x, y, w, h).attr({
            fill: color,
            stroke: color
        });
    }

    // update the paper and reposition the rect elements
    function update(w, h){
        paper.setSize(w, h);

        // reisize vertical centre and move bottom
        vCentre.attr({height: h-10});
        bottom.attr({x:0, y:h-10});

        // resize horizontal centre and move right
        hCentre.attr({width: w-10});
        right.attr({x:w-10, y:0});
    } 
```

# sql - SQL：按第一个关系对第二个表进行排序

> ID：12497325
> 
> 赞同：0
> 
> 时间：2012-09-19T14:56:23.637
> 
> 标签：sql, sql-server, sql-server-2008, relational-database

我有两个表之间的多对多关系。我想按与第二个表的第一个关系对第一个表进行排序，并且只从该表返回一个结果。这是在 SQL Server 上。我想要这样的东西：

```
SELECT a.retrieve_me
FROM table_A AS a
JOIN table_B AS b ON a.foo = b.foo
JOIN table_C AS c ON b.bar = c.bar
ORDER BY c.sort_me 
```

不幸的是，它返回*MN(k)*结果，其中*M*是“table_A”的计数，*N(k)*是单行*k*与“table_C”的关系数。为了让它只返回我想要的结果而不进行后过滤，我尝试`DISTINCT`在`SELECT`子句上使用和使用`TOP(SELECT COUNT(*) FROM table_A)`，但两者都不是有效的语法。

有任何想法吗？希望我能让它尽可能高效。

**编辑：**

为了清楚起见

```
table A
------------
"joe" 1
"betty" 2
"george" 3

table B
------------
1 2
1 3
2 3
2 4
3 1

table C
------------
1 "ashton"
2 "harding"
3 "spring"
4 "merry lane" 
```

我希望按“george”、“joe”和“betty”的顺序返回结果（乔治->阿什顿、乔->哈丁、贝蒂->快乐车道。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:04:31.213

如果我正确理解了您的需求，因为我认为很难跟随您..应该这样做：

```
SELECT a.nm
FROM tablea a
cross apply (select top 1 * 
         from tableb b
         join tablec c on b.id2 = c.id
         where a.id = b.id1
         order by c.nm) bc
order by bc.nm 
```

[http://sqlfiddle.com/#!3/661c0/5/0](http://sqlfiddle.com/#!3/661c0/5/0)

# c# - WebDriver ImplicitlyWait 在 TeamCity 服务器上失败

> ID：12497331
> 
> 赞同：0
> 
> 时间：2012-09-19T14:56:33.577
> 
> 标签：c#, selenium, teamcity

我们正在 FireFox 10 环境中使用 Selenium 2 框架开发一些功能测试，但我们遇到了这个特殊功能的麻烦：

```
driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(5)); 
```

我们正在尝试设置隐式等待时间以避免睡眠语句进入我们的页面对象。我们在本地或使用远程 Web 驱动程序运行测试，一切正常，但在 TeamCity 7.0.4 服务器内执行时，我们得到了这个意想不到的模式：

```
 SetUp method failed. SetUp : System.InvalidOperationException : Modal dialog present (UnexpectedAlertOpen)  
 at ... [Stack trace] ... 
```

不幸的是，我们无法查看真正出现的模态。如果我们使用睡眠计时器代替驱动程序配置返回，一切正常。

Obs：我们确信 TeamCity 环境的设置就像在我们的本地机器中一样。包括火狐版本。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-14T06:39:40.627

在您的帐户（而不是 Windows 服务）下以正常进程启动 TeamCity Agent，然后等待您将看到什么样的对话框。

# gwt - 用户离开地点时的重复动作

> ID：12497332
> 
> 赞同：1
> 
> 时间：2012-09-19T14:56:34.917
> 
> 标签：gwt, gwt-activities

我想在我的活动中安排一个重复的动作（我正在使用活动和地点设计模式）。当我的用户离开与此活动相关联的地点时，我期望此操作在多长时间内停止？包含重复操作会以某种方式影响 Activity 的处理方式吗？

我不需要立即保证。如果一个活动被正常处理，它在我的用例中是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:51:55.470

如果您需要/愿意，您有责任取消您在活动中开始的任何内容。

使用 a `Scheduler.RepeatingCommand`，您必须保留命令，并在活动的`onStop`中设置一个标志，以便下次运行时提前退出并返回`false`。

# sql - 计算两个表的行数

> ID：12497336
> 
> 赞同：-3
> 
> 时间：2012-09-19T14:56:54.263
> 
> 标签：sql

我想计算两个表的行数，我写了这段代码：

```
SELECT count(v.id), count(c.id)
FROM votes as v, content as c
WHERE v.user_id=1 AND c.created_by=1 
```

它正确返回一行和两列，只有这两个单元格具有完全相同的值......而且不应该如此

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:58:43.763

您的查询正在两个表之间进行交叉连接。如果要计算行数，则需要以下内容：

```
select 'vote' as which, count(*)
from votes v
where v.user_id = 1
union all
select 'content' as which, count(*)
from content c
where c.created_by = 1 
```

如果您正在寻找一行、两列，请改用交叉连接：

```
select vcnt, ccnt
from (select count(*) as ccnt
      from votes v
      where v.user_id = 1
     ) v cross join
     (select count(*) as ccnt
      from content c
      where c.created_by = 1
     ) c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:59:00.020

您需要计算不同的值，否则您只需计算相应列中包含 ID 的行数（这将是所有行，除非您`NULL`在某些 ID 中有 s）：

`count(DISTINCT v.id), count(DISTINCT c.id)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T06:41:33.593

仅当所选 id 不为 null 时才计数

```
SELECT SUM(ISNULL(v.id,0,1)), SUM(ISNULL(c.id,0,1))
FROM votes as v, content as c
WHERE v.user_id=1 AND c.created_by=1 
```

但是如果你需要单独计算，按照这个。

```
SELECT 
  (SELECT COUNT(*) FROM votes as v WHERE v.user_id=1) AS Count1,
  (SELECT COUNT(*) FROM content as c WHERE c.created_by=1) AS Count2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:04:22.170

```
SELECT
    COUNT(Votes.id) VotesCount,
    COUNT(Content.id) ContentCount
FROM
    Votes 
    FULL OUTER JOIN Content ON 1=2 --Ensures rows never join 
```

这会将两个表连接在一起，但不匹配任何行。因此，对于 Votes 中的每一行，所有 Content 列都将为 NULL，反之亦然。COUNT(ColumnName) 不计算 NULL 值，但 COUNT(*) 计算。因此，这应该给你你的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:04:44.807

如果您希望数据在同一行中，则可以使用 a`UNION ALL`和 then`CASE`语句：

```
select max(case when col = 'voteCount' then cnt end) as voteCount,
     max(case when col = 'ContentCount' then cnt end) as ContentCount
from
(
    select count(*) cnt, 'voteCount' col
    from votes v
    where v.user_id = 1
    union all
    select count(*) cnt, 'ContentCount' col
    from content c
    where c.created_by = 1
) x 
```

# php - 如果访问了指定的活动 url，则 php 标头即时重定向

> ID：12497340
> 
> 赞同：0
> 
> 时间：2012-09-19T14:57:05.290
> 
> 标签：php

我可能在这里担心太多了，但是在这里...

[我已经使用google 活动链接构建器](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867)设置了 google 分析活动跟踪 URL 。

这很好，但我有 20 个不同的跟踪网址，而且还会有更多。

这些 URL 真的很难看，我不喜欢访问者在第一次访问我的网站时看到这个长跟踪 URL。

所以这是我想放在我的**wordpress**网站上的想法/理论。如果有人愿意帮助编写其中的 php 部分，我将不胜感激。或任何建议，如果这个想法是坏的。

例如，这些只是我的一些 URL

[http://example.com/?utm_source=Company&utm_medium=MPU&utm_campaign=Promo](http://example.com/?utm_source=Company&utm_medium=MPU&utm_campaign=Promo)

[http://example.com/?utm_source=公司&utm_medium=排行榜&utm_campaign=促销](http://example.com/?utm_source=Company&utm_medium=Leaderboard&utm_campaign=Promo)

[http://example.com/?utm_source=Company&utm_medium=Take%2BOver&utm_campaign=Promo](http://example.com/?utm_source=Company&utm_medium=Take%2BOver&utm_campaign=Promo)

我也想立即重定向上述所有网址...

[http://example.com/](http://example.com/)

在我的 header.php 或 functions.php 中使用 php

有什么方法可以编写，所以我可以简单地在数组/案例中添加新的跟踪 url。

任何建议都会非常感谢！

* * *

请不要这样笑 - 但我猜这就是我想要做的......

```
$landing = $_SERVER['REQUEST_URI'];

$campaigns = array(
"http://example.com/?utm_source=Company&utm_medium=MPU&utm_campaign=Promo",
"http://example.com/?utm_source=Company&utm_medium=Leaderboard&utm_campaign=Promo",
"http://example.com/?utm_source=Company&utm_medium=Take%2BOver&utm_campaign=Promo"
);

if ( $campaigns == $landing ) {

header( 'Location: http://example.com/' ) ;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-23T22:05:56.383

试试这个，

这是纯 javascript，用于在加载页面后从 url 中清除 utm_params。

```
function clear_utm_from_url(){
     var currentLocation = window.location.search.replace(/\?/g, '').split('&');
     var new_url = new Array();

     for( i = 0; i < currentLocation.length; i++){
         var q = currentLocation[i].split('=');
         if( q[0].search("utm_") ){
             new_url.push(currentLocation[i]);
         }
     }
     if( new_url.length > 0 ){
         new_url = "?"+new_url.join("&");   
     }else{
         new_url = "";
     }

     history.pushState({}, "", window.location.pathname+new_url);  
 } 
```

并添加类似这样的东西，或者其他东西来运行功能

```
<body onload="clear_utm_from_url();"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:06:31.403

删除查询字符串的简单方法：

```
if ($urlIsTracker) {
   list($url) = explode('?', $_SERVER['REQUEST_URI']);
   header("Location: $url", true, 301);
   exit;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:06:42.917

你不应该那样做。

谷歌分析跟踪代码是客户端。它是一段 js 代码，在页面加载后执行。如果它没有找到 utm_* 查询参数，则不会向 ga 发送任何内容，因此您将在那里看到的统计信息将无法读取。很可能您只会在 ga ui 中看到总计。

无论如何，如果你想这样做......

```
$trackingParams = array('utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term');
$queryParams = array();
parse_str($_SERVER['QUERY_STRING'], $queryParams);
if (count(array_intersect($queryParams, $trackingParams)) > 1) {
    // This url has tracking params
    foreach ($trackingParams as $paramName) {
        unset($queryParams[$paramName]);
    }
    // You can use a regex, but i wouldn't recommend it
    $newUrl = str_replace(
        $_SERVER['QUERY_STRING'],
        http_build_query($queryParams),
        $_SERVER['REQUEST_URI']
    );
    header('Location: ' . $newUrl, true, 301);
    exit;
} 
```

这是代码将在当前 url 中搜索 utm_* 参数并重定向到没有它们的 url，而其他查询参数保持不变。

# math - 4d 和 n 维物理引擎

> ID：12497341
> 
> 赞同：9
> 
> 时间：2012-09-19T14:57:09.490
> 
> 标签：math, game-physics, physics-engine

有人试图实现 4d 或 n 维物理实时（或非）引擎吗？

与 3d 和 2d 物理引擎相比，这个实现有什么困难？当然，其中之一是演示问题。这是一个有趣的查看和了解更多关于 4d 超球体、超立方体、弹簧、关节、液体和其他物体的信息。

我只是好奇，并没有真正的应用程序使用它。

我的想法的概括是 lobachevskian 或 riemann 几何中的物理学、扭曲空间（你可以穿过针眼）、环形空间（回到同一个地方）、物理学悖论和其他令人惊奇的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:59:55.260

有许多研究小组使用相对论代码来解决各种物理问题；来自[相对论电动力学](http://arxiv.org/abs/astro-ph/0202447)、[相对论流体动力学/磁流体动力学](http://arxiv.org/abs/0907.3647)以及基于引力的模拟等。天体物理学应用是您遇到相对论代码的主要场所。

4D 游戏引擎是您在 FIFA 和 COD 等游戏中已经拥有的。这只是一个 3 + 1 的实现，这无疑是许多相对论代码（它们使用时空的 3 + 1 公式）。由于许多不同的原因，这种时空分割在计算上更容易处理。当然，当您从 1D 到 2D 等时，您的复杂性会随着模拟物理的增加而增加。

对我来说，拥有一个 n 维的物理引擎是没有意义的。我们体验的不是 n 维的物理过程，而是四个。询问超立方体等不是物理学，而是几何/数学构造。这些与您传统上与物理引擎相关联的内容是分开的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-19T21:50:26.167

4D 物理引擎的一个例子是[4D Toys](https://www.youtube.com/watch?v=0t4aKJuKP0Q)，由 Marc Ten Bosch 创建。

[![在此处输入图像描述](../Images/38258bd5063814a02f2a40f1b76fbf29.png)](https://i.stack.imgur.com/D0oAwm.jpg)

[作者在他们的博客](https://marctenbosch.com/news/category/4d-toys/)上详细介绍了它的工作原理（例如，请参阅[这篇](https://marctenbosch.com/quaternions/)关于几何代数的文章）。

他们的技术论文[*N-Dimensional Rigid Body Dynamics*](https://marctenbosch.com/ndphysics/)也[被](https://marctenbosch.com/news/2020/05/siggraph-2020-technical-paper-n-dimensional-rigid-body-dynamics/)SIGGRAPH 2020 接受。

[我还在这里](https://physics.stackexchange.com/a/585471/35699)解释了角速度在更高维度上的工作原理。

# c# - 无边框形式边缘

> ID：12497347
> 
> 赞同：4
> 
> 时间：2012-09-19T14:58:03.823
> 
> 标签：c#, forms, border

我想制作一个黑色边缘很薄的无边框表单（如图片中的第一个表单[http://www.vcskicks.com/remove-titlebar.php](http://www.vcskicks.com/remove-titlebar.php)）。我想这样做是因为表单的可见性很差（它与我的背景相结合）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:59:55.840

*   按照您链接到的文章中的说明制作无边框表格
*   添加[面板](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)控件
*   将面板的 Dock 设置为“填充”
*   更改面板上的[BorderStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.borderstyle.aspx)以获得您想要的效果。( [BorderStyle.FixedSingle](http://msdn.microsoft.com/en-us/library/system.windows.forms.borderstyle.aspx) )
*   将其余控件添加到面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T01:51:17.297

*   将表单的填充更改为 1,1,1,1
*   将表单的背景色设置为您想要的边框颜色
*   添加面板
*   设置面板填写表格
*   将面板颜色设置为“控制”或其他

# ios - pjsip接收短信

> ID：12497350
> 
> 赞同：6
> 
> 时间：2012-09-19T14:58:16.233
> 
> 标签：ios, sms, message, pjsip

任何人都知道任何关于如何设置 pjsip 客户端来接收消息的好例子。我可以使用以下方式从客户端发送消息：

```
pjsua_im_send(sip_acc_id, &to, NULL, &msgbody, NULL, NULL); 
```

到任何号码。

但是我不知道该怎么做才能将消息接收到已经注册的 sip 帐户中。

任何信息，将不胜感激。

注意：我只能使用 pjsip 而不能使用其他库。

**编辑：**我发现的一些新东西：

[http://trac.pjsip.org/repos/ticket/1070](http://trac.pjsip.org/repos/ticket/1070)

[http://www.pjsip.org/release/0.5.4/PJSIP-Dev-Guide.pdf](http://www.pjsip.org/release/0.5.4/PJSIP-Dev-Guide.pdf)（但是所有关于传入消息的文档都说是这样的：

**16.1.2 接收消息**

应用程序模块将接收任何对话之外的传入 MESSAGE 请求。对话框内的传入 MESSAGE 请求将通过对话框 的**on_tsx_state()**回调通知对话框的使用情况。

这仍然没有说明如何处理传入的消息。

[http://www.ietf.org/rfc/rfc3261.txt](http://www.ietf.org/rfc/rfc3261.txt)

[http://trac.pjsip.org/repos/wiki/SIP_Message_Buffer_Event](http://trac.pjsip.org/repos/wiki/SIP_Message_Buffer_Event)

**Edit2：**有人告诉我 on_pager 函数需要用于此功能。所以我尝试了但不幸的是仍然没有成功。

这是我所做的：

```
/* Initialize application callbacks */
  app_config->cfg.cb.on_call_state = &on_call_state;
  app_config->cfg.cb.on_call_media_state = &on_call_media_state;
  app_config->cfg.cb.on_incoming_call = &on_incoming_call;
  app_config->cfg.cb.on_reg_state = &on_reg_state;
  app_config->cfg.cb.on_pager = &on_pager; 
```

和 on_pager 实现：

```
static void on_pager(pjsua_call_id call_id, const pj_str_t *from, const pj_str_t *to, const pj_str_t *contact, const pj_str_t *mime_type, const pj_str_t *body) {

    NSLog(@"****************  on_pager called  **********************");
    AppDelegate *app = (AppDelegate *)[AppDelegate sharedApplication];

    pjsua_call_info ci;

    pjsua_call_get_info(call_id, &ci);

    PJ_UNUSED_ARG(call_id);
    PJ_UNUSED_ARG(to);
    PJ_UNUSED_ARG(contact);
    PJ_UNUSED_ARG(mime_type);

    [app ring];

    //PJ_LOG(3,(THIS_FILE, "MESSAGE from %.*s: %.*s (%.*s)", (int)from->slen, from->ptr, (int)text->slen, text->ptr, (int)mime_type->slen, mime_type->ptr));

    postMessageStateNotification(call_id, &ci);

} 
```

我期待应用程序在收到消息时调用 on_pager 但它没有。 `on_incoming_call`但是，确实会被调用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T21:11:57.593

事实证明，我所做的是正确的，这只是服务器的问题。正在接收消息！

总结一下，基本上：

注册 sip 时：

```
 app_config->cfg.cb.on_pager = &on_pager; 
```

这将注册 on_pager() 函数，以便在收到 SMS 时调用。其余的取决于您在该函数内部做什么。

这是函数头：

```
static void on_pager(pjsua_call_id call_id, const pj_str_t *from, const pj_str_t *to, const pj_str_t *contact, const pj_str_t *mime_type, const pj_str_t *body) 
```

我认为对于功能参数等，一切都是不言自明的。无论如何，感谢大家的尝试！

app_config 在 pjsua_init() 函数内部传递。

此外，在 sipStartup() 中，我们为 iOS 注册了 NSNotification 函数。

```
/***** SIP ********/
/* */
- (BOOL)sipStartup
{
    kSIPCallState         = @"CallState";
    kSIPRegState          = @"RegState";
    kSIPMwiInfo           = @"MWIInfo";

    if (_app_config.pool)
        return YES;

    self.networkActivityIndicatorVisible = YES;

    if (sip_startup(&_app_config) != PJ_SUCCESS)
    {
        self.networkActivityIndicatorVisible = NO;
        return NO;
    }
    self.networkActivityIndicatorVisible = NO;

    CTTelephonyNetworkInfo *phoneInfo = [[CTTelephonyNetworkInfo alloc] init];
    CTCarrier *phoneCarrier = [phoneInfo subscriberCellularProvider];
    NSLog(@"Carrier = %@", phoneCarrier);

    [self checkForConnection];

    NSTimer *timer;
    receiveCallTask = [[UIApplication sharedApplication]
                       beginBackgroundTaskWithExpirationHandler:^{

                       }];

    //timer = [NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(checkForConnection) userInfo:nil repeats:YES];

    /** Call management **/
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(processCallState:)
                                                 name: kSIPCallState object:nil];

    /** Registration management */
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(processRegState:)
                                                 name: kSIPRegState object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(processMessageState:)
                                                 name:kSIPMwiInfo object:nil];

    return YES;
} 
```

和 processMessageState: 如下：

```
- (void)processMessageState:(NSNotification *)notification
{
    NSLog(@"*****     processMessageState is called     *****");
    NSNumber *value = [[ notification userInfo] objectForKey:@"CallID"];
    pjsua_call_id callId = [value intValue];

    int state = [[[ notification userInfo] objectForKey:@"Event"] intValue];

    switch (state) {
        case PJSIP_EVENT_UNKNOWN:
            NSLog(@"unknown event");
            break;
        case PJSIP_EVENT_TIMER:
            NSLog(@"timer event");
            break;
        case PJSIP_EVENT_RX_MSG:
            NSLog(@"received --> rx_msg");
            break;
        case PJSIP_EVENT_TX_MSG:
            NSLog(@"tx_msg");
            break;
        case PJSIP_EVENT_TRANSPORT_ERROR:
            NSLog(@"msg transport error");
            break;
        case PJSIP_EVENT_TSX_STATE:
            NSLog(@"event tsx state");
            break;
        case PJSIP_EVENT_USER:
            NSLog(@"event user");
            break;
        default:
            NSLog(@"processMessageState was called");
            break;
    }
} 
```

# c# - Linq to SQL 数据中的重复项

> ID：12497354
> 
> 赞同：0
> 
> 时间：2012-09-19T14:58:25.570
> 
> 标签：c#, listview, linq-to-sql

我在 SQL 数据库中有一个表，它有一个 ID 列（自动递增）并设置为主键。该表由该 ID 和帐户名组成。

然后我有一些代码可以读取这个表并用数据填充一个列表视图。问题是，如果我按帐户名订购 - 我会在列表视图中列出重复项。如果我按 ID 订购，我看不到任何重复项。

SQL 数据库中的原始数据不包含重复的帐户名称，所以显然这就是我希望在列表视图中看到的内容。

这是我用来获取数据的 Linq...

```
 public static IEnumerable<Client2> GetClientList()
    {
        return (IEnumerable<Client2>)from c in entity.Client2s
                                    orderby c.AccountName
                                    select c;
    } 
```

这是用于创建列表视图的代码...

```
 // Clear the listview
        listViewClient.Items.Clear();

        // Get imported client list from database
        foreach (Client2 c in SQLHandler.GetClientList())
        {
            ListViewItemClient lvi = new ListViewItemClient(c.AccountName, c);
            listViewClient.Items.Add(lvi);
        } 
```

正如我所说，如果我将其更改为**orderby c.ID**，那么它会按预期返回数据。我还尝试向 AccountName 添加索引。我确实使用了自定义列表视图项子类，但所做的只是存储对 Client 对象的引用。

知道如何解决这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:54:16.123

只是为了澄清其他可能阅读此问题的人，这是程序员错误。我的数据确实包含重复项，但由于排序顺序，它们没有一起列出，因此在手动检查数据时我没有看到它们。只有当我开始显示 ID 时，我才意识到它们不是连续的。

# javascript - 2 表单中字段的名称属性

> ID：12497355
> 
> 赞同：2
> 
> 时间：2012-09-19T14:58:25.713
> 
> 标签：javascript, forms, post, field

我有一个脚本可以计算每个值并显示计算值。最后，它还计算所有 div 的已计算值

这是html代码：

```
<td>
<div>
<input name="r" class="rate" type="text" maxlength="255" size="5" value />
<input name="p" class="pack" type="text" maxlength="255" size="5" value />
<span class="amount"></span>
</div>
</td>

<td>
<div>
<input name="r" class="rate" type="text" maxlength="255" size="5" value />
<input name="p" class="pack" type="text" maxlength="255" size="5" value />
<span class="amount"></span>
</div>
</td> 
```

问题是我想将所有字段放在一个表单中，然后将它们提交到数据库。但是，所有 div 都包含两个名称为“r”和“p”的输入字段。

所以，我有点卡在这里，因为我不知道如何使名称唯一或如何使用 POST 将它们传递给数据库。

这是计算脚本的样子：

```
<script type="text/javascript">//<![CDATA[ 

//any time the amount changes
$(document).ready(function() {
    $('input[name=r],input[name=p]').change(function(e) {
        var total = 0;
        var $row = $(this).parent();
        var rate = $row.find('input[name=r]').val();
        var pack = $row.find('input[name=p]').val();

        total = parseFloat(rate * pack);
        //update the row total
        $row.find('.amount').text(total);

        var total_amount = 0;
        $('.amount').each(function() {
            //Get the value
            var am= $(this).text();
            console.log(am);
            //if it's a number add it to the total
            if (IsNumeric(am)) {
                total_amount += parseFloat(am, 10);
            }
        });
        $('.total_amount').text(total_amount);
    });
});

//isNumeric function Stolen from: 
//http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric

function IsNumeric(input) {
    return (input - 0) == input && input.length > 0;
}
//]]>  

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:01:37.870

HTML：

```
<input type="text" name="r[]">
<input type="text" name="p[]">
<hr>
<input type="text" name="r[]">
<input type="text" name="p[]">
<hr>
<input type="text" name="r[]">
<input type="text" name="p[]"> 
```

PHP：

```
for ($i = 0; $i < count($_POST['p']); $i++) {
    $rate = $_POST['r'][$i];
    $pack = $_POST['p'][$i];
    // do something with $rate and $pack
} 
```

由于浏览器提交所有输入（即使没有输入任何值）并且按照规范，它按照它们在 HTML 代码中定义的顺序提交它们，您可以相信两个`$_POST`数组中的元素将对齐并且对应的`rate`和`pack`将在相应数组中的相同索引处接收。

# node.js - 在 Express 中处理文本/纯文本（通过连接）？

> ID：12497358
> 
> 赞同：7
> 
> 时间：2012-09-19T14:58:27.297
> 
> 标签：node.js, express, connect

我正在使用 Express 3，并且想处理**文本/纯**POST。

Express 3 现在使用[connect 的 bodyParser](http://www.senchalabs.org/connect/middleware-bodyParser.html)（我认为旧的 Express 代码已移至 connect）。bodyParser 的文档提供了一些有关如何使其支持其他文件类型的详细信息。我发现了一篇关于如何[在旧版本的 Express 中处理 text/plain](http://coding.paulandkana.com/?p=24)的优秀博客文章）。

*   我是否应该明确要求连接（并让节点要求缓存修改后的版本）？还是通过快递在某处暴露？

*   connect.bodyParser 没有“解析”键。

如何使 Express（通过连接）处理文本/纯 POST？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-10-09T12:33:18.217

使用[bodyParser](https://github.com/expressjs/body-parser)作为依赖项，将其添加到您的`app.js`文件中。

```
var bodyParser = require('body-parser');
var app = express();
app.use(bodyParser.text()); 
```

快乐点头。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-19T15:22:13.523

[https://gist.github.com/3750227](https://gist.github.com/3750227)

```
app.use(function(req, res, next){
  if (req.is('text/*')) {
    req.text = '';
    req.setEncoding('utf8');
    req.on('data', function(chunk){ req.text += chunk });
    req.on('end', next);
  } else {
    next();
  }
}); 
```

将文本添加为​​ req.text

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-28T02:53:10.463

在 express.js "^4.16..." 中，以下代码对我来说很好：

```
// parse an HTML body as a string
app.use(bodyParser.text({ type: 'text/*' })) 
```

代码的扩展部分如下：

```
// parse an HTML body as a string
app.use(bodyParser.text({ type: 'text/*' }))

// Enable CORS for ExpressJS
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*')
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS')
  res.header('Access-Control-Allow-Credentials', true)
  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, Methods, Credentials')
  next()
})

// Api url 
app.post('/api/myApi', (req, res) => {

  const bodyJson = JSON.parse(req.body)
  // do something

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T15:09:32.227

我只会制作一个类似于[json.js](https://github.com/senchalabs/connect/blob/master/lib/middleware/json.js)中间件模块的模块，而不必费心将`buf`数据转换为其他任何东西。将其包装到一个`plain.js`文件中，应用一些体面的“不要重复自己”重构，然后提交拉取请求以进行连接。看起来一般很方便。但是，请注意，虽然方便，但足够大的请求主体将需要在某些时候直接流式传输到磁盘，这样您就不会消耗节点服务器中的所有内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-01T12:28:30.357

**你可以试试这个：**

```
var expressApi= (req, res,params)=>{
    console.log('req.body',params);
    var body = '';
    req.on('data', function (data) {
        body += data;
    });
    req.on('end', function () {
        res.write({status:200,message:'read data'}); 
    }); 
} 
```

# html - Firefox 的 html 编辑器？

> ID：12497364
> 
> 赞同：2
> 
> 时间：2012-09-19T14:58:53.807
> 
> 标签：html, css, firefox, firefox-addon, firebug

有很多[webdeveloper 插件](https://addons.mozilla.org/nl/firefox/collections/mozilla/webdeveloper/)可用，用于 firefox，比如[firebug](https://addons.mozilla.org/nl/firefox/addon/firebug/)。

但是有没有用于 Firefox 的 html 编辑器插件。我可以编辑我的网站。
实时查看编辑（使用 localhost 还是通过 ftp？）并保存编辑（ `CTRL`- `S`）

我现在正在使用萤火虫，如果我可以使用像插件这样的萤火虫保存
（本地）文件，它将节省很多时间！（或萤火虫本身？）`.html`

* * *

我找到了一个用于保存 .css 文件的[firebug 插件](https://addons.mozilla.org/en-US/firefox/addon/firefile/)……现在只需要一个来保存 html，我很高兴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:14:50.440

Firefox 17 (Aurora) 有一个内置编辑器[https://hacks.mozilla.org/2012/09/html-editing-and-other-improvements-in-firefox-17-developer-tools/](https://hacks.mozilla.org/2012/09/html-editing-and-other-improvements-in-firefox-17-developer-tools/)

# maven - 为 pom 依赖设置 project.version

> ID：12497368
> 
> 赞同：-1
> 
> 时间：2012-09-19T14:59:07.950
> 
> 标签：maven

我需要为`project.version`. 对的引用`${project.version}`将在我的依赖项管理部分中的一个依赖项的 pom 中。换句话说，依赖`org.apache.gora:gora-core:0.2.1`已经参数化了它的依赖版本。只是我没有设置 gora-core 作为一个简单的依赖`project.version`项，因此这些间接依赖项都没有包含在我的构建中。

Maven 文档并没有太大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:11:25.137

使用 Maven 3.0.4 为我工作

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>a</groupId>
  <artifactId>b</artifactId>
  <version>1-SNAPSHOT</version>
  <dependencies>
    <dependency>
      <groupId>org.apache.gora</groupId>
      <artifactId>gora-core</artifactId>
      <version>0.2.1</version>
    </dependency>
  </dependencies>
</project> 
```

当我问 Maven 的依赖是什么时：

```
$ mvn dependency:tree
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building b 1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ b ---
[INFO] a:b:jar:1-SNAPSHOT
[INFO] \- org.apache.gora:gora-core:jar:0.2.1:compile
[INFO]    +- org.apache.hadoop:hadoop-core:jar:1.0.1:compile
[INFO]    |  +- commons-cli:commons-cli:jar:1.2:compile
[INFO]    |  +- xmlenc:xmlenc:jar:0.52:compile
[INFO]    |  +- commons-httpclient:commons-httpclient:jar:3.0.1:compile
[INFO]    |  |  +- junit:junit:jar:3.8.1:compile
[INFO]    |  |  \- commons-logging:commons-logging:jar:1.0.3:compile
[INFO]    |  +- commons-codec:commons-codec:jar:1.4:compile
[INFO]    |  +- org.apache.commons:commons-math:jar:2.1:compile
[INFO]    |  +- commons-configuration:commons-configuration:jar:1.6:compile
[INFO]    |  |  +- commons-collections:commons-collections:jar:3.2.1:compile
[INFO]    |  |  +- commons-digester:commons-digester:jar:1.8:compile
[INFO]    |  |  |  \- commons-beanutils:commons-beanutils:jar:1.7.0:compile
[INFO]    |  |  \- commons-beanutils:commons-beanutils-core:jar:1.8.0:compile
[INFO]    |  +- commons-net:commons-net:jar:1.4.1:compile
[INFO]    |  +- org.mortbay.jetty:jetty:jar:6.1.26:compile
[INFO]    |  |  \- org.mortbay.jetty:servlet-api:jar:2.5-20081211:compile
[INFO]    |  +- org.mortbay.jetty:jetty-util:jar:6.1.26:compile
[INFO]    |  +- tomcat:jasper-runtime:jar:5.5.12:compile
[INFO]    |  +- tomcat:jasper-compiler:jar:5.5.12:compile
[INFO]    |  +- org.mortbay.jetty:jsp-api-2.1:jar:6.1.14:compile
[INFO]    |  |  \- org.mortbay.jetty:servlet-api-2.5:jar:6.1.14:compile
[INFO]    |  +- org.mortbay.jetty:jsp-2.1:jar:6.1.14:compile
[INFO]    |  |  \- ant:ant:jar:1.6.5:compile
[INFO]    |  +- commons-el:commons-el:jar:1.0:compile
[INFO]    |  +- net.sf.kosmosfs:kfs:jar:0.3:compile
[INFO]    |  \- oro:oro:jar:2.0.8:compile
[INFO]    +- org.apache.cxf:cxf-rt-frontend-jaxrs:jar:2.5.2:compile
[INFO]    |  +- org.apache.cxf:cxf-common-utilities:jar:2.5.2:compile
[INFO]    |  |  +- org.apache.ws.xmlschema:xmlschema-core:jar:2.0.1:compile
[INFO]    |  |  \- org.codehaus.woodstox:woodstox-core-asl:jar:4.1.1:runtime
[INFO]    |  |     \- org.codehaus.woodstox:stax2-api:jar:3.1.1:runtime
[INFO]    |  +- org.apache.cxf:cxf-api:jar:2.5.2:compile
[INFO]    |  |  +- org.apache.neethi:neethi:jar:3.0.1:compile
[INFO]    |  |  \- wsdl4j:wsdl4j:jar:1.6.2:compile
[INFO]    |  +- org.apache.cxf:cxf-rt-core:jar:2.5.2:compile
[INFO]    |  |  +- com.sun.xml.bind:jaxb-impl:jar:2.1.13:compile
[INFO]    |  |  \- org.apache.geronimo.specs:geronimo-javamail_1.4_spec:jar:1.7.1:compile
[INFO]    |  +- org.springframework:spring-core:jar:3.0.6.RELEASE:compile
[INFO]    |  |  \- org.springframework:spring-asm:jar:3.0.6.RELEASE:compile
[INFO]    |  +- javax.ws.rs:jsr311-api:jar:1.1.1:compile
[INFO]    |  +- org.apache.cxf:cxf-rt-bindings-xml:jar:2.5.2:compile
[INFO]    |  +- org.apache.cxf:cxf-rt-transports-http:jar:2.5.2:compile
[INFO]    |  |  +- org.apache.cxf:cxf-rt-transports-common:jar:2.5.2:compile
[INFO]    |  |  \- org.springframework:spring-web:jar:3.0.6.RELEASE:compile
[INFO]    |  |     +- aopalliance:aopalliance:jar:1.0:compile
[INFO]    |  |     +- org.springframework:spring-beans:jar:3.0.6.RELEASE:compile
[INFO]    |  |     \- org.springframework:spring-context:jar:3.0.6.RELEASE:compile
[INFO]    |  |        +- org.springframework:spring-aop:jar:3.0.6.RELEASE:compile
[INFO]    |  |        \- org.springframework:spring-expression:jar:3.0.6.RELEASE:compile
[INFO]    |  \- org.codehaus.jettison:jettison:jar:1.3.1:compile
[INFO]    +- org.apache.hadoop:avro:jar:1.3.3:compile
[INFO]    |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.4.2:compile
[INFO]    |  |  \- org.codehaus.jackson:jackson-core-asl:jar:1.4.2:compile
[INFO]    |  +- org.slf4j:slf4j-api:jar:1.5.11:compile
[INFO]    |  +- com.thoughtworks.paranamer:paranamer:jar:2.2:compile
[INFO]    |  \- com.thoughtworks.paranamer:paranamer-ant:jar:2.2:compile
[INFO]    |     +- com.thoughtworks.paranamer:paranamer-generator:jar:2.2:compile
[INFO]    |     |  +- com.thoughtworks.qdox:qdox:jar:1.10.1:compile
[INFO]    |     |  \- asm:asm:jar:3.2:compile
[INFO]    |     \- org.apache.ant:ant:jar:1.7.1:compile
[INFO]    |        \- org.apache.ant:ant-launcher:jar:1.7.1:compile
[INFO]    +- commons-lang:commons-lang:jar:2.6:compile
[INFO]    \- log4j:log4j:jar:1.2.16:compile
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.301s
[INFO] Finished at: Wed Sep 19 19:10:04 IST 2012
[INFO] Final Memory: 8M/81M
[INFO] ------------------------------------------------------------------------ 
```

一切都很好

# php - 将二进制字符串保存到从 POST 发送的 php 中的文件

> ID：12497370
> 
> 赞同：3
> 
> 时间：2012-09-19T14:59:09.490
> 
> 标签：php, jquery, file-upload, binary, xmlhttprequest

我有一个拖放上传器（.jpg、.ai、.pdf、.flv、.psd ....等）

我正在以二进制形式读取文件并在 jquery 帖子中发送字符串：

```
function importZoneDrop(evt) {
    evt.stopPropagation();
    evt.preventDefault();

    var files = evt.dataTransfer.files; // FileList object.

    // files is a FileList of File objects. List some properties.
    for (var i = 0, f; f = files[i]; i++) {
        var start = 0;
        var stop = files[0].size - 1;
        var reader1 = new FileReader();
        var reader2 = new FileReader();
        var ext = f.name.substring(f.name.indexOf(".")+1);
        if(ext == "JPEG" || ext == "jpeg" || ext == "JPG"){
            ext ="jpg";
        }

        reader1.onload = (function(theFile) {
            return function(e) {
              // Render thumbnail.
              $("#import-drop-zone").append('<img src="'+e.target.result+'" />');
            };
         })(f);

        reader2.onloadend = function(evt) {
          if (evt.target.readyState == FileReader.DONE) { // DONE == 2
            $.post("/process/upload.php",{"blob":evt.target.result,"extension":ext},function(data){
                console.log(data);
            });
          }
        };

        reader1.readAsDataURL(f);
        var blob = f.slice(start, stop + 1);
        reader2.readAsBinaryString(f);
    }
  } 
```

这有效并发送文件。接下来获取字符串并使用 file_put_contents 写入：

```
$extension = $_POST['extension'];
$file = $_POST['blob'];//sent from jquery post
$filePath = "../_temp/monkey.".$extension;

file_put_contents($filePath,$file);
if(file_put_contents($filePath,$file)){
    echo json_encode("it worked");
}else{
    echo json_encode("it failed");
} 
```

这将成功写入文件。但是文件不起作用，它已经坏了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:05:01.367

你需要使用[`base64_decode`](http://php.net/base64_decode).

```
file_put_contents($filePath, base64_decode($file)); 
```

请注意，您当前正在写入数据两次。不。

```
if (file_put_contents($filePath, base64_decode($file))) { 
```

很好

## 编辑

同样值得一提的是，直接上传二进制文件效率更高，然后您可以跳过`base64_decode`. 像这样的东西：

```
var xhr  = new XMLHttpRequest(),
    data = new FormData();

data.append("file", f); // You don't need to use a FileReader
// append your post fields

// attach your events
xhr.addEventListener('load', function(e) {});
xhr.upload.addEventListener('progress', function(e) {});

xhr.open('POST', '/process/upload.php', true);
xhr.send(data); 
```

[您可以在此处](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)查看其余事件以及[此处](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)的一些示例。

# php - 对来自两个不同来源的数据进行排序 (PHP)

> ID：12497372
> 
> 赞同：0
> 
> 时间：2012-09-19T14:59:18.080
> 
> 标签：php, arrays, object

我需要组合两种不同的数据类型，一个数组和一个数组对象。

然后我需要按照某个属性（日期）的顺序在页面上显示它们。

访问标记类似于以下内容：

```
foreach($array as $item){
$item['date'];
} 
```

和

```
foreach($object as $item){
$item->post->date
} 
```

array_merge 是我需要的，还是不同的？

并不是说如果可能的话我想即时执行此操作，因为数据将迅速变化并且不需要存储。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:04:15.787

```
foreach($array as $item){
 $array_new[] = $item['date'];
 }

 foreach($object as $item){
  $array_new[] = $item->post->date;
 }

 sort($array_new); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:15:08.783

这是我的做法：

```
// array we will use for sorting
$finalArray = array();
// add the array's using the date as the key
foreach($array as $item){
     $key = $item['date']; // use date here, example $key = date('l \t\h\e jS',$item['date']);
     $finalArray[$key] = $item;
}
// add the objects's using the date as the key
foreach($object as $item){
     $finalArray[$item->post->date] = $item;
}
//now sort by keys as Xeoncross noted
ksort($finalArray);
foreach($finalArray as $date=>$objOrArray){
     if(is_array($objOrArray)){
          //do your array printing here
     } else {
          //do your object printing here
     }
} 
```

Ofcourse we can turn the object into an array with get_object_vars, and use whatever sorting function on the final array, the important part is that we want to sort by date and that's why we need it to be our key.

Hope that helped.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:02:58.407

```
$dates = array();

foreach ($array as $item) {
　 $dates[] = $item['date'];
}

foreach ($object as $item) {
    $dates[] = $item->post->date;
}

sort($dates);

foreach ($dates as $date) {
   echo $date;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:03:26.400

如果您需要来自对象的多个值（不仅仅是`date`）并且您不介意删除重复项，则可以尝试此操作。

```
// $array is already defined right?
$object = json_decode(json_encode($object), TRUE);
$data = array_merge($array, $object);

print_r($data); // now test it 
```

[http://us2.php.net/array_merge](http://us2.php.net/array_merge)
[http://us3.php.net/json_decode](http://us3.php.net/json_decode)（注意第二个`TRUE`参数）

### 编辑

根据 Perfection 的回答，（并重新阅读问题）我会这样做：

```
$finalArray = array();
foreach($array as $item)
{
     $finalArray[$item['date']] = $item;
}

foreach($object as $item)
{
     $finalArray[$item->post->date] = json_decode(json_encode($item), TRUE);
}

ksort($finalArray);

foreach($finalArray as $date => $item)
{
    // Everything is an array now
} 
```

# c# - 调整 C# 窗体大小时如何保留图形

> ID：12497381
> 
> 赞同：0
> 
> 时间：2012-09-19T15:00:02.503
> 
> 标签：c#

我正在开发一个程序，当我单击表单时，我需要在表单本身上绘制矩形图形。我创建了代码来执行此操作*（如下）*，但是当我调整表单大小时，矩形被删除。

调整表单大小时如何保留绘制的矩形？

```
private void Form1_MouseClick(object sender, MouseEventArgs e)
{
    Graphics g = this.CreateGraphics();
    Pen Haitham = new Pen(Color.Silver, 2);
    g.FillRectangle(Haitham.Brush, new Rectangle(e.X, e.Y, 50, 50));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:08:57.267

你可以这样做：

```
 private List<Point> _points = new List<Point>();

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        foreach(Point point in _points)
        {
            using (Pen Haitham = new Pen(Color.Silver, 2))
            {
                e.Graphics.FillRectangle(Haitham.Brush, new Rectangle(point.X, point.Y, 50, 50));
            }
        }
    }

    private void Form1_MouseClick(object sender, MouseEventArgs e)
    {
        _points.Add(new Point(e.X, e.Y));
        Invalidate(); // could be optimized to invalidate only the future rectangle draw
    } 
```

在带有 Winforms（或本机 Windows）的 Windows 中，您应该覆盖 OnPaint 并在那里执行几乎所有的绘制逻辑。

请注意，使用 WPF 会有所不同，您将组成一个场景，向其中添加元素（例如，在这里您将向 Canvas 添加一个 Rectangle 形状）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:10:54.590

你必须做事件`"Graphics"`中的`"Paint"`事情。然后您可以始终看到您的矩形，因为只要窗口需要使绘画无效，就会触发该事件。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:12:07.047

我对图形不太熟悉，但我假设您需要将所有绘图对象放入一个容器中，并在调整表单大小时重新绘制它们。您可能需要在 sizeChanged 事件中调用所有正在绘制的对象。

# c# - 将有符号的 int 转换为两个无符号的 short 以进行重建

> ID：12497383
> 
> 赞同：3
> 
> 时间：2012-09-19T15:00:08.903
> 
> 标签：c#, .net, clr, byte, bit

我目前正在使用 BitConverter 将两个未签名的短裤打包到一个有符号的 int 中。该代码针对不同的值执行数百万次，我认为该代码可以进一步优化。这是我目前正在做的——你可以假设代码是 C#/NET。

```
// to two unsigned shorts from one signed int:
int xy = 343423;
byte[] bytes = BitConverter.GetBytes(xy);
ushort m_X = BitConverter.ToUInt16(bytes, 0);
ushort m_Y = BitConverter.ToUInt16(bytes, 2);

// convet two unsigned shorts to one signed int
byte[] xBytes = BitConverter.GetBytes(m_X);
byte[] yBytes = BitConverter.GetBytes(m_Y);
byte[] bytes = new byte[] {
   xBytes[0],
   xBytes[1],
   yBytes[0],
   yBytes[1],
 };
 return BitConverter.ToInt32(bytes, 0); 
```

所以我突然想到，如果我移位，我可以避免构造数组的开销。但是对于我的生活，我无法弄清楚正确的换档操作是什么。我的第一次可悲的尝试涉及以下代码：

```
int xy = 343423;
const int mask = 0x00000000;
byte b1, b2, b3, b4;
b1 = (byte)((xy >> 24));
b2 = (byte)((xy >> 16));
b3 = (byte)((xy >> 8) & mask);
b4 = (byte)(xy & mask);
ushort m_X = (ushort)((xy << b4) | (xy << b3));
ushort m_Y = (ushort)((xy << b2) | (xy << b1)); 
```

有人可以帮助我吗？我在想我需要在移位之前屏蔽高字节和低字节。我看到的一些示例包括使用 type.MaxValue 或任意数字（如负十二）进行减法，这非常令人困惑。

** 更新 **

谢谢你的好答案。以下是基准测试的结果：

```
// 34ms for bit shift with 10M operations
// 959ms for BitConverter with 10M operations

static void Main(string[] args)
    {
        Stopwatch stopWatch = new Stopwatch();

        stopWatch.Start();
        for (int i = 0; i < 10000000; i++)
        {
            ushort x = (ushort)i;
            ushort y = (ushort)(i >> 16);
            int result = (y << 16) | x;
        }
        stopWatch.Stop();
        Console.WriteLine((int)stopWatch.Elapsed.TotalMilliseconds + "ms");

        stopWatch.Start();
        for (int i = 0; i < 10000000; i++)
        {
            byte[] bytes = BitConverter.GetBytes(i);
            ushort x = BitConverter.ToUInt16(bytes, 0);
            ushort y = BitConverter.ToUInt16(bytes, 2);

            byte[] xBytes = BitConverter.GetBytes(x);
            byte[] yBytes = BitConverter.GetBytes(y);
            bytes = new byte[] {
                xBytes[0],
                xBytes[1],
                yBytes[0],
                yBytes[1],
            };
            int result = BitConverter.ToInt32(bytes, 0);
        }
        stopWatch.Stop();
        Console.WriteLine((int)stopWatch.Elapsed.TotalMilliseconds + "ms");

        Console.ReadKey();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:06:16.517

最简单的方法是使用两个班次：

```
int xy = -123456;
// Split...
ushort m_X = (ushort) xy;
ushort m_Y = (ushort)(xy>>16);
// Convert back...
int back = (m_Y << 16) | m_X; 
```

ideone 上的演示：[链接](http://ideone.com/mewF1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:05:37.147

```
int xy = 343423;
ushort low = (ushort)(xy & 0x0000ffff);
ushort high = (ushort)((xy & 0xffff0000) >> 16);
int xxyy = low + (((int)high) << 16); 
```

# php - Symfony2/Doctrine 一对多：类整数不存在

> ID：12497384
> 
> 赞同：1
> 
> 时间：2012-09-19T15:00:10.483
> 
> 标签：php, symfony, doctrine, one-to-many

我有一个一对多的自引用实体。只要父值设置为空，一切正常。当我将父项设置为列表中实际的内容时，出现错误：

> 类整数不存在
> 
> 500 内部服务器错误 - ReflectionException

这是我的实体的代码：

```
<?php

namespace WorkRecorder\WorkBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * @ORM\Entity(repositoryClass="WorkRecorder\WorkBundle\Repository\WorkRepository")
 * @ORM\Table(name="strategyUsed")
 */
class StrategyUsed
{

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="integer")
     */
    protected $sortOrder;

    /**
     * @ORM\Column(type="string", length=50)
     */ 
    protected $name;

    /**
     * @ORM\Column(type="text")
     */
    protected $description;    

    /**
     * @ORM\OneToMany(targetEntity="StrategyUsed", mappedBy="parent")
     */
    private $children;

    /**
     * @ORM\ManyToOne(targetEntity="StrategyUsed", inversedBy="children")
     * @ORM\JoinColumn(name="parent_id", referencedColumnName="id")
     */
    private $parent;

    public function __construct() {
        $this->children = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set description
     *
     * @param text $description
     */
    public function setDescription($description)
    {
        $this->description = $description;
    }

    /**
     * Get description
     *
     * @return text 
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Set sortOrder
     *
     * @param integer $sortOrder
     */    
     public function setSortOrder(\integer $sortOrder)
    {
        $this->sortOrder = $sortOrder;
    }

    /**
     * Get sortOrder
     *
     * @return integer 
     */
    public function getSortOrder()
    {
        return $this->sortOrder;
    }

    /**
     * Add children
     *
     * @param WorkRecorder\WorkBundle\Entity\StrategyUsed $children
     */
    public function addStrategyUsed(\WorkRecorder\WorkBundle\Entity\StrategyUsed $children)
    {
        $this->children[] = $children;
    }

    /**
     * Get children
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getChildren()
    {
        return $this->children;
    }

    /**
     * Set parent
     *
     * @param WorkRecorder\WorkBundle\Entity\StrategyUsed $parent
     */
    public function setParent(\WorkRecorder\WorkBundle\Entity\StrategyUsed $parent)
    {
        $this->parent = $parent;
    }

    /**
     * Get parent
     *
     * @return WorkRecorder\WorkBundle\Entity\StrategyUsed 
     */
    public function getParent()
    {
        return $this->parent;
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:33:14.367

您不能在 PHP 中对标量类型（整数/字符串/布尔值等）键入提示。例如

```
public function setSortOrder(\integer $sortOrder) 
```

应该：

```
public function setSortOrder($sortOrder) 
```

您可以在方法中验证值的类型，如果传递的不是整数，则可能会抛出 InvalidArgumentException。

# lotus-notes - 刷新 Lotus Notes 中的邮寄文档

> ID：12497385
> 
> 赞同：1
> 
> 时间：2012-09-19T15:00:18.003
> 
> 标签：lotus-notes

我现在有严重的脑抽筋，因为我认为我在 10 年内没有这样做过……也许我从来没有这样做过，但我认为我做到了，哈哈。

我有一个新的邮件数据库。当邮件来自 Lotus Notes、来自外部邮件系统（如 gmail）或来自手机的短信时，我想刷新该文档，以便根据邮件所在的 SMPTOriginator 设置几个字段从。我以为我会使用在邮件到达之前运行的代理来执行此操作，但这没有用。我在邮件到达后尝试过，但也没有用。我需要它在文档到达后几乎立即运行，因为他们正在让紧急响应者尽快回复，我需要这些文档在它们进来时刷新。

有人能指出我正确的方向吗……这是我知道我过去做过的事情，我只是不记得了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:51:43.980

也许您只是没有运行代理的必要权限。在任何情况下，当代理正确放置并且邮件数据库接收到邮件时，代理由服务器（代理管理器或路由器）启动，如果代理未启动，则日志中会显示一条消息.nsf 数据库。检查那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:15:22.537

我认为您尝试的事件会起作用，但也许它们仅适用于邮件数据库，而不适用于邮件数据库。

无论如何，您可以使用“创建或修改文档后”触发器，尽管它不会立即运行。我相信它大约每5分钟运行一次。

您还可以创建一个计划代理。如果这个过程不是很长，你也许可以让它每隔 2 分钟运行一次。

# math - 计算两个不同大小向量的余弦相似度

> ID：12497394
> 
> 赞同：2
> 
> 时间：2012-09-19T15:00:59.613
> 
> 标签：math, vector, nlp, dot-product, cosine-similarity

我有2个问题，

1.  我通过找出每个单词在文档中出现的次数从文档中创建了一个向量。这是制作矢量的正确方法吗？还是我还必须做其他事情？

2.  使用上述方法，我创建了 16 个不同大小的文档的向量。现在我想应用余弦相似度来找出每个文档的相似度。我遇到的问题是获得两个向量的点积，因为它们的大小不同。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:08:37.480

1.  听起来很合理，只要它意味着你有一个列表/地图/字典/散列`(word, count)`作为你的向量表示。

2.  您应该[假装](https://en.wikipedia.org/wiki/Sparse_matrix)在某个向量中没有出现的单词的值为零，而不会将这些零存储在任何地方。然后，您可以使用以下算法来计算这些向量的点积（伪代码）：

    ```
    algorithm dot_product(a : WordVector, b : WordVector):
        dot = 0
        for word, x in a do
            y = lookup(word, b)
            dot += x * y
        return dot 
    ```

    该`lookup`部分可以是任何东西，但为了速度，我会使用哈希表作为矢量表示（例如 Python 的`dict`）。

# java - 单例还是静态类？

> ID：12497395
> 
> 赞同：2
> 
> 时间：2012-09-19T15:01:03.510
> 
> 标签：java, android, singleton

我有以下课程：

```
public class EnteredValues {

private HashMap<String, String> mEnteredValues;

public boolean change = false;
public boolean submit = false;
private static final EnteredValues instance = new EnteredValues();

// Singleton
private EnteredValues() {
    mEnteredValues = new HashMap<String, String>();
}

public static EnteredValues getInstance() {
    return instance;
}

public void addValue(String id, String value) {

    if (mEnteredValues.put(id, value) != null) {
        // A change has happened
        change = true;
    }
}

public String getValueForIdentifier(String identifier) {
    return mEnteredValues.get(identifier);
}

public HashMap<String, String> getEnteredValues() {
    return mEnteredValues;
}

public void clean() {
    mEnteredValues.clear();
    change = false;
    submit = false;
}
} 
```

此类用于管理用户已经输入的值，并且该类应该可以被应用程序中的所有类访问。
当活动发生变化时，我通过调用 clear 方法“重置”单例。

我选择了单例模式而没有真正考虑静态类的选项。
但现在我想知道我是否不应该只使用静态类..

处理只管理值的类的常用方法是什么？静态类比单例更快吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:19:09.267

您提供了一种清晰的方法来重置 Singleton 的状态，这一事实表明您不应该使用 Singleton。这是一种危险的行为，因为国家是全球性的。这也意味着单元测试将是一个很大的痛苦。

还有一件事。永远不要将实例变量声明为公共的。将它们声明为私有或受保护并提供 getter 和 setter。此外，无需使用默认值初始化实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:12:27.190

静态类和单例模式之间的主要区别在于，如果您需要实现接口等，可以使用单例。对于这种特殊情况，我认为使用静态类可能会更好，因为您没有实现任何接口。将您的问题与另一个问题联系起来，我想说差异可以忽略不计，但是使用静态类将消除类动态实例化的一小部分开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:16:28.093

如果您需要这样的设计，使用单例有什么不好？如果你需要某个对象的一个​​实例来做指定的事情，那么单例肯定不是一个糟糕的选择。

@see [Java 静态调用比非静态调用更贵还是更便宜？](https://stackoverflow.com/questions/3805155/are-java-static-calls-more-or-less-expensive-than-non-static-calls)

阅读 [http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

从那里：

> 注意：静态嵌套类与其外部类（和其他类）的实例成员交互，就像任何其他顶级类一样。实际上，静态嵌套类在行为上是一个顶级类，为了方便打包，它已经嵌套在另一个顶级类中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T15:17:52.653

**Just for style**

I prefer not to rely on Singleton if I don't need to. Why? Less cohesion. If it's a property you can set from outside, then you can test your Activity (or whatever) with unit testing. You can change your mind to use diferent instances if you like, and so on.

My humble advise is to have a property in each of your Activities (maybe you can define a common base class?), and set it at activity initialization with a new fresh instance.

Your code will not know nothing about how to get it (except the init code and maybe you can change it in the future).

But as I've said... just a matter of taste! :)

# c# - 如何将参数传递给类约束

> ID：12497401
> 
> 赞同：0
> 
> 时间：2012-09-19T15:01:27.947
> 
> 标签：c#

> **可能重复：**
> [在 C# 中有一个带有参数约束的通用构造函数](https://stackoverflow.com/questions/1852837/in-there-a-generic-constructor-with-parameter-constraint-in-c-sharp)

我有这个动态传递对象类型的代码：

```
public static void Retion<T>() where T : DataContext, new()
{
    using (T entitiesContext = new T())
    {...} 
```

我的问题是我需要一个带参数的构造函数，如下所示：

```
 public static void Retion<T>(String conn) where T : DataContext, new()
    {
        using (T entitiesContext = new T(conn))
        {...} 
```

当我尝试这个时，我得到一个错误：错误 137 'T'：在创建变量类型的实例时无法提供参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:04:20.143

尝试

```
using (T entitiesContext = (T)Activator.CreateInstance(typeof(T), new[]{conn})) 
```

# python - 按 A 列删除重复项，保留 B 列中值最高的行

> ID：12497402
> 
> 赞同：249
> 
> 时间：2012-09-19T15:01:32.647
> 
> 标签：python, duplicates, pandas

我在 A 列中有一个具有重复值的数据框。我想删除重复项，将具有最高值的行保留在 B 列中。

所以这：

```
A B
1 10
1 20
2 30
2 40
3 10 
```

应该变成这样：

```
A B
1 20
2 40
3 10 
```

我猜可能有一种简单的方法可以做到这一点——也许就像在删除重复项之前对 DataFrame 进行排序一样简单——但我不太了解 groupby 的内部逻辑来弄清楚它。有什么建议么？

* * *

## 回答 #1

> 赞同：293
> 
> 时间：2012-10-25T00:10:02.923

这是最后一个。虽然不是最大值：

```
In [10]: df.drop_duplicates(subset='A', keep="last")
Out[10]: 
   A   B
1  1  20
3  2  40
4  3  10 
```

您还可以执行以下操作：

```
In [12]: df.groupby('A', group_keys=False).apply(lambda x: x.loc[x.B.idxmax()])
Out[12]: 
   A   B
A       
1  1  20
2  2  40
3  3  10 
```

* * *

## 回答 #2

> 赞同：132
> 
> 时间：2017-01-14T14:04:49.037

最重要的答案是做太多的工作，而且对于更大的数据集看起来很慢。`apply`速度很慢，应尽可能避免。`ix`已弃用，也应避免使用。

```
df.sort_values('B', ascending=False).drop_duplicates('A').sort_index()

   A   B
1  1  20
3  2  40
4  3  10 
```

或者简单地按所有其他列分组并取您需要的列的最大值。`df.groupby('A', as_index=False).max()`

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2019-03-06T11:13:47.833

**最简单的解决方案：**

要基于一列删除重复项：

```
df = df.drop_duplicates('column_name', keep='last') 
```

要删除基于多列的重复项：

```
df = df.drop_duplicates(['col_name1','col_name2','col_name3'], keep='last') 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2020-03-18T10:46:25.693

我将首先使用 B 列降序对数据框进行排序，然后删除 A 列的重复项并首先保留

```
df = df.sort_values(by='B', ascending=False)
df = df.drop_duplicates(subset='A', keep="first") 
```

没有任何 groupby

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-09-19T15:10:56.213

试试这个：

```
df.groupby(['A']).max() 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-01T11:15:59.983

我认为在您的情况下，您实际上并不需要 groupby。我会按 B 列的降序排序，然后在 A 列删除重复项，如果你愿意，你还可以有一个新的漂亮和干净的索引，如下所示：

```
df.sort_values('B', ascending=False).drop_duplicates('A').sort_index().reset_index(drop=True) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-08-21T20:49:38.230

[我是通过重复问题](https://stackoverflow.com/q/68876376/758174)的链接被带到这里的。

对于只有两列，做起来会不会更简单：

```
df.groupby('A')['B'].max().reset_index() 
```

并保留一整行（当有更多列时，这就是把我带到这里的“重复问题”所问的问题）：

```
df.loc[df.groupby(...)[column].idxmax()] 
```

例如，要保留`'C'`取其最大值的整行，对于每组`['A', 'B']`，我们将执行以下操作：

```
out = df.loc[df.groupby(['A', 'B')['C'].idxmax()] 
```

当组相对较少时（即，很多重复项），这比`drop_duplicates()` [解决方案](https://stackoverflow.com/a/41650846/758174)（较少排序）更快：

设置：

```
n = 1_000_000
df = pd.DataFrame({
    'A': np.random.randint(0, 20, n),
    'B': np.random.randint(0, 20, n),
    'C': np.random.uniform(size=n),
    'D': np.random.choice(list('abcdefghijklmnopqrstuvwxyz'), size=n),
}) 
```

（添加`sort_index()`以确保相等的解决方案）：

```
%timeit df.loc[df.groupby(['A', 'B'])['C'].idxmax()].sort_index()
# 101 ms ± 98.7 µs per loop (mean ± std. dev. of 7 runs, 10 loops each)

%timeit df.sort_values(['C', 'A', 'B'], ascending=False).drop_duplicates(['A', 'B']).sort_index()
# 667 ms ± 784 µs per loop (mean ± std. dev. of 7 runs, 1 loop each) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-05-27T13:30:04.787

你也可以试试这个

```
df.drop_duplicates(subset='A', keep='last') 
```

我从[https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop_duplicates.html引用了这个](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.drop_duplicates.html)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-09-20T17:25:53.307

这是我必须解决的一个值得分享的变体：对于中的每个唯一字符串，`columnA`我想在`columnB`.

`df.groupby('columnA').agg({'columnB': lambda x: x.mode().any()}).reset_index()`

如果该`.any()`模式有平局，则选择一个。（请注意，`.any()`在一系列`int`s 上使用会返回一个布尔值，而不是选择其中一个。）

对于原始问题，相应的方法简化为

`df.groupby('columnA').columnB.agg('max').reset_index()`.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-05-22T03:33:00.827

最简单的方法：

```
# First you need to sort this DF as Column A as ascending and column B as descending 
# Then you can drop the duplicate values in A column 
# Optional - you can reset the index and get the nice data frame again
# I'm going to show you all in one step. 

d = {'A': [1,1,2,3,1,2,3,1], 'B': [30, 40,50,42,38,30,25,32]}
df = pd.DataFrame(data=d)
df

    A   B
0   1   30
1   1   40
2   2   50
3   3   42
4   1   38
5   2   30
6   3   25
7   1   32

df = df.sort_values(['A','B'], ascending =[True,False]).drop_duplicates(['A']).reset_index(drop=True)

df

    A   B
0   1   40
1   2   50
2   3   42 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-24T11:34:45.183

当已经给出的帖子回答了这个问题时，我通过添加应用 max() 函数的列名进行了一个小的更改，以提高代码的可读性。

```
df.groupby('A', as_index=False)['B'].max() 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-01-14T15:16:38.880

这也有效：

```
a=pd.DataFrame({'A':a.groupby('A')['B'].max().index,'B':a.groupby('A')       ['B'].max().values}) 
```

* * *

## 回答 #13

> 赞同：-9
> 
> 时间：2012-09-19T15:03:40.067

我不会给你完整的答案（我不认为你正在寻找解析和写入文件部分），但一个关键的提示就足够了：使用 python 的`set()`函数，然后`sorted()`或`.sort()`加上`.reverse()`：

```
>>> a=sorted(set([10,60,30,10,50,20,60,50,60,10,30]))
>>> a
[10, 20, 30, 50, 60]
>>> a.reverse()
>>> a
[60, 50, 30, 20, 10] 
```

# c# - 0 到 12 之间正数的正则表达式

> ID：12497404
> 
> 赞同：3
> 
> 时间：2012-09-19T15:01:34.750
> 
> 标签：c#, regex, validation

我试过在互联网上搜索一个正则表达式来检查：

*   一个积极的#
*   0 到 12 之间

我需要将它放在这行特定代码的括号中

```
 Regex rxValidHeightInches = new Regex(); 
```

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T15:05:01.720

这应该工作`^(\d|(1[0-2]))$`

```
var rxValidHeightInches = new Regex("^(\\d|(1[0-2]))$"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:04:19.450

试试这个。

```
(?<!-)(\b((1[01])|[1-9])\b) 
```

它匹配`1 - 9`or`10`或`11`。负数总是被排除在外。

**解释**

```
-Assert that it is impossible to match the regex below with the match ending at this position (negative lookbehind) «(?<!-)»
---Match the character “-” literally «-»
-Match the regular expression below and capture its match into backreference number 1 «(\b((1[01])|[1-9])\b)»
---Assert position at a word boundary «\b»
---Match the regular expression below and capture its match into backreference number 2 «((1[01])|[1-9])»
------Match either the regular expression below (attempting the next alternative only if this one fails) «(1[01])»
---------Match the regular expression below and capture its match into backreference number 3 «(1[01])»
------------Match the character “1” literally «1»
------------Match a single character present in the list “01” «[01]»
------Or match regular expression number 2 below (the entire group fails if this one fails to match) «[1-9]»
---------Match a single character in the range between “1” and “9” «[1-9]»
---Assert position at a word boundary «\b» 
```

**截屏**

![在此处输入图像描述](../Images/9822df1978a4c76d0985c75bb5b9544c.png)

* * *

**这一项包括 0 - 12**

```
(?<!-)(\b((1[0-2])|[0-9])\b) 
```

![在此处输入图像描述](../Images/bc9a5aeca6c6c46c2f5b9b96766c41ce.png)

# javascript - StumbleUpon chrome 扩展如何在 google 主页导航栏上方插入 div？

> ID：12497407
> 
> 赞同：1
> 
> 时间：2012-09-19T15:01:52.397
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我正在开发一个扩展，它将在所有网页的顶部插入一个水平 div。它适用于大多数页面，但对于[http://google.com](http://google.com)，谷歌的导航栏显示在我的顶部。stumbleUpon chrome 扩展具有类似的功能，除了它们的水平 div 显示在 google 的导航栏上方。我正在使用内容脚本来插入 div。我试过 body.prepend() ，它似乎没有做这项工作。另外，无论滚动位置如何，我都希望栏固定在顶部。我有它作为位置：固定，顶部：0％，但仍然没有运气。任何帮助或指向正确方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:18:56.487

在处理此类情况时，请务必使用 webkit 检查器中的计算样式框。可能需要一些时间才能找到导致问题的样式的正确元素，但这是值得的。

![在此处输入图像描述](../Images/ca0e640e2837d3c8fa92de1d7974d9a8.png)

[我在http://google.com](http://google.com)的正文中添加了一个 div并应用了以下样式：

```
element.style {
  position: fixed;
  top: 0;
  left: 0;
  height: 35px;
  width: 100%;
  background-color: red;
} 
```

我注意到红色从 Google 的导航栏后面突出，所以我认为这可能是 z-index 问题。

![在此处输入图像描述](../Images/14a18929c8648130d6a638356dc2b85f.png)

我将前置 div 的 z-index 设置为 99999，它按预期显示。经过进一步调查，我发现 Google 的 div #gbx3 的 z-index 为 990，其中的导航链接的 z-index 为 991。您不想掩盖 Google 导航栏，因此我们将不得不在上面设置一些自定义样式。

![在此处输入图像描述](../Images/0d7b02d3ddd62bda5934a16d4c19052e.png)

如果您将 Google 的 div #mngb 样式设置为

```
element.style {
  position: absolute;
  top: 35px;
} 
```

![在此处输入图像描述](../Images/65bfe81d4324a91edf54342da21e2532.png)

这会将 Google 的导航栏向下推，但不会移动页面上的任何其他内容。

![在此处输入图像描述](../Images/b9dfff734a4fd9ccba3519cf0f7ea072.png)

这应该足以让你开始。它并不完美，它不能处理任何其他内容的下推，也不能推广到任何其他网站，但它对您来说是一个好的开始。

# php - TCPDF / FPDI 可以接受 PDF 作为字符串吗？

> ID：12497408
> 
> 赞同：3
> 
> 时间：2012-09-19T15:01:53.000
> 
> 标签：php, tcpdf, fpdi

是否可以将 TCPDF 或 FPDI PDF 作为字符串提供？我有一个传入的 PDF 数组作为字符串，我无法写入磁盘。我无法在文档中找到有关此的任何内容。

如果没有，是否有一种有效的方法可以从内存或作为对象存储/读取这些 PDF？把它们喂给 FPDI？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2019-02-07T13:07:11.297

如果您查看 setSourceFile 方法文档，您会发现您还可以传递资源或 StreamReader。StreamReader 非常有趣的是它还共享一个 createByString 方法。所以你可以像这样使用它：

```
use setasign\Fpdi\PdfParser\StreamReader;
//...
$myData = ... ;
$stream = StreamReader::createByString($myData);
$pdf->setSourceFile($stream);
//... 
```

这将避免任何代码重复...希望这对将来的某人有所帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T03:02:10.473

[FPDI](https://github.com/pauln/tcpdi)不接受字符串，但是我刚刚发布的`setSourceData()`TCPDI 除了 FDPI's 之外还有一个方法`setSourceFile()`，因为我碰巧有完全相同的要求。TCPDI 有自己的解析器（[tcpdi_parser](https://github.com/pauln/tcpdi_parser)，基于 TCPDF 的解析器），它支持 1.4 以上的 PDF，而不需要 FPDI 的商业插件 - 这在处理现有 PDF 时也可能很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-12T03:34:18.797

你可以使用[流包装器](http://www.setasign.com/support/faq/miscellaneous/using-a-pdf-from-a-php-variable-instead-of-a-file/#question-192)，..

您可以从上面的类链接中编写 wraper.php

```
header('Content-Type: text/html; charset=utf-8');

require_once('tcpdf/tcpdf.php');
require_once('fpdi/fpdi.php');
require_once('wraper.php');

// Creating new page with PDF as a background
$pdf = new FPDI();
$varInAnyScope = file_get_contents('proposal0.pdf');
$pdf->setSourceFile(VarStream::createReference($varInAnyScope));
$tplIdx = $pdf->importPage(1);
$pdf->AddPage();
$pdf->useTemplate($tplIdx, 0, 0, 0, 0, true);

$pdf->Write(0, "Stack overflow");

ob_clean();
$pdf->Output('WorksheetTest.pdf', 'I'); 
```

# javascript - 如何使用键盘快捷键打开弹出框？

> ID：12497414
> 
> 赞同：4
> 
> 时间：2012-09-19T15:02:05.537
> 
> 标签：javascript, css, safari-extension

> **可能重复：**
> [使用 jQuery 的键盘快捷键](https://stackoverflow.com/questions/593602/keyboard-shortcuts-with-jquery)

我想使用快捷键而不是单击工具栏上的图标来显示弹出窗口。你有什么好主意吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:55:41.023

Abody97 的回答告诉您如何确定是否按下了某个组合键。如果您不确定如何让该组合键显示弹出框，这就是您所需要的。不幸的是，Safari 使这变得不必要的复杂。

在全局脚本中，你需要一个类似下面的函数来显示一个弹出框，给定它的 ID 和应该显示它的工具栏项的 ID：

```
function showPopover(toolbarItemId, popoverId) {
    var toolbarItem = safari.extension.toolbarItems.filter(function (button) {
        return button.identifier == toolbarItemId && button.browserWindow == safari.application.activeBrowserWindow;
    })[0];
    var popover = safari.extension.popovers.filter(function (popover) {
        return popover.identifier == popoverId;
    })[0];
    toolbarItem.popover = popover;
    toolbarItem.showPopover();  
} 
```

您还需要在全局脚本的消息侦听器中调用此函数的代码，如下所示（此示例不假定您已经有一个消息侦听器）：

```
safari.application.addEventListener('message', function (e) {
    if (e.name == 'Show Popover') {
        showPopover(e.message.toolbarItemId, e.message.popoverId);
    }
}, false); 
```

最后，在你注入的脚本中，监听组合键的函数需要调用`dispatchMessage`，如下：

```
safari.self.tab.dispatchMessage('Show Popover', {
    toolbarItemId : 'my_pretty_toolbar_item',
    popoverId     : 'my_pretty_popover'
}); 
```

（把它放在`showPopUp()`Abody97 的代码示例中。）

注意：如果您只有一个工具栏项和一个弹出框（并且从不打算添加更多），那么它会变得更加简单。假设您已经将弹出框分配给 Extension Builder 中的工具栏项，您可以使用

```
safari.extension.toolbarItems[0].showPopover(); 
```

代替全局消息侦听器中的调用，并在注入脚本`showPopover`的调用中省略消息值。`dispatchMessage`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:12:07.773

假设您的快捷方式是**Ctrl + H**例如，这应该这样做：

```
var ctrlDown = false;
$(document).keydown(function(e) {
    if(e.keyCode == 17) ctrlDown = true;
}).keyup(function(e) {
    if(e.keyCode == 17) ctrlDown = false;
});
$(document).keydown(function(e) {
    if(ctrlDown && e.keyCode == 72) showPopUp(); //72 is for h
}); 
```

这是 JavaScript keyCodes 的参考：[little link](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)。

这是一个小演示：[little link](http://jsfiddle.net/glee/jzrkV/show/)。（它使用**Ctrl + M**来避免浏览器热键冲突）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:10:46.167

我相信这可以帮助你：[http ://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

在以下示例中，您检查是否按下了“return/enter”（编号为 13）。

```
$("#whatever").keypress(function(event) {
   if( event.which == 13 ) {
   alert("Return key was pressed!");
   }   
}); 
```

# silverlight - Silverlight 组件不再存在

> ID：12497416
> 
> 赞同：2
> 
> 时间：2012-09-19T15:02:25.480
> 
> 标签：silverlight, devexpress

我正在将旧的 Silverlight 3 应用程序更新到 Silverlight 4。但是，我正在更新的 DevExpress 版本没有旧版本中的一些控件，即 AgMenu 和 AgCore 组件。我一直在谷歌搜索，我发现 Ag 组件在某些时候被归入另一组组件。

我目前正在尝试使用 DevExpress 12.1。哪些 DevExpress 组件与 Ag 组件最相似？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:45:58.950

包含 AgDataGrid 和 AgMenu 组件的最后一个版本是 10.2.11。这些控件与 Silverlight 4 兼容。支持最新版本 Silverlight(5) 的第一个版本是 11.2。因此，上述组件与最新版本的 Silverlight 不兼容。

最新版本的 DXperience(12.1) 包括具有类似功能的 DXGrid 和 DXBars 组件，并扩展了 AgDataGrid 和 AgMenu 控件的功能集。[您可以在DevExpress Silverlight Demo Center](http://demos.devexpress.com/DemoCenter/Silverlight/)中看到这些新控件的运行情况。

# database - Vertica 格式的 To_date 函数？

> ID：12497417
> 
> 赞同：2
> 
> 时间：2012-09-19T15:02:32.820
> 
> 标签：database, date-formatting, vertica, to-date

如何让 Vertica 函数`to_date('','format')`输出如下：

```
DDMonYYYY - 01/ABR/2012 
```

和它不一样（`01-04-2012`）？！

```
dbadmin=> select now();
              now
--------------------------------
 19/09/2012 11:03:48.284339 BRT
(1 row)

dbadmin=> show datestyle;
   name    | setting
-----------+----------
 datestyle | SQL, DMY
(1 row) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T09:55:53.490

尝试这个：

```
SELECT TO_CHAR(CURRENT_TIMESTAMP, 'DD/MON/YYYY'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:30:56.663

to_date() takes a string and converts it into a date object. The output you see returned is not formatted to the specified format. It is just an acknowledgement that the date object got created.

# php - 找不到类“Shanty_Mongo_Document”

> ID：12497418
> 
> 赞同：1
> 
> 时间：2012-09-19T15:02:40.707
> 
> 标签：php, zend-framework, mongodb

尝试与 Shanty Mongo 和 Zend（我都是新手）一起玩，但我不断得到：

```
"Fatal error: Class 'Shanty_Mongo_Document' not found
    in /var/www/dbtz/application/models/User.php on line 4" 
```

首先，我的控制器的 indexAction ：

```
public function indexAction()
{
    $this->view->pageTitle = "Add User";

    $form = new Application_Form_UserAdd();

    if ($this->_request->isPost()) {
        $formData = $this->_request->getPost();
        if ($form->isValid($formData)) {
            $user = new Application_Model_User();
            $user->username = $formData['username'];

            $user->save();
            exit;
        } else {
            $form->populate($formData);
        }
    }        

    $this->view->form = $form;
} 
```

二、型号：

```
class Application_Model_User extends Shanty_Mongo_Document
{
    protected static $_db = 'dbtz';
    protected static $_collection = 'user';

    public static $_requirements = array(
        'username' => 'Required',
        'password' => 'Required',
    );
} 
```

我将 library/Shanty 目录符号链接到 library 文件夹中。这就是我包含 Zend 库的方式，它运行良好。

库文件夹的树：

```
/var/www/dbtz/library# tree -l
.
├── Shanty -> /var/www/libs/Shanty-Mongo/library/Shanty/
│   ├── Mongo
│   │   ├── Collection.php
│   │   ├── Connection
│   │   │   ├── Group.php
│   │   │   └── Stack.php
│   │   ├── Connection.php
│   │   ├── Document.php
│   │   ├── DocumentSet.php
│   │   ├── Exception.php
│   │   ├── Iterator
│   │   │   ├── Cursor.php
│   │   │   └── Default.php
│   │   └── Validate
│   │       ├── Array.php
│   │       ├── Class.php
│   │       └── StubTrue.php
│   ├── Mongo.php
│   └── Paginator
│       └── Adapter
│           └── Mongo.php
└── Zend -> /usr/share/php/libzend-framework-php/Zend/
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:22:56.023

弄清楚了。需要添加

```
autoloaderNamespaces[] = "Shanty_" 
```

到我的 application.ini

# sql-server-2008-r2 - 它们彼此一样有效吗？

> ID：12497424
> 
> 赞同：0
> 
> 时间：2012-09-19T15:02:55.633
> 
> 标签：sql-server-2008-r2

临时表#X（它包含 10 万条记录）稍后在存储过程中使用，需要建立索引。

这两个是否彼此一样有效：

*   创建#x
*   用数据填充#x
*   在#x 上创建索引

...或者更改订单会影响效率：

*   创建#x
*   在#x 上创建索引
*   用数据填充#x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:07:57.427

先填表，再创建索引。以另一种方式进行意味着每次插入都必须更新表和索引。

# nhibernate - 如何根据属性选择父母和唯一的孩子？

> ID：12497425
> 
> 赞同：0
> 
> 时间：2012-09-19T15:02:55.090
> 
> 标签：nhibernate, fluent-nhibernate

在 Fluent NHibernate 中，我有一个 A 类，有一个 IList 的孩子 B。

我想选择所有具有某个属性 B=="foo" 的子 B 的 A

我不想取回 A 的任何其他孩子。

得到这个的查询表达式是什么？

```
var list = session.Query<A>()
  .FetchMany(a=>a.B)
  .Where( a=>childBs.Any(b=>b=="foo")); 
```

但这会返回所有子 B，而不仅仅是“foo”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:53:18.170

有一些丑陋的黑客可以让它做你想做的事（使用集合上的过滤器），但我不推荐它。为什么不反转查询并执行以下操作：

```
var list = session.QueryOver<B>()
             .Where(b => b.B == "foo")
             .Fetch(b => b.A).Eager
             .List(); 
```

它不会完全满足您的要求（如果您访问 bAChildBs，它将加载该集合），但它会检索您正在寻找的数据（假设您有从 B 到 A 的关系）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:45:58.237

NHibernate**永远不会**检索半加载的集合。

如果您想用一个 B 检索一个 A，请使用投影。

# varnish - 清漆宽限期

> ID：12497426
> 
> 赞同：1
> 
> 时间：2012-09-19T15:02:58.313
> 
> 标签：varnish

这些是我的宽限期设置 (/etc/varnish/default.vcl)

```
sub vcl_recv {
....
set req.grace = 360000s;
...
}

sub vcl_fetch {
...
set beresp.grace = 360000s; 
...
} 
```

我使用 localhost 和 nodejs 作为服务器测试了 Varnish。我启动了本地主机，该站点已启动。然后我断开了服务器，网站在不到 2 分钟的时间内断开了连接。它说：

错误 503 服务不可用 服务不可用 Guru Meditation: XID: 1890127100 Varnish 缓存服务器

你能告诉我可能是什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:00:27.220

请注意，**只有您的缓存内容**将在宽限期延迟中提供。

您能否在后端处于活动状态时尝试多次请求请求，并确保使用 varnishlog 例如，只要您处于 TTL 延迟中，就不会再使用后端连接。

然后，断开您的后端，等到您到达内容的 TTL，然后重新查询初始请求。

# c# - 我可以在 findcontrol 中使用数组吗？

> ID：12497434
> 
> 赞同：1
> 
> 时间：2012-09-19T15:03:09.193
> 
> 标签：c#, asp.net

你好，我有一个`DataList`有四个标签，它们都以数字 1-4 结尾。在我后面的代码中，我有一个 for 循环和一个数组，我想设置`Datalist`with 的标签。

```
for (int x = 0; x< cartreciept.Items.Count; x++)
{
    DataListItem item = cartreceipt.Items[x];
    string catalogtype = ("select CatalogType From SC Where OrNum=" + OrNum)

    if (catalogtype="TC")
    {    
         ((Panel)item.FindControl("pnlIprintInfo")).Visible = true;
         string scRID = ("Select SCRID From SC Where OrNum =" + OrNum

        for(int y = 1; y<5; y++)
        {
              string lT[y] = (Select LineText From table Where SCartRD =" + scRID + " AND LN=" + y)

              ((Label)item.FindControl("lbl[y]")).text = lT[y];
        }
     }
} 
```

那么`((Label)item.FindControl("lbl[y]"))`工作呢？在我弄清楚细节之前，大部分代码只是伪代码。如果您需要了解其他任何我可以提供的信息，我也愿意接受其他建议。感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:05:59.203

您可以使用此代码 - 基于`string.Format("....{0}",arguments)`

```
var control = (Label)item.FindControl(string.Format("lbl{0}",y)); 
```

我建议你使用`DataList.ItemDataBound`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)

# sqlite - SQLite中的SELECT忙于多个连接

> ID：12497439
> 
> 赞同：1
> 
> 时间：2012-09-19T15:03:27.443
> 
> 标签：sqlite

在我的（测试）应用程序中，我有*多个线程*，每个线程一个接一个地进行*多个`SELECT`调用*。每个线程都有*自己*与（相同）SQLite 数据库的连接。

几次调用一切正常，但随后我开始`SQLITE_BUSY`从`sqlite3_step()`.

我知道我可以规避这种情况，`sqlite3_busy_timeout()`但我想知道为什么会发生这种情况，或者这是否是预期的行为。

请注意，我*只做读操作*（除非`SELECT`现在被认为是写操作），所以 SQLite 应该只获取共享锁，不是吗？

我在 Windows (7 x64) 上运行 SQLite 3.7.13。

# c++ - C++ 类型 std::vector::size_type 的 OpenCL 等价物是什么？

> ID：12497446
> 
> 赞同：1
> 
> 时间：2012-09-19T15:03:51.710
> 
> 标签：c++, opencl

我应该在[哪里使用 OpenCL 数据类型？](https://stackoverflow.com/questions/5963800/where-should-i-using-opencl-data-types)但它没有回答我的问题。

(1) C++类型std::vector::size_type的绑定opencl类型和内核opencl类型应该是什么？

(2) 在将 std::vector::size_type 设置为 clCreateBuffer() 中的主机 ptr 之前，如何将 std::vector::size_type 转换为您在 (1) 的答案中提到的绑定类型？

我需要上述内容的原因是因为我试图将向量的大小传递到我的内核中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:12:11.387

1.  这取决于。`cl_uint`/`uint`和`cl_ulong`/`ulong`是可能的替代方案。当向量的大小最多为 2³² - 1 时，前者就足够了。当且仅当您超过该限制时，您应该考虑使用`cl_ulong`/ `ulong`。在此之前，您可能会打破一些其他限制，例如最大允许的缓冲区大小 ( `CL_DEVICE_MAX_MEM_ALLOC_SIZE`) 或设备的地址空间 ( `CL_DEVICE_ADDRESS_BITS`)。所以我的建议是坚持`cl_uint`/`uint`除非有很好的理由使用`cl_ulong`/ `ulong`。

2.  `static_cast<cl_uint>(v.size())`甚至`boost::numeric_cast<cl_uint>(v.size())`（如果值不适合 a ，则会引发异常`cl_uint`）。

# jquery - 将图像附加到内容并重新加载砌体

> ID：12497449
> 
> 赞同：6
> 
> 时间：2012-09-19T15:04:10.970
> 
> 标签：jquery, jquery-masonry

我有一个包含图像列表的 xml 文件，我希望将这些图像加载到容器中，然后应用砌体。

我试图等待图像加载， http: [//masonry.desandro.com/demos/images.html](http://masonry.desandro.com/demos/images.html)。添加每个图像后，我尝试重新加载 - [http://masonry.desandro.com/docs/methods.html#reload](http://masonry.desandro.com/docs/methods.html#reload)

这些都不起作用。

这是我的代码，我不确定我哪里出错了。

```
 $('.content').masonry();
    var elements = '';

    $.ajax({
        type: "GET",
        url: "/galleries/_archive/PhotoGallery.xml", // replace with absolute URL of your gallery's xml file
        dataType: "xml",
        success: function(xml) {
            jQuery(xml).find('img').each(function(i) {
               var location = "/galleries/_archive/"; // replace with absolute path to the directory that holds your images
               var url = jQuery(this).attr('src');
               var alt = jQuery(this).attr('alt');

            elements+= '<div class="image-div"><img class="round'+i+'" src="'+location+''+url+'" alt="'+alt+'"/></div>';

        });

        $('.content').append(elements).shuffle().masonry('reload');
        //$(".content .image-div").shuffle();
        }
     }); 
```

我看过这个 - [jquery, masonry after append complete](https://stackoverflow.com/questions/11143357/jquery-masonry-after-append-complete) and this [jQuery Masonry and Ajax Append Items?](https://stackoverflow.com/questions/8722197/jquery-masonry-and-ajax-append-items)

我只是想知道插件是否应该在重新加载时等待图像加载？如果是这样，它的语法是什么？

我还计划隐藏块（可见性：隐藏），将它们随机排列，然后砌筑它们，然后将它们淡入。

任何帮助都会很棒，我很难过。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:03:34.430

如果您可以在 XML 文件中存储每个元素的高度和宽度。您可以在附加语句中使用这些维度。这样做将使砌体无需等待图像加载到浏览器中即可工作。这样，浏览器就不必在加载图像后“重排”布局，从而获得更流畅的体验（更少的“卡顿”或弹跳）和更快的感知页面加载。

再加上它的实现非常简单（特别是考虑到无论如何您都必须以某种方式生成 XML 文件）。

```
var elements = '';

$.ajax({
    type: "GET",
    url: "/galleries/_archive/PhotoGallery.xml", // replace with absolute URL of your gallery's xml file
    dataType: "xml",
    success: function(xml) {
        jQuery(xml).find('img').each(function(i) {
           var location = "/galleries/_archive/"; // replace with absolute path to the directory that holds your images

           var that= jQuery(this),
               url = that.attr('src'),
               alt = that.attr('alt'),
               h   = that.attr('height'),
               w   = that.attr('width');

        elements+= '<div class="image-div"><img class="round'+i+'" src="'+location+''+url+'" alt="'+alt+'" height="'+h+'" width="'+w+'"/></div>';

    });

    $('.content').append(elements).shuffle().masonry();
    }
 }); 
```

* * *

**纯娱乐：**

CSS

```
.content img{
     opacity:0;
     -moz-transition:opacity 1s;
     -webkit-transition:opacity 1s;
     transition:opacity 1s;
}

.content .loadedImg{
     opacity:1;
} 
```

JS

```
$('.content').on('load', 'img', function(){
     $(this).addClass('loadedImg');
}); 
```

理论上，一旦图像在支持 css3 的浏览器中完全加载，它们现在会变得非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:27:34.810

jQuery`.load()`函数将有助于解决问题。

尝试使用以下代码，

```
var totalImage = 0, imageCount = 0;
$.ajax({
    type: "GET",
    url: "/galleries/_archive/PhotoGallery.xml", // replace with absolute URL of your gallery's xml file
    dataType: "xml",
    success: function(xml) {
        totalImage = jQuery(xml).find("img").length;
        jQuery(xml).find('img').each(function(i) {
           var location = "/galleries/_archive/"; // replace with absolute path to the directory that holds your images
           var url = jQuery(this).attr('src');
           var alt = jQuery(this).attr('alt');

        elements+= '<div class="image-div"><img class="round'+i+'" src="'+location+''+url+'" alt="'+alt+'"/></div>';

    });

    $('.content').append(elements).shuffle();

    $('.image-div img').load(function() {
      imageCount++;
      if(totalImage == imageCount){
        $('.content').masonry('reload');
      }
}); 
```

我创建`totalImage`和`imageCount`变量。在图像加载事件中，我检查了所有图像都加载完成。如果 totalImage 和 imageCount 相同意味着所有加载完成然后我调用`masonry('reload')`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:00:47.307

看起来 Masonry 在图像完全加载之前正在对 DOM 进行操作。使用`imagesLoaded`Masonry 自带的方法来解决这个问题：

**编辑：** 以块加载图像，每个块在其图像完全加载时变得可见：

**CSS**

```
.hidden {
    display: none;
} 
```

**JavaScript**

```
/*
 * Splits an array into subarrays of length "len".
 *
 * see: http://stackoverflow.com/a/11764168/159570
 */
function chunk(arr, len) {
    var chunks = [];
    var i = 0;
    var n = arr.length;
    while (i < n) {
        chunks.push(arr.slice(i, i += len));
    }
    return chunks;
}

var chunkSize = 10;    // images per chunk
var $content = $('.content').masonry();
$.ajax({
    type: "GET",
    url: "/galleries/_archive/PhotoGallery.xml",
    dataType: "xml",
    success: function(xml) {
        var allImages = $(xml).find('img').get();
        var imageArrayChunks = chunk(allImages, chunkSize);
        $.each(imageArrayChunks, function(i, imageArray) {
            var elements = '';
            $.each(imageArray, function(j, image) {
                var location = "/galleries/_archive/";
                var $image = $(image);
                var url = $image.attr('src');
                var alt = $image.attr('alt');
                var index = i*j + j;    // original unchunked index
                elements += '<div class="image-div hidden"><img class="round'+index+'" src="'+location+url+'" alt="'+alt+'"/></div>';
            });
            $content.append(elements).shuffle();
            $content.imagesLoaded(function(images) {
                $content.masonry('reload');
                $(images).parent().removeClass('hidden');
            });
            console.log('Chunk #'+i+' loaded...');
        });
    }
}); 
```

# algorithm - “... WHERE word like 'ab%' order by relevace”的自定义搜索索引算法

> ID：12497452
> 
> 赞同：0
> 
> 时间：2012-09-19T15:04:16.630
> 
> 标签：algorithm, search, indexing

我有一个字符串和整数对数组。我想搜索字符串并按照它们对应的 int 值的顺序列出它们。

```
class WordClass
{
 public string Word;
 public int Relevance;
}
WordClass words[]; 
```

我想为此实现一个索引算法，但不知道使用什么算法。

在 SQL 中，它会是这样的：

```
SELECT word FROM table WHERE word like 'ab%' order by relevance 
```

我已经创建了一棵 AVL 树，但我意识到一棵 AVL 树并不真正适合此目的。

该算法应该非常快。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:42:52.437

如果您想查找所有以前缀开头的单词，Trie (http://en.wikipedia.org/wiki/Trie) 是一个很好的数据结构。您可以获取所有单词，然后按相关性对其进行排序。

但是，如果您只想选择前 k 个最高相关的单词，这将不是很有效。

# python - 正则表达式获取另一个属性之后的属性值

> ID：12497456
> 
> 赞同：0
> 
> 时间：2012-09-19T15:04:21.967
> 
> 标签：python, html, regex

鉴于前面的文本，我正在尝试获取属性的值。说我有这个：

```
<meta content="firsttag" name="datatoget" /> 
```

我想获得`value`名称（datatoget）。
我知道特定属性 ( `<meta ... name="`)之前的内容

我怎样才能使用正则表达式获得这个值？

我得到了`content="firstag" name=".*"`，它将返回我想要的，但带有周围的文本。基本上我想要 `.* 部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:08:56.177

```
(?<=name=")[a-zA-Z0-9]* 
```

`(?<=name=")`确保文本 'name="' 在我们想要匹配的内容后面，而不将其包含在您的结果中。

`[a-zA-Z0-9]`限制捕获组，以便结束引号不包含在其中。

# ruby-on-rails - 'rails new -d'（数据库预配置）开关实际上是做什么的？

> ID：12497460
> 
> 赞同：0
> 
> 时间：2012-09-19T15:04:36.680
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3

我知道 -d 开关为特定数据库预配置了新项目，并且我相信它设置了`Gemfile`and `database.yml`，但我不确定它是否不止于此。我似乎无法找到关于它究竟做了什么的信息。任何人都可以详细说明或指出一些文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:11:45.797

它将正确的 Gem 添加到您的 Gem 文件中，并`config/database.yml`使用正确的适配器进行预配置。

例如：

`rails new -d mysql`将添加`mysql2`到您的 Gemfile 和`adapter: mysql2`您的 database.yml。

`rails new -d postgresql`将添加`pg`到您的 Gemfile 和`adapter: postgresql`database.yml

可能会添加特定于适配器的配置指令到 database.yml。

初始设置没有其他差异。后来的行为差异来自特定于数据库的 Gem。

# android - 带有 Android KSoap 的 Web 服务返回 anyType

> ID：12497462
> 
> 赞同：1
> 
> 时间：2012-09-19T15:04:43.967
> 
> 标签：android, xml, ksoap

我目前正在做一个处理客户网络服务的 Andrid 项目。简而言之，当将 web 服务作为测试运行时，浏览器会显示格式正确的 XML，但在 Android KSoap 上它会返回 AnyType{resp=200; etc etc} 所以我发现 httpTransport.debug = true 必须打开并使用 httpTransport.responseDump 它将形成完整的 XML，包括 HTML 标签，例如

`<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/`

依此类推，但浏览器并非如此，我需要浏览器的输出格式。

我应该做点别的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:46:54.737

transport.call（soap_action，信封）；结果 = (SoapObject) 信封.getResponse(); result.getProperty(0).toString();//会给你返回对象的第一个元素

# asp.net - 将html写入页面

> ID：12497464
> 
> 赞同：0
> 
> 时间：2012-09-19T15:04:45.730
> 
> 标签：asp.net, html, razor

我正在向包含一些 html 的页面写入一些文本。我这样写

@文本

但是html显示为这样的文本

一些文字。更多的文字。

我想要发生的是 html 不是作为文本呈现，而是作为实际的 html 呈现。所以在这个例子中，我想要一个链接出现。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:07:17.297

您可以使用与运算符`Html.Raw`相反的不会对输出进行 HTML 编码的方法`@`：

```
@Html.Raw(text) 
```

警告：请注意这一点，因为您的网站现在容易受到 XSS 攻击。只有当您完全控制`text`变量时，您才应该这样做。如果此变量直接来自用户输入、查询字符串参数或表单字段，您可能会遇到麻烦。如果您想清理用户输入以便安全地与`Html.Raw`帮助程序一起使用，您可以使用[AntiXss](http://wpl.codeplex.com/)库。

# ios - 登录后未调用 Facebook SDK 3.0 IOS 6 回调

> ID：12497465
> 
> 赞同：10
> 
> 时间：2012-09-19T15:04:47.227
> 
> 标签：ios, facebook, ios6, openurl

**第二次更新** 在进行了更多挖掘之后，似乎有一个更大的问题在起作用。

未触发 openURL 的原因是应用程序在回到前台时似乎冻结了。

如果我启动我的应用程序，单击主页按钮（返回主屏幕），然后重新加载我的应用程序（不是完全重新启动，只是恢复），应用程序打开，但一切都被冻结。

-(void)applicationWillEnterForeground:(UIApplication *)application

当应用程序返回时被触发，但之后没有任何反应。使用 IOS 6.0 的模拟器我完全没有崩溃，但应用程序只是坐在那里无所事事。点击屏幕什么都不做。如果我单击主屏幕，我可以返回主屏幕。

所以 openIURL 没有被触发的原因是因为应用程序在从 Safari 或 Facebook 应用程序的 Facebook 登录返回时冻结。它与 facebook SDK 无关。

为什么会这样？

**更新**似乎问题与未调用 openURL 有关。当从 safari 或 facebook 应用程序执行自定义 URL 时，该应用程序会打开。如果我创建一个全新的应用程序，它确实有效。

**[用户对 facebook 进行身份验证后未调用](https://stackoverflow.com/questions/12515922/application-open-url-method-not-called-after-user-authenticates-the-facebook/12516136#12516136)**另一个相关问题应用程序打开 Url 方法****

 **我有一个使用 facebook SDK 3.0 登录的应用程序。

在 IOS 5 下，流程按预期工作，我确实看到了 IS LOGGED IN 的输出：

```
NSArray *permissions = [[NSArray alloc] initWithObjects: @"publish_stream",@"offline_access",@"email",nil];

[FBSession openActiveSessionWithPermissions:permissions allowLoginUI:YES
completionHandler:^(FBSession *session,
                    FBSessionState status,
                    NSError *error) {
    if(session.isOpen){
      NSLog(@"IS LOGGED IN");
    }                                  
}];

[permissions release]; 
```

在我的 App 委托中，openURL 函数如下

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [[FBSession activeSession] handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [[FBSession activeSession] handleOpenURL:url];
} 
```

同样，在 IOS 5 下，通过 facebook 成功登录后会调用 openURL 函数。

在 IOS 6 下，当我执行 openActiveSessionWithPermission (login) 时，openURL 永远不会被回调。

我根据 facebook 文档在我的 .plist 文件中提供了必要的信息

```
FacebookAppID = (My Facebook App ID) 
```

和

```
URL types 
 -> Item 0
    -> URL Schemes
      -> Item 0 = (My Facebook App ID) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:21:15.213

这可能是因为您的应用程序设置为不在后台运行，如您的应用程序 plist 中设置的那样？我一直有同样的问题。似乎，如果应用程序在后台运行，它将返回并调用 openURL。但是如果应用程序没有在后台运行，它将返回并调用 application:didFinishLaunchingWithOptions，而不是调用 openURL。可以从启动选项中获取 url：

```
NSURL *url = [launchOptions objectForKey: UIApplicationLaunchOptionsURLKey]; 
```

但我还没有弄清楚如何调用它，以便在从 Facebook 身份验证返回时与 application:openURL 具有相同的效果。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:52:20.137

该问题与我在应用程序中使用 TWTweetComposeViewController 的方式有关，因此它与 facebook SDK 无关。

问题是我在我的 ViewDidLoad 中初始化了我的 TWTweetComposeViewController 并且直到需要才使用。但是，如果 TWTweetComposeViewController 未显示但已初始化，它将在从后台模式进入时冻结您的应用程序。

修复方法是仅在您要显示 TWTweetComposeViewController 时对其进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T04:41:56.060

这是来自 Facebook 的 Shireesh。请您在我们的开发者网站上提交一个错误，以便我们可以详细查看它。请确保提供详细的复制步骤并尽可能附上屏幕截图。 [https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T02:38:14.447

我在 Facebook 下为我的应用设置了两个后缀：免费和付费如 fbxxxxxxpaid

它们在 SDK 2.0 下工作得非常好，但在 3.2 中我的应用程序没有被回调，我被一个带有取消按钮的空画布卡住了。

我从 URL Schemes 中删除了后缀，它立即生效。

我不得不根据这个[https://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/更新我的应用程序](https://developers.facebook.com/docs/howtos/share-appid-across-multiple-apps-ios-sdk/)**

# iphone - 使用 searchBar:textDidChange 搜索和显示谷歌结果：

> ID：12497472
> 
> 赞同：0
> 
> 时间：2012-09-19T15:05:11.323
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

我正在使用 Google 在 searchBar:textDidChange 中搜索内容：

我的问题是，每次按下一个字母时，它都会等待完成最后一个字母以开始另一个字母。如果用户输入得非常快——你明白了——它每次都会搜索每个字母，并为每个字母更新表格（结果放松的地方）。

这是一个真正的问题，对用户来说非常糟糕。

您能否建议我使用 searchBar:textDidChange: 进行搜索的效率如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:52:02.600

**searchBar:textDidChange:**委托方法，每次修改搜索栏时都会调用该方法。

它通常在搜索表数据时使用。当您键入时，表格数据将被过滤。对于您的情况，最好在按下搜索按钮时使用。

# php - 如何在 Symfony 1.4 后端模块中保持 GET-param 活动？

> ID：12497478
> 
> 赞同：0
> 
> 时间：2012-09-19T15:05:23.507
> 
> 标签：php, symfony1, get, symfony-1.4, parameter-passing

我构建了一个 SF 1.4-backend-module，它需要进行某种“预过滤”。所以我将 GET 参数 ?type=A 添加到 menue-link。

现在我需要在单击“编辑”、“删除”、...时在模块内“保持此参数处于活动状态”。

有没有一种简单的方法可以将这个 get-param 全部保存在模块中，或者甚至有更好的方法将固定值传递给模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:58:50.687

您最好将此信息存储到会话中，而不是使用并非总是有效的 get 参数。过滤器从会话和表单中获取（当您提交时）。

例如，如果您想在列出某个 FK 的书上按作者过滤，请在转到页面或`preExecute()`书本之前使用此代码段：

```
$this->getUser()->setAttribute(
  'book.filters', 
  array('author _id' => $author->getId()), 
  'admin_module'
); 
```

# javascript - 为什么 javascript .replace 不适用于此数组键？

> ID：12497479
> 
> 赞同：4
> 
> 时间：2012-09-19T15:05:24.417
> 
> 标签：javascript, jquery

在这里，我添加了每个 '. cmsCategories 的 div 到 item_array，但随后 .replace() 不适用于 item_array 键。我怎样才能解决这个问题？（在此之后，我会将新内容写回 div）。任何帮助都是极好的！

[http://jsfiddle.net/QKHJJ/1/](http://jsfiddle.net/QKHJJ/1/)

Javascript：

```
$(document).ready(function() {

var item_array=new Array();

$("[class=' cmsCategories']").each(function(i, obj) {
item_array.push(obj.innerHTML);
});

item_array[0].replace("icon_dog", "<img src='img/icon_dog.png' alt='icon_dog' />"); 
item_array[0].replace("icon_cat", "<img src='img/icon_cat.png' alt='icon_cat' />"); 

alert(item_array[0]);

}); 
```

HTML：

```
<ul class="cmsSmartListResults">
  <li>
    <div class=" cmsCategories">icon_cat, apple, icon_dog, pear, banana</div>
    <a href="" class=" cmsPageLink"></a>
    <div class=" cmsDescription"></div>
    <div class=" cmsFileSize"></div>
    <a class=" cmsMoreLink"></a>
</li>
  <li>
<div class=" cmsCategories">apple, icon_dog</div>
<a href="" class=" cmsPageLink"></a>
<div class=" cmsDescription"></div>
<div class=" cmsFileSize"></div>
<a class=" cmsMoreLink"></a>
</li>
  <li>
    <div class=" cmsCategories">pear, banana</div>
    <a href="" class=" cmsPageLink"></a>
    <div class=" cmsDescription"></div>
    <div class=" cmsFileSize"></div>
    <a class=" cmsMoreLink"></a>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T15:06:48.237

**1)** replace 函数不会改变你传递的字符串（字符串是不可变的）：它返回一个新的。

做 ：

```
var newString = item_array[0].replace(... 
```

或者

```
item_array[0] = item_array[0].replace(... 
```

**2）**在此操作之后，您必须再次更改 DOM`$('someselector').html(item_array[0]);`

* * *

您需要的完整代码类似于

```
$("[class=' cmsCategories']").each(function(i, obj) {
    var html = $(this).html();
    html = html.replace ...
    $(this).html(html);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:07:08.920

replace 方法不会修改原始值。您必须执行以下操作：

```
item_array[0] = item_array[0]
     .replace("icon_dog", "<img src='img/icon_dog.png' alt='icon_dog' />"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T15:08:00.497

你应该做

```
item_array[0] = 
    item_array[0].replace("icon_dog", "<img src='img/icon_dog.png' alt='icon_dog' />") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T15:08:40.770

我认为您的替换语句不正确。尝试这个。

```
item_array[0] = item_array[0].replace("icon_dog", "<img src='img/icon_dog.png' alt='icon_dog' />"); 
item_array[0] = item_array[0].replace("icon_cat", "<img src='img/icon_cat.png' alt='icon_cat' />"); 
```

[jsFiddle](http://jsfiddle.net/QKHJJ/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T15:09:17.370

更新了你的 jsFiddle，你忘记了 array = array.replace。

[http://jsfiddle.net/QKHJJ/3/](http://jsfiddle.net/QKHJJ/3/)

# opencv - OpenCV Stitcher 返回 ERR_NEED_MORE_IMGS

> ID：12497480
> 
> 赞同：3
> 
> 时间：2012-09-19T15:05:28.897
> 
> 标签：opencv

我在这里遇到了一些使用 OpenCV 进行简单拼接工具测试的问题。

这是我的代码：

```
IplImage *pLeft,
         *pRight;
pLeft = cvLoadImage( "left.jpg" );
pRight = cvLoadImage( "right.jpg" );

cv::Mat cvMatLeft( pLeft, true ),
        cvMatRight( pRight, true );

std::vector<cv::Mat> imgs;
imgs.push_back( cvMatLeft );
imgs.push_back( cvMatRight );

cv::Mat cvMatOutput;

cv::Stitcher myStitcher = cv::Stitcher::createDefault( true );
cv::Stitcher::Status myStatus = myStitcher.stitch( imgs, cvMatOutput ); 
```

我在运行此代码时取回了枚举 ERR_NEED_MORE_IMGS。当我调试 OpenCV 调用的函数时，我确实认识到以下不确定性：

缝合（）的第一个参数是一个名为图像的 cv::InputArray。仔细看看它会发现，参数 sz.width 和 sz.height 是 0。进一步在运行估计转换（）两次时，函数 matchImages（）被调用，其中成员 imgs_ 被检查。这个是从 InputArray 派生的，并且（导致）size()（图像）为 0。

这导致提到的枚举。

我究竟做错了什么？关于缝合器或 cv::Mat 的初始化？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T11:58:53.510

我认为当您使用类似的图像时会发生这种情况。当您使用提取的特征点数量较少的图像时，它确实如此。

# windows - wxPython：将框架置于一切之上

> ID：12497482
> 
> 赞同：4
> 
> 时间：2012-09-19T15:05:37.710
> 
> 标签：windows, user-interface, wxpython, z-order, always-on-top

我希望我的框架始终处于顶部，但我希望它真正处于顶部。我不希望其他窗口隐藏它，即使它们也“始终在顶部”。我正在使用`wx.STAY_ON_TOP`and `wx.FRAME_FLOAT_ON_PARENT`，但仍然有窗口出现在我的顶部。此外，任务栏出现在我的框架顶部，而我希望它位于我的框架后面。

我尝试了很多没有用的东西，这里详细[说明](https://groups.google.com/forum/?fromgroups=#!searchin/wxpython-users/on%2420top/wxpython-users/LDqVoR6jVCo/ZLReBWApOWwJ)。

知道如何让我的框架真正在上面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:31:56.130

因为它们不是这样做的标准方法，因为它通常是一种不受欢迎的效果，您可以通过再次频繁设置最顶部标志来“否决”任何其他寻求最顶部位置的应用程序来实现这一点。您可以使用每 x 毫秒设置一次值的计时器来执行此操作，或者您可以尝试仅在窗口失去焦点时再次设置 ontop 标志。设置 ontop 标志的事件是：

```
EVT_SET_FOCUS 
EVT_KILL_FOCUS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T13:38:30.457

尝试使用这个：

```
wx.Frame.SetFocus() 
```

# xpages - 在 xpage 上动画图像

> ID：12497486
> 
> 赞同：0
> 
> 时间：2012-09-19T15:06:00.817
> 
> 标签：xpages

我想让一系列图像滑入页面上的一个部分。谁能指出我这样做的技术？

非常感谢！克莱姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:17:21.823

如果您喜欢使用 XPage 附带的 Dojo，请查看以下链接：

*   [http://davidjs.com/2011/01/fun-with-dojo-animation/](http://davidjs.com/2011/01/fun-with-dojo-animation/)
*   [https://dojotoolkit.org/reference-guide/1.8/dojox/image/LightboxNano.html](https://dojotoolkit.org/reference-guide/1.8/dojox/image/LightboxNano.html)
*   [http://ofps.oreilly.com/titles/9780596516482/animation_and_special_effects.html](http://ofps.oreilly.com/titles/9780596516482/animation_and_special_effects.html)
*   [http://almaer.com/blog/cleanup-of-manual-animation-via-dojo-animation](http://almaer.com/blog/cleanup-of-manual-animation-via-dojo-animation)

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:19:32.980

听起来您正在寻找轮播 - 看看这些 jQuery 插件

[http://www.tripwiremagazine.com/2012/06/jquery-carousel.html](http://www.tripwiremagazine.com/2012/06/jquery-carousel.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T10:50:41.007

查看 8.5.3 UP1 和 extlib 中可用的 Dojo Effects 简单操作。

![Dojo Effects 简单动作](../Images/6cf3753324fe08996fb0e025309eea2f.png)

此处的文档：

[http://infolib.lotus.com/resources/domino/8.5.3/doc/designer_up1/en_us/DominoDesignerXPagesExtensionLibrary.html#Simpleactions_dojoslideto](http://infolib.lotus.com/resources/domino/8.5.3/doc/designer_up1/en_us/DominoDesignerXPagesExtensionLibrary.html#Simpleactions_dojoslideto)

# sed - sed - 这个大括号符号叫什么？

> ID：12497489
> 
> 赞同：4
> 
> 时间：2012-09-19T15:06:08.910
> 
> 标签：sed, operator-keyword, curly-braces

我刚发现这个：

```
sed '/label/{n;n;s/{}/{some comment}/;}' 
```

预期的效果是寻找`label`，向下进行 2 行 ( )，然后在 ( )`n;n;`中替换。`s``some comment`

这是我从来不知道的惊人能力`sed`。

有人会好心指定这个花括号符号的名称，以及花括号内的运算符类的名称吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:12:26.360

花括号允许对多个命令进行分组，以便它们在相同的地址范围内执行（[参考](http://www.grymoire.com/Unix/Sed.html#uh-35)）。这里的事情是您指定一个地址（带有一个或两个行号或模式），然后将一组命令应用于匹配的行。

该`n`命令没有什么特别之处，它记录在`man`以及链接文档中。我不确定它是否有一个通用名称。

来自`man sed`：

> n N 读取/追加下一行输入到模式空间。

# blackberry - 黑莓上的 ICS 文件

> ID：12497498
> 
> 赞同：1
> 
> 时间：2012-09-19T15:06:42.593
> 
> 标签：blackberry, icalendar

我正在向黑莓手机发送 ICS 文件，当您打开邮件时，我在手机上收到以下错误：

> 应用程序/X-rimdevicecalendar，当打开时，BlackBerry 智能手机会声明此附件类型无法在您的设备上查看。

我在黑莓[知识库](http://btsc.webapps.blackberry.com/btsc/viewdocument.do?noCount=true&externalId=KB19700&sliceId=1&cmd=displayKC&dialogID=40304&docType=kc&isLoadPublishedVer=&stateId=40306&docTypeID=DT_SUPPORTISSUE_1_1&ViewedDocsListHelper=com.kanisa.apps.common.BaseViewedDocsListHelperImpl)中发现了这个问题，但我无法修复它。有人知道如何解决吗？我应该如何发送 ICS 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:14:55.783

**.ics**文件是 Apple 的 iCal 日历软件的日历事件文件。其他一些应用程序支持这种文件类型，但不是全部......而且一些确实有一些问题的应用程序这样做。

您至少有几个选择，具体取决于这些日历事件文件的生成和发送方式。

1.  您可以尝试将它们作为 .vcs 文件发送（当然，将内容重新格式化为 VCS 文件）
2.  如果您要坚持使用 .ics 文件，[请查看此 CrackBerry.com 线程](http://forums.crackberry.com/forum-f2/ics-calendar-attachment-workaround-237230/)

基本上，看起来有一种解决方法，您可能必须以编程方式编辑 .ics 文件，并替换此内容：

```
METHOD:PUBLISH 
```

有了这个：

```
METHOD:REQUEST 
```

我自己没有这样做，所以不能保证。但是，这看起来像是一个很有前途的潜在解决方案，您可以尝试一下。

# android - Book App iPhone 和 Android 的文件扩展名

> ID：12497511
> 
> 赞同：3
> 
> 时间：2012-09-19T15:07:23.917
> 
> 标签：android, iphone, cordova

我第一次构建一个图书应用程序。我正在开发该应用程序，以便您可以从一到 5 本书中进行选择，然后将这本书作为应用程序内购买来购买。我正在使用 phonegap 构建应用程序。

我的问题是我需要为 iPhone 的实际书籍使用什么文件格式？Android 需要什么文件格式？

我需要准备实际书籍的文件，并且我需要知道它们应该使用什么扩展名才能正常运行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:21:33.667

您可以使用 .epub、.mobi 或 .pdf 中的任何一种。

在 .pdf 文件中，Adobe 通过在其 Acrobat Reader 软件中添加回流功能解决了固定屏幕尺寸的缺点。大多数优秀的 PDF 软件现在都支持回流，所以这个限制是过去最好的。

这里有几个相同的链接

[PDF格式](http://wiki.mobileread.com/wiki/PDF)

[电子书格式比较](http://en.wikipedia.org/wiki/Comparison_of_e-book_formats)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:01:09.353

我认为您应该研究像 epub 或 mobi 这样的开放标准。PDF 我不推荐，因为它非常静态并且不能很好地扩展。（例如一个页面就是一个页​​面，不管屏幕大小）

# regex - 相同数量的 0 和 1 的正则表达式

> ID：12497514
> 
> 赞同：4
> 
> 时间：2012-09-19T15:07:29.790
> 
> 标签：regex

如何找到数量相等的 1 和 0 的正则表达式。我也对您如何看待这种解决方案感兴趣？

例如：应该匹配：1100、00100111、01。不应该匹配：110、0、11001。

我需要正则表达式，它给出了所有这些字符串的集合。如果集合中的字符串长度由正则表达式给出，`2n`则 number of`0s`应等于 number `1s = n`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-05-18T10:59:27.140

无法为语言 L = (0,1)（相同数量的 1 和 0）生成正则表达式。这不是正则语言，所以不能用正则表达式来描述。这不是常规的，因为接受它的自动机将需要不同数量的内存，具体取决于输入的长度。常规语言是一种使用恒定内存的语言，无论输入的长度如何。您描述的语言可以由上下文无关语法生成，但不能由正则表达式生成。以下 CFG 生成字符串，其中 0 的数量和 1 的数量相等。如果 S 是语言中的任何单词：S -> SS；S -> 0S1；S -> 1S0; S -> e 空词 对于这种语言，您需要一个堆栈，并且可以设计一个下推自动机来接受它，或者一个图灵机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:24:16.583

常规语法（有限状态自动机）不可能：[http ://en.wikipedia.org/wiki/Regular_language](http://en.wikipedia.org/wiki/Regular_language)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-12T15:36:22.900

这是满足您需求的 .NET 引擎的正则表达式模式。在[ideone.com](http://ideone.com/F6ZJOi)上查看它的实际应用。

```
^((?(D)(?!))(?<C>1)|(?(D)(?!))(?<-C>0)|(?(C)(?!))(?<D>0)|(?(C)(?!))(?<-D>1))*(?(C)(?!))(?(D)(?!))$ 
```

它通过使用两个堆栈来工作，如果当前的 1 多于 0，则使用一个 (C)，如果零多于一，则使用另一个 (D)。

不漂亮，绝对不可用，但它有效。（哈！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T15:41:45.153

虽然这对于另一个答案中所述的常规语法是不可能的，但扫描字符串应该相对容易，为 each 递增一个计数器`1`并为 each 递减它`0`。如果最终计数为 0，则`0`s 和`1`s 的数量相等（模 2^wordsize - 注意溢出会使它有点棘手，但取决于是否可以对输入做出其他假设，即可能没有必要）。

# regex - 正则表达式查找包含 foo_bar 或不包含 foo 的所有行

> ID：12497527
> 
> 赞同：3
> 
> 时间：2012-09-19T15:08:03.287
> 
> 标签：regex, grep

我很难写一个正则表达式放入 grep 以匹配所有包含 foo_bar 的行和所有其他不包含 foo_.* 的行（除了应该仍然匹配的 foo_bar ）。

所以给出：

```
foo_bar Line 1
foo_baz Line 2
Line 3
foo_biz Line 4 
```

我希望第 1 行和第 3 行返回。

请注意，我不能只匹配不匹配 foo_baz 和不匹配 foo_biz，因为 baz 和 biz 可以是很多很多东西。它必须是 foo_.*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:17:54.983

你需要结合一个正则匹配和一个负匹配所以正匹配 1 为 foo_bar

```
foo_bar 
```

然后否定匹配 2 对于所有这些不包含 foo_ 使用堆栈溢出很好的解释 [正则表达式来匹配不包含单词的行？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

```
^((?!foo_.*).)*$ 
```

在替代正则表达式中结合两者

```
(foo_bar|^((?!foo_.*).)*$) 
```

现在让我们试试::

```
 $ cat <<EOF | perl -ane ' /(foo_bar|^((?!foo_.*).)*$)/ && print $_'
    > foo_bar 1
    > fee_foo
    > foo bar
    > foo_buz RT
    > fo_foo 1 
    > fo_ foo_bar
    > EOF 
```

给

```
foo_bar 1
fee_foo
foo bar
fo_foo 1 
fo_ foo_bar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:24:24.233

在 OS XI 下，对您的输入执行以下命令：

```
$ grep -P -v '^foo_(?!bar)' test.txt 
foo_bar Line 1
Line 3 
```

请注意：

```
-P, --perl-regexp
       Interpret PATTERN as a Perl regular expression.
-v, --invert-match
       Invert the sense of matching, to select non-matching lines. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:19:40.530

使用 sed：

```
sed -n '/foo_bar/p;/foo_/!p' input 
```

这告诉 sed 默认情况下不打印 ( `-n`) 并在`foo_bar`匹配或`foo_`不匹配时打印。

# wpf - 我怎么知道弹出菜单是如何关闭的？

> ID：12497528
> 
> 赞同：0
> 
> 时间：2012-09-19T15:08:08.743
> 
> 标签：wpf, event-handling, calendar, datepicker

我有一个 WPF DatePicker，和任何日期选择器一样，它有一个内置日历，您可以通过单击小日历图标打开它。

这个日历被放在一个弹出菜单中，所以它的行为就像一个，即：一旦它被打开，有两种方法可以关闭它：

*   验证您的选择（用鼠标单击日期，点击“Enter”并突出显示日期等...）
*   取消（点击“Echap”，在弹出窗口外点击，等等...）

我的问题是，我需要知道使用了哪个，但我似乎无法找到一种方法来做到这一点。

现在我听“CalendarClosedEvent”，但它没有告诉我日历是*如何*关闭的。

我还使用“PreviewKeyDownEvent”来捕获“Echap”键，效果很好，除了它不包括用户在日历之外单击以关闭它的情况。

有没有办法做到这一点？如果有，那是什么？

（注意：我对弹出菜单对象而不是 datePicker 中的日历对象的通用答案感到满意）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:40:29.827

至少对于 DatePicker，您可以将 SelectedDate 设置为 null （这实际上是默认设置，所以只需保留它）。然后，只要用户在控件内单击，就会触发 SelectedDateChanged。

这是我能找到的唯一可以标记差异的东西。希望能帮助到你。

# msbuild - 当项目设置为“无”时，动态构建内容项目不会复制

> ID：12497530
> 
> 赞同：1
> 
> 时间：2012-09-19T15:08:13.773
> 
> 标签：msbuild, xna, xna-4.0, content-pipeline

所以我正在构建一个工具，它可以即时创建一个 ContentProject 然后构建它（以便它输出 Xnb） 目前的问题是，如果用*CopyToOutputDirectory = 'always' 或 'PreserveNewest'*。如果我们在 .contentProj 中查看不应该构建但应该复制的文件的该部分，则看起来像这样

```
<ItemGroup>
 <None Include="MyFile.file">
   <Name>level1</Name>
   <Importer>XmlImporter</Importer>
   <Processor>PassThroughProcessor</Processor>
   <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
 </None> 
```

但是，我正在即时构建内容项目，因此我需要以下代码来创建项目并添加项目

```
 var projectPath = Path.Combine(buildDirectory, "content.contentproj");
_projectRootElement = ProjectRootElement.Create(projectPath);

        _projectRootElement.AddImport("$(MSBuildExtensionsPath)\\Microsoft\\XNA Game Studio\\v4.0\\Microsoft.Xna.GameStudio.ContentPipeline.targets");

        _contentProject = new Project(_projectRootElement);

        _contentProject.SetProperty("XnaPlatform", "Windows");
        _contentProject.SetProperty("XnaProfile", "HiDef");
        _contentProject.SetProperty("XnaFrameworkVersion", "v4.0");
        _contentProject.SetProperty("Configuration", "Debug");
        _contentProject.SetProperty("OutputPath", _outputDirectory);

        // Register any custom importers or processors.
        foreach (string pipelineAssembly in PipelineAssemblies)
        {
            _contentProject.AddItem("Reference", pipelineAssembly);
        }

        // Hook up our custom error logger.
        _errorLogger = new ErrorLogger();
        _buildParameters = new BuildParameters(ProjectCollection.GlobalProjectCollection)
                            {
                                Loggers = new ILogger[] { _errorLogger,  }
                            };
//.... removed code that is not required the following is code that adds each item to the project. In case of items that shoulndt compile I m using None (as in xml from project above)

        var itemType = compile ? "Compile" : "None";

        var items = _contentProject.AddItem(itemType, filename);
        var item = items.SingleOrDefault(x => x.EvaluatedInclude.Equals(filename, StringComparison.InvariantCultureIgnoreCase));

        item.SetMetadataValue("Link", Path.GetFileName(filename));
        item.SetMetadataValue("Name", Path.GetFileNameWithoutExtension(filename));

        if (!compile)
            item.SetMetadataValue("CopyToOutputDirectory", "Always"); 
```

最后是构建代码

```
BuildManager.DefaultBuildManager.BeginBuild(_buildParameters);

        var request = new BuildRequestData(_contentProject.CreateProjectInstance(), new string[0]);

        var submission = BuildManager.DefaultBuildManager.PendBuildRequest(request);

        var execute = Task.Factory.StartNew(() => submission.ExecuteAsync(null, null), cancellationTokenSource.Token);
        var endBuild = execute.ContinueWith(ant => BuildManager.DefaultBuildManager.EndBuild());

        endBuild.Wait(); 
```

在 BuildRequest 中，空数组接受作为目标的参数......我已经经历了许多不同的目标，它们做不同的事情，从构建但没有真正输出文件到将依赖 dll 复制到主文件夹但不是我需要的

干杯

# internet-explorer - IE9 条件注释——为什么它们不起作用

> ID：12497532
> 
> 赞同：0
> 
> 时间：2012-09-19T15:08:18.377
> 
> 标签：internet-explorer, xhtml

我发现了很多关于这个主题的问题，但没有一个答案有帮助，所以我再问一次。

我有一个带有此头部的网站（php）：

```
<?php header( 'Content-type: application/xhtml+xml' ); ?>
<?php header( 'X-UA-Compatible: IE=9' ); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
    <!--[if IE]>
        <style type="text/css">
            body{
                background-color: #000000;
            }
        </style>
    <![endif]--> 
```

条件评论不起作用，无论我尝试什么，有什么问题？我需要 xpath 的 xhtml 标头，所以我不能删除它们。

问候...

**编辑：**

似乎是第 1 行的标题禁用了它们的功能，但没有它，xpath 不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:17:09.213

条件注释与 XML 解析规则不兼容，因此 IE 只是将它们视为在作为`application/xhtml+xml`.

你对此无能为力。只是不要使用它们。

# html-parsing - 我可以在 html 敏捷包中获得完整的站点地图吗？

> ID：12497534
> 
> 赞同：0
> 
> 时间：2012-09-19T15:08:31.267
> 
> 标签：html-parsing, html-agility-pack, sitemap

> **可能重复：**
> [如何使用 HTML 敏捷包](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)

我还没有下载 Html Agility Pack，所以我想知道我是否可以轻松地让它解析一个网站（可能包含 PHP）并让我在内存中制作一个 html 文件的站点地图。Html Agility Pack 是为此设计的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:37:35.430

Html Agility Pack 是一个用于处理 html 文档对象模型的框架。这不会帮助您直接构建站点地图。

您可以在自己的逻辑中使用它，但它只会涵盖 DOM 内部的导航。

附注：HAP 不是 Microsoft 产品，而是社区开源项目。

# eclipse - Jaxb 与 Eclipse 的自定义绑定

> ID：12497535
> 
> 赞同：2
> 
> 时间：2012-09-19T15:08:35.893
> 
> 标签：eclipse, jaxb, content-assist

我在 Eclipse 中有一个 jaxb 自定义绑定文件（名为 binding.xjb），虽然它在 xml 编辑器中打开，但它不会为我导入的任何命名空间提供内容帮助。这使得检查文件的有效性变得非常困难。

文件的顶部如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<jaxb:bindings version="2.0" xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
xmlns:xs="http://www.w3.org/2001/XMLSchema">` 
```

有人知道我需要做什么才能让内容辅助为这个文件工作吗？

谢谢

**更新：** 继布莱斯回答（下）之后，我设置：

> ```
> Location:    http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd
> KeyType:     Namespace name
> Key          http://java.sun.com/xml/ns/jaxb 
> ```

现在我可以在 Eclipse 中看到内容辅助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:25:09.057

如果您在 Eclipse XML 目录中注册了 XML 模式，那么当您创建具有适当名称空间限定的相应根元素时，XML 编辑器将为您提供内容帮助。以下是在 Eclipse Juno 中执行此操作的点击次数：

*   打开首选项窗口： `Eclipse`|`Preferences`
*   首选项窗口： `XML`| `XML Catalog`|`Add`

# java - ServletContextListener.contextDestroyed 中的 JNDI 查找

> ID：12497538
> 
> 赞同：1
> 
> 时间：2012-09-19T15:08:42.390
> 
> 标签：java, jndi, jboss7.x, servlet-listeners

我正在使用 JBoss 7.1.1 和 servlet-api 2.5。

我必须在应用程序关闭时关闭一些位于 JNDI 中的对象。

我`ServletContextListener`用于此目的：

```
 public class MyServletContextListener implements ServletContextListener {
    ...

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
        ((TaskClient) new InitialContext().lookup("myName")).disconnect();
    }
} 
```

但我得到例外：

```
查找 myName 时出错，服务服务
jboss.naming.context.java.myName 没有启动
```

如果我在应用程序运行时尝试查找对象，一切都很好。

感谢您的任何帮助。

* * *

**更新**

我如何将数据绑定到 jndi：

```
 public class MyJbpmServletContextListener implements ServletContextListener {
    public static final String TASK_CLIENT_JNDI_NAME = "myJbpmTaskClient";
    private Log logger = SLF4JLogFactory.getLog(getClass());

    @Override
    public void contextInitialized(ServletContextEvent sce) {
        try {
            TaskClient tc = ...
            // long initialization of TaskClient
            InitialContext context = new InitialContext();
            context.bind(TASK_CLIENT_JNDI_NAME, client);
        } catch (NamingException exception) {
            logger.error("Cannot bind task client", exception);
        }
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
        try {
            ((TaskClient) new InitialContext().lookup(TASK_CLIENT_JNDI_NAME)).disconnect();
        } catch (NamingException exception) {
            logger.error("Cannot obtain task client", exception);
        }
    }
}
```

`TASK_CLIENT_JNDI_NAME`应用程序运行时，可通过以下路径访问该对象。但是当`contextDestroyed`我打电话时`NamingException`。

我不知道它是如何以及何时被摧毁的。我只确定我没有重新绑定或取消绑定它。

* * *

**更新2**

我也尝试使用 jndi 路径`java:comp/myName`, `java:comp/env/myName`, `java:/myName`, `java:jboss/myName`. 行为是相同的：可以在应用程序运行时查找对象，而在调用方法时无法查找`ServletContextListener.contextDestroyed`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:04:03.400

对我来说看起来像一个 JBoss 错误，我创建了[AS7-5746](https://issues.jboss.org/browse/AS7-5746)

# c# - c# 从安全选项卡中删除用户

> ID：12497541
> 
> 赞同：1
> 
> 时间：2012-09-19T15:08:53.480
> 
> 标签：c#

我正在删除从文件夹中删除给定用户的权限，我希望能够从文件夹安全选项卡列表中删除用户

摘录代码

```
myDirectorySecurity.RemoveAccessRule(new FileSystemAccessRule(User, FileSystemRights.Write | FileSystemRights.Read, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
     PropagationFlags.None, AccessControlType.Allow));

                myDirectoryInfo.SetAccessControl(myDirectorySecurity); 
```

我想在权限被删除后删除用户..

[图片 http://i93.photobucket.com/albums/l66/reavenm/Capture_zps51403cae.png](http://i93.photobucket.com/albums/l66/reavenm/Capture_zps51403cae.png)

我试图将其添加到我的代码中

```
DataSet dataSet = new DataSet(); 
string sql = "SELECT key, fdate, user, perm, sfolder FROM  permuser WHERE        fdate=CURDATE()";

MySqlConnection connection = new MySqlConnection(MyConString);
MySqlCommand cmdSel = new MySqlCommand(sql, connection);
new MySqlDataAdapter(cmdSel).Fill(dataSet, "permuser");

foreach (DataRow row in dataSet.Tables["permuser"].Rows)
    {
         string fuser = row["user"].ToString();
         string pathtxt = row["sfolder"].ToString();

        DirectoryInfo myDirectoryInfo = new DirectoryInfo(pathtxt);
        DirectorySecurity myDirectorySecurity = myDirectoryInfo.GetAccessControl();
        string User = System.Environment.UserDomainName + "\\" + fuser;

                myDirectorySecurity.RemoveAccessRule(new FileSystemAccessRule(User, FileSystemRights.Write | FileSystemRights.Read, InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
     PropagationFlags.None, AccessControlType.Allow));

                myDirectoryInfo.SetAccessControl(myDirectorySecurity);
                   //it should go here
    }

connection.Close();
connection.Dispose();
}

catch (MySqlException ex)
{
Console.WriteLine(ex.Message);
Environment.Exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:15:29.443

我们使用以下方法从他们不再有权访问的文件夹中删除用户/组。

```
var accountToRemove = "Some account";
var security = Directory.GetAccessControl(path);
var rules = security.GetAccessRules(true, true, typeof(NTAccount));

foreach (FileSystemAccessRule rule in rules)
{
    if (rule.IdentityReference.Value == accountToRemove) 
        security.RemoveAccessRuleSpecific(rule);

} 
```

用以下内容替换你的 foreach 循环

```
foreach (DataRow row in dataSet.Tables["permuser"].Rows)
{
     string fuser = row["user"].ToString();
     string pathtxt = row["sfolder"].ToString();

    DirectoryInfo myDirectoryInfo = new DirectoryInfo(pathtxt);
    DirectorySecurity myDirectorySecurity = myDirectoryInfo.GetAccessControl();
    string User = System.Environment.UserDomainName + "\\" + fuser;

    var rules = myDirectorySecurity.GetAccessRules(true, true, typeof(NTAccount));
    foreach( var rule in rules)
    {
        if (rule.IdentityReference.Value == User) 
            security.RemoveAccessRuleSpecific(rule);

    }
} 
```

# haskell - 类型参数约束类型类实例的类型 * -> *

> ID：12497542
> 
> 赞同：16
> 
> 时间：2012-09-19T15:08:53.963
> 
> 标签：haskell, typeclass

假设我有`Heap a`type where `Heap`is type constructor of kind `* -> *`。堆上的许多基本操作都要求`a`类型是`Ord`类型类的实例。

```
data Heap a = ...

findMin :: Ord a => Heap a -> a
deleteMin :: Ord a => Heap a -> Heap a 
```

一旦类型参数是类型类的实例，我想将我的类型声明`Heap`为类型类的实例（通过和函数很容易表达）。`Foldable``a``Ord``findMin``deleteMin`

当我们处理需要 kind 类型的类型类时，这种关系可以很容易地表达出来`*`，例如`Show`：

```
instance Show a => Show (Heap a) where
    show h = ... 
```

但是我在声明以下内容时遇到问题`Foldable`：

```
instance Foldable Heap where
    -- Ouch, there is no `a` type parameter to put the constraint on!
    foldr f z h = ... 
```

`a`是否可以在此类实例声明中对类型参数施加约束？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T16:41:22.437

一般来说，不，当类型构造函数本身被赋予实例时，没有办法约束它应用到的类型。大多数情况下这是一件好事，因为它确保了`Functor`实例对它们的元素类型真正不可知，这有助于保持良好和可预测的行为良好和可预测。

有时它反而令人烦恼，最常见的例子确实需要`Ord`对排序数据结构进行约束，否则它可能是一个很好的、表现良好的实例。

有一些实验技术涉及诸如约束类型之类的东西，但在您的特定情况下，已经有一个可行的解决方案。如果您查看 的定义`Foldable`，它表示仅`foldMap`或`foldr`需要实现，因此我们将考虑这些。注意类型：

```
foldMap :: (Foldable t, Monoid m) => (a -> m) -> t a -> m
foldr :: (Foldable t) => (a -> b -> b) -> b -> t a -> b 
```

在这两种情况下，带有`Foldable`实例的类型只出现一次，作为函数的参数。因此，您可以使用带有约束的[GADT](http://www.haskell.org/ghc/docs/latest/html/users_guide/data-type-extensions.html#gadt)`Ord`：

```
data Heap a where
    Heap :: (Ord a) => ... 
```

通过这样做，您在`Ord`任何时候*创建*一个`Heap`值时都需要一个实例，甚至是一个空堆；但是当您*收到*一个`Heap`值时，对其进行模式匹配会将`Ord`实例带回范围 - 甚至在`Foldable`实例内部！

请注意，这在许多其他情况下无济于事：

```
fmap :: (Functor f) => (a -> b) -> f a -> f b 
```

在这里，我们可以获得一个`Ord`on 的实例`a`，但我们还需要一个 for `b`，这是不可能的。

```
return :: (Monad m) => a -> m a 
```

这里我们也需要提供一个`Ord`实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:26:28.833

看看`keys`关于 Hackage 的图书馆。检查它的`FoldableWithKey`类型类是否是您需要的。

# python - 在 Pyramid 中使用 NumPy

> ID：12497545
> 
> 赞同：1
> 
> 时间：2012-09-19T15:09:02.960
> 
> 标签：python, numpy, pyramid

我想使用 NumPy 为 Pyramid 中可调用的视图执行一些数组计算。我使用的数组非常大（3500x3500），所以我想知道加载它的最佳位置是重复使用。

现在我的应用程序是一个页面，我正在使用一个可调用的视图。

阵列将从磁盘加载并且不会更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:22:02.637

如果数组是可以在线程之间共享的，那么您可以在应用程序启动时将其存储在注册表中（`config.registry['my_big_array'] = ??`）。如果它不能共享，那么我建议使用一个队列系统，它可以始终加载数据，可能在另一个进程中。您可以通过将注册表中的值设置为线程本地来解决此问题，然后在变量中存储一个新数组（如果其中不存在），但是您将拥有每个线程的数组副本，这对于这么大的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:24:40.657

我只是将它加载到代码中明显的地方，你需要使用它（在你看来，我猜？），看看你是否有性能问题。最好使用实际数字而不是试图猜测会出现什么问题。你通常会对现实感到惊讶。

如果您确实看到性能问题，假设您不需要为多个线程中的每一个创建副本，请尝试在导入后将其加载到全局范围内。如果这不起作用，请尝试将其移动到自己的模块中并导入。如果这仍然没有帮助......我不知道那是什么。

# java - 关于计算读取文件所花费的总时间

> ID：12497546
> 
> 赞同：0
> 
> 时间：2012-09-19T15:09:10.593
> 
> 标签：java, time, io

我的 C: 驱动器中有一个名为 abcd.log 的日志文件，我正在通过 java 程序读取它，我想测量程序完全读取日志文件所花费的时间请告知如何实现这一点..！ ！

```
public class Readdemo {

    public static void main(String[] args) {

        File file = new File("C://abcd.log");
        FileInputStream fis = null;

        try {
            fis = new FileInputStream(file);

            System.out.println("Total file size to read (in bytes) : "
                    + fis.available());

            int content;
            while ((content = fis.read()) != -1) {
                // convert to char and display it
                System.out.print((char) content);
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fis != null)
                    fis.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }
} 
```

我想出了这个..

```
public class BufferedRedeem {

    public static void main(String[] args) {

        BufferedReader br = null;
        long startTime = System.currentTimeMillis();

        try {

            String sCurrentLine;

            br = new BufferedReader(new FileReader("C://abcd.log"));

            while ((sCurrentLine = br.readLine()) != null) {
                System.out.println(sCurrentLine);
            }
            long elapsedTime = System.currentTimeMillis() - startTime;

            System.out.println("Total execution time taken in millis: "
                    + elapsedTime);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null)br.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:10:21.260

只需使用`System.currentTimeMillis()`以毫秒为单位记录之前/之后的时间。

`System.nanoTime()`是另一种选择，但值得阅读[此答案](https://stackoverflow.com/questions/351565/system-currenttimemillis-vs-system-nanotime)以了解差异和用法。

# reporting-services - SSRS 订阅在呈现时失败

> ID：12497547
> 
> 赞同：2
> 
> 时间：2012-09-19T15:09:11.033
> 
> 标签：reporting-services

我在 VS 2008 中创建了一个 SSRS 报告，并在 Windows Server 2012 上运行它。当我从报告管理器运行报告时，它运行没有问题。但是，当我设置预定订阅时，我收到以下错误消息：**发送邮件失败：呈现报告期间发生错误。邮件不会被重新发送。**

我尝试了许多渲染格式选项，包括 Excel、Word 和 CSV。它在每种格式上都失败了。我确实尝试了“带有报告数据的 XML 文件”选项并发送了邮件。我还使用了“包含链接”选项而不包含报告并且有效。

我还在处理选项中将报告超时选项设置为“不要超时报告”，但仍然出现问题。

我还在运行另一个相同的报告，除了时间间隔并且运行良好。失败的报告捕获每周数据，而运行正常的报告捕获每月数据。

对这份报告的内容有任何想法吗？我已经提供了我能想到的所有信息，但是如果有人需要任何其他信息，请告诉我！谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T20:36:29.660

虽然我不是 100% 确定这一点，但在我更改名称并删除了一些特殊字符（主要是括号）之后，这似乎清除了它。

编辑：经过很长一段时间后，我确信这不是修复。我有一些报告在一段时间内似乎运行良好，但后来失败了。从报告管理器运行报告时，它运行良好，并且可以毫无问题地导出。

我随后从 Report Manager 运行报告并将其导出到 .csv 文件中。在文本编辑器中打开此文件后，我注意到在整个报告中随机分布有双引号 (")。导出到 excel 时没有显示。我重写了脚本以将引号替换为空格。我运行它再次从报告管理器并再次将其导出到.csv，结果中有双引号。当我从 SSMS 执行此操作时，我没有得到双引号。看来这是由于导出而发生的。报告将显示在报告管理器中，但不会出现在订阅中。

任何想法或建议肯定会受到赞赏。我已经为此工作了一段时间（几个月），需要做出一些解决方案。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T18:36:44.157

最终通过使用缺少的服务包更新 sql server 找到并解决了该解决方案。

# qt - Qtableview 调整大小

> ID：12497550
> 
> 赞同：1
> 
> 时间：2012-09-19T15:09:20.863
> 
> 标签：qt, qtableview, qdockwidget

我有几个 qdockwidget 和其中一个 qtableview，如附图所示[，](http://www.qtcentre.org/attachment.php?attachmentid=8228&d=1348059875)我的问题是我希望这些表格与码头的大小相同。

我试图这样做，但它不起作用：

```
table-> resize (dock-> size()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:31:25.990

> 默认情况下，表格中的单元格不会扩展以填充可用空间。您可以通过拉伸最后一个标题部分使单元格填充可用空间。使用horizo​​ntalHeader() 或verticalHeader() 访问相关标题并设置标题的stretchLastSection 属性。
> *来源：* [*QTableView 文档*](http://qt-project.org/doc/qt-4.8/qtableview.html)

我希望这对你有帮助。干杯。

# php - PHP购物车添加删除按钮？

> ID：12497557
> 
> 赞同：0
> 
> 时间：2012-09-19T15:09:51.557
> 
> 标签：php, mysql, html

我有一个购物车，它基本上只是用于在网站的一侧进行展示，此时，每当您单击购买某个商品时，它会将 sku 添加到已购买商品的数组中，然后购物车会拉出描述，来自项目数据库的具有该 sku 的每个项目的 sku、价格和标签。这一切都很好，但我想在每个项目旁边添加一个按钮，如果该人选择不购买它，它将删除该行上的项目。这是我当前的代码：

```
<?php
include 'connect.php';

mysql_select_db('test', $con);

$arr = array(
"1",
"12",
"123",
"1234",
"1234h",
"12345h",
);

echo "<h1>cart</h1><br />";
echo "bought items: <br />";
echo "<br />";
echo "(Description|(Sku)| - Price <br />";
echo "<br />";
$a_length = count($arr);
for($i=0;$i<$a_length;$i++){

$sku = $arr[$i];

$result = mysql_query("SELECT label,sku,description,price FROM cart_test WHERE sku = '$sku'");

if(!$result){
    echo 'could not run query: ' . mysql_error();
    exit;
}

$row = mysql_fetch_row($result);

echo "$row[0]: $row[2]($row[1]) - $$row[3]";
echo "<br />";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:15:47.813

您是否尝试将其从阵列中删除？你没有向数据库中插入任何东西，所以它不在乎。

# c# - EF 代码迁移 - 将字符串迁移到十进制字段 (v. 4.3.1.0)

> ID：12497559
> 
> 赞同：0
> 
> 时间：2012-09-19T15:10:02.300
> 
> 标签：c#, entity-framework

我正在支持一个应用程序，我们需要在其中迁移代码首先生成的数据库。更改是将三个属性（都在同一个表/实体上）从字符串修改为可以为空的小数。

这样做的部分要求是我需要将更改输出到 SQL 文件，因为我们将补丁部署到我们的客户端，该客户端也在生产中托管产品。

有人告诉我这是可能的，但我不确定该怎么做。

问题：我如何首先使用 EF 代码将数据库表迁移为具有可为空的小数而不是字符串，并将更改输出到 SQL 文件。我假设当前列中的所有值都可以转换为小数，但如果不是，那将如何改变复杂性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:16:06.567

如果我的要求是正确的，那么您需要创建一个迁移，然后运行

```
Update-Database -Script 
```

这将创建一个 sql 脚本，该脚本将针对数据库运行以更新结构。

还将更新 DB 结构，并`Update-Database -Verbose`输出 SQL 运行。

如果需要保留数据，也可以直接在迁移脚本中运行 SQL：

```
public partial class RenameColumn : DbMigration
{
    public override void Up()
    {
       Sql("update blah...");
    }

    public override void Down()
    {
      Sql("drop table bobby");
    } 
```

在那里你可以做任何你需要做的事情来保存数据：添加临时列/表，在那里复制原始数据，更改列类型，将数据转换为所需的格式并将其复制到新列，清理。

如果您在迁移中有 Sql 命令，当您运行时`Update-Database -Script`，它将为您提供组合脚本 - 脚手架迁移脚本和您手动编写的脚本。

# java - 删除 JTable 列标识符

> ID：12497560
> 
> 赞同：2
> 
> 时间：2012-09-19T15:10:05.200
> 
> 标签：java, swing, jtable, tablecolumn

我不想自定义我的`JTable`. 我不想删除包含列名的列标识符。我不想简单地将其留空，但我不想“隐藏”它。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:27:56.990

您可以通过这种方式隐藏表头：

```
table.getTableHeader().setVisible(false); 
```

或者您可以完全删除它：

```
table.setTableHeader(null); 
```

# c# - 使用foreach时如何检查DataTable行是否已更改？

> ID：12497562
> 
> 赞同：0
> 
> 时间：2012-09-19T15:10:15.737
> 
> 标签：c#, datatable, .net-2.0

我有以下代码：

```
int sequence = 1; //This is incremented every time the Account changes
int numberOfItems; //This is reset after the Account changes
decimal totalAmount = 0m; //This is reset after the Account changes
string prevRow; //not sure how to handle this

foreach(DataRow row in dt.Rows)
{
  //I am stuck here
  if(row["Account"]) == prevRow)
  {
  numberOfItems++;
  totalAmount += Convert.ToDecimal(row["TotalAmount"]);
  }
  else
  {
     //reset everything and increase sequence
     numberOfItems = 0;
     totalAmount = 0m;
     sequence++
  }

} 
```

我的初始表可能包含数据：

abc, 50.0
abc, 50.0
def, 60.0
ghi, 70.0

当循环使用 for 时，abc 的 numberOfItems 应该 = 2，def 为 1，ghi 为 1。abc 的总金额应为 100.0，def 为 60.0，ghi 为 70.0。abc 应该是 1，def 应该是 2，ghi 应该是 3。

运行 for 循环时我注意到的第一件事是它跳过了第一个表中的一堆行，所以当我在 else 中创建第二个表时，numberOfItems 和 totalAmount 仍然为 0。第二个表应该类似于：

abc, 100, 2, 1
def, 60, 1, 2
ghi, 70, 1, 3

其中 csv 值中的最后一个数字是序列，之前的数字是每个帐户的 numberOfItems。

```
for (int i = 0; i < dt.Rows.Count; i++ )
            {
                DataRow row = dt.Rows[i];
                DataRow prevRow = i > 0 ? dt.Rows[i - 1] : null;

                if (prevRow != null && row[1] == prevRow[1])
                {
                    numberOfItems++;
                    totalAmount += Convert.ToDecimal(row[2]);
                    row[3] = "D";
                    row[4] = c;
                    row[5] = sequence;

                }
                else
                {
                    dt2.Rows.Add("N",
                        c,
                        row[1],
                        row[2],
                        row[3],
                        numberOfItems,
                        totalAmount,
                        sequence);

                    numberOfItems = 0;
                    totalAmount = 0m;
                    sequence++;
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:12:57.263

您可以使用`DataTable.GetChanges`

链接：http: [//msdn.microsoft.com/en-us/library/k2552649.aspx](http://msdn.microsoft.com/en-us/library/k2552649.aspx)

```
var changeTable = table.GetChanges();
foreach(var item in changeTable.Rows)
{
 .....

} 
```

对于修改后的行，您可以使用参数`DataRowState.Modified`

```
table.GetChanges(DataRowState.Modified); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:21:01.063

一行`foreach`不知道它是前一行。那么为什么不简单地使用 a`for-loop`呢？

```
for(int i = 0; i < dt.Rows.Count; i++)
{
    DataRow row = dt.Rows[ i ];
    DataRow prevRow = i > 0 ? dt.Rows[ i - 1 ] : null;

    if(prevRow != null && row["Account"] == prevRow["Account"])
    {
        // ...
    }
} 
```

* * *

现在您已经更新了您的问题，我建议您使用`Linq-To-DataSet`：

```
var groups = dt.AsEnumerable()
    .GroupBy(r => r.Field<String>("Account"))
    .Select((g, i) => new { 
        Account = g.Key,
        TotalAmount = g.Sum(r => r.Field<double>("TotalAmount")),
        Count = g.Count(),
        Id = i + 1,
    });

foreach (var grp in groups)
    Console.WriteLine("{0},{1},{2},{3}"
        ,grp.Account, grp.TotalAmount, grp.Count, grp.Id); 
```

请注意，您需要添加`using System.Linq`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:19:46.707

```
int sequence = 1; //This is incremented every time the Account changes
int numberOfItems; //This is reset after the Account changes
decimal totalAmount = 0m; //This is reset after the Account changes
String prevAccount == ""; //not sure how to handle this

foreach(DataRow row in dt.Rows)
{
   //I am stuck here
   if(row["Account"] == prevAccount)
   {
      numberOfItems++;
      totalAmount += Convert.ToDecimal(row["TotalAmount"]);
   }
   else
   {
       //reset everything and increase sequence
       numberOfItems = 0;
       totalAmount = 0m;
       sequence++;
    }
    prevAccount = row["Account"];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:15:46.113

```
int sequence = 1; //This is incremented every time the Account changes
int numberOfItems; //This is reset after the Account changes
decimal totalAmount = 0m; //This is reset after the Account changes
string prevRow = null; //not sure how to handle this

foreach(DataRow row in dt.Rows)
{
  //I am stuck here
  if((row["Account"]) == prevRow)
  {
  numberOfItems++;
  totalAmount += Convert.ToDecimal(row["TotalAmount"]);
  }
  else
  {
     //reset everything and increase sequence
     numberOfItems = 0;
     totalAmount = 0m;
     sequence++;
  }
  prevRow = row["Account"];

} 
```

请注意，我放了一个 ; 序列递增后。

# ruby-on-rails - 以线程安全的方式设置 Rails ActiveResource 标头

> ID：12497563
> 
> 赞同：2
> 
> 时间：2012-09-19T15:10:17.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, thread-safety, activeresource

我正在调用引擎内的 ActiveResource 对象，我需要以线程安全的方式设置标头。

我在引擎中有 /lib/mymodule.rb ，它看起来像这样：

```
module MyModule
  def self.my_method()
    begin
       data = WebResource.find(:all) # Where WebResource < ActiveResource::Base
    rescue
       data = nil
    end

    return data
  end
end 
```

然后在我的视图/控制器中，我大致这样称呼这个方法：

```
WebResource.headers[:some_id] = cookies[:some_id]
MyModule::my_method() 
```

在问[了这个问题](https://stackoverflow.com/questions/12484221/rails-engine-thread-safety)并做了一些阅读之后，看起来这不是线程安全的，因为我在类级别设置了标题。

以线程安全的方式设置这些标头的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:02:48.200

解决了这个问题。解决方案受[这个问题](https://stackoverflow.com/questions/8088126/is-it-thread-safe-to-set-active-resource-http-authentication-on-a-per-user-basis)的影响。本质上，我重写了 self.headers() 方法以将标头存储在 Thread.current 中，而不是类变量中。

它看起来像这样：

```
class WebResource < ActiveResource::Base

  # ...

  class << self

    def headers
      Thread.current["active.resource.currentthread.headers"] = {} if Thread.current["active.resource.currentthread.headers"].blank?
      Thread.current["active.resource.currentthread.headers"]
    end

  end
end 
```

# wcf - 服务参考忽略已知类型

> ID：12497567
> 
> 赞同：1
> 
> 时间：2012-09-19T15:10:28.500
> 
> 标签：wcf, .net-4.0, known-types

```
[CollectionDataContract(Namespace = "CISICPD")]
[KnownType(typeof(List<CISICPD.LeeDictionary>))]
public class LeeDictionary : Dictionary<string, object> 
{
}

[DataContract(Namespace = "CISICPD")]
[KnownType(typeof(List<CISICPD.LeeDictionary>))]
public class TestResponse
{
    [DataMember]
    public List<LeeDictionary> Results;

    public TestResponse() { Results = new List<LeeDictionary>(); }
    [OnDeserializing]
    private void OnDeserialize(StreamingContext c) { Results = new List<LeeDictionary>(); }
} 
```

如果在服务引用中使用上述内容，则生成`reference.cs`的将忽略上面指定的 knowntypes。

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
[System.Runtime.Serialization.DataContractAttribute(Name="TestResponse", Namespace="CISICPD")]
[System.SerializableAttribute()]
public partial class TestResponse : object, System.Runtime.Serialization.IExtensibleDataObject, System.ComponentModel.INotifyPropertyChanged { 
```

我指定了，`LeeDictionary`所以我可以设置我自己的命名空间（认为它可能是命名空间问题），将其更改为`Dictionary<string,object>`是一样的。当字典本身包含另一个字典并抱怨类型未知时，问题就来了。

如果我将 knowntype 行添加到`reference.cs`它，那么一切正常，但我不明白为什么它不会在生成引用时将其放入？

# redmine - 有没有办法在不更新到 Redmine 2.0 的情况下使用新插件？

> ID：12497568
> 
> 赞同：1
> 
> 时间：2012-09-19T15:10:37.080
> 
> 标签：redmine, redmine-plugins, bitnami

我想更新 redmine 上的插件，但更新文件后我不断收到此错误消息： `The server is temporarily unable to service your request due to mainenance downtime or capacity problems. Please try again later.`

我认为新插件和我正在使用的 Redmine 版本存在兼容性问题。这些插件与 Redmine 2.0 兼容，但我使用的是 Redmine 1.4.1.stable。

有没有办法在不更新到 Redmine 2.0 的情况下使用新插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T12:37:02.157

我想我们不能。在测试了 10 个不同的插件后它不起作用。

# jquery - css 和 jquery 的布局问题

> ID：12497569
> 
> 赞同：0
> 
> 时间：2012-09-19T15:10:37.703
> 
> 标签：jquery, css

我越来越近了，但在布置一些 css 时仍然存在一些问题。看到这个[**小提琴**](http://jsfiddle.net/4HgyB/5/)。

1.  当您单击按钮时，信息消息会根据需要显示在视频下方，但它也会将 div`#help-tips-ipad`向下移动。它应该留在原地。

2.  由于某种原因，信息消息的长度比视频播放器长。我希望它是相同的大小。我不明白，因为我明确将其设置为`width: 320px`？

与小提琴相同的代码：

```
<p><div id="player-ipad">Video player here</div></p>
<div id="quote"><p></p></div>
<div id="help-tips-ipad">
<p>Read our Guide</p>
<p>Visit our Support Forum and ask a question</p>
<ul>
<li>Text.</li>
<li>More text.</li>
</ul>
</div>

<div id="prettytablediv-ipad">
<p>
<table id="webcam-table" class="pretty">
<thead>
    <tr>
        <th>Camera Name</th>
    </tr>
</thead>
<tbody>
<tr>
<td>
    <input type="submit" class="play" value="button1">
</td>
</tr>
<tr>
<td>
    <input type="submit" class="play" value="button2">
</td>
</tr>
</tbody>
</table>
</p>
</div> 
```

CSS：

```
#prettytablediv-ipad {
  width: 550px;
  float: left;            
}
#help-tips-ipad {
  width: 320px;
  float: right;

}
#player-ipad {
  width:320px;
  height:240px;
  float: left;
  margin: 0 0 15px;
  border: 5px solid black;
} 
```

jQuery：

```
$(document).on("click", ".play", function() {
$('#quote p').html("INFO").css({'border': '1px solid', 'margin': '10px 0px', 'padding': '15px 10px 15px 50px', 'background-repeat': 'no-repeat', 'background-position': '10px center', 'color': '#00529B', 'background-color': '#BDE5F8', 'width': '320px','display': 'block','clear': 'left'});
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:19:09.047

1.  这是一个浮动包装问题 -`<div id="quote">`元素是 100% 宽度，您需要将其向左浮动，否则后续元素将被强制低于它。真的，你应该在之后添加，`<div id="help-tips-ipad">`否则浮动不会达到你的预期。
2.  在应用宽度后添加填充 - 您需要在设置固定宽度时进行补偿，就像您所做的那样。

有关示例，请参[见此更新的小提琴。](http://jsfiddle.net/4HgyB/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:23:26.650

原因是因为您使用 320px 作为宽度，然后将填充添加到该值上。

```
{ 'padding' : '15px 10px 15px 50px' } 
```

浏览器将占用 320 像素，并添加 10 像素 + 50 像素（左右填充），总宽度为**380 像素**；

您需要从宽度中**减去 60px**，然后变为**260px**。

然后你还需要考虑边框，在你的大盒子上是 10px (5+5)，减去你生成的盒子上的 2 x 1px = 添加另一个 8px

新的总宽度 = **268px；**

简而言之：**你的盒子的总宽度是 Width + left border width + right border width + left padding + right padding**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:26:04.110

1.  您不能用段落包装 div (

    标签）。浮动的段落也有 100% 的宽度，它应该与他上面的 div 具有相同的宽度（最好用相同的 div 包裹两者）

2.  填充是在宽度之后添加的，总宽度是两者的总和，所以它比你想要的宽

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:23:45.080

更改`width`为`270px`

```
$(document).on("click", ".play", function() {

$('#quote p').html("INFO").css({
    'border': '1px solid', 
    'margin': '10px 0px', 
    'padding': '15px 10px 15px 50px', 
    'background-repeat': 'no-repeat', 
    'background-position': '10px center', 
    'color': '#00529B', 
    'background-color': '#BDE5F8', 
    'width': '270px',
    'display': 'block',
    'clear': 'left'}); 
}); 
```

​</p>

# ajax - 在其他函数中调用 jQuery Ajax

> ID：12497573
> 
> 赞同：0
> 
> 时间：2012-09-19T15:10:45.677
> 
> 标签：ajax, jquery

我对 Ajax 有疑问。我正在修改一个游戏指导我其他。

`gameOver`我的指南游戏中的功能运行良好：

```
// Some variables

$(document).ready(function()
{

    ...

});

...

// Some functions

...

function gameOver() {

    ...

    post="points="+score+"&idapp=1";
    alert("IN");
    $.ajax({
        type: "POST",
        url: "saveScore1.php",
        dataType: 'json',
        data: post,
        success: function(data){
            alert(data.msg);
        },
        error: function(xhr, ajaxOptions, thrownError){
            alert(xhr.status);
        }
    });
    alert("OUT");

} 
```

但在游戏中，我正在修改`gameOver`接下来要展示的功能片段不起作用。它没有调用`saveScore2.php`文件，我不知道为什么。它实际上是函数的相同内容代码`$.ajax`。

```
var game = {

    ...

    // Some variables and functions

    ...

    gameOver: function() {

        ...

        post="points="+score+"&idapp=2";
        alert("IN");
        $.ajax({
            type: "POST",
            url: "saveScore2.php",
            dataType: 'json',
            data: post,
            success: function(data){
                alert(data.msg);
            },
            error: function(xhr, ajaxOptions, thrownError){
                alert(xhr.status);
            }
        });
        alert("OUT");
    }

};

$(window).load(function() {

    ...

} 
```

我将非常感谢能帮助我解决这个问题。

澄清：

和警报显示在第一场比赛中`IN`。`OUT`在第二`IN`场比赛中显示了`OUT`警报，但在第二场比赛中没有显示警报。忽略`$.ajax`两个游戏中函数内部的成功和错误警报。他们从未在第一场比赛或第二场比赛中出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:15:03.967

It looks like you are setting the object variable `game` with a method of `gameOver`. So somewhere in your code you need to call `game.gameOver` to call the function.

# sql - 在 SQL Query 中使用 Replace 时我需要知道什么？

> ID：12497574
> 
> 赞同：0
> 
> 时间：2012-09-19T15:10:52.947
> 
> 标签：sql, oracle, oracle10g

**我真的想在工作时保持谨慎。**

我需要在我的 SQL 查询中用一些文本替换空白，但我不想实际更新到数据库中，只想更新到我查询的数据。

如果我使用`Replace()`它会在服务器上替换还是只替换我查询的数据？

你能给我举个例子吗，我如何使用 Replace() 只替换我读入的数据而不是服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:13:39.640

您如何使用`REPLACE`与更新数据无关。

相反，重要的是您是否使用`SELECT`or`UPDATE`语句。

一条[`SELECT`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10002.htm)语句只会查询（检索）数据，它不会在数据库中修改它。

甲骨文文档：

> 使用 SELECT 语句或子查询从一个或多个表、对象表、视图、对象视图或具体化视图中检索数据。

一个[`UPDATE`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10008.htm#SQLRF01708)语句将修改数据库中的数据，假设它找到匹配的行。

甲骨文文档：

> 使用 UPDATE 语句更改表或视图的基表或实例化视图的主表中的现有值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:15:05.810

If you use [`Replace()`](http://www.techonthenet.com/oracle/functions/replace.php) in a `SELECT` then it will only replace it in your query.

`SELECT` version, this will replace any blank spaces in your field with no space in the data you return:

```
SELECT replace(yourField, ' ', '')
FROM yourtable 
```

If you use `Replace()` in an `UPDATE` then you will be updating it in the server.

`UPDATE` version, this will update all values in your field to replace any blank spaces:

```
UPDATE yourTable
SET yourfield = replace(yourField, ' ', '') 
```

# google-chrome - SVG 文件中的 CSS3 动画和过渡仅适用于 Google Chrome（甚至 Safari）

> ID：12497580
> 
> 赞同：1
> 
> 时间：2012-09-19T15:11:10.377
> 
> 标签：google-chrome, css, svg, css-transitions, css-animations

我正在制作一个小型 SVG 动画（SVG 从[这里](http://thenounproject.com/noun/radar/#icon-No793)下载）。我设法让它在 Google Chrome（版本 21.0.1180.89 m）中正常工作，但在任何其他浏览器中都没有（包括 Safari——我觉得这很奇怪，因为两者都使用 Webkit）。我正在使用 CSS3 制作动画。下面是代码 - 对此的任何帮助都非常感谢。

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="radar" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="300px" height="300px" viewBox="0 0 300 300" enable-background="new 0 0 300 300" xml:space="preserve">

<style>
#signal{
  position:absolute;
  left:150px;
  top:150px;

  transform-origin:150px 150px;
  -webkit-transform-origin:150px 150px;
  -moz-transform-origin:150px 150px;
  -o-transform-origin:150px 150px;

  animation:signal 4s linear infinite;
  -webkit-animation:signal 4s linear infinite;
  -moz-animation:signal 4s linear infinite;
  -o-animation:signal 4s linear infinite;
}
@keyframes signal{
  from  {transform: rotate(0deg);}
  to    {transform: rotate(-360deg);}
}

@-webkit-keyframes signal{
  from  {-webkit-transform: rotate(0deg);}
  to    {-webkit-transform: rotate(-360deg);}
}

@-moz-keyframes signal{
  from  {-moz-transform: rotate(0deg);}
  to    {-moz-transform: rotate(-360deg);}
}

@-o-keyframes signal{
  from  {-o-transform: rotate(0deg);}
  to    {-o-transform: rotate(-360deg);}
}

.planet{
  position:absolute;
  left:150px;
  top:150px;
  padding:20px;

  transform-origin:150px 150px;
  -webkit-transform-origin:150px 150px;
  -moz-transform-origin:150px 150px;
  -o-transform-origin:150px 150px;

  transition-duration:10s;
  -webkit-transition-duration:10s;
  -moz-transition-duration:10s;
  -o-transition-duration:10s;

  transition-property:width, height, transform;
  -webkit-transition-property:width, height, transform;
  -moz-transition-property:width, height, transform;
  -o-transition-property:width, height, transform;
  }

.planet:hover{
  transform:rotate(360deg);
  -webkit-transform:rotate(360deg);
  -moz-transform:rotate(360deg);
  -o-transform:rotate(360deg);

  transition-duration:2s;
  -webkit-transition-duration:2s;
  -moz-transition-duration:2s;
  -o-transition-duration:2s;
}
</style>
    <circle class="planet" fill="#000" cx="174.1" cy="58.092" r="7.881"/>
    <circle class="planet" fill="#000" cx="130.281" cy="112.11" r="6.723"/>
    <circle class="planet" fill="#000" cx="60.732" cy="99.822" r="12.285"/>

    <path fill="#000" d="M150,0C67.157,0,0,67.157,0,150s67.157,150,150,150s150-67.157,150-150S232.843,0,150,0z M278.968,147.334
    H226.37c-1.373-39.98-33.434-72.152-73.37-73.696V21.037c33.334,0.755,64.561,14.09,88.217,37.747
    C264.952,82.519,278.294,113.875,278.968,147.334z M147,147.334H79.63c1.371-36.61,30.803-66.154,67.37-67.695V147.334z
     M147,153.334v67.027c-36.345-1.532-65.652-30.725-67.353-67.027H147z M153,153.334h67.353c-1.7,36.303-31.007,65.495-67.353,67.027
    V153.334z M153,147.334V79.639c36.567,1.542,65.998,31.085,67.37,67.695H153z M58.783,58.783
    C82.439,35.127,113.666,21.792,147,21.037v52.602c-39.937,1.544-71.997,33.715-73.37,73.696H21.032
    C21.707,113.875,35.048,82.519,58.783,58.783z M21.043,153.334h52.604c1.704,39.671,33.638,71.492,73.353,73.027v52.603
    c-33.334-0.756-64.561-14.091-88.217-37.747C35.206,217.639,21.88,186.542,21.043,153.334z M241.217,241.217
    c-23.656,23.656-54.883,36.991-88.217,37.747v-52.603c39.715-1.535,71.648-33.356,73.354-73.027h52.604
    C278.12,186.542,264.795,217.639,241.217,241.217z"/>

    <path id="signal" fill="#000" d="M149.444,159.059c-2.175,0-4.351-0.83-6.01-2.489c-3.319-3.319-3.32-8.701,0-12.021l73.721-73.727
    c3.32-3.319,8.702-3.32,12.021,0c3.32,3.319,3.32,8.701,0.001,12.021l-73.721,73.727
    C153.795,158.229,151.62,159.059,149.444,159.059z"/>
</svg> 
```

谢谢你，伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:51:15.143

您目前处于最前沿，Chrome 21 于 2012 年 8 月 29 日发布。将于 2012 年 10 月 9 日发布的 Firefox 16 支持这一点。我想 Safari 会在某个时候支持它，但它的发布频率低于 Firefox/Chrome。

# jsf - EL 值可以在 JSF 和 Facelets 中相互传递吗？

> ID：12497581
> 
> 赞同：1
> 
> 时间：2012-09-19T15:11:17.327
> 
> 标签：jsf, jsf-2, facelets, ajax4jsf

我想将 EL 一个 JSF 页面传递给 Facelets 模板。Facelets 模板只是将 EL 值理解为字符串值。如何将 EL 字符串传递给 Faceltes 模板？

page1.xml

```
<ui:include ..../>
<ui:param actionBeanMethod="#{EmployeeActionBean.deleteEmplayee(emp)}> 
```

page2.xml

```
<ui:include ..../>
<ui:param actionBeanMethod="#{DepartmentActionBean.deleteDepartment(dep)}> 
```

在确认模板.xml

```
 <a4j:commandLink onclick="#{rich:component('confirmation')}.show();return false">
        <h:graphicImage value="/img/delete.png" />
    </a4j:commandLink>
    <a4j:jsFunction name="submit" action="#{actionBeanMethod}"/>                    
    <rich:popupPanel id="confirmation" width="250" height="150">
       <f:facet name="header">Confirmation</f:facet>
       <h:panelGrid>
          <h:panelGrid columns="2">
             <h:graphicImage value="/img/alert.png" />
         <h:outputText value="Are you sure?" style="FONT-SIZE: large;" />
          </h:panelGrid>
          <h:panelGroup>
             <input type="button" value="OK" onclick="#{rich:component('confirmation')}.hide();submit();return false" />
         <input type="button" value="Cancel" onclick="#{rich:component('confirmation')}.hide();return false" />
          </h:panelGroup>
       </h:panelGrid>
    </rich:popupPanel> 
```

我想动态改变 a4j:jsFuction 的动作。

```
 When page1.xhtm is call,
    <a4j:jsFunction name="submit" action="#{EmployeeActionBean.deleteEmplayee(emp)"/>

    When page2.xhtm is call,
    <a4j:jsFunction name="submit" action="#{DepartmentActionBean.deleteDepartment(dep)"/> 
```

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:51:38.580

您不能将方法表达式作为`<ui:param>`值传递。它只接受值表达式。

您基本上需要创建一个自定义标记处理程序，它将值表达式重新解释为方法表达式。在当前的开源 JSF 组件/实用程序库中，[OmniFaces](http://omnifaces.org) [`<o:methodParam>`](http://showcase.omnifaces.org/taghandlers/methodParam)是唯一能做到这一点的。

```
<o:methodParam name="methodParam" value="#{actionBeanMethod}" />
<a4j:jsFunction name="submit" action="#{methodParam}" /> 
```

您只需要将 Facelets 包含注册为 Facelets 标记文件并将其用作

```
<my:confirmationTemplate actionBeanMethod="#{EmployeeActionBean.deleteEmplayee(emp)}" /> 
```

另一种方法是改用复合组件。

# asp.net-mvc - System.Reflection.PropertyInfo propertyInfo 返回 NULL？

> ID：12497585
> 
> 赞同：0
> 
> 时间：2012-09-19T15:11:30.977
> 
> 标签：asp.net-mvc

您好我正在将数据表传递给方法“AsJqGridResult”，但由于“System.Reflection.PropertyInfo propertyInfo”返回 NULL，“GetPropertyValue”方法返回错误。

是否有任何问题传递数据表或任何其他问题，请帮助....

**控制器**

```
[HttpPost]
    public ActionResult DynamicGridData(string sidx, string sord, int page, int rows)
    {
        var context = GetTable().AsEnumerable();
        return (context.AsQueryable().AsJqGridResult(sidx, sord, page, rows));
    }

    public DataTable GetTable()
    {
        DataTable table = new DataTable();
        table.Columns.Add("Number", typeof(int));
        table.Columns.Add("Abr", typeof(string));
        table.Columns.Add("Country", typeof(string));
        table.Columns.Add("Date", typeof(DateTime));

        table.Rows.Add(1, "AF", "AFGHANISTAN", DateTime.Now);
        table.Rows.Add(2, "AX", "ÅLAND ISLANDS", DateTime.Now);

        return table;
    } 
```

**辅助方法**

```
public static JsonResult AsJqGridResult<T>(this IQueryable<T> source, string column, string sortOrder, int page, int pageSize)
{
  int pageIndex = Convert.ToInt32(page) - 1;
  int totalRecords = source.Count();
  int totalPages = (int) Math.Ceiling((float) totalRecords/(float) pageSize);

  var list = (sortOrder.ToLower()=="asc") ? 
      source.OrderBy(new Func<T, IComparable>(item => (IComparable) GetPropertyValue(item, column))).Skip(pageIndex*pageSize).Take(pageSize) :
      source.OrderByDescending(new Func<T, IComparable>(item => (IComparable) GetPropertyValue(item, column))).Skip(pageIndex*pageSize).Take(pageSize);

  var jsonData = new
  {
    total = totalPages,
    page,
    records = totalRecords,
    rows = (
            from item in list
            select new
                      {
                        i = Guid.NewGuid(),
                        cell = GetGridCells(item)
                      }).ToArray()
  };

  return new JsonResult {Data = jsonData};
}

/// <summary>
/// Gets the property value.
/// </summary>
/// <param name="obj">The obj.</param>
/// <param name="property">The property.</param>
/// <returns></returns>
private static object GetPropertyValue(object obj, string property) {
  System.Reflection.PropertyInfo propertyInfo = obj.GetType().GetProperty(property);
  return propertyInfo.GetValue(obj, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:14:06.830

DataTables 没有其列的属性。

相反，您需要调用`TypeDescriptor.GetProperties()`表，它将使用`ITypedList`实现来获取`PropertyDescriptor`实际列的 s。

# c# - 隔离存储参数NullException

> ID：12497588
> 
> 赞同：0
> 
> 时间：2012-09-19T15:11:42.770
> 
> 标签：c#, isolatedstorage

我不明白这是怎么回事：

构造函数：

```
IsolatedStorageFile isf;
        public FileManagement()
        {
            isf = IsolatedStorageFile.GetUserStoreForApplication();
        } 
```

当我保存文件时：

```
 public bool saveCredentials(String username, String userpass)
        {
            bool res = false;

            StreamWriter writeFile = new StreamWriter(new IsolatedStorageFileStream("usercred.custom",
                FileMode.Create, FileAccess.Write, isf));
            writeFile.WriteLine(username);
            writeFile.WriteLine(userpass);
            res = true;

            return res;
        } 
```

当我尝试阅读它们时：

```
public String readUsername()
    {
        String username = "";
        IsolatedStorageFileStream fileStream = isf.OpenFile("usercred.custom", FileMode.Open, FileAccess.Read);
        StreamReader reader = new StreamReader(fileStream);
        username = reader.ReadLine();

        return username;
    } 
```

读取返回 null。

我尝试保存一个文件并向其中写入一些内容，但不知何故它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:45:05.740

你必须关闭你的流。请在返回前添加 reader.Close()、writefile.Close() 和 fileStream.Close()，然后重试。

# javascript - 您如何处理 AngularJS 指令中的异步数据

> ID：12497590
> 
> 赞同：9
> 
> 时间：2012-09-19T15:11:51.350
> 
> 标签：javascript, asynchronous, angularjs

这是一个与此类似的[问题](https://stackoverflow.com/questions/12220521/angularjs-how-to-handle-long-running-requests-for-data-needed-in-controller-se)。我仍然在我的指令中看到一些异步数据问题。基本上，我有要向其中传递数据的指令，并且这些数据是异步获取的。我开始使用指令上的范围属性执行此操作，如下所示：

```
scope: {
    myAsyncData: '='
} 
```

在链接函数中，我添加了一个`$watch`，因此我可以根据范围内的值更新我的模型。像这样的东西：

```
scope.$watch(scope.foo, function() {
    //logic based on myAsyncData
} 
```

当我这样做时，我开始收到 javascript 错误，因为异步数据尚未返回。这就是促使我发布上面链接的问题的原因。所以，然后我将我的更改`$watch`为这样的：

```
scope.$watch(scope.foo, function() {
    if (angular.isDefined(scope.myAsyncData))
    {
        //logic based on myAsyncData
    }
} 
```

当我这样做时，我没有收到 javascript 错误。但是，`$watch`返回数据时不会再次运行，因此我的视图无法正确反映模型。我尝试`$scope.foo`在数据返回后分配一个`$timeout`来触发手表，但这似乎过于依赖时间并且不是很健壮。

我的问题是在指令中与异步数据交互的正确方法是什么？我已经看到了一些在指令中获取数据的示例，如下所示：

```
scope.$eval(attrs.myAsyncData); 
```

这似乎并没有改变任何东西。这与`myAsyncData: '='`上述有什么根本不同吗？

我开始怀疑我是否应该只通过服务获取数据，但似乎会有完全相同的问题。我也想过直接在指令中获取数据，但我不想让指令负责获取数据。我只希望指令负责显示数据并在用户与之交互时更新视图。

我可能会遗漏一些关于如何做到这一点的明显内容，因此我将非常感谢任何输入。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-28T15:59:38.367

我不能很好地理解 Misko Hevery 的答案，所以我决定使用事件，它们对我很有效。

在我的控制器中，我加载了这样的数据：

```
$http({method: 'GET', url: 'js/datasets/ips-processed.json'}).
        success(function(data, status, headers, config) {

 //post load code here and...
 $scope.$broadcast("Data_Ready"); 
```

在我的指令中，我把

```
return {
            restrict: 'A',
            scope: {
                donutid: "=",
                dataset: "="
            },
            link: function(scope, elements, attrs) {
                scope.$on("Data_Ready", function  (){
//here the functionality for this directive 
```

希望它对某人有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T03:10:53.447

遇到这个答案，寻找相同问题的解决方案。

经过大量研究，建议您[在此处使用 Misko Hevery 的解决方案](https://stackoverflow.com/questions/11972026/delaying-angularjs-route-change-until-model-loaded-to-prevent-flicker)来延迟控制器的加载，直到 XHR 的加载“解决”。

这似乎解决了我所有的“指令中的异步数据加载”问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-13T11:56:24.917

有点晚了 - 但我遇到了同样的问题，并通过提供我`$watch`的调用[`watchExpression`](https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$watch)参数作为函数来解决它。

```
scope.$watch(function() {
        return scope.foo;
    },
    function() {
        //logic based on myAsyncData
    }
); 
```

# html - 如何制作全局标题而不是将其粘贴到每个页面中？

> ID：12497597
> 
> 赞同：1
> 
> 时间：2012-09-19T15:12:08.277
> 
> 标签：html

每次更新标题时，我都会进入并单独更新每个页面。我很确定有一种方法可以将标题保存在一个文件中，然后在每个页面中调用它。

这样我更新了一个文件，它会在每一页上自动更新。我是这一切的新手，所以请保持简单易懂:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:38:26.087

使用`seamless`属性，您的`iframe`标签看起来像是文档的一部分：

```
<iframe src="header.htm" seamless="seamless"></iframe> 
```

或者

```
<iframe src="header.htm" seamless></iframe> 
```

请注意浏览器支持！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:17:59.547

如果您的网络主机支持 php，这很容易做到。

首先创建您的 header.php 文件并将所有文本、按钮等插入到 header.php 文件中。

其次创建一个footer.php 文件并在footer.php 文件中插入所有文本、按钮等。

然后创建一个 index.php 并像这样调用包含文件。

```
<div><?php include 'header.php'; ?></div>
<div>Sone Content</div>
<div><?php include 'footer.php'; ?></div> 
```

然后对于其他页面遵循相同的指导方针。为了使它工作，您的所有文件都需要具有 .php 扩展名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:16:44.643

You don't say which server you are using to host the files - but most of them have the ability to do server-side includes. This would let you put your header into a separate file, and 'include' it in each html file. When the HTML file is requested, the server would replace the include statement with the contents of the header file.

Check your server documentation for more details

# ruby-on-rails - 在 do 块内运行代码？（活动管理员仪表板）

> ID：12497599
> 
> 赞同：0
> 
> 时间：2012-09-19T15:12:12.693
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

**活动管理员仪表板**

```
 ActiveAdmin.register_page "Dashboard" do

  menu :priority => 1, :label => proc{ I18n.t("active_admin.dashboard") }

  content :title => proc{ I18n.t("active_admin.dashboard") } do

    section h2 "Top Movie" do

            table_for @top_ps.where('ptype = ?', 'movie') do |t|

               column("Title"){|p| link_to p.title, admin_program_path(p.id)}

               column "Start" do |p|

                    p.program_schedules.each do |schedule|

                            link_to distance_of_time_in_words(Time.now, schedule.start,true), admin_program_schedule_path(schedule.id)
                    end

                end

            end
        end

  end # content
end 
```

如果我运行这个我得到

```
[#<ProgramSchedule id: 746, program_id: 430, start: "2012-09-17 09:30:00", stop: "2012-09-17 10:30:00">, 
#<ProgramSchedule id: 8124, program_id: 430, start: "2012-09-22 23:30:00", stop: "2012-09-23 00:30:00">] 
```

代替

```
<a href="/path">Start</a>
<a href="/path">Start</a> 
```

我知道我错在哪里，但是如何在块内执行该代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:34:29.960

此模板 DSL 称为 Arbre。我不确定它是否在 ActiveAdmin 之外大量使用。随着 ActiveAdmin 0.5.0 的发布，它被分成了自己的 gem [https://github.com/gregbell/arbre](https://github.com/gregbell/arbre)

如果你不想处理它，你可以渲染一个部分。所以在你的仪表板代码中放一些类似的东西

```
section h2, "Top Movie" do
  div do
    render :partial => "admin/dashboard/top_movie"
  end
end 
```

进而

```
# /views/admin/dashboard/_top_movie.html.erb

<div style="width:300px;">
  Normal arbitrary view code. <%=some_ruby%>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:20:15.790

`= link_to distance_of_time_in_words(Time.now, schedule.start,true), admin_program_schedule_path(schedule.id)`或者

`<%= link_to distance_of_time_in_words(Time.now, schedule.start,true), admin_program_schedule_path(schedule.id) %>`分别取决于它的haml或erb。

# php - 强制浏览器缓存用 Apache 和 PHP 压缩的 css 和 js 文件

> ID：12497601
> 
> 赞同：1
> 
> 时间：2012-09-19T15:12:25.217
> 
> 标签：php, apache, optimization, mod-rewrite, gzip

假设您的服务器不支持 Apache 上的 deflate 和 gzip 模块。在这种情况下，有几种方法可以压缩您的数据。

我使用 Apache 重写模块和 php gzip 扩展来执行此操作。

我创建了一个名为 gzip.php 的文件来获取 $_SERVER['REQUEST_URI']、获取其内容、设置标题、压缩和刷新内容作为文件。

我保留了所有文件的扩展名，因此 apache 保留了文件类型。

我将这些行添加到 .htaccess 中：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -s
RewriteRule ^((.*)\.(js|css))$ gzip.php [L]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

我已将这些标题添加到我的文件中：

```
$src = $_SERVER['REQUEST_URI'];

// seconds, minutes, hours, days
$expires = 60*60*24*14;

ob_start();
ob_implicit_flush(0);

header("Pragma: public");
header("Cache-Control: maxage=".$expires);
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$expires) . ' GMT');

// Then do everything you want to do on the page
$path = PUBLIC_DIR . $src;
$info = pathinfo($path);
$ext = strtolower($info['extension']);
include_once 'Entezar/File.php';
$mimeType = Entezar_File::getMimeType($path);
header("Content-type: $mimeType");

if (file_exists($path) && in_array($ext, array('js', 'css'))) {
    $fs = stat($path);
    header("Etag: ".sprintf('"%x-%x-%s"', $fs['ino'],     $fs['size'],base_convert(str_pad($fs['mtime'],16,"0"),10,16)));
    echo file_get_contents($path);
}
unset($path, $src, $info, $ext); 
```

我的问题是，当我使用 apache 重写模块和 php 来压缩内容时，FireFox 根本不会从缓存中加载我的文件（css 或 js）！有谁能够帮我？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T08:08:04.623

挖掘机的发现者！在做任何工作之前（压缩 gzip.php 文件中的一些文件）你应该检查 $_SERVER 变量中的这两个键（当然你应该在 apache .htaccess 文件或其他地方设置过期和缓存头......）：

```
$etag = '"' .  md5($contents) . '"';
$etag_header = 'Etag: ' . $etag;
header($etag_header);

if (isset($_SERVER['HTTP_IF_NONE_MATCH']) and $_SERVER['HTTP_IF_NONE_MATCH']==$etag) {
    header("HTTP/1.1 304 Not Modified");
    exit();
} 
```

在 apache .htaccess 中添加以下行：

```
<ifModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault "access plus 1 seconds"
  ExpiresByType text/html "access plus 1 seconds"
  ExpiresByType image/gif "access plus 2592000 seconds"
  ExpiresByType image/jpeg "access plus 2592000 seconds"
  ExpiresByType image/png "access plus 2592000 seconds"
  ExpiresByType text/css "access plus 604800 seconds" 
  ExpiresByType text/javascript "access plus 216000 seconds"
  ExpiresByType application/x-javascript "access plus 216000 seconds"
</ifModule>

<ifModule mod_headers.c>

  <filesMatch "\\.(ico|pdf|flv|jpg|jpeg|png|gif|swf)$">
    Header set Cache-Control "max-age=2592000, public"
  </filesMatch>
  <filesMatch "\\.(css)$">
    Header set Cache-Control "max-age=604800, public"
  </filesMatch>
  <filesMatch "\\.(js)$">
    Header set Cache-Control "max-age=216000, private"
  </filesMatch>
  <filesMatch "\\.(xml|txt)$">
    Header set Cache-Control "max-age=216000, public, must-revalidate"
  </filesMatch>
  <filesMatch "\\.(html|htm|php)$">
    Header set Cache-Control "max-age=1, private, must-revalidate"
  </filesMatch>
</ifModule> 
```

# css - 100% 固定 div，在子 div 和固定高度标题中溢出

> ID：12497605
> 
> 赞同：0
> 
> 时间：2012-09-19T15:12:28.787
> 
> 标签：css

我正在寻找一个弹出框，我已经通过一个固定的 div 定位在 5% 的位置。

我希望它用边缘周围的 5% 边框填充整个可视窗口。

目前（我只在Chrome中查看过），我可以实现我想要的布局，但底部没有间隙，因为如果文本div的主体有高度，它会增加标题的高度。

我已经尝试了各种方法，从将它添加到另一个包含 div 和 plonking height: 100% 整个节目中，但无济于事。

[http://jsfiddle.net/VukSZ/](http://jsfiddle.net/VukSZ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:38:11.593

根据目标[浏览器的支持](http://caniuse.com/calc)，您可以使用 CSS[`calc()`](https://developer.mozilla.org/en-US/docs/CSS/calc)功能。只需将您的高度设置`#popup_body`为`calc(100% - 40px);`（您必须包含具有不同供应商特定前缀的多个版本）。

这是您演示的修改版本：[little link](http://jsfiddle.net/glee/fBVtM/)。

如果您需要支持较旧的浏览器，则必须使用 JavaScript。

# php - PHP变量作为SQL查询中的表名

> ID：12497606
> 
> 赞同：1
> 
> 时间：2012-09-19T15:12:33.353
> 
> 标签：php, jquery

PHP 变量可以用作 SQL 查询中的表名吗？在我的情况下，FROM 之后的 PHP 变量应该是从我的 JQuery 代码发送的值。我希望 SQL 查询根据从 JQuery 发送的值进行更改（不同的值取决于选择框的哪个选项）。

```
$file_absolute = ---Placeholder for correct file path---;
include_once($file_absolute);
$mysql = new mysqli($db_host, $db_username, $db_password, $db_name);
$verb_value = $_POST['verb_value'];

$mysql->query("SET CHARACTER SET 'utf8'");

$result = $mysql->query("SELECT present_tense FROM $verb_value"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:14:41.330

你可以这样做，是的。你是否想要它是另一回事——如果你将用户输入添加到你的 SQL 查询中，你就会有一个巨大的 SQL 注入漏洞。

也就是说，使用表名，您可以实现白名单，并将传递的值与该值进行比较以获得安全性度量。

但是，您不能将表名（或列名）作为绑定参数传递 - 它们需要作为查询的一部分生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:14:49.567

双引号字符串将解析其中的任何变量，因此这将起作用。单引号字符串不会。

但是，这通常被认为是不安全的。我不确定您是否可以使用 bindParam 方法来实现这一点（我使用 PDO，而不是 mysqli），因为它实际上不是参数。

# sql - 为 array_agg() 设置限制

> ID：12497607
> 
> 赞同：14
> 
> 时间：2012-09-19T15:12:35.493
> 
> 标签：sql, arrays, postgresql, limit

我有以下 Postgres 查询：

```
SELECT array_agg("Esns".id ) 
FROM public."Esns", 
     public."PurchaseOrderItems" 
WHERE 
    "Esns"."PurchaseOrderItemId" = "PurchaseOrderItems".id 
    AND "PurchaseOrderItems"."GradeId"=2 
LIMIT 2; 
```

限制将影响行。我希望它限制`array_agg()`为 2 个项目。以下查询有效，但我的输出带有引号中的每个条目：

```
SELECT array_agg ("temp")  
FROM (
    SELECT "Esns".id 
    FROM public."Esns", 
         public."PurchaseOrderItems" 
    WHERE 
        "Esns"."PurchaseOrderItemId" = "PurchaseOrderItems".id 
        AND "PurchaseOrderItems"."GradeId"=2 
    LIMIT 4
) as "temp" ; 
```

这给了我以下输出

```
{(13),(14),(15),(12)} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T15:35:56.713

```
select id[1], id[2]
from (
    SELECT array_agg("Esns".id ) as id
    FROM public."Esns", 
         public."PurchaseOrderItems" 
    WHERE 
        "Esns"."PurchaseOrderItemId" = "PurchaseOrderItems".id 
        AND "PurchaseOrderItems"."GradeId"=2 
) s 
```

或者，如果您希望输出为数组，则可以对其进行[切片](https://www.postgresql.org/docs/current/arrays.html#ARRAYS-ACCESSING)：

```
SELECT (array_agg("Esns".id ))[1:2] as id_array
FROM public."Esns", 
     public."PurchaseOrderItems" 
WHERE 
    "Esns"."PurchaseOrderItemId" = "PurchaseOrderItems".id 
    AND "PurchaseOrderItems"."GradeId"=2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T17:32:46.447

**结果中的括号（不是“引号”）是行**文字的装饰器。您正在构建一个整行数组（恰好只包含一列）。相反，只聚合**column**。

此外，从查询结果直接[构造数组](https://www.postgresql.org/docs/current/sql-expressions.html#SQL-SYNTAX-ARRAY-CONSTRUCTORS)通常更简单、更快：

```
SELECT ARRAY (
   SELECT e.id 
   FROM   public."Esns" e
   JOIN   public."PurchaseOrderItems" p ON p.id = e."PurchaseOrderItemId"
   WHERE  p."GradeId" = 2 
   --  ORDER BY ???
   LIMIT  4  -- or 2?
   ) 
```

`ORDER BY`如果你想要一个稳定的结果和/或选择某些行，你需要一些东西。否则结果是任意的，并且可以随着每次下一次调用而改变。

在此期间，我使用显式 JOIN 语法重写了查询，这通常是可取的，并使用表别名来简化。

# vhdl - 在 vhdl 中计算（并验证）以太网 FCS (crc32)

> ID：12497608
> 
> 赞同：2
> 
> 时间：2012-09-19T15:12:46.593
> 
> 标签：vhdl, ethernet, crc32

我正在使用[Spartan 3E Starter Kit](http://www.digilentinc.com/Products/Detail.cfm?NavPath=2,400,792&Prod=S3EBOARD)，并尝试通过 100 MBit 链路接收以太网帧。

对于那些不知道的人，该板具有一个 PHY 芯片，将接收时钟暴露在 25 MHz。我已经（几乎）通过缓冲接收到的帧并通过串行链路重新发送它们来验证接收工作正常。

此外，我正在使用[outputlogic.com 的 CRC32 生成器](http://outputlogic.com/?page_id=321)。我将接收到的 nybbles 聚合为字节并将它们转发给 CRC。在帧结束时，我锁存生成的 CRC 并将其与我在以太网帧中找到的 CRC 一起显示在 LCD 上。

但是，（正如您可能已经猜到的）这两个数字不匹配。

```
527edb0d  -- FCS extracted from the frame
43a4d833  -- calculated using the CRC32 generator 
```

第一个也可以通过 pythons crc32 函数运行包来验证，包括由wireshark捕获的帧和通过串行端口从FPGA捕获和检索的帧。

我想它一定或多或少是微不足道的。[我把接收过程贴在这里](http://pastebin.com/XnP9CS1c)。我剥离了所有不必要的东西。通过串行捕获输出时，我添加了一个 fifo（赛灵思现成的单元），它与 CRC 生成器同时锁存以获得完全相同的字节。

有谁知道这有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T11:04:39.287

不久前我开始研究以太网 MAC，虽然我从来没有完成它，但我确实有一个工作的 CRC 生成器，你可以在这里使用它：

[CRC.vhd](https://github.com/pabennett/ethernet_mac/blob/master/source/CRC.vhd)

它基于关于 IEEE 802.3 CRC 的 Xilinx 应用说明，您可以在[此处](http://www.xilinx.com/support/documentation/application_notes/xapp209.pdf)找到。

The CRC is instantiated in the [ethernet receieve component](https://github.com/pabennett/ethernet_mac/blob/master/source/ethernet_receive.vhd), if you look at the ETH_RECEIVE_SM process you can see how the FCS is loaded into the checker.

Hopefully you can spot your mistake by comparing with my code.

Edit:

I took the sample ethernet frame from [fpga4fun](http://www.fpga4fun.com/10BASE-T2.html) and passed it through the CRC checker, see the simulation screenshot below (right click, copy URL and view in a new browser tab for full resolution):

![enter image description here](../Images/ae12276df8948d89c0287fa8657aeb0b.png)

You can see the residual **C704DD7B** at the end there, try doing the same with your own CRC checker and see what you get.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T01:41:55.740

您使用的生成器可能没有对数据进行预处理和后处理。如果该生成器采用一串零并产生零 crc，那么这就是问题所在。一串零不应产生零。（它产生的结果取决于零的数量。）

以太网 crc 的处理是将 crc 反转，然后应用 crc 算法，然后再次反转 crc。

# javascript - 如何获取 Google Maps 3 Directions Service API 来区分多条路线？

> ID：12497609
> 
> 赞同：0
> 
> 时间：2012-09-19T15:12:46.577
> 
> 标签：javascript, jquery, google-maps-api-3

我正在使用[Google Maps API](https://developers.google.com/maps/documentation/javascript/directions)来获取多条路线的行驶距离。每条路线都由不同的司机走；它们都有相同的起点但不同的终点，并且可能有多个航点。

我遇到的问题是 API 似乎没有给我任何方法来命名每条路线，所以当它们异步返回时，我无法确定哪条路线属于哪个驱动程序。的确，每条路线都有不同的地址，但 DirectionsService 响应对象返回的地址与我发送的地址略有不同——例如，“伊利诺伊州德斯普莱恩斯”变为“伊利诺伊州德斯普莱恩斯”——这使得比较不可靠那些。

API 似乎不允许我发送带有请求对象的任意字符串来唯一地命名它们。那么我能做什么呢？

一个*可能*有助于澄清我在做什么的代码片段：

```
$.getJSON(ajaxsource, function(data) {
    var darr = data.driver_info, // includes driver name, start and end addresses
        driver, start, end,
        waypts = [];
    for (var i=0,j=darr.length; i<j; i++) {
        if (driver==$.trim(darr[i][8])) { // same driver, next destination
            //  start = end;
            waypts.push({
                location: end,
                stopover: true });
        } else {
            waypts = [];
            driver = $.trim(darr[i][8]);
            start = $.trim(darr[i][4]);
        }
        end = $.trim(darr[i][2]);

        if (i+1==j || driver!=$.trim(darr[i+1][8])) { 
            var request = { // route object
                origin: start,
                destination: end,
                waypoints: waypts,
                optimizeWaypoints: true,
                travelMode: google.maps.DirectionsTravelMode.DRIVING
            };
            directionsDisplay = new google.maps.DirectionsRenderer();
            directionsService.route(request, function(response, status) {
                var legs = response.routes[0].legs;
                // console.log(response);
                for (var k=0; k<legs.length; k++) {
                    $('#results').append($('<li>').html("Driver " + driver + 
                        "<br>starts at " + legs[k].start_address + 
                        "<br>and drives " + legs[k].distance.text + 
                        "<br>to end at " + legs[k].end_address));
                }
            });
        };

    }; // end for
}); // end getJSON 
```

该代码将根据需要返回所有路线信息，但由于它是异步的，因此每个结果中的都是我的数组`driver`中列出的最后一个驱动程序的名称。`data.driver_info`我需要的是列出应该与该特定路线相关联的驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:26:04.267

在循环中设置 a `var loc_driver = driver;`，以便您可以将它放在`for`循环的本地，然后在回调中使用该值，而不是依赖“全局”（至少，相对于整个`getJSON`调用）值。

对方向服务的回调具有来自 for 循环和整个`function(data){ ... }`.

问题是`driver`每次通过 for 循环都会发生变化，并且您的回调使用该 "global" `driver`。相反，如果您设置一个仅存在于每个 for 循环范围内的变量，并且回调依赖于该变量，那么问题就解决了。

编辑：可能存在一些参考与价值问题，那么如何在方便的地方声明：

```
callbackFactory = function(driver) {
   return function(request, status) {
     var legs = response.routes[0].legs;
     console.log(response);
     for (var k=0; k<legs.length; k++) {
        $('#results').append($('<li>').html("Driver " + driver +
             "<br>starts at " + legs[k].start_address + 
             "<br>and drives " + legs[k].distance.text + 
             "<br>to end at " + legs[k].end_address));
     }
   };
}; 
```

然后在您的控制结构中：

```
directionsService.route(request, callbackFactory(driver)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:34:31.183

更多的调试发现了一个解决方案——谷歌文档没有提到该`response`对象不仅包含状态和路由，还包含一个名为的子对象`ub`，它反映了我发送的请求对象。使用它，我可以准确地比较地址以匹配到司机的路线。

```
Object
    routes: Array[1]
    status: "OK"
    ub: Object
        destination: "1234 Some Street, Antioch, IL"
        optimizeWaypoints: true
        origin: "2345 Anywhere Ave., Lake Forest, IL"
        travelMode: "DRIVING"
        waypoints: Array[0]
        __proto__: Object
    __proto__: Object 
```

我在`directionsService.route()`回调中添加了以下代码：

```
var driver = '',
    end_ub = response.ub.destination;
for (var a=0,b=darr.length; a<b; a++) {
    if (darr[a][2]==end_ub) {
        driver = darr[a][8];
        break;
    };
}; 
```

# hibernate - Hibernate 通过 Annotation 映射 OneToMany

> ID：12497612
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:12:52.390
> 
> 标签：hibernate, one-to-many

亲爱的朋友们，我有两个实体：与 OneToMany 关联关联的员工和部门。即一名员工可以在多个部门工作。我创建了两个员工和两个部门。两名员工在同一个部门工作。当我保存这些实体时，我得到了这个异常。我在这里给出了我的程序的完整代码。提前感谢您帮助任何人。代码： -

-- 部门实体 ---

```
package anno;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="annoDept")
public class AnnoDept {

    @Id
    @Column(name = "deptid")
    private Integer anid;
    @Column(name = "deptname")
    private String anname;

    public Integer getAnid() {
        return anid;
    }

    public void setAnid(Integer anid) {
        this.anid = anid;
    }

    public String getAnname() {
        return anname;
    }

    public void setAnname(String anname) {
        this.anname = anname;
    }

    public boolean equals(Object obj)
    {
         if(!(obj instanceof AnnoDept))
             return false;
          if(((AnnoDept)obj).getAnid()==this.getAnid() && ((AnnoDept)obj).getAnname().equalsIgnoreCase(this.getAnname()))
              return true;
          return false;

    }
}

--Employee Entity code: --

package anno;

import java.util.HashSet;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToMany;
import javax.persistence.Table;

@Entity
@Table(name="annoEmp")
public class AnnoEmp {
     @Id
    private Integer empid;

     @Column(name="EName")
    private String empname;
     public Integer getEmpid() {
        return empid;
    }
    public void setEmpid(Integer empid) {
        this.empid = empid;
    }
    public String getEmpname() {
        return empname;
    }
    public void setEmpname(String empname) {
        this.empname = empname;
    }
    public Set<AnnoDept> getDepts() {
        return depts;
    }
    public void setDepts(Set<AnnoDept> depts) {
        this.depts = depts;
    }

    @OneToMany(cascade={CascadeType.ALL})
    private Set<AnnoDept> depts=new HashSet<AnnoDept>();
}

-- hibernate.cfg.xml file code: --

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
 <session-factory>
  <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
  <property name="connection.url">jdbc:mysql://localhost:3306/test</property>
  <property name="connection.username">root</property>
  <property name="connection.password">root</property>
  <property name="hibernate.hbm2ddl.auto">update</property>
  <property name="hibernate.show_sql">true</property>
  <property name="hibernate.format_query">true</property>
  <mapping class="anno.AnnoEmp"/>
  <mapping class="anno.AnnoDept"/>

 </session-factory>
</hibernate-configuration>

--Test code:--

package anno;

import java.util.HashSet;
import java.util.Set;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.AnnotationConfiguration;

public class AnnoTest {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

    SessionFactory sf=new AnnotationConfiguration().configure("mypack/hibernate.cfg.xml").buildSessionFactory();
    Session hs=sf.openSession();
    Transaction tx=hs.beginTransaction();

    AnnoDept dept=new AnnoDept();
    dept.setAnid(100);dept.setAnname("HR");
    AnnoDept dept3=new AnnoDept();
    dept3.setAnid(300);dept3.setAnname("Admin");
    Set<AnnoDept> deptset1=new HashSet<AnnoDept>();

    AnnoEmp e1=new AnnoEmp();
    e1.setEmpid(10);e1.setEmpname("Pinku");
    deptset1.add(dept);deptset1.add(dept3);
    e1.setDepts(deptset1);hs.save(e1);
    AnnoEmp e2=new AnnoEmp();
    e2.setEmpid(20);e2.setEmpname("Vijay");

    e2.setDepts(deptset1);
    hs.save(e2);

    tx.commit();
    hs.close();
    sf.close();
    }

}

-- Exception ---

log4j:WARN No appenders could be found for logger (org.hibernate.cfg.annotations.Version).
log4j:WARN Please initialize the log4j system properly.
Hibernate: select annodept_.deptid, annodept_.deptname as deptname1_ from annoDept annodept_ where annodept_.deptid=?
Hibernate: select annodept_.deptid, annodept_.deptname as deptname1_ from annoDept annodept_ where annodept_.deptid=?
Hibernate: insert into annoEmp (EName, empid) values (?, ?)
Hibernate: insert into annoDept (deptname, deptid) values (?, ?)
Hibernate: insert into annoDept (deptname, deptid) values (?, ?)
Hibernate: insert into annoEmp (EName, empid) values (?, ?)
Hibernate: insert into annoEmp_annoDept (annoEmp_empid, depts_deptid) values (?, ?)
Hibernate: insert into annoEmp_annoDept (annoEmp_empid, depts_deptid) values (?, ?)
Hibernate: insert into annoEmp_annoDept (annoEmp_empid, depts_deptid) values (?, ?)
Hibernate: insert into annoEmp_annoDept (annoEmp_empid, depts_deptid) values (?, ?)
Exception in thread "main" org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:71)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:253)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:237)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:145)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
    at anno.AnnoTest.main(AnnoTest.java:39)
Caused by: java.sql.BatchUpdateException: Duplicate entry '100' for key 2
    at com.mysql.jdbc.ServerPreparedStatement.executeBatch(ServerPreparedStatement.java:665)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:246)
    ... 8 more

Thanks
Dal Singar yadav 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:32:03.050

您不应该重用您的“deptset1”，它们是 SAME Set 实例，但每个关系都由单独的 AnnoEmp 实例拥有。因此，每个 AnnoEmp 必须有两个不同的 Set 实例。但是您已经在实体类初始化程序中拥有它。那么为什么不为每个实例重用该实例。见下文：

```
AnnoDept dept=new AnnoDept();
dept.setAnid(100);dept.setAnname("HR");
hs.save(dept);                  // ADDED LINE (TO HELP DEBUG)
hs.flush();                     // ADDED LINE (TO HELP DEBUG)

AnnoDept dept3=new AnnoDept();
dept3.setAnid(300);dept3.setAnname("Admin");
hs.save(dept3);                 // ADDED LINE (TO HELP DEBUG)
hs.flush();                     // ADDED LINE (TO HELP DEBUG)
Set<AnnoDept> deptset1;                  // REMOVED =new HashSet<AnnoDept>();

AnnoEmp e1=new AnnoEmp();
e1.setEmpid(10);e1.setEmpname("Pinku");
hs.save(e1);                    // ADDED LINE (TO HELP DEBUG)
hs.flush();                     // ADDED LINE (TO HELP DEBUG)
despset1 = e1.getDepts();                // ADDED LINE
deptset1.add(dept);deptset1.add(dept3);
//e1.setDepts(deptset1);                 // NOT NEEDED
//hs.save(e1);
hs.update(e1);                  // CHANGED TO UPDATE (TO HELP DEBUG)
hs.flush();                     // ADDED LINE (TO HELP DEBUG)

AnnoEmp e2=new AnnoEmp();
e2.setEmpid(20);e2.setEmpname("Vijay");
hs.save(e2);                    // ADDED LINE (TO HELP DEBUG)
hs.flush();                     // ADDED LINE (TO HELP DEBUG)
despset1 = e2.getDepts();                // ADDED LINE
deptset1.add(dept);deptset1.add(dept3);  // ADDED LINE
//e2.setDepts(deptset1);                 // NOT NEEDED
//hs.save(e2);
// WE ARE EXPECTING YOUR ERROR TO OCCUR HERE WHEN STORING THE NEW
// DATA IN THE 'Set' TO DATABASE
hs.update(e2);                  // CHANGED TO UPDATE (TO HELP DEBUG)
hs.flush();                     // ADDED LINE (TO HELP DEBUG) 
```

# xml - 使用 XPath 返回初始值或最近出现的值，然后运行运算符

> ID：12497614
> 
> 赞同：0
> 
> 时间：2012-09-19T15:13:01.433
> 
> 标签：xml, xpath, infopath

我在 MS InfoPath 中有以下 XPath 1.0 表达式（我将发布随附的 XML）：

`//my:Value_Modifier_Group[1=count(following-sibling::my:Value_Modifier_Group)]//my:Modified_Start_Value[(text())] | //my:Start_Value[text() and not(//my:Value_Modifier_Group[1=count(following-sibling::my:Value_Modifier_Group)]//my:Modified_Start_Value[(text()])]`

如果有初始值并且还没有“修改值”，则返回初始值。如果存在修改后的值，则将其返回。

我需要返回该值，然后对其执行以下操作：

`number(//my:Value_Modifier_Group[1=count(following-sibling::my:Value_Modifier_Group)]//my:Modfied_Start_Value) + number(//my:Value_Modifier_Group[0=count(following-sibling::my:Value_Modifier_Group)]//my:Start_Value_Increase) - number(//my:Value_Modifier_Group[0=count(following-sibling::my:Value_Modifier_Group)]//my:Start_Value_Decrease)`

此操作增加或减少增加/减少值。`Modified_Start_Value`问题是如果不存在，这个表达式返回一个 NaN 。否则效果很好。

我需要将这两个表达式组合成一个 XPath 表达式。

*   如果`Modified_Start_Value`有前面的值，则在操作中使用它
*   如果`Modified_Start_Value`没有前面的值，则`Start_Value`在操作中使用
*   重要的是我总是使用“前一个”值，因为前一个值是固定的。它充当参考点或起点。

这是我正在使用的 XML 示例：

```
<?xml version="1.0" encoding="UTF-8"?><?mso-infoPathSolution solutionVersion="1.0.0.2" productVersion="14.0.0" PIVersion="1.0.0.0" href="file:///C:\Documents%20and%20Settings\Chris\Local%20Settings\Application%20Data\Microsoft\InfoPath\Designer3\ef41a19775b4ce0\manifest.xsf" ?><?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.3"?>
<my:myFields xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-09-19T13:28:35" xml:lang="en-us">
<my:Start_Value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6</my:Start_Value>
<my:Main_Group>
    <my:Value_Modifier_Group>
        <my:Modified_Start_Value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6</my:Modified_Start_Value>
        <my:Start_Value_Increase>0</my:Start_Value_Increase>
        <my:Start_Value_Decrease>0</my:Start_Value_Decrease>
    </my:Value_Modifier_Group>
<my:Value_Modifier_Group>
    <my:Modified_Start_Value>6</my:Modified_Start_Value>
    <my:Start_Value_Increase>0</my:Start_Value_Increase>
    <my:Start_Value_Decrease>0</my:Start_Value_Decrease>
</my:Value_Modifier_Group></my:Main_Group>
</my:myFields> 
```

我希望这个问题不要太仓促！今天很忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:14:03.273

好的，我将自己回答这个问题，因为我刚刚弄清楚了。

关键是通过将第一个表达式中的值放入一个节点然后在第二个表达式中引用该节点来组合 XPath 表达式。

似乎管道命令 | 与其他运营商打得不好。

以下表达式以下列方式返回值：

*   `//my:Value_Modifier_Group[1=count(following-sibling::my:Value_Modifier_Group)]//my:Modified_Start_Value[(text())] | //my:Start_Value[text() and not(//my:Value_Modifier_Group[1=count(following-sibling::my:Value_Modifier_Group)]//my:Modified_Start_Value[(text()])]`
*   如果`Modified_Start_Value`在第一个节点之前没有可用的前面，`Modified_Start_Value`则表达式默认为初始值。
*   通过这种方式，您可以保证最新的有效`Start_Value`或`Modified_Start_Value`

然后将该表达式的这个值放入名为 的节点中`StartVModStart`。然后将此节点的 XPath 放入评估表达式中：

`../../../my:StartVModStart + number(/descendant-or-self::node()/my:Value_Modifier_Group[0 = count(following-sibling::my:Value_Modifier_Group)]//my:Start_Value_Increase) - number(/descendant-or-self::node()/my:Value_Modifier_Group[0 = count(following-sibling::my:Value_Modifier_Group)]//my:Start_Value_Decrease)`

*   此表达式使用“最新”值，然后添加或减去更改

通过这种方式，人们可以在整个文档过程中保持“运行总和”，从初始节点开始，一直移动到重复节点。

这个问题似乎很复杂，如果我的问题和答案似乎都不清楚，请原谅我。随着我达到更复杂的功能，所需的 XPath 表达式变得越来越复杂。

# mono - 更新单声道错误 99

> ID：12497615
> 
> 赞同：0
> 
> 时间：2012-09-19T15:13:12.427
> 
> 标签：mono, xamarin.ios, compiler-errors, monodevelop

在最后一次更新 monotouch (Monotouch 5.4.1) Monodevelop 3.0.4.6 之后。

所有构建都失败并显示消息“mtouch exited with code 99”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:49:37.857

我已经解决了我的问题。我已删除 monotouch 并重新安装以重新激活密钥。

# ios - 为什么 cell.textLabel.text 需要标识符？

> ID：12497617
> 
> 赞同：0
> 
> 时间：2012-09-19T15:13:38.813
> 
> 标签：ios, cell

`"Parse issue expected identifier"`我得到编译器的错误。我不明白有什么问题。该单元格有一个标识符，我想要的只是检索一个指向标签的指针。

```
UITableViewCell  *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
//UILabel *cellLabel = (UILabel *) [cell viewWithTag:1];
UILabel *cellLabel = [cell.textLabel.text]; 
```

我评论的行有效，其中`[cell viesWithTag:1]`检索标签为 1 的标签。但我想知道为什么下一行的工作方式不同。该行：

```
UILabel *cellLabel = [cell.textLabel.text] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T02:10:58.753

这是“标识符”一词的两种不同用法。该错误与单元标识符无关。

看起来你想要的语法是：

```
UILabel *cellLabel = cell.textLabel; 
```

相反，您所拥有的只是 Objective-c 消息表达式的一部分：

`[someObject someMessage] // send someMessage to someObject`

在`someObject`你的情况下是`cell.textLabel.text`（一个NSString *），但你没有包括`someMessage`编译器在那里寻找的标识符。

但是，再一次，听起来你真的只是想读取`textLabel`你的单元格的属性，也就是`cell.textLabel`or `[cell textLabel]`。

# cuda - NVVP 和计数器报告的时间差异

> ID：12497619
> 
> 赞同：0
> 
> 时间：2012-09-19T15:13:42.803
> 
> 标签：cuda

我一直在运行 CUDA 程序的内核。我观察到 GPU 计数器报告的时间与内核执行的 NVVP 之间存在相当大的差异。为什么通常会观察到这种差异？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:10:25.593

Nsight Visual Studio Edition 和 Visual Profiler 支持两种机制来捕获内核的持续时间。这两种方法都将导致比 CUevent/cudaEvent 报告的值更小、更准确。方法如下：

1.  并发内核时序

    这是 Nsight 2.x 和 Visual Profiler 5.0 用来生成时间线的默认模式。内核的持续时间定义为从内核代码开始在设备上执行到完成的时间。这无法使用 CUDA 事件来衡量。

2.  序列化内核时序

    这是工具在为每个内核收集 PM 计数器时使用的默认模式。内核的持续时间定义为 GPU 处理启动请求直到内核完成后 GPU 空闲的时间。此模式专门禁用并发内核执行。在几乎所有情况下，报告的持续时间都将略大于并发内核跟踪持续时间，因为它包括 GPU 启动第一个块的时间和 GPU 完成所有内存存储的时间。

3.  CUDA 事件范围计时

    CUDA 事件计时是通过在内核在同一流上启动前后调用 cu/cudaEventRecord 来完成的。每个事件记录都会将一个命令插入 GPU 推送缓冲区。当命令到达 GPU 时，它会将时间戳写入内存。可以在不启动的情况下推送两个事件记录。这允许开发人员测量两个时间戳命令之间的 GPU 时间。这种方法有以下缺点，这就是为什么我鼓励开发人员使用这些工具（Nsight、Visual Profiler 和 CUPTI）：

    湾。GPU 可以在启动事件记录和内核执行之间进行上下文切换。

    C。启动事件记录将包括启动开销，包括更新需要调整大小的驱动程序缓冲区的时间、复制参数、复制纹理绑定……

    d。提交内核和结束事件记录之间经过的时间会影响时间。

    e. GPU 可以在内核执行结束和结束事件记录之间进行上下文切换。

    F。不正确地使用事件会破坏并发内核执行。

在每种模式中提供的持续时间将提供不同的值。此外，工具提供的持续时间的定义和通过使用事件可用的持续时间的定义是不同的。

NVIDIA 工具将持续时间尽可能定义为从 GPU 开始在内核上工作到 GPU 完成内核上的工作的时间。如果开发人员有兴趣收集这些信息，他们应该查看工具包中包含的 CUPTI SDK。

# c - GTK+ 如何画到绘图区

> ID：12497620
> 
> 赞同：1
> 
> 时间：2012-09-19T15:13:52.507
> 
> 标签：c, gtk, cairo

我想在 gtk+ cairo 绘图区域内画一些线（实际上是正弦波），但我想不出办法。所以我的代码首先定义了绘图区域，它有一个回调函数，该函数将白色背景绘制到绘图区域本身......此时我想在每次开始按钮后开始绘制一段正弦波按下（按钮有一个绘图功能的回调）....所以首先..有可能做到这一点吗？我错过了什么吗？谢谢。

```
 #include <cairo.h>
    #include <gtk/gtk.h>

    int x = 0;
    int x_old = 0;
    float value = 0;
    float value_old = 0;
    GtkWidget *button = NULL;
    GtkWidget *window = NULL;
    GtkWidget *area = NULL;
    GtkWidget *table = NULL;

    static gboolean load_interface(GtkWidget *widget)
    {
     cairo_t *cr;
     cr = gdk_cairo_create(area->window);
     cairo_set_source_rgb(cr, 1, 1, 1);
     cairo_rectangle(cr, 0, 0, 900, 400);
     cairo_fill(cr);
    }

    void draw(GtkWidget *widget)
    {
     cairo_t *cr;
     cr = gdk_cairo_create(widget->window);

     x_old = x;
     x = x + 15;
     value_old = value;
     value = value + 0.25;

     cairo_set_source_rgb(cr, 0, 0, 0);
     cairo_set_line_width (cr, 1);
     cairo_move_to(cr, x_old, 100 + (sin(value_old))*50);
     cairo_line_to(cr, x, 100 + (sin(value))*50);
     cairo_stroke(cr);
    }

     int main (int argc, char *argv[])
    {
      g_log_set_handler ("Gtk", G_LOG_LEVEL_WARNING, (GLogFunc) gtk_false, NULL);
      gtk_init (&argc, &argv);
      g_log_set_handler ("Gtk", G_LOG_LEVEL_WARNING, g_log_default_handler, NULL);

      window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
      gtk_container_set_border_width (GTK_CONTAINER (window), 3);
      gtk_window_set_title (GTK_WINDOW (window), "Draw");
      gtk_window_set_position (GTK_WINDOW (window), GTK_WIN_POS_CENTER);
      gtk_widget_realize (window);
      g_signal_connect (window, "destroy", gtk_main_quit, NULL);

      table = gtk_table_new (10, 10, TRUE);
      gtk_table_set_col_spacings(GTK_TABLE(table),10);
      gtk_table_set_row_spacings(GTK_TABLE(table),5);
      gtk_container_add (GTK_CONTAINER (window), table);

      area = gtk_drawing_area_new();
      gtk_signal_connect (GTK_OBJECT(area), "event", G_CALLBACK (load_interface),     (gpointer)area);
      gtk_table_attach_defaults (GTK_TABLE(table), area, 1, 10, 0, 10);

      button = gtk_button_new_from_stock ("START");
      g_signal_connect (G_OBJECT (button), "clicked", G_CALLBACK (draw), (gpointer) window);
      gtk_table_attach_defaults (GTK_TABLE(table), button, 0, 1, 0, 1);

      gtk_widget_show_all (window);
      gtk_main ();

      return 0;
     } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T08:32:33.043

你所有的绘图都应该发生在绘图区绘图事件中，`expose-event`在 GTK2 和`draw`GTK3 中调用。为了响应单击按钮，您只需更改一些值，您将重用这些值来计算绘制的整个场景。一旦更改了这些值，您只需使绘图区域无效以强制重新绘制它，调用[`gtk_widget_queue_draw`](http://developer.gnome.org/gtk/stable/GtkWidget.html#gtk-widget-queue-draw)绘图区域。就是这样。

如果场景绘制成本很高，请记住使用 cairo 裁剪函数通过仅绘制已更改的内容来提高性能。使用 then[`gtk_widget_queue_draw_area`](http://developer.gnome.org/gtk/stable/GtkWidget.html#gtk-widget-queue-draw-area)而不是 gtk_widget_queue_draw 来提示已更改且需要重绘的区域。

请参阅[GtkDrawingArea 文档](http://developer.gnome.org/gtk/stable/GtkDrawingArea.html#GtkDrawingArea.description)。

顺便说一句，不要使用强制转换`GTK_OBJECT`（已弃用），`G_OBJECT`而是使用。这使得移植到 GTK3 更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T17:49:49.310

`g_signal_connect()`*暴露*事件。

# jquery - 使用 $("body") 选择器时我应该使用 .eq(0) 吗？

> ID：12497623
> 
> 赞同：1
> 
> 时间：2012-09-19T15:14:00.757
> 
> 标签：jquery

当我在 jQuery 对象中引用 body 标签时，使用 .eq(0) 过滤器有什么好处（性能或其他方面）吗？例如：**$("body").eq(0)**而不是**$("body")**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:14:52.037

不`$("body")`应该做得很好..`eq(0)`只是选择第一个元素，如果它只有一个元素开始，它不会有任何区别。

`$('body')`将具有相同的结构，`$('body').eq(0)`但`.eq`只是一个额外的调用。

`.eq`功能实现

```
function (i) {
    i = +i;
    return i === -1 ? this.slice(i) : this.slice(i, i + 1);
} 
```

`eq`如您所见，当您只有一个元素时，执行 a 是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:19:47.310

不，它没有任何区别，相反，元素上有一个额外的调用，jquery 再次构造了相同的元素。如果考虑性能，这将是一个开销。

# maven - 编译 nativetoascii maven 插件

> ID：12497624
> 
> 赞同：1
> 
> 时间：2012-09-19T15:14:05.490
> 
> 标签：maven, netbeans, compilation, java

当我编译我的项目时，我遇到了这些问题：

`Failed to execute goal org.codehaus.mojo:native2ascii-maven-plugin:1.0-alpha-1:native2ascii (default) on project ViewController: Execution default of goal org.codehaus.mojo:native2ascii-maven-plugin:1.0-alpha-1:native2ascii failed: Error starting Sun's native2ascii: sun.tools.native2ascii.Main -> [Help 1]`

使用`netbeans 7.2`and `jdk 1.7.07`，但是！！如果我使用`jdk 1.6`它有效！

我使用时如何编译这个`jdk 1.7`？

Tnx 寻求帮助！！

## pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>${project.parent.groupId}</groupId>
<artifactId>ViewController</artifactId>
<packaging>war</packaging>
<version>${project.parent.version}</version>
<name>ViewController</name>
<url>${project.parent.url}</url>
<organization>
    <name>kMicro</name>
</organization>

<parent>
    <groupId>com.km.eFarmer</groupId>
    <artifactId>eFarmer</artifactId>
    <version>1.0.1-alpha1-SNAPSHOT</version>
</parent>

<dependencies>
    <dependency>
        <groupId>org.glassfish.extras</groupId>
        <artifactId>glassfish-embedded-all</artifactId>
        <version>3.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>DataModel</artifactId>
        <version>${project.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>SOAPClient</artifactId>
        <version>${project.version}</version>
        <scope>provided</scope>
    </dependency>       
    <dependency>
        <groupId>org.jboss.cache</groupId>
        <artifactId>jbosscache-core</artifactId>
        <version>3.2.7.GA</version>
    </dependency>
    <dependency>
        <groupId>org.jboss</groupId>
        <artifactId>jboss-common-core</artifactId>
        <version>2.2.14.GA</version>
    </dependency>
    <dependency>
        <groupId>jgroups</groupId>
        <artifactId>jgroups</artifactId>
        <version>2.6.13.GA</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.0.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.0.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.0.2.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>8.4-701.jdbc4</version>
        <scope>test</scope>
    </dependency>
    <!--dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-openid</artifactId>
        <version>3.0.2.RELEASE</version>
        <scope>compile</scope>
    </dependency-->
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.0.3-FCS</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.0.3-FCS</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.openfaces</groupId>
        <artifactId>openfaces</artifactId>
        <version>3.0.2-KM</version>
    </dependency>
    <dependency>  
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.3.1</version>
    </dependency>
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces-mobile</artifactId>
        <version>0.9.3</version>
    </dependency>
    <dependency>
        <groupId>org.primefaces.themes</groupId>
        <artifactId>redmond</artifactId>
        <version>1.0.5</version>
    </dependency>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils</artifactId>
        <version>1.7.0</version>
    </dependency>
    <dependency>
        <groupId>commons-digester</groupId>
        <artifactId>commons-digester</artifactId>
        <version>1.8</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.4</version>
    </dependency>
    <dependency>
        <groupId>cssparser</groupId>
        <artifactId>cssparser</artifactId>
        <version>0.9.5</version>
    </dependency>
    <dependency>
        <groupId>milyn</groupId>
        <artifactId>sac</artifactId>
        <version>1.3</version>
    </dependency>
    <dependency>
        <groupId>jdom</groupId>
        <artifactId>jdom</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>jfree</groupId>
        <artifactId>jfreechart</artifactId>
        <version>1.0.13</version>
    </dependency>
    <dependency>
        <groupId>jfree</groupId>
        <artifactId>jcommon</artifactId>
        <version>1.0.16</version>
    </dependency>
    <dependency>
        <groupId>jexcelapi</groupId>
        <artifactId>jxl</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>net.sf.jasperreports</groupId>
        <artifactId>jasperreports</artifactId>
        <version>4.5.1</version>            
    </dependency>
    <dependency>
        <groupId>it.eng.spago</groupId>
        <artifactId>sbi-utils</artifactId>
        <version>3.3.0</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.groovy</groupId>
        <artifactId>groovy</artifactId>
        <version>1.7.5</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.2</version>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jettison</groupId>
        <artifactId>jettison</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>freemarker</groupId>
        <artifactId>freemarker</artifactId>
        <version>2.3.9</version>
    </dependency>
</dependencies>

<build>
    <plugins>

        <!--plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>native2ascii-maven-plugin</artifactId>
            <version>1.0-alpha-1</version>
            <configuration>
                <dest>${project.build.directory}/classes</dest>
                <src>src/main/resources/locale</src>                        
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>native2ascii</goal>
                    </goals>
                    <configuration>
                        <encoding>UTF8</encoding>
                    </configuration>
                </execution>
            </executions>
        </plugin-->

        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jasperreports-maven-plugin</artifactId>
            <configuration>
                <compiler>net.sf.jasperreports.compilers.JRGroovyCompiler</compiler>
                <sourceDirectory>src/main/resources/jasperReportSources</sourceDirectory>
                <outputDirectory>src/main/webapp/reports</outputDirectory>
                <xmlValidation>true</xmlValidation>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile-reports</goal>
                    </goals>
                    <phase>compile</phase>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <groupId>net.sf.jasperreports</groupId>
                    <artifactId>jasperreports</artifactId>
                    <version>4.5.1</version>
                </dependency>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-all</artifactId>
                    <version>1.7.5</version>
                </dependency>
            </dependencies>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1-alpha-1</version>
            <configuration>
                <archive>
                    <manifest>
                        <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
    </plugins>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <excludes>
                <exclude>resources/**</exclude>
            </excludes>                        
        </resource>
        <resource>
            <directory>src/main/resources/font</directory>
        </resource>
    </resources>
</build>

<properties>
    <netbeans.hint.deploy.server>gfv3ee6</netbeans.hint.deploy.server>
    <jdk.version>1.6</jdk.version>
</properties> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:19:56.687

将 native2ascii-maven-plugin 的版本更新到最新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T07:45:56.253

添加这对我有用： `<plugin> <groupId>org.codehaus.mojo</groupId> <artifactId>native2ascii-maven-plugin</artifactId> ... <!-- added for java 7 compilation --> <dependencies> <dependency> <groupId>com.sun</groupId> <artifactId>tools</artifactId> <version>1.5.0</version> <scope>system</scope> <systemPath>${java.home}/../lib/tools.jar</systemPath> </dependency> </dependencies> ...`

# javascript - Python 在后端 JS 在前端集成

> ID：12497626
> 
> 赞同：0
> 
> 时间：2012-09-19T15:14:10.727
> 
> 标签：javascript, python

假设我有一个用 Python 编写的图像混合程序。我想在前端实时显示图像混合过程，同时用户调整参数（比如几个滚动条），这可能需要 Javascript。

我想这样做的一种方法是使用这个[类似问题](https://stackoverflow.com/questions/683462/best-way-to-integrate-python-and-javascript)中提到的库：首先编写一个能够执行后端工作的 Python 类，将其编译为 JS 代码并从前端调用它。还有更好的方法吗？

未来图像处理任务可能会更重，所以我用 Python 编写而不是直接用 JS 编写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:23:34.480

根据您要实现的操作，也许您可​​以使用 HTML5 Canvas 编写算法的并行实现。然后以最小的分辨率显示它或提供某种方式来设置取景器（基本上是整体的裁剪部分）。实际工作完成后，显示完整结果。

您可能还想考虑使用 Node.js 来完成类似的事情。从本质上讲，这将允许您在后端和前端使用几乎相同的代码，从而减少算法的重复。

您还可以尝试重新考虑执行操作的方式。[Aviary](http://www.aviary.com/web)鼓励用户一次执行一项操作。此外，它们还提供撤消（易于实现）。这种方案非常适合 Canvas。

# c# - c#如何检查列表框中的选定项目是否已更改。?

> ID：12497627
> 
> 赞同：0
> 
> 时间：2012-09-19T15:14:13.643
> 
> 标签：c#, selecteditem

我知道 listbox.selectedItem 会给我在列表框中选择的当前项目...如果当前项目已更改，我如何获得。所以我想知道用户的选择是否已从原来的内容更改为不同的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:16:23.813

像这样订阅 SelectedIndexChanged 事件：

```
this.listBox1.SelectedIndexChanged += new System.EventHandler(this.listBox1_SelectedIndexChanged); 
```

听众是：

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {

    } 
```

在上面的监听器中添加代码来响应事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:15:23.920

您可以监听[SelectedIndexChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindexchanged.aspx)事件，这`Windows.Forms`自然是 。

# java - 如何在 Eclipse Indigo 中启用语法高亮？

> ID：12497628
> 
> 赞同：0
> 
> 时间：2012-09-19T15:14:21.377
> 
> 标签：java, eclipse, eclipse-plugin

如何在 Ecipe Indigo 中启用语法突出显示？我用 Java 编写。我安装了[这个插件](http://www.hawksley.net/wp/2009/08/using-eclipse-on-small-screens/)以便在小屏幕上更舒适地使用，但即使我关闭它 - 编辑器中的所有文字都是黑色的:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:30:01.763

您可以通过以下方式设置您的颜色偏好

窗口->首选项-> Java->编辑器->语法着色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:37:29.030

确保您也在使用 Java 透视图（或 Java EE）。您应该能够在标题栏中看到活动透视图和/或编辑器的名称。

为 100% 确定，您始终可以右键单击有问题的文件并打开方式 - > Java 编辑器以确保它是为您的文件打开的 Java 编辑器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:47:59.857

Eclipse 会记住您上次使用哪个编辑器打开文件并继续使用该编辑器打开它，即使您后来安装了更好的编辑器。右键单击该文件并使用“打开方式...”菜单强制使用 Java 编辑器打开它。如果您根本没有得到*任何*颜色，您可能只是使用了错误的编辑器。

![在此处输入图像描述](../Images/7c205b3618ccbf6e875c777c5d857127.png)

# python - Python - 如何删除/取消导入库之前已导入

> ID：12497629
> 
> 赞同：10
> 
> 时间：2012-09-19T15:14:22.957
> 
> 标签：python

正如我们所知，在 python 2.x 中，如果我们将两个整数值相除，则会得到一个`int`. 但是，如果使用`from __future__ import division`，我们会得到一个`float`值。

```
>>> 3/2
1
>>> from __future__ import division
>>> 3/2
1.5
>>> 
>>> 
>>> 3//2
1
>>> 4/3
1.3333333333333333
>>> 
```

所以，如果我们在 importing 之后想要整数，`//`而不是`/`应该使用`__future__.division`，但我想知道如何`/`再次返回整数。

有没有办法取消导入或删除以前导入的模块？

* * *

在 IDLE 中有一种方法可以取消导入库或模块，即使用 Ctrl+F6 或菜单中的选项**重新启动它**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T15:18:48.643

python 必须[`reload`](https://stackoverflow.com/q/684171/748858)重新导入已经导入的模块（不应在生产代码中使用），但是一旦导入模块，就无法（据我所知）取消导入模块。

当然，您可以删除当前命名空间中对该模块的引用：

```
import module
module.foo()
del module
module.foo() #NameError, can't find `module` 
```

* * *

另一点是它`__future__`并不是真正的模块。它更多的是告诉解析器如何表现的指令。因此，当放入文件时，它必须是其中的第一件事（在任何其他导入之前等）。`__future__`您可以从交互式会话中的任何位置导入这一事实是一种特殊情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T15:18:24.447

`__future__`看起来像一个模块，但不是真的。导入它实际上会影响当前模块的编译选项。没有办法“撤消”它，因为它实际上发生在模块甚至执行之前。

如果它是任何其他“正常”模块，有办法，但你在这里不走运。要么处理更改的语义，要么将需要不同编译的代码放在单独的模块中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T15:39:11.890

我也遇到过这种需求。

**我不使用`__future__`**.

当我需要浮点结果时，我将除数设为浮点数：

```
>>> 3/浮点数(2)
1.5

```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-19T15:49:38.937

您可以使用以下方法卸载它：

```
>>> del(module) 
```

# .net - 使用 Amazon EC2 的 EntityFramework

> ID：12497631
> 
> 赞同：0
> 
> 时间：2012-09-19T15:14:27.300
> 
> 标签：.net, cloud, entity-framework-4.3

是否可以在亚马逊 EC2 上的 ASP.NET 应用程序中使用 EntityFramework？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:48:27.627

我不知道为什么没有人回答这个简单的问题......

当然是！服务器在 EC2 中运行的事实是无关紧要的。这可能适用于所有应用程序的 99%。我的意思是你把服务器放在哪里并不重要。它可能在 EC2 中，可能在另一个托管服务提供商处，也可能在您的地下室中。人们选择 EC2 的主要原因是易于扩展大大小小的应用程序、提供新服务器的速度以及相对较低的成本。（还有很多其他原因。）

# c# - SemanticZoom 使用 GridView.Items 而不是 GridView.ItemsSource

> ID：12497634
> 
> 赞同：0
> 
> 时间：2012-09-19T15:14:39.587
> 
> 标签：c#, .net, gridview, windows-8, semantic-zoom

在我的应用程序的主页上，我有类似这样的内容，显示不同的小节并尊重各节之间的 80 像素边距。

```
<GridView>
    <GridView.Style>
        <Style TargetType="GridView">
            <Setter Property="ItemContainerStyle">
                <Setter.Value>
                    <Style TargetType="GridViewItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Setter Property="Margin" Value="0, 0, 80, 0"/>
                        <Setter Property="VerticalContentAlignment" Value="Stretch" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="GridViewItem">
                                    <ContentPresenter/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </GridView.Style>
    <Grid>
        <TextBlock Text="SubTitle1"/>
        ...
    </Grid>
    <Grid>
        <TextBlock Text="SubTitle2"/>
        ...
    </Grid>
    <Grid>
        <TextBlock Text="SubTitle3"/>
        ...
    </Grid>
</GridView> 
```

现在我想向它添加语义缩放，这样当我缩小时，我看到的子部分标题有点像天气应用程序。我过去曾使用 ItemsSource 进行 SemanticZoom，但如果我将实际项目直接放入我的 GridView 并且没有进行分组，我该怎么做。

**编辑：**其他人如何处理创建这些以 80 像素分隔的单独子部分？为了让 SemanticZoom 工作，两个 GridView 都必须绑定到相同的集合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:51:55.280

您上面的 GridView 需要有一个名称，我们称之为**ZoomedInGV**。这当然成为**SemanticZoom.ZoomedInView**内部的控件。然后你需要创建另一个 GridView，我们称之为**ZoomedOutGV**。最后，您需要在两个视图之间创建绑定。解决方案应如下所示：

```
<SemanticZoom>
    <SemanticZoom.ZoomedInView>
        <GridView x:Name="ZoomedInGV">
        ...
        </GridView>
    </SemanticZoom.ZoomedInView>
    <SemanticZoom.ZoomedOutView>
        <GridView x:Name="ZoomedOutGV" ItemsSource="{Binding ElementName=ZoomedInGV, Path=Items}"/>
    </SemanticZoom.ZoomedOutView>
</SemanticZoom> 
```

# html - 在新文件（或另一个现有文件）中运行正则表达式

> ID：12497644
> 
> 赞同：1
> 
> 时间：2012-09-19T15:14:57.283
> 
> 标签：html, regex, vim, rss, html-parsing

我想从文件 A 中取出一些东西并重新格式化它以使用正则表达式粘贴到文件 B 中。我对 vim 有点陌生，所以这可能是一个愚蠢的问题，但我在任何地方都找不到解决方案。我想我正在寻找错误的短语。无论如何，这是我想做的事情的细节。我有一个静态 html 页面，我想要一个 RSS 提要。幸运的是，这个页面主要是指向各种新闻项目的链接，因此创建 RSS 将非常容易。

我准备好了正则表达式：

```
:%s/^<a href="\(.\{-}\)".title="\(.\{-}\)">\(.\{-}\)<\/a>/<title>\3<\/title>\r<link>\1<\/link>\r<description>\2<\/description> 
```

我的问题是我不想在我正在搜索的 html 文件中进行更改。我希望更改发生在另一个文件中，无论是新文件还是现有文件。我该如何做到这一点？还是这种方法完全关闭。

哦，顺便说一句，这个表达式在 html 文件中采用了这样的内容：

```
<a href="http://linktosomesite.com" title="Description of link">Title of Link</a> 
```

并在 xml 文件中将其转换为：

```
<title>Title of Link</title>
<link>http://linktosomesite.com</link>
<description>Description of link</description> 
```

奖励：如果我可以将它放在另一个文件中，那就太好了，比如从第 5 行开始。

PS：我知道这是一个 vim 和正则表达式问题，但将其发布在 html 和 rss 中，因为我注意到人们在那里有静态 html 到 rss 问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:19:19.710

为什么不直接复制您的文件，然后在复制的文件上使用 sed/replace？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:44:04.517

只需运行您的替换并另存为另一个文件：

```
$ vim file.html
:%s/^<a href="\(.\{-}\)".title="\(.\{-}\)">\(.\{-}\)<\/a>/<title>\3<\/title>\r<link>\1<\/link>\r<description>\2<\/description>
:w file.rss
:q 
```

顺便说一句，这就是我在任何编辑器中的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T17:02:50.767

听起来你想写一个转换。有很多转换工具。例如，您当然可以使用 sed 和 awk 来做到这一点。但我认为最简单的方法是 xslt。（你可以使用`xsltproc`或`saxon`...）

这是一个示例模板：

```
<xsl:template match="a">
    <title><xsl:value-of select="text()"/></title>
    <link><xsl:value-of select="@href"/></link>
    <description><xsl:value-of select="@title"/></description>
</xsl:template> 
```

它找到每个`a`元素，并输出结果，其中填充了 text() 节点和属性。

# javascript - 在同一窗口中打开其他 url 时出错 (javascript/html)

> ID：12497645
> 
> 赞同：0
> 
> 时间：2012-09-19T15:14:59.877
> 
> 标签：javascript, html, window.open

当我在同一个窗口中打开一个 URL 然后返回到旧页面时，我收到此错误：

*Uncaught ReferenceError: is not defined principal.php:2
Uncaught ReferenceError is not defined*

```
//in principal.php
function btnGoClick(event) {
    window.open('fb.php','_self',false);
}

//in fb.php
function btnBackClick(event) {
    window.open('principal.php','_self',false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:21:43.503

我已将 window.open 替换为 document.location.href = "link"。有用！

# asp.net - how to get html control in VB code behind for aspx?

> ID：12497646
> 
> 赞同：0
> 
> 时间：2012-09-19T15:14:59.367
> 
> 标签：asp.net

WIth aspx, there are UI part(.aspx) and code behind(.aspx.vb).
In Markup, there is some html element, like Table with ID='Tab1'

How to got the html element Table in code behind to change its attributes?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:16:26.953

通过为其分配 id 并使其 runat="server" 使表在后面的代码中可访问

```
<table id="tbl" runat="server" >.... 
```

# c# - What gives you the better perfomance? C# : Const Vs Normal fields -in FOR loop fields declaration

> ID：12497650
> 
> 赞同：0
> 
> 时间：2012-09-19T15:15:05.040
> 
> 标签：c#, .net, performance

I would like to know which gives us a better performs on both the ways as given below:

**1\. Way 1**

> ```
> for(int i = 0; i < 10; i++)
> {
>    // do something in loop
> } 
> ```

**2\. Way 2**

> ```
> for(int i = Constants.Zero; i < Constants.Ten; i++)
> {
>     // do something in loop
> } 
> ```

```
private const int Zero = 0; 

private const int Ten = 10; 
```

Basically I want to know that Can we increase the application performance if we use `Constants` in `for loop variable declaration` as mentioned above?

Thanks in advance !

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:17:59.317

There is no *any* performance benefit here, as variable declared in that way will end up into injected constants, like in your first case. So they are become basically the same.

```
//code 1
for(int i = 0; i < 10; i++)
{
     Console.WriteLine("Hello");
}

//IL 1

IL_0001:  ldc.i4.0    
IL_0002:  stloc.0     
IL_0003:  br.s        IL_0016
IL_0005:  nop         
IL_0006:  ldstr       "Hello"
IL_000B:  call        System.Console.WriteLine
IL_0010:  nop         
IL_0011:  nop         
IL_0012:  ldloc.0     
IL_0013:  ldc.i4.1    
IL_0014:  add         
IL_0015:  stloc.0     
IL_0016:  ldloc.0     
IL_0017:  ldc.i4.s    0A 
IL_0019:  clt         
IL_001B:  stloc.1     
IL_001C:  ldloc.1     
IL_001D:  brtrue.s    IL_0005

//code 2
for(int i = Constants.Zero; i < Constants.Ten; i++)
{
    Console.WriteLine("Hello");
}

//IL 2
IL_0001:  ldsfld      UserQuery+Constants.Zero
IL_0006:  stloc.0     
IL_0007:  br.s        IL_001A
IL_0009:  nop         
IL_000A:  ldstr       "Hello"
IL_000F:  call        System.Console.WriteLine
IL_0014:  nop         
IL_0015:  nop         
IL_0016:  ldloc.0     
IL_0017:  ldc.i4.1    
IL_0018:  add         
IL_0019:  stloc.0     
IL_001A:  ldloc.0     
IL_001B:  ldsfld      UserQuery+Constants.Ten
IL_0020:  clt         
IL_0022:  stloc.1     
IL_0023:  ldloc.1     
IL_0024:  brtrue.s    IL_0009 
```

In *second* case I used a `static` class to create constants.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:16:39.797

There is no performance difference. The compiled `for` loop will be exactly the same in both cases.

The constants are "burned into" the compiled code, just as if you'd used literal values.

(And I'm assuming that this is just a toy example: otherwise why would you want to replace perfectly good, universally recognised symbols -- `0`, `10`, etc -- with your own versions that aren't widely known?)

# postgresql - Postgres, checking if a set contains another set

> ID：12497651
> 
> 赞同：1
> 
> 时间：2012-09-19T15:15:05.437
> 
> 标签：postgresql, dataset, subquery

Is there a better way to perform the following query? I'm trying to see if a user has all of the products in a certain category

```
SELECT t1.id 
  FROM 
    (SELECT count(product_id) as count, product_id FROM categories group by product_id) t1 
  INNER JOIN 
    (SELECT count(product_id) as count, product_id FROM categories INNER JOIN user_products on user_products.product_id = categories.product_id where user_id=116 group by product_id) t2 
  ON t1.id=t2.id 
  WHERE t1.count = t2.count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:21:00.120

好吧，这应该可行，但这更好吗？没有把握...

```
select 
c.product_id
from categories c
left join user_products up on up.product_id = c.product_id and up.user_id = 116
group by c.product_id
having  sum (case when up.product_id is null then 0 else 1 end) = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T19:12:06.283

`TRUE`如果用户拥有“类别”中的**所有**产品（或一开始不存在），则返回。

```
SELECT count(*) = 0
FROM   categories c
WHERE  NOT EXISTS (
   SELECT 1
   FROM   user_products u
   WHERE  u.product_id = c.product_id
   AND    u.user_id = 116
   ) 
```

应该比迄今为止提出的任何一种解决方案都要快。（只要我对矛盾问题的解释合适。）

# opencart - 价格错误 - Opencart 1.4.3

> ID：12497654
> 
> 赞同：0
> 
> 时间：2012-09-19T15:15:10.127
> 
> 标签：opencart

我有一个运行 Opencart 1.4.3 的站点，目前存在定价问题。如果您[访问该网站](http://www.combiblind.com/index.php?route=product/product&path=35&product_id=49)，您会看到价格为 100 英镑。当您使用这些选项时，您会看到价格变为 52 英镑。

货币和位置是正确的。52 英镑是旧值。

有什么想法接下来要看吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:50:29.937

这听起来像是您可以选择`-48`价格，或者您正在某处获得缓存的价值。尝试删除缓存文件`/system/cache/`

# vb6 - 在 VB 中执行开始的地方

> ID：12497655
> 
> 赞同：0
> 
> 时间：2012-09-19T15:15:10.783
> 
> 标签：vb6

我想知道执行从哪里开始，在 VB 中。例如：在 oops 语言中，执行从 main() 开始，根据 VB，我不知道执行从哪里开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:19:45.437

它也开始于`Main`.

请参阅MSDN 上[Visual Basic 中的主要过程](http://msdn.microsoft.com/en-us/library/ms235406.aspx)：

> 每个 Visual Basic 应用程序都必须包含一个名为 Main 的过程。此过程用作您的应用程序的起点和整体控制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:18:45.730

vb 也有一个主程序。但是，在 Visual Studio 中工作时，它往往会被隐藏/自动生成。

[http://msdn.microsoft.com/en-us/library/ms235406(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms235406%28v=vs.110%29.aspx)

[VB.Net的主要功能在哪里](https://stackoverflow.com/questions/7258909/where-is-the-main-function-in-vb-net)

# c# - Facebook c# SDK 注销，Silverlight

> ID：12497660
> 
> 赞同：0
> 
> 时间：2012-09-19T15:15:29.247
> 
> 标签：c#, silverlight, facebook-c#-sdk, silverlight-5.0

我有一个 Silverlight 应用程序，用户将用作信息亭应用程序。一个用户会出现，使用该应用程序，登录 Facebook 并做他的事情，然后下一个用户会出现并重新启动该过程，同时登录 Facebook 并做他的事情。

问题是，我无法让第一个用户退出 Facebook。

我在我的应用程序中使用网络浏览器控件，我知道这有点过时了，但我按照 Prabir 博客上的说明进行操作，[http: //blog.prabir.me/post/Facebook-CSharp-SDK- Logout.aspx](http://blog.prabir.me/post/Facebook-CSharp-SDK-Logout.aspx)，让我的注销功能正常工作。

这是我的注销功能：

```
 private void SetFacebookLogoutSource()
    {
        var fbClient = new Facebook.FacebookClient();

        var logoutParameters = new Dictionary<string, object>
                  {
                      { "next", GenerateLoginUrl(fbClient, "publish_actions").AbsoluteUri }
                  };

        var logoutUrl = fbClient.GetLogoutUrl(logoutParameters);

        webBrowser.Navigate(logoutUrl);
    } 
```

但这只是将我带到最后登录的用户 Facebook 墙。

GenerateLoginUrl 方法的工作原理是我第一次使用它来获取登录 URL。

有任何想法吗？

谢谢，格雷格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:23:55.027

看起来 Facebook 需要一个 access_token 才能注销（不过，如果我错了，请纠正我），这对我有用：

```
private void SetFacebookLogoutSource()
{
    var fbClient = new Facebook.FacebookClient();

    var logoutParameters = new Dictionary<string, object>
              {
                  { "next", GenerateLoginUrl(fbClient, "publish_actions").AbsoluteUri },
                  { "access_token", [user's_access_token] }
              };

    var logoutUrl = fbClient.GetLogoutUrl(logoutParameters);

    webBrowser.Navigate(logoutUrl);
} 
```

我现在有另一个问题......如果他们不批准我的应用程序的权限，我不会获得 access_key，所以我无法将它们注销，它们处于某种不确定状态！使用 Facebook API 的乐趣 :)

/格雷格

# animation - WinRT TextBlock 代码隐藏 Canvas.Left 动画

> ID：12497664
> 
> 赞同：3
> 
> 时间：2012-09-19T15:15:41.873
> 
> 标签：animation, storyboard, windows-runtime, textblock

我收到错误：

WinRT 信息：无法解析指定对象上的 TargetProperty Canvas.Left。

运行时出现此错误（构建正常）。代码的重要部分：

```
var canvasAnim = new DoubleAnimation() { To = -50, Duration = new Duration(TimeSpan.FromSeconds(0.3)) };
Storyboard.SetTarget(canvasAnim, MyWipedText);
Storyboard.SetTargetProperty(canvasAnim, "Canvas.Left"); 
```

我在后面的代码中附加了动画，因为这是在对更大的控件进行一般滑动之后完成的。知道如何让这个属性工作吗？（顺便说一句，不透明度在这里工作得很好）。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T20:29:08.923

你需要做“（Canvas.Left）”，如

```
Storyboard.SetTargetProperty(canvasAnim, "(Canvas.Left)"); 
```

请注意，它不适用于自定义（用户定义的）附加依赖项属性。

# c - 有没有比在 C 中使用 rb_funcall() 更惯用的方式来初始化 Ruby 对象？

> ID：12497669
> 
> 赞同：2
> 
> 时间：2012-09-19T15:15:47.820
> 
> 标签：c, ruby

要从我的库中初始化一个类，我正在这样做：

```
VALUE obj = rb_funcall(rb_path2class("MyGem::ClassName"),
                rb_intern("new"), 2, arg1, arg2); 
```

感觉很多样板代码都可以压缩成一个宏，比如：

```
VALUE obj = CLASS_INIT("MyGem::ClassName", 2, arg1, arg2) 
```

或者这只是我必须自己写的东西，如果它让我如此困扰，重复 funcall、path2class 和实习生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:27:45.417

它似乎没有记录在 Ruby 中，`README.ext`但是我在我的 Ruby 扩展中使用了一个名为`rb_class_new_instance`. 原型基本上是：

```
rb_class_new_instance(argc, argv, klass); 
```

它用于`StringIO.open`：

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html)

你可以在这里看到我是如何使用它的：

[https://github.com/DavidEGrayson/ruby-usb-pro/blob/master/ext/device_handle.c](https://github.com/DavidEGrayson/ruby-usb-pro/blob/master/ext/device_handle.c)

# windows-8 - Win8 定期磁贴通知 - 少于半小时？

> ID：12497672
> 
> 赞同：1
> 
> 时间：2012-09-19T15:15:53.227
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winjs

[PeriodicUpdateRecurrence 枚举](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.periodicupdaterecurrence.aspx)有 5 个值，从半小时到每天。这是否意味着您不能设置任何其他（较短的）值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:50:54.630

由于电池寿命问题，定期磁贴通知的间隔不能短于 30 分钟。如果您的应用程序磁贴需要实时更新，请考虑使用推送通知。

以下 Windows 博客文章提供了有关推送通知的电池寿命的详细信息（也适用于定期更新）：http: [//blogs.msdn.com/b/b8/archive/2011/11/02/updating-live -tiles-without-draining-your-battery.aspx](http://blogs.msdn.com/b/b8/archive/2011/11/02/updating-live-tiles-without-draining-your-battery.aspx)

关于不同通知传递方法的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh779721.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh779721.aspx)

# c - 是否可以仅通过某些调用来内联函数

> ID：12497673
> 
> 赞同：0
> 
> 时间：2012-09-19T15:15:54.747
> 
> 标签：c, compiler-construction, inline

例如，如果我们有函数 A，是否可以告诉编译器你需要在代码的这一点内联该函数，但在该点不这样做（调用它）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:17:33.683

You cannot selectively tell a compiler to inline some calls, atleast not portably.

Note that `inline` is just an suggestion to the compiler, the compiler may or may not obey the suggestion to inline the body of the function inline to the point of call but some conditions like One definition rules will be relaxed by the compiler for such a function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:21:21.640

`gcc`有属性`noinline`和`always_inline`。

[http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:21:22.117

是否内联函数调用并不特别重要。请参阅[__inline__ 是什么意思？](https://stackoverflow.com/questions/2082551). 我只会编写非内联函数，让编译器决定如何以最佳方式内联它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:19:58.327

我认为这个要求没有用，你的问题的答案是：没有。

但是，您可以通过使用宏来实现该效果：

```
#define f_inline do { int i = 1 + 2; } while( 0 )

void f() {
  f_inline;
} 
```

`f_inline;`如果您想强制内联应用代码，您现在可以使用`f`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T17:59:49.933

如果编译器无条件地尊重您使用或不使用`inline`关键字，或者如果您使用 gcc 扩展`__attribute__((__always_inline__))`and `__attribute__(__noinline__))`，那么您可以使用简单的包装函数来实现您想要的：

```
static inline int foo_inline(int a, int b)
{
    /* ... */
}

static int foo_noninline(int a, int b)
{
    return foo_inline(a, b);
} 
```

我已经用`inline`关键字编写了它，但是由于编译器通常会将其视为提示甚至忽略它，因此您可能需要 gcc 属性版本。

# java - 带有动态 XSD 的 WSDL

> ID：12497674
> 
> 赞同：1
> 
> 时间：2012-09-19T15:15:59.517
> 
> 标签：java, web-services, spring-ws

有人知道如何使用动态 XSD 公开 WSDL 吗？XSD 的选择应取决于在 WSDL 请求期间给出的 URL 参数。WSDL 的操作

首选框架是 Spring Web Service，但也欢迎使用其他解决方案。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:49:51.677

Spring-ws 能够根据您的 XSD 文件动态生成 W​​SDL。我不确定这是否是您想要的，因为您正在更改 Web 服务定义。在我看来，你应该只有一个定义。

也许它是一种基于不同 XSD 提供多个入口点的选项。由于 Spring-WS 可以负责生成 WSDL，这可能是您的一个选项。它至少会为您提供一个 WSDL。

当然，另一种选择是创建一个 REST 服务，您可以在其中自由地以任何您喜欢的方式实现它。

# sql - 用于报告的多维数据仓库替代方案

> ID：12497678
> 
> 赞同：3
> 
> 时间：2012-09-19T15:16:10.993
> 
> 标签：sql, ssas, data-warehouse

我花了几个月的时间来开发报告解决方案。目前我正在使用 SSIS 加载关系数据仓库（事实和维度表）。然后从关系数据仓库创建 SSAS 多维数据集和维度。然后，我使用 SSRS 使用 MDX 查询构建报告。

我遇到的问题是，试图了解多维建模以及 MDX 和多维数据集的工作原理，事情开始变得相当复杂。由于它所设计的组织相当小，我认为我应该重新评估我的方法。

我想也许我应该从图片中删除 SSAS，并简单地创建使用 SQL 查询直接从关系数据仓库报告的报告。关系数据仓库仍然可以每晚加载，以允许最新数据用于报告。

我只是想知道这是否是一个好主意，因为我对数据仓库和 SSAS 不是很有经验。此外，我想知道将我的关系数据仓库保存在维度表和事实表中是否仍可用于 SQL 查询，或者我是否需要重新设计表。如果这最终会导致更多的头痛或问题，我不想做出取消 SSAS 的决定。

除了行数和 YTD 百分比之外，报告将不包括复杂的计算。例如“有多少来电者是男性？” 和“有多少呼叫者要求产品 A？” 然后按月细分。

非常感谢任何意见或建议，因为我开始对尝试正确开发 SSAS 多维数据集感到相当沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:26:34.313

我在公司也遇到过类似的情况。我从未使用过 SSAS，我被要求研究使用多维数据集进行一些报告的好处。这是一个非常陡峭的学习曲线，因为我的背景是开发而不是数据和报告。当关系数据库上的聚合查询非常耗时并且需要将报告分解为分析人员可以用来更好地了解业务状态的层次结构时，SSAS 最有用。由于 SSAS 存储聚合信息，因此这种性质的查询非常快。如果您的组织的数据很小，那么关系查询可能足够快，以至于您并不真正需要存储聚合的好处。

您还需要考虑使用 SSAS 的可维护性。如果您在搞清楚 SSAS 和 MDX 时遇到困难，那么其他人会有多容易呢？我试图解释我写给有 SQL 经验的老板的 MDX 查询，但它与关系查询确实有很大不同。添加更复杂的报告有多容易？

使用 SSAS 的一个好处是它可以让分析师控制报告。其次，有很好的工具和支持。最后，它很容易部署和连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:43:36.353

您可以从架构中删除 SSAS，是的，因为您可以从 MDX 查询到 SSAS 获得的所有结果，您可以从 T-SQL 查询到您的数据仓库，因为构建多维数据集是从 DW 读取数据。但是，请记住以下几点：在我看来，OLAP 多维数据集的主要优势是聚合。

非常简单的解释：假设您有一个名为 orders 的事实表，每月有 100 万个订单。如果您想知道当月卖出了多少，使用 sql 您需要逐行读取并将值相加以产生总数。这就像在您的数据库上读取 100 万次。如果您有一个多维数据集，并配置了propper agrregations，您可以`pre-calculated and pre-stored`在您的多维数据集上获得该值，因此如果您需要知道一个月卖出了多少，您将只有一次读取您的多维数据集。

这是一个分析你的情况的问题，如果你有一个小多维数据集，也许不需要聚合并且你可以很好地使用 SQL，但根据情况，它们可能会很有帮助

# objective-c - UIView 中的 UIImage 并显示图像部分越界

> ID：12497679
> 
> 赞同：0
> 
> 时间：2012-09-19T15:16:20.977
> 
> 标签：objective-c, ios, uiview, uiimage

我在子视图中有一个比它自己的子视图大的图像，是否可以显示子视图之外的部分图像！试过了

```
view.clipsToBounds=NO; 
```

但仍然不乏。

到目前为止，这是我的代码的一部分。

```
xRayView = [[XRayView alloc] initWithFrame: CGRectMake((1024 - 800) / 2, self.device.frame.origin.y - 26, 800,530)];
        xRayView.clipsToBounds=NO;
        [xRayView setForgroundImage: [UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource: @"xray_foreground_01" ofType: @"png"]]];
        [xRayView setBackgroundImage: [UIImage imageWithContentsOfFile: [[NSBundle mainBundle] pathForResource: @"xray_background_01" ofType: @"png"]]]; 
```

前景和背景图像大于 X 射线视图

在 XrayView 我有 2 个属性

背景图像前景图像

和那个方法

```
- (void)drawRect: (CGRect)rect
{
    [super drawRect: rect];

    CGRect forgroundClips[] = {
        CGRectMake((self.frame.size.width - self.forgroundImage.size.width)/2, 0, self.forgroundImage.size.width, currentPan.origin.y),
        CGRectMake((self.frame.size.width - self.forgroundImage.size.width)/2, currentPan.origin.y + currentPan.size.height, self.forgroundImage.size.width, self.forgroundImage.size.height - (currentPan.origin.y + currentPan.size.height))
    };

    CGContextSaveGState(UIGraphicsGetCurrentContext());
    CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0, self.bounds.size.height);
    CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1, -1);
    CGContextClipToRects(UIGraphicsGetCurrentContext(), forgroundClips, sizeof(forgroundClips) / sizeof(forgroundClips[0]));
    //CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height), self.forgroundImage.CGImage);
    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake((self.frame.size.width - self.forgroundImage.size.width)/2, 0, self.forgroundImage.size.width, self.forgroundImage.size.height), self.forgroundImage.CGImage);
    CGContextRestoreGState(UIGraphicsGetCurrentContext());

    CGContextSaveGState(UIGraphicsGetCurrentContext());
    CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0, self.bounds.size.height);
    CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1, -1);
    CGContextClipToRect(UIGraphicsGetCurrentContext(), currentPan);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 153, 153, 153, 0.5);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 3);
    CGContextStrokeRect(UIGraphicsGetCurrentContext(), currentPan);
    //CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, self.bounds.size.width, self.bounds.size.height), self.backgroundImage.CGImage);
    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake((self.frame.size.width - self.backgroundImage.size.width)/2 , 0, self.backgroundImage.size.width, self.backgroundImage.size.height), self.backgroundImage.CGImage);
    CGContextRestoreGState(UIGraphicsGetCurrentContext());

    // Draw a yellow hollow rectangle

   // CGContextRestoreGState(UIGraphicsGetCurrentContext());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:30:30.017

无论如何，视图都不能超出其边界。设置`clipsToBounds`将只允许子视图在视图之外呈现，但它不会改变无法在`drawRect`视图之外绘制（在方法中）的事实。

如果您有权访问`XRayView`源，请查看图像是如何呈现的。他们可能是用 的`drawRect`方法绘制的`XRayView`。您必须添加一个[`UIImageView`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImageView_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:18:00.750

`clipsToBounds` means that the image will be clipped outside of the bounds. Make sure it is set to `NO`. (this was posted when the original post said `clipsToBounds = YES;`)

# iphone - 情节提要：更改转场后推断导航栏

> ID：12497682
> 
> 赞同：1
> 
> 时间：2012-09-19T15:16:23.577
> 
> 标签：iphone, objective-c, ios5, storyboard, segue

我正在开发一个视图很少的基于导航的应用程序。在情节提要中，我有一个`Navigation Controller`指向我的主 ViewController（我的应用程序的“中心”视图），它指向带有 segues 的其他视图。

起初我希望这个 segues 可以，`push`但它不能正常工作（按钮几乎没有响应），我已经切换到`modal`（[按照这里的建议](https://stackoverflow.com/a/9837780/963881)）。现在 segue 工作正常，但每当我使用`modal`segue 时，它​​指向的导航栏就会消失（我尝试过其他配置 - 导航栏显示在 Storyboard 上，但在模拟器上不起作用）。

我在哪里犯错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:04:32.927

通过模态演示，您的视图控制器不再是`UINavigation`堆栈的一部分。您可以拖入一个新的`UINavigationController`，将其显示为模态视图，并将您的视图控制器类作为导航控制器的根视图控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:23:46.723

正如 JoePasq 所建议的那样，“让您的视图控制器类成为导航控制器的根视图控制器”。选择要设置为根屏幕的视图控制器并转到编辑器/嵌入选项并选择导航控制器。您将获得一个嵌入您的根视图控制器的导航控制器。您可以在程序中以编程方式更改屏幕，而不是设置 segue。在您的按钮单击事件方法中，编写如下类似的代码；

```
- (IBAction)okPressed:(id)sender {
UIStoryBoard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle: nil]; //MainStoryboard is the name of your storyboard
SecondViewController *secondView = [storyboard instantiateViewControllerWithIdentifier:@"sView"];
//sView is the identifier name set by the user, (present inside Attribute Inspector - View Controller)
[self.navigationController pushViewController:secondView animated:YES]; 
```

让我知道这是否有效，或者还有其他方法可以做到这一点。

# screwturn - ScrewTurn Wiki 内部链接？

> ID：12497684
> 
> 赞同：1
> 
> 时间：2012-09-19T15:16:26.617
> 
> 标签：screwturn

我正在尝试创建一个内部链接，该链接将链接到用户所在页面的一部分。我环顾四周，但找不到任何东西。他们的论坛不久前被关闭了，所以它并没有真正的帮助。

任何帮助都将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:35:59.513

目标页面上的每个部分名称旁边都有小段落符号。单击它并在地址栏中查找需要在哈希标记后添加到链接的名称。您的链接最终将如下所示`[PageName#Section_1]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T20:35:59.147

同一页面中某个位置的锚点是这样创建的：

```
[anchor|#ManConfig] 
```

返回到锚点的链接是这样创建的：

```
[#ManConfig|Manually Configure Your Connection] 
```

本例中的锚点名称为“ManConfig”

# c# - 具有安全强制转换和空值验证的 Linq

> ID：12497693
> 
> 赞同：4
> 
> 时间：2012-09-19T15:16:50.777
> 
> 标签：c#, linq, nullreferenceexception

给定代码：

```
from i in this.GridViewFoo.SelectedItems
select new EmployeeEntity
{
    EmployeeID = (i as EmployeeDto).EmployeeID,
    Email = this.GetAllEmail((i as EmployeeDto).Email, (i as EmployeeDto).SecondaryEmails),
    EmployeeNumber = (i as EmployeeDto).EmployeeNumber,
    FirstName = (i as EmployeeDto).FirstName,
    LastName = (i as EmployeeDto).LastName
} 
```

在安全转换之后，`(i as EmployeeDto)`我可能会收到 NullReferenceException。我怎样才能确保代码的安全性，而不是用大量的空检查使他超负荷？

**解决方案概述：**

我做了一些测试来断言解决方案是否有效。两者都运行良好并带来相同的结果，您可以在[此处](http://ideone.com/MZGSK)查看。之后我用[OfTypeSolution](http://ideone.com/vum46)和[letSolution](http://ideone.com/0SP87)做了一些性能测试。

由于 OfType 解决方案的平均时间更好，这就是答案！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T15:22:26.337

您可以在:之前使用[OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)`Select`

```
from i in this.GridViewFoo.SelectedItems.OfType<EmployeeDto>()
select new EmployeeEntity
{
    EmployeeID = i.EmployeeID,
    Email = this.GetAllEmail(i.Email, i.SecondaryEmails),
    EmployeeNumber = i.EmployeeNumber,
    FirstName = i.FirstName,
    LastName = i.LastName
} 
```

它只会为您提供`EmployeeDto`来自的类型项目，`SelectedItems`因此无需进行强制转换和空值检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:27:42.597

```
from si in this.GridViewFoo.SelectedItems
let i = si as EmployeeDto
where i != null
select new EmployeeEntity
{
    EmployeeID = i.EmployeeID,
    Email = this.GetAllEmail(i.Email, i.SecondaryEmails),
    EmployeeNumber = i.EmployeeNumber,
    FirstName = i.FirstName,
    LastName = i.LastName
} 
```

# c# - Hide enum values in derived class

> ID：12497696
> 
> 赞同：2
> 
> 时间：2012-09-19T15:17:20.117
> 
> 标签：c#

I have the following

```
public enum MessageType
{
    Warning,
    Info,
    Error
}

public class CalculationMessage
{
    public string Message { get; set; }

    public MessageType Type { get; set; }

}

public class ValidationMessage
{
    public string Message { get; set; }

    public MessageType Type { get; set; }

    public string ErrorValue { get; set; }
} 
```

I am trying to create a base class from which both of these classes are derived, however I have a problem with the enum as a ValidationMessage can be Error / Warning / Info but a CalculationMessage can only be Warning or Info.

How is this best achieved?

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:21:34.927

您可以在 setter 中添加参数验证：

```
set
{
  if(value == MessageType.Warning || value == MessageType.Info)
  {
    this.messageType = value;
  }
  else
  {
    throw new ArgumentOutOfRangeException();
  }
} 
```

然而，这违反了 Liskov 替换原则。因此要小心并考虑是否有办法解决（例如根本不公开设置器，而是在`MessageType`内部确定）。

# jquery - jQuery Serialize Form to JSON - Make Input Array

> ID：12497697
> 
> 赞同：0
> 
> 时间：2012-09-19T15:17:22.703
> 
> 标签：jquery, json, forms

I am using a fairly standard JSON.stringify function, that gets passed across to a jQuery function that serializes this object.

However I'd like to make an modification to allow an array of inputs to be posted. Much like how the current solution handles a collection of checkboxes.

E.g.

```
<fieldset name="clothes">
  <input type="number" name="coat" />
  <input type="number" name="jacket" />
  <input type="number" name="jeans" />
  <input type="number" name="(guid)" />
</fieldset> 
```

These are all items of clothing so I'd like to form them into something like:

```
{ "Clothes": { "coat" : 2 , "jacket" : 10 , "jeans" : 1 } } 
```

In the above, the function needs to support an additional level of grouping. My first thoughts on this are to add a name to the fieldset. This seems logical to me. However as per HTML spec's the fieldset element isn't part of the form submission, so there would be some that would say adding a NAME to this element for this purpose, violates the specification. However, as the specification supports adding a 'name' attribute, I think this is perfectly valid.

In the context of the entire form, I'm looking for something that supports:

```
<fieldset>
  <input type="text" name="Name" />
  <input type="text" name="Email" />
</fieldset>
<fieldset name="clothes">
  <input type="number" name="coat" />
  <input type="number" name="jacket" />
  <input type="number" name="jeans" />
  <input type="number" name="(guid)" />
</fieldset> 
```

Giving...

```
{ "Name" : "John" , Email : "x@y.com" , "Clothes": { "coat" : 2 , "jacket" : 10 , "jeans" : 1 } } 
```

I've posted a simplified version of my current code on JSFiddle - [http://jsfiddle.net/DR3EA/1/](http://jsfiddle.net/DR3EA/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T10:54:42.080

我遇到了类似的问题，最终选择了[serializeObject](https://github.com/JasonBenn/jQuery.fn.serializeObject) jQuery 插件。不要使用字段集，而是`name`像这样格式化您的属性：

```
<input type="text" name="work.street" value="320 3rd St">
<input type="text" name="work.city" value="San Fran">
<input type="text" name="work.state" value="CA"> 
```

给定上述输入，`$('input').serializeObject()`返回一个嵌套良好的 JS 对象：

```
{ work: { street: "320 3rd St", city: "San Fran", state: "CA" } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:57:36.750

我有这个[http://jsfiddle.net/DR3EA/2/](http://jsfiddle.net/DR3EA/2/)，但它无法将标签数据转换为结果，因为我使用 fieldset 进行序列化。

```
$.fn.serializeField = function() {
    var result = {};

    this.each(function() {

        $(this).find("fieldset").each( function() {
            var $this = $(this);
            var name = $this.attr("name");

            if (name) {
               result[name] = {};
               $.each($this.serializeArray(), function() {
                   result[name][this.name] = this.value;
               }); 
            }
            else {
               $.each($this.serializeArray(), function() {
                   result[this.name] = this.value;
               });
            }
         });

    });

    return result;
}; 
```

会`result`是

```
{"Name":"bb","Email":"cc","clothes":{"coat":"-1","jacket":"-2","jeans":"-2"}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T15:46:17.627

[jquery-serializeFields](https://github.com/jonathansp/jquery-serializeFields)插件可能会有所帮助，但您需要指定一些属性（例如数据名称），以便像每个字段集（或容器元素）的键一样工作。

HTML：

```
<form>
<fieldset data-name="clothes">
  <input type="number" name="coat" value="1" />
  <input type="number" name="jacket" value="2"/>
  <input type="number" name="jeans" value="3"/>
  <input type="number" name="(guid)" value="4"/>
</fieldset>
</form>

<div id="result"></div> 
```

javascript:

```
var result = $("form").serializeFields();

$("#result").html(JSON.stringify(result)); 
```

结果：

```
{"clothes":{"coat":"1","jacket":"2","jeans":"3","(guid)":"4"}} 
```

我在这里测试过：http: [//jsfiddle.net/zfj4Lprb/](http://jsfiddle.net/zfj4Lprb/)

# sql - Not using group by in second part of sum

> ID：12497701
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:17:33.043
> 
> 标签：sql

This is my sum clause

```
Select *,(sum(current_bal-curr_bal_now)/ 
current_bal from base
Group by month 
```

This gives me an error because I'm not using current_bal in the group by. Is there a way of not using group by current_bal aswell as month as it completely messes up the output layout.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:23:06.073

另一个猜测...

```
SELECT *,
       ( sum(current_bal) OVER (PARTITION BY month) ) / current_bal
FROM   base 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:21:10.167

问题是总和只会返回一个值，因此，在您的所有选择中，`Current_bal`是不同的。应该选择哪一个？

如果您想要添加每个部门，如下所示：

```
Select sum(current_bal/current_bal)
from base
Group by month 
```

将工作

# c - Adding specific value in a string stored at an array in program memory of pic using C

> ID：12497704
> 
> 赞同：1
> 
> 时间：2012-09-19T15:17:47.257
> 
> 标签：c, pic

I want to put a string in the program memory of a pic18f. Inside this string I need specific values at some positions.

E.G.

```
rom const unsigned char date_const_array[]="Date:"; 
```

will place the string `Date:` inside program memory.

What I want is to insert to position 3 of the array the value 15 at compile time. If the array was in ram I could do:

```
date_const_array[3]=15; 
```

inside main function. But since I do not want this array to be altered and I value my ram I want it to be placed inside rom.

How can I do it?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:22:59.287

You could embed 15 right in the string using escape sequences: `"Dat\017:"` (017 is an octal constant: 1*8¹+7*8⁰=15).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T12:46:54.547

试试这个，我想这会成功

`rom const unsigned char date_const_array[]=__DATE__;` // 许多编译器使用这种方式。

# asp.net-mvc-3 - 一个 ASP.NET MVC 应用程序的数据库设计结构设计需要建议

> ID：12497711
> 
> 赞同：-2
> 
> 时间：2012-09-19T15:18:06.030
> 
> 标签：asp.net-mvc-3, database-design, asp.net-mvc-2

我正在尝试学习 ASP.Net MVC2/3 并尝试在一个实际上将成为博客项目的 Web 项目上工作。所以我会有与普通博客相似的结构。我会有标题、博客条目、一些标签和其他东西。现在我想要关于使用数据库的建议。由于博客条目（即文章）将是具有多个段落的文本，并且还可能包含一些图像。所以我想知道什么样的数据库应该适合存储这些文本。我可以使用 SQL 来存储文本，但不确定它是否足够快。关于我在哪里可以获得的任何建议，或者我应该说了解此类应用程序的良好数据库设计。

如果任何人都可以建议一个好的 ASP.net MVC3 学习资源，那也会很有帮助。我可以在网上寻找教程，但一些适合初学者的好书会有所帮助。

任何建议都会很棒。

谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:31:22.327

从 Microsoft 下载 sqlExpress，它可以足够快地存储/检索文本，它是免费的，并且适用于 .net

我认为存储帖子的最简单方法是将文本存储为 HTML，并带有指向文件结构中某处的标签。添加图像时，将其上传到该目录，并为其生成链接。

看看 wordpress 是如何工作的，这应该会给你很多编写自己的代码的想法。

# mysql - 三重计数和 groupby 在一个简单的表上使用 MySql ...是否可以在一个查询中进行？

> ID：12497714
> 
> 赞同：1
> 
> 时间：2012-09-19T15:18:17.647
> 
> 标签：mysql, sql, count, group-by

我有一个可以用一个简单的虚拟表格来解释的问题。

表“饮料”只有三个字段：

*   Id (1..N) - 主键
*   日期 ('2012-09-19'...) - 每个日期都可能经常出现
*   热（1 表示是，0 表示错误）。

我想制作一个这样的列表：

```
 Date         Total    Hot    Cold
    2012-09-19   14       6      8
    2012-09-10   21       18     3 
```

等等。

如您所料，“冷”字段计算为（总 - 热）。

到目前为止，我得到的是：

```
 SELECT Date, count(*) AS Total FROM Drinks GROUP BY Date; 
```

这给了我想要的表，但当然没有“热”和“冷”列。

有没有办法修改我的查询，以便我可以一次生成这张表？我当然可以使用 PHP 代码分阶段构建表格，但这可能不是优雅的方式，也不是最快的方式。

我很高兴观看和学习... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:21:22.340

您可以在子句中添加`CASE`语句`SELECT`。

```
SELECT Date, 
       count(*) AS Total,
        SUM(CASE WHEN Hot = 1 THEN 1 ELSE 0 END) totlHOT,
        SUM(CASE WHEN Hot = 0 THEN 1 ELSE 0 END) totalCold
FROM Drinks 
GROUP BY Date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:23:35.483

```
SELECT Date,
    count(*) AS Total,
    SUM(Hot = 1) Hot,
    SUM(Hot = 0) Cold
FROM Drinks
GROUP BY Date; 
```

# c# - 获取 System.Xml.XmlException：名称不能以“”字符开头，十六进制值 0x20。第 42 行，第 36 位

> ID：12497718
> 
> 赞同：5
> 
> 时间：2012-09-19T15:18:42.047
> 
> 标签：c#, asp.net

我收到了这个错误，到目前为止我发现的只是“删除空间”，但没有空间。这是我发现的一个脚本，它可以从任何文件格式中获取简历并提取数据（解析它），以便将其放入 SQL 数据库中……还没有那么远

ASP.NET 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="ResumeParser.aspx.cs"       Inherits="CsharpSamCodeResumeParser_USAResume" Debug="true" ValidateRequest="false" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Untitled Page</title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <table style="width: 574px; height: 95px">
        <tr>
            <td style="width: 507px">
                Resume
                URL</td>
            <td style="width: 737px">
                <asp:TextBox ID="TxtUrl" runat="server" Width="424px"></asp:TextBox>
            </td>
        </tr>            
        <tr>
           <td colspan="2" align="center">                  
                    <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Resume parser" /></td>
            </tr>
        </table>

    <table>
        <tr>
            <td style="width: 247px; height: 287px">
                PARSING RESULTS</td>
            <td style="width: 568px; height: 287px">
                <asp:TextBox ID="TxtOutput" runat="server" Height="276px" TextMode="MultiLine" Width="565px"></asp:TextBox></td>
        </tr>
    </table>

</div>
</form> 
```

C＃：

```
public partial class CsharpSamCodeResumeParser_USAResume : System.Web.UI.Page
{
//////////Configuration Setting/////////////////// 
string ServiceUrl = (string)ConfigurationSettings.AppSettings["webServiceUrl"];
protected void Page_Load(object sender, EventArgs e)
{

}

protected void Button1_Click(object sender, EventArgs e)
{
    ///////////////////Variable Start///////////////
    string url = TxtUrl.Text;        
    StringBuilder  strRequest =new StringBuilder();
    string userkey = (string)ConfigurationSettings.AppSettings["userKey"];
    string version = (string)ConfigurationSettings.AppSettings["Version"];
    string countryKey=(string)ConfigurationSettings.AppSettings["CountryKey"];
    /////////////////Variable End///////////////////

    strRequest.Append("<?xml version='1.0' encoding='utf-8'?>");
    strRequest.Append("<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>");
    strRequest.Append("<soap:Body>");
    strRequest.Append("<ParseResume xmlns='http://tempuri.org/'>");
    strRequest.Append("<url>" + url + "</url>");
    strRequest.Append("<key>" + userkey + "</key>");
    strRequest.Append("<version>" + version + "</version>");
    strRequest.Append("<countryKey>" + countryKey + "</countryKey>");
    strRequest.Append("</ParseResume>");
    strRequest.Append("</soap:Body>");
    strRequest.Append("</soap:Envelope>");
    ///////////////SOAP XML END///////////////////

    /////////////////XML PROCESSED//////////////////////
    byte[] byteArray = Encoding.ASCII.GetBytes(strRequest.ToString());
    HttpWebRequest httpRequest = (HttpWebRequest)WebRequest.Create(ServiceUrl);
    httpRequest.Credentials = CredentialCache.DefaultCredentials;
    httpRequest.Method = "POST";
    httpRequest.ContentType = "text/xml";
    httpRequest.ContentLength = byteArray.Length;
    Stream dataStream = httpRequest.GetRequestStream();
    dataStream.Write(byteArray, 0, byteArray.Length);
    dataStream.Close();
    /////////////////////PROCESS END////////////////

    //////////////////RESPONSE RECEIVED///////////////////////
    HttpWebResponse httpResponse = (HttpWebResponse)httpRequest.GetResponse();
    StreamReader streamReader = new StreamReader(httpResponse.GetResponseStream(), System.Text.Encoding.UTF8);
    string ack = string.Empty;
    //ack = streamReader.ReadToEnd().ToString();
    ////////////////////GET NODE VALUE FROM RESPONSE XML/////////////
    using (XmlReader reader = XmlReader.Create(streamReader))
    {
        while (reader.Read())
        {

            if (reader.NodeType == XmlNodeType.Element)
            {

                for (int count = 1; count <= reader.Depth; count++)
                {
                    if (reader.Name == "ParseResumeResult")
                    {
                        ack = reader.ReadElementContentAsString();
                    }

                }

            }
        }

        TxtOutput.Text = ack;
    }
    /////////////////API CALL PROCESS END///////////////////

}

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T15:39:59.263

我怀疑因为您是通过字符串连接创建 xml 文档，所以您无意中从变量之一添加了格式错误的 xml。也许其中一个有一个小于号，这导致 Xml 解析器爆炸。您应该尝试通过 DOM 创建文档，或者可能使用[CDATA](https://en.wikipedia.org/wiki/CDATA)部分作为可配置值。

```
string url = TxtUrl.Text;        
string userkey = (string)ConfigurationSettings.AppSettings["userKey"];
string version = (string)ConfigurationSettings.AppSettings["Version"];
string countryKey=(string)ConfigurationSettings.AppSettings["CountryKey"];    

strRequest.Append("<url>" + url + "</url>");
strRequest.Append("<key>" + userkey + "</key>");
strRequest.Append("<version>" + version + "</version>");
strRequest.Append("<countryKey>" + countryKey + "</countryKey>"); 
```

我会尝试将`strRequest`StringBuilder 写入文件，然后在 xml 编辑器中打开它，然后找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:22:41.087

你在这里有矛盾的陈述：

```
strRequest.Append("<?xml version='1.0' encoding='utf-8'?>"); 
```

对比

```
byte[] byteArray = Encoding.ASCII.GetBytes(strRequest.ToString()); 
```

您可能会弄乱编码并最终得到不需要的字符。

您应该替换`Encoding.ASCII`为`Encoding.UTF8`.

# ruby-on-rails - 如何测试使用 rspec 显示的图像？

> ID：12497722
> 
> 赞同：7
> 
> 时间：2012-09-19T15:19:04.057
> 
> 标签：ruby-on-rails, testing, rspec

根据正在查看的页面，我想为我的徽标使用不同的图像；主页上的标志更大。我喜欢使用请求规范来测试行为，所以我想做这样的事情：

```
describe 'Visit "advertentie/1"' do
    it 'contains add details' do
        add = create(:add_with_photos)
        visit add_path add
        page.should have_selector( 'img[alt="logo-small"]' ) # CHECK IMAGE ALT
        page.should have_content( add.name )
    end
end 
```

并且测试再次运行一些haml生成的html：

```
<div class='logo-wrapper'>
  <h1>
    <a href="/"><img alt="Logo-big" src="/assets/logo-small.png" />
    <br>
    <span>UpMarket</span>
    </a>
  </h1>
</div> 
```

但是这个选择器不起作用。这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T16:55:48.140

你试过这个`have_css`方法吗？

```
have_css("img[src*='w3schools']") 
```

（选择`<img>`src 属性值包含子字符串“w3schools”的每个元素）

# javascript - 使用变量函数重新加载页面

> ID：12497726
> 
> 赞同：0
> 
> 时间：2012-09-19T15:19:13.210
> 
> 标签：javascript, jquery

我正在尝试编写代码以在设置新帖子时重新加载页面。所以我想我可以将变量用作图像，因为每次设置新帖子时，都会出现新帖子的图像。

我开始使用元 http 刷新代码。

我可以使用 jQuery 或 javascript（我知道它们是相同的，只是写法不同）

我只知道我想让页面在出现图像的情况下自动刷新。或（新帖子）

请不要对此投反对票，我知道我在喋喋不休，但我想我找不到我想说的话。

```
<script type=”text/javascript”&gt;
function pageRefresh(timeoutPeriod) {
setTimeout("location.reload(true);",timeoutPeriod);
}
</script> 
```

也许我可以使用 onSubmit、onLoad、onReady 或其他可以解决这个问题的方法。呃失语了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:20:27.873

尝试这个，

```
function pageRefresh(timeoutPeriod) {
    setTimeout(function(){location.reload(true)}, timeoutPeriod);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:26:40.313

首先：Javascript 和 jQuery 根本不一样！Javascript 是一种编程语言，而 jQuery 是一个框架，用 javascript 编写并用于 javascript。不要在这里感到困惑。

对于您的实际问题，您可以定期刷新页面，就像您对元标记所做的那样。如果您只想在内容发生变化时更新页面，那么您必须设置一些服务，它可以为您提供内容已更改的线索。但是为此，您必须使服务器端的此服务由客户端的 javascript 使用。

您应该阅读 AJAX 以更好地了解您真正想要的内容。

# android - 将用户发送到 Google Play 并在安装后返回

> ID：12497727
> 
> 赞同：0
> 
> 时间：2012-09-19T15:19:17.317
> 
> 标签：android, android-intent, broadcastreceiver

有人知道在将用户发送到 Google Play 以安装应用程序后，我可以将其返回到我的应用程序的方法吗？

我正在使用带有“market://”Uri 的标准 ACTION_VIEW，我需要将它们带回它们在我的应用程序中的位置（而不是它们在 Google Play 中点击“打开”）。

本质上，一旦 Google Play 安装了它们链接到的应用程序，我就需要“返回”，这需要 Google Play“完成（）”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:29:50.907

您可以使用 Google Play 推荐（Android 原生应用程序跟踪）当用户安装应用程序时，您会收到对应用程序的广播。 [https://developers.google.com/analytics/devguides/collection/android/?hl=en#android-market-tracking](https://developers.google.com/analytics/devguides/collection/android/?hl=en#android-market-tracking)

而[这](https://developers.google.com/analytics/devguides/collection/android/devguide#google-play-tracking)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:28:30.253

在我的经验中。这是不可能的，因为如果您有意调用 finish(() ，那么您的活动也会破坏。

# c# - LINQ 中 IEnumable 和 IQueryable “Where”子句之间的区别

> ID：12497730
> 
> 赞同：2
> 
> 时间：2012-09-19T15:19:23.197
> 
> 标签：c#, linq-to-entities, entity-framework-4.1

我对下面的 FindBy 和 FindByExp 函数的底层机制有点困惑。我了解 FindyByExp 将在数据库端执行谓词。但是 FindBy 函数呢？它是否从数据库中获取所有对象并首先将它们加载到内存中，然后执行谓词？

```
 public IQueryable<T> FindBy(Func<T, bool> predicate)
    {
        return context.Get<T>().Where(predicate).AsQueryable<T>();
    }

    public IQueryable<T> FindByExp(Expression<Func<T, bool>> predicate)
    {
        return context.Get<T>().Where(predicate).AsQueryable<T>();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:23:54.470

`FindBy`当您枚举结果时，将从数据库中获取*所有对象并在程序的内存中过滤它们。* `T`

`FindByExp`将更改在数据库服务器上执行的查询并添加 where 子句。

# asp.net - Z-Index 属性不适用于 youtube 视频

> ID：12497733
> 
> 赞同：1
> 
> 时间：2012-09-19T15:19:32.607
> 
> 标签：asp.net, html, css, youtube, z-index

我的网站在 VB 中使用 VS 2010，我的 z-index 属性设置为 20，它在图片和其他东西上运行良好。但是我有两个 youtube 视频，并且 z-index 属性不起作用；我要显示的菜单被 youtube 视频所覆盖——但仅限于 IE；其他浏览器工作正常！

难道我做错了什么？或者当它是一个 youtube 视频时，我应该做些什么不同的事情？

我的嵌入式视频看起来像这样，它覆盖了我的菜单：

```
<table class="tablestyle0">
<tr>
<td>
<iframe id="ShowFrameID" width="640" height="480"            
     src="http://www.youtube.com/embed/IxiZ0sdh6hw?wmode=opaque?        
modestbranding=1&amp;rel=0">
</iframe>
</td>
</tr> 
```

在这方面的任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:22:04.100

如果您更改`wmode=opaque`为`wmode=transparent`，则 YouTube 播放器应该尊重您的 z-index 顺序。

**编辑：**问题是您的 YouTube 网址中有两个`?`字符。wmode=opaque 部分没有进入服务器。

在我做出改变后，它对我有用。您可能不必将其设置为`transparent`(`opaque`也应该工作)。

```
<table class="tablestyle0">
<tr>
<td>
<iframe id="ShowFrameID" width="640" height="480"            
     src="http://www.youtube.com/embed/IxiZ0sdh6hw?wmode=opaque&amp;modestbranding=1&amp;rel=0">
</iframe>
</td>
</tr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:25:06.180

添加`position:relative`到您的表格类的 CSS 中，之后它应该遵循 z-index。

# php - 将数组替换为二维数组中的数字

> ID：12497738
> 
> 赞同：0
> 
> 时间：2012-09-19T15:19:39.890
> 
> 标签：php, multidimensional-array

我有二维数组，我想在第二个数组的随机数上替换第二个二维数组

```
Array
(
    [1] => Array
        (
            [0] => 1
            [1] => 3
            [2] => 5
            [3] => 500
            [4] => 600
            [5] => 700
        )

    [2] => Array
        (
            [0] => 2
            [1] => 4
            [2] => 6
        )

) 
```

我想得到

```
 Array (
     [1] => 5 (<- random from first array)     
     [2] => 6 (<- random from second array)    
 ) 
```

我试着做：

```
foreach($variables as $key => $val) {
        $variables = str_replace($val, $val[array_rand($val)], $variables);
} 
```

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:24:02.003

```
foreach($variables as $key => $val) {
        $variables[$key] = $val[array_rand($val)];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:24:16.173

```
foreach ($variables as &$var) {
     $var = array_rand($variables[$var]);
} 
```

# c# - C# WPF 图像未加载

> ID：12497739
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:19:41.440
> 
> 标签：c#, wpf, image

我有这个小问题，我有一个包含大量图像的 WPF 可执行文件，它仅在本地计算机上加载（在制作 exe 的计算机上）其余计算机只看到文本，没有 imgs，我看到 imgs url 是在本地计算机上，所以我的问题是：如何从图像图像中加载它们？因为它给出了错误：每次我从源中的图像目录中选择图像时，属性值都无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:26:05.267

如果只是在开发 PC 上显示，那么您需要将它们添加为[嵌入式资源](https://stackoverflow.com/questions/347614/wpf-image-resources)，或者确保在部署之前将它们复制到程序集文件夹中。

# sparql - sparql/snorql 示例，第一步

> ID：12497750
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:20:06.943
> 
> 标签：sparql

我正在努力理解 SPARQL 的工作原理。[有人可以告诉我，例如，我如何在http://dbpedia.org/snorql/](http://dbpedia.org/snorql/)上找到所有姓丘吉尔的人的姓名和地点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T22:39:52.050

这将获得全名：

```
SELECT ?x ?name WHERE {
  ?x foaf:surname "Churchill"@en.
  ?x foaf:name ?name
} 
```

人们没有这样的“地方”。无论如何那会是什么？他们可能有出生和死亡的地方等等。

# javascript - 设置选择元素的 selectedindex 与使用鼠标选择一项有何不同？

> ID：12497753
> 
> 赞同：3
> 
> 时间：2012-09-19T15:20:12.560
> 
> 标签：javascript, html, dom, dom-events, onchange

在 html 页面中，如果我使用鼠标从下拉列表中选择一个项目（select 和 option html 元素），则将`onchange`触发该事件。但是，如果我使用 Javascript 来更改`selectedindex`选择元素的，则`onchange`不会触发该事件。

这两个动作有何不同？

如何触发`onchange`事件（不是通过显式调用`selectElement.onchange()`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:03:54.547

看到这个：http: [//jsfiddle.net/9xe9b/](http://jsfiddle.net/9xe9b/)

```
$("#currency").change(function(){
    var val = $(this).val();

    $(this).val(formatCurrency(val));
});

$("#infinite").change(function(){
    var val = $(this).val();

    $(this).val(formatCurrency(val));
    $(this).change(); // simulate the change event. 
});

function formatCurrency(num) {
    num = isNaN(num) || num === '' || num === null ? 0.00 : num;
    return parseFloat(num).toFixed(2);
} 
```

如果您在第二个文本框中输入一个值并弹出控制台，您将看到以下错误： `Uncaught RangeError: Maximum call stack size exceeded`

如果更改 javascript 中的值导致相关事件触发，这就是我们必须担心的问题。无限循环！

因此，如果您需要在通过 UI 或通过 javascript 更改值时重复功能，您应该创建一个执行您想要的功能并在适当的实例中调用它的函数。

# asp.net-mvc - 如何“扩展”模型验证？

> ID：12497758
> 
> 赞同：0
> 
> 时间：2012-09-19T15:20:26.910
> 
> 标签：asp.net-mvc, razor

我有两页：

*   创建使用数据注释验证的页面。
*   编辑页面。

两个页面使用不同的模型。我必须为编辑页面使用特定模型才能显示所选行的值。我如何能：

1.  让编辑控制器使用相同的验证，或者
2.  如果我使用与创建页面相同的模型，获取编辑页面以显示当前行的值？

例如：

我的创建页面：

```
@model Test.Models.NewPerson
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "Failed. Please fix the errors.")

        <div class="editor-label">
            @Html.LabelFor(m => m.FirstName)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.FirstName)
            @Html.ValidationMessageFor(m => m.FirstName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(m => m.LastName)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.LastName)
            @Html.ValidationMessageFor(m => m.LastName)
        </div>
    <input type="submit" value="Submit" />
} 
```

我的模型：

```
public class NewPerson 
{
    [Required(ErrorMessage = "*")]
    [Display(Name = "First name")]
    public string FirstName { get; set; }

    [Required(ErrorMessage = "*")]
    [Display(Name = "Last name")]
    public string LastName { get; set; }
} 
```

然后是我的编辑页面：

```
@model Test.Person

using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "Please fix the errors below.")

        <div class="editor-label">
            @Html.LabelFor(m => m.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(m => m.FirstName)
            @Html.ValidationMessageFor(m => m.FirstName)
        </div>
        <div class="editor-label">
            @Html.LabelFor(m => m.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(m => m.LastName)
            @Html.ValidationMessageFor(m => m.LastName)
        </div>
    <input type="submit" value="Update" />
} 
```

**编辑**

在我的控制器中，编辑操作，我有：

```
var context = new MyContext();          
var person = context.Person.Single(m => m.ID == id);

if (Request.IsAjaxRequest())
{
    return PartialView("Edit", person);
}
return View(person); 
```

当我在该函数中放置断点时，我看到了 var person 的结果。但是，它在视图中不返回任何内容。为什么不？

**编辑**

这是我的操作代码：

[HttpPost]

```
public ActionResult Create(NewPerson model)
{
if (ModelState.IsValid)
{
    string UID = Membership.GetUser().ProviderUserKey.ToString();
    System.Guid myUID = System.Guid.Parse(UID);

    using (var context = new MyContext())
    {   
       Person newPerson = new Person();
       newPerson.UserId = myUID;
       newPerson.FirstName = model.FirstName;
       newPerson.LastName = model.LastName;
       context.Person.AddObject(newPerson);
       context.SaveChanges();
    }
    } 
```

和编辑动作：

[HttpGet]

```
 public ActionResult Edit(int id)
    {
        var context = new MyContext();

        //recently edited: accidentally had "camper" instead of "person"
        var person = context.Person.Single(m => m.ID == id);

        if (Request.IsAjaxRequest())
        {
            return PartialView("Edit", person);
        }
        return View(person);

    } 
```

我的观点：

```
@foreach (var person in Model)
{
@Html.DisplayFor(modelItem => person.LastName), @Html.DisplayFor(modelItem => person.FirstName)

@Html.ActionLink("Edit", "Edit", new { id = person.ID }, new { @class = "openDialog", 
    data_dialog_id = "emailDialog", data_dialog_title = "Edit Person" })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:48:06.540

It's a little confusing here as to what you have and haven't done, and what does and doesn't work. However there are a few things that you should fix.

First, you should not be passing the Person object that comes from your database directly to the view. Instead, you should have your own specific Person ViewModel. This ViewModel should have your data annotations for your view on it. When you get the Person from the database, you project them into your ViewModel like this:

```
var camper = context.Person
    .Select(m => new ViewModel.Person
         { Firstname = m.Firstname, Lastname = m.Lastname}).Single(m => m.ID == id); 
```

This prevents your Data model's Person from being bloated by View requirements (for instance, your data model might allow nulls, but you want to set your View to be Required.)

Second, you're not using a using statement in the edit view. Something like this:

```
using (var camper = ..) {
    ...
} 
```

Using a ViewModel helps here as well, since this allows the context to be destroyed without conflicting with the entities which are change tracked.

Third, you should probably use DisplayTemplates a little better. Rather than having the foreach statement in your view, do this:

```
@Html.DisplayForModel() 
```

Then create a folder called DisplayTemplates in Views\Shared (or in the folder your view is in) and create a new .cshtml file called Person.cshtml, in that have this code:

```
@model Person
@Html.DisplayFor(m => m.LastName), @Html.DisplayFor(m => m.FirstName)

@Html.ActionLink("Edit", "Edit", new { id = person.ID }, new { @class = "openDialog", 
    data_dialog_id = "emailDialog", data_dialog_title = "Edit Person" }) 
```

I also notice some discrepancies in your namespaces. In one place you have Test.Person, in another you have Test.Models.NewPerson. Is it possible that you also have a Test.Models.Person and you're getting confused about which is which, so you end up populating the wrong one?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:04:51.503

两个视图可以使用相同的模型。这是创建/编辑函数的常见做法，将解决问题 1，具有相同的验证规则。

要在编辑视图的输入字段中显示现有数据，您需要在控制器中检索该数据并将其传递给视图（即填充模型）。

据推测，在 Edit 上，您将拥有某种 ID。使用它从数据源中获取正确的记录，然后在模型中设置 FirstName 和 LastName 值。然后，当您渲染视图时（当然是在传入模型之后），您将在文本框中看到现有值。

# php - How Do I Declare a Somewhat Dynamic PHP Variable

> ID：12497760
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:20:37.940
> 
> 标签：php, variables, foreach

How do I declare a variable with part of another variable plus some text at the end like this but without the syntax error...

```
$filename = $foreachvar['base_var']'.jpg'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T15:22:15.593

You need the string concatenation operator:

```
$filename = $foreachvar['base_var'] . '.jpg';
                                    ^--- 
```

or, in a different way:

```
$filename = "{$foreachvar['base_var']}.jpg"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T15:21:52.367

Using the [concatenation operator](http://php.net/manual/en/language.operators.string.php):

```
$filename = $foreachvar['base_var'] . '.jpg'; 
```

You can also use the [curly syntax](http://php.net/manual/en/language.types.string.php):

```
$filename = "{$foreachvar['bae_var']}.jpg"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:22:01.990

```
$filename = $foreachvar['base_var'] . '.jpg'; 
```

That's just assigning a value to the variable, which looks like what you're trying to do.

# jquery - 使用href更改图片和链接

> ID：12497764
> 
> 赞同：0
> 
> 时间：2012-09-19T15:20:52.983
> 
> 标签：jquery, thumbnails, href

我尝试归档以下内容：

我有缩略图（由 PHP 动态加载），通过单击它们我想将某个图片（id = big）更改为缩略图的大版本。在这个大版本周围有一个`<a>`用于灯箱 jQuery 脚本的标签。-Tag的 href`<a>`指的是这张图片的更大版本。

现在我可以用 JS 更改图片，但是如何更改`<a>`覆盖图片的 -Tag 的 href？

图像的构造如何：（我需要将`<a>`图像的 href 和 src 更改为相同的链接）

```
<a href="images/projekte/testprojekt/big/01.jpg" rel="lightbox[bilder]"
title="Click the X or anywhere outside the image to close">
<img src="images/projekte/testprojekt/big/01.jpg"
alt="Projekt" id="swap"/></a> 
```

PHP 创建我的缩略图：

```
foreach(get_files($dir,&$endungen)  as $file) {
    $big = str_replace( 'thumbs/', 'big/', $file);
    echo "<li><img src=\"$file\" height=\"50px\" width=\"50px\" onclick=\"javascript:document.getElementById('swap').src =('/joomla/$big');\"/></li>\n";
} 
```

有没有办法做到这一点（使用jQuery）？

# javascript - 如果跨度包含少于 3 个字符，则使用 jQuery 隐藏跨度父级

> ID：12497771
> 
> 赞同：2
> 
> 时间：2012-09-19T15:21:12.630
> 
> 标签：javascript, jquery, html, text, contains

这让我发疯......但我肯定错过了一些东西。

所以 HTML 看起来像：

```
<ul>
  <li><span>Product spec name</span><span>232112412</span></li>
  <li><span>Product spec name</span><span>cm</span></li>
  <li><span>Product spec name</span><span>80 cm</span></li>
  <li><span>Product spec name</span><span>75 cm</span></li>
  <li><span>Product spec name</span><span>cm</span></li>
</ul> 
```

所以我想要实现的是隐藏那些第二个跨度包含小于或等于2个字符的列表元素。我考虑过将它们放入一个变量中，循环遍历它们，如果当前项的长度小于或等于 2，那么 jQuery 应该隐藏它的父项。

这是我写的代码：

```
$(document).ready(function () {
     var pspec = $('ul li span:nth-child(2)');

     for(i=0;i<pspec.length;i++) {
        if($(pspec[i]).text().length <= 2) {
            $(this).parent().hide();
        }
     }
}); 
```

但是这段代码不能解决问题......我仍然认为自己是一个 jQuery 初学者，所以请你能帮我解决这个问题吗？

提前致谢！

最好的祝愿，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:23:48.340

您可以使用`jQuery` `each`而不是使用`for`和混合 jquery 和 javascript，

```
$(document).ready(function(){
     var pspec = $('ul li span:nth-child(2)').each(function(){    
        if($(this).text().length <= 2) {
          $(this).parent().hide();
          }
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:24:33.687

试试下面，

```
$(document).ready(function(){
    $.each ($('ul li'), function (idx, el) { 
        var $span = $(this).find('span').eq(1);  //2nd span
        if ($span.text().length <= 2) { 
           $span.parent().hide();
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:26:23.503

使用过滤功能

```
$('ul li span:nth-child(2)').filter(function() {
    return $(this).text().length < 3; // <-- get 2nd span elements whose text length < 3
}).parent().hide();​ // <-- hide parent elements of the returned elements 
```

[http://jsfiddle.net/y9dSU/](http://jsfiddle.net/y9dSU/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T15:27:55.263

演示：http: [//jsfiddle.net/PFaav/](http://jsfiddle.net/PFaav/)

```
$(document).ready(function () {
  $('ul li').filter(function () {
    return $(this).find('span').eq(1).text().length <= 2;
  }).hide();
}); 
```

如果您替换，您的代码将起作用

```
$(this).parent().hide(); 
```

这样

```
$(pspec[i]).parent().hide(); 
```

# iphone - iPhone 5 的新图像名称

> ID：12497776
> 
> 赞同：35
> 
> 时间：2012-09-19T15:21:26.763
> 
> 标签：iphone, xcode, ios6

我们使用retina 制作名称中带有@2x 的图像。我看到默认图像必须是 default-568h@2x 但其他图像似乎并非如此。就像我的背景是 bg.png 和 bg@2x.png 我尝试使用 bg-568h@2x.png 但这不起作用。有人可以告诉我需要为支持 iPhone 5 的图像命名吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-24T10:44:57.787

iPhone 5（4'' 显示器）没有特殊的后缀，只有特定的 Default-568h@2x.png 文件。

这是一个处理它的宏：

```
// iPhone 5 support
#define ASSET_BY_SCREEN_HEIGHT(regular, longScreen) (([[UIScreen mainScreen] bounds].size.height <= 480.0) ? regular : longScreen) 
```

用法：（资产名称 - image.png、image@2x.png、image-568h@2x.png）

```
myImage = [UIImage imageNamed:ASSET_BY_SCREEN_HEIGHT(@"image",@"image-568h")]; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-19T15:25:47.820

没有特定的图像名称。拥有 Default-568h@2x 将在 iPhone 5 或 iPod Touch 5G 上启动该图像，并将启用非信箱模式。之后，您需要设计灵活的视图。新尺寸没有特殊的“图像名称”或任何东西。

例如，对于您的背景，您可能应该使用能够拉伸或平铺的图像，并在设置之前对其进行正确配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:28:58.743

iPhone 5 没有不同的像素密度，它与 iPhone 4/4S 的视网膜显示 PPI 相同，只是屏幕尺寸不同。@2x 图像将用于 iPhone 5 和 4/4S。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T14:47:16.430

为了完成 Jason 的回答，我建议：如何覆盖`UIImage`'`imageNamed:`方法以使其在图像名称的“-568”后缀中发生？或者添加一个新方法调用`resolutionAdaptedImageNamed:`到`UIImage`可能使用类别。

如果接下来几天我有一点时间，我会尝试发布代码。

注意：不适用于 Nib 文件中的图像。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-27T11:03:45.607

如果您使用的是 Xcode 5，则可以使用资产目录（请参阅[Apple 文档中的](https://developer.apple.com/library/ios/recipes/xcode_help-image_catalog-1.0/Recipe.html#//apple_ref/doc/uid/TP40013303-CH1-SW1)用法）

创建资产目录后，`[ UIImage imagedNamed: @"your_image_set" ]`将根据设备提取正确的图像。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T07:14:29.627

您也可以为此制作类别，如下所示。

```
UIImage+Retina4.h
#import <UIKit/UIKit.h>
#import <objc/runtime.h>
 @interface UIImage (Retina4)
 @end

UIImage+Retina4.m
#import "UIImage+Retina4.h"
static Method origImageNamedMethod = nil;
@implementation UIImage (Retina4)

+ (void)initialize {
origImageNamedMethod = class_getClassMethod(self, @selector(imageNamed:));
method_exchangeImplementations(origImageNamedMethod,
                               class_getClassMethod(self, @selector(retina4ImageNamed:)));
}
+ (UIImage *)retina4ImageNamed:(NSString *)imageName {
// NSLog(@"Loading image named => %@", imageName);
NSMutableString *imageNameMutable = [imageName mutableCopy];
NSRange retinaAtSymbol = [imageName rangeOfString:@"@"];
if (retinaAtSymbol.location != NSNotFound) {
    [imageNameMutable insertString:@"-568h" atIndex:retinaAtSymbol.location];
} else {
    CGFloat screenHeight = [UIScreen mainScreen].bounds.size.height;
    if ([UIScreen mainScreen].scale == 2.f && screenHeight == 568.0f) {
        NSRange dot = [imageName rangeOfString:@"."];
        if (dot.location != NSNotFound) {
            [imageNameMutable insertString:@"-568h@2x" atIndex:dot.location];
        } else {
            [imageNameMutable appendString:@"-568h@2x"];
        }
    }
}

NSString *imagePath = [[NSBundle mainBundle] pathForResource:imageNameMutable ofType:@"png"];
if (imagePath) {
    return [UIImage retina4ImageNamed:imageNameMutable];
} else {
    return [UIImage retina4ImageNamed:imageName];
}
return nil;
}

@end 
```

您可以直接使用导入此类别进行检查，如下所示，您不会检查568或普通图像

```
imgvBackground.image=[UIImage imageNamed:@"bkground_bg"];//image name without extantion 
```

# facebook - 如何使用 API 创建带有图片的 facebook 里程碑？

> ID：12497783
> 
> 赞同：0
> 
> 时间：2012-09-19T15:21:48.460
> 
> 标签：facebook, facebook-page

有没有办法使用 API 发送带有图片的 facebook 里程碑？我检查了以下文档，但一无所获。

[https://developers.facebook.com/docs/reference/api/page/#milestones](https://developers.facebook.com/docs/reference/api/page/#milestones)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:25:36.287

不，API 仅支持该文档中列出的参数，您无法通过 API 上传带有附加图像的里程碑

# opengl-es - 围绕纹理的不透明部分绘制轮廓

> ID：12497786
> 
> 赞同：1
> 
> 时间：2012-09-19T15:21:52.793
> 
> 标签：opengl-es, cocos2d-iphone, textures

修补新游戏的功能集，我正在考虑加入 PVP 游戏模式。踢完人工智能后，没有什么比 NI 更糟了：)。iSomething 只有。愿意限制在现代设备上。

我会考虑区分地图上每个玩家的角色的一个选项是为每个玩家的角色添加“动态”不同颜色的 2 点轮廓（存在其他选项，但需要考虑资源的权重）。

我在这里（或其他地方）没有找到任何非常有用的答案来解决这种要求，我也不是一个 GL 专家。如果你们中的任何人能指出一些教程的方向，我将不胜感激。TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:47:56.630

我不建议您必须将轮廓放入单独的纹理中。我想象的是你有一个精灵，它的区域是全部`alpha = 1.0`，被一个透明区域包围`alpha = 0.0`。

一个想法可能是在不透明区域周围绘制几个像素宽的环，例如`alpha = 0.5`.

如果您想绘制没有边框的精灵，您可以只对 进行 alpha 测试`alpha > 0.75`，并且边框不会出现。如果要绘制边框，可以对 进行 alpha 测试`alpha > 0.25`，并使用片段着色器将所有像素替换`0.4 < alpha < 0.6`为您选择的彩色边框。

如果您的图像使用部分透明度，这将变得更加困难，但在这种情况下，您可能会阻止 0.0 到 0.1 的范围以用于 alpha 元数据（如边框）​​。

这不需要使用任何额外的纹理或增加任何现有资源的大小。

# codeigniter-2 - 设置环境数据库，系统文件夹，应用程序文件夹，用于codeigniter

> ID：12497794
> 
> 赞同：0
> 
> 时间：2012-09-19T15:22:14.467
> 
> 标签：codeigniter-2

[我在使用 CodeIgniter 网站的多服务器环境解决方案上](https://stackoverflow.com/questions/2239862/solution-to-multi-server-environment-with-a-codeigniter-website)检查了这个答案 发生了这样的简单回声测试它

```
if(strpos($_SERVER['HTTP_HOST'], 'mylivesite.com'))
{
    define('LIVE', TRUE);
    echo "LIVE";
}
else
{
    define('LIVE', FALSE);
    echo "NOT LIVE";
} 
```

不会工作。总是说它不是活的。但是这样。

```
if($_SERVER['HTTP_HOST'] === 'mylivesite.com')
{
    define('LIVE', TRUE);
    echo "LIVE";
}
else
{
    define('LIVE', FALSE);
    echo "NOT LIVE";
} 
```

在远程服务器上说它是实时的。

会有什么问题？==='mylivesite.com'会有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:45:48.260

```
if(strpos($_SERVER['HTTP_HOST'], 'mylivesite.com') === false)
{
    define('LIVE', FALSE);
    echo "NOT LIVE";
}
else
{
    define('LIVE', TRUE);
    echo "LIVE";
} 
```

将使其按预期工作。

# iphone - NSUrlConnection 挂在 didReceiveData 上，但并非总是如此

> ID：12497800
> 
> 赞同：0
> 
> 时间：2012-09-19T15:22:30.530
> 
> 标签：iphone, objective-c, uitableview

从网络下载图像时遇到问题。

我有一个带有全屏单元格的 uitableview，每个单元格背景都是使用一组 url 从网上下载的图像。

问题仅发生在第一次没有加载图像的第一个单元格上，但是如果我向下滚动到第二个单元格然后再次向上滚动到第一个单元格，它会成功加载！

该应用程序坚持这种方法：

```
-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
NSLog(@"receiving data");
[downloadData appendData:data]; 
```

}

我有一个 iOS6 的 iPhone 4s，这个问题没有发生，图像加载完美。

有什么建议么？

提前致谢

编辑

用我的 UIImageViewDownload.m 扩展 UIImageView

```
- (void) loadImage{
NSURLRequest *request= [NSURLRequest requestWithURL:myurl];
NSURLConnection *conn= [NSURLConnection connectionWithRequest:request delegate:self];
if(conn){
    NSLog(@"Sto scaricando");
    downloadData=[[NSMutableData alloc]init]; 
    indicator= [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    [indicator setFrame:CGRectMake(0, 0, 30, 30)];
    [indicator setCenter:CGPointMake(self.frame.size.width/2, self.frame.size.height/2)];
    [self addSubview:indicator];
    [indicator startAnimating];

}

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
NSLog(@"ricevo data");
[downloadData appendData:data]; 
```

}

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
NSLog(@"finisco data");
UIImage *img= [UIImage imageWithData:downloadData];
[self setImage:img];
[indicator stopAnimating]; 
```

}

# asp.net - Azure Blob 存储是否有任何开源文件夹/浏览器/创建器？

> ID：12497801
> 
> 赞同：3
> 
> 时间：2012-09-19T15:22:31.110
> 
> 标签：asp.net, asp.net-mvc, azure, azure-storage, azure-blob-storage

我们正在寻求创建一个文档管理区域，该区域使用 MVC3 应用程序中的 Azure Blob 存储对标准文件夹结构进行建模。

例如

1.  用户可以创建文件夹
2.  用户可以将文档上传到文件夹
3.  用户可以列出目录内容等
4.  用户可以删除文档
5.  用户可以下载文件

现在我很欣赏 Azure Blob 存储只有容器，其余的都是由创建路径的斜线伪造的。然而，这种功能似乎是其他人必须创造的东西？

我做了一些搜索，但找不到任何东西。基本上类似于 CloudXplorer 或 Azure Storage Explorer，但基于 Web

有谁知道任何带有 Web 前端（理想情况下是 MVC）的 azure blob 存储实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:43:04.417

您可以开始查看[BlobShare](http://blobshare.codeplex.com/wikipage?title=Get%20Started)，这是一个 MVC 应用程序，它允许您上传、下载、查看、共享…… blob：

![在此处输入图像描述](../Images/73729528d4e519d84dd27c36c75f946e.png)

但是，对于排序部分，您需要自己构建一些东西。我个人会考虑使用 Windows Azure 缓存（预览版）来做到这一点；每当您访问“目录”时，将 blob 缓存在该“目录”中并根据缓存中的数据进行排序（同样适用于分页）。并使用诸如服务总线主题/队列之类的东西来刷新缓存，只要有人添加/删除/重命名/...一个 blob（+ X 分钟内未访问的目录超时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:53:59.697

我也找到了这个样本。[http://peterkellner.net/2010/11/12/azure-storage-treeviewer-directory-browser/](http://peterkellner.net/2010/11/12/azure-storage-treeviewer-directory-browser/)。它不是基于网络的，但似乎创建了一个基本的树结构并显示它。这里也有相关讨论[http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/256cfc0f-bccc-4bf7-b7eb-cb7c7aca0c8a](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/256cfc0f-bccc-4bf7-b7eb-cb7c7aca0c8a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-28T20:25:49.523

请在此处查看我的答案[https://stackoverflow.com/a/65944680/7988162](https://stackoverflow.com/a/65944680/7988162)，了解如何在所有平台上使用存储资源管理器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-03T20:29:59.950

分层 blob 存储现在通过 Data Lake Storage Gen2 存在。[在此处](https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview)查看文档。

# html - 如何使兄弟 div 动态填充父级？

> ID：12497802
> 
> 赞同：2
> 
> 时间：2012-09-19T15:22:31.760
> 
> 标签：html, css, layout, height

我基本上有一些兄弟 div、页眉、内容、页脚。我希望内容在调整窗口大小时动态填充页眉和页脚留下的父级空间。

我尝试在全部或部分上使用 height:100% ，这总是使元素太高。我不想要滚动条。这可以只用 CSS 完成还是我必须使用 Jquery？

[http://jsfiddle.net/2fnA7/](http://jsfiddle.net/2fnA7/)

HTML

```
<html class="fill">
    <body class="fill">
        <div>header</div>
        <div class="content">content</div>
        <div>footer</div>
    </body>
</html> 
```

CSS

```
.fill
{
    height:100%;
}
.content
{
    height:100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:40:05.197

如果您有固定的页眉和页脚高度，您可以通过在内容 div 上设置顶部和底部来做到这一点，即

```
<style type="text/css">
html, body{width: 100%; height: 100%; margin: 0; padding: 0}
.header{position: absolute; top: 0; width: 100%; height: 100px; background: #888}
.content{position: absolute; width: 100%; top: 100px; bottom: 100px}
.footer{position: absolute; bottom: 0; width: 100%; height: 100px; background: #888}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:35:18.130

没错，盒子的高度是容器的 100%，但是你还必须考虑到你有边框，还有页脚。

所以总高度是：

容器高度 + 边框总和 + 页脚高度。

这将强制滚动条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:10:11.853

有很多方法可以模拟这种效果，每种方法都有折衷。

第一个。固定页眉、页脚和设置顶部和底部：[jsFiddle](http://jsfiddle.net/Pm6Wq/13/) 妥协，元素大小固定，设计是刚性的，因此不是内容驱动的。可以在未来更难地弥补，因为一切都是绝对定位的。

第二。百分比：[jsFiddle](http://jsfiddle.net/CVdZt/5/) 妥协，一切都可以缩放 - 不仅仅是内容区域。这意味着屏幕越大，页眉和页脚就越大。

第三。混合搭配，修复固定的东西，让需要灵活的东西灵活：[jsFiddle](http://jsfiddle.net/qEjDt/9/) 妥协，虽然更灵活，但它涉及隐藏可能难以管理的内容。

您绝不想使用这些方法中的任何一种。查看您的**内容**并混合使用可为您的内容提供最大空间和最佳外观的方法。随着时间的推移， CSS 属性`calc()`将使这变得更容易，但浏览器需要先到达那里。

如果您需要限制页眉和页脚变得太大，我建议您将选项二视为最灵活的并实施最小和最大高度。( [jsFiddle](http://jsfiddle.net/hKVX9/13/) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T16:37:07.293

这是有效的：
基于像素的页眉和页脚以及基于百分比的内容。
page.html

```
<style>
.header
{
    background-color:#222;
    padding:5px;
    position: absolute;
    top: 0px;
    left:0px;
    right:0px;
    height:100px;
}
.content
{
    background-color:#CCC;
    padding:5px;
    position: absolute;
    top: 100px;
    bottom: 50px;
    left:0px;
    right:0px;
}
.footer
{
    position:absolute;
    bottom: 0px;
    border:1px;
    height:50px;
    background-color:#09F;
    left:0px;
    right:0px;
}

</style>
<div class="header">1</div>
<div class="content">2</div>
<div class="footer">3</div> 
```

# vba - 找到第一个空白行，然后写入它

> ID：12497804
> 
> 赞同：9
> 
> 时间：2012-09-19T15:22:39.107
> 
> 标签：vba, excel

我需要在工作簿中找到第一个空白行并将信息写入 (row, 1) 和 (row, 2)。我想我现在很困...

```
Function WriteToMaster(num, path) As Boolean

'Declare variables
Dim xlApp As Excel.Application
Dim wb As Workbook
Dim ws As Worksheet
Dim infoLoc As Integer

Set xlApp = New Excel.Application

Set wb = xlApp.Workbooks.Open("PATH OF THE DOC")
Set ws = wb.Worksheets("Sheet1")

'Loop through cells, looking for an empty one, and set that to the Num
Cells(1, 1).Select
For Each Cell In ws.UsedRange.Cells
    If Cell.Value = "" Then Cell = Num
    MsgBox "Checking cell " & Cell & " for value."
Next

'Save, close, and quit
wb.Save
wb.Close
xlApp.Quit

'Resets the variables
Set ws = Nothing
Set wb = Nothing
Set xlApp = Nothing 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T15:35:29.023

如果您指的是使用的最后一行之后的行号，您可以通过以下方式找到它：

```
Dim unusedRow As Long
unusedRow = Cells.SpecialCells(xlCellTypeLastCell).Offset(1, 0).Row 
```

如果您的意思是一行恰好是空白的数据，那么它会变得更加复杂。

这是我编写的一个函数，它将为您提供所提供工作表空白的第一行的实际行号。

```
Function firstBlankRow(ws As Worksheet) As Long
'returns the row # of the row after the last used row
'Or the first row with no data in it
    Dim rw As Range
    For Each rw In ws.UsedRange.Rows
        If rw.Address = ws.Range(rw.Address).SpecialCells(xlCellTypeBlanks). _
            Address Then

                firstBlankRow = rw.Row
                Exit For
        End If
    Next
    If firstBlankRow = 0 Then
        firstBlankRow = ws.Cells.SpecialCells(xlCellTypeLastCell). _
                    Offset(1, 0).Row
    End If
End Function 
```

用法示例：`firstblankRow(thisworkbook.Sheets(1))`或传递任何工作表。

编辑：正如 ooo 所指出的，如果您使用的范围内没有空白单元格，这将出错。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T16:52:22.360

我会这样做的。简短而甜蜜:)

```
Sub test()
Dim rngToSearch As Range
Dim FirstBlankCell As Range
Dim firstEmptyRow As Long

Set rngToSearch = Sheet1.Range("A:A")
    'Check first cell isn't empty
    If IsEmpty(rngToSearch.Cells(1, 1)) Then
        firstEmptyRow = rngToSearch.Cells(1, 1).Row
    Else
        Set FirstBlankCell = rngToSearch.FindNext(After:=rngToSearch.Cells(1, 1))
        If Not FirstBlankCell Is Nothing Then
            firstEmptyRow = FirstBlankCell.Row
        Else
            'no empty cell in range searched
        End If
    End If
End Sub 
```

更新以检查第一行是否为空。

编辑：更新以包括检查整行是否为空

```
Option Explicit

Sub test()
Dim rngToSearch As Range
Dim firstblankrownumber As Long

    Set rngToSearch = Sheet1.Range("A1:C200")
    firstblankrownumber = FirstBlankRow(rngToSearch)
    Debug.Print firstblankrownumber

End Sub

Function FirstBlankRow(ByVal rngToSearch As Range, Optional activeCell As Range) As Long
Dim FirstBlankCell As Range

    If activeCell Is Nothing Then Set activeCell = rngToSearch.Cells(1, 1)
    'Check first cell isn't empty
    If WorksheetFunction.CountA(rngToSearch.Cells(1, 1).EntireRow) = 0 Then
        FirstBlankRow = rngToSearch.Cells(1, 1).Row
    Else

        Set FirstBlankCell = rngToSearch.FindNext(After:=activeCell)
        If Not FirstBlankCell Is Nothing Then

            If WorksheetFunction.CountA(FirstBlankCell.EntireRow) = 0 Then
                FirstBlankRow = FirstBlankCell.Row
            Else
                Set activeCell = FirstBlankCell
                FirstBlankRow = FirstBlankRow(rngToSearch, activeCell)

            End If
        Else
            'no empty cell in range searched
        End If
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T15:37:58.063

**更新**

灵感来自 Daniel 上面的代码以及这是 WAY 的事实！现在对我来说比我必须做的实际工作更有趣，我创建了一个有希望的完整证明函数来查找工作表中的第一个空白行。欢迎改进！否则，这将进入我的图书馆 :) 希望其他人也能从中受益。

```
 Function firstBlankRow(ws As Worksheet) As Long
'returns the row # of the row after the last used row
'Or the first row with no data in it

    Dim rngSearch As Range, cel As Range

    With ws

        Set rngSearch = .UsedRange.Columns(1).Find("") '-> does blank exist in the first column of usedRange

        If Not rngSearch Is Nothing Then

            Set rngSearch = .UsedRange.Columns(1).SpecialCells(xlCellTypeBlanks)

            For Each cel In rngSearch

                If Application.WorksheetFunction.CountA(cel.EntireRow) = 0 Then

                    firstBlankRow = cel.Row
                    Exit For

                End If

            Next

        Else '-> no blanks in first column of used range

            If Application.WorksheetFunction.CountA(Cells(.Rows.Count, 1).EntireRow) = 0 Then '-> is the last row of the sheet blank?

                '-> yeap!, then no blank rows!
                MsgBox "Whoa! All rows in sheet are used. No blank rows exist!"

            Else

                '-> okay, blank row exists
                firstBlankRow = .UsedRange.SpecialCells(xlCellTypeBlanks).Row + 1

            End If

        End If

    End With

End Function 
```

**原始答案**

要查找工作表中的第一个空白，请替换这部分代码：

```
Cells(1, 1).Select
For Each Cell In ws.UsedRange.Cells
    If Cell.Value = "" Then Cell = Num
    MsgBox "Checking cell " & Cell & " for value."
Next 
```

使用此代码：

```
With ws

    Dim rngBlanks As Range, cel As Range

    Set rngBlanks = Intersect(.UsedRange, .Columns(1)).Find("")

    If Not rngBlanks Is Nothing Then '-> make sure blank cell exists in first column of usedrange
        '-> find all blank rows in column A within the used range
        Set rngBlanks = Intersect(.UsedRange, .Columns(1)).SpecialCells(xlCellTypeBlanks)

        For Each cel In rngBlanks '-> loop through blanks in column A

            '-> do a countA on the entire row, if it's 0, there is nothing in the row
            If Application.WorksheetFunction.CountA(cel.EntireRow) = 0 Then
                num = cel.Row
                Exit For
            End If

        Next
    Else

        num = usedRange.SpecialCells(xlCellTypeLastCell).Offset(1).Row                 

    End If

End With 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-07T17:31:37.977

我知道这是一个较旧的线程，但是我需要编写一个函数来返回一个范围内的第一个空白行。我在网上找到的所有代码实际上都是在整行（甚至是范围之外的单元格）中搜索空白行。搜索范围之外的范围内的数据触发了已使用的行。在我看来，这似乎是一个简单的解决方案：

```
Function FirstBlankRow(ByVal rngToSearch As Range) As Long
   Dim R As Range
   Dim C As Range
   Dim RowIsBlank As Boolean

   For Each R In rngToSearch.Rows
      RowIsBlank = True
      For Each C In R.Cells
         If IsEmpty(C.Value) = False Then RowIsBlank = False
      Next C
      If RowIsBlank Then
         FirstBlankRow = R.Row
         Exit For
      End If
   Next R
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T19:24:37.790

```
ActiveSheet.Range("A10000").End(xlup).offset(1,0).Select 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-03T15:43:42.547

非常旧的线程但是..我正在寻找一个“更简单”的......一个更小的代码

老实说，我不明白上面的任何答案：D - 我是菜鸟

但这应该可以完成工作。（对于较小的纸张）

```
Set objExcel = CreateObject("Excel.Application")
objExcel.Workbooks.Add 
```

从下向上读取 col 1 中的每个单元格并在第一个空单元格处停止

```
intRow = 1
Do until objExcel.Cells(intRow, 1).Value = ""
   intRow = intRow + 1
Loop 
```

然后你可以这样写你的信息

```
objExcel.Cells(intRow, 1).Value = "first emtpy row, col 1"
objExcel.Cells(intRow, 2).Value = "first emtpy row, col 2" 
```

ETC...

然后我认出了它是一个vba线程......哈哈

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-03T02:22:04.070

非常古老的线程，但更简单:)

```
Sub firstBlank(c) 'as letter
    MsgBox (c & Split(Range(c & ":" & c).Find("", LookIn:=xlValues).address, "$")(2))
End Sub
Sub firstBlank(c) 'as number
    cLet = Split(Cells(1, c).address, "$")(1)
    MsgBox (cLet & Split(Range(cLet & ":" & cLet).Find("", LookIn:=xlValues).address, "$")(2))
End Sub 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-01T22:15:16.197

函数 firstBlankRow() As Long
Dim emptyCells As Boolean

```
 For Each rowinC In Sheet7.Range("A" & currentEmptyRow & ":A5000")   ' (row,col)

        If rowinC.Value = "" Then
            currentEmptyRow = rowinC.row
            'firstBlankRow = rowinC.row 'define class variable to simplify computing complexity for other functions i.e. no need to call function again
            Exit Function   
        End If
    Next 
```

结束功能

# delphi - 基于 SSL 的 Indy IMAP4

> ID：12497806
> 
> 赞同：3
> 
> 时间：2012-09-19T15:22:39.513
> 
> 标签：delphi, imap, indy

我使用 Indy 10 (10.5.8.0) 在 Delphi 2007 中编写了一个 Windows 服务，该服务通过 IMAP 连接到电子邮件服务器并读取 10 封电子邮件，处理它们并断开连接。这会在一天中重复。只要服务不使用 SSL/TLS 连接，它就可以正常工作。

使用 TLS 连接时，它似乎第一次工作，但在随后的尝试中给出“启动 SSL 协商失败”错误。我在我的服务中使用以下 Indy 设置：

```
FIMAP4.Port := 143
FIMAP4.UseTLS := utUseRequireTLS;
FIdSSLIOHandlerSocketOpenSSL1.SSLOptions.Method := sslvSSLv23; 
```

电子邮件服务器运行 Exchange 2010，并在端口 143 上运行 TLS，在端口 993 上运行 SSL。我使用的是最新版本的 ssl dll (1.0.1.3)。

我正在断开连接：

```
FIMAP4.IOHandler.InputBuffer.Clear;
FIMAP4.Disconnect; 
```

**更新：**

从 EurekaLog 中提取：

```
|IdExplicitTLSClientServerBase.pas|TIdExplicitTLSClient|TLSNotAvailable   |416[4]  |
|IdExplicitTLSClientServerBase.pas|TIdExplicitTLSClient|TLSNotAvailable   |412[0]  |
|IdExplicitTLSClientServerBase.pas|TIdExplicitTLSClient|ProcessTLSNotAvail|342[2]  |
|IdExplicitTLSClientServerBase.pas|TIdExplicitTLSClient|ProcessTLSNotAvail|341[1]  |
|IdIMAP4.pas                      |TIdIMAP4            |Login             |1957[16]|
|IdIMAP4.pas                      |TIdIMAP4            |Connect           |2019[28]| 
```

这似乎表明 TLS*不可*用（我原以为 TLSNotAvailable 会引发

```
EIdTLSClientTLSNotAvailable.Create(RSTLSSLSSLNotAvailable); 
```

而不是一个

```
EIdTLSClientTLSNotAvailable.Create(RSTLSSLSSLCmdFailed); 
```

但这让我想知道电子​​邮件服务器是否不支持 TLS，至少在端口 143 上）。

如果我不使用 TLS，我会收到：EIdReplyIMAP4Error: Command received in Invalid state。

```
|IdReplyIMAP4.pas   |TIdReplyIMAP4   |RaiseReplyError               |242[1]  |
|IdTCPConnection.pas|TIdTCPConnection|RaiseExceptionForLastCmdResult|576[1]  |
|IdIMAP4.pas        |TIdIMAP4        |Login                         |1970[29]|
|IdIMAP4.pas        |TIdIMAP4        |Connect                       |2019[28]| 
```

这似乎是一个身份验证失败的消息，虽然我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T19:46:08.473

尝试使用`sslvTLSv1`而不是`sslvSSLv23`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:23:20.103

固定的！

两个关键设置错误：

```
FIdSSLIOHandlerSocketOpenSSL1.SSLOptions.Method := sslvTLSv1;
FIMAP4.UseTLS := utUseImplicitTLS; 
```

设置这些（仍然在端口 143 上）解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T00:30:13.430

最新的 Indy 10 版本在 TLS、SSL、IMAP、SMTP 和 SASL 方面的性能比 Delphi 2007 中发布的要好得多。哎呀，Delphi 2007 在 2006 年的某个时候发布，所以 Indy 10 版本是来自2006 年，那是六年前的事了。

升级您的 Indy10 源，然后尝试不同的 SSL 选项。

您可能还有一个错误的 SSL（ssleay、libssl）DLL 版本。使用 Indy 页面上推荐的版本。

# c# - NLog 拒绝抛出异常

> ID：12497809
> 
> 赞同：2
> 
> 时间：2012-09-19T15:22:44.230
> 
> 标签：c#, debugging, exception, nlog, throw

你好亲爱的开发者，

我在使用 NLog 时遇到了一个奇怪的问题，
我遇到了崩溃，但在日志中找不到用户活动的踪迹。

我假设，日志记录不起作用......
尝试搜索权限问题等，但一切似乎都很好

我想在出现问题时调试我的日志记录，所以我创建了以下
代码来告诉用户它是否未能创建任何内容：

```
public static class Log
{
    static Log()
    {
        try
        {
            AppLogger = LogManager.GetLogger("Megatec.EngineeringMatrix.AppLogger");
            ChangeLogger = LogManager.GetLogger("Megatec.EngineeringMatrix.ChangeLogger");
            DRCLogger = LogManager.GetLogger("Megatec.EngineeringMatrix.DRCLogger");

            if((AppLogger == null) || (ChangeLogger == null) || (DRCLogger == null))
                throw new NLogConfigurationException("Configuration does not specify correct loggers");
            writeStartupLogEntry();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString(), @"Failed to load `Megatec.EngineeringMatrix` Loggers.");
            throw;
        }

    }

    public static readonly Logger AppLogger;
    public static readonly Logger ChangeLogger;
    public static readonly Logger DRCLogger; 
```

使用以下配置文件：

```
 <?xml version="1.0" encoding="utf-8" ?>
  <nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" throwExceptions="true">
    <targets>
      <target xsi:type="File" name="AppLogFile" createDirs="true" fileName="c:/log?s/${processname}/${logger}_${shortdate}.log"
              layout=">> ${time} ${uppercase:${level}} ${callsite} ${message} ${exception:format=tostring}" />

      <target xsi:type="File" name="ChangeLogFile" createDirs="true" fileName="c:/log?s/${processname}/${logger}_${shortdate}.log"
              layout=">> ${date} ${message} ${exception:format=tostring}" />

      <target xsi:type="File" name="DRCLogFile" createDirs="true" fileName="c:/logs/${processname}/${logger}_${shortdate}.log"
              layout=">> ${date} ${message} ${exception:format=tostring}" />
    </targets>

    <rules>
      <logger name="Megatec.EngineeringMatrix.AppLogger" minlevel="Trace" writeTo="AppLogFile" />
      <logger name="Megatec.EngineeringMatrix.ChangeLogger" minlevel="Trace" writeTo="ChangeLogFile" />
      <logger name="Megatec.EngineeringMatrix.DRCLogger" minlevel="Trace" writeTo="DRCLogFile" />
    </rules>
  </nlog> 
```

*显然*我写了一个 BAAD 配置，因为`c:\lo?gs`无法创建目录。

但是，我仍然没有收到消息
`MessageBox.Show(ex.ToString(), @"Failed to load 'Megatec.EngineeringMatrix'`

甚至`AppLogger.Info()`跳过异常...

我没有写任何东西来记录，但应用程序不知道......

在调试中，我可以捕捉到异常，并看到它是由 NLog 处理的，

如何从我的代码中捕获它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-26T21:16:09.017

这是一个老问题，但最近有一些变化。

NLog 过去曾“吃掉”一些异常。例如在`AsyncWrapper`（或使用属性`async`on `<target>`）

这已在 NLog 4.3 中修复：

> 异常的一致处理（行为变化） 异常的记录和抛出以前是不一致的。并非所有这些都记录到内部记录器中，有时它们会丢失。例如，异步包装器（或异步属性）在没有适当重新抛出的情况下捕获所有异常。
> 
> 这很糟糕，因为有时不清楚为什么 NLog 不起作用（我自己多次得到它）。这已在 NLog 4.3 中修复！
> 
> 所有异常都记录到内部记录器中。“throwExceptions”选项在所有情况下都将受到尊重建议：在生产环境中禁用 throwExceptions！（这是默认值）

见[http://nlog-project.org/2016/04/16/nlog-4-3-has-been-released.html](http://nlog-project.org/2016/04/16/nlog-4-3-has-been-released.html)

# c# - 访问 ListViewItem 模板中的子控件

> ID：12497810
> 
> 赞同：0
> 
> 时间：2012-09-19T15:22:44.497
> 
> 标签：c#, xaml, windows-8

我一直在玩 Windows 8 代码示例 - 即 BlogReader 应用程序。如果您对此不熟悉，它由一个包含两列的网格组成。左边是一个带有提要项目标题的 ListView。单击时，它会在右列中使用提要条目填充 WebView。

而不是显示在右侧，我想将 WebView 直接嵌入相关列表项的下方，就像 Google Reader 所做的那样（基本上是手风琴视图）。这就是我想出的。

```
 <ListView x:Name="ItemListView"  
            ItemsSource="{Binding Items}"
            Margin="60,0,0,10"
            SelectionChanged="ItemListView_SelectionChanged">

            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Title}"  
                       FontSize="24" Margin="5,0,0,0" TextWrapping="Wrap" />
                        <TextBlock Text="{Binding Author}" 
                       FontSize="16" Margin="15,0,0,0"/>
                        <TextBlock Text="{Binding Path=PubDate, Converter={StaticResource dateConverter}}" 
                       FontSize="16" Margin="15,0,0,0"/>
                        <WebView Margin="0,5,20,20"/>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>

        </ListView> 
```

如何访问 ListItem 中的 WebView？我知道渲染后我无法访问模板，但必须有办法在 ListItem 中访问该 WebView？或者它只是从未创建过？

我尝试了很多不同的方法来访问 listView 的选定项目，然后寻找没有成功的孩子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:16:12.883

与其插入 webview，不如简单地将 的 设置为`Visibility`，`Webview`直到`Collapsed`您准备好使用它。在您绑定的每个项目`ListView`上，都有两个属性：一个是 webview 的内容，另一个是绑定到 webview 的可见性。这样，您可以通过更改 content 属性的值来设置 webview 的内容，然后只需将其可见性更改为`Visible`.

像这样的东西：

```
public class Item
{
    Uri content;
    public Uri Content
    {
        get
        {
            return content;
        }
    }
    public Visibility Visible
    {
        get
        {
            if(content != null)
                return Visibility.Visible;
        }
    }
}

<WebView Content="{Binding Content}" Visibility="{Binding Visible}" Margin="0,5,20,20"/> 
```

# jquery-ui - TypeError: $("#datepicker").datepicker 不是函数

> ID：12497811
> 
> 赞同：9
> 
> 时间：2012-09-19T15:22:45.003
> 
> 标签：jquery-ui

我已经阅读了有关此的其他问题，我知道这与页面上未加载的日期选择器有关。但是我想知道如何确定 JQuery 加载了哪些函数。

我使用的代码非常基本，所以我不确定为什么无论如何都会失败：

```
 <script type='text/JavaScript' src='jquery.js'></script>
    <script type='text/JavaScript' src='jquery.ui.core.js'></script>
    <script type='text/JavaScript' src='jquery.ui.widget.js'></script>
    <script type='text/JavaScript' src='jquery.ui.datepicker.js'></script>
    <script src='jquery.validate.js' type='text/javascript'></script>
    <link href='jquery_ui_base\jquery.ui.all.css' rel='stylesheet' type='text/css'>

    <script type='text/javascript'>
           jQuery(function() {
              calender();
              });

        function calender(){
          $( '#datepicker' ).datepicker()
            }
    </script> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T15:26:59.627

这通常发生在未加载 jquery 核心和/或 datepicker js 时。检查它是否正在加载（200 响应）。确保您具有正确的路径和正确的读取权限。

另外，确保 jquery 核心在 datepicker 之前加载，并且 datepicker 在 $( '#datepicker' ).datepicker() 之前加载。

此外，您可以尝试上传新版本的 datepicker。

# c# - 在 MVC4 中删除项目后添加成功消息

> ID：12497813
> 
> 赞同：1
> 
> 时间：2012-09-19T15:22:47.123
> 
> 标签：c#, asp.net-mvc, asp.net-ajax

我在屏幕上显示了一个删除超链接：

**用户部分视图：**

```
<%: Ajax.ActionLink("Delete", "Delete", new { id = item.UserID }, new AjaxOptions { HttpMethod = "GET", UpdateTargetId = "tabs-users", InsertionMode = InsertionMode.Replace }, htmlAttributes: new { data_target = "#tabs-users" })%> 
```

这在我的控制器中调用了一个方法

**控制器**

```
 [HttpGet]
    public PartialViewResult Delete(int id)
    {
        userManager.DeleteUser(id);
        ViewBag.Status = string.Format("User deleted ok, id: {0}", id);
        return PartialView("UsersPartial", userManager.GetUsers());
    } 
```

在上面的代码中，我返回了一个 PartialView，这是可行的。我还想在这个视图的顶部显示一条消息，上面在 ViewBag.Status 中定义，但我只希望它在执行此操作后显示此 div。

另请注意，我要返回的视图是强类型的：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<LMS.Data.User>>" %> 
```

最后，我要显示的状态消息是一个 div，它是我在另一个局部视图中创建的，因此我可以在整个站点中显示它。

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>

<div id="status" class="statusok">
<%: ViewBag.Status %>
</div> 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:45:41.817

`ViewBag.Status`在您为其分配值之前将为空，因此您可以在视图中对其进行检查然后显示它：

```
@if(ViewBag.Status != null)
{
    <div id="status" class="statusok">
       @ViewBag.Status
    </div>
} 
```

在返回相同视图的后续调用中，如果您不再希望它显示，只需设置`ViewBag.Status`为。`null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:45:11.193

您不能从控制器操作返回 2 个不同的局部视图。您可能使用的一种方法是[将第一个部分呈现为字符串](https://stackoverflow.com/questions/4344533/asp-net-mvc-razor-how-to-render-a-razor-partial-views-html-inside-the-controll)，然后让您的控制器操作返回具有 2 个属性的 JSON 结果 - 一个包含 HTML 部分，另一个包含要显示的消息：

```
[HttpDelete]
public PartialViewResult Delete(int id)
{
    userManager.DeleteUser(id);
    return Json(new 
    {
        Partial = RenderPartialViewToString("UsersPartial", userManager.GetUsers()),
        StatusMessage = string.Format("User deleted ok, id: {0}", id)
    });
} 
```

接着：

```
<%= Ajax.ActionLink(
    "Delete", 
    "Delete", 
    new { 
        id = item.UserID 
    }, 
    new AjaxOptions { 
        HttpMethod = "DELETE", 
        OnSuccess = "onDelete"
    }, 
    htmlAttributes: new { data_target = "#tabs-users" }
) %> 
```

然后编写`onDelete`回调：

```
function onDelete(result) {
    $('#tabs-users').html(result.Partial);

    // TODO: instead of alerting display the message wherever you want
    // and using whatever plugin you want to make it look pretty
    alert(result.StatusMessage);
} 
```

您还会注意到，我为此任务使用了正确的 HTTP 动词 - DELETE。切勿使用 GET 动词来调用正在修改服务器上的状态的控制器操作（例如删除实体）。

# arrays - 在 Perl 中查找哈希数组的大小

> ID：12497815
> 
> 赞同：1
> 
> 时间：2012-09-19T15:22:54.200
> 
> 标签：arrays, perl, hash

您如何获得以下哈希数组的大小？

我以为这会做到这一点，但它没有工作......

```
print Dumper scalar $item->{'detail'};
$VAR1 = [
    { 'content' => undef, 'name' => 'entree',  'url_name' => 'entree' },
    { 'content' => undef, 'name' => 'dessert', 'url_name' => 'desert' },
    { 'content' => undef, 'name' => 'drink',   'url_name' => 'drink'  }
]; 
```

或者如何`url_name`在不知道大小的情况下打印哈希数组中的所有（主菜、甜点、饮料）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T15:25:42.863

你有一个数组引用。要获取引用数组的大小，首先取消引用引用：

```
print scalar @{$item->{'detail'}}; 
```

并列出 URL：

```
my $v = [
      { 'content' => undef, 'name' => 'entree', 'url_name' => 'entree' },
      { 'content' => undef, 'name' => 'dessert', 'url_name' => 'desert' },
      { 'content' => undef, 'name' => 'drink', 'url_name' => 'drink' }
];   # or $v = $item->{'detail'};

foreach my $h (@$v) {
  print $h->{url_name}, "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:49:20.743

我不确定为什么您认为需要数组大小才能打印 url_name 值。尽管如此，这就是它的工作原理。

```
use strict;
use warnings;
use Data::Dumper;

my $v = [   # note that this is a scalar value
    { 'content' => undef, 'name' => 'entree', 'url_name' => 'entree' },
    { 'content' => undef, 'name' => 'dessert', 'url_name' => 'desert' }, 
    { 'content' => undef, 'name' => 'drink', 'url_name' => 'drink' } 
];  
my $item = { detail => $v };        # recreate your structure $item->{detail}
my $size = @$v;                     # this is how its done with $v
my $size2 = @{ $item->{detail} };   # and with your original structure
my @x = map $_->{url_name}, @$v;    # extract url_name values
print Dumper \@x; 
```

如您所见，`$item->{detail}`和`$v`是相同的。当您直接将此标量值（通过`scalar`函数，在这种情况下不执行任何操作）提供给 Dumper 时，您会得到`$v`上面看到的打印值。所做`scalar`的只是更改使用的上下文`print`并强制执行标量上下文而不是列表上下文。我们可以通过使用标量赋值（`$size`和`$size2`）来做同样的事情。

使用原始结构时，您需要使用`@{ }`括号来为 perl 阐明其中的内容是数组 ref。

`map`如您所见，使用语句很容易提取值。它充当一个循环，遍历`@$v`(or `@{ $item->{detail} }`) 中的所有值，为每个值返回 statement `$_->{url_name}`。

# mongoskin - Mongoskin findAndModify ID 对象id

> ID：12497821
> 
> 赞同：4
> 
> 时间：2012-09-19T15:23:05.347
> 
> 标签：mongoskin

使用nodejs，mongoskin ..我想返回更新的文档，所以我使用findAndModify，但是查询{_id：“someid”}不起作用。我想我需要使用 {id: ObjectID{'someid'} 作为查询。如何将 ObjectId 类型导入 JS？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-13T03:37:59.890

尝试这个：

```
ObjectID = require('mongoskin').ObjectID

{_id: new ObjectID("someid")} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T23:57:22.907

这是一个解决方案

```
var mongo = require("mongoskin");
var conn = mongo.db(YOUR_DETAILS);
var BSON = mongo.BSONPure; 
```

这使您能够转换您的 id int、string 或任何使用：

```
conn.collection(YOUR_COLLECTION).find({_id:new BSON.ObjectID(YOUR_ID)}) 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-14T06:26:49.253

您可以执行以下操作：

```
yourCollection = db.collections('yourCollection'); 
```

然后

```
{ _id: yourCollection.id("someId") } 
```

# c# - 更好的算法来淡化winform

> ID：12497826
> 
> 赞同：8
> 
> 时间：2012-09-19T15:23:13.803
> 
> 标签：c#, winforms, fading

在搜索淡化 winform 的代码时，我在 MSDN 论坛上看到了这个[页面。](http://social.msdn.microsoft.com/forums/en-us/winformsdesigner/thread/B5FE06B9-04E0-499E-93AC-A31B6A87E546)

```
for (double i = 0; i < 1; i+=0.01)
{
    this.Opacity = i;
    Application.DoEvents();
    System.Threading.Thread.Sleep(0);
} 
```

`for`循环有一个非整数增量，根据我之前提出的问题，这不是一种好的编程技术（由于大多数小数的不精确表示）。

我想出了这个替代方案。

```
for (double i = 0; i < 100; ++i)
{
    this.Opacity = i/100;
    Application.DoEvents();
    System.Threading.Thread.Sleep(0);
} 
```

这些哪个更有效？

如果有更好的淡化表格算法，如果包含它，我会很高兴。

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-07T17:09:41.217

忘记计时器（双关语）。

使用 Visual Studio 4.5 或更高版本，您可以只`await`完成一项延迟的任务。这种方法的一个优点是它是异步的，不像线程`Sleep`或`DoEvents`循环，它会在淡入淡出期间阻塞应用程序（以及其他上述`DoEvents`问题）。

```
private async void FadeIn(Form o, int interval = 80) 
{
    //Object is not fully invisible. Fade it in
    while (o.Opacity < 1.0)
    {
        await Task.Delay(interval);
        o.Opacity += 0.05;
    }
    o.Opacity = 1; //make fully visible       
}

private async void FadeOut(Form o, int interval = 80)
{
    //Object is fully visible. Fade it out
    while (o.Opacity > 0.0)
    {
        await Task.Delay(interval);
        o.Opacity -= 0.05;
    }
    o.Opacity = 0; //make fully invisible       
} 
```

用法：

```
private void button1_Click(object sender, EventArgs e)
{
    FadeOut(this, 100);
} 
```

在对对象应用任何透明度之前，应检查对象是否已处置。我使用了一个表单作为对象，但是你可以传递任何支持透明度的对象，只要它被正确地转换。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-19T16:29:29.087

因此，首先[应该避免 application.DoEvents](https://stackoverflow.com/questions/5181777/use-of-application-doevents) ，除非您真的知道自己在做什么，并且确定这是对它的适当使用，并且您正在正确使用它。我相当肯定，这里的情况都不是。

接下来，你如何控制衰落的速度？您基本上只是让计算机尽可能快地消失，并依靠操作（和后台进程）的固有开销来使其花费更长的时间。这真的不是很好的设计。您最好指定淡入淡出从一开始需要多长时间，以便在机器之间保持一致。您可以使用 a`Timer`以适当的设置间隔执行代码，并确保 UI 线程在淡入淡出期间不被阻塞（不使用`DoEvents`）。

只需修改`duration`以下内容以更改淡入淡出所需的时间，并修改`steps`以确定它的“波涛汹涌”程度。我将其设置为 100，因为这实际上是您的代码之前所做的。实际上，您可能不需要那么多，您可以降低到它开始变得波涛汹涌之前。（步骤越低，它的性能就越好。）

此外，您不应该如此担心此类事情的性能。褪色是需要在大约一秒或不少于一秒的范围内测量的东西（人类能够感知它），而对于如今的任何计算机来说，它都可以做到这一点，远不止于此在一秒钟内，它甚至都不好笑。这将在一秒钟内的计算方面几乎不消耗 CPU，因此尝试优化它肯定是微优化。

```
private void button1_Click(object sender, EventArgs e)
{
    int duration = 1000;//in milliseconds
    int steps = 100; 
    Timer timer = new Timer();
    timer.Interval = duration / steps;

    int currentStep = 0;
    timer.Tick += (arg1, arg2) =>
    {
        Opacity = ((double)currentStep) / steps;
        currentStep++;

        if (currentStep >= steps)
        {
            timer.Stop();
            timer.Dispose();
        }
    };

    timer.Start();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-28T10:04:11.057

[![示例表单淡入](../Images/c46ed4c11373ccd9b96616019267880b.png)](https://i.stack.imgur.com/9kyNK.gif)

**我写了一个专门用于淡入淡出表格的类。它甚至支持`ShowDialog`和DialogResults。**

我已经扩展了它，因为我需要新功能，并且愿意接受建议。你可以看看这里：

[https://gist.github.com/nathan-fiscaletti/3c0514862fe88b5664b10444e1098778](https://gist.github.com/nathan-fiscaletti/3c0514862fe88b5664b10444e1098778)

示例用法

```
private void Form1_Shown(object sender, EventArgs e)
{
    Fader.FadeIn(this, Fader.FadeSpeed.Slower);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T15:30:06.493

```
for (double i = 0; i < 1; i+=0.01)
{
    this.Opacity = i;
    Application.DoEvents();
    System.Threading.Thread.Sleep(0);
} 
```

效率更高，因为浮点除法的数量比浮点加法（不影响 vm-flags）更昂贵。也就是说，您可以将迭代次数减少 1/2（即将步长更改为 i+=0.02）。人脑不会注意到 1% 的不透明度降低，而且成本也会更低，将其加速几乎 100%。

编辑：

```
for(int i = 0; i < 50; i++){
     this.Opacity = i * 0.02;
     Application.DoEvents();
     System.Threading.Thread.Sleep(0);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-11T18:17:07.457

我将 Victor Stoddard 的方法应用于启动画面。我在 Form_Load 事件中使用它来淡入淡出，在 FormClosing 事件中使用它来淡出。 **注意：在调用 fadeIn 方法之前，我必须将表单的不透明度设置为 0。**

在这里，您可以看到 winform（生命周期）引发的事件顺序： [https ://msdn.microsoft.com/en-us/library/86faxx0d(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/86faxx0d(v=vs.110).aspx)

```
private void Splash_Load(object sender, EventArgs e)
{
    this.Opacity = 0.0;
    FadeIn(this, 70);
}

private void Splash_FormClosing(object sender, FormClosingEventArgs e)
{
    FadeOut(this, 30);
}

private async void FadeIn(Form o, int interval = 80)
{
    //Object is not fully invisible. Fade it in
    while (o.Opacity < 1.0)
    {
        await Task.Delay(interval);
        o.Opacity += 0.05;
    }
    o.Opacity = 1; //make fully visible       
}

private async void FadeOut(Form o, int interval = 80)
{
    //Object is fully visible. Fade it out
    while (o.Opacity > 0.0)
    {
        await Task.Delay(interval);
        o.Opacity -= 0.05;
    }
    o.Opacity = 0; //make fully invisible       
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-19T15:52:04.000

过去，我习惯于[`AnimateWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632669%28v=vs.85%29.aspx)淡入/淡出生成的表单，该表单在[`SystemColor.WindowColor`](http://msdn.microsoft.com/en-us/library/system.windows.systemcolors.windowcolor.aspx).

这个巧妙的小技巧提供了在类似向导的界面中隐藏/交换/显示屏幕的效果。我已经有一段时间没有做过这种事情了，但是我在 VB 中使用了 P/Invoke 并在它自己的线程中运行了 API。

我知道您的问题在 C# 中，但大致相同。这是我挖出来的一些可爱的 VB，自 2006 年以来就没有看过！显然，很容易调整它来淡入淡出你自己的表格。

```
<DllImport("user32.dll")> _
Public Shared Function AnimateWindow(ByVal hwnd As IntPtr, ByVal dwTime As Integer, ByVal dwFlags As AnimateStyles) As Boolean
End Function

Public Enum AnimateStyles As Integer
    Slide = 262144
    Activate = 131072
    Blend = 524288
    Hide = 65536
    Center = 16
    HOR_Positive = 1
    HOR_Negative = 2
    VER_Positive = 4
    VER_Negative = 8
End Enum

Private m_CoverUp As Form

Private Sub StartFade()
    m_CoverUp = New Form()
    With m_CoverUp
        .Location = Me.PointToScreen(Me.pnlMain.Location)
        .Size = Me.pnlMain.Size
        .FormBorderStyle = System.Windows.Forms.FormBorderStyle.None
        .BackColor = Drawing.SystemColors.Control
        .Visible = False
        .ShowInTaskbar = False
        .StartPosition = System.Windows.Forms.FormStartPosition.Manual
    End With
    AnimateWindow(m_CoverUp.Handle, 100, AnimateStyles.Blend) 'Blocks
    Invoke(New MethodInvoker(AddressOf ShowPage))
End Sub

Private Sub EndFade()
    AnimateWindow(m_CoverUp.Handle, 100, AnimateStyles.Blend Or AnimateStyles.Hide)
    m_CoverUp.Close()
    m_CoverUp = Nothing
End Sub 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-30T16:53:12.947

[Victor Stoddard](https://stackoverflow.com/users/1090802/victor-stoddard)很接近，但我发现如果它开始快速增加不透明度并在接近完全不透明度 1 时减慢渐变会更令人愉悦。以下是对他的代码的轻微修改：

```
 using System.Threading.Tasks;
    using System.Windows.Forms;

    public partial class EaseInForm : Form
    {
        public EaseInForm()
        {
            InitializeComponent();
            this.Opacity = 0;
        }

        private async void Form_Load(object sender, EventArgs e)
        {
            while (this.Opacity < 1.0)
            {
                var percent = (int)(this.Opacity * 100);
                await Task.Delay(percent);
                this.Opacity += 0.04;
            }
        }
    } 
```

# compiler-construction - 切换C编译器原因：Error Initializer cannot be specified for a flexible array member

> ID：12497827
> 
> 赞同：1
> 
> 时间：2012-09-19T15:23:20.447
> 
> 标签：compiler-construction

我正在尝试将我们的代码从一个 IDE 转换为在另一个 IDE 中使用。当前使用 gcc，它允许从变量数组初始化此结构。新工具不使用 gcc 给我一个错误“无法为灵活数组成员指定初始化程序”。那么有人可以帮助我了解如何设置吗？我应该设置一个可变大小的空白数组，然后在某处分配#define 数组，如下所示？

下面是代码示例……（这是当前实现的当前 IDE）

在一个构建可切换的头文件中，我们可以在不同的硬件平台上构建它，我们有以下#define

```
#define GPIOS  \ 
          /*     BANK, PIN, SPD,  MODE,…  */
      GPIOINIT(   A,   0,   2,   AIN,  …) \
      GPIOINIT(   A,   1,   2,   AIN,  …) \
      GPIOINTINIT(A,   2,   2,   AIN,  …) \
      .
      .
      . 
```

然后在我们拥有的所有构建中使用的不同头文件中

```
 PLATFORM_CONFIG_T g_platformConfig = {
          .name = {PLATFORM_NAME},

          (bunch of other stuff),

         .allGpios = {
                     GPIOS /* here I get the error */
         },
   }; 
```

所以我想我可以让错误行成为一个变量数组，然后以其他方式分配给它？问题是实际阵列“GPIO”的类型不同，不同设计上的引脚顺序也不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:36:45.723

使用聚合初始化灵活的数组成员是 gcc 扩展。好消息是，由于您是`g_platformConfig`静态分配的，因此您不需要该成员是一个灵活的数组：您可以改为使用固定大小的数组。

很可能在您的代码中的某处您有一个常量的定义，该常量表示`GPIOS`数组中有多少项（否则，您需要依赖排序的“哨兵”值，类似于 C 的空终止符字符串，以了解合法`GPIOS`值的结束位置）。如果您已经有该常量，请修改`allGpios`to的定义

```
gpoinit_t allGpios[GPIO_COUNT]; // regular array 
```

代替

```
gpoinit_t allGpios[]; // flexible array 
```

进行此更改后，您的代码应该可以正确编译。

如果您没有`GPIO_COUNT`常量，请考虑添加一个，或引入一个`MAX_GPIO`限制`allGpios`. 无论哪种方式，将数组转换为非灵活数组都将修复错误。

# git - 什么 git 函数允许我批准/拒绝提交将进行的每个更改？

> ID：12497832
> 
> 赞同：4
> 
> 时间：2012-09-19T15:23:46.183
> 
> 标签：git, commit

什么`git`功能允许我批准/拒绝提交将进行的每项更改？

我记得我第一次开始*gitting*时看到了这个，但现在似乎找不到了......

我知道我做过一次，它给出了一个单个字母的列表，每个字母都是一个不同的 aprove/deny/skip 函数。有谁知道我在说什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:03:26.810

您正在描述“git add -p”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:33:26.197

看看“git rebase -i”然后“git rebase --continue”

我相信这就是您正在寻找的。但请记住这项工作在提交级别（不是单行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T01:00:29.483

未经测试，但您可以从 开始`git merge --no-commit`，那么您应该能够使用 、 、 等的组合`git add -p`来`git reset`完成`git checkout`您想要的。不过，我认为没有“简单”或“一个命令”的方式来做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T02:14:18.963

您正在描述“交互模式” `git add -i`。

像[这样](http://gitready.com/intermediate/2009/01/14/interactive-adding.html)的东西：

```
 staged     unstaged path
1:    unchanged        +3/-1 README.md
2:    unchanged        +1/-1 _layouts/default.html

*** Commands ***
1: status   2: update  3: revert  4: add untracked
5: patch    6: diff    7: quit    8: help
What now> 
```

# google-drive-api - 错误：通过桌面或 Web 客户端上传的文件在通过 API 列出时具有隐藏标签

> ID：12497835
> 
> 赞同：1
> 
> 时间：2012-09-19T15:23:55.843
> 
> 标签：google-drive-api, google-docs-api

当通过 Document List v3 REST API 列出时，上传到 Google Drive 的文件有时会错误地具有隐藏标签：

```
<category scheme='http://schemas.google.com/g/2005/labels' term='http://schemas.google.com/g/2005/labels#hidden' label='hidden'/> 
```

如果发生这种情况：

*   通过 Google Drive 桌面客户端创建子文件夹并复制文件，或
*   文件夹通过 Google Drive 网络客户端上传。

该文件夹没有隐藏标签，但上传的文件有。

在以下情况下，文件没有此标签：

*   它们通过 Google Drive 网络客户端*单独*上传到子文件夹，或者
*   它们*通过 REST API*上传到子文件夹，或者
*   它们通过桌面客户端上传到 My Drive*根目录*。

无论文件和文件夹是否具有隐藏标签，它们都会显示在 Google Drive 中。

我们正在使用具有以下范围的 API：

```
https://docs.google.com/feeds/ https://spreadsheets.google.com/feeds/ https://docs.googleusercontent.com/ 
```

我已经验证并且可以使用 OAuth 2.0 Playground 重新创建它。

Win7 32 位上的 Google Drive 桌面客户端版本 1.3.3209.2600

我想这些一定是API中的错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:38:54.260

UI 和 API 之间的隐藏行为是不同的。它仅暗示文件是否列在根目录中。您可能应该忽略此字段。

此外，由于不推荐使用 Documents List API，因此您应该改用 Drive API。

# jquery - 为什么我不能在 $.each 函数中使用 `this` 作为 jQuery 函数的字符串 arg

> ID：12497837
> 
> 赞同：1
> 
> 时间：2012-09-19T15:24:03.157
> 
> 标签：jquery, each

我正在为我正在处理的一些 jQuery 代码而苦苦挣扎，我已经将问题缩小到这个简单的例子，它的行为也不像我期望的那样：

**jsFiddle：http:** [//jsfiddle.net/HypYT/](http://jsfiddle.net/HypYT/)

* * *

**HTML**

```
<div id="a">a: <span>A</span></div>
<div id="b">b: <span>B</span></div>​ 
```

**jQuery**

```
jQuery.each( ["#a", "#b"], function(){
    alert(this);    // alerts "#a" and "#b"
    $(this).hide(); //not working
    $('#b').hide(); //working
});​ 
```

* * *

任何人都知道这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T15:25:36.730

如果在字符串（或其他原语）上调用函数，`this`则成为装箱对象。
`typeof this`会因此回归`"object"`，不会`"string"`。
这打破了 jQuery。（没有双关语）

您可以通过将其强制回字符串原语来解决此问题：

```
$(String(this)).hide() 
```

您可以通过编写为任意原语修复此问题

```
var self = this.constructor(this); 
```

但是，使用传递给的第二个参数`.each()`会更快，因为它首先会避免装箱。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T15:27:08.863

添加到[SLaks](https://stackoverflow.com/a/12497864/297641)答案中，您可以使用传递给`.each`. 见下文，

```
jQuery.each( ["#a", "#b"], function(idx, el){
    alert(this);    // alerts "#a" and "#b"
    $(el).hide(); 
    //$('#b').hide(); 
});​ 
```

或者你可以做

```
var elToHide = $(["#a", "#b"].join()).hide();
$(elToHide.join()).hide() 
```

**演示**：http: [//jsfiddle.net/HypYT/2/](http://jsfiddle.net/HypYT/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:27:25.780

你只需要这样做：

```
$('#a, #b').hide(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T15:31:27.617

每个函数都以这种方式工作（http://api.jquery.com/jQuery.each/）

```
$.each([52, 97], function(index, value) { 
  alert(index + ': ' + value); 
}); 
```

所以在你的情况下

```
jQuery.each( ["#a", "#b"], function(index, value){
    alert(value);    // alerts "#a" and "#b"
    $(value).hide(); //not working
}); 
```

​ 解释是（摘自链接）“该值也可以通过 this 关键字访问，但 Javascript 将始终将 this 值包装为 Object，即使它是简单的字符串或数字值。”

# android - context.getApplicationInfo().name 始终为空

> ID：12497838
> 
> 赞同：0
> 
> 时间：2012-09-19T15:24:11.607
> 
> 标签：android, null, android-context

此行始终返回 null。在这种特殊情况下，上下文是一个活动。任何想法都非常感谢！

**编辑**

```
context.getApplicationContext().getApplicationInfo().name 
```

仍然返回 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T22:36:01.923

查看[从包名称获取应用程序名称](https://stackoverflow.com/questions/5841161/get-application-name-from-package-name)以获得答案。那里评分最高的条目对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:45:06.373

为了读取`android:name`标签中的属性，您必须改为访问`ApplicationInfo.className`字段。因此，

```
context.getApplicationContext().getApplicationInfo().className 
```

将返回您所期望的。

# macos - Mac 中的 PHP Storm 和 Option 键

> ID：12497840
> 
> 赞同：5
> 
> 时间：2012-09-19T15:24:15.087
> 
> 标签：macos, keyboard, keyboard-shortcuts, phpstorm

寻找一种方法来修复选项键不适用于 PHP Storm 和 Mac。我使用类似的东西：

*   Option + 左或右：导航到上一个/下一个单词。
*   Option + Shift + 向左或向右：突出显示上一个/下一个单词。
*   Option + Backspace：删除前一个单词。

猜这是Java的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T16:30:08.807

`Mac OS X`指定的键盘快捷键按照和键盘映射中的描述工作`Mac OS X 10.5+`。键盘映射可以在`Preferences`|中更改 `Keymaps`.

# delphi - Delphi Rtti：如何从 TObjectList 中获取对象

> ID：12497843
> 
> 赞同：3
> 
> 时间：2012-09-19T15:24:15.213
> 
> 标签：delphi, generics, delphi-xe, rtti, tobjectlist

我正在使用自定义类到 xml 转换器，其中一个要求是能够流式传输`TObjectList<T>`字段。
我试图调用该`ToArray()`方法来获取 TObjectlist 的对象，但我得到“无效的类类型转换”，因为类型显然不匹配。

以这个类为例：

```
type
  TSite = class
    Name : String;
    Address : String; 
  end;

  TSites = class
    Sites : TObjecList<TSite>;
  end; 
```

我只需要从站点 TObjectList 中获取站点对象。请记住，我使用的是 RTTI，所以我不知道 TObjectList 中的 ObjectType，**所以 Typecasting 不起作用**。这就是我所拥有的，但它似乎是一个死胡同（Obj 在`TobjectList<TSite>`这里）：

```
function TXmlPersister.ObjectListToXml(Obj : TObject; Indent: String): String;

var
  TypInfo: TRttiType;
  meth: TRttiMethod;
  Arr  : TArray<TObject>;

begin
 Result := '';
 TypInfo := ctx.GetType(Obj.ClassInfo);
 Meth := TypInfo.GetMethod('ToArray');
 if Assigned(Meth) then
  begin
   Arr := Invoke(Obj, []).AsType<TArray<TObject>>; // invalid class typecast error

   if Length(Arr) > 0 then
    begin
     // get objects from array and stream them
     ...
    end;
  end; 
```

通过 RTTI 将对象从 TObjectList 中取出的任何方法对我都有好处。出于某种奇怪的原因，我在 TypInfo 中看不到 GetItem/SetItem 方法

**编辑**

感谢大卫，我有我的解决方案：

```
function TXmlPersister.ObjectListToXml(Obj : TObject; Indent: String): String;

var
  TypInfo: TRttiType;
  meth: TRttiMethod;
  Value: TValue;
  Count : Integer;

begin
 Result := '';
 TypInfo := ctx.GetType(Obj.ClassInfo);
 Meth := TypInfo.GetMethod('ToArray');
 if Assigned(Meth) then
  begin
   Value := Meth.Invoke(Obj, []);
   Assert(Value.IsArray);
   Count :=  Value.GetArrayLength;
   while Count > 0 do
    begin
     Dec(Count);
     Result := Result + ObjectToXml(Value.GetArrayElement(Count).AsObject, Indent);
    end;
  end;
end; 
```

我愿意接受建议，也许有更多“聪明”的方法来实现这个目标......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:59:36.630

您的代码失败，因为动态数组不是 TObject。

你可以这样做：

```
Value := Meth.Invoke(Obj, []);
Assert(Value.IsArray);
SetLength(Arr, Value.GetArrayLength);
for i := 0 to Length(Arr)-1 do
  Arr[i] := Value.GetArrayElement(i).AsObject; 
```

# mongodb - 设置 MongoDB 副本集

> ID：12497844
> 
> 赞同：3
> 
> 时间：2012-09-19T15:24:17.943
> 
> 标签：mongodb, database

我有一台配备 8Gb RAM 的快速 Windows 7 PC。我想为我的开发测试这个 MongoDB 副本集：[http](http://www.mongodb.org/display/DOCS/Replica+Sets) ://www.mongodb.org/display/DOCS/Replica+Sets 。不过我不想买 3 台电脑，因为它有点贵。有没有办法使用某种技术（例如 Hyper-V）来进行设置？如果没有，我应该买多少台电脑？我应该买哪种？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T15:50:20.467

您可以在同一台机器上的不同端口上运行多个 mongod 进程，并指向不同的数据目录，并使它们成为同一个副本集的一部分。

[http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo](http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo)

mongod --dbpath c:/data1 --port 12345 --replSet foo

mongod --dbpath c:/data2 --port 12346 --replSet foo

然后使用 mongo 控制台连接到其中一个 mongod 进程，并使用此处概述的说明添加启动副本集：

[http://www.mongodb.org/display/DOCS/Replica+Sets+-+Basics](http://www.mongodb.org/display/DOCS/Replica+Sets+-+Basics)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-21T07:12:32.010

在 Ubuntu 18.04 上，MongoDb：shell 版本 v4.2.6

**在终端 (1)**中（使用防火墙保护端口，因为我们使用的是 0.0.0.0）

```
sudo systemctl stop mongod
sudo systemctl status mongod
sudo mongod --auth --port 27017 --dbpath /var/lib/mongodb --replSet rs0 --bind_ip 0.0.0.0 
```

然后打开**另一个终端实例（2）**（保持前一个打开）

```
mongo -u yourUserName -p (it will ask for password - follow on)
rs.initiate() 
```

然后打开**另一个终端实例 (3)** 在这里，您将使用您的连接 url 运行 server.js，如下所示：

```
const url = 'mongodb://' + user + ':' + password + 
        '@localhost:27017/?replicaSet=rs0' 

MongoClient.connect(url, { useUnifiedTopology: true, authSource: 'admin' }, 
        function (err, client) {
                if (err) {
                    throw err;
                }
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T20:31:04.167

您可以创建多个 mongod 实例在 diff 上的同一台服务器上运行。港口。

有关配置和副本集的工作方式，请参阅下面的博客。这将根据同一框上的说明设置副本集。

[http://pareshbhav.blogspot.com/2014/12/mongdb-replicaset-and-streaming.html](http://pareshbhav.blogspot.com/2014/12/mongdb-replicaset-and-streaming.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-08T20:06:30.907

一种超级简单[的方法是使用 Docker 设置 MongoDB 副本集](https://www.youtube.com/watch?v=1lAjmJ1ht1o)。

在我们的 Docker 主机中，我们可以创建 Docker 网络，这将为我们提供跨容器的隔离 DNS 解析。然后我们可以开始创建 MongoDB docker 容器。他们最初不会意识到彼此。但是，我们可以通过连接到其中一个容器并运行副本集初始化命令来初始化复制。最后，我们可以将我们的应用程序容器部署在同一个 docker 网络下。

[使用 Docker](http://www.tugberkugurlu.com/archive/setting-up-a-mongodb-replica-set-with-docker-and-connecting-to-it-with-a--net-core-app)帖子查看MongoDB 副本集，了解如何使其工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-21T12:07:25.583

我们将为 MongoDB 副本集配置 3 个节点。

假设我们有 3 个节点：

*   主机名**Mongodb01**，ip 地址**192.168.1.11**和 MongoDB 安装的端口号为**27017**
*   主机名**Mongodb02**，ip 地址**192.168.1.22**和 MongoDB 安装的端口号为**27017**
*   主机名**Mongodb03**，ip 地址**192.168.1.33**和 MongoDB 安装的端口号为**27017**

在开始使用此配置之前，请确保您已准备好以下几点：

*   MongoDB 服务已在所有 3 个节点中安装并运行
*   所有 3 个节点都通过 IP 地址或主机名相互连接
*   默认端口号 27017 和 28017（或您计划使用的任何其他端口号）未被任何防火墙或防病毒软件阻止

现在，让我们从配置开始

**步骤1：**修改`mongodb.conf`每个节点的文件以包含副本集信息。

```
replSet = myCluster
rest = true 
```

`replSet`是副本集的唯一名称，所有节点的参数值必须相同`replSet`。`rest`是可选的，但用于启用管理网页的休息界面。

**步骤 2：**在所有 3 个节点上重新启动 MongoDB 服务

**第 3 步：**在您计划用作主节点的节点上配置副本集。在我们的例子中，我们将在 Mongodb01 的 mongo shell 中执行以下命令

> ```
> rs.initiate() 
> ```

*启动副本集*

> ```
> rs.add("<hostname or ip-address>:<port-no>") 
> ```

*在副本集中添加辅助节点。*

例如; `rs.add("Mongodb02:27017")`或者`rs.add("192.168.1.22:27017")`

> ```
> rs.addArb("<hostname or ip-address>:<port-no>") 
> ```

*在副本集中添加仲裁节点。*

例如; `rs.addArb("Mongodb03:27017")`或者`rs.add("192.168.1.33:27017")`

> ```
> rs.status() 
> ```

*检查是否所有节点都添加到副本集中。*检查副本中节点的其他方法是在浏览器地址栏中使用以下 URL`http://<hostname or ip-address>:<port>/_replSet`

例如; `http://localhost:27017/_replSet`或`http://Mongodb01:27017/_replSet`或`http://192.168.1.11:27017/_replSet`。

此 URL 仅在您`rest = true`在`mongodb.conf`文件中设置时才可访问

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-08T08:46:23.303

在同一台主机上设置副本是没有用的，因为这与冗余和高可用性的条款相矛盾。如果您的 PC 出现故障或变慢，您的副本集将被破坏或降级。但是可以肯定的是，购买多台 PC 来评估副本集并不划算，因此您可以考虑[MongoDB Replica Set with Master-Slave Replication](https://jelastic.com/blog/mongodb-replica-set-master-slave-failover/)中描述的可能场景。

关于副本集成员的数量，您是对的，最常见的拓扑包括 3 个成员，但我建议您在单独的主机上也添加一个仲裁器。这是一个轻量级的过程，不需要大量资源，但它在维持新 PRIMARY 选举中的法定人数方面起着重要作用，以防一旦 PRIMARY 失败时您获得偶数数量的成员。

# c - 何时将我的项目拆分为多个 C 文件？（大型项目的良好做法）

> ID：12497848
> 
> 赞同：4
> 
> 时间：2012-09-19T15:24:36.693
> 
> 标签：c, project

我现在正在用 C 做一个大项目，我正在做它的特定部分（另一个由其他人完成），我想知道我的项目何时应该被拆分为多个 c 文件，以及编写的最佳实践是什么大型项目，有一个团队（或单独）。我以前的经验是使用标头（有一个标头和一个 .c 用于编写所有函数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:27:59.627

人们会告诉你不同的事情。一般来说：

*   在以下情况下，您应该将文件拆分为较小的文件：
    *   它有很多依赖项
    *   编译时间太长
    *   它知道或做得太多
*   您应该通过以下方式组织您的项目：
    *   哪些部分适用于哪些类型的数据
    *   哪些部分与项目的哪些其他部分协同工作
*   你应该避免的事情：
    *   仅当包含在特定订单中时才有效的标题
    *   拉入项目大块的标头（依赖项太多）
    *   滥用预处理器宏
    *   一个“util.c”或类似的。从个人经验来看，他们往往会失去控制

在 C++（不是 C）中，我倾向于为我编写的每个主要类都有一个 .h 和 .cpp 文件，有时我可能会将一些支持类与其他类密切相关的文件集中在一起，而没有这些类或多或少毫无意义（有趣的是，我有一个中型项目，在同一个文件中包含诸如 Scheduler 和 SchedulerEvent 之类的类，其中 Scheduler 包含 SchedulerEvents 的集合。该项目有大约 180 个文件，并且仍然易于维护）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:32:34.557

根据经验，将类型定义（或密切相关的类型定义）和处理此类类型的函数放入一个模块中。

公共类型和函数进入`.h`-file，私有类型和函数以及所有实现进入`.c`-file。

`.h`没有`.c`-files 的 -files 很少见。

# php - jquery/php 增量搜索使用上一个和下一个按钮遍历结果

> ID：12497852
> 
> 赞同：1
> 
> 时间：2012-09-19T15:24:47.803
> 
> 标签：php, jquery, search, live, loops

我希望在页面的特定部分中进行增量搜索。我目前正在使用“带有 Quicksilver 样式的实时搜索”插件来处理搜索结果：

[http://static.railstips.org/orderedlist/demos/quicksilverjs/](http://static.railstips.org/orderedlist/demos/quicksilverjs/)

如果我在搜索框中键入“the”，结果会更改，其中文本“the”是结果的一部分。现在我想添加选项以循环遍历出现在搜索结果中的单词“the”的所有迭代。我查看了此处的 .prev() 和 .next() 选项：

[http://coding.smashingmagazine.com/2012/05/31/50-jquery-function-demos-for-aspiring-web-developers/](http://coding.smashingmagazine.com/2012/05/31/50-jquery-function-demos-for-aspiring-web-developers/)

但我不确定如何将它实施到上述场景中。

非常感谢任何帮助。

谢谢

# javascript - 在进度条内添加居中的“正在加载...”消息

> ID：12497855
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:25:02.507
> 
> 标签：javascript, html

如何修改下面的代码，以便在进度条在后台运行时在框内添加居中的“正在加载...”消息？IE。当进度条在 DIV 内的后台运行时，它将在框的中心显示 LOADING..."。

```
<!DOCTYPE html>
<html>
<head> 

<script type="text/javascript">  
var prg_width = 200;  
var progress_run_id = null; 

function progress() {  
var node = document.getElementById('progress');  
    var w  = node.style.width.match(/\d+/);

    if (w == prg_width) {  
        clearInterval( progress_run_id ); 
        w = 0;
        alert("done")
    } else { 
        w = parseInt(w) + 5 + 'px';          
    } 
    node.style.width = w; 
}

function runit() { 
    progress_run_id = setInterval(progress, 30); 
} 

</script>  
</head>  
<body>  
        <div style="border: 1px solid #808080; width:200px; height:20px;">  
        <div id="progress" style="height:20px; width:0px; background-color:#DBDBDB;"/>  
        </div>  
        </div>
        <p><a href="javascript:runit()">Start</a></p>
</body>  
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:54:42.543

```
 <div style="border: 1px solid #808080; width:200px; height:20px;">  
    <div id="progress" style="text-align: center; height:20px; width:0px; background-color:#DBDBDB;"/>

    <div style="  position: fixed;   left: 92px ">loading</div>

    </div>  
    </div> 
```

# path - svg 在路径上放置形状

> ID：12497856
> 
> 赞同：3
> 
> 时间：2012-09-19T15:25:03.347
> 
> 标签：path, svg, shape, css-position

我正在用 SVG 创建一个游戏，并且需要沿着名为 a *road*的路径放置方形图块。
路径可以弯曲或以一定角度放置，我想相对于路径旋转方形瓷砖。

我当前的结构如下所示：

```
 <defs>
    <rect id="tile" width="200" height="200" stroke-width="5" stroke="red"/>
</defs>
```

```
<g style="stroke-width=10px; stroke:#23238E;>
   <path id="road1" d="M100 100 L 500 100"/>
   <path id="road2" d="M500 100 L 200 100"/>
</g> 
```

我目前对 SVG 的理解告诉我，我必须通过插值计算图块的位置，但我可以以自动方式相对于路径旋转图块吗？

那么我该如何申请*`<use x="xx" y="yy" orient="`**auto**`" xlink:href="tile"/>`*？

道路是根据以下信息生成的：

```
id = #
vector2D = {
  x1 = #
  y1 = #
  x2 = #
  y2 = #
}
tiles = # // number of tiles in road 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:49:09.207

Raphael [http://raphaeljs.com](http://raphaeljs.com)提供了路径在任何点的角度`path.getPointAtLenght(x)`。SVG 有一个本地实现，但它不提供角度。您可以查看 Raphael 的消息来源以了解发生了什么。这是相关的位：

```
getLengthFactory = function (istotal, subpath) {
        return function (path, length, onlystart) {
            path = path2curve(path);
            var x, y, p, l, sp = "", subpaths = {}, point,
                len = 0;
            for (var i = 0, ii = path.length; i < ii; i++) {
                p = path[i];
                if (p[0] == "M") {
                    x = +p[1];
                    y = +p[2];
                } else {
                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);
                    if (len + l > length) {
                        if (subpath && !subpaths.start) {
                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);
                            sp += ["C" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];
                            if (onlystart) {return sp;}
                            subpaths.start = sp;
                            sp = ["M" + point.x, point.y + "C" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();
                            len += l;
                            x = +p[5];
                            y = +p[6];
                            continue;
                        }
                        if (!istotal && !subpath) {
                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);
                            return {x: point.x, y: point.y, alpha: point.alpha};
                        }
                    }
                    len += l;
                    x = +p[5];
                    y = +p[6];
                }
                sp += p.shift() + p;
            }
            subpaths.end = sp;
            point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);
            point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});
            return point;
        }; 
```

其中 point.alpha 是旋转角度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:53:24.987

听起来您应该考虑使用瓷砖标记，然后分割路径，以便您拥有希望矩形显示为标记中点的顶点。您可以使用标记免费获得方向。

# java - 尝试在 Spring WebFlow 项目的服务级别上运行 junit 测试。假设$AssumptionViolatedException

> ID：12497857
> 
> 赞同：3
> 
> 时间：2012-09-19T15:25:05.103
> 
> 标签：java, spring, spring-mvc, junit, spring-webflow

我正在尝试使用 junit 在 Eclipse 中的 Spring Web Flow 项目上运行我的第一个测试，也从控制台使用 mvn test 运行我的第一个测试，但给了我同样的错误。

java.lang.NoClassDefFoundError: org/junit/Assume$AssumptionViolatedException

这是我的java代码：

```
package org.uftwf.memberinquiry.text;

import junit.framework.Assert;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.uftwf.memberinquiry.model.MemberInquiryInformation;
import org.uftwf.memberinquiry.model.MemberRequest;
import org.uftwf.memberinquiry.service.MemberInquiryService;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:root-config.xml")
public class TestApp {

    @Autowired
    private MemberInquiryService service;

    @Test
    public void testgetMemeberRequestInformation() {

        MemberRequest inMemberRequest = new MemberRequest();

        MemberInquiryInformation testInfo = service.getMemeberRequestInformation(inMemberRequest);

        inMemberRequest.setRequestor("cpilling04@aol.com.dev");

        Assert.assertEquals(testInfo.getFirst_Name(), "Christine");
        Assert.assertEquals(testInfo.getLast_Name(), "Pillings");
    }

} 
```

这是我的 pox.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.uftwf.memberinquiry</groupId>
    <artifactId>MemberInquiry</artifactId>
    <name>Member Inquiry</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>

    <developers>
        <developer>
            <id>jsmith</id>
            <name>Johnathan Smith</name>
            <email>johnatham.smith@uftwf.org</email>
            <roles>
                <role>Architect</role>
            </roles>
            <organization>uftwf.org</organization>
            <timezone>-5</timezone>
        </developer>
    </developers>

    <properties>
        <java-version>1.5</java-version>
        <springframework-version>3.1.2.RELEASE</springframework-version>
        <springwebflow-version>2.3.1.BUILD-SNAPSHOT</springwebflow-version>
        <springsecurity-version>3.1.2.RELEASE</springsecurity-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
        <hibernate.version>4.1.1.Final</hibernate.version>
    </properties>

    <dependencies>
        <!-- Spring -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springframework-version}</version>
            <!-- will come with all needed Spring dependencies such as spring-core 
                and spring-beans -->
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-faces</artifactId>
            <version>${springwebflow-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas-client</artifactId>
            <version>3.0.7.RELEASE</version>
            <exclusions>
                <exclusion>
                    <artifactId>cas-client-core</artifactId>
                    <groupId>org.jasig.cas</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Logging -->

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-ext</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>

        </dependency>
        <!-- JSF-303 Dependency Injection -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Sun Mojarra JSF 2 runtime -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <!-- JSR 303 validation -->
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <!-- ********************************************************************** 
            ** HIBERNATE DEPENDENCIES ** ********************************************************************** -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>
        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <repositories>
        <!-- For testing against latest Spring snapshots -->
        <repository>
            <id>org.springframework.maven.snapshot</id>
            <name>Spring Maven Snapshot Repository</name>
            <url>http://maven.springframework.org/snapshot</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
        <!-- For developing against latest Spring milestones -->
        <repository>
            <id>org.springframework.maven.milestone</id>
            <name>Spring Maven Milestone Repository</name>
            <url>http://maven.springframework.org/milestone</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For Hibernate Validator -->
        <repository>
            <id>org.jboss.repository.releases</id>
            <name>JBoss Maven Release Repository</name>
            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For Sun Mojarra JSF 2 implementation -->
        <repository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2/</url>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <!-- For PrimeFaces JSF component library -->

    </repositories>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>tomcat-maven-plugin</artifactId>
                <configuration>
                    <mode>both</mode>
                </configuration>
            </plugin>
        </plugins>

        <finalName>MemberInquiry</finalName>
    </build>
</project> 
```

最好的部分是我的错误：

```
java.lang.NoClassDefFoundError: org/junit/Assume$AssumptionViolatedException
    at org.springframework.test.context.junit4.SpringMethodRoadie.runTestMethod(SpringMethodRoadie.java:281)
    at org.springframework.test.context.junit4.SpringMethodRoadie$2.run(SpringMethodRoadie.java:207)
    at org.springframework.test.context.junit4.SpringMethodRoadie.runBeforesThenTestThenAfters(SpringMethodRoadie.java:254)
    at org.springframework.test.context.junit4.SpringMethodRoadie.runWithRepetitions(SpringMethodRoadie.java:234)
    at org.springframework.test.context.junit4.SpringMethodRoadie.runTest(SpringMethodRoadie.java:204)
    at org.springframework.test.context.junit4.SpringMethodRoadie.run(SpringMethodRoadie.java:146)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:151)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:54)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:52)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: org.junit.Assume$AssumptionViolatedException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 18 more 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T17:34:47.730

这是在黑暗中拍摄的——但我在春天的论坛上找到[了这个。](http://forum.springsource.org/showthread.php?60230-spring-test-breaks-in-Junit-4-5)它与您的配置一致 - 您使用的是 Spring-test v2.5 和 Junit 4.7，看起来 spring-test v2.5 可能只支持 Junit v4.4。

尝试降级到 JUnit 4.4 或升级到 spring-test v2.5.6，看看问题是否消失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-19T14:57:15.790

我必须保留 Spring v2.5，降级到 JUnit 4.4 可以解决问题。

此外，您会看到 Assume$AssumptionViolatedException 隐藏的原始原因；）

仅供参考，迁移到最新的 spring-test 2.5.6 不会改变任何东西。

链接 SO：[Junit4 + Spring 2.5：断言抛出“NoClassDefFoundError”](https://stackoverflow.com/questions/693115/junit4-spring-2-5-asserts-throw-noclassdeffounderror)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T17:38:54.247

我不得不将我的 spring-test 和 junit 版本都升级到最新版本，并且一切正常！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-25T01:43:05.947

我发现 spring-test 2.5.x 期望 org.junit.Assume 包含 AssumptionViolatedException，但在 junit 4.10 中它已被移至 org.junit.internal 包。测试将停止运行（不会失败）并出现 ClassNotFoundException。

我的解决方法是添加我自己的基于 4.10 的 JUnit Assume 副本并添加 AssumptionViolatedException（来自内部）。必须将此本地副本添加到类路径中，首先是您的 IDE 和构建工具。

```
public class Assume {

    /*
     * Ported this from JUnit 4.4 to satisfy spring-test
     */
    public static class AssumptionViolatedException extends org.junit.internal.AssumptionViolatedException {
        private static final long serialVersionUID = 1L;

        public AssumptionViolatedException(Object value, Matcher<?> matcher) {
            super(value, matcher);
        }
    }
    // rest of Assume from JUint 4.10 ....
} 
```

缺点是这个类显然会很快过时，代码的未来用户可能不知道它的存在；这是等待发生的未来失败。

此外，它可能不会先加载。为了缓解这种情况，我添加了检查 Assume 是否首先加载的测试，如果没有则发出警告：

```
import java.net.URL;

public class JUnitSpringTestAssumeOverrideCompatibilityChecker {
    public static void checkAssumeOverridden() {
        URL url = Thread.currentThread().getContextClassLoader().getResource("org/junit/Assume.class");

        if (!"file".equals(url.getProtocol())) {
            throw new RuntimeException("Expect local override (1st on classpath) of JUnit 4.10 Assume for spring-test 2.5 compatibility");
        }
    }
} 
```

# javascript - 为什么 JS 中的一些函数有一个 prototype.constructor 属性而其他的没有？这些功能有什么区别？

> ID：12497859
> 
> 赞同：3
> 
> 时间：2012-09-19T15:25:14.640
> 
> 标签：javascript, prototype, prototypal-inheritance, function-constructor

JS 中的每个函数构造函数都有一个`prototype.constructor`属性。它存储了函数的定义：

```
function Rabbit(value) {
    this.jumps: value;
}
alert(Rabbit.prototype.constructor);  // alerts exactly the definition of the Rabbit function 
```

`this`现在我检查一个简单的函数，而不是函数构造函数，它在体内没有任何内容：

```
function bar(val) {
    alert(val);
}
alert(bar.prototype.constructor);   // behavior is absolutely the same: it alerts the definition of bar 
```

现在我检查内置`Array()`函数：

```
alert(Array.prototype.constructor);  // in Chrome it alerts "function Array() { [native code] }" 
```

现在我想检查一个内置对象的一些内置函数：

```
// The error is thrown in console: TypeError: Cannot read property 'constructor' of undefined 

alert(Array.prototype.sort.prototype.constructor); 
```

`sort`没有`prototype`。它在哪里？它的构造函数在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:28:45.630

如果您自己添加该方法，它会返回您所期望的：

```
 Array.prototype.remove= function(){
        var what, a= arguments, L= a.length, ax;
        while(L && this.length){
            what= a[--L];
            while((ax= this.indexOf(what))!= -1) this.splice(ax, 1);
        }
        return this;
    }

alert(Array.prototype.remove.prototype.constructor); 
```

不可枚举的方法不会暴露它们的代码

# iphone - 覆盖 UILabel

> ID：12497860
> 
> 赞同：2
> 
> 时间：2012-09-19T15:25:15.620
> 
> 标签：iphone, objective-c, ipad, overriding, uilabel

我必须在 UILabel 中显示货币和价格。在一个标签中，但使用不同的字体大小。现在看起来像这样：

![在此处输入图像描述](../Images/c385600fcff35e3495e0919907784fbd.png)

...我做到了覆盖 drawTextInRect: 像这样：

```
- (void)drawTextInRect:(CGRect)rect{

    CGSize textSize = [self.text sizeWithFont:self.font];
    textSize.width -= textSize.width/12;
    CGRect analogRect = CGRectMake(0, 0, textSize.width, self.frame.size.height);
    CGPoint centrino = self.center;

    self.frame = analogRect;
    self.center = centrino;

    NSString *currency = [self.text substringWithRange:NSMakeRange(0, 3)];
    NSString *amount = [self.text substringWithRange:NSMakeRange(3, self.text.length - 3)];

    self.text = currency;
    self.textAlignment = UITextAlignmentLeft;
    self.font = [UIFont fontWithName:@"Helvetica-Bold" size:30.];
    self.baselineAdjustment = UIBaselineAdjustmentAlignBaselines;
    [super drawTextInRect:analogRect];

    self.text = amount;
    self.textAlignment = UITextAlignmentRight;
    self.font = [UIFont fontWithName:@"Helvetica-Bold" size:40.];
    [super drawTextInRect:analogRect];    
} 
```

不错，不是吗？

但我需要在底部调整货币和价格，如下所示：

![在此处输入图像描述](../Images/d936ca319b7133f5f592e02923ee132b.png)

如您所见，我需要强制“EUR”降低，因为它的尺寸更小并且居中，因此看起来更高。

请提出一种方法来做到这一点。

提前致谢！

## 笔记：

使用 2 个不同的标签对我不利。我必须在一个标签中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:43:08.253

两个想法：1）由于您是 UILabel 的子类，因此您可以在子类的实现中为货币类型添加第二个标签，并且您的视图仍然会认为只有一个标签。2) 由于今天在 iOS 6 上取消了 NDA，我建议查看属性字符串。哦，还有 +1 写“a UILabel”而不是“一个 UILabel”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:15:53.567

Ok, guys, thanks to everybody for your fast answers, but I have no time for researches, so I have found a newbie solution.

I feel shame but here is it:

```
- (void)setCurrencyAndPrice{

//set the labels' texts
    [label_currency setText:@"EUR"];
    [label_amount setText:@"12.34"];

//set the sizes to fit the content
    [label_currency sizeToFit];
    [label_amount sizeToFit];

//read the new frame of the labels
    CGRect curRect = label_currency.frame;
    CGRect amoRect = label_amount.frame;

//adjust the position of the price to the top-right
    [label_amount setFrame:CGRectMake(320 - amoRect.size.width - 10, 0, amoRect.size.width, amoRect.size.height)];

//read again the price frame
    amoRect = label_amount.frame;

//stick the currency to the price, spacing 10 pixels
    [label_currency setFrame:CGRectMake(amoRect.origin.x - curRect.size.width - 10, 11, curRect.size.width, curRect.size.height)];

} 
```

As you can see, nothing to override, just using 2 different labels - exactly what I did NOT want to do, but the time runs faster that I am coding.

Cheers!

P.S.: Although I have found the solution for myself, I like @MichaelMangold' idea, so I accept his answer.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T10:21:03.673

您可以使用一个带有多种文本字体样式和颜色的标签，而不是使用两个 UILabel。这是一个示例，可能对您有所帮助：

```
UILabel *customLbl = [[UILabel alloc] initWithFrame:CGRectMake(50, 100, 200, 25)];
customLbl.backgroundColor = [UIColor yellowColor];
[self createTwoTextStyleInSingleUILabel:customLbl];// custom method calling
[self.view addSubview:customLbl]; 
```

自定义方法如下：在应用此方法之前，在您的项目中添加 QuartzCore 框架（CALayers 需要）和 CoreText 框架（属性字符串需要。）。

```
 #import <QuartzCore/QuartzCore.h>
  #import <CoreText/CoreText.h>  

- (void)createTwoTextStyleInSingleUILabel: (UILabel *) myLabel{
NSString *firstText = NSLocalizedString(@"First text:", nil);
NSString *secondText = [NSString stringWithFormat:@"%@ %@",firstText,@"Second text"];
CATextLayer *myLabelTextLayer;
/* Create the text layer on demand */
if (!myLabelTextLayer) {
    myLabelTextLayer = [[CATextLayer alloc] init];
    myLabelTextLayer.backgroundColor = [UIColor clearColor].CGColor;
    myLabelTextLayer.wrapped = NO;
    CALayer *layer = myLabel.layer; //assign layer to your UILabel
    myLabelTextLayer.frame = CGRectMake((layer.bounds.size.width-180)/2 + 10, (layer.bounds.size.height-30)/2 + 10, 180, 30);
    myLabelTextLayer.contentsScale = [[UIScreen mainScreen] scale];
    myLabelTextLayer.alignmentMode = kCAAlignmentCenter;
    [layer addSublayer:myLabelTextLayer];
}
/* Create the attributes (for the attributed string) */
// customizing first string
CGFloat fontSize = 16;
UIFont *boldFont = [UIFont boldSystemFontOfSize:fontSize];
CTFontRef ctBoldFont = CTFontCreateWithName((__bridge CFStringRef)boldFont.fontName, boldFont.pointSize, NULL);
CGColorRef cgColor = [UIColor redColor].CGColor;
NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                            (__bridge id)ctBoldFont, (id)kCTFontAttributeName,
                            cgColor, (id)kCTForegroundColorAttributeName, nil];
CFRelease(ctBoldFont);
 // customizing second string
UIFont *font = [UIFont systemFontOfSize:16];
CTFontRef ctFont = CTFontCreateWithName((__bridge CFStringRef)font.fontName, font.pointSize, NULL);
CGColorRef cgSubColor = [UIColor blackColor].CGColor;
NSDictionary *subAttributes = [NSDictionary dictionaryWithObjectsAndKeys:(__bridge id)ctFont, (id)kCTFontAttributeName,cgSubColor, (id)kCTForegroundColorAttributeName, nil];
CFRelease(ctFont);
/* Create the attributed string (text + attributes) */
NSMutableAttributedString *attrStr = [[NSMutableAttributedString alloc] initWithString:secondText attributes:attributes];
float lengthOfSecondString = 12.0; // length of second string including blank space inbetween text, space in front , space after text.. Be careful, your  app may crash here if length is beyond the second text length (lengthOfSecondString = text length + blank spaces)
[attrStr addAttributes:subAttributes range:NSMakeRange(firstText.length, lengthOfSecondString)];
// you can add another subattribute in the similar way as above , if you want change the third textstring style
/* Set the attributes string in the text layer :) */
myLabelTextLayer.string = attrStr;
myLabelTextLayer.opacity = 1.0; //to remove blurr effect

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:47:06.207

我会构建一个名为 ValueUnitsLabel 的 UIView 子类。给它两个标签，让它控制框架、字体大小等。它也可以聪明地阅读 NSLocale。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:43:06.500

该库将为您工作[https://github.com/AliSoftware/OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)

# javascript - 我可以在 ALTER 查询中使用问号吗？

> ID：12497861
> 
> 赞同：1
> 
> 时间：2012-09-19T15:25:18.840
> 
> 标签：javascript, sql, html, web-sql, alter

我尝试创建一个表，然后在其中添加一堆新列。它是由Javascript实现的（我认为使用的数据库是websql中的SQLite）：

```
var FFFNames = ["DEFAULTY", "LAGACY", "MATADATA"];

db.transaction(function (tx){
    tx.executeSql('CREATE TABLE IF NOT EXISTS ProjSetsT (ProjId unique)');
});

for (var i = 0; i < FFFNames.length; i++){
    db.transaction(function (tx){
        tx.executeSql('ALTER TABLE ProjSetsT ADD ? TINYINT(1)', FFFNames[i]);
    });
} 
```

那么它没有工作。表已创建，但未添加任何列。ALTER 中是否允许使用问号，还是有其他问题？

**[9 月 20 日更新]**：我尝试了不同的语法，例如“ALTER TABLE tablename ADD COLUMN ? datatype”，但它仍然不起作用。

我也试过这样的代码：

```
db.transaction(function (tx){
    tx.executeSql('ALTER TABLE ProjSetsT ADD COLUMN ? TINYINT(1)', "TEST");
}); 
```

没有警告，但只是不起作用。

我也试过：

```
var AAA = "TEST";
db.transaction(function (tx){
    tx.executeSql('ALTER TABLE ProjSetsT ADD COLUMN ? TINYINT(1)', AAA);
}); 
```

这次我得到了错误：

> *未捕获的错误：TYPE_MISMATCH_ERR：DOM 异常 17*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:41:51.010

这是[ALTER TABLE ... 添加列](http://www.sqlite.org/lang_altertable.html)。此外，第二个参数必须是一个数组。

```
for (var i = 0; i < FFFNames.length; i++){
    db.transaction(function (tx){
        tx.executeSql('ALTER TABLE ProjSetsT ADD COLUMN ? TINYINT(1)', [FFFNames[i]]);
    });
} 
```

（更新）：显然，上述查询**将不起作用**，因为每个列名都将被视为`'text'`，从而产生错误。这是您可以为该查询执行的操作：

```
for (var i = 0; i < FFFNames.length; i++){
    db.transaction(function (tx){
        tx.executeSql('ALTER TABLE ProjSetsT ADD COLUMN '+FFFNames[i]+' TINYINT(1)');
    });
} 
```

# java - 对 JAX-WS Web 服务方法的基于角色的授权访问

> ID：12497862
> 
> 赞同：0
> 
> 时间：2012-09-19T15:25:19.737
> 
> 标签：java, jax-ws

我想在我的一个 Web 服务应用程序中添加基于角色的授权功能。它由 JAX-WS 和 Spring 框架提供支持，并包含相当多的 Web 服务方法。某些 Web 服务方法只能由特定角色访问。欣赏是否有人有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:58:39.393

如果您的项目已经基于Spring，请使用[Spring-Security 。](http://static.springsource.org/spring-security/site/)

# mpmovieplayercontroller - MPMoviePlayerController 不能全屏播放电影

> ID：12497863
> 
> 赞同：8
> 
> 时间：2012-09-19T15:25:25.017
> 
> 标签：mpmovieplayercontroller, fullscreen, ios6

我的 iPad 应用程序上有一个 MPMoviePlayerController，当它的框架是常规的（不是全屏）时效果很好。

当我点击全屏按钮时，播放器会全屏播放，但电影会停止。我总是看到标题“正在加载...”，黑色背景，标准控件（返回、播放和下一步）被禁用。

我为播放器声明了一个实例变量：

```
MPMoviePlayerController *player; 
```

在我的实现中：

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:videoUrl];

player.shouldAutoplay = NO;
player.movieSourceType = MPMovieSourceTypeFile;
player.controlStyle = MPMovieControlStyleEmbedded;
player.allowsAirPlay = YES;

player.view.frame = CGRectMake(xPos, yPos, width, height);

[self.view addSubview:player.view];

[player prepareToPlay]; 
```

你有什么主意吗？我正在使用 iOS 6 SDK，我正在 iPad 6.0 模拟器和带有 iOS 6 beta（最新）的真正 iPad2 上测试该应用程序。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-21T16:04:13.287

我的天啊！！！

我写...

```
[player stop]; 
```

在视图中将消失！！！我怎么可以这么傻？！今晚没有蛋糕...

# java - 使用单个 JsonView 过滤应用程序的每个 JAX-RS 资源

> ID：12497866
> 
> 赞同：2
> 
> 时间：2012-09-19T15:25:46.373
> 
> 标签：java, jersey, jax-rs, jackson

Jackson 2.0 允许使用`@JsonView`.

以下示例显示了一种在资源响应中忽略人们年龄的方法。不幸的是，每个 JAX-RS 方法都必须用`@JsonView`.

```
public class View {
  public static class Public {}
  public static class Private {}
}

public class People {
  @JsonView(View.Public) String name;
  @JsonView(View.Private) int age;
}

@Path("/people")
public class PeopleResource {
  @GET
  @JsonView(View.Public)
  public List<People> get() {
    return peoples.get();
  }

  @GET
  @Path("/id")
  @JsonView(View.Public)
  public People get(@PathParam("id") int id) {
    return people.get(id);
  }
} 
```

我发现全局过滤应用程序资源的唯一方法是使用 MixIn。

```
public class PeopleMixIn {
  @JsonIgnore int age;
}

@Provider
public class ObjectMapperProvider implements ContextResolver<ObjectMapper> {
  private ObjectMapper mapper = new ObjectMapper();

  public ObjectMapperProvider() {
    mapper.addMixInAnnotations(People.class, PeopleMixIn.class);
  }

  public ObjectMapper getContext(Class<?> type) { return mapper; }
} 
```

有没有办法用 JsonView 配置杰克逊的 ObjectMapper？或者将过滤器应用于资源/应用程序的每个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:16:10.343

您可以对 Jackson JAX-RS 提供程序进行子类化，这是处理资源注释的一段代码。或者您可以使用`StreamingOutput`手动使用`ObjectWriter`，您可以在其中指定要在每次调用的基础上使用的视图。

在 2.0 中，目标是减少`ObjectMapper`已存在的状态，因为更改该状态不能以线程安全的方式完成，而`ObjectWriter`由于不可变的性质，它是完全线程安全的。但是 JAX-RS 提供者还没有使用`ObjectWriter`/ `ObjectReader`。

[另一个想法：您可以为Jackson JAX-RS 提供者](https://github.com/FasterXML/jackson-jaxrs-json-provider/issues?direction=desc&sort=created&state=open)提交增强请求 (RFE) ，以添加此类功能（“setDefaultView()”？）。这似乎是您用例的最佳解决方案？并且实现应该非常简单，所以这可能会在几周后发布的 2.1.0 版本中发布。

# perl - 如何在 Perl XS 代码中使用伪文件句柄？

> ID：12497870
> 
> 赞同：2
> 
> 时间：2012-09-19T15:25:49.697
> 
> 标签：perl, xs

我正在尝试为能够使用任何提供`write(ctx, buffer, count)`/`read(ctx, buffer, count)`接口的序列化/反序列化库编写 XS 胶水代码。我希望能够使用我得到的伪文件句柄

```
open $reader, '<', \$in;
open $writer, '>', \$out; 
```

所以使用`FILE*`映射似乎不起作用。由于我没有找到任何好的文档，所以我四处寻找并得到了以下 XS 片段：

```
void
write_buf (fh, string);
INPUT:
PerlIO* fh;
SV* string;
CODE:
STRLEN length = SvLEN (string);
char* buf = SvPV (string, length);
PerlIO_write (fh, buf, length); 
```

它似乎做了我想要的，但这是处理 Perl 可能认为 XS 代码中的文件句柄的所有内容的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:33:58.143

你有你需要的。使用的函数`PerlIO*`确实会处理所有作为 Perl 程序的文件句柄出现的东西。

# android - 在列表视图的项目和滚动问题中设置线性布局的可见性

> ID：12497879
> 
> 赞同：2
> 
> 时间：2012-09-19T15:26:18.740
> 
> 标签：android, listview

在我的应用程序中，我有一个列表视图，它的项目由图像、文本和线性布局组成。我想在我的自定义适配器类中实现一个 onClickListener，当单击列表中的项目时，线性布局可见性设置为可见或消失。这是问题所在：当我单击列表中的一个项目并滚动列表时，我看到其他项目的线性布局变得可见。（因为视图回收和一切，我知道）。

我怎样才能解决这个问题，只有点击项目的线性布局才能在滚动后获得我想要的可见性？

我的适配器代码如下，没有任何 onClick 事件：

```
public class myadapter extends ArrayAdapter<lwicon> {

    Context context;
    lwicon[] iteminarow;
    public myadapter(Context context,lwicon[] iteminarow)
    {
        super(context, R.layout.listitem, iteminarow);
        this.context=context;
        this.iteminarow=iteminarow;
    }

    static class ViewHolder
    {
        public ImageView imageview;
        public TextView textview;
        public LinearLayout linearlayout;
    }

    @Override
    public View getView(int position,View convertView,ViewGroup parent)
    {

        ViewHolder holder = null;

        if(convertView==null)
        {

         LayoutInflater LI= (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

         convertView= LI.inflate(R.layout.listitem, parent, false);
         holder = new ViewHolder();
         holder.textview=(TextView)convertView.findViewById(R.id.unitname);
         holder.imageview=(ImageView)convertView.findViewById(R.id.image);
         holder.linearlayout=(LinearLayout)convertView.findViewById(R.id.invisiblablesubitem);

         convertView.setTag(holder);
        }

        else
        {
            holder=(ViewHolder)convertView.getTag();

        }

        holder.imageview.setImageResource(iteminarow[position].icon);
        holder.textview.setText(iteminarow[position].unitname);

        return convertView;
    }
} 
```

列表项布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <ImageView android:id="@+id/image"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_gravity="center_vertical"/>
        <TextView  android:id="@+id/unitname"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center_vertical"/>
    </LinearLayout>
    <LinearLayout
        android:id="@+id/invisiblablesubitem"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:orientation="vertical"
        android:visibility="gone">
        <TextView android:id="@+id/tt"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="HELLO"/>
    </LinearLayout>
</LinearLayout> 
```

**更新**：关于 Rishabh.CreatioSoft 答案，我更新了适配器，但没有得到任何答案，每次单击列表视图中的项目时，应用程序崩溃。请帮助...

```
public class myadapter extends ArrayAdapter<lwicon> {

    Context context;
    lwicon[] iteminarow;
    private LayoutInflater inflater;
    public myadapter(Context context,lwicon[] iteminarow)
    {
        super(context, R.layout.listitem, iteminarow);
        this.context=context;
        this.iteminarow=iteminarow;
         inflater = LayoutInflater.from(context);
    }

    static class ViewHolder
    {
        public ImageView imageview;
        public TextView textview;
        public LinearLayout linearlayout;
    }

    @Override
    public View getView(int position,View convertView,ViewGroup parent)

    {
        lwicon item = (lwicon)this.getItem(position);

        ImageView imageView;
        TextView textView;
        LinearLayout linearLayout;

        if(convertView==null)
        {

         convertView=inflater.inflate(R.layout.listitem, parent,false);
         textView=(TextView)convertView.findViewById(R.id.unitname);
         imageView=(ImageView)convertView.findViewById(R.id.image);
         linearLayout=(LinearLayout)convertView.findViewById(R.id.invisiblablesubitem);

         ViewHolder holder = new ViewHolder();
         holder.imageview=imageView;
         holder.textview=textView;
         holder.linearlayout=linearLayout;
         convertView.setTag(holder);

         convertView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    lwicon item1 = (lwicon)v.getTag();
                    item1.isLLvisible=true;
                }
            });

        }

        else
        {
            ViewHolder holder2=(ViewHolder)convertView.getTag();
            textView=holder2.textview;
            imageView=holder2.imageview;
            linearLayout=holder2.linearlayout;

        }

        linearLayout.setTag(item);

        imageView.setImageResource(item.icon);
        textView.setText(item.unitname);
        if(item.isLLvisible==true)
            linearLayout.setVisibility(View.VISIBLE);

        return convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:37:34.263

感谢 CaseyB 和 Rishabh.CreatioSoft，我想出了如何解决我遇到的问题，因为问题是在滚动列表之后，列表项目的线性布局搞砸了，这是我为 addapter 实现的代码：

```
public class myadapter extends ArrayAdapter<lwicon> {

    Context context;
    public lwicon[] iteminarow;
    public myadapter(Context context,lwicon[] iteminarow)
    {
        super(context, R.layout.listitem, iteminarow);
        this.context=context;
        this.iteminarow=iteminarow;
    }
// the ViewHolder class that saves the row's states, acts as Tag
static class ViewHolder
{
    ImageView img;
    TextView txt;
    LinearLayout line;
    int visibility;
    public ViewHolder(ImageView img,TextView txt,LinearLayout line,int visibility)
    {
        this.img=img;
        this.txt=txt;
        this.line=line;
        this.visibility=visibility;
    }

}

    @Override
    public View getView(int position,View convertView,ViewGroup parent)

    {     // get item from ArrayAdapter and set viarables for the row to be inflated
        lwicon item = (lwicon) this.getItem(position);
        ImageView image;
        TextView text;
        LinearLayout linear;
        int visibility=View.GONE;

        if(convertView==null)
        {
        LayoutInflater LI= (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         convertView=LI.inflate(R.layout.listitem, parent,false);
         text=(TextView)convertView.findViewById(R.id.unitname);
         image=(ImageView)convertView.findViewById(R.id.image);
         linear=(LinearLayout)convertView.findViewById(R.id.invisiblablesubitem);
             //row is inflated, we just tag it with the ViewHolder, we add the inflated
            //ImageView,TextView,LinearLayout and Visibility stat to the tagged ViewHolder
         convertView.setTag(new ViewHolder(image, text, linear,visibility));

        }

        else
        {        //recover the tagged ViewHolder and it's items
            ViewHolder holder = (ViewHolder) convertView.getTag();
            text = holder.txt;
            image= holder.img;
            linear=holder.line;
            visibility=holder.visibility;
        }

        image.setImageResource(item.icon);
        text.setText(item.unitname);
        linear.setVisibility(item.visibility);

        return convertView;
    }
} 
```

和 lwicon 类是：

```
public class lwicon {
public int icon;
public String unitname;
public LinearLayout linearLayout;
public int visibility=View.GONE;
public lwicon(){
}
public lwicon(int imageid,String text)
{
    icon = imageid;
    unitname=text;

}
public void toggleVisibility()
{
    if(this.visibility==View.GONE)
        this.visibility=View.VISIBLE;
    else if(this.visibility==View.VISIBLE)
        this.visibility=View.GONE;
    else this.visibility=View.VISIBLE;
}

} 
```

在设置列表的适配器后，我在 MainAvtivity 类中实现了 OnItemClickListener：

```
lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> adapter, View view, int position,
                    long id) {
                // TODO Auto-generated method stub
             // getting the item that was clicked in ArrayAdapter<lwicon>
                lwicon item=(lwicon)adapter.getAdapter().getItem(position);
                item.toggleVisibility();
             // recovering the tag (that is the viewholder)from convertView 
             //(view parameter here refers to convertView in getView method)
                ViewHolder holder = (ViewHolder)view.getTag();
                holder.line.setVisibility(item.visibility);
            }
        }); 
```

并且我的列表视图具有线性布局子项的项目在滚动后不会忘记它的父视图。

PS：伙计们，关于这个主题的教程很少......我想

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:37:40.800

嗨，您可以使用 Custome Adapter 而不是 BaseAdapter 来解决此问题。您应该使用此链接[教程](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:29:07.870

您需要做的是将隐藏/显示状态存储在`lwicon`项目中，并在重新填充视图时检查`getView()`.

# java - 读取传入电子邮件键值的便捷方式

> ID：12497882
> 
> 赞同：0
> 
> 时间：2012-09-19T15:26:30.693
> 
> 标签：java, jakarta-mail, incoming-mail

这里的要求是读取传入的邮件并从中提取键/值。目前有没有支持这些的框架？

例如，我只是想到了以下传入的电子邮件格式

你好，

```
Name: James
date: 25/09/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:35:54.197

有时你可以使用`java.util.Properties`类：

```
Properties props = new Properties();
props.load(in); 
```

`in`输入流或阅读器在哪里。

我说“偶尔”是因为属性同时支持`=`和`:`作为分隔符。在其他情况下，您可以逐行阅读并将每一行拆分如下`line.split(YOUR_DELIMITER)`：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:14:36.670

目前尚不清楚键/值对的格式是否已经确定，或者您是否可以灵活地自行选择格式。

如果键/值对采用 Internet 电子邮件标头的格式，则可以使用 JavaMail InternetHeaders 类。

# asp.net - 如何将编辑/删除/更新按钮和事件添加到gridview

> ID：12497883
> 
> 赞同：0
> 
> 时间：2012-09-19T15:26:32.267
> 
> 标签：asp.net, datagridview, ado.net

我试图添加按钮或链接到网格视图，以便我可以编辑/删除/更新记录，但我无法添加它，我尝试了很多事情，但我得到了错误，有人可以帮助我。！？我可以在 gridview 中显示记录/日期，但我看不到如何添加按钮事件。

我的front_code是：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Data_Adapter_Grid.aspx.vb" Inherits="Data_Adapter_Grid" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
        BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px"
        CellPadding="4" DataKeyNames="test_id" ForeColor="Black" GridLines="Horizontal">
    <Columns>
        <asp:BoundField DataField="test_id" HeaderText="test_id" InsertVisible="False"
            ReadOnly="True" SortExpression="test_id" />
        <asp:BoundField DataField="test_cat" HeaderText="test_cat"
            SortExpression="test_cat" />
        <asp:BoundField DataField="test_info" HeaderText="test_info"
            SortExpression="test_info" />
        <asp:BoundField DataField="test_number" HeaderText="test_number"
            SortExpression="test_number" />
    </Columns>
    <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
    <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
    <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
    <SortedAscendingCellStyle BackColor="#F7F7F7" />
    <SortedAscendingHeaderStyle BackColor="#4B4B4B" />
    <SortedDescendingCellStyle BackColor="#E5E5E5" />
    <SortedDescendingHeaderStyle BackColor="#242121" />
    </asp:GridView>
</div>
</form>
</body>
</html> 
```

我的背后代码是：

```
Imports System.Data.OleDb
Imports System.Data

Partial Class Data_Adapter_Grid
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        Call GetRecords()
    End If
End Sub
' "Provider=Microsoft.ACE.OLEDB.12.0;Data Source='C:\Users\Peter\Documents\Visual Studio 2010\Projects\StockIT\StockIT\bin\Debug\StockManagement.accdb';Persist Security Info=True;Jet OLEDB:Database Password="
'Get all Records

Sub GetRecords()
    Dim strSQL As String = ""
    strSQL = "" & _
    "SELECT * FROM [TableTest] " & _
    "ORDER BY [test_id] ASC"

    Dim dt As New DataTable()
    Using conn As New OleDbConnection(ConfigurationManager.ConnectionStrings("MyConnStr").ConnectionString)
        Try
            conn.Open()
            Dim cmd As New OleDbCommand(strSQL, conn)
            Dim dbAdapter As New OleDbDataAdapter(cmd)
            'Dim cb As New OleDbCommandBuilder(dbAdapter)
            dbAdapter.Fill(dt)  '(dt, "GridLoad")
            dbAdapter.Dispose()
            If dt.Rows.Count > 0 Then
                GridView1.DataSource = dt
                'GridView1.DataMember = "GridLoad"
                GridView1.DataBind()
            End If
        Catch exp As OleDbException
            If True Then
                MsgBox("Error trying to get records, maybe there is no records. " & vbCrLf & "Error: " & exp.Message & "Database Error", MsgBoxStyle.OkOnly, MsgBoxStyle.Critical)
            End If
        Catch exp As Exception
            If True Then
                MsgBox("Error the Database can be unavailable atm. " & vbCrLf & "Error: " & exp.Message & "Database Error", MsgBoxStyle.OkOnly, MsgBoxStyle.Information)
            End If
        End Try
    End Using
End Sub

Protected Sub GridView1_RowEditing(sender As Object, e As GridViewEditEventArgs)

End Sub

Protected Sub GridView1_RowCancelingEdit(sender As Object, e As GridViewCancelEditEventArgs)

End Sub

Protected Sub GridView1_RowUpdating(sender As Object, e As GridViewUpdateEventArgs)

End Sub

Protected Sub GridView1_RowDelete(sender As Object, e As GridViewDeletedEventArgs)

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:40:56.293

尝试在 gridview 上使用自定义按钮。波纹管链接为您提供更多解释示例： [gridview 上的自定义按钮](http://www.asp.net/web-forms/tutorials/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-vb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:52:58.693

尝试`<asp:templatefield> // add button or link inside </asp:templatefield>`调用按钮**onrowcommand**事件，阅读它以使自己清楚 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcommand.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T12:04:48.417

在你的 gridview 属性中设置这两个

```
AutoGenerateDeleteButton="True" 
AutoGenerateEditButton="True" 
```

或者

```
<asp:TemplateField>
   <FooterTemplate> // may be you want ItemTemplate 
     <asp:Button ID="btnUpdate" runat="server" CommandName="Update" Text="Update" ValidationGroup="validate" />
   </FooterTemplate>
</asp:TemplateField> 
```

希望这可以帮助！

# javascript - Javascript Raphael SVG 地图在 IE 7/8 中加载速度非常慢

> ID：12497886
> 
> 赞同：1
> 
> 时间：2012-09-19T15:26:41.033
> 
> 标签：javascript, html, raphael

我对 Raphael 和我使用的自定义地图 svg 插件有疑问。我很确定这个问题与 Raphael 和每次重新加载地图时重绘矢量有关。该地图在 Firefox/Chrome/IE9 中完美运行。在 IE 7/8 中，地图运行速度非常慢，几乎无法使用。图标有时也会变成白色。似乎定位发生在 IE8 中重新调整元素大小之前，这就是瓶颈似乎发生的地方。这是地图的链接：

[http://www.comparewebads.com/VisaInteractiveMAP/world.html](http://www.comparewebads.com/VisaInteractiveMAP/world.html)

处理地图功能的文件是 mapsvg.js。 [http://www.comparewebads.com/VisaInteractiveMAP/js/mapsvg.js](http://www.comparewebads.com/VisaInteractiveMAP/js/mapsvg.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:53:43.750

我知道这不是一个全面的答案，但我自己在相关领域的一些研究告诉我，浏览器的 javascript 性能，特别是在 svg、canvas 等图形性能方面，在过去的几个版本中呈指数级提高。IE 因性能不佳而臭名昭著（在任何版本中）。

我怀疑您的问题至少有一部分只是 IE 7 和 8 的 JavaScript 引擎相对较慢且效率低下。

在我自己的 javascript-heavy 项目中，我拒绝支持 IE9 之前的任何东西，因为 IE 7 和 IE8 根本无法处理性能（并且某些功能不包括在内。）

# c# - 读取文件选择栏

> ID：12497887
> 
> 赞同：-2
> 
> 时间：2012-09-19T15:26:42.877
> 
> 标签：c#, multithreading, streamreader, readline

我正在阅读一个包含 5 列的 .txt 文件，但我只想将第 5 列添加到列表框中，我尝试了 IndexOf 和 Remove 但它不起作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:30:50.347

在您的内部阅读循环中，您只需使用以下内容：

```
private static void Readfile(String filePath)
{
      foreach(String line in ReadAllLines(filePath))
      {
           string[] tokens = line.Split(new char[] { 'X' });
           listbox.Add(tokens[4]); // This should be your 5th column.
      }
} 
```

并将 X 替换为逗号、空格或任何用于分隔的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:31:07.833

这应该对您有用，但它假定拆分将始终成功。

```
var columnFiveValues = File.ReadLines("fileName")
      .Select(line => line.Split('\t'))  // tsv
      .Select(split => split[4]) // column 5
      .ToArray();  // evaluate now 
```

# c++ - “-D__STDC_FORMAT_MACROS” gnu 编译器选项

> ID：12497894
> 
> 赞同：4
> 
> 时间：2012-09-19T15:27:09.773
> 
> 标签：c++, compiler-construction, g++

我正在清理我的 Makefile 并尝试了解那里实际发生了什么。我遇到了上述选项。它必须启用一些宏来保证与旧 C 库的兼容性，但我找不到它的用途。gnu 编译器 (g++) 选项有什么作用

```
g++ -D__STDC_FORMAT_MACROS 
```

是什么意思？g ++甚至有必要吗？

PS：我在Linux下工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:47:25.677

感谢尼克的链接，我得出结论，g ++不需要它。它与 C 的 inttype.h 和 printf 有关。从链接

> 特别是，在 C 标准的脚注 182 中提到的符号 __STDC_FORMAT_MACROS 在 C++ 中不起作用。

# android - 如何在android edittext中的电话号码之间添加连字符？

> ID：12497896
> 
> 赞同：1
> 
> 时间：2012-09-19T15:27:18.523
> 
> 标签：android, android-edittext

我想在电话号码之间添加连字符，格式为 123-456-7890 在 android edittext 中。我怎样才能做到这一点。请帮我一个片段。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:44:01.277

```
String phoneNumber = "1234567890";
StringBuilder sb = new StringBuilder(phoneNumber)
                        .insert(4,"-")
                        .insert(8,"-");
String output = sb.toString();
Log.i("app", String.valueOf(output)); 
```

输出：`123-456-7890`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:44:29.383

您需要使用[PhoneNumberFormattingTextWatcher](http://developer.android.com/reference/android/telephony/PhoneNumberFormattingTextWatcher.html)类来满足您的要求。此类将根据电话号码自动格式化。

```
public class MyTextWatcher implements TextWatcher {
    private boolean isInAfterTextChanged;

    public synchronized void afterTextChanged(Editable text) {
       if (!isInAfterTextChanged) {
           isInAfterTextChanged = true;

           // TODO format code goes here

           isInAfterTextChanged = false;
       }
    }
} 
```

# ruby-on-rails - 在 Rails 3.2 中使用 rspec 测试 JSON API，使用精确的 PUT/POST 主体，因为 Backbone 将发送

> ID：12497897
> 
> 赞同：3
> 
> 时间：2012-09-19T15:27:22.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js

我正在尝试为以 Backbone 作为前端的 Rails 3.2 编写的 JSON API 编写一组 rspec 测试。我正在编写的测试专门针对 Rails 控制器。

现在，应用程序本身运行良好。当客户端发出带有正文的 PUT 请求时：

```
{
  "id":1,
  "name":"updated product set",
  ...
} 
```

一切都很好。在后台，Rails 将采用该主体，然后将其转换为：

```
{
  "id":1,
  "name":"updated product set",
  ...
  "model_name" => { ... }
} 
```

哈希“model_name”指向的位置包含它可以从输入中自动计算出的属性值。一切都很好。

当我从测试环境尝试相同的确切请求时，一切都不好。如果我创建的哈希与上面的 PUT 正文哈希完全相同，但在 rspec 中：

```
@update_json = {
  "id":1,
  "name":"updated product set",
  ...
}
header "Accept","application/json"
header "Content-type","application/json"
put :update, @update_json 
```

事情根本不解决。在控制器中，如果我检查 params 变量，我会得到：

```
{ "model_name" => {} } 
```

如果我省略了“Content-type”标题行，我会得到@update_json，但没有Rails 操作来创建我在控制器中需要的“model_name”映射。

我成功运行测试的唯一方法是：

```
@update_json = {
  :format => "json",
  "id":1,
  "model_name" => {
      "id":1,
      "name":"updated product set",
      ...
  }
}
header "Accept","application/json"
put :update, @update_json 
```

但是，这不是真实世界的测试，因为它没有测试我的骨干前端发送的确切 PUT 主体。

有任何想法吗？

更新：环顾四周，您实际上无法从 rspec 发出真正的 HTTP 请求*；*它只是模拟出来的。例如，您无法让系统以 404 响应，因为 Rails 抛出了一个异常，该异常通常会被 Rails 网络堆栈捕获并变成 404，但在 Rspec 中没有。所以问题看起来比上面的更深......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:02:12.590

你能试试这个吗？

```
@update_json = {
  "id":1,
  "model_name" => {
      "id":1,
      "name":"updated product set",
      ...
  }
}
put :update, @update_json, :format => :json 
```

**编辑（12 年 11 月 11 日）：**

您是否尝试过手动实例化请求并查看会发生什么？

诡异的。您是否尝试过“普通的 Ruby 方式”？

```
env = Rack::MockRequest.env_for('/posts/1', :method => 'PUT', <some other params>)
status, headers, body = PostsController.action(:update).call(env)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:13:17.300

我遇到了同样的问题。无论我做了什么，或者我以何种方式将内容类型指定为“应用程序/json”，它都不起作用。如果网上有关于将内容类型设置为 json 的建议，我试了一下。我什至同时尝试了它们。

最终，我追踪到了 ActionController::ParamsWrapper，_wrapper_enabled 在哪里？总是返回 false（由于 request.content_mime_type 为 nil）。这个解决方案对我有用。我也在寻找要添加的“神奇”参数键，并且这样做了。

```
mime_type = mock
mime_type.stub :ref => :json
request.stub :content_mime_type => mime_type
request.accept = 'application/json'
post :create, widget.as_json 
```

这些值为：

```
widget.as_json #=> {
  "created_at"=>nil,
  "description"=>"Description 1 - Quidem nihil quae aliquid sed qui.",
  "id"=>nil,
  "order"=>1,
  "title"=>"Title 1 - ut",
  "updated_at"=>nil
}

# params hash in the controller.
params #=> {
  "created_at"=>nil,
  "description"=>"Description 1 - Quidem nihil quae aliquid sed qui.",
  "id"=>nil,
  "order"=>"1",
  "title"=>"Title 1 - ut",
  "updated_at"=>nil,
  "controller"=>"api/widgets",
  "action"=>"create",
  "widget"=>{
    "title"=>"Title 1 - ut",
    "order"=>"1",
    "description"=>"Description 1 - Quidem nihil quae aliquid sed qui."
  }
} 
```

这正是我想要的。只有标题、顺序和描述被设置为 attr_accessible，因此只有出现在神奇创建的 :widget 哈希中的属性。

我也在使用 active_model_serializers，所以 as_json 正在运行，以防有人认为这很重要。

这是我正在构建的公共示例应用程序的一部分，因此如果有人认为它可能有用，则可以在使用中看到此代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T16:36:05.127

看起来这样做的能力`post :update, '{"some": "json"}'`已添加到 rspec 在此提交中使用的内部 ActionPack test_case.rb： [https ://github.com/rails/rails/commit/5b9708840f4cc1d5414c64be43c5fc6b51d4ecbf](https://github.com/rails/rails/commit/5b9708840f4cc1d5414c64be43c5fc6b51d4ecbf)

因此，其他选项可能是升级到 Rails 4 并且事情会按预期工作，或者集成上述提交。

# javascript - 用自定义图像替换 fabric.js 调整大小和旋转控件？

> ID：12497900
> 
> 赞同：3
> 
> 时间：2012-09-19T15:27:32.950
> 
> 标签：javascript, html, fabricjs

我正在寻找有关如何用自定义图像替换 fabric.js 调整大小和旋转矩形的示例....有人这样做过吗？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T08:09:23.450

您可以通过像这样覆盖原型来做到这一点：

```
var topLeftImage = new Image();
topLeftImage.src = 'images/tl.png';

var topRightImage = new Image();
topRightImage.src = 'images/tr.png';

var bottomRightImage = new Image();
bottomRightImage.src = 'images/br.png';

//Warning I modified some other things here as well, please copy this from the sources and modify it then
fabric.Object.prototype.drawCorners = function(ctx) {
  if (!this.hasControls) return;

  var size = this.cornersize,
      size2 = size / 2,
      strokeWidth2 = this.strokeWidth / 2,
      left = -(this.width / 2),
      top = -(this.height / 2),
      _left,
      _top,
      sizeX = size / this.scaleX,
      sizeY = size / this.scaleY,
      paddingX = this.padding / this.scaleX,
      paddingY = this.padding / this.scaleY,
      scaleOffsetY = size2 / this.scaleY,
      scaleOffsetX = size2 / this.scaleX,
      scaleOffsetSizeX = (size2 - size) / this.scaleX,
      scaleOffsetSizeY = (size2 - size) / this.scaleY,
      height = this.height,
      width = this.width;

  ctx.save();

  ctx.lineWidth = 1 / Math.max(this.scaleX, this.scaleY);

  ctx.globalAlpha = 1; //this.isMoving ? this.borderOpacityWhenMoving : 1;
  ctx.strokeStyle = ctx.fillStyle = '#333333';

  // top-left
  _left = left - scaleOffsetX - strokeWidth2 - paddingX;
  _top = top - scaleOffsetY - strokeWidth2 - paddingY;

  ctx.clearRect(_left, _top, sizeX, sizeY);  
  ctx.drawImage(topLeftImage, _left, _top, sizeX, sizeY);

  // top-right
  _left = left + width - scaleOffsetX + strokeWidth2 + paddingX;
  _top = top - scaleOffsetY - strokeWidth2 - paddingY;

  ctx.clearRect(_left, _top, sizeX, sizeY);  
  ctx.drawImage(topRightImage, _left, _top, sizeX, sizeY);

  // bottom-left
  _left = left - scaleOffsetX - strokeWidth2 - paddingX;
  _top = top + height + scaleOffsetSizeY + strokeWidth2 + paddingY;

  ctx.clearRect(_left, _top, sizeX, sizeY);
  ctx.strokeRect(_left, _top, sizeX, sizeY);

  // bottom-right
  _left = left + width + scaleOffsetSizeX + strokeWidth2 + paddingX;
  _top = top + height + scaleOffsetSizeY + strokeWidth2 + paddingY;

  ctx.clearRect(_left, _top, sizeX, sizeY);
  ctx.drawImage(bottomRightImage, _left, _top, sizeX, sizeY);

  ctx.restore();

  return this;
}; 
```

# python - 需要处理目录中的所有文件，但我只得到一个

> ID：12497901
> 
> 赞同：5
> 
> 时间：2012-09-19T15:27:33.263
> 
> 标签：python, python-2.7

我有一个成功处理单个文件的 Python 脚本。我正在尝试编写一个`for`循环来让它获取用户输入的目录中的所有文件。但是，它只处理目录中的文件之一。

下面的代码后面是对`data`. 我需要以某种方式关闭`for`循环吗？

```
import os

print "Enter the location of the files: "; directory = raw_input()
path = r"%s" % directory

for file in os.listdir(path):
    current_file = os.path.join(path, file)

    data = open(current_file, "rb")

    # Here's an abridged version of the data analysis

    for i in range(0, 10):
        fluff = data.readline()

    Input_Parameters = fluff.split("\t")

    output.write("%f\t%f\t%f\t%f\t%.3f\t%.1f\t%.2f\t%.2f\t%s\n" % (Voc, Isc, Vmp, Imp, Pmax, 100 * Eff, IscErr, 100 * (1 - (P2 / Pmax)), file))
    data.close() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T15:54:12.597

一般来说，如果某些东西不起作用，您可以尝试让一些更简单的东西起作用。我删除了数据分析部分并保留了下面的代码。这对我有用。我注意到如果我的路径中有一个目录，则打开将失败。我不确定你是否也是这种情况。

```
import os
import sys

path = '.'

for file in os.listdir(path):
    current = os.path.join(path, file)
    if os.path.isfile(current):
        data = open(current, "rb")
        print len(data.read()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T16:22:36.233

您答案中的当前代码对我来说基本上没问题。我注意到它正在`output`为它处理的每个文件写入同一个文件，所以这可能会让你认为它没有处理所有文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:58:41.480

为您调试：

```
对于 os.listdir(path) 中的文件：
    current_file = os.path.join（路径，文件）
    打印当前文件

```

检查 current_file 的输出

顺便说一句：你是按制表符缩进你的代码吗？

因为您的代码中有不同的缩进长度。

**这是不好的风格**

# .htaccess - Windows IIS7 上的 Htaccess 和 CakePHP 2

> ID：12497904
> 
> 赞同：2
> 
> 时间：2012-09-19T15:27:43.733
> 
> 标签：.htaccess, cakephp, web-config, cakephp-2.0, cakephp-2.2

我在尝试通过 windows 和 II7 配置 mod 重写时遇到问题： [CakePHP 2.2.2 not working on Windows IIS7](https://stackoverflow.com/questions/12492078/cakephp-2-2-2-not-working-on-windows-iis7)但最后我可以导入 htaccess 以便为 IIS7 创建**web.config**文件。

问题是：现在该文件已在 cakephp 文件夹中创建，我可以访问主页**但**它尚未在*app/*或*app/webroot*中创建，您可以在其中找到另外 2 个 .htaccess 文件。

现在，我无法访问除主站点之外的任何其他视图，它显示 404 页面未找到错误，我很确定这是因为它没有在 web.config 上获取那些 .htaccess 文件。

我的 cakephp **web.config**文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <rewrite>
        <rules>
            <rule name="Imported Rule 1" stopProcessing="true">
                <match url="^$" ignoreCase="false" />
                <action type="Rewrite" url="app/webroot/" />
            </rule>
            <rule name="Imported Rule 2" stopProcessing="true">
                <match url="(.*)" ignoreCase="false" />
                <action type="Rewrite" url="app/webroot/{R:1}" />
            </rule>
        </rules>
    </rewrite>
</system.webServer>
</configuration> 
```

虽然 CakePHP 文档告诉您添加不同的代码（这使视图工作但没有加载样式。主页不起作用。） [http://book.cakephp.org/2.0/en/installation/advanced -installation.html#url-rewrites-on-iis7-windows-hosts](http://book.cakephp.org/2.0/en/installation/advanced-installation.html#url-rewrites-on-iis7-windows-hosts)

当尝试从 URL 访问 CSS 文件时，我收到以下消息：

```
Missing Controller

Error: CssController could not be found.

Error: Create the class CssController below in file: app\Controller\CssController.php

<?php
class CssController extends AppController {

} 
```

任何的想法？在 Windows 上使用 Cakephp 让我发疯......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T23:30:56.117

**我应该提到我的回应是对此处发布的解决方案的改进：[http ://www2.palomar.edu/pages/sphillips/cakephp-with-iis-7-rewrite-rules-in-a-sub-folder/](http://www2.palomar.edu/pages/sphillips/cakephp-with-iis-7-rewrite-rules-in-a-sub-folder/)**

一个更简单、更灵活的解决方法是完全去掉**/{Path_To_CakePHP_Directory}/**，包括正斜杠 (/)。通过保持路径相对，您的项目文件夹变得更加移动。这是 web.config 的样子：

```
 <configuration>
   <system.webServer>
     <rewrite>
       <rules>
         <clear/>
         <rule name="Imported Rule 0" stopProcessing="true">
           <match url="^(img|css|files|js)(.*)$"></match>
           <action type="Rewrite" url="app/webroot/{R:1}{R:2}" appendQueryString="false"></action>
         </rule>
         <rule name="Imported Rule 1" stopProcessing="true">
           <match url="^(.*)$" ignoreCase="false" />
           <conditions logicalGrouping="MatchAll">
             <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
             <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
           </conditions>
           <action type="Rewrite" url="index.php?url={R:1}" appendQueryString="true" />
         </rule>
         <rule name="Imported Rule 2" stopProcessing="true">
           <match url="^$" ignoreCase="false" />
           <action type="Rewrite" url="app/webroot/" />
         </rule>
         <rule name="Imported Rule 3" stopProcessing="true">
           <match url="(.*)" ignoreCase="false" />
           <action type="Rewrite" url="app/webroot/{R:1}" />
         </rule>
         <rule name="Imported Rule 4" stopProcessing="true">
           <match url="^(.*)$" ignoreCase="false" />
           <conditions logicalGrouping="MatchAll">
             <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
             <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
           </conditions>
           <action type="Rewrite" url="index.php?url={R:1}" appendQueryString="true" />
         </rule>
       </rules>
     </rewrite>
   </system.webServer>
 </configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T16:09:48.237

好的，最后我使用我在这个网站上找到的这个 web.config 让它工作： [http ://www2.palomar.edu/pages/sphillips/cakephp-with-iis-7-rewrite-rules-in-a-sub-文件夹/](http://www2.palomar.edu/pages/sphillips/cakephp-with-iis-7-rewrite-rules-in-a-sub-folder/)

我刚刚将**/{Path_To_CakePHP_Directory}/**更改为**/**。

# jquery - 使用锚标签，仍然可以通过 url 传递参数

> ID：12497906
> 
> 赞同：-1
> 
> 时间：2012-09-19T15:27:45.140
> 
> 标签：jquery, forms, url, parameters, anchor

我正在开发一个单页 Joomla 网站。这是非常基本的，但我遇到了一些技术难题。当用户单击导航菜单中的链接时，页面将滚动到相应的元素。我通过 jQuery 和普通的旧锚来做到这一点。（例如：mysite.com/#contact）

我也在使用联系表格。当我提交此表单时，页面会重新加载。我想再次重新加载 mysite.com./#contact url，我还想向用户显示一条消息，让他/她知道表单已成功提交。我不想为此使用弹出窗口，但我希望它显示在表单上方。

我想过让提交重定向回 mysite.com/#contact?submit=yes 然后使用 jquery 检查 url 是否有 submit=yes 参数并显示消息，但问题是如果我通过参数传递url，它不会自动向下滚动到正确的元素...

有没有人有任何想法/聪明的技巧来解决这个问题？

提前致谢！

布拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:31:43.670

尝试先放置参数，然后将锚点放在最后。

`mysite.com/?submit=yes#contact`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:47:47.973

*... "然后使用 jquery 检查 url 是否有 submit=yes 参数并显示消息" ...*

是的，您可以这样做，然后您必须向下滚动到您的表单或通知消息，例如

```
if(document.location.href.indexOf('submit=yes') != -1){
 $('html, body').animate({
         scrollTop: 500 // the amount of scrolling : $("#YourFormId").offset().top
     }, 2000);
} 
```

# python - 动态构建布尔表达式

> ID：12497917
> 
> 赞同：6
> 
> 时间：2012-09-19T15:28:35.837
> 
> 标签：python, boolean-expression

我正在编写一些代码来增加文件名末尾的数字，直到它不再覆盖现有文件。我正在创建几个文件，它们都具有相同的基本文件名但不同的扩展名，我不想覆盖这些文件。

天真的版本：

```
prefix = 'hello0'
while os.path.exists(prefix + '.abc') or os.path.exists(prefix + '.def') or os.path.exists(prefix + '.ghi'):
    n = int(prefix[-1])
    prefix = prefix[:-1] + str(n + 1)  # I know this doesn't work when n reaches two digits; my full code involves a regular expression 
```

当有多个扩展时，条件显然会变得非常长和丑陋。我把它抽象成一个`for`循环。

我的版本：

```
prefix = 'hello0'
extensions = ('.abc', '.def', '.ghi')  # there could be even more than this
condition = True
while condition:
    condition = False
    # if any of the paths still exist, set the condition back to True
    for extension in extensions:
        if os.path.exists(prefix + extension):
            condition = True

    n = int(prefix[-1])
    prefix = prefix[:-1] + str(n + 1) 
```

我仍然觉得这有点笨拙：`while`循环实际测试的内容并不完全清楚。是否可以动态构建布尔*表达式*，而不是设置布尔*值*？

我认为以下可能有效（我没有测试过，我只是在写这篇文章时才想到它！）但我认为我不应该求助于`eval`：

```
prefix = 'hello0'
extensions = ('.abc', '.def', '.ghi')

test = 'False'
for extension in extensions:
    test += " or os.path.exists(prefix + '" + extension + "')"
while eval(test):
    n = int(prefix[-1])
    prefix = prefix[:-1] + str(n + 1) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T15:32:07.943

您可能希望将`any()`内置与生成器一起使用：

```
while any(os.path.exists(prefix + extension) for extension in extensions):

    # then increment prefix and try again, as in your example code 
```

这会使用更简单的语法计算您需要的`True`or `False`。

一般来说，如果我*曾经*有过使用像 Python 这样的动态语言的诱惑`eval()`，那么这意味着我需要学习一个重要的语言特性。动态语言应该使代码更漂亮*，而不会*尝试编写和维护写更多代码的代码——所以你在这里通过询问你的方法做了完全正确的事情。

# mysql - 寻找带有子查询的查询

> ID：12497918
> 
> 赞同：0
> 
> 时间：2012-09-19T15:28:44.480
> 
> 标签：mysql

我的数据库中有 2 个表：

*   `TableA`包含`aId`, `aBId`, `a3`, ...
*   `TableB`包含`bId`, `b2value`, `b3`,...

`aBId`是`bId`的`tableB`。

我需要一个 mysql 查询，它从 tableA 中选择所有记录，其中来自 bId 的记录具有 b2value = 'something'...讨厌查询...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:30:24.170

```
select a.* 
from TableA a
inner join TableB b on a.aBid = b.bId
where b.b2Value = 'something' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:30:42.293

> select a.* from TableA a join TableB b on a.aBId = b.bId where b.b2value = 'something'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:32:22.373

```
 select * 
    from TableA
    inner join TableB on TableA.aBId = TableB.bId
    where TableB.b2Value = 'something' 
```

# svm - SVM线性核中TF-IDF和TF的区别

> ID：12497929
> 
> 赞同：1
> 
> 时间：2012-09-19T15:29:28.690
> 
> 标签：svm, document-classification, tf-idf

因为 IDF 是一个常数。一维中的所有值乘以一个常数。

在 SVM 线性内核中，结果会有所不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:31:21.697

你最初的问题并没有真正的意义。您将两个不同的世界混为一谈：1) [TF/IDF：文本表示的特征](http://en.wikipedia.org/wiki/Tf%E2%80%93idf) 2) [SVM - 线性内核](http://en.wikipedia.org/wiki/Support_vector_machine)：SVM 的最简单方法（确实用于文本）。

TF和TF/IDF的区别在于是否使用了词的语料库频率。TF/IDF 是迄今为止更好的选择，独立于分类器。

仅使用 TF，我们并不真正关心一个词是否常见。因此，像文章这样的常用词即使没有提供真实信息，也会获得很大的权重。

在 TF/IDF 中，一个词在语料库中出现的频率越高，它获得的权重就越小。因此，像文章这样的常见词获得的权重较小，但假设携带更多信息的稀有词获得更大的权重。

注意在上面，“文章”被用作示例，它们通常应该在预处理步骤中删除。

# windows - 我可以将 AS400 上的 DB2 数据库转储到 Windows 或 Linux 吗？

> ID：12497930
> 
> 赞同：5
> 
> 时间：2012-09-19T15:29:29.397
> 
> 标签：windows, linux, compatibility, db2-400

自从我使用 DB2 以来已经有好几年了，但我只是继承了一个通过 JDBC 读取/写入 DB2 的遗留应用程序，它在 AS400 上运行。我还没有关于平台或版本的很多细节，但我想知道通常是否可以将 DB 的副本迁移到 DB2 的 Windows 或 Linux 版本？该应用程序通过非常慢的管道访问数据，我希望能够剪切数据库的副本以进行本地开发。使用的 JDBC 驱动程序是：

```
com.ibm.as400.access.AS400JDBCDriver 
```

如果这有帮助...

感谢任何/所有回复！

***更新：我刚刚发现 DB2 版本是 7.1，平台是 iSeries（我应该询问有关平台的更多详细信息吗？）***

~~干杯~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T14:34:18.803

如果您安装 iSeries Navigator（至少是数据库组件），您可以深入了解所需的模式（或多个模式）并为 SQL 识别的各种对象类型选择“生成 SQL”选项。然后可以将 SQL 移植到您将使用的任何 DBMS。

当然，这与任何数据都是分开的。许多对象很可能对任何其他平台都没有任何意义。“数据库”在不同平台上没有多大意义的可能性很小。这将取决于数据库存在多长时间（它可能早于 SQL）、开发人员多年来的进步程度、他们对平台特定功能的利用程度等。

# asp.net - 在 asp.net 中编写一个属性来设置颜色值

> ID：12497931
> 
> 赞同：0
> 
> 时间：2012-09-19T15:29:32.827
> 
> 标签：asp.net, properties, colors, typeconverter

```
public string LabelColor
    {
        get { return Convert.ToString(this.label1.ForeColor); }
        set { this.label1.ForeColor =Color(value); }
    } 
```

我正在尝试将“值”设置为标签前色属性的前色，但这里的“值”是字符串，我需要将其转换为颜色类型。我怎样才能做到这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:33:03.777

您可以使用此代码 - 基于`Color.FromName`方法

```
set { this.label1.ForeColor = Color.FromName(value); } 
```

# sql-server - 如何在数据库中查找 DBO 更改的详细信息？

> ID：12497932
> 
> 赞同：5
> 
> 时间：2012-09-19T15:29:36.680
> 
> 标签：sql-server, sql-server-2008-r2, dbo

我想运行一个查询来查看特定数据库的 DBO 何时以及由谁更改。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:49:28.920

我在stackexchange上找到了这个信息......并尝试了它并且它有效。唯一的问题是它只给了我上次更改 DBO 的用户，而不是之前的时间。我是上次更改 DBO 的人，因为我的应用程序无法正常工作。我需要知道在此之前谁更改了 DBO。有谁知道我会怎么做 - 找到最后几次 DBO 被更改以及由谁更改？这是让我知道上次谁更改它的代码：

这是在默认跟踪中。无论您使用 sp_changedbowner 还是正确的现代语法，它都会显示为后者：

将 database::[foo] 上的授权更改为 [bar] 您可以通过以下方式检索信息：

```
DECLARE @path NVARCHAR(260);

SELECT 
   @path = REVERSE(SUBSTRING(REVERSE([path]), 
   CHARINDEX('\', REVERSE([path])), 260)) + N'log.trc'
FROM    sys.traces
WHERE   is_default = 1;

SELECT * -- whittle down to the meaningful trace columns
FROM sys.fn_trace_gettable(@path, DEFAULT)
WHERE EventClass = 152
ORDER BY StartTime DESC; 
```

现在，该事件可能发生在很久以前，因此它不一定仍在跟踪中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:14:36.537

参考您关于解释更多关于默认跟踪文件的评论......

当您查询`sys.traces`时，它将为当前在您的 SQL 实例上运行的每个跟踪返回一条记录。如果启用了该功能，这些记录之一应引用默认跟踪文件。默认跟踪文件的文件格式为`log_000.trc`. 编号是一个序号。该文件默认存储在保存 SQL ERRORLOG 文件的 LOG 目录中，并且无法更改。

如果您转到该目录，您可能会为您的默认跟踪找到多个跟踪文件。我相信，一旦文件达到 20MB，默认跟踪将创建一个新文件。由于默认跟踪不会捕获太多信息，因此通常不会创建大量文件。虽然我会注意到这是应该监控的，但长时间未触及的系统可能会使这些小文件堆积起来并导致存储空间被填满。

看起来当前跟踪文件中没有您要查找的事件，这导致它在该文件之前。因此，您有两种选择，即 `sys.fn_trace_gettable()`分别对每个文件运行查询；或者我会将旧文件复制到客户端计算机或生产服务器之外的其他地方，然后在分析器中打开每个文件，具体取决于我们正在谈论的数量。如果有问题的事件导致您的应用程序中断，您可以明显地参考那个时间来查找您需要关注的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-31T23:28:16.073

您可以从默认跟踪中获取该信息。

这是一篇包含跟踪示例查询的文章： [默认跟踪](http://www.sqlservercentral.com/articles/SQL+Server+2005/64547/)

您还可以通过以下方式查看 SSMS 中的最新更改`right-clicking on the database -> Reports -> Schema Changes History -> Schema Changes History.`

通过 TSQL，您可以使用：

```
SELECT StartTime
       ,LoginName
       ,f.*
FROM   sys.traces t
       CROSS APPLY fn_trace_gettable(REVERSE(SUBSTRING(REVERSE(t.path),
                                                       CHARINDEX('\', REVERSE(t.path)), 
                                                       260)
                                             ) + N'log.trc', DEFAULT) f
WHERE  t.is_default = 1
       AND ObjectName = 'FOO'
       AND EventClass IN (46, /*Object:Created*/
                          47, /*Object:Dropped*/
                          164 /*Object:Altered*/ ) 
```

# objective-c - 没有 UITableViewController 的 UIRefreshControl

> ID：12497940
> 
> 赞同：308
> 
> 时间：2012-09-19T15:30:22.017
> 
> 标签：objective-c, ios, uitableview, ios6, uirefreshcontrol

只是好奇，因为它似乎不可能立即实现，但是有没有一种偷偷摸摸的方法来利用新的 iOS 6`UIRefreshControl`类而不使用`UITableViewController`子类？

我经常将 a`UIViewController`与`UITableView`子视图一起使用，并遵循`UITableViewDataSource`而`UITableViewDelegate`不是`UITableViewController`直接使用。

* * *

## 回答 #1

> 赞同：388
> 
> 时间：2012-09-19T20:32:48.213

凭直觉，根据 DrummerB 的灵感，我尝试简单地将一个`UIRefreshControl`实例作为子视图添加到我的`UITableView`. 它神奇地起作用了！

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
[self.myTableView addSubview:refreshControl]; 
```

这会`UIRefreshControl`在您的表格视图上方添加一个并按预期工作而无需使用`UITableViewController`:)

* * *

编辑：上面仍然有效，但正如一些人指出的那样，以这种方式添加 UIRefreshControl 时会有轻微的“口吃”。一个解决方案是实例化一个 UITableViewController，然后将你的 UIRefreshControl 和 UITableView 设置为那个，即：

```
UITableViewController *tableViewController = [[UITableViewController alloc] init];
tableViewController.tableView = self.myTableView;

self.refreshControl = [[UIRefreshControl alloc] init];
[self.refreshControl addTarget:self action:@selector(getConnections) forControlEvents:UIControlEventValueChanged];
tableViewController.refreshControl = self.refreshControl; 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2013-01-03T22:14:03.170

要消除由接受的答案引起的口吃，您可以将您的分配`UITableView`给`UITableViewController`.

```
_tableViewController = [[UITableViewController alloc]initWithStyle:UITableViewStylePlain];
[self addChildViewController:_tableViewController];

_tableViewController.refreshControl = [UIRefreshControl new];
[_tableViewController.refreshControl addTarget:self action:@selector(loadStream) forControlEvents:UIControlEventValueChanged];

_theTableView = _tableViewController.tableView; 
```

**编辑：**

一种在 tableview 上刷新数据后添加`UIRefreshControl`no且没有口吃并保留漂亮动画的方法。`UITableViewController`

```
UIRefreshControl *refreshControl = [UIRefreshControl new];
[refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
[self.theTableView addSubview:refreshControl];
[self.theTableView sendSubviewToBack:refreshControl]; 
```

稍后在处理刷新的数据时...

```
- (void)handleRefresh:(UIRefreshControl *)refreshControl {
    [self.theTableView reloadData];
    [self.theTableView layoutIfNeeded];
    [refreshControl endRefreshing];
} 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-25T21:09:31.120

您将尝试在您正在使用的 ViewController 中使用容器视图。您可以使用专用的 tableview 定义干净的 UITableViewController 子类并将其放置在 ViewController 中。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-09-19T15:38:46.483

UIRefreshControl 是 UIView 的子类，所以你可以单独使用它。我不确定它是如何呈现自己的。渲染可以简单地依赖于框架，但它也可以依赖于 UIScrollView 或 UITableViewController。

无论哪种方式，它都将更像是一种 hack，而不是一种优雅的解决方案。我建议您查看可用的第 3 方克隆之一或编写自己的。

[**ODRefreshControl**](https://github.com/Sephiroth87/ODRefreshControl)

![在此处输入图像描述](../Images/99e5bc8104bee937e56c80fe82039f3d.png)

[**史莱姆刷新**](https://github.com/dbsGen/SlimeRefresh)

![在此处输入图像描述](../Images/63ca209da586c35da177ceb50d2dfcf3.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-08-03T04:48:41.250

尝试在 tableView 重新加载其内容后延迟对 refreshControl`-endRefresh`方法的调用，方法是使用 NSObject`-performSelector:withObject:afterDelay:`或 GCD `dispatch_after`。

为此，我在 UIRefreshControl 上创建了一个类别：

```
@implementation UIRefreshControl (Delay)

- (void)endRefreshingAfterDelay:(NSTimeInterval)delay {
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delay * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        [self endRefreshing];
    });
}

@end 
```

我对其进行了测试，这也适用于集合视图。我注意到只有 0.01 秒的延迟就足够了：

```
// My data refresh process here while the refresh control 'isRefreshing'
[self.tableView reloadData];
[self.refreshControl endRefreshingAfterDelay:.01]; 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-12-22T15:49:46.610

> **IOS 10 斯威夫特 3.0**

*这很简单*

```
import UIKit

class ViewControllerA: UIViewController, UITableViewDataSource, UITableViewDelegate {

    @IBOutlet weak var myTableView: UITableView!

    override func viewDidLoad() {
        super.viewDidLoad()

        myTableView.delegate = self
        myTableView.dataSource = self

        if #available(iOS 10.0, *) {
            let refreshControl = UIRefreshControl()
            let title = NSLocalizedString("PullToRefresh", comment: "Pull to refresh")
            refreshControl.attributedTitle = NSAttributedString(string: title)
            refreshControl.addTarget(self,
                                     action: #selector(refreshOptions(sender:)),
                                     for: .valueChanged)
            myTableView.refreshControl = refreshControl
        }
    }

    @objc private func refreshOptions(sender: UIRefreshControl) {
        // Perform actions to refresh the content
        // ...
        // and then dismiss the control
        sender.endRefreshing()
    }

    // MARK: - Table view data source

    func numberOfSections(in tableView: UITableView) -> Int {
        return 1
    }

    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return 12
    }

    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = tableView.dequeueReusableCell(withIdentifier: "reuseIdentifier", for: indexPath)

        cell.textLabel?.text = "Cell \(String(indexPath.row))"
        return cell
    }

} 
```

[![在此处输入图像描述](../Images/17fd152828a9567084d488ed9a4ba801.png)](https://i.stack.imgur.com/GIVTp.png)

*如果您想了解 iOS 10 UIRefreshControl，请阅读[**此处**](http://useyourloaf.com/blog/refresh-control-changes-in-ios-10/)。*

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-05T05:46:11.447

将刷新控件添加为子视图会在部分标题上方创建一个空白区域。

相反，我将一个 UITableViewController 嵌入到我的 UIViewController 中，然后将我的`tableView`属性更改为指向嵌入的那个，中提琴！最少的代码更改。:-)

脚步：

1.  在 Storyboard 中创建一个新的 UITableViewController 并将其嵌入到您原来的 UIViewController 中
2.  替换`@IBOutlet weak var tableView: UITableView!`为新嵌入的 UITableViewController 中的那个，如下图

* * *

```
class MyViewController: UIViewController, UITableViewDataSource, UITableViewDelegate {
    weak var tableView: UITableView!

    override func viewDidLoad() {
        super.viewDidLoad()

        let tableViewController = self.childViewControllers.first as! UITableViewController
        tableView = tableViewController.tableView
        tableView.dataSource = self
        tableView.delegate = self

        // Now we can (properly) add the refresh control
        let refreshControl = UIRefreshControl()
        refreshControl.addTarget(self, action: "handleRefresh:", forControlEvents: .ValueChanged)
        tableViewController.refreshControl = refreshControl
    }

    ...
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-17T20:06:31.170

**对于斯威夫特 2.2 。**

首先制作 UIRefreshControl() 。

```
var refreshControl : UIRefreshControl! 
```

在您的 viewDidLoad() 方法中添加：

```
refreshControl = UIRefreshControl()
    refreshControl.attributedTitle = NSAttributedString(string: "Refreshing..")
    refreshControl.addTarget(self, action: #selector(YourUIViewController.refresh(_:)), forControlEvents: UIControlEvents.ValueChanged)
    self.tableView.addSubview(refreshControl) 
```

并制作刷新功能

```
func refresh(refreshControl: UIRefreshControl) {

    // do something ...

    // reload tableView
    self.tableView.reloadData()

    // End refreshing
    refreshControl.endRefreshing()
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-01-08T21:36:36.907

这是另一个有点不同的解决方案。

由于我遇到了一些视图层次结构问题，我不得不使用它：我正在创建一些功能，需要将视图传递到视图层次结构中的不同位置，当使用 UITableViewController 的 tableview b/c 时，tableView 是 UITableViewController 的根视图（ self.view) 而不仅仅是一个常规视图，它创建了不一致的控制器/视图层次结构并导致崩溃。

基本上创建自己的 UITableViewController 子类并覆盖 loadView 以分配 self.view 不同的视图，并覆盖 tableView 属性以返回单独的 tableview。

例如：

```
@interface MyTableVC : UITableViewController
@end

@interface MyTableVC ()
@property (nonatomic, strong) UITableView *separateTableView;
@end

@implementation MyTableVC

- (void)loadView {
    self.view = [[UIView alloc] initWithFrame:CGRectZero];
}

- (UITableView *)tableView {
    return self.separateTableView;
}

- (void)setTableView:(UITableView *)tableView {
    self.separateTableView = tableView;
}

@end 
```

当与 Keller 的解决方案结合使用时，这将更加健壮，因为 tableView 现在是常规视图，而不是 VC 的根视图，并且对于更改视图层次结构更加健壮。以这种方式使用它的示例：

```
MyTableVC *tableViewController = [[MyTableVC alloc] init];
tableViewController.tableView = self.myTableView;

self.refreshControl = [[UIRefreshControl alloc] init];
[self.refreshControl addTarget:self action:@selector(getConnections) forControlEvents:UIControlEventValueChanged];
tableViewController.refreshControl = self.refreshControl; 
```

这还有另一种可能的用途：

由于这种子类化方式将 self.view 与 self.tableView 分开，因此现在可以将此 UITableViewController 用作更多常规控制器，并将其他子视图添加到 self.view 而不会向 UITableView 添加子视图，因此可能会考虑制作他们的视图控制器直接是 UITableViewController 的子类，而不是 UITableViewController 子类。

需要注意的一些事项：

由于我们在不调用 super 的情况下覆盖 tableView 属性，因此可能需要注意一些事情，并在必要时进行处理。例如，在我上面的示例中设置 tableview 不会将 tableview 添加到 self.view 并且不会设置您可能想要做的框架。此外，在这个实现中，当类被实例化时，没有默认的 tableView 给你，这也是你可以考虑添加的东西。我不在这里包括它，因为这是个案，这个解决方案实际上非常适合 Keller 的解决方案。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-12T05:12:07.737

试试这个，

上述解决方案很好，但 tableView.refreshControl 仅适用于 UITableViewController，直到 iOS 9.x 并且从 iOS 10.x 开始出现在 UITableView 中。

用 Swift 3 编写 -

```
let refreshControl = UIRefreshControl()
refreshControl.addTarget(self, action: #selector(FeedViewController.loadNewData), for: UIControlEvents.valueChanged)
// Fix for the RefreshControl Not appearing in background
tableView?.addSubview(refreshControl)
tableView.sendSubview(toBack: refreshControl) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-09-25T11:13:01.277

Keller 的第一个建议在 iOS 7 中导致了一个奇怪的错误，即在视图控制器重新出现后表格的插图增加了。使用 uitableviewcontroller 更改为第二个答案，为我解决了问题。

* * *

## 回答 #12

> 赞同：-6
> 
> 时间：2013-09-14T17:25:15.143

事实证明，当您将 UIViewController 与 UITableView 子视图一起使用并符合 UITableViewDataSource 和 UITableViewDelegate 时，您可以使用以下内容：

```
self.refreshControl = [[UIRefreshControl alloc]init];
[self.refreshControl addTarget:self action:@selector(refresh:) forControlEvents:UIControlEventValueChanged]; 
```

# .htaccess - 检测服务器是否通过 .htaccess 文件重定向

> ID：12497949
> 
> 赞同：1
> 
> 时间：2012-09-19T15:30:46.320
> 
> 标签：.htaccess

我创建了一个 .htaccess 文件来将特定 IP 地址重定向到另一个文件：

```
# Allow rewriting of htaccess
RewriteEngine On
RewriteBase /

# Get remote address/block of addresses to redirect
RewriteCond %{REMOTE_ADDR} 127\.0\.0\.1

# Define the file being accessed
RewriteCond %{REQUEST_URI} /index\.php$

# When the remote address(es) try to access the file above redirect them to the file below
RewriteRule .* /other-index\.php [R,L] 
```

如果它尝试访问 index.php 但允许所有其他远程主机访问 index.php，则这很好，上面将 localhost 重定向到 other-index.php。

远程主机正在调用：[http ://www.example.com/index.php](http://www.example.com/index.php)

我的问题是远程主机（在本例中为 localhost）能否发现它正在被服务器重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:52:05.593

> 我的问题是远程主机（在本例中为 localhost）能否发现它正在被服务器重定向？

`/index.php`是的，因为客户端（位于 127.0.0.1）向服务器发出请求。服务器以 302**响应**，将客户端重定向到不同的位置`/other-index.php`。

通常，这一切都是无缝进行的，就像您使用浏览器一样。浏览器获取新位置 ( `/other-index.php`) 并简单地向服务器发出新请求以获取新位置并获取它。它立即发生。但是远程主机（客户端）知道它正在被重定向，因为它发出的第一个请求（for `/index.php`）导致了一个带有*新位置*（`/other-index.php`）的 302。

如果`R`您的方括号中的标志`RewriteRule`被省略，则不会发生重定向，并且 URI 将由服务器在内部重写，并且客户端（远程主机）将忘记提供服务的事实`other-index.php`请求时的内容`other.php`。

# html - CSS导航栏指示问题

> ID：12497952
> 
> 赞同：1
> 
> 时间：2012-09-19T15:30:50.580
> 
> 标签：html, css

PS：如果您在将鼠标悬停在链接上时仔细查看该栏，则最右侧的几个像素会保持黑色。为什么会这样，我该如何解决？

当前导航栏的代码如下：

HTML：

```
<body>
    <div class="navbar">
        <a href="home.html" id="current">-home</a>
        <a href="about.html">about</a>
        <a href="store.html">store</a>
        <a href="contact.html">contact</a>
    </div>
</body> 
```

CSS：

```
.navbar{
width: 75%;
background-color: black;
margin-left: auto;
margin-right: auto;
margin-top: 15px;}
.navbar a:link, a:visited{
background-color: black;
color: white;
text-decoration: none;
text-transform: uppercase;
border-right: 2px solid white;
font-weight: bold;
font-family: verdana;
font-size: 37px;
text-align: center;
padding-left: 5px;
padding-right: 5px;}
.navbar a:hover, a:active, a:focus{
background-color: #4A4A4A;
text-decoration: underline;}
#current a:link, a:visited{
background-color: red;} 
```

从代码中可以看出，我正在尝试将主页链接的颜色设置为红色。但这显然行不通。我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:32:37.257

更改您的 CSS 规则：

```
#current a:link, a:visited{
background-color: red;} 
```

到

```
#current {
background-color: red;} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/7RRMT/)**

您的规则指定 ID 为 #current 的元素，然后在 #current 足够时指定它的子链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:32:51.110

current 是链接元素的 id，`#current {background-color:red;}`应该这样做。

现在您正在尝试使用 id current 设置元素内的链接元素的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:34:00.690

您在 CSS 中的 #current 之后忘记了逗号。你不需要剩下的线。你也可以`#current`只写 或`a#current`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T15:40:02.933

你的 CSS 不正确。

```
#current a:link 
```

这是说在具有 Id #current 的元素内设置链接样式

但是您的链接是带有 id 的元素，试试这个：

```
a#current { color: red; } 
```

不过最好使用一个类：

```
a.red { color: red; } 
```

进而：

```
<a class="red">bla</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T15:40:50.717

正如大家所指出的那样，主要问题是您尝试更改的元素 #current 也是锚标记，因此您必须说 a#current:link 或 #current 而不是 #current a:link 因为锚标记不是#current 标记的子项。

这是[我的 jsFiddle](http://jsfiddle.net/jennyfofenny/td3SB/)，如果你有兴趣的话。

# asp.net - QlikView 阻止 Scripts 文件夹用于同一服务器上的 asp.net/mvc 页面

> ID：12497954
> 
> 赞同：0
> 
> 时间：2012-09-19T15:31:07.647
> 
> 标签：asp.net, iis, qlikview

我们有一个全新的带有 IIS7.5 的 WinServer2k8R2。它上面的 Asp.Net 站点不会显示任何 javascript 文件。将其缩小到 QlikView。

当 QlikView 安装在我们的服务器上时，它会接管IIS中*每个网站上的 /Scripts/ 文件夹。*

有什么办法可以阻止它这样做，或者仅限于一个网站而不是全部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:51:12.363

可能找到了可能的解决方法：

转到 C:\ProgramData\QlikTech\WebServer\config.xml

并将 DefaultUrl 上的端口更改为 80 以外的任何端口：例如

```
http://_:8080/ 
```

不幸的是，我还没有让 QlikView 再次工作

# jquery - IE 上的 window.history.pushState 问题

> ID：12497958
> 
> 赞同：0
> 
> 时间：2012-09-19T15:31:20.253
> 
> 标签：jquery, history.js, html5-history

我`jQueryUI Auto-complete`在我的网站上使用它，`window.history.pushState`它会在不刷新页面的情况下更改浏览器 URL。它完美地工作`Chrome`，`Mozilla`但不幸的是它不能按照我想要的方式工作`Internet Explorer 9`。情况就是这样，我可以通过页面上的标签`jQueryUI Auto-complete`搜索地区、县和邮编。`<input />`然后，如果我单击自动完成的任何建议结果，则使用`window.history.pushState`浏览器 URL 更改为 from `www.example.com/sites`to`www.example.com/sites/selected_region`而不刷新页面。现在正如我所说的那样，它可以运行`Chrome`，`Mozilla`但它会失败`IE9`，因为当我单击任何建议的结果时会发生什么`jQueryUI Auto-complete`，它既不会更改浏览器 URL，也不会关闭建议列表。它肯定不支持`window.histoty.pushState`。所以我搜索并找到了一个可以使用的解决方案`history.js`。我只是按照说明将其上传到我的服务器上并包含`history.js`文件，但事实证明它与我`.js`正在使用的其他文件冲突。我将如何解决这个问题？提前致谢。

**PS：**这是我的使用方法`window.history.pushState`

```
$( "#find" ).autocomplete({
minLength: 1,
source: function(request, response) {
            var results = $.ui.autocomplete.filter(locations, request.term);
            response(results.slice(0, 10));
        },
focus: function( event, ui ) {
    $( "#find" ).val( ui.item.value );
    return false;
},
appendTo: "#results",
open: function(){
    var position = $("#results").position(),
                    left = position.left, top = position.top;

            $("#results > ul").css({left: (left + 15) + "px",
                                                    top: (top + 30) + "px", width: (206) + "px" });
},

select: function( event, ui ) {
    $( "#find" ).val( ui.item.value );
    $(":header.title").html(ui.item.value);

    var base = '/stats/';
    var url = base + ui.item.href;
    var label_name = ui.item.value;
    document.title = "Statistics for " + label_name + "| ASI";
    window.history.pushState({"url":url}, document.title, url);
    return false;
}
}); 
```

请随时以任何可能的方式纠正我。干杯。

# xml - 按客户更改订单状态 Magento

> ID：12497961
> 
> 赞同：0
> 
> 时间：2012-09-19T15:31:22.907
> 
> 标签：xml, magento, content-management-system, e-commerce

我是 Magento 开发的新手。客户是否可以在其帐户**中的“我的订单详细信息”中更改其订单状态**？如果可以，这样做的步骤是什么？任何帮助我都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:32:32.843

不，magento 没有提供这样做的方法，但这是任何人都希望他们的电子商店拥有的奇怪功能。请您澄清为什么要这样做而不是管理员控制客户的订单状态？

# jquery - 委托闪烁循环

> ID：12497963
> 
> 赞同：3
> 
> 时间：2012-09-19T15:31:28.893
> 
> 标签：jquery, delegates, hover, infinite-loop, flicker

我一直在使用委托来获得在嵌套 div 上工作的悬停效果。但这似乎会导致闪烁的循环，我不知道如何阻止它。

`.shadow`div 是它的父 div 的高度和宽度，`.box`.

```
 <div class="wrapper">
       <div class="box">
          <div class="hover"><h2>Joe Bloggs</h2></div>
          <div class="cover"></div>
          <div class="shadow"></div>
          <img class="image" src="_assets/images/joebloggs.jpg" alt="" />
       </div>
    </div>

    $(".wrapper").delegate(".shadow", "mouseover mouseout", function(e) {
       if (e.type == 'mouseover') {
          $(this).parent().find('.cover').show();
          $(this).parent().find('.hover').show();
       } else {
          $(this).parent().find('.cover').hide();
          $(this).parent().find('.hover').hide();
       }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:46:59.140

将鼠标悬停在目标元素上时，您的事件将无限循环触发。

1.  鼠标进入`.shadow`
2.  `.cover`并`.hover`显示
3.  鼠标`.shadow`因`.hover`显示而离开
4.  `.cover`并且`.hover`被隐藏
5.  （转到 1。除非鼠标不再位于这三个中的任何一个上）

如果你改为使用 mouseenter/mouseleave 和 made`cover`和`hover`children of `shadow`，你就不会有这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:38:09.997

重新编码为新的 jQuery 方法（.on / mouseenter，.delegate 现在已过时），看看这是否具有预期的效果：

```
$(".wrapper").on("mouseenter", ".shadow", function(e) {
   $(this).parent().find('.cover').show();
   $(this).parent().find('.hover').show();
}).on("mouseleave", ".shadow", function(e) {
   $(this).parent().find('.cover').hide();
   $(this).parent().find('.hover').hide();
}); 
```

# php - 返回最后一个文档时的MongoDB速度

> ID：12497965
> 
> 赞同：0
> 
> 时间：2012-09-19T15:31:34.867
> 
> 标签：php, mongodb

我有一个包含大量文档的网络应用程序。用户可以输入 id（有效的 MongoId / ObjectId），但如果用户不输入它，我必须使用最后一个 id 检索对象：

我担心搜索最后一个对象的速度。我目前正在这样做：

```
db.docs.find({"status": 1}).sort({"_id": -1}).limit(1);
//Or in php:
$docs->find(array('status' => 1))->sort(array('_id' => -1))->limit(1)->getNext(); 
```

这不是有点慢吗？首先是查找所有状态为 1 的文档，然后对它们进行排序并限制。有没有更好的方法来获取状态为 1 的最后一个文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:46:01.177

为了使这个性能更好，你可能需要在`{ status: 1, _id: -1 }`.

您还可以使用`findOne`而不是 find 与限制来简化语法：

```
db.docs.findOne({"status": 1}).sort({"_id": -1}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:41:19.580

也许只是将另一个值存储在另一个表中，或者可能存储在内存缓存中，指示系统具有的最高 id 值，即 status=1。在数据库中插入/更新对象时，将需要添加少量逻辑，以将 status=1 的对象的 id 值与当前缓存的 id 值进行比较，如果值更高则更新。然后，您可以使用此缓存值直接访问最新文件。

`find.sort.limit`它有点笨拙，但随着对象数量的增加，它的性能可能比您当前正在执行的操作要好得多。

# php - DATE_FORMAT 省略秒

> ID：12497969
> 
> 赞同：2
> 
> 时间：2012-09-19T15:31:45.727
> 
> 标签：php, mysql

试图将时间 id 和时间本身带回存储在 mysql 中的列表框中。在 myadmin 中运行 sql 运行良好，在代码中尝试一下……不太好。带回未定义的索引错误。谢谢。

```
<?php
function get_times(&$a_class, &$db){
$str_sql =<<<EOT
SELECT timeId, DATE_FORMAT(tSel, '%H:%i')
FROM tb_time24 
ORDER BY timeId
EOT;
if ($query_result = mysql_query($str_sql, $db)) {

    while ($a_result = mysql_fetch_assoc($query_result)) {

        $a = array();
        $a['timeId'] = $a_result['timeId'];
        $a['tSel'] = $a_result['tSel'];

        array_push($a_class, $a);           
    }
}
else {
    $i_result = mysql_errno($db);
}
if(isset($i_result)){

return $i_result;
}   
}
?>
calling it here.

Start Time:<select name="startTime" id="StartTime">
       <?php
            $a_class = array();
            get_times($a_class, $db_handle);
            foreach ($a_class as $a_class) {
print "<option value='".$a_class['timeId']."'>{$a_class['tSel']}</option>\n";
            }
        ?>
        </select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:37:45.997

为格式化的列命名：

```
$str_sql =<<<EOT
SELECT timeId, DATE_FORMAT(tSel, '%H:%i') tSel
FROM tb_time24 
ORDER BY timeId
EOT; 
```

否则返回的数组中的键`mysql_fetch_assoc`将是`timeId`and `DATE_FORMAT(tSel, '%H:%i')`。

# security - 安全登录系统背后的逻辑是什么？

> ID：12497976
> 
> 赞同：1
> 
> 时间：2012-09-19T15:32:17.833
> 
> 标签：security, validation, logic, login-system

如果这个问题与这个网站无关，我真的很抱歉，但我想，因为这里有很多伟大的思想。在不久的将来我将创建一个程序，用户将拥有自己的帐户，所以我开始考虑安全性，这就是为什么我必须问，因为我考虑了一些方面，我我非常担心。

*   显然，我不应该在我的数据库中存储明文密码，用户将从中发送信息的程序会对其进行加密，是我存储的加密密码，还是服务器应该再次加密并存储那个密码？或者其他一些解决方案。

*   验证时，我应该简单地将获得的加密密码与存储的密码进行比较，还是应该进行一些解密？

这几乎涵盖了我应该如何处理密码的疑惑，但我对黑客的潜在问题有疑问。

*   一个人是否有可能拦截世界上正在发生的任何流量，或者只拦截本地网络？

*   假设一个黑客获得了所有发送到服务器的包，密码是加密的，所以他无法获得明文密码，但是不可能重新发送包，从而欺骗服务器登录黑客？

如果最后一个问题的答案是肯定的，那么在我看来，无论你加密得多么好，都无法保证事情的安全，因为数据仍然有用。

有人知道事情是如何运作的吗？也许作为安全管理员（或类似人员）工作，可以告诉他们如何在您的公司中做到这一点（当然不要泄露敏感信息！）？我不要求加密方法，而是要求保护未经授权的人的安全背后的逻辑。

*** 编辑 *** 我实际上找到了如何处理和存储密码，所以这不再是问题。不过，我仍然对重新发送包裹感到好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:16:28.263

我将逐一介绍您的每个观点，并为您应该做的事情提供基线，然后提供“更安全”的做事方式。

> 显然，我不应该在我的数据库中存储明文密码，用户将从中发送信息的程序会对其进行加密，是我存储的加密密码，还是服务器应该再次加密并存储那个密码？或者其他一些解决方案。

您永远不应该在数据库中存储加密密码，使用哈希。
所以做这样的事情的基本方法是在用户密码上使用 MD5 哈希。进行此类散列的更安全方法是使用加密散列，例如 SHA-2。我们不存储加密密码的原因是您可以反向加密，但不能反向哈希。你只能找到碰撞。现在我说 MD5 会在这个社区和安全社区引起很多抱怨。MD5 并不像许多人希望的那样被破坏，但它远不如 SHA-2 安全。 **使用盐**

> 验证时，我应该简单地将获得的加密密码与存储的密码进行比较，还是应该进行一些解密？

参考上述。

> “一个人是否有可能拦截世界上正在发生的任何流量，或者只拦截本地网络？”

两个都。如果我在您的网络上，无论其位置如何，我都在本地网络上。如果您以不安全的方式广播您的数据，我绝对可以拦截它。

> 假设一个黑客获得了所有发送到服务器的包，密码是加密的，所以他无法获得明文密码，但是不可能重新发送包，从而欺骗服务器登录黑客？

我相信你的意思是数据包。密码已加密并不会阻止我获取明文密码。它只会让我慢下来，因为如果我截获了正确的数据包，我可以离线破解密码。众所周知，重放攻击不允许系统“被欺骗”让其他人登录。但是，一旦我检索到明文密码，我就会使用与之关联的用户名并登录。现在这并不是说 SQL 注入之类的东西不允许我规避抓取数据包的需要。因此，除非您进行客户端加密（请 jeebus 不要这样做）并且不能唯一识别进入您系统的请求，否则重放攻击不会起作用。所以假设我是攻击者 A，我截获了一个加密密码。我可以施展魔法并进入系统。现在，如果我们更进一步并应用一个随机生成的值来唯一标识原始数据包，我们可以确定它与预期的输入不匹配。本质上，仅靠加密并不能拯救您。

# python - 密码保护使用 pisa 创建的 pdf 文件

> ID：12497983
> 
> 赞同：1
> 
> 时间：2012-09-19T15:32:41.267
> 
> 标签：python, pdf-generation, pisa, xhtml2pdf

我正在使用 python pisa 模块将 html 文件转换为 pdf。我需要密码保护它。我在比萨模块中到处搜索，找不到解决方案。反正有没有使用python密码保护它？

约束是我想将我的文件保存为 html 格式。根据需要，我想将其转换为 pdf 文件并用密码保护它。我不想使用 reportlab 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:46:33.297

您可以使用[pyPdf](http://pybrary.net/pyPdf/)这对于 pisa 是可选的，但具有加密方法：

> 一个作为 PDF 工具包构建的纯 Python 库。它能够：
> 
> 提取文档信息（标题，作者，...），逐页拆分文档，逐页合并文档，裁剪页面，将多个页面合并为一个页面，**加密和解密PDF文件**。

# performance - html 4 过渡中的 html 5 标签

> ID：12497985
> 
> 赞同：2
> 
> 时间：2012-09-19T15:32:46.993
> 
> 标签：performance, html, validation, browser

出现在 HTML 4 Transitional 中的 HTML 5 标签是否会导致性能问题？会验证吗？

当前文档类型声明：

`<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

使用的 HTML 5 标签：

`<section> <header> <nav>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:35:07.567

> 出现在 HTML 4 Transitional 中的 HTML 5 标签是否会导致性能问题？

如果它们出现在 HTML 5 中，则不再如此。

> 会验证吗？

不，当然不。直到 HTML 5 才添加它们。

# php - 使用 Qtranslate 以正确顺序显示数组的 PHP 多语言站点

> ID：12497989
> 
> 赞同：0
> 
> 时间：2012-09-19T15:32:53.760
> 
> 标签：php, wordpress, multilingual, qtranslate

我正在运行一个带有 qtranslate 的 wordpress 博客。它使用 3 种语言。

我创建了一个自定义菜单（价目表），它使用 post_meta wp 钩子保存到 db。

我使用简单的逻辑来显示列表项，当我只使用一种语言时它工作得很好。但是现在我添加了 qtranslate 我遇到了问题。

让我指导您完成解决过程，以便您更好地了解我的困境！

所以，我有这个代码：

```
 <?php
            if ( get_post_meta($post->ID, 'price_list_items_category1', true) ) :
                $pricelistline = explode("\n", get_post_meta($post->ID, 'price_list_items_category2', true));

                foreach($pricelistline as $value) {
                    $e = explode("|",$value);
                    echo "<li><p>" . $e[0] . " <span>" . $e[1] . "</span></p> <span class=\"listmenuprice\">" . $e[2] . "</span><div class=\"clearfloat\"></div><!-- Very Important --></li>\n";
                }
            endif;
        ?> 
```

$pricelistline 的 print_r 是：

```
Array ( [0] => [:en]Rhine Riesling1|0,75 l|9,50 € [1] => [:ge]ჩიხირთმა|100გ|10ლ [2] => [:ru]шоколад|100грамм|10 L ) 
```

显然我的脚本同时显示所有三种语言......为了解决这个问题，我阅读了关于 qtranslate 的内容，并发现通过使用 _e() qtranslate 将接管这种情况并显示正确的语言并阻止不需要的语言。

于是修改了代码：

```
 <?php
            if ( get_post_meta($post->ID, 'price_list_items_category1', true) ) :
                $pricelistline = explode("\n", get_post_meta($post->ID, 'price_list_items_category1', true));

                print_r($pricelistline);
                foreach($pricelistline as $value) {
                    $e = explode("|",$value);
                    _e( "<li><p>" . $e[0] . " <span>" . $e[1] . "</span></p> <span class=\"listmenuprice\">" . $e[2] . "</span><div class=\"clearfloat\"></div><!-- Very Important --></li>\n");
                }
            endif;
        ?> 
```

注意这里的区别：`_e( "<li><p>" . $e[0] . " <span>" . $e[1] . "</span></p> <span class=\"listmenuprice\">" . $e[2] . "</span><div class=\"clearfloat\"></div><!-- Very Important --></li>\n");`

这似乎奏效了！由于其他语言实例消失了，所以在英文页面上我只会看到英文版本等。

问题是现在我在查看源代码时发现了一些虚假的 html。

HTML 输出现在看起来像这样：

```
<ul class="listmenuitems" id="listingmenu_1">
<li><p>Rhine Riesling1 <span>0,75 l</span></p> <span class="listmenuprice">9,50 €
</span><div class="clearfloat"></div><!-- Very Important --></li>
<li><p><li><p>
</ul> 
```

注意：`<li><p><li><p>`这是剩下的两种语言的两个开头元素。我的猜测是 $e[1] 在未显示的语言中被卡住了，这就是语言似乎可以工作的原因！但实际上有一些 php 错误。

我做了`tail -f /var/log/apache2/error_log`，但我没有看到任何 php 错误。

那么这里发生了什么？你能帮忙吗？我只需要摆脱额外的 html 元素。其余的我的修改似乎奏效了！

作为一个长帖子出来，但我希望我提供了所有细节。

谢谢阅读 ：）

var_dump

```
array(3) { [0]=> string(37) "[:en]Rhine Riesling1|0,75 l|9,50 € " [1]=> string(43) "[:ge]ჩიხირთმა|100გ|10ლ " [2]=> string(38) "[:ru]шоколад|100грамм|10 L" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:44:27.380

我不知道 _e 是如何屏蔽其他语言的，但是当它找到错误语言的单词时，它看起来就像是会掉线，我建议您执行以下操作之一：

变体 1：不要使用 foreach，而是根据语言为数组使用固定索引

变体 2：自己检查数组的第一个字母，看它是否匹配正确的语言，如果是，则使用旧的 echo 代替。

变体 3：找到一个函数，它只告诉您该语言是否是您正在寻找的语言，并根据该条件回显输出

更新：看起来 Variant3 的功能可能是`__`（我认为这是两个下划线）

# performance - 希望提高 Android ViewPager UI 性能

> ID：12497991
> 
> 赞同：2
> 
> 时间：2012-09-19T15:32:57.710
> 
> 标签：performance, android-viewpager, android-tablelayout

我的 Android 应用程序使用 a`ViewPager`在每个页面上显示项目列表。每个列表行都由 a 组成`TableLayout`，依次由三个`TableRows`组成，每个有几个`TextViews`，一个有一个`ImageView`。

一切都很好，但是随着添加更多页面（以及列表），UI 会陷入困境，尤其是在水平分页时（在垂直列表滚动期间更少）。我正在寻找如何提高 UI 性能。

使用层次视图，只有`ViewPager`itef 显示高布局和绘制时间（即红色停止灯图标），每页有 10 页和 4-20 个列表项（行）。布局似乎已经很浅了，但我想知道是否可以进一步改进。

一些伪代码给出布局结构的概念：

**每个列表行都使用如下结构的 TableLayout：**

```
<TableLayout>
    <TableRow>
        <TextView/ >
        <TextView/ >
        <TextView/ >
    </TableRow>

    <TableRow>
        <ImageView/>
        <TextView/ >
        <TextView/ >
        <TextView/ >
    </TableRow>

    <TableRow>
        <TextView/ >
        <TextView/ >
        <TextView/ >
    </TableRow> 

    <TableRow>
        <TextView/ >
        <TextView/ >
    </TableRow> 

    <TableRow >     
        <TextView/ >
        <TextView/ >
        <TextView/ >
        <TextView/ >
    </TableRow>     
</TableLayout> 
```

主要活动的布局使 support 膨胀`ViewPager`。我`ListFragment`在每个`ViewPager`页面上都使用，所以当创建一个新页面时，`ListFragment`代码会膨胀`ListView`布局，这反过来会膨胀`TableLayout`上面显示的内容。

我的具体问题：

*   我应该`TableLayout`用 a替换`RelativeLayout`并尝试摆脱一个深度层吗？由于我`TextViews`以五行显示我的，每行有 2-4 个不同间距的字段，我怀疑这可能会变得棘手。但即使我能完成它，它会给我带来什么，因为层次结构视图只显示每个整个表格布局的“绿灯”图标
*   我正在使用`FragmentPagerAdapter`. 使用它在内存中拥有多达 10 页是不是很疯狂？我知道使用这个（或类似的东西）时建议不超过 3-4 页。我已经尝试过`FragmentStatePagerAdapter`，但最终在分页时花费了太多时间/资源/电池来不断地从 Internet 检索数据。（我知道，也许我需要缓存它......）。我需要保留视图的能力，并且一直在玩`setOffScreenPageLimit`，将其设置为 10，以便所有视图都保留在内存中。

感谢任何建议，因为我对 Android 还是比较陌生，谢谢。

# javascript - JavaScript 对象代码缓存：哪些断言是错误的？

> ID：12497995
> 
> 赞同：15
> 
> 时间：2012-09-19T15:33:10.467
> 
> 标签：javascript, performance, compiler-construction, v8

因为我在工程师身边工作了这么多年，我知道如果我不提供上下文，我只会得到一百个“你想完成什么？”形式的答案。我将给出激发我的问题的背景。但**不要混淆我所问问题的背景上下文**，这与使对象代码在 padge 请求之间无法缓存的 JavaScript 语义特别相关。我不会给关于如何让我的 webapp 更快的建议打分。这与我的问题完全相切，这可能只有从事过 JavaScript 编译器或至少是动态语言编译器的人才能回答。

背景：

我正在尝试提高 Web 应用程序的性能。在它的众多资源中，它包含一个巨大的 JavaScript 文件，它有 40k 行和 130 万个预压缩字符。缩小后它仍然很大，并且在同步加载时它仍然增加了大约 100ms 到 window.onload 事件，即使源被缓存在客户端也是如此。（通过查看请求日志并观察它没有被请求，我已经最终排除了资源没有被缓存的可能性。）

在确认缓存后仍然很慢后，我开始研究主流浏览器中的JavaScript缓存，并了解到它们都没有缓存目标代码。

* * *

我的问题是基于这项研究的一些假设性断言的形式。如果这些断言是错误的，请反对。

1.  JavaScript 对象代码不会缓存在任何现代浏览器中。

    “对象代码”可以指任何东西，从表示简单线性化分析树的字节代码一直到[本机机器代码](https://developers.google.com/v8/design#mach_code)。

2.  Web 浏览器中的 JavaScript 对象代码很难缓存。

    换句话说，即使您在外部标记中包含缓存的 JS 源文件，在页面上包含该脚本也会产生线性成本，即使该脚本仅包含函数定义，因为所有该源都需要被编译成目标代码。

3.  JavaScript 对象代码很难缓存，因为必须评估 JS 源代码才能编译。

    语句有能力以难以静态分析的动态方式影响下游语句的编译。

    3a。(3) 是正确的，主要是因为 eval()。

4.  评估会对 DOM 产生副作用。

5.  *因此*，需要在每个页面请求上编译 JavaScript 源代码。

额外的问题：任何现代浏览器是否为缓存的 JS 源文件缓存解析树？如果不是，为什么不呢？

编辑：如果所有这些断言都是正确的，那么我会给任何可以**解释为什么它们是正确的人的答案，**例如，通过提供一个无法缓存为目标代码的 JS 代码示例，然后解释原因不是。

我很欣赏有关如何从这里开始以使我的应用程序更快的建议，我大多同意他们的看法。但我试图填补的知识空白与 JS 对象代码缓存有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T15:51:10.240

你是对的，它是动态编译和评估的。
你是对的，它必须是。

您的追索权不是试图使编译时间更小。
它需要从一开始就减少加载，做最少的工作以使用户体验可见，然后做最少的工作以模块化方式添加核心功能，然后是懒惰的（在计时器上或根据要求由最终用户）加载附加特性、功能和繁荣。

如果你的程序是 10,000 行程序代码，那么你就有问题了。
我希望这不是***程序***性的。

所以分手吧。这意味着较慢的第一页加载。但是在后续请求中，这可能意味着用户认为“正在运行”的响应时间要快得多，即使要达到 100% 的功能需要更长的时间。

这完全是关于用户对“速度”和“响应能力”的感知，而不是关于 100% 功能的最短线路。

单线程格式的 JavaScript 不能同时做到这一点***并***做出响应。
所以先反应过来。

PS：***添加一个引导程序***。***智能***引导。它应该能够辨别需要哪些功能。
RequireJS 用于加载依赖项。
不是为了弄清楚你的依赖关系是什么。

一个额外的好处——你可以在引导程序上设置一个短期缓存，它将指向版本化的模块。这有什么好处？好吧，如果您需要更新模块，在引导程序中更新版本是一个简单的过程。当引导程序的缓存过期时，它指向新模块，该模块可以有无限的生命周期（因为它有一个不同的名称——版本化或时间戳）；

# c# - 切换 Windows 时 KeyBinding 不起作用

> ID：12497996
> 
> 赞同：3
> 
> 时间：2012-09-19T15:33:13.527
> 
> 标签：c#, .net, binding, input, key-bindings

我的 MainWindow 有一些 KeyBindings：

```
<Window.InputBindings>
   <KeyBinding Command="{Binding NewFileCommand}" Key="{Binding NewFileCommand.Key}" Modifiers="{Binding NewFileCommand.Modifiers}"  />
</Window.InputBindings> 
```

他们正在工作，只要我点击某个窗口的内容。但是，如果我使用 Alt+Tab 在应用程序之间切换（比如说 MS Word 和我的应用程序），那么在我再次单击视图中的某个位置之前，快捷方式将不再起作用。通过鼠标在边框上选择应用程序窗口时相同。

我怎样才能让他们工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:52:03.353

在我的 repro 中，我使用了MVVM [Light的](http://mvvmlight.codeplex.com/)[RelayCommand](http://blog.galasoft.ch/archive/2009/09/26/using-relaycommands-in-silverlight-and-wpf.aspx)，效果很好。我猜你正在使用别的东西。尝试在您的窗口中添加此代码：

```
private void Window_Activated(object sender, EventArgs e)
{
    System.Windows.Input.CommandManager.InvalidateRequerySuggested();
} 
```

这告诉命令框架发生了一些变化，它应该重新评估每个命令的 CanExecute 状态。

# gxt - 如何在我的 GWT 项目中使用 GXT 图表

> ID：12497998
> 
> 赞同：1
> 
> 时间：2012-09-19T15:33:15.087
> 
> 标签：gxt

我将第一次使用 GXT Charts

我只是从这里获取代码

```
 http://www.sencha.com/examples/#ExamplePlace:columnchart 
```

我的其他 GXT 小部件正在工作（已添加 GXT jar 和
`<inherits name='com.sencha.gxt.ui.GXT'/>`）

但是此导入给出错误为“未定义”

```
 import com.sencha.gxt.chart.client.chart.Chart;

   Error:   The import com.sencha.gxt.chart cannot be resolved 
```

我必须为 CHARTS 添加一些额外的 jar 吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:36:09.597

我们的项目中有一个单独的 gxt-chart jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T10:30:27.967

下载 jar 并将其添加到您的项目中

[http://www.java2s.com/Code/JarDownload/gxt/gxt-chart-3.0.1.jar.zip](http://www.java2s.com/Code/JarDownload/gxt/gxt-chart-3.0.1.jar.zip)