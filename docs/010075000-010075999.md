# StackOverflow 问答 10075000-10075999

# asp.net - IIS 不显示 ASPX 页面

> ID：10075001
> 
> 赞同：0
> 
> 时间：2012-04-09T14:48:55.040
> 
> 标签：asp.net, iis

运行 IIS 时，我在所有 ASPX 页面上都收到以下错误。ASP.NET 已注册 2.0（扩展名为 3.5）和 4.0。我正在运行 2.0。我缺少一些设置吗？我不确定需要哪些信息来更好地提供帮助，所以让我知道您需要什么，我会将其发布为编辑。

## “/”应用程序中的服务器错误。

你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

***错误信息***

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

[NullReferenceException：对象引用未设置为对象的实例。] System.Web.Hosting.ISAPIWorkerRequestInProc.GetServerVariable(String name) +784 System.Web.Security.WindowsAuthenticationModule.OnEnter(Object source, EventArgs eventArgs) +117 System. Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +68 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T14:56:47.947

通常`NullReferenceException`，通过调试在代码中调试 a 相当容易，但堆栈跟踪似乎是从框架代码*开始*的，因此失败的不是*您的*代码。

IIS 上的 .NET 安装很可能存在问题。（我认为它开始的事实`ISAPIWorkerRequestInProc`是最大的线索。那是代码与工作进程交互的地方。）尝试运行：

```
aspnet_regiis.exe -i 
```

（[这里的信息](http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx)）重新安装框架的 IIS 组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:53:46.523

我在部署我的应用程序时遇到了确切的问题，并花了一段时间才发现原因是应用程序池上运行的 asp.net 版本。

在我更改为 4.0 后它开始工作

我希望这也对你有用

# delphi - 显示 JPEG，适合大于控件的图像，因此它恰好适合 Timage 控件边界

> ID：10075007
> 
> 赞同：4
> 
> 时间：2012-04-09T14:49:33.893
> 
> 标签：delphi, timage

如果我从这样的文件加载图像`Image1.Picture.LoadFromFile(imagePath);`并且我加载的 JPEG 比`Image1`哪个大`TImage`- 我如何缩放它以适应？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T14:55:41.033

将控件的[`Stretch`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ExtCtrls.TImage.Stretch)属性设置为。`TImage``True`

> 指示是否应更改图像以使其完全符合图像控件的边界。
> 
> 将 Stretch 设置为 true 以使图像采用图像控件的大小和形状。当图像控件调整大小时，图像也会调整大小。Stretch 独立调整图像的高度和宽度。因此，与简单的放大变化不同，如果图像控件与图像的形状不同，拉伸会扭曲图像。

如本文档所示，相关的替代方法是[`Proportional`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.ExtCtrls.TImage.Proportional)属性。

> 指示是否应更改图像而不失真，以使其适合图像控件的边界。
> 
> 将 Proportional 设置为 true 以确保图像可以在图像控件中完全显示，而不会出现任何失真，例如 Stretch 属性。当比例为真时，太大而无法放入图像控件的图像将按比例缩小（同时保持相同的纵横比），直到它们适合图像控件。太小的图像可以正常显示。也就是说，Proportional 可以降低图像的放大倍率，但不会增加它。
> 
> 当图像控件调整大小时，图像也会调整大小。

# iphone - iPhone html 5 视频 asp.net IIS

> ID：10075008
> 
> 赞同：1
> 
> 时间：2012-04-09T14:49:39.910
> 
> 标签：iphone, asp.net, iis, html5-video

我在一个页面上有一个视频元素，里面有一个 mp4、ogg 和后备闪存。在 IE9 上，html5 视频可以正常播放，但在 iPhone 上，视频无法播放。我已经在 web.config (root) 和 IIS 中的站点级别和服务器级别设置了 mimetypes...我不明白为什么它不起作用...我们最近将站点移至新服务器并我认为它在旧服务器上的 iPhone 上运行。有任何想法吗？

**更新** 我忘了提到我已经尝试通过保管箱播放相同的视频文件，它工作正常。我不确定 iPhone 上的 HTML 5 视频标签是否需要更具体的 MP4 格式，但如果视频“离线”播放，它不应该在视频标签中播放吗？因此，出于这个原因，我认为这不是编码问题。源代码没有改变。所以我认为这是一个IIS的事情......

**更新**

这是源代码：

```
<video controls="controls" autoplay="autoplay" width="640" height="360">
    <source src="https://www.MyWebsiteName.com/Images/movies/MyMovieName.mp4" Type="video/mp4" />
    <source src="https://www.MyWebsiteName.com/Images/movies/MyMovieName.ogg" Type="video/ogg" />
    <object width="640" height="360" id="movie_name" align="middle">
        <param name="movie" value="../Images/movies/MyMovieName.swf" />
        <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="../Images/movies/MyMovieName.swf" width="320" height="180">
            <param name="movie" value="movie_name.swf" />
        <!--<![endif]-->
            Please upgrade your web browser. <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home">Click here</a>
        <!--[if !IE]>-->
            </object>
        <!--<![endif]-->
    </object>
</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:55:31.717

我建议将 Web 调试器附加到 iPhone。然后，您可以拦截它发出的请求，并从那里您将能够验证来自 Web 服务器的响应。

它可能只是没有接收到正确的视频元素。

# vb.net - 下面的 Visual Basic 代码应该插入到 Windows 窗体的什么位置？

> ID：10075009
> 
> 赞同：0
> 
> 时间：2012-04-09T14:49:40.230
> 
> 标签：vb.net, visual-studio-2010

## 我的问题

我读了几章，研究了几个网站，但没有一个能满足我的问题，我应该把这个 If 语句放在哪里

```
Public LoginName As String
Public Password As String

LoginName = txtUserName.Text
Password = txtPassword.Text

If (LoginName = "" Or Password = "") Then
        btnSubmit.BackgroundImage = Image.FromFile("G:\Product\ElderlyEmail\ElderlyEmail\Images\stopbutton.gif")
    Else
        btnSubmit.BackgroundImage = Image.FromFile("G:\Product\ElderlyEmail\ElderlyEmail\Images\GoButton.gif")
    End If 
```

这个想法是，一旦用户将文本输入到两个文本框中，按钮上的图像就会从禁止进入按钮变为绿色提交按钮，但不确定它将进入哪个声明以及哪个元素。我尝试了几个表单元素和声明，但没有达到我想要的效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:13:50.900

尝试[Validated 和 Validating](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)事件。它们是专门为处理这种情况而设计的，并且会在你想要它们时触发，当你指定`CausesValidation=True`. OnLostFocus 对于这种工作来说太不精确了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:16:22.190

> 这个想法是，一旦用户将文本输入到两个文本框中，按钮上的图像就会从禁止按钮变为绿色提交按钮

您可以使用许多[方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.textbox_methods.aspx)来实现此行为。也许文本框的OnLostFocus[更](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onlostfocus.aspx)`txtPassword`合适，因为您希望在用户完成输入后进行验证。您还可以在每个文本框上使用[OnTextChanged](http://msdn.microsoft.com/en-us/library/z0bhdw6s.aspx)方法，这样每次用户输入时都会运行验证。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-09T15:24:27.780

我可能会用javascript来做

```
 <input type="text" id="loginName" name="loginName" value="" onchange="showGo();" />
    <input type="text" id="loginPasword" name="loginPassword" value="" onchange="showGo();" />

    <table>
    <tr id="nogo">
      <td><input type="image" src="G:\Product\ElderlyEmail\ElderlyEmail\Images\stopbutton.gif" width="60" height="60" /></td>
    </tr>
    <tr id="go">
      <td><input type="image" src="G:\Product\ElderlyEmail\ElderlyEmail\Images\GoButton.gif" width="60" height="60" /></td>
    </tr>

    <script type="text/javascript">

    var LName = '';
    var LPass = '';

    showGo()
    {
      LName = document.getElementById('loginName').value;
      LPass = document.getElementById('loginPass').value;

        if (LName != '' && LPass != '')
         {
           document.getElementById('go').style.display = 'inline';
           document.getElementById('nogo').style.display = 'none';
         }
        else
         {
           document.getElementById('go').style.display = 'none';
           document.getElementById('nogo').style.display = 'inline';
         }

    }

</script> 
```

# integration - 如何将 FuelPHP 与 Behat 集成？

> ID：10075013
> 
> 赞同：2
> 
> 时间：2012-04-09T14:49:52.233
> 
> 标签：integration, fuelphp, behat

我正在寻找一种将我的 FuelPHP 安装与 behat 集成的方法。我已经有一个 /features/ 文件夹和 Behat 在我的 FuelPHP 目录中工作所需的文件，并且我能够“玩弄”一些非常基本的东西。

我正在寻找的是一种让 FuelPHP 核心函数和类与 Behat 一起工作的方法。

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:40:19.890

以下是我目前得到的信息：我发现您基本上也可以将`bootstrap_phpunit.php`FuelPHP 附带的文件与 Behat 一起使用。

我创建了一个名为`fuel/app/tests`并在其中运行的目录`behat --init`（它创建了 basic `FeatureContext.php file`）。然后我创建了一个包含`fuel/app/tests/features/bootstrap/Bootstrap.php`以下内容的文件：

```
<?php
$_SERVER['doc_root'] = '../..';
$_SERVER['app_path'] = 'fuel/app';
$_SERVER['core_path'] = 'fuel/core';
$_SERVER['package_path'] = 'fuel/packages';

require_once $_SERVER['doc_root'] . '/core/bootstrap_phpunit.php'; 
```

一旦我这样做了，我似乎能够从 Behat 上下文中加载 FuelPHP 类。不过，我并没有花太多时间在上面，也没有测试过单元测试控制器之类的东西。我将所有业务逻辑放在一个单独的类中，以便更轻松地对其进行单元测试。

# jquery - jquery ":input" 选择器的困难

> ID：10075015
> 
> 赞同：0
> 
> 时间：2012-04-09T14:50:03.013
> 
> 标签：jquery, forms, input, selector, onsubmit

我有以下代码：

```
<h3> Your Profile </h3>
The information below is what we have on file for you.

<form id="profileform" name="profileform" action=""> 
<table>

<?php
$profile_array = select_profile_data($_SESSION['id']);
while (list($key, $value) = each($profile_array)) {
if(!in_array($key,$dont_display_list,true)) {
 echo '<tr><td>'.$key.'</td><td><input type="text" name=' . $key . ' value="'.$value.'"</td></tr>';
}
}
?>
</table>
<input type="button" value="submit changes" name="submit" onClick="button_click('profileform')">
</form>

<script type='text/javascript'>

function button_click(formname) {
var fullselect = formname + " :input";
alert(fullselect);
var values = $(fullselect);
alert(values.size());
$("#content").html('<span>Loading...</span>');
$("#content").load('profile.php', values, function(response, status, xhr) {
        if (status == "error") {
            var msg = "Sorry but there was an error: ";
            $("#content").html(msg + xhr.status + " " + xhr.statusText);
        }
    });
} 
```

我在“fullselect”处的警报向我显示了预期的 jquery 选择器字符串“profileform：input”。但是，我的“值”变量总是返回“0”的大小。虽然表格中肯定有“输入变量”。关于我在这里出错的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:52:17.803

`#`您从变量的开头错过了`formname`，因为它是`id`形式的：

```
var fullselect = "#" + formname + " :input"; 
```

此外，该变量将是一个 jQuery 对象数组，因此您无法使用该方法`values`将 accross 传递给您的 PHP 。`load()`最好的办法是对`serialize()`整个表单进行传递：

```
var values = $(fullselect).serialize(); 
```

# javascript - Onclick 选择然后关闭

> ID：10075018
> 
> 赞同：0
> 
> 时间：2012-04-09T14:50:24.900
> 
> 标签：javascript

当用户单击文本字段时，我正在使用基本代码突出显示文本字段中的文本：

```
<input type="text" id="search_for" name="searchTerm" onclick="this.select()"> 
```

这很好，但您只能选择删除，这意味着您实际上无法在所选文本的中间单击以在已经存在的单词/字符中间添加一些内容。

场景...如果用户搜索“红色汽车”，他们应该能够点击突出显示的框，因此点击删除并搜索“蓝色汽车”。或者，他们可能希望单击输入并将搜索更改为“大红色汽车”。

是否可以单击然后通过再次单击取消突出显示？或者我可以使用什么其他方法？

或者我应该在页面加载时选择该字段，然后单击取消选择？这甚至可能吗？

我已经为此进行了广泛的搜索，但还没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:03:02.490

您可以跟踪输入中的点击次数，并基本上切换`select()`与`focus()`. 它可能不完全是您所指的，但它是您*可以做*的事情。

***[请参阅工作 jsFiddle 演示。](http://jsfiddle.net/DotNetScott/nXf9S/)***

## HTML：

```
<input type="text" 
       id="search_for" 
       name="searchTerm" 
       onclick="searchForClick(this);" 
       value="text text text text" />​ 
```

## JavaScript：

```
searchForClickCount = 0;

function searchForClick(el) {

    if (searchForClickCount === 0) {
        el.select();
        searchForClickCount++;
    } else if (searchForClickCount >= 0) {
        el.focus();
        searchForClickCount = 0;
    }

}​ 
```

# html - XHTML5 和自定义命名空间未通过验证

> ID：10075019
> 
> 赞同：0
> 
> 时间：2012-04-09T14:50:29.613
> 
> 标签：html, validation, xhtml, semantics, markup

此示例代码不会通过 w3c 验证器。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:foo="http://foo.com/fooxml">
<head>
    <title>Foo</title>
</head>
<body>
    <foo:TabControl>

    </foo:TabControl>
</body>
</html> 
```

我错过了什么？我需要做什么才能使命名空间工作并通过验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:31:23.520

您的 DTD ( `http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd`) 是“XHTML 1.0 Strict”而不是“XHTML 1.0 Strict + Foo”。

如果您想验证，您需要找到或创建一个包含您正在使用的所有元素和属性的 DTD，并将 Doctype 更改为指向它。

W3C 的[推荐 Doctype](http://www.w3.org/QA/2002/04/valid-dtd-list.html)列表包括许多多个命名空间文档（例如 XHTML + MathML + SVG），您可以将它们用作创建自己的示例。

# jakarta-ee - JSP taglib 如何找到.tld？

> ID：10075026
> 
> 赞同：2
> 
> 时间：2012-04-09T14:50:50.193
> 
> 标签：jakarta-ee, jsp-tags, tld

当我们使用下面的编译器指令并且我不在 web.xml 中使用时

```
<%@ taglib uri="/struts-tags" prefix="s"%> 
```

tomcat 会用它做什么？taglib 如何找到 .tld？它有搜索顺序吗？我想知道原理。谢谢~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:01:06.753

Here's the way it works:

The JAR file that contains your tag library has a .tld file, which in turn has a `<uri>` tag with a string that needs to match the value in your JSP.

For example, the standard JSTL JAR has a c.tld file with this URI:

```
<uri>http://java.sun.com/jsp/jstl/core</uri> 
```

That's the URI that you need to use the core JSTL tag library.

It has nothing to do with where you put the JARs and everything to do with the .tld.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T18:05:25.657

容器在你的Web应用程序中搜索所有.tld，首先在WEB-INF目录中，然后在WEB-INF的所有子目录中，如果有jar文件他在里面搜索，如果有tld文件。之后，容器映射每个使用 tld 文件找到的 uri。

# c# - 在控制台应用程序上为 XML 文件设置 ELMAH

> ID：10075027
> 
> 赞同：1
> 
> 时间：2012-04-09T14:50:58.777
> 
> 标签：c#, c#-4.0, logging, elmah

我正在尝试在我的控制台应用程序中使用 ELMAH。我只是想学习绳索，所以请原谅我的 .net 经验不足。我只想创建一个非常简单的控制台应用程序并使用 ELMAH 来登录 XML 文件。我已经从 NuGet下载并安装了[“Elmah on XML Log” 。](http://nuget.org/packages/elmah.xml)所以，我认为它在我的参考文件夹中是活跃的。我已按照[此链接](http://naspinski.net/post/Installing-ELMAH-for-simple-error-logging.aspx)中的说明进行操作：

当然，我已经稍微修改了它以使用 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <sectionGroup name="elmah">
      <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah"/>
      <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
      <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
     <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah"/>
     <section name="errorTweet" requirePermission="false" type="Elmah.ErrorTweetSectionHandler, Elmah"/>
   </sectionGroup>
 </configSections>
<elmah>
<security allowRemoteAccess="yes" />
<errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="C:\temp\elmah_logs\" />
</elmah>
<system.web>
<httpModules>
  <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah"/>
</httpModules>

<httpHandlers>
  <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
</httpHandlers>
</system.web>
 <location path="elmah.axd">
<system.web>
  <authorization>
    <deny users="?"/>
  </authorization>
</system.web>
 </location> 
```

但是在我的主程序中，我无法访问参考并开始使用 ELMAH。这是我非常简单的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using Elmah;  // Complains that missing a directive or assembly

namespace Test_004
{
class Program
{
    static void Main(string[] args)
    {
        int y = 4;
        int z = 0;
        try
        {
            var x = y / z;
        }
        catch (Exception ex) ErrorSignal.FromCurrentContext().Raise(ex);  // because of above, this fails
    }
}
} 
```

我在这里想念什么？在此先感谢 .Net n00bie。

也许，以下错误可能会有所启发：

> 错误 1 ​​找不到类型或命名空间名称“Elmah”（您是否缺少 using 指令或程序集引用？）
> 
> 警告 2 引用的程序集“Elmah”无法解析，因为它依赖于“System.Web，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a”，它不在当前目标框架“.NETFramework,Version”中=v4.0，配置文件=客户端”。请删除对不在目标框架中的程序集的引用或考虑重新定位您的项目。测试_004
> 
> 警告 3 引用的程序集“Elmah”无法解析，因为它依赖于“System.Data.OracleClient，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”，它不在当前目标框架“.NETFramework”中,版本=v4.0,配置文件=客户端”。请删除对不在目标框架中的程序集的引用或考虑重新定位您的项目。测试_004

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T20:04:18.443

我的猜测是您需要更改控制台应用程序以使用完整框架而不是客户端框架。您可以从控制台应用程序的属性页中执行此操作（我认为它是构建选项卡，但我无法检查，因为我没有在此处安装 VS）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T15:18:52.913

ELMAH 是为 ASP.NET 应用程序设计的，而不是控制台应用程序。

[但是，这里](https://stackoverflow.com/questions/841451/using-elmah-in-a-console-application)有一个类似的问题，并就如何将其用于控制​​台应用程序提出了一些建议。

# sql - 在 Access 的事件过程中运行查询？

> ID：10075030
> 
> 赞同：5
> 
> 时间：2012-04-09T14:51:02.587
> 
> 标签：sql, ms-access, vba

我的表单中有一个带有成员 ID 的组合框，当我选择成员 ID 时，我希望将我的 txtLastName 文本框设置为成员的姓名。我知道为 SQL 查询写什么，但我不知道如何运行该查询并获取结果名称并将其放入字符串中。

怎么可能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:08:50.537

Access 为此提供了“开箱即用”的解决方案，无需额外查询。这个想法是使用组合框中的多个列，如下所示（在代码中）：

> Me.ComboBox.Column(N)

看一下这个：

[http://www.techrepublic.com/blog/msoffice/automatically-fill-in-access-text-boxes-based-on-a-combo-box-selection/1330](http://www.techrepublic.com/blog/msoffice/automatically-fill-in-access-text-boxes-based-on-a-combo-box-selection/1330)

# cloud - 桉树图像格式，实例克隆和自动缩放

> ID：10075031
> 
> 赞同：0
> 
> 时间：2012-04-09T14:51:08.443
> 
> 标签：cloud, eucalyptus

我对桉树不熟悉，并且对图像、实例、克隆以及如何使用桉树实现自动缩放有疑问。我相信 Eucalyptus 支持许多虚拟机管理程序，例如 Xen、Vmware ESXi。因此，如果我使用 eucalyptus 和 Xen、ESXi 等混合管理程序创建私有云，那么在这种情况下，eucalyptus VM 映像的映像格式是什么？它是否特定于用于构建私有云的管理程序？还是选择 vm 与节点一起运行时转换为特定 hypervisor 格式的 eucalyptus 系统的特定格式？如果是这样，这项任务需要多少时间以及使用什么技术来转换图像？如何在混合环境中克隆图像以实现类似亚马逊的实例自动缩放功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T22:59:20.080

Eucalyptus 使用与 Amazon 的 AWS 相同的约定，即您使用“根”分区。格式是原始的，也就是说，没有真正的格式，只是你放在分区上的任何文件系统（即 ext2、ext3 等......）。

如果您想让您的镜像在虚拟机管理程序和云中可移植，您将必须确保您的镜像能够在不同的虚拟机管理程序和不同的内核之间正确启动。前者意味着你必须确保你拥有他们管理程序所需的所有驱动程序，后者意味着你必须包含所有需要的内核模块（通常只有云管理员上传内核，所以你必须适应）。

Eucalyptus 负责内部转换（例如，KVM 想要启动磁盘映像，xen 关闭分区，vmware 想要自己的格式），但它对用户是透明的。

如果您使用的是 Windows 映像，您将上传整个磁盘，而不仅仅是分区：在这种情况下，需要硬件虚拟化，并且您将隐式使用磁盘映像上的内核。当从虚拟化环境运行时，您仍然存在确保映像包含映像所需的所有驱动程序的问题。

# c++ - freetype 函数可以接受 Unicode 文件名吗？

> ID：10075032
> 
> 赞同：3
> 
> 时间：2012-04-09T14:51:10.517
> 
> 标签：c++, visual-studio, unicode, freetype

我有一个使用 freetype 的 MSVC 项目，现在我正在尝试将其移至 Unicode。但是 freetype 函数不接受文件路径的 LPCTSTR 参数，它们需要“const char *”。所以像这样的代码

```
 WINDOWS_FONT WindowsFont;
    // ....
    FT_New_Face (pLibrary, WindowsFont.pszFileName, i, &face); // WindowsFont.pszFileName is LPTSTR 
```

当项目是 ascii 时曾经工作，但当它是 Unicode 时不再工作。有没有办法让 freetype 接受 Unicode 文件名，一些预处理器定义可能将其切换为 unicode？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T15:09:39.307

C++ 标准 (2003) 中没有 wfopen。由于 freetype 是可移植的，它只使用 fopen，它只能接受 const char* 文件名。因此，要么将文件加载到内存（或对其进行内存映射），然后使用 FT_New_Memory_Face 创建字体，要么将 wchar_t pszFileName 转换为 8 位编码，由于无法转换，可能会丢失字符。

**在 linux 上**，您可以尝试使用`setlocale`fopen 将接受 UTF8 字符串，将 wchar_t 字符串转换为 UTF8。但是**在 Windows 上[它不起作用](http://msdn.microsoft.com/en-us/library/x99tb11d%28v=vs.90%29.aspx)**。所以要么将文件加载到内存，要么将 pszFileName 转换为 8 位编码，然后将其传递给 FT_New_Face。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:54:10.857

您可以使用 FT_Open_Face 方法，它需要一个 FT_Open_Args 结构作为参数。在 FT_Open_Args.stream 中，您可以设置自定义读取和关闭回调，FreeType 可以从您想要的任何流中读取字体数据。

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:31:34.673

您最好的选择可能是遵循框架的约定和 import `tchar.h`，然后`_tfopen`改用（并切换到`LPCTSTR`,`_T("your_string")`等）。这将使您几乎无需更改即可为 Linux 和 Windows 编译相同的代码，同时在代码中支持 UTF-16 或 UTF-8。

# jquery - 可以增长和缩小的DIV-Grid？

> ID：10075034
> 
> 赞同：0
> 
> 时间：2012-04-09T14:51:22.887
> 
> 标签：jquery, html, css

所以下面我有我的页面。它生成 4 个 div 框 (2x2) 并动态地为它们提供 ID。我希望能够添加等于长度/高度的行/列。因此，如果我添加一列，它将在另外 2 个 div 框中，并自动将“换行符”类放在正确的 div 上以格式化内容。但我也需要它反向工作，所以如果行/列被删除，它会保持一切井井有条。

```
<html>
    <head>
    <script src="jquery.js"></script>
    <script>
        $(function () {
            $('#btn').click(function(){
                GenerateIDs();
            });

            // Generates IDs dynamically
            function GenerateIDs(){
                var row = 1;
                var col = 0;
                $('body div div').each(function(){
                    if ($(this).hasClass('newline'))
                        {
                        row += 1;
                        col = 1;
                        }
                    else
                        col += 1;
                    $(this).attr('id', row + '-' + col);
                });
            }
        });
    </script>
    <style>
        body div div {background:gray; border:1px solid black; float:left; height:50px; margin:5px; width:50px;}
        .newline {clear:left;}
    </style>
</head>

<body>
    <div>

        <div></div>
        <div></div>
        <div class="newline"></div> <!-- Ideally dynamic from the start -->
        <div></div>

    </div>
    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    <input id="btn" type="button" value="JQuery" />
</body>
</html> 
```

因此，如果我添加列...

```
 <div>

        <div></div>
        <div></div>
        <div></div>
        <div class="newline"></div>
        <div></div>
        <div></div>

    </div> 
```

然后碰巧加了一行...

```
 <div>

        <div></div>
        <div></div>
        <div></div>
        <div class="newline"></div>
        <div></div>
        <div></div>
        <div class="newline"></div>
        <div></div>
        <div></div>

    </div> 
```

# codeigniter - ExpressionEngine 裁剪和调整大小，保持比例

> ID：10075036
> 
> 赞同：0
> 
> 时间：2012-04-09T14:51:27.107
> 
> 标签：codeigniter, expressionengine

我目前正在 ExpressionEngine 中开发一个站点，该站点允许用户上传文章和幻灯片的照片。我已经尝试过 EE 提供的内置调整大小和裁剪功能，但没有一个能满足我的需要。

我有一个 620px X 200px 的区域，需要用上传的图像填充。只要比例保持受限并且最终结果填充 620x200 区域，就可以根据需要调整图像大小和裁剪图像。

我有什么方法可以在 EE 中执行此操作，还是我必须找到某种模块/插件来为我执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:08:50.750

我没有在 vanilla EE 代码中执行此操作的经验，但这仅仅是因为我在每个购买[CE Image](http://www.causingeffect.com/software/expressionengine/ce-image/user-guide/)插件的网站上都投入了 15 美元。它对此以及许多其他图像处理提供了令人难以置信的支持。如果您不反对花几个硬币，那就试一试吧！你不会失望的。

但是，如果您*正在*寻找免费选项，我会使用 EE 的本机[图像操作](http://expressionengine.com/user_guide/cp/content/files/file_upload_preferences.html#image-manipulations)。再说一次，我必须说我从来没有使用过这个选项，因为我更喜欢 CE Image，但它是免费的，并且可以完全按照你的意愿去做。不管怎样，祝你好运！

# php - 在多维数组中查找最后一项和下一项

> ID：10075041
> 
> 赞同：1
> 
> 时间：2012-04-09T14:52:03.497
> 
> 标签：php, arrays, pagination

过去几天我一直在互联网上寻找解决问题的方法，但到目前为止还没有。我有一组页面需要作为分页处理，即显示我过去的项目和下一个项目。数组内容可以根据您查看的部分而改变，但设置始终相同。

**我的数组：**

```
Array
(
    [19] => Array
        (
            [titill] => Kafli 1
            [slug] => kafli1
            [undir] => Array
                (
                    [21] => Array
                        (
                            [titill] => 1.1 Serhljodar
                            [slug] => serhljodar
                            [kaflar] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 24
                                            [titill] => Æfing 1
                                            [slug] => aefing1
                                        )

                                    [1] => Array
                                        (
                                            [id] => 25
                                            [titill] => Æfing 2
                                            [slug] => æfing2
                                        )

                                    [2] => Array
                                        (
                                            [id] => 26
                                            [titill] => Próf 1
                                            [slug] => prof1
                                        )

                                )

                        )

                    [22] => Array
                        (
                            [titill] => 1.2\. Samhljóðar
                            [slug] => samhljodar
                        )

                    [23] => Array
                        (
                            [titill] => 1.3 Málnotkun
                            [slug] => malnotkun
                        )

                )

        )

    [20] => Array
        (
            [titill] => Kafli 2
            [slug] => kafli2
        )

) 
```

数组键是 post_id，slug 是 url。为了解释我想用这个数组实现什么，我写了一些我想做的例子：

*   如果我正在查看`localhost/kafli1`，我会看到下一个项目是 `localhost/kafli1/serhljodar`（键 #21）并且没有上一个项目。
*   如果我正在查看`localhost/kafli1/serhljodar`，我应该看到下一个项目是`localhost/kafli1/serhljodar/aefing1`，上一个项目是`localhost/kafli`。
*   如果 8 点正在查看`localhost/kafli/serhljodar/prof1` （ID #26），我应该看到下一个项目是`localhost/kafli1/samhljodar`，上一个项目是`localhost/kafli1/serhljodar/aefing2`

我被告知要使用 array_slice，但到目前为止它并没有太大帮助。各位好心人能帮我解决这个问题吗？

* * *

**编辑：** 有人说数组本身就是问题所在。下面是这个数组填充的 sql：

```
INSERT INTO `posts` (`id`, `parent_id`, `category`, `position`, `post_slug`, `titill`) VALUES
(9, 0, 3, 0, 'islenska-stig1', 'Íslenska stig 1'),
(19, 9, 3, 0, 'kafli1', 'Kafli 1'),
(20, 9, 3, 0, 'kafli2', 'Kafli 2',),
(21, 19, 3, 0, 'serhljodar', '1.1 Serhljodar'),
(22, 19, 3, 0, 'samhljodar', '1.2\. Samhljóðar'),
(23, 19, 3, 0, 'malnotkun', '1.3 Málnotkun'),
(24, 21, 3, 1, 'aefing1', 'Æfing 1'),
(26, 21, 3, 3, 'prof1', 'Próf 1'); 
```

如果数组是问题，我怎样才能成功地从这些帖子中创建一个分页数组，以便 parent_id 对齐本身在正确的 id 下，所以我可以得到：

```
Array
(
    [0] => islenska-stig1
    [1] => kafli1
    [2] => serhljodar
    [3] => aefing1
    [4] => prof1
    [5] => samhljodar
    [6] => malnotkun
    [6] => kafli2
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:57:30.393

我怀疑您的数组的结构是问题所在。

听起来好像您正在尝试将多维数组用作线性数组。所以我的建议是遍历所有内容，将每个项目推入一维数组。只需使用 currentIndex + - 1 引用您的上一个和下一个项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:01:44.453

我怀疑您正在寻找的数据结构类型是双向链表。它表示具有指向下一个元素和前一个元素的指针的元素列表。

查看此链接，看看它是否符合您的要求：

[http://php.net/manual/en/class.spldoublylinkedlist.php](http://php.net/manual/en/class.spldoublylinkedlist.php)

# ms-access - 在 MS Access 中创建秒表

> ID：10075047
> 
> 赞同：2
> 
> 时间：2012-04-09T14:52:33.983
> 
> 标签：ms-access, time, stopwatch

有谁知道是否有办法在 MS Access 中创建秒表？我正在寻找一种方法来让秒表在某人单击特定表单的“新”记录时“开始”，并在该人保存在表单中输入的信息时让秒表“结束”？理想情况下，对于表中的每条记录，我希望有一个额外的列显示创建表单所花费的时间。

有什么建议/想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:29:17.287

当您单击*新*按钮时，`On Current`将触发表单的事件。`NewRecord`您可以通过检查表单的属性来区分当前记录是新记录还是现有记录。

我在表中添加了一个名为 Long Integer 的字段`seconds_for_insert`。然后我创建了一个表单，其记录源是基于该表的查询。`txtSeconds_for_insert`该表单包括一个绑定到记录源`seconds_for_insert`字段的文本框名称。这是我的表单代码：

```
Option Compare Database
Option Explicit
Dim blnNewRecord As Boolean
Dim dteStartTime As Date

Private Sub Form_BeforeInsert(Cancel As Integer)
    Me.txtSeconds_for_insert = DateDiff("s", dteStartTime, Now())
End Sub

Private Sub Form_Current()
    blnNewRecord = Me.NewRecord
    If blnNewRecord Then
        dteStartTime = Now()
    End If
End Sub 
```

如果您的源表包含自动编号字段，只要您在其中一个绑定控件中键入任何内容，Access 就会保存新记录。您添加到该“新”记录的任何剩余数据都将通过更新而不是插入操作进行保存。所以在这种情况下，使用`Form_BeforeUpdate`代替`Form_BeforeInsert`.

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
    If blnNewRecord Then
        Me.txtSeconds_for_insert = DateDiff("s", dteStartTime, Now())
    End If
End Sub 
```

`txtSeconds_for_insert`文本框不必启用或什至可见即可。您可能更喜欢设置 Visible = No 以避免分散用户的注意力，或者如果您不想让他们知道您正在跟踪该信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:02:25.417

试试[这个](http://support.microsoft.com/kb/325238)您可以将 onClick 设置为“new”，您可以放入一个简单的 if 语句以允许它在保存操作时停止

# magento - Magento，addAttributeToSelect，别名

> ID：10075053
> 
> 赞同：5
> 
> 时间：2012-04-09T14:52:51.797
> 
> 标签：magento, collections

使用集合时如何创建别名 (AS)。

```
$collection->addAttributeToSelect('total_qty') 
```

可以这样做：

```
$collection->getSelect()->columns(array('alias'=>'total_qty')) 
```

但随后我将在查询中同时获得“total_qty”和“total_qty AS 别名”。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-30T11:19:50.430

如果您的集合是一个实例，`Mage_Core_Model_Resource_Db_Collection_Abstract`那么您可以使用该函数`addFieldToSelect`。

这个函数有两个属性。首先，它需要您要添加到选择中的字段，其次它需要一个别名。

```
public function addFieldToSelect($field, $alias = null) 
```

# android - 如何从资产文件夹读取到 DOM xml 解析器？

> ID：10075057
> 
> 赞同：1
> 
> 时间：2012-04-09T14:53:21.030
> 
> 标签：android, xml, assets

请帮我解决以下问题。在我的 android 资产文件夹中，我有一个名为 xml 的文件，`frames.xml`我也有一个类，它像 DOM 一样解析这个文件。

```
DocumentBuilder db = dbf.newDocumentBuilder();
dom = db.parse(fileName); 
```

所以我的问题是如何使用这个 xml 解析器从 assets 文件夹中读取该文件？提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:00:01.100

尝试：

```
DocumentBuilder db = dbf.newDocumentBuilder();
dom = db.parse(context.getAssets().open(filename)); 
```

# java - 在Java中从double转换为float

> ID：10075058
> 
> 赞同：21
> 
> 时间：2012-04-09T14:53:22.793
> 
> 标签：java, floating-point, double, type-conversion

如果我正在使用 a `double`，并将其转换为 a `float`，这究竟是如何工作的？该值是否被截断以适合浮点数？或者值是否以不同的方式四舍五入？对不起，如果这听起来有点补救，但我试图掌握`float`和`double`转换的概念。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T14:55:52.560

从[*Java 语言规范*，第 5.1.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)：

> 从 double 到 float 的窄化原语转换受 IEEE 754 舍入规则 (§4.2.4) 的约束。这种转换可能会丢失精度，但也会丢失范围，从而导致非零双精度浮点数为零和有限双精度浮点数无穷大。双精度 NaN 转换为浮点 NaN，双无穷大转换为同符号浮点无穷大。

第[4.2.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.4)说：

> Java 编程语言要求浮点算术表现得好像每个浮点运算符都将其浮点结果四舍五入到结果精度。不精确的结果必须四舍五入到最接近无限精确结果的可表示值；如果两个最接近的可表示值同样接近，则选择其最低有效位为零的值。这是 IEEE 754 标准的默认舍入模式，称为“四舍五入”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-31T15:43:50.157

I would suggest that floating-point types are most usefully regarded as representing ranges of values. The reason that 0.1f displays as 0.1 rather than as 0.100000001490116119384765625 is that it really represents the range of numbers from 13421772.5/134217728 to 13421773.5/134217728 (i.e. from 0.0999999977648258209228515625 to 0.1000000052154064178466796875); it wouldn't make sense to add extra digits indicating the number is greater than 0.100 when it might be less, nor to use a string of nines indicating the number is less than 0.100 when it might be greater.

Casting a double to a float will select the float whose range of values includes the range of doubles represented by the double. Note that while this operation is non-reversible, the result of the operation will generally be arithmetically correct; the only time it would not be 100% arithmetically correct would be if one were casting to float a double whose range was precisely centered on the boundary between two floats. In that situation, the system would select the float on one side or the other of the double's range; if the double in fact represented a number on the wrong side of the range, the resulting conversion would be slightly inaccurate.

In practice, the tiny imprecision mentioned above is almost never relevant, because the "range of values" represented by a floating-point type is in practice a little larger than indicated above. Performing a calculation (such as addition) on two numbers that have a certain amount of uncertainty will yield a result with more uncertainty, but the system won't keep track of how much uncertainty exists. Nonetheless, unless one performs dozens of operations on a float, or thousands of operations on a double, the amount of uncertainty will usually be small enough not to worry about.

It's important to note that casting a float to a double is actually far more dangerous operation than casting double to float, even though Java allows the former implicitly without a warning but squawks at the latter. Casting a float to a double causes the system to select the double whose range is centered about the center of the float's range. This will almost always result in a value whose actual uncertainty is far greater than would be typical of double-precision numbers. For example, if one casts 0.1f to double, the resulting double will represent a number in the range 0.10000000149011611 to 0.10000000149011613, even though the number it's supposed to be representing (one tenth) is, relatively speaking, nowhere near that range.

# python - 仅计算图像的核心图像数据（不包括元数据）的哈希值

> ID：10075065
> 
> 赞同：25
> 
> 时间：2012-04-09T14:53:33.313
> 
> 标签：python, exif

我正在编写一个脚本来计算不包括 EXIF 标记的图像的 MD5 和。

为了准确地做到这一点，我需要知道 EXIF 标签在文件中的位置（开始、中间、结束），以便我可以排除它。

如何确定标签在文件中的位置？

我正在扫描的图像格式为 TIFF、JPG、PNG、BMP、DNG、CR2、NEF，以及一些视频 MOV、AVI 和 MPG。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-29T10:33:56.830

使用 Python Imaging Library 提取图片数据要容易*得多*（iPython 中的示例）：

```
In [1]: import Image

In [2]: import hashlib

In [3]: im = Image.open('foo.jpg')

In [4]: hashlib.md5(im.tobytes()).hexdigest()
Out[4]: '171e2774b2549bbe0e18ed6dcafd04d5' 
```

这适用于 PIL 可以处理的任何类型的图像。该`tobytes`方法返回包含像素数据的字符串。

顺便说一句，MD5 哈希现在被认为非常弱。最好使用 SHA512：

```
In [6]: hashlib.sha512(im.tobytes()).hexdigest()
Out[6]: '6361f4a2722f221b277f81af508c9c1d0385d293a12958e2c56a57edf03da16f4e5b715582feef3db31200db67146a4b52ec3a8c445decfc2759975a98969c34' 
```

在我的机器上，计算 2500x1600 JPEG 的 MD5 校验和大约需要 0.07 秒。使用 SHA512，需要 0.10 秒。完整示例：

```
#!/usr/bin/env python3

from PIL import Image
import hashlib
import sys

im = Image.open(sys.argv[1])
print(hashlib.sha512(im.tobytes()).hexdigest(), end="") 
```

For movies, you can extract frames from them with e.g. [ffmpeg](http://ffmpeg.org/), and then process them as shown above.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T15:01:49.433

一种简单的方法是散列核心图像数据。对于PNG，您可以通过仅计算“关键块”（即以大写字母开头的块）来做到这一点。JPEG 具有类似但更简单的文件结构。

ImageMagick 中的视觉散列在散列图像时解压缩图像。在您的情况下，您可以立即对压缩的图像数据进行散列，因此（如果实施正确）它应该与散列原始文件一样快。

这是一个说明这个想法的小 Python 脚本。它可能适合你，也可能不适合你，但它至少应该说明我的意思:)

```
import struct
import os
import hashlib

def png(fh):
    hash = hashlib.md5()
    assert fh.read(8)[1:4] == "PNG"
    while True:
        try:
            length, = struct.unpack(">i",fh.read(4))
        except struct.error:
            break
        if fh.read(4) == "IDAT":
            hash.update(fh.read(length))
            fh.read(4) # CRC
        else:
            fh.seek(length+4,os.SEEK_CUR)
    print "Hash: %r" % hash.digest()

def jpeg(fh):
    hash = hashlib.md5()
    assert fh.read(2) == "\xff\xd8"
    while True:
        marker,length = struct.unpack(">2H", fh.read(4))
        assert marker & 0xff00 == 0xff00
        if marker == 0xFFDA: # Start of stream
            hash.update(fh.read())
            break
        else:
            fh.seek(length-2, os.SEEK_CUR)
    print "Hash: %r" % hash.digest()

if __name__ == '__main__':
    png(file("sample.png"))
    jpeg(file("sample.jpg")) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-23T10:44:40.447

You can use [stream](https://imagemagick.org/script/stream.php) which is part of the [ImageMagick](https://www.imagemagick.org) suite:

```
$ stream -map rgb -storage-type short image.tif - | sha256sum
d39463df1060efd4b5a755b09231dcbc3060e9b10c5ba5760c7dbcd441ddcd64  - 
```

or

```
$ sha256sum <(stream -map rgb -storage-type short image.tif -)
d39463df1060efd4b5a755b09231dcbc3060e9b10c5ba5760c7dbcd441ddcd64  /dev/fd/63 
```

This example is for a TIFF file which is RGB with 16 bits per sample (i.e. 48 bits per pixel). So I use [map](https://www.imagemagick.org/script/command-line-options.php#map_stream_) to `rgb` and a `short` [storage-type](https://www.imagemagick.org/script/command-line-options.php#storage-type) (you can use `char` here if the RGB values are 8-bits).

This method reports the same `signature` hash that the verbose Imagemagick `identify` command reports:

```
$ identify -verbose image.tif | grep signature
signature: d39463df1060efd4b5a755b09231dcbc3060e9b10c5ba5760c7dbcd441ddcd64 
```

(for ImageMagick v6.x; the hash reported by `identify` on version 7 is [different](https://www.imagemagick.org/discourse-server/viewtopic.php?t=23399#p98342) to that obtained using `stream`, but the latter may be reproduced by any tool capable of extracting the raw bitmap data - such as `dcraw` for some image types.)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T21:04:00.913

I would use a metadata stripper to preprocess your hashing :

From ImageMagick package you have ...

```
mogrify -strip blah.jpg 
```

and if you do

```
identify -list format 
```

it apparently works with all the cited formats.

# php - 使用 PHP 版本 5.2.9 为 exif 2.3 提取 exif 数据的问题

> ID：10075066
> 
> 赞同：3
> 
> 时间：2012-04-09T14:53:43.703
> 
> 标签：php, gps, exif

PHP 版本 5.2.9

我想知道是否有人在提取 GPS 或什至只是使用 PHP`exif_read_data()`用于 EXIF 2.3 的所有 EXIF 数据时遇到问题（并且可能找到了解决方案）。我的公司最近购买了一台允许 GPS 定向数据的 Fujifilm Finepix XP150，这对于我正在为我的公司构建的工具至关重要。

下面的代码是我用来提取的，我通过一次以获得整个 EXIF 数据的列表，第二次是给我经度和纬度。

```
$exif = exif_read_data('./images/DSCF0006.JPG', 'GPS');
echo $exif===false ? "<strong>No header data found.</strong><br />\n" : "<strong>Image contains headers</strong><br />\n";

$exif = exif_read_data('./images/DSCF0006.JPG', 0, true);
echo "<strong>IMG_20120329_104351.jpg:</strong><br />\n";
foreach ($exif as $key => $section) {
    foreach ($section as $name => $val) {
        echo "$key.$name: $val<br />\n";
    }
} 
```

```
$dir = "./images/";               

function readGPSinfoEXIF($image_full_name) {
    $exif=exif_read_data($image_full_name, 0, true);
    if(!$exif || $exif['GPS']['GPSLatitude'] == '') {
        return false;
    } else {
        $lat_ref = $exif['GPS']['GPSLatitudeRef'];
        echo "Lattitude Reference: ", $lat_ref, "<br />";
        $lat = $exif['GPS']['GPSLatitude'];
        list($num, $dec) = explode('/', $lat[0]);
        $lat_s = $num / $dec;
        list($num, $dec) = explode('/', $lat[1]);
        $lat_m = $num / $dec;
        list($num, $dec) = explode('/', $lat[2]);
        $lat_v = $num / $dec;
        $lon_ref = $exif['GPS']['GPSLongitudeRef'];
        echo "Longitude Reference: ", $lon_ref, "<br />";
        $lon = $exif['GPS']['GPSLongitude'];
        list($num, $dec) = explode('/', $lon[0]);
        $lon_s = $num / $dec;
        list($num, $dec) = explode('/', $lon[1]);
        $lon_m = $num / $dec;
        list($num, $dec) = explode('/', $lon[2]);
        $lon_v = $num / $dec;

        $lat_int = ($lat_s + $lat_m / 60.0 + $lat_v / 3600.0);
        // check orientation of latitude and prefix with (-) if S
        $lat_int = ($lat_ref == "S") ? '-' . $lat_int : $lat_int;

        $lon_int = ($lon_s + $lon_m / 60.0 + $lon_v / 3600.0);
        // check orientation of longitude and prefix with (-) if W
        $lon_int = ($lon_ref == "W") ? '-' . $lon_int : $lon_int;

        $gps_int = array($lat_int, $lon_int);
        return $gps_int;
        }
}

function dirImages($dir) {
    $d = dir($dir); 
    while (false!== ($file = $d->read())) {
        $extension = substr($file, strrpos($file, '.')); 
        if($extension == ".JPG" || $extension == ".jpeg" || $extension == ".gif" | $extension == ".png") {
            $images[$file] = $file; 
        }
        $d->close();         
        return $images;
    }         

    $array = dirImages('./images/');
    $counter = 0;

    foreach ($array as $key => $image) {
        echo "<br />";
        $counter++;
        echo "<strong>".$counter."</strong>";
        echo ":  ";
        $image_full_name = $dir."/".$key;
        $image_name = $key;
        echo "<strong>".$image_name."</strong>";
        echo "<br />";
        $results = readGPSinfoEXIF($image_full_name);
        $latitude = $results[0];
        echo $latitude;
        echo ", ";
        $longitude = $results[1];
        echo $longitude;
        echo "<br />";
    } 
```

使用三星 Galaxy Nexus 拍摄照片时，我得到了完美的结果，我得到了适当的 GPS 数据和所有 EXIF 数据，使用相机时，我得到了`exif_read_data(DSCF0006.JPG) [exif_read_data]: corrupt EXIF header: maximum directory nesting level reached`

是我做错了什么还是 PHP 5`exif_read_data`还不支持 EXIF 2.3？我对此进行了研究，PHP.net 指出：

```
exif_read_data() also validates EXIF data tags according to the EXIF
specification (» http://exif.org/Exif2-2.PDF, page 20). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T19:47:16.657

我也有一台富士相机有同样的问题，但我想我已经找到了解决方案，我在这里提出了一个 PHP 错误报告： [https ://bugs.php.net/bug.php?id=66443](https://bugs.php.net/bug.php?id=66443)

如果可以从源代码编译 PHP，请增加 exif.c 文件中的 MAX_IFD_NESTING_LEVEL 的值。我把它从 100 提高到 200，它似乎已经解决了这个问题。

# actionscript-3 - AS3中如何控制对象的图像

> ID：10075068
> 
> 赞同：0
> 
> 时间：2012-04-09T14:53:50.873
> 
> 标签：actionscript-3, image, oop, graphics, flash-cs3

我有一个在 .as 文件中编码的对象，我们称它为小部件，在 .as 文件中`widget.as`。它在库中列为 MovieClip，实际上是一个 MovieClip。我怎样才能从 中的代码，在其`widget.as`上覆盖库中的图像（位图），以便 Widget 有四个部分，可以在两种不同的样式之间独立切换。

作为替代方案，我可以在 Widget 的 MovieClip 中为每种可能性制作一个帧，并让代码切换我所在的帧。

这必须在 Adob​​e Flash CS3 和 ActionScript 3 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:15:44.353

如果您有想要在其上显示的图像，并且已经将其分成四部分，那么您可以执行以下操作：

```
var tl:Bitmap = new Bitmap();
var tr:Bitmap = new Bitmap();
var bl:Bitmap = new Bitmap();
var br:Bitmap = new Bitmap();

addChild(tl);
addChild(tr);
addChild(bl);
addChild(br); 
```

# c - 如何从 C-hexvalues 生成文件？

> ID：10075077
> 
> 赞同：0
> 
> 时间：2012-04-09T14:54:42.153
> 
> 标签：c, hex, dump

我有一个看起来像这样的 C 数组：

```
char hexc[] = {
    0x41, 0x80, 0x7a, 0x39, 0xea, 0x7e, 0x27, 0xfc, 
    0xe6, 0x45, 0x9c, 0x8b, 0xb5, 0xce, 0xa7, 0x35, 
    0x5f, 0xf2, 0x43, 0xcf, 0x89, 0xd8, 0x61, 0xec, 
    0xe7, 0xed, 0x2e, 0x34, 0x45, 0x0c, 0x32, 0xae, 
    0x71, 0x4f, 0x1c, 0xd8, 0xb5, 0x8c, 0x1e, 0xdd,
    0x5d, 0x90, 0xf3, 0xf2, 0xe7, 0xa6, 0x4f, 0xef, 
    0xec, 0x96, 0xe3, 0xca, 0x8e, 0xeb, 0x64, 0x1d, 
    0x18, 0xa9, 0x95, 0xec, 0x64, 0x02, 0xf8, 0x26, 
}; 
```

我知道在这个十六进制表示背后是一个 .GIF 文件，从这个十六进制值再次生成一个可查看文件的最佳方法是什么？以及如何添加缺少的 GIF 标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:04:41.883

您只需打开文件并写入它：

```
FILE *f = fopen("filename.gif", "wb");
if (!f) return; // or do something else
fwrite(hexc, 1, sizeof(hexc), f);
fclose(f); 
```

确保`#include <stdio.h>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:11:47.937

Turbo C DOS 代码

```
/****************************************************************************
** This support Compuserve 256 colour GIF87a and GIF89a image up to        **
** 320x200 in size.                                                        **
****************************************************************************/

//This program requires a stack of at least 19.5K!!

#include "stdio.h"

typedef
  struct GIFHeader {
    char          Signature [7];
    unsigned int  ScreenWidth, ScreenHeight;
    unsigned char Depth, Background, Zero;
  };
  struct GIFDescriptor {
    char          Separator;
    unsigned int  ImageLeft, ImageTop, ImageWidth, ImageHeight;
    unsigned char Depth;
  };

  char far *Screen = (char far *)0xA0000000L;
  //For loading from the file
  FILE                 *GIFFile;
  unsigned int         BPointer;
  unsigned char        Buffer [257];
  //GIF data is stored in blocks of a certain size
  unsigned char        BlockSize;
  //For loading the code
  unsigned char        CodeSize;
  char                 BitsIn;
  unsigned char        Temp;
  //Coordinates
  unsigned int         X, Y, tlX, tlY, brX, brY;
  //The string table
  unsigned int         Prefix [4096];
  unsigned char        Suffix [4096];

//This sets the display to VGA 320x200 in 256 colours
void VGAScreen ()
{
  asm {
    mov ax, 0x13
    int 0x10
  }
}

//This resets the display to text mode
void TextScreen ()
{
  asm {
    mov ax, 0x3
    int 0x10
  }
}

//This sets a DAC register to a specific Red Green Blue-value
void SetDAC(unsigned char DAC, unsigned char R, unsigned char G, unsigned char B)
{
  outportb (0x3C8, DAC);
  outportb (0x3C9, R);
  outportb (0x3C9, G);
  outportb (0x3C9, B);
}

//This sets one pixel on the screen
void PutPixel (unsigned int x, unsigned int y, unsigned char c)
{
  Screen [(y << 8) + (y << 6) + x] = c;
}

//Function to read from the buffer
unsigned char LoadByte ()
{
  //Read next block}
  if (BPointer == BlockSize) {
    fread (Buffer, BlockSize + 1, 1, GIFFile);
    BPointer = 0;
  }

  //Return byte
  return Buffer [BPointer++];
}

//Procedure to read the next code from the file
unsigned int ReadCode ()
{
  int           Counter;
  unsigned int  Code;

  Code = 0;
  //Read the code, bit by bit
  for (Counter = 0; Counter < CodeSize; Counter++) {
    //Maybe, a new byte needs to be loaded with a further 8 bits
    if (++BitsIn == 9) {
      Temp = LoadByte ();
      BitsIn = 1;
    }

    //Add the current bit to the code
    if (Temp & 1) Code += 1 << Counter;
    Temp >>= 1;
  }
  return Code;
}

//Procedure to draw a pixel
void NextPixel (unsigned int c)
{
  //Actually draw the pixel on screen
  PutPixel (X, Y, c & 255);

  //Move to next row, if necessary
  if (++X == brX) {
    X = tlX;
    Y++;
  }
}

//Local function to output a string. Returns the first character.
unsigned char OutString (unsigned int CurCode)
{
  unsigned int  OutCount;
  unsigned char OutCode [1024];

  //If it's a single character, output that
  if (CurCode < 256) {
    NextPixel (CurCode);
  } else {
    OutCount = 0;

    //Store the string, which ends up in reverse order
    do {
      OutCode [OutCount++] = Suffix [CurCode];
      CurCode = Prefix [CurCode];
    } while (CurCode > 255);

    //Add the last character
    OutCode [OutCount++] = CurCode;

    //Output all the string, in the correct order
    do {
      NextPixel (OutCode [--OutCount]);
    } while (OutCount);
  }
  //Return 1st character
  return CurCode;
}

//This actually loads the GIF
void LoadGIF (char *Filename)
{
  //For loading from the GIF file
  struct GIFHeader     Header;
  struct GIFDescriptor Descriptor;

  //Colour information
  unsigned char        BitsPerPixel,
                       NumOfColours;
  unsigned int         DAC;
  unsigned char        Palette [256][3];

  //For indexing the string table
  unsigned int         FirstFree, FreeCode;

  //All the code information
  unsigned char        InitCodeSize;
  unsigned int         Code, OldCode, MaxCode;

  //Special codes
  unsigned int         ClearCode, EOICode;

  //Check whether the GIF file exists, and open it
  GIFFile = fopen (Filename, "rb");
  if (GIFFile == 0) {
    TextScreen ();
    printf ("Could not open file %s", Filename);
    return;
  }

  //Read header
  fread (&Header, 6, 1, GIFFile);
  Header.Signature [6] = 0;
  fread (&Header.ScreenWidth, sizeof (Header) - 7, 1, GIFFile);

  //Check signature and terminator
  if ((strcmp (Header.Signature, "GIF87a")
    && strcmp (Header.Signature, "GIF89a"))
    || Header.Zero) {
    TextScreen ();
    printf ("Not a valid GIF file\n");
    return;
  }

  //Get amount of colours in image
  BitsPerPixel = 1 + (Header.Depth & 7);
  NumOfColours = (1 << BitsPerPixel) - 1;

  //Load global colour map
  fread (Palette, 3, (NumOfColours + 1), GIFFile);
  for (DAC = 0; DAC <= NumOfColours; DAC++)
    SetDAC (DAC, Palette [DAC][0] >> 2,
                 Palette [DAC][1] >> 2,
                 Palette [DAC][2] >> 2);

  //Load the image descriptor
  fread (&Descriptor, sizeof (Descriptor), 1, GIFFile);

  if (Descriptor.Separator != ',') {
    TextScreen ();
    printf ("Incorrect image descriptor.\n");
    return;
  }

  //Get image corner coordinates
  tlX = Descriptor.ImageLeft;
  tlY = Descriptor.ImageTop;
  brX = tlX + Descriptor.ImageWidth;
  brY = tlY + Descriptor.ImageHeight;

  //Some restrictions apply
  if (Descriptor.Depth & 128) {
    TextScreen ();
    printf ("Local colour maps not supported\n");
    return;
  }
  if (Descriptor.Depth & 64) {
    TextScreen ();
    printf ("Interlaced images not supported\n");
    return;
  }

  //Get initial code size
  fread (&CodeSize, 1, 1, GIFFile);

  //GIF data is stored in blocks, so it's necessary to know the size
  fread (&BlockSize, 1, 1, GIFFile);

  //Start loader
  BPointer = BlockSize;

  //Special codes used in the GIF spec
  ClearCode        = 1 << CodeSize;     //Code to reset
  EOICode          = ClearCode + 1;     //End of file

  //Initialize the string table
  FirstFree        = ClearCode + 2;     //Strings start here
  FreeCode         = FirstFree;         //Strings can be added here

  //Initial size of the code and its maximum value
  InitCodeSize     = ++CodeSize;
  MaxCode          = 1 << CodeSize;

  BitsIn = 8;

  //Start at top left of image
  X = Descriptor.ImageLeft;
  Y = Descriptor.ImageTop;

  do {
    //Read next code
    Code = ReadCode ();

    //If it's an End-Of-Information code, stop processing
         if (Code == EOICode) break;
    //If it's a clear code...
    else if (Code == ClearCode) {
      //Clear the string table
      FreeCode = FirstFree;

      //Set the code size to initial values
      CodeSize = InitCodeSize;
      MaxCode  = 1 << CodeSize;

      //The next code may be read
      Code = ReadCode ();
      OldCode = Code;

      //Set pixel
      NextPixel (Code);
    //Other codes
    } else {
      /*If the code is already in the string table, it's string is displayed,
      and the old string followed by the new string's first character is
      added to the string table.*/
      if (Code < FreeCode)
        Suffix [FreeCode] = OutString (Code);
      else {
      /*If it is not already in the string table, the old string followed by
      the old string's first character is added to the string table and
      displayed.*/
        Suffix [FreeCode] = OutString (OldCode);
        NextPixel (Suffix [FreeCode]);
      }

      //Finish adding to string table
      Prefix [FreeCode++] = OldCode;

      //If the code size needs to be adjusted, do so
      if (FreeCode >= MaxCode && CodeSize < 12) {
        CodeSize++;
        MaxCode <<= 1;
      }

      //The current code is now old
      OldCode = Code;
    }
  } while (Code != EOICode);

  //Close the GIF file
  fclose (GIFFile);
}

void main (int argcount, char *argvalue[])
{
  char FileName [80];

  //Check if a filename was passed as a parameter, otherwise ask for one
  if (argcount > 1) {
    strcpy (FileName, argvalue [1]);
  } else {
    printf ("Enter filename:");
    gets (FileName);
  }

  //Switch to graphics screen
  VGAScreen ();
  //Load GIF file
  LoadGIF (FileName);
  //Wait for keypress
  getch ();
  //Switch back to text mode
  TextScreen ();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:08:45.283

以二进制形式打开文件

```
ofstream outfile ("new.gif",ofstream::binary); 
```

然后写你的缓冲区

```
outfile.write (hexc, sizeof hexc); 
```

# sql - 3-Way SQL Join 返回错误数据

> ID：10075079
> 
> 赞同：1
> 
> 时间：2012-04-09T14:54:44.480
> 
> 标签：sql, tsql, join

我正在尝试使用以下 sql 来检索收到的总金额，以及从 3 个表中售出的总金额：

```
select ITEMS.ITEM_NO, SUM(RECEIVINGS.QTY_RECVD), SUM(SALES.QTY_SOLD)
from ITEMS
left join RECEIVINGS
on ITEMS.ITEM_NO = RECEVINGS.ITEM_NO
left join SALES
on ITEMS.ITEM_NO = SALES.ITEM_NO
WHERE ITEMS.ITEM_NO = '12345'
GROUP BY ITEMS.ITEM_NO 
```

上面的查询返回的数据比实际值大几个数量级。但是，如果我将其分为两个查询：

```
select ITEMS.ITEM_NO, SUM(RECEIVINGS.QTY_RECVD)
from ITEMS
left join RECEIVINGS
on ITEMS.ITEM_NO = RECEVINGS.ITEM_NO
WHERE ITEMS.ITEM_NO = '12345'
GROUP BY ITEMS.ITEM_NO

select ITEMS.ITEM_NO, SUM(SALES.QTY_SOLD)
from ITEMS
left join SALES
on ITEMS.ITEM_NO = SALES.ITEM_NO
WHERE ITEMS.ITEM_NO = '12345'
GROUP BY ITEMS.ITEM_NO 
```

它完美地工作。是什么赋予了？连接所有三个表的第一个查询是否有任何原因不起作用，但两个单独的查询会？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T15:00:01.923

If either `receivings` or `sales` has more than one row (and especially if both have more than one row) then the values will each get multiplied by the number of rows in the other. One way to solve this issue is to calculate the totals separately then join:

```
select ITEMS.ITEM_NO, COALESCE(R.SUM_RECEIVINGS,0), COALESCE(S.SUM_SALES,0)
from ITEMS
left join (SELECT RECEIVINGS.ITEM_NO, SUM(RECEIVINGS.QTY_RECVD) as SUM_RECEIVINGS
    FROM RECEIVINGS
    GROUP BY RECEIVINGS.ITEM_NO) as R ON ITEMS.ITEM_NO = R.ITEM_NO
left join (SELECT SALES.ITEM_NO, SUM(SALES.QTY_RECVD) as SUM_SALES
    FROM SALES
    GROUP BY SALES.ITEM_NO) as S ON ITEMS.ITEM_NO = S.ITEM_NO
WHERE ITEMS.ITEM_NO = '12345' 
```

# c - 可以多次定义 C 结构吗？

> ID：10075080
> 
> 赞同：9
> 
> 时间：2012-04-09T14:54:49.020
> 
> 标签：c, struct

我已经在几个地方读到 C 结构可以安全地定义多次，但是我从 gcc 中得到一个“重新定义结构”错误，用于多重定义一个结构（通过多个包含）。一个非常简化的示例如下所示：

富.c：

```
#include "a.h"
#include "b.h"

int main(int argc, char *argv[]) {
  struct bar b;
  b.a = 2;
  return 0;
} 
```

啊：

```
struct bar {
  int a;
  int b;
}; 
```

:

```
#include "a.h"

struct buz {
  int x;
  int y;
}; 
```

如果我跑步，`gcc foo.c`我会得到：

```
In file included from b.h:1:0,
                 from foo.c:2:
a.h:1:8: error: redefinition of ‘struct bar’
a.h:1:8: note: originally defined here 
```

我知道我没有放置任何包含防护，这些防护将修复编译错误，但我的理解是这仍然可以工作。`struct bar`我还在foo.c 中尝试了两个定义，但我得到了相同的错误消息？那么，是否可以在 C 中多次定义结构？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T15:00:22.810

A struct in C can be *declared* multiple times safely, but can only be defined once.

```
 struct bar;
    struct bar{};
    struct bar; 
```

compiles fine, because bar is only defined once and declared as many times as you like.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:59:25.060

The struct can only be defined once for each file you compile. Here, you are including a.h twice. (Once directly and once via b.h.)

You need to change your code so that the symbol is only defined once for a given source file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:59:32.707

No they can't be defined multiple times and that is why you have #ifndef include guards and should use them.

Having

```
#include "a.h" 
```

inside b.h header file means you redefine bar. If you had #ifndef include guards this would not be happening.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:59:34.567

You don't have #ifdef macros in your header file. If you include your headers in multiple source files, you will encounter that error.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T15:00:23.820

The same symbol in the same scope cannot be defined twice. What you are probably referring to is that it is safe to include the struct from two different C files which essentially means that they are defined twice (since there is no export) and sharing these structs won't be a problem, since they are compiled to the same memory layout

# java - 休眠缓慢以获取 Postgres 连接

> ID：10075081
> 
> 赞同：65
> 
> 时间：2012-04-09T14:54:57.347
> 
> 标签：java, hibernate, postgresql, connection

我很难调试这个问题。每当我尝试与 postgres 建立连接时，都需要一整分钟。建立连接后，一切正常。我已经尝试禁用所有映射并且不加载任何映射，但仍然需要很长时间才能获得连接。我也试过禁用验证，没有区别。当我使用一个简单的简单 JDBC 连接时，它是瞬时的。Hibernate 正在做一些需要大量时间的事情，我似乎无法缩小范围。非常感谢任何输入！

Postgres 驱动程序：

```
postgresql-9.1-901.jdbc4.jar 
```

配置设置：

```
<hibernate-configuration>
    <session-factory>
    <!-- properties -->
        <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>
        <property name="connection.driver_class">org.postgresql.Driver</property>

        <property name="connection.url">jdbc:postgresql://xxxx.com:5432/xxxxx</property>
        <property name="connection.username">xxxxxxx</property>
        <property name="connection.password">xxxxxxx</property>

    </session-factory>
</hibernate-configuration> 
```

代码中的其他设置：

```
 config.setProperty("hibernate.hbm2ddl.auto", hbm2ddlMode);
    //config.setProperty("hibernate.cache.use_query_cache", "true");
    config.setProperty("hibernate.cache.use_second_level_cache", "true");
    //config.setProperty("hibernate.cache.region.factory_class", "net.sf.ehcache.hibernate.EhCacheRegionFactory");
    config.setProperty("hibernate.cache.provider_class", "org.hibernate.cache.EhCacheProvider");
    //config.setProperty("hibernate.cache.provider_class", "org.hibernate.cache.NoCacheProvider");
    config.setProperty("hibernate.jdbc.fetch_size", "100");
    config.setProperty("hibernate.jdbc.batch_size", "30");
    config.setProperty("hibernate.jdbc.use_scrollable_resultset", "true");
    config.setProperty("hibernate.connection.provider_class", "org.hibernate.connection.C3P0ConnectionProvider");

    config.setProperty("hibernate.c3p0.acquire_increment", "1");
    config.setProperty("hibernate.c3p0.idle_test_period", "0");
    config.setProperty("hibernate.c3p0.min_size", "1");
    config.setProperty("hibernate.c3p0.max_size", "2");
    config.setProperty("hibernate.c3p0.timeout", "0");
    config.setProperty("javax.persistence.validation.mode", "none"); 
```

这是发生延迟的代码段：

```
private SessionFactory buildSessionFactory() throws Exception {
        ServiceRegistry serviceRegistry  = new ServiceRegistryBuilder().applySettings(config.getProperties()).buildServiceRegistry();

            //Building session takes a whole minute without mappings!!!
        sessionFactory = config.buildSessionFactory(serviceRegistry);

        validateConnection();

        return sessionFactory;
    } 
```

这是日志结果：

```
[main] 2012-04-09 10:40:32,823 110391 INFO  C3P0ConnectionProvider - HHH000046: 
Connection properties: {user=hgaidb_test, password=****}
[main] 2012-04-09 10:40:32,823 110391 INFO  C3P0ConnectionProvider - HHH000006: 
Autocommit mode: false
[main] 2012-04-09 10:40:34,100 111668 DEBUG JdbcServicesImpl - Database ->
       name : PostgreSQL
    version : 8.3.3
      major : 8
      minor : 3
[main] 2012-04-09 10:40:34,101 111669 DEBUG JdbcServicesImpl - Driver ->
       name : PostgreSQL Native Driver
    version : PostgreSQL 9.1 JDBC4 (build 901)
      major : 9
      minor : 1
*******************************************************************************
// 1 MINUTE DELAY
*******************************************************************************
[main] 2012-04-09 10:40:34,102 111670 DEBUG JdbcServicesImpl - JDBC version : 4.
0
[main] 2012-04-09 10:41:21,632 159200 INFO  Dialect - HHH000400: Using dialect: 
org.hibernate.dialect.PostgreSQLDialect
*******************************************************************************
[main] 2012-04-09 10:41:21,669 159237 INFO  LobCreatorBuilder - HHH000424: Disab
ling contextual LOB creation as createClob() method threw error : java.lang.refl
ect.InvocationTargetException
[main] 2012-04-09 10:41:21,814 159382 DEBUG SettingsFactory - Automatic flush du
ring beforeCompletion(): disabled
[main] 2012-04-09 10:41:21,814 159382 DEBUG SettingsFactory - Automatic session 
close at end of transaction: disabled
[main] 2012-04-09 10:41:21,815 159383 DEBUG SettingsFactory - JDBC batch size: 3
0
[main] 2012-04-09 10:41:21,816 159384 DEBUG SettingsFactory - JDBC batch updates
 for versioned data: disabled
[main] 2012-04-09 10:41:21,816 159384 DEBUG SettingsFactory - Scrollable result 
sets: enabled
[main] 2012-04-09 10:41:21,817 159385 DEBUG SettingsFactory - Wrap result sets: 
disabled
[main] 2012-04-09 10:41:21,818 159386 DEBUG SettingsFactory - JDBC3 getGenerated
Keys(): enabled
[main] 2012-04-09 10:41:21,818 159386 DEBUG SettingsFactory - JDBC result set fe
tch size: 100
[main] 2012-04-09 10:41:21,819 159387 DEBUG SettingsFactory - Connection release
 mode: auto
[main] 2012-04-09 10:41:21,819 159387 INFO  TransactionFactoryInitiator - HHH000
399: Using default transaction strategy (direct JDBC transactions)
[main] 2012-04-09 10:41:21,844 159412 DEBUG SettingsFactory - Default batch fetc
h size: 1
[main] 2012-04-09 10:41:21,844 159412 DEBUG SettingsFactory - Generate SQL with 
comments: disabled
[main] 2012-04-09 10:41:21,845 159413 DEBUG SettingsFactory - Order SQL updates 
by primary key: disabled
[main] 2012-04-09 10:41:21,846 159414 DEBUG SettingsFactory - Order SQL inserts 
for batching: disabled
[main] 2012-04-09 10:41:21,846 159414 DEBUG SettingsFactory - Query translator: 
org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory
[main] 2012-04-09 10:41:21,867 159435 INFO  ASTQueryTranslatorFactory - HHH00039
7: Using ASTQueryTranslatorFactory
[main] 2012-04-09 10:41:21,867 159435 DEBUG SettingsFactory - Query language sub
stitutions: {}
[main] 2012-04-09 10:41:21,867 159435 DEBUG SettingsFactory - JPA-QL strict comp
liance: disabled
[main] 2012-04-09 10:41:21,868 159436 DEBUG SettingsFactory - Second-level cache
: enabled
[main] 2012-04-09 10:41:21,868 159436 DEBUG SettingsFactory - Query cache: disab
led
[main] 2012-04-09 10:41:21,869 159437 DEBUG SettingsFactory - Cache region facto
ry : org.hibernate.cache.internal.NoCachingRegionFactory
[main] 2012-04-09 10:41:21,872 159440 DEBUG SettingsFactory - org.hibernate.cach
e.internal.NoCachingRegionFactory did not provide constructor accepting java.uti
l.Properties; attempting no-arg constructor.
[main] 2012-04-09 10:41:21,873 159441 DEBUG SettingsFactory - Optimize cache for
 minimal puts: disabled
[main] 2012-04-09 10:41:21,873 159441 DEBUG SettingsFactory - Structured second-
level cache entries: disabled
[main] 2012-04-09 10:41:21,873 159441 DEBUG SettingsFactory - Statistics: disabl
ed
[main] 2012-04-09 10:41:21,874 159442 DEBUG SettingsFactory - Deleted entity syn
thetic identifier rollback: disabled
[main] 2012-04-09 10:41:21,874 159442 DEBUG SettingsFactory - Default entity-mod
e: pojo
[main] 2012-04-09 10:41:21,875 159443 DEBUG SettingsFactory - Named query checki
ng : enabled
[main] 2012-04-09 10:41:21,875 159443 DEBUG SettingsFactory - Check Nullability 
in Core (should be disabled when Bean Validation is on): enabled
[main] 2012-04-09 10:41:21,876 159444 DEBUG SettingsFactory - multi-tenancy stra
tegy : NONE 
```

我已经对此进行了更多研究，逐步通过调试器。我的类路径中没有所有源代码，但我仍然可以看到变量。在那一分钟的等待期间，Hibernate 正在查询 pg_catalog.pg_type 表：

```
[SELECT typname FROM pg_catalog.pg_type WHERE oid = , ] 
```

这是一个屏幕截图：

![调试窗口](../Images/73d2546b10d4bce1ea0d8f2dc8a9dc20.png)

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-04-11T15:23:55.580

我修好了=）我真的不得不四处寻找答案。基本上，它归结为加载元数据和 JDBC 驱动程序。它正在加载所有元数据，包括 sql 列旁边的注释和其他各种结构，这些都是操作不需要的。我不知道为什么默认情况下会启用此功能，但除非您明确需要，否则您绝对应该关闭此功能：

```
config.setProperty("hibernate.temp.use_jdbc_metadata_defaults","false"); 
```

立即连接！

我能找到的唯一信息是代码：

```
107     // 'hibernate.temp.use_jdbc_metadata_defaults' is a temporary magic value.
108     // The need for it is intended to be alleviated with future development, thus it is
109     // not defined as an Environment constant...
110     //
111     // it is used to control whether we should consult the JDBC metadata to determine
112     // certain Settings default values; it is useful to *not* do this when the database
113     // may not be available (mainly in tools usage).
114     boolean useJdbcMetadata = ConfigurationHelper.getBoolean( "hibernate.temp.use_jdbc_metadata_defaults", configValues, true ); 
```

[http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/4.1.1.Final/org/hibernate/engine/jdbc/internal/JdbcServicesImpl.java#JdbcServicesImpl](http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/4.1.1.Final/org/hibernate/engine/jdbc/internal/JdbcServicesImpl.java#JdbcServicesImpl)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-10-03T01:08:45.607

我还必须启用 hibernate.jdbc.use_get_generated_keys 否则身份生成策略会引发异常。在它根据从数据库收到的元数据自动启用之前。所以我的整个解决方案是在persistence.xml中添加以下两行：

```
<property name="hibernate.jdbc.use_get_generated_keys" value="true" />
<property name="hibernate.temp.use_jdbc_metadata_defaults" value="false" /> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-01-22T19:33:50.320

差不多7年后，这仍然是一个问题......

关闭“temp”键会有所帮助，但是逐个启用将自动配置的属性是一件麻烦事（请参阅其他答案）。

对于 Oracle 和 Teradata，我没有注意到这种放缓，所以我深入挖掘并发现最慢的部分在哪里： [https ://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/ org/postgresql/jdbc/PgDatabaseMetaData.java#L2237](https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/jdbc/PgDatabaseMetaData.java#L2237)

在我的例子中，这个结果集有 372 行（类型）。[然后，对于每个驱动程序从https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/jdbc/TypeInfoCache.java#L204](https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/jdbc/TypeInfoCache.java#L204)触发几个调用， 这会导致大量针对数据库的 SQL 语句。

现在不知道如何加快速度，幸运的是它需要一次然后被缓存。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-11T21:18:31.207

我遇到了可滚动结果集的问题，所以我不得不添加第三个参数，见下文：

```
<property name="hibernate.temp.use_jdbc_metadata_defaults">false</property>
<property name="hibernate.jdbc.use_get_generated_keys">true</property>
<property name="hibernate.jdbc.use_scrollable_resultset">true</property> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-27T10:10:51.937

一台 postgresql 服务器可以包含多个数据库。不幸的是，您不能[将其他数据库元数据隐藏到一个连接](https://stackoverflow.com/questions/3349136)，这就是 jdbc 驱动程序读取元数据需要很长时间的原因！

将这些数据库分离到不同的 postgres-servers 中，元数据读取的性能将会提高！

阅读[如何在 centos 上分离](https://opensourcedbms.com/dbms/running-multiple-postgresql-9-2-instances-on-one-server-in-centos-6rhel-6fedora/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T15:16:59.013

这听起来有点像我们在 Ruby on Rails 中看到的问题。您可能会寻找与我在这里描述的类似的原因：

[http://archives.postgresql.org/pgsql-performance/2009-11/msg00128.php](http://archives.postgresql.org/pgsql-performance/2009-11/msg00128.php)

简而言之，这个问题是由从多个 ClassLoader 上下文显式注册 JDBC 驱动程序引起的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-25T17:55:13.000

禁用`hibernate.temp.use_jdbc_metadata_defaults`可能会增加应用程序启动但禁用某些功能。喜欢`batch`操作。当休眠不加载 jdbc 元数据休眠将全局批处理大小设置为 0，这意味着禁用批处理操作。在这种情况下，唯一的方法是使用带`session`范围的批处理操作。就像下面的代码示例

```
entityManager
    .unwrap( Session.class )
    .setJdbcBatchSize( 10 ); 
```

所以禁用这个属性时要小心

# objective-c - RestKit - RKObjectManager 中未声明的标识符“DISPATCH_QUEUE_SERIAL”？

> ID：10075083
> 
> 赞同：1
> 
> 时间：2012-04-09T14:55:26.207
> 
> 标签：objective-c, ios, cocoa, restkit

尝试为可可项目（不是 iOS）设置和使用 RestKit 库，并 [严格按照在 Xcode 4.x 上作为 Git 子模块安装 RestKit中的说明进行操作](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

现在的问题是当我尝试运行时，`RKObjectManager`当 RestKit 首次尝试编译时，我在内部遇到以下问题：

```
 defaultMappingQueue = dispatch_queue_create("org.restkit.ObjectMapping", DISPATCH_QUEUE_SERIAL); 
```

> 未声明的标识符“DISPATCH_QUEUE_SERIAL”？！

有什么想法可能导致这种情况吗？我按照说明将所有正确的库链接到目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:00:49.427

`DISPATCH_QUEUE_SERIAL`仅在 OS X 10.7+/iOS 5.0+ SDK 上定义。如果您使用较旧的 SDK 构建，则可以将`NULL`第二个参数传递给`dispatch_queue_create()`. （不过，私有并发队列不适用于旧操作系统。）

# linux - 如何删除文本文件中带有模式的单词

> ID：10075087
> 
> 赞同：1
> 
> 时间：2012-04-09T14:55:40.503
> 
> 标签：linux, bash, vi

我用逗号（，）分隔文件

```
word1,word2,word3,word4  
word80,word81,word82 
```

这就是我要的

```
word1,word2  
word80,word81 
```

所以，我每行只需要两个单词，其余的我不关心，包括第二个逗号（，）
word3 word4 word82 可以删除或以简单的方式删除有条件的行；逗号不止一个

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T15:00:37.203

```
:%s/^\([^,]+,[^,]+\),.*$/\1/ 
```

您不需要在 中执行此操作`vi`，尽管其他两种解决方案是

```
awk -F, '{print $1 "," $2}' 
```

和

```
cut -d, -f1-2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T15:28:53.057

哇，有很多方法......这是使用的东西`sed`：

```
$ sed 's/\(^[^,][^,]*,[^,][^,]*\).*/\1/' $file_name 
```

第一个和最后一个呢？与`awk`：

```
$ awk '{print $1 "," $NF}` $file_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:06:18.087

```
$ cat input | cut -d, -f1,2
word1,word2
word80,word81 
```

您没有指定语言，因为您将其标记为 bash，所以我使用了它。

# css - DIV 在 Chrome/Firefox 中居中很好，但在 Safari 中不居中

> ID：10075090
> 
> 赞同：0
> 
> 时间：2012-04-09T14:55:46.463
> 
> 标签：css, wordpress, html, twitter-bootstrap

[http://jsfiddle.net/sBKk4/](http://jsfiddle.net/sBKk4/)

我正在使用 Twitter Bootstrap 并构建了页面，并且在 Chrome 中一切看起来都是正确的。但是在 Safari 中查看时，上面提供的代码的底部 div 不是居中对齐的。

![浏览器呈现的内容](../Images/b2d0a121934cee7ca8b3e1b5f6396a3a.png)

- 更新 -

`width`好的，我认为由于某种原因，我将其范围缩小到与 Chrome 和 Safari 不同的css 属性？

我已经将整个东西包裹在一个名为`paraWrapper`.

[http://jsfiddle.net/sBKk4/](http://jsfiddle.net/sBKk4/)

上面的代码在 Chrome 中可以正常显示，但在 Safari 上不合适。

如果我将宽度更改为类似的东西，`720px`那么它在 Safari 中看起来不错，但在 Chrome 中不合适。

所以我想我现在的问题是。有谁知道为什么会有这种差异？

我想我可以通过使用 CSS hacks 来解决这个问题，但如果我可以修复我的代码以获得更永久的修复，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:04:10.033

如果您遇到兼容问题，请务必指定您的 div 的边距和填充，即使它是 0。

```
padding: 0;
margin: 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T19:04:14.573

当你使用行时，你应该使用[这个](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)：

```
<div class="row">
  <div class="span4">...</div>
  <div class="span8">...</div>
</div> 
```

请记住使用带有类行的 div，并在其中使用带有 spanX 类的 div，其中所有跨度的 X 总和为 12

并且不要使用 center 属性。Bootstrap 为你做的。查看[此示例中的代码](http://twitter.github.com/bootstrap/examples.html)

# php - 相交嵌套数组时使用的最佳 PHP 数组函数是什么？

> ID：10075096
> 
> 赞同：1
> 
> 时间：2012-04-09T14:56:21.130
> 
> 标签：php, arrays, intersect

PHP 的数组非常灵活和有用。[我在 PHP.net 数组参考](http://us3.php.net/manual/en/ref.array.php)页面上统计了 30 多个数组函数。其中一些可以解决我的问题，但我正在寻找最好、最优雅的方法。

我有 2 个数组，称为`labor`and `cost`，每个数组都包含一个表：

```
labor = array(
   0 => array('date' => date, 'labor'=> labor), 
   1 => array('date' => date, 'labor'=> labor),
   ...
);

cost = array(
   0 => array('date' => date, 'cost'=> cost), 
   1 => array('date' => date, 'cost'=> cost),
   ...
); 
```

我的问题是，有时日期的数量不匹配（即，有些天你已经产生了成本，即使你没有在劳动力上花费，或者你有劳动力但没有成本的天数） - 这意味着还有更多一个数组中的行，然后是下一个数组 - 不使用`count()`.

我感兴趣的**只是有劳动力和成本的日子，**我想最终得到一个数组：

```
laborcost = array(
   0 => array('date' => date, 'labor'=> labor, 'cost' => cost), 
   1 => array('date' => date, 'labor'=> labor, 'cost' => cost),
   ...
) 
```

我考虑过使用`array_intersect()`或其中一个“u”函数，但最终完全混淆了。在放弃并编写自己的数组扫描函数之前，我想看看是否有任何想法可以解决我的 1 行，可能 2 行代码的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:29:10.520

没有 intersect 函数接受用户定义的比较函数，允许您修改数组。最简单的方法就是自己动手。

这里有一些例子：

**O(2n + m)**

```
// Remap dates as keys for faster lookups
$result = $nlabor = $ncost = array();
foreach ($labor as $l) $nlabor[$l['date']] = $l;
foreach ($cost as $c) $ncost[$c['date']] = $c;

// Compare
foreach ($nlabor as $date => $l) {
    if (array_key_exists($date, $ncost)) {
        $result[] = array_merge($l, $ncost[$date]);
    }
} 
```

**〜O（n * m）**

```
// Just compare them all
$result = array();
foreach ($labor as $l) {
    foreach ($cost as $c) {
        if ($l['date'] == $c['date']) {
            $result[] = array_merge($l, $c);
            break;
        }
    }
} 
```

哪种方式最好取决于每个数组中有多少元素。当在较小的数组上使用时，*~O(n * m)*很好，而在较大的数组上使用*O(2n + m)*会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:05:07.203

这应该做到这一点。不像单个函数那么简单。

```
$merge = array();

for ($i = 0; $i < count($labor); $i++) {
    array_push($merge, array_merge($labor[$i],$cost[$i]));
} 
```

# c# - 如何在 WindowsPhone 7 中清除图像缓存。将 UriSource 设置为 null 不起作用！在 WP7 中清除图像缓存还有哪些其他变体？

> ID：10075099
> 
> 赞同：2
> 
> 时间：2012-04-09T14:56:45.153
> 
> 标签：c#, windows-phone-7

Stefan Wick 在他的博客中写道，我们可以使用类似的代码清除 WP7 中的图像缓存

```
<code>
  BitmapImage bitmapImage = image.Source as BitmapImage;
  bitmapImage.UriSource = null;
  image.Source = null; 
```

[http://blogs.msdn.com/b/swick/archive/2012/04/05/10151249.aspx?CommentPosted=true#commentmessage](http://blogs.msdn.com/b/swick/archive/2012/04/05/10151249.aspx?CommentPosted=true#commentmessage)

我已经测试了他的示例——项目（ImageTips.zip）——我可以说上面的代码不起作用——它不会释放缓存图像的内存，也不会删除应用程序的缓存图像。

当您将 UriSource 设置为 null 时——您只会释放页面 Caching.xaml 上的内存，但如果您将导航回 MainPage.xaml --- 您将看到内存没有释放 --- 内存增加了！！！

看到我们可以使用 Stefan 的项目 --- ImageTips.zip in his blog...

[测试项目 ImageTips.zip](http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-components-postattachments/00-10-15-12-49/ImageTips.zip)

重现我的观察 --- 您可以： 1\. 将代码添加到 MainPage.xaml 以查看当前内存值，例如在 Caching.xaml 页面上：

```
<tab>

        DispatcherTimer timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromMilliseconds(500);
        timer.Start();
        timer.Tick += delegate
        {
            GC.Collect();
            tbMemory.Text = string.Format("Memory: {0} bytes", DeviceExtendedProperties.GetValue("ApplicationCurrentMemoryUsage"));
        };
</code> 
```

1.  运行您的应用程序。当我们第一次导航到 MainPage.xaml --- 内存值接近 9676448 字节
2.  点击导航到 Caching.xaml（图像缓存）---内存值接近 9011200 字节
3.  单击按钮 Show 以显示图像 -- 内存值接近 12996608 字节
4.  单击避免图像缓存（清除缓存的图像），然后按下按钮清除 --- 10090144 字节 .... 那么，413696 字节在哪里消失了？？？（10090144 - 9676448 = 413696 字节）
5.  单击按钮返回以导航回 MainPage.xaml --- 11828248 字节...但是导航到 Caching.xaml 之前的先前值是 9676448 字节...那么，哪里消失了 2151800 字节？？

    **如果您将导航 20 次到页面 Caching.xaml（单击显示图像并使用缓存清除图像）并且当导航回 MainPage.xaml --- 使用的内存将增加到 3.3 mb...等等**

我在我的应用程序中遇到了这个问题，不知道如何解决。

在 Windows phone 7 中清除图像缓存的其他变体有哪些？或者为什么通过将 UriSource 设置为 null 来清除图像缓存 --- 导航回上一页时不起作用（不释放内存）？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T16:33:35.877

我可以向您保证，博客中给出的示例是有效的。请注意，您在示例中处理的内存量非常小，您是否在这里或那里“丢失”了 2MB 并不重要。这可能是因为 GC 尚未启动，或者同时分配了一些其他对象。（如果您确实遇到了严重的泄漏，那么您必须检查代码中的其他地方）

在我自己的应用程序中，我正在处理大量图像。在任何给定时间，它们都会消耗多达 60 MB 的内存。因此，我非常偏执地没有任何内存泄漏来通过认证。

博客中的示例假定您正在以编程方式添加图像，并且您可以访问它们，因此您可以将源设置为 null。

```
 BitmapImage bitmapImage = image.Source as BitmapImage;
  bitmapImage.UriSource = null;
  image.Source = null; 
```

仅此一项就可以防止图像缓存。

但是，如果您使用数据绑定，您将很快意识到防止图像缓存可能并不容易。

在我使用数据绑定的应用程序中，我设置了类似于以下内容的内容：

假设您想在列表框中显示图像。

```
//MainPage.xaml
<StackPanel>
<ListBox ItemsSource="{Binding Pictures}">
    <ListBox.ItemTemplate>
       <DataTemplate>
          <Image MaxHeight="1000" Source="{Source}" />
       </DataTemplate>
    </ListBox.ItemTeplate>
</ListBox> 
<Button Tap="LoadImages_Tap" Content="Load Images" />
</StackPanel> 
```

-

```
 //Picture.cs
    public class Picture
    { 
        private BitmapImage _source = new BitmapImage()
        {
            CreateOptions = BitmapCreateOptions.BackgroundCreation | BitmapCreateOptions.IgnoreImageCache | BitmapCreateOptions.DelayCreation
        };

        public Picture(string url) {
            _source.UriSource = new Uri(url, UriKind.Absolute);
        }

        public BitmapImage Source
        {
            get
            {
                return _source;
            } 
        } 

    }
}

//MainPage.xaml.cs
private ObservableCollection<Picture> _pictures = new ObservableCollection<Picture>();
public ObservableCollection<Picture> Pictures {
  get {
   return _pictures;
  }
}
public MainPage() {
  //...
  DataContext = this;
}

protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
{
        if (e.NavigationMode == NavigationMode.Back)
        {
            PreventCaching();
            _pictures.Clear();
        }
        base.OnNavigatedFrom(e);
}  

private void PreventCaching() {
   foreach(var picture in _pictures) {
     picture.Source.UriSource = null;
   }
}
private void LoadPictures_Tap(object sender, EventArgs e) { 
     PreventCaching();
    _pictures.Clear();
    foreach(var url in SomeMethodThatReturnsUrlsForImages()) {  
      _pictures.Add(new Picture(url));
    }
} 
```

当您使用数据绑定时，上面应该清除图像缓存（当没有直接访问 <Image> 元素时）

或者，您可以创建一个自定义附加依赖项属性，因此您可以这样做： <Image ext:ImageExtension.Source="{SomeSource}" /> 并在那里处理缓存的清除，但我不需要它。

# android - 如何在 Google 地图中创建自定义界面

> ID：10075106
> 
> 赞同：0
> 
> 时间：2012-04-09T14:57:26.853
> 
> 标签：android, google-maps

我有一个项目来开发一个应用程序来获得谷歌地图的方向。
现在，我可以在地图中使用 GeoPoints（纬度和经度）绘制方向。但是，我希望我的应用程序可以让用户输入位置（从和到位置）（1）。所以，我想基于可用的谷歌地图界面（2）创建一个自定义界面。

我需要您在步骤 (1) 和 (2) 中的指示。

我非常感谢您能提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:38:42.353

您只需在布局中定义一对 EditText 组件，而不是用 MapView 填充它。

你知道你可以绘制任何你想要的东西，不仅仅是标记，通过在[自己的谷歌](http://developer.android.com/resources/tutorials/views/hello-mapview.html)教程或[其他](http://eagle.phys.utk.edu/guidry/android/mapOverlayDemo.html)关于使用覆盖的教程中描述的 OverlayItems，在 MapView 之上。

# jquery - 禁用 div 单击 Ajax 启动并在 Ajax 完成时重新启用它

> ID：10075108
> 
> 赞同：2
> 
> 时间：2012-04-09T14:57:30.467
> 
> 标签：jquery

我需要在 Ajax 请求开始时禁用 div（以便它不再接收点击）并在 Ajax 完成时重新启用它。我还希望在此过程中显示加载 gif。我认为这可以使用`ajaxStart`and来完成`ajaxStop`。但是，如果我是正确的，这些将触发任何启动或停止的 Ajax 请求。问题来了。我在一个页面上有多个 div，其中任何一个都可能触发 Ajax 请求。如何禁用/启用单击的“特定 div”以及如何使用 或任何其他方法显示/隐藏它的相应加载`ajaxStart`gif `ajaxStop`。请注意，如果这涉及到 click 事件的绑定/解除绑定，那么建议的方法需要保持与 jQuery 的兼容性`on()`。

HTML 如下所示：

```
<div class="button white"><img src="loading.gif" /></div>
<div class="button white"><img src="loading.gif" /></div>
<div class="button white"><img src="loading.gif" /></div> 
```

Ajax 的 Javascript 如下所示：

```
$('body').on('click', '.button', function(e){
e.preventDefault();

    $.ajax({
        url     : ajaxVars.ajaxurl,
        context : this,
        type    :'POST',
        async   : true,
        cache   : false,
        timeout : 1000,
        data    : { action : 'test_action' },
        success : function(response) {
            if (response == 1) {
                $(this).toggleClass('white').toggleClass('green');
            }
        },
        error   : function() {
            alert(error);
        }
   });
}); 
```

问候，约翰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:06:33.583

要禁用按钮，只需更改当前类按钮。

你可以使用这个：

```
$('body').on('click', '.button', function(e){
e.preventDefault();

$(this).removeClass('button').addClass('disabledbutton');

$.ajax({
    url     : ajaxVars.ajaxurl,
    context : this,
    type    :'POST',
    async   : true,
    cache   : false,
    timeout : 1000,
    data    : { action : 'test_action' },
    success : function(response) {
        if (response == 1) {
            $(this).toggleClass('white').toggleClass('green');
            $(this).removeClass('disabledbutton').addClass('button');
        }
    },
    error   : function() {
        alert(error);
    }

   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:01:28.727

简单地创建一些用于启用/禁用功能的辅助函数就可以很好地实现这一点。只需在单击时调用禁用 fn，并在 ajax 成功时调用启用函数。

```
function disableButton( button ) {
  //disable actions
}

function enableButton( button ) {
  //enable actions
}

$('body').on('click', '.button', function(e){

    e.preventDefault();
    disableButton( $(this) );

    $.ajax({
        url     : ajaxVars.ajaxurl,
        context : this,
        type    :'POST',
        async   : true,
        cache   : false,
        timeout : 1000,
        data    : { action : 'test_action' },
        success : function(response) {
            if (response == 1) {
                $(this).toggleClass('white').toggleClass('green');
                enableButton( $(this) );
            }
        },
        error   : function() {
            alert(error);
        }
   });
}); 
```

# c# - ObjectListView 不自动换行

> ID：10075111
> 
> 赞同：4
> 
> 时间：2012-04-09T14:57:41.033
> 
> 标签：c#, word-wrap, ownerdrawn, objectlistview

我使用 ObjectListView 而不是标准的 ListView 是因为我想对列进行自动换行。

我在几个地方读到，为了启用自动换行，我唯一需要做的就是设置`column.wordWrap`为 true。

我就是这样做的，但它不起作用。

我在这里想念什么？

**编辑：** 我现在意识到我需要绘制我的专栏所有者。我发现[这个页面](http://objectlistview.sourceforge.net/html/cookbook-ownerdraw.htm)告诉我该怎么做，但我不确定在我的代码中放置它的位置。我也不太确定是否需要在委托中添加某些属性以允许自动换行（从外观上看，它默认启用）。问题是，我尝试了在此页面中找到的内容，逐字复制，我的列表看起来完全一样......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T23:26:34.290

如果您的意思是“自动换行”，您希望不同的行具有不同的高度，那么常见问题解答是正确的——根本无法做到。

但是，如果您使每一行都可以显示两行或多行文本，那么，是的，`ObjectListView`可以自动换行。

它需要三个条件：

1.  在要换行的列上设置`WordWrap`为*true 。*你已经这样做了。
2.  确保`ObjectListView`是所有者绘制的（设置`OwnerDraw`为*true* - 这可以在表单设计器中完成）。基础`ListView`不能自动换行，所以我们必须自己绘制单元格。
3.  通过将 RowHeight 设置为 32（或其他一些值），确保有空间可以查看换行的行

这是演示中的数据选项卡。第一列已`WordWrap`设置为 true。 ![自动换行](../Images/fa70f9205391073b48028a0a401b881d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:02:56.577

在[ObjectListView SourceForge FAQ](http://objectlistview.sourceforge.net/html/faq.htm)页面上，它明确指出：

> 可以换行吗？
> 
> 不。

# c# - Accordian 和 GridView 中的 DropDownList 事件

> ID：10075114
> 
> 赞同：1
> 
> 时间：2012-04-09T14:57:55.693
> 
> 标签：c#, asp.net, events, gridview

在独立的 GridView 中绑定到 DropDownList 的事件显然会以这种方式工作，但在这种情况下事情会更复杂一些。

DropDownList 不会触发该事件。有趣的是绑定到 Button **Does fire**的事件。不确定 DropDownList 和 TextBox 之间有什么区别。

我已经尝试过 OnSelectedIndexChanged 和 OnTextChanged - 都不起作用。

嵌套如下：

1.  网格视图 A
2.  阿贾克斯手风琴
3.  GridView B（带下拉列表）

    ```
    <AjaxToolkit:AccordionPane ID="AccordionPane1" runat="server">
        <Header>        
        </Header>
        <Content>
            <asp:GridView runat="server" ID="gv" AutoGenerateColumns="false"
                BorderWidth="0" AlternatingRowStyle-BorderStyle="None" ShowFooter="true">
                <Columns>
                    <asp:TemplateField HeaderText="Id">
                        <ItemTemplate>
                            <asp:Label runat="server" ID="lblId" Text='<%# Eval("Id") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Type">
                        <ItemTemplate>
                            <asp:Label runat="server" ID="lblType"></asp:Label>
                        </ItemTemplate>
                        <FooterTemplate>
                            <asp:DropDownList runat="server" ID="ddlType" OnTextChanged="ddlType_SelectedIndexChanged"
                                AutoPostBack="true">
                            </asp:DropDownList>
                            <asp:Button runat="server" ID="btnTest" OnClick="btnTest_Click" Text="TEST" />
                        </FooterTemplate>
                    </asp:TemplateField>                                               
                </Columns>
            </asp:GridView>
        </Content> 
    ```

谢谢！

**更新**

原来这与嵌套的 GridViews 或 Accordion 无关。

添加以下内容后，该事件现在成功触发：

```
 if (!Page.IsPostBack)
                Populate(object); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T23:19:37.460

原来这与嵌套的 GridViews 或 Accordion 无关。

添加以下内容后，该事件现在成功触发：

```
 if (!Page.IsPostBack)
                Populate(obj); 
```

# python - 从 python 脚本调用 exiftool？

> ID：10075115
> 
> 赞同：12
> 
> 时间：2012-04-09T14:58:05.637
> 
> 标签：python, exiftool

我正在寻找使用 exiftool 从我的照片和视频中扫描 EXIF 标签。它是一个 perl 可执行文件。对此进行推断的最佳方法是什么？是否有任何 Python 库可以做到这一点？还是我应该直接调用可执行文件并解析输出？（后者似乎很脏。）谢谢。

我问的原因是因为我目前使用的是 pyexiv2，它不支持视频。Perl 的 exiftool 对图像和视频的支持非常广泛，我想使用它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-09T15:04:24.160

为避免为每个图像启动新进程，您应该开始`exiftool`使用该[`-stay_open`](http://www.sno.phy.queensu.ca/~phil/exiftool/exiftool_pod.html#item__2dstay_open_flag)标志。然后，您可以通过标准输入向进程发送命令，并在标准输出上读取输出。ExifTool 支持 JSON 输出，这可能是读取元数据的最佳选择。

这是一个简单的类，它启动一个`exiftool`进程并提供一种`execute()`向该进程发送命令的方法。我还包括`get_metadata()`以 JSON 格式读取元数据：

```
import subprocess
import os
import json

class ExifTool(object):

    sentinel = "{ready}\n"

    def __init__(self, executable="/usr/bin/exiftool"):
        self.executable = executable

    def __enter__(self):
        self.process = subprocess.Popen(
            [self.executable, "-stay_open", "True",  "-@", "-"],
            stdin=subprocess.PIPE, stdout=subprocess.PIPE)
        return self

    def  __exit__(self, exc_type, exc_value, traceback):
        self.process.stdin.write("-stay_open\nFalse\n")
        self.process.stdin.flush()

    def execute(self, *args):
        args = args + ("-execute\n",)
        self.process.stdin.write(str.join("\n", args))
        self.process.stdin.flush()
        output = ""
        fd = self.process.stdout.fileno()
        while not output.endswith(self.sentinel):
            output += os.read(fd, 4096)
        return output[:-len(self.sentinel)]

    def get_metadata(self, *filenames):
        return json.loads(self.execute("-G", "-j", "-n", *filenames)) 
```

此类被编写为上下文管理器，以确保完成后退出进程。您可以将其用作

```
with ExifTool() as e:
    metadata = e.get_metadata(*filenames) 
```

为 python 3 编辑：要让它在 python 3 中工作，需要进行两个小改动。第一个是对 的附加参数`subprocess.Popen`：

```
self.process = subprocess.Popen(
         [self.executable, "-stay_open", "True",  "-@", "-"],
         universal_newlines=True,
         stdin=subprocess.PIPE, stdout=subprocess.PIPE) 
```

第二个是您必须解码返回的字节系列`os.read()`：

```
output += os.read(fd, 4096).decode('utf-8') 
```

为 Windows 编辑：要使其在 Windows 上运行，`sentinel`需要更改为`"{ready}\r\n"`，即

```
sentinel = "{ready}\r\n" 
```

否则程序将挂起，因为 execute() 中的 while 循环不会停止

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-12T02:20:32.313

**以此为参考...**

```
import subprocess
import os
import json

class ExifTool(object):

    sentinel = "{ready}\n"

    def __init__(self, executable="/usr/bin/exiftool"):
        self.executable = executable

    def __enter__(self):
        self.process = subprocess.Popen(
            [self.executable, "-stay_open", "True",  "-@", "-"],
            stdin=subprocess.PIPE, stdout=subprocess.PIPE)
        return self

    def  __exit__(self, exc_type, exc_value, traceback):
        self.process.stdin.write("-stay_open\nFalse\n")
        self.process.stdin.flush()

    def execute(self, *args):
        args = args + ("-execute\n",)
        self.process.stdin.write(str.join("\n", args))
        self.process.stdin.flush()
        output = ""
        fd = self.process.stdout.fileno()
        while not output.endswith(self.sentinel):
            output += os.read(fd, 4096)
        return output[:-len(self.sentinel)]

    def get_metadata(self, *filenames):
        return json.loads(self.execute("-G", "-j", "-n", *filenames)) 
```

**... 使用 Python 3.8.10 和 IPYTHON 返回跟随错误；**

> " 56 57 e = ExifTool() ---> 58 e.load_metadata_lookup('/u02/RECOVERY/') 中的 AttributeError Traceback (最近一次调用最后一次)
> 
> 在 load_metadata_lookup(self, locDir) 51 '\n FILELOC > ', FileLoc, '\n') 52 ---> 53 self.get_metadata(FileLoc) 54 55
> 
> 在 get_metadata(self, FileLoc) 38 39 def get_metadata(self, FileLoc): ---> 40 return json.loads(self.execute("-G", "-j", "-n", FileLoc)) 41 42
> 
> 在执行（自我，*args）28 def执行（自我，*args）：29 args = args +（“-execute\n”，）---> 30 self.process.stdin.write（str.join（“ \n", args)) 31 self.process.stdin.flush() 32 输出 = ""
> 
> AttributeError：“ExifTool”对象没有属性“进程”

...

**然后进行一些修改......成功！... 使用 [https://stackoverflow.com/users/279627/sven-marnach] 进行修改和改编**

```
#!/usr/local/bin/python3
#! -*- coding: utf-8-mb4 -*-
from __future__ import absolute_import

import sys
import os
import subprocess
import json

headers_infos = """
.:.
.:. box33 | systems | platform |
.:. [   Renan Moura     ]
.:. [   ver.: 9.1.2-b   ]
.:.
"""

class ExifTool(object):
    sentinel = "{ready}\n"
    def __init__(self):
        self.executable         = "/usr/bin/exiftool"
        self.metadata_lookup    = {}

    def  __exit__(self, exc_type, exc_value, traceback):
        self.process.stdin.write("-stay_open\nFalse\n")
        self.process.stdin.flush()

    def execute(self, *args):
        self.process = subprocess.Popen([self.executable, "-stay_open", "True",  "-@", "-"],
            universal_newlines  = True                          ,
            stdin               = subprocess.PIPE               ,
            stdout              = subprocess.PIPE               ,
            stderr              = subprocess.STDOUT
        )

        args = (args + ("-execute\n",))

        self.process.stdin.write(str.join("\n", args))
        self.process.stdin.flush()

        output  = ""
        fd      = self.process.stdout.fileno()

        while not output.endswith(self.sentinel):
            output += os.read(fd, 4096).decode('utf-8')

        return output[:-len(self.sentinel)]

    def get_metadata(self, *FileLoc):
        return json.loads(self.execute("-G", "-j", "-n", *FileLoc))

    def load_metadata_lookup(self, locDir):
        self.metadata_lookup = {}
        for dirname, dirnames, filenames in os.walk(locDir):
            for filename in filenames:
                FileLoc=(dirname + '/' + filename)
                print(  '\n FILENAME    > ', filename,
                        '\n DIRNAMES    > ', dirnames,
                        '\n DIRNAME     > ', dirname,
                        '\n FILELOC     > ', FileLoc, '\n')

                self.metadata_lookup = self.get_metadata(FileLoc)
                print(json.dumps(self.metadata_lookup, indent=3))

e = ExifTool()
e.load_metadata_lookup('/u02/RECOVERY/') 
```

**...注意此代码ll来自“/u02/RECOVERY/” ...目录查找并在找到的每个文档上执行...希望这可以帮助您...**

# ember.js - ember js查看错误未捕获的TypeError：字符串不是函数

> ID：10075118
> 
> 赞同：2
> 
> 时间：2012-04-09T14:58:23.747
> 
> 标签：ember.js

目前我有这个代码

```
var App = Ember.Application.create();

App.user = Ember.Object.create({
  people: customers
});

App.editRowView = Ember.View.create({
  template:"editRowModal"
});

App.userView = Ember.View.extend({
  edit:function(e){
    console.log(this.content.id);
    App.editRowView.append();
  }
}); 
```

我的观点如下

```
<script type="text/x-handlebars" data-template-name="editRowModal">
    <div class="modalBox" id="modalBox">
        <span class="sprite closeToolTip"></span>
        <h4>Restart</h4>
        <div class="cont">

        </div>
        <div class="actions">
            <a class="cancelSendNotification">cancel</a>
            <a class="primary" id="restartCustomer">ok</a>
        </div>
    </div>
</script> 
```

我在页面上有一个按钮，单击时将编辑属性绑定到它。每次单击按钮时，我都可以控制台记录模型的 ID，但我似乎无法在 dom 中显示我的视图。我不确定发生了什么，因为我的 App.editRowView.template 指向我的视图模板的 data-template-name 属性，理论上它应该只是绑定......任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:03:48.847

尝试改变

```
App.editRowView = Ember.View.create({
  template:"editRowModal"
}); 
```

到

```
App.editRowView = Ember.View.create({
  templateName:"editRowModal"
}); 
```

# silverlight - 银光动画用户界面

> ID：10075119
> 
> 赞同：-1
> 
> 时间：2012-04-09T14:58:25.037
> 
> 标签：silverlight

我试图在第一页放一些标签，当鼠标悬停在它上面时，它应该是粗体并变大，当点击时，它会指向不同的页面。它会涉及 JavaScript 吗？有什么教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:04:26.017

对于 URL，您需要阅读有关[Silverlight 导航框架的](http://www.silverlightshow.net/items/The-Silverlight-3-Navigation-Framework.aspx)信息。

要使 URL 变粗并变大，您需要使用设置 MouseOverState VisualState Storyboard，如下所示：[在 Silverlight/WPF 按钮上设置 MouseOver 样式](https://stackoverflow.com/questions/2401519/style-the-mouseover-on-a-silverlight-wpf-button)。

# database - Code First Database Initializer is never called after upgrading to MVC 4

> ID：10075120
> 
> 赞同：0
> 
> 时间：2012-04-09T14:58:29.413
> 
> 标签：database, asp.net-mvc, data-access-layer, code-first

I have a strange problem this morning.

I followed this turotial : [http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application) ...

... on how to implement code first in your projects. I did the same tutorial 2 weeks ago and everything worked great. Since then, I made some changes and upgraded to MVC 4, and now Code First has stop working.

I tried the same tutorials, with exact same step I did before in a MVC3 web app, Drop the database, re-re-recreated it, and the "Seed" method Or the "OnModelCreating" in the DAL don't seems to be called any more.

I have my Database.SetInitializer(new AppInitializer()); In my Application_Start(), which is called, but after that nothing happens.

Somebody knows why this could have stop working suddenly? MVC4?

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T11:44:49.837

可能发生的情况是您第一次运行应用程序而没有调用`Database.SetInitializer(...)`. 此时数据库已创建。但是由于您没有对模型数据库进行任何更改，因此不需要创建或初始化 -`override void Seed(...)`不会调用 INITIALIZER 上的方法。

尝试在您的模型中进行一些虚拟更改并检查它是否有效。

请注意，`override void OnModelCreating(...)`第一次访问数据上下文时会调用它。因此，当您的主页不访问数据库时，您应该手动导航到可以访问的同一页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T20:43:25.293

当上下文发生变化时，您可以删除数据库并手动创建它，如果您使用的是 EF Code First 方法，我认为您不想这样做，或者您可以`Database.SetInitializer()`在应用程序启动时使用您所说的调用方法。

```
protected void Application_Start() {
    DbDatabase.SetInitializer(new 
        DropCreateDatabaseIfModelChanges<MyApp.Models.MyContext>());
    // ...
} 
```

至于`Seed()`这里的方法是我会怎么做

```
public class MyContextInitializer :
    DropCreateDatabaseIfModelChanges <MyApp.Models.MyContext>
{
    protected override void Seed(MyApp.Models.MyContext context)
        {
            base.Seed(context);

            context.Tags.Add(new Tag
            {
                    Name = ".NET",
                    Description = "Microsoft's .NET language related"
            });

            context.SaveChanges();
        }
} 
```

一旦你这样做了，你可以`DbDatabase.SetInitializer()`像这样改变你的方法调用：

```
protected void Application_Start() {
    DbDatabase.SetInitializer(new MyContextInitializer());
    // ...
} 
```

请注意，您可以使用您的类，只要它实现了`IDatabaseInitializer`.

关于 SQL Server 的最后一件事是确保您没有与提供程序的任何打开的连接，因为它无法删除数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T00:41:53.187

当我创建一个新的 MVC4 项目时，我遇到了同样的问题。原来是因为`InitializeSimpleMembershipAttribute`来电 `Database.SetInitializer<UsersContext>(null);`。看看`InitializeSimpleMembershipAttribute`你的项目中不属于你自己的其他调用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T00:39:37.950

您是否尝试将您的工作 MVC 3 项目转换为 MVC 4/Beta 或者您是否创建了一个新的 MVC 4/Beta 项目并按照教程进行操作？对于[MVC 4 Beta Intro to ASP.NET MVC](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)和 [Intro to ASP.NET MVC 4 Beta with Visual Studio 11 Beta](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc-4-and-visual-studio-2011/intro-to-aspnet-mvc-4)我从头开始。您必须进行一些调试以查看您做错了什么，MVC 4/Beta 不会破坏 EF。我希望在 2012 年 7 月 4 日左右将 Tom 的优秀 EF/MVC 教程更新到 MVC 4

# r - Ordering clustered points using Kmeans and R

> ID：10075122
> 
> 赞同：6
> 
> 时间：2012-04-09T14:58:37.190
> 
> 标签：r, cluster-analysis, k-means

I have set of data (of 5000 points with 4 dimensions) that I have clustered using kmeans in R.

**I want to order the points in each cluster by their distance to the center of that cluster.**

Very simply, the data looks like this (I am using a subset to test out various approaches):

```
id  Ans Acc Que Kudos
1   100 100 100 100
2   85  83  80  75
3   69  65  30  29
4   41  45  30  22 
5   10  12  18  16
6   10  13  10  9
7   10  16  16  19
8   65  68  100 100
9   36  30  35  29
10  36  30  26  22 
```

Firstly, I used the following method to cluster the dataset into 2 clusters:

```
(result <- kmeans(data, 2)) 
```

This returns a kmeans object that has the following [methods: cluster, centers etc.](http://stat.ethz.ch/R-manual/R-devel/library/stats/html/kmeans.html)

**But I cannot figure out how to compare each point and produce an ordered list.**

Secondly, I tried the seriation approach as suggested by another SO user [here](https://stackoverflow.com/questions/4786665/kmeans-inter-and-intra-cluster-ordering)

I use these commands:

```
clus <- kmeans(scale(x, scale = FALSE), centers = 3, iter.max = 50, nstart = 10)
mns <- sapply(split(x, clus$cluster), function(x) mean(unlist(x)))
result <- dat[order(order(mns)[clus$cluster]), ] 
```

Which seems to produce an ordered list but if I bind it to the labeled clusters (using the following cbind command):

```
result <- cbind(x[order(order(mns)[clus$cluster]), ],clus$cluster) 
```

I get the following result, which does not appear to be ordered correctly:

```
id  Ans Acc Que Kudos   clus
1   3   69  65  30  29  1
2   4   41  45  30  22  1
3   5   10  12  18  16  2
4   6   10  13  10  9   2
5   7   10  16  16  19  2
6   9   36  30  35  29  2
7   10  36  30  26  22  2
8   1   100 100 100 100 1
9   2   85  83  80  75  2
10  8   65  68  100 100 2 
```

I don't want to be writing commands willy-nilly but understand how the approach works. If anyone could help out or spread some light on this, it would be really great.

EDIT:::::::::::

As the clusters can be easily plotted, I'd imagine there is a more straightforward way to get and rank the distances between points and the center.

The centers for the above clusters (when using k = 2) are as follows. But I do not know how to get and compare this with each individual point.

```
 Ans    Accep     Que      Kudos
1 83.33333 83.66667 93.33333 91.66667
2 30.28571 30.14286 23.57143 20.85714 
```

NB::::::::

I don't need top use kmeans but I want to specify the number of clusters and retrieve an ordered list of points from those clusters.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T17:54:37.913

这是一个执行您所要求的示例，使用来自 的第一个示例`?kmeans`。它可能不是非常有效，但可以建立在它的基础上。

```
#Taken straight from ?kmeans
x <- rbind(matrix(rnorm(100, sd = 0.3), ncol = 2),
           matrix(rnorm(100, mean = 1, sd = 0.3), ncol = 2))
colnames(x) <- c("x", "y")
cl <- kmeans(x, 2)

x <- cbind(x,cl = cl$cluster)

#Function to apply to each cluster to 
# do the ordering
orderCluster <- function(i,data,centers){
    #Extract cluster and center
dt <- data[data[,3] == i,]
ct <- centers[i,]

    #Calculate distances
dt <- cbind(dt,dist = apply((dt[,1:2] - ct)^2,1,sum))
    #Sort
dt[order(dt[,4]),]
}

do.call(rbind,lapply(sort(unique(cl$cluster)),orderCluster,data = x,centers = cl$centers)) 
```

# java - 安卓背景图片

> ID：10075125
> 
> 赞同：0
> 
> 时间：2012-04-09T14:58:43.140
> 
> 标签：java, android, android-layout

我有一个尺寸为 720x1280 的背景图像，用于 LG Nitro P930 等大屏幕手机。但是，当我有一个显示此图像的应用程序时，它不会覆盖屏幕底部大约半英寸。该图像在正常和小屏幕尺寸上看起来都很好，并且我在清单文件中包含了所有支持屏幕。

有什么可以让我拉伸图像以适应屏幕的方法，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:05:25.033

在布局 xml 中添加 android:scaleType="fitXY" 和 fill_parent 的高度和宽度

* * *

您不必使用图像视图背景应该可以正常工作，您是否在某个地方使用滚动视图？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:58:57.273

我想到了。它实际上是手机上优化应用程序的设置。

# javascript - 如何使用 JavaScript 解析 Ruby JSON 字符串

> ID：10075126
> 
> 赞同：5
> 
> 时间：2012-04-09T14:58:44.670
> 
> 标签：javascript, ruby-on-rails, json

我正在尝试从 Rails 应用程序的 JSON 输出字符串中获取 JSON 对象。目前在 JavaScript 我正在做：

```
data = "<%= @chromosomes.html_safe %>"; 
```

但是，由于 JSON 对象的开头和结尾都有引号，因此它不会被呈现为 JSON 对象。相反，它正在做类似的事情

```
 data = "[{"name":"YHet","organism_id":"4ea9b90e859723d3f7000037"}]" 
```

有没有办法可以删除开头和结尾的引号，以便将对象视为数组而不是字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T15:02:27.157

你为什么不这样做：

```
data = <%= @chromosomes.html_safe %>; 
```

边注：

我希望你做这样的事情：

```
@chromosomes = [{ name: "YHet", organism_id: "foo" }].to_json 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:04:33.667

如果您使用的是 jQuery，您可以执行以下操作

```
var data = jQuery.parseJSON('[{"name":"YHet","organism_id":"4ea9b90e859723d3f7000037"}]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:00:46.070

使用评估：

var dataObject = eval('(' + dataString + ')');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:02:19.443

使用`JSON`大多数浏览器中包含的对象，或者如果您使用 jQuery 使用`$.jsonParse`方法，如果定义了对象，则尝试使用`JSON`对象，否则解析使用`eval`或更安全的方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-04T12:26:25.653

在控制器上

```
@my_var = MyObj.find_by_id(4).to_json 
```

以haml方式在页面上。

```
var my_json = $.parseJSON("#{j @my_var}"); //used JQuery to parser JSON string 
```

# javascript - jquery object, how to apply top level value to children?

> ID：10075129
> 
> 赞同：-1
> 
> 时间：2012-04-09T14:59:13.603
> 
> 标签：javascript

hi i am updating the keyIndex array, which is created in object, while i add the array to URL it's not work:

my code :

```
var dataObject = {
    Indices: {
        subIndex: {
            keyIndex: [], //this is not updating in baseURL 'keyIndex'
            method: 'GetCCINationalIndicesData',
            baseURL: 'http://107.20.173.235/BlufinAPI/Service/ConsumerConfidenceIndex.svc/GetCCINationalIndicesData?InputJSON={"IndexID":"' + keyIndex + '","FromMonth":"10","FromYear":"2011","ToMonth":"3","ToYear":"2012"}'
        }
    },
    Geography: {
        0: '1',
        tiers: {
            method: 'GetCCITierIndicesData'
        },
        regions: {
            method: 'GetCCIRegionIndicesData'
        },
        city: {
            method: 'GetCCICityIndicesData'
        }
    },
    Demographics: {}
} 
```

anything wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:05:11.633

这是因为在创建字符串`keyIndex`时只评估一次。`baseURL`

您可以`baseURL`改为创建一个函数...

```
baseURL:function() {
    return 'http://107.20.173.235/BlufinAPI/Service/ConsumerConfidenceIndex.svc/GetCCINationalIndicesData?InputJSON={"IndexID":"' + 
            this.keyIndex + 
            '","FromMonth":"10","FromYear":"2011","ToMonth":"3","ToYear":"2012"}';
} 
```

然后像函数一样调用它......

```
dataObject.Indices.subIndex.baseURL(); 
```

* * *

尽管最初`keyIndex`不是对对象属性的引用。

这与jQuery无关。

# ruby - Ruby analog of Java ScheduledExecutorService

> ID：10075130
> 
> 赞同：1
> 
> 时间：2012-04-09T14:59:18.353
> 
> 标签：ruby, multithreading

Does Ruby have analog of Java ScheduledExecutorService?

Instead this:

```
Thread.new do
  while true 
    puts "Do something..."
    sleep 1
  end
end 
```

Use something like this:

```
ScheduledExecutorService.new(timeout) do
  puts "Do something..."
end 
```

It's not so critical but more compact and clearer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:42:46.513

我找不到标准解决方案，但您可以使用[`Thread`](http://www.ruby-doc.org/core-1.9.3/Fiber.html)s 来实现它：

```
class ScheduledExecutor
  def threads
    @threads ||= []
  end

  def initialize(options = {}, &block)
    schedule options, &block unless block.nil?
  end

  def schedule(options = {}, &block)
    period = options.fetch :period, nil
    delay = options.fetch :delay, 0
    threads << Thread.new do
      sleep delay
      begin
        block.call
      end while period and sleep period
    end
  end
end

# Will it work?
puts Time.now; ScheduledExecutor.new(delay: 1, period: 2) { puts Time.now }
2012-04-09 14:46:57 -0300
2012-04-09 14:46:58 -0300
2012-04-09 14:47:00 -0300
2012-04-09 14:47:02 -0300
2012-04-09 14:47:04 -0300
2012-04-09 14:47:06 -0300
2012-04-09 14:47:08 -0300
2012-04-09 14:47:10 -0300 
```

# jquery - jQuery ajax 跨域调用

> ID：10075141
> 
> 赞同：0
> 
> 时间：2012-04-09T14:59:55.583
> 
> 标签：jquery, jsonp

我有以下代码来进行 jsonp 调用。

```
 var contacts;
     $.ajax({
                            url: "http://localhost:51973/Service1/GetContacts",
                            type: "GET",
                            async: false,
                            data: { companyName: company },
                            dataType: "jsonp",
                            success: function(data) {
                                contacts = data;
                            },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {
                                alert("error " + XMLHttpRequest.statusText);
                            }
                        }); 
```

但无论出于何种原因，我都将联系人视为未定义。我使用 fiddler 检查了流量，发现它得到了以下响应。

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0
Date: Mon, 09 Apr 2012 14:52:33 GMT
X-AspNet-Version: 4.0.30319
Content-Length: 100
Cache-Control: private
Content-Type: application/x-javascript
Connection: Close

jQuery17107471185381512466_1333983153278([{"Email":"john@test.com","Name":"Test Company"}]); 
```

那么为什么没有正确设置联系人变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:06:20.133

我猜你正试图在 ajax 调用之后立即使用 contacts 变量。你不能这样做。ajax 调用是异步的，因此在 ajax 调用完成后的某个时间完成。完成后，将调用成功处理程序。您需要将实际使用联系人信息的任何代码或任何函数调用放入成功处理程序中。这是异步编程，您必须以不同的方式对其进行编码。

```
success: function(data) {
    contacts = data;
    // put your code or function calls here that use the contacts data
}, 
```

# java - 如何使用文本动作

> ID：10075147
> 
> 赞同：5
> 
> 时间：2012-04-09T15:00:12.920
> 
> 标签：java, swing, action, key-bindings, jtextcomponent

从[AbstractAction](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractAction.html)使用[TextAction](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/TextAction.html)的目的是什么？以及如何将其用于以下用途：

*   插入符号

*   [JTextComponents](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html)中的选择

*   键绑定

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T19:12:07.320

来自[Java Swing 第 2 版](http://www.manning.com/robinson2/)：

> 所有文本组件共享一组默认操作。默认情况下，这些动作中的每一个都是 TextAction 的实例。JTextComponent 提供了一个私有静态 EditorKit，它由一组四个预构建的 TextAction 组成，所有文本组件通过使用默认的 Keymap 实例共享。
> 
> JTextComponent 维护对最近获得键盘焦点的文本组件的私有引用。TextActions 旨在利用这一点，如果调用事件的源不是文本组件，则每个 TextAction 都会在调用该组件时对该组件进行操作。

以下是一些实现[TextAction](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/TextAction.html)的示例：

[自定义编辑命令](http://exampledepot.8waytrips.com/egs/javax.swing.text/CreateCmd.html)

[寻找单词边界](http://exampledepot.8waytrips.com/egs/javax.swing.text/FindWord.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T23:27:19.783

在撰写此[答案](https://stackoverflow.com/a/10160836/230513)时，我想起了[`HTMLDocumentEditor`](http://www.artima.com/forums/flat.jsp?forum=1&thread=1276)Charles Bell 所著的一位著名人物，他说明了[`javax.swing.text.TextAction`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/TextAction.html). 那位编辑被列入[`Metaphase Editor`](http://kenai.com/projects/metaphaseeditor). 此相关[示例](https://stackoverflow.com/a/8534162/230513)显示了在中找到的操作，[`StyledEditorKit`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/StyledEditorKit.html)遵循相同的方法。所有此类操作都适用于[*Key Bindings*](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)`Caret` ，并且尽可能在由 维护的当前选择上进行操作。

# csv - 转换为 csv 以进行 phpMyAdmin 导入时如何处理 XSLX 电子表格中的单引号和双引号

> ID：10075157
> 
> 赞同：0
> 
> 时间：2012-04-09T15:00:57.300
> 
> 标签：csv, import, phpmyadmin

我的客户向我提供了一个 XSLX 电子表格，在某些列中可以有单引号和/或双引号。我在 LibreOffice 中打开它并将其保存为 CSV。然后我尝试在 phpMyAdmin 中导入它，但每次导入都会被单引号或双引号绊倒，这取决于我指示用于转义的哪个行。

将 XLSX 保存为 CSV 时，我选择 UTF-8 进行编码（默认为 Windows-1252），逗号作为列分隔符，选中“保存单元格内容，如图所示”。对于“文本分隔符”和“引用所有文本单元格”，我分别尝试了这两个选项（分隔符的单引号和双引号，引号的选中/未选中）。

然后在 phpMyAdmin 中，对于导入，我选择 UTF-8，用双引号（或单引号，与我在 LibreOffice 中选择的内容相匹配）括起来的列，对于用反斜杠、双引号和单引号进行转义的列.

在所有情况下，我都会收到错误消息“第 n 行的 CSV 输入中的列数无效”。行号取决于我为列转义/分隔符（单引号或双引号）选择的内容。如果我选择双引号作为分隔符，我会在第一行出现错误，其中有一列包含未转义的单引号，反之亦然。

如何在单元格中使用单引号和双引号导入此电子表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:55:11.603

好的，经过更多研究和“摆弄”后，我想通了。

在我的情况下，对于导入，我使用 LOAD DATA 选择了 CSV，对“包含的列”使用了双引号，并清除了转义的列。

LOAD DATA 显然告诉 phpMyAdmin 允许 MySQL 直接处理文件。如果我可以为“常规”CSV 导入选择指定分隔符等，我不确定为什么这会影响我的问题，但它似乎对我有用！

希望这可以帮助其他人。

# actionscript-3 - Database abstraction layer for AIR? (AS3)

> ID：10075158
> 
> 赞同：1
> 
> 时间：2012-04-09T15:01:00.700
> 
> 标签：actionscript-3, apache-flex, air

Just check with you folks to see if there is any library or framework that provides a database abstraction layer in ActionScript3 for an AIR application to access a local SQLite database.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:26:51.117

试试[AS3-SPOD](https://github.com/stickupkid/as3-spod)，我们每天都在一个相当高调的项目中使用它，到目前为止没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T11:43:37.930

我自己的两分钱：[https ://github.com/pranavh/AS3SQLite/](https://github.com/pranavh/AS3SQLite/)

使用它，扩展它，分享它，如果它对你有帮助，我很高兴。但是，如果您扩展它，请务必回馈项目。

# css - Prevent CSS classes from being overridden

> ID：10075159
> 
> 赞同：0
> 
> 时间：2012-04-09T15:01:03.170
> 
> 标签：css, jquery-ui

I have a project that uses JQuery-UI. I recently found formee, which is a nice framework for building forms. One annoyance is that the formee submit button styling overrides the jquery-ui themed button style. How can I get all of the formee goodness but keep my jquery-ui button style? I realize I can edit the formee CSS to remove the button style, but I'm hoping to avoid that.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:10:25.343

正如您自己所说，您可以删除有问题的 CSS，这是我的建议。

或者，您可以为应用在相关按钮上的 jQuery UI css 类提供比 formee 类[更具特异性。](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)这将是第二好的解决方案。

作为最后一种情况，您可以`!important;`在 jQuery UI 的类中添加所有 CSS 属性......我真的不推荐这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:10:10.883

用它来把前面：

```
#your-div-id{
   position:relative;
   z-index:999999;
} 
```

# ruby-on-rails - Rails 和类变量：这会在用户和服务器调用中持续存在吗？

> ID：10075167
> 
> 赞同：3
> 
> 时间：2012-04-09T15:01:44.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我们在 Rails 3.0.6 上。

以下代码会在 Rails 中的页面加载和用户之间持续存在吗？还是每次请求都会重新定义它？代码位于控制器的顶部。

```
@@list = []

hero = {}
hero['name'] = 'so'
hero['superpowers'] = ['coding', 'qa', 'spec_writing']
@@list.push hero

hero2 = {}
hero2['name'] = 'so2'
hero2['superpowers'] = ['coding']
@@list.push hero2
... more Hashes pushed into @@list 
```

该列表每月仅更改一次，我们希望高效、快速地将这些数据提供给页面请求。我们最终将使用 Rails.cache 从数据库中读取，但我们现在使用以下方法（假设它有效）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T15:13:26.117

在开发中，默认行为是在每次请求时重新加载类，从而重置您的类变量。然而，在生产中，类被初始化一次，因此类变量将在多个请求和多个会话中持续存在。

您应该尽快使用适当的缓存技术。显然，当应用程序重新启动时，您不能在*重新加载*类之后保留该值。此外，如果 Web 服务器是多线程的（很可能是），它可能会在*不*共享类变量的不同线程上运行应用程序的多个实例，从而可能在请求之间造成不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:17:02.333

我刚刚遇到了同样的问题并找到了这篇文章。我知道这是一个老问题，但发布我的答案以防其他人面临类似问题......

我认为对于由于某种原因无法使用**数据库**或**Rails.cache的情况，放置这些值的最佳位置是 Application 类。**只需定义一些属性并初始化它。**然后就可以像Rails.application.heros**一样轻松访问它。下面的快速和肮脏的样本：

在 config/application.rb

```
module YourRailsApp
  class Application < Rails::Application
    attr_reader :heros

    initializer "init heros" do 
      @heros = []

      hero = {}
      hero['name'] = 'so'
      hero['superpowers'] = ['coding', 'qa', 'spec_writing']
      @heros.push hero

      hero2 = {}
      hero2['name'] = 'so2'
      hero2['superpowers'] = ['coding']

      @heros.push hero2
    end

    #Other application sutff...
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:13:37.933

我有时会使用我所谓***的穷人缓存***。

它的工作方式如下：

*   在初始化程序中，添加：`MY_CACHE_HASH = {}`

*   哪里都行：`MY_CACHE_HASH[:foo] = :bar`

*   任何你需要的地方`MY_CACHE_HASH[:foo] #=> :bar`

不过我不推荐它：如果你的服务器崩溃了，你会怎么做？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:33:22.200

如果您有*在 rails 运行时不会更改*的数据，那么可以使用`@@class_variable`.

请记住（在默认开发配置中）控制器类在每次请求时都会重新加载，因此如果您需要说，从文件中读取数据，请考虑将初始化数据的代码放入 config/application.rb 中一个`$global`或`CONSTANT_VAR`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T18:23:43.513

所以你描述的是一个不是数据库的数据结构。我认为在您的代码中而不是在您的数据库中拥有“从不”更改的项目是完全合理的。

例如，您可以：

在 app/models/hero.rb

```
class Hero
  @@all_heros = []
  def self.all_heros
    @@all_heros
  end
  def self.add_hero(hero)
    @@all_heros << hero
  end
  def initialize(name, superpowers=[])
    @name = name
    @superpowers = superpowers
  end
end

# this will get executed on load
Hero.add_hero( Hero.new("so", ['coding', 'qa', 'spec_writing'])) 
```

然后稍后在您的代码中，您将访问：

```
@heros = Hero.all_heros 
```

稍后，如果需要，您可以换成数据库支持的存储。

# python - 用于从视频中读取元数据的 Python 本机库？

> ID：10075176
> 
> 赞同：5
> 
> 时间：2012-04-09T15:02:08.800
> 
> 标签：python, exiftool, pyexiv2

是否有 Python 库可以从视频文件中读取元数据（相机模型、创建时间等）？Perl 等价物是“exiftool”。我检查了 pyexiv2，但它没有像 exiftool 那样的视频支持。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:34:00.807

我已成功使用 hach​​oir-metadata：http: [//pypi.python.org/pypi/hachoir-metadata](http://pypi.python.org/pypi/hachoir-metadata)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-01T04:41:18.760

我用过`PyExifTool`，命令行程序的包装器，exif 工具。[您可以在此处](http://github.com/smarnach/pyexiftool)获取该库（我认为这是 Sven 评论中相关问题的结果）。

PyExifTool 的巧妙之处在于它还为您将元数据解析为字典。

我在 os.walk 的文件名列表中使用了它。

```
import exiftool 
exif_Executable="<path to exif executable>"    

with exiftool.ExifTool(executable_=exif_Executable) as et:
        metadata = et.get_metadata_batch(fileList) 
```

# php - 使用 AJAX jQuery API 和 PHP 难以显示错误消息。

> ID：10075183
> 
> 赞同：0
> 
> 时间：2012-04-09T15:02:23.090
> 
> 标签：php, jquery, javascript

我正在使用 jQuery AJAX 函数来从我的 mySQL 数据库中检索数据，而无需刷新页面。我的一切正常，我的查询正在从我的数据库中检索正确的数据。但是，当无法根据用户输入检索到数据时，我正在努力回显一条错误消息。我有一个 php 文件，它为用户提供搜索的用户界面，它还包含文档头中的以下脚本。

这是我到目前为止所拥有的：-

```
<script type="text/javascript">
$(function(){
    $('#users').keyup(function(){
        var inpvalue= $('#users').val();
    });
});
</script>

<script type="text/javascript">
$(function(){
            $('#users').keyup(function(){

            var inpval=$('#users').val();

            $.ajax({
                type: 'POST',
                data: ({p : inpval}),
                url: 'data.php',
                success: function(data) {
                     $('#output_div').html(data);

          }
        });
    });
});

</script> 
```

任何帮助将不胜感激，对不起，如果我没有很好地解释自己。
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:19:01.663

修改您的 .ajax() 调用，以便您可以检测错误情况：

```
 $.ajax({
            type: 'POST',
            data: ({p : inpval}),
            url: 'data.php',
            success: function(data) {
                 $('#output_div').html(data);

            },
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(errorThrown);
            }
        }); 
```

这只是为了让您入门：请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)以获取有关您可以使用错误处理程序做什么的更多详细信息。

当然，您可能从调用中获得了良好的 HTTP 状态，但这种防御性编程将确保。

在您的浏览器中运行的 Firebug 等工具也可以帮助您检测错误的 HTTP 状态代码返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:09:44.710

在 data.php 中，当数据无效时，您必须输出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:22:54.380

仅当实际的 ajax 请求出现问题（例如服务器返回 404）时，才会调用`error`设置。您必须在 json 中返回错误并像这样检查它：`$.ajax`

```
$('#users').keyup(function(){

    var inpval=$('#users').val();

    $.ajax({
        type: 'POST',
        data: ({p : inpval}),
        url: 'data.php',
        success: function(data) {
              if(!data.error) {
                  $('#output_div').html(data);
              }
              else {
                  // show error
              }
        }
    });
}); 
```

然后，当数据正常时，您将返回正常的 json，然后针对错误返回类似以下内容：

`{"error": "Oh NOES!"}`

# git - 特定远程分支名称的 Git 列表

> ID：10075184
> 
> 赞同：41
> 
> 时间：2012-04-09T15:02:24.400
> 
> 标签：git, git-branch

如何获得一些远程起源分支的所有名称？

我从`--remote --list`选项开始，但从另一个来源得到了多余`origin/HEAD -> origin/master`的消息和分支。

```
$> git branch --remote --list
  origin/HEAD -> origin/master
  origin1/develop
  origin1/feature/1
  origin1/feature/2
  origin1/feature/3
  origin1/master
  origin2/develop
  origin2/feature/1
  origin2/feature/2
  origin2/master 
```

特定来源的分支可以与`<pattern>`选项匹配，但冗余消息仍然存在。实际上，这种模式并不真正正确，因为某个来源的名称可能是另一个来源名称的子字符串，甚至是某个分支。

```
$> git branch --remote --list origin1*
  origin1/HEAD -> origin/master
  origin1/develop
  origin1/feature/1
  origin1/feature/2
  origin1/feature/3
  origin1/master 
```

我要查找的是 的分支名称列表`origin1`，其中任何一个都可以用于`git checkout`命令。像这样的东西：

```
develop
feature/1
feature/2
feature/3
master 
```

重要的是，它应该在没有`grep`, `sed`，`tail`甚至`ghc -e`包装器的情况下完成，只有真正`git`的力量，因为它们的不安全性和变化。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-09T16:43:53.407

> 重要的是它应该在没有`grep`, `sed`,`tail`甚至`ghc -e`包装器的情况下完成，只使用真正的 git 功能，因为它们的不安全性和变化。

这仅适用于 git 瓷器命令（请参阅“[瓷器一词在 Git 中是什么意思？](https://stackoverflow.com/questions/6976473/what-does-the-term-porcelain-mean-in-git/6978402#6978402) ”）

使用管道命令**[ls-remote](http://linux.die.net/man/1/git-ls-remote)**，然后您将能够过滤其输出。

不带参数的 ls-remote 仍然会列出远程 HEAD：

```
git@vonc-VirtualBox:~/ce/ce6/.git$ git ls-remote origin
8598d26b4a4bbe416f46087815734d49ba428523    HEAD
8598d26b4a4bbe416f46087815734d49ba428523    refs/heads/master
38325f657380ddef07fa32063c44d7d6c601c012    refs/heads/test_trap 
```

但是，如果您只询问所述遥控器的负责人：

```
git@vonc-VirtualBox:~/ce/ce6/.git$ git ls-remote --heads origin
8598d26b4a4bbe416f46087815734d49ba428523    refs/heads/master
38325f657380ddef07fa32063c44d7d6c601c012    refs/heads/test_trap 
```

最终答案：

```
git@vonc-VirtualBox:~/ce/ce6/.git$ git ls-remote --heads origin  | sed 's?.*refs/heads/??'
master
test_trap 
```

（是的，它使用`sed`，但是管道命令的输出应该足够稳定以便被解析）

* * *

另请参阅[Git 2.23（2019 年第三季度），其中记录了一个示例](https://stackoverflow.com/a/56979330/6309)：

```
git branch -r -l '<remote>/<pattern>'
git for-each-ref 'refs/remotes/<remote>/<pattern>' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-25T22:11:13.207

在对同一问题进行一些研究之后，另一种方法是：

```
git for-each-ref --format='%(refname:strip=2)' refs/remotes/<remote_name> 
```

这将为您最后一次获取的命名远程提供本地参考的排序列表。

您可以针对他们的标签等进行调整。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-21T12:37:42.830

现有答案既使用了问题中明确不需要的东西（sed），又是一个远程命令。

我发现这可以避免这两个问题，只使用本地 git 命令和管道：

```
git rev-parse --remotes=origin | git name-rev --name-only --stdin 
```

**更新**：也不是最理想的，但如果有人知道如何改进它，请保留它。如果您没有本地分支，它会列出完整的远程，包括*/remotes/origin前缀，但如果有则仅列出本地名称。*此外，如果有几个指向同一个 SHA1，它似乎会跳过一些参考。

# c# - Windows Phone 中的自定义控件：创建数字密码框

> ID：10075195
> 
> 赞同：1
> 
> 时间：2012-04-09T15:03:18.853
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

我有一个带有自定义验证的自定义 TextBlock，但我还需要使用密码框功能。如何制作自定义数字密码框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:35:11.667

只需将 PasswordBox 添加到您的 XAML 中，如下所示：

```
<PasswordBox x:Name="MyPasswordBox" KeyDown="MyPasswordBox_KeyDown" /> 
```

然后使用 KeyDown 事件删除所有不是从 0 到 9 的按键，如下所示：

```
private void MyPasswordBox_KeyDown(object sender, KeyEventArgs e)
{
    e.Handled = (e.Key < Key.D0 || e.Key > Key.D9);
} 
```

# javascript - 关闭选项卡以关注前一个选项卡而不是第一个选项卡时如何更改 dojo 内容选项卡焦点？

> ID：10075198
> 
> 赞同：1
> 
> 时间：2012-04-09T15:03:31.797
> 
> 标签：javascript, user-interface, dojo, dijit.layout

我正在使用`Dojo`'s`Dijit Layout`来生成类似于`Dijit` [Theme Tester Demo](http://archive.dojotoolkit.org/nightly/dojotoolkit/dijit/themes/themeTester.html)的内容选项卡窗格。这里的所有选项卡都是可关闭的。

问题是：当我关闭一个选项卡时，它会返回到列表中的第一个选项卡，而不是前一个选项卡（在它旁边可用）。

您可以将其想象为在 Firefox 或 Chrome 中打开一个新选项卡并尝试关闭最后一个选项卡......在关闭选项卡时，它将焦点更改为上一个选项卡，这是使用选项卡的可预测行为。但是对于`dijit.TabContainer`s，默认情况下它会返回到第一个选项卡而不是前一个选项卡。当您考虑 UI 基础知识时，这是一个严重的缺陷。

我已经检查了`dojo`文档，但没有找到任何提示。知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T18:45:14.030

**好的，所以当点击dijit.layout.ContentPane** (tab)上的 [X] 按钮时，会生成**onClose事件，** **dijit.layout.TabContainer**正在监听这个事件，所以当这种情况发生时，它会执行回调**closeChild()**然后函数***removeChild()***被执行，最后一个是你应该覆盖的。

**tabContainer 从dijit.layout.StackContainer**继承了这两个函数，您应该查看 API 文档。

因此，为了能够修改关闭选项卡的默认行为，您应该覆盖默认功能，在下面的示例中我这样做。阅读评论以获取有关在何处添加逻辑的信息。

例如

```
<script>
    require([
        "dojo/parser",

        "dojo/_base/lang", //this is the one that has the extend function
        "dojo/topic", //this is needed inside the overrided function

        "dijit/layout/TabContainer",
        "dijit/layout/ContentPane", 

        "dojo/domReady!"
    ], function(Parser, lang, topic, tabContainer, contentPane){
        Parser.parse();

        // this will extend the tabContainer class and we will override the method in question
        lang.extend(tabContainer, {

            // this function, i copied it from the dijit.layout.StackContainer class
            removeChild: function(/*dijit._Widget*/ page){

                // for this to work i had to add as first argument the string "startup"
                this.inherited("startup", arguments);

                if(this._started){
                    // also had to call the dojo.topic class in the require statement
                    topic.publish(this.id + "-removeChild", page);  
                }

                if(this._descendantsBeingDestroyed){ return; }

                if(this.selectedChildWidget === page){
                    this.selectedChildWidget = undefined;
                    if(this._started){
                        var children = this.getChildren();
                        if(children.length){

                            // this is what you want to add your logic
                            // the var children (array) contains a list of all the tabs
                            // the index selects the tab starting from left to right 
                            // left most being the 0 index   

                            this.selectChild(children[0]);
                        }
                    }
                }

                if(this._started){
                    this.layout();
                }
            }
        });

        // now you can use your modified tabContainer WALAAAAAAA!
        // from here on, normal programmatic tab creation
        var tc = new tabContainer({
            style: "height: 100%; width: 100%;",
        }, "tab-container-div-id");

        var cp1 = new contentPane({
            title: "First Tab",
            closable: true
        });
        tc.addChild(cp1);

        var cp2 = new contentPane({
            title: "Second Tab",
            closable: true
        });
        tc.addChild(cp2);

        var cp3 = new contentPane({
            title: "Third Tab",
            selected: true,
            closable: true
        });
        tc.addChild(cp3);

        tc.startup();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T09:45:22.217

在 Dojo 1.10 中，恢复到前一个选项卡是 TabContainers 的正常行为（而不是恢复到第一个选项卡）。

据推测，您可以使用`dojo/aspect`来获取旧行为（警告：未测试）：

```
require( [ 'dijit/registry', 'dojo/aspect', 'dojo/_base/lang' ],
    function( registry, aspect, lang )
    {
        var tabContainer = registry.byId( 'tab_container');
        aspect.before( tabContainer, 'removeChild', lang.hitch( tabContainer, function( page )
        {
            if(this.selectedChildWidget === page)
            {
                this.selectedChildWidget = undefined;
                if(this._started)
                {
                    var children = this.getChildren();
                    this.selectChild( children[0] );
                }
            }

            return page;
        } ) );
    }
); 
```

或者，或者，您可以使用`onClose`选项卡上的扩展点`ContentPane`：

```
require( [ 'dijit/registry', 'dojo/_base/lang' ],
    function( registry, lang ) {
        newTabPane.onClose = lang.hitch(this, function () {
            // select first
            var tabContainer = registry.byId('tab_container'),
                all_tabs = tabContainer.getChildren();
            tabContainer.selectChild( all_tabs[0] );

            // allow save to go ahead
            return true;
        });
    }
); 
```

显然，这两种方法都允许您在关闭的选项卡上选择特定的不同窗格，而不是稍作调整......

# c++ - 将偏航和俯仰结合在一起

> ID：10075201
> 
> 赞同：3
> 
> 时间：2012-04-09T15:03:46.617
> 
> 标签：c++, math, glm-math

为什么结果A不等于结果B？我不知道我做错了什么。你能给我一个解释吗？

```
float alpha = glm::radians(45.0f);

glm::mat4 xRot(glm::vec4(1, 0, 0, 0),
               glm::vec4(0, glm::cos(alpha), glm::sin(alpha), 0),
               glm::vec4(0, -glm::sin(alpha), glm::cos(alpha), 0),
               glm::vec4(0, 0, 0, 1));

glm::mat4 yRot(glm::vec4(glm::cos(alpha), 0, -glm::sin(alpha), 0),
               glm::vec4(0, 1, 0, 0),
               glm::vec4(glm::sin(alpha), 0, glm::cos(alpha), 0),
               glm::vec4(0, 0, 0, 1));

glm::vec4 vec(0, 0, -100, 1);

glm::vec4 resultA(0.0f);
glm::vec4 resultB(0.0f);

resultA = xRot  * yRot * vec; //(-70.7107, 50, -50, 1)
resultB = yRot  * xRot * vec; //(-50, 70.7107, -50, 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:07:30.457

3D 旋转一般不会通勤，除非在非常特殊的情况下。因此：

```
xRot * yRot != yRot * xRot 
```

从本质上讲，您对上述内容所做的事情证明了这一点:)

见这里：[http ://en.wikipedia.org/wiki/Commutative_property](http://en.wikipedia.org/wiki/Commutative_property)

# zend-framework - ZF 1.11 表单不显示我的空格

> ID：10075204
> 
> 赞同：1
> 
> 时间：2012-04-09T15:03:50.757
> 
> 标签：zend-framework, zend-form

我想创建一个多级组合框，如下例所示：

```
<select style="white-space: pre;">
    <option value="0">1 - categoria 0</option>
    <option value="1">&nbsp;1.1 - categoria 1</option>
    <option value="2">&nbsp;&nbsp;1.1.1 - categoria 2</option>
    <option value="3">&nbsp;&nbsp;&nbsp;1.1.1.1 - categoria 3</option>
    <option value="4">&nbsp;&nbsp;&nbsp;&nbsp;1.1.1.1.1 - categoria 4</option>
    <option value="5">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.1.1.1.1.1 - categoria 5</option>
</select> 
```

结果应该是：

```
1 - categoria 0
 1.1 - categoria 1
  1.1.1 - categoria 2
   1.1.1.1 - categoria 3
    1.1.1.1.1 - categoria 4
     1.1.1.1.1.1 - categoria 5 
```

我正在创建我的 ZF 1.11 表单，如下所示：

```
class Admin_Form_Category extends Zend_Form
{
    public $elementDecorators2 = array(
        'ViewHelper',
        'Errors',
        array(array('data' => 'HtmlTag'), array('tag' => 'td', 'class' => 'elementSelect')),
        array('Label', array('tag' => 'td')),
        array(array('row' => 'HtmlTag'), array('tag' => 'tr')),
    );

    public function __construct($options = null)
    {
        //parent::__construct($options);

        $view = new Zend_View();
        $baseUrl = $view->baseUrl();

        // Translating the form
        $translate = Zend_Registry::get('translate');

        $this->setName('formcategory');
        $this->setAttrib('accept-charset', Zend_Registry::get('config')->resources->view->encoding);
        $this->setMethod('post');
        $this->setEnctype(Zend_Form::ENCTYPE_MULTIPART);

        /* HERE IS MY COMBOBOX */
        $parent = new Zend_Form_Element_Select('parent');
        $parent->addErrorMessage($translate->_('You must select an parent'));
        $parent->setLabel($translate->_('Parent'))
            ->setDecorators($this->elementDecorators2)
            ->setRequired(false)
            ->addFilter('StripTags')
                ->setValue( isset($options[ $parent->getName() ]) ? $options[ $parent->getName() ] : '');
        $model = new App_Models_Category();
        $data = $model->fetchAll();

        $parent->addMultiOption('','');
        foreach($data as $row){
                $itemLevel = str_repeat("&nbsp;",$row['level']);
            $parent->addMultiOption($row['category'],$itemLevel.$row['name']);
        }
        $this->addElement($parent);

        /* ... */
    }
} 
```

但是，由于某种原因，组合框是这样创建的：

```
<select id="parent" name="parent">
    <option selected="selected" label="" value=""></option>
    <option label="teste" value="14">teste</option>
    <option label="test3" value="16">test3</option>
    <option label="test4" value="17">test4</option>
    <option label="&amp;nbsp;final" value="23">&amp;nbsp;final</option>
    <option label="&amp;nbsp;&amp;nbsp;final2" value="24">&amp;nbsp;&amp;nbsp;final2</option>
</select> 
```

结果是：

```
teste
test3
test4
&nbsp;final
&nbsp;&nbsp;final2 
```

然后，不显示空格...

有人可以帮助我吗？！

*   我忘了说，我的 ZF 表格有这个 css：

    选择{空白：pre；}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:07:20.027

**`$this->setAttrib('escape', false);`不适用于 Zend_Form_Element_Select。**

目前，无法使用本机方法执行此操作，因为此处`Zend_View_Helper_FormSelect`包含[已报告的错误 (ZF-9388)](http://framework.zend.com/issues/browse/ZF-9388)。

唯一的解决方案是**覆盖 formSelect 视图助手**并使其按您想要的方式工作。例如，您需要编写如下内容：

```
$opt = '<option'
             . ' value="' . $value . '"'
             . ' label="' . $label . '"'; 
```

而不是这个：

```
$opt = '<option'
             . ' value="' . $this->view->escape($value) . '"'
             . ' label="' . $this->view->escape($label) . '"'; 
```

在`_build()`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:46:51.643

默认情况下 ZF 会从 Zend_Form 转义输入，您可以通过将以下内容添加到 Zend_Form_Element 来防止这种情况：

```
$this->setAttrib('escape', false); 
```

# php - PHP smarty变量错误

> ID：10075205
> 
> 赞同：0
> 
> 时间：2012-04-09T15:03:51.857
> 
> 标签：php, variables, smarty

我有这个错误

> " 注意：未定义的变量：C:\WAMP\WWW\SITE\TOOLS\SMARTY\SYSPLUGINS\SMARTY_INTERNAL_DATA.PHP 中的 LOGO 在第 291 行调用堆栈上"

这是我的PHP代码

```
function hookFooter($params)
{
    global $smarty;
    $smarty->assign('ENT_QUOTES', ENT_QUOTES);
    if( file_exists('modules/ebbrandingfooter/logo-footer.jpg')){
        $smarty->assign('logo','modules/ebbrandingfooter/logo-footer.jpg');
    };
    $FOOTERdescription=Configuration::get('FOOTER_DESC');
    $smarty->assign('description',$FOOTERdescription );
    return $this->display(__FILE__, 'ebbrandingfooter.tpl');
} 
```

这里是 TPL

```
 {if $logo}<img src="{$logo}" />{/if}
  <p>{$description}</p> 
```

谁能帮助我我做错了什么？谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:09:56.177

您可以修改您的 PHP 代码以确保设置了 $logo，例如：

```
function hookFooter($params)
{
    global $smarty;
    $smarty->assign('ENT_QUOTES', ENT_QUOTES);
    if( file_exists('modules/ebbrandingfooter/logo-footer.jpg')){
        $smarty->assign('logo','modules/ebbrandingfooter/logo-footer.jpg');
    } else {
        $smarty->assign('logo', null);
    }
    $FOOTERdescription=Configuration::get('FOOTER_DESC');
    $smarty->assign('description',$FOOTERdescription );
    return $this->display(__FILE__, 'ebbrandingfooter.tpl');
} 
```

另请注意，在 a 之后`}`不需要分号。

# php - Mysql连接查询从其他表中检索具有ID的用户的个人资料图像

> ID：10075208
> 
> 赞同：0
> 
> 时间：2012-04-09T15:04:20.170
> 
> 标签：php, mysql

我在连接查询时遇到问题，我的问题如下。

```
Table: battles
Fields: id,attacker_id,defender_id

Table: users
Fields: id,profile_image 
```

我想做一个查询来检索一场战斗并从另一个表中获取个人资料图像。

有没有办法一次性做到这一点，还是我必须做不止一个？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:21:47.513

我想等一会儿，看看您是否有任何尝试，或者您是否会回答我的第一个问题以了解我是否理解问题。但也许你没有起点。尝试类似：

```
SELECT 
    a.profile_image as attacker_profile_image,
    d.profile_image as defender_profile_image
FROM 
    `battles` b
LEFT JOIN 
    `users` a 
ON 
    b.`attacker_id` = a.`id` 
LEFT JOIN 
    `users` d 
ON 
    b.`defender_id` = d.`id` 
```

这里的问题是您需要与 users 表连接两次，因此您需要为您计划使用的列创建别名

此查询将仅获取两个图像，您需要添加额外的字段

# macos - TestNG ant 任务在 Mac OS X 上失败并出现错误：未找到测试套件

> ID：10075209
> 
> 赞同：0
> 
> 时间：2012-04-09T15:04:24.047
> 
> 标签：macos, ant, testng

我有一个主要在 Windows 中开发的 Java 项目。我有一些我在 TestNG 中编写的单元测试，我也运行它们......我正在使用 TestNG 版本 5.14.1

我的项目在 OS X 下编译良好。TestNG 测试也编译良好。但是当我尝试执行单元测试时，任务失败并出现以下错误：

```
Omair-Inams-MacBook-Pro:PNServices omairkhawaja$ ant clean testng
...

compile-and-jar:
    [mkdir] Created dir: /Users/omairkhawaja/source/my-project/common/server/PNServices/build/classes
    [javac] Compiling 131 source files to /Users/omairkhawaja/source/my-project/common/server/PNServices/build/classes
    [javac]                                                                                           
     [copy] Copying 7 files to /Users/omairkhawaja/source/my-project/common/server/PNServices/build/classes
      [jar] Building jar: /Users/omairkhawaja/source/my-project/common/server/PNServices/build/jars/PNServices.jar

compileTest:
    [mkdir] Created dir: /Users/omairkhawaja/source/my-project/common/server/PNServices/build/test/classes
    [javac] /Users/omairkhawaja/source/my-project/common/server/PNServices/buildtools/build-test.xml:28: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 14 source files to /Users/omairkhawaja/source/my-project/common/server/PNServices/build/test/classes
    [javac] /Users/omairkhawaja/source/my-project/common/server/PNServices/src/test/java/com/corp/monitoring/my-project/service/discovery/PnDiscoveryServiceTest.java:234: warning: non-varargs call of varargs method with inexact argument type for last parameter;
    [javac] cast to java.util.List<java.lang.Object> for a varargs call
    [javac] cast to java.util.List<java.lang.Object>[] for a non-varargs call and to suppress this warning
    [javac]         when(mdo.getList("ineligibleDevices")).thenReturn(ineligibleResultList, null);
    [javac]                                                                                 ^
    [javac] /Users/omairkhawaja/source/my-project/common/server/PNServices/src/test/java/com/corp/monitoring/my-project/service/discovery/PnDiscoveryServiceTest.java:252: warning: non-varargs call of varargs method with inexact argument type for last parameter;
    [javac] cast to java.util.List<java.lang.Object> for a varargs call
    [javac] cast to java.util.List<java.lang.Object>[] for a non-varargs call and to suppress this warning
    [javac]         when(mdo.getList("ineligibleDevices")).thenReturn(null, null);
    [javac]                                                                 ^
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 2 warnings
    [mkdir] Created dir: /Users/omairkhawaja/source/my-project/common/server/PNServices/build/test/jar
      [jar] Building jar: /Users/omairkhawaja/source/my-project/common/server/PNServices/build/test/jar/agent-test.jar

testng:
    [mkdir] Created dir: /Users/omairkhawaja/source/my-project/common/server/PNServices/build/testng
    [mkdir] Created dir: /Users/omairkhawaja/source/my-project/common/server/PNServices/build/coverage
   [testng] [TestNGAntTask] TESTNG PASSED @/var/folders/ft/p4_xg83109v465y_ktnrq29m0000gn/T/testng6488341970286082385 WHICH CONTAINS:
   [testng]   -usedefaultlisteners
   [testng]   false
   [testng]   -d
   [testng]   /Users/omairkhawaja/source/my-project/common/server/PNServices/build/testng
   [testng]   -groups
   [testng]   unit
   [testng]   -listener
   [testng]   org.uncommons.reportng.HTMLReporter;org.testng.reporters.JUnitXMLReporter;org.uncommons.reportng.JUnitXMLReporter
   [testng]   -suitename
   [testng]   Ant suite
   [testng]   -testname
   [testng]   Ant test
   [testng]   /Users/omairkhawaja/source/my-project/common/server/PNServices/buildtools/suite.xml
   [testng] Listening for transport dt_socket at address: 5005
   [testng] [ERROR]: No test suite found.  Nothing to run
   [testng] java.io.FileNotFoundException: test-output/testng.css (No such file or directory)
   [testng]     at java.io.FileOutputStream.open(Native Method)
   [testng]     at java.io.FileOutputStream.<init>(FileOutputStream.java:194)
   [testng]     at java.io.FileOutputStream.<init>(FileOutputStream.java:145)
   [testng]     at org.testng.internal.Utils.writeResourceToFile(Utils.java:618)
   [testng]     at org.testng.reporters.HtmlHelper.generateStylesheet(HtmlHelper.java:25)
   [testng]     at org.testng.reporters.SuiteHTMLReporter.generateReport(SuiteHTMLReporter.java:49)
   [testng]     at org.testng.TestNG.run(TestNG.java:613)
   [testng]     at org.testng.TestNG.privateMain(TestNG.java:999)
   [testng]     at org.testng.TestNG.main(TestNG.java:936)
   [testng] ERROR WHILE WRITING TO test-output/index.html
   [testng] java.io.IOException: No such file or directory
   [testng]     at java.io.UnixFileSystem.createFileExclusively(Native Method)
   [testng]     at java.io.File.createNewFile(File.java:883)
   [testng]     at org.testng.internal.Utils.writeFile(Utils.java:168)
   [testng]     at org.testng.reporters.SuiteHTMLReporter.generateIndex(SuiteHTMLReporter.java:138)
   [testng]     at org.testng.reporters.SuiteHTMLReporter.generateReport(SuiteHTMLReporter.java:75)
   [testng]     at org.testng.TestNG.run(TestNG.java:613)
   [testng]     at org.testng.TestNG.privateMain(TestNG.java:999)
   [testng]     at org.testng.TestNG.main(TestNG.java:936)

BUILD SUCCESSFUL
Total time: 13 seconds
Omair-Inams-MacBook-Pro:PNServices omairkhawaja$ 

Omair-Inams-MacBook-Pro:PNServices omairkhawaja$ pwd
/Users/omairkhawaja/source/my-project/common/server/PNServices

Omair-Inams-MacBook-Pro:PNServices omairkhawaja$ ls -l buildtools/ | grep suite
-rw-r--r--   1 omairkhawaja  staff   858  5 Apr 15:43 suite.xml 
```

这是我正在使用的 testng 目标

```
<testng outputDir="${testng.report.dir}"
                workingDir="${test.resources.dir}"
                haltOnfailure="false"
                useDefaultListeners="false"
                listeners="org.uncommons.reportng.HTMLReporter,org.testng.reporters.JUnitXMLReporter,org.uncommons.reportng.JUnitXMLReporter" dumpCommand="true"
                groups="unit" >
            <jvmarg value="-Dlog4j.configuration=file:log4j.properties" />
            <jvmarg value="-Dquest.debug=1" />
            <jvmarg value="-Xdebug"/>
            <jvmarg value="-Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=7007"/>
            <sysproperty key="org.uncommons.reportng.title" value="PNServices Unit Tests"/>
            <classpath>
                <fileset refid="test-dependencies.fileset"/>
                <fileset dir="${fglam.devkit.home}">
                    <include name="**/*.jar"/>
                </fileset>
                <fileset dir="${fglcore.home}">
                    <include name="**/*.jar"/>
                </fileset>
                <fileset dir="${build.jars.dir}">
                    <include name="*.jar"/>
                </fileset>
                <fileset dir="${test.resources.dir}">
                    <include name="log4j.properties"/>
                </fileset>
                <fileset dir="${build.test.dir}/jar" includes="agent-test.jar" />
            </classpath>

            <xmlfileset dir="${basedir}/buildtools" includes="suite.xml"/>
        </testng> 
```

这是我的 suite.xml 文件

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<!--Test suite name must not be changed as it is referenced in sonar-project.properties -->
<suite name="TestSuite" verbose="1" >
  <!-- Test MUST be named TEST-xxxx as Sonar requires this file naming format to be able to parse test results-->
  <test name="TEST-Unit">
      <packages>
          <package name="com.corp.monitoring.*" />
      </packages>

      <groups>
          <run>
            <exclude name="brokenTests"  />
            <include name="unit"  />
          </run>
        </groups>
  </test>
</suite> 
```

正如开头的命令行输出所示，我的 suite.xml 文件位于适当的目录中。我不确定为什么 TestNG 在 Windows 上成功运行但在 OS X 上运行失败。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:36:52.017

问题的发生是由于使用 maven ant 任务下载 ReportNG 依赖项，该任务还声明了对一个古老的 TestNG 版本的依赖项，该版本首先在类路径中被拾取并导致 testng ant 目标失败。

[我最近在 Windows](https://groups.google.com/d/topic/testng-users/RbXv08IljLk/discussion)上遇到了类似的问题.. 在挣扎了一段时间后发现了问题所在.. 我试图使用 maven 依赖项 ant 任务导入 ReportNG 依赖项......它正在下载旧版本的 TestNG。 .. 正如[Marcin Zajączkowski](http://solidsoft.wordpress.com/2011/01/23/better-looking-html-test-reports-for-testng-with-reportng-maven-guide/)所指出的，要在 maven 中使用 reportNG，您需要排除传递的 TestNG 依赖项。. 我不知道在使用 ant maven 任务时是否有可能的同义修复。

# iphone - 如何将 NSTimeInterval 值存储到 NSMutableArray 中？

> ID：10075218
> 
> 赞同：5
> 
> 时间：2012-04-09T15:05:07.067
> 
> 标签：iphone, objective-c, ios5, nsmutablearray, nstimeinterval

我有一个要求，我有一个使用`MPMediaPlayerController`. 除了视频，我还有两个按钮，我需要在单击按钮时捕获当前播放时间并单独存储所有相关的点击。我可以使用返回的“currentPlaybackTime”属性获取视频的当前播放时间`NSTimeInterval`。但是有人可以帮助我如何将所有`NSTimeInterval`值存储到`NSMutableDictionary`. 我尝试了以下方法：

```
-(void)onClickOfGood {
    NSLog(@"The current playback time in good:%g",moviePlayerController.currentPlaybackTime);
    currentPlaybackTime = moviePlayerController.currentPlaybackTime;
    //NSArray *arrayContainsGoodClicks = [[NSArray alloc]initWithObjects:currentPlaybackTime, nil ];
    NSNumber *goodTimeIntervals = [NSNumber numberWithDouble:currentPlaybackTime];
    NSMutableArray *arrayContainsGoodClicks = [[NSMutableArray alloc]initWithObjects:goodTimeIntervals,nil ];
    NSLog(@"The total count of Array is: %i",[arrayContainsGoodClicks count]);} 
```

但是每次单击好按钮后，我都会将数组计数为 1。有人可以指出我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:11:00.227

> 但是每次单击好按钮后，我都会将数组计数为 1。

`NSMutableArray`这并不奇怪，考虑到您正在前一行创建一个全新的。

要解决此问题，您需要创建`NSMutableArray *arrayContainsGoodClicks`一个*实例变量*（AKA ivar），`[NSMutableArray array]`在您指定的初始化程序中将其初始化，然后使用

```
[arrayContainsGoodClicks addObject:goodTimeIntervals]; 
```

将对象添加到数组中。

如果您希望`NSMutableDictionary`改用该策略，则该策略将是相同的，只是您需要决定一个对象，您想将其用作`NSDictionary`. 另请记住，`NSMutableDictionary`它不是有序的，因此您可能需要在每次向用户显示字典项目时进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:11:53.080

您只需要创建`arrayContainsGoodClicks`一次（例如在 init 方法中），然后在您的按钮处理程序中向该数组添加值：

```
//.h
NSMutableArray *arrayContainsGoodClicks;

//.m - init
arrayContainsGoodClicks = [NSMutableArray array];

//.m - button handler
[arrayContainsGoodClicks addObject:goodTimeIntervals]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:19:41.707

您需要创建数组并将其存储为 ivar。

```
@property (retain, nonatomic) NSMutableArray *clicksArray;
...
@synthesize clicksArray; 
```

现在在您的 -init 方法中创建数组，如..

```
self.clicksArray = [NSMutableArray array]; 
```

并且每次都将对象添加到数组中，这样你的 -onClickOfGood 就会变成......

```
...
[self.clicksArray addObject: goodTimeIntervals];
NSLog(@"The total count of Array is: %i",[self.clicksArray count]); 
```

# fortran - Fortran get_environment_variable 内在函数不返回任何内容

> ID：10075225
> 
> 赞同：1
> 
> 时间：2012-04-09T15:05:51.333
> 
> 标签：fortran, environment-variables, gfortran, intrinsics

我知道 Fortran 2003 包含内部子例程 get_environment_variable，但我无法让它返回我想要的变量。这是一个测试程序：

```
program main
  implicit none
  character(len=10) :: time

  call get_environment_variable("t", time)
  write(6,*) time
end program main 
```

然后我在shell中设置t=2010010100（或者什么的），编译运行，唯一写的就是空行。我不明白：我正在使用带有标志-std = f2003的gfortran，这应该很简单，挂了什么？我怀疑这很简单，答案会暴露我的无知......但无论如何还是谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-09T14:12:34.430

在bash中你需要导出环境变量，否则它不会被传递给程序。

PS您使用“导出”命令执行此操作，例如

```
export t=2010010100 
```

# c++ - 如何显示动态工具提示？

> ID：10075227
> 
> 赞同：1
> 
> 时间：2012-04-09T15:05:59.093
> 
> 标签：c++, wxwidgets

在自定义的 wxScrolledWindow 中，显示了许多节点和边。当鼠标滑过某些类型的节点时，我可以计算出鼠标覆盖了哪个节点，并希望显示有关节点信息的工具提示。

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:31:15.647

wxWidgets 有一个 wxTipWindow 类，你可以使用它。定义 EVT_ENTER_WINDOW 鼠标事件处理程序。当鼠标光标位于您的一个节点内时，将调用处理程序。在处理函数内部，您可以创建一个新的 wxTipWindow 来显示节点的额外信息。

# c# - 使用 C# 将视频流式传输到基于 RTMP 的媒体服务器 (Red5)

> ID：10075228
> 
> 赞同：14
> 
> 时间：2012-04-09T15:06:01.307
> 
> 标签：c#, video-streaming, publish, red5, rtmp

我正在编写一个基于 C#.Net 的应用程序，它需要将视频和音频流发布到 Red 5 媒体服务器，并在本地网络上的另一个应用程序中检索相同的发布流，然后在互联网上检索。

简而言之，我打算使用Red5作为两个客户端之间传输视频和音频数据的中介或代理。

**[客户端 1] <- 视频和音频 -> <- 视频和音频 -> [客户端 2]**

我正在寻找 RTMP 协议的 .NET 实现（库），它可以帮助我将流发布到媒体服务器并重新发布已发布的流并在我的应用程序上播放它。

我搜索了 SOF 并得出了以下选项：

*   Borrocoli RTMP 客户端库
*   FlourineFx.NET
*   WebORb.Net

每个都有一些限制。

1.  Borrocoli RTMP 库仅支持音频/视频流的回放，但没有将视频/音频流发布到媒体服务器的选项。我玩过图书馆并看过它的例子，但无济于事。如果我错了，请纠正我。

2.  FlourinFx.Net 表示支持 NetStream.Publish()、NetStream.AttachAudio() 和 NetStream.AttachVideo() 方法。但是在最新的代码快照中，没有这样的东西。他们的生产版本也是如此。NetStream 类没有规定的方法和/或没有任何方法可以帮助将流内容发布到媒体服务器。

3.  WebOrb.Net：我还没有研究过，但从他们的许可页面可以看出，免费版本仅适用于 IIS。企业版似乎拥有发布流媒体视频的所有支持...

**问题：**

1.  是否可以将 WebOrb.Net 库与 Red5 Media Server 结合使用？
2.  免费版是否允许我将音频和视频发布到 Red5 媒体服务器？
3.  如果上述问题无效，我可以使用其他免费替代方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-05T13:07:04.317

You can use ffmpeg to send stream to Red 5 MediaServer.. Set the source video to ffmpeg and the output to rtmp of red5, something like this:

```
ffmpeg -re -i file.mp4 -c copy -f flv rtmp://server/live/streamName 
```

See this [answer](https://stackoverflow.com/a/26589410/1650097) for an examples to integrate ffmpeg in c#.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T10:47:55.437

您可以通过 RTMP 协议使用 flex 和 .net 将 weborb.lib 用于点对点视频流。您可以用于点对点流。您的过程可以通过以下方式完成... 1.开发 Flex 客户端代码连接到服务器并订阅以接收带有 CPU 读数的服务器端更新。该代码还包括一个图表以可视化接收到的数据。2\. 插入WebORB的服务器端“应用程序处理程序”，轮询CPU并将数据传递给客户端。它会工作尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T18:35:12.793

使用 RTMPdump 的 librtmp。它是用 C 编写的，但您应该能够轻松地为它编写 C# 包装器。

# android - Android中复杂的自定义按钮状态

> ID：10075233
> 
> 赞同：1
> 
> 时间：2012-04-09T15:06:10.437
> 
> 标签：android, android-layout, button

在我当前的项目中，我正在使用 API 10 构建一个应用程序，它应该看起来像一个 ICS 应用程序。由于我的 GUI 不是很复杂，我可以手动构建这些，但按钮状态存在一些问题。

我用谷歌搜索了很多，没有发现任何对我有用的东西，所以我将不胜感激；）

我设计了一个带有 google ICS 股票图标的操作栏。例如，当有人触摸周围有 8dp 填充的 search-loupe-icon 时，它的背景颜色应更改为定义的突出显示颜色值。

所以现在你可能会建议一个可绘制的选择器。但我的情况是：我有一个**icon-drawable**有一个**background-color**，我想**改变**它。我不想更改图标，因此由于我无法从选择器-xml 更改背景颜色，因此这是行不通的。（我想我可以用我的图标静态 bg 颜色设置多个 drawable-xml，这样我就可以用一个选择器来引用那些不同颜色的图标，但是由于 shape-drawable-xml 不能有源，而 bitmap-drawable-xml 不能有背景颜色，这不是解决方案。）

如果我尝试更改我的 onclick-listener（也尝试过 onTouch）中的背景颜色：

```
ImageButton searchIcon = (ImageButton) findViewById(R.id.upper_actionbar_icon_search);
            searchIcon.setBackgroundColor(R.color.android_ics_blue_light); 
```

图标获得深灰色背景色。这对于任何其他颜色也是如此，尽管 ImageButton 顶部没有任何内容。我还尝试了一个 ImageView。

所以有人可以向我解释一下我到底是如何定义一个突出显示的 bg 彩色图像而没有任何 hack（默认消失的图像位于图标上方并设置为 onclick 可见）。非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:56:04.230

好的，解决方案很简单。

为自己编写一个可绘制的选择器，如下所示：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:state_selected="true">
    <shape android:shape="rectangle">
        <solid android:color="@color/android_ics_blue_light"/>
    </shape>
</item>

<item android:state_pressed="true">
    <shape android:shape="rectangle">
        <solid android:color="@color/android_ics_blue_light"/>
    </shape>
</item>

 <item>
    <shape android:shape="rectangle">
        <solid android:color="@color/light_grey"/>
    </shape>
</item> 
```

在您的 ImageButton 代码中，将您的图标定义为 src 并将您的新可绘制对象定义为背景，如下所示：

```
<ImageButton
                <!-- ... -->
                android:src="@drawable/icon_search" 
                android:background="@drawable/actionbar_ontouch"

                /> 
```

奇迹般有效！

# box2d - Libdgx Box2D - 检测碰撞

> ID：10075238
> 
> 赞同：1
> 
> 时间：2012-04-09T15:06:22.370
> 
> 标签：box2d, libgdx

我正在尝试检测玩家与传感器主体的碰撞。想象一下平台游戏中的收藏品......我想在玩家与收藏品发生碰撞时运行一个事件。

正如您将从我的代码中看到的那样，我正在将一个动态主体附加到可收集对象以及一个传感器主体，我希望将一个玩家碰撞“事件”附加到玩家与传感器发生碰撞时。似乎有一个“ContactListener”接口，但实现这些方法似乎没有做任何事情。我该怎么做呢？

如果有更好的方法来执行以下任何操作，任何建议将不胜感激:)

```
import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.Contact;
import com.badlogic.gdx.physics.box2d.ContactImpulse;
import com.badlogic.gdx.physics.box2d.ContactListener;
import com.badlogic.gdx.physics.box2d.FixtureDef;
import com.badlogic.gdx.physics.box2d.Manifold;
import com.badlogic.gdx.physics.box2d.PolygonShape;
import com.badlogic.gdx.physics.box2d.BodyDef.BodyType;

public class CoinCollectible extends GameObject{

    public CoinCollectible(Vector2 position, float angle){
        bodyDef.type = BodyType.DynamicBody;
        bodyDef.position.x = position.x;
        bodyDef.position.y = position.y;
        bodyDef.angle = angle;

        PolygonShape poly = new PolygonShape();
        poly.setAsBox(1, 1);
        FixtureDef itemFixture = new FixtureDef();
        itemFixture.shape = poly;
        itemFixture.density = 1;
        itemFixture.filter.categoryBits = PhysicsLayers.LAYER_ITEM;
        itemFixture.filter.maskBits = PhysicsLayers.MASK_PLAYER;
        fixtureArray.add(itemFixture);

        massData.mass = 1f;

        // Attach a collision sensor
        FixtureDef sensorFixture = new FixtureDef();
        sensorFixture.shape = poly;
        sensorFixture.isSensor = true;
        sensorFixture.filter.maskBits = PhysicsLayers.LAYER_PLAYER;

        fixtureArray.add(sensorFixture);

        // Clean up
        poly.dispose();

    }
}

import java.util.ArrayList;
import java.util.List;

import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.BodyDef;
import com.badlogic.gdx.physics.box2d.FixtureDef;
import com.badlogic.gdx.physics.box2d.MassData;
import com.badlogic.gdx.physics.box2d.World;

public class GameObject{

    public Body body = null;
    public BodyDef bodyDef = new BodyDef();
    public MassData massData = new MassData();

    protected List<FixtureDef> fixtureArray = new ArrayList<FixtureDef>();

    public GameObject(){}

    public Body addToWorld(World world){
        if(bodyDef == null)
            return null;

        body = world.createBody(bodyDef);

        while(fixtureArray.size() > 0){
            body.createFixture(fixtureArray.remove(0));
        }

        body.setMassData(massData);

        return body;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-14T14:42:47.503

有两件事可能出错：
1）OP 在实例化 box2d.World 后没有正确设置 ContactListener
2）类别和掩码位设置不正确，因此不会触发 ContactListener

解决方案： 1）在实例化 示例中缺少
**的物理世界之后立即放置。**这将为您的 box2d.World 设置 ContactListener，以便触发某些内容。

```
physicsWorld = new World(new Vector2(0,-9),true);
physicsWorld.setContactListener(
    new ContactListener() {
        @Override
        public void beginContact(Contact contact) {
            Fixture fA = contact.getFixtureA();
            Fixture fB = contact.getFixtureB();
            Gdx.app.log("beginContact", "between " + fA.toString() + " and " + fB.toString());
        }

        @Override
        public void endContact(Contact contact) {
            Gdx.app.log("endContact", "between " );
        }

        @Override
        public void preSolve(Contact contact, Manifold oldManifold) {
            //you can leave this empty
        }

        @Override
        public void postSolve(Contact contact, ContactImpulse impulse) {
            //you can leave this empty
        }
    }); 
```

**2）以这种方式设置类别和掩码位**，以便您可以测试它是否有效（OP没有显示他的 PhysicsLayers 中使用的具体值）

```
public CoinCollectible(Vector2 position, float angle){
    // ...
    itemFixture.filter.categoryBits = 1;
    itemFixture.filter.maskBits =  2;
    sensorFixture.filter.categoryBits = 2; 
    sensorFixture.filter.maskBits = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T02:18:12.423

尝试在您的代码中添加这一行（在硬币构造函数中）：

`bodyDef.userData = this;`

以及您的联系监听器，`get userdata`并转换为`GameObject`，然后，例如，调用事件冲突。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T12:11:46.840

您必须`Sensor`在 box2d collisionlisiter 方法的 Being contact 或 End Contact 中检查身体的碰撞

# php - 仅 1 个用户拒绝访问本地 Intranet 页面

> ID：10075241
> 
> 赞同：2
> 
> 时间：2012-04-09T15:06:33.727
> 
> 标签：php, javascript, .net, authentication, access-denied

我们有一个由 Apache 服务器托管的 PHP 站点。

我们有一个从 Windows 服务器托管的 .NET 站点。

两者都是内部的，并且在我们的域内。

当用户访问 PHP 站点时，它会检查您的用户名是否已被会话。如果没有，它会向 .NET " " 页面执行 ajax`GET`回发。`GetUsername.aspx`该`GetUsername.aspx`页面只是输出`Request.ServerVariables("LOGON_USER")`

.NET 站点要求在 IE 中启用 Windows 身份验证。我们所有的用户都使用 IE8。

为了让我们的 PHP 站点从 .NET 站点请求数据，必须启用“跨域访问数据”设置......确实如此。

为了让我们的 .NET 站点获得您的用户名，必须启用“启用集成 Windows 身份验证”......而且确实如此。

.NET 站点和 PHP 站点都是 Intranet 站点。如果您转到 Internet 选项 -> 本地 Intranet -> 站点 -> 高级，则两个站点都在列表中。

在这一行：`xmlhttp.open("GET","http://intranet.MySite.vmv/IS/GetUsername.aspx",false);`

出现消息“错误：访问被拒绝”的 javascript 错误。

如果我在浏览器 url 中键入相同的 .NET 页面......它加载得很好，并显示她的用户名。

* * *

所有这一切令人困惑的是，我们的策略更新（每次登录时推出）设置了所有这些设置。我已经验证上述所有设置在我的浏览器上与在此用户上的设置相同。我们俩都在同一个域内。

关于可能导致这种情况的其他设置的任何想法？

谢谢！

* * *

编辑

这是萤火虫的结果...似乎没有太大帮助，只是向我展示了我们已经知道的内容。

[http://intranet.MyCompany.vmv/IS/GetUsername.aspx](http://intranet.MyCompany.vmv/IS/GetUsername.aspx)

```
401 Unauthorized
20ms    
login (line 103)
HeadersResponseHTML
Response Headers
Content-Length  1656
Content-Type    text/html
Date    Mon, 09 Apr 2012 16:15:33 GMT
Server  Microsoft-IIS/6.0
WWW-Authenticate    Negotiate NTLM
X-Powered-By    ASP.NET
Request Headers
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset  ISO-8859-1,utf-8;q=0.7,*;q=0.7
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Host    intranet.MyCompany.vmv
Origin  http://192.168.1.2:10078
Referer http://192.168.1.2:10078/login
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:8.0.1) Gecko/20100101 Firefox/8.0.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:46:39.827

嗯......问题似乎与IE7有关。不知何故，这个用户的版本没有与其他人一起升级。一旦我们将她升级到 IE8，它就会按预期工作。

# python - 根据 DOM 标准在链接后递归 Web 下载

> ID：10075244
> 
> 赞同：0
> 
> 时间：2012-04-09T15:06:43.040
> 
> 标签：python, ruby, perl, dom, download

[MSDN 是一个巨大的分层文档站点。](https://stackoverflow.com/q/6317367/269126)

更准确地说，内容是以分层方式组织的，但 URL 不是。URL 空间是扁平的，看起来就像所有东西都在同一个目录中。（实际上，可能没有目录；我猜事情是从其他数据库中出来的；但这与这里无关。）

因此，如果您想下载 MSDN 的一部分，例如[NMake 手册](http://msdn.microsoft.com/en-us/library/dd9y37ha.aspx)，您不能只递归地下载给定目录下的所有内容。因为那将是 MSDN 的全部内容。对您的硬盘驱动器和带宽来说太多了。

但是您可以编写一个查看 DOM (HTML) 的脚本，然后只跟踪和下载文档某些导航部分中包含的链接，例如 CSS`class`属性`toc_children`和的链接`toc_siblings`，而不是`toc_parent`.

你需要的是一些下载器，它可以让你说：

```
$webclient->add_links( $xpath_expression ); # or
$webclient->add_links( $css_selector ); 
```

使用 Perl、LWP 和 XML::LibXML（HTML 解析器）拼凑一些东西应该不会太难，但也许你知道一个工具可以让你做到这一点，所以我不需要重新发明它。

它不必是 Perl，任何其他语言也可以，并且具有这项工作所需的灵活性的现成程序也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:17:55.843

查看[WWW::Mechanize](http://search.cpan.org/perldoc?WWW%3a%3aMechanize)中的 find_link 函数（和同级函数） 。它可以使用任意标准来查找包括“id”和“class”属性的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T00:01:09.333

[Mojo::UserAgent](https://www.metacpan.org/module/Mojo%3a%3aUserAgent)返回理解 CSS3 选择器或 XPath 的东西。例如，我刚刚展示了一个[使用 Mojo 进行无痛 RSS 处理](http://blogs.perl.org/users/brian_d_foy/2012/04/painless-rss-processing-with-mojo.html)的示例。我真的很喜欢这个新的（ish）网络客户端的东西。我想要的大多数东西都已经存在（没有额外的模块）并且集成得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T17:26:07.083

这可能会让你朝着正确的方向开始，或者让你误入歧途。请注意，我首先将页面保存到本地文件，以免在我处理它时不断下载它。

```
#!/usr/bin/env perl

use strict;
use warnings;

use HTML::TreeBuilder::XPath;

my $tree = HTML::TreeBuilder::XPath->new;

$tree->parse_file('nmake-ref.html');

my @links = map { { $_->as_text => $_->attr('href') } }
            $tree->findnodes(q{//div[@class='sectionblock']/*/a});

for my $link (@links) {
    my ($entry, $url) = %{ $link };
    ($link->{ file } = "$entry.html" ) =~ s/[^A-Za-z_0-9.]+/_/g;
    system wget => qq{'$url'}, '-O', $link->{ file };
} 
```

# c# - MVVM 和异步数据访问

> ID：10075246
> 
> 赞同：4
> 
> 时间：2012-04-09T15:06:50.043
> 
> 标签：c#, wpf, mvvm, system.reactive, caliburn.micro

所以我有一个使用 MVVM 模式（Caliburn.Micro）的 WPF 应用程序。我得到了视图和视图模型，基本上缺少的是数据。数据将从 WCF 服务、本地存储或内存/缓存“按需”检索 - 原因是允许离线模式并避免不必要的服务器通信。另一个要求是异步检索数据，因此 UI 线程不会被阻塞。

所以我正在考虑创建某种视图模型用来请求数据的“AssetManager”：

```
_someAssetManager.GetSomeSpecificAsset(assetId, OnGetSomeSpecificAssetCompleted) 
```

请注意，这是一个异步调用。我遇到了一些不同的问题。如果不同的视图模型（大致）同时请求相同的资产，我们如何确保我们不做不必要的工作并且它们都获得了我们可以绑定的相同对象？

不确定我的方法是否正确。我一直在浏览 Reactive Framework - 但我不知道如何在这种情况下使用它。关于我可以使用的框架/技术/模式的任何建议？这似乎是一个相当普遍的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T06:30:33.853

```
Dictionary<int, IObservable<IAsset>> inflightRequests;

public IObservable<IAsset> GetSomeAsset(int id)
{
    // People who ask for an inflight request just get the
    // existing one
    lock(inflightRequests) {
        if inflightRequests.ContainsKey(id) {
            return inflightRequests[id];
        }
    }

    // Create a new IObservable and put in the dictionary
    lock(inflightRequests) { inflightRequests[id] = ret; }

    // Actually do the request and "play it" onto the Subject. 
    var ret = new AsyncSubject<IAsset>();
    GetSomeAssetForReals(id, result => {
        ret.OnNext(id);
        ret.OnCompleted();

        // We're not inflight anymore, remove the item
        lock(inflightRequests) { inflightRequests.Remove(id); }
    })

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:49:25.263

我在传递接收数据时调用的委托的方法调用方面取得了成功。您可以通过检查确定请求是否正在发生的布尔字段来分层要求让每个人都使用相同的数据（如果当前正在发生请求）。我会保留需要调用的委托的本地集合，以便在最终接收到数据时，包含要调用的委托的类可以迭代它们，传入新接收的数据。

这些方面的东西：

```
public interface IViewModelDataLoader{
    void LoadData(AssignData callback);
}

public delegate void AssignData(IEnumerable<DataObject> results); 
```

然后，实际实现此接口的类可以记录数据完成时通知谁（假设是单例模型）：

```
public class ViewModelDataLoader : IViewModelDataLoader{
    private IList<AssignData> callbacksToCall;
    private bool isLoading;

    public void LoadData(AssignData callback){
        callbacksToCall.add(callback);
        if (isLoading) { return; }

        // Do some long running code here
        var data = something;
        // Now iterate the list
        foreach(var item in callbacksToCall){
           item(data);
        }
        isLoading = false;
    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T16:30:37.193

使用代理模式和事件，您可以提供同步和异步数据。让您的代理返回同步调用的缓存值，并在您接收异步数据时通过事件通知视图模型。代理还可以设计为跟踪数据请求和限制服务器连接（例如“引用计数”调用、请求的数据/接收的数据标志等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T06:24:41.360

我会这样设置你`AssetManager`：

```
public interface IAssetManager
{
    IObservable<IAsset> GetSomeSpecificAsset(int assetId);
} 
```

在内部，您需要返回`Subject<IAsset>`异步填充的 a 。做对了，每次调用`GetSomeSpecificAsset`.

# mongodb - Symfony 1.4 和 Mongo DB

> ID：10075248
> 
> 赞同：1
> 
> 时间：2012-04-09T15:06:52.617
> 
> 标签：mongodb, symfony1

我有一个在 symfony 1.4 和 Doctrine (1.X) 上运行的应用程序。我希望能够将 MongoDB 与已经设置的 Mysql DB 一起使用。

一些数据将存储在 mongodb 中，其余的将保留在 Mysql 中。所以现在我正在寻找一种**在 symfony 1.4 中设置 mongoDB**的方法，并让它在不影响 Doctrine 连接器的情况下工作。

谁能解释我如何进行？唯一找到的插件是 sfMondongoPlugin，自 2010 年以来未更新。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:11:06.217

我还没有找到任何解决方案，实际上没有花足够的时间找到一个。迁移到 SF2 肯定会简化该过程，即使 symfony2 看起来根本不像 sf1。所以从SF2开始基本上意味着学习一个新的框架......

# android - 新闻源的最佳视图子类，它是 WebView 吗？

> ID：10075253
> 
> 赞同：0
> 
> 时间：2012-04-09T15:07:13.933
> 
> 标签：android, webview, android-listview

我一直在整理一些 ListView 和适配器和布局，我有一个想法。

这一切都用 WebView 做得更好吗？

求助于 WebView 而不是尝试使用 Android XML 布局制作漂亮的东西是“懒惰”吗？

例如，Facebook 应用程序是否通过 WebView 为大多数事物提供动力？由于链接的样式，我注意到它看起来好像确实如此。

如果不是 WebView，那么推荐的 View 子类是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:23:11.067

这取决于你的目的是什么。

你在做一个跨平台的应用程序吗？如果是这样，最好用 HTML 制作布局并用本地语言制作特定于设备的功能。我相信这就是 Facebook 应用程序所做的，因为该应用程序在大多数平台上看起来都一样，但它仍然具有 Android 特定的菜单按钮和搜索功能。这也是可汗学院 iPad 应用程序所做的。

但是，如果您只是尝试制作一个 Android 应用程序，那么如果您使用的是 Android 特定的对话框，那么调试问题会容易得多，因为您可以使用不错的功能，而不是制作可以在所有尺寸的 Android 设备上运行的复杂 HTML 页面SDK 提供给您的（RelativeLayout/LinearLayout/etc）。

考虑一下你的实际目的是什么，然后从那里开始。

# mongodb - mongodb数据库设计（产品建议）

> ID：10075254
> 
> 赞同：3
> 
> 时间：2012-04-09T15:07:15.083
> 
> 标签：mongodb, nosql

我打算为我的网站开发一个模块。类似于[www.tastekid.com](http://www.tastekid.com)

我的网站上有用户和产品。

例如; 第一个用户喜欢 2,4,56,57 个产品（数字是产品的 id）。第二个（用户）点赞了 1,4,56,57 个产品。

我应该能够搜索谁喜欢 56 和 57，看看这些用户的常见产品 ID 是什么？在这种情况下，它是 4。然后是 1 或 2。

我该如何设计这个？引用还是嵌入？或任何其他我不知道的溶液...

我希望这能解决我的问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:51:54.023

Mongo 架构设计文档应该为您提供一个很好的起点： [http](http://www.mongodb.org/display/DOCS/Schema+Design) ://www.mongodb.org/display/DOCS/Schema+Design 有一个关于嵌入和链接的部分，以及一个示例，其中包含实现两者的。

这是 Stack Overflow 上关于嵌入与链接的另一个问题，其中包含一个非常详细的答案： [MongoDB 关系：嵌入还是引用？](https://stackoverflow.com/questions/5373198/a-simple-mongodb-question-embed-or-reference)

标题为“在 Mongo 中更新数据”的 Mongo 文档还包含有关嵌入文档和引用文档的部分： [http ://www.mongodb.org/display/DOCS/Updating+Data+in+Mongo](http://www.mongodb.org/display/DOCS/Updating+Data+in+Mongo)

上面的链接应该可以很好地理解嵌入和引用文档之间的区别，并为您的架构设计提供一些好的想法。

对于您的具体示例，您似乎正在寻找喜欢相同产品的用户。一种可能的解决方案是包含每个用户喜欢的一系列产品 ID，就像这样。

```
> db.users.find()
db.users.save({ "_id" : 1, "name" : "Joe", "LikesProducts":[2,4,56,57] });
db.users.save({ "_id" : 2, "name" : "Jane", "LikesProducts":[1,4,56,57] }); 
```

要查找同时喜欢产品 56 和 57 的用户，您可以运行以下查询：

```
> db.users.find({LikesProducts:{$all:[56,57]}})
{ "_id" : 1, "name" : "Joe", "LikesProducts" : [ 2, 4, 56, 57 ] }
{ "_id" : 2, "name" : "Jane", "LikesProducts" : [ 1, 4, 56, 57 ] }
> 
```

有关 $all 运算符的更多信息，请参阅“高级查询”文档： [http ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all)

然后，您的应用程序可以确定哪些其他产品（如果有）出现在两个用户的“LikesProducts”数组中。

希望这会给您一些想法来考虑您的应用程序。如果您有任何其他问题，社区随时为您提供帮助！

# jquery - 如何使用数据表插件和 jQuery 更改字段中的值？

> ID：10075255
> 
> 赞同：0
> 
> 时间：2012-04-09T15:07:21.573
> 
> 标签：jquery, json

我使用[http://datatables.net](http://datatables.net)对我的表格进行排序。我生成 json 并在表中加载行。对于一项记录，我使用自定义类创建自定义。

```
<td class=""><span class="qty_new" data-id="1">50</span></td> 
```

```
$(document).ready(function() {
    $('#example').dataTable({
        "bProcessing": true,
        "sAjaxSource": "ajax/tables/ajax.php"
    });

    $('.qty_new').click(function() {
        alert(1000);
    });
}); 
```

此代码未返回警报（1000），我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:21:15.223

这是因为该`.qty_new`字段是在页面加载后由数据表创建的。因此，您必须将事件侦听器委托给父元素。尝试这个：

```
$('table').on('click', '.qty_new', function(){
    alert(1000);
}); 
```

或者对于旧版本的 jQuery，使用`delegate()`：

```
$('table').delegate('.qty_new', 'click', function(){
    alert(1000);
}); 
```

我在`table`这里用作父选择器，在您的代码中它应该是最接近的单个静态元素。

# iphone - 从 ^block 访问属性会导致愚蠢的行为

> ID：10075258
> 
> 赞同：3
> 
> 时间：2012-04-09T15:07:36.237
> 
> 标签：iphone, objective-c, block, asiformdatarequest

我在 Objective-C 中使用 ^blocks 时遇到了一些问题。我正在尝试从一个块中设置一个实例变量 - 我已经阅读了一些关于该主题的 Apple 文档，我觉得我已经尝试了所有方法。

```
@interface MyClass
{
    // I have tried all possible combinations using __weak, __strong and __block.
    __weak __block NSMutableArray *filenames;
}

// *.m
static ASIFormDataRequest *g_request = nil;

@implementation MyClass
-(void) funnymethod
{
    filenames = [NSMutableArray array];
    [filenames addObject:@"This is a string."];
    NSLog(@"%@", filenames);

    g_request = [InitializerClass initializeRequest];
    [g_request setCompletionBlock:^
    {
        filenames = [NSMutableArray array];
        [filenames addObject:@"This is another string."];
        NSLog(@"%@", filenames);
    }];

    [g_object startASynchronous];
}
@end 
```

上面的代码给出了以下输出： ( "This is a string." ) (null)

太糟糕了。所以，我尝试了 __weak、__strong 和 __block 的不同组合——其他任何东西都会给出以下输出：（“这是一个字符串。”）（“这是另一个字符串。”）但是！有一个巨大的但是。完成块永远不会退出。顶部栏中指示打开连接的活动指示器一直在旋转，并且屏幕变得无响应。

如何从块内成功设置文件名对象？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:44:11.607

**预选赛的作用：**

`__block`此限定符允许闭包修改存储在给定变量中的值。

`__weak`是对*不*阻止对象被释放的对象的引用。

`__strong`是对*阻止*对象被释放的对象的引用。

**你需要做什么：**

`__weak`不会做你想做的事，因为它不会阻止你的数组在当前范围结束后被解除分配。由于您正在进行异步调用，因此没有什么可以阻止运行时在执行块之前回收数组使用的内存。

`__strong`将在当前范围结束后保留​​对象。这就是你想要的。

`__block`将允许您的块修改指定的变量，但是在引用实例变量时不需要这样做，因为`self`它将自动保留。

> 在引用计数环境中，默认情况下，当您在块中引用 Objective-C 对象时，它会被保留。即使您只是引用对象的实例变量也是如此。但是，使用 __block 存储类型修饰符标记的对象变量不会被保留。
> 
> 注意：在垃圾收集环境中，如果将 __weak 和 __block 修饰符都应用于变量，则该块将无法确保它保持活动状态。如果在方法的实现中使用块，对象实例变量的内存管理规则会更加微妙：
> 
> **如果通过引用访问实例变量，则保留 self；**

我认为您的问题出在此处（相关部分以**粗体表示**）：

> **您可以通过应用 __block 存储类型修饰符来指定导入的变量是可变的（即读写）。**__block 存储类似于局部变量的寄存器、自动和静态存储类型，但相互排斥。
> 
> __block 变量存在于变量的词法范围和在变量的词法范围内声明或创建的所有块和块副本之间共享的存储中。因此，如果在帧中声明的块的任何副本在帧结束后仍然存在（例如，通过在某处排队以供稍后执行），则存储将在堆栈帧的破坏中幸存下来。给定词法范围内的多个块可以同时使用一个共享变量。
> 
> 作为一种优化，块存储从堆栈开始——就像块本身一样。如果块是使用 Block_copy 复制的（或者在 Objective-C 中，当块被发送一个副本时），变量被复制到堆中。因此，__block 变量的地址会随着时间而改变。
> 
> **__block 变量还有两个限制：它们不能是可变长度数组**，并且不能是包含 C99 可变长度数组的结构。

而不是一个`NSMutableArray`，尝试使用一个普通的`NSArray`using

`+ (id)arrayWithObject:(id)anObject`.

# web-services - 将 SSL 添加到 Web 服务时，安全标头无效

> ID：10075259
> 
> 赞同：1
> 
> 时间：2012-04-09T15:07:41.583
> 
> 标签：web-services, ssl, jax-ws, glassfish-3

我们有一个 Web 应用程序，它由向我们的前端开发团队公开的各种 Web 服务组成。我们是一家小商店，所以安全性从来不是我们关心的问题，但我们仍然想知道如何实施它。

我们使用的是 Netbeans 7.0.1、Glassfish 3.1.1 b12 和 SOAP。我们已经通过 Netbeans 中的向导配置了基本的安全性并使其正常工作。然后我们尝试添加传输安全性，并验证它已添加到 WSDL 文件中。当我们尝试添加 SSL 时，我们收到以下错误：

在服务器端：

> 严重：WSS1601：未满足安全要求 - 策略中配置了传输绑定，但传入消息未启用 SSL 严重：WSITPVD0035：验证入站消息中的安全性时出错。com.sun.xml.wss.impl.XWSSecurityRuntimeException：WSS1601：未满足安全要求 - 在策略中配置了传输绑定，但传入消息未在 com.sun.xml.wss.impl.policy.verifier.MessagePolicyVerifier.verifyPolicy（ MessagePolicyVerifier.java:125) 在 com.sun.xml.ws.security.opt.impl.incoming.SecurityRecipient.createMessage(SecurityRecipient.java:983) 在 com.sun.xml.ws.security.opt.impl.incoming。 SecurityRecipient.validateMessage(SecurityRecipient.java:232) 在 com.sun.xml.wss.provider.wsit.WSITServerAuthContext.verifyInboundMessage(WSITServerAuthContext.java:586) 在 com.sun.xml.wss.provider。

在客户端：

> 09:36:16,464 警告 [org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor] (http--127.0.0.1-443-1) 请求不包含安全标头，但这是一个错误。09:36:16,467 错误 [org.jboss.ejb3.invocation] (http--127.0.0.1-443-1) JBAS014134：组件 ActivityEJB 上的 EJB 调用失败，用于方法 public ja va.util.List com.enginsol.ActivityEJB。 getActivities（int）：javax.ejb.EJBException：javax.xml.ws.soap.SOAPFaultException：org.jboss.as.ejb3.tx.CMTTxInterceptor.handleExceptionInOurTx（CMTTxInterceptor.java:166）的安全标头无效[jboss-as- ejb3-7.1.0.Final.jar:7.1.0.Final] 在 org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:230) [jboss-as-ejb3-7.1.0.Final. jar:7.1.0.Final] 在 org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304) [jboss-as-ejb3-7.1.0.Final. jar:7.1.0.Final] 在 org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190) [jboss-as-ejb3-7.1.0.Final.jar:7.1.0.Final]在 org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss-invocation-1.1.1.Final.jar:1.1.1.Final] 在 org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor .processInvocation(CurrentInvocationContextInterceptor.java:41) [jboss-as-ejb3-7.1.0.Final.jar:7.1.0.Final] at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288) [jboss- invocation-1.1.1.Final.jar:1.1.1.Final] 在 org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59) [jboss-as-ejb3-7.1.0\. Final.jar：7。1.0.Final] 在 org.jboss.invocation.InterceptorContext。

每个 Web 服务在 sun-ejb-jar.xml 中的保护方式基本相同：

```
<ejb>
        <ejb-name>ActivityWS</ejb-name>
        <webservice-endpoint>
            <port-component-name>ActivityWS</port-component-name>
            <login-config>
                <auth-method>BASIC</auth-method>
            </login-config>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </webservice-endpoint>
    </ejb> 
```

我很确定证书设置已正确完成，因为我们已经清除了与缺少密钥库和错误密钥库密码相关的启动错误。此外，我们最近添加的 RESTful 服务运行良好（弹出用户名/密码对话框并通过 SSL 运行）。客户端和服务器最初都部署到 Glassfish，但我们创建了该服务的小型消费者并将其部署到 JBoss 7.1 以尝试排除 Glassfish 错误。

这是我们可以在 SO 上找到的最接近的答案，而 OP 给出的答案很模糊，所以我们仍然没有解决方案。[Java Glassfish - 如何使用 SSL Web 服务？](https://stackoverflow.com/questions/5570609/java-netbeans-how-to-consume-ssl-web-service)

**更新：**

我浏览并遵循了 Jim 发布的指南（[http://www.ryandelaplante.com/2007/06/ssl-and-http-basic-authentication-with.html](http://www.ryandelaplante.com/2007/06/ssl-and-http-basic-authentication-with.html)）并稍微调整了我的设置。我将安全角色添加到 sun-ejb-jar 并将角色允许注释添加到 Web 服务（以前，角色在 sun-application.xml 和另一个 ejb-jar.xml 中处理）。我们的服务是 EJB 端点，所以我浏览了指南中的相关信息，但仍然遇到相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:29:29.017

你在哪里添加证书？glassfish 内 domain1/config 目录中的 keystore.jks？您是否将 SSL http 侦听器指向新证书的别名？您是否在 ssl 端口（默认为 8181）上连接到 glassfish？

# java - 如何在jsp中传递逗号分隔的列表？

> ID：10075260
> 
> 赞同：2
> 
> 时间：2012-04-09T15:07:44.583
> 
> 标签：java, jsp, spring-mvc

我有一个 jsp/html 表单，它从用户那里收集一系列选择。例如，我问“你喜欢这种食物的什么？” 并且用户可以为每个输入字段添加 1 个答案（可以选择无限数量的选择）。这是 html 的样子：

```
<li><input type="text" name="choiceList[]" /></li>
<li><input type="text" name="choiceList[]" /></li>
<li><input type="text" name="choiceList[]" /></li>
<li><input type="text" name="choiceList[]" /></li>
<li><input type="text" name="choiceList[]" /></li> 
```

...

在我的后端（使用 Spring）中，我将 choiceList 数组分配给`String[] choices`java 数组。

我的问题是，如果有人在其中一个输入字段（例如：apple、mango、orange"）和“pineapple”中放置一个逗号分隔的列表在另一个输入字段中，则支持的 java 数组认为用户输入是 4 个独立的项目（苹果、芒果、橙子、菠萝），因为 html 表单数组`choiceList[]`基本上是一个逗号分隔的列表。

我需要在表单中做什么才能真正告诉用户只填写了 2 个输入字段？为了更清楚，我希望我的 java 数组的大小为 2 而不是 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:14:15.233

您可以使用[@InitBinder 注释](http://static.springsource.org/spring/docs/2.5.x/reference/mvc.html#mvc-ann-initbinder)来配置字符串数组的绑定：

```
@InitBinder("choiceList")
public void fqBinderInit(WebDataBinder b) {
  b.registerCustomEditor(String[].class, new StringArrayPropertyEditor("&"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T02:54:06.223

@Stealth - 因为我的答案有点大，所以我添加了一个新答案。如果您在表单中添加了动态输入，那么我可以想到一种解决方案是将完整的输入列表作为 json 字符串并将请求中的完整 json 字符串发送到服务器。例如，您可以在自己的约定中使用输入的名称，因为您当前有“choiceList”，您可以将输入设置为“choiceList1”、“choiceList2”等，您可以维护现有计数以及在创建新计数时文本，您可以增加计数器并形成新名称。例如，在加载表单时，您有 2 个字段，则计数器为 2，使用 js 创建新字段时，计数器变为 3，文本字段名称将为“choiceList3”。`[{"choiceList1": "apple, mango, orages", "choiceList2": "pear", "choiceList3": "strawberry"}]`. 整个字符串可以提交到后端，您可以在后端使用它来处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T10:41:41.240

不久前我基本上遇到了同样的问题并问了这个问题：[如何防止参数绑定在 Spring 3.0.5 中解释逗号](https://stackoverflow.com/questions/4998748/how-to-prevent-parameter-binding-from-interpreting-commas-in-spring-3-0-5)？

接受的[答案](https://stackoverflow.com/a/5239841/249327)将允许您防止 Spring 解释用户输入中的逗号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T16:23:32.610

如果输入类型的名称相同，则在您的情况下，它的“choiceList”理想地是http请求通过附加两个输入以逗号分隔来实现。理想情况下，您应该有 10 个不同名称的不同文本字段，例如choice1、choice2 等，并获取他们输入的任何输入并在后端进行相应处理。这是我的想法。

# php - PHP, Javascript, Ajax 传递参数

> ID：10075261
> 
> 赞同：1
> 
> 时间：2012-04-09T15:07:45.153
> 
> 标签：php, javascript, ajax

我有调用 javascript 函数的 php 代码：

```
onclick='fightit(0,0,0,0,0)' 
```

这是javascript函数：

```
function fightit(nbr,strt,bar,type,action) {
var params = "Nbr="+nbr;
params += "&Strt="+strt;
params += "&Bar="+bar;
params += "&FightType="+type;
params += "&Action="+action;
alert(params);
new Ajax.Updater('div01', 'php/fight.php', {method: 'get', parameters: params, onComplete: div05F});
} 
```

当我调用函数并显示参数时，我得到了；

```
Nbr=1&Strt=0&Bar=0&FightType=0&Action=0 
```

这是我想得到的，但是当我在我的 php 中使用它时：

```
if (!isset($_GET['Action'])) {
    $_GET['Action'] = 0;
}
if (isset($_GET['FightType'])) {
   $fighttype = $_GET['FightType'];
}
else {
   $fighttype = 0; 
}
$s = $_GET['FightType']; 
```

当我执行这行代码时，操作已设置，但 FightType 未设置：

```
$s = $_GET['FightType']; 
```

我得到：

```
Undefined index: FightType in C:\wamp\www\hand\php\div08F.php on line 10 
```

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:25:17.213

EDIT2：好的，有了这些信息，我进行了测试。我认为您正在使用一个文件，所以我设置了一个模拟 php 文件来测试。我删除了 onComplete 并使用更新设置了一个 div。这是有效的结果。让我知道它是否有帮助：

```
<?php
if ( isset($_GET['Nbr']) ){
    // here Nbr is set, so we drop into outputting xml... you can do more before this
    // and you can open a separate file, but didn't know how things were set up for you.
    header('Content-Type: text/xml');
    $out = $_GET['Nbr'].','
        .(isset($_GET['Strt'])?$_GET['Strt']:'').','
        .(isset($_GET['Bar'])?$_GET['Bar']:'').','
        .(isset($_GET['FightType'])?$_GET['FightType']:'').','
        .(isset($_GET['Action'])?$_GET['Action']:'');
    print '<?xml version="1.0" encoding="UTF-8" standalone="yes"?'.'><span>'.htmlentities($out).'</span>';
    exit();
}
?>
<html>
<head>
<script type="text/javascript" src="prototype.js"></script>
<script type="text/javascript">
function fightit(nbr,strt,bar,type,action) {
    var params = "Nbr=" + nbr
        + "&Strt=" + strt
        + "&Bar=" + bar
        + "&FightType=" + type
        + "&Action=" + action;
    alert(params);

    // this is actually calling itself with '/t.php' and updating div01
    new Ajax.Updater('div01', '/t.php', {method: 'get', parameters: params});
}

</script>
</head>
<body>
<table style="border-style:none;">
    <tr>
        <td style="border-style:none;">
            <input style="width:150px; text-align:center;" type="button" value="Steal" onclick="stealit()" />
        </td>
        <td id="fightBtn" style="border-style:none;"><input style="width:150px; text-align:center;" type="button" value="Fight" onclick="fightit(0,0,0,0,0)" />
        </td>
    </tr>
    <div id="div01"></div>
</body>
</html> 
```

原来的：

你得到了fighttype错误，因为即使你检查了它，你仍然在检查后使用它而不重新检查（`$_GET['FightType']`仍然不存在）。尝试这个：

```
if (isset($_GET['FightType'])) {
   $fighttype = $_GET['FightType'];
}
else {
   $fighttype = 0; 
}
$s = $fighttype; 
```

编辑：要修复 ajax，请尝试这样的参数（您可能必须更改函数变量名称）：

```
new Ajax.Updater('div01', 'php/fight.php', {method: 'get', parameters: {Nbr: nbr, Strt: strt, Bar: bar, FightType: type, Action: action}, onComplete: div05F}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:46:35.743

试试这个：

```
function fightit(nbr,strt,bar,type,action) {
    var params = "{Nbr:" + nbr + ",Strt:" + strt + ",Bar:" + bar + "FightType:" + type + ",Action:" + action}";
    etc... 
```

编辑：好的，这与我之前发布的 craniumonempty 的建议基本相同。

编辑：为了完整起见，并回应 craniumonempty 的评论：这可能应该（更简单）是：

```
var params = {Nbr:nbr, Strt:strt, Bar:bar, FightType:type, Action:action}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T12:01:15.237

尝试使用 jQuery.ajax，而不是使用 Ajax 原型：

```
function fightit(nbr,strt,bar,type,action) {
    jQuery.ajax({
    url: 'php/fight.php',
    type: 'GET',
    data: {'Nbr': nbr, 'Strt': strt, 'Bar': bar, 'FightType': type, 'Action': action}
    });
} 
```

# c# - 在 XAML 中使用矩形作为剪辑

> ID：10075262
> 
> 赞同：5
> 
> 时间：2012-04-09T15:07:49.840
> 
> 标签：c#, wpf, silverlight, xaml, expression

有没有一种方法可以将普通矩形（形状）用作 XAML 中另一个对象的剪辑的一部分。似乎我应该能够，但解决方案正在逃避我..

```
<Canvas>

        <Rectangle Name="ClipRect" RadiusY="10" RadiusX="10" Stroke="Black" StrokeThickness="0" Width="32.4" Height="164"/>

<!-- This is the part that I cant quite figure out.... -->
<Rectangle Width="100" Height="100" Clip={Binding ElementName=ClipRect, Path="??"/>

</Canvas> 
```

我知道我可以使用“RectangleGeometry”类型的方法，但我对上面提供的代码的解决方案更感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T15:58:37.387

尝试[Shape.RenderedGeometry 属性](http://msdn.microsoft.com/en-us/library/system.windows.shapes.shape.renderedgeometry.aspx)。

```
<Rectangle Width="100" Height="100"
           Clip="{Binding ElementName=ClipRect, Path=RenderedGeometry}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:39:28.347

`ClipRect.DefiningGeometry`nd`ClipRect.RenderedGeometry`仅包含`RadiusX`and`RadiusY`值，但不包含 also `Rect`。

我不确定您到底想要达到什么目标（我从您的示例中不清楚），但您可以编写一个`IValueConverter`从引用中提取您需要的信息的代码`Rectangle`：

```
public class RectangleToGeometryConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var rect = value as Rectangle;

        if (rect == null || targetType != typeof(Geometry))
        {
            return null;
        }

        return new RectangleGeometry(new Rect(new Size(rect.Width, rect.Height)))
        { 
            RadiusX = rect.RadiusX, 
            RadiusY = rect.RadiusY 
        };
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

然后，您将在绑定定义中使用此转换器：

```
<Rectangle Width="100" Height="100" 
            Clip="{Binding ElementName=ClipRect, Converter={StaticResource RectangleToGeometryConverter}}"> 
```

当然，您需要先将转换器添加到您的资源中：

```
<Window.Resources>
    <local:RectangleToGeometryConverter x:Key="RectangleToGeometryConverter" />
</Window.Resources> 
```

# file-permissions - 在 Sublime Text 2 中更改文件和文件夹权限

> ID：10075263
> 
> 赞同：4
> 
> 时间：2012-04-09T15:07:56.523
> 
> 标签：file-permissions, sublimetext2

有没有办法更改 Sublime Text 2 中文件或文件夹的权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:04:49.707

[您可以使用toggle-readonly 插件](https://github.com/reflog/toggle-readonly)在 Sublime Text 2 中切换文件的只读标志。

# javascript - Javascript Selected Formatting 在dreamweaver 中无法在浏览器中运行

> ID：10075264
> 
> 赞同：0
> 
> 时间：2012-04-09T15:07:57.643
> 
> 标签：javascript

我在使用这个脚本时遇到了一些问题。应该将 html 标签添加到文本框中的选定文本区域。在 Dreamweaver 中实时查看时，它工作得很好。正是它应该如何。在浏览器中它什么也不做。

有什么想法吗？

使用 调用该函数`onclick="formatText(content,'b')"`。

```
function formatText(el, tag) {
    var selectedText = document.selection ? document.selection.createRange().text
            : el.value.substring(el.selectionStart, el.selectionEnd);
    alert(selectedText);
    if (selectedText != '') {
        var newText = '<' + tag + '>' + selectedText + '</' + tag + '>';
        el.value = el.value.replace(selectedText, newText);
        document.getElementById(el).focus();
    } else {
        if (document.getElementById(tag).value == "0") {
            document.getElementById(tag).value = "1";
            document.getElementById(el).value = document.getElementById(el).value
                    + "<" + tag + ">";
            document.getElementById(el).focus();
        } else {
            document.getElementById(tag).value = "0";
            document.getElementById(el).value = document.getElementById(el).value
                    + "</" + tag + ">";
            document.getElementById(el).focus();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:56:19.363

您可能想要考虑使用的东西是 jQuery，它具有内置功能来完成您想要做的大部分事情。值得你花时间学习。（见[http://jquery.com/](http://jquery.com/)）

话虽如此，我对您的代码进行了一些编辑。您需要将“onclick”事件更改为“onmousedown”，将其保留为“onclick”将删除您选择的文本焦点，并且您的方法将不起作用..我不确定您的 else 语句应该做什么，所以我根本没有更新。希望这会有所帮助。

干杯。

```
<script type="text/javascript">

function formatText( el , tag )
{
    var selectedText = "" + document.getSelection();

    if ( selectedText.length > 0 )
    {
        var textWithTag = "&lt;" + tag + "&gt;" + selectedText + "&lt;/" + tag + "&gt;";
        el.innerHTML = el.innerHTML.replace( selectedText , textWithTag );
    }
}

</script>

<div id="test">Something</div>
<div onmousedown='formatText( document.getElementById("test") , "span style=\"color:red\"" );'>Click</div> 
```

# wordpress - 无法显示私人帖子

> ID：10075271
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:08:20.027
> 
> 标签：wordpress

我使用下面的代码，非常适合已发布的帖子，但我无法显示私人帖子。为什么？

```
$myquery['tax_query'] = array(
    array(
        'taxonomy' => 'protocols',
        'terms' => $termsa,
        'field' => 'slug',
    )

);
$args = array_merge(
    $myquery, 
    array(
        'paged' => get_query_var('paged'), 
        'posts_per_page' => 7,
        'post_status'     => 'any'

    )
);
query_posts($args); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:46:49.197

根据WordPress 堆栈交换上的[这个答案](https://wordpress.stackexchange.com/questions/13484/how-to-get-all-posts-with-any-post-status)`any`，可能无法作为`post_status`. 使用那里建议的数组是否有效？

# windows-phone-7 - WP7显示软键盘时防止屏幕向上滚动？

> ID：10075273
> 
> 赞同：18
> 
> 时间：2012-04-09T15:08:26.063
> 
> 标签：windows-phone-7

当软键盘显示在 Windows Phone 应用程序中时，有没有办法防止屏幕向上移动？

我有一个位于屏幕上半部分的文本框，所以当显示软键盘时，它不会覆盖文本框。但是，当点击文本框时，屏幕仍会向上移动。

这可以防止吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T15:08:06.860

我花了很长时间试图找到解决方案 - 在我的情况下，我希望页眉保持在屏幕顶部，而不是在键盘打开时滚动离开。

我发现最好的解决方案是在下面的帖子中描述的解决方案，它使用框架的 TranslateTransform 的变化（由键盘打开/关闭触发）来改变上边距的大小，从而改变可用内容的空间。

[http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/](http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/)

如果您有一个包含许多元素的屏幕，您可能需要考虑显式更改布局以适应较小的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-27T14:34:47.970

我发现这一直滚动到上面引用的[文章](http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/)中所有评论的底部：

[Scrollviewer 和多行文本框 Windows Phone](http://klingdigital.net/2013/06/scrollviewer-and-multiline-textbox-windowsphone/)

它比 Alex 的文章对我的帮助更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T19:35:34.323

我不相信有一种简单的方法可以在打开键盘时更改滚动位置。虽然我可以想到几种解决方法：

*   将所有内容放在滚动查看器中，当调用文本框焦点事件时，滚动滚动查看器以使用 ScrollToVerticalOffset() 将您感兴趣的项目保留在视图中

*   使用平移变换的 X 组件在屏幕上移动文本框。[Alex Sorokoletov](http://sorokoletov.com/2011/08/windows-phone-70-handling-text-entry-screens/)有一篇很好的博客文章。

# javascript - 当我点击它是最后一个可能的值

> ID：10075274
> 
> 赞同：0
> 
> 时间：2012-04-09T15:08:26.203
> 
> 标签：javascript, jquery, jquery-selectors, for-loop

在一切之前，对于菜鸟问题​​的帮助和抱歉。

我对 for 中的事件有疑问。DOM 是这样的：

```
<div class="wrap">

  <div class="trigger">...</div>
  <div class="trigger">...</div>

  <div class="box">...</div>
  <div class="box">...</div>

</div> 
```

我的 JS jQuery 是：

```
for( i = 0; i < $('.trigger').length; i++ ){
$('.trigger:eq('+i+')').click(function(){
    $('.box:eq('+i+')').fadeIn();
});

$('.box:eq('+i+') .bt-close').click(function(){
    $('.box:eq('+i+')').fadeOut();
});
} 
```

好吧，问题是，当我点击触发器时，i 的值为 2。我不想使用 trigger1、trigger2... 因为我不知道最终版本会有多少个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:10:35.500

```
function createEffects(index) {
    $('.trigger:eq(' + index + ')').click(function() {
        $('.box:eq(' + index + ')').fadeIn();
    });

    $('.box:eq(' + index + ')').click(function() {
        $('.box:eq(' + index + ')').fadeOut();
    });
}

for (i = 0; i < $('.trigger').length; i++) {

    createEffects(i);
}​ 
```

我会尽可能避免使用闭包。这是一个没有它们的例子：http: [//jsfiddle.net/JBbQk/](http://jsfiddle.net/JBbQk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:15:50.760

问题在于闭包。循环内的函数将记住`i`它周围范围内的变量，而不是它的值。当函数被调用时，循环已经退出，变量值是最后一个。相反，让函数自己获取值。通常的方法是使用另一个变量。一种方法是如@JoeTuskan 所示。另一种是使用自执行匿名函数：

```
for( i = 0; i < $('.trigger').length; i++ ){
  (function(j) {
    $('.trigger:eq('+j+')').click(function(){
      $('.box:eq('+j+')').fadeIn();
    });

    $('.box:eq('+j+') .bt-close').click(function(){
      $('.box:eq('+j+')').fadeOut();
    });
  })(i);
} 
```

这里的区别在于外部匿名函数（立即包装循环内容的函数）根本不访问循环变量，因此不会捕获它。而是使用其值在函数内不变的参数调用它，然后由内部函数捕获。

并不是说你不能在循环中创建函数。但如果你这样做，你希望有一个闭包来捕获它们和循环之间的循环变量。创建闭包的函数是外部定义的，如@JoeTuskan 的示例，还是内部定义的，如我的，都是风格问题；只要您了解它为什么会这样工作。实际上，在他的帖子中解释的方式应该比这个快一点，因为这样你会不断创建 N 个匿名函数，但我相信这样可能更容易理解实际发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:20:16.780

这种行为背后的原因是那些`function(){...}`是闭包。简而言之，当您创建闭包时，javascript 解释器会在函数声明点复制环境，从而允许函数访问它们，即使它们超出范围（并且将在没有闭包的情况下被垃圾收集）。

您已经面临一个可能的缺点：闭包**不**接收对象的副本，它们只是可以访问变量。考虑一个例子：

```
var i=0;
var closure = function() {alert(i);}
closure(); //alerts 0
i=1;
closure(); //alerts 1; 
```

在您的示例中也发生了同样的情况。for 循环运行到最后，留下`i`值`$('.trigger').length`。

所以，实现你想要的正确方法是[乔图斯坎的回答](https://stackoverflow.com/a/10075303/882918)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:27:50.613

使用每个的另一种方法：

```
var triggers = $('.trigger');
var boxes = $('.box');
triggers.each(
    function( ind ){
        var box = boxes.eq(ind);
        $(this).on("click", 
            function(){
                box.fadeIn();
            }
        );
    }
);

boxes.find(".bt-close").on("click", 
    function(){
        $(this).closest('.box').fadeOut(); //might be better to use parents(".box") - depends on HTML
    }
); 
```

# mysql - 使用Mysql对链接表做多次INSERT

> ID：10075279
> 
> 赞同：8
> 
> 时间：2012-04-09T15:08:49.887
> 
> 标签：mysql, stored-procedures, insert, last-insert-id

我有两张表，一张链接到另一张的主键。在我插入表 A 的那一刻，获取 LAST_INSERT_ID，然后插入表 B。

但是我有数百条记录要插入，我想加快速度。

在 Mysql 中，您可以：

```
INSERT INTO table_a (v1, v2, c3) VALUE (0, 1, 2);

INSERT INTO table_a (v1, v2, v3) VALUE (4, 5, 6); 
```

等，或

`INSERT INTO table_a (v1, v2, v3) VALUE (0, 1, 2), (4, 5, 6), etc`更快地添加多个条目 - 但仅限于一张桌子。

当然后者要快得多。我想知道是否可以在我的示例中使用存储过程复制此行为，并使用两个链接表，以及它是否会在性能上有类似的显着改进：

类似：调用 special_insert((0, 1, 2), (4, 5, 6), etc); 或类似的。

我没有存储过程的经验，所以我正在寻找有关前进方向的想法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T16:43:04.987

下面是一个包含 Last_Insert_ID() 的包含两个表插入的存储过程示例。

```
DELIMITER //
CREATE PROCEDURE new_person(
  first CHAR(35), last CHAR(35), email CHAR(255), tool_id INT)
BEGIN
START TRANSACTION;
   INSERT INTO person(firstname, lastname, email) 
     VALUES(first, last, email);

   INSERT INTO tasks (engineer_id, tool_id) 
     VALUES(LAST_INSERT_ID(), tool_id);
COMMIT;
END//
DELIMITER ;

CALL new_person('Jerry', 'Fernholz', 'me@somewhere.com', 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:00:05.493

经过一些进一步的调查，似乎 SP 不会提供显着的速度改进，并且不能接受像 INSERT INTO 这样的批量参数

[MySQL 存储过程与复杂查询](https://stackoverflow.com/questions/1151255/mysql-store-procedure-performance)

但是我仍然需要在一个中插入相当多的链接记录，所以我做了以下操作：

插入 (x, y) 值 (1,2), (3,4), (5,6), ... (N-1, N)

id = GET_LAST INSERT_ID

只要我们使用 InnoDB 表，id 的范围从 id 到 id+N：

[MySQL LAST_INSERT_ID() 与多条记录 INSERT 语句一起使用](https://stackoverflow.com/questions/4637367/mysql-last-insert-id-used-with-multiple-records-insert-statemen)

[MySQL LAST_INSERT_ID() 与多条记录 INSERT 语句一起使用](https://stackoverflow.com/questions/4637367/mysql-last-insert-id-used-with-multiple-records-insert-statement/7959695#7959695t)

[http://gtowey.blogspot.com/2012/02/multi-insert-and-lastinsertid.html](http://gtowey.blogspot.com/2012/02/multi-insert-and-lastinsertid.html)

进而

INSERT INTO b (a_id, z) VALUES (id,2), (id+1,4), (id+2,6), ... (id+N, 11) 只有你需要知道你的mysql从复制增量增量。

# php - 共享 zend 模块控制器以在另一个模块中使用

> ID：10075283
> 
> 赞同：1
> 
> 时间：2012-04-09T15:09:07.177
> 
> 标签：php, zend-framework

假设我有一个 User_RegistrationController ，我想在另一个模块中扩展，如下所示：

```
class Clinic_RegisterController extends User_RegisterController 
```

但我有 PHP 错误：

```
( ! ) Fatal error: Class 'User_RegisterController' not found /application/modules/clinic/controllers/RegisterController.php on line 4 
```

有没有办法从另一个模块扩展控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:05:56.727

您可以将基本控制器拉入一个单独的库类：

```
class App_Controller_Action_MyController extends Zend_Controller_Action
{
    // your base controller code here
} 
```

那么模块中的控制器`foo`可能为空：

```
class Foo_MyController extends App_Controller_Action_MyController
{
} 
```

而模块中的控制器`bar`可以包含您的覆盖：

```
class Bar_MyController extends App_Controller_Action_MyController
{
     // override your members/methods
} 
```

不要忘记添加`App_`为`autoloadernamespace`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T23:35:32.890

自动加载器只是没有设置为从其他模块中查找控制器。

如果你想做你正在做的事情，你可以简单地`require_once`在你的类定义上方添加一个语句：

```
require_once APPLICATION_PATH . '/modules/user/controllers/RegisterController.php';

class Clinic_RegisterController extends User_RegisterController
{
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:08:25.163

为什么需要扩展另一个模块的控制器？这会创建对另一个模块的依赖。如果两个控制器中有共同的代码，则在应用层使用[动作助手](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelper.writingyourown)。

# diagram - 绘制 SICP 中的信号流图

> ID：10075284
> 
> 赞同：0
> 
> 时间：2012-04-09T15:09:09.030
> 
> 标签：diagram, graphviz, sicp

我正在寻找绘制这样一个图表的方法[http://mitpress.mit.edu/sicp/full-text/book/ch3-ZG-35.gif](http://mitpress.mit.edu/sicp/full-text/book/ch3-Z-G-35.gif)，[http://mitpress.mit.edu/sicp /full-text/book/ch3-ZG-49.gif](http://mitpress.mit.edu/sicp/full-text/book/ch3-Z-G-49.gif) , [http://mitpress.mit.edu/sicp/full-text/book/ch3-ZG-51.gif](http://mitpress.mit.edu/sicp/full-text/book/ch3-Z-G-51.gif)，以 SICP 命名`signal-flow diagram`。我尝试了一些方法，但都失败了。我在等你的帮助。

我已经尝试`graphviz`并编写了以下代码。我想获得斐波那契序列流的图表。

```
digraph G {
    add [shape = box];
    cons_1 [shape = box, label = "cons"];
    cons_2 [shape = box, label = "cons"];
    fibs [shape = point];
    Efibs [shape = point];
    single_0 [shape = none, label = "0"];
    single_1 [shape = none, label = "1"];
    subgraph cluster_0 {
        add -> cons_1 -> Efibs -> cons_2 -> fibs;
    }
    single_0 -> cons_1 [style = dotted];
    single_1 -> cons_2 [style = dotted];
    Efibs -> add;
    fibs -> add;
} 
```

但结果很尴尬。是否有任何简单的工具（我更喜欢 WYTIWYG）或教程来绘制这种图表？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:08:15.077

如果您对 LaTeX 感到满意，[TiKz 包](http://www.texample.net/tikz/examples/power-electronics-solar-system/)可以生成漂亮的图表。尽管如果您之前没有使用过它，可能不值得为此学习。

# c - 车辆避障传感器

> ID：10075285
> 
> 赞同：2
> 
> 时间：2012-04-09T15:09:18.673
> 
> 标签：c, microcontroller, sensors, robotics

我是机器人新手，我想制造一辆车来和我 3 岁的儿子一起玩。我有一个 PIC 16F917 微控制器和一个半 H 桥 L293DNE。到目前为止，为了使车辆移动，我尝试的是由以下链接引导的 C 代码：[http ://www.google.gr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved= 0CCQQFjAA&url=http%3A%2F%2Fwww.societyofrobots.com%2Fmember_tutorials%2Ffiles%2FLukas%2520PIC%2520Tutorial.doc&ei=8tWCT4GeNZD6sgaQmYzRBA&usg=AFQjCNFw6ZoQSyoKwRj3uPaLmchgBzGY4Q&sig2=tLQ47VLA9Q&sig2-i](http://www.google.gr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCQQFjAA&url=http%3A%2F%2Fwww.societyofrobots.com%2Fmember_tutorials%2Ffiles%2FLukas%2520PIC%2520Tutorial.doc&ei=8tWCT4GeNZD6sgaQmYzRBA&usg=AFQjCNFw6ZoQSyoKwRj3uPaLmchgBzGY4Q&sig2=tLQ7VN9IJen-TXCznu4jLA). 所以我能够让机器人前进、后退和左转和右转。我现在要做的是找到合适的避障传感器。由于我以前没有经验，有人可以推荐与微控制器传感器兼容的合适的吗？如果是这样，我想知道我应该在微控制器的哪些引脚上连接传感器，以及 C 中合适的编程顺序，以便传感器与微控制器交互。

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T14:10:23.833

先前评论中的 sparkfun 链接是获取传感器的好地方。

超声波传感器适用于粗略估计距离。它们的光束很宽，结果很吵。夏普红外传感器的光束更窄，更准确一些。对于非常近的范围（而且非常便宜），您可以简单地使用红外发射器和检测器。通常，IR 是脉冲的，因此您可以测量环境 IR 照明与脉冲开启时之间的差异。（搜索“带有 555 定时器的红外接近探测器”，或类似的东西）。

# c# - 模拟字符串拆分功能

> ID：10075290
> 
> 赞同：1
> 
> 时间：2012-04-09T15:09:40.827
> 
> 标签：c#, function, split, visual-c#-express-2010

我创建了一个拆分函数：句子中的每个单词都作为一个元素添加到`string`数组中。

我对最后一个词有疑问；它没有被添加到输出数组中：

**编码：**

```
// the funcion
static void splits(string str)
{
   int i=0;
   int count=0;
   string[] sent = new string[2];
   string buff= "";
   while (i < str.Length)
   {
      if (str[i] == ' ')
      {
         sent[count] = buff;
         count++;
         buff = "";
      }
      buff += str[i];
      i++;
   }
     Console.WriteLine(sent[0]);
} 
```

* * *

```
// When used
splits("Hello world!"); 
```

## -----------------------------------------------------------

* * *

**我找到了解决方案，很简单
，希望每个人都能受益**

```
static void splits(string str)
{
  int i = 0;
  int count = 0;
  string[] sent = new string[2];
  string buff = "";
  str += " ";         // the solution here, add space after last word
  while (i < str.Length)
  {
    if (str[i] == ' ')
    {
       sent[count] = buff;
       count++;
       buff = "";
    }
    buff += str[i];
    i++;
  }

  for (int z = 0; z < sent.Length; z++)
  {
     Console.WriteLine(sent[z].Trim());
  }
} 
```

结果将如下所示（[此处为视觉结果](http://ideone.com/HbeBR)）

```
Hello  
world! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:13:15.413

退出`while`循环后，您需要手动添加剩余字符作为数组中的最后一项。这是因为您在字符（空格）上进行了拆分`，但最后一个单词后面没有空格来表示要添加的单词：`

 ````
...
}
if (!string.IsNullOrEmpty(buff))
    sent[count++] = buff; 
```

示例：http: [//ideone.com/81Aw1](http://ideone.com/81Aw1)

* * *

但是，正如所`@Matthew`指出的，除非您需要实现一些特殊功能，否则您应该只使用内置的 split 功能：

```
"Hello World!".Split(' '); 
```

这在一行代码中开箱即用，并且已经过 .NET Framework 的开发人员和无数用户的详尽测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:25:49.557

为了使解决方案可重复使用，我首先计算了空格数；我还将最后一个单词作为一种特殊情况处理（因此，这使得这项工作与不包含空格的输入一起工作）。它应该很容易适应任何分隔符。

```
 string s = "Test spaces in a sentence :)";
  int numSpaces = 1;
  foreach (char c in s)
  {
    if (c == ' ')
    {
      ++numSpaces;
    }
  }
  string[] output = new string[numSpaces];
  int spaceIndex = s.IndexOf(' ');
  int index = 0;
  int startIndex = 0;
  --numSpaces;
  while (index < numSpaces)
  {
    output[index] = s.Substring(startIndex, spaceIndex - startIndex);
    startIndex = spaceIndex + 1;
    spaceIndex = s.IndexOf(' ', startIndex);
    ++index;
  }
  output[index] = s.Substring(startIndex);
  foreach (string str in output)
  {
    Console.WriteLine(str);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:13:36.500

```
if (str[i] == ' ') 
```

绝不会因为最后一句话而开火

```
while (i < str.Length)
{
   if (str[i] == ' ')
   {
      sent[count] = buff;
      count++;
      buff = "";
   }
   else
   {
       buff += str[i];
   }

   i++;
}
sent[count] = buff; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:15:48.910

完成 while 循环后，您需要检查缓冲区，以确定最后一个单词是否仍在其中。此外，您只打印第一个元素。

```
// the funcion
static void splits(string str)
{
   int i=0;
   int count=0;
   string[] sent = new string[2];
   string buff= "";
   while (i < str.Length)
   {
      if (str[i] == ' ')
      {
         sent[count] = buff;
         count++;
         buff = "";
      }
      buff += str[i];
      i++;
   }
   if (buff.Length > 0) {
       sent[count] = buff;
       count++;
   }

   for (i = 0; i < count; i++)
       Console.WriteLine(sent[i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T15:20:18.917

为什么不这样呢？

```
 private Array SplitSentence(string splitMe)
 {
   if(string.IsNullOrEmpty(splitMe)) return null;
   var splitResult = splitMe.Split(" ".ToArray());
   return splitResult;
 } 
````

# c - 在C中将字符串转换为双变量

> ID：10075294
> 
> 赞同：18
> 
> 时间：2012-04-09T15:10:00.307
> 
> 标签：c, string, double, atof

我已经编写了以下代码。它应该将字符串转换`"88"`为 double 值`88`并打印它

```
void convertType(char* value)
{
   int i = 0;
   char ch;
   double ret = 0;
   while((ch = value[i])!= '\0')
   {
      ret = ret*10 + (ch - '0');
      i++;
   }
   printf("%d",ret); //or %lf..
}

// input string :88 
```

但它总是打印`0`。但是当我将 ret 的类型更改为 时`int`，它工作正常。当类型为`float`或`double`时，它会打印`0`。那么为什么我会得到这些模棱两可的结果呢？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-09T15:13:10.810

使用`sscanf`（标题`stdio.h`或`cstdio`在 C++ 中）：

```
char str[] = "12345.56";
double d;

sscanf(str, "%lf", &d);

printf("%lf", d); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T15:13:32.573

您也许可以使用 atof() 它返回一个双精度值。

[资源](https://www.ibm.com/support/knowledgecenter/en/ssw_ibm_i_73/rtref/itof.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T15:16:41.500

> 但它总是打印 0...但是当我将 ret 的类型更改为 int ...它工作正常...当类型为 float 或 double 时，它​​打印为零。

逻辑没问题。只是您的格式说明符是错误的。将其更改为`%f`一切正常！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-20T14:59:22.220

如果要将 char* 解析为加倍，则应使用函数“atof”。

您还应该使用分隔符“%f”来打印双精度：

可以在[此处找到更多信息和使用示例。](http://www.tutorialspoint.com/c_standard_library/c_function_atof.htm)

使用示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
   float val;
   char str[20];

   strcpy(str, "98993489");
   val = atof(str);
   printf("String value = %s, Float value = %f\n", str, val);

   strcpy(str, "tutorialspoint.com");
   val = atof(str);
   printf("String value = %s, Float value = %f\n", str, val);

   return(0);
} 
```

要打印它，您必须将其打印为浮点数：

```
printf("This is the value in float: %f\n", yourFloatValue); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-10T02:53:25.277

> 在C中将字符串转换为双变量

如果溢出不是问题，但代码希望在数字文本之后检测额外的非空白文本：

```
// return 1 on success
int convertType(const char* value, double *destination) {
  char sentinel;
  return sscanf(value,"%f %c", destination, &sentinel) == 1;
} 
```

如果`sscanf()`找不到 a ，则`double`返回值为或 0。`sscanf()``EOF`

如果`sscanf()`在数字文本之后找到非空白文本，它将返回 2。

如果只`double`扫描 a，没有额外的，则`sscanf()`返回 1。前导和尾随空格都可以。

例子：

```
double x;
if (convertType(some_string, &x)) {
  printf("%.17e\n", x);  // or whatever FP format you like
} else {
  puts("Failed");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-20T07:10:47.263

这对我有用：

```
double stod(const char* s); //declaration

double d = stod(row[0]); //call

double stod(const char* s){    //definition
    double rez = 0, fact = 1;
    if (*s == '-'){
        s++;
        fact = -1;
    };
    for (int point_seen = 0; *s; s++){
        if (*s == '.'){
            point_seen = 1;
            continue;
        };
        int d = *s - '0';
        if (d >= 0 && d <= 9){
            if (point_seen) fact /= 10.0f;
            rez = rez * 10.0f + (float)d;
        };
    };
    return rez * fact;
}; 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-09-12T11:42:05.457

```
#define ZERO 48
#define NINE 57
#define MINUS 45
#define DECPNT 46

long strtolng_n(char* str, int n)
{
    int sign = 1;
    int place = 1;
    long ret = 0;

    int i;
    for (i = n-1; i >= 0; i--, place *= 10)
    {
        int c = str[i];
        switch (c)
        {
            case MINUS:
                if (i == 0) sign = -1;
                else return -1;
                break;
            default:
                if (c >= ZERO && c <= NINE) ret += (c - ZERO) * place;
                else return -1;
        }
    }

    return sign * ret;
}

double _double_fraction(char* str, int n)
{
    double place = 0.1;
    double ret = 0.0;

    int i;
    for (i = 0; i < n; i++, place /= 10)
    {
        int c = str[i];
        ret += (c - ZERO) * place;
    }
    return ret;
}
double strtodbl(char* str)
{
    int n = 0;
    int sign = 1;
    int d = -1;
    long ret = 0;

    char* temp = str;
    while (*temp != '\0')
    {
        switch (*temp)
        {
            case MINUS:
                if (n == 0) sign = -1;
                else return -1;
                break;
            case DECPNT:
                if (d == -1) d = n;
                else return -1;
                break;
            default:
                if (*temp < ZERO && *temp > NINE) return -1;
        }
        n++;
        temp++;
    }

    if (d == -1)
    {
        return (double)(strtolng_n(str, n));
    }
    else if (d == 0)
    {
        return _double_fraction((str+d+1), (n-d-1));
    }
    else if (sign == -1 && d == 1)
    {
        return (-1)*_double_fraction((str+d+1), (n-d-1));
    }
    else if (sign == -1)
    {
        ret = strtolng_n(str+1, d-1);
        return (-1) * (ret + _double_fraction((str+d+1), (n-d-1)));
    }
    else
    {
        ret = strtolng_n(str, d);
        return ret + _double_fraction((str+d+1), (n-d-1));
    }
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-04-09T17:22:19.083

以下代码适用于我。

```
#include <stdio.h>

void convertType(char* value);

int main(int argc, char *argv[]) {
    char *str="0929";
    convertType(str);

    return  0;
}

void convertType(char* value) {
    double ret = 0;

    while(*value != '\0') {
        ret = ret*10 +(*value - '0');
        value++;
    }

    fprintf(stdout, "value: %f\n", ret);
} 
```

# c# - 如何在 C# 中使用套接字处理 SSL

> ID：10075296
> 
> 赞同：1
> 
> 时间：2012-04-09T15:10:10.093
> 
> 标签：c#, sockets, ssl

我过去没有在任何其他编程语言中使用套接字的经验，但现在，我必须使用仅接受套接字的服务 API 发出请求。

我的代码可以在[这里](http://pastebin.com/LhM8Nkpw)找到。

我不知道我是否正确处理，因为该`ValidateCertificate`方法返回 false。“errors”参数不等于“none”，其值为：`CertificateNameMissmatch | CertificateChainErrors`

由于这是我的第一个套接字应用程序，我不知道这里可能发生什么。

我尝试访问的服务使用 SSL，`Socket API`用于查询他们的数据库。

这是首先执行的代码：

```
 // Creating SSLClient
        m_sslClient = new SSLClient ("localhost","200.245.207.155",3395);

        // Encoding and Converting Struct to String
        layoutAsString = CrednetStructs.StructureToString (new CrednetStructs.InputLayout ("","","",""));

        // Writting message to Stream
         m_sslClient.WriteMessage (layoutAsString); 
```

其中 InputLayout 是可以在[此处](http://pastebin.com/ZvCMTe03)找到的套接字请求的参数。它是一个结构。

让我知道是否有任何我可能遗漏的其他信息。提前致谢

# css - Nginx 加载 css 文件失败

> ID：10075304
> 
> 赞同：96
> 
> 时间：2012-04-09T15:10:42.217
> 
> 标签：css, nginx, mime

我最近决定从 Apache2 切换到 Nginx。我在我的 CentOS 服务器上安装了 Nginx 并设置了基本配置。当我尝试在浏览器（FF/Chrome）中加载我的网站时，我注意到没有加载 css 文件。我检查了错误控制台并看到了这条消息：

`Error: The stylesheet http://example.com/style.css was not loaded because its MIME type, "text/html", is not "text/css".`

我检查了 Nginx 配置，一切似乎都很好：

```
http {
    include /etc/nginx/mime.types;
    ..........
} 
```

css 文件的 mime 类型在 /etc/nginx/mime.types 中正确设置。

`text/css css;`

一切似乎都配置得很好，但我的 css 文件仍然没有加载。我没有解释。

还有一点值得一提。最初我使用 epel 存储库安装了 Nginx，我得到了一个旧版本：0.8 ... 在我看来，我的问题是那个版本中的一个错误，所以我卸载了 0.8 版本，将 nginx 存储库添加到 yum，然后安装了最新版本：1.0。 14\. 我认为新版本会解决我的问题，但不幸的是它没有，所以我的想法已经不多了。

我很感激任何帮助。

配置文件：

**/etc/nginx/nginx.conf**

```
user  nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    keepalive_timeout  65;

    #gzip  on;

    include /etc/nginx/conf.d/*.conf;
} 
```

**/etc/nginx/conf.d/default.conf**

```
server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;
    #access_log  /var/log/nginx/log/host.access.log  main;

    location / {
         root    /usr/share/nginx/html;
         index  index.html index.htm index.php;
         fastcgi_pass   127.0.0.1:9000;
         fastcgi_index  index.php;
         fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html$fastcgi_script_name;
         include        fastcgi_params;
    }

    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    #location ~ \.php$ {
    #    root           html;
    #    fastcgi_pass   127.0.0.1:9000;
    #    fastcgi_index  index.php;
    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
    #    include        fastcgi_params;
    #}

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    #location ~ /\.ht {
    #    deny  all;
    #}
} 
```

**/etc/nginx/mime.types**

```
types {
    text/html                             html htm shtml;
    text/css                              css;
    text/xml                              xml;
    image/gif                             gif;
    image/jpeg                            jpeg jpg;
    application/x-javascript              js;
    application/atom+xml                  atom;
    application/rss+xml                   rss;
    ..........................................
    other types here
    ..........................................
} 
```

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-09T01:11:03.133

把 `include /etc/nginx/mime.types;`under`location / {`而不是under`http {`为我解决了这个问题。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-04-11T18:14:55.677

我在网上找到了一种解决方法。我在 /etc/nginx/conf.d/default.conf 添加了以下内容：

```
location ~ \.css {
    add_header  Content-Type    text/css;
}
location ~ \.js {
    add_header  Content-Type    application/x-javascript;
} 
```

现在的问题是对我的css文件的请求没有很好地重定向，好像没有正确设置root一样。在 error.log 我看到

2012/04/11 14:01:23 [错误] 7260#0: *2 open() "/etc/nginx//html/style.css"

因此，作为第二种解决方法，我将根添加到每个定义的位置。现在它可以工作了，但似乎有点多余。root 不是继承自 / location 吗？

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-04-25T00:26:28.200

`style.css`由于您的“位置/”指令，实际上是通过 fastcgi 处理的。所以是 fastcgi 提供文件（`nginx > fastcgi > filesystem`），而不是直接提供文件系统（`nginx > filesystem`）。

由于我还没有弄清楚的原因（我确定某处有一个指令），NGINX 将 mime 类型应用于`text/html`从 fastcgi 提供的任何内容，除非后端应用程序明确说明。

罪魁祸首就是这个配置块：

```
location / {
     root    /usr/share/nginx/html;
     index  index.html index.htm index.php;
     fastcgi_pass   127.0.0.1:9000;
     fastcgi_index  index.php;
     fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html$fastcgi_script_name;
     include        fastcgi_params;
} 
```

它应该是：

```
location ~ \.php$ { # this line
     root    /usr/share/nginx/html;
     index  index.html index.htm index.php;
     fastcgi_split_path_info ^(.+\.php)(/.+)$; #this line
     fastcgi_pass   127.0.0.1:9000;
     fastcgi_index  index.php;
     fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name; # update this too
     include        fastcgi_params;
} 
```

此更改确保仅从`*.php`fastcgi 请求文件。此时，NGINX 将应用正确的 MIME 类型。如果您有任何 URL 重写发生，您必须在 location 指令 ( )*之前*`location ~\.php$`处理此问题，以便派生正确的扩展名并正确路由到 fastcgi。

请务必查看[这篇文章，了解使用`try_files`](https://nealpoole.com/blog/2011/04/setting-up-php-fastcgi-and-nginx-dont-trust-the-tutorials-check-your-configuration/). 考虑到安全隐患，我认为这是一项功能，而不是错误。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-01-04T20:29:55.830

我也遇到了这个问题。它让我感到困惑，直到我意识到出了什么问题：

你有这个：

```
include       /etc/nginx/mime.types;
default_type  application/octet-stream; 
```

你要这个：

```
default_type  application/octet-stream;
include       /etc/nginx/mime.types; 
```

似乎 nginx 中存在错误或文档中存在缺陷（这可能是预期的行为，但很奇怪）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-18T11:13:56.213

我遵循了其他答案中的一些提示，发现这些奇怪的行为有所帮助（至少在我的情况下）。

1）我添加到服务器块以下：

```
location ~ \.css {
 add_header Content-Type text/css;
} 
```

我重新加载了 nginx 并在 error.log 中得到了这个：

2015/06/18 11:32:29 [错误] 3430#3430: *169 open() "/etc/nginx/html/css/mysite.css" 失败（2：没有这样的文件或目录）

2）我删除了行，重新加载了 nginx 并开始工作 css。我无法解释发生了什么，因为我的 conf 文件变成了以前的样子。

我的案例是 VirtualBox 上的干净 xubuntu 14.04、nginx/1.9.2、`127.51.1.1 mysite`/etc/hosts 中的一行以及非常简单的 /etc/nginx/nginx.conf 和服务器块：

```
user nginx;
worker_processes 1;

error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include /etc/nginx/mime.types;

    server {
        listen 80;
        server_name mysite;

        location / {
            root /home/testuser/dev/mysite/;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-24T08:27:18.790

1.  在您的 nginx.conf 文件中，将 mime.types 添加到您的`http`正文中，如下所示：

    ```
    http {
        include /etc/nginx/mime.types;
        include /etc/nginx/conf.d/*.conf;
    } 
    ```

2.  现在转到终端并运行以下命令以重新加载服务器：

    ```
    sudo nginx -s reload 
    ```

3.  打开您的网络浏览器并进行硬重新加载：右键单击重新加载按钮并选择硬重新加载。在 Chrome 上你可以做`Ctrl`+ `Shift`+`R`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-10-20T11:16:49.733

我也面临这个问题，我尝试了很多解决方案，但没有一个真正适合我

**这是我解决它的方法；**

**一个**。将域文档根目录（比如我的根目录`/var/www/nginx-demo`）的所有权授予 Nginx 用户 ( `www-data`) 以避免任何权限问题：

```
sudo chown -R www-data: /var/www/nginx-demo 
```

**B.**确认您的虚拟主机服务器块符合此标准（假设我使用`localhost`as my server_name 和我的 root as `/var/www/nginx-demo/website`）

```
server {
   listen 80;
   listen [::]:80;

   server_name localhost;

   root /var/www/nginx-demo/website;
   index index.html;

   location / {
            try_files $uri $uri/ =404;
   }
} 
```

**C.**测试 Nginx 配置的语法是否正确：

```
sudo nginx -t 
```

如果配置语法中没有错误，输出将如下所示：

```
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful 
```

**D.**重启 Nginx 服务以使更改生效：

```
sudo systemctl restart nginx 
```

**E.**在浏览器中硬刷新您的网站，以避免使用键盘键**Ctrl + F5**或**Ctrl + Fn + F5 缓存文件标题不正确。**

就这样。

**我希望这有帮助。**

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-05T13:45:04.627

我在 Windows 中遇到了同样的问题。我解决了它添加：*包括 mime.types;* 在我的 nginx.conf 文件中的*http{*下。然后它仍然没有工作.. 所以我查看了**error.log**文件，我注意到它试图从文件路径中收取 .css 和 javascript 文件，但之间有一个 /http 文件夹。例如：我的 .css 位于：“C:\Users\pc\Documents\nginx-server/player-web/css/index.css”，它来自：“C:\Users\pc\Documents\nginx -server/ **html** /player-web/css/index.css" 所以我在一个 html 文件夹中更改了我的 player-web 文件夹，它工作了；）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-11T23:02:32.457

对我来说，这是安装在网络浏览器上的广告拦截器。它没有让加载 style.css

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-16T23:57:06.203

Debian 10.6 上的 Nginx 1.14.2 也出现了同样的问题。

可以通过设置`charset`变量来解决。通过添加到服务器块，在`server_name`指令下面：

```
charset utf-8; # Use the appropriate charset in place of "utf-8" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-18T13:39:32.733

实际上，我花时间浏览了此页面上的所有上述答案，但无济于事。我只是碰巧使用以下命令更改了目录和子目录的所有者和权限。我使用以下命令将 Web 项目目录的所有者更改为`/usr/share/nginx/html`用户`root`：

`chown root /usr/share/nginx/html/mywebprojectdir/*`

最后使用以下命令更改了该目录和子目录的权限：

`chmod 755 /usr/share/nginx/html/mywebprojectdir/*`

**注意**：如果被拒绝，您可以使用**sudo**

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-03-01T09:46:52.257

我遇到了同样的问题，以上都没有对我有任何影响是什么让我的位置 php 高于任何其他位置块。

```
location ~ [^/]\.php(/|$) {
fastcgi_split_path_info  ^(.+\.php)(/.+)$;
fastcgi_index            index.php;
fastcgi_pass             unix:/var/run/php/php7.3-fpm.sock;
include                  fastcgi_params;
fastcgi_param   PATH_INFO       $fastcgi_path_info;
fastcgi_param   SCRIPT_FILENAME $document_root$fastcgi_script_name;
}
** The below is specifically for moodle **
location /dataroot/ {
internal;
alias <full_moodledata_path>; # ensure the path ends with /
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-08T08:51:36.933

在尝试了几个小时之后，我的情况与这里的所有其他情况都不同。它是我用作资源隐藏文件夹的路径的一个文件夹中的一个点：

```
<link type = "text/css" href="../../.res/css/bootstrap.min.css" rel="stylesheet"> 
```

这导致样式没有在浏览器中呈现，尽管它们正在从 nginx 加载而没有错误。只有 Firefox（不是 Chrome）抱怨 MIME 类型的 css 不是 css 而是文本。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-09T10:58:29.227

我知道这已经晚了，但是在互联网上搜索解决方案之后，虽然所有人都集中在配置上，但实际上 html 本身很重要

在配置方面，在您定义了项目根目录之后，您应该指向您的统计数据，尤其是在这种情况下的 css，例如 - 我的 css 在 root/src

```
location ~*/src/.css {  
    include /etc/nginx/mime.types;
    add_header Content-type text/css;
} 
```

在你的 HTML 中：确保正确使用`rel`and`type`

`<link rel="stylesheet" href="src/styles.css" type="text/css">`

希望这对将来的其他人有所帮助

* * *

## 回答 #15

> 赞同：-5
> 
> 时间：2016-06-22T15:50:31.580

将此添加到您的 ngnix conf 文件中

```
add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://ssl.google-analytics.com https://assets.zendesk.com https://connect.facebook.net; img-src 'self' https://ssl.google-analytics.com https://s-static.ak.facebook.com https://assets.zendesk.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://assets.zendesk.com; font-src 'self' https://themes.googleusercontent.com; frame-src https://assets.zendesk.com https://www.facebook.com https://s-static.ak.facebook.com https://tautt.zendesk.com; object-src 'none'"; 
```

# python - GAE DataStore 参考属性关系

> ID：10075305
> 
> 赞同：1
> 
> 时间：2012-04-09T15:10:54.923
> 
> 标签：python, google-app-engine, referenceproperty

我试图让所有父母/孩子从一对多的关系中获得。传统上，我可以通过连接来做到这一点，但在数据存储中这样做让我无法理解。

我找到了几个部分示例来执行此操作，但还没有一个完整的示例。

我有：

```
class Owner(db.Model):
  name = db.StringProperty()

class Pet(db.Model):
  petname = db.StringProperty()
  owner = db.ReferenceProperty(Owner, collection_name='pets')

#now I want to print all pets owned by scott
scott = Owner(name="scott")
scott.put()
Pet(owner=scott,petname="rufus").put()

pets = Pet.all().filter('owner =', "scott").fetch(100)
print Pet.all().filter('owner =', "scott").fetch(0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:32:29.523

我认为，如果您删除“scott”周围的引号，您的查询应该可以正常工作。

您还可以让 Scott 的所有 Pet 实体都将他的实体作为其父实体：

```
class Owner(db.Model):
    name = db.StringProperty()

class Pet(db.Model):
    petname = db.StringProperty()

scott = Owner(name="scott")
scott.put()

Pet(parent=scott, petname="rufus").put()
Pet(parent=scott, petname="fluffy").put()
Pet(parent=scott, petname="snoogums").put()

pets = Pet.all().ancestor(scott).fetch(100)
# Feed pets to your templating engine. So to speak. 
```

通过将 scott 设置为 Pet 实体的父级，它们都被添加到同一个实体组中，并且该`ancestor`查询为您提供了一种简单而直接的方法来获取所有作为`Pet`给定“所有者”子级的实体。与非祖先查询相比，祖先查询应该获得更好的性能。

这确实施加了 Pet 实体只能属于一个实体组的限制，如果您想`Pet`参与多个数据关系，则必须选择另一种方法。如果是一对一的关系，只需存储对其他相关实体的引用即可。

要获得`Pet`实体的可打印表示，请给它一个`__unicode__`方法，如下所示：

```
class Pet(db.Model):
    petname = db.StringProperty()

    def __unicode__(self):
        return "I am " + self.petname 
```

`__unicode__`应该返回一个字符串，其中包含您希望看到的`print`语句打印的信息。正如尼克在评论中明智地指出的那样，您不应该`print`在 AppEngine 应用程序中使用。SDK 带有 Django 模板和 Jinja2。使用其中一种或导入您喜欢的一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:36:33.777

查看[google 制作的 GQL 示例](https://developers.google.com/appengine/docs/python/datastore/gqlreference#Examples)。

实例化所有者时，使用所有者名称作为唯一键，将“斯科特”赋予 key_name 而不是“名称”。

```
scott = Owner(key_name="scott") 
```

以 scott 作为父级创建宠物

```
pet = Pet(key_name='rufus', parent=scott) 
```

并查询他的宠物

```
SELECT * FROM Pets WHERE ANCESTOR IS KEY('Owner', 'scott') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:32:25.963

您应该按所有者的密钥过滤：

```
#not str "scott", use scott object.
pets = Pet.all().filter('owner =', scott).fetch(100) 
```

# c# - 如何以编程方式访问 bitlocker 恢复选项卡以备份恢复密码

> ID：10075310
> 
> 赞同：0
> 
> 时间：2012-04-09T15:11:05.633
> 
> 标签：c#, active-directory

当计算机在一定时间后未使用时，我们会禁用它们，并且这些计算机会在一定时间后从 Active Directory 中删除。我的任务是编写代码以通过活动目录并在禁用机器被删除之前复制所有的 bitlocker 恢复密码（如果现在可以手动完成）。我开始通用，只是循环通过 Active Directory 并有这个：

```
DirectoryEntry adRoot = new DirectoryEntry("XXXX://" + domain, null, null, AuthenticationTypes.Secure);
DirectorySearcher searcher = new DirectorySearcher(adRoot);
searcher.SearchScope = SearchScope.Subtree;
searcher.ReferralChasing = ReferralChasingOption.All;
SearchResultCollection result = searcher.FindAll();
foreach (SearchResult res in result)
{
    DirectoryEntry directoryEntry = res.GetDirectoryEntry();
    foreach (DirectoryEntry de in directoryEntry.Children)
    {
    }
} 
```

我在主要搜索中将所有禁用的计算机视为儿童，但查看这些儿童的属性时，我没有看到任何与 bitlocker 相关的内容。我已将我的谷歌搜索更改为特定于 bitlocker，但没有找到任何符合我需要的内容。有谁知道这样做的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:38:03.083

我不确定如何通过 API 访问它，但使用 ADSI Edit，位锁信息显示如下：（对不起，如果我的语法错误）

```
CN=Computers,CN=COMPUTER-NAME,CN=TimestampWithTimezone{Guid} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:20:53.070

本文中列出了这些属性 - [http://technet.microsoft.com/en-us/library/dd875529(WS.10).aspx](http://technet.microsoft.com/en-us/library/dd875529(WS.10).aspx)在“在 AD DS 中存储 BitLocker 恢复信息”部分下。您可以使用 访问这些属性`de.Properties["your-property-here"].Value`。

# tfs - 如何在 TFS 构建服务器上启用 Azure 项目的包创建

> ID：10075313
> 
> 赞同：0
> 
> 时间：2012-04-09T15:11:11.340
> 
> 标签：tfs, azure, cloud, tfsbuild

我有一个 WebRole Azure 项目，我计划在我的解决方案构建成功时在 TFS Build 服务器上生成包。

以下是我的解决方案的简要说明：

1.  Web应用程序。
2.  开发中遵循 TDD 方法。
3.  1 个网络角色。
4.  两种配置（云和本地）
5.  基于 ACS 的验证。

在 Visual Studio 中，我正在使用 PACKAGE 命令创建包。

在运行 PACKAGE 命令时，我选择以下内容：

1.  服务配置：云。
2.  构建配置：发布。
3.  选中：启用远程桌面。

使用与 Visual Studio 中相同的设置在 TFS 构建服务器上创建包的过程是什么？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:50:44.203

我们有一个所有项目都包含的 Common.Targets，包括 .ccproj。它有：

```
<Import Project=".\AzurePackages.Targets" Condition=" '$(CloudToolsVersion)' != '' And '$(BuildingInsideVisualStudio)' != 'true'"/> 
```

AzurePackages.Targets（稍作编辑）：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<PropertyGroup>
  <!-- Create Azure packages -->
  <PackageName>$(AssemblyName).cspkg</PackageName>
  <AzurePackageDir>$(OutDir)Packages\$(AssemblyName).Azure\</AzurePackageDir>
</PropertyGroup>

<Target Name="CopyPackageToOutDir" AfterTargets="Build" DependsOnTargets="CorePublish" Condition="'$(InRecursiveCall)' == ''">
  <Copy SourceFiles="@(PublishServicePackage)" DestinationFolder="$(AzurePackageDir)" />
</Target> 
```

至于配置，我们希望每个包附近有多个.cscfg，所以我们在部署时决定取哪个。我们有一个解决方案，但对于一个问题来说太复杂了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:20:03.930

您可以为此目的使用 msbuild CorePublish 目标。（参见例如[这篇博文](http://blog.ehuna.org/2011/02/how_to_automate_the_creation_o.html)）

作为安全最佳实践，远程桌面在源树中启用，但实际证书、远程桌面设置不在其中，而是通过在部署期间更改配置来添加的。构建配置的行为与预期一样，ServiceConfiguration 风格最终将成为单独的 cscfg 文件。

# express - Jade 模板中的 `body!= body` 是什么意思？

> ID：10075314
> 
> 赞同：6
> 
> 时间：2012-04-09T15:11:18.237
> 
> 标签：express, pug

这个问题与在 Express.js 中使用Jade[模板](http://expressjs.com/)[有关](http://jade-lang.com/)。

我知道当我写`layout.jade`的时候包含：

```
!!!
html
    body != body
        header
            h1 My header 
```

当我调用时`res.render('index')`，我的实际模板将呈现到`body`.

我的问题是：这是什么`!= body`意思以及 Jade/Express 如何使用它来确定我的模板在布局中的位置？我知道，如果我`!= body`在另一个元素内进行更改，那么实际视图将在那里呈现。有谁知道这个功能记录在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T15:17:14.427

[我从 Jade 的文档/指南](https://github.com/visionmedia/jade#readme)中引用：

> 为安全起见，由 = 缓冲的代码默认转义，但是要输出未转义的返回值，您可以使用 !=：
> 
> > p!= aVarContainingMoreHTML

当使用（在您的情况下）`res.render('index')`呈现的内容时，`index.jade`将作为局部变量传递给您的布局文件（`layout.jade`）。局部变量可用作**body**。但是，如果我们简单地输出**body**局部变量，它将被*转义*（特殊字符将被编码）。因此，通过使用 !=，body 的内容将不*转义*地输出。

查看：[http ://expressjs.com/guide.html#view-rendering](http://expressjs.com/guide.html#view-rendering)

# ios - 动态调整按钮 iphone

> ID：10075322
> 
> 赞同：0
> 
> 时间：2012-04-09T15:12:07.053
> 
> 标签：ios, layout, button, dynamic

这似乎是一个如此简单的任务，但我无法找到一个好的答案。

我有一个视图，其中最多有 4 个按钮，其中 1 个将占据整个宽度，另外 3 个将放置在单独的行上，并将根据状态显示 3 个中的任意数量。

出现并将完全穿过视图的那个没有问题，但是它下面的 3 个是一个问题。并不是说我不能让它们出现，而是它们中的 3 个可能不会一直显示，所以，这一行可能显示少至 1 个按钮，或多至 3 个按钮，具体取决于可见按钮的数量每个按钮应该占据视图的宽度除以按钮的数量。

现在我知道我可以在添加之前明确计算出每个案例的每个按钮的大小，这会起作用，但这似乎非常愚蠢，有没有办法告诉 iOS 简单地根据有多少动态调整它们的大小？IE 这里有一排按钮将它们适当地分开并将它们并排放置。

我想相信在某个地方存在这种东西，但到目前为止我还没有看到它。任何人都知道除了代码之外的答案吗？我想 IB 会支持基于显示或隐藏元素等调整视图部分的大小，但似乎并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:28:01.930

不在 iOS SDK 上，但这是人们最终会编写的那种控制器。尝试做一个你自己的视图控制器，或者在[github](http://github.com)或[cocoacontrols](http://cocoacontrols.com/)上寻找一个，我相信你会找到类似的东西。

# linux - 将不同 parfor 工作者/线程的 fprintf 和 disp 输出重定向到单独的窗口

> ID：10075323
> 
> 赞同：1
> 
> 时间：2012-04-09T15:12:09.237
> 
> 标签：linux, multithreading, matlab, unix, printf

我有数千行 MATLAB 代码，它们实现了对 fMRI 脑成像数据的不同计算密集型操作。许多操作可以在多个并行线程中运行，但问题是不同线程/工作者的所有`fprintf`输出`disp`都打印在同一个窗口上。

我编写了一个自定义多线程代码，它`unix`在 Linux 环境中使用命令分叉出新的 MATLAB 实例。所以，我首先写出 .m 文件 PreprocessSubj1.m、PreprocessSubj2.m、PreprocessSubj3.m 和 PreprocessSubj4.m，它们中的每一个都包含相同的计算，但针对不同的主题。这 4 个 MATLAB 函数完全相互独立。

```
CellArrayOfFunctions = { 'PreprocessSubj1', 'PreprocessSubj2', ...
'PreprocessSubj3', 'PreprocessSubj4' };

CellArrayOfFunctions_i = 1;

while (CellArrayOfFunctions_i <= size(CellArrayOfFunctions, 2))
    FunctionToBeRun = CellArrayOfFunctions{CellArrayOfFunctions_i};
    unix([ 'matlab -desktop -r ', FunctionToBeRun, ' &' ]);
    CellArrayOfFunctions_i = CellArrayOfFunctions_i + 1;
end 
```

我认为使用`unix`fork MATLAB 线程是相当麻烦的。我想使用`parfor`, 来实现此代码，以获得更好的可维护性和更小的内存使用量。但是有什么办法可以将不同线程/工作者的输出重定向`fprintf`（和`disp`）到单独的窗口？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:23:14.997

您可能想要写入 /dev/pts/#，其中 # 将表示窗口。你可以这样做：

```
output1 = fopen('/dev/pts/0', 'w');
output2 = fopen('/dev/pts/1', 'w');
fwrite(output1, 'Data to window 1');
fwrite(output2, 'Data to window 2'); 
```

您将需要以某种方式确定在 /dev/pts/ 之后放置哪些数字。每次打开新终端时，都会出现一个与该终端对应的新文件，因此您可以检查哪些终端可用`!ls /dev/pts`.

# apache-flex - 扩展 ArrayCollection 会导致远程处理失败

> ID：10075330
> 
> 赞同：0
> 
> 时间：2012-04-09T15:12:45.940
> 
> 标签：apache-flex, flex4, blazeds

我需要在 Flex 中扩展一个 ArrayCollection 来实现这样的[东西](http://blogs.adobe.com/aharui/2008/03/custom_arraycollections_adding.html)。但是当我将它发送到服务器时，似乎序列化失败了。

```
ArgumentError: Error #2004: One of the parameters is invalid.
    at ObjectOutput/writeObject()
    at mx.collections::ArrayList/writeExternal()[E:\dev\4.x\frameworks\projects\framework\src\mx\collections\ArrayList.as:595]
    at mx.collections::ArrayCollection/writeExternal()[E:\dev\4.x\frameworks\projects\framework\src\mx\collections\ArrayCollection.as:159]
    at flash.net::NetConnection/invokeWithArgsArray()
    at flash.net::NetConnection/call()
    at mx.messaging.channels::NetConnectionChannel/internalSend()[E:\dev\4.x\frameworks\projects\rpc\src\mx\messaging\channels\NetConnectionChannel.as:276]
    at mx.messaging.channels::AMFChannel/internalSend()[E:\dev\4.x\frameworks\projects\rpc\src\mx\messaging\channels\AMFChannel.as:364]
    at mx.messaging::Channel/send()[E:\dev\4.x\frameworks\projects\rpc\src\mx\messaging\Channel.as:1013]
    at mx.messaging.channels::PollingChannel/send()[E:\dev\4.x\frameworks\projects\rpc\src\mx\messaging\channels\PollingChannel.as:365]
    at mx.messaging::ChannelSet/send()[E:\dev\4.x\frameworks\projects\rpc\src\mx\messaging\ChannelSet.as:1424]
    at mx.messaging::MessageAgent/internalSend()[E:\dev\4.x\frameworks\projects\rpc\src\mx\messaging\MessageAgent.as:1263]
    at mx.messaging::Producer/internalSend()[E:\dev\4.x\frameworks\projects\rpc\src\mx\messaging\Producer.as:171]
    at mx.messaging::AbstractProducer/send()[E:\dev\4.x\frameworks\projects\rpc\src\mx\messaging\AbstractProducer.as:561]
    at mx.rpc::AsyncRequest/invoke()[E:\dev\4.x\frameworks\projects\rpc\src\mx\rpc\AsyncRequest.as:153]
    at mx.rpc::AbstractInvoker/http://www.adobe.com/2006/flex/mx/internal::invoke()[E:\dev\4.x\frameworks\projects\rpc\src\mx\rpc\AbstractInvoker.as:379]
    at mx.rpc.remoting::Operation/http://www.adobe.com/2006/flex/mx/internal::invoke()[E:\dev\4.x\frameworks\projects\rpc\src\mx\rpc\remoting\Operation.as:287]
    at mx.rpc.remoting::Operation/send()[E:\dev\4.x\frameworks\projects\rpc\src\mx\rpc\remoting\Operation.as:254]
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at mx.rpc::AbstractService/http://www.adobe.com/2006/actionscript/flash/proxy::callProperty()[E:\dev\4.x\frameworks\projects\rpc\src\mx\rpc\AbstractService.as:408] 
```

有没有办法解决这个问题？

详细信息：使用 Flex 4.1、BlazeDS 和 Java

这是扩展类：

```
package 
{
    import mx.collections.ArrayCollection;

    public class NewEntryArrayCollection extends ArrayCollection
    {
        private var newEntry:Object;

        // callback to generate a new entry
        public var factoryFunction:Function;

        // callback to test if an entry is empty and should be deleted
        public var emptyTestFunction:Function;

        public function NewEntryArrayCollection(source:Array=null)
        {
            super(source);
        }

        override public function getItemAt(index:int, prefetch:int=0):Object
        {
            if (index < 0 || index >= length)
                throw new RangeError("invalid index", index);

            if (index < super.length)
                return super.getItemAt(index, prefetch);

            if (!newEntry)
                newEntry=factoryFunction();
            return newEntry;
        }

        override public function get length():int
        {
            return super.length + 1;
        }

        override public function itemUpdated(item:Object, property:Object=null, oldValue:Object=null, newValue:Object=null):void
        {
            super.itemUpdated(item, property, oldValue, newValue);
            if (item != newEntry)
            {
                if (emptyTestFunction != null)
                {
                    if (emptyTestFunction(item))
                    {
                        removeItemAt(getItemIndex(item));
                    }
                }
            }
            else
            {
                if (emptyTestFunction != null)
                {
                    if (!emptyTestFunction(item))
                    {
                        newEntry=null;
                        addItemAt(item, length - 1);
                    }
                }
            }
        }
    }
} 
```

# java - 提要阅读器在 Web 应用程序中的工作

> ID：10075331
> 
> 赞同：1
> 
> 时间：2012-04-09T15:12:46.170
> 
> 标签：java, push-notification, rss, atom-feed

我想知道 RSS/ATOM Feeds 是如何工作的。提要阅读器是否定期连接到网站以获取数据或网站是否将数据发送到提要阅读器。另外，我如何在我的网站中包含提要阅读器。它将如何在服务器端工作任何粗略的想法将不胜感激..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:35:00.173

RSS 是一种 XML 格式。提要阅读器定期连接到 RSS 提要的地址并解析该 XML 文件。我假设您正在考虑使用 AJAX 轮询 RSS 提要并查看是否有任何更新的 Google 阅读器。

已经有许多现有的 Java RSS 框架，包括[Rome](http://rometools.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:35:38.953

检查这个网站 - [http://www.whatisrss.com/](http://www.whatisrss.com/)它解释了你的大部分问题。本网站将向您解释如何在您的网站上放置 rss 提要 - [http://webdesign.about.com/od/rss/a/rss_whats_new.htm](http://webdesign.about.com/od/rss/a/rss_whats_new.htm)。提要阅读器种类繁多，如果您想要一个用于您的网站的阅读器，那将取决于您最熟悉的技术。然后，您可以在这项技术中寻找一种或尝试自己编写代码。示例[-](http://www.zazar.net/developers/jquery/zrssfeed/) [http://www.labnol.org/internet/tools/embed-rss-feeds-add-html-websites-javascript/2515/，http://www.zazar.net/developers/jquery/zrssfeed/](http://www.labnol.org/internet/tools/embed-rss-feeds-add-html-websites-javascript/2515/) _

希望能帮助到你。

# iphone - 目标 C - 如何连接到时间服务器

> ID：10075339
> 
> 赞同：0
> 
> 时间：2012-04-09T15:13:21.093
> 
> 标签：iphone, objective-c, ios, iphone-sdk-3.0

我是我的 iPhone 应用程序，我正在尝试连接到时间服务器 (RFC 868) 以同步我的时钟。我尝试搜索这样做的方向，但只遇到了连接到 HTTP 服务器的示例/教程。

有谁知道我如何在特定端口（端口 37）连接到时间服务器以及如何获取响应？

高度赞赏这个方向的任何指针/建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:19:03.390

也许您可以调整来自[该客户端](http://www.prismmodelchecker.org/qprover/casestudies/ntpclient_probity/ntpclient/ntpclient.c)的代码。

# java - Java 中的点对点实时流式传输？

> ID：10075340
> 
> 赞同：2
> 
> 时间：2012-04-09T15:13:23.003
> 
> 标签：java, video, web, video-streaming, p2p

我想知道他们是否是在 Java 中进行网络摄像头点对点的某种方式。也许某种库可以创建服务器并将两个网络摄像头流式传输到连接时的服务器？也许你可以给我一些可以做到这一点的图书馆的链接..（有点像 Skype）。

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:37:55.413

查看[Red5](http://www.red5.org/)或[Java Media Framework](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html)。我认为其中任何一个都可以为您指明正确的方向。

# javascript - jQuery-validate 打破 jEditable

> ID：10075343
> 
> 赞同：0
> 
> 时间：2012-04-09T15:13:28.570
> 
> 标签：javascript, jquery, jquery-validate, jeditable

伙计们，我在由 jQuery-validate 处理的表单中有一个表格，在表格中我有几列需要在单击时进行编辑（然后更新隐藏的输入）。由于某种原因，只要验证代码在页面上，那么只要编辑字段，页面就会提交（非 ajax 版本）。删除验证码让可编辑功能正常工作..

这是我的表格：

```
<form name="newCountForm" id="newCountForm" action="" method="post" class="inputForm" onsubmit="return false;">
    <fieldset>
        <legend></legend>
        <div>
        <table id="newCountsTable" border="1" cellpadding="1" cellspacing="1" class="contentBox tablesorter">
            <thead>

            <tr class="title1">
                    <td colspan="11">Counts</td>
            </tr>
            <tr class="title2">
                    <th>SKU</th>
                    <th>OZ</th>
                    <th>Description</th>
                    <th colspan="2">Front</th>
                    <th colspan="2">Back</th>
                    <th>Damages</th>
                    <th colspan="2">Total</th>
            </tr>
            <tr class="title2">
                    <th colspan="3">&nbsp;</th>
                    <th>Cases</th>
                    <th>Units</th>
                    <th>Cases</th>
                    <th>Units</th>
                    <th>Units</th>
                    <th>Cases</th>
                    <th>Units</th>
            </tr>
            </thead>
            <tbody>

            <tr id="newCount_ML05_row" class="row1">
                    <th>ML05</th>
                    <th>6 oz</th>
                    <th>1% MILK GALLON</th>
                    <th><span id="editme_cases_front_ML05" class="editHolder_cases">0</span><input type="hidden" name="cases[front][ML05]" id="cases_front_ML05" class="cases" value="0" /></th>
                    <th><span id="editme_units_front_ML05" class="editHolder_units">0</span><input type="hidden" name="units[front][ML05]" id="units_front_ML05" class="units" value="0" /></th>
                    <th><input type="text" name="cases[back][ML05]" id="cases_back_ML05" class="cases" size="5" maxlength="4" value="0" /></th>
                    <th><input type="text" name="units[back][ML05]" id="units_back_ML05" class="units" size="5" maxlength="4" value="0" /></th>
                    <th><input type="text" name="units[damages][ML05]" id="units_damages_ML05" class="units" size="5" maxlength="4" value="0" /></th>
                    <th class="right"><span id="cases_total_ML05">0</span></th>
                    <th class="right"><span id="units_total_ML05">0</span></th>
            </tr>
            <tr id="newCount_ML05_row" class="row2">
                    <th>ML05</th>
                    <th>6 OZ</th>
                    <th>1% MILK GALLON</th>
                    <th><span id="editme_cases_front_ML05" class="editHolder_cases">0</span><input type="hidden" name="cases[front][ML05]" id="cases_front_ML05" class="cases" value="0" /></th>
                    <th><span id="editme_units_front_ML05" class="editHolder_units">0</span><input type="hidden" name="units[front][ML05]" id="units_front_ML05" class="units" value="0" /></th>
                    <th><input type="text" name="cases[back][ML05]" id="cases_back_ML05" class="cases" size="5" maxlength="4" value="0" /></th>
                    <th><input type="text" name="units[back][ML05]" id="units_back_ML05" class="units" size="5" maxlength="4" value="0" /></th>
                    <th><input type="text" name="units[damages][ML05]" id="units_damages_ML05" class="units" size="5" maxlength="4" value="0" /></th>
                    <th class="right"><span id="cases_total_ML05">0</span></th>
                    <th class="right"><span id="units_total_ML05">0</span></th>
            </tr>
            </tbody>
        </table></div>
        <div><label for="count_date">Count Date </label> <input type="text" name="count_date" id="count_date" size="20" value="04/09/2012" class="required" /></div>
    <div class="center"><input type="submit" class="button" value="Enter the Counts" /></div>
    </fieldset>
</form> 
```

这是jQuery：

```
$('#countsTable').tablesorter({ headers: { 7: { sorter: false } } });
$('#newCountsTable').tablesorter();
$('#count_date').datepicker({
    showButtonPanel: true
});             
function sumValues() {
    var sum = 0;
    .each(function () { sum += parseFloat(this.value) });
    return sum;
}
var v = jQuery("#newCountForm").validate({
    errorElement: "div",
    errorClass: "validation-advice",
    submitHandler: function(form) {         
        $('#newCountResponse').html('<img src="themes/default/icons/indicator.gif" alt="spinner" />');
        jQuery.get('ajax.php?action=createCount&reprinttable=1&showButtons=1', $('#newCountForm').serialize(), function(data) {

            // Clear the default row
            $('#countsTableDefaultRow').remove();
            // Update the table with the new row
            $('#countsTable > tbody:last').append(data);
            $('#countsTableUpdateNotice').html('<div class="updateNotice">A new row has been added to this table, inline editing for this new row will be disabled until the next page refresh.</div>');
            // Show a success message
            $('#newCountResponse').html(returnSuccessMessage('count'));
        });
    }
});

$('*[id^=newCount_]').each(function () {
    var $row = $(this), 
    sku  = this.id.replace(/newCount_(.*?)_row/, '$1');

    $.each(['cases', 'units'], function (i, type) {
        $row.on('change', '.' + type, function () {
            $('#' + type + '_total_' + sku).text( sumValues($row.find('.' + type)) );
        });
    });
    $.each(['editHolder_cases', 'editHolder_units'], function (i, type) {                 
        realType = type.replace(/editHolder_/, '');
        $("#editme_" + realType + "_front_" + sku).editable(function(value, settings) {
            $("#" + realType + "_front_" + sku).val( value );  
            $('#' + realType + '_total_' + sku).text( sumValues($row.find('.' + realType)) );
            alert("#" + realType + "_front_" + sku + " - " + value);
            return(value);
        }, {
            cancel    : 'Cancel',
            submit    : 'OK',
            tooltip   : 'Click to edit...'
        });
    });
}); 
```

编辑和提交时，我在萤火虫“验证器未定义”中得到这个，任何想法是什么导致这些错误？

# c++ - 使用函数指针自动填充 std::map

> ID：10075348
> 
> 赞同：3
> 
> 时间：2012-04-09T15:13:38.213
> 
> 标签：c++, stl

我正在用 C++ 开发一种脚本语言，它使用解释器中“内置”的函数。我正在使用以下构造将函数名称映射到它们各自的指针：

```
typedef void(*BuiltInFunction)(Context*);
typedef std::unordered_map<std::string, BuiltInFunction> BuiltinFunctionsMap; 
```

`Context`自定义类在哪里。

然后我有这样的函数声明：

```
namespace BuiltIns {
    void _f_print(Context* context);
    void _f_error(Context* context);
    void _f_readline(Context* context);
    void _f_read(Context* context);
    void _f_readchar(Context* context);
    void _f_eof(Context* context);
    ...
} 
```

最后是一个用实际指针填充地图的例程：

```
BuiltinFunctionsMap BuiltIns::populateFunctions() {
    BuiltinFunctionsMap funcMap;
    // Standard I/0
    funcMap["print"] = &BuiltIns::_f_print;
    funcMap["error"] = &BuiltIns::_f_error;
    funcMap["readline"] = &BuiltIns::_f_readline;
    funcMap["read"] = &BuiltIns::_f_read;
    funcMap["readchar"] = &BuiltIns::_f_readchar;
    funcMap["eof"] = &BuiltIns::_f_eof;
    ...
    return funcMap;
} 
```

我要问的是是否有一种方法可以使用模板或类似的东西从函数声明中自动生成填充函数。目前，我正在使用正则表达式，这很简单，但是每当我添加新函数时我都必须这样做，而且很麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:36:03.527

您可以使用模板元编程自动检测*某些*类型的函数——例如，给定类型 T，您可以以编程方式回答问题“T 有`operator+`吗？”。但在一般情况下，您无法使用该语言自动执行上述操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:15:27.653

我不知道这是否真的是一个有用的答案，但你可以使用预处理器做一些[非常松鼠的事情](http://drdobbs.com/cpp/184401387)：

```
#include <iostream>
#include <map>
#include <string>

class Context {}; 
typedef void (*BuiltInFunction)(Context*);

// a list of your function names
#define FN_NAMES \
X(foo)  \
X(bar)  \
X(baz)

// this declares your functions (you also have to define them 
// somewhere else, e.g. below or in another file)
#define X(a) void _f_ ## a ## _print(Context *context);
namespace BuiltIns {
  FN_NAMES
}
#undef X

// a global map initialized (using C++11's initializer syntax)
// to strings mapped to functions
#define X(a) {#a, &BuiltIns::_f_ ## a ## _print},
std::map<std::string, BuiltInFunction> g_fns = { 
  FN_NAMES
};
#undef X

int main() {
  g_fns["foo"](NULL);  // calls BuiltIns::_f_foo_print(NULL) 
}

// (these have to be defined somewhere)
namespace BuiltIns {
  void _f_foo_print(Context *context) {
    std::cout << "foo\n";
  }
  void _f_bar_print(Context *context) {
    std::cout << "bar\n";
  }
  void _f_baz_print(Context *context) {
    std::cout << "baz\n";
  }
} 
```

这种方法具有自动生成例如字符串`"foo"`并将其绑定到`_f_foo_print`函数的好处。`foo`缺点是可怕的预处理器诡计以及您仍然必须在两个地方处理的事实。

# jquery - 将焦点放在模糊事件验证失败的同一控件上，JQuery

> ID：10075349
> 
> 赞同：0
> 
> 时间：2012-04-09T15:13:39.470
> 
> 标签：jquery, validation

我有一个使用 jQuery 创建的动态控件的表单。我已经使用 jQuery 对控件应用了验证。我正在验证模糊事件的控件。这里的问题是我需要将焦点设置在同一控件上，其中验证在模糊事件上失败。

我做了这样的事情：

```
$(propVal1).blur(function () {
    if(!ValidateNumber(this, propName1)) {
        alert('Value should be numeric in ' + propName1);
        setTimeout(function() {$(this).focus();}, 1);
    }
}); 
```

其中 propVal1 表示动态创建的输入控件，propName1 是属性的字符串名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:14:32.243

发生这种情况的原因是您的输入控件是窗口中的唯一控件，因此在它失去焦点后，整个窗口都会失去焦点，并且您无法将输入聚焦在没有焦点的窗口中。

这是我为确认这一点而制作的测试 html：

```
<form>
    <input id="my_input" type="text" />
    <input id="my_input2" type="text" />
</form>

<script type="text/javascript">
    $("#my_input").blur( function () { alert('bad input'); setTimeout( function() { $(window).focus(); $("#my_input").focus() }, 1 ); return false }  );
</script> 
```

如果您注释掉第二个输入，代码将不起作用！

一种可能的解决方案是在您的输入之后有一个不可见的输入，以便在第一个模糊时捕捉焦点。

# php - Mysql查询语法

> ID：10075354
> 
> 赞同：1
> 
> 时间：2012-04-09T15:14:20.870
> 
> 标签：php, mysql

我的查询有点问题。我需要选择任何可能的组合...我正在尝试通过查询在 db 中搜索

```
"SELECT * FROM `events` WHERE
                            `start_time` >= '{$current_time}' AND
                            `start_time` >=  '{$limit_from}' AND
                            `end_time` <= '{$limit_to}' AND
                            `filter_large` = '{$filter_large}'" 
```

它给了我 3 个结果和第二个

```
"SELECT * FROM `events` WHERE
                            `start_time` >= '{$current_time}' AND
                            `start_time` >=  '{$limit_from}' AND
                            `end_time` <= '{$limit_to}' AND
                            `filter_education` = '{$filter_education}'" 
```

给了我 4 个结果，但我想像这样一起查询它们..

```
"SELECT * FROM `events` WHERE
                          (
                            `start_time` >= '{$current_time}' AND
                            `start_time` >=  '{$limit_from}' AND
                            `end_time` <= '{$limit_to}' AND
                            `filter_education` = '{$filter_education}'
                          ) OR (
                            `start_time` >= '{$current_time}' AND
                            `start_time` >=  '{$limit_from}' AND
                            `end_time` <= '{$limit_to}' AND
                            `filter_large` = '{$filter_large}'
                          ) 
```

它只给我 4 个结果而不是 7 个。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:17:47.550

尝试使用[`UNION`运算符](http://dev.mysql.com/doc/refman/5.0/en/union.html)：

```
SELECT * FROM `events` WHERE
(
    `start_time` >= '{$current_time}' AND
    `start_time` >=  '{$limit_from}' AND
    `end_time` <= '{$limit_to}' AND
    `filter_education` = '{$filter_education}'
)

UNION

SELECT * FROM `events` WHERE
(
    `start_time` >= '{$current_time}' AND
    `start_time` >=  '{$limit_from}' AND
    `end_time` <= '{$limit_to}' AND
    `filter_large` = '{$filter_large}'
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:19:02.580

> 给了我 3 个结果
> 
> 第二个给了我 4 个结果
> 
> 想同时查询他们两个
> 
> 它只给我 4 个结果而不是 7 个

这可能是因为这两个查询共享三个记录。唯一的区别是您的最后一个条件，因此您可以将它们组合起来，而其他条件保持不变：

```
SELECT * 
FROM `events` 
WHERE `start_time` >= '{$current_time}' 
AND `start_time` >=  '{$limit_from}' 
AND `end_time` <= '{$limit_to}' 
AND (`filter_large` = '{$filter_large}' OR `filter_education` = '{$filter_education}') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:20:34.193

[UNION](http://dev.mysql.com/doc/refman/5.0/en/union.html)用于将多个 SELECT 语句的结果组合成一个结果集。

希望这有帮助：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:17:51.477

我想你想要一个 UNION：

```
"SELECT * FROM `events` WHERE
`start_time` >= '{$current_time}' AND
`start_time` >=  '{$limit_from}' AND
`end_time` <= '{$limit_to}' AND
`filter_large` = '{$filter_large}'
UNION
SELECT * FROM `events` WHERE
`start_time` >= '{$current_time}' AND
`start_time` >=  '{$limit_from}' AND
`end_time` <= '{$limit_to}' AND
`filter_education` = '{$filter_education}'" 
```

# python - 如何在python中找出两个具有相同结构的列表？

> ID：10075355
> 
> 赞同：5
> 
> 时间：2012-04-09T15:14:22.580
> 
> 标签：python, list, recursion

定义一个过程，same_structure，它接受两个输入。`True`如果列表具有相同的结构，它应该输出 ，`False` 否则。如果满足以下条件，两个值 p 和 q 具有相同的结构：

```
Neither p or q is a list.

Both p and q are lists, they have the same number of elements, and each
element of p has the same structure as the corresponding element of q. 
```

编辑：为了使图片清晰，以下是预期的输出

```
same_structure([1, 0, 1], [2, 1, 2])
    ---> True
same_structure([1, [0], 1], [2, 5, 3])
    ---> False
same_structure([1, [2, [3, [4, 5]]]], ['a', ['b', ['c', ['d', 'e']]]])
    ---> True
same_structure([1, [2, [3, [4, 5]]]], ['a', ['b', ['c', ['de']]]])
    ---> False 
```

我认为递归最好是在 python 中解决这个问题我想出了以下代码，但它不起作用。

```
def is_list(p):
    return isinstance(p, list)

 def same_structure(a,b):
    if not is_list(a) and not is_list(b):
        return True
    elif is_list(a) and is_list(b):
        if len(a) == len(b):
            same_structure(a[1:],b[1:])
    else:
        return False 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T15:43:03.050

而不是，您需要*一个一个*`same_structure(a[1:],b[1:])`地检查 a 和 b 的项目对

 *```
def is_list(p):
    return isinstance(p, list)

def same_structure(a, b):
    if not is_list(a) and not is_list(b):
        return True
    elif (is_list(a) and is_list(b)) and (len(a) == len(b)):
        return all(map(same_structure, a, b)) # Here
    return False 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T15:24:12.077

您错过了一个案例，而忘记了在第二个案例中返回。请注意，没有必要显式比较列表的长度，因为第一种情况会处理这一点 - 如果一个列表为空而另一个不是，这是因为一个列表的元素比另一个列表少：

```
def same_structure(a, b):
    if a == [] or b == []:  # one of the lists is empty
        return a == b       # are both of the lists empty?
    elif is_list(a[0]) != is_list(b[0]):
        return False        # one of the elements is a list and the other is not
    elif not is_list(a[0]): # neither element is a list
        return same_structure(a[1:], b[1:])
    else:                   # both elements are lists
        return same_structure(a[0], b[0]) and same_structure(a[1:], b[1:]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T15:22:53.590

递归*将*是一个好主意，但不是您建议的方式。首先（这可能只是一个错字），你实际上并没有在这里返回任何东西：

```
if len(a) == len(b):
    same_structure(a[1:],b[1:]) 
```

其次，您应该递归处理每个元素，而不是每个子列表。IE。：

```
if len(a) == len(b):
    for i in range(len(a)):
        if not same_structure(a[i], b[i]):
            return False
    return True
else:
    return False 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T15:46:09.120

由于规范说输入是两个列表，因此您可以在函数内迭代列表而无需进一步检查，并且仅在遇到子列表时才进行递归调用：

```
def same_structure(a, b):
    if len(a) != len(b):
        return False
    return all(is_list(x) and is_list(y) and same_structure(x, y) or
               not is_list(x) and not is_list(y)
               for x, y in zip(a, b)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T14:56:38.737

您也可以尝试这种方式，检查两个列表的类型和两个列表的长度，并递归地对两个列表的子列表执行此操作。

```
def same_structure(a,b):
    return isinstance(a, list) and isinstance(b, list) and len(a) == len(b)  
    and all(same_structure_as(c, d) for c, d in zip(a, b) if isinstance(c, list)) 
```*

# linux - Unix 中的包装函数参数有什么限制吗？

> ID：10075356
> 
> 赞同：3
> 
> 时间：2012-04-09T15:14:25.473
> 
> 标签：linux, arguments, wrapper

更新澄清：

Wrapper 函数定义为在用户模式下调用的函数，它发起对系统调用的调用（在内核模式下）。例如 open 或 printf。

我想知道包装函数可以获得的参数数量是否有任何限制？

我的直觉是，由于寄存器的数量，它应该是六个，但我不确定。我知道系统调用仅限于六个参数。（我说的是存在更多寄存器的 32 位和 64 位）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:37:32.327

> Wrapper 函数定义为在用户模式下调用的函数，它发起对系统调用的调用（在内核模式下）。例如 open 或 printf。

根据*您自己的*定义，他们可以接收的参数数量**没有限制**。`printf`应该马上告诉你的。（但请注意，这`open`本身就是一个系统调用，并且对参数的数量有限制）

但是当涉及到**系统调用**等`open`时，`write`Linux-x86**有 6 个参数的限制**。[阅读此处了解](http://www.cin.ufpe.br/~if817/arquivos/asmtut/index.html#syscalls)为什么以及如何发生这种情况。

这是另一篇关于此的深入探讨的 SO 帖子

[x86-64 上 UNIX 和 Linux 系统调用的调用约定是什么](https://stackoverflow.com/questions/2535989/what-are-the-calling-conventions-for-unix-linux-system-calls-on-x86-64)

# modalviewcontroller - 通过点击外部关闭模态视图

> ID：10075357
> 
> 赞同：2
> 
> 时间：2012-04-09T15:14:28.050
> 
> 标签：modalviewcontroller

我将视图呈现为 UIModalTransitionStyleFlipHorizo​​ntal 并希望识别在此模式视图之外点击以将其关闭。一个例子是 iPad 上的 iTunes 应用程序，例如用于查看专辑中的歌曲。

# windows - 何时登录 Windows 事件日志？

> ID：10075358
> 
> 赞同：6
> 
> 时间：2012-04-09T15:14:35.267
> 
> 标签：windows, logging, event-log

到目前为止，我所有的应用程序都只记录到文件中。它对我来说很好用，我从来没有遇到过任何问题。

我的一个朋友建议我也可以使用 Windows 事件日志，但我不确定。我一直认为事件日志仅用于一些非常重要的消息，如果可以避免，我不应该写入它。

我什么时候可以/应该写入窗口事件日志？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T22:35:49.273

在我看来，是否记录到 Windows 事件日志的决定取决于您的应用程序以及运行您的软件的人员。

记录到事件日志绝对没有缺点，任何使用日志监控解决方案的人都会感谢您的努力。

一般来说，您绝对应该避免将“调试”类型的消息记录到事件日志中，或者在短时间内产生大量消息的任何内容。但是，对管理您的软件的人有用的任何信息都可以（并且应该）记录到事件日志中。

STATUS_ACCESS_DENI 还提到了本地化，这是相对于传统日志记录的重要优势。

您将记录以下内容：

*   需要干预的错误和警告
*   重要状态报告（软件启动、停止、自身更新等）

您可能需要查看这篇博客文章，该文章概述了如何创建自己的消息 dll，这是登录到 Windows 事件日志时的首选方式：

[http://www.eventlogblog.com/blog/2010/11/creating-your-very-own-event-m.html](http://www.eventlogblog.com/blog/2010/11/creating-your-very-own-event-m.html)

可能要记住的一件事是设计您的日志记录，以便它不会在短时间内用重复事件污染事件日志。例如，Microsoft SQL Server 在某些情况下会在几秒钟内真正记录数千个相同的事件。这对于系统管理员来说可能是令人沮丧的。大多数日志监控解决方案都可以解决这个问题，但这仍然很烦人。

底线：是的，您应该考虑记录到事件日志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T15:25:29.160

首先，除了三个默认值（系统、应用程序、安全性）之外，您还可以注册自己的事件日志，从而将您的消息与其他消息分开。这是经常被忽视的可能性之一。

一般来说，我*总是*建议在你的二进制文件和事件日志工具中使用消息表，而不是任何自制方法。原因很简单：

1.  如果需要，您可以轻松登录到远程机器（或本地机器）
2.  您可以从远程机器读取事件日志（例如，管理员可以在任何客户端机器上列出其域内的事件日志）
3.  消息表节省空间
4.  消息表允许轻松本地化

# java - 在 android 中接收彩信并在我的应用程序中显示为 ListView

> ID：10075362
> 
> 赞同：1
> 
> 时间：2012-04-09T15:15:01.200
> 
> 标签：java, android, listview, mms

我正在开发一个应该从特定号码接收彩信的应用程序。我找到了这段代码，但它什么也没给我，只是你好世界 TextView

任何帮助都将适用

```
 package com.wzx.andapp.shh;

    import java.io.BufferedReader;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.text.MessageFormat;
    import android.app.Activity;
    import android.content.ContentResolver;
    import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.graphics.Bitmap;
    import android.graphics.BitmapFactory;
    import android.net.Uri;
    import android.os.Bundle;
    import android.telephony.SmsMessage;
    import android.view.LayoutInflater;
    import android.view.View;
    import android.view.ViewGroup;
    import android.widget.ImageView;
    import android.widget.ListView;
    import android.widget.TextView;

    public class MmsReaderActivity extends Activity {
    private final Uri CONTENT_URI_PART = Uri.parse("content://mms/part"); // ²ÊÐÅ¸½¼þ±í

    private static final String MSG_ID_STR = "mid=%1$s";

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            long msg_id = this.getIntent().getLongExtra("msg_id", 0);
            // final LayoutInflater inflater = LayoutInflater.from(this);
            // final ViewGroup v = (ViewGroup) inflater.inflate(
            // R.layout.mms_item_detail, null);
            setContentView(R.layout.mms_item_detail);

            ViewGroup listview = (ViewGroup) findViewById(R.id.mmsdetaillist);
            // Uri uri = Uri.parse("content://mms/");
            // String selection = "_id = " + msg_id;
            // Cursor mcursor = getContentResolver().query(uri, null, selection,
            // null,
            // null);

            Cursor cursor = getContentResolver().query(CONTENT_URI_PART, null,
                            String.format(MSG_ID_STR, msg_id), null, null);

            if (cursor.moveToFirst()) {
                    do {
                            String partId = cursor.getString(cursor.getColumnIndex("_id"));
                            String type = cursor.getString(cursor.getColumnIndex("ct"));
                            if ("text/plain".equals(type)) {
                                    String data = cursor.getString(cursor
                                                    .getColumnIndex("_data"));
                                    String body;
                                    if (data != null) {
                                            // implementation of this method below
                                            body = getMmsText(partId);
                                    } else {
                                            body = cursor.getString(cursor.getColumnIndex("text"));
                                    }
                                    TextView t = new TextView(this);
                                    t.setText(body);
                                    listview.addView(t);
                            } else if ("image/jpeg".equals(type)
                                            || "image/bmp".equals(type) || "image/gif".equals(type)
                                            || "image/jpg".equals(type) || "image/png".equals(type)) {
                                    Bitmap bitmap = getMmsImage(partId);
                                    ImageView iv = new ImageView(this);
                                    iv.setImageBitmap(bitmap);
                                    listview.addView(iv);
                            }
                    } while (cursor.moveToNext());
            }
            cursor.close();

      }

       public void getAllMms() {
            Uri uri = Uri.parse("content://mms/");
            String selection = null;// "_id = " + mmsId;
            Cursor cursor = getContentResolver().query(uri, null, selection, null,
                            null);
            String[] temp = cursor.getColumnNames();
            for (int i = 0; i < temp.length; i++)
                    System.out.println(i + ":" + temp[i]);
            cursor.close();
    }

    /**
     * 
     */
    // _id is the ID of the message. Captain obvious to the rescue? Not really.
    // This ID can be used to retrieve detailed information using either
    // content://sms or content://mms.
    // date no explanation needed.
    // thread_id is the ID of the conversation
    // body The content of the last SMS on this conversation.
    // If it's an MMS, even if it has a text part, this will be null.

    public void getSmsMms() {
            // usually, when you call query and want to return all columns you can
            // pass null as the projection parameter. However, you can not do that
            // with this provider, so that's why I'm using *
            ContentResolver contentResolver = getContentResolver();
            final String[] projection = new String[] { "*" };
            Uri uri = Uri.parse("content://mms-sms/conversations/");
            Cursor cursor = contentResolver
                            .query(uri, projection, null, null, null);
            String[] temp = cursor.getColumnNames();
            for (int i = 0; i < temp.length; i++)
                    System.out.println(i + ":" + temp);

    }

    public void getMms(String mmsId) {
            Uri uri = Uri.parse("content://mms/");
            String selection = "_id = " + mmsId;
            Cursor cursor = getContentResolver().query(uri, null, selection, null,
                            null);
    }

    public void getAllText(String mmsId) {
            String selectionPart = "mid=" + mmsId;
            Uri uri = Uri.parse("content://mms/part");
            Cursor cursor = getContentResolver().query(uri, null, selectionPart,
                            null, null);
            if (cursor.moveToFirst()) {
                    do {
                            String partId = cursor.getString(cursor.getColumnIndex("_id"));
                            String type = cursor.getString(cursor.getColumnIndex("ct"));
                            if ("text/plain".equals(type)) {
                                    String data = cursor.getString(cursor
                                                    .getColumnIndex("_data"));
                                    String body;
                                    if (data != null) {
                                            // implementation of this method below
                                            body = getMmsText(partId);
                                    } else {
                                            body = cursor.getString(cursor.getColumnIndex("text"));
                                    }
                            }
                    } while (cursor.moveToNext());
            }

    }

    public String getMmsText(String id) {
            Uri partURI = Uri.parse("content://mms/part/" + id);
            InputStream is = null;
            StringBuilder sb = new StringBuilder();
            try {
                    is = getContentResolver().openInputStream(partURI);
                    if (is != null) {
                            InputStreamReader isr = new InputStreamReader(is, "UTF-8");
                            BufferedReader reader = new BufferedReader(isr);
                            String temp = reader.readLine();
                            while (temp != null) {
                                    sb.append(temp);
                                    temp = reader.readLine();
                            }
                    }
            } catch (IOException e) {
            } finally {
                    if (is != null) {
                            try {
                                    is.close();
                            } catch (IOException e) {
                            }
                    }
            }
            return sb.toString();
    }

    public void getAllImg(String mmsId) {
            String selectionPart = "mid=" + mmsId;
            Uri uri = Uri.parse("content://mms/part");
            Cursor cPart = getContentResolver().query(uri, null, selectionPart,
                            null, null);
            if (cPart.moveToFirst()) {
                    do {
                            String partId = cPart.getString(cPart.getColumnIndex("_id"));
                            String type = cPart.getString(cPart.getColumnIndex("ct"));
                            if ("image/jpeg".equals(type) || "image/bmp".equals(type)
                                            || "image/gif".equals(type) || "image/jpg".equals(type)
                                            || "image/png".equals(type)) {
                                    Bitmap bitmap = getMmsImage(partId);
                            }
                    } while (cPart.moveToNext());
            }

    }

    public Bitmap getMmsImage(String _id) {
            Uri partURI = Uri.parse("content://mms/part/" + _id);
            InputStream is = null;
            Bitmap bitmap = null;
            try {
                    is = getContentResolver().openInputStream(partURI);
                    bitmap = BitmapFactory.decodeStream(is);
            } catch (IOException e) {
            } finally {
                    if (is != null) {
                            try {
                                    is.close();
                            } catch (IOException e) {
                            }
                    }
            }
            return bitmap;
    }

    public String getAddressNumber(int id) {
            String selectionAdd = new String("msg_id=" + id);
            String uriStr = MessageFormat.format("content://mms/{0}/addr", id);
            Uri uriAddress = Uri.parse(uriStr);
            Cursor cAdd = getContentResolver().query(uriAddress, null,
                            selectionAdd, null, null);
            String name = null;
            if (cAdd.moveToFirst()) {
                    do {
                            String number = cAdd.getString(cAdd.getColumnIndex("address"));
                            if (number != null) {
                                    try {
                                            Long.parseLong(number.replace("-", ""));
                                            name = number;
                                    } catch (NumberFormatException nfe) {
                                            if (name == null) {
                                                    name = number;
                                            }
                                    }
                            }
                    } while (cAdd.moveToNext());
            }
            if (cAdd != null) {
                    cAdd.close();
            }
            return name;
    }

    /**
     * Mark a single SMS/MMS message as being read or not.
     * 
     * @param context
     *            - The current context of this Activity.
     * @param messageID
     *            - The Message ID that we want to alter.
     * 
     * @return boolean - Returns true if the message was updated successfully.
     */
    public static boolean setMessageRead(Context context, long messageID,
                    boolean isViewed) {
            try {
                    if (messageID == 0) {
                            return false;
                    }
                    ContentValues contentValues = new ContentValues();
                    if (isViewed) {
                            contentValues.put("READ", 1);
                    } else {
                            contentValues.put("READ", 0);
                    }
                    String selection = null;
                    String[] selectionArgs = null;
                    context.getContentResolver().update(
                                    Uri.parse("content://mms/" + messageID), contentValues,
                                    selection, selectionArgs);
                    return true;
            } catch (Exception ex) {
                    return false;
            }
    }

   } 
```

提前致谢。我真的需要帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T09:59:14.717

尝试更改以下行： Cursor cursor = getContentResolver().query(CONTENT_URI_PART, null, String.format(MSG_ID_STR, msg_id), null, null);

至：

光标 cursor = getContentResolver().query(uri, null, null, null, null);

# php - 私有 REST API

> ID：10075365
> 
> 赞同：3
> 
> 时间：2012-04-09T15:15:15.060
> 
> 标签：php, api, rest

我们有 REST API，我们只希望我们的域可以访问并且不发送欺骗请求。为此，我唯一想到的就是检查 referer `$_SERVER['HTTP_REFERER']`。但是[文档说](http://php.net/manual/en/reserved.variables.server.php)：

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。**不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。**

假设我们的主要 API 请求/门文件是：

```
www.example.com/api/gate.php 
```

我如何使其安全，以便只提供来自自己域的请求而忽略所有其他请求。我已经阅读了一些关于 http 身份验证和设置私钥或秘密的内容，但我正在寻找一种简单的方法，这样只有我们自己的域才能向该文件发送请求。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:42:33.257

如前所述，`HTTP_REFERRER`并且`REMOTE_ADDR`可能被欺骗，因此不能被信任来实现所述功能。还要记住，在共享主机上下文中，同一服务器中的其他帐户也具有相同的 IP。

一个快速的解决方案可能是使用[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)来验证对 API 的请求。这不会按 IP 或引用 URL/IP 过滤，但会确保请求来自受信任的来源。

在 Apache 环境中，设置基本身份验证就像创建`.htaccess`和`.htpasswd`文件一样简单，并将它们放在 API 的根目录中。

您可以使用以下生成器创建这两个文件：
[.htaccess generator](http://www.htaccesstools.com/htaccess-authentication/)
[.htpasswd generator](http://www.htaccesstools.com/htpasswd-generator/)

设置基本身份验证后，在 PHP 中验证您的请求就像通过以下方式访问您的 API 一样简单：

`username:password@example.com`

因此，无需开发额外的代码来设置任何标头来验证您的请求。任何访问该 URL 的人都会被提示输入凭据，如果身份验证失败则拒绝访问。

![在此处输入图像描述](../Images/648872c53bfba1f38ad64f12119ab124.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:20:30.473

我相信`HTTP_REFERRER`and`REMOTE_ADDR`只是在请求标头中发送，这意味着它们可以被欺骗。如果您的网站在 Internet 上，并且您想限制对其的访问，那么这不是这样做的方法。必须使用凭据进行完全身份验证。

如果您不想设置身份验证或密钥，则可以将其托管在公司 LAN 上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T18:14:46.597

public_html/api 子文件夹中允许访问本地主机的简单 .htaccess 不会起到作用吗？

```
order deny,allow
deny from all
allow from 127.0.0.1 
```

或者，如果您只访问 gate.php 文件并且需要文件夹中的其他文件可以访问，您可以只针对一个文件

```
<files "gate.php">
    order deny,allow
    deny from all
    allow from 127.0.0.1
</files> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:17:50.880

还有 $_SERVER['REMOTE_ADDR'] 不太可能被欺骗。

[信任 $_SERVER['REMOTE_ADDR'] 是否安全？](https://stackoverflow.com/questions/4773969/is-it-safe-to-trust-serverremote-addr)

# c++ - tbb 中的 parallel_invoke 相同的方法

> ID：10075368
> 
> 赞同：2
> 
> 时间：2012-04-09T15:15:37.720
> 
> 标签：c++, multithreading, parallel-processing, tbb

我可以使用 parallel_invoke 多次执行相同的功能吗

就像我有遍历字符串的函数扫描一样，我可以让相同的多个任务对其进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:18:38.037

是的你可以。

或者，您可以使用 task_group：

```
tbb::task_group g;
g.run(foo);
g.run(foo);

g.wait(); 
```

如果您想像拥有 CPU 内核一样频繁地运行它，您可以这样做：

```
tbb::task_group g;

for(auto i = 0; i != tbb::tbb_thread::hardware_concurrency(); ++i) {
    g.run(foo);
}

g.wait(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:18:54.950

是的，没有什么能阻止您，但您有责任确定这些操作是否会导致竞争条件或并发问题，从而破坏您的程序。

# selenium-ide - 如何测试网页上显示的数据与使用 selenium ide 的数据馈送（microsoft excel sheet）相同

> ID：10075370
> 
> 赞同：0
> 
> 时间：2012-04-09T15:15:47.593
> 
> 标签：selenium-ide

我想测试一个网站，该网站以称为数据馈送的表格格式显示来自 microsoft excel 表的所有数据。任何人都可以帮助我找到一种解决方案，使用 selenium ide 使用数据馈送中的某些唯一列来测试网页上显示的数据是否与数据馈送中的数据相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:46:45.960

我已经使用 Selenium IDE 的 DataDriven 插件完成了这项工作。(http://wiki.openqa.org/display/SEL/datadriven) 此插件还需要 Flow Control 插件（也称为 Sideflow）和 Include 插件（Selenium IDE 有单独的版本，注意获取正确版本）。

您需要做的一件事是将 excel 数据导出为插件所需的 xml 格式。我使用以下 Excel 宏来完成它：

```
 Sub MakeDataFile()

    Dim FileNo As Integer
    Dim CurrentLine As String
    Dim Filename As String
    Dim MyLoopIndex As Integer
    Dim NumRows As Integer
    Dim NumCols As Integer
    NumRows = ActiveSheet.UsedRange.Rows.Count
    NumCols = ActiveSheet.UsedRange.Columns.Count
    QT = Chr(34)
    Filename = "C:\YourFolder\YourDataFile.xml"
    FileNo = FreeFile
    Open Filename For Output As #FileNo
    ' write header to file
    Print #FileNo, "<testdata>"
    ' loop the sheet and write the data
    For MyRowIndex = 2 To NumRows
     OutputString = "<test "
     For MyColIndex = 1 To NumCols
      OutputString = OutputString & Cells(1, MyColIndex) & "=" & QT & Cells(MyRowIndex,        MyColIndex) & QT & " "
     Next MyColIndex
     OutputString = OutputString & " />"
     Print #FileNo, OutputString
    Next MyRowIndex

    ' write footer to file
    Print #FileNo, "</testdata>"
    Close #FileNo

    End Sub 
```

我没有使宏足够聪明来处理小于字符，它希望表示为：

```
&lt; 
```

根据您的数据，可能还有其他特殊字符需要处理。该脚本还假定电子表格包含作为第一行的字段名称，并且电子表格的全部内容将是要捕获的预期数据。

# jquery - 添加 宽度到父级

> ID：10075373
> 
> 赞同：0
> 
> 时间：2012-04-09T15:16:01.447
> 
> 标签：jquery, html-lists

我想创建一个包含图像的水平滚动画廊。

IE

```
<ul class='fluid_ul'>
<li id='fluid_li'>
<img>
</li>
<li... etc etc
</ul> 
```

img 是百分比高度/自动宽度。`li`间距也有一个margin-right 。

因此，当窗口调整大小/加载时，我需要改变 UL 的宽度。

我发现[之前的这篇文章](https://stackoverflow.com/a/3061345/1097558)看起来很有希望，但在这种情况下根本无法让它发挥作用。

任何关于如何在图像调整大小时生成 UL 宽度的想法/帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:25:07.260

行，

**对示例代码的html** *小修正*

```
<ul id='fluid_ul'>
    <li><img src=".." /></li>
    <li><img src="..." /></li>
</ul> 
```

**jQuery**

```
$(window).load(function(){ // once the page has loaded (including images)
    var totalWidth = 0; // a variable to hold the total width of the li elements
    $('#fluid_ul').children().each(function(){ // for each li
        totalWidth += $(this).outerWidth(); // add its width to the total
    }).end().css({width:totalWidth}); // finally revert selection to ul and apply total
}); 
```

# button - 广播组布局（Android）？

> ID：10075377
> 
> 赞同：2
> 
> 时间：2012-04-09T15:16:14.247
> 
> 标签：button, layout, radio-button

我在一个单选组中需要 4 个单选按钮，但我需要它们呈方形（2x2），而不是全部水平或全部垂直。我尝试使用 radiogroup 围绕线性布局，但没有奏效。我应该怎么做才能获得正确的布局？这是我拥有的xml：

```
<RadioGroup
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >  
                <LinearLayout android:layout_height="wrap_content" 
                    android:layout_width="wrap_content"
                    android:orientation="horizontal">
                    <LinearLayout android:layout_height="wrap_content" 
                        android:layout_width="wrap_content"
                        android:orientation="vertical">
                        <RadioButton android:layout_height="wrap_content"
                            android:layout_width="wrap_content"
                            android:checked="false"
                            android:text="Q2"
                            android:layout_marginLeft="90dp"
                            android:id="@+id/rbQ2V">
                        </RadioButton>
                        <RadioButton android:layout_height="wrap_content"
                                android:layout_width="wrap_content"
                                android:checked="false"
                                android:text="Q3"
                                android:layout_marginLeft="90dp"
                                android:id="@+id/rbQ3V">
                        </RadioButton>
                    </LinearLayout>
                    <LinearLayout android:layout_height="wrap_content" 
                        android:layout_width="wrap_content"
                        android:orientation="vertical">
                        <RadioButton android:layout_height="wrap_content"
                            android:layout_width="wrap_content"
                            android:checked="true"
                            android:text="Q1"
                            android:layout_marginLeft="5dp"
                            android:id="@+id/rbQ1V">
                        </RadioButton>
                        <RadioButton android:layout_height="wrap_content"
                                android:layout_width="wrap_content"
                                android:checked="false"
                                android:text="Q4"
                                android:layout_marginLeft="5dp"
                                android:id="@+id/rbQ4V">
                        </RadioButton>
                    </LinearLayout>
                </LinearLayout> 
            </RadioGroup> 
```

# filter - 记录复制：Access 2003，VBA。服务器过滤器卡住

> ID：10075383
> 
> 赞同：0
> 
> 时间：2012-04-09T15:16:29.223
> 
> 标签：filter, duplicates, records

我有一个问题，我实际上知道答案，但想把它放在那里给其他可能正在努力解决这个问题的人，因为我没有在互联网上找到答案，而是自己拼凑起来的。为了省去别人的麻烦。当您的用户每次单击不同的记录时都获得相同的记录时，在 Access 2003 中，这很可能是因为当您在设计模式下保存时，它还将服务器过滤器属性保存到它过滤到的任何记录中。然后，当您将其实时发送时，它就被卡住了。我将在下面提供这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T17:07:51.940

这不适用于每个“事件”，因此最好的办法是将此代码放在您用来打开任何表单的任何按钮中，因为它的 ServerFilter 属性卡住或每次都复制相同的记录。再次，将此代码插入打开有问题的表单的按钮中，并在“OpenForm”函数调用您需要的表单之前执行此操作：'关闭提供的表单。以防万一它打开 DoCmd.Close acForm, "Orders" '在设计视图中重新打开提供的表单。DoCmd.OpenForm“订单”，acDesign

```
Public Sub Whatever()
On Error GoTo LiveError

  'Set all filters to ""
  Forms![Orders].Filter = ""
  Forms![Orders].ServerFilter = ""

  'Save the form in design view
  DoCmd.Save acForm, "Orders"

  'Close the supplied Form.
  DoCmd.Close acForm, "Orders"

  'This is where your Open Form function would go, to open whatever form you need 
  'as usual.  The only difference now is that all pre-saved filters will be gone 
  'before you apply the new filter.

  Exit Sub

LiveError:
  'This is so that when it goes live it doesn't error out since it can't open 
  'in design mode on the live server.

  'Continue opening whatever form you planned on before.  For example:

  Call OpenOrderForm(Forms![FORMNAME]![FILTERCRITERIA])
End Sub 
```

# objective-c - OpenSSL在objective-c中使用公共pem加密

> ID：10075384
> 
> 赞同：3
> 
> 时间：2012-04-09T15:16:30.790
> 
> 标签：objective-c, ios, c, openssl

我已经为我的 iOS 项目编译并构建了 openssl，

但是在objective-c中苦苦挣扎，为此命令行编写了等效代码：

```
openssl rsautl -encrypt -inkey publicKey.pem -pubin -in textfile.txt -out encrypted.bin 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:31:08.703

嗨，我遇到了同样的问题，最后我找到了我正在寻找的东西。我需要像 CodeInChaos 所说的是我的自签名证书。有了它，我的代码可以正常工作。为此，我使用以下命令：

```
openssl req -x509 -out public_key.der -outform der -new -newkey rsa:1024 -keyout private_key.pem -days 3650 
```

我发现这篇文章非常有用：

[http://blog.iamzsx.me/show.html?id=155002](http://blog.iamzsx.me/show.html?id=155002)

它回答了很多问题。不是英文的，但谷歌翻译得很好，所以这不是一个大问题。

我做了这个小功能，用我找到的代码和我自己的代码来加密数据。我的包中有我的公钥，我以 base64 编码的 NSDaa 返回消息以将其发送到服务器：

```
+ (NSString *)encryptWithPublicKeyMessage:(NSString *) message
{
NSLog(@"encrypting...");
NSData *inputData = [message dataUsingEncoding:NSUTF8StringEncoding];
const void *bytes = [inputData bytes];
int length = [inputData length];
uint8_t *plainText = malloc(length);
memcpy(plainText, bytes, length);

/* Open and parse the cert*/
NSData *certData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"public_key" ofType:@"der"]];
SecCertificateRef cert = SecCertificateCreateWithData(kCFAllocatorDefault, (__bridge CFDataRef)certData);
SecPolicyRef policy = SecPolicyCreateBasicX509();
SecTrustRef trust;
OSStatus status = SecTrustCreateWithCertificates(cert, policy, &trust);

/* You can ignore the SecTrustResultType, but you have to run SecTrustEvaluate
 * before you can get the public key */
SecTrustResultType trustResult;
if (status == noErr) {
    status = SecTrustEvaluate(trust, &trustResult);
}

/* Now grab the public key from the cert */
SecKeyRef publicKey = SecTrustCopyPublicKey(trust);

/* allocate a buffer to hold the cipher text */
size_t cipherBufferSize;
uint8_t *cipherBuffer; 
cipherBufferSize = SecKeyGetBlockSize(publicKey);
cipherBuffer = malloc(cipherBufferSize);

/* encrypt!! */
SecKeyEncrypt(publicKey, kSecPaddingPKCS1, plainText, length, cipherBuffer, &cipherBufferSize);

 NSData *d = [NSData dataWithBytes:cipherBuffer length:cipherBufferSize];

/* Free the Security Framework Five! */
CFRelease(cert);
CFRelease(policy);
CFRelease(trust);
CFRelease(publicKey);
free(cipherBuffer);
NSLog(@"encrypted");
return [d encodeBase64ForData];
} 
```

我希望它对我有帮助 我需要一段时间才能找到正确的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T06:20:49.387

所以我解决了我的问题，这是我的问题的函数，它加密了一个 NSString：

我从这个问题的代码中修改了代码：[将 RSA public key to iphone and use it to encrypt](https://stackoverflow.com/questions/4211484/send-rsa-public-key-to-iphone-and-use-it-to-encrypt)

（同样在我的代码末尾，我使用[QSUtilities](https://github.com/mikeho/QSUtilities)将消息编码为 base64）

```
#pragma mark Encryption using OpenSSL
+ (NSString *)EncryptMessage:(NSString *)message {
NSString *path = [[NSBundle mainBundle] pathForResource:@"pubkey" ofType:@"pem"];
FILE *pubkey = fopen([path cStringUsingEncoding:1], "r");
if (pubkey == NULL) {
    NSLog(@"duh: %@", [path stringByAppendingString:@" not found"]);
    return NULL;
}

RSA *rsa = PEM_read_RSA_PUBKEY(pubkey, NULL, NULL, NULL);
if (rsa == NULL) {
    NSLog(@"Error reading RSA public key.");
    return NULL;
}

const char *msgInChar = [message UTF8String];
unsigned char *encrypted = (unsigned char *) malloc(512); //I'm not so sure about this size
int bufferSize = RSA_public_encrypt(strlen(msgInChar), (unsigned char *)msgInChar, encrypted, rsa, RSA_PKCS1_PADDING);
if (bufferSize == -1) {
    NSLog(@"Encryption failed");
    return NULL;
}

NSData *data = [NSData dataWithBytes:(const void *)encrypted length:512]; //I'm not so sure about this length
NSString *result = [QSStrings encodeBase64WithData:data];

free(rsa);
fclose(pubkey);
free(encrypted);

return result; 
```

# hibernate - Joda time DateTime 错误地存储在数据库中

> ID：10075385
> 
> 赞同：11
> 
> 时间：2012-04-09T15:16:34.860
> 
> 标签：hibernate, grails, groovy, grails-orm, jodatime

我通过使用将 JodaTime`DateTime`字段存储到`timestamptz`列中`org.jadira.usertype:usertype.jodatime:1.9`。应用服务器有 +4 时区。数据库服务器 +9 时区。`new DateTime()`结果`${currentTime+1hour}+9`+9 是时区（正确的值是`${currentTime+5hours)+9`）。

我还没有找到任何相关的主题。`java.util.Date`正确存储。

域对象具有以下映射属性：

```
static mapping = {
    dateCreated sqlType:'timestamptz'
} 
```

如何正确存储 DateTime？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-26T15:33:50.980

只需设置 JPA 属性：

```
<property name="jadira.usertype.autoRegisterUserTypes"
          value="true"/>
<property name="jadira.usertype.databaseZone"
          value="jvm"/>
<property name="jadira.usertype.javaZone"
          value="jvm"/> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-13T22:48:33.130

我遇到过同样的问题。在配置中指定 app 和 db 区域解决了这个问题。

```
 <prop key="jadira.usertype.autoRegisterUserTypes">true</prop>
            <prop key="jadira.usertype.databaseZone">America/Los_Angeles</prop>
            <prop key="jadira.usertype.javaZone">America/Los_Angeles</prop> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-12T07:43:14.343

行。我花了8个小时来解决这个问题。如果您使用用户类型项目来持久化 JodaTime，则必须将类的属性设置[为](http://usertype.sourceforge.net/)`databaseZone`等于`PersistentDateTime`当前应用程序服务器时区（而不是数据库！）。

但是最好使用[官方的hibernate支持](http://joda-time.sourceforge.net/contrib/hibernate/index.html)。它解决了开箱即用的问题，因为它默认使用`java.utl.Date`持久化`DateTime`和正确持久化`java.util.Date`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T03:50:41.210

尝试使用 -Duser.timezone=UTC 启动 JVM 到 JAVA_OPTS，这样时间就在一个区域中，然后您可以对其进行操作以将其转换为您所在的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T07:11:55.163

费多尔，

我是否正确假设您使用的是 Oracle TIMESTAMP WITH TIME ZONE 列？由于数据库之间对 JDBC 的处理不同，用户类型还不支持这种类型（即使用 TIME ZONE），尽管该项目很乐意接受补丁。

这里有一些关于 Oracle 的很好的讨论：http: [//puretech.paawak.com/2010/11/02/how-to-handle-oracle-timestamp-with-timezone-from-java/](http://puretech.paawak.com/2010/11/02/how-to-handle-oracle-timestamp-with-timezone-from-java/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T09:35:39.883

我通过创建其他 PersistentDateTime 扩展 AbstractVersionableUserType 解决了这个问题。

```
import java.sql.Timestamp;

import org.hibernate.SessionFactory;
import org.hibernate.usertype.ParameterizedType;
import org.jadira.usertype.dateandtime.joda.columnmapper.TimestampColumnDateTimeMapper;
import org.jadira.usertype.spi.shared.AbstractVersionableUserType;
import org.jadira.usertype.spi.shared.IntegratorConfiguredType;
import org.joda.time.DateTime;

public class PersistentDateTime extends AbstractVersionableUserType<DateTime, Timestamp, TimestampColumnDateTimeMapper> implements ParameterizedType, IntegratorConfiguredType {

@Override
public int compare(Object o1, Object o2) {
    return ((DateTime) o1).compareTo((DateTime) o2);
}

@Override
public void applyConfiguration(SessionFactory sessionFactory) {

    super.applyConfiguration(sessionFactory);

    TimestampColumnDateTimeMapper columnMapper = (TimestampColumnDateTimeMapper) getColumnMapper();
    columnMapper.setDatabaseZone(null);
    columnMapper.setJavaZone(null);
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-24T17:36:41.010

只是 Spring Boot 用户的更新。我能够做到以下几点：

```
spring.jpa.properties.jadira.usertype:
  autoRegisterUserTypes: true
  databaseZone: jvm
  javaZone: jvm 
```

我把这个放在我的`application.yaml`文件里。

# sql - SQL查询：在连接表中选择记录并检查总和

> ID：10075390
> 
> 赞同：0
> 
> 时间：2012-04-09T15:17:10.390
> 
> 标签：sql, join

我有一张桌子 KIOSK

```
CREATE TABLE IF NOT EXISTS `kiosk` (
  `id` varchar(40) NOT NULL,
  `netId` varchar(40) NOT NULL,
  `name` varchar(255) NOT NULL,
  `countryId` varchar(40) NOT NULL,
  `cityId` varchar(40) NOT NULL,
  `address` varchar(255) NOT NULL,
  `lat` varchar(50) NOT NULL,
  `long` varchar(50) NOT NULL,
  `venue` varchar(255) NOT NULL,
  `impressions` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

和一张桌子放置

```
CREATE TABLE IF NOT EXISTS `placement` (
  `id` varchar(40) NOT NULL,
  `userId` varchar(40) NOT NULL,
  `adId` varchar(40) NOT NULL,
  `duration` int(11) NOT NULL,
  `kioskId` varchar(40) NOT NULL,
  `zoneId` varchar(40) NOT NULL,
  `dateBegin` int(11) NOT NULL,
  `dateEnd` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

展示位置是指在信息亭上发布广告。每个展示位置都有发布开始和结束的持续时间和日期。允许在一个信息亭上编译一个 240 秒的不同广告块，该块将在白天一次又一次地轮换。

现在我需要从特定城市中选择有足够时间在块中添加广告的信息亭。

如我所见，我需要选择信息亭并将已添加到该信息亭的展示位置的持续时间相加，以检查是否可以在表格中添加展示位置记录。

我尝试了类似的东西

```
SELECT *, SUM(`placement`.`duration`) AS `d`
FROM `kiosk`
LEFT OUTER JOIN `placement` ON ((`cityId` = 'bac3d991-d13c-49c2-8563-8f974c75f6b9')
AND (`placement`.`kioskId` = `kiosk`.`id`)
AND ((`placement`.`dateBegin` BETWEEN 1333929600 AND 1333929600))
OR (`placement`.`dateEnd` BETWEEN 1333929600 AND 1333929600)))
GROUP BY `kiosk`.`id`
HAVING `d` <=225
OR `d` IS NULL 
```

这里 225 是块中可能使用的秒数（我想在这个例子中放置 15 秒广告），如果这个信息亭没有放置记录，我检查是否`d`为 NULL

似乎我做错了一切，因为我收到了所有信息亭的列表，不知道它的 cityId 或与之链接的展示位置。

我会感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:20:14.773

将您的查询更改为

```
SELECT *, SUM(`placement`.`duration`) AS `d`
FROM `kiosk`
LEFT OUTER JOIN `placement` ON (`kiosk`.`id` = `placement`.`kioskId`)
WHERE ((`cityId` = 'bac3d991-d13c-49c2-8563-8f974c75f6b9')
AND ((`placement`.`dateBegin` BETWEEN 1333929600 AND 1333929600))
OR (`placement`.`dateEnd` BETWEEN 1333929600 AND 1333929600)))
GROUP BY `kiosk`.`id`
HAVING `d` <=225
OR `d` IS NULL 
```

# java - Eclipse 真的需要 Git 来检查 Java 类文件吗？

> ID：10075392
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:17:11.130
> 
> 标签：java, eclipse, git

我正在开发一个使用 Eclipse 作为 IDE 和 tortoiseGit 作为 Git 客户端的 Java 项目。

我真的不想提交 Eclipse 项目的 bin 目录（包含 *.class 文件），但我想确保能够直接从 Eclipse 运行新克隆的项目。如果我删除类文件，那么我只检查我真正想要的，但是如果我克隆这个版本，Eclipse 将无法运行这个项目。它没有找到类（类文件）。

我对 Eclipse 很陌生，所以我不知道如何从 *.java 源文件重建类文件。无论如何，这会奏效吗？还是我做了其他事情来实现我想要的（可运行的存储库，其中没有类文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:31:15.310

如果有人要重新构建您的项目，最简单的方法是点击 Eclipse 中的“运行”按钮。

上面的方法并不复杂。您可以 8 并且可能应该）提供一个[Ant](http://ant.apache.org/) [构建文件](http://en.wikipedia.org/wiki/Apache_Ant#Sample_build.xml_file)。Ant 文件是完成您所要求的任务的常用方法（尽管由于学习曲线较高，它们需要一些时间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:34:30.490

确保将`.project`and`.classpath`文件和`.settings`文件夹签入 git。这些文件告诉 Eclipse 如何配置项目（构建类路径、源目录等）。

# sencha-touch-2 - Sencha touch 2：在 itemTpl 中获取项目索引

> ID：10075394
> 
> 赞同：4
> 
> 时间：2012-04-09T15:17:19.167
> 
> 标签：sencha-touch-2

在 XTemplate 的文档中，{#} 可用于获取当前数组索引。

当我在 xlist 的 itemTpl 中使用它时，我总是得到 1 而不是索引：

```
 {
        xtype: 'list',
            store: 'myStore',
            itemTpl:new Ext.XTemplate(
                 '<tpl for=".">',
                      '<div>Item n°{#1}</div>',
                 '</tpl>'
            ),          
    } 
```

即使我的商店包含多件商品，也始终会生成“Item n°1”。

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T05:12:49.680

请注意，您使用的是**Ext.List**，它从**Ext.data.Store**而非数组中获取数据，因此 XTemplate 一次只处理一项。这就是为什么 {#}（也称为 xindex）总是返回 1。

解决此问题的建议是在商店加载后手动设置项目的索引，如下所示：（您的商店的侦听器）

```
listeners: {
  load: function(store, records){
    store.each(function(record, index){
      record.set('index', index);
    },
    store
  );
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T00:57:05.497

我遇到了同样的问题，我想出了这个：

```
itemTpl: [
           '<div class="item">' +
              'Number {[this.getIndex()]}' +
           '</div>',
           {
              getIndex: function() {
                  return document.getElementsByClassName('item').length + 1;
              }
           }
         ] 
```

我更喜欢这种解决方案，而不是向商店添加额外的属性。

顺便说一句，您不需要`<tpl for="."></tpl>`输入 itemTpl，它是隐式的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T22:19:19.063

这是“按设计”的，因为您没有在此处循环记录/数组。模板为商店的每个元素实例化一次。

另见[http://www.sencha.com/forum/showthread.php?179728-Autonumber-in-Template-in-DataView](http://www.sencha.com/forum/showthread.php?179728-Autonumber-in-Template-in-DataView)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T09:18:16.020

我遇到了同样的问题，遇到了这个线程并认为应该有更好的解决方案。在查看 DataView 的代码后，我注意到以下可覆盖的方法：

```
prepareData: function(data, index, record) {
    return data;
} 
```

所以有一个索引，你只需要添加一点覆盖:)。我更喜欢这种快速解决方案，将索引添加到我的数据对象并覆盖为覆盖目的而提供的方法。

```
Ext.define('MyApp.overrides.dataview.DataView', {
    override: 'Ext.dataview.DataView',

    prepareData: function(data, index, record) {
        if(Ext.isObject(data)) {
            data.xindex = index + 1;
        }
        return data;
    }
}); 
```

# maven - 如何将聚合的 javadocs 部署到 github

> ID：10075403
> 
> 赞同：0
> 
> 时间：2012-04-09T15:18:16.370
> 
> 标签：maven, github

我正在使用 github site-maven-plugin 来部署我的站点文档：

[https://github.com/github/maven-plugins](https://github.com/github/maven-plugins)

但我有一个多模块项目，它似乎只部署单个模块，而不是整个聚合站点。如何部署聚合的站点文档？

这是我的 Maven 插件：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <configuration>
                <aggregate>true</aggregate>
                <author>true</author>
                <bottom>true</bottom>
                <destDir>javadoc</destDir>
                <!-- <header><![CDATA[<a href="/" target="_top">Spring Utility</a>]]></header> -->
                <header><![CDATA[<a href="/" target="_top">${project.description}</a>]]></header>
                <minmemory>128m</minmemory>
                <maxmemory>512</maxmemory>
                <overview>${site.basedir}/src/main/javadoc/overview.html</overview>
                <packagenames>com.baselogic.*</packagenames>
                <use>true</use>
                <version>true</version>
                <windowtitle>${project.name} ${project.version} API</windowtitle>
                <doclet>ydoc.doclets.YStandard</doclet>
                <docletPath>${site.basedir}/src/yworks/ydoc.jar;${site.basedir}/src/yworks/styleed.jar;${site.basedir}/src/yworks/resources;${build.classes.dir};</docletPath>
                <additionalparam>-umlautogen -link http://docs.oracle.com/javase/6/docs/api/</additionalparam>
                <tag name="noinspection" description="IntelliJ Inspection Ignore tag"
                    enabled="false" />

                <doctitle>API for ${project.name} ${project.version}</doctitle> <!-- Used by javadoc:javadoc goal -->
                <windowtitle>API for ${project.name} ${project.version}</windowtitle> <!-- Used by javadoc:javadoc goal -->

                <testDoctitle>Test API for ${project.name} ${project.version}</testDoctitle> <!-- Used by javadoc:test-javadoc goal -->
                <testWindowtitle>Test API for ${project.name} ${project.version}</testWindowtitle> <!-- Used by javadoc:test-javadoc goal -->                

            </configuration>

            <reportSets>
                <reportSet>
                    <id>html</id>
                    <configuration>
                        <doctitle>API for ${project.name} ${project.version}</doctitle>
                        <windowtitle>API for ${project.name} ${project.version}</windowtitle>
                    </configuration>
                    <reports>
                        <report>aggregate</report>
                        <!-- <report>javadoc</report>
                        <report>test-javadoc</report> -->
                    </reports>
                </reportSet>
                <reportSet>
                    <id>test-html</id>
                    <configuration>
                        <testDoctitle>Test API for ${project.name} ${project.version}</testDoctitle>
                        <testWindowtitle>Test API for ${project.name} ${project.version}</testWindowtitle>
                    </configuration>
                    <reports>
                        <report>aggregate</report>
                        <!-- <report>test-javadoc</report> -->
                    </reports>
                </reportSet>
            </reportSets>                  

        </plugin> 
```

我自己服务器上的站点看起来不错： [http ://baselogic.com/code/SpringCertification/](http://baselogic.com/code/SpringCertification/)

但是 Github 仍然只是最后一个模块： http: [//mickknutson.github.com/SpringCertification/](http://mickknutson.github.com/SpringCertification/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:30:01.250

尝试使用[javadoc 插件的聚合目标](http://maven.apache.org/plugins/maven-javadoc-plugin/examples/aggregate.html)并将其绑定到“站点”阶段。然后发布到 github 的任何内容都应该包括所有子模块

# winforms - What is an icon file (.ico) that I can rely on every Windows user having?

> ID：10075405
> 
> 赞同：1
> 
> 时间：2012-04-09T15:18:34.597
> 
> 标签：winforms, oracle, devart, dotconnect

I am extracting the icon from .exes, but want to have a fallback generic icon if for some reason *Icon.ExtractAssociatedIcon(sPathOfExe)* fails.

Is there one I can resort to like so that would be safer than what I'm currently using:

```
private const string defaultIcon = @"C:\WINDOWS\ServicePackFiles\i386\msnms.ico"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:00:03.970

You can always fall back to one of the `SystemIcons` located in the `System.Drawings` class:

An example:

```
Icon appIcon = System.Drawing.SystemIcons.Application; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:21:46.503

I think you can not get an ico file that will always be available. Probably you can find one that exists nowadays, on most versions, but you have no guarantee it will still be available in future versions.

Why not:

1.  ship a ico file with your software
2.  do a recursive serach for ico files inside the Windows folder?

HTH

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T01:14:26.720

If you can create and distribute your own application then what is stopping you to add your own icon to the application as a default icon ?

# c# - 列表选择器和返回值

> ID：10075409
> 
> 赞同：1
> 
> 时间：2012-04-09T15:18:47.743
> 
> 标签：c#, windows-phone-7, listpicker

我是这种语言的新手。我读了这个方法 [http://windowsphonegeek.com/articles/listpicker-for-wp7-in-depth](http://windowsphonegeek.com/articles/listpicker-for-wp7-in-depth) 但我仍然有这个问题：

```
 // Constructor
    public MainPage()
    {
        InitializeComponent();
        List<SampleData> dataSource = new List<SampleData>();
        dataSource.Add(new SampleData() { Day = "Sunday"});
        dataSource.Add(new SampleData() { Day = "Monday"});
        dataSource.Add(new SampleData() { Day = "Tuesday"});
        dataSource.Add(new SampleData() { Day = "Thirsday"});
        dataSource.Add(new SampleData() { Day = "Wednesday"});
        dataSource.Add(new SampleData() { Day = "Friday" });
        dataSource.Add(new SampleData() { Day = "Saturday"});
        this.listPicker.ItemsSource = dataSource;
    }

    public class SampleData
    {
        public string Day { get; set; }
               } 
```

我创建了一个列表选择器并插入了值，现在我创建了这个按钮1：

```
private void button1_Click(object sender, RoutedEventArgs e)
{  
    String s;
    s=(String)listPicker.SelectedItem;
    MessageBox.Show(s);    
} 
```

我没有选择日期，但有一个无效的转换错误，我不知道选择的返回值。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:21:47.190

你`SampleData`放入`ListPicker`. 如果你想要 ' `Day`' 属性，你应该使用

```
private void button1_Click(object sender, RoutedEventArgs e)
    {  
 var sampleData =(SampleData)listPicker.SelectedItem;
 var day = sampleData.Day;
MessageBox.Show(day);    
 } 
```

# android - 从代码 Android 禁用 USB 传输

> ID：10075415
> 
> 赞同：1
> 
> 时间：2012-04-09T15:19:16.227
> 
> 标签：android

我需要从我的 android 应用程序中锁定 USB 数据传输，是否存在一种在无根设备中进行此操作的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:19:08.723

从 Android 2.2 开始，您可以使用[Device Administrator API](http://developer.android.com/guide/topics/admin/device-admin.html)通过 Administrator 来控制用户的访问权限。

此 API 公开了一个[`setStorageEncryption()`-method](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#setStorageEncryption%28android.content.ComponentName,%20boolean%29)，它将加密内部存储的应用程序数据部分。

对于外部存储（例如 SD 卡），没有任何真正的“限制”，因为用户可以轻松地将 SD 卡从设备中拉出并手动将其插入 PC。

一个可能持续存在的问题是，用户仍然可以安装文件管理器，允许他通过使用蓝牙将文件发送到个人电脑/平板电脑。这个问题无法完全消除，因为没有阻止用户从 Android Market 安装应用程序的好方法。

然而，正如在[这个问题](https://stackoverflow.com/questions/6376570/is-there-a-way-to-stop-preventing-users-from-installing-android-apps)中所建议的那样，提取 Android 源代码并构建您自己的操作系统版本可能会正常工作，尽管它的成本非常高。

解决此问题的另一个想法是根设备，这将使您对这些事情有更多的权力（如此处所讨论[）](https://stackoverflow.com/questions/9771995/app-restrict-in-android-mdm)。

# php - php 解析用户输入

> ID：10075416
> 
> 赞同：0
> 
> 时间：2012-04-09T15:19:18.313
> 
> 标签：php, forms, parsing, testing, input

我目前正在尝试使用 PhP 来“解析”用户输入。该页面只是一个带有一个输入字段和提交按钮的表单。

我想要实现的结果是如果用户键入“rand”则使 PhP echo(rand(0,100) 但是如果用户键入这种形式的内容：“rand int1-int2”它会回显“rand(int1,int2)”

我目前正在使用 switch、case、break 进行用户输入。

先感谢您 ！

```
<form action="<?php $_SERVER['PHP_SELF'] ?>" method="POST">
    <input type="text" name="commande" />
    <input type="submit" name="submit" value="envoyer!" />
</form>

<?php if (isset($_POST['commande'])) {

    switch($_POST['commande']){ 
        case "hello":
            echo"<h1> Hello </h1>";
        break;
        case substr($_POST['commande'], 0, 4)=="rand":
            echo(rand(1,100));
        break;
        }

    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:25:54.053

您可以使用[`explode`](http://php.net/manual/en/function.explode.php).

```
<?php
    $input = 'rand 1245';
    list($command, $arguments) = explode(' ', $input);
    $arguments = explode('-', $arguments);
    switch($command) {
        case 'rand':
            print_r($arguments);break;
            $min = 0;
            $max = 100;
            if (count($arguments) == 2) {
                $min = (int)$arguments[0];
                $max = (int)$arguments[1];
            }

            echo rand($min, $max);
            break;

    }
?> 
```

[**活生生的例子**](http://codepad.viper-7.com/PB6wFb)

# c# - 如何在页面加载时使用代码隐藏将 html 代码部分插入特定位置

> ID：10075418
> 
> 赞同：5
> 
> 时间：2012-04-09T15:19:33.270
> 
> 标签：c#, asp.net, html, code-behind, codeblocks

我有一个 aspx 页面，我需要在其中检查并在`page_load`. 错误信息如下：

```
<div class="errorMessage">The user ID or password you entered does not match our records. Please try again. <br /> 
        You may also securely recover your <a href="#">User ID</a> or reset your <a href="#">Password</a> online. 
    </div> 
```

在检查某些条件后，应将此代码块添加到页面中......并且该部分和其他一些功能在代码隐藏功能中实现`page_load()`

我如何只使用`page_load()`函数中的代码而不将其内联在 aspx 文件中来执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T15:29:04.617

创建一个带有 ID 和 runat="server" 的 div：

```
<div ID="divErrorMessage" runat="server" class="divErrorMessage"></div> 
```

然后从后面代码中的 Page_Load 事件中，您可以设置 div 的内部 html：

```
divErrorMessage.InnerHtml = "Your message"; 
```

设置标志，runat="server" 使控件在后面的代码中可用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T15:36:54.043

您可以在 page_load 中添加如下代码

```
protected void Page_Load(object sender, EventArgs e)
{

    Literal lit=new Literal();
    lit.Text = @"<div class='errorMessage'>The user ID or password you entered does not match our records. Please try again. <br /> 
                            You may also securely recover your <a href='#'>User ID</a> or reset your <a href='#'>Password</a> online. 
                        </div>";
    Page.Controls.AddAt(0,lit);

} 
```

在此示例中，我们创建了一个新的 Literal 控件并将您的 HTML 添加到它的 Text 属性中，然后将此文本控件添加到当前 aspx 页面的控件集合中。

您可以通过 CSS 样式更改此 div 的位置，也可以将其添加到任何现有 Panel 中，而不是将其直接添加到“Page.Controls”对象，例如您可以将其添加到“Panel1.Controls”。

但是直接在后面的代码中这样做并不是最佳实践，您可以更好地使用资源文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:29:24.990

有很多方法可以做到这一点，这是一种。将您的 div 包装在一个 asp 面板控件中。

```
<asp:Panel runat="server" ID="pnlErrorMessage">
    <div class="errorMessage">The user ID or password you entered does not match our records. Please try again. <br /> 
    You may also securely recover your <a href="#">User ID</a> or reset your <a href="#">Password</a> online. 
    </div>
</asp:Panel> 
```

在您的 page_load 中：

`pnlErrorMessage.Visible = true;`

# html - Google Maps API v3：更改地图类型事件

> ID：10075419
> 
> 赞同：1
> 
> 时间：2012-04-09T15:19:39.937
> 
> 标签：html, css, google-maps, google-maps-api-3

更改地图类型时是否会触发事件？

我有需要根据地图类型更改颜色的自定义标签。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T15:27:13.073

尝试 maptypeid_changed 事件。然后，您可以使用地图对象的 getMapTypeId 方法获取新的地图类型。

# node.js - tower.js 在 windows xp x86 上安装错误

> ID：10075422
> 
> 赞同：2
> 
> 时间：2012-04-09T15:19:52.323
> 
> 标签：node.js, towerjs

我跑了`npm install tower -g`，npm 开始了，这就是我得到的：

```
npm http GET https://registry.npmjs.org/tower
npm http 304 https://registry.npmjs.org/tower
npm http GET https://registry.npmjs.org/underscore.string
npm http GET https://registry.npmjs.org/async
npm http GET https://registry.npmjs.org/lingo
npm http GET https://registry.npmjs.org/underscore.logger
npm http GET https://registry.npmjs.org/mint
npm http GET https://registry.npmjs.org/ejs
npm http GET https://registry.npmjs.org/pathfinder
npm http GET https://registry.npmjs.org/coffeekup
npm http GET https://registry.npmjs.org/restler
npm http GET https://registry.npmjs.org/useragent
npm http GET https://registry.npmjs.org/URIjs
npm http GET https://registry.npmjs.org/moment
npm http GET https://registry.npmjs.org/node-uuid
npm http GET https://registry.npmjs.org/geolib
npm http GET https://registry.npmjs.org/validator
npm http GET https://registry.npmjs.org/accounting
npm http GET https://registry.npmjs.org/underscore
npm http GET https://registry.npmjs.org/mime
npm http GET https://registry.npmjs.org/qs
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/coffee-script
npm http GET https://registry.npmjs.org/connect
npm http GET https://registry.npmjs.org/express
npm http GET https://registry.npmjs.org/socket.io
npm ERR! git clone git://github.com/viatropos/node.inflection.git CreateProcessW
: ?????????????????

npm ERR! Error: `git "clone" "git://github.com/viatropos/node.inflection.git" "C
:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\npm-1333984084485\\1333984084485-0.313818
96790117025"` failed with 127
npm ERR!     at ChildProcess.<anonymous> (C:\Program Files\nodejs\node_modules\n
pm\lib\utils\exec.js:49:20)
npm ERR!     at ChildProcess.emit (events.js:70:17)
npm ERR!     at maybeExit (child_process.js:360:16)
npm ERR!     at Socket.<anonymous> (child_process.js:465:7)
npm ERR!     at Socket.emit (events.js:67:17)
npm ERR!     at Array.0 (net.js:335:10)
npm ERR!     at EventEmitter._tickCallback (node.js:192:40)
npm ERR! You may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>
npm ERR!
npm ERR! System Windows_NT 5.1.2600
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "tower" "-g"
npm ERR! cwd C:\Program Files\nodejs
npm ERR! node -v v0.6.14
npm ERR! npm -v 1.1.12
npm ERR! message `git "clone" "git://github.com/viatropos/node.inflection.git" "
C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\npm-1333984084485\\1333984084485-0.31381
896790117025"` failed with 127
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Program Files\nodejs\npm-debug.log
npm not ok 
```

节点版本为 v0.6.14

我浏览到文件夹 C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\npm-1333984084485，发现文件夹是空的。`git "clone" "git://github.com/viatropos/node.inflection.git" "C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\npm-1333984084485\\1333984084485-0.31381896790117025"`如果我手动运行 shell 命令，就可以了。

npm-debug.log 文件的一部分：

```
verbose mkdir (expected) error ENOENT, stat 'C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\npm-1333984084485'
verbose mkdir done: C:\DOCUME~1\ADMINI~1\LOCALS~1\Temp\npm-1333984084485 755
silly exec git "clone" "git://github.com/viatropos/node.inflection.git" "C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\npm-1333984084485\\1333984084485-0.31381896790117025"
silly spawning [ 'git',
silly spawning   [ 'clone',
silly spawning     'git://github.com/viatropos/node.inflection.git',
silly spawning     'C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\npm-1333984084485\\1333984084485-0.31381896790117025' ],
silly spawning   null ]
ERR! git clone git://github.com/viatropos/node.inflection.git CreateProcessW: ϵͳ�Ҳ���ָ�����ļ���
verbose about to build C:\Documents and Settings\Administrator\Application Data\npm\node_modules\tower
info unbuild C:\Documents and Settings\Administrator\Application Data\npm\node_modules\tower
verbose from cache C:\Documents and Settings\Administrator\Application Data\npm\node_modules\tower\package.json
info preuninstall tower@0.4.0-2
info uninstall tower@0.4.0-2
verbose unbuild tower@0.4.0-2 [ true,
verbose unbuild tower@0.4.0-2   'C:\\Documents and Settings\\Administrator\\Application Data\\npm\\node_modules',
verbose unbuild tower@0.4.0-2   'C:\\Documents and Settings\\Administrator\\Application Data\\npm\\node_modules' ]
verbose binRoot [ 'C:\\Documents and Settings\\Administrator\\Application Data\\npm',
verbose binRoot   { tower: './bin/tower' } ]
info postuninstall tower@0.4.0-2
ERR! Error: `git "clone" "git://github.com/viatropos/node.inflection.git" "C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\npm-1333984084485\\1333984084485-0.31381896790117025"` failed with 127
ERR!     at ChildProcess.<anonymous> (C:\Program Files\nodejs\node_modules\npm\lib\utils\exec.js:49:20)
ERR!     at ChildProcess.emit (events.js:70:17)
ERR!     at maybeExit (child_process.js:360:16)
ERR!     at Socket.<anonymous> (child_process.js:465:7)
ERR!     at Socket.emit (events.js:67:17)
ERR!     at Array.0 (net.js:335:10)
ERR!     at EventEmitter._tickCallback (node.js:192:40)
ERR! You may report this log at:
ERR!     <http://github.com/isaacs/npm/issues>
ERR! or email it to:
ERR!     <npm-@googlegroups.com>
ERR! 
ERR! System Windows_NT 5.1.2600
ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "tower" "-g"
ERR! cwd C:\Program Files\nodejs
ERR! node -v v0.6.14
ERR! npm -v 1.1.12
ERR! message `git "clone" "git://github.com/viatropos/node.inflection.git" "C:\\DOCUME~1\\ADMINI~1\\LOCALS~1\\Temp\\npm-1333984084485\\1333984084485-0.31381896790117025"` failed with 127
verbose exit [ 1, true ] 
```

任何人都可以帮助我吗？非常感谢！

# windows-phone-7 - wp7上的蓝牙

> ID：10075425
> 
> 赞同：0
> 
> 时间：2012-04-09T15:20:07.393
> 
> 标签：windows-phone-7, bluetooth, connect

我需要开发一个应用程序，它必须连接到蓝牙模块，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:34:21.173

在当前版本的 WP7 API 中无法访问蓝牙。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:37:35.993

您可以使用启动器“ConnectionSettingsTask”来实现它。

只需将 ConnectionSettingsType 用于蓝牙并调用 ConnectionSettingsTask 的 show 方法。这将启动蓝牙设置窗口并允许用户更改蓝牙设置，甚至启用或禁用蓝牙。

您使用 Launcher ，使用命名空间 Microsoft.Phone.Tasks；

```
private void LaunchBluetoothSettingsForm()
    {
       ConnectionSettingsTask connectionSettingsTask = new ConnectionSettingsTask();
       connectionSettingsTask.ConnectionSettingsType = ConnectionSettingsType.Bluetooth;
       connectionSettingsTask.Show();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T15:26:38.453

我已经为 Windows Phone 开发了一个发送和接收图像/视频/音频文件的应用程序，BI 在 microsoft store 上提交了这个应用程序，他们拒绝了 ma 应用程序。他们说这个应用程序允许用户发送受版权保护的数据，所以他们不能发布这种应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T16:51:12.283

截至今天，我们的开发人员无法访问蓝牙模块，希望在 WP8 中我们可以通过 SDK 访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T16:12:58.940

将此代码用于您的按钮事件。您还可以使用此代码启用 Wifi 甚至飞行模式。只需将“蓝牙”一词替换为 Wifi 或飞行模式即可。

```
private void Blutooth_Click(object sender, EventArgs e)
{
   ConnectionSettingsTask Task = new ConnectionSettingsTask();
   Task.ConnectionSettingsType = ConnectionSettingsType.Bluetooth;
   Task.Show();
} 
```

# javascript - 通过 Javascript 连接 Windows Live Messenger

> ID：10075431
> 
> 赞同：0
> 
> 时间：2012-04-09T15:20:25.190
> 
> 标签：javascript, xmpp, windows-live-messenger, messenger

我已经放弃自己解决这个问题，任何帮助将不胜感激。我的最终目标是将 WLM（windows live messenger）实施到我公司的网站中。为此，我可以使用 javascript 和/或 php，但我个人非常喜欢 Javascript，因为我认为调试任何未来的错误会更容易，因为我可以观察流量。

在我获得所有需要的信息后，我没有做的是连接到 WLM XMPP 服务。在文档中，此时提供的唯一帮助听起来类似于“咨询您的 xmpp 库以获取有关如何连接到服务的信息”。我曾尝试使用 Strophe 连接，但我真的不知道我是否真的能够，因为我读过 WLM 不支持 BOSH 服务（[http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/线程/fb7af36c-aa77-4c9b-b8ab-8206427469be](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/fb7af36c-aa77-4c9b-b8ab-8206427469be)）？读完之后，我对接收消息的整个过程是如何完成的也有些不知所措。此外，在我的理解中，javascript 不会让我将任何 http 请求发送到另一个域，这是我在与 XMPP 服务通信时实际尝试做的（据我所知）。

虽然我认为我了解其余的过程 - 身份验证、连接等，但我未能找到通过 javascript 通过身份验证点的方法。任何建议/代码示例都会非常非常有用......

这（[http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/5f0d6428-5664-4c97-8d36-87dd17d3d7fa](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/5f0d6428-5664-4c97-8d36-87dd17d3d7fa)）是 MSN 连接论坛中的一个论坛主题，我问了几个问题并得到一些答复，以防any1需要更多信息。

祝大家有美好的一天:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T11:02:13.400

WLM 没有运行 BOSH 服务。这意味着要能够使用 Strophe 从 Java Script 连接到 WLM，您必须为此运行自己的 BOSH 连接管理器。对于这种情况，一个好的 BOSH CM 是旁遮普 ( [https://github.com/twonds/punjab](https://github.com/twonds/punjab) )。

# php - 以更快的方式读取在线 json 文件 php

> ID：10075435
> 
> 赞同：0
> 
> 时间：2012-04-09T15:20:39.520
> 
> 标签：php, json, curl, file-get-contents

我`file_get_contents`用来阅读在线 json URL，但我没有`cURL`安装任何建议如何更快地提出我的请求

谢谢，玛丽安娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:43:44.797

**做一些简单的基准测试：**

```
<?php
$start = microtime(true);
for ($i=0;$i<=10;$i++){
    $handle = fopen("http://example.com/", "r");
    while (!feof($handle)) {
        $result .= fread($handle, 1024);
    }
    fclose($handle);
}
$end = microtime(true);
$time = $end - $start;

echo "Did fopen test in $time seconds<br />\n";
?> 
```

**在 6.1602981090546 秒内进行了 fopen 测试**

```
<?php
//file_get_contents is basically a wrapper for the above fopen so hence not much of a difference
$start = microtime(true);
for ($i=0;$i<=10;$i++){
    $result = file_get_contents('http://example.com');
}
$end = microtime(true);
$time = $end - $start;

echo "Did file_get_contents test in $time seconds<br />\n";
?> 
```

**是否在 6.5289459228516 秒内测试了 file_get_contents**

```
<?php
$start = microtime(true);
for ($i=0;$i<=10;$i++){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://example.com");
    curl_setopt($ch, CURLOPT_HEADER, 0);
    $result = curl_exec($ch);
}
$end = microtime(true);
$time = $end - $start;

echo "Did cUrl test in $time seconds<br />\n";
?> 
```

**在 2.9657130241394 秒内进行了 cUrl 测试**

*cURL 赢得了胜利……是时候寻找更好的主机了*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:28:50.697

无论哪种方式都应该很快。
[http://www.ebrueggeman.com/blog/php_benchmarking_fopen](http://www.ebrueggeman.com/blog/php_benchmarking_fopen)

没有更好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:29:59.147

没有办法让您的请求更快。如果数据变化不大，您可以做的是在本地缓存数据。

伪代码：

```
if (get_modification_time_of_file('cached.json') < time() - 300) {
    download_file()
} else {
    read_locally()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:33:54.670

您有 2 个选项。

1：使用 fopen/file_get_contents 函数

2：通过设置客户端桥并使用 AJAX 通过 POST 方法将其发送到 php。然后使用 json_decode 在 PHP 上获取它。

# sonarqube - 当我为我的解决方案运行声纳时出现问题。覆盖率报告不是由 Gallio 使用声纳的 NCover 创建的

> ID：10075439
> 
> 赞同：0
> 
> 时间：2012-04-09T15:20:51.900
> 
> 标签：sonarqube, gallio, ncover

我在为我的解决方案运行声纳时遇到问题。我们已经用 Gallio 和 NCover 配置了声纳。但是覆盖结果没有显示在结果中。

这些是我们在构建服务器上拥有的软件版本：

Sonar v2.14
Java Runner v1.2
JDK v1.6：jdk1.6.0_30
Gallio v3.3.458.0
NCover v3.4.16.6924 x86
VS2008
My Sql Server- 5.6

以下是我们传递给声纳的参数。

声纳项目属性文件中的部分

```
sonar.gallio.mode=
sonar.gallio.installDirectory=C:/Gallio

sonar.gallio.coverage.tool=NCover
sonar.gallio.runner=IsolatedProcess
sonar.NCover.installDirectory=C:/Program Files/NCover
sonar.donet.visualstudio.testProjectPattern=*UnitTest*;Testing*;*test*
sonar.dotnet.test.assemblies=bin/debug/xxx.dll 
```

示例 Sonar 项目配置文件

```
sonar.gallio.mode=
sonar.gallio.installDirectory=C:/Gallio
sonar.gallio.coverage.tool=NCover
sonar.gallio.runner=IsolatedProcess
sonar.donet.visualstudio.testProjectPattern=*UnitTest*;Testing*;*test*;*Test*
sonar.NCover.installDirectory=c:/Program Files/NCover
sonar.dotnet.test.assemblies=bin/Debug/SimpleLibrary.Tests.dll 
```

但是，当我针对 NCover 运行有关覆盖文件的声纳时，我会看到一条警告消息。

> 没有找到 Gallio 覆盖报告文件：D:\SareeshTest\SimpleClassLibrary\SimpleClassLibrary.sonar\coverage-report.xml

如果我要放置一个单独使用 NCover Explorer 创建的“coverage-report.xml”，则结果会显示覆盖率。

您能帮我解决这个问题或提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:42:47.273

在使用 NCover 时，不应指定“sonar.gallio.runner=IsolatedProcess”（请参阅[​​有关此问题的常见问题解答](http://docs.codehaus.org/display/SONAR/Unit+Tests,+Integration+Tests+and+Code+Coverage#UnitTestsIntegrationTestsandCodeCoverage-WhenusingOpenCoverwithGallioIget0codecoveragewhereasIdohavetestclassesthatarecoveredbytests)）。

此外，您通常不需要指定“sonar.dotnet.test.assemblies”，它会从 csproj 文件中猜到。

# wpf - 拦截 DataGrid 的添加事件

> ID：10075440
> 
> 赞同：0
> 
> 时间：2012-04-09T15:20:53.943
> 
> 标签：wpf, datagrid, collectionviewsource

我正在尝试拦截 WPF 数据网格的事件以添加新项目。我需要在插入数据源的数据对象上设置一些属性。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:28:54.927

没有可以拦截的事件。但是您可能可以使用`BindingList<T>`. 请参阅[如何为 DataGrid.CanUserAddRows = true 使用工厂](https://stackoverflow.com/questions/4484256/how-to-use-a-factory-for-datagrid-canuseraddrows-true/9863828#9863828)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:16:30.143

我通过绑定到一个`ObservableCollection<T>`，然后使用`CollectionChanged`事件解决了这个问题。

# android - 安卓。dp不做他们的工作

> ID：10075441
> 
> 赞同：2
> 
> 时间：2012-04-09T15:20:58.027
> 
> 标签：android, dpi

1.  新建 -> 用于测试问题的 Android 项目
2.  **Test.java**的代码：

    包test.density.yeah；

    ```
    import android.app.Activity;
    import android.os.Bundle;

    public class TestActivity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
        }
    } 
    ```

3.  **main.xml**的代码：

    ```
    <ImageButton
    android:background="@null"
    android:src="@drawable/icon"
    android:layout_width="200dp"
    android:layout_height="200dp">
    </ImageButton> 
    ```

4.  使用设置启动模拟器：

分辨率 - **480x800**

Avstracted LCD 密度 - **190**

**结果**：

[http://cs5961.userapi.com/u68152416/-3/y_ef134df2.jpg](http://cs5961.userapi.com/u68152416/-3/y_ef134df2.jpg)

之后，我使用以下设置启动了模拟器：

分辨率 - **480x800**

Avstracted LCD 密度 - **240**

**结果**：

[http://cs5961.userapi.com/u68152416/-3/y_8b99507b.jpg](http://cs5961.userapi.com/u68152416/-3/y_8b99507b.jpg)

第一个测试的模拟器设置计算了我的 HTC HD2 特性，第二个测试与 HTC Sensation XL 相同。在它们上运行此测试应用程序时，这是同样的问题。**HD2 (480x800, 190dpi) - 小图像**，**感觉 (480x800, 240dpi) - 大图像**。

那么为什么“**密度无关像素**”不起作用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:33:01.940

它工作得很好，但是你需要知道一个转折点。

您正在视图上使用 src 属性。如果这样做，视图将根据位图大小调整大小，并且您通常会为各种密度、mdpi、hdpi、xhdpi 等提供不同的版本。它将忽略 layout_height 和 layout_width。

如果您希望您的视图忽略位图大小并使用 layout_width 和 layout_height 值来强制大小，则需要使用背景属性，而不是 src。

```
<ImageButton
    android:background="@drawable/icon"
    android:layout_width="200dp"
    android:layout_height="200dp">
</ImageButton> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:26:02.867

可能是图像缩放使您的结果出错，您可以在此处阅读有关图像缩放的更多信息：

`http://thebigbyte.blogspot.com/2009/12/android-how-to-scale-image-in-imageview.html`

您可以通过将 ImageButton xml 更改为来测试结果

```
<ImageButton
android:background="#ffffff"
android:layout_width="200dp"
android:layout_height="200dp">
</ImageButton> 
```

# java - arraylist：将对象与字符串进行比较

> ID：10075442
> 
> 赞同：0
> 
> 时间：2012-04-09T15:20:59.777
> 
> 标签：java, string, object, arraylist

大家好，谁能告诉我我哪里出错了？

这个类的基本目的是定义一个最喜欢的项目数组列表，在这种情况下是关于汽车的。汽车对象具有汽车名称和汽车 1-5 的评级。

您如何查看字符串是否等于汽车对象评级。我弄乱了将字符串或 int 与数组列表中的汽车对象进行比较的部分。我的 equals() 方法有什么问题？contains() 方法可以以同样的方式工作吗？

numberOfItemsOfRating 方法允许用户指定评级，因此该方法返回没有带有评级的汽车。searchForItems 方法检查指定的字符串描述是否与数组列表中的汽车名称匹配，因此返回数组列表中的汽车。

这是我使用构造函数和变量的两种方法的一瞥：

```
public class FavouriteItems
{
    private ArrayList<Item> cars; 

    /**
     * Constructor for objects of class FavouriteItems
     */
    public FavouriteItems()
    {
        cars= new ArrayList<Item>();

    }

    /**
     * Add a new Item to your collection
     * @param newItem The Item object to be added to the collection.
     */
    public void addToFavourites(Item newItem) 
    {
        cars.add(newItem);

    }
    /**
     * Count the number of Items with a given rating 
     * @return The number of Items (Item objects) 
     *          whose rating is rating (could be 0).
     *          If the rating parameter is outside the valid
     *          range 1..5 then print an error message and return 0.
     */
    public int numberOfItemsOfRating(int rating)
    {
        int counter = 0;
        if(rating >= 1 && rating <=5) 
        {
            for ( int i =0; i < cars.size(); i++)
            {
                int num = rating;
                String al = Integer.toString(rating);
                if(cars.get(i).equals(al))
                {
                    counter++;
                }
            }
        }
        else 
        {
            System.out.println("No cars match your ratings");
            counter = 0;
        }
        return counter;
    }

    /**
     * Find the details of a Item given its description
     * @return Item object if its description is in the collection
     * or null if there is no item with that description
     */
    public Item searchForItem(String description) 
    {
         for(int i=0; i<cars.size(); i++)
        { 
            if(cars.equals(description))
            { 
                 return cars.get(i);
            } 
            else 
            { 
                return null;
            }
        }  
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:30:09.957

您正在根据对象本身进行相等性检查，而您应该针对*对象的属性进行检查*。在您的特定情况下，您应该查看`rating`集合中每个 Car/Item 的属性。您的代码将如下所示：

```
final String ratingStr = Integer.toString(rating);

int counter = 0;
for (for final Item car: cars) {
    if(ratingStr.equals(car.getRating()) {
        ++counter;
}

System.out.println("Number of 'cars' with the rating is: " + counter); 
```

两个快速评论，你***应该***`Item`为你的类实现相等方法。但在这种情况下，这不是您问题的实际根源。此外，您在代码中提到了很多汽车，但您的 bean 类称为“项目”。您可能需要调和这一点，因为它可能会使阅读您的代码的其他人感到困惑。

不要忘记修复您的`searchForItem`方法，目前您正在测试数组列表与字符串的相等性，它永远不会返回 true。以与上述相同的方式更正它，但使用`description`汽车的属性，而不是`rating`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:24:34.647

```
cars.get(i) 
```

返回一个项目，而不是一个字符串。所以

```
if(cars.get(i).equals(al)) 
```

是不正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:26:16.053

```
if(cars.equals(description)) 
```

您的 ArrayList `cars`（在这种情况下是整个列表）永远不会等于单个字符串。

如果您想搜索汽车，您需要检查列表中的所有项目，并查看它们的名称（或您存储在`Item`-class 中的任何信息）是否与给定的`description`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:26:29.503

这不是您应该使用 equals 方法的方式，而是建议您使用或实现`Item#getRating()`and `Item#getDescription()`。用于`cars.get(i).getDescription().equals(description)`检查说明。要检查评级，请使用`cars.get(i).getRating() == rating`.

您不应使用 equals 将 Item 与字符串进行比较，因为这会违反 equals [contract](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T09:51:01.770

`if(cars.get(i).equals(al))` **在这里，您将字符串与对象进行比较，因此** 在使用时是错误的，您可以尝试以下编码

```
if(cars.get(i).getItem().equals(al)) 
```

getItem() 可能是汽车类中名为“item”的变量之一，键入为“string”并将其放入 getter 和 setter。

**lly if(cars.equals(description)) 是错误的。在这里，您正在尝试将列表名称与字符串进行比较，** 以便更好地使用以下编码

```
 if(cars.get(i).getDescription().equals(description))
    return cars.get(i); 
```

getDescription() 可能是汽车类中名为“description”的变量之一，键入为“string”并将其放入 getter 和 setter。

# php - 将数据插入数据库不起作用

> ID：10075443
> 
> 赞同：2
> 
> 时间：2012-04-09T15:21:01.307
> 
> 标签：php, mysql

我有点卡住了，我可以手动更新数据库，但是通过 PHP 它不起作用。

数据库字段：

```
Column     Type          Collation          Attributes   Null  Default  Extra
id         int(10)                          UNSIGNED     No             auto_increment    
addedby    varchar(100)  latin1_swedish_ci               No            
location   text          latin1_swedish_ci               No            
details    text          latin1_swedish_ci               No            
deadline   text          latin1_swedish_ci               No            
datefixed  int(200)                                      No    0        
completed  int(11)                                       No    0 
```

添加_jobs.php：

```
<?php

$pagetitle = "Add Job";

$checkrank = 3;

include ($_SERVER['DOCUMENT_ROOT'].'/header.inc.php');

$helpfaerie = mysql_fetch_array(mysql_query("SELECT * FROM helpfaerie WHERE page = 'reportbug'"));
$helpfaerie2 = mysql_fetch_array(mysql_query("SELECT * FROM members WHERE username = '$username'"));

if ($helpfaerie2[helpfaerie] == 1)
{
echo "<div id=\"helpfaerie\" style=\"overflow: auto; position:fixed; bottom:0; right:0; \"><table width=\"200\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\" style=\"border-top: 1pt solid black;border-bottom: 1pt solid black;border-left: 1pt solid black;border-right: 1pt solid black; background-color:#ffffff;\">
  <tr>
    <td><center><img src=\"http://images.neopets.com/items/toy_faerie_psellia.gif\" border=\"0\"></center></td>
  </tr>
  <tr>
    <td><p>$helpfaerie[text]</p></td>
  </tr>
  <tr>
    <td style=\"text-align: right;\">[<a href=\"$baseurl/closehelp.pro.php\">x</a>]</td>
  </tr>
</table></div>";
}

ECHO <<<END

<center>
<FORM ACTION="add_jobs.pro.php" enctype="multipart/form-data" METHOD=POST>
<table width="366" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td colspan="2"><center>Add Job<p></center></td>
  </tr>
  <tr>
    <td width="118">Job Location (If any):</td>
    <td width="249"><textarea name="page"  cols="20" rows="1" value="" ></textarea></td>
  </tr>
  <tr>
    <td width="118">Details::</td>
    <td width="249"><textarea  name="wrong" cols="20" rows="10" value=""  ></textarea></td>
  </tr>

  <tr>
    <td width="118">Deadline::</td>
    <td width="249"><textarea name="line" cols="20" rows="1" value=""></textarea></td>
  </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td colspan="2"><center><font size="-1"><i>
      <input type=submit name=Submit value="Add Jobs">
    </i></font></center></td>
  </tr>
</table></FORM>
<p>&nbsp;</p></center>

END;

include ($_SERVER['DOCUMENT_ROOT'].'/footer.inc.php');

?> 
```

注意：dblink（链接到我的数据库，工作正常，）插件，基本上是为笑脸和语法。

基本上这是一个工作页面，我们用我们需要在网站周围做的工作进行更新。

add_jobs.pro.php：

```
<?php

$pagetitle = "Add Jobs";

$checkrank = 3;

include ($_SERVER['DOCUMENT_ROOT'].'/addon.php');

include ($_SERVER['DOCUMENT_ROOT'].'/dblink.php');

include ($_SERVER['DOCUMENT_ROOT'].'/security/stripusers.php');

$page = $_POST['page'];
$wrong = $_POST['wrong'];
$line = $_POST['line'];

$page = mysql_real_escape_string($page);
$page = stripslashes($page);
$page = stripusers($page);

$wrong = mysql_real_escape_string($wrong);
$wrong = stripslashes($wrong);
$wrong = stripusers($wrong);

$line = mysql_real_escape_string($line);
$line = stripslashes($line);
$line = stripusers($line);

if ((!$page) OR (!$wrong)  OR (!$line)) 

{

               die(header("Location: $baseurl/add_jobs.php?error=Please+do+not+leave+any+info+blank."));

}

else

{

        mysql_query("INSERT INTO assignments (addedby,location,details,deadline,datefixed) VALUES ('$username','$page','$wrong','$line','$timestamp','0')");

        header("Location: add_jobs.php?error=Thank+you.+Your+Job+has+been+submitted.");

}

?> 
```

我刚刚进入另一个问题。

提交作业后，它们就会被列在此

```
<?php

$pagetitle = "Active Jobs";

$checkrank = 0;

include ($_SERVER['DOCUMENT_ROOT'].'/header.inc.php');

$view=$_GET['view'];

$num = mysql_num_rows(mysql_query("SELECT * FROM `assignments` WHERE 1"));

if ($num <= 0)
{
    echo "

<p><center>

There are no active jobs :D";
}

$sort = mysql_query("SELECT * FROM `assignments` WHERE 1");
while($sort2 = mysql_fetch_array($sort))

{

 if($sort2[id])

{

$tym = date("H:i",$sort2[date]);
$wcd = date("M j Y",$sort2[date]);  

echo("
<center>
<table width=\"607\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\" style=\"border-top: 1pt solid black;border-bottom: 1pt solid black;border-left: 1pt solid black;border-right: 1pt solid black; \">
  <tr>
    <td width=\"139\" valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#5eaed4;\">Submitted By:</td>
    <td width=\"450\" valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\">$sort2[addedby]</td>
  </tr>
  <tr>
    <td valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#8cc7e3;\">Date Submitted:</td>
    <td valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\"> $wcd @ $tym NST</td>
  </tr>
  <tr>
    <td valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#5eaed4;\">Job Location:</td>
    <td valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\">$sort2[location] [<a href=\"$sort2[location]\">View</a>]</td>
  </tr>
  <tr>
    <td valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#8cc7e3;\">Job Description:</td>
    <td valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\">$sort2[details]</td>
  </tr>
  <tr>
    <td valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#8cc7e3;\">Deadline:</td>
    <td valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\">$sort2[deadline]</td>
  </tr>
  <tr>
    <td valign=\"top\" style=\"border-right: 1pt solid black; background-color:#5eaed4;\">completed?:</td>
    <td valign=\"top\" style=\"background-color:#f4f4f4;\">Click When Completed [<a href=\"$baseurl/staff/submitted/completed_job.pro.php?id=$sort2[id]\">x</a>]</td>
  </tr>
</table>
<p>&nbsp;</p></center>

"); }

}

echo "<p></center>\n";

echo "</center>\n";

include ($_SERVER['DOCUMENT_ROOT'].'/footer.inc.php');

?> 
```

然后您单击 X，然后将它们分类为已完成，然后将它们从页面上删除，但它没有这样做，它们只是保持列出，

但他们也在注册他们的固定，并显示在已完成的工作页面上。

完成_jobs.php

```
 <?php

    $pagetitle = "Active Jobs";

    $checkrank = 0;

    include ($_SERVER['DOCUMENT_ROOT'].'/header.inc.php');

    $view=$_GET['view'];

    $num = mysql_num_rows(mysql_query("SELECT id FROM assignments WHERE completed =1"));

    if ($num <= 0)
    {
        echo "

    <p><center>

    There are no complete Jobs at this time.";
    }

    $sort = mysql_query("SELECT * FROM assignments WHERE completed =1");
    while($sort2 = mysql_fetch_array($sort))

    {

     if($sort2[id])

    {

    $tym = date("H:i",$sort2[date]);
    $wcd = date("M j Y",$sort2[date]);  

    $ftym = date("H:i",$sort2[datefixed]);
    $fwcd = date("M j Y",$sort2[datefixed]);  

    echo("
    <center>
    <table width=\"607\" border=\"0\" cellspacing=\"0\" cellpadding=\"4\" style=\"border-top: 1pt solid black;border-bottom: 1pt solid black;border-left: 1pt solid black;border-right: 1pt solid black; \">
      <tr>
        <td width=\"139\" valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#5eaed4;\">Submitted By:</td>
        <td width=\"450\" valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\">$sort2[addedby]</td>
      </tr>
      <tr>
        <td valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#8cc7e3;\">Date Submitted:</td>
        <td valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\"> $wcd @ $tym NST</td>
      </tr>
      <tr>
        <td valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#5eaed4;\">Job Location:</td>
        <td valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\">$sort2[location] [<a href=\"$sort2[location]\">View</a>]</td>
      </tr>
      <tr>
        <td valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#8cc7e3;\">Job Description:</td>
        <td valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\">$sort2[details]</td>
      </tr>
      <tr>
        <td valign=\"top\" style=\"border-bottom: 1pt solid black;border-right: 1pt solid black; background-color:#8cc7e3;\">Deadline:</td>
        <td valign=\"top\" style=\"border-bottom: 1pt solid black;background-color:#f4f4f4;\">$sort2[deadline]</td>
      </tr>
      <tr>
        <td valign=\"top\" style=\"border-right: 1pt solid black; background-color:#5eaed4;\">Completed On:</td>
        <td valign=\"top\" style=\"background-color:#f4f4f4;\">$fwcd @ $ftym NST</td>
      </tr>
    </table>
    <p>&nbsp;</p></center>

    "); }

    }

    echo "<p></center>\n";

    echo "</center>\n";

    include ($_SERVER['DOCUMENT_ROOT'].'/footer.inc.php');

    ?>

and then completed_job.pro.php

<?php

$pagetitle = "Completed Jobs";

$checkrank = 30;
include ($_SERVER['DOCUMENT_ROOT'].'/addon.php');

include ($_SERVER['DOCUMENT_ROOT'].'/dblink.php');

$id=$_GET['id'];

mysql_query("UPDATE assignments SET completed = '1' WHERE id = '$id'");
mysql_query("UPDATE assignments SET datefixed = '$timestamp' WHERE id = '$id'");

        header("Location: completed_jobs.php?error=Job+has+been+updated+to+complete+:)");

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:24:21.743

**`stripslashes()`打电话后不要打电话`mysql_real_escape_string()`！**事实上，除非`magic_quotes_gpc()`打开（不推荐），根本不要调用`stripslashes()`。通过在 之后调用它`mysql_real_escape_string()`，您可以*撤消*该函数提供的转义。

您在插入列列表中指定了 5 列，但在`VALUES()`列表中提供了 6。从您的表格结构来看，我的猜测是您也打算包括在内`completed`。

```
mysql_query("INSERT INTO assignments (addedby,location,details,deadline,datefixed) VALUES ('$username','$page','$wrong','$line','$timestamp','0')");
//-------------------------------------------------------------------------------------------^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

我们假设变量`$username`并`$timestamp`已在包含的文件之一中定义并已正确转义。

一些错误检查会揭示查询错误的来源：

```
$result = mysql_query("INSERT INTO assignments (addedby,location,details,deadline,datefixed) VALUES ('$username','$page','$wrong','$line','$timestamp','0')");
if (!$result) {
  echo mysql_error();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:24:30.107

你有错误吗？如果是这样，它是什么？

乍一看，您的插入查询似乎比列具有更多的值：

```
INSERT INTO assignments 
  (addedby,location,details,deadline,datefixed) 
  VALUES 
  ('$username','$page','$wrong','$line','$timestamp','0') 
```

这肯定会引发错误。

顺便说一句，不推荐使用 mysql_ 系列函数。如果不是 PDO，您至少应该使用 mysqli_。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:37:58.627

你有一些语法错误/陷阱：

```
$helpfaerie = mysql_fetch_array(mysql_query("SELECT * FROM helpfaerie WHERE page =  'reportbug'")); 
```

您假设查询有效。这是不好的做法。即使 SQL 语句本身在语法上是完美的，它也可能由于许多其他原因而失败。在对查询结果进行任何操作之前，您应该始终检查查询是否成功。例如

```
$result = mysql_query(...);
if ($result === FALSE) {
    die(mysql_error());
} 
```

应该是您在开发/测试时随处可见的最低限度。

```
if ($helpfaerie2[helpfaerie] == 1)
                 ^--       ^-- 
```

您忽略了在此处引用数组键。在这个特定的代码片段中，未引用的`helpfaerie`将被解析为`defined()`常量。但是，它可能没有被定义，所以 PHP 会“礼貌地”为你自动将它转换成一个字符串并抛出一个警告。

然后立即你有

```
{
echo "<div id=\"helpfaerie\" 
```

并输出大量多行 HTML。然而后来你使用了一个HEREDOC。为什么不在这里也使用一个呢？这样您就不必转义`"`echo 语句中的所有字符。

```
$page = mysql_real_escape_string($page);
$page = stripslashes($page);
$page = stripusers($page); 
```

这没有任何意义。你正确地转义了 $page，然后你做了stripslashes，这基本上撤消了 mysql_real_escape_string() 调用。虽然不完全准确，但您可以将 m_r_e_s() 视为 的高级版本`addslashes()`，因此您基本上是在转义，然后再次取消转义，从而使您容易受到 SQL 注入的攻击。

我不知道是什么`stripusers()`，但无论如何，操作顺序应该是

```
$page = stripusers($page);
$page = mysql_real_escape_string($page); 
```

m_r_e_s() 应该始终是在查询字符串中使用该位数据之前执行的**最后一个操作。**如果您在转义完成后对转义字符串执行任何操作，则您可能会撤消转义和/或引入另一种注入攻击潜入的方式。

# sql-server-2008 - SSIS 中转换平面文件数据的方法（基于标量 sql 函数）

> ID：10075448
> 
> 赞同：1
> 
> 时间：2012-04-09T15:21:20.823
> 
> 标签：sql-server-2008, ssis

最初，我整理了一个 TSQL 脚本来从一组平面文件中批量导入数据。（见下文）。使用 SQLSERVER 中的函数很容易将数据转换为我想要的数据类型，并根据我可能遇到的数据集的任何独特条件来处理数据转换。例如，所有列的开头或结尾都可以有空格，表示空值的日期列具有特定值，作为货币的数据可以在表示负数的数字末尾有破折号，等等。所以我使用 sqlserver 中的标量值函数来处理各种条件和案例语句以允许一致的数据集。

我现在的目标是将其迁移到 SSIS，但是复制我在 SSIS 中已经完成的工作似乎非常麻烦。虽然 SSIS 确实有工具来进行转换（如字符映射、数据转换、派生列工具和脚本组件）。——要获得我已经在我的剧本中拥有的东西，似乎需要做大量的工作。看来我不能重复使用任何东西。虽然这对于一张小桌子来说可能没问题，但为每张桌子输入 50 多列相同的复杂转换确实是一件苦差事——然后在我需要修改某些东西时保持它？呃。我肯定错过了什么。谢谢你的帮助。

```
 INSERT INTO [TEST1].[dbo].[Table1] 
            SELECT 
               dbo.TRIM([ID]) 
              ,dbo.FixDate([CompleteDate]) 
              ,dbo.TRIM([IsDeleted]) 
              ,dbo.Text2Numeric([QtyTotal]) 
              ,dbo.Text2Numeric([OrderQty]) 
              ,dbo.Text2Money([Price]) 
              FROM  OPENROWSET(BULK  '\\server1test\temp\import1.txt', FIRSTROW=2,
              FORMATFILE='\\server1test\temp\import1.Xml'
              ) as t1 ;
        GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:10:06.613

不涉及自定义 dll 和 GAC 的可能解决方案是仅使用执行 SQL 任务。我试过这个并且它有效，但我想知道缺点是什么。另一个想法是使用 Ole DB 命令并将其包装在存储过程调用中。这种方法的缺点是什么？

# css - 如果另一个区域随着 CSS 增长，如何缩小一个区域？

> ID：10075450
> 
> 赞同：3
> 
> 时间：2012-04-09T15:21:21.607
> 
> 标签：css, html

我需要使用 html 和 CSS 实现一种效果：

```
+-------------------+-----------------+ 
|some text bla bla  |other text here  |
+-------------------+-----------------+

+--------------+----------------------+
| some text b..|bigger other text here|
+--------------+----------------------+ 
```

主容器的大小是固定的。而且我需要第二个区域总是增长，如果文本溢出，首先会缩小。

CSS可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:25:33.043

我认为使用 css 是不可能的，即使使用 css3

它适用于 javascript 和明确定义的宽度

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:49:31.140

我能想到的最佳解决方案（仅使用 CSS）是`position:absolute;`在右侧的 div/span/p/whatever 上使用，因此它将保持在左侧元素的顶部。这是一个活生生的例子：http: [//jsfiddle.net/Cthulhu/6DrQX/](http://jsfiddle.net/Cthulhu/6DrQX/)

然而，这并不是一个很好的解决方案，所以我也会像 stefan bachert 提议的那样使用 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T16:26:29.063

检查我的这个较旧的答案：[如何用溢出组织这个布局？](https://stackoverflow.com/questions/8402241/how-to-organize-this-layout-with-overflows/8402946#8402946)

请注意，HTML 中“区域”的顺序是颠倒的。这可能适用于所有现代浏览器，但我不记得了，所以你应该在你需要支持的浏览器中测试它。

**见：http:** [//jsfiddle.net/thirtydot/sxeu9/](http://jsfiddle.net/thirtydot/sxeu9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T17:56:00.287

您是否尝试过使用水平列表？我不确定这会有多有效。

# javascript - 更改站点（文件）但不更改链接

> ID：10075451
> 
> 赞同：0
> 
> 时间：2012-04-09T15:21:28.403
> 
> 标签：javascript, html, hyperlink, screen, resolution

我已经创建了一个站点，但还有另外两个用于不同屏幕分辨率的子站点。例如 index.htm（用于 1080p 分辨率）和 index1.htm（用于 720p 分辨率）。

所以

index.htm 在有人键入 www.mysite.com 时打开

当有人键入 www.mysite.com/index1.htm 或他的屏幕分辨率为 720p 时，index1.htm 会打开

但我不想变成这样

我既想检测访问者的屏幕分辨率（我知道怎么做），又想自动打开一个（例如 index1.htm 但链接不改变并保持 www.mysite.com [不是 www.mysite.com/index1.htm]）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:39:03.280

您应该使用`media-queries`使网站在每种分辨率下都看起来不错。一些教程：

*   Webdesignerwalls：[CSS3 媒体查询](http://webdesignerwall.com/tutorials/css3-media-queries)和[使用 CSS3 媒体查询的响应式设计](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)
*   Nettuts+：[CSS 媒体查询速成课程](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-a-crash-course-in-css-media-queries/)
*   CSS 技巧：[关于响应式网页设计](http://css-tricks.com/video-screencasts/102-braindump-on-responsive-web-design/)[的 CSS 媒体查询](http://css-tricks.com/css-media-queries/)和截屏视频
*   一些很好的例子： http: [//mediaqueri.es/](http://mediaqueri.es/)

* * *

对于那些在 Google 上搜索此问题时发现此主题的人。你需要像 AJAX 这样的东西来完成这项工作。
如果您只更改不同分辨率的样式表，您可以使用样式表切换器。

但是如果你改变了整个 HTML，这对你的可用性不利，你需要把所有的东西都放在`body`特殊的文件中，然后用 AJAX 将它们加载到正文中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:36:28.363

您可以尝试使用媒体查询，您只需要一个 index.html 和一个样式表。阅读本文了解更多信息！ [媒体查询教程](http://webdesignerwall.com/tutorials/responsive-design-with-css3-media-queries)

# android - 此类文件的 Jar 属于容器“Android Dependencies”，该容器不允许修改其条目上的源附件

> ID：10075453
> 
> 赞同：30
> 
> 时间：2012-04-09T15:21:46.130
> 
> 标签：android, dependencies, jakarta-mail

我正在制作一个电子邮件应用程序，它在这个问题的标题中给出了错误。我该如何解决这个问题？如果有助于找到解决方案，我将提供我的代码截图。

![在此处输入图像描述](../Images/48ca01860b3d78e86a48a554bb820403.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-28T12:13:32.030

对此有官方解决方案：

> 允许 libs/ 中的 3rd 方 jar 的 src/doc 附件
> 
> 由于这些 jar 是通过类路径容器动态添加的，因此开发人员无法通过 Eclipse UI 设置源路径和 javadoc（容器不允许编辑它们）。为了解决这个问题，并确保两个路径不仅被当前项目拾取，而且被其他项目拾取（如果当前项目是库项目），该值由位于 jar 文件旁边的文件设置. 该文件是 jar 文件后的名称，在末尾添加 .properties。例如 foo.jar -> foo.jar.properties 它目前可以包含 2 个属性： src：源文件夹（或存档）的相对或绝对路径。doc：javadoc 的相对或绝对路径。

[https://android-review.googlesource.com/#/c/35702/](https://android-review.googlesource.com/#/c/35702/)

编辑：[Google I/O 2012 视频中的解释](http://www.youtube.com/watch?feature=player_detailpage&v=Erd2k6EKxCQ#t=2918s)

**例如，对于 Joda-Time 2.1：**

```
cd $PROJECT/libs
touch joda-time-2.1.jar.properties 
```

并插入以下内容，确保路径正确：

```
src=/Users/josh.oneal/SDKs/joda-time-2.1/joda-time-2.1-sources.jar
doc=/Users/josh.oneal/SDKs/joda-time-2.1/joda-time-2.1-javadoc.jar 
```

您现在可以在 Eclipse 中右键单击您的项目并刷新，然后 Command / Ctrl + 单击一个类`DateTime`以查看其源代码。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-12T13:10:45.137

似乎是他们在 ADT r17 中故意破坏的东西。请参阅[http://code.google.com/p/android/issues/detail?id=27490#c6](http://code.google.com/p/android/issues/detail?id=27490#c6)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-09T17:07:38.153

当您使用 eclipse 时，您可以通过选择您的库项目并转到 Properties > Order and Export 并将您的 src 依赖项移动到 gen 依赖项之上来修复它。你也可以手动编辑你的 .classpath 文件来做同样的事情。清理此项目后，源附件应该可以工作。找出解决方案的[功劳归于 NightCrawler](https://stackoverflow.com/questions/18942340/the-jar-of-this-class-file-belongs-to-container-android-dependencies-which-doe/19050848#19050848)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T07:52:30.383

请注意评论 8 中的解决方法

[http://code.google.com/p/android/issues/detail?id=27490#c8](http://code.google.com/p/android/issues/detail?id=27490#c8)。“您好，我对评论 3 中描述的问题有解决方案：

1.  将内容从 libs 文件夹移回 lib，因为 ADT 17 会自动将所有 jar 从 libs 目录添加到 Android 依赖项下。
2.  从您的 lib 目录添加依赖项作为普通的 eclipse 依赖项（ADT 17 之前的旧方式）。将 JAR 文件与其源 JAR 文件或 Javadoc 链接起来。
3.  在 Project properties -> Java build path -> Order and export 中检查所有添加的依赖项以包含在项目类文件中。
4.  选择 Android 工具 > 修复项目属性"

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-11T11:22:15.783

使用 javax.mail 访问 gmail 时遇到了同样的问题。根据此链接（http://stackoverflow.com/questions/6546926/could-not-find-class-error-when-trying-to-upload-a-video-to-youtube-using-the-gd），它和Android似乎存在某种问题。

我通过使用这个 JAR 文件解决了它，这里：[http ://code.google.com/p/javamail-android/](http://code.google.com/p/javamail-android/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-16T10:01:36.343

我终于找到了真正和最简单的解决方案。

这正在使用 IDE，并且始终有效。最简单的解决方案。

如果您有一个复杂的结构，其中一个库项目使用一个库，并且该库项目用于您的项目，依此类推。或者在任何情况下......这样做来解决这个问题：

导入eclipse你希望能够看到调试过程的源代码的库。

通过右键单击项目 > 属性 > Android 标记 Is Library 选项

然后转到所有使用该库的库项目，然后右键单击项目 > 属性 > Android > 添加 > 并选择您的库。

然后，转到您的项目和位于 Project>Properties>Android>Library_name 中的库项目，单击删除并再次添加它，以便能够假设库项目中的更改。

就这样。它只是使用库本身的项目，而不是仅使用您要查看源代码的库的jar。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-15T10:46:34.170

也试试这个解决方案：转到项目文件夹并打开`.classpath`文件。`classpathentry`这里以这种方式重新排序

```
<?xml version="1.0" encoding="UTF-8"?>
    <classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="gen"/> 
```

第一个是`<classpathentry kind="src" path="src"/>`，第二个 - `<classpathentry kind="src" path="gen"/>`。就我而言，它解决了所有问题。

# ruby - 下载文件时如何为文件添加扩展名？

> ID：10075459
> 
> 赞同：0
> 
> 时间：2012-04-09T15:21:57.543
> 
> 标签：ruby, open-uri

这个神奇的 Ruby 脚本从网站下载几个 XML 文件，但这些文件没有扩展名。我想为`.xml`它下载的每个文件添加前缀。

这就是我现在所在的位置，它不起作用：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

URL = 'localhost'
extension = '.xml'

Nokogiri::HTML(open(URL)).xpath("//a/@href").each do |src|
  src = File.join(extension).last
  File.open(File.basename(src),'wb') do |f| 
    f.write(open(src).read)
  end
  puts "Done with: #{URL}"
end 
```

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:26:13.493

的使用`File.join()`是错误的。`.join()`返回一个字符串，然后应用`.last`到它会产生错误，因为没有`.last`String 对象的方法。

```
pry(main)> extension = '.xml'
=> ".xml"
pry(main)> File.join(extension).last
NoMethodError: undefined method `last' for ".xml":String 
```

相反，您需要将要加入的路径元素数组传递到文件的路径中：

```
pry(main)> File.join('.', 'path', 'to', 'a', 'file.ext')
=> "./path/to/a/file.ext" 
```

或者：

```
pry(main)> File.join('/', 'path', 'to', 'a', 'file.ext')
=> "/path/to/a/file.ext" 
```

花时间阅读 Ruby 的[`File`](http://ruby-doc.org/core-1.9.3/File.html)课程。它允许您以完全独立于操作系统的方式处理文件和路径。

在剖析路径时，它`dirname`的`basename`、 和`extname`方法很方便：

```
pry(main)> File.dirname('/path/to/a/file.ext')
=> "/path/to/a"
pry(main)> File.basename('/path/to/a/file.ext')
=> "file.ext"
pry(main)> File.extname('/path/to/a/file.ext')
=> ".ext" 
```

还有`split`一种结合`dirname`and的方法`basename`，返回路径和“filename.ext”，允许您使用并行分配：

```
pry(main)> dirname, filename = File.split('/path/to/a/file.ext')
=> ["/path/to/a", "file.ext"] 
```

`File.basename`采用可选的“扩展”参数，允许它剥离扩展：

```
pry(main)> File.basename('/path/to/a/file.ext', '.ext')
=> "file" 
```

结合所有这些神奇的优点，您可以整天折叠、旋转和破坏您的文件名和路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:40:05.003

我假设`href`您页面链接中的属性包含绝对路径。考虑到这一点，这*应该*有效。

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

base_url = 'localhost'
extension = '.xml'

Nokogiri::HTML(open(base_url)).xpath("//a/@href").each do |src|
  File.open(File.basename(src.value, File.extname(src.value)) + extension,'wb'){ |f| 
    f.write(open(src.value).read)
  }
  puts "Done with: #{URL}"
end 
```

# java - 如何在 Eclipse 中查找哪些类实现了多个接口？

> ID：10075472
> 
> 赞同：10
> 
> 时间：2012-04-09T15:23:22.217
> 
> 标签：java, eclipse, interface

使用 Eclipse，如何找到哪些 Java 类实现了接口 A*和*接口 B？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:57:32.267

我刚刚遇到了同样的问题，我真的很想念 Eclipse 搜索对话框中的这个功能。手动完成所有课程并不是很愉快，所以我使用了这个**讨厌的解决方法**。鉴于这种结构：

```
public interface A {
  public String x();
}
public interface B {
}

public class ImplementsBoth implements A, B {

  @Override
  public String x() {...}

}
public class ImplementsA implements A {

  @Override
  public String x() {...}

}
public class ImplementsB implements B {

} 
```

我将 B 更改为：

```
public interface B {
  public void x();
} 
```

这会导致以下错误`ImplementsBoth`：

> 返回类型与 Bx() 不兼容

现在可以在“问题”视图中单步执行所有这些消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:27:11.323

Ctrl+H，在文件搜索选项卡中搜索“[implements A,B | implements B,A]”，而文件类型为 *.java。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:38:14.727

搜索 -> 文件... ->`public * implements *,*`或其他模式。

# java - 实例化用户定义类型集合的约定是什么？

> ID：10075473
> 
> 赞同：14
> 
> 时间：2012-04-09T15:23:32.400
> 
> 标签：java, list, coding-style, netbeans-7, java-7

我有一个名为 MatchingLine 的课程

```
 public class MatchingLine implements Comparable
     {
        private String matchingLine;
        private int numberOfMatches;

        // constructor...
        // getters and setters...
        // interface method implementation...
     } 
```

我在 ArrayList 中使用这个类，如下所示 -

```
 ArrayList<MatchingLine> matchingLines = new ArrayList<MatchingLine>(); 
```

但是，Netbeans IDE 在此声明旁边放了一条注释并说：

```
 redundant type arguments in new expression (use diamond operator instead) 
```

它建议我使用 -

```
 ArrayList<MatchingLine> matchingLines = new ArrayList<>(); 
```

我一直以为以前的风格是惯例？后一种风格是惯例吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-09T15:24:58.040

```
ArrayList<MatchingLine> matchingLines = new ArrayList<>(); 
```

这是 Java 7 中的一个新特性，称为[`diamond operator`](https://stackoverflow.com/questions/4166966/what-is-the-point-of-the-diamond-operator-in-java-7).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T15:28:34.333

正如 Eng 所说，这是 Java 7 的一个新特性。

它的编译与指定所有类型参数的完全声明的语句没有什么不同。这只是 Java 试图减少您必须输入的所有冗余类型信息的一种方式。

在这样的声明中（仅用于说明；回调最为人所知的是接口）：

```
Callback<ListCell<Client>,ListView<Client>> cb = new 
    Callback<ListCell<Client>,ListView<Client>>(); 
```

读者很清楚这个冗长的声明中的类型是什么。事实上，类型声明过多，使代码的可读性降低。因此，现在编译器能够简单地结合使用类型推断和菱形运算符，让您可以简单地使用：

```
Callback<ListCell<Client>,ListView<Client>> cb = new Callback<>(); 
```

# android - Android相对布局无法使图像居中

> ID：10075475
> 
> 赞同：1
> 
> 时间：2012-04-09T15:23:44.297
> 
> 标签：android, xml, android-layout, android-relativelayout

嗨，我设法使图标中心与线性视图中的文本在同一行，但我想在右侧添加一个箭头图像，所以我必须切换到相对视图。如图所示，我无法将相对视图左图标设置为线性视图。

**编辑**
我想箭头图标留在右边。

![在此处输入图像描述](../Images/8ca1939abf346e2850dd95c6146c771c.png)
左图是线性的，右图是相对的。

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layercontainer"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp">
<ImageView android:id="@+id/categoryIcon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="15dp"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" />
<TextView android:id="@+id/categoryTitle"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@id/categoryIcon"
    android:textStyle="bold"
    android:textSize="22dp"
    android:textColor="#000000"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" />
<ImageView
        android:id="@+id/nextIcon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:45:51.657

我建议使用 TextView 属性[drawableLeft](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3adrawableLeft)和 drawableRight

```
android:drawableLeft="@drawable/whatever"
android:drawableRight="@drawable/arrow"
android:width="fill_parent" 
```

这样并将TextView的重力设置为中心，一切都应该没问题

此外，使用单个 TextView 而不是 RelativeLayout + 3 个视图是对简单性的一大改进。无论如何，如果你坚持使用 3 个视图，使用 LinearLayout 而不是 RelativeLayout 是一个很好的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:46:58.953

为什么不能使用 LinearLayout？

似乎这样会起作用：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/layercontainer" 
    android:orientation="horizontal" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:padding="10dp"> 
    <ImageView android:id="@+id/categoryIcon" 
        android:layout_width="wrap_content" 
        android:layout_height="fill_parent" 
        android:gravity="center_vertical" 
        android:layout_marginRight="15dp" 
        android:layout_marginTop="5dp" 
        android:layout_marginBottom="5dp" /> 
    <TextView android:id="@+id/categoryTitle" 
        android:layout_width="wrap_content" 
        android:layout_height="fill_parent" 
        android:gravity="center_vertical" 
        android:textStyle="bold" 
        android:textSize="22dp" 
        android:textColor="#000000" 
        android:layout_marginTop="5dp" 
        android:layout_marginBottom="5dp" /> 
    <ImageView 
        android:id="@+id/nextIcon" 
        android:layout_width="wrap_content" 
        android:layout_height="fill_parent" 
        android:gravity="center_vertical" 
        android:layout_marginTop="5dp" 
        android:layout_marginBottom="5dp"/> 
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:53:02.777

您应该使用 LinearLayout 以获得简单的 xml 结构

因为`The LinearLayout is the most simple layout available in Android. A LinearLayout organizes layout components in a linear fashion horizontally or vertically`

[创建高效布局](http://developer.android.com/resources/articles/layout-tricks-efficiency.html)说明了 RelativeLayout 和 LinearLayout 的性能：

# php - 显示多列Mysql

> ID：10075476
> 
> 赞同：1
> 
> 时间：2012-04-09T15:23:52.307
> 
> 标签：php, mysql

我目前正在尝试显示成员已上传到我的网站的论文，用户单击一个主题，它会显示该主题下的论文。但是，我的查询只显示了所有论文，而不是具有特定主题的论文。

```
//time to get our info
//time to get our info
$sql = "SELECT paper.title, paper.username, paper.abstract, paper.filelocation FROM `paper`, `topic` WHERE topic_name = 'artificial intelligence' ";
$result = mysql_query($sql);
while($file = mysql_fetch_array($result)){
    echo '<li>';
    echo '<h1>'.$file['title'].'</h1><br />';
    //now the file info and link
    echo '<h3>Uploaded By: '.$file['username'].'</h3><br />';
    echo '<a href="'.$file['filelocation'].'">'.$file['title'].'</a>';
    echo '<h1> Abstract : ' .$file['abstract'].'</h1><br />';
    echo '</li>';
}
?>
</ul 
```

这是我的桌子

paper_id topic_id

话题

topic_id 主题名称

纸

paper_id 标题 用户名 摘要 文件位置

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:25:30.400

您需要将这两个表与链接它们的关键条件连接在一起：

```
SELECT
    paper.title,
    paper.username,
    paper.abstract,
    paper.filelocation
FROM `paper`
INNER JOIN `topic` on `paper`.`topic_id` = `topic`.`topic_id`
WHERE topic_name = 'artificial intelligence' 
```

否则，您将交叉连接两个表，这为您提供了两个表之间的所有可能组合。

# facebook-likebox - URL 在 Facebook 之类的框中不起作用

> ID：10075477
> 
> 赞同：0
> 
> 时间：2012-04-09T15:24:05.130
> 
> 标签：facebook-likebox

我需要在网站中包含一个 facebook likebox，所以我去了[https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/)并使用该向导来启动并运行我的 likebox。当我在 url 字段中输入正确的值[http://www.facebook.com/yurimuc](http://www.facebook.com/yurimuc)时，我收到以下错误消息

“无法检索指定页面的 id。请验证是否传入了正确的 href。”

该网址是真实的并且有效，但在该小部件中不起作用。关于原因的任何想法？

提前致谢，

法里德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:58:00.580

Facebook Like Box 社交插件旨在与 Facebook 页面一起使用，[`yurimuc`](http://www.facebook.com/yurimuc)但它是用户帐户而不是页面。

# iphone - @2x.png 也需要非@2x.png 尺寸？

> ID：10075478
> 
> 赞同：0
> 
> 时间：2012-04-09T15:24:09.910
> 
> 标签：iphone, ios

我只是让我的应用程序被拒绝，愚蠢地我在屏幕抓住确切的措辞之前上传了一个新版本。但这与该应用程序在 iPad 和 iPhone 3g 分辨率上都无法正常运行有关。

所以我的问题是这个。我是否需要为我拥有的每个 @2x 尺寸添加一个按比例缩小的图形？因为它在模拟器和设备上运行得很好......所以我不完全明白。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:25:43.053

很简单，是的，你做到了！如果有的话，@2x 图形是可选的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:28:53.683

**10.3**未正确使用系统提供的项目（如按钮和图标）并按照[Apple iOS 人机界面指南](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)中所述的应用程序可能会被拒绝

# android - 谷歌日历示例应用程序不显示事件

> ID：10075482
> 
> 赞同：0
> 
> 时间：2012-04-09T15:24:23.587
> 
> 标签：android, google-calendar-api, google-api-java-client

我已经从[这里](http://samples.google-api-java-client.googlecode.com/hg/calendar-android-sample/instructions.html)安装了示例日历项目。

当我在模拟器上运行这个应用程序时，我看到三个提要：

1.  联系人的生日和活动
2.  美国假期，和
3.  我的 gmail 帐户

我通过登录我的帐户在我的日历中添加了一些虚拟事件。但我无法从应用程序中看到这些事件。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T22:19:58.160

示例项目不（我相信）包含获取事件的示例代码。

您将不得不使用您自己的一些代码来增强示例项目。

在编写代码时，我建议您查看下一页底部的代码段：

[Google Calendar API V3 事件列表](https://developers.google.com/google-apps/calendar/v3/reference/events/list)

我用过它，它对我来说效果很好。

祝你好运

# ruby-on-rails - 使用 Ajax 更新多个表行

> ID：10075486
> 
> 赞同：0
> 
> 时间：2012-04-09T15:24:34.787
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

我在具有非唯一 ID 的视图中有一个表。我在其中一列中有一个启用 Ajax 的提交按钮，我希望 Ajax 结果更新表中与 id 匹配的所有行。有没有办法做到这一点？我只能让它更新第一次出现的id。
谢谢你的帮助！

这是相关代码；

在我看来，表格代码；

```
<% @gifts.each do |gift| %>

<tr id="<%= gift.parent_id %>">
  <% if gift.key_indicator == "Individual" %>
    <td><%= gift.first_name %> <%= gift.last_name %></td>
  <% else %>
    <td><%= gift.organization_name %></td>
  <% end %>
  <td><%= l gift.gift_date.to_date, :format => :default %></td>
  <td><%= number_to_currency(gift.fund_split_amount) %></td>
  <td><%= if gift.fund_id =~ /\A[Xx]/ then :CND else :US end%></td>
  <td><%= gift.preferred_primary_email_number %></td>
  <td><% if @subscriber_ids.include?(gift.constituent_id) %>
        Yes
      <% else %>
        <%= form_for(@teacher.mailing_list_edits.build(:parent_id => gift.parent_id),remote: true) do |f| %>
            <div><%= f.hidden_field :parent_id %></div>
        <%= f.submit "Add", :class => "btn btn-large btn-primary" %>
        <% end %>
    <% end %>
  </td>
 </tr>
 <% end %> 
```

这是我的 create.js.erb

```
$('#<%= params[:mailing_list_edit][:parent_id] %>').html("foobar") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:06:39.110

继续并更改为

```
<tr id="<%= gift.parent_id %>" class="gift_<%= gift.parent_id %>"> 
```

然后在你的 create.js.erb 中：

```
$('.gift_<%= params[:mailing_list_edit][:parent_id] %>').html("foobar") 
```

这样您就可以访问多个元素（通过使用类），并轻松替换它们。

# image - 在 Matlab 中平均 TIFF 图像？

> ID：10075487
> 
> 赞同：1
> 
> 时间：2012-04-09T15:24:36.353
> 
> 标签：image, matlab, tiff, average

我试图在 Matlab 中平均 8 个 TIFF 图像，但我一直无法得到正确的结果。如果我读取图像并除以固定数字（读取的图像数量），我最终会得到一个非常暗的图像，而不是亮度均匀的“平均图像”。我使用的代码如下：

```
i = 0;
R = 0;
A=imread('1.tif');
B=imread('2.tif');
R = imdivide((imadd(A,B)),2);

for i = 3:8
    TEMP = imadd(R,imread(sprintf('%d.tif' ,i)));
    R = imdivide(TEMP,8);
end

imshow(R);
imwrite(R,'AVG.tif','tif'); 
```

有没有办法解决这个平均方案？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:28:07.807

您的问题是对图像求和会导致溢出（Richante 是正确的，即`imadd`在发生溢出时使用饱和算术）。您需要更改为能够保持总和而不会丢失的数据类型。

例如

```
A = double(imread('1.tif'));

for i = 2:8
    A = A + double(imread(sprintf('%d.tif' ,i)));
end 
```

...

```
R = uint8(A / 8); 
```

当然，您需要转换回原始数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:30:25.320

可能会更好：

```
R = imdivide(imread('1.tif'), 8);
for i = 2:8
    R = imadd(R,imdivide(imread(sprintf('%d.tif' ,i)), 8));
end 
```

这将避免饱和，并以正确的方式添加它们（使用的方式将是平均强烈加权，有利于图像 8）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T19:26:19.357

更简单的是，假设**X** = [X1; X2; X3... X8] 是一个维度为 (rows,columns,8) 的数组，其中：

```
X1 = imread('1.tif');
X1 = double(X1);
...
X = cat(3,X1 X2 X3 X4 X5 X6 X7 X8);
R = mean(X,3); 
```

其中 R 是平均矩阵。

# java - t:datatable 行扩展和使用 ajax 的详细信息

> ID：10075488
> 
> 赞同：0
> 
> 时间：2012-04-09T15:24:47.900
> 
> 标签：java, jsf, datatable, tomahawk

我有一个类似于下面的屏幕截图的视图。这是使用**t:datatable**构建的。

现在，我需要做的是，如果我单击链接**101**，它需要调用 Ajax 并打开这两行之间的更多详细信息。我的意思是在**101**和**102**之间。

是否可以放置这些行 | **t:datatable**中的列？感谢你们的帮助。

![在此处输入图像描述](../Images/22ed6a6f13174341512579445ed4a958.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:11:20.780

从 RichFaces看一看`DataGrid`，它似乎很适合你。

[http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dataGrid&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dataGrid&skin=blueSky)

# java - 如何通过 Java 代码更改包信息？

> ID：10075493
> 
> 赞同：0
> 
> 时间：2012-04-09T15:25:06.087
> 
> 标签：java

在我当前的 Java 项目中，我编写了一个 Java 程序，它将一些 Java 文件从包“fr.inria.arles.pankesh.gen”复制到包“fr.inria.arles.pankesh.impl”。

将 Java 文件从包“fr.inria.arles.pankesh.gen”复制到包“fr.inria.arles.pankesh.impl”后，由于 Java 文件的包信息更改，我的 java 文件出现错误。

我的问题是“当我的程序将 Java 文件从包“fr.inria.arles.pankesh.gen”复制到包“fr.inria.arles”时，是否有任何方法可以更改标头中的包信息（通过 java 代码，而不是手动） .pankesh.impl”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:42:53.920

如果你复制java源文件，你需要

1.  打开源文件。
2.  打开目标文件。
3.  将所有内容从源复制到目标，直到看到`package`关键字。
4.  将 package 关键字复制到目标文件中。
5.  将“正确”的包位置写入目标文件
6.  跳过源文件中“不正确”的包位置
7.  将源文件的其余内容写入目标文件。

请注意，这将正确地“变基”文件的包；但它不会对可能希望在“旧”包中找到该文件的其他文件“重新定位”。要修复这些其他文件（如果它们存在，也许您的项目被设计为没有太多引用，或者您打算复制所有文件），您需要打开项目中的每个文件，在一份`import`声明。如果找到它，则无需*复制*导入，而是复制正确的替换。

当处理一个不会真正“移动”但需要更改的文件时，最好的策略是编写一个临时文件，然后在临时文件完全写入后用临时文件替换原始文件。像这样：

```
(reading) MyClass.java
(writing) .tempMyClass.java
(done writing)
(moving)  .tempMyClass.java to MyClass.java 
```

这使您可以不受许多令人讨厌的项目的限制，例如将文件写入需要读取的位置（这将在您读取之前破坏您需要的信息）。

包`java.io`和类`java.lang.String`具有允许您编写这些工具的所有实用程序，但要详细介绍将是一篇太长的文章。尝试写一点，在网上搜索（如何使用 java 从文件中读取行，如何使用 java 将行写入文件），当你卡住时，发布你已经走了多远和你的具体代码错误或误解，很多人会很乐意提供帮助。

如果您想对已经编译的文件执行此操作，您需要阅读一些 java 类文件格式，找到类名常量字符串，并通过上面类似的过程更改它（除了您将编写二进制字节），或者您可以使用 ASM 之类的库来执行与上述相同的过程（但也许可以避免您在手动操作时可能犯的错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:03:50.197

你可以通过很多努力做到这一点，

1.  解析您的 Java 文件并更新它们（这并不容易，只需考虑`package`您的评论或字符串中何时有单词）。
2.  并且您应该更新所有引用它们的类（这更难，因为您应该更改导入语句，更改完全限定的类名，并将导入语句添加到同一包中的类（因为它们是邻居并且没有导入语句） .

我建议您使用和 IDE（如 Eclipse、Netbeans 或 IDEA）并使用它的重构功能。

# entity-framework - 在不知道实体是否存在的情况下添加或更新实体

> ID：10075495
> 
> 赞同：0
> 
> 时间：2012-04-09T15:25:10.590
> 
> 标签：entity-framework

我有一组实体，我不知道它们是否已经存在于数据库中。如果它们存在 - 我需要更新它们，如果它们不存在 - 我需要添加它们（对于每个实体，它可能是一个或另一个，并且有 10000 个......）

（场景 - 我正在从文件中导入数据，如果我导入同一个文件 - 什么都不会发生，如果文件被更改 - 我需要更新）。

我可以使用 Entity Framework 来实现它，而无需在添加之前搜索每个实体吗？

（如果我想添加 - 我需要使用 AddObject，如果我想修改 - 我需要使用 attach 和 ChangeObjectState）。

有没有办法避免搜索 - 而不是两个选项之一？

（寻找“添加或更新”方式....）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:28:21.733

如果可以使用 DbContext API（EF 4.3 和 EF 5），则可以使用 AddOrUpdate 方法。当您启用迁移时，您将获得显示此方法用法的示例代码，或者您可以在 EF 团队的这篇较早的博客文章中看到一个示例：

[http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-beta-1-automatic-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-beta-1-automatic-migrations-walkthrough.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:29:46.863

不。在 EF 中，您必须知道是否要插入或更新实体 => 如果您不知道，则必须先搜索数据库。您可以通过不使用 EF 并直接使用 SQL 来降低复杂性，但在决定插入或更新之前，您仍然必须搜索实体。在直接 SQL 的情况下，这整个过程可以在单个数据库往返中完成（SQL Server 2008 提供了特殊的命令`MERGE`），而 EF 需要单独的往返进行搜索和单独的往返进行更新或插入。

编辑：另一个性能更好的解决方案是通过某种快速的方式将所有数据提取到数据库中 - 例如由存储过程填充的临时表，带有表值参数或批量插入。在某个处理表中拥有所有记录后，您可以使用 SQL 更新真实表中存在的所有记录并插入所有不存在的记录。

# java - 您可以使用整数值而不是 EnumType.STRING 或 ORDINAL 来保存枚举吗？

> ID：10075496
> 
> 赞同：0
> 
> 时间：2012-04-09T15:25:11.883
> 
> 标签：java, spring, hibernate

我有一个存储枚举字符串值的 mysql 表。

我的模型有注释：

```
@Enumerated(EnumType.STRING) 
```

我的枚举看起来像：

```
public enum SomeEnum {

   BLUE(0),
   YELLOW(1),
   RED(2),

   private int value;

   public SomeEnum(int value) {
     this.value = value;
   }

} 
```

我希望我能以某种方式将枚举的整数“值”存储在我的数据库中，然后当休眠将我的模型加载到 java 类中时，以某种方式再次使用枚举的值将其解析回。

我不想使用序数值，因为它不够稳定。而且我也不想使用 mysql 枚举类型，因为它无缘无故地将我与 mysql 联系在一起。

那么这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:32:57.860

我想你总是可以映射你自己的用户类型： [http ://alenovarini.wikidot.com/mapping-a-custom-type-in​​-hibernate](http://alenovarini.wikidot.com/mapping-a-custom-type-in-hibernate)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:33:09.237

您为什么不尝试使用 int 类型（未枚举）的字段，如果您想从您拥有的 Enum 类型中获取/设置它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T00:53:29.753

似乎有可能。尝试了以下提示：[http](http://blog.tamashumi.com/2013/06/grails-enum-custom-database-value.html) ://blog.tamashumi.com/2013/06/grails-enum-custom-database-value.html并且似乎正在工作：

```
enum DayTime {
    Morning(0),Noon(1),AfterNoon(2),Night(3)
    final int id
    private DayTime(int id) { this.id = id }
} 
```

然后在您的域类中：

```
DayTime dayTime 
```

# excel - Excel VBA表格滞后

> ID：10075500
> 
> 赞同：1
> 
> 时间：2012-04-09T15:25:21.370
> 
> 标签：excel, vba

我正在创建一个 excel 应用程序，当用户转到特定工作表时，它将打开一个用户表单。当用户单击此工作表时，将出现该表单。但是，我不希望用户能够看到工作表中的内容。我只是希望它在没有滞后的情况下打开或已经加载到该表中。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:47:52.507

以下内容尽可能接近您所寻求的。

我创建了一个默认名称为`UserForm1`. 我已将以下代码包含在`ThisWorkbook`.

如果用户单击“Sheet2”选项卡，代码会加载`UserForm1`、最大化并显示它。退出表单时，代码切换到“Sheet3”。

这与您的规范不完全匹配，因为您可以在表单出现之前的几分之一秒内看到“Sheet2”。我试过预加载表格。我已尝试在 SheetDeactivate 事件例程中关闭屏幕更新，并且在退出 SheetActivate 事件例程之前不会再次打开它。但是我尝试过的任何事情都无法阻止那短暂的闪光。

试试这个代码并确定它足够好。

```
Private Sub Workbook_SheetActivate(ByVal Sh As Object)

  If Sh.Name = "Sheet2" Then
    Load UserForm1
    With UserForm1
      .Width = Application.Width
      .Height = Application.Height
      .Show
    End With
    Application.EnableEvents = False    ' Surpress SheetActivate event
    Worksheets("Sheet3").Activate
    Application.EnableEvents = True
  End If

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T16:52:05.810

您可以先隐藏工作表中的所有单元格：

```
Worksheets("Sheet3").Cells.EntireRow.Hidden = True
Worksheets("Sheet3").Cells.EntireColumn.Hidden = True
MyUserForm.Show 'You can show modally here if you like 
```

当您准备好再次向用户显示内容时，您可以使用：

```
MyUserForm.Hide
Worksheets("Sheet3").Cells.EntireRow.Hidden = False
Worksheets("Sheet3").Cells.EntireColumn.Hidden = False 
```

这里的优点是您不会在此过程中丢失行和列的高度和宽度 - 它们会完全恢复到原始格式。

看起来像这样： ![在此处输入图像描述](../Images/56554c4959e5a20534734d0f865c972e.png)

# c# - Silverlight 布局 - 一次一个面板

> ID：10075502
> 
> 赞同：0
> 
> 时间：2012-04-09T15:25:24.303
> 
> 标签：c#, silverlight, panel

在silverlight 中，让一堆容器充满控件并且一次只显示一个容器的最佳方式是什么，这也是MVVM 模式友好的。我记得Winforms中有一些东西可以做类似的事情，但我想知道silverlight或工具包中是否有任何东西？

```
 -------------------------------------------
   |                     View                 |
   |
   |    Containers:
   | 
   |     -----   -----   -----   -----
   |     |   |   |   |   |   |   |   |
   |     |   |   |   |   |   |   |   |
   |     -----   -----   -----   -----
   |    
   |               ^
   |               |
   |            currently
   |             active              
   |------------------------------------------| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:19:45.863

我相信有很多方法可以实现你想要的。

样式化的 TabControl 是一种方式。

这将是另一个：

```
<Grid>
    <Grid Visibility="{Binding Panel1Visibility}">
        ... contents
    </Grid>
    <Grid Visibility="{Binding Panel2Visibility}">
        ... contents            
    </Grid>
    ... etc
</Grid> 
```

您将有许多重叠的元素，这里是网格，但它们可以是任何东西。将 Visibility 绑定到各个 Visibility 属性。或者有一个 VisibilityProperty 和一个转换器，比如

```
<Grid>
    <Grid Visibility="{Binding VisiblePanelNo, 
          Converter={StaticResource PanelVisibilityConverter}, ConverterParameter=1}">

    </Grid>
    <Grid Visibility="{Binding VisiblePanelNo, 
          Converter={StaticResource PanelVisibilityConverter}, ConverterParameter=2}">
    </Grid>
    ... etc
</Grid> 
```

# javascript - JavaScript 路由给你带来了什么？

> ID：10075507
> 
> 赞同：25
> 
> 时间：2012-04-09T15:25:38.403
> 
> 标签：javascript, asp.net, url-routing

我一直在研究各种 RIA，并注意到有些人使用或请求**[JavaScript Routing](https://stackoverflow.com/questions/6566360/javascript-clientside-routing-pathing-library)**。只是浏览一下“JavaScript 路由”看起来像是一种遍历您的网站的方式......但我可以使用一个简单的链接。这意味着我绝对“不明白”。

**所以...**

*   路由为您提供了常规锚点或链接没有的什么？
*   它仅适用于某些环境吗？（即 ASP.NET 或直接 HTML）
*   它是干什么用的？
*   什么目的推动了它的存在？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-09T16:13:28.887

路由是一种组织和管理应用程序状态的方式。JavaScript 中的路由框架可帮助您更改应用程序的状态——也许从一个管理面板部分移动到另一个管理面板部分——同时保持*应用程序的持久性*。

如果您想从一个应用程序状态（例如`/admin/users`）导航到另一个应用程序状态（例如 ）`/admin/orders`，您可以按照您的建议使用普通链接。但随后您将导致浏览器从一个 HTML 页面导航到另一个 HTML 页面。显然，这是人们在 Web 上导航的正常方式。但是在 JavaScript 应用程序中，这是非常低效的！

如果您在 JavaScript 中运行一个复杂的浏览器内应用程序，那么该应用程序在启动时需要做很多工作。它注册事件处理程序，加载和执行一堆 JavaScript，有时动态呈现整个页面界面（在 ExtJS 和其他一些库的情况下）。浏览器需要做很多额外的工作来设置一个 JavaScript 应用程序，`/admin/orders`它与`/admin/users`. 更有效的方法是让链接触发应用程序监视的事件，并让应用程序通过更改应用程序的状态来响应——可能通过删除或隐藏用户视图并将其替换为订单视图。路由是一种表示这些不同接口的方式，使用一个令牌——通常是一个 URL 片段，如`/admin/users`--跟踪用户在您的界面中的位置。

这允许应用程序维护已经消耗时间并使用内存创建的动态对象模型。它使用户界面响应更快，并且，如果您通过主题标签或 pushState 使用 URL 历史管理，它允许用户使用浏览器的后退和前进按钮在您的应用程序中导航，而无需重新加载每次页面并擦除您的应用程序状态。URL 管理还允许深度链接到应用程序中的某些页面：加载时，应用程序的路由器检查它接收到的路由字符串，对其进行标记，并加载您在路由表中指定的接口。

*管理持久性不需要*路由，但它是组织持久性状态的好方法。通常，路由系统与 URL 历史管理密切相关，例如 Davis.js。但也有一些路由库不会与 URI 混淆，它们维护一个抽象的标记化状态，您可以使用或显示您认为合适的状态，例如[Crossroads.js](http://millermedeiros.github.com/crossroads.js/)。

# excel - 使用 POI EventModel 读取 Excel 文件

> ID：10075509
> 
> 赞同：1
> 
> 时间：2012-04-09T15:25:40.743
> 
> 标签：excel, apache-poi

我想使用 Apache POI 的 HSSF EventModel 读取 Excel 文件（.xls 格式）。我的 excel 表是一个没有宏的简单 excel 文件。只是想知道我必须处理哪些类型的记录。

以下是excel文件中的数据类型：-

```
 1\. String
    2\. Boolean
    3\. Number
    4\. Date. 
```

我找到了这些 BoolErr,Blank,Number。让我知道我还需要处理哪些记录。

谢谢斯里尼瓦桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:58:20.770

如果您希望数字和日期像在 Excel 中一样显示，那么您需要所有单元格格式信息。这是因为数字和日期单元格的存储方式相同，因为浮点数每条记录一个单元格（除了在 MulRks 周围的一些特殊情况下），并且只有格式规则告诉您它是日期还是数字和如何显示它们。

我建议您查看两个使用 HSSF 事件模型基于事件提取 .xls 文件的优秀示例。第一个是 POI 本身，提供纯文本输出的[EventBasedExcelExtractor 。](http://svn.apache.org/repos/asf/poi/trunk/src/java/org/apache/poi/hssf/extractor/EventBasedExcelExtractor.java)第二个是 Apache Tika，[ExcelExtractor](http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ExcelExtractor.java)，它提供了一个 XHTML 版本

在两者中，您将看到仅注册和处理少数 Record SID 的代码，您还将看到它们的用途。您还将了解如何在使用事件模型时访问 POI 的格式化代码，您需要使用它来使您的数字和日期看起来正确。

您可能还想查看另一个 POI 示例[XLS2CSVmra](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/hssf/eventusermodel/examples/XLS2CSVmra.java)，它显示了如何处理未使用的行和单元格通常不会出现在 Excel 文件中的事实。对于文本提取这不是问题，但对于 CSV 导出之类的事情，知道缺少单元格或行，以及有多少是关键！

# c++ - Win32环境下从ntdll.dll调用Nt函数，C++

> ID：10075514
> 
> 赞同：5
> 
> 时间：2012-04-09T15:26:02.073
> 
> 标签：c++, winapi, native, function-call, ntdll

我想从 ntdll.dll 调用一些 Nt 函数，我正在像上面那样做。

对于调用： NtTestAlert() ，您需要典型的 ntcall 内核例程，可通过 int 2Eh 访问。（从这里我得到了 Nt 函数[http://undocumented.ntinternals.net/](http://undocumented.ntinternals.net/)）

代码也未完成，我得到：

*错误C2664：'_ *ntcall'：无法将参数1从'int'转换为'MESS（* _stdcall *）'*

```
#include <iostream>
#include <windows.h>
#include <Ntsecapi.h>

using namespace std;

typedef int(__stdcall MESS)(unsigned int);

void __ntcall(MESS *msg)
{
    __asm
    {
        int 2Eh;
    }
}

int main(void)
{
    MESS *me = 0;
    int result = 0;

    HINSTANCE__ *hModule= LoadLibrary(L"C:\\Windows\\System32\\ntdll.dll");

    if(hModule != 0)
    {
        me = (MESS*)GetProcAddress(hModule, "NtTestAlert");

        if(me != 0)
        {
            unsigned int type = 1;

            result = (__ntcall((*me)(type)));
        }
        else
        {
            cout << "Error Load function!" << endl;
        }

        FreeLibrary(hModule);
    }
    else
    {
        cout << "Error load Dll!" << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T15:29:48.023

您只需调用您检索其指针的函数。这`int 2Eh`是一种旧的（自 XP SP2 以来已过时）进行系统调用的方法。当调用（仅通过正常方式）一个 NTDLL 函数时，这就是下面发生的事情。你不需要关心那个。

旁注：您似乎混淆了更多概念。`NtTestAlert`不带参数。

```
NTSYSAPI NTSTATUS NTAPI NtTestAlert(); 
```

所以这将转化为（你的`MESS`类型）：

```
typedef NTSTATUS(__stdcall *TFNNtTestAlert)(); 
```

一个基于你的例子：

```
#include <iostream>
#include <windows.h>
#include <tchar.h>
#include <Ntsecapi.h>

using namespace std;

typedef NTSTATUS (__stdcall *TFNNtTestAlert)();
// NTSTATUS is LONG, in case that isn't defined in the above headers

int main(void)
{
    HMODULE hModule=GetModuleHandle(TEXT("ntdll.dll"));

    if(hModule != 0)
    {
        TFNNtTestAlert pfnNtTestAlert = (TFNNtTestAlert)GetProcAddress(hModule, "NtTestAlert");

        if(pfnNtTestAlert != 0)
        {
            result = pfnNtTestAlert();
        }
        else
        {
            cout << "Error Load function!" << endl;
            return 1;
        }
    }
    else
    {
        cout << "Error load Dll!" << endl;
        return 2;
    }

    return 0;
} 
```

**系统调用机制：**

Windows 中的系统调用机制在`int 2Eh`某些时候（现在`sysenter`）用于传递用户模式堆栈上的参数、系统调用的索引，然后调用调度程序。然后，这会将线程转换为内核模式，在内核模式中检查来自用户模式堆栈的参数，然后继续处理。这是一个非常粗略的大纲。我建议你阅读 Gary Nebbett 关于这个主题的书。

# css - 根据窗口宽度调整 div

> ID：10075524
> 
> 赞同：69
> 
> 时间：2012-04-09T15:26:38.497
> 
> 标签：css, positioning

我有一个奇怪的问题。在我的页面上，我有一张位于某个重型星云中的行星的主要图像。我已经设置好了，最小宽度是 1000 像素，最大宽度是 1500 像素。我的侧面逐渐消失，这在更大的屏幕上看起来很棒。我想做的是，例如，当您在移动设备上查看它时，它会在 1000 像素处截断宽度，我希望图像说 1300 像素宽，居中并截断 150 像素关闭每一侧，因此您根本看不到淡出，但仍然可以放大，如果窗口的宽度变大，就像大型 iMac 一样，并且一旦超过 1300 像素宽度，淡出就会再次可见。

我最初的想法是在两边做一些负边距的事情，但是在保持最大和混合宽度的同时我无法让它工作。

这是页面中的特定代码部分，虽然 html 和 css 就在那里供所有人查看，但您可以使用 fine 命令找到该 div ID 以供进一步查看。

```
<div style="position:relative;width:100%;">
   <div id="help" style="
      position:relative;
      z-index:1;
      height:100%;
      min-width: 1000px;
      max-width: 1500px;
      margin: 0 auto;
   ">
      <img src="http://i.stack.imgur.com/tFshX.jpg" border="0" style="width:100%;">
   </div>
</div> 
```

对此有任何想法，它非常接近我想要的工作方式，只需要稍作调整。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2016-02-06T03:43:01.547

**CSS 的视口单位**

```
1vw = 1% of viewport width
1vh = 1% of viewport height 
```

这样，您不必编写许多不同的媒体查询或 javascript。

**如果你更喜欢 JS**

```
window.innerWidth;
window.innerHeight; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-03T22:53:59.947

# [现场演示](http://jsfiddle.net/uCA5F/show/)

这是您所描述的实际实现。我使用最新的最佳实践来重写你的代码。如果您在 下调整浏览器窗口的大小`1000px`，图像的左侧和右侧将使用负边距进行裁剪，并且会`300px`更窄。

```
<style>
   .container {
      position: relative;
      width: 100%;
   }

   .bg {
      position:relative;
      z-index: 1;
      height: 100%;
      min-width: 1000px;
      max-width: 1500px;
      margin: 0 auto;
   }

   .nebula {
      width: 100%;
   }

   @media screen and (max-width: 1000px) {
      .nebula {
         width: 100%;
         overflow: hidden;
         margin: 0 -150px 0 -150px;
      }
   }
</style>

<div class="container">
   <div class="bg">
      <img src="http://i.stack.imgur.com/tFshX.jpg" class="nebula">
   </div>
</div> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-09T15:33:20.763

尝试绝对定位：

```
<div style="position:relative;width:100%;">
    <div id="help" style="
    position:absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index:1;">
        <img src="/portfolio/space_1_header.png" border="0" style="width:100%;">
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-09T17:18:43.440

一个很好的技巧是使用内部盒子阴影，让它为你做所有的淡入淡出，而不是把它应用到图像上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-16T18:07:24.457

```
html, body {
    height: 100%;
    width: 100%;
}

html {
    display: table;
    margin: auto;
}

body {
    padding-top: 50px;
    display: table-cell;
}

div {
    margin: auto;
} 
```

这将居中对齐对象，然后居中对齐其中的项目以居中对齐具有不同宽度的多个对象。

[示例图片](https://i.stack.imgur.com/vvZy8.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-30T10:08:48.753

另一个简单的技巧是设置最大宽度并将宽度设置为 100%：

```
.container{
max-width: 1500px; //(max of your screen/big screen)
width: 100%; // important for responsive;
overflow: scroll; 
```

# ios - UIScrollView 在视图出现之前不会接受子视图

> ID：10075525
> 
> 赞同：0
> 
> 时间：2012-04-09T15:26:38.860
> 
> 标签：ios, uiscrollview, viewwillappear

有一个带有 UIScrollView 的视图控制器。此视图控制器在应用程序启动时创建/加载。在看到控制器之前，尝试将子视图添加到滚动视图并且滚动视图不会接受/添加子视图。一旦调用了 ViewWillAppear，就可以很好地添加子视图。它运行完全相同的代码，但在调用查看一次之前不会添加子视图。

造成这种情况的原因是什么？我认为这是按设计的....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:30:19.523

您应该能够在 viewDidLoad 期间插入您的子视图：如果控制器的视图出口都正常。（这比 viewWillAppear: 早一点，并且是一个有效的视图对象**应该**首先可用的地方。）

# jquery - 多个ajax请求完成后触发回调

> ID：10075526
> 
> 赞同：9
> 
> 时间：2012-04-09T15:26:44.897
> 
> 标签：jquery, ajax, callback

```
loadInfo: function(){
    var jsonCounter = 0,
    room = ['room1','room2','room3'],
    dates = [],
    prices = []

    $.each(booking.rooms, function(key, room_name) {
        $.getJSON('/get_info.php?room='+room_name, function(data) {
            dates[room_name] = data
            jsonCounter++
        })
        $.getJSON('/get_info.php?room='+room_name+'&prices', function(data) {
            prices[room_name] = data
            jsonCounter++
        })

    })

    function checkIfReady() {
        if (jsonCounter === rooms.length * 2) {
            clearInterval(timer)
            run_the_rest_of_the_app()
        }
    }

    var timer = setInterval(checkIfReady, 100)

} 
```

（修改了很多，因为它是类等的一部分等）

目前这感觉有点骇人听闻，因为计时器的使用似乎很垃圾。我会使用 $.when 和 $.done，但我不知道可能有多少个房间，所以我不知道什么时候放什么。

如何确保 run_the_rest_of_the_app() 仅在所有 AJAX 请求返回后才被调用？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T15:29:56.533

*   `var activeAJAX = 0;`

*   在进行 AJAX 调用之前，`activeAJAX++;`

*   完成 AJAX 调用后（在回调中）：`if (--activeAJAX == 0) { allDone(); }`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T15:37:33.340

这是何时/完成的使用方法

```
loadInfo: function(){
    var room = ['room1','room2','room3'],
    dates = [],
    prices = [],
    requests = [];

    $.each(booking.rooms, function(key, room_name) {
        var aRequest;

        aRequest = $.getJSON('/get_info.php?room='+room_name, function(data) {
            dates[room_name] = data;
        });
        requests.push(aRequest);

        aRequest = $.getJSON('/get_info.php?room='+room_name+'&prices', function(data) {
            prices[room_name] = data;
        });
        requests.push(aRequest);

    })

    $.when.apply($, requests).done(run_the_rest_of_the_app);
} 
```

# iphone - 来自服务器的 UIimage 通过 JSON 在 uitableview 中加载缓慢

> ID：10075534
> 
> 赞同：0
> 
> 时间：2012-04-09T15:27:30.570
> 
> 标签：iphone, uitableview

```
 The uitableview view gets slow while receiving images from server through Json 
```

` -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

```
 NSString* CellIdentifier = [NSString stringWithFormat:@"Cell%d",indexPath.row];
    UITableViewCellFixed *cell = (UITableViewCellFixed *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCellFixed alloc] initWithStyle:UITableViewCellStyleSubtitle 
                                            reuseIdentifier:CellIdentifier] autorelease];;
    }

   NSURL *url = [NSURL URLWithString:[dict objectForKey:@"allfeeds3"]];
    NSData *data = [[NSData alloc] initWithContentsOfURL:url];
 // cell.imageView.image = [UIImage imageWithData:data];
    UIImage *tmpImage = [[UIImage alloc] initWithData:data];
    cell.imageView.image = tmpImage;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:25:11.283

我敢肯定，以前也有人问过同样的问题，而且很可能是你问过的，因为代码非常相似。

每次数据源向其委托请求一个单元时，您都在创建一个新单元。这行代码：

```
 NSString* CellIdentifier = [NSString stringWithFormat:@"Cell%d",indexPath.row]; 
```

导致每次都创建一个新单元格。如果每个单元格都相同（在布局方面，而不是内容方面），则使用单个静态 NSString 作为重用标识符。这样，tableview 将尝试从其队列中拉出一个可重用的单元格，而不是每次都创建一个。

此外，您似乎只是想在主线程上下载数据。并且即使单元格确实被重用，您也分配/初始化一个新的 UIImageView。您需要继承 UITableViewCell 并在 layoutSubviews 中设置 UIImageView，或者从 nib 加载它。需要重新考虑您对此的整个方法。小心。

# user-interface - 如何使用dojo开发一个简单的UI设计师？

> ID：10075536
> 
> 赞同：2
> 
> 时间：2012-04-09T15:27:47.960
> 
> 标签：user-interface, dojo, editor

我想使用 dojo 构建简单的 UI 设计器，但需要一些关于我应该从哪里开始的指导/建议。

基本上我想做的是：

我有一些预定义的 UI 组件（一些 dijits）可以放入页面画布中。页面可以预先布局为两列或三列。用户可以选择一个 dijit 并将其放入页面中。他可以移动 dijit，通过拖动处理程序调整其大小，也可以将其放置到页面中的其他位置。

因此，作为总结，我需要开发两件事：1）一个 UI 调色板，用户可以在其中查看所有可用的 dijit。并将其拖放到页面中。2）一个页面画布，可以放入dijit。用户可以在页面周围移动 dijit 或调整它们的大小。

我需要一些关于我应该从哪里开始的建议，以及我可以从 dojo 或一些有用的开源项目中利用哪些功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:56:57.260

您还可以查看开源 Maqetta 项目，这是一个用于构建 dojo UI 的 WYSIWYG 编辑器。它在这里可用：

[http://maqetta.org/](http://maqetta.org/)

如果您想了解更多关于它是如何工作的，源代码是可用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:18:58.987

我用图形工作流编辑器做了类似的事情。左侧的状态可以拖放到画布上。用户可以操纵它们等。

以下是我的建议：

使用 Store 来保存代表表单布局的所有数据。

*   您应该记录将要使用的数据模型。
*   这是您发送回服务器的数据。
*   根据存储中的数据实例化小部件。
*   当用户修改数据时，更新存储。
*   当 store 中的数据发生变化时，使用 Observable 模式得到通知，并更新小部件

[http://dojotoolkit.org/reference-guide/1.7/dojo/store.html](http://dojotoolkit.org/reference-guide/1.7/dojo/store.html)

利用 Dojo 的拖放功能。 [http://dojotoolkit.org/reference-guide/1.7/dojo/dnd.html](http://dojotoolkit.org/reference-guide/1.7/dojo/dnd.html)

如果可以的话，我会尽量避免使用 dojo/gfx (SVG)。它会增加很多复杂性。 [http://dojotoolkit.org/reference-guide/1.7/dojox/gfx.html#dojox-gfx](http://dojotoolkit.org/reference-guide/1.7/dojox/gfx.html#dojox-gfx)

您可以调查 Dojox MVC 代码。我没有看过这段代码，所以我没有意见。 [http://dojotoolkit.org/reference-guide/1.7/dojox/mvc.html#dojox-mvc](http://dojotoolkit.org/reference-guide/1.7/dojox/mvc.html#dojox-mvc)

# ssl - 如何在 JBoss 7 上设置有效的 SSL

> ID：10075539
> 
> 赞同：0
> 
> 时间：2012-04-09T15:28:05.653
> 
> 标签：ssl, jboss

我们收到了有效的 ssl 证书。我们在我们的网站上实施它时遇到了问题。JBoss 部署得很好，只是当我们访问该站点时，它会弹出一个警告（如预期的那样），并且它显示它是一个“自签名证书”，而它应该是一个有效的证书。我们在 JBoss 7 独立 xml 中有这个

```
<connector name="https" protocol="HTTP/1.1" scheme="https" socket-binding="https" enablelookups="false" secure="true">
  <ssl name="helloworld" password="password" certificate-key-file="/ckf" protocol="TLSv1" verify-client="true" certificate-file="/root/certificates/helloworld.com.crt"/>
</connector> 
```

# c# - GridView：无法从 gridview 将值插入另一个数据库

> ID：10075547
> 
> 赞同：1
> 
> 时间：2012-04-09T15:28:35.380
> 
> 标签：c#, asp.net, sql

我正在尝试将值从 gridview 插入数据库，但出现错误：这是我的设计： http: [//pastebin.com/vEm3ciPU](http://pastebin.com/vEm3ciPU)

我越来越

> “从字符串转换日期和/或时间时转换失败。” “第 32 行：dataCommand.ExecuteNonQuery();”

我能做些什么？谢谢，我正在使用gridview 和sqldatasource 将数据表绑定到gridview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:33:11.770

替换以下

```
dataCommand.Parameters.AddWithValue("Name", e.OldValues[0]); 
dataCommand.Parameters.AddWithValue("Value", e.OldValues[2]); 
dataCommand.Parameters.AddWithValue("Total", e.OldValues[3]); 
dataCommand.Parameters.AddWithValue("Date", e.OldValues[4]); 
```

> 跟随

```
dataCommand.Parameters.AddWithValue("Name", e.OldValues[0]); 
dataCommand.Parameters.AddWithValue("Value", e.OldValues[1]); 
dataCommand.Parameters.AddWithValue("Total", e.OldValues[2]); 
DateTime dt; 
if (DateTime.TryParse(e.OldValues[3].ToString(), out dt)) 
    dataCommand.Parameters.AddWithValue("Date", dt); 
else
    dataCommand.Parameters.AddWithValue("Date", DateTime.Now); 
```

* * *

我假设下面提到的模式。

![在此处输入图像描述](../Images/d24860940452051c4e72dff04a653262.png)

# asp.net-mvc - Razor at-sign 变量的使用

> ID：10075549
> 
> 赞同：2
> 
> 时间：2012-04-09T15:28:38.970
> 
> 标签：asp.net-mvc, razor, at-command

如何在 Razor 模板中使用带符号 (@) 的变量。例子：

更新：

```
@ {
var rng = Enumerable.Range(1, 3);
var @string = new string[] { "one", "two", "three" };
}

<ul>
@foreach(var i in rng) {
  <li>
    @(@string[i])
  </li>
}
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:32:51.963

如果用括号括住变量名，它应该可以工作。所以：

```
@(@string) 
```

# html - 考虑显示器之间的色差

> ID：10075551
> 
> 赞同：4
> 
> 时间：2012-04-09T15:28:40.647
> 
> 标签：html, css, colors

我不确定这个问题是否有另一个类别，所以如果你觉得在其他地方合适，请把它移到其他地方。

* * *

我的网站上有一个微妙的灰色边框。对我来说，它在我的屏幕上看起来不错。但是，我在朋友家和图书馆的其他屏幕上对其进行了测试，通常它看起来要么太暗（使它看起来很难看）要么太亮（使它几乎不可见）。

我正在使用 HTML/CSS。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:03:56.613

您可以校准您的显示器，但*您**永远不**知道其他人如何看待您的网站*。两个要点是：

1.  您不知道您的观众的显示器有多好（或差），以及它们是否经过适当校准。
2.  您不知道您的所有观众是否都有完美的视觉，因此他们可以检测到细微的颜色变化（如果显示器能够首先显示这些变化）。此外，您网站的某些访问者可能以某种方式存在色盲。

如果我们假设人们至少有一些像样的（未校准的）显示器，我们可以通过评估我们网站的颜色对比度来检查网站的可读性和可访问性。你不应该使用细微的颜色变化来改变你网站文本的语义——必须考虑到显示器不佳和/或视力不佳。

用于展示照片或艺术品的视觉网站是另一回事。不确定您是否想通过细微的颜色变化给每个人留下深刻印象，或者您是否知道您的观众是一类拥有出色显示器的人。我猜不是，因为您使用随机计算机测试了您的颜色选择：这就是人们如何随机看到您的网站，一个接一个（不考虑视力）。

只是谷歌例如“颜色对比度分析仪”。下面是几个随机命中。

*   [http://www.paciellogroup.com/resources/contrast-analysisr.html](http://www.paciellogroup.com/resources/contrast-analyser.html)
*   [http://juicystudio.com/services/luminositycontrastratio.php](http://juicystudio.com/services/luminositycontrastratio.php)
*   [http://juicystudio.com/article/colour-contrast-analysisr-firefox-extension.php](http://juicystudio.com/article/colour-contrast-analyser-firefox-extension.php)

和一篇文章。

*   [http://www.456bereastreet.com/archive/200709/10_colour_contrast_checking_tools_to_improve_the_accessibility_of_your_design/](http://www.456bereastreet.com/archive/200709/10_colour_contrast_checking_tools_to_improve_the_accessibility_of_your_design/)

还有一些让我们想起色盲人的东西。

*   [http://colorfilter.wickline.org/](http://colorfilter.wickline.org/)
*   [http://www.vischeck.com/vischeck/vischeckImage.php](http://www.vischeck.com/vischeck/vischeckImage.php)
*   [http://snook.ca/technical/colour_contrast/colour.html](http://snook.ca/technical/colour_contrast/colour.html)

这很重要，所以我再说一遍：您永远不知道人们如何看待您的网站。您只需要确保所有内容都是可读且可访问的。

如果您担心其他人的显示器，您可以向他们提供链接或测试图像，以便他们查看他们的显示器是否能够显示细微的颜色变化。例如，[Dpreview](http://www.dpreview.com/previews/canoneos5dmarkiii/)在每个评论页面上都有一个测试图像。这对于技术网站是可以接受的，但它可能会破坏艺术网站的用户体验。测试图像的想法可以从[Lagom 的](http://www.lagom.nl/lcd-test/)页面中找到。所有这些都有助于增强网站的艺术体验——即用户知道他看到了艺术品中最深的黑色，而不仅仅是应该有颜色变化的纯黑色——但实际（文本）信息应该始终清晰可见（对比度文字和背景之间的比例必须足够）。参见例如：

*   [http://colorusage.arc.nasa.gov/blue_2.php](http://colorusage.arc.nasa.gov/blue_2.php)
*   [http://www.bestwebimage.com/archives/blue-text-on-black-background-bet-on-complaints/](http://www.bestwebimage.com/archives/blue-text-on-black-background-bet-on-complaints/)

只是为了好玩。测试自己：

*   [http://colorvisiontesting.com/online%20test.htm](http://colorvisiontesting.com/online%20test.htm)
*   [http://colorvisiontesting.com/ishihara.htm](http://colorvisiontesting.com/ishihara.htm)
*   [http://www.opticien-lentilles.com/daltonien_beta/new_test_daltonien.php](http://www.opticien-lentilles.com/daltonien_beta/new_test_daltonien.php)

谷歌“色盲测试”了解更多。

可访问性是另一个主题（除了颜色谈话）。对于需要为使用屏幕阅读器等的人编写网站代码的人来说，很少有额外的链接。（顺便说一句，据我了解，在美国政府网站必须符合第 508 节：[http](http://www.section508.gov/) ://www.section508.gov/ 。没有这样的事情在芬兰，我们的公共部门网站吸了很多时间，而不仅仅是可访问性......）

*   Web 可访问性验证：[http ://www.cynthiasays.com/](http://www.cynthiasays.com/)
*   [http://www.accessifyforum.com/](http://www.accessifyforum.com/)
*   [http://lists.w3.org/Archives/Public/w3c-wai-ig/](http://lists.w3.org/Archives/Public/w3c-wai-ig/)
*   Windows 屏幕阅读软件（Mac 使用 VoiceOver）：[http ://www.freedomscientific.com/products/fs/jaws-product-page.asp](http://www.freedomscientific.com/products/fs/jaws-product-page.asp)

最后的想法。将内容与演示分开是（几乎）一切的关键。不要使用表格进行布局，不要使用内联 HTML 样式：使用 CSS。编写有效的 HTML 代码，不要使用弹出窗口和花哨的效果。至少不要依赖它们（并且规则总是有例外......）。牢记优雅降级：[http ://accessites.org/site/2007/02/graceful-degradation-progressive-enhancement/](http://accessites.org/site/2007/02/graceful-degradation-progressive-enhancement/)

抱歉（几乎是题外话）更新咆哮。让我们不要设计很酷的网页，让我们确保内容对每个人都可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:31:39.630

据我了解，当专业人士进行对色彩敏感的工作时，他们必须校准他们的显示器，这样他们才能确定他们所看到的。除非您可以追踪您在特定操作系统或浏览器上看到的颜色差异，否则我认为您无能为力（除非您想让用户进行浏览器内校准并动态调整颜色！） .

# hibernate - Hibernate 一对一映射

> ID：10075552
> 
> 赞同：0
> 
> 时间：2012-04-09T15:28:41.980
> 
> 标签：hibernate, jakarta-ee, nhibernate-mapping, hibernate-mapping

我在休眠一对一映射中遇到问题。谷歌了很多，但无法解决。

这里是数据库

[![](../Images/9d0f322d29e9e9609b0315a36ffe722a.png)](https://www.freeimagehosting.net/)

**以下是我的模型类**。

公共类用户{

```
private int userId;
private String userName;
private Address address;

public Address getAddress() {
    return address;
}
public void setAddress(Address address) {
    this.address = address;
}
public int getUserId() {
    return userId;
}
public void setUserId(int userId) {
    this.userId = userId;
}

public String getUserName() {
    return userName;
}
public void setUserName(String userName) {
    this.userName = userName;
} 
```

}

和

公共类地址{

```
private int addrId;
private String addr;

public int getAddrId() {
    return addrId;
}
public void setAddrId(int addrId) {
    this.addrId = addrId;
}
public String getAddr() {
    return addr;
}
public void setAddr(String addr) {
    this.addr = addr;
} 
```

}

**user.hbm.xml**如下：

```
<class name="User" table="users" schema="dbo" catalog="test">
      <id name="userId" type="int" column="userId" >
        <generator class="assigned"/>
      </id>

      <property name="userName">
         <column name="userName" />
      </property>

      <one-to-one name="address" property-ref="addrId"  class="Address" cascade="all" />

  </class> 
```

address.hbm.xml 如下，

```
<class name="ammar.Address" table="Address" schema="dbo" catalog="test">

      <id name="addrId" type="int" column="AddrID" >
        <generator class="assigned"/>
      </id>

      <property name="addr">
         <column name="Addr" />
      </property>

  </class> 
```

*运行时出现以下异常：*

线程“主”org.hibernate.HibernateException 中的异常：无法解析属性：addrId

无需映射即可正常运行。但应用映射时无法检索记录。

***hibernate 打印的查询在 DB 中运行得非常好。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:57:41.803

在 user.hbm.xml 中`property-ref="addrId"`应该是`property-ref="userId"`因为 property-ref 是在谈论如何将 Address 连接到 User，而不是相反，这是令人困惑的。您可以省略 property-ref，因为没有它 Address 将通过指向主键的外键找到用户。[文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)说“如果未指定，则使用关联类的主键”（第 5.1.13 节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:06:55.430

我认为这与`int`价值观无关……我认为它们必须是`Integer`……

你可以这样改变吗？：

```
private int addrId; 
```

进入

```
private Integer addrId; 
```

等等所有`int`变量...

# controller - 如何在 Kohana 3.2 中为此目录结构创建路由：/application/my_use_case/classes/

> ID：10075558
> 
> 赞同：0
> 
> 时间：2012-04-09T15:28:57.197
> 
> 标签：controller, kohana, routes

我正在使用 Kohana 3.2，我需要为我的应用程序创建下面的目录结构。为此，我正在使用下面的路线，但我做错了。“设置”是我正在开发的用例。

```
<?php
Route::set('global', '<directory>(/<controller>(/<action>))', array('directory' => 'settings'))
    ->defaults(array(
        'directory' => 'settings',
        'controller' => 'settings',
        'action' => 'index',
    ));
?> 
```

所以，这是我的“设置”用例的目录结构：

```
 - ..\application\settings\classes\controller\settings.php
   - ..\application\settings\classes\model\settings.php
   - ..\application\settings\views\settings_form.php 
```

这是我的控制器的代码：

```
 class Controller_Settings extends Controller {

       public function action_index(){
           echo 'test';
       }
   } 
```

这是我用来访问我的控制器的 url：

```
 - http://cmx107/clients/cmcaapp/v1/settings 
```

谢谢，干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:02:44.757

由于您将目录设置为默认设置，因此您需要像这样将控制器设置放在 Settings 目录中，而不是按照您的方式：

**路径**

正确：application/classes/settings/settings.php

格式：apppath/classes/<目录>/<控制器>.php

```
Class Controller_Settings_Settings extends Controller {
    public function action_index(){
       echo 'test';
   }
} 
```

# java - 我想了解spring框架源码

> ID：10075559
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:28:59.930
> 
> 标签：java, spring

我想了解spring框架源代码是否有任何有用的链接，基本上我想了解spring如何进行依赖注入，spring mvc servlet如何工作，视图解析器如何工作等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:35:35.167

我认为最好的理解方法是通过他们的代码[http://www.springsource.org/download](http://www.springsource.org/download)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:35:24.337

Spring 有**优秀的** [文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/)和[javaDoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/)。所有信息都在那里，只需要仔细查看。如果想看具体实现，直接看spring框架源码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:36:02.483

有这么多，我会尝试从官方网站开始：[http](http://www.springsource.org/) ://www.springsource.org/ 并做一些教程。

无论如何，spring 非常非常大，包含各种东西——DI、AOP、MVC、SpringIntegration 等等……你可能想对每一个玩一点（并下载 STS）……

# javascript - 捕获失败的同步 HTTP 请求

> ID：10075560
> 
> 赞同：1
> 
> 时间：2012-04-09T15:29:04.363
> 
> 标签：javascript

在我的测试中，如果同步查询没有到达服务器，它会导致浏览器冻结。是否有可能更好地处理这个问题？我不认为以下工作正常（很难测试）

```
try { xmlHttp.send(null); }
catch (e) { 
 alert('Can you please try again? The last request did not go through properly.');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:30:48.210

该`xmlHttpRequest`对象不会对所有内容都抛出错误，它使用来自服务器的错误代码设置状态/状态文本。

由于浏览器锁定，使用同步调用通常是不好的做法。

# .net - 片段快捷方式中的特殊字符

> ID：10075565
> 
> 赞同：3
> 
> 时间：2012-04-09T15:29:26.870
> 
> 标签：.net, visual-studio, code-snippets

我正在使用 VS2010，我想创建一个片段来执行以下操作：

当我按`{`或`(`然后按 tab 时，代码段会写`)`或`}`。我创建了片段，但是当我编写`{`或`(`指定为片段快捷方式时，它们不起作用

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T01:08:43.063

我会在这里回答一个小的左字段。

使用大括号`{}`，C# 没有片段的原因是用于格式化。在编写代码时，您会注意到，当您键入`}`字符时，编辑器将为您刚刚键入的代码正确设置选项卡。因此，它应该是您在代码中编写的最后一件事。

其次，您会注意到要使用片段，您必须输入：

1.  片段名称
2.  选项卡到参数
3.  类型参数
4.  点击输入。

对于产生一个字符的 1 个字符片段，您刚刚将 2 次击键交换为至少 3 个 ( `{` `tab` `enter`)。因此，C# 团队可能不认为将其作为片段支持是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:07:53.110

您不能将这些字符用于片段快捷方式，请参阅此 MSDN 文章：[代码片段 (C#)](http://msdn.microsoft.com/en-us/library/f7d3wz0k%28v=vs.80%29.aspx)

文章末尾的黄色说明如下：

> 对于 C# 代码片段，**可用于指定字段的字符是**：字母数字字符、数字符号 (#)、波浪字符 (~)、下划线字符 (_) 和短划线字符 (-)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:45:44.900

这些功能由“生产力电动工具”支持，您如何在 VS 2010 中不使用这些扩展。

从这里获取所有好东西：

[http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)

# asp.net - 当 Multiple 为 false 时，HtmlSelect 不能选择多个项目

> ID：10075566
> 
> 赞同：2
> 
> 时间：2012-04-09T15:29:27.563
> 
> 标签：asp.net

我收到以下错误

> 当 Multiple 为 false 时，HtmlSelect 不能选择多个项目。

为什么我收到这个我仍然不明白的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-05T15:57:43.703

我也遇到了这个错误。当我尝试将所选值设置为选择时以及页面最终加载时。

问题出在我的代码中。我将选定的值设置为：

```
mySelect.Items.FindByValue(myValue).Selected = true; 
```

它似乎工作得很好，没有任何问题，但是......

后来我更新了这段代码：

```
mySelect.SelectedIndex = mySelect.Items.IndexOf(mySelect.Items.FindByValue(myValue)); 
```

现在它可以工作了。

我希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:31:58.447

您是否希望能够选择多个值。multiple 属性必须设置为 true

> 使用 Multiple 属性指定是否可以在 HtmlSelect 控件中同时选择多个项目。

```
<asp:HtmlSelect Multiple="True|False" /> 
```

[HtmlSelect.Multiple 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlselect.multiple.aspx)

# javascript - 哪些编程语言是“通用”和“特定领域”？

> ID：10075567
> 
> 赞同：4
> 
> 时间：2012-04-09T15:29:28.010
> 
> 标签：javascript, ruby, dsl

我已经阅读了一些关于不同 DSL 和 GP 语言的关于 SO 的帖子，但对于如何将编程语言定义为一种或另一种，我仍然有些困惑。

到目前为止，我的理解（希望你能澄清）如下：

PHP、HTML、CSS 等语言是特定领域的，因为它们是为单一目的而设计的（例如，它们是为构建网站而设计的 - 或者在 CSS 的情况下是用于样式化网站）。而像 Ruby 或 Python 这样的语言是通用语言，因为它可以用于多种用途（例如，Ruby 可用于构建网站、作为命令行工具、构建 Mac 应用程序等）。

那会是正确的吗？如果是这样，我认为像 JavaScript 这样的语言适合特定领域（例如，它被设计用于向网站添加交互性）但 JavaScript 可以在服务器或命令行上运行，它可以被使用与 Photoshop 之类的软件交互，甚至执行 Windows Shell 脚本，因此可以将其视为通用语言，因为它用于多种用途，或者它仍然是特定于域的，因为它的起源是为 Web 设计的？

任何澄清表示赞赏。

# forms - symfony 1.4 FORMS - 如何用模块/组件中生成的代码替换默认（相关）下拉字段？

> ID：10075571
> 
> 赞同：0
> 
> 时间：2012-04-09T15:29:40.123
> 
> 标签：forms, symfony1

我一直在使用 ajax 和教义链下拉菜单创建来选择一个类别。我把它们放在组件中。它是这样工作的：

> [http://www.plus2net.com/php_tutorial/ajax_drop_down_list.php](http://www.plus2net.com/php_tutorial/ajax_drop_down_list.php)

我试图替换基于架构并与当前表相关的默认类别下拉列表。当在

```
/lib/form/doctrine/TabbleForm.class.php 
```

我用代码删除了一个字段：

```
unset($this['category']); 
```

在具有表单主体的模板中，我粘贴了一个组件代码（使用这个基于 ajax 的动态下拉菜单）：

```
include_component('add', 'selectcategory',array('catid' => 0)); 
```

我有通知：

```
Unexpected extra form field named "category". 
```

如何用组件/模块中的类别字段代码替换该默认代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:28:21.303

如何在模板中显示表单？使用基本的`<?php echo $form; ?>`或手动的，例如：

```
<?php echo $form['field']->renderLabel() ?>
<?php echo $form['field']->render() ?>
<?php echo $form['field']->renderError() ?> 
```

我建议你使用第二种方法，至少使用`<?php echo $form['field']->renderRow() ?>`. 这样，您就不必使用`unset`Form 类中的类别字段。但是您必须以与表单相同的方式命名组件中的选择标记。

如果表格显示：

```
<select id="formname_category" name="formname[category]">...</select> 
```

您将不得不使用相同的名称（我猜是第二个选择）。然后，您的表单不会有任何问题，更重要的是，与您的`category`领域相关的验证器也可以工作！

# mysql - 语法错误创建包含名为“desc”的列的表

> ID：10075572
> 
> 赞同：6
> 
> 时间：2012-04-09T15:29:41.347
> 
> 标签：mysql

我似乎永远无法使用 TEXT 类型的列创建 MySQL 表。这是我的 MySQL：

```
CREATE TABLE factions(id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id), name VARCHAR(16) NOT NULL, desc TEXT NOT NULL, admins TEXT NOT NULL, mods TEXT, members TEXT, land TEXT, enemies TEXT, allies TEXT) 
```

当它运行时，我得到这个：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'desc text NOT NULL, admins text NOT NULL, mods text, members text, land text, en' at line 1 
```

我不知道出了什么问题！如果有什么不同，我正在使用 Java。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-09T15:38:35.540

`desc`是保留字，**不应**用作列名。您**可以**将`desc`其用作列的名称，但如果这样做，则必须始终将其包装在反引号中。

```
CREATE TABLE factions(
   id INT NOT NULL AUTO_INCREMENT,
   PRIMARY KEY(id), 
   name    VARCHAR(16) NOT NULL, 
   `desc`  TEXT NOT NULL, 
   admins  TEXT NOT NULL, 
   mods    TEXT, 
   members TEXT, 
   land    TEXT, 
   enemies TEXT, 
   allies  TEXT
); 
```

以上内容已经过测试并且有效，但是由于您总是必须将其包装在反引号中（在每个`INSERT`,`UPDATE`和中`DELETE`），您可能想要更改名称，或者只是养成将所有字段包装在反引号中的习惯，它还有其他优点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:40:56.353

将列名更改`desc`为任何不同的名称，因为它是`descend`or的保留字`describe`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:34:36.800

`desc`是保留字，*不能*~~作为~~ 表或列的名称。您可以用作列名。更改名称后，您的陈述应该有效。*`description`*

# facebook - Facebook 移动网站在分享 URL 时返回“找不到您的链接”

> ID：10075577
> 
> 赞同：2
> 
> 时间：2012-04-09T15:30:00.950
> 
> 标签：facebook, url, mobile, web, sharing

当用户尝试在 facebook mobile web 上共享 URL 时，有时页面会返回以下消息：“找不到您的链接”和手动插入 URL 的文本输入

1.  有效的分享网址： [https ://m.facebook.com/sharer.php?u=http://dishenvy.com/dish/pollo-garnachas-gran-electrica-brooklyn](https://m.facebook.com/sharer.php?u=http://dishenvy.com/dish/pollo-garnachas-gran-electrica-brooklyn)

2.  共享 URL 不起作用： [https ://m.facebook.com/sharer.php?u=http://dishenvy.com/dish/samgyupsal-hahm-ji-bach-new-york-](https://m.facebook.com/sharer.php?u=http://dishenvy.com/dish/samgyupsal-hahm-ji-bach-new-york-)

我正在使用的代码：

```
<a class="fb_share" name="fb_share" type="icon" share_url="<?php echo urldecode($shareUrl) ?>">                                               
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T17:41:36.290

确保您传递的网址可供 Facebook 访问。不知道为什么，但他们的移动网站似乎验证了 url，但他们的非移动网站似乎并不关心。如果您有代码生成您传递给 facebook 的链接，并且主机对应于防火墙或专用网络后面的服务器（例如测试或开发服务器），则经常会发生此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:59:55.663

According to the debugger the two url example that you posted work the same:

*   [First](http://developers.facebook.com/tools/debug/og/object?q=http://dishenvy.com/dish/pollo-garnachas-gran-electrica-brooklyn)
*   [Second](http://developers.facebook.com/tools/debug/og/object?q=http://dishenvy.com/dish/samgyupsal-hahm-ji-bach-new-york-1)

So I don't know how to help you with that.

What I can tell you though is that you are using a deprecated api. The facebook "sharer" is no longer supported as it states [here](http://developers.facebook.com/docs/share/):

> The Share button has been deprecated in favor of the Like button, and will no longer be supported. Please use the Like button whenever possible to drive maximum traffic to your apps.

And [here](http://developers.facebook.com/docs/reference/plugins/like/):

> **What happened to the old Share button?**
> 
> We deprecated the Share Button when we launched the Like button, because the Like button improves clickthrough rates by allowing users to connect with one click, and by allowing them to see which of their friends have already connected.

That may be a cause for the inconsistency you are experiencing. My advise to you is to stop using this deprecated api and move to the Like button.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T05:50:12.980

我认为 facebook 检查您的共享页面是否在服务器上找到。您在服务器上找到的第一个 url（这意味着第一个 url 返回页面）。第二个 url 不返回页面。由于这个原因，第二个 url 返回空页面 facebook 返回此消息。**“找不到您的链接”**

点击链接：

> 1.  [http://dishenvy.com/dish/pollo-garnachas-gran-electrica-brooklyn](http://dishenvy.com/dish/pollo-garnachas-gran-electrica-brooklyn) = 找到页面
>     
>     
> 2.  [http://dishenvy.com/dish/samgyupsal-hahm-ji-bach-new-york-](http://dishenvy.com/dish/samgyupsal-hahm-ji-bach-new-york-) = 找不到页面

所以在脸书上分享正确的网址

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-12-07T08:25:46.297

[https://m.facebook.com/sharer.php?m2w&u=http://dishenvy.com/dish/samgyupsal-hahm-ji-bach-new-york-](https://m.facebook.com/sharer.php?m2w&u=http://dishenvy.com/dish/samgyupsal-hahm-ji-bach-new-york-)

对于移动视图，您希望将**m2w**添加到 url。

# mysql - Mysql - 如何用连字符替换列中的 0

> ID：10075582
> 
> 赞同：0
> 
> 时间：2012-04-09T15:30:15.137
> 
> 标签：mysql

当我运行查询时，我想用连字符“-”替换列中生成的所有 0。

进行此更改的最简单的函数或语句是什么？列不为空，因此在应用数据时会生成 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:32:08.023

利用[`IF()`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)

```
SELECT IF(column, column, '-') 
```

如果`column`计算结果为真，它将返回 中的值`column`，否则返回指定的“-”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:33:05.617

查看 MySQL[手册](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

```
 SELECT REPLACE(field_name,'0','-'); 
```

# silverlight - 表单字段验证

> ID：10075588
> 
> 赞同：1
> 
> 时间：2012-04-09T15:30:34.727
> 
> 标签：silverlight

我正在尝试验证表单中的某些用户信息字段。例如，有名字，姓氏，地址，如果用户没有填写完整，应该有一个警报信息。请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:43:33.530

实现[INotifyDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo%28v=vs.95%29.aspx)接口。

# html - 在 Win 7 的 cygwin 中使用 Sass 时出现错误的 Line 错误，我该如何解决？

> ID：10075592
> 
> 赞同：0
> 
> 时间：2012-04-09T15:31:00.803
> 
> 标签：html, css, ruby, sass

当我在 Sass 中遇到编译错误时，该错误给了我错误的行号，这使得调试和查看问题变得非常困难。想法？

环境：Windows 7，在 Cygwin 下运行的 Sass 使用 Sublime2 作为我的文本编辑器

谢谢，阿尔菲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:17:21.800

好吧，所以我想通了...

将文件中的行结尾从 Windows Line Ends 更改为 Unix Line Ends

您还可以在处理此问题的命令中设置一个标志。

我希望这有帮助

# xcode - 从字符串创建对 UIImageView 的引用

> ID：10075593
> 
> 赞同：0
> 
> 时间：2012-04-09T15:31:04.923
> 
> 标签：xcode, nsstring, uiimageview

我有一系列在 IB 中创建的 UIImageViews。我想根据某些按钮的按下来显示和隐藏这些。我目前有一个方法，如果按下 1，则隐藏 2、3、4，然后如果按下 2，则隐藏 1、3、4。这可行，但我正在尝试改进我的代码以进行更新。

我的背景是动作脚本，所以我不确定我想做的是否正确。

我基本上想评估对 UIImageView 的字符串引用，在 AS 中我会使用 eval(string)。

我使用的方法是从一个字符串和一个数字创建一个字符串，所以我得到“image1”。一切正常，但我需要将其评估为 UIImageView 以便我可以更新 alpha 值。

首先这是可能的，如果不是，我应该怎么做？我开始认为在界面生成器中进行此设置可能没有帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:53:14.657

这可能不是一个好的工作方式。你想要的是一个 imageViews 数组。然后你只需要一个数字索引，你可以通过 imageViews 数组隐藏所有没有选择索引的东西。

但是你如何得到一个 imageViews 数组呢？请参阅[如何从对象数组中制作 IBOutlets？](https://stackoverflow.com/questions/4356612/how-to-make-iboutlets-out-of-an-array-of-objects) 它解释了如何使用 IBOutletCollection。

如果每个视图都有一个单独的按钮，请将它们也放入 IBOutletCollection 中。这样你就可以拥有这样的东西：

```
- (IBAction) imageButtonPressed:(id) sender;
{
    // The sender is the button that was just pressed.
    NSUInteger chosenIndex = [[self imageButtons] objectAtIndex:sender];
    for (NSUInteger imageIndex = 0; imageIndex < [[self imageViews] count]; imageIndex++)
    {
        // Hide all views other than the one associated with the pressed button.
        if (imageIndex != chosenIndex)
        {
            [[[self imageViews] objectAtIndex:imageIndex] setHidden:YES];
        }
        else
        {
            [[[self imageViews] objectAtIndex:imageIndex] setHidden:NO];
        }
    }
} 
```

如果你真的，真的需要将字符串`image1`与 imageView 相关联，你可以构造一个`NSDictionary`将你的控件与唯一的字符串标识符相关联，以便以后查找。NSDictionary 很强大，但我对为什么需要它的原因持空白。

```
NSMutableDictionary *viewLookup;
[viewLookup setObject:[[self imageViews] objectAtIndex:0] forKey:@"image0"];
[viewLookup setObject:[[self imageViews] objectAtIndex:1] forKey:@"image1"];
[viewLookup setObject:[[self imageViews] objectAtIndex:2] forKey:@"image2"];

[viewLookup setObject:[[self imageButtons] objectAtIndex:0] forKey:@"button0"];
// ...
// Can now look up views by name.
// ...
NSString *viewName = @"image1";
UIView *viewFound = [viewLookup objectForKey:viewName];
[viewFound doSomething]; 
```

# android - 这是在 Android 2.2 中创建自定义选项卡的最佳方式

> ID：10075595
> 
> 赞同：0
> 
> 时间：2012-04-09T15:31:10.037
> 
> 标签：android, tabs

我想知道哪种方法是在 Android 2.2 中创建自定义选项卡的最佳方法。像这样的东西。

![在此处输入图像描述](../Images/f4faeb82697784a8e3f5290011d5b8c6.png)

![在此处输入图像描述](../Images/6052114f4a03ebe6f7d21076848b268c.png)

我知道 TabHost 但对它的 UI 不满意。我想在 2.2 中创建自己的标签 UI，如上图所示。请建议我最好和最简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:35:20.273

为您的选项卡创建一个自定义视图，其中包含状态列表可绘制对象等！

最适合您的教程：

[http://joshclemm.com/blog/?p=136](http://joshclemm.com/blog/?p=136)

这是一个示例代码：

[http://code.google.com/p/android-custom-tabs/](http://code.google.com/p/android-custom-tabs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:45:46.210

[ActionBarSherlock](http://actionbarsherlock.com/)具有标签功能。[您可以从此处](http://actionbarsherlock.com/download.html)下载 Demos Sample并查看 Tab Navigation Sample。我想你会发现它很有用。

# ruby-on-rails - 是否可以使用 gmaps4rails 替换一个标记？

> ID：10075596
> 
> 赞同：2
> 
> 时间：2012-04-09T15:31:10.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

使用 Gmaps.map.replaceMarkers() 我可以替换整个标记集。但在我的应用程序中，我将使用 3000 多个标记。

如何替换一个标记或标记子集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:17:15.027

这绝对是可能的，但是因为没有规则，所以要编写自定义代码。

以下是我的一般做法：

*   我[在标记的 json 中添加了一些自定义数据，](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Controller)通常`id`是活动记录的对象

*   我在javascript变量中对我的标记客户端进行排序，假设你有一个要在名为的js数组中删除的标记的ID`toClear`

*   我删除了无用的标记：

咖啡脚本：

```
for marker in Gmaps.map.markers
  if marker.id in toClear
    Gmaps.map.clearMarker marker 
```

*   我添加新的`Gmaps.addMarkers new_markers_array`

# ios - iOS - 如何在带有半透明黑色状态栏的故事板中回收前 20 像素

> ID：10075597
> 
> 赞同：3
> 
> 时间：2012-04-09T15:31:11.480
> 
> 标签：ios, xcode, user-interface, view, storyboard

我在状态栏后面的前 20px 有问题，特别是我不能在那里放任何东西。

当我创建 UI 时，我使用了故事板方法并将状态栏样式设置为半透明黑色。但是当在 Xcode 中进行布局时，我的视图高度固定为 460 像素（灰显）。

请帮忙。

* * *

从朋友那里得到答案，他将在他在这里发布时将他的解决方案标记为正确答案。现在这里是解决方案：

1.  在 Interface Builder 中，将视图控制器设置为想要全屏和自由尺寸：[http ://cl.ly/0x1p1u3q3B1y3b3C3U2n](http://cl.ly/0x1p1u3q3B1y3b3C3U2n)
2.  然后在视图的大小设置中将其高度设置为 480px：http: [//cl.ly/1p1b0e060p1Y37393D08](http://cl.ly/1p1b0e060p1Y37393D08)
3.  确保 Info.plist 中的状态栏样式为半透明黑色：http: [//cl.ly/153Y391S1b0G3J3z3Y1O](http://cl.ly/153Y391S1b0G3J3z3Y1O)
4.  获得满意的结果：[http ://cl.ly/0Q1M390i3A3h2F3u2T19](http://cl.ly/0Q1M390i3A3h2F3u2T19)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T08:36:16.657

这是没有单行代码的解决方案。

1.  在 Interface Builder 中，将视图控制器设置为想要全屏和自由尺寸。
2.  在视图的大小设置中将其高度设置为 480px
3.  确保 Info.plist 中的状态栏样式为半透明黑色。
4.  发射并观察

请参阅顶部帖子中每个步骤的屏幕截图的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T11:46:45.580

好的，被告知这是可能的，我尝试在主视图顶部放置一个视图并将其 y 坐标设置为 -20。然后我向西到 Info.plist 并设置`Status bar style`为`Transparent black style (alpha of 0.5)`. 我放置的视图在状态栏下方可见。

![在此处输入图像描述](../Images/e70bd12994d22007bdc6056d92e1b2fc.png)

这只发生在运行时；在 Interface Buider 中，模拟的半透明状态栏是​​灰色但不透明的。

**编辑**：如果你想将视图控制器的主视图移动到这个空间中，可以在`viewWillAppear`. （如果您尝试在 期间移动它`viewDidLoad`，它会在之后移回。）

```
- (void)viewWillAppear:(BOOL)animated;
{
    [super viewWillAppear:animated];

    // Move the main view upwards if it isn't already there.
    CGRect frame = [[self view] frame];
    frame.size.height += frame.origin.y;
    frame.origin.y = 0;
    [[self view] setFrame:frame];
} 
```

但是，它在旋转后被移回，如果我对`UITableView`.

这是斯威夫特版本。似乎工作。拍摄这些 App Store 屏幕截图的好解决方案（除了更改 info.plist 之外。

覆盖 func viewWillAppear（动画：布尔）{

```
 super.viewWillAppear(animated)

    // Move the main view upwards if it isn't already there.
    var frame: CGRect = self.view.frame
    frame.size.height += frame.origin.y
    frame.origin.y = 0
    self.view.frame = frame
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T08:09:01.353

只需在界面生成器中制作负 Y (-20) 坐标即可。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T09:29:37.977

尝试在 Interface Builder 的属性检查器的“模拟指标”部分中更改“状态栏”的值。如果您将其设置为“推断”，Xcode 将不对视图控制器做出任何假设，允许您将视图的大小设置为您想要的任何大小（即使是没有任何意义的大小）。查看[有关状态栏](https://stackoverflow.com/questions/5709123/ios-4-3-hide-status-bar-permanently)的这篇文章，了解有关将其隐藏在您的应用中的信息。

# jquery - jQuery Accordion 来自 $("div id=\"accordion\">

> ID：10075599
> 
> 赞同：0
> 
> 时间：2012-04-09T15:31:15.437
> 
> 标签：jquery, jquery-ui, gwtquery

我正在使用 GWTQuery 和 GWTQuery-UI，但我认为它对 JQuery-UI 的工作方式相同。

如何在不在 HTML 文档中定义手风琴的情况下创建手风琴？

例如

```
 $("<div id=\"accordion\">   <h3><a href=\"#\">Section 1</a></h3><div><p>Mauris.</p></div><h3><a href=\"#\">Section 2</a></h3><div><p>Sed non urna.</p></div><h3><a href=\"#\">Section 3</a></h3><div><p>Nam enim risus.</p><ul><li>List item one</li><li>List item two</li>li>List item three</li></ul></div><h3><a href=\"#\">Section 4</a></h3><div><p>Cras dictum.</p><p>Suspendisse</p></div></div>");
    $("#accordion").as(Ui).accordion(); 
```

这根本不会显示任何文本。如果我将它附加到面板，我只会得到带有部分的文本，但没有手风琴。

谢谢

编辑：在 HTML 文件中创建一个空的 div 手风琴，附加字符串

```
$("#accordion")
            .append("<h3><a href=\"#\">Section 1</a></h3><div><p>Section 1 text here.</p></div>");
    $("#accordion")
            .append("<h3><a href=\"#\">Section 2</a></h3><div><p>Section 2 text here.</p></div>");
    $(absolutePanel_1.getElement()).append(
            $("#accordion").as(Ui).accordion()); 
```

并将其添加到 gwt-panel 正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:38:04.157

您可以在 JavaScript 中创建手风琴，但您需要将其附加到元素上才能显示在页面上。

请参阅此[jsFiddle](http://jsfiddle.net/9R7ZU/1/)进行演示。这是代码：

```
<script type="text/javascript">
    $(function(){

        //get the accordion container
        var $accordion = $("#accordion");    

        //append elements to the accordion   
        $accordion.append("<h3><a href=\"#\">Section 1</a></h3><div><p>Section 1 text here.</p></div>");
        $accordion.append("<h3><a href=\"#\">Section 2</a></h3><div><p>Section 2 text here.</p></div>");

        //turn it into an accordion
        $accordion.accordion();          

    });
</script>
<div id="accordion"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:38:01.863

如果您将新的 jQuery 对象设置为一个变量，您将能够在`accordion()`其上调用该方法，如下所示：

```
var $div = $("<div id=\"accordion\"><h3><a href=\"#\">Section 1</a></h3><div><p>Mauris.</p></div><h3><a href=\"#\">Section 2</a></h3><div><p>Sed non urna.</p></div><h3><a href=\"#\">Section 3</a></h3><div><p>Nam enim risus.</p><ul><li>List item one</li><li>List item two</li>li>List item three</li></ul></div><h3><a href=\"#\">Section 4</a></h3><div><p>Cras dictum.</p><p>Suspendisse</p></div></div>");
$div.accordion(); 
```

但是，可能有一些函数`accordion()`依赖于可以通过 DOM 访问的元素，所以这可能仍然不起作用，因为我还没有测试过它。

然而，这一点对我来说已经失去了意义，因为我没有看到花时间在一个看不见的元素上创建手风琴的意义？

# parsing - 编程语言语法

> ID：10075607
> 
> 赞同：2
> 
> 时间：2012-04-09T15:32:01.097
> 
> 标签：parsing, compiler-construction, binary-tree, grammar

我在编译器课程作业中有这个问题，但我真的不知道如何处理它。谁能给我一个比标题中给出的更好的提示？

> 证明由以下文法生成的所有二进制字符串都有可被 3 整除的值。
> 
> 提示：对解析树中节点的数值使用归纳法。
> 
> ```
> num -> 11 | 1001 | num 0 | num num 
> ```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T15:37:16.760

这里有两个提示：

1.  将 0 附加到二进制表示中相当于乘以 2。

2.  将二进制表示附加到自身相当于乘以 2^N + 1。

# java - Java：访问指针

> ID：10075608
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:32:07.433
> 
> 标签：java, pointers

我得到：'需要意外类型
：找到变量
：值'在标记行（*）

```
for (int i = 0; i < boardSize; i++) {
    for (int j = 0; j < boardSize; j++) {
        rows[i].getSquare(j) = matrix[i][j]; // * points to the ( in (j)
        columns[j].getSquare(i) = matrix[i][j]; // * points to the ( in
        int[] b = getBox(i, j);
        int[] boxCord = getBoxCoordinates(i + 1, j + 1);
        boxes[b[0]][b[1]].getSquare(boxCord[0], boxCord[1]);
    }
} 
```

这是我的行类：

```
private Square[] row;

Row(int rowCount) {
    this.row = new Square[rowCount];
}

public Square getSquare(int index) {
    return this.row[index];
} 
```

请指出我在这里做错了什么来帮助我。
提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T15:34:32.920

您不能将某些内容分配给方法的返回值。相反，您需要向该类添加一个`setSquare()`方法`Row`：

```
public Square setSquare(int index, Square value) {
    this.row[index] = value;
} 
```

并像这样使用它：

```
rows[i].setSquare(j, matrix[i][j]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:37:06.703

Java 没有指针——引用不是一回事。

根据您发布的代码，无法判断到底发生了什么。我认为您需要一种方法来在您的 Row 类拥有的私有数组中设置该 Square 的值。

```
public void setSquare(int index, Square newSquare) {
    this.row[index] = newSquare; 
} 
```

无论如何，它看起来像是一个糟糕的抽象。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-09T15:33:44.263

Java没有指针。对象通过引用传递和返回。就 C++ 而言，`rows[i].getSquare(j)`是一个**rvalue**，而不是一个**lvalue**，所以你不能分配给它。

相反，您应该创建和使用`rows[i].setSquare(...)`.

# android - 连接 Canny 算法的线

> ID：10075614
> 
> 赞同：4
> 
> 时间：2012-04-09T15:32:48.303
> 
> 标签：android, image, opencv, image-processing, edge-detection

我从精明的算法中得到了边缘，但线条之间的空间很小。我需要将线连接在一起并减少这个空间。例如：[示例图像](http://postimage.org/image/sbq3na76r/)

我在 Android 中使用 opencv。

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T17:48:13.400

考虑[`cvDilate()`](http://opencv.willowgarage.com/documentation/image_filtering.html#dilate)在执行 canny 后使用来扩大图像。这是连接线段的一种方法，如果图像过于膨胀而无法达到您的目的，您可能需要在膨胀的图像上执行 Canny。

# javascript - 用于修改页面脚本的 Chrome 扩展包括和 JS

> ID：10075620
> 
> 赞同：29
> 
> 时间：2012-04-09T15:33:07.057
> 
> 标签：javascript, google-chrome, google-chrome-extension

我在客户包含在其网站上的 javascript 库上工作，以嵌入 UI 小部件。我想要一种在客户站点上实时测试库的开发版本的方法，而无需他们对其代码进行任何更改。这将使调试问题和测试新版本变得容易。

为此，我需要更改脚本包含以指向我的开发服务器，然后覆盖页面中调用的 load() 方法以添加一个额外的参数来告诉它在进行远程调用时要指向哪个服务器。

看起来我可以使用 chrome 扩展将 JS 添加到页面中，但是在页面加载之前我看不到任何修改页面的方法。是否有我遗漏的东西，或者不允许 chrome 扩展做这种事情？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-09T17:00:10.493

我已经完成了大量的 Chrome 扩展开发，我认为在浏览器呈现页面源之前没有任何方法可以编辑页面源。最接近的两个选项是：

*   *[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)*允许您添加额外的 JavaScript 和 CSS 文件。您也许可以使用这些脚本来重写页面中现有的脚本标签，但我不确定它是否会成功，因为您的脚本通过 DOM 可见的任何脚本标签都已加载或正在加载。

*   *[WebRequest](http://code.google.com/chrome/extensions/webRequest.html)*允许您劫持 HTTP 请求，因此您可以让扩展重新路由对`library.js`to`library_dev.js`。

假设您的站点是 www.mysite.com 并且您将脚本保存在 /js 目录中：

```
chrome.webRequest.onBeforeRequest.addListener(
    function(details) {
        if( details.url == "http://www.mysite.com/js/library.js" )
            return {redirectUrl: "http://www.mysite.com/js/library_dev.js" };
    },
    {urls: ["*://www.mysite.com/*.js"]},
    ["blocking"]); 
```

HTML 源代码看起来相同，但拉入的文档`<script src="library.js"></script>`现在将是一个不同的文件。这应该达到你想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-12T21:53:06.823

[这是一种在使用WebRequest](http://code.google.com/chrome/extensions/webRequest.html) API将内容加载到页面之前修改内容的方法。这需要在 onBeforeRequest 侦听器返回之前将内容加载到字符串变量中。此示例适用于 javascript，但它应该同样适用于其他类型的内容。

```
chrome.webRequest.onBeforeRequest.addListener(
    function (details) {
        var javascriptCode = loadSynchronously(details.url);
        // modify javascriptCode here
        return { redirectUrl: "data:text/javascript," 
                             + encodeURIComponent(javascriptCode) };
    },
    { urls: ["*://*.example.com/*.js"] },
    ["blocking"]); 
```

loadSynchronously() 可以用常规的 XMLHttpRequest 实现。同步加载会阻塞事件循环，并且在 XMLHttpRequest 中已被[弃用](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)，但不幸的是，这种解决方案很难避免。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2022-02-21T09:54:46.603

在更改页面内容（无论是 HTML 内容还是脚本）方面，Chrome 扩展程序都有技术限制。解决此问题的最简单方法是拦截 HTML 并允许开发人员务实地覆盖 HTML/JS 响应内容。

这可以通过[Requestly 桌面应用程序实现](https://requestly.io/desktop/)

## 使用 Requestly 桌面应用程序

1.  安装 Requestly 桌面应用程序
2.  打开连接的应用程序并启动任何浏览器 - Chrome、Firefox 等
3.  转到 HTTP 规则并创建一个新的修改响应规则

选择以编程方式**覆盖 HTML 页面的内容**。编写一个简单的 JS 脚本，在现有 HTML/JS 响应之上进行修改。

这是您如何执行此操作的示例屏幕截图。 [![请求修改响应规则](../Images/076dafc6041d6ac54e16549f7ab170a6.png)](https://i.stack.imgur.com/dSjpl.png)

## 使用 Requestly Chrome 扩展程序

如果重定向脚本 URL 和插入新脚本足以满足您的用例，那么您还可以使用 Requestly Chrome 扩展并创建两个规则

1.  [重定向规则](https://requestly.io/feature/redirect-url/)- 使用开发脚本重定向生产脚本
2.  [插入脚本规则](https://requestly.io/feature/insert-custom-scripts/)- 在页面上注入脚本

免责声明 - 我请求构建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-22T11:48:34.773

您可能对 Opera 浏览器中可用的挂钩感兴趣。Opera 曾经有*[非常强大的钩子](http://www.opera.com/docs/userjs/specs/)，可用于用户 JavaScript 文件（单文件的东西，非常容易编写和部署）和扩展。其中一些是：

**在外部脚本之前：**

当遇到具有 src 属性的脚本元素时会触发此事件。你可以检查元素，包括它的 src 属性，改变它，添加更多特定的事件监听器，或者完全取消它的加载。

一个不错的技巧是取消其加载，在 AJAX 调用中加载外部脚本，对其执行文本替换，然后将其作为脚本标签重新注入网页，或使用 eval。

**window.opera.defineMagicVariable：**

用户 JavaScript 可以使用此方法来覆盖由常规脚本定义的全局变量。对被覆盖的全局名称的任何引用都将调用提供的 getter 和 setter 函数。

**window.opera.defineMagic函数：**

用户 JavaScript 可以使用此方法来覆盖由常规脚本定义的全局函数。对被覆盖的全局名称的任何调用都将调用提供的实现。

* * *

*：Opera 最近切换到 Webkit 引擎，似乎他们已经删除了其中的一些钩子。不过，您仍然可以在他们的网站上找到可供下载的 Opera 12。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-14T03:58:54.643

我有一个想法，但我没有尝试，但它在理论上可行。

运行在文档加载前执行的 content_script，并注册一个 ServiceWorker 来实时替换页面请求的文件内容。（ServiceWorker可以拦截页面中的所有请求，包括直接通过dom发起的请求）

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-12-16T18:18:17.837

它不是 Chrome 扩展，但 Fiddler 可以更改脚本以指向您的开发服务器（有关 Fiddler 作者的设置说明，请参阅[此答案）。](https://stackoverflow.com/questions/17033990/fiddler-replace-file-requested-by-local-one)此外，使用 Fiddler，您可以设置搜索和替换以添加您需要的额外参数。

# android - 模拟器不显示APP

> ID：10075624
> 
> 赞同：0
> 
> 时间：2012-04-09T15:33:15.493
> 
> 标签：android, android-emulator, android-softkeyboard

我已经通过 eclipse 导入了一个软键盘 APP 我尝试在模拟器上运行它，但我的应用程序图标甚至没有显示出来。我的应用程序或模拟器上没有错误消息。有谁知道为什么会发生这种情况？我试图查看是否可以更改模拟器上的键盘设置，但我没有看到任何选项。我试过访问短信图标，出现的软键盘不是我的，它是模拟器的默认设置..请指教非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:45:22.327

您应该检查 logcat 以获取错误或一些警告消息，请提供有关您的问题的更多详细信息：D

# hibernate - 如何通过 Hibernate 从数据库中仅获取几个表列并使用 JAXB 编组？

> ID：10075630
> 
> 赞同：0
> 
> 时间：2012-04-09T15:33:50.263
> 
> 标签：hibernate, rest, jaxb

我的数据库中有一个 Employee 表，其中包含字段 empId、empName、Dept、DOJ、DoB、Sex、Qualification 和很多记录。

我有服务和道类，我的 EMP Java 资源类如下

```
@Entity
@Table(name="EMP")
@XmlRootElement(name = "EmpResource")
public class Employee{

    private String empId;
    private String empName;
    private String href; // this field doesn't exist in the database table.

    @XmlElement
    public String getEmpId(){
        return empId;
    }

    @XmlElement
    public String getEmpName(){
        return empId;
    }

    @XmlAttribute
    public String getHref(){
        return "http://host/rest/v1/employees/" + empId;
    }

} 
```

我正在创建一个基于 REST 的 url，其中 url [http://host/rest/v1/employees](http://host/rest/v1/employees)获取只有 EmpId、EmpName 和 href 字段的所有记录，但是当我尝试运行应用程序时出现此错误

> `javax.xml.bind.JAXBException: class com.vargo.EmpResource nor any of its super class is known to this context.`

有什么帮助吗？

问候， 基查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:42:44.080

好吧，似乎问题出在包含数据的 xml 的投标中（我没有看到该代码），但请确保您提供了正确的路径：

`JAXBContext jc = JAXBContext.newInstance("pathWhereYourGeneratedJaxbClassesAre");`

希望这会有所帮助。

# vim - VIM：一次执行两个动作

> ID：10075633
> 
> 赞同：4
> 
> 时间：2012-04-09T15:33:58.727
> 
> 标签：vim

我经常将`:w`SVN 保存并提交`svn commit -m "Ticket 351"`为两个操作。有没有办法将它们组合成一个操作，这样我就可以`:``⇑</kbd>`Enter` when the need arises? I don't want to map a key as I will sometimes have to change the commit message.`

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T15:37:29.313

`|`用作命令分隔符（请参阅）`:help :bar`：

```
:w|!svn commit -m foo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:47:12.900

你也可以写一个函数。例如类似的东西；

```
function! Commit(msg)

    write

    let response = system('svn commit -m "' . a:msg . '"')

    echo response

endfunction 
```

然后后来：

```
:call Commit('ticket 1234') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:49:51.017

@JoshLee 给出了字面上的答案。但是，为什么您不能接受键绑定？

```
nnoremap <Leader>s :w<bar>!svn commit -m<space> 
```

仍然会让你在按下 Enter 之前写下你的提交信息......

# java - 将 MOXy 的元数据与实现 java.util.Map 的类一起使用时的 NPE

> ID：10075634
> 
> 赞同：4
> 
> 时间：2012-04-09T15:33:59.673
> 
> 标签：java, map, jaxb, moxy

**情况**

我正在使用 EclipseLink 的 MOXy，并且正在尝试将外部 OX 映射 XML 与实现 Map 接口的类一起使用。但是，每次我尝试创建 JAXBContext 时，都会得到以下 NPE：

```
Caused by: javax.xml.bind.JAXBException
 - with linked exception:
[java.lang.NullPointerException]
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:832)
    at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:143)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:142)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:129)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:93)
    at org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(JAXBContextFactory.java:83)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:210)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:336)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    at com.example.MOXyOXTest<clinit>(MOXyOXTest.java:59)
Caused by: java.lang.NullPointerException
    at org.eclipse.persistence.jaxb.compiler.XMLProcessor.processXML(XMLProcessor.java:202)
    at org.eclipse.persistence.jaxb.compiler.Generator.<init>(Generator.java:145)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:829) 
```

**细节**

仅当被映射的类实现 java.util.Map 接口时，才会出现此问题。如果我正在映射的类没有实现该接口，那么一切正常。这是我要映射的类的简化示例：

```
package com.example;

import java.util.Map;

// This class just wraps a java.util.HashMap
import com.xetus.lib.type.DelegatedMap;

public class SampleClassA extends DelegatedMap<String, Object>{

    public SampleClassA(){
        super();
    }

    public SampleClassA(Map<String, Object> m){
        super(m);
    }

    public void setSomeProperty(String value){
        put("somevalue", value);
    }

    public String getSomeProperty(){
        return (String) get("somevalue");
    }
} 
```

这是我想使用的 MOXy OX 元数据的简化示例：

```
<?xml version="1.0"?>
<xml-bindings
  xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
  package-name="com.example"
  xml-mapping-metadata-complete="true"> 
  <java-types>
  <java-type name="SampleClassA" xml-accessor-type="NONE">
   <xml-root-element name="SAMPLE" />
    <java-attributes>
     <xml-attribute type="java.lang.String" name="SomeProperty" required="true">
     <xml-access-methods get-method="getSomeProperty" set-method="setSomeProperty"/>
    </xml-attribute>
   </java-attributes>
  </java-type>
 </java-types>
</xml-bindings> 
```

这是我创建 JAXBContext 的方式

```
Map<String, Object> props = new HashMap<String, Object>(1);
List bindings = new ArrayList(1);
bindings.add(new StreamSource(MOXyOXTest.class.getResourceAsStream("test-mappings.xml")));
props.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, bindings);

cntxt = JAXBContext.newInstance(new Class[] { SampleClassA.class }, props); 
```

我正在使用 EclipseLink 2.3.2 版，以防万一。我也尝试过使用 2.2.1 版，结果相同。

**我的问题**

这是我第一次尝试在实现 java.util.Map 接口的类上使用 JAXB，我很好奇我是否遗漏了一些基本的东西。我不希望 OX 映射与 Map 的名称/值对一起使用，而是与添加到类中的自定义 getter 和 setter 一起使用。

这样的配置应该工作吗？

**额外细节**

1.  示例代码中使用的 DelegatedMap 没有*扩展*java.util.HashMap，它只是包装了一个实例并实现了 Map 接口。此外，该类使用@XmlAccessorType(XmlAccessType.NONE) 进行注释。
2.  无论哪个抽象类实现了我用于 SampleClassA 的 Map 接口，我都会遇到相同的错误。如果 SampleClassA 扩展了一个未实现映射的类，则一切正常。
3.  我正在使用的代码库需要许多类来实现 Map 接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:20:45.413

**Note:** I'm the [**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php) lead and a member of the [**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222) expert group.

This is a very interesting use case. JAXB (JSR-222) has representations for maps and domain objects, so it is intersting to consider how a hybrid object should behave. I have added the following enhancement request to introduce support for it:

*   [http://bugs.eclipse.org/37640](http://bugs.eclipse.org/37640)

* * *

**UPDATE**

We have just finished implementing this enhancement. You can try it out using an EclipseLink 2.4.0 nightly download start on April 19, 2012 from the following location:

*   [http://www.eclipse.org/eclipselink/downloads/nightly.php](http://www.eclipse.org/eclipselink/downloads/nightly.php)

The fix involves leveraging the `super-type` property to specify a super type to override the real super type. The `super-type` property was previously only leveraged by our [dynamic JAXB](http://wiki.eclipse.org/EclipseLink/UserGuide/MOXy#Dynamic_JAXB) support.

**bindings.xml**

```
<?xml version="1.0"?>
<xml-bindings 
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="forum10075634">
    <java-types>
        <java-type name="SampleClassA" super-type="java.lang.Object" xml-accessor-type="NONE">
            <xml-root-element name="SAMPLE" />
            <java-attributes>
                <xml-attribute java-attribute="someProperty" name="SomeProperty" required="true"/>
            </java-attributes>
        </java-type>
    </java-types>
</xml-bindings> 
```

**DelegatedMap**

Below is an implementation of the `DelegatatedMap` class as described in your question.

```
package forum10075634;

import java.util.*;

public class DelegatedMap<K,V> implements Map<K,V> {

    private Map<K,V> map;

    public DelegatedMap() {
        map = new HashMap<K,V>();
    }

    public DelegatedMap(Map<K,V> map) {
        this.map = map;
    }

    public void clear() {
        map.clear();
    }

    public boolean containsKey(Object key) {
        return map.containsKey(key);
    }

    public boolean containsValue(Object value) {
        return map.containsValue(value);
    }

    public Set<java.util.Map.Entry<K, V>> entrySet() {
        return map.entrySet();
    }

    public V get(Object key) {
        return map.get(key);
    }

    public boolean isEmpty() {
        return map.isEmpty();
    }

    public Set<K> keySet() {
        return map.keySet();
    }

    public V put(K key, V value) {
        return map.put(key, value);
    }

    public void putAll(Map<? extends K, ? extends V> m) {
        map.putAll(m);
    }

    public V remove(Object key) {
        return map.remove(key);
    }

    public int size() {
        return map.size();
    }

    public Collection<V> values() {
        return map.values();
    }

} 
```

**SampleClassA**

```
package forum10075634;

import java.util.Map;

public class SampleClassA extends DelegatedMap<String, Object> {

    public SampleClassA() {
        super();
    }

    public SampleClassA(Map<String, Object> m) {
        super(m);
    }

    public void setSomeProperty(String value) {
        put("somevalue", value);
    }

    public String getSomeProperty() {
        return (String) get("somevalue");
    }

} 
```

**jaxb.properties**

To specify MOXy as your JAXB provider you need to add a file called `jaxb.properties` in the same package as your domain classes with the following entry:

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**Demo**

```
package forum10075634;

import java.io.StringReader;
import java.util.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(1);
        properties.put(JAXBContextFactory.ECLIPSELINK_OXM_XML_KEY, "forum10075634/bindings.xml");
        JAXBContext jc = JAXBContext.newInstance(new Class[] {SampleClassA.class}, properties);

        StringReader xml = new StringReader("<SAMPLE SomeProperty='Foo'/>");
        Unmarshaller unmarshaller = jc.createUnmarshaller();
        SampleClassA sampleClassA = (SampleClassA) unmarshaller.unmarshal(xml);

        System.out.println(sampleClassA.getSomeProperty());
        System.out.println(sampleClassA.get("somevalue"));

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(sampleClassA, System.out);
    }

} 
```

**Output**

```
Foo
Foo
<?xml version="1.0" encoding="UTF-8"?>
<SAMPLE SomeProperty="Foo"/> 
```

# javascript - 如何检查两个元素上的鼠标悬停？

> ID：10075643
> 
> 赞同：0
> 
> 时间：2012-04-09T15:34:38.080
> 
> 标签：javascript, jquery

我需要在鼠标移出链接时隐藏工具提示，但如果鼠标悬停在工具提示上则不需要（两者都有不同的父母）例如：当鼠标悬停在名字或头像朋友上时，我们可以在 Facebook 上看到它

我试试这个，但每次我得到 FALSE

```
$('a').bind('mouseleave', function () {   
      var i = $('div.tooltip').is('hover');
      if(i===true){
      console.log('cursor over the tooltip, so dont hide');
      }
      else{
      console.log('hide tooltip');
      }   
}); 
```

我如何检查这两种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:41:41.073

将链接和工具提示放在同一个父级中：

```
<div id="parent">
    <a href="link.com">link</a>
    <div id="tooltip">tooltip</div>
</div> 
```

然后在脚本中，您可以将 mouseleave 函数放在父级上：

```
$("#parent a").mouseenter(function(){
   $("#tooltip").css("display","block"); //or however you handle this
});
$("#parent").mouseleave(function(){
   $("#tooltip").css("display","none");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:50:17.440

如果您无法更改标记，请使用定时事件并在鼠标进入任一元素时中止它，如下所示：

```
var timer;

$("a, .tooltip").mouseleave(function() {
    timer = setTimeout(doSomething, 10);
}).mouseenter(function() {
    clearTimeout(timer);
});

function doSomething() {
    console.log('hide tooltip');
} 
```

[这是一个小提琴](http://jsfiddle.net/adeneo/CunWL/)

# http - 设计 REST 服务时在请求的正文内容类型中使用的自定义媒体类型？

> ID：10075646
> 
> 赞同：2
> 
> 时间：2012-04-09T15:34:48.813
> 
> 标签：http, rest, hateoas, hypermedia

在创建自己的自定义媒体类型格式（例如 application/vnd.myapp+xml）时，客户端在发送正文内容时是否应该在自定义媒体类型中这样做？

例如，您将订单的表示放入 uri。内容应该是 application/vnd.myapp+xml，还是只是 xml，因为客户端不会包含链接等超媒体控件？

如果用户接受它（它应该），服务器将始终使用自定义媒体类型进行响应，但是客户端是否必须在其请求正文中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T00:22:22.127

客户端不必使用服务器在 GET 响应中发回的相同媒体类型向服务器发送数据（例如，通过 PUT 或 POST）。由服务决定它可以接收哪些媒体类型以及它将返回哪些类型。当然，它可以实现为在同一资源的两个方向上支持多种媒体类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T16:05:49.793

> 在创建自己的自定义媒体类型格式（例如 application/vnd.myapp+xml）时，客户端在发送正文内容时是否应该在自定义媒体类型中这样做？

不，以 HTML 为例。HTML 是不同的媒体类型，尽管数据可以以 text/plain、application/x-www-form-urlencoded 或 multipart/form-data 的形式提交。所有这些支持的类型都由 HTML 规范本身定义，并且可以在表单定义中提供。所以这取决于你如何用这个控制因素来协调客户端（即 HTML.FORM 中的 enctype）

例如，有两种 JSON 格式具有写入语义：

集合+JSON：[http ://amundsen.com/media-types/collection/format/](http://amundsen.com/media-types/collection/format/)

其中明确定义了数据提交格式，是一个application/vnd.collection+json

Collection.next+JSON：[http ://code.ge/media-types/collection-next-json/](http://code.ge/media-types/collection-next-json/)

支持同上，另外还支持“enctype”属性，服务实现者可以为数据提交指定所需的媒体类型。

> 如果用户接受它（它应该），服务器将始终使用自定义媒体类型进行响应，但是客户端是否必须在其请求正文中使用它？

请参阅上面的答案。

# php - 如何从数据库查询中制作多维数组

> ID：10075652
> 
> 赞同：1
> 
> 时间：2012-04-09T15:35:25.023
> 
> 标签：php, mysql, multidimensional-array, zend-db-select

```
table name  =  call 
```

表结构：

```
user_id | call_time | call_type| 
```

让我们填充它以便理解

```
user_id | call_time                   | call_type| 
  0     2012-04-05 07:40:58 GMT+05:00     Mised 
  0     2012-04-06 08:58:45 GMT+05:00     Out 
  0     2012-04-08 09:40:58 GMT+05:00     Incom 
```

**我想做的事**

我需要 Mysql 或等效的 Zend Framework 查询

1.  call_type 的总和。也就是说，我需要知道每天有多少 Out、Missed 或 Income。

2.  每天存在多少 call_time。也就是说我有 2012-04-05 那么它在数据库中有多少时间。

我需要多维数组

```
i =  start from first  day of the month and go up to last day of current month, 
```

i(2012-04-01) 了解

```
Array
(
[ i (2012-04-01)]=>Array
    (
    [Mised ] = 67(sum of all Missed call in this date)
    [Out ] = 10(sum of all out call in this date)
    [Incom ] = 10(sum of all Incom call in this date)
    [total_call] =87 (Sum Of All)
    )

 [ i (2012-04-02) ]=>Array
    [Mised ] = 17(sum of all Missed call in this date)
    [Out ] = 2(sum of all out call in this date)
    [Incom ] = 4(sum of all Incom call in this date)
    [total_call] =23 (Sum Of All)
    )
 .
 .
 .
 .
 .
 .
 .
 .
 .
 [2012-04-30(last day current month)]=>Array
    (
    [Mised ] = 77(sum of all Missed call in this date)
    [Out ] = 72(sum of all out call in this date)
    [Incom ] = 24(sum of all Incom call in this date)
    [total_call] =173 (Sum Of All)
    ) 
```

假设我得到的总记录平均日期是（2012-04-13、2012-04-17、2012-04-23、2012-04-27、2012-04-29）所以我的数组将从 2012-04 开始-01 因为这在我的结果中找不到所以我的数组将是

```
[2012-04-01]=>Array
    (
    [Mised ] = 0
    [Out ] = 0
    [Incom ] = 0
    [total_call] = 0 
```

对于 (2012-04-13) 数组将是

```
[2012-04-01]=>Array
    (
    [Mised ] = 10
    [Out ] = 55
    [Incom ] = 9
    [total_call] = 74 
    ) 
```

我试过的=

```
public function Get_Calllogs_For_Graph($user_id, $phone_service_id){

    $curdate = new DateTime(date('Y-m-d')); 
    $current_month = date("m");
    $start_date =    date("Y-$current_month-01");
    $start_date =  $curdate->format("Y-$current_month-d H:i:s");
    $curdate = new DateTime(date('Y-m-d')); 
    $curr_date =  $curdate->format('Y-m-d H:i:s');

    $DB = Zend_Db_Table_Abstract::getDefaultAdapter();
    $select = $DB->select()
                            ->from('call', array('*', 'CAST(call_time AS DATE) AS call_time '))
                                    ->where('phone_service_id = ?', $phone_service_id)
                                    ->where('user_id = ?', $user_id)
                                    ->where(" call_time >= ?",  $start_date)
                                    ->where(" call_time<= ?",  $curr_date);
                                        $select = $DB->fetchAssoc($select);

    $records = array('Outgoing' => array(), 'Incoming' => array(), 'Missed' => array() );               
    if(count($select)){
        foreach($select as $sel){

                if(!array_key_exists($sel['call_name'], $records[$sel['call_type']])){
                    $records[$sel['call_type']][$sel['call_name']] = $this->Get_Calllogs_By_Callname($user_id, $phone_service_id, $start_date, $curr_date, $sel['call_name'], $sel['call_type']);
                }

        }
    }
    echo '<pre>';
    print_r($records);
    echo '</pre>';

    }
public function Get_Calllogs_By_Callname($user_id, $phone_service_id, $start_date, $curr_date, $call_name, $call_direction){

        $DB = Zend_Db_Table_Abstract::getDefaultAdapter();
        $select = $DB->select()
                ->from('call_log', array('COUNT(*) AS total', 'CAST(call_name AS DATE) AS call_name'))
                        ->where('phone_service_id = ?', $phone_service_id)
                        ->where('user_id = ?', $user_id)
                        ->where('call_type= ?', $call_type)
                        ->having('call_name = ? ', $call_name);
                        //->where("call_type>= ?",  $start_date)
                        //->where("call_type<= ?",  $curr_date);

                            $select = $select->query()->fetchAll();
                            if(count($select)){

                                return $select[0]['total'];

                            }else{
                                return 0;
                            }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:53:25.563

```
select call_time, call_type, count(*) as num_by_type from db
group by YEAR(call_time), MONTH(call_time), DAY(call_time), call_type. 
```

所以你每天都有每个 call_type 的总和（意味着每天最多 3 个条目）。

那么你每天做一个数组应该不会太难，总和是三种类型之和的总和（num_by_type）。

# opengl - OpenGL VBO 设置

> ID：10075653
> 
> 赞同：0
> 
> 时间：2012-04-09T15:35:26.630
> 
> 标签：opengl, vbo

我已经看到了很多关于减少对 openGL 的调用的信息，但是我对管道的理解不够好。您可以完全设置 VBO 时间吗？具体使用此[示例](http://www.opengl.org/wiki/Vertex_Buffer_Object)，它设置 VBO，然后每个帧在绘制调用之前调用启用/指针设置。VBO 可以在创建时使用启用/指针设置完全设置吗？

像这样的东西

```
 Data_Init_Func(...)
 {
 ....

 glGenBuffers(1, &IndexVBOID);
 glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexVBOID);
 glBufferData(GL_ELEMENT_ARRAY_BUFFER, SizeInBytes, NULL, GL_STATIC_DRAW);
 short pindices[YYY];
 pindices[0]=0;
 pindices[1]=5;
 //etc...
 offsetInByte=0;
 glBufferSubData(GL_ELEMENT_ARRAY_BUFFER, offsetInByte, SizeInBytes, pindices);

 glGenBuffers(1, VertexVBOID);
 glBindBuffer(GL_ARRAY_BUFFER, VertexVBOID);
 glBufferData(GL_ARRAY_BUFFER, SizeInBytes, NULL, GL_STATIC_DRAW);4

 //data creation and binding
 ...

 // Normally it seems like this code is PER FRAME... DOES IT NEED TO BE?
 glEnableClientState(GL_VERTEX_ARRAY);
 glEnableClientState(GL_NORMAL_ARRAY); 
 glVertexPointer(3, GL_FLOAT, 64, BUFFER_OFFSET(0));
 glNormalPointer(GL_FLOAT, 64, BUFFER_OFFSET(12));
 glClientActiveTexture(GL_TEXTURE0);
 glEnableClientState(GL_TEXTURE_COORD_ARRAY);    //Notice that after we call            
 glClientActiveTexture, we enable the array
 glTexCoordPointer(2, GL_FLOAT, 64, BUFFER_OFFSET(24));
 glClientActiveTexture(GL_TEXTURE1);
 glEnableClientState(GL_TEXTURE_COORD_ARRAY);    //Notice that after we call
 glClientActiveTexture, we enable the array
 glTexCoordPointer(2, GL_FLOAT, 64, BUFFER_OFFSET(32));
 glClientActiveTexture(GL_TEXTURE2);
 glEnableClientState(GL_TEXTURE_COORD_ARRAY);    //Notice that after we call
 glClientActiveTexture, we enable the array
 glTexCoordPointer(2, GL_FLOAT, 64, BUFFER_OFFSET(40));
 ...
 }

 Draw(...)
 {
 glBindBuffer(GL_ARRAY_BUFFER_ARB, VertexVBOID);         // for vertex coordinates
 glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, IndexVBOID); // for indices

 // DO I NEED TO CALL THE VERTEX ENABLING/POINTER SETUP HERE?

 // draw 6 quads using offset of index array
 glDrawRangeElements(GL_TRIANGLES, x, y, z, GL_UNSIGNED_SHORT, BUFFER_OFFSET(0));

 ...
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:19:07.657

```
// DO I NEED TO CALL THE VERTEX ENABLING/POINTER SETUP HERE? 
```

是的。

没有任何属性启用和`gl*Pointer`调用修改缓冲区对象*本身*。您不会告诉缓冲区对象它被用于位置和法线。将缓冲区对象想象成一个哑字节数组。

这些`gl*Pointer`调用告诉 OpenGL 如何解释该字节数组。它们没有附加到缓冲区。他们不修改缓冲区。它们只是告诉 OpenGL 在哪里可以找到特定缓冲区中的特定数据。

如果您想存储这些设置并在以后重置它们，您需要一个[顶点数组对象](http://www.opengl.org/wiki/Vertex_Array_Object)。

# python - 如何将字典和数组保存在同一个存档中（使用 numpy.savez）

> ID：10075661
> 
> 赞同：16
> 
> 时间：2012-04-09T15:35:53.593
> 
> 标签：python, dictionary, numpy

这里的第一个问题。我会尽量简洁。

我正在为机器学习应用程序生成包含特征信息的多个数组。由于数组的维度不同，我将它们存储在字典而不是数组中。有两种不同的功能，所以我使用了两个不同的字典。

我还生成标签以配合功能。这些标签存储在数组中。此外，还有一些字符串包含用于运行脚本的确切参数和时间戳。

总而言之，它看起来像这样：

```
import numpy as np    

feature1 = {}
feature2 = {}
label1 = np.array([])
label2 = np.array([])
docString = 'Commands passed to the script were...'

# features look like this:
feature1 = {'case 1': np.array([1, 2, 3, ...]),
            'case 2': np.array([2, 1, 3, ...]),
            'case 3': np.array([2, 3, 1, ...]),
            and so on... } 
```

现在我的目标是这样做：

```
np.savez(outputFile, 
         saveFeature1 = feature1, 
         saveFeature2 = feature2, 
         saveLabel1 = label1, 
         saveLabel2 = label2,
         saveString = docString) 
```

这似乎可行（即这样的文件被保存而没有抛出错误并且可以再次加载）。但是，当我尝试再次从文件中加载功能时：

```
loadedArchive = np.load(outFile)
loadedFeature1 = loadedArchive['saveFeature1']
loadedString = loadedArchive['saveString'] 
```

然后，我没有得到字典，而是得到一个形状为 (0) 的 numpy 数组，我不知道如何访问其中的内容：

```
In []: loadedFeature1
Out[]: 
       array({'case 1': array([1, 2, 3, ...]), 
              'case 2': array([2, 3, 1, ...]), 
              ..., }, dtype=object) 
```

字符串也变成数组并得到一个奇怪的数据类型：

```
In []: loadedString.dtype
Out[]: dtype('|S20') 
```

简而言之，我假设这不是正确完成的方式。但是，我不希望将所有变量放入一个大字典中，因为我将在另一个进程中检索它们，并且只想循环遍历 dictionary.keys() 而不必担心字符串比较。

任何想法都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T16:28:23.090

正如@fraxel 已经建议的那样，在这种情况下使用pickle 是一个更好的选择。只需将`dict`您的物品保存在其中即可。

但是，请务必将 pickle 与二进制协议一起使用。默认情况下，它的格式效率较低，如果您的数组很大，这将导致过多的内存使用和巨大的文件。

```
saved_data = dict(outputFile, 
                  saveFeature1 = feature1, 
                  saveFeature2 = feature2, 
                  saveLabel1 = label1, 
                  saveLabel2 = label2,
                  saveString = docString)

with open('test.dat', 'wb') as outfile:
    pickle.dump(saved_data, outfile, protocol=pickle.HIGHEST_PROTOCOL) 
```

话虽如此，让我们更详细地了解正在发生的事情以进行说明。

`numpy.savez`期望每个项目都是一个数组。事实上，它会调用`np.asarray`你传入的所有内容。

如果你把 a`dict`变成一个数组，你会得到一个对象数组。例如

```
import numpy as np

test = {'a':np.arange(10), 'b':np.arange(20)}
testarr = np.asarray(test) 
```

同样，如果你用一个字符串创建一个数组，你会得到一个字符串数组：

```
In [1]: np.asarray('abc')
Out[1]: 
array('abc', 
      dtype='|S3') 
```

但是，由于对象数组的处理方式有一个怪癖，如果您传入一个`dict`不是元组、列表或数组的对象（在您的情况下是您的 ），您将获得一个 0 维对象数组.

这意味着您不能直接索引它。事实上，doing`testarr[0]`会提高`IndexError`. 数据还在，但是需要先添加一个维度，所以必须做`yourdictionary = testarr.reshape(-1)[0]`.

如果所有这些看起来都很笨拙，那是因为它确实如此。对象数组本质上总是错误的答案。（虽然`asarray`可以说应该传入`ndmin=1`to `array`，这将解决这个特定问题，但可能会破坏其他东西。）

`savez`旨在存储数组，而不是任意对象。由于它的工作方式，它*可以*存储完全任意的对象，但不应该那样使用。

但是，如果您确实想使用它，一个快速的解决方法是：

```
np.savez(outputFile, 
         saveFeature1 = [feature1], 
         saveFeature2 = [feature2], 
         saveLabel1 = [label1], 
         saveLabel2 = [label2],
         saveString = docString) 
```

然后你会用

```
loadedArchive = np.load(outFile)
loadedFeature1 = loadedArchive['saveFeature1'][0]
loadedString = str(loadedArchive['saveString']) 
```

然而，这显然比只使用泡菜要笨重得多。`numpy.savez`当您只是保存数组时使用。在这种情况下，您保存的是嵌套数据结构，而不是数组。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-09T18:50:26.093

如果您需要以结构化的方式保存数据，您应该考虑使用 HDF5 文件格式 ( [http://www.hdfgroup.org/HDF5/](http://www.hdfgroup.org/HDF5/) )。它非常灵活、易于使用、高效，其他软件可能已经支持它（HDFView、Mathematica、Matlab、Origin..）。有一个名为[h5py](http://code.google.com/p/h5py/ "h5py")的简单 python 绑定。

您可以将数据集存储在类似结构的文件系统中，并为每个数据集定义属性，例如字典。例如：

```
import numpy as np
import h5py

# some data
table1 = np.array([(1,1), (2,2), (3,3)], dtype=[('x', float), ('y', float)])
table2 = np.ones(shape=(3,3))

# save to data to file
h5file = h5py.File("test.h5", "w")
h5file.create_dataset("Table1", data=table1)
h5file.create_dataset("Table2", data=table2, compression=True)
# add attributes
h5file["Table2"].attrs["attribute1"] = "some info"
h5file["Table2"].attrs["attribute2"] = 42
h5file.close() 
```

读取数据也很简单，如果需要，您甚至可以从一个大文件中加载几个元素：

```
h5file = h5py.File("test.h5", "r")
# read from file (numpy-like behavior)
print h5file["Table1"]["x"][:2]
# read everything into memory (real numpy array)
print np.array(h5file["Table2"])
# read attributes
print h5file["Table2"].attrs["attribute1"] 
```

在文档和网站上可以找到更多功能和可能性（可能会感兴趣[快速入门指南）。](http://h5py.alfven.org/docs-2.0/intro/quick.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:55:03.783

将所有变量放入一个对象中，然后使用[Pickle](http://docs.python.org/library/pickle.html)。这是存储状态信息的更好方法。

# android - Android：使用 ArrayList 强制关闭打开 Spinner

> ID：10075666
> 
> 赞同：1
> 
> 时间：2012-04-09T15:36:21.377
> 
> 标签：android, arraylist, xml-parsing, android-spinner

我有一个问题，非常烦人的问题，我完全不知道是什么原因造成的！我正在尝试制作一个能够读取 XML 文件的 Android 应用程序，将 XML 文件中的一些数据添加到 ArrayList，然后将 ArrayList 放入 Spinner。这是我的快捷方式课程的一部分。

> 快捷方式.java

```
Spinner selection = (Spinner) findViewById(R.id.shortcutsSpinner); //Defining the Spinner
        /*ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.shortcut_selection, android.R.layout.simple_spinner_item); //Defining the items in the Spinner
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        selection.setAdapter(adapter); //Setting the items to the Spinner*/
        ArrayList<String> items;
        try {
            items = scanner.getCategorys();
        } catch (FileNotFoundException e) {
            items = null;
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            items = null;
            e.printStackTrace();
        } catch (IOException e) {
            items = null;
            e.printStackTrace();
        }
        @SuppressWarnings({ "unchecked", "rawtypes" })
        ArrayAdapter<CharSequence> adapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, items);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        selection.setAdapter(adapter);

        selection.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                final String simulatorCommands = getString(R.string.Simulator_Commands); //Setting Shortcuts
                final String controlSurfaceCommands = getString(R.string.Control_Surface_Commands);
                TextView Text = (TextView)findViewById(R.id.shortcutsText);  //Defining the TextView
                Spinner selection = (Spinner) findViewById(R.id.shortcutsSpinner); //Defining the Spinner 
```

这是我的扫描仪课程的一部分

> 扫描仪.java

```
public ArrayList<String> getCategorys() throws XmlPullParserException, IOException {
        ArrayList<String> categorys = new ArrayList<String>();
        categorys.add("Please select a category");
        //START ADDING HERE
        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser parser = factory.newPullParser();
        File file = new File(Environment.getExternalStorageDirectory()+ "/fsx_kneeboard/categories.xml");
        FileInputStream fis = new FileInputStream(file);
        parser.setInput(new InputStreamReader(fis));
        parser.next();
        int eventType = parser.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG && parser.getName().equals("name")) {
                categorys.add(parser.getText());
            }
            parser.next();
            eventType = parser.getEventType();
        }
        return categorys;

    } 
```

我可以进入 Scanner 活动，但是当我尝试打开 Spinner 时，我会强制关闭，这在 logcat 中。

> 04-09 17:30:56.452: D/AndroidRuntime(9980): 关闭 VM 04-09 17:30:56.452: W/dalvikvm(9980): threadid=1: 线程退出未捕获异常 (group=0x4001d7e8) 04 -09 17:30:56.482：E/AndroidRuntime(9980)：致命异常：主要 04-09 17:30:56.482：E/AndroidRuntime(9980)：java.lang.NullPointerException 04-09 17:30:56.482：E /AndroidRuntime(9980): 在 android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:355) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.widget.ArrayAdapter.getDropDownView(ArrayAdapter.java: 376) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.widget.Spinner$DropDownAdapter.getDropDownView(Spinner.java:329) 04-09 17:30:56.482: E/AndroidRuntime(9980) : 在 android.widget.Spinner$DropDownAdapter.getView(Spinner.java:325) 04-09 17:30:56.482: E/AndroidRuntime(9980):在 android.widget.AbsListView.obtainView(AbsListView.java:1294) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.widget.ListView.measureHeightOfChildren(ListView.java:1198) 04-09 17 :30:56.482: E/AndroidRuntime(9980): 在 android.widget.ListView.onMeasure(ListView.java:1109) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.view.View。测量（View.java:8171）04-09 17:30:56.482：E/AndroidRuntime（9980）：在 android.view.ViewGroup.measureChildWithMargins（ViewGroup.java:3132）04-09 17:30:56.482：E/ AndroidRuntime(9980): 在 android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.widget.LinearLayout.measureVertical(LinearLayout.java:381 ) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.widget.LinearLayout。onMeasure(LinearLayout.java:304) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.view.View.measure(View.java:8171) 04-09 17:30:56.482: E/ AndroidRuntime(9980): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1012 ) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.widget.LinearLayout.measureVertical(LinearLayout.java:381) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android .widget.LinearLayout.onMeasure(LinearLayout.java:304) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 com.android.internal.widget.WeightedLinearLayout.onMeasure(WeightedLinearLayout.java:60) 04- 09 17:30:56.482: E/AndroidRuntime(9980): 在 android.view.View.measure(View.java:8171) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在android.widget.FrameLayout.onMeasure(FrameLayout.java:245) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.view.View.measure(View.java:8171) 04-09 17: 30:56.482: E/AndroidRuntime(9980): 在 android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.widget.FrameLayout.onMeasure (FrameLayout.java:245) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.view.View.measure(View.java:8171) 04-09 17:30:56.482: E/AndroidRuntime (9980): 在 android.view.ViewRoot.performTraversals(ViewRoot.java:801) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.view.ViewRoot。handleMessage(ViewRoot.java:1727) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.os.Handler.dispatchMessage(Handler.java:99) 04-09 17:30:56.482: E/ AndroidRuntime(9980): 在 android.os.Looper.loop(Looper.java:123) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 android.app.ActivityThread.main(ActivityThread.java:4627 ) 04-09 17:30:56.482: E/AndroidRuntime(9980): at java.lang.reflect.Method.invokeNative(Native Method) 04-09 17:30:56.482: E/AndroidRuntime(9980): at java. lang.reflect.Method.invoke(Method.java:521) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858 ) 04-09 17:30:56.482: E/AndroidRuntime(9980): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) 04-09 17:30:56.482: E/AndroidRuntime(9980 ）：在达尔维克。system.NativeStart.main（本机方法）

我不太了解 logcat，我是 Java 新手。我知道问题出在这段代码中；当我删除它时，微调器会打开并显示“请选择一个类别”。

```
while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_TAG && parser.getName().equals("name")) {
                categorys.add(parser.getText());
            }
            parser.next();
            eventType = parser.getEventType();
        } 
```

但是该代码对我来说似乎很干净，请帮忙吗？感谢您的时间和帮助，我将非常感激，zeokila。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:40:46.427

查看[javadoc](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html#getName%28%29) `parser.getName()`可能为空：

> 如果当前事件不是 START_TAG、END_TAG 或 ENTITY_REF，则返回 null。

您可以尝试改用它：`"name".equals(parser.getName())`如果`parser.getName()`为空，它会返回 false。

并且`int eventType = parser.getEventType();`可能应该在您的 while 循环中，否则它的值在您调用时不会更新`parser.next();`。

# javascript - Chrome API：如何使用当前空的“新标签”而不是创建另一个？

> ID：10075667
> 
> 赞同：2
> 
> 时间：2012-04-09T15:36:21.983
> 
> 标签：javascript, google-chrome-extension

假设您刚刚打开 Chrome。已经打开了一个“新标签”。我的扩展程序有一个按钮，当用户按下它时，我会创建一个新选项卡来显示我的内容（index.html）。

现在一切正常，但问题是“新标签”毫无用处。我使用以下调用来创建一个新选项卡：

```
chrome.tabs.create({
  "url":"index.html"
}); 
```

update() 不起作用（没有任何反应）。

```
chrome.tabs.update({
  "url":"index.html"
}); 
```

当我检查当前选项卡时，它显示“未定义”：

```
chrome.tabs.getCurrent(function(t){console.log(t.id)}) 
```

如何使用当前的空选项卡而不是创建一个新选项卡？我看到其他一些扩展（即[Google Mail Checker](https://chrome.google.com/webstore/detail/mihcahmgecmbnbcchbopgniflfhgnkff)）也有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:59:25.030

显然，Tabs API 不允许您省略前导可选参数，例如 jQuery。要更改当前选项卡，您需要明确包含`null`作为第一个参数 (tabId) 到`update()`：

```
chrome.tabs.update(null, {
    "url":"index.html"
}); 
```

# .net - .NET MVC 4 路由

> ID：10075672
> 
> 赞同：3
> 
> 时间：2012-04-09T15:36:41.373
> 
> 标签：.net, asp.net-mvc-routing

我对 MVC 4 有点陌生，我的自定义路由有问题。我想在我的 URL 中使用斜杠 (/) 而不是问号 (?)。

这是我的代码：

**地图路线：**

```
routes.MapRoute(
    name: "Organisation",
    url: "{controller}/{action}/{startindex}/{begin}/{end}/{type}",
    defaults: new { controller = "Organisation", action = "getOrganisations" }
); 
```

**动作链接：**

```
@Html.ActionLink("Organisation", "getOrganisations", "Organisation", new { startindex = 0, begin= "a", end= "f", type = "all" }, null) 
```

**我得到的网址：**

```
http://localhost:1566/Organisation/getOrganisations?startindex=0&begin=a&end=f&type=all 
```

**我要的网址：**

```
http://localhost:1566/Organisation/getOrganisations/0/a/f/all 
```

**解决方案**

我找到了怎么做。这是如何：

```
@Html.RouteLink("Org","Organisation",new { startindex = 0, begin= "a", end= "f", type= "all" }) 
```

基本上，您可以使用将`RouteLink`路由名称和路由参数作为参数的 :)

**编辑（贾斯汀）**

```
 public ActionResult getOrganisations(int startindex, string begin, string end, string type)
    {
        List<'stored procedure'> retList= new List<'stored procedure'>();
        retList= Model.GetOrganisations(startindex, Convert.ToInt32(Request.Cookies["pagesize"].Value), begin, end, type);
        return View(retList);
    } 
```

# iphone - 离开 XMPP 房间

> ID：10075673
> 
> 赞同：3
> 
> 时间：2012-04-09T15:36:49.773
> 
> 标签：iphone, objective-c, xmppframework

我正在开发一个可以在 2 个 xmpprooms 中登录用户的应用程序，但同时只能登录 2 个，所以如果他想连接到另一个，我必须断开他与前一个的连接并连接到下一个。使用此代码：

这是我离开房间的方式：

```
[[xmppRoom] leaveRoom]; 
[[xmppRoom] deactivate];
[[xmppRoom] removeDelegate:self]; 
```

这就是我加入房间的方式：

```
[xmppRoom activate:[self xmppStream]];                
[xmppRoom joinRoom]; 
```

奇怪的行为是，如果房间有超过 10 个用户，它会崩溃而没有错误，但是如果我启用 NSZombies，我会看到指针在方法`[XMPPRoom isJoined]`中，在这一行中：

```
dispatch_sync(moduleQueue, ^{
   result = _isJoined;
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:42:52.460

您没有提供大量信息来处理，但您的问题可能会通过查看[这篇](http://xmpp.org/extensions/xep-0045.html#enter-maxusers)解释最大用户数以及它如何处理最大用户数的文章来解决。顺便说一句，好的文档，我强烈建议您检查一下。如果您以后有任何 xmpp 问题，请先查看此网站。

# javascript - jQuery Add Class on Click 但只允许一次。

> ID：10075681
> 
> 赞同：5
> 
> 时间：2012-04-09T15:37:28.383
> 
> 标签：javascript, jquery

这是我到目前为止所拥有的： ![在此处输入图像描述](../Images/958fb107b741aa4e4e83fe5d8724974b.png)

**Javascript：**

```
$(document).ready(function() {
    $(".thumb_wrapper").click(function() {
        $(this).addClass("active");
    });
}); 
```

所以这是有效的，它正在添加类，但我希望只有一个项目始终处于活动状态。因此，当我单击一个项目并使其变为活动状态时，我单击的下一个项目应该是新的活动项目，并删除前一个项目上的类。

那有意义吗？我怎么能做这样的事情？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T15:40:01.067

您需要首先从元素中删除`active`该类。`thumb_wrapper`试试这个：

```
$(".thumb_wrapper").click(function() {
    $(".thumb_wrapper").removeClass("active");
    $(this).addClass("active");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T15:40:55.803

缓存你的包装器并首先调用**[`removeClass()`](http://api.jquery.com/removeClass/)**它：

```
var $wrapper = $(".thumb_wrapper");

$wrapper.click(function() {
    $wrapper.removeClass("active");
    $(this).addClass("active");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:43:01.733

```
$(".thumb_wrapper").on('click', function() {
    $(".thumb_wrapper").removeClass('active').find(this).addClass("active");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:40:38.583

这应该这样做。

```
$(document).ready(function() {
    $(".thumb_wrapper").click(function() {
        $(this).parent().children().each(function() { 
             $(this).removeClass("active");
         });
         $(this).addClass("active");
     });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T15:43:14.303

```
$(document).ready(function(){
    $('.what').click(function(){
        $('.what').removeClass('active');
        $(this).addClass('active');       
   });       
}); 
```

我假设这样的事情？

# ruby-on-rails - 将 Rails App Template CD 设为 root 并运行捆绑命令？

> ID：10075690
> 
> 赞同：0
> 
> 时间：2012-04-09T15:37:59.473
> 
> 标签：ruby-on-rails, ruby, thor

我相信你会欣赏这种懒惰的尝试：我想在 Rails 3.2 中改进我的应用程序模板脚本。

我做类似的事情 `rails new APPNAME -m path/to/template.rb`

我想更新脚本以允许我`cd`进入新应用程序以便我可以运行`bundle exec COMMAND`？

例如，

```
if compass = yes?("Would you like to install Compass and Susy?")
gem_group :assets do
 gem 'compass-rails'
 gem 'compass-susy-plugin'
end

     if compass == true
      run "bundle install"
      inside "#{Rails.application.class.parent_name}" do
        run "bundle exec compass install susy"
       end
 end
end 
```

当我运行上面的代码时，我得到一个错误，比如 -

```
unexpected keyword_do_block (SyntaxError)
  /home/rhodee/GitRepos/dotfiles/workflow.rb:103: syntax error, unexpected keyword_end,   expecting $end 
```

感谢您启用我的懒惰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:13:55.337

您应该能够删除“内部”并简单地执行

```
run "bundle exec compass install susy" 
```

要实际移动到目录中并执行某些操作，您可以：

```
run "cd #{Rails.application.class.parent_name}/public; rm index.html" 
```

（当然，您可以将上述内容运行为“rm public/index.html”，但这不是重点。）

# android - 将 TabSpec 添加到 TabHost 时 Android 应用程序崩溃 - “资源 ID 无效”

> ID：10075695
> 
> 赞同：2
> 
> 时间：2012-04-09T15:38:25.460
> 
> 标签：android, android-tabhost, dalvik, tabwidget

我已经遵循了[TabLayout 的 Android 教程](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)，现在我正在尝试通过使用布局以及每个选项卡的活动来修改它。不幸的是，将 TabSpec 添加到我的 TabHost 时，我的应用程序因“资源 ID 无效”错误而崩溃。

我相信这里的错误与 Dalvik 不理解我对我的选项卡布局 XML 文件的引用有关，但不明白为什么会这样。我尝试`<include>`在我的 main.xml 文件中使用其他语句，但无济于事。非常欢迎任何帮助！

崩溃的Java代码：

```
public class TabLayoutActivity extends TabActivity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources();
    //mTabHost = getTabHost();
    mTabHost = (TabHost) findViewById(android.R.id.tabhost);
    mTabHost.setup();

    TabHost.TabSpec spec; 
    Intent intent;

    //Search tab
    intent = new Intent(this, SearchActivity.class);
    spec = mTabHost.newTabSpec("search_tab");
    spec.setIndicator("Search", res.getDrawable(R.drawable.magnifyingglass));
    spec.setContent(intent);        
    mTabHost.addTab(spec); //this line crashes

    //Allergies tab - when the above tab is commented out, this tab adds successfully
    intent = new Intent(this, AllergiesActivity.class);
    spec = mTabHost.newTabSpec("allergies_tab")
            .setIndicator("Allergies", res.getDrawable(R.drawable.man))
            .setContent(intent);

    mTabHost.addTab(spec);

    mTabHost.setCurrentTab(0);
}
} 
```

违规标签的活动：

```
public class SearchActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.id.search_tab_layout);
}
} 
```

另一个（工作）选项卡的活动（注意未指定布局）：

```
public class AllergiesActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    TextView textView = new TextView(this);
    textView.setText("Allergies");
    setContentView(textView);

}
} 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <LinearLayout
                  android:orientation="vertical"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent">

        <TabWidget android:id="@android:id/tabs"
                   android:layout_width="fill_parent"
                   android:layout_height="wrap_content">

        </TabWidget>

        <FrameLayout android:id="@android:id/tabcontent"
                     android:layout_width="fill_parent"
                     android:layout_height="fill_parent">

        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

search_tab.xml - 这不是以某种方式包含的吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/search_tab_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" xmlns:android1="http://schemas.android.com/apk/res/android">

</LinearLayout> 
```

日志输出：

```
04-09 16:08:23.434: D/ddm-heap(532): Got feature list request
04-09 16:08:23.843: D/AndroidRuntime(532): Shutting down VM
04-09 16:08:23.843: W/dalvikvm(532): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-09 16:08:23.843: E/AndroidRuntime(532): Uncaught handler: thread main exiting due to uncaught exception
04-09 16:08:23.873: E/AndroidRuntime(532): java.lang.RuntimeException: Unable to start activity ComponentInfo{mattjackson.allergyassassin/mattjackson.allergyassassin.TabLayoutActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{mattjackson.allergyassassin/mattjackson.allergyassassin.SearchActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x7f050003 type #0x12 is not valid
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.os.Looper.loop(Looper.java:123)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-09 16:08:23.873: E/AndroidRuntime(532):  at java.lang.reflect.Method.invokeNative(Native Method)
04-09 16:08:23.873: E/AndroidRuntime(532):  at java.lang.reflect.Method.invoke(Method.java:521)
04-09 16:08:23.873: E/AndroidRuntime(532):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-09 16:08:23.873: E/AndroidRuntime(532):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-09 16:08:23.873: E/AndroidRuntime(532):  at dalvik.system.NativeStart.main(Native Method)
04-09 16:08:23.873: E/AndroidRuntime(532): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{mattjackson.allergyassassin/mattjackson.allergyassassin.SearchActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x7f050003 type #0x12 is not valid
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:2335)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:648)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.widget.TabHost.setCurrentTab(TabHost.java:320)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.widget.TabHost.addTab(TabHost.java:213)
04-09 16:08:23.873: E/AndroidRuntime(532):  at mattjackson.allergyassassin.TabLayoutActivity.onCreate(TabLayoutActivity.java:31)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-09 16:08:23.873: E/AndroidRuntime(532):  ... 11 more
04-09 16:08:23.873: E/AndroidRuntime(532): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f050003 type #0x12 is not valid
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:1870)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.content.res.Resources.getLayout(Resources.java:730)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-09 16:08:23.873: E/AndroidRuntime(532):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.Activity.setContentView(Activity.java:1622)
04-09 16:08:23.873: E/AndroidRuntime(532):  at mattjackson.allergyassassin.SearchActivity.onCreate(SearchActivity.java:11)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-09 16:08:23.873: E/AndroidRuntime(532):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-09 16:08:23.873: E/AndroidRuntime(532):  ... 20 more
04-09 16:08:23.903: I/dalvikvm(532): threadid=7: reacting to signal 3
04-09 16:08:23.903: E/dalvikvm(532): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T16:05:04.940

在您的 SearchActivity 中，您必须设置布局。您尝试将视图（来自您的布局）设置为活动的布局。代替

```
 setContentView(R.id.search_tab_layout); 
```

做

```
 setContentView(R.layout.search_tab); 
```

# java - 如何使用 Spring 配置 Eclipse RCP

> ID：10075696
> 
> 赞同：4
> 
> 时间：2012-04-09T15:38:28.330
> 
> 标签：java, spring, eclipse-rcp, spring-dm

如何使用 spring 配置 eclipse RCP？我需要[弹簧 dm](http://www.springsource.org/osgi)吗？

你能给我看一个关于如何使用 Eclipse RCP 或 Eclipse RAP 配置 spring 的教程吗？

1.  如何将 spring 添加到 Eclipse RCP 并使用它？我怎样才能看到无处不在的上下文？
2.  我必须添加一些东西`Target Platform`吗？
3.  有没有教程或者你能告诉我更多细节吗？

我只想在我的 Eclipse RCP 应用程序中使用 Spring。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T18:41:24.583

使用 Spring DM 不是唯一的方法，但我相信这是最简单、最完整/正确的方法。在 Spring DM 之前，有几个项目以集成 Spring 和 Eclipse RCP 为目标，但都不是很简单，也不是很像 Spring。我遇到了一位博主，他目前正在撰写一系列关于使用 Spring DM 集成 Spring 和 Eclipse RCP 的文章。前 4 篇文章通过示例准确地介绍了您需要了解的内容（第 0 步到第 3 步）。

完整的文章列表在这里： [http ://angelozerr.wordpress.com/category/java/spring/spring-dm/](http://angelozerr.wordpress.com/category/java/spring/spring-dm/)

同一位博主在另一组文章中谈到了他自己的 RCP/RAP 项目（他正在使用 Spring DM）。这些是法语的，但使用谷歌翻译使它们对非法语使用者很有用。看看这里的第 7 步和第 8 步：http: [//angelozerr.wordpress.com/about/dynaresume/](http://angelozerr.wordpress.com/about/dynaresume/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T13:04:09.807

我最近写了一篇关于这个主题的博客，你可以在这里找到分步教程：http: [//blog.novatec-gmbh.de/step-step-spring-eclipse-rcp-applications/](http://blog.novatec-gmbh.de/step-step-spring-eclipse-rcp-applications/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:52:27.823

我认为我的回答可能对任何想要构建 Spring DM、OSGI 控制台应用程序的人（比如我）有所帮助。

虽然已经有一段时间了，自从 Spring DM 被继承为 Gemini Blueprint，建议使用 Gemini Blueprint 而不是 Spring DM。尽管如此，Spring DM 也是一个很好的起点。

本教程值得一看：[http](http://www.jroller.com/dbrosius/entry/osgi_spring_dm_w_o) ://www.jroller.com/dbrosius/entry/osgi_spring_dm_w_o 它提供了分步信息

**注意：** Manifest.MF 文件中有一个小的包名拼写错误需要修复。Eclipse 会标记它，所以它不是问题

# php - 使用 Codeigniter 获取定向/来自的 url

> ID：10075697
> 
> 赞同：0
> 
> 时间：2012-04-09T15:38:30.657
> 
> 标签：php, codeigniter, url

如何找到被引导的 URL（即控制器执行之前用户所在的页面）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:16:18.907

我想你正在寻找`$this->input->server('HTTP_REFERER');`

[资源](http://codeigniter.com/user_guide/libraries/input.html)

# wordpress - Wordpress 挂钩 - 外部数据库连接

> ID：10075704
> 
> 赞同：0
> 
> 时间：2012-04-09T15:39:18.483
> 
> 标签：wordpress, http-headers, hook, dbconnection

我正在为 wordpress 开发一个简码。我的简码和小部件都需要连接到外部数据库才能获取信息。

我的第一个问题是我用什么钩子连接到外部数据库。我目前设置的方式告诉我标头已经发送。我需要它与标头一起发送以进行干净连接。如果不需要，我不想使用输出缓冲区。我想建立一个干净的连接。我用什么钩子来建立连接而不是得到标题错误？

我的第二个问题是：有没有办法只在某些页面上调用这个钩子？我不想在包含短代码的页面上的每个页面上都进行此连接。是否有 if 语句或某种钩子过滤器，以便仅在需要时进行 db connect，而不是在每次页面加载时调用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:46:38.943

“wp”钩子在当前 $post 设置之后但在标题输出之前运行。

因此，您应该能够进行检查`if(strpos($post->post_content, "[shortcode]") !== false)`以确定数据库连接代码是否应该运行。

你会像这样使用那个钩子：

```
add_action("wp", "my_wp"); //where "my_wp" is the name of your function 
```

# javascript - JavaScript - 检查选择框中的唯一值

> ID：10075708
> 
> 赞同：1
> 
> 时间：2012-04-09T15:39:47.253
> 
> 标签：javascript, html

找不到任何我想要的东西，但如果我错过了一些明显的东西，我很抱歉。我基本上是在尝试让 JavaScript 函数检查多个选择框中的每一个是否具有唯一值，然后再将表单提交到数据库中。

可以有任意数量的选择框，但都遵循类似的命名格式，形式如下：

```
operator_address_type_0
operator_address_type_1
operator_address_type_2
etc. 
```

我只是想知道如何设置一个 JavaScript 函数来循环遍历所有选择框并提醒用户并在发现任何具有相同值的情况下停止提交。

谢谢你的帮助。

编辑：

这是我当前选择框的一些简化 HTML。我不得不对其进行大量简化，因为它们所在的表都是通过 AJAX 从查询数据库中加载的。

```
<select name="operator_address_type_0">
<option value="Main">Main</option>
<option value="Payment">Payment</option>
<option value="Poster">Poster</option>
</select>

<select name="operator_address_type_1">
<option value="Main">Main</option>
<option value="Payment">Payment</option>
<option value="Poster">Poster</option>
</select> 
```

就是这样，但未来可能会有更多选择，我只是想检查一下是否只有一个主要地址，一个付款地址，一个海报地址等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T16:11:56.433

像下面这样的东西？

```
function checkDuplicates() {
  var selects = document.getElementsByTagName("select"),
      i,
      current,
      selected = {};
  for(i = 0; i < selects.length; i++){
    current = selects[i].selectedIndex;
    if (selected[current]) {
      alert("Each address type may not be selected more than once.");
      return false;
    } else
      selected[current] = true;
  }
  return true;
} 
```

演示：http: [//jsfiddle.net/GKTYE/](http://jsfiddle.net/GKTYE/)

这将遍历选择并记录每个选择的索引，如果发现重复则停止。这假设所有选择都以相同的顺序具有相同的选项。要测试实际选择的值：

```
 current = selects[i].options[selects[i].selectedIndex].value; 
```

# java - 在 PrimeFaces 表单中验证后 JSF 转换器不起作用

> ID：10075711
> 
> 赞同：1
> 
> 时间：2012-04-09T15:40:10.737
> 
> 标签：java, jsf, primefaces, converter

我正在开发一个使用 JSF 2.1 和 PrimeFaces 3.2、服务器 Tomcat 7 的应用程序。现在，我正在处理注册新用户的表单。问题出在转换器上。

我使用的标准字段很少，其中两个是密码。我有密码的自定义数据类型，所以我想使用转换器将字符串数据从字段转换为 bean 中的密码变量。Primefaces 表单提交后使用 AJAX，可能存在问题。如果我完整填写表格，没有验证错误，一切正常。但是，如果存在验证错误且没有转换器错误（我检查转换器中的密码长度），则整个表单将完全停止工作。我必须刷新页面才能让它再次工作。

以下是一些来源：

密码类：

```
public class Password {

    public static final short MIN_LENGTH = 5;

    private String text;
    private String hash;

    public Password(String text) {
        this.text = text;
        this.hash = Hasher.sha512(text);
    }

    /**
     * Get password instance with known hash only
     * @param hash SHA-512 hash
     * @return Password instance
     */
    public static Password getFromHash(String hash) {
        Password password = new Password(null);
        password.hash = hash;
        return password;
    }

    @Override
    public int hashCode() {
        return hash.hashCode();
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Password other = (Password) obj;
        if ((this.hash == null) ? (other.hash != null) : !this.hash.equals(other.hash)) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return hash;
    }

    /**
     * @return the text
     */
    public String getText() {
        return text;
    }
} 
```

密码转换器：

```
@FacesConverter(forClass = Password.class)
public class PasswordConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        String text = (String) value;

        if (text.length() >= Password.MIN_LENGTH) {
            return new Password(text);
        }

        FacesMessage msg = new FacesMessage(Texter.get("forms/forms", "shortPassword").replace("%limit%", String.valueOf(Password.MIN_LENGTH)));
        msg.setSeverity(FacesMessage.SEVERITY_ERROR);
        throw new ConverterException(msg);
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        try {
            Password password = (Password) value;
            return password.getText();
        } catch (Exception ex) {
            throw new ConverterException(ex);
        }
    }
} 
```

facelet中的表格：

```
<h:form id="registration">
    <p:panelGrid columns="3">

        <h:outputLabel value="#{commonTxt.email}:" for="email" />
        <p:inputText id="email" value="#{userRegistrationForm.email}" required="true" requiredMessage="#{formsTxt.msgEmpty}">
            <f:validator validatorId="email" />

            <f:validator validatorId="unique" />
            <f:attribute name="entity" value="SystemUser" />
            <f:attribute name="field" value="email" />
            <f:attribute name="uniqueMessage" value="#{formsTxt.nonUniqueEmail}" />
        </p:inputText>
        <p:message for="email" />

        <h:outputLabel value="#{usersTxt.password}:" for="password" />
        <p:password id="password" value="#{userRegistrationForm.password}" binding="#{password}" autocomplete="off" feedback="true" weakLabel="#{formsTxt.passwordWeak}" goodLabel="#{formsTxt.passwordGood}" strongLabel="#{formsTxt.passwordStrong}" promptLabel="#{formsTxt.passwordPrompt}" />
        <p:message for="password" />

        <h:outputLabel value="#{usersTxt.passwordCheck}:" for="passwordCheck" />
        <p:password id="passwordCheck" value="#{userRegistrationForm.passwordCheck}" binding="#{passwordCheckInput}" autocomplete="off">
            <f:validator validatorId="match" />
            <f:attribute name="matchAgainst" value="#{password}" />
            <f:attribute name="matchMessage" value="#{formsTxt.passwordMismatch}" />
        </p:password>
        <p:message for="passwordCheck" />

        <p:column /><p:column /><p:column />

        <h:outputLabel value="#{usersTxt.name}:" for="name" />
        <p:inputText id="name" value="#{userRegistrationForm.name}" maxlength="255" required="true" requiredMessage="#{formsTxt.msgEmpty}" />
        <p:message for="name" />

        <f:facet name="footer">
            <p:commandButton value="#{usersTxt.register}" action="#{userRegistrationForm.register()}" update="registration" />
        </f:facet>
    </p:panelGrid>
</h:form> 
```

我不会发布 bean 的代码`#{userRegistrationForm}`，有两个带 getter 和 setter 的 Passwords 属性。

任何有助于解决我的问题的帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:25:30.940

解决了！我只是用来`FacesContext.getCurrentInstance().isValidationFailed()`查看验证是否失败。如果发生故障，转换器现在返回 null（转换不会完成），在其他情况下转换器将返回正确的对象。表格在转换工作时工作正常。

# java - Java：根据第二列的值对二维数组进行排序

> ID：10075714
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:40:37.170
> 
> 标签：java, arrays, sorting

我正在使用 Java，我有一个 int[][] 数组，如下所示：

```
[ 65][  4]  
[108][ 47]  
[ 32][279]  
[103][ 26]  
[111][138]  
[100][ 63]  
[112][ 33] ...etc. 
```

我需要根据第二列的值从最小到最大排序。我试过这段代码，也在这个网站上找到：

```
 print(myArray);
    System.out.println("==========");

    Arrays.sort(myArray, new Comparator<int[]>() {
        @Override
        public int compare(int[] int1, int[] int2)
        {
            Integer number1 = int1[1];
            Integer number2 = int2[1];
            return number1.compareTo(number2);
        }
    });

    print(myArray); 
```

我的打印方法如下：

```
public static void print(int[][] array) {
    int k = 0;
    while (array[k][0] != 0) {
        System.out.println("[" + array[k][0] + "][" + array[k][1] + "]");
        k++;
    }
} 
```

无论如何，它似乎都没有打印第二次。我只是不确定我在这里做错了什么。希望这只是一个简单的修复:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T15:56:58.633

您的打印方法似乎很糟糕（或者您提供的代码不足以重现您的错误）。您的代码第一次打印，但随后遇到 ArrayIndexOutOfBoundsException （如果这是实际问题，您也应该得到它）。

试试这个打印方法，它对我有用。

```
public static void print(int[][] array) {
    for (int i = 0; i < array.length; i++) {
        System.out.println("[" + array[i][0] + "][" + array[i][1] + "]");
    }
} 
```

# asp.net-mvc-3 - 在局部视图中使用表单中的模型数据

> ID：10075715
> 
> 赞同：0
> 
> 时间：2012-04-09T15:40:37.863
> 
> 标签：asp.net-mvc-3, razor

我在部分视图中有以下代码：

```
@model MyOrganization.MyApp.Models.ProductListing

@using (Ajax.BeginForm("TagProduct", new AjaxOptions() { UpdateTargetId = "FormContainer" , OnSuccess = "$.validator.unobtrusive.parse('form');" }))
{ 
<p>
    @Html.LabelFor(m => m.ModelNumber):
    @Html.EditorFor(m => m.ModelNumber)
    <A href="javascript:$('form').submit()">Tag Product with This Model Number</A>
    @(Html.ValidationMessageFor(m => m.ModelNumber))
</p> 
} 
```

这个局部视图获得的视图模型被实例化，并且它的许多属性被包含这个局部视图的视图所补充。但是，在这里调用提交时，控制器获取的视图模型只有 ModelNumber 属性水合。所有其他属性都为空，就好像局部视图创建了一个新实例，只有被编辑的属性 (ModelNumber) 获得了一个值。

我知道传递给局部视图的视图模型实例具有所有其他属性值，因为如果我添加一个 @Html.EditorFor(m => m.SerialNumber) 我可以看到包含视图在浏览器中呈现的 SerialNumber 值文本框，当提交表单时，我也将它返回到控制器中。但是，我不想要表单上的 SerialNumber 属性的编辑器——我只希望它在提交时返回到控制器中。

我怎样才能让整个模型回到控制器，因为它被传递到部分视图中，只有部分视图所做的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:43:16.163

当它发布表单时，它会使用您发布的任何值创建模型的新副本。如果您需要其他值，请将@Html.HiddenFor 您需要发布的其他元素。

# android - Android - 将 Intent 作为新应用启动

> ID：10075718
> 
> 赞同：1
> 
> 时间：2012-04-09T15:40:54.123
> 
> 标签：android, android-intent, media-player, background-process

是否可以将 Intent 作为新应用程序启动？

**想要的行为：**

*   用户单击我的应用程序中的按钮。
*   媒体播放器 Intent 启动并播放所需的媒体。
*   用户长按**home键**。在这个菜单中，我想同时看到**媒体**播放器和我的应用程序。我希望用户能够使用他想要的媒体播放器来听音乐，并且能够将我的应用程序置于前台。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:56:07.823

我不确定，因为我从未使用过它，但我想您可以为此使用意图标志 FLAG_ACTIVITY_NEW_TASK。

```
Intent intent = your intent;
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK) 
```

有关更多信息，请参阅[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NEW_TASK)。

干杯

# knockout.js - 一个大视图还是多个视图？

> ID：10075726
> 
> 赞同：2
> 
> 时间：2012-04-09T15:41:41.667
> 
> 标签：knockout.js

在我的网络应用程序中，有 5 个不同的部分：博客显示、博客条目列表、博客条目编辑器、博客编辑器、一页上的评论列表。

其中一些部分仅在触发操作时显示，例如单击博客条目链接的查看评论链接应显示评论列表。单击编辑博客条目链接应显示博客条目编辑器。

淘汰js中，大视图好还是多视图好？（性能和可维护性方面）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:12:55.623

我认为与一个胖模型相比，拥有多个视图模型不会影响性能，但就干净的代码和方便性而言，我会使用一个模型进行 OOP 方式。

我的意思是：

```
function SubModel1 () { ... }
function SubModel2 () { ... }
function SubModel3 () { ... }

function MainModel () {
  this.subModel1 = new SubModel1();
  this.subModel2 = new SubModel2();
  this.subModel3 = new SubModel3();
} 
```

所有模型特定的逻辑都是分离的，您仍然可以轻松地订阅 MainModel 构造函数中模型之间的每个可观察对象。

我已经尝试了这两种方法（单独的模型和一个大模型），而这一种确实有助于避免复杂化。

此外，还有一些任务我会选择单独的模型。例如，UI 小部件。最好让他们的模型远离外界，因为它们是独立的

# java - Maven 2.2.1 存储库顺序似乎是任意的

> ID：10075727
> 
> 赞同：1
> 
> 时间：2012-04-09T15:41:45.887
> 
> 标签：java, maven

我的构建在一台新机器上中断，因为其中一个存储库为 pom 和 jar 返回 301 页面，而不是预期的 404。依赖项是 asm:asm:1.3。它在中央，但 Maven 似乎并没有在那儿寻找。

这是构建日志的示例：

```
Downloading: http://download.java.net/maven/2/asm/asm/3.1/asm-3.1.pom
[INFO] Unable to find resource 'asm:asm:pom:3.1' in repository java.net2 (http://download.java.net/maven/2)
Downloading: http://repository.primefaces.org/asm/asm/3.1/asm-3.1.pom
[INFO] Unable to find resource 'asm:asm:pom:3.1' in repository prime-repo (http://repository.primefaces.org)
Downloading: https://repository.jboss.org/nexus/content/groups/public-jboss//asm/asm/3.1/asm-3.1.pom
[INFO] Unable to find resource 'asm:asm:pom:3.1' in repository jboss-public-repository-group (https://repository.jboss.org/nexus/content/groups/public-jboss/)
Downloading: http://maven.thebuzzmedia.com/asm/asm/3.1/asm-3.1.pom
[INFO] Unable to find resource 'asm:asm:pom:3.1' in repository The Buzz Media Maven Repository (http://maven.thebuzzmedia.com)
Downloading: http://maven.glassfish.org/content/groups/glassfish/asm/asm/3.1/asm-3.1.pom
185b downloaded  (asm-3.1.pom)
[WARNING] *** CHECKSUM FAILED - Checksum failed on download: local = '6c9fd3d150b8a5f0ca676f49b8ed603793cabebb'; remote = '<html>
<head><title>301' - RETRYING
Downloading: http://maven.glassfish.org/content/groups/glassfish/asm/asm/3.1/asm-3.1.pom
185b downloaded  (asm-3.1.pom)
[WARNING] *** CHECKSUM FAILED - Checksum failed on download: local = '6c9fd3d150b8a5f0ca676f49b8ed603793cabebb'; remote = '<html>
<head><title>301' - IGNORING
[WARNING] POM for 'asm:asm:pom:3.1:compile' is invalid. 
```

这是我的 pom.xml 中的存储库部分：

```
<repositories>
    <repository>
        <id>central</id>
        <name>Central Maven Repository</name>
        <url>http://repo1.maven.org/maven2</url>
        <layout>default</layout>
    </repository>
    <repository>
        <id>java.net2</id>
        <name>Repository hosting the jee6 artifacts</name>
        <url>http://download.java.net/maven/2</url>
    </repository>
    <repository>
        <id>prime-repo</id>
        <name>Prime Technology Maven Repository</name>
        <url>http://repository.primefaces.org</url>
        <layout>default</layout>
    </repository>
    <repository>
        <url>https://repository.jboss.org/nexus/content/groups/public-jboss/</url>
        <id>jboss-public-repository-group</id>
        <layout>default</layout>
        <name>JBoss Public Maven Repository Group</name>
    </repository>
    <repository>
        <id>The Buzz Media Maven Repository</id>
        <url>http://maven.thebuzzmedia.com</url>
    </repository>
</repositories> 
```

我没有 settings.xml 文件。

据我所知，对 jersey-server-1.3 的依赖正在破坏构建。它的 pom.xml 指定了现在不存在的存储库`http://maven.glassfish.org/content/groups/glassfish`。但是我指定的所有其他存储库都按照我指定的顺序进行检查。也就是说，除了中央之外的所有东西。如何让 Maven 先检查中央存储库？或者至少在使用依赖项的 poms 中指定的存储库之前检查 Central？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:44:59.610

我可以提出的第一个建议是阅读[关于 pom 中存储库的 sonatype 文章](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/)。此外，[http 代码 301 意味着永久移动](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。这意味着您用于存储库之一的 URL 似乎已过时或应该不同。定义的[glassfish 存储库似乎是错误](https://maven.glassfish.org/content/groups/public/)的，因为它应该是一个 https 连接。

此外，我可以推荐[使用存储库管理器](http://maven.apache.org/repository-management.html)。

我想到了一个问题：为什么要在存储库列表中定义 Maven Central，因为它已经在 Maven 本身中定义了......顺便说一句：除了使用存储库管理器。

要定义存储库访问的[顺序，请根据它们在 settings.xml 中的定义以相反的顺序](https://community.jboss.org/message/576851)完成。为了更好地控制这一点，请使用存储库管理器。

一个重要的问题：为什么不使用 Maven 3.0.X 而不是 Maven 2.2.1 ？

# java - How to create an Object of List type

> ID：10075733
> 
> 赞同：0
> 
> 时间：2012-04-09T15:42:12.640
> 
> 标签：java, generics, static

I am having trouble creating and using objects to type `List<Integer>`. When I run the following code, I get a `NullPointerException` because the *Object isn't initialized*.

```
import java.util.List;

public class RBTree {

    public static class Tree {
        public List<Integer> parent;
        public List<Integer> right;
        public List<Integer> left;
        public List<Integer> data;
        public List<Boolean> black;
    }

    public static void main (String[] args){
        Tree rb =new Tree();                
        rb.data.add(-1);
        rb.left.add(-1);
        rb.right.add(-1);
        rb.parent.add(-1);
        rb.black.add(Boolean.TRUE);
    }
} 
```

The compiler also gives me errors unless I add `static` to the `public static class Tree` line, but I don't want `Tree` to be `static` i.e. immutable. I need to be able to use a Tree more-or-less like a `struct` in C.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:44:08.210

So far, you've only created a reference, there's no underlying object. Try the following:

```
public List<Integer> parent = new ArrayList<Integer>();
// etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:46:02.083

`static` in `public static class` nested type declaration means that `Tree` objects can be created outside the context of the `RBTree` instance. Your errors have nothing to do with `static`: you get NPEs because your lists are not *initialized*. You can add initialization in the constructor of the `Tree`, or add an [initializer](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:44:54.850

you forgot to create the actual list objects:

```
public List<Integer> parent = new ArrayList<Integer>();
public List<Integer> right = new ArrayList<Integer>();
public List<Integer> left = new ArrayList<Integer>();
public List<Integer> data = new ArrayList<Integer>();
public List<Boolean> black = new ArrayList<Boolean>(); 
```

if you don't do this, then your lists are null and access a property or method on someting which is not there produces a NullPointerException.

# java - 如何在不需要@SuppressWarnings 的情况下正确编码这个泛型

> ID：10075734
> 
> 赞同：2
> 
> 时间：2012-04-09T15:42:18.093
> 
> 标签：java, generics, suppress-warnings

我正在尝试使用泛型编写一些代码，但似乎无法弄清楚如何使用@SuppressWarnings。

我有以下内容：

```
/**
 * Cache to know which pool provided which object (to know where to return object when done)
 */
private Map<Object, ObjectPool<?>> objectPoolCache = new ConcurrentHashMap<Object, ObjectPool<?>>();

/**
 * Returns a borrowed pool object to the pool
 * @param o
 * @throws Exception
 */
public void returnToPool( Object o ) throws Exception {
    // safety check to ensure the object was removed from pool using this interfact
    if( !objectPoolCache.containsKey(o))
        throw new IllegalStateException("Object is not in pool cache.  Do not know which pool to return object to");

    // get the object pool
    ObjectPool pool = objectPoolCache.remove(o);

    // return the object to the pool
    pool.returnObject(o);
} 
```

现在，我`ObjectPool pool`在 return 语句上收到一个原始类型的警告和一个类型安全警告。

我的概念如下；我正在寻找对象/池对的映射，以便我知道从哪个池中检索对象，以便知道将对象返回到哪个池。

ObjectPool 可以是任何类型对象的 ObjectPool；不需要特定的超类型。

我试过使用`<? extends Object>`，但我不完全确定如何使用它而不会导致编译错误。只是将 替换为`<?>`我`<? extends Object>`遇到了一个问题，即我的方法使用 Object 作为参数，这与扩展 Object 的池不一致。

任何援助将不胜感激。

谢谢！

埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:44:48.740

如果没有 ，这是不可行`@SuppressWarnings`的，因为 Java 的类型系统不够强大，无法表达`Map`将任何类型的对象映射`T`到 some的约束`ObjectPool<? super T>`。

泛型旨在证明 Java 中各种操作的类型安全性，但它们对于您正在做的事情还不够强大。你只需要告诉编译器“相信你知道你在做什么”，这就是`@SuppressWarnings`目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:56:39.030

你不能用 Java 泛型来做到这一点。但我想知道您的对象池缓存是否应该被泛化为`Map<Class<?>, ObjectPool<?>>`或`Map<Object, ObjectPool<?>>`？

# android - android sqlite数据库已经关闭错误

> ID：10075735
> 
> 赞同：0
> 
> 时间：2012-04-09T15:42:19.270
> 
> 标签：android, sqlite, android-appwidget

我有一个带有 sqlite 数据库的应用程序。

我创建了自己的数据库类，其中包含 SqliteDatabase 的实例。该类实现了我的查询、打开、关闭等（该类不是单例）。

我的应用程序中有一个活动、一项服务和一个应用程序小部件。

在我需要数据库的地方，我创建了我的类的一个对象，打开，做一些事情，最后关闭。

例如，在活动中，我在 onStart 中打开数据库并在 onStop 中关闭它。

除了在 appwidget 中，一切都很好。

如果我需要在appwidget onUpdate中选择数据，那就没问题了。

但是当我尝试从 appwidget 进行更新时，我收到“数据库 DATABASE_FLE 已关闭”错误。

会是什么？

我在关闭数据库的地方添加了一些日志，并且在此错误之前没有执行这些行。数据库应该没问题。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:57:28.253

我正在考虑的是，android 可能会关闭/卸载您的活动（例如，如果设备上还有一点内存，这可能会发生），但此时您的 appwidget 仍然处于活动状态。

现在，由于您的活动已关闭，因此您的数据库已关闭。Appwidget 尝试更新数据库，但它已经关闭。

检查这种情况，但无论如何你应该考虑这种情况。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:18:52.037

问题是我编译了一个 SQLiteStatment 对象并将其保存以备将来使用，而我的数据库对象被替换了......所以 SQLiteStatement 需要再次重新编译。

我有这样的事情：

```
public void func(SQLiteDatabase db) {
   if (mStatement == null)
      mStatement = db.compileStatement(SQL);

   mStatement.execute(); 
```

这样做的问题是 db 对象在函数调用中发生了变化，并且编译语句的第一个 db 对象已经关闭。

解决方案是删除 if-null，并为每个 db 对象编译语句。

# java - 将 Hibernate 应用程序移动到 JBoss - 位置超出声明的序数参数的数量

> ID：10075740
> 
> 赞同：3
> 
> 时间：2012-04-09T15:42:40.393
> 
> 标签：java, hibernate, jboss

我有一个 Hibernate Web 应用程序，目前正在运行 tomcat/CloudFoundry，但是当我尝试在 JBoss 上运行它时，我遇到了一些错误。

在我的 DAO 中，我正在创建一个查询以按用户名加载用户，如下所示：

```
Query query = getEntityManager().createQuery("select u from com.tmm.enterprise.socialcv.security.Account u where u.userName = ?1");
query.setParameter(1, userName); 
```

当我在 Tomcat 上运行应用程序时，上述方法有效，但是当我在 JBoss 上运行它时，出现以下错误：

```
16:31:47,639 DEBUG [org.springframework.web.servlet.DispatcherServlet] (http-localhost-127.0.0.1-8080-1) Handler execution resulted in exception - forwarding to resolved error view: ModelAndView: reference to view with name 'dataAccessFailure'; model is {exception=org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.QueryParameterException: Position beyond number of declared ordinal parameters. Remember that ordinal parameters are 1-based! Position: 1; nested exception is java.lang.IllegalArgumentException: org.hibernate.QueryParameterException: Position beyond number of declared ordinal parameters. Remember that ordinal parameters are 1-based! Position: 1}: org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.QueryParameterException: Position beyond number of declared ordinal parameters. Remember that ordinal parameters are 1-based! Position: 1; nested exception is java.lang.IllegalArgumentException: org.hibernate.QueryParameterException: Position beyond number of declared ordinal parameters. Remember that ordinal parameters are 1-based! Position: 1
    at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:301) [org.springframework.orm-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect.ajc$afterThrowing$org_springframework_orm_jpa_aspectj_JpaExceptionTranslatorAspect$1$18a1ac9(JpaExceptionTranslatorAspect.aj:15) [spring-aspects-3.1.1.RELEASE.jar:3.1.1.RELEASE]
    at com.tmm.enterprise.socialcv.security.dao.AccountDAO.loadAccountByUserName(AccountDAO.java:28) [classes:]
    at com.tmm.enterprise.socialcv.service.AccountService.loadAccountByUserName(AccountService.java:48) [classes:]
    at com.tmm.enterprise.socialcv.service.AccountService.setCredentials(AccountService.java:241) [classes:]
    at com.tmm.enterprise.socialcv.controller.HomeController.signup(HomeController.java:59) [classes:]
    ...
Caused by: java.lang.IllegalArgumentException: org.hibernate.QueryParameterException: Position beyond number of declared ordinal parameters. Remember that ordinal parameters are 1-based! Position: 1
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:446) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:67) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    ... 80 more
Caused by: org.hibernate.QueryParameterException: ***Position beyond number of declared ordinal parameters. Remember that ordinal parameters are 1-based! Position: 1***
    at org.hibernate.engine.query.spi.ParameterMetadata.getOrdinalParameterDescriptor(ParameterMetadata.java:80) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.engine.query.spi.ParameterMetadata.getOrdinalParameterExpectedType(ParameterMetadata.java:86) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.AbstractQueryImpl.determineType(AbstractQueryImpl.java:444) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:416) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:440) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    ... 81 more 
```

我尝试更改以下两个查询，但仍然没有运气：

```
Query query = getEntityManager().createQuery("select u from com.tmm.enterprise.socialcv.security.Account u where u.userName = ?");
        query.setParameter(0, userName); 
```

以上给了我同样的错误。就像这样：

```
Query query = getEntityManager().createQuery("select u from com.tmm.enterprise.socialcv.security.Account u where u.userName = ?");
        query.setParameter(1, userName); 
```

切换到命名参数会给我一个关于无法找到命名参数的错误。

有任何想法吗？（顺便说一句，我还必须在 JBoss 上的查询中将 DAO 更新为完全合格的 Account - 在 tomcat 上它只是在查询 Account）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:08:04.667

我以这种方式修复了这样的错误

```
schema.table = ' ?' ->error

schema.table = '?' ->no error 
```

也许它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:03:56.557

基于 Hibernate HQL[参考](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-expressions)，如果你使用 JDBC 位置样式，你*只*需要使用`?`. 如果您使用命名参数，那么您应该使用`:paramName`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T13:41:20.063

```
query = getEntityManager().createQuery(
"select u from com.tmm.enterprise.socialcv.security.Account u where u.userName = :userName");
query.setParameter("userName", userName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-24T08:20:58.557

即使在我的情况下也没有任何效果，我已经尝试过

1.  索引为 0 的位置参数
2.  索引为 1 的位置参数
3.  命名参数

最后我发现结果查询对象的参数列表每次都是空的，导致调用时出错`setParameter()`。

解决方法：文件中缺少实体映射`persistence.xml`，添加后就开始工作了！！

# ruby - 如何从 Xubuntu 的终端停止 Ruby WEBrick 应用程序

> ID：10075742
> 
> 赞同：2
> 
> 时间：2012-04-09T15:42:44.927
> 
> 标签：ruby, bash, terminal, webrick, xubuntu

我开始学习 Ruby。我尝试使用 WEBrick 服务器。`ruby index.rb`命令服务器启动后。以及如何阻止它？我尝试了 Ctrl+c、Ctrl+X 等。它仍然有效。然后我按了Ctrl+Z。Bash 说：`[1]+ Stopped ruby index.rb.`但是进程仍在工作，并且使用我的端口，需要服务器。我只能从系统监视器中杀死它。

我需要在 bash 中使用什么命令来杀死 index.rb 进程？

当我使用 Ctrl+C 时，出现错误：

```
[2012-04-09 19:44:10] ERROR Interrupt: 
/usr/lib/ruby/1.8/webrick/server.rb:91:in `select' 
```

PS 应用程序非常简单（来自 WikiBooks）：

```
 require 'webrick'
server = WEBrick::HTTPServer.new(:Port=>8080)
server.mount_proc('/'){ |req, resp|
    File.open('notepad.txt', 'w'){ |f| f.write(req.query["text"]) } if req.query["text"]
    resp['Content-Type'] = 'text/html'
    resp.body = %& <html><body><center><form method="post">
        <textarea name="text" rows="4" cols="40">#{IO.read('notepad.txt')}</textarea><br/>
        <input type="submit" name="update" value="save"/>
        </form></center></body></html></nowiki>& 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T16:03:00.297

您始终可以通过指定 PID 来终止您的进程。

要从您的服务器进程中获取 pid，您可以使用

`$ ps a | grep ruby`

第一列在哪里`PID`，之后使用：`$ kill -9 <YOUR_PID>`杀死进程。

您的服务器没有赶上`SIGINT`，这就是为什么您不能用`Ctrl+C`.

将您的脚本更改为此

```
require 'webrick'

server = WEBrick::HTTPServer.new(:Port=>8080)

trap 'INT' do server.shutdown end

server.mount_proc('/'){ |req, resp|
    File.open('notepad.txt', 'w'){ |f| f.write(req.query["text"]) } if req.query["text"]
    resp['Content-Type'] = 'text/html'
    resp.body = %& <html><body><center><form method="post">
        <textarea name="text" rows="4" cols="40">#{IO.read('notepad.txt')}</textarea><br/>
        <input type="submit" name="update" value="save"/>
        </form></center></body></html></nowiki>& 
}

server.start 
```

并享受`Ctrl+C`！

# php - preg_replace_callback 正则表达式匹配所有 url 并避免图像

> ID：10075746
> 
> 赞同：1
> 
> 时间：2012-04-09T15:42:56.743
> 
> 标签：php, regex

我有这个正则表达式来匹配所有网址并且效果很好：

```
$regex ='@((https?://)([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.\,]*(\?\S+)?)?)*)@';                           
return preg_replace_callback( $regex, 'replacing' , $content ); 
```

我需要避免在 : 中匹配 url，`src="***"`并`<a href="">***</>`希望保留文本但替换 url。

我试过：在我的正则表达式中添加否定：

```
$regex ='@((?!src="|?!>)(https?://)([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.\,]*(\?\S+)?)?)*)@'; 
```

当 url 以 src=" 开头时的第一个否定第二个否定是在 a href a href >

有什么想法让它发挥作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:25:43.750

[lib_autolink](https://github.com/iamcal/lib_autolink)是一个很好的起点，它处理这种`<a>`情况并且可以很容易地适应这种`<img>`情况。除非您可以保证 HTML 完全有效（文本中没有杂散的引号等），否则在单个正则表达式中执行此操作并非易事，而且可能是不可能的。

# c# - .ToString() 方法是如何工作的？

> ID：10075751
> 
> 赞同：5
> 
> 时间：2012-04-09T15:43:15.550
> 
> 标签：c#, tostring, object-to-string

有时当我调用一个类的`.ToString()`方法时，它会返回该类的完全限定名。但是对于某些类/结构（如`Int32`），它返回一个与对象相对应的字符串（整数值）。这是否意味着`Int32`该类覆盖了该`ToString()`方法，并且返回完全限定名称的类不会覆盖它，而只是调用 base 的 ( `Object`'s)`ToString()`方法？实现是否`Object.ToString()`只返回类的完全限定名？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T15:47:25.187

> 有时，当我调用该`ToString`方法时，它会返回接收调用的对象的运行时类型的完全限定名称。

正确的。

> 但是对于某些类型，例如`System.Int32`，`ToString`返回接收者转换为字符串的值。

正确的。

> 结构是否`System.Int32`覆盖`ToString`方法？

是的。

> 其`ToString`方法返回完全限定类型名称的其他类型*不会*覆盖`ToString`吗？

大概就是这样，是的。当然，他们可以覆盖该方法并让覆盖的方法做与基类方法完全相同的事情，但这有点毫无意义。

> 所以在这些情况下，调用`ToString`只是调用 的`System.Object`实现`ToString`，它返回完全限定的名称？

正确的。

您似乎对它的工作原理有一个坚实的掌握。我唯一的更正是要注意这`System.Int32`是一个*结构*，而不是一个*类*。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T15:45:39.193

[http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)

> ToString 是 .NET Framework 中的主要格式化方法。它将对象转换为其字符串表示形式，以便它适合显示。（有关 .NET Framework 中的格式化支持的信息，请参阅格式化类型。）
> 
> **ToString 方法的默认实现返回 Object 类型的完全限定名称，如以下示例所示。**
> 
> 因为 Object 是 .NET Framework 中所有引用类型的基类，所以此行为由不重写 ToString 方法的引用类型继承。以下示例说明了这一点。它定义了一个名为 Object1 的类，它接受所有 Object 成员的默认实现。它的 ToString 方法返回对象的完全限定类型名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-11T06:29:17.720

关于 C# 中的 ToString() 方法的几点说明。

1.  ToString() 方法是在 System.Object 基类中定义的，因此它可用于所有类型和要使用的参数。

2.  System.object 基类提供的 ToString() 的默认实现将为您提供类型的完整名称，包括命名空间。

3.  如果您不想要默认实现，则可以覆盖 ToString() 方法。是的 ToString() 方法是可重写的。你在哪里覆盖它？您在不希望其默认实现的类中覆盖它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-06T01:29:27.037

除了所有其他答案之外，重要的是要了解隐式使用的 .NET API 部分`System.String.Format()`，例如 、 和 等中的and方法`Write()`，`WriteLine()`当然`TextWriter`还有实现本身，将使用该方法在未指定显式格式时格式化对象。`Console``StringBuilder.Append()``StringBuilder.AppendLine()``string.Format()``ToString()`

这意味着适用于`ToString()`上述的所有内容也适用于所有这些其他场景。

# coronasdk - Corona SDK 是否只有 30 天？

> ID：10075757
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:43:42.383
> 
> 标签：coronasdk

我想知道 Corona SDK 是否免费且不受 30 天限制？

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:46:14.397

Corona SDK 可供个人免费使用。从本质上讲，您可以无限制地免费使用它，但只能在个人设备上开发和安装。“分发到 iTunes App Store、Android Marketplace、Amazon Kindle Fire Appstore 和 Barnes & Noble NOOK Color Appstore。” 您必须购买许可证。

查看更多信息：[http ://www.anscamobile.com/pricing/whysubscribe.html?ref=corona](http://www.anscamobile.com/pricing/whysubscribe.html?ref=corona)

# jquery - Jquery如何洗牌数组值？什么时候切换类？

> ID：10075764
> 
> 赞同：0
> 
> 时间：2012-04-09T15:44:39.197
> 
> 标签：jquery

我有 5 个`li`元素，当我单击每个元素时，我正在添加一个类名`on`并将其推送到一个数组中。当用户再次单击时，我想从对象中删除该项目。

```
<ul>
  <li class="on" data-index="3">add 3</li>
  <li data-index="4">add 4</li>
  <li data-index="5">add 5</li>
  <li class="on" data-index="6">add 6</li>
</ul> 
```

当用户单击 a 时，`li`我添加了一个名为的类`on`并将值推送到数组中，并在推送项目后对数组进行排序。

如果用户再次单击`li`I can't remove the value from the array，因为排序。有没有办法可以做到这一点？

我不知道做这方面的功能..任何人都可以帮助我吗？我尝试了拼接，但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:47:43.930

您可以使用`delete arr[index]`语法从数组中删除任何元素。试试这个：

```
var arr = {};
$('ul > li').click(function () {
   $(this).toggleClass('on');
    if ($(this).hasClass('on')) {
       arr[$(this).attr('data-index')] = $(this).html();
    } else {
        delete arr[$(this).attr('data-index')];
    }
    console.log(sortObj(arr));
});

function sortObj(arr){
    var sortedKeys = new Array();
    var sortedObj = {};

    for (var i in arr){
        sortedKeys.push(i);
    }
    sortedKeys.sort();

    for (var i in sortedKeys){
        sortedObj[sortedKeys[i]] = arr[sortedKeys[i]];
    }
    return sortedObj;
} 
```

演示：http: [//jsfiddle.net/codef0rmer/AEYtq/1/](http://jsfiddle.net/codef0rmer/AEYtq/1/)

# ios - PowerVR GPU 如何提供深度缓冲区？

> ID：10075774
> 
> 赞同：4
> 
> 时间：2012-04-09T15:45:48.457
> 
> 标签：ios, graphics, opengl-es, powervr-sgx

iOS 设备使用 PowerVR 图形架构。PowerVR 架构是基于[图块的延迟渲染](http://en.wikipedia.org/wiki/PowerVR#Technology)模型。这个模型的主要好处是它不使用深度缓冲区。

但是，我可以访问我的 iOS 设备上的深度缓冲区。具体来说，我可以使用屏幕外帧缓冲区对象将深度缓冲区转换为颜色纹理并进行渲染。

如果 PowerVR 架构不使用深度缓冲区，我如何能够渲染深度缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:15:27.097

基于图块的延迟渲染——顾名思义——是在逐个图块的基础上工作的。屏幕的每个部分都被加载到内部缓存中，再次处理和写出。硬件获取与当前图块和当前深度值重叠的三角形列表，并从中得出一组新的颜色和深度，然后再次将它们全部写出来。因此，虽然一个完全愚蠢的 GPU 可能对每个三角形的每个相关深度缓冲区值进行一次读取和一次写入，但 PowerVR 将在每批几何体中执行一次读取和一次写入，而光线投射式算法则在两者之间完成其余的工作。

在“纯”基于切片的延迟渲染器上实现 OpenGL 是不可能的，因为深度缓冲区需要可读。仅使深度缓冲区写入通常也效率不高，因为颜色缓冲区在任何时候都是可读的（显式地通过`glReadPixels`或隐式地根据您根据操作系统的机制呈现帧缓冲区的时间），这意味着硬件可能有画一个场景，然后在上面画更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-12T08:26:25.053

确实，基于图块的渲染器不需要传统的深度缓冲区即可工作。

TBR 将屏幕分割成图块，并使用快速片上内存完全渲染此图块的内容，以存储临时颜色和深度。然后，当 tile 完成时，最终值将移动到实际的帧缓冲区。但是，深度缓冲区中的深度值通常是临时的，因为它们只是用作隐藏表面算法。那么这种情况下的深度值可以在图块被渲染后被完全丢弃。

这意味着有效的基于图块的渲染器实际上并不需要在较慢的视频内存中使用全屏深度缓冲区，从而节省带宽和内存。

Metal API 轻松公开了此功能，允许您将深度缓冲区的 storeAction 设置为“无关”值，这意味着它不会将生成的深度值备份到主内存中。

The exception to this case is that you may need the depth buffer contents after rendering (i.e. for a deferred renderer or as a source for some algorithm that operates with depth values). In that case the hardware must ensure that the depth values are stored in the framebuffer for you tu use.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T02:23:44.097

PowerVR 确实使用深度缓冲区，但与常规（即时模式渲染）GPU 的方式不同

基于 Tile 的不同渲染的不同部分意味着给定场景的三角形首先被处理（着色、变换、裁剪等）并保存到中间缓冲区中。只有在处理完整个场景后，才会一一渲染图块。

将所有处理过的三角形放在一个缓冲区中允许硬件执行**隐藏表面移除**- 移除最终会被其他三角形隐藏/透支的三角形。这显着减少了渲染三角形的数量，从而提高了性能并降低了功耗。

隐藏表面移除通常使用称为选项卡缓冲区和深度缓冲区的东西。（两者都是小型片上存储器，因为它们一次存储一个图块）

不知道你为什么说 PowerVR 不使用深度缓冲区。我的猜测是，这只是一种“营销”方式，说不需要为了执行深度测试而从系统内存执行昂贵的写入和读取。

ps

只是为了补充汤米的答案：基于图块的不同渲染的主要好处是：

1.  由于片段一次处理一个图块，所有颜色/深度/模板缓冲区的读取和写入都是从快速的片上存储器执行的。虽然颜色缓冲区仍然必须在每个图块中读取/写入系统内存，但在许多情况下，深度和模板缓冲区只有在以后需要时才需要写入系统内存（例如您的用户案例）。系统内存流量是功耗的重要来源......因此您可以看到它如何降低功耗。
2.  不同的渲染可以去除隐藏的表面。更少渲染的三角形意味着更少的片段处理，意味着更少的纹理内存访问。

# python - Python 中的 attr_reader

> ID：10075778
> 
> 赞同：5
> 
> 时间：2012-04-09T15:46:01.773
> 
> 标签：python, ruby

在 python 中是否有“同义词” `attr_reader`，比如不需要让我输入的东西？：

```
class Foo():
    def __init__(self, foo, bar, spam, spammity, spam, spam, quux, foobar, barfoo):
        self.foo = foo
        self.bar = bar
        self.spam = spam
        # And so on... 
```

只是一条线的东西`self.foo = foo, etc.`，有点像红宝石的`attr_reader`制作方式

```
@foo = foo 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:55:27.793

要设置所有内容，请尝试：

```
class Foo():
  def __init__(self, **kwargs):
    for k,v in kwargs.items():
        setattr(self, k, v) 
```

或者只是一些属性：

```
class Foo():
  def __init__(self, **kwargs):
    for k in ['foo', 'bar', 'spam']:
        setattr(self, k, kwargs[k]) 
```

或来自（一些）ctor args：

```
class Foo():
  def __init__(self, foo, bar, spam, bork, kevork):
    for k in ['foo', 'bar']:
        setattr(self, k, locals()[k]) 
```

或全部：

```
class Foo():
  def __init__(self, foo, bar, spam, bork, kevork):
    args = dict(locals())
    for k, v in (k,v for k,v in args.items() if not k == 'self'):
        setattr(self, k, v) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:52:49.677

你可以用 kwargs 做到这一点：

```
class Foo():
  def __init__(self, **kwargs):
    self.foo = kwargs['foo'] 
```

然后你传入命名参数：

```
foo = Foo(foo='bar') 
```

当然，你可能想捕捉 KeyError 异常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:58:32.143

您可以使用 setattr 从名为 args 的关键字中设置自我属性。

```
>>> class Foo():
...     def __init__(self, **kwargs):
...         for attr_name in kwargs.keys():
...             setattr(self,attr_name,kwargs[attr_name])
... 
>>> j=Foo(it_works='cool!!')
>>> j.it_works
'cool!!' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T16:19:31.890

您想要做的事情可以完全使用位置参数完成`locals()`：

```
class Foo():
   def __init__(self, foo, bar, spam, spammity, spaam, 
                spamm, quux, foobar, barfoo):
       self.__dict__.update(locals())

f = Foo(1, 2, 3, 4, 5, 6, 7, 8, 9)
print f.spamm   # 6 
```

（我在 arglist 中更改了您的两个`spam`s，因为 Python 不喜欢有多个具有相同名称的参数。）

请注意，*所有*本地人都将成为实例上的属性。如果您想静态初始化一堆属性，这会很方便，因为您不需要`self`在它们前面输入：

```
class Foo():
   def __init__(self, foo, bar, spam, spammity, spaam, 
                spamm, quux, foobar, barfoo):
       a = b = c = 0
       self.__dict__.update(locals())   # sets a, b, and c too 
```

但是，如果您接受关键字参数，您将希望从更新中排除该变量，或者更可能是`del self.kwargs`之后。

# php - 模块分离

> ID：10075780
> 
> 赞同：0
> 
> 时间：2012-04-09T15:46:02.183
> 
> 标签：php, codeigniter

我试图弄清楚如何使用 codeigniter 进行模块分离。

假设我有一个新闻模块，它在应用程序文件夹内，在新闻模块文件夹内我有一个控制器、模型、视图文件夹和其中的文件。

我需要额外的东西来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:58:41.513

如果你想在 codeigniter 中使用模块，你可以使用 Modular Extensions - HMVC，它使 codeigniter 模块化。这是链接[https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home)

我希望这有帮助。

# javascript - javascript单引号被转义

> ID：10075783
> 
> 赞同：0
> 
> 时间：2012-04-09T15:46:15.317
> 
> 标签：javascript, escaping, cs-cart

我正在帮助的一个人正在使用电子商务 CMS (CSCart)。我认为出于安全原因，他们的代码是转义单引号（我对 js 不是很好）。

```
<script>
function share_click()
{

  RPXNOW.loadAndRun(['Social'], function () {  <--- This line gets escaped around social
    var activity = new RPXNOW.Social.Activity(
       "Share your comment",
       "commented on 'Like My New Perfume?' on cuteoverload.com",  <--- This line as well
       "http://cuteoverload.com/2009/10/26/like-my-new-perfume/");

    RPXNOW.Social.publishActivity(activity,
      {finishCallback:function(data){
        window.location = "http://google.com/"
      }
    });
  });

}
</script> 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:29:51.530

尝试使用：

```
 &apos; 
```

代替 '

或者正如其他人所评论的那样，\' 通常可以防止撇号被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:35:53.450

尝试

```
<script>
function share_click() {
  var arr = ["Social"];

  RPXNOW.loadAndRun(arr, function () {  
    var activity = new RPXNOW.Social.Activity(
       "Share your comment",
       "commented on `Like My New Perfume?` on cuteoverload.com",  
       "http://cuteoverload.com/2009/10/26/like-my-new-perfume/");

    RPXNOW.Social.publishActivity(activity,
      {finishCallback:function(data){
        window.location = "http://google.com/"
      }
    });
  });

}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T16:47:54.800

只需使用双引号。如果您的示例准确，则“http://google.com/”周围的双引号不会被转义，对吗？所以，问题解决了。

至于双引号字符串中的单引号，如果它们被转义，它们会导致问题吗？我试过了，但我找不到那些内部引号是否被转义的行为差异。

# css - 一列中有两个 div，都具有动态宽度。我可以强制底部 div 与上面的宽度相同吗？

> ID：10075791
> 
> 赞同：1
> 
> 时间：2012-04-09T15:46:59.977
> 
> 标签：css, html, width

考虑以下标记：

```
<div id="container">
    <div id="top">
        <img />
    </div>
    <div id="bottom">
        Some text, there we go.
    </div>
</div> 
```

`<img>`有固定的高度。`top`和的宽度`bottom`是动态的。`top`的内容可能比`bottom`' 的内容更宽，反之亦然。我需要使`bottom`' 的宽度始终等于`top`' 的宽度。

这可以用纯 CSS 完成吗？还是需要JS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:20:04.977

有一种方法可以通过纯 CSS 实现（[由 Artem Polikarpov 提供](http://artgorbunov.ru/bb/soviet/20120503/)（俄语））

```
<style>
  .ap-pic {
    display: table-cell;
    width: 1px;
  }

  .ap-pic .caption {
    display: block;
  }
</style>

<div class="ap-pic">
  <img src="pic.jpg">
  <span class="caption">long text that has to go on the next line blah blah blah</span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:17:50.110

#top 和 #bottom 元素实际上并没有任何关系，除了有一个共同的父元素，所以我认为你在将一个元素的宽度设置为与另一个元素完全相同时会遇到一些麻烦，除非您将一个元素放在另一个元素中，等等。

一个快速的 jQuery 修复将是：

```
$("#bottom").css('width', $("#top").width()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T16:43:35.833

这不是你想要的吗？[http://jsfiddle.net/HgGjW/](http://jsfiddle.net/HgGjW/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T16:01:55.910

好的，我已经与这个解决方案斗争了几个星期，并在四个月的大部分时间里对其进行了微调。本质上，我使用 JQuery 来控制它并确保无论什么两个元素都是相同的宽度。

[JSFiddle](http://jsfiddle.net/PseudoNinja/f4kz81tm/)

```
/**
 * Determine basic dimensions of an element
 *  @author PseudoNinja (email at pseudoninja dot com)
 * @returns object
 */

jQuery.fn.getDimensions = function () {
    var $this = $(this),
        dimensions = {
            width: 0,
            paddingLeft: 0,
            paddingRight: 0,
            borderLeft: 0,
            borderRight: 0,
            getOuterWidth: function () {
                return parseInt(this.width) + parseInt(this.paddingLeft) + parseInt(this.paddingRight) + parseInt(this.borderLeft) + parseInt(this.borderRight);
            }
        };

    dimensions.width = $this.width();
    dimensions.paddingLeft = $this.css('padding-left').replace(/[^-\d\.]/g, '');
    dimensions.paddingRight = $this.css('padding-right').replace(/[^-\d\.]/g, '');
    dimensions.borderLeft = $this.css('border-left-width').replace(/[^-\d\.]/g, '');
    dimensions.borderRight = $this.css('border-right-width').replace(/[^-\d\.]/g, '');
    dimensions.outerWidth = $this.outerWidth();

    return dimensions;
};

/** size element to width if target
 *  @author PseudoNinja (email at pseudoninja dot com)
 *  @param  {string} target - selector of element to clone width
 */
jQuery.fn.sizeTo = function (target) {
    var $this = $(this),
        $target = $(target),
        myDimensions = $this.getDimensions(),
        targetDimensions = $target.getDimensions(),
        difference = targetDimensions.outerWidth - myDimensions.outerWidth,
        adjOuterWidth = 0
    ;

    if (difference > 0) {
        myDimensions.width = myDimensions.width + difference;
        adjOuterWidth = myDimensions.getOuterWidth();
        $this.width(myDimensions.width);
    }

    // Add persistance to size change
    setTimeout(function () {
        $this.sizeTo(target);
    }, 100);

    return $this;
};

// USAGE EXAMPLE
//    $(function(){
//        $("#div1").sizeTo($("#div2"));
//    }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-09T16:13:59.953

可以使用纯 CSS 来实现。将两个元素的宽度设置为 100%。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-09T17:13:59.260

如果你这样做，那么我不会使用 div，我会使用列表。

# c++ - 如何在 Qt 中捕获异常？

> ID：10075792
> 
> 赞同：25
> 
> 时间：2012-04-09T15:47:01.307
> 
> 标签：c++, qt, exception, exception-handling, qt5

```
try
{  // `count()` throws exception
  connect(thread, SIGNAL(started()), engine, SLOT(count()));  
}
catch(const X& e)
{} 
```

从 Qt-5 开始，我收到以下错误：

> Qt 已捕获从事件处理程序抛出的异常。Qt 不支持从事件处理程序中抛出异常。您不能让任何异常通过 Qt 代码传播。如果这不可能，那么在 Qt 5 中，您至少必须重新实现 `QCoreApplication::notify()`并捕获那里的所有异常。

如果我不能如上所示以常规方式捕获异常，那么我们应该在哪里捕获这些异常？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-09T16:30:03.463

> 我应该在哪里抓到它？

这正是 Qt 不支持跨信号/插槽连接抛出异常的原因。如果您尝试一下，您将看到以下消息：

> Qt 已捕获从事件处理程序抛出的异常。Qt 不支持从事件处理程序中抛出异常。您必须重新实现 QApplication::notify() 并在那里捕获所有异常。

正如它所提到的，可以将 QApplication 子类化并在那里捕获您的异常，但这将是一种非常烦人的处理方式。

如果可能的话，我建议重写 count 使其不会抛出。

* * *

**如果你不能重写 count() 怎么办？**

例如，如果 count() 是您正在使用的第 3 方库中某个函数的一部分怎么办？

任何官方 Qt 库中都没有任何插槽抛出，所以如果您使用的第三方库带有一个抛出的插槽，这可能表明它不是一个好的库。如果您仍然想使用它，我建议`QApplication::notify`您创建一个适配器，而不是将其捕获。

这意味着什么？首先在构造函数中创建一个对象，该对象接受您粗略的第三方对象。在其中，编写一个插槽，该插槽使用 try/catch 块包装对投掷插槽的调用。现在，不要连接到粗略的第三方对象的插槽，而是连接到新创建的对象的插槽。

以这种方式进行异常捕获可以将相关代码保持在一起，并防止`QApplication::notify`在遇到多个这些有问题的函数时填充一堆不相关的 try/catch 块。

例如：

```
class BadCounter {
Q_OBJECT
public slots:
  void count() { throw CounterError("unable to count"); }
};

class CounterAdaptor {
Q_OBJECT
  BadCounter* counter_;
public:
  CounterAdaptor(BadCounter* counter) {
    counter_ = counter;
  }
public slots:
  void count() {
    try {
      counter_->count();
    } catch (const CounterError& e) {
      std::cerr << e.what() << std::endl;
    }
  }
};

int main() {
  BadCounter engine;
  CounterAdaptor adaptor(&engine);
  QThread* thread = new QThread();
  connect(thread,SIGNAL(started()),&adaptor,SLOT(count())); 
  thread.start();
  ... // etc...
  delete thread;
} 
```

* * *

**如果您想处理可能从任何地方扔出的东西怎么办？**

这种全球关注的明显例子是一个意外的例外。错误可能发生在任何地方。最好记录尽可能多的有关事件的详细信息，以便识别和纠正原因。在这种情况下，您*可能*希望`QApplication::notify`在自己的子类中重新实现，如[jichi 的答案](https://stackoverflow.com/a/14804711/331041)所示。使用全局处理程序来处理全局问题是非常合理的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-11T01:29:42.767

如果有人需要一个示例代码来覆盖 QApplication::notify，我从这里得到一个（日文）：[http ://www.02.246.ne.jp/~torutk/cxx/qt/QtMemo.html](http://www.02.246.ne.jp/~torutk/cxx/qt/QtMemo.html)

```
#include "MyApplication.h"
#include <exception>

MyApplication::MyApplication(int& argc, char** argv) :
  QApplication(argc, argv) {}

bool MyApplication::notify(QObject* receiver, QEvent* event) {
  bool done = true;
  try {
    done = QApplication::notify(receiver, event);
  } catch (const std::exception& ex) {
    // ログや何らかの回復処理
  } catch (...) {
    // ログや何らかの回復処理
  }
  return done;
} 
```

* * *

## 回答 #3

> 赞同：-11
> 
> 时间：2012-04-09T15:59:59.830

你可以试试这个例子，看看你的解决方案是好的：

```
int f()
{
    throw 1;
    return 5;
}

void g(int x)
{
    cout << x << endl;
}

int main()
{
    try {
            g(f());
    }catch(int)
    {
        cout << "Caught exception" << endl;
    }
} 
```

# ios - 如何在 iphone 中刷新 UITableView？

> ID：10075793
> 
> 赞同：0
> 
> 时间：2012-04-09T15:47:09.760
> 
> 标签：ios, iphone, uitableview

我有一个从网络加载数据的 UI 表视图。如果用户在一个单元格上移动手指，则会显示一个按钮，就像 iPhone 风格的删除按钮一样。如果用户单击该按钮，单元格中一个标签的值将相应更改。但是，除了重新加载整个表格之外，我没有找到任何方法让表格视图重新绘制此单元格。我不想使用重新加载数据方法，因为我只需要更改一个单元格中的值而不是整个表格。对此有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:14:39.540

看看方法

```
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

调用此方法将导致您的表格视图的数据源向其委托询问有关该单元格的信息。

为了将来参考，我通过查看 UITableView 上的文档很容易地发现了这一点。我建议您将来在此处发布之前这样做。

# php - php - 数据库驱动的 PHP 导航

> ID：10075796
> 
> 赞同：0
> 
> 时间：2012-04-09T15:47:18.900
> 
> 标签：php, mysql

可以说我有以下名为的mysql表**`pages`**：

```
--------------------------------------------------------------------
 id | menu_id | menu_text   | page_title  |  page_text             
--------------------------------------------------------------------
 1  | 1       | Home        | Homepage    |  Here is the page text 
 2  | 2       | About Us    | About Us    |  "      "      "     " 
 3  | 3       | History     | Our History |  "      "      "     " 
-------------------------------------------------------------------- 
```

我怎样才能让它显示为菜单？

```
<ul>
 <li><a href="http://localhost/index.php?id=1">Home</a></li> 
 <li>Over</li> 
  <ul> 
   <li><a href="http://localhost/speciaal.php">Wie zijn wij</a></li> 
   <li><a href="http://localhost/index.php?id=12">Geschiedenis</a></li> 
  </ul> 
 <li><a href="http://localhost/afbeeldingen.php">Afbeeldingen</a></li> 
 <li><a href="http://localhost/index.php?id=56">Contact</a></li> 
</ul> 
```

当我试图整夜编写代码时，我感到绝望，现在我对如何完成这个系统一无所知。如您所见，上面菜单中的页面系统，但我还想将一些菜单链接指向我的网络服务器上的其他文件。如果有人可以发布示例代码或让我朝着简单的方向实现我的目标，我将非常感激。

我还不知道关于 php 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:57:12.933

也许这就是你要找的东西：[http ://crisp.tweakblogs.net/blog/317/formatting-a-multi-level-menu-using-only-one-query.html](http://crisp.tweakblogs.net/blog/317/formatting-a-multi-level-menu-using-only-one-query.html)

# jquery - 每次打开后JQuery Dialog越来越慢

> ID：10075800
> 
> 赞同：0
> 
> 时间：2012-04-09T15:47:36.250
> 
> 标签：jquery, asp.net-mvc-3

我有一个 JQuery 对话框，其中包含一些错误信息，以及一个用于切换更详细错误说明的操作链接“详细信息”。

我的问题是，在我打开和关闭对话框大约六次后，它在打开和无响应时逐渐变慢。谷歌浏览器有时甚至会要求我终止该进程。我不明白为什么，我是否以错误的方式使用 jquery 对话框？

下面是一个代码示例，errorbox div 在主 html 页面中，下面没有显示。它只是一个空的 div，它的内容来自只返回部分视图的控制器。

Javascript：

```
$(document).ready(function () {

    $.ajaxSetup({
        cache: false
    });
    var dialog = $(".errorbox").dialog({
        title: 'Error',
        autoOpen: false,
        modal: false
    });
    $('.showhidetarget').hide();

    //Open dialog box for errors
    $(".openDialog").click(function (e) {
        e.preventDefault();
        $(".errorbox").load(this.href);
        dialog.dialog('open');

    });

    //Show details for Error box message
    $('.showhidetrigger').click(
    function () {
        $('.showhidetarget').toggle();
    });

}); 
```

剃刀局部视图：

```
<script src="../../Scripts/OpenDialog.js" type="text/javascript"></script>

<p>@Model.friendly_message</p>

<a class ="showhidetrigger" href="#">Details</a>
<div class = "showhidetarget">
   <p>@Model.detailed_message</p>
</div> 
```

jquery 文件包括：

```
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/OpenDialog.js")" type="text/javascript" ></script> 
```

**

## 编辑

**

我找到了问题的解决方案，但没有找到原因。

从局部视图中删除我的 JavaScript 文件 OpenDialog 的包含并将链接的切换按钮移动到局部视图中的脚本标记可以解决问题。

所以一些如何在我的部分视图中包含 javascript 文件会导致问题，但我不知道为什么。click 函数被调用的次数越来越多。例如第一次它只调用一次点击函数......然后第二次它调用它两次......然后是四个，然后是八个等等。所以它的内容被重新加载的次数越来越多。但我不知道为什么在我的部分观点中包含这一点会导致这种情况发生......

因此，如果有人能告诉我为什么这会导致问题，我将保持开放状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:08:03.363

[jQuery load](http://api.jquery.com/load/)的描述为

> 从服务器加载数据并将返回的 HTML 放入匹配的元素中。

然而，它并没有在任何地方说“替换”。我只能猜测，每次打开对话框时，都会向其中加载更多数据。在将新数据加载到其中之前，请尝试从对话框中清除内容：

```
//Open dialog box for errors
$(".openDialog").click(function (e) {
    e.preventDefault();
    // Empty the box before loading more content
    $(".errorbox").empty().load(this.href);
    dialog.dialog('open');
}); 
```

# ruby-on-rails - 在 Rails 中指定 gravatar img 的宽度

> ID：10075802
> 
> 赞同：1
> 
> 时间：2012-04-09T15:47:42.427
> 
> 标签：ruby-on-rails, image, width, image-size, gravatar

是否有一种方法可以指定 gravatar img 的宽度，而不仅仅是 :size => x

```
<%= gravatar_for user, :size => 125, :class => "indexlist" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:54:25.280

不。要确认这一点，请看这里：[http ://en.gravatar.com/site/implement/images/](http://en.gravatar.com/site/implement/images/)

> **尺寸**
> 
> 默认情况下，如果没有提供尺寸参数，图像会以 80 像素 x 80 像素的尺寸呈现。您可以请求特定的图像尺寸，这将通过使用 s= 或 size= 参数并传递单个像素尺寸（***因为图像是方形的***）从 Gravatar 动态传递。

他们的 API 只公开了 size (s) 参数。

[http://www.gravatar.com/avatar/296f29c92c1561c79e034df64dc19f56?s=128](http://www.gravatar.com/avatar/296f29c92c1561c79e034df64dc19f56?s=128&d=identicon&r=PG)

# java - Java使用泛型编译错误

> ID：10075805
> 
> 赞同：0
> 
> 时间：2012-04-09T15:47:53.423
> 
> 标签：java, generics, inheritance

```
public class IRock
{
    public List<IMineral> getMinerals();
}

public class IMineral { ... }

public class SedimentaryMineral implements IMineral { ... }

public class SedimentaryRock implements IRock
{
    private List<SedimentaryMineral> minerals;

    @Override
    public List<SedimentaryMineral> getMinerals()
    {
        return minerals;
    }
} 
```

收到编译器错误：

```
Type mismatch: cannot convert from List<SedimentaryMineral> to List<IMineral>. 
```

我知道我无法将 impl 转换回它的 API 接口（因为 API 只是一个 API）。但是我很困惑为什么会出现编译器错误！Java 不应该尊重并允许这样做的事实`SedimentaryMineral`吗`IMineral`？！？

除了解释为什么会出现此编译器错误之外，也许有人可以指出为什么我的方法是“糟糕的设计”以及我应该做些什么来纠正它。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T15:50:25.593

想象一下，如果这样编译：

```
List<SedementaryMineral> list = new ArrayList<>();
list.put(new SedimentaryMineral());

List<IMineral> mineralList = list;
mineralList.add(new NonSedimentaryMineral());

for(SedementaryMineral m : list) {
    System.out.println(m); // what happens when it gets to the NonSedimentaryMineral?
} 
```

你有一个严重的问题。

你可以做的是：`List<? extends IMineral> mienralList = list`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:49:54.617

问题是 Java 泛型[不是协变的](http://www.ibm.com/developerworks/java/library/j-jtp01255/index.html)；`List<SedimentaryMineral>`不扩展/实现`List<IMineral>`.

解决方案完全取决于您希望在这里做什么。一种解决方案将涉及[通配符](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)，但它们施加了某些限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:51:30.253

以下是对您有用的方法：

```
interface IRock
{
    public List<? extends IMineral> getMinerals();
}

interface IMineral { }

class SedimentaryMineral implements IMineral {  }

class SedimentaryRock implements IRock
{
    private List<SedimentaryMineral> minerals;

    public List<? extends IMineral> getMinerals()
    {
        return minerals;
    }
} 
```

这里我使用通配符表示我允许从`getMinerals`. 请注意，我还将您的一些类更改为接口，以便一切都可以编译（我还删除了类的访问器，以便可以将它们放在一个文件中，但您可以将它们添加回来）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:59:47.580

首先，如果你做了类似的事情，你的代码就会起作用

```
...
public interface IRock
{
    public List<? extends IMineral> getMinerals();
}
... 
```

其次，您不能直接执行此操作，因为您无法保证插入列表中的内容的类型安全。所以，如果你想要任何可以在你的岩石中扩展矿物的东西，请按照我上面展示的方法进行操作。如果您只想将特定类型的东西插入岩石中，请执行以下操作

```
public interface IRock<M extends IMineral> {
    public List<M> getMinerals();
}
public class SedimentaryRock implements IRock<SedimentaryMineral> {
   public List<SedimentaryMineral> getMinerals()
   {
    return minerals;
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T16:03:26.630

您需要了解为什么这通常无法正常工作，以及为什么让编译器在这里抱怨是件好事。

假设我们有一个类`ParkingLot implements Collection<Cars>`，并且因为`Car extends Vehicle`，这将自动使`ParkingLot`也实现`Collection<Vehicle>`。然后我可以将我`Submarine`的放入`ParkingLot`.

不那么有趣，但更简单地说：**苹果的集合不是水果的集合。一组水果*可能*包含香蕉，而一组苹果可能不包含。**

有一种方法可以解决这个问题：使用通配符。苹果的集合是“特定水果亚型”的集合。通过忘记它是哪种水果，你会得到你想要的：你知道这是你得到的某种水果。同时，你也不能确定你可以随意放水果。

在java中，这是

```
Collection<? extends Fruit> collectionOfFruit = bagOfApples;
// Valid, as the return is of type "? extends Fruit"
Fruit something = collectionOfFruit.iterator().next();
// Not valid, as it could be the wrong kind of fruit:
collectionOfFruit.put(new Banana());
// To properly insert, insert into the bag of apples,
// Or use a collection of *arbitrary* fruit 
```

让我再次强调区别：

```
Collection<Fruit> collection_of_arbitrary_fruit = ...;
collection_of_arbitrary_fruit.put(new Apple());
collection_of_arbitrary_fruit.put(new Banana()); 
```

必须能够储存*任何*水果、苹果和香蕉。

```
Collection<? extends Fruit> collection_of_one_unknown_kind_of_fruit = ...;
// NO SAFE WAY OF ADDING OBJECTS, as we don't know the type
// But if you want to just *get* Fruit, this is the way to go. 
```

可以是一组苹果、一组香蕉、一组仅青苹果或一组任意水果。你不*知道*哪种水果，可能是混合的。但他们都是水果。

在只读情况下，我明确建议使用第二种方法，因为它允许专门的（“仅苹果袋”）和广泛的集合（“混合水果袋”）

理解这一点的关键是阅读`Collection<A>`为**不同类型 A**`Collection<? extends A>`的Collection ，而是**A 的某些子类型的 Collection**（但确切的类型可能会有所不同）。

# delaunay - 带限制的 Delaunay 三角剖分

> ID：10075807
> 
> 赞同：2
> 
> 时间：2012-04-09T15:48:05.923
> 
> 标签：delaunay

我需要 Delaunay 三角剖分（DT），但有一个具体要求：并非所有点都可以连接。换句话说

布尔测试（常量点 & p0，常量点 & p1）；

如果此函数返回 false，则不应创建 p0-p1 之间的边。网络上有很多关于 DT 的信息，但是我需要的案例的名称是什么？

谢谢

# javascript - javascript regexp 查找特定句子

> ID：10075808
> 
> 赞同：1
> 
> 时间：2012-04-09T15:48:08.427
> 
> 标签：javascript, regex

可能是一个简单的问题，但我对正则表达式相当陌生。

给定一个段落，我想找到一个以指定单词开头的特定句子，并用其他内容替换整个句子。

我如何构建一个正则表达式来搜索以特定单词开头的句子，该单词后面可以跟许多不同的单词，并以`.`（句点）结尾。

例如，给定句子`foo bar. foo3 bar3\. foo2 bar2.`，找到一个以 开头`foo3`、包含任意数量的单词并以 结尾的子字符串`.`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:50:22.917

像这样的东西：

```
/(^|\.\s+)(foo3[^.]*\.)/ 
```

搜索标记前一个句子的句点（或在第一句的情况下为字符串的开头），然后是空格，然后是开始字符序列（在本例中为`foo3`），然后是所有非句点字符，直到结束该句子的句号。

演示：[http ://www.rubular.com/r/ROl2odiDn5](http://www.rubular.com/r/ROl2odiDn5)

* * *

以下是在实践中如何替换句子：

```
var str = "foo bar. foo3 bar3\. foo2 bar2.";
var regex = /(^|\.\s+)(foo3[^.]*\.)/g;
str = str.replace(regex, "$1new sentence.");
alert(str); 
```

在此示例中，我使用正则表达式替换并合并额外匹配的字符（上一句中的句点） `$1`，然后是替换旧句子的新句子。这确保了段落中其他句子的状态保持不变。另请注意，此示例将更新所有匹配的句子，因为我使用`/g`(global) 标志。如果您只想更改第一个句子，请删除`g`，或通过包含更多开头单词使您的句子匹配更具体。

演示：http: [//jsfiddle.net/qPxFp/2/](http://jsfiddle.net/qPxFp/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:05:38.620

我能想到的最短/最高效：

```
/foo3\b[^.]*\./ 
```

但是，这有几个问题：

*   它将匹配一个十进制数（如`foo3 contributed $4.`匹配`foo3 contributed $4.83 million to the campaign.`
*   从技术上讲，它将在句子中的任何位置匹配 foo3 到句子的末尾（如匹配`foo3's guts.`in `I hate foo3's guts.`）
*   例如，它不允许以感叹号或问号结尾的句子

下面的表达式修复了这些问题——尽管它的效率有点低（在标点符号后需要某种空格或字符串结尾）：

```
/(^|[.!?]\s+)foo3\b.*?(?=[.!?](\s|$))[.!?]/ 
```

...替换为例如：`$1Replacement sentence.`

# java - 如何防止 JScrollPane 自动向下滚动？

> ID：10075809
> 
> 赞同：2
> 
> 时间：2012-04-09T15:48:09.397
> 
> 标签：java, swing, jscrollpane, jtextarea

我正在使用`JScrollPane`其中包含一个`JTextArea`. 问题是当`JTextArea`填充大量文本时，会`JScrollPane`自动向下滚动。我应该在 上设置什么属性`JScrollPane`以避免这种自动向下滚动？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:52:30.273

如果 JScrollPane 正在装饰一个文本组件，它会自动滚动到底部，但在加载后对文本组件调用[setCaretPosition(0)](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setCaretPosition%28int%29)会导致它滚动到顶部。

但是，如果它不是文本组件，您也可以像这样更改视口：

```
scrollPane.getViewport().setViewPosition(new Point(0,0)); 
```

# c++ - gnuplot-iostream 未链接到 boost

> ID：10075810
> 
> 赞同：1
> 
> 时间：2012-04-09T15:48:20.587
> 
> 标签：c++, gnuplot

嗨，我正在尝试使用 gnuplot-iostream，目前我只是想让代码[在这里](http://www.stahlke.org/dan/gnuplot-iostream/)工作。当我尝试合并时，链接器中出现错误说：

```
In function `stream<int, boost::iostreams::file_descriptor_flags>':
/usr/include/boost/iostreams/stream.hpp:130: undefined reference to `boost::iostreams::file_descriptor_sink::file_descriptor_sink(int, boost::iostreams::file_descriptor_flags)'

In function `boost::iostreams::file_descriptor_sink boost::iostreams::detail::wrap<boost::iostreams::file_descriptor_sink>(boost::iostreams::file_descriptor_sink const&, boost::disable_if<boost::iostreams::is_std_io<boost::iostreams::file_descriptor_sink>, void>::type*)':
/usr/include/boost/iostreams/detail/wrap_unwrap.hpp:53: undefined reference to `boost::iostreams::file_descriptor_sink::file_descriptor_sink(boost::iostreams::file_descriptor_sink const&)'

In function `concept_adapter':
/usr/include/boost/iostreams/detail/adapter/concept_adapter.hpp:67: undefined reference to `boost::iostreams::file_descriptor_sink::file_descriptor_sink(boost::iostreams::file_descriptor_sink const&)'
/usr/include/boost/iostreams/detail/adapter/concept_adapter.hpp:38: undefined reference to `boost::iostreams::file_descriptor_sink::file_descriptor_sink(boost::iostreams::file_descriptor_sink const&)'

In function `long boost::iostreams::detail::write_device_impl<boost::iostreams::output>::write<boost::iostreams::file_descriptor_sink>(boost::iostreams::file_descriptor_sink&, boost::iostreams::char_type_of<boost::iostreams::file_descriptor_sink>::type const*, long)':
/usr/include/boost/iostreams/write.hpp:121: undefined reference to `boost::iostreams::file_descriptor::write(char const*, long)'

In function `void boost::iostreams::detail::close_impl<boost::iostreams::closable_tag>::close<boost::iostreams::file_descriptor_sink>(boost::iostreams::file_descriptor_sink&, std::_Ios_Openmode)':
/usr/include/boost/iostreams/close.hpp:224: undefined reference to `boost::iostreams::file_descriptor::close()'

In function `std::fpos<__mbstate_t> boost::iostreams::detail::seek_device_impl<boost::iostreams::any_tag>::seek<boost::iostreams::file_descriptor_sink>(boost::iostreams::file_descriptor_sink&, long, std::_Ios_Seekdir, std::_Ios_Openmode)':
/usr/include/boost/iostreams/seek.hpp:137: undefined reference to `boost::iostreams::file_descriptor::seek(long, std::_Ios_Seekdir)'
collect2: ld returned 1 exit status 
```

注意我已经安装了 boost 并且以前编译过使用 iostream 的程序。任何帮助都非常感谢。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T16:20:14.910

排除明显的......你在编译`g++ -lboost_iostreams`吗？如果您可以分享一些有关如何调用编译器和链接器的信息，它将更容易回答您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-20T19:17:43.657

尝试将 g++ 与 gnuplot-iostream 库一起使用时遇到了确切的问题。

```
g++ prog.cpp -L/usr/lib -lboost_filesystem -lboost_system -lboost_iostreams 
```

为我解决了这个问题 - 代码编译成功，没有错误。

# c# - 为什么我使用 System.Threading.Timer 不起作用？

> ID：10075812
> 
> 赞同：4
> 
> 时间：2012-04-09T15:48:36.513
> 
> 标签：c#, timer

我正在尝试使用`System.Threading.Timer`. 它调用了该函数，但是它不起作用，并且不报告错误。为什么？

```
 public class Timerr
 {
    ArrayList listurl;
    ArrayList listcategory;
    protected Collection<Rss.Items> list = new Collection<Rss.Items>();
    RssManager reader = new RssManager();
    System.Threading.Timer Timer;
    System.DateTime StopTime;
    public void Run()
    {
        StopTime = System.DateTime.Now.AddMinutes(1);
        Timer = new System.Threading.Timer(TimerCallback, null, 0,1000);
    }

    private void TimerCallback(object state)
    {
        if (System.DateTime.Now >= StopTime)
        {
            Timer.Dispose();
            return;
        }
        callrss();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:05:04.440

这适用于 LINQPad：

```
void Main()
{
    var t = new Timerr();
    t.Run();

    Thread.Sleep(60000);
}

public class Timerr
 {
    System.Threading.Timer Timer;
    System.DateTime StopTime;
    public void Run()
    {
        StopTime = System.DateTime.Now.AddMinutes(1);
        Timer = new System.Threading.Timer(TimerCallback, null, 0,1000);
    }

    private void TimerCallback(object state)
    {
        if (System.DateTime.Now >= StopTime)
        {
            Timer.Dispose();
            return;
        }
        Console.WriteLine("Hello");
    }
} 
```

我建议您安装免费的[LINQPad](http://www.linqpad.net/)，您可以使用它非常快速地检查这些内容，而无需运行整个应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:56:28.620

你构造了一个实例`Timerr`吗？你打电话`Run`给那个实例了吗？您是否保留了该实例以使计时器不被 GC（`System.Threading.Timer`s 不会像 s 那样自动植根`System.Timers.Timer`）？您是否有一些繁忙的循环或其他方式使您的进程保持足够长的时间以允许调用计时器回调？

# opencl - 在openCL函数中传递参数

> ID：10075813
> 
> 赞同：0
> 
> 时间：2012-04-09T15:48:46.933
> 
> 标签：opencl, gpu

具有以下核函数：

```
 private static String programSource =
        "__kernel void sampleKernel(__global float *Y, __global  float *param) "
        + "{ int index = get_global_id(0); "
        + "  Y[index]=param[0]-Y[index]/param[1]-param[2]; "
        + "} "; 
```

第一个参数“Y”工作完美，但第二个参数“param”工作不正确，我收到空值。第二个参数必须是一个数组，由 3 个单元组成。

带有传输参数的代码片段：

```
 float[] arr_params = new float[3];
        arr_params[0] = (float) h_c;
        arr_params[1] = (float) sy;
        arr_params[2] = (float) dy;

        //pointers
        Pointer Pvy = Pointer.to(vy);
        Pointer Parr_params = Pointer.to(arr_params);

        cl_mem memObjects[] = new cl_mem[2];

        memObjects[0] = clCreateBuffer(context,
                CL_MEM_READ_WRITE,
                Sizeof.cl_float * vy.length, Pvy, null);
        memObjects[1] = clCreateBuffer(context,
                CL_MEM_READ_ONLY,
                Sizeof.cl_float * arr_params.length, Parr_params, null);

        // Set the arguments for the kernel
        clSetKernelArg(kernel, 0,
                Sizeof.cl_mem, Pointer.to(memObjects[0]));
        clSetKernelArg(kernel, 1,
                Sizeof.cl_mem, Pointer.to(memObjects[1]));

        // Set the work-item dimensions
        long global_work_size[] = new long[]{vy.length};
        long local_work_size[] = new long[]{1};

        // Execute the kernel
        clEnqueueNDRangeKernel(commandQueue, kernel, 1, null,
                global_work_size, local_work_size, 0, null, null);

        // Read the output data
        clEnqueueReadBuffer(commandQueue, memObjects[0], CL_TRUE, 0, vy.length * Sizeof.cl_float, Pvy, 0, null, null);
        // Release kernel, program, and memory objects
        clReleaseMemObject(memObjects[0]);
        clReleaseMemObject(memObjects[1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T21:41:49.097

第二个缓冲区全为零，因为在 clCreateBuffer 调用中，您没有告诉 OpenCL 从哪里获取数据。使用 CL_MEM_USE_HOST_PTR 或 CL_MEM_COPY_HOST_PTR。

# mysql - 为什么当我尝试使用 Perl 的 DBD::mysql 时会出错？

> ID：10075816
> 
> 赞同：1
> 
> 时间：2012-04-09T15:48:58.133
> 
> 标签：mysql, perl, dbi, dbd

我正在尝试使用 Perl 将数据写入 MySQL 数据库。但是，当我运行脚本时，出现以下错误：

`Can't locate loadable object for module DBD::mysql in @INC (@INC contains: C:/Perl/site/lib C:/Perl/lib .) at LargeLDAPSearch.pl line 10.`

我确实有这些“使用”语句和以下代码。这只是一小段摘录，因为该脚本在我尝试数据库连接之前有效：

```
use DBD::mysql;
use strict;
use warnings;
my $query_handle;

my ($platform,$database,$host,$port,$db_user,$pw) = ("mysql","results","localhost","3306","root","mysql123");

my $dsn = "dbi:$platform:$database:$host:$port";

my $connect = DBI->connect($dsn,$db_user,$pw) || die "Could not connect to database";

my $query_insert = "INSERT INTO " . $dbname . "(uid,status,lstpwdset,reset) VALUES (" . $strSAMA . "," . $strAcctControl . "," . $pwLS . "," . $reset . ")";

$query_handle = $connect->prepare($query_insert);
$query_handle->execute(); 
```

我进入了本地的 Perl 文件夹，并搜索了 lib 文件目录。在`/lib/`子文件夹中，我有两个文件夹，一个 DBI 和一个 DBD 子文件夹，我在 DBD 中有 MySQL 子文件夹，在 DBI 下还有一个带有 MySQL 子文件夹的 DBD 子文件夹。 `/lib/DBD/mysql/`&`/lib/DBI/DBD/mysql/`

这可能是错误，在两个地方挑剔。我访问了 CPAN 网站，并尝试了手动安装步骤，但我收到有关 SQLLite 的 DBI 安装错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T17:01:33.083

安装`DBI`和`DBD::mysql`使用

```
C:\> ppm 安装 DBI
C:\> ppm 安装 DBD::mysql
```

您似乎在使用 ActivePerl，因此请使用它为您提供的工具。

[DBD::mysql](http://search.cpan.org/perldoc/DBD%3a%3amysql)确实带有[文档](http://search.cpan.org/perldoc/DBD%3a%3amysql)：

> 从 perl 你用语句激活接口

```
use DBI; 
```

> 之后，您可以连接到多个 MySQL 数据库服务器，并通过一个简单的面向对象接口向其中任何一个发送多个查询。有两种类型的对象可用：数据库句柄和语句句柄。Perl 向 connect 方法返回一个数据库句柄，如下所示：

```
my $dbh = DBI->connect("DBI:mysql:database=$db;host=$host",
                  $user, $password, {RaiseError => 1}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T15:50:48.507

不要`use DBD::mysql`。做只是`use DBI`。它将自动加载您的 MySQL 驱动程序。

# google-app-engine - 消息队列与任务队列的区别

> ID：10075817
> 
> 赞同：31
> 
> 时间：2012-04-09T15:49:05.267
> 
> 标签：google-app-engine, message-queue

我想知道它们之间有什么区别。他们描述的是同一件事吗？

Google App Engine 服务[任务队列](https://developers.google.com/appengine/docs/java/taskqueue/overview)是消息队列的实现吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-11-16T07:26:18.320

我在 Facebook 上的一些开发者社区组上问了一个类似的问题。这与 GoogleAppEngine 无关——我更笼统地要求确定 RabbitMQ 和 Celery 之间的用例。以下是我得到的回复，我认为这些回复与该主题相关，并且清楚地阐明了消息队列和任务队列之间的区别。

我问：

> 是否可以说“Celery 是一个 QueueWrapper/QueueFramework，它消除了必须管理内部 queueManagement/queueAdministration 活动等的复杂性”？
> 
> 我理解书中的语言“Celery 是一个任务队列”和“RabbitMQ 是一个消息代理”。然而，作为第一次使用 celery 的用户，这似乎有点令人困惑，因为我们一直都知道 RabbitMQ 是“队列”。
> 
> 请帮助解释芹菜与rabbitMQ对比的方式/作用

我从***Abu Ashraf Masnun***[得到的回复](https://www.facebook.com/groups/pythonbd/permalink/677928095641944/?comment_id=677936985641055&offset=0&total_comments=2&comment_tracking=%7B%22tn%22%3A%22R%22%7D)

 *> 任务队列和消息队列。RabbitMQ 是一个“MQ”。它接收消息并传递消息。
> 
> Celery 是一个任务队列。它接收任务及其相关数据，运行它们并交付结果。
> 
> 让我们暂时忘记芹菜。我们来谈谈 RabbitMQ。我们通常会做什么？我们的 Django/Flask 应用程序将向队列发送消息。我们将运行一些工作人员，它们将在某些队列中等待新消息。当新消息到达时，它开始工作并处理任务。
> 
> Celery 完美地管理了整个过程。我们不再需要学习或担心 AMQP 或 RabbitMQ 的细节。我们可以使用 Redis 甚至数据库（例如 MySQL）作为消息代理。Celery 允许我们用工人代码定义“任务”。当我们需要在后台（甚至前台）做某事时，我们可以调用这个任务（即时执行）或者调度这个任务进行延迟处理。Celery 将处理消息传递和运行任务。它将启动知道如何运行您定义的任务并存储结果的工作人员。因此，您可以稍后在需要时查询任务结果甚至任务进度。
> 
> 您也可以使用 Celery 作为 cron 工作的替代品（尽管我不太喜欢它）！

我从***Juan Francisco Calderon Zumba***[得到的另一个回应](https://www.facebook.com/groups/pxperts/permalink/1086383271372982/?comment_id=1086408768037099&offset=0&total_comments=2&comment_tracking=%7B%22tn%22%3A%22R%22%7D)

 *> 我的理解是 celery 只是一个非常高层次的抽象来实现事件的生产者/消费者。它消除了您需要做的一些痛苦的事情，例如使用 rabbitmq。芹菜本身不是队列。事件队列存储在您选择的系统中，celery 可以帮助您处理此类事件，而无需从头开始编写生产者/消费者。

最终，这是我带回家作为我最终学习的内容：

> Celery 是一个队列包装器/框架，它消除了必须管理底层 AMQP 机制/架构的复杂性，这些机制/架构与直接操作 RabbitMQ

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T16:19:02.560

GAE 的任务队列是一种允许应用程序进行后台处理的方法，它们的用途与消息队列不同。它们是非常不同的东西，具有不同的功能。

消息队列是一种在进程、线程、系统之间共享信息的机制。

AppEngine 任务队列是 AppEngine 应用程序对自己说的一种方式，我需要这样做，但我稍后会在客户端请求的上下文之外执行它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-08-11T20:06:07.403

可能因上下文而异，但以下是我的理解：

## 消息队列

消息队列是消息代理的一部分——一个队列**数据结构**的实现，在这里你可以：

1.  Enqueue/produce/push/send（根据平台不同的术语，但指的是同一个东西）消息。
2.  出列/消费/拉取/接收消息。
3.  提供 FIFO 排序。

## 任务队列

另一方面，任务队列是处理任务：

1.  以理想的速度 - 您的系统可以同时处理多少个任务？可能取决于您机器上的 CPU 内核数量，或者如果您在 Kubernetes 上，则取决于节点数量及其大小。它是关于**并发控制**，或者不那么酷的术语，“缓冲”。
2.  以异步方式 - 非阻塞任务处理。在后台处理任务，因此您的主进程可以在启动任务后执行其他操作。HTTP 上的服务器 API 是一个流行的用例，您希望快速响应客户端，因为 HTTP 请求通常有很短的超时时间（<= 30 秒），尤其是当您的 API 由最终用户触发时（人类不耐烦）。如果您的任务花费的时间超过几秒钟，您需要考虑将其置于后台，并给出一个 API 响应，例如“好的，我收到了您的请求，我会在有时间时处理它”。

## 他们的区别

如您所见，消息队列和任务队列关注的方面不同，它们可以重叠，但不一定。

任务队列而不是消息队列的示例 - 如果您的任务不关心排序 - 每个任务不相互依赖 - 那么您不需要“队列”，FIFO数据结构。你可以，但你不必这样做。你只需要一个地方来存储缓冲任务，比如一个池、一个简单的 SQL/NoSQL 数据库，甚至 S3 就足够了。

一个相反的例子是推送通知。您使用消息队列但不一定使用任务队列。服务器生成事件/通知并希望将它们传递给客户端。服务器将在队列中推送通知。当客户端准备好这样做时，客户端会从队列中消费/拉下通知。GCP PubSub、AWS SNS 等产品可用于此目的。

## 带走

由于并发控制，任务队列通常比消息队列更复杂，更不用说您是否想要水平扩展，例如跨节点分配工作人员以优化并发性。

像 Celery 这样的工具是任务队列 + 消息队列合二为一。据我所知，像 Celery 这样的工具并不多，我猜这就是它如此受欢迎的原因（NodeJS 中的替代品是 Bull 或 Bee，或者如果你知道更多，请告诉我！）。

我的公司最近不得不实施一个任务队列。在谷歌搜索合适的工具时，这两个术语让我很困惑，因为我知道我想要什么，但不知道人们如何称呼它以及我应该搜索什么关键字。

我个人没有太多使用 AppEngine，所以无法回答这个问题，但您可以随时检查以上几点，看看它是否满足要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-13T03:14:09.677

如果我们只谈论功能，那么就很难辨别其中的区别。在我的公司，由于我们在两者之间的误解，我们尝试并惨遭失败。我们创建我们的工作队列（又名任务队列，又名调度程序，又名 cron），并将其用于长轮询。我们将任务计划设置为未来 5 秒（延迟）以触发轮询代码。该代码触发一个请求并检查响应。如果条件不满足，我们将再次创建一个任务来扩展轮询，否则不会扩展。这是一个数据库、网络和计算密集型。我们的新用例需要快速响应，我们必须将延迟减少到 0.1，这会导致每次轮询的大量浪费。所以这是技术实现相同目标但熟练程度不同的主要示例所以答案是主要区别在于消息队列和任务队列试图实现的目标。好读： [https://stackoverflow.com/a/32804602/3422861](https://stackoverflow.com/a/32804602/3422861)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-02-03T10:07:28.290

如果从**浏览器的 JavaScript 运行环境**或 Nodejs JavaScript 运行环境的角度来考虑，答案是：

> **消息队列**和**微任务队列**（如*Promises* ）的区别在于微任务队列的优先级高于消息队列，也就是说微任务队列里面的Promise任务会在里面的回调之前执行消息队列。**

# visual-studio-2010 - MVC 3 Visual Studio 2010 Razor 模型智能感知不起作用

> ID：10075821
> 
> 赞同：1
> 
> 时间：2012-04-09T15:49:28.920
> 
> 标签：visual-studio-2010, razor, visual-studio-2012

自从我为 VS 11 更新了我的项目后，我无法让我的 @Model intellisense 在 Visual Studio 的任一版本（2010 或 11）中工作。我尝试恢复 .csproj 文件以删除 VS 11 引用，但无济于事。其他 MVC 3 Razor 项目运行良好。有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:11:01.977

不能在两个版本的 Visual Studio 中工作，闻起来像是安装可能有点损坏。我的第一步是尝试修复 Visual Studio 2010 安装并查看 Intellisense 行为是否仅在 2010 年恢复。

*   控制面板
*   添加/删除程序
*   视觉工作室 2010
*   在菜单中选择修复

如果这可行，那么您可能会对返回的智能感知感到满意，或者对 Visual Studio 11 尝试相同的步骤，并希望它能够为两者修复它。但是，如果要怪罪于 2011 年的安装，那么很可能它会立即重新破坏它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:56:38.037

我发现[这篇](http://connect.microsoft.com/VisualStudio/feedback/details/651252/sp1-breaks-razor-editor)文章解决了我的问题。

编辑：

似乎是安装 VS 11 和一些工具更新的某种组合导致了这个问题。我很幸运并设法收到以下错误消息：

```
The type System.Web.Mvc.ModelClientValidationRule exists in both c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.O\Assemblies\System.Web.WebPages.dll and c:\Program
Files (6)\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\System.Web.Mvc.dll 
```

在进行了一些挖掘之后，我最终卸载了“Microsoft ASP.NET Web Pages 2 - Visual Studio 2010 Tools”，结果一切正常。诚然，卸载“Microsoft ASP.NET 网页 - Visual Studio 2010 工具”可能是一个更好的主意，但这目前正在运行。

我发现互联网上完全缺乏有关此类问题的信息，因此我将其放在这里以供后代使用。

# css - 75% + 25% 不等于 100% ……显然！CSS 问题

> ID：10075825
> 
> 赞同：1
> 
> 时间：2012-04-09T15:50:04.160
> 
> 标签：css, percentage

我有一个宽度为 75% 的图像宽度和一个宽度为 25% 的 p-box，但它们不适合它们的父容器！

[http://jsfiddle.net/bmBnF/4/](http://jsfiddle.net/bmBnF/4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T15:51:43.123

问题是在 CSS 中`width`实际上意味着“内容宽度”。填充和边框不计算在内，因此您必须调整（减小）宽度以补偿它们。

请参阅[更新的 jsfiddle](http://jsfiddle.net/bmBnF/3/)。请注意，我将`20%`宽度更改为`16%`（补偿`2%`每一侧的边距），并更改`80%`为`79%`以解决舍入问题。

注意：在较新的浏览器中，您可以强制对特定元素使用“传统”（Microsoft）框模型，然后`width`意味着全宽，包括填充和边框。有关示例，请参见 Cthulhu 的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T15:53:43.383

只需添加`-webkit-box-sizing:border-box; -moz-box-sizing:border-box; box-sizing:border-box;`到 .flex-caption：

[http://jsfiddle.net/Cthulhu/bmBnF/2/](http://jsfiddle.net/Cthulhu/bmBnF/2/)

这是盒子模型错误，您可以在维基百科上阅读：[http ://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T15:55:10.983

我会尝试调整一下：

```
.flexslider .slides img {
    float: left; /* leave other properties */
}

.flex-caption {
    width: 16%; /* leave others - width is 16% because you have a 2% padding around all sides ( 16 width + 2 left + 2 right */ )
} 
```

# java - Java - 遍历包含列表的地图

> ID：10075826
> 
> 赞同：7
> 
> 时间：2012-04-09T15:50:16.050
> 
> 标签：java, list, map, set

第一次来这里，所以我希望这是有道理的！

我有一个地图，其中包含一个字符串作为它的键，以及一个字符串列表作为它的值。我需要遍历地图中每个列表中包含的所有变量。

因此，首先我想获得有效的密钥：

```
Set<String> keys = theMap.keySet(); 
```

这将返回一个包含我所有密钥的集合。伟大的 ：）

这就是我陷入困境的地方 - 网络上的大多数信息似乎都假设我希望从 Key 返回的值将是一个简单的字符串或整数，而不是另一个 Set，或者在这种情况下是一个 List。我试过`theMap.values()`了，但是没有用，我尝试了一个 forloop / for:eachloop，但这些都没有成功。

谢谢大家！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-09T15:52:04.123

```
for(List<String> valueList : map.values()) {
  for(String value : valueList) {
    ...
  }
} 
```

这确实是“正常”的做法。或者，如果您还需要密钥...

```
for(Map.Entry<String, List<String>> entry : map.entrySet()) {
  String key = entry.getKey();
  for (String value : entry.getValue()) {
    ...
  }
} 
```

也就是说，如果您可以选择，您可能会对[Guava](https://github.com/google/guava) [`ListMultimap`](https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Multimap.html)感兴趣，它很像 a `Map<K, List<V>>`，但具有更多功能 - 包括 a`Collection<V> values()`与您要求的完全一样，“扁平化”所有值在 multimap 中合并为一个集合。（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T16:02:17.547

I recommend iterating over `Map.entrySet()` as it is faster (you have both, the key and the value, found in one step).

```
Map<String, List<String>> m = Collections.singletonMap(
    "list1", Arrays.asList("s1", "s2", "s3"));

for (Map.Entry<String, List<String>> me : m.entrySet()) {
  String key = me.getKey();
  List<String> valueList = me.getValue();
  System.out.println("Key: " + key);
  System.out.print("Values: ");
  for (String s : valueList) {
    System.out.print(s + " ");
  }
} 
```

Or the same using the Java 8 API (Lambda functions):

```
m.entrySet().forEach(me -> {
    System.out.println("Key: " + me.getKey());
    System.out.print("Values: ");
    me.getValue().forEach(s -> System.out.print(s + " "));
}); 
```

Or with a little bit of Java Stream API mapping hardcore and method reference :-)

```
m.entrySet().stream().map(me -> {
    return "Key: " + me.getKey() + "\n"
        + "Values: " + me.getValue().stream()
            .collect(Collectors.joining(" "));
    })
    .forEach(System.out::print); 
```

And the output is, as expected:

```
Key: list1
Values: s1 s2 s3 

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T15:52:29.077

你需要一个`Map<String, List<String>>`

左边`String`是key，右边`List<String>`是value，在这个例子中是`List`s`String`的a

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-11T10:00:56.210

Java 8 API（lambda 函数）的另一个示例。
当你想迭代时：

```
Map<String, List<String>> theMap = new HashMap<>();

theMap.forEach((key, value) -> {
       System.out.println("KEY: " + key);
       System.out.print("VALUES: ");
       value.forEach(System.out::println);
}); 
```

# iis - 我正在尝试在实际的 Web 服务器上部署我的 fusioncharts 图表

> ID：10075834
> 
> 赞同：1
> 
> 时间：2012-04-09T15:50:40.333
> 
> 标签：iis, asp-classic, vbscript, webserver

我正在尝试在实际的 Web 服务器上部署我的 fusioncharts 图表。它是用 ASP 和 VB 编写的。此外，我还能够通过本地主机在 IIS 上部署图表。那么有谁知道你是否需要改变一些简单的东西或类似的东西？最后一件事是我的 ASP 文件上的 HTML 代码显示了，但没有一点 ASP 代码可见......提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T13:08:34.847

Ahhh I just found out how to do it. First of all apparently asp code isn't visible when your trying to test it from the server. You have to go to the actual website to view the page..... I guess thats what you meant by testing Nathan....:P Thanks

# c++ - 设备内存空间中的 cuda 程序内核代码

> ID：10075835
> 
> 赞同：2
> 
> 时间：2012-04-09T15:50:46.760
> 
> 标签：c++, linux, memory, cuda

有什么办法可以查明，gpu（设备）内存中的内核代码（执行）占用了多少内存？如果我有 512 MB 设备内存，我怎么知道有多少可分配？视觉分析器可以显示这样的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:14:12.387

程序代码占用很少的内存。CUDA 上下文的其余部分（本地内存、常量内存、printf 缓冲区、堆和堆栈）使用更多。CUDA 运行时 API 包含`cudeGetMemInfo`调用，该调用将返回您的代码可用的可用内存量。请注意，由于碎片和页面大小的限制，您将无法分配内存的每个最后一个空闲字节。最好的策略是从最大值开始并递归地尝试分配连续较小的分配，直到获得成功的分配。

[您可以在我](https://stackoverflow.com/a/8686409/681865)对之前类似问题的回答中看到对设备内存消耗的更完整解释，

# iphone - iPhone - 使用 JSON 向网站发送评论、图像和/或视频

> ID：10075838
> 
> 赞同：0
> 
> 时间：2012-04-09T15:50:55.397
> 
> 标签：iphone, json, service, web

我需要能够从网站上提取评论/图像/视频，并允许将用户的评论/图像/视频推送到网站。我很确定 JSON 可以用于文本，但我不确定它是否可以用于图像/视频。

它可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:29:12.380

JSON 仅支持一些简单的数据类型（字符串、布尔值、数字）。为了包含更多富媒体格式，您必须确定如何将它们序列化为这种简单的数据类型。

考虑将它们解析为[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)，或将它们托管在其他地方，并通过 URL 链接回它们。

*   [此 SO 帖子](https://stackoverflow.com/questions/501699/data-url-png-from-uiimage)包含有关如何将 UIImage 转换为数据 URI 的信息。
*   您还可以使用`NSData`的初始化程序来获取视频资源的原始数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:38:12.427

您可以，但正如其他海报所说，这不是一个好主意，通过 JSON 获取图像 URL。对于上传，您想使用 POST 以便您可以直接流式传输数据。这样可以在上传大文件时节省序列化和内存。看：[AFNetworking 上传文件](https://stackoverflow.com/questions/8234186/afnetworking-uploading-a-file)

# java - JAVA鼠标事件

> ID：10075839
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:51:04.800
> 
> 标签：java, graphics, mouseevent, awt, mouseclick-event

在我的程序中，从围绕饼菜单绘制的饼菜单相关形状中选择选项后。我想要的是当用户选择该选项然后单击屏幕中的任意位置时，相关形状将在屏幕上绘制。谁能告诉我我怎样才能做到这一点？

**鼠标点击事件代码**

```
public void mouseClicked(MouseEvent e) 
{
    double base=x1-s;
    double prep=as-y1;
    double angle=Math.atan2(prep, base);
    angle=((angle*180)/Math.PI);

    if(angle==0)
    {

    }
    else if(angle>0&&angle<45)
    {

        p.mc1=e.getX()+100;
        p.mc2=e.getY()-25;
        p.repaint();        

    } 
```

**馅饼菜单**
**![饼图菜单绘图](../Images/1a98db34c237c99e636d5dd9b38e1379.png)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:48:11.873

不知道如何准确地制作一个形状，但一个矩形会有所帮助。计算饼图各部分的坐标并将其近似为一个矩形。例如，如果饼图中的出口部分来自（20,80），则从（20,80）创建一个矩形，宽度和高度为20像素。创建9个矩形对象，如

> 矩形 r1=new Rectangle(int startX,int startY,int width,int height);

并且使用 mouseListener，您可以轻松地检查使用哪个矩形被选中

> ```
> public void mousePressed(MouseEvent me){
>     if(r1.contains(me.getPoint){
>          selected=1;
>     } 
> ```

在开关盒中使用选定的值并为您想要的任何方法实现方法。

# javafx-2 - 如何隐藏 HTMLEditor 的控件？

> ID：10075841
> 
> 赞同：15
> 
> 时间：2012-04-09T15:51:18.673
> 
> 标签：javafx-2

是否可以在实际文本上方隐藏 HTMLEditor 的控件？（对齐、复制和粘贴图标、样式等）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-19T16:45:23.290

```
public static void hideHTMLEditorToolbars(final HTMLEditor editor)
{
    editor.setVisible(false);
    Platform.runLater(new Runnable()
    {
        @Override
        public void run()
        {
            Node[] nodes = editor.lookupAll(".tool-bar").toArray(new Node[0]);
            for(Node node : nodes)
            {
                node.setVisible(false);
                node.setManaged(false);
            }
            editor.setVisible(true);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-09T23:34:42.650

如果您使用不受支持的方法，则可以非常轻松地自定义工具栏。

正如 Uluk 在他的回答中所说，以下方法不受官方支持。

```
import java.util.regex.Pattern;
import javafx.application.Application;
import javafx.scene.*;
import javafx.scene.image.ImageView;
import javafx.scene.web.HTMLEditor;
import javafx.stage.Stage;

public class HTMLEditorSample extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) {
    final HTMLEditor htmlEditor = new HTMLEditor();
    stage.setScene(new Scene(htmlEditor));
    stage.show();

    hideImageNodesMatching(htmlEditor, Pattern.compile(".*(Cut|Copy|Paste).*"), 0);
    Node seperator = htmlEditor.lookup(".separator");
    seperator.setVisible(false); seperator.setManaged(false);
  }

  public void hideImageNodesMatching(Node node, Pattern imageNamePattern, int depth) {
    if (node instanceof ImageView) {
      ImageView imageView = (ImageView) node;
      String url = imageView.getImage().impl_getUrl();
      if (url != null && imageNamePattern.matcher(url).matches()) {
        Node button = imageView.getParent().getParent();
        button.setVisible(false); button.setManaged(false);
      }
    }
    if (node instanceof Parent) 
      for (Node child : ((Parent) node).getChildrenUnmodifiable()) 
        hideImageNodesMatching(child, imageNamePattern, depth + 1);
  }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-09T16:31:05.417

看来你不能按照[这个](http://docs.oracle.com/javafx/2.0/ui_controls/editor.htm)官方教程。

> 在组件的实现中提供了格式化工具栏。您无法切换它们的可见性。但是，您仍然可以通过应用 CSS 样式来自定义编辑器的外观......

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-27T10:01:29.780

我已经制作了一些函数来修改 HTML 编辑器（以获得它的简约版本），也许其他人也可能想要使用它。

![在此处输入图像描述](../Images/52c3ec21afb55f25a705c36c787688b1.png)

编码：

```
import javafx.application.*;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.web.HTMLEditor;
import javafx.stage.Stage;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.Pane;
import com.sun.javafx.scene.web.skin.PopupButton;

public class HTMLEditorModifyer extends Application {

      public static void main(String[] args) { launch(args); }
      @Override public void start(Stage stage) {
        final HTMLEditor htmlEditor = new HTMLEditor();
        stage.setScene(new Scene(htmlEditor));

        stage.setWidth(300);
        stage.setHeight(200);
        stage.show();

        addCustomToolBarTo(htmlEditor);

        printChildren(htmlEditor, 20);

        moveFromTo(htmlEditor, "PopupButton", 0, "ToolBar", 2);
        moveFromTo(htmlEditor, "PopupButton", 1, "ToolBar", 2);

        moveFromTo(htmlEditor, "Separator", 4, "ToolBar", 2);
        moveFromTo(htmlEditor, "ComboBox", 2, "ToolBar", 2);
        moveFromTo(htmlEditor, "Separator", 5, "ToolBar", 2);

        moveFromTo(htmlEditor, "ToggleButton", 6, "ToolBar", 2);
        moveFromTo(htmlEditor, "ToggleButton", 7, "ToolBar", 2);
        moveFromTo(htmlEditor, "ToggleButton", 8, "ToolBar", 2);

        removeFrom(htmlEditor, "ToolBar", 1);
        removeFrom(htmlEditor, "ToolBar", 0);

        //printChildren(htmlEditor, 20);

      }

      public void moveFromTo(HTMLEditor he, String t, int c, String t2, int c2)
      {
          Node nCb = new Button(); //just has to be sth.  

          //Copy From:
          int i = 0;
          switch(t)
          {
              case "PopupButton":
                  for (Node candidate: (he.lookupAll("PopupButton"))) 
                  {
                    if (candidate instanceof PopupButton)
                    {
                        PopupButton cb = (PopupButton) candidate;
                        if (i == c)
                        {
                            nCb = cb;
                            break;
                        }
                    }
                    i++;
                  }
                  break;  
              case "Separator":
                  for (Node candidate: (he.lookupAll("Separator"))) 
                  {
                    if (candidate instanceof Separator)
                    {
                        Separator cb = (Separator) candidate;
                        if (i == c)
                        {
                            nCb = cb;
                            break;
                        }
                    }
                    i++;
                  }
                  break;
              case "ComboBox":
                  for (Node candidate: (he.lookupAll("ComboBox"))) 
                  {
                    if (candidate instanceof ComboBox)
                    {
                        ComboBox cb = (ComboBox) candidate;
                        if (i == c)
                        {
                            nCb = cb;
                            break;
                        }
                    }
                    i++;
                  }
                  break;    
              case "ToggleButton":
                  for (Node candidate: (he.lookupAll("ToggleButton"))) 
                  {
                    if (candidate instanceof ToggleButton)
                    {
                        ToggleButton cb = (ToggleButton) candidate;
                        if (i == c)
                        {
                            nCb = cb;
                            break;
                        }
                    }
                    i++;
                  }
                  break;    
          }
          //Copy To:
          i = 0;
          switch(t2)
          {
              case "ToolBar":
                  for (Node candidate: (he.lookupAll("ToolBar"))) 
                  {
                    if (candidate instanceof ToolBar)
                    {
                        ToolBar cb2 = (ToolBar) candidate;
                        if (i == c2)
                        {
                            cb2.getItems().add(nCb);
                            break;
                        }
                    }
                    i++;
                  }
                  break;    
          }
      }

      public void removeFrom(HTMLEditor he, String t, int c)
      {
          int i = 0;

          switch(t)
          {
          case "ToolBar":
              for (Node candidate: (he.lookupAll("ToolBar"))) 
              {
                if (candidate instanceof ToolBar)
                {
                    ToolBar cb = (ToolBar) candidate;
                    if (i == c)
                    {
                        Node nCb = cb;
                        ((Pane) nCb.getParent()).getChildren().remove(nCb);
                        break;
                    }
                }
                i++;
              }
              break;
          case "PopupButton":
              for (Node candidate: (he.lookupAll("PopupButton"))) 
              {
                    if (i == c)
                    {
                        Node nCb = candidate;
                        nCb.setVisible(false); nCb.setManaged(false);
                        break;
                    }
                    i++;
              }
              break;
          case "ToggleButton":
              for (Node candidate: (he.lookupAll("ToggleButton"))) 
              {
                if (candidate instanceof ToggleButton)
                {
                    ToggleButton cb = (ToggleButton) candidate;
                    if (i == c)
                    {
                        Node nCb = cb;
                        nCb.setVisible(false); nCb.setManaged(false);
                        break;
                    }
                }
                i++;
              }
              break;
          case "Separator":
              for (Node candidate: (he.lookupAll("Separator"))) 
              {
                if (candidate instanceof Separator)
                {
                    Separator cb = (Separator) candidate;
                    if (i == c)
                    {
                        Node nCb = cb;
                        nCb.setVisible(false); nCb.setManaged(false);
                        break;
                    }
                }
                i++;
              }
              break;
          case "Button":
              for (Node candidate: (he.lookupAll("Button"))) 
              {
                if (candidate instanceof Button)
                {
                    Button cb = (Button) candidate;
                    if (i == c)
                    {
                        Node nCb = cb;
                        nCb.setVisible(false); nCb.setManaged(false);
                        break;
                    }
                }
                i++;
              }
              break;
          case "ComboBox":
              for (Node candidate: (he.lookupAll("ComboBox"))) 
              {
                if (candidate instanceof ComboBox)
                {
                    ComboBox cb = (ComboBox) candidate;
                    if (i == c)
                    {
                        Node nCb = cb;
                        nCb.setVisible(false); nCb.setManaged(false);
                        break;
                    }
                }
                i++;
              }
              break;
          }   
      }

      public void printChildren(HTMLEditor he, int MAXDEPTH)
      {
          System.out.println("Print Children ==========>>>>");
          String[] hieraArray = new String[MAXDEPTH]; 
          int maxDepth = 0;
          int lastDepth = 0;
          Node parent;

            /* List all elements of the HTMLeditor */
            for (Node element: (he.lookupAll("*")))
            {
                parent = element.getParent();
                if (maxDepth == 0) 
                {
                    hieraArray[0] = element.getClass().getSimpleName().toString();
                    System.out.print(hieraArray[0]);
                    System.out.println("");
                    maxDepth = 1;                   
                }
                else 
                {
                    int i = 0, i2 = 0;
                    boolean found = false;
                    for(i=maxDepth; i>=0; i--)
                    {
                        if (hieraArray[i] == null || parent.getClass().getSimpleName() == null) continue;
                        if (hieraArray[i].equals(parent.getClass().getSimpleName()))
                        {
                            for (i2 = 0; i2 <= i; i2++)
                            {
                                System.out.print("|");
                            }   
                            if ((Math.abs(lastDepth-i2)) > 2) System.out.print("->" + element.getClass().getSimpleName() + " {p: " + parent.getClass().getSimpleName() + "}");
                            else System.out.print("->" + element.getClass().getSimpleName());
                            //if (element.getClass().getSimpleName().equals("PopupButton"))  System.out.print(" ??: " + element + " ::: " + element.getClass());
                            lastDepth = i2;

                            hieraArray[(i+1)] = element.getClass().getSimpleName();
                            if (maxDepth < (i+1)) maxDepth = (i+1);
                            found = true;
                            System.out.println("");
                            break;
                        }
                    }
                    if (found == false) 
                    {
                        hieraArray[(i+1)] = parent.getClass().getSimpleName();
                        if (maxDepth < (i+1)) maxDepth = (i+1);
                    }
                    if ((maxDepth+1) >= MAXDEPTH) 
                    {
                        System.out.println("MAXDEPTH reached! increase ArraySize!");
                        return;
                    }
                }
            }

      }

      public ToolBar addCustomToolBarTo(HTMLEditor he)
      {
          /* Thers one GridPane to the HTMLEditor where we add the ToolBar */
          ToolBar customTB = new ToolBar();
          for (Node candidate: (he.lookupAll("GridPane"))) 
          {
            if (candidate instanceof GridPane)
            {
                ((GridPane) candidate).getChildren().add(customTB);
                break;
            }   
          }
          return customTB;
      }       
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-05-09T13:02:11.720

如果有人真的想使用不受支持的方式来隐藏工具栏，那么还有一种更简单的方法可以实现这一点（我尚未测试这是否会导致 HTMLEditor 控件出现任何问题，因此使用此方法需要您自担风险）。

```
package htmleditorsample;

import javafx.application.Application;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.layout.Pane;
import javafx.scene.web.HTMLEditor;
import javafx.stage.Stage;

public class HTMLEditorSample extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        final HTMLEditor htmlEditor = new HTMLEditor();
        primaryStage.setScene(new Scene(htmlEditor));
        primaryStage.show();

        for (Node toolBar = htmlEditor.lookup(".tool-bar"); toolBar != null; toolBar = htmlEditor.lookup(".tool-bar")) {
            ((Pane) toolBar.getParent()).getChildren().remove(toolBar);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-15T20:26:23.207

尝试这个：

```
.html-editor .top-toolbar
{
        -fx-max-width: 0px;
	-fx-min-width: 0px;
	-fx-pref-width: 0px;
	-fx-max-height: 0px;
	-fx-min-height: 0px;
	-fx-pref-height: 0px;
        -fx-opacity: 0;
}
.html-editor .bottom-toolbar
{
        -fx-max-width: 0px;
	-fx-min-width: 0px;
	-fx-pref-width: 0px;
	-fx-max-height: 0px;
	-fx-min-height: 0px;
	-fx-pref-height: 0px;
        -fx-opacity: 0;
}
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-08T21:22:01.070

您应该能够从其工具栏中隐藏按钮，甚至删除它们。

我会这样做：

```
final Map map = new HashMap();
for (Node candidate: (htmlEditor.lookupAll("ToolBar"))) {
  List list = ((ToolBar) candidate).getItems();
  for (int i = 0; i < list.size(); i++) {
    Node b = (Node) list.get(i);
    map.put(map.size() + 1, b);
  }
}

// So we've fetch all buttons (including separators) and assigned
// each an index number.  Now then to hide an item:

((Node) map.get(2)).setVisible(false); // Hides copy button
((Node) map.get(13)).setVisible(false); // Hides bullets button

// Or to just completely remove them:

map.remove(18); // Removes font-menu-button
map.remove(25); // Removes editor-strike button
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-15T10:25:00.070

```
.tool-bar
{
    /*-fx-visibility:hidden;
     -fx-display:none; */

    -fx-opacity: 0;
} 
```

不透明度有效，但菜单保持活动状态。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-19T17:53:33.663

这是一个相当古老的线程，但这些答案中的大多数只能工作，尤其是在较新的 JDK 上，所以这是我根据该线程中的一些概念编写的自定义 HTML 编辑器类。

```
import javafx.application.Platform;
import javafx.scene.Node;
import javafx.scene.control.ToolBar;
import javafx.scene.web.HTMLEditor;

import java.util.ArrayList;
import java.util.HashSet;

public class MinimalHTMLEditor extends HTMLEditor {
    public MinimalHTMLEditor() {
        super();
        customizeHtmlEditor(this);
    }

    public static void customizeHtmlEditor(final HTMLEditor editor) {
        editor.setVisible(false);
        Platform.runLater(() -> {
            ToolBar toolBar1 = (ToolBar) editor.lookup(".top-toolbar");
            ToolBar toolBar2 = (ToolBar) editor.lookup(".bottom-toolbar");

            HashSet<Node> nodesToKeep = new HashSet<>();

            nodesToKeep.add(editor.lookup(".html-editor-numbers"));
            nodesToKeep.add(editor.lookup(".html-editor-bullets"));

            nodesToKeep.add(editor.lookup(".html-editor-foreground"));
            nodesToKeep.add(editor.lookup(".html-editor-background"));

            nodesToKeep.add(editor.lookup(".html-editor-bold"));
            nodesToKeep.add(editor.lookup(".html-editor-italics"));
            nodesToKeep.add(editor.lookup(".html-editor-underline"));
            nodesToKeep.add(editor.lookup(".html-editor-strike"));

            toolBar1.getItems().removeIf(n -> !nodesToKeep.contains(n));
            toolBar2.getItems().removeIf(n -> !nodesToKeep.contains(n));

            ArrayList<Node> toCopy = new ArrayList<>();
            toCopy.addAll(toolBar2.getItems());
            toolBar2.getItems().clear();
            toolBar1.getItems().addAll(toCopy);

            toolBar2.setVisible(false);
            toolBar2.setManaged(false);

            editor.setVisible(true);
        });
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-09T11:30:57.817

您可以使用 CSS 删除特定按钮，例如：

```
.html-editor-copy {
  visibility: hidden;
} 
```

可以在以下位置找到 CSS 按钮名称的完整列表： [Oracle CSS 参考指南](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/doc-files/cssref.html#htmleditor)

# logic - 这 2 条语句是等价的吗？

> ID：10075846
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:51:42.543
> 
> 标签：logic, discrete-mathematics

条件命题1：**如果**是晴天，**那**我就去。

条件命题2：**除非**不是晴天，**否则我会去。**

让我们将它们分解为简单的命题。

答：阳光明媚。

B：我去。

因此重写前两个条件命题：

1：**如果**A，**那么**B

2：B，**除非不是**A

在我看来，他们每个人的真值表是：

1：

```
A--------B--------Proposition 1

T--------T-------------T

T--------F-------------F

F--------T-------------T

F--------F-------------T 
```

2：

```
A--------B--------Proposition 2

T--------T-------------T

T--------F-------------F

F--------T-------------F   <---- here is the difference.

F--------F-------------T 
```

所以我认为这两个陈述不等价，但*Kenneth H. Rosen*着名的*离散数学及其应用*表明它们**是**等价的。

 ***有人可以对此有所了解吗？

另一个帖子在这里：

[https://math.stackexchange.com/questions/129691/are-these-two-statements-equivalent](https://math.stackexchange.com/questions/129691/are-these-two-statements-equivalent)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:02:16.743

我认为问题在于“除非”这个词。除非真的在描述某些事情不是真的。

条件命题1：如果是晴天，那我就去。

条件命题2：除非不是晴天，否则我会去。IE 如果不是晴天，我就不去了。

1：如果 A，那么 B

2：如果不是 B，那么不是 A

A ⇒ B 与 ¬B ⇒ ¬A 相同。我不记得法律的确切名称，但很容易推导出来。使用蕴含律将其转换为 ¬A ∨ B 和 B ∨ ¬A 并且交换律将 B ∨ ¬A 变为 ¬A ∨ B***

# sql - SQL 查询给出错误

> ID：10075848
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:51:52.933
> 
> 标签：sql, sqlite

这个查询有什么问题：

```
SELECT count() as total_students 
FROM student_information;

SELECT
    (
        SELECT student_project_marks 
        from students_project 
        WHERE student_project_id=student_information.student_project_id 
    ) 
    + student_assignment_marks 
    + student_exam_marks AS total_marks 
FROM student_information  
ORDER BY total_marks DESC;

UPDATE student_information
SET (
        SELECT student_grade 
        FROM student_information 
        LIMIT 0.1*total_students 
        ORDER BY total_marks DESC
    )="A"; 
```

我正在尝试按获得的总分来选择`0.1*total_students`学生人数并更新他们的成绩......前 10% 将被授予 A。我收到错误： `syntax error near '('`

我有 2 个表：通过以下查询创建它们：

```
create table if not exists student_information (
student_name varchar(80),
student_roll_num int primary key,
student_email varchar(64),
student_assignment_marks int(2) check(student_assignment_marks<=30),
student_exam_marks int(2) check(student_exam_marks<=50),
student_project_id varchar(25),
student_grade varchar(2)
)

create table if not exist students_project (
 student_project_id varchar(25),
 student_project_title varchar(25),
 student_project_marks int(2) check(student_project_marks>=0 and student_project_marks<=20)
 ) 
```

项目中的标记可`student_project`通过`student_project_id`.

现在我如何根据总分来评分......前10％必须获得A，接下来的10％必须获得B等等......我知道如何计算总分......我写了一个类似的查询这个：

```
select student_roll_num, 
 (SELECT student_project_marks 
  from students_project 
  WHERE student_project_id=student_information.student_project_id )+
student_assignment_marks+student_exam_marks as total_marks from student_information; 
```

有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:34:20.767

这甚至不是大致正确的 SQL。此外，还不清楚您*如何*执行这些语句（从控制台、程序等）。

一些评论可以帮助您顺利上路：

1.  SQL 不会“记住”从一个语句到下一个语句的先前语句的结果。因此，您`total_students`在第一条 SQL 语句中的计算与您在第三条语句中实际使用该值的尝试无关。同样，您在第二个查询中的推导尝试`total_marks`在您的第三个查询中不可用。

2.  只有当内部查询保证为 student_information 中的每一行生成一条记录时，您的第二条语句才有意义。我有理由确定您尝试做的事情最好使用 JOIN 而不是子查询来完成。

3.  第三个查询 (UPDATE) 是离 SQL 最远的查询。UPDATE 对表中的一个或多个列进行操作。每列都分配了一个新值。它操作的列必须使用正确的标识符按字面意思命名。*您可以在等号右侧*使用子查询，但不能在左侧使用（尽管您没有任何理由在这里使用）。要操作的行集的条件属于 UPDATE 语句末尾的 WHERE 子句，而不是任何类型的子查询。

4.  猜测您的意图，我认为您可能需要对 student_projects 的成绩进行 SUM 或 AVG （假设每个学生都有几个项目要考虑），并且您的任何查询都没有聚合。

# jasper-reports - scriptlet 中的共享表达式

> ID：10075850
> 
> 赞同：1
> 
> 时间：2012-04-09T15:52:05.340
> 
> 标签：jasper-reports, expression, scriptlet

我们使用 a`scriptlet`作为维护全局表达式的一种方式，可供`iReport`开发人员使用。遇到了一个问题，我们在其中创建了一个`scriptlet`基于报告中定义的其他两个变量的变量。问题是两个报告级别的变量似乎总是在系统变量之后得到解决。不确定默认情况下`iReport`是否总是在局部变量之前解析系统变量。我们尝试将`EVALUATION`系统变量的时间调整为 ( `NOW`) 以外的值，但这似乎没有任何效果......关于如何在 2 个局部变量之后计算系统变量的任何建议？

# php - getter/setter 有什么用？

> ID：10075851
> 
> 赞同：-5
> 
> 时间：2012-04-09T15:52:11.657
> 
> 标签：php, getter-setter

> **可能重复：**
> [不使用 setter 和 getter 真的有错吗？](https://stackoverflow.com/questions/808348/is-it-really-that-wrong-not-using-setters-and-getters)
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

我一直想知道为什么人们在 PHP 中使用 getter/setter 而不是使用公共属性？

从另一个问题，我复制了这段代码：

```
<?php
class MyClass {
  private $firstField;
  private $secondField;

  public function __get($property) {
    if (property_exists($this, $property)) {
      return $this->$property;
    }
  }

  public function __set($property, $value) {
    if (property_exists($this, $property)) {
      $this->$property = $value;
    }

    return $this;
  }
}
?> 
```

我认为这与使用公共领域没有区别。

好吧，我知道它可以帮助我们验证 getter 和 setter 中的数据，但是上面的示例不适合它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T15:56:50.367

使用 getter 和 setter 是为了防止类之外的代码访问实现细节。也许今天一些数据只是一个字符串，但明天它是通过将其他两个字符串连接在一起并记录检索字符串的次数来创建的（好的，人为的例子）。

关键是通过强制访问你的类通过方法，你可以自由地改变你的类如何做事情而不影响其他代码。公共财产不给你保证。

另一方面，如果您只想保存数据，那么公共属性就可以了，但我认为这是一个特例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:00:40.137

With getters and setters you get the control over the properties of a class. Look like this example:

```
<?php
class User
{
  public function $name;

  public function __construct($name)
  {
    $this->setName($name);
  }

  public function setName($name )
  {
    if (!preg_match('/^[A-Za-z0-9_\s]+$/')) {
      throw new UnexpectedValueException(sprintf('The name %s is not valid, a name should only contain letters, numbers, spaces and _', $name);
    }
    $this->name = $name;
  }
}
$foo = new User('Foo'); // valid
$foo->name = 'Foo$%^&$#'; // ahh, not valid, but because of the public property why can do this 
```

If you make the property `protected`, or `private`, this can't be done and you can have control over what is in the property.

# iphone - 如何比较 NSMutableArray 中的 NSTimeInterval(NSNumber Objects)？

> ID：10075860
> 
> 赞同：-1
> 
> 时间：2012-04-09T15:52:52.490
> 
> 标签：iphone, objective-c, ios5, nsmutablearray, nstimeinterval

我有两个 NSMutableArrays（arrayContainsGoodClicks 和 arrayContainsBadClicks）。当相关的好和坏按钮被点击时，我正在用一些 NSTimeInterval 值初始化这些数组。现在我的要求是，我从带有一些 TimeIntervals 的 web 服务调用中得到响应。现在，我想将我从 Web 服务响应中获得的 NSTimeInterval 值与我存储在两个数组中的值进行比较。请在代码下方找到。

```
question answer="t" qno="1" tin="71" title="Greet" tout="73"
question answer="t" qno="2" tin="74" title="Have Name Tag" tout="77
question answer="t" qno="3" tin="78" title="Greet" tout="83" 
```

我收到上述格式的回复。我正在解析我的文件并存储 NSTimeInterval 值的相关详细信息。现在我想比较 71 和 73 秒（分别为 74 和 77,78 和 83）之间的时间间隔。我有我的数组，其中包含用户单击“好”和“坏”按钮的所有 timeInterval 值。

```
 -(void)onClickOfGood{
//NSLog(@"The current playback time in good:%g",moviePlayerController.currentPlaybackTime);
currentPlaybackTime = moviePlayerController.currentPlaybackTime;
NSNumber *goodTimeIntervals = [NSNumber numberWithDouble:currentPlaybackTime];
[arrayContainsGoodClicks addObject:goodTimeIntervals];
NSLog(@"The total count of Array is: %i",[arrayContainsGoodClicks count]);
NSLog(@"The Array contains : %@",arrayContainsGoodClicks);}

-(void)onClickOfBad{
NSLog(@"The current playback time in bad: %g",moviePlayerController.currentPlaybackTime);
currentPlaybackTime = moviePlayerController.currentPlaybackTime;
NSNumber *goodTimeIntervals = [NSNumber numberWithDouble:currentPlaybackTime];
[arrayContainsBadClicks addObject:goodTimeIntervals];
NSLog(@"The total count of Array is: %i",[arrayContainsBadClicks count]);
NSLog(@"The Array contains Bad Clicks are: %@",arrayContainsBadClicks);} 
```

我的数组包含以下示例详细信息...

```
The Array containing Good Clicks are : (
"2.065027933",
"3.153256308",
"4.216946226",
"4.94465584",
"5.688772132",
"6.48904879",
"7.256447126",
"8.000711516000001",
"8.760312588",
"9.537493762",
"10.45637486",
"11.153212146",
"11.880587144",
"12.672884372",
"13.52852395" 
```

)

```
The Array containing Bad Clicks are: (
"2.70485684",
"3.713548251",
"4.593316639",
"5.353822771",
"6.049754725",
"6.930190204",
"7.592959653",
"8.353438538000001",
"9.074305708000001",
"9.905327347",
"10.809726701",
"11.448938757",
"12.321753456",
"14.106061449" 
```

)

有人可以帮助我如何比较我的数组中的 NSTimeIntervals 和收到的响应吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:13:04.730

如果您拥有正确格式的数据，这似乎很简单。NSTimeInterval 是一个`typedef double`，因此您可以使用基本运算符进行比较

```
for(NSNumber* click in arrayContainsGoodClicks) {
    NSTimeInterval clickTimeInterval = [click doubleValue];     
    if(clickTimeInterval > 71.0 && clickTimeInterval < 73.0 ) {
       ...
    }
} 
```

# actionscript-3 - 访问未定义的属性 CONFIG::

> ID：10075861
> 
> 赞同：1
> 
> 时间：2012-04-09T15:52:53.363
> 
> 标签：actionscript-3, apache-flex

我正在尝试使用 flash builder 4.6 构建一个 Flex 项目。该项目*应该* 是功能齐全的，因为它之前已经构建过，但是我遇到了很多涉及“CONFIG”的构建错误

错误：“访问未定义的属性 LOGGING。”

```
CONFIG::LOGGING
{
import org.osmf.logging.Logger;
} 
```

老实说，我是一个 ActionScript 菜鸟，所以我不知道如何称呼这段代码。虽然它看起来像一个命名空间或结构，但我怀疑它是一个配置选项。我如何定义这个属性 LOGGING？为什么会丢失？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T15:56:36.560

听起来您缺少一个添加条件编译的编译器参数。 [查看文档](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7abd.html)。

基本上，您需要添加如下内容：

```
-define=CONFIG::LOGGING,true 
```

到您的编译器字符串。

# openlayers - 在 jsFiddle 中获取 OpenLayers 示例（使用 jQuery）时遇到问题

> ID：10075862
> 
> 赞同：1
> 
> 时间：2012-04-09T15:52:55.230
> 
> 标签：openlayers, jsfiddle

我发现弄清楚为什么 OpenLayers 无法为我加载非常令人沮丧。最终，我想在 Drupal 的单个页面上运行它，所以它需要使用 jQuery。jsFiddle中有一些例子，但并不多。

我最接近的是[http://jsfiddle.net/3A8Zn/](http://jsfiddle.net/3A8Zn/) - 但是当我把它带到 Drupal 时，我没有以同样的方式显示导航元素。

在大多数情况下，即使我从其他我可以看到工作的示例中复制，在试图将它们带到 jsFiddle 时，它​​们在某处中断：

*   [http://jsfiddle.net/dPdhZ/](http://jsfiddle.net/dPdhZ/)
*   [http://jsfiddle.net/Bbtxz/](http://jsfiddle.net/Bbtxz/)
*   [http://jsfiddle.net/MS6Bn/](http://jsfiddle.net/MS6Bn/)
*   [http://jsfiddle.net/kPQfw/](http://jsfiddle.net/kPQfw/)
*   [http://jsfiddle.net/WfCUs/](http://jsfiddle.net/WfCUs/)
*   [http://jsfiddle.net/sVABD/](http://jsfiddle.net/sVABD/)

也许 jsFiddle 实际上并不尊重：可能我将所有内容都强制单引号会破坏某些东西。

任何关于为什么这些在 jsFiddle 中不起作用的想法都将不胜感激。似乎有很多可能的失败点。

编辑：在这里得到了很好的回应 - [https://gis.stackexchange.com/questions/23103/getting-openlayers-working-in-jsfiddle/23115#23115](https://gis.stackexchange.com/questions/23103/getting-openlayers-working-in-jsfiddle/23115#23115)

# ios - 如何从 AppDelegate 调用不同类的实例方法？

> ID：10075863
> 
> 赞同：1
> 
> 时间：2012-04-09T15:53:01.690
> 
> 标签：ios, nsurlconnection, nsuserdefaults

我设计了一个 Web 服务应用程序并通过一些 GET 请求从我的服务器获取应用程序的数据。在我的登录类中，我输入 userdefaults 并将它们保存到 NSUSerDefaults，然后在`viewDidLoad`我的登录类中我做了一个控件，如果保存了 userdefaults，我将它们分配给文本字段的文本属性。我想要的是从`applicationDidFinishLaunchingWithOptions`委托方法调用我的登录类的那个方法（登录方法）。下面是一些peoudo代码：

```
//LoginClass.m
@implementation LoginClass
....
//needed things...

-(ibaction)LoginMethod{
//the assingments&data fetchings ect

} 
```

我想在我的 appdelegate 类中调用这个方法，如下所示

```
 //....Appdelegate class
    #import "LoginClass.h"
    //.....other things....
    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
      LoginClass *myObj= [[LoginClass alloc]init];
       [myObj LoginMethod];
    } 
```

我怎样才能做到这一点？总而言之，我如何从 AppDelegate 类调用其他类的方法？ **注意：**我使用[NSURLConnections](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)及其委托方法来获取数据、处理错误等。注 2：我也用 NSUserDefaults 标记，因为我也使用它（在控制我控制它的内容时）

**编辑** **在我的 loginViewController 的 viewDidLoad 中控制默认值后，如果默认值中有一个值，我想自动调用我的登录操作，而无需用户点击。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:08:46.347

由于 AppDelegate 通常是第一个创建的类，因此您可以在其中创建要发送消息的对象。如果这个对象创建了它们，那么这个对象就知道它们并且可以向它发送消息。

不过，请注意：

*   在 AppDelegate 中加载所有内容需要时间。如果您花费的时间过长，那么 Springboard 将终止您的应用程序。
*   我也认为你的设计有点简单。如果您要在 AppDelegate 中创建所有内容，那么我怀疑控制流将反弹回 AppDelegate 以获取对其他对象的引用。这不适合模块化代码。

# vba - 将所有文本文件加载到一个工作表中？

> ID：10075867
> 
> 赞同：0
> 
> 时间：2012-04-09T15:53:17.180
> 
> 标签：vba, excel-2010

在 Excel 2010 中，我想将文件夹中的所有文本文件数据加载到一个工作表中。

每张表应该有一个文本文件的数据。

每张纸都是用第一行上的标题分隔的管道。

# 更新宏

```
Sub LoadTextFilesLoop()
    Dim objFSO As Object
    Dim objFolder As Object
    Dim objFile As Object
    Dim ws As Worksheet

    Set objFSO = CreateObject("Scripting.FileSystemObject")
     'Get the folder object associated with the directory
    Set objFolder = objFSO.GetFolder("C:\Export\")
     'Loop through the Files collection
    For Each objFile In objFolder.Files
    NewFileImport (objFile.Name)
    Next
     'Clean up!
    Set objFolder = Nothing
    Set objFile = Nothing
    Set objFSO = Nothing
End Sub

Sub NewFileImport(FileName)
    Sheets.Add After:=Sheets(Sheets.Count)
    With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;C:\Export\FileName", _
        Destination:=Range("$A$1"))
        .Name = FileName
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 65001
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = False
        .TextFileOtherDelimiter = "|"
        .TextFileColumnDataTypes = Array(1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

循环没有加载数据。

我仍然必须弄清楚如何获得每个文件中的列数。

```
.TextFileColumnDataTypes = Array(1, 1, 1) 
```

这一行告诉这个文件中的三列。这应该根据文件列而有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:38:58.920

最后我得到了这个工作，这是我的宏。

```
Sub LoadTextFilesLoop()
Dim objFSO As Object
    Dim objFolder As Object
    Dim objFile As Object
    Dim ws As Worksheet

    Set objFSO = CreateObject("Scripting.FileSystemObject")
     'Get the folder object associated with the directory
    Set objFolder = objFSO.GetFolder("C:\Export\")
     'Loop through the Files collection
    For Each objFile In objFolder.Files
    NewFileImport (objFile.Name)
    Next
     'Clean up!
    Set objFolder = Nothing
    Set objFile = Nothing
    Set objFSO = Nothing
    End Sub

Sub NewFileImport(FileName)
Dim fName As String
fName = Left(FileName, Len(FileName) - 4)
Sheets.Add After:=Sheets(Sheets.Count)
    With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;C:\Export\" + FileName, _
        Destination:=Range("$A$1"))
        .Name = fName
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 65001
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = False
        .TextFileSpaceDelimiter = False
        .TextFileOtherDelimiter = "|"
        .TextFileColumnDataTypes = Array(1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
    ActiveSheet.Select
    ActiveSheet.Name = Left(fName, 31)
End Sub 
```

# automapper - 如何映射复杂模型

> ID：10075868
> 
> 赞同：1
> 
> 时间：2012-04-09T15:53:18.473
> 
> 标签：automapper, flatten

我有一个看起来像这样的源模型：

```
public class FooBar {
    public Foo foo {get;set;}
    public Bar bar {get;set;|
}

public class Foo {
    // tons of properties
}

public class Bar {
    // tons of irrelevant properties
    public Baz baz {get;set;}
} 
```

然后我有一个将 FooBar 扁平化为 NewFooBar 的目标模型，如下所示：

```
public class NewFooBar {
    // all properties from Foo
    public Baz baz {get;set;}
} 
```

如何将 FooBar 映射到 NewFooBar 而不必单独映射 foo 的所有属性？（有很多）。

我的第一个解决方案是将 Foo 和 Bar 分别映射到 NewFooBar，这很有效。然后单独执行映射。但这似乎很笨拙。如果可能的话，我宁愿在单个映射中进行。我错过了一些简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T23:49:42.840

这行得通吗？

```
Mapper.CreateMap<Foo, NewFooBar>()
            .ForMember(dest => dest.baz, opt => opt.Ignore())
            ;

Mapper.CreateMap<FooBar, NewFooBar>()
    .ConvertUsing(src => {
        var newFooBar = AutoMapper.Mapper.Map<Foo, NewFooBar>(src.foo);

        newFooBar.baz = src.bar.baz;

        return newFooBar;
    });
    ; 
```

进而

```
var newFooBar = AutoMapper.Mapper.Map<FooBar, NewFooBar>(fooBar); 
```

# .net - .NET/Silverlight 缺少 DLL

> ID：10075873
> 
> 赞同：1
> 
> 时间：2012-04-09T15:53:52.203
> 
> 标签：.net, silverlight, dll

我从一个刚刚退出并且没有留下任何说明或文档（无论如何）的开发人员那里继承了一个 Silverlight 项目。争先恐后地收拾残局，让我的沙箱正常工作。

公司给了我一个 VS 2010 Developer 的许可证，我已经安装了它。我打开项目的 SOLUTION 文件并尝试清理 -> 构建它，但出现编译器错误。它缺少`System.Windows.Interactivity.dll`文件。我已经安装了 Silverlight SDK 和 Expression Blend，这两个地方是之前的 SO 问题（与此*类似*，但不完全相同！）推荐看。

虽然我确实在 Expression Blend 的安装中看到了它，但当我尝试将其添加为 Silverlight 项目的引用时，我收到以下错误：

> 您不能添加对 System.Windows.Interactivity.dll 的引用，因为它不是针对 Silverlight 运行时构建的。Silverlight 项目仅适用于 Silverlight 程序集。

我在这里有什么选择？！？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T15:58:58.260

添加引用时，请确认您添加的是 Silverlight 文件夹下的 dll（即“Silverlight”应位于程序集名称的路径中）。

根据 SL 4.0 或 5.0，应在以下文件夹中找到它（如果运行 32 位 Windows，则排除“(x86)”）：
**由 Expression Blend 4 安装：**
C:\Program Files (x86)\Microsoft SDKs\Expression \Blend\Silverlight\v4.0\Libraries

**由 Silverlight 5 的 Microsoft Expression Blend Preview 安装：(** http://www.microsoft.com/download/en/details.aspx?id=9503 [)](http://www.microsoft.com/download/en/details.aspx?id=9503) C
:\Program Files (x86)\Microsoft SDKs\Expression\Blend\Silverlight \v5.0\库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T01:22:55.807

快速而肮脏的解决方案是[为 Silverlight 安装 Blend SDK](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=3062)。根据您的描述，这些程序集应该已经在您的系统上，但由于某种原因它们不在（或者它们在一个奇怪的地方）。您描述的错误的原因是您试图将程序集的 WPF 版本添加到 Silverlight 项目，这显然是一个禁忌。（解决该问题的两种方法：WPF 版本应该有 4.x 版本，而 Silverlight 版本将有 SL4 的 2.x 或 SL5 的 5.x。所以你可以通过版本号来区分。或者你可以得到像 Productivity Power Tools 这样的 Visual Studio 扩展，它为您提供了添加引用的更好方法。）

请注意，如果您正在使用 Silverlight 5，获取这些程序集的唯一方法是安装[Silverlight 5 的 Blend Preview](http://www.microsoft.com/download/en/details.aspx?id=9503)。Silverlight 5 的 Blend SDK 的独立安装程序尚不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T23:02:43.327

这些文件位于 Program Files (x86) 中

```
C:\Progra~2\Microsoft SDKs\Expression\Blend\.NETFramework\v4.0\Libraries\System.Windows.Interactivity.dll
C:\Progra~2\Microsoft SDKs\Expression\Blend\Silverlight\v4.0\Libraries\System.Windows.Interactivity.dll
C:\Progra~2\Microsoft SDKs\Expression\Blend\Silverlight\v5.0\Libraries\System.Windows.Interactivity.dll 
```

# opengl - getUniform 在结构的字段上失败

> ID：10075874
> 
> 赞同：1
> 
> 时间：2012-04-09T15:53:57.227
> 
> 标签：opengl

在顶点着色器中，我定义了一个结构：

```
#version 110                                                                 
struct LightSourceParameters {                                               
    vec4 ambient;                                                            
    vec4 diffuse;                                                            
    vec4 specular;                                                           
    vec4 position;                                                           
}; 
```

并为单个灯光声明一个实例

```
uniform LightSourceParameters light; 
```

但是当我尝试获取灯光的参数时，它失败了（ i < 0 ）

```
name = "light.ambient"                                                       
GLint i = glGetUniformLocation(program, name );                              
// i == -1 
```

我知道我*不能*引用结构，但在这里我引用了一个确切的字段。有什么问题？~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:21:32.943

您是否在着色器中使用该结构？如果不是，那么编译器完全有权优化统一输出。

# facebook-like - 尽管有单独的锚名称，博客页面上的多个类似按钮充当一个按钮

> ID：10075877
> 
> 赞同：1
> 
> 时间：2012-04-09T15:53:58.637
> 
> 标签：facebook-like, facebook-iframe

我已经在我的博客上的每个条目中添加了类似 facebook 的按钮 - 尽管我通过包含锚名称为每个条目提供了它自己的 URL，但单击一个上的“喜欢”会增加所有条目的点赞数。关于如何排序的任何建议？

代码示例如下：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:30:03.050

好吧，我最初的猜测是 Facebook 忽略了主播。您可以尝试传递一个参数，例如 www.example.com/myblog.html?entry=1#entry1 www.example.com/myblog.html?entry=2#entry2

祝你好运

# php - 在观察者中将产品添加到购物车

> ID：10075878
> 
> 赞同：1
> 
> 时间：2012-04-09T15:54:04.757
> 
> 标签：php, magento, magento-1.4

我需要为客户创造一种可能性，让他们在 Magento 商店免费提供一种产品（例如）。[我从这篇](https://stackoverflow.com/questions/5104482/programmatically-add-product-to-cart-with-price-change)文章中弄清楚了大部分事情，但现在我遇到了一个问题。我创建了一个在`checkout_cart_product_add_after`. 我有一些代码（它只是整个事情的一部分）：

```
 $productId = $observer->getProduct()->getId();
    $cartHelper = Mage::helper('checkout/cart');
    $items = $cartHelper->getCart()->getItems();
    Mage::getModel('core/session')->addNotice('Product id: '.$productId);
    foreach ($items as $item) {
         if ($item->getProduct()->getId() == $productId) {
              $itemId = $item->getItemId();
              $cart = $cartHelper->getCart()->removeItem($itemId)->save() ;//It WORKS!!!!!!!!!!!!
              $product = Mage::getModel('catalog/product')->load($productId);
              $cart->addProduct($product, $this->_getRequest()->getParams());                    
                    $cart->save();
                    Mage::getSingleton('checkout/session')->setCartWasUpdated(true);
                    break;
                }
            } 
```

因此，首先我的代码根据一些请求参数以 0.00 的价格（以产品为例）将产品添加到购物车。那部分工作正常，所以这里没有发布。第二部分（我在上面发布的）必须删除现有产品并将其替换为正常价格的产品。除了一件事之外，几乎所有东西都正常工作 - 线路`$cart->addProduct($product, $this->_getRequest()->getParams());`不工作，我不明白为什么（没有错误，没有异常，没有日志）。 `_getRequest`方法如下所示：

```
 protected function _getRequest()
    {
        return Mage::app()->getRequest();
    } 
```

如果我登录，`$this->_getRequest()->getParams()`就会出现这样的情况：

```
 2012-04-09T14:46:56+00:00 DEBUG (7): Array(
    [uenc] => aHR0cDovL2xvY2FsaG9zdC93b3AvZmVhdHVyZWQvY2xhc3NpYy1saW5lLXBvbHkuaHRtbA,,
    [product] => 50
    [related_product] => 
    [bundle_option] => Array(
            [20] => 75
            [21] => 84
            [22] => 94
        )
    [qty] => 1
    [send-request] => 0
) 
```

那么为什么这`$cart->addProduct($product, $this->_getRequest()->getParams());`行不通呢？怎么做才对？也许使用`addAction()`（`Mage_Checkout_CartController`覆盖它）更好？对不起我的语言。感谢您的回答。希望有人可以帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:44:41.403

我会回答我的问题，为任何遇到同样问题的人澄清事情。编码：

```
$cart->addProduct($product, $this->_getRequest()->getParams()); 
```

将不起作用，因为我`$cart->save()`在它之前打电话而不是在它之后尝试做同样的事情，这就是问题所在。当我第一次删除时`$cart->save()`，它工作得很好。

# javascript - ASP.NET 中的选项卡式网站，想要打印所有这些，建议？

> ID：10075889
> 
> 赞同：0
> 
> 时间：2012-04-09T15:55:18.290
> 
> 标签：javascript, asp.net, html, printing

我有一个 ASP.NET 网站，分为这样的标签

```
|TITLE1| - |TITLE2| - |TITLE3| - ETC. 
```

如果用户点击`Title 2`，则只有title 2 对应的div 显示在下方，以此类推。我制作了一个打印图像按钮，但我想让它打印出来，就好像所有标签都被打开并堆叠在一起一样。现在，它只打印被点击的那个标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:08:11.833

您需要将所有选项卡的内容呈现到一个 div 中，该 div 具有与之关联的 css[媒体打印规则。](http://www.w3.org/TR/CSS2/media.html)您的实际选项卡还需要另一个 css 规则来隐藏它们以进行打印。

所以例如你有

```
<div id="tabs" class="print_hidden">
Your actual tabs go here
</div>
<div id="printTabs" class="screen_hidden">
Your printer friendly text goes here when the link below is clicked.
</div>
<asp:LinkButton runat="server" id="lnkPrinterFriendly">Printer-friendly view</asp:LinkButton> 
```

然后在css文件中你有以下内容：

```
@media print {
.screen_hidden { display: none; }
}

@media screen {
.print_hidden { display: none; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T16:08:12.643

使用将所有选项卡（我假设它们在`div`元素中）设置为的打印样式表`display: block`。

# mysql - 限制行数之间的sql查询性能差异

> ID：10075893
> 
> 赞同：3
> 
> 时间：2012-04-09T15:55:29.783
> 
> 标签：mysql, sql, database, performance

我有一个包含 170,000 条记录的拥抱表。

这个查询有什么区别

```
Showing rows 0 - 299 (1,422 total, Query took 1.9008 sec)
    SELECT 1 FROM `p_apartmentbuy` p 
    where 
    p.price between 500000000 and 900000000
    and p.yard = 1
    and p.dateadd between 1290000000 and 1320000000
    ORDER BY `p`.`id` desc
    limit 1669 
```

解释 ![在此处输入图像描述](../Images/108fa236763e8bbd36c5543ff3dd7577.png)

和这个：

```
Showing rows 0 - 299 (1,422 total, Query took 0.2625 sec)
    SELECT 1 FROM `p_apartmentbuy` p 
    where 
    p.price between 500000000 and 900000000
    and p.yard = 1
    and p.dateadd between 1290000000 and 1320000000
    ORDER BY `p`.`id` desc
    limit 1670 
```

解释： ![在此处输入图像描述](../Images/1beb194fd2e84ef2fca3b948b0678e49.png)

这两个查询都使用 1 个具有相同数据的表并且具有相同的 where clasue，但只有限制行数不同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:00:17.557

MySQL 有一个用于排序的缓冲区。当要排序的东西太大时，它会对块进行排序，然后对它们进行归并排序。这称为“文件排序”。您的第 1670 行显然只是溢出了排序缓冲区。

[在此处](http://s.petrunia.net/blog/?p=24)阅读更多详细信息。

现在为什么它为内存排序选择另一个键......我不太确定；但显然它的策略不是很好，因为它最终变慢了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T04:17:10.880

回顾：奇怪的是返回更多行的查询运行得更快

这与缓冲区与文件排序无关，对 1400 条记录进行排序只需不到 1 秒

第一个解释显示查询优化器进行线性扫描，第二个解释显示它使用索引。即使是部分有用的索引通常也比没有索引要好得多。

在内部，mysql 维护有关索引大小的统计信息，并尝试猜测哪个索引，或者线性扫描是否会更快。这个估计是特定于数据的，我已经看到 mysql 在 100 次中使用正确的索引 99 次，但时不时地选择一个不同的索引并且运行查询慢 50 倍。

您可以使用 SELECT ... FROM ... FORCE INDEX (...) 覆盖内置查询优化器并手动指定要使用的索引

# jquery - 选择器中的 jQuery 变量

> ID：10075896
> 
> 赞同：3
> 
> 时间：2012-04-09T15:55:45.937
> 
> 标签：jquery, html

我需要`$('.mk[value=x]')`工作，但不是`$('.mk[value=1]')`。请有人帮助

```
<body>
<span class="mk" value="1">1</span>
<span class="mk" value="1">1</span>
<span class="mk" value="3">3</span>
<input id="update" type="button" value="1" />
</body>

<script type="text/javascript">
$('#update').click(function(){
    var x = this.value //--> x =1 
       $('.mk[value=x]').each(function(key, value) { //--> NOT WORKING !
       $('.mk[value=1]').each(function(key, value) { //--> WORKING !
       $(this).replaceWith('<span class="mk" value="2">2</span>')
       });
    })
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T15:57:20.557

您需要将`x`变量附加到字符串：

```
$(".mk[value='" + x + "']").each(function(key, value) 
```

另外，您应该注意这`value`不是 的有效属性`span`，因此此代码将导致验证问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:57:55.827

试试这样：

```
$('.mk[value='+x+']').each( 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T15:59:19.943

您需要将其连接到字符串

```
$('.mk[value='+ x +']').each(function(key, value) 
```

或使用[`.filter()`](http://api.jquery.com/filter)

```
$('.mk').filter(function(){return this.value === x;}).each(function(key, value) 
```

* * *

或者由于您已经`each`在它们上使用过，您可以在那里进行过滤

```
$('.mk').each(function(key, value) {
      if (this.value === x) {
          this.replaceWith('<span class="mk" value="2">2</span>');
      }
   });
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T16:00:45.750

它不起作用的原因是它`'.mk[value=x]'`是一个标准字符串并且它没有被解析。

尝试将选择器更改为`'.mk[value=' + x + ']'`，x 将替换为变量的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T15:57:59.280

改变这个

```
$('.mk[value=x]') 
```

到

```
$('.mk[value='+x+']') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T15:58:05.913

您需要将值放入选择字符串中，如下所示：

```
$('#update').click(function(){
var x = this.value 
 $(".mk[value='" + x + "']").each(function(key, value) {
  this.replaceWith('<span class="mk" value="2">2</span>')
 });
}) 
```

# c - C中的冷启动代码

> ID：10075897
> 
> 赞同：0
> 
> 时间：2012-04-09T15:55:50.517
> 
> 标签：c, memory, boot

有没有人可以向我解释这段代码？这是一个古老的考试问题，我在网上找不到答案。

> ```
>  void (*x)();
>  x=0xFFFF0000;
>  printf("1"); x();
>  printf("2"); x();
>  printf("3"); x(); 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:00:17.073

在经典的实模式 x86 架构上，您可以通过执行无条件 JMP 以地址 0xFFFF0000 来触发系统引导。

该代码基本上是定义`x()`为一个函数，并将函数的内存地址设置为0xFFFF0000。当您调用该函数时，系统会`CALL 0xFFFF000`在汇编程序级别执行或类似操作，并直接跳转到 BIOS 引导代码，从而触发系统重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:02:22.350

你有

```
void (*x)(); 
```

这是一个指向返回 void 并接受 void 作为输入的函数的指针。您将其指向内存位置 0xFFFF0000，根据您的考试，这是冷启动功能所在的位置。

然后您执行 3 次 printfs()，然后执行 3 次调用位于那里的函数。但我真的不明白这一点。有什么问题吗？这就是考试问题中的全部内容吗？

# ios - iOS - 友好的 NSDate 格式

> ID：10075898
> 
> 赞同：9
> 
> 时间：2012-04-09T15:55:56.950
> 
> 标签：ios, date, nsdate, nsdateformatter, date-format

我需要在我的应用程序中向用户显示帖子的日期，现在我以这种格式执行：“Fri, 25 May”。我将如何格式化 NSDate 以读取“2 小时前”之类的内容？使其更加用户友好。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-09T16:01:15.770

Take a look at FormaterKit [https://github.com/mattt/FormatterKit](https://github.com/mattt/FormatterKit)

Created by mattt who also created AFNetworking.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T16:03:54.567

`NSDateFormatter`不能做那样的事情；你需要建立自己的规则。我猜是这样的：

```
- (NSString *)formattedDate:(NSDate *)date
{
     NSTimeInterval timeSinceDate = [[NSDate date] timeIntervalSinceDate:date];

     // print up to 24 hours as a relative offset
     if(timeSinceDate < 24.0 * 60.0 * 60.0)
     {
         NSUInteger hoursSinceDate = (NSUInteger)(timeSinceDate / (60.0 * 60.0));

         switch(hoursSinceDate)
         {
              default: return [NSString stringWithFormat:@"%d hours ago", hoursSinceDate];
              case 1: return @"1 hour ago";
              case 0:
                  NSUInteger minutesSinceDate = (NSUInteger)(timeSinceDate / 60.0);
                  /* etc, etc */
              break;
         }
     }
     else
     {
          /* normal NSDateFormatter stuff here */
     }
} 
```

所以这是从日期开始最多 24 小时打印“x 分钟前”或“x 小时前”，通常是一天。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-19T00:11:13.497

我想要 Facebook 为他们的移动应用程序提供的日期格式，所以我创建了这个 NSDate 类别 - 希望它对某人有用（这种东西真的应该在标准库中！）:)

[https://github.com/nikilster/NSDate-Time-Ago](https://github.com/nikilster/NSDate-Time-Ago)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-09T16:36:01.007

如果这对您来说是个问题，还有 SEHumanizedTimeDiff 支持/即将支持多种语言：

[https://github.com/sarperdag/SEHumanizedTimeDiff](https://github.com/sarperdag/SEHumanizedTimeDiff)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-09T16:03:12.833

There are about a million ways you could do this, but here's a quick one:

```
NSString* hoursAgo = [NSString stringWithFormat:@"%.0lf hours ago", fabs([date timeIntervalSinceNow] / 3600.0)] 
```

Of course, this doesn't check that `date` is actually from the past, doesn't do anything but hours, etc. But, you probably get the idea.

`timeIntervalSinceNow` returns how many seconds have passed since a given date, with positive numbers being a date in the future and negative numbers being a date in the past. So, we get how many seconds have passed, divide it by 3600 seconds in an hour to compute the hours that have passed, and then put its absolute value into the string "n hours ago".

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-08T12:02:50.477

自从提出此问题以来，在较新版本的 iOS 中，`NSDateFormatter`已添加此功能。它现在可以使用该`doesRelativeDateFormatting`属性来完成。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-10-23T18:11:04.190

这是一个很好的答案，从纪元（1970 年 1 月 1 日）开始，这将在几秒钟内完成，并返回一个格式良好的字符串，例如“3 分钟前”。只需使用您的日期对象调用它，如下所示：

```
[timeAgoFromUnixTime:[myDateObject timeIntervalSince1970]];

+ (NSString *)timeAgoFromUnixTime:(double)seconds
{
    double difference = [[NSDate date] timeIntervalSince1970] - seconds;
    NSMutableArray *periods = [NSMutableArray arrayWithObjects:@"second", @"minute", @"hour", @"day", @"week", @"month", @"year", @"decade", nil];
    NSArray *lengths = [NSArray arrayWithObjects:@60, @60, @24, @7, @4.35, @12, @10, nil];
    int j = 0;
    for(j=0; difference >= [[lengths objectAtIndex:j] doubleValue]; j++)
    {
        difference /= [[lengths objectAtIndex:j] doubleValue];
    }
    difference = roundl(difference);
    if(difference != 1)
    {
        [periods insertObject:[[periods objectAtIndex:j] stringByAppendingString:@"s"] atIndex:j];
    }
    return [NSString stringWithFormat:@"%li %@%@", (long)difference, [periods objectAtIndex:j], @" ago"];
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-11-25T10:14:24.847

```
+(NSString*)HourCalculation:(NSString*)PostDate

{
    NSLog(@"postdate=%@",PostDate);
    // PostDate=@"2014-04-02 01:31:04";
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    [dateFormat setTimeZone:gmt];
    NSDate *ExpDate = [dateFormat dateFromString:PostDate];
    NSLog(@"expdate=%@",ExpDate);
    NSLog(@"expdate=%@",[NSDate date ]);
    NSCalendar *calendar = [NSCalendar currentCalendar];

    NSDateComponents *components = [calendar components:(NSDayCalendarUnit|NSWeekCalendarUnit|NSMonthCalendarUnit|NSYearCalendarUnit|NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:ExpDate toDate:[NSDate date] options:0];

//    NSLog(@"year=%d",components.year);
//    
//    NSLog(@"month=%d",components.month);
//    
//    NSLog(@"week=%d",components.week);
//    
//    NSLog(@"day=%d",components.day);
//    
//    NSLog(@"hour=%d",components.hour);
//    
//    NSLog(@"min=%d",components.minute);
//    
//    NSLog(@"sce=%d",components.second);
//    

    NSString *time;

    if(components.year!=0)   
    {
        if(components.year==1) 
        {
            time=[NSString stringWithFormat:@"%ld year",(long)components.year];  
        }
        else{
            time=[NSString stringWithFormat:@"%ld years",(long)components.year]; 
        }    
    }
    else if(components.month!=0) 
    {
        if(components.month==1)   
        {
            time=[NSString stringWithFormat:@"%ld month",(long)components.month]; 
        }
        else{
            time=[NSString stringWithFormat:@"%ld months",(long)components.month]; 
        }
      //  NSLog(@"%@",time);
    }
    else if(components.week!=0)
    {
        if(components.week==1)
        {
            time=[NSString stringWithFormat:@"%ld week",(long)components.week];
        }
        else{
            time=[NSString stringWithFormat:@"%ld weeks",(long)components.week];
        }
       // NSLog(@"%@",time);
    }
    else if(components.day!=0)
    {
        if(components.day==1)   
        {
            time=[NSString stringWithFormat:@"%ld day",(long)components.day];
        }
        else{
            time=[NSString stringWithFormat:@"%ld days",(long)components.day]; 
        } 
    }
    else if(components.hour!=0) 
    {
        if(components.hour==1)  
        {
            time=[NSString stringWithFormat:@"%ld hour",(long)components.hour];  
        }
        else{
            time=[NSString stringWithFormat:@"%ld hours",(long)components.hour];
        }
    }
    else if(components.minute!=0)  
    {
        if(components.minute==1)  
        {
            time=[NSString stringWithFormat:@"%ld min",(long)components.minute];
        }

        else{
            time=[NSString stringWithFormat:@"%ld mins",(long)components.minute]; 
        }
      //  NSLog(@"time=%@",time);
    }
    else if(components.second>=0){

       // NSLog(@"postdate=%@",PostDate);

       // NSLog(@"expdate=%@",[NSDate date ]);

        if(components.second==0)   
        {
            time=[NSString stringWithFormat:@"1 sec"];
        }
        else{
            time=[NSString stringWithFormat:@"%ld secs",(long)components.second];
        }
    }
    return [NSString stringWithFormat:@"%@ ago",time];

} 
```

此代码将显示您的时间 ------------sec like 2 sec ag​​o ------------min like 2 mins ago --------- ---像 2 小时前的小时 ------------像 2 天前的天 ------------像 2 周前的周 -------- ----像 2 个月前一样的月 最后.... 像 2 年前一样的年 :) 试试这个

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-24T11:35:44.377

添加到解决方案尝试这种更简化的方法

```
 NSDateComponents *today = [[NSCalendar currentCalendar] components:NSCalendarUnitDay|NSCalendarUnitHour|NSCalendarUnitMinute|NSCalendarUnitSecond fromDate:passed toDate:[NSDate date] options:0];
    NSTimeInterval interval = [[NSDate date] timeIntervalSinceDate:date];

    if (interval < 60) timestampString = [NSString stringWithFormat:@"%d seconds ago" ,today.second];
    else if (interval < 60 * 60) timestampString = [NSString stringWithFormat:@"%d minutes ago" ,today.minute];
    else if (interval < 60 * 60 * 24) timestampString = [NSString stringWithFormat:@"%d hours ago" ,today.hour];
    else timestampString = [NSString stringWithFormat:@"%d days ago" ,today.day]; 
```

# javascript - 如何设置 HTML5 音频的响度？

> ID：10075909
> 
> 赞同：10
> 
> 时间：2012-04-09T15:57:03.243
> 
> 标签：javascript, html, html5-audio, audio

在我正在制作的 HTML5 游戏中，当事情发生碰撞时，我会发出“砰”的一声。不过，这有点不切实际。无论物体的速度如何，它们总是会发出相同的、相对响亮的“砰砰”声。我想做的是让声音的响度取决于速度，但我该怎么做呢？我只知道如何播放声音。

```
playSound = function(id)
{
    sounds[id].play();
} 
```

`sounds`是一个充满`new Audio("url")`'s 的数组。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T16:03:43.940

使用音频元素的音量属性。从[W3](http://w3c.github.io/html/single-page.html#user-interface)开始：

> 元素的有效媒体音量是音量，相对于 0.0 到 1.0 的范围进行解释，其中 0.0 是静音，1.0 是最响亮的设置，介于两者之间的值会增加响度。该范围不必是线性的。最响亮的设置可能低于系统可能的最响亮设置；例如，用户可以设置最大音量。

前任：`sounds[id].volume=.5;`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-18T14:17:57.280

您甚至可以玩弄增益并使音量播放大于 100%。您可以使用此功能来放大声音：

```
function amplifyMedia(mediaElem, multiplier) {
  var context = new (window.AudioContext || window.webkitAudioContext),
      result = {
        context: context,
        source: context.createMediaElementSource(mediaElem),
        gain: context.createGain(),
        media: mediaElem,
        amplify: function(multiplier) { result.gain.gain.value = multiplier; },
        getAmpLevel: function() { return result.gain.gain.value; }
      };
  result.source.connect(result.gain);
  result.gain.connect(context.destination);
  result.amplify(multiplier);
  return result;
} 
```

您可以执行以下操作将初始放大设置为 100%：

```
var amp = amplifyMedia(sounds[id], 1); 
```

然后，如果您需要声音两倍大，您可以执行以下操作：

```
amp.amplify(2); 
```

如果你想减半，你可以这样做：

```
amp.amplify(0.5); 
```

可在此处找到该函数的完整说明：http: [//cwestblog.com/2017/08/17/html5-getting-more-volume-from-the-web-audio-api/](http://cwestblog.com/2017/08/17/html5-getting-more-volume-from-the-web-audio-api/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T16:10:16.287

您可以通过设置来调节音量：

```
setVolume = function(id,vol) {
    sounds[id].volume = vol; // vol between 0 and 1
} 
```

但是，请记住，在设置音量和它生效之间有一个小的延迟。您可能会听到声音以前一音量开始播放，然后跳到新音量。

# asp.net-mvc - 将数据从控制器发送到视图 - 仍未设置 Viewdata

> ID：10075910
> 
> 赞同：0
> 
> 时间：2012-04-09T15:57:10.193
> 
> 标签：asp.net-mvc

我的视图中有一个事件处理程序，它会在单击 id 时做出反应。单击 id 时，我在控制器中调用了一个方法 1。

在同一个视图中，我有一个下拉列表，我用我的方法 1 中设置的 ViewData 填充它。

但是，因为一开始，索引被调用，而 ViewData 仍然是空的，我得到错误，没有这样的 ViewData 来填充我的下拉列表。

仅当 Viewdata 不是 eppty 时如何设置下拉列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T06:01:25.377

您可以在输出下拉列表之前测试 ViewData 中是否有值：

```
<% if (ViewData["values"] != null) { %>
    <%= Html.DropDownList("selectedValue", (IEnumerable<SelectListItem>)ViewData["values"]) %>
<% } %> 
```

如果您使用视图模型，甚至更好：

```
<% if (Model.Values != null) { %>
    <%= Html.DropDownListFor(x => x.SelectedValue, Model.Values) %>
<% } %> 
```

# asp.net - 最后一个字符“>”被添加到最后一个

> ID：10075915
> 
> 赞同：0
> 
> 时间：2012-04-09T15:57:25.503
> 
> 标签：asp.net, gridview

我有一个 asp.net 网络表单。我使用 Gridview 显示数据库中的表。有一个字段可能有很长的无空格字符串。因此我使用了换行词。标记代码：

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True" AllowSorting="True" BorderColor="YellowGreen"
                DataSourceID="SqlDataSource1" AutoGenerateColumns="False" DataKeyNames="ProbId"
                PageSize="30" AutoGenerateEditButton="True" AutoGenerateDeleteButton="True" Visible="true">
                <Columns>
                    <asp:BoundField DataField="ProbId" HeaderText="ProbId" InsertVisible="False" ReadOnly="True"
                        SortExpression="ProbId" />
                    <asp:BoundField DataField="ProbDesc" HeaderText="ProbDesc" SortExpression="ProbDesc" />
                    <asp:TemplateField HeaderText="ABCD" ItemStyle-Width="75px" SortExpression="ABCD">
                        <ItemTemplate>
                            <div style="width: 75px; overflow: hidden; white-space: nowrap; word-wrap: break-word;">
                                <%# Eval("ABCD")%>
                                ></div>
                        </ItemTemplate>
                    </asp:TemplateField> 
```

现在换行词确实有效，但是显示的上下文是错误的。每个字符串最后都添加了一个“>”。请看图片： ![图片](../Images/fd1be96cc98c926ef6094cac703cc221.png)

你看到 '648.04' 变成了 '648.04' >

“无”变为“无 >”。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T15:59:29.687

Look at your `ItemTemplate`:

```
<ItemTemplate>
    <div style="width: 75px; overflow: hidden; white-space: nowrap; word-wrap: break-word;">
        <%# Eval("ABCD")%>
    ></div>
</ItemTemplate> 
```

There's an extra `>` just before the `div` closing tag.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:59:31.707

Change this:

```
 <ItemTemplate>
 <div style="width: 75px; overflow: hidden; white-space: nowrap; word-wrap: break-word;">
 <%# Eval("ABCD")%>
 ></div>
 </ItemTemplate> 
```

To this

```
 <ItemTemplate>
 <div style="width: 75px; overflow: hidden; white-space: nowrap; word-wrap: break-word;">
 <%# Eval("ABCD")%>
 ></div>
 </ItemTemplate> 
```

You have extra '>' before closing div

# ms-access - 如何摆脱在子表单末尾添加新记录？

> ID：10075917
> 
> 赞同：10
> 
> 时间：2012-04-09T15:57:29.433
> 
> 标签：ms-access, subform

我使用子表单来显示查询的结果，但在记录的末尾有一个`*(New)`用于添加新记录的。我不希望用户能够通过这个子表单添加新记录。我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T16:28:47.953

使用设计视图中的窗体，打开其属性表。然后选择属性表上的数据选项卡，找到名为“允许添加”的属性并将其设置为否。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-18T22:32:25.993

在数据表单属性 > 数据选项卡中将记录集类型更改为屏幕截图。请注意，一旦您更改此信息，用户将无法更改您的任何数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-29T23:16:45.477

有完全相同的问题。

我的数据库是跟踪篮球盒得分。每个新的主窗体都创建了一个新的空白子窗体来输入季度分数。问题是，当我在最后一个季度得分值上按 Enter 键后，我通过字段输入时，为季度得分所基于的表创建了一条新记录。我无法使用 Allow Additions = no。如果我不允许添加，则在创建新主表单（用于新游戏）时不会创建四分之一分输入。在创建新的季度得分记录之前，我将下面的代码用于 Enter 键的按键事件以将焦点设置在另一个子表单上。注释的行有助于在创建代码时排除故障。密钥代码 13 是 Enter 键。希望这对某人有所帮助，需要一段时间才能做到这一点。窝

Private Sub HOT2_KeyDown(KeyCode As Integer, Shift As Integer)

```
If KeyCode <> 13 Then Exit Sub
    'MsgBox "Enter Pressed"
    KeyCode = 0
    'MsgBox "KeyCode=0"
    Forms!FRM_BoxScores.Scrimmage.SetFocus
    Forms!FRM_BoxScores!subform_qryReturnVisitingPlayers_BosScores.Form!subform_tblPlayerPoints_BoxScores.Form!PlayerPoints.SetFocus 
```

结束子

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-18T10:34:44.160

在您的子表单设计网格中，打开属性。

在哪里说记录集类型，将其设置为快照。这将删除该行。届时记录集将不可更新。所以如果你想编辑记录，你必须把它改回来

# c# - Getting Media file attributes in Windows 8 c#

> ID：10075930
> 
> 赞同：1
> 
> 时间：2012-04-09T15:58:32.770
> 
> 标签：c#, windows-8, windows-runtime, mp3, wma

Is there a generic way to get the media attributes like artist information etc in Windows 8? Or at least in classic .net C# open source code? I am looking right now for Audio file attributes.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:08:14.603

Yes, it seems to expose the [Windows Property System](http://msdn.microsoft.com/en-us/library/windows/desktop/ff728898%28v=vs.85%29.aspx). You can check these on MSDN:

*   [StorageFile.Properties property](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.properties.aspx)
*   [StorageItemContentProperties.GetMusicPropertiesAsync() method](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileproperties.storageitemcontentproperties.getmusicpropertiesasync.aspx)
*   [MusicProperties class](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.fileproperties.musicproperties.aspx)

# c# - MVC 3：选择下拉列表项时如何更新复选框列表？

> ID：10075934
> 
> 赞同：2
> 
> 时间：2012-04-09T15:59:10.447
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3

在过去的两天里，我试图弄清楚如何在 javascript 的帮助下选择下拉列表中的新项目时动态更新复选框列表。

一周前我做了同样的事情，我应该从下拉列表更新到下拉列表。

到目前为止我得到了什么：

**看法**

```
@using (Html.BeginForm())
{
    @Html.DropDownListFor(x => x.User, (IEnumerable<SelectListItem>)Model.UserList, "-- vælg bruger --")
    if (Model.checkboxlist != null)
    {
       for (var i = 0; i < Model.checkboxlist.Count; i++)
       {
        <div class="editor-label">
           @Html.CheckBoxFor(c => Model.checkboxlist[i].check)
            @Html.LabelFor(c => Model.checkboxlist[i].Id, Model.checkboxlist[i].Id)
            @Html.HiddenFor(c => Model.checkboxlist[i].Id)

        </div>
       }
    }
}
<script type="text/javascript">
    $('#User').change(function () {
    alert('HEJ!');
        var selectedUser = $(this).val();
        alert(selectedUser);
        if (selectedUser != null && selectedUser != '-- vælg bruger --' && selectedUser != '') {
            $.getJSON('@Url.Action("getPdfCheckBoxList","Admin")', { username: selectedUser },
            function (employee) {

                var checkboxlist = $('#checkboxlist');
                checkboxlist.empty();

                $.each(employee, function (index, employee) {
                    checkboxlist.append($('<checkbox/>', {
                        checked = 'false'
                    }));
                });
            });

        }
    });
</script> 
```

当我加载视图 Model.checkboxlist 为 null 时，我没有返回任何东西来建模下拉列表项。

控制器动作：

```
public ActionResult getPdfCheckBoxList(String username)
{
    MethodService service = new MethodService();
    var list = new List<PDFCheckBoxList>();

    foreach (var pdfCheckBoxList in getPDFFileNames(username))
    {
        list.Add(new PDFCheckBoxList { check = false, Id = pdfCheckBoxList });
    }
    return Json(list, JsonRequestBehavior.AllowGet);
} 
```

现在，甚至 Alert("HEJ") 都没有被解雇，我根本不知道为什么......请帮忙？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T06:30:31.073

您可以使用部分视图并让您的控制器操作返回一个部分并在服务器上构建标记，而不是在客户端上执行它：

```
@using (Html.BeginForm())
{
    @Html.DropDownListFor(
        x => x.User, 
        Model.UserList, 
        "-- vælg bruger --",
        data_url = Url.Action("getPdfCheckBoxList", "Admin")
    )
    <div id="checkboxlist">
        @if (Model.checkboxlist != null)
        {
            @Html.Partial("_checkboxlist", Model.checkboxlist)
        }
    </div>
} 
```

然后定义`_checkboxlist.cshtml`：

```
@model IEnumerable<PDFCheckBoxList>
@{
    ViewData.TemplateInfo.HtmlFieldPrefix = "checkboxlist";
}
@Html.EditorForModel() 
```

最后是`~/Views/Shared/EditorTemplates/PDFCheckBoxList.cshtml`将为每个元素呈现的编辑器模板：

```
@model PDFCheckBoxList
<div class="editor-label">
    @Html.CheckBoxFor(c => c.check)
    @Html.LabelFor(c => c.Id, Model.Id)
    @Html.HiddenFor(c => c.Id)
</div> 
```

现在你可以像这样修改你的javascript：

```
<script type="text/javascript">
    // Now that we no longer have any server side 
    // code here we could externalize this script
    // into a separate javascript file

    $('#User').change(function () {
        if (selectedUser != null && selectedUser != '') {
            var selectedUser = $(this).val();
            var url = $(this).data('url');
            var data = { username: selectedUser };
            $('#checkboxlist').load(url, data);
        }
    });
</script> 
```

最后是你的`getPdfCheckBoxList`行动：

```
public ActionResult getPdfCheckBoxList(String username)
{
    var service = new MethodService();
    var list = getPDFFileNames(username)
        .Select(x => new PDFCheckBoxList 
        { 
            check = false, 
            Id = x 
        })
        .ToList();
    return PartialView("_checkboxlist", list);
} 
```

如果您想在客户端上构建标记并让控制器操作返回 JSON，我建议您使用一些 javascript 模板框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:06:13.753

您要么选择器错误`"#User"`，要么在同一页面上多次使用该 id

从浏览器查看生成的页面源并查找`<select>`元素是否有`id="User"`或有多个 id 等于`"User"`

# c - 缓存未命中和缓存命中

> ID：10075937
> 
> 赞同：1
> 
> 时间：2012-04-09T15:59:26.830
> 
> 标签：c, memory, cpu-architecture, cpu-cache

给定以下代码：

```
typedef  int  array[4][4];

void transpose2(array dst, array src)
{
   int i, j;
   for ( i=0; i<4; i++) {
     for ( j=0; j<4; j++) {
         dst[i][j] = src[j][i];
     }
   }
} 
```

假设：

*   int 是 4 个字节

*   `src`数组从地址开始`0`，`dst`从地址开始`64`

*   缓存的大小是`32`字节，一开始缓存是空的

*   有一个 L1 缓存在使用 write-through、write-allocate 的直接映射下工作

*   块的大小为 16 字节

我正在尝试找出 and 的缓存未命中和缓存`dst`命中`src`。

**问题 - 填写src**和**dst**数组的表格，它们在开始时是空的：[在运行之前](http://s19.postimage.org/7f2vo9myb/blank.gif)

首先，我将介绍我的教授的解决方案：[运行后](http://s19.postimage.org/h111ib3hv/filled.gif)

这是我的解决方案，但在某个地方，我犯了一个错误：

假设我从而不是`i`从`1 to 4``0 to 3`

第一次迭代：

```
src  dst

1,1-> 1,1

2,1-> 1,2

3,1-> 1,3

4,1-> 1,4 
```

第二次迭代：

```
src    dst 
1,2 ->2,1

2,2 ->2,2

3,2 ->2,3

4,2 ->2,4 
```

第三次迭代：

```
src    dst 
1,3 -> 3,1

2,3 -> 3,2

3,3 -> 3,3

4,3 -> 3,4 
```

第四次迭代：

```
src    dst 
1,4 -> 4,1

2,4 -> 4,2

3,4 -> 4,3

4,4 -> 4,4 
```

我不明白为什么在 的表格中根本有 HITS `dst`，我知道我错了，有人可以解释一下为什么上面的解决方案中确实有 HITS 吗？

问候罗恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T16:01:53.910

因为缓存通常被组织成行，每行大小为*n*字节。当您访问特定的内存地址时，该地址连同周围的*n-1*个字节被读入缓存。

# analysis - Saiku displays no result and does not display right numbers

> ID：10075942
> 
> 赞同：1
> 
> 时间：2012-04-09T15:59:37.187
> 
> 标签：analysis, pentaho

I am trying to produce a set of reports and dashboards using Pentaho BI Server. I installed the latest release of Saiku plugin (2.3) and it seemed to be working fine. However, I have a measure type `int` that used to give me an SQL query error, but I fixed it by setting the type to `BIGINT`. However, now the results that are displayed have nothing to do with the one in the database. Also, I have a measure (type `int` too) named quantity that worked just fine when I created the report, but now once I click on it I get "no result". I could not find a solution to both problems, could you please provide me with a solution?

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:48:04.713

你检查过你的`*.mondrian.xml`吗？我相信您必须在元数据层中定义报告的其他元素。尝试创建一个蒙德里安模式。

# variables - Powershell将变量传递给start-job

> ID：10075943
> 
> 赞同：31
> 
> 时间：2012-04-09T15:59:43.957
> 
> 标签：variables, powershell, start-job

在powershell中，我想学习将变量调用到启动作业的最佳方法，因此我不必为每个服务器编辑脚本，因为它将根据我放置脚本的客户端而定。

```
$Servername = 'Server1'
    $pingblock = {
      pathping $servername | Out-File C:\client\PS\ServerPing.TXT
    }
    start-job $pingblock 
```

当我在上面运行我的代码时，我只是得到一个带有帮助的文件，就好像我忘记了指定 $servername 一样。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-09T16:03:23.473

使用`-ArgumentList`参数，`Start-Job`例如：

```
Start-Job -Scriptblock {param($p) "`$p is $p"} -Arg 'Server1' 
```

在你的情况下：

```
$pingblock = {param($servername) pathping $servername | Out-File C:\...\ServerPing.txt}
Start-Job $pingblock -Arg Server1 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2019-07-31T01:32:25.537

用**PSv3+ 替代方案**补充[Keith Hill 的有用答案](https://stackoverflow.com/a/10075995/45375)：

 **[`$using:`范围修饰符](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_scopes#the-using-scope-modifier)可用于引用传递给的脚本块内调用者范围内的变量值，`Start-Job`作为传递参数的替代方法（默认情况下，作为后台作业执行的脚本块看*不到*任何调用者的变量或其他定义）：

```
$Servername = 'Server1'
Start-Job { "Target: " + $using:ServerName } | Receive-Job -Wait -AutoRemoveJob 
```

以上产生：

```
Target: Server1 
```

笔记：

*   传递脚本块时可以使用相同的技术：

    *   远程`Invoke-Command`执行- 请参阅*此*[问题](https://stackoverflow.com/q/35492437/45375)。

    *   to [`Start-ThreadJob`](https://docs.microsoft.com/en-us/powershell/module/threadjob/start-threadjob)，在 PowerShell (Core) v6+ 中可用（默认情况下）

    *   to [`ForEach-Object -Parallel`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/foreach-object?view=powershell-7.1), 在 PowerShell (Core) v7+ 中可用

*   请注意，与 一样`-ArgumentList`，传递的只是变量*值*，而不是*变量本身*；也就是说，您不能以这种方式修改调用者的变量。^([1])

* * *

^([1] 但是，基于*线程*的并发特性允许*间接*`Start-ThreadJob`修改，即如果手头的变量值恰好是（可变）.NET*引用类型*的实例，例如哈希表。请注意，利用这一点可能需要额外的、重要的努力来使并发修改*线程安全*。`ForEach-Object Parallel`)

 **** * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-10T17:16:06.087

其他一些方法，$args 和 $input。这也适用于调用命令，我认为它使用相同的机制。$input 方法以一种意想不到的方式处理数组。

```
start-job { $args[0] } -args hi | receive-job -wait -auto
hi

echo hi | start-job { $input } | receive-job -wait -auto
hi

echo hi there | start-job { $input.gettype() } | receive-job -wait -auto

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
False    False    <GetReadEnumerator>d__20                 System.Object 
```

对于数组，使用 foreach-object (%) 循环可能会更好，因此它在每个数组项上并行运行。另请参阅 powershell 7 中的 start-threadjob 或 foreach-object -parallel。实际上没有 -throttlelimit 选项可用于启动作业，因此请谨慎使用。

```
echo yahoo.com facebook.com |
   % { $_ | start-job { test-netconnection $input } } |
   receive-job -wait -auto | select * -exclude runspaceid,pssourcejob* | ft

ComputerName RemoteAddress ResolvedAddresses PingSucce
                                             eded
------------ ------------- ----------------- ---------
yahoo.com    74.6.143.25   {74.6.143.25,...} True
facebook.com 31.13.71.36   {31.13.71.36}     True 
```*****

# xcode - 使用警报按钮删除或清除 UITableView 中的所有数据对象？

> ID：10075949
> 
> 赞同：1
> 
> 时间：2012-04-09T16:00:12.320
> 
> 标签：xcode, uitableview, nsarray, nsobject

好的，我真的已经搜索了似乎涵盖这一点的主题，但仍然没有找到适合我的主题。此列表是通过将每个 UIWebView 页面加载发送到此处来制作的。在某些时候，如果用户想清除此列表，我有一个按钮，它会显示一个警报视图，确认他们想要清除，然后按 OK 清除。请告诉我我该怎么做。大约在中途您可以找到我的 clearAllData，它是 clearAllRecents 警报按钮，但我下面的 void 函数是 my ?

```
#import "RecentViewController.h"
#import "ViewController.h"

@interface RecentViewController ()

@end

@implementation RecentViewController

@synthesize recent, explorerView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    recent = [[[NSUserDefaults standardUserDefaults] arrayForKey:@"Recent"] mutableCopy];
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (IBAction)cancelButtonTapped
{
    [self setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self.presentingViewController dismissModalViewControllerAnimated:true];
}

- (IBAction)clearAllRecents
{
    UIAlertView *alert = [[UIAlertView alloc] 
                      initWithTitle:@"clear all recents?"
                      message:@"press ok to clear"
                      delegate: self
                      cancelButtonTitle:@"cancel"
                      otherButtonTitles:@"ok", nil];
    [alert show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 1) {
        //clear all recent objects??????????????????????????????????????????????
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [recent count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyle)UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    cell.textLabel.text = [recent objectAtIndex:(recent.count - indexPath.row - 1)];
    cell.textLabel.textColor = [UIColor whiteColor];;
    cell.textLabel.font = [UIFont fontWithName:@"HelveticaNeue-Light" size:20.0];
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    explorerView.urlField.text = [recent objectAtIndex:(recent.count - indexPath.row - 1)];
    [explorerView textFieldShouldReturn:explorerView.urlField];
    [self.presentingViewController dismissModalViewControllerAnimated:true];
    explorerView = nil;
    recent = nil;
    tableView = nil;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [recent removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:UITableViewRowAnimationFade];
        [[NSUserDefaults standardUserDefaults] setObject:recent forKey:@"Recent"];
    }
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:09:24.960

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex      {

if (buttonIndex == 1) {
    [recent removeAllObjects];
    [[NSUserDefaults standardUserDefaults] setObject:recent forKey:@"Recent"];
    [yourTableView reloadData];
}} 
```

那应该这样做。

# sql-server-2008 - SQL Server 以 5 天为周期求和

> ID：10075954
> 
> 赞同：1
> 
> 时间：2012-04-09T16:00:35.003
> 
> 标签：sql-server-2008, sum

我将不胜感激这方面的一些帮助。我有这张桌子：

```
RECHARGES
___________
DATE_TIME               CLIENT          RECHARGED_MONEY
2011-01-01 12:25:25.000 2,051307E+09    50000
2011-01-01 12:26:27.000 2,140614E+09    100000
2011-01-01 12:27:03.000 1,074146E+09    50000 
```

...我想总结每个客户的charged_money，并从最后一个充电日期到第一个充电日期以 5 天为一组。

所以我选择最后一个日期并将所有 recarged_money 加起来，直到 5 天前，还有更多 5 .. 等等。我怎样才能做到这一点？

Ty 进阶，J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:49:55.883

如果我没有错过任何事情，这样的事情应该会有所帮助：

```
WITH marked AS (
  SELECT
    DATE_TIME,
    RECHARGED_MONEY,
    dategroup = DATEDIFF(DAY, DATE_TIME, MAX(DATE_TIME) OVER ()) / 5
  FROM RECHARGES
)
SELECT
  DATE_TIME       = MAX(DATE_TIME),
  RECHARGED_MONEY = SUM(RECHARGED_MONEY)
FROM marked
GROUP BY
  dategroup
ORDER BY
  DATE_TIME 
```

# java - adding the same thing in tablerow causes fc

> ID：10075955
> 
> 赞同：0
> 
> 时间：2012-04-09T16:00:36.307
> 
> 标签：java, android, tablelayout

i am doing exactly what this page says: [http://en.androidwiki.com/wiki/Dynamically_adding_rows_to_TableLayout](http://en.androidwiki.com/wiki/Dynamically_adding_rows_to_TableLayout)

main code:

```
this.setContentView(R.layout.main);

```
 /* Find Tablelayout defined in main.xml */
      TableLayout tl = (TableLayout)findViewById(R.id.myTableLayout);
           /* Create a new row to be added. */
           TableRow tr = new TableRow(this);
           tr.setLayoutParams(new LayoutParams(
                          LayoutParams.FILL_PARENT,
                          LayoutParams.WRAP_CONTENT));
                /* Create a Button to be the row-content. */
                Button b = new Button(this);
                b.setText("Dynamic Button");
                b.setLayoutParams(new LayoutParams(
                          LayoutParams.FILL_PARENT,
                          LayoutParams.WRAP_CONTENT));
                /* Add Button to row. */
                tr.addView(b);
      /* Add row to TableLayout. */
      tl.addView(tr,new TableLayout.LayoutParams(
                LayoutParams.FILL_PARENT,
                LayoutParams.WRAP_CONTENT)); <code> 
```

xml:

<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myTableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
     <TableRow
          android:layout_width="fill_parent"
          android:layout_height="wrap_content">

          <Button android:text="Static Button"/>
     </TableRow>
</TableLayout> 
```

but when i duplicate the line tr.addView(b);

it gives me fc. Any idea where is the error?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:06:40.117

那是因为您要添加相同的按钮。尝试：

```
 .....
            /* Create a Button to be the row-content. */
            Button b = new Button(this);
            b.setText("Dynamic Button");
            b.setLayoutParams(new LayoutParams(
                      LayoutParams.WRAP_CONTENT,
                      LayoutParams.WRAP_CONTENT));
            /* Add Button to row. */
            tr.addView(b);

            b = new Button(this);
            b.setText("Another Dynamic Button");
            b.setLayoutParams(new LayoutParams(
                      LayoutParams.WRAP_CONTENT,
                      LayoutParams.WRAP_CONTENT));
            /* Add Button to row. */
            tr.addView(b);   

            ...... 
```

# android - JSONArray 到 JSONObjects 的 Facebook 好友列表

> ID：10075956
> 
> 赞同：0
> 
> 时间：2012-04-09T16:00:38.747
> 
> 标签：android, facebook, facebook-graph-api

我正在使用 facebook graph api 来获取当前的用户好友列表。
我有执行此操作的正确权限，并且返回的 JSON 对象返回如下内容：

```
{
"data": [
{
  "name": "name1", 
  "id": "11111"
}, 
{
  "name": "name2", 
  "id": "2222"
}, 
{
  "name": "name3", 
  "id": "33333"
}], 
"paging": {
"next": "https://graph.facebook.com/613714903/friends?format=json&limit=5000&offset=5000&__after_id=100003711723705"
}
} 
```

据我了解，这是一个 JSONArray，每个用户名和 id 都是一个 JSONObjects .. 我编写了这段代码来对其进行编码：

```
FacebookFriend[] facebookFriends = null;        
    try {

            facebookResults = facebookResults.getJSONArray(0);
            facebookFriends = new FacebookFriend[facebookResults.length()];
            for (int i=0; i < facebookResults.length(); i++)
            {
                JSONObject json = new JSONObject(facebookResults.getJSONObject(i).toString());
                facebookFriends[i].setuId(json.getString("id"));
                facebookFriends[i].setProfilePicture(getProfilePicture(json.getString("id")));
                facebookFriends[i].setGender(getGender(json.getString("id")));
            }               

        } catch (JSONException e) { 
            Log.e("Facebook Error", e.toString());          
            alert("Facebook Error", e.toString(),"ok");
        } 
```

我收到以下错误：

```
 org.json.JSONException: Value [] of type org.json.JSONArray cannot be converted to JSONObject 
```

我真的不明白为什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:20:22.263

仔细看可能你错过了放置在结果*对象的***数据**属性中的用户数组

# php - jQuery调用PHP方法ajax

> ID：10075960
> 
> 赞同：0
> 
> 时间：2012-04-09T16:00:56.703
> 
> 标签：php, jquery, ajax, methods

我将如何从 jQuery ajax 调用 PHP 方法/函数。这甚至可能吗？如果在 jquery 中不可能，那么在纯 javascript 中是否可能？我已经在网上搜索试图找到答案，但我找不到任何有用的网站。我是否需要向另一个 php 文件发出 ajax 请求，设置一个专用于此的会话变量，然后发出另一个 ajax 请求，并在请求的 php 文件中，使用会话数据执行我是否过度思考的操作？感谢您提供任何可能的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T16:05:43.487

AJAX 调用与在浏览器中加载 URL 相同。因此，您需要设法让您的 PHP 脚本根据 URL 调用正确的函数，例如`$_GET`变量。

例如：

```
<?php
    if(isset($_GET['func'])){
       $func = $_GET['func'];
       if($func === 'a') a();
       if($func === 'b') b();
    } 
```

然后进行 AJAX 调用：`http://example.com/script.php?func=a`。

```
$.ajax({
    url: 'http://example.com/script.php',
    type: 'GET',
    data: {func: 'a'},
    success: function(data){
        console.log(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T16:09:14.967

很简单， **jquery：**

```
$.get("code.php"); 
```

**PHP：**

```
<?php func(); ?> 
```

**对于高级：** 使用此 jquery 运行 php：

```
$.get("code.php?action=func1"); 
```

并在 php 中编写此代码：

```
<?php
if( $_REQUEST['action'] == 'func1' ){
   func1();
   die();
}
?> 
```

# sql - 为什么这个左连接评估为交叉连接？

> ID：10075964
> 
> 赞同：3
> 
> 时间：2012-04-09T16:01:19.667
> 
> 标签：sql, sql-server

假设我有一个带有列（Alpha，Beta）的表 A，它链接到带有列（Beta，Delta，Gamma）的表 B。我无法解释为什么第一个查询被转换为交叉连接。（A.Alpha、A.Beta 和 B.Delta 是唯一键。B.Beta 查找 A.Beta）。

如果我做这样的选择：

```
SELECT A.Alpha, B_Alias.Gamma FROM A 
LEFT JOIN B as B_Alias ON B_Alias.Delta = (
  SELECT TOP 1 B_Alias.Delta FROM B 
  WHERE B.Beta = B_Alias.Beta
  ORDER BY B.Gamma desc)
where A.Alpha = 1 
```

结果是很多行，A.Alpha 总是等于选择的单行，B_Alias.Gamma 有每个 Gamma。如果我取出`A.Alpha = 1`，那么它是一个完整的交叉连接。查询作者的尝试是获取与 A 关联的最新 B 列（如果存在）。我使用以下方法修复了它以使其工作。我只是想知道是否有人可以解释为什么上述方法会这样工作。

```
-- This is the correct query
SELECT A.Alpha, B_Alias.Gamma FROM A 
-- Actually join the A and B tables
LEFT JOIN B on B.Beta = A.Beta and B.Delta = (
  -- Only get the Most Recent B for any given A
  SELECT TOP 1 B.Delta FROM B 
  WHERE B.Beta = A.Beta
  ORDER BY B.Gamma desc)
where A.Alpha = 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T16:07:59.070

顶部查询在与相关的`ON`子句中没有条件。您正在做的是从其中的每一行中获取其所在行的顶部排序，并将该结果集加入到每一行中。您实际上是在获取(这将等于if is unique) 的一个子集并将其交叉加入，因为您没有指定and之间的任何直接关系。`A``B``B``Delta``Gamma``Beta``A``B``B``Beta``A``A``B`

更详细一点，如果您将任何表加入到任何其他没有的表中`TableA.SomeColumn = TableB.SomeColumn`，那么您基本上只会从中获得完整的结果集`TableB`，然后将完整的结果集加入每一行in `TableA`，因为它没有办法限制加入的结果集在`TableA`. 我希望这会有所帮助。

# excel - 在 VBA 中使用 Replace 方法将数字存储为字符串

> ID：10075968
> 
> 赞同：2
> 
> 时间：2012-04-09T16:01:30.240
> 
> 标签：excel, vba

我正在使用一个使用奇怪空间作为千位分隔符的工作簿。Excel 将包含此分隔符的数字视为文本。当我使用查找和替换工具删除此分隔符时，数字会被正确识别为数字。当我使用 VBA 执行相同操作时，使用 Cells.Replace 方法，数字继续存储为文本。然后，包含这些数字的单元格上会出现一个绿色角，允许我将它们转换为数字格式，但此选项在 VBA 中似乎不可利用，因为宏记录器未记录此操作。

我可以将工作表的单元格复制到一个数组中，然后循环遍历这些值以替换千位分隔符，然后将数组粘贴回工作表。我的问题是：有没有更有效的方法来删除这些千位分隔符，以便我的数字被视为数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:07:45.653

您是指单元格 B3 和 B5 中 9 和 5 之间的空格吗？如果是，那么仅仅删除空格并不能解决问题。您还需要删除逗号以将其转换为数字，然后使用适当的千位分隔符对其进行格式化。请参阅此代码和快照

**快照**

![在此处输入图像描述](../Images/a14447506b4765d27c3db77ee203d9ad.png)

**代码**

```
Sub Sample()
    With Sheets("Feuil1").Columns(2)
        .Replace What:=" ", Replacement:="", LookAt:=xlPart, SearchOrder:= _
        xlByRows, MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False

        .Replace What:=",", Replacement:="", LookAt:=xlPart, SearchOrder:= _
        xlByRows, MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False

        .NumberFormat = "#,##0"
    End With
End Sub 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T09:46:56.147

上面的答案是对的。问题来自 Excel 区域设置。（即：在法国，数字的格式为 1234,56，而在英文版的 Excel 中为 1234.56） 使用查找和替换工具，不会影响区域设置。

但是，当使用 VBA 用逗号替换点时，基于英语的 VBA 将所有数字设置为字符串。如果将分隔符替换回点，数字将显示在区域设置之后（英文设置为点，法国设置为逗号）。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T20:24:36.653

将不间断空格作为千​​位分隔符和逗号作为小数分隔符的数字存储为文本。使用`Cells.Replace`VBA 中的方法删除空格并没有将值转换为数字格式，而是将它们存储为文本。解决方案是`Cells.Replace`第二次使用 VBA 将逗号替换为点，以将值视为数字并将它们复制到工作表中。Excel 然后根据区域设置格式化数字（必要时用逗号替换点）。

# node.js - 使用 npm 安装 express 时出现问题。

> ID：10075969
> 
> 赞同：0
> 
> 时间：2012-04-09T16:01:30.557
> 
> 标签：node.js, express, npm

我尝试使用 npm 安装 express，运行以下代码：

npm install express mongoose jam less expresso

但我不断收到这个错误，

```
> make deps/jscoverage/node-jscoverage

sh: make: command not found

npm ERR! expresso@0.9.2 preinstall: `make deps/jscoverage/node-jscoverage`
npm ERR! `sh "-c" "make deps/jscoverage/node-jscoverage"` failed with 127
npm ERR! Failed at the expresso@0.9.2 preinstall script.
npm ERR! This is most likely a problem with the expresso package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     make deps/jscoverage/node-jscoverage 
```

我搜索了很多，似乎无法找到答案。干杯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T16:08:30.570

你没有make，你必须安装它（它是gcc的一部分）。

如果您使用的是基于 Debian 的 linux 发行版：

```
sudo apt-get install build-essential 
```

* * *

如果您使用的是 Mac OS X，则必须安装 XCode，然后安装其命令行工具：

安装 XCode 4 然后打开它，转到首选项 -> 下载 -> 组件 -> 单击命令行工具，然后单击其安装按钮。

* * *

我只是希望你不在 Windows 上，因为我无法帮助你，呵呵 :-P

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T16:57:31.553

TomShreds 所说的，您可能还想将“expresso”换成“mocha”，哪种替换了 expresso（来自 expresso 的 GitHub 自述文件：“一定要查看 Expresso 的继任者 Mocha。”）

# matlab - 矩阵的逆

> ID：10075970
> 
> 赞同：0
> 
> 时间：2012-04-09T16:01:42.283
> 
> 标签：matlab, matrix, linear-algebra, matrix-inverse

在 matlab 中，matlab 的逆可以写成：

对于最小二乘（更有效）

```
x = A\b.--------------------------------1 
```

但是对于未知参数（x）的协方差矩阵（Qxx），我通常会这样做，

```
Qxx==inv(A) --------------------------2 
```

我如何以像（1）这样的有效方式编写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:18:56.470

如果您确实需要逆，那么您将无法击败该`inv`函数。

有关该`inv`函数的一些讨论，请参阅[Loren 关于 Matlab 的艺术的这篇文章](http://blogs.mathworks.com/loren/2007/05/16/purpose-of-inv/)。正如您在原始问题中所指出的那样，以及链接文章中的 Loren 所指出的，我觉得有必要在这里加强；如果你实际上不需要逆，那么你最好避免这一步。但这并不总是可能的。

如果您确实需要逆，那么只需使用该`inv`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:08:40.247

你的意思是这样的：

```
Qxx = A \ eye(size(A)); 
```

?

真正的问题是，你在做什么用逆？如果你只是将它乘以其他向量`c`，那么你可以这样做......

```
A \ c 
```

代替`Qxx * c`

# javascript - Javascript encryption library (client side encrypt | server side decrypt)

> ID：10075971
> 
> 赞同：3
> 
> 时间：2012-04-09T16:01:44.633
> 
> 标签：javascript, encryption

I am looking for a javascript library with I can encrypt client side and decrypt server side using C#.

Does such a library exist? Are there examples howto encrypt client side and howto decrypt in C# server side?

* * *

edit - extra explanation

On a site with low treshold the requirement is http. Some data (litte) will be send to the server. Idea is that the user give some data (also a key - will not be sent), data will be encrypt and send to the server (key is also known on server side). Data is not real sensitive, preference is not to send it as plain text ...

I tried [http://code.google.com/p/crypto-js/](http://code.google.com/p/crypto-js/) AES. But I can't figure out how that data is encypted (client side, utf 8 or ..., etc.). If I encrypt some data client side (with same iv and private key etc) and do the same in C# I get different strings.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T16:06:35.203

你在寻找什么样的加密......对称/非对称？您是否在寻找特定算法... AES、DES、3DES？

这是AES的一个非常好的JavaScript实现......

[http://point-at-infinity.org/jsaes/](http://point-at-infinity.org/jsaes/)

这里有更多资源（使用风险自负）：

*   [http://crypto.stanford.edu/sjcl/](http://crypto.stanford.edu/sjcl/)
*   [http://www.farfarfar.com/scripts/encrypt/](http://www.farfarfar.com/scripts/encrypt/)
*   [http://code.google.com/p/jscryptolib/](http://code.google.com/p/jscryptolib/)
*   [https://github.com/drench/blowfish.js/blob/master/blowfish.js](https://github.com/drench/blowfish.js/blob/master/blowfish.js)

* * *

但是，JavaScript 加密并不安全。尽管您可以正确实现加密算法，但 JS 仍然是客户端，这意味着它可以更改。另外，如果JS被禁用怎么办？SSL是要走的路。

最后，这是一篇关于为什么不**应该**进行客户端加密的有趣文章……

[http://www.matasano.com/articles/javascript-cryptography/](http://www.matasano.com/articles/javascript-cryptography/)

# php - 为空白的 LEFT JOIN 设置 0 结果？

> ID：10075972
> 
> 赞同：2
> 
> 时间：2012-04-09T16:01:46.577
> 
> 标签：php, mysql, sql, join

我有两个由外键“ID”连接的表：

表 A 有 ID,MONTH,VOTES 以及表 B ID,MONTH,OTHER_VOTES。

表A和表B按预期收集选票。并非所有时间都有这两种投票。

我想从`LEFT JOIN`B 到 A，以便在 OTHER_VOTES 不存在的月份（无，空）我会得到 0 而不是空单元格。

那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T16:02:40.650

真的是。在选择列的位置，使用`IFNULL(OTHER_VOTES, 0)`.

# php - JavaScript/PHP query for Maps Markers

> ID：10075975
> 
> 赞同：0
> 
> 时间：2012-04-09T16:01:59.480
> 
> 标签：php, javascript, google-maps

Im migrating a working interactive Google Maps V2 to V3 where the web user supplies a zip code through a form field which calls a javascript function that runs a query on the database through a PHP script. The PHP script should return the jscript array.

When the jscript function is called (on clicking the form button), nothing is happening. Or the PHP script isn't returning a jscript array as expected

The error console doesn't report any error, and firebug shows the function and array variables as expected, however the array variable is empty.

Can someone who has implemented V3 with search function take a look at what I'm doing and give some advice? Thanks in advance:

**from html**

```
Enter Zip Code: <input type="text" id="zip" /><input type="button"
onclick="seachLocationsNear()" value="Search Locations" /></p> 
```

**from jscript**

```
 function searchLocationsNear(zip) {
 var zipcode = document.getElementById('zip').value;
 var storeloc = 'dbsearch_genArray.php?zip=' + zipcode;
 } 
```

**from php**

```
 //query works as expected, returns $result
 //http://www.octoberblue.net/eztrip/dbsearch_genArray.php
 //using while loop to assign query result to jscript array storeloc
 while ($row = @mysql_fetch_assoc($result)){
 print "storeloc.push($row['address'],$row['lat'],$row['lng']);";
 } 
```

**Here is the full javascript** //

```
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

// call setMarkers function on initialization
setMarkers(map, storeloc);
}   

/*
* Define Variables
* storeloc - multidim array, elements title[0],lat[1],lng[2]
* image - string, relative path (from parent html) to icon
* infoWindow - obj, contains info window constructor 
*/
// Works as expected when array is statically defined 
/* var storeloc = [
*   ['4141 Rockside Rd Seven Hills OH', 41.400, -81.663],
*   ['7515 Auburn Road Painesville', 41.66, -81.24],
*   ['2496 E Aurora Road Twinsburg', 41.301218, -81.46940]
*   ];
*/
var image='img/maps_logo.png';   
var infoWindow = new google.maps.InfoWindow({maxWidth:100});
    var marker = new Array();

/*
* dynamically populate the storeloc array when searchLocationsNear() 
* function is called on button click.
*/
function searchLocationsNear(zip) {
var zipcode = document.getElementById('zip').value;
var storeloc = 'dbsearch_genArray.php?zip=' + zipcode;
}

/*
* Define setMarkers function with map and locations parameters
* locations contain storeloc multidim array, called in initialize block.
*/
function setMarkers(map, locations) {
var i;
for (i = 0; i < locations.length; i++) {
  var locate = locations[i];
  var myLatLng = new google.maps.LatLng(locate[1], locate[2]);
  marker[i] = new google.maps.Marker({
     position: myLatLng,
     map: map,
     icon: image,
     title: locate[0]
     });
     google.maps.event.addListener(marker[i],'click',function(){
        markerClick(this);
     });
} //close for loop
} //close setMarkers function

/*
* instanciate InfoWindow for each marker
*/
function markerClick(mark){
var n;
for (n=0; n < marker.length; ++n) {
   if (marker[n] == mark) {
   var infoContent = marker[n].title;
       infoWindow.setContent('<p>Store Location Is:<br>' + infoContent + '</p>');
       infoWindow.open(marker[n], mark);
    }
}
}

/*
* clear markers function, v3 requires the developer to keep
* track of markers and overlays through array.
*/
function clearMarkers() {
infoWindow.close();
var i;
for (i=0; i < markerArray.length; i++) {
    markerArray[i].setMap(null);
}
markerArray.length=0;
}

google.maps.event.addDomListener(window,'load',initialize);
 //]]> 
```

As I noted in the comment, the implementation is working as expected when the storeloc array is statically defined. But not when I try and dynamically create the array through user input.

Thanks in advance, RWhite35

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:14:09.123

经过漫长而详尽的一周“试错”后，我终于有了我的交互式谷歌地图，并完成了按邮政编码搜索的功能。这是对上述内容的简短回答。

用户通过一个表单输入邮政编码，该表单针对客户的 MySQL 商店位置数据库运行 PHP 查询。然后使用 JSON (json_encode())，将 PHP 数组分配给 Javascript 数组。

```
 /* assume form input/PHP/MySQL query rans as expect, left out for brevity.
 * $result is a resource id returned by the query process (class object)
 */
 while ($row=@mysql_fetch_assoc($result)){
  $arrLocations[] = (
     array($row['address'],$row['lat'],$row['lng'])
     );
 }
 // Now use JSON to encode the multidim array for JavaScript
 // PHP 5.2 note, must enable in PHP.INI, use cmd line to check: php -i

 $arrPassed = json_encode($arrLocations);

?> //duck out of PHP and in to JS
<script type="text/javascript"> var storeloc = <?php echo $arrPassed ?>;</script>
<?php
//continue PHP and clean up any closures, connections etc. 
```

此时我有一个有效的 JavaScript multidim 数组。它可以传递给上面的 setMarkers 函数，剩下的就是 go to go。秘诀是 JSON 编码。检查 php.net 网站上的 json_encode()。这是我发现将 PHP multidim 数组分配给 JavaScript 的最简洁、最简单的方法。问候， rwhite35

# jqgrid - 如何在 jqGrid 中对 reloadGrid 请求进行排队？或者如何在加载时禁用 GET？

> ID：10075977
> 
> 赞同：0
> 
> 时间：2012-04-09T16:02:02.287
> 
> 标签：jqgrid

如果我在需要一段时间来处理的 GET 上加载或重新加载 jqGrid，然后在调用`$("#myJqGrid").trigger("reloadGrid");`第一个进程时进行后续调用，那么第二个调用永远不会发出 GET 请求。有没有办法让它们排队或取消它们？或者任何其他处理这个问题的想法？不想让用户与一堆排队的请求混淆，他们认为他们正在获得对他们刚刚提出的请求的响应，但这是第一个请求的结果。

如果有一种干净的方法可以禁用 jqGrid 在初始加载时生成 GET，我认为这对我来说不是什么大问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:10:02.973

最初阻止加载 jqGrid 的最简单方法是`datatype: 'local'`在初始化时使用。如果您确实需要使用来自服务器的数据填充网格，应首先更改`datatype`为`'json'`或`'xml'`相对于`setGridParam`然后触发`reloadGrid`：

```
$("#gridId").jqGrid('setGridParam', {datatype: 'json'}).trigger('reloadGrid'); 
```

jqGrid**无法**对 Ajax 请求进行排队。如果您确实需要发出许多连续的 Ajax 请求，您应该在`loadComplete`. 例如，您可以创建一个请求数组，测试`loadComplete`该数组是否为空。如果它不为空，您可以在回调`.trigger('reloadGrid')`内部`setTimeout`调用并调用数组的[shift](http://www.w3schools.com/jsref/jsref_shift.asp)方法。

在大多数情况下，您实际上并不需要实现 Ajax 队列。例如，请参阅[答案](https://stackoverflow.com/a/9244023/315935)作为示例。

# asp-classic - How to store form data before redirecting to another page

> ID：10075978
> 
> 赞同：0
> 
> 时间：2012-04-09T16:02:04.450
> 
> 标签：asp-classic

I have a registration form, the form is sending to a third party payment page. Right now I want to insert the form data to a database before it goes to the third party payment page which I have no access to it. I am thinking to create a page, insert the data to my database and then redirect it to the payment page. There are a lot of variables need to be passed to the payment page, in stead of passing the variables in querystring, is there any better way to do it? TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:31:59.960

始终建议通过 POST（而不是 GET/querystring）传递敏感数据[单击此处了解更多关于经典 ASP 中的获取与发布表单的信息！](http://www.w3schools.com/asp/asp_inputforms.asp)

Registration.asp - 此页面使用表单从用户那里收集信息并将数据提交到 add.asp

Add.asp - 此页面与您的数据库通信并验证用户（如果用户名已被使用，则发送错误消息）然后重定向到支付页面。

pay.asp - 这是付款页面...

# sql-server-2000 - Connect from Access 2010 to SQL Server 2000 and then import a CSV file into SQL Server

> ID：10075985
> 
> 赞同：0
> 
> 时间：2012-04-09T16:02:28.020
> 
> 标签：sql-server-2000, ms-access-2010

I was given a new computer at work with a new O/S and the latest version of Microsoft Access. I used to have Access 2003\. Now I have Access 2010\.

I used to be able to have an Access 2003 Project linked to a SQL Server 2000 database, and when I opened the Access 2003 project to import a comma-delimited text file, a file (EDIT: more precisely, a table) would be created in SQL Server and the data from the text file would end up in SQL Server.

Now I want to do the same thing now, but Access 2010 is different and I cannot see how it's done.

Menu choices:

**Database Tools -> SQL Server** executes an upsizing tool which is not compatible with SQL Server 2000.

**External Data -> ODBC Database** does allow me to attach to the existing SQL Server 2000 database, but when I import a CSV file, the table is created locally in Access, not in SQL Server 2000\.

Can Access 2010 be used to import data in to SQL Server 2000? How?

Thanks

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-03T00:03:09.697

您可以直接从 SQL Server 发出 BULK INSERT 存储过程，这应该比 MS 访问本机可以执行的任何操作快十几倍。

# .net - 正则表达式匹配特定的 URL

> ID：10075986
> 
> 赞同：0
> 
> 时间：2012-04-09T16:02:36.310
> 
> 标签：.net, regex, pattern-matching

旧的工作模式，直到网站更改其托管文件的方式。

```
http[s]?://[0-9a-z_.-]+\.[a-z]{2,4}[:0-9]*/([0-9a-z_./-])*[0-9a-z _.-](?:jpg|bmp|gif|png)+ 
```

我不知道如何编写有效的正则表达式来匹配 url 模式以从网页中提取图像。

我想要精确的图像字符串具有这种模式：

```
images.domain.com/1/src/1333849327175.jpg
images.domain.com/2/src/2311487564321.png
images.domain.com/a/src/4568436431234.gif
images.domain.com/b/src/1234237456466.jpeg
images.domain.com/abc12/src/123456466.bmp 
```

还有很多其他图片，所以我只想要那些符合 images.domain.com 模式的图片

我只是无法绕过它！试过这个，但有没有简单的方法来测试它？

```
images[0-9a-z_.-]+\.[a-z]{2,4}[:0-9]*/([0-9a-z_./-])*[0-9a-z _.-](?:jpg|bmp|gif|png)+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:08:05.940

为什么这么复杂/通用。你不能只是一个特定的：

```
images\.domain\.com/[0-9a-z]+/src/[0-9]+\.(?:jpg|bmp|gif|png) 
```

这是 .NET 的测试工具：http: [//derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

# core-data - Iterate through iOS Core Data relationship

> ID：10075988
> 
> 赞同：2
> 
> 时间：2012-04-09T16:02:53.623
> 
> 标签：core-data, ios5

I am playing around with an app that keeps track of when people receive a publication. I have two core data entities, publication and person, which have to-many relationships to each other as each can have many of the other. Publication <<->> Person.

I am trying to iterate through the relationships so that if a person has received the publication the cell should be style check mark. If they haven't then it should be cell style plain. Here is what I have so far:

```
-(void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {

    Person *personForCell = (Person *) [fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = [NSString stringWithFormat:@"%@ %@", personForCell.firstName, personForCell.lastName];

    NSArray *issuesForPersonArray = [personForCell.issues allObjects];

    if ([issuesForPersonArray count] != 0) {

    for (int i = 0; i <= [issuesForPersonArray count]; i++) {
        if ([issuesForPersonArray objectAtIndex:i] == km) {
            cell.accessoryType = UITableViewCellAccessoryCheckmark;
        }else {
            cell.accessoryType = UITableViewCellAccessoryNone;
        }
    }
} 
```

When I run this it will display all persons as long as none have a relationship to this publication. But once I select their name I get this log:

> Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]'

Here is the didSelectRow method:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:NO];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if (cell.accessoryType == UITableViewCellAccessoryNone) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        // Reflect selection in data model
        Person *personSelected = (Person *) [fetchedResultsController objectAtIndexPath:indexPath];
        [publication addPersonObject:personSelected];

    } else if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
        cell.accessoryType = UITableViewCellAccessoryNone;
        // Reflect deselection in data model
        Person *personSelected = (Person *) [fetchedResultsController objectAtIndexPath:indexPath];
        [publication removePersonObject:personSelected];

    }

} 
```

I'm sure I'm going about this all wrong, any help would be greatly appreciated.

**Figured it out. Here is what I used**

```
-(void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {

    Person *personForCell = (Publisher *) [fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = [NSString stringWithFormat:@"%@ %@", personForCell.firstName, personForCell.lastName];

    NSMutableArray *issuesForPersonArray = [[personForCell.publication allObjects] mutableCopy];

    if ([issuesForPersonArray count] != 0) {

        for (Publication *publicationForPerson in issuesForPersonArray) {
            if (publicationForPerson == publication) {
                cell.accessoryType = UITableViewCellAccessoryCheckmark;
            }else {
                cell.accessoryType = UITableViewCellAccessoryNone;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:23:14.777

您的代码中有一个基本的设计缺陷。您正在使用 UI 元素（复选标记）来通知您的数据模型。这很容易出错，并且违反了 MVC（模型-视图-控制器）编程范式的所有规则。

您显示复选标记的基本方法是可以的。参考数据模型来决定使用哪个 UI 元素。但是，这不是使用索引遍历对象的最佳方式。此外，滚动表格视图时循环非常昂贵。这是另一种方法：

*（我假设`km`是对相关发布实体实例的引用。）*

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:
   @"ANY issues == %@", km];
NSArray *filteredArray = [[personForCell allObjects] 
   filteredArrayUsingPredicate:predicate];
if (filteredArray.count > 0) // check
else // uncheck 
```

严格来说仍然有一个迭代，但框架正在为你做这件事，所以你不必处理那些越界错误。

当你想改变关系时，你应该使用类似的方法来检索这个信息：

```
if (filteredArray.count > 0) [personSelected removeIssuesObject:km];
else [personSelected addIssuesObject:km];
[self.tableView reloadData]; 
```

# node.js - 将 Node.js 升级到最新版本

> ID：10075990
> 
> 赞同：913
> 
> 时间：2012-04-09T16:02:57.117
> 
> 标签：node.js, upgrade

所以，我已经安装了 Node.js，现在当我尝试安装 Mongoosejs 时，我收到一条错误消息，告诉我我没有所需的 Node.js 版本（我有 v0.4.11 并且需要 v0.4.12）。

如何升级到这个版本？我想我可以用最新版本再次安装它，但在我确定文件夹“节点”中的项目文件夹不会被删除之前，我不想这样做。

* * *

## 回答 #1

> 赞同：1521
> 
> 时间：2012-04-09T16:06:14.213

### Ubuntu Linux/Mac：

该模块`n`使版本管理变得容易：

```
npm install n -g 
```

对于最新的稳定版本：

```
n stable 
```

对于最新版本：

```
n latest 
```

### 视窗：

只需从[节点网站](https://nodejs.org/en/download/)的 Windows 中的 .msi 重新安装节点。

* * *

## 回答 #2

> 赞同：677
> 
> 时间：2012-09-24T18:44:27.940

# *所有平台*（Mac、Linux 和 Windows）2022

如果您只需要将旧版本的 Node.js 升级到最新版本并且不需要多个版本，只需用新版本***覆盖***现有的可执行文件即可。

### [从nodejs.org/en/download](https://nodejs.org/en/download/)下载最新的 Node.js

[![在此处输入图像描述](../Images/1c75991088085fc9b5208e829fdfebb8.png)](https://i.stack.imgur.com/tPkyX.png)

这**行得通！^(TM)**在所有平台上，是最简单/最快的方法。
当您`node -v`在终端中运行时，您将看到最新版本。

## 苹果电脑

如果您最初使用**brew**安装了 Node.js，请运行：

```
brew upgrade node 
```

## 管理多个版本的 Node.js：

如果您需要在您的机器上运行多个版本的 Node.js，例如，如果您有一个针对 AWS Lambda 上特定版本的旧项目，那么**`NVM`**(Node Version Manger) 是您的朋友！

#### 第 1 步 -*获取[NVM](https://github.com/nvm-sh/nvm)*

```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash 
```

> 如果您对安装命令感到*好奇*，*请阅读*[源代码](https://github.com/creationix/nvm/blob/master/nvm.sh)
> ……它已经过*几位*[node.js 安全专家的](https://snyk.io)*审查*

 *#### 第 2 步 -*安装*您需要的 node.js 版本

获得**NVM**后，您可以使用 nvm 命令安装*特定版本的 Node.js：*

```
nvm install v16.13.2 
```

**注意**：您可能需要关闭并重新打开终端窗口才能`nvm`使用命令。

您应该期望在终端中看到类似这样的内容：

```
Now using node v16.13.2 
```

您现在在您的机器上拥有最新的 Node.js。
如果您需要临时切换到不同/以前的版本，您可以使用简单的`nvm`命令来完成。

> 注意：避免[**`sudo`**](https://medium.com/@ExplosionPills/dont-use-sudo-with-npm-5711d2726aa3)与 Node/NPM 一起使用，因为它违反了[最小权限的安全原则](https://en.wikipedia.org/wiki/Principle_of_least_privilege)

**`NVM`**被认为比管理多个 Node.js 版本“*更好”，因为**详细*的命令意味着*更*容易跟踪您在终端/SSH 日志中所做的事情。它被[**NPM**](https://www.npmjs.com/policies/security)的团队使用，他们是 Node.js 世界的创建者/保管人！**`N`****[](https://www.npmjs.com/policies/security)**

 ***** * *

## 回答 #3

> 赞同：110
> 
> 时间：2013-07-18T13:24:40.847

通过 npm：

```
npm cache clean -f
npm install -g n
n stable 
```

您还可以指定所需的版本：

```
n 0.8.21 
```

如果它似乎不起作用，安装会给你一个提示：

> 如果“node --version”显示旧版本，则启动一个新的 shell，或使用以下命令重置位置哈希：（ `hash -r` 对于 bash、zsh、ash、dash 和 ksh）[或] `rehash` （对于 csh 和 tcsh）

[参考](http://davidwalsh.name/upgrade-nodejs)

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2014-10-31T02:26:44.117

**在 Windows 上，从**[https://nodejs.org/download/release/latest/](https://nodejs.org/download/release/latest/)下载最新的“Windows Installer (.msi)” 并安装相同的目录，仅此而已...

完成上述安装后，NodeJS 和 NPM 将升级到最新版本，然后您可以正常清理包：

```
npm cache clean
npm update -g 
```

**笔记**

您始终可以使用以下命令检查版本：

```
C:\node -v
v0.12.4

C:\npm -version
2.10.1 
```

* * *

## 回答 #5

> 赞同：55
> 
> 时间：2017-03-17T20:14:30.667

# 所有平台（Windows、Mac 和 Linux）

**2021 年 5 月更新**

就是这样的人。它过去更加复杂，人们使用不同类型的包和策略来管理它。但事情已经变得更好了。

## 只需转到[nodejs.org](https://nodejs.org/en/ "nodejs.org")并使用最新的安装程序。

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2014-09-01T02:48:20.447

**在 Windows 上将 node.js 升级到最新版本**

1.  如果您还没有安装 Chocolatey： [安装 Chocolatey](https://github.com/chocolatey/choco/wiki/Installation)

2.  在命令提示符下，键入

    `cup nodejs`

（相当于打字`choco upgrade nodejs`——假设你已经安装了节点）

注意：您可能需要运行`cinst nodejs.install`Chocolatey 来注册您现有的安装。（感谢您的评论，@mikecheel）

* * *

**在 Windows 上安装 node.js**

如果您从未安装过节点，您也可以使用 Chocolatey 来安装。安装巧克力（参见上面的步骤 1）。然后从命令提示符处键入：

`cinst nodejs.install`

[Chocolatey Gallery 节点 JS（安装）](https://chocolatey.org/packages/nodejs.install)

* * *

**使用巧克力在 Windows 上安装特定版本的节点**

`cinst nodejs.install -Version 0.10.26`

* * *

## 回答 #7

> 赞同：23
> 
> 时间：2017-03-09T08:50:20.380

在将 Node.js 升级到最新版本之后

```
sudo npm cache clean -f
sudo npm install -g n
sudo n stable

sudo ln -sf /usr/local/n/versions/node/<VERSION>/bin/node /usr/bin/node 
```

用于将 Node.js 升级到最新版本

```
sudo n latest 
```

如果您需要撤消，请按照命令

```
sudo apt-get install --reinstall nodejs-legacy     # fix /usr/bin/node
sudo n rm 6.0.0     # replace number with version of Node that was installed
sudo npm uninstall -g n 
```

这种升级节点的方法现在不稳定，不应该使用。管理 Node.js 版本的最好方法是使用 NVM：Node Version Management。！

安装

您可以在 nvm [GitHub 页面][1] 上阅读安装步骤。安装和配置只有两个简单的步骤。使用非虚拟机

如果您使用许多不同的 Node.js 实用程序，您就会知道有时您需要快速切换到其他版本的 Node.js，而无需占用整个机器。您可以在此处使用 nvm 下载、安装和使用不同版本的 Node.js：

```
nvm install 4.0 
```

在任何给定时间，您都可以使用以下命令切换到另一个：

```
nvm use 0.12 
```

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2015-08-13T01:07:00.570

# 对于 Mac OSX 上的 brew 用户

```
brew upgrade node 
```

产生：

```
Andrews-MacBook-Air :: ~/dev/cookiecutter-ionic ‹master*› » brew upgrade node
==> Upgrading 1 outdated package, with result:
node 0.12.7
==> Upgrading node
==> Downloading https://homebrew.bintray.com/bottles/node-0.12.7.yosemite.bottle
######################################################################## 100.0%
==> Pouring node-0.12.7.yosemite.bottle.tar.gz
==> Caveats
Bash completion has been installed to:
  /usr/local/etc/bash_completion.d
==> Summary
  /usr/local/Cellar/node/0.12.7: 2726 files, 31M 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2017-05-26T11:24:12.347

***安装 npm*** =>

```
sudo apt-get install npm 
```

***安装 n*** =>

```
sudo npm install n -g 
```

***最新版本的节点***=>

```
sudo n latest 
```

因此将下载并安装最新版本

***您可以使用特定版本的节点***

***列出可用的节点版本***=>

```
n ls 
```

***安装特定版本***=>

```
sudo n 4.5.0 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2017-07-26T18:35:20.063

我在 Ubuntu 中有节点版本**v7.10.0**

使用以下命令进行升级

```
curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -
sudo apt-get install -y nodejs 
```

现在升级到**v8.2.1**

**或者**

```
sudo apt-get install make
sudo curl -L https://git.io/n-install | bash
. /home/$USER/.bashrc

# Below command should get the latest version of node
node --version

# Install specific version of node
n 8.2

# Check for the Node Version installed
node --version 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2018-05-13T13:32:10.847

`sudo npm install n -g sudo n 0.12.2`

或者

`sudo npm install -g n sudo n latest`

或者

`sudo npm cache clean -f sudo npm install -g n sudo n latest`

这些运作良好。但是对于`UX term`终端`node -v`没有显示最新版本，所以我关闭并重新打开了新终端。我发现，安装后的`v10.1.0`输出`node-v``sudo n latest`

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2017-05-18T22:47:33.517

在 Mac OSX 上使用 brew 和 nvm：

如果您不使用 nvm，请先卸载 nodejs。如果尚未安装，请安装 Homebrew。然后安装 nvm 和节点：

```
brew install nvm
nvm ls-remote    # find the version you want
nvm install v7.10.0
nvm alias default v7.10.0    # set default node version on a shell 
```

您现在可以在需要时轻松切换节点版本。

奖励：如果您在使用 nvm 时看到“tar：无效选项”错误，请`brew install gnu-tar`按照 brew 提供的说明设置 PATH。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2013-11-19T09:08:30.923

我的2c：

我在 Linux Ubuntu 12.04 LTS 上尝试了 n 和 nvm，以便将节点从 v0.8.25 更新到 v0.10.22。

第一个已成功完成，但命令“哪个节点”导致旧的 v0.8.25。
第二个已成功完成，相同的命令导致 v.0.10.22。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2016-06-19T05:34:32.050

```
brew upgrade node 
```

将升级到最新版本的节点

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2019-04-15T09:57:46.010

如果您使用的是 Linux .. 只需执行以下步骤`sudo -i sudo apt install curl curl -sL https://deb.nodesource.com/setup_10.x | sudo bash - sudo apt-get install -y nodejs` ，您现在应该拥有最新版本

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2016-08-19T11:23:47.037

**您无需担心升级过程**。

您可以使用**官方文档**安装最新版本，就好像您没有安装它一样，它会像魅力一样工作。> [https://nodejs.org/en/download/package-manager/](https://nodejs.org/en/download/package-manager/) ;)

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2020-09-13T07:45:08.987

它在 Windows 操作系统中非常简单。

您不必卸载旧节点或 npm 或其他任何东西。

只需访问[nodejs.org](https://nodejs.org/en/)

然后寻找适用于 Windows 的下载选项并在其下方单击当前...最新功能选项卡并按照自动说明进行操作

它将为您下载最新的节点和 npm 并丢弃旧的节点。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2016-08-31T19:58:14.547

打开 node.js 项目的 package.json 文件，将依赖项中用 * 指定的版本号替换为最新版本。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2016-12-16T15:17:18.937

如果你正在寻找 linux ..

npm update 将不起作用，主要是不确定原因，但以下步骤将帮助您解决问题......

将节点 4.x 升级到 6.x 的终端过程。

```
 $ node -v
 v4.x 
```

检查节点路径

```
$ which node
/usr/bin/node 
```

从 [下载][1] 下载最新的 (6.x) 节点文件

[1]：[https](https://nodejs.org/dist/v6.9.2/node-v6.9.2-linux-x64.tar.xz) : //nodejs.org/dist/v6.9.2/node-v6.9.2-linux-x64.tar.xz 和解压缩文件保存在 /opt/node-v6.9.2-linux-x64/ 中。

现在取消链接当前节点并链接到最新的如下

```
$ unlink /usr/bin/node
$ ln -s /opt/node-v6.9.2-linux-x64/bin/node node
$ node -v
$ v6.9.2 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-01-04T13:27:46.873

对于 linux 用户如何逐步更新节点版本[有很好的解释。](http://tecadmin.net/upgrade-nodejs-via-npm/#)PS 类型而不是`sudo n stable` `sudo n latest`用于接收最新的节点版本。

如果您收到以下错误

> 错误：模块版本不匹配。预期48，得到46。

您刚刚通过以下命令重建了 npm，`npm rebuild`它应该可以解决问题。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2017-09-29T17:50:07.543

对于 Windows 用户，只需访问 node.js (nodejs.org) 网站并下载最新版本（截至 2017 年 9 月 29 日的 8.6.0）。按照自动安装窗口中的步骤操作，一切顺利。我刚刚做到了，当我在 webstorm 中检查我的最新版本时，它已经在那里了。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2017-12-03T07:44:36.890

通过从 nodejs 网站下载最新的 .msi 版本重新安装最新版本的 nodejs，[https: //nodejs.org/en/download/](https://nodejs.org/en/download/)

它在我的 Windows 机器上为我工作。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2018-04-12T10:48:36.503

在你的终端上试试这个：

nvm install node --reinstall-packages-from=node

它应该可以解决问题。

稍后，运行 node --version 以检查您拥有的版本。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2016-04-28T03:14:49.687

按照@nelsonic 的[描述](https://stackoverflow.com/a/12570971/803864)安装 nvm 后，这是保持升级的最简单方法：

“node”是上一个版本的快捷方式，因此您可以使用以下命令安装上一个版本：

```
nvm install node 
```

并始终使用“节点”版本：

```
nvm alias default node 
```

最后升级您的节点版本并保留已安装的软件包：

```
nvm install node --reinstall-packages-from=node 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-10-06T18:08:56.177

我用[了 https://chocolatey.org/install](https://chocolatey.org/install)

1.  [参考此https://chocolatey.org/install](https://chocolatey.org/install)安装 Chocolatey
2.  在cmd中运行

> 杯节点js

就这样。NodeJs 现在更新到最新版本

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-11-04T18:52:16.640

**对于 Windows**

我有同样的问题，我尝试重新安装并没有为我工作。

`"C:\Program Files(x86)\nodejs"`从您的系统环境中删除`PATH`，就是这样！

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-08-09T21:23:13.903

只需将节点和 npm 更新捆绑到我的 ~/.bash_profile 的单个命令中即可：

```
update-node(){
  sudo n latest;
  sudo npm install -g npm;
  node --version;
} 
```

这假设您已经从 Eldar Djafarov 的回答中安装了“n”。将此保存到您的 Bash 配置文件后，重新打开终端并输入 update-node 并输入您的 sudo 密码：

```
λ update-node
Password:
/usr/local/bin/npm -> /usr/local/lib/node_modules/npm/bin/npm-cli.js
/usr/local/bin/npx -> /usr/local/lib/node_modules/npm/bin/npx-cli.js
+ npm@5.3.0
updated 1 package in 7.232s
v8.2.1 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-05-28T01:52:38.753

只需运行命令行`npm install -g npm`或`sudo npm install -g npm`为 mac 用户更新它。就是这样。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-10-10T03:04:52.843

**视窗 10**

在文件夹中打开 CMD`C:\Program Files\nodejs\node_modules`并键入`npm i npm`

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-12-04T07:36:41.570

对于 Ubuntu

使用以下命令安装[nvm （节点版本管理器）](https://github.com/creationix/nvm)

要安装或更新 nvm，可以使用使用 cURL 的安装脚本：

> curl -o- [https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh](https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh) | 重击

**或 Wget：**

> wget -qO- [https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh](https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh) | 重击

检查是否已经安装了 nvm

> nvm--版本

要安装或更新节点，请运行以下命令：

> nvm install 10.14.1（节点一要安装的版本）

要检查系统可用或当前为系统运行的节点版本列表，请运行以下命令：

> 非虚拟机列表

[![它将列出系统中存在的所有可用节点版本](../Images/8ab27c392554a51c7ca7570602267655.png)](https://i.stack.imgur.com/VQikz.png)

检查节点版本：

> 节点-v

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-04-25T06:52:03.090

**如果 sudo/root 访问有问题，我们可以这样做**

```
npm install stable Or
npm install 10.15.0 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2021-03-11T08:49:45.470

只需使用 nvm 安装节点 js。它将下载最新版本的节点 js。

**运行：** curl -o- [https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh](https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh) | 重击

执行命令后。关闭您的终端并重新打开，然后运行此命令以安装 node js 最新版本。

**运行**：nvm install v14.15.5

现在通过输入 node -v 检查

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-12-10T16:45:15.940

我迟到了，但在 Windows 10/11 中，在我的 Azure DevOps 管道中，我在还原阶段从 PowerShell 脚本运行这些命令：

```
if (!(Test-Path "./$nodeInstaller")) {

    $message = "Downloading node $nodeVersion"
    Write-Output $message

    Invoke-WebRequest "https://nodejs.org/dist/$nodeVersion/$($nodeInstaller)" -OutFile "./$nodeInstaller"
}

# Display node install message
$message = "Installing node $nodeVersion"
Write-Output $message

# Execute MsiExec silently and wait for it to complete.
Start-Process MsiExec.exe -Wait -ArgumentList "/i $($nodeInstaller) /qn /L*v msilog.txt" 
```

就我而言，这对于我的一些构建工具（Angular 13 CLI）是必要的，因为我使用的容器映像只有旧版本的 node.js。这些命令在构建/恢复管道中也很有帮助，因为我们可以等待安装完成并捕获一些日志以防安装失败。

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2017-11-19T07:23:53.477

如果 Node 安装脚本不适合您（它不适合我），这是在 Debian Jessie 中更新 Node Js 的解决方案，取自 Thomas Ward 在[askubuntu.com](https://askubuntu.com/questions/786272/why-does-installing-node-6-x-on-ubuntu-16-04-actually-install-node-4-2-6)的回复（谢谢，伙计！）。

1.- 创建一个新文件：`/etc/apt/sources.list.d/nodesource.list`

您需要使用 sudo 创建此文件，但是当您创建文件时，请将其放入其中：

```
deb https://deb.nodesource.com/node_9.x jessie main
deb-src https://deb.nodesource.com/node_9.x jessie main 
```

然后，保存文件。（将 node_9.x 替换为所需的版本）

2.- 从 Nodesource 下载存储库的 GPG 签名密钥。否则，您可能会遇到以下`NO_PUBKEY`错误`apt-get update`：

```
curl -s https://deb.nodesource.com/gpgkey/nodesource.gpg.key | sudo apt-key add - 
```

3.-手动运行`sudo apt-get update`。

这会刷新来自 nodesource 存储库的数据，因此 apt 知道存在更新的版本。

如果您收到 NO_PUBKEY GPG 错误，则返回第 2 步

4.-**检查** `apt-cache policy nodejs` **输出**。

这不是由脚本完成的，但您要确保在输出中看到一个类似以下内容的条目：

```
Version table:
 *** 9.2.0-1nodesource1 0
        500 https://deb.nodesource.com/node_9.x/ jessie/main amd64 Packages
        100 /var/lib/dpkg/status
     0.10.29~dfsg-2 0
        500 http://ftp.debian.org/debian/ jessie/main amd64 Packages 
```

***如果您没有看到这样的条目，而只看到 0.10.29，请重新开始。否则，继续。***

5.- 安装 nodejs 二进制文件。现在您已经确认 9.x 在您的系统上可用，您可以安装它：`sudo apt-get install nodejs`

`nodejs -v`现在应该在输出中显示 v9.2 或类似内容（只要它以 v9 开头。那么您使用的是版本 9）。

* * *

## 回答 #35

> 赞同：-3
> 
> 时间：2020-02-12T07:36:16.403

如果它不起作用，请忘记上述所有答案，如果您安装了 nvm，只需运行以下命令

```
nvm alias 12.16.0 //add your required node version 
```*****

# java - Closing a Web Browser for a specific URL from the java program

> ID：10075997
> 
> 赞同：2
> 
> 时间：2012-04-09T16:03:28.670
> 
> 标签：java, awt

I want to close an open web browser/browser tab for a specific URL from the java program. I am able to open the URL in internet explorer using the Desktop API from java.

Below is the code snippet to open the browser in IE

```
java.awt.Desktop desktop = java.awt.Desktop.getDesktop();
desktop.browse(new java.net.URI("http://www.xyzz.com")); 
```

Now When I run the program again I want to make sure that there is no already instance where the above URL is opened in the browser. If it is so, close it and open it again in a new TAB or Browser window. This may look little weird requirement.

I know the basic approach should to get on to this issue is that, we need to identify the process and kill it and than again invoke the above code.

Any suggestion is welcome.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T16:19:49.113

我怀疑你可以用桌面做很多事情，因为你没有得到任何关于启动过程的参考。

我过去曾使用过这种技术（在 Java 6 之前，Desktop 不存在），因为它适用于 Process，你应该能够杀死它。

```
public static void openURL(String url) {
    StringBuilder sb = new StringBuilder();
    if (System.getProperty("os.name").indexOf("Windows")>-1) {
        String command = null;
        String urlLC = url.toLowerCase();
        if (urlLC.startsWith("https")) {
            command = WindowsCommandRetriever.getCommandForFileType("https");
        } else if (urlLC.startsWith("http")) {
            command = WindowsCommandRetriever.getCommandForFileType("http");
        }
        if (command == null) {
            command = WindowsCommandRetriever.commandForExtension(".html");
        }
        if (command.indexOf("%1") > -1) {
            sb.append(command.substring(0, command.indexOf("%1")));
            sb.append(url);
            sb.append(command.substring(command.indexOf("%1") + "%1".length()));
        } else {
            sb.append(command).append(' ');
            sb.append('"');
            sb.append(url);
            sb.append('"');
        }
    } else {
        sb.append("open ");
        sb.append(url);
    }
    try {
        final Process p = Runtime.getRuntime().exec(sb.toString());
        // Here you have the process. You can destroy it if you want
        // You need to figure out how you are going to handle this here.
    } catch (IOException e1) {
        e1.printStackTrace();
        System.err.println("Error while executing " + sb.toString());
    }
} 
```

和 WindowsCommandRetriever：

```
/*
 * (c) Copyright 2010-2011 AgileBirds
 *
 * This file is part of OpenFlexo.
 *
 * OpenFlexo is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * OpenFlexo is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with OpenFlexo. If not, see <http://www.gnu.org/licenses/>.
 *
 */

public class WindowsCommandRetriever {
    /**
     * 
     * @param extension
     *            the file extension (with or without the preceding '.')
     * @return the command to execute for the specified <code>extension</code> or null if there are no associated command
     */
    public static String commandForExtension(String extension) {
        String regKey = "HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\FileExts\\" + extension;
        String fileType = WinRegistryAccess.getRegistryValue(regKey, "ProgID", WinRegistryAccess.REG_SZ_TOKEN);
        if (fileType == null) {
            StringBuilder sb = new StringBuilder("cmd /C assoc ");
            sb.append(extension.startsWith(".") ? extension : "." + extension);

            ConsoleReader reader;
            try {
                Process process = Runtime.getRuntime().exec(sb.toString());
                reader = new ConsoleReader(process.getInputStream());
                reader.start();
                process.waitFor();
                reader.join();
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            } catch (InterruptedException e) {
                e.printStackTrace();
                return null;
            }
            String result = reader.getResult();
            if (result.indexOf("=") > -1) {
                fileType = result.substring(result.indexOf("=") + 1).trim();
            }
        }
        if (fileType == null) {
            return null;
        }
        return getCommandForFileType(fileType);
    }

    public static String getCommandForFileType(String fileType) {
        String path = "HKEY_CLASSES_ROOT\\" + fileType + "\\shell\\open\\command";
        return WinRegistryAccess.getRegistryValue(path, null, WinRegistryAccess.REG_SZ_TOKEN);
    }
}

/*
 * (c) Copyright 2010-2011 AgileBirds
 *
 * This file is part of OpenFlexo.
 *
 * OpenFlexo is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * OpenFlexo is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with OpenFlexo. If not, see <http://www.gnu.org/licenses/>.
 *
 */

import java.io.IOException;
import java.io.InputStream;
import java.io.StringWriter;

public class WinRegistryAccess {

    private static final String REGQUERY_UTIL = "reg query ";

    public static final String REG_SZ_TOKEN = "REG_SZ";

    public static final String REG_BINARY = "REG_BINARY";

    public static final String REG_DWORD_TOKEN = "REG_DWORD";

    /**
     * Returns the value for an attribute of the registry in Windows. If you want to now the processor speed of the machine, you will pass
     * the following path: "HKLM\HARDWARE\DESCRIPTION\System\CentralProcessor\0" and the following attribute name: ~MHz
     * 
     * @param path
     *            - the registry path to the desired value
     * @param attributeName
     *            - the name of the attribute or null for the default
     * @param attributeType
     *            - the type of attribute (DWORD/SZ/...) default is REG_SZ
     * @return - the value for the attribute located in the given path
     */
    public static String getRegistryValue(String path, String attributeName, String attributeType) {
        if (attributeType == null) {
            attributeType = REG_SZ_TOKEN;
        }
        try {
            if (!path.startsWith("\"")) {
                path = "\"" + path + "\"";
            }
            StringBuilder sb = new StringBuilder();
            sb.append(REGQUERY_UTIL);
            sb.append(path);
            sb.append(' ');
            if (attributeName != null) {
                sb.append("/v ");
                sb.append(attributeName);
            } else {
                sb.append("/ve");
            }
            Process process = Runtime.getRuntime().exec(sb.toString());
            ConsoleReader reader = new ConsoleReader(process.getInputStream());
            reader.start();
            process.waitFor();
            reader.join();
            String result = reader.getResult();
            int p = result.indexOf(attributeType);
            if (p == -1) {
                return null;
            }
            return result.substring(p + attributeType.length()).trim();
        } catch (Exception e) {
            return null;
        }
    }

    public static class ConsoleReader extends Thread {
        private InputStream is;

        private StringWriter sw;

        ConsoleReader(InputStream is) {
            this.is = is;
            sw = new StringWriter();
        }

        @Override
        public void run() {
            try {
                int c;
                while ((c = is.read()) != -1) {
                    sw.write(c);
                }
            } catch (IOException e) {
                ;
            }
        }

        String getResult() {
            return sw.toString();
        }
    }

    public static String getJDKHome() {
        String key = "\"HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\"";
        String currentVersionAtt = "CurrentVersion";
        String javaHomeAtt = "JavaHome";
        String res1 = getRegistryValue(key, currentVersionAtt, null);
        String res2 = getRegistryValue(key + "\\" + res1, javaHomeAtt, null);
        return res2;
    }

    public static void main(String s[]) {
        String key = "\"HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\Java Development Kit\"";
        String currentVersionAtt = "CurrentVersion";
        String javaHomeAtt = "JavaHome";
        String res1 = getRegistryValue(key, currentVersionAtt, null);
        String res2 = getRegistryValue(key + "\\" + res1, javaHomeAtt, null);
        System.out.println("CurrentVersion '" + res1 + "'");
        System.out.println("JavaHome '" + res2 + "'");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T16:10:22.460

这根本*不可能*，因为：

a.) 你不知道 desktop.browse() 启动了什么进程，

b.) 你不知道由 browse() 启动的进程还有*什么用处。*

忘了它。即使你能以某种方式破解它，它也永远不会可靠地工作。