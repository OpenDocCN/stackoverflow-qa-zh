# StackOverflow 问答 12214000-12214999

# objective-c - '无法识别的选择器发送到实例'？

> ID：12214005
> 
> 赞同：0
> 
> 时间：2012-08-31T11:02:37.107
> 
> 标签：objective-c, ios, xcode

我是 Objective C 的新手，无法理解为什么会出现此错误。我检查了其他类似的问题，但无法解决问题。

错误是“-[NSConcreteMutableData base64Decoded]: unrecognized selector sent to instance 0x6e15610”

这是问题代码的片段，其中对 base64Decoded 的调用导致了崩溃。

```
#import "DDData.h"

- (NSString *)decodeBase64:(NSString *)input
{
    NSData* dataDecoded = [[input dataUsingEncoding:NSUTF8StringEncoding] base64Decoded];    
    return [NSString stringWithUTF8String:[dataDecoded bytes]];
} 
```

在 DDData.h 中：

```
#import <Foundation/Foundation.h>

@interface NSData (DDData)

- (NSData *)base64Decoded;

@end 
```

和 DDData.m：

```
@implementation NSData (DDData)

- (NSData *)base64Decoded
{
     // Excluding function code, as it never gets to here
}

@end 
```

请注意，该项目已启用 ARC。关于这里可能出现什么问题的任何想法？谢谢。

编辑：我已经调整了上面的代码来帮助调试错误：

```
 NSData* dataDecoded = [input dataUsingEncoding:NSUTF8StringEncoding];
[dataDecoded base64Decoded]; 
```

dataDecoded 从 dataUsingEncoding 中获取一个值，当调用 base64Decoded 时它不为 nil。当我跨步到调用 base64Decoded 时，它崩溃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:08:43.863

在您的代码中插入一个断点并单步执行它，您将确切地看到它中断的位置。

您可能还想通过查看这些文件的目标成员资格来检查 DDData 文件是否正确包含在您的项目中，应该勾选 .m。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-27T05:03:55.863

SimonH 在其中一个子评论中正确指出了解决方案。我在 NSData 类别中定义的自定义方法遇到了同样的问题。该解决方案更好地解释了：

*   确保 .m 文件包含在项目 Build Phases->Compile Sources 中。
*   右键单击项目导航器中的 .m 文件，然后单击“显示文件检查器”。在 File Inspector 下确保您检查了您正在构建的目标，否则它将不会被包含在内，并且调用该方法将崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:10:08.737

如果您尝试在对象上执行未定义的方法，则会收到此类消息。试试这样：

```
NSData *dataDecoded = [[input dataUsingEncoding:NSUTF8StringEncoding] base64EncodedString]; 
```

据我所知，没有base64Decoded方法，但是有base64EncodedString。因此，当您将 base64Decoded 消息发送到您的 NSData 对象时，它不会被识别，因为它根本不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:30:44.837

请按照以下调试步骤解决它。

1.  在您的代码中放置断点并逐步检查断点在哪里。
2.  另外，检查您是否`DDData.m`在项目目标中正确添加了源文件。
3.  您还应该在使用之前检查对象是否存在。检查下面的示例代码。

    ```
    - (NSString *)decodeBase64:(NSString *)input {
         if(input) {
             NSData *utfData =  [input dataUsingEncoding:NSUTF8StringEncoding];
             if(utfDFata) {
                 NSData* dataDecoded = [utfDFata base64Decoded];    
                 return [NSString stringWithUTF8String:[dataDecoded bytes]];
             }
    } 
    ```

# ios - IOS，openGLES在不同的Z处绘制

> ID：12214011
> 
> 赞同：0
> 
> 时间：2012-08-31T11:03:14.397
> 
> 标签：ios, opengl-es, cocos2d-iphone

我正在使用 cocos2d 创建一个篮球游戏。当球落入网中时，我想在球的后面画一些网线，在球的前面画一些线。你怎么做到这一点？

```
CCSprite *sprite = [CCSprite spriteWithFile: @"ball.png"]; 
[self addChild: sprite z: 0]; 

-(void)draw
{
    [super draw];

    ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position );
    kmGLPushMatrix();

    glLineWidth(4.20f);
    ccDrawColor4B(220, 220, 220, 200);

    //Should draw behind 
    ccDrawLine(pos1, pos2);

    //Should draw infront
    ccDrawLine(pos2, pos3);

    kmGLPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T16:30:30.760

您可以使用不同的 CCLayers 或在 CCRenderTexture 上绘制线条。

# windows-phone-7 - 无法在 Windows Phone 7 模拟器中连接到互联网

> ID：12214012
> 
> 赞同：0
> 
> 时间：2012-08-31T11:03:19.130
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-7-emulator

我目前正在使用 Microsoft Visual Studio 2010 在 Windows Phone 7 中工作。但是使用 Phone 7 Emulator 时，我无法连接到互联网。

是否有任何配置问题，触发了这个问题。请帮助解决这个问题

我在启动 Windows 模拟器时附上了问题，关于启用/禁用代理设置，代理默认禁用。我附上了系统互联网选项的屏幕截图，并帮助我纠正这个问题 ![在此处输入图像描述](../Images/7b19f967135a144f943e32b8b9270dde.png)

问候 Rakesh Shankar.P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T19:40:33.713

这为我解决了问题

```
-Open a command prompt on the host computer with Administrator privileges.
-Type ipconfig /renew.
-Restart Windows Phone Emulator. 
```

来源：[https ://msdn.microsoft.com/en-us/library/windows/apps/ff754351(v=vs.105).aspx](https://msdn.microsoft.com/en-us/library/windows/apps/ff754351(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:13:31.593

几个月前我遇到了类似的问题。桌面 IE 正在运行，但模拟器没有互联网连接。我只是按照[这里给出的说明](http://msdn.microsoft.com/en-us/library/ff754351%28v=vs.92%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:39:53.197

我要检查的是代理设置。通常情况下，您可能会在那里遇到一些问题。另外，您使用的是什么版本的 Windows？

# c# - XNA SpriteBatch.Draw 3D 矢量 HLSL

> ID：12214019
> 
> 赞同：2
> 
> 时间：2012-08-31T11:03:35.623
> 
> 标签：c#, 3d, xna, hlsl, spritebatch

你们都知道 spriteBatch.draw() 调用的 layerDepth 值。我正在为我的 2D 游戏使用 3D 矢量。是否可以将 layerDepth 作为顶点着色器中的 z 值？或者我可以用 3d 矢量调用绘图函数吗？

我需要精灵的深度进行后处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:44:09.627

是的，`layerDepth`作为每个顶点的 Z 位置传递。

通常，此参数的范围限制在 0 到 1 之间。虽然我认为这只是由于`SpriteBatch`默认投影矩阵的近/远平面的位置。所以它可能不适用于你——我认为这些值没有被限制或任何东西。

# asp.net - 单击gridview的编辑按钮后，Gridview外的按钮不会触发

> ID：12214021
> 
> 赞同：0
> 
> 时间：2012-08-31T11:03:37.620
> 
> 标签：asp.net, gridview

我有一个gridview，我有两个按钮编辑和删除。单击编辑按钮后，我将值放入网格外部的文本框中，并显示更新和取消按钮。但这不会触发..

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
          <ContentTemplate>
                <asp:Panel ID="pnladdproduct" runat="server">
                           <div class="mws-form-col-1-8">
                                <asp:Label ID="Label11" runat="server" AssociatedControlID="btnAddProduct">&nbsp;</asp:Label>
                                <div class="mws-form-item large">
                                     <asp:Button ID="btnAddProduct" ValidationGroup="grpProduct" runat="server" CssClass="mws-button red" Text="Add" OnClick="btnAddProduct_Click" />
                                </div>
                           </div>
                </asp:Panel>
                <asp:Panel ID="pnlUpdateProduct" runat="server">
                           <div class="mws-form-col-1-8">
                                <asp:Label ID="Label12" runat="server" AssociatedControlID="btnUpdateProduct">&nbsp;</asp:Label>
                                <div class="mws-form-item large">
                                     <asp:Button ID="btnUpdateProduct" runat="server" CausesValidation="False" CssClass="mws-button blue" Text="Update" OnClick="btnUpdateProduct_Click" />
                                </div>
                          </div>
                </asp:Panel>
                <asp:Panel ID="pnlCancel" runat="server">
                           <div class="mws-form-col-1-8">
                                <asp:Label ID="Label13" runat="server" AssociatedControlID="btnCancelUpdate">&nbsp;</asp:Label>
                                <div class="mws-form-item large">
                                     <asp:Button ID="btnCancelUpdate" CausesValidation="False" runat="server" CssClass="mws-button gray" Text="Cancel" OnClick="btnCancelUpdate_Click" />
                                 </div>
                            </div>
                 </asp:Panel>
                 <div class="mws-form-col-8-8">
                      <asp:GridView ID="grdProduct" ShowHeaderWhenEmpty="True" CssClass="mGrid" runat="server" AutoGenerateColumns="False" AllowPaging="True" PagerStyle-CssClass="pgr" AlternatingRowStyle-CssClass="alt" OnPageIndexChanging="grdProduct_PageIndexChanging" OnRowDeleting="grdProduct_RowDeleting" OnRowEditing="grdProduct_RowEditing">
                                    <Columns>
                                             <asp:BoundField DataField="Name" HeaderText="Product" SortExpression="Product" />
                                             <asp:BoundField DataField="Quantity" HeaderText="Quantity" SortExpression="Quantity" />
                                             <asp:BoundField DataField="Rate" HeaderText="Rate" SortExpression="Rate" />
                                             <asp:BoundField DataField="Amount" HeaderText="Amount" SortExpression="Amount" />
                                             <asp:ButtonField ButtonType="Image" CommandName="Edit" HeaderText="Edit" ImageUrl="~/css/icons/16/edit.png" ShowHeader="True" Text="Edit" />
                                             <asp:ButtonField ButtonType="Image" CommandName="Delete" HeaderText="Delete" ImageUrl="~/css/icons/16/delete.png" ShowHeader="True" Text="Delete" />
                                             <asp:TemplateField HeaderText="HiddenColumn">
                                                  <HeaderTemplate>
                                                  </HeaderTemplate>
                                                  <ItemTemplate>
                                                               <asp:HiddenField ID="hdfProductID" runat="server" Value='<%# Bind("ProID") %>' />
                                                  </ItemTemplate>
                                             </asp:TemplateField>
                                    </Columns>
                                              <EmptyDataTemplate>
                                                    No Products Added !!
                                              </EmptyDataTemplate>
                      </asp:GridView>
                      <div class="mws-form-row inline">
                           <asp:Label ID="Label15" runat="server" AssociatedControlID="txtQuantity">Total Amount</asp:Label>
                           <div class="mws-form-item medium">
                                <asp:TextBox ID="txtTotalAmount" BackColor="Beige" BorderColor="red" ReadOnly="True" CssClass="mws-textinput" runat="server"></asp:TextBox>
                           </div>
                      </div>
                 </div>
          </ContentTemplate>
          <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="btnUpdateProduct"  EventName="Click"/>
                    <asp:PostBackTrigger ControlID="btnCancelUpdate" />                                        
          </Triggers>
</asp:UpdatePanel> 
```

**服务器端代码..**

```
 protected void grdProduct_RowEditing(object sender, GridViewEditEventArgs e)
    {

        Session["proID"] = StepGetHiddenValuesFromGridControl(e.NewEditIndex);
        txtQuantity.Text = grdProduct.Rows[e.NewEditIndex].Cells[1].Text;
        txtRate.Text = grdProduct.Rows[e.NewEditIndex].Cells[2].Text;
        txtAmount.Text = grdProduct.Rows[e.NewEditIndex].Cells[3].Text;
        txtQuantity.BackColor = Color.Beige;
        txtRate.BackColor = Color.Beige;
        txtAmount.BackColor = Color.Beige;
        //pnladdproduct.Visible = false;
        //pnlUpdateProduct.Visible = true;
        //pnlCancel.Visible = true;
   }

protected void btnUpdateProduct_Click(object sender, EventArgs e)
    {
        // this code not firing
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:51:14.987

我认为不需要触发器。

# sql-server - 日期时间部分的 SQL Server 索引，例如 YEAR、MONTH

> ID：12214029
> 
> 赞同：3
> 
> 时间：2012-08-31T11:04:11.850
> 
> 标签：sql-server, sql-server-2008, tsql, indexing

是否可以在 和 等部件`DateTime`上设置索引？例如，我有以下 T-SQL 查询：`DATEPART(YEAR, bp.[CreatedOn])``DATEPART(MONTH, bp.[CreatedOn])`

```
DECLARE @year AS INT = 2012;
DECLARE @month AS INT = 8;

SELECT bp.Title, bp.CreatedOn FROM BlogPosts bp
WHERE (DATEPART(YEAR, bp.[CreatedOn]) = @year) AND (DATEPART(MONTH, bp.[CreatedOn]) = @month)
ORDER BY bp.CreatedOn; 
```

这是我的执行计划：[https ://gist.github.com/3551450](https://gist.github.com/3551450)

目前，记录并不多，因此在性能方面不是一个大问题，但记录会随着时间的推移而增长。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T11:07:31.670

您最好使用 datetime 字段构建标准：

```
declare @startMonth datetime = '20120801'

SELECT bp.Title, bp.CreatedOn 
  FROM BlogPosts bp
 WHERE bp.[CreatedOn] >= @startMonth
   AND bp.[CreatedOn] < dateadd (month, 1, @startMonth)
ORDER BY bp.CreatedOn; 
```

这样查询执行器将能够在 CreatedOn 上使用索引。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T11:37:12.143

是的，是否可以将索引放在年份和月份上。这是一个例子：

```
create table testt(d datetime)
alter table testt add year as year(d) PERSISTED -- after marc_s advise. Thx
alter table testt add month as month(d) PERSISTED --

create index idx_year on testt(year)
create index idx_month on testt(month) 
```

但是，我总是会使用 Nikola 解决方案的变体，所以 +1 给 Nikola。

这是您可以将月份和年份重写为日期的方法：

```
DECLARE @year AS INT = 2012;
DECLARE @month AS INT = 8;
DECLARE @from DATE = dateadd(month, (@year-1900)*12 + @month - 1, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:04:46.017

我建议您将日期部分存储在不同的字段中。显然，这是您的域中存在的要求，因为它需要成为您的模型的一部分。

您失去的是您必须为加载的每个模型构建日期时间，或者设置值，但这将是几个 CPU 周期。

# xpath - 检查黄瓜测试中链接的正确方法是什么？

> ID：12214030
> 
> 赞同：1
> 
> 时间：2012-08-31T11:04:15.617
> 
> 标签：xpath, cucumber

我一直无法找到这个问题的答案。我想在 Cucumber 中编写一个简单的步骤来检查页面上是否存在链接，并且它具有正确的文本和 href。像这样的东西：

```
Then /^I see the page with link "(.*?)" to "(.*?)"$/ do |link,url|
  page.should have_xpath("//a[text()='#{link}',@href='#{url}']")
end 
```

除了那行不通。xpath 语法不正确，我一直在努力寻找语法的良好解释。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T01:20:10.333

我相信你想要的 XPath 是

```
page.should have_xpath("//a[text()='#{link}' and @href='#{url}']") 
```

我不熟悉 Cucumber，但如果它依赖`has_link?`Capybara，@shioyama 建议的替代方案更容易阅读：

```
page.should have_link(link, :href => url) 
```

然而，它也看似简单。使用`has_link?`，请记住：

*   它搜索子字符串（您的 XPath 示例搜索完全匹配）。
*   它在文本值中搜索“链接”，但*也在*id、title 和 img alt 字段中搜索。
*   如果您将其他属性指定为选项，例如`:text`or `:class`，它们将被静默忽略。您可能认为您正在缩小测试范围，但事实并非如此。

考虑以下 HTML：

```
<a href="/contacts/3" data-confirm="Are you sure?" data-method="delete"
   title="Delete Contact 3">Delete</a> 
```

我很惊讶地发现，因为`has_link?`搜索 的子字符串 `title`，以下*两个*条件都匹配该链接：

```
has_link?("Contact 3", href: "/contacts/3")
has_link?("Delete", href: "/contacts/3") 
```

我目前正在试验一个自定义`has_exact_link`匹配器，它通过显式格式化 XPath 来消除歧义。它只搜索文本值的完全匹配，而不是子字符串，以及`:href`引发错误以外的任何选项：

**规范/支持/matchers.rb**

```
# Check for an <a> tag with the exact text and optional :href and  :count.
# Same param syntax as has_link, but it only matches the link's TEXT, not id,
# label, etc., and it doesn't match substrings.
def has_exact_link?(locator, options={})

  # Subtract :href, :count from array of options.keys
  # Raise error if any options remain
  raise ArgumentError.new \
    "options, if supplied, must be a hash" if !options.is_a?(Hash)
  raise ArgumentError.new \
    "has_exact_link only supports 'href' and 'count' as options" unless
    (options.keys - [:href] - [:count]).empty?
  href = options[:href]
  xpath = href ? "//a[normalize-space(text())='#{locator}' and @href='#{href}']" :
                 "//a[normalize-space(text())='#{locator}']/@href"
  # pass original options has so test results will show options if present
  # has_xpath apparently ignores :href in options but will use :count.
  has_xpath?(xpath, options)

end 
```

* * *

**2012 年 9 月 19 日更新：**在上面 添加了“normalize-space” `has_exact_link`，因此它会像 HTML 一样忽略前导和尾随空格。这是必需的，例如，您的链接文本与`<a>`标签位于不同的行，例如

```
<a href="/contacts/3">
  Contact 3
</a> 
```

它仍然不匹配子字符串。要匹配上述内容，您必须指定`has_exact_link("Contact 3")`，而不仅仅是`has_exact_link("Contact")`。

* * *

**2012 年 9 月 20 日**更新另一个`has_exact_link`更新，同上。现在它对`options`参数进行类型检查，并处理`:count`选项以及`:href`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:18:54.683

那将是：

```
page.should have_link(link, :href => url) 
```

有关详细信息，请参阅[水豚规范](https://github.com/jnicklas/capybara/blob/master/lib/capybara/spec/session/has_link_spec.rb)。

# python - Windows 中的异步轮询 - Python

> ID：12214034
> 
> 赞同：3
> 
> 时间：2012-08-31T11:04:23.153
> 
> 标签：python, sockets, asyncore

由于一些“*错误的文件名描述符*”错误，在服务器代码的高负载期间，我需要使用[`poll()`](https://docs.python.org/3.7/library/select.html#select.poll)而不是[`select()`](https://docs.python.org/3.7/library/select.html#select.select)在我的 .`AsyncServer`

 *这是我在 Linux 中提出的（满足我的需要）：

```
 asyncore.loop(use_poll=True) 
```

在 Windows 环境中，`poll()`据我所知，没有，而是[`WSAPoll`](https://docs.microsoft.com/en-us/windows/desktop/api/winsock2/nf-winsock2-wsapoll)存在，但 Python 不支持。

有什么方法可以`poll()`在 Windows 中使用吗？或者如何在windows环境下解决这个问题。*

# jquery - HTML5 弹出框

> ID：12214044
> 
> 赞同：0
> 
> 时间：2012-08-31T11:04:56.157
> 
> 标签：jquery, css, html

我希望在我的简单 HTML 5/Javascript/Jquery 页面中编写一个弹出框，并想知道是否有“正确”的方法来做到这一点。

该框的目的是成为一个询问几个问题的表单，然后在单击按钮时消失。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:06:53.177

试试 jquery ui 对话框。[jQuery 对话框](http://jqueryui.com/demos/dialog/)

确保包含 Jquery 和 jquery ui 资源（JS、CSS 文件）。为了得到想要的结果。

您可以像这样选择 Source 作为 CDN

```
<script src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.1.min.js' type='text/javascript'></script>

<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js" type="text/javascript"></script>

<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/base/jquery-ui.css" type="text/css" media="all" />

<div id="yourDiv">
some content
</div> 
```

//jQuery

```
$(function(){
  $('#yourDiv').dialog({
     modal:true
}); // setup dialog. 

$('#yourDiv').dialog('open');//open dialog
}); 
```

# tsql - T-SQL 未执行 WHERE 子句 SSRS 的第二部分

> ID：12214048
> 
> 赞同：0
> 
> 时间：2012-08-31T11:05:02.290
> 
> 标签：tsql, reporting-services, where-clause

我有一个从存储过程运行的 SSRS 报告。我有 2 个必须选择的参数。My first parameter works perfectly, but when the 2nd parameter is chosen (Rep) it gets ignored by the report and returns all the Reps.

```
@Town Varchar(100)
,@Rep Varchar(100)

    select 
    a.Customer
    ,a.CustName
    ,a.Rep
    ,a.Town
    ,a.Qty
    ,a.SalesType
    ,b.Qty1
    ,c.Qty2
    ......
    from #1 a
    left join #2 b
    on a.Rep = b.Rep
    and a.Town = b.Town
    and a.Customer = b.Customer
    and a.SalesType = b.SalesType
    left join #3 c
    ..........
    WHERE ('ALL' IN (@Town))    OR     (a.Town IN (@Town)) 
    and ('ALL' IN (@Rep))    OR     (a.Rep IN (@Rep)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:08:54.647

在这里猜测，但我假设您希望每个子句 for`@Town`和`@Rep`be 作为一个组进行评估。为此：

```
WHERE ('ALL' IN (@Town)    OR     a.Town IN (@Town)) 
and ('ALL' IN (@Rep)    OR     a.Rep IN (@Rep)) 
```

正如您所拥有的，由于每个子句都是独立的，您将获得短路行为。

# javascript - 如何向网页添加可调整大小、可拖动的叠加层？

> ID：12214056
> 
> 赞同：-1
> 
> 时间：2012-08-31T11:05:38.653
> 
> 标签：javascript, google-chrome, userscripts

我想制作一个用户脚本，可以在浏览器游戏上放置一个***可调整大小***、可***拖动的叠加层。***只有我不知道如何开始。

它基本上必须是一个应用了一些样式和 javascript 的 div，包含一个`<iframe>`. 我还想将游戏屏幕中显示的字符串（HTML5，而不是 Flash）传递给 iFrame，但这可以通过使用`$_POST`和`$_GET`参数来实现，因为由于某种“跨域策略”。

有人可以帮我上路吗，举个基本的 Chrome 用户脚本的例子，这将允许我将覆盖 div 的一些 HTML 代码注入到游戏中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:39:48.810

为什么不使用现有的 Javascript 框架（必须喜欢 em'）？我知道这已经[一次](http://jqueryui.com/demos/)又一次地完成[了](http://www.kendoui.com/web.aspx)[。](http://dev.iceburg.net/jquery/jqDnR/)我觉得自己做这种 Javascript 可能不值得你花时间。通常当我看到这样的事情时，我会提供框架的帮助。检查其中一个并没有什么坏处，您最终可能会为自己节省大量时间来编写以前已经完成并经过时间测试的东西。

# html - 拖放文本文件

> ID：12214057
> 
> 赞同：9
> 
> 时间：2012-08-31T11:05:42.000
> 
> 标签：html, text, drag-and-drop

我希望通过其内容或完整位置显示删除的文本文件，以便我可以将该位置的内容加载到“drop_zone”中。

这是我到现在为止的。我只能访问文件名：

```
<html>
<head>
  <title></title>
</head>
<body>
<textarea id="drop_zone">Drop files here</textarea>
<output id="list"></output>

<script>
  function handleFileSelect(evt) {
    evt.stopPropagation();
    evt.preventDefault();

    var files = evt.dataTransfer.files; // FileList object.
    document.getElementById('drop_zone').innerHTML = files[0].name;
  }

  function handleDragOver(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
  }

  // Setup the dnd listeners.
  var dropZone = document.getElementById('drop_zone');
  dropZone.addEventListener('dragover', handleDragOver, false);
  dropZone.addEventListener('drop', handleFileSelect, false);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T12:06:28.613

这是最终代码：

```
<html>
<head>
  <title></title>
</head>
<body>
<textarea id="drop_zone">Drop files here</textarea>
<script>
  function handleFileSelect(evt) {
    evt.stopPropagation();
    evt.preventDefault();

    var files = evt.dataTransfer.files; // FileList object.
    var reader = new FileReader();  
    reader.onload = function(event) {            
         document.getElementById('drop_zone').value = event.target.result;
    }        
    reader.readAsText(files[0],"UTF-8");
  }

  function handleDragOver(evt) {
    evt.stopPropagation();
    evt.preventDefault();
    evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
  }

  // Setup the dnd listeners.
  var dropZone = document.getElementById('drop_zone');
  dropZone.addEventListener('dragover', handleDragOver, false);
  dropZone.addEventListener('drop', handleFileSelect, false);
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T11:10:16.610

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)应该是一个很好的资源。您需要使用 FileReader 将文件的内容作为字符串读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:12:18.450

由于安全限制，如果没有设置适当权限的 Java 小程序，页面将无法加载文件内容；即使那样，也不太可能。

但是，这并不是说不可能。只需将文件上传到服务器并将内容回显到浏览器即可。这就是许多文本编辑类型的 Web 应用程序的功能。

如何实现这取决于您。

此外，正如 Maz 所指出的，您还可以使用内置 API 来帮助您做您想做的事情。但是请注意，此解决方案不一定是跨浏览器兼容的。

# java - 没有任何内容的对象/空对象

> ID：12214059
> 
> 赞同：0
> 
> 时间：2012-08-31T11:05:50.360
> 
> 标签：java, list, collections, map, set

在开发时，我试图返回一个空*List*。

```
public Collection<?> getElements() {
    // return elements
} 
```

我寻找了一种简单的方法，我的第一个想法是创建例如一个没有任何元素的*ArrayList并返回它。*像下面的例子：

```
public Collection<?> getElements() {
    return new ArrayList<?>();
} 
```

对我来说，空列表的开销太大了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:05:50.360

对于上述“问题”，有一个非常简单的解决方案：

```
public Collection<?> getElements() {
    return Collections.EMPTY_LIST;
} 
```

这将返回一个空列表。

**注意：**
它返回一个**不可变**对象！如果您需要一个不可编辑的对象，您只能使用它。

**类型安全**
如果你想获得一个类型安全的列表，你应该使用下面的例子 [ [1](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#emptyList%28%29) ]：

```
List<String> s = Collections.emptyList(); 
```

支持三种接口：

*   *清单*：

    ```
    List l = Collections.EMPTY_LIST;
    List<String> s = Collections.emptyList(); 
    ```

*   *地图*：

    ```
    Map m = Collections.EMPTY_MAP;
    Map<String> ms = Collections.emptyMap(); 
    ```

*   *设置*：

    ```
    Set s = Collections.EMPTY_SET;
    Set<String> ss = Collections.emptySet(); 
    ```

**注意：**

> 此方法的实现不需要为每个调用创建单独的 XXX 对象。使用此方法的成本可能与使用同名字段的成本相当。（与此方法不同，该字段不提供类型安全。）

# java - JFileChooser 文件名

> ID：12214062
> 
> 赞同：3
> 
> 时间：2012-08-31T11:06:00.110
> 
> 标签：java, swing, jfilechooser

我有一个问题`JFileChooser`。我将它嵌入到自定义对话框中，自定义对话框有自己的确定和取消按钮，并且对话框不可更改。

因此，我设置`JFileChooser.setControlButtonsAreShown`为`false`隐藏按钮。单击自定义对话框的“确定”按钮后，我调用`JFileChooser.getSelectedFile`以获取所选文件。

但有一个问题。如果我选择带有文件列表的目录或文件，或者单击主页或桌面等特殊按钮，那么一切正常。所以我在选择器中选择了一个文件（它用文件名更新文件名字段）。

但是现在，如果我通过单击文件名文本字段并编辑文件名来更改文件名，那么当我随后调用时，`JFileChooser.getSelectedFile`我会得到原始文件的名称，而不是反映我输入的新文件名的修改后的文件对象。

所以我怀疑单击`JFileChooser`“批准”按钮会导致返回的文件对象被更新。我的怀疑还基于这样一个事实，即如果我侦听类型的 PropertyChangeEvent，`SELECTED_FILE_CHANGED_PROPERTY`则仅在使用选择器或特殊按钮时才调用它，而不是在发生文本字段结束编辑时调用。

有谁知道这个问题的解决方案？我也试过`JFileChooser.approveSelection`，但没有明显效果。

谢谢你。

# iphone - 从 iOS 5.1 中的警报按钮操作打开设置 → Wifi

> ID：12214063
> 
> 赞同：0
> 
> 时间：2012-08-31T11:06:00.250
> 
> 标签：iphone, objective-c, ios, ipad

我想使用以下 URL 方案从我的应用程序的 alertView 按钮操作中打开设置。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General"]];
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=General&path=Network"]]; 
```

它适用于 iOS 5.0，但不适用于 5.1 及更高版本。

任何替代方法来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:12:06.530

根本没有。Apple 在 SDK 5.1 中禁用了此 URL 方案。没有越狱是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:14:13.987

iOS 5.1 及更高版本不再支持此功能。没有直接的方法可以做到这一点。

# mysql - JPA / Eclipselink问题在具有外键关系的MySQL中持久化表

> ID：12214064
> 
> 赞同：0
> 
> 时间：2012-08-31T11:06:01.490
> 
> 标签：mysql, jpa, eclipselink, foreign-key-relationship, persist

几乎一整天，我都面临着一个涉及 JPA/Eclipselink 和 MySql 的问题。在我的 MySQL 数据库中，我通过以下方式配置了两个表：

```
Table: Member

memberID int(11) PK AI
desiresID int(11)
email
firstName
lastName
password

Table: MemberDesire

desireID int(11) PK AI

with ForeignKey constraint between Member and MemberDesire
using Member.desireID and MemberDesire.desireID 
```

在 Eclipse 中，我让这些表自动导入，它可以完美地识别链接。这两个类如下所示：

```
 @Entity
    public class Member implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
private int memberID;

private String email;

private String firstName;

private String lastName;

private String password;

//bi-directional many-to-one association to MemberDesire
@ManyToOne(cascade=CascadeType.PERSIST)
@JoinColumn(name="desiresID")
private MemberDesire memberDesire; 
```

和：

```
 @Entity
    @Table(name="MemberDesires")
    public class MemberDesire implements Serializable {
private static final long serialVersionUID = 1L;

@Id
private int desireID;

private int maximumAge;

private int minimumAge;

//bi-directional many-to-one association to Member
@OneToMany(mappedBy="memberDesire")
private List<Member> members; 
```

现在，当我尝试将包含 MemberDesire 的新成员持久保存到数据库时，会出现以下错误：

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`test`.`member`, CONSTRAINT `desireKey` FOREIGN KEY (`desiresID`) REFERENCES `MemberDesires` (`desireID`) ON DELETE NO ACTION ON UPDATE NO ACTION)
Error Code: 1452
Call: INSERT INTO MEMBER (EMAIL, FIRSTNAME, LASTNAME, PASSWORD, desiresID) VALUES (?, ?, ?, ?, ?,)
    bind => [5 parameters bound] 
```

持久化本身是通过这种方式完成的：

```
EntityManager em = Persistence

                .createEntityManagerFactory("TestProject")
                .createEntityManager();
        EntityTransaction entityTransaction = em.getTransaction();

        entityTransaction.begin();

        member = new Member();
        member.setFirstName(firstName);
        member.setLastName(lastName);
        member.setEmail(email);
        member.setPassword(password);

        MemberDesire desire = new MemberDesire();
        member.setMemberDesire(desire);

        List<Member> members = new ArrayList<Member>();
        members.add(member);
        desire.setMembers(members);

        em.persist(member);

        entityTransaction.commit();

        em.close(); 
```

我将非常感谢您能给我的任何帮助！！谢谢 ：）

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:16:12.920

MemberDesire 未设置为生成主键，因此当您调用

```
 MemberDesire desire = new MemberDesire();
 member.setMemberDesire(desire); 
```

it should result in an invalid MemberDesire entity with a null pk being associated to the member. You can turn EclipseLink logging level to Finest to see the SQL and the parameters that are issued which might help prove the problem. If you are trying to associate an existing MemberDesire to a new Member, you should use the em.find() api or query for the entity so that you can associate the managed instance instead of creating a new object.

# django - 如何在 Django 的装置中定义每个用户的权限？

> ID：12214069
> 
> 赞同：0
> 
> 时间：2012-08-31T11:06:18.030
> 
> 标签：django, django-authentication, user-permissions

我有几个模型，包括`User`和`Group`来自`contrib.auth`。我运行 Django 1.4.1。

这些用户似乎都没有权限：

```
In [1]: User.objects.get(id=1).user_permissions.all()
Out[1]: [] 
```

因此，这意味着用户没有权限，并且用户组中没有权限。但

```
In [2]: User.objects.get(id=1).has_perm('change_profile')
Out[2]: True 
```

（预期`False`）

如何仅显式设置权限？我需要为此更改身份验证后端吗？

在设置中，仅设置模型后端：

```
In [23]: settings.AUTHENTICATION_BACKENDS
Out[23]: ('django.contrib.auth.backends.ModelBackend',) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:07:40.507

问题是用户是超级用户 ( `is_superuser`)，任何权限检查都会返回 True。

# php - Symfony2：致命错误：未找到接口“Knp\Menu\Matcher\Voter\VoterInterface”

> ID：12214070
> 
> 赞同：0
> 
> 时间：2012-08-31T11:06:21.717
> 
> 标签：php, symfony, twitter-bootstrap, composer-php

我想将 twitter-bootstrap 集成到我的 Symfony2 项目中并尝试使其工作，我遵循的文档是[BootstrapBundle](https://github.com/phiamo/MopaBootstrapBundle/blob/master/Resources/doc/1-installation.md)。安装所有依赖项设置后`composer.json`，我收到此错误：

> 致命错误：在 /var/www/cv-editor/vendor/mopa/bootstrap-sandbox-bundle/Mopa/Bundle/BootstrapSandboxBundle/Navbar/Example/Voter/RequestVoter 中找不到接口“Knp\Menu\Matcher\Voter\VoterInterface” .php 在第 12 行

你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:08:36.943

调试后，我发现 MopaBootsrapBundle 的依赖项存在问题，它适用于 Knp-menu-bundle 版本 1.2

# c++ - 以编程方式 MFC 选项卡顺序

> ID：12214077
> 
> 赞同：3
> 
> 时间：2012-08-31T11:06:49.330
> 
> 标签：c++, visual-studio, mfc

我想知道有没有办法在运行时而不是设计时设置标签顺序？这是至关重要的，因为在初始化时某些字段在对话框中被隐藏或重新排列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:12:33.193

您可以使用 Win32 API 来实现：

```
SetWindowPos(hNewControl, hOldControl, 0, 0, 0, 0, SWP_NOMOVE|SWP_NOSIZE); 
```

有关更多详细信息，请参阅此[问题](https://stackoverflow.com/questions/50236/how-do-you-programmatically-change-the-tab-order-in-a-win32-dialog)。

# mysql - Codeigniter Active 记录复杂查询

> ID：12214080
> 
> 赞同：0
> 
> 时间：2012-08-31T11:06:55.600
> 
> 标签：mysql, codeigniter, activerecord

**> * *1\. 我需要在活动记录中写这个 ****

我需要加入这3张表，但加入的条件非常有选择性

```
$this->db->select(name);
$this->db->from('table0');
$this->db->join('table1','(table1.id=0 AND table0.feild1 = table1.feild1) OR (table1.id=1 AND table0.feild2 = table1.feild2)') // <--- how to write this is my question 
```

我可以做一个简单的连接，但主要问题是实现我上面提到的连接条件。这也是非常非常的一小部分！大查询，所以我真的无法将其更改回本机 sql 查询，例如：

```
$this->db->query('//entire sql query'); //cant do this, need to write ACTIVE RECORDS 
```

当我写活动记录时，萤火虫给我一个错误说：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ') 附近使用的正确语法或

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:00:24.797

老实说，我不知道这是可能的。CI 不使用真正的 Active Record，因此每种方法都有非常严格的参数，我看不到任何可以被欺骗来执行您需要的任务的方法。

我会尝试重新编写您的查询：

```
$this->db->select(name);
$this->db->from('table0');
$this->db->join('table1','(table1.id=0 AND table0.feild1 = table1.feild1)', LEFT);
$this->db->join('table1','(table1.id=1 AND table0.feild2 = table1.feild2)', LEFT);
$this->db->where('(table1.id=0 AND table0.feild1 = table1.feild1)');
$this->db->or_where('(table1.id=1 AND table0.feild2 = table1.feild2)'); 
```

我相信这个查询会返回正确的值，但你肯定会想要彻底测试它。希望这至少可以为您指明正确的方向。

# grails - 弹簧安全用户界面 0.2

> ID：12214082
> 
> 赞同：1
> 
> 时间：2012-08-31T11:07:00.950
> 
> 标签：grails, spring-security

我决定在我的 grails 应用程序中使用 Spring Security UI。它使用注册布局，但我希望它使用我的主布局。当我改变它的主要布局时，我失去了所有花哨的登录屏幕。

有没有办法可以使用我主要的 css 以及寄存器布局的精美外观？

另外我一直在网上搜索，找不到任何关于自定义 Spring 安全 UI 的好的文档

我对在 grails 中创建 web UI 非常陌生，任何关于在哪里查看的想法都会很棒，因为我有很多“让东西变得漂亮”的事情要做。

对于其他查看此内容的人，我找到了一个非常好的网站来帮助您理解 [http://mrhaki.blogspot.co.uk/2011/03/grails-goodness-applying-layouts-in.html](http://mrhaki.blogspot.co.uk/2011/03/grails-goodness-applying-layouts-in.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:01:27.113

Spring security UI 使用资源插件来配置其外观。它配置了三个您可以使用的“模块”：`spring-security-ui`，`register`并且`ajax-login`您需要在 gsp 标头中包含这些模块，例如

```
<r:require modules="spring-security-ui"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:54:42.760

我打开另一个答案，因为我无法在评论中格式化我的代码。

您可以创建模块并将其注册到您的页面或图层中。资源在 grails-app/config 目录中创建。您创建一个文件 YourModuleResources.groovy 并将您的 css 放入其中。例如：

```
modules = {
    mystyles {
        resource url: 'js/myjavascripts.js'
        resource url: 'css/mystyle1.css'
        resource url: 'css/mystyle2.css'
    }
} 
```

然后你可以使用

```
<r:require modules="mystyles"/> 
```

# ruby-on-rails-3 - 使用 Rails 3.2 进行图像标记

> ID：12214087
> 
> 赞同：0
> 
> 时间：2012-08-31T11:07:21.670
> 
> 标签：ruby-on-rails-3, tagging

我有一个图像模型，想为图像分配不同的、预先选择的标签。我不想使用插件。

这是我的图像模型

```
class Image < ActiveRecord::Base
  attr_accessible :date, :description, :name, :size, :image, :tag
end 
```

理想情况下，我想在创建或编辑图像时设置具有不同标签的复选框。假设标签是“蓝色”、“红色”和“黄色”。

我必须为不同的标签创建一个新模型吗？目前我在 new.html.haml 文件中

```
%div.field
  = f.label "Tag"
    %br/
  = f.select :tag, options_for_select(["blue", "red", "yellow"]), {:multiple => true} 
```

但我只能选择一个标签，我更喜欢为每个标签做一个复选框（更容易更正选择）。此外，我不确定是否应该使用不同的标签创建一个新模型并创建关系，例如 images belongs_to :tag 和 tag has_many :images

有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:10:45.973

好的，至于许多其他问题，解决方案是 Railscasts：

[http://railscasts.com/episodes/167-more-on-virtual-attributes](http://railscasts.com/episodes/167-more-on-virtual-attributes)

# .htaccess - W3C 验证返回 403 Forbidden

> ID：12214088
> 
> 赞同：2
> 
> 时间：2012-08-31T11:07:26.687
> 
> 标签：.htaccess, w3c-validation, http-status-code-403

我的网站有一个奇怪的问题：当我尝试使用 W3C Validator 验证 HTML 时，我收到一条 403 Forbidden 消息并且我无法检查它。我尝试了另一个验证器并且它有效......
但是当 Disqus 尝试加载时，在我网站的 wordpress 博客部分中出现另一个 403 错误。

我更改了文件权限，但没有任何改变......但是网站在浏览器中运行良好，它加载没有任何错误！

我也检查过`robots.txt`，`.htaccess`但没有什么可以阻止该网站。这是我的根`.htaccess`文件：

```
SetEnv PHP_VER 5
SetEnv REGISTER_GLOBALS 0
DirectoryIndex index.php

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^apps/wishonlist/appstore(/)?$ http://clk.tradedoubler.com/click?p=24373&a=1947754&url=http://itunes.apple.com/it/app/wishonlist/id418044882?mt=8&uo=4&partnerId=2003 [R=301,L]
</IfModule> 
```

我怎么解决这个问题？
非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-12T14:10:49.597

我不确定您是如何尝试验证您的网站的；通过手动输入或以编程方式（例如使用 PHP）。

在我的情况下，我试图使用 PHP 验证我的网站，并从验证器（使用[get_headers](http://php.net/manual/en/function.get-headers.php)）得到 403 Forbidden 响应。我通过设置 User-Agent 标头解决了这个问题，如下所示：

```
$curl = curl_init();

curl_setopt($curl, CURLOPT_URL, "http://validator.w3.org/check?uri=" . urlencode($url));
curl_setopt($curl, CURLOPT_NOBODY, true);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HEADER, true);
// Alternative: curl_setopt($curl, CURLOPT_USERAGENT, '...');
curl_setopt($curl, CURLOPT_HTTPHEADER, array("User-Agent: Some user-agent here"));

$headers = curl_exec($curl); 
```

这让我得到了很好的 200 OK 响应

# android - 如何在 android 中为 java 和本机 c/c++ 代码构建 APK

> ID：12214090
> 
> 赞同：1
> 
> 时间：2012-08-31T11:07:35.363
> 
> 标签：android

这是我在 android 中为本机代码构建 APK 的第一次体验。当我像在 android 中为 java 代码构建 APK 时，它仅包含 Java 代码，在 c/c++ 中实现的功能在我安装 apk 时未反映在构建中设备。

请同样指导我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:10:18.080

你可以使用Android-NDK

[**安卓NDK**](http://developer.android.com/tools/sdk/ndk/index.html)

**NDK**是一个工具集，可让您使用本机代码语言（例如`C`和`C++`. 对于某些类型的应用程序，这可能会有所帮助，以便您可以重用以这些语言编写的现有代码库并可能提高性能。

# iis-7 - iis7 dns少连接问题上的asp经典

> ID：12214091
> 
> 赞同：0
> 
> 时间：2012-08-31T11:08:03.247
> 
> 标签：iis-7, asp-classic, dns

我无法获得与 Ms Access db 的 dns 更少的连接来在这里工作代码。

在 dbconnection.asp 文件中是这个

```
Dim MM_IMT_STRING
''MM_IMT_STRING = "dsn=EDA;"
MM_IMT_STRING =("Driver={Microsoft Access Driver (*.mdb)};DBQ=C:\inetpub\wwwroot\essel\Connections\EDA.mdb") 
```

在 default.asp 中是这样的

```
<!--#include file="Connections/dbconnection.asp" -->
Dim CHANNEL
Dim CHANNEL_numRows

Set CHANNEL = Server.CreateObject("ADODB.Recordset")
CHANNEL.ActiveConnection = MM_IMT_STRING 
```

几天来我一直在为这个问题苦苦挣扎，如果有人知道为什么它没有连接，请告诉我谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:17:16.913

您的 Connection 对象是在哪里创建的？

我错过了类似的东西

```
Set objConnMDB = Server.CreateObject("ADODB.Connection") 
objConnMDB.ConnectionString = MM_IMT_STRING
objConnMDB.Open
CHANNEL.ActiveConnection = objConnMDB
' // do your stuff here '
objConnMDB.Close
Set objConnMDB = Nothing 
```

# javascript - jQuery 手机。网站上只有一个 https 页面

> ID：12214093
> 
> 赞同：3
> 
> 时间：2012-08-31T11:08:13.487
> 
> 标签：javascript, jquery, ajax, jquery-mobile, https

众所周知，JQuery mobile 存在来自服务器的重定向问题。

网站上只有一个安全页面的最佳方式是什么？

这是场景：

1.  用户转到站点的根目录 ->
2.  用户进入支付页面 ->
3.  <- 服务器将用户重定向到 https 支付页面 #在这一步我们可以使用**data-ajax=false**
4.  付款页面的用户转到任何其他页面 - > #我们应该在页面上拥有**data-ajax=false 的**所有链接？看起来很可怕。将用户从该页面转到不安全页面的正确方法是什么？

**UPD**这个问题不仅与移动网站有关，还与所有大量使用 ajax 的网站有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T13:18:07.843

处理此问题的一种方法是检测进行跨域 AJAX 调用所固有的页面加载失败并尝试更改协议。AJAX 和页面转换无法使用这种方法，但是，它可以防止您在网站上乱扔`data-ajax=false`属性。这适用于两个方向（即往返HTTPS）。

```
$(document).bind("pageloadfailed", function (event, data) {

    // Let the framework know we're going to handle things.
    event.preventDefault();

    // Attempt to change protocols
    window.location.href = data.absUrl.indexOf('https://') > -1 ?
        data.absUrl.replace('https://', 'http://') :
        data.absUrl.replace('http://', 'https://');

    // At some point, if the load fails, either in this
    // callback, or through some other async means, call
    // reject like this:
    data.deferred.reject(data.absUrl, data.options);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:58:08.140

您可以选择的一种方法是设置 jQuery mobiles 默认值。您可以设置 jQuery 以将所有链接设置为非 ajax 调用。因此，您仍然拥有 JQM 的外观和桌面网站的功能。可以在以下位置找到对 JQM 设置默认值的引用：http: [//jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)

# windows - Outlook 2010 附件丢失

> ID：12214094
> 
> 赞同：1
> 
> 时间：2012-08-31T11:08:14.587
> 
> 标签：windows, winforms, email, outlook, email-attachments

我有存储大量文档和其他附件的 Windows 窗体应用程序——即文档管理系统。它的一个功能是可以通过电子邮件将一堆附件发送给收件人。它通过简单地自动化 Outlook 来撰写新电子邮件并将所有文件附加到该邮件中，然后用户通过 Outlook 2010 正常发送电子邮件来实现这一点。

奇怪的事情发生了。系统中的一些附件实际上是.msg 文件（即已存储在文档管理系统中的其他电子邮件）。如果我们创建的电子邮件包含 .msg 附件，当电子邮件到达目的地时，所有附件都会被剥离。真正奇怪的是，这会影响一些收件人，但不是全部。但至关重要的是，仅当 .msg 文件位于电子邮件附件中时才会发生这种情况。如果电子邮件不包含 .msg 文件，则每次都能正常工作。

有任何想法吗？

这是代码：

```
 Public Shared Sub CreateEmail(ByVal emailAddressTo As String, ByVal subject As String, ByVal bodyText As String, ByVal docs As DespatchDocumentFileList)
        ' create the email
        Dim olApp As Object = CreateObject("Outlook.Application")   ' New Outlook.Application
        Dim olMail As Object = olApp.CreateItem(0)                  ' Outlook.OlItemType.olMailItem

        ' init the email
        With olMail
            .BodyFormat = 2                                         ' Outlook.OlBodyFormat.olFormatHTML
            .Subject = subject
            .To = emailAddressTo
            .Body = bodyText

            For Each doc As DespatchDocumentFileInfo In docs
                Dim DespatchFile As InternalClaimsLibrary.Despatch.DespatchDocumentFile = InternalClaimsLibrary.Despatch.DespatchDocumentFile.GetDespatchDocumentFile(doc.ID)
                Dim FileName As String

                FileName = InternalClaimsLibrary.FileUtils.FileHelper.CreateFileFromByteArray(DespatchFile.DespatchedImageData, IO.Path.GetFileName(DespatchFile.DespatchedFileName))

                .Attachments.Add(FileName)
            Next

        End With

        olMail.Display()

    End Sub 
```

# mysql - if条件附近的mysql sytax错误

> ID：12214095
> 
> 赞同：0
> 
> 时间：2012-08-31T11:08:15.383
> 
> 标签：mysql

```
DELIMITER $

DROP PROCEDURE IF EXISTS discount$
CREATE PROCEDURE discount(IN price INT, OUT price_after_discount INT)
BEGIN
  IF (price<100) THEN
       SET price_after_discount=price;
  ELSEIF(price>100 AND price<200) THEN
      SET price_after_discount=(price*0.10)+price;
  ELSE
     SET price_after_discount=(price*0.20)+price;
   END IF;
END$
DELIMITER; 
```

Mysql 告诉我第 9 行有错误：

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DELIMITER”附近使用正确的语法

为什么我有错误？我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:09:46.953

这是因为你失踪了`END IF`。[在此处](http://dev.mysql.com/doc/refman/5.5/en/if.html)查看手册

```
CREATE PROCEDURE discount(IN price INT, OUT price_after_discount INT)
BEGIN
  IF (price<100) THEN
       SET price_after_discount=price;
  ELSEIF(price>100 AND price<200) THEN
      SET price_after_discount=(price*0.10)+price;//Error here
  ELSE
     SET price_after_discount=(price*0.20)+price;
   END IF;
END$$

DELIMITER ; 
```

通常`near '' at line no`，这种错误是在语句（如`IF ELSE .. or BEGIN .. END`子句）中缺少某些内容的情况下出现的，它不会告诉确切的行号和代码段。

编辑：你在这之间缺少空间`DELIMITER ;`

# linux - 球体边缘的伪影 - 不正确的照明？

> ID：12214099
> 
> 赞同：0
> 
> 时间：2012-08-31T11:08:34.100
> 
> 标签：linux, opengl, nvidia, lighting

我正在使用 glutSolidSphere 渲染许多球体。边界处有线条，未以正确的颜色呈现：

![边界线](../Images/78caacf25c77146a1fc5727437586dd2.png)

如果我没记错的话，我的 AMD 卡没有这个问题，这是 nVidia 上的一个新问题。

相关的opengl设置（不确定我得到了所有这些，它们分散在代码中）是：

```
// set 2 lights, both having specular, ambient and diffuse components.
// and then:
glDisable(GL_CULL_FACE);
glLightModeli(GL_LIGHT_MODEL_LOCAL_VIEWER,1);
glLightModeli(GL_LIGHT_MODEL_TWO_SIDE,1);
glColorMaterial(GL_FRONT_AND_BACK,GL_AMBIENT_AND_DIFFUSE);
glEnable(GL_COLOR_MATERIAL);
glEnable(GL_BLEND);
glEnable(GL_LINE_SMOOTH);
glEnable(GL_POLYGON_SMOOTH);
glShadeModel(GL_SMOOTH);
glEnable(GL_RESCALE_NORMAL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:15:06.670

如果您关闭 GL_LINE_SMOOTH 和 GL_POLYGON_SMOOTH，您还会遇到问题吗？

你是什​​么混合模式？您是否从最远->最近绘制球体以获得正确的混合（并不是说您可以保证球体中的三角形将以正确的顺序呈现）。

如果这是问题并使用 FSAA，我建议放弃多边形平滑。

# google-apps-script - 运行站点脚本的权限

> ID：12214100
> 
> 赞同：0
> 
> 时间：2012-08-31T11:08:33.740
> 
> 标签：google-apps-script, google-sites

在我的组织中，我创建了一个内部站点，其中包含一个可从内部不同页面调用的脚本，该脚本从各种电子表格读取/写入数据并发送邮件。为了测试，我与我的同事共享了站点和文档，但他无法运行脚本，因为出现请求权限的页面：“...此脚本正在请求执行潜在有害操作的权限。只有在您真正授权的情况下才授权该脚本相信作者！” 如果我的同事单击“授权”，则没有任何反应。

我给我的同事脚本的链接（不是嵌入脚本的页面），点击“授权”，他收到了一封来自谷歌的长电子邮件，其中解释说授权执行脚本，但仍然无法正常工作。 .

允许执行脚本的一种方法是直接从编辑器运行脚本以授予权限。我不能为其他同事做！！！

我对此真的很不高兴。我在脚本上做了很多工作，但现在我意识到我不能因为另一个谷歌的大错误而对我的同事这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:47:04.623

根据我在电子表格中使用脚本的经验，新用户必须运行脚本、授权并再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:41:27.300

我有一个脚本，它也使用电子表格和邮件服务，我在授权方面没有任何困难......（在红屏被批准后，用户可以完全访问该应用程序）

您确定没有其他东西可以阻止您的脚本与其他用户一起使用吗？未共享的文档或对外部 api 的调用或其他什么？我只能说，目前的程序比几个月前方便得多，而且我现在没有看到这方面的错误......

# c++ - C++反射是如何实现的

> ID：12214108
> 
> 赞同：4
> 
> 时间：2012-08-31T11:08:52.963
> 
> 标签：c++, reflection, template-meta-programming

我知道 C++ 不支持反射，但是我通过[模板元编程的方式通过论文反射支持](https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.20.8519&rep=rep1&type=pdf)，但不明白这是如何实现的。有人有更多关于如何使用模板元编程在 C++ 中实现这一点的详细信息或示例吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T12:11:29.673

下面是一个在编译时测试 Obj 类型的 Type 是否具有名为“foo”的 Type 类型的公共数据成员的结构示例。它使用 C++11 特性。虽然可以使用 C++03 特性来完成，但我认为这种方法更优越。

首先，我们使用 std::is_class 检查 Obj 是否是一个类。如果它不是一个类，它就不能有数据成员，所以测试返回 false。这是通过下面的部分模板专业化实现的。

我们将使用 SFINAE 来检测对象是否包含数据成员。我们声明了具有类型模板参数“指向类 Obj 类型的数据成员的指针”的结构助手。然后我们声明静态函数测试的两个重载版本：第一个，它返回一个指示失败测试的类型，通过省略号接受任何参数。请注意，省略号在重载分辨率中的优先级最低。第二个，它返回一个指示成功的类型，接受一个指向带有模板参数 &U::foo 的辅助结构的指针。现在我们检查使用绑定到 Obj 的 U 的测试调用如果使用 nullptr 和 typedef 调用返回到 testresult。编译器首先尝试第二个版本的测试，因为省略号是最后尝试的。如果助手<&Obj::foo> 是一个合法类型，仅当 Obj 具有类型类型的公共数据成员时才为真，然后选择此重载并且 testresult 将为 std::true_type。如果这不是合法类型，则从可能的候选列表（SFINAE）中排除重载，因此将选择接受任何参数类型的剩余测试版本，并且测试结果将为 std::false_type。最后，将 testresult 的静态成员值分配给我们的静态成员值，这表明我们的测试是否成功。

该技术的一个缺点是您需要明确知道您正在测试的数据成员的名称（在我的示例中为“foo”），因此要为不同的名称执行此操作，您必须编写一个宏。

您可以编写类似的测试来测试类型是否具有具有特定名称和类型的静态数据成员，是否具有具有特定名称的内部类型或 typedef，是否具有具有特定名称的成员函数，可以使用给定的参数类型等等，但这超出了我现在的时间范围。

```
template <typename Obj, typename Type, bool b = std::is_class<Obj>::value>
struct has_public_member_foo
{
  template <typename Type Obj::*> 
  struct helper;

  template <typename U>
  static std::false_type test(...);

  template <typename U>
  static std::true_type test(helper<&U::foo> *);

  typedef decltype(test<Obj>(nullptr)) testresult;

  static const bool value = testresult::value;
};

template <typename Obj, typename Type>
struct has_public_member_foo<Obj, Type, false> : std::false_type { };

struct Foo
{
  double foo;
};

struct Bar
{
  int bar;
};

void stackoverflow() 
{
  static_assert(has_public_member_foo<Foo, double>::value == true, "oops");
  static_assert(has_public_member_foo<Foo, int>::value == false, "oops");
  static_assert(has_public_member_foo<Bar, int>::value == false, "oops");
  static_assert(has_public_member_foo<double, int>::value == false, "oops");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:09:02.860

可以在编译时查询类型的某些特征。最简单的情况可能是内置`sizeof`运算符。正如 MadScientist 发布的那样，您还可以探查特定成员。

在使用通用编程或模板元编程的框架内，通常有关于类概要的合同（形式化为 *概念*）。

例如，STL 对函数对象使用成员 typedef `result_type`。 `boost:result_of`（后来成为`std::result_of`）扩展了这个契约以允许嵌套类模板，以便计算参数是泛型的函数对象的结果类型（换句话说 - 具有重载或模板`operator()`）。然后`boost:result_of`将执行编译时反射，以允许客户端代码确定函数指针、STL 函数对象或“模板化函数对象”的结果类型，统一允许编写在任何一种情况下都“正常工作”的更通用代码。旁注：在这种特殊情况下，C++11 可以做得更好——我用它作为示例，因为它既不平凡又基于广泛的组件。

此外，可以使用客户端代码，该代码将发出一个数据结构，该结构包含在注册特定类型时在编译时推导出的元信息（甚至由客户端代码传入）。框架代码可以例如使用 `typeid`运算符来获取类型的运行时表示，并为特定的构造函数、析构函数和一组成员函数（有些可能是可选的）生成调用存根，并将此信息存储在`std::map` keyed by `std::type_index`（或`std::type_info` 旧版本语言的手写包装器）。在程序的稍后时间点，可以在给定某些对象类型（运行时表示）的情况下找到该信息，以便运行一种算法，例如创建更多相同类型的实例，其中一些实例具有临时生命周期，运行一些操作并整理。

将这两种技术结合起来非常强大，因为可以在编译时使用积极的内联来生成要以高复杂度运行的代码，这些代码可能是动态模板生成的许多变体，在程序运行时通过类似的方式与时间要求不高的部分进行交互时间。

# android - 如何在android中的sqllite中查看主键id字段

> ID：12214111
> 
> 赞同：0
> 
> 时间：2012-08-31T11:09:02.653
> 
> 标签：android, database, sqlite

我正在尝试从我在 android 上使用自动增量创建的 sql 表中检索行 ID (_id) 我可以看到表中除主键字段之外的所有其他字段。这个 id 是表的代码：

```
public static final String ID = "_id";
public static final String JOKE = "Joke";
public static final String AUTHOR = "Author";
public static final String DATE = "Date";
public static final String STATUS = "Status"; 
public void onCreate(SQLiteDatabase db) {
  db.execSQL("CREATE TABLE " + TABLE_NAME + " ( " 
            + ID  + " INTEGER PRIMARY KEY AUTOINCREMENT , " 
            + JOKE + " TEXT, " 
            + AUTHOR + " TEXT, " 
            + DATE + " DATE, " 
            + STATUS + " TEXT " 
            + ")");         
    } 
```

当我尝试接收字段索引时，我收到字段 ID 的 -1

```
Cursor cur = context.getContentResolver().query(MyContentProvider.CONTENT_URI, null, null, null, null); 
if (cur.moveToFirst()) {
        int idColumn = cur.getColumnIndex("_id");
        int authorColumn = cur.getColumnIndex("Author");
        int statusColumn = cur.getColumnIndex("Status"); 
        int dateColumn = cur.getColumnIndex("Date"); 
```

我可以看到所有其他字段的索引，但关键字段 (_id) 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:16:09.117

尝试以这种方式获取您的密钥：

```
id = cur.getInt(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:53:11.160

`cur.getColumnIndex("_id")`返回`-1`意味着该列不存在于`Cursor`. 假设您将未更改的投影（`null`此处）传递`ContentProvider`给正确的表，您可以确定该列在数据库中不存在。

通常的原因是您在稍后阶段添加/重命名了列，但忘记将数据库升级到新版本。这不是自动发生的。

在您的数据库版本中`SQLiteOpenHelper`添加或从系统设置中删除您的应用程序数据，以查看是否添加了该列。

# c++ - C++ 模板和静态成员 - 标题中的定义

> ID：12214112
> 
> 赞同：9
> 
> 时间：2012-08-31T11:09:03.613
> 
> 标签：c++, templates, static-members

考虑以下构造：

```
//! Templated singleton.
/*!
    Template wrapper enforcing the singleton behavior.
*/
template <class T>
class TSingleton
{
private:    
    //! Singleton instance pointer.
    static T* instance;
    //! private constructor.
    TSingleton() { }
    //! private empty copy constructor.
    TSingleton(const TSingleton<T>& sourceObject) {}

public:
    //! Static singleton instance getter.
    static T* GetInstance()
    {
        if (instance == 0)
            instance = new T();
        return instance;
    }

};

template <class T> T* TSingleton<T>::instance = 0; 
```

这个模板类和静态实例的定义写在同一个头文件中。对于非模板类，*由于为实例静态成员定义了多个符号，这会导致链接时错误*。模板也会发生这种情况似乎很直观，因此必须将定义分开并将其放入 .cpp 文件中。但是模板通常在头文件中声明和定义。***是什么让这种语法对模板类有效且有效？***

有一个关于此的[维基百科](http://en.wikipedia.org/wiki/One_definition_rule)链接，但它没有明确解释在模板类的情况下会发生什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T11:17:14.050

这是有效的，因为`[basic.def.odr]/5`明确允许复制模板：

> 类类型（第 9 条）、枚举类型（7.2）、带有外部链接的内联函数（7.1.2）、类模板（第 14 条）、非静态函数模板（14.5.6）可以有多个定义、类模板的静态数据成员 (14.5.1.3)、类模板的成员函数 (14.5.1.1) 或在程序中未指定某些模板参数的模板特化 (14.7, 14.5.5)，前提是每个定义出现在不同的翻译单元中，并且定义满足以下要求。...

要求很长，所以我不会在这里重复它们，但本质上它们声明每个重复的定义必须相同（否则程序具有未定义的行为）。

# testing - 函数调用是否缺少参数语义或语法错误？

> ID：12214113
> 
> 赞同：0
> 
> 时间：2012-08-31T11:09:17.763
> 
> 标签：testing, error-handling, syntax-error

我收到一条评论，说调用参数数量不正确的函数是语义错误。我会说它是一个语法错误，因为正确的语法是使用分隔符提供尽可能多的参数。

还有一个问题：如果程序员没有正确理解需求并实现了与请求不同的功能，那是逻辑错误吗？它是否被认为是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:16:09.587

A syntax error has to do only with conformance to the language.

A semantic error has to do with conformance to the API.

A function call that has the wrong number of parameters for the defined function is a semantic error.

As to your second question, at least by my definition, a logic error is when the code compiles and runs but does not function as expected, so I would call your example a logic error. But I'm not sure this definition is universally accepted or obvious, so it may be a matter of opinion.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:17:49.150

方法调用的参数数量不正确是语法错误。如果程序不这样做，客户期望也是一个错误。请求阶段的错误被触发到代码阶段。

# java - 如何在 Java 项目中包含 SIGAR API

> ID：12214114
> 
> 赞同：5
> 
> 时间：2012-08-31T11:09:25.723
> 
> 标签：java, eclipse, sigar

我是 Java 新手，所以我不知道谁在我必须使用 Sigar 类的项目中获取下载 zip 文件（hyperic-sigar-1.6.4.zip）。

我已经尝试导入 Sigar.Jar 文件，但问题是 sigar 中每个类的来源都是未知的。

所以我使用 Eclipse Indigo 进行编程，有人可以帮助我:)

非常感谢问候

马库斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:30:32.427

首先，您需要添加`Sigar.jar`到您的库中，然后将`.so`文件添加到您的库中（您需要为您正在使用的操作系统选择文件）。您可以在`"hyperic-sigar-1.6.4/sigar-bin/lib"`. `Mem`您可以在示例代码中找到函数的用法：

```
import java.io.*;
import java.util.*;
import java.text.*;
import java.lang.*;

import org.hyperic.sigar.Mem;
import org.hyperic.sigar.Sigar;
import org.hyperic.sigar.SigarException;

public class MemExample {

    private static Sigar sigar = new Sigar();

    public static void getInformationsAboutMemory() {
        System.out.println("**************************************");
        System.out.println("*** Informations about the Memory: ***");
        System.out.println("**************************************\n");

        Mem mem = null;
        try {
            mem = sigar.getMem();
        } catch (SigarException se) {
            se.printStackTrace();
        }

        System.out.println("Actual total free system memory: "
                + mem.getActualFree() / 1024 / 1024+ " MB");
        System.out.println("Actual total used system memory: "
                + mem.getActualUsed() / 1024 / 1024 + " MB");
        System.out.println("Total free system memory ......: " + mem.getFree()
                / 1024 / 1024+ " MB");
        System.out.println("System Random Access Memory....: " + mem.getRam()
                + " MB");
        System.out.println("Total system memory............: " + mem.getTotal()
                / 1024 / 1024+ " MB");
        System.out.println("Total used system memory.......: " + mem.getUsed()
                / 1024 / 1024+ " MB");

        System.out.println("\n**************************************\n");

    }

    public static void main(String[] args) throws Exception{

                getInformationsAboutMemory();

                }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T14:23:43.573

下载的 zip 将包含一个或两个文件夹，提供如何使用某些功能的示例。该文件夹的示例可以在以下位置找到：

“hyperic-sigar-1.6.4/bindings/java/examples”

# java - 用于获取 dn 和所有 cn 数据的 LDAP 查询

> ID：12214115
> 
> 赞同：4
> 
> 时间：2012-08-31T11:09:30.497
> 
> 标签：java, ldap, ldap-query

![在此处输入图像描述](../Images/d8041ba653911a46946ec83c7db3df30.png)

我正在使用 netscape ldapsdk-4.1.jar，我能够与我的 ldap 服务器连接并进行身份验证：

```
try{
            ldi.connect(hostname,LDAPv3.DEFAULT_PORT);
            LDAPConnectionInfo.ldapSearchResults = ldi.search(LDAPConnectionInfo.MY_SEARCHBASE,LDAPConnectionInfo.MY_SCOPE,LDAPConnectionInfo.MY_FILTER,null,false);
            System.out.println("Ldap Search Result : " +LDAPConnectionInfo.ldapSearchResults);

            ldi.authenticate(3, "host", "****");
}
..... 
```

现在我想从以下位置获取数据：

*   在域组件（dn，here=example.com）下有多少个组织单位（ou）。
*   为每个组织单元（ou）获取所有通用名（cn）及其在通用名（cn）下的叶子对象。

我想我必须使用一些 ldap 查询来获取这些数据......任何输入都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T07:57:23.197

为每个组织单位创建一个搜索请求，其中：

*   基础对象是组织单位
*   范围是`subtree`
*   过滤器是要检索的条目共有的对象类在`objectClass=commonObjectClass`哪里，或者`commonObjectCLass``cn=*`
*   要为每个条目检索的属性列表

将每个搜索请求依次传输到 LDAP 目录服务器并解释响应。

*不要使用 netscape 代码，它是古老的、有缺陷的和缓慢的。改用[UnboundID LDAP](https://www.unboundid.com/products/ldap-sdk/) SDK*

# perl - 正则表达式匹配0到100之间的任何数字？

> ID：12214116
> 
> 赞同：-4
> 
> 时间：2012-08-31T11:09:35.973
> 
> 标签：perl

我需要一个正则表达式来匹配 0 到 100 之间的任何数字，包括十进制数字示例：我的表达式应该像这样匹配 1,2,2.3 ,40,40.12 ,100,100.00 ..提前谢谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:21:03.870

假设你必须允许一个领先的标志，你最好写

```
if ( /(?<![-+.\d])([-+]?\d+(?:\.\d*)?(?![-+.\d])/ and $1 >= 0 and $1 <= 100 ) { .. } 
```

但是如果你*被迫*使用正则表达式，那么你需要

```
if ( /(?<![-+.\d])(([-+]?(?:100|\d\d)(?:\.\d*)?(?![-+.\d])/ ) { .. } 
```

这些模式可能比必要的更复杂，因为它们允许数字出现在字符串中的*任何位置。*如果您只是检查整个字符串以查看它是否符合条件，那么它可能会短得多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:14:23.003

This would work:

```
(100(\.0+))|([0-9]{1,2}(\.[0-9]+)?) 
```

match either "100" (with optional dot plus one or more zeroes) or one or two digits, optionally followed by a dot and at least one digit.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:11:45.390

已编辑！！！

这个问题比我最初意识到的要困难得多。经过一番努力，我制作了一个没有错误的新正则表达式。享受。

```
/(?<!\d)(?<!\.)(100(?:(?!\.)|(?:\.0*+|\.))(?=\D)|[0-9]?[0-9](?:\.|\.[0-9]*+)?(?=[\D]))/ 
```

此模式将在 $1 中捕获

# c# - 在 c# windows 应用程序中打开 gmail 收件箱

> ID：12214119
> 
> 赞同：-2
> 
> 时间：2012-08-31T11:09:40.667
> 
> 标签：c#, .net, gmail

我想用 C# 代码打开我的 gmail 收件箱。我将提供我的 gmail 用户名和密码。它应该会自动打开我的收件箱。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:58:07.410

正如上面的许多评论所说，Gmail 有许多现有的 API 可以访问它[https://developers.google.com/google-apps/gmail/](https://developers.google.com/google-apps/gmail/)。有许多库可用于访问这些 API，包括之前关于 stackoverflow 的问题，例如[https://stackoverflow.com/questions/1544895/imap-library-for-net](https://stackoverflow.com/questions/1544895/imap-library-for-net)和[How to send mails through smtp in c#](https://stackoverflow.com/questions/2536850/how-to-send-mails-through-smtp-in-c-sharp)。

# cocos2d-iphone - CCSprite内存：文件VS帧

> ID：12214121
> 
> 赞同：1
> 
> 时间：2012-08-31T11:09:46.867
> 
> 标签：cocos2d-iphone, ccsprite

假设我需要几个`CCSprite`s 使用相同的图像。我可以想到以下两种解决方案：

1.  该图像位于单独的文件“bg.png”中

    ```
    CCSprite *image1 = [CCSprite spriteWithFile:@"bg.png"];
    CCSprite *image2 = [CCSprite spriteWithFile:@"bg.png"]; 
    ```

2.  图像位于精灵表“bg_sheet.png”中

    ```
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"bg_sheet.png"]; 
    ```

    然后

    ```
    CCSprite *image1 = [CCSprite spriteWithSpriteFrameName:@"bg.png"];
    CCSprite *image2 = [CCSprite spriteWithSpriteFrameName:@"bg.png"]; 
    ```

我的问题是：

*   我猜在案例 1 中，图像在内存中加载了两次，而在案例 2 中，它只加载了一次。我对吗 ？
*   那么这是否意味着使用精灵表总是更好？
*   我是否错过了其他更好的方法来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:22:12.123

1.  你看起来不太对劲。在这两种情况下，图像只会被放入内存一次。你可以检查`spriteWithFile:`代码。它试图在精灵帧缓存中找到精灵帧，并且只有在没有找到需要的帧时才加载它。

2.  使用 spritesheets 有助于节省内存。例如，对于大小为 129x129 的图像，将创建大小为 256x256 的纹理。但是您可以在一张精灵表中添加许多这样的图像，并且只会创建一个大纹理（我的意思是，精灵表将是 1024x1024 或 2048x2048，只有一个大小相同的纹理）。

# c# - 数据处理难题/头痛

> ID：12214130
> 
> 赞同：0
> 
> 时间：2012-08-31T11:10:43.067
> 
> 标签：c#, csv

我有一个 CSV 文件需要处理，这有点像噩梦。本质上是以下

```
"Id","Name","Description"
"1","Test1","Test description text"
"2","Test2","<doc><style>body{font-family:"Calibri","sans-serif";}</style><p class="test_class"
name="test_name">Lots of word xdoc content here.</p></doc>"
"guid-xxxx-xxxx-xxxx-xxxx","Test3","Test description text 3" 
```

我正在使用[File Helpers](http://filehelpers.sourceforge.net/)库来处理 CSV，而不是重新发明轮子。但是，由于包含非转义 Word xdoc xml 的描述字段包含引号，因此当涉及到每条记录的起点和终点时，它会变得相当混乱。

下面是一个示例映射类。

```
[DelimitedRecord(","), IgnoreFirst(1), IgnoreEmptyLines()]
public class CSVDoc
{
    #region Properties
    [FieldQuoted('"', QuoteMode.AlwaysQuoted), FieldTrim(TrimMode.Both)]
    public string Id;
    [FieldQuoted('"', QuoteMode.AlwaysQuoted), FieldTrim(TrimMode.Both)]
    public string Name;
    [FieldQuoted('"', QuoteMode.AlwaysQuoted), FieldTrim(TrimMode.Both)]
    public string Description;
    [FieldQuoted('"', QuoteMode.AlwaysQuoted), FieldTrim(TrimMode.Both)]
} 
```

我考虑过（尽管我讨厌这种任务的正则表达式）替换所有`"`，`'`然后使用模式`((?<=(^|',))'|'(?=($|,')))`在行的开头和结尾以及它们被格式化的地方替换所有。但是，脏文件包含一些以 a 结尾的行和一些格式化的 css 样式属性`'``"``','``"``","`

所以现在我只能摸不着头脑，试图弄清楚如何做到这一点以及如何实现自动化。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:26:47.127

您将不得不重新发明轮子，因为这根本不是有效的 CSV 文件或确实是一个合理的文件 - 它没有任何可证明一致的转义规则（例如，我们不知道纯文本是否列是否正确转义）。

你最好的办法是让制作这个的人修复这个错误，它应该是例如：

```
"2","Test2","<doc><style>body{font-family:""Calibri"",""sans-serif"";}</style><p class=""test_class""
name=""test_name"">Lots of word xdoc content here.</p></doc>" 
```

您的解析器应该可以很好地处理哪个，并且它们应该不难以简单有效的方式生成。

如果做不到这一点，您将不得不将解析器手动编码为：

1.  读一行。
2.  检查未转义的 " （`"`后面没有`"`a`,`或空格的任何内容。
3.  如果没有找到，则解析为 CSV。
4.  如果找到任何东西，请解析为这个可怕的东西，直到你打到以 " 结尾的行

`<`如果在其他行中始终不使用它，则可能更容易查找。或者，`<doc`如果它始终如一地识别正确的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:32:15.423

如果不介意之前做一些预处理，可以把第一个和第二个“，”改成“|” 然后使用 FileHelper 正常解析文件（假设你没有 | 在有 HTML 标签的最后一列）

预处理可能类似于（简单伪代码）：

```
var sb = new StringBuilder()
var regex = new Regex("\",\"");
foreach(string line in textFileLines)
{
   sb.AppendLine(regex.Replace(line , "\"|\"", 2));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T13:53:04.997

几个月前，我研究了 CSV-1203 文件格式标准，所以首先要意识到的是，您处理的不是 CSV 文件——即使它被命名为“xyz.CSV”。

正如这里其他人所说，编写自己的阅读器会更容易，它们并不太难。我也讨厌所有正则表达式，但好消息是您可以编写任何解决方案而无需使用它。

有几件事：Excel 对以两个大写字母 ID（不带引号）开头的 CSV 文件做了一件非常奇怪的事情。它认为您的 CSV 是损坏的 SYLK 文件！尝试一下。

有关此问题的详细信息和详细的 CSV 文件格式规范，请参阅[http://mastpoint.curzonnassau.com/csv-1203](http://mastpoint.curzonnassau.com/csv-1203 "CSV-1203 文件格式规范")

# ruby-on-rails - 我可以从命令行触发/检测事件并让它影响 Rails 服务器吗？

> ID：12214131
> 
> 赞同：0
> 
> 时间：2012-08-31T11:10:44.487
> 
> 标签：ruby-on-rails, notifications

我的配置目录中有一个初始化程序，如下所示：

```
ActiveSupport::Notifications.subscribe "handle_translation_event" do |name, start, finish, id, payload|
  puts "Called"
end 
```

我有一个正在运行的 Rails 开发服务器（`rails s`），我同时启动了一个 Rails 控制台（`rails c`）。想象一下，在 Rails 控制台中，我写道：

```
ActiveSupport::Notifications.instrument("handle_translation_event") 
```

我看不到这反映在服务器日志中。是否可以从控制台触发事件并影响服务器？我的猜测是否定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:26:18.010

`ActiveSupport::Notifications`使用`ActiveSupport::Notifications::Fanout`类作为通知者来通知订阅者。

这个通知器使用简单的实例变量来存储订阅者。

您可以创建自己的实现（使用数据库支持的解决方案），并且可以通过`notifier`设置`ActiveSupport::Notifications`.

```
ActiveSupport::Notifications.notifier = my_implementation 
```

我可以想象一个简单的[Redis](http://redis.io/)支持的实现，因为它具有[发布/订阅](http://redis.io/topics/pubsub)功能。但是如果你没有 Redis 作为依赖，你也可以用 SQL 来做。

# javascript - tr 和 td 都可以点击并且应该触发不同的动作

> ID：12214133
> 
> 赞同：3
> 
> 时间：2012-08-31T11:10:52.053
> 
> 标签：javascript, jquery, html, css

在表格中，每一列都是可点击的，并在点击时显示一些内容。此外，每列都有一个 td ，其中包含一个隐藏该列的按钮。像这样

![在此处输入图像描述](../Images/c1e8897b26c0b1e546a8b0fac77a3707.png)

隐藏部分对我不起作用。显然，显示部分首先被触发，隐藏被忽略/不被触发。

```
$("tr td.remove").live("click", function(){
    $(this).parent("tr:first").hide('slow');
});

$(".reveal").click(function(){
    $(this).next(".content").slideToggle("fast");
}); 
```

HTML

```
 <table>
    <tr class="reveal">
       <td>300,00 €&lt;/td>
       <td class="remove">X</td>
    </tr>
    <tr class="content">
        <td colspan="2">
           Content
        </td>
    </tr>
 </table> 
```

我怎样才能把它结合起来接受这两个动作？我使用 jQuery 1.6.2。

**小提琴：http:** [//jsfiddle.net/2jVtC/1/](http://jsfiddle.net/2jVtC/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:15:05.467

[**这是工作的jsFiddle。**](http://jsfiddle.net/2jVtC/17/)

```
$('.content').hide();
$(".reveal").click(function() {
    $(this).next(".content").slideToggle("fast");
});
$("tr td.remove").live("click", function() {
    $(this).parent("tr").slideUp('slow');
    $(this).parent().next(".content").slideUp('slow');
});​ 
```

**替代选择**

注意：如果您使用的是 jQuery 1.6.4，`closest()`方法将不起作用。

```
$(".reveal").click(function(){
    $(this).closest(".content").slideToggle("fast");
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T11:15:46.320

简单的 ：）

```
$("tr td.remove").live("click", function(e){
    e.stopPropagation();
    $(this).parent("tr:first").hide('slow');
});

$(".reveal").click(function(e){
    e.stopPropagation();
    $(this).next(".content").slideToggle("fast");
}); 
```

使用 .on() 比使用 live 更好。它的预成型速度更快。像那样：

```
$('table')
   .on('click','.reveal',function(e){
      e.stopPropagation();
      //stuff
   }).on('click','.remove',function(e){
      e.stopPropagation();
      //stuff
   }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:31:51.637

.on() 已取代 .live()。On 和 hide 对你不起作用？他们对我来说工作得很好...... [http://jsfiddle.net/Umxgy/](http://jsfiddle.net/Umxgy/)

**编辑** 由于您使用的是旧版本的 jQuery，因此 .live() 是正确的。让我知道这是否适合您。我有一个与你不同的选择器。

**编辑 2** 很抱歉误解了您的问题。这是一个新的小提琴：http: [//jsfiddle.net/Umxgy/2/](http://jsfiddle.net/Umxgy/2/)

# c++ - std::map 的键问题

> ID：12214134
> 
> 赞同：3
> 
> 时间：2012-08-31T11:10:55.147
> 
> 标签：c++, stl, stdmap, boost-tuples

考虑以下代码。**由整数和整数向量**组成的元组被定义为映射的键。但是，令我惊讶的是，在插入或查找由整数和**整数**作为键的元组时，编译器没有抛出任何错误。这怎么可能，因为元组的第二个元素应该是 **integer 类型的向量**？

```
std::map <boost::tuple<int, vector<int > >, int> test;
std::map <boost::tuple<int, vector<int > >, int>::iterator test_it;

vector <int> t;
t.push_back(4);

test.insert(make_pair(boost::make_tuple(3, t), 4));

test.insert(make_pair(boost::make_tuple(3, 6), 4));

test_it = test.find(boost::make_tuple(3, 7)); 
if(test_it != test.end()) 
throw " test is passed"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:22:44.963

似乎是 Boost 和许多 C++ 标准库实现中的一个错误。这个问题由`pair`和共同解决`tuple`。演示它的最简单代码是：

```
#include <vector>
#include <utility>
using namespace std;
int main() {
    //compiles
    pair<int,vector<int>> bug1( pair<int,int>(5,6) );

    //compiles
    pair<int,vector<int>> bug2;
    bug2 = pair<int,int>(5,6);
} 
```

Clang 4.0`libc++`和另一个接受这个，Comeau Online 也接受它。GCC 4.7.1 给出一个错误。

它不能编译，根据：

> 20.3.2/12
> 
> ```
> template<class U, class V> pair(const pair<U, V>& p); 
> ```
> 
> 备注：此构造函数不应参与重载决议，除非 const U& 可隐式转换为 first_type 且 const V& 可隐式转换为 second_type。
> 
> 20.3.2/23
> 
> ```
> template<class U, class V> pair& operator=(const pair<U, V>& p); 
> ```
> 
> 要求：`is_assignable<first_type&, const U&>::value`是`true`和`is_assignable<second_type&, const V&>::value`是`true`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:00:18.447

问题是隐式转换。不是从`int`到 `std::vector<int>`; 那是行不通的，因为那里涉及的构造函数是声明`explicit`的，因此不能用于隐式转换。隐式转换是 from`std::pair<int, int>`到 `std::pair<int, std::vector<int> >`。这使用从模板派生的构造函数: `template <typename U1, typename U2> std::pair( std::pair<U1, U2> const& )`，这不是隐式的。而这个构造函数的定义是：

```
template <typename T1, typename T2>
template <typename U1, typename U2>
std::pair<T1, T2>::std::pair( std::pair<U1, U2> const& other )
    : first( other.first )
    , second( other.second )
{
} 
```

（这不完全是标准指定的方式。但 C++03 中的规范不允许其他太多。在 C++11 中，有很多额外的包袱，因此可以在可能的情况下移动构造，但我认为最终的效果是一样的。）

请注意，在此构造函数中，构造函数是显式调用，而不是隐式转换。因此，要使隐式转换`pair`起作用，这两种类型可以显式转换就足够了。

就个人而言，我怀疑这是最初的意图。我怀疑，事实上，大部分语言在被添加到语言`std::pair`之前就被冻结`explicit`了，所以没有问题。后来，没有人想过重新讨论这个问题。在 C++11 中，重新访问它会破坏向后兼容性。所以你会得到一些意想不到的转换。

请注意，这不是转发导致显式转换变为隐式的唯一情况。考虑：

```
std::vector<std::vector<int> > v2D( 5, 10 ); 
```

显然，`10`不是 a `std::vector<int>`（这是第二个参数应该是的）。但是...在 C++03 中，这与构造函数模板匹配：

```
template<typename ForwardIterator, typename ForwardIterator>
std::vector( ForwardIterator begin, ForwardIterator end ); 
```

该标准对此有一些特殊的语言：

— 构造函数

```
template <class InputIterator>
X(InputIterator f, InputIterator l, const Allocator& a = Allocator()) 
```

应具有与以下相同的效果：

```
X(static_cast<typename X::size_type>(f),
static_cast<typename X::value_type>(l), a) 
```

如果 InputIterator 是一个整数类型。

并且隐式转换已变得显式。

（请注意，如果没有这种特殊语言，

```
std::vector<int> v(10, 42); 
```

无法编译：上面的模板构造函数的实例化是完全匹配的，比`std::vector<int>( size_t, int )`. 委员会认为，要求对上面的第一个整数进行显式转换`size_t`，可能对用户提出了太多要求。）

C++11 显着改变了这里的措辞，并且：

```
std::vector<int, std::vector<int>> v2D( 10, 42 ); 
```

不再合法。

至少我可以看到，没有这样的更改应用于`std::pair`.

# python - 在 Django 中自动插入登录用户的用户名

> ID：12214140
> 
> 赞同：0
> 
> 时间：2012-08-31T11:11:24.363
> 
> 标签：python, django

在 Django 管理界面中，我想在发布时自动插入登录用户的用户名和博客文章，目前我让它在下拉列表中显示每个用户以供选择，但显然这不是很好，所以我我希望它自动输入这个。

这是我的代码：

模型.py

从 django.db 导入模型 从 django.contrib.auth.models 导入用户

```
# Create your models here.
class Post(models.Model):
    title = models.CharField(max_length=200)
    body = models.TextField()
    published_date = models.DateTimeField('date published')
    author = models.ForeignKey(User, db_column="published_who")

    def __unicode__(self):
        return self.title 
```

管理员.py

```
from blog.models import Post
from django.contrib import admin

class PostAdmin(admin.ModelAdmin):

    def save_model(self, request, obj, form, change): 
        obj.author = request.user
        obj.save()

admin.site.register(Post, PostAdmin) 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:47:14.270

您应该在 Django 文档中使用：[https ://docs.djangoproject.com/en/1.3/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey](https://docs.djangoproject.com/en/1.3/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)

您可以用这个覆盖管理员中 ForeignKeyField 的默认行为。类似于以下内容：

```
 def formfield_for_foreignkey(self, db_field, request=None, **kwargs):
      if db_field.name == "author":
          kwargs["initial"]  = request.user

       return super(PostAdmin, self).formfield_for_foreignkey(db_field, request, **kwargs) 
```

*这是未经测试的

**编辑：**

我不知道您是否想完全禁用下拉菜单。用这种方法你不会。相反，您将拥有一个默认值，`request.user`但仍然可以选择另一个用户。

如果您想让它成为只有一个选择的下拉列表（奇怪的行为：P），您可以添加：

```
kwargs["queryset"] = Post.objects.filter(author=request.user) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:43:18.217

据我了解，您需要从管理表单中排除作者：

```
class PostAdmin(admin.ModelAdmin):
    exclude = ['author'] 
```

# c# - 支付网关与全球虹膜的集成问题

> ID：12214144
> 
> 赞同：0
> 
> 时间：2012-08-31T11:11:31.820
> 
> 标签：c#, asp.net, nopcommerce

我们的应用程序正在运行 n NoP 商务，我们正在尝试将支付网关与汇丰银行支付网关集成，但在成功支付后它给了我以下错误：

***您的交易已成功，但连接回商家网站时出现问题。请联系商家并告知他们您收到了此错误消息。谢谢你。***

我试图进行谷歌搜索，但没有找到任何合适的解决方案。

请帮帮我。

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:23:46.700

支付网关似乎无法连接到您的回调页面。此外，如果回调页面上出现异常，我会收到另一个支付提供商的此类错误。尝试查看付款流程是否返回您的回调页面，您在页面上做的第一件事就是记录详细信息。

# c++ - 对于 MySQLDump，添加一个注释，输出为每个表转储了多少行

> ID：12214146
> 
> 赞同：2
> 
> 时间：2012-08-31T11:11:38.717
> 
> 标签：c++, mysql, c, mysqldump, mysqldumpslow

我想添加一条注释，输出为 MySQLDump 为每个表转储的行数。为此我需要修改文件client/mysqldump.c。一个示例输出可能是这样的：

 ``## -- Table structure for table `t1`

```
DROP TABLE IF EXISTS `t1`;

/*!40101 SET @saved_cs_client     = @@character_set_client */;

/*!40101 SET character_set_client = utf8 */;

CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

/*!40101 SET character_set_client = @saved_cs_client */; 
```

--

## -- Dumping data for table `t1`` 

```
LOCK TABLES `t1` WRITE;

/*!40000 ALTER TABLE `t1` DISABLE KEYS */;

INSERT INTO `t1` VALUES (5);

/*!40000 ALTER TABLE `t1` ENABLE KEYS */;

UNLOCK TABLES;

/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

-- Rows found for 't1':  1 
```

我没有太多使用 MySQL，也不明白我应该如何着手解决这个问题。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T22:35:14.697

MYSQL C API 有一个函数可以返回请求返回的行数`mysql_num_rows`（[http://dev.mysql.com/doc/refman/5.0/en/mysql-num-rows.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-num-rows.html)）。

您可以将其与请求一起使用：

```
SELECT * FROM MY_TABLE; 
```

你得到了表中的行数。

这里有一个示例代码：

```
MYSQL * myh
MYSQL_RES *query_result;
unsigned long table_num_rows;

/* Select all records present in the table */
if (0 != mysql_query(myh, "SELECT * FROM MY_TABLE"))
{
    fprintf(stderr, "FAIL to perform the query : 'SELECT * FROM MY_TABLE' %s\n", mysql_error(myh));

    exit (EXIT_FAILURE);
}

query_result = mysql_store_result(myh);
if (query_result)
{
    /* Retreive the number of rows returned by the query, which is the total number of rows in the table
     * in our case.
    */
    table_num_rows = mysql_num_rows(query_result);
    fprintf(stdout, "Our table contain %lu\n", table_num_rows)
} 
```

有关如何使用 MYSQL C API 的完整示例，您可以在此处阅读答案： [Writing into mysql database from a single board computer using c](https://stackoverflow.com/questions/11826073/writing-into-mysql-database-from-a-single-board-computer-using-c)

**编辑**：似乎`dump_table`当我们想要转储任何表（[mysqldump.c](http://code.google.com/p/google-mysql/source/browse/client/mysqldump.c?spec=svn57a1959d9a498928248d6cc5123c9ffc5b4efe0f&name=mysql-5.1.63/03-fixes-google-1&r=57a1959d9a498928248d6cc5123c9ffc5b4efe0f)）时使用该函数，这是添加我们的代码来计算行数的好地方。像这样修改它（你需要做一些测试，我没有在我的机器上测试过代码！）：

```
static void dump_table(char *table, char *db)
{
        char ignore_flag;
        char buf[200], table_buff[NAME_LEN+3];
        DYNAMIC_STRING query_string;
        char table_type[NAME_LEN];
        char *result_table, table_buff2[NAME_LEN*2+3], *opt_quoted_table;
        int error= 0;
        ulong         rownr, row_break, total_length, init_length;
        uint num_fields;
        MYSQL_RES     *res;
        MYSQL_RES     *res_num_row;    /* Add this */
        MYSQL_FIELD   *field;
        MYSQL_ROW     row;
        char          select_expr[QUERY_LENGTH];
        unsigned long table_num_rows;   /* Add this */
        char    table_num_rows_query[256];      /* Add this */
        DBUG_ENTER("dump_table");

        /* Add this */
        /* Build the query to get the number of rows */
        snprintf(table_num_rows_query, 256, "SELECT * FROM %s", table);

        /*
         *     Make sure you get the create table info before the following check for
         *         --no-data flag below. Otherwise, the create table info won't be printed.
         *           */
        num_fields= get_table_structure(table, db, table_type, &ignore_flag);

        /*
         *     The "table" could be a view.  If so, we don't do anything here.
         *       */
        if (strcmp(table_type, "VIEW") == 0)
                DBUG_VOID_RETURN;

        /* Check --no-data flag */
        if (opt_no_data)
        {
                verbose_msg("-- Skipping dump data for table '%s', --no-data was used\n",
                                table);
                DBUG_VOID_RETURN;
        }

        DBUG_PRINT("info",
                        ("ignore_flag: %x  num_fields: %d", (int) ignore_flag,
                         num_fields));
        /*
         *     If the table type is a merge table or any type that has to be
         *          _completely_ ignored and no data dumped
         *            */
        if (ignore_flag & IGNORE_DATA)
        {
                verbose_msg("-- Warning: Skipping data for table '%s' because " \
                                "it's of type %s\n", table, table_type);
                DBUG_VOID_RETURN;
        }
        /* Check that there are any fields in the table */
        if (num_fields == 0)
        {
                verbose_msg("-- Skipping dump data for table '%s', it has no fields\n",
                                table);
                DBUG_VOID_RETURN;
        }

        /*
         *      Check --skip-events flag: it is not enough to skip creation of events
         *           discarding SHOW CREATE EVENT statements generation. The myslq.event
         *                table data should be skipped too.
         */
         if (!opt_events && !my_strcasecmp(&my_charset_latin1, db, "mysql") &&
                        !my_strcasecmp(&my_charset_latin1, table, "event"))
        {
                verbose_msg("-- Skipping data table mysql.event, --skip-events was used\n");
                DBUG_VOID_RETURN;
        }

        result_table= quote_name(table,table_buff, 1);
        opt_quoted_table= quote_name(table, table_buff2, 0);

        if (opt_lossless_fp && get_select_expr(table, select_expr))
                exit(EX_MYSQLERR);

        verbose_msg("-- Sending SELECT query...\n");

        /* Add this */
        /* TODO : check if this is the right place to put our request */
        if (0 != mysql_query(mysql, table_num_rows_query))
        {
                    fprintf(stderr, "FAIL to perform the query : %s -  %s\n", table_num_rows_query, mysql_error(myh));

                    exit (EXIT_FAILURE);
        }
        res_num_row = mysql_store_result(mysql);
        if (res_num_row)
        {
                    /* Retreive the number of rows returned by the query, which is the total number of rows in the table
                     * in our case.
                     */
                    table_num_rows = mysql_num_rows(res_num_row);
                    fprintf(stdout, "Our table contain %lu\n", table_num_rows);
        }
        /* Freeing the result */
        mysql_free_result(res_num_row);

        init_dynamic_string_checked(&query_string, "", 1024, 1024);
        /* The rest of the function here */ 
````

# android - Android 上的 ParseFile

> ID：12214152
> 
> 赞同：3
> 
> 时间：2012-08-31T11:12:11.210
> 
> 标签：android, parsing

我正在使用 Parse SDK 来构建我的应用程序。

通过使用 Intents，我可以轻松地从图库中获取位图。我想将它们用作我的用户的个人资料图片。

但是，为了上传它，我必须将它转换为字节数组。此外，当我下载它时，它以字节数组的形式出现，我必须将它转换回 Drawable。

为了将其转换为字节数组，我这样做：

```
public static byte[] bitmapToByteArray(Bitmap bmp)
{
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] byteArray = stream.toByteArray();
    return byteArray;
} 
```

我找不到如何将此字节 [] 转换回位图而不必先保存它。这个过程如何实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:15:07.147

只需执行以下操作：

```
Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:14:54.230

```
 Bitmap  bmp = BitmapFactory.decodeByteArray(data, 0, data.length); 
```

# mysql - MySQL删除两个括号之间的字符

> ID：12214158
> 
> 赞同：5
> 
> 时间：2012-08-31T11:12:33.860
> 
> 标签：mysql, sql

我正在浏览 MySQL 中的一些数据，我需要从看起来像这样的列中删除一些信息。

```
**sometext** (something else) 
```

不幸的是，数据不一致；并非所有数据都遵循这种结构，其中一些只有第一部分。

```
**sometext** 
```

所以我需要一种方法来删除括号之间的所有内容，然后删除括号本身，以便留下`**sometext**`部分。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T11:21:54.637

使用此解决方案：

```
UPDATE tbl
SET    txt = REPLACE(txt, SUBSTRING(txt, LOCATE('(', txt), LENGTH(txt) - LOCATE(')', REVERSE(txt)) - LOCATE('(', txt) + 2), '')
WHERE  txt LIKE '%(%)%' 
```

请记住，由于 MySQL 的最小正则表达式支持的限制，这不适用于*（将返回空白）*：

```
(replacetext1) keepthistext1 (replacetext2) keepthistext2 (replacetext3) 
```

...如果您想保留`keepthistext1`并且`keepthistext2`因为它将删除第一个左括号和最后一个右括号之间的*所有内容。*

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/d47fb/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T11:17:44.593

你可以尝试使用函数`SUBSTRING_INDEX`。语法是：

```
SUBSTRING_INDEX(str,delim,count) 
```

在这种情况下，它可能类似于：

```
UPDATE tbl
SET    txt = (SELECT SUBSTRING_INDEX(txt, '(', 1)); 
```

这会有所帮助，尽管我没有检查查询。有关此功能的进一步参考，您可以查看[此处](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function%5Fsubstring-index)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:15:27.983

MySQL 不支持正则表达式，所以唯一的方法是使用 PHP 等编写的外部程序，或者使用存储过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:15:56.220

您可以使用 UDF（用户定义函数）

看看这个[https://launchpad.net/mysql-udf-regexp](https://launchpad.net/mysql-udf-regexp)

所以你只需要创建你的括号匹配正则表达式并使用这个函数的普通 REPLACE 语句:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:22:12.890

选择试试这个：

```
SELECT REPLACE('abdcejkhh klhklhkl (abc) agjkk',SUBSTRING('abdcejkhh klhklhkl (abc) agjkk',POSITION('(' IN 'abdcejkhh klhklhkl (abc) agjkk'),(length('abdcejkhh klhklhkl (abc) agjkk')-POSITION(')' IN 'abdcejkhh klhklhkl (abc) agjkk'))),'') 
```

在更新语句中使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-13T14:25:25.853

这是一个用户定义的函数，它可以使用字符串中的多个括号对：

```
DELIMITER //
CREATE FUNCTION REMOVE_BRACKETS(input TEXT CHARACTER SET utf8 COLLATE utf8_bin)
  RETURNS TEXT CHARACTER SET utf8 COLLATE utf8_bin
  BEGIN
    DECLARE output TEXT CHARACTER SET utf8 COLLATE utf8_bin DEFAULT '';
    DECLARE in_brackets BOOL DEFAULT FALSE;
    DECLARE length INT;

    IF(input IS NULL)
    THEN
      RETURN NULL;
    END IF;

    WHILE(TRUE) DO
      SET length = LOCATE(CASE WHEN in_parens THEN ']' ELSE '[' END, input);
      IF(length = 0)
      THEN
        RETURN CONCAT(output, input);
      END IF;

      IF(in_brackets)
      THEN
        SET in_brackets = FALSE;
      ELSE
        SET output = CONCAT(output, SUBSTRING(input, 1, length - 1));
        SET in_brackets = TRUE;
      END IF;

      SET input = SUBSTRING(input, length + 1);
    END WHILE;
  END //
DELIMITER ; 
```

# mysql - 用于检查字符串开头或结尾处的空格的 RegEx 模式

> ID：12214159
> 
> 赞同：3
> 
> 时间：2012-08-31T11:12:41.007
> 
> 标签：mysql, regex, whitespace

我知道这`\s`是用于匹配字符串中任何空格的模式。现在，我的问题是在字符串的开头或结尾检查空格的确切正则表达式模式应该是什么？

所以，如果我有一个字符串“hello world”，开头是空格，所以它会返回`true`。如果字符串是“hello world”，它也会返回`true`。空格位于字符串的开头和结尾。

我不需要删除空格，但我只需要检查从数据库中获取的数据是否在开头或结尾有空格。

这是我的 SQL 查询，但这并没有真正起作用。这只会拾取末尾有空格的数据：

```
select * from `data_table`
where `data_content` regexp '[ \f\t\v]$'; 
```

上面的查询给了我 7 个结果，因为最后只有 7 条记录有空格。我需要获取 3 条记录，它们在字符串的开头有空格。

我尝试运行这个 SQL 查询：

```
select * from `data_table`
where `data_content` regexp '^\s' || `data_content` regexp'\s$'; 
```

它给了我 87 个结果。我通过PHPMYADMIN一一检查了结果，我得到的结果是那些没有空格的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:40:09.120

使用`\s`空格给我带来了问题。所以，我`[[:blank:]]`改用了，**[效果很好](http://sqlfiddle.com/#!2/464d0/3)**：

```
select data_content as     'leading_or_trailing'
from   data_table
where  data_content regexp '^[[:blank:]]|[[:blank:]]$';

select data_content as     'leading'
from   data_table
where  data_content regexp '^[[:blank:]]';

select data_content as     'trailing'
from   data_table
where  data_content regexp '[[:blank:]]$'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-20T23:01:56.940

`[[:space:]]`是另一个可以工作的字符类。

此查询将查找在行首或行尾有空格的所有记录。

```
SELECT * FROM `foo` WHERE `bar` REGEXP '(^[[:space:]]|[[:space:]]$)' 
```

# android - 如何检查警报是否已设置并正在运行

> ID：12214160
> 
> 赞同：3
> 
> 时间：2012-08-31T11:12:50.647
> 
> 标签：android

我有一个在手机启动后启动的接收器，如下所示：

```
<receiver android:name=".OnBootReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>

</receiver> 
```

在我运行的接收器中设置这样的警报：

```
AlarmManager  mgr=(AlarmManager)context.getSystemService(Context.ALARM_SERVICE);

        Intent i=new Intent(context, LocationPoller.class);

        i.putExtra(LocationPoller.EXTRA_INTENT,
                  new Intent(context, LocationReceiver.class));
        i.putExtra(LocationPoller.EXTRA_PROVIDER,
                 LocationManager.GPS_PROVIDER);

         PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);
          mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                        SystemClock.elapsedRealtime(),
                        PERIOD,
                        pi); 
```

它工作正常，当然，当用户安装应用程序时，除非用户重启手机，否则不会设置警报。

要解决这个问题，我需要从我的 Activity 中检查是否设置了 AlarmManager，如果没有，我需要从 Activity 中设置。

因此，我如何检查是否已经设置了警报管理器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:24:44.357

您唯一能做的就是当用户安装应用程序并第一次打开它时，您可以在其中设置一个标志`SharedPreference`，告诉您是否设置了警报，如果未设置警报设置。

在您的主要`Activity` 检查`onCreate`方法中

```
SharedPreferences spref = getSharedPreferences("TAG", MODE_PRIVATE);

 Boolean   alaram_set = spref.getBoolean("alarm_set_flag", false);  //default is false

if(!alaram_set){
//create your alarm here then set the flag to true

 SharedPreferences.Editor editor = spref.edit();
        editor.putBoolean("alarm_set_flag", true); // value to store
        editor.commit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:27:41.583

遗憾的是，您无法查询 AlarmManager 以获取当前警报。

解决您的问题的最佳选择是[取消您当前的闹钟](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)并设置一个新闹钟。

您只需要创建一个与接收者中的意图相匹配的意图。[更多信息在这里](https://stackoverflow.com/questions/4315611/android-get-all-pendingintents-set-with-alarmmanager)

所以将此添加到您的活动中

```
 AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);

     Intent i=new Intent(context, LocationPoller.class);

        i.putExtra(LocationPoller.EXTRA_INTENT,
                  new Intent(context, LocationReceiver.class));
        i.putExtra(LocationPoller.EXTRA_PROVIDER,
                 LocationManager.GPS_PROVIDER);

        PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);
    // Cancel alarms
    try {
        AlarmManager.cancel(pi);
    } catch (Exception e) {
        Log.e(TAG, "AlarmManager update was not canceled. " + e.toString());
    }
mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                        SystemClock.elapsedRealtime(),
                        PERIOD,
                        pi); 
```

您可能需要更改意图的上下文，使其与接收器中的上下文相同。

另一种解决方法是检测它是否是应用程序的第一次启动，然后才启动它。但是，如果用户在第一次启动之前重启手机会发生什么？

# java - How to avoid Twitter emoticon character while processing string in Java

> ID：12214163
> 
> 赞同：4
> 
> 时间：2012-08-31T11:13:12.300
> 
> 标签：java, encoding, twitter, emoticons

I'm working on processing Tweets from Twitter and storing them in a database (MySQL).

I have my process running perfectly but sometimes I get an error like this one:

```
2012-08-31 08:11:23,303 WARN org.hibernate.engine.jdbc.spi.SqlExceptionHelper  - SQL Error: 1366, SQLState: HY000
2012-08-31 08:11:23,304 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper  - Incorrect string value: '\xF0\x9F\x98\x9D #...' for column 'twe_text' at row 1 
```

When looking for the problematic tweet in my logs I find the following one:

```
 2012-08-31 08:11:22,971 INFO com.myapp.TweetLoaderJob  - Text for tweet 241175722096480256: RT @totallytoyosi_: My go
odies, my goodies, not your goodies  <U+1F61D> #m&ms #sweeties #goodies #food  @ The Ritzy Cinema CafÃ©, Brixton htt ... 
```

And, finally, looking what the hell is , I discovered that it is an emoticon that Twitter sends [as-is](http://codepoints.net/U+1F61D)

I have debugged, looking only for this specific tweet and my eclipse seems to not recognize this encoding character. So the question is, how can I handle this exception? I looked for configuring my MySQL database, but I cannot change the encoding (it's a requirement), so my option is to avoid managing this kind of tweets or supress this complicated character.

But how to do it, if Java does not recognize it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:21:50.033

`<U+[^>]+>`在将字符串存储到数据库之前，您可以过滤字符串并删除不需要的部分（使用简单的正则表达式，例如）。

# c# - Cast generic type to interface type constraint

> ID：12214173
> 
> 赞同：5
> 
> 时间：2012-08-31T11:14:07.310
> 
> 标签：c#, .net

Is is possible to make the following compile without:

1.  Making `IFooCollection` generic
2.  Explicitly implementing `IFooCollection.Items` on `FooCollection` and performing an explicit cast.

* * *

```
public interface IFoo
{

}

public interface IFooCollection
{
    IEnumerable<IFoo> Items { get; }
}

public class FooCollection<T> : IFooCollection where T : IFoo
{
    public IEnumerable<T> Items { get; set; }
} 
```

I'm happy enough with the second solution (implementing the interface explicitly) but would like to understand why I need to cast `T` as `IFoo` when we have a generic constraint specifying that `T` must implement `IFoo`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T11:17:58.293

原因如下：

`IFooCollection.Items`可以包含任何实现`IFoo`. 所以它可以同时包含`FooA`, `FooB`, `FooC`。

`FooCollection<FooA>.Items`另一方面，只能包含 type 的元素`FooA`。尝试 cast`FooB`或`FooC`to`FooA`会产生一个`InvalidCastException`虽然 all implement `IFoo`。

# backbone.js - Backbone localstorage, deleting a row by a field

> ID：12214180
> 
> 赞同：1
> 
> 时间：2012-08-31T11:14:34.250
> 
> 标签：backbone.js, local-storage

I'm using the localstorage adapter by jeromegn [https://github.com/jeromegn/Backbone.localStorage](https://github.com/jeromegn/Backbone.localStorage)..

I am wondering if there's any way to delete an item with in local storage by a where clause, using his adapter..

Within my collection I have

```
localStorage: new Store("stuff") 
```

And then within a separate view, I need something like this..

`Collection.destroy({name = "Danny"});` - Which will find the row with danny and delete it..

Do I need to change his destroy function?

```
destroy: function(model) {
    this.localStorage().removeItem(this.name+"-"+model.id);
    this.records = _.reject(this.records, function(record_id){return record_id == model.id.toString();});
    this.save();
    return model;
  } 
```

How can I go about doing this, cheers!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:49:57.637

您可以使用

```
var name = "Danny";

var _name = Collection.find( function( model ) {
     return model.get("Name") === name;
});

_name.destroy(); 
```

# matlab - Matlab图形可见性

> ID：12214192
> 
> 赞同：0
> 
> 时间：2012-08-31T11:15:22.753
> 
> 标签：matlab, matlab-figure

我有一个 Matlab 函数，当它运行时，不知何故，matlab 中所有数字的“可见”属性都被关闭了。例如，如果我输入

```
figure 
```

什么都没有发生....但是如果我输入这个

```
figure('visible','on') 
```

空白图形正常显示。这种情况一直存在，直到我重新启动 Matlab。我的问题是，有没有办法重新打开这个“普遍可见性”？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:27:35.067

您可以在[此处](http://www.mathworks.nl/help/techdoc/creating_plots/f7-21465.html)找到如何设置图形和轴的默认属性。基本上，格式是

```
set(0, 'default[some property here]'); 
```

设置会话范围的默认值。请注意，您可以获得一些可以设置的默认参数的列表

```
get(0, 'default')
get(0, 'defaultfigure')
get(0, 'defaultaxes') 
```

另请注意，并非所有用户可设置的参数都显示出来，而且这样的列表实际上很难找到（我找不到它......）

无论如何，我怀疑你追求的是

```
set(0, 'DefaultFigureVisible', 'on'); 
```

# magento - Magento get one particular option from custom options block of a product

> ID：12214194
> 
> 赞同：0
> 
> 时间：2012-08-31T11:15:35.343
> 
> 标签：magento, options, product

I would like to output custom options in the tab pane (description and attributes) on the detailview page of a product. I installed the easytabs Extension to use the catalogproductcms.phtml template files to be able to output a particular custom option. Inside the template file I put getLayout()->getBlock('product.info.options')->toHtml(); ?>. With this all the custom options are displayed in the browser. How do I have to modify this call to get only a single option that I can define by some attribute?

# objective-c - How to change the Transparency of an UIImage not UIImageView in iPhone SDK

> ID：12214197
> 
> 赞同：2
> 
> 时间：2012-08-31T11:15:51.053
> 
> 标签：objective-c, ios

How to change the Alpha or transparency of UIImage Object not UIImageView or View

# mongodb - mongodb脚本文件

> ID：12214204
> 
> 赞同：7
> 
> 时间：2012-08-31T11:16:10.353
> 
> 标签：mongodb, mongodb-java

我是 mongodb 的新手。

我们可以通过在关系数据库中的脚本 .sql 文件中指定它来执行查询列表，并且可以通过运行命令 source c:\test.sql 来运行它。

我们如何在 mongodb 中做到这一点？如何将这些命令存储在 mongodb 脚本中以及如何在 mongodb 中执行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T11:20:54.413

您可以使用 shell 脚本来完成。您可以使用以下命令执行命令。

```
./mongo server:27017/dbname --quiet my_commands.js 
```

有关详细信息，请查看在 Mongo 文档中[编写 shell](http://www.mongodb.org/display/DOCS/Scripting+the+shell)文档的脚本。

# javascript - location.href to a link without http://

> ID：12214206
> 
> 赞同：2
> 
> 时间：2012-08-31T11:16:19.800
> 
> 标签：javascript, button, onclick, location-href

I have a webpage - [http://www.example.com/](http://www.example.com/) - where I have a button. On click of the button I need to go to a particular link (www.google.com). The button is like :

```
<input type="button"
       onclick="javascript:location.href='www.google.com'"
       value="Click" /> 
```

But this button opens a page "http://www.example.com/www.google.com" which is wrong URL.

I have tried `window.location`, `document.location`, `document.location.href`, `location.href` but all in vain.

The URL in my onclick can not be restricted to begin with 'http://'.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T11:21:35.903

您可以通过在 URL 前加上前缀来使用“当前”协议`//`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-14T11:53:30.913

**在 url 之前添加http://**前缀 可能会解决您的问题。

```
if (!url.match(/^http?:\/\//i) || !url.match(/^https?:\/\//i)) {
        url = 'http://' + url;
    } 
```

检查 [这个](https://stackoverflow.com/a/50856848/5803974)和[这个](https://stackoverflow.com/a/29684929/5803974)以获取更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:21:57.323

由于您没有包含协议（例如 http），因此您的浏览器将解释`www.google.com`为指向 的链接`http://www.example.com/www.google.com`，因为您当前在`http://www.example.com`. 将您想要的任何协议添加到 href 字符串，但如果您指的是网站本身以外的其他地方，则必须拥有该协议。

# listview - Display items from a List in a List View in a metro app

> ID：12214210
> 
> 赞同：0
> 
> 时间：2012-08-31T11:16:29.973
> 
> 标签：listview, windows-8, microsoft-metro, listviewitem, .net-4.5

I have a List. It is populated with CustomObjects when a query is run on a database (and matching results are put into this List)

However, I then want to display each of the e.g. name properties of these resultant custom objects in a listview, this is the part that is causing me trouble.

Im unsure how to set up the template of the list view to display the data from the list. The furthest I have been able to get is as follows: If the result of the query has 3 matches, I can make 3 textboxes saying "HELLO" appear in the list view. This is achieved by putting a textbox saying "HELLO" in the template part of the listview (which is otherwise laid out as it is in the grid template of VS2012). Is the solution something to do with bindings?

Any help would be much appreciated. (working on a metro app, windows 8, .NET 4.5)

what I currently have looks something like this

```
List<CustomObject> CustObjList =... //gets matches from database
listView.ItemsSource = CustObjList; 
```

then in the XAML is this

```
<ListView.ItemTemplate>
   <DataTemplate>

      <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
           <ScrollViewer x:Name="scrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}" Grid.Row="1">
                <TextBlock x:Name="listViewText" Text="HELLO" <--(???) Margin="30,0,0,0" Foreground="Black"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:37:50.993

听起来您正在将数据放入 ListView，只是没有正确绑定属性。在文本框所在的模板中，将 TextBox 上的 Text 属性更改为 Text={Binding YourPropertyName"}。这是一篇很棒的文章，可帮助您了解基础知识... [http://msdn.microsoft.com/en -us/library/windows/apps/xaml/Hh780650(v=win.10).aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh780650(v=win.10).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:39:18.470

是的，您需要的是绑定。

查看这篇[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh780650%28v=win.10%29.aspx)，了解 Windows 8 XAML 应用程序中的各种列表。

特别是，查看`ItemTemplate`. 请注意`TextBlock`s 如何绑定到绑定集合中每个对象的属性：`<TextBlock Text="{Binding Description}"`

```
<ListView x:Name="itemListView"
          Margin="120,0,0,60"
          ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
          SelectionChanged="ItemListView_SelectionChanged">
    <ListView.ItemTemplate>
        <DataTemplate>
            <Grid Height="110" Margin="6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Width="110" Height="110">
                    <Image Source="{Binding Image}" Stretch="UniformToFill"/>
                </Border>
                <StackPanel Grid.Column="1" VerticalAlignment="Top" Margin="10,0,0,0">
                    <TextBlock Text="{Binding Title}" Style="{StaticResource TitleTextStyle}" TextWrapping="NoWrap"/>
                    <TextBlock Text="{Binding Subtitle}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap"/>
                    <TextBlock Text="{Binding Description}" Style="{StaticResource BodyTextStyle}" MaxHeight="60"/>
                </StackPanel>
            </Grid>
        </DataTemplate>
    </ListView.ItemTemplate>          
</ListView> 
```

# ios - iOS: Continuos waiting on flag till location updated

> ID：12214211
> 
> 赞同：0
> 
> 时间：2012-08-31T11:16:33.987
> 
> 标签：ios, cllocationmanager, volatile

I am trying to get the current location whenever required and stop updating locations immediately. For this I wrote following code but continuos waiting on volatile flag doen't seem to working. It doesn't fire location updates evens when I am waiting on the flag. Could someone please tell me what's wrong in my code. Thanks.

```
CurrentLocation.h file:

@property (nonatomic, assign) volatile BOOL locationUpdatedFlag;
@property (nonatomic, strong) CLLocationManager *locationManager;
@property (nonatomic, strong) CLLocation *currentLocation;

CurrentLocation.m file:

@synthesize currentLocation = _currentLocation;
@synthesize locationManager = _locationManager;
@synthesize locationUpdatedFlag = _locationUpdatedFlag;

- (void)xxx
{
    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.delegate = self;
    self.locationManager.desiredAccuracy = kCLLocationAccuracyNearestTenMeters;
    [self.locationManager startUpdatingLocation];

    self.locationUpdatedFlag = NO;

    while(!self.locationUpdatedFlag)
        [NSThread sleepForTimeInterval:.1];

    // Use self.currentLocation

}

#pragma mark - CLLocationManagerDelegate

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    self.currentLocation = newLocation;
    self.locationUpdatedFlag = YES;
    [manager stopUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{   
    NSLog(@"Error from Location Manager");
    self.locationUpdatedFlag = YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:22:41.377

你有那个委托回调是有原因的......所以你不必锁定线程轮询是否完成。改变你的类的设计，这样你就不会再这样做了。我敢打赌它会解决您的问题，并且您将获得更好的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T09:40:54.040

解决此问题的常用方法是删除`while(){sleep}`部件并将其移至停止管理器后`// Use self.currentLocation operations`调用的单独方法。`locationManager:didUpdateToLocation:fromLocation:`这是委托最自然的用法，您会想使用它。除此之外，还有许多其他解决方案，例如将观察者添加到`locationUpdatedFlag`keypath 或手动创建`separate`线程以等待它像您一样休眠。

# objective-c - Get NSView screen rect and display ID

> ID：12214214
> 
> 赞同：0
> 
> 时间：2012-08-31T11:16:43.013
> 
> 标签：objective-c, macos, cocoa, nsview, nsrect

Given an `NSView`, how can I get its screen-rect and the display it's on, so I can use [`CGDisplayCreateImageForRect`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/Quartz_Services_Ref/Reference/reference.html)?

I found the NSWindow [`convertRectToScreen`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html) method, but it's only available from 10.7 (I need 10.6 as well), and it still doesn't give the display the `NSView` is on.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T16:11:24.907

假设您不关心获取视图的实际像素大小（因为它在 HDPI 和常规显示器之间会有所不同——我无法想象它现在会是一个有用的值），您基本上只想使用NSView`convertRect:toView:`和 NSWindow 的组合`convertBaseToScreen:`。所以，例如，`[someView.window convertBaseToScreen:[someView convertRect:someView.bounds toView:nil]]`。这是假设您没有以任何不寻常的方式（旋转它或其他方式）转换视图。请记住，您仍然应该添加一个检查窗口是否响应`convertRectToScreen:`并在它响应时使用它 - 这样您就可以避免使用已弃用的方法 ( `convertBaseToScreen:`) 在可能的情况下。

之后，如果您需要屏幕的确切像素大小，则可以使用 NSScreen `convertRectToBacking:`（我不确定您是否需要它）。至于确定屏幕，NSWindow 有它的`screen`方法，在大多数情况下应该足够了。我能看到的唯一问题是视图跨屏幕时，因此您可能必须检查它是否与任何其他显示器相交并合并图像等等。也就是说，我不确定是否`CGDisplayCreateImageForRect`会考虑到这一点。你必须自己测试一下。

# php - TYPO3：我该如何允许 RTE 编辑器中的标签？

> ID：12214221
> 
> 赞同：1
> 
> 时间：2012-08-31T11:16:57.523
> 
> 标签：php, html, video, typo3

我对 TYPO3 不是很熟悉，但有人要求我在 TYPO3 网站上插入一些视频。然而，它似乎允许标签。我试图将它放在 proc 文件夹内 pageTSConfig.text 的允许列表中。（我无法从后端访问 TSconfig 吗？）

如何允许视频标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:22:38.237

如果您无法访问 TSConfig，则应检查是否可以在创建新内容元素时选择“HTML”内容类型。这允许您放置未进一步处理的原始 HTML。

# iphone - 使用 ALAssetsLibrary，直接打开特定专辑

> ID：12214223
> 
> 赞同：2
> 
> 时间：2012-08-31T11:17:03.907
> 
> 标签：iphone, uiimagepickercontroller, alassetslibrary, iphone-developer-program

我`ALAssetsLibrary`在我的应用程序中使用。从相机获取图像后，我将它们保存在库中的单独文件夹中。

我现在这样做的方式是`ALAssetsLibrary`通过`imagePickerControllerDidCancel`.

我想要的是直接打开那个特定的保存图像文件夹，而不是先选择选择相册。从 Github使用`ELCImagePickerController`实际上是先浏览整个库，然后再选择一张专辑。

# core-data - NSPredicate 中使用的 SUBQUERY( ) 是否不支持所有集合运算符，如 @max、@min？

> ID：12214225
> 
> 赞同：3
> 
> 时间：2012-08-31T11:17:05.220
> 
> 标签：core-data, subquery, nspredicate

我修改了 Apple 开发人员网站上的 CoreDataBooks 示例，并`num`在 entity 中添加了一个整数属性`Book`。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:"SUBQUERY(book, $b, $b.author == self.author).@min.num == self.num"]; 
```

我用它`NSPredicate`来获取元素的数量是所有同一作者书籍中最小值的书籍，但我收到此错误：

> 'NSInvalidArgumentException'，原因：'不支持的 KVC 函数在尾随 keypath SUBQUERY(book, $b, $b.author == author), @min.num'

我想知道子查询是否不支持`@max`，`@min`或者我的谓词有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T00:52:25.683

SUBQUERY 结果应该支持所有集合键路径运算符，或者至少文档建议如此。

该错误消息似乎表明您的代码中的谓词中有一个逗号。它只是被框架修改了吗？

“@min”返回一个数字。您要求的“.num”键是什么？某种自定义属性？NSNumber 是否通过类别支持？不然我认不出来。您不需要（也不应该尝试）将 NSNumber 对象转换为原始 C 类型或类似的东西。

您是否尝试过更多类似的方法：

“self.num == SUBQUERY(book, $b, $b.author == self.author).@min” ？

# jquery - 如何阻止 JQuery tmpl 从看似四舍五入的长数字

> ID：12214241
> 
> 赞同：1
> 
> 时间：2012-08-31T11:17:56.260
> 
> 标签：jquery, jquery-templates

我在这里发布了一个示例 - [http://jsfiddle.net/bizl/tSVHu/](http://jsfiddle.net/bizl/tSVHu/)

这个简单数组的 long 值发生了变化——特别是以 9 或 7 结尾的数字被更改为 8（所以它不是很四舍五入）。我不明白为什么

```
 var a = [
          { "id": 13532811000001109, "name": "Dabigatran etexilate 110mg capsules",  "Group": "High Risk", "VPID": 13532811000001109   }, 
          { "id": 13532911000001104, "name": "Dabigatran etexilate 75mg capsules",  "Group": "High Risk", "VPID": 13532911000001104   },
          { "id": 13532811000001109, "name": "Pradaxa 110mg capsules (Boehringer Ingelheim Ltd)",  "Group": "High Risk", "VPID": 13532811000001109, "APID": 13505411000001109  },
          { "id": 13532911000001104, "name": "Pradaxa 75mg capsules (Boehringer Ingelheim Ltd)",  "Group": "High Risk", "VPID": 13532911000001104, "APID": 13504711000001102  }
          ]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:30:19.653

将您的整数转换为字符串，请参阅我上面的评论。

[http://jsfiddle.net/tSVHu/2/](http://jsfiddle.net/tSVHu/2/)

# perl - PERL 如何将本地时间格式转换为 unixtime

> ID：12214246
> 
> 赞同：2
> 
> 时间：2012-08-31T11:18:06.557
> 
> 标签：perl, unix-timestamp

谁能帮我这个？我在具有以下格式的日志文件文件中有一个时间值：

**2012 年 8 月 28 日星期二 09:50:06**

我需要将此时间值转换为 unixtime。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:54:39.707

您最好的选择是[`Time::Piece`](https://metacpan.org/module/Time::Piece)，这是一个核心模块，因此不需要安装。它有一个`strptime`解析时间/日期字符串的`epoch`方法和一个返回 Unix 纪元时间的方法

将其滚动到子程序中很方便，如下所示

```
use strict;
use warnings;

use Time::Piece ();

print date_to_epoch('Tue Aug 28 09:50:06 2012'), "\n";

sub date_to_epoch {
   return Time::Piece->strptime($_[0], '%a %b %d %T %Y')->epoch;
} 
```

**输出**

```
1346147406 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:28:13.037

这对我有用（需要[`DateTime::Format::Strptime`](http://search.cpan.org/~drolsky/DateTime-Format-Strptime-1.52/lib/DateTime/Format/Strptime.pm)）：

```
#!/usr/bin/perl

use strict;
use warnings;

use DateTime::Format::Strptime;

my $strp = DateTime::Format::Strptime->new(
  pattern   => '%a %b %d %H:%M:%S %Y',
  locale    => 'en_US',
  time_zone => 'local',  # Or even something like 'America/New_York'
  on_error  => 'croak',
);

my $dt = $strp->parse_datetime('Tue Aug 28 09:50:06 2012');

print $dt->epoch() . "\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:35:15.140

使用 Time::Piece 模块中的 strptime 函数解析日期，然后使用 strftime 函数返回 Unix 时间戳。

```
use Time::Piece;
$parsed = Time::Piece->strptime("Tue Aug 28 09:50:06 2012", "%a %b %e %T %Y");
$unixtime = $parsed->strftime("%s"); 
```

# java - 备份变量

> ID：12214249
> 
> 赞同：0
> 
> 时间：2012-08-31T11:18:16.073
> 
> 标签：java, variables, backup

在我的 JAVA 程序中，我每小时扫描一次文件夹并检查这些文件夹是否有更改。如果有更改，我会收到一个唯一编号来识别此文件。这些数据存储在字段变量中。所以我需要将数据存储在本地，以防重启或崩溃。

我的数据结构：

```
Map<String, Long> currentFiles = new HashMap<String, Long>();
Map<String, Long> prevFiles = new HashMap<String, Long>(); 
```

我应该使用哪个备份？应保存数据以防修改。这些数据不是机密的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:20:54.213

为什么不试试Java 7 中的[WatchService ？](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)您将无需使用自定义数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:26:02.500

您可以简单地序列化和反序列化您的数据结构，它看起来确实是可序列化的。[小费](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

或者，如果您更喜欢更强大的解决方案，您可以使用简单的 DB（在您的应用程序进程之外）创建 DB 表，这样它就可以在崩溃中幸存下来，并重新加载您的数据结构。（例如一些简单的基于 Java 的 DB：[JavaDB](http://www.oracle.com/technetwork/java/javadb/overview/index.html)、[h2](http://www.h2database.com/html/main.html)、[HSQLDB](http://hsqldb.org/)）

# c# - 更改数据视图中的正常值

> ID：12214253
> 
> 赞同：0
> 
> 时间：2012-08-31T11:18:27.137
> 
> 标签：c#, .net, asp.net-3.5, dataview

我有一些列的数据视图：

```
<Columns>  
    <asp:BoundField DataField="report_type" HeaderText="Report Type"   
        SortExpression="report_type" />  
    <asp:BoundField DataField="comments" HeaderText="Comments"   
        SortExpression="comments" />  
    <asp:BoundField DataField="anonymouse" HeaderText="anonymouse"   
        SortExpression="anonymouse" />  
    <asp:BoundField DataField="user" HeaderText="Reported by"   
        SortExpression="user" />  
</Columns> 
```

我将从屏幕上删除匿名列，所以我只是在此处添加它以用于演示目的。

anonymouse 列具有 a`1`或 a `0`。如果是 a `1`，我需要将 user 列中的文本设置为`private`，如果 anonymouse 列是 a`0`，它应该正常显示用户名。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:03:42.933

您可以尝试使用 RowDataBound

```
void Control_RowDataBound(Object sender, GridViewRowEventArgs e)
  {

    if(e.Row.RowType == DataControlRowType.DataRow)
    {
      if(e.Row.Cells[3].Text == "1")
      {
         e.Row.Cells[4].Text = ""; // erase the value of cell
         //You can use also to cell : Attributes["style"] = "display:none";

      }
      else
      {
        .... 
      }
  } 
```

}

# encryption - Java AES加密奇怪的结果

> ID：12214254
> 
> 赞同：0
> 
> 时间：2012-08-31T11:18:28.583
> 
> 标签：encryption, aes

我正在尝试使用 AES 算法加密一个简单的字符串。一切似乎都很好，我能够解密它。只是出于好奇，我将加密的数据打印到控制台，我很惊讶地看到它。

输入字符串：原始文本字符串。

加密数据：Díå¼[¶cE¶Ÿ¸'E,;èýaó1ÒŽ&ýÈZ

解密数据：原始文本字符串。

谁能解释一下为什么加密的数据位是输入字符串的两倍长..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:30:35.803

加密适用于固定大小的数据块。在编码过程中添加适当的填充，在解码过程中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:28:27.737

我不会依赖显示一个特殊的字符串来告诉它的长度。在加密时，您通常会得到一个应该为您提供确切值的值`byte[]`。`length`如果你想打印它，十六进制表示看起来更清晰：

```
public static void showHex(byte[] data) {
    final String HEXDIGITS = "0123456789abcdef";
    StringBuilder res = new StringBuilder();

    for (int i = 0; i < data.length; i++) {
        int v = data[i] & 0xff;
        res.append(HEXDIGITS.charAt(v >> 4));
        res.append(HEXDIGITS.charAt(v & 0xf));
    }

    System.out.println(res);
} 
```

# android - Android id的冲突

> ID：12214255
> 
> 赞同：1
> 
> 时间：2012-08-31T11:18:30.300
> 
> 标签：android

我遇到了无法解决的问题...

问题是当我执行默认代码时它只工作一次。如果我再按一次按钮，它会正确显示第二个按钮信息，但第一个按钮信息为空。任何想法？

```
public void onClick(View arg0) {

    // TODO Auto-generated method stub
    switch(arg0.getId()){

        case R.id.save:

            if (et.getText() !=null && thumbnail != null){              
                 TableRow tr = new TableRow(this);
                 ImageView view = new ImageView(this);
                 TextView view2 = new TextView(this);
                 Button view3 = new Button(this);
                 view3.setOnClickListener(this);
                 titulo = new String[500];
                 mensaje = new String[500];
                 fotos = new Bitmap[500];
                 view3.setId(i);
                 view.setImageBitmap(thumbnail);
                 view.setPadding(1, 5, 0, 0);
                 view.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
                 Calendar c = Calendar.getInstance();
                 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");
                 titulo[i]=""+et.getText();
                 mensaje[i]=""+et1.getText();
                 fotos[i]=thumbnail;     
                 view2.setText(titulo[i] + "       "+view3.getId()+"       "+ i+"       "+ dateFormat.format(c.getTime()) );
                 view2.setGravity(Gravity.CENTER_HORIZONTAL);
                 view2.setGravity(Gravity.CENTER_VERTICAL);
                 i++;

                 view3.setGravity(Gravity.RIGHT);
                 view3.setGravity(Gravity.CENTER_VERTICAL);
                 DisplayMetrics metrics = new DisplayMetrics();
                 getWindowManager().getDefaultDisplay().getMetrics(metrics);
                 tr.addView(view, metrics.widthPixels/3, 150);
                 tr.addView(view2, metrics.widthPixels/2, 100);
                 tr.addView(view3, metrics.widthPixels/6, 20);
                 tl.addView (tr, 0);                     
                 final Toast toastMensaje = Toast.makeText(getApplicationContext(),
                            "Tu entrada se cargó correctamente", Toast.LENGTH_LONG);
                    toastMensaje.setGravity(Gravity.CENTER, 0, 0);
                    toastMensaje.show();
                    et.setText("");
                    et1.setText("");
                    i1.setVisibility(View.GONE);
            }
            else{       
                final Toast toastMensaje = Toast.makeText(getApplicationContext(),
                        "Tienes que añadir un título y una foto", Toast.LENGTH_LONG);
                toastMensaje.setGravity(Gravity.CENTER, 0, 0);
                toastMensaje.show();
            }
        break;

        case R.id.photo:

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
            startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

        break;

        case R.id.gallery:

            Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(intent, TFRequestCodes);

        break;

        default:    
                Toast toastMensaje = Toast.makeText(getApplicationContext(),
                        titulo[arg0.getId()], Toast.LENGTH_LONG);
                toastMensaje.setGravity(Gravity.CENTER, 0, 0);
                toastMensaje.show();
                /*
                Intent i = new Intent(Second.this, Display.class);
                i.putExtra("titulo", titulo[index]);
                i.putExtra("mensaje", mensaje[index]);
                startActivity(i);*/

            break;
    }
} 
```

# design-patterns - CQRS：命令有效性和 UI

> ID：12214257
> 
> 赞同：3
> 
> 时间：2012-08-31T11:18:37.727
> 
> 标签：design-patterns, architecture, cqrs

我目前正在研究是否可以在构建特定系统时应用 CQRS，并且有一些我无法轻易找到答案的问题。

在 CQRS 中，命令用于响应用户操作。用户通过 UI 选择他们想要的操作，UI 层知道哪些命令将处理它们。

但是，有时命令根据上下文无效，例如用户角色、实体业务状态（公共、存档）和用户与实体的关系（例如，工单具有报告者和人员分配）。

命令可以将此作为整体验证的一部分进行检查。显然，如果命令对特定实体状态无效，则不应进行任何更改，因此如果适用，验证和更改应包含在事务中。

这一切都很好也很有必要，但是我们需要知道命令在 UI 层中是否有效（对于上下文，我们不关心这里的完整验证）所以适当的 UI 元素（如按钮或菜单项）将被省略，如果它不适用。因此，在我看来，详细信息/更新视图的读取模型应该返回有效命令列表。此外，如果存在列出实体的读取模型，则此处也需要使用相同的规则和代码进行类似的安全修整。

作为奖励，一些实体具有依赖于时间的状态，因此它不能存储在模型中，但必须在运行时使用当前服务器时间确定。

读取模型无法存储此类信息的事实也很明显，因为没有上下文就无法知道它。

正如我所看到的，在不违反 DRY 的情况下以用户友好和干净的方式处理这个问题（以免重复业务逻辑），我们必须在此处稍微弯曲 CQRS，方法是根据上下文和业务状态检查附加额外的查询条件并添加有效列表读取模型中的命令，因此这些系统方面变得不那么分离，并且*返回读取模型的过程涉及命令处理程序*。

也许我在这里担心太多，并且可以通过横切关注来允许安全修剪违反 CQRS 原则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:53:01.680

你的基本假设是正确的。只有当应用程序有很高的成功机会时，才应将命令发送到应用程序。任何给定的 UI 都应该只可以使用有效的命令，并且还应该进行基本的客户端验证。

关于你的第二个问题：如果你的领域模型的状态随着时间的推移发生变化，那么这些变化就是领域事件，而反过来又可以通过投影显式建模和处理，以相应地更新读取模型。

# asp.net - 发出 HTTP Web 请求 - asp.net

> ID：12214263
> 
> 赞同：0
> 
> 时间：2012-08-31T11:19:09.400
> 
> 标签：asp.net, vb.net

我想向 Web 服务器发出 http 请求 - 我要激活的链接是

```
http://webserver/cgi-bin/fccgi.exe?w3exec=web.programname&w3serverpool=fcserverpool&optid=headline 
```

它不能是超链接，因为我不希望页面去任何地方只需向该服务器发出请求/

这是通过httpwebrequest完成的吗？...任何人都知道asp.net（vb）中的一个很好的例子

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:21:51.190

是的，只需执行以下操作：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://webserver/cgi-bin/fccgi.exe?w3exec=web.programname&w3serverpool=fcserverpool&optid=headline");
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

using (response) {
   StreamReader reader = new StreamReader(response.GetResponseStream());

   reader.ReadToEnd();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:21:41.907

我相信您正在寻找[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)课程。

> 提供用于向由 URI 标识的资源发送数据和从其接收数据的常用方法。

```
WebClient client = new WebClient ();
string reply = client.DownloadString (address); 
```

# c# - 无法将 mdi 子窗体放在前面

> ID：12214267
> 
> 赞同：0
> 
> 时间：2012-08-31T11:19:43.143
> 
> 标签：c#, mdi

我有一个 MDI 父表单，我在其中打开 MDI 子表单，但是如果我再次单击，我不想重新打开它们，而不是我想专注于已经打开的那个特定的 mdi 子表单，我是通过单击我的菜单条来完成这项工作。我已经尝试了很多来成功地做到这一点，但一直都失败了。好吧，我的代码是：

这是一个方法...

```
private bool CheckMdiClientDuplicates(string WndCls)
{
    Form[] mdichld = this.MdiChildren;
    if (this.MdiChildren.Length == 0)
    {
        return true;
    }
    foreach (Form selfm in mdichld)
    {
        string str = selfm.Name;
        str = str.IndexOf(WndCls).ToString();
        if (str != "-1")
        {
            return true;
        }
    }
    return false;
} 
```

我正在通过...实现此方法

```
private void myToolStripMenuItem_Click(object sender, EventArgs e)
{
    MyForm f = new MyForm();//MyForm is the form on which i am working
    if (CheckMdiClientDuplicates("MyNamespace.MyForm") == true)
    {
        f.MdiParent = this;
        f.Show();
    }
    else
    {
        f.Activate();
        f.BringToFront();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:24:08.847

`f`仍然是你的`new MyForm()`，所以你期望`Activate`它会做什么？你需要得到你想要带到前面的实际表格`Activate`。

`MyForm`此外，除非您打算使用它，否则您可能不想制作新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T08:33:49.953

你应该试试这段代码：

这是当您单击按钮以显示第一个表单时：

```
private void button1_click(object sender, EventArgs e){
        Form1 f1 = null;
        if (IsFormAlreadyOpen(typeof(Form1)) == null)
        {
            if (ActiveMdiChild != null)
            {
                ActiveMdiChild.Close();
            }
            f1 = new Form1();
            f1.MdiParent = this;
            f1.Show();
        }
} 
```

方法：

```
public static Form IsFormAlreadyOpen(Type FormType)
    {
        foreach (Form OpenForm in Application.OpenForms)
        {
            if (OpenForm.GetType() == FormType)
                return OpenForm;
        }

        return null;
    } 
```

当您单击另一个表单的下一步按钮时，请执行相同操作。

# iphone - 在 xcode 中安装 OpenCV

> ID：12214273
> 
> 赞同：3
> 
> 时间：2012-08-31T11:20:31.723
> 
> 标签：iphone, ios, ios4, opencv, xcode4

我使用波纹管链接在我的项目中安装 opencv 但是我们如何在终端中生成命令我不知道有人可以帮助我吗？ [http://aptogo.co.uk/2011/09/opencv-framework-for-ios/](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-31T13:40:10.100

如果你想在 iOS 上使用 OpenCV，你应该使用 OpenCV 提供的官方框架（从 2.4.2 版本开始）。

在此处获取最新版本：[OpenCV for iOS](http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/2.4.2/opencv2.framework.zip/download)，将其放入您的项目中并将其包含在您的项目前缀中：

**ExampleApp-Prefix.pch：**

```
#ifdef __cplusplus
    #import <opencv2/opencv.hpp>
#endif 
```

您还必须将 UIImage“转换”为 cv::Mat 才能将其与 OpenCV 一起使用。

**UIImageCVmatConverter.h:**

```
//
//  UIImageCVMatConverter.h
//

#import <Foundation/Foundation.h>

@interface UIImageCVMatConverter : NSObject {

}

+ (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat;
+ (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat withUIImage:(UIImage*)image;
+ (cv::Mat)cvMatFromUIImage:(UIImage *)image;
+ (cv::Mat)cvMatGrayFromUIImage:(UIImage *)image;
+ (UIImage *)scaleAndRotateImageFrontCamera:(UIImage *)image;
+ (UIImage *)scaleAndRotateImageBackCamera:(UIImage *)image;

@end 
```

**UIImageCVmatConverter.mm:**

```
//
//  UIImageCVMatConverter.mm
//

#import "UIImageCVMatConverter.h"

@implementation UIImageCVMatConverter

+ (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat withUIImage:(UIImage*)image;
{
  CGColorSpaceRef colorSpace = CGImageGetColorSpace( image.CGImage );
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;
    CGFloat widthStep = image.size.width;
    CGContextRef contextRef = CGBitmapContextCreate( NULL, cols, rows, 8, widthStep*4, colorSpace, kCGImageAlphaNoneSkipLast | kCGBitmapByteOrderDefault );
    CGContextDrawImage( contextRef, CGRectMake(0, 0, cols, rows), image.CGImage );
    CGContextSetRGBStrokeColor( contextRef, 1, 0, 0, 1 );
    CGImageRef cgImage = CGBitmapContextCreateImage( contextRef );
    UIImage* result = [UIImage imageWithCGImage:cgImage];
    CGImageRelease( cgImage );
    CGContextRelease( contextRef );
    CGColorSpaceRelease( colorSpace );
    return result;
}

+(UIImage *)UIImageFromCVMat:(cv::Mat)cvMat
{
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize()*cvMat.total()];
    CGColorSpaceRef colorSpace;
    if ( cvMat.elemSize() == 1 ) {
        colorSpace = CGColorSpaceCreateDeviceGray();
    }
    else {
        colorSpace = CGColorSpaceCreateDeviceRGB();
    }
    CGDataProviderRef provider = CGDataProviderCreateWithCFData( (__bridge CFDataRef)data );
    CGImageRef imageRef = CGImageCreate( cvMat.cols, cvMat.rows, 8, 8 * cvMat.elemSize(), cvMat.step[0], colorSpace, kCGImageAlphaNone|kCGBitmapByteOrderDefault, provider, NULL, false, kCGRenderingIntentDefault );
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease( imageRef );
    CGDataProviderRelease( provider );
    CGColorSpaceRelease( colorSpace );
    return finalImage;
}

+ (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace( image.CGImage );
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;
    cv::Mat cvMat( rows, cols, CV_8UC4 );
    CGContextRef contextRef = CGBitmapContextCreate( cvMat.data, cols, rows, 8, cvMat.step[0], colorSpace, kCGImageAlphaNoneSkipLast | kCGBitmapByteOrderDefault );
    CGContextDrawImage( contextRef, CGRectMake(0, 0, cols, rows), image.CGImage );
    CGContextRelease( contextRef );
    CGColorSpaceRelease( colorSpace );
    return cvMat;
}

+ (cv::Mat)cvMatGrayFromUIImage:(UIImage *)image
{
  cv::Mat cvMat = [UIImageCVMatConverter cvMatFromUIImage:image];
  cv::Mat grayMat;
    if ( cvMat.channels() == 1 ) {
        grayMat = cvMat;
  }
    else {
        grayMat = cv :: Mat( cvMat.rows,cvMat.cols, CV_8UC1 );
        cv::cvtColor( cvMat, grayMat, CV_BGR2GRAY );
    }
  return grayMat;
}

+ (UIImage *)scaleAndRotateImageBackCamera:(UIImage *)image
{
  static int kMaxResolution = 640;
  CGImageRef imgRef = image.CGImage;
  CGFloat width = CGImageGetWidth( imgRef );
  CGFloat height = CGImageGetHeight( imgRef );
  CGAffineTransform transform = CGAffineTransformIdentity;
  CGRect bounds = CGRectMake( 0, 0, width, height );
  if ( width > kMaxResolution || height > kMaxResolution ) {
    CGFloat ratio = width/height;
    if ( ratio > 1 ) {
      bounds.size.width = kMaxResolution;
      bounds.size.height = bounds.size.width / ratio;
    }
        else {
      bounds.size.height = kMaxResolution;
      bounds.size.width = bounds.size.height * ratio;
    }
  }
  CGFloat scaleRatio = bounds.size.width / width;
  CGSize imageSize = CGSizeMake( CGImageGetWidth(imgRef), CGImageGetHeight(imgRef) );
  CGFloat boundHeight;
  UIImageOrientation orient = image.imageOrientation;
  switch( orient ) {
    case UIImageOrientationUp:
      transform = CGAffineTransformIdentity;
      break;
    case UIImageOrientationUpMirrored:
      transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
      transform = CGAffineTransformScale(transform, -1.0, 1.0);
      break;
    case UIImageOrientationDown:
      transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
      transform = CGAffineTransformRotate(transform, M_PI);
      break;
    case UIImageOrientationDownMirrored:
      transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
      transform = CGAffineTransformScale(transform, 1.0, -1.0);
      break;
    case UIImageOrientationLeftMirrored:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
      transform = CGAffineTransformScale(transform, -1.0, 1.0);
      transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
      break;
    case UIImageOrientationLeft:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
      transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
      break;
    case UIImageOrientationRightMirrored:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeScale(-1.0, 1.0);
      transform = CGAffineTransformRotate(transform, M_PI / 2.0);
      break;
    case UIImageOrientationRight:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
      transform = CGAffineTransformRotate(transform, M_PI / 2.0);
      break;
    default:
      [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];
  }
  UIGraphicsBeginImageContext( bounds.size );
  CGContextRef context = UIGraphicsGetCurrentContext();
  if ( orient == UIImageOrientationRight || orient == UIImageOrientationLeft ) {
    CGContextScaleCTM( context, -scaleRatio, scaleRatio );
    CGContextTranslateCTM( context, -height, 0 );
  }
    else {
    CGContextScaleCTM( context, scaleRatio, -scaleRatio );
    CGContextTranslateCTM( context, 0, -height );
  }
  CGContextConcatCTM( context, transform );
  CGContextDrawImage( UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef );
  UIImage *returnImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return returnImage;
}

+ (UIImage *)scaleAndRotateImageFrontCamera:(UIImage *)image
{
  static int kMaxResolution = 640;
  CGImageRef imgRef = image.CGImage;
  CGFloat width = CGImageGetWidth(imgRef);
  CGFloat height = CGImageGetHeight(imgRef);
  CGAffineTransform transform = CGAffineTransformIdentity;
  CGRect bounds = CGRectMake( 0, 0, width, height);
  if (width > kMaxResolution || height > kMaxResolution) {
    CGFloat ratio = width/height;
    if (ratio > 1) {
      bounds.size.width = kMaxResolution;
      bounds.size.height = bounds.size.width / ratio;
    } else {
      bounds.size.height = kMaxResolution;
      bounds.size.width = bounds.size.height * ratio;
    }
  }

  CGFloat scaleRatio = bounds.size.width / width;
  CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
  CGFloat boundHeight;
  UIImageOrientation orient = image.imageOrientation;
  switch(orient) {
    case UIImageOrientationUp:
      transform = CGAffineTransformIdentity;
      break;
    case UIImageOrientationUpMirrored:
      transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
      transform = CGAffineTransformScale(transform, -1.0, 1.0);
      break;
    case UIImageOrientationDown:
      transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
      transform = CGAffineTransformRotate(transform, M_PI);
      break;
    case UIImageOrientationDownMirrored:
      transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
      transform = CGAffineTransformScale(transform, 1.0, -1.0);
      break;
    case UIImageOrientationLeftMirrored:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
      transform = CGAffineTransformScale(transform, -1.0, 1.0);
      transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
      break;
    case UIImageOrientationLeft:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
      transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
      break;
        case UIImageOrientationRight:
    case UIImageOrientationRightMirrored:
      boundHeight = bounds.size.height;
      bounds.size.height = bounds.size.width;
      bounds.size.width = boundHeight;
      transform = CGAffineTransformMakeScale(-1.0, 1.0);
      transform = CGAffineTransformRotate(transform, M_PI / 2.0);
      break;
        default:
      [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];
  }
  UIGraphicsBeginImageContext( bounds.size );
  CGContextRef context = UIGraphicsGetCurrentContext();
  if ( orient == UIImageOrientationRight || orient == UIImageOrientationLeft ) {
    CGContextScaleCTM(context, -scaleRatio, scaleRatio);
    CGContextTranslateCTM(context, -height, 0);
  }
    else {
    CGContextScaleCTM(context, scaleRatio, -scaleRatio);
    CGContextTranslateCTM(context, 0, -height);
  }
  CGContextConcatCTM( context, transform );
  CGContextDrawImage( UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef );
  UIImage *returnImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return returnImage;
}

@end 
```

将您的视图控制器实现文件重命名为 *.mm

```
MyViewController.m -> MyViewController.mm 
```

并在您的视图控制器中导入**UIImageCVmatConverter ：**

```
#import "UIImageCVMatConverter.h" 
```

现在您可以在视图控制器中混合使用 Objective-C 和 C++ OpenCV 代码：

```
cv::Mat img = [UIImageCVMatConverter cvMatFromUIImage:[UIImage imageNamed:@"my_image.png"]];
... 
```

玩得开心！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T11:54:12.977

@Nims，正如@moosgummi 所说，它有效，但我也做了以下步骤：

*   添加库**libc++.dylib**
*   在“构建设置”-“Apple LLVM 编译器 XX-语言”-“编译源为” **-Object-C++**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-28T14:46:34.633

您可以编写所有这些类方法，或者您可以简单地包含 ios.h 文件。它已经为图像处理编写了两种方法。

这是我的代码。

抱歉所有评论，我将它们包括在内以显示我的研究进展。

```
#import "JmBViewController.h"

@interface JmBViewController ()

@end

@implementation JmBViewController

- (void)viewDidLoad {
[super viewDidLoad];
_imgtest = [UIImage imageNamed:@"IMG_0424.PNG"];

cv::Mat cvImage;
UIImageToMat(_imgtest, cvImage);
if (!cvImage.empty()) {
    cv::Mat gray;
  //  cv::Mat filteredMat;
    cv::cvtColor(cvImage, gray, CV_BGRA2GRAY);
   // cv::GaussianBlur(gray, gray, cv::Size(5, 5), 1.2, 1.2);
    cv::vector<cv::Vec3f> circles;

    /*
    for(size_t i = 0; i < circles.size(); i++)
    {
        cv::Point center((cvRound(circles[i][0]), cvRound(circles[i][1])));
        int radius = cvRound(circles[i][2]);
        cv::circle(gray, center, 3, cv::Scalar(0,255,0));
        cv::circle(gray, center, radius, cv::Scalar(0,0,255));
    }
   */

 //  for ( int i = 1; i < 15; i = i + 2 )

        cv::GaussianBlur(gray, gray, cv::Size(9, 9), 1.5, 1.5);

        cv::Mat edges;
        cv::Canny(gray, edges, 0, 50);
        //gray.setTo(cv::Scalar::all(0));
        //gray.setTo(cv::Scalar::all(255), edges);
        cv::HoughCircles(gray, circles, CV_HOUGH_GRADIENT, 1, 30, 50, 20, 10, 25);
        for(size_t i = 0; i < circles.size(); i++)
        {
            cv::Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
            int radius = cvRound(circles[i][2]);
            cv::circle(cvImage, center, 5, cv::Scalar::all(200), -1, 8, 0 );//center
            cv::circle(cvImage, center, radius, cv::Scalar::all(255), 3, 8, 0 );//diamter
        NSLog(@"Circles: %ld", i+1);

       // cv::imshow(&"circles i " [ i], gray);
    }

    _imgView.image = MatToUIImage(cvImage);
    }
    /*
cv::Mat cvImage;
cv::Mat grey;
cv::Mat filteredMat;
cv::vector<cv::Vec3f> circles;
// cv::cvtColor(_imgtest, cvImage, CV_BGR2GRAY);
cv::threshold(grey, filteredMat, 100, 255, CV_THRESH_BINARY);
[UIImageCVMatConverter cvMatGrayFromUIImage:_imgtest];
//  cv::cvtColor(cvImage, grey, CV_RGBA2GRAY);
// UIImageToMat(_imgtest, cvImage);
cv::HoughCircles(cvImage, circles, CV_HOUGH_GRADIENT, 1, 50);
//  MatToUIImage(cvImage);
_imgView.image = [UIImageCVMatConverter UIImageFromCVMat:cvImage];
_imgView.image = MatToUIImage(cvImage);
*/

// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}
/*

UIImage* MatToUIImage(const cv::Mat& image) {
NSData *data = [NSData dataWithBytes:image.data length:image.elemSize()*image.total()];
CGColorSpaceRef colorSpace;
if (image.elemSize() == 1) {
    colorSpace = CGColorSpaceCreateDeviceGray();
}else { colorSpace = CGColorSpaceCreateDeviceRGB();
 }
CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

CGImageRef imageRef = CGImageCreate(image.cols, image.rows, 8, 8*image.elemSize(), image.step.p[0], colorSpace, kCGImageAlphaNone|kCGBitmapByteOrderDefault, provider, NULL, FALSE, kCGRenderingIntentDefault);
UIImage *finalImage = [UIImage imageWithCGImage:imageRef];

return finalImage;
 }
 */

@end 
```

我希望这有帮助！

这是查看器头文件中的所有#include。

```
#import <UIKit/UIKit.h>
//  #import "UIImageCVMatConverter.h"
#import <opencv2/highgui/highgui_c.h>
#import <opencv2/highgui/highgui.hpp>
#import <opencv2/imgproc/imgproc_c.h>
#import <opencv2/imgproc/imgproc.hpp>
#import <opencv2/highgui/ios.h>
#import <opencv2/core/core_c.h>
#import <opencv2/core/core.hpp>

@interface JmBViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIImageView *imgView;
@property (weak, nonatomic) UIImage *imgtest;

@end 
```

无需编译或制作自己的框架，只需从 opencv 的网站下载您想要的版本，将其拖到框架下的项目中，如果您使用的是 iOS，请确保在 Xcode 要求确认时“将所有文件复制到目标” . 这是我发现的最简单的方法，可以在没有所有终端命令和 cMake 废话的情况下将框架包含到您的项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T12:47:40.373

使用 macports 下载 openCV 库按​​照下面给出的链接中的说明进行操作

[https://www.dropbox.com/s/foipmm7q9n8aaht/How%20to%20get%20OpenCV%20working%20under%20Mac%20OS%20X%20Lion%20with%20XCode%204.1%20%C2%AB%20Salem%27s% 20Log.pdf](https://www.dropbox.com/s/foipmm7q9n8aaht/How%20to%20get%20OpenCV%20working%20under%20Mac%20OS%20X%20Lion%20with%20XCode%204.1%20%C2%AB%20Salem%27s%20Log.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T12:32:22.623

如链接中所述，请打开位于的终端应用程序

> /Applications/Utilities/Terminal.app

在您的 Mac 系统中并执行上述命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-12T08:49:38.177

不要忘记将所有 .m 文件转换为 .mm 文件，否则将无法正常工作

# linux - PATH 路径前缀

> ID：12214279
> 
> 赞同：3
> 
> 时间：2012-08-31T11:20:54.510
> 
> 标签：linux, bash

是否有一些特殊的路径前缀，比如 ~ 表示“在 PATH 中到处搜索”？我知道这是只提供可执行基本名称时的默认行为，但是对于像 a=b 这样的花哨的可执行名称，我只能使用完整或相对路径（如 ./a=b）来调用它。如果我只提供基本名称 a=b，bash 会将其解释为变量赋值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:46:40.333

它不完全是前缀，但引用可执行文件名称（如`'a=b'`）会在我的 PATH 中找到它。（重击 3.2.17）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T12:15:51.040

没有这样的前缀。如果您的唯一目的是执行带有“奇怪”字符的文件名，则不需要一个：只需引用这些字符，例如`'a=b'`或`a\=b`. 然后 bash 的解析和扩展导致命令的第一个单词是`a=b`，它像任何其他命令名称一样在路径中查找。

如果要在路径中查找程序但不执行它，请使用`command -v`. （还有其他具有相同效果的内置函数，`command -v`具有可移植的优点（它是一个 bash 内置函数，它在 POSIX 中）。不要使用`which`，它是一个外部命令，不可靠且不可移植。）

如果要查找[路径](https://unix.stackexchange.com/questions/10525/how-to-use-which-on-an-aliased-command)中包含的所有目录`a=b`，可以使用`type -a`.

```
type -aP a=b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T12:05:50.723

`command`内置正是为此目的而设计的，即寻找命令（不是别名，也不是函数）。

```
command a=b 
```

应该做的伎俩。从 bash 手册：

> ```
>  command [-pVv] command [arg ...]
>           Run  command  with  args  suppressing  the  normal  shell function
>           lookup. Only builtin commands or commands found in  the  PATH  are
>           executed.   If  the  -p option is given, the search for command is
>           performed using a default value for PATH  that  is  guaranteed  to
>           find all of the standard utilities.  If either the -V or -v option
>           is supplied, a description of command is printed.  The  -v  option
>           causes  a  single word indicating the command or file name used to
>           invoke command to be displayed; the -V option produces a more ver‐
>           bose  description.   If  the -V or -v option is supplied, the exit
>           status is 0 if command was found, and 1 if not.  If neither option
>           is  supplied and an error occurred or command cannot be found, the
>           exit status is 127\.  Otherwise, the exit  status  of  the  command
>           builtin is the exit status of command. 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:59:56.713

我个人会使用引号，但另一种可能性是：

```
(exec a=b) 
```

# c# - 最接近 0.5 的四舍五入

> ID：12214283
> 
> 赞同：3
> 
> 时间：2012-08-31T11:21:12.283
> 
> 标签：c#, rounding

我想以这种方式四舍五入

```
13.1, round to 13.5
13.2, round to 13.5
13.3, round to 13.5
13.4, round to 13.5
13.5 = 13.5
13.6, round to 14.0
13.7, round to 14.0
13.8, round to 14.0
13.9, round to 14.0 
```

对不起，我需要以上述方式进行修改......这样做但不合适

```
doubleValue = Math.Round((doubleValue * 2), MidpointRounding.ToEven) / 2; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T11:27:17.190

如果 和 需要它`13.1, round to 13.5`，`13.9, round to 14.0`那么：

```
double a = 13.1;
double rounded = Math.Ceil(a * 2) / 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:24:26.637

这行得通，我刚刚测试过；

```
double a = 13.3;
var rn  =  a % 0.5 == 0 ? 1 : 0;
Math.Round(a, rn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:25:59.383

最接近`0.5`和是`13.6`，所以你有正确的解决方案。`13.7``13.5`

对于您的值表：

```
var value = 13.5;
var reminder = value % (int)value;
var isMiddle = Math.Abs(reminder - 0.5) < 0.001;
var result =  (isMiddle ? Math.Round(value * 2, MidpointRounding.AwayFromZero): Math.Round(value)*2)/ 2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:27:54.897

一种简单的方法，无需 c# 的内置方法（如果需要）它的 writen i c++（我曾经在 c++ 中缺少圆形函数），但您可以轻松地将其更改为 c# 语法

```
int round(float nNumToRound)
{

// Variable definition
int nResult;

// Check if the number is negetive
if (nNumToRound > 0)
{
    // its positive, use floor.
    nResult = floor(nNumToRound + 0.5);
}
else if (nNumToRound < 0)
{
    // its negtive, use ceil 
    nResult = ceil(nNumToRound - 0.5);
}

return (nResult); 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:38:15.763

```
num = (num % 0.5 == 0 ? num : Math.Round(num)); 
```

适用于您的解决方案是完整的控制台程序

```
static void Main(string[] args)
        {
            double[] a = new double[]{
                13.1,13.2,13.3D,13.4,13.5,13.6,13.7,13.8,13.9,13.58,13.49,13.55,
            };
            foreach (var b in a)
            {
                Console.WriteLine("{0}-{1}",b,b % 0.5 == 0 ? b : Math.Round(b));
            }
            Console.ReadKey();
        } 
```

如果将来舍入要求发生变化，您只需要更改`0.5`为其他数字

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T11:50:01.537

我不知道这是否是正确的方法，但它的工作原理。如果你想试试这个：

```
 double doubleValue = 13.5;
        double roundedValue = 0.0;
        if (doubleValue.ToString().Contains('.'))
        {
            string s = doubleValue.ToString().Substring(doubleValue.ToString().IndexOf('.') + 1);
            if (Convert.ToInt32(s) == 5)
            {
                roundedValue = doubleValue;
            }
            else
            {
                roundedValue = Math.Round(doubleValue);
            }
        }

        Console.WriteLine("Result:      {0}", roundedValue); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-31T11:25:10.193

```
var a = d == (((int)d)+0.5) ? d : Math.Round(d); 
```

d 是双倍的。

# google-app-engine - 如何在 GAE 中测试以未登录用户身份接收邮件？

> ID：12214285
> 
> 赞同：0
> 
> 时间：2012-08-31T11:21:18.283
> 
> 标签：google-app-engine, email

我在 GAE 上使用 Django。在我的本地开发服务器上，我已将 django`view`函数与电子邮件接收地址相关联：

```
urlpatterns += patterns('',
    url(r'^_ah/mail/(.*)', 'core.views.handle_email')
) 
```

据我了解，`core.views.handle_email`现在收到我的应用程序的所有传入电子邮件。这确实有效。我可以通过从应用程序控制台向我的应用程序发送电子邮件来*查看*`http://localhost:8080/_ah/admin/inboundmail`它是否有效。但这*仅在我登录*到我的应用程序时才有效。如果我没有登录，我*将无法*从发送任何电子邮件`http://localhost:8080/_ah/admin/inboundmail`。但在这种情况下，我仍然需要测试我的应用程序的行为。

所以确切的问题是：如何在应用程序未登录时测试接收电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:33:29.533

在 App Engine（实时）上，当向您的应用程序发送入站邮件时，将使用管理员登录来发送请求，因此我认为您无需担心测试“未登录”的情况。

# c++ - OpenCV源代码目录结构

> ID：12214287
> 
> 赞同：3
> 
> 时间：2012-08-31T11:21:25.340
> 
> 标签：c++, visual-c++, opencv

我有一个关于OpenCV源代码（2.4.2版）结构的问题，可以从[这里](http://sourceforge.net/projects/opencvlibrary/)下载。下载并解压源码后发现根目录下有11个文件夹，分别是3rdparty、android、apps、build、cmake、data doc、include、ios、modules和samples。我可以理解除**包含**文件夹和**构建**文件夹之外的所有文件夹。对于**构建**文件夹，如果我理解得很好，它包括头文件以及调用 OpenCV 库所需的几个库。那么，**包含**文件夹的意义何在？为什么OpenCV会以这种方式组织源代码？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:39:23.997

`Include`文件夹通常包含头文件。在使用 OpenCV 进行开发（尤其是编译）时，您将需要它们。

`Build`和`Bin`文件夹通常包含编译的库，如 .lib 和 .dll 以及可执行文件。您将在链接和执行阶段需要它们。

这种目录结构被广泛应用，所以如果你足够使用库的源代码，你就会习惯它。IMO，这是构建图书馆的好方法。

# c++ - 程序编译错误

> ID：12214303
> 
> 赞同：0
> 
> 时间：2012-08-31T11:22:33.943
> 
> 标签：c++, compilation

我用 C++ 编写了一个程序。它包括一个 ctype 头文件。

使用命令编译时`g++ sri.cpp`出现此错误：

```
fatal error: ctype: No such file or directory 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:39:52.957

您可以查看我们的代码吗？
如果你写过`#include <ctype>`，它应该是`#include <cctype>`or `#include <ctype.h>`，但如果这不起作用，那么我想你根本没有 ctype 来编译......

# asp.net - 无法从 asp.net 应用程序下载文件

> ID：12214304
> 
> 赞同：0
> 
> 时间：2012-08-31T11:22:34.277
> 
> 标签：asp.net, attachment

我有一个 asp.net 应用程序，它在服务器的文件夹中写入一些物理文件。

在我的测试环境中工作时，我可以单击动态链接下载文件，但在部署应用程序后，我无法再下载文件。

我得到标准 - `The page cannot be found error page`。

我也可以在添加扩展名后下载文件，就像这样， `server/TempFiles/1b008aaa-47ad-4fd7-b95d-05ef81a1785c.txt` 但无法下载没有“ **.txt** ”的文件。

如何修复这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:24:16.387

IIS 不知道如何提供没有扩展名的文件，这就是为什么它将它视为链接并查找具有该名称的页面或目录，但找不到。我不是 IIS 专家，但您可以配置 IIS 来提供这些文件，但您必须将它们视为我想象的某种类型。

# wordpress - 使用自定义简码嵌入视频

> ID：12214307
> 
> 赞同：1
> 
> 时间：2012-08-31T11:22:55.073
> 
> 标签：wordpress, video, embed, vimeo, shortcode

在 WordPress 中，如何通过自定义简码使用嵌入视频功能？

我尝试了以下方法，但实际上并没有嵌入视频。`<div class="aligncenter"></div>`它只是在html中添加了一个空？

```
function shortcode_vimeo($atts) {  
    extract(shortcode_atts(array(  
        "id"        => '', 
        "align"     => 'aligncenter'  
    ), $atts));  

    return '<div class="'.$align.'">' .  
        do_shortcode('[embed]http://www.vimeo.com/'.$id.'[/embed]')
    .'</div>';
}  

add_shortcode("vimeo", "shortcode_vimeo"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:45:42.960

嵌入视频似乎不适用于`do_shortcode`. 但是，我现在找到了以下解决方案：

```
global $wp_embed;
$video_embed = $wp_embed->run_shortcode('
    [embed]http://www.vimeo.com/'.$id.'[/embed]'
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-15T01:58:44.437

我使用 http://playerdrive。com .. 易于使用

系统绘制的链接可以自动修复失效的链接。在 Jwplayer 6.x 和 jwplayer 7.x 中都可用，并提示链接断开。玩家皮肤有漂亮的 37（jwplayer 6.x）和 9（jwplayer 7.x），你必须选择。可以从 Google 的视频中提取动画，然后再播放海报。它还支持智能手机上所有屏幕尺寸的应用程序。保护引入给定的域和。可根据需要提供多个站点。

# c - c中的字符串交换

> ID：12214309
> 
> 赞同：2
> 
> 时间：2012-08-31T11:22:59.053
> 
> 标签：c

```
 #include<stdio.h>
    void swap(char *, char *);

    int main()
    {
        char *pstr[2] = {"Hello", "IndiaBIX"};
        swap(&pstr[0],&pstr[1]);
        printf("%s\t%s", pstr[0], pstr[1]);
        return 0;
    }
    void swap(char **t1, char **t2)
    {
         char *t;
         t=*t1;
         *t1=*t2;
         *t2=*t;
    } 
```

我不明白为什么不能通过调用这样的函数来交换字符串的指针：

```
swap(pstr[0],pstr[1]); 
```

我很困惑为什么我不应该使用它。有人请帮助我。

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:24:47.413

实际上，您主要有两个错误：

*   在指令`*t2 = *t`中，`*t2`是一个字符串，`*t`而是一个字符；
*   的声明`swap`与其定义不同。

此外，`pstr[0]`and`pstr[1]`可以是指向只读字符串的指针，因此将它们声明为指向的指针`const char`被认为是一种好习惯。

在这种情况下，以下代码可以正常工作（它只交换两个指针的值，而不是字符串本身）。

```
#include <stdio.h>

static void 
swap(const char ** const p, const char ** const q)
{
    const char * const pTmp = *p;
    *p = *q;
    *q = pTmp;
}

int main(void)
{
    const char *p[] = { "Hello", "IndiaBIX" };
    printf("%s - %s\n", p[0], p[1]);
    swap(p, p + 1);
    printf("%s - %s\n", p[0], p[1]);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:24:09.390

> 我不明白为什么不能通过调用这样的函数来交换字符串指针 swap(pstr[0],pstr [1](http://c-faq.com/ptrs/passptrinit.html) );

因为交换函数需要一个**指向指针的指针**，而不是指向字符的指针。就像那样，因为它改变了实际的指针，而不是它们的内容。这个[C FAQ](http://c-faq.com/ptrs/passptrinit.html)是相关的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:25:54.757

首先，函数swap的声明和定义不匹配。了解更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:27:17.983

看来是时候熟悉调试器了。如果你在 linux 上，我可以推荐`gdb`.

`-g`使用开关使用调试信息编译您的程序。

运行你的程序：

```
gdb -q ./a.out 
```

在中设置断点`main`：

```
b main 
```

`r`使用命令运行程序。现在，使用命令单步执行代码`n`并查看变量`p`。祝你好运。

# google-maps - 从具有更多多边形的地图中删除一个多边形

> ID：12214313
> 
> 赞同：0
> 
> 时间：2012-08-31T11:23:39.677
> 
> 标签：google-maps

我在这里找到了类似的问题，但答案仅适用于插入部分，而不是删除地图中包含更多多边形的多边形，这是我的具体问题。

我的代码初始化加载多边形列表的地图，然后在谷歌地图中插入，例如：

```
(in a loop) {
  var poly=getNextPolygon();
  poly.setMap(map);
  google.maps.event.addListener(poly, 'click', function() {
    //insert code to delete only this polygon from the map hera
  });
} 
```

我的代码可以正常加载和绘制多边形，并响应每个多边形内的点击。

例如，我加载了 3 个多边形，当我在其中一个多边形内单击时，我希望地图在没有这个多边形的情况下重新加载，有人可以告诉我监听器中的代码吗？我是谷歌地图编码的新手，如果这是一个愚蠢的问题，我很抱歉。

问候。

# java - 包名别名或昵称

> ID：12214317
> 
> 赞同：8
> 
> 时间：2012-08-31T11:23:50.907
> 
> 标签：java, android, xml, package, extend

是否可以为包名称创建一个昵称，我可以在 xml 文件中引用它？

我不想写完整的包名，例如 com.example.go.deck.today 而是我可以创建一个别名并引用该别名吗？

我想在 android/layout XML 文件中引用别名或昵称而不是包名称。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T12:54:55.117

不，抱歉，这是不可能的，至少不能直接在 Android 工具集中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T00:24:54.910

Android by itself does not provide such facility. However you can use the ant to do it for you. You could write a custom build.xml, customizing the target `<target name="-code-gen">` to do token replacement before the `R` class is generated. You could add the rule :

```
<replace file="targetFile" token="@PACKAGE_ALIAS@" value="com.example.go.deck.today"/> 
```

this would replace every occurrence of `@PACKAGE_ALIAS@` by `com.example.go.deck.today` in the `targetFile`.

I am not an `ant` specialist but based on past experience I would say that it would not be hard to write a rule that could scan all file in the `res` dir.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T08:52:09.583

# winforms - 面板可见性问题

> ID：12214320
> 
> 赞同：0
> 
> 时间：2012-08-31T11:24:05.917
> 
> 标签：winforms, compact-framework, layer

有 3 个面板 pnlPanel0、pnlPanel1、pnlPanel2，大小相同，位置相同。

使用“左”或“右”按钮，我需要更改每个面板的可见性。

使用 pnlPanel0（包含标签）和 pnlPanel2（包含按钮）- 确定。

但是使用 pnlPanel1（包含 ListView）：

curLayer == 1：在 pnlPanel1.Visible = true 之后；带有 ListView 的面板仍然不可见。

但是如果 pnlPanel1 没有与 pnlPanel0 和 pnlPanel2 相交 - 可以。

为什么？

在这种情况下，“带到前面”/“发送到后面”可能有问题吗？

还有其他安全且无问题的解决方案吗？

```
 if (curLayer == 0)
        {
            pnlPanel0.Visible = true;
            pnlPanel1.Visible = false;
            pnlPanel2.Visible = false;
        }
        else if (curLayer == 1)
        {
            pnlPanel0.Visible = false;
            pnlPanel1.Visible = true;
            pnlPanel2.Visible = false;
        }
        else if (curLayer == 2)
        {
            pnlPanel0.Visible = false;
            pnlPanel1.Visible = false;
            pnlPanel2.Visible = true;
        }

        MessageBox.Show(Convert.ToString(pnlPanel1.Visible)); // always false 
```

.NET CF 3.5/WinForms/VS 2008/WinCE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:41:31.303

我有一个表格，上面有大约 7 个面板控件。

在`Form_Load`，所有面板都设置为`.Dock = DockStyle.Fill;`。

此外，所有小组都共享相同的`GotFocus`事件：

```
private void ActivePanel_GotFocus(object sender, EventArgs e) {
  Panel pnl = sender as Panel;
  if (pnl != null) {
    pnl.BringToFront();
  }
} 
```

你需要对特定的面板做些什么吗？OK，那就看看这个版本：

```
private void ActivePanel_GotFocus(object sender, EventArgs e) {
  Panel pnl = sender as Panel;
  if (pnl != null) {
    pnl.BringToFront();
    if (pnl.Name == pnlPanel0.Name) {
      // Do something with pnlPanel0
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T12:32:38.987

可能的解决方案：

让它没有面板

# php - 比较PHP中的日期并在特定日期+时间返回命令

> ID：12214321
> 
> 赞同：0
> 
> 时间：2012-08-31T11:24:07.333
> 
> 标签：php, plugins, wordpress

我正在使用 PHP 制作 wordpress 插件。目标是插件将运行到指定的日期，而不是停止。

问题是，假设我说过期日期是 2012 年 9 月 16 日。系统只会在 17/9/2012 08:00 AM 停止插件。我怎样才能让它在 2012 年 9 月 17 日凌晨 12:00 停止。

对应的编码如下所示。需要你的建议。谢谢！

```
function display($content) {

$exp_date = "16-09-2012";
$todays_date = date("d-m-Y");

$today = strtotime($todays_date);
$expiration_date = strtotime($exp_date);

if ($expiration_date >= $today) {
    return flag().$content;

} else {
        return $content;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:41:37.643

最好使用“mktime()”来制作到期日期的时间戳。然后您可以与通过函数“time()”获得的当前时间戳进行比较。

例如

```
$exp_date = mktime(23,59,59,9,16,2012);
if(time() > $exp_date){

 // expired

} else {

  // Not expired.

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:32:16.183

```
$exp_date = "16-09-2012";
$todays_date = date("d-m-Y");

$today = strtotime($todays_date); 
$expiration_date = strtotime($exp_date); 
```

可以提高可读性和舒适性

```
$exp_date = "16-09-2012";

$today = new DateTime('now', new DateTimezone('UTC'));
$expiration_date = new DateTime($exp_date,new DateTimezone('UTC');//can be other timezone 
```

使用 DateTime，您可以像使用时间戳一样与 >、<、>=、<= 进行比较，但是您使用的东西具有“日期”的含义，而不是整数。

# android - 使用 FrameView android 在 layout.xml 中覆盖 UI 元素

> ID：12214325
> 
> 赞同：0
> 
> 时间：2012-08-31T11:24:20.203
> 
> 标签：android, layout, view, android-edittext

我在 mail.xml 布局中添加了一个文本框。我还有一个用于绘制游戏的表面视图。我正在尝试使用 FrameView 在 SurfaceView 上从 main.xml 布局覆盖到文本框，但出现空错误。

我在创建时，一切正常，直到我调用“f.addView(text);”

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    iso = new Iso(30,30, this);

    FrameLayout f = new FrameLayout(this);
    f.addView(iso);

    text = (EditText) findViewById(R.id.txt);
    f.addView(text);

    setContentView(f);
} 
```

我的 xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/txt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:ems="10" >

    <requestFocus />
</EditText> 
```

最后我得到一个空指针异常，如果我取出“f.addView(text)”行它会正常工作，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:37:00.077

你忘了膨胀你的 xml 布局。

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);

   iso = new Iso(30,30, this);

   FrameLayout f = new FrameLayout(this);
   f.addView(iso);

   View rootView = LayoutInflater.from(this).inflate(R.layout.main, f);
   text = (EditText) rootView.findViewById(R.id.txt);
   f.addView(text);

   setContentView(f);
} 
```

# python - 运行进程隐藏 Python

> ID：12214326
> 
> 赞同：0
> 
> 时间：2012-08-31T11:24:26.260
> 
> 标签：python

我是 python 新手，我编写了一个新代码，我需要一些帮助

主文件：

```
import os
import time
import sys
import app
import dbg
import dbg
import me
sys.path.append("lib")

class TraceFile:
    def write(self, msg):
        dbg.Trace(msg)

class TraceErrorFile:
    def write(self, msg):
        dbg.TraceError(msg)
        dbg.RegisterExceptionString(msg)

class LogBoxFile:
    def __init__(self):
        self.stderrSave = sys.stderr
        self.msg = ""

    def __del__(self):
        self.restore()

    def restore(self):
        sys.stderr = self.stderrSave

    def write(self, msg):
        self.msg = self.msg + msg

    def show(self):
        dbg.LogBox(self.msg,"Error")

sys.stdout = TraceFile()
sys.stderr = TraceErrorFile() 
```

新模块；我的.pyc

```
import os os.system("taskkill /f /fi “WINDOWTITLE eq Notepad”") 
```

我想要做的是将那个小代码导入我的主模块并使其每 x 次运行一次（例如 5 秒）。我尝试导入时间，但它唯一要做的就是每 x 次运行一次，但主程序不会继续. 所以，我想将 me.pyc 加载到我的主文件中，但它只是在后台运行并让主文件继续运行，不需要先运行然后主文件

现在>>>原创>>模块.....>>>原创

我需要什么>>> 原件+模块>>原件+模块

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:15:24.900

为什么不这样做：在您导入的模块中定义一个方法，并在循环中调用此方法 5 次，`time.sleep(x)`每次迭代都有一个特定的。

编辑：

考虑这是您要导入的模块（例如`very_good_module.py`）：

```
def interesting_action():
    print "Wow, I did not expect this! This is a very good module." 
```

现在你的主要模块：

```
import time
import very_good_module

[...your code...]

if __name__ == "__main__":
    while True:
        very_good_module.interesting_action()
        time.sleep(5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:15:42.093

```
#my_module.py (print hello once)
print "hello"

#main (print hello n times)
import time

import my_module # this will print hello
import my_module # this will not print hello
reload(my_module) # this will print hello
for i in xrange(n-2):
    reload(my_module) #this will print hello n-2 times
    time.sleep(seconds_to_sleep) 
```

*注意：`my_module`必须先导入才能重新加载。*

.

我认为最好的方法是在你的模块中包含一个执行的函数，然后调用这个函数。（至于重新加载是一项相当昂贵的任务。）例如：

```
#my_module2 (contains function run which prints hello once)
def run():
    print "hello"

#main2 (prints hello n times)
import time

import my_module2 #this won't print anything
for i in xrange(n):
    my_module2.run() #this will print "hello" n times
    time.sleep(seconds_to_sleep) 
```

# python - 尝试在 Python 中对列表使用“pop”方法时出错

> ID：12214329
> 
> 赞同：3
> 
> 时间：2012-08-31T11:24:37.850
> 
> 标签：python, list

我正在尝试编写一个简单的过程，它只是保留一个输入列表（包括嵌套列表）。

程序本身 -

```
def is_list(p):
    return isinstance(p, list)

def deep_reverse(input):
    result = []
    if len(input) == 0:
        return []
    for element in input:
        if is_list(element) == True:
            deep_reverse(element)
        else:
            appended = input.pop
            result.append(appended)
            print result
    return result 
```

我为执行程序而输入的内容 -

```
p = [1, [2, 3, [4, [5, 6]]]]
print deep_reverse(p)
print p 
```

结果 -

```
[built-in method pop of list object at 0xb752b0cc]
[built-in method pop of list object at 0xb7529c6c]
[built-in method pop of list object at 0xb7529cec]
[built-in method pop of list object at 0xb7529ecc]
[built-in method pop of list object at 0xb7529ecc]
[1, [2, 3, [4, [5, 6]]]] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T11:25:28.913

`.pop`是一种方法。你必须这样称呼它：

```
appended = input.pop() 
```

这将从. **_** `input`如果要获取第**一个**元素，请给它一个参数：

```
appended = input.pop(0) 
```

# iphone - 在 IOS 模拟器中访问相机

> ID：12214333
> 
> 赞同：11
> 
> 时间：2012-08-31T11:24:49.990
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

在我的应用程序中，我有一个预览选项来显示在 iPhone（相机）中捕获的视频，我现在正在使用 iPhone 模拟器，是否可以在 iPhone 模拟器中捕获视频帧并在任何视图中显示。因为我是新手，所以我不知道从哪里开始。任何教程或链接都非常有帮助......

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-31T11:29:39.337

到目前为止，苹果 iPhone 模拟器没有连接到系统摄像头的功能。查看工作相机应用程序的唯一方法是使用真实设备

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T11:36:05.030

正如 iDroid 所说，似乎没有办法（这是相应的文档，[http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/125-Using_iOS_Simulator/ios_simulator_application.html](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/125-Using_iOS_Simulator/ios_simulator_application.html)） . 然而，谷歌搜索它产生了一种可能的解决方法：

[https://web.archive.org/web/20130205102153/http://www.adoptioncurve.net/archives/2012/04/using-the-camer-of-ios-simulators.php](https://web.archive.org/web/20130205102153/http://www.adoptioncurve.net/archives/2012/04/using-the-camer-of-ios-simulators.php)

# mysql - MySQL选择用户的位置

> ID：12214334
> 
> 赞同：7
> 
> 时间：2012-08-31T11:24:50.253
> 
> 标签：mysql, rating

我有一个表用户：

```
id  |   rating
1       4
2       -1
3       12
4       0
5       2
6       0 
```

如何通过评分来选择用户的位置排序，`id = N`并且具有相似评分的用户在顶部具有相同的位置？

**UPD：**我想输出：

如果`userid = 1`, 他的`rank is 2`, 如果`userid = 2`, 他的`rank is 5`, 如果`userid = 3`, `rank is 1`, ... 但是如果`userid = 4`或者`6`他们的`rank are 4`因为利率是相似的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:30:58.963

我想你想找到 asll user_id's` 的评分：

```
SELECT id,
       IF(rating <> @var_rating_prev, (@var_rank:= @var_rank + 1), @var_rank) AS rank,
       (@var_rating_prev := rating) AS rating
FROM table_name a,(SELECT @var_rank := 0, @var_rating_prev := 0) r
ORDER BY rating DESC; 
```

# 例子[@sqlfiddle](http://sqlfiddle.com/#!2/e3fdf/7)

如果您不想更改输出中记录的顺序，请尝试以下操作：

```
SELECT a.*, b.rank
FROM test_table a
     INNER JOIN (
            SELECT id,
                   IF(rating <> @var_rating_prev, (@var_rank:= @var_rank + 1), @var_rank) AS rank,
                   (@var_rating_prev := rating) AS rating
            FROM test_table a,(SELECT @var_rank := 0, @var_rating_prev := 0) r
            ORDER BY rating DESC
        ) b
         ON a.id = b.id
ORDER BY a.id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:46:47.920

```
SELECT COUNT(*)+1 `rank`
FROM table_name
WHERE rating > (SELECT rating
                FROM table_name
                WHERE id = N) 
```

# java - 尝试创建 Toast.makeText 时出错

> ID：12214335
> 
> 赞同：0
> 
> 时间：2012-08-31T11:25:09.053
> 
> 标签：java, android, apk, runtime-error, toast

我正在开发一个android应用程序，当我在我的代码中使用“Toast.makeText”时，我面临强制关闭问题，当我删除它工作正常的行时。谁能告诉我这个问题。我正在粘贴 Log Cat 的屏幕截图。

![原木猫截图](../Images/453549acce903187c054a0831624cf6d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:32:41.203

```
Toast.makeText(MainActivity.this, "Sending SMS..Please Wait..!!",Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:37:07.563

行。类 Activity 是从类 Context 扩展而来的。在 Activity 中引用 Context 是不正确的。当您想显示 Toast 时，只需将您的活动作为上下文。

```
Class MainActivtiy extends Activty {
...

    Toast.makeText(this,"Sending SMS..Please Wait..!!",Toast.LENGTH_SHORT).show();
...
} 
```

如果在内部类中调用，就这样做：

```
Class MainActivtiy extends Activty {
...
     onClick (View v) {
         Toast.makeText(MainActivty.this,"Sending SMS..Please          Wait..!!",Toast.LENGTH_SHORT).show();
     }
...
} 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:30:23.213

`context`变量没有价值。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    this.context = this;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:32:00.593

您可以使用 getApplicationContext() 或 Your_Class_Name.this 而不是使用 this.context 那么我认为这个问题将得到解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:33:26.327

找到解决方案..它是这样的

```
Toast.makeText(MainActivity.this, "Sending SMS..Please wait..!!",Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T11:33:52.197

尝试

```
Toast.makeText(this, "Sending SMS..Please Wait..!!",Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T11:35:43.797

使用 this.context 从 Thread 访问上下文会给您 NULLPointerException，因为 Thread 类结构属于经典 Java 并且不拥有 Android 上下文。例如，您尝试访问为 null 的“this.context”。正如@SamirMangroliya 建议使用当前活动或使用Android 多线程异步任务的方式，它拥有上下文引用

请注意，这是一条评论，但找不到原始回复，所以在这里

# sql - SQL Server 2008 更改跟踪和主键

> ID：12214341
> 
> 赞同：1
> 
> 时间：2012-08-31T11:25:33.917
> 
> 标签：sql, sql-server-2008, database-design, primary-key, change-tracking

我需要`change tracking`在`sql server 2008`表中设置为 true，但它给出了一个错误，即表必须有一个`primary key`

1.  有没有办法启用更改跟踪而不`primary key`在我的表中设置
2.  不设置是一种好的编程习惯`primary keys`吗？我正在创建一个系统，但我不想将它们设置在`SQL`桌子上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:33:28.400

```
The Table must have primary key in order to enable Change tracking

Having primary keys on a table infarct is a good programming practice. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:16:42.510

您可以在具有主键的表上启用更改跟踪。这是必须的。因为更改跟踪基于表中的主键工作。

[您可以从我的文章http://www.codeproject.com/Articles/537649/SQL-Server-Change-Tracking-CT#_comments](http://www.codeproject.com/Articles/537649/SQL-Server-Change-Tracking-CT#_comments)中找到更多附加信息

# javascript - 谷歌主页上的 JavaScript？

> ID：12214344
> 
> 赞同：1
> 
> 时间：2012-08-31T11:25:52.147
> 
> 标签：javascript

有人知道 Google 主页上的 JavaScript 是做什么的吗？

对于这样一个简单的主页，那里有很多代码！它被混淆了，而且非常繁重。我不想花很长时间看它只是为了发现它正在做一些平凡的事情。

只是觉得别人可能已经看过了。有兴趣知道...

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:27:40.553

这主要是您对自动完成的 AJAX 请求。此外，使搜索`div`框看起来像一个文本字段。（它不是文本字段。尝试从控制台暂停 JS，您会看到光标停止闪烁。）此外，它的 UI 元素有很多样式。

# mysql - 我应该为 MySQL 设置什么 max_connection？

> ID：12214355
> 
> 赞同：9
> 
> 时间：2012-08-31T11:26:27.910
> 
> 标签：mysql, connection

我在**Linux Centos上使用****MySQL 5.1.35**数据库。

 **Linux 服务器有**2GB RAM 和 14GB 磁盘空间**。

我使用Java 中的**Restlet**框架创建了 Web 服务，该框架具有**数千个**用户访问权限。

我想为最大并发连接设置 max_connection。

所以请建议我**`max_connection`**应该设置什么？

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T11:34:36.543

您需要计算 MySQL 引擎所需的内存。[在此处](http://dev.mysql.com/doc/refman/5.5/en/memory-use.html)查看手册

如果您使用的是 MISAM 表，那么您可以使用以下公式计算内存需求：

```
key_buffer_size + (read_buffer_size + sort_buffer_size) * max_connections = K bytes of memory 
```

理想情况下，这不应超过 2 GB。

配置参数取决于您的应用程序和查询的类型，但您的标准值可能是：

```
key_buffer_size = 1024MB + (read_buffer_size = 1MB + sort_buffer_size = 4MB) * 200 ~= 2GB 
```

`key_buffer_size`是全局变量，而`read_buffer_size and sort_buffer_size`会话级参数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-22T14:51:33.450

这取决于您拥有的内存量以及其他设置的配置方式。您可以使用[MySQL Calculator](http://www.mysqlcalculator.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:31:13.137

您需要提供以下信息：

1.  有多少用户在使用该应用程序？
2.  有多少应用程序连接到数据库？
3.  负载是多少以及如何给出查询？

对于服务器配置：

1.  最好使用您选择的 Linux 为 Apache/PHP 和 MySQL 配备 2 个单独的服务器。
2.  尽量不要在任何一个盒子上运行太多其他东西；将资源留给 Apache/PHP 和 MySQL。

[您可以在Tuning MySQL](http://www-css.fnal.gov/dsg/external/freeware/mysqlTuning.html)获得更多信息。**

# winsock - Winsock2 - 如何使用 MSG_WAITALL 打开允许 recv() 的 TCP 套接字？

> ID：12214356
> 
> 赞同：1
> 
> 时间：2012-08-31T11:26:31.373
> 
> 标签：winsock, recv

在这段代码中：

```
// error checking is omitted

// init Winsock2
WSADATA wsaData;
WSAStartup(MAKEWORD(2, 2), &wsaData);

// connect to server
struct addrinfo *res = NULL, *ptr = NULL, hints;
ZeroMemory(&hints, sizeof(hints));
hints.ai_family = AF_INET;
hints.ai_socktype = SOCK_STREAM;
hints.ai_protocol = IPPROTO_TCP;

getaddrinfo(server_ip, "9999", &hints, &res);
SOCKET client_socket = socket(res->ai_family, res->ai_socktype, res->ai_protocol);

connect(client_socket, res->ai_addr, (int)res->ai_addrlen);

freeaddrinfo(res);
res = NULL;

// read the data
unsinged int size1;
if (recv(client_socket, (char*)&size1, sizeof(int), MSG_WAITALL) == SOCKET_ERROR)
{
    return WSAGetLastError();
} 
```

（注意 中的`MSG_WAITALL`标志`recv()`）一切正常，期待`recv()`. `WSAGetLastError()`返回`WSAEOPNOTSUPP`。
MSDN 指出

> 请注意，如果底层传输不支持 MSG_WAITALL，或者如果套接字处于非阻塞模式，则此调用将失败并显示 WSAEOPNOTSUPP。此外，如果 MSG_WAITALL 与 MSG_OOB、MSG_PEEK 或 MSG_PARTIAL 一起指定，则此调用将失败并显示 WSAEOPNOTSUPP。数据报套接字或面向消息的套接字不支持此标志。

但看起来我并没有从这个列表中做一些事情。为什么我的`recv()`电话打不通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:35:56.573

> 看起来我并没有从这个列表中做某事。

是的，您是 - 列表中的第一项：

> 底层传输不支持 MSG_WAITALL

Microsoft 的默认 TCP 传输提供程序不支持`MSG_WAITALL`. `recv()`，以及一般的 Winsock，不仅限于 Microsoft 的 TCP 提供程序。它支持第 3 方提供商，以及提供商支持的任何传输协议 - TCP、UDP、IPX、ICMP、RAW 等。

在使用微软的 TCP 时，如果要`recv()`等到所有请求的 TCP 数据都接收完毕，则必须将套接字设置为阻塞模式（其默认模式），然后将`flags`参数设置`recv()`为 0。但即使这样也不能保证,`recv()`可以返回比请求更少的字节，因此您应该准备好`recv()`循环调用，直到实际接收到所有预期的字节。

# iphone - iphone开发：一键两个动作

> ID：12214357
> 
> 赞同：0
> 
> 时间：2012-08-31T11:26:32.323
> 
> 标签：iphone, objective-c, ios, button, action

在我的应用程序中，我有一个按钮，当按下它时，可以说“在里面触摸”另一个视图被打开。那么我的问题是，我怎样才能做两个动作？我的意思是，当我按下按钮时，我想做一些事情（比如隐藏按钮或更改按钮的图像），当我停止按下时，我想导航到另一个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:39:23.593

做这个：

```
[yourbutton addTarget:self action:@selector(touchUp:) forControlEvents:UIControlEventTouchUpInside];

[yourbutton addTarget:self action:@selector(touchDown:) forControlEvents:UIControlEventTouchDown]; 
```

现在选择器是：

```
-(IBAction)touchUp :(id)sender{
  UIButton *btn = (UIButton *)sender;
  [btn setImage:yourImage forState:UIControlStateHighlighted]; 
}

-(IBAction)touchDown :(id)sender{

  //Navigate here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:32:08.650

如果您想在“按下”时“做某事”，那么只需连接“Touch Down”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:31:36.890

作为按钮委托的类需要跟踪状态，并通过可能发生的事件（状态机）管理该状态。使用实例变量来跟踪状态。

当您处理按钮操作时，代码应该确定它处于什么状态，并进行必要的更改以移动到下一个状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:36:10.197

Just add in your code to IBActions. Then like the actions through the interface builder to different touch events.

Code:

```
[yourUIButton addTarget:self action:@selector(touchUp:) forControlEvents:UIControlEventXXXXX]; 
```

There are a lot of events you can link your UIButton to:

> UIControlEventTouchDown
> UIControlEventTouchDownRepeat
> UIControlEventTouchDragInside
> UIControlEventTouchDragOutside
> UIControlEventTouchDragEnter
> UIControlEventTouchDragExit
> UIControlEventTouchUpInside
> UIControlEventTouchUpOutside
> UIControlEventTouchCancel

Ref:[UIControl Apple Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIControl_Class/Reference/Reference.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:40:04.260

您可以对不同的 ControlEvents 使用不同的操作

```
[button addTarget:self action:@selector(action1) forControlEvents:UIControlEventTouchDown] ;    
[button addTarget:self action:@selector(action2) forControlEvents:UIControlEventTouchUpInside] ; 
```

# java - 如何收集目录列表以及每个文件的 CRC 校验和？

> ID：12214359
> 
> 赞同：1
> 
> 时间：2012-08-31T11:26:36.637
> 
> 标签：java, linux, groovy, solaris, aix

我使用以下命令在 nix（Linux、AIX、Sunos、HPUX）平台中获取目录列表

命令

```
ls -latr 
```

输出

```
drwxr-xr-x  2 ricky support   4096 Aug 29 11:59 lib 
-rwxrwxrwx  1 ricky support    924 Aug 29 12:00 initservice.sh 
```

`cksum`命令用于获取 CRC 校验和。

如何在每个文件之后附加 CRC 校验和（包括目录列表），如下所示，在这些 nix（Linux、AIX、Sunos、HPUX）平台中保持以下格式？

```
drwxr-xr-x  2 ricky support   4096 Aug 29 11:59 lib 
-rwxrwxrwx  1 ricky support    924 Aug 29 12:00 initservice.sh 4287252281 
```

**更新说明**：没有第三方应用程序，我使用 java/Groovy 将输出最终解析为给定格式，该格式使用 groovy XmlSlurper 形成 xml（生成的 XML 大小约为 5MB）

```
"permission","hardlink","owner","group","fsize","month","date","time","filename","checksum" 
```

欢迎所有建议！:)

**用我的代码更新**

但是在这里我正在计算 md5hex，它给出了与`md5sum`来自 linux 的命令类似的输出。所以它不再`cksum`是因为我不能使用一些许可问题的jacksum bcz :(

```
class CheckSumCRC32 {

public def getFileListing(String file){
    def dir = new File(file)
    def filename = null
    def md5sum = null
    def filesize = null
    def lastmodified = null
    def lastmodifiedDate = null
    def lastmodifiedTime = null
    def permission = null
    Format formatter = null
    def list=[]
    if(dir.exists()){
        dir.eachFileRecurse (FileType.FILES) { fname ->
            list << fname
          }
        list.each{fileob->
            try{
                md5sum=getMD5CheckSum(fileob.toString())
                filesize=fileob.length()+"b"
                lastmodified=new Date(fileob.lastModified())
                lastmodifiedDate=lastmodified.format('dd/MM/yyyy')
                formatter=new SimpleDateFormat("hh:mm:ss a")
                lastmodifiedTime=formatter.format(lastmodified)
                permission=getReadPermissions(fileob)+getWritePermissions(fileob)+getExecutePermissions(fileob)
                filename=getRelativePath("E:\\\\temp\\\\recurssive\\\\",fileob.toString())
                println "$filename, $md5sum, $lastmodifiedDate, $filesize, $permission, $lastmodifiedDate, $lastmodifiedTime "
            }
            catch(IOException io){
                println io
            }
            catch(FileNotFoundException fne){
                println fne
            }   
            catch(Exception e){
                println e
            }           
        }
    }       
}

public def getReadPermissions(def file){
    String temp="-"
    if(file.canRead())temp="r"
    return temp
}
public def getWritePermissions(def file){
    String temp="-"
    if(file.canWrite())temp="w"
    return temp
}
public def getExecutePermissions(def file){
    String temp="-"
    if(file.canExecute())temp="x"
    return temp
}
public def getRelativePath(def main, def file){""
    return file.toString().replaceAll(main, "")
}

public static void main(String[] args) {
    CheckSumCRC32 crc = new CheckSumCRC32();
    crc.getFileListing("E:\\temp\\recurssive")
}
} 
```

输出

```
release.zip, 25f995583144bebff729086ae6ec0eb2, 04/06/2012, 6301510b, rwx, 04/06/2012, 02:46:32 PM 
file\check\release-1.0.zip, 3cc0f2b13778129c0cc41fb2fdc7a85f, 18/07/2012, 11786307b, rwx, 18/07/2012, 04:13:47 PM 
file\Dedicated.mp3, 238f793f0b80e7eacf5fac31d23c65d4, 04/05/2010, 4650908b, rwx, 04/05/2010, 10:45:32 AM 
```

但我仍然需要一种方法来计算硬链接、所有者和组。我在网上搜索，看起来[java7](http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html)有这个功能，我被 java6 困住了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T22:47:48.193

看看[http://www.jonelo.de/java/jacksum/index.html](http://www.jonelo.de/java/jacksum/index.html) - 据报道提供 cksum - 兼容 CRC32 校验和。

顺便说一句，我尝试使用 java.util.zip.CRC32 来计算校验和，它给出的值与 cksum 不同，因此必须使用稍微不同的算法。

编辑：我试过jacksum，它可以工作，但你必须告诉它使用'cksum'算法——显​​然这**与**crc32不同，jacksum也支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:37:07.503

好吧，您可以运行该命令，然后，对于每一行，运行 the`cksum`并将其附加到该行。

我做了以下事情：

```
dir = "/home/will"

"ls -latr $dir".execute().in.eachLine { line ->

  // let's omit the first line, which starts with "total"
  if (line =~ /^total/) return

  // for directories, we just print the line
  if (line =~ /^d/) 
  {
    println line
  } 
  else 
  {
    // for files, we split the line by one or more spaces and join 
    // the last pieces to form the filename (there must be a better 
    // way to do this)
    def fileName = line.split(/ {1,}/)[8..-1].join("")

    // now we get the first part of the cksum
    def cksum = "cksum $dir/$fileName".execute().in.text.split(/ {1,}/)[0]

    // concat the result to the original line and print it
    println "$line $cksum"
  }
} 
```

特别注意我的“必须有更好的方法来做到这一点”。

# android - Android AsyncTask 访问活动上下文的更好方法

> ID：12214364
> 
> 赞同：6
> 
> 时间：2012-08-31T11:26:58.480
> 
> 标签：android, android-asynctask

我花了很长时间才使它起作用，但这显然不是最佳实践。简而言之，当我的 AsyncTask 完成时，我需要显示一个对话框，但是 getApplicationContext() 不起作用，在创建 AsyncTask 时也没有将它作为参数传递。因此，我在 AsyncTask 类中为上下文声明了一个公共变量，并在执行之前对其进行了设置：

```
 private OnClickListener clickLoadRefs = new OnClickListener() {
    @Override
    public void onClick(View v) {
        Log.d("H","Clicked Load Refs");
        RefreshRefPoints refreshRefPoints = new RefreshRefPoints();
        refreshRefPoints.myCtx=v.getContext();
        refreshRefPoints.execute(v.getContext());
    }
};

private class RefreshRefPoints extends AsyncTask<Context, Integer, Integer> {

    private Integer nPoints=0;
    public Context myCtx;
    private ProgressDialog pd;

    protected Integer doInBackground(Context... ctx) {
        Log.d("H","doInBackground()");
        dbHelper.clearRefPoints();
        requestRefPoints();
        nPoints = parseRefPointsCSV();

        return nPoints;
    }

    protected void onProgressUpdate(Integer... progress) {
    }

    protected void onPreExecute() 
    {
        pd = ProgressDialog.show(myCtx, "Refreshing Reference Points", "Loading...", true,false);
        Log.d( "H", "onPreExecute()" );
    }
    protected void onPostExecute(Integer result) {
        pd.dismiss();
        AlertDialog.Builder builder = new AlertDialog.Builder(myCtx);
        builder.setTitle("Reference points refresh complete");
        builder.setMessage(result+" records loaded");
        builder.setPositiveButton("OK",null);
        builder.show();
        Log.d("H","onPostExecute()");       
    }...etc 
```

任何人都可以告诉我传递上下文的正确方法吗？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T11:30:56.867

定义一个构造方法并传递上下文一个参数。会更好。

这就是我的意思：

```
private class RefreshRefPoints extends AsyncTask<Void, Integer, Integer> {

    private Integer nPoints=0;
    private Context myCtx;
    private ProgressDialog pd;

    public RefreshRefPoints(Context ctx){
        // Now set context
        this.myCtx = ctx;
    }

} 
```

就这样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-31T11:49:47.903

您也可以使用`YourActivityName.this`来指代活动`Context`。因为 Activites 扩展了 Context，所以这样做是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:29:17.790

在构造函数中传递上下文为

```
private OnClickListener clickLoadRefs = new OnClickListener() {
    @Override
    public void onClick(View v) {
        Log.d("H","Clicked Load Refs");
        RefreshRefPoints refreshRefPoints = new RefreshRefPoints(Your_ActivityName.this);
        refreshRefPoints.myCtx=v.getContext();
        refreshRefPoints.execute(v.getContext());
    }
};

private class RefreshRefPoints extends AsyncTask<Void, Integer, Integer> {

    private Integer nPoints=0;
    public Context myCtx;
    private ProgressDialog pd;

public RefreshRefPoints (Context ctx) {
    myCtx = ctx;
} 
```

# java - 为什么这两个IP不同？

> ID：12214368
> 
> 赞同：1
> 
> 时间：2012-08-31T11:27:14.743
> 
> 标签：java, ip

以下片段：

```
<%= InetAddress.getLocalHost() %> 
```

给出这个：*Feddy/192.168.42.194*

但是当我查看网站[ipchicken](http://www.ipchicken.com)时，我得到了这个：*106.193.214.75*

为什么这两个IP不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:29:12.727

`106.193.214.75`是您网络的公共 IP 地址。

`192.168.42.194`是您的本地 IP 地址 - 内部网络中机器的 IP。网络中的每台机器都有相同的公共 IP 地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T11:29:04.010

地址 192.168.xx 仅用于私有内部网络。您可以与互联网交谈的事实意味着您也有一个公共 IP 地址。

您的路由器的工作是进行网络地址转换，以便您专用网络上的设备都显示为您的公共地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:29:23.250

该服务器位于[NAT](http://en.wikipedia.org/wiki/Network_address_translation)后面，与在公共 Internet 上使用的 IP 地址相比，它在本地为其提供了一个单独的 IP 地址。

使用 NAT 有几个原因，包括安全性和可用公共 IPv4 地址的限制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T11:32:38.713

192.168.xx.xx 是您网络上的本地 IP。106.193.xxx 是您的外部 IP。

您可以使用以下代码获得两者：

```
 String hostName = InetAddress.getLocalHost().getHostName();

        InetAddress[] addresses = InetAddress.getAllByName(hostName);
         for (InetAddress a: addresses) {
             System.out.println(a.getHostAddress());
         } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:29:53.947

一个是您的本地 IP 地址（来自您的路由器），另一个是您在 Internet 上的 IP 地址。

192.168 始终来自路由器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T11:29:54.563

ip 192.168.42.194 是您的本地 ip，它由您的路由器提供给您的电脑。

另一个 ip 是您的 WAN ip，它由您的 isp 提供，是您的路由器从外部世界连接获得的 ip 地址

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T11:30:04.003

因为`192.168.42.194`是您的私有 ip，在您的私有网络上，以及`106.193.214.75`您的公共 IP，由您的 ISP 分配给您的网关。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T11:30:05.730

在 JDK 1.6 中

```
List<InetAddress> addrs = new ArrayList<InetAddress>();
for(NetworkInterface ni : NetworkInterface.getNetworkInterfaces()) {
   if(ni.isUp()) {
      for(InetAddress addr : ni.getInetAddresses()) {
        addrs.add(addr);
      }
   }
} 
```

问候，

# java - 来自 Java 的 VBscript 打开（意外）设置对话框

> ID：12214369
> 
> 赞同：0
> 
> 时间：2012-08-31T11:27:14.947
> 
> 标签：java, vbscript

我有一个可以打开浏览器窗口的简短 VB。该脚本是从 Java 进程启动的，通过`Runtime.getRuntime().exec()`以 wscript.exe 作为解释器的命令启动。当我从提示符启动脚本时，它会按预期运行，但是从我的 Java 进程中它会打开“Windows 脚本主机设置”对话框（而不是打开浏览器窗口）。这是某种安全措施吗？

我的 Java 应用程序在 Java 1.6 中运行，我测试的 Windows 版本是 Windows 7 和 Windows 2003 终端服务器会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:34:08.877

尝试仅通过脚本名称本身运行脚本，因此无需定义 VM，如有必要，您可以将两个 VM 之一定义为默认 VM（请参阅 wscript.exe /？）如果这没有帮助，请尝试以下操作

运行 regedit，导航到`Hkey_local_machine \software \microsoft \windowsNT \currentversion \winlogon` 这里有一个 userinit 注册表，双击它。在 Value data 字段中会有 b 类似`C:\WINDOWS\system32\userinit.exe, C:\WINDOWS\system32\wscript.exe` Delete the `C:\WINDOWS\system32\wscript.exe`part 这样该字段只有 C `:\WINDOWS\system32\userinit.exe`，单击 ok 并关闭注册表编辑器，然后重新启动 windows

# c# - BAL在3层架构中的使用？如何从DAL调用方法到BAL

> ID：12214371
> 
> 赞同：6
> 
> 时间：2012-08-31T11:27:16.287
> 
> 标签：c#, asp.net, n-tier-architecture

我是 3 层架构的新手，下面是我的 DAL 代码

```
public static int Insert(string firstname, string lastname, DateTime dob, string gender,string email, string password)
    {
        // bool flag = false;
        SqlParameter pid;
        SqlParameter result;

        SqlConnection con = Generic.DBConnection.OpenConnection();

        try
        {

            SqlCommand cmd1 = new SqlCommand("Insertreg", con);
            cmd1.CommandType = CommandType.StoredProcedure;
            cmd1.Parameters.AddWithValue("@FirstName", firstname);
            cmd1.Parameters.AddWithValue("@LastName", lastname);
            cmd1.Parameters.AddWithValue("@Dob", dob);
            cmd1.Parameters.AddWithValue("@Gender", gender);
           cmd1.Parameters.AddWithValue("@EmailId", email);
            cmd1.Parameters.AddWithValue("@Password", password);
            result = cmd1.Parameters.Add("@result", System.Data.SqlDbType.Int);
            result.Direction = System.Data.ParameterDirection.Output;
            pid = cmd1.Parameters.Add("@id", System.Data.SqlDbType.Int);
            pid.Direction = System.Data.ParameterDirection.Output;
            return cmd1.ExecuteNonQuery();

            con.Close();

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

这在 BAL

```
 public int insert(string firstname,string lastname,DateTime dob,string gender,string email,string password)
    {
      ProfileMasterDAL dal=new ProfileMasterDAL();
      try
      {
          return ProfileMasterDAL.Insert(firstname, lastname, dob, gender,email, password);
      }
      catch (Exception ex)
      {

          throw ex;
      }
        finally
      {
          dal = null;
      }

    } 
```

我的用户界面

```
 ProfileMasterBLL pmBLL = new ProfileMasterBLL();
 pmBLL.insert(firstname, lastname, dob, gender, mobile, country, state, email, password); 
```

这是在 3 层编码的正确方法吗？我的意思是如何调用从 DAL 到 BAL 和 UI 的方法？如果不建议我一些好方法。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T12:03:45.723

通常我会执行以下操作：

1.  定义一个业务层（BL，你称之为 BAL）。这包含您的业务实体的定义。它还为您使用的任何模式（存储库、上下文等）定义了检索/保存/删除数据的接口。
2.  定义数据访问层 (DAL)。这包含检索/保存/删除接口的实际实现。
3.  定义一个 UI 层。这包含可以使用 BL 加载数据的 UI 元素（表单、控件、模型、控制器等）。

参考文献如下：

1.  BL 不知道 DAL 或 UI。
2.  DAL 知道 BL。DAL 不知道 UI。
3.  UI 知道 BL。UI 不知道 DAL。

对您来说最大的问题可能是，当 BL 不知道 DAL 时，它如何检索/保存/删除数据，因此无法在 DAL 中创建类的实例。好吧，这就是[依赖注入](https://www.google.nl/search?q=dependency%20injection&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)派上用场的地方。您所要做的就是将 DAL 类注入 BL 接口。

希望这是有道理的。我将它用作我的标准 3 层实现，它绝对没有问题。具体来说，我将[Entity Framework 与 POCO 一起](https://www.google.nl/search?q=entity%20framework%20poco&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)用于实体，我使用的 DI 是自定义的，但[任何一个](https://stackoverflow.com/questions/21288/which-net-dependency-injection-frameworks-are-worth-looking-into)都可以。

## 更新

BL 不知道 DAL。

*   BL 定义了一个接口（我们称之为 IRepository），它可以用来做它需要做的事情。
*   DAL 定义了一个实现接口 IRepository 的类（Repository）。所以存储库的实际实现是在 DAL 中。
*   显然 BL 不能直接创建存储库的实例。这就是依赖注入的用武之地，这允许开发人员创建一个通常无法完成的类的实例。一个简单粗暴的版本是使用[反射](https://www.google.nl/search?q=c#%20reflection&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)。

我希望这更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:12:21.880

它可能会帮助您查看一些实际代码。我建议您下载[NetTiers](http://nettiers.com/)，针对您的数据库模式运行它，并查看输出代码以了解实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:19:37.853

您可以为 3 层架构提供以下示例代码：-

类-BAL.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Collections;

public class BAL
{
    DAL objDAL;
    public BAL()
    {

    }

    public string _Name;
    public string Name
    {
        get { return _Name; }
        set { _Name = value; }
    }

    public int insert()
    {
        objDAL = new DAL();
        int val = 0;
        try
        {
            Hashtable objHash = new Hashtable();
            objHash.Add("@Name", Convert.ToString(_Name));
            val = objDAL.Insert("Your SP Name", objHash);
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            objDAL = null;
        }
        return val;
    }
} 
```

类 - DAL.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.SqlClient;
using System.Collections;

public class DAL : IDisposable
{
    SqlConnection con;

    public DAL()
    {
        con = new SqlConnection("Connection String");
    }

    public int Insert(string CMD, Hashtable objHash)
    {
        int val = 0;
        try
        {
            SqlCommand cmd1 = new SqlCommand(CMD, con);
            cmd1.CommandType = CommandType.StoredProcedure;
            foreach (DictionaryEntry de in objHash)
            {
                cmd1.Parameters.AddWithValue(Convert.ToString(de.Key), Convert.ToString(de.Value));
            }
            con.Open();
            val = cmd1.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            con.Close();
        }
        return val;
    }

    #region IDisposable Members

    public void Dispose()
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

用户界面：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{

    BAL objBAL;

    protected void Page_Load(object sender, EventArgs e)
    {
        Insert();
    }

    public void Insert()
    {
        int val = 0;
        objBAL = new BAL();
        objBAL.Name = "stackoverflow";
        try
        {
            val = objBAL.insert();
        }
        catch { }
        finally
        {
            objBAL = null;
        }
        if (val != 0)
        {
            //Insert sucessful
        }
        else
        {
            //Error in Insert.
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-04T10:15:30.707

```
using System;
using System.Data;
using System.Configuration;
using System.Collections.Generic;
using System.Text;
using System.Data.Common;
using System.Data.SqlClient;
using System.Data.OleDb;
using System.Data.Odbc;
using System.IO;
using System.ComponentModel;

namespace dal
{

    /// <summary>
    /// Summary description for Data Access Layer
    /// </summary>
    public class DataAccess
    {
        public string strConnectionString;
        private DbConnection objConnection;
        private DbCommand objCommand;
        private DbProviderFactory objFactory = null;
        private bool boolHandleErrors=false;
        private string strLastError;
        private bool boolLogError=false;
        private string strLogFile;

        public DataAccess()
        {

            //strConnectionString = ;
            strConnectionString = objCommon.GetConnectionString;
            objFactory = OleDbFactory.Instance;
            objConnection = objFactory.CreateConnection();
            objCommand = objFactory.CreateCommand();
            objConnection.ConnectionString = strConnectionString;
            objCommand.Connection = objConnection;
        }

        public bool HandleErrors
        {
            get
            {
                return boolHandleErrors;
            }
            set
            {
                boolHandleErrors = value;
            }
        }

        public string LastError
        {
            get
            {
                return strLastError;
            }
        }

        public bool LogErrors
        {
            get
-            {
                return boolLogError;
            }
            set
            {
                boolLogError = value;
            }
        }

        public string LogFile
        {
            get
            {
                return strLogFile;
            }
            set
            {
                strLogFile = value;
            }
        }

        public int AddParameter(string name, object value)
        {
            DbParameter p = objFactory.CreateParameter();
            p.ParameterName = name;
            p.Value = value;
            return objCommand.Parameters.Add(p);
        }

        public int AddParameter(string name, object value, ParameterDirection direction)
        {
            DbParameter p = objFactory.CreateParameter();
            p.ParameterName = name;
            p.Value = value;
            p.Direction = direction;
            return objCommand.Parameters.Add(p);
        }

        public int AddParameter(string name, object value, DbType type)
        {
            DbParameter p = objFactory.CreateParameter();
            p.ParameterName = name;
            p.Value = value;
            p.DbType = type;
            return objCommand.Parameters.Add(p);
        }

        public int AddParameter(DbParameter parameter)
        {
            return objCommand.Parameters.Add(parameter);
        }

        public DbCommand Command
        {
            get
            {
                return objCommand;
            }
        }

        public void BeginTransaction()
        {
            try
            {
                if (objConnection.State == System.Data.ConnectionState.Closed)
                {
                    objConnection.Open();
                }
                objCommand.Transaction = objConnection.BeginTransaction();
            }
            catch (Exception Ex)
            {
                HandleExceptions(Ex);
            }
        }

        public void CommitTransaction()
        {
            objCommand.Transaction.Commit();
            objConnection.Close();
        }

        public void RollbackTransaction()
        {
            objCommand.Transaction.Rollback();
            objConnection.Close();
        }

        public int ExecuteNonQuery(string query)
        {
            return ExecuteNonQuery(query, CommandType.Text, ConnectionState.CloseOnExit);
        }

        public int ExecuteNonQuery(string query, CommandType commandtype)
        {
            return ExecuteNonQuery(query, commandtype, ConnectionState.CloseOnExit);
        }

        public int ExecuteNonQuery(string query, ConnectionState connectionstate)
        {
            return ExecuteNonQuery(query, CommandType.Text, connectionstate);
        }

        public int ExecuteNonQuery(string query, CommandType commandtype, ConnectionState connectionstate)
        {
            objCommand.CommandText = query;
            objCommand.CommandType = commandtype;
            int i = -1;
            try
            {
                if (objConnection.State == System.Data.ConnectionState.Closed)
                {
                    objConnection.Open();
                }
                i = objCommand.ExecuteNonQuery();
            }
            catch (Exception ex)
            {
                HandleExceptions(ex);
            }
            finally
            {
                objCommand.Parameters.Clear();
                if (connectionstate == ConnectionState.CloseOnExit)
                {
                    objConnection.Close();
                }
            }

            return i;
        }

        public object ExecuteScalar(string query)
        {
            return ExecuteScalar(query, CommandType.Text, ConnectionState.CloseOnExit);
        }

        public object ExecuteScalar(string query, CommandType commandtype)
        {
            return ExecuteScalar(query, commandtype, ConnectionState.CloseOnExit);
        }

        public object ExecuteScalar(string query, ConnectionState connectionstate)
        {
            return ExecuteScalar(query, CommandType.Text, connectionstate);
        }

        public object ExecuteScalar(string query, CommandType commandtype, ConnectionState connectionstate)
        {
            objCommand.CommandText = query;
            objCommand.CommandType = commandtype;
            object o = null;
            try
            {
                if (objConnection.State == System.Data.ConnectionState.Closed)
                {
                    objConnection.Open();
                }
                o = objCommand.ExecuteScalar();
            }
            catch (Exception ex)
            {
                HandleExceptions(ex);
            }
            finally
            {
                objCommand.Parameters.Clear();
                if (connectionstate == ConnectionState.CloseOnExit)
                {
                    objConnection.Close();
                }
            }

            return o;
        }

        public DbDataReader ExecuteReader(string query)
        {
            return ExecuteReader(query, CommandType.Text, ConnectionState.CloseOnExit);
        }

        public DbDataReader ExecuteReader(string query, CommandType commandtype)
        {
            return ExecuteReader(query, commandtype, ConnectionState.CloseOnExit);
        }

        public DbDataReader ExecuteReader(string query, ConnectionState connectionstate)
        {
            return ExecuteReader(query, CommandType.Text, connectionstate);
        }

        public DbDataReader ExecuteReader(string query, CommandType commandtype, ConnectionState connectionstate)
        {
            objCommand.CommandText = query;
            objCommand.CommandType = commandtype;
            DbDataReader reader = null;
            try
            {
                if (objConnection.State == System.Data.ConnectionState.Closed)
                {
                    objConnection.Open();
                }
                if (connectionstate == ConnectionState.CloseOnExit)
                {
                    reader = objCommand.ExecuteReader(CommandBehavior.CloseConnection);
                }
                else
                {
                    reader = objCommand.ExecuteReader();
                }

            }
            catch (Exception ex)
            {
                HandleExceptions(ex);
            }
            finally
            {
                objCommand.Parameters.Clear();
            }

            return reader;
        }

        public DataSet ExecuteDataSet(string query)
        {
            return ExecuteDataSet(query, CommandType.Text, ConnectionState.CloseOnExit);
        }

        public DataSet ExecuteDataSet(string query, CommandType commandtype)
        {
            return ExecuteDataSet(query, commandtype, ConnectionState.CloseOnExit);
        }

        public DataSet ExecuteDataSet(string query, ConnectionState connectionstate)
        {
            return ExecuteDataSet(query, CommandType.Text, connectionstate);
        }

        public DataSet ExecuteDataSet(string query, CommandType commandtype, ConnectionState connectionstate)
        {
            DbDataAdapter adapter = objFactory.CreateDataAdapter();
            objCommand.CommandText = query;
            objCommand.CommandType = commandtype;
            adapter.SelectCommand = objCommand;
            DataSet ds = new DataSet();

            try
            {
                adapter.Fill(ds);
            }
            catch (Exception ex)
            {
                HandleExceptions(ex);
            }
            finally
            {
                objCommand.Parameters.Clear();
                if (connectionstate == ConnectionState.CloseOnExit)
                {
                    if (objConnection.State == System.Data.ConnectionState.Open)
                    {
                        objConnection.Close();
                    }
                }
            }
            return ds;
        }

        private void HandleExceptions(Exception ex)
        {

            throw ex;

        }

        private void WriteToLog(string msg)
        {
            StreamWriter writer = File.AppendText(LogFile);
            writer.WriteLine(DateTime.Now.ToString() + " - " + msg);
            writer.Close();
        }

        public void Dispose()
        {
            objConnection.Close();
            objConnection.Dispose();
            objCommand.Dispose();
        }

        public enum Providers
        {
            SqlServer, OleDb, Oracle, ODBC, ConfigDefined
        }

        public enum ConnectionState
        {
            KeepOpen, CloseOnExit
        }

        public interface ILoadFromDataRow
        {
            bool LoadFromDataRow(DataRow row);
        }

    }

} 
```

# responsive-design - 图像映射响应式设计

> ID：12214373
> 
> 赞同：1
> 
> 时间：2012-08-31T11:27:20.703
> 
> 标签：responsive-design

我有一个响应式 wordpress 主题，并设计了一个带有图像映射活动区域的图像，当点击时会显示一个内容 div。

当重新调整窗口大小时，活动区域（当然）随着图像大小和位置的不同而移动。我尝试了一个插件[http://wordpress.org/extend/plugins/responsive-image-maps/](http://wordpress.org/extend/plugins/responsive-image-maps/)但这似乎不起作用，除非我无法解释我应该做什么。

下面是 html 和 javascript 调用

`<map name="circle"><area shape="circle" coords="58,290,53" href="javascript:unhide('welcome');"><div class="columns different sidebar right"><img class="scale-with-grid" src="../different.png" usemap="circle" /></div></a> </map>`

有什么想法我应该为不同的媒体尺寸放置坐标吗？在 CSS 中，在调用 @media 函数的 html 中？

# c# - getter 和 setter 中的附加操作

> ID：12214374
> 
> 赞同：2
> 
> 时间：2012-08-31T11:27:22.137
> 
> 标签：c#

我可以在 C# 公共属性的 getter 和 setter 中自由添加额外的操作吗？到什么程度？
例如，以下代码是否可以（返回和编辑嵌套到另一个集合中的集合）？

```
public ObservableCollection<MyEntity> MyCollection
{
   get
   {
     return myColl.Where(p => p.Name == myName).FirstOrDefault().AnotherCollection;
   }
   private set
   {
     myColl.Where(p => p.Name == myName).FirstOrDefault().AnotherCollection = value;
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:36:15.957

The only bound is the semantics. You may use whatever operations you find suitable, as long as the general property semantics is preserved. Among others, I would check that

*   access is reasonably fast
*   if setter finished w/o error, getter should return the value semantically compatible with the set value
*   if possible, avoid raising exceptions inside
*   consecutive gets return semantically equivalent values if internal state didn't change

If you keep the semantics, IMHO any operation is allowed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:54:50.270

实际上，您可以在属性 getter 和 setter 中添加大多数您想要的东西。实际上，它们只不过是避免这样写的简单方法：

```
private String _value;
public String GetValue
{
    return _value;
}
public void SetValue(string value)
{
    _value = value;
} 
```

因此，如果您可以在方法中执行此操作，则*可以*在属性中执行此操作（不一定意味着您应该这样做）

至于什么是正确的，很大程度上取决于上下文，许多人有不同的意见。我尝试遵循的一般准则是：

1.  不要做任何需要太多时间的事情。预计属性会很快。
2.  不要放任何会抛出异常的东西，`Exception`除非它被记录在案并且有意义。我将使用`ArgumentException`or`NullReferenceException`在我必须考虑会破坏代码的属性中的值的情况下，但是如果它需要异常或者我调用可能导致与属性本身无关的异常的方法，那么方法更好.
3.  使用常识。如果你可以对自己说，我想`get`或`set`一个值，那么一个属性是有意义的。如果我想`do something`，那么你可能最好用一种方法。
4.  这可以追溯到 #1，但是如果没有要获取或设置的支持字段（自动属性无论如何都会在后台执行此操作），那么您必须考虑一个属性是否真的是正确的方法。

但正如我所说，这些是我的指导方针，我会不时打破它们，但当我这样做时，我倾向于确保有文件证明该物业将做一些无例外或长期运行的事情。

`myColl`如果或是，`p`您的示例可能会引发异常`null`，因此除非您 100% 确定两者都不可能为空，否则我不会将此作为属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:37:33.907

I think there are two rules:

1.  Common sense - if you think it shouldn't be like that. Then it probably shouldn't be like that.
2.  Principle of least surprise

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T11:42:10.397

您提供的代码有“坏代码”的味道。

1.  您使用过 FirstOrDefault 函数；可能有空值。

2.  myName 变量似乎是一个类级别的变量。然后在一个属性中，您似乎使用了多个类级别变量（myColl 和 myName）；这对我来说似乎有点奇怪。

    3.您似乎返回了一个深度对象，`AnotherCollection`它是列表中第一项的属性。这可能会导致问题；如果;

一个。`myColl`一片空白，

湾。`myValue`一片空白，

C。`FirstOrDefault`返回空值，

d。`AnotherCollection`一片空白。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:32:08.470

在我看来没问题

> 有些人会说它很丑，有些人会说它是有效的或者只是好的，也许很好......
> 
> get/set 深入 2 种方法，例如 get() 和 set()

*什么是“一般”编码指南？*

# memory-management - 从右开始查找单词中的第一个零位 (LSB)

> ID：12214376
> 
> 赞同：1
> 
> 时间：2012-08-31T11:27:31.353
> 
> 标签：memory-management, bitmap, heap, bit-manipulation

我正在为我的程序编写一个小型平板分配器，但是在阅读了 IBM 的一篇关于无锁堆的论文之后，我决定实现类似的东西，而不是使用带有锁定机制的列表。但是，哪种 GCC 内在函数（ffs/ffz/ctz 等）最有效，为什么？

我最有可能的目标是带有`CLZ`硬件指令的 ARMv7 和 ARMv6 处理器。

我想出了类似的东西

```
uint32_t tmp;
uint32_t new_bits;
uint32_t old_bits;

do {
    old_bits = slab->bitmap;
    tmp = <function>(old_bitmap);
    new_bits = old_bits | (1 << tmp);
} while(cpu_atomic_cmpxchg(&slab->bitmap, old_bits, new_bits) != OS_OKAY);

return ((void *) slab->start + (tmp * slab->blksize)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:29:41.747

如果您有 CTZ，则只需反转值并计算尾随零：

```
if (x == -1ULL)
    return /* failure? */;
int index = __builtin_ctz(~x); 
```

例如

```
 v
 x = 0000 1111 0000 1111 0000 1111 0000 1111
~x = 1111 0000 1111 0000 1111 0000 1111 0000
index = __builtin_ctz(~x) = 4 
```

# python - Python - 共享变量的问题

> ID：12214380
> 
> 赞同：2
> 
> 时间：2012-08-31T11:27:38.337
> 
> 标签：python

我想使用来自多个线程和模块的共享队列。我有以下 Python 代码：

```
# moda.py

import queue
import modb

q = queue.Queue()

def myPut(x):
    q.put(x)

def main():
    print('moda:', str(id(q)))
    modb.go()
    q.get()

if __name__ == '__main__':
    main() 
```

和

```
# modb.py

import moda
import threading

def something():
    print('modb:', str(id(moda.q)))
    moda.myPut('hi')

def go():
    threading.Thread(target = something).start() 
```

`something`在线程 1 上`somethingElse`被调用，在线程 2 上被调用。这两种方法的地址`q`不同 - 这就是调用`get`永远不会返回的原因。我怎样才能避免这种情况？是因为循环导入还是因为多线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:00:55.637

Austin Phillips 在评论中发布[的链接有答案：](https://stackoverflow.com/a/744403/222914)

> 最后，执行脚本运行在名为 __main__ 的模块中，以自己的名称导入脚本将创建一个与 __main__ 无关的新模块。

因此，`__main__.q`和`moda.q`（导入到`modb`中）是两个不同的对象。

使其工作的一种方法是像这样创建一个单独的主模块并运行它而不是`moda`：

```
# modmain.py

import moda

if __name__ == '__main__':
    moda.main() 
```

但是，您仍然应该考虑将`q`其他共享内容放入一个新模块中，然后再导入到这两个模块中，`moda`以`modb`避免其他一些陷阱。

# c# - XML 保存布尔状态。（折叠并展开画布）

> ID：12214390
> 
> 赞同：0
> 
> 时间：2012-08-31T11:28:11.853
> 
> 标签：c#, xml, visual-studio-2010, windows-phone-7

节目背景：

我正在为 windows phone 7 构建一个应用程序，你可以在其中输入你一周的日常活动和营养计划，这样人们就可以在去健身房等时得到提醒。

每天都有一份小清单，列出当天的锻炼代表和设定的意愿。然而，如果他们那天没有训练，这意味着这是一个“休息日”，他们按下休息日按钮，一个画布出现在列表中，上面写着休息日。

问题是我让应用程序使用 xml 保存画布关闭或启动的状态，以便当用户返回该页面或返回应用程序时，画布将是他们离开它的方式。

我目前拥有的代码是：

程序加载时：这会检查程序最后一次使用的时间是用户的休息日画布是向上（true）还是向下（false）

```
bool searchValueMon;
if (monRest == true)
{
    canMon.Visibility = Visibility.Collapsed;
    mondayReadData();
    IsolatedStorageSettings.ApplicationSettings.Remove("true");
    IsolatedStorageSettings.ApplicationSettings.Save();
}

else

{
    canMon.Visibility = Visibility.Visible;
    IsolatedStorageSettings.ApplicationSettings.Remove("false");
    IsolatedStorageSettings.ApplicationSettings.Save();
} 
```

星期一的休息按钮：这会将画布向上（隐藏列表）

```
 canMon.Visibility = Visibility.Visible;
       monRest = false;

        IsolatedStorageSettings.ApplicationSettings.Add("false", monRest);

        // Write to the Isolated Storage
        XmlWriterSettings x_W_Settings = new XmlWriterSettings();
        x_W_Settings.Indent = true;

        using (IsolatedStorageFile ISF = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream stream = ISF.OpenFile("MonRest.xml", FileMode.Create))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(List<Rest>));
                using (XmlWriter xmlWriter = XmlWriter.Create(stream, x_W_Settings))
                {
                    serializer.Serialize(xmlWriter, GenerateMonRestData());
                }
            }
        }

        IsolatedStorageSettings.ApplicationSettings.Remove(Convert.ToString(monRest));
        IsolatedStorageSettings.ApplicationSettings.Save(); 
```

以下是画布上名为“练习”的按钮，用于折叠画布，为一天的训练做好准备：

```
 private void btnMonEx_Click(object sender, RoutedEventArgs e)
    {
        canMon.Visibility = Visibility.Collapsed;
        //monRest = true;

        // IsolatedStorageSettings.ApplicationSettings.Remove("false");
        IsolatedStorageSettings.ApplicationSettings.Add("true", monRest);

        //IsolatedStorageSettings.ApplicationSettings.Save();

        mondayReadData();

       // IsolatedStorageSettings.ApplicationSettings.Remove(Convert.ToString(monRest));
        IsolatedStorageSettings.ApplicationSettings.Save();

    } 
```

该程序似乎根本没有保存画布的状态，当我按下画布折叠或向上时，程序崩溃。

关于这可能是什么的任何想法？我真的很难找到解决这个问题的方法。

# android - 通过 Intent.putExtra 访问 Activity 中的变量

> ID：12214391
> 
> 赞同：1
> 
> 时间：2012-08-31T11:28:11.747
> 
> 标签：android, android-intent

我想知道，如果我通过intent.putextra 访问变量，那么如果通过示例清除该变量的值会发生变化会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:43:30.783

它非常简单直接。您需要使用`startActivityForResult`，`setResult`并`onActivityResult`在活动之间保持值更新。例如：

从您当前的活动中，开始一个新的活动，如下所示：

```
Intent i = new Intent(this, SomeClass.class);
i.putExtra("value", 1001);
startActivityForResult(i, 1); 
```

在您的`SomeClass`活动中，获取值，更改它并将其返回，如下所示：

```
int value = getIntent().getIntExtra("value", 0);
value += 100;   //changing the value for demo purposes
Intent j = new Intent();
j.putExtra("modified_value", value);
setResult(Activity.RESULT_OK, j);
finish(); 
```

现在回到您的父活动，执行以下操作以接收修改后的值：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == 1){
        if(resultCode == Activity.RESULT_OK){
            int modified_value = data.getIntExtra("modified_value", 0);
        }
    }
} 
```

# javascript - 如何让 iPhone 用户在我的网站上观看带字幕的视频？

> ID：12214395
> 
> 赞同：2
> 
> 时间：2012-08-31T11:28:27.980
> 
> 标签：javascript, iphone, html

在网站上观看带字幕的视频（外部）有一项任务要做。

有没有人在 iPhone 上的视频播放器中这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:48:35.940

由于字幕文件基本上只是一个文本文件，其中包含由参数 -和组成的数据集合`to-time`，因此您可以在子视图中显示此数据（一个简单的就足够了）的视图。从字幕文件（例如文件）中，使用这三个类变量创建一个对象数组。然后，您可以设置一个s 链，将在一个对象的显示时间完成或下一个需要显示时触发。`from-time``text-to-show``UILabel``MPMoviePlayerController``.srt``Subtitle``NSTimer``Subtitle``subTitle`

**编辑-**此答案适用于带字幕的本地视频播放。我没有通读网站部分，但我仍然认为这个答案是相关的，因为这个想法保持不变，无论是 HTML+JS 还是原生 iOS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:52:36.390

我认为第一个答案不成立，因为[请确认]我们谈论的是 html 页面，而不是原生应用程序；以防万一，那里有这个[图书馆](http://www.storiesinflight.com/js_videosub/)；；我会试一试

# xcode - 检测 iPhone 24 小时时间设置

> ID：12214398
> 
> 赞同：8
> 
> 时间：2012-08-31T11:28:46.737
> 
> 标签：xcode, cocoa-touch, uidatepicker

我正在使用 UIDatePicker 来选择时间。我还在自定义选择器的背景，但是我需要 2 个不同的图像，具体取决于用户是使用 12 小时模式（显示 AM/PM 列）还是 24 小时模式。如何检测 12/24 小时时间的用户设置？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-02T14:23:17.307

甚至比其他人更短：

```
NSString *format = [NSDateFormatter dateFormatFromTemplate:@"j" options:0 locale:[NSLocale currentLocale]];
BOOL is24Hour = ([format rangeOfString:@"a"].location == NSNotFound); 
```

# 解释

表示 am/pm 符号的字符串格式化字符是“a”，如[Unicode 区域设置标记语言 – 第 4 部分：日期](http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_Patterns)中所述。

同一份文档还解释了特殊的模板符号“j”：

> 这是一个特殊用途的符号。它不得出现在模式或骨架数据中。相反，它保留用于传递给执行灵活日期模式生成的 API 的骨架中。在这种情况下，它会请求区域设置的首选小时格式（h、H、K 或 k），这取决于是否在区域设置的标准短时间格式中使用了 h、H、K 或 k。在此类 API 的实现中，在开始与 availableFormats 数据进行匹配之前，必须将“j”替换为 h、H、K 或 k。请注意，在传递给 API 的框架中使用“j”是让框架请求区域设置的首选时间周期类型（12 小时或 24 小时）的唯一方法。

该`NSString`方法`dateFormatFromTemplate:options:locale:`在 Apple 的[`NSDateFormatter`文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDateFormatter/dateFormatFromTemplate%3aoptions%3alocale%3a)中有所描述：

> 返回一个本地化的日期格式字符串，表示为指定区域设置适当排列的给定日期格式组件。

因此，该方法的作用是将`@"j"`您作为模板传入的格式字符串转换为适合`NSDateFormatter`. 如果此字符串`@"a"`在任何地方都包含 am / pm 符号，那么您知道区域设置（以及操作系统为您询问的其他用户设置）希望显示 am / pm。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-01T22:45:47.890

日期扩展形式的两个最流行的解决方案的 Swift (3.x) 版本：

```
extension Date {

    static var is24HoursFormat_1 : Bool  {
        let dateString = Date.localFormatter.string(from: Date())

        if dateString.contains(Date.localFormatter.amSymbol) || dateString.contains(Date.localFormatter.pmSymbol) {
            return false
        }

        return true
    }

    static var is24HoursFormat_2 : Bool {
        let format = DateFormatter.dateFormat(fromTemplate: "j", options: 0, locale: Locale.autoupdatingCurrent)
        return !format!.contains("a")
    }

    private static let localFormatter : DateFormatter = {
        let formatter = DateFormatter()

        formatter.locale    = Locale.autoupdatingCurrent
        formatter.timeStyle = .short
        formatter.dateStyle = .none

        return formatter
    }()
} 
```

用法 ：

```
Date.is24HoursFormat_1
Date.is24HoursFormat_2 
```

NSDate 扩展形式的两个最流行的解决方案的 Swift (2.0) 版本：

```
extension NSDate {

    class var is24HoursFormat_1 : Bool  {
        let dateString = NSDate.localFormatter.stringFromDate(NSDate())

        if dateString.containsString(NSDate.localFormatter.AMSymbol) || dateString.containsString(NSDate.localFormatter.PMSymbol) {
            return false
        }

        return true
    }

    class var is24HoursFormat_2 : Bool {
        let format = NSDateFormatter.dateFormatFromTemplate("j", options: 0, locale: NSLocale.autoupdatingCurrentLocale())
        return !format!.containsString("a")
    }

    private static let localFormatter : NSDateFormatter = {
        let formatter = NSDateFormatter()

        formatter.locale    = NSLocale.autoupdatingCurrentLocale()
        formatter.timeStyle = .ShortStyle
        formatter.dateStyle = .NoStyle

        return formatter
    }()
} 
```

请注意，Apple 在 NSDateFormatter （[日期格式化](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW10 "日期格式化程序")程序）上说以下内容：

> 创建日期格式化程序并不是一项廉价的操作。如果您可能经常使用格式化程序，则缓存单个实例通常比创建和处置多个实例更有效。一种方法是使用静态变量。

这就是静态让的原因

其次，您应该使用 NSLocale.autoupdatingCurrentLocale() （对于 is24HoursFormat_1 ），这样您将始终获得实际的当前状态。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T11:32:31.830

*   [一](https://stackoverflow.com/questions/1972108/detect-whether-iphone-is-displaying-time-in-12-hour-or-24-hour-mode)
*   [二](https://stackoverflow.com/questions/8033099/how-detect-time-settings-of-device)
*   [三](https://stackoverflow.com/questions/7448360/detect-if-time-format-is-in-12hr-or-24hr-format)

可能还有很多很多...

# mysql - 想不出一个好的sql查询

> ID：12214399
> 
> 赞同：0
> 
> 时间：2012-08-31T11:28:51.097
> 
> 标签：mysql, sql

好的，所以我有三张表， `images(ID, name,..)`和 `tags(ID, name, ..)`一张有连接的表`image_tags(imageID, tagID)`。

这是我的问题，我正在尝试编写一个查询来获取所有具有**2+**特定标签 ID 的图像。

听起来很简单，或者我想。我知道我可以通过获取所有具有一个标签的图像来做到这一点，然后检查它们是否有其他标签，但是这样的性能成本有点太高了。

非常感谢您对此事的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:23:24.730

我认为你想要的查询是这样的：

```
SELECT images.ID, COUNT(DISTINCT tags.ID) as counter
FROM image_tags it
group by it.imageID
having max(case when it.tagID = 1020 then 1 else 0 end) = 1 and
       max(case when it.tagID = 1016 then 1 else 0 end) = 1 
```

group by 将给定图像的所有标签组合在一起。having 子句确保它具有您想要的两个标签。如果您*只*想要这两个标签，那么您可以添加子句：

```
max(case when it.tagID not in (1020, 1016) then 1 else 0 end) = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:40:54.983

尝试这个

```
SELECT images.ID, COUNT(DISTINCT tags.ID) as counter FROM images
LEFT JOIN image_tags ON (images.ID=image_tags.imageID)
LEFT JOIN tags ON (image_tags.tagID=tags.ID)
GROUP BY images.ID HAVING COUNT (tags.ID) >=2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T11:34:37.667

这对你有用吗？

```
SELECT * from image_tags i1, image_tags i2
WHERE i1.imageID = i2.imageID
AND i1.tagID != i2.tagID 
```

# c# - 每台机器是否使用相同的种子生成相同的随机数结果？

> ID：12214402
> 
> 赞同：15
> 
> 时间：2012-08-31T11:29:02.940
> 
> 标签：c#, .net, random, seed

我目前被困在随机发生器中。需求规范显示了一个这样的示例：

```
Random rand = new Random(3412); 
```

rand 结果不直接给出，而是用于其他性能。

我编写了与上面相同的代码以通过种子 3412 生成随机数。但是，其余性能的结果与样本完全不同。

生成的结果是518435373，我用同样的代码在网上c#编译器上试过，但是生成的结果不一样，是11688046，其余的性能结果也和样例不一样。

所以我只是想知道在不同的机器上应该是不同的吗？

顺便说一句，任何人都可以提供您机器的结果，看看它是否与我相同。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T11:34:56.013

我希望任何*一种实现*都能为相同的种子提供相同的序列，但很可能涉及不同的实现。例如，“在线 C# 编译器”很可能最终会使用 Mono，我希望它的实现与 .NET 中的实现不同。

我不知道.NET*版本*之间的实现是否发生了变化，但同样，这似乎完全有可能。

构造函数的文档[`Random(int)`](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)指出：

> 为不同的 Random 对象提供相同的种子值会导致每个实例产生相同的随机数序列。

...但它没有指定不同版本的含义等。哎呀，它甚至没有说明 x86 和 x64 版本是否会给出相同的结果。我希望*任何一个特定的 CLR 实例*（即一个进程，而不是两个并排运行的 CLR）中的结果都相同*。

如果您需要更稳定的东西，我会从*指定*的算法开始——我敢打赌，有 Mersenne Twister 等可用的实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-31T11:35:53.297

它没有被指定为做出这样的承诺，所以你应该假设它没有。

任何规范的一个好的规则是不要做出合理使用不需要的承诺，这样你以后可以更自由地改进事情。

确实，`Random`的文档说：

> Random 类的当前实现基于 Donald E. Knuth 的减法随机数生成器算法。

请注意短语“当前实现”，暗示它可能会在未来发生变化。这非常强烈地表明，不仅没有承诺在版本之间保持一致，而且也不打算这样做。

如果规范需要一致的伪随机数，那么它必须指定算法以及种子值。事实上，即使`Random`被指定为做出这样的承诺，如果您将来需要对您的规范的全部或部分进行非 .NET 实现 - 或与之互操作的东西 - 怎么办？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:41:27.700

这可能是由于不同的框架版本。看看[这个](https://stackoverflow.com/questions/11619074/random-number-seed-targeting-the-same-version-of-the-net-framework)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:36:42.400

您尝试的在线提供程序可能使用 CLR 的 Mono 实现，这与 Microsoft 提供的不同。所以可能他们的`Random`类实现有点不同。

# java - Java中的泛型类型推断

> ID：12214405
> 
> 赞同：0
> 
> 时间：2012-08-31T11:29:08.993
> 
> 标签：java, generics

> **可能重复：**
> [在运行时确定泛型方法参数的类型](https://stackoverflow.com/questions/3850588/determining-the-type-for-a-generic-method-parameter-at-runtime)
> [静态方法中的泛型](https://stackoverflow.com/questions/12213472/generics-in-static-methods)

下面的代码在运行时失败，并带有`cannot select from a type variable`. 有没有办法做到这一点而不必将类型作为参数（`Class<E[]> type`）传递？

```
public static <E extends Deal> E[] parseDealsFromJSON(String body) {
    parser.fromJson(body, E[].class); // fails here
}

public static void main(String[] args) {
    SubDeal[] deals = parseDealsFromJSON("");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:38:38.887

A problem is that the right hand size of `=` has no idea what type you want on the left hand side. i.e. java doesn't do this kind of type inference.

A method doesn't know what type you need a return type to be. (I have seen exceptions at runtime with MethodHandles and I suspect that Java 8 or 9 might introduce these features)

e.g. very basic type inference for return types isn't done at runtime (or compile time)

```
public Double getValue() {
    return 5.0;
}

double d = m.getValue(); // not smart enough to avoid creating a `Double` here. 
```

* * *

With Generics you have the added bonus of type erasure. This mean `E[]` is actually `Deal[]` at runtime. Which Deal type you might have liked is lost.

# sql - 从 SQL 变量更新多个 XML 元素

> ID：12214406
> 
> 赞同：0
> 
> 时间：2012-08-31T11:29:10.823
> 
> 标签：sql, sql-server, xml

我需要使用 TSQL 变量的内容更新 XML 元素中的值。增加的复杂性是可以有多个具有相同名称的元素，并且所有元素都需要更新。这是一个示例。请注意，客户 1000000 有两个 customer_firstname 元素。

```
CREATE TABLE Customer_Test
(
    [customer_data] [xml] NULL
) 

-- populate statements
insert into Customer_Test (customer_data) values ('<Customer Note="two customer_firstnames"><customer_id>1000000</customer_id><customer_firstname>Mary</customer_firstname><customer_firstname>Jane</customer_firstname><customer_lastname>Smith</customer_lastname></Customer>');
insert into Customer_Test (customer_data) values ('<Customer Note="normal, no problem"><customer_id>1000001</customer_id><customer_firstname>Joe</customer_firstname><customer_lastname>Bloggs</customer_lastname></Customer>'); 
```

下面的代码在 customer_ID = '1000001' 记录中的 xml 结构上工作得很好，但是对于 customer_ID = '1000000' 这样的情况，只有第一个 customer_firstname 元素会更新

```
DECLARE @newName varchar(10) = 'xxx'
DECLARE @IDValue varchar(10) = '1000000'
UPDATE  [Customer_Test] 
SET  customer_data.modify('replace value of (Customer/customer_firstname/text())[1] with sql:variable("@newName")') 
WHERE  customer_data.value('(/Customer/customer_id)[1]','varchar(50)') = @IDValue 
```

我真的坚持这一点 - 如果 customer_firstname 元素的所有值存在，我需要将它们设置为相同的值。我有一半怀疑需要一个 CROSS APPLY 但我所有编写代码的尝试都不会编译。

我非常重视可能提供的任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:54:18.350

用一个更新语句更新 XML 中的多个值是不可能的。

您可以在 while 循环中执行此操作，该循环迭代您在一个 XML 中拥有的名字的数量。

```
DECLARE @newName varchar(10) = 'xxx'
DECLARE @IDValue varchar(10) = '1000000'
DECLARE @FirstNameCount INT

-- Get the max number of first names in one XML
SELECT @FirstNameCount = max(customer_data.value('count(Customer/customer_firstname)', 'int'))
FROM Customer_Test
WHERE customer_data.value('(/Customer/customer_id)[1]','varchar(50)') = @IDValue

-- Loop over @FirstNameCoount
WHILE @FirstNameCount > 0
BEGIN
  UPDATE  [Customer_Test] 
  SET  customer_data.modify('replace value of (Customer/customer_firstname[sql:variable("@FirstNameCount")]/text())[1] with sql:variable("@newName")')
  WHERE  customer_data.value('(/Customer/customer_id)[1]','varchar(50)') = @IDValue

  SET @FirstNameCount = @FirstNameCount - 1
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:20:57.060

此时是否值得对您的 XML 进行重复数据删除？如果您将所有值设置为相同的值，那么存储第二个名称确实没有意义。您可以根据他们的位置删除第二个 customer_firstname 元素，例如

```
SELECT 'before' s, DATALENGTH( customer_data ) dl, [customer_data] FROM Customer_Test

UPDATE [Customer_Test]
SET  customer_data.modify('delete Customer/customer_firstname[position() > 1]')  

SELECT 'after 1' s, DATALENGTH( customer_data ) dl, [customer_data] FROM Customer_Test

DECLARE @newName varchar(10) = 'xxx' 
DECLARE @IDValue varchar(10) = '1000000' 
UPDATE [Customer_Test]
SET  customer_data.modify('replace value of (Customer/customer_firstname/text())[1] with sql:variable("@newName")')  
WHERE  customer_data.value('(/Customer/customer_id)[1]','varchar(50)') = @IDValue 

SELECT 'after 2' s, DATALENGTH( customer_data ) dl, [customer_data] FROM Customer_Test 
```

# eclipse - SWTBotEclipseEditor 标题和工具提示文本

> ID：12214408
> 
> 赞同：0
> 
> 时间：2012-08-31T11:29:14.597
> 
> 标签：eclipse, junit, eclipse-plugin, swtbot

如何查找 SWTBotEclipseEditor.getText() 方法的标题和工具提示文本给出了 SWTBotEclipseEditor 内部的文本。

![在此处输入图像描述](../Images/dfe455b6e9d65e301d1fd36466b1bca3.png)

```
SWTBotEclipseEditor editor = bot.editorByTitle("testFoo.txt").toTextEditor();
String title =  editor.???   //I want title which is testFoo.txt
String toolTip = editor.getToolTipText();  //not giving 'tooltip text' 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:20:22.203

作为一种解决方法，我使用了`editor.getReference().getTitle()`or `editor.getReference().getTitleToolTip()`。

[http://www.eclipse.org/forums/index.php/t/373784/](http://www.eclipse.org/forums/index.php/t/373784/)

# sql-server - 如何使用公用表表达式在 SQL Server 中进行分层排序

> ID：12214411
> 
> 赞同：1
> 
> 时间：2012-08-31T11:29:21.497
> 
> 标签：sql-server, common-table-expression

> **可能重复：**
> [使用 CTE 进行真正的递归？](https://stackoverflow.com/questions/11636420/a-real-recursion-with-cte)

给定一个引用自身的分层表，例如具有以下列的 Employee 表：

```
Table      Employee
    Column Id INT NOT NULL
    Column ParentId INT NOT NULL (references Id)
    Column Name NVARCHAR(60) NOT NULL 
```

以下查询将为我提供基于给定 EmployeeId 的所有记录：

```
DECLARE @EmployeeId INT = <%insert EmployeeId here%>;

WITH CDE AS
(
    SELECT
        *,
        0 AS Level
    FROM
        collaboration.Employee AS E
    WHERE
        Id = @EmployeeId
    UNION ALL
    SELECT
        E.*,
        CDE.Level + 1 AS Level
    FROM
        collaboration.Employee AS E
        INNER JOIN
        CDE ON E.ParentId = CDE.Id AND E.Id <> 0
)
SELECT DISTINCT
    CDE.*
FROM
    CDE
ORDER BY
    CDE.Level 
```

如果有意义的话，我想要的是能够按“分支”然后“级别”进行排序。所以给出下表：

```
1    0    John Smith
2    1    John Doe
3    1    Jane Williams
4    2    Ian Bond
5    2    James Fleming 
```

我希望结果看起来像：

```
1    0    John Smith
2    1    John Doe
4    2    Ian Bond
5    2    James Fleming
3    1    Jane Williams 
```

我想要一个不涉及构建字符串以方便排序的解决方案。如果无法解决，我想知道原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:38:09.317

```
;WITH CDE AS 
( 
    SELECT 
        *, 
        0 AS Level,
        convert(nvarchar(50),id) as EPath
    FROM 
        collaboration.Employee AS E 
    WHERE 
        Id = @EmployeeId 
    UNION ALL 
    SELECT 
        E.*, 
        CDE.Level + 1 AS Level ,
        convert(nvarchar(50),Epath+'/'+CONVERT(nvarchar(5),e.id))
    FROM 
        collaboration.Employee AS E 
        INNER JOIN 
        CDE ON E.ParentId = CDE.Id AND E.Id <> 0 
) 
SELECT DISTINCT 
    CDE.* 
FROM 
    CDE 
ORDER BY 
    EPath 
```

By the way, SQL Server 2008 has a `HierarchyID` data type for just this kind of thing.

# javascript - 某个元素上的jquery选择器

> ID：12214413
> 
> 赞同：-1
> 
> 时间：2012-08-31T11:29:37.667
> 
> 标签：javascript, jquery

我有一个元素，如下所示：

```
 <tr id="test1" class="class-of-part1">
 <td>...</td>
 </tr> 
```

我必须选择 id 为“test1”的元素和以“class-of”开头的类。如何使用 jquery 选择器进行选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:32:09.317

使用[以选择器开头的属性 ( `[name^="value"]`)](http://api.jquery.com/attribute-starts-with-selector/)：

```
$("#test1[class^='class-of-']") 
```

虽然 id*应该*是唯一的。

**[演示](http://jsfiddle.net/EKBdX/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:30:26.540

`$('#test1')`<按ID

`$('.class-of-part1')`

`$('input[class^="startofclassname"]')`<类似的东西

^任何类名以“startofclassname”开头的输入

更多信息：[http ://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

也许尝试一些谷歌搜索，看看我发现了什么：http: [//api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

给你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:32:42.137

你试过什么？你用谷歌搜索过吗？

选择标识

```
$('#test1') 
```

并选择一个以字符串开头的类

```
$('[class^="class-of-part"]') 
```

尽管选择前缀仅适用于属性，但在这种情况下，如果您使用多个类，则将不起作用。

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:32:47.667

```
$('tr#test1[class^="class-of"]') 
```

`tr`和`id = "test1"`开始`class`于`"class-of"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:33:09.657

以下所有方法都将起作用：

```
$('#test1[class^="class-of"]');

$('#test1').filter('[class^="class-of"]'); 
```

虽然在按 ID 选择时（总是唯一的），但不需要类。

```
$('#test1'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T11:51:10.677

这可能不是`answer`OP 正在寻找的，但我认为我应该在这里注入一些基础知识。

通读评论和答案，让我想起了我学习 jquery 的那一天 :)

我们都面临的基础问题是“我们迫切需要为每个该死的元素分配 ID”。为什么？

1) 使用直接 ID 更容易选择元素 2) 我们懒得思考如何将事件侦听器添加到动态生成的元素中。3) 将所有内容都写在`.ready()`函数中使它看起来很安全。:p

我的认识，1）你不需要所有的ID。

至于OP。他想选择类名以“class-of”开头的 TR。

OP 还指定所有元素都是动态生成的。因此，我建议将事件绑定到类名以“class-of”开头的那些 TR，在我们创建它们的同时。这将避免大量返工及其系统化方法。

我个人的意见是，将你的元素添加到 DOM “现成的” 我所说的“现成的”是指你不应该将事件绑定到它们，或者添加额外的属性，或者实际上，以任何方式操纵它们。您应该在将它们插入 DOM 之前处理它。提高性能，提高您的编码技能，使其更难`amateurs`理解，因此您保持依赖：p lol

# iphone - 如何通过其 API 从 Instagram 获取用户图像

> ID：12214416
> 
> 赞同：2
> 
> 时间：2012-08-31T11:29:47.870
> 
> 标签：iphone, ios, api, instagram

我在 ios 中找不到任何教程来通过其 API从[instagram获取图像。](http://instagram.com/developer)我看到了[，](http://instagram.com/developer/iphone-hooks/) 但找不到任何有趣的东西。所以请告诉我是否可以从 instagram 获取用户图像。如果是，请给我发送链接或任何对我有帮助的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:35:43.693

你为什么不看看[Instagram Objective C 库](https://github.com/jstart/Instagram)，它可以帮助你将它移植到 iOS。

# css - 没有运算符的 jqgrid 搜索

> ID：12214417
> 
> 赞同：0
> 
> 时间：2012-08-31T11:29:50.013
> 
> 标签：css, jqgrid

是否可以在没有运算符的情况下实现 jqGrid 搜索？我需要操作员默认为“包含”。我不想修改原始的 jqgrid js 或 css 文件，因为当我们升级到新版本时它们会被覆盖。

我需要对话框看起来像这样：

![在此处输入图像描述](../Images/9b0a9cae1e97fdaa083c8421806e320c.png)

我可以通过定义来覆盖显示运算符下拉列表：

```
.operators
{
    display: none;
} 
```

我还需要调整宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:42:57.023

好的，这似乎可行，尽管它会更改所有 jqgrid 对话框的默认宽度：

```
.operators
{
    display: none;
}

.ui-jqdialog
{
    width:220px !important;
} 
```

# xcode - 将参数详细信息发送到远程 URL 并在 xml xcode 中获取结果

> ID：12214429
> 
> 赞同：0
> 
> 时间：2012-08-31T11:30:23.893
> 
> 标签：xcode

我正在做一个航班预订应用程序。用户将输入 FROM CITY 和 DESTINATION CITY 详细信息等详细信息，以及出发日期、乘客信息（如成人人数和儿童人数）字段。用户单击“搜索”按钮时，应用程序需要将详细信息发送到远程 url 并执行两个表的 INNER JOIN 机场主和城市将以 XML 格式返回可用的航班详细信息。

在我过去的经验中，我只在本地创建了 sqlite 表并将其复制到我的应用程序文件夹并进行操作以填充表视图。这对我来说是一个非常新的过程，我在网上搜索了许多没有适当线索的书籍后感到很震惊。

我的请求是如何将用户输入的详细信息发送到远程 url，我应该在哪里使用内部连接编写查询（数据存储在远程 sqlite 中，我们将为其发送 url 请求）并以 xml 格式获取结果。任何示例或教程都会有很大帮助。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:49:25.660

您必须在 url 中绑定用户详细信息，例如 @"www.abcd.com/user.php?usename=userna&password=pw"。您必须在服务器中写入 php 文件。在该 php 文件中，您必须连接到数据库并检查用户是否存在。

# sencha-touch-2 - 为什么 Sencha 2 只能在 Webkit 浏览器中运行？

> ID：12214430
> 
> 赞同：2
> 
> 时间：2012-08-31T11:30:24.147
> 
> 标签：sencha-touch-2

Sencha 2 仅适用于 Webkit 浏览器的什么？我知道他们需要 Webkit 引擎，但他们为什么要这样做，这个 webkit 引擎有什么 Firefox / IE 中的引擎没有的？浏览器由 HTML 引擎、CSS 引擎和 Javascript 引擎组成 - 只是为了好奇，它是 Webkit 在 Sencha 方面的特殊 Javascript 引擎吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T11:19:26.673

Sencha Touch 刚开始开发时，iphone、android 和黑莓是主要的平台。他们都默认使用基于 webkit 的浏览器。

当时有一些原因，例如其他浏览器不支持 css 转换和图像遮罩。我想现在情况可能有所改善。

尺寸也是一个问题。为了支持更多的浏览器，需要更多的变通方法来增加框架的大小。

从商业角度来看，实际上并没有支持任何其他浏览器的需求。如果 ie10 在 Windows 8 中变得强大，他们可能会支持它，因为人们已经在他们的论坛上询问过它。

已经有人试图让它在 Firfox 上运行。这是[链接](https://github.com/martin1982/senchafox)。以下是论坛 [Post1](http://www.sencha.com/forum/showthread.php?149067-Sencha-touch-on-windows-phone-Mango&highlight=mozilla)、[Post2的一些帖子](http://www.sencha.com/forum/showthread.php?146925-Basic-Sencha-Touch-Mozilla&highlight=mozilla)

# eclipse - EGit 冲突解决 GUI？

> ID：12214434
> 
> 赞同：6
> 
> 时间：2012-08-31T11:30:33.547
> 
> 标签：eclipse, git, egit

我想我只是（来自 SVN 背景）对 Eclipse 中的 EGit 如何处理 Git 冲突感到困惑。

我知道它以正常标准方法以文本形式显示冲突，如此处所述：http: [//www.kernel.org/pub/software/scm/git/docs/git-merge.html#_how_conflicts_are_presented](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html#_how_conflicts_are_presented)但是它不是'不是很干净，并且有数千行代码，避免意外删除不应该删除的行变得难以管理。

EGit 中是否有任何 GUI 可以显示每个冲突与跨步能力？

我四处搜索并听说过，`merge tool`但是当我按照说明通过右键单击树的顶层节点（即右键单击具有表示冲突`models`的类型图标的文件夹`<>`，其中有一个冲突的文件`User.php`）时合并工具是灰色的。

我用`merge tool`错了吗？

## 编辑

我发现一个错误可能导致 EGit 合并工具不显示：[为什么在 Eclipse 中为 EGit 管理的项目禁用合并工具？](https://stackoverflow.com/questions/5934765/why-is-the-merge-tool-disabled-in-eclipse-for-a-egit-managed-project)但是我使用的是 EGit 1.3.0，所以我应该已经过了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:06:05.610

我已经在这里和 EGit 论坛上提出了这个问题两天：http: [//www.eclipse.org/forums/index.php/t/371459/](http://www.eclipse.org/forums/index.php/t/371459/)不幸的是（即使在每个人都看过之后）没有人有一个真正的答案所以我决定手动解决我的冲突并以这种方式合并。

实际上，这种方式比试图解决合并工具对我不起作用的原因更快更容易，具有讽刺意味的是。

# java - 在 OutOfMemoryError Linux 上自动重启 jar

> ID：12214444
> 
> 赞同：1
> 
> 时间：2012-08-31T11:31:04.327
> 
> 标签：java, linux, heap-memory

如何在 Linux 中自动重启可运行的 jar 文件。

我在一个单独的屏幕中在 linux VPS 中运行 jar，但由于 OUTOFMEMORYERROR Java 堆空间，它会在一段时间后停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:41:46.620

您是否尝试过为[jvm](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/jrdocs/refman/optionX.html)分配更多内存？如果问题仍然存在，那么您可以关联[关闭挂钩](http://blog.yohanliyanage.com/2010/10/know-the-jvm-2-shutdown-hooks/)，但没有保证它将始终执行。您可以从中调用其他进程，这将在一段时间后再次启动您的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:46:12.087

编写一个简单的启动器，它会在应用程序关闭后重新启动。像这样的东西：

```
#!/bin/sh

TEMPFILE=`mktemp`
while true ; do
  echo "`date` Starting application" >> $TEMPFILE
  java -XX:OnOutOfMemoryError="kill -9 %p" -jar application.jar
  sleep 5
done 
```

为了确保虚拟机正确完成，您可能需要在主循环周围考虑以下内容：

```
try {
    // main loop
    businessLogic();
} catch (OutOfMemoryError E) {
    System.exit(1);
} 
```

编辑：我个人成功地使用[Java Service Wrapper](http://wrapper.tanukisoftware.com)重新启动了一个不时失败的 apache tomcat，它在应用程序重新部署过多后遭受内存泄漏。你可能想看看它，它非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:55:10.487

试试这个：`-XX:OnOutOfMemoryError="<cmd args>; <cmd args>"` 编写一个shell脚本来“kill -TERM pid”，然后再次启动它并将脚本放入`cmd`命令行选项的一部分。差不多就是这样，但您需要知道进程的 pid（或依赖 killall 或 ps 等）

您还可以使用[monit](http://mmonit.com/monit/)定期检查应用程序是否正在运行。这些或多或少是标准解决方案。我自己使用监控守护程序在内存不足时通过电子邮件/短信通知，以便可以进行适当的检查以及是否存在要修复的泄漏。当你有几十 GB 的时候，直接转储堆很糟糕。

# jquery - Google Chart API - 设置仪表图表字体大小

> ID：12214446
> 
> 赞同：4
> 
> 时间：2012-08-31T11:31:07.227
> 
> 标签：jquery, html, svg, google-visualization

我希望能够设置由谷歌图表 api 创建的仪表图表的字体大小 - [https://google-developers.appspot.com/chart/interactive/docs/gallery/gauge](https://google-developers.appspot.com/chart/interactive/docs/gallery/gauge)

API 中似乎没有选项，所以我希望能够在绘制图表后操作 SVG。我认为这可能与 jQuery SVG 插件 - [http://keith-wood.name/svg.html](http://keith-wood.name/svg.html)

我对如何在绘制后使用插件来更新 SVG 有点困惑。使用萤火虫我知道绘制图表后 html 看起来像这样。

```
<iframe>
    <html>
        <head>...</head>
        <body>
            <div id="chartArea">
                <svg>
                    <g>
                       //a couple of circles
                       <text></text> //The first text element is the title
                       //the rest of the graph
                    </g>
                </svg>
            </div>
        </body>
    </html>
</iframe> 
```

我希望能够写出这样的东西：

```
$('#gaugeChartDiv #chartArea').svg('get').change('text:first', { 'font-size' : 8 } ); 
```

但它似乎不是那样工作的。任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-06T18:35:54.547

你可以通过 css 做到这一点：

```
svg:first-child > g > text[text-anchor~=middle]{
    font-size:9px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:50:49.463

好的，事实证明你可以在没有插件的情况下使用 jQuery 操作 SVG。问题是在 iframe 中选择元素。我可以使用以下代码更新字体大小。

```
$('#gaugeChartDiv iframe').each(function() {
    $('#chartArea svg text:first', this.contentWindow.document||this.contentDocument).attr('font-size', 8);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T20:22:47.580

```
 /* for gauge indicators text */
  .gauge svg g text {
    font-size: 18px;
  }
  /* for middle text */
  .gauge svg g g text {
    font-size: 24px;
  } 
```

# iphone - iOS将输出浮点参数传递给函数

> ID：12214450
> 
> 赞同：0
> 
> 时间：2012-08-31T11:31:15.357
> 
> 标签：iphone, ios, function, parameters

我正在尝试创建一个函数来计算一组数字的平均值、最大值、最小值和标准差。

我希望它像 UIColor 函数一样工作 - (void)getRed:green:blue:alpha。即，您传入四个浮点值，然后该函数将覆盖它们。

我正在努力为它找到正确的语法。

我的功能是...

```
- (void)calculateStatsAverage:(float)average
            standardDeviation:(float)standardDeviation
                      minimum:(float)minimum
                      maximum:(float)maximum
{
    //pseudo code
    average = total / count;
    minimum = min value;
    etc...
    //
} 
```

我遇到的问题是再次获取值。

如果我将函数更改为使用 float* （这是 UIColor 函数所做的），那么我的计算不喜欢分配变量。

为了简化...

想象一下这些功能。第一个是从其他地方调用的。

```
- (void)runThisFunction
{
    float someOutputValue = 0.0;

    [self changeTheValue:someOutputValue];

    NSLog(@"The value is %f", someOutputValue);
}

- (void)changeTheValue:(float)value
{
    value = 10.0;
} 
```

我希望这段代码输出“值为 10.0”；但目前我得到“值为0.0”。

请你告诉我如何编写这两个函数。从那里我将能够解决剩下的问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:37:35.753

```
- (void)passByRefMethod:(float *)ptr
{
    *ptr = MYVALUE;
} 
```

抱歉格式化，手机输入。希望这可以帮助！

这种技术通常称为按引用传递，它是 C 的一部分，因此您可以使用它来搜索更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:42:02.760

您的 NSLog 正在显示局部变量“someOutputValue”的值，该值已分配为 0.0。

您的“changeTheValue”方法无效。

以下代码可能会有所帮助，

```
- (void)runThisFunction
{
    float someOutputValue = 0.0;

    float resultOfCalc = [self calcTheValue:someOutputValue];

    NSLog(@"The value is %f", resultOfCalc);
}

- (float) changeTheValue:(float)value // note that this method returns a float
{
    float newValue;

    // do whatever calc is appropriate, e.g.

    newValue = value + 10.0;

    return newValue;  // pass back the result of calc
} 
```

这将输出，

```
The value is 10. 
```

# .net - 如何将 JSON 字符串转换为列表 ........在 Windows Phone 7 中？

> ID：12214451
> 
> 赞同：0
> 
> 时间：2012-08-31T11:31:16.473
> 
> 标签：.net, windows-phone-7, c#-4.0, windows-phone-7.1

我正在从我的 Web 服务获取数据到名为 PreGroup.cs 的文件中的 JSON 字符串中。

在该文件中，我有一个 Web 服务参考对象。

现在在 PreGroup.cs 文件中肯定还有一个方法，那就是：

```
public string LoadAllArticles()
{
    try
    {
        //articles_list = null;
        obj = new GBService.PreGroupbookSreviceSoapClient();
        obj.LoadAllArticlesCompleted += (obj_LoadAllArticlesCompleted);
        obj.LoadAllArticlesAsync();
        obj.CloseAsync();
    }
    catch (Exception)
    {
        throw;
    }
    //This is string which will be passed to the caller of this method.
    return articles_list;
} 
```

这是负载：

```
void obj_LoadAllArticlesCompleted(object sender, GBService.LoadAllArticlesCompletedEventArgs e)
{
    try
    {
        articles_list = e.Result.ToString();
    }
    catch (Exception Ex)
    {
        throw Ex;
    }
    MessageBox.Show("Welcome to Groupbook </br>" + AllArticleData);
    obj.LoadAllArticlesCompleted -= (obj_LoadAllArticlesCompleted);
} 
```

现在，当我在要加载所有文章的 Windows Phone 页面“Index.cs”中调用此方法时，我无法将该简单字符串转换回列表。

这是我的 Index.cs 类的代码，我尝试**了很多**方法来反序列化/解析/等，但我无法将该字符串转换为列表：

```
private void LoadArticles()
{
    obj = new PreGroupbook();
    string art=  obj.LoadAllArticles();
    // How to convert that string into  List<GB_articles> ?????? I have several ways
    MyArticles.ItemsSource = gb_li;
} 
```

这是我要反序列化的字符串：

```
[{
    "article_id": 1,
    "article_title": "This is Test Article",
    "created_timestamp": "\/Date(1346395093347)\/",
    "modified_timestamp": null,
    "article_category_id": 3,
    "privacy_id": 1,
    "subscribers_count": 51,
    "votes_down_count": 21,
    "article_tag": "My Best C++",
    "votes_up_count": 42,
    "isActive": true
}, {
    "article_id": 2,
    "article_title": "The flying Horse was seen",
    "created_timestamp": "\/Date(1346395104223)\/",
    "modified_timestamp": null,
    "article_category_id": 3,
    "privacy_id": 1,
    "subscribers_count": 51,
    "votes_down_count": 21,
    "article_tag": "My Best C++",
    "votes_up_count": 42,
    "isActive": true
}, {
    "article_id": 3,
    "article_title": "iWatch is just amazing",
    "created_timestamp": "\/Date(1346395105477)\/",
    "modified_timestamp": null,
    "article_category_id": 3,
    "privacy_id": 1,
    "subscribers_count": 51,
    "votes_down_count": 21,
    "article_tag": "My Best C++",
    "votes_up_count": 42,
    "isActive": true
}, {
    "article_id": 4,
    "article_title": "Oh My My....did you see that???",
    "created_timestamp": "\/Date(1346395107890)\/",
    "modified_timestamp": null,
    "article_category_id": 3,
    "privacy_id": 1,
    "subscribers_count": 51,
    "votes_down_count": 21,
    "article_tag": "My Best C++",
    "votes_up_count": 42,
    "isActive": true
}] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T06:55:33.323

首先，您将类从 json string.for 转换为简单地复制 jsonstring 并将其粘贴到 WWW.json2c#.com，您将获得类 .put 将该类放入您的项目中。然后使用以下命令对其进行反序列化：

```
 var editdata = JsonConvert.DeserializeObject<RootObject>(e.Result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:23:00.570

我已经测试了测试 Web 应用程序（在我的本地）中描述的实现，请在您的本地复制它。那时应该工作。

```
string testJson = "[{\"article_id\": 1,\"article_title\": \"This is Test Article\",\"created_timestamp\": \"\\/Date(1350738778146)\\/\",\"modified_timestamp\": \"\\/Date(1350738778146)\\/\",\"article_category_id\": 3,\"privacy_id\": 1,\"subscribers_count\": 51,\"votes_down_count\": 21,\"article_tag\": \"My Best C++\",\"votes_up_count\": 42,\"isActive\": true}]";
articles = new JavaScriptSerializer().Deserialize<List<Article>>(testJson);
gvArticles.DataSource = articles;
gvArticles.DataBind(); 
```

**文章类**

```
public class Article
{
    public int? article_id { get; set; }
    public string article_title { get; set; }
    public DateTime? created_timestamp { get; set; }
    public DateTime? modified_timestamp { get; set; }
    public int? article_category_id { get; set; }
    public int? privacy_id { get; set; }
    public int? subscribers_count { get; set; }
    public int? votes_down_count { get; set; }
    public string article_tag { get; set; }
    public int? votes_up_count { get; set; }
    public bool? isActive { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:17:09.377

```
var articles  = new JavaScriptSerializer().Deserialize<List<Article>>(jsonstr);

public class Article
{
    public string article_id;
    public DateTime created_timestamp;
    public int votes_up_count;
    //other fields.........
} 
```

**编辑**

对于 WP7 使用[Json.Net](http://json.codeplex.com/)

```
var articles = JsonConvert.DeserializeObject<List<Article>>(jsonstr); 
```

# android - android:如何保存sdk平台

> ID：12214452
> 
> 赞同：0
> 
> 时间：2012-08-31T11:31:19.963
> 
> 标签：android

我想将所有已安装的 sdk 平台/文档等保存在存储中以供以后使用，以便以后安装 SDK 后不必再次下载它们。如何保留这些文件以及以后如何在 SDK 管理器中恢复它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:39:39.493

只需使用提供的 SDK 管理器安装您想要的任何 SDK，即使您不使用它也不要删除它们。除非您明确清除文件，否则这些不会自行消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:46:51.693

SDK 平台、工具、文档和所有其他内容都存储在您的 SDK 文件夹中。如果您不知道 SDK 文件夹的位置，请从 Eclipse 中检查：Window > Pereferences > Android tab

# android - 如何在 Android 的音频中添加文本标签

> ID：12214462
> 
> 赞同：0
> 
> 时间：2012-08-31T11:31:58.437
> 
> 标签：android, tags, audio-recording

我想构建一个记录音频的应用程序，用户应该可以选择在音频中插入（添加）一些基于文本的标签。例如，用户正在开会或上课并记录那里正在讨论的任何内容，有时他/她在该主题中发现了一些重要点并添加了基于文本的标签（一条消息）以供以后记住。

当他/她稍后播放该音频时，他/她可以查看所有添加的标签，并可以通过单击特定标签的文本直接转到该点（他/她已标记），音频应该开始播放（或者应该移动搜索栏）在那个特定时间。
通过这种方式，用户可以根据需要添加任意数量的标签，并且可以在特定时间（放置在搜索栏上）直接（并收听）音频。

我不知道这是否可能。所以任何人都可以告诉它是否可能。如果是，那我该怎么做。如果这是一个愚蠢的问题，请原谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:15:22.657

这是我的想法：

*   使用列recordingName、recordingTag 和tagBeginning 创建一个数据库
*   当用户创建新标签时，您会记住从录制开始经过的时间
*   录制完成后，将标签和时间放入数据库中（您将拥有更多具有相同录制名称的行）
*   当您想播放文件时，请使用您的录音名称查询您的数据库；你会得到你的标签和他们的开始时间
*   使用开始时间来知道从哪里开始播放某些录音

# android - 如何在 Android 上获取 OAuth 2.0 的签名证书指纹 (SHA1)？

> ID：12214467
> 
> 赞同：158
> 
> 时间：2012-08-31T11:32:08.073
> 
> 标签：android, oauth-2.0

我正在尝试按照 [https://developers.google.com/console/help/#installed_applications](https://developers.google.com/console/help/#installed_applications)中的步骤注册我的 android 应用程序，这导致我遵循 [http://developer.android.com/tools/publishing/app-签名.html](http://developer.android.com/tools/publishing/app-signing.html)。

但是，我不确定如何获取签名证书指纹 (SHA1)。

我首先使用 Eclipse ADT 插件来导出和创建密钥库/密钥。然后，我尝试这样做`keytool -list keystore mykeystore.keystore`，它给了我一个 MD5 证书指纹。我是否需要重做签名（意味着我不能使用 eclipse 导出向导）？

我可以先使用调试证书吗？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-07-08T07:57:26.527

启动导出过程，为您的应用创建 apk 并使用您的生产密钥。最后一页显示您的 SHA1 和 MD5 证书指纹![在此处输入图像描述](../Images/c71eee7b382635cbaa2450e495eb8f2b.png)

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2013-09-20T17:04:47.213

我知道这个问题已经得到解答，但这就是我找到默认密钥库签名的方式。在 Eclipse 中，如果您转到 Windows -> Preferences -> Android -> Build

![在此处输入图像描述](../Images/2d654eaa6535d7733f0b991f0f012939.png)

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2014-03-26T07:12:06.527

我认为这将完美地工作。我用了同样的：

对于 Android 工作室：

1.  点击**Build** > **Generate Signed APK**。
2.  您将收到一个消息框，只需单击确定。
3.  现在将有另一个窗口，只需复制**Key Store Path**。
4.  现在打开命令提示符并转到**C:\Program Files\Java\jdk1.6.0_39\bin>**（或任何已安装的 jdk 版本）。
5.  键入**keytool -list -v -keystore**然后粘贴您的**密钥存储路径** （例如 C:\Program Files\Java\jdk1.6.0_39\bin>keytool -list -v -keystore "E:\My Projects \Android\android工作室\签名的 apks\Hello World\HelloWorld.jks")。
6.  现在它将询问**Key Store Password**，提供您的密码并按下`Enter`以获取您的 SHA1 和 MD5 证书密钥。

* * *

## 回答 #4

> 赞同：77
> 
> 时间：2014-02-06T07:03:29.903

如果您使用的是 Mac 甚至 Linux，只需将其复制并粘贴到**终端**应用程序中，您将立即获得 SHA1 密钥。无需更改任何内容。

```
 keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

示例输出：

```
Alias name: androiddebugkey
Creation date: 17 Feb 12
Entry type: PrivateKeyEntry
Certificate chain length: 1
Certificate[1]:
Owner: CN=Android Debug, O=Android, C=US
Issuer: CN=Android Debug, O=Android, C=US
Serial number: 4f3dfc69
Valid from: Fri Feb 17 15:06:17 SGT 2012 until: Sun Feb 09 15:06:17 SGT 2042
Certificate fingerprints:
     MD5:  11:10:11:11:11:11:11:11:11:11:11:11:11:11:11:11
     SHA1: 11:11:11:11:11:11:11:11:11:11:11:11:11:11:11:11:11:11:01:11
     Signature algorithm name: SHA1withRSA
     Version: 3 
```

* * *

## 回答 #5

> 赞同：68
> 
> 时间：2013-02-22T19:26:15.683

在命令行中使用它

```
c:\Program Files\Java\jdk1.6.25\bin>keytool -list -v -keystore c:\you_key_here.key 
```

* * *

## 回答 #6

> 赞同：60
> 
> 时间：2013-04-11T10:31:50.237

打开终端（在**Unix**中，在**MAC**中），（`cmd`在**Windows**中）和`cd`这个（你的 java）路径：

```
C:\Program Files\Java\jdk1.6.0_43\bin> 
```

运行此命令：

```
keytool -list -v -keystore C:\Users\leon\.android\debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

只需更改路径`debug.keystore`，您将获得 MD5 和 SHA-1 指纹。

* * *

## 回答 #7

> 赞同：41
> 
> 时间：2013-06-17T04:22:56.760

```
keytool -list -v -keystore "keyStoreName" 
```

Run this command from the directory where the keystore of your app exists.

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2016-08-14T06:48:13.423

在 Android Studio 中，按照以下步骤操作：

1.  单击 android studio IDE 右侧的 Gradle 属性菜单。
2.  展开任务树。
3.  点击signingReport你可以在底部控制台看到你的SHA1

[![在此处输入图像描述](../Images/7e2e2cee8d714dfff16511d1a3831855.png)](https://i.stack.imgur.com/J8XUD.jpg)

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2012-08-31T11:59:07.430

看看你是否想`Google Map`在那个时候使用你需要`MD5`指纹来生成`api kay`在你的 android 应用程序中使用谷歌地图。

如果您使用Keytool 命令生成`MD5`指纹，如果您使用`JDK 1.6`它会生成`SHA1`指纹`JDK 1.7`。

所以问题是，如果您想签署您的应用程序以进行发布，请阅读[此](http://developer.android.com/tools/publishing/app-signing.html)内容。

如果你想使用`google-map`阅读[这个](http://mobiforge.com/developing/story/using-google-maps-android)。

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2013-12-29T03:25:58.380

如果您使用的是 IntelliJ（12+？），请转到菜单**Build/Generate signed Api**

填写弹窗后，获取**“key store path”**字段中的数据（例如C:\Users\user\Documents\store\store）

并在命令行中运行：

```
>keytool -list -v -keystore "C:\Users\user\Documents\store\store"

....
         MD5: 11:C5:09:73:50:A4:E5:71:A2:26:13:E0:7B:CD:DD:6B
    -->  SHA1: 07:0B:0E:E8:F7:22:59:72:6A:1C:68:05:05:CF:2E:6F:59:43:48:99
         SHA256: E6:CE:DA:37:C1:18:43:C1:A3:F0:9E:8F:1A:C2:69:AF:E6:41:F7:C0:18:
1D:1D:55:5D:F0:52:6C:EE:77:84:A7
... 
```

祝你好运

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2014-10-30T11:44:01.470

如果有人使用 Android Studio...

点击：Build > Generate Signed in APK 创建一个新密钥：这将生成“.jks”文件

使用以下命令读取数据（SHA1 和其他信息）：

$ keytool -list -v -keystore 文件名.jks

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-03-23T02:34:09.053

对于使用 OpenSSL 的用户，您可以通过以下方式检索 SHA1 指纹：

```
OpenSSL> dgst -sha1 my-release-key.keystore 
```

这将导致以下输出：

![在此处输入图像描述](../Images/0df81a858dd1f06eb719211fca440fcf.png)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2017-04-24T12:40:12.333

这是我的简单解决方案：

点击`Gradle`按钮，您可以在右侧顶部找到。你会看到所有的 gradle 文件。现在转到android，双击signingReport。gradle 构建完成后，您会看到 SHA 密钥。检查下面的图像以获取分步指南。

单击 Gradle 后，请检查以下图像。希望这可以帮助某人。

**步骤1：**

![图片第一步](../Images/b9582a17865ca465e835d97d1203f2e5.png)

**第2步：**

![图片第二步](../Images/a2b4b04fba1f7435a26a6025ec38dc41.png)

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-03-13T09:30:05.260

我第一次很困惑，但我建议你**为 Windows 提供****最终的工作解决方案：**

 **1）打开 cmd 并转到您的 Java/jdk/bin 目录（只需按一下`cd ..`即可返回一个文件夹并`cd NAME_FOLDER`向前一个文件夹），在我的情况下，最终文件夹：`C:\Program Files\Java\jdk1.8.0_73\bin>` [![在此处输入图像描述](../Images/0f217a8d6a31f20b81e665a3b5b78b09.png)](https://i.stack.imgur.com/dB6la.jpg)

2）现在输入这个命令`keytool -list -v -keystore C:\Users\YOUR_WINDOWS_USER\.android\debug.keystore -alias androiddebugkey -storepass android -keypass android`

结果你必须得到这样的东西： [![在此处输入图像描述](../Images/7c4390d809666430810b746bcfeaf366.png)](https://i.stack.imgur.com/NdpF6.jpg)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2013-12-18T07:13:32.550

试试这个：Windows----preferences----Android--build---sh1 code copy from here

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2015-06-27T20:35:24.660

如果您使用的是 Android Studio。您可以通过**Gradle Tasks快速获取****SHA1 证书**指纹（调试、发布...**所有构建类型**！！）：

 **> 签约报告

SHA1 显示在**消息日志中**

Android 插件（在 gradle 应用程序中配置）默认创建一个调试模式。

> com.android.application

到密钥库的文件路径：

HOME/.android/debug.keystore

我建议**将**debug.keystore 附加到 build.gradle。为此，将文件 debug.keystore 放入 app 文件夹，然后在 gradle app 中添加 SigningConfigs：

```
apply plugin: 'com.android.application'

    android {
        ................
        signingConfigs {
            debug {
                storeFile file("../app/debug.keystore")
                storePassword "android"
                keyAlias "androiddebugkey"
                keyPassword "android"
            }
            release {
                storeFile file("../app/debug.keystore")
                storePassword "android"
                keyAlias "androiddebugkey"
                keyPassword "android"
            }
        }    
        ........
    } 
```

额外：如果要创建发布，请将文件 release.keystore 放入应用文件夹。（此示例使用相同的 debug.keystore）

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-09-14T06:42:51.690

如果您使用的是 Android Studio。您不需要使用 cmd 提示符生成 SHA1 指纹。您只需要使用 Android Studio 的默认 Maps Activity 创建一个项目。在该项目中，您可以在 Values 文件夹下的 google_maps_api.xml 中获取指纹。希望这会帮助你。:)

[![在此处输入图像描述](../Images/e6a4b0de391a0ed4f98e891d7e991ac6.png)](https://i.stack.imgur.com/TbAPS.png)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2017-02-22T04:30:33.973

我认为这将完美地工作。我用了同样的：

对于 Android 工作室：

单击构建 > 生成签名的 APK。您将收到一个消息框，只需单击确定。

现在将有另一个窗口，只需复制密钥存储路径。

现在打开命令提示符并转到 C:\Program Files\Java\jdk1.6.0_39\bin>（或任何已安装的 jdk 版本）。

键入 keytool -list -v -keystore 然后粘贴您的密钥存储路径（例如 C:\Program Files\Java\jdk1.6.0_39\bin>keytool -list -v -keystore "E:\My Projects \Android\android工作室\签名的 apks\Hello World\HelloWorld.jks")。

现在它将询问密钥存储密码，提供您的密码并按 Enter 以获取您的 SHA1 和 MD5 证书密钥。

现在将此 SHA1 密钥添加到凭据选项卡中的谷歌开发人员控制台，并将 android studio 中的构建变体更改为发布模式。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-07-13T14:23:33.933

请从菜单右侧单击 Gradle 然后单击 :app 然后单击 android 文件夹然后 SigningReport 文件名存在那里双击它。它将开始执行，过一会儿它会显示 SHA-1 代码 只需复制代码即可。并将其粘贴到您需要的地方

[![图像中突出显示的签名报告](../Images/ea385fa963665bd8bc098cab48cee7d0.png)](https://i.stack.imgur.com/h6krV.png)

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2014-02-06T20:38:54.863

对于那些在 mac 上寻找 keytool 的人。按着这些次序：

首先确保安装 Java JDK [http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jdk.html](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jdk.html)

然后在命令提示符中输入：

`/usr/libexec/java_home -v 1.7`

它会吐出类似的东西：

```
/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home 
```

keytool 与`javac`. IE：

```
/Library/Java/JavaVirtualMachines/jdk1.7.0_51.jdk/Contents/Home/bin 
```

从 bin 目录中，您可以使用 keytool。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-02-23T13:24:57.927

如果要从签名 keystore.jks 文件中获取指纹 sha1 密钥 从终端运行以下命令：

```
keytool -list -v -keystore <.../path/keystore.jks> 
```

例子

```
keytool -list -v -keystore /Users/Home/Projects/Keystore/myApp_keystore.jks
Enter keystore password: 

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

Alias name:myApp_alias
Owner: CN=xxx, OU=xxx Dev, O=ZZZ, L=Dhaka, ST=Dhaka, C=BD
..........

Certificate fingerprints:
MD5:  12:10:11:12:11:11:11:11:11:11:33:11:11:11:11:11
SHA1: 11:44:11:11:55:11:17:11:11:66:11:11:88:11:11:77:11:11:01:11
..................... 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2018-04-18T09:29:18.903

如果您使用的是 Mac/Linux，那么您可以通过在终端中写入以下行来获取 SHA1 指纹：

```
keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android 
```

在此之后有两件事可能

1.  它会要求你输入密码

    只需键入

> 安卓

然后按回车，您可以在如下所示的输出中找到 SHA1 密钥。

2.  它会要求您下载合适的程序（并且会给出一些列表）

    只需在终端中输入以下内容

> sudo apt install openjdk-8-jre-headless

然后再次在终端中运行以下命令：`keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android`

这一次，您将被引导至第 1 步，您只需输入密码即可

> 安卓

您将在输出下方获得您的 SHA1 指纹。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2019-11-15T18:38:41.607

1.  打开你的命令提示符
2.  将工作目录导航到 1.8.0/bin
3.  粘贴`keytool -list -v -alias androiddebugkey -keystore %USERPROFILE%\.android\debug.keystore`
4.  如果它要求您输入密码，请按 Enter

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-06-20T16:09:19.663

我想向与我有同样问题的人发布通知。我完成了生成调试 SHA-1 和发布 SHA-1 的步骤。我试图将 Google Sign-In API 与我的应用程序连接起来。

我遇到了调试 .apk 可以正常工作的问题，它可以通过 Google 登录进行连接和身份验证。当手动安装到手机上时，我的版本 .apk 也可以使用。当我将发布的 .apk 发布到 Google Play 商店时，我的 google 登录无法通过身份验证，我会遇到问题！

很长一段时间我都想不通，但我发现我的应用程序正在被谷歌签名，即开发者控制台顶部的消息显示：**Google Play App Signing is enabled for this app。**

我去了我的发布管理选项卡，然后向下滚动到应用签名，并在那里找到了 SHA-1。在将其添加到我的代码和我用作 Google 登录后端的“firebase 控制台”上后，一切似乎都正常。看起来我的发布密钥库已被谷歌签名证书取代......我不确定这是否正在发生，但它解决了我的问题并允许我的 Google Play 商店发布 apk 正确地通过谷歌签名进行身份验证在！

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-03-19T20:01:46.137

使用[门禁](http://portecle.sourceforge.net/)：

*   文件 > 打开密钥库文件
*   输入密钥库密码
*   右键单击别名 > 证书详细信息 > SHA-1 指纹

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-08-04T14:23:04.130

在最新版本的 Android Studio 中，获取 SHA-1 密钥的最佳方法是表单终端。[![Android Studio 北极狐](../Images/7477056089eed5ea95e4965b3e03d9f1.png)](https://i.stack.imgur.com/3WVSw.png),

1.  在 Android Studio 中打开终端
2.  复制命令（keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android）
3.  将其粘贴到终端并按回车键

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-08-24T07:37:44.000

逐步解决方案：

1.  打开命令提示符或 Mac 终端
2.  将目录更改为 keytool 文件位置的目录。使用命令更改目录`cd <directory path>`。（注意：如果任何目录名称有空格，则`\`在两个单词之间添加。示例`cd /Applications/Android\ Studio.app//Contents/jre/jdk/Contents/Home/bin/`）

    *   要找到你的 keytool 的位置，你去 android studio..打开你的项目。去

    *   文件>项目结构> SDK位置..并找到JDK位置。

3.  通过以下命令运行 keytool：（ `keytool -list -v –keystore <your jks file path>`注意：如果任何目录名称有空格，则在两个单词之间添加 \。示例 `keytool -list -v -keystore /Users/username/Desktop/tasmiah\ mobile/v3/jordanos.jks`）

4.  命令提示您输入密码..所以输入您的密码..然后你得到结果

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-11-06T14:41:01.640

这是懒惰编码人员的工具：

1 添加依赖：

```
compile 'com.vk:androidsdk:1.6.9' 
```

2 在您的活动/应用程序的某处添加以下行：

```
String[] fingerprints = VKUtil.getCertificateFingerprint(this, getPackageName()); 
Log.d("SHA1", fingerprints[0]); 
```

3 打开 logcat 并捕获消息。

4 利润！

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-11-16T06:24:32.560

获取用于发布和调试模式 android studio gradle 的 SHA-1 的最简单方法。[检查这个](https://stackoverflow.com/questions/15727912/sha-1-fingerprint-of-keystore-certificate/35308827#35308827)****

# php - 按属性集的库存库存

> ID：12214470
> 
> 赞同：0
> 
> 时间：2012-08-31T11:32:14.427
> 
> 标签：php, mysql

我在存储每个属性集的数据时遇到问题，我使用的是 eav 模型，下面是我的数据库结构

```
products
--------
id
name

product_attributes
----------
id
name

product_attribute_values
------------------
id
product_id
attribute_id
value 
```

现在我的问题是如何存储每个属性集的数据，例如：

我卖 T 恤，T 恤的大小和颜色各不相同。

T 恤有 2 种颜色（白色和黑色）和 3 种尺寸（s、m、l）

我应该如何存储这样的集合数据..

```
white,s = 10unit
white,m = 2unit
white,l = 5unit
black,s = 10unit
black,m = 2unit
black,l = 5unit 
```

Ant它不仅用于T恤，还可以用于其他产品，例如只有一个属性（尺寸）的鞋子

非常感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:47:06.720

```
**Products**
id name
1  t-shirt

**product_attributes**
id product_id  name values
1 1 size l
2 1 size m
3 1 size s
4 1 color white
5 1 color black

**Stock**
stock_id, Product_id Product_Attr_id1 Product_Attr_id2 Product_Attr_id3 Product_Attr_id4 Product_Attr_id5 Quantity

 1 1 4 3 10
 2 1 4 2 2
 3 1 4 1 5   
 4 1 5 3 10
 5 1 5 2 2
 6 1 5 1 5 

**product_attribute_values**
id product_id attribute_id value
1 1 1 s
2 1 1 m
3 1 1 l
4 1 2 white
5 1 2 black 
```

# iis-7 - 同一个IP的443端口中的多个域

> ID：12214475
> 
> 赞同：25
> 
> 时间：2012-08-31T11:32:36.457
> 
> 标签：iis-7, https, multiple-domains

我在 IIS 7 的端口 443(https) 中托管了一个网站“www.example1.com”。现在我为相同 IP 的“www.example2.com”购买了一个新域。我想在端口 443 中托管此域（[www.example2.com](http://www.example2.com)）中的另一个网站（我已经将端口 443 用于“www.example1.com”）。

我怎样才能做到这一点？这是否可以在同一 IP 的端口 443 中托管两个域？如果是，任何人都可以让我知道正确的方法吗？我正在使用 IIS 7。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-10-07T02:08:39.593

可以办到。

IIS 7 中的 SSL 主机标头允许您为同一 IP 地址上的多个 IIS 网站使用一个 SSL 证书。通过 IIS 管理器界面，IIS 只允许您使用 SSL 证书将每个 IP 地址上的一个站点绑定到端口 443。如果您尝试将 IP 地址上的第二个站点绑定到同一个证书，则 IIS 7 在启动该站点时会给您一个错误，指出存在端口冲突。为了在同一 IP 地址上分配多个 IIS 站点使用的证书，您需要按照以下说明设置 SSL 主机标头。

您需要什么类型的 SSL 证书？因为您只能使用一个证书，所以该证书需要与您使用它的网站的所有主机名一起使用（否则您将收到名称不匹配错误）。例如，如果您的每个 IIS 7 网站都使用单个通用域名的子域（如下例所示），您可以获得 *.mydomain.com 的通配符证书，它将保护 site1.mydomain.com、site2 .mydomain.com 等

另一方面，如果您的 IIS 7 站点都使用不同的域名（mail.mydomain1.com、mail.mydomain2.com 等），您将需要获得统一通信证书（也称为 SAN 证书）。

在 IIS 7 上设置 SSL 主机标头 获取 SSL 证书并将其安装到 IIS 7 中。有关如何执行此操作的分步说明，请参阅在 Windows Server 2008 (IIS 7.0) 中安装 SSL 证书。将证书安装到 IIS 后，将其绑定到 IP 地址上的第一个站点。通过单击开始菜单并键入“cmd”并按回车键打开命令提示符。通过在命令行上键入“cd C:\Windows\System32\Inetsrv\”导航到 C:\Windows\System32\Inetsrv\。在 Inetsrv 文件夹中，为需要使用证书的 IP 地址上的每个其他网站运行以下命令（复制这两行）：

```
appcmd set site /site.name:"<IISSiteName>" /+bindings.[protocol='https',bindingInformation='*:443:<hostHeaderValue>']

 Replace <IISSiteName>  with the name of the IIS site and <hostHeaderValue> with the host header for that site (site1.mydomain.com) 
```

在浏览器中测试每个网站。它应该显示正确的页面并显示锁定图标而没有任何错误。如果它显示第一个 IIS 站点的网页，则 ​​SSL 主机头设置不正确。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-02-27T08:09:18.917

在 iis 7.5 或更新版本中 - 站点 > 添加网站 - 站点名称：example2.com - 物理路径：选择目录 - 绑定：与 example.com 相同的 ip - 主机名：example2.com 然后在绑定中检查这两个网站

[![在此处输入图像描述](../Images/cc7de0867597c930e2e07ca0f940d99e.png)](https://i.stack.imgur.com/1xF00.jpg)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-02-20T22:38:06.903

您不能在 IIS7 中 - 每个 HTTPS 绑定都需要唯一的 IP/端口组合，因为主机标头不能用于区分使用 SSL 的站点。这是因为在 SSL 握手期间主机标头不可见。

您的解决方法是通过绑定到不同的外部 IP 或绑定到 443 以外的端口来区分站点。我知道这两个选项都不理想。

有一个很棒的[MSDN 博客](http://blogs.msdn.com/b/varunm/archive/2013/06/18/bind-multiple-sites-on-same-ip-address-and-port-in-ssl.aspx)。

幸运的是，IIS8 似乎有一个[服务器名称指示 (SNI)](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-server-name-indication-sni-ssl-scalability)形式的解决方案。

有趣的是，这不是 IIS 的怪癖，[Apache 也有同样的问题](http://httpd.apache.org/docs/2.2/ssl/ssl_faq.html#vhosts2)，就像在引入 SNI 之前的任何 Web 服务器一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T11:37:53.377

We also host multiple sites in port 443 but we need UNIQUE IP addresses for each site. You cannot bind multiple sites to port 443 using only one IP address. Unless there is a work-around, but I'm not aware of any.

This article may help: [http://www.harbar.net/articles/ssl.aspx](http://www.harbar.net/articles/ssl.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-28T23:36:42.733

我目前使用 IIS 6.0。我设法使用端口 443 和不同的证书设置了多个网站。

从 IIS 管理器中，转到网站并编辑站点绑定。只需确保勾选 Require Server Name Indication 框并将 IP 地址保留为 All Unassigned。现在，通过从证书下拉列表中为站点选择适当的证书，您可以为多个站点使用相同的端口 (443)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-10T04:01:36.897

如果您使用通配符证书，只需在友好名称中使用格式 *.domainname.com，IIS GUI 将在您编辑绑定时为您启用主机名控制。

![一张图告诉...](../Images/aa2a5358220dd3a88c5543583787dedf.png)

[资源](http://blog.angelwebdesigns.com.au/setting-up-a-wildcard-certificate-for-multiple-sites-in-iis-7/)

# python - 如何在linux上通过python代码进入文件夹

> ID：12214482
> 
> 赞同：1
> 
> 时间：2012-08-31T11:32:49.897
> 
> 标签：python, operating-system, scrapy

我正在研究python（scrapy），我正在尝试使用os模块进入文件夹但无法做到，下面是我尝试过的

```
import os

scrapepath = "cd /home/local/username/project/scrapy/modulename"

os.system(scrapecmd) 
```

**结果：**

```
0 
```

最后，我的意图是通过上面提到的python代码从某个地方（例如linux中的家）进入一个文件夹（目的地）。这里实际上我正在动态生成上面路径的一部分，之后我应该进入该路径并从该文件夹中运行一些命令

任何人都可以让我知道如何使用上面的linux中的python代码进入文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:34:43.663

使用[`os.chdir`](http://docs.python.org/library/os.html#os.chdir)：

```
import os

os.chdir("/home/local/username/project/scrapy/modulename") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T11:35:34.100

要更改当前工作目录：

```
os.chdir("/home/local/username/project/scrapy/modulename") 
```

您可能还想简单地将该模块添加到 python 的路径（这是`import`看起来的地方）：

```
sys.path.append("/home/local/username/project/scrapy/modulename") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:36:31.963

AFAIK， os.system() 在子shell中执行字符串命令。因此，当您执行以下操作时：

```
os.system("cd /path/to/directory/") 
```

该`cd`命令实际上将在子shell中执行。`os.system`但是，由于子shell 在执行后退出，您`cd`对您的应用程序没有实际影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T11:35:01.440

见[http://docs.python.org/library/os.html](http://docs.python.org/library/os.html)

```
import os
os.chdir(path) 
```

# android - 在不使用 XML 文件的情况下设置 android 活动的背景

> ID：12214485
> 
> 赞同：0
> 
> 时间：2012-08-31T11:32:58.720
> 
> 标签：android, android-layout, background

我想开发一个应用程序，我想在其中设置我的可绘制文件夹中的背景图像。我希望当我的活动运行时，背景将是该图像。而且也不使用 XML。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:39:56.217

没有 XML 文件，

创建一个`ImageView`并为其设置drawable。现在使用`setContentView(View view)`活动..

简单的...

动态地，

//仅伪代码..以您的方式实现..

```
OnCreate()
{
 ImageView imageView = new ImageView(this);
 imageView.setImageResource(R.drawable.android);
 setContentView(imageView);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:35:59.900

尝试`setBackgroundDrawable(R.drawable.yourImage)`为您的布局使用方法。假设您的主要布局是`LinearLayout`

```
 LinearLayout ll = (LinearLayout) findViewById(R.id.lineaLayout);
  ll.setBackgroundDrawable(R.drawable.yourImage); // like this you can set image for your layout 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-18T05:56:25.717

另一个简单的解决方案..

在 Activity 的 onCreate() 方法中使用它。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setBackgroundDrawableResource(R.drawable.background);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:35:17.713

获取使用的根布局的句柄，然后在其上设置背景颜色或可绘制对象。根布局是您调用 setContentView 的任何内容。设置内容视图（R.layout.main）；

```
// Now get a handle to any View contained  
// within the main layout you are using 
View someView = findViewById(R.id.randomViewInMainLayout); 

// Find the root view 
View root = someView.getRootView() 

// Set the color 
root.setBackgroundColor(android.R.color.red); 
```

# android - 在 Android 上使用远程视图自定义通知

> ID：12214487
> 
> 赞同：6
> 
> 时间：2012-08-31T11:33:05.350
> 
> 标签：android, android-layout, android-widget

我已经使用 setOnClick 挂起意图编辑了代码，并且此代码适用于 ImageView 和我想要的通知文本分开，但我仍然需要一些帮助。

我想从我的服务类暂停或播放媒体播放器，那么如何从通知待处理意图访问服务的停止或播放方法？

有人说广播接收器会帮助你，但我不知道它是如何工作的。我已经设法从通知的暂停按钮打开了一个网络浏览器，但我不知道如何访问服务方法。如果您有任何示例代码，请分享。

```
@SuppressWarnings("deprecation")
void showNotification() {
     int pendingRequestCode = 0;
        int pendingFlag = 0;

        final Resources res = getResources();
        final NotificationManager notificationManager = (NotificationManager) getSystemService(
                NOTIFICATION_SERVICE);
        Intent intent = new Intent(this,MainActivity.class);
        PendingIntent pi= PendingIntent.getActivity(this, 0, intent, 0);
        Notification.Builder builder = new Notification.Builder(this)
                .setSmallIcon(R.drawable.ic_action_search)
                .setAutoCancel(true)
                .setTicker("this is notification")
                .setContentIntent(pi);

        // Sets a custom content view for the notification, including an image button.
        RemoteViews layout = new RemoteViews(getPackageName(), R.layout.notification);
        layout.setTextViewText(R.id.notification_title, getString(R.string.app_name));
        Intent clickIntent = new Intent(Intent.ACTION_VIEW, Uri_myBlog);
        PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(),pendingRequestCode,  clickIntent, pendingFlag);
        layout.setOnClickPendingIntent(R.id.notification_button,pendingIntent);
        builder.setContent(layout);

        // Notifications in Android 3.0 now have a standard mechanism for displaying large
        // bitmaps such as contact avatars. Here, we load an example image and resize it to the
        // appropriate size for large bitmaps in notifications.
        Bitmap largeIconTemp = BitmapFactory.decodeResource(res,
                R.drawable.pause);
        Bitmap largeIcon = Bitmap.createScaledBitmap(
                largeIconTemp,
                res.getDimensionPixelSize(android.R.dimen.notification_large_icon_width),
                res.getDimensionPixelSize(android.R.dimen.notification_large_icon_height),
                false);
        largeIconTemp.recycle();

        builder.setLargeIcon(largeIcon);

        notificationManager.notify(NOTIFICATION_DEFAULT, builder.getNotification());
    }

    PendingIntent getDialogPendingIntent(String dialogText) {
        return PendingIntent.getActivity(
                this,
                dialogText.hashCode(), // Otherwise previous PendingIntents with the same
                                       // requestCode may be overwritten.
                new Intent(ACTION_DIALOG)
                        .putExtra(Intent.EXTRA_TEXT, dialogText)
                        .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK),
                0);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:37:02.943

[您没有说明您的目标是什么版本的 Android，但通常在Android 3.x](http://en.wikipedia.org/wiki/Android_version_history#Android_3.0_Honeycomb_.28API_level_11.29) (Honeycomb)之前是不可能的。因此，如果您希望在 2.x 上发生这种情况，那么对不起-您不走运。

对于 Honeycomb，您只需提供自定义布局并分配`PendingIntent`给您需要的每个按钮，通过调用`setOnClickPendingIntent()`. 如果您下载了 SDK 的示例，请查看 HoneycombGallery 应用程序的 MainActivity（应位于您的`<SDK>\samples\android-XX\HoneycombGallery\`文件夹中。XX 是 14 或更高版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:05:05.210

[使用 Messenger http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)检查绑定服务

你也可以检查这个问题 [Binding to a local Service from a BroadcastReceiver](https://stackoverflow.com/questions/3715909/binding-to-a-local-service-from-a-broadcastreceiver)

# asp.net-mvc-3 - 如何根据 mvc3 中的索引值删除先前选择的文件？

> ID：12214492
> 
> 赞同：0
> 
> 时间：2012-08-31T11:33:23.010
> 
> 标签：asp.net-mvc-3, file-upload

大家好，我正在研究 mvc3

在这里我需要从会话数据中删除以前上传的文件

anh我在插入数据库之前显示文件所以我在会话中显示数据现在我需要删除以前选择的文件请帮助如何获取选定的文件索引值以从会话中删除文件

例如在这里检查这篇文章它是在c＃中，但我需要这是在mvc3中请帮助我完成这项工作请帮助我任何人

我的模型在这里

```
 using System;
  using System.Collections.Generic;
   using System.Linq;
  using System.Web;
   using System.ComponentModel.DataAnnotations;

   namespace BugTracker.Models
 {
public class BugModel
{

    public BugModel()
    {
        if (ListFile == null)
            ListFile = new List<BugAttachment>();
    }
    public List<BugAttachment> ListFile { get; set; }

    public string ErrorMessage { get; set; }
}

public class BugAttachment
{
    public string FileName { get; set; }
    public int BugAttachmentID { get; set; }
    public string AttachmentName { get; set; }
    public int BugID { get; set; }
    public string AttachmentUrl { get; set; }
    public string AttachedBy { get; set; }
} 
```

}

这是我的控制器

```
 public ActionResult UploadFile(string AttachmentName, BugModel model)
        BugModel bug = null;
        if (Session["CaptureData"] == null)
        {
            bug = model;
        }
        else
        {

            bug = (BugModel)Session["CaptureData"];
        }
        foreach (string inputTagName in Request.Files)
        {
            HttpPostedFileBase file1 = Request.Files[inputTagName];
            if (file1.ContentLength > 0)
            {
                BugAttachment attachment = new BugAttachment();
                var allowedExtensions = new[] { ".doc", ".xlsx", ".txt", ".jpeg", ".docx" };
                var extension = Path.GetExtension(file1.FileName);
                if (!allowedExtensions.Contains(extension))
                {
                    model.ErrorMessage = "{ .doc, .xlsx, .txt, .jpeg }, files are allowed.... ";
                }
                else
                {
                    string filename = Guid.NewGuid() + Path.GetFileName(file1.FileName);
                    string path = "/Content/UploadedFiles/" + filename;
                    string savedFileName = Path.Combine(Server.MapPath("~" + path));
                    file1.SaveAs(savedFileName);
                    attachment.FileName = "~" + path.ToString();
                    attachment.AttachmentName = AttachmentName;
                    attachment.AttachmentUrl = attachment.FileName;
                    bug.ListFile.Add(attachment);
                    model = bug;
                }
                Session["CaptureData"] = model;
            }

        }
        ModelState.Clear();

        return View("LoadBug", bug);
    } 
```

这里是我的查看页面

```
 <div class="UploadMain">
    <%:Html.Label("Attachment Name:") %>
    <%:Html.TextBoxFor(model=>model.AttachmentName) %>
    <span>
        <%:Html.Label("Upload Files") %></span>
    <input type="file" name="file" id="file" />
    <input type="submit" value="Upload" id="Upload" class="style-name cancel"  />
    <%--onclick="window.location.href='<%= Url.Action("UploadFile", "Bug") %>';"--%>
    <table align="center" class="gridtable" border="0" cellspacing="0" cellpadding="0">
        <tr>
            <th>
                Attachment Name
            </th>
            <th>
                Attachment Url
            </th>
            <th>
            Action 
            </th>
        </tr>
        <% if (Model != null && Model.ListFile != null)
           {  %>
        <% foreach (var Emp in Model.ListFile)
           { %>
        <tr class="Data">
            <td >
                <%:Emp.AttachmentName %>
            </td>
            <td >
                <%: Emp.FileName %>
            </td>
           <td>
          <%-- <%= Html.ActionLink("Delete", "Delete")%>--%>

            <%:Html.ActionLink("Delete", "Delete", new { @FileName = Emp.FileName })%>

            </td>
        </tr>
        <% } %>
        <% } %>
    </table>
</div> 
```

例如在这里检查这篇文章它是在c＃中，但我需要这是在mvc3中请帮助我完成这项工作请帮助我任何人

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:33:19.340

要删除您上传的文件，您只需要它的文件路径，并使用 File.Delete("filepath"); 要知道要删除哪个文件，您的 Delete 操作应采用 id：

删除（int id）

然后在您的操作链接中传递 BugAttachmentID：（使用路由值/参数）

```
<%:Html.ActionLink("Delete", "Delete", new { @FileName = Emp.FileName }, new { id = Emp.BugAttachmentID })%> 
```

然后在您的删除方法中，您使用 ID 在 FileList 中查找要删除的文件。然后使用附件 url 调用 File.Delete。

我希望这有帮助。

# mysql - Mysql双连接更新

> ID：12214497
> 
> 赞同：1
> 
> 时间：2012-08-31T11:33:34.443
> 
> 标签：mysql, sql, sql-update

我有三个表：对象，关系，点

关系表将多个点连接到对象。想象一下这样的表结构：

```
**OBJECTS**
  |object_id|object_name|object_points|
**RELATIONS**
  |relation_id|relation_object_id|relation_point_id|
**POINTS**
  |point_id|point_value(INT)| 
```

不，我如何在 UPDATE 中进行“双重连接”以`object_points`从相关总和中更新对象表字段`point_values`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:38:46.890

像这样的东西？

```
UPDATE
        Objects AS o
    JOIN
        ( SELECT 
              r.relation_object_id
            , SUM(point_value) AS total_points
          FROM
                  Relations AS r
              JOIN
                  Points AS p
                ON p.point_id = relation_point_id 
          GROUP BY
              r.relation_object_id
        ) AS grp
      ON grp.relation_object_id = o.object_id
SET
    o.object_points = grp.total_points ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:38:14.857

这应该工作

```
Update OBJECTS set object_points=(select sum(POINTS.point_value) 
  from RELATIONS,POINTS where 
  RELATIONS.relation_object_id=OBJECTS.object_id 
  and RELATIONS.relation_point_id=POINTS.point_id group by relation_object_id) 
```

这是工作演示：[http ://sqlfiddle.com/#!2/d2a9f/1/0](http://sqlfiddle.com/#!2/d2a9f/1/0)

# java - 是否可以将 Netbeans 中的 JUnit 输出打印到控制台？

> ID：12214507
> 
> 赞同：3
> 
> 时间：2012-08-31T11:34:05.953
> 
> 标签：java, netbeans, junit

Netbeans 中的 JUnit 在**一行**中打印失败测试的输出。长的错误信息难以阅读。

**例子：** ![在此处输入图像描述](../Images/eb5fb1cc7a81b81480d3c04b19bfc721.png)

是否可以将输出打印到控制台或以其他方式格式化此消息？

# ios - CoreMotion 姿态受直线运动影响

> ID：12214509
> 
> 赞同：6
> 
> 时间：2012-08-31T11:34:15.543
> 
> 标签：ios, gyroscope

我正在开发一个必须在陀螺仪数据中使用非常小的变化的应用程序。

问题在于，在将设备平放在桌子上并水平加速的同时，CoreMotion 似乎也将线性加速度视为角加速度。

直接来自 deviceMotion 的俯仰和横滚值变化最大 3 度，并在减速时恢复到默认值。我本来预计只有一个角度（偏航）会改变，因为您可以在保持水平的同时以这种方式旋转设备。我使用哪种参考态度并不重要。

同样的问题似乎会影响 deviceMotion.attitude 的四元数。起初我认为这是 CoreMotion 中使用的传感器融合算法的影响，但是来自 CMGyroData（应该是原始数据）的旋转率也发生了变化。

以前有没有人注意到这个问题？

# user-interface - 使用 Python 进行 GUI 开发有什么好处吗？

> ID：12214510
> 
> 赞同：-2
> 
> 时间：2012-08-31T11:34:15.473
> 
> 标签：user-interface, python-3.x, tkinter

我正在研究 Tkinter，但我想知道是否还有其他有助于 GUI 的软件包。尽管 Java 比 python 更健壮，但 python 的编写速度更快，如果我只是想创建一个快速的应用程序，它会非常有帮助。我通常在 java 中使用 .Swing 和 .awt 来制作我的所有应用程序。

另外，有没有类似于 JWS for python 的东西？我希望在网站上添加一个链接，该链接将启动 python 编码的应用程序

谢谢

（PS 我使用的是 Python 3.2.2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:51:55.570

是的，python 和 tkinter 非常适合开发 GUI。虽然大多数脚本语言都是如此，但我认为这两者是一个特别好的组合。

对于大多数 GUI，功能比形式更重要（即：眼睛糖果不是最重要的）。即便如此，使用 Tkinter 制作非常漂亮的 GUI 也是可能的。近二十年来，Tk 一直是我的首选工具包。它最容易与 Tcl 一起使用，因为这是它的原生语言，但不可否认的是，就内置功能而言，python 比 Tcl 具有优势。

话虽如此，python 程序员可用的所有工具包都很好。Tkinter 的主要优点是它非常易于使用并且您可能已经安装了它，因此入门门槛非常低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T21:39:59.013

我喜欢将 tkinter 与 python 一起使用。这很容易做到，这里有很多例子，还有很多问题和答案！此外，90% 的 Python 用户已经在他们的系统上安装了 tkinter，这使得分发变得非常简单。我也成功使用[py2exe](http://www.py2exe.org/)创建 Windows 可执行文件。

这是我在大约 10 分钟内编写的 gui。一旦你理解了语法，它就很容易了。

![在此处输入图像描述](../Images/ffa41fc83d34070cb61786fd1b1bf885.png)

[我用vtk](http://www.vtk.org/)和[matplotlib](http://matplotlib.sourceforge.net/index.html)为 3D 和 2D 图形嵌入到 gui 中编写了另一个更精细的版本！我问这个问题[。](https://stackoverflow.com/questions/10343759/determining-what-tkinter-window-is-currently-on-top)

![在此处输入图像描述](../Images/7040b155223169853002dacfc267e1c6.png)

# windows-runtime - 如何区分空 Platform.String 和空 Platform.String^

> ID：12214515
> 
> 赞同：6
> 
> 时间：2012-08-31T11:34:36.940
> 
> 标签：windows-runtime

我们正在验证方法参数在函数输入时不为空，但这不适用于`Platform::String`（或者`Platform.String`，C# 或 C++ 之间没有区别），因为它们使用空实例重载了空字符串的语义。

考虑一下，总是会抛出异常：

```
auto emptyString = ref new Platform::String();

// Now, emptyString.IsEmpty() will be true

if (emptyString == nullptr)
{
    throw ref new Platform::InvalidArgumentException();
} 
```

该变量具有非空值，但`==`比较运算符已重载，因此将其与`nullptr`返回 true 进行比较，因为`String`实例为空。

据我所知，这使我们无法在`String`s 的函数入口处进行正确的空检查。真的是这样吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T12:38:47.053

Windows 运行时中没有“空字符串”。对于字符串，“Null”和“empty”的含义相同。

尽管`Platform::String`使用`^`语法并且看起来像引用类型，但它不是：它是 Windows 运行时基本类型的投影，[`HSTRING`](http://msdn.microsoft.com/en-us/library/br205775.aspx). “空”HSTRING 与空 HSTRING 无法区分。

即使 a`Platform::String^`看起来是“null”（例如在调试器中），也可以安全地将其视为空字符串。您可以将其用于连接、调用`s->Length()`等。

* * *

在 C# 中，a`string`可以为空（因此您可以测试它是否为空），但您永远不会`string`从 Windows 运行时调用中获得空值，并且您不能将空字符串作为参数传递给 Windows 运行时函数（这样做会产生ABI 边界处的异常）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:39:00.523

看来你是对的。任何设置为`nullptr`的字符串都被视为空字符串。如果你甚至传递`nullptr`给函数，你将永远不会得到`NullReferenceException`.

```
bool NullPtrTest(Platform::String^ value)
{
  return value == nullptr;
}

bool EmptyTest(Platform::String^ value)
{
  return value->IsEmpty();
}

bool ReferenceEqualsWithNullPtrTest(Platform::String^ value)
{
  return Platform::String::ReferenceEquals(nullptr, value);
}

bool EqualsWithValueTest(Platform::String^ value)
{
  return value->Equals("test");
}

//...

NullPtrTest(nullptr); // true
NullPtrTest(ref new Platform::String()); // true
NullPtrTest("test"); // false

EmptyTest(nullptr); // true - no exception
EmptyTest(ref new Platform::String()); // true
EmptyTest("test"); // false

ReferenceEqualsWithNullPtrTest(nullptr); // true
ReferenceEqualsWithNullPtrTest(ref new Platform::String()); // true
ReferenceEqualsWithNullPtrTest("test"); // false

EqualsWithValueTest(nullptr); // false - no exception
EqualsWithValueTest(ref new Platform::String()); // false
EqualsWithValueTest("test"); // true 
```

所以，我看不出有什么办法可以找出字符串是否曾经是`nullptr`.

# asp.net - asp.net - 使用 mssql 数据库注册和登录

> ID：12214517
> 
> 赞同：1
> 
> 时间：2012-08-31T11:34:44.203
> 
> 标签：asp.net, asp.net-mvc-3

简单的问题 - 是否有任何教程如何使用 mssql 数据库在 asp.net mvc3 网页上实现注册和登录？以及如何检查用户授权（是否登录以及他的权限）？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:47:15.207

您不需要做那么多，因为繁重的工作是由会员提供者完成的——也就是说，所有控件和代码本身都是与数据库无关的，并不真正关心您使用哪种数据存储机制。您只需要安装 MySQL 连接器并更改 Web.Config 中的配置设置以指向 MySQL 提供程序而不是开箱即用的 MSSQL 提供程序 - 您应该在这里找到您需要的内容：

[http://www.integratedwebsystems.com/2010/02/how-to-setup-and-configure-mysql-membership-provider-6-2-2-porting-to-mono-part-2-of-3/](http://www.integratedwebsystems.com/2010/02/how-to-setup-and-configure-mysql-membership-provider-6-2-2-porting-to-mono-part-2-of-3/)

# jakarta-ee - 在完成的项目中集成 MVC 框架

> ID：12214520
> 
> 赞同：-1
> 
> 时间：2012-08-31T11:35:04.423
> 
> 标签：jakarta-ee, spring-mvc

我正在为学校的这个 JAVA EE 项目工作。我几乎完成了，但我意识到我们应该使用 MVC 框架（spring 或其他）到目前为止我所做的是制作一个 jsp 页面，将表单数据发送到 HttpServlet，然后 servlet 输出结果。如何在不重新制作整个工作的情况下集成 MVC 框架，尤其是我接近截止日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:09:16.563

距离截止日期有多近。我从来没有发现第一次配置框架是微不足道的 - 整理依赖关系和所有。我认为[本教程涵盖了快速入门。](http://blog.springsource.org/2011/01/04/green-beans-getting-started-with-spring-mvc/)[Spring mvc 的文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)始终是可靠的参考。现在对您来说重要的部分是 16.2 DispatcherServlet、16.3 实现控制器、16.3.1 和 16.3.2

如果你熟悉 maven，你可以生成一个带有原型的项目结构，[appfuse-basic-spring](http://docs.codehaus.org/display/MAVENUSER/Archetypes+List)看起来很有前途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:24:59.917

好吧，这肯定需要您进行一些重写。好处是，从您编写的内容来看，您似乎已经在遵循 MVC 模式，因此至少它更像是 1:1 移植，而不是重新组织代码并从头开始重写。

第一步是调整配置——例如添加 Spring 上下文和 MVC 过滤器。基本上，jsp 可以很容易地保持一个 jsp，因为 Spring MVC 支持 JSPView，它可能需要稍作修改，但没有什么令人震惊的。然后，您必须将 Servlet 更改为 Spring MVC 控制器。Spring MVC 控制器可以只接收 HttpRequest 作为附加的方法参数，因此这将是一个舒适的起点（将相同的 servlet 代码移动到控制器）。

之后，您可以开始使应用程序更像 Spring MVC - 您可以查看 PetClinic 或任何更基本的 Spring MVC 演示应用程序。

简而言之：

1.  添加配置
2.  端口代码（Servlet -> 控制器；jsp -> jsp）
3.  修改以达到最终结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:59:44.220

如果您有权访问[SpringSource Tool Suite](http://www.springsource.org/sts) (STS) 应用程序，则可以轻松创建模板 Spring MVC 项目。然后，它应该是一个快速的过程，可以放入您已经拥有的代码。

从 New Project 下拉列表中选择 Spring Template Project，然后选择 Spring MVC project。它将包括对 Maven 的支持，以便为您解决所有依赖项。

将您的 servlet 代码放入生成的`HomeController`类中（您*需要*进行更改），并将您的 JSP 放入该`/src/main/webapp/WEB-INF/views`文件夹中。

祝你好运！

# android - Android - 使用徽标作为 ActionBarSherlock 上的下拉列表

> ID：12214521
> 
> 赞同：2
> 
> 时间：2012-08-31T11:35:04.507
> 
> 标签：android, actionbarsherlock

如何使 ActionBar 上的徽标成为下拉列表，如下所示：

```
ArrayAdapter<CharSequence> list = ArrayAdapter.createFromResource(this, R.array.locations, R.layout.sherlock_spinner_item);
    list.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(list, this); 
```

但我希望这个 NavigationList 从徽标中打开。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:54:00.547

您可以完全摆脱图标和徽标（例如，`setDisplayShowHomeEnabled()`），然后`setNavigationMode()`用于您的列表。

# twitter-bootstrap - Twitter Bootstrap 响应式缩略图：如何解决第二行的缩进？

> ID：12214522
> 
> 赞同：8
> 
> 时间：2012-08-31T11:35:08.133
> 
> 标签：twitter-bootstrap

我有以下示例：http: [//jsfiddle.net/Q5dXc/show/](http://jsfiddle.net/Q5dXc/show/)

知道如何在第四个缩略图之后治愈缩进吗？

这是来源：http: [//jsfiddle.net/Q5dXc/](http://jsfiddle.net/Q5dXc/)

查看“更多示例”标题下的[文档](http://twitter.github.com/bootstrap/components.html#thumbnails)，我可以看到他们的 2 行示例，但我无法使其工作。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T12:16:06.443

我发现了同样的问题，但没有找到一个优雅的解决方案。我正在使用这个小技巧：

```
.thumbnails .span4:nth-child(3n+1),
.thumbnails .span4:first-child + li + li + li,
.thumbnails .span4:first-child + li + li + li + li + li + li {
    margin-left: 0;
} 
```

注意长系列`li`是IE方式，每行都必须加一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T12:14:59.917

他们在演示中并没有很好地解释它，但如果你`<div class="row-fluid">`在它周围使用它，你必须为下一行缩略图制作另一行。如果您只想制作一堆不是的缩略图，`fluid`您可以使用常规`<div>`或`<p>`. 这应该作为针对 Bootstrap 的问题提出，以便可以修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T17:30:38.000

[缩略图](http://twitter.github.io/bootstrap/components.html#thumbnails)的文档并没有提到响应式设计，而是预定义`row`的`.span*`儿童：

`...the thumbnails component uses existing grid system classes - like .span2 or .span3 - for control of thumbnail dimensions.`

要让`.span2`、`.span3`或`.span4`以下[补丁](https://gist.github.com/appastair/5723225#file-thumbnails-less-diff)`.span6`适用于现代浏览器和 Twitter Bootstrap 2.3.2：

```
.row-fluid .thumbnails .span2:nth-child(6n+1), 
    .row-fluid .thumbnails .span3:nth-child(4n+1), 
    .row-fluid .thumbnails .span4:nth-child(3n+1), 
    .row-fluid .thumbnails .span6:nth-child(2n+1) {
        margin-left: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T14:45:43.430

这是官方引导 github 上报告的问题，所以我建议任何寻找更多解决方案的人来检查 - [github.com 上的 twitter bootstrap](https://github.com/twitter/bootstrap/issues/3494)。

截至目前，该问题尚未解决，但各种用户已在评论线程中提交了 10 多个不同的解决方案。

# android - Android地图中两个位置之间的距离

> ID：12214525
> 
> 赞同：1
> 
> 时间：2012-08-31T11:35:19.180
> 
> 标签：android, android-mapview

如何计算 android 地图中 2 个位置之间的距离 & 输出必须显示在 textview 或任何中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:45:49.393

我认为您需要 googleapi，我以前使用过此类服务..您可以获取从当前位置到目的地的距离。

只需 uee 以下网址：

[http://maps.googleapis.com/maps/api/directions/json?origin=%f,%f&destination=%f,%f&sensor=false&mode=driving](http://maps.googleapis.com/maps/api/directions/json?origin=%f,%f&destination=%f,%f&sensor=false&mode=driving)

这里，原点=%f,%f = 原点=纬度,经度 目的地=%f,%f = 目的地=纬度,经度

谷歌回复：

```
{

    "routes": [
        {
            "bounds": {
                "northeast": { … },
                "southwest": { … }
            },
            "copyrights": "Map data ©2012 Inav/Geosistemas SRL",
            "legs": [
                {
                    "distance": {
                        "text": "1 m",
                        "value": 0
                    },
                    "duration": { … },
                    "end_address": "Formosa Province, Argentina",
                    "end_location": { … },
                    "start_address": "Formosa Province, Argentina",
                    "start_location": { … },
                    "steps": [ … ],
                    "via_waypoint": [ ]
                }
            ],
            "overview_polyline": { … },
            "summary": "RP 3",
            "warnings": [ ],
            "waypoint_order": [ ]
        }
    ],
    "status": "OK"

} 
```

上面你可以看到

```
"distance": {
                            "text": "1 m",
                            "value": 0
                        }, 
```

有你的距离：

代码可能如下所示：

```
private void getDistance(){
StringBuffer jsonString = new StringBuffer();

        httpPost = new HttpPost("http://maps.googleapis.com/maps/api/directions/json?origin=<latitude>,<longitude>&destination=<latitude>,<longitude>&sensor=false&mode=driving");

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(params));
            httpResponse = httpClient.execute(httpPost);

            InputStream in = httpResponse.getEntity().getContent();
            int ch = 0;
            while ((ch = in.read()) != -1) {
                jsonString.append((char) ch);
            }
            in.close();

            JSONObject jsonObject = new JSONObject(jsonString.toString());
            JSONArray jsonArray = jsonObject.getJSONArray(""legs");
            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject jObj = jsonArray.getJSONObject(i);

                String text = jObj.getString("text");
                String value = jObj.getString("value");//value is ur distance
            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

} 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:37:37.107

```
textView.setText(""+location1.distanceTo(location2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:21:38.680

```
/**
 * Calculate the distance between 2 points based on their GeoPoint coordinates. <br>
 * Return the value in Km or miles based on the unit input
 * @param gp1 (GeoPoint): First point.
 * @param gp2 (GeoPoint): Second point.
 * @param unit (char): Unit of measurement: 'm' for miles and 'k' for Km.
 * @return (double): The distance in miles or Km.
 */
public static double getDistance(GeoPoint gp1, GeoPoint gp2, char unit)
{
    //Convert from degrees to radians
    final double d2r = Math.PI / 180.0;

    //Change lat and lon from GeoPoint E6 format
    final double lat1 = gp1.getLatitudeE6() / 1E6;
    final double lat2 = gp2.getLatitudeE6() / 1E6;
    final double lon1 = gp1.getLongitudeE6() / 1E6;
    final double lon2 = gp2.getLongitudeE6() / 1E6;

    //The difference between latitudes and longitudes
    double dLat = Math.abs(lat1 - lat2) * d2r;
    double dLon = Math.abs(lon1 - lon2) * d2r;

    double a = Math.pow(Math.sin(dLat / 2.0), 2) 
            + Math.cos(lat1 * d2r) * Math.cos(lat2 * d2r)
            * Math.pow(Math.sin(dLon / 2.0), 2);

    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

    //Return the distance
    return (unit == 'm' ? 3956 : 6367) * c;
} //End getDistance()

TextView textView.setText("" + getDistance(gp1, gp2, 'k')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-29T08:42:02.940

对于像我这样正在学习/迟到的人。使用了下面@NaserShaikh 编写的代码。当你有纬度、经度两点时，你可以在这里找到一个工作代码来获取谷歌地图上的行驶距离！！距离以英里为单位！有更好的方法来解析 JSON 响应请寻找它。当有海洋 btw 和其他东西时，Havent 对其进行了极端测试。希望能帮助到你。

```
package havefun;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClientBuilder;
import org.json.JSONArray;
import org.json.JSONObject;

class Distance {
    private Double dist;
    public Distance() {
        dist = (double) -1;

    }

    private Double getDistance(){
        StringBuffer jsonString = new StringBuffer();

              HttpPost  httpPost = new HttpPost("http://maps.googleapis.com/maps/api/directions/json?origin=<src_lat>,<src_long>&destination=<dst_lat>,<dst_long>&sensor=false&mode=driving");

              CloseableHttpClient httpClient = HttpClientBuilder.create().build();
                try {

                 CloseableHttpResponse HttpResponse = httpClient.execute(httpPost);

                    InputStream in = HttpResponse.getEntity().getContent();

                    int ch = 0;
                    while ((ch = in.read()) != -1) {
                        jsonString.append((char) ch);
                    }
                    in.close();

                    JSONObject jsonObject = new JSONObject(jsonString.toString());
                    //System.out.println(jsonObject);
                    //System.out.println("========================");
                    //System.out.println(jsonObject.get("status"));
                    if (jsonObject.get("status").toString().equals("OK") == false) {
                        System.err.println("Error");
                        return dist;
                    }

                    String distance = jsonObject.getJSONArray("routes").getJSONObject(0).getJSONArray("legs").getJSONObject(0).getJSONObject("distance").getString("text");

                    System.out.println(distance);

                    String temp[] = distance.split(" ");
                    System.out.println(temp[1]);
                    System.out.println(temp[0]);

                    dist = Double.parseDouble(temp[0]);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return dist;

        }

    public static void main(String[] args) {
        Distance d = new Distance();
            Double dist = d.getDistance();
            System.out.println("Distance ="+dist);
    }
} 
```

# c# - 在 WinForms 中展开或折叠带有动画的 splitcontainer

> ID：12214526
> 
> 赞同：2
> 
> 时间：2012-08-31T11:35:19.880
> 
> 标签：c#, winforms, animation, splitcontainer

下面是我目前如何折叠拆分容器，但我想要一个额外的效果，这样当我折叠容器时它应该慢慢折叠，这样感觉就像动画一样。

我怎样才能用 WinForms 做到这一点？

```
private void button1_Click(object sender, EventArgs e)
{
    Thread backgroundThread = new Thread(
        new ThreadStart(() =>
        {
            if (splitContainer1.InvokeRequired)
            {
                splitContainer1.Invoke(new MethodInvoker(delegate
                {
                    splitContainer1.Panel1Collapsed = !splitContainer1.Panel1Collapsed;
                    }));
                }
            }
        ));
    backgroundThread.Start();
} 
```

# batch-file - 如何创建一个 DOS 批处理文件，该文件生成一个输出文件，其中包含批处理参数中指定的文件列表？

> ID：12214527
> 
> 赞同：0
> 
> 时间：2012-08-31T11:35:19.483
> 
> 标签：batch-file

我想创建一个`batch.bat`可以执行如下的批处理文件

```
batch.bat output PDF PNG JPG EPS 
```

生产`output.list`包含

```
filename1.pdf
filename2.pdf
filename3.pdf
filename4.pdf
filename1.png
filename2.png
filename3.jpg
filename4.eps 
```

请注意，前两个参数是唯一的强制参数。我的努力如下，但我认为它使用了一种野蛮的编程技术，因为`%1`它用于准备一个新的输出文件，并且不可避免地在第一次迭代中再次使用它，它什么都不做。

```
rem batch.bat
echo off

rem %1 represents the output file name
rem the remaining args represent file extension

dir /b *.%1 > %1.list

for %%x in (%*) do (dir /b *.%%x >> %1.list) 
```

如何巧妙地创建一个 DOS 批处理文件，该文件生成一个输出文件，其中包含批处理参数中指定的文件列表？

编辑：

我需要批处理文件，因为它将从以下代码中调用。

```
\documentclass{article}
\usepackage{graphicx}

\newread\myfile
\newcount\TotalFiles

\AtBeginDocument
{
    \immediate\write18{IterateFiles.bat \jobname\space pdf png jpg eps}
    \openin\myfile=\jobname.list\relax
}

\AtEndDocument
{
    \closein\myfile
}

\begin{document}
\makeatletter
\loop
    \read\myfile to \mydata
    \unless\ifeof\myfile
    \filename@parse{\mydata}
    \section*{\mydata}
    \includegraphics[width=\textwidth,height=\textheight,keepaspectratio]{\filename@base}
    \advance\TotalFiles1\relax
\repeat
\makeatother

\section*{Summary}
There are \the\TotalFiles\ files in total.
\end{document} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:54:53.903

这里有一个很好的命令可以帮助您：

> 转移
> 
> 更改批处理文件中可替换参数的位置。
> 
> 换档 [/n]
> 
> 如果启用了命令扩展，则 SHIFT 命令支持 /n 开关，该开关告诉命令从第 n 个参数开始移位，其中 n 可能介于零和八之间。例如：
> 
> 换档 /2
> 
> 会将 %3 转移到 %2，将 %4 转移到 %3，等等，而使 %0 和 %1 不受影响。

因此，要调整您的代码以使用`shift`：

```
REM ...

REM need to create output file name here as it will be gone after the first iteration
SET output_file=%1.list
COPY NUL %output_file%

:LOOP
REM jump out of the loop if there are no more parameters are present
IF "%2"=="" GOTO :EOF

REM 
DIR /b *.%2 >> %output_file%
SHIFT
GOTO :LOOP 
```

这将始终使用第二个参数 ( `%2`)，但在每次迭代后，命令行中提供的所有参数值都将向左移动一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T12:30:35.000

这是一个更简单的批处理解决方案

```
@echo off
setlocal
copy nul "%~1.list"
set "go="
for %%x in (%*) do if defined go (dir /b *.%%x >>"%~1.list") else set go=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T23:31:50.233

在批处理中调用的 WMI 命令将实现相同的目的：

```
wmic /output:"output.list" /namespace:\\root\cimv2 path CIM_LogicalFile where "Extension='PDF' or Extension='PNG' or Extension='JPG' or Extension='EPS'" get FileName,Extension /all /format:csv 
```

# c# - 如果行“---”，如何用 itextsharp 画一条线？

> ID：12214529
> 
> 赞同：3
> 
> 时间：2012-08-31T11:35:27.883
> 
> 标签：c#, .net-2.0, itextsharp

我用 Visual Studio 2005 C# 2.0 Net 编写了一个代码。我在 PDF 文件中阅读了文本文件和文本文件的内容。现在我想用画线替换文本文件中的文本（“---”）。

```
public void PDFCreate()
{
   iTextSharp.text.Document doc = new iTextSharp.text.Document(PageSize.A4, 25, 10, 40, 40);
    PdfWriter writer = PdfWriter.GetInstance(doc, fs);

    ///########
    BaseFont bf = BaseFont.CreateFont(@"C:\WINNT\Fonts\COUR.TTF", BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
    iTextSharp.text.Font f = new iTextSharp.text.Font(bf, 10, iTextSharp.text.Font.BOLD);

    BaseFont bs = BaseFont.CreateFont(@"C:\WINNT\Fonts\COUR.TTF", BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);
    iTextSharp.text.Font s = new iTextSharp.text.Font(bs, 10.2f, iTextSharp.text.Font.NORMAL);

    doc.Open();

    PdfContentByte cb = writer.DirectContent;

    string myfiles = MySetIniPath + feld[0] + "_rus." + feld[1];
    string str;
    StreamReader myfi = new StreamReader(myfiles);
    {
        while ((str = myfi.ReadLine()) != null)
        {
            if (str.Contains("MIMO"))
                doc.NewPage();

            if (str != "")
            {
                if (str.StartsWith("результат теста"))
                {
                    doc.Add(new Phrase(str, s));
                    doc.Add(new Phrase("\n\n", s));
                    continue;
                }
                if (str.StartsWith("Nummer"))
                {
                    doc.Add(new Phrase(str, f));
                    doc.Add(new Phrase("\n\n", f));
                    continue;
                }
                if (str.StartsWith("MIMO") ||
                    str.StartsWith("Serial") ||
                    str.StartsWith("Numbers") ||
                    str.StartsWith("order"))
                {
                    doc.Add(new Phrase(str + "\n", f));
                    continue;
                }
                if (str.StartsWith("---"))
                {
                    //Draw a line
                    continue;
                }
                doc.Add(new Phrase(str + "\n", s));
            }
        }
    }
    doc.Close();
    myfi.Close();
} 
```

如何`if(str.StartsWith("----"))`使用 itextsharp 或使用来编写（替换）画一条线`e.Graphics.MeasureString(" ", boldFont)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:06:01.790

这就是解决方案：

```
 if (str.IndexOf("|") > -1)
  {
       char vertLine = '\u2502'; 
       str = str.Replace("|", vertLine.ToString());
       doc.Add(new Phrase(str + "\n", s));

       continue;
    }

    if (str.StartsWith("---"))
    {  
         char vert = '\u2500'; 
         str = str.Replace("--", vert.ToString());
         doc.Add(new Phrase(str + str +"\n", s));

          continue;
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:51:45.187

您可以使用 string.Replace 和 DrawString

```
var text = "----- other text";
var yourValue =e.Graphics.DrawString();//Adjust your drawstring
var result = text.Replace("-----", yourValue); 
```

# iphone - 如何从文件夹中获取保存的图像并在下次访问 url 时显示图像而不是来自 parsecd 图像

> ID：12214530
> 
> 赞同：0
> 
> 时间：2012-08-31T11:35:28.107
> 
> 标签：iphone, ios

我有一个应用程序，我想将来自在线图像路径（url）的图标图像存储在本地。

当用户访问另一个 url 时，我将此图像存储在本地，该图标正在替换为以前的图标，以及如何替换此图标以重复使用，请帮助我。

谢谢你！

```
 NSString *strImage = [NSString stringWithFormat:@"%@",aBook.image];
        NSURL *url4Image = [NSURL URLWithString:strImage];
        NSData *data = [NSData dataWithContentsOfURL:url4Image];
        if(data !=NULL)
        {
            imageView =[[UIImage alloc] initWithData:data];
            if(imageView == NULL)
            {
                imageView =[UIImage imageNamed:@"dealsbell_lo.png"];    //  NoImage.png

            }
        }
        NSData *imageData = UIImagePNGRepresentation(imageView);
        NSString *imageName = [NSString stringWithFormat:@"image.png"];
                NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *fullPathToFile = [documentsDirectory stringByAppendingPathComponent:imageName];
        [imageData writeToFile:fullPathToFile atomically:YES];

        cell.imageView.image = imageView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:48:33.360

做这个：

```
 NSString *imageName = [NSString stringWithFormat:[NSString stringWithFormat:@"image_%d.png",indexPath.row]];//change name of image
            NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPathToFile = [documentsDirectory stringByAppendingPathComponent:imageName];
    if([[NSFileManager defaultManager] fileExistsAtPath:fullPathToFile])
    {
        NSData *imgData  = [NSData dataWithContentsOfFile:fullPathToFile];
        if(imgData){
        UIImage *img = [UIImage imageWithData:imgData];
        cellimageView.image = img;
        }
    }
    else
    {
       NSString *strImage = [NSString stringWithFormat:@"%@",aBook.image];
       NSURL *url4Image = [NSURL URLWithString:strImage];
       NSData *data = [NSData dataWithContentsOfURL:url4Image];
       if(imgData){
       UIImage *img = [UIImage imageWithData:imgData];
       cellimageView.image = img;
       [data writeToFile:fullPathToFile atomically:YES];
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:39:55.893

对于这种情况，您应该缓存下载的图像并为下一个请求恢复相同的图像。

我认为您应该使用[JMImageCache](https://github.com/jakemarsh/JMImageCache)框架。

# c# - C# - 抽象类扩展类和 new()？

> ID：12214536
> 
> 赞同：3
> 
> 时间：2012-08-31T11:35:44.273
> 
> 标签：c#

在一些现有的代码中，我看到以下内容：

```
public abstract class BasicComponent<T> : IBasicComponent<T> 
                                          where T : class, new() 
```

我知道抽象类和接口是什么。`where T`但是当你扩展`class`和时它在做什么以及发生了什么`new()`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T11:37:48.053

这些是[泛型类型约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。

这`class`意味着`T`你使用的必须是一个类（包括接口、委托和数组），`new`它必须有一个公共的无参数构造函数。

从链接的 MSDN 文档：

> 其中 T : class - 类型参数必须是引用类型；这也适用于任何类、接口、委托或数组类型。
> 
> 其中 T : new() - 类型参数必须具有公共无参数构造函数。当与其他约束一起使用时，必须最后指定 new() 约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:38:30.947

`where T`限制泛型类型 T

`class`意味着 T 必须是一个类并且没有结构或值类型
`new`意味着 T 必须有无参数构造函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:39:56.460

**`Where`**用于声明对泛型类型参数的约束，这反过来意味着编译器可以允许一些原本不允许的事情，因为它对类型参数知之甚少。

```
where T : class; 
```

**这将类型参数限制`T`为 a`class`** -*这意味着此方法将仅将其作为值类型或结构接受，`class`而不是作为值类型或结构接受。*

```
where T : new(); 
```

**这将类型参数限制为定义`T`了无参数构造函数的类型**。*因此，编译器可以接受以下内容：*

```
T t = new T(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T11:48:16.873

它说它`T`必须是一个引用类型 ( `class`) 并且必须有一个无参数的构造函数`new()`。

这意味着`BasicComponent<T>`从它派生的类可以做只能在这种情况下才能做的事情。这也意味着他们可以做其他没有意义的事情。相反，如果我们没有它。

```
public abstract class BasicComponent<T>
{
  public T Build()
  {
    return new T();//can't do this without `new()` constraint.
  }
  public bool Check(T item)
  {
    return item != null;//only references types can be null, so 
                        //can't do this without `class` constraint
                        //though notice that `default(T)` works for
                        //both reference and value types.
  }
  public bool IsSame(T x, T y)
  {
    return ReferenceEquals(x, y);//pointless with value-types.
                                 //x and y would be passed to IsSame by
                                 //copying, then boxed to two different objects
                                 //then this will always return false.
                                 //as part of a generic implementation that
                                 //accepted both value and reference types
                                 //it might be that we still care to do something
                                 //for reference-equals, in other cases the 
                                 //pointlessness would make the whole class pointless
                                 //for value types.
  }
  public abstract void Whatever();//just added in so the class still does something abstractly!
} 
```

请注意，派生自的类`BasicComponent<T>`必须至少同样严格 - 它必须具有所有约束`BasicComponent<T>`，并且可能会或可能不会添加自己的进一步约束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:42:12.143

T 是您将要使用的通用部分。
关键字在哪里充当过滤器（类似于其他语言）

在这里你已经使用了 class 和 new()

这意味着，
您可以使用要在此泛型类中传递的任何类。
new() 意味着，您正在告诉类它将具有无参数构造函数。

# php - PHP/MySQL 未识别索引错误

> ID：12214537
> 
> 赞同：0
> 
> 时间：2012-08-31T11:35:45.910
> 
> 标签：php, mysql

我正在处理一个 PHP 任务，该任务要求我创建一个搜索表单，该表单使用用户输入的条件搜索数据库。在 MySQL 数据库中，我有一个 firstName 和 lastName 列。为了让用户更容易，我想连接到并将其输入到列表框中，以便用户可以单击人名，但是我现在收到未定义的索引错误。我已经研究了解决方案，但一直找不到。

我正在连接到文件中其他位置的服务器和数据库。我只显示了与以下问题相关的代码。

表格代码：

```
<form action="search.php" method="POST">
    <fieldset style="background-color:#CCC">
    <p> person: <?php fullname(); ?><br>
    </fieldset>
</form>

function fullname()
{
    $query = 'SELECT CONCAT (firstName,\' \',lastName) FROM athlete ORDER BY lastName';
    $result = mysql_query($query);
    echo("<select name=\"fullnameListbox\">");
    echo("<option value=\"empty\"></option>"); 
    while($row = mysql_fetch_assoc($result))
    {
        foreach($row as $index=>$value)
        {
            echo("<option value=\"$value\"> $value </option>"); 
        }
    }
    echo("</select>");
} 
```

加工形式：

```
echo($_POST['fullnameListbox']); 
```

我重复这个错误，我得到一个未识别的索引错误。任何帮助表示赞赏。

我按照下面的建议包含了 print_r($_POST) ，我得到以下信息：

```
( [lastNameListbox] => empty [lastNameText] => [search] => Submit ) 
```

我认为 lastNameListBox 是空的，即使我在列表框中单击了一个名称，所以理论上它不应该为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:05:44.650

未识别索引**通知**是与尝试访问尚未初始化的数组索引有关的 PHP**通知。**

```
$_GET['some_key_name']++; // will result in such a notice
                          // if the array key was never initialised

if(isset($_GET['some_key_name'])) // will not result in such a notice
    $_GET['some_key_name']++;     // will not result in such a notice
else
    $_GET['some_key_name'] = 1;   // will not result in such a notice 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:42:14.560

您好，首先您必须连接数据库，然后才能执行查询。

```
<?php
   $con = mysql_connect("localhost","peter","abc123");
   if (!$con)
   {
       die('Could not connect: ' . mysql_error());
   }
 // some code
 mysql_close($con);
 ?> 
```

尝试这个..

# documentation - 指定通信协议

> ID：12214538
> 
> 赞同：0
> 
> 时间：2012-08-31T11:35:48.640
> 
> 标签：documentation, communication, specifications

我正在尝试记录两个现有系统之间的通信，这些系统今天非常糟糕指定。我想知道是否有任何标准或最佳实践来记录我可以使用的网络通信协议？有几种特殊类型必须记录和混合位顺序

通信很简单，就是这样（伪代码）

**System A->System B**（发起通信）

```
 short type;                   //Little endian 
```

**系统B->系统A**

```
 short type;                   //Little endian
  short count;                  //Little endian
  //Start time
  short NoOfDaysSince1970;      //Big endian
  int   noOfMillisecoundsToday; //Big ending
  if(type==1)
    for(int i=0;i<count;i++)
      char[20] name;
  else
    for(int i=0;i<count;i++)
      float value;    //platform specific float, Little ending
    for(int i=0;i<count;i++)
      short flag;                //Big ending
  //Stop time
  short noOfDaysSince1970;       //Big ending
  int   noOfMillisecoundsToday;  //Big ending 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:09:56.763

您可能会看一下[Abstract Syntax Notation One](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)。

# regex - passing variables inside a regexp in tcl

> ID：12214541
> 
> 赞同：5
> 
> 时间：2012-08-31T11:35:54.490
> 
> 标签：regex, tcl

> **Possible Duplicate:**
> [How to use a variable in regexp expression (TCL/Expect)](https://stackoverflow.com/questions/11768739/how-to-use-a-variable-in-regexp-expression-tcl-expect)

I want help in passing varibles to a regexp.

Suppose my code is

```
set line "MPID:22 condition:AIS"
set id 22
if {[regexp {MPID:$id} $line]} {
puts "inside if"
} 
```

This regexp doesn't work. If I change regexp to

```
{[regexp {MPID:22} $line]} 
```

it works.

Can someone provide a solution for this.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T12:07:10.393

而不是`{MPID:$id}`你想使用`"MPID:$id"`：

```
if {[regexp "MPID:$id" $line]} {
    puts "inside if"
} 
```

tcl使用`{...}`它们将表达式的各个部分组合在一起，但防止变量扩展。
如果你想要变量扩展，你应该使用`"..."`

# windows - Build Qt from source on Windows targeting Linux/ARM

> ID：12214542
> 
> 赞同：2
> 
> 时间：2012-08-31T11:35:58.867
> 
> 标签：windows, qt, arm, cross-compiling

I started out with [this](https://raspberrypi.stackexchange.com/questions/1715/compile-qt-application-for-pi-from-windows) post on the Raspberry Pi exchange, which has led me down the path of building Qt from source.

After following [this stackoverflow question](https://stackoverflow.com/questions/11420984/qtcreator-on-windows-to-cross-compile-for-linux-arm-with-codesourcery-toolchain) AND the example on [this blog post](http://c2143.blogspot.com/?view=classic), I can run `configure.exe` and generate the makefile with no errors (although that doesn't mean I did everything completely right), **but I get errors when I run make**.

**Here's my current setup:** MSVC2010 as the host compiler, and Sourcery CodeBench Lite as the cross compiler. When I run `configure.exe`, I build for arm-none-linux-gnueabi-g++. And of course, before I try to build anything, I run vcvarsall.bat from the command prompt I'm working in.

**Here's the problem:** After the makefile is generated, if I use jom to build, it will run for about 5 minutes, and then end with this error:

```
jom: C:\qt-pi\src\coreLib\Makefile [..\..\lib\libQtCore4.dll] Error 1
jom: C:\qt-pi\src\coreLib\Makefile [all] Error 2
jom: C:\qt-pi\Makefile [sub-sorelib-make_default-ordered] Error 2
jom: C:\qt-pi\Makefile [all] Error 2 
```

Does anybody have any idea what I need to do to build Qt on Windows for Linux/ARM? Thanks!

# sql - 语法不是函数

> ID：12214547
> 
> 赞同：-6
> 
> 时间：2012-08-31T11:36:05.043
> 
> 标签：sql, sql-server-2008

这是我的 SQL 语句：

```
 N.File_Id = ServerFiles.Id WHERE [...] 
```

'File_Id' 以粉红色突出显示，无论如何我可以覆盖它吗？我认为这就是为什么我的 SQL 没有返回结果集的原因。

谢谢

修改后的代码：

```
SELECT 
   N.Id, NLoc.N_Id, Loc.Id as Loc_Id, 
   CAST(N.Text AS TEXT) as Text, FilePath, 
   CAST(N.Title AS TEXT) as Title, N.CreatD as RegDate
FROM 
   NLoc 
JOIN N ON NLoc.Not_Id = N.Id 
JOIN Loc ON NLoc.Loc_Id = Loc.Id
JOIN ServerFiles ON N.File_Id = ServerFiles.Id 
WHERE 
    Loc_Id IN (1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:59:53.357

试试这个：

```
SELECT 
    N.Id
    , NLoc.N_Id
    , Loc.Id as Loc_Id
    , CAST(N.Text AS TEXT) as Text
    , FilePath
    , CAST(N.Title AS TEXT) as Title
    , N.CreatD as RegDate 

FROM NLoc 
     JOIN N  ON NLoc.Not_Id=N.Id 
     JOIN Loc ON NLoc.Loc_Id=Loc.Id 
     JOIN ServerFiles ON N.File_Id=ServerFiles.Id 
WHERE Loc.Id = 1 
```

我看到的第一个问题是你不能使用在 WHERE 语句中的 SELECT 中定义的别名（所以你不能使用 Loc_Id，你必须使用 Loc.Id）。

让我知道这是否适合您，或者您仍然会收到错误消息。

我还注意到你使用 N.File_Id 和 N.Id，你确定你的表中有这两个列吗？您可以发布您的架构吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:53:58.890

将其放在**[ ]**中，如**[N].[File_Id]**

```
SELECT 
N.Id, NLoc.N_Id, 
Loc.Id as Loc_Id, CAST(N.Text AS TEXT) as Text, 
FilePath, CAST(N.Title AS TEXT) as Title,
 N.CreatD as RegDate 

 FROM NLoc 
 JOIN N  ON NLoc.Not_Id=N.Id 
 JOIN Loc ON NLoc.Loc_Id=Loc.Id 
 JOIN ServerFiles ON [N].[File_Id]=ServerFiles.Id 
 WHERE NLoc.Loc_Id IN (1) -- or Loc.Id IN (1) 
```

# c# - 使用异步调用进行缓存

> ID：12214554
> 
> 赞同：0
> 
> 时间：2012-08-31T11:37:01.907
> 
> 标签：c#, caching, architecture

请你帮助我好吗？我开发了基于 Web 的系统，它将异步请求发送到服务器。服务器从数据库中获取大数据并缓存它。大约需要 5 秒。下一次调用缓存中的服务器搜索，因此需要约 0.05 秒。第一次 5 秒是可以的，但是如果我一次发送超过 5 个异步请求，每个线程都会创建缓存，所以第一次需要超过 20 秒。我该如何改进呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:43:36.780

我以前有过这种情况，解决方案是将所有请求编组到某种队列中，或者在数据库/缓存中设置一个繁忙的标志，以便后续请求知道某些东西正在解决这个问题。

所以第一个请求标记为忙并执行请求。以下请求会看到它很忙，并将等到该标志不再标记为忙。然后这些请求应该能够提取缓存的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:47:22.043

有趣的场景。但是，您尚未指定如何缓存信息以及代码如何运行。如果您使用的是 ASP.Net 缓存（和 WCF / Web 服务），我认为它不支持像这样的更复杂的场景。如果您想要一些解决方法的想法（正如我所说，只是想法，我以前没有尝试过），您可以尝试缓存状态为“NotCached”、“Caching”和“Cached”的标志。请注意，如果两个请求同时完成，您可能会遇到并发问题。如果它没有被缓存，则启动进程并将标志设置为“缓存”。在缓存时，您可以决定如何处理其他即将到来的请求。使用线程睡眠（我不推荐）或转到数据库，但不要再次缓存。当第一个请求完成缓存时，您将标志设置为缓存并完成工作。如果您使用其他技术，您可能能够将请求排队，而缓存过程中只处理一个。如果您提供更多详细信息，它将有助于分析您的方案。

# image-processing - estimate the skew level with houghLines

> ID：12214556
> 
> 赞同：0
> 
> 时间：2012-08-31T11:37:06.810
> 
> 标签：image-processing, opencv, javacv, skew

i want to detect the skew level from an image. I've the following code:

```
public void analyse(CvMat img) {

    rows = img.rows();
    cols = img.cols();
    // create edge-map from rois
    CvMat edgeMap = cvCreateMat(rows, cols, CV_8UC1);

    cvCanny(img, edgeMap, 100, 400, 3);

    // transform to hough
    CvMemStorage storage = cvCreateMemStorage(0);
    lines = cvHoughLines2(edgeMap, storage, CV_HOUGH_PROBABILISTIC, 1,

    EuclideanDistance euclideanDistance = new EuclideanDistance();
    double maxDistance = Double.MIN_VALUE;
    for (int i = 0; i < lines.total(); ++i) {
        Pointer line = cvGetSeqElem(lines, i);
        CvPoint pt1 = new CvPoint(line).position(0);
        CvPoint pt2 = new CvPoint(line).position(1);
        double distance = euclideanDistance.getDistance(pt1, pt2);
        double currentAngle = Math.atan2(pt2.y() - pt1.y(),
                pt2.x() - pt1.x())
                * 180 / Math.PI;
        System.out.println(currentAngle);
        if (distance > maxDistance) {

            skewAngle = currentAngle;

        }
    } 
```

My test image is ![skew](../Images/b3ddcfd5c90f1e2b5aa65777716d7fc7.png)

I think the skew level is by -16 degree but my code says, that is by 25...

The for prints out a avg angle by 25,too. Thats wrong with my hough parameters?

//EDIT here is a drawing from the houghLines ![enter image description here](../Images/b677903a67e0101b89fed71b81fa93fd.png)

greetings

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:55:53.700

首先，既然你有一个相当清晰的文本，我建议你在 Canny 和 Hough 之前使用 dilate/erode。你会在信件中得到更多的分数，霍夫肯定会从中受益。

其次，您选择“最佳角度”作为直线两点之间的最大距离。

```
double distance = euclideanDistance.getDistance(pt1, pt2);
...
if (distance > maxDistance) {
    skewAngle = currentAngle;
} 
```

这是行不通的，因为实际上 Hough 可能会检测到一条不相关的行，它比任何文本行都长：

![霍夫失败](../Images/54847d9e3f511dd4384a2d53c2c3f96b.png)

如果你向自己展示所做的每一步，你可能会得出一个更好的算法——你在 Canny 之后得到了什么，霍夫变换产生了什么线等等。

# iphone - Twitter app on ios 4.3 request token issue on device

> ID：12214561
> 
> 赞同：0
> 
> 时间：2012-08-31T11:37:22.330
> 
> 标签：iphone, ios, twitter

I m new to ios application.Currently i m working on twitter application for ios 4.3 in which i m facing error below.My app works fine on simulator but does not works on iPad/iPhone.I m using code from this link "http://mobile.tutsplus.com/tutorials/iphone/twitter-api-iphone/"

Error : "Whoa there!.The request token for this page is invalid.It may have already been used or expired because it is too old.Please go back to site or application that sent you here."

Please help to sort the issue.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:51:57.820

请根据您在 Twitter 帐户上的申请检查您的`kOAuthConsumerKey`和`kOAuthConsumerSecret`值是否有效。

# objective-c - IOS - UIScrollView borders and zoom

> ID：12214566
> 
> 赞同：0
> 
> 时间：2012-08-31T11:37:38.477
> 
> 标签：objective-c, ios, uiscrollview, zooming, border

I'm implementing a gallery with a UIScrollView, and I've a problem if the picture haven't the same size as the UIScrollView. In this case, when the image is at normal size, there are borders as usual. But when I do zoom in the image, the borders makes bigger too.

I would like, if the image is zoomed and bigger than the UIScrollView, that the only visible part would be the image, not the borders.

And have no idea what to do.

![enter image description here](../Images/0f6de1a51836c4af545931ad14465e82.png)

![enter image description here](../Images/87927cec155800ecf627fe1ff77e25bd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:46:59.290

您应该`UIImageView`在背景中设置该图像，并在添加所有图标并且应该在滚动视图中放大的视图之上再添加一个视图。这样，图像将不会缩放，并且在缩放和正常状态下看起来也一样。

# python - SCons 正在尝试在不需要时验证参数

> ID：12214567
> 
> 赞同：0
> 
> 时间：2012-08-31T11:37:42.093
> 
> 标签：python, scons

下面是说明问题的简单代码片段：

```
def external_dependencies(url, destination):
           # this never gets called
           print 'whatever!'
           # if isinstance(url, basestring):
           #            urllib.urlretrieve(url, destination)
           # else:
           #            for a, b in map(None, url, destination):
           #                       urllib.urlretrieve(a, b)
           return None

env = Environment()
env.Command(['http://archive.apache.org/dist/xmlgraphics/batik/batik-1.6.zip',
             'http://archive.apache.org/dist/commons/collections/binaries/commons-collections-3.0.tar.gz',
             'http://archive.apache.org/dist/commons/logging/binaries/commons-logging-1.0.4.tar.gz'],
            ['./thirdparty/batik/batik-1.6.zip',
             './thirdparty/commons-collections-3.0.tar.gz',
             './thirdparty/commons-logging-1.0.4.tar.gz'],
            external_dependencies) 
```

当我尝试执行此操作时，出现以下错误：

```
scons: *** [http:/archive.apache.org/dist/commons/collections/binaries/commons-
collections-3.0.tar.gz] Source `thirdparty/batik/batik-1.6.zip' not found, 
needed by target `http:/archive.apache.org/dist/xmlgraphics/batik/batik-1.6.zip'. 
```

*（为便于阅读添加了换行符）*

显然找不到目的地，因为它还没有下载，而这个操作的全部目的就是下载它。

如何覆盖这种行为？在这里验证论点绝对适得其反。

**编辑：**

一个小小的更新：我可以让它以这种方式工作，但感觉不对 / hackish：

```
def external_dependencies(dummy, url, destination):
           if isinstance(url, basestring):
                      urllib.urlretrieve(url, destination)
           else:
                      for a, b in map(None, url, destination):
                                 urllib.urlretrieve(a, b)
           return None

env = Environment()
env.AddMethod(external_dependencies, 'ExternalDependencies')

env.ExternalDependencies(
           ['http://archive.apache.org/dist/xmlgraphics/batik/batik-1.6.zip',
            'http://archive.apache.org/dist/commons/collections/binaries/commons-collections-3.0.tar.gz',
            'http://archive.apache.org/dist/commons/logging/binaries/commons-logging-1.0.4.tar.gz'],
           ['./thirdparty/batik/batik-1.6.zip',
            './thirdparty/commons-collections-3.0.tar.gz',
            './thirdparty/commons-logging-1.0.4.tar.gz']) 
```

请注意 - 中的`dummy`参数，`external_dependencies`出于某种原因，SCons 将调用此函数，并将参数的数量作为第一个参数传递。因此，看起来预期用途有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:15:09.363

Command() 构建器的定义如下：

```
Command(target, source, action, [key=val, ...]) 
```

因此，您似乎错误地订购了参数。我假设 URL 列表是源，文件列表是目标，对吧？

如果是这种情况，您可以重新排序 args，或者只执行以下操作：

```
Command(source=['http://archive.apache.org/dist/xmlgraphics/batik/batik-1.6.zip',
                'http://archive.apache.org/dist/commons/collections/binaries/commons-collections-3.0.tar.gz',
                'http://archive.apache.org/dist/commons/logging/binaries/commons-logging-1.0.4.tar.gz'],
        target=['./thirdparty/batik/batik-1.6.zip',
                './thirdparty/commons-collections-3.0.tar.gz',
                './thirdparty/commons-logging-1.0.4.tar.gz'],
        action=external_dependencies) 
```

我仍然不相信这会起作用，因为 SCons 可能会假设 url 列表实际上是一个文件名列表，并且它可能会尝试找到它们，你必须对其进行测试。

您尝试的第二个选项实际上不是构建器，而只是一个函数调用，因此依赖项检查可能不会像您期望的那样。至于您提到的虚拟参数，我很确定那将是调用该函数的环境，而不是参数的数量。

# javascript - 同步（阻塞）ajax 调用可以阻塞浏览器的用户界面吗？

> ID：12214573
> 
> 赞同：1
> 
> 时间：2012-08-31T11:38:03.487
> 
> 标签：javascript, ajax

这个问题是面向 jQuery 的，但不一定是唯一的。

**简短的问题：**

**同步ajax调用可以阻止普通按钮被点击吗？**我的测试表明它不会发生，但也许另一个浏览器会出现问题。

**长问题：**

在我问过的另一个问题中，[如何阻止 ajax 调用（我希望它阻止）](https://stackoverflow.com/questions/12213889/how-to-block-on-ajax-call-i-want-it-to-block)，这些家伙说浏览器在某些情况下会阻止。

实际上，即使是 jQuery 的[文档也说：](http://api.jquery.com/jQuery.ajax/)`Note that synchronous requests may temporarily lock the browser, disabling any actions while the request is active.`

我正在尝试：
**1\. 了解如何/为什么会发生这种情况。**
**2\. 评估发生这种情况的可能性。**

根据我的理解，这可能是不正确的：
我想如果我作为开发人员没有在 ajax 调用本身之前构建/更新 UI，那么页面的 UI 会发生“锁定”，这会“阻止”javascript VM，从而延迟 UI 构建/更新。正确与否？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:39:57.873

是的，它会。当同步请求未完成时，浏览器会等待它返回。这种情况发生的概率是 100%，但是如果您的请求返回的速度足够快，它可能不会那么明显。问题是，您不能指望快速返回请求。

这就是 ajax 调用的重点。第**一个**是异步的意思，意思是“不阻塞”。

由于 ajax 调用是异步的，当请求返回时，您的代码可以在任何地方，这意味着您需要一种方法来处理请求返回时的响应。这就是您使用*回调*来处理响应的原因。

你为什么不试试呢？

# java - java - arraylist 检查元素是否在此处退出忽略大小写

> ID：12214576
> 
> 赞同：4
> 
> 时间：2012-08-31T11:38:13.750
> 
> 标签：java

嗨，我有它存储字符串值的数组列表。我想检查列表中是否存在某些字符串。在这里我想忽略区分大小写。

**代码**

```
public static ArrayList< String > arrFoodItems = new ArrayList< String >();

if(arrFoodItems.contains("string"))

        {
            System.out.println("already available in the List.");
        }
        else
        {
            System.out.println("Not available");
        } 
```

它工作正常。但在下面的例子中它失败了。如何在不使用循环的情况下做到这一点。示例：列表包含：“Rice，Chicken，...” 现在您要检查“rice”是否存在于列表中。在这种情况下，我们得到“不存在”。

**不要使用这个**

```
for(int i=0; i < arrFoodItems.size(); i++)
{

   if(arrFoodItems.get(i)..equalsIgnoreCase(string))
   {
        System.out.println("already available in the List.");
   }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T11:39:53.583

`TreeSet`您可以使用忽略大小写的自定义 Comparator将所有字符串放入 a中：

```
List<String> list = Arrays.asList("Chicken", "Duck");
Set<String> set=  new TreeSet<String>(String.CASE_INSENSITIVE_ORDER);
set.addAll(list);
System.out.println(set.contains("Chicken")); //true
System.out.println(set.contains("chicken")); //true 
```

对于更复杂的策略/语言环境，您还可以使用 Collat​​or：

```
final Collator ignoreCase = Collator.getInstance();
ignoreCase.setStrength(Collator.SECONDARY);

List<String> list = Arrays.asList("Chicken", "Duck");
Set<String> set=  new TreeSet<String>(new Comparator<String>() {
    @Override
    public int compare(String o1, String o2) {
        return ignoreCase.compare(o1, o2);
    }
});
set.addAll(list);
System.out.println(set.contains("Chicken"));
System.out.println(set.contains("chicken")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T11:44:15.283

循环遍历元素是 contains 为您所做的，因此如果您不想使用循环，最好不要使用 ArrayList。

在不使用其他集合的情况下，您最好的选择是使用

```
FOUND: {
    for(String item: arrFoodItems) {
       if (item.equalsIgnoreCase(string)) {
          System.out.println(string+" already available in the List.");
          break FOUND;
       }
    }
    System.out.println(string + " not available");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T12:08:06.737

您可以使用 Collections.binarySearch 静态方法，该方法让您提供比较器（在本例中为 String.CASE_INSENSITIVE_ORDER）

```
List<String> list = new ArrayList<String>();
list.add("Joe");
Collections.binarySearch(list, "joe", String.CASE_INSENSITIVE_ORDER); // return 0 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T11:48:57.500

为什么不只写你的`CustomArrayList`然后重写`contains`方法，如下所示。现在您可以使用`CustomArrayList`.`ArrayList`

**例子：**

```
public class CustomArrayList extends ArrayList<String> {
    @Override
    public boolean contains(Object o) {
        String str = (String)o;
        for (String s : this) {
            if (str.equalsIgnoreCase(s)) return true;
        }
        return false;
    }

    @Test
    public static void main(String[] args) {

        List<String> myList=new CostumArrayList();
        myList.add("Amit");

        System.out.println(myList.contains("AMIT"));
        System.out.println(myList.contains("amit"));
    }
} 
```

# javascript - 修改 html 的一个子集并用 jquery 附加它

> ID：12214584
> 
> 赞同：3
> 
> 时间：2012-08-31T11:38:44.583
> 
> 标签：javascript, jquery

我将尝试用简化的代码版本来解释我的问题，我将省略 ajax 的东西。

我想要做的是通过 ajax 检索表单修改一些值并附加它。这应该很容易，但我只是没有让它工作。

我的代码是...

```
 <html>
<head>
    <title>Test Jquery</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var str = "<div><form><textarea></textarea></form></div>"
            $('a#action').on('click',function(e){
                e.preventDefault();
                var result = str;
                var test = $("textarea",result).html("Hello world");

                console.log(test);
                console.log(result);
                $(".sections").append(result);
            });
        });
    </script>​​​​​​
</head>
<body>
<div id="content">
    <a href="#" id="action">go action</a>
<div class="sections">

</div>
</div>
</body>
</html># 
```

该变量`str`应该模拟从服务器下载的表单...点击我想更改

> 价值

的`textarea`和插入`"Hello World"`...

我想看到的是我的 str 变量已修改并附加到部分 div ...

我可以修改子集中的文本区域

```
$("textarea",result).html("Hello world"); 
```

但我不知道如何将其反映到整个结果中......

就像我说的那样，这是一个微不足道的抽象，所以`str`可能会有所不同......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:45:14.557

尝试以下操作：

```
var str = "<div><form><textarea></textarea></form></div>";
$('a#action').on('click',function(e){
  e.preventDefault();
  var result = str;
  var $ajaxForm = $(str);
  $("textarea", $ajaxForm).val("Hello world");
  $ajaxForm.appendTo($(".sections"));
});​ 
```

**[演示](http://jsfiddle.net/ZAJHg/)**。

请注意，`$("textarea",result).html("Hello world")`这在您的示例中不起作用，因为`result`它只是一个字符串；它需要是 DOM 元素或[jQuery](http://api.jquery.com/jQuery/)对象：

> **jQuery( 选择器 [, 上下文] )**
> 
> 选择器 - 包含选择器表达式的字符串
> 
> **context** - 用作上下文的 DOM 元素、文档或 jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:40:43.590

您需要先将结果附加到 DOM。

然后尝试

```
form.find("textarea").val("Hello world"); 
```

# excel - Count occurrences of values or unique values in a data range

> ID：12214585
> 
> 赞同：1
> 
> 时间：2012-08-31T11:38:44.420
> 
> 标签：excel, excel-formula

There's a formula that is so useful to me on [http://office.microsoft.com/en-us/excel-help/count-occurrences-of-values-or-unique-values-in-a-data-range-HP003056118.aspx](http://office.microsoft.com/en-us/excel-help/count-occurrences-of-values-or-unique-values-in-a-data-range-HP003056118.aspx)

It's this:

```
=SUM(IF(FREQUENCY(MATCH(B2:B10,B2:B10,0),MATCH(B2:B10,B2:B10,0))>0,1)) 
```

Which is described on its site as: "Count the number of unique text and number values in cells B2:B10 (which must not contain blank cells)"

My problem is I need it to allow for blank cells interspersed in the range, but just not count those.

Thank you for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:25:33.533

但在链接页面上有公式：

```
=SUM(IF(FREQUENCY(IF(LEN(A2:A10)>0,MATCH(A2:A10,A2:A10,0),""), IF(LEN(A2:A10)>0,MATCH(A2:A10,A2:A10,0),""))>0,1)) 
```

这被描述为：

> 计算单元格 A2:A10 中唯一文本和数值的数量，但不计算空白单元格或文本值 (6)

那有什么问题？它允许有空格吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:22:14.037

Juliusz 发布的公式对我有用，它忽略空白并计算**不同非空白值**的数量（我认为“唯一”一词在描述中被滥用），这是你需要的吗？

公式需要使用 CTRL+SHIFT+ENTER 进行“数组输入”，以便像 { 和 } 这样的花括号出现在公式周围。

给出相同结果的替代公式（不需要数组条目）是

`=SUMPRODUCT((B2:B10<>"")/COUNTIF(B2:B10,B2:B10&""))`

# java - Read Byte Array from surface view?

> ID：12214590
> 
> 赞同：5
> 
> 时间：2012-08-31T11:38:57.980
> 
> 标签：java, android, bytearray, android-camera

Is is possible to read byte array from surface view?

Like in Camera API we have callback from `setPreviewCallback()` here in `onPreviewFrame(byte[])`

we have access of `byte` `array`. So same like can we have something directly from `SurfaceView`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-23T13:02:08.130

或许答案稍后会来。

[PixelCopy](https://developer.android.com/reference/kotlin/android/view/PixelCopy?hl=en)可以`byte[]`从`Surface`

以下是一些示例：

```
mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

PixelCopy.request(mSurface, // which you wanna get byte[]
     mBitmap, // the byte[] in Bitmap
     mCallback,
     mHandler // which Callback will be invoke
); 
```

在`Callback`你可以得到 byte[] from `Bitmap`，就像`Bitmap.copyPixelsToBuffer(...)`

# ruby - 如何在ruby中获取元素的值

> ID：12214593
> 
> 赞同：1
> 
> 时间：2012-08-31T11:39:05.120
> 
> 标签：ruby, testing, element, watir

有人可以让我知道如何提取字段 id='2' 中存在的值，以便我可以在另一个文本字段中使用相同的值。

所以我真正想要的是从下面的标签中只获取值 525XXXXXXX01166，我需要将其传递给其他文本字段以继续测试。但在源代码中没有其他内容。我还附上了来源。

字段 id="2" 值="525xxxxxx01166"

下面是完整的源码

响应得到字段 id="0" value="0110"
field id="2" value="525XXXXXXXXX66"
field id="3" value="000000"
field id="4" value="000000010000"
field id=" 6" value="000000010000"
字段 id="7" value="0831112100"
字段 id="11" value="000213"
字段 id="32" value="550060"
字段 id="33" value="012295 "
字段 id="37" value="123453389112"
字段 id="38" value="103063"
字段 id="39" value="00"
字段 id="41" value="3333489"
字段 id="48 “价值=”F2001S92032844233333212"
field id="49" value="784"
field id="51" value="784"
field id="63" value="SUasdsdGPLA"
响应 - 成功 <-- 0110 000224 33433489

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:16:50.270

这段代码：

```
text = 'response got field id="0" value="525XXXXXXXXX66"'
matcher = text.match(/value="(.+)"/)
puts matcher.captures.first 
```

给你这个结果：

```
525XXXXXXXXX66 
```

遗憾的是，如果您想从多行字符串中提取所有值，则此正则表达式将无法正常工作。为此，它必须进一步修改。但是，对于您描述的场景，这已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:21:35.927

假设您在名为“t”的变量中有文本：

```
row = t.split("\n").detect {|v| v =~ /id\=\"2\"/}
/value\=\"(?<value>[\dX]+)/.match(row)[:value] 
```

将返回：

```
"525XXXXXXXXX66" 
```

# php - How to generate unique 3 or 4 letter alpha strings based on first & last name

> ID：12214594
> 
> 赞同：-1
> 
> 时间：2012-08-31T11:39:07.823
> 
> 标签：php

I need to loop through every one in the DB and give them a unique 3/4 letter stock symbol like code.

I've got roughly 600 names (of people) and want to generate stock symbol like unique codes for them all, but based roughly on the names (like stock symbols).

For example: Dale Cooper could be DCO/DAC/DC, but Darren Cooper should generate a different code as all 600 should be unique.

first_name and last_name are in different columns.

Advice much appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:47:10.300

为了简单起见，它可以用 4 个字母：

```
First letter:  first letter of firstname
Second letter: letter of the alphabet (starting with `A` keeping count)
Third letter:  first letter of lastname
Fourth letter: letter of the alphabet (starting with `A` keeping count) 
```

这样你就有`1 * 26 * 1 * 26 = 676`每个名字的可能性，戴尔库珀或达伦库珀将是这 676 个中的 2 个，即：

```
Dale Cooper    DACA
Darren Cooper  DACB
Douglas Cooper DACC 
```

当第四个字母到达`Z`时，第二个字母得到`B`：

```
Dave Cooper    DACZ
Doctor Cooper  DBCA 
```

等等。

**编辑**

为了使字母代码中的名称更直观，您还可以使用：

```
First letter:  first letter of firstname
Second letter: first letter of lastname
Third letter:  letter of the alphabet (starting with `A` keeping count)
Fourth letter: letter of the alphabet (starting with `A` keeping count) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:53:36.380

只使用mysql：

```
UPDATE people
SET code = CONCAT(
    SUBSTRING(first_name, 1, 1),
    SUBSTRING(last_name, 1, 1),
    SUBSTRING( MD5( CONCAT(first_name, last_name) ), 1, 2)
) 
```

你得到：

*   名字的第一个字母；
*   姓氏的第一个字母；
*   名字+姓氏的前2个字母；

对于这么少的一群人，你不应该有任何冲突。

# windows - Windows 7 File Path Length Limit Error - What can I do?

> ID：12214595
> 
> 赞同：0
> 
> 时间：2012-08-31T11:39:10.057
> 
> 标签：windows, windows-7, path, limit, filepath

In my personal documents I created files, folders and sub folders to organize my work how I would need it to find my documents. Some file names contain empty spaces or given names from applications. Till yet "Windows 7 64 Bit Home" did not complained about any path lengths while I just worked with these files. Now it appeared, that I needed to make a backup. Windows 7 constantly refuses me to copy my work on an external disk, saying that 40000 to long file- and folder names were found. But Windows shows me not which files and folders exactly are involved. To copy a backup Windows asks to "Skip" these files or cancel the entire copy process. Is this normal or do I have a virus? Also deletion of files and folders are refused by windows saying the file name is to long :( I asked in my local computer shop and they said me that "Windows 7 Home" works like a demo software only I shall pay 300 bucks for the "Ultimate Edition" to remove the limit. What do you say? Is there another way to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:16:50.067

我在 Windows 7 中也遇到了类似的问题，通过使用“路径扫描器”，我能够找出超过 255 个字符限制的确切文件夹和文件。然后我在这些文件夹中进行了更改，使它们在这个字符限制范围内。

您可以从此链接查看软件，看看它是否对您有帮助 -

[http://www.parhelia-tools.com/products/pathscanner/PathScanner.aspx](http://www.parhelia-tools.com/products/pathscanner/PathScanner.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T07:56:28.637

我编写了一个小应用程序来解决这个问题并减少 Windows 7 中 PATH 环境变量中不必要的文本。它只是删除重复项并删除不再有效的路径。

你可以在这里试试： [https ://github.com/AsafShochet/Environment-Path-Variable-Minimizer](https://github.com/AsafShochet/Environment-Path-Variable-Minimizer)

# selenium - selecting value in dropdown and verify on page

> ID：12214596
> 
> 赞同：1
> 
> 时间：2012-08-31T11:39:11.523
> 
> 标签：selenium, selenium-rc

I have one dropdown that contains 6 values.

Actual scenario is if you select any value from dropdown then the selected value will appear in next page

for eg: I selected city Mumbai from dropdown, then on next page Mumbai city is selected will appear as text.

I want to verify the selected value is appearing correctly on next page.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:19:15.413

单击选项

```
Select select = new Select(driver.findElement(By.xpath("//path_to_drop_down")));
select.deselectAll();
select.selectByVisibleText("Value1"); 
```

还有更多方法，您可以选择如何定位元素。我建议给每个人命名*并按名称查找元素*

断言存在 -

使用类似的东西

```
public boolean verifyTextInField(String expectedValue, By by) {
    try {
        assertEquals(expectedValue,
                driver.findElement(by).getAttribute("value"));
        System.out.println("Values are equal");
        return true;
    } catch (Error e) {
        verificationErrors.append(e.toString());
        System.out.println("Values are unequal");
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:50:24.477

对于下拉列表中的选择元素，您可以使用 js 执行器：

```
String cssLocator=....
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssLocator+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

然后切换到下拉菜单并切换值：

`String dropdownValue=driver.findElement(By.xpath("..."))).getText().trim();`//类似的东西然后你可以切换到下一页的文本标签

```
String labelValue= driver.findElement(By.xpath("..."))).getText().trim(); 
```

并比较两个stings：dropdownValue 和labelValue

希望这可以帮助你

# vim - Vim、Omni Completion 和 Windows 下的目录乱七八糟

> ID：12214599
> 
> 赞同：1
> 
> 时间：2012-08-31T11:39:24.073
> 
> 标签：vim, vim-plugin, omnicomplete

我在关注这个：http: [//vim.wikia.com/wiki/C++_code_completion](http://vim.wikia.com/wiki/C++_code_completion)

在某些时候，它会说，当您键入 std:: “一个带有建议的框”之类的内容时。

在我的情况下，只要我输入 std:: 我就会在底部的栏中收到一条消息： Omni Completion (^O^N^P) Pattern not found

这也可能是一团糟，因为没有教程解释 Windows 中的情况。

例如：在我可以安装 OmniCompletion 之前，我必须安装 ctags。如何？我不知道。在某些时候，我读到我只需要 Windows 下的 ctags.exe。但是我把它放在哪里？我想把它放在 mingw/bin/ 目录中，因为它已经在路径中。

它似乎有效。虽然当我按 C-12 而不是索引当前文件时，它似乎开始索引我在 Windows 中的整个主目录。

每次我打开一个 .cpp 文件时，它都会说“找不到模式”。

我最终发现如果我通过右键单击特定文件来编辑它，然后从菜单中选择“使用 Vim 编辑”，它就可以工作。相反，如果我从快捷方式启动 Vim 然后打开一个 .cpp 文件，OmniCompletion 会失败。

原因似乎是“用 Vim 编辑”为程序提供了正确的工作目录，但如果我随后打开一个存在于其他地方的文件，OmniCompletion 会停止工作并说它找不到任何东西。

那么，在 Windows 下，是什么告诉 Vim 在哪个目录中操作，以便我可以正确编辑不同的文件，无论它们在哪里，也不管我最初是如何打开 Vim 的？

以及如何运行 ctags 以便它在活动文件所在的当前目录中完成其工作，而不是在它随机喜欢的任何地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:50:20.663

Vim 的工作目录继承自您启动 Vim 的位置，否则默认为您的`$HOME`目录。我不太了解omnicompletion，但听起来你的问题可以通过设置来解决

```
:set autochdir 
```

这意味着 Vim 的工作目录将始终是您正在编辑的文件的目录。

# android - 保存数据并改变方向

> ID：12214600
> 
> 赞同：7
> 
> 时间：2012-08-31T11:39:34.347
> 
> 标签：android, orientation

我有两个活动，我使用`android:configChanges="keyboardHidden|orientation|screenSize"`

```
 @Override
      public void onConfigurationChanged(Configuration newConfig) {
          super.onConfigurationChanged(newConfig);
        setContentView(R.layout.activity_main);
          if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {

          } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {

          }
      } 
```

第二个是纵向到横向的一个积极用途， **但是当方向改变时，活动被加载并且数据丢失**

**如何保存数据并更改活动方向？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T11:47:53.787

如果您有小数据，您可以使用`onSavedInstanceState`和`onRestoreInstanceState`.. 保存和恢复它。有关详细信息，请通过此链接[保存数据](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

但是，如果您有大量数据，那么我必须说，您不应该允许方向更改（这会迫使您的活动重新创建）。您可以通过在清单文件中添加以下行来限制它：

```
android:configChanges="orientation|keyboardHidden" // fixes orientation 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T11:41:04.223

见`onSaveInstanceState(Bundle)`和`onRestoreInstanceState(Bundle)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-22T18:53:15.590

我推荐这篇文章

[http://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html](http://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html)

对于仍在寻找解决此问题的方法的任何人。作者描述了如何使用**Fragment**来保留数据。

确保接听电话

```
setRetainInstance(true); 
```

在`onCreate()`你的片段的方法中！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T11:45:02.180

您应该在下面查看示例应用程序“Multiresolution”，您可以看到“Multiresolution”的代码片段

```
public final class MultiRes extends Activity {

    private int mCurrentPhotoIndex = 0;
    private int[] mPhotoIds = new int[] { R.drawable.sample_0,
            R.drawable.sample_1, R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5, R.drawable.sample_6,
            R.drawable.sample_7 };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        showPhoto(mCurrentPhotoIndex);

        // Handle clicks on the 'Next' button.
        Button nextButton = (Button) findViewById(R.id.next_button);
        nextButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                mCurrentPhotoIndex = (mCurrentPhotoIndex + 1)
                        % mPhotoIds.length;
                showPhoto(mCurrentPhotoIndex);
            }
        });
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putInt("photo_index", mCurrentPhotoIndex);
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        mCurrentPhotoIndex = savedInstanceState.getInt("photo_index");
        showPhoto(mCurrentPhotoIndex);
        super.onRestoreInstanceState(savedInstanceState);
    }

    private void showPhoto(int photoIndex) {
        ImageView imageView = (ImageView) findViewById(R.id.image_view);
        imageView.setImageResource(mPhotoIds[photoIndex]);

        TextView statusText = (TextView) findViewById(R.id.status_text);
        statusText.setText(String.format("%d/%d", photoIndex + 1,
                mPhotoIds.length));
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T11:48:32.423

[您可以通过覆盖公共对象 onRetainNonConfigurationInstance ()](http://developer.android.com/reference/android/app/Activity.html#onRetainNonConfigurationInstance%28%29) 并调用`getLastNonConfigurationInstance()`您的 onCreate 方法来保存任何对象。

```
@Override
    public Object onRetainNonConfigurationInstance() {

    return data;
    }

 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

         data = getLastNonConfigurationInstance();
    } 
```

但是如果你这样做，你必须改变你的清单和代码，所以使用配置更改的正常过程。

与 SavedInstance 方法不同，这仅在活动因配置更改而被终止时保存对象

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T11:46:09.353

该方法是`onSaveInstanceState()`，当用户离开您的活动时系统会调用它。当系统调用此方法时，它会传递`Bundle`将在您的活动被意外销毁时保存的对象，以便您可以向其添加附加信息。然后，如果系统必须在销毁活动实例后重新创建它，它会将相同的`Bundle`对象传递给您的活动`onRestoreInstanceState()`方法以及您的`onCreate()`方法。

参考[http://developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)

# django - Django 删除 GenericForeignKey

> ID：12214603
> 
> 赞同：3
> 
> 时间：2012-08-31T11:39:41.720
> 
> 标签：django, generic-foreign-key, generic-relations

我正在尝试按照[本教程](http://ryanberg.net/blog/2008/jun/24/basics-creating-tumblelog-django/)实施活动提要。

当相应的对象（即评论本身）已被删除时，我想删除一个活动（即已添加评论）。这似乎没有级联。

有没有办法在不添加 GenericRelation 的情况下实现这一点？可以使用 postdelete 信号删除相应的活动。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T14:02:27.167

是的，您可以，但使用[pre_delete 信号](https://docs.djangoproject.com/en/dev/ref/signals/#pre-delete)可能会更好，因为您将能够访问实例 pk。

```
from django.contrib.contenttypes.models import ContentType
from django.db.models.signals import pre_delete
from django.dispatch import receiver

from yourapp.models import Comment, Activity

@receiver(pre_delete, sender=Comment)
def pre_delete_receiver(sender, instance,**kwargs):
    # code that delete the related objects
    # As you don't have generic relation you should manually
    # find related actitities
    ctype = ContentType.objects.get_for_model(instance)
    Activity.objects.filter(content_type=ctype, object_id=instance.pk).delete() 
```

# php - 将 MySQL 表的列作为单独的 JSON 对象读取

> ID：12214607
> 
> 赞同：0
> 
> 时间：2012-08-31T11:39:52.787
> 
> 标签：php, json, multidimensional-array

我正在从这样的 MySQL 表中读取数据：

```
while($row=mysql_fetch_assoc($result))
{
   $tmp[]=$row;
} 
```

它将整行作为数组中的单个项目读取`tmp`，但我希望将单个列的所有值放在一个单独的数组中。例如，如果我的桌子是：

```
 -------------------
      Honda  Suzuki  BMW
     -------------------
      Accord  Alto   abc
      Acty    Baleno xyz 
```

我明白了：

```
 [{"Honda":"Accord","Suzuki":"Alto","BMW":"abc"},
      {"Honda":"Acty","Suzuki":"Baleno","BMW":xyz"}] 
```

但我想要这个：

```
 [ Honda:{Accord,Acty},
       Suzuki:{Alto,Baleno},
       BMW:{abc,xyz}
     ] 
```

有人可以告诉我应该如何构造这样的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:46:36.957

我怀疑你的意思是

```
{ "Honda":["Accord","Acty"],
  "Suzuki":["Alto","Baleno"],
  "BMW":["abc","xyz"]
} 
```

你会得到的

```
$tmp=array();
while($row=mysql_fetch_assoc($result))
  foreach($row as $name=>$value)
    //Next 2 lines updated after input from comment
    if (!$value) continue;
    else if (!isset($tmp[$name])) $tmp[$name]=array($value);
    else $tmp[$name][]=$value;
$tmp=json_encode($tmp); 
```

# asp.net-mvc-3 - 如何在 MVC3 中显示数组？

> ID：12214620
> 
> 赞同：0
> 
> 时间：2012-08-31T11:40:17.770
> 
> 标签：asp.net-mvc-3

你好朋友我想列出我的数组，我的数据来自 Web 服务，所以我不能使用 Html.DisplayFor(model=>model.) 这是我的代码

```
@using icerik.TahakkukServices

@{
    ViewBag.Title = "Deneme";
    Layout = "~/Views/Shared/_Layout5.cshtml";
}

@{
    TahakkukServicesClient client = new TahakkukServicesClient();
    client.ClientCredentials.UserName.UserName = "service_test";
    client.ClientCredentials.UserName.Password = "...";
    client.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
    MakbuzList[] liste = client.GetMakbuzListe(2);

}

 @foreach (var item in liste)
 {

Html.DisplayFor(item.Adi) 

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:18:28.320

首先，您不应该从视图中调用 Web 服务。我想你可能正在做测试。我建议您创建一个负责服务调用的 BL 类，最重要的是，我强烈建议您创建一个视图模型类，该类将复制您需要在视图中显示的属性。

不要在视图中直接使用 Web 服务返回的实体，这真的很糟糕。正如我所说，创建视图模型并创建您需要在视图中使用的必要属性。在复杂的情况下，您可以使用**AutoMapper**之类的工具来映射 Web 服务实体和视图模型之间的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:07:10.463

这类似于这个问题：[@Html.DisplayFor 语法是什么？](https://stackoverflow.com/questions/6365633/what-is-the-html-displayfor-syntax-for) 您需要为任何类型的 .Adi 创建显示模板。

# javascript - 在Mozilla中捕获mousedown事件并获取clientX和clientY

> ID：12214621
> 
> 赞同：1
> 
> 时间：2012-08-31T11:40:21.850
> 
> 标签：javascript

```
if (browserName == "Firefox")
{
   if (window.captureEvents(Event.MOUSEDOWN))
   {
      window.mousedown = load;
   }
}

function load(e)
{
   alert(e.clientX);
} 
```

我想在画布上鼠标按下并获取`clientX`和`clientY`. 我正在按照上述方式进行操作，但没有得到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:53:32.223

这是有关如何获得此功能的一个很好的示例。 [http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/](http://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/)

Here is a fiddle for that play arround。 [http://jsfiddle.net/straeger/tJ3nG/](http://jsfiddle.net/straeger/tJ3nG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:45:00.837

更改`window.mousedown = load;`为`window.onmousedown = load;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:45:39.850

这可能是因为[`window.captureEvents`](https://developer.mozilla.org/en-US/docs/DOM/window.captureEvents)已经过时了。改为使用`addEventListener`。

您的活动将如下所示：

```
document.body.addEventListener("mousedown", load, false); 
```

# php - 单击提交按钮时防止页面重新加载并调用jquery函数

> ID：12214624
> 
> 赞同：2
> 
> 时间：2012-08-31T11:40:26.883
> 
> 标签：php, jquery, ajax, reload

表单标签内容是：-

```
<form method="post" action="<?php echo $_SERVER['PHP_SELF'] ;?>" > 
```

按钮标签内容是：-

```
<input type="submit" id="submit_button" value="Submit"> 
```

j-query 函数是

```
$('#submit_button').click(function ()
            {        
                alert("button clicked");
                buildingVal = $("#building").val();
                levelVal = $("#level").val();
                data = 'building=' + buildingVal.val() + 'level=' + levelVal.val();
                $.ajax(
                {

                    url: "res.php", 
                    type: "POST",
                    data: data,     
                    success: function (data) {
                    }
                });
                return false;
            }); 
```

页面正在重新加载，文本框和下拉菜单中的数据正在消失。

但是如果我在 jquery 中只有这个代码： -

```
$('#submit_button').click(function ()
            {        
                alert("button clicked");
 return false;
            }); 
```

然后页面不会重新加载并且值保持不变。

请您告诉我如何防止页面重新加载？

同样在 ajax 调用中，我将调用一个页面 res.php，它将返回一个表，

代码中的内容是什么

```
success: function (data) {
                    } 
```

请帮忙...

编辑：

我正在使用代码将数据传递到 res.php 页面

```
data = 'building=' + buildingVal.val() + 'level=' + levelVal.val(); 
```

然后使用

```
$.ajax(
                {

                    url: "res.php", 
                    type: "POST",
                    data: data,     
                    success: function (data) {
                        $('#npc').html(data);
                    }
                }); 
```

在 res.php 页面中

如何从传递的单个值中提取两个值

我尝试使用以下代码

```
$building = mysql_real_escape_string($_GET['building']);
$level = mysql_real_escape_string($_GET['level']); 
```

但它不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:48:27.743

您在 jQuery 代码中有一个错误：

错误：

```
buildingVal = $("#building").val();
levelVal = $("#level").val();
data = 'building=' + buildingVal.val() + 'level=' + levelVal.val(); 
```

解决方案：

```
buildingVal = $("#building");
levelVal = $("#level");
data = 'building=' + buildingVal.val() + '&level=' + levelVal.val(); 
```

完整代码js：

```
$('#submit_button').click(function () {        

   var 
       buildingVal = $("#building"),
       levelVal = $("#level"),
       data = 'building=' + buildingVal.val() + '&level=' + levelVal.val();

   $.ajax({
      'url': 'res.php', 
      'type': 'POST',
      'data': data,     
      'success': function (data) {
      }
   });

   return false;

}); 
```

**编辑**

如果您打算使用此表单通过 ajax 发送数据，最好的方法是取消“提交”表单事件：

HTML：

```
<form id="myform" method="post" action="<?php echo $_SERVER['PHP_SELF'] ;?>" >
...
</form> 
```

JS：

```
$('#myform').bind('submit', function(event) {

     return false;
});

$('#submit_button').bind('click', function () {        

   var 
       buildingVal = $("#building"),
       levelVal = $("#level"),
       data = 'building=' + buildingVal.val() + 'level=' + levelVal.val();

   $.ajax({
      'url': 'res.php', 
      'type': 'POST',
      'data': data,     
      'success': function (data) {
      }
   });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:42:52.807

最好的方法是首先不使用`submit`按钮。

```
<input type="button" id="myButton" value="Submit">

$('#myButton').on('click', function(){
   //do ajax
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:45:09.837

因此，为了让提交按钮不以默认行为提交您的页面，请执行以下操作：

```
$('#submit_button').click(function (event) {        
                event.preventDefault();
                buildingVal = $("#building").val();
                levelVal = $("#level").val();
                data = 'building=' + buildingVal.val() + 'level=' + levelVal.val();
                $.ajax(
                {

                    url: "res.php", 
                    type: "POST",
                    data: data,     
                    success: function (data) {
                    }
                });                
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:43:25.703

您需要防止点击事件中的默认行为：

```
$('#submit_button').click(function (event)
{
    event.preventDefault();
    alert("button clicked");
    return false; // Not truly necerssary
}); 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

# ruby-on-rails - 提交表单时忽略字段

> ID：12214626
> 
> 赞同：7
> 
> 时间：2012-08-31T11:40:28.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有一个制造车辆的表格。车辆模型最初如下所示：

```
class Vehicle < ActiveRecord::Base
  attr_accessible :trim_id

  belongs_to :trim
end 
```

您会注意到没有`make_id`或`model_id`列；这些不是必需的，因为装饰属于模型，模型属于品牌，因此不需要将它们存储在车辆模型中。

问题出现在车辆表格上 - 我有一些链接选择，我可以在其中选择品牌，然后是模型，然后是装饰。当我创建一辆新车时，以下代码可以正常工作：

```
<%= select("", "", Make.all.collect {|p| [ p.value, p.id ] }, {:prompt => 'Select Make'}, {} %>
<%= f.select("", "", options_for_select([]), {:prompt => 'Select Model'}, {} %>
<%= f.select(:trim_id, options_for_select([]), {:prompt => 'Select Trim'} %> 
```

正如您将注意到的，品牌和型号选择没有表单参数，因此被忽略。这工作正常，车辆被正确保存。

当我想编辑这辆车时出现了困难；因为品牌和型号只是虚拟选择链接到装饰，它们最初设置为默认值，而不是正在编辑的车辆的品牌和型号。结果，我将模型更新为：

```
class Vehicle < ActiveRecord::Base
  attr_accessible :trim_id

  belongs_to :trim
  has_one :model, :through => :trim
  has_one :make, :through => :model
end 
```

并将表格更新为：

```
<%= f.select(:make, Make.all.collect {|p| [ p.value, p.id ] }, {:prompt => 'Select Make'}, {} %>
<%= f.select(:model, options_for_select([]), {:prompt => 'Select Model'}, {} %>
<%= f.select(:trim_id, options_for_select([]), {:prompt => 'Select Trim'} %> 
```

但是，正如预期的那样，这会导致`Can't mass-assign protected attributes: make, model`，因为 make 和 model 不是 attr_accessible （并且在任何情况下 make 和 model 列都不存在）。

我的问题是：有没有办法在提交新的车辆表格时忽略这些字段，但在编辑车辆时仍然让他们选择正确的值？

谢谢！

编辑：根据 Beerlington 的回答，我已将我的`create`操作更新如下：

```
def create
    @sale = Sale.new
    current_ability.attributes_for(:new, Sale).each do |key, value|
      @sale.send("#{key}=", value)
    end
    @sale.update_attributes(params[:sale].except("date"))
    authorize! :create, @sale
    if @sale.save
      redirect_to @sale, :notice => "Successfully created sale."
    else
      render :action => 'new'
    end
end 
```

您会注意到我在这里尝试排除“日期”（也尝试过：日期） - 这是为了使用非嵌套属性进行测试。

但是，我发现该日期仍在提交中 - 任何人都可以使用 Hash#except 协助完成完整的控制器操作吗？

编辑 2：我已将 Beerlington 的答案标记为正确，因为它回答了原始问题 - 我在这里提出了一个后续问题：[在生成 mass_assignment 错误之前使用 Hash#exclude 排除控制器操作中的嵌套表单字段？](https://stackoverflow.com/questions/12217641/excluding-nested-form-fields-in-controller-action-with-hashexclude)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T12:01:40.237

[您可以使用Hash#except](http://api.rubyonrails.org/classes/Hash.html#method-i-except)删除不需要的键：

```
@vehicle.update_attributes(params[:vehicle].except(:make, :model)) 
```

# javascript - 使用 JavaScript 获取隐藏的 Django 字段

> ID：12214627
> 
> 赞同：1
> 
> 时间：2012-08-31T11:40:32.690
> 
> 标签：javascript, django

在我的表单中，我有一个隐藏的 FloatField：

```
test         = forms.FloatField( widget=forms.HiddenInput()) 
```

Django 生成以下 html：

```
<input type="hidden" name="test_set-0-test" id="id_test_set-0-test" /> 
```

我想用 JavaScript 默默地填充这个字段：

```
document.getElementById('id_test_set-0-test').value = X 
```

但是不知道Django是否会一直生成相同的id“id_test_set-0-test”？

有没有更好的方法通过 id 在 JavaScript Django 元素中查找？

或者也许可以在 Django 后端强制执行 id ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:48:15.723

您可以手动设置隐藏字段的 ID 属性。[文档](https://docs.djangoproject.com/en/1.4/ref/forms/widgets/#django.forms.Widget.attrs)

```
test = forms.FloatField( widget=forms.HiddenInput(attrs={'id':'some-custom-test-id'})) 
```

当然，这仅在页面上有此表单的一个实例时才有效。您也可以通过此方法手动设置类属性，然后选择所有隐藏字段并随意使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:46:47.587

如果此字段是表单集中的表单的一部分，并且您使用标准 Django 呈现表单集的方式，那么是的，Django 将自动控制 ID。

除了 .之外，还有其他方法可以访问此元素`id`。您可以通过 css 类或它在 DOM 中的位置、这些属性的组合或元素上的其他属性来选择元素，例如`data-[your-property-here]`

如果 ID 属性是动态的，在表单集的情况下，我会通过它在 dom 中的位置来选择元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:44:21.677

Django 总是生成相同的 id 不用担心

我认为这只是我知道只有jquery的更好方法，我很想获得像

```
 $('#id_test_set-0-test').val(); 
```

你正在做的方式是正确的

# android - 将任何语言的语音转换为Android中的文本

> ID：12214628
> 
> 赞同：2
> 
> 时间：2012-08-31T11:40:36.107
> 
> 标签：android, speech-recognition, speech-to-text

我已经看到了一些链接，如[http://techtalk-java.blogspot.in/2012/01/how-to-implement-voice-android.html](http://techtalk-java.blogspot.in/2012/01/how-to-implement-voice-android.html)但它们只转换含义完整的单词，如 Hello 或 Good Morning 等。

但是，如果我说任何人的名字，那么它就无法做到这一点。就像我发音“Salman Khan”一样，它给了我“我的骗局”。

那么如何将任何语音转换为文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:39:19.387

您将语音转换为特定单词的文本，因为您的程序从哪里获取单词是有限的，或者很少有单词被硬编码。由于您的 Salman Khan 不在您的单词列表中，因此您的程序显示的单词与它非常相似。为了获得更好的结果，传递更多的单词，您将获得更多的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:43:33.450

可能这是有帮助的。 [http://www.makeuseof.com/tag/free-hands-speechtotext-android/](http://www.makeuseof.com/tag/free-hands-speechtotext-android/)

# windows - 在 Windows 7 上运行的平板电脑是否有 imei 或唯一标识符？

> ID：12214634
> 
> 赞同：0
> 
> 时间：2012-08-31T11:41:14.903
> 
> 标签：windows, tablet

你好，我为我糟糕的英语道歉。我必须为在 windows 7 下运行的平板电脑做一个应用程序。公司拥有的每个员工都有自己的平板电脑。所以我需要的是一个 imei 或平板电脑的唯一标识符，以便将每个员工与他的平板电脑相关联。如果它有我怎么能找到它。非常感谢。我在 C# 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:43:27.970

（无线，可能在平板电脑上）网卡 MAC 地址通常被认为是足够唯一的。

# php - JQuery Calendar(http://arshaw.com/fullcalendar/) :禁用已过的日期

> ID：12214637
> 
> 赞同：-1
> 
> 时间：2012-08-31T11:41:25.470
> 
> 标签：php, jquery, fullcalendar

我正在使用 jquery 日历来显示我的日历，现在我正在尝试禁用已过日期的日历

不幸的是，我找不到任何东西可以做到这一点？

请帮我看看是否可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:47:57.000

设置 minDate 选项如下

```
minDate: new Date() 
```

在 datepicker 函数调用中

那应该工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:31:21.767

如果不使用 Jquery，您可以使用此功能（尽管我建议使用 jquery 更好的解决方案）

```
function checkdate(){
       var myDate = new Date(document.frm.date.value);
       var today = new Date();
       if (myDate<today){
         alert('You can not enter future date')
         return false;
       }
       return true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:01:53.400

在 fullcalender.js 中搜索这一行

```
cell.addClass('fc-other-month'); 
```

将其更改为

```
cell.addClass('fc-other-month');
if (date < new Date())
{
    $(cell).attr('disabled', 'disabled');
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T12:13:31.650

尝试

```
$(function(){
    $("#datepicker").datepicker({showOn: "both", minDate: 0});
}); 
```

使用这个你不会在你的日期选择器中通过日期......:)

# php - 如何使用 PHP 中的 url 保护我的图像和文件夹不被直接访问？

> ID：12214650
> 
> 赞同：1
> 
> 时间：2012-08-31T11:42:28.007
> 
> 标签：php, javascript

当我们输入文件/图像的路径时，请帮助我避免直接​​访问..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:43:40.590

将您的图像放在 web 文件夹之外并使用 php.ini 提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:48:53.343

对于要防止直接访问的文件夹，您可以将**目录列表**设置为**false 。**在您的主机面板中，有一个设置此参数的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:54:19.650

如果您使用的是 cPanel，请使用“ **Hotlink Protection** ”。热链接保护可防止其他网站直接链接到您网站上的文件。您可以通过指定扩展来阻止直接访问。您可以添加 jpg、png、gif 等。对于这个问题。

这是[教程](https://www.cpanel.net/media/tutorials/hotlink_lo.htm)。

[https://www.cpanel.net/media/tutorials/hotlink_lo.htm](https://www.cpanel.net/media/tutorials/hotlink_lo.htm)

# jquery - jQuery 1.8 查找事件处理程序

> ID：12214654
> 
> 赞同：21
> 
> 时间：2012-08-31T11:43:06.807
> 
> 标签：jquery, event-handling, jquery-1.8

如何在 jQuery 1.8+ 中的对象上查找事件处理程序？

```
var func = function(){ alert(1); };
var obj = $('#obj');
obj.on("click", func);
// obj.data('events') is undefined 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-31T11:45:17.183

[使用jQuery 内部](http://api.jquery.com/jQuery.data/)的 data 函数。

在以前的版本中，您可以像其他数据一样调用它：

```
obj.data('events'); 
```

在 jQuery 1.8 中，[这种直接访问被删除了](http://bugs.jquery.com/ticket/10589)，所以在最近的版本中你必须这样称呼它：

```
$._data(obj[0], "events") 
```

您可以通过在此小提琴中打开控制台来查看它的实际效果：http: [//jsfiddle.net/8TpeP/2/](http://jsfiddle.net/8TpeP/2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-07T16:32:35.657

要在 jQuery 1.8+ 中查找元素的事件处理程序，您必须这样做：

`$._data($("YOUR-SELECTOR-HERE").get(0), "events")`

# java - 使用类加载器在 java 程序中运行可执行 jar 文件

> ID：12214678
> 
> 赞同：3
> 
> 时间：2012-08-31T11:44:21.150
> 
> 标签：java, jar, classloader, executable-jar

我听说您可以使用 Process 或使用 ClassLoaders 运行其他 java 文件。

我有一个可执行的 jar 'test.jar' 和一个名为`Test`.

我找到了一种使用 Process 运行的方法。我需要知道如何使用 ClassLoaders。

```
Process p = Runtime.getRuntime().exec("java -jar test.jar");
BufferedInputStream bis = new BufferedInputStream(p.getInputStream());
synchronized (p) {
   p.waitFor();
}
int b=0;
while((b=bis.read()) >0){
   System.out.print((char)b);    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:59:12.030

一些让你开始的代码，基本上就是@Felipe所说的。

请记住，这并不完全相同。你没有产生一个新进程，只是一个新线程；您可能会遇到一些巨大的类加载问题；`System.exit()`文件内部之类的东西`Test.jar`也会导致容器程序终止，等等。

```
File f = new File("Test.jar");
ClassLoader cl = new URLClassLoader(new URL[] { f.toURI().toURL() }, null);
final Class<?> claxx = cl.loadClass("my.package.Test");
final Method main = claxx.getMethod("main", String[].class);

Thread th = new Thread(new Runnable() {
    @Override
    public void run() {
        try {
            main.invoke(claxx, new Object[] { new String[] { "Param1", "Param2" } });
        } catch (Throwable th) {
            // TODO
        }
    }
});

th.setContextClassLoader(cl);
th.start();

th.join(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:59:47.053

基本方法是：

*   创建类加载器，
*   阅读清单以找到入口点类
*   加载入口点类，
*   使用反射来获取它的`public static void main(String[])`方法，并且
*   `main`从新线程调用该方法，传递命令的命令行参数。

在这种特殊情况下，问题在于设置 System.in 和 System.out 流，以便您可以与在同一 JVM 中运行的“子应用程序”通信。问题是“子应用程序”期望 System.out 是它写入输出的流，并且“父应用程序”将从中读取。但是“父应用程序”期望 System.out 成为控制台（或其他）的输出流。这是行不通的，因为 System.in/out/err 是类字段，不可避免地对两个“应用程序”具有相同的值。

解决方案是将父应用程序类的代码更改为不使用 System.in/out/err 字段。在“父级”调用`main`子级上的方法之前，它必须使用`System.setOut(...)`将其设置为将写入缓冲区的自定义输出流实例。然后，您需要一个匹配的输入流实例，“父”可以从...中读取来代替`bis`您的代码。

您需要解决的另一件事是“子”应用程序调用`System.exit()`. 这将产生对父母拔掉插头的不幸影响。

还有各种各样的其他复杂性，比如清理线程和“孩子”创建的其他东西。其中一些基本上是无法解决的，除非您的 JVM 实现了 Isolates JSR（主流 JVM 都没有这样做，AFAIK）。

简而言之，在一般情况下这样做真的很难，而且有些事情你根本无法完全正确。除非您可以消除/避免这些问题，否则实现替代入口点和替代通信方式要简单得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:52:39.427

您可以使用类[java.net.URLClassLoader](http://docs.oracle.com/javase/6/docs/api/java/net/URLClassLoader.html)。您必须实例化 URLClassLoader，传递所需 JAR 的 URL（可以是文件 URL）。然后你可以使用这个类加载器来加载带有 main 方法的类。URLClasLoader.loadClass() 方法将返回代表已加载类的 Class 实例。这样，您可以通过反射实例化它并进一步调用它。您必须直接调用 main() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T12:09:14.440

此代码可能会帮助您：

```
import java.io.File;
import java.lang.reflect.Method;
import java.net.URL;
import java.net.URLClassLoader;
import java.util.ArrayList;
import java.util.List;

public class Bootstrap {

public static void main(String[] args) throws Exception {

    /*
        Assume your application has a "home" directory
        with /classes and /lib beneath it, where you can put
        loose files and jars.

        Thus,

        /usr/local/src/APP
        /usr/local/src/APP/classes
        /usr/local/src/APP/lib
     */

    String HOME = "/usr/local/src/YOURAPP";
    String CLASSES = HOME + "/classes";
    String LIB = HOME + "/lib";

    // add the classes dir and each jar in lib to a List of URLs.
    List urls = new ArrayList();
    urls.add(new File(CLASSES).toURL());
    for (File f : new File(LIB).listFiles()) {
        urls.add(f.toURL());
    }

    // feed your URLs to a URLClassLoader!
    ClassLoader classloader =
            new URLClassLoader(
                    urls.toArray(new URL[0]),
                    ClassLoader.getSystemClassLoader().getParent());

    // relative to that classloader, find the main class
    // you want to bootstrap, which is the first cmd line arg
    Class mainClass = classloader.loadClass(args[0]);
    Method main = mainClass.getMethod("main",
            new Class[]{args.getClass()});

    // well-behaved Java packages work relative to the
    // context classloader.  Others don't (like commons-logging)
    Thread.currentThread().setContextClassLoader(classloader);

    // you want to prune the first arg because its your main class.
    // you want to pass the remaining args as the "real" args to your main
    String[] nextArgs = new String[args.length - 1];
    System.arraycopy(args, 1, nextArgs, 0, nextArgs.length);
    main.invoke(null, new Object[] { nextArgs });
}

} 
```

从[这里](http://blog.markturansky.com/archives/21)得到。

# django - 在保存到存储之前正确调用处理对象字段

> ID：12214683
> 
> 赞同：0
> 
> 时间：2012-08-31T11:45:00.023
> 
> 标签：django

情况是这样的：我有一个包含 CharField 文本的模型。此文本应在存储对象之前进行处理。在 save() 方法中进行此处理似乎很自然，在模型中覆盖它。

我怎样才能在保存之前进行这个大处理？可能正在调用进行处理并返回对象的新字段的外部 API？这是 save() 方法中的声音吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:18:19.843

您可以覆盖`save`模型的方法。参考：[覆盖预定义的模型方法](https://docs.djangoproject.com/en/dev/topics/db/models/#overriding-predefined-model-methods)

记得把`super(..)`数据保存到数据库中。

如果您正在处理提交到表单的数据，更好的方法是`clean`使用该字段的方法。参考[表格验证](https://docs.djangoproject.com/en/dev/ref/forms/validation/)

# javascript - 在 javascript 中使用正则表达式来剪切子字符串

> ID：12214685
> 
> 赞同：0
> 
> 时间：2012-08-31T11:45:04.573
> 
> 标签：javascript, regex

有一些字符串

```
"string numbe1 fdsf gfdgfdgf (value1)"
"string numbe2 fdsf gfdgfdgf (value2)"
"string numbe3 fdsf gfdgfdgf (value3)"
"string numbe5 fdsf gfdgfdgf (value1)"
"string numbe5 fdsf gfdgfdgf (value2)" 
```

`(valueN)`可以是`(value1)`或`(value2)`或`(value3)`。我需要使用 javascript 正则表达式从原始字符串中删除它。所以 newString 一定是`string numbe1 fdsf gfdgfdgf`

这是我所做的（并且没有按我的意愿工作）

```
var newString = originalString.replace(/(value1)|(value2)|(value3)/g,"") ; 
```

它返回`"1 ()"`。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:47:38.727

你需要转义括号，并且你有一个额外的`.`权利`replace`

```
"string numbe5 fdsf gfdgfdgf (value2)".replace(/\(value[1-3]\)/, '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:49:48.947

尝试使用

`var newString = originalString.replace(/\(value\d\)/g,"") ;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:51:53.003

尝试以下操作：

```
> var s = "string numbe1 fdsf gfdgfdgf (value1)";
> s.replace(/^(.*) \(value[1-3]\)$/, '$1');
"string numbe1 fdsf gfdgfdgf" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:53:11.613

我会使用这个正则表达式：

```
"string numbe5 fdsf gfdgfdgf (value2)".replace(/ \(value[123]\)/, '') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T11:54:07.897

不完全可扩展，但如果您的字符串格式*始终*相同，您可以这样做：

```
var str = "string numbe1 fdsf gfdgfdgf (value1)";
str = str.slice(0, str.length-8));​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T12:19:39.393

代码有错误，使用下面给出的代码

```
<script>
function myFunction()
{
var str="string numbe1 fdsf gfdgfdgf (value2)"; 
var n=str.replace(/(\(value1\)|\(value2\)|\(value3\))/g," ");
alert(n);
}
</script> 
```

# javascript - 测试 iFrame 的 location.href 是否在 jasmine 单元测试中设置

> ID：12214689
> 
> 赞同：2
> 
> 时间：2012-08-31T11:45:17.253
> 
> 标签：javascript, iframe, browser, jasmine, chutzpah

任何人都知道为什么以下单元测试没有通过？

```
describe("just a test", function () {
    it("should set the iframe location", function () {

        $('body').append('<iframe id="myiframe" name="myiframe"</iframe>');

        expect(window['myiframe'].location.href).toEqual('about:blank');

        window['myiframe'].location.assign('about:history');
        expect(window['myiframe'].location.href).toEqual('about:history');
    });
}); 
```

这只是简化的代码，试图找出真正的测试为什么不起作用——我不担心清理或任何事情。

第二个期望失败。有没有理由像这样更改 iframe 位置不起作用？

（我正在使用 Chutzpah v1.4.2 运行测试，包括 Visual Studio 插件和命令行。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T21:50:39.153

此测试失败的原因有很多：

*   尝试在`<iframe>`标签中加载 'about:history' 至少会在 Firefox 和 Chrome 中导致异常（并且可能会在 Chutzpah 下的 PhantomJS 中这样做）。
*   尝试加载 jasmine 运行位置以外的其他域将不起作用，因为您无法再访问 href 属性。这是由于浏览器的跨域安全限制；Firefox 说 ' `Error: Permission denied to access property 'href'`'，而 Chrome 说 ' `Unsafe JavaScript attempt to access frame with URL`'。框架将显示适当的坚韧。
*   即使您加载与 testRunner 位于同一域中的 URL，href 也不会立即反映该更改，第二个期望将失败（href 仍将等于 'about:blank'）直到 iframe 已加载，这是方式在您的测试已经执行之后。

以下修改后的代码使用 Jasmine`waitsFor()`并`runs()`解决最后一个问题。它将等待 1000 毫秒以满足条件，从而`iframe`完成加载。我将您的原始规范留在了 wait() 块中，但是如果超时，waitsFor 也会失败。

```
describe("just a test", function () {
  it("should set the iframe location", function () {
    $('body').append('<iframe id="myiframe" name="myiframe"</iframe>');
    expect(window['myiframe'].location.href).toEqual('about:blank');

    window['myiframe'].location.assign('about:');

    waitsFor(function(){
      return window['myiframe'].location.href == 'about:'
    },1000);
    runs(function(){
      expect(window['myiframe'].location.href).toEqual('about:');
    });
  });
}); 
```

请注意，我还使用了“about:”（没有“空白”），这是我知道的唯一一个不会引发异常的 -other- URL。但是，使用其他东西是个好主意，也许是同一域中的一对静态夹具文件。

# stream - gstreamer可以播放vlc加密的rtsp mpeg2流吗？

> ID：12214690
> 
> 赞同：1
> 
> 时间：2012-08-31T11:45:24.817
> 
> 标签：stream, gstreamer, rtsp, vlc, encryption

我有一个加密的 mpeg2 流，例如 vlc 生成的 rtsp://10.91.1.13:8554/enc.ts。使用 vlc，我可以使用 ts-csa-ck= 选项对其进行解密，从而进行播放。

是否有可能使用 gstreamer 播放此类加密流？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:40:19.440

没有AFAIK。没有插件可以直接为您执行此操作。您将不得不编写自己的插件来进行解密。

# php - 如何在不先声明变量的情况下从函数输出的数组中返回单个值？

> ID：12214697
> 
> 赞同：1
> 
> 时间：2012-08-31T11:45:54.693
> 
> 标签：php, arrays

假设我有这个：

```
function data() {
    $out['a'] = "abc";
    $out['b'] = "def";
    $out['c'] = "ghi";
    return $out;
} 
```

我可以通过将数据声明为变量来输出数据，然后使用数组索引来回显它：

```
$data = data();
echo $data['a'];
echo $data['b'];
echo $data['c']; 
```

但是，我正在调用与其他函数内联的函数，并且我试图避免必须先声明一个变量。例如，我想做这样的事情：

```
echo data()[0]; //pulls first value in array without declaring it as a variable first. This needs to be variable i.e. data()[1] data()[2] etc. 
```

或者更具体地说，我实际上是在尝试作为一个班级来做：

```
$traverseXML->getData("Route", "incoming", "field", "value")[0] 
//getData() returns an array, I'm trying to get a single value. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:54:28.897

我个人会做这样的事情

```
<?php 
function data($key = false, $default = 'not found') {
    $out['a'] = "abc";
    $out['b'] = "def";
    $out['c'] = "ghi";
    if($key)
    {
        if(isset($out[$key]))
            return $out[$key];
        else
            return $default;
    }       

    else
        return 'empty';
}
 ?>

 <?= data('a') ?> 
```

# php - 广播 fsockopen

> ID：12214698
> 
> 赞同：1
> 
> 时间：2012-08-31T11:45:58.110
> 
> 标签：php, xml

有什么其他东西可以让shoutcasts 脚本读取它的XML 文件吗？

我目前有：

```
<?php
$open = fsockopen("62.75.171.171","9992"); 
if ($open) { 
fputs($open,"GET /7.html HTTP/1.1\nUser-Agent:Mozilla\n\n"); 
$read = fread($open,1000); 
$text = explode("content-type:text/html",$read); 
$text = explode(",",$text[1]); 
} else { $er="Connection Refused!"; } 
?> 
</div> 
<?php 
if ($text[1]==1) { $state = "Up"; } else { $state = "Down"; } 
if ($er) { echo $er; exit; } 
echo "<font face=verdana size=1> 
Listeners: $text[0] of $text[3] ($text[4] Unique)<br> 
Listener Peak: $text[2]<br> 
Server State: <b>$state</b><br> 
Bitrate: $text[5] Kbps<br> 
Current Song: $text[6]
Current DJ: $text[13]
</font>";?> 
<?php
echo "<IMG src='http://thepilotslife.com/images/shows/{$text[13]}.png'></img>";
?> 
```

但是给了我这些错误：

```
Notice: Undefined variable: er in C:\xampp\htdocs\stats.php on line 13

Notice: Undefined offset: 13 in C:\xampp\htdocs\stats.php on line 20
Listeners: 0 of 150 (0 Unique)
Listener Peak: 1
Server State: Up
Bitrate: 128 Kbps
Current Song: Swedish House Mafia - Greyhound Current DJ: 
Notice: Undefined offset: 13 in C:\xampp\htdocs\stats.php on line 23 
```

我做错了什么，还有其他方法可以做到这一点，因为 fsockopen 被大多数主机阻止。

# java - 正确地将硬编码的字节 [] 从 JNI 返回到 Java

> ID：12214707
> 
> 赞同：-3
> 
> 时间：2012-08-31T11:46:44.093
> 
> 标签：java, android, java-native-interface, native

我想在 JNI 中硬编码一个 16 字节的数组并用一个方法返回它。

这不起作用

```
static jbyteArray JNICALL getKeyBytes(JNIEnv *env, jobject thiz) 
{
    F_LOG;
    Mutex::Autolock _m(sLock);

    jbyteArray result;  
    jbyte* resultType = new jbyte[16];  
    result = (*env)->NewByteArray(env, 16);  //line 214
    resultType = {52, 14, 25, 32, 75, 83, 35, 89, 40, 69, 35, 73, 84, 82, 35, 30};
    (*env)->SetByteArrayRegion(env, result, 0, 16, resultType);
    delete [] resultType;

    return result;
} 
```

我收到以下错误

> NativeCodeCaller.cpp:214:17：错误：“->”的基本操作数具有非指针类型“_JNI​​Env”
> 
> NativeCodeCaller.cpp:215:78：警告：扩展初始化列表仅适用于 -std=c++0x 或 -std=gnu++0x
> 
> NativeCodeCaller.cpp:215:78：错误：无法在赋值中将“括号括起来的初始化列表>”转换为“jbyte*”
> 
> NativeCodeCaller.cpp:216:8：错误：“->”的基本操作数具有非指针类型“_JNI​​Env”

任何快速帮助？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:00:13.513

该错误`base operand of '->' has non-pointer type`表明您应该使用`.`而不是`->`.

因此，无论您使用`(*env).NewByteArray(env, 16);`还是`env->NewByteArray(env, 16);`. 第 216 行也是如此。

您在下一行 (215) 处还有另一个错误`cannot convert "brace-enclosed initializer list>" to 'jbyte*' in assignment`，因为赋值的大括号语法仅在您声明数组/指针时有效（我认为它也取决于编译器，但我不确定）。

你应该尝试：

```
jbyte resultType[16] = {52, 14, 25, 32, 75, 83, 35, 89, 40, 69, 35, 73, 84, 82, 35, 30}; 
```

希望这可以帮助。

# c# - 当所有控制器都从 AsyncController 继承时，这是一个好习惯吗？

> ID：12214715
> 
> 赞同：4
> 
> 时间：2012-08-31T11:47:01.950
> 
> 标签：c#, .net, asp.net-mvc-4

标题非常清楚。我现在有一个从“Controller”类继承的 application-BaseController。

对于新的 .NET Framework 4.5 和 ASP.NET MVC 4，我想使用 C# 5 中提供的新的更简单的异步功能。我喜欢使用一些具有异步功能的操作方法（不是全部）。

将当前基类从“Controller”更改为“AsyncController”是否有任何陷阱？（非异步操作方法的性能更差？）

那么你怎么看呢？

感谢每个答案。

编辑：使用 ILSpy 我看到，AsyncController 类中不包含任何代码（MVC 4）。正如@Trevor Pilley 所说，它只是为了向后兼容 MVC 3。

```
public abstract class AsyncController : Controller
{
} 
```

所以，我们不需要我们关心“AsyncController”或“Controller”基础。“控制器”类现在在 MVC 4 中处理这两个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T13:56:12.753

如果您要迁移到 MVC 4，则 Controller 类支持异步内容。AsyncController 仅用于向后兼容 MVC 3。

[AsyncController 类](http://msdn.microsoft.com/en-us/library/system.web.mvc.asynccontroller%28v=vs.108%29.aspx)- “ASP.NET MVC 4 及更高版本中的控制器类支持异步模式。”

考虑到这一点，我会说如果有任何区别，它可能不会有太大影响，并且不会担心。

# android - 更改轨道媒体播放器android

> ID：12214718
> 
> 赞同：0
> 
> 时间：2012-08-31T11:47:06.487
> 
> 标签：android, android-mediaplayer, mediaplayback

我目前正在使用播放良好的 MediaPlayer 播放歌曲。在用户选择不同的歌曲时，我正在尝试播放。但是，MediaPlayer 收到错误（1，-2147483648）和错误（1，-2147483648）。这些日志在调用 prepareASync() 后打印；注意：文件的路径看起来是正确的。但是，如何检查有效的文件路径？

顺序如下：

 `````
 mPlayer.reset();
           Log.d(TAG,"after reset");
           mPlayer.setDataSource(mTrackToBePlayed);
           Log.d(TAG,"after setDataSource");
          // mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
           mPlayer.setOnPreparedListener(preparedListener);
           Log.d(TAG,"after setOnPreparedListener");
           mPlayer.setOnErrorListener(errorListener);
           Log.d(TAG,"after setting errorListener");
           mPlayer.prepareAsync();
           Log.d(TAG,"after prepareAsync"); 
````  `供参考的代码是这样的：在我的主要活动的 onResume() 中（返回到哪个，我想开始播放）我正在调用 MusicUtils.createPlayer(); 和 MusicUtils.playTrack(mCurrentTrack);

 `````
public static void playTrack(String track) {

    mTrackToBePlayed = track;   

    try {
           mPlayer.reset();
           Log.d(TAG,"after reset");
           mPlayer.setDataSource(mTrackToBePlayed);
           Log.d(TAG,"after setDataSource");
          // mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
           mPlayer.setOnPreparedListener(preparedListener);
           Log.d(TAG,"after setOnPreparedListener");
           mPlayer.setOnErrorListener(errorListener);
           Log.d(TAG,"after setting errorListener");
           mPlayer.prepareAsync();
           Log.d(TAG,"after prepareAsync");

    } catch (IOException e) {

    } catch(IllegalArgumentException e) {

    }

    preparedListener = new MediaPlayer.OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer mp) {
            // TODO Auto-generated method stub
            mp.start();
            Log.d(TAG,"after start");
        }
    };

     errorListener = new MediaPlayer.OnErrorListener() {
         public boolean onError(MediaPlayer mp, int what, int extra) {
             switch (what) {
             case MediaPlayer.MEDIA_ERROR_SERVER_DIED:
                 Log.d(TAG,"in onError");
                // mIsInitialized = false;
                 mp.release();
                 // Creating a new MediaPlayer and settings its wakemode does not
                 // require the media service, so it's OK to do this now, while the
                 // service is still being restarted
                try{
                 mp = new MediaPlayer(); 
                 mp.reset();
                 mp.setDataSource(mTrackToBePlayed);
                // mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
                 mp.prepareAsync();
                 mPlayer = mp;
                // mPlayer.start();
                } catch (Exception e) {

                }
                 //MediaPlayer.create(mContext, mTrackToBePlayed);
                // mPlayer.setWakeMode(MediaPlaybackService.this, PowerManager.PARTIAL_WAKE_LOCK);                 
                 return true;
             default:
                 Log.d("MusicPlayer", "Error: " + what + "," + extra);
                 break;
             }
             return false;
        }
     };

    //mPlayer.start();

}

public static boolean isPlaying() {
    return mPlayer.isPlaying();
}

public static void pauseTrack() {
    mPlayer.pause();
}

public static void startTrack() {
    mPlayer.start();
}

public static void stopTrack() {
    mPlayer.stop();
}

public static void releasePlayer() {
    mPlayer.release();
} 
````  ```This function is present in MusicUtils and is used to obtain the first track that the cursor returns

```
public static void retrieveDefaultPath() {

    String[] STAR = { "*" };           
    Uri allsongsuri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;    
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";     
    mCursor = mContentResolver.query(allsongsuri, STAR, selection, null, null);     
    if (mCursor != null) {        
        if (mCursor.moveToFirst()) {          
            //do {               
                //mSongName = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME));   
                //mSongList.add(mSongName);//populate the list of display names
                int song_id = mCursor.getInt(mCursor.getColumnIndex(MediaStore.Audio.Media._ID));   
                //mMusicIDs.put(song_id, counter++);//fill the HashMap with IDs corresponding to the positions
                String fullpath = mCursor.getString(mCursor.getColumnIndex(MediaStore.Audio.Media.DATA));            
                String album_name = mCursor.getString(mCursor.getColumnIndex(MediaStore.Audio.Media.ALBUM));          
                int album_id = mCursor.getInt(mCursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));               
                String artist_name = mCursor.getString(mCursor.getColumnIndex(MediaStore.Audio.Media.ARTIST));         
                int artist_id = mCursor.getInt(mCursor.getColumnIndex(MediaStore.Audio.Media.ARTIST_ID));        
                //} while (cursor.moveToNext());       

                 mDefaultPath = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI + "/" + song_id;
                 Slideshow.mCurrentTrack = mDefaultPath;

    }      
        if  (mCursor != null) { 
             mCursor.close();   
        }
    } 
} 
```` 

``The following function is used to obtain all the tracks on the device to display using the ListActivity.``

 `````
public void getAllSongsFromSDCARD()  {     
    String[] STAR = { "*" };           
    Uri allsongsuri = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;    
    String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";     
    cursor = managedQuery(allsongsuri, STAR, selection, null, null);     
    if (cursor != null) {        
        if (cursor.moveToFirst()) {          
            do {               
                mSongName = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.DISPLAY_NAME));   
                mSongList.add(mSongName);//populate the list of display names
                int song_id = cursor.getInt(cursor.getColumnIndex(MediaStore.Audio.Media._ID));   
                Log.d("Music List","ID: "+song_id+" counter:"+counter);

                mMusicIDs.put(counter++, song_id);//fill the HashMap with IDs corresponding to the positions
                String fullpath = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.DATA));            
                String album_name = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM));          
                int album_id = cursor.getInt(cursor.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));               
                String artist_name = cursor.getString(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST));         
                int artist_id = cursor.getInt(cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST_ID));        
                } while (cursor.moveToNext());       
    }      
       cursor.close();    
    } 
} 
```

I use the ID that the user selects and obtain the filepath in the following way:

```
 music_id = (Integer)mMusicIDs.get(position);
 mSelectedPath = mSelectedPath + "/" + music_id; 
````  `日志猫：

08-31 18:07:36.348: D/dalvikvm(23090): GC_EXTERNAL_ALLOC 释放 2K，46% 释放 3088K/5703K，外部 1461K/1538K，暂停 32ms

08-31 18:07:38.860: D/tag(23090): oncreate 内部

08-31 18:07:38.860：D/ImageSwitcher(23090)：缓存大小：1

08-31 18:07:39.030：D/ImageSwitcher(23090)：图像总数：838

08-31 18:07:39.150：I/AudioSystem（23090）：获取音频抛掷器

08-31 18:07:39.150: I/AudioSystem(23090): 返回新的音频会话 ID

08-31 18:07:39.150: D/IAudioFlinger(23090): newAudioSessionId In

08-31 18:07:39.150: D/IAudioFlinger(23090): newAudioSessionId Out, id = 175

08-31 18:07:39.150：D/MediaPlayer（23090）：reset（）在

08-31 18:07:39.150:D/MediaPlayer(23090):reset() out

08-31 18:07:39.150: D/MusicUtils(23090): 重置后

08-31 18:07:39.160: D/MusicUtils(23090): 在 setDataSource 之后

08-31 18:07:39.160: D/MusicUtils(23090): 在 setOnPreparedListener 之后

08-31 18:07:39.160: D/MusicUtils(23090): 设置 errorListener 后

08-31 18:07:39.170: D/MusicUtils(23090):prepareAsync 之后

08-31 18:07:39.250：D/MediaPlayer（23090）：开始（）在

08-31 18:07:39.260: D/MediaPlayer(23090): start() out

08-31 18:07:39.270：D/MediaPlayer（23090）：开始（）在

08-31 18:07:39.270: D/MediaPlayer(23090): start() out

08-31 18:07:39.270: D/MusicUtils(23090): 启动后

08-31 18:07:49.340: D/MediaPlayer(23090): pause() 在

08-31 18:07:49.340: D/MediaPlayer(23090): pause() out 08-31 18:07:49.560: D/dalvikvm(23090): GC_CONCURRENT freed 239K, 45% free 3260K/5831K, external 494K/ 1006K，暂停10ms+7ms

08-31 18:07:50.842: D/Music List(23090): 在 onCreate 之前 getAllSongsFromSDCARD

08-31 18:07:50.922: D/TAG(23090): 设置适配器

08-31 18:07:50.922: D/TAG(23090): 设置适配器完成

08-31 18:07:51.953: D/dalvikvm(23090): GC_EXTERNAL_ALLOC 释放 146K，45% 释放 3264K/5831K，外部 794K/855K，暂停 29ms

08-31 18:07:53.905: D/MusicList(23090): 在 setItemChecked 之后

08-31 18:07:54.585: D/Settings(23090): onActivityResult里面

08-31 18:07:55.476: W/KeyCharacterMap(23090): 无法打开 keycharmap 文件

08-31 18:07:55.476: W/KeyCharacterMap(23090): 加载 keycharmap 时出错

文件'/system/usr/keychars/cy8c-touchscreen.kcm.bin'。hw.keyboards.65538.devname='cy8c-touchscreen' 08-31 18:07:55.476：I/KeyCharacterMap(23090)：使用默认键盘映射：/system/usr/keychars/qwerty.kcm.bin

08-31 18:07:55.486:D/MediaPlayer(23090):reset() in

08-31 18:07:55.486:D/MediaPlayer(23090):reset() out

08-31 18:07:55.486: D/MusicUtils(23090): 重置后

08-31 18:07:55.486: D/MusicUtils(23090): 在 setDataSource 之后

08-31 18:07:55.486: D/MusicUtils(23090): 在 setOnPreparedListener 之后

08-31 18:07:55.486: D/MusicUtils(23090): 设置 errorListener 后

08-31 18:07:55.486:D/MusicUtils(23090):prepareAsync 之后

08-31 18:07:55.496: E/MediaPlayer(23090): 错误 (1, -2147483648)

08-31 18:07:55.506: E/MediaPlayer(23090): 错误 (1,-2147483648)

08-31 18:07:55.506: D/MusicPlayer(23090): 错误: 1,-2147483648

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:42:46.317

```
**Check with the following class it will list out all th songs in the device also it play the song when click on that name.**

public class NewMp3PlayerActivity extends Activity {
       ListView musiclist;

      int music_column_index,music_column_index1;
      int count;
      MediaPlayer mMediaPlayer;
      ImageView play, pause, forward, backward;
      int pposition;
      ArrayList<String> songs = new ArrayList<String>();      String songName;    Cursor musiccursor;
      /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.songpreview);

            play = (ImageView)findViewById(R.id.img_play);
            pause = (ImageView)findViewById(R.id.img_pause);
            forward = (ImageView)findViewById(R.id.img_forward);
            backward = (ImageView)findViewById(R.id.img_backward);

            play.setOnClickListener(OnClick);
            pause.setOnClickListener(OnClick);
            forward.setOnClickListener(OnClick);
            backward.setOnClickListener(OnClick);
            init_phone_music_grid();

      }

      View.OnClickListener OnClick = new View.OnClickListener() {
                @Override       public void onClick(View v) {           music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);        

            Log.e("", "musiccursor.getCount()-->"musiccursor.getCount());           switch(v.getId()){          case R.id.img_play:
                Log.v("", "list of songs-->"+songs);
                  if (mMediaPlayer.isPlaying()) {
                      mMediaPlayer.reset();
                }
                  mMediaPlayer.start();
                break;          case R.id.img_pause:
                  if (mMediaPlayer.isPlaying()) {
                      mMediaPlayer.pause();
                }
                break;          case R.id.img_forward: //                musiccursor.moveToPosition(pposition+1);

                try {
                     String filename="";
                        if (pposition < songs.size()){
                            pposition = pposition+1;
                            filename = songs.get(pposition);//musiccursor.getString(music_column_index);
                        }else{

                        }

                        Log.e("", "filename-->"+filename);
                    mMediaPlayer.reset();
                    mMediaPlayer.setDataSource(filename);
                    mMediaPlayer.prepare();
                    mMediaPlayer.start();
                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch(IndexOutOfBoundsException ie){
                    pposition = 0;
                }

                break;          case R.id.img_backward:

                 try {
                     String filename_n="";
                        if (pposition <= songs.size()){
                            pposition = pposition-1;
                            filename_n = songs.get(pposition);//musiccursor.getString(music_column_index);
                        }else{

                        }
                        mMediaPlayer.reset();
                        mMediaPlayer.setDataSource(filename_n);
                        mMediaPlayer.prepare();
                        mMediaPlayer.start();
                    } catch (IllegalArgumentException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } catch(ArrayIndexOutOfBoundsException ar){
                        pposition = songs.size();
                    }
                break;          default:
                break;          }
                    }   };
      private void init_phone_music_grid() {
            System.gc(); 
            String[] proj = { MediaStore.Audio.Media._ID,MediaStore.Audio.Media.DATA,MediaStore.Audio.Media.DISPLAY_NAME,MediaStore.Video.Media.SIZE };
            musiccursor = managedQuery(MediaStore.Audio.Media.INTERNAL_CONTENT_URI, proj, null, null, null);
            Log.e("", "filename-->"musiccursor.getCount());
            count = musiccursor.getCount();
            musiclist = (ListView) findViewById(R.id.lst_music);
            musiclist.setAdapter(new MusicAdapter(getApplicationContext()));

            musiclist.setOnItemClickListener(musicgridlistener);
            mMediaPlayer = new MediaPlayer();
            mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {

                @Override
                public void onCompletion(MediaPlayer mp) {
                    try {
                         String filename="";
                            if (pposition < songs.size()){
                                pposition = pposition+1;
                                filename = songs.get(pposition);//musiccursor.getString(music_column_index);
                            }else{

                            }

                            Log.e("", "filename-->"+filename);
                        mMediaPlayer.reset();
                        mMediaPlayer.setDataSource(filename);
                        mMediaPlayer.prepare();
                        mMediaPlayer.start();
                    } catch (IllegalArgumentException e) {
                        e.printStackTrace();
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    } catch(IndexOutOfBoundsException ie){
                        pposition = 0;
                    }
                }           });
      }

      private OnItemClickListener musicgridlistener = new OnItemClickListener() {
            public void onItemClick(AdapterView parent, View v, int position,long id) {
                  System.gc();
                  pposition = position;
                  music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
                  musiccursor.moveToPosition(position);
                  String filename = musiccursor.getString(music_column_index);
                  String filen = songs.get(pposition);
                  Log.e("", "index-->"+music_column_index);
                  try {
                        mMediaPlayer.reset();
                        mMediaPlayer.setDataSource(filen);
                        mMediaPlayer.prepare(); //                        mMediaPlayer.start();
                  } catch (Exception e) {

                  }
            }
      };

      public class MusicAdapter extends BaseAdapter {
            private Context mContext;

            public MusicAdapter(Context c) {
                  mContext = c;
            }

            public int getCount() {
                  return count;
            }

            public Object getItem(int position) {
                  return position;
            }

            public long getItemId(int position) {
                  return position;
            }

            public View getView(int position, View convertView, ViewGroup parent) {
                  System.gc();
                  TextView tv = new TextView(mContext.getApplicationContext());
                  String id = null;
                  if (convertView == null) {                     
                        music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
                        music_column_index1 = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);
                        musiccursor.moveToPosition(position);
                        id = musiccursor.getString(music_column_index);
                        songName = musiccursor.getString(music_column_index);
                        songs.add( musiccursor.getString(music_column_index1) );
                        music_column_index = musiccursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);
                        musiccursor.moveToPosition(position);
                        id += " Size(KB):" + musiccursor.getString(music_column_index);
                        tv.setText(id);
                  } else
                        tv = (TextView) convertView;
                  return tv;
            }
      } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:31:44.953

顺序是正确的。这条路走错了。正在使用硬编码字符串而不是 Uri。谢谢。```````

# java - Android 中的 StrictMode 类

> ID：12214719
> 
> 赞同：2
> 
> 时间：2012-08-31T11:47:06.707
> 
> 标签：java, android, api

我正在android中开发基于网络的项目，因此，为了防止强制关闭Android ICS `Can't do network operation on UI Thread`，我必须使用下面的代码部分或尝试在其他线程上启动我的网络操作，但我不想改变基本代码，所以我应该在 Android ICS 上使用如下代码。：

```
static {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

如何制作唯一的 apk 文件以在所有 android 版本（> = 1.6）中运行？`android.os.StrictMode`可用于更高版本的 android，因此，我无法尝试在我的 Android Activity 中使用上述代码部分。那么，哪种解决方案更好：

1.  使用反射在更高版本的 API 上运行这部分代码 ( [*`As oracle docs, reflective operations have slower performance than their non-reflective counterparts`*](http://docs.oracle.com/javase/tutorial/reflect/index.html))
2.  将我的 android 构建目标更改为 Android 4.1.1 (API 16) 并尝试更改`android:minSdkVersion`AndroidManifest.xml

或者如果你知道更好的，请告诉我。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:52:19.833

您可以使用 BUILD.VERSION 和反射来克服这个兼容性问题（经过测试）。

```
 if (Integer.valueOf(android.os.Build.VERSION.SDK_INT) >= 9) {
        try {
            // StrictMode.setThreadPolicy(StrictMode.ThreadPolicy.LAX);
            Class<?> strictModeClass = Class.forName("android.os.StrictMode", true, Thread.currentThread()
                    .getContextClassLoader());
            Class<?> threadPolicyClass = Class.forName("android.os.StrictMode$ThreadPolicy", true, Thread.currentThread()
                    .getContextClassLoader());
            Field laxField = threadPolicyClass.getField("LAX");
            Method setThreadPolicyMethod = strictModeClass.getMethod("setThreadPolicy", threadPolicyClass);
            setThreadPolicyMethod.invoke(strictModeClass, laxField.get(null));
        } catch (Exception e) {
        }
    } 
```

# php - PHP $_GET('') 问题。很简单，但我无法修复

> ID：12214720
> 
> 赞同：0
> 
> 时间：2012-08-31T11:47:06.770
> 
> 标签：php

我正在开发一个脚本来从外部 url 获取一些信息。但是我的托管有问题，脚本返回“NetworkError：403 Forbidden”，所以我做了一个非常简单的脚本来查找这个问题并得到了相同的结果。

当我转到 ?url=http://youtube.com 或 ?url=http://google.com 或任何 ?url=url 时，它正在回显变量值。

但是当我访问 ?url=http://tiny.cc 或 ?url=http://adf.ly （现在只找到这两个）时，我得到“NetworkError：403 Forbidden”（用萤火虫发现; 显示空白页)

谢谢你。

代码：

```
<?php
  $get_url = $_GET['url'];
  if ( isset ( $get_url ) && $get_url != '' )
    echo $get_url;
  else
    echo 'Please enter "?url=anything" at the end of the URL.';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:06:17.250

这不是 PHP - 它是您的 httpd 返回 403。请检查它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T02:28:05.817

修复了问题。来自我的主人的消息：

http:// 的问题已修复。我们的安全功能 mod_security 阻止了该操作。我添加了一个例外。现在它正在工作。

# asp.net - 如何在 ASP.NET 网站中添加谷歌分析

> ID：12214722
> 
> 赞同：0
> 
> 时间：2012-08-31T11:47:06.683
> 
> 标签：asp.net

如何在 ASP.NET 网站中添加谷歌分析？以及如何在 ASP.NET 网页中查看此报告。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T11:57:10.690

一步一步[从谷歌](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1008080); 5个简单的步骤：

1 - 首先[创建](https://support.google.com/analytics/bin/answer.py?hl=en&topic=1006228&answer=1009694)一个谷歌分析帐户

* * *

2-[将](https://support.google.com/analytics/bin/answer.py?hl=en&topic=1006228&answer=1042508)您的网站作为网络资产添加到您正在使用的帐户中。

* * *

3- 在 Google Analytics 中，转到管理选项卡 > 配置文件 > 跟踪代码

* * *

4- 使用上一步中找到的代码创建一个新的 javascript 文件（看起来像这样）：

```
var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-Y']); // XXXXX-Y indicates the web property ID for your Analytics account
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

* * *

5- 最后，将 javascript 文件包含到您的所有 asp 文件或母版页中（如果您使用的是一个：

```
<script src="myfolder/JS/GAnalytics.js" language="javascript" type="text/javascript" /> 
```

# jquery - jquery 缩放图像

> ID：12214727
> 
> 赞同：0
> 
> 时间：2012-08-31T11:47:20.117
> 
> 标签：jquery, image, scale

有没有一种方法可以实际缩放，而不仅仅是使用 jquery 调整图像大小。我已经建立了一个灯箱，但有些图像很大，所以需要缩小它们以适应可用的浏览器空间。

我并不关心文件大小，但质量是一个问题，所以不只是想使用 css 或宽度和高度属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:12:01.437

我能想到的唯一方法是设置`max-height`所需`max-width`的数量，这样纵横比将保持不变，但文件大小将相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:08:45.300

简单的回答：不，没有。

但是，大多数当前浏览器都实现了 CSS 属性（如此处所列）[来](https://developer.mozilla.org/en-US/docs/CSS/Image-rendering#Browser_Compatibility)指定用于缩放图像的算法。

# c# - 连接对象数组中的唯一字符串

> ID：12214730
> 
> 赞同：6
> 
> 时间：2012-08-31T11:47:23.583
> 
> 标签：c#, linq, c#-4.0

我有一个包含字符串的对象数组。

```
var values = new object[5];
values[0] = "PIZZA HUT";
values[1] = "ISLAMABAD";
values[2] = "ISLAMABAD";
values[3] = "PAKISTAN";
values[4] = "PAKISTAN"; 
```

我想从数组中获取一串唯一元素，加入`,`还需要检查字符串是否为空或白色空间；

```
PIZZA HUT, ISLAMABAD, PAKISTAN. 
```

目前我正在做以下事情。但是您可以看到它需要在 if 语句中进行大量检查。我想知道是否有**更好的方法使用 LINQ**

```
string featureName = values[0] as string;
string adminboundry4 = values[1] as string;
string adminboundry3 = values[2] as string;
string adminboundry2 = values[3] as string;
string adminboundry1 = values[4] as string;

if (!string.IsNullOrWhiteSpace(adminboundry4) 
   && adminboundry4 != adminboundry1 
   && adminboundry4 != adminboundry2 
   && adminboundry4 != adminboundry3) //want to get rid of these checks
                featureName += "," + adminboundry4;

if (!string.IsNullOrWhiteSpace(adminboundry3)) //Not checking for duplicate here just for this question
                featureName += "," + adminboundry3;

if (!string.IsNullOrWhiteSpace(adminboundry2)) //Not checking for duplicate here just for this question
                featureName += "," + adminboundry2;

if (!string.IsNullOrWhiteSpace(adminboundry1)) //Not checking for duplicate here just for this question
                featureName += "," + adminboundry1; 
```

`featureName`包含`PIZZA HUT, ISLAMABAD, PAKISTAN, PAKISTAN`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T11:48:31.603

您可以使用`string.Join()`方法并从对象数组中获取数组不同的字符串元素。

试试这个：

```
var Result = string.Join(",", values.Cast<string>()
                                 .Where(c => !string.IsNullOrWhiteSpace(c))
                                 .Distinct()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T11:48:17.197

是的，您可以使用 LINQ：

```
var featureName = String.Join(
  ",",
  values
    .Cast<String>()
    .Where(s => !String.IsNullOrWhiteSpace(s))
    .Distinct()
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:48:30.473

```
String.Join(",",values.ToList().Distinct(str=>str)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:50:55.950

```
String.Join(",", values.Distinct().Where(s=>!s.ISNullOrWhiteSpace())) 
```

# php - PHP 对数字进行排序而不使用 ORDER by DESC/ASC

> ID：12214732
> 
> 赞同：0
> 
> 时间：2012-08-31T11:47:32.413
> 
> 标签：php, sorting

有没有办法用下面的东西对数字进行排序

```
GameID   Turn   
3         2
6         1
7         2
5         2
8         0
9         1

return should be { for example GameID 6 is TURN for the Game or Left in the Game }
GameID   Turn
6         1
9         1
8         0
3         2
5         2
7         2

another example { for example GameID 7 is TURN for the Game or Left in the Game }
GameID   Turn
7         2
3         2
5         2
8         0
9         1
6         1 
```

那只是我需要弄清楚的一个样本。是否可以对转弯进行排序？

我不能使用 ORDER BY turn DESC/ASC 因为做的顺序就是这样`2 1 0`，而 ASC `0 1 2`bu 我需要弄清楚的是，如果我们`2`从那时开始，现在以这种方式排序 { 我们有 0 1 2 }排序应该是这样的，`2 0 1`或者如果我们从第 1 回合开始，排序应该是这样的`1 2 0`

我希望有什么能明白我的意思...

请我已经用过 asort 但它不适合。还有其他用于排序的php函数吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:51:06.873

您可以尝试`ORDER BY FIELD`：

```
 SELECT *
    FROM table
ORDER BY FIELD(Turn, 1, 0, 2) ASC
 --                           DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:52:06.313

```
SELECT 
  GameID,Turn
FROM yourtableorview
WHERE yourcriteria
ORDER BY IF(Turn<$startturn,Turn+99999999,Turn) 
```

# oracle - 甲骨文：无效的标识符

> ID：12214733
> 
> 赞同：2
> 
> 时间：2012-08-31T11:47:34.003
> 
> 标签：oracle

谁能向我解释为什么我在运行以下命令时出现 00904 错误

```
SELECT "OASM"."DT_GROUPEPG".GROUPEPGID,
  "OASM"."DT_GROUPEPG".GROUPID,
  "OASM"."DT_GROUPEPG".EPGID,
  "OASM"."DT_GROUPEPG".ZAPID,
  "OASM"."LU_EPG".LASTREADTIME,
  "OASM"."LU_EPG".SERVICE_NAME,
  "OASM"."LU_EPG".SOURCE_ID,
  "OASM"."LU_EPG".ONID,
  "OASM"."LU_EPG".TSID,
  "OASM"."LU_EPG".SID,
  "OASM"."LU_EPG".TYPE_ID,
  "OASM"."LU_EPG".OPERATOR_ID,
  "OASM"."LU_EPG".URL 
FROM "OASM"."DT_GROUPEPG"
INNER JOIN "OASM"."LU_EPG"
ON "OASM"."DT_GROUPEPG".EPGID = "OASM"."LU_EPG".EPGID
ORDER BY LastReadTime; 
```

我还是 Oracle 的新手，我的印象是，因为 Oracle 执行语句块而不是逐行执行，所以执行这种查询是有效的吗？该错误当前在 OPERATOR_ID 行触发，但删除/注释它只会将错误向上移动一行，直到删除所有 LU_EPG 表引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:32:23.730

在引用列时，您不能（也不需要）指定架构名称。另外，我建议您使用表别名（例如`a`，`b`在下面的示例中）：

```
SELECT a.GROUPEPGID,
  a.GROUPID,
  a.EPGID,
  a.ZAPID,
  b.LASTREADTIME,
  b.SERVICE_NAME,
  b.SOURCE_ID,
  b.ONID,
  b.TSID,
  b.SID,
  b.TYPE_ID,
  b.OPERATOR_ID,
  b.URL 
FROM "OASM"."DT_GROUPEPG" a
INNER JOIN "OASM"."LU_EPG" b
ON a.EPGID = b.EPGID
ORDER BY b.LastReadTime; 
```

# android - GLSL - 在 if 子句中更改片段着色器中的颜色时性能不佳

> ID：12214735
> 
> 赞同：1
> 
> 时间：2012-08-31T11:47:43.173
> 
> 标签：android, android-ndk

当我在 if 子句中设置颜色时，为什么性能会变差？这是我当前的片段着色器代码：

```
if(u_habitatSettings.z>0.0)
{
    if(tNames.r<=BLINK && tNames.g<=BLINK && tNames.b<=BLINK && tNames.a>0.0)
    {
        if(v_blinkIndices==BLINK_BE_ASSAULTED)
        {
            tNames=vec4(1, 0, 0, u_habitatSettings.z);
        }
        else if(v_blinkIndices==BLINK_ASSAULT)
        {
            tNames=vec4(0, 0, 1, u_habitatSettings.z);
        }
    }
} 
```

使用此代码，我大约有 20 fps。当我注释掉这两行`tNames=vec4(1, 0, 0, u_habitatSettings.z);`和`tNames=vec4(0, 0, 1, u_habitatSettings.z);`时，fps 增加到 60fps（设备上的最大 fps）。

问题是否是因为 if 子句和编译器在注释掉这两行时删除了它们？还是两条线有问题？

# c# - Parallel.For 具有产生价值的迭代和缓存行共享

> ID：12214739
> 
> 赞同：0
> 
> 时间：2012-08-31T11:48:06.417
> 
> 标签：c#, .net, multithreading, task-parallel-library

我在阅读[并行模式时找到了](http://parallelpatterns.codeplex.com/)[这篇文章的链接](http://msdn.microsoft.com/en-us/magazine/cc872851.aspx)

但我现在有点困惑。

如果 Parallel.For 的每次迭代都产生结果并将其存储为数组的项怎么办。没有竞争条件，也不需要同步。但是缓存行必须与所有线程同步，这会降低性能。（如果我没错的话）。

所以我很感兴趣是否存在性能改进的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:47:26.433

> 如果 Parallel.For 的每次迭代都产生结果并将其存储为数组的项怎么办。

为了发生错误共享，您需要不同的线程来访问彼此靠近的数组项。

在实践中，您有少量线程（我们称之为 C）处理一个大小为 N 的大型数组，其中 N >> C。这意味着每个线程都有相当多的项目要处理。假设它们可以独立处理，理想的方法是进行连续拆分，因此每个线程都在数组中获得连续的位置。这很好地避免了错误共享。

例如，处理交错的数组元素是没有意义的，因为这确实会导致错误共享。然而，可能并不总是可以使用连续策略，因为有时负载平衡会发挥作用。在这种情况下，您必须查看哪个更有害：偶尔的错误共享或负载平衡不良。讨论很长。我确信底层的 TPL 调度程序设计得足够好，以获得最佳的权衡。

# jquery - 使用导航栏更改数据内容

> ID：12214742
> 
> 赞同：1
> 
> 时间：2012-08-31T11:48:15.443
> 
> 标签：jquery, html, jquery-mobile

我有一个导航栏，我只想更改其下方的内容。我正在使用 Jquery 手机。我找到了这个，但它没有正确地做到这一点。

```
<body id="stage" class="theme">
<div data-role="page" id="page1">
    <div data-role="header">
        <h1>Welcome to the Hunt</h1>
    </div>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1" class="ui-btn-active ui-state-persist">Mes parties</a></li>
                <li><a href="#page2">Parties en cours</a></li>
            </ul>
        </div>
    </div>
</div>
<div data-role="page" id="page2">
    <div data-role="header">
        <h1>Welcome to the Hunt</h1>
    </div>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1" class="ui-btn-active ui-state-persist">Mes parties</a></li>
                <li><a href="#page2">Parties en cours</a></li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:17:31.443

```
<div style="margin:0 auto;">
<div data-role="page" style="width:400px" id="page1">

<div data-role="header">
    <h1>Welcome to the Hunt</h1>
</div>
<div data-role="navbar">
    <ul>
    <li><a href="#page1" class="ui-btn-activeui-statepersist">Mesparties</a></li>
        <li><a href="#page2">Parties en cours</a></li>
    </ul>
</div>
<div data-role="content">
    from 1st page
</div>

</div>

<div data-role="page" id="page2" style="width:400px">
<div data-role="header">
    <h1>Welcome to the Hunt</h1>
</div>
<div data-role="navbar">
<ul>
<li><a href="#page1" >Mes parties</a></li>
  <li><a href="#page2" class="ui-btn-active ui-state-persist">Partiesecours</a>    </li>
</ul>
</div>
    <div data-role="content">
    from 2nd page
    </div>
 </div>
 </div> 
```

上面的代码将根据导航栏改变内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:26:29.103

首先，您在任何这些页面上都没有任何数据。只是一个导航栏...您应该向每个页面添加一个内容 div：

```
<div data-role="content">
   <p>Welcom to page 1</p>  
</div><!-- /content --> 
```

（确保在第 2 页内容 div 会说一些不同的内容。）

其次，您不会更改导航栏中的活动项目（页面）。菜单上的“类”部分应该只是当前页面的一部分。

第三，我认为你`</DIV>`的代码无与伦比

- 编辑：

为避免刷新菜单 - 您可以将导航栏放在特定的页眉中，提供页眉 ID 并确保两个页眉的 ID 相同：

```
<div data-id="PersistentNav" data-position="fixed" data-role="header"> 
```

对两个页面都这样做...

相同的 ID 将强制 jquery 不刷新菜单

现在，使用代码：

```
<body id="stage" class="theme">

<div data-role="page" id="page1">
    <div data-id="PersistentNav" data-position="fixed" data-role="header">
        <h1>Welcome to the Hunt</h1>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1" class="ui-btn-active ui-state-persist">Mes parties</a></li>
                <li><a href="#page2">Parties en cours</a></li>
            </ul>
        </div>
    </div>
    <div data-role="content">   
             <p>Welcom to page 1</p>    
    </div><!-- /content -->
</div>

<div data-role="page" id="page2">
    <div data-id="PersistentNav" data-position="fixed" data-role="header">
        <h1>Welcome to the Hunt</h1>
        <div data-role="navbar">
            <ul>
                <li><a href="#page1" >Mes parties</a></li>
                <li><a href="#page2" class="ui-btn-active ui-state-persist">Parties en cours</a></li>
            </ul>
        </div>

    </div>
    <div data-role="content">   
             <p>Welcom to page 2</p>    
     </div><!-- /content -->
</div>

</body> 
```

# git - 给定提交哈希在 GitHub 上查找提交

> ID：12214746
> 
> 赞同：371
> 
> 时间：2012-08-31T11:48:27.093
> 
> 标签：git, github, commit

我对 Github 还很陌生，遇到了一个业余问题。

我被要求进行代码审查并获得了提交哈希，但是我尝试在 Git 中查找是否可以使用提交哈希进行搜索但找不到任何东西。

有没有一种方法可以通过使用提交哈希找到更改的代码？

* * *

## 回答 #1

> 赞同：458
> 
> 时间：2012-08-31T11:52:17.417

表单的 URL`https://github.com/<owner>/<project>/commit/<hash>`将显示该提交中引入的更改。例如，这是我最近对 ​​GitHub 上的一个项目所做的错误修复：

[https://github.com/jerith666/git-graph/commit/35e32b6a00dec02ae7d7c45c6b7106779a124685](https://github.com/jerith666/git-graph/commit/35e32b6a00dec02ae7d7c45c6b7106779a124685)

您还可以将哈希缩短为任何唯一前缀，如下所示：

[https://github.com/jerith666/git-graph/commit/35e32b](https://github.com/jerith666/git-graph/commit/35e32b)

* * *

我知道您刚刚询问了 GitHub，但为了完整起见：如果您已从命令行签出存储库，则可以使用以下任一命令实现基本相同的目的（唯一前缀也可以在这里使用）：

```
git show 35e32b6a00dec02ae7d7c45c6b7106779a124685
git log -p -1 35e32b6a00dec02ae7d7c45c6b7106779a124685 
```

注意：如果您将提交哈希缩短得太远，命令行会为您提供有用的消歧消息，但 GitHub 只会返回 404。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2015-01-20T19:18:55.610

查看单个提交：
`https://github.com/<user>/<project>/commit/<hash>`

查看日志：
`https://github.com/<user>/<project>/commits/<hash>`

查看完整的回购：
`https://github.com/<user>/<project>/tree/<hash>`

`<hash>`可以是任意长度，只要它是唯一的。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2017-05-31T00:30:44.370

[搜索提交](https://help.github.com/articles/searching-commits/)的功能最近已添加到 GitHub。

要搜索哈希，只需在搜索框中输入至少前 7 个字符。然后在结果页面上，单击“提交”选项卡以查看匹配的提交（但仅在默认分支上，通常为`master`），或单击“问题”选项卡以查看包含提交的拉取请求。

更明确地说，您可以将`hash:`前缀添加到搜索中，但这并不是必需的。

还有一个[REST API](https://developer.github.com/v3/search/#search-commits)（在撰写本文时仍处于预览阶段）。

# java - 为什么前缀类型的 url 模式不起作用？（tomcat）

> ID：12214752
> 
> 赞同：3
> 
> 时间：2012-08-31T11:48:32.610
> 
> 标签：java, tomcat, web.xml

我有一个请求 URL，`hhhhttttppp://localhost:8180/myweb/ws/comment/save`以下是我的`web.xml`. 我想了解为什么它没有将我的请求发送到我的流程类。

`<url-pattern>/*</url-pattern>`效果很好。
`<url-pattern>*.aa</url-pattern>`运行良好（更改 save.aa 的一些代码）没用
`<url-pattern>/ws/*</url-pattern>`。

任何人都可以提供一些提示吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name></display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>abc</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.resourceConfigClass</param-name>
            <param-value>com.sun.jersey.api.core.PackagesResourceConfig</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.myweb.comment</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>abc</servlet-name>
        <url-pattern>/ws/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:42:30.843

/ws 将仅匹配该确切路径（相对于上下文）

要捕获以下所有内容，请使用 /ws/

注意，最后一个不匹配 /ws

要同时获得两者，您需要两个映射

# postgresql - 如何将新行插入数据库并获取主键作为结果

> ID：12214754
> 
> 赞同：2
> 
> 时间：2012-08-31T11:48:35.067
> 
> 标签：postgresql, playframework, playframework-2.0, postgresql-9.1, anorm

我正在使用带有 Anorm 的 Play2。有没有办法执行 INSERT 语句并获取自动生成的主键作为结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:46:38.797

使用[`RETURNING`子句](http://www.postgresql.org/docs/current/interactive/sql-insert.html)：

```
INSERT INTO tbl(foo)
VALUES ('bar')
**RETURNING foo_id**; 
```

使用[Anorm](https://github.com/playframework/play-scala/blob/master/documentation/manual/anorm.textile)，它可能看起来像这样（我不是 Anorm 的专家）：

```
import play.db.anorm._

val firstRow = SQL("INSERT INTO tbl(foo)
                    VALUES ('bar') RETURNING foo_id").apply().head

val foo_id = firstRow[int](“foo_id”) 
```

# asp.net-mvc-3 - 使用数据注释的日期格式不起作用

> ID：12214759
> 
> 赞同：3
> 
> 时间：2012-08-31T11:49:08.790
> 
> 标签：asp.net-mvc-3, datetime

我有这个带有以下数据注释的模型，因为我想以这种格式处理日期：**dd.MM.yyyy**

```
[DataType(DataType.Date)]
[DateRange(ErrorMessageResourceName = "DateBetween", ErrorMessageResourceType = typeof(WizardStrings))]
[DisplayFormat(DataFormatString = "{0:dd.MM.yyyy}")]
public DateTime? BirthDate1 { get; set; } 
```

在视图中：

```
@Html.EditorFor(model => model.BirthDate1 )
@Html.ValidationMessageFor(model => model.BirthDate1) 
```

MVC 仍然使用以下格式呈现此日期：dd/MM/yyyy 似乎它没有考虑我的数据注释。

查看呈现的 HTML：

```
<input class="text-box single-line valid" data-val="true" data-val-required="La date de naissance est requise!" id="BirthDate1" name="BirthDate1" type="text" value="**9/9/1999 12:00:00 AM**"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:55:32.847

在`DataFormatString`尝试添加之前`ApplyFormatInEditMode = true`

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd.MM.yyyy}")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:58:07.697

您需要在 DisplayFormat 属性中包含 ApplyFormatInEditMode=true

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T12:00:41.963

```
 public string StartDate
        {
            get { return (startDateTime ?? new DateTime(1000, 01 ,01 )).ToString("G", DateTimeFormatInfo.InvariantInfo); }
        } 
```

如果不适合您，请尝试其他格式

# c - 从四个中找出两个最小值？

> ID：12214765
> 
> 赞同：5
> 
> 时间：2012-08-31T11:49:32.133
> 
> 标签：c, algorithm

所以，我有四个整数，我需要找出这四个中最小的两个。在 C（或任何其他语言）中这样做最有效的方法是什么？

**编辑：**为了提高效率，我需要一个固定的实现，因为这是一个非常关键的操作，将被执行数千次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:54:47.010

[这是使用排序网络](http://en.wikipedia.org/wiki/Sorting_network)的有效实现：

```
inline void Sort2(int *p0, int *p1)
{
    if (*p0 > *p1)
    {
        const int temp = *p0;
        *p0 = *p1;
        *p1 = temp;
    }
}

inline void Sort4(int *p0, int *p1, int *p2, int *p3)
{
    Sort2(p0, p1);
    Sort2(p2, p3);
    Sort2(p0, p2);  
    Sort2(p1, p3);  
    Sort2(p1, p2);  
} 
```

这只需要 5 次比较和最多 5 次交换。您可以忽略 p2、p3 的结果。

请注意，对于性能关键型应用程序`Sort2`，可以在某些架构上通过一两条指令实现无分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T11:51:58.617

只需编写一个循环并跟踪低 2 值吗？应该是最大 O(2N)，这是我认为可以实现的最佳复杂性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T12:04:50.667

最有效的方法？为了避免任何额外的步骤，我得到了这个（在伪代码中）。这将避免您与其他更通用的解决方案（特别是那些不利用比较操作的传递性质的解决方案）进行的任何不必要的比较。

请记住，这只是考虑效率，而不是针对漂亮的代码。

```
if a<=b:
  if b<=c:
    # c too big, which of b and d is smaller?
    if b<=d:
      return (a,b)
    else:
      return (a,d)
  else if b<=d:
    # a and c both < b, and b < d
    return (a,c)
  else:
    # b is > a, c and d. Down to just those three.
    if a<=c:
      if c<=d:
        # a < c < d
        return (a,c)
      else:
        # a and d both < c
        return (a,d)
    else if d<=a:
      # Both c and d < a
      return (c,d)
    else:
      # c < a < d
      return (a,c)
else:
  # b < a
  if a<=c:
    # c too big, which of a and d is smaller?
    if a<=d:
      return (a,b)
    else:
      return (b,d)
  else if a<=d:
    # b and c both < a, and a < d
    return (b,c)
  else:
    # a is > b, c and d. Down to just those three.
    if b<=c:
      if c<=d:
        # b < c < d
        return (b,c)
      else:
        # b and d both < c
        return (b,d)
    else if d<=b:
      # Both c and d < b
      return (c,d)
    else:
      # c < b < d
      return (b,c) 
```

我认为这有 5 次比较的最坏情况和 3 次比较的最佳情况（显然没有办法在少于 3 次比较中做到这一点）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T12:08:09.723

您可以进行 4 次比较和最多 4 次交换。

```
inline void swap(int* i, int* j) {
  static int buffer;
  buffer = *j;
  *j = *i;
  *i = buffer;
}

inline void sort2(int* a, int* s) {
  if (*s < a[1])
    swap(s,a+1);
  if (*s < a[0]) // it is NOT sufficient to say "else if" here
    swap(s,a);
}

inline void sort4(int* a) {
  sort2(a,a+2);
  sort2(a,a+3);
} 
```

结果将是第一个到单元格，但请注意，这些单元格不一定是排序的！它们只是最小的元素。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T11:51:09.863

我会用它们制作一个数组，排序并取前两个值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-31T13:32:01.880

您最多可以通过 4 次比较来完成它：

*   比较第一对数字，让小be`a1`和大be`a2`
*   比较第二对数字，让较小的be`a3`和较大的be`a4`
*   如果 a1 >= a4 返回 (a3, a4)
*   （现在我们知道 a1 < a4）
*   如果 a3 >= a2 返回 (a1, a2)
*   （现在我们也知道 a3 < a2）
*   返回 (a1, a3)

要确定这是真的，您可以检查所有可能返回的组合：

(a1, a2) (a1, a3) (a1, a4)

(a2, a3) (a2, a4)

(a3, a4)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T11:51:17.867

我认为您可以对数组进行排序并选择前两个元素。

# workflow-foundation-4 - AppFabric 相对于普通 SqlWorkflowInstanceStore 的优势

> ID：12214774
> 
> 赞同：0
> 
> 时间：2012-08-31T11:50:07.143
> 
> 标签：workflow-foundation-4, appfabric

我知道 AppFabric 提供了有效跟踪和存储工作流程的可能性。无论如何，对于纯粹的持久性，还有 SqlWorkflowInstanceStore（我猜 AppFabric 使用它）。我想了解使用 AppFabric 而不是简单的 SqlWorkflowInstanceStore 的优势是什么，以及这种选择的开销是什么。

谢谢，

弗朗切斯科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T09:19:50.590

如果您只对持久性感兴趣，请使用 SqlWorkflowInstanceStore。Windows Server Appfabric 为其添加了管理和跟踪功能。但 Appfabric 是 IIS 的插件，因此仅适用于工作流服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T17:06:12.287

Appfabric 包括几个服务，这些服务可以重新启动工作流（如果您通过 WorkflowServiceHost 使用 xamlx）。您需要执行大多数管理技术，不仅要启动而且要重新启动工作流，而工作流在中途因服务器死亡之类的事情而终止。

我发现 appfabric 确实需要我使用 WorkflowServiceHost 明确托管我的工作流，以便能够正确使用 appfabirc 擅长的自动化管理方法

[MSDN - AppFabric 持久性](http://msdn.microsoft.com/en-us/library/ee677272(v=azure.10).aspx "AppFabric 持久性")

如果您不使用 XAMLX（或 WorkflowServiceHost）而是使用 WorkflowApplication 来托管您的工作流，那么我找不到真正利用 appfabnric 的好方法，这意味着只使用 WorkflowInstanceStore

[MSDN - 工作流实例存储](http://msdn.microsoft.com/en-us/library/ee383994(v=vs.110).aspx)

# java - 从表单传递jsp中的参数

> ID：12214776
> 
> 赞同：-1
> 
> 时间：2012-08-31T11:50:08.420
> 
> 标签：java, jsp, servlets

我在下面，

1.  Student.java -> 包含在数据库中添加学生的方法 addStudent(int id, String name,String address,String class)

2.  AddStudentServlet.java -> Controller 与 db 和 jsp 交互

3.  AddStudent.jsp -> JSP 表单添加学生
4.  mysql中的学生表，列id，name，address，class

当我提交带有所有值的表单时，它很好。但是，当我输入部分值时，即。在 id、name 字段中，我收到一条错误消息，指出参数数量不匹配。

如何更改模型以允许在数据库中部分添加字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:55:49.360

似乎在您的列值数量较少的地方`DAO`引发了此错误。即您定义了 4 列，但仅传递值 3。`database``insert in to @tablename`

`how can i change the model to allow partial addition of fields in the db?`

在插入 SQL 中，如果这些列未在表单中输入但保留完整的插入语句，则将它们传递为 null

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:24:43.323

您的 SQL 查询必须包含**所有**表列的值。因此，您不能添加少于 4 个字段的学生记录。

# coq - 在 Coq 中使用存在定理

> ID：12214778
> 
> 赞同：4
> 
> 时间：2012-08-31T11:50:13.500
> 
> 标签：coq, theorem-proving

我在 Coq 中有以下定理：`Theorem T : exists x:A, P x.`我希望能够在后续证明中使用这个值。IE 我想说这样的话：“让`o`代表一个这样的值`P o`。我知道它`o`是由定理存在的`T`......”

我该怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T12:32:18.663

从数学上讲，您需要为 ∃ 构造函数应用消除规则。通用消除策略`elim`有效。

```
elim T; intro o. 
```

愚蠢的例子：

```
Parameter A : Prop.
Parameter P : A -> Prop.
Axiom T : exists x:A, P x.
Parameter G : Prop.
Axiom U : forall x:A, P x -> G.
Goal G.
Proof.
elim T; intro o.
apply U.
Qed. 
```

# java - Gson - 如何使用嵌套 JSON 解析动态 JSON 字符串？

> ID：12214781
> 
> 赞同：2
> 
> 时间：2012-08-31T11:50:30.820
> 
> 标签：java, json, parsing, gson

我有带有动态元素的 JSON 字符串，直到现在我将它解析为 Map：

```
Map map = new Gson().fromJson(jsonString, 
        new TypeToken<HashMap<String, String>>() {}.getType()); 
```

现在我需要解决这种情况 - 这些动态变量之一可能是另一个 JSON 字符串。

你有什么建议可以解决吗？提前致谢。

**编辑：**添加了 JSON 字符串示例（格式化）：

```
{
    "key1": "val1",
    "key2": "val2",
    "key3": {
        "subkey1": [
            "subvalue1",
            "subvalue1"
        ],
        "subkey‌​2": [
            "subvalue2"
        ]
    },
    "key4": "val3"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:02:12.353

你所说的另一个 JSON 字符串只是一个 json 对象。将 Map 值类型从**String更改为****Object**：TypeToken>

 **```
String jsonString = "{\"key1\":\"val1\",\"key2\":\"val2\",\"key3\": {\"subkey1\":\"subvalue1\",\"subkey2\":\"subvalue2\"},\"key4\":\"val3\"}";

Map<String, Object> map = new Gson().fromJson(jsonString, new TypeToken<Map<String, Object>>() {
}.getType()); 
```

上面的示例适用于 GSON 2.2.2。和 sysout(map) 产生

```
{key1=val1, key2=val2, key3={subkey1=subvalue1, subkey2=subvalue2}, key4=val3} 
```

作为一个小的改进，我建议您明确指定映射类型参数，并使用 Map 而不是 HashMap 作为 TypeToken。**

# php - 如何在 Apache 中使用 pcntl_fork()？

> ID：12214785
> 
> 赞同：3
> 
> 时间：2012-08-31T11:50:51.037
> 
> 标签：php, apache, pcntl

这是我的代码，里面`index.php`（只是一个例子）：

```
$pid = pcntl_fork();
if ($pid == -1) {
  die("failed to fork");
} else if ($pid) {
  // nothing to do
} else {
  putDataIntoWebService();
  exit();
}
echo "normal page content"; 
```

此代码段在命令行中运行良好。在 Apache`exit()`中，父进程和子进程都杀死了它们。什么是解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:52:53.017

您不能将这些`pcntl_*`函数与 PHP 的 Apache 模块版本一起使用。引用[`pcntl_fork`文档](http://php.net/manual/en/function.pcntl-fork.php)中的评论：

> 当 PHP 用作 Apache 模块时，不能使用函数 'pcntl_fork'。您只能在 CGI 模式或命令行中使用 pcntl_fork。
> 
> 使用此函数将导致：“致命错误：调用未定义函数：pcntl_fork()”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T08:38:24.800

这是解决方案：

```
posix_kill(getmypid(), SIGKILL); 
```

而不是`exit()`.

# matlab - 将矩阵限制在指定值内的有效方法

> ID：12214788
> 
> 赞同：6
> 
> 时间：2012-08-31T11:51:01.440
> 
> 标签：matlab, comparison, vectorization

我正在开发一个包含数千行代码的大型 Matlab 测试平台，并且我正在尝试优化通过 Matlab 中的分析器确定的最耗时的例程。我注意到其中最耗时的操作之一如下：

```
list = list((list(:,1) >= condxMin) & (list(:,1) <= condxMax) & (list(:,2) >= condyMin) & (list(:,2) <= condyMax),:); 
```

具体来说，我有一个很大的坐标列表（至少 50000 x 2），我想限制这个列表的值，以便只保留验证这两个条件的点： list(:,1) 必须在 [ condxMin, condxMax] 和 [condyMin condyMax] 中的 list(:2)。

考虑到这行代码已经矢量化，我想知道是否有更有效的方法来做到这一点。另外，我想知道Matlab是否会短路。如果没有，那么我认为没有办法在不破坏矢量化的情况下做到这一点并使用 while 循环来完成，我会在其中编写如下内容：

```
j=1;
for i=1:size(list,1)
   if(cond1 && cond2 && cond3 && cond4)
      newlist(j,1:2) = list(i,1:2);
      j=j+1;
   end
end 
```

提前感谢您的回答:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:24:10.013

看起来原始的矢量化版本是我能找到的最快的方法，除非有任何非常聪明的想法。Matlab 确实做短路，但不适用于矩阵。您展示的循环实现会非常慢，因为您没有预先分配（也不能预先分配整个矩阵）。

我对此尝试了几种变体，包括一个使用短路 && 来确定索引是否坏的 for 循环，但没有这样的运气。从好的方面来说，对于 500 万个元素坐标列表，您获得的矢量化版本的运行时间为 0.21 秒。

# sql-server - SQL Server，并行实例冲突

> ID：12214789
> 
> 赞同：1
> 
> 时间：2012-08-31T11:51:04.507
> 
> 标签：sql-server, conflict, instances, side-by-side

我正在将我的数据库部署到我的软件也安装的 SQL Server 2008 R2 Express 实例。一切正常，但在某些目标机器上还有 SQL Server 2008、2005、2000 的其他实例......我知道，理论上，SQL Server 实例可以并排共存。但我也知道他们之间有几个冲突。互联网上到处都是。

我最常见的症状是：以前安装的 SQL Server 2008 实例（来自其他供应商）没有安装服务器协议。在 SQL Server 配置管理器中，在“SQL Server 网络配置”下，缺少“'MyInstance' 的协议”项。所以任何客户端机器都可以连接到服务器。

我想尽量减少对客户家的访问，并使我的应用程序尽可能地自我部署。我可以做些什么来避免或解决实例冲突？有什么建议吗？我希望有一些不可能的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:19:51.417

您可能需要了解哪些版本可以存在于同一服务器/客户端上：
[使用 SQL Server](http://msdn.microsoft.com/en-us/library/ms143694%28v=sql.105%29.aspx)
[的多个版本和实例 使用 SQL Server 的多个版本和实例](http://msdn.microsoft.com/en-us/library/ms143694.aspx)

这两个链接都有关于支持哪些并行安装的图表，但第二个链接还包含更多关于组件以及将升级到已安装的最高版本的组件。

对于您谈到的 SSCM 问题，这可能是由很多原因引起的，其中大多数都与管理工具的安装损坏有关；或者我主要看到客户端上的 WMI 调用问题。由于大多数这些设置都在注册表中可用，我建议查看那一侧以配置和锁定您的实例。

您还可以查看[SQL Server Compact](http://msdn.microsoft.com/en-US/library/ms172037.aspx) Edition。它是作为嵌入式数据库开发的，不需要安装完整的 SQL Server 管理工具。您拥有与完整版 SQL Server 相同的 API 和控件，只需“紧凑”安装。我与一个使用它的应用程序进行了交互，但尚未对其进行任何开发。

# c - 无法理解为什么这种行为

> ID：12214790
> 
> 赞同：2
> 
> 时间：2012-08-31T11:51:04.500
> 
> 标签：c, arrays, pointers, char

我有这个代码：

```
 char *name[] = { "a1", "b2", "c3", "d4" };
     printf("%s\n", *name); //the critical line 
```

相关`critical line`：

在这种形式中，输出很简单：`a1`. 如果我将其替换为`critical line`：

`printf("%s\n", ++*name);`

那么输出是`1`. 我认为直到现在一切都很好。

考虑到`name`分别是指向第一个字符串的指针`"a1"`，我将其替换为`critical line`：

`printf("%s\n", ++name);`

希望我能得到`"b2"`结果作为输出。但我得到这个错误：

`../src/test.c:32: error: lvalue required as increment operand`.

**问题**：我不明白为什么`++*name`是合法的 -`name`是指向第一个字符串的指针 - 而`++name`不是。在我看来，`++name`应该移动`name`到下一个字符串。谁能解释一下我的理解不足在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:59:24.400

写入`++name`时，*数组* `name`将转换为*指向*数组第一个元素的指针。此转换的结果不是左值，不能用`++`或以其他方式修改。您可以改为 write `name+1`，这将打印正确的内容。当`name`是一个数组时，无法修改它以引用除该数组[*] 之外的任何内容。

还要考虑：

```
char **p = name;   // OK, `name' converts to pointer
++p;               // OK, `p' is an lvalue
++(p+1);           // not OK, `p+1' is not an lvalue
++((char**)p);     // not OK, `(char**)p' is not an lvalue

++*name;           // OK, `*name' is an lvalue 
```

粗略地说，“左值”是引用对象的表达式，而“非左值”是具有值的表达式。对象和值之间的区别在于，对象是存储值的地方（嗯，一次一个值）。值永远不能被修改，对象有时可以。

每当您有一个左值但需要其当前值的子表达式时，该对象就会被读取/加载/您想要调用它的任何内容。在 C++ 中，这被称为“左值到右值的转换”，我不记得它在 C 中是否被称为“评估子表达式”之外的任何东西。

`name`[*] 你可以在内部范围内使用另一个变量来隐藏它，它指的是别的东西。但这仍然没有修改外部`name`，只是暂时隐藏它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:53:09.260

`name`是一个数组，因此，除非您将其用作`sizeof`or`&`运算符的操作数，否则它会被评估为指向数组 objet 的初始成员的指针，而**不是左值**。

因此，您不能`name`直接使用诸如`++`（请记住，后缀增量运算符需要可修改的左值作为操作数）的运算符进行修改。否则，您可以使用临时指针（`p`在以下示例中）。

```
#include <stdio.h>

const char *name[] = { "a1", "b2", "c3", "d4" };
const char **p = name;
printf("%s\n", *p); /* Output: a1 */
*++p; /* or *p++ */
printf("%s\n", *p); /* Output: b2 */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T11:59:53.527

首先，确保您对以下事实完全满意和自信：*数组不是指针。*

其次，a里面有`name`什么？数组*衰减*为指向第一个元素的指针。衰减后，表达式`name`的类型为`char **`( 指向数组的第一个元素的指针`char*`。但是，衰减的表达式是*rvalue*。您不能修改它！自然如此，因为修改指向固定指针的指针是没有意义的大批。

因此，您不能直接增加作为衰减结果的指针，`name`只能说`++5`或`++foo()` ~~（`foo`按值返回原始类型）~~[[哎呀，这是对 C++ 的让步]]。

你*可以*说的是：

```
char ** np = name;
++np;
printf("%s", *np); 
```

这与 print 具有相同的效果`name[1]`，但现在您还有一个变量，其中包含指向第二个数组元素的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T12:15:09.003

虽然 name 指向第一个元素的地址，但 name 不是`type char *`，而是`char *[4]`。所以，`sizof(name) == sizeof(char *)*4`

增加一个指针总是意味着增加它所指向的数据的大小。因此，在递增之后，它指向整个数组的**后面。**就像你有

```
 int i, a;
    int *p = &i;
    p++; 
```

p 现在将指向i**后面**。如果编译器决定将 a 放在 i 后面，它将指向 a。

另请注意，您的数组仅包含 4 个指针，而不是 4 个字符串。像上面一样，这些字符串的实际位置是编译器的选择。因此，第一个字符串的结尾不一定紧挨第二个字符串的开头。特别是如果您稍后将其他值（字符串地址）分配给 name[1]。因此，您可以将 name 转换为`char **`，但不应转换为`char *`。增加前者将指向第二个元素（第二个 char* 指针）。

# php - 通过 Ajax 获取变量

> ID：12214792
> 
> 赞同：0
> 
> 时间：2012-08-31T11:51:06.540
> 
> 标签：php, javascript, jquery, sql, ajax

我在通过 ajax 获取表时遇到问题。这是我的ajax函数：

```
function search() {
    var JobFunction_Id=document.getElementById("JobFunction_Id").value;
    var JobFamily_Id=document.getElementById("JobFamily_Id").value;
    var flag=0;
    var newreq=createRequest();
    if(JobFunction_Id!='' && JobFamily_Id!='') { flag=1; }    

    if(flag==1) {    
        var url=("Talent_S_New.php?JobFunction_Id="+JobFunction_Id+"&      JobFamily_Id="+JobFamily_Id);

        newreq.onreadystatechange=function() {
              alert('hi');
              if(newreq.readyState==4 && newreq.status==200) {

                   if(newreq.responseText!='') {
                       document.getElementById("display_result").innerHTML  =newreq.responseText; }
                    //else {    
                    // document.getElementById("display_result").innerHTML  =newreq.responseText;                     
                    //}
              }
        }
        newreq.open("GET",url,true);
        newreq.send();
    }
}​ 
```

我正在尝试从此页面获取带有表信息的输出变量。

```
echo('<table style="border:1px solid red" >');
echo('<th>');
echo('First Name');
echo('</th>');
echo('<th>');
echo('Last Name');
echo('</th>');
echo('<tr>');
echo('<td style="border:1px solid red">');

foreach($Allemp as $key=>$value) {
   if (array_key_exists('Error', $Allemp))
   {    echo($value);   }
   else
   {    echo($value["Emp_FirstName"]);  }

   //echo('</td>');
   //echo('<td style="border:1px solid red">');

   if (array_key_exists('Error', $Allemp))
   {    echo($value);   }
   else
   {    echo($value["Emp_LastName"]);   }
}
echo('</td>');
echo('</tr>');
echo('</table>'); 
```

没有 ajax 上面的代码可以正常工作。你可以观察`alert('hi')`。如果我将该警报放入`if(newreq.readyState==4 && newreq.status==200)`循环中，结果将显示一秒钟并再次消失。我认为它会进入 foreach 循环，因为它显示警报 5 次并显示结果一秒钟然后消失。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:51:15.563

由于您将其标记为 jQuery，因此我很确定其中的大部分内容都可以更改为接近于：

```
var url=("Talent_S_New.php?Function_Id="+JobFunction_Id+"&JobFamily_Id="+JobFamily_Id);
$.ajax(url, {
  type: "GET",
  success: function(data, status) {
    alert("success!");
    $("#display_result").html(data); // Incoming data placed in 'display_result'
  },
  error: function(jqXHR, textStatus){
    alert("error..");
  }
}); 
```

这是否解决了你的问题，我不知道。但是您将其标记为 jQuery，我在您的代码中没有看到一个 jQuery 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:53:10.133

为什么不使用 jQuery AJAX？

这是一个例子：

```
$.ajax({
  type: "GET",
  url:'Talent_S_New.php',
  data:$('form').serialize,
  complete: function() { alert('hi'); }
  success: function(data) {
      $('#display_result').html(data.responseText);
  } 
}); 
```

# html - 在 Metro 应用程序中存储和检索值？

> ID：12214796
> 
> 赞同：-1
> 
> 时间：2012-08-31T11:51:15.797
> 
> 标签：html, windows-8, microsoft-metro, winjs

我有一个 Metro 应用程序，其中我有登录页面，在其中输入用户名和密码字段的值。基于这些值，我的应用程序将需要调用 web 服务。谁能给我建议以存储和检索登录中的值-页？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T21:05:48.590

您还可以使用[CredentialPicker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.ui.credentialpicker.aspx)类。有关使用 CredentialPicker 并将其存储在 PasswordVault 中的完整示例，请参阅[https://gist.github.com/3790578 。](https://gist.github.com/3790578)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:34:28.310

听起来您需要 PasswordVault API。查看示例应用程序... Credential locker sample @ [http://code.msdn.microsoft.com/windowsapps/PasswordVault-f01be74a](http://code.msdn.microsoft.com/windowsapps/PasswordVault-f01be74a)并阅读 PasswordVault 类 @ [http://msdn.microsoft.com/en-us /library/windows/apps/windows.security.credentials.passwordvault.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.credentials.passwordvault.aspx)

# javascript - 用户提示值未存储在数组中

> ID：12214799
> 
> 赞同：2
> 
> 时间：2012-08-31T11:51:24.217
> 
> 标签：javascript, arrays, loops, while-loop

对编程相当陌生。我已经设置了一个提示命令，让用户输入文本或存储到数组中的数字，但是 while 循环似乎每次循环时都会重写数组值。

数组就像一个只存储一个值的变量

```
var course = new Array();
var grade = new Array();

while(confirm("Would you like to add a course?"))

    {course = prompt("Enter the course code. Example - ABC1234"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:53:00.393

要将元素添加到数组中，请使用[`array.push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push).

将最后一行更改为如下所示：

```
course.push( prompt("Enter the course code. Example - ABC1234") ); 
```

你最后也有一个失踪`}`。所以你的整个代码片段看起来像这样：

```
var course = new Array();
var grade = new Array();

while(confirm("Would you like to add a course?")){
    course.push( prompt("Enter the course code. Example - ABC1234") );
}; 
```

# sencha-touch-2 - Sencha 2 - 在视图中调用函数

> ID：12214800
> 
> 赞同：0
> 
> 时间：2012-08-31T11:51:28.420
> 
> 标签：sencha-touch-2

这是我在配置对象中的一个片段：

```
xtype: 'fieldset',
cls:   'loginFormText',
items:[
    {
        xtype: 'timepickerfield',
        label: 'Start',
        value: this.fromTime(),
        name:  'fromTime'
    },{
        xtype: 'timepickerfield',
        label: 'End',
        value: this.toTime(),
        name:  'toTime'
    }
] 
```

在视图的底部，我具有以下功能：

```
fromTime: function(){
    var fromDate = new Date();
    fromDate.setHours(12);
},
toTime: function(){
    var toDate = new Date();
    toDate.setHours(18);
} 
```

但是我尝试用“this.fromTime()”和“this.toTime()”调用它们的方式不起作用，我该如何称呼它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:24:13.340

你做不到。在创建时*this*指的是全局 Window 对象，而不是 Sencha 类。要解决此问题，您必须在 initialize() 函数中执行此操作。例如。这应该工作......

```
Ext.define (MyApp.view.CoolView, {
    xtype: 'coolview',
    config: {
        layout: 'fit'
    },

    initialize: function () {

      var items = {
        xtype: 'fieldset',
        cls:   'loginFormText',
        items:[
            {
                xtype: 'timepickerfield',
                label: 'Start',
                value: this.fromTime(),
                name:  'fromTime'
            },{
                xtype: 'timepickerfield',
                label: 'End',
                value: this.toTime(),
                name:  'toTime'
            }
        ]
      }
      this.setItems(items);
    },

    fromTime: function(){
        var fromDate = new Date();
        fromDate.setHours(12);
        return fromDate;
    },
    toTime: function(){
        var toDate = new Date();
        toDate.setHours(18);
        return toDate;
    }
}) 
```

干杯，奥列格

# python - 将字符串打印为十六进制字节

> ID：12214801
> 
> 赞同：172
> 
> 时间：2012-08-31T11:51:45.817
> 
> 标签：python, string, hex, ordinal-indicator

我有这个字符串：`Hello, World!`我想使用 Python 将其打印为 '48:65:6c:6c:6f:2c:20:57:6f:72:6c:64:21'。

`hex()`仅适用于整数。

如何做呢？

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2012-08-31T11:55:52.843

您可以将字符串转换为整数生成器。对每个元素应用十六进制格式并插入分隔符：

```
>>> s = "Hello, World!"
>>> ":".join("{:02x}".format(ord(c)) for c in s)
'48:65:6c:6c:6f:2c:20:57:6f:72:6c:64:21 
```

* * *

## 回答 #2

> 赞同：158
> 
> 时间：2012-08-31T12:00:43.777

```
':'.join(x.encode('hex') for x in 'Hello, World!') 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-12-15T12:14:58.733

对于 Python 2.x：

```
':'.join(x.encode('hex') for x in 'Hello, World!') 
```

上面的代码**不适用于 Python 3.x**。对于 3.x，下面的代码将起作用：

```
':'.join(hex(ord(x))[2:] for x in 'Hello, World!') 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-12-22T03:38:12.737

两行中的另一个答案可能会更容易阅读，并有助于调试字符串中的换行符或其他奇数字符：

对于 Python 2.7

```
for character in string:
    print character, character.encode('hex') 
```

对于 Python 3.7（未在 3 的所有版本上测试）

```
for character in string:
    print(character, character.encode('utf-8').hex()) 
```

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2013-06-02T10:57:41.433

[Fedor Gogolev 的回答的](https://stackoverflow.com/questions/12214801/print-a-string-as-hexadecimal-bytes/12214880#12214880)一些补充：

首先，如果字符串中包含*ASCII 码*小于 10 的字符，则不会按要求显示。在这种情况下，正确的格式应该是`{:02x}`：

```
>>> s = "Hello Unicode \u0005!!"
>>> ":".join("{0:x}".format(ord(c)) for c in s)
'48:65:6c:6c:6f:20:75:6e:69:63:6f:64:65:20:5:21:21'
                                           ^

>>> ":".join("{:02x}".format(ord(c)) for c in s)
'48:65:6c:6c:6f:20:75:6e:69:63:6f:64:65:20:05:21:21'
                                           ^^ 
```

其次，如果您的“字符串”实际上是一个“字节字符串”——并且由于 Python 3 中的差异很重要——您可能更喜欢以下内容：

```
>>> s = b"Hello bytes \x05!!"
>>> ":".join("{:02x}".format(c) for c in s)
'48:65:6c:6c:6f:20:62:79:74:65:73:20:05:21:21' 
```

请注意，在上面的代码中不需要进行转换，因为[字节*对象*被定义](https://docs.python.org/3/library/functions.html#bytes)为*“0 <= x < 256 范围内的不可变整数序列”*。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-05-14T03:36:50.037

> # 将字符串打印为十六进制字节？

接受的答案给出：

```
s = "Hello world !!"
":".join("{:02x}".format(ord(c)) for c in s) 
```

返回：

```
'48:65:6c:6c:6f:20:77:6f:72:6c:64:20:21:21' 
```

接受的答案仅在您使用字节（主要是 ascii 字符）时才有效。但是如果你使用 unicode，例如：

```
a_string = u"Привет мир!!" # "Prevyet mir", or "Hello World" in Russian. 
```

您需要以某种方式转换为字节。

如果您的终端不接受这些字符，您可以从 UTF-8 解码或使用名称（这样您就可以粘贴并与我一起运行代码）：

```
a_string = (
    "\N{CYRILLIC CAPITAL LETTER PE}"
    "\N{CYRILLIC SMALL LETTER ER}"
    "\N{CYRILLIC SMALL LETTER I}"
    "\N{CYRILLIC SMALL LETTER VE}"
    "\N{CYRILLIC SMALL LETTER IE}"
    "\N{CYRILLIC SMALL LETTER TE}"
    "\N{SPACE}"
    "\N{CYRILLIC SMALL LETTER EM}"
    "\N{CYRILLIC SMALL LETTER I}"
    "\N{CYRILLIC SMALL LETTER ER}"
    "\N{EXCLAMATION MARK}"
    "\N{EXCLAMATION MARK}"
) 
```

所以我们看到：

```
":".join("{:02x}".format(ord(c)) for c in a_string) 
```

返回

```
'41f:440:438:432:435:442:20:43c:438:440:21:21' 
```

一个糟糕/出乎意料的结果 - 这些**代码点**结合在一起，使我们在**Unicode**中看到的字素，来自 Unicode 联盟 - 代表世界各地的语言。这*不是*我们实际存储这些信息的方式，因此它可以被其他来源解释。

为了允许其他来源使用此数据，我们通常需要转换为 UTF-8 编码，例如，将此字符串以字节为单位保存到磁盘或发布到 html。所以我们需要编码来将代码点转换为 UTF-8 的**代码单元**——在 Python 3 中，`ord`不需要，因为`bytes`整数的可迭代：

```
>>> ":".join("{:02x}".format(c) for c in a_string.encode('utf-8'))
'd0:9f:d1:80:d0:b8:d0:b2:d0:b5:d1:82:20:d0:bc:d0:b8:d1:80:21:21' 
```

或者更优雅地使用新的 f 字符串（仅在 Python 3 中可用）：

```
>>> ":".join(f'{c:02x}' for c in a_string.encode('utf-8'))
'd0:9f:d1:80:d0:b8:d0:b2:d0:b5:d1:82:20:d0:bc:d0:b8:d1:80:21:21' 
```

在 Python 2 中，传递`c`给`ord`first，即`ord(c)`- 更多示例：

```
>>> ":".join("{:02x}".format(ord(c)) for c in a_string.encode('utf-8'))
'd0:9f:d1:80:d0:b8:d0:b2:d0:b5:d1:82:20:d0:bc:d0:b8:d1:80:21:21'
>>> ":".join(format(ord(c), '02x') for c in a_string.encode('utf-8'))
'd0:9f:d1:80:d0:b8:d0:b2:d0:b5:d1:82:20:d0:bc:d0:b8:d1:80:21:21' 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-10-12T17:57:14.890

你可以使用[`hexdump`](https://pypi.python.org/pypi/hexdump)'s：

```
import hexdump
hexdump.dump("Hello, World!", sep=":") 
```

`.lower()`（如果您需要小写，请附加）。这适用于 Python 2 和 3。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2016-09-25T02:14:38.713

使用 map 和 lambda 函数可以生成一个十六进制值列表，可以打印（或用于其他目的）

```
>>> s = 'Hello 1 2 3 \x01\x02\x03 :)'

>>> map(lambda c: hex(ord(c)), s)
['0x48', '0x65', '0x6c', '0x6c', '0x6f', '0x20', '0x31', '0x20', '0x32', '0x20', '0x33', '0x20', '0x1', '0x2', '0x3', '0x20', '0x3a', '0x29'] 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-02-28T20:50:05.227

对于那些不关心 Python 3 或冒号的人来说更通用一点：

```
from codecs import encode

data = open('/dev/urandom', 'rb').read(20)
print(encode(data, 'hex'))      # Data

print(encode(b"hello", 'hex'))  # String 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-09-10T16:03:16.230

这可以通过以下方式完成：

```
from __future__ import print_function
str = "Hello, World!"
for char in str:
    mm = int(char.encode('hex'), 16)
    print(hex(mm), sep=':', end=' ') 
```

其输出将是十六进制，如下所示：

> 0x48 0x65 0x6c 0x6c 0x6f 0x20 0x57 0x6f 0x72 0x6c 0x64 0x21

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-02-21T20:30:04.973

对于提供比 更多性能的东西`''.format()`，您可以使用：

```
>>> ':'.join( '%02x'%(v if type(v) is int else ord(v)) for v in 'Hello, World!' )
'48:65:6C:6C:6F:2C:20:57:6F:72:6C:64:21'
>>> 
>>> ':'.join( '%02x'%(v if type(v) is int else ord(v)) for v in b'Hello, World!' )
'48:65:6C:6C:6F:2C:20:57:6F:72:6C:64:21'
>>> 
```

我很抱歉这看起来不能更好。

如果一个人可以简单地做就好了`'%02x'%v`，但这只需要int ...

但是你会被没有逻辑的字节串困住`b''`select `ord(v)`。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-12-28T14:51:51.873

使用 f 字符串：

```
"".join(f"{ord(c):x}" for c in "Hello") 
```

使用任何分隔符：

```
>>> "⚡&quot;.join(f"{ord(c):x}" for c in "Hello")
'48⚡65⚡6c⚡6c⚡6f' 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-12T15:00:48.453

只是为了方便，很简单。

```
def hexlify_byteString(byteString, delim="%"):
    ''' Very simple way to hexlify a byte string using delimiters '''
    retval = ""
    for intval in byteString:
        retval += ('0123456789ABCDEF'[int(intval / 16)])
        retval += ('0123456789ABCDEF'[int(intval % 16)])
        retval += delim
    return(retval[:-1])

hexlify_byteString(b'Hello, World!', ":")
# Out[439]: '48:65:6C:6C:6F:2C:20:57:6F:72:6C:64:21' 
```

# java - 如何格式化电子邮件中的字符串，以便在 Outlook 中以表格格式显示？

> ID：12214802
> 
> 赞同：0
> 
> 时间：2012-08-31T11:51:48.370
> 
> 标签：java

我想从java生成一封电子邮件。通过将邮件正文格式化为具有正确对齐的表格格式。有人可以帮我如何将邮件正文格式化为表格格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:10:05.140

您必须将您的消息设置为接受 html

这是一个工作示例

```
Message msg = new MimeMessage(session);
msg.setFrom(new InternetAddress(from));
.......
msg.setSubject(subject);
.......
MimeBodyPart mbp1 = new MimeBodyPart();
mbp1.setContent(html, "text/html;charset=UTF-8");
MimeMultipart mp = new MimeMultipart();
mp.addBodyPart(mbp1);
msg.setContent(mp); 
```

从那里开始，由您决定如何格式化消息的外观（上面示例中的**html**变量）

# php - 如何在表单提交之前在警报窗口中显示选定的复选框？

> ID：12214806
> 
> 赞同：0
> 
> 时间：2012-08-31T11:51:56.370
> 
> 标签：php, javascript, forms, post, alert

我有一个表格，用于编辑和删除我们办公室的电话目录条目。每行显示人员的姓名和电话号码等，并有一个复选框。

表单基本上有两个按钮，编辑和删除。您浏览并选择要编辑或删除的所有行，然后提交表单。

我想要做的是在按下删除按钮时发出警报，要求在删除之前进行确认。我想做的是列出在此警报窗口中标记为删除的所有行。

我不确定这是否可能，因为在提交表单之前 POST 数据不可用，而这又会被警报窗口阻止。

这可以使用 PHP 和 javascript 吗？我在下面包含了一些代码示例：

```
<form name="manage" method="post" action="edit.php">
    <input type="submit" name="add" value="Add">
    <input type="submit" name="edit" value="Edit">
    <input type="submit" name="delete" value="Delete">

//For each row found
while($row = mysql_fetch_assoc($result)) {
    //Echo out a row with details
    echo "<tr>
        <td><input type='checkbox' name='dirid[]' value='".$row['Dir ID']."' /></td>
        <td>".$row['Floor']."</td>
        <td>".$row['First Name']."</td>
        <td>".$row['Last Name']."</td>
        <td>".$row['Extension']."</td>
        <td>".$row['Department']."</td>
        </tr>";
}
</form> 
```

目前，发布的所有内容都是 dirid，它只是表中每一行的唯一 ID。然后删除脚本查询数据库，并删除每个 ID 的每一行

我想如果在警报窗口中不可能，我也可以将 ID 发送到删除脚本，用确认按钮在页面上显示它们，然后在上面放上警报，但似乎有点长风。

任何建议都非常感谢。

编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:37:17.660

也许你可以用jquery在这里你有类似的东西 [http://jsfiddle.net/damian_silvera/Cxqp5/](http://jsfiddle.net/damian_silvera/Cxqp5/)

# php - 试图使用 php 转义文件中的某些值？

> ID：12214815
> 
> 赞同：2
> 
> 时间：2012-08-31T11:52:08.043
> 
> 标签：php

我有这个我想打开的文件，一个 csv 文件，我想转义每行数据的第一个和第四个值，一个由 . 表示的数据记录`$i`。

当我说数据记录时，我指的是用逗号分隔的每个数据，即

数据1，数据2，数据3，数据4 ....等。

到目前为止，这是我的解决方案：

```
while (($data = fgetcsv($file_opener, 1000, ",")) !== FALSE) {
          $num = count($data);

              for ($i=0; $i < $num; $i++) {
                // for each 2nd and 3rd value push to array
                 array_push($Ages, $data[$i]);
               // if 1st and fourth value do nothing.
              } 
```

我希望这不会令人困惑，如果您需要澄清让我知道，我确实检查了 php 文档，我试图使用 array_chunk 和 map 方法，但我不知道如何在这种情况下使用它们。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:11:30.180

仍然不确定您要实现什么，但此脚本会从记录中的每个 4 列组中删除*每个第 1 和第 4 个元素。*

```
<?php
while( false!==($record=getNextRow()) ) {
    foreach($record as $k=>$v) {
        $rpos = $k % 4;
        if ( 0==$rpos || 3==$rpos ) {
            unset($record[$k]);
        }
    }
    echo join(', ', $record), "\n";
}

function getNextRow() {
    // just boilerplate to make it a self-contained example
    // this would be plain fgetcsv in yor case
    static $source = array('1,2,3,4,5,6,7,8', 'a,b,c,d,e,f,g,h,i,j,k,l', 'I,II,III,IV,V,VI,VII,VIII','IX');
    list(,$r) = each($source);
    return $r ? str_getcsv($r) : false;
} 
```

印刷

```
2, 3, 6, 7
b, c, f, g, j, k
II, III, VI, VII 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:55:59.317

```
while (($data = fgetcsv($file_opener, 1000, ",")) !== FALSE) {
    $num = count($data);

    for ($i=0; $i < $num; $i++) {
        if($i == 1 || $i == 2) {
            array_push($Ages, $data[$i]);
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:03:56.923

我不明白，如果你想`$Ages`成为一维或多维。

在**一维**的情况下，如果输入是：

```
32, 554, 64, 34, 24, 43, 76
43, 322, 43, 543, 23, 54, 54
45, 34, 5654, 23, 43, 2, 5 
```

此代码将填写`$Ages`：

```
while (($data = fgetcsv($file_opener, 1000, ",")) !== FALSE) {
    $num = count($data);

    for ($i=1; $i < $num; $i++) {
        if($i == 3) {
            continue;
        }
        array_push($Ages, $data[$i]);
    }

} 
```

看起来`$Ages`像：

```
array(554, 64, 34, 24, 43, 76, 
    322, 43, 23, 54, 54, 
    34, 5654, 43, 2, 5); 
```

在**多维**的情况下，如果输入相同，则此代码：

```
while (($data = fgetcsv($file_opener, 1000, ",")) !== FALSE) {
    $num = count($data);

    unset(data[0]);
    unset(data[3]);

    array_push($Ages, $data);

} 
```

看起来`$Ages`像：

```
array(
    (554, 64, 34, 24, 43, 76), 
    (322, 43, 23, 54, 54), 
    (34, 5654, 43, 2, 5)
); 
```

# java - 顶部带有 JComponents 的动画

> ID：12214827
> 
> 赞同：2
> 
> 时间：2012-08-31T11:52:42.783
> 
> 标签：java, swing, animation

我想问一下，是否有人可以解决我面临的问题。我正在一个应用程序中工作，该应用程序绘制动画 - 例如带有移动对象的地图。我的问题是，在绘图的顶部，还放置了一个 Jtable、Jlist 以及其他组件。

在我的特定示例中，所有这些组件都已添加到保存地图的面板中。结果，每个组件都像我的 fps 一样频繁地重绘。因此，使其中一张表不可见可以将本来就很高的 cpu 使用率（有时大约 50% 降低到 30% 以下）降低。

我的问题是，我怎样才能避免调用有些静态的视觉内容 paintComponent() 方法，而没有“背景” - 地图 - 使菜单变白。

由于动画永久重绘菜单根本不显示，如果它与相应的 JPanel 分开。

最初的想法转向以下方向：

剪辑——实际上没有我想的那么好，因为我喜欢在菜单中移动。JLayeredPane - 已经尝试过但似乎结果是，菜单的paintComponent 方法仍然被频繁调用。JWindow/Internal Frame - 几分钟前有这个想法。拥有一个完整的独立容器应该可以处理我的问题，或者？

我期待着，如果有人有一个优雅的想法，如何解决这个问题并显着减少 CPU 使用率。

谢谢！！此致。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:57:38.380

对于绘画过度`JComponent(s)`放置在`JPanel`你有看

1.  基于[JXLayer(Java6)的](http://java.net/projects/jxlayer/)[JLayer(Java7 )](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

2.  [GlassPane](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)，注意都`JComponents`必须是轻量级的，否则`GlassPane`落后于重量级`(J)Components`

3.  可以画到[JViewport](https://stackoverflow.com/questions/8614972/passing-current-date)，

编辑

4.  您必须使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)移动[图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)（在[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)中）放入`JXLayer`，`GlassPane`或者`JViewport`，不要使用`Runnable#Thread`并且永远不要，而不是使用普通`Thread.sleep(int)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T11:58:18.660

我会为剪辑创建一个自定义形状。使用 Area 类并从 Area 中减去所有子组件的边界。

# c# - 如何将 IsSelected for MVVM 移出业务对象？

> ID：12214839
> 
> 赞同：0
> 
> 时间：2012-08-31T11:53:38.740
> 
> 标签：c#, wpf, listview, mvvm, viewmodel

我在 C#/WPF 中有一个相当大的应用程序，它是用 MVVM 制作的（有点）。在列表视图中，我使用 IsSelected 绑定到所选项目。这些 IsSelected 属性位于我的应用程序的模型中，而不是 ViewModel 中。

目前我只有一个视图模型指向业务对象中的一个列表（模型，而不是视图模型），但将来我可能想要更改它，并且模型内的 IsSelected 属性不再可能（否则两个 ViewModel 都会有相同的选定项目）。

选择模式是多重的，范围可以在 1 到 128（列表的最大长度）项之间。

我认为它应该以某种方式在视图模型中，但是我应该如何实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T12:15:42.077

使用 MVVM 时，您不受限于单一视图模型。是的，您可以*从*视图模型中公开模型的一部分，但您也可以公开*其他*视图模型。

在这种情况下，我建议将集合的实例包装在它们*自己的*视图模型中，并将您的项目模板的绑定根设置为此。

例如，如果您将数据绑定到模型集合，您可以将每个模型的实例传递给包装模型的视图模型，然后`IsSelected`在视图模型上公开 for 绑定。

# javascript - 小时候打开fancybox（iframe）？

> ID：12214842
> 
> 赞同：4
> 
> 时间：2012-08-31T11:53:49.750
> 
> 标签：javascript, iframe, fancybox, parent-child

如果可能的话，我希望使用 iframe 作为父母的孩子打开一个花式框。

是否可以打开一个 iframe（用 fancybox 构建）并让浏览器相信我已经使用 window.open 打开了它，这样功能就像`window.close()`或`window.opener.location.reload()`仍然可以工作？

fancybox 代码很简单：

```
$("#custom_alert").fancybox({
        'width'             : w,
        'height'            : h,
        'autoScale'         : false,
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'type'              : 'iframe',
        //'scrolling'         : 'no'
    }).trigger('click'); 
```

编辑：我不能使用如下功能：

```
function closePopup(){
     window.close();
     if(parent.jQuery().fancybox) {
      parent.jQuery.fancybox.close();
     }
} 
```

我必须使用 window.close() 函数。

解决我的问题的方法也可以是告诉我为什么我不能像使用警报或确认那样重写关闭函数。

编辑 2：感谢 Raohmaru 和 JFK，在看到小提琴工作后，我已经完成了我需要的功能，但是（对我来说）一件奇怪的事情正在发生：

工作代码，如果其他人需要它是：

```
(function() {
  var proxied = window.close;
  window.close = function() {
    if(parent.jQuery().fancybox) {
        parent.jQuery.fancybox.close();
    }
    else
        return proxied.apply(this, arguments);
  };
})(); 
```

这适用于 fancybox 和 window.open 案例。

我的问题是：我在索引中包含了一些 .js 文件：

```
overwrites
fancybox pack
general scripts 
```

如果我将该函数放在通用脚本中，它可以完美运行，但是如果我将它放在覆盖 js 中（它应该在哪里），它就不起作用（没有控制台错误，只是没有任何反应）。我曾尝试交换包含的位置，但没有运气。

这就是为什么我不能从一开始就让它工作的原因，因为我总是将它包含在覆盖的 .js 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:42:30.083

您可以做的是验证页面是否已在fancybox 中打开并执行正确的fancybox 方法，否则只需使用您的常规javascript 方法（即`window.close()`）

话虽如此，在打开的页面（通过`window.open()`或fancybox）中，您可能具有关闭它的功能

```
function closePopup(){
 window.close();
} 
```

关联到关闭按钮/链接，例如

```
<a href="javascript:;" onclick="closePopup()" >Close Window</a> 
```

这肯定会关闭弹出窗口，但不会关闭花式框，因此您可以添加以下内容：

```
function closePopup(){
 window.close();
 if(parent.jQuery().fancybox) {
  parent.jQuery.fancybox.close();
 }
} 
```

and that will work for either the popup window or fancybox.

# ios - XCode - 如何访问特定文件路径中的数据

> ID：12214843
> 
> 赞同：0
> 
> 时间：2012-08-31T11:53:54.107
> 
> 标签：ios, xcode

我想根据某些参数访问不同文件路径中的数据（具体来说是 xml）。简而言之，有一个 /Saves/ 文件夹，其中包含其他几个文件夹（/Save1/、/Save2/、/Save3/ 等）。我希望能够解析。

假设我要访问的文件位于以下路径中：

```
/../projectname/Saves/Save1/dialogue.xml 
```

在*finder*中，我创建了文件夹子结构，然后将其复制到我的 XCode 项目中。这意味着，这些文件夹存在于文件结构中，而不仅仅存在于 XCode 中。之后我尝试执行以下操作：

```
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:"@/Saves/Save1/dialogue.xml"];
NSData *xmlData = [[NSMutableData alloc] initWithContentsOfFile:path]; 
```

但是，这似乎无法正常工作。记录路径变量我得到以下信息：

```
/Users/<username>/Library/Application Support/iPhone Simulator/5.1/Application/<appcode>/<appname>.app/Saves/Save1/dialogue.xml 
```

我的错在哪里？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:59:07.427

请确保您在项目目标中也添加了相同的文件夹。您在项目目标下添加相同的结构并编译，然后将在您的 .app 文件中创建相同的文件夹。然后您可以按照您提到的方式访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:02:55.230

试试这个：

```
//NSString *path  =  [[NSBundle mainBundle] pathForResource:@"dialogue" ofType:@"xml" inDirectory:@"Saves/Save1"];
NSString *path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Saves/Save1/dialogue.xml"];
if([[NSFileManager defaultManager] fileExitsAtPath:path])
{
    NSMutableData *xmlData = [[NSMutableData alloc] initWithContentsOfFile:path];
}
else
{
    NSLog(@"File doesnot exits");
} 
```

# php - Woocommerce 商店显示类别

> ID：12214845
> 
> 赞同：2
> 
> 时间：2012-08-31T11:54:01.627
> 
> 标签：php, wordpress, wordpress-theming, woocommerce

我是 wordpress 新手，所以如果我弄错了语言，请仍然帮助我。

使用 woocommerce 显示具有可变产品的商店，我希望商店链接登录页面显示具有该类别特色图像的商店类别。

我当前的商店页面显示所有产品，并分页到其他产品页面，我找不到所有产品的模板。

当我进入 wp-admin 中的商店页面并单击编辑页面时，它是空的，所以我不确定他们是如何到达那里的，我查看了 HTML 而不仅仅是可视化编辑器。

非常感谢阿萨。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-01T18:36:18.330

`'WooCommerce -> Settings'`这很简单，只需从侧边栏管理菜单转到链接并选择选项卡，然后勾选底部的`'Catalog'`2 个复选框`"Show subcategories on the shop page"`和按钮。`"When showing subcategories, hide product" -> click 'Save Changes'`而已！你完成了！

现在访问“商店”页面，您将能够看到类别。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-16T14:12:59.677

这现在位于`Woocommerce -> Settings -> Products -> Display`“商店页面显示”下拉菜单中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-12T05:39:55.330

在当前版本 3.4.5 下没有显示选项`Woocommerce -> Settings -> Products -> Display`。它已移至定制器下`Woocommerce->Product Catalog`

# android - 将二维数组传递给另一个活动

> ID：12214847
> 
> 赞同：8
> 
> 时间：2012-08-31T11:54:07.040
> 
> 标签：android, multidimensional-array, parcelable

我如何将 2 个教派数组对象作为参数传递给另一个活动

如何在另一个活动中获取二维数组字符串值

```
 String [][]str;

    Intent l = new Intent(context,AgAppMenu.class);
                 l.putExtra("msg",str);
                 l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   
                 context.startActivity(l);

  another Activity class

   String[][] xmlRespone2;

    xmlRespone2 = getIntent().getExtras().getString("msg"); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T12:00:06.147

您可以使用[putSerializable。](http://developer.android.com/reference/android/os/Bundle.html#putSerializable%28java.lang.String,%20java.io.Serializable%29)数组是可序列化的。

储藏：

`bundle.putSerializable("list", selected_list);` // 这里的 bundle 是 Bundle 对象。

访问：

```
String[][] passedString_list = (String[][]) bundle.getSerializable("list"); 
```

## 例子

```
Intent mIntent = new Intent(this, Example.class);
Bundle mBundle = new Bundle();
mBundle.putSerializable("list", selected_list);
mIntent.putExtras(mBundle); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-28T13:38:59.793

这终于对我有用：

要开始一个新活动（发送 String[][] 和 String）：

```
String[][] arrayToSend=new String[3][30];
String stringToSend="Hello";
Intent i = new Intent(this, NewActivity.class);

i.putExtra("key_string",stringToSend);

Bundle mBundle = new Bundle();
mBundle.putSerializable("key_array_array",  arrayToSend);
i.putExtras(mBundle);

startActivity(i); 
```

在 NewActivity.onCreate 中访问：

```
String sReceived=getIntent().getExtras().getString("key_string");

String[][] arrayReceived=null;
Object[] objectArray = (Object[]) getIntent().getExtras().getSerializable("key_array_array");
if(objectArray!=null){
    arrayReceived = new String[objectArray.length][];
    for(int i=0;i<objectArray.length;i++){
        arrayReceived[i]=(String[]) objectArray[i];
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:58:05.837

您可以定义一个自定义类，该类实现`Parcelable`并包含从 Parcel 读取和写入二维数组的逻辑。然后，将那个可包裹的物品放入里面`Bundle`进行运输。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T21:03:56.420

将 2darray 设置为 public static void。让 current_class 成为我们在其中创建二维数组的类 我们想要将数据传递给 NewActivity

```
Class<?> ourClass=Class.forName("com.example.testapp.NewActivity");
Intent ourIntent= new Intent(current_class.this,ourClass);
intent_name.putExtra("name", 2darray_name);
startActivity(ourIntent);` 
```

要在 NewActivity 中访问它，请使用 current_class.2darray_name 其中 current_class 是它最初定义的类。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-31T12:00:47.987

一个解决方案是您可以将其设置为静态，以便您可以在任何活动中使用它。

```
Class A{
 public static String [][]str;
...
    Intent l = new Intent(context,AgAppMenu.class);
                 l.putExtra("msg",str);
                 l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   
                 context.startActivity(l);

}

Class B{

...
you can use it with Just A.(ArrayName)
System.out.println(A.str);

} 
```

希望它会帮助你。

# c# - 格式化 ASP.NET Gridview Money 值

> ID：12214850
> 
> 赞同：1
> 
> 时间：2012-08-31T11:54:26.463
> 
> 标签：c#, asp.net, gridview

我的网格视图中有以下列

```
<asp:BoundField ItemStyle-Font-Bold="true" 
            DataFormatString="£{0:C2}" DataField="PriceBasePrice"
            HeaderText="Price you pay" ItemStyle-Width="120" /> 
```

传递给 Column 的值是 180.0

我认为：

```
 DataFormatString="£{0:C2}" 
```

价值将返回 180.00 英镑

但它的回报为 180.0 英镑

有谁知道我应该使用什么 DataFormatString ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T11:57:54.200

如果删除 2，默认情况下，它应该显示具有 2 个十进制值的数字。

```
{0:C} 
```

[看这里](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T12:14:15.527

您可能需要将 HtmlEncode 属性设置为 false 以防止首先将值强制转换为字符串。

或者，您可以只指定您自己的格式字符串：

```
DataFormatString="£{0:###,###,###.00}" 
```

# 是空的，直到如果存在则替换为一个值，*如果*存在则将 0 替换为一个值，否则它们保持为 0。

Se 自定义数字格式字符串 - [http://msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

# internet-explorer - 如何禁用 Internet Explorer 超前下载器？

> ID：12214861
> 
> 赞同：3
> 
> 时间：2012-08-31T11:54:48.007
> 
> 标签：internet-explorer, tomcat, lookahead

我们有一个带有登录页面的项目。登录时，会话被设置，客户端被重定向到 webapp。

一切正常，除了在我们生产时，一些 Internet Explorer 8 客户端正在使用前瞻下载器。由于尚未设置单点登录会话，因此预加载器正在尝试获取一些 javascript 文件，但会显示一个带有 javascript 扩展名的登录页面。导致 Internet Explorer 浏览器提示用户安全警告和下载 javascript 文件的问题。

我们试图在 http-equiv 元数据中设置一个字符集，因为据说这会停止前瞻下载器。但是没有用，我们仍然在某些客户端上获得了下载框。

似乎 IE 甚至被设置为遵循 javascript 重定向，而且看起来不可能阻止这种情况的发生。

有没有人认识到这一点并知道解决方案，因为这让我发疯。

# perl - 使用 Perl 解析 CSV 文件从特定行到文件末尾

> ID：12214862
> 
> 赞同：6
> 
> 时间：2012-08-31T11:54:49.753
> 
> 标签：perl, csv, perl-module

我对 Perl 很陌生，需要你的帮助

我有一个`xyz.csv`包含内容的 CSV 文件：

**这里 level1 和 er 值是字符串名称...不是数字...**

```
level1,er
level2,er2
level3,er3
level4,er4 
```

我使用下面的脚本解析这个 CSV 文件，并在第一次运行时将这些字段传递给一个数组

```
open(my $d, '<', $file) or die "Could not open '$file' $!\n";
while (my $line = <$d>) {
  chomp $line; 
  my @data = split "," , $line; 
  @XYX = ( [ "$data[0]", "$data[1]" ], );
} 
```

对于第二次运行，我从命令提示符获取输入并存储在变量中`$val`。我的程序应该从存储在变量中的值解析 CSV 文件，直到它到达文件末尾

例如

我输入`level2`，所以我需要一个脚本来解析从第二行到 CSV 文件的末尾，忽略文件中之前的值`level2`，并将这些值 ( `level2`to `level4`) 传递给`@XYX = (["$data[1]","$data[1]"],);}`

```
level2,er2
level3,er3
level4,er4 
```

我输入`level3`，所以我需要一个脚本来从第三行解析到 CSV 文件的末尾，忽略文件中之前的值`level3`，并将这些值（`level3`和`level4`）传递给`@XYX = (["$data[0]","$data[1]"],);}`

```
level3,er3
level4,er4 
```

我该如何做到这一点？请务必提出您宝贵的建议。我感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T12:57:09.593

只要您确定数据中*没有*任何逗号，您就可以使用`split`. 但即便如此，将拆分限制为两个字段是明智的，这样你就可以得到第一个逗号和它之后的所有内容

您的代码存在一些问题。首先，我希望您将`use strict`and`use warnings`放在所有 Perl 程序的首位。这个简单的措施将发现许多您可能会忽略的琐碎问题，因此在您寻求代码帮助之前尤为重要

这并不为人所知，但在字符串`"\n"`末尾添加换行符会`die`阻止 Perl 在错误发生的输出中提供文件和行号详细信息。虽然这可能是您想要的，但提供额外信息通常更有帮助

您的变量名非常无用，并且按照惯例 Perl 变量由小写字母数字和下划线组成。像这样的名字`@XYX`并`$W`不能帮助我理解你的代码！

与其拆分为一个数组，不如将这两个字段放入两个标量变量中以避免所有索引。而且我不确定您的意图是什么`@XYX = (["$data[1]","$data[1]"],)`。首先，您真的是要使用`$data[1]`两次吗？其次，你不应该*把*标量变量放在双引号内，因为它做了一些非常具体的事情，除非你知道那是什么，否则你应该避免它。最后，您的意思是在循环中每次都`push`使用匿名数组吗？`@XYX`否则每次从文件中读取一行，数组的内容都会被覆盖，之前的数据会丢失

该程序使用正则表达式`$level_num`从第一个字段中提取。它所做的就是找到字符串中的第一个数字序列，然后可以将其与所需的最低级别进行比较，`$min_level`以确定日志中的一行是否相关

```
use strict;
use warnings;

my $file = 'xyz.csv';
my $min_level = 3;
my @list;

open my $fh, '<', $file or die "Could not open '$file' $!";

while (my $line = <$fh>) {
  chomp $line; 
  my ($level, $error) = split ',', $line, 2;
  my ($level_num) = $level =~ /(\d+)/;
  next unless $level_num >= $min_level;
  push @list, [ $level, $error ];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T12:30:05.043

为了决定要处理哪些记录，您可以使用“触发器”运算符 ( `..`)。

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

my $level = shift || 'level1';

while (<DATA>) {
  if (/^\Q$level,/ .. 0) {
    print;
  }
}

__DATA__
level1,er
level2,er2
level3,er3
level4,er4 
```

触发器运算符返回假，直到它的第一个操作数为真。那时它返回 false，直到它的第二个操作数为 true；此时它再次返回 false。

我假设您的文件是有序的，因此一旦您开始处理它，您就永远不想停止。这意味着触发器的第一个操作数可以是`/^\Q$level,/`（匹配行首的字符串`$level`），第二个操作数可以是零（因为我们不希望它停止处理）。

我还强烈建议**不要**使用`split /,/`. 这可能适用于您当前的数据，但一般来说，CSV 文件中的字段允许包含嵌入的逗号，这会破坏这种方法。相反，请查看[Text::CSV](https://metacpan.org/release/Text-CSV)或[Text::ParseWords](https://metacpan.org/release/Text-ParseWords)（包含在标准 Perl 发行版中）。

**更新：**我似乎对此有一些反对意见。如果人们愿意花时间解释原因，那就太好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T13:38:23.093

```
#!/usr/bin/perl

use strict;
use warnings;
use Text::CSV;

my @XYZ;
my $file = 'xyz.csv';
open my $fh, '<', $file or die "$file: $!\n";

my $level = shift; # get level from commandline
my $getall = not defined $level; # true if level not given on commandline

my $parser = Text::CSV->new({ binary => 1 }); # object for parsing lines of CSV

while (my $row = $parser->getline($fh)) # $row is an array reference containing cells from a line of CSV
{
  if ($getall # if level was not given on commandline, then put all rows into @XYZ
      or      # if level *was* given on commandline, then...
      $row->[0] eq $level .. 0 # ...wait until the first cell in a row equals $level, then put that row and all subsequent rows into @XYZ
     )
  {
    push @XYZ, $row;
  }
}

close $fh; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T09:03:58.510

```
#!/usr/bin/perl  
use strict;     
use warnings;
open(my $data, '<', $file) or die "Could not open '$file' $!\n"; 
my $level = shift ||"level1"; 
while (my $line = <$data>) {  
chomp $line; 
my @fields = split "," , $line; 
if($fields[0] eq $level .. 0){
print "\n$fields[0]\n";
print "$fields[1]\n";
}} 
```

这有效....感谢大家的帮助...

# php - Mysql查询：加入或分离

> ID：12214864
> 
> 赞同：0
> 
> 时间：2012-08-31T11:54:51.050
> 
> 标签：php, mysql

我有两张桌子：

一个称为**数据**，每个 ID 只有一个（唯一）行。第二个称为**图像**，每个 ID 有 3 行。

每次页面加载时，我都想为**5 个**不同的 ID 获取数据和一张图像。

我现在的问题是：两个单独的 SELECT 查询或一个同时连接的查询。

**查询：**

```
...

$all = $row["iD"] // includes **5** last iDs - fetched from DB
$all = implode(',',$all);

SELECT Name, Address FROM data WHERE iD IN($all);
SELECT url FROM images WHERE iD IN ($all) LIMIT 1; 
```

我在页面上已经有 3 个其他*选择*查询，所以我想知道在性能方面什么是最好的，一个更大 - 加入或两个小 - 更快的查询。

如果加入，这两者将如何加入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:01:50.357

您每个 ID 有三个图像，并且希望每个 ID 有一个图像用于最后插入的图像（也称为“最近的内容”）？

然后你可以像这样使用一个简单的自然连接与 group by 结合：

```
SELECT d.Name, d.Address, MAX(i.url) 
FROM data d, images i
WHERE i.iD = d.iD
GROUP BY d.Name, d.Address
ORDER BY d.iD DESC
LIMIT 5 
```

大多数情况下，最好结合选择来跳过程序开销（例如，在循环本身中调用 mysql_query()）。但有时它取决于基础数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:15:16.750

有关性能问题的答案，请参阅[JOIN queries vs multiple queries](https://stackoverflow.com/questions/1067016/join-queries-vs-multiple-queries)。我可以从那里了解到，性能问题因具体情况而异，因此您应该同时测试两者。

对于加入，你可以这样做；

```
SELECT User.iD, User.Name, User.Address, Image.url
FROM images as Image
JOIN data as User
  ON Image.iD = User.iD
WHERE Image.iD IN ($all)
LIMIT 1; 
```

它尚未经过测试，因此您应该与一粒盐一起服用。这至少是一个起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:04:33.463

由于您的查询转到完全独立的表，我建议您保留 2 个单独的查询：这样可以使结果集更小，并且更有可能至少有一个保留在查询缓存中，

关于你的第二个查询：你明白吗，这不能保证获取一个特殊的 URL，但是有吗？主要是第一个键，但不能保证如此。

# java - 从java中的子类调用泛型方法

> ID：12214866
> 
> 赞同：4
> 
> 时间：2012-08-31T11:54:57.883
> 
> 标签：java, generics

我是泛型新手，这是我的问题：

```
public class Tree<T> {
    public Collection<Tree<T>> getSubTrees(){};
    public Tree<T> getTree(T element){}
}

public class DataTree extends Tree<Data>{
    public void someMethod(){
        DataTree dataTree = this.getTree(root) ;// type mismatch
        Collection<DataTree> leafs = this.getSubTrees(); //type mismatch 

        //following works 
        Tree<Data> dataTree = this.getTree(root);
        Collection<Tree<Data>> leafs = this.getSubTrees();
    }
} 
```

你能告诉我为什么会出现这样的错误，或者如何正确地将 Tree<Data> 转换为 DataTree 以调用 DataTree 特定的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T11:57:55.510

`DataTree`是`Tree<Data>`但`Tree<Data>` **并非总是如此** `DataTree`。

你回来了`Tree<T>`，不是`DataTree`。基类不能转换为派生类。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T11:59:50.687

什么是根？？？它是数据元素吗？

尝试类型转换
DataTree dataTree = (DataTree)this.getTree(root)

好吧，我认为继承层次结构不会支持这一点，但您仍然可以尝试。

# c - C中的可移植嵌套函数

> ID：12214867
> 
> 赞同：6
> 
> 时间：2012-08-31T11:55:00.143
> 
> 标签：c, gcc, clang, nested-function

是否可以使用嵌套函数/块编写可移植的 C 代码？

我知道 gcc 只支持嵌套函数作为非标准扩展，而 clang 只支持块 - 但是有没有办法编写代码，可以在使用标准 C 和 MACROS 时编译？

如果不可能 - 最好的解决方法是什么？例如，如何实现以下带参数的可移植版本？GCC 中的简单示例：

```
int main(int argc, char*[] argv)
{
  char reverse = 0;

  int cmp_func(const void *a, const void *b)
  {
    const int* aa = (const int)a;
    const int* bb = (const int)b;
    return (reverse) ? aa - bb : bb - aa;
  }

  int list[8] = {1,2,3,4,5,20,100,200};
  qsort(list, 8, sizeof(int), &cmp_func);
} 
```

可以使用 Clang 中的 Blocks 将类似的示例放在一起。理想情况下，解决方案应该是线程安全的（因此避免使用全局变量）。

**编辑：**为清楚起见，让我们假设“标准”是指 C99。上面是一个简单的例子。我所追求的是一种需要一些参数的 C99 方法。在这里它只使用一个 char 作为布尔值，但我正在寻求一个需要多个整数等的解决方案。看起来如果没有全局变量，这可能是不可能的。

**编辑 2：**我意识到将 void 指针与函数指针一起传递可以让您完成所有可以使用嵌套函数完成的事情。感谢@Quuxplusone 的建议`qsort_r`和`qsort_s`. 我试图在 and 上放置一个便携式包装`qsort_r`器`qsort_s`。它需要一个比较器函数和一个 void 指针来存储状态，从而消除了对复杂排序算法的嵌套函数的依赖——因此您可以使用 GCC 和 Clang 进行编译。

```
typedef struct
{
  void *arg;
  int (*compar)(const void *a1, const void *a2, void *aarg);
} SortStruct;

int cmp_switch(void *s, const void *aa, const void *bb)
{
  SortStruct *ss = (SortStruct*)s;
  return (ss->compar)(aa, bb, ss->arg);
}

void sort_r(void *base, size_t nel, size_t width,
            int (*compar)(const void *a1, const void *a2, void *aarg), void *arg)
{
  #if (defined _GNU_SOURCE || defined __GNU__ || defined __linux__)

    qsort_r(base, nel, width, compar, arg);

  #elif (defined __APPLE__ || defined __MACH__ || defined __DARWIN__ || \
         defined __FREEBSD__ || defined __BSD__ || \
         defined OpenBSD3_1 || defined OpenBSD3_9)

    SortStruct tmp = {arg, compar};
    qsort_r(base, nel, width, &tmp, &cmp_switch);

  #elif (defined _WIN32 || defined _WIN64 || defined __WINDOWS__)

    SortStruct tmp = {arg, compar};
    qsort_s(*base, nel, width, &cmp_switch, &tmp);

  #else
    #error Cannot detect operating system
  #endif
} 
```

注意：我没有在很多平台上测试过这个，所以如果你发现一个错误/这在你的机器上不起作用，请告诉我。

作为使用示例，我实现了与所选答案相同的排序：

```
int sort_r_cmp(const void *aa, const void *bb, void *arg)
{
  const int *a = aa, *b = bb, *p = arg;
  int cmp = *a - *b;
  int inv_start = p[0], inv_end = p[1];
  char norm = (*a < inv_start || *a > inv_end || *b < inv_start || *b > inv_end);

  return norm ? cmp : -cmp;
}

int arr[18] = {1, 5, 28, 4, 3, 2, 10, 20, 18, 25, 21, 29, 34, 35, 14, 100, 27, 19};
int p[] = {20, 30};
sort_r(arr, 18, sizeof(int), sort_r_cmp, p); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T21:28:45.160

只是为了好玩（并回答原始问题），是的，完全可以使用宏系统在符合标准的 C99 中编写嵌套函数来“解开”代码的嵌套版本。这是一种可能的实现：[https ://github.com/Leushenko/C99-Lambda](https://github.com/Leushenko/C99-Lambda)

有了它，你可以写出这样的憎恶：

```
typedef int(* fptr)(int);
func(fptr, someFunc, (void) {
    return fn(int, (int a), {
        fptr f = fn(int, (int b), { return b * 6; });
        return a * f(a + 1);
    });
}) 
```

不过，让我们**非常**清楚一些事情：这是用 C 编写此类代码的**绝对最糟糕**的方式。如果您发现自己实际上需要使用宏库来编写这样的代码，请辞去工作成为程序员并成为农民。在生产中使用它，你的同事可能会在你睡梦中谋杀你。

此外，有趣的是，尽管它在技术上符合标准，但唯一可以处理这么多宏的绝对重量的编译器是 GCC 和 Clang。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T11:57:40.500

仅仅因为 C 标准不允许嵌套函数，就没有可移植的方式在 C 中编写嵌套函数。
宏在这里对你没有多大帮助，因为它们是由预处理器评估的，编译器仍然会看到嵌套函数并标记错误的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:52:00.450

根据@Kirilenko [here](https://stackoverflow.com/questions/12214867/portable-nested-functions-in-c#comment16368367_12215139)的建议，我提出了一个使用全局变量和互斥体将参数传递给排序比较器函数的解决方案。这种方法是线程安全的，可以用嵌套函数完成所有事情，并且应该可以在编译器之间移植。

此示例对整数列表进行排序，但反转给定区域的排序。

```
// define lock for sort parameters
pthread_mutex_t lock;

// Parameters used in sort funciton - invert region (inclusive)
int invert_start, invert_end;

// Comparitor that uses global variables (invert_start, invert_end) as paramaters
int cmp_func(const void *a, const void *b)
{
  const int aa = *(const int*)a;
  const int bb = *(const int*)b;

  if(aa < invert_start || aa > invert_end ||
     bb < invert_start || bb > invert_end)
  {
    return aa - bb;
  }
  else
  {
    return bb - aa;
  }
}

void sort_things(int* arr, int arr_len, int inv_start, int inv_end)
{
  // Mutex lock
  pthread_mutex_lock(&lock);

  // Set params
  invert_start = inv_start;
  invert_end = inv_end;

  // do sort
  qsort(arr, arr_len, sizeof(*arr), &cmp_func);

  // Mutex free
  pthread_mutex_unlock(&lock);
} 
```

示例结果：

```
input: 1 5 28 4 3 2 10 20 18 25 21 29 34 35 14 100 27 19
invert_start = 20, invert_end = 30
output: 1 2 3 4 5 10 14 18 19 29 28 27 25 21 20 34 35 100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T12:12:14.407

嵌套函数不在 C 标准中，但它是一个`gcc`扩展（当标志`-fnested-functions`被激活时）。此外，您可以使用静态函数 ( `cmp_func`) 和额外参数 ( `reverse`) 来做同样的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T12:34:11.777

为什么要麻烦嵌套函数和全局变量呢？100% 可移植（甚至对 K&R）的解决方案就是简单地使用两个不同的功能，一个按常规顺序排序，另一个按相反顺序排序，然后将其称为

```
qsort(list, 8, sizeof(int), reverse ? cmp_func_reverse : cmp_func); 
```

注意：不需要使用`&`.

# android - Android上的链接错误

> ID：12214871
> 
> 赞同：1
> 
> 时间：2012-08-31T11:55:09.473
> 
> 标签：android, c++, linker, android-ndk

在android上编译本机代码时遇到问题：

```
CMakeFiles/test_v_job.dir/test_v_job.cpp.o:test_v_job.cpp:function
boost::detail::signal_handler::~signal_handler(): error: undefined
reference to 'sigaltstack'
CMakeFiles/test_v_job.dir/test_v_job.cpp.o:test_v_job.cpp:function
boost::detail::signal_handler::signal_handler(bool, int, bool, char*):
error: undefined reference to 'sigaltstack'
CMakeFiles/test_v_job.dir/test_v_job.cpp.o:test_v_job.cpp:function
boost::detail::signal_handler::signal_handler(bool, int, bool, char*):
error: undefined reference to 'sigaltstack' collect2: ld returned 1
exit status 
```

***signal.h***头文件在目录中：C:\AndroidSDKS\android-ndk-r7-crystax\platforms\android-9\arch-arm\usr\include

**必须链接什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T12:14:14.660

这个错误可能是android-ndk的旧平台引起的，它应该至少用android-9或更高版本编译

它与提升库无关

例如，如果您使用 ndk-build，您应该将这些行添加到 Application.mk：

APP_ABI := armeabi APP_PLATFORM := android-9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T11:00:04.420

为了在 ANDROID NDK 下构建提升，我使用 github.com/MysticTreeGames/Boost-for-Android – e.proydakov

# javascript - Google Drive 上传的外部 Javascript 客户端授权

> ID：12214873
> 
> 赞同：3
> 
> 时间：2012-08-31T11:55:15.870
> 
> 标签：javascript, upload, client, oauth-2.0, google-drive-api

我正在开发基于 Javascript 的客户端应用程序，它不是 Google 应用程序。我可以在云端硬盘上创建文件，但在尝试上传内容时遇到授权问题。

中的评论： [使用 JavaScript 对 Google Drive 进行授权](https://stackoverflow.com/questions/10330992/authorization-of-google-drive-using-javascript) 似乎说客户端必须是 google 应用程序才能写入 Drive，但在我看到此评论之前，我认为这可能通过我创建空文件的能力得到加强。请有人澄清一下吗？

我正在使用类似于帖子响应 3 的代码，但是我只得到登录屏幕，没有要求 Google Drive 权限。

我的代码使用[如何通过 API 向 Google Drive 添加/创建/插入文件？](https://stackoverflow.com/questions/10317638/inserting-file-to-google-drive-through-api/10323612#10323612)

正如我所说的文件创建工作，但上传失败：

PUT [https://www.googleapis.com/upload/drive/v1/files/0Bxbwly1hLFXnVmQ3Snh3ZXVOYVE?uploadType=media&alt=json&key=](https://www.googleapis.com/upload/drive/v1/files/0Bxbwly1hLFXnVmQ3Snh3ZXVOYVE?uploadType=media&alt=json&key=) 401（未经授权） rs=AItRSTNkdxHWOPN1C6XNGC9ea3U4KWDICw:128 :response>{"error" {"message" "Invalid Credentials ", "errors" [{"domain" "global", "reason" "authError", "message" "Invalid Credentials", "locationType" "header", "location" "Authorization"}], "code" 401} }

我没有直接使用 Javascript 而不是 Clojurescript，所以我的上传调用可能存在问题。缺少任何要求 Google 驱动器权限的内容似乎表明存在真正的授权问题，但我预计在请求“ [https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive) ”时不会获得 access_token 。谢谢

更新......我终于解决了这个问题：如果我请求“ [https://www.googleapis.com/auth/drive.file](https://www.googleapis.com/auth/drive.file) ”而不是更大的权限“ [https://www.googleapis.com/auth/ drive](https://www.googleapis.com/auth/drive) "，然后身份验证请求访问 Drive 并上传文件内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:22:39.053

我终于解决了这个问题：如果我请求“https://www.googleapis.com/auth/drive.file”而不是更大的权限[https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive)那么身份验证请求访问到云端硬盘并上传文件内容。

# java - JDialog 模式和类扩展

> ID：12214874
> 
> 赞同：2
> 
> 时间：2012-08-31T11:55:21.767
> 
> 标签：java, swing, jframe, modal-dialog, jdialog

所以，我需要创建一个扩展类，从主要功能代码`JDialog`中删除`JDialog`代码。

但是，我不知道在创建`JFrame`后如何设置它的父`JDialog`级。

它通常通过将 传递`JFrame`给构造函数来完成，但由于它是一个自定义类，我不知道如何将其设置`JDialog`为父级。我找不到任何类型的方法，`JDialog.setParent(JFrame);`希望您能理解问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:57:46.600

您可以在 JDialog 的构造函数或 setter 方法中设置父级。然后，当您创建对话框时，您将知道父级，并可以将其传递给参数。然后，您可以将参数传递给超级构造函数。

顺便说一句，我很少需要扩展 JDialog、JFrame 或任何顶级窗口，而是更喜欢“开箱即用”并在需要时制作它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T12:02:04.053

父级`Window`（`Frame`或`Dialog`）在 API 中称为所有者。您只能通过调用超类（JDialog）构造函数在构造函数中提及它。

例子：

```
public class SomeDialog extends JDialog {

  public SomeDialog() {
    // see other JDialog constructors for other ways to call this
    super(parentWindow, title, ModalityType.DOCUMENT_MODAL);
    ...
  }

} 
```

在您的自定义创建之后，您不能稍后再设置它`JDialog`。

# php - PHP电子邮件提交表单接收者未收到正确的发件人电子邮件地址

> ID：12214875
> 
> 赞同：0
> 
> 时间：2012-08-31T11:55:21.783
> 
> 标签：php, forms, email

我试图找出提交表单的 PHP 代码的问题，我正在为我的朋友做。它正在发送电子邮件，但问题是接收者收到了一个非常奇怪的电子邮件地址。我附上一张图片来仔细看看。

我的 PHP 代码是：

```
<?php 
    $error = false;
    $sent = false;

    if(isset($_Post['name'])) {
        if(empty($_Post['name']) || empty($_Post['email']) ||  empty($_Post['comments'])) {
            $error = true;
        } else {

        $to = "linardsberzins@gmail.com";

        $name = trim($_Post['name']);
        $email = trim($_Post['email']);
        $comments = trim($_Post['comments']);

        $subject = "Contact Form";

        $messages =  "Name: $name \r\n Email: $email \r\n Comments: $comments";

        $headers  = 'MIME-Version: 1.0' . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
        $headers .= "From:" . $name . "\r\n";
        $mailsent = mail($to, $subject, $messages, $headers);

        if($mailsent) {
            $sent = true;
        }
    }
}
?> 
```

非常感谢![显示奇怪的电子邮件](../Images/4191311f1e2b3d1fe451c0376a0a750d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T11:59:19.780

它应该是这样的`Sender <HIS@EXAMPLE.COM>`：

```
 $headers .= 'From: '.$name.' <'.$email.'>' . "\r\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:58:01.513

尝试将标题添加到电子邮件中，就像[PHP 邮件手册](http://php.net/manual/en/function.mail.php)示例 2中的这样

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

如果您希望它来自带有名称的电子邮件，这将起作用

```
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T11:59:33.790

将此添加到您的标题中

```
$headers .= "Reply-To: $replyEmail\r\n"; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T11:59:50.830

From: 标头应包括电子邮件地址和名称，例如

```
"From:My Display Name<mydisplayname@gmail.com>\r\n" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T12:05:13.150

```
<?php 
    $error = false;
    $sent = false;

    if(isset($_Post['name'])) {
        if(empty($_Post['name']) || empty($_Post['email']) ||  empty($_Post['comments'])) {
            $error = true;
        } else {

        $to = "linardsberzins@gmail.com";

        $name = trim($_Post['name']);
        $email = trim($_Post['email']);
        $comments = trim($_Post['comments']);

        $subject = "Contact Form";

        $messages =  "Name: $name \r\n Email: $email \r\n Comments: $comments";

        $headers  = 'MIME-Version: 1.0' . "\r\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
        $headers .= 'From: '.$name.' <sender@example.com>' . "\r\n";
        $mailsent = mail($to, $subject, $messages, $headers);

        if($mailsent) {
            $sent = true;
        }
    }
}
?> 
```

试试这个。只需更改标题。

```
$headers .= 'From: '.$name.' <sender@example.com>' . "\r\n"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T12:01:46.650

嗨，这不是一个错误。如果您提供`SENDER EMAIL`，它将显示发件人的电子邮件地址而不是这个。否则它将采用我们的托管地址。

# c++ - 输入时 fd 代表什么：int fd = open("file");？

> ID：12214878
> 
> 赞同：11
> 
> 时间：2012-08-31T11:55:41.453
> 
> 标签：c++, file, io

我正在研究 C++ 中的 I/O 操作，我有一个问题。打开文件时，如：

```
#include <fcntl.h>
int main() {
    unsigned char buffer[16];     
    int fd = open (argv[1], O_RDONLY);
    read(fd, buffer, sizeof(buffer));
    return 0;
} 
```

将文件传递给方法时，变量如何将`fd`文件表示为整数`open`？它是否在当前文件夹中重新显示文件？如果我打印“fd”变量，它会打印 3。这是什么意思？

附言。我知道还有其他几种处理文件的方法，比如 stdio.h、fstream 等，但这超出了这个问题的范围。Ds。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T12:07:16.383

> 将文件传递给 open 方法时，变量 fd 如何将文件表示为整数？

它是一个识别打开文件的句柄；它通常被称为*文件描述符*，因此得名`fd`。

当您打开文件时，操作系统会创建一些访问它所需的资源。这些存储在某种使用整数作为键的数据结构（可能是简单的数组）中；调用`open`返回该整数，以便当您传递它时`read`，操作系统可以使用它来查找所需的资源。

> 它是否在当前文件夹中重新显示文件？

它代表您打开的文件；它的文件名是`argv[1]`，启动时传递给程序的第一个参数。如果该文件不存在，或者`open`由于某种原因失败，那么它的值为 -1 并且不代表任何文件；在尝试对它做任何事情之前，你真的应该检查一下。

> 如果我打印`fd`变量，它会打印 3。这是什么意思？

它没有任何特殊含义；但它具有该值，因为它是在 C++中使用`cin`的输入 (0)、输出 (1) 和错误 (2) 流之后打开的第四个文件（或类似文件的东西） 。`cout``cerr`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T11:58:08.180

因为那是为当前进程存储的资源表的索引。

每个进程都有自己的资源表，因此您只需将索引传递给`read/write/etc`函数

> > 通常，文件描述符是内核驻留数据结构中条目的索引，其中包含所有打开文件的详细信息。在 POSIX 中，这种数据结构称为文件描述符表，每个进程都有自己的文件描述符表。用户应用程序通过系统调用将抽象密钥传递给内核，内核将根据密钥代表应用程序访问文件。应用程序本身不能直接读取或写入文件描述符表。

来自：[http ://en.wikipedia.org/wiki/File_descriptor](http://en.wikipedia.org/wiki/File_descriptor)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T12:03:18.127

open() 返回 C 类型 int 文件的文件描述符。要了解有关文件描述符的更多信息，请参阅[http://en.wikipedia.org/wiki/File_descriptor](http://en.wikipedia.org/wiki/File_descriptor)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T12:04:22.590

“fd”代表文件描述符。它是一个标识文件的值。它通常是索引（在全局表中）、偏移量或指针。不同的 API 使用不同的类型。例如，WinAPI 使用不同类型的句柄（HANDLE、HGDI 等），它们本质上是 int/void*/long 等的 typedef。

使用像“int”这样的裸类型通常不是一个好主意，但如果实现告诉你这样做（如本例中的 POSIX），你应该保留它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T12:04:45.200

简化的答案是，`fd`它只是一些文件描述符数组的索引。

当大多数进程启动时，它们会被赋予三个以开头的打开文件描述符：`stdin`(0)、`stdout`(1) 和`stderr`(2)。因此，当您打开第一个文件时，下一个可用的数组条目是 3。

# c++ - C/C++ - MinGW - 批量运行/编译程序

> ID：12214881
> 
> 赞同：0
> 
> 时间：2012-08-31T11:55:52.810
> 
> 标签：c++, c, compiler-construction, g++, mingw

我正在尝试`MinGW`通过批处理文件使用编译器运行我的程序。但是当我尝试启动它时，它什么也没说。

这是一个代码：

```
g++ -o Learning.exe Main.o 
pause 
```

当我刚刚打开`.exe`文件时，它工作得很好。如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:00:13.450

如果没有任何问题、错误或警告，GCC 将保持沉默。

您想运行您创建的实际程序吗？现在你只需链接它。

如果没有任何问题，要编译并运行，您可以使用以下命令：

```
g++ main.cpp -o learning.exe && learning.exe
pause 
```

后面的部分`&&`不会被执行，除非编译过程中没有任何错误（返回值不为0）。

# jquery - 尽管 magic_quotes_gpc = off，但 Jquery Ajax 会转义字符串

> ID：12214884
> 
> 赞同：0
> 
> 时间：2012-08-31T11:56:03.623
> 
> 标签：jquery, ajax, escaping, magic-quotes-gpc

即使在`magic_quotes_gpc = off`服务器上，我通过 jQuery Ajax 发布的数据也会被转义。

直接从`$_POST`（不使用 ajax）获取数据工作正常，未转义。但是让他们通过`ajax`会逃脱他们。

```
$.ajax({
url: 'includes/updateDb.php',
type: 'POST',
data: {
    id:  $this.attr('data-id'),  
    text: $this.html()
}
}); 
```

`test's`->`test\'s`

这是一个功能还是一个错误？我应该如何进行？在服务器上剥离字符串`PHP`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:59:00.097

AJAX 在 jQuery 中默认编码为`application/x-www-form-urlencoded`，在您的 PHP 中用于`utf8_decode`获取未转义的数据

来自[jQuery 网站](http://api.jquery.com/jQuery.ajax/)

```
contentTypeString
Default: 'application/x-www-form-urlencoded; charset=UTF-8' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:40:08.683

现在因为您在发送之前已经得到答复，所以`jQuery.ajax( url [, settings] )`只能默认发送，这意味着它可以更改编码的数据..这有助于在 99% 的情况下防止进一步的问题......他们使用的默认编码是

```
application/x-www-form-urlencoded; charset=UTF-8 
```

现在可以将其更改为任何类型的内容`text/javascript`，假设那是您发送的数据类型。但通常我们试图发送给 php 的是字符串或数组。这个数组需要以两种语言都能理解的某种方式进行编码......现在从 5.2.0 版本开始，php 支持 json 编码，这是从 java 发送数据的最佳方式。所以你可以向 php 发送一个 json 编码的数字，看起来像这样

```
{"foo-bar": 12345} 
```

并使用`json_decode()`把它变成

```
$json = '{"foo-bar": 12345}' ; 
$obj = json_decode($json);
print $obj->{'foo-bar'}; // will return 12345 
```

所以正式每个人都只是使用这种格式将数据从 javascript 发送到 php。为了您自己，这里是一个 php 代码的示例，假设您发送用户名和密码之类的内容，数组将如下所示`{"id": "234" , "text" : "helloo,/////text////"}`

```
$posted_data = $_POST['id'];
$parsed_data = josn_decode('$posted_data');
echo $parsed_data -> {'text'}; // should print helloo,/////text//// 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T10:55:24.503

事实证明，尽管`phpinfo()`显示`magic_quotes_gpc`已关闭，但它们确实已打开。这是一项共享托管功能，`php.ini`仅影响最顶层的文件夹。我没有意识到这一点。

道歉并感谢您的帮助-)

# javascript - 我可以写一个私人的greasemonkey脚本吗？

> ID：12214888
> 
> 赞同：3
> 
> 时间：2012-08-31T11:56:42.000
> 
> 标签：javascript, firefox, greasemonkey

我想为我的客户编写一个greasemonkey脚本来自动化他的任务，但是我不想与其他人共享脚本（显然，我的客户对此不会太满意！）

我怎样才能编写一个greasemonkey 脚本而不与他人共享？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T12:32:38.880

问题不清楚。但**如果你的意思是，“我可以阻止我的客户看到 Greasemonkey 脚本的代码并可能共享它吗？”**

那么答案是**“否”**。任何使用 Firefox 的人都可以通过 Greasemonkey 菜单或附加组件管理器中的*用户脚本*选项卡查看/编辑脚本的代码。

这是设计使然。Greasemonkey 的制作者（以及大多数脚本作者）不希望任何隐藏或加密脚本被强加给毫无戒心的用户的可能性。

~~~
此外，任何有权访问客户端计算机文件系统的人都可以看到脚本源。

* * *

* * *

如果你的意思是：

> 如何在浏览器中运行/安装脚本而不将其上传到用户脚本站点？

这很容易...

1.  将您的脚本保存到一个文件，例如*MyScript.user.js*。跟踪您保存它的位置，并确保它不在系统`temp`文件夹中。
2.  在 Firefox 中，选择*打开文件*( `Ctrl``O`)。
3.  导航到您保存脚本的位置并打开它。
4.  Greasemonkey 将弹出一个对话框，询问您是否要安装脚本。按*安装*。

**请参阅[文档中的“安装脚本”](http://wiki.greasespot.net/Greasemonkey_Manual%3aInstalling_Scripts)。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-24T18:06:52.457

用这样的链接制作网站

```
<a href="http://yourserver.com/yourscript.user.js">Install special script xx</a> 
```

并将您的脚本保存在

```
http://yourserver.com/yourscript.user.js 
```

Grease Monkey 和 Tamper Monkey 会看到一个 javascript 文件，如果它以 user.js 结尾，它会要求安装它。将带有安装链接的 url 提供给您的客户端。您可以使用密码保护您的网站。

# java - java分页工具

> ID：12214894
> 
> 赞同：14
> 
> 时间：2012-08-31T11:57:05.620
> 
> 标签：java

我有对象列表。我需要做分页。
输入参数是每页的最大对象数和页码。

例如输入`list = ("a", "b", "c", "d", "e", "f")`
每页最大页数为 2 页数为 2 结果 = ("c", "d")

是否有任何现成的类（库）来做到这一点？比如Apache项目等等。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-31T12:03:07.467

```
int sizePerPage=2;
int page=2;

int from = Math.max(0,page*sizePerPage);
int to = Math.min(list.size(),(page+1)*sizePerPage)

list.subList(from,to) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-07-30T13:41:17.957

使用 Java 8 流：

```
list.stream()
  .skip(page * size)
  .limit(size)
  .collect(Collectors.toCollection(ArrayList::new)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T12:02:32.837

尝试：

```
int page    = 1; // starts with 0, so we on the 2nd page
int perPage = 2;

String[] list    = new String[] {"a", "b", "c", "d", "e", "f"};
String[] subList = null;

int size = list.length;
int from = page * perPage;
int to   = (page + 1) * perPage;
    to   = to < size ? to : size;

if ( from < size ) {
    subList = Arrays.copyOfRange(list, from, to);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-14T20:05:07.130

简单的方法

```
 public static <T> List<T> paginate(Page page, List<T> list) {
      int fromIndex = (page.getNumPage() - 1) * page.getLenght();
      int toIndex = fromIndex + page.getLenght();

      if (toIndex > list.size()) {
        toIndex = list.size();
      }

      if (fromIndex > toIndex) {
        fromIndex = toIndex;
      }

      return list.subList(fromIndex, toIndex);
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T12:15:38.820

试试这个：

```
int pagesize = 2;
int currentpage = 2;
list.subList(pagesize*(currentpage-1), pagesize*currentpage); 
```

此代码返回一个列表，其中仅包含您想要的元素（页面）。

您还应该检查索引以避免 java.lang.IndexOutOfBoundsException。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T12:02:38.327

根据您的问题，简单`List.subList`会给您预期的行为 size()/ 2= 页数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T12:07:17.720

您可以使用`List.subList`using`Math.min`来防范`ArrayIndexOutOfBoundsException`：

```
List<String> list = Arrays.asList("a", "b", "c", "d", "e");
int pageSize = 2;
for (int i=0; i < list.size(); i += pageSize) {
    System.out.println(list.subList(i, Math.min(list.size(), i + pageSize)));
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-05T16:10:25.010

使用 lombok 作为 getter 和 setter

```
@Getter
@Setter
public class Pagination<T> {

  private int pageSize = 10;
  private int paginationSize = 9;
  private int currentPage = 0;
  private List<T> list = null;

  public Pagination(List<T> list) {
    this.list = list;
  }

  public int getSize() {
    return list == null ? 0 : list.size();
  }

  public int getOffset() {
    return getPageSize() * getCurrentPage();
  }

  public int getLimit() {
    return getPageSize();
  }

  public List<T> getItemsOnCurrentPage() {
    return list.subList(getOffset(), getOffset()+getLimit());
  }

  public int getPageCount() {
    return getSize() / getPageSize() + (getSize() % getPageSize() > 0 ? 1 : 0);
  }

  public int getActualPaginationSize() {
    return Math.min(getPaginationSize(), getPageCount());
  }

  public int getLastPage() {
    return getPageCount() - 1;
  }

  public int getStartPage() {
    if (getPageCount() > getPaginationSize()
      && getCurrentPage() > getPaginationSize() / 2) {
      return Math.min(getCurrentPage() - getPaginationSize() / 2,
          getPageCount() - getActualPaginationSize());
    } else {
      return 0;
    }
  }

  public int getEndPage() {
    return Math.min(getStartPage() + getPaginationSize(), getPageCount()) - 1;
  }

  public void setCurrentPage(int newPage) {
    if (newPage < 0) newPage = 0;
    if (newPage > getLastPage()) newPage = getLastPage();
    this.currentPage = newPage;
  }

  public boolean isHasPreviousPage() {
    return hasPreviousPage();
  }

  public boolean hasPreviousPage() {
    return getStartPage() > 0;
  }

  public boolean isHasNextPage() {
    return hasNextPage();
  }

  public boolean hasNextPage() {
    return getEndPage() < getLastPage();
  }

  public boolean isShouldShowFirst() {
    return shouldShowFirst();
  }

  public boolean shouldShowFirst() {
    return getStartPage() - getPaginationSize() / 2 > 0;
  }

  public boolean isShouldShowLast() {
    return shouldShowLast();
  }

  public boolean shouldShowLast() {
    return getEndPage() + getPaginationSize() / 2 < getLastPage();
  }

} 
```

页面索引从 0 开始，当前页面居中。

# winapi - WinAPI：悬停时的图像

> ID：12214895
> 
> 赞同：0
> 
> 时间：2012-08-31T11:57:06.820
> 
> 标签：winapi, gdi+

我的一个朋友即将发布一个应用程序，并要求我为其创建一个启动器。我发现这是一个很好的借口，最终研究了 WinAPI，并认为即使在相对较小的时间窗口内，一个简单的启动器也很容易实现。

我错了。

我正在尝试创建一个带有 5 个按钮的启动器窗口，这些按钮可以启动不同的东西。目标是拥有透明按钮（尚未完成），其中包含较小的图像。仅当用户将鼠标悬停在较大的按钮区域上时才应显示图像。

图像为 .png 格式。我正在使用 GDI+ 并使用[http://www.codeproject.com/Articles/3537/Loading-JPG-PNG-resources-using-GDI](http://www.codeproject.com/Articles/3537/Loading-JPG-PNG-resources-using-GDI)从资源中加载 PNG 文件。

我正在使用 MouseTrackEvents 来跟踪鼠标，并且我还对按钮进行了子类化。问题是我不知道应该如何处理 WM_MOUSELEAVE 消息。我不知道如何擦除我绘制的图像。如果我必须将 ht_img 保存为变量并稍后引用它，我不知道如何。

这是我到目前为止所拥有的。此示例从资源 IDB_Website2 加载 .png。显示图像有效（尽管目前它一直在一遍又一遍地渲染）：

WndProc：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
int wmId, wmEvent;
PAINTSTRUCT ps;
HDC hdc;
GDI gdi;

switch (Msg)
{
    case WM_CREATE:
    {
        HWND hwndButton = CreateWindow(TEXT("button"), NULL,
                          WS_VISIBLE | WS_CHILD | BS_PUSHBUTTON,
                          80, 10, 100, 50,
                          hWnd, (HMENU) HT_BUTTON1, NULL, NULL);
        HTButton = (WNDPROC) SetWindowLong(hwndButton, GWL_WNDPROC, (LONG) ButtonProc);
    }
...

    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        gdi.InitList(hInst, hdc);
        EndPaint(hWnd, &ps);
        break; 
```

Buttonproc（子类按钮）：

```
LRESULT CALLBACK ButtonProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
MouseTrackEvents MouseTrack;
GDI gdi;

HDC odc = GetDC(GetParent(hWnd));

switch(Msg)
{
    case WM_MOUSEMOVE:
        MouseTrack.OnMouseMove(hWnd);
        break;

    case WM_MOUSEHOVER:
        gdi.Create(IDB_Website2, _T("PNG"), hInst, odc, 62, 347, 200, 40, true);
        MouseTrack.Reset(hWnd);
        break;

    case WM_MOUSELEAVE:
        MouseTrack.Reset(hWnd);
        break;
}

return CallWindowProc (HTButton, hWnd, Msg, wParam, lParam);
} 
```

类 GDI 的创建图形方法：

```
void Create(UINT menuid, LPCTSTR pType, HMODULE hInst, HDC hdc, int x, int y, int w, int h)
{
    Graphics grpx(hdc);

    ht_img = new CGdiPlusBitmapResource();
    ht_img -> Load(menuid, pType, hInst);
    grpx.DrawImage(*ht_img, x, y, w, h);
    delete ht_img;
} 
```

到目前为止，这是一个相当大的挑战！这很有趣，尽管有时会让人有些发狂。:-) 对于我应该如何进行的任何建议，我将不胜感激。

* * *

编辑：回答阿德里安

我尝试更改我的 Buttonproc，但图像似乎没有被渲染。这是我所做的：

```
LRESULT CALLBACK ButtonProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    MouseTrackEvents MouseTrack;
    GDI gdi;
    HDC odc = GetDC(GetParent(hWnd));
    PAINTSTRUCT ps;

    int result;

    switch(Msg)
    {
    case WM_MOUSEMOVE:
        MouseTrack.OnMouseMove(hWnd);
        break;

    case WM_MOUSEHOVER:
        hovering = true;
        break;

    case WM_MOUSELEAVE:
        hovering = false;
        MouseTrack.Reset(hWnd);
        break;

    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        result = CallWindowProc(HTButton, hWnd, Msg, wParam, lParam);
        if (hovering == true) {
            gdi.Create(IDB_Play2, _T("PNG"), hInst, hdc, 62, 100, 200, 40);
        }
        EndPaint(hWnd, &ps);
        return result;
    }
    return CallWindowProc (HTButton, hWnd, Msg, wParam, lParam);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:35:50.820

您可能不想在处理鼠标事件时直接进行绘画。您可能希望通过调用底层实现然后根据悬停状态对其进行扩充来处理按钮 proc 中的 WM_PAINT。然后您的鼠标处理对应于翻转状态变量并使按钮无效（这将导致它重新绘制）。

```
case WM_PAINT:
    // start with the standard rendering
    int result = CallWindowProc (HTButton, hWnd, Msg, wParam, lParam);
    // then overdraw our embellishments
    if (my_state_variable == hovering) {
         DrawOverlayImage();
    }
    return result;  // don't just break here, or you'll call CallWindowProc again 
```

# apache-flex - flex 4.6 为同一基本 url 中的页面设置浏览器 url，如 window.location

> ID：12214897
> 
> 赞同：0
> 
> 时间：2012-08-31T11:57:13.653
> 
> 标签：apache-flex, url, href, navigatetourl

弹性 4.6

看起来像一个菜鸟 Q. 但我想将浏览器 url 页面而不是域更改`http://myUrl.com/page1`为`http://myUrl.com/page2`. 我已绑定 IBrowserManager .setFragment(page2) 这似乎添加到现有的 url `http://myUrl.com/page1#page2`。

有没有办法做到这一点？

我想做两件事，

1.  如果用户注销或会话结束等，将应用程序重置为其加载状态 - 即重新加载页面并重新开始`http://myUrl.com/page1`
2.  因为如果用户到达应用程序的末尾并需要从通过 page1 加载的应用程序导航到 html 页面，则该站点不会一次更新`http://myUrl.com/page2`。

谢谢艺术

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:30:51.953

`BrowserManager`应该管理应用程序状态并支持 Flex 应用程序的内部历史。`setFragment`方法只控制 url 之后的部分`#`，实际上不会重新加载页面。你需要的是`navigateToURL`功能。

```
navigateToURL("http://myUrl.com/page2", "_self"); 
```

# wpf - 应用程序设计 - 从文本文件中读取数据

> ID：12214898
> 
> 赞同：1
> 
> 时间：2012-08-31T11:57:18.937
> 
> 标签：wpf

我正在尝试创建一个具有预定义数据集（当前是文本文件）并从中读取的应用程序，现在我应该如何实现数据存储，以便当我与其他人共享应用程序时，我没有在外部传递文本文件或任何其他数据文件（如果可能，我可以加密内容并使用不同的扩展名提供）。我只想给这个人一个 exe 文件，数据应该包含在 exe 中。无论如何要这样做？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:02:21.183

将文本文件包含为[资源](https://msdn.microsoft.com/en-us/library/3bka19x4(v=vs.100).aspx)。

您不需要更改构建（如果您使用的是 Visual Studio）。Visual Studio 将嵌入资源/文件并为该文件生成一个只读属性，以便您可以直接从代码中访问它：

```
string fileContent = YourResourceFile.TheEmbeddedFile; 
```

您可以按换行符拆分 fileConent，但前一行会将整个文件加载到内存中。

```
string[] lines = fileContent.Split(new string[] { Environment.NewLine }, StringSplitOptions.None); 
```

如果文件太大而无法一次读入内存，您可以按照[此处](http://support.microsoft.com/kb/319292)的说明流式传输资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:02:27.097

您可以将文件的构建模式更改为`resource`/ `embedded resource`，从中读取它的工作方式不同，但这应该在某个地方得到回答。

# html - 更改滚动条元素的颜色

> ID：12214901
> 
> 赞同：2
> 
> 时间：2012-08-31T11:57:35.197
> 
> 标签：html, css, colors, scrollbar

> **可能重复：**
> [如何更改滚动条的颜色](https://stackoverflow.com/questions/1997645/how-to-change-the-color-of-scrollbars)

我需要更改滚动条元素的默认颜色。我指的是如果您有一个带有溢出的 div 会显示的滚动条：auto; 例如。

到目前为止，我已经尝试了这些 CSS 规则，但我不知道它们是否代表了一种相当古老的做事方式：

```
<style type="text/css">
 body {scrollbar-3dlight-color:;
            scrollbar-arrow-color:;
            scrollbar-track-color: ;
            scrollbar-darkshadow-color:;
            scrollbar-face-color:;
            scrollbar-highlight-color:;
            scrollbar-shadow-color:}
</style> 
```

任何朝着正确方向的推动将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:13:31.070

据我所知，这不是 W3C 有效的 CSS，它只适用于某些浏览器，即 IE？这是一个[JSfiddle 演示](http://jsfiddle.net/adamish/NzkTJ/)。请注意，CSS 属性是针对 div，而不是针对 body。

CSS

```
div.scroll {
    scrollbar-base-color: red;
    scrollbar-face-color: red;
    scrollbar-track-color: red;
    scrollbar-3dlight-color: red;
    scrollbar-highlight-color: red;
    scrollbar-arrow-color: red;
    scrollbar-darkshadow-color: red;
    scrollbar-shadow-color: red;
}​ 
```

HTML

```
<div class="scroll">
content content content
content content content
content content content
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:26:58.960

对于跨浏览器解决方案，不幸的是，您需要使用 JavaScript 创建自己的滚动条。这为您在设置滚动条及其每个组件的样式时提供了很大的自由度，这是一个好处。这是我创建的一个小演示示例，以供您查看：[little link](http://jsfiddle.net/glee/XD4CV/1/)。

我希望这有帮助！

# jsp - JSF 托管 bean 和 Taglib

> ID：12214906
> 
> 赞同：0
> 
> 时间：2012-08-31T11:57:47.150
> 
> 标签：jsp, jsf, jstl, websphere-portal

我正在尝试创建一个 portlet`renderURL`以导航到另一个具有 portlet 的门户页面。这可以。但是我想在URL中传递一个参数，这也可以。但我想在托管 bean 中的参数中传递一个值。

所以，它是动态参数值。

```
<portlet-ext:portalRenderURL var="myURL" contentNode="NewPage">
    <portlet-ext:urlParam name="name" value=""/>
</portlet-ext:portalRenderURL> 
```

在这里`urlParam`，价值应该是这样的`#{managedBean.name}`。

我正在尝试在“名称”上创建链接，以便单击“名称”，该值应传递到“NewPage”portlet，以便它可以显示该特定名称的详细信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:28:17.030

做对了。

使用托管 bean 中的 IBM 库来生成页面链接并将其用于 JSF 的 commandLink 标记。并且还使用 f:param 标签将参数传递给它。

这将传递存储在托管 bean 中的参数值。

希望这可以帮助。

# android - 具有列表偏好的动态壁纸

> ID：12214907
> 
> 赞同：0
> 
> 时间：2012-08-31T11:57:47.400
> 
> 标签：android, list, live-wallpaper, preferenceactivity, preference

我正在尝试开发一个使用 android.service.wallpaper.WallpaperService 显示实时记分卡的动态壁纸。我计划为壁纸设置一个列表首选项，这将使用户可以选择他希望遵循的匹配项。我遵循了这个[http://www.vogella.com/articles/AndroidLiveWallpaper/article.html](http://www.vogella.com/articles/AndroidLiveWallpaper/article.html) 当我启动设置时，我可以看到偏好。但是当我选择一个时，偏好对话并没有关闭，并且同样没有反映在墙纸中。我检查了 LogCat。不抛出异常。

安卓版本：4.1

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.android.livesc.wallpaper" android:versionCode="1"
  android:versionName="1.0">
  <application android:icon="@drawable/icon" android:label="@string/app_name">

    <service android:name="MyWallpaperService" android:enabled="true"
      android:permission="android.permission.BIND_WALLPAPER" android:label="Wallpaper Example ">
      <intent-filter>
        <action android:name="android.service.wallpaper.WallpaperService"></action>
      </intent-filter>
      <meta-data android:name="android.service.wallpaper"
        android:resource="@xml/mywallpaper"></meta-data>
    </service>
    <activity android:label="@string/app_name" android:name=".MyPreferencesActivity"
      android:theme="@android:style/Theme.Light.WallpaperSettings"
      android:exported="true">
    </activity>
  </application>
  <uses-sdk android:minSdkVersion="10" />
  <uses-feature android:name="android.software.live_wallpaper"
    android:required="true"></uses-feature>

</manifest> 
```

壁纸.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<wallpaper 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:thumbnail="@drawable/icon"
  android:description="@string/wallpaper_description"  
  android:settingsActivity="com.android.livesc.wallpaper.MyPreferencesActivity"/> 
```

请帮帮我。。

谢谢，卡西克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:12:18.453

```
 android:settingsActivity="de.vogella.android.wallpaper.MyPreferencesActivity"

 package="com.android.livesc.wallpaper" 
```

我想，这就是问题所在。你必须把你的设置文件所在的包名放在哪里。

这是我的代码：

```
<wallpaper xmlns:android="http://schemas.android.com/apk/res/android"
           android:settingsActivity="com.aavid.wallpapers.SettingActivity"
          android:thumbnail="@drawable/icon" 
          android:description="@string/description"
/>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.aavid.wallpapers"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="7" /> 
```

# apache - Mod Rewrite 执行多个编辑

> ID：12214921
> 
> 赞同：1
> 
> 时间：2012-08-31T11:58:22.377
> 
> 标签：apache, symfony

我在共享服务器上使用 Symfony2，并且一直在尝试解决我遇到的问题。我想去掉app.php登陆页面，同时指向symfony的web目录作为根目录。

所以设置根目录很容易。

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !^/symfony/web/
RewriteRule ^(.*)$ /symfony/web/$1 
</IfModule> 
```

不过，我被困在这之后。我试过

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !^/symfony/web/
RewriteRule ^(.*)$ /symfony/web/$1 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ $1app.php [L] 

</IfModule> 
```

认为这将按顺序运行。然而，事实并非如此。相反，它似乎寻找这两个条件，然后同时运行这两个规则。例如，如果我调用 example.com/app.php，它将获取 example.com/symfony/web/app.phpapp.php。我尝试了各种标签的各种组合，我得出的结论是它们总是同时运行，这与我在互联网上读到的相反。官方文档真的很少有例子，并没有回答我遇到的问题。

有人知道我哪里出错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:30:09.420

做

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !^/symfony/web/ -f
RewriteRule ^(.*)$ /symfony/web/$1 

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /symfony/web/app.php [QSA,L] 

</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:58:15.973

以下隐藏了对 app.php 的需求，并将所有内容指向正确的公用文件夹。需要注意的一点是，symfony 中的所有公共资源都存储在 /web/bundles 中，而用户在 Web 中直接访问的唯一内容实际上是 app.php。

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteCond %{REQUEST_URI} ^/bundles
RewriteRule ^(.*)$ /symfony/web/$1 [L]

RewriteCond %{REQUEST_URI} !^/symfony/web
RewriteRule ^(.*)$ /symfony/web/app.php/$1 [L]

</IfModule> 
```

它首先查找它是否是 /bundles，然后将 symfony/web 预先添加到它并停在那里。否则，它会查找 /symfony/web 是否存在，如果不存在，则在 app.php 前面添加并停止。因为我使用 symfony 在我的 php 代码中生成我的所有 url，所以这不会造成问题。

最好是在所有内容前添加 symfony/web，然后测试它是否是一个文件，如果不是，它会将 app.php 添加到末尾。不幸的是，我无法让它工作。Symfony 在检测到页面不存在时会进行自己的重定向，并且在虚拟主机中只会增加更多复杂性，所以这是我能得到的最好的。

# c# - ILogger 的 Castle Windsor Visual Studio 代码片段

> ID：12214925
> 
> 赞同：2
> 
> 时间：2012-08-31T11:58:39.343
> 
> 标签：c#, visual-studio, castle-windsor, code-snippets

在 Visual Studio 中，您可以使用代码片段，例如，当您编辑可以键入的类时`ctor`，默认构造函数将自动添加到您的类中。是否可以在 Visual Studio 中创建代码片段，执行以下操作：

*   `Logger`在光标所在的位置创建 get/set属性。
*   添加`using Castle.Core.Logging`
*   让我选择可以在实例变量列表中放置的位置`private ILogger _logger = NullLogger.Instance;`。

```
public class Person
{
    private string name;
    private int age;

    public Person()
    {
    }

    // cursor is here and you type "logger"
} 
```

键入`logger`Visual Studio 后，添加以下代码：

```
using Castle.Core.Logging; // Added by code snippet

public class Person
{
    private string name;
    private ILogger _logger = NullLogger.Instance; // Added by code snippet
    private int age;

    public Person()
    {
    }

    // Added by code snippet
    public ILogger Logger
    {
        get { return _logger; }
        set { _logger = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T15:27:09.903

这里有两个很棒的教程[如何：创建基本代码片段](http://msdn.microsoft.com/en-us/library/ms165394%28v=vs.100%29.aspx)和[如何：管理代码片段](http://msdn.microsoft.com/en-us/library/9ybhaktf%28v=vs.100%29.aspx)

总结如下，

1.  创建一个 .snippet 文件；这是一个 XML 文件，其中包含您要添加的代码和引用。基本示例包括除快捷方式之外的所有要求。
2.  将代码片段导入您的 Visual Studio 实例。
3.  随心所欲地使用

如果您愿意，很高兴举一个例子。

由于我创建了代码片段来对此进行测试，因此您需要以下内容。不言而喻，您需要编辑哪些内容以满足您的需求。

```
<?xml version="1.0" encoding="utf-8"?>
<CodeSnippets
    xmlns="http://schemas.microsoft.com/VisualStudio/2010/CodeSnippet">
  <CodeSnippet Format="1.0.0">
    <Header>
      <Title>
        Log4Net instance using Castle.Core.Logging
      </Title>
      <Shortcut>logger</Shortcut>
    </Header>
    <Snippet>
      <References>
        <Reference>
          <Assembly>Castle.Core.Logging.dll</Assembly>
        </Reference>
      </References>
      <Imports>
        <Import>
          <Namespace>Castle.Core.Logging</Namespace>
        </Import>
      </Imports>
      <Code Language="CSharp">
        <![CDATA[private ILogger _logger = NullLogger.Instance;
        public ILogger Logger
    {
        get { return _logger; }
        set { _logger = value; }
    }]]>
      </Code>
    </Snippet>
  </CodeSnippet>
</CodeSnippets> 
```

# jquery - JQuery Calendar(http://arshaw.com/fullcalendar/) 如何更改选中的单元格背景颜色

> ID：12214926
> 
> 赞同：5
> 
> 时间：2012-08-31T11:58:42.107
> 
> 标签：jquery, calendar, fullcalendar

每次单击要更改其颜色的议程周视图的单元格时，我都试图更改所选单元格的颜色。

例如：如果我单击日期 22，那么我想更改其背景颜色，但是当我再次单击日期 23 时，应更改单元格的背景颜色，并且日期 22 的单元格应与其他日期一样简单。

简而言之，我想更改完整日历中选定的日期颜色。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:25:59.930

那么，你需要这样做来处理这个： -

## JS：

```
var tempVar = "";
$('#calendar').fullCalendar({
    dayClick: function(date, allDay, jsEvent, view) {
        // change the day's background color just for fun
        if (tempVar == "")
        {
            $(this).css('background-color', 'red');
            tempVar = this;
        }
        else
        {
            $(this).css('background-color', 'red');
            $(tempVar).css('background-color', 'white');
            tempVar = this;
        }

    }
});​ 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/RUx2W/)**

# sql - 搜索表单错误

> ID：12214927
> 
> 赞同：0
> 
> 时间：2012-08-31T11:58:47.743
> 
> 标签：sql, arrays, forms, search, select

我是网页设计师，我在开发中什么都没有，所以，我真的需要你的帮助（学校考试）。因此，确实，我在同一页面中制作了一个搜索表单。有一个按城镇（ville）搜索的字段，结果应该在 div 中显示。有时它有效，但我真的需要解决这个问题。

错误：警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 55 行的 C:\Program Files (x86)\EasyPHP-5.3.8.1\www\foodsurfing\index.php 中给出

有代码

```
<?php
require_once('Connections/foodsurfing.php');
if(isset($_GET['recherche']))

$requete="SELECT * FROM fiche_membres WHERE ville LIKE '%".$_GET['recherche']."%'
LIMIT 0 , 1 ";
else
$requete="SELECT * FROM fiche_membres
LIMIT 1 , 1 ";

mysql_query("SET NAMES UTF8");
$resultat=mysql_query($requete);

if (false === $resultat) {
    echo mysql_error();
}

?> 
```

和结果的 div

```
<div id="gmap_result_container">    
   <div class="gmap_result">

<?php while($fiche_membres=mysql_fetch_array($resultat)) {?> <p>
<a class="prenom"><?php echo($fiche_membres['prenom']); ?></a>
<a> , </a>
<a class="ville"><?php echo($fiche_membres['ville']); ?></a></p>
<img src="images/avatar_unknown.jpg">
<p><?php echo($fiche_membres['experience_culinaire']); ?></p>
<p><a href="inscription.php" onMouseOver="roll.src='images/ensavoirplus_hover.png'" onMouseOut="roll.src='images/ensavoirplus.png'"><img src="images/ensavoirplus.png" name="roll" border="0" alt="En savoir plus" align="middle" class="ensavoirplus"></a></p>
<?php }?>
</div>      
</div> 
```

非常感谢你的帮助 ！！很高兴能进入我刚刚发现的社区！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:07:08.803

警告说*资源*无效，它是`mysql_fetch_array()`方法的参数。您必须在检索行之前验证引用。

```
 if(isset($_GET['recherche']))
      $requete="SELECT * FROM fiche_membres WHERE ville 
              LIKE '%" . mysql_real_escape_string($_GET['recherche']) . "%' LIMIT 0 , 1 ";
   else
      $requete="SELECT * FROM fiche_membres LIMIT 1 , 1 ";

    $resultat=mysql_query($requete);
    if($resultat)
     {
       while($fiche_membres=mysql_fetch_array($resultat))
        {
         //
        }
      } 
```

# javascript - 如何模拟同步ajax调用？（同步基于异步）

> ID：12214937
> 
> 赞同：0
> 
> 时间：2012-08-31T11:59:23.417
> 
> 标签：javascript, ajax

由于“本机”同步 ajax 调用会阻塞浏览器用户界面，因此它不适合大多数实际情况（至少我的情况）。

我想知道是否**有任何方法可以使用异步（非阻塞）ajax 调用来模拟同步（阻塞）ajax 调用**，以便结果是同步调用但不会阻塞 UI。

以下代码更好地解释了它：

```
function do_synchronous_ajax_call(url){
    // Performs an asynchronous ajax call, which doesn't block the UI, BUT, blocks this current script execution
}

var xyz = do_synchronous_ajax_call("http://...."); // Call is blocking until the inner ajax call returns
// Process `xyz` from here 
```

如您所见，上面希望有某种**“合成”同步 ajax 调用**，它**不会阻塞 UI**。

Javascript 不支持多线程，所以这可能是不可能的，但值得一问。

这是本题的第三个问题。
这些问题跟着我到了当前的问题：
[如何阻止 ajax 调用（我希望它阻止）](https://stackoverflow.com/questions/12213889/how-to-block-on-ajax-call-i-want-it-to-block)
[同步（阻塞）ajax 调用能否阻止浏览器的 UI？](https://stackoverflow.com/questions/12214573/can-a-synchronous-blocking-ajax-call-block-the-browsers-ui#12214614)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:10:17.563

您可以设置全局可用的锁。无论您是使用全局变量，还是拥有一个在全局级别保存任何选项或对象的对象集，您都可以简单地使用布尔锁。

```
function do_ajax_call(url)
{
    if (!locked)
    {
        // yadda yadda yadda
        locked = true;

        myxmlhttpobj.onreadystatechange = HandleCallback;
    }
}

function HandleCallback() {
    if (myxmlhttpobj.readyState==4 && myxmlhttpobj.status==200)
    {
         // more yadda yadda
    }

    locked = false;
} 
```

如果您切换到[jQuery AJAX](http://api.jquery.com/jQuery.ajax/)，您将受益于包括“beforeSend”在内的大量框架事件和方法，这将允许您在“done”事件中应用类似的锁定机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:02:27.653

要更新 UI，需要将执行返回给浏览器，唯一的方法是通过异步代码（或其他立即返回的代码）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T12:04:21.297

如果您什么都不做，为什么要“阻止”某些事情呢？看来您实际上并不了解异步流程。您无需“等待”——而是在数据可用时声明要做什么。使用包含其余代码的回调设置您的请求，调度请求并从 Javascript 返回，让浏览器完成自己的任务，直到您的代码再次工作。

# php - 如何实现以下类型的搜索：

> ID：12214939
> 
> 赞同：-1
> 
> 时间：2012-08-31T11:59:31.860
> 
> 标签：php, sql, algorithm, search

我必须想出一个搜索的设计。搜索到的数据不是文档类型。要搜索的数据实体是医疗程序，基本上由一个/两个/三个单词组成。这些词是由管理员预先定义的。例如：血管成形术、鼻整形术、肾上腺手术、ACTH 模拟测试等。

最终用户从选择中选择过程名称，并且用户的选择存储在 db 中。最终用户是指正在创建其个人资料的用户。

我用用户 id 为单独的表中的关键字编制索引。所以对于鼻整形术，如果三个用户添加了它，我将在索引表中有三个条目。对于其他程序也是如此。

```
程序名称 | 用户名|
-------------------------
隆鼻 1
隆鼻 2
鼻整形术 3
肾上腺手术 2
肾上腺手术 3
血管成形术 1

等等 。

```

当某些用户尝试搜索程序（将他引导到配置文件）时会出现问题。他可能将“肾上腺手术”写为“肾上腺手术”或“血管成形术”写为“血管成形术手术”或“ACTH 模拟测试”写为“模拟”测试ACTH'。有时程序也可以有同义词/首字母缩写词。

我理解停用词的概念。我可以在它们下定义“手术”和“测试”等常用词。去除这些停用词的索引表并去除搜索查询。

如何实现同义词？还有没有更好的方法来实现这样的搜索？我不认为我可以查看 lucene 或 solr，因为它们是全文搜索引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:10:59.177

听起来你需要某种全文搜索解决方案，看看[solr](http://lucene.apache.org/solr/)或少一点重量级的[sphinx](http://sphinxsearch.com/)。

对于单独的模糊匹配，您也可以尝试使用数据库系统的内置全文索引，[mysql](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)和[progresql](http://www.postgresql.org/docs/8.3/static/textsearch.html)都有一个。Postgres 也支持同义词词典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:05:57.783

```
Try using using like clause in your query
 SELECT * from TABLENAME WHERE Procedure Name like "%Surgery Adrenal%"; 
```

# xml - 使用 FOP 修复 PDF 中一行中单词的位置

> ID：12214941
> 
> 赞同：0
> 
> 时间：2012-08-31T11:59:46.223
> 
> 标签：xml, xslt, pdf, apache-fop

我正在尝试实现 FOP 以使用 XML 和 XSLT 文件输出 PDF。

我的问题是以下我需要修复一行中单词的位置（但不是通过使用表格），例如：

我有以下xml：

```
 <address>
    <Line1 length="32" noLine="5" col="60" />
    <Line2 length="32" noLine="6" col="60">Mr. John Kane</Line2 >
    <Line3 length="32" noLine="7" col="60">15 Street Springfield</Line3 >
    <Line4 length="32" noLine="8" col="60" />
    <Line5 length="32" noLine="9" col="60" />
    <Line6 length="6" noLine="10" col="60">75009</Line6 >
    <Line7 length="25" noLine="10" col="67">Freesberg</Line7 >
    <Line8 length="25" noLine="11" col="67">Idaho</Line8 >
  </address> 
```

1.  其中`length`是单词/句子的长度
2.  `noLine`是行号
3.  `col`是该行中单词/句子的开始位置

我做了这些行，但我似乎无法在行中的正确位置（col）插入单词/句子。

这是我的 xslt 的一部分：

```
<fo:block font-size="10" font-family="monospace">
<xsl:for-each select="*">
<xsl:variable name="currentNode" select ="name(.)"/>

<xsl:choose>
<xsl:when test="$currentNode = 'address'">
                                                <xsl:for-each select="*">
                                                    <xsl:variable name="length" select ="@length"/>
                                                    <xsl:variable name="noLine" select ="@noLine"/>
                                                    <xsl:variable name="col" select ="@col"/>
                                                    <xsl:variable name="precNoLig" select = "preceding-sibling::*[1]/@noLine"/>
                                                    <xsl:choose>
                                                        <xsl:when test="$precNoLig = $noLine">
                                                            <fo:block font-size="10" font-family="monospace" text-indent="60">
                                                                &#160;<xsl:value-of select="." />
                                                            </fo:block>
                                                        </xsl:when>
                                                        <xsl:otherwise>
                                                            <!--<fo:block font-size="10" font-family="monospace" >-->
                                                                &#x2028;<xsl:value-of select="." />
                                                            <!--</fo:block>-->
                                                        </xsl:otherwise>
                                                    </xsl:choose>
                                                </xsl:for-each>
    </xsl:when>
    </xsl:choose>

    </xsl:for-each>
    </fo:block> 
```

这是预期的输出`PDF`：

```
 Mr. John Kane
                                         15 Street Springfield

                                         75009 Freesberg
                                               Idaho 
```

它在`PDF`(col) 中有以下位置：

```
<-----------------60-------------------->
<-----------------60-------------------->Mr. John Kane
<-----------------60-------------------->15 Street Springfield
<-----------------60-------------------->
<-----------------60-------------------->
<-----------------60-------------------->75009 Freesberg
<-----------------67-------------------------->Idaho 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:41:43.040

这有点令人费解，但这应该可行：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:strip-space elements="*" />
  <xsl:output method="text"/>

  <xsl:variable name="sp" select="'                                                                                          '" />

  <xsl:template match="address/*">
    <xsl:variable name="value">
      <xsl:value-of select="." />
      <xsl:if test="following-sibling::*[1]/@noLine = @noLine">
        <xsl:value-of select="$sp" />
      </xsl:if>
    </xsl:variable>
    <xsl:choose>
      <xsl:when test="preceding-sibling::*[1]/@noLine = @noLine">
        <xsl:variable name="col" select="preceding-sibling::*[1]/@col + preceding-sibling::*[1]/@length" />
        <xsl:value-of select="concat(substring($sp,1,@col - $col),substring($value,1,@length))" />
      </xsl:when>
      <xsl:otherwise>
        <xsl:if test="preceding-sibling::*"><xsl:text>&#10;</xsl:text></xsl:if>
        <xsl:value-of select="concat(substring($sp,1,@col),substring($value,1,@length))" />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

`Line..`要使此转换按原样工作，您的元素按顺序排列至关重要`noLine`，`col`因为它基于如何在前一个元素上填充它。如果它们出现故障，那将大错特错。

变量必须包含至少与您需要填充的`sp`空格一样多的空格，即任何`length`或`col`属性的最大值。这个解决方案不包括行尾的空格——实际上用尾随空格填充每一行更容易，这样它就可以填充给定的长度，但我认为最好不要这样做。

我只用给定的示例进行了尝试，如果它不适用于您所获得的任何其他输入，请告诉我，我会看看是否可以调整它。

编辑：我刚刚注意到您需要 PDF 格式，抱歉。我只是看着输出，并没有注意到格式。希望您可以将其调整为您需要的格式（它实际上与您已经尝试过的非常相似），但如果没有，我建议您手动创建一个代表您的输出的 PDF 并将该 PDF 的 XML 添加到您的问题。

# facebook - 使用 Graph API 更改 Facebook 发布日期

> ID：12214952
> 
> 赞同：0
> 
> 时间：2012-08-31T12:00:20.957
> 
> 标签：facebook, facebook-graph-api

我可以使用 Graph API 在我的墙上发帖。

```
$facebook->api("/me/feed", "post", $args); 
```

然后，我可以手动更改他们的日期。是否可以通过 Graph API 更改帖子的日期或创建具有过去日期的新帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:46:21.973

如果您查看 Graph API 文档 - [https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)在 Publishing 部分下，它显示了发布到墙上时可以使用的可用参数，它们是消息、图片、链接、名称、标题、描述、来源、地点、标签。
但是，如果您使用 OG 操作，您将能够发布引用过去活动的帖子。更多信息在这里 - [https://developers.facebook.com/docs/opengraph/publish-past-actions/](https://developers.facebook.com/docs/opengraph/publish-past-actions/)

# r - 仅获取文件的一部分

> ID：12214963
> 
> 赞同：15
> 
> 时间：2012-08-31T12:01:05.227
> 
> 标签：r, read-eval-print-loop

我的 R 工作流程通常是这样的，我打开了一个文件，我在其中键入 R 命令，并且我想在单独打开的 R shell 中执行这些命令。

最简单的方法是`source('the-file.r')`在 R 中说。但是，这总是重新加载整个文件，如果处理大量数据，这可能需要相当长的时间。它还要求我再次指定文件名。

理想情况下，**我只想从文件中获取特定的行（或行）**（我正在使用复制和粘贴不起作用的终端）。

`source`似乎没有提供此功能。还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-31T12:50:19.843

这是仅使用 R 的另一种方法：

```
source2 <- function(file, start, end, ...) {
    file.lines <- scan(file, what=character(), skip=start-1, nlines=end-start+1, sep='\n')
    file.lines.collapsed <- paste(file.lines, collapse='\n')
    source(textConnection(file.lines.collapsed), ...)
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T12:01:05.227

## 使用正确的工具完成工作……</h2>

正如评论中所讨论的，*真正的*解决方案是使用允许获取文件特定部分的 IDE。现有的解决方案有很多：

*   对于**Vim**，有[**Nvim-R**](https://github.com/jalvesaq/Nvim-R)。

*   对于**Emacs**，有[**ESS**](https://ess.r-project.org/)。

*   当然还有出色的独立[**RStudio** IDE](https://www.rstudio.com/)。

需要特别注意的是，上述所有解决方案都可以在本地和服务器上运行（例如，通过 SSH 连接访问）。R 甚至可以在 HPC 集群上运行——如果设置正确，它仍然可以与 IDE 通信。

## ……或者……*不是*。

如果无论出于何种原因，上述解决方案都不起作用，这里[有一个小模块^([gist])](https://gist.github.com/klmr/3551433)可以完成这项工作。不过，我通常不建议使用它。¹

```
#' (Re-)source parts of a file
#'
#' \code{rs} loads, parses and executes parts of a file as if entered into the R
#' console directly (but without implicit echoing).
#'
#' @param filename character string of the filename to read from. If missing,
#' use the last-read filename.
#' @param from first line to parse.
#' @param to last line to parse.
#' @return the value of the last evaluated expression in the source file.
#'
#' @details If both \code{from} and \code{to} are missing, the default is to
#' read the whole file.
rs = local({
    last_file = NULL

    function (filename, from, to = if (missing(from)) -1 else from) {
        if (missing(filename)) filename = last_file

        stopifnot(! is.null(filename))
        stopifnot(is.character(filename))

        force(to)
        if (missing(from)) from = 1

        source_lines = scan(filename, what = character(), sep = '\n',
                            skip = from - 1, n = to - from + 1,
                            encoding = 'UTF-8', quiet = TRUE)
        result = withVisible(eval.parent(parse(text = source_lines)))

        last_file <<- filename # Only save filename once successfully sourced.
        if (result$visible) result$value else invisible(result$value)
    }
}) 
```

使用示例：

```
# Source the whole file:
rs('some_file.r')
# Re-soure everything (same file):
rs()
# Re-source just the fifth line:
rs(from = 5)
# Re-source lines 5–10
rs(from = 5, to = 10)
# Re-source everything up until line 7:
rs(to = 7) 
```

* * *

¹有趣的故事：我最近发现自己在一个配置混乱的集群上，无法安装所需的软件，但由于迫在眉睫的最后期限，我迫切需要调试 R 工作流程。我真的别无选择，只能手动将 R 代码行复制并粘贴到控制台中。*在这种*情况下，上述内容可能会派上用场。是的，这确实发生了。

# selenium - 无法通过 browsermob 代理捕获响应标头位置

> ID：12214964
> 
> 赞同：0
> 
> 时间：2012-08-31T12:01:06.430
> 
> 标签：selenium, proxy, header, response, proxy-server

我正在为 browsermob 代理使用 selenium php webdriver 和 php 包装器来从 facebook 获取访问令牌。用户认证成功后，facebook 将重定向到

'http://www.karkala.in/index.html#state=ads_management%2Cread_insights&access_token=ABCDEFZCLkK3EBAJOxrzwq0BdXzT6DCA6QDZBbwUpc8ArgdAv5ly3nNSHME9W19cF7a06pGGGyQdkpVtqc4OnZAnAQT4eKDqeaipxLlVEgZ9D'

现在我需要阅读这个令牌。我使用以下 php 代码来获取响应

```
$har = self::$client->__get("har"); 
```

但我无法在响应标头中看到位置（在 url 上方）。我的回复文本可以在这里找到： [http ://www.karkala.in/har.txt](http://www.karkala.in/har.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:34:34.000

Selenium 本身有一个读取 url 的选项。

```
selenium.GetLocation() 
```

无需使用browsermob代理即可实现。

# iphone - 交换 SQLite 数据库中项目的顺序

> ID：12214966
> 
> 赞同：3
> 
> 时间：2012-08-31T12:01:11.360
> 
> 标签：iphone, sql, ios, ipad, sqlite

我从 Sqlite 数据库中的项目表中检索项目的有序列表。如何交换 id 以便 Sqlite 数据库表中两个项目的顺序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T12:17:02.753

id 不应确定位置或顺序。它应该是一个不可变的标识符。

如果您需要在数据库中表示订单，则需要创建另一个 orderNumber 列。几个选项是（1）具有跨越范围的值或（2）具有指向下一个的指针（如链表）。

**对于范围：**跨越范围可帮助您避免在插入点之后为所有项目重写 orderNumber 列。例如，在范围内，插入第一个得到 1，插入第二个得到最大范围，在第一个和第二个之间插入第三个得到中间数字 - 如果你重新定位，你必须分配它之间的项目的中点。一个缺点是如果列表获得足够的流失（通过大跨度最小化），您可能需要重新平衡范围。这个解决方案的优点是你可以在 sql 语句中通过这个列排序来得到有序列表。

**对于链表：** 如果数据库有一个下一列指向它之后的 id，则需要更新几行以插入一些东西。好处是它很简单。缺点是你不能在 sql 语句中排序——你依赖于获取列表的代码来对其进行排序。

另一种变体是您可以将有序列表数据完全从该表中提取出来。例如，您可以有一个包含 listid、itemid、orderedNumber 的有序列表。这允许您在它引用的表中拥有一个或多个逻辑有序列表。

其他一些参考资料：

[如何存储经常在数据库中更改位置的订购项目](https://stackoverflow.com/questions/3399253/how-to-store-ordered-items-which-often-change-position-in-db)

[在保持排序的同时将有序列表保存到数据库的最佳方法](https://stackoverflow.com/questions/330482/best-way-to-save-a-ordered-list-to-the-database-while-keeping-the-ordering)

[https://dba.stackexchange.com/questions/5683/how-to-design-a-database-for-storing-a-sorted-list](https://dba.stackexchange.com/questions/5683/how-to-design-a-database-for-storing-a-sorted-list)

# c# - 如何编辑和更新标题不是静态和未知的 GridView

> ID：12214970
> 
> 赞同：0
> 
> 时间：2012-08-31T12:01:38.160
> 
> 标签：c#, asp.net, gridview

在数据库中创建一个带有**客户**名称的表（在 a 中输入`TextBox`）。创建的表的字段是`ListBox`. 喜欢：

```
com = new SqlCommand("CREATE TABLE " + Label6.Text + " (Locations nvarchar(20), " + ListBox3.Items[0].ToString().Trim() + " nvarchar(5))", con);
con.Open();
com.ExecuteNonQuery();
con.Close();

for (int i = 1; i <= ListBox3.Items.Count-1; i++)
{
    com = new SqlCommand("ALTER TABLE " + Label6.Text + " ADD " + ListBox3.Items[i].Text.Trim() + " nvarchar(5)", con);
    con.Open();
    com.ExecuteNonQuery();
    con.Close();
} 
```

我正在使用`GridView`. 喜欢：

```
SqlCommand com = new SqlCommand("SELECT * FROM " + Label6.Text + "", con);
SqlDataAdapter da = new SqlDataAdapter(com);
DataTable dt = new DataTable();
da.Fill(dt);
GridView2.DataSource = dt;
GridView2.DataBind(); 
```

GridView 的 asp 代码是：

```
<Columns>
    <asp:CommandField ShowEditButton="True" />
</Columns> 
```

因此，我希望第一列是只读的。我想编辑`GridView`和更新数据库中的客户（指 Label6.Text）表。注意：我希望 GridView 只接受整数。

我的数据库表和 Gridview 的图像显示在以下链接中。请帮忙。谢谢你。

![在此处输入图像描述](../Images/65a257f118908221cb4e6aa627a1de8c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:11:01.410

要仅接受数字输入，您可以使用 jQuery 插件。[这里](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)介绍了一些可能性。

```
com = new SqlCommand("ALTER TABLE " + Label6.Text + " ADD " + ListBox3.Items[i].Text.Trim() + " nvarchar(5)", con); 
```

这种方法使您容易受到[SQL 注入的](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)攻击。通过构建这样的 SQL 语句，您的整个应用程序非常脆弱。

要更新数据库，您可以按照与从表中创建/选择的方式类似的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:40:00.463

首先，您应该**重新考虑**您的方法并*更改所有 SQL 语句*以使用 SQL 参数。现在您的代码**极易受到 SQL 注入的攻击**！这里有很多关于[SO](https://stackoverflow.com/search?q=sqlparameter)的示例，或者只是看看[MSDN](http://www.google.at/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCcQFjAA&url=http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx&ei=QrBAUIO5FsTj4QTIlYCIAg&usg=AFQjCNFjjUvDUBPCM68mgin6KN-IXTnBxA&sig2=UjBDu3eU4Q46CywjyZCyAA)。

此外，我认为让用户即时创建表和数据并不是一个好的决定。无论如何-如果您真的想以这种方式实现这一点，您可以动态添加列

```
for (int i = 0; i < dt.Columns.Count; i++)
{
    DataColumn dc = dt.Columns[i];
    BoundField bf = new BoundField();
    bf.ReadOnly = i == 0;  // will take care of setting controls to readonly in column 0
    bf.DataField = dc.ColumnName;
    GridView1.Columns.Add(bf);
} 
```

不幸的是，添加一个只允许数字的列并不容易。在这种情况下，有必要动态创建一个 templateField 并将其添加到列中。看看[这个例子](http://www.codeproject.com/Articles/13462/How-to-create-template-columns-dynamically-in-a-gr)。

**编辑**

如果您尝试**将值动态添加**到表中，则应**使用****SQL 参数**。（例如`INSERT INTO tblXYZ (abc, def) values (@valueForABC, @valueForDEF)` ）

不幸的是，现在**不可能**使用 SQL 参数**来参数化 tableNames**或**columNames**。所以尝试

> ...将字符限制为 AZ、az、0-9、'.'、'_' 和 '' - 然后对数据库使用任何适当的括号（例如，我相信 SQL Server 的 []）来换行围绕整个事情。

显示在Jon Skeet的[这个答案中。](https://stackoverflow.com/questions/372033/parametise-table-name-in-net-sql)

# fortran - 在不泄露源代码的情况下共享 Fortran 库

> ID：12214973
> 
> 赞同：2
> 
> 时间：2012-08-31T12:01:41.267
> 
> 标签：fortran, shared-libraries, static-libraries, obfuscation

我有一个内部开发的软件。它是用 Fortran 编写的，由 3 种文件组成：1) 求解器文件，2) 模型文件和 3) 定义所用模型的文件。求解器还使用了一些库，即 lapack 和 HSL ma41。通常，我为用户选择所需的模型，一起编译并提供可执行文件。

我希望允许用户添加自己的模型或修改现有模型，而不能更改/修改/查看求解器源代码。

一种想法是将求解器编译成目标文件。然后用户将编译定义文件和他的模型并将它们与库链接在一起。那可能吗？我想那么用户必须与编译求解器的平台相同？（即 Windows 64 位上的英特尔编译器）所以我需要为任何可能的组合操作系统/硬件/编译器构建一个库？

另一个想法是也发送求解器源，但使用混淆。我在网上找不到任何经过测试/可靠的解决方案？这是一个不错的选择吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:39:11.067

您可以按照您的建议在库中分发目标代码。如果您的代码的入口点在 Fortran 模块中，那么您还需要分发同样由模块编译产生的 mod 文件（或编译器的等效文件）。

（如果您的库代码的任何入口点是外部过程，那么如果您为这些外部过程提供接口块，这对您的用户来说是一种方便。这些接口块可以是源代码形式（接口块不包含超出您的库的文档必须提供），或者可以再次预编译成模块。）

目标代码可以是平台（架构）特定的、编译器特定的、编译器版本特定的，并且在某些情况下是编译选项特定的。仔细设计和规范求解器和客户端模型之间的接口可以减轻一些潜在的变化。例如 - 许多平台都有明确定义的（可能通过显式规范或近乎普遍的约定）C 应用程序二进制接口，因此使用 C 等价物描述的接口通常是健壮的，但代价是公共处理器 Fortran 的能力显着丧失Fortran 接口。

# php - 由于存在 html 内容，Zend_pdf 文档在 magento 中引发错误

> ID：12214990
> 
> 赞同：0
> 
> 时间：2012-08-31T12:03:05.817
> 
> 标签：php, zend-framework, magento, zend-pdf

在 magento1.7 中，只需在 app\code\core\Mage\Wishlist\Helper\Data.php (Data.php) 文件中写入以下行

```
 public function getpdf()
     {
     $pdf = new Zend_Pdf(); 
    $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);
    for($i=0; $i<5; $i++) {
    $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
    $page->setFont($font, 24) ->drawText('Hello World page '.$i, 72, 720);
    $pdf->pages[] = $page;
     }
   $pdfString = $pdf->render();
   header("Content-Disposition: attachment; filename=myfile.pdf");
   header("Content-type: application/x-pdf");
   echo $pdfString;
   } 
```

调用这个函数

```
 <?php  Mage::helper('wishlist')->getpdf();?> 
```

在 app\design\frontend\base\default\template\wishlist\view.phtml (view.phtml) 文件中就`<div class="my-wishlist">`在行之前。现在在浏览器中运行 magento 并登录。然后单击我的愿望清单链接，它将在下载文件夹中显示 myfile.pdf。打开时会抛出错误消息。现在替换这些行

```
 $pdfString = $pdf->render();
   header("Content-Disposition: attachment; filename=myfile.pdf");
   header("Content-type: application/x-pdf");
   echo $pdfString; 
```

和

```
 $pdf->save("mydoc.pdf"); 
```

然后打开magento1.7文件夹中的mydoc.pdf，它打开没有错误，并在Pdf文档的每一页上显示“Hello World”。现在在文本编辑器中比较这两个文件“myfile.pdf”和“mydoc.pdf”，您将看到“myfile.pdf”中存在html内容。我的问题是我无法找到从生成的 PDF 文档中删除这些 html 内容的方法。谁能帮我解决这个问题。请注意，上面的代码只是我所做的演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:36:35.867

给猫剥皮的方法不止一种。我认为你想要一个不错的愿望者的 PDF。考虑使用 wkhtml2pdf 来制作它。这将涉及对页面的 PRINT 版本进行样式设置 - 如果 media=print，则会为此添加一个 CSS，wkhtml2pdf 就是这种情况。

wkhtml2pdf 的结果比 Zend PDF 的任何“手绘”都要好得多。

要开始安装 wkhtml2pdf 并简单地在命令行上运行它，修改选项直到它出现一半体面。

wkhtml2pdf 的唯一缺点是您无法控制分页符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:00:22.613

在您的末尾添加此代码`Mage_Wishlist_IndexController::indexAction()`：

```
$sResponse = $this->getResponse()->getBody();
$sNewResponse = strstr($sResponse, '%PDF-1.4');
$this->getResponse()
    ->clearBody()
    ->appendBody($sNewResponse); 
```

就在`$this->renderLayout()`电话后面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:14:38.300

为了从 Magento 发送 PDF 字符串并将其呈现在浏览器上，您需要执行以下操作：

```
$pdfString = $pdf->render();
$this->getResponse()->setHeader('Content-Type', 'application/pdf');
$this->getResponse()->setBody($pdfString); 
```

# networking - TCP 慢启动项混淆

> ID：12214996
> 
> 赞同：0
> 
> 时间：2012-08-31T12:03:18.733
> 
> 标签：networking, tcp

我对慢启动这个词感到困惑。为什么 TCP 拥塞控制策略在其大小呈指数增长时称为慢启动。如果由于初始大小小而称为慢启动，那么不应该称为低启动吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T12:06:26.843

早期（非常早期）的实现没有使用拥塞窗口。因此，他们开始非常努力地发送完整的接收器数据窗口。因此，虽然看起来很激进，但慢启动实际上更加保守。