# StackOverflow 问答 11976000-11976999

# java - 将图像节点更改为另一个角

> ID：11976009
> 
> 赞同：0
> 
> 时间：2012-08-15T19:36:46.313
> 
> 标签：java, awt

所以基本上我决定开始一个小项目，但我注意到图像的节点在左上角。例如，x 和 y 值来自那个角。我希望他们从左下角开始。我该如何改变呢？

对不起，如果节点不是正确的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:48:33.143

Java`Component`使用**左上角**作为轴的原点。因此，如果它位于左下角，则需要将组件的高度添加到`y`坐标中。
您应该将位置设置为`x, y+ component.getHeight()`

# java - 重新定位 Jtable 列标题

> ID：11976019
> 
> 赞同：2
> 
> 时间：2012-08-15T19:37:40.023
> 
> 标签：java, swing, jtableheader, mouse-listeners, right-mouse-button

我必须禁用对 JTableHeader 的右键单击，以便用户无法右键单击列标题并拖动以重新定位列。我们有什么诀窍吗？只需提及鼠标左键单击效果很好，但是当用户使用 RMB 并拖动列时，该列被移动并在释放鼠标时重新绘制在其他列上。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:52:05.823

使用右键触发列拖动/调整大小显然是 IMO 的错误。

一个奇怪的解决方法是连接到由 uielegate 安装的鼠标/运动/侦听器，并默默地吃掉所有不是左键的事件。类似的东西（注意：[在最近的答案中概述了](https://stackoverflow.com/a/14480948/203657)这个包装侦听器的更强大的安装，它可以在 LAF 开关中幸存下来）：

```
public static class BugHook implements MouseListener, MouseMotionListener {

    private JTableHeader header;
    private MouseListener mouseDelegate;
    private MouseMotionListener motionDelegate;

    public BugHook(JTableHeader header) {
        this.header = header;
        MouseListener[] ls = header.getMouseListeners();
        for (int i = 0; i < ls.length; i++) {
            header.removeMouseListener(ls[i]);
            String name = ls[i].getClass().getName();
            if (name.contains("TableHeaderUI")) {
                this.mouseDelegate = ls[i];
                ls[i] = this;
            }
        }
        for (MouseListener l : ls) {
            header.addMouseListener(l);
        }

        MouseMotionListener[] motionLs = header.getMouseMotionListeners();
        for (int i = 0; i < motionLs.length; i++) {
            header.removeMouseMotionListener(motionLs[i]);
            String name = motionLs[i].getClass().getName();
            if (name.contains("TableHeaderUI")) {
                this.motionDelegate = motionLs[i];
                motionLs[i] = this;
            }
        }
        for (MouseMotionListener l : motionLs) {
            header.addMouseMotionListener(l);
        }

    }

    // methods delegation left buttons only
    @Override
    public void mousePressed(MouseEvent e) {
        if (!SwingUtilities.isLeftMouseButton(e)) return;
        mouseDelegate.mousePressed(e);
    }

    @Override
    public void mouseDragged(MouseEvent e) {
        if (!SwingUtilities.isLeftMouseButton(e)) return;
        motionDelegate.mouseDragged(e);
    }
    @Override
    public void mouseReleased(MouseEvent e) {
        if (!SwingUtilities.isLeftMouseButton(e)) return;
        mouseDelegate.mouseReleased(e);
    }

    /// ---------- methods delegating always
    @Override
    public void mouseClicked(MouseEvent e) {
        mouseDelegate.mouseClicked(e);
    }
    @Override
    public void mouseEntered(MouseEvent e) {
        mouseDelegate.mouseEntered(e);
    }

    @Override
    public void mouseExited(MouseEvent e) {
        mouseDelegate.mouseExited(e);
    }
    @Override
    public void mouseMoved(MouseEvent e) {
        motionDelegate.mouseMoved(e);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:09:53.087

我尝试使用 Java 版本 1.7.0_11 和 1.6.0_38 并这样做：

```
table.getTableHeader().setReorderingAllowed(false); 
```

将列锁定到位。您是在使用较旧的 Java 版本还是以其他方式禁用？

# wicket - Wicket 组件 - 每次都必须 add() 吗？

> ID：11976028
> 
> 赞同：2
> 
> 时间：2012-08-15T19:38:12.463
> 
> 标签：wicket

我正在尝试使用 wicket 构建一个简单的应用程序，到目前为止印象深刻。我一直在利用 Component 类来根据用户输入或模型确定页面上元素的行为。我看到组件模型与 JSF 的相似之处，但发现检票口生命周期更易于管理。

我无法理解的是必须为页面上提到的每个 wicket:id 添加每个组件到树中，尤其是对于没有任何孩子的。当树已经在标记中有所定义时，必须在 java 代码中构建树似乎很繁重。我错过了什么？

编辑

我应该举个例子。我有一个输入框的标签，在某些情况下我希望能够修改它。95% 的时间，我在标记中为标签所拥有的文本和属性都可以。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T21:44:14.863

简短回答：是的，您必须添加它们。

长答案：您可以创建自定义代码来执行此操作，但我怀疑这是否值得。

使用 JSF，您可以使用非 html 标记，该标记具有与之关联的一种组件类型（例如，`h:inputText`对应于类`HtmlInputText`），因此它知道要实例化哪个类。

使用 Wicket，HTML 文件仅包含（除了少数例外）HTML 标记，并且您必须为`wicket:id`添加到标记的每个标记的标记实例化一个具体组件，因为它无法确定是否`<span wicket:id='xyz'>`表示 a `Label`、 a `FeedbackPanel`、 a `WebMarkupContainer`，或一些自定义组件。

使用 JSF，您可以在标记中执行 Wicket 中的 Java 代码操作，即构建组件树、将组件绑定到属性以及处理事件。它将所有内容保存在一个文件中（您不必为每个模板文件创建一个类），它有很多很多缺点（有些人可能认为它有一些优点，我离题了）。

您的页面绝不仅仅是一个什么都不做的简单表单。您想要转换和验证输入，想要处理提交，想要使用 Ajax 更新组件。使用 JSF，您可以在（不可编译、类型不安全、工具不良、不可重构）模板中完成所有这些工作，从而使其因表达式、配置标签和 - gawd forbid - 业务逻辑而变得臃肿。

如果 Wicket 对此提供支持（而且，它具有您自己构建此附加组件所需的灵活性），您将不得不向标记、声明要实例化的类、要更新的模型、要执行的验证等，损害了框架的两个优点、干净的 HTML 模板以及视觉和逻辑之间的清晰分离。

[Apache Tapestry](http://tapestry.apache.org/)是一个尝试在模板中做更多事情，同时又比 JSF 不那么臃肿的框架（这并不难）。[但是从它的教程](http://tapestry.apache.org/implementing-the-hi-lo-guessing-game.html)中可以看出，您最终仍然不得不使用非标准标签并遵循任意约定将模板绑定到代码（您可能喜欢它，但如果是这种情况，您有baaad味，抱歉： P)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:33:16.740

> 我有一个输入框的标签，在某些情况下我希望能够修改它。95% 的时间，我在标记中为标签所拥有的文本和属性都可以。

您可以尝试将标签的内容包装在模型中，将该标签包含在容器中并重新绘制容器 ( `target.add(container);`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:51:17.350

您应该添加它们。wicket 最强大的功能之一是允许您制作可重用的组件，尤其是 html 组件。

> 建造房屋的方法有上百万种，但大多数人不会考虑从头开始建造厕所、浴缸和玻璃窗。当你可以用比建造它更少的钱买一个厕所，而且你不可能生产出比你在商店里买到的更好的厕所时，为什么要自己建造一个厕所呢？以同样的方式，大多数软件工程师都试图重用软件模块。“制造或购买”决策不仅仅包括模块是否可用；通常，重用软件模块更便宜，并导致更健壮的系统。重用软件还意味着您不必一遍又一遍地编写相同的功能。（**wicket in action** :manning）

所以要有一个可重复使用的检票口页面，检票口只需要一个 html 页面来显示它的组件层次结构或它们的位置。这些组件的类型和模型留给程序员。

# android - Android 应用内计费与 GCM 权限

> ID：11976030
> 
> 赞同：0
> 
> 时间：2012-08-15T19:38:23.837
> 
> 标签：android, in-app-billing, google-cloud-messaging

当您将 Android GCM 添加到应用程序时，[文档](http://developer.android.com/guide/google/gcm/gs.html#android-app)会显示“声明并使用自定义权限，以便只有此应用程序可以接收 GCM 消息”。

Android In-app Billing 示例应用未配置此类自定义权限。

为什么不？Android IAB 和 GCM 有什么不同使得后者需要自定义权限而不是前者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:51:32.920

Android 应用内计费基础架构不会主动调用您的应用。另一方面，GCM 可以。

# android - Android 异常报告不一致

> ID：11976034
> 
> 赞同：0
> 
> 时间：2012-08-15T19:38:52.600
> 
> 标签：android, exception, exception-handling, airbrake

当我们发布我们的 Android 应用程序时，我们决定使用 Airbrake 作为第 3 方异常报告服务。我将 loopj Airbrake 通知器 ( [https://github.com/loopj/airbrake-android](https://github.com/loopj/airbrake-android) ) 集成到我们的应用程序中，它似乎做得相当好。

在过去的两周里，我们看到下载量呈爆炸式增长，因此报告的异常情况也有所增加。我遇到了一些非常奇怪的异常，所以我决定查看 Google Play 中应用程序的 Android 开发者控制台。我发现有趣的是，Google Play 仪表板中的错误数量不到 Airbrake 中错误总数的 10%。然后我决定再次检查 Flurry。Flurry 似乎遇到的异常数量与 Airbrake 向我展示的相似，这使我相信 Flurry 以与 Airbrake 相同的方式收集这些统计数据。

所以我想知道并且找不到任何好的答案：

*   Google / Android 与普通的未捕获异常处理程序有何不同？
*   我应该只扔掉 Airbrake 并只使用 Google Play 错误报告吗？（我们的应用确实回到了 2.1，但我们可以忍受）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:06:06.007

> Google / Android 与普通的未捕获异常处理程序有何不同？

除其他外，如果用户单击“报告...”按钮AFAIK，他们只会将异常记录到服务器。由于许多用户不会这样做，因此您将获得实际发生的异常的一个子集。

# javascript - 如果没有及时 ping，CherryPy 会杀死进程

> ID：11976038
> 
> 赞同：0
> 
> 时间：2012-08-15T19:39:01.497
> 
> 标签：javascript, process, kill, cherrypy

有没有办法让 CherryPy（在 :8080 上运行，它的唯一功能是作为 SIGUSR1 的侦听器）如果在一定秒数内没有被 ping 通，它会杀死一个进程？

当然，用于杀死进程的 Python 代码是没有问题的，只是 CherryPy 检测最后一次 ping 的方式，并不断将其与当前时间进行比较 - 如果在一定秒数内没有被 ping 过，则杀死一个进程。

请注意，如果 Javascript 正在执行 ping（通过`setInterval()`），CherryPy 代码中的无限循环将导致`.ajax()`请求挂起和/或超时，除非有一种方法可以`.ajax()`只执行 ping 而无需等待任何类型的响应。

感谢你们提供的任何提示！

石匠

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:57:27.313

好的，所以答案是设置两个类，一个更新时间，另一个不断检查时间戳是否在 20 秒内没有更新。如果整个站点不是基于 CherryPy 构建的，那么在用户离开页面后终止进程时，这非常有用。在我的例子中，它只是坐在 :8080 上监听来自 Zend 项目的 JS ping。CherryPy 代码如下所示：

```
import cherrypy
import os
import time

class ProcKiller(object):

    @cherrypy.expose
    def index(self):
        global var 
        var = time.time()

    @cherrypy.expose
    def other(self):
        while(time.time()-var <= 20):
            time.sleep(1)
        print var
        os.system('pkill proc')     

cherrypy.quickstart(ProcKiller()) 
```

ping 的 JS 从字面上看很简单：

```
<script type="text/javascript">
function ping(){
    $.ajax({
       url: 'http://localhost:8080'
    });
 }
function initWatcher(){
    $.ajax({
       url: 'http://localhost:8080/other'
    });
 }

ping(); //Set time variable first
initWatcher(); //Starts the watcher that waits until the time var is >20s old
setInterval(ping, 15000); //Updates the time variable every 15s, so that while users are on the page, the watcher will never kill the process
</script> 
```

希望这可以帮助其他人在用户离开页面后寻找类似的解决方案来处理杀戮！

石匠

# jquery - 根据浏览器窗口动态更改表格大小

> ID：11976039
> 
> 赞同：1
> 
> 时间：2012-08-15T19:39:08.780
> 
> 标签：jquery, google-chrome, css, photoshop, kiosk

我在 Photoshop 中创建了一个网页（1440 像素 x 900 像素）并将其导出到表达式 web 4。我选择了“自动创建”的表格和图像。我还可以选择“自动创建”CSS。这是一个信息亭网页，将被放置在各种屏幕尺寸上。（使用 Chrome.exe --kiosk）由于我不想在每次部署新信息亭时都编辑 photoshop 页面，所以我试图弄清楚如何使表格自动更改其大小以及其中的所有图像匹配浏览器窗口的大小。该表旨在从上到下，从左到右，0（零）一切......见下文。

leftmargin="0" topmargin="0" marginwidth="0" marginheight="0"

关于如何创建一个网页的任何想法，无论显示器的分辨率是多少，都将填满整个屏幕，并使表格内的所有图像相应地调整大小，而不是完全失控？

这是 jsfiddle [http://jsfiddle.net/3eYb8/的链接](http://jsfiddle.net/3eYb8/)

这是 photoshops CSS 输出[http://jsfiddle.net/BbXgd/1/](http://jsfiddle.net/BbXgd/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:36:59.047

首先，您需要创建一个 CSS 样式表。并通过分类器/ ID 将样式分配给 div。

您可以在 CSS 代码上设置百分比以匹配屏幕。

要为不同的纵横比制作流畅的显示，您需要使用@media 屏幕定义每个分辨率

这是有关流体屏幕的更多信息。

[http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/](http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/)

[http://green-beast.com/blog/?p=199](http://green-beast.com/blog/?p=199)

# sql - 为什么我的 SQL 查询不使用索引？

> ID：11976043
> 
> 赞同：2
> 
> 时间：2012-08-15T19:39:16.037
> 
> 标签：sql, postgresql, indexing, plpgsql

这是我的查询：

```
explain analyze SELECT levenshtein('google', lower(s."Name"), 2, 2, 1), d."Domain"
FROM   analyst_sld s, analyst_domain d
WHERE  levenshtein('google', lower(s."Name"), 2, 2, 1) < 4 AND s.id = d."SLDk_id"
ORDER  BY 1; 
```

这是输出：

```
 QUERY PLAN
----------------------------------------------------------------------------------------------------------------------------------------------
 Sort  (cost=5340874.17..5383497.72 rows=17049420 width=46) (actual time=136245.943..138709.585 rows=1022346 loops=1)
   Sort Key: (levenshtein('google'::text, lower((s."Name")::text), 2, 2, 1))
   Sort Method:  external sort  Disk: 78656kB
   ->  Hash Join  (cost=122111.24..1195078.39 rows=17049420 width=46) (actual time=16730.865..133020.419 rows=1022346 loops=1)
         Hash Cond: (d."SLDk_id" = s.id)
         ->  Seq Scan on analyst_domain d  (cost=0.00..417631.20 rows=17049420 width=38) (actual time=0.036..64677.170 rows=17041042 loops=1)
         ->  Hash  (cost=103151.93..103151.93 rows=1090665 width=16) (actual time=16730.443..16730.443 rows=1071 loops=1)
               ->  Seq Scan on analyst_sld s  (cost=0.00..103151.93 rows=1090665 width=16) (actual time=14.742..16726.358 rows=1071 loops=1)
                     Filter: (levenshtein('google'::text, lower(("Name")::text), 2, 2, 1) < 4)
 Total runtime: 139557.853 ms 
```

为什么它不使用索引，而是顺序扫描？另外，“Hash Join”和“Hash Cond”是什么意思？

EDIT_1：索引：

```
 Table "public.analyst_domain"
     Column     |           Type           |                          Modifiers
----------------+--------------------------+-------------------------------------------------------------
 ID             | integer                  | not null default nextval('analyst_domain_id_seq'::regclass)
 Domain         | character varying(255)   | not null
 SLDk_id        | integer                  |
Indexes:
    "analyst_domain_pkey" PRIMARY KEY, btree ("ID")
    "analyst_domain_Domain_key" UNIQUE, btree ("Domain")
    "analyst_domain_sldk" btree ("SLDk_id")

                                      Table "public.analyst_sld"
     Column     |           Type           |                        Modifiers
----------------+--------------------------+----------------------------------------------------------
 id             | integer                  | not null default nextval('analyst_sld_id_seq'::regclass)
 Name           | character varying(255)   | not null
Indexes:
    "analyst_sld_pkey" PRIMARY KEY, btree (id)
    "analyst_sld_Name_key" UNIQUE, btree ("Name") CLUSTER
    "analyst_sld_upper_idx" btree (upper("Name"::text)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:27:36.067

它对analyst_sld 使用顺序扫描，因为这是进行levenshtein 过滤的唯一方法。如果您认为这是一个重要的过滤器，您可以

```
CREATE INDEX lev_index on 
 analyst_sld (levenshtein('google', lower("Name"), 2, 2, 1)); 
```

就哈希而言：Postgres 已决定加入表的最佳方法是在连接列上查找相等的哈希（并在桶有多个条目的情况下解决它们）。您的表有多少元素，您希望连接有多大？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:32:22.000

至于 DDL：在 pgAdmin III 中 - 当您在树中选择一个对象（表/索引/等）时，DDL 将显示在右侧的窗口中。

DDL 将提供比下面基于假设的猜测更好的答案。

至于原因，根据给出的信息并假设连接条件上的主键索引，这是我的猜测：d 比 s 大约 17 倍，s 正在对未索引的函数进行过滤，因此优化器没有关于该过滤器的选择性的想法。使用 s.name 的行查找的索引扫描或顺序扫描哪个更快？根据优化器顺序获胜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:49:03.140

虽然到目前为止我还不是 PostgreSQL 专家，但由于使用了 levenshtein 函数，它看起来正在使用顺序扫描。我不知道这个函数的细节，但通常可以基于函数评估创建索引；但是我冒险猜测“Google”字符串在你的情况下是可变的，所以我不知道索引会有多有用......

# perl - 在 perl 中使用标量作为条件

> ID：11976045
> 
> 赞同：5
> 
> 时间：2012-08-15T19:39:18.120
> 
> 标签：perl, if-statement, conditional-statements, scalar

第一次……所以让我知道在提出问题时是否有任何我没有注意的地方。

问题是如何使用标量作为条件，因为下面的代码不起作用。

```
my @parameter=('hub');

my %condition;
$condition{'hub'}{'1'}='$degree>=5';

foreach (@parameter) {
       if ($condition{$_}{'1'}) {..}
} 
```

我认为那是因为条件解释不正确，所以我也尝试了以下方法，但也没有用。

```
if ("$condition{$parameter}{'1'}") { ..} 
```

非常感谢任何帮助。:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T19:50:27.130

您要么想要字符串 eval，它将字符串评估为 Perl 代码

```
if (eval $condition{$_}{'1'}) { ... 
```

或者更安全的方法可能是使用[代码引用](http://search.cpan.org/perldoc?perlref#4)

```
$condition{'hub'}{'1'} = sub { return $degree>=5 };

if ($condition{$_}{'1'}->()) { ... 
```

在第二个示例中，您将一段代码附加到一个变量。`$var->()`语法执行代码并计算代码的返回值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T19:52:30.197

您要做的是将 '$degree>=5' 评估为真实代码。与其尝试将字符串评估为代码（可以使用[eval](http://perldoc.perl.org/functions/eval.html)完成），不如传递代码引用通常更安全且更健壮。您可以使用生成器子例程按需生成条件子程序，如下所示：

```
sub generate_condition {
    my ( $test, $bound ) = @_;
    return sub { return $test >= $bound; };
}

my %condition;
$condition{'hub'}{'1'} = generate_condition( $degree, 5 );

if( $condition{$parameter}{1}->() ) { ... } 
```

`>=`如果您还希望动态创建（即关系本身），它会变得更加棘手。然后你有几个选择。一个带你回到 stringy eval，带着它的所有风险（特别是如果你开始让你的用户指定字符串）。另一个将是您的`generate_condition()`子目录中的查找表。

`generate_condition()`返回一个子例程引用，当调用该引用时，将评估在创建时绑定的条件。

这是一个通用的解决方案，它将接受任何 Perl 的条件并将它们与正在测试的参数一起包装到子例程中。然后可以调用 subref 来评估条件：

```
use strict;
use warnings;
use feature qw/state/;

sub generate_condition {
    my ( $test, $relation, $bound ) = @_;
    die "Bad relationship\n" 
        if ! $relation =~ m/^(?:<=?|>=?|==|l[te]|g[te]|cmp)$/;
    state $relationships = {
        '<'     => sub { return $test <   $bound },
        '<='    => sub { return $test <=  $bound },
        '=='    => sub { return $test ==  $bound },
        '>='    => sub { return $test >=  $bound },
        '>'     => sub { return $test >   $bound },
        '<=>'   => sub { return $test <=> $bound },
        'lt'    => sub { return $test lt  $bound },
        'le'    => sub { return $test le  $bound },
        'eq'    => sub { return $test eq  $bound },
        'ge'    => sub { return $test ge  $bound },
        'gt'    => sub { return $test gt  $bound },
        'cmp'   => sub { return $test cmp $bound },
    };
    return $relationships->{$relation};
}

my $true_condition  = generate_condition( 10, '>', 5 );
my $false_condition = generate_condition( 'flower', 'eq', 'stamp' );

print '10 is greater than 5: ', 
      $true_condition->()  ? "true\n" : "false\n";
print '"flower" is equal to "stamp": ', 
      $false_condition->() ? "true\n" : "false\n"; 
```

通常，当您构建这些类型的东西时，人们会对在调用时而不是在子程序制造时将一个参数打开以进行绑定感兴趣。假设您只想绑定 " `$bound`" 和 "$relation" 参数，但`$test`在子例程调用时让 " " 打开以供指定。您将像这样修改您的子代：

```
sub generate_condition {
    my ( $relation, $bound ) = @_;
    die "Bad relationship\n" 
        if ! $relation =~ m/^(?:<=?|>=?|==|l[te]|g[te]|cmp)$/;
    state $relationships = {
        '<'     => sub { return $_[0]  <   $bound },
        # ...... 
```

然后像这样调用它：

```
my $condition = generate_condition( '<', 5 );
if( $condition->(2) ) {
    print "Yes, 2 is less than 5\n";
} 
```

如果目标是在关系评估中提供左侧和右侧的后期绑定，这将起作用：

```
sub generate_condition {
    my $relation = shift;
    die "Bad relationship\n" 
        if ! $relation =~ m/^(?:<=?|>=?|==|l[te]|g[te]|cmp)$/;
    state $relationships = {
        '<'     => sub { return $_[0]  <   $_[1] },
        '<='    => sub { return $_[0]  <=  $_[1] },
        # ...... and so on .....
    return $relationship->($relation);
}

my $condition = generate_condition( '<' );
if( $condition->(2,10) ) { print "True.\n"; } 
```

这种工具属于函数式编程的范畴，在 Mark Jason Dominus 的《[Higher Order Perl 》一书中有详细介绍](http://hop.perl.plover.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T19:50:15.000

你在期待什么？字符串值被解释`true`为非空。

```
themel@kallisti: ~ $ perl -e 'print "oops\n" if "false" ; '
oops
themel@kallisti: ~ $ perl -e 'print "oops\n" if "" ; '
themel@kallisti: ~ $ perl -e 'print "oops\n" if "\$degree < 5" ;'
oops 
```

如果您想在您的条件下动态评估代码，您必须调查[`eval`](http://perldoc.perl.org/functions/eval.html). 例子：

```
my @conds=('$foo>42', '$foo>23');
my $foo = 33;

foreach my $cond(@conds) { 
    print "$cond itself was true\n" if $cond;
    print "$cond evaluated to true\n" if eval($cond);
} 
```

印刷

```
$foo>42 itself was true
$foo>23 itself was true
$foo>23 evaluated to true 
```

# iphone - 检查互联网连接和连接类型？

> ID：11976052
> 
> 赞同：1
> 
> 时间：2012-08-15T19:40:20.617
> 
> 标签：iphone, objective-c, ios, connection

我想检查：

A - 是否有互联网连接。B - 如果有，是否通过 wifi。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T19:43:52.010

[从 apple Reachability](http://developer.apple.com/library/ios/#samplecode/reachability/Listings/Classes_Reachability_h.html)看这个例子。

`Reachability.h`然后，您可以将其复制`Reachability.m`到您的项目中并在您的项目中使用它。

您可以使用适用于 ARC 和 GDC 项目的 Tony Million 的[Reachability版本。](https://github.com/tonymillion/Reachability)

# objective-c - 时区支持值-objective-c-cocoa-touch

> ID：11976057
> 
> 赞同：4
> 
> 时间：2012-08-15T19:40:28.253
> 
> 标签：objective-c, nscalendar, nstimezone, nslocale

我一直在寻找一段时间，并进行了大量的研究和试验，但我找不到一种方法来检索存储在 iOS 设备上的时区支持的用户设置中的值。

我研究了 NSTimeZone 便捷方法 +systemTimeZone、+resetSystemTimeZone、+defaultTimeZone、+localTimeZone。我什至完全理解它们之间的区别，以及我们如何为每个应用程序设置自己的默认时区，以及首次调用默认值如何返回 system. 然后系统会被缓存，如果设备更改时区，则需要重置。

问题是，systemTimeZone 始终是设备实际所在的位置，而不是在时区支持下的设备设置中设置的值。

我什至研究过 [[NSCalendar currentCalendar] timeZone] 以及 [[NSCalendar autoupdatingCurrentCalendar] timeZone]]。

我什至试过 [[[NSLocale currentLocale] objectForKey:NSCurrentCalendar] timeZone] 和 [[[NSLocale autoupdatingCurrentLocale] objectForKey:NSCurrentCalendar] timeZone]

没有返回设备的 Settings.app -> Mail, Contacts, Calendars -> Time Zone Support -> Time Zone 的值。

有谁知道如何检索 Settings.app -> Mail, Contacts, Calendars -> Time Zone Support -> Time Zone 设置的值？

谢谢和干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T09:42:50.480

如果这有点离题，请原谅我，但您确定您真的想从以下位置访问*时区支持设置吗？*

*   Settings.app -> 邮件、通讯录、日历 -> 时区支持

否则我不会发表这篇文章，但是当您陈述以下内容时，您让我想到了：

> 问题是，systemTimeZone 始终是设备实际所在的位置，而不是在时区支持下的设备设置中设置的值。

不幸的是，您在这里的陈述并不完全正确。`+systemTimeZone`将返回设备实际所在的时区，**除非**用户已关闭*自动设置*并在以下位置选择特定时区：

*   Settings.app -> 常规 -> 日期和时间

这将更改要在系统范围内使用的时区，这会立即反映在状态栏中为新设置调整的时间上。

您之前尝试访问的内容似乎集中在本地 Calendar.app 中如何表示日历约会，并且似乎对该应用程序（以及该区域中的其余设置）是私有的。

如果您正在寻找可以由用户修改的有效系统范围的时区设置，那么*日期和时间*下的*时区*是您的最佳选择。这将是返回的值。*`+systemTimeZone`*

 *另一方面，如果您真的必须访问“*邮件、联系人、日历”下的“**时区支持*”设置，恐怕我无法为您提供帮助，我为分心表示歉意。*

# c++ - OpenCV 估计共面点的 Affine3D 中断

> ID：11976059
> 
> 赞同：2
> 
> 时间：2012-08-15T19:40:38.783
> 
> 标签：c++, image-processing, opencv

我正在尝试使用 OpenCV 的 estimateAffine3D() 函数来获得 3D 中两组共面点之间的仿射变换。如果我保持一个变量不变，我会发现该变量的转换部分存在一个常数错误。

我的测试代码是：

```
std::vector<cv::Point3f> first, second;
std::vector<uchar> inliers;
cv::Mat aff(3,4,CV_64F);

for (int i = 0; i <6; i++)
{
    first.push_back(cv::Point3f(i,i%3,1));
    second.push_back(cv::Point3f(i,i%3,1));
}

int ret = cv::estimateAffine3D(first, second, aff, inliers);
std::cout << aff << std::endl; 
```

我期望的输出是：

```
[1 0 0 0]  
[0 1 0 0]  
[0 0 1 0] 
```

**编辑：**我的期望是不正确的。对于恒定 z 坐标的情况，矩阵不会分解为 [R|t]。

但我得到的（为了便于阅读而四舍五入）是：

```
[1 0 0 0]  
[0 1 0 0]  
[0 0 0.5 0.5] 
```

有没有办法解决这种行为？有没有在二维点集上做同样的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:09:08.947

无论我如何运行你的代码，我都会得到很好的输出。例如，当我完全按照您发布的方式运行它时，我得到了。

```
[1,0,0 ,0]
[0,1,0 ,0]
[0,0,.5,.5] 
```

这是正确的，因为齐次坐标的第 4 个元素被假定为 1。当我以 2 作为 z 值运行它时，我得到

```
[1,0,0 ,0]
[0,1,0 ,0]
[0,0,.8,.4] 
```

这也有效（.8 * 2 + .4 = 2）。你确定你没有读错 aff(2,2) 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T08:55:31.697

关键问题是：您的目的是估计两组 3D 点之间的旋转和平移，但 OpenCV 函数estimateAffine3D() 不是用于该目的。顾名思义，这个函数就是计算两组 3D 点之间的仿射变换。在计算仿射变换时，不考虑旋转矩阵的约束。当然，结果是不正确的。要获得旋转和平移，您需要实现基于 SVD 的算法。您可以在 google 中搜索“绝对方向”。这是一个经典的封闭式算法。

# java - 如何在 Java 或 Groovy 中对时间字符串列表进行排序

> ID：11976063
> 
> 赞同：4
> 
> 时间：2012-08-15T19:40:56.173
> 
> 标签：java, sorting, groovy

我有一个字符串列表，每个字符串都包含这样的时间：

> “03:00 AM”、“12:30 PM”、“16:15”

我需要按顺序对它们进行排序：首先放置“am”时间并比较小时，而不仅仅是字符串中的第一个数字。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T20:01:22.377

这适用于 groovy，适用于您给出的所有情况：

```
List dates = [ "16:15", "12:30 PM", "07:00", "03:00 AM" ]

dates.sort { d ->
  [ 'h:mm a', 'H:mm' ].findResult { fmt ->
    try {
      Date.parse( fmt, d ).time
    } catch( e ) {}
  }
} 
```

它基本上尝试使用 AM/PM，如果失败则尝试不使用它

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T19:52:39.993

使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)类确定代表每个字符串的时间，然后在排序时比较该数值。看起来您正在处理的时间字符串可以有不同类型的格式，所以我编辑了答案以支持格式字符串`03:00AM`或`16:23`

```
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.*;

public class TimeStringComparator implements Comparator<String>{
   private DateFormat primaryFormat = new SimpleDateFormat("h:mm a");
   private DateFormat secondaryFormat = new SimpleDateFormat("H:mm");

   @Override
   public int compare(String time1, String time2){
       return timeInMillis(time1) - timeInMillis(time2);
   }

   public int timeInMillis(String time){
       return timeInMillis(time, primaryFormat);
   }

   private int timeInMillis(String time, DateFormat format) {
        // you may need more advanced logic here when parsing the time if some times have am/pm and others don't.
       try{
            Date date = format.parse(time);
            return (int)date.getTime();
       }catch(ParseException e){
           if(format != secondaryFormat){
               return timeInMillis(time, secondaryFormat);
           }else{
               throw e;
           }
       }
    }

   public static void main(String[] args){
       List<String> times = Arrays.asList(new String[]{"03:00 AM", "12:30 PM", "16:15"});
       Collections.sort(times, new TimeStringComparator());
       System.out.println(times);
   }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T19:44:06.607

Java 的所有排序机制——例如，`Collections.sort()`方法——都使用（或可以使用）*比较器*——一个你自己编写的类的实例，它实现了`java.util.Comparator`. 该接口有一个`compare()`方法，您可以实现它来进行任何类型的比较。这就是你需要在这里做的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T19:48:25.413

正如@Ernest 所说，您需要使用比较器。你可以用你的列表做这样的事情：

```
List<String> times;
Collections.sort(times, new Comparator<String>() { 
     @Override 
     public int compare(String time1, String time2) { 

        // Sorting implementation here
     } 
 }); 
```

# easygui - 正在使用easygui制作游戏，但无法关闭

> ID：11976068
> 
> 赞同：0
> 
> 时间：2012-08-15T19:41:18.410
> 
> 标签：easygui

我正在尝试使用easygui制作游戏，但关闭的唯一方法是完全关闭python，因为X按钮不起作用。如何让它关闭游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:07:00.377

我自己不是 Python 专家，但是在您编写代码之后......只需使用以下代码：

```
import sys
sys.exit(0) 
```

此外，python 有一个内置的退出命令。就我个人而言，我只使用 exit 来关闭 python。阅读： [http ://docs.python.org/2/library/sys.html#sys.exit](http://docs.python.org/2/library/sys.html#sys.exit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:00:08.103

我喜欢使用的一种方法是在脚本末尾：

```
raw_input("Press enter to exit...") 
```

当 Python 运行程序时，它会弹出黑色的命令提示符，然后运行程序。程序完成时退出命令提示总是通过按 ENTER 键来完成。

这只会在代码末尾起作用。它也可以在游戏结束的代码的任何部分工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:40:29.490

试试看嘛

```
print "Game Ended"
"""This area should be for what happens after game ends.""" 
```

单击时它应该关闭easygui窗口，但保持程序运行。

希望这有效！

# android - Android:: 在主线程中执行其他任务之前阻塞主线程以使工作线程完成

> ID：11976069
> 
> 赞同：0
> 
> 时间：2012-08-15T19:41:20.390
> 
> 标签：android

我正在 UI 线程中执行一些任务，并创建了一个工作线程来为我完成网络工作。但是，我有一些重要的事情需要在工作线程完成后执行。有人可以建议我一个解决方案吗？

```
{
    Main thread...
    worker thread created..and executed..
    //I need to wait here for the worker thread to finish//
    some useful task to be done
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:45:54.700

工作人员完成后，您需要在 UI 线程上执行操作吗？`runOnUiThread`在您的工作人员结束时使用或`AsyncTask`与`onPostExecute()`. 在 worker 运行时阻塞 UI 线程没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:58:59.587

你没有。阻塞 UI 线程违反了 Android 线程的关键规则。这样做会导致那些烦人的“应用程序没有响应”对话框以及其他问题。

从开发人员文档的[进程和线程页面：](http://developer.android.com/guide/components/processes-and-threads.html)

> 因此，您不能从工作线程操作您的 UI — 您必须从 UI 线程对您的用户界面进行所有操作。因此，Android 的单线程模型只有两条规则：
> 
> 不要阻塞 UI 线程
> 
> 不要从 UI 线程外部访问 Android UI 工具包

您应该探索您需要完成的其他解决方案。您无需详细说明您的问题，但 ekholm 的解决方案可以工作，就像简单地从工作线程调用 Activity 中的方法一样。

# java - 使用 JAVA 将希伯来语写入 mySql

> ID：11976074
> 
> 赞同：0
> 
> 时间：2012-08-15T19:41:38.667
> 
> 标签：java, mysql, hebrew

我有一个小型 Java 方法，可以将短消息插入 MySQL 数据库。该表的默认排序规则是 utf8_unicode_ci，java 代码是：

```
private void insertMessageToDataBase(String lRoom, String lChatusername,
            String lMessage) {
        try {
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost/embeddedChat?" +
                "user=site_access&password=XXXXXXX");
            addMessageToDataBase = con.prepareStatement("INSERT INTO `" + lRoom + "` (username, message, action)" +
                    " VALUES (?,?,'message');");
            addMessageToDataBase.setString(1, lChatusername);
            addMessageToDataBase.setString(2, lMessage);
            addMessageToDataBase.executeUpdate();
        }
        catch (SQLException e) {
            e.printStackTrace();
        }
    } 
```

问题是当 lMessage 是希伯来语时，结果是一串'??????'

顺便说一句：我不知道它是否有帮助，但还有一个 PHP 脚本有时会写入该数据库中另一个类似的表，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:54:16.760

在您的代码中设置 UTF-8。看到这个；

```
 Connection con = DriverManager.getConnection("jdbc:mysql://localhost/embeddedChat?useUnicode=true&characterEncoding=utf8"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T11:07:45.660

感谢 Marc B 帮助我找出问题所在。对于任何可能遇到类似问题的未来开发人员来说，这只是一个总结。

因此，根据 Marc 的评论（在我的问题上方），我知道我需要检查链接。我不知道该怎么做，但我做了一个简短的谷歌搜索，然后来到了这个页面：[http ://www.jvmhost.com/articles/tomcat-java-mysql-jdbc-and-unicode](http://www.jvmhost.com/articles/tomcat-java-mysql-jdbc-and-unicode)

实际上我需要做的就是将以下行添加到连接字符串中：*&useUnicode=true&characterEncoding=UTF-8*

这就是我的**工作**代码现在的样子：

```
 private void insertMessageToDataBase(String lRoom, String lChatusername,
            String lMessage) {
        try {
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost/embeddedChat?" +
                "user=site_access&password=XXXXXXXX&useUnicode=true&characterEncoding=UTF-8");
            addMessageToDataBase = con.prepareStatement("INSERT INTO `" + lRoom + "` (username, message, action)" +
                    " VALUES (?,?,'message');");
            addMessageToDataBase.setString(1, lChatusername);
            addMessageToDataBase.setString(2, lMessage);
            addMessageToDataBase.executeUpdate();
        }
        catch (SQLException e) {
            e.printStackTrace();
        } 
```

这当然是一团糟，需要一些清理，但这是一个***有效***的代码。

谢谢马克 B

# facebook-graph-api - 显示名称和图片知道ID

> ID：11976077
> 
> 赞同：0
> 
> 时间：2012-08-15T19:41:57.327
> 
> 标签：facebook-graph-api, profile, image

我一直在寻找我的问题的答案，但到目前为止我得到了这个：

`https://graph.facebook.com/the_user_id?fields=name,picture`

我需要能够显示/打印一组我知道其 ID 的用户列表的名字、姓氏和图片。需要什么代码来获取这些数据，然后将其发布到 php/html 页面上？当然，这意味着如果我要显示 10 个用户，我将输入 10 个不同的 ID（阅读 smtg 关于数组列表？）。请注意，我不需要此功能适用于当前用户。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:57:01.707

您需要在 php 中使用 file_get_contents ( [http://uk3.php.net/file_get_contents](http://uk3.php.net/file_get_contents) ) 或 curl 并向 url 发出请求，如下所示：

```
 https://graph.facebook.com/?ids=id1,id2,id3&fields=name,picture 
```

（用您的 id 替换 id1,id2）

这将返回一个 json 对象。然后您需要解码（[http://uk3.php.net/json_decode](http://uk3.php.net/json_decode)）并循环访问并访问信息

这应该让你开始

```
// people array uses the users id as the key and the dessert as the value. The id is then used in the query to facebook to select the corresponding value from this array
$people = array("id1"=>"favourite "dessert", "id2"=>"favourite dessert", "id3"=>"apple pie");

 $json = file_get_contents('https://graph.facebook.com/?ids=id1,id2,id3&fields=id,name,picture');
 $json = json_decode($json);
foreach($json as $key=>$person){
   echo '<p><img src="'.$person->picture.'" alt="'.$person->name.'" />';
   echo $person->name.'\'s favourite dessert is '.$people[$person->id'];
   echo '</p>';
} 
```

我在这里对请求进行了批处理，或者您可以为每个用户执行 10 个单独的查询，但这有点无意义且效率低下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:57:53.013

最简单的方法是使用 FQL 查询：

```
SELECT first_name, last_name, pic, uid FROM user WHERE uid IN 
  (Known_ID_1, Known_ID_2, ... Known_ID_n) 
```

如果您使用 PHP，最简单的方法是安装[PHP SDK](https://developers.facebook.com/docs/reference/php)，不过您也可以直接调用`https://graph.facebook.com/fql?q=URL_ENCODED_QUERY`

# matlab - 如何将矩阵中 10% 的元素随机替换为零

> ID：11976079
> 
> 赞同：2
> 
> 时间：2012-08-15T19:42:01.840
> 
> 标签：matlab

令 C 是一个 40x40 矩阵，对角线为零。如何用零随机替换矩阵中 10% 的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:25:01.647

而不是 @HighPerformanceMark 的 mask*matrix 方法，我会简单地索引矩阵本身：

```
data=rand(10);

N = numel(data);
data(randperm(N,floor(N/10))) = 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T20:01:45.357

对于被 0 替换的恰好 10% 的元素，这样的事情可能会让您满意：

```
mask = [ones(1,1440),zeros(1,160)];
mask = reshape(mask(randperm(1600)),[40,40]);
c.*mask 
```

如果可能 10% 是可以接受的，请尝试

```
c.*(randi(10,40)<=9) 
```

如果不发表评论，我想您可以弄清楚这些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T11:33:10.580

我认为最快的方法是结合使用逻辑索引和标量赋值：

```
C(rand(size(C)) < 0.1) = 0; 
```

但这不会像您指定的那样给您*精确的*10%。

一个精确的解决方案是

```
nC = numel(C);
[~, p] = sort(rand(1, nC));
C(p <= nC/10) = 0; 
```

这与没有Matlab R2010 及更早版本中`randperm`的开销相同。`randperm()`

# c++ - 为什么 SDL 定义主宏？

> ID：11976084
> 
> 赞同：52
> 
> 时间：2012-08-15T19:42:19.913
> 
> 标签：c++, sdl, main

在设置 SDL 遇到一些麻烦后，我发现 SDL 定义了一个宏来替换 main：

```
#define main SDL_main

// And then
extern C_LINKAGE int SDL_main(int argc, char *argv[]); 
```

如果主函数没有定义`argc`and`argv`参数，这也会产生编译错误。

这个宏一看到就头疼……为什么SDL需要重新定义main？经过一番搜索，我发现有些人`#undef main`，并以正常方式使用它。

**那么问题来了：** *为什么 SDL 需要重新定义 main，它的作用是什么？取消定义有副作用吗？*

我注意到的一件事是 SDL 将标准输出和错误重定向到文件（我不希望这种行为），如果我取消定义 main.

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-15T19:49:18.823

根据[SDL Windows 常见问题解答](http://wiki.libsdl.org/moin.cgi/FAQWindows#I_get_.22Undefined_reference_to_.27SDL_main.27.22_...)：

> 即使您正在创建 Windows 应用程序，您也应该使用`main()`而不是，因为 SDL 提供了一个版本，该版本在调用您的主代码之前执行一些 SDL 初始化。`WinMain()``WinMain()`
> 
> 如果出于某种原因您需要使用`WinMain()`，请查看 SDL 源代码，`src/main/win32/SDL_main.c`了解您需要在函数中进行何种初始化，以`WinMain()`使 SDL 正常工作。

SDL 需要初始化，因此它会注入自己的`main`函数，该函数在调用“主”函数之前运行其初始化，并将其重命名为`SDL_main`不与实际`main`函数冲突。如常见问题解答中所述，您的`main`函数必须采用以下形式

```
int main(int argc, char* argv[]) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-10-10T07:31:36.247

虽然我同意这是一种奇怪的做法，但在某些情况下这是一个合理的解决方案，尽管它在很大程度上取决于平台。考虑到不同的平台有不同的入口点。Windows 通常是 WinMain，Linux 是主要的，与 Android 的交互发生在 Java 中，WinRT 使用 C++/CX 扩展，等等。程序入口点和 API 可能是非常特定于平台的，SDL 试图为您省去处理这些问题的麻烦。如果您只针对 Windows 并且 SDL 只是为了省去使用 WIN32 API 的麻烦，您可能不需要它。但是，如果您超越桌面，我认为您会发现它很有用。

# c++ - 如何在 C 和 C++ 中的结构之间定义某种继承？

> ID：11976085
> 
> 赞同：1
> 
> 时间：2012-08-15T19:42:22.463
> 
> 标签：c++, c, inheritance, struct

谈论结构，是否可以将 a`struct`的字段复制到另一个`struct`而不显式调用类型字段名称？

让我给你看一个例子：

```
struct StructA
{
   char Name[20];
   int Age;
};

struct StructB
{
   StructA FieldStructA;

   int SomeOtherDeclarations;
   // ...
}; 
```

因此，我可以访问执行此操作的`StructA`字段`StructB`：

```
StructB strB;
strB.FieldStructA.Name[0] = 0; 
```

我想要做的是`StructA`通过访问字段`StructB`而不访问 StructB 上的数据字段。类似于类之间的继承。像这样：

```
StructB strB;
strB.Name[0] = 0; 
```

我想`StructA`继承`StructB`. 我知道我可以用类来做到这一点，但由于某些原因（互操作、堆栈的特定使用等），我必须使用 struct。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T19:49:33.470

您可以使用继承在 C++ 中执行此操作：

```
struct StructB: public StructA
{
   int SomeOtherDeclarations;
   // ...
}; 
```

鉴于此，您可以这样做

```
StructB strB;
strB.Name[0] = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:46:12.243

在纯 C 语言中，我认为您有 2 个选择：

1 - 使用宏定义这些字段。然后你可以在两个结构中使用它们

```
#define PERSON_FIELDS \
char Name[20]; \
int Age; \

struct StructA
{
STRUCT_A_FIELDS
};

struct StructB
{
   STRUCT_A_FIELDS

   int thing;
   // ...
}; 
```

然后你可以使用

```
StructB strB;
strB.Name[0] = 0;

StructA strA;
strA.Name[0] = 0; 
```

在这种情况下，`StructA`并`StructB`没有相互联系。但是你有相同的领域。这至少为您提供了一点模块化。像这样的宏通常用于实现/伪造新语言为您提供的东西（例如继承或泛型）。

2 -**或者**，您可以保留上面的代码，但使用访问器函数来获取值：

```
struct StructA
{
   char Name[20];
   int Age;
};

struct StructB
{
   StructA FieldStructA;

   int thing;
   // ...
};

int StructB_Thing(struct Struct *obj)
{
    return obj->thing;
}

int StructB_Age(struct Struct *obj)
{
    return obj->FieldStructA.Age;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T20:04:02.503

如果您使用 gcc，请尝试将其设为匿名成员：

[http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html](http://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html)

```
struct StructA
{
  char Name[20];
  int Age;
};

struct StructB
{
   struct StructA;

   int SomeOtherDeclarations;
   // ...
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T20:00:29.273

在 C++ 中，继承用于接口重用，而不是实现重用。您可以轻松获得后者 C，但前者需要注意一个小技巧：

```
struct StructA
{
   char Name[20];
   int Age;
};

struct StructB
{
   StructA FieldStructA;

   int SomeOtherDeclarations;
   // ...
}; 
```

诀窍是要明白你可以做到

```
void setAge( struct StructA *s, int age ) {
    s->Age = age;
}

struct StructB b;
setAge( (struct StructA *)&b, 33 );
/* b.FieldStructA.Age is now 33 */ 
```

请注意您不必`FieldStructA`在此处提及任何地方：代码有效，因为“基本”字段实际上是“派生”结构的第一个成员。因此，类型的值`struct StructB *`可以用于通过`struct StructA *`. 这就是接口重用：用于访问的同一组函数`StructA`可用于访问`StructB`.

# css - IE 的缩放级别如何影响子像素舍入？

> ID：11976089
> 
> 赞同：0
> 
> 时间：2012-08-15T19:42:25.610
> 
> 标签：css, internet-explorer, internet-explorer-8

你好 StackOverflowers，

**设置：**

此问题与[此处](https://stackoverflow.com/questions/5488960/css-divs-width-50-not-working-in-ie)解决的问题相同。具体来说，我们有：

HTML：

```
<div class="outer">
  <div class="inner">left</div>
  <div class="inner">right</div>
</div> 
```

CSS：

```
.outer{
  width: 100%;
}

.inner{
  float: left;
  width: 50%;
} 
```

在 Internet Explorer 8 中查看。您可以[在此处查看 JSBin 示例](http://jsbin.com/ayojev/2/edit)。

**问题：**

如[上面提到的问题中所述](https://stackoverflow.com/questions/5488960/css-divs-width-50-not-working-in-ie)，当您调整窗口大小并将 IE 上的缩放级别设置为 100% 时，IE 实现的亚[像素舍](https://stackoverflow.com/questions/1309964/how-to-fix-internet-explorer-7-bug-when-using-percentage-widths-for-layout)入会强制右 div 放到新行上。或 150%。或 50%。但**不是** 75%、125%、95% 等。

**问题：**

为什么？缩放级别如何影响子像素舍入问题。 **为什么将 IE 缩放级别设置为 95% 会阻止第二个 div 被踢到新行，而不管执行了多少窗口大小调整？**

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:49:21.910

想想 IE 总是四舍五入意味着什么。

如果你有 100% 的缩放并且宽度是 701px 怎么办？50% 是 350.5px，也就是说 IE 中的 50% 都会向上取整为 351px，导致总宽度为 702px 并溢出。

现在，在 95% 时，701px 的 95% 是多少？665.95px，四舍五入为 666px。其中 50% 是 333px，两者加起来是 666px，天啊！现在它起作用了！

当然，这一切都取决于窗口的宽度，所以有时 95% 会有所帮助，而其他时候它实际上会受到伤害。

# c# - 有效地创建许多 Winrt Metro 控制实例

> ID：11976091
> 
> 赞同：4
> 
> 时间：2012-08-15T19:42:38.317
> 
> 标签：c#, .net, performance, xaml, microsoft-metro

我希望能够在 C# 项目中创建数百个 winrt 控件（搜索结果控件）实例。问题是这样做需要很长时间（十分之一秒或更糟），并且必须在 UI 线程上完成，从而造成显示结果的停顿和延迟。

现在我已经通过在启动期间预缓存许多控件实例来绕过这个问题。这种方法有效，但会影响启动时间（分析显示接近启动的处理器时间的 40% 用于缓存这些控件）并创建要管理的细节，例如缓存的大小。

我认为问题在于，每次实例化控件时，冗余工作（例如重新解析 XAML）都是由底层框架完成的。也许有办法避免重复这项工作？也许我可以廉价地克隆现有控件？有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:55:38.733

*   您可以在并行线程中进行预缓存。对多核处理器的启动时间影响较小

*   searchresult.memberwiseclone 会给你浅拷贝。可能会更快，不确定

*   您可以只使用一个搜索结果并在使用前用正确的数据填充它吗？在这种情况下，不需要创建很多。只需使用一个作为可重复使用的容器。

*   如果在将控件添加到您可以使用的父表单时花费时间

    *   暂停布局/恢复布局（这是win32）
    *   完成后将父级设置为不可见并返回可见
*   有没有另一种方法可以更快地做同样的事情？（竞争控制、3d 派对等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T18:06:02.230

前注：已经有一段时间了，所以微软现在可能已经修复了 win8 应用程序 UI 虚拟化。我没有检查。

我当时最终所做的只是将我自己的 UI 虚拟化组合在一起来解决这个问题。基本上：缓存控件并重新使用它们来显示可查看的数据（使用二叉搜索树来有效地查询可以看到的内容）。我写了[一篇关于它的博客文章](http://twistedoakstudios.com/blog/Post1007_working-around-the-brittle-ui-virtualization-in-windows-8)。

# c++ - C++中的布尔运算符

> ID：11976092
> 
> 赞同：3
> 
> 时间：2012-08-15T19:42:50.600
> 
> 标签：c++

> **可能重复：**
> ['unsigned temp:3' 是什么意思？](https://stackoverflow.com/questions/2950029/what-does-unsigned-temp3-mean)

我今天看到一些使用单冒号的 c++ 代码。

```
bool variable_name : 1; 
```

这和有什么区别

```
bool variable_name = true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:46:48.777

": 1" 表示它是一个具有 1 位的位字段，或者至少在 C 中是这样的。它可能被放在那里是为了节省一些内存，允许多个布尔值存储在同一个字节中。缺点是您可能无法指向该布尔值。

# javascript - Highstock/Highchart 无法设置个别点颜色

> ID：11976093
> 
> 赞同：7
> 
> 时间：2012-08-15T19:42:52.363
> 
> 标签：javascript, highcharts, highstock

我正在研究 Highstock，我正在尝试将颜色设置为 Highstock 中“数据”中的特定点，就像在[示例](http://www.highcharts.com/demo/spline-symbols/gray)中一样，但我无法让它工作，无论我如何设置颜色，它都不会t 显示在图表上。

**我已经尝试过使用 Highchart API 的选项，它可以工作，但它不适用于 Highstock。**

[jsfiddle链接（我尝试过的）](http://jsfiddle.net/Ey666/8/)

是因为我使用 x, y 来指定点吗？请帮忙。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T00:33:11.580

如果您查看您的演示，您会发现使用`color`它设置工具提示颜色而不是`marker`.

要修复它，请改用标记`fillColor`，如下所示。

```
data: [
    {x: 1343862840000, y: 4, marker:{ fillColor: 'red'} },
    {x:1343863200000, y:5, marker:{ fillColor: 'green'}}
] 
```

[**演示**](http://jsfiddle.net/Ey666/4/)

**更新**：
它适用于`highstock`查看[**此**](http://jsfiddle.net/Ey666/9/)演示。
您必须使用正确的对象来初始化它。
使用`Chart`而不是`StockChart`.

*参考*

*   [点标记](http://www.highcharts.com/stock/ref/#point-marker--fillColor)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T07:58:00.607

Highstock 默认禁用点标记。您将需要显式启用它们，如下所示：

```
plotOptions: {
    series: {
        marker: {
            enabled: true    
        }
    }
}, 
```

[在http://api.highcharts.com/highstock/plotOptions.series.marker](http://api.highcharts.com/highstock/plotOptions.series.marker)上查看更多信息

# javascript - 基于 Radio Labels 的 onClick 函数

> ID：11976095
> 
> 赞同：0
> 
> 时间：2012-08-15T19:43:00.297
> 
> 标签：javascript, forms, onclick, label

我有几个带有相应标签的单选按钮。我想创建一个 javascript 代码，这样如果一个人点击某个标签，它将更改一个 ID 为“largeimage”的特定图像。

因此，通过单击这些标签/单选按钮：

```
<input type="radio" name="thumbnails" value="thumbnail_ver1" id="thumbnail_ver1">
<label for="thumbnail_ver1">Color option 1.</label>

<input type="radio" name="thumbnails" value="thumbnail_ver2" id="thumbnail_ver2">
<label for="thumbnail_ver2">Color option 2.</label>

<input type="radio" name="thumbnails" value="thumbnail_ver3" id="thumbnail_ver3">
<label for="thumbnail_ver3">Color option 3.</label>

<input type="radio" name="thumbnails" value="thumbnail_ver4" id="thumbnail_ver4">
<label for="thumbnail_ver4">Color option 4.</label>

<input type="radio" name="thumbnails" value="thumbnail_ver5" id="thumbnail_ver5">
<label for="thumbnail_ver5">Color option 5.</label> 
```

将导致此图像具有“大图像”的 ID：

```
<img src="largeimage_original.jpg" id="largeimage" width="230px" height="330px" alt="Large Image" /> 
```

要将“大图像”更改为以下图像之一，具体取决于当前选择的标签选项/单选按钮：

```
largeimage_ver1.jpg
largeimage_ver2.jpg
largeimage_ver3.jpg
largeimage_ver4.jpg
largeimage_ver5.jpg 
```

我尝试了多个 onClick 功能无济于事。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:48:39.590

尝试这个

```
var radios = document.forms["yourFormName"].elements["thumbnails"];

for (var i = 0, max = radios.length; i < max; i++) {
    radios[i].addEventListener("click", replaceImage, false); 
}

function replaceImage() {
    for (var i = 0, max = radios.length; i < max; i++) {
        if (radios[i].checked) {
            imgID = (radios[i].value).replace("thumbnail_", "");
            document.getElementById("largeimage").src = "largeimage_" + imgID + ".jpg";
            return;
        }
    }
} 
```

# sql - Oracle APEX - SQL - 用于产品生命周期和计算阶段长度的表视图

> ID：11976099
> 
> 赞同：0
> 
> 时间：2012-08-15T19:43:14.390
> 
> 标签：sql, oracle, tableview

这个问题是这个问题的延续：（[Oracle APEX - SQL - 创建顺序历史并计算每个阶段之间的天数](https://stackoverflow.com/questions/11057193/oracle-apex-sql-creating-a-sequential-history-and-calculating-days-between-e)）

***一些背景：***

因此，对于我的一个应用程序，我决定需要能够捕获比以前更详细的指标。我的团队创建文档，特别是我想知道该文档在其开发的每个阶段花费了多长时间（以天为单位）。用于捕获此数据的表的结构如下：

```
 TBL_DOC_TIMELINE
 DOC_ENTRY_ID     DOC_ID     DOC_STATUS     DOC_CATEGORY     DOC_DATE       
 1                123        Planned        OPEN             06-05-2012    
 7                123        Draft          OPEN             06-15-2012
 38               123        Approval       OPEN             06-20-2012
 102              123        Published      CLOSED           06-30-2012 
```

我们所有的文档都使用同一个表来实现这个功能，所以我不能简单地键入 DOC_ENTRY_ID，尽管它可能会有所帮助。我需要找到 DOC_ID 的最大 DOC_ENTRY_ID 然后计算。我这样做直到我到达“CLOSED”的 DOC_CATEGORY 并且在单元格中插入了哪个点“0”，因为那是该 DOC_ID 生命周期的结束。像这样：

```
 DOC_ENTRY_ID  DOC_ID  DOC_STATUS  DOC_CATEGORY  DOC_DATE     DOC_DURATION     
 1             123     Planned     OPEN          06-05-2012   10     
 7             123     Draft       OPEN          06-15-2012   5
 38            123     Approval    OPEN          06-20-2012   10
 102           123     Published   CLOSED        06-30-2012   0 
```

这一切目前都归功于出色的 Tony Andrews，他为最终变成的 View 代码提供了粗略的草稿：

```
create or replace  view DOC_TIMELINE as
  select t.DOC_ENTRY_ID, t.DOC_ID, t.DOC_STATUS, t.DOC_CATEGORY, t.DOC_DATE
       , case when DOC_CATEGORY = 'CLOSED' then 0
            else lead(DOC_DATE) over (partition by DOC_ID order by DOC_ENTRY_ID)
                   - DOC_DATE
              end as duration
  from TBL_DOC_TIMELINE t; 
```

***我现在需要做的：***

这一切都完美无缺，除了在我最初的通过时，我忘记了我的要求中一个非常重要的部分。我的目标是知道文档在每个阶段花费了多长时间，但我完全没有意识到我需要实时收集这些信息，而不仅仅是在文档关闭之后。使用当前设置，视图在其生命周期中间将如下所示：

```
 DOC_ENTRY_ID  DOC_ID  DOC_STATUS  DOC_CATEGORY  DOC_DATE     DOC_DURATION     
 1             123     Planned     OPEN          06-05-2012   10     
 7             123     Draft       OPEN          06-15-2012   5
 38            123     Approval    OPEN          06-20-2012   - 
```

看到问题了吗？如果我需要知道该文档在 Approval 状态下花费了多长时间，那么我需要等到它离开该状态才能计算持续时间。因此，即使它可能已经处于该状态 20 天，我的指标也不会反映这一点。

如果给定 DOC_ID 的 MAX(DOC_ENTRY_ID) 具有 DOC_CATEGORY = 'OPEN'，我需要做的是找到一些方法来调整上面的 View 代码以根据 SYSDATE() 计算该值。

```
 assuming SYSDATE() = '06-29-2012'
 DOC_ENTRY_ID  DOC_ID  DOC_STATUS  DOC_CATEGORY  DOC_DATE     DOC_DURATION     
 1             123     Planned     OPEN          06-05-2012   10     
 7             123     Draft       OPEN          06-15-2012   5
 38            123     Approval    OPEN          06-20-2012   9 
```

这有什么意义吗？我想我需要在视图代码中添加另一个 CASE，但是 sytanx 给我带来了一些麻烦。对你们来说，这可能是一个简单的解决方案，但我对这类案例的熟悉程度和允许的 sytanx 是有限的，我的研究还没有发现任何相关的东西。

我真诚地感谢任何和所有的帮助。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:09:29.970

像这样的东西？-

```
create or replace  view DOC_TIMELINE as
  select t.DOC_ENTRY_ID, t.DOC_ID, t.DOC_STATUS, t.DOC_CATEGORY, t.DOC_DATE
       , case when DOC_CATEGORY = 'CLOSED' then 0
              when lead(DOC_DATE) over (partition by DOC_ID order by DOC_ENTRY_ID)
                   - DOC_DATE is null then trunc(sysdate)-trunc(DOC_DATE)
              else lead(DOC_DATE) over (partition by DOC_ID order by DOC_ENTRY_ID)
                   - DOC_DATE
              end as duration
  from TBL_DOC_TIMELINE t; 
```

或因为`lead(DOC_DATE)`将始终`null`为 max `DOC_ENTRY_ID`(for a `DOC_ID`)-

```
create or replace  view DOC_TIMELINE as
  select t.DOC_ENTRY_ID, t.DOC_ID, t.DOC_STATUS, t.DOC_CATEGORY, t.DOC_DATE
       , case when DOC_CATEGORY = 'CLOSED' then 0
              when lead(DOC_DATE) over (partition by DOC_ID order by DOC_ENTRY_ID) 
                      is null then trunc(sysdate)-trunc(DOC_DATE)
              else lead(DOC_DATE) over (partition by DOC_ID order by DOC_ENTRY_ID)
                   - DOC_DATE
              end as duration
  from TBL_DOC_TIMELINE t; 
```

# javascript - 获取页面上的所有节点，除了具有特定节点作为祖先的节点

> ID：11976100
> 
> 赞同：0
> 
> 时间：2012-08-15T19:43:22.363
> 
> 标签：javascript, jquery, html, dom

我正在使用 jquery 来获取页面上的所有节点

```
$(*) 
```

然后我想过滤掉任何节点的子`svg`节点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:46:30.757

您可以尝试使用 not 功能：

```
$('*').not($('#ancestorID').find('*')); 
```

请注意，这将非常缓慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:46:39.037

使用`.filter()`：

```
$('*').filter(function() {
  return $(this).parents('svg').length == 0;
}); 
```

另外，我认为用 jQuery`*`选择器替换`document.getElementsByTagName('*')`可能会提高速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:46:42.767

[http://api.jquery.com/not/](http://api.jquery.com/not/)

```
$('*').not('svg *'); 
```

# metrics - 当洞察指标显示“在任何地方点击”时，“任何地方”到底是什么意思？

> ID：11976102
> 
> 赞同：1
> 
> 时间：2012-08-15T19:43:32.110
> 
> 标签：metrics, facebook-insights

“页面帖子：参与度”指标提到他们报告了人们在您的帖子中“点击任意位置”的次数，这让我想知道这是否意味着您帖子中的链接被点击的次数，或者它是否也跟踪在帖子中的任何空白、图像、文本等上注册任何点击的次数？

本质上：通过点击 Facebook 定义的“任何地方”进行的参与度如何？

供参考：http: [//developers.facebook.com/docs/reference/fql/insights/#post_engagement](http://developers.facebook.com/docs/reference/fql/insights/#post_engagement)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:51:32.083

这意味着您的页面帖子中包含的任何链接。您帖子中的任何链接、打开照片……或由 Facebook 生成并包含在您的帖子中的任何“元”链接：“赞”、“分享”、“报告”……

基本上：任何可以在您的帖子中点击并会导致操作的内容。

# iphone - 如何释放 NSMutableArray？

> ID：11976107
> 
> 赞同：0
> 
> 时间：2012-08-15T19:43:50.597
> 
> 标签：iphone, ios, ios5, nsmutablearray

我有一个具有以下属性的 NSMutableArray：

```
@property (nonatomic, strong) NSMutableArray *alarmTableArray;

alarmTableArray = [[NSMutableArray alloc]init];
FMDBDatabaseAccess *db = [[FMDBDatabaseAccess alloc] init];
alarmTableArray = [db getAlarm]; 
```

我尝试释放这个数组，但最终得到 EXC_BAD_ACCESS。
我真的很担心这个。

如何释放这个数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:57:25.683

您使用的是 ARC 术语“强”的描述符。这应该是保留，如果您只是将属性设置为 nil，它将自动释放它。您应该在 viewDidUnload 中将其设置为 nil，因为您的 ViewWillDissappear 仅意味着您的视图控制器正在离开可见性，而不是它正在被销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:37:24.593

## 更新的答案

我想我知道你想做什么。您想从 SQL 中获取一组行并将其存储在一个数组中。

从 SQL 获取数据行并将其存储到类实例变量数组中的一种技术是不返回临时数组，而是将类实例变量数组作为引用传递给您的方法并直接修改数组。

所以代替这个伪代码

```
-(NSMutableArray *)doSomething
{
   NSMutableArray *tempArray;

   while (DB select statement has found rows)
   {
       CockTail *objCT = [[CockTail alloc] init];

       objCT.name = @"...";
       objCT.price = @"...";

       [tempArray addObject:objCT];

       [objCT release];
   }

   return [tempArray autorelease];
}

// class instance variable array
instanceVarArray = [[NSMutableArray alloc] init];
instanceVarArray = [self doSomething]; // here is where you confusion arise 
```

你可以这样做：

```
-(void)doSomething:(NSMutableArray *)paramArray
{
    // remove previously fetched data
    [paramArray removeAllObjects];

    SQL select statement

    while(has rows)
    {
        CockTail *objCT = [[CockTail alloc] init];

        objCT.name = @"...";
        objCT.price = @"...";

        // NOTE: we are directly modifying our class instance variable array
        // here since it was passed by reference :D
        // and so there is no need to worry about releasing the array
        [paramArray addObject:objCT];

        [objCT release];
    }
}

// Now all you do is pass in your class instance variable array
instanceVarArray = [[NSMutableArray alloc] init];
[self doSomething:instanceVarArray]; 
```

## 原始答案

嗯，也许我错了，但是当您从 FMDBDatabaseAccess 中为数组分配某些内容时，您实际上不是在第一行丢弃了“alloc init”吗：

```
// LINE 1: this instance of NSMutableArray here is allocated
alarmTableArray = [[NSMutableArray alloc]init];

// LINE 2
FMDBDatabaseAccess *db = [[FMDBDatabaseAccess alloc] init];

// LINE 3:this line here essential breaks the pointer link point to the NSMutableArray instance on line 1 
alarmTableArray = [db getAlarm]; 
```

现在除非你这样做

```
// LINE 4
[alarmTableArray retain]; 
```

否则，您的 alarmTableArray 永远不会被分配（因为您覆盖了指针链接）。结果，正如您的分析器告诉您的那样，您导致了内存泄漏。

现在做一个发布会给你那个 EXEC_BAD_ACCESS

我认为你想要做的是：

```
alarmTableArray = [[NSMutableArray alloc]init];
FMDBDatabaseAccess *db = [[FMDBDatabaseAccess alloc] init];

// this now uses the setter method (mutator method generated by @property) to do the copy
self.alarmTableArray = [db getAlarm]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T21:26:46.870

看着你的 while 循环，我不得不问你为什么要释放一个局部范围变量？

```
 CockTail *cocktailValues = [[CockTail alloc] init];
 ...

 [cocktails addObject:cocktailValues];
 [cocktailValues release]; 
```

上面每一行代码的细分：

1.  当您分配并初始化 CockTail 对象时，释放/保留计数为 0。
2.  将对象添加到 NSMutableArray 会将释放/保留计数增加到 1。
3.  在将 CockTail 对象添加到数组后释放它，将释放/保留计数降低到 0。

因此，稍后当您释放 NSMutableArray 或尝试访问其中的对象时，这些对象已经消失了。

记住第一条规则，只释放你保留的东西。

# php - PHP/MYSQL - 找不到此代码发送邮件两次以上的原因

> ID：11976111
> 
> 赞同：1
> 
> 时间：2012-08-15T19:44:05.703
> 
> 标签：php, mysql, email

好吧，我开始扯头发了，我需要一些帮助 :)

这是我的文件，用于从用户那里选择激活的电子邮件并向他们发送某种时事通讯。

**newsletter.php 的内容**

```
<?php
//Include configuration file
include 'config/config.php'; 
$pdo = new PDO("mysql:host=localhost;dbname=$db", $username, $password);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

//Define messages
//Error messages
define('ERROR_MESSAGE_SUBJECT', 'Enter subject');
define('ERROR_MESSAGE_CONTENT', 'Enter some content');

//Define variables
$errorFlag = false;
$to = array();

//Grab variables
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $newsletterSubject = check_input($_POST['newsletterSubject']);
    $newsletterContent = $_POST['newsletterContent'];       

    if(!$newsletterSubject) {
        $errorSubject = ERROR_MESSAGE_SUBJECT;  
        $errorFlag = true;
    }
    if(!$newsletterContent) {
        $errorContent = ERROR_MESSAGE_CONTENT;
        $errorFlag = true;  
    }
}
?>
<form action="newsletter.php" method="post">
    <label>Naslov newsletter-a: <?php echo '<span class="error">'.$errorSubject.'</span>';?></label>
    <input type="text" class="linput rounded" name="newsletterSubject">

    <label>Sadržaj newsletter-a: <?php echo '<span class="error">'.$errorContent.'</span>';?></label>
    <textarea name="newsletterContent" class="rounded"></textarea><br>

    <input type="submit" class="submit button rounded" name="newsletterSend" value="Pošalji newsletter korisnicima">
</form>
<?php
                if (!$errorFlag) {                  
                    echo '
                        <div class="heading">
                            <h1>Sending statistic</h1>
                        </div>';

                    $query = $pdo->prepare('SELECT email FROM users WHERE active=:active');
                    $query->bindValue(':active', '1');  
                    $query->execute();
                    $query->setFetchMode(PDO::FETCH_ASSOC);
                    $i=1;
                    while($row = $query->fetch()) { 
                        $to[] = $row['email'];
                    }
                    print_r($to);

                    if(!empty($to)) {
                        foreach($to as $mail) {
                            $headers = "From: " . $fromEmail . "\r\n";
                            $headers .= "Reply-To: ". $fromEmail . "\r\n";
                            $headers .= "MIME-Version: 1.0\r\n";
                            $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
                            $message = '<html><body>';
                            $message .= $newsletterContent;
                            $message .= '</body></html>';
                            mail($mail, $newsletterSubject, $message, $headers);
                            $i++;
                        }
                    }
                }
              ?> 
```

从数据库中选择活动电子邮件后，数组 $to 包含：

```
Array ( [0] => somemail1@domain.com [1] => somemail2@domain.com ) 
```

这是正确的，但两封电子邮件都会收到 2 封电子邮件，所以总共 4 封。通常，一封电子邮件应该收到一封时事通讯。

还有一些奇怪的东西，当收到第一份时事通讯时，它包含主题和消息。然而，第二个时事通讯不包含除“to”字段之外的任何内容。 **综上所述，该文件在数据库中每一封电子邮件发送两封电子邮件。**

我试图用相同的数组创建测试文件，这是它的内容：

**测试.php**

```
<?php
$fromEmail = 'from@mydomain.com';
$to = array('somemail1@domain.com', 'somemail2@domain.com');
print_r($to);

foreach($to as $mail) {
    $headers = "From: " . $fromEmail . "\r\n";
    $headers .= "Reply-To: ". $fromEmail . "\r\n";
    $headers .= "MIME-Version: 1.0\r\n";
    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
    $message = '<html><body>';
    $message .= $newsletterContent;
    $message .= '</body></html>';
    mail($mail, $newsletterSubject, $message, $headers);
    $i++;
}   
?> 
```

此测试文件发送普通电子邮件 - 每一封电子邮件发送一封电子邮件。所以服务器配置应该没问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T19:50:48.527

看起来这是因为您的发送代码不在检查它是否为 POST 的代码块内，因此它在您加载页面时发送一次，并在您填写表单并提交时再次发送。

将整个 if (!$errorFlag) 块移动到 if ($_SERVER['REQUEST_METHOD'] == 'POST') 块中。

# php - PHP没有插入SQL列

> ID：11976112
> 
> 赞同：0
> 
> 时间：2012-08-15T19:44:08.860
> 
> 标签：php, mysql, ajax

我正在使用 Ajax 来收集诸如 winsReddit、LosingReddit 以及输赢照片等数据。然后应该 PHP 脚本（如下）将其发送到 MySQL 表。“赢”和“输”列应每次增加 1。

出于某种原因，此脚本并未保存到数据库中。我究竟做错了什么？我错过了什么吗？

```
<?php
if(isset ($_POST['action'])) {

include( 'connection.php');

$winnerLink = $_POST['winnerReddit'];
$loserLink = $_POST['losingReddit'];
$win = $_POST['win'];
$lose = $_POST['lose'];

mysql_query("UPDATE $winnerLink SET win = win + 1 WHERE imagelink = '$win'");
mysql_query("UPDATE $loserLink SET lose = lose + 1 WHERE imagelink = '$lose'");

}

?> 
```

这是我正在使用的 Ajax 代码：

```
 $.ajax({
        url: 'http://website.com/vote.php',
        method: 'POST',
        data: {
            action: 'save',
            win: chosenURL,
            lose: chosenURL,
            winnerReddit: $(this).attr('id'),
            losingReddit: $(this).siblings('div').attr('id')
        },
        success: function(data) {
            alert('sent');
        },
        error: function() {
            alert('nope')
        }
    });
})
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:51:03.940

替换这个

```
mysql_query("UPDATE $winnerLink SET win = win + 1 WHERE imagelink = $win");
mysql_query("UPDATE $loserLink SET lose = lose + 1 WHERE imagelink = $lose"); 
```

有了这个准备好的声明：

```
$stmt = mysqli_prepare("UPDATE ? SET win = win + 1 WHERE imagelink = ?");
$stmt->bind_param("ss", $_POST['winnerReddit'], $_POST['win']);
$stmt->execute();
$stmt->close();

$stmt = mysqli_prepare("UPDATE ? SET lose = lose + 1 WHERE imagelink = ?");
$stmt->bind_param("ss", $_POST['losingReddit'], $_POST['lose']);
$stmt->execute();
$stmt->close(); 
```

您还需要确保已[连接到数据库](http://www.php.net/manual/en/mysqli.quickstart.statements.php)。

# google-places-api - 我正在使用 google places api 开发一个应用程序。是否按应用程序签到一个地方

> ID：11976113
> 
> 赞同：0
> 
> 时间：2012-08-15T19:44:09.917
> 
> 标签：google-places-api

根据 google Places API 文档，使用 API 不需要身份验证。这就是一个地方的签到工作方式吗？一个地方的签到次数取决于应用程序或所有注册应用程序中所有签到的聚合。

为什么不通过[Google Places Javascript API 提供签到 API](https://developers.google.com/maps/documentation/javascript/places)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:53:10.507

使用 Google Places API 需要您使用 API 密钥对每个请求进行身份验证。

使用 Places API 发送的任何 Places API 签入请求只会影响用于发出签入的 API 密钥的后续 Places API 搜索请求。

由于 Google Maps JavaScript API v3 的 Places Library 不需要进行身份验证即可使用，因此 Check-Ins 不是该库的一部分。

# eclipse - Eclipse RAP RWT 主题

> ID：11976114
> 
> 赞同：1
> 
> 时间：2012-08-15T19:44:18.110
> 
> 标签：eclipse, osgi, theming

我有一个关于 RAP RWT 主题的问题 - Eclipse RAP 中的皮肤或应用程序样式（主题）可以通过应用我们自己的 CSS 样式来扩展品牌来完成，定义它应该应用到哪个入口点。

我的问题是：我在 bundle/plugin A 中有主 Workbench APP。在填充 Workbench 窗口之前，我正在使用 JAAS 安全性（通过在 LoginDialog 中输入正确的用户名+密码来保护对我的应用程序的访问）。JAAS 安全性可以说是捆绑/插件 B。当我将品牌应用于插件 A 时，这甚至应用于插件 B（具有 loginDialog 窗口）。如果我制作另一个品牌 - 假设我想为 LoginDialog 窗口提供不同的外观并且为 WorkbenchWindow 提供不同的外观，我在插件 B 中制作品牌（应用了不同的 CSS 样式）。

行为如下：第一次应用插件 B 的品牌，因为调用了 pluginB 的 LoginDialog，然后主应用程序从 pluginA 开始 - 但从未应用第二个品牌（看起来插件 B 的第一个品牌也覆盖了插件 A 的品牌）。

我真的很感谢一些帮助，如何为 RAP 应用程序的不同部分制作不同的 RWT 主题。有人有这方面的经验吗？

先感谢您

托马斯·克拉马里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-24T11:01:28.543

您可以在此页面上查看：[RAP 开发人员指南](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.rap.help%2Fhelp%2Fhtml%2Frwt%2Ftheming.html)

我做了另一个解决方案：

此代码在我的主题插件的 Plugin.xml 中：

```
<extension
     point="org.eclipse.rap.ui.themes">
  <theme
        file="theme/test/test.css"
        id="com.yourApplicationName.theme.test"
        name="Test Theme">
  </theme> 
```

这段代码在我的 EntryWindow 的 Plugin.xml 中：

```
<extension
     id="mailapp.entrypoints"
     point="org.eclipse.rap.ui.entrypoint">

     <entrypoint
        applicationId="yourApplicationName"
        brandingId="yourApplicationName.testAPP.ui.branding.default"
        id="testAPP.entrypoint"
        path="/">
      </entrypoint>

      <entrypoint
        applicationId="yourApplicationName.testAPP"
        brandingId="yourApplicationName.theme.branding.test"
        id="test.entrypoint"
        path="/test">
      </entrypoint>

 </extension> 
```

在浏览器中你必须输入这个来打开你自己的主题：http: [//127.0.0.1 :10080/testAPP/](http://127.0.0.1:10080/testAPP/) **test**

# asp.net - ASP.NET 删除会话/Cookie

> ID：11976115
> 
> 赞同：3
> 
> 时间：2012-08-15T19:44:22.110
> 
> 标签：asp.net, session, cookies, browser

我环顾四周，发现如何删除客户端浏览器上的 cookie，或者使用 cookie 的过期时间，或者通过不提供过期时间在浏览器退出时删除它们。

我需要将我的网络应用程序中的 cookie 设置为在特定时间后删除，但如果浏览器退出或崩溃也需要删除。这可能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:47:10.680

> 这可能吗？

不，这不可能开箱即用。有 2 种类型的 cookie：

1.  持久性：具有`expires`为给定日期设置的属性 => 那些 cookie 作为文件存储在客户端浏览器上并在浏览器重新启动后仍然存在。将随客户端执行的每个请求一起发送，直到达到它们的到期日期或直到服务器明确删除它们。
2.  会话cookies：一种没有`expires`设置属性的cookies。这些仅存在于当前浏览器进程的内存中，但永远不会过期（直到浏览器关闭或服务器明确删除它们）。

`created at`因此，对于您的场景，您可以通过在值中包含日期来使用会话 cookie 。然后在每个请求的服务器上，您可以读取此值并与当前日期进行比较。如果所需的时间已经过去，只需使 cookie 过期，以便不再在后续请求中发送它。顺便说一下，这种技术用于 ASP.NET 中的 Forms Authentication 模块。您在 web.config 中指定超时并决定是否要使用滑动过期，然后在每个请求上，服务器检查是否达到超时，以便做出使 cookie 无效或更新它的决定（如果滑动过期已启用）。

# azure-sql-database - 是否预计 SQLAzure 有时不可用？

> ID：11976118
> 
> 赞同：0
> 
> 时间：2012-08-15T19:44:40.387
> 
> 标签：azure-sql-database

我正在从我的 Azure 服务连接到 SQLAzure。

大多数时候，一切正常。

但是，有时（大约每天一次），我无法连接。持续约 5 分钟。

我收到以下错误：

> SQLException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误

这是可以预料的吗？

它是云编程的一部分吗？

我应该针对它进行防御性编程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T16:47:34.443

SQL Azure 以及其他云服务预计会出现这种类型的行为。Microsoft 提供[瞬态故障应用程序块](http://msdn.microsoft.com/en-us/library/hh680934%28v=PandP.50%29.aspx)，其中包括适用于各种 Azure 服务（包括 SQL Azure）的强大瞬态故障处理逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:02:37.973

是的，这是意料之中的。在您的连接和命令中，您应该构建某种重试逻辑。这有多难取决于您的数据层。

google 上有很多信息 [https://www.google.com/search?q=sql+azure+transient](https://www.google.com/search?q=sql+azure+transient)

[实体框架 - SQL Azure 重试策略](https://stackoverflow.com/questions/5703428/entity-framework-sql-azure-retry-policy)

# css - CSS在X轴上固定位置但在Y轴上绝对位置？

> ID：11976123
> 
> 赞同：0
> 
> 时间：2012-08-15T19:45:26.840
> 
> 标签：css, position, fixed

我的容器，`#topmenu`在固定位置。我刚刚添加了一个我想随此栏移动的电话号码（图像），但它不会随固定栏移动。

我已经将它绝对定位在一个相对定位的元素中，但它就是不粘。

如果我只是将电话号码设置为位置：固定，那么它会随着视口宽度移动。完成我正在做的事情的最佳方法是什么？

CSS 片段：

```
.topsocial a { margin-left: 15px;  }
#topmenu {position:fixed; z-index:220; }
#topmenu .ktwrap {padding-top: 3px; padding-bottom: 3px; color: #fff;}
#topmenu ul li { display:inline; list-style-type: none; padding: 0px 10px 0 0; font-size: 13px; }
#topmenu .widget-container { margin-top: 5px;}
.topsocial .widget-containter {margin-top: 0px!important;}

#menu-menu li a span {
    display:block;
    line-height:14px;
    margin-right: 4px;
    text-transform: lowercase!important;
}       

.menu-menu ul li a span {
    line-height:14px;
    margin-right: 4px;
    text-transform: lowercase!important;
}

.topsocial {margin-top: 5px; color: #fff;}

.ktlogo {float: left; width: auto; margin-top:-35px; margin-left: 137px; font-family: 'HoneyScriptLight'; font-size: 60px; padding-top: 22px; }

.ktlogo img:hover {background: none;}

#navigationtop { font-size: 12px; color: #fff;}
#navigationtop ul li strong { display: block; padding-bottom: 7px; font-size: 14px; }
#navigationtop .ktwrap { padding-top: 60px; padding-bottom: 5px; height:71px; }
#floatnumber {
    position: absolute;
    top: -3px;
    right: 150px;
    z-index : 270;  
} 
```

PHP片段：

```
<?php get_template_part( 'includes/template-parts/topbar' ); ?>

<?php } ?>

<?php 
$disable_sidebar = of_get_option('disable_footer', '' );
if( $disable_sidebar['navbar']==0 ) { ?>

<div class="ktfullwidth" id="navigationtop"> 
    <div class="ktwrap"> <div id="floatnumber"><img src="http://combined-effort.com/wp-content/uploads/telephone-18005174660.png" alt="Phone Number 1-800-517-4660"></div>
        <div class="ktlogo">
            <?php 
            $disable_sidebar = of_get_option('disable_parts', '' );
            if( $disable_sidebar['logo']==0 ) { ?>

                <?php if ( of_get_option('logo') ) { ?>

                        <a href="<?php echo home_url() ?>"><img src="<?php echo of_get_option('logo'); ?>" /></a>

                        <?php } else { ?>

                        <a href="<?php echo home_url() ?>">

                        <?php if ( of_get_option('logotext') ) { ?>
                            <?php echo of_get_option('logotext', ''); ?></a>
                        <?php } else { ?>
                        Combined Effort</a>
                        <?php } ?>

                <?php } ?>

            <?php } ?>

        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:57:58.023

你可以改变

```
<ul id="menu-main" class="sf-menu sf-js-enabled sf-shadow">...</ul>
<div class="topsocial right">...</div> 
```

进入

```
<ul id="menu-main" class="sf-menu sf-js-enabled sf-shadow">...</ul>
<div class="right">
  <img src="http://combined-effort.com/wp-content/uploads/telephone-18005174660.png" alt="Phone Number 1-800-517-4660">
  <div class="topsocial right">...</div>
</div> 
```

然后删除其他图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:01:08.917

没有详细阅读或测试您的代码：如果我说得对，并且您想用条形移动数字，那么您必须将它放在这个固定的标题中。在原始代码中，您可以看到有两个重叠的标题，并且数字不在位置固定的那个中。有哪些

```
<div id="topmenu" class="ktfullwidth"> 
```

但是在（以及在您的代码中似乎也是如此）

```
<div class="ktfullwidth" id="navigationtop"> 
```

将数字放在#topmenu-div 中。

您也可以在数字本身上使用位置字段，但我建议不要将其放在 div 中。

编辑：我对导航 div 的名称感到困惑。我希望我现在明白了。

# jquery - jquery.js，v1.7.2，第 5875 行字符 5 中的无效参数，仅在 IE8 上

> ID：11976126
> 
> 赞同：0
> 
> 时间：2012-08-15T19:45:50.400
> 
> 标签：jquery, internet-explorer-8

在 IE9 上运行良好的页面。在 IE8 上，我收到以下错误：

无效的论点。jquery.js，第 5875 行第 5 个字符。这一行是：

`this.parentNode.insertBefore( elem, this.nextSibling );`

我正在使用 jQuery JavaScript 库 v1.7.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:01:19.973

Rocket的评论非常有用。是的，在IE中调试后发现问题出在insertAfter方法上。与 IE9/Mozilla 相比，如果调用 insertAfter 的元素不存在，IE8 不会原谅。因此，需要检查 NULL 之类的东西。

因此，在这种情况下，我们添加了元素长度检查，示例如下： if($('#footer').length) { $('#footer').insertAfter('#content').addClass('white中心 padding_half'); }

# php - 我正在使用 gmail 服务器在我的 xampp lite 服务器中发送电子邮件，但我没有收到任何电子邮件

> ID：11976129
> 
> 赞同：0
> 
> 时间：2012-08-15T19:46:01.510
> 
> 标签：php, email, gmail, xampp, mail-server

基本上我遵循了这个教程：

[http://egrasp.wordpress.com/2010/02/03/sending-email-in-php-using-xampp-lite-1-7-3-on-windows/](http://egrasp.wordpress.com/2010/02/03/sending-email-in-php-using-xampp-lite-1-7-3-on-windows/)

它是关于如何在 xampp lite 中将 gmail 设置为邮件服务器的教程。我完全按照所有步骤操作，甚至在 php 中测试了邮件功能，并说它已发送或基本上没有错误警告，但我没有收到任何电子邮件......我还需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:49:11.150

可能是您的 ISP 阻止了正常的 SMTP 端口（许多这样做是为了防止垃圾邮件）。尝试使用`587`Google 提供的备用端口。请参阅来自 Google 支持的[这篇帮助文章。](http://support.google.com/mail/bin/answer.py?hl=en&answer=78799)

# python - django-messages 如何在 syncdb 期间创建通知类型？

> ID：11976131
> 
> 赞同：0
> 
> 时间：2012-08-15T19:46:11.270
> 
> 标签：python, django, django-notification

我正在一起使用[django-notification](https://github.com/jtauber/django-notification/)和[django-messages](https://github.com/arneb/django-messages)项目，并利用 django-messages 内置的 django-notifications 集成及其默认通知类型，用于接收、回复等消息。

但是，我无法确定这些默认的 NoticeType 对象是如何创建的。django-notification 文档建议在 management.py 文件中使用 post_syncdb 信号，这是我为自己的自定义通知所做的。我在任何代码中都找不到定义这些通知类型的任何地方。然而，每次我在新数据库上运行 syncdb 时，它们都会神奇地出现。

由 django-messages 应用程序创建的通知类型的“标签”属性如下：

*   messages_received
*   messages_sent
*   messages_replied
*   messages_reply_received
*   messages_deleted
*   messages_recovered

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:49:57.100

django_messages/management.py：

```
from django.db.models import get_models, signals
from django.conf import settings
from django.utils.translation import ugettext_noop as _

if "notification" in settings.INSTALLED_APPS:
    from notification import models as notification

    def create_notice_types(app, created_models, verbosity, **kwargs):
        notification.create_notice_type("messages_received", _("Message Received"), _("you have received a message"), default=2)
        notification.create_notice_type("messages_sent", _("Message Sent"), _("you have sent a message"), default=1)
        notification.create_notice_type("messages_replied", _("Message Replied"), _("you have replied to a message"), default=1)
        notification.create_notice_type("messages_reply_received", _("Reply Received"), _("you have received a reply to a message"), default=2)
        notification.create_notice_type("messages_deleted", _("Message Deleted"), _("you have deleted a message"), default=1)
        notification.create_notice_type("messages_recovered", _("Message Recovered"), _("you have undeleted a message"), default=1)

    signals.post_syncdb.connect(create_notice_types, sender=notification)
else:
    print "Skipping creation of NoticeTypes as notification app not found" 
```

[https://github.com/arneb/django-messages/blob/master/django_messages/management.py](https://github.com/arneb/django-messages/blob/master/django_messages/management.py)

这些类型在此处定义并连接到 post_syncdb 信号。

# git - “git add *.js”没有在子目录中添加文件

> ID：11976133
> 
> 赞同：11
> 
> 时间：2012-08-15T19:46:21.197
> 
> 标签：git, github

试图提交一些更改。我过去常常`git add`添加我可能使用通配符创建的任何新的 javascript 文件`*.js`。然后我提交更改并推送到 github：

```
混帐添加 *.js
git commit -m "东西"
git push github 大师

```

当我检查 github 时，我一直在编辑的所有文件都是空白的。他们在那里，只是空荡荡的。

然后我再次尝试提交，但 GIT 说一切都是最新的。

然后我回去发现，在我这样做之后`git commit -m "stuff"`，GIT 显示一条消息说我的一堆“.js”文件没有暂存，即使我刚刚使用通配符添加了它们：`git add *.js`. 这是我尝试提交时显示的消息。

```
# 在分支master上
# 未为提交暂存的更改：
# (使用 "git add/rm ..." 更新将要提交的内容)
# (使用 "git checkout -- ..." 丢弃工作目录中的更改)
#
# 修改：src/static/directory1/js/module1/file1.js
# 修改：src/static/directory1/js/module1/file2.js
# 修改：src/static/directory1/js/module2/file1.js

```

为了解决这个问题，我在执行以下操作时必须查看几个目录`git add`：

```
git add src/static/directory1/*.js

```

这似乎奏效了，因为在我再次提交然后推送到 github 之后文件就在那里：

```
git commit -m "东西"
git push github 大师

```

这里发生了什么，为什么我必须向下导航几个目录才能让通配符起作用？

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-15T19:51:53.467

你需要使用

```
git add '*.js' 
```

您必须使用引号，以便 git 在您的 shell 之前接收通配符。如果没有引号，shell 只会在当前目录中进行通配符搜索。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-15T19:52:01.313

> 即使我刚刚使用通配符添加了它们：`git add *.js`

Shell 通配符扩展不会*递归*到子目录中。通配符在 Git 有机会看到它之前被扩展。

如果您使用`git add '*.js'`，那么 Git 将看到通配符并将其与所有以 . 结尾的路径名进行匹配`.js`。因为`*`在初始位置，这将最终递归地添加所有`.js`文件，包括子目录中的文件。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-16T04:33:33.180

另一种方法是使用 find 命令：

```
find . -name '*js' -exec git add {} \; 
```

在没有 exec 的情况下运行它会给你正在处理的文件列表；因此，很容易根据自己的喜好调整此命令。

# ruby-on-rails - 如何在 Intellij Idea 中配置 Rails

> ID：11976135
> 
> 赞同：7
> 
> 时间：2012-08-15T19:46:26.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, intellij-idea

我有一个安装了 Ruby 插件的 IntelliJ Idea 11。我试图配置一个项目，但 IDE 无法将我的视图识别为一个模块。它只是添加了其他文件夹（控制器、数据库、配置）我做错了吗？

![在这里和我的项目中都看不到视图](../Images/ed4e5e4dc1ab673bfe52c89539eca8da.png)

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T19:54:38.773

使用向导为您的 Rails 应用程序的根目录创建一个新项目（从头开始，Ruby 模块，添加**Ruby on Rails**方面，**使用现有的 Rails 应用程序**）：

![使用现有的 Rails 应用程序](../Images/9e2c736575f83106090a3fdd03e82c93.png)

# linux - 以彩色打印 matlab 图形

> ID：11976138
> 
> 赞同：0
> 
> 时间：2012-08-15T19:46:32.977
> 
> 标签：linux, matlab, printing, redhat

当我尝试从 red hat 5 打印 matlab 图形时，它总是出现灰度，即使我打印到文件也是如此。我可以通过将绘图保存为 PNG 然后打印它来解决这个问题，但我希望能够直接打印 matlab 绘图。

我试过在打印对话框和打印预览中选择“颜色”，但图像仍然是灰度的。

如何让 matlab 进行彩色打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T23:18:27.740

您需要编辑`printopt.m`系统上的文件。具体来说，您需要添加该行

```
dev = '-dpsc2'; 
```

这会将打印机驱动程序设置为“彩色 postscript”，而不是 RHEL 的默认打印机驱动程序，即灰度 postscript。

请参阅matlab 文档中的[此页面](http://www.mathworks.com/help/matlab/creating_plots/choosing-a-printer-driver.html)。

# c# - 将文件保存到 MySQL 数据库

> ID：11976143
> 
> 赞同：1
> 
> 时间：2012-08-15T19:46:48.910
> 
> 标签：c#, mysql

我正在使用 MySQL 数据库开发 ac# 项目。我有一个日志文件，我想将此文件存储在数据库中。

我想将实际文件保存到数据库中，但是我所看到的是您必须将其编码为字符串或将字节写入字符串并将其放入数据库中，这就是存储文件的工作方式，我以为您可以只给命令提供文件路径并将其存储在数据库中，而无需我在软件中进行所有编码。

如果这有什么不同，则需要再次从 PHP 中检索它，但我猜这应该无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:50:42.723

是的，您必须将其编码为字符串或字节才能存储文件。另一种方法是存储日志文件位置，而不是将日志文件保存在磁盘上的某个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:15:46.860

这可能听起来有点可笑，但你应该看看[**LOAD_FILE 函数**](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_load-file)

这是 MySQL 文档的示例

```
mysql> UPDATE t
        SET blob_col=LOAD_FILE('/tmp/picture')
        WHERE id=1; 
```

只要日志文件足够小以适合 BLOB，那么这就是您唯一的机会

如果日志文件太大，只需将日志文件归档到某个地方并保存文件位置即可

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:49:39.053

您的程序将不得不解析日志文件并将其转换为 SQL 查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:50:15.797

如果要将文件的**内容**存储在数据库中，那么可以，您可以对其进行编码或将字节存储在表列中。没有办法解决这个问题。

如果您想简单地存储文件的路径，那么您需要做的就是将路径作为参数传递给您`MySQLCommand`，但是当您在文件系统中移动文件时，您的记录显然是无效的。

[链接](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)到关于哪种方法最好的一些相关问题：将文件的内容存储在数据库中或只是文件系统中的路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T19:53:19.987

为什么不使用 Log4Net？它具有自动登录数据库的能力。查看[https://logging.apache.org/log4net/release/config-examples.html](https://logging.apache.org/log4net/release/config-examples.html)以了解有关如何将数据库连接到 Log4Net 的详细信息

`orignal decayed link: http://logging.apache.org/log4net/release/sdk/log4net.Appender.AdoNetAppender.html`

# javascript - Internet Explorer 按键按下事件搞砸了

> ID：11976144
> 
> 赞同：0
> 
> 时间：2012-08-15T19:47:02.610
> 
> 标签：javascript, jquery, internet-explorer, events, firefox

所以我有这个代码：

```
$('.textarea').bind('keydown', function(){
  alert('yooooo');
}); 
```

现在假设我在 textarea 中输入了一堆字符，然后按 Ctrl+A（或全选），然后按退格键，在 Firefox 中，“yoooo”将在退格后正确发出警报，但在 Internet Explorer 中则不会...

有没有办法让它在 IE 中也适用于该操作（全选然后退格）...还有其他一些我需要使用的事件吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-15T19:52:13.640

在 IE9 中为我工作... [http://jsfiddle.net/BarAB/](http://jsfiddle.net/BarAB/)

这很烦人，但它也能在 IE 中做你想做的事。

# php - xml - 如何将 xml 命名空间从 word 文档解析为 php

> ID：11976148
> 
> 赞同：2
> 
> 时间：2012-08-15T19:47:11.973
> 
> 标签：php, xml, ms-word

我正在尝试将 word2003 xml 文件中的 XML 数据解析为 PHP。所以我读到的所有文章都没有解决我的问题不幸的是，文件的所有结构都有名称空间，我无法进入它们进行解析。我发现并阅读了许多关于获取命名空间数据的文章，但它对我没有任何意义。

我的 xml 文件如下所示：

```
[...]
<w:body>
    <w:p wsp:rsidR="00FC2E4E" wsp:rsidRPr="00FC2E4E" wsp:rsidRDefault="00ED100D" wsp:rsidP="00FC2E4E">
        <w:pPr>
            <w:spacing w:line="240" w:line-rule="auto"/>
            <w:ind w:left="-1134"/>
            <w:jc w:val="both"/>
            <w:rPr>
                <w:noProof/>
                <w:sz w:val="26"/>
                <w:sz-cs w:val="26"/>
                <w:lang w:val="PL"/>
            </w:rPr>
        </w:pPr>
        <w:r wsp:rsidR="00FC2E4E" wsp:rsidRPr="00FC2E4E">
            <w:rPr>
                <w:noProof/>
                <w:sz w:val="26"/>
                <w:sz-cs w:val="26"/>
                <w:lang w:val="PL"/>
            </w:rPr>
            <w:t>
                           THIS IS MY SEARCH STRING
            </w:t>
        </w:r>
    </w:p>
</w:body> 
```

我也有我的 php 文件：

```
if (file_exists('file.xml')) {
    $xml = simplexml_load_file('file.xml');
foreach($xml->children() as $child) {
    echo '|' . $child->getName(); <--- this returns nothing!
}

    [...do some modification...]
    $xml->saveXML('/stworz/dupa.xml');
} else {
    exit('Failed to open file.xml.');
} 
```

我想将 xml 的内容（这是我的搜索字符串）更改为另一个值，或者将其删除并放入全新的值？如何进入隐藏在命名空间标记中的文本？请注意，即使是根标记也是命名空间的！

提前帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:57:17.623

此代码*有效*，但会引发大量警告。您也许可以改用[PHPWord](http://phpword.codeplex.com)。

```
<?php
if(file_exists('test.xml')) {
    $xml = new DOMDocument();
    $xml->load('test.xml');
    foreach($xml->getElementsByTagName('t') as $child) {
        echo '|' . $child->nodeValue;
    }
    echo $xml->saveXML();
} else {
    exit('Failed to open file.xml.');
}
?> 
```

# c++ - 在与 OpenMP 并行的嵌套 for 循环中写入共享数组（通过指针）如何产生错误结果？

> ID：11976161
> 
> 赞同：1
> 
> 时间：2012-08-15T19:48:03.470
> 
> 标签：c++, openmp

我有一个非常奇怪的问题，我试图解决和理解。我有以下形式的嵌套 for 循环：

```
#pragma omp parallel for schedule(guided) shared(Array) collapse(3)
for (int i=istart; i<iend; i++)
{
  for (int j=jstart; j<jend; j++)
  {
    for(int k=kstart; k<kend; k++)
    {
       Int IJK = (i*(jend-jstart) + (j-jstart))*(kend-kstart) + (k-kstart);
       Array[3*IJK + 2] = an operation with some shared values;
    }
  }
} 
```

这种形式有三个循环，`Array[3*IJK]`分别是`Array[3*IJK + 1]`和`Array[3*IJK+2]`。Array 实际上也是一个共享指针，对于 的值`IJK`，实际上调用了一个函数（内联）。

我首先尝试并行化所有循环并且程序运行通过，但与我的串行结果相比，结果有所不同。

现在来奇怪的部分。

具有相同结构但具有相同结构的 for 循环`Array[3*IJK + 1]`在并行化时会产生正确的结果（在这种情况下，其他循环是串行的）。但是一旦我并行化其他循环之一，我就会得到不同的结果。只有这个单独的循环在自身并行化时才会产生正确的结果。

另外，如果我不使用`collapse`, 或`collapse(2)`代替`collapse(3)`，我会得到不同的结果。只有使用上述`#pragma`语句，我才能在`Array[3*IJK + 1]`循环中得到正确的结果。

我认为这可能与`Array`写入的顺序有关，但是对于有序的子句和构造，我仍然得到错误的结果。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:13:01.757

你确定你的序列号是正确的吗？

你的`IJK`计算对我来说毫无意义；一方面，它根本不依赖`j`。事实上，如果两个线程得到相同的 (i,k) 对和不同`collapse(3)`的 j——当然可能——就会出现竞争条件，因为它们都将尝试写入同一个 IJK。

你确定你不想要类似的东西吗

```
 Int IJK = (i*(jend-jstart) + (j-jstart))*(kend-kstart) + (k-kstart); 
```

?

# shell - 递归查找A目录下的所有文件，将“abc”写入这些文件。仅对文件

> ID：11976166
> 
> 赞同：0
> 
> 时间：2012-08-15T19:48:26.663
> 
> 标签：shell

我想这将关闭工作

```
find /mydirectory -name '*'  | xargs echo abc > 
```

但我得到了：

```
find: paths must precede expression: b 
```

需要一点帮助:)谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:04:34.537

试试这个

```
find . -type f -exec sh -c 'echo "abc" >> ${1}' _ "{}" \; 
```

或者，如果您想批量执行：

```
find . -type f -exec sh -c 'for f; do echo "abc" >> $f; done' _ "{}" + 
```

如果您需要解释，请询问。

[这个](http://mywiki.wooledge.org/UsingFind)页面是关于如何使用 find 的一个很好的指南。

在这两个命令中，`_`和`{}`作为参数传递给`sh`命令。因为 $0 使用起来并不完全可靠（请参阅链接页面），所以将一个虚拟变量`_`传递给它。

Find 将其匹配项放入`{}`已扩展的 中。因此，如果该命令与一个文件匹配`a`，则在第一个命令 `{}`中扩展为。`a`

在第一个命令中，您传递给 exec 的命令以 结尾`;`，但`;`对 shell 来说是特殊的，因此您将其转义。

第二个命令作为批量操作运行，因此如果 find 匹配`a`、`b`和`c`(等)，则将`{}`扩展为所有三个并传入。

因此，您需要`for f`在第二个命令中使用 a，默认为`for f in $@`，这将是您的`a`, `b`, and `c`（这可以通过 ${1}, ${2}, ${3}... 进行测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:51:11.043

您可以通过编写另一个脚本来完成此操作，该脚本将多个文件名作为参数并对其进行回显。然后，不使用 echo，而是使用 xargs 调用此脚本。您还可以添加`-type f`到`find`以使其省略目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:27:36.613

用 bash 试试这个：

```
for f in $(find /mydirectory -type f); do echo 'abc' > "$f"; done 
```

# c# - 需要 DataGridView 更新

> ID：11976168
> 
> 赞同：0
> 
> 时间：2012-08-15T19:48:36.777
> 
> 标签：c#, winforms, ms-access, datagridview

## 我是 c# .Net 的新手，我正在开发 c# winform 应用程序。我需要你的帮助。

```
public partial class Form1 : Form 
{ 
    OleDbConnection baglanti = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Burak YEŞİLYURT\Desktop\secret.accdb"); 
    OleDbCommand komutcu; 
    OleDbDataAdapter adpt; 
    DataSet ds; 
    public Form1() 
    { 
        InitializeComponent(); 
        baglanti.Open(); 
        OleDbCommand komutcu = new OleDbCommand("SELECT * FROM todo", baglanti); 
        OleDbDataAdapter adpt = new OleDbDataAdapter(komutcu); 
        DataSet ds = new DataSet(); 
        adpt.Fill(ds); 
        dataGridView1.DataSource = ds.Tables[0]; 

    } 

    private void button1_Click(object sender, EventArgs e) 
    { 
        OleDbCommandBuilder komut = new OleDbCommandBuilder(adpt); 
        DataSet yeni = new DataSet(); 
        yeni = ds.GetChanges(DataRowState.Modified); //here i get the error
        adpt.Update(yeni.Tables[0]); 
    } 
} 
```

* * *

当我调试我的程序时，我收到以下错误`yeni = ds.GetChanges(DataRowState.Modified);`

> “你调用的对象是空的。 ”

我的目的：填充`DataGridView`和用户编辑单元格后，将更改保存在单元格中。我无法解决这个问题。欢迎任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:53:27.210

修复你的构造函数

```
public Form1() 
    { 
        InitializeComponent(); 
        baglanti.Open(); 
        OleDbCommand komutcu = new OleDbCommand("SELECT * FROM todo", baglanti); 
        OleDbDataAdapter adpt = new OleDbDataAdapter(komutcu); 
        this.ds = new DataSet();  //there was an error in this line
        ..

    } 
```

您在构造函数中创建了 的本地实例`DataSet`，但忘记保存对类变量 的引用`ds`。然后在`button1_Click`您尝试访问未初始化的字段`ds`（它有一个`null`值）。

所以，而不是这条线

```
DataSet ds = new DataSet(); 
```

你应该写

```
this.ds = new DataSet(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:55:08.133

你已经定义了两次数据集 oledbcommand 和 oldbDataAdapter 所以它不能工作

```
 public partial class Form1 : Form 
    { 
        OleDbConnection baglanti = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Users\Burak YEŞİLYURT\Desktop\secret.accdb"); 
        OleDbCommand komutcu; 
        OleDbDataAdapter adpt; 
        DataSet ds; 
        public Form1() 
        { 
            InitializeComponent(); 
            baglanti.Open(); 
            komutcu = new OleDbCommand("SELECT * FROM todo", baglanti); 
            adpt = new OleDbDataAdapter(komutcu); 
            ds = new DataSet(); 
            adpt.Fill(ds); 
            dataGridView1.DataSource = ds.Tables[0]; 

        } 

        private void button1_Click(object sender, EventArgs e) 
        { 
            OleDbCommandBuilder komut = new OleDbCommandBuilder(adpt); 
            DataSet yeni = new DataSet(); 
            yeni = ds.GetChanges(DataRowState.Modified); //here i get the error
            adpt.Update(yeni.Tables[0]); 
        } 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:00:52.427

```
OleDbConnection baglanti = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data     Source=C:\Users\Burak YEŞİLYURT\Desktop\secret.accdb"); 
    OleDbCommand komutcu; 
    OleDbDataAdapter adpt; 
    DataSet ds = new DataSet(); 
    public Form1() 
    { 
        InitializeComponent(); 
        baglanti.Open(); 
        OleDbCommand komutcu = new OleDbCommand("SELECT * FROM todo", baglanti); 
        OleDbDataAdapter adpt = new OleDbDataAdapter(komutcu); 
        //DataSet ds = new DataSet(); 
        adpt.Fill(ds); 
        dataGridView1.DataSource = ds.Tables[0]; 

    } 
```

# objective-c - 在 UITableView 中创建隐藏的 UISegmentedControl

> ID：11976176
> 
> 赞同：1
> 
> 时间：2012-08-15T19:49:08.713
> 
> 标签：objective-c, uitableview

与 iBooks 应用程序一样，当您下拉 tableview 时，会出现一个搜索栏和分段控件，以允许您在两种类型的视图之间进行搜索和切换。

当你拉得足够远时它会停留在那个位置，或者当你拉得足够高时它会被隐藏起来。

我正在尝试用`UISegmentedControl`. 到目前为止，我已经成功地将分段控件作为子视图添加到表中。（它有一个负 Y 框架，所以让它贴在 tableview 上方）。

我也实现了这段代码：

```
- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView {
    float yOffset = scrollView.contentOffset.y;

    if (yOffset < -70) {
        [scrollView setContentOffset:CGPointMake(0.0f, -70.0f) animated:YES];
    } else if (yOffset > -10) {
        [scrollView setContentOffset:CGPointMake(0.0f, -11.0f) animated:YES];
    }
} 
```

这很好用，直到我尝试使用分段控件。表格就像滚动一样，完全忽略分段控件（即，如果我点击一个分段，它甚至不会被选中，而是表格向上滚动，隐藏分段控件。

我确实使用了该`scrollViewDidScroll`方法，但这使它变得有问题并且滚动跳跃。

我也尝试制作分段控件`exclusiveTouch = YES`，但这没有任何效果。

我会感谢所有的帮助！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:12:54.163

这是我的有效代码：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    //
    //  Table view
    //
    if ([scrollView isKindOfClass:[myTableView class]]) {
        //
        //  Discover top
        //
        CGFloat topY = scrollView.contentOffset.y + scrollView.contentInset.top;

        if (topY <= self.tableHeaderHeightConstraint.constant) {
            [self setIsScrolledToTop:YES];
        } else {
            [self setIsScrolledToTop:NO];
        }
    }
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    //
    //  Table view
    //
    if ([scrollView isKindOfClass:[myTableView class]]) {
        //
        //  Toggle favourite category
        //
        if ([self isScrolledToTop]) {
            //
            //  Show
            //
        } else {
            //
            //  Hide
            //
        }
    }
} 
```

编辑了上面的代码，使其更通用，但在语法上它是正确的

# iphone - iPhone - 粒子设计器 - Cocos2d - 动画性能不佳

> ID：11976178
> 
> 赞同：1
> 
> 时间：2012-08-15T19:49:14.063
> 
> 标签：iphone, cocos2d-iphone, particles

我在使用粒子效果时遇到了问题。

我在粒子设计器中设计了一系列动画。当我在我的 iPhone/iPod/iPad 上运行这些动画时，我发现它看起来非常不同。实际设备上的动画看起来更加参差不齐。

我的应用程序以 30fps 的速度运行，动画运行时帧速率确实没有损失。我尝试将其提高到 60 fps，但这并没有解决问题。

这是我实现粒子效果的代码。

```
CCParticleSystem *fireEffectAnim;
fireEffectAnim = [ CCParticleSystemQuad particleWithFile:@"FireEffect.plist" ];
[self addChild:fireEffectAnim];
fireEffectAnim.autoRemoveOnFinish = YES; 
```

任何有助于解释质量/性能损失的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:03:37.163

尝试取出程序中可能存在的任何 NSLog 或 CCLog 语句。这些可能会减慢您的应用程序。

# java - 为什么编译我的程序后会出现“java.lang.ClassNotFoundException”错误？

> ID：11976180
> 
> 赞同：-1
> 
> 时间：2012-08-15T16:16:50.460
> 
> 标签：java, file

![在此处输入图像描述](../Images/c44b24362ccbdb3027e90aa4bccecb20.png) ![在此处输入图像描述](../Images/45bced4110b43c720f322ad3aae71d38.png)

我上传了两个与我的 java 相关的屏幕截图。当我尝试编译 java 文件时，它会正确编译 java 文件并成功创建 .class 文件，但是当我尝试运行已编译的文件时，它会给出错误消息。我附上了两个与此问题相关的屏幕截图。请帮我。

这是我尝试使用`java Test`命令运行的堆栈跟踪：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: Test : Unsupp
orted major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessControll.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Test. Program will exit. 
```

并使用`java Test.java`命令：

```
Exception in thread "main" java.lang.NoClassDefFoundError: Test/java
Caused by: java.lang.ClassNotFoundException: Test.java
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessControll.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: Test.java. Program will exit. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:59:34.437

你有两个问题。第一个，正如@davidfmatheson 所提到的，是您已经在一个 Java 版本下编译了该程序，并试图在另一个版本中运行它。您要么需要在 Java 6 中重新编译，要么在 Java 7 中运行它。

第二个问题与您的命令行有关。当你编译时，你需要传递`javac`文件名，*包括*扩展名，但是当你运行它时，`java`使用不带扩展名的名称：

```
> javac Test.java
> java Test 
```

这是`NoClassDefFound`错误的根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:55:54.130

版本号 51.0 表示您使用 JDK 1.7 编译。`which javac`从命令行检查。然后，您尝试使用`java Test`显然是 1.6 版的 Java 来运行它。找出您的 JDK 1.6 所在的位置，确保 1.6 中的 位于 . `javac`，`PATH`然后重新编译您的`Test`类。

# java - 同步文件对象

> ID：11976184
> 
> 赞同：8
> 
> 时间：2012-08-15T19:49:33.033
> 
> 标签：java, synchronized

据我所知和研究，`synchronized`Java 中的关键字可以同步方法或代码块语句来处理多线程访问。如果我想在多线程环境中锁定文件以用于写入目的，我~~必须~~使用[Java NIO 包](http://docs.oracle.com/javase/6/docs/api/java/nio/package-summary.html)中的类以获得最佳结果。昨天，我提出了一个关于处理文件 I/O 操作的共享 servlet 的问题，BalusC 的注释对解决方案很有帮助，但是[这个答案](https://stackoverflow.com/a/11957978/1065197)中的代码让我感到困惑。我不是在要求社区“烧掉那个帖子”或“让我们对他投反对票”（注意：我没有投反对票或其他任何事情，我没有反对答案），我要求解释代码片段是否可以被认为是一种好的做法

```
private static File theFile = new File("theonetoopen.txt");

private void someImportantIOMethod(Object stuff){
    /*
        This is the line that confuses me. You can use any object as a lock, but
        is good to use a File object for this purpose?
    */
    synchronized(theFile) {
        //Your file output writing code here.
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:55:43.110

问题不在于锁定 File 对象-您可以锁定任何对象，这并不重要（在某种程度上）。

令我印象深刻的是您使用的是非最终监视器，因此如果您的代码的另一部分重新分配 theFile: `theFile = new File();`，则出现的下一个线程将使用不同的对象锁定，并且您无法保证您的代码不会不再由 2 个线程同时执行。

已经`theFile`完成了，代码就可以了，尽管最好使用私有监视器，只是为了确保没有另一段代码将它用于其他锁定目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:21:56.863

如果您只需要在单个应用程序中锁定文件，则可以（假设`final`已添加）。

请注意，如果您使用不同的类加载器多次加载该类，则该解决方案将不起作用。例如，如果您有一个 Web 应用程序在同一个 Web 服务器中部署了两次，则该应用程序的每个实例都将拥有自己的锁定对象。

正如您所提到的，如果您希望锁定功能强大并且文件也从其他程序锁定，您应该使用[FileLock](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileLock.html)（请参阅文档，在某些系统上，不能保证所有程序都必须遵守锁定）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T19:57:10.163

你看到了吗：`final Object lock = new Object()`你会问吗？
正如@assylias 指出的问题是锁不在`final`这里

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T20:07:56.403

Java 中的每个对象都可以充当同步锁。它们被称为内在锁。一次只有一个线程可以执行由给定锁保护的代码块。

更多信息：http: [//docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)

对整个方法使用 synchronized 关键字可能会对您的应用程序产生性能影响。这就是你有时可以使用同步块的原因。

您应该记住不能更改锁定引用。最好的解决方案是使用 final 关键字。

# asp-classic - 需要一个快速简单的经典asp页面从sql server数据库中查询记录

> ID：11976186
> 
> 赞同：0
> 
> 时间：2012-08-15T19:49:42.310
> 
> 标签：asp-classic

我知道这看起来很简单，但我一直在寻找 2 天，我发现的只是不起作用的片段。我只是想让一个网页动态显示一个有 4 列的表格的内容。明天需要！帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:16:35.160

这是最简单的方法。这是假设您的服务器是 SQL Server。如果没有，请访问[http://connectionstrings.com](http://connectionstrings.com)并查找您的服务器的详细信息。那个网站很棒，我发现自己一直都在上面。

```
set rs = server.CreateObject("ADODB.Recordset") 
rs.open "select col1 from table1", "provider=sqloledb.1;uid=user;pwd=password;database=database;Server=server;"
do while rs.EOF = false
    response.write rs("col1")
    rs.MoveNext
loop 
```

这里发生的是我们正在使用 Microsoft 的 ADO 数据库库。我正在创建一个`Recordset`对象并调用它的`open`方法。提供给该`open`方法的是我要执行的 sql 语句以及如何连接到该数据库的详细信息。关于如何连接到数据库的细节通常称为“连接字符串”。上面提到的网站是一个非常宝贵的资源，可以准确地确定它应该是什么样子。99% 的时间里，我遇到的任何问题都是无效的连接字符串。打开后，我会遍历 while 循环中返回的记录并将数据写入页面。

不要忘记来电`rs.MoveNext`！！！这些年来我已经做过几次了，你最终会陷入无限循环。

# plist - Retina 在应用程序中显示图像？

> ID：11976187
> 
> 赞同：0
> 
> 时间：2012-08-15T19:49:47.537
> 
> 标签：plist, retina-display

据我了解，支持视网膜显示所需的只是拥有@2x 图像并将非视网膜显示设备的比例缩小到一半。我将所有常规文件和@2x 文件放在我的 Supporting Files > Images 文件夹中。但是，在苹果网站上是这样说的：

“即使你使用这些固定的图标文件名，你的应用程序应该继续在你的应用程序的 Info.plist 文件中包含 CFBundleIcons 或 CFBundleIconFiles 键”

我不知道我必须对 plist 文件做任何事情，或者苹果网站上的信息可能已经过时了。我正在运行 xcode 4.4，感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:07:17.693

添加图标很简单，在 xcode 导航器中单击您的项目，然后将图标拖放到正确的插槽中。然后，要确保它们在那里，只需单击 info 选项卡 icon files ios5, icon files, ... ，然后查看它是否显示 icon.png, icon@2x.png, icon-72.png 因为你需要这些. 它非常简单，您真正需要做的唯一编辑是添加 icon-72.png（应该是 72x72），然后它应该可以正常工作

# php - PHP库的LinkedIn Oauth范围问题

> ID：11976188
> 
> 赞同：0
> 
> 时间：2012-08-15T19:49:51.360
> 
> 标签：php, oauth, linkedin

我一直在尝试实现最近添加到 LinkedIn API 的新范围功能。我目前正在使用“simple-linkedinphp”库作为我的 LinkedIn oauth 库（http://code.google.com/p/simple-linkedinphp/）。

按照 LinkedIn 文档上的说明，我将“范围”参数添加到我的请求令牌 URL 中，如下所示：

```
 const _URL_REQUEST    = 'https://api.linkedin.com/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress'; 
```

然而，这收效甚微。我仍然可以得到与以前相同的 o-auth 对话，而无需对电子邮件地址进行任何额外的许可。任何人都可以在 PHP 中正常工作吗？这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:09:05.333

您需要[创建新的应用程序 API 密钥](https://developer.linkedin.com/blog/making-it-easier-you-develop-linkedin)并使用它们来查看更新的身份验证屏幕。

# java - 在 Android 中将阿拉伯文本转换为 UTF8

> ID：11976189
> 
> 赞同：1
> 
> 时间：2012-08-15T19:49:54.267
> 
> 标签：java, android, utf-8, character-encoding, arabic

我正在使用 UTF8 编码从阿拉伯语的 JSON 接收数据

**“\u0639\u0644\u0649”**

在 textview 中显示它时，它会转换为“علي”

假设我从键盘输入阿拉伯文本，我如何从这个阿拉伯文本中获取 UTF8

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:06:52.300

字符串始终采用 Unicode，只有字节数组具有编码。

你最初的陈述毫无意义。您正在获取一个包含三个阿拉伯字符的字符串并将其转换为默认编码的字节数组，然后将这些字节转换回假设为 UTF-8 编码的字符串。

```
scala> val str = "\u0639\u0644\u0649"
str: java.lang.String = ???

scala> str.length
res0: Int = 3 
```

我看这没有什么好处`string = "\u0639\u0644\u0649"`。如果您需要以 UTF-8 编码表示此字符串的字节，您可以调用 `string.getBytes("UTF-8")`，但您的通信库更有可能采用字符串并让您以某种方式指定编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:27:54.923

`Encode`您的代码可以正常工作，只是您必须将`Decode`数据放入`Base64`. 这对我有用。如果你需要，我可以分享代码。

# css - 带有类似书签栏的文本 div

> ID：11976190
> 
> 赞同：0
> 
> 时间：2012-08-15T19:49:54.470
> 
> 标签：css

为了更好地解释，我写了[jsfiddle 示例](http://jsfiddle.net/scythargon/CMCM4/)，那么，如何使红色条充满整个高度`.frame`？并且可能有任何完全不同的更好的方法来制作这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:14:57.757

定位元素不再是布局的一部分，因此它们不知道父元素的尺寸是多少。您需要使用 JavaScript 来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:27:53.913

我自己解决。[JSfiddle 演示](http://jsfiddle.net/scythargon/QPGfH/)。

```
var move_bookmark = function(){
    var sh = parseInt($(this).css('height').replace('px',''));
    var ph = parseInt($(this).parent().css('height').replace('px',''));
    if (sh%2==0)//this is for solving [this problem] - 
//http://math.stackexchange.com/questions/183018/pixel-rectangle-precise-rotating
    {
        if(ph%2!=0)
        {
            ph++;
            $(this).parent().css('height',ph+'px');
        }
    }
    else
    {
        if(ph%2==0)
        {
            ph++;
            $(this).parent().css('height',ph+'px');
        }
    }
    $(this).css('width',ph+'px');
    var sw = ph;
    var offset = parseInt(ph-sw/2-sh/2)+'px'
    console.log(sw+"/"+sh);
    $(this).css('top',offset);
    $(this).css('left',-sw/2+sh/2+'px');
    $(this).parent().css('padding','0px 0px 0px '+sh+'px');
}
$('.bookmark').each(move_bookmark); 
```

# html - 如何将文本向后斜体？

> ID：11976193
> 
> 赞同：11
> 
> 时间：2012-08-15T19:49:58.013
> 
> 标签：html, css, italic

我想将文本*向后斜体或以与当前文本相反的方式向左倾斜*。这可以在 HTML/CSS 甚至 Javascript/jQuery 中实现吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T00:14:25.300

我更新了 jos 的演示以使用 jQuery 将每个字母包装在一个跨度中，然后使用[Mozilla 的转换](https://developer.mozilla.org/en-US/docs/CSS/transform#Live_examples)文档和[演示](http://jsfiddle.net/Mottie/dRQaw/511/)中的示例转换每个字母：

HTML

```
<div id="skewed">
  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque eu metus nisi.
  Integer non adipiscing massa. Etiam et diam magna. Mauris sit amet arcu dui, a
  malesuada erat.
</div> 
```

jQuery

```
// html function requires jQuery 1.4+
$('#skewed').html(function (i, h) {
    h = h.replace(/\s+/g, '\u00a0').split('');
    return '<span>' + h.join('</span><span>') + '</span>';
}); 
```

CSS

```
#skewed {
    font: 24px Georgia, sans-serif;
    background: #ccc;
    padding: 10px 20px;
}
#skewed span {
    display: inline-block;
    /* see https://developer.mozilla.org/en-US/docs/CSS/transform */
    -webkit-transform:  skewx(20deg);
          -o-transform: skewx(20deg);
             transform: skewx(20deg);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T19:56:40.040

我想这可能是你正在寻找的？[**jsFiddle 稍微**](http://jsfiddle.net/dRQaw/)
玩一下代码。否则很确定这是不可能的。您可以在图像编辑软件中执行此操作，例如 Paintshop 等。

```
#skewed {
font: 21px Impact, sans-serif;
text-align: center;
background: #ccc
}
#skewed {
 width:             350px;
 height:            140px;

 -moz-transform:    skew(-5deg, -5deg);
 -o-transform:      skew(-5deg, -5deg);
 -webkit-transform: skew(-5deg, -5deg);
 transform:         skew(-5deg, -5deg);
} 
```

```
<div id="skewed">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque eu metus nisi. Integer non adipiscing massa. Etiam et diam magna. Mauris sit amet arcu dui, a malesuada erat.</div>

 <!--[if IE]>
 <style>
 /*
 * The following two rules are for IE only and
 * should be wrapped in conditional comments.
 * The -ms-filter rule should be on one line 
 * and always *before* the filter rule if
 * used in the same rule.
 */

#skewed {

  /* IE8+ - must be on one line, unfortunately */ 
 -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=1, 
 M12=-0.08748866352592455,M21=-0.08748866352592455, M22=1, 
 SizingMethod='auto expand')";

 /* IE6 and 7 */ 
 filter: progid:DXImageTransform.Microsoft.Matrix(
        M11=1,
        M12=-0.08748866352592455,
        M21=-0.08748866352592455,
        M22=1,
        SizingMethod='auto expand');

/*
 * To make the transform-origin be the middle of
 * the object.    Note: These numbers
 * are approximations.  For more accurate results,
 * use Internet Explorer with this tool.
 */
  margin-left: -9px; 
  margin-top: -18px;

}
</style>
<![endif]-->​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T19:52:20.887

您也许可以旋转文本。

[http://snook.ca/archives/html_and_css/css-text-rotation](http://snook.ca/archives/html_and_css/css-text-rotation)

似乎很难，但您可能必须按每个字符执行此操作。不完全是预期的倾斜效果，但很接近。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T19:52:39.290

我认为唯一的方法是使用一种向后倾斜的特殊字体。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-15T19:54:36.077

我相信您唯一真正的选择是找到（或创建）具有向后斜体字形的字体，并通过自定义将其嵌入到您的网页中`@font-face`。

为此，您可以使用许多在线字体生成器之一，例如[FontSquirrel](http://www.fontsquirrel.com/fontface/generator/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-13T13:56:41.903

使用左倾斜体兼容字体[并将其嵌入到您的网站中，例如](https://stackoverflow.com/questions/220236/how-to-embed-fonts-in-html)[这个](https://www.myfonts.com/fonts/baselinefonts/rough-egyptienne/)。[这里](http://www.1001fonts.com/slanted-fonts.html)有免费的替代品。

# jquery - jquery .load 目标出现在新页面上

> ID：11976194
> 
> 赞同：0
> 
> 时间：2012-08-15T19:50:01.990
> 
> 标签：jquery

当我`.load()`在 jQuery 中使用该函数时，我的目标在同一页面上，但由于某种原因，它不断给我一个新页面。

这是代码：

```
$('form').submit(function () {
    $("#searchResults").load('@(Url.Action("GetSearchResults", "MyController"))');
}); 
```

我在同一页面上有一个名为`#searchResults`

我的控制器中的`GetSearchResults`Action 实际上返回了一个包含 Telerik 数据网格的局部视图。

我的期望是部分视图将`#searchResults`使用 Ajax 加载到 div 中而无需刷新页面。但是，一个新页面会显示为部分视图，而不是更新`#searchResults`div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:52:08.290

您需要在提交事件结束时返回 false 以防止默认浏览器处理提交。

```
$('form').submit(function () {
      $("#searchResults").load('@(Url.Action("GetSearchResults", "MyController"))');
      return false;
}); 
```

# windows - 命令前的空格绕过 DOSKEY

> ID：11976198
> 
> 赞同：0
> 
> 时间：2012-08-15T19:50:16.623
> 
> 标签：windows, command-prompt

我想让我的用户不要在命令行中运行“dir”，所以我使用 DOSKEY 将“Dir”别名为“CLS”。测试人员发现在“DIR”之前放置一个空格可以绕过别名。

在设置 DOSKEY 时，我尝试在“DIR”之前放置一个空格，但命令提示符忽略了空格。

有人找到了一种让 DOSKEY 确认空格的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:57:06.367

拒绝您的用户对所有相关位置的*列出目录内容*权限。这可能是更简单的方法。这样他们可以运行`dir`，但它不会有任何用处。

不过，我什至不想弄清楚你为什么想要这样的东西。

关于`doskey`：正如您所注意到的，宏替换是按字面意思完成的，并且仅在命令行的开头完成。那你想做什么？`dir`为to创建宏，`cls`前面有 1、2、3、...、8188 个空格？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:24:25.790

黑名单几乎永远不会奏效，在这种情况下肯定不会奏效。例如，您可以通过反复按 TAB 来列出目录中的文件。

相反，使用白名单。编写一个接受用户输入的控制台应用程序，检查输入是否是允许用户运行的命令，如果是，则将该命令传递给 shell——或者，更好的是，自己实现“批准”的命令，这样(a) 不能有任何特殊字符的诡计，并且 (b) 您可以从批准的应用程序列表中删除 cmd.exe - 您*正在*使用软件限制策略，对吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:10:40.807

即使您可以弄清楚如何使您的 DOSKEY 宏想法起作用（我认为您做不到），那也毫无意义。您的用户可以通过创建以下批处理文件轻松绕过限制：

```
@dir %* 
```

DOSKEY 宏在批处理文件中不起作用，因此没有什么可以阻止批处理文件执行。并且您的用户可以将批处理文件命名为他们想要的任何名称，因此您将拥有一个时间监管的恶魔。

# android - Intent::putExtra() 和 EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

> ID：11976200
> 
> 赞同：4
> 
> 时间：2012-08-15T19:50:34.420
> 
> 标签：android, android-intent

我的代码[如下：](http://ideone.com/AQ9UD)

首先，我想知道*第 20 行*：

我有两个问题：

一个。为什么将*MY_MESSAGE*分配给*com.example.myfirstapp.MESSAGE*？湾。什么是*com.example.myfirstapp.MESSAGE*？C。我曾经在任何地方发过消息；这会像 r.java 文件中的变量一样自动制作，还是我需要在某个地方制作？

其次，关于*第 40 行：intent.putExtra(EXTRA_MESSAGE, message);*

我不确定此方法是否会向即将调用的活动添加消息或什么...部分，由于不完全了解 Intent 的意义，我很难理解这一点。 **我想阅读关于一切是什么的 200 个基本部分，但我已经设定了截止日期，并且我被告知暂时不要为这个项目采用这种方法**

鉴于[Android Docs](http://developer.android.com/guide/components/intents-filters.html)的解释，我知道意图是：

> **Intent**本身，一个 Intent 对象，是一个被动的数据结构，持有对要执行的操作的抽象描述

A.) 有人可以解释一下意图的用途或提供一些比文档更好的快速文章吗？

B.) 更清楚地解释 putExtra( ) 的作用以及这些参数：

*   name 额外数据的名称，带有包前缀。
*   value 字符串数组数据值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T20:07:10.030

An`Intent`被恰当地命名；这是你想要做的。正如[文档](http://developer.android.com/reference/android/content/Intent.html)所说：

> 它最重要的用途是在活动的启动中，它可以被认为是活动之间的粘合剂。它基本上是一种被动数据结构，包含对要执行的操作的抽象描述。

通过您的代码，您熟悉如何启动`Activity`via `Intent`：

```
new Intent(this, DisplayMessageActivity.class); 
```

这使用您的当前`Activity`作为启动 的上下文`Intent`，并提供要启动的目标类。你已经知道了，我想。基本上，这`Intent`只是 Android 设备遵循的指南，以便它使用正确的信息启动正确的目标。

关于你的真正问题：

1.  “意图是做什么用的？” 如上所述；基本上，它用于告诉操作系统你的目标是什么，它来自哪里，以及它应该提供什么数据。您已经在没有意识到的情况下看到了其中的大部分内容；[此构造函数](http://developer.android.com/reference/android/content/Intent.html#Intent%28android.content.Context%2C%20java.lang.Class%3C%3F%3E%29)是您一直在使用的构造函数，详细说明了“从”和“到”部分。当您使用 时`putExtra`，您正在提供`Intent`它可以提供给代码“to”部分的数据。
2.  该`name`参数最好由文档总结：“额外数据的名称，带有包前缀。” 这就像 a 中的一个键`HashMap`；它是您要打包的内容的字符串标识符。他们告诉你使用你的包的前缀，只是为了防止混淆。在您的情况下，您应该使用“com.SG.Three_Piece_Radio.YOURKEYNAME”；this 不必在任何地方声明，也不是常量。只是一个字符串。该值只是额外（数据）的内容；这可能有很多不同的东西—— `short`、、、、`int`等等。（这些都可以在文档中的各种[s](http://developer.android.com/reference/android/content/Intent.html)[中](http://developer.android.com/reference/android/content/Intent.html)找到。）`String``Parcelable``putExtra`[`Intent`](http://developer.android.com/reference/android/content/Intent.html)

收到您`Intent`的信息后，您可以使用这些相同的数据位（例如，`String myStr = getIntent().getStringExtra("com.SG.Three_Piece_Radio.YOURKEYNAME");`）并在`Activity`您调用的内容中对它们做任何您想做的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-17T21:49:18.807

我认为人们在这里对 Intent 本身及其目的进行了很好的解释非常有帮助。我必须从这些答案中学到很多东西。

但是，我认为有一个小方面需要更多解释。

因此，要回答您的第一个问题：-

> 一个。为什么将 MY_MESSAGE 分配给 com.example.myfirstapp.MESSAGE？湾。什么是 com.example.myfirstapp.MESSAGE？C。我曾经在任何地方发过消息；这会像 r.java 文件中的变量一样自动制作，还是我需要在某个地方制作？

我的回答是：-

所以正如所有解释的那样，putExtra 用于携带额外的信息/数据以及将要开始的新活动的意图。putExtra 携带的这些附加信息在 Intent 中以键值对的形式给出。在这个键值对中，键在语法上总是必须是一个字符串。在您的情况下，该值也是一个字符串，“键”可以是任何随机字符串。现在，为了确保系统不会将您的 KEY 与其他应用程序的 KEY 混淆，您应该始终将字符串的整个数据包结构与它一起附加。因此你使用： -

> com.example.myfirstapp.MESSAGE

其中**MESSAGE**实际上是键的名称，（如我上面提到的，所需的字符串）将与将通过意图传递给新活动的字符串值相关联。

现在您也可以很好地编写以下内容：-

```
intent.putExtra("com.example.myfirstapp.MESSAGE", message); 
```

代替 ：-

> intent.putExtra（**EXTRA_MESSAGE，**消息）；

但这会降低代码的灵活性，以便以后进行更改。至于密钥名称的任何更改，您将不得不在任何地方进行更改。因此，为了避免这种情况，我们宁愿将密钥的名称（在您的情况下为**MESSAGE**）分配给 String 变量（在您的情况下**为 EXTRA_MESSAGE**）。

这也使得其他活动更容易通过一个简单的字符串变量来引用这个键。因此，为了使其可用于其他活动（加上其他自我解释的功能），您将其设置为：-

**public final static** String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";

如果我碰巧错过了什么或在某个地方出错了，请纠正我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T20:05:58.557

Intent 最常见的用途是在应用程序中启动新的活动（屏幕）（第 41 行）。extras Bundle 是在活动之间传递数据的一种方式。Extras 作为键值对输入，因此 EXTRA_MESSAGE 是一个键，用于标识特定值，以便其他活动可以检索和使用它。

# java - 使用 java 反射动态创建 JSF 表单

> ID：11976201
> 
> 赞同：5
> 
> 时间：2012-08-15T19:50:40.707
> 
> 标签：java, hibernate, jsf, reflection, crud

我正在尝试创建一个简单的 crud 表单来使用休眠将数据插入数据库，而不知道对象类型是什么。最终目标是数据库中的每个表只有一个插入表单。到目前为止，我得到了当前对象具有的方法，检查它是否具有任何设置方法，并为每个具有集合的字段创建一个文本输入。

```
UIViewRoot viewRoot = FacesContext.getCurrentInstance().getViewRoot();
HtmlPanelGrid hpg = (HtmlPanelGrid) viewRoot.findComponent("panel");
    for (Method method : declaredFields) {
        String name = method.getName();

        if (name.contains("set")) {
            HtmlOutputText hot = new HtmlOutputText();
            HtmlInputText hit = new HtmlInputText();
            hot.setValue(name.substring(3));
            try {
                hit.setValue(newObject.getClass().getMethod(name, String.class));
            } catch (Exception ex) {
                Logger.getLogger(ReflectController.class.getName()).log(Level.SEVERE, null, ex);
            }
            hpg.getChildren().add(hot);
            hpg.getChildren().add(hit);
        }

    } 
```

这里的 newObject 是稍后要通过 hibernate 插入到数据库中的对象。我的问题是这样的：

如何将该对象中的某个字段分配给当前正在创建的文本输入。到目前为止，如果我像上面那样将方法放入值中，它只会在该输入的 value 属性中打印出方法。我想要的是，当提交此表单时，将该文本框中的值分配给具有该名称的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:14:25.200

在 JSF 中，将输入组件绑定到属性是使用 EL 表达式完成的。你可以像 Steve 展示的那样以编程方式创建一个，但这种语法真的很丑陋。在相关的说明中，组件树的编程操作是使用 JSF 的一种相当非正统的方式。解决您的要求的正统方法是：

```
<ui:repeat var="prop" value="#{genericEditorBean.propertyNames}">
    <h:outputLabel value="#{prop}" for="input"/>
    <h:inputText id="input" value="#{genericEditorBean.object[prop]}"/>
</ui:repeat> 
```

在哪里

```
public List<String> getPropertyNames() {
    List<String> propertyNames = new ArrayList<>();
    BeanInfo beanInfo = Introspector.getBeanInfo(object.getClass());
    for (PropertyDescriptor pd : beanInfo.getPropertyDescriptors()) {
        propertyNames.add(pd.getName());
    }
    return propertyNames;
} 
```

（当Java API为此目的提供一个类时，确实没有理由重新实现对Java Bean属性的扫描。与您自己开发的版本不同，这还将处理从超类继承的属性......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:35:05.283

*我曾经使用一个名为MetaWidget*的开源库来执行此操作。

那是几年前的事了，但它运行良好且易于设置。

看起来该项目仍然处于活动状态：

*   [http://metawidget.sourceforge.net/index.php](http://metawidget.sourceforge.net/index.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T21:23:51.810

我可以给你一个部分答案 - 你需要动态创建一个 ValueExpression

```
 Application app = FacesContext.getCurrentInstance().getApplication();
    hit.setValueExpression("value", app.getExpressionFactory().createValueExpression(FacesContext.getCurrentInstance().getELContext(), "#{bean.item}", Item.class)); 
```

困难的部分将是创建实际映射到对象值中的字段的 valueExpression。这需要更多的思考，但您肯定需要动态 valueExpression。如所写，这将导致执行您的 bean 的 setItem(); 方法，其参数类型为 Item。您将需要一些更复杂的东西。

# javascript - 将图层添加到另一个图层

> ID：11976207
> 
> 赞同：0
> 
> 时间：2012-08-15T19:50:59.477
> 
> 标签：javascript, html, canvas, html5-canvas, kineticjs

我有以下代码，我试图将一些 Kineticjs 层添加到另一个层，但是当我什么也没做时。我在画布上添加了其他形状，它们显示得很好，如果我分别添加所有图层，它们就会出现。这是一个错误还是我做错了什么？

```
this.canvas = new Kinetic.Stage({ "container": jQuery( "#testElement" ).get(0),
    "width": ShooterGame.WIDTH, "height": ShooterGame.HEIGHT });

this.container = new Kinetic.Layer();
this.layer1 = new Kinetic.Layer();
this.layer2 = new Kinetic.Layer();
this.layer3 = new Kinetic.Layer();

this.layer1Bg = new Kinetic.Rect({ "width": 100, "height": 100, "fill": "#FF0000" });
this.layer2Bg = new Kinetic.Rect({ "width": 100, "height": 100, "fill": "#FF0000" });
this.layer3Bg = new Kinetic.Rect({ "width": 100, "height": 100, "fill": "#FF0000" });

this.layer1.add( this.layer1Bg );
this.layer2.add( this.layer2Bg );
this.layer3.add( this.layer3Bg );

this.container.add( this.layer1 );
this.container.add( this.layer2 );
this.container.add( this.layer3 );
this.canvas.add( this.container );

this.container.draw(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T08:50:59.283

您可以将图层添加到组 (Kinetic.Group)，然后将该组添加到舞台。

# clojure - ClojureScript 中的 Java 模式/引用等价物

> ID：11976210
> 
> 赞同：3
> 
> 时间：2012-08-15T19:51:11.567
> 
> 标签：clojure, clojurescript

当我在 Clojure 中时，我可以使用`(re-pattern (java.util.regex.Pattern/quote foo))`将模式字符串与另一个字符串完全匹配。如何在 ClojureScript 中做类似的事情？

编辑：我也发现了这个 -[在 JavaScript RegExp 中复制 Java 的“Pattern.quote”的功能](https://stackoverflow.com/questions/3614440/replicate-the-functionality-of-javas-pattern-quote-in-a-javascript-regexp)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:41:13.103

对此没有内置的 Clojure 或 Javascript 函数。

这个 clojure 函数应该转义字符串中的特殊正则表达式字符：

```
(defn re-quote [s]
  (let [special (set ".?*+^$[]\\(){}|")
        escfn #(if (special %) (str \\ %) %)]
    (apply str (map escfn s)))) 
```

[http://ideone.com/QXbbB](http://ideone.com/QXbbB)

*免责声明：我尚未对此进行广泛测试，因此您可能希望在使用此代码清理潜在的恶意字符串之前获得第二意见。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T20:26:20.970

我应该首先说我既不使用 ClojureScript 也不使用 Javascript，但是快速搜索 ClojureScript 正则表达式支持将我带到了这个页面：[https](https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure) ://github.com/clojure/clojurescript/wiki/Differences-from-Clojure ，在“**其他功能**”部分，它说：“ClojureScript 正则表达式支持是 JavaScript 的支持”，提供此链接：[http](http://www.w3schools.com/jsref/jsref_obj_regexp.asp) ://www.w3schools.com/jsref/jsref_obj_regexp.asp 。下一个链接似乎为您提供了您要寻找的东西（作为一个不使用 JavaScript 的人，我很谨慎地肯定地说）。

**编辑**
哦，也许这个老问题的答案在这里：[将用户输入字符串转换为正则表达式](https://stackoverflow.com/questions/874709/converting-user-input-string-to-regular-expression)会给你一个更完整的答案。

# gcc - 使用 GCC 构建最小的独立可执行文件

> ID：11976211
> 
> 赞同：3
> 
> 时间：2012-08-15T19:51:17.023
> 
> 标签：gcc, compilation

我很少有程序（用 C 语言编写）实现一些算法，用于测量计算时间。整个数据直接在代码中实现为静态库，这些程序没有输入和输出。也没有 C 库调用（没有 printfs 等）。

我想构建完全独立且最小的可执行文件。我不想将我的程序与 libgcc（目标 CPU 有协处理器，所以我不需要模拟浮点运算）、C 库或任何其他链接。实际上，我想让我的程序尽可能独立。在 Linux 上，ELF 程序必须仅与 crt0.o 链接才能正常运行，对吗？

我问主要是因为我很好奇；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:22:02.300

链接`gcc -nostdlib`，然后使用`objdump -h`和`strip --remove-section=...`通过摆脱诸如注释部分和异常处理帧信息部分之类的愚蠢内容来真正使它变小。继续删除部分，直到它停止工作。

`-Os`当然编译

# javascript - $.ajax 检查返回字符串是否为 'ERROR'

> ID：11976212
> 
> 赞同：0
> 
> 时间：2012-08-15T19:51:19.510
> 
> 标签：javascript, jquery, ajax, json

我试图检查从 $.ajax 返回的值是一个字符串'ERROR'，我已经从 PHP 回显了它。

```
if (this.data === "ERROR");
{ 
   return { 'bla' : 'bla' };
} 
```

但它会触发`if`每次..也与`==`

我试过了：

```
 if (typeof(this.data) == 'string') 
```

似乎可以工作，但仍然存在在“未定义”时返回对象的问题，尝试过：

```
typeof(this.data) === 'string' || this.data=== 'undefined' 
```

尝试了各种组合，但简单地说，我想要做什么，当没有格式很好的 JSON，而只有“错误”时，我想给出我自己的默认 JSON 对象并继续，但由于某种原因 if声明每次都是真实的。

必须有一个更简单的方法。

而且我不能使用 $.ajax 的`error:`or `succes:`'classes'，因为这是我返回的自定义错误消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T19:54:09.413

你有一个额外的分号：

```
//                        ↓ here
if (this.data === "ERROR");
//                        ↑ here 
```

去掉它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T19:55:24.147

```
if (this.data === "ERROR") { 
   return { 'bla' : 'bla' };
} 
```

# java - 捕获 StreamCorruptedException

> ID：11976214
> 
> 赞同：0
> 
> 时间：2012-08-15T19:51:27.373
> 
> 标签：java, exception, exception-handling, stream

我有一些调用第三方专有库的 java 代码：

```
public String decrypt(String inputString) {
    return ThirdPartyDecrypter.decrypt(inputString);
} 
```

上面的代码编译并为 99% 的用户工作。但是，如果我故意提交错误的不正确输入字符串，则上述方法会抛出 java.io.StreamCorruptedException。

我想捕获该异常并对错误情况执行其他操作：

```
public String decrypt(String inputString) {
    try {
        return ThirdPartyDecrypter.decrypt(inputString);
    } catch (StreamCorruptedExcepton streamException) {
        System.out.println("case streamException");
        streamException.printStackTrace(); // does not execute
            throw MyNewException(streamException);
    } catch (Exception e) {
        System.out.println("case e");
        e.printStackTrace(); 
            throw MyNewException(streamException);
    }
} 
```

当我运行上面的代码时，StreamCorruptedException 没有被捕获，它仍然被抛出而不是 MyNewException。

我需要做什么才能捕获 StreamCorruptedException？我还读过 StreamCorruptedException 应该是一个检查异常。那么第三方库是如何抛出它的（因为他们没有在他们的 API 中声明任何抛出）？

# c++ - 在 UML 中，我可以从 cpp 文件中显示实例化类的连接吗？

> ID：11976217
> 
> 赞同：0
> 
> 时间：2012-08-15T19:51:32.267
> 
> 标签：c++, uml, enterprise-architect

在 EA 中，有没有办法从 cpp 文件中显示实例化类的连接？

否则所有这些关系都不是，我必须通过代码吗？

谢谢

# c - 如何在 gdb 中获取结构的基本数据类型

> ID：11976218
> 
> 赞同：1
> 
> 时间：2012-08-15T19:51:33.030
> 
> 标签：c, gdb

在 gdb 中有没有办法获取结构的基本数据类型？

假设以下结构

```
typedef struct _trial
{
        int i;
        double j;
}trial_t; 
```

在 gdb 中

```
(gdb) whatis trial_t
type = struct _trial
(gdb) whatis _trial
No symbol "_trial" in current context.
(gdb) 
```

任何解决方法？

我知道这适用于简单的 typedef

```
typedef unsigned char BYTE; 
BYTE var;  
(gdb)whatis var 
type = BYTE 
(gdb)whatis BYTE 
BYTE = unsigned char 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:00:32.543

你可能想要`ptype`

> ptype 接受与 whatis 相同的参数，但打印类型的详细描述，而不仅仅是类型的名称。

```
(gdb) ptype struct _trial 
```

甚至：

```
(gdb) ptype trial_t 
```

> 与 whatis 不同，ptype 总是在其参数声明中展开任何类型定义

# cakephp - Cakephp 2.x 找到相关模型的第一个条目

> ID：11976219
> 
> 赞同：0
> 
> 时间：2012-08-15T19:51:42.283
> 
> 标签：cakephp, gallery, model-associations

我知道如果我选择一个条目，我可以通过模型关联轻松找到相关的模型数据。但是，当我对索引页使用 find('all') 时，我想要做的是获取第一张图像作为画廊的拇指。

我的关系（画廊被命名为相册）是：

```
 //Album-Model
public $hasMany = array(
    'Picture' => array(
        'className' => 'Picture',
        'foreignKey' => 'album_id',
        'dependent' => true,
        'conditions' => ''
    )
); 
```

和：

```
 public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Album' => array(
        'className' => 'Album',
        'foreignKey' => 'album_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:13:37.280

编辑：这应该有效，我自己测试过！

在查询之前添加以下通道以指定递归性。

```
$this->Albums->recursive = 1;
$this->set('Albums', $this->Album->find('all')); 
```

这样，它也会发送图片数据。然后在您的模型关联中，您可以指定仅返回带有相册的第一张图片（如果这是您想要的）！

只需在专辑模型中添加`'limit' => '1',`您的数组。`hasMany => Comments`

然后你可以在你的视图中迭代

```
foreach($Albums as $Album){
     $Album['Album']; // ALBUMS info do whatever
     $Album['Picture']; // The thumbnail
} 
```

EDIT2：我刚刚看到你也可以这样做

```
$this->Album->find('all', array('recursive' => 1)); 
```

# php - PHP上的嵌套函数怪异

> ID：11976220
> 
> 赞同：-1
> 
> 时间：2012-08-15T19:51:45.230
> 
> 标签：php, function, nested-function

> **可能重复：**
> [php中的嵌套函数在多次调用外部时抛出异常](https://stackoverflow.com/questions/11968031/nested-functions-in-php-throws-an-exception-when-the-outer-is-called-more-than-o)

为什么

```
function foo(){
    function bar(){
    }    
}
bar(); 
```

在不存在的功能栏上返回致命错误

尽管

```
function foo(){
    function bar(){
    }    
}
foo(); 
foo(); 
```

对 bar() 的重复声明给出致命错误？

php 将函数作为全局函数还是在父函数范围内处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:54:39.337

函数本身是在全局范围内定义的，即使它是在另一个函数内部定义的。`foo()`在第一种情况下，如果您之前不调用`bar()`，`bar()`则将不存在。

您可以[`function_exists()`](http://us3.php.net/manual/en/function.function-exists.php)在创建它之前进行测试：

```
function foo(){
    // Don't redefine bar() if it is already defined
    if (!function_exists("bar")) {
      function bar(){
      }    
    }
} 
```

但是，由于嵌套函数的作用域*不限*于外部函数，因此在另一个函数内部定义函数的用例受到了一些限制。此外，它会在您的代码中引入一些奇怪的副作用，这些副作用可能变得难以理解和维护。考虑您是否真的想这样做，并在必要时重新考虑这样做的原因。如果您正在寻找的是范围限制，那么[命名空间](http://us3.php.net/manual/en/language.namespaces.php)或[类/对象](http://php.net/manual/en/language.oop5.php)可能会更好地为您服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T19:53:35.400

函数*始终*在全局范围内创建，但*仅*在执行其定义时才创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:53:55.763

只有在调用外部函数时才声明“内部”函数。

在您的第一个示例中，您不调用`foo()`，因此`bar()`从未声明过。

在您的第二个示例中，您调用`foo()`了两次，因此`bar()`声明了两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T19:54:26.060

在第一个示例中， `bar`在函数中声明`foo`。所以调用`bar`没有第一次调用是没有意义的，`foo`因为它的定义还没有被执行。在第二个示例中，您调用`foo`了两次，因此`bar`函数被声明了两次。

# java - 如何处理 Android/Maven 项目中缺少 src/test/java 源文件夹？

> ID：11976223
> 
> 赞同：50
> 
> 时间：2012-08-15T19:51:58.510
> 
> 标签：java, android, eclipse, maven, m2eclipse

我对 Maven 与 Android 的结合还不是很有经验，所以我按照[这些](http://rgladwell.github.com/m2e-android/)说明制作了一个新的 Android 项目。创建项目后，我收到以下错误消息：

> 项目“xxx-1.0-SNAPSHOT”缺少所需的源文件夹：“src/test/java”

当我尝试使用 New->Other->Java-Source Folder 和 src/test/java 添加新的源文件夹时，我收到另一条错误消息：

> 该文件夹已经是源文件夹。

但是我的项目中没有任何 src/test/java 文件夹。我应该如何处理？设置项目的干净方法是什么，因为我认为此说明中缺少某些内容。那么Maven让src/test/java出现的方式是什么？

我正在使用 Eclipse Juno、m2e 1.1.0、m2e 0.4.2 的 Android 配置。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-08-15T22:16:29.383

自从最新的 m2e-android 插件升级（版本 0.4.2）以来，我也意识到这个烦人的事情，它发生在新项目创建和现有项目导入中（如果你不使用 src/test/java）。

看起来 m2e-android（或者可能是 m2e）现在总是试图添加`src/test/java`为源文件夹，无论它是否实际存在于您的项目目录中，在 .classpath 文件中：

```
<classpathentry kind="src" output="bin/classes" path="src/test/java">
  <attributes>
    <attribute name="maven.pomderived" value="true"/>
  </attributes>
</classpathentry> 
```

由于它已经添加到项目元数据文件中，所以如果您尝试通过 Eclipse 添加源文件夹，Eclipse 会抱怨 classpathentry 已经存在：

![在此处输入图像描述](../Images/411464ca8b05d143b475eee11cc5f2bd.png)

有几种方法可以修复它，最简单的方法是在文件系统中手动创建 src/test/java 目录，然后按刷新你的项目`F5`并运行 Maven -> 更新项目（右键单击项目，选择 Maven -> 更新项目.. .)，这应该可以修复缺少的所需源文件夹：'src/test/java' 错误。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-03-15T06:16:02.957

我们可以从添加 java 文件夹

1.  **构建路径 -> 源代码**。
2.  点击**添加文件夹**。
3.  选择 main 作为容器。
4.  点击**创建文件夹**。
5.  输入文件夹名称为 java。
6.  点击**完成**

它工作正常。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-21T09:04:29.730

我通过首先创建一个名为“src/test/resources”的文件夹来解决这个问题，然后我将该文件夹重命名为“src/test/java”，最后再次创建一个“src/test/resources”文件夹。它可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-05T11:59:29.563

这可能是由于丢失源目录造成的。

右键单击文件夹 src -> 更改为源文件夹

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-19T15:23:42.903

我遇到了同样的问题，解决了。直接在您的文件系统中创建丢失的文件夹（例如使用 Windows 资源管理器）。然后，在 eclipse 下刷新你的项目。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-03T13:18:25.103

这是最近修复的 Android 连接器 M2E (m2e-android) 中的一个错误：

[https://github.com/rgladwell/m2e-android/commit/2b490f900153cd34fff1cec47fe5aeffabe44d87](https://github.com/rgladwell/m2e-android/commit/2b490f900153cd34fff1cec47fe5aeffabe44d87)

此修复已合并，将在下一个版本中提供。同时，您可以通过从以下更新站点安装来测试新修复：

[http://rgladwell.github.com/m2e-android/updates/master/](http://rgladwell.github.com/m2e-android/updates/master/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-20T09:25:57.920

在**Maven**项目 的情况下

尝试右键单击项目然后选择`Maven -> Update Project...`然后`Ok`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-18T05:16:00.360

从启动插件列表中删除 m2 插件并对所有对我有用的项目执行 Maven->Update Projects。

注意** 在使用基于 SVN/Git 的分支时，不应创建其他文件夹以避免合并它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-22T06:03:00.647

选择项目->新建->文件夹（不是源文件夹）->再次选择项目->输入文件夹名称为（src/test/java）->完成。就是这样。

如果缺少测试源，它会自动链接它。如果没有，则需要手动链接。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-08T00:28:49.617

解决这个问题真的很简单，只需右键单击项目转到属性。之后转到构建路径，您会看到类似“缺少 2 个构建路径条目”的错误。这个错误通常发生在错误指向 JRE 系统库时。现在转到 Libraries 选项卡并通过单击 Edit 将 JRE System Library 更改为正确的版本。

这是完整的教程： [https ://kkjavatutorials.com/how-to-fix-missing-src-main-java-src-test-java-folders-in-the-eclipse-maven-web-project/](https://kkjavatutorials.com/how-to-fix-missing-src-main-java-src-test-java-folders-in-the-eclipse-maven-web-project/)

# java - 从 Java Web 服务客户端获取原始 XML 响应

> ID：11976234
> 
> 赞同：2
> 
> 时间：2012-08-15T19:52:22.940
> 
> 标签：java, web-services, jax-ws, rad

我正在尝试从 Web 服务获取原始 XML 响应，而不是通常的 POJO 集。

我正在使用从 WSDL 和一些模式生成的 Web 服务客户端（因此我可以访问客户端的代码）。客户端是在 RAD 7.5 中生成的，我认为使用 JAX-WS。我一直在查看客户端代码本身，但我什至不确定客户端代码是否曾经处理原始 XML，或者是否将其传递给其他库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:26:55.210

您可以使用

```
javax.xml.ws.handler.soap.SOAPHandler<javax.xml.ws.handler.soap.SOAPMessageContext> 
```

您可以`SOAPMessageContext#getMessage()`使用方法简单地获取消息并将消息转换为字符串

```
 public static String getXmlMessage(SOAPMessage message) throws Exception
   {
         ByteArrayOutputStream os = new ByteArrayOutputStream();
         message.writeTo(os);
         final String encoding = (String) message.getProperty(SOAPMessage.CHARACTER_SET_ENCODING);
         if (encoding == null)
         {
             return new String(os.toByteArray());
         }
         else
         {
            return new String(os.toByteArray(), encoding);    
         }
   } 
```

您也可以在此处阅读有关客户端上的 SOAP 处理程序的
[文章](http://www.mkyong.com/webservices/jax-ws/jax-ws-soap-handler-in-client-side/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:13:50.947

它没有被广泛记录，但是您可以使用[Dispatch](http://docs.oracle.com/javase/6/docs/api/javax/xml/ws/Dispatch.html)接口来实现直接使用 XML 工作的 JAXWS 客户端。 [这里](https://www.ibm.com/docs/en/was-zos/9.0.5?topic=services-developing-jax-ws-clients)和[这里](https://www.ibm.com/docs/en/was-zos/9.0.5?topic=clients-developing-dynamic-client-using-jax-ws-apis)是一些入门文章。

# actionscript-3 - 从闪光灯投影仪打开“mailto”

> ID：11976235
> 
> 赞同：0
> 
> 时间：2012-08-15T19:52:23.467
> 
> 标签：actionscript-3, flash, projector

我正在使用 CS3 创建一个闪光灯投影仪，我想为其添加一个“联系我们”按钮，该按钮应该使用邮件地址打开用户的邮件客户端。应该很简单吧？只需使用 -`navigateToURL(new URLRequest("mailto:support@mysite.com"));` 好吧，猜猜看 - 它根本不起作用。如果我在浏览器中运行它，或者将“mailto”更改为 http 地址 - 完全没有问题。但闪光投影仪和邮件的组合却惨遭失败。不 - 创建 AIR 应用程序不是一种选择，因为我的客户希望它是一个简单的 EXE 文件。

有任何想法吗？干杯，埃雷兹

# jquery - Ajax 包括一个页面

> ID：11976236
> 
> 赞同：1
> 
> 时间：2012-08-15T19:52:29.460
> 
> 标签：jquery, ajax

我可以在从 Ajax 加载的页面上创建一些功能吗？IE

```
$(function() {
    $.ajax({
        url: "loaded.php",
        success: function(data) {
            $("#content").html(data);
        }
    });
    $("a#edit").click(function(e) {
        e.preventDefault();
        var newVal = $(this).closest("tr").find("#collapse").html();
        $(this).html(newVal);
    });
}); 
```

两者`a#edit`和`#collapse`都是loaded.php 的元素，这段代码在index.php 页面中……这段代码可以工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:58:46.763

`#content`在将 html 添加到或使用委托后，您有两个选项在成功函数中附加处理程序。

选项1

```
 success: function(data) {
        $("#content").html(data);
        $("#edit").click(function(e) {
            e.preventDefault();
           var newVal = $(this).closest("tr").find("#collapse").html();
           $(this).html(newVal);
        });
    } 
```

选项 2

```
$(function() {
    $.ajax({
        url: "loaded.php",
        success: function(data) {
            $("#content").html(data);
        }
    });
    $("#content").on('click', '#edit', function(e) {
        e.preventDefault();
        var newVal = $(this).closest("tr").find("#collapse").html();
        $(this).html(newVal);
    });
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:58:34.733

如果您的 $("a#edit") 元素是您的 ajax 返回的内容，那么此代码将不起作用。您需要将该代码块移动到成功回调中。

```
$(function() {
    $.ajax({
        url: "loaded.php",
        success: function(data) {
            $("#content").html(data);
            $("a#edit").click(function(e) {
                e.preventDefault();
                var newVal = $(this).closest("tr").find("#collapse").html();
                $(this).html(newVal);
            });
        }
    });
}); 
```

# c# - 将字符串项添加到 datalist asp.net

> ID：11976245
> 
> 赞同：2
> 
> 时间：2012-08-15T19:52:45.890
> 
> 标签：c#, asp.net, add, datalist

我正在使用 asp.net C# 中的 DataList。我想将字符串作为项目添加到数据列表。我通过以下代码做到这一点：

```
 ArrayList al = new ArrayList();

      for (int i = 0; i < 2; i++) {
          al.Add(i.toString());
      }

      DataList2.DataSource = al;
      DataList2.DataBind(); 
```

但是当我运行程序时，我看不到数字 0 和 1。相反，我看到以下图片作为数据列表：

![在此处输入图像描述](../Images/fdde7470bd94bb2e76ecb27fa4115db1.png)

我的号码在哪里？有人知道任何解决方案吗？请注意，任务是将字符串数组添加到数据列表中。

数据列表代码为：

```
<asp:DataList ID="DataList2" runat="server" BackColor="White" 
                     BorderColor="#CC9966" BorderStyle="None" BorderWidth="1px" CellPadding="4" 
                     GridLines="Both">
                     <FooterStyle BackColor="#FFFFCC" ForeColor="#330099" />
                     <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="#FFFFCC" />
                     <ItemStyle BackColor="White" ForeColor="#330099" />
                     <SelectedItemStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="#663399" />
                 </asp:DataList> 
```

此外，是否可以将滚动添加到数据列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T20:06:50.320

添加到您的 DataList`ItemTemplate`如下：

```
<ItemTemplate>
     <%# Container.DataItem %>
</ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T20:11:19.803

您需要添加一个**ItemTemplate**

```
<asp:DataList ID="DataList2" runat="server" BackColor="White" BorderColor="#CC9966"
    BorderStyle="None" BorderWidth="1px" CellPadding="4" GridLines="Both">
    <FooterStyle BackColor="#FFFFCC" ForeColor="#330099" />
    <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="#FFFFCC" />
    <ItemStyle BackColor="White" ForeColor="#330099" />
    <SelectedItemStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="#663399" />
    <itemtemplate><%# Container.DataItem %></itemtemplate>
</asp:DataList> 
```

# c# - 在 C# 中使用变量来引用数组索引

> ID：11976248
> 
> 赞同：0
> 
> 时间：2012-08-15T19:52:52.890
> 
> 标签：c#, arrays, variables, public

我正在编写一些 C# 代码，其中有几个文件使用相同的公共变量（我们现在将这些变量称为 a、b 和 c）。免责声明：请不要责备我的代码质量，不是我写的，修复它只是我的工作。这些变量是公共的，并且在所有文件中共享，并且实际上应该是一个数组（a、b 和 c 都做同样的事情，只是属性略有不同）。我正在修改最大的文件以取出对变量的所有引用并将它们替换为数组 letters[]，但其他文件包含对这些变量的不同引用。有没有办法在其他文件中定义某种变量或宏，这样我就不必更改每个文件中的每个引用？

例如：在最大的文件“main.cs”中，我曾经有：

```
 public string a;  
    public string b;  
    public string c;  
    a = "a";  
    b = "b";  
    c = "c"; 
```

但我将其修复为：

```
 string[] letters;  
    letters[0] = "a";  
    //etc 
```

现在，在文件“small.cs”中，我有

```
 a = "hello world";  
    b = "goodbye world"; 
```

不必遍历每个文件，有什么方法可以将“a”定义为字母 ( `letters[0]`)、b 引用`letters[1]`等的第一个元素？这样，程序仍然可以运行，并且在小文件中，C# 会知道对 'a' 的任何引用实际上意味着对`letters[0]`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T19:55:16.810

使用属性：

```
public string A { get { return letters[0]; } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T19:57:29.870

从属性中引用它们：

```
public string a
{
     get
     {
           return letters[0];
     }
     set
     {
           letters[0] = value;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T19:58:32.200

而不是写

```
 public string a;
     public string b; 
     public string c;
     a = "a";
     b = "b";
     c = "c"; 
```

写

```
 private List<string> vals = new List<string>{ "a", "b", "c" };
     public string a { get { return vals[0]; } set { vals[0] = value; } }
     public string b { get { return vals[1]; } set { vals[1 = value; } }
     public string c { get { return vals[2]; } set { vals[2] = value; } } 
```

# javascript - 我的 javascript 在没有警报的情况下无法运行

> ID：11976253
> 
> 赞同：0
> 
> 时间：2012-08-15T19:53:22.690
> 
> 标签：javascript, jquery

我的代码块有问题，本节根据用户在上一步中选择的内容以及从 api 脚本中的数据库中提取的数据来创建巧克力盒。问题是如果没有警报（'hi'），它就无法工作。如果我把它拿出来，它只会创建一个空盒子，而不会把味道丢进去，味道的味道是用 createFlavorArray 函数插入的。

```
var product = new Array();
var price = new Array();
var size = new Array();

$(function () {
      $.ajax({
        type: 'POST',
        url: 'phpscripts/api.php',      
        data: "",
        dataType: 'json',    
          success: function(rows)        
        {
        count = 0;
          for (var i in rows)
          {
            var row = rows[i];          
              product[count] = row[0];
              price[count] = row[1];
              size[count] = row[2];
              count++;
          }
        } 
      });
    });

//b = box
//o = option that is inside the box
//nextBoxId is the box id
//nextFlavorId is the option or flavor id

var nextBoxId = 1;
var nextFlavorId = 1;
var orderCap = 0;
var subTotal = 0;
var numOfChocolates = 0;
var numOfBoxes = 0;

$(document).ready(function(){

    while (halfPoundBoxes > 0) {
            $("#boxes").append('<div id="b'+nextBoxId+'"></div>');
            $('#b'+nextBoxId).addClass('div-table-selection');
            $('#b'+nextBoxId).append($('#minusBox').clone().attr('id', "m"+nextBoxId));
            $('#b'+nextBoxId).append('<div style="display:table-row"></div>');

            //call the function to loop through and create the number of flavor options needed
            var x = 0;
            alert('hi');
            while(x < product.length){
                if ('1/2lb Box' == product[x]) {
                    createFlavorArray(size[x], nextBoxId);
                    subTotal += price[x] * 1;
                    $('#b'+nextBoxId).attr('title', product[x]);
                }
                x++;

            }
            //clone the delete box button and make it visible

            $('#m'+nextBoxId).show(500);
            $('#b'+nextBoxId).append("<br />");

            if (orderCap == 0) {
            $('#boxes').append('<div id="msg"><p>If you wish to add another box to your order select the size and click +1 Box.</p></div>');
            }

            $("#m"+nextBoxId).click(function() {
                    $(this).parent().remove();
                orderCap--;
                //if they're ordering zero boxes hide the order button
                //remove total price
                //remove the message
                if (orderCap == 0)
                {
                    document.getElementById('orderBtn').style.display = "none";
                    $("#msg").remove();
                    $("#totalPrice").empty();
                }
                if (orderCap < 10)
                {
                    $("#cap").remove();
                    $("#addBox").show(500);
                }
                var y = 0;
                while (y < product.length) {
                    if ('1/2lb Box' == product[y]) {
                    subTotal -= price[y] * 1;
                    numOfChocolates -= size[y] * 1;
                    }
                    y++;
                }
                $('#totalPrice').html("<p>Sub Total: " + subTotal + "</p>")
                //subtract the new
                $('#finalpaypal').val(subTotal);

            });
            nextBoxId++;
            orderCap++;
            numOfBoxes++;
            $('#totalPrice').html("<p>Sub Total: " + subTotal + "</p>")
            halfPoundBoxes--;   
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:56:09.977

您的代码仅在使用`alert()`, 时才起作用的原因是该`alert()`操作为您的 jQuery AJAX 请求提供了几秒钟的时间以将值返回给您的`success()`回调函数。

您应该将受标注函数影响的任何代码也移动到标注函数中，以便此代码以正确的顺序运行。

* * *

或者，您不能通过添加异步运行 AJAX 请求`async:false`，但正如[@Rocket](https://stackoverflow.com/questions/11976253/my-javascript-doesnt-run-without-alert#comment15965381_11976295)所评论的那样，不建议这样做。

```
$.ajax({
  async: false, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:56:25.827

看起来您正在尝试对 ajax 返回的标记进行操作。该代码需要移动到 ajax 请求的成功回调中。警报调用使其工作的原因很简单，它会将其他所有内容延迟足够长的时间以使页面完成加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:06:56.733

需要把代码放到一个函数中，ajax成功完成后运行

```
...
$(function () {
  $.ajax({
    type: 'POST',
    url: 'phpscripts/api.php',      
    data: "",
    dataType: 'json',    
      success: function(rows)        
    {
    count = 0;
      for (var i in rows)
      {
        var row = rows[i];          
          product[count] = row[0];
          price[count] = row[1];
          size[count] = row[2];
          count++;
      }
      do_after_ajax();
    } 
  });
});

function do_after_ajax(){
        while (halfPoundBoxes > 0) {
        $("#boxes").append('<div id="b'+nextBoxId+'"></div>');
        $('#b'+nextBoxId).addClass('div-table-selection');
        ....
} 
```

# jquery - jQuery | 单击新页面时需要帮助列表视图和传递数据

> ID：11976260
> 
> 赞同：1
> 
> 时间：2012-08-15T19:53:59.803
> 
> 标签：jquery, ajax, listview, mobile

我有一个从 Web 服务中动态提取的项目列表。它看起来像这样：

[http://i.imgur.com/cXHBk.png](http://i.imgur.com/cXHBk.png)

我想要发生的事情是，我希望被单击的列表项以某种方式被声明为变量......以及被单击项的信息被传递到另一个页面。我不知道该怎么做，希望这里有人能指出我正确的方向。

到目前为止，我已经能够想出这个，但是变量 'someData' 不断返回未定义。

```
$('#dogs ul').click(function(e) {
var someData = jQuery(this).data('<li>');
alert(someData);
});

} 
```

以下是将所有信息汇集到列表视图中的代码：

```
$(data).find('NewDataSet').each(function(i) {
    var listView = $('<ul data-role="listview" data-inset="true" data-split-theme="b">').data('role', 'listview');

    $(data).find('Table').each(function() {
        var title = $(this).find('ShortDesc').text();
        var description = $(this).find('LongDesc').text();
        var thumbnail = $(this).find('ThumbURL').text();
        var listItem = $('<li/>');
        $('<a href="#"><img id="bla" src="' + thumbnail + '"><div id="desc"><h4>' + title + '</h4> <p> <br/>' + description + '</p></div>').appendTo(listItem);
        $(listItem).appendTo(listView);
    });

    $(listView).appendTo('#dogs');
});

$('#dogs ul').listview(); 
```

如果有人能指出我正确的方向，或者告诉我我做错了什么，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:32:05.163

我觉得你很接近。您可以将数据存储在每个`li`元素上，因为它们是使用 jQuery.data() 创建的。

```
$(data).find('Table').each(function() {

    //...

    var tableData = $(this); // 'this', in your example, refers to the Table data
    var listItem = $('<li/>').data('TableData', tableData);
}); 
```

要将其取回并将其传递到另一个页面，您可以处理单击并将数据发布到另一个页面。如果这更容易，您还可以在查询字符串中附加数据。

```
$('#dogs ul li').click(function(e) {
    e.stopPropagation();
    var tableData = $(this).data('TableData');
    $.mobile.changePage("anotherpage.php", {
        type: "post",
        data: $(tableData).serialize() // I'm not sure of your data format, so serialize() this may not work
    });
}); 
```

# email - 从 magento 发送电子邮件

> ID：11976263
> 
> 赞同：0
> 
> 时间：2012-08-15T19:54:09.850
> 
> 标签：email, magento, sms, transactional

从我们的 Magento 1.7.0 商店，我们想在发送运输交易电子邮件时向 SMS 网关发送电子邮件。我真的不知道该怎么做 - 有什么想法吗？

发送至 SMS 网关的电子邮件应包含以下内容：

短信网关邮箱：432342343@smsgateway.com 标题：客户电话号码 内容：今天我们已发送您的订单

最好的问候，杰斯珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:31:30.670

您应该能够观察到该`sales_order_status_history_model_save_before`事件。从你的观察者内部：

```
public function observeStatusHistorySave($observer)
{
     $status = $observer->getObject();
     if (!$status->getIsCustomerNotified()) {
         return false;
     }

     $customer = $status->getOrder()->getCustomer();
     sendSms($customer->getTelephone(), "etc...");         
} 
```

# spring - JUnit Liferay 服务

> ID：11976266
> 
> 赞同：1
> 
> 时间：2012-08-15T19:54:23.453
> 
> 标签：spring, junit, liferay

我在我的项目中使用 liferay 服务构建器，现在我想测试 *Util 类。这很容易，但我不知道初始化环境的简单方法。例如，在使用 service.xml（自动生成）的 spring 配置进行 ant 测试时，我将 InitUtil.initWithSpring() 用于 init beans，但会出现以下错误：

```
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 2,413 sec
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 2,413 sec
[junit] 
[junit] Testcase: testJournalArticleSearch(MTest):  Caused an ERROR
[junit] BeanLocator has not been set for servlet context My-portlet
[junit] com.liferay.portal.kernel.bean.BeanLocatorException: BeanLocator has not been set for servlet context My-portlet
[junit]     at com.liferay.portal.kernel.bean.PortletBeanLocatorUtil.locate(PortletBeanLocatorUtil.java:42)
[junit]     at com.my.service.EntityLocalServiceUtil.getService(EntityLocalServiceUtil.java:70)
[junit]     at MTest.setUp(MTest.java:21) 
```

我看过一些关于这个问题的文章，但它不起作用或者我不明白这些文章......有人知道这个问题的简单解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:50:54.253

我正在写这个作为答案 - 它更像是一个评论，但答案的格式选项和长度是我所追求的。

我经常看到人们在为生成的代码编写单元测试时遇到问题——而 *Util 和 servicebuilder 对我来说听起来像是生成的代码 (*LocalServiceUtil)。

我的建议是测试您的 *LocalServiceImpl 代码并相信代码生成器是正确的（或者相信代码生成器测试会在其中发现错误，但这超出了您的范围）。毕竟，servicebuilder 的 *LocalServiceUtil 类提供的功能是查找正确实现（基于 spring 配置）并委托给它的间接方法。*LocalServiceUtil 类中没有业务逻辑 - 这是在 *LocalServiceImpl 类中。

下一点是：有时即使是 *Impl 类也很难测试，因为它们会接触到需要模拟的其他服务。在这种情况下——为了保持单元测试的可读性和独立于数据库——我建议测试一层不涉及其他服务的代码。为了挑选我从[这个答案](https://stackoverflow.com/a/11856097/468763)中偷来的代码，我宁愿测试它，从等式中排除 UserLocalService （注意：伪代码，从未见过编译器，我正在这个输入字段中编辑）

我们要测试的代码是：

```
class MyUserUtil {
  public static boolean isUserFullAge(User user)  {
    Date birthday = user.getBirthday();
    long years = (System.currentTimeMillis() - birthday.getTime()) / ((long)365*24*60*60*1000);
    return years >= 18;
  }
} 
```

我对此的测试将排除 UserLocalService：

```
@Test
public void testIsUserFullAge() throws Exception {
    //setup (having it here for brevity of the code sample)
    SimpleDateFormat format = new SimpleDateFormat("yyyy_MM_dd");
    Date D2000_01_01 = format.parse("2000_01_01");
    Date D1990_06_30 = format.parse("1990_06_30");
    User mockUserThatIsFullAge = mock(User.class);
    when(mockUserThatIsFullAge.getBirthday()).thenReturn(D1990_06_30);
    User mockUserThatIsNotFullAge = mock(User.class);
    when(mockUserThatIsNotFullAge.getBirthday()).thenReturn(D2000_01_01);

    //run
    asertTrue(MyUserUtil.isUserFullAge(mockUserThatIsFullAge));
    asertFalse(MyUserUtil.isUserFullAge(mockUserThatIsNotFullAge));
} 
```

这里的重要部分是：您的代码适用于用户对象，而不是用户 ID。因此，您不需要测试查找。如果您也非常想测试查找（例如更广泛的测试），请将其称为集成测试。但是，如果由于一些不相关的更改而经常中断，请不要抱怨。因为现在您的测试失败的原因有两个不同的来源：查找失败或您的实现不正确。您希望您的 UNIT 测试由于其中一种原因而失败，例如，当测试失败时立即知道出了什么问题，而不是开始调试。

哦，是的，该测试将在 2018 年开始失败，在现实生活中，我会测试更多的极端案例，例如明天满 18 岁或昨天这样做的人），但这是一个不同的话题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:51:22.730

我使用 Mockito 和 PowerMock 来模拟 Liferay 服务。PowerMock 允许模拟静态方法，例如`XXXLocalServiceUtil`. 在 Prakash K 的链接答案中，您可以找到详细描述：[Testing for custom plugin portlet: BeanLocatorException and Transaction rollback for services testing](https://stackoverflow.com/questions/9701539/testing-for-custom-plugin-portlet-beanlocatorexception-and-transaction-roll-bac/11856097#11856097)

# objective-c - iOS 使用 CFWriteStrem 写入服务器不写入？

> ID：11976269
> 
> 赞同：0
> 
> 时间：2012-08-15T19:54:26.730
> 
> 标签：objective-c, ios, network-programming

我基本上是在向我的服务器发送一个帖子。我正在写的字符串是@"POST /api?f=### HTTP/1.1\r\nHost: [http://server.loc.a.tion](http://server.loc.a.tion) \r\nContent-Type: application/x-www- form-urlencoded\r\nContent-Length: ##\r\n\r\ndata=somedataandstuff"。在此之后，服务器应该给我发回一条消息。（并不是说我已经走到了那一步。）

我正在遵循[apple](http://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFStreamTasks/CFStreamTasks.html#//apple_ref/doc/uid/TP30001132-CH6-SW1)列出的基本轮询代码，但我做了一些更改。

请注意以下是我打开流之后的情况），data_to_send.buffer 是 (char *)，data_to_send.buffer_size 是 1500。

```
//Preform Write operations
bool done = false;
int bufLen = data_to_send.buffer_size;
const uint8_t * rawstring =(const uint8_t *)data_to_send.buffer;
CFIndex bytesWritten;
while (!done) {
    CFStreamStatus stat = CFWriteStreamGetStatus(writeStream); //for me while debugging
    if (CFWriteStreamCanAcceptBytes(writeStream)) {

        //ADDED:
        if(bufLen > 0)  bytesWritten = CFWriteStreamWrite(writeStream, rawstring, (CFIndex)bufLen);

        //ADDED: to check if it ever writes
        if( CFWriteStreamGetStatus(writeStream) == kCFStreamStatusWriting){
            NSLog(@"lalallaa");
        }

        if (bytesWritten < 0) {
            //error stuff
        } else if (bytesWritten == 0) {
            if (CFWriteStreamGetStatus(writeStream) == kCFStreamStatusAtEnd) {
                done = TRUE;
                rawstring = nil;
            }
        } else if (bytesWritten != bufLen) {
            // Determine how much has been written and adjust the buffer
            bufLen = bufLen - bytesWritten;
            memmove(rawstring, rawstring + bytesWritten, bufLen);

            //error stuff
        } else {  //ADDED
            bufLen = 0;
            bytesWritten = 0;
            //loop and wait until finished
        }

    }
}
CFWriteStreamClose(writeStream);
CFRelease(writeStream);
writeStream = NULL; 
```

我修改了代码，因为 CFWriteStreamWrite 返回完整的 1500（这是我心中的一个标志：如果 bufLen 是 1500 并且它全部写入它不应该返回 0 吗？），这在苹果代码中没有考虑（即：bytesWritten == bufLen)（另一个标志，因为我认为苹果不会错过任何东西，除非这是预期的功能）。反过来，bufLen 或缓冲区（原始字符串）不会被修改，我们只是重复返回 1500，并开始一个永无止境的循环。因此，为了解决这个问题，我添加了将 bufLen 设置为 0 并将字节写入 0 的 else，以便代码将循环检查何时到达 KCFStreamStatusAtEnd。现在，当我逐步执行此操作时，我注意到一旦执行 CFWriteStreamWrite，状态将持续到 2 (CFStreamStatusOpen)，因此又是一个永无止境的循环。

但是，现在如果我们检查我们拥有的服务器上的 apache 访问日志：
...“-” 408 -
工作调用（由工作 Java 代码制成）看起来像
...“POST /api?f=blahblah” 200 ##

所以我觉得至少在尝试写一些东西。虽然 408 状态是请求超时。这可能是因为当我在打开流的情况下进行调试时，流就在那里？还是因为当我调试和停止时我从不关闭流？

任何想法或建议将不胜感激。（我是 iOS/objective-c 的新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:54:02.980

如果有人对此感兴趣，我基本上放弃并使用 NSMutableURLrequest。

```
NSString *urlString = @"http://url.ca/api?f=##";
NSMutableURLrequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:url]];
[request setHTTPMethod:@"POST"];
[request setValue:@"##" for HTTPHeaderField@"Contect-Length"];
[request setValue:@"application/x-www-form-urlencoded" for HTTPHeaderField@"Content-Type"];
[request setHTTPBody:@"data=lalalalala" dataUsingEncoding:NSASCIIStringEncoding]];

NSURLResponse *response;
NSError *err;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];

//error check & handle data 
```

请记住，如果您想做类似的事情，这是同步的，所以它会延迟您的 UI（所以在它自己的线程中运行或异步执行）。这基本上与我尝试编写的代码相同。

# django - django-auth-ldap“需要一个整数”错误

> ID：11976276
> 
> 赞同：0
> 
> 时间：2012-08-15T19:54:40.830
> 
> 标签：django, django-authentication

使用 Django 1.4 和 django-auth-ldap 1.1，我正在尝试配置我的 Web 应用程序以根据 LDAP 服务对用户进行身份验证。在登录表单中提供正确的登录凭据时，我收到此错误：-

> /login/ 处的类型错误
> 
> 需要一个整数
> 
> 请求方法：POST
> 
> 请求网址： [http ://mydomain.com:8000/login/](http://mydomain.com:8000/login/)
> 
> Django 版本：1.4
> 
> 异常类型：TypeError
> 
> 异常值：
> 
> 需要一个整数
> 
> 异常位置：_ldap_function_call 中的 /usr/lib/python2.6/dist-packages/ldap/functions.py 第 57 行 Python 可执行文件：/usr/bin/python
> 
> Python版本：2.6.5
> 
> ....Python路径信息

为什么会发生此错误？

这是粘贴的跟踪信息：-

```
Environment:

Request Method: POST
Request URL: http://localhost:8000/login/

Django Version: 1.4
Python Version: 2.6.5
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'myapp')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.6/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args,  **callback_kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/views/decorators/debug.py" in wrapper
  69\.             return view(request, *args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/views.py" in login
  36\.         if form.is_valid():
File "/usr/local/lib/python2.6/dist-packages/django/forms/forms.py" in is_valid
  124\.         return self.is_bound and not bool(self.errors)
File "/usr/local/lib/python2.6/dist-packages/django/forms/forms.py" in _get_errors
  115\.             self.full_clean()
File "/usr/local/lib/python2.6/dist-packages/django/forms/forms.py" in full_clean
  271\.         self._clean_form()
File "/usr/local/lib/python2.6/dist-packages/django/forms/forms.py" in _clean_form
  299\.             self.cleaned_data = self.clean()
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/forms.py" in clean
  167\.                                            password=password)
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/__init__.py" in authenticate
  43\.     for backend in get_backends():
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/__init__.py" in get_backends
   34\.         backends.append(load_backend(backend_path))
File "/usr/local/lib/python2.6/dist-packages/django/contrib/auth/__init__.py" in load_backend
  28\.     return cls()
File "/usr/local/lib/python2.6/dist-packages/django_auth_ldap-1.1.1-py2.6.egg/django_auth_ldap/backend.py" in __init__
   93\.         self.ldap = self.ldap_module()
File "/usr/local/lib/python2.6/dist-packages/django_auth_ldap-1.1.1-py2.6.egg/django_auth_ldap/backend.py" in ldap_module
   104\.         return _LDAPConfig.get_ldap(options)
File "/usr/local/lib/python2.6/dist-packages/django_auth_ldap-1.1.1-py2.6.egg/django_auth_ldap/config.py" in get_ldap
    74\.                 cls.ldap.set_option(opt, value)
    File "/usr/lib/python2.6/dist-packages/ldap/functions.py" in set_option
     124\.   _ldap_function_call(_ldap.set_option,option,invalue)
    File "/usr/lib/python2.6/dist-packages/ldap/functions.py" in _ldap_function_call
    57\.       result = func(*args,**kwargs)

Exception Type: TypeError at /login/
Exception Value: an integer is required 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:23:48.527

您的 LDAP 服务器抱怨您的 AUTH_LDAP_GLOBAL_OPTIONS 中的键/值对之一。确保您使用`ldap.OPT_*`常量作为字典键。

# java - 迭代数组的排列

> ID：11976280
> 
> 赞同：1
> 
> 时间：2012-08-15T19:55:01.537
> 
> 标签：java, algorithm, permutation

我正在为我正在研究的一些研究编写一些 java 代码，并且需要有一种方法来迭代 ArrayList 的所有排列。我已经查看了这里提出的一些以前的问题，但大多数都不是我想要做的，并且接近的问题有处理字符串和用 Perl 编写的示例代码的答案，或者在一个似乎实现的情况下就像它会工作......实际上并不工作。

理想情况下，我正在寻找提示/代码片段来帮助我编写一个函数 permute(list, i)，当 i 从 0 变为 list.size() 时！给了我 ArrayList 的每一个排列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T20:00:42.940

有一种从 0 计数到 (n! - 1) 的方法，它将列出 n 个元素列表的所有排列。这个想法是使用[阶乘数字系统](http://en.wikipedia.org/wiki/Factorial_number_system)重写数字，并将数字解释为确定使用哪种排列的编码方式。如果你对此感到好奇，我有**[这个算法的 C++ 实现](http://keithschwarz.com/interesting/code/?dir=factoradic-permutation)**。我也曾经**[讨论](http://keithschwarz.com/talks/slides/fun-with-number-systems.pdf)**过这个，以防你想要一些关于这个话题的视觉效果。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T20:10:49.730

如果迭代所有排列对您来说就足够了，请参阅以下答案：[Stepping through all permutations one swap at time](https://stackoverflow.com/questions/2000048/stepping-through-all-permutations-one-swap-at-a-time/11916946#11916946)。对于一个给定的迭代器产生所有的`n`数字排列。您可以简单地将其包装到另一个迭代器中，该迭代器将数字的排列转换为数组元素的排列。（请注意，您不能只在迭代器中用任意数组/列表替换。该算法需要使用数字。）`0``(n-1)``int[]`

# solr - Solr：字段元素的数量对索引/搜索性能有什么影响？

> ID：11976282
> 
> 赞同：1
> 
> 时间：2012-08-15T19:55:03.567
> 
> 标签：solr, sunspot, sunspot-rails

字段元素的数量对索引/搜索性能有什么影响？

我们有以下文档结构，其中一些文档具有多达 400 个字段元素。我们已经看到 solr 服务器 CPU 使用率上升，并没有将问题与元素数量的增加隔离开来，但想知道是否有人这样做`any analysis on the Solr performance vs # of field elements.`

我们使用单个 Solr 服务器进行索引和读取，并启用了自动提交。

```
<add>
    <doc>
        <field name="id">User 4990</field>
        <field name="type">User</field>
        <field name="type">ActiveRecord::Base</field>
        <field name="class_name">User</field>
        <field name="id_i">4990</field>
        <field name="login_s">someuser</field>
        <field name="first_name_s">some</field>
        <field name="last_name_s">user</field>
        <field name="email_s">someuser@somecompany.com</field>
        <field name="department_s">department-psg</field>
        <field name="activated_b">true</field>
        <field name="private_profile_b">false</field>
        <field name="deleted_b">false</field>
        <field name="followers_im">4834</field>
        <field name="followers_im">4965</field>
        <field name="followers_im">3</field>
        <field name="followers_im">4291</field>

        ...
        ...
        ..
        <field
            ..
        <**400** such fields

    ..
    </doc>
</add> 
```

Solr 版本：3.6.1，Cent OS 5.6 上的 Java 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:43:22.177

这取决于您是否搜索所有字段以及您使用的运算符、存储在字段中的数据大小、字段在架构中的定义方式以及您是仅搜索字段还是从中检索数据以显示.

一般来说，搜索速度非常快，在我的模式中，我有大约 100 个字段。但是，存在效率低下的查询会减慢速度。有关更多详细信息，请参阅[solr 性能 wiki](http://wiki.apache.org/solr/SolrPerformanceFactors)。

根据我自己的经验，我可以告诉您，突出显示受您突出显示的字段数量的强烈影响，因为它会在每个结果文档的每个字段上运行，即大量字段在实践中会给您带来二次复杂性。

# c# - 从辅助磁贴导航到页面时如何管理回栈

> ID：11976284
> 
> 赞同：0
> 
> 时间：2012-08-15T19:55:11.960
> 
> 标签：c#, windows-phone-7

我已经在我的应用程序中实现了辅助磁贴，因此用户可以将辅助磁贴固定到开始屏幕，然后相应地导航到我的应用程序中的相应页面。这个实现工作正常，除了当用户从固定的辅助磁贴导航到特定页面后点击返回硬件按钮时，什么都没有发生？事实上，虽然用户是从开始屏幕来的，但应用程序中的前一页实际上会显示一秒钟。如用户期望的那样实际返回到开始屏幕的正确方法是什么（我假设这将是正确的返回堆栈导航）？

我所拥有的内容如下，但仅适用于正常页面导航场景，而不是当用户从开始屏幕固定磁贴导航到 SharePage 时。

MainPage.xaml.cs

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        string _title = null;
        NavigationContext.QueryString.TryGetValue("Param", out _title);

        if (_title != null)
        {
            switch (_title)
            {
                case "status":
                    this.NavigationService.Navigate(new Uri("/Views/ShareStatusPage.xaml", UriKind.Relative));
                    break;
                case "link":
                    this.NavigationService.Navigate(new Uri("/Views/ShareLinkPage.xaml", UriKind.Relative));
                    break;
            }
        }            
    }

private void CreateLiveTile(TileItem item)
    {
        string tileParameter = "Param=" + item.Title.ToString();

        ShellTile Tile = CheckIfTileExist(tileParameter);  // Check if Tile's title has been used 

        if (Tile == null)
        {
            try
            {
                var LiveTile = new StandardTileData
                {
                    Title = item.TileName,
                    //BackgroundImage = ((System.Windows.Media.Imaging.BitmapImage)hubtile.Source).UriSource,
                    BackgroundImage = new Uri(item.ImageUri.ToString(), UriKind.Relative),
                    //Count = 1,
                    BackTitle = item.TileName,
                    //BackBackgroundImage = new Uri("", UriKind.Relative),
                    BackContent = item.Message,
                };

                ShellTile.Create(new Uri("/MainPage.xaml?" + tileParameter, UriKind.Relative), LiveTile);  //pass the tile parameter as the QueryString

            }
            catch (Exception)
            {
                MessageBox.Show("This tile could not be pinned", "Warning", MessageBoxButton.OK);
            }
        }
        else
        {
            MessageBox.Show("This tile has already been pinned", "Notice", MessageBoxButton.OK);
        }
    }

private ShellTile CheckIfTileExist(string tileUri)
    {
        ShellTile shellTile = ShellTile.ActiveTiles.FirstOrDefault(tile => tile.NavigationUri.ToString().Contains(tileUri));
        return shellTile;
    } 
```

SharePage.xaml.cs

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        base.OnBackKeyPress(e);

        //return to the previous page in the phones back stack?
        if (NavigationService.CanGoBack)
        {
            e.Cancel = true;
            NavigationService.GoBack();
        }
        //else
        //{
        //    ??
        //}
    } 
```

到目前为止，`CreateLiveTile()`方法创建了辅助磁贴，然后当按下该磁贴时，将导航到 MainPage，然后在 MainPage OnNavigatedTo 事件中检查查询字符串，然后根据单击的辅助磁贴加载相应的页面。执行此操作并加载相应页面后，我无法再按后退按钮返回开始屏幕以遵循标准的 backstack 行为。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:02:57.683

否则你可以使用`NavigationService.Navigate(homepageUri)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:21:14.250

为什么要取消导航？只需删除`OnBackKeyPress`. 在这种情况下，您不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:32:44.463

创建一个变量来跟踪到主页的导航是否来自通过辅助磁贴的导航。在 MainPage.Load 检查该变量，如果变量来自辅助磁贴，则从后堆栈中删除前一页。从主页返回开始菜单而不是通过辅助磁贴页面返回是有意义的。这就是 MyStocks Portfolio（不，不是我的应用程序之一，而是我

这是一个关于后退按钮使用的好博客：http: [//blogs.msdn.com/b/ptorr/archive/2011/10/06/back-means-back-not-forwards-not-sideways-but-back.aspx](http://blogs.msdn.com/b/ptorr/archive/2011/10/06/back-means-back-not-forwards-not-sideways-but-back.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T07:49:48.193

根据您的新更新，让我们看看这个方法：

```
private void CreateLiveTile(TileItem item)
{
    string tileParameter = "Param=" + item.Title.ToString();
     //...

    if (Tile == null)
    {
        try
        {
            var LiveTile = new StandardTileData
            {
              //...
            };

            ShellTile.Create(new Uri("/MainPage.xaml?" + tileParameter, UriKind.Relative), LiveTile);  //pass the tile parameter as the QueryString

          //blah-blah-blah
} 
```

在这里，您创建一个新图块并传递`tileParameter`给`MainPage`. 因此，您导航到主页，然后检测 tile 参数中的文本，然后导航到`ShareLink`或`ShareStatus`页面。这就是为什么你有一个肮脏的导航堆栈。

让我建议您避免这种情况的方法：

```
private void CreateLiveTile(TileItem item)
    {

    var title =  item.Title.ToString();
     //...

    if (Tile == null)
    {
        try
        {
            var LiveTile = new StandardTileData
            {
              //...
            };
             string page;
        switch (title)
        {
            case "status":
                page = "/Views/ShareStatusPage.xaml";
                break;
            case "link":
                page = "/Views/ShareLinkPage.xaml");
                break;
        }                
        if(string.IsNullOrEmpty(page))
         { 
             //handle this situation. for example: page = "/MainPage.xaml";
         }
            ShellTile.Create(new Uri(page, UriKind.Relative), LiveTile); 

          //blah-blah-blah
} 
```

当用户点击您的辅助磁贴时，他将直接导航到`ShareLink`页面`ShareStatus`。并且 a`NavigationStack`将是干净的。当用户按下`Back`按钮时，应用程序将关闭，用户将看到一个开始屏幕（这是辅助磁贴的右后退按钮行为）。

ps 不要忘记启动所有服务或加载所有资源（如果有的话）。因为不会创建 MainPage！无论如何，您的应用程序的每个页面都必须能够初始化整个应用程序，因为您必须支持从[墓碑状态](http://blogs.microsoft.co.il/blogs/arik/archive/2011/05/01/managing-tombstone-state-in-a-windows-phone-7-application.aspx)恢复。

如果您需要，请随时询问详细信息。

# php - PHP / MYSQL / RSS Feed 将所有帖子加载到一个帖子中

> ID：11976294
> 
> 赞同：1
> 
> 时间：2012-08-15T19:55:56.933
> 
> 标签：php, mysql, rss

当您拉取 RSS 提要时，它会显示 1 个帖子，但在该帖子中，所有其他帖子都会显示。我检查了我所有的关闭，并一遍又一遍地修改了代码，但看不出问题出在哪里。在某些 RSS 阅读器上，它只是说错误无法读取提要。但在其他人我有这个问题。

任何方向都会有所帮助。下面的代码：

* * *

```
<?PHP

$host = "****";
$un = "****";
$pw = "****";
$db = "****";

$link = mysql_connect($host, $un, $pw) or die(mysql_error());
if(!$link){ die("Could not connect to MARTHA GRAEFF - AROUND IN STYLE database: " . mysql_error()); }
$selectDB = mysql_select_db($db, $link) or die(mysql_error());
if (!$selectDB){ die ("Can't use MARTHA GRAEFF - AROUND IN STYLE database: " . mysql_error()); }

header('Content-Type: text/xml');

echo '<?xml version="1.0" encoding="ISO-8859-1"?>';
echo '<rss version="2.0">';
echo '<channel>';
echo '<title>TITLE OF THE FEED</title>';
echo '<description>BLOG DESCRIPTION</description>';
echo '<link>http://www.example.com</link>';

$get_articles = "SELECT `id`, `title`, `image`, `text`, DATE_FORMAT(`date`,'%a, %e %b %Y') as `date` FROM `posts` WHERE `date` <= CURDATE() ORDER BY `added` DESC LIMIT 20";
$articles = mysql_query($get_articles);

while($a = mysql_fetch_array($articles)){
echo "<item>";
    echo "<title>" . $a['title'] . "</title>";
    echo "<description><![CDATA[";
        echo "<img src='http://www.example.com/images/db/thumb.php?src=" .     $a['image'] . "&w=650' width='650' alt='" . $a['title'] . "' /><br />";

        $pid = $a['id'];
        $q = "SELECT * FROM `photos` WHERE `post_id`='" . $pid . "' ORDER BY `added` ASC";
        $r = mysql_query($q);     
        while($i = mysql_fetch_array($r)){
            echo "<img src='http://www.example.com/images/db/thumb.php?src=" . $i['image'] . "&w=650' width='650' alt='" . $a['title'] . "' /><br />";
        }

        echo $a['text'];
    echo "]]></description>";
    echo "<link>http://www.example.com/post.php?id=" . $a['id'] . "</link>";
    echo "<pubDate>" . $a['date'] . " EST</pubDate>";
echo "</item>";
}
echo "</channel>";
echo "</rss>";  

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:08:25.250

您可以 在 sql 查询和 foreach 时使用带有[mysql_fetch_object()的对象](http://www.php.net/manual/en/function.mysql-fetch-object.php)

```
$get_articles = "SELECT `id`, `title`, `image`, `text`, DATE_FORMAT(`date`,'%a, %e %b %Y') as `date` FROM `posts` WHERE `date` <= CURDATE() ORDER BY `added` DESC LIMIT 20";
$articles = mysql_query($get_articles);

while ($obj = mysql_fetch_object($articles)) {
        $array[$obj->id]['id'] = $obj->id;
        $array[$obj->id]['title'] = $obj->title;
        $array[$obj->id]['image'] = $obj->image;
        $array[$obj->id]['date'] = $obj->date;  
} 
```

和输出：

```
foreach ($array as $k) {
echo "<item>";
   echo "<title>" . $k['title'] . "</title>";
   echo "<description>" . $k['image'] . "</description>";
   echo "<date>" . $k['description'] . "</date>"; 
echo "</item>";
} 
```

这是一个例子，您必须按照自己的方式编写代码

# c# - 使用通配符替换此字符串？

> ID：11976296
> 
> 赞同：-3
> 
> 时间：2012-08-15T19:56:13.530
> 
> 标签：c#, regex

我在更换时遇到问题

`&start=10`

在字符串内

`http://url.com?rt=22&start=10&pp=fasd986asd`

我希望能够删除 10 值并将其他内容放在那里。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:59:47.567

是的，你可以使用

```
HttpUtility.ParseQueryString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:15:15.100

```
Regex.Replace("http://url.com?rt=22&start=10&pp=fasd986asd", "&start=\d+", "&start=20"); 
```

将是一种方式，或者您可以使用`&start=(\d+)`并`Regex.Matches()`使用匹配集合来查找数字的开始和结束索引。阅读[Regex 类文档](http://msdn.microsoft.com/en-us/library/6f7hht7k)以了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:26:25.653

```
var parts = HttpUtility.ParseQueryString("http://url.com?rt=22&start=10&pp=fasd986asd");
parts["start"] = "20";
var newUrl = String.Join("&", parts.Cast<string>().Select(x => x + "=" + parts[x])); 
```

# xml - SSIS将行从xml转换为列

> ID：11976298
> 
> 赞同：0
> 
> 时间：2012-08-15T19:56:18.540
> 
> 标签：xml, ssis, transpose

我从存储在共享文件服务器上的 Web 设备获取 xml 文件。xml 是池化结构的。这是一个例子：

```
<row>
  <cell>2000-01-01T00:00:18.000000</cell> 
  <cell>2012-02-24T14:17:12.000000</cell> 
  <cell>0.18</cell> 
  <cell>3697.26464171841</cell> 
  <cell>3697.26464171841</cell> 
  <cell>3737.1</cell> 
  <cell>10.4318</cell> 
  <cell>0.229</cell> 
</row> 
```

每个单元元素实际上应该是不同的元素。例如，如果我要构建这个 xml 表，我会像这样格式化它：

```
<run>
  <startTime>2000-01-01T00:00:18.000000</startTime> 
  <EndTime>2012-02-24T14:17:12.000000</EndTime> 
  <effeicency>0.18</effeicency> 
  <good>3697.26464171841</good> 
  <bad>3697.26464171841</bad> 
  <average>3737.1</average> 
  <oee>10.4318</oee> 
  <up>0.229</up> 
</run> 
```

我正在使用 SSIS XML 源来获取它并获得以下信息：

```
Cell|row_id
2001-01-01|3
2001-01-01|3
0.18|3
3697.264|3
3697.264|3
3737.1|3
10.431|3
0.229|3
2012-01-01|4
2012-01-01|4
0.15|4
698.222|4
397.204|4
337.1|4
11.531|4
0.219|4
... 
... 
```

所以我的问题是，我是否可以使用一些转换来旋转数据，即使我认为我在源中只有 2 列并且我没有在任何事情上进行汇总？我的预期输出是

```
2001-01-01|   2001-01-01|    0.18|    3697.264|    3697.264|    3737.1|    10.431|   0.229 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:19:03.563

这个解决方案可能无法针对大量记录进行扩展，但它对我来说很头疼。关键是使用 XPath 导航 XML 并将元素转换为适当的数据类型。

我不知道主键是什么，我将在此示例中使用 ApplianceRowID。所以表结构会是这样的

```
CREATE TABLE [dbo].[WebApplianceStaging] (
ApplianceRowID [int] IDENTITY (1,1) NOT NULL,
RowData [nvarchar] (max) NULL
CONSTRAINT [PK_ApplianceRowID] PRIMARY KEY CLUSTERED
(
    [ApplianceRowID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,  
   ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

编写您的 SSIS 导入以引入此数据，然后在 SSIS 或存储过程中将 XML 数据转换为适当的字段类型并插入您的最终表格。

在这里，我使用的是公用表表达式，并且由于小数位数，我只是使用浮点数作为数据类型，最初将日期设为 varchar，然后使用左函数和 126 格式说明符转换为日期时间。因为它是 XML，所以存在值为空字符串的风险，因此您需要将这些字段设为空，因此 nullif：

```
;WITH ApplianceRow(RowID, RowDataRaw) as
(
    SELECT ApplianceRowID, RowData 
    FROM WebApplianceStaging
)
INSERT INTO [dbo].[FinalTable]  --Your Final Table
([RowID],[StartTime],[EndTime],[Efficiency],[good],[bad],[average],[oee],[up])
SELECT 
    RowID
    --,RowDataRaw
    --,XML_Encoded
    ,CONVERT(
       DATETIME
       ,LEFT(NULLIF(XML_Encoded.value('/row[1]/cell[1]','varchar(50)'),''),19)
       ,126
      ) AS StartTime
    ,CONVERT(
       DATETIME
       ,LEFT(NULLIF(XML_Encoded.value('/row[1]/cell[2]','varchar(50)'),''),19)
       ,126
      ) AS EndTime
    ,NULLIF(XML_Encoded.value('/row[1]/cell[3]','float'),'') AS efficiency
    ,NULLIF(XML_Encoded.value('/row[1]/cell[4]','float'),'') AS good
    ,NULLIF(XML_Encoded.value('/row[1]/cell[5]','float'),'') AS bad
    ,NULLIF(XML_Encoded.value('/row[1]/cell[6]','float'),'') AS average
    ,NULLIF(XML_Encoded.value('/row[1]/cell[7]','float'),'') AS oee
    ,NULLIF(XML_Encoded.value('/row[1]/cell[8]','float'),'') AS up
FROM ApplianceRow
CROSS APPLY
(
     SELECT XML_Encoded = CAST(RowDataRaw AS XML)
) as XML_Encoded 
```

# javascript - 将选项框的值和键作为参数发送？

> ID：11976303
> 
> 赞同：3
> 
> 时间：2012-08-15T19:56:41.657
> 
> 标签：javascript, html, jsp

我想在提交表单时同时发送选项框的值和键。我觉得这应该很简单，但我不确定该怎么做。下面是我的表单中的一个片段，用于演示我所引用的内容：

```
<form name='form' onSubmit="return checkForm();" action="../servlet/AccountRequest">

<select name="type1">
   <option value="1">Option A</option>
   <option value="2">Option B</option>
</select>

<br/><input type="button" id="Submit" onclick="checkForm(this.form)" value="Request" />
<input type="reset" value="Cancel"/>
</form> 
```

​ 在正常情况下，如果我在下拉框中选择“选项 A”，我希望发送值，即“1”。但是，我想实际发送选择的值和键，在这种情况下是“1”和“选项 A”。

在我的例子中，我调用了一个 checkForm() JavaScript 函数来验证表单输入（还有其他字段，如名字、姓氏、电子邮件地址和密码），然后将参数转发到 Java 类 (AccountRequest)。我确定有一种方法可以在单击“请求”按钮时将密钥存储为变量，我只是不知道如何。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T20:10:48.977

您可以使用数据的 JSON 表示形式：

```
<select name="type1">
 <option value="{'1':'Option A'}">Option A</option>
 <option value="{'2':'Option B'}">Option B</option>
</select> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T20:04:22.067

这可能不是您期望的方法，但您可以将键/值对作为您的值发送，并在服务器端收到它时对其进行解析。

```
<select name="type1">
   <option value="1,Option A">Option A</option>
   <option value="2,Option B">Option B</option>
</select> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T20:07:58.870

在 HTML 中，这是不可能的：`select`元素贡献的数据被*定义*为`value`selected 的属性`option`，当存在时（否则为 selected`option`元素的内容）。

*在 JavaScript 中，一旦您决定了应该如何*传递内容（描述中的“键”），这将非常容易。最简单的情况是，您可以将内容附加到`value`属性中，并在字符串之间使用一些分隔符；那么您将不得不解析该服务器端，但这也很简单。

但是，`option`内容是用户界面中可见的字符串，用户可以理解，而`value`属性是机器可读且易于处理的数据，这正是元素理念的一部分。在好的设计中，它们是分开的，而不是组合的；服务器应该只需要`value`属性中的数据；否则存在应该修复的设计缺陷。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T20:33:30.847

您可以添加此代码以在函数中获取所选`<option>`标签的文本：`checkform`

```
var select = document.getElementsByName("type1")[0]; // get select element - simpler if it has an ID because you can use the getElementById method
var options = select.getElementsByTagName("option"); // get all option tags within the select

for (i = 0; i < options.length; i++) { // iterate through all option tags
    if (options[i].value == select.value){ // if this option is selected
        var key = options[i].innerHTML; // store key of selected option here
    }
} 
```

[**DEMO，告诉你选择的键**](http://jsfiddle.net/Snowsickle/ZLz8B/1/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-15T20:04:16.020

使用复合值，然后在服务器上解析出来：

```
<option value="1_A">Option A</option> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-07T21:41:36.707

您可以使用隐藏的输入类型发送值

1.-选择默认值：

```
<input type="hidden" id="theValue" name="type1Value" value="Option A"/> 
```

2.-将 onChange 函数添加到您的选择中，这会更改以前的隐藏值

```
<select id="type1" name="type1" onChange="updateValue()">
   <option value="1">Option A</option>
   <option value="2">Option B</option>
</select> 
```

假设您使用的是 jQuery：

```
function updateValue(){
   var value= $('#type1').find(":selected").text();
   $('#theValue').val(value);
} 
```

所以选择的值将在 type1Value 变量中发送，EASY！

# windows - 我们可以在 Windows Server 2012 上安装 Office 2013 吗？

> ID：11976306
> 
> 赞同：0
> 
> 时间：2012-08-15T19:56:57.793
> 
> 标签：windows, ms-office, windows-server, office-2013

嗨，我们可以在 Windows Server 2012 上安装 Office 2013 吗？

我试图在很多地方找到，但找不到任何例子。自己做实验太难了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:00:30.427

是的，是的，它会的。

资料来源：我安装了 2012 年的 RC，并收到了 2013 年的 beta 副本

# javascript - Javascript 无法访问对象的属性

> ID：11976308
> 
> 赞同：0
> 
> 时间：2012-08-15T19:57:02.740
> 
> 标签：javascript, json

我有一个看起来像这样的对象（从 jQuery ajax 返回）：

```
data:{
    materials:{
        1:{
            id:1,
            name:"jacob"
        }//1 (some integer)
    }//materials
}//data 
```

我正在尝试访问`name`，但无法通过对象`1`。我试过[`makeArray()`](http://api.jquery.com/jQuery.makeArray/)这样使用

```
var m  = $.makeArray(data.materials);
var m0 = m.shift();
console.log(m);
console.log(m0); 
```

`$isArray(m)`&`$.isArray(m0)`返回真，但`m`两者`m0`都返回：

```
1:{
    id:1,
    name:"jacob"
}//1 (some integer) 
```

我希望这`shift()`能返回`1`.

当我尝试访问`m0.name`时返回未定义，当我尝试访问`m[1]`时返回未定义。

顺便说一句`data.materials["1"].name`有效。问题是`1`可变的（我不知道它会是什么，所以我想使用`shift()`对对象不起作用的）。

**编辑：**所以似乎有一个限制[`makeArray()`](http://api.jquery.com/jQuery.makeArray/)：由于对象属性不应该用数字命名，因此该函数不会转换对象的其余部分，并且输出是某种对象数组混合（在你不能使用像`shift()`）这样的数组函数，所以我想到的快速n脏解决方案是像这样循环遍历它：

```
var m = data.materials,
    id;
for ( key in m ) { id = key; }
console.log( m[id].name ); 
```

它不是那么干净，所以如果有更好的方法，请告诉我。

ps`1:{}`之所以存在，是因为控制器在某些条件下会返回多个“材质”（使用此js时永远不会为真）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:01:37.207

你应该使用`data.materials["1"].name`

[http://jsfiddle.net/nq4RE/](http://jsfiddle.net/nq4RE/)

雅各布，我看到你更新了你的问题。

要使用变量，您只需调用`data.materials[your_variable_here].name`

[http://jsfiddle.net/nq4RE/1/](http://jsfiddle.net/nq4RE/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:02:13.367

你试过：`data.materials[1].name`？

但在我看来，使用数字作为属性名称具有误导性。

# javascript - 元素淡入，但不淡出

> ID：11976313
> 
> 赞同：2
> 
> 时间：2012-08-15T19:57:12.067
> 
> 标签：javascript, css

我有以下 javascript

```
function fadeIn(objectID, amount) {
object = document.getElementById(objectID + 'Des');
if(amount > 0)
{
    object.style.display ='block';
    object.style.opacity = '0';
}
var i = 0;
animatefadein = function()
{
    var MIN_OPACITY = 0;
    var MAX_OPACITY = 1;
    if ( (amount > 0 && object.style.opacity < MAX_OPACITY) || (amount < 0 && object.style.opacity > MIN_OPACITY)) 
    {
        var current = Number(object.style.opacity);
        var newopac = current + Number(amount);
        object.style.opacity = String(newopac);
        setTimeout('animatefadein()', 50);

    }

}
animatefadein();
if(amount < 0)
{
    object.style.display ='none';
} 
```

}

我需要将 display 设置为 none，因为如果用户浏览它们，则需要在其上放置另一个元素。

这是HTML，

```
<div id='products'>
            <img src = './product1.png' usemap='#ourProducts' alt='Our Products' title='Hover over the names to find out more.'>
            <map id='ourProducts' name='ourProducts'>
                <area shape='rect' coords="55,55,210,110" href='#' id='forcePort' alt='ForcePort' title='ForcePort' onmouseover='fadeIn("forcePort",0.1)' onmouseout='fadeIn("forcePort",-0.1)'/>
                <area shape='rect' coords="105,248,270,290" href='#' id='quickPort' alt='QuickPort' title='QuickPort' onmouseover='fadeIn("quickPort",0.1)' onmouseout='fadeIn("quickPort",-0.1)'/>
                <area shape='rect' coords="390,260,535,303" href='#' id='scrinter' alt='Scrinter' title='Scrinter' onmouseover='fadeIn("scrinter",0.1)' onmouseout='fadeIn("scrinter",-0.1)'/>
                <area shape='rect' coords="675,242,835,292" href='#'  id='bugTrail' alt='Bug Trail' title='Bug Trail' onmouseover='fadeIn("bugTrail",0.1)' onmouseout='fadeIn("bugTrail",-0.1)'/>
                <area shape='rect' coords="688,42,858,138" href='#' id='dataExtract' alt='CRM Data Extractor' title='CRM Data Extractor' onmouseover='fadeIn("dataExtract",0.1)' onmouseout='fadeIn("dataExtract",-0.1)'/>
            </map>
            <div id='productDes'>
                <div id='scrinterDes'>
                                      Data that needs to be shown!
                </div>
                <div id='bugTrailDes'>
                </div>
                <div id='quickPortDes'>
                </div>
                <div id='forcePortDes'>
                </div>
                <div id='dataExtractDes'>
                </div>
            </div>
        </div> 
```

如您所见，淡出不起作用。此外，如果您在 setTimeout 循环中放置一个计数器并将其打印到控制台，您会看到它在淡出事件中循环了无数次。这是有问题的网站，

[网站](https://dl.dropbox.com/u/14863356/OsmosysV3/index.html)

只需转到显示屏上的产品，然后将鼠标悬停在产品名称上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:05:31.157

我希望你意识到这很容易用 jQuery [http://jquery.com/](http://jquery.com/)完成你的脚本的问题是，`Opacity`并且`Display`是两个不同的 CSS 属性，要使其工作，你需要设置`Opacity`为 0，更改`Display: none`为`block`or`inline-block`然后为您的动画制作动画`Opacity`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:22:21.913

在这里看到它：http: [//jsfiddle.net/V8SAx/](http://jsfiddle.net/V8SAx/)

首先，你永远不应该这样调用`setTimeout`: `setTimeout('animatefadein()', 50)`，因为它使用`eval`，这非常慢且不安全。

其次，这里有代码：

```
function fadeIn(objectID, amount,callback) {
    object = document.getElementById(objectID + 'Des');
    object.style.display ='block';
    object.style.opacity = String(Number(amount<0));
    animatefadein = function()
    {
        var MIN_OPACITY = 0;
        var MAX_OPACITY = 1;
        if ( (amount > 0 && object.style.opacity < MAX_OPACITY) ||
             (amount < 0 && object.style.opacity > MIN_OPACITY)
        ){
            var current = Number(object.style.opacity);
            var newopac = current + Number(amount);
            console.log(current + Number(amount));
            object.style.opacity = String(newopac);
            setTimeout(animatefadein, 50);

        }else{
            if(amount<0){object.style.display='none';}
            if(callback){callback();}
        }

    }
    animatefadein();
}
fadeIn('a',0.1,function(){fadeIn('a',-0.1);}); 
```

我添加了对回调的支持，它在淡入淡出过程之后调用，也许你会感兴趣。

# tcl - Tcl TCL_OK 使用示例

> ID：11976316
> 
> 赞同：3
> 
> 时间：2012-08-15T19:57:19.050
> 
> 标签：tcl

根据 Tcl [catch](http://www.tcl.tk/man/tcl8.4/TclCmd/catch.htm)命令的帮助页面，我尝试使用指定的结果变量，例如`TCL_OK`or `TCL_ERROR`。但是，应该如何访问这些变量的语法存在一些问题。有没有人有使用这些变量而不是幻数的代码示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:48:18.560

根据我的经验，您想使用数值，而不是名称。在 C api 中编程时使用名称，但从 Tcl 中，只使用数字。

```
set code [catch {
    my script
} result]
switch -exact -- $code {
    0 { 
        puts "normal command completion"
    }
    1 { 
        puts "code threw an error (ie: error 'wtf')"
    }
    2 { 
        puts "code used 'return' command normally"
    }
    3 { 
        puts "code used 'break' command"
    }
    4 { 
        puts "code used 'continue' command"
    }
} 
```

# javascript - 通过javascript每次点击动态禁用文本选择？

> ID：11976340
> 
> 赞同：1
> 
> 时间：2012-08-15T19:59:04.933
> 
> 标签：javascript, html, css

我有一个表，我添加了一些多项选择功能，`shift + click`在第一次单击和第二次单击之间选择行，但最终突出显示行之间的所有文本。

我不想通过 CSS 禁用文本选择，因为这些东西确实需要是可选的，而不是当我的多选功能触发时 shift + click 时。

这可以做到吗？

```
 var lastChecked;    
    $("#contact_table tr").click(function(e) {
        if (e.target.getAttribute('type') == 'checkbox') {
            return;
        };  
        if (e.shiftKey && lastChecked) {
            // select between last point and new point
            var tableRows = $("#contact_table tr");
            var newRow = tableRows.index($(this));
            var oldRow = tableRows.index(lastChecked);
            if (oldRow < newRow) {
                newRow = newRow +1;
            }
            var sliceRange = [newRow, oldRow].sort();
            var selectedRows = tableRows.slice(sliceRange[0], sliceRange[1])
                .find('input[type=checkbox]').attr('checked', true);
        } else {
            var checkbox = $(this).find('input[type=checkbox]');
            var checked = toggleCheckbox(checkbox);
            if (checked) {
                lastChecked = $(this);
            }               
        };
        recalculateSelectedButton();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:03:56.990

您可以尝试根据选中复选框的数量禁用用户选择。如果有，只需将 CSS 样式[`user-select: none;`](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)（和前缀版本）添加到`#contact_table`.

如果您提供带有当前 javascript 代码和表格的[jsfiddle](http://jsfiddle.net/)，我也会测试代码 - 现在它是原样；) 我不确定点击交互将如何与任何取消的事件冒泡等一起发挥作用。此外，即使选中了复选框，此实现也没有考虑到用户可能想要选择文本（因此它可能不是您要查找的内容）。

```
$(function() {
    var $contactTable = $("#contact_table"),
        userSelectNoneClass = "user-select-none";

    $contactTable.on("change", ":checkbox", function(e) {
        var numberOfCheckedRows = $("#contact_table :checkbox:checked").length,
            anyCheckedRows = (numberOfCheckedRows > 0);

        if (anyCheckedRows && $contactTable.hasClass(userSelectNoneClass)) {
            $contactTable.addClass(userSelectNoneClass);
        } else {
            $contactTable.removeClass(userSelectNoneClass);
        }
    });
}); 
```

```
.user-select-none
{
    /* From https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

编辑：改用更改事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T21:47:40.217

您可以使用 javascript 取消选择所有文本；`RemoveSelection()`在运行多选逻辑后添加调用。

从[http://help.dottoro.com/ljigixkc.php](http://help.dottoro.com/ljigixkc.php)通过[Clear a selection in Firefox](https://stackoverflow.com/questions/6186844/clear-a-selection-in-firefox/6187098#6187098)

```
function RemoveSelection () {
    if (window.getSelection) {  // all browsers, except IE before version 9
        var selection = window.getSelection ();                                        
        selection.removeAllRanges ();
    }
    else {
        if (document.selection.createRange) {        // Internet Explorer
            var range = document.selection.createRange ();
            document.selection.empty ();
        }
    }
} 
```

# c++ - 时钟（）函数总是返回 0

> ID：11976342
> 
> 赞同：2
> 
> 时间：2012-08-15T19:59:12.683
> 
> 标签：c++, time, clock

> **可能重复：**
> [C`clock()`函数只返回一个零](https://stackoverflow.com/questions/2134363/the-c-clock-function-just-returns-a-zero)

我运行以下代码来测试 clock() 函数的工作。我在 ubuntu 12.04 上工作。

```
#include <stdio.h>
#include <time.h>
#include <iostream>
using namespace std;

double diffclock(clock_t clock1,clock_t clock2)
{
double diffticks=clock1-clock2;
double diffms=(diffticks*10)/CLOCKS_PER_SEC;
return diffms;
}

int main()
{
string name;
int i;
clock_t begin=clock();
cout << "Hi what is your name? ";
getline(cin, name);
clock_t end=clock();
cout << "Time elapsed: " << double(diffclock(end,begin)) << " ms"<< endl;
return 0;
} 
```

但无论我花多少时间写下我的名字，经过的时间总是显示为 0ms。

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T20:05:00.737

`clock()`返回自程序开始执行以来*使用*的滴答数。不需要（在这个特定的）示例中获取`clock_t begin`值。

尝试打印出`begin`和`end`值，看看它们是什么。它们可能都是 0 或接近 0，因为等待用户输入不使用 CPU 时间。

无论哪种方式，我都推荐该`time()`功能，因为您不需要*刻度*精度。 [http://www.cplusplus.com/reference/clibrary/ctime/time/](http://www.cplusplus.com/reference/clibrary/ctime/time/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:03:53.137

我认为您应该使用 time() 函数。它是这样工作的：[http](http://asust.in/007D) ://asust.in/007D 你只需调用它，它就会返回自 Unix 纪元（1970 年 1 月 1 日）以来的秒数。

clock() 函数返回自程序启动以来的时钟滴答数。这里：[http ://asust.in/007E](http://asust.in/007E)

# databasedotcom-gem - 找不到记录的 databasedotcom 错误

> ID：11976343
> 
> 赞同：0
> 
> 时间：2012-08-15T19:59:24.340
> 
> 标签：databasedotcom-gem

刚开始使用 databasedotcom gem，现在卡住了。

尝试按 ID 在 Salesforce 中查找记录时，如果 ID/记录不存在，则会产生以下错误：

“提供的外部 ID 字段不存在或不可访问：”

如果 Id 确实存在，我可以继续我的页面。

这是我的代码：

```
def search
@account = Account.find(params[:id])

if @account.Id
  redirect_to new_user_registration_path(:id => @account.Id)
elsif params[:id].to_s.present? and @account.nil?
  flash[:alert] = "Couldn't find that one.  Please check and re-submit your number."
  redirect_to search_path
end 
```

结尾

我该如何克服呢？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:04:24.897

将代码更改为以下代码，现在可以正常工作了 - 谢谢 Danny Burkes。它捕获异常并相应地路由。

```
def search
begin
@account = Account.find(params[:id])

if @account.Id
  redirect_to new_user_registration_path(:id => @account.Id)
end
rescue Exception => e
  flash[:alert] = "Couldn't find that one.  Please check and re-submit your number."
  redirect_to search_path
end 
```

结尾

# c++ - 你如何包含来自 Boost 的 initial_path()？

> ID：11976344
> 
> 赞同：0
> 
> 时间：2012-08-15T19:59:24.807
> 
> 标签：c++, boost, include

我安装了 Boost 并`#include <boost/initial_path.hpp>`在我的源代码中有代码，但它仍然显示“没有这样的文件或目录”。我以前从未包含过外部库，我该怎么做？

为什么[这个问题](https://stackoverflow.com/questions/6108650/replacement-for-deprecated-boost-filesystem-initial-path) `claim initial_path()`被弃用了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:39:15.997

添加到您的命令行：

```
-Ic:/your_boost_directory 
```

或查看如何在文档中为您的编译器指定包含路径。

# iphone - 比较 NSNumbers

> ID：11976345
> 
> 赞同：2
> 
> 时间：2012-08-15T19:59:33.750
> 
> 标签：iphone, objective-c, cocoa-touch, nsnumber

用户输入一个数字（浮点数或整数），它必须大于下限。

这是从 UITextField 中获取数字的代码：

```
NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber *currentNumber = [f numberFromString:self.textfield.text];
[f release]; 
```

下限通常是 0.1（`lowerBound`是一个 NSNumber）

如果我有这个代码并且我在文本字段中输入 0.1，那么`isValid`仍然是`YES`.

```
BOOL isValid = YES;
if ([currentNumber floatValue] < [self.lowerBound floatValue]) {
    isValid = NO;
} 
```

但是我认为这样做会更好：

```
BOOL isValid = YES;
if ([currentNumber compare:self.lowerBound] == NSOrderedAscending) {
    isValid = NO;
} 
```

但是我再次输入 0.1（并且 lowerBound 仍然是 0.1），if 语句的计算结果为 true（好像 currentNumber 小于 self.lowerBound）。

该代码在 0.11 及更高版本中按预期工作。我也有一个更高的界限：

```
BOOL isValid = YES;
if ([currentNumber compare:self.higherBound] == NSOrderDescending) {
    isValid = NO;
} 
```

这可以按预期工作，包括当我输入与 HigherBound 相同的值时（大多数情况下为 10）

据我了解，`compare:`NSNumber 上的方法比较的是值而不是对象的地址，那么为什么它不适用于下限呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:04:10.613

因为浮点数并不精确——一个 NSNumber 中的 0.1 可能与另一个 NSNumber 中的 0.1 不同。

# javascript - HTML Select 元素的只读等效项

> ID：11976348
> 
> 赞同：9
> 
> 时间：2012-08-15T19:59:42.327
> 
> 标签：javascript, html, dom, prototypejs

是否有与 `readOnly="true"`HTML 输入等效的 HTML 选择字段的属性或技术？

我有一个我想禁用的表单选择字段，但在发布表单时仍然会传递。如果这是一个 HTML 输入，我会做这样的事情

```
$('select_id').setAttribute('readOnly', 'true'); 
```

并且浏览器会将字段呈现为不可编辑，但它的值仍将传递给后端。我想要一个类似的 HTML 选择，但执行以下操作

```
$('#select_id').setAttribute('readOnly', 'true'); 
```

不起作用。该属性已成功添加到 DOM，但浏览器仍将其呈现为可选择的。

我意识到我可以做以下事情

```
$('#input_id').disabled(); 
```

但是当一个字段被*禁用*时，它的值不会传递到后端。

我想要一种禁用此选择字段但仍传递到后端的方法。

（示例使用 Prototype JS，但我对任何通用解决方案都感兴趣）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-15T20:04:05.903

禁用除选定选项之外的所有选项：

​</p>

```
<select>
<option disabled="disabled">1</option>
<option selected="selected">2</option>
<option disabled="disabled">3</option>
</select> 
```

这样下拉菜单仍然有效（并提交其值），但用户无法选择另一个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T20:10:07.860

添加禁用类：

```
.disabled{
   color: grey;
} 
```

如果类存在使用阻止默认焦点和点击，并dbl点击：

```
$('#el').bind('click dblclick focus').function(event){
   if ($(this).hasClass('disabled')) event.preventDefault();
}); 
```

# css - 奇怪：IE8 中的主动行为

> ID：11976349
> 
> 赞同：1
> 
> 时间：2012-08-15T19:59:44.157
> 
> 标签：css, internet-explorer-8, css-selectors

我在使用 IE8 时遇到问题，当在链接内单击图像时，IE 不会触发 :active 选择器。

## 例子：

**HTML：**

```
<a href="#"><img src="http://www.w3schools.com/images/pulpit.jpg"></a> 
```

**CSS：**

```
a {
    display:inline-block;
    padding:10px;
    border:1px solid #F00;
}
a:hover {
    border-color:#0F0;
}
a:active {
    border-color:#00F;
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/Faw4z/1/)**

单击图像周围区域时，链接正常，但单击图像本身时，链接无法更新。

关于为什么会发生这种情况以及是否有任何解决方法的任何想法？由于它大部分都在工作，我不介意在需要时附加一些 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:39:37.180

如果您将状态放在 img 上可能会更好，但我无法摆脱轮廓。[http://jsfiddle.net/wSp7J/3/](http://jsfiddle.net/wSp7J/3/)

# html - 为什么 HTML 元素不总是遵循 CSS 高度属性？

> ID：11976356
> 
> 赞同：2
> 
> 时间：2012-08-15T20:00:12.497
> 
> 标签：html, css, height

**我有一个页面，它有两个不同的部分**：定义宽度和全高的左侧有一个页面列表，**右侧是显示所选页面的全宽和全高**。所描述的行为与`A`元素和`TARGET`属性完美配合；您单击链接，`IFRAME`右侧的来源会发生变化。但是，我的问题在于：**我希望它填满页面的整个右侧**，因为它是站点的主要点，所以从逻辑上讲，我希望它能够控制用户的注意力*。*`IFRAME`

 **我的想法是简单地把它全部`TABLE`填满页面（用 a`height`和`width`of `100%`）和一行有两个单元格；一个用于左侧，一个用于右侧。我能够轻松地为它们提供适当的宽度和高度（左边有`width`和`6.5in`，`height`而`100%`右边有`width`和`height`100%）。在左边的`TD`单元格中，我有一个作为 s 的页面列表`UL`，`A`通过 CSS 给出`display`了 s 的属性`LI`。**在右边的`TD`单元格中，有一个`IFRAME`with a `width`of`100%`和 a `height`of `100%`。这就是问题所在：它填充了整个宽度，但拒绝高于或低于默认值 ( `150px`)**这在 IE、Firefox 和 Opera 中是一致的，但*不是 Chrome*`IFRAME` （Chrome 正确地垂直拉伸`100%`）！高度值以像素、英寸、毫米和厘米为单位，但不是百分比！

下面是代码的独立版本，但我的主要问题是**为什么大多数浏览器拒绝`IFRAME`使用百分比设置高度？**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
<HTML style="border:1px solid #000000; height:100%; width:100%;">
<HEAD>
<STYLE>
UL A{
display:list-item;
}
</STYLE>
</HEAD>
<BODY style="border:1px solid #FF0000; height:100%; width:100%;">
<TABLE style="border:1px solid #00FF00; display:block; height:100%; width:100%;">
    <TBODY STYLE="height:100%;">
        <TR STYLE="height:100%;">
            <TD style="border:1px solid #0000FF; height:100%; width:6.5in;">
                <H1>Pages</H1>
                <DIV>
                    <UL>
                        <A HREF="page1.htm" TARGET="CONTENT_HOLDER">First Page</A>
                        <A HREF="page2.htm" TARGET="CONTENT_HOLDER">Second Page</A>
                        <A HREF="lastPage.htm"  TARGET="CONTENT_HOLDER">Final Page</A>
                    </UL>
                </DIV>
            </TD>
            <TD STYLE="border:1px solid #FFFF00; height:100%; width:100%;">
                <IFRAME NAME="CONTENT_HOLDER" ID="CONTENT_HOLDER" STYLE="border:1px solid #FF00FF; height:100%; width:100%;"></IFRAME>
            </TD>
        </TR>
    </TBODY>
</TABLE>
</BODY>
</HTML> 
```

这应该显示我网站的基本概念，为清楚起见，主要元素以不同的颜色勾勒出来。为了编写小代码，它以糟糕的形式（大纲、内联样式等）完成，在这里。实际站点还有几百行我认为您不想看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:08:28.830

如果您只使用 iframe 的代码，您会看到它在 IE 中拉伸到 100%。这个问题可能与您的桌子有关。表格不被认为是页面布局的最佳实践。您可能想考虑在布局中使用“浮动”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T21:59:23.640

好的，这是 - 两列布局和[粘贴](http://pastebin.com/uRiAF6f7)：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>layout</title>
<style type="text/css">

html,body {
        width:100%;
        height:99%;
        margin:0;
        padding:0;
}

#left {
        float:left;
        width:6.50in;
        height:100%;
        border:4px solid #008;
        overflow: auto;
        background-color: #eee;
}

#right {
        position: relative;
        margin-left: 6.58in;
        height:100%;
        text-align:left;
        border:4px solid #080;
}

#left h1 {
        margin-left: 1em;
        color:blue;
}

#left ul {
        list-style-type:none;
        padding:8px 2px;
}

#left ul li a {
        font-size:32px;
        padding: 2px 1em;
        text-decoration:none;
}

#left ul li:hover {
        background-color:blue;
        color:white;
}

#left ul li:hover a {
        color:white;
}

#CONTENT_HOLDER {
        border:1px solid #FF00FF;
        height:100%;
        width:100%;
}

</style>
</head>
<body>

<div id="left">
<h1>Pages</h1>
<div>
        <ul>
                <li><a href="page1.htm" target="CONTENT_HOLDER">First Page</a></li>
                <li><a href="page2.htm" target="CONTENT_HOLDER">Second Page</a></li>
                <li><a href="lastPage.htm"  target="CONTENT_HOLDER">Final Page</a></li>
        </ul>
</div>
</div>

<div id="right">
        <iframe name="CONTENT_HOLDER" id="CONTENT_HOLDER"></iframe>
</div>

</body>
</html> 
```**

# android - Android：我可以在 xhdpi 文件夹中使用 800x1280 的图像吗？

> ID：11976364
> 
> 赞同：3
> 
> 时间：2012-08-15T20:00:52.870
> 
> 标签：android

根据[这个 SO thread](https://stackoverflow.com/questions/11630868/which-size-should-a-background-be-for-ldpi-mdpi-hdpi-and-xhdpi-screens)，在“普通”手机屏幕上，我应该为 mdpi 使用 320x480 背景图像，为 hdpi 使用 480x800，为 xhdpi 使用 640x960。

但是，我在 Galaxy S3、Galaxy Note 和 Galaxy Nexus 上获得图像比例时遇到了一些麻烦，它们的分辨率均为 800x1280（在 S3 和 Nexus 案例中为 720x1280）。大多数情况下，我的 640 像素宽背景会被拉伸到 720 或 800，但其他图像不会（正如我在[另一个 SO 线程](https://stackoverflow.com/questions/11975458/android-os-not-re-sizing-images-with-the-same-scale)中解释的那样）。

**一种解决方案似乎有效**：在 xhdpi 文件夹中使用 800x1280 代替使用 640x960 图像，因为这是这些设备的精确分辨率，因此几乎不需要重新调整大小。

然而，这打破了[Android 开发人员指南](http://developer.android.com/guide/practices/screens_support.html)建议在 mdpi、hdpi、xhdpi 之间保持的 4:6:8 比例。

**我的问题**：可以使用我的解决方案吗？有没有其他人试过这个？

# c# - c# 应用程序在服务器关闭时崩溃

> ID：11976369
> 
> 赞同：0
> 
> 时间：2012-08-15T20:01:19.337
> 
> 标签：c#

我正在使用此代码在 *Form1_Load* 中获取我的应用程序的最新版本：

```
string result1 = null;
string url1 = "http://site.com/version.html";
WebResponse response1 = null;
StreamReader reader1 = null;

try
{
   HttpWebRequest request1 = (HttpWebRequest)WebRequest.Create(url1);
   request1.Method = "GET";
   response1 = request1.GetResponse();
   reader1 = new StreamReader(response1.GetResponseStream(), Encoding.UTF8);
   result1 = reader1.ReadToEnd();
 }
 catch (Exception ex)
 {
   // show the error if any.                
 }
 finally
 {
    if (reader1 != null)
         reader1.Close();
    if (response1 != null)
         response1.Close();
 } 
```

问题是，当我关闭服务器时，整个应用程序都卡住了，并且弹出了一个窗口，说：

> 无法连接到远程服务器

这似乎是合法的。

有没有办法绕过这个崩溃（当服务器关闭时）并打破版本检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:08:42.107

添加一个额外的 catch 块来捕获您看到的特定异常类型......代码看起来像......

```
try
{
//*yadda yadda yadda*
}
catch (System.Net.WebException WebEx)
{
//*Correctly set up a situation where the rest of your program will know there was a connection problem to the website.*
}
catch (Exception ex)
{
//*Do the error catching you do now*
}
finally
{
//*yadda yadda*
} 
```

这种构造将允许您以与其他类型的异常不同的方式处理 WebException：请注意，所有异常都派生自一个基类 Exception，您可以为这样的用途创建自己的异常。

# c# - visual studio 2010 c# 在aspx.cs上的网页之间遍历

> ID：11976370
> 
> 赞同：0
> 
> 时间：2012-08-15T20:01:19.723
> 
> 标签：c#, asp.net, visual-studio-2010

作为我在 aspx.cs 上的解决方案之后的标题状态，我想切换到另一个网页以删除 cookie 并避免重新发送相同的电子邮件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:06:57.740

**做[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)**

完成交易后，重定向到另一个页面（显示“已成功完成”或其他消息）。现在刷新不能打败你

要重定向，您可以使用`Response.Redirect`方法

```
 Response.Redirect("welcome.aspx") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:06:55.030

您可以添加一个`Session`防止再次发送电子邮件（如果这是每会话一次的电子邮件（即通讯注册等））。

`Session`然后在发送电子邮件之前检查是否存在：

```
if (Session["emailsent"]==null){

  //Send email code here

  Session["emailsent"] = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:06:44.427

您必须在 page_load 事件中进行测试

```
if(!IsPostBack)
{
//send mail...
}
else
{
//do nothing
} 
```

# c# - 为了保护打算由多个客户端访问的数据库，使用 Web 服务作为代理是否过大？

> ID：11976380
> 
> 赞同：4
> 
> 时间：2012-08-15T20:02:22.177
> 
> 标签：c#, database, web-services, security

我们将有一个数据库和一个将安装在本地网络中的多台机器上的客户端应用程序，它们必须能够访问数据库。

他们中的一些人必须能够编辑和修改数据库，而他们中的一些人只会阅读它们。根据谁必须能够访问哪个表/字段，这两个组中的每一个也分为几个组。

为了创建这个应用程序，我们得到了一个建议，即部署一个 Web 服务作为客户端和 DB 之间的代理，以保护 DB。

但是我们不会传输任何敏感数据（例如信用卡号或......），我们只担心没有未经授权的人能够修改数据库。

**仅仅使用`integrated security`app.config 中的选项还不够吗？**
**我们真的需要隐藏和保护连接字符串吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:11:59.043

对我来说听起来太过分了。如果该应用程序仅在内部使用，并且 Windows 身份验证是一个选项，那么一定要使用它。构建 Web 服务只会减慢开发速度并增加不必要的复杂性。读/写用户可以是对数据库具有读/写访问权限的 Windows 组的成员，而只读用户可以是仅对数据库具有读访问权限的 Windows 组的成员。然后，如果用户能够直接访问数据库（不使用您的前端），他们将只能根据他们的 Windows 权限读取或读取/写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:21:15.927

这可能是矫枉过正，但它可能不会。决定采用面向服务的架构可能基于几个因素，其中包括：

*   您希望维护此应用程序多长时间？
*   您期望部署多少客户端？
*   您是否希望您的数据库经常更改？
*   您的 SLA 要求是什么？
*   您希望该数据库最终用于其他应用程序吗？
*   ETC...

总而言之，如果您希望能够更改中间层或数据库中的内容，并且您不想在这样做时升级每个客户端，那么添加服务层可能是去。您还可以为其他客户端开发人员（内部或外部）提供丰富的 API，同时在一个集中位置控制业务规则和安全性。

SOA 肯定会增加项目的复杂性，但在很多情况下，它可以为您在未来省去很多麻烦。

如需进一步阅读，请查看[http://en.wikipedia.org/wiki/Service-oriented_architecture](http://en.wikipedia.org/wiki/Service-oriented_architecture)、[http://www.soapatterns.org/](http://www.soapatterns.org/)或 Google。

# titanium - Titanium Appcelerator - 使用地图创建方向？

> ID：11976384
> 
> 赞同：1
> 
> 时间：2012-08-15T20:02:23.763
> 
> 标签：titanium, titanium-mobile, appcelerator-mobile

我正在 Titanium Appcelerator 中创建一个简单的地图应用程序，现在只关注 iOS。我有 2 个由纬度和经度指定的注释。我想在地图上的 2 点之间绘制方向。

我看到

```
mapview.addRoute(); 
```

MapView 对象上的方法，但它需要您输入路线中的所有点才能正确绘制它？！这听起来一点也不正确——为什么当谷歌地图已经可以做到这一点时，它还需要我找到所有的点。

有没有一种方法可以让我简单地说“这里是 A 点，这里是 B 点，在地图上的 2 点之间绘制路线”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:22:01.620

在地图上绘制路线无非是矢量图。手机上的地图应用程序也是如此。

您将不得不询问地图 api 以获取方向，获取方向（点）并在您的代码中使用它来绘制路线。

如果您不想自己做，市场上有一个免费模块可以提供帮助

[https://marketplace.appcelerator.com/apps/2580?87150712](https://marketplace.appcelerator.com/apps/2580?87150712)

如果您想亲自动手，这篇文章可能会对您有所帮助：

[http://developer.appcelerator.com/question/74221/mobile-map-route-from-google-server](http://developer.appcelerator.com/question/74221/mobile-map-route-from-google-server)

# c# - 如何获取可为 Nullable 的对象的类型 当值为空时

> ID：11976385
> 
> 赞同：0
> 
> 时间：2012-08-15T20:02:41.840
> 
> 标签：c#, nullable

> **可能重复：**
> [.NET：如何获取空对象的类型？](https://stackoverflow.com/questions/254461/net-how-do-you-get-the-type-of-a-null-object)

基本上，我希望以下代码之一在没有空引用错误的情况下工作：

```
int? i1 = default(int?);
int? i2 = new Nullable<Int32>();
int? i3 = new int?();
var t1 = i1.GetType();
var t2 = i2.GetType();
var t3 = i3.GetType(); 
```

我希望/期望我能够从上面的**i**对象中获取类型，而不会出现空引用异常。

如果这是不可能的，我将如何在保持空值的同时创建对 Nullable Int 的引用。

**更新：**对于那些感兴趣并且不想筛选链接问题中不完全适用的答案的人，解决方案是：

```
private void Example()
{
    var i = default(int?);
    var t = this.GetDeclaredType(i);
}

private Type GetDeclaredType<T>(T obj)
{
    return typeof(T);
} 
```

# ruby - PDFKit 不使用 GET 调用中的参数

> ID：11976388
> 
> 赞同：4
> 
> 时间：2012-08-15T20:02:47.587
> 
> 标签：ruby, ruby-on-rails-3, pdfkit

我在 Windows 上的 PDFKit 可以很好地处理以下网址：items/1 我可以轻松地将 .pdf 附加到此网址的末尾，例如 items/1.pdf，并创建一个 PDF 文件。

但是当我尝试在将 url 更改为的链接中传递参数时它不起作用： items/my_custom_action?item_id=1

基本上我在第二种情况下创建一个可打印的 HTML 页面，我想使用 pdfkit 转换为 PDF。

我正在使用 Rails 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T20:29:25.653

尝试使用发布表单来传递参数，这对我来说很好。

# javascript - 当前支持 JqGrid 中的多分组吗？

> ID：11976391
> 
> 赞同：0
> 
> 时间：2012-08-15T20:03:19.640
> 
> 标签：javascript, jquery, spring, jqgrid

我目前正在尝试在 jqGrid 中实现多分组，但似乎无法正确处理。请参见下面的代码：

```
colNames:['Programme','Course', 'Fee Type','Description','Apply', 'Amount', 'Discount', 'Discounted Amt','GATE Amount'], 
                    colModel:[ 
                        {name:'programme',index:'programme', width: 25}, 
                        {name:'moduleInstance',index:'moduleInstance', width:30
                        },
                        {name:'feeType',index:'feeType', width:15
                        },                           
                        {name:'description',index:'description', width:15
                        },
                        {name:'isApplicable',index:'isApplicable', width:4, editable:true, edittype:'checkbox', editoptions: { value:"True:False"},formatter: "checkbox", formatoptions: {disabled : false} 
                        },
                        {name:'amount',index:'amount', width:5
                        },                   
                        {name:'discount',index:'discount', width:5, editable:true},
                        {name:'discountAmount',index:'discountAmount', width:8},
                        {name:'gateAmountCovered',index:'gateAmountCovered', width:8, editable:true}
                    ],sortname: 'moduleInstance',
                    grouping:true,
                    groupingView : {
                        groupField : ['programme', 'moduleInstance'],
                        groupColumnShow : [false, false],
                        groupText : ['<b>{0} - {1} Item(s)</b>', '{0}']
                    }, 
```

这仅在标题上显示程序标题，而不在其他标题上显示。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:08:31.057

我从未实现过分组，但我在示例中尝试了此代码并得到了与您相同的结果。然后我查看了谷歌，发现[了这个](http://www.trirand.com/blog/?page_id=393/help/multilevel-grouping-in-jqgrid/)

这是一个非常古老的帖子，在 2011 年，但我想他们是对的，它不受支持。这就是为什么他们会提出这种multipleGroup 方法的原因。看看[这个](http://www.trirand.com/blog/?page_id=393/help/multi-level-groupingaggregation/)和这个[旧的答案](https://stackoverflow.com/questions/5941674/custom-aggregation-grouping-in-jqgrid)。至少你会得到一些参考。

# php - 我无法从 PHP 的 round() 中得到我需要的结果

> ID：11976392
> 
> 赞同：0
> 
> 时间：2012-08-15T20:03:23.430
> 
> 标签：php, floating-point, rounding

我无法使该`round()`功能正常工作。这是我目前正在做的事情：

```
if ($con2 == "sf") {
    $formula = $num * 0.00694444;
    $formula = round($formula);
    $result = $num . $si . "<br>RESULT: " . $formula . $sf;
}; 
```

使用此代码，当`$num`为 144 时，结果为 0.99999936。但是，我需要将其四舍五入为 1。为什么会发生这种情况，我怎样才能`round()`以我期望的方式行事，而不是这种违反直觉的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:04:54.003

尝试：

`$formula = round($formula, 0);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:06:08.000

指定所需的小数位数：

```
$formula = $num * 0.00694444;
$formula = round($formula,0);
echo $formula; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T21:36:44.870

好的 - 你可以试试这个脚本看看会发生什么，当我输入 144 时，这是你正在寻找的行为：

```
<?
if($_POST){
    $num=$_POST["number"];
    $formula = $num * 0.00694444;
    $formula = round($formula);
    echo $formula;
} else {
?>
<form action="test.php" method="post">
<input type="text" name="number" />
<input type="submit" />
</form>
<?
}
?> 
```

# github - 通过id获取github用户名

> ID：11976393
> 
> 赞同：46
> 
> 时间：2012-08-15T20:03:33.387
> 
> 标签：github, github-api

使用这个链接我可以看到我在 github 上的 (tonylampada) id 是 218821 [https://api.github.com/users/tonylampada](https://api.github.com/users/tonylampada)

我怎么能反其道而行之？给定用户 id = 218821，用户名是什么？

* * *

更新

在这里回答 nulltoken 是因为它是一个很长的故事，它不适合评论。

[FreedomSponsors](http://www.freedomsponsors.org/)是一个 django 应用程序，它使用 django-social-auth 来启用 Github（和其他）登录。（顺便说一句，您应该检查一下，请参阅博客中的[about 页面](http://blog.freedomsponsors.org/about):-) Django-social-auth 有一个配置标志，允许应用程序将 github 用户名存储在数据库中。几天前，我部署了启用 github 登录的新版本 FS，但将“storeGithubUsername”设置为 false。

一些用户注册了他们的 github 帐户，现在数据库有他们的 github id，但没有他们的用户名。

您可以在[我的个人资料](http://www.freedomsponsors.org/core/user/2/tonylampada)中看到我将 github 作为“关联帐户”，但没有指向我的 github 页面的链接。

我需要它来使链接指向[https://github.com/tonylampada](https://github.com/tonylampada)

我准备部署一个新版本来解决这个问题，方法是将“storeGithubUsername”（这不是它的名字，我只是在这里简化）设置为 true。但我想用已经在 github 注册的用户修补数据库。我有他们的 github id，但没有他们的 github 用户名。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2015-06-01T17:46:21.310

我们需要在[Gitter](https://gitter.im)上执行此操作，以处理用户在 GitHub 上更改了用户名，并且在查询他们的旧用户名时得到 404 响应的情况。

这是一个未记录的端点，因此请自担风险，但它现在确实有效。

使用端点：`https://api.github.com/user/:id`，其中`:id`是用户的 ID。

`https://api.github.com/repositories/:id`repos和orgs 分别存在类似的端点 `https://api.github.com/organizations/:id`。

请注意，新的[存储库重定向预览 API](https://developer.github.com/changes/2015-04-17-preview-repository-redirects/)仅支持存储库，不支持重命名的用户或组织。事实上，HTTP 301 重定向实际上指向`https://api.github.com/repositories/:id`，因此这些“ID”端点很可能很快就会成为官方的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T09:35:01.993

没有记录的功能，也没有我所知道的未记录的功能，可以公开从 id 检索用户名。从 GitHub API 消费者的角度来看，用户 ID 是一个“实现细节”。真正的关键是用户名。

据我了解，您只需要给定一个 id 列表的一批用户名。这将是一次性的请求，而不是永久的需要。

由于您的请求似乎合法且范围有限，您可以通过发送电子邮件至 support@github.com 直接从 GitHub 支持获得此答案。

事实上，**GitHubber**的 xpaulbettsx 甚至**[在推特上发布了关于此](https://twitter.com/xpaulbettsx/status/221070164056211456)**的内容：

> Support@ 非常适合您想告诉 GitHub 的任何内容 - 错误、功能、高 5；除了安全之外的一切都去安全@

# android - Android 4.0 GC 不一致 - 位图未释放

> ID：11976396
> 
> 赞同：1
> 
> 时间：2012-08-15T20:03:42.660
> 
> 标签：android, bitmap, garbage-collection

我知道这个主题已经讨论了很多，但我找不到我的内存问题的解决方法/解决方案。

问题是在 android 4.0 中垃圾收集器不起作用（至少我开始相信如此）。下面是我的代码中关于相同情况的 acer iconia tablet(4.0, 48M heap) 和 motorola defy(2.2, 30M heap) 的快照跟踪。也就是说，从游戏中获取下一阶段 -> 丢弃旧图像并将新图像加载到内存中。

4.0

```
08-15 21:33:07.020: V/ThemePacket(25564): debugSaveMemInfo: D:23.61  N:2.12  O:2.65

08-15 21:33:07.020: ThemePacket(25564): ClearBitmapsFromMemory: 7 friends  20 foes  2 GFIs

08-15 21:33:07.050: D/dalvikvm(25564): GC_EXPLICIT freed 4K, 74% free 10909K/41671K, paused 2ms+3ms

08-15 21:33:07.260: V/ThemePacket(25564): debugSaveMemInfo: D:23.61  N:2.12  O:2.65

08-15 21:33:07.260: V/DrawableResourceDataReference(25564): Bitmap size is: w:1875 h:1250 Asking for: w:1215 h:780

08-15 21:33:07.280: D/dalvikvm(25564): GC_FOR_ALLOC freed 36K, 74% free 10940K/41671K, paused 18ms

08-15 21:33:07.410: I/dalvikvm-heap(25564): Forcing collection of SoftReferences for 9375016-byte allocation

08-15 21:33:07.450: D/dalvikvm(25564): GC_BEFORE_OOM freed <1K, 74% free 10940K/41671K, paused 44ms

08-15 21:33:07.510: E/dalvikvm-heap(25564): Out of memory on a 9375016-byte allocation. 
```

2.2

```
08-15 22:10:53.132: V/ThemePacket(15074): GetStage(1)

08-15 22:10:53.155: V/ThemePacket(15074): debugSaveMemInfo: D:2,73  N:3,36  O:15,97

08-15 22:10:53.155: V/ThemePacket(15074): ClearBitmapsFromMemory: 7 friends  20 foes  2 GFIs

08-15 22:10:53.218: D/dalvikvm(15074): GC_EXPLICIT freed 911 objects / 115904 bytes in 54ms

08-15 22:10:53.241: V/ThemePacket(15074): debugSaveMemInfo: D:2,73  N:3,36  O:9,02

08-15 22:10:53.241: V/DrawableResourceDataReference(15074): Bitmap size is: w:1875 h:1250 Asking for: w:885 h:600

08-15 22:10:53.241: V/DrawableResourceDataReference(15074): Scaling down by 2

// all goes fine 
```

请注意以下几行：

```
debugSaveMemInfo: D:23.61  N:2.12  O:2.65
ClearBitmapsFromMemory: 7 friends  20 foes  2 GFIs
debugSaveMemInfo: D:23.61  N:2.12  O:2.6 
```

对比

```
debugSaveMemInfo: D:2,73  N:3,36  O:15,97
ClearBitmapsFromMemory: 7 friends  20 foes  2 GFIs
debugSaveMemInfo: D:2,73  N:3,36  O:9,02 
```

为了稍微解密这些痕迹，这就是我获取内存信息的方式：

```
Debug.MemoryInfo memInfo = new Debug.MemoryInfo();
Debug.getMemoryInfo(memInfo);
double nativeMem = memInfo.nativePss/(double)1024;
double otherMem = memInfo.otherPss/(double)1024;
double dalvikMem = memInfo.dalvikPss/(double)1024;
//some formatting...
Log.v(LOG_TAG, "debugSaveMemInfo: D:" + dalvik + "  N:" + nativeM + "  O:" + other); 
```

从内存中清除位图如下所示：

```
// Bitmap mBitmap
mBitmap.recycle();
mBitmap = null; 
```

是的，我已经在两个平台上调试了代码，并且在我的代码中一切都以完全相同的方式进行。因此，如果有人仍在阅读本文，就会出现一些问题。为什么在 4.0 中回收位图不会释放任何内存？GC 不是应该在抛出 OoM 之前找到所有可用内存吗？如果我完全减少使用的内存量，以防止 OoM，这些位图最终会被释放。但不是当我需要记忆时......

为了让事情更有趣，我从幽灵位图在内存中的情况中提取了一个 hprof 文件，你知道吗，它们不是！内存分析器说，当我将那些 23M 数字打印到屏幕上并从 9M 分配中获取 OoM 时，dalvik 堆大约为 10M。我在这里有点奇怪的想法，所以欢迎提出任何建议。我想我的下一个解决方案是如果我得到 OoM 就降低图像质量

# android - Android获取FragmentPagerAdapter中的片段

> ID：11976397
> 
> 赞同：36
> 
> 时间：2012-08-15T20:03:43.970
> 
> 标签：android, android-fragments, fragmentpageradapter

我有以下问题：我有一个活动，其中我有两个选项卡，它们都使用**FragmentPagerAdapter**作为片段制作 。在某些时候，我想更改其中一个片段的视图，但我无法**findFragmentById()**或**findFragmentByTag( )**我无法设置 id，因为我没有在 XML 中声明 Fragment，因为**FragmentPagerAdapter** 当我尝试设置标签时，我遇到了以下问题：

```
08-15 21:46:23.805: E/AndroidRuntime(9297): java.lang.IllegalStateException: Can't  change tag of fragment Companies{416d7b78 id=0x7f04002e companies}: was companies now android:switcher:2130968622:1 
```

我的寻呼机**FragmentPagerAdapter**代码：

```
public class TabsAdapter extends FragmentPagerAdapter implements    ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final FragmentActivity mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        FragmentTransaction ft=mContext.getSupportFragmentManager().beginTransaction();
        Fragment fragment=Fragment.instantiate(mContext, info.clss.getName(), info.args);

        if(position==1){
            ft.add(mViewPager.getId(), fragment, "companies");
        }else{
            ft.add(mViewPager.getId(), fragment);
        }
        Log.v("FRAGMENT ID", "fragment tag: "+fragment.getTag());
        ft.commit();
        Log.v("FRAGMENT ID", "fragment tag: "+fragment.getTag());
        return fragment;
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
        new Thread(new Runnable() {

            @Override
            public void run() {
                MainActivity.this.hideKeyboard();

            }
        }).start();

    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);                   
            }
        }

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-15T20:20:48.197

FragmentPagerAdapter 提供的片段在实例化时会自动标记。您可以使用此方法检索标签：

```
private static String makeFragmentName(int viewPagerId, int index) {
     return "android:switcher:" + viewPagerId + ":" + index;
} 
```

[参考：在片段页面适配器中重用片段](https://stackoverflow.com/questions/6976027/reusing-fragments-in-a-fragmentpageradapter)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-18T06:06:59.760

使用此功能，您可以通过寻呼机适配器位置找到片段。

```
public Fragment findFragmentByPosition(int position) {
    FragmentPagerAdapter fragmentPagerAdapter = getFragmentPagerAdapter();
    return getSupportFragmentManager().findFragmentByTag(
            "android:switcher:" + getViewPager().getId() + ":"
                    + fragmentPagerAdapter.getItemId(position));
} 
```

*v4 支持 api 的示例代码。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-24T20:43:47.227

我发现了一种稍微不那么粗暴的方法来处理`Fragment`由`FragmentPagerAdapter`. 与其模仿标签的创建方式，不如重写`instantiateItem()`，获取`Fragment`超类返回的，并将标签保存在`TabInfo`. 这适用于我的 API >= 15，可能适用于更低的版本。这仍然对私有代码做出了一些假设。

```
static final class TabInfo {
    private final Class<?> clss;
    private final Bundle args;
    private String tag; // ** add this

    TabInfo(Class<?> _class, Bundle _args) {
        clss = _class;
        args = _args;
    }
}

@Override
public Object instantiateItem(ViewGroup container, int position) {
    final Fragment fragment = (Fragment) super.instantiateItem(container, position);
    final TabInfo info = mTabs.get(position);
    info.tag = fragment.getTag(); // set it here
    return fragment;
} 
```

或者在 API < 16 中，我认为`instantiateItem()`需要 a`View()`而不是`ViewGroup()`，如下所示：

```
public Object instantiateItem(View container, int position); 
```

然后允许一种方法来获取`Fragment`，保持 hack 被包含在内。

```
public Fragment getFragment(int index) {
    return mContext.getFragmentManager().findFragmentByTag(mTabs.get(index).tag);
} 
```

为此，`mContext`需要将声明更改为`Activity`，它作为`Activity`无论如何传递：

```
private final Activity mContext; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-10T05:59:39.817

一个更简单的方法是直接从 Fragment Manager 获取标签；像这样：

```
fm.getFragments().get(0).getTag() 
```

您可以替换位置，具体取决于您需要标记的片段。希望这对其他人有帮助！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-25T09:58:20.153

回答这个问题已经很晚了，但是我搜索了很多没有人告诉我确切的答案，可能有人觉得它有用。

我已经设置了我的片段，`FragmentPagerAdapter`并且我在片段之间进行了通信

[https://developer.android.com/training/basics/fragments/communicating.html#Deliver](https://developer.android.com/training/basics/fragments/communicating.html#Deliver)

按照这个链接和 FindFragmentById 我只是在 mainactivity 上使用了**viewpager.getId()**。

# php - 如何使用php复制文件并截断 原始文件而不会丢失数据

> ID：11976398
> 
> 赞同：4
> 
> 时间：2012-08-15T20:03:45.043
> 
> 标签：php, logging, cron

我有一个生成日志文件的 php 脚本。另一方面，我有另一个脚本应该每小时运行一次来​​处理日志文件。

在我的第二个脚本中，我想在写入时复制并截断日志文件，而不会丢失任何数据。

在一个有限的测试中，我一直在使用重命名来创建副本，我得到了预期的结果

但我担心这种方法的正确性。

这样做安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:34:32.570

您正在做的事情称为“日志轮换”，是的，通过重命名日志文件来做到这一点是安全的。

*   在 Linux 中，您可以在另一个应用程序写入文件时重命名文件，并且该应用程序将继续写入重命名的文件。有关详细信息，请参阅[此 SO 答案](https://stackoverflow.com/a/2031100/529673)。

*   [在 Windows 中，如果打开文件的应用程序在调用CreateFile](http://msdn.microsoft.com/en-us/library/aa363858.aspx)时设置了 FILE_SHARE_DELETE 标志，则只能重命名打开的文件。如果设置了该标志，它的工作方式与在 Linux 上的工作方式相同（应用程序继续写入重命名的文件）。如果未设置，任何重命名文件的尝试都将失败。

您可能还对[logrotate](http://linuxcommand.org/man_pages/logrotate8.html)命令感兴趣。

# ios - 如何确认我们的代码没有在 iOS 发布二进制文件中调用 NSAssert

> ID：11976402
> 
> 赞同：3
> 
> 时间：2012-08-15T20:04:03.237
> 
> 标签：ios, release, nsassert

我想禁用在构建我们的发布 iOS 二进制文件时发生在我们的代码行中的 NSAssert 调用，然后我想确认它们已被禁用，因为我是超级偏执狂。我如何确认他们被禁用？

为了在我们的发布版本中禁用 NSAssert 调用，我已将 NS_BLOCK_ASSERTIONS=1（从[这里](https://stackoverflow.com/questions/8552486/usage-of-assert-in-ios)）常量添加到我正在使用 xcodebuild 执行的命令行发布版本中，以便在整个应用程序的构建中阻止 NSAssert，包括所有的构建它使用的我们的静态库。对于数十个静态库，尝试验证在每个库的项目文件中设置此标志的维护量太大，因此首选这种全局方法。它看起来像这样：

```
xcodebuild -target MyApp -configuration MyReleaseConfig -DNS_BLOCK_ASSERTIONS=1 build 
```

然后确认我们对 NSAssert 的调用确实被阻止了，这就是我正在尝试的方法，也是我寻求建议的地方：我将符号表从生成的二进制文件中转储出来，并寻找 NSAssert 宏调用的实际方法，像这样：

```
# Use 'nm' tool to dump symboltable into txt file
/Applications/Xcode.app/Contents/Developer/usr/bin/nm MyApp.app/MyApp > MyApp.symbols.txt

# Search symbols for NSAssertionHandler:
grep "NSAssertionHandler" ./MyApp.symbols.txt

# Output results:
RESULT=$?
if [ $RESULT -eq 0 ]
then
    echo -e "** ASSERTION CHECKER FAILED: FOUND 1 OR MORE NSASSERT CALLS IN RELEASE BINARY **"
else
    echo -e "** ASSERTION CHECKER SUCCEEDED:  NO NSASSERT CALLS IN RELEASE BINARY **"
fi 
```

问题是我仍然看到 NSAssertionHandler 出现在符号中：

```
U _OBJC_CLASS_$_NSAssertionHandler 
```

我怀疑我使用`nm`不正确；或者，这个符号出现可能是因为我们正在链接使用 NSAsserts 的第三方库，或者 iOS API 本身使用 NSAsserts，从而混淆了我的验证步骤。我希望在我们的发布版本中阻止我们对 NSAssert 的所有代码调用——我如何验证是否是这种情况？任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-04T06:10:10.547

你可以放入`NSAssert(false, @"test");`一个你知道你会命中的代码路径，看看它是否会被发布版本命中，看起来。

无论如何，因为这是一个古老的问题，我想知道同样的事情，我想我会提供更新。对我来说，在 Xcode 4.6.3 中，我会`DNS_BLOCK_ASSERTIONS=1`自动看到为我的发布版本定义的 - 所以`NSAssert`确实没有编译到发布版本中。

我还在一个总是命中的代码路径中对此进行了测试，并且断言没有被命中。它甚至没有被编译，因为我实际上忘记了`@`它甚至不会在 Debug 中编译，而是在 Release 中编译。

# jquery - jQuery 计算使用 .each 函数进行的循环次数

> ID：11976405
> 
> 赞同：2
> 
> 时间：2012-08-15T20:04:11.140
> 
> 标签：jquery

我有一个执行多次的函数。我想使用 jQuery 查找函数被调用的次数。我怎么做？

每当更改文本字段时，都会调用函数 showErrors。因此，根据页面上文本字段的数量，我应该能够找到调用 showErrors 的次数。我将如何在 showErrors 函数中检测到这一点。

```
showErrors: function(errorMap, errorList) {  
    if ($formEl.find(".aimInput input").length == 2) {
        // $('.validate').html(errorList[0]['message']);
        $(".aimLocal .submit").removeClass("disabled");
        $(C.options.currentPage).find('input[type="submit"]').removeAttr("disabled");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T20:05:37.203

```
var i = 0;

$("div").each(function() {
    ...
    i++;
});

alert( i ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T20:07:30.280

jQuery 为您处理这个问题。试试这个：

```
$("something").each(function(index) {
    alert("Current index is " + index);
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T20:09:53.923

```
var errors = 0;

(...)

showErrors: function(errorMap, errorList) {                                                                                                             

    if($formEl.find(".aimInput input").length == 2) {     
        // $('.validate').html(errorList[0]['message']);

        $(".aimLocal .submit").removeClass("disabled");                               
        $(C.options.currentPage).find('input[type="submit"]').removeAttr("disabled");

        errors++;  // <--------------- THIS

    }                    
} 
```

然后，您可以`errors`在代码中的任何位置使用，因为它是全局的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T20:07:39.260

您可以简单地计算元素的数量

```
$("#foo > div").length 
```

# python - groovy中的Python队列类型

> ID：11976409
> 
> 赞同：2
> 
> 时间：2012-08-15T20:04:24.480
> 
> 标签：python, multithreading, groovy, queue

我正在寻找类似于 Groovy 语言中 Python 中的队列类型的东西。

在 python 队列中，允许在线程之间交换信息并处理所有锁定问题/挑战。所以一个线程可以简单地将任务添加到队列中

```
while True:
    if self.task_ready():
        task = self.get_task()
        self.queue.put(task) 
        print 'Task %s added to queue' % (task.name) 
```

工作线程可以：

```
while True:
    self.queue.get()  # this is read blocking action
    self.proces_task(task) 
```

有没有办法在 Groovy 中以如此简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:11:23.977

您可以使用队列。

Java 在其 java.util.concurrent 包中有[LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)，您可以从 Groovy 中使用它。[JavaLobby 上](http://www.javalobby.org/java/forums/t16278.html)有一篇文章讨论了这些结构（显然是从 Java 的角度来看，但您可以使用 Groovy 中的所有内容）

# c - 由 malloc 在 C 中分配的大小的意外输出

> ID：11976414
> 
> 赞同：2
> 
> 时间：2012-08-15T20:04:50.497
> 
> 标签：c, memory-management, malloc, heap-memory, free

我已经读过 malloc 实际上分配了 (required_size + 1) 块内存，并将大小存储在第一个块中，并返回指向第二个块的指针。这样 free() 就知道要释放多少内存。所以，我写了一个小代码来输出这个大小。

```
int *p = (int *)malloc(100*sizeof(int));
printf("size = %d\n",p[-1]); 
```

由于我为 100 个整数分配空间，我希望大小为 400。但输出为 409。50 个整数的输出为 209，1000 个整数的输出为 4009。有人可以解释为什么输出关闭 9 个字节?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T20:21:38.310

假设实现是 glibc（或类似的），可以在注释中找到以下内容`malloc.c`：

```
Minimum overhead per allocated chunk:   4 or 8 bytes
   Each malloced chunk has a hidden word of overhead holding size
   and status information.

Minimum allocated size: 4-byte ptrs:  16 bytes    (including 4 overhead)
          8-byte ptrs:  24/32 bytes (including, 4/8 overhead)

   When a chunk is freed, 12 (for 4byte ptrs) or 20 (for 8 byte
   ptrs but 4 byte size) or 24 (for 8/8) additional bytes are
   needed; 4 (8) for a trailing size field and 8 (16) bytes for
   free list pointers. Thus, the minimum allocatable size is
   16/24/32 bytes. 
```

这就解释了开销的存在。

现在，对于'off by 1'，标志负责。由于分配的大小（实际上）`malloc()`总是 8 的倍数，因此三个最低有效位用于存储标志：

```
/* size field is or'ed with PREV_INUSE when previous adjacent chunk in use */
#define PREV_INUSE 0x1

/* extract inuse bit of previous chunk */
#define prev_inuse(p)       ((p)->size & PREV_INUSE)

/* size field is or'ed with IS_MMAPPED if the chunk was obtained with mmap() */
#define IS_MMAPPED 0x2

/* check for mmap()'ed chunk */
#define chunk_is_mmapped(p) ((p)->size & IS_MMAPPED)

/* size field is or'ed with NON_MAIN_ARENA if the chunk was obtained
   from a non-main arena.  This is only set immediately before handing
   the chunk to the user, if necessary.  */
#define NON_MAIN_ARENA 0x4

/* check for chunk from non-main arena */
#define chunk_non_main_arena(p) ((p)->size & NON_MAIN_ARENA) 
```

*编辑*：啊，我差点忘了。大小存储为`size_t`，而不是`int`，因此您应该使用该类型来访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:43:22.557

如果该值是分配大小，除了它依赖于实现之外，我会冒险猜测并说您有一些额外的可能性`9`。

对于未释放的分配，这个数字可能总是很奇怪。鉴于大多数操作系统具有以高于 1 字节的粒度返回的内置内存分配函数，因此 malloc 的实现可能使用分配大小的第一位来跟踪分配是否已被释放。

malloc 实现也要么利用操作系统返回的分配的自然对齐，即将实际分配大小四舍五入到操作系统保证的对齐（这将占额外的 8 个字节），**要么**它还在分配结束时分配 4 个字节用作保护值。

但是，您可以从您正在使用的平台和编译器的文档中了解有关分配信息存储位置的更多信息。

# aop - 在多个项目中使用 PostSharp OnExceptionAspect

> ID：11976417
> 
> 赞同：0
> 
> 时间：2012-08-15T20:04:54.537
> 
> 标签：aop, postsharp

大家下午好，

我正在尝试使用 Reza Ahmadi [http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS](http://www.codeproject.com/Articles/337564/Aspect-Oriented-Programming-Using-Csharp-and-PostS)和 dnrTV [http://www.codeproject.com/Articles/Aspect-Oriented-Programming-Using-Csharp-and-PostS 的示例“使用 C# 和 PostSharp 进行面向方面编程”： //dnrtv.com/dnrtvplayer/player.aspx?ShowNum=0190](http://dnrtv.com/dnrtvplayer/player.aspx?ShowNum=0190)用于异常处理。如果“OnExceptionAspect”在同一个项目/程序集中，一切都很好，但是如果我将类移动到它自己的 dll，则该事件不起作用。

```
[assembly: ExceptionAspect (AttributePriority = 1)]
[assembly: ExceptionAspect(AttributePriority = 2, AttributeExclude = true, AttributeTargetTypes = "HpsErp.Common.AspectObject.*")]
    namespace AspectObject
         [Serializable]
            public class ExceptionAspect : OnExceptionAspect
            {
                public override void OnException(MethodExecutionArgs args)
                {
                    Trace.TraceError("{0} in {1}.{2}",
                        args.Exception.GetType().Name,
                        args.Method.DeclaringType.FullName,
                        args.Method.Name);

                    if (args.Instance != null)
                    {
                       Trace.TraceInformation("this={0}", args.Instance); 
                    }

                    foreach (ParameterInfo parameter in args.Method.GetParameters())
                    {
                        Trace.TraceInformation("{0}={1}", parameter.Name,
                            args.Arguments[parameter.Position] ?? "null");
                    }
                } 
```

我还在外部 dll 中为“Timing”创建了一个类，如果我向该类添加自定义属性，效果会很好。

```
namespace AspectObject
 [Serializable]
    [MulticastAttributeUsage(MulticastTargets.Method)]
    public class TimingAspect : OnMethodBoundaryAspect
    {
        [NonSerialized]
        Stopwatch _StopWatch;

        public override void OnEntry(MethodExecutionArgs args)
        {
            _StopWatch = Stopwatch.StartNew();

            base.OnEntry(args);
        }

        public override void OnExit(MethodExecutionArgs args)
        {
            Console.WriteLine(string.Format("[{0}] took {1}ms to execute",
                new StackTrace().GetFrame(1).GetMethod().Name,
                _StopWatch.ElapsedMilliseconds));

            base.OnExit(args);
        }

Using AspectObject;

namespace MyApp
{
    public class Car
    {
        [TimingAspect]
        private void Drive()
        {
            //...
        }
    }
} 
```

最后，我希望这是多个 dll，以便我可以重用它，即：wcf。

感谢您的任何帮助...

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:28:24.560

如果它们存储在单独的 DLL 中，您可以访问它们。

我总是创建一个名为 Aspects 的 DLL 类项目。在我想要 AOP 的项目中，我添加了对该 dll 类的引用。然后像往常一样装饰你的方法/类/程序集。

[https://github.com/sharpcrafters/PostSharp-Toolkits](https://github.com/sharpcrafters/PostSharp-Toolkits) <-- 很好的例子 [http://researchaholic.com/tag/postsharp/](http://researchaholic.com/tag/postsharp/) <-- 更多例子，刚刚上传了一个例子

# c# - 将数据异步加载到数据网格视图中的最佳方法是什么？

> ID：11976418
> 
> 赞同：1
> 
> 时间：2012-08-15T20:04:56.180
> 
> 标签：c#, .net, xml, forms

此代码允许表单在加载数据之前加载，但表单上的某些组件（例如按钮和 datagridview 本身）在加载数据之前是“不可见的”。

我该如何解决这个问题？

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Thread t = new Thread(new ThreadStart(delegate()
        {
            this.Invoke(new MyDelegate(delegate()
            {               
                ReadXml(path);
                Bind();
           }));              
        }));

        t.Start();
     }

    private void Bind()
    {
        dataGridView1.DataSource = table;
    } 
```

我也有这个更好的其他代码，但需要我使用 2 个新线程。这不可能是最好的方法，不是吗？

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Thread t = new Thread(new ThreadStart(delegate()
          {
              this.Invoke(new InvokeDelegate(delegate()
              {
                  Thread t2 = new Thread(new ThreadStart(delegate()
                  {
                      ReadXml(path);
                  }));
                  t2.Start();
                  t2.Join();
                  Bind();
              }));
          }));

        t.Start();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:14:11.400

表单计时器（不是系统计时器）将在触发之前让所有其他消息处理。

只需给它一个 100-250 毫秒的间隔；在设计器中将其设置为 enabled=false；在 form_load 事件中将其设置为 enabled=true。在 timer_tick 事件中使第一行 timer.enabled = false。之后（仍在滴答事件中）加载您的网格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:06:57.417

如果您使用 BeginInvoke() 而不是 Invoke()，则委托中的代码将在当前 UI 线程上执行，但直到所有当前 UI 工作待处理完成（如当前的 Form1_Load 调用）后才会发生。Invoke 是一个同步调用，所以这就是你需要线程的原因。

```
 void Form1_Load(object sender, EventArgs e)
    {
        this.BeginInvoke(new MyDelegate(delegate()
        {
            ReadXml(path);
            Bind();
        }));
    } 
```

# php - 最简单、最快的模板方法，可能是 PDF

> ID：11976421
> 
> 赞同：2
> 
> 时间：2012-08-15T20:05:10.170
> 
> 标签：php, python, mysql, latex, cheetah

我一直在广泛寻找一个简单的解决方案来解决一个不太复杂的问题。

我在需要打印的 sql 数据库中有大量数据（例如，每个条目都有姓名、地​​址、电话号码等）。

最终打印页面上的绝大多数数据是静态的——只需要在“模板”中作为“变量”的少数字段。非常有利的是，可变数据将被放入的区域本身在位置方向和尺寸上都是固定的——因此不需要调整页面上其他静态/冗余数据的间距。

我想有某种形式的“会计”，因为打印的页面数量将达到数万，我想知道到目前为止已经打印了哪些 sql 条目。

我不想“重新发明轮子”并编写一个php前端，该前端循环遍历数组并将sql数据在呈现为pdf之前或之后存放到页面上的正确位置......

我更喜欢直接从服务器 (*nix) 打印，如果有一种方法可以做到这一点，而实际上不必渲染成千上万个单独的 pdf，我会非常热情。以今天的开源软件包，走哪条路最好？

（到目前为止，看起来如果没有简单的方法，我将需要学习 LaTeX、Cheetah 和一些 python）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T21:32:35.700

Dabo 的报表编写器是一个类似于 Crystal 的带状报表引擎，它将一组数据（例如 cur.fetchall() 的输出）和一个报表模板（xml 字符串或文件）作为输入，并输出一个 PDF 或一组 PDF （如果需要，它可以输出字节流而不是直接写入文件）。

Dabo 的主要目的是一个基于 wxPython 的桌面应用程序框架，但报告可以在 web 上完成，无需桌面交互。尽管使用包含的报表设计器确实有助于使用桌面设计报表。

[http://dabodev.com](http://dabodev.com)

会有一些安装障碍和学习曲线，但是一旦你开始了，你会发现这是一件容易的事。

# jquery - trigger() 后未给出鼠标位置

> ID：11976423
> 
> 赞同：3
> 
> 时间：2012-08-15T20:05:15.073
> 
> 标签：jquery, events, triggers

问题很简单：

```
$('#btn1').click(function(event){
    alert(
        "pageX: " + event.pageX +
        "\npageY: " + event.pageY
    );
});

$('#btn2').mouseout(function(e){
   $('#btn1').trigger('click');
}); 
```

第二个按钮提醒未定义的变量。有没有办法在传递鼠标位置时触发点击事件？

这是一个[jsfiddle](http://jsfiddle.net/6h5fd/6/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T20:10:08.017

尝试这个

```
$('#btn1').click(function(event){
    alert(
        "pageX: " + event.pageX + 
        "\npageY: " + event.pageY
    );
});

$('#btn2').click(function(e){
    $('#btn1').trigger(e);
}); 
```

只需通过`event object`承载一切的原件。

[**​演示**](http://jsfiddle.net/6h5fd/4/)。

您也可以创建一个自定义`event object`并按如下方式传递它

```
$('#btn2').click(function(e){
    var evt={
        'type':'click',
        'pageX':e.pageX,
        'pageY':e.pageY
    };
    $('#btn1').trigger(evt);
}); 
```

[**演示**](http://jsfiddle.net/6h5fd/7/)。

# arrays - 如何在 Perl 中为一组数组元素赋值？

> ID：11976424
> 
> 赞同：1
> 
> 时间：2012-08-15T20:05:23.307
> 
> 标签：arrays, perl

我想使用单行初始化一组具有相同值的数组元素。我知道我可以使用 for 循环，但我想知道是否有更简单的方法来做到这一点。

例如，我有一个零数组。我想将元素 4 到 9 初始化为 1。我会考虑做类似的事情，

```
my @array = (0) x 10;
for my $i (3 .. 8) {
    $array[$i] = 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T20:10:21.540

一种方法：

```
my @array = (0) x 3, (1) x 6, 0; 
```

另一种方法：

```
my @array = map { $_ >= 3 && $_ <= 8 ? 1 : 0 } (0 .. 9); 
```

或者，如果您的意思是您已经设置`@array`为`(0) x 10`，并且只是在寻找一个单线来将一系列值设置为`1`：

```
splice @array, 3, 6, (1) x 6; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T20:19:40.630

为什么不使用数组切片？

```
@array = (0) x 10;
@array[3..8] = (1) x 6;   # or something > 6 
```

这比 a 更容易理解，比 a`splice`更清晰`map`。

我们不提供单个索引，而是使用 list `[3..8]`。我们必须将 sigil 调整为`@`，因为我们需要一个列表上下文。

# wpf - 无法使用 Windows 自动化从上下文菜单中找到登录子菜单

> ID：11976430
> 
> 赞同：0
> 
> 时间：2012-08-15T20:05:37.473
> 
> 标签：wpf, automation, ui-automation

我正在尝试从应用程序自动登录和文件下载。我可以通过获取菜单项（在工具栏上）并展开它并选择子菜单中的“登录”菜单项来登录。我通过在“上下文”的桌面自动化元素上使用 FindFirst 获得了子菜单。在使用 FindFirst 作为登录菜单项时，我可以获得登录子窗口。当我需要“单击”工具栏上的菜单项“任务”，从“上下文”中获取子菜单并从子菜单中选择“下载文件”时，问题出现在登录后。我无法从桌面自动化元素中找到此上下文。使用检查工具，我看到上下文菜单是上下文窗口的子级，它没有父级。不应该所有的 AutomationElements/Windows 都是 Desktop AE 的子项？？？如果我模仿“鼠标点击” 在任务菜单项上，我可以使用 Win32 GetMenu 或 GetSubmenu 调用启动子菜单吗？有没有一个例子可以解释这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:36:05.053

我怀疑您是否能够自动化登录和密码提示 (Ctrl-Alt-Del)，因为 Windows 出于安全原因阻止您这样做。

# java - NetBeans 平台应用程序 - 更改安装程序生成的图标

> ID：11976434
> 
> 赞同：2
> 
> 时间：2012-08-15T20:05:47.770
> 
> 标签：java, swing, icons, netbeans-platform, branding

我开发了一个 NetBeans 平台应用程序并生成了一个 Windows 安装程序。当我安装应用程序时，桌面上有以下图标：

![在此处输入图像描述](../Images/fc5663d7025d9e012a795402c15637b2.png)

我在哪里更改项目设置中的图标？在我的 NetBeans 项目的品牌化中，我将所有 3 个应用程序图标都更改为我的图标，但我最终还是在桌面上使用了上面的那个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:16:39.327

我假设您更改了 /build/launcher/bin/.exe 文件的图标。

这很可能会被默认值覆盖。

您可以在此处手动更改默认可执行文件的图标：/harness/launchers/app.exe

结帐[http://wiki.netbeans.org/DevFaqExecutableIcon](http://wiki.netbeans.org/DevFaqExecutableIcon)

这里的文档说您可以使用第三方工具-但我从未尝试过。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-06T14:53:38.517

padde 关于[如何在 mavenized netbeans 项目上更改图标](https://stackoverflow.com/a/25302132/18356)的答案是

*   在 app.exe 和 app64.exe 上使用 ReplaceVistaIcon 应用更改（更多说明可以在[How to change icon on Netbeans Project](https://blogs.oracle.com/geertjan/entry/icons_for_netbeans_platform_applications)中找到），我只需要将 app.exe 和 app64.exe 从“NetBeans\harness\launchers\”复制到“源\主\资源\”

然后在你的 pom.xml 中：

`<build> <plugins> <plugin> <groupId>org.codehaus.mojo</groupId> <artifactId>nbm-maven-plugin</artifactId> <configuration> <brandingToken>${brandingToken}</brandingToken> <etcConfFile>src/main/resources/myconfig.conf</etcConfFile> <binDirectory>src/main/resources/binaries</binDirectory> </configuration> </plugin> </plugins> </build>`

我注意到 app.exe 和 app64.exe 的大小与 NetBeans 7.3 和 7.3.1 不同。但在 7.3.1 和 8.0.2 之间匹配。我相信我们应该使用与我们项目的 NetBeans 版本匹配的 NetBeans 版本的 app.exe。

# java - 将字符串转换为整数并在 Java 中添加它们

> ID：11976436
> 
> 赞同：1
> 
> 时间：2012-08-15T20:06:03.497
> 
> 标签：java, string, integer, type-conversion

我有 4 个字符串：

```
 str1 = 10110011;(length of all string is:32)
 str2 = 00110000;
 str3 = 01011000;
 str4 = 11110000; 
```

在我的项目中，我必须添加这些字符串，结果应该是：

```
result[1] = str1[1]+str2[1]+str3[1]+str4[1]; 
```

`result`应该作为整数的加法获得。

对于上面的例子，`result = 22341011`

我知道Java 中的**整数到字符串**的转换非常简单，但我发现**字符串到整数**的转换有点困难。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T20:07:39.680

要解析整数，请`-2^31 < n < 2^31-1`使用：

```
Integer value = Integer.valueOf("10110011"); 
```

对于较大的数字，请使用[BigInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html)类：

```
BigInteger value1 = new BigInteger("101100111011001110110011101100111011001110110011");
BigInteger value2 = // etc
BigInteger result = value1.add(value2).add(value3); //etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:10:18.143

最简单的方法是使用`Integer.parseInt(str1)`. 返回一个`int`包含由字符串表示的值。

`valueOf()`返回一个`Integer`对象，而不是`int`原语。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T20:16:46.183

因为你的数字太大了，它们不适合 int。使用[BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T13:29:01.843

我不知道您的项目以及您的实际问题是什么。但是我从您的部分信息中猜测，正如您所解释的，您有多组位表示的字符串。

```
str1 = "1000110.....11";
str1 = "1110110.....01"; etc 
```

添加这些十进制值会产生模棱两可的结果，因为整数可以是多个整数值的总和。请看下面的示例，其中总共有 5 种可能性 [具有正十进制值] 产生 6。

```
1+5 = 6;
2+4 = 6;
3+3 = 6;
4+2 = 6;
5+1 = 6; 
```

如果你以这种方式继续，你只会犯一个错误，在你的情况下没有别的。一种更好的解决方案是计算单个字符串的十进制值。无需添加（**+**）它们，只需将它们连接（**连接**）以形成单个字符串。我建议这种方法是因为，这总是给出一个唯一的值，以后您可能需要知道各个字符串的十进制值。

```
String strVal1 = String.format(computeDecimal(str1));
String strVal2 = String.format(computeDecimal(str2));
String strVal3 = String.format(computeDecimal(str3));
.
.
.
String strValn = String.format(computeDecimal(strn));

String myVal = String.concate(strVal1,strVal1,strVal1,....strValn); 
```

现在您可以按照自己的意愿对待您的字符串。

```
//This will give you a non conflicting result. 
```

比**[BigIntegers](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html)**更好地实施上述方法。

希望这对您有很大帮助。

# android - Android MODEL 和 MANUFACTURER 对于给定的设备是否是唯一的？

> ID：11976439
> 
> 赞同：1
> 
> 时间：2012-08-15T20:06:24.877
> 
> 标签：android, model, device

为了好玩，我正在创建一个包含 Android 设备及其屏幕宽度和高度的数据库。我目前正在使用以下内容作为密钥：

android.os.Build.MANUFACTURER + "-" + android.os.Build.MODEL

示例键和（实际设备）是：

*   亚马逊-Kindle Fire（Kindle Fire）
*   samsung-SGH-T679（三星展品 2）
*   华硕-Nexus 7 (谷歌 Nexus 7)
*   samsung-SCH-I800 (三星 GalaxyTab)

那是有效的密钥吗？或者多个物理设备是否可以具有相同的 MANUFACTURER 和 MODEL 值？例如，如果亚马逊发布 Kindle Fire 2，MODEL 值能否与原始版本相同？

在我看来，制造商有可能在不更改型号的情况下发布设备的新版本，但这似乎不太可能。所以也许这对于我正在尝试做的事情已经足够了。

谢谢

# jquery - 在chrome扩展中使用ajaxSuccess

> ID：11976440
> 
> 赞同：0
> 
> 时间：2012-08-15T20:06:27.673
> 
> 标签：jquery, google-chrome-extension

我很难找到在 chrome 扩展中使用 jquery ajaxSuccess 的解决方案

很简单：这是 content.js：

```
$('#message').ajaxSuccess(function (){
    alert('b');
}); 
```

和 ... ：

“权限”：[“unlimited_storage”、“通知”、“http://*/”]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:46:43.747

假设您正在进行应该触发`ajaxSuccess`事件的有效 Ajax 调用，最可能的问题是`http://*/`不是有效的主机权限[匹配模式](http://developer.chrome.com/extensions/match_patterns.html)，导致您的跨域 Ajax 请求失败。匹配所有 HTTP 页面的正确格式是`http://*/*`（不是最终`*`的），匹配所有 HTTP 和 HTTPS 页面的正确格式是`*://*/*`.

# eclipse - Tomcat6 服务器不断与 Eclipse IDE 分离

> ID：11976442
> 
> 赞同：1
> 
> 时间：2012-08-15T20:06:35.610
> 
> 标签：eclipse, tomcat6, eclipse-wtp

我正在使用 Eclipse Tomcat6 集成来测试我的 webapp。我从 Eclipse 中的“服务器”视图启动和停止我的 Tomcat 实例。但是，经常运行的 tomcat 实例似乎与“服务器”选项卡显示其已停止的集成分离。但是，一旦您尝试启动它，它就会说正在使用该地址。当我打开任务管理器时，我可以看到 eclipse 仍在运行，必须手动终止它，然后才能再次使用“服务器”视图。

我一直无法找出一种模式，但它现在经常发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:27:32.090

不知道为什么会发生这种情况，但是您可以尝试从 Eclipse 的“控制台”视图（那里的红色方形按钮）中杀死它，而不是使用服务器的视图停止按钮。

# spring - Spring Security Ldap 记得我不工作

> ID：11976444
> 
> 赞同：2
> 
> 时间：2012-08-15T20:06:46.810
> 
> 标签：spring, spring-ldap

我有一个使用 spring security 3.0 的应用程序。该应用程序使用我公司的活动目录进行登录。我从网上的示例中借用了一些代码，现在我能够成功地执行绑定。但是记住我的功能不起作用。更具体地说，我可以登录应用程序，但是当我关闭浏览器并打开应用程序时，它会再次重定向到登录页面。谁能告诉我我的配置有什么问题。

安全.xml

```
<http path-type="regex" use-expressions="true" auto-config="true">  
      <form-login 

      login-page="/Login.html" 

      login-processing-url="/j_spring_security_check" 

      default-target-url="/home.html" 

      authentication-failure-url = "/Login.html?login_error=1"        

 />

<logout logout-success-url="/Login.html" invalidate-session="true"
        delete-cookies="JSESSIONID" />

  <intercept-url pattern="\A/Login\Z" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
  <intercept-url pattern="\A/(?!Login).*\Z" access="isAuthenticated()" />

  <remember-me key="_spring_security_remember_me" token-validity-seconds="3600" user-service-ref="ldapUserDetailsService"/>

</http>

<authentication-manager alias="authenticationManager">
    <authentication-provider ref="ldapAuthProvider"/>
</authentication-manager>

<beans:bean class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider" id="ldapAuthProvider">
    <beans:constructor-arg ref="ldapBindAuthenticator"/>
    <beans:property name="userDetailsContextMapper" ref="ldapUserDetailsContextMapper"/>
</beans:bean>

<beans:bean class="org.springframework.security.ldap.DefaultSpringSecurityContextSource" id="ldapServer">
    <!-- MS Active Directory -->
    <beans:constructor-arg value="ldap://hostname/DC=myCompany,DC=com"/>
    <beans:property name="userDn" value="CN=user,OU=Users,DC=mycompany,DC=com"/>
    <beans:property name="password" value="xxxxxx"/>
</beans:bean>

<beans:bean class="org.springframework.security.ldap.authentication.BindAuthenticator" id="ldapBindAuthenticator">
    <beans:constructor-arg ref="ldapServer"/>
    <beans:property name="userSearch" ref="ldapSearchBean"/>
</beans:bean>

<beans:bean class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch" id="ldapSearchBean">

    <beans:constructor-arg value="OU=Users"/>
    <beans:constructor-arg value="(sAMAccountName={0})"/>
    <beans:constructor-arg ref="ldapServer"/>
</beans:bean>

<beans:bean class="org.springframework.security.ldap.userdetails.InetOrgPersonContextMapper" id="ldapUserDetailsContextMapper"/>

<beans:bean id="ldapUserDetailsService" class="org.springframework.security.ldap.userdetails.LdapUserDetailsService">
        <beans:constructor-arg index="0">
            <beans:ref local="ldapSearchBean" />
        </beans:constructor-arg>
    </beans:bean>   

<!-- Bean used for LDAP querying. -->
<beans:bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
    <beans:constructor-arg ref="ldapServer" />
</beans:bean>

<beans:bean class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler" id="expressionHandler"/> 
```

# java - 超类中的私有方法可以在子类中被覆盖吗？

> ID：11976446
> 
> 赞同：28
> 
> 时间：2012-08-15T20:06:51.437
> 
> 标签：java, inheritance

私有方法可以在 Java 中被覆盖吗？如果不是，那么下面的代码是如何工作的？

```
class Base{
      private void func(){
            System.out.println("In Base Class func method !!");         
      };
}

class Derived extends Base{
      public void func(){   //  Is this a Method Overriding..????        
            System.out.println("In Derived Class func method"); 
      }      
}

class InheritDemo{
      public static void main(String [] args){                      
            Derived d = new Derived();
            d.func(); 
      }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-15T20:17:57.357

不，你没有覆盖它。您可以通过尝试用 标记`@Override`或尝试拨打 来检查`super.func();`。两者都行不通；他们抛出编译器错误。

此外，检查一下：

```
类基{
      私人无效函数（）{
            System.out.println("在基础函数方法中");         
      };
      公共无效 func2() {
          System.out.println("func2");
          函数（）；
      }
}

类派生扩展基{
      public void func(){ // 这是一个覆盖方法吗？
            System.out.println("在派生类函数方法");
      }
}

类继承演示{
      公共静态无效主要（字符串[]参数）{
            派生 D = new Derived();
            D.func2();
      }
}

```

它将打印：

```
func2
In base func method 
```

当您更改`func()`为`Base`public 时，*它将*被覆盖，并且输出将更改为：

```
func2
In Derived Class func method 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-15T20:10:29.497

不，私有方法不能被覆盖，因为子类不继承其父类的私有成员。您已经为您的子类声明了一个与超类方法无关的新方法。`super.func()`一种看待它的方法是问自己在 Derived 类中编写是否合法。不可能禁止覆盖方法访问它覆盖的方法，但这正是这里的情况。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T20:10:29.920

你没有压倒一切。您不能覆盖私有成员，您只是在 Derived 中定义一个新方法。Derived 没有知识库的实现，`func()`因为它被声明为私有。在 Derived 中定义时不会出现编译器错误，`func()`但这是因为 Derived 不知道 Base 具有`func()`. 需要明确的是：说您正在覆盖 Base 的`func()`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T20:08:37.630

不它不是。您可以标记一个覆盖只是为了确保这样：

```
@Override
public void func(){
     System.out.println("In Derived Class func method"); 
} 
```

在这种情况下，这将是一个编译器错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-15T07:28:06.840

除了已经正确的答案之外，请考虑以下内容：

```
public class Private {
    static class A {
        public void doStuff() {
            System.out.println(getStuff());
        }

        private String getStuff() {
            return "A";
        }
    }

    static class B extends A {
        public String getStuff() {
            return "B";
        }
    }

    public static void main(String[] args) {
        A a = new A();
        a.doStuff();
        a = new B();
        a.doStuff();
        B b = new B();
        b.doStuff();
    }
} 
```

这将打印

> 一个
> 
> 一个
> 
> 一个

虽然`B`“覆盖” `getStuff()`。`A`的实现`doStuff()`固定为调用`A#getStuff()`，不会触发多态性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T20:13:54.310

不，因为如果您执行类似的操作，`Base b = new Derived();`您仍然无法调用 b.func()。你正在做的事情被称为“隐藏”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-25T17:50:13.497

私有方法永远不能被覆盖。它总是隐藏的。

在您的示例中 - 派生类有一个父类私有方法，并且有自己的函数**func**。两者都是不同的，并且**func**没有被覆盖。它是一个单独的独立功能。

如果在调用父类函数的父类中创建一个新函数，父类**函数**将被调用，如果使用父类引用，而不是在方法覆盖的情况下

**注意**：对象定义了它拥有的成员，引用定义了它可以访问的成员

// Method Overriding case

```
class Base{
      public void func(){
            System.out.println("Parent class");         
      };                                                                   
      public void func1(){                                                
            func();                                                             
       }                                                                        
 }

class Derived extends Base{
      public void func(){         
            System.out.println("Derived class"); 
      }      
}

class InheritDemo{
      public static void main(String [] args){                      
            Derived d = new Derived();                               
            d.func1(); // Prints Derived class                                          

            Base b = new Derived();                                    
            b.func1();                                                         // Prints Derived class - no matter parent reference is calling,as there as method is overridden - Check func1() is in parent class, but id doesn't call parent class func() as the compiler finds a func() method over ridden in derived class    

      }
}

// Method Hidding case - Private and static methods case  

class Base{
      private void func(){
            System.out.println("Parent class");         
      };                                                                   
      public void func1(){                                                
            func()                                                              
      }     
}

class Derived extends Base{
      public void func(){   //  Is this a Method Overriding..????        
            System.out.println("Derived class"); 
      }      
}

class InheritDemo{
      public static void main(String [] args){                      
            Derived d = new Derived(); 
            d.func1(); // Prints Derived class
            Base b = new Derived();
            b.func1(); 
// Prints Parent class - the reason is we are using the parent class reference, so compiler is looking for func() and it founds that there is one private class method which is available and is not over ridden, so it will call it. Caution - this won't happen if called using derived class reference.

            b.func();
// this prints the Derived class - the compiler is looking func(), as Derived class has only one func() that it is implementing, so it will call that function. 

      }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-27T00:38:52.883

基类的私有成员不能被类外的任何人访问，也不能被覆盖。派生类中的函数是一个独立的函数，可以在任何地方访问。

该代码将在派生类中运行该函数

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-09T09:30:50.323

方法隐藏将在这里发生，而不是覆盖。就像在静态的情况下会发生什么。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-05T08:39:33.000

实际上，您并没有压倒一切。Java5 之前

重写方法的返回类型必须与父类的方法匹配。

但是 Java 5 引入了一种称为协变返回类型的新工具。您可以覆盖具有相同签名的方法，但返回返回对象的子类。换句话说，子类中的方法可以返回一个对象，该对象的类型是该方法返回的类型的子类，在超类中具有相同的签名。你可以关注这个线程：[被覆盖的方法可以在返回类型上有所不同吗？](https://stackoverflow.com/questions/14694852/can-overridden-methods-differ-in-return-type)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-03T10:22:45.137

由于该方法是私有的，它对其他类不可见。因此派生类不继承此方法。所以这**不是**覆盖的情况

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-03-16T12:00:46.727

阅读以下代码片段中的注释以找到答案。

资料来源：

1.  [定义参考：](https://docs.oracle.com/javase/tutorial/java/IandI/override.html)

2.  来自“Jeanne Boyarsky”和“Scott Selikoff”一书的源代码示例（参考）的学分 - “OCA Oracle Certified Associate Java SE 8 Programmer Study Guide Exam 1Z0-808 Book”。

    ```
     public class Deer {
            public Deer() { System.out.print("Deer"); }
            public Deer(int age) { System.out.print("DeerAge"); }
            private boolean hasHorns() {  return false; }
            public static void main(String[] args) {
                Deer deer = new Reindeer(5);
                System.out.println(","+deer.hasHorns());// false is printed.
            }
        }
        class Reindeer extends Deer {
            public Reindeer(int age) { System.out.print("Reindeer"); }
            private boolean hasHorns() { return true; } // Overriding possible, but is of no use in the below context.
            // Below code is added by me for illustration purpose
            public static void main(String[] args) {
                Deer deer = new Reindeer(5);
                //Below line gives compilation error.
                //System.out.println(","+deer.hasHorns());
            }
        } 
    ```

# php - simplexml，返回具有相同标签的多个项目

> ID：11976453
> 
> 赞同：3
> 
> 时间：2012-08-15T20:07:11.553
> 
> 标签：php, xml, simplexml

我将以下 XML 文件加载到 php simplexml 中。

```
<adf>
<prospect>
<customer>
<name part="first">Bob</name>
<name part="last">Smith</name>
</customer>
</prospect>
</adf> 
```

使用

```
$customers = new SimpleXMLElement($xmlstring); 
```

这将返回“Bob”，但我如何返回姓氏？

```
echo $customers->prospect[0]->customer->contact->name; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T20:09:29.543

您可以`<name>`使用数组样式的语法按编号访问不同的元素。

```
$names = $customers->prospect[0]->customer->name;

echo $names[0]; // Bob
echo $names[1]; // Smith 
```

事实上，你*已经*`<prospect>`在为元素做这件事了！

另请参阅手册中的[*Basic SimpleXML Usage*](http://php.net/simplexml.examples-basic)。

* * *

如果您想根据某些标准选择元素，那么[*XPath*](http://www.w3.org/TR/xpath/)就是要使用的工具。

```
$customer   = $customers->prospect[0]->customer;
$last_names = $customer->xpath('name[@part="last"]'); // always returns an array
echo $last_names[0]; // Smith 
```

# android - Sencha Touch 2 在 Android 中加载失败

> ID：11976454
> 
> 赞同：0
> 
> 时间：2012-08-15T20:07:13.603
> 
> 标签：android, sencha-touch-2

我在 Eclipse 中有适用于 android 的 Sencha Touch 应用程序，当我使用 4.1.1 在移动设备上启动该应用程序时，它的工作正常，当我在 4.0.4 上启动它时，我得到一个白色的空白屏幕和错误：

> [Ext.Loader] 加载{文件名}失败，请验证文件是否存在于sencha-touch-all

对于我所有的 js 文件（视图、模型和其他......）

该项目为Android 2.3.3构建..我无法弄清楚问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:30:14.550

我刚刚在 app.js 的前 2 行中添加了以下行：

```
Ext.Loader.setConfig({disableCaching:false});
Ext.Ajax.setDisableCaching(false); 
```

问题解决了！

# java - 振动按钮使android应用程序强制关闭

> ID：11976458
> 
> 赞同：1
> 
> 时间：2012-08-15T20:07:29.807
> 
> 标签：java, android, forceclose, vibration

我只是制作了一个简单的应用程序，当单击按钮时会振动，但由于某种原因，当我单击按钮时，应用程序说它意外停止并需要强制关闭，下面是主 java 文件的源代码，我用过我的清单中的 android 振动权限。有人能告诉我为什么每次我点击振动按钮时都会出现意外停止的错误吗？

```
package com.test;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Vibrator;
import android.view.View;
import android.widget.EditText;

public class Main extends Activity {

public final static String EXTRA_MESSAGE = "com.test.MESSAGE";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

/* Called when the user clicks the button */
public void sendMessage(View view) {
    // do something in response to button
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
}

public void vibrateMe() {

    Vibrator vibrate = (Vibrator)getSystemService(Context.VIBRATOR_SERVICE);

    vibrate.vibrate(500);

}

public void stopVibrating(Vibrator vibrate) {

        vibrate.cancel();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:50:04.980

如果你使用，你必须改变你`vibrateMe()`的`vibrateMe(View v)``android:onClick="vibrateMe"`

> 例如，如果您指定 android:onClick="sayHello"，则必须声明您的上下文（通常是您的 Activity）的 public void sayHello(View v) 方法。

[检查开发者页面](http://developer.android.com/reference/android/view/View.html#attr_android%3aonClick)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:11:28.107

公共无效停止振动（振动器振动）{

```
 vibrate.cancel();
} 
```

删除它，然后检查。

# java - JavaFX2.2不是所有的表列都用PropertyValueFactory显示数据？

> ID：11976461
> 
> 赞同：0
> 
> 时间：2012-08-15T20:07:40.193
> 
> 标签：java, javafx-2, tablecolumn

大家晚上好，

我今天偶然发现了一个相当奇怪的问题，我不知道我做错了什么。这是关于使用 PropertyValueFactory 绑定表列。我在 FXML 中创建了表格视图和表格列，并使用 Scene Builder 设置了适当的 fx:id。

现在的问题是某些列显示了预期的数据，而其他列只是空的。当用户按下按钮时，我使用以下代码将项目添加到表视图中：

```
ObservableList<User> olUsers = DA_User.getUsers();
tbl_MC_Manage_Users.getItems().addAll(olUsers); 
```

我确定 olUsers 中的用户对象包含所需的所有数据（使用 for 循环和 System.out.println 对其进行了测试）

我得到这样的结果：（<text> 表示列标题）

```
<disabled>   <username>    <title>    <lastname>    <firstname>   <address>   <zip>    <city>
false        (empty)       Mr.        (empty)       (empty)       address1    (empty)  city1
false        (empty)       Miss       (empty)       (empty)       address2    (empty)  city2 
```

所以由于某种原因，列用户名、姓氏、名字、zip 没有显示任何数据......

控制器的一些部分：

```
//declaration (these are the fx:id's connected to my table colums)
@FXML private TableView<User> tbl_MC_Manage_Users;
@FXML private TableColumn<User,Boolean> tc_MC_Manage_Disabled;
@FXML private TableColumn<User,String> tc_MC_Manage_Username;
@FXML private TableColumn<User,String> tc_MC_Manage_Title;
@FXML private TableColumn<User,String> tc_MC_Manage_Lastname;
@FXML private TableColumn<User,String> tc_MC_Manage_Firstname;
@FXML private TableColumn<User,String> tc_MC_Manage_Address;
@FXML private TableColumn<User,String> tc_MC_Manage_ZipCode;
@FXML private TableColumn<User,String> tc_MC_Manage_City;

@Override
public void initialize(URL url, ResourceBundle rb) {
...
//setting the binding on the table columns at initialize();
    tc_MC_Manage_Disabled.setCellValueFactory(new PropertyValueFactory<User, Boolean>("disabled"));
    tc_MC_Manage_Username.setCellValueFactory(new PropertyValueFactory<User, String>("username"));
    tc_MC_Manage_Title.setCellValueFactory(new PropertyValueFactory<User, String>("title")); 
    tc_MC_Manage_Firstname.setCellValueFactory(new PropertyValueFactory<User, String>("firstname"));
    tc_MC_Manage_Lastname.setCellValueFactory(new PropertyValueFactory<User, String>("lastname"));  
    tc_MC_Manage_Address.setCellValueFactory(new PropertyValueFactory<User, String>("address"));
    tc_MC_Manage_ZipCode.setCellValueFactory(new PropertyValueFactory<User, String>("zipcode")); 
    tc_MC_Manage_City.setCellValueFactory(new PropertyValueFactory<User, String>("city"));
...
} 
```

这是 User 类的一些部分

```
private SimpleBooleanProperty disabled = new SimpleBooleanProperty();
private SimpleStringProperty username = new SimpleStringProperty("");
private SimpleStringProperty title = new SimpleStringProperty("");
private SimpleStringProperty lastname = new SimpleStringProperty("");
private SimpleStringProperty firstname = new SimpleStringProperty("");
//... (same for the others)

//getters
public boolean isDisabled() { return disabled.get(); }
public String getTitle() { return title.get(); }
public String getUsername() { return username.get(); }
public String getLastName() { return lastname.get(); }
public String getFirstName() { return firstname.get(); }
//... (same for the others)

//setters
public void setDisabled(boolean value) { disabled.set(value); }
public void setUsername(String value) { username.set(value); }
public void setTitle(String value) { title.set(value); }
public void setLastName(String value) { lastname.set(value); }
public void setFirstName(String value) { firstname.set(value); }  
//... (same for the others) 
```

对不起代码负载，但我真的不明白为什么只有几列正在获取他们的数据。我希望有人能指出我正确的方向:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:33:15.117

如果你的 setter 被命名`getFirstName`，那么属性是`firstName`大写的“N”。接下来试试：

```
tc_MC_Manage_Disabled.setCellValueFactory(new PropertyValueFactory<User, Boolean>("disabled"));
tc_MC_Manage_Username.setCellValueFactory(new PropertyValueFactory<User, String>("userName"));
tc_MC_Manage_Title.setCellValueFactory(new PropertyValueFactory<User, String>("title")); 
tc_MC_Manage_Firstname.setCellValueFactory(new PropertyValueFactory<User, String>("firstName"));
tc_MC_Manage_Lastname.setCellValueFactory(new PropertyValueFactory<User, String>("lastName"));  
tc_MC_Manage_Address.setCellValueFactory(new PropertyValueFactory<User, String>("address"));
tc_MC_Manage_ZipCode.setCellValueFactory(new PropertyValueFactory<User, String>("zipCode")); 
tc_MC_Manage_City.setCellValueFactory(new PropertyValueFactory<User, String>("city")); 
```

另外，我建议您在类中添加`property`方法`User`：

```
public StringProperty titleProperty() { return title; }; // etc 
```

它将允许您的表反映数据更改。[请参阅绑定 JavaFX 2 TableView 元素](https://stackoverflow.com/questions/10692654/binding-javafx-2-tableview-elements/11017471#11017471)的第二部分

# objective-c - 如何在 Objective-C 中设置 CAShapeLayer 透明？

> ID：11976463
> 
> 赞同：2
> 
> 时间：2012-08-15T20:07:45.633
> 
> 标签：objective-c, ios, uibutton, cashapelayer

我正在尝试在 UIButton 上设置嵌入阴影，感谢其他 SO 帖子，我已经设法做到了：

```
 UIBezierPath *buttonPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds cornerRadius:self.layer.cornerRadius];

        CAShapeLayer* shadowLayer = [CAShapeLayer layer];
        //shadowLayer.cornerRadius = 8.0f;
        [shadowLayer setOpacity:1];
        //[shadowLayer setBackgroundColor:UIColor.redColor.CGColor]; //not working

        // Standard shadow stuff
        [shadowLayer setShadowOpacity:1.0f];
        [shadowLayer setShadowColor:[[UIColor colorWithWhite:1 alpha:1] CGColor]];
        [shadowLayer setShadowOffset:CGSizeMake(2.0f, 2.0f)];
        [shadowLayer setShadowRadius:5];
        // Causes the inner region in this example to NOT be filled.
        [shadowLayer setFillRule:kCAFillRuleEvenOdd];

        // Create the larger rectangle path.
        CGMutablePathRef path = CGPathCreateMutable();
        CGPathAddRect(path, NULL, CGRectInset(self.bounds, -42.0f, -42.0f));
        // Add the inner path so it's subtracted from the outer path.
        CGPathAddPath(path, NULL, buttonPath.CGPath);
        CGPathCloseSubpath(path);

        [shadowLayer setPath:path];
        CGPathRelease(path);

        [self.layer addSublayer:shadowLayer]; 
```

我确实得到了一个漂亮的白色内阴影，但是 shadowLayer 添加了一个黑色不透明矩形（阴影路径）。

尝试过`[shadowLayer setFillColor:UIColor.clearColor.CGColor];`，但它也消除了阴影。也`[shadowLayer setBackgroundColor:UIColor.redColor.CGColor];`无所作为。

![例子](../Images/32ee6aeed219f15938c74cfc0e76451b.png)

我怎样才能摆脱它？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:39:47.770

添加`[self.layer setMasksToBounds:YES];`解决了问题！

# java - 从按钮菜单选项返回一个值

> ID：11976468
> 
> 赞同：0
> 
> 时间：2012-08-15T20:08:14.703
> 
> 标签：java, swing, jbutton

我投降，我举起白旗，跪下乞求帮助。驱使我这样做的问题如下。

我需要编写一个调用返回 char 值的子方法的方法。子菜单需要是GUI界面。但它不能是一个对话框。然后主方法需要使用此信息来调用所需的方法。

谁能帮我解决这个问题？简单的代码示例会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:14:56.627

在不确切知道您在寻找什么的情况下，我猜您可以在 StackOverflow 的 Swing 部分中很快找到它：[https ://stackoverflow.com/questions/tagged/swing](https://stackoverflow.com/questions/tagged/swing)

问题和答案中都有很多[sscce](http://sscce.org/)，它们将为您提供创建 GUI 的起点（我认为这是您目前的症结所在）。

有了这个假设，这里有一些代码可以帮助您入门 - 这将为您创建一个框架和一个内容面板。其他组件将倾向于扩展[JComponent](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html)对象（如[JButton](http://docs.oracle.com/javase/6/docs/api/javax/swing/JButton.html)、[JLabel](http://docs.oracle.com/javase/6/docs/api/javax/swing/JLabel.html)和[JTextField](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextField.html)）。[JavaDocs](http://docs.oracle.com/javase/6/docs/api/index.html)是一个很好的浏览项目（在“框架”模式下最容易）以获取有关 Java 和 Swing 的更多信息。

```
import javax.swing.*;

public class MainPanel extends Box{

    public MainPanel(){
        super(BoxLayout.Y_AXIS);
        // Add other elements to your box using:
        // add(item to add);
    }

    public static void main(String[] args){
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new MainPanel());
        frame.pack();
        frame.setSize(400, 300);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

# xampp - 如何更改 XAMPP 的默认请求 URL，即 localhost:80/xampp

> ID：11976473
> 
> 赞同：2
> 
> 时间：2012-08-15T20:08:31.653
> 
> 标签：xampp

我在 Windows 7 上安装了 XAMPP，Apache 没有运行，因为端口 80 没有发布。我在“httpd”（C:\xampp\apache\conf）中将其更改为 81，现在它可以工作了。问题是每次 xampp 控制面板打开 localhost:80/xampp 然后我必须手动将其更改为 localhost:81/xampp。请指导我，我必须在哪里进行更改以使默认请求 URL localhost:81/xampp ？我是一个初学者，没有通过随机搜索获得帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T00:55:28.400

我相信这是在菜单链接的 xampp/index.php 文件中，如果您知道 php 和 html，这应该很容易做到。如果您不这样做，请访问[http://w3schools.com](http://w3schools.com)以了解 html 和 php。希望这可以帮助 ;-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:25:29.317

右键单击任务栏中的xampp图标

点击显示/隐藏

单击 apache 字段中的 config 选择 apache (httpd.conf)

编辑行

```
#Listen 0.0.0.0:80
#Listen [::]:80
Listen 80 
```

将“80”更改为您希望 apache 使用的端口

保存文件，按“开始” apache

# .htaccess - 子域到页面的 htaccess 重写规则

> ID：11976475
> 
> 赞同：3
> 
> 时间：2012-08-15T20:08:33.480
> 
> 标签：.htaccess, rewrite, subdomain, rule

目前我有一个页面位于：

```
http://www.example.com/site/page 
```

在我的 htaccess 中，我有当前规则：

```
RewriteRule ^site/(.*)$ retailer.php?linklabel=$1 [QSA] 
```

如果该页面的 URL 成为它自己的子域，规则会是什么样子：

```
http://page.example.com 
```

谢谢你的帮助！！

到目前为止，我已经尝试了以下没有奏效的规则：

```
RewriteRule http://(.*)$.example.com retailer.php?linklabel=$1 [QSA] 
```

也许我需要先在 cpanel 中做一些关于通配符子域的事情？我不太确定...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:21:15.590

尝试：

```
RewriteCond %{HTTP_HOST} !^www.[NC]
RewriteCond %{HTTP_HOST} ^(.+?)\.example.com$ [NC]
RewriteRule ^$ retailer.php?linklabel=%1 [L,QSA] 
```

您无法与 a 中的主机匹配`RewriteRule`，因此您需要针对 a 中的`%{HTTP_HOST}`var 进行匹配`RewriteCond`，然后使用**`%1`**反向引用来获得该匹配。

这目前只会与完全匹配的 URI 匹配`/`。`http://page.example.com/something`因此，除非您将正则表达式更改为 from `^$`to ，否则它不会匹配`^something$`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:22:09.770

试试这个：

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST} ^(.*)\.example\.com$ [NC]
RewriteRule .* retailer.php?linklabel=%1 [L,QSA] 
```

# javascript - jQuery检查复选框是否被选中，然后将值添加到输入字段

> ID：11976476
> 
> 赞同：5
> 
> 时间：2012-08-15T20:08:34.020
> 
> 标签：javascript, jquery, forms, input, checkbox

我有一个购物车结帐页面，我正在尝试添加一个“礼物”选项。需要做什么：一旦选中“将订单作为礼物发送”复选框，需要为隐藏的输入字段分配一个值，以便将信息移动到确认页面和各种收据上。

HTML：

```
<h3>Send Order As Gift</h3>
<ul>
    <li class="fc_row fc_gift"><label for="gift" class="fc_pre">This is a gift, 
    please do not include a receipt.</label>
    <input type="checkbox" name="gift" id="gift" class="checkbox" value="" />
    <input type="hidden" name="Gift" id="gift-true" value="" /></li>
    <script type="text/javascript">
    $(document).ready(function(){
        $("#gift-true").input( $('#edit-checkbox-id').is(':checked').val() + "Yes"); 
    });​                
    </script>
    </li>
    <li class="fc_row fc_gift_message"><label for="Gift Message">Include a message 
    (limit 100 characters):</label>
    <textarea name="Gift Message" cols="50" rows="3" maxlength="100"></textarea>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T20:18:38.707

每当复选框更改时，您都必须更新隐藏字段：

```
$(function(){
    $('#gift').change(function() {
        $("#gift-true").val(($(this).is(':checked')) ? "yes" : "no");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:12:25.237

使用[jQuery`.val()`](http://api.jquery.com/val/)设置输入元素的值。[jquery`.is()`](http://api.jquery.com/is/)返回一个布尔值，因此您必须检查它是否是`true`（使用如下`if`语句或三元运算符），然后有条件地更新该值。Also, you should update this value [whenever the box is selected/unselected](http://api.jquery.com/change/) :

```
$(document).ready(function(){
    $('#edit-checkbox-id').change(function() {
        $("#gift-true").val( this.checked ? "Yes" : "" );
    }
});​ 
```

此外，如果您的复选框是：

```
<input type="checkbox" name="gift" id="gift" class="checkbox" value="" /> 
```

合适的 id-selector 是`$('#gift')`, 不是~~`$('#edit-checkbox-id')`~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:16:22.380

`$('#edit-checkbox-id').is(':checked')`根据复选框状态返回布尔值 true/false。因此，您应该将其用作条件并决定使用`val`jQuery 方法设置值的内容。试试这个。

```
$("#gift-true").val( $('#edit-checkbox-id').is(':checked') ? "Yes": "No" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T20:26:11.773

例如，您可以使用 CSS 伪类：

```
var checked=$('input[id="#gift-true"]:checked').length;
var isTrue=false;
if(checked)
    isTrue=true;
else
    isTrue=false; 
```

# sql - 用于从数据库中删除文件的 SQL Server 脚本

> ID：11976479
> 
> 赞同：0
> 
> 时间：2012-08-15T20:08:44.790
> 
> 标签：sql, sql-scripts

我需要删除包含一堆文件的表的所有行。由于行数和文件大小，执行简单`DELETE FROM`操作或多或少会锁定计算机。我正在寻找一个可以在不锁定我的计算机的情况下完成此任务的 SQL 脚本，任何人都可以为我指出正确的方向吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:11:58.420

你试过了吗`TRUNCATE`- 这将删除所有内容。

```
TRUNCATE TABLE yourTable 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms177570.aspx)

> TRUNCATE TABLE 类似于没有 WHERE 子句的 DELETE 语句；但是，TRUNCATE TABLE 速度更快，使用的系统和事务日志资源更少。
> 
> 与 DELETE 语句相比，TRUNCATE TABLE 具有以下优点：
> 
> 使用较少的事务日志空间。
> 
> DELETE 语句一次删除一个行，并在事务日志中为每个删除的行记录一个条目。TRUNCATE TABLE 通过解除分配用于存储表数据的数据页来移除数据，并且仅在事务日志中记录页解除分配。
> 
> 通常使用较少的锁。
> 
> 当使用行锁执行 DELETE 语句时，表中的每一行都被锁定以进行删除。TRUNCATE TABLE 总是锁定表和页，但不是每一行。
> 
> 无一例外，零页留在表中。
> 
> 执行 DELETE 语句后，表仍然可以包含空页。例如，如果没有排他 (LCK_M_X) 表锁，就无法释放堆中的空页。如果删除操作不使用表锁，则表（堆）将包含许多空页。对于索引，删除操作可能会留下空页面，尽管这些页面将通过后台清理进程快速释放。

# linux - 命令行配置 TTY 设备

> ID：11976488
> 
> 赞同：2
> 
> 时间：2012-08-15T20:09:20.553
> 
> 标签：linux, serial-port, tty, termios

我目前的任务是将一些 16550 兼容芯片的驱动程序从 QNX 移植到 Linux。该芯片提供了几个 UART，每个都被视为标准的 16550 串行端口，尽管有一些扩展。

现在，在 QNX 中，整个设备驱动程序被打包到一个独立的可执行文件中，它既作为驱动程序又作为提供的 UART（波特率、环回模式等）的初始配置器。这在 QNX 中很自然，因为有设备驱动程序在用户空间中运行，只不过是标准的可执行文件。

在 Linux OTOH 上，驱动程序现在被实现为内核模块，可以随意加载。此外，该模块是由生产者提供的，所以我不想对其进行太多修改或修补。

对我来说，剩下的任务是提供一些机制来设置这些 UART 的参数。它们被视为 /dev/ttyPREFIXX 设备。我打算通过在感兴趣的串行端口上调用标准 termios（即 tcsetattr() 或 ioctls）的标准 C 编程可执行文件来做到这一点。

这让我想到了一个问题：我的方法对吗？而且，如果是，那么如何实现持久配置？据我所知（从这个例子：[http](http://www.easysw.com/~mike/serial/serial.html) ://www.easysw.com/~mike/serial/serial.html ），termios 函数作用于 OPEN 设备。简而言之：他们打开设备，设置参数，读取或写入，然后关闭端口。关闭端口后，配置（波特率等）是否丢失？我希望它不是，因为它已经存储在硬件中。

有人可以向我确认配置是持久的吗？并且，如果没有，如何为将来会再次打开该端口并期望它带有一些预先建立的参数的应用程序实现这种持久性？如果不是，我是否应该修改模块内核以接受一些参数，然后在加载时进行配置？

我现在打算的方法是编写打开端口的 C 可执行文件，设置它们的配置，然后关闭端口。我希望后面的应用程序会看到具有所需配置的端口。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:53:22.887

你可能想看看`stty`and `setserial`。古老的[Serial-HOWTO](http://tldp.org/HOWTO/Serial-HOWTO.html)（哇，我最后一次向任何人推荐 HOWTO 是什么时候？）可能也是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T19:10:40.267

好吧，我在这里找到了答案：[http ://www.gnu.org/software/libc/manual/html_node/Mode-Functions.html#Mode-Functions](http://www.gnu.org/software/libc/manual/html_node/Mode-Functions.html#Mode-Functions)

引用：“虽然 tcgetattr 和 tcsetattr 使用文件描述符指定终端设备，但属性是终端设备本身的属性，而不是文件描述符的属性。这意味着更改终端属性的效果是持久的；如果另一个进程打开终端稍后，它会看到更改的属性，即使它与您最初在更改属性时指定的打开文件描述符没有任何关系。”

这解决了这个问题。

# php - 这段 PHP 代码究竟做了什么？system("php ./somescript.php $something >/dev/null &");

> ID：11976490
> 
> 赞同：0
> 
> 时间：2012-08-15T20:09:27.380
> 
> 标签：php

`system("php ./somescript.php $something >/dev/null &");`

我是 PHP 新手，我正在破译别人的代码，但不知道这段代码在做什么。我查看了[此处](http://php.net/manual/en/function.system.php)`system`的文档，所以我知道它将执行 PHP 脚本，这是传递给该脚本的参数……但在那之后我迷路了。`somescript.php``$something`

另外，脚本的哪一部分`$something`被传递给了？它如何知道`somescript.php`首先调用哪个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:13:42.930

您是正确的，它执行`$something`作为参数传递的脚本。这`> /dev/null`只是将输出输送到黑洞（即抑制它）。该`&`部件在后台启动脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:16:54.640

```
system("php ./somescript.php $something >/dev/null &"); 
```

可以拆分为：

```
system( 
```

这是在shell中执行命令的php函数

```
system("php 
```

我们要求`php`运行命令行解释器

```
system("php ./ 
```

我们要求解释器使用`./`

```
system("php ./somescript.php 
```

我们是说要在其中执行的 php 文件`somescript.php`

```
system("php ./somescript.php $something 
```

我们将`$something`其作为脚本中的一个变量`system()`作为参数传递给脚本`somescript.php`

```
system("php ./somescript.php $something >/dev/null 
```

我们说输出应该被发送到`/dev/null`..这基本上意味着不要在屏幕上打印任何输出。`>`是重定向命令。所以`> /dev/null`意味着将输出重定向到 /dev/null ，这就像“空设备”的别名，或者只是..nothing。

```
system("php ./somescript.php $something >/dev/null &"); 
```

最后，我们要求脚本在后台运行，`&`这意味着一旦脚本启动，控制权就会返回给 shell

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T20:16:48.777

它基本上是运行`./somescript.php`程序，`$something`作为命令行参数。

它通过将输出路由到`null`设备来显式忽略输出。

它在自己的外壳中运行它并且不等待它完成（这是最后的`&`一点）。

我假设这`somescript.php`是一个运行某种后台任务的程序。运行可能需要一些时间，但是您的主程序不需要知道该任务的结果，因此不需要等待它完成。

[编辑]

`$something`作为命令行参数传递给程序。从命令行调用 PHP 时，参数将填充到`$argv`数组中。

有关更多信息，请参阅 PHP 手册：

*   [http://php.net/manual/en/reserved.variables.argv.php](http://php.net/manual/en/reserved.variables.argv.php)
*   [http://php.net/manual/en/features.commandline.php](http://php.net/manual/en/features.commandline.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T20:19:34.580

1 - `system`：[执行外部程序](http://nl3.php.net/manual/en/function.system.php) 2 `PHP`
- `php ./somescript.php $something`：[`PHP cli`执行](http://php.net/manual/en/features.commandline.php)一个调用的脚本`./somescript.php`，其中一个参数是`$something`。
3 - `>/dev/null`: 重定向`stdout`到`/dev/null`这意味着您不会看到标准输出，但您仍然会看到`stderr`. [有关输出重定向的更多信息](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)。那纯粹`UNIX`是无关的`PHP`。
4 - `&`：在后台发送命令，这样就`PHP`可以继续执行，而不必等待外部程序完成。再一次，纯粹的，与本身`UNIX`无关。[更多信息](https://stackoverflow.com/questions/4525188/linux-running-process-background)。`PHP`

# joomla - Joomla 1.5 外部链接中的用户名

> ID：11976493
> 
> 赞同：1
> 
> 时间：2012-08-15T20:09:37.337
> 
> 标签：joomla, external, joomla1.5

```
http://webchat.quakenet.org/?nick=**insertnickhere**&channels=test&uio=d4 
```

嗨，我想在我的 Joomla 菜单上使用这个外部链接。但是我想使用登录用户的实际用户名，而不是 insertnickhere。因此，当用户单击链接时，它会分配用户名。

我试图插入*{$user->username}* 但它只携带*{$user->username}*，所以它没有工作。

编辑：我将此链接作为外部链接插入到我的 Joomla 菜单，以便每个用户都可以使用他的用户名加入这个 irc 网络聊天。这是来自 quakenet irc webchat 的预制链接，我将静态昵称变量更改为*{$user->username}*，以便登录用户的用户名被转移到此链接。

任何想法或建议我如何得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:14:20.107

首先获取用户对象：

```
<?php $user = & JFactory::getUser(); ?> 
```

然后在 url 中回显用户名：

```
<a href="http://webchat.quakenet.org/?nick=<?php echo $user->username;?>&channels=test&uio=d4">link</a> 
```

# ios - 如何添加阴影，核心图形

> ID：11976495
> 
> 赞同：0
> 
> 时间：2012-08-15T20:09:44.847
> 
> 标签：ios, core-graphics

下面是我想在核心图形中绘制的标志。

![在此处输入图像描述](../Images/22df8987bd2f8ffcc81447776b8d997c.png)

我要做的是：

```
Flag.m
- (void)drawRect:(CGRect)rect {

    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 1.0);

    CGContextMoveToPoint    (context, 20, 10);
    CGContextAddLineToPoint (context, 50, 10);
    CGContextAddLineToPoint (context, 50, 90);
    CGContextAddLineToPoint (context, 45, 90);
    CGContextAddLineToPoint (context, 45, 95);
    CGContextAddLineToPoint (context, 40, 92);
    CGContextAddLineToPoint (context, 35, 90);
    CGContextAddLineToPoint (context, 30, 92);  
    CGContextAddLineToPoint (context, 25, 95);
    CGContextAddLineToPoint (context, 25, 90); 
    CGContextAddLineToPoint (context, 20, 90);  
    CGContextAddLineToPoint (context, 20, 10);    

    CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);
    CGContextFillPath(context);

} 
```

我要结束的是下面

![在此处输入图像描述](../Images/525dbc40360d2f562ad494c89036eadb.png)

我的问题 ：

如何添加阴影，使我的旗帜看起来像是在尾部折叠和卷曲（如上面的红旗）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:01:02.380

这是一个相对简化的版本。我注释掉了一些要点，将其分为两部分。首先绘制尾部。然后，主色带在上面绘制。一个漂亮的阴影效果可以用`[UIColor colorWithWhite:0.0 alpha:0.4]`

如果你想变得更漂亮一点，你可以将主要区域的底部几个点绘制为另一个带有渐变的矩形。确保在绘制最后一个矩形之前关闭阴影。

```
/*CGContextMoveToPoint    (context, 20, 10);
CGContextAddLineToPoint (context, 50, 10);*/
CGContextMoveToPoint    (context, 48, 85);
CGContextAddLineToPoint (context, 48, 90);
CGContextAddLineToPoint (context, 45, 90);
CGContextAddLineToPoint (context, 45, 95);
CGContextAddLineToPoint (context, 40, 92);
CGContextAddLineToPoint (context, 35, 90);
CGContextAddLineToPoint (context, 30, 92);
CGContextAddLineToPoint (context, 25, 95);
CGContextAddLineToPoint (context, 25, 90);
CGContextAddLineToPoint (context, 22, 90);
CGContextAddLineToPoint (context, 22, 85);
//CGContextAddLineToPoint (context, 20, 10);
CGContextSetShadowWithColor(context, CGSizeMake(0, 5.), 3., [UIColor colorWithWhite:0 alpha:.4].CGColor);
CGContextSetFillColorWithColor(context, [UIColor colorWithWhite:.95 alpha:1].CGColor);
CGContextFillPath(context);
CGContextSetShadowWithColor(context, CGSizeMake(0, 2.), 1.5, [UIColor colorWithWhite:0 alpha:.3].CGColor);
CGContextMoveToPoint    (context, 20, 88);
CGContextAddLineToPoint (context, 20, 10);
CGContextAddLineToPoint (context, 50, 10);
CGContextAddLineToPoint (context, 50, 88);
CGContextFillPath(context); 
```

# python - 在脚本持续时间内使用相同的日志目录

> ID：11976498
> 
> 赞同：0
> 
> 时间：2012-08-15T20:09:57.203
> 
> 标签：python, logging

我的计划是每当运行脚本时，获取当前时间并为我生成的日志文件创建一个文件夹。脚本的每一步都会在此文件夹中创建一个新的日志文件。

问题是，我试图弄清楚如何在脚本期间使用同一个文件夹。现在发生的事情是每次创建记录器时都会获取当前时间，每次都创建一个新文件夹。

这是模块的样子：

```
logger.py

...

CURRENT_TIME = # get current time
LOG_FOLDER = "logs/%s/" % CURRENT_TIME

...

def get_logger(name):
    # Create a log file with the given name in the LOG_FOLDER 
```

每次我`import logger.py`重新计算时会发生什么`CURRENT_TIME`。我想避免这种情况的方法是`from logger.py import *`为所有模块执行一次代码，使它们具有相同的日志文件夹。

主要问题是脚本调用其他**python**脚本，产生新进程等。当这些新进程导入 logger 时，它们还没有导入它，所以它们将重新生成`CURRENT_TIME`.

那么有什么好的方法来解决这个问题呢？我想到的一种解决方案是让记录器使用一个名为的常量文件夹`temp`，并在主脚本完成时将其重命名为当前时间（或将当前时间存储在脚本的开头）。我真的不喜欢这个解决方案，好像有异常或错误并且脚本死了，`temp`当我希望它成为脚本的时间时，该文件夹将保留，所以我知道它何时失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:32:01.783

更好的方法是在应用程序启动时实现[`RotatingFileHandler`](http://docs.python.org/library/logging.handlers#rotatingfilehandler)并执行`doRollover()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:28:40.533

经典的解决方案是使用将在您的进程和所有子进程之间共享的环境变量。

演示（另存为x.py，警告：将一遍又一遍地调用自己）：

```
import os
import random
from subprocess import call

def get_logger():
    return os.environ.setdefault("LOG_DIR", logger_name())

def logger_name(): return "log" + str(random.random())

print "Process " + str(os.getpid()) + " uses " + get_logger()

call(["python",  "x.py"]) 
```

参考：[os.environ](http://docs.python.org/library/os#os.environ) docs，环境变量[的概念](http://en.wikipedia.org/wiki/Environment_variable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:31:25.837

当您第一次启动脚本时，将 starttime 写入 temp 目录中的文件。

当记录器运行时，它会在临时目录中的文件中查找时间值。

如果您的脚本崩溃了，那么当您再次启动主脚本时，它将替换以前的值，因此此运行的日志将位于正确的位置。

您甚至可以让清理脚本从临时目录中删除开始时间。

# logging - 如何在 Heroku 上为 Padrino 应用程序启用日志记录？

> ID：11976499
> 
> 赞同：3
> 
> 时间：2012-08-15T20:09:56.877
> 
> 标签：logging, heroku, padrino

帮帮我；我一定错过了一些非常明显的东西。

我有一个在 Heroku 上运行的 Padrino 应用程序。在 boot.rb 中，在传递给 的块中`Padrino.before_load`，我有以下几行：

```
Padrino::Logger::Config[:production][:log_level] = :info
Padrino::Logger::Config[:production][:stream] = :stdout 
```

在 app.rb的`before`块中，我到处都有调用`logger.info`。

这在我的开发机器上记录到标准输出就好了。但是当我检查我的 Heroku 日志时：

```
heroku logs -t -s app 
```

...我什么也没看到（只有瘦服务器的最初 3 行启动信息）。

我错过了什么？

* * *

针对[culix](https://stackoverflow.com/a/12187699/105570)的一些澄清：

1.  在应用程序启动后切换到`heroku logs -s app`对我来说没有任何改变。
2.  我尝试安装[Papertrail](https://papertrailapp.com/)。这实际上看起来相当不错！但它仍然没有我正在寻找的日志消息。
3.  这是个好问题！我真的*只是*在`logger.info`街区里`before`打了电话。完成更新此问题后，我将添加更多日志记录并回来查看。
4.  现在您问：当我切换到在“生产”中运行时（在将 database.rb 更改为仅指向开发数据库之后），我的应用程序似乎也没有记录任何内容。**我认为这意味着我只是从根本上错误地配置了 Padrino 日志记录。**感谢您提出这个问题！
5.  最新的 boot.rb 已提交。
6.  不——不（故意）以任何方式弄乱标准输出。

显然，我应该花时间调查的第一件事是上面的#4；这就是我现在要做的。然后，如果它没有产生任何结果，请转到＃3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T23:06:12.260

这里有一些简单的问题，只是为了确保我们已经涵盖了基础知识：

1.  您是`heroku logs -t`在应用启动之前还是之后运行？如果您直到之后才运行它，那么放下`-t`开关并运行会`heroku logs -s app`显示什么吗？

2.  您的应用程序中添加了任何[syslog 排水插件吗？](http://addons.heroku.com/)如果是这样，他们会显示什么吗？如果没有，请尝试添加一个并再次运行您的应用程序 - 是否有任何日志详细信息显示在排水管中？

3.  部署到 heroku 后，如果您访问应用程序的网站并运行应用程序的页面，是否任何其他活动的输出会显示在日志或系统日志中？即，您是否能够确认这是否是您的应用程序在 heroku 的服务器上运行时的所有日志记录问题，而不是仅记录该`before`部分中的内容的问题？

4.  在您的本地机器上运行时，您的应用程序是否仍会登录到`:production`，还是会登录到其他地方？即您的应用程序在本地执行与在heroku 机器上运行时相同的操作吗？您部署的应用程序是否以某种方式设置为作为不同的 Padrino 日志记录环境运行？

5.  您的 boot.rb 文件的最新版本是否已提交到您推送到 heroku 的 git 存储库？如果您`heroku run ls`在适当的目录上执行，您可以在 heroku web dyno 上看到该文件吗？

6.  作为最后的手段，您没有做任何与标准输出混淆的事情，将输出或打印语句重定向到其他地方，或者任何事情或排序是你吗？

# heroku - Meteor 使用 buildpack 推送到 heroku，但被无法识别的错误拒绝

> ID：11976500
> 
> 赞同：2
> 
> 时间：2012-08-15T20:09:59.747
> 
> 标签：heroku, meteor

我按照这个流星构建包（https://github.com/jordansissel/heroku-buildpack-meteor）的步骤并尝试推送到heroku。但它因无法识别的错误而失败。以前有人见过这个问题吗？

```
$ git push heroku master

-----> Heroku receiving push
-----> Fetching custom buildpack... done
-----> meteor app detected
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  5239    0  5239    0     0  17760      0 --:--:-- --:--:-- --:--:-- 43658
Fetching meteor deb package
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 12.0M  100 12.0M    0     0  3048k      0  0:00:04  0:00:04 --:--:-- 3187k
Unpacking meteor
Building meteor bundle
-----> Discovering process types
       Procfile declares types  -> (none)
       Default types for meteor -> web
-----> Compiled slug size is 11.8MB
-----> Launching...
 !     Heroku push rejected due to an unrecognized error.
 !     We've been notified, see http://support.heroku.com if the problem persists.

To git@xxxxxxxxxxx.git
 ! [remote rejected] master -> master (pre-receive hook declined) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:26:12.020

Heroku 免费版的 mongohq 之前使用过这个命令

```
heroku addons:add mongohq:free 
```

然而，Jordan Sissel 已经使用新的 heroku 命名法更新了 buildpack。

```
heroku addons:add mongohq:sandbox 
```

[https://github.com/jordansissel/heroku-buildpack-meteor/pull/5](https://github.com/jordansissel/heroku-buildpack-meteor/pull/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:26:20.023

现在明白了。这是与我类似的问题。 [https://github.com/jordansissel/heroku-buildpack-meteor/issues/1](https://github.com/jordansissel/heroku-buildpack-meteor/issues/1)

在 heroku 应用程序上安装 mongo 后，它工作正常。

$ heroku addons:add mongohq:free 添加 mongohq:free on test-heroku-meteor... 完成，v3（免费）

# objective-c - 使用 IBOutletCollections

> ID：11976502
> 
> 赞同：0
> 
> 时间：2012-08-15T20:10:03.083
> 
> 标签：objective-c, ios, xcode, nsarray, iboutletcollection

我有 30 个 UILabel 我希望用作 IBOutlets。但是，当我尝试访问他们的 UILabel 属性时，我收到错误消息，告诉我没有为“id”类型的对象找到属性 x。我对Objective C非常生疏，所以怀疑我做错了什么。我已将所有标签分配给 xib 文件中的 IBCollection。

。H

```
@interface ViewController : UIViewController
{
    IBOutletCollection(UILabel) NSArray *statPanels;
}
@property(retain) IBOutletCollection(UILabel) NSArray *statPanels;
@end 
```

.m

```
@interface ViewController ()
@end

@implementation ViewController
@synthesize statPanels;

- (void)viewDidLoad
{
    [super viewDidLoad];

    statPanels = [[NSArray alloc] initWithObjects:[UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], nil ];

    [statPanels objectAtIndex:3].hidden = YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:20:08.743

如果您在界面生成器中连接了所有标签，那么您不必初始化`statPanels`数组。

删除这一行：

```
statPanels = [[NSArray alloc] initWithObjects:[UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], nil ]; 
```

那条线正在创建一个新阵列和一堆新标签，并失去你的出口。

此外，您需要像其他答案所说的那样进行投射：

```
((UILabel *) [statPanels objectAtIndex:3]).property = .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:15:15.830

我认为你应该使用 cast；`NSArray`只知道它包含一堆`id`'s。所以你需要做类似的事情

```
((UILabel *)[array objectAtIndex:0]).someProperty 
```

此外，您应该拥有`alloc init`而不是仅拥有`alloc`. 同样在您的 ivar 声明中，您不需要`IBOutlet...`和东西。只是`NSArray`。（在相对较新的 XCode 版本中，您根本不需要声明 ivar。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:24:56.577

当 nib 被反序列化时，它们中指定的对象被实例化并分配给它们的 outlet。您不必自己实例化对象，这样做会失去对相关标签的唯一引用。

基本上，你只需要删除这一行：

```
 statPanels = [[NSArray alloc] initWithObjects:[UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], [UILabel alloc], nil ]; 
```

您还应该知道，在不调用任何初始化程序的情况下分配对象必然会以失败告终。你不应该这样做。Objective-C 中通常的模式是调用`[[Foo alloc] init]`或类似的。

# python - 使用 pandas 合并时如何保留索引

> ID：11976503
> 
> 赞同：176
> 
> 时间：2012-08-15T20:10:04.523
> 
> 标签：python, pandas

我想合并两个`DataFrames`，并将第一帧的索引保留为合并数据集的索引。但是，当我进行合并时，生成的 DataFrame 具有整数索引。如何指定要保留左侧数据框中的索引？

```
In [4]: a = pd.DataFrame({'col1': {'a': 1, 'b': 2, 'c': 3}, 
                          'to_merge_on': {'a': 1, 'b': 3, 'c': 4}})

In [5]: b = pd.DataFrame({'col2': {0: 1, 1: 2, 2: 3}, 
                          'to_merge_on': {0: 1, 1: 3, 2: 5}})

In [6]: a
Out[6]:
   col1  to_merge_on
a     1            1
b     2            3
c     3            4

In [7]: b
Out[7]:
   col2  to_merge_on
0     1            1
1     2            3
2     3            5

In [8]: a.merge(b, how='left')
Out[8]:
   col1  to_merge_on  col2
0     1            1   1.0
1     2            3   2.0
2     3            4   NaN

In [9]: _.index
Out[9]: Int64Index([0, 1, 2], dtype='int64') 
```

编辑：切换到可以轻松复制的示例代码

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-08-16T07:53:01.620

```
In [5]: a.reset_index().merge(b, how="left").set_index('index')
Out[5]:
       col1  to_merge_on  col2
index
a         1            1     1
b         2            3     2
c         3            4   NaN 
```

请注意，对于某些左合并操作，当and`a`之间有多个匹配时，您最终可能会得到比 in 更多的行。在这种情况下，您可能需要[删除重复项](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.drop_duplicates.html)。`a``b`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-07-27T21:12:54.507

您可以在左侧数据帧上制作索引副本并进行合并。

```
a['copy_index'] = a.index
a.merge(b, how='left') 
```

我发现这个简单的方法在处理大型数据框和使用`pd.merge_asof()`（或`dd.merge_asof()`）时非常有用。

当重置索引很昂贵（大数据框）时，这种方法会更好。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-09-11T17:33:14.380

[`Series.map`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html)有一个使用and的非 pd.merge 解决方案[`DataFrame.set_index`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.set_index.html)。

```
In: a['col2'] = a['to_merge_on'].map(b.set_index('to_merge_on')['col2']))
In: a['col2']
Out:
   col1  to_merge_on  col2
a     1            1   1.0
b     2            3   2.0
c     3            4   NaN 
```

这不会`index`为索引引入一个虚拟名称。

但是请注意，没有`DataFrame.map`方法，因此这种方法不适用于多列。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-04-26T06:43:10.910

```
df1 = df1.merge(df2, how="inner", left_index=True, right_index=True) 
```

这允许保留 df1 的索引

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-09-24T07:49:57.100

假设生成的 df 具有与您的第一个 df 相同的行数和顺序，您可以这样做：

```
c = pd.merge(a, b, on='to_merge_on')
c.set_index(a.index,inplace=True) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-04T07:37:13.513

另一个简单的选择是将索引重命名为以前的索引：

```
a.merge(b, how="left").set_axis(a.index) 
```

合并保留数据帧'a'的顺序，但只是重置索引，以便保存以使用 set_axis

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-24T19:11:59.367

我想我想出了一个不同的解决方案。我在索引值上加入左表，在基于左表索引的列值上加入右表。我所做的是正常的合并：

```
First10ReviewsJoined = pd.merge(First10Reviews, df, left_index=True, right_on='Line Number') 
```

然后我从合并表中检索新的索引号，并将它们放在一个名为 Sentiment Line Number 的新列中：

```
First10ReviewsJoined['Sentiment Line Number']= First10ReviewsJoined.index.tolist() 
```

然后我手动将索引设置回原始的左表索引，该索引基于预先存在的名为行号的列（我从左表索引加入的列值）：

```
First10ReviewsJoined.set_index('Line Number', inplace=True) 
```

然后删除行号的索引名称，使其保持空白：

```
First10ReviewsJoined.index.name = None 
```

也许有点破解，但似乎运作良好且相对简单。此外，猜测它会降低重复/弄乱数据的风险。希望这一切都说得通。

# javascript - java警告（？）出现在eclipse（juno）中的javascript代码

> ID：11976506
> 
> 赞同：1
> 
> 时间：2012-08-15T20:10:09.857
> 
> 标签：javascript, eclipse

我有一个在 Eclipse (Juno) 中编辑的 javascript 文件 (.js)。它给了我这个警告：

```
Type mismatch: cannot convert from Number to ___anonymous6554_6555 
```

在此代码的返回行上（这是一个简化的示例，但仍然显示错误）：

```
function foo() {
    var temp = {};
    if (true) {
        temp = 1;
    }
    return temp;
} 
```

如果我将其更改为：

```
function foo() {
    var temp = new Object();
    if (true) {
        temp = 1;
    }
    return temp;
} 
```

警告消失了，但随后 jsHint 警告我使用对象文字表示法。呃……

任何想法可能来自哪里？这个警告对我来说就像一个java警告......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:13:55.080

**编辑**

这是 Eclipse 的错。看看这个类似的问题：[为什么 Eclipse 有时会警告 JavaScript 中的数组？](https://stackoverflow.com/questions/7978429/why-does-eclipse-sometimes-warn-about-arrays-of-arrays-in-javascript)

我会忽略警告（Java 警告），并使用`{}`.

# jquery - 带有 django-endless-pagination 的无限滚动

> ID：11976508
> 
> 赞同：0
> 
> 时间：2012-08-15T20:10:20.967
> 
> 标签：jquery, python, django, infinite-scroll, django-endless-pagination

我是 Django 和 Python 的新手。我正在尝试在 html 页面上实现无限滚动，但似乎无法弄清楚。我正在使用 django-endless-pagination 模块并从[这里开始使用 twitter 样式（滚动分页）](http://django-endless-pagination.readthedocs.org/en/latest/twitter_pagination.html)

我已经安装了 django-endless-pagination，在我的 settings.py 文件中添加了请求上下文处理器，并在我的 settings.py 文件中的 installed_apps 中添加了 never_pagination。

我可以分页，但似乎无法弄清楚如何进行无限滚动。

我的views.py是：

```
from endless_pagination.decorators import page_template
from models import PeoplePerson
from django.shortcuts import render_to_response, RequestContext

@page_template("people/entry_index_page.html") # just add this decorator
def entry_index(request, template="people/entry_index.html",
    extra_context=None):
    context = {
        'objects': PeoplePerson.objects.all(),
    }
    if extra_context is not None:
        context.update(extra_context)
    return render_to_response(template, context,
        context_instance=RequestContext(request)) 
```

entry_index.html 是：

```
{% extends 'people/entry_index_page.html' %} {# is this line right????? #}
{% block js %}
   {% {{ block.super }} %}
    <script src="/mypathto/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="/mypathto/endless.js" type="text/javascript" charset="utf-8"></script>
    <script src="/mypathto/endless_on_scroll.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" charset="utf-8">
    var endless_on_scroll_margin = 20;
    </script>
{% endblock %}

<h2>Entries:</h2>
{% include page_template %} 
```

和 entry_index_page.html 是：

```
{% load endless %}
{% paginate objects %}
{% for object in objects %}
 {{ object.name|upper }} <br>   
{% endfor %}
{% show_more %} 
```

更新：通过将“{% extends 'people/entry_index_page.html' %}”添加到 entry_index.html，我能够克服“'BlockNode' 对象没有属性 'context'”错误。不确定这是否是正确的方法......我无法在任何地方的文档中找到它，只是来自另一个 SO 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:06:57.573

我想通了： 1\. 设置我的 media_root 和 media_url 并确保 javascript 工作

# objective-c - Objective-C UILabel 不会改变颜色

> ID：11976513
> 
> 赞同：3
> 
> 时间：2012-08-15T20:10:33.290
> 
> 标签：objective-c, uilabel, uicolor

我拥有的代码几乎是这样的（没有自定义视图，只有一个视图应用程序）：

视图控制器.h：

```
@interface ViewController : UIViewController <UITextFieldDelegate>
...
...
@property (strong, nonatomic) IBOutlet UILabel *statusMessage;
@end 
```

视图控制器.m：

```
@synthesize statusMessage = _statusMessage;

- (void) viewDidLoad {
   ...
   ...
   ...
   self.statusMessage = [[UIlabel alloc] initWithFrame:CGRectMake(...)];
   [self.statusMessage setTextColor:[UIColor redColor]];
} 
```

我能够更改背景颜色，并且我创建了其他标签，这些标签可以正确显示我为它们选择的任何颜色，但无论我做什么，这个标签总是显示为灰色。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T20:36:10.363

你的标签被禁用了吗？检查`enabled`; 如果是`NO`，那可能会覆盖您的颜色。同上`highlighted`；如果是`YES`，它将使用突出显示的颜色。

# seo - 新的 404 not found 索引页面将如何影响排名？

> ID：11976515
> 
> 赞同：0
> 
> 时间：2012-08-15T20:10:37.567
> 
> 标签：seo, http-status-code-404, web-crawler, googlebot

我们遇到过所有页面链接都被抓取并继续被抓取的情况。页面链接包含“~/{someTerm}/{someOtherTerm}/__p/##/##”。

问题在于，现在 Google 和 MSN 机器人都在抓取数以万计的不需要抓取的页面，从而对系统造成压力。

因此，我们将分页链接更改为 Javascript 链接，并删除了所有包含“__p”的 URL，因此它们现在将返回 404 - Page Not Found。我们只希望第 1 页被编入索引，然后可能是一两页（但现在不担心这一点。

有没有办法使用适用于 Google 和 MSNBot 的 WebMasterTools 删除 URL 中包含“__p”的所有页面，如果是，如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:22:19.653

`<meta>`我认为您应该在要从搜索引擎中删除的那些页面中使用标签。

```
<meta name="robots" content="noindex, nofollow" /> 
```

此外，您可以尝试使用 robots.txt 排除，看看这个[网站](http://www.robotstxt.org/orig.html)

```
User-agent: *
Disallow: /*___p 
```

# apache - 虚拟服务器之间的 Apache 域重定向

> ID：11976517
> 
> 赞同：1
> 
> 时间：2012-08-15T20:10:41.087
> 
> 标签：apache, redirect, virtual, port, dedicated

我有一台专用服务器，我将其拆分为更多虚拟服务器。在主服务器上，我使用 http (80) 的标准端口，但对于其他服务器，我被迫设置不同的端口。但我有一些备用域名。当用户通过特定域时，将隐形重定向到另一台服务器的最佳方法是什么？我不想使用 iframe 或重定向到另一个网站。我希望域在共享虚拟主机上表现得像。但是使用不同的服务器。

有可能吗？我知道 apache 获取有关来自哪个域用户的信息。如果可能的话，我想用虚拟主机来做。

```
<VirtualHost *>
ServerName mydomain
ServerAlias mydomain 
some redirection
CustomLog /var/log/apache2/mydomain.access.log combined
ServerAdmin myemail
</VirtualHost> 
```

提前致谢 ：]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:18:36.010

由于您可以访问服务器的配置，因此请查看作为 mod_proxy 一部分的[`ProxyPass`、`ProxyPassMatch`和`ProxyPassReverse`](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)指令。您需要确保模块已加载，然后才能使用这些指令。

一般来说，在您的**mydomain**配置中，假设您希望访问者在访问`http://myother.domain.com/`时看到该站点`http://mydomain/other`，您只需添加：

```
ProxyPass /other http://myother.domain.com/
ProxyPassReverse /other http://myother.domain.com/ 
```

这`ProxyPassReverse`是为了确保代理的位置响应被重写。例如，如果页面在 `http://myother.domain.com/`返回 301 重定向到`http://myother.domain.com/newimage.gif`，则该指令将在内部将响应的位置从 重写`http://myother.domain.com/newimage.gif`为`http://mydomain/other/newimage.gif`，以使其再次被代理。

如果您有也需要重写的 cookie 域，请查看`ProxyPassReverseCookieDomain`和`ProxyPassReverseCookiePath`.

# audio - 有没有办法在 mac book pro 上使用苹果脚本切换“使用音频端口”首选项

> ID：11976520
> 
> 赞同：0
> 
> 时间：2012-08-15T20:10:50.227
> 
> 标签：audio, applescript, toggle, preferences

我想知道是否有一种方法可以更改 mac os x 中声音首选项窗格上的“使用音频端口”设置。这是一项功能，它允许 mac book pro 用户使用他们的音频插孔进行声音输出或输入。

如果您总是必须打开系统偏好设置并导航到声音窗格，这会很烦人。

我已经自己尝试过了，但我没有任何“结果”。我想最需要的脚本技术应该是“Apple Script”来执行这项任务。我对苹果脚本完全陌生。

有没有人有解决方案？我停留在获取此首选项 id 的名称上。

到目前为止，我找不到有关此问题的任何有用信息。

谢谢你的帮助。

N。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:22:27.517

`Alt`- 单击菜单栏中的音量图标。您可以在此处选择将端口用于输出或输入。

# models - glmnet 对二进制数据模型有什么作用（P=1 或 P=0）

> ID：11976521
> 
> 赞同：1
> 
> 时间：2012-08-15T20:11:02.720
> 
> 标签：models, logistics, lasso-regression

我在二进制数据上运行以下弹性网络模型（1 = 坏，0 = 好）。有谁知道 glmnet 默认适合什么类型的模型：P(y=1) 或 P(y=0)。反正有没有选择前者来适应模型。

```
cv.glmnet(x, y, family="binomial", type.measure="deviance", standardize=FALSE, nfolds=5, alpha=par) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:53:39.023

glmnet 文档中包含您的答案（`?predict.glmnet`在 R 中键入）：

> 请注意，对于“二项式”模型，仅返回与因子响应的**第二级对应的类的结果。**

如果您描述的二进制数据被分配`y`为一个简单的数字向量，那么模型将产生 P(y=1) 拟合。

```
> x <- matrix(rnorm(100*20),100,20)  # create some sample input
> y <- as.factor(sample(0:1, 100, replace=TRUE))
> levels(y)
[1] "0" "1"
> py1_fit <- glmnet(x, y, family="binomial") 
```

要反转并适应 P(y=0)，您只需重新排序级别：

```
> y0 <- factor(y, levels=rev(levels(y)))
> levels(y0)
[1] "1" "0"
> py0_fit <- glmnet(x, y0, family="binomial") 
```

# mysql - 下一个 7 天的生日来自 2 列

> ID：11976527
> 
> 赞同：0
> 
> 时间：2012-08-15T20:11:41.340
> 
> 标签：mysql, sql

我需要查询我的数据库关于未来 7 天的生日 - 生日日期分为两列

```
 Name  Day   Month   
  Peter 15    8       
  Susi  20    8      
  Thor  14    9 
```

查询 = 下一个 7 天谁过生日 返回

```
Peter 15 - 8   
Susi  20 - 8 
```

欢迎任何帮助 - 问候托尔斯滕

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:27:57.520

您没有指定 RDBMS，但这应该会在**SQL Server**中返回您想要的结果。这些将检查表中的月份是否小于当前月份，如果是，则它将使用下一年：

```
select *
from 
(
    select name,
        cast(case 
                when datepart(month, getdate()) > [month] 
                 and datepart(day, getdate()) > [day]
                then cast(datepart(year, dateadd(year, 1, getdate())) as varchar(4))
                else cast(datepart(year, getdate()) as varchar(4)) end + '-'
            + cast([month] as varchar(2)) + '-'
            + cast([day] as varchar(2)) as datetime) bd
    from t1
) x
where datediff(day, getdate(), bd) >= 0 
  and datediff(day, getdate(), bd) < 7 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f10c1/3)

或者：

```
select *
from 
(
    select name,
        cast(case 
        when datepart(month, getdate()) > [month] 
            and datepart(day, getdate()) > [day]
        then cast(datepart(year, dateadd(year, 1, getdate())) as varchar(4))
        else cast(datepart(year, getdate()) as varchar(4)) end + '-'
    + cast([month] as varchar(2)) + '-'
    + cast([day] as varchar(2)) as datetime) bd
    from t1
) x
where bd >= DateAdd(day, DateDiff(day, 0, getdate()), 0)
    and bd < DateAdd(day, DateDiff(day, 0, getdate()), 7) 
```

**MySQL版本：**

```
SELECT *
FROM
(
  select name,
    str_to_date(concat(case 
      when month(current_date()) > month
           and day(current_date()) > day
      then year(date_add(current_date, interval 1 year))
      else year(current_date()) 
    end, '-', month, '-', day), '%Y-%m-%d') birthdate
  from t1
) x
where birthdate >= Date(current_date())
  and birthdate < Date(Date_Add(current_date(), interval 7 day)) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/5773f/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:52:44.293

从@bluefeet 答案中获取第二个选择语句，您可以执行以下操作：

```
select * 
from  
( 
    select name,
        case when(
         cast(cast(datepart(year, getdate()) as varchar(4)) + '-' 
        + cast([bmonth] as varchar(2)) + '-' 
        + cast([bday] as varchar(2)) as datetime) > getdate())
        THEN
            cast(cast(datepart(year, getdate()) as varchar(4)) + '-' 
            + cast([bmonth] as varchar(2)) + '-' 
            + cast([bday] as varchar(2)) as datetime)

        ELSE

            cast(cast(datepart(year, getdate())+1 as varchar(4)) + '-' 
            + cast([bmonth] as varchar(2)) + '-' 
            + cast([bday] as varchar(2)) as datetime)
        END
        as bd 
    from @Names 
) x 
where bd >= DateAdd(day, DateDiff(day, 0, GETDATE()), 0) 
    and bd < DateAdd(day, DateDiff(day, 0, GETDATE()), 7) 
```

# coldfusion - 将电子邮件日期转换为日期字段

> ID：11976529
> 
> 赞同：1
> 
> 时间：2012-08-15T20:11:54.690
> 
> 标签：coldfusion

我不确定它是否是 ISO 日期。当我从 pop 服务器读取电子邮件时，其中一个字段称为“日期”，它有一个如下所示的字符串：

> 2012 年 6 月 19 日 18:02:09 -0400

问：是否有将这个日期转换为 ColdFusion 日期变量的例程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:21:44.513

您可以从 cflib 站点尝试此[UDF](http://cflib.org/udf/DateConvertISO8601)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:27:26.007

我创建了两个变量。

```
thisdate = "19 Jun 2012 18:02:09 -0400";
thisdate = "19 Jun 2012 18:02:09"; 
```

我通过这个条件语句运行它们。

```
if (isDate(thisdate)) {
    writeOutput("It is a date!");
} else {
    writeOutput("It is NOT date!");
} 
```

第一个不是日期。第二个是约会。

也许您可以只看“-0400”，这可能是一个偏移量。

您可以操纵日期来创建您真正想要的日期类型。

```
newDate = dateFormat(thisdate, "full"); 
writeOutput(newDate);
newTime = timeFormat(thisdate, "full"); 
writeOutput(newTime); 
```

# css - 将图标添加到链接/按钮

> ID：11976535
> 
> 赞同：0
> 
> 时间：2012-08-15T20:12:15.767
> 
> 标签：css, asp.net-mvc

我目前有一个链接，我将它用作查看它的按钮，我想向它添加一个图标。

`+`示例：将显示添加用户的单词旁边的加号图标。这是我的链接：

```
<a class="glossyBtn" href='<%:Url.Action("Edit", "Case", new{caseId = Model}) %>'>Cancel</a> 
```

这是我的`.glossyBtn`风格：

```
.glossyBtn
{
    display: inline-block;
    background-color: #c1e2f4;
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #eeeeee), color-stop(100%, #cccccc));
    background-image: -webkit-linear-gradient(top, #eeeeee, #b1daf1);
    background-image: -moz-linear-gradient(top, #eeeeee, #b1daf1);
    background-image: -ms-linear-gradient(top, #eeeeee, #b1daf1);
    background-image: -o-linear-gradient(top, #eeeeee, #b1daf1);
    background-image: linear-gradient(top, #eeeeee, #b1daf1);
    border: 1px solid #3e95c8;
    border-bottom: 1px solid #3e95c8 !Important;
    border-radius: 3px;
    color: #046fad !Important;
    font: bold 12px Helvetica Neue, Helvetica, Arial, sans-serif;
    padding: 5px 12px;
    text-align: center;
    text-shadow: 0 1px 0 #eee;
    text-decoration: none;
    cursor: pointer;
    list-style: none;
    float: left;
    margin-top: 5px;
    margin-right: 5px;
} 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/gD4FPqLB)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:16:09.560

我没有对此进行测试，但以下内容应该适用于正确的定位：

```
<a class="glossyBtn" href='<%:Url.Action("Edit", "Case", new{caseId = Model}) %>'><span><img src="plus.png" alt=""></span>Cancel</a> 
```

`<span>`通过在文本前面加上一个包含 的前缀`<img>`，您可以确保图像与右侧的文本保持内联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:16:28.557

使用[`:after`](http://www.w3schools.com/cssref/sel_after.asp)伪选择器：

```
.glossyBtn:after {
    content: '+'; 
    padding-left: 5px;
} 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/R0rQizyw)**

* * *

如果要在文本*前*[`:before`](http://www.w3schools.com/cssref/sel_before.asp)添加加号，请使用伪选择器：

```
.glossyBtn:before {
    content: '+'; 
    padding-right: 5px;
} 
```

**现场演示：[Tinkerbin](http://tinkerbin.com/Jy0NqjZB)**

* * *

*我添加了向左/向右填充，以便在文本和加号字符之间留出一些空间。*

# iphone - NSOperationQueue 操作filteredArrayUsingPredicate 错误

> ID：11976536
> 
> 赞同：0
> 
> 时间：2012-08-15T20:12:24.077
> 
> 标签：iphone, ios, nspredicate, nsoperation, nsoperationqueue

我有`MyOperation : NSOperation`课`@property (nonatomic, retain) NSString *oID;`

有时我需要取消特定的操作`oID`。我正在尝试这样做：

```
NSArray *operations = operationQueue.operations;
NSPredicate *predicate = [NSPredicate predicateWithFormat:[NSString stringWithFormat: @"oID == %@", _specificID]];
NSArray *arrayOperations = [operations filteredArrayUsingPredicate: predicate]; 
```

并得到错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unable to parse the format string "oID == 0f5db97b-f127-4425-ad79-451d1f204016"' 
```

是否可以从 NSOperationQueue 中过滤操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:31:33.670

我猜操作.queue 是一个可变数组（记录它的类返回这个'__NSArrayM'）。你应该尝试的是：

```
NSArray *operations = [NSArray arrayWithArray:operationQueue.operations]; 
```

也就是说，在应用谓词时，某些操作可能已经完成（并已从可变队列中删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:41:34.453

您的问题是您正在格式化字符串，然后将其发送到 Predicate 构造函数方法。它已经是一个格式化程序，并且知道如何格式化你给它的数据。

基本上，您需要的格式如下所示：

```
oID == "0f5db97b-f127-4425-ad79-451d1f204016" 
```

但你得到

```
oID == 0f5db97b-f127-4425-ad79-451d1f204016 
```

如果你自己使用格式化程序，你应该解决这个问题......

```
NSPredicate *predicate = [NSPredicate predicateWithFormat: @"oID == %@", _specificID]; 
```

注意：谓词格式化程序知道它应该专门处理字符串，并在您传递要格式化为`%@`'的字符串时自动添加额外的引号字符

# r - 按字符串子集数据帧

> ID：11976539
> 
> 赞同：1
> 
> 时间：2012-08-15T20:12:36.830
> 
> 标签：r, dataframe, subset

假设我有一个包含 7 个变量的数据框。我想根据一列的内容自动对数据框进行子集化。该列是部门，有 17 个不同的值。我希望 R 查看“部门”列并为每个包含所有其他行的部门创建一个新数据框。这相当于 Minitab 中的“拆分工作表”。现在，我必须运行 17 次子集命令来为每个命令创建一个数据框。R 可以根据列内容自动执行此操作吗？

最好的，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T20:22:55.277

```
out<-split(df,df$Dept)

out[[1]] 
```

# 等访问数据帧

或者

```
out$Dept1 
```

举个具体的例子

```
df<-data.frame(Dept=c('a','a','b','b','c','d','d'),acs=c(111,112,222,223,333,444,445))
out<-split(df,df$Dept)
out
> out
$a
  Dept acs
1    a 111
2    a 112

$b
  Dept acs
3    b 222
4    b 223

$c
  Dept acs
5    c 333

$d
  Dept acs
6    d 444
7    d 445

dept.names<-names(out)

> dept.names[1]
[1] "a"

> out[[dept.names[1]]] # dataframe for department 1
  Dept acs
1    a 111
2    a 112

> out[[dept.names[2]]] # dataframe for department 2
  Dept acs
3    b 222
4    b 223

> is.data.frame(out[[dept.names[2]]])
[1] TRUE 
```

# cocoa - 基于视图的 NSTableView 在插入带有动画的新行后呈现空白行

> ID：11976540
> 
> 赞同：3
> 
> 时间：2012-08-15T20:12:41.460
> 
> 标签：cocoa, core-animation, nstableview, grand-central-dispatch

我有一个基于视图的`NSTableView`我支持 `NSMutableArray 。定期我出去抓取一些数据并想在顶部的表中插入新行。

当我在没有指定动画的情况下执行此操作时，`insertRowsAtIndexes:withAnimation:`它似乎可以连续几个小时正常工作。但是，如果我指定动画，大约 7 或 8 次插入后，表格视图开始显示插入发生的空白行。向下滚动然后向上滚动会导致新行正确呈现。

调用的代码`insertRowsAtIndexes:withAnimation`在一个块中，而不是在主线程上运行，但我的插入发生在主队列的 dispatch_async 内部，所以我不认为它与多线程有关。

这是一些代码......`self.contents`是我的`NSMutableArray`.

```
 dispatch_async(dispatch_get_main_queue(), ^{
                [self.contentsTableView beginUpdates];
                if(posts.count) {
                    for(NSDictionary* dictionary in [posts reverseObjectEnumerator]) {
                        FNPost* post = [[FNPost alloc] initWithDictionary:dictionary width:self.contentsTableView.frame.size.width];
                        post.delegate = self;
                        [self.contents insertObject:post atIndex:0];
                        [self.contentsTableView insertRowsAtIndexes:[NSIndexSet indexSetWithIndex:0] withAnimation: NSTableViewAnimationSlideLeft];
                    }
                }
                [self.contentsTableView endUpdates];

            }); 
```

我感到困惑的一件事是Apple`NSTableView`文档的一部分`insertRowsAtIndexes:withAnimation`说：

> 表视图中的 numberOfRows 将自动减少索引计数。

我对该语句所暗示的关于我的数组中的对象数（以及因此的结果`numberOfRowsInTableView:`）与表视图认为它具有的行数之间的关系感到困惑。在我看来，表格视图中的行数应该等于我的数组计数，我想确保我对此的理解不是问题的根源，但就像我说的那样，如果没有指定动画，表格可以正常工作。

我在这里做明显错误的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T22:53:55.940

事实证明，这个问题是由 NSTableView 在基于层的视图层次结构中引起的。两个superviews，我有一个layer-backed view。在阅读了一些关于 NSTableView 的其他帖子后，在层支持的层次结构中显示了其他错误行为，我决定关闭 IB 中的层。当我想在我的视图之间使用 CA 转换时，表格动画现在会按照我的预期发生，但代价是必须维护一些额外的状态来控制图层支持状态。

# numbers - 从大量序列号和激活密钥生成激活密钥

> ID：11976541
> 
> 赞同：2
> 
> 时间：2012-08-15T20:12:49.323
> 
> 标签：numbers, key, activation-codes

我有一堆旧软件的序列号和它们对应的激活密钥。自从最初安装它们以来，我丢失了一些激活密钥（但仍然有序列号）。我仍然有一个大约 20 个键的数据集，甚至目不转睛地观察它，我可以看出有一种方法可以疯狂地确定激活键。鉴于我的数据集很大，有没有一种方法可以反解来找出丢失信息的激活密钥。

序列号示例：14051 激活密钥：E9E9F-9993432-45543

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:34:35.917

您要做的是想出一个将序列号映射到激活密钥的功能。在不了解函数性质的情况下，这可能是从非常简单（只有几个项的多项式）到非常困难（涉及大量块 XOR、替换表、复杂键调度等的多层函数）的任何地方。 .)。

如果您有权访问密钥验证程序（例如通过反汇编 - 这*几乎总是*根据商业软件的 EULA），那么您有一个例程返回给定的激活密钥对于给定的序列号是否正确。如果这是通过计算序列号的激活密钥来完成的，那么您实际上已经完成了。如果这是通过计算密钥上的反函数来完成的，那么您的任务会稍微困难一些：您需要反转该函数以检索密钥派生算法，这可能并不那么容易。如果你最终不得不解决一些困难的数学问题（例如离散对数问题），因为该方案依赖于公钥加密，那么你希望你正在处理的值足够小，你可以蛮力或在计算可行的时间内使用已知算法（例如 Pollard 的 rho 算法）。

在任何情况下，您都需要熟悉反汇编和调试，并希望没有反调试器措施到位。

否则，问题就更难了——你需要做出一些有根据的猜测并尝试它们（例如，通过尝试进行多项式拟合），并希望最好。由于可以适应任何一组输入和输出的不同可能函数种类繁多（数学上不可数，但实际上受源代码大小的限制），试图对*算法本身*进行已知明文攻击通常是不可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:25:21.430

这首先取决于该计划的愚蠢程度，但我的猜测是这不太可能。没有固定的方法，但一般领域与密码破解相同。

# java - Java线程完成运行后会做什么？

> ID：11976542
> 
> 赞同：3
> 
> 时间：2012-08-15T20:12:52.033
> 
> 标签：java, multithreading, sockets

在我制作的游戏中，我使用了许多线程实例，但它不会跟踪它们。

```
clientThread cT = new clientThread(socket);
new Thread(cT).start(); 
```

我需要知道的是，当胎面的实例完成时（所有循环都已完成并且不再使用），就像方法的实例一样，它会被丢弃吗？还是我需要使用一段特殊的代码来丢弃它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T20:14:58.683

线程是一个普通对象，它将像任何其他对象一样被垃圾收集。在线程对象的情况下，当线程退出时，它就有资格被收集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T20:13:57.720

完成后将立即丢弃`run()`。你不需要添加任何特殊的代码来发布。

注意：丢弃并不意味着它已经从内存中消失了（但它不会进一步运行）。当下次 GC 收集运行时，它可能会被 GC。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T20:14:31.200

如果垃圾收集器到达它，它将被销毁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T20:42:45.270

其他朋友完全按照您的要求回答。只有一条评论。

> 我正在使用线程的许多实例，但它不会跟踪它们。

不要这样做：`new Thread(cT).start();`即开始产生线程。
阅读有关线程池和[ExecutorService的信息](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

# security - 3 层应用程序的安全性：在哪一层？

> ID：11976543
> 
> 赞同：-1
> 
> 时间：2012-08-15T20:12:54.637
> 
> 标签：security, architecture, 3-tier

“安全”是指数据访问权限，例如：

*   Andrew 对法国的客户只有只读权限
*   Brian 可以更新法国和德国的客户
*   Charles 是管理员，他拥有所有内容的阅读和更新权限

我可以看到每一层的潜在争论。

1.  数据访问层

    DAL 只公开用户有权访问的客户端，并在用户试图做未经授权的事情时将适当的错误传递给业务层。

    这简化了上层，并且可以减少只能访问一小部分数据的用户的数据流量。

2.  业务层

    因为这是业务逻辑所在的地方，只有业务层完全了解应该如何实现安全性。

3.  界面层

    一个相切的论点是因为 UI 层是处理身份验证的层。更有力的论点是当应用程序具有非 UI 功能时：计算每日盈亏、归档等。这些程序没有安全上下文，创建虚构的“系统”用户是维护的噩梦。

4.  一个单独的层？

    插在 3 里面的某个地方？

我正在寻找一个有说服力的论点，它会让我相信 X 层最适合大型 3 层应用程序。请不要“视情况而定”的答案;-)。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:27:32.340

我想这可能是一个主观的话题。尽管如此，我们遵循从不信任任何外部源（例如跨越服务边界的数据）的原则。通常，现代应用程序与旧的客户端-服务器三层模型有点不同，因为它们通常是面向服务的（我看到 Web 服务器也是一种服务）。

这排除了将访问检查委托给客户端 - 客户端可能知道允许的访问并使用此信息以不同的行为（例如不提供某些功能左右），但最终只有服务（服务器）决定允许计数。

另一方面，数据库或 DAL 太低，因为大多数检查还依赖于某些业务逻辑或外部信息（例如用户角色）。所以这排除了数据层；在我们的环境中，数据访问是一个不做任何检查的可信空间。最后，DB 层和应用服务器形成一个逻辑单元（可以称之为堡垒——根据 Roger Sessions Software Fortresses 的书），其中不存在服务边界。如果应用层访问另一个服务，但是它必须对接收到的数据进行检查。

总之，您可能想要一本[Roger Sessions 的书](https://rads.stackoverflow.com/amzn/click/com/0321166086)，因为它确实为大型应用程序以及如何处理安全性和其他问题提供了一些有价值的输入和思考。

# sharepoint - 为主页共享点 2010 使用不同的母版页

> ID：11976545
> 
> 赞同：1
> 
> 时间：2012-08-15T20:13:11.300
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试使用两个母版页，一个用于整个网站集，另一个仅用于主页。我创建了一个类库并继承了发布布局页面，我在 pagelyout 继承部分中使用它。出于某种原因，我收到错误消息

```
"Could not load type 'Microsoft.SharePoint.Publishing.PublishingLayoutPageEx' from assembly 'CustomMetroPageLayout, Version=1.0.0.0, Culture=neutral, PublicKeyToken=1238ef599029b39c'. " 
```

知道为什么会这样。我已经签署了 dll 并在 web.config 中添加了条目并在 GAC 中添加了 dll。

如果我想念什么，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:40:06.270

您应该尝试使用不同的页面布局而不是不同的母版页来解决它。如果您不同意我的观点，可以在这里找到解决问题的方法：

[回答](https://stackoverflow.com/questions/11621877/can-i-use-more-than-one-master-page-on-a-sharepoint-site/11630731#11630731)

# jdbc - 将 JDBC 驱动程序发送到 WAR for Tomcat 7

> ID：11976547
> 
> 赞同：1
> 
> 时间：2012-08-15T20:13:20.597
> 
> 标签：jdbc, jndi, tomcat7

在更新到 Tomcat 7（从 Tomcat 6）之前，我能够使用 WAR 文件发布 MySql JDBC 驱动程序。我在使用 Tomcat 6 创建 JNDI 数据源时没有遇到任何问题（可能是重新部署时内存泄漏）。

但是，我正在尝试使用新的连接池在 Tomcat 7 上部署相同的 WAR（使用 MySql 驱动程序）并获得： `java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`

我明白 JDBC 驱动程序更合适的地方是`CATALINA_HOME/lib`.

新的连接池是否绝对需要所有 JDBC 驱动程序`CATALINA_HOME/lib`？或者一些配置可以让我在 WAR 中发布驱动程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:19:30.507

是的。驱动程序应该在，`CATALINA_HOME\lib`特别是如果你想使用 Tomcat 的池

来自：[Tomcat 7 连接池](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#Database_Connection_Pool_%28DBCP%29_Configurations)

> 在继续之前，不要忘记将 JDBC 驱动程序的 jar 复制到 $CATALINA_HOME/lib 中。

# sql-server - 亲子关系

> ID：11976552
> 
> 赞同：1
> 
> 时间：2012-08-15T20:13:48.173
> 
> 标签：sql-server, sql-server-2008, ssas, powerpivot

这与处理 PowerPivot 中的父子关系有关。我面临的情况是“PATH”dax 函数给我提供给该函数的数据集带来了麻烦。

我的数据集有一个父列和一个带有子 ID 的列。层次结构的根在子 ids 列中没有对应的行。由于这个原因，PowerPivot 在应用“PATH”函数时给了我以下错误：

“'CS_Comp'[] 列中的计算错误：'CS_Comp'[ParentCol] 中的值 '10' 必须也存在于 'CS_Comp'[ChildCol] 中。请添加缺失的数据，然后重试。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T14:27:59.877

您可以发布数据示例吗？为什么需要 Parent 和 ChildID。通常你只需要 ID 和 ParentID

![在此处输入图像描述](../Images/8abffb0d70cf3ecae22ed2319c57c8d7.png)

# mysql - mysql 等效于 IN() 子句执行逻辑 AND 代替

> ID：11976559
> 
> 赞同：9
> 
> 时间：2012-08-15T20:14:07.867
> 
> 标签：mysql

假设我有一张桌子在两张桌子之间建立连接......就像这样：

```
id_product | id_category
-----------------
11 | 22
11 | 33
12 | 22
12 | 33 
```

我想根据搜索到的类别 ID 列表获取 id_products （不同的）。

如果我使用 IN() 子句，则 id_categories 列表使用逻辑 OR。

如何进行 SELECT 查询以对提交的 id_categ 列表进行逻辑与？

示例：我想要属于类别 22*和*33 的所有 id_products（可能还有 5 个以上的类别 ID）

我找到了这个答案： [使用 MySQL IN 子句作为全包式（AND 而不是 OR）](https://stackoverflow.com/questions/4751361/using-mysql-in-clause-as-all-inclusive-and-instead-of-or) ...但是查询混合了超过 1 个表...我只想要对单个表的查询，即联结表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T20:18:44.160

阅读您的链接，我认为它会像

```
select id_product 
from yourTable
where id_category in (--your List goes Here)
group by id_product 
having count(distinct id_category) = NumberOfElementsOfYourList 
```

您应该使用 = if 只想获取该 id_category，但没有其他 id_category。如果没有，请使用 >=

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:18:58.793

```
select id_product
from your_table
where id_category in (22, 33)
group by id_product
having count(distinct id_category) = 2 
```

您可以添加一个`having`计算找到的子句`id_category`。例如，如果您查找 5 个 ID，则必须更改 子句中的 in `2`。`5``having`

# .net - WCF Message.ToString() 方法如何工作？

> ID：11976561
> 
> 赞同：4
> 
> 时间：2012-08-15T20:14:14.123
> 
> 标签：.net, wcf, message, tostring

上的所有方法`System.ServiceModel.Channels.Message`只允许您读取一次消息正文，如果在读取消息后调用，则会失败并抛出异常。msdn 文档确认只能读取消息正文之一。但是，如果您调用`ToString()`已阅读的消息，您似乎会取回整个肥皂信封、正文和所有内容。

因此，在我的情况下，如果只有方法允许，即使在读取正文之后似乎也可以访问正文。

我在这里缺少什么吗？在某些情况下，是否`ToString()`作为一种变通方法使身体不可靠？

就我而言，我正在为一些 WCF 操作进行一些错误日志记录，并从`OperationContext.RequestContext.RequestMessage`. 我正在记录消息，`ToString()`因为这是我能找到的允许我记录消息正文的唯一方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T02:01:40.647

ToString*可能会*打印消息正文，但这不能保证。有许多类型的`Message`对象（它是一个抽象类）。其中一些缓冲整个正文，而另一些则只有一个仅向前的阅读器。缓冲消息的消息实现*可能会*在调用时写入正文`ToString`，这就是您所看到的。但这并不保证适用于所有消息类型。在许多情况下，主体在被调用时被简单地写为“...stream...” `ToString`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-18T21:20:26.740

只是想分享一下我已经`message.toString`成功使用该方法的目的是保留从 a 派生的 base64 编码字符串，该字符串`byte[]`在创建消息缓冲区时丢失（缓冲区是复制原始消息的唯一方法，所以我的代码中需要它）。在创建缓冲区、使用它制作 XML 并编辑 XML 之后，我使用从该`toString`方法保存的字符串恢复了 base64 字符串。我不建议这样做，但在这种情况下它确实是唯一的选择，我知道它可以在我的特定代码中工作。也就是说，我通常认为这应该是最后的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:22:04.163

您应该创建消息副本然后[阅读](https://blogs.msdn.com/b/drnick/archive/2006/07/26/this-message-cannot-support-the-operation-because-it-has-been-copied.aspx?Redirected=true)。例如：

```
using (MessageBuffer messageBuffer = message.CreateBufferedCopy(Int32.MaxValue))
{
    Message restoredMessage = messageBuffer.CreateMessage();
    message = messageBuffer.CreateMessage();
    return MessageToString(ref restoredMessage);
} 
```

RequestContext.RequestMessage 在一种方式调用中不存在，因此`ToString`无法正常工作，另一种方式[RequestMessage.ToString()](http://weblogs.thinktecture.com/cweyer/2008/06/accessing-the-message-inside-of-your-wcf-service-operations.html)将以字符串形式返回消息内容

# django - Django：文档中的内联表单集示例

> ID：11976563
> 
> 赞同：2
> 
> 时间：2012-08-15T20:14:22.750
> 
> 标签：django, inline-formset

我得到了尝试将内联表单集作为问题解决方案的提示。只是在沙盒项目中试验它。我正在尝试复制与 Django 文档中完全相同的[示例](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#inline-formsets)，但它失败了。:(

**楷模：**

```
TITLE_CHOICES = (
    ('MR', 'Mr.'),
    ('MRS', 'Mrs.'),
    ('MS', 'Ms.'),
) 

class Author(models.Model):
    name = models.CharField(max_length=100)
    title = models.CharField(max_length=3, choices=TITLE_CHOICES)
    birth_date = models.DateField(blank=True, null=True)

    def __unicode__(self):
        return self.name

class Book(models.Model):
    name = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author)** 
```

**看法：**

```
def manage_books(request, author_id):
    author = Author.objects.get(pk=author_id)
    BookInlineFormSet = inlineformset_factory(Author, Book)
    if request.method == "POST":
        formset = BookInlineFormSet(request.POST, request.FILES, instance=author)
        if formset.is_valid():
            formset.save()
            # Do something. Should generally end with a redirect. For example:
            return HttpResponseRedirect(author.get_absolute_url())
    else:
        formset = BookInlineFormSet(instance=author)
    return render_to_response("manage_books.html", {        "formset": formset,    }) 
```

在管理屏幕中，我成功创建了一个`Author1`和`Author2`.

`Book1`并`Book1b`分配`Author1`
`Book2`给`Author2`。

当我尝试它时，我得到一个`<class 'Sandbox_App.models.Book'> has no ForeignKey to <class 'Sandbox_App.models.Author'>`

追溯：

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/test/1

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',a
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'Sandbox_App',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.locale.LocaleMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/houman/projects/Sandbox/Sandbox_App/views.py" in manage_books
  58\.     BookInlineFormSet = inlineformset_factory(Author, Book)
File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in inlineformset_factory
  817\.     fk = _get_foreign_key(parent_model, model, fk_name=fk_name)
File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in _get_foreign_key
  800\.             raise Exception("%s has no ForeignKey to %s" % (model, parent_model))

Exception Type: Exception at /test/1
Exception Value: <class 'Sandbox_App.models.Book'> has no ForeignKey to <class 'Sandbox_App.models.Author'> 
```

为什么这不起作用？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:17:27.233

像错误消息所述，书应该有一个外键作者。您正在使用 ManyToManyRelation。

```
authors = models.ManyToManyField(Author) 
```

我测试了 shell 中文档中的示例，它可以工作。

也看这里：[Django inlineformset_factory 和 ManyToMany 字段](https://stackoverflow.com/questions/10302403/django-inlineformset-factory-and-manytomany-fields)

# html - 相对于静态背景图像位置的 CSS 位置文本

> ID：11976566
> 
> 赞同：0
> 
> 时间：2012-08-15T20:14:30.963
> 
> 标签：html, css, text

我想沿着位于页面底部的静态背景图像的形状放置一些位于 div/spans 内部的文本。此文本位于 divs/spans 内，因为每个字母都是分开的，因为它们会被旋转以适应此静态背景图像形状的曲线。

我愿意寻找替代解决方案，但我认为我还没有看到沿着矢量路径或类似路径绘制文本的方法，所以我想使用相对定位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:18:02.230

除非您想使用画布（[请参阅解决方案](https://stackoverflow.com/questions/5068216/placing-text-label-along-a-line-on-a-canvas)），否则最好使用绝对定位。

# oracle - 使用 SYS_REFCURSOR 填充 oracle 集合类型并关闭游标

> ID：11976567
> 
> 赞同：1
> 
> 时间：2012-08-15T20:14:31.160
> 
> 标签：oracle, plsql, cursor, oracle11g

在我的存储过程中，我有一个这样的代码片段：

```
OPEN p_result FOR
SELECT *
FROM TABLE (CAST ( l_data AS Rpt_mapping_TableType));
COMMIT; 
```

`p_result`是`IN OUT`类型的参数`SYS_REFCURSOR`。`Rpt_mapping_TableType`是用户定义的集合类型。所以这个游标只会填充 Rpt_mapping_TableType，然后调用这个 proc 的程序将从 Rpt_mapping_TableType 读取结果。我的问题是`COMMIT`这个片段的用途是什么？代码作者说这是关闭游标的一种方式。这样对吗？我的另一个问题是，如果我只想填充集合，我是否还需要这样做`OPEN p_result FOR`。毕竟我没有从光标中读取任何内容，所以：

```
SELECT *  FROM TABLE (CAST ( l_data AS Rpt_mapping_TableType)); 
```

应该足够了。

不？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T18:01:27.203

提交不会关闭游标。如果是这样，那么您的代码将无法正常工作。（尽管它可能会从 a 中解锁行`FOR UPDATE`，从而导致其他问题。）这是一个不关闭游标的提交示例：

```
SQL> variable test refcursor
SQL> begin
  2  open :test for select 1 from dual;
  3  end;
  4  /

PL/SQL procedure successfully completed.

SQL> commit;

Commit complete.

SQL> print test;

         1
----------
         1

SQL> 
```

如果你只是想填充一个集合，你最好使用类似的东西`SELECT ... BULK COLLECT INTO ...`。（并且可能使用`LIMIT`.）关键字`CURSOR`经常被过度使用。除非您将数据传递给另一个程序，否则隐式游标和批量收集通常更简单、更快。

# c++ - Qt QCryptographicHash 问题

> ID：11976568
> 
> 赞同：0
> 
> 时间：2012-08-15T20:14:34.537
> 
> 标签：c++, qt

我正在尝试分发一个程序，其中包括使用 QCryptographicHash 进行一些简单的身份验证。代码是这样的：

```
QString myDigest = mySalt + userName.toUpper();
QString myHash = QCryptographicHash::hash( myDigest.toAscii(), QCryptographicHash::Sha1 ).toHex(); 
```

给用户这个哈希值，它作为一个序列号。要使用该程序，他们必须输入他们的用户名和序列号。

问题是，这适用于某些计算机，但不适用于其他计算机。有谁知道可能导致这种不一致的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:19:37.837

也许 toUpper 有不同的行为取决于语言环境？qt 有像 C# 一样的 toUpperInvariant 吗？

# php - Symfony 2 Security：不断从用户提供者重新加载数据？

> ID：11976569
> 
> 赞同：10
> 
> 时间：2012-08-15T20:14:37.717
> 
> 标签：php, symfony

当用户已经登录时，Security 组件会在每个请求时不断地从用户提供程序重新加载数据。有没有办法避免这种情况？当您的用户提供程序不在本地数据库中时，例如，在 Web 服务中，这可能会大大降低系统速度。

在每个请求我得到这个：

```
[2012-08-15 20:07:30] security.DEBUG: Read SecurityContext from the session [] []
[2012-08-15 20:07:30] security.DEBUG: Reloading user from user provider. [] [] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-02T14:39:22.937

您可以通过从给定的安全上下文中覆盖您所依赖`refreshUser`的实现方法来决定是否根据您的需要为每个请求刷新用户。`UserProviderInterface`

请参考以下 API 文档：

[UserProviderInterface.html#method_refreshUser](http://api.symfony.com/2.7/Symfony/Component/Security/Core/User/UserProviderInterface.html#method_refreshUser)

> 由实现来决定是否应该完全重新加载用户数据（例如从数据库中），或者是否可以将 UserInterface 对象合并到一些用户/身份映射的内部数组中。

# post - 如何使用 browsermob-proxy 和 selenium 捕获 http POST 请求

> ID：11976571
> 
> 赞同：6
> 
> 时间：2012-08-15T20:14:41.807
> 
> 标签：post, selenium, proxy

您好，尝试使用 browsermob 代理 + selenium 测试框架在 HTTP POST 请求中捕获实际的 POST 数据。所以基本上我正在使用 selenium 运行自动化测试，我想在测试期间捕获键/值对和 HTTP POST 请求的实际 POST 数据。使用以下逻辑，我只能捕获 POST 标头的键/值对，但不能捕获实际的 POST 数据（也就是表单字段 id 值）。有没有办法实际捕获 POSTDATA（如嗅探应用程序，如 Firefox 中的篡改/实时标头）？

```
ProxyServer proxyServer = null;
proxyServer = new ProxyServer(9101);
proxyServer.start();

proxyServer.setCaptureContent(true);
proxyServer.setCaptureHeaders(true);

Proxy proxy = proxyServer.seleniumProxy();
proxy.setHttpProxy("localhost:9101");

//selenium test config code, omitted for brevity

proxyServer.addRequestInterceptor(new HttpRequestInterceptor() {
public void process(HttpRequest request, HttpContext context) throws  HttpException,  IOException {
   Header[] headers = request.getAllHeaders();
   System.out.println("\nRequest Headers\n\n");
       for(Header h : headers) {
           System.out.println("Key: " + h.getName() + " | Value: " + h.getValue());
       }

   }
}); 
```

我读到但无法开始工作的另一种方法是将 browsermob 代理服务器中的以下标志配置为 true：

```
proxyServer.setCaptureContent(true);
proxyServer.setCaptureHeaders(true); 
```

然后输出实际的 HAR 文件：

```
Har har = proxyServer.getHar();
Date date = new Date();
har.writeTo(new File("c:\\tmp\\har_" + date.getTime())); 
```

要查看响应的键/值对、POST 数据和实际内容……但是当我解析 HAR 文件时……我只能再次看到 POST 标头的键/值对……没有 POST 数据。 ..没有回应内容。我只对实际的 POST 数据感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T13:54:42.840

我也有同样的问题。作为解决方案，我捕获了所有数据，将 HAR 文件转换为 JSON，然后仅从 JSON 文件中过滤掉 POST 请求。

# oracle - 从 Oracle 中的刷新组中检查快照

> ID：11976572
> 
> 赞同：0
> 
> 时间：2012-08-15T20:14:46.673
> 
> 标签：oracle, views, refresh, privileges, materialized-views

我有一个架构 A 的 Oracle 数据库，它对 DBA_* 视图具有选择权限。

我也有一个没有这些特权的模式 B，但它有很多物化视图。

在模式 A 中，有三个刷新组，每个刷新组都有一些来自模式 B 的物化视图。

我想检查刷新组中是否有快照，但我想以 B 连接进行此检查。

我正在使用以下查询在架构 A 中执行此检查：

```
SELECT OWNER, NAME FROM DBA_SNAPSHOTS WHERE OWNER = 'B'
MINUS
SELECT OWNER, NAME FROM DBA_REFRESH_CHILDREN WHERE RNAME IN ('REFRESH_G1','REFRESH_G2','REFRESH_G3'); 
```

问题：

*   B 没有 DBA_* 视图的权限（并且它不能拥有）
*   如果我更改 ALL_* 视图的 DBA_* 视图，B 看不到刷新组（并且我不能将更改任何物化视图授予 B）

所以：

*   是否有另一种方法可以在 B 中执行此检查？
*   还是有另一种方法可以让 B 看到刷新组？
*   或者有没有办法使用 ALL_* 视图“冻结”查询结果，例如 B 会将查询结果视为 A？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:57:36.000

上`A`

```
CREATE OR REPLACE VIEW V_REFRESH_SNAPSHOT AS
SELECT OWNER, NAME FROM DBA_SNAPSHOTS WHERE OWNER = 'B'
MINUS
SELECT OWNER, NAME FROM DBA_REFRESH_CHILDREN WHERE RNAME IN ('REFRESH_G1','REFRESH_G2','REFRESH_G3');

GRANT SELECT ON A.V_REFRESH_SNAPSHOT TO B; 
```

从`B`

```
SELECT * FROM A.V_REFRESH_SNAPSHOT; 
```

# java - 如果 jar 文件 > 一定大小，Applet 无法在 Windows 7 上加载 Java 1.7

> ID：11976575
> 
> 赞同：13
> 
> 时间：2012-08-15T20:14:59.763
> 
> 标签：java, windows-7, jar, applet, java-7

我们有一个相当复杂的签名小程序，自从我们几年前开发它以来，它一直运行良好。它可以在我们关心的所有操作系统/浏览器配置上与 Java 1.5 和 1.6 一起正常运行。

它不适用于 Windows 7 或 Vista 上的任何浏览器中的 Java 1.7。我们已经看到它可以在 Windows XP 上运行。此小程序在由 Apache 使用 mod_proxy 连接到 Tomcat 6 提供服务的站点中运行。

这就是背景信息，因为我已将问题简化为一个非常简单的未签名小程序：

```
package myapplet;
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;

public class MyApplet extends Applet {
    private static final long    serialVersionUID    = 1L;

    public void paint(Graphics g) {
        g.drawRect(0, 0, 250, 100);
        g.setColor(Color.blue);
        g.drawString("Look at me, I'm a Java Applet!", 10, 50);
    }
} 
```

如果将此小程序类放入一个 jar 文件中，而另一个文件占用了 jar 文件的总（压缩）大小超过约 18KB，则当由本地运行的 Tomcat 6（或 Apache 2.2）提供服务时，该小程序不会加载。

我通过将文本文件添加到 jar 文件并更改文本文件的大小来玩弄。通过在文本文件中添加一个字符，我将其从工作变为不工作。

查看带有跟踪的控制台日志挂在它试图下载 jar 文件的位置。这是我认为挂起的线程：

```
"thread applet-com.bright.assetbank.clientsideedit.myapplet.MyApplet-1" prio=4 tid=0x048d8c00 nid=0x19b8 runnable [0x0700d000]
    java.lang.Thread.State: RUNNABLE
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(Unknown Source)
    at java.net.SocketInputStream.read(Unknown Source)
    at java.io.BufferedInputStream.read1(Unknown Source)
    at java.io.BufferedInputStream.read(Unknown Source)
    - locked <0x29fd75b0> (a java.io.BufferedInputStream)
    at sun.net.www.MeteredStream.read(Unknown Source)
    - locked <0x29fd75d0> (a sun.net.www.http.KeepAliveStream)
    at java.io.FilterInputStream.read(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(Unknown Source)
    at java.io.BufferedInputStream.read1(Unknown Source)
    at java.io.BufferedInputStream.read(Unknown Source)
    - locked <0x29fd7630> (a java.io.BufferedInputStream)
    at java.io.FilterInputStream.read(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack.downloadJAR(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack.access$000(Unknown Source)
    at sun.plugin.PluginURLJarFileCallBack$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin.PluginURLJarFileCallBack.retrieve(Unknown Source)
    at sun.net.www.protocol.jar.URLJarFile.retrieve(Unknown Source)
    at sun.net.www.protocol.jar.URLJarFile.getJarFile(Unknown Source)
    at sun.net.www.protocol.jar.JarFileFactory.get(Unknown Source)
    at sun.net.www.protocol.jar.JarURLConnection.connect(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.connect(Unknown Source)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFileInternal(Unknown Source)
    - locked <0x29f2a938> (a sun.plugin.net.protocol.jar.CachedJarURLConnection)
    at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFile(Unknown Source)
    - locked <0x29f2a938> (a sun.plugin.net.protocol.jar.CachedJarURLConnection)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.getJarFile(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.access$1000(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.ensureOpen(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$JarLoader.<init>(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)
    at com.sun.deploy.security.DeployURLClassPath.getLoader(Unknown Source)
    - locked <0x29dc7e98> (a com.sun.deploy.security.DeployURLClassPath)
    at com.sun.deploy.security.DeployURLClassPath.getResource(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    - locked <0x29dc7ed8> (a sun.plugin2.applet.Applet2ClassLoader)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    - locked <0x29dc7f78> (a sun.plugin2.applet.Applet2ClassLoader)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    - locked <0x29dc7f78> (a sun.plugin2.applet.Applet2ClassLoader)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.initAppletAdapter(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

以下是 Java 控制台中的最后 4 行：

```
network: Cache entry not found [url: http://localhost/editor.jar, version: null]
network: Connecting http://localhost/editor.jar with proxy=DIRECT
network: Connecting http://localhost:80/ with proxy=DIRECT
network: Connecting http://localhost/editor.jar with cookie "csrftoken=523154b2e73a76b6f2088464bd4df4f7" 
```

一些附加信息：

*   在浏览器中运行 Java 7 的 Windows Vista 上，如果我取消选中“启用黑名单撤销检查”，我们的主小程序（由 Apache->mod_proxy->tomcat 提供服务）会加载。如果选中此项，则不会加载。取消选中此选项在 Windows 7 上无效（即无法正常工作）。
*   我尝试在 Tomcat（本地）、Apache（本地）和 Apache（我通过 Internet 访问的远程服务器上）托管我的测试小程序。对于每一个，都有一个 jar 文件大小，超过该大小的小程序将无法加载 -*然而，这个大小在不同的 Web 服务器之间是不同的*。例如，在远程服务器上，jar 文件可能要大得多——它必须超过 ~1MB 才能加载。

尝试加载在 Windows 7 或 Vista 上的浏览​​器中运行的 Java 7 的小程序时，是否有其他人看到过这种行为？有解决办法吗？

**有关如何重现此问题的分步说明：**

*   将上面的代码复制到名为 MyApplet.java 的文件中，该文件位于名为 myapplet 的目录中
*   编译代码，即javac MyApplet.java
*   创建一个jar文件：cd到myapplet的父目录并输入*jar -cvf editor.jar myapplet*
*   创建一个简单的 HTML 页面来显示小程序。

例如：

```
<html>  
    <body>
        <applet code="myapplet.MyApplet" name="MyApplet" width="300" height="300" archive= "editor.jar" ></applet>
    </body>
</html> 
```

*   将此 HTML 文件和 jar 文件放在同一目录中，并从 Web 服务器（例如 Apache 或 Tomcat）提供服务。
*   在 Windows 7 操作系统上的 Chrome 或 IE 中访问此 HTML 页面。小程序将加载正常！
*   重复上述步骤，但这次在创建 jar 文件之前将一个小文件（例如图像（例如 <2KB））放入 myapplet 目录（MyApplet.class 旁边）。这也应该有效。
*   重复，但这次在创建 jar 文件之前将一个大图像（例如 >100KB）放入 myapplet 目录（MyApplet.class 旁边）。jar 文件现在会很大。这不起作用，即无法加载小程序。如果是这样，并且您使用的是 Windows 7，请告诉我。在测试时，不要忘记小程序是缓存的，所以在 java 控制台中按 x 键刷新类加载器缓存，按 f5 刷新浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:11:55.100

[Java 错误数据库中的错误 7183450](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7183450)的解决方法修复了此问题，即添加

```
-Djava.net.preferIPv4Stack=true 
```

到 JVM 参数。

例如，要让我的测试小程序运行（请参阅上面我的问题中的示例）：

```
<html>  
    <body>
        <applet code="myapplet.MyApplet" name="MyApplet" width="300" height="300" archive= "editor.jar" >
        <param name="java_arguments" value="-Djava.net.preferIPv4Stack=true">
    </applet>
    </body>
</html> 
```

这可能是因为托管我们的小程序的远程服务器当前不允许 IPv6 通信通过其防火墙。

有趣的是，我们的一些 Windows 7 机器在运行 Java 1.7_05 时即使使用此变通方法仍然无法工作，但在升级到 Java 1.7_06（现在可用）时确实可以工作（使用此变通方法）。

# java - jsp中的TXT文件不显示

> ID：11976584
> 
> 赞同：0
> 
> 时间：2012-08-15T20:15:33.393
> 
> 标签：java, jsp

嘿，我写了一个 JSP，它从文件系统中获取一个 .txt 文件，需要逐行显示它。但由于某种原因，它没有显示出来。提前致谢

```
<html>
<head>
<title>DrAssist Reporting Tool</title>
</head>
<body>
    <p>Welcome to the DrAssist Reporting Tool</p>
    <p>Suite Report Information</p>
    <h1>Suite : ${suite}</h1>
    <h1>NoOfTests:${noOfTests}</h1> 
    <h1>Test Name:${TestName}</h1>  
    <h1>FitnesseRestURL:${FitnesseRestURL}</h1> 
    <h1>Rights:${rights}</h1>   
    <h1>Wrongs:${wrongs}</h1>   
    <h1>Ignores:${ignores}</h1> 
    <h1>Exceptions:${exceptions}</h1>   
    <h1>TimeinMilliseconds:${timeOfExecution}</h1>  
    <%@ include file="Test1.html" %>
    <%@ page language="java" import="java.net.Authenticator,java.net.PasswordAuthentication,java.io.BufferedReader,java.net.*,java.io.*" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
     <%
     BufferedReader input = new BufferedReader(new FileReader("C:\\DrAssistQA\\reports\\120703-100125\\log-120703-100125.txt"));
     String line = "";
     while ((line = input.readLine()) != null) {
     System.out.println(line);
}
  out.flush();
  input.close();
%>

<%=line%>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:19:04.217

它会进入您的系统，而不是浏览器窗口。试试`response.write()`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:20:31.637

使用`out.println`而不是`System.out.println`. `out`是在 JSP 中自动创建的用于浏览器输出流操作的变量。也不要忘记 HTML 换行符。

```
while ((line = input.readLine()) != null) {
     out.println(line + "<BR>");
} 
```

# svn - SVN 只读取提交消息的第一个单词？

> ID：11976588
> 
> 赞同：1
> 
> 时间：2012-08-15T20:15:39.163
> 
> 标签：svn, commit, fedora

通常，当我将内容提交到我们的存储库时，我会执行 svn ci *file1 file2 file3 etc* -m “这是关于我正在提交的更改的消息。”

我目前正在另一台计算机上工作（它恰好运行 Fedora 而不是我通常的 Ubuntu），当我这样做时，它犹豫不决，说

```
svn: Commit failed (details follow):
svn: '/home/[path]/[word]' is not under version control 
```

其中 [word] 是我的提交消息的第二个单词。（例如，在上面的示例中（“这是一条消息...”），*“是”*）。

我不认为 SVN 在 Fedora 中的工作方式不同？
什么可能导致这个问题，我需要做什么才能在这里使用 -m 标志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:35:58.350

我遇到了同样的问题。如果我尝试直接在终端提交，那么`-m`工作正常。但是，如果我尝试使用脚本提交，那么它只会从评论字符串中获取第一个单词。即使使用该`--non-interactive`选项也无济于事。

最后，作为一种解决方法，在脚本中，我创建了一个包含注释字符串的临时文件，然后使用`--file`选项为提交命令提供注释。

```
echo ${COMMENT[$i]} > .tempistan
if [ -n "${FILES_TO_COMMIT[$i]}" ]; then
    svn_cmd="/usr/bin/svn --non-interactive commit --file .tempistan ${FILES_TO_COMMIT[$i]}"
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:22:06.563

在标准的 Unix 命令中，参数应该放在文件名**之前：**

```
$ svn ci -m "This is a message about the changes I'm committing." file1 file2 file3 etc. 
```

这可能不是两个系统之间的 Subversion 差异，而是使用的 shell。shell 解析命令，并将文件和参数发送到命令。这样，shell 处理文件扩展。

尝试将`-m`参数放在文件名之前。确保在提交消息周围使用引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:34:27.763

评论`-m`应该先...

```
$ svn ci -m "changes" file1 file2 file3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:00:42.960

问题是 svn 是一个调用 /usr/bin/svn 的函数，同时不允许提交者在签入时使用计算机的共享用户名，作为问责制措施。

它仍然很烦人，但是 /usr/bin/svn 可以使用，并且提交者在不使用 -m 标志后仍然可以向 nano 输入消息。

感谢@David_W 提出“type svn”的建议，它揭示了有问题的功能。

# magento - 对于自定义 magento 模块，将图像存储在与 Magento 类似的数据库/文件系统结构中是否理想？

> ID：11976589
> 
> 赞同：0
> 
> 时间：2012-08-15T20:15:41.237
> 
> 标签：magento

我在我的 mysql 数据库中搜索了 Magento 的图像文件名，但找不到。图像也存储在按字母顺序排列的文件夹和缓存文件夹中。

我应该为我的 Magento 模块做同样的事情吗？Magento 核心中是否有任何我应该重用的现有代码？

如果没有，我会坚持将图像的文件名存储在数据库中，并且所有上传都放在一个没有子文件夹的文件夹中。

现在我想了想，是时候问第二个问题了。*模块应该将图像上传到哪里？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:53:27.507

我创建了自己的数据库表来保存图像的路径，并且我将图像保存在 yourstore/media/youmodule/image Magento 有时会使事情变得困难，尝试让自己的方式有时更容易并且花费更少的时间。

# r - 带有 ggplot2 for R 的多色标题

> ID：11976590
> 
> 赞同：13
> 
> 时间：2012-08-15T20:15:42.957
> 
> 标签：r, ggplot2

我试图实现多色文本，如下所示：

[图表上的多色文本](https://stackoverflow.com/questions/3258101/multicolor-text-on-chart)

其中引用了这个：

[R中的多色文本](http://blog.revolutionanalytics.com/2009/01/multicolor-text-in-r.html)

这就是我想出的（在[此处](https://groups.google.com/forum/?fromgroups#!topic/ggplot2/54q_qdTE1L0)的帮助下）：

```
require(ggplot2)
require(grid)
png(file="multicolortitle.png",width=800,height=500)
qplot(x = hp,y = mpg,data = mtcars,color=factor(mtcars$cyl),size=2) +
  scale_colour_manual(values = c("red3","green3","blue3")) + 
  theme_bw() +
  opts(title = " \n ") +
  opts(legend.position = "none") 
spacing  <- 20
grid.text(0.5, unit(1,"npc") - unit(1,"line"), 
          label=paste("4 cylinder,",paste(rep(" ",spacing*2), collapse='')),
          gp=gpar(col="red3", fontsize=16,fontface="bold"))
grid.text(0.5, unit(1,"npc") - unit(1,"line"), 
          label=paste(paste(rep(" ",spacing), collapse=''),"6 cylinder,",
            paste(rep(" ",spacing), collapse='')),
          gp=gpar(col="green3", fontsize=16,fontface="bold"))
grid.text(0.5, unit(1,"npc") - unit(1,"line"), 
          label=paste(paste(rep(" ",spacing*2), collapse=''),"8 cylinder"),
          gp=gpar(col="blue3", fontsize=16,fontface="bold"))
grid.text(0.5, unit(1,"npc") - unit(2,"line"), 
          label=paste(paste(rep(" ",spacing*0), collapse=''),
            "- Horsepower versus Miles per Gallon"),
          gp=gpar(col="black", fontsize=16,fontface="bold"))
dev.off() 
```

这是结果图：

![# Cylinders（mtcars 数据集）的马力与每加仑英里数的关系](../Images/e3aedc51bd92027aa392a9b24d78bab8.png)

所以，我的问题是：有没有更优雅的方法可以用于此？例如，我希望能够使用`ggsave`，为此创建间距是一个高度手动的过程 - 不适合我需要自动制作数百个这种性质的图的场景。我可以看到在此基础上编写一些函数，但也许有更好的方法来实现与基本绘图函数一起使用的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T22:50:22.273

这是一种更通用的方法，它利用了一些额外的**网格**功能。它不是特别完善，但它可能会给你一些有用的想法：

```
library(grid)
library(ggplot2)

p <- ggplot(data=mtcars, aes(mpg,hp,color=factor(cyl),size=2)) + 
       geom_point() + theme_bw() +
       opts(title = " \n ") + opts(legend.position="none")

## Get factor levels 
levs <- levels(factor(mtcars$cyl))
n <- length(levs)

## Get factors' plotting colors
g <- ggplot_build(p)
d <- unique(g$data[[1]][c("colour", "group")])
cols <- d$colour[order(d$group)]

## Use widest label's width to determine spacing
labs <- paste(levs, "cylinder")
xlocs <- unit(0.5, "npc") + 
         1.1 * (seq_len(n) - mean(seq_len(n))) * max(unit(1, "strwidth", labs))

## Plot labels in top 10% of device
pushViewport(viewport(y=0.95, height=0.1))
    grid.text(paste(levs, "cylinder"), 
              x = xlocs, y=unit(0.5, "lines"), 
              gp = gpar(col=cols, fontface="bold"))
    grid.text("- Horsepower versus Miles per Gallon", 
              y = unit(-0.5, "lines"))
upViewport()

## Plot main figure in bottom 90% of device
pushViewport(viewport(y=0.45, height=0.9))
    print(p, newpage=FALSE)
upViewport() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-10T07:44:11.210

将单词包装在虚拟表中的一种可能策略，

```
library(gridExtra)
library(grid)
library(ggplot2)
title = c('Concentration of ','affluence',' and ','poverty',' nationwide')
colors = c('black', '#EEB422','black', '#238E68','black')

grid.arrange(ggplot(), 
             top = tableGrob(t(title), 
                             theme=ttheme_minimal(padding=unit(c(0,2),'mm'),
                                                  base_colour = colors))) 
```

[在此处输入图像描述](https://i.stack.imgur.com/ue017.png)

# sql-server - SQL Server 中的完整数据库版本控制

> ID：11976592
> 
> 赞同：2
> 
> 时间：2012-08-15T20:15:47.280
> 
> 标签：sql-server, sql-server-2008, versioning, database-versioning

首先，让我指出，我阅读了所有关于数据库版本控制的帖子，但这并不是我想要的，但我想不出一个更好的标题（这里的“完整”这个词是钥匙）。

我有一个“编译数据库”，它包含公共交通路线规划器的所有类型的优化记录和统计数据，它是通过另一个数据库的程序生成的。编译的数据库在它处于活动状态时永远不会改变，除了用户活动监控和缓存。有些表包含多达 2-300,000 条记录。

一旦输入数据库发生更改，此编译数据库将完全更新。因此，任何新的数据库版本都不会以任何方式与任何其他先前版本进行交互。但我想单独存储每个版本，如果用户愿意，我有机会从程序中使用它（把它想象成公共交通地图的历史）。

唯一合理的方法是简单地为每个版本制作不同的物理数据库，这既不难也不错，但我想问你是否知道对完整数据库进行版本控制的任何机制（不仅仅是其中的部分数据，就像其他帖子一样问），目的是使整个事情更加合乎逻辑和干净。

我使用的是 SQL Server 2012，但在服务器上可能是 2008 R2。

如果您想将版本化数据存储在同一个数据库中（并在每个表中添加一个 VersionID 列）忘记它，因为在具有 2-300,000 条记录的表上，10 个版本（将在不到 3 个月的时间内累积) 将意味着超过 300 万条记录，其中只有 300,000 条会被使用，所以，没办法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T21:03:58.837

我认为多数据库方法很好。您可以尝试进行存储级重复数据删除。这可能会大大减少存储使用量。只需确保创建新数据库作为备份并从旧数据库恢复，以使它们大部分字节相同。

# sql - 准备好的语句如何工作？说我的查询已编译是什么意思？

> ID：11976593
> 
> 赞同：6
> 
> 时间：2012-08-15T20:15:53.630
> 
> 标签：sql, prepared-statement

我不确定我是否理解与速度或效率有关的准备好的陈述。我读到准备好的语句是在数据库服务器上编译的，可以反复使用。

但是，假设我有一个网页。它执行一个查询。下一个人打开页面，相同的查询，只是该用户的不同参数。

在网页的第二次点击中，准备好的语句是否正在查看 dbms 以查看该特定查询是否已存在于数据库服务器上？我不明白说该语句已编译并且可以“一遍又一遍地”运行是什么意思。它不会在每次运行页面时都准备好？

此外，这与 sql 注入无关。这是我理解的一部分，因为它与编译有关。

谢谢。

编辑：我已经搜索过，但我找不到答案。我只被引导到这个问题。

编辑：根据下面的评论，鉴于我的情况，我看不到任何效率优势。安全是的。整个编译的东西。没有。有没有人可以举出一个场景来作为满足效率问题的例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:17:03.043

在第一次执行期间创建的查询计划可以被数据库缓存（可能为所有连接到数据库的应用程序提供好处，运行相同的查询）或数据库驱动程序（为应用程序提供好处，如只要它没有重新启动）。每次执行时仍会进行“软解析”，但通常要便宜得多。

请注意，您的里程可能会有所不同，具体取决于数据库类型、驱动程序等。语句缓存通常也是有限的，这意味着只有一定数量的语句将保留在缓存中。

[Ask Tom](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:2588723819082)提供了一些关于软解析和硬解析之间差异的答案。

# controller - Ember 应用中更多同类型的 ArrayController

> ID：11976594
> 
> 赞同：2
> 
> 时间：2012-08-15T20:16:09.013
> 
> 标签：controller, ember.js

在处理对象数组（例如`Contact`s）`App.contactsController`并且每个联系人都有`Message`与他相关的 s 数组的情况下，最佳实践是什么？

我想到的方法：

1）在初始化对象并将其推送到contactsController时，为每个联系人创建messagesController，如下所示：

```
App.contactsController.pushObject(App.Contact.create({
    "id" : some_id,
    "name" : some_name,
    "messages" : App.MessagesController.create();
})); 
```

2）只为应用程序实例化一个messagesController并以某种方式过滤消息。这似乎是一个非常糟糕的解决方案，但它绝对是一个选择。

3) 根本不要使用 ArrayController。但是，当我不使用它的功能时，我为什么要使用它呢？

请帮我做决定。如果有什么更好的，我愿意听从你的意见。请解释您首选解决方案的优点（和可能的缺陷）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T03:50:44.937

控制器最适合管理应用程序状态。我见过的大多数示例都代理单个对象或数组，因此框架类作为起点是有意义的。我还没有看到有人用它们来管理协会。为此，我建议看看 ember-data：[https ://github.com/emberjs/data](https://github.com/emberjs/data)

如果您要在不使用 ember-data 的情况下执行此操作，我建议您选择 #1 的修改版本。您仍然提供了扩展 ArrayController 的 ContactsController，但不要将另一个控制器用于内部消息数组。而是使用简单对象的内部数组或引用 App.Message 模型实例的 message_id 列表。

希望这可以帮助...

# c - 输出不显示

> ID：11976600
> 
> 赞同：1
> 
> 时间：2012-08-15T20:16:29.040
> 
> 标签：c, windows

我试图在用 C 编写的 Windows 应用程序中显示随机数，我的程序编译但窗口中没有任何显示。我使用 Visual Studio 2010，有人提到 Microsoft 编译器无法识别我的 for 循环？我不确定您需要多少代码，所以我全部添加了。

```
#include <windows.h>
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

#define MAX_BUFF_SIZE 1024
#define IDM_FILE_RUN 40001
#define IDM_APP_EXIT 40002

//Window Function
LRESULT CALLBACK WindowFunc(HWND, UINT, WPARAM, LPARAM);

int WINAPI WinMain(HINSTANCE hThisInst, HINSTANCE hPrevInst, 
               LPSTR lpszArgs, int nWinMode)
{

WNDCLASS wcls;
HWND hwnd;
MSG msg;

// Name of window and window class
LPCWSTR szWinName   = L"Threads Program";
LPCWSTR szClassName = L"ThreadsProgram";

wcls.hInstance = hThisInst;
wcls.lpszClassName = szClassName;
wcls.lpfnWndProc = WindowFunc;
wcls.style = 0;
wcls.hIcon = LoadIcon(NULL, IDI_APPLICATION);
wcls.hCursor = LoadCursor(NULL, IDC_ARROW);
wcls.lpszMenuName = NULL;
wcls.cbClsExtra = 0;
wcls.cbWndExtra = 0;
wcls.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);

// Register windows class
if(!RegisterClass(&wcls))
{
    return 0;
}

// Create main window
hwnd = CreateWindow(szClassName,
    szWinName,
    WS_OVERLAPPEDWINDOW,
    100,
    100,
    400,
    400,
    HWND_DESKTOP,
    NULL,
    hThisInst,
    NULL );

// Show main window
ShowWindow(hwnd, nWinMode);
UpdateWindow(hwnd);

// Message loop
while(GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
}
return (int)msg.wParam;
}

void MyOutputDebugString(const char *str, ...)
{
char buf[4096];
va_list ptr;
va_start(ptr,str);
vsprintf(buf,str,ptr);
OutputDebugStringA(buf); 
}

LRESULT CALLBACK WindowFunc(HWND hMainWindow, UINT message, 
                        WPARAM wParam, LPARAM lParam)

{
static char textBuffer[MAX_BUFF_SIZE];
static int nRead;

switch(message)    
{
case WM_CREATE:
    {
        HMENU hMenu;
        HMENU hMenuPopup;

        // create menus
        hMenu = CreateMenu();
        hMenuPopup = CreateMenu();

        // populate menus
        AppendMenu(hMenuPopup, MF_STRING,  IDM_FILE_RUN,   L"&Choose Balls");   
        AppendMenu(hMenuPopup, MF_STRING,  IDM_APP_EXIT,   L"&Exit");  
        AppendMenu(hMenu, MF_POPUP, (UINT_PTR)hMenuPopup,   L"&File");

        // attach menus to main window
        SetMenu(hMainWindow, hMenu);
    }
    break;
case WM_COMMAND:
    {
        // Obey command
        switch(LOWORD(wParam))
        {
        case IDM_FILE_RUN:

            {
                int i;
                srand (time(NULL));
                for (i = 0; i < 6; i++)
                MyOutputDebugString ("%i\n", (rand ()% 49) +     1);

    return 0;

            }
            break;
        case IDM_APP_EXIT:
            SendMessage(hMainWindow, WM_CLOSE, 0, 0);
            break;
        }
    }
    break;
case WM_DESTROY:
    PostQuitMessage(0);
    break;
default:
    return DefWindowProc(hMainWindow, message, wParam, lParam);
}
return 0;

}// Window function 
```

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:09:22.873

在窗口中显示一些数字的最简单方法是使用可以显示文本的控件。我已修改您的代码以创建多行编辑窗口。循环现在创建一个字符串并将其`for`附加到编辑控件（通过选择文本的结束位置并替换它）。

```
#include <windows.h>
#include <Windowsx.h>
#include <stdio.h>
#include <time.h>
#include <stdlib.h>

#define MAX_BUFF_SIZE 1024
#define IDM_FILE_RUN 40001
#define IDM_APP_EXIT 40002
#define IDC_OUTPUT   40003

//Window Function
LRESULT CALLBACK WindowFunc(HWND, UINT, WPARAM, LPARAM);

int WINAPI WinMain(HINSTANCE hThisInst, HINSTANCE hPrevInst, 
               LPSTR lpszArgs, int nWinMode)
{

WNDCLASS wcls;
HWND hwnd;
MSG msg;

// Name of window and window class
LPCWSTR szWinName   = L"Threads Program";
LPCWSTR szClassName = L"ThreadsProgram";

wcls.hInstance = hThisInst;
wcls.lpszClassName = szClassName;
wcls.lpfnWndProc = WindowFunc;
wcls.style = 0;
wcls.hIcon = LoadIcon(NULL, IDI_APPLICATION);
wcls.hCursor = LoadCursor(NULL, IDC_ARROW);
wcls.lpszMenuName = NULL;
wcls.cbClsExtra = 0;
wcls.cbWndExtra = 0;
wcls.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);

// Register windows class
if(!RegisterClass(&wcls))
{
    return 0;
}

// Create main window
hwnd = CreateWindow(szClassName,
    szWinName,
    WS_OVERLAPPEDWINDOW,
    100,
    100,
    400,
    400,
    HWND_DESKTOP,
    NULL,
    hThisInst,
    NULL );

    HANDLE  hEdit = CreateWindow(L"EDIT", NULL, WS_BORDER | WS_CHILD | WS_VISIBLE | WS_HSCROLL | WS_VSCROLL | ES_MULTILINE, 10, 10, 300, 300, hwnd, (HMENU)IDC_OUTPUT, hThisInst, NULL);

// Show main window
ShowWindow(hwnd, nWinMode);
UpdateWindow(hwnd);

// Message loop
while(GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
}
return (int)msg.wParam;
}

void MyOutputDebugString(const char *str, ...)
{
char buf[4096];
va_list ptr;
va_start(ptr,str);
vsprintf(buf,str,ptr);
OutputDebugStringA(buf);
}

LRESULT CALLBACK WindowFunc(HWND hMainWindow, UINT message, 
                        WPARAM wParam, LPARAM lParam)

{
static char textBuffer[MAX_BUFF_SIZE];
static int nRead;

switch(message)    
{
case WM_CREATE:
    {
        HMENU hMenu;
        HMENU hMenuPopup;

        // create menus
        hMenu = CreateMenu();
        hMenuPopup = CreateMenu();

        // populate menus
        AppendMenu(hMenuPopup, MF_STRING,  IDM_FILE_RUN,   L"&Choose Balls");   
        AppendMenu(hMenuPopup, MF_STRING,  IDM_APP_EXIT,   L"&Exit");  
        AppendMenu(hMenu, MF_POPUP, (UINT_PTR)hMenuPopup,   L"&File");

        // attach menus to main window
        SetMenu(hMainWindow, hMenu);
    }
    break;
case WM_COMMAND:
    {
        // Obey command
        switch(LOWORD(wParam))
        {
        case IDM_FILE_RUN:

            {
                int i;
                srand (time(NULL));
                for (i = 0; i < 6; i++)
                {
                    int number = (rand ()% 49) +     1;
                    MyOutputDebugString ("%i\r\n", number);
                    wchar_t buffer[8];
                    wsprintf(buffer, L"%i\r\n", number);

                    HWND    h = GetDlgItem(hMainWindow, IDC_OUTPUT);
                    int text_len = Edit_GetTextLength(h);
                    Edit_SetSel(h, text_len, text_len);
                    Edit_ReplaceSel(h, buffer);
                }

    return 0;

            }
            break;
        case IDM_APP_EXIT:
            SendMessage(hMainWindow, WM_CLOSE, 0, 0);
            break;
        }
    }
    break;
case WM_DESTROY:
    PostQuitMessage(0);
    break;
default:
    return DefWindowProc(hMainWindow, message, wParam, lParam);
}
return 0;

}// Window function 
```

但是，这样做存在许多问题：

*   文本限制为 65535
*   文本周围的边框很难看，您可能需要查看 CreateWindowEx() 以获取更多边框选项
*   添加行时文本不会自动向下滚动
*   使用系统默认字体而不是更典型的 GUI/对话框字体
*   不使用视觉样式（但这取决于您的清单和链接器设置，而不是代码）

[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773169%28v=vs.85%29.aspx)阅读有关标准 Windows 控件的更多信息。

如果您打算做更多的 UI 工作，那么您可能想要考虑使用 GUI 框架。他们倾向于摆脱 UI 编程的许多乏味本质，但也有自己的学习曲线。但是你的时间最好花在学习其中之一，而不是低级 Windows UI 编程，当你只尝试做一些看似简单的事情时，这可能会非常迟钝。

# algorithm - 带有加权过滤器的字符串的模式识别算法？

> ID：11976601
> 
> 赞同：2
> 
> 时间：2012-08-15T20:16:30.440
> 
> 标签：algorithm, machine-learning, pattern-matching, pattern-recognition

是否有模式识别算法可以指定匹配或丢失某些参数的权重？例如，假设我有 3 个字符串：

```
str1 = Samsung 11.6" 64GB Slate PC Tablet with Wi-Fi - Black  
str2 = Samsung Series 7 XE700T1A-A05US 11.6-Inch Slate (64 GB, Win 7 Pro)
str3 = Samsung Series 7 XE700T1A-A03US 11.6-Inch Slate (128 GB SSD, Win 7 HP) 
```

我想将 str2 与 str1 匹配，因为它们的 GB 相等，即使传统的字符串距离会说 str2 更接近 str3。实际上，我希望任何东西都可以处理大量不同权重的参数。

任何指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T20:36:07.740

1.  创建命名实体的**字典**，例如“Samsung”、“Inch”、“Wi-Fi”等。
2.  创建一组**规则**以提取特征，例如`{Number}{Space}?"GB"`千兆字节或`{TradeMark}{Space}"Series"{Space}{Number}`商标和系列。
3.  创建**特征向量**，将已知属性设置为相应的值，将未知属性设置为“NA”（不可用）。
4.  测量**项目之间的距离**（表示为特征向量），而不是字符串。

注意：为了更轻松地使用字典和规则，请考虑使用[GATE](http://gate.ac.uk/)框架。要测量 2 个向量之间的距离，您可以使用[cosine distance](http://en.wikipedia.org/wiki/Cosine_similarity)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:22:00.747

您可能想要做的是开发一个解析器，它从字符串中提取相关信息，然后对其进行加权，而不是对字符串本身进行操作。

这可能包括生成一组正则表达式来提取您想要的花絮（这些被称为“特征”。例如，GB）或使用更复杂的解析或 NLP 技术。然后，您将自己开发一个权重函数或使用某种[聚类](https://en.wikipedia.org/wiki/Data_clustering)（用于相似性）或[分类器](https://en.wikipedia.org/wiki/Classifier_%28mathematics%29)（用于将事物分类）

对于您的简单示例，生成看起来像的正则表达式`GB [0-9]+`应该足以进行比较。

# c# - 如何创建与 Rectangle 兼容的自定义结构？

> ID：11976602
> 
> 赞同：1
> 
> 时间：2012-08-15T20:16:30.273
> 
> 标签：c#, struct, custom-fields

我想创建一个 Rectangle 结构，它`byte`的 x、y、宽度和高度字段为 s 而不是`int`s。它应该与通常的兼容`Microsoft.Xna.Framework.Rectangle`（铸造`(bytesRectangle)`应该可以）。我怎么做？

**更新：**使用这个结构帮助我为每个图块节省了 12 个字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:21:35.007

您必须定义一个转换来将您的类型转换为 XNA 框架所期望的类型。

见这里：http: [//msdn.microsoft.com/en-us/library/09479473.aspx](http://msdn.microsoft.com/en-us/library/09479473.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:26:23.467

我很想知道实现这个结构的设计选择。查看 Microsoft.Xna.Framework.Rectangle，我们看到有 30 多个属性和成员。为了节省几个字节，这需要大量重现。如果您唯一的目标是节省一些字节，那么可能有更好的方法。例如，如果您想将数据保存在更小的空间中，您可以定义一个对象和一个强制转换来存储它。像这样的东西：

```
class SmallRectangle
{
    public byte x { get; set; }
    public byte y { get; set; }

    public SmallRectangle(byte inx, byte iny)
    {
       x = inx;
       y = iny;
    }

    public static explicit operator SmallRectangle(Microsoft.Xna.Framework.Rectangle big)
    {
        SmallRectangle small = new SmallRectangle((byte)big.x, (byte)big.y);

        return small;
    }

    public WriteToFile(FileStream out)
    {
       //....
    }
} 
```

当然，一个完整的实现将包括测试以确保铸造等没有数据丢失。

根据您在下面的评论：这不是前进的方向。如果您在使用 XNA 时确实需要通过 XNA 节省内存，那么您应该创建一个小矩形管理器类，它不会以相同的方式以相同的属性存储它们。但是这个类擅长在需要时创建 XNA 类。不要使小矩形类（或管理器）“兼容”。

在内存中存储所需数据的最佳方法是仅存储四个字节而没有开销。没有开销存储两个字节的最佳方法是使用 Tuple 类。

所以我建议你创建一个矩形管理器类，在内部将矩形存储为元组，然后根据需要将它们“装箱”和“拆箱”到 Xna 对象中。

# magento - magento 目录排序

> ID：11976605
> 
> 赞同：0
> 
> 时间：2012-08-15T20:16:35.133
> 
> 标签：magento

在 magento 中，我们可以按价格对目录进行排序。我有一些价格为零的产品（这意味着我们回电给客户或客户打电话给我们与我们核对价格）

有没有办法按价格（从低到大）排序，零价格的产品将在列表的末尾？？？

我认为对于这样的解决方案，我必须在产品集合模型中添加一些额外的条件，并将这个零价格项目加入到集合的末尾，但我不知道该怎么做。

可能有人知道如何，或者知道另一种解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:47:12.687

转到 Mage_Catalog_Model_Category 和 262 行附近，功能：getProductCollection 将代码修改为类似的内容：

```
public function getProductCollection()
{
    $collection = Mage::getResourceModel('catalog/product_collection')
        ->setStoreId($this->getStoreId())
        ->addCategoryFilter($this)
        ->addAttributeToSort('price', 'desc');
    return $collection;
} 
```

[您可以在此网址http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento) gl上获得有关收藏的更多信息

# android - 处理 Android 自定义内容提供程序中的（跨进程）异常

> ID：11976611
> 
> 赞同：11
> 
> 时间：2012-08-15T20:16:55.493
> 
> 标签：android, exception-handling, error-handling, android-contentprovider

我的 Android 应用程序中有一个自定义内容提供程序，它运行良好。我希望其他应用程序也可以访问我的内容提供商。我想要一些干净的方式来传达异常和错误，但据我所知，Android 内容提供程序框架没有提供任何跨进程传播异常的方法。

我应该如何向我的调用者指示异常状态？我是否必须以某种方式将其编码到我返回的数据中并依靠客户来检查它？有没有其他选择？如果编码成普通的返回数据，最好的方法是什么？`Cursor`（我可以看到调用返回的许多替代方案`query`，但是`Uri`返回的`insert`，或`int`返回的`update`or`delete`呢？）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-17T19:40:09.440

有一个简短的`RuntimeException`子类列表，如果在提供程序中抛出，将在客户端应用程序中重新抛出。这些包括：

*   `IllegalStateException`
*   `IllegalArgumentException`
*   `NullPointerException`
*   `SecurityException`
*   `BadParcelableException`

`Parcel.writeException`添加了对文档的更新

*   `UnsupportedOperationException`
*   `NetworkOnMainThreadException`

来源：[创建内容提供者](http://developer.android.com/guide/topics/providers/content-provider-creating.html)提到`IAE`和`NPE`；我猜其他人会基于[Javadoc 为`Parcel.writeException`](http://developer.android.com/reference/android/os/Parcel.html#writeException%28java.lang.Exception%29).

客户端应用程序只会获取详细消息，而不是堆栈跟踪或原因堆栈。对于可以编码为`String`（详细消息）的异常状态，这是一个合理的选择。

我仍然对其他解决方案感兴趣，也是。

# regex - 正则表达式拆分扩展 CSV 表示法

> ID：11976613
> 
> 赞同：1
> 
> 时间：2012-08-15T20:17:09.807
> 
> 标签：regex, csv, data-transfer

我有一个自定义传输格式，它以以下格式打包数据

[a:000,"名称","字段","字段","字段"]

我正在尝试将各个行拆分出来以获取左括号之后的第一个字符和所有 CSV 值。a、000、“名称”、“字段”、“字段”等...

我拼凑起来

```
[^?,:\[\]] 
```

这会将所有单个字符拆分出来，而不是冒号/逗号分隔的字段。我知道这不会在引号内容纳逗号。所以这显然是垃圾！

嵌入式逗号并不是一个真正的大问题，因为我们控制着两端的数据，所以我可以逃避它们。

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:50:35.720

与其尝试拆分多个字符并忽略其中一些，不如尝试匹配您想要匹配的任何内容。由于您没有指定实现语言，因此我将其发布为 Perl，但您可以将其应用于任何支持后向和前瞻的风格。

```
while ($subject =~ m/(\w+(?=:)|(?<=:)\d+|(?<=,")[^"]*?(?="))/g) {
    # matched text = $&
} 
```

**解释：**

```
# (\w+(?=:)|(?<=:)\d+|(?<=,")[^"]*?(?="))
# 
# Match the regular expression below and capture its match into backreference number 1 «(\w+(?=:)|(?<=:)\d+|(?<=,")[^"]*?(?="))»
# Match either the regular expression below (attempting the next alternative only if this one fails) «\w+(?=:)»
# Match a single character that is a “word character” (letters, digits, and underscores) «\w+»
# Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
# Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=:)»
# Match the character “:” literally «:»
# Or match regular expression number 2 below (attempting the next alternative only if this one fails) «(?<=:)\d+»
# Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=:)»
# Match the character “:” literally «:»
# Match a single digit 0..9 «\d+»
# Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
# Or match regular expression number 3 below (the entire group fails if this one fails to match) «(?<=,")[^"]*?(?=")»
# Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=,")»
# Match the characters “,"” literally «,"»
# Match any character that is NOT a “"” «[^"]*?»
# Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
# Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=")»
# Match the character “"” literally «"» 
```

[看到它工作](http://ideone.com/sBZGa)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T17:15:16.110

您当然可以通过正则表达式来做到这一点，但合适的工具很可能是 CSV 解析器。你可以试试 Dave DeLong 为 Objective C 编写的这个：

[https://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)

# macos - OSX在事件后显示默认窗口

> ID：11976615
> 
> 赞同：1
> 
> 时间：2012-08-15T20:17:26.143
> 
> 标签：macos

我已经设法制作了一些不错的 iPhone 应用程序，但是现在我被要求尝试使用 OSX 应用程序。专业的变化，但是我有一个具体的问题。

我正在编写一个应用程序来监视 USB 上的特定制造商和设备 ID。在它找到之前，我只希望显示菜单，而不是窗口。我有这个。我还有检测 USB 设备的代码，所以当我检测到它时，我要做的第一件事就是显示我的主窗口。以下代码在设备检测后位于我的 main.m 文件中。

```
 NSWindowController *mainWindow=[[NSWindowController alloc] initWithWindowNibName:@"MainMenu"];
    [mainWindow showWindow:self]; 
```

从我读过的所有内容来看，这应该可以工作，但是......“self”是一个未声明的标识符。我知道这将是一件简单的事情，但是我不能为我的生活想什么！:-) 在此先感谢克里斯 H

# javascript - Javascript/Jquery setTimeout 函数不适用于长 html

> ID：11976616
> 
> 赞同：0
> 
> 时间：2012-08-15T20:17:29.500
> 
> 标签：javascript, jquery, html

所以我从某人那里得到了这个功能，它的作用是在等待 10 秒后用 swf 或其他 html 代码替换我的图像，就是这样。

```
<input name="sample_check3" id="sample_check3" value="1" type="radio" onclick="showStuff('stage');setTimeout(function() {$('#stage').html('HTML CODE HERE'); }, 10000)""/> 
```

如果我只是在其中放一个简单的 html 段落或标题，它会成功地用它替换图像，但是当我尝试将我的 swf 代码放在那里时，它认为 swf 嵌入代码是 HTML，基本上只是“回声”它马上就在它所在的地方，而不是等待。这就是我用它代替的。

```
 <input name="sample_check3" id="sample_check3" value="1" type="radio" onclick="showStuff('stage');setTimeout(function() {$('#stage').html('<OBJECT style="z-index:2; position:absolute; top:20%; left:44%;" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="320" HEIGHT="240" id="rice" ALIGN="">
<PARAM NAME=movie VALUE="rice.swf"> <PARAM NAME=quality VALUE=high> <PARAM NAME=bgcolor VALUE=#333399> <EMBED src="rice.swf" quality=high bgcolor=#333399 WIDTH="320" HEIGHT="240" NAME="rice" ALIGN="" TYPE="application/x-shockwave-flash" PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED> </OBJECT>'); }, 10000)""/> 
```

我尝试过使用单引号、双引号、转义引号，这一切都会产生 sam 结果。它只是将 swf 放在它`); }, 10000)""/>`之后打印出来的位置，因为它基本上忘记了它的 javascript（不会忘记，我只是不知道如何解释它 xD） 无论如何，我希望有人可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:24:07.717

最后你有一个额外`"`的：

```
<input name="sample_check3" id="sample_check3" value="1" type="radio" 
    onclick="showStuff('stage'); 
    setTimeout(function() {$('#stage').html('HTML CODE HERE'); }, 10000)"" /> <--- 
```

如果这不是问题，我们可能需要查看 html 中的设置`.html()`。

**编辑**：我不知道我昨天怎么错过了你的第二个例子。但是，在查看您的 html 时，我强烈建议您不要将 javascript 内联。您可以利用 jQuery 的强大功能，并可以像这样设置您的点击处理程序：

**HTML**：

```
<input name="sample_check3" id="sample_check3" value="1" type="radio" /> 
```

**Javascript**：

```
$('#sample_check3').on('click', function() {
    showStuff('stage');
    setTimeout(function() {
        $('#stage').html('<OBJECT style="z-index:2; position:absolute; top:20%; left:44%;" 
            classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"  
            codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" 
            WIDTH="320" HEIGHT="240" id="rice">
            <PARAM NAME=movie VALUE="rice.swf"> 
            <PARAM NAME=quality VALUE=high>
            <PARAM NAME=bgcolor VALUE=#333399> 
            <EMBED src="rice.swf" quality=high bgcolor=#333399 WIDTH="320" HEIGHT="240" 
                NAME="rice" TYPE="application/x-shockwave-flash" 
                PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer">
            </EMBED>
        </OBJECT>');
    }, 10000) ;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:33:05.353

我会像这个**[jsFiddle 示例](http://jsfiddle.net/j08691/JAYyu/)**那样将那一大块代码分成它自己的函数。这应该使维护更容易。请注意，在示例中，我删除了您的调用，`showStuff`只是因为我没有代码，并且更容易删除它作为示例而不是编写一个虚拟函数。

# ruby-on-rails - 在 RubyMine 中禁用所有运行/调试选项

> ID：11976617
> 
> 赞同：8
> 
> 时间：2012-08-15T20:17:34.283
> 
> 标签：ruby-on-rails, ubuntu, virtualbox, rubymine

我在 Ubuntu 12.04 Virtualbox 上运行 RubyMine，我可以从命令行很好地运行 rails 服务器。但是，所有运行/调试选项在 RubyMine 中都被完全禁用。我什至无法创建新的运行配置。

这可能是因为在 Virtualbox 上运行它吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-22T20:14:26.260

这发生在我身上，通过以下步骤解决了问题：

1.  关闭 RubyMine
2.  从项目目录中删除 .idea 文件夹
3.  重新打开 RubyMine 并打开你的项目目录
4.  RubyMine 应该自动检测现有的 Rails 应用程序并创建默认启动配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T10:52:51.613

我也遇到了 RubyMine 崩溃，但删除 .idea 文件夹对我不起作用 - 重新打开 RubyMine 后，这些选项仍然被禁用。

经过一番研究，我意识到，运行配置是在项目被索引之后构建的。单击窗口底部状态栏中的进度条，显示后台任务的进度。等到所有任务完成后才解决了我的问题。

# jquery - 如何为 smoothDivScroll 制作按钮

> ID：11976620
> 
> 赞同：0
> 
> 时间：2012-08-15T20:17:57.497
> 
> 标签：jquery, smooth-scrolling

我想使用标签制作 2 个简单的可点击链接，以使用 Thomas Kahn 的 JQuery SmoothDivScroll 更改幻灯片的滚动方向。我想让向右和向左的滚动方向都成为可点击的链接，但不知道该怎么做。任何人都可以帮忙吗？

到目前为止我的代码在[http://www.festifood.nl/test.html](http://www.festifood.nl/test.html)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:33:17.957

下面是一种代码：

```
 <script type="text/javascript">
        $(document).ready(function() {
            $("#makeMeScrollable").smoothDivScroll({ 
                mousewheelScrolling: true,
                manualContinuousScrolling: true,
                visibleHotSpotBackgrounds: "always",
                autoScrollingMode: "onstart"
            });
        });
    </script> 
```

此链接下方显示了该代码的外观以及如何对其进行编码：

[http://www.smoothdivscroll.com/](http://www.smoothdivscroll.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:41:48.437

下面是它的工作原理。在“$(document).ready(function(){”函数的末尾添加：

```
$("#right").click(function() {
  $("#makeMeScrollable").smoothDivScroll("option","autoScrollDirection","right");
});

$("#left").click(function() {
  $("#makeMeScrollable").smoothDivScroll("option","autoScrollDirection","left");    
});

$("#backandforth").click(function() {
  $("#makeMeScrollable").smoothDivScroll("option","autoScrollDirection","backandforth");    
}); 
```

## 好的，那有什么作用？

1.  您将 ID 的跨度定义为“左”、“右”等（例如`<span id="left">left</span>`）。在 jQuery 中，您可以通过选择器选择它们，该选择器是描述要选择的内容的字符串。要按 ID 选择元素，字符串以“#”开头，后跟 ID。要执行选择器，请使用 $(selector) as $("#left") 来选择 id="left"; 的 <span>-Tag;
2.  我们想为这个选定的元素分配一个点击事件的处理函数。所以我们写`$("#left").click( ... );`。作为参数，我们放入一个不带参数的函数，当点击 <span> 时将执行该函数。
3.  在该事件处理函数中，我们更改了 smoothDivScroll 的选项。

## 更多信息

*   这些选项在这里解释：[http ://www.smoothdivscroll.com/options.html](http://www.smoothdivscroll.com/options.html)
*   此处解释了如何更改选项：[http ://www.smoothdivscroll.com/alteringOptions.html](http://www.smoothdivscroll.com/alteringOptions.html)

## 单击与 OnMouseOver

如果您想对鼠标悬停事件做出反应，只需编写`.mouseover(...)`而不是`.click(...)`

### 另外：您的 CSS 中的错误？

您还应该修复您的 CSS，添加一个“;” 后面330px；和一个“浮动：左；”：

```
#makemescrollable {
  position: relative;
  width: 100%;
  height: 330px;
  float: left;
} 
```

# javascript - 数据表和模态

> ID：11976622
> 
> 赞同：2
> 
> 时间：2012-08-15T20:18:02.930
> 
> 标签：javascript, jquery, jquery-ui, dialog, modal-dialog

我有一个数据表设置（http://datatables.net/），我试图选择从表中删除一行并有一个 jQuery 对话框模式弹出窗口进行确认。但是，模态在表格的第一页上工作正常，但是当表格转到第二页时，模态停止工作。我的猜测是，当表格分页到接下来的 10 个条目时，会发生一些删除对话框点击调用的事情。

这是我的模态代码：

```
 $('#delete-dialog').dialog({
        autoOpen: false, 
        width: 400,
        modal: true
    });

    $('.delete_modal').click(function (e) {
        e.preventDefault();
        var targetUrl = $(this).attr("href");
        $('#delete-dialog').dialog({
          buttons: {
            "Delete": function() {
              window.location.href = targetUrl;
            },
            "Cancel": function() {
              $(this).dialog("close");
            }
          }
        });
        $('#delete-dialog').dialog("open");
    }); 
```

这是我的模态代码：

```
<div id="delete-dialog" title="Remove User">
    <p>Are you sure you want to delete this user?</p>
</div> 
```

知道为什么它适用于表格的第一页，而不是第二页吗？

这是我的删除代码：

```
<li><a href="?page=users&sub=admins&action=delete&id=<?=$row['id']?>" class="delete_modal"><span class="icos-trash"></span>Delete</a></li> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T20:25:44.127

我的猜测是您正在加载尚未与 jquery 绑定的新元素。您可以像这样绑定新元素或将处理程序附加到您的 .delete_modal 类。

```
$("body").on("click", ".delete_modal", function (e) {
e.preventDefault();
        var targetUrl = $(this).attr("href");
        $('#delete-dialog').dialog({
          buttons: {
            "Delete": function() {
              window.location.href = targetUrl;
            },
            "Cancel": function() {
              $(this).dialog("close");
            }
          }
        });
        $('#delete-dialog').dialog("open");
}); 
```

# ios - 通过应用程序 ID 启动 iOS 应用程序？

> ID：11976624
> 
> 赞同：6
> 
> 时间：2012-08-15T20:18:29.200
> 
> 标签：ios

在 iOS 5 及更高版本中，要从另一个 iOS 应用程序启动一个 iOS 应用程序，您可以使用 openUrl 以及自定义方案/协议。（如果没有自定义方案，就无法启动应用程序，如果有两个应用程序具有相同的方案/协议，则不确定哪个应用程序将启动）

在 iOS 6 中，可以从 safari（通过智能应用横幅）和 siri 启动应用。智能应用横幅将通过应用 id 启动，不知道如何通过 siri 启动。

**“通过应用程序 ID 启动应用程序”是公共/受支持的 api 调用**吗？这可以用来从另一个定制应用程序启动一个定制应用程序吗？

（如果是这样，这可以解决启动没有支持方案/协议的现有应用程序+解决两个应用程序具有相同方案的问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T09:14:19.303

### 该过程称为：Smart App Banner。

大卫史密斯写了一篇关于他们的非常令人筋疲力尽的帖子。 [http://david-smith.org/blog/2012/09/20/implementing-smart-app-banners/](http://david-smith.org/blog/2012/09/20/implementing-smart-app-banners/)

基本上，您只需将此元标记添加到您的网站页面（其中 ####### 是您的应用程序 ID）：

```
<meta name="apple-itunes-app" content="app-id=#########"/></code> 
```

如果您想将更多参数传递给调用，假设在您的应用程序中执行更具体的操作，只需打开它使用：

```
<meta name="apple-itunes-app" content="app-id=#########, foo=xxxxxx&bar=yyyyyyy"/> 
```

然后在您的应用程序委托中处理回调 url：

```
-(BOOL)application:(UIApplication*)application
        openURL:(NSURL*)url
        sourceApplication:(NSString*)sourceApplication
        annotation:(id)annotation 
```

# php - 将 Smarty 从 Smarty v2 升级到 v3

> ID：11976629
> 
> 赞同：3
> 
> 时间：2012-08-15T20:18:36.943
> 
> 标签：php, smarty, smarty3, smarty2

我正在将基于 PHP 的站点从 Smarty2 升级到 Smarty3。`require_once('Smarty.class.php'`通过替换以下内容，我已经设法使两个版本的大部分内容都正常工作：

```
@ include_once('SmartyBC.class.php');
if (class_exists('SmartyBC')) {
    $smarty = new SmartyBC();
    //this is for use outside templates.  inside templates, $smarty.version == 'Smarty-3.x.y.z'
    $smartyVersion = 3;
}
//catch (Exception $e) {
else {
    require_once('Smarty.class.php');
    $smarty = new Smarty();
    $smartyVersion = 2;
} 
```

然后我在 /usr/local/lib/php/Smarty 有一个符号链接，它指向版本 2 或版本 3。为了在两者之间进行交换，我只需要更改符号链接。通过使用兼容层类（SmartyBC），几乎所有东西都可以在两个版本中使用。我想保持与这两个版本的兼容性，直到所有内容都经过全面测试，并尽可能少地对旧模板进行更改。考虑到这一点，这是我要升级的一段代码：

```
//someinclude.php:
define('SOME_CONSTANT', 'someConst');

//somepage.tpl:
{if $dynVal == SOME_CONSTANT}dynamic content{/if} 
```

这在 V3 中不起作用，但这将：

```
{if $dynVal == $smarty.const.SOME_CONSTANT}dynamic content{/if} 
```

这些常量（其中不少）在所有地方都使用，所以理想情况下，我想找到一种方法让第一种方法在版本 3 中工作。如果这不可能，那么最干净的支持方法是什么两个版本都暂时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:29:47.713

我的理解是这些常量在 v3 中总是被解释为字符串。

无论您在哪里定义这些常量，请使用

```
$smarty->assign( 'constant', CONSTANT ); 
```

无论哪种方式，如果要升级，都需要修改代码。也许您应该权衡 v2->v3 更新的利弊并从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:44:32.567

我没有意识到我在问题中描述的更改也适用于版本 2：

```
{if $dynVal == $smarty.const.SOME_CONSTANT}dynamic content{/if} 
```

我会坚持看看还有什么其他答案，因为如果不需要，我仍然希望不必更改模板，但我认为这可能是进行更改的最干净的方式。我担心我将不得不做这样的事情：

```
{if ($newSmarty && $dynVal == $smarty.const.SOME_CONSTANT) || (!newSmarty && 'dynVal' == SOME_CONSTANT) }dynamic content{/if} 
```

没有人愿意维持这一点。

# javascript - 将 Backbone.Layout 定义为需要 js 模块？

> ID：11976638
> 
> 赞同：1
> 
> 时间：2012-08-15T20:19:06.847
> 
> 标签：javascript, backbone.js, requirejs, backbone-views

我无法将[tbranyen/backbone.layoutmanager](https://github.com/tbranyen/backbone.layoutmanager)布局定义为 requirejs 模块。我对此很陌生，而不是 javascript 的专家。[在这行源代码](https://github.com/tbranyen/backbone.layoutmanager/blob/master/backbone.layoutmanager.js#L680)`Backbone.Layout`中定义。反正...

**第一次尝试**：

```
define([
    'backbone',
    'lodash',
    'backbone.layoutmanager'
], function (Backbone, _) {

    return Backbone.Layout({
        template: 'body'
    });

}); 
```

在另一个（主要）中使用模块：

```
var layout = new ApplicationLayout();
$('body').empty().append(layout.el);

layout.render(); 
```

给我 （？！？）：

> 类型错误：this._configure 不是函数
> 
> this._configure(options || {});

**第二次尝试**（注`new`）：

```
define([
    'backbone',
    'lodash',
    'backbone.layoutmanager'
], function (Backbone, _) {

    return new Backbone.Layout({
        template: 'body'
    });

}); 
```

在另一个模块中使用（始终是主要模块）：

```
$('body').empty().append(ApplicationLayout.el);
ApplicationLayout.render(); 
```

不起作用，这意味着没有将 html 注入`<body>`. 似乎完成这项工作的唯一方法是在同一个地方创建和渲染布局，主模块：

```
var layout = Backbone.layout({ template: 'body' });
$('body').empty().append(layout.el);

layout.render(); 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:51:17.097

您需要为布局管理器传递一个参数才能使用它，例如

```
define([
    'backbone',
    'lodash',
    'backbone.layoutmanager'
], function (Backbone, _, Layout) {
return Layout({
    template: 'body'
}); 
```

# objective-c - 为什么我的 MKMapView 没有尽可能地缩小？

> ID：11976639
> 
> 赞同：1
> 
> 时间：2012-08-15T20:19:18.313
> 
> 标签：objective-c, ios, mkmapview, xcode4.3

我通常在我的`MKMapView`. 我有不同位置的引脚，代码自动居中并根据最大值和最小值设置跨度。但是，我注意到当我添加越来越多的点时，我的地图会缩小到一定程度，而我会丢失边缘的东西。这里有一些照片：

这是我第一次加载 MKMapView 时的样子：

[![](../Images/04011a6e81b1715f0c7f515f603646b8.png)](https://i.stack.imgur.com/SVhnB.png)
[（来源：[grapekeeper.com](http://www.grapekeeper.com/tempcrap/start.png)）]

当我平移时，我可以看到原始视图中丢失的更多图钉：

[![](../Images/92e9703fef695231d5666fdab2c7d883.png)](https://i.stack.imgur.com/r6pye.png)
[（来源：[grapekeeper.com](http://www.grapekeeper.com/tempcrap/start-move.png)）]
[![](../Images/d0deebe80b3529dea6bbf43e8821d6c5.png)](https://i.stack.imgur.com/sKMiP.png)

当我捏紧模拟器时，它会尽可能缩小：

[![](../Images/6271c254c35cf29e7caf46ff9d5348c2.png)](https://i.stack.imgur.com/I83na.png)
[（来源：[grapekeeper.com](http://www.grapekeeper.com/tempcrap/pinch-zoom-out.png)）]

这是我的代码供参考：

```
double min = [[allLatitudes valueForKeyPath:@"@min.self"] doubleValue];
double max = [[allLatitudes valueForKeyPath:@"@max.self"] doubleValue];
double latSpan = max-min;
double minL = [[allLongitudes valueForKeyPath:@"@min.self"] doubleValue];
double maxL = [[allLongitudes valueForKeyPath:@"@max.self"] doubleValue];
double lonSpan = maxL-minL;
double avgLatitude = (max+min)/2;
double avgLongitude = (maxL+minL)/2;

overallRegion.center.latitude = avgLatitude;
overallRegion.center.longitude = avgLongitude;
overallRegion.span.latitudeDelta = latSpan;
overallRegion.span.longitudeDelta = lonSpan;

[self.mapView setRegion:overallRegion animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T00:29:46.323

答案是：不可能缩小到使用地图视图查看整个世界的程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:52:30.947

看起来只是增加一点额外的空间并考虑对角线会有所帮助，请参阅[在 MapKit 中缩小和适合所有注释的最佳方法是什么](https://stackoverflow.com/questions/4169459/whats-the-best-way-to-zoom-out-and-fit-all-annotations-in-mapkit)

这提供了一个很好的方法来做你想要的。

# c# - 如何在 Windows 7 上使用 TLBIMP 包装器引用和访问专有 COM 组件

> ID：11976645
> 
> 赞同：2
> 
> 时间：2012-08-15T20:19:32.393
> 
> 标签：c#, windows-7, com, tlbimp

我使用 TLBIMP.EXE 创建了一个商业闭源程序的包装器。（该程序不能直接被 Visual Studio 引用，虽然它可以在 VB6 中引用。）VS 引用包装器就好了，并且能够创建一个对象。但是，一旦我在对象上调用方法，它就会崩溃并出现以下错误：

> {“无法将“InfoWorksLib.InfoWorksClass”类型的 COM 对象转换为接口类型“InfoWorksLib.IIW”。此操作失败，因为对具有 IID 的接口的 COM 组件调用 QueryInterface '{61305DAA-3868-41AD-956D-081010E80E8B }' 由于以下错误而失败：不支持此类接口（HRESULT 异常：0x80004002 (E_NOINTERFACE)）。”}

我的代码如下所示：

```
void Function()
{
  InfoWorksLib.IIW iw = new InfoWorksLib.InfoWorksClass(); // Works
  iw.InitForTest(0, "", ""); // crashes with the above exception
} 
```

我已经尝试了声明和创建的所有可能组合（例如`InfoWorks iw = new InfoWorksClass()`，等）

VS 中的对象资源管理器显示以下内容：

```
InfoWorksLib
    InfoWorksLib
        EIWErrors
        IIW (interface)
        InfoWorks (interface)
            Base Types (folder)
                IIW (interface)
        InfoWorksClass
            Base Types (folder)
                IIW
                InfoWorks
                    IIW
                Object 
```

这是在 Windows 7 上。在 Windows XP 虚拟机上，相同的代码可以正常工作。

Windows 7 上是否存在任何可能导致上述异常的安全问题？包装程序集是否需要位于非系统目录中？

# location - 确定位置的最准确方法

> ID：11976649
> 
> 赞同：0
> 
> 时间：2012-08-15T20:19:48.373
> 
> 标签：location

只是一个简单的问题，有没有比 GPS 更准确的方法来确定用户的位置（纬度和经度）？我不是说只针对手机用户，我是说一般！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:36:02.467

一般来说，没有。IP 地址和全球位置之间没有内在的关系。虽然那会很酷。到处都是前女友，欢欣鼓舞！

推断我位置的网站几乎没有数据来源。我的 IP 注册位置（可以通过 whois 等找到）是最常见的。坐在我的办公室里，该地址与我所在的位置非常接近，但这不像我的办公室会发布 IP 地址列表及其纬度/经度坐标。

当我在家时，我的 IP 地址由我的互联网服务提供商分发，虽然他们可能知道关于我的所有信息，但他们会小心翼翼地保护这些信息。他们不太可能提供一个 API，让您可以获取有关我的特定 IP 地址在何处提供服务的信息。

谷歌有更多的信息可以使用，特别是如果你是谷歌地图的狂热用户。他们可以假设当我从同一 IP 地址以同一个人身份登录并定期请求往返特定地址的方向时……这可能就是我所在的位置。您不太可能触手可及此类数据。

如果您真的需要对您的位置进行超精确的测量，那么您可能会被聘用测量员所困。我不会推荐它。当我不得不买一个时，它简直贵得要命，但看着他将激光从我的大厅反射到后院以获得足够的参考点，真是太酷了。=]

# node.js - 如何声明任何客户端都可以使用 socket.io 访问的变量

> ID：11976651
> 
> 赞同：1
> 
> 时间：2012-08-15T20:19:50.503
> 
> 标签：node.js, websocket, socket.io

这是一个游戏应用程序，我使用 MySQL 完成大部分脏活，但我希望这里有一个轻量级的解决方案。

我注意到我可以声明 socket.clientid 并且每次客户端发送到我的服务器时我都可以使用 socket.clientid

有没有办法声明一个变量，例如（从未尝试过，但是）“io.sockets.doors=[1,0,1]”，表示关闭的门#1 打开的门#2 关闭的门#3 并允许每个人访问我的服务器内存中的单个数组？如果有，有文件吗？

我的服务器在 node.js 中运行 socket.io 客户端通过浏览器中的 websockets 连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:42:04.293

所以我尝试了这个，它就像一个魅力......我认为在这里问比自己尝试更容易，并且可能会犯错误并认为它不起作用。

```
io.sockets.a="A varriable declared like this is accessable to any client connected on the listening port" 
```

# c# - 如何重构所需的 else 子句？

> ID：11976652
> 
> 赞同：7
> 
> 时间：2012-08-15T20:19:59.277
> 
> 标签：c#, f#

我有一个看起来有点像这样的 C# 方法：

```
bool Eval() {
  // do some work
  if (conditionA) {
     // do some work
     if (conditionB) {
       // do some work
       if (conditionC) {
         // do some work
         return true;
       }
     }
  }
  return false;
} 
```

在 F# 中，由于强制性的 else 分支，这最终看起来有点丑陋：

```
let eval() =
  // do some work
  if conditionA then
    // do some work
    if conditionB then
      // do some work
      if conditionC then
        // do some work
        true
      else
        false
    else
      false
  else
    false 
```

用 F# 编写这个更简洁的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T21:15:49.357

```
module Condition =
  type ConditionBuilder() =
    member x.Bind(v, f) = if v then f() else false
    member x.Return(v) = v
  let condition = ConditionBuilder()

open Condition

let eval() =
  condition {
    // do some work
    do! conditionA
    // do some work
    do! conditionB
    // do some work
    do! conditionC
    return true
  } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-15T21:16:07.220

如评论中所述，您可以反转条件。这简化了 C# 代码，因为您可以编写：

```
if (!conditionA) return false;
// do some work 
```

虽然 F# 没有命令式返回（如果要返回，则需要 true 和 false 分支），但它实际上也简化了这段代码，因为您可以编写：

```
let eval() = 
  // do some work 
  if not conditionA then false else
  // do some work 
  if not conditionB then false else
  // do some work 
  if not conditionC then false else
    // do some work 
    true 
```

您仍然需要编写`false`多次，但至少您不必将代码缩进太多。有无限数量的复杂解决方案，但这可能是最简单的选择。至于更复杂的解决方案，您可以使用[允许使用命令式返回的 F# 计算表达式](http://tomasp.net/blog/imperative-i-return.aspx)。这类似于 Daniel 的计算，但更强大一些。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-15T20:22:46.097

好吧，既然“做一些工作”已经势在必行（大概），那么我认为

```
let eval() =
    let mutable result = false
    ... // ifs
        result <- true
    ... // no more elses
    result 
```

更短更合理。（换句话说，`else`仅对`if`返回值的表达式是强制性的；由于您正在执行命令式工作，因此请使用`if`不需要 . 的语句`else`。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-15T20:53:29.097

请不要害怕提取函数。这是控制复杂逻辑的关键。

```
let rec partA () =
  // do some work
  let aValue = makeA ()
  if conditionA 
  then partB aValue 
  else false
and partB aValue =
  // do some work
  let bValue = makeB aValue
  if conditionB 
  then partC bValue
  else false
and partC bValue =
  // do some work
  conditionC 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-15T20:48:40.133

使用模块中的高阶函数`Option`可以使这个流程非常干净，没有任何可变状态：

```
let Eval () =
    // do some work
    if not conditionA then None else
        // do some work
        Some state
    |> Option.bind (fun state ->
        if not conditionB then None else
            // do some work
            Some state')
    |> Option.bind (fun state ->
        if not conditionC then None else
            // do some work
            Some true)
    |> defaultArg <| false 
```

或者为了更清楚起见，使用命名函数而不是 lambda：

```
let Eval () =
    let a () =
        if not conditionA then None else
            // do some work
            Some state
    let b state =
        if not conditionB then None else
            // do some work
            Some state'
    let c state =
        if not conditionC then None else
            // do some work
            Some true
    // do some work
    a () |> Option.bind b |> Option.bind c |> defaultArg <| false 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-17T07:00:40.540

您可以将您的代码变成一种真值表，这取决于您的实际情况可能会使其更加明确：

```
let condA() = true
let condB() = false
let condC() = true

let doThingA() = Console.WriteLine("Did work A")
let doThingB() = Console.WriteLine("Did work B")
let doThingC() = Console.WriteLine("Did work C")

let Eval() : bool =
    match condA(), condB(), condC() with
    | true,  false, _     -> doThingA();                           false;
    | true,  true,  false -> doThingA(); doThingB();               false;
    | true,  true,  true  -> doThingA(); doThingB(); doThingC();   true;
    | false, _,     _     ->                                       false; 
```

# cmake - 如何使用 CMake 正确检查函数

> ID：11976654
> 
> 赞同：7
> 
> 时间：2012-08-15T20:20:08.413
> 
> 标签：cmake

在从 automake 转换为 cmake 时，我必须进行一些函数存在的测试。我没有编写 configure.ac 脚本，但我确实必须按照以下方式重现该功能，所以请不要对这些检查责备我。我必须制作它们。

所以，我正在尝试使用 CheckFunctionExists 模块来检查时间函数的存在（以及其他）。这是cmake代码

```
include(CheckIncludeFiles)

CHECK_FUNCTION_EXISTS(time, HAVE_TIME_FUNCTION)

if(NOT HAVE_TIME_FUNCTION)
    message(FATAL_ERROR "ERROR: required time function not found")
endif(NOT HAVE_TIME_FUNCTION) 
```

每次都失败，即使我知道我有时间功能（duh）。我尝试用 printf 替换时间，但仍然失败。是否需要进行一些设置才能使此检查正常工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T21:00:49.877

您应该删除`,`：

```
CHECK_FUNCTION_EXISTS(time HAVE_TIME_FUNCTION) 
```

在 CMake 中，分隔符是空格或分号，逗号是变量的一部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T20:58:53.187

包含 CMake 标准模块并删除调用`CheckFunctionExists`中的逗号：`check_function_exists`

```
include(CheckFunctionExists)
check_function_exists(time HAVE_TIME_FUNCTION) 
```

# jpa - Eclipse RAP/RCP 中带有 Eclipselink MySQL jdbc 的 JPA

> ID：11976655
> 
> 赞同：1
> 
> 时间：2012-08-15T20:20:12.460
> 
> 标签：jpa, eclipse-rcp, eclipselink, classloader, persistence.xml

**系统总览：**

*   用于 RAP RCP 开发人员的 Eclipse Indigo、RAP 1.4 目标组件、Dali JPA、Jre1.6.0_33 (Java1.6SE)
*   本地 oracle mysql 数据库
*   项目中导入的所有 JPA（持久性）+ Eclipse 链接 OSGi 包（根据 eclipse wiki）
*   包含在项目中导入的 com.mysql.jdbc.Driver 类的 OSGi 包（最新 5.1.21 ？来自 Oracle 页面）
*   通过 JPA 创建的持久性插件，带有 jdbc 驱动程序，正确的 mysql 数据库路径，正确的密码和用户（添加了对 com.mysql.jdbc 包的依赖项）

**为避免 ClassLoader 问题：**

*   bundle/plugin ***com.mysql.jdbc***在其 MANIFEST.MF: ***Bundle-BuddyPolicy: 已注册***
*   ***org.eclipse.persistence.core*** & ***org.eclipse.persitence.jpa***和我的***“persistence bundle”*** 在他们的 MANIFEST.MF 中注册了**Buddy ：** ***Eclipse-RegisterBuddy:com.mysql.jdbc*** + 他们已经添加了对这个 bundle com.mysql 的依赖.jdbc

**问题：**

即使经过所有先前的步骤，我仍然： `ClassNotFoundException - Driver not found`

**评论：**

*   从 Eclipse DatabaseConnection 内部测试到 localhost mysql db 的连接，使用来自捆绑包 com.mysql.jdbc（***com.mysql.jdbc.Driver***类）的相同驱动程序 [OK]
*   如果带有嵌入式驱动程序的***org.apache.derby***嵌入式数据库用于持久性（而不是 mysql）（具有相同的好友策略），则不会出现问题 - 一切正常

**问题：**

*   即使应用了 BuddyPolicy，ClassLoaders 还会有问题吗？
*   当它用作 OSGi 捆绑包时，驱动程序本身可能有问题吗？
*   有没有人尝试在 RCP 或 RAP 中使用这个 com.mysql.osgi 包和 JPA+Eclipselink ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:33:21.030

我在没有为 JDBC 类驱动程序定义类路径的 mysql.jdbc 包中发现问题（我的错误，我可能监督了这一点）......我还检查了 PAX JPA，我认为在我更改 MYSQL JDBC 包后现在不需要 PAX JPA和 OSGi 捆绑包的好友政策。我想保持简单：Equinox + Eclipselink JPA+JDBC 驱动程序......我现在解决了所有问题。一切正常。

# algorithm - 最小化多个仓库发货数量的算法

> ID：11976664
> 
> 赞同：5
> 
> 时间：2012-08-15T20:20:48.017
> 
> 标签：algorithm

我在美国有 10 个仓库。他们每个人可能有也可能没有产品 A、B、C、D、E 库存。有人从我的网站订购了所有五件商品。

我想尽量减少我发送的货件数量。如何确定从哪些仓库运送哪些物品？

例如，某人订购了 A、B、C、D 和 E。

*   我在纽约有 A 和 B（但没有其他人）。
*   我在波士顿有 A、B 和 C（但没有其他人）。
*   我在芝加哥有 D 和 E（但没有其他人）。

我正在尝试开发一种算法，该算法将创建从波士顿发货的三件商品和从芝加哥发货的两件商品。

我不想要纽约的 2 件商品、波士顿的 1 件和芝加哥的 2 件。

所有项目都在一个中央数据库中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T21:13:51.683

您的问题正是经典的[集合覆盖优化问题](http://en.wikipedia.org/wiki/Set_cover_problem)，它是 NP 难的；“宇宙”是用户想要的物品集，候选集是仓库。

[@user384706](https://stackoverflow.com/a/11976750/344821)和[@Kickaha](https://stackoverflow.com/a/11977012/344821)提出的算法是那里讨论的[贪心算法](http://en.wikipedia.org/wiki/Set_cover_problem#Greedy_algorithm)，这是一个可以的近似值。

如果您想找到实际的最佳解决方案，最好的办法是使用[整数线性规划公式](http://en.wikipedia.org/wiki/Set_cover_problem#Integer_linear_program_formulation)并插入一些 ILP 求解器。

你说你不关心距离，但如果你这样做了，那么集合覆盖问题也说明了每个仓库的成本（`c(s)`在 wiki 页面上），这代表更远的仓库不太适合挑选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:27:32.093

以下情况如何：

```
IF a warehouse has all items THEN pick that warehouse  
ELSE  
   Find how many items each warehouse has e.g. NY (2) Boston(3) Chicago(2)  
   Sort them by items Boston(3) NY(2) Chicago (2)  
   Current Max is the warehouse with the most products i.e. (3)  
   Step 1: Start making shipments starting from the warehouse with the current max i.e. Boston.  
   Step 2:  As you go on check if you have all the packets and not e.g. NY has 2 and Chicago also has 2 but they are the same 2\. Keep this tuple as potential.  
   Step 3: Once you finished with all warehouses, update current max to be the next highest number of products a warehouse has.  In this case (2)  
   IF no warehouse left you are done  
   ELSE go to Step 1
   Continue until you have shipments for all items 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:32:24.670

好吧，我能想到的是你需要 2 个矩阵。第一个将有列作为仓库的位置，行将是产品 A、B、C..ect。就像给定的情况一样，它将是一个 5X3 矩阵。另一个矩阵将包含从您的仓库到目的地的距离向量。就像列可能是您的仓库地点 - 纽约、芝加哥等，而行可能是您要发货的地方。现在要弄清楚哪个仓库将发送哪个产品应该是与第二个矩阵的最小距离和从第一个矩阵可用的最大产品的结果。肯定有一些方法可以从两个矩阵中得到它，你只需要搜索并做一些数学运算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T20:47:02.127

这是我的伪代码，它没有考虑到搜索深度可能超过 1，但我相信基本算法是合理的。

```
 ItemList = (A,B,C,D,E,F)
//Iterate until all items have been scheduled  
    do while length of Itemlist > 0
    {
    var1=0;
    Warehouse="";

//Search all the warehouses to find which has the most items in the list
    For w = 1 to 10
    {
    val2 = function[select no of items available from Itemlist](ItemList,w);
    if var2 > var1 then
    {var1=var2;
    Warehouse=w;}
    }

//Return a list of the items available from the warehouse with the most items available
    DBrecordset = function[select no of items available from Itemlist](ItemList,Warehouse);
//schedule them
    Output to file (Warehouse + DB recordset contents)
//remove the scheduled items from the list
    function [Remove items from ItemList](ItemList,DBRecordset) 

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T01:11:11.163

由于地点的数量相当少，您可以准备一个按发货升序排列的发货选项列表：

```
10 x shipment alternatives from 1 location
45 x shipment alternatives from 2 locations
120 x shipment alternatives from 3 locations
210 x shipment alternatives from 4 locations
252 x shipment alternatives from 5 locations 
```

对于给定的订单，您将扫描您的表格并检查每个选项对于给定的订单是否可行。第一场比赛是一个可行的解决方案。假设客户不能订购超过五种产品，则必须考虑不超过五次发货。

实际上，您会考虑到客户可能会订购更大的数量。您的仓库可能有非零但数量有限的产品。因此，检查最终可能会很麻烦。这让我们回到了上面提到的 ILP 求解器。

# ruby-on-rails - rails 活动记录 value_of 方法

> ID：11976669
> 
> 赞同：0
> 
> 时间：2012-08-15T20:21:09.543
> 
> 标签：ruby-on-rails, activerecord

我开始从事历史悠久的项目并发现很多查询，例如：

```
 Users.where(:test => false).value_of(:id) 
```

返回数组，如 [1,2,66,32]

我尝试在带有 Rails 3.2.8 的新项目中使用此代码，但此方法似乎与一些 gem 一起提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:25:58.767

它必须是 valium gem [https://github.com/ernie/valium](https://github.com/ernie/valium)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T21:22:54.527

但是你应该替换为[`ActiveRecord::Calculations#pluck`](http://apidock.com/rails/ActiveRecord/Calculations/pluck)

`Users.where(test: false).pluck(:id)`

# sql-server - 查询以找出所有已定义的触发器并搜索存储过程

> ID：11976673
> 
> 赞同：1
> 
> 时间：2012-08-15T20:21:17.027
> 
> 标签：sql-server

我们有数百个文档很差的表。

是否有任何疑问：

1.  将打印出哪些表有触发器以及这些触发器的名称

2.  可以在当前定义的存储过程中搜索文本吗？

谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:45:19.460

这家伙让你满意：[http ://www.alberton.info/sql_server_meta_info.html](http://www.alberton.info/sql_server_meta_info.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:42:07.400

为简洁起见，您可以尝试以下操作：

`SELECT t.name AS TriggerName, o.name AS ParentObject, m.definition AS TriggerDefinition FROM sys.triggers t LEFT JOIN sys.objects o ON t.parent_id = o.object_id LEFT JOIN sys.sql_modules m ON t.object_id = m.object_id;`

`WHERE m.definition LIKE '%Test%'`如果您想在所述触发器的代码中查找任何特定文本（在本例中为 Test），您可以添加一个子句。

# joomla - 创建 Joomla 模块以在悬停时显示自定义工具提示

> ID：11976674
> 
> 赞同：0
> 
> 时间：2012-08-15T20:21:31.130
> 
> 标签：joomla, joomla2.5, joomla-extensions

我需要开发一个自定义模块，在悬停模块内容上显示工具提示。我想为此使用 joomla 默认值，但给我带来了不便。

我需要显示一个指向当前悬停的模块项的小箭头，并且，如果工具提示可能显示在模块项的另一侧（因为太靠近页面边缘），它必须将箭头更改为将其指向工具提示的另一侧。请查看图片了解更多详情。

出现在悬停菜单项上的工具提示 ![悬停模块项目上的工具提示](../Images/5f1ab210987104095562d9eb60917aac.png)

工具提示出现在悬停菜单项上，但由于太靠近页面右边缘而更改箭头 ![在此处输入图像描述](../Images/5356b16c39baae65450795d6cde59ba7.png)

这可能吗，或者我需要另一个工具提示解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:26:05.620

对于自定义工具提示，请查看Joomla 扩展目录网站上[工具提示类别中的一些扩展。](http://extensions.joomla.org/extensions/news-display/article-elements/tooltips)

前 3 名具有良好的评级并且与 Joomla 2.5 兼容，因此请尝试其中之一。

希望这可以帮助。

# java - SQLException：Io 异常：网络适配器无法建立连接

> ID：11976689
> 
> 赞同：0
> 
> 时间：2012-08-15T20:22:20.863
> 
> 标签：java, hibernate

**当我给出我的登录 id,pwd ...**

`http://localhost:8080/project_name`. 错误是服务器遇到了一个内部错误（），导致它无法满足这个请求。**我正在使用 jboss4.2.3，请让我知道问题出在哪里......？**

HTTP 状态 500 -

* * *

类型异常报告

**信息**

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

**例外**

```
javax.servlet.ServletException: Servlet.init() for servlet action threw exception
    org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
... 
```

**根本原因**

```
java.lang.RuntimeException: org.hibernate.exception.GenericJDBCException: Cannot open connection
    com.fanniemae.rbc.rollup.ui.RollupActionServlet.init(RollupActionServlet.java:26)
... 
```

**根本原因**

```
org.hibernate.exception.GenericJDBCException: Cannot open connection
    org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103) 
```

**根本原因**

```
org.jboss.util.NestedSQLException: Could not create connection; - nested throwable: (java.sql.SQLException: Io exception: The Network Adapter could not establish the connection); - nested throwable: (org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (java.sql.SQLException: Io exception: The Network Adapter could not establish the connection))
    org.jboss.resource.adapter.jdbc.WrapperDataSource.getConnection(WrapperDataSource.java:95)
    org.hibernate.connection.DatasourceConnectionProvider.getConnection(DatasourceConnectionProvider.java:69)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:423)
... 
```

**根本原因**

```
org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (java.sql.SQLException: Io exception: The Network Adapter could not establish the connection)
... 
```

**根本原因**

```
java.sql.SQLException: Io exception: The Network Adapter could not establish the connection
    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
    oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255)
    oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
    oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:441)
    oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
    oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
    oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
    org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.createManagedConnection(LocalManagedConnectionFactory.java:172)
    org.jboss.resource.connectionmanager.InternalManagedConnectionPool.createConnectionEventListener(InternalManagedConnectionPool.java:619)
    org.jboss.resource.connectionmanager.InternalManagedConnectionPool.getConnection(InternalManagedConnectionPool.java:264)
    org.jboss.resource.connectionmanager.JBossManagedConnectionPool$BasePool.getConnection(JBossManagedConnectionPool.java:575)
    org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:347)
    org.jboss.resource.connectionmanager.TxConnectionManager.getManagedConnection(TxConnectionManager.java:330)
    org.jboss.resource.connectionmanager.BaseConnectionManager2.allocateConnection(BaseConnectionManager2.java:402)
    org.jboss.resource.connectionmanager.BaseConnectionManager2$ConnectionManagerProxy.allocateConnection(BaseConnectionManager2.java:849)
    org.jboss.resource.adapter.jdbc.WrapperDataSource.getConnection(WrapperDataSource.java:89)
    org.hibernate.connection.DatasourceConnectionProvider.getConnection(DatasourceConnectionProvider.java:69)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:423)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)
    org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139)
    org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1547)
    org.hibernate.loader.Loader.doQuery(Loader.java:673)
    org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    org.hibernate.loader.Loader.doList(Loader.java:2220)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    org.hibernate.loader.Loader.list(Loader.java:2099)
    org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:378)
    org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
    org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
    org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
    com.fanniemae.rbc.rollup.service.RLSchemeMgmtService.getLoanAttributes(RLSchemeMgmtService.java:82)
    com.fanniemae.rbc.rollup.ui.UICache.initialize(UICache.java:42)
    com.fanniemae.rbc.rollup.ui.RollupActionServlet.init(RollupActionServlet.java:22)
    javax.servlet.GenericServlet.init(GenericServlet.java:212)
    org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
    org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
    org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
    java.lang.Thread.run(Thread.java:595) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:25:16.760

> java.sql.SQLException：Io 异常：网络适配器无法建立连接

堆栈跟踪中的这一行看起来无法连接到数据库。URL 错误或服务器未运行。检查服务器和 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:24:38.727

您需要检查几件事，检查用户名和密码是否正常，检查服务器是否接受远程连接，检查用户的权限，检查数据库端口是否打开（防火墙），检查本地防火墙并检查您的主机可以访问服务器（ping ip server）

# node.js - 使用 mongoose api 和 nodejs 搜索数据库？

> ID：11976692
> 
> 赞同：7
> 
> 时间：2012-08-15T20:22:37.913
> 
> 标签：node.js, mongodb, mongoose

我使用nodejs和mongoose构建一个api，我试图做搜索功能，但它似乎没有查询任何东西，代码。

```
app.get('/search', function(req,res){
    return Questions.find({text: "noodles"}, function(err,q){
        return res.send(q);

    });
}); 
```

它没有给我任何结果，我知道他们应该至少有 4 个来自这个查询的结果，他们的 4 个文档在问题数据库中带有“noodles”这个词，一切都在数据库连接和我的节点服务器上工作

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-16T04:13:40.813

您的查询正在做的是查找`text`属性完全匹配的文档`"noodles"`。假设您正在尝试查询`text`属性仅*包含* `"noodles"`某处的文档，则应使用正则表达式：

```
app.get('/search', function(req,res){
    var regex = new RegExp('noodles', 'i');  // 'i' makes it case insensitive
    return Questions.find({text: regex}, function(err,q){
        return res.send(q);
    });
}); 
```

# salesforce - Apex为什么创建控制器时标准控制器不设置当前页面（单元测试）

> ID：11976697
> 
> 赞同：5
> 
> 时间：2012-08-15T20:23:11.613
> 
> 标签：salesforce, apex-code, visualforce, force.com

在 Apex 单元测试中，为什么 MyConrtoller myCont = new MyController(StandardContoller); 调用设置当前页面？

例如，如果我有这个页面：

```
<apex:page standardController="DB_Object__c" extensions="MyExtension">
  <apex:form id="detail_list">
    <apex:detail />
    <apex:actionStatus id="readStatus">
    <apex:facet name="start">
        Loading, please wait...
   </apex:facet>
    <apex:facet name="stop"><apex:outputPanel >
        <apex:commandButton action="{!readData}"
            value="Update Data"
            rerender="detail_list"
            status="readStatus"/>
        {!remainingRecords}</apex:outputPanel>
    </apex:facet>
   </apex:actionStatus>
   </apex:form>
</apex:page> 
```

如果我的单元测试创​​建了这个：

```
DB_Object__c dbObj = new DB_Object__c();
dbObj.Name = 'test';
dbObj.Setting = 'aSetting';
insert dbObj;
Test.setCurrentPageReference(Page.Demo);
ApexPages.StandardController sc = new ApexPages.StandardController(dbObj);
MyExtension myExt = new MyExtension(sc); 
```

为什么会`ApexPages.currentPage().getParameters().get('id');`失败？我要做：

```
ApexPages.currentPage().getParameters().put('id',dbObj.id); 
```

如果它不做任何事情，传递`dbObj`to有什么意义？`StandardController`您发送的意图是空白对象并且扩展使用此对象吗？似乎没有很多关于 StandardControllers 和单元测试的文档......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T21:51:33.523

在测试场景中解决这个问题的一种方法是这样的：

```
// at first you have to create the object
DB_Object__c dbObj = new DB_Object__c();
dbObj.Name = 'test';
dbObj.Setting = 'aSetting';
insert dbObj;

// then you'd call the vf page with the id query paramter
Test.setCurrentPageReference(Page.Demo);
ApexPages.currentPage().getParameters().put('id', dbObj.Id);
dbObj = [Select All, Fields, You, Need From DB_Object__c Where Id = :ApexPages.currentPage().getParamters().get('id')];

// then the StandardController & controller extension get initiated
ApexPages.StandardController sc = new ApexPages.StandardController(dbObj);
MyExtension myExt = new MyExtension(sc); 
```

现在你的问题为什么会`getParameters().get('id')`失败？`save`您可以在没有记录 ID 的情况下启动 StandardController，如果您使用默认的PageReference ，它将为您提供新记录并自动插入记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T12:28:22.780

您的问题的答案是 StandardController 与传递给 visualforce 页面的参数无关。当您了解这一点时，您将更好地了解如何处理您的测试中的 StandardController 对象和查询参数。

当访问页面时抛出浏览器，通过从 url 检索 id 参数来构建 StandardController。以下可能是构建页面的 StandardController 和 Controller Extensions 的步骤。

1.  从参数列表中检索 Id 参数`id=ApexPages.currentPage().getParameters().get('id');`
2.  加载具有给定 ID 的 Sobject`My_Object my_Object=[SELECT Id, Name FROM My_Object WHERE Id = :id]`
3.  通过调用使用给定对象构建标准控制器`ApexPages.StandardController sc = new ApexPages.StandardController(my_Object)`
4.  最后，用标准控制器实例化所有控制器扩展 `MyExtension myExt = new MyExtension(sc)`。

从这里，您可以注意到通过传递 sObject 来实例化 StandardController 对象不会自动创建一个查询参数，并将 sObject 的 id 作为参数传递。因此，如果出于测试目的您需要访问查询参数，则必须在执行时将其显式添加到参数列表中`ApexPages.currentPage().getParameters().put('id', dbObj.Id);`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T00:29:21.240

我用它来确定请求是否来自 API 源

```
String.valueOf(URL.getCurrentRequestUrl()).toLowerCase().contains('services/soap') 
```

# visual-studio-2010 - 使用 subversion 和 tortoise svn 将离线项目项目推送到在线 assembla 存储库的步骤

> ID：11976698
> 
> 赞同：1
> 
> 时间：2012-08-15T20:23:15.770
> 
> 标签：visual-studio-2010, svn, tortoisesvn

我在本地 SVN 存储库中维护了一个本地项目（尽管我对这个源代码控制概念很陌生）。

我需要将这些整个存储库（TortoiseSVN 存储库）推送到在线汇编存储库。有人可以告诉如何继续它以及如何使用它吗？

*   **也有人可以提到在 TortoiseSVN 和 Subversion 中的签出和签入是如何工作的吗？**

*   **哪个真正适用于哪个？**

*   **最后是主要的。如何将本地存储库中的所有提交推送到 assembla 存储库？**

请问有人可以告诉我步骤吗？我的项目在 Visual Studio 2010 中。正在处理 Asp.net MVC 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:46:56.890

由于您是 Apache Subversion 的新手，您可以考虑[使用 Subversion 的版本控制](http://www.visualsvn.com/support/svnbook/)书（又名 SVNBook）和[TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/index.html)。它们是关于 Subversion 的重要信息来源，也是描述版本控制概念的好读物。

*   TortoiseSVN 是一个用于 Windows 的[Apache Subversion](http://subversion.apache.org/) **客户端**，实现为 Windows shell 扩展。Apache Subversion 是一个版本控制系统。

*   您不会混淆**[工作副本](http://www.visualsvn.com/support/svnbook/basic/version-control-basics/#svn.basic.working-copy)**和**[存储库](http://www.visualsvn.com/support/svnbook/basic/version-control-basics/#svn.basic.repository)**术语吗？顺便说一句，您没有使用 Subversion*签入。*您将更改*提交到存储库。*

*   Subversion中没有`push`or `pull`。您应该将本地存储库导入 Assembla。据我所知，您应该转储您的存储库并将其导入 Assembla，尽管它们可能会提供一些其他方法来做到这一点。不幸的是，我不知道这一点。

# tree - Ocaml帮助树遍历

> ID：11976700
> 
> 赞同：0
> 
> 时间：2012-08-15T20:23:23.837
> 
> 标签：tree, ocaml, traversal, inorder

问题描述：

R. Borist 教授研究树木。他记录了所有他最喜欢的树的前序、中序和后序遍历。然而，他办公室的一场大火烧毁了他存放顺序遍历的文件柜。他仍然拥有所有他最喜欢的树的前序和后序遍历，这些信息是否足以重建丢失的中序遍历？

您必须为以下任务设计和实现一个程序： 输入将包含两个数字列表。第一个列表是某棵树 T 的前序遍历。第二个列表是同一棵树 T 的后序遍历。输出应该是 T 的中序遍历。如果输入未确定唯一树，则任何一致的中序遍历可以退货。

如果它有助于设计您的实现，您可以假设：

*   没有一棵树有超过 1,000 个节点。
*   没有树对多个节点使用相同的标签。
*   节点的标签是从 0 到 10,000 的数字。

样本数据

```
Input:
2 6 7 1 11 8 5 10 3 4 9
7 8 5 11 10 1 6 4 9 3 2
Output:
7 6 8 11 5 1 10 2 4 3 9 
```

**提示**

给定树的前序和后序遍历，你能推断出哪个元素是根吗？哪些元素必须来自左子树？从右子树？递归。

首先在保证树中的每个节点都有 2 个或 0 个子节点时解决问题。一些节点只有 1 个子节点的情况有点棘手。

**笔记**

在您的文章中，您不需要分析解决方案的效率/运行时间（这将是未来项目的要求）。但是要分析它的正确性；即，清楚地解释为什么你的算法是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:04:52.503

即使问题描述没有明确说明，但从提示中可以清楚地看出我们正在处理二叉树。

提示很好：找到树的根，然后找到左子树的根和右子树的根。

删除根后，在节点列表中查找可以切割列表的位置：切割之前的节点来自左子树，切割之后的节点来自右子树。

像你一样做一些小例子是个好主意。

具体回答“了解如何从前后遍历构建中序遍历”：首先从前后遍历重建树，然后从树构建中序遍历。

# hook - 如何配置 KeyboardProc 以避免击键？

> ID：11976708
> 
> 赞同：0
> 
> 时间：2012-08-15T20:24:23.480
> 
> 标签：hook

我需要实现一个代码来识别和忽略 Windows 中的一些键盘输入，为此我正在使用安装钩子的整个过程（我需要它来阻止`Alt+Tab`、`Windows+Tab`、`Windows+D`等）。鉴于只有当我的软件具有焦点时才会发生这种情况（将处于全屏模式），所以没有必要（我认为）实现系统范围的钩子（使用 DLL 等），所以我现在试图配置我的`KeyboardProc`功能来做我需要的。

问题是我无法让它工作。我已经能够检测到一个特定的键，但不能让 Windows 忽略它。

这是我现在拥有的（在 Qt 中）：

```
LRESULT CALLBACK KeyboardProc(int code,WPARAM wParam,LPARAM lParam)
{
    if (code < 0)
        return CallNextHookEx(NULL, code, wParam, lParam);

    switch(wParam)
    {
    case VK_LWIN:
        qDebug() << "VK_LWIN";
        return NULL;
    break;

    case 0x41:    //A
        qDebug() << "A";
        return false;
    break;
    }

    return CallNextHookEx(NULL, code, wParam, lParam);
} 
```

不管我在 return 中输入了什么，系统仍然会得到 key 输入。

那么我需要在那里放什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:21:21.517

毕竟我知道该怎么做。不同之处在于我改用了低级键盘挂钩，因此函数的名称发生了变化。这里是：

```
LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam)
{
if (nCode < 0)
    return CallNextHookEx(NULL, nCode, wParam, lParam);

tagKBDLLHOOKSTRUCT *str = (tagKBDLLHOOKSTRUCT *)lParam;

switch(str->flags)
{
    case (LLKHF_ALTDOWN):
        qDebug() << "ALT";
        delete str;
    return 1;
}

if (wParam == WM_KEYDOWN)
{
    switch (str->vkCode)
    {
        case VK_RWIN:
        case VK_LWIN:
        case VK_LCONTROL:
        case VK_RCONTROL:
        case VK_APPS:
        case VK_SLEEP:
        case VK_MENU:
            qDebug() << "SPECIAL PRESS";
            delete str;
        return 1;
    }
}

return CallNextHookEx(NULL, nCode, wParam, lParam);
} 
```

# java - Java - 阅读编写大型长数组代码

> ID：11976709
> 
> 赞同：1
> 
> 时间：2012-08-15T20:24:24.523
> 
> 标签：java

我正在尝试将大小为 400000000 的大型长数组写入文件，然后将其读回。我正在使用的代码如下：

```
import java.io.*;
import java.nio.*;
import java.nio.channels.FileChannel;
import java.io.RandomAccessFile ;
import java.util.* ;

class Checks {
public static FileChannel channel;
public static MappedByteBuffer mbb;

public static void main(String[] args){
    try{

      long k[] = new long[400000000] ;
          for(int i = 0 ; i < 400000000 ; i++){
            k[i] = i ;
          }

    channel = new RandomAccessFile("abc.dat", "rw").getChannel();
        mbb = channel.map(FileChannel.MapMode.READ_WRITE, 0, 1 << 24);
        mbb.order(ByteOrder.nativeOrder());

          for(int i = 0 ; i < 400000000 ;i++ ){
             getMbb().putLong(k[i]);
        }

        channel.close();

       long ks[] = new long[400000000] ;

        channel = new RandomAccessFile("abc.dat", "rw").getChannel();
        mbb = channel.map(FileChannel.MapMode.READ_WRITE, 0, 1 << 24);
        mbb.order(ByteOrder.nativeOrder());

        for(int r = 0 ; r < 400000000; r++){
            ks[r] = getMbb().getLong();
         }

             for(int r = 0 ; r < 400000000; r++){
                 if(k[r] != ks[r]){
                  System.out.println("Error at " + r);
                  break ;
                  }
              }

}
    catch(Exception e)
    {
        e.printStackTrace();
    }

   }

    public static ByteBuffer getMbb() throws IOException {
        if (mbb.remaining() <= 0) {
            mbb = channel.map(FileChannel.MapMode.READ_WRITE, channel.size(), 1 << 24);
            mbb.order(ByteOrder.nativeOrder());
        }
        return mbb;
    }
} 
```

但是，此代码给出了写入和读取数组不相同的错误。任何人都可以帮助我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:31:24.727

在关闭通道之前，尝试强制对映射缓冲区所做的更改到磁盘：

```
 mbb.force(); 
```

这样，如果您使用存储在本地设备上的文件，您可以保证对映射缓冲区所做的所有更改都将反映在磁盘上。

考虑到您只附加到文件，完成您想要的另一种方法是：

```
 channel = new RandomAccessFile("abc.dat", "rw").getChannel();

  ByteBuffer buffer = ByteBuffer.allocate(Long.SIZE/8 * 1001);
  for(int i = 0 ; i < 400000000 ;i++ ){
     //write a number of byte to a ByteBuffer
      buffer.putLong(k[i]);
      if(i % 1000 == 0){
          channel.write(buffer);
          buffer.clear();
      }
   }
   channel.write(buffer);
   buffer.clear(); 
```

阅读：

```
 buffer.clear();
    int bytesCnt;
    while((bytesCnt = channel.read(buffer))!=-1){
    for(int r = 0 ; r < bytesCnt; r++){
        ks[r] = buffer.getLong();
     }
    } 
```

关于性能：在执行 I/O 的应用程序中，性能损失是由于查找次数所致。因此，寻道次数越少，性能就越高。这相当于以**顺序**方式写入**尽可能多的数据**（<=> 较少数量的刷新到磁盘；刷新意味着，实际上是一次查找） 。

 **在您的场景中，数据仅以顺序方式写入（附加到文件中），因此唯一需要担心的是刷新到磁盘的次数；这个数字与缓冲区的大小成反比。所以你应该尽量增加缓冲区的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T21:21:17.580

这是我的建议：

```
public static void main(String[] args) {

  File f = new File("abc.txt");

  DataOutputStream s = new DataOutputStream( new FileOutputStream(f));

  for ( int i = 0; i < 400000000; i++ ) {
    s.writeLong(i);
  }
  s.close();

  DataInputStream is = new DataInputStream( new FileInputStream(f));
  for (int i = 0; i < 400000000; i++ ) {
    if ( i != is.readLong() ) System.out.println("Error at " + i);
  }
} 
```

这完成了您的程序所做的所有事情，但没有显式分配内存，当然也没有通过内存映射缓冲区复制该分配。如果这个解决方案真的适用于你真正想做的事情很难说，因为你没有说这是为了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T21:34:48.093

我修改了您的代码以使用[DataInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html)和[DataOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/DataOutputStream.html)而不是 RandomAccessFile，它就像一个魅力。

```
 try {
        long k[] = new long[400000000];
        for (int i = 0; i < k.length; i++) {
            k[i] = i;
        }

        DataOutputStream dos = new DataOutputStream(new FileOutputStream("abc.dat"));
        for (int i = 0; i < k.length; i++) {
            dos.writeLong(k[i]);
        }

        long ks[] = new long[k.length];

        DataInputStream dis = new DataInputStream(new FileInputStream("abc.dat"));

        for (int r = 0; r < ks.length; r++) {
            ks[r] = dis.readLong();
        }

        for (int r = 0; r < k.length; r++) {
            if (k[r] != ks[r]) {
                System.out.println("Error at " + r);
                break;
            }
        }
    } catch(Exception e) {
    } finally {
        // Make sure to close the streams
        dos.close();
        dis.close();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T21:53:41.157

我认为你的`getMbb()`方法是错误的。每次重新映射内存中的文件块时，都会映射到`channel.size()`. 这仅在您创建文件时有效，但在您阅读文件时无效。当您阅读文件时，您映射文件末尾*之后*的文件“区域”，并且具有随机内容。

您将不得不修复重新映射代码以跟踪您已经在文件中的位置。**

# mysql - 在 SQL 中返回“仅第一条”和“除了第一条”记录

> ID：11976712
> 
> 赞同：2
> 
> 时间：2012-08-15T20:24:35.503
> 
> 标签：mysql, sql

我正在尝试为给定特定约束的所有个人用户返回第一个创建的记录，以及除第一个创建的记录*之外的所有记录。*我的 SQL 坏了，但我一生都无法弄清楚在哪里/为什么。

# 对象模型

我有 4 个感兴趣的模型：用户、课程、问题和问题记录。

每次用户回答问题时，都会生成一个 QuestionRecord。QuestionRecord 与用户、课程和问题是多对一的。（这个基数正确吗？每个 QuestionRecord 都有一个外键，对应一个用户、一个课程和一个问题）

在红宝石中：

```
class QuestionRecord < ActiveRecord::Base

  belongs_to :user
  belongs_to :course
  belongs_to :question
…
end 
```

# 期望的结果#1：第一个记录

我想要的是返回*每个用户的**第一个*问题记录，给定一个课程和一个问题。换句话说，如果 Jane 和 Bill 两次回答了这个问题，John 没有尝试过，Pete 已经回答了 7 次，我想要返回 3 条记录，第一次回答尝试，按创建日期，来自 Jane，Bill，和皮特。

 *我可以在代码中执行此操作，但为了提高效率，我希望在 SQL 中执行此操作。

这就是我所拥有的：

```
SELECT qr.id 
FROM users u 
INNER JOIN question_records qr 
ON u.id = 
  (SELECT x.user_id 
   FROM question_records x 
   WHERE x.course_id = #{course.id} 
   AND x.question_id = #{question.id} 
   AND x.user_id = u.id 
   ORDER BY created_at ASC 
   LIMIT 1 ) 
```

这个查询只运行了 40 分钟左右，实际上并没有返回任何东西。我用 50 条记录的子集运行它，但奇怪的问题是所有返回的 qr.id 结果都是“1”

# 期望的结果 #2：**除了**第一条记录之外的所有记录

**现在在这里，我想要除**第一条记录之外的所有用户的所有记录。我的想法是，本质上，这是同一个查询，除了我想要所有记录，并且我想将返回的索引偏移一个：

```
SELECT qr.id 
FROM users u 
INNER JOIN question_records qr 
ON u.id = 
  (SELECT x.user_id 
   FROM question_records x 
   WHERE x.course_id = #{course.id} 
   AND x.question_id = #{question.id} 
   AND x.user_id = u.id 
   ORDER BY created_at ASC 
   OFFSET 1 ) 
```

但是，很明显，如果第一个查询不起作用，那么第二个查询也不会起作用。

# 结尾

有人对此查询有任何指导吗？让它尽可能高效会很好，所以我可以在 [course_id, question_id] 上索引 question_records 或任何需要的东西。我还假设我错过了使用“GROUP BY x.user_id”的可能性，但不确定如何在不添加更多口香糖的情况下添加它。

作为记录，我们使用的数据库是 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:32:52.093

对于第一个，这应该足够了

```
SELECT qr.id, max(field_1), max(field_2), etc.
FROM users u 
INNER JOIN question_records qr 
ON u.id = qr.user_id
GROUP BY qr.id 
ORDER BY [the field that determines the first question] 
```

对于第二个问题，您有几个选择。1）只需做一个选择并在应用层中折腾第一个。2) 开发一个返回任意范围的查询

选项 2 被称为 top-n-per-group 问题，另外您将限制两端的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:10:03.183

对于 #1，如果您的 ID 值是按顺序发出的：

```
SELECT     MIN(qr.id) AS FirstQRID
FROM         users AS u INNER JOIN
                      question_records AS qr ON qr.user_id = u.id
WHERE     (qr.course_id = #{course.id}) AND (qr.question_id = #{questionid})
GROUP BY u.id 
```

然后，对于#2：

```
SELECT qr.id
FROM         questions AS qr2
WHERE      (qr2.course_id = #{course.id}) AND (qr2.question_id = #{questionid}) AND
           (NOT qr.id = (SELECT     MIN(qr.id) AS FirstQRID
                         FROM         users AS u INNER JOIN
                                               question_records AS qr ON qr.user_id = u.id
                         WHERE     (qr.course_id = qr2.course_id) AND (qr.question_id = qr2.quesion_id) AND
                                   (qr.user_id = qr2.user_id))) 
```*

# haskell - 如何在 Haskell 中实现 ^ 运算符？

> ID：11976713
> 
> 赞同：6
> 
> 时间：2012-08-15T20:24:38.267
> 
> 标签：haskell, types, operator-overloading, fractions

我正在为 Haskell 中的 Fraction 数据类型创建一堆实例，我想知道是否有一个地方可以实现该`^`运算符。

我的意思是，我有几个不同`Num`类型的实例，在这些实例中，我定义了常见的操作，例如`+`,`-`等。

有了它，数据类型就像我想要的那样表现得像一个普通数字（这意味着我可以调用类似的东西`(Frac 1 2) + (Frac 1 4)`并返回`Frac 3 4`）

我想做的是`^`直接实施。现在，我已经将它定义为：

```
(|^|) :: Fraction -> Int -> Fraction
(|^|) f = foldr (*) mempty . flip replicate f 
```

当我尝试将函数的名称更改为 时`^`，我收到一个错误，因为它与 Prelude 的定义冲突`^`。有没有一种`Num`类型可以给我的`Fraction`类型一个实例以允许我`^`在其上使用运算符？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T20:33:58.933

`Prelude.^`不是任何类型类的一部分，因此您可以定义自己的`^`函数的唯一方法是将其隐藏在`Prelude`.

请注意，由于`Prelude.^`is的签名`(Num a, Integral b) => a -> b -> a`，您可以在您的`Frac`类型的值上使用它，只要它是`Num`. 您只是不会提供自己的实现。

# windows-phone-7 - Windows phone 3D 模型旋转与触摸

> ID：11976714
> 
> 赞同：1
> 
> 时间：2012-08-15T20:24:40.203
> 
> 标签：windows-phone-7, xna, rotation, 3d-modelling

在我的 windows phone 应用程序中，我想使用屏幕触摸输入来旋转 3d 模型。

问题是;

起初一切都很好，我可以使用触摸移动模型，但是当我通过 X 轴的旋转使对象上下颠倒时，Y 轴的旋转就会反转。那是因为我的世界轴也发生了变化。我尝试了很多方法。

第一个：

```
Matrix world = Matrix.Identity *Matrix.CreateRotationY( somerotation);
world = world * Matrix.CreateRotationX( somerotation );
world *= Matrix.CreateTranslation(0, 0, 0); 
```

第二：

```
 Matrix world = Matrix.Identity * Matrix.CreateFromYawPitchRoll(somerotation,somerotation,0);
world *= Matrix.CreateTranslation(0, 0.0f, zoomXY); 
```

第三：

```
 Matrix world = Matrix.Identity *Matrix.CreateFromQuaternion(Quaternion.CreateFromAxisAngle(new Vector3(0, 1, 0),somerotation));
    world *= Matrix.CreateFromQuaternion(Quaternion.CreateFromAxisAngle(new Vector3(1, 0, 0), somerotation));
    world *= Matrix.CreateTranslation(0,0,0); 
```

第 4 名

```
Matrix world = Matrix.Identity;
            world = Matrix.CreateFromAxisAngle(Vector3.Up,somerotation);
            world *= Matrix.CreateFromAxisAngle(Vector3.Right,somerotation);
            world *= Matrix.CreateTranslation(0, 0,0); 
```

结果是一样的。。现在我的思想在不受控制地旋转。

如何使用旋转后不变的静态轴？或者有什么其他建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:12:07.140

问题是你的数学没有错。第 2 轴运动是倒置的，因为从相反方向观察时这是正确的运动，这是您通过旋转另一个轴引起的。

与其每帧从头开始围绕固定轴创建旋转，不如尝试存储一些当前方向向量（向上和向右、向前和向左）并将围绕这些方向的小增量旋转应用到持久世界矩阵。当然，您还必须将这些相同的更改应用于您的方向。

这样，无论您的矩阵当前面向哪个方向，您始终可以相对于它并沿您想要的方向旋转。

**编辑（代码）：**

```
class gameclass
{
Vector3 forward = Vector3.UnitZ;    //persistent orientation variables
Vector3 left    = -1 * Vector3.UnitX;
Vector3 up      = Vector3.UnitY

Matrix world = Matrix.Identitiy;

InputClass inputputclass;           //something to get your input data

void Update()
{
Vector3 pitch = inputclass.getpitch();          //vertical swipe
forward = Vector3.transform(forward,
    Matrix.CreateFromAxisAngle(left, pitch));
up      = Vector3.transform(up,
    Matrix.CreateFromAxisAngle(left, pitch));

Vector3 yaw = inputclass.getyaw();              //horizontal swipe

forward = Vector3.transform(forward,
    Matrix.CreateFromAxisAngle(up, yaw));
left    = Vector3.transform(left,
    Matrix.CreateFromAxisAngle(up, yaw));

forward.Normalize(); left.Normalize(); top.Normalize();  //avoid rounding errors

world = Matrix.CreateWorld(
    postition                     //this isn't defined in my code
    forward,
    up);
}

} 
```

拥有自由的球形旋转并不简单。:)

# c# - Silverlight 中基于 Linq 查询的 Collection/CollectionView

> ID：11976716
> 
> 赞同：1
> 
> 时间：2012-08-15T20:25:01.117
> 
> 标签：c#, linq, silverlight, delegates, observablecollection

我正在研究绑定到返回委托结果的 ObservableCollection 属性的概念证明。委托也为其设置了一个属性，这样我就可以更改使用的表达式，它会触发集合的 OnPropertyChanged。这允许我将 ComboBox 绑定到 Collection，并且在更改表达式/查询时，ComboBox 中的可用选项也会发生变化。

代码：

```
public delegate List<string> Del();

private Del _query;
public Del Query
{
    get
    {
        return _query;
    }
    set
    {
        _query= value;
        OnPropertyChanged("BindList");
    }
}

private ObservableCollection<string> bindList;
public ObservableCollection<string> BindList
{
    get
    {
        var results = Query();
        bindList = new ObservableCollection<string>(results);
        return bindList;
    }
    set
    {//I believe I need this setter for the extra functionality provided by ObservableCollections over Lists
        if(bindList != value) {
            bindList = value;
            OnPropertyChanged("BindList");
        }
    }
} 
```

由于这有效，我想用它制作一个易于绑定的类。我正在寻求有关如何执行此操作的指导。我曾考虑过将 ObservableCollection 子类化，但在如何设置 Items 时遇到了问题。我还考虑了一个使用 IEnumerable 和 ICollectionView 等接口的自定义类（以及通知接口）。

总而言之，您将如何构建一个类来合并一个集合，该集合的成员基于关于子类化/接口的委托查询（具体来说是 LINQ）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:02:49.857

到目前为止，这是我想出的。还没有进行大量测试，但到目前为止它看起来还不错。

```
public class DynamicCollection<T> : IEnumerable, INotifyCollectionChanged
{
    public ICollectionView Collection { get; private set; }

    public delegate List<T> Del();

    private Del query;
    public Del Query
    {
        get
        {
            return query;
        }
        set
        {
            if (query != value)
            {
                query = value;//set the new query
                T currentItem = (T)Collection.CurrentItem;//save current item
                Collection = new PagedCollectionView(Query());//recreate collection with new query
                Collection.MoveCurrentTo(currentItem);//move current to the previous current (if it doesn't exist, nothing is selected)
                OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));//Notify colleciton has changed.
            }
        }
    }

    public DynamicCollection()
    {
        Collection = new PagedCollectionView(new List<T>());//empty collection
    }

    public DynamicCollection(IEnumerable<T>collection)
    {
        Collection = new PagedCollectionView(collection);
    }

    public DynamicCollection(Del delegateQuery)
    {
        Query = delegateQuery;
    }

    #region IEnumerable Members
    public IEnumerator GetEnumerator()
    {
        return Collection.GetEnumerator();
    }
    #endregion IEnumerable Members

    #region INotifyCollectionChanged Members
    public event NotifyCollectionChangedEventHandler CollectionChanged;
    protected void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        NotifyCollectionChangedEventHandler handler = CollectionChanged;
        if (handler != null)
        {
            CollectionChanged(this, e);
        }
    }
    #endregion INotifyCollectionChanged Members
} 
```

它可以使用`ItemsSource="{Binding Path=myCollection, Mode=TwoWay}"`（假设您已`DyamicCollection myCollection`在 ViewModel/data 上下文中设置为属性）绑定到 ComboBox 中。

这一切都通过设置查询来工作，在我的例子中，我给出了一个返回列表的 LINQ to XML 查询。Collection 对此进行更新，绑定的 ComboBox 反映了此更新。

请随时批评这一点。我很确定我已经解决了一些问题，或者也许有更好的方法来做到这一点。我愿意接受反馈，并将随着它的发展更新这个答案。

# python - 有没有办法将变音符号转换为它们的 ascii 等价物？

> ID：11976720
> 
> 赞同：5
> 
> 时间：2012-08-15T20:25:18.963
> 
> 标签：python, diacritics

> **可能重复：**
> [在 python unicode 字符串中删除重音的最佳方法是什么？](https://stackoverflow.com/questions/517923/what-is-the-best-way-to-remove-accents-in-a-python-unicode-string)

在某个系统中，我需要生成只允许使用纯 ascii 字符（az、0-9、破折号）的用户名。然而，许多用户的名字并不简单地符合这些限制，例如德国名字“Müller”或“Röthlin”。

现在这些变音符号有另一种输入方式（我确定它有一个名称，但我不知道 - 可能有助于谷歌搜索）

一种天真的方法是使用转换表：

```
name = name.replace('Ä', 'Ae')
name = name.replace('ä', 'ae')
name = name.replace('ö', 'oe') 
```

等等。

但是，一旦您的用户来自德国以外的其他文化（可能会出现其他字符），这种方法就会失败。因此，我正在寻找一种通用方法来“转换”尽可能多的非 ascii 字符，然后再退回以简单地将它们删除。

# r - R 中的 ifelse & for 循环 - 一个简单示例所需的帮助

> ID：11976725
> 
> 赞同：0
> 
> 时间：2012-08-15T20:26:01.907
> 
> 标签：r

我对 R 很陌生，只是在玩它。我写了一些代码来计算给定两个边的可能 Heron 三角形的数量。正如我们许多人所知，苍鹭三角形的所有边和面积都是整数。在下面给出的代码中，a & b 是整数。

```
heron <- function(a,b)
{
  d = 0
  for(c in abs(a-b)+1:a+b-1)
  {
    area <- ((1/4)*sqrt((a^2+b^2+c^2)^2-(a^4+b^4+c^4)))
    d <- ifelse(area == floor(area), d+1, d)
  }

  return(d)
} 
```

代码返回错误的值。例如，`heron(5,5)=2`但是当我插入`a=5`,时`b=5`，它给出的答案是`0`. 看代码，很明显for循环和ifelse部分有问题；但我无法弄清楚，因此这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:40:30.410

我在您的代码中看到两个错误。

首先：根据this [Wiki Page](http://en.wikipedia.org/wiki/Heron%27s_formula)，您的公式不正确，您忘记了2（平方根）

第二：在 for 循环中，您必须添加一些额外的括号（在 R 中`10 + 1:12 != 11:12`）

```
heron <- function(a,b)
{
  d = 0
  for(c in (abs(a-b)+1):(a+b-1))
  {
    area <- ((1/4) * sqrt((a^2+b^2+c^2)^2 - 2 * (a^4+b^4+c^4)))
    d <- ifelse(area == floor(area), d+1, d)
  }

  return(d)
}

heron(5, 5)
[1] 2
heron(13, 25)
[1] 0 
```

没有 for 循环的第二种解决方案

```
Heron <- function(a, b) {
C <- (abs(a-b)+1):(a+b-1)
Res <- sapply(C, function(i) 
                  ((1/4) * sqrt((a^2+b^2+i^2)^2 - 2 * (a^4+b^4+i^4))))
length(Res[Res == floor(Res)])
}
Heron(5, 5)
[1] 2
Heron(13, 25)
[1] 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:36:32.743

我假设您遇到了浮点数学错误。如果你仔细计算：

```
a <- 5
b <- 5 
```

`c`我可以从您的代码中收集信息`for loop`，但它并没有按照您的想法做：

```
abs(a-b)+1:a+b-1 
```

给出数字 5 到 9\. `abs(a-b)+ (1 through a+b) - 1`. 而不是`(abs(a-b) + 1) through (a + b - 1)`

```
c <- 1:9

area <- 1/4 * sqrt((a^2 + b^2 + c^2)^2 - (a^4 + b^4 + c^4))

> area
[1]  9.185587 10.155048 11.592023 13.346348 15.309311 17.410485 19.605484 21.866070 24.173850
> 
```

它们都不是整数。因此，`d`保持在 0。

我也放弃了你的 for 循环。您可以使用 R 的矢量化特性来进行此计算。它会根据需要重复多次，以使`a`向量的长度与 相同。`b``area``c`

然后是这样的：

```
length(area[area==floor(area)]) 
```

会给你苍鹭三角形的数量。其他更了解该公式的人将不得不告诉您它是否正确。

# arrays - 经典 ASP：插入数组并获取类型不匹配

> ID：11976727
> 
> 赞同：1
> 
> 时间：2012-08-15T20:26:07.747
> 
> 标签：arrays, asp-classic, type-mismatch

我正在尝试将一个 int 插入一个数组并将一个字符串插入另一个数组。出于某种原因，无论我如何尝试，我都无法插入 int 或 string。这是代码

```
dim siteList,siteNameList, strQuery
Set oConn = Server.CreateObject("ADODB.Connection") 
set oRs = Server.CreateObject("ADODB.Recordset")
oConn.Open strConnQuery
strQuery = "Select zSiteID as id, zSiteNm as Name from vSite"
set ors = oConn.Execute(strQuery)
z=0
Do While Not oRs.EOF
   sID=oRs("id")
   sName=oRs("Name")
   if InStr(oRs("Name"),"'")>0 then
       sOut = replace(strorigFileName,"'"  ,"")
       siteList(z)=sID
       siteNameList(z)=sOut
   else
       siteList(z)=sID(this is where the error occurs first)
       siteNameList(z)=sName

   end if
   z=z+1
   oRs.MoveNext
Loop
oConn.Close 
```

我曾尝试将其转换为不同的东西，但这根本没有帮助。我不知道出了什么问题，所以任何信息将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:44:36.063

这是一个类似问题[的答案，描述了为什么会发生这种情况。](https://stackoverflow.com/questions/648569/type-mismatch-on-an-array-assignment-in-asp)

您想检查返回集（或）中的记录数，并在知道所需大小后重新调整数组或对其进行初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:31:24.623

在经典 ASP 中，您需要声明数组的大小：

```
dim siteList(5) 
```

# php - 使用不同格式的传入字符串进行字符串拆分和截断

> ID：11976728
> 
> 赞同：1
> 
> 时间：2012-08-15T20:26:09.937
> 
> 标签：php, google-calendar-api, str-replace

我所拥有的：一个字符串，上面写着“2012 年 8 月 7 日星期二到 2012 年 8 月 28 日星期二”

我想要的：一个字符串，上面写着“8 月 7 日 - 8 月 28 日”

唯一的问题是有时我将其作为字符串：

“2012 年 8 月 31 日星期五晚上 7:30 至晚上 9:30”

结果我需要这个：“Aug 31”

这是来自 Google 日历提要的信息，因此传入的字符串会根据用户是否输入开始时间等而有所不同。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:47:06.933

### 情况1

```
$string = 'Fri Aug 31, 2012 7:30pm to 9:30pm';

$pieces = explode(' to ', $string);

$d1 = strtotime($pieces[0]);

if(isset($pieces[1])) {
    $d2 = strtotime($pieces[1]);
    if(date('M j', $d1) == date('M j', strtotime($pieces[1], $d1))) {
        echo date('M j', $d1);
    }
    else echo date('M j', $d1) . " - " . date('M j', $d2);
}
else {
    echo date('M j', $d1);
} 
```

**结果：** 8月31日

### 案例2

```
$string = 'Tue Aug 7, 2012 to Tue Aug 28, 2012'; 
```

**结果：** 8 月 7 日 - 8 月 28 日

### 案例3

```
$string = 'Tue Aug 7, 2012'; 
```

**结果：** 8月7日

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:49:48.357

您可以使用该[`preg_match_all`](http://php.net/manual/en/function.preg-match-all.php)函数使逻辑更容易：

```
$str1 = "Tue Aug 7, 2012 to Tue Aug 28, 2012";
$str2 = "Fri Aug 31, 2012 7:30pm to 9:30pm";

$pattern = '/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) \d+/';
$numMatches = preg_match_all($pattern, $str1, $dates);

if ($numMatches == 1) // case 2
    echo $dates[0][0];
else // case 1
    echo $dates[0][0]." - ".$dates[0][1]; 
```

[**`preg_match_all`DEMO（在测试用例 2中将 $str1 更改为 $str2 ）**](http://sandbox.onlinephpfunctions.com/code/8b8de978622c32cecaed8c91ccaba9ce4ba4841f)

`MON D`只要格式或`MON DD`字符串中有一个或多个日期，这将起作用。字符串的其余部分如何格式化并不重要，只要存在月份和日期即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T20:56:14.243

检查此变体：

$in = "2012 年 8 月 7 日星期二至 2012 年 8 月 28 日星期二"; //$in = "2012 年 8 月 31 日星期五晚上 7:30 到凌晨 4:30";

```
$reg = '~(\w{3}) (\w{3}) (\d{1,2}), (\d{4}) (\d{1,2}:\d{2}(?:pm|am) )?to (?:(\w{3}) (\w{3}) (\d{1,2}), (\d{4})|(\d{1,2}:\d{2}(?:pm|am)))~i';
$in = preg_replace_callback($reg, function($m) {
    if (!$m[6] && !$m[9]) {
        return "{$m[2]} {$m[3]}";
    }
    else return "{$m[2]} {$m[3]} - {$m[7]} {$m[8]}";
}, $in);

echo $in; 
```

为`"Tue Aug 7, 2012 to Tue Aug 28, 2012"`印刷品`Aug 7 - Aug 28`，为`"Fri Aug 31, 2012 7:30pm to 4:30am"`你得到`Aug 31`。

# ruby-on-rails - 使在 ubuntu 上的 rails 上部署 ruby 变得更容易的方法

> ID：11976729
> 
> 赞同：0
> 
> 时间：2012-08-15T20:26:10.597
> 
> 标签：ruby-on-rails, ruby, heroku

与朋友一起在 RoR 中进行项目。经过大量工作将所有内容设置为在不同机器上运行后，我们已经将我们的应用程序部署在 heroku 和两台本地机器上。有没有更轻松的方法来管理这个未来？我觉得我们会一次又一次地遇到这种情况。

我有几个想法：

1.) 在私人服务器上设置应用程序，并直接在服务器上进行所有开发（通过 ssh）。这是一种常见的方法吗？

2.) 将应用程序设置为完全独立。即直接从 app 文件夹运行所有东西，包括 ruby​​、rails 和我们需要的所有 gem。如果您需要的一切都在项目目录中，那么由于 ruby​​ 版本/gem 版本等略有不同，您似乎可以避免应用程序在一台机器上运行而不是其他机器上的问题。

3.) 克隆我的硬盘并发送给我的朋友，这样我们就可以从完全相同的设置开始。有没有办法复制整个磁盘分区的内容（运行 ubuntu），然后安装在其他人的计算机上，以便他们可以从引导运行操作系统？即使我们都在运行 ubuntu，但我们发现很多在我的机器上运行的东西在他的机器上不起作用，反之亦然。很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:06:23.037

[https://github.com/capistrano/capistrano/](https://github.com/capistrano/capistrano/)是使用最广泛的部署工具，允许您通过 SSH 进行部署。

此外，您可能希望查看用于管理 gem 和依赖项的 Bundler (http://gembundler.com/)，这将使您在不同机器上运行时更加轻松。

您应该考虑使用 RVM (https://rvm.io/) 或 rbenv (https://github.com/sstephenson/rbenv/) 来进一步标准化您的环境以包含特定的 ruby​​ 版本。

请注意，您还可以使用 RVM 创建“gemset”，这实际上为一组 gem 创建了一个沙箱，以将它们隔离到特定项目。

# objective-c - NSCopying：使用“区域”

> ID：11976730
> 
> 赞同：0
> 
> 时间：2012-08-15T20:26:10.977
> 
> 标签：objective-c, cocoa

我的类实现`NSCopying`如下：

```
@implementation MyClass

- (id) copyWithZone: (NSZone *) zone {
    MyClass *copy = [[MyClass allocWithZone: zone] init];

    // Copy instance variables

    return copy;
}

@end 
```

这意味着副本被分配在所需的内存区域中。如果对象包含需要复制的实例变量，例如可变数组，我应该使用它们的`copyWithZone:`消息并传递`zone`，而不是仅仅调用`copy`？

此外，如果有我想直接实例化而不是复制对象的实例变量，我是否必须使用`allocWithZone:`类方法来分配它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:30:43.460

Zone 已过时 - 与它没有什么特别的关系。如果你也复制你的 ivars，你可以放心地忽略它，只需调用它们的复制。

# java - 带有自定义库后缀的 System.loadLibrary

> ID：11976732
> 
> 赞同：0
> 
> 时间：2012-08-15T20:26:14.107
> 
> 标签：java, java-native-interface, native

我想加载一个带有本地方法实现的动态库，位于 中`java.library.path`，后缀为`.cdl`. 不幸的是，以下方法不起作用。

```
static {
    System.loadLibrary("java4d.cdl");
} 
```

如何加载我的`java4d.cdl`库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:29:58.530

如果你使用 System.load("java4d.cdl") 会怎样？请注意，参数需要是绝对路径： [http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#load(java.lang.String)](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#load(java.lang.String))

# screenshot - 屏幕截图上的运动检测

> ID：11976736
> 
> 赞同：4
> 
> 时间：2012-08-15T20:26:24.367
> 
> 标签：screenshot, video-processing, motion-detection, video-codecs

我想知道是否有一种快速算法可以检测在两个连续屏幕截图之间移动的部分。该算法应该获取两张图像并在一张图像中输出一组（矩形）区域，以及一个描述匹配区域在另一张图像中的位置的向量。

我想将其用于为屏幕捕获而简化的无损视频压缩算法。我认为这使得用例与运动检测的通常应用有点不同：

*   图片是截图。不太可能有任何伪影或图像噪声
*   如果图像的一部分移动，它会按像素移动。移动部分的像素差异通常不到 2%
*   移动的区域通常很大并且呈矩形

由于视频压缩管道还有其他步骤并且应该实时发生，因此运动检测应该很快。

有什么有用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:27:04.523

跨帧跟踪运动的常用方法是： 1\. 确定要在图像 1 中跟踪的点 2\. 将输入图像中的点与输出图像中的点相关联 3\. 确定使它们到达那里的变换

对于第 1 步，有很多“跟踪器”，您会在 OpenCV 中找到一些相当标准的用于寻找“有趣”点（边缘的交叉点、局部最大值等）。Kanade-Tomasi 图像跟踪器就是其中之一。但是，为了您的使用，您可能更喜欢只创建一个规则的点网格。

对于第 2 步，一种常见的技术是使用降低分辨率的四叉树......我的意思是拍摄您的图像，创建一个宽度和高度为 1/2 的新图像，一次又一次。现在您在顶部有一个非常低分辨率的图像，您可以更快地搜索数量级，并且会给您一个边界框来查看下一个更高的 rez 图像。在您的情况下，优化可能是首先查看输出以查看它是否发生了变化，当您找到点 x、y 的匹配项时，还要在其旁边查找点 x+1 或 y+1 等。

对于第 3 步，这取决于您……如果您谈论的是在屏幕上滑动的窗口，则会有大块一起移动，但边缘内外是相同的。但是，如果有任何动画，那可能会把事情搞砸。而鼠标光标本身就是一个小东西，它会四处移动并降低算法的有效性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T04:16:39.440

我有一些想法，以及您可以考虑的可能可行的解决方案。

首先，考虑跟踪单个像素增量并仅传输/存储这些增量。一个典型的交互会话通常只涉及很小部分的 UI 更改；对于长时间使用计算机的会话，移动或调整窗口大小往往不太常见（有趣的是）。这可以有效地捕获简单的内容，例如输入的文本、光标移动和小的 UI 更新，而无需大量额外工作。

您还可以考虑尝试在较低级别挂钩操作系统，以获取例如像素的显示列表，甚至（最佳）“损坏”矩形列表。例如，Mac OS X 的 Quartz 合成器可以为您提供这些信息。这可以帮助您快速缩小要更新的范围，并且在理想情况下，可以为您提供屏幕本身的有效表示。

如果您可以查询有关窗口的操作系统（窗口管理器）信息，则可以为每个可见窗口存储单独的数据流（像素增量），然后在播放期间应用简单的显示列表方法来“渲染”它们。然后，识别移动窗口很简单，因为您可以简单地区分显示列表。

如果您可以查询操作系统关于光标位置的信息，您可以使用光标移动来快速估计移动增量，因为光标移动通常与屏幕上的对象移动（例如移动窗口、图标、拖动对象等）有很好的相关性。这使您可以避免处理图像以确定移动增量。

一个可能的解决方案（或者如果您仍然无法通过上述方法识别移动增量的最后手段）：我们实际上可以相当容易地处理单个移动矩形的（非常常见的）情况。制作帧中所有变化的像素的蒙版。识别掩码中最大的连通分量。如果它近似于一个矩形，那么您可以假设它代表一个移动的区域。窗口移动完全正交（例如完全在 x 或 y 方向），在这种情况下，总增量看起来像一个稍大的矩形，或者窗口沿对角线移动，在这种情况下，总增量将有一个 8 边形状。无论哪种方式，您都可以估计运动矢量，并通过区分区域来验证这一点。请注意，这种处理会故意忽略您必须考虑的细节，例如 像素在窗口附近独立移动，或看起来没有变化的区域（例如窗口中的大块纯色）。实际的实现必须处理上述所有问题。

最后，我将研究有关实时运动估计的现有文献。在优化运动估计和补偿（例如视频编码）方面已经做了很多工作，因此如果您发现上述方法不合适，您也可以使用这些工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T09:17:21.110

Opencv 深入介绍了图像处理，并提供了大量关于该主题的教程。

[http://docs.opencv.org/doc/tutorials/tutorials.html](http://docs.opencv.org/doc/tutorials/tutorials.html)

PDF比网站有更多的tuts。Google for... opencv 教程 pdf ...顶部链接。

主要网站。 [http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)

本质上，您可以在图像上运行数学函数来为您解决问题。卷积等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T15:55:29.510

## 我做了什么

我实现了一种简单的技术，可以补偿大多数运动并且易于实现。

每一帧都被分成固定大小的瓦片，比如 8×8 像素。编解码器管理可自定义数量的块的环形缓冲区，例如 2 ^(20)。现在，对于编解码器在输入流中遇到的每个图块，它检查是否已经在环形缓冲区中找到它。如果是，它只是保存切片索引，如果不是，它将切片存储在环形缓冲区中。

每当图像的一部分从过去的任何图像中移动块大小的倍数时，很可能会在缓存中找到切片。这样，可以补偿大多数运动。由于在 ringbuffer 中找到一个 tile 非常快，这足以实时运行。

# jquery - 带有矩形淡入的图像推子从中间扩展到边缘

> ID：11976738
> 
> 赞同：1
> 
> 时间：2012-08-15T20:26:26.280
> 
> 标签：jquery, easing, jquery-easing, image-masking

我正在用 jQuery 替换自定义 Flash 动画。旧动画使用了一个像窗帘开口一样移动的蒙版：中心首先出现，图像在两侧横向淡入，中心矩形蒙版向外平滑扩展至边缘。

有没有办法在 jQuery 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:37:00.177

那里有预先构建的选项，例如构建互联网上的[这个示例。](http://buildinternet.com/2009/07/animate-curtains-opening-with-jquery/)很可能您将不得不采用这样的示例并对其进行自定义以满足您的需求，但它应该为您提供一个起点。

# jquery - 电子表格导航模板

> ID：11976740
> 
> 赞同：0
> 
> 时间：2012-08-15T20:26:51.610
> 
> 标签：jquery, ajax, coldfusion

每隔一段时间，我就会考虑为我的数据库表编写一个电子表格前端。在我开始解释左箭头是否意味着向左移动一位数字或是否意味着向左移动一个单元格之前......

是否有 JavaScript 例程用于在屏幕上的 <table> 元素周围导航并能够修改 <td> 文本？

我想，每当用户更改单元格时，我都必须挂起 $.ajax 调用。

我♡ jQuery 和 ColdFusion。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T20:09:36.977

你在寻找这样的东西吗？

[http://datatables.net/release-datatables/examples/api/editable.html](http://datatables.net/release-datatables/examples/api/editable.html)

# sql - 在 SQL 查询中将行转置和分组到列中

> ID：11976746
> 
> 赞同：0
> 
> 时间：2012-08-15T20:27:27.820
> 
> 标签：sql

我有以下两个表（带有数据的 SQL 脚本）：

```
CREATE TABLE [dbo].[Item_Master](  
[Item_Name] [varcha`enter code here`r](20) NOT NULL,  
[Item_Cost] [int] NULL,  
 CONSTRAINT [PK_Item_Master] PRIMARY KEY CLUSTERED   
(  
    [Item_Name] ASC  
)  
)  

GO  

CREATE TABLE [dbo].[ItemAnalysis]  
(  
Item_Name nvarchar(20) NOT NULL,  
Analysis_Type nvarchar(20) NOT NULL,  
Item_Quantity int NOT NULL,  
Analysis_Date date NOT NULL  
)  

GO  

insert Item_Master (Item_Name, Item_Cost)   
values ('item1', 2)     
insert Item_Master (Item_Name, Item_Cost)  
values ('item2', 3)  

insert ItemAnalysis (Item_Name, Analysis_Type, Item_Quantity, Analysis_Date)   
values ('item1', 'A', 10, '2012-01-14')  
insert ItemAnalysis (Item_Name, Analysis_Type, Item_Quantity, Analysis_Date)   
values ('item1', 'B', 12, '2012-01-14')  
insert ItemAnalysis (Item_Name, Analysis_Type, Item_Quantity, Analysis_Date)   
values ('item2', 'A', 11, '2012-01-14')  
insert ItemAnalysis (Item_Name, Analysis_Type, Item_Quantity, Analysis_Date)   
values ('item2', 'B', 14, '2012-01-14')  
insert ItemAnalysis (Item_Name, Analysis_Type, Item_Quantity, Analysis_Date)   
values ('item1', 'A', 9, '2012-02-11')  
insert ItemAnalysis (Item_Name, Analysis_Type, Item_Quantity, Analysis_Date)     
values ('item1', 'B', 11, '2012-02-11')  
insert ItemAnalysis (Item_Name, Analysis_Type, Item_Quantity, Analysis_Date)  
values ('item2', 'A', 20, '2012-02-11')  
insert ItemAnalysis (Item_Name, Analysis_Type, Item_Quantity, Analysis_Date)   
values ('item2', 'B', 7, '2012-02-11') 
```

我需要这样的输出：

```
Item_Name| Item_Cost| Analysis_Date| Type_A_Quantity| Type_B_Quantity  
----------------------------------------------------------------------  
item1|2|2012-01-14|10|12  
item2|3|2012-01-14|11|14  
item1|2|2012-02-11|9|11  
item2|3|2012-02-11|20|7 
```

何时进行分析没有规律（例如，可以每周或每月进行等），但无论何时进行分析，都会在一天内对所有项目进行分析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:32:53.513

[SQL小提琴](http://sqlfiddle.com/#!3/5035f/5)

```
SELECT
    m.Item_Name,
    m.Item_Cost,
    a.Analysis_Date,
    SUM(CASE WHEN Analysis_Type = 'A' THEN Item_Quantity ELSE 0 END) as Type_A_Quantity,
    SUM(CASE WHEN Analysis_Type = 'B' THEN Item_Quantity ELSE 0 END) as Type_B_Quantity
FROM Item_Master m
JOIN ItemAnalysis a
    ON m.Item_Name = a.Item_Name
GROUP BY m.Item_Name, m.Item_Cost, a.Analysis_Date 
```

# ajax - 如何使用 AJAX 搜索 Google 图片？

> ID：11976747
> 
> 赞同：0
> 
> 时间：2012-08-15T20:27:30.310
> 
> 标签：ajax, json, google-api, google-image-search

我正在尝试使用 AJAX 和滤色器从 Google 图片中提取图片。

[Google Search API](https://developers.google.com/web-search/)已被弃用，而是鼓励使用自定义[搜索 API 。](https://developers.google.com/custom-search/v1/overview)但是，在阅读那里找到的程序员指南时，我看不到*全局*搜索而不是*特定于站点的*搜索的选项。[这里](https://developers.google.com/custom-search/v1/getting_started#set_up_cse)说要设置一个自定义搜索引擎，但这要求搜索仅限于特定的 URL！

有一个[类似的 SO 帖子](https://stackoverflow.com/q/8448788/805556)链接到[Google Groups 讨论](https://groups.google.com/forum/?fromgroups#!topic/google-ajax-search-api/iNbeR8IEjhc%5B1-25%5D)。那里提供的唯一解决方案是使用已弃用的 API，因为访问受到限制，我很不愿意这样做，或者使用 Bing API，它不能按颜色过滤搜索。

真的没有其他解决方案了吗？是否无法使用 AJAX 执行全局 Google 图片搜索？

# php - 如何通过 php 将 xmldata 发布到 https://wsdl

> ID：11976759
> 
> 赞同：1
> 
> 时间：2012-08-15T20:28:05.763
> 
> 标签：php

大家晚上好，

我一直在进行一场艰苦的战斗，尝试将 xml 数据发布到 https 网络服务。我是 PHP 新手，所以我正在努力学习。我已经能够通过soapUI 将xml 数据发布到Web 服务，但我无法通过PHP 重新创建来处理。如果 PHP SOAP 大师的任何人都可以向我解释我做错了什么，那将是一个很大的帮助。下面是我试图发布到网络服务的代码片段。

```
<?php
$user = "xxxxxx"; 
$password = "xxxxx"; 
$url = "https://esws.energystar.gov/DataServices/servlet/webservices?ver=1.1&wsdlxml";
$post_string = <<<EOT
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:roof="http://www.energystar.gov/schema/Roof_Products_2_x/" xmlns:core="http://www.energystar.gov/schema/core/">
 <soapenv:Header/>
 <soapenv:Body>
    <roof:Roof_Products_submission>
       <core:core_submission>
          <core:Authentication_UserName>xxxxx</core:Authentication_UserName>
          <core:Authentication_Password>xxxxxxx</core:Authentication_Password>
  <core:Certification_Body_EPA_Issued_Organization_Id>xxxxxxx</core:Certification_Body_EPA_Issued_Organization_Id>
          <core:Is_Test_Submission>Yes</core:Is_Test_Submission>
       </core:core_submission>
       <!--1 or more repetitions:-->
       <roof:Roof_Products>
          <core:core_product_data>
             <core:ENERGY_STAR_Manufacturing_Partner>QPX Active Partner</core:ENERGY_STAR_Manufacturing_Partner>
             <core:ENERGY_STAR_Manufacturing_Partner_s_EPA_issued_Organization_ID>xxxxxxxxx</core:ENERGY_STAR_Manufacturing_Partner_s_EPA_issued_Organization_ID>
             <core:Partner_Contact_Name_For_This_Model>xxxxxxx</core:Partner_Contact_Name_For_This_Model>
             <core:Type_of_Transaction>Initial Certification</core:Type_of_Transaction>
             <core:Reason_for_Transaction>Initial Certification: Model Meets ENERGY STAR Requirements</core:Reason_for_Transaction>
             <core:Date_of_Transaction_Type>2010-12-31</core:Date_of_Transaction_Type>
             <core:ENERGY_STAR_Model_Identifier>TestID2929</core:ENERGY_STAR_Model_Identifier>
             <core:Certification_ID>TestCertID123</core:Certification_ID>
             <core:Family_ID>TestFamID123</core:Family_ID>
             <core:Model_Name>Model_Name1234</core:Model_Name>
             <core:Model_Number>Model_Number33453</core:Model_Number>
             <core:Brand_Name>Brand_Name1</core:Brand_Name>
             <core:Tested_Model_Name>Tested_Model_Name1</core:Tested_Model_Name>
             <core:Tested_Model_Number>Tested_Model_Number1</core:Tested_Model_Number>
             <!--Zero or more repetitions:-->
             <core:Additional_Models_Represented_by_Family_Series_or_DOE_Basic>
                <core:Additional_Model_Name>test</core:Additional_Model_Name>
                <core:Additional_Model_Number>12345</core:Additional_Model_Number>
                <core:Additional_Identifying_Information>non</core:Additional_Identifying_Information>
             </core:Additional_Models_Represented_by_Family_Series_or_DOE_Basic>
             <core:Is_the_Partner_Listed_the_Original_Equipment_Manufacturer_OEM>Yes</core:Is_the_Partner_Listed_the_Original_Equipment_Manufacturer_OEM>
             <core:If_the_Partner_is_Not_the_Original_Equipment_Manufacturer_Who_is>?</core:If_the_Partner_is_Not_the_Original_Equipment_Manufacturer_Who_is>
             <core:Currently_Available_on_Market>Yes</core:Currently_Available_on_Market>
             <core:Date_Available_On_Market>2010-12-31</core:Date_Available_On_Market>
             <core:Date_Tested>2010-12-31</core:Date_Tested>
             <core:Date_CB_Notified_Partner_of_Model_Qualification>2010-12-31</core:Date_CB_Notified_Partner_of_Model_Qualification>
             <core:Certification_Body_Contact_Name_for_This_Model>QPX Certification Body 1</core:Certification_Body_Contact_Name_for_This_Model>
             <!--Zero or more repetitions:-->
             <core:Laboratory>
                <core:Laboratory_EPA_issued_Organization_ID>xxxxxxxxx</core:Laboratory_EPA_issued_Organization_ID>
                <core:Laboratory_Contact_for_This_Model>QPX Laboratory Test</core:Laboratory_Contact_for_This_Model>
             </core:Laboratory>
             <!--1 to 8 repetitions:-->
             <core:To_What_Major_Markets_is_This_Model_Sold>United States</core:To_What_Major_Markets_is_This_Model_Sold>
             <core:Notes>notes on the product</core:Notes>
          </core:core_product_data>
          <roof:ENERGY_STAR_Specification_Version>2.2</roof:ENERGY_STAR_Specification_Version>
          <roof:Product_Type>Single-Ply</roof:Product_Type>
          <roof:Measured_Initial_Solar_Reflectance>0.25</roof:Measured_Initial_Solar_Reflectance>
          <roof:Reported_Initial_Solar_Reflectance>0.26</roof:Reported_Initial_Solar_Reflectance>
          <roof:Initial_Solar_Reflectance_Test_Method>ASTM E903-96</roof:Initial_Solar_Reflectance_Test_Method>
          <roof:Measured_Solar_Reflectance_After_Three_Years>0.15</roof:Measured_Solar_Reflectance_After_Three_Years>
          <roof:Reported_Reflectance_After_Three_Years>0.16</roof:Reported_Reflectance_After_Three_Years>
          <roof:Solar_Reflectance_After_Three_Years_Test_Method>ASTM C1549-09</roof:Solar_Reflectance_After_Three_Years_Test_Method>
          <roof:Measured_Initial_Emissivity>0.01</roof:Measured_Initial_Emissivity>
          <roof:Reported_Initial_Emissivity>0.02</roof:Reported_Initial_Emissivity>
          <roof:Initial_Emissivity_Test_Method_Used>ASTM E408-71(1996) e1</roof:Initial_Emissivity_Test_Method_Used>
          <roof:Low_Slope>Yes</roof:Low_Slope>
          <roof:Steep_Slope>Yes</roof:Steep_Slope>
          <roof:Roof_Cleaned_Prior_to_Third_Year_Test>No</roof:Roof_Cleaned_Prior_to_Third_Year_Test>
          <roof:Warranty_Period>abcdefg</roof:Warranty_Period>
       </roof:Roof_Products>
    </roof:Roof_Products_submission>
 </soapenv:Body>
  </soapenv:Envelope>
 EOT;

  $soap_do = curl_init();  
  curl_setopt($soap_do, CURLOPT_URL,            $url );    
  curl_setopt($soap_do, CURLOPT_CONNECTTIMEOUT, 10);  
  curl_setopt($soap_do, CURLOPT_TIMEOUT,        10);  
  curl_setopt($soap_do, CURLOPT_RETURNTRANSFER, true ); 
  curl_setopt($soap_do, CURLOPT_SSL_VERIFYPEER, false);   
  curl_setopt($soap_do, CURLOPT_SSL_VERIFYHOST, false); 
  curl_setopt($soap_do, CURLOPT_POST,           true );  
  curl_setopt($soap_do, CURLOPT_POSTFIELDS,    $post_string);  
  curl_setopt($soap_do, CURLOPT_HTTPHEADER,     array('Content-Type: text/xml; charset=utf-8', 'Content-Length: '.strlen($post_string) ));  
  curl_setopt($soap_do, CURLOPT_USERPWD, $user . ":" . $password); 
  $result = curl_exec($soap_do); 
  $err = curl_error($soap_do);   
  ?> 
```

任何和所有的帮助将**不胜感激**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:02:04.063

I'm not sure, if this is correct, but it should be something along these lines:

```
$namespace = 'https://esws.energystar.gov';
$auth = new ChannelAdvisorAuth($user, $password); 
$header = new SoapHeader($namespace, 'APICredentials', $auth, false); 

$soap = new SoapClient($url);
$soap->__setSoapHeaders($header);
$soap->DataServices_Server($post_string); 
```

I hope this will point you in the right direction :)

# c# - 转换集合子集合中的日期时间并在 LINQ to SQL 中使用

> ID：11976763
> 
> 赞同：0
> 
> 时间：2012-08-15T20:28:30.320
> 
> 标签：c#, linq, linq-to-sql

我有一个包含子集合的集合，其中一个是作为字符串存储在数据库中的日期字段，格式为 yyyymmdd（其中还包含一些随机的东西，例如“E”或 20085 等）。该日期也是该集合中的子集合之一的一部分。此日期字段现在将用于搜索，因此我需要将其设置为真实日期才能在 LINQ 语句中使用它。

我从那以后了解到 LINQ to SQL 不支持它无法转换为 SQL 的语句，因此我无法插入返回正确转换日期的函数，并且我还没有找到将字符串转换为的标准转换函数一个有效的日期对象。

我也尝试了分层转换，虽然这闻起来很糟糕，例如：

```
search = from c in search 
         where c.Object.Any(p=> new DateTime(Convert.ToInt32(p.theDate, Substring(0,4))))... etc. 
```

无论我在这里做什么，我都收到了转换错误。

我的基本问题是：LINQ to SQL 是否支持这种转换的内联内容？另一种选择是更改数据模型或制作视图，但我宁愿先看看是否有办法在代码中处理这个问题。我想要做的是如下所示：

```
search = from c in search
         where c.subcollection.Any(p=>p.theDate >= min) && c.subcollection.Any(p=>p.theDate <= max)
         select c; 
```

其中 min 和 max 在日期值中传递。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:17:46.717

如果您希望使用 LINQ 比较日期，但 SQL 日期列是字符串值，请使用`.CompareTo("2002-01-01") >= 0`

这将翻译并返回与 2002-01-01 匹配或发生在更晚时间的任何日期。不确定这如何与您的子集合一起使用，但作为示例：

```
search = from c in search 
     where c.stringDateColumn.CompareTo("2002-01-01") >= 0 
     select c; 
```

编辑：我在表格上做了一些测试，日期为“2002-09-04E”、“2004-04-01 34”、“20050604e”和“2005-06-01444”等字符串，结果确实基于格式为 yyyy-mm-dd 或 yyyymmdd 的字符串：

```
search = from c in search
     where c.subcollection.Any(p=>p.theDate.CompareTo(min) >= 0) && c.subcollection.Any(p=>p.theDate.CompareTo(max) <= 0)
     select c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:27:41.623

该类`SqlMethods`具有一些可由 LINQ 转换为 SQL 的静态辅助方法。其中大部分与 DateTime 比较有关。我不确定您正在寻找哪种方法，但您应该能够在**[System.Data.Linq.SqlClient.SqlMethods 的文档页面上找到您想要的方法](http://msdn.microsoft.com/en-us/library/system.data.linq.sqlclient.sqlmethods.aspx)**

**或者**，您可以创建一个用户定义的函数并在 SQL 端处理转换和比较问题。集成只需要使用[FunctionAttribute](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.functionattribute.aspx)装饰相应的对象模型方法，（它指示 LINQ-to-SQL 应如何处理该方法。以下是有关此过程的一些文档：

*   [如何：内联调用用户定义的函数](http://msdn.microsoft.com/en-us/library/bb399416.aspx)
*   [用户定义的函数](http://msdn.microsoft.com/en-us/library/bb546175.aspx)

# erlang - Erlang解释器：Vi模式

> ID：11976765
> 
> 赞同：8
> 
> 时间：2012-08-15T20:28:40.460
> 
> 标签：erlang

我目前正在尝试使用 Erlang。另外，在 (zsh) shell 中，我已经习惯了使用 vi 模式进行行编辑（`set -o vi`）。

那么：有没有办法让 Erlang 解释器使用更像 vi 的键绑定？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T21:46:27.633

是的！只需将其称为

```
rlwrap erl -oldshell 
```

*注意：*您可能需要安装 rlwrap（readline 包装器）并调整您的 .inputrc ( `set editing-mode vi`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T21:28:09.923

不！

好吧，您可以编写自己的行编辑模块并使用它。

# perl - 在 mksmksmks.pl 第 63 行的连接 (.) 或字符串中使用未初始化的值

> ID：11976769
> 
> 赞同：7
> 
> 时间：2012-08-15T20:29:14.623
> 
> 标签：perl, initialization

我已经写了一些代码，但我不确定错误是什么。我收到错误消息：

> 在 mksmksmks.pl 第 63 行的连接 (.) 或字符串中使用未初始化的值

我的代码如下：

```
for(my $j = 0; $j < $num2; $j++) {
  print {$out} "$destination[$j]|$IP_one_1[$j]|$IP_one_2[$j]|$reached[$j]|$IP_two_1[$j]|$IP_two_2[$j]\n";`
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T21:46:52.980

这意味着 , , 或 的元素之一`@destination`尚未`@IP_one_1`定义`@IP_one_2`（`@reached`尚未分配值），或已分配值`undef`。您要么需要在源头检测（并防止）未定义的值，要么期望稍后再处理它们。由于您已经`warnings`启用（这是一件好事），Perl 会提醒您，您的代码正在尝试连接一个字符串，其中一个被连接的值是未定义的。

考虑以下示例：

```
perl -wE 'my @x = (); $x[0] = "Hello "; $x[2] = "world!";  say "@x"' 
```

在此示例中，`$x[0]`有一个值，并且`$x[2]`有一个值，但`$x[1]`没有。当我们插入`@x`一个双引号结构时，它被扩展为`[element 0 (Hello )]<space>[element 1 (undef)]<space>[element 2 (world!)]`. 元素插入为空`undef`字符串，并发出警告。当然，默认情况下，数组插值会在每个元素之间注入一个空格字符。所以在上面的例子中我们看到`Hello <interpolation-space>(undef upgrades to empty string here)<interpolation-space>world!`

您可以调查的一个示例是一个或多个数组的总大小与其他数组不同。例如， if`@IP_one_2`的元素比其他元素少，或者 if`$num2`的值大于任何数组中的元素数。

将以下内容放在脚本顶部附近并再次运行它：

```
use diagnostics; 
```

当我在警告和诊断下运行以下单行代码时：

```
$ perl -wMdiagnostics -e '$a=$a; print "$a\n"' 
```

我得到以下输出，如果你添加`use diagnostics;`......当你第一次学习 Perl 的警告时，你会得到类似的东西。一个非常有用的工具。

> 在 -e 第 1 行 (#1) 的连接 (.) 或字符串中使用未初始化的值 $a
> 
> （W 未初始化）使用未定义的值，就好像它已经定义了一样。它被解释为“”或 0，但可能是一个错误。要抑制此警告，请为您的变量分配一个定义的值。
> 
> 为了帮助您找出未定义的内容，perl 将尝试告诉您未定义的变量的名称（如果有的话）。在某些情况下它无法做到这一点，因此它还会告诉您在哪个操作中使用了未定义的值。但是请注意，perl 优化了您的程序，并且警告中显示的操作不一定会在您的程序中出现。例如，“that $foo”通常被优化为“that”。$foo，并且警告将引用连接 (.) 运算符，即使没有 . 在你的程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-18T03:58:17.130

也许我的例子对某人有用。假设变量 $x 是从数据库初始化的。它可能包含未定义的值，这是正常的。我们需要在控制台上显示它的值。作为负责任的程序员，我们决定使用“use warnings FATAL => "all";"。在这种情况下，脚本将失败。

```
perl -e 'use strict; use warnings FATAL => "all"; my $x; print("x=$x\n"); print("DONE\n");' 
```

回报：

```
Use of uninitialized value $x in concatenation (.) or string at -e line 1. 
```

在这种情况下，您可以使用

```
if(defined($x)){...}else{...} 
```

但是，如果只是想打印一个值，这并不漂亮。

```
perl -e 'use strict; use warnings FATAL => "all"; my $x; print("x=".($x//"null")."\n"); print("DONE\n");' 
```

印刷：

```
x=null
DONE 
```

因为表达式 $x//"null" 检查是否定义了 // 之前的内容，如果未定义则返回 // 之后的内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-27T14:56:42.560

如果你使用`eq ""`它不会给出任何警告信息。

但是如果你使用`eq " "`（这里你可以看到一个空格），那么它会给出这个警告信息：

> 在连接 (.) 或字符串中使用未初始化的值 ....

# objective-c - 可可：使用 dispatch_async 错误

> ID：11976771
> 
> 赞同：0
> 
> 时间：2012-08-15T20:29:31.187
> 
> 标签：objective-c, cocoa, grand-central-dispatch

我在我的项目中使用 Oomph mapkit。我的代码是：

```
dispatch_queue_t pQueue = dispatch_queue_create("pQueue", NULL);
dispatch_async(pQueue, ^(void){
    CLLocationCoordinate2D coordinate= [self.mapView convertPoint:point toCoordinateFromView:self];
}); 
```

这只是将一个点转换为纬度和经度。如果我使用`dispatch_sync`，它可以正常运行。但是二用`dispatch_async`，程序会崩溃。

错误：

```
1   0x7fff91c6e067 WTF::Vector<JSC::Identifier, 64ul>::shrinkCapacity(unsigned long)
2   0x7fff91c6df5e JSC::ParserArena::reset()
3   0x7fff91d881ea JSC::ScopeNode::destroyData()
4   0x7fff91d87b3d JSC::FunctionExecutable::produceCodeBlockFor(JSC::ScopeChainNode*,     JSC::CompilationKind, JSC::CodeSpecializationKind, JSC::JSObject*&)
5   0x7fff91d8751c JSC::FunctionExecutable::compileForCallInternal(JSC::ExecState*, JSC::ScopeChainNode*, JSC::JITCode::JITType)
6   0x7fff91c75a84 JSC::Interpreter::executeCall(JSC::ExecState*, JSC::JSObject*, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&)
7   0x7fff91c75924 JSC::call(JSC::ExecState*, JSC::JSValue, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&)
8   0x7fff8e7eac76 WebCore::JSMainThreadExecState::call(JSC::ExecState*, JSC::JSValue, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&)
9   0x7fff8e0c71f2 -[WebScriptObject callWebScriptMethod:withArguments:]
10  0x100090bda -[MKMapView convertPoint:toCoordinateFromView:]
11  0x100033fa7 __51-[MKMapView(MKGeometryExtensions) clusterAnimated:]_block_invoke_0
12  0x7fff8da81f3d _dispatch_call_block_and_release
13  0x7fff8da7e0fa _dispatch_client_callout
14  0x7fff8da7f4c3 _dispatch_queue_drain
15  0x7fff8da7f335 _dispatch_queue_invoke
16  0x7fff8da7f207 _dispatch_worker_thread2
17  0x7fff893b1ceb _pthread_wqthread
18  0x7fff8939c1b1 start_wqthread 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:52:02.077

你不能从后台线程访问 UIViews 而不会有崩溃的风险。由于`self.mapView`是 UIView，因此从运行在异步调度队列中的块访问它是不安全的。

要在主线程上执行此操作的批量版本，您需要将其分解为许多较小的操作。创建一个 NSBlockOperation 可能是最简单的，它需要一个包含 100 个点的列表来转换，并为整个列表创建尽可能多的这些操作。然后，您可以在 [NSOperationQueue mainQueue] 上排队，以便在主线程上执行。

# mongodb - 使用投影从查找查询中排序字段

> ID：11976772
> 
> 赞同：12
> 
> 时间：2012-08-15T20:29:38.717
> 
> 标签：mongodb

我有一个 Mongo 查找查询，可以很好地从大型文档中提取特定字段，例如...

```
db.profiles.find(
  { "profile.ModelID" : 'LZ241M4' },
  {
    _id : 0,
    "profile.ModelID" : 1,
    "profile.AVersion" : 2,
    "profile.SVersion" : 3
  }
); 
```

...这会产生以下输出。请注意 SVersion 如何在文档中出现在 AVersion 之前，即使我的投影在 SVersion 之前要求 AVersion。

```
{ "profile" : { "ModelID" : "LZ241M4", "SVersion" : "3.5", "AVersion" : "4.0.3" } }
{ "profile" : { "ModelID" : "LZ241M4", "SVersion" : "4.0", "AVersion" : "4.0.3" } } 
```

...问题是我希望输出是...

```
{ "profile" : { "ModelID" : "LZ241M4", "AVersion" : "4.0.3", "SVersion" : "3.5" } }
{ "profile" : { "ModelID" : "LZ241M4", "AVersion" : "4.0.3", "SVersion" : "4.0" } } 
```

我需要做什么才能让 Mongo JavaScript shell 以我指定的字段顺序显示我的查询结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-11-16T20:30:10.077

我通过使用别名投影字段来实现它，而不是通过 0 和 1 包含和排除。试试这个：

```
{
_id : 0,      
"profile.ModelID" :"$profile.ModelID", 
"profile.AVersion":"$profile.AVersion",
"profile.SVersion":"$profile.SVersion"
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T00:54:23.963

我现在明白了。您希望返回按“字段”排序的结果，而不是字段的值。

简单的答案是你不能这样做。也许使用新的聚合框架是可能的。但这似乎只是为了订购字段。

查找查询中的第二个对象是用于包含或排除返回的字段，而不是用于对它们进行排序。

```
 {
    _id : 0,               // 0 means exclude this field from results
    "profile.ModelID" : 1, // 1 means include this field in the results
    "profile.AVersion" :2, // 2 means nothing
    "profile.SVersion" :3, // 3 means nothing
  } 
```

最后一点，您不需要这样做，谁在乎字段返回的顺序。您的应用程序应该能够使用它需要的字段，而不管字段的顺序如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-16T14:18:55.553

我应用的另一个解决方案如下：

```
db.profiles
  .find({ "profile.ModelID" : 'LZ241M4' })
  .toArray()
  .map(doc => ({
    profile: {
      ModelID: doc.profile.ModelID,
      AVersion: doc.profile.AVersion,
      SVersion: doc.profile.SVersion
    }
  })) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-22T08:07:55.187

[自 2.6 版（2014 年发布）以来，MongoDB 保留了写入操作（ source](https://docs.mongodb.com/manual/core/document/#document-field-order)）之后的文档字段的顺序。

PS 如果你使用 Python，你可能会觉得[这](https://stackoverflow.com/questions/23001156/how-to-get-ordered-dictionaries-in-pymongo)很有趣。

# ios - 将另一种类型保存到实体的属性到核心数据？

> ID：11976773
> 
> 赞同：0
> 
> 时间：2012-08-15T20:29:44.947
> 
> 标签：ios, cocoa-touch, core-data

```
cell.textLabel.text = operationEnt.operationNaam; 
```

在这行代码我得到错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString operationNaam]: unrecognized selector sent to instance 0x6bce400' 
```

但是 operationNaam 是一个定义为字符串的属性。所以我想知道，我的错误在哪里。这是我尝试填充 TableView 的单元格的时候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:45:08.127

看来您要么有内存管理问题，要么误解了 Objective-C 的属性访问器语法。o`operationEnt`不断变成一个 NSString，它不响应特定的属性 getter 消息，因此崩溃。（注意过度发布！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:25:42.467

该异常意味着消息`operationNaam`被发送到 NSString 对象，而 NSString 无法识别该消息选择器。

这意味着您的`operationEnt`对象在运行时以某种方式变成了 NSString。

可能，你这样做了...

```
operationEnt = someString; 
```

当你的意思是...

```
operationEnt.operationNaam = someString; 
```

# post - 如何使用 Google App Scripts 将表单提交发布到 Google Drive 电子表格

> ID：11976777
> 
> 赞同：1
> 
> 时间：2012-08-15T20:29:54.357
> 
> 标签：post, google-apps-script, spreadsheet, google-drive-api

我想在我的网站上创建一个表单，当用户提交时，它会将他们的数据发布到我 Google Drive 中的特定电子表格中。如何使用 Google App Scripts 做到这一点？

样本表格

```
<form method='post' action='https://script.google.com/macros/s/xxxx.....'>
  Favorite Color <input type='text' value='' name='color' />
  Favorite Ice Cream Flavor <input type='text' value='' name='flavor' />
  <input type='button' value='submit' />
</form> 
```

这样当我点击提交时，它会在 Google Drive 电子表格中创建一条记录

```
| color | flavor |
   red    vanilla 
```

这对 GAS 是可行的，还是更适合 Google Drive SDK（通过 Javascript）的任务？

* * *

**更新**

使用[如何将表单元素添加到 UI 应用服务](https://developers.google.com/apps-script/uiapp#Forms)中的示例来完成脚本

**这是我拼凑的当前脚本......它有效！**

```
var SPREADSHEET_ID = '0Aqa6DbU_0sv7dGNrMEEybjNrdm00MlpwTTNx...';

function doPost(e) {
  var app = UiApp.getActiveApplication();

  SpreadsheetApp.openById(SPREADSHEET_ID).getSheetByName('RequestInvites').appendRow([e.parameter.emailAddress, 'hash123']);

  app.add(app.createLabel("Form submitted. Your email address is: '" + e.parameter.emailAddress));

  return app;
}

function createForm(e){
   var app  = UiApp.createApplication();
   var form = app.createFormPanel();
   var flow = app.createFlowPanel();

   flow.add(app.createLabel('Enter your email address to get an invitation').setId('inviteLabel'));
   flow.add(app.createTextBox().setId('emailAddress').setName('emailAddress'));
   flow.add(app.createSubmitButton("Request Invite"));
   form.add(flow);

   app.add(form);
   return app;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:14:50.047

你可以用 GAS 做到这一点。在您的脚本中，用于`function doPost(e)`在单击提交按钮（您可能已经忘记；）时检索用户输入。

在 doPost 函数中，您可以使用它们的“名称”属性访问输入，例如 :`e.parameter.color`和`e.parameter.flavor`.

然后，您可以使用电子表格服务在电子表格中写入。此服务的文档在[此处](https://developers.google.com/apps-script/service_spreadsheet)。因此，您打开电子表格，并在正确的工作表中添加一行：`SpreadsheetApp.openById('id of your spreadsheet').getSheetByName('colors_and_flavors').appendRow([e.parameter.color, e.parameter.flavor]);`。

让我们回顾一下：

```
function doPost(e) {
  SpreadsheetApp.openById('id of your spreadsheet').getSheetByName('colors_and_flavors').appendRow([e.parameter.color, e.parameter.flavor]);
} 
```

希望能帮助到你 ！;)

# java - JEdi torPane.scrollToReference() 与动态生成的 HTML

> ID：11976781
> 
> 赞同：4
> 
> 时间：2012-08-15T20:29:58.847
> 
> 标签：java, html, swing, anchor, jeditorpane

我不知道如何[`JEditorPane.scrollToReference()`](https://docs.oracle.com/javase/7/docs/api/javax/swing/JEditorPane.html#scrollToReference(java.lang.String))与动态生成的 HTML 页面一起使用。我想打开一个带有滚动到我选择的锚点的 JEditorPane 的对话框。无论我如何处理问题，视图总是在页面底部滚动。

作为一个丑陋的解决方法，我目前解析整个 HTML 文档的锚标记，将它们的偏移量保存在 a`Map<String, Integer>`中，然后我调用：

```
editorPane.setCaretPosition(anchorMap.get("anchor-name")); 
```

...这甚至不会产生有吸引力的结果，因为可见矩形内的插入符号位置似乎是不可预测的，并且很少位于窗口的顶部。我正在寻找一种更像浏览器的行为，其中锚定文本出现在可见区域的顶部。

下面是我尴尬的解决方法的屏幕截图（“标题 6”上有一个锚点），没有触摸滚动条：

[![截屏](../Images/0e0cae59dbde9dce4f3f76e0a2825f73.png)](https://i.stack.imgur.com/GzF12.png)

我想我错过了一些东西，但我无法弄清楚到底是什么。

我当前解决方法的来源：

```
import javax.swing.*;
import javax.swing.text.MutableAttributeSet;
import javax.swing.text.html.*;
import javax.swing.text.html.HTMLEditorKit.*;
import javax.swing.text.html.parser.*;
import java.io.*;
import java.awt.*;
import java.util.HashMap;

public class AnchorTest
{
    public static void main(String[] args)
    {
        final String html = generateLongPage();
        final HashMap<String, Integer> anchors = anchorPositions(html);

        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                JEditorPane editor  = new JEditorPane("text/html", html);
                JScrollPane scroller= new JScrollPane(editor);

                scroller.setPreferredSize(new Dimension(400, 250));

                //editor.scrollToReference("anchor6");  // doesn't work...
                editor.setCaretPosition(anchors.get("anchor6")); //sorta works

                JOptionPane.showMessageDialog(new JPanel(), scroller, "",
                        JOptionPane.PLAIN_MESSAGE);
            }});
    }

    public static HashMap<String, Integer> anchorPositions(String html)
    {
        final HashMap<String, Integer> map = new HashMap<String, Integer>();

        Reader reader = new StringReader(html);
        HTMLEditorKit.Parser parser = new ParserDelegator();

        try
        {
            ParserCallback cb = new ParserCallback()
            {
                public void handleStartTag(HTML.Tag t,
                                           MutableAttributeSet a,
                                           int pos)
                {
                    if (t == HTML.Tag.A) {
                        String name = 
                            (String)a.getAttribute(HTML.Attribute.NAME);
                        map.put(name, pos);
                    }
                }
            };

            parser.parse(reader, cb, true);
        }
        catch (IOException ignore) {}

        return map;
    }

    public static String generateLongPage()
    {
        StringBuilder sb = new StringBuilder(
                "<html><head><title>hello</title></head><body>\n");

        for (int i = 0; i < 10; i++) {
            sb.append(String.format(
                    "<h1><a name='anchor%d'>header %d</a></h1>\n<p>", i, i));

            for (int j = 0; j < 100; j++) {
                sb.append("blah ");
            }
            sb.append("</p>\n\n");
        }

        return sb.append("</body></html>").toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T21:16:31.883

问题可能是由于执行时窗格尚不可见或尚未布局`scrollToReference`，因此无法确定其大小。

的实现`scrollToReference`具有以下块：

```
Rectangle r = modelToView(iter.getStartOffset());
if (r != null) {
   ...
   scrollRectToVisible(r);
} 
```

在发布的示例中，矩形是`null`for `anchor6`，因为视图尚不可见或其大小不是正数。

试试这个肮脏的修复来延迟滚动：

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        editor.scrollToReference("anchor6");
    }
});
JOptionPane.showMessageDialog(new JPanel(), scroller, "",
        JOptionPane.PLAIN_MESSAGE); 
```

# javascript - 获取每行的第三个单元格

> ID：11976784
> 
> 赞同：2
> 
> 时间：2012-08-15T20:30:06.237
> 
> 标签：javascript, jquery, html-table, tablerow

```
var Rows = $("#tableid tbody tr");
Rows.each(function(index, element) {
var thirdCell = $(this+":nth-child(3)").text();
    alert(thirdCell);
}); 
```

线路中的某些`var thirdCell`内容无法正常工作。每行有四个孩子，都是 td 标签。我想在第三个单元格中获取文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T20:33:01.887

试试下面的东西，

```
var Rows = $("#tableid tbody tr");
Rows.each(function(index, element) {
var thirdCell = $(this).find('td').eq(2).text();
    alert(thirdCell);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:37:26.473

`this`不是字符串，而是 jquery 对象，因此在构建新选择器时不能附加它。你可以这样做：

```
var selector = $(this).selector;
var thirdCell = $(selector+":nth-child(3)").text();
alert(thirdCell); 
```

[http://jsfiddle.net/2URV7/](http://jsfiddle.net/2URV7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:34:03.203

您可以通过基于 0 的索引从每一行获取所有单元格

```
Rows.each(function(index, element) {
    var thirdCell = $(this.cells[2]).text();
    alert(thirdCell);
}); 
```

或者您可以在原始选择器中获取它

```
var Third = $("#tableid tbody tr > td:nth-child(3)");

Third.each(function(index, element) {
    var thirdCell = $(this).text();
    alert(thirdCell);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T20:31:18.457

这不起作用，因为 tr 没有文本。它有 TD。您可以通过 html() 应用来获取 tr 的 innerHTML，或者在 tds 上使用 text() 如果它们实际上包含文本。

# php - 检查 2 个数据库表以进行用户登录

> ID：11976785
> 
> 赞同：0
> 
> 时间：2012-08-15T20:30:10.343
> 
> 标签：php, mysql

目前我正在使用以下代码：

```
$sql = sprintf("SELECT * FROM users WHERE email = '%s' and password = '%s'", $email, $password); 
```

我想完成以下任务：

```
$sql = sprintf("SELECT * FROM database1.users AND database2.users WHERE email = '%s' and password = '%s'", $email, $password); 
```

我需要检查用户是否存在于任一表中。

有关如何处理此问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:31:36.760

您可以使用 a`UNION`来组合这两个查询：

```
SELECT * FROM database1.users WHERE email = '%s' and password = '%s'
UNION
SELECT * FROM database2.users WHERE email = '%s' and password = '%s' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:47:46.440

您的查询可以如下：

```
SELECT table1.*, table2.* FROM table1 JOIN table2
ON table1.userID=table2.userID WHERE email=? AND password=? LIMIT 1 
```

将变量附加到 SQL 查询是非常危险的，虽然您善意地使用 sprintf，但它并不能实现您的意图。使用[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)来正确防范 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T21:01:29.710

```
SELECT IF(A.UserFound*B.UserFound=0,'No','Yes') Authenticated
FROM
(
    SELECT COUNT(1) UserFound FROM database1.users
    WHERE email = '%s' and password = '%s'
) A,
(
    SELECT COUNT(1) UserFound FROM database2.users
    WHERE email = '%s' and password = '%s'
) B; 
```

# python - Timsort 的清晰描述

> ID：11976787
> 
> 赞同：5
> 
> 时间：2012-08-15T20:30:17.210
> 
> 标签：python, algorithm, sorting, timsort

我一直在谷歌上搜索并阅读维基百科上的 Timsort 和其他资源。然而，我对 Timsort 在做什么并没有明确的想法。任何人都可以描述该算法，或者向我提供一些包含清晰描述的文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-17T23:59:39.387

Timsort 算法是一种合并排序算法，专门设计用于对已经部分排序的数据列表进行排序。它是一种稳定的排序，这意味着它保留了彼此相等的元素的相对顺序。

该算法首先将数据列表分成两半。然后，它使用合并排序算法将两半合并在一起，以创建一个新的排序列表。重复此过程，直到对数据列表进行排序。

Timsort 算法在以下文档中有更详细的描述：

[https://en.wikipedia.org/wiki/Timsort](https://en.wikipedia.org/wiki/Timsort)

# sqlite - SQLite 读/写争用

> ID：11976790
> 
> 赞同：0
> 
> 时间：2012-08-15T20:30:39.023
> 
> 标签：sqlite, system.data.sqlite

在我的应用程序中，有一个线程在事务中不断地接收数据并将数据写入 SQLite 数据库，然后在完成后提交事务。

同时，当应用程序运行长时间运行的查询时，写入线程似乎被阻塞并且没有数据被写入。每个方法都使用相同的连接对象。

有没有办法做一个等效的 SQL (nolock) 查询，或者其他方式让我的读取不会锁定我的任何表？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:18:29.670

你有一个概念错误。SQLite 以这种方式工作：

> 传统的文件/打开操作执行 sqlite3_open() 并执行 BEGIN TRANSACTION 以获得对内容的独占访问。File/Save 执行 COMMIT，然后执行另一个 BEGIN TRANSACTION。事务的使用保证了对应用程序文件的更新是原子的、持久的、隔离的和一致的。

所以你不能以这种方式工作，因为那样真的不需要工作。我认为您必须重新考虑使用 SQLite 的算法。这就是您的连接被阻止的原因。

更多信息：

[使用时。](http://www.sqlite.org/whentouse.html)

[常问问题](http://www.sqlite.org/faq.html)

[在 SQLite 上使用线程：避免它们！](http://www.sqlite.org/faq.html#q6)

# eclipse - 如何在eclipse中的tomcat上部署Maven项目严重：启动java.util.concurrent.ExecutionException期间子容器失败

> ID：11976791
> 
> 赞同：0
> 
> 时间：2012-08-15T20:30:38.930
> 
> 标签：eclipse, tomcat, maven, deployment, tomcat7

我在获取一个从 svn 存储库中提取的 Maven 项目以部署在 Eclipse 中的 Tomcat 服务器上时遇到问题。我对整个过程很陌生，并且整天都在努力让它工作。我不确定此时问题出在哪里，任何方向都将不胜感激！这是服务器的控制台输出。

```
Aug 15, 2012 4:24:28 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jdk1.7.0_03\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Java\jdk1.7.0_03\jre\bin;C:/Program Files/Java/jdk1.7.0_03/bin/../jre/bin/server;C:/Program Files/Java/jdk1.7.0_03/bin/../jre/bin;C:/Program Files/Java/jdk1.7.0_03/bin/../jre/lib/amd64;C:\Program Files\Java\jdk1.7.0_03\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\QuickTime\QTSystem\;C:\Dev\eclipse;;.
Aug 15, 2012 4:24:28 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:cepis' did not find a matching property.
Aug 15, 2012 4:24:28 PM org.apache.tomcat.util.digester.Digester endElement
WARNING:   No rules found matching 'Server/Service/Engine/Host/Context/Logger'.
Aug 15, 2012 4:24:29 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Aug 15, 2012 4:24:29 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Aug 15, 2012 4:24:29 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 871 ms
Aug 15, 2012 4:24:29 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Aug 15, 2012 4:24:29 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Aug 15, 2012 4:24:29 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cepis]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/cepis]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
    at java.lang.Class.getDeclaredFields(Class.java:1760)
    at org.apache.catalina.startup.WebAnnotationSet.getDeclaredFields(WebAnnotationSet.java:452)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:257)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:136)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:66)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:381)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:858)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:345)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5161)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContext
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    ... 21 more

Aug 15, 2012 4:24:29 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more

Aug 15, 2012 4:24:29 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more

Aug 15, 2012 4:24:29 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 636 ms 
```

* * *

```
<dependency>
            <artifactId>spring-ws-core-tiger</artifactId>
            <groupId>org.springframework.ws</groupId>
            <version>1.5.10</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-core</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-beans</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-context</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-web</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-webmvc</artifactId>
                </exclusion>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jms</artifactId>
            <version>3.1.1.RELEASE</version>
            <exclusions>
                <exclusion>
                    <artifactId>spring-aop</artifactId>
                    <groupId>org.springframework</groupId>
                </exclusion>
            </exclusions>
        </dependency> 
```

注意：这个项目正在另一台同事的计算机上运行，​​我已经下载了最新版本，我认为这可能是我对 tomcat 或 eclipse 的一些错误配置。

编辑：

解决了：

这对其他人可能有用也可能没有用，但请记住，我是 Maven 新手，结果发现我在部署程序集中缺少 Maven 依赖项。

这是通过右键单击 Eclipse 中的项目添加的。

-> 属性 -> 部署程序集 -> 添加 -> 然后选择 Maven 依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:47:42.203

在您担心 Eclipse 集成之前，我建议您尝试使用 maven 从源代码构建战争。跑

```
mvn clean install 
```

这应该会给你目标文件夹中的战争。手动部署它并查看它是否正常工作。只有在这种情况下，我才会担心从 Eclipse 中使用它。

在 Eclipse 中，使用安装了 M2Eclipse 集成的新版本并将项目作为 Maven 项目导入。这应该会触发您安装 WTP，然后它应该可以正常工作。

如果没有..让我们知道更多。如果它是开源的，甚至可以分享战争项目的源代码，这样我们就可以看到 pom 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:19:25.317

这对其他人可能有用也可能没有用，但请记住，我是 Maven 新手，结果发现我在部署程序集中缺少 Maven 依赖项。

这是通过右键单击 Eclipse 中的项目添加的。

-> 属性 -> 部署程序集 -> 添加 -> 然后选择 Maven 依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:41:43.137

> java.lang.ClassNotFoundException：org.springframework.context.ApplicationContext

您的问题是 spring JAR 文件不在应用程序的类路径中。也许发布 pom.xml 文件，以便我们可以如何捆绑 jar 文件？

# sql-server-2008 - 如何对左侧的两列求和并在第三列中显示总计

> ID：11976792
> 
> 赞同：1
> 
> 时间：2012-08-15T20:30:40.100
> 
> 标签：sql-server-2008

我有一张类似于下面的表格

```
Date     | institution | qty1 | qty2
1 Aug 12 | xyz         |  0   | 5
1 Aug 12 | xyz         |  0   | 17
1 Aug 12 | abc         | 12   | 0
2 Aug 12 | abc         | 33   | 0
2 Aug 12 | xyz         | 0    | 57 
```

我想要类似于下面的输出

```
Date     | ABC     | XYZ  | Total
1 Aug 12 | 12      |  22  | 34
2 Aug 12 | 33      |  57  | 90
Total    | 45      | 79   | 124 
```

现在我编写了一个只显示前三列的查询。我不知道如何添加最后一列

```
select date, sum (case when institution = 'abc', qty1 else 0 end) as ABC,
sum(case when institution =  'xyz', qty2 else 0 end) as XYZ
group by date
with rollup 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:34:43.827

你非常接近 - 我认为应该这样做：

```
select
  date
, sum (case when institution = 'abc' then qty1 else 0 end) as ABC
, sum(case when institution =  'xyz' then qty2 else 0 end) as XYZ
, sum(qty1+qty2) as Total
from mytable
group by date
with rollup 
```

这是[sqlfiddle 上此示例的链接](http://sqlfiddle.com/#!3/f9004/1)。

# mysql - django bulk_Create 外键错误

> ID：11976794
> 
> 赞同：1
> 
> 时间：2012-08-15T20:30:48.717
> 
> 标签：mysql, django, foreign-keys, django-orm

我有以下型号：

```
class UserMap(models.Model):
    class Meta:
        db_table = 'user_map'

    user = models.ForeignKey(User)
    map = models.ForeignKey(Map) 
```

当我尝试使用 插入对象时`UserMap.objects.bulk_create`，我不断收到以下信息：

`(1452, 'Cannot add or update a child row: a foreign key constraint fails ('db'.'user_map', CONSTRAINT 'user_id_refs_id_9490e10f418065' FOREIGN KEY ('user_id') REFERENCES 'user ' ('id'))')`

我觉得这很奇怪，因为我可以手动将确切的值插入到数据库中，但是当我这样做`bulk_create`或`save()`. 这个奇怪的错误有什么原因吗？`bulk_create`有没有人注意到和 ForeignKeys的任何问题？

# android - 如何在移动浏览器上拨打带有“#”符号的电话号码

> ID：11976796
> 
> 赞同：1
> 
> 时间：2012-08-15T20:31:06.210
> 
> 标签：android, html, mobile, hyperlink

我们正在尝试获取一个包含“#”符号的电话号码，以便在通过移动浏览器中的链接访问时自动拨号。似乎适用于黑莓操作系统，但不适用于 Android。我们知道，出于安全原因，iOS 不能使用 # 符号，但 Android 呢？为什么没有骰子呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:46:52.817

您是否尝试过使用`%23`URL 编码来替换“#”？

# java - Java反射方法调用错误

> ID：11976799
> 
> 赞同：1
> 
> 时间：2012-08-15T20:31:10.160
> 
> 标签：java, api, reflection, overriding

我正在制作一种测试程序，以便能够覆盖我在java中制作的api的类中的方法，但是在尝试从另一个类调用方法时出现奇怪的错误......

这是主要的“组件类”：

```
 package st.cmp;

 import java.lang.reflect.InvocationTargetException;
 import java.lang.reflect.Method;
 import java.util.ArrayList;
 import java.util.HashMap;
 import java.util.List;

 public class Component {

public class Overrider{
    Class<?> source;
    Class<?>[] overs;
    String name;
    public Overrider(Class<?> s,String n,Class<?>[] o){
        source=s;
        overs=o;
        name=n;
    }
    public Object call(Object[] param){
        try {
            return source.getMethod(name, overs).invoke(this, param);
        } catch (NoSuchMethodException | SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }
};

public HashMap<String,Component> cmps;
public HashMap<String,Overrider> over;

public Component(){
    cmps=new HashMap<String,Component>();
    over=new HashMap<String, Overrider>();
}

public void registerComponent(String nm,Component cm){
    cmps.put(nm,cm);
}
public Component getComponent(String nm){
    return cmps.get(nm);
}

public void override(Class<?> cl,String name,Class<?>[] param){

        over.put(name,new Overrider(cl,name,param));

}

public Object call(String mnm,Object[] a){
    Overrider ov=over.get(mnm);
    if(ov!=null){
        ov.call(a);
    }

    Class<?>[] abc=new Class<?>[a.length];

    for(int i=0;i<a.length;i++){
        abc[i]=a[i].getClass();
    }

        try {
            return this.getClass().getDeclaredMethod(mnm, abc).invoke(this,a);
        } catch (IllegalAccessException | IllegalArgumentException
                | InvocationTargetException | NoSuchMethodException
                | SecurityException e) {
            // TODO Auto-generated catch block
            try {
                this.getClass().getDeclaredMethod(mnm, abc).invoke(this,a);
            } catch (IllegalAccessException | IllegalArgumentException
                    | InvocationTargetException | NoSuchMethodException
                    | SecurityException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
        }

    return null;
}

public void test(String a){
    System.out.print(a);
}

public int add(Integer a,Integer b){
    return a+b;
}
 } 
```

这是主要课程：

```
package st;

 import st.cmp.Component;

 public class Start {
public static void main(String[] args)
{
    new Start().start();
}
public void start(){
    Component a=new Component();
    a.call("test",new Object[]{a.call("add",new Object[]{1,5}).toString()});

    a.override(this.getClass(), "add", new Class<?>[]{Integer.class,Integer.class});

    a.call("test",new Object[]{a.call("add",new Object[]{1,5}).toString()});
}
public int add(Integer a,Integer b){
    return a*b;
}

 } 
```

启动程序时出现此错误：

```
6java.lang.IllegalArgumentException: object is not an instance of declaring class
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at st.cmp.Component$Overrider.call(Component.java:22)
    at st.cmp.Component.call(Component.java:64)
    at st.Start.start(Start.java:16)
    at st.Start.main(Start.java:8)
6 
```

谁能帮我？

它说“对象不是声明类的实例”......但是它指的是什么“对象”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:41:59.940

在您的`Start`课程中，您正在调用该`Component.override()`方法：

```
//         v--- This is the Class Object
a.override(this.getClass(), "add", new Class<?>[]{Integer.class,Integer.class}); 
```

`a`类型在哪里`Component`。您正在传递它`this.getClass()`，它是一个 Class 对象`Start`。然后在`override()`：

```
//                          v--- Class object gets passed along here
over.put(name,new Overrider(cl,name,param)); 
```

您正在创建一个 new `Overrider`，并将 Class 对象提供`Start`给构造函数，该构造函数将`Class<?> source;`字段设置为`Start`Class 对象。然后，当您调用该`Overrider.call()`方法时，它会执行以下操作：

```
//     v--- and finally invoked here
return source.getMethod(name, overs).invoke(this, param); 
```

并传递`invoke()`a`this`这是 的实例`Component`，`source`而是 Class 的对象`Start`。在这一行中，“source”和“this”需要是同一个类，但又`Start`不是`Component`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:37:05.713

您的代码非常复杂，但这是我的帮助。如果你有这样的一行：

```
klass.getMethod(name).invoke(obj) 
```

然后错误说这`obj`不是`klass`.

# android - 手电筒应用程序（如何将屏幕亮度设置为最大？）

> ID：11976800
> 
> 赞同：2
> 
> 时间：2012-08-15T20:31:16.680
> 
> 标签：android

我正在开发一个手电筒安卓应用程序，它有一个屏幕灯选项（最大亮度）。如何通过按下按钮将活动亮度设置为最大？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:38:46.820

这个网站有一些关于这个话题的信息：http://www.tutorialforandroid.com/2009/01/sharing-screen-brightness.html

您需要的部分：

```
IHardwareService hardware = IHardwareService.Stub.asInterface(ServiceManager.getService("hardware"));
if (hardware != null)
        hardware.setScreenBacklight(brightness); 
```

我没有测试它，但它应该可以工作

更新：替代解决方案：

```
WindowManager.LayoutParams params = getWindow().getAttributes();
params.screenBrightness = 1.0f;
getWindow().setAttributes(params); 
```

# php - 无法使用 :: 范围运算符从实例访问类常量

> ID：11976806
> 
> 赞同：10
> 
> 时间：2012-08-15T20:31:31.797
> 
> 标签：php

我今天遇到了一个奇怪的问题，即使作为一名 PHP 工程师，我也对此感到困惑：

似乎您可以从对象实例访问类常量，例如：

```
class a {
    const abc = 1;
}
$a = new a();
var_dump($a->abc); 
```

这将输出 null 而不是预期的 1。我能够执行以下操作：

```
class a {
    const abc = 1;
}
$a = new a();
var_dump(a::abc); 
```

但是在一个并不真正知道父对象到底是谁的子对象的上下文中，我发现这样做非常烦人：

```
class a {
    const abc = 1;
}
$a = new a();
$c = get_class($a);
var_dump($c::abc); 
```

是我还是这完全愚蠢，如果不是，请告诉我为什么它会这样工作。

**编辑**

另一种方法，但它并不是真的更好：

```
class a {
    const abc = 1;
}
class b {
    public function getA(){
        return new a();
    }
}
$b = new b();
$c = $b->getA();
var_dump($c::abc); 
```

最后一个例子更像我正在做和经历的......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-15T20:37:19.140

只需将实例变量与范围解析运算符一起使用：

```
$a = new a();
var_dump($a::abc); 
```

这[打印](http://viper-7.com/ekGT1i) `1`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-15T20:54:39.913

我找到了一种相对不错且干净的方法来使我的问题更容易解决。这是我应用的解决方案。它不一定是最好的，但就我的用途而言，它完全符合我的需要。

通过创建一个神奇的 __get 方法，我从实例的角度截取了对常量名称的请求，我使用快速反射来查看该常量是否存在并返回它的值。

这使我可以在一行中实际使用如下所示的模式：

```
class a {
    const abc = 1;
    public function __get($key){
        $r = new ReflectionObject($this);
        if($r->hasConstant($key)){ return $r->getConstant($key); }
    }
}
class b {
    public function getA(){
        return new a();
    }
}
$b = new b();
var_dump($b->getA()->abc);
var_dump($b->getA()->def); 
```

虽然我很想做：

```
var_dump($b->getA()::abc);
var_dump($b->getA()::def); 
```

我想这可能会在 5.4+ 以后实现，考虑到我们最终有数组取消引用，我们可能会要求他们尽快添加静态取消引用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T20:39:01.080

[PHP 文档](http://php.net/manual/en/language.oop5.constants.php)指出类常量是通过 SRO( `::`) 而不是`->`.

```
<?php
class MyClass
{
    const constant = 'constant value';

    function showConstant() {
        echo  self::constant . "\n";
    }
}

echo MyClass::constant . "\n"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T22:07:40.223

就像我提到的，在 php 中，常量与类定义相关联，它们根据定义是静态的，不能使用 -> 运算符访问。

如果你真的想在你的编码范式中使用它，你可以试试 php5 中的反射类。

```
class MyClass
{
   const A = "I am A";
}

$o = new ReflectionClass( "MyClass" );
echo $o->getconstant("A"); //will print "I am A" 
```

另外，我认为您的**EDIT**中的示例可能不起作用..我没有运行它，但我不确定是否可以在任何非类引用上调用 SRO(::) ..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-05T18:17:23.070

我知道这是一个旧线程，但是对于想知道最好的方法的人来说，看看 PHP 函数[constant()](http://php.net/manual/en/function.constant.php)。

使用 constant() 你可以简单地做到这一点：

```
$a = new a();
$value = constant(get_class($a)."::abc");
// $value === 1 
```

这从 PHP 4 开始可用，并且在 PHP 5.5 中仍然可以完美运行

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-10-10T20:58:38.470

当尝试使用`const`在不同命名空间内的类中定义时，可以使用**范围解析运算符**（`::`）而不会出现问题，正如[文档](http://php.net/manual/en/language.oop5.constants.php#example-182)所述，在使用这种格式声明 const 的类之​​前为命名空间添加前缀：

*   `(<namespace>"\")*<className>::<const>`

使用下一个命名空间、类和 const 定义：

**模型/OperationModel.php**

```
<?php
namespace models;

class OperationModel {
  const OPERATION_INITIALIZING = 1;
} 
```

您可以像这样使用另一个命名空间\类中的 const：

**控制器/MobileController.php**

```
<?php
namespace controllers;

use models\OpertionModel;

class MobileController {
  private function thingy() {
    $operation_status = models\OperationModel::OPERATION_INITIALIZING;
  }
} 
```

# asp.net - ASP.NET 和参数

> ID：11976809
> 
> 赞同：0
> 
> 时间：2012-08-15T20:31:48.727
> 
> 标签：asp.net, url-parameters

我有一个 ASP.NET 页面（处理程序），在使用 & 调用时可以工作。但是，使用我的页面的第三方页面将 & 转换为“&”（与号，amp;）并且页面抛出“参数无效”。错误。

我已经读过参数应该用 & 编码，但它似乎导致我的页面出错。

.NET 将其转换为 ampsterstand,amp, %3

* * *

这是有关该问题的更多信息

[http://weblogs.asp.net/bleroy/archive/2009/06/05/why-is-asp-net-encoding-amp-s-in-script-urls-a-tale-of-looking-at-完全错误的地方导致不存在的bug.aspx](http://weblogs.asp.net/bleroy/archive/2009/06/05/why-is-asp-net-encoding-amp-s-in-script-urls-a-tale-of-looking-at-entirely-the-wrong-place-for-a-cause-to-a-non-existing-bug.aspx)

我的问题是我正在尝试使用 Facebook，它将 & 转换为“and amp”形式，我相信它导致我的代码无法工作。

这实际上是答案。Facebook 正在显示带有编码 & 的链接，.NET 将不接受该链接。但是，它使用的是未编码的形式。问题是它无法从 HTTPS 协议中提取。

基本上，需要 AMPSTERSTAND 非编码作为参数分隔符。

# windows-7 - 调用不带参数的批处理文件时出错

> ID：11976812
> 
> 赞同：0
> 
> 时间：2012-08-15T20:32:02.563
> 
> 标签：windows-7, batch-file

我有一个非常简单的批处理脚本：

```
@echo off

if %1 == a goto AA
if %1 == b goto BB
goto end

:AA
echo a
goto end

:BB
echo b
goto end

:END
echo on 
```

如果我用参数调用它`test.bat a`，我会得到我所期望的，但如果我不带任何参数调用它`test.bat`，我会得到`goto was unexpected at this time.`并且有问题的行是`if %1 == a goto AA`.

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:41:58.537

当没有参数时， 这条线`if %1 == a goto AA`将变为。`if == a goto AA`

如果您使用`if .%1 == .a goto AA`，则该行将变为`if . == .a goto AA`没有参数，并且 windows 不会抛出在`if`和之间没有任何内容的错误`==`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:45:58.470

在每次比较中将变量和值都括在引号中。

```
if "%1" == "a" goto AA
if "%1" == "b" goto BB
goto end 
```

# asp.net - 回发时的响应重定向

> ID：11976820
> 
> 赞同：2
> 
> 时间：2012-08-15T20:32:48.347
> 
> 标签：asp.net

我的代码如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
   if(IsPostback)
   {
      if(/* User is not authenticated to perform any actions on this page */)
      {
        Response.Redirect(/* Error Page */);
      }
   }
}

protected void btnSubmit_Click(object sender, EventArgs e)
{
   /* do some stuff */
} 
```

我猜想如果我提交按钮进行回发并且我没有经过身份验证，那么在 Page_Load 中重定向会发生并会发回 HTTP 302。但是，它似乎运行 Response.Redirect 代码行，继续在 Page_Load 中处理它，然后甚至在`btnSubmit_Click`之后运行。响应不是错误页面。

我可以`return`在 Response.Redirect 之后调用以防止在该函数中进行进一步处理，但该`btnSubmit_Click`函数仍将运行。

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T20:35:43.637

要防止处理更多代码，请使用以下命令：

```
Response.Redirect(url, true); 
```

第二个参数将结束进一步的处理。

# mule - Mule 选择路由取决于消息的有效负载

> ID：11976828
> 
> 赞同：0
> 
> 时间：2012-08-15T20:33:09.740
> 
> 标签：mule

我是 MULE 的新手。我正在尝试创建一个 mule 流，以根据 XML 有效负载的内容路由到不同的端点。例如，如果有效负载的根元素是 Aa，我想将消息路由到队列 A。否则，它应该转到队列 B。谁能给我一些关于如何完成此任务的指示？

所以，到目前为止，我试过这个：

```
<choice doc:name="Choice">
        <when expression="message.getpayload contains 'Aa'" evaluator="string">
            <processor-chain>
                <jms:outbound-endpoint queue="A" connector-ref="Active_MQ" doc:name="JMS"/>
            </processor-chain>
        </when>
        <otherwise>
            <processor-chain>
                <jms:outbound-endpoint queue="B" connector-ref="Active_MQ" doc:name="JMS"/>
            </processor-chain>
        </otherwise>
    </choice> 
```

但是一切都将进入队列 A，因此我的选择表达式不起作用。任何帮助，将不胜感激。

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:19:09.423

在处理 XML 数据时，最好使用 XPath 来评估这种情况。

```
<choice doc:name="Choice">
    <when expression="/Aa" evaluator="xpath">
        <processor-chain>
            <jms:outbound-endpoint queue="A" connector-ref="Active_MQ" doc:name="JMS"/>
        </processor-chain>
    </when>
    <otherwise>
        <processor-chain>
            <jms:outbound-endpoint queue="B" connector-ref="Active_MQ" doc:name="JMS"/>
        </processor-chain>
    </otherwise>
</choice> 
```

高温高压

# air - 动态编译 AIR 应用程序

> ID：11976829
> 
> 赞同：0
> 
> 时间：2012-08-15T20:33:11.733
> 
> 标签：air, adobe

我一直在寻找一种在旅途中动态编译 AIR 应用程序的方法。

具体来说，我需要程序的标题和编译时更改的几个变量。我将创建数百个，如果不是数千个，本质上是相同程序的版本，所以我想避免手工完成:)

AIR可以做到这一点吗？如果没有，我可以用Java之类的东西来做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:42:26.787

是的，这可以使用 Flex sdk 中的 mxml 编译器来实现。它需要一些构建工具的知识，例如[ant](http://ant.apache.org/)或[maven](http://maven.apache.org/)。

1.  使用 apache ant 或 maven 自动化构建过程。
2.  使用 Actionscript 编译器指令为代码中的变量数据定义占位符。
3.  修改构建脚本以编译构建，并将变量数据作为编译器参数传入

我已经使用 ant 构建脚本完成了这项工作，以在应用程序的版本字符串中包含时间戳和其他信息。这是带有时间戳的示例...

**1\. 在项目的编译器参数选项中定义变量**

语法是：

`-define=NAMESPACE::VARIABLE_NAME,'variableValue'`

例如：

`-define=APPDATA::TIMESTAMP,"xxx"`

这就是开发人员会在他们的 IDE 中放入的内容。当他们编译他们的应用程序时，版本字符串中将包含“xxx”。当自动构建脚本编译应用程序时，它会使用类似的参数传入一个实际的时间戳。

**2\. 在代码中引用变量。**

我将它用作`String`，但你可以这样做`Boolean`，我假设其他原始类型。

```
public var appVersion:String = "MyApp " + APPDATA::TIMESTAMP; 
```

您可以使用布尔值有条件地将代码编译到 SWF 中：

`-define=CONFIG::DEBUG,true`

现在用这个编译器指令包装代码块，如果为真，它将被编译到 swf 中：

```
public function something():int
{
    var a:int = 1;

    CONFIG::DEBUG
    {
        a=2;
    }
    return a;
} 
```

虽然这很方便，但我建议仅将编译器指令用于您在编译时真正需要做的事情，而不是用于一般配置:)

资源：

*   [使用条件编译](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_21.html)
*   [mxmlc 编译器选项](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7a92.html)
*   [弹性蚂蚁任务](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf678b2-7ffc.html)
*   [flex mojos maven插件](http://flexmojos.sonatype.org/)

# asp.net-mvc-3 - ShouldMapTo - 数据不在 url 中？

> ID：11976834
> 
> 赞同：0
> 
> 时间：2012-08-15T20:33:21.330
> 
> 标签：asp.net-mvc-3, mvccontrib-3

我正在尝试对我的路线进行单元测试，但我开始遇到问题。一些动作方法参数将不再来自 URL，而是由动作过滤器提供，基于这篇文章：[http ://haacked.com/archive/2010/02/21/manipulating-action -方法参数.aspx](http://haacked.com/archive/2010/02/21/manipulating-action-method-parameters.aspx)

问题是我有一个 url:`/some/path/id`它映射到一个动作方法`public ViewResult Action(int id, Guid sessionId)`，在该方法中`sessionId`，动作过滤器将其添加到动作参数中。现在我可以看到让这个测试通过而不用做`Guid`的方法`Guid?`：

```
"~/some/path/1".ShouldMapTo<SomeController>(x => x.Action(1, <anyGuid>)); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:46:18.563

> 如果不让 Guid 成为 Guid，我现在就无法通过这个测试吗？

嗯，其实是有办法的。

如果您使用的是 Rhino Mocks（默认与 捆绑在一起`MvcContrib.TestHelper`，因此您已经隐式使用它）：

```
"~/home/action/1"
    .ShouldMapTo<SomeController>(x => x.Action(1, Arg<Guid>.Matches(y => true))); 
```

如果您使用的是最小起订量：

```
"~/some/action/1"
    .ShouldMapTo<SomeController>(x => x.Action(1, It.IsAny<Guid>())); 
```

如果您正在使用其他一些模拟框架，请检查有关允许您指定可以是任何参数约束的语法的文档。

# java - webflow2 没有找到我的 java 代码（控制器）

> ID：11976842
> 
> 赞同：0
> 
> 时间：2012-08-15T20:33:46.867
> 
> 标签：java, spring, spring-webflow

我正在尝试进行 webflow 项目，但我不断收到以下错误，它找不到我的控制器？

这是我的流程代码：

```
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow
                          http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <var name="member" class="org.uftwf.enrollment.domain.Member" />

    <decision-state id="checkIsInPending">
        <if test="FlowActions.isInPending()" then="endStateMemeberPending" else="name" />
    </decision-state>

    <view-state id="name" view="enrollment1.jsp">
        <transition on="submit" to="SSNonFile" />
        <transition on="cancel" to="endState" bind="false" />
    </view-state>

    <action-state id="SSNOnFile">
     <evaluate expression="FlowActions.isSSNOnFile(member)" />
         <transition on="SUCCESS" to="endStateNoSSN" />
        <transition on="FAIL" to="isMemeber" />
    </action-state>

    <action-state id="isMemeber">
     <evaluate expression="FlowActions.isMemeber(member)" />
         <transition on="SUCCESS" to="endStateMemeberExists" />
        <transition on="FAIL" to="isDeceased" />
    </action-state>

    <action-state id="isDeceased">
     <evaluate expression="FlowActions.isDeceased(member)" />
         <transition on="SUCCESS" to="endStateMemeberExists" />
        <transition on="FAIL" to="address" />
    </action-state>

    <view-state id="address" view="enrollment2.jsp">
        <transition on="submit" to="endStateSuccess" />
        <transition on="cancel" to="name" bind="false" />
    </view-state>

    <view-state id="preview" model="customer">
        <transition on="cancel" to="name" />
        <transition on="accept" to="endStateSuccess">
            <evaluate expression="FlowActions.addCustomer(member)" />
        </transition>
    </view-state>

    <!-- End state -->
    <end-state id="endStateMemberDeceased" view="unsuccessful.jsp" />
    <end-state id="endStateNoSSN" view="noSSN.jsp" />
    <end-state id="endStateMemeberExists" view="exists.jsp" />
    <end-state id="endStateMemeberPending" view="pending.jsp" />
    <end-state id="endStateSuccess" view="success.jsp" />

</flow> 
```

这是我的控制器代码：

```
package org.uftwf.enrollment.controller.swf;
import static org.apache.log4j.Logger.getLogger;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.uftwf.enrollment.domain.Member;
import org.uftwf.enrollment.service.TestService;

@Component
public class FlowActions {

    @Autowired
    private TestService testService;

    private static final Logger LOGGER = getLogger(FlowActions.class);

    public void addCustomer(Member customer) {
    //  testService.saveCustomer(customer);
    }

    public boolean isInPending()
    {
        LOGGER.debug("in side isInPending()");
        return false;
    }

    public void isSSNOnFile(Member customer)
    {

    }

    public void isMemeber(Member customer)
    {

    }

    public void isDeceased(Member customer)
    {

    }

} 
```

疯狂的错误。我的项目找不到带有 webflow 的控制器 ..

```
SEVERE: Servlet.service() for servlet [spring] in context with path [/enrollment] threw exception [Request processing failed; nested exception is org.springframework.webflow.execution.FlowExecutionException: Exception thrown in state 'checkIsInPending' of flow 'enroll'] with root cause
org.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 0): Field or property 'FlowActions' cannot be found on object of type 'org.springframework.webflow.engine.impl.RequestControlContextImpl' 
```

这是我的 root-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <import resource="mvc.xml" />
    <import resource="flow.xml" />
    <import resource="domain.xml" />

    <context:component-scan base-package="org.uftwf.enrollment.controller" />

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T23:17:45.367

您应该引用 bean `flowActions`，而不是类`FlowActions`。尝试更改初始“f”的大小写。

例如

`<if test="flowActions.isInPending()" then="endStateMemeberPending" else="name" />`

# pdf - 打印时缺少字符

> ID：11976843
> 
> 赞同：1
> 
> 时间：2012-08-15T20:33:57.837
> 
> 标签：pdf, printing

我们有一个 WPF 应用程序，它可以执行报告预览或报告打印。两个请求都使用相同的代码。

*   调用从 Microsoft Report Services 获取报告的报告服务。
*   将报告转换为所需的格式（在本例中为 PDF）。
*   然后将报告作为字节数组返回。

然后将结果作为二进制流写入临时文件，然后弹出到窗口进行预览或启动进程进行打印。

在这两种情况下，都会传递临时文件。

打印预览完美无缺！但是打印报告将打印所有出现的“ti”消失。我看到有一个 ESC t NUL/SOH 的打印机转义序列，我假设如果由于某种原因转义字符进入该流，则 ti 将导致打印序列被忽略。因此缺少字符。

我的第一个问题是，是否有人曾经使用生成的 PDF 报告经历过这种情况？

我的第二个问题（显然）是是否有人知道我可以用来查看正在打印的文件中的二进制数据的实用程序，以查看每个“ti”序列之前文件中的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:10:02.897

经过大量搜索后，我在 Adob​​e 论坛上发现了一篇帖子，其中指出版本 8 存在无法打印字符组合的错误。一旦我深入挖掘，它似乎已经恢复，建议的解决方法解决了我们的问题。

解决方法：打印为图像。

Adobe 似乎无法完成他们软件必须做的最基本的事情，即打印确切的内容！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T21:24:15.273

回答你的*第二个*问题：

*   首先，执行以下两件事之一：
    1.  将 Windows 打印后台处理程序属性设置为不删除打印作业。
    2.  暂停目标打印队列。
*   然后，从 Windows printspool 目录中获取假脱机文件（您可以通过查看（右键单击）“打印机和传真”文件夹的*“属性...”对话框找到该位置）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:45:32.743

我意识到这是一篇旧帖子，但我想从上述评论中添加一些更新信息，说明这是 Acrobat 8​​ 的问题。我们使用的是 Acrobat 10.1.6，但仍然存在同样的问题。根据我的阅读，这是 adobe 产品本身的问题。我见过的唯一真正的解决方法（实际上是解决方法）是打印为图像。瘸

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-15T11:37:52.823

令人惊讶的是，这个错误在 2021 年仍然存在。不能依赖 Adob​​e 正确打印文档。如果它不能做它需要的最基本的东西，这会带走它所拥有的所有功能的魅力。

作为图像打印会降低质量并使文档模糊。

只需使用 Safari 或 Chrome 打开文档并从那里打印。乙

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-23T06:34:32.780

直接从 firefox（内部的 acrobat 阅读器）打印时，我遇到了类似的问题。我下载了文件然后打印了。问题解决了。

# twitter-bootstrap - 在哪里可以找到 twitter bootstrap less 文件？

> ID：11976846
> 
> 赞同：25
> 
> 时间：2012-08-15T20:33:59.893
> 
> 标签：twitter-bootstrap, less, padding

我试图找到一种相对简单的方法来使用 Twitter Bootstrap 向我的容器添加填充。一切正常，但在某些分辨率下，窗口不适合屏幕。我想我必须通过从各种跨度类中删除一些宽度来补偿填充？

这是一项相当艰巨的工作，仅数学本身就有问题。出于这个原因，也许最好使用 Bootstrap 显然附带的 less 文件。

唯一的问题是我似乎无法在任何地方找到它们。这些文件真的存在吗？不幸的是，我只知道如何通过像 Codekit 这样的应用程序来使用 Less，而不是使用命令行。

或者，如果其他人知道向容器添加填充的任何方法，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-15T20:42:30.097

大多数开发人员可能会克隆[Twitter Bootstrap GitHub 存储库](https://github.com/twbs/bootstrap/)。但是，如果您不习惯使用**git**，则可以[定期下载存储库](https://github.com/twbs/bootstrap/zipball/master)。

您可能还想查看[Twitter Bootstrap Customize Page](http://getbootstrap.com/customize/)，它允许编辑许多 LESS 规则，然后在他们的服务器上编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T18:22:04.047

LESS 文件位于 github 存储库中 - [https://github.com/twbs/bootstrap/tree/master/less](https://github.com/twbs/bootstrap/tree/master/less)

# api - Foursquare 授权而不会丢失网站上的上下文

> ID：11976848
> 
> 赞同：2
> 
> 时间：2012-08-15T20:34:08.427
> 
> 标签：api, oauth, foursquare

我正在为用户添加将其foursquare 帐户与他们在我的网站上的帐户相关联的功能。Foursquare 的 oauth 帐户授权将用户带到foursquare 的网站，并在授权我的网站后将用户重定向回一个url。

当他们决定将foursquare功能添加到他们的帐户时，我想避免在我的网站上破坏用户的上下文，所以我计划在新窗口中使用foursquare的帐户授权

`var foursquare_popup = window.open("foursquare_url_to_authenticate_user");`

并在授权完成后将弹出窗口重定向到静态成功页面。

[我已经在Wired 的](http://i.imgur.com/E9PAx.png)推文按钮等几个地方看到了 oauth 弹出窗口。

这是用 twitter/facebook/foursquare 之类的东西处理 oauth 的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:42:42.043

我建议不要在 oauth 登录过程中打开弹出窗口，纯粹是因为某些浏览器不支持弹出窗口——尤其是手机上的浏览器。此外，浏览器可能支持弹出窗口，但用户可能打开了弹出窗口阻止程序。

更好的方法是将用户从您的网站重定向到服务提供商，所有这些都在同一个窗口中。

我目前正在研究一种在我的网站页面上使用不可见 iframe 的方法。这样，如果用户已经登录到服务提供商，那么他们就不需要被引导离开我的网站。但是，我已完成此功能的一半，因此我无法确认它是否可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:53:20.333

如果要使用弹出窗口，可以指定 display=webpopup（请参阅[https://developer.foursquare.com/overview/auth#display](https://developer.foursquare.com/overview/auth#display)）。

此外，您可以在回调 URL 中指定其他参数，这些参数将由 oauth 流程保留。因此，如果您将“&state=settings/accounts”或其他内容作为redirect_uri 的参数传递，您可以在成功时解析它并适当地恢复与用户的会话。

# javascript - 由于 Jquery 的 $ 未声明，无法使用 ant 和闭包编译器编译 javascript

> ID：11976849
> 
> 赞同：4
> 
> 时间：2012-08-15T20:34:09.753
> 
> 标签：javascript, jquery, ant, google-closure-compiler

我正在尝试让 Google Closure Compiler 编译我的使用 Jquery 的 javascript 代码，但我不断得到变量 $ 未声明有没有办法让它看到 $ 变量。有没有办法让闭包编译器看到 Jquery 库但不编译它。这是我的蚂蚁脚本

```
<?xml version="1.0"?>
<project basedir="." default="compile">

<taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask"
       classpath="build/compiler.jar"/>

<target name="compile">

<jscomp compilationLevel="simple" warning="verbose" 
        debug="false" output="output/file.js">

  <sources dir="${basedir}/src">
    <file name="js.js"/><!-- the file I'm trying to compile -->
  </sources>

</jscomp>

</target>

</project> 
```

我的 Jquery 库名为 min.js，它位于 src 文件夹中，带有 js.js

我敢肯定这是一个简单的问题，但我只是错过了一些东西。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T21:51:38.030

您需要包括 jQuery 外部。每个主要版本的 jQuery 都有自己的外部文件。您可以在[http://code.google.com/p/closure-compiler/source/browse/#svn%2Ftrunk%2Fcontrib%2Fexterns找到它们](http://code.google.com/p/closure-compiler/source/browse/#svn%2Ftrunk%2Fcontrib%2Fexterns)

下载适当的 extern 后，以下是您在编译时如何引用它：

```
<?xml version="1.0"?>
<project basedir="." default="compile">

<taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask"
       classpath="build/compiler.jar"/>

<target name="compile">

<jscomp compilationLevel="simple" warning="verbose" 
    debug="false" output="output/file.js">

  <sources dir="${basedir}/src">
    <file name="js.js"/><!-- the file I'm trying to compile -->
  </sources>

  <externs dir="${basedir}/src">
    <file name="jquery-1.7.js"/>
  </externs>
</jscomp>

</target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:44:37.327

似乎您的默认外部人员未包含在您的情况中。

此链接将使您更好地理解： [https ://developers.google.com/closure/compiler/docs/api-tutorial3#externs](https://developers.google.com/closure/compiler/docs/api-tutorial3#externs)

# c - 如何给 C 库函数起别名？

> ID：11976850
> 
> 赞同：8
> 
> 时间：2012-08-15T20:34:11.360
> 
> 标签：c

我有一个静态 C 库，我可以使用不同的编译时间选项（例如 _BUILD_SMALL、_BUILD_FAST）构建它。它有一个功能

```
void Foo(void); 
```

我想使用基准测试工具的单个实例来对库的“小型”和“快速”版本进行基准测试。我不想使用 .dll。

如何链接到“小型”和“快速”库并为函数名称设置别名，以便我可以调用小型版本和快速版本。理想情况下，它看起来像：

```
void benchmark(void)
{
  FAST_Foo();

  SMALL_Foo();
} 
```

更多信息：

该库可以使用不同的优化选项 -Os 与 -O3 构建。此外，算法略有不同（即缓存值与总是查找值）。我想比较不同版本的大小与速度权衡。我希望以最简单的方式在库的两个版本上运行单元测试和基准测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T04:12:46.870

这只是@Michał Górny 给出的方法的一种变体（我的评论空间用完了）......

您可以创建以下形式的包含文件：

```
/* Automatically created file - do not edit or ugly dinosaur will eat you */
#ifndef PREFIX
#  define RENAME(f)
#else
#  define RENAME(f) PREFIX ## f
#endif

/* list all the function and variables you want to rename here in one place */
#define func_foo RENAME(func_foo)
#define func_bar RENAME(func_bar)
/* ... many more ... */

#undef RENAME 
```

至少`gcc`允许您使用选项从命令行指定包含头文件`-include rename.h`（假设此文件称为`rename.h`）。因为您使用`gcc`相似选项（`-O3`和`Os`），所以我假设您`gcc`在此答案的其余部分中使用。否则，如果你的 C 编译器是合理的，你应该能够以类似的方式来做。

`CFLAGS`通过为 C 编译器提供不同的选项（此处通过设置），您可以轻松创建可以同时链接的两个甚至三个版本的库：

```
CFLAGS += -include rename.h -DPREFIX=fast_ -D_BUILD_FAST -O3 -DBENCHMARKING
CFLAGS += -include rename.h -DPREFIX=small_ -D_BUILD_SMALL -Os -DBENCHMARKING
CFLAGS += -D_BUILD_FAST -O2 
```

如果您的库头文件看起来非常规则，并且如果您声明了库私有函数`static`，那么很容易通过一些虚拟脚本使用非常简单的正则表达式从这些头文件中提取函数以自动`rename.h`为您生成文件。如果您正在使用`make`或类似的东西，这是一个自然的构建目标。所有全局变量也需要使用相同的方法重命名以允许同时使用。

这个解决方案有三个要点：

1.  丑陋的重命名业务可以隐藏在一个文件中，*您不需要编辑实际的源文件*——尤其是您不需要弄乱源文件，但可以保持它们的干净和易于阅读。
2.  如果您遵循一些简单的原则（头文件遵循的编码约定，并且头文件将声明所有全局变量和函数），重命名可以很容易地*自动化。*
3.  没有理由需要多次运行您的测试程序来使基准测试变得更加麻烦（如果您像我一样懒惰并且像我一样不喜欢重复性任务，这是相关的 - 我知道很多人不在乎，这是有点偏好）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T20:47:27.360

作为一种快速的解决方案，您可以使用宏来破坏函数名称，例如：

```
#ifdef FAST
#   define FUNC(x) FAST_##x
#else
#   define FUNC(x) SLOW_##x
#endif

void FUNC(Foo)(); 
```

现在将建立`-DFAST`图书馆；`FAST_Foo`没有它，一个有`SLOW_Foo`. 请注意，您还需要`FUNC()`在实现部分使用宏（以及每当您从库内部引用该函数时），并`#ifdef FAST`在快/慢代码之间切换。

*请*不要在生产代码中使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T21:41:53.447

如果您尝试将两个静态库链接到同一个可执行文件，则链接行中列出的第二个库将不起作用，因为它提供的所有符号都已被第一个库满足。如果您提供了简单的唯一包装函数 call `Foo`，它仍然会失败，因为现在有多个定义。这是一个例子：

```
/* x.c */
extern void Y_Bar ();
extern void Z_Bar ();
int main ()
{
    Y_Bar();
    Z_Bar();
} 
```

这个 main 调用了独特的包装函数，这些函数在`liby.a`和中提供`libz.a`。

```
/* y.c in liby.a */
#include <stdio.h>
void Y_Bar () {
    extern void Foo ();
    Foo();
}
void Foo () {
    printf("%s\n", "that Foo");
}

/* z.c in libz.a */
#include <stdio.h>
void Z_Bar () {
    extern void Foo ();
    Foo();
}
void Foo () {
    puts("this foo");
} 
```

尝试链接可执行文件`-ly -lz`将失败。

对您来说最简单的解决方法是构建两个单独的可执行文件。然后，您的基准驱动程序可以执行这两个可执行文件来比较它们的相对性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T20:41:10.793

一种方法是：为两者保持相同的名称并根据编译时选项集适当地调用。

```
ifdef SMALL_FOO
void foo() {

/* Small foo code */
}
#endif

ifdef BIG_FOO
void foo() {

/* Big foo code */
}
#endif 
```

在编译`SMALL_FOO/BIG_FOO`期间使用`-d`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T05:57:12.200

也许你可以使用或者你可以在使用make时接收一个输入参数，比如在你的`-D option when call gcc, like -D_FAST_, -D_SMALL_,`使用make ，你可以定义，当get参数。`CFG=FAST, make CFG=SMALL,``makefile``FAST, link to FAST library`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T20:41:29.917

您说您可以构建库，更改编译时间选项，那么为什么不编辑代码以更改每个函数的名称。（您将制作两个不同版本的库。）

# ruby-on-rails - Ruby churn 在安装时需要 churn (>= 0)

> ID：11976852
> 
> 赞同：1
> 
> 时间：2012-08-15T20:34:31.673
> 
> 标签：ruby-on-rails, ruby, metrical, churn

我正在尝试安装度量标准，但失败了

```
gem install metrical
ERROR:  Error installing metrical:
    churn requires churn (>= 0) 
```

尝试以下操作也会出错。

```
gem install churn 
ERROR:  Error installing churn:
    churn requires churn (>= 0) 
```

当 churn 需要自己时，有谁知道如何安装 churn？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:49:46.100

由于它的依赖关系，gem 将无法通过命令行正确安装。 [https://github.com/iain/metrical/#usage](https://github.com/iain/metrical/#usage)

如果您正在使用 rails 应用程序，只需将其添加到 Gemfile

```
gem 'metrical', :require => false 
```

然后`bundle install`

这将安装它所有正确的依赖项

或者从外部导轨安装它。

`Gemfile`在任何虚拟目录中创建一个并添加以下行

```
source 'https://rubygems.org'
gem 'metrical' 
```

然后运行`bundle install`

为我工作..干杯

# xpath - HTML Agility Pack xpath 表达式帮助

> ID：11976856
> 
> 赞同：1
> 
> 时间：2012-08-15T20:34:45.703
> 
> 标签：xpath, html-agility-pack

我有如下的html：

```
<table width="98%" border="0" align="center" cellpadding="0" cellspacing="2">
<tr>
    <td height="20" colspan="2">
        &nbsp;
    </td>
</tr>
<tr>
    <td height="20" colspan="2" class="fontDestaque2NegritoHome">
        MATR&Iacute;CULA: PPAAG
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        &nbsp;
    </td>
    <td align="right" valign="middle" class="tx_bd">
        &nbsp;
    </td>
</tr>
<tr>
    <td width="35%" align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Fabricante:</span>
        </div>
    </td>
    <td width="59%" align="right" valign="middle" class="tx_bd">
        <div align="left">
            CESSNA AIRCRAFT</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Modelo:</span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            T206H</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">N&uacute;mero de S&eacute;rie:</span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            T20608735</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left" class="tx_bold">
            Tipo ICAO :
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            C206</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Tipo de Habilita&ccedil;&atilde;o para Pilotos:</span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            MNTE</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Classe da Aeronave:</span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            POUSO CONVECIONAL 1 MOTOR CONVENCIONAL</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Peso M&aacute;ximo de Decolagem:</span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            1633 - Kg</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">N&uacute;mero M&aacute;ximo de Passageiros:</span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            005</div>
    </td>
</tr>
<tr>
    <td colspan="2" align="right" valign="middle" class="tx_bd">
        <div align="left">
        </div>
    </td>
</tr>
<tr>
    <td colspan="2" align="right" valign="middle" background="../images/bgPontilhado.gif"
        class="tx_bd">
        <div align="left">
            <img src="../images/bgPontilhado.gif" width="4" height="1"></div>
    </td>
</tr>
<tr>
    <td colspan="2" align="right" valign="middle" class="tx_bd">
        <div align="left">
        </div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Categoria de Registro:</span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            PRIVADA SERVICO AEREO PRIVADOS</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">N&uacute;mero dos Certificados (CM - CA)</span>:
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            19040</div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Situa&ccedil;&atilde;o no RAB:</span><span class="stop_litle">
            </span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="fontRed">ARRENDAMENTO OPERACIONAL/ALIENACAO FIDUCIARIA</span></div>
    </td>
</tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Data da Compra/Transfer&ecirc;ncia:</span>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
        </div>
    </td>
</tr>
<tr>
    <td colspan="2" align="right" valign="middle" class="tx_bd">
        <div align="left">
        </div>
    </td>
</tr>
<tr>
    <td colspan="2" align="right" valign="middle" background="../images/bgPontilhado.gif"
        class="tx_bd">
        <div align="left">
            <img src="../images/bgPontilhado.gif" width="4" height="1"></div>
    </td>
</tr>
<tr>
    <td colspan="2" align="right" valign="middle" class="tx_bd">
        <div align="left">
        </div>
    </td>
    <tr>
        <td align="right" valign="middle" class="tx_bd">
            <div align="left">
                <span class="tx_bold">Data de Validade do CA: </span>
            </div>
        </td>
        <td width="3%" align="right" valign="middle" class="tx_bd">
            <div align="left">
                <span class="tx_bd">21/05/16</span></div>
        </td>
    </tr>
<tr>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left" class="tx_bold">
            <div align="left">
                Data de Validade da IAM:
            </div>
        </div>
    </td>
    <td align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bd">110513</span></div>
    </td>
</tr>
<tr>
    <td height="18" align="right" valign="middle" class="tx_bd">
        <div align="left">
            <span class="tx_bold">Situa&ccedil;&atilde;o de Aeronavegabilidade:</span>
        </div>
    </td>
    <td height="18" align="right" valign="middle" class="tx_bd">
        <div align="left">
            Normal</div>
    </td>
</tr>
<tr>
    <td height="18" colspan="2" align="right" valign="middle" class="tx_bd">
        <div align="left" class="tx_bold">
            Motivo(s):
        </div>
    </td>
</tr>
<tr>
    <td height="18" colspan="2" align="right" valign="middle" class="tx_bd">
        <div align="left">
            <blockquote>
                <p>
                    <span class="tx_bold"></span>
                </p>
            </blockquote>
        </div>
    </td>
</tr>
<tr>
    <td height="18" colspan="2" align="left" valign="middle" class="tx_bd">
        Consulta realizada em: 16/8/2012 15:52:45<br>
    </td>
</tr> 
```

我想获取以下文本：

*   塞斯纳飞机
*   T206H
*   T20608735
*   C206
*   MNTE
*   POUSO 常规 1 电机常规
*   1633 - 公斤
*   005
*   PRIVADA SERVICO AEREO PRIVADOS
*   19040
*   ARRENDAMENTO OPERACIONAL/ALIENACAO FIDUCIARIA
*   21/05/16
*   110513
*   普通的

一些 div 只包含我需要的文本。其他 div 包含一个包含我需要的文本的跨度。我将如何为此构建 xpath？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:17:18.470

**使用**：

```
//tr/td[@align='right' and @valign='middle' and @class='tx_bd']
       /div[@align='left 'and not(*)]
         /text() 
```

# .net - .NET - 在运行时调用泛型方法或强制转换类型

> ID：11976857
> 
> 赞同：0
> 
> 时间：2012-08-15T20:34:50.420
> 
> 标签：.net, vb.net

我有以下 VB.NET 代码：

```
Private _retryMessages as Dictionary(Of Type, List(Of Object))

Private Sub RetryMessage(Of T)(message as T)
    _retryMessages(GetType(T)).Add(message)
End Sub

Private Sub Publish(Of T)(message as T)
    ' code to publish message -- dependent on T
End Sub 
```

我想创建一个新方法，它将遍历字典并调用`Publish`每条消息：

```
Private Sub AttemptRetryMessages()
    For Each messageType In _retryMessages.Keys
        messages = _retryMessages(messageType)
        ' now I'm lost ...
        'For Each message In messages
        '    Publish(message) '<-- System.Object
        'Next
    Next
End Sub 
```

问题是我有类型，但我不确定如何调用`Publish`为泛型提供正确的类型。如果我只是按原样调用它，那么将`T`被解释为`System.Object`.

我完全控制了代码，所以如果有更好的方法来解决这个问题，我愿意接受。目标是我们可以有几十种类型的消息，我只是希望能够将它们排队，以防发送失败。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:11:28.330

如果所有消息类型的发布都相同，请执行以下操作。

1：创建一个基类，您的其他消息类继承自：

```
Public Class Message

    Public Sub Publish()
        'Implementation Omitted
    End Sub

End Class 
```

2：更改一些现有代码：

```
Private _retryMessages as Dictionary(Of Type, List(Of Message)) 
```

3：最后你的 AttemptRetryMessages() 变成：

```
Private Sub AttemptRetryMessages() 

    For Each messageList As List(Of Message) In _retryMessages.Values 
        For Each m As Message in messageList
            messageType.Publish()
        Next
    Next

End Sub 
```

如果 Publish 需要为每种消息类型实现不同的实现，那么它会变得有点混乱。您必须使用 GetType() 来确定它是哪种消息类，然后调用适当的代码。如果是这种情况，那么我不会使用泛型，因为泛型方法通常用于不同类型之间的共享功能。一个例子是字典类。它不关心它是对象列表还是消息列表，字典功能是相同的。

# css - 试图覆盖 CSS :hover

> ID：11976860
> 
> 赞同：0
> 
> 时间：2012-08-15T20:34:54.197
> 
> 标签：css, hover

我有一个图像，当翻转时从灰色过渡到彩色。但是，除此之外，我有一篇文章会在我翻阅文章后导致悬停重置。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:43:57.367

在 JQuery 中包含最新的 Jquery js。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js" charset="utf-8"> 
```

尝试这个

```
<script>
$(document).ready(function() {
  $("#myobject").hover(function(){
    $("myobject").css("background-color","yellow");
    },f#unction(){
    $("#myobject").css("background-color","#E9E9E4");
  });
});
</script> 
```

这将通过 id 起作用。

用。。。来代替 。按类引用

传递给 .ready() 的处理程序保证在 DOM 准备好后执行。

如果我没有看到任何代码，我正在做一些假设。

# bash - Bash：“rm -d”和“rm -R”有什么区别？

> ID：11976861
> 
> 赞同：8
> 
> 时间：2012-08-15T20:34:58.790
> 
> 标签：bash, terminal, rm

# 问题

*   Bash 中的`rm -d`和命令有什么区别？`rm -R`
*   我应该使用哪一个？

# 细节

根据`rm`命令的手册页：

*   `rm -d`尝试删除目录以及其他类型的文件。
*   `rm -R`尝试删除以每个文件参数为根的文件层次结构。-R 选项意味着 -d 选项。

现在，我知道最后一个陈述（`-R`暗示`-d`），这似乎回答了我的问题。但是，我仍然想知道为什么两个命令标志首先存在，如果它们在它们的作用上被认为是相同的。

此外，由于我仍在学习 Bash，我认为最好知道哪个选项是 Bash 程序员（通常）的首选，以及为什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T20:37:48.973

通常，`rm`不会删除目录，即使它是空的。`rm -d`只是让`rm`行为像`rmdir`。如果目录不为空，它仍然拒绝删除该目录，但如果它为空，它会这样做。

`rm -R`是完全递归删除，删除目录及其所有内容。

我从来没有使用过`-d`，因为我不知道它存在并且总是使用`rmdir`。如果您只想删除目录，我会使用`rmdir`/如果它实际上是空的。当您完全意识到您正在尝试删除目录及其所有内容时`rm -d`保存。`rm -R`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T20:45:08.377

该`-d`选项特定于 的 BSD 实现`rm`，您可能会在 Mac 上找到该选项。它不存在于 Linux 系统上的 GNU 实现中。

如果您正在寻找首选的选择，那就是使用`-r`（小写）来删除整个树并`rmdir`删除单个目录，您会发现这些代码更具可移植性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-06T10:29:08.750

rm 将删除文件，但我在尝试删除目录时遇到问题，因此需要使用某些选项对其进行标记，

rm -f 将强制删除文件而不要求确认

rm -R 将删除目录，但在我的情况下是要求确认，但因为我有这么多文件，我一直在输入 y 和 y 这是永恒的

rm -Rf 是我的最终解决方案，它强制删除目录而不要求确认

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T21:05:23.307

为了清楚起见，您**永远不应该使用 rm -d**。假设它不只是失败并显示“不允许操作”错误消息，它将删除目录*而不*删除内容。在空目录上，它与`rmdir`. 在非空目录上，它会在文件系统中产生不一致，需要通过 fsck 或一些非常聪明的手动黑客来修复。

这是一个不应该存在的愚蠢选择。BSD 的人在添加时服用了一些不良药物。`rm -r`至少从 1973 年和`rmdir`1971 年就开始使用 UNIX。

# css - CSS DIV 滚动条和带最小宽度的背景

> ID：11976864
> 
> 赞同：0
> 
> 时间：2012-08-15T20:35:34.120
> 
> 标签：css

我有一个 1400px 宽的标题 DIV，包含一个必须始终居中的背景图像。

我有一个需要 960 像素宽的网站。

当我调整浏览器的大小（缩小它）时，我不想要任何水平滚动条，直到我们达到 960 像素，但标题/背景上较大的宽度导致了这种情况。

是否可以在调整大小时停止所有水平滚动条直到 960px 并保持标题 div 中的背景图像居中？

任何帮助表示赞赏！我在这里设置的一些代码用于快速测试......

[http://jsfiddle.net/gVuvk](http://jsfiddle.net/gVuvk) 背景图片的宽度为1400px。我需要滚动条从 960 像素开始，而不是 1400 像素。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:47:02.337

将`#header`宽度从固定像素更改为`100%`

**演示**：http: [//jsfiddle.net/wNSTD/3/](http://jsfiddle.net/wNSTD/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:50:22.630

尝试摆弄最小宽度，如果这不起作用，请使用边距，css`auto-margins`在这里很有用。所以，做这样的结构：

```
<style>
.center_image
{
  margin: auto auto; // or you can modify the x or y seperately
  background-image:url("somesite.jpg");
}
</style>

<div class="outer">
  <div class="center_image"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:50:32.737

将标题的宽度设置为 100% 并将背景图像居中。

```
background: url(http://fade.com.au/test/bg-image.jpg) no-repeat center center;
width: 100%; 
```

演示：http: [//jsfiddle.net/post_erasmus/Hn6Zb/1/](http://jsfiddle.net/post_erasmus/Hn6Zb/1/)

# java - 直接网络远程处理异步问题

> ID：11976869
> 
> 赞同：1
> 
> 时间：2012-08-15T20:36:01.777
> 
> 标签：java, javascript, ajax, dwr

我正在使用直接 Web 远程处理库在我的应用程序中执行一些 ajax 调用。我有一个问题，我认为归结为服务呼叫的延迟响应。下面是我认为有问题的部分代码。问题出在 getDefaultReviewerTypeCode 中，直到在其他“填充”过程之后，才在回调中设置返回变量。有没有办法告诉 DWR 在继续处理 java 脚本之前等待响应？

```
function makeProtocolReviewerTypesDropDown(reviewerTypes, reviewerIndex) {
var defaultReviewerType = getDefaultReviewerTypeCode();

...
var option = document.createElement('option');
option.setAttribute("value", "");
if (defaultReviewerType == '') {
    option.setAttribute("selected", "selected");
}

...

for (var i = 0; i < reviewerTypes.length; i += 2) {
    var reviewerType = reviewerTypes[i].replace(/^\t*/, '');
    option = document.createElement('option');
    option.setAttribute("value", reviewerType);
    if (defaultReviewerType == reviewerType) {
        option.setAttribute("selected", "selected");
    }
    option.text = reviewerTypes[i+1];
    addSelectOption(selectElement, option);
}

return selectElement;
}

function getDefaultReviewerTypeCode() {
var defaultReviewTyper;
var dwrReply = {
        callback:function(data) {
            if ( data != null ) {   
                defaultReviewTyper = data;
            } else {
                defaultReviewTyper = '';
            }
        }
};
IacucProtocolActionAjaxService.getDefaultCommitteeReviewTypeCode(dwrReply);
return defaultReviewTyper;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T21:11:07.897

最好的方法是将 DWR 调用之后的所有代码封装到一个单独的方法中，并从 DWR 回调中调用它。这样，您的依赖于 DWR 结果的代码保证仅在 DWR 返回后才被调用。

# c - 为什么这个 for 循环不执行？

> ID：11976871
> 
> 赞同：0
> 
> 时间：2012-08-15T20:36:04.663
> 
> 标签：c, loops, for-loop

我正在制作一个简单的程序，从输入的 ID 中获取用户余额。由于某种原因，当输入 listof_ID 数组中的 ID 时，for 循环不会执行：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main()
{
    int cntr;
    int ID;

    int listof_ID[] = {001, 002, 003, 004, 005};
    float listof_BAL[] = {338.90, 745.87, 897.32, 665.36, 102.45};

    puts("**Check Your Balance** \n");
    printf("**Please Enter Your ID >> ");
    scanf("%d", &ID);
    for(cntr = 0; cntr > 5; cntr++)
    {
        if(ID == listof_ID[cntr])
        {
            puts("Your balance is ");
            printf("%.2f", listof_BAL[cntr]);
            break;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T20:37:26.120

```
for(cntr = 0; cntr > 5; cntr++) 
```

应该

```
for(cntr = 0; cntr < 5; cntr++) 
```

当条件`cntr > 5`为真时循环执行。如果`cntr`开始于`0`then 它显然不大于 5，因此循环体永远不会执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:42:08.257

在您的 for 循环中，cntr = 0 的第一个值，这意味着 cntr < 5。但在条件中，您正在检查 cntr > 5，这是不正确的。所以，循环没有开始。

# php - Redbean 3.2.x - 自定义映射

> ID：11976876
> 
> 赞同：3
> 
> 时间：2012-08-15T20:36:51.483
> 
> 标签：php, redbean

我正在尝试为我正在使用的数据库实现自定义映射，该数据库预先设置了主键字段，例如`tablename_id`而不是`id`.

我从 2.0 手册中收集到了这一点：

```
class MyBeanFormatter implements RedBean_IBeanFormatter {
    public function formatBeanID($type) {
        return $type.'_id';
    }
}
R::$writer->setBeanFormatter( new MyBeanFormatter ); 
```

3.0没有界面`RedBean_IBeanFormatter`，没有功能`formatBeanID`。3.0 手册并没有为此提供很多内容。任何帮助都会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:41:05.530

3.0 不再支持自定义映射。RedBeanPHP 3 及更高版本要求表将 1 对 1 映射到 bean 类型。这是 RedBeanPHP 设计理念的一部分。它可能对现有项目不太有用，但我相信它最终使数据库映射更易于维护。这一决定还允许 RB 提供许多强大的功能，例如深度复制和 exportAll，同时相对轻量级和快速。

# python - Python：如何结合进程轮询和非阻塞 WebSocket 服务器？

> ID：11976877
> 
> 赞同：3
> 
> 时间：2012-08-15T20:36:56.927
> 
> 标签：python, websocket, multiprocessing, message-queue, tornado

我有个主意。编写一个基于 WebSocket 的 RPC，它将根据以下场景处理消息。

1.  客户端连接到 WS（Web 套接字）服务器
2.  客户端向 WS 服务器发送消息
3.  WS 服务器将消息放入传入队列（可以是 multiprocessing.Queue 或 RabbitMQ 队列）
4.  进程池中的一名工作人员拿起消息进行处理
5.  正在处理消息（可能非常快或非常慢 - 它与 WS 服务器无关）
6.  消息处理完毕后，将处理结果推送到传出队列
7.  WS 服务器从队列中弹出结果并发送给客户端

**注意：**关键是 WS 服务器应该是非阻塞的，并且只负责：

*   连接接受
*   从客户端获取消息并将它们放入传入队列
*   从传出队列中弹出消息并将它们发送回客户端

**注意2：**以某种方式存储客户端标识符并将其与来自客户端的消息一起传递可能是个好主意

**注意3：由于消息来回排队，简单消息处理的速度（例如获取消息作为输入并作为结果将其推回）会变慢，这是完全可以的**。**目标是能够以与处理快速消息相同的代码风格在池中运行处理器昂贵的操作（粗略的非实际示例：几个嵌套的“for”循环）。即从输入队列中弹出消息以及某种客户端标识符，对其进行处理（可能需要一段时间）并将处理结果与客户端 ID 一起推送到输出队列。**

 ****问题：**

*   在 TornadoWeb 中，如果我有一个队列（多处理或 Rabit），我怎样才能让 Tornado 的 IOLoop 在该队列中有新项目时触发一些回调？如果有的话，你能帮我导航到一些现有的实现吗？
*   这种设计有现成的实现吗？（不一定是 Tornado）
*   也许我应该使用另一种语言（不是 python）来实现这样的设计？

**致谢：**

*   不欢迎使用 REST 和 WSGI 来实现我的目标
*   诸如“这是我通过谷歌搜索 2 秒找到的代码的链接。它有一些来自龙卷风和多处理的进口。我不确定它是做什么的，但我 99% 确信它正是你需要的”也不受欢迎
*   使用异步库而不是普通阻塞库的建议是...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:45:55.833

Tornado`IOLoop`允许您通过文件描述符处理来自任何文件对象的事件，因此您可以尝试以下操作：

*   通过`multiprocessing.Pipe`
*   调用[`add_handler`](http://www.tornadoweb.org/documentation/ioloop.html#tornado.ioloop.IOLoop.add_handler)每个管道的父端（使用连接的`fileno()`）
*   让工作人员每次将某些内容放入输出队列时都会写入一些随机垃圾，无论那是否`multiprocessing.Queue`属于任何 MQ。
*   在事件处理程序中处理来自工作人员的答案**

# ios - 关闭 Modal Segue 后更新 UIViewController

> ID：11976881
> 
> 赞同：4
> 
> 时间：2012-08-15T20:37:11.723
> 
> 标签：ios, xcode, uiviewcontroller, uilabel, modalviewcontroller

我目前正在为我的第一款 iPhone 游戏设计结构，但遇到了问题。目前，我有一个“MenuViewController”，允许您选择要播放的关卡和一个“LevelViewController”，用于播放该关卡。

'MenuViewController' 上的A`UIButton`触发到 'LevelViewController' 的模态序列。

'LevelViewController' 上的A`UIButton`触发以下方法返回到 'MenuViewController'：

```
-(IBAction)back:(id)sender //complete
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

问题是，我`UILabel`在菜单页面上有一个打印玩家总点数的页面。每当我从关卡返回菜单时，我都希望这个标签自动更新。目前，标签是在“MenuViewController”中以编程方式定义的：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    CGRect pointsFrame = CGRectMake(100,45,120,20);
    UILabel *pointsLabel = [[UILabel alloc] initWithFrame:pointsFrame];
    [pointsLabel setText:[NSString stringWithFormat:@"Points: %i", self.playerPoints]];
    [self.pointsLabel setTag:-100]; //pointsLabel tag is -100 for id purposes
} 
```

self.playerPoints 是 MenuViewController 的整数属性

有没有办法更新标签？提前谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T21:06:55.300

这是委托的完美案例。当 LevelViewController 完成后，它需要触发一个在 MenuViewController 中处理的委托方法。这个委托方法应该关闭模态 VC，然后做任何你需要它做的事情。呈现的 VC 通常应该处理它呈现的模态视图的解雇。

以下是如何实现此功能的基本示例：

LevelViewController.h（在接口声明之上）：

```
@protocol LevelViewControllerDelegate
    -(void)finishedDoingMyThing:(NSString *)labelString;
@end 
```

ivar 部分中的相同文件：

```
__unsafe_unretained id <LevelViewControllerDelegate> _delegate; 
```

ivar 部分下方的相同文件：

```
@property (nonatomic, assign) id <LevelViewControllerDelegate> delegate; 
```

在 LevelViewController.m 文件中：

```
@synthesize delegate = _delegate; 
```

现在在 MenuViewController.h 中，将`#import "LevelViewController.h"`自己声明为 LevelViewControllerDelegate 的委托：

```
@interface MenuViewController : UIViewController <LevelViewControllerDelegate> 
```

现在在 MenuViewController.m 中实现委托方法：

```
-(void)finishedDoingMyThing:(NSString *)labelString {
    [self dismissModalViewControllerAnimated:YES];
    self.pointsLabel.text = labelString;
} 
```

然后确保在呈现模态 VC 之前将自己设置为 LevelViewController 的委托：

```
lvc.delegate = self;  // Or whatever you have called your instance of LevelViewController 
```

最后，当您完成需要在 LevelViewController 中执行的操作时，只需调用以下代码：

```
[_delegate finishedDoingMyThing:@"MyStringToPassBack"]; 
```

如果这没有意义，我和霍勒可以尝试帮助您理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:45:28.053

`self.pointsLabel`创建一个指向 UILabel的属性，然后你可以调用类似`[self.pointsLabel setText:[NSString stringWithFormat:@"Points: %i", self.playerPoints]];`的东西来用新分数更新标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-21T02:57:04.917

在模态视图头文件中，添加属性：

```
@property (nonatomic,assign) BOOL updated; 
```

然后在您的主视图控制器中，将 didViewAppear 与以下内容一起使用：

```
-(void)viewDidAppear:(BOOL)animated{
    if (modalView.updated == YES) {
        // Do stuff
        modalView.updated = NO;
    }
} 
```

其中“modalView”是您可能在那里分配/初始化的那个 UIViewController 的名称。

如果您想传递更多信息，请添加更多属性，例如用户选择的级别。

# sql-server - 包含 TEXT 列的表不断增长

> ID：11976883
> 
> 赞同：5
> 
> 时间：2012-08-15T20:37:22.340
> 
> 标签：sql-server, sql-server-2005

我们在生产系统中有一张表（出于遗留原因），它正在运行 SQL 2005 (9.0.5266) 并包含一个 TEXT 列（以及其他一些不同数据类型的列）。

突然之间（从一周前开始），我们注意到这张表的大小每天线性增加 10-15GB（而以前它一直保持不变的大小）。该表是消息传递系统的队列，因此其中的数据每隔几秒钟就会完全刷新一次。在任何时候都可能有 0 到大约 1000 行，但随着消息的插入和发送（此时它们被删除），它会迅速波动。

我们找不到在增长开始那天发生的任何变化——因此在这个阶段没有发现明显的潜在原因。

一个“明显”的罪魁祸首是 TEXT 列，因此我们检查了是否现在存储了任何大量值，但是（使用 DATALENGTH）我们发现没有超过约 32k 的单行。我们已经运行了 CHECKDB，更新了空间使用情况，重建了所有索引，等等——没有任何东西可以减少大小（CHECKDB 没有显示任何错误）。

我们查询了 sys.allocation_units 并且大小增加肯定是 LOB_DATA （显示 total_pages 和 used_pa​​ges 以恒定速率一起增加）。

为了减少昨晚的数据库大小，我们简单地在有问题的表旁边创建了一个新表（幸运的是，应用程序通过视图引用了该表），删除了旧表，并重命名了新表。我们昨晚离开了，因为我们已经缓解了空间问题而感到欣慰，并且我们今天有一张狡猾的桌子的备份可以进一步调查。然而，今天早上，表的大小已经达到 14GB（并且还在增长），而表中只有通常的 ~500 行，而 MAX(DATALENGTH(text_column)) 仅显示大约 35k。

关于什么可能导致这种“失控”增长的任何想法，或者我们可以尝试或查询的任何其他信息以获取有关究竟是什么在使用该空间的更多信息？

干杯，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:04:34.890

这是[处理队列](http://rusanu.com/2010/03/09/dealing-with-large-queues/)时的普遍问题。链接的文章讨论了 Service Broker 队列，但对于用作队列的普通表，问题是相同的。如果你有一个繁忙的系统，拥有大量资源（CPU、内存、磁盘 IO）并且你在这个系统上推送一个队列以达到高吞吐量，那么这些资源的很大一部分将用于处理这两个操作：入队（即 INSERT ）和出队（即删除）。但是，记录的整个生命周期需要*三个*操作：INSERT、DELETE 和幽灵清除。它们在 CPU/内存/磁盘 IO 需求方面的成本大致相同，因此如果您将该队列用于 90% 的系统资源，那么您应该为每个队列分配 30% 的资源。但只有前两个在您的控制之下（即在用户会话中运行的显式语句）。第三个，ghost purge，是一个由 SQL Server 控制的后台进程，不可能允许 ghost 清理进程消耗 30% 的资源。这是一个基本问题，如果您将踏板踩到金属足够长的时间，您的 **就会*撞到它。一旦幽灵记录累积并超过系统/工作负载特定阈值，性能将迅速下降，并且症状将螺旋式上升至糟糕的性能（形成负反馈循环）。

幸运的是，由于您不使用 Service Broker 队列，而是使用真实表作为队列，因此您可以使用一些更好的工具，例如`ALTER TABLE REORGANIZE`和`ALTER TABLE REBUILD`. 到目前为止，最好的解决方案是在线索引/表重建。SQL Server 2012 支持[对包含 BLOB 的表进行在线操作](http://rusanu.com/2011/08/05/online-index-operations-for-indexes-containing-lob-columns/)，您可以利用它。当然，您必须摆脱已弃用的过时`TEXT`类型和 use `VARCHAR(MAX)`，但这并没有说。

作为旁注：

> 如果您的页面上只有幽灵记录，那么您将不会再次阅读这些页面，并且它们不会被标记为清理

这是不正确的。只有重影的页面将被扫描检测并清除。正如我所说，问题不在于检测，而在于资源。如果您足够推动您的系统，您将领先于幽灵清理，而他将永远赶不上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:10:02.563

今天一大早，我用这个“问题队列表”重新启动了实例上的 SQL 服务。看来这已经解决了这个问题。重新启动后，我立即监控了 LOB_DATA 页面使用计数，它立即开始下降。它的清理速度很慢，所以可能需要大约一两个小时才能收回 60+GB 的空间（在确保一切正常后我就上床睡觉了）。

目前，就使用中的分配而言，该表已恢复正常（悬停在 <100 页左右），并且没有显示任何重新增长的迹象。

考虑到我们以同样的方式（即作为队列）使用这张桌子至少 10 年了，而且它比过去一两周更繁忙，我会感到惊讶如果是上面 Remus 描述的问题（尽管我理解这是怎么发生的；我猜这个特定的队列还不够忙，不足以淹没幽灵清理过程？）。很奇怪...

再次感谢各位的帮助！

# javascript - 在 javascript 函数中打印 HTML javascript 代码

> ID：11976887
> 
> 赞同：2
> 
> 时间：2012-08-15T20:37:34.147
> 
> 标签：javascript, html, adsense

我有这样一个 Adsense 代码：

```
<script type="text/javascript"><!--
google_ad_client = "ca-pub-12345";
/* my advertisement */
google_ad_slot = "2345";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

我有这样一个js文件：

```
$(document).ready(function() {

 var adsenseCode='<script type="text/javascript"><!--
    google_ad_client = "ca-pub-12345";
    /* my advertisement */
    google_ad_slot = "2345";
    google_ad_width = 728;
    google_ad_height = 90;
    //-->
    </script>
    <script type="text/javascript"
    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
    </script>';

 $().append(adsenseCode);
} 
```

我尝试使用双引号、单引号、删除注释行等。没有找到解决方案。
如何在我的 HTML 页面中打印 javascript 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:48:07.663

像下面这样的东西应该可以解决问题......

```
$(document).ready(function() {

 var adsenseCode='<script type="text/javascript">  \
    google_ad_client = "ca-pub-12345";  \
    /* my advertisement */   \
    google_ad_slot = "2345"; \
    google_ad_width = 728;   \
    google_ad_height = 90;   \
    <'+'/script>  \
    <script type="text/javascript"  \
    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">  \
    <'+'/script>';

 $('head').append(adsenseCode);
} 
```

*   我调整了您的`.append()`调用，以便将其附加到文档的`<head>`块中。
*   `</script>`如果这段代码本身位于一个`<script>...</script>`块内，我将结束标记分开以避免混淆浏览器。这可能是必要的，也可能不是必要的，具体取决于浏览器版本、文档类型和其他内容，但我认为为了安全起见，这通常是一个好主意。

* * *

正如@DarkFalcon 在评论中指出的那样，jQuery 的 append 函数可能会阻止加载具有外部源的脚本。我已经对此进行了一些实验，但这似乎不是问题。让我们知道这是否有效。如果没有，我们可以探索其他替代方案。

# jquery - 更改图像的 src 属性

> ID：11976891
> 
> 赞同：1
> 
> 时间：2012-08-15T20:37:59.517
> 
> 标签：jquery, dom, slimbox

我试图避免使用 slimbox 创建重复的图像（一个缩略图一个全尺寸）。

我将“缩略图”图像缩放为 100% 宽度和高度“自动”，因此它们都很好地适合其父容器，缩放为缩略图大小。单击会在灯箱中打开全尺寸图像。那部分很好。

我想改进的是两个图像之间的实际关系。目前我有

```
<a href="path/to/image.jpg" rel="lightbox" title="some title">
<img src="path/to/image.jpg"> 
```

由于他们使用相同的图像，我想以编程方式填充

```
<a href="XXX"> 
```

与图像源具有相同的路径。我想我可以使用兄弟选择器“.next”来执行此操作并向自身添加一个类。

```
$(function(){
    $('a.foo').each(function() {
        $(this).next('img').attr('href', this.href);
    });
}); 
```

显然这不起作用，语法不正确。谁能提出一个好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:43:48.300

您在右侧并且代码中没有语法错误，但是图像没有`href`属性，您应该修改它们的`src`属性，试试这个：

```
$(function() {
    $('a.foo').each(function() {
        $(this).next().attr('src', this.href);
    });
}); 
```

* * *

```
$(function() {
    $('a.foo').each(function() {
      var src = $(this).find('img').attr('src');
      $(this).attr('href', src)  
    });
}); 
```

[演示](http://jsfiddle.net/PzYQt/1/)

# php - 没有第三方 API 的 Twitter 单点登录 OAuth PHP

> ID：11976895
> 
> 赞同：-1
> 
> 时间：2012-08-15T20:38:12.963
> 
> 标签：php, curl, twitter, oauth, twitter-oauth

我的任务是使用 Twitter 开发单点登录系统，并且不允许我使用第三方 API。然而，我可以使用 CURL 和 PHP。什么是最好的方法来做到这一点。到目前为止，我有这个，但它不起作用。它输出错误“无法验证 oauth 签名和令牌”

我想要一些关于如何去做的建议。

```
$fields = array(
            'oauth_callback'        => 'http://www.mydomain.co.uk/redirect.php'
        );

        //url-ify the data for the POST
        foreach( $fields as $key=>$value ) {
            $fields_string .= $key.'='.$value.'&'; 
        }

        rtrim( $fields_string, "" );

        echo $fields_string;

        $curl = curl_init( "https://api.twitter.com/oauth/request_token" );

        //Send auth data to twiter
        curl_setopt( $curl, CURLOPT_POST, count( $fields ) );
        curl_setopt( $curl, CURLOPT_POSTFIELDS, $fields_string );

        //Will return json object
        curl_setopt( $curl, CURLOPT_RETURNTRANSFER, 1 );

        $result = curl_exec($curl);

        //debugger
        if( $debug ){
            if( ! curl_errno( $curl ) ) {
                $info = curl_getinfo( $curl );
                echo 'Took ' . $info[ 'total_time' ] . ' seconds to send a request to ' . $info[ 'url' ];
            }
        }

        curl_close( $curl );

        echo $result; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:41:45.213

我建议使用 PEAR HTTP_OAUTH 库。没有理由重新发明轮子。

# c# - 如何在 C# 中扩展数组而不使用 new 关键字

> ID：11976898
> 
> 赞同：4
> 
> 时间：2012-08-15T20:38:43.047
> 
> 标签：c#, char, arrays

我在 C# 中有一个 char 数组。

```
var arr = new char[3] { 'a','b','c' }; 
```

如何在不创建新数组的情况下在其末尾添加空格？

结果：`arr = { 'a', 'b', 'c', ' ', ' ', ' ' };`

这听起来可能类似于 VB.NET 的`ReDim`. 但我也不确定那是我想要的。我想保留其中的元素，而不是在幕后实例化一个新数组。

这是否仅适用于 Generic Collections 和 ArrayList？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T20:41:20.853

不幸的是，数组在设计上是预先固定的。这很重要，因为它将在堆中保留必要的内存量。

所以，回答你关于不创建新的要求：**这是不可能的**。

但是，有一种解决方法。看下面的方法：

```
Array.Resize(ref myArr, myArr.Length + 5); 
```

它的工作原理如源代码所述：

> 此方法分配一个指定大小的新数组，将元素从旧数组复制到新数组，然后用新数组替换旧数组。
> 
> 如果 array 为 null，则此方法创建一个具有指定大小的新数组。
> 
> 如果 newSize 大于旧数组的长度，则分配一个新数组并将所有元素从旧数组复制到新数组。如果 newSize 小于旧数组的 Length，则分配一个新数组，并将元素从旧数组复制到新数组，直到填满新数组；旧数组中的其余元素将被忽略。如果 newSize 等于旧数组的 Length，则此方法不执行任何操作。
> 
> 此方法是 O(n) 操作，其中 n 是 newSize。

这意味着`myArr`将更新以引用新数组。但是，如果有另一个对原始数组的引用，**则不会**更新（它将继续引用旧版本）。

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/bb348051.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T20:43:26.557

不，这是不可能的使用数组，通用或其他.. AFAIK，没有办法动态调整数组的大小。请改用[列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)。

正如 Martin 在评论中指出的那样，即使`List`该类在其内部实现中也使用了数组。如果您希望真正能够动态调整数据结构的大小而无需重新初始化，您必须实现自己的[链表](http://en.wikipedia.org/wiki/Linked_list)版本。

`System.Collections.Generic`包含一个名为[LinkedList](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)的类，它表示一个双向链表（意味着每个节点都有对下一个和前一个节点的引用），但我不确定它的内部实现是否使用数组..

# ruby-on-rails - 在不发送 http DELETE 请求的情况下使用 Rails Destroy 方法？

> ID：11976900
> 
> 赞同：0
> 
> 时间：2012-08-15T20:38:48.380
> 
> 标签：ruby-on-rails

对于我的`Website`模型，我当前让用户销毁该模型实例的方法是将其放在 html 页面上：

```
<%= link_to "delete", website, :method => :delete %> 
```

但是，这必须发送一个`DELETE`请求`/websites/:id(.:format)`才能使用 destroy 方法。我不能这样做，因为`id`my`Websites`是字符串，例如`http://example.com`, 意思`localhost:3000/websites/http://example.com`就是没有意义。

所以我想知道的是，`Websites`除了发送http`DELETE`请求之外，还有其他方法可以删除我的模型实例吗？我希望我可以`destroy`直接访问该方法。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:48:58.247

我不太确定是否了解您的问题，但您有没有看一下[friendly_id](https://github.com/norman/friendly_id/)？

多亏了这个 gem，您将能够使用字符串而不是基本的 sql 主 ID 创建 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:50:20.973

您可以通过向您的 routes.rb 添加新路由来访问公共方法。

例如：

路线.rb

```
post '/websites/:id' => 'websites#destroy', :as => :destroy_website 
```

看法

```
<%= link_to "destroy", destroy_website_path(:id => "http://example.com"), :method => :post %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:44:43.087

为什么不将网站的主键 ID 作为整数，然后有一个可以作为`http://example.com`名称的“url”字符串属性。

这将使许多事情变得更容易，尤其是关联。此外，您仍然可以根据 url 搜索内容，并且您并没有真正受到将 url 设为列和 id # 作为主键的限制。

# javascript - 正则表达式 (javascript) - 允许带有特殊字符的字母数字字符不在第一位

> ID：11976901
> 
> 赞同：2
> 
> 时间：2012-08-15T20:38:52.593
> 
> 标签：javascript, regex

我想设计一个允许字母数字字符以及其他字符的正则表达式，只要它们不在第一个位置。例子：

```
VALID: Test
VALID: Hello123
VALID: 456 Hi
VALID: 456-789
VALID: Hi-777
VALID: 333-Hi
VALID: Hello-There
VALID: What's Up
VALID: Hello#Goodbye

INVALID: -Hello
INVALID: &Goodbye 
```

这是我的起点，它只允许字母数字：

```
/[a-zA-Z]+/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T20:42:09.597

用于`^[A-Za-z0-9]`在第一个位置要求一个字母数字字符（紧跟`^`在字符串的开头），然后是您需要的任何其他字符。

```
# Specific set permitted -- add all the characters you need...
/^[A-Za-z0-9][A-Za-z-9, +-_&#'"]+$/

# Or anything permitted after the first position
# Use .* instead of .+ if a single character string is permissible.
/^[A-Za-z0-9].+$/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T20:40:58.890

试试这个正则表达式：

```
/^[a-zA-Z0-9].*$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:42:59.573

`/^\w/`如果您只需要测试, `/^\w.*$/`, 如果您还需要匹配整个字符串。如果您也允许空字符串，则可以使用`/^(\w|$)/`, 读取字符串以单词字符开头或结尾（为空），或者`/^(\w.*)?$/`, 读取字符串是单词字符后跟任何内容，一次或根本不读取.

# python - 将 Qt 样式表与 QMenu::indicator 一起使用

> ID：11976907
> 
> 赞同：2
> 
> 时间：2012-08-15T20:39:12.407
> 
> 标签：python, qt, pyqt, stylesheet

我正在使用样式表来自定义我的一个 Qt 应用程序的外观（实际上是 pyqt，但只是一样）。

这是我用于 QMenu 的样式表代码。它正确地为我所有的 QMenu 着色，但它也会导致我的所有指示器（选中的 QMenu 项目）具有方格背景，就好像它们是透明的一样。

```
QMenu {
    背景颜色：“#242424”；
    颜色：“#D5D5D5”；
}

```

如果我在指示器上设置背景颜色，则指示器背景的中心颜色正确，但中心正方形周围有一个大边框，仍然呈方格状，并且检查停止出现。

```
QMenu::indicator {
    背景颜色：“#242424”；
}

```

我还注意到文档示例中显示的宽度和高度属性不起作用。

有没有人在尝试自定义 QMenus 的颜色和外观时遇到过类似的问题？你是怎么解决的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T17:19:16.347

如果这就是你所做的一切，我会使用 QPalette 来驱动你的颜色。但是，如果这只是冰山一角，并且您正在寻找更多的样式定制，您必须定义几乎所有的属性（可以在 Qt 文档中找到）。无论出于何种原因，Qt 似乎并没有对其样式表进行继承，所以如果您甚至尝试在菜单上做一些类似圆角的事情，您也必须定义所有其他属性。

另外，我在文档中没有真正看到的一件好事是，如果您想修改样式表但仍然可以访问调色板颜色，您可以在样式表中使用调色板（ColorRole），如下所示：

```
QMenu {
    background-color: palette(Window);
} 
```

无论如何......这里有一些选择：

**QPalette 解决方案**

```
menu = QMenu(self)
palette = menu.palette()
palette.setColor(menu.backgroundRole(), QColor('#242424'))
menu.setPalette(palette) 
```

**样式表解决方案**

[http://doc.qt.nokia.com/4.7-snapshot/stylesheet-examples.html#customizing-qmenu](http://doc.qt.nokia.com/4.7-snapshot/stylesheet-examples.html#customizing-qmenu)

我会复制高级自定义并调整所有值，而不是真正删除它们中的任何一个，因为它都是纸牌屋。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T01:17:35.283

我找到了一种解决方法，该解决方法似乎是Qt 如何处理 QMenu::indicators 样式表的[记录错误。](https://bugreports.qt.io/browse/QTBUG-7164)

`image`我没有使用该属性，而是使用了该`background-image`属性，它以原始大小插入图像，而不是缩小它。仍然无法设置指示器的大小，但您可以使用该`padding`属性将菜单项文本移到上方，以便显示整个指示器图像。

```
QMenu::item {
    padding: 3px 20px;
}

QMenu::indicator:checked {
    background-image: url(/path/to/image.png);
} 
```

# c# - 右键单击网格视图

> ID：11976909
> 
> 赞同：0
> 
> 时间：2012-08-15T20:39:26.650
> 
> 标签：c#, asp.net, select, gridview, right-click

我想知道是否有办法从网格视图中选择一行并在右键单击时删除。

我有删除语句，但我只是没有如何在右键单击时选择。

我已经看到一些建议说要使用 mousebuttons.right 但这对我不起作用并且错误（鼠标按钮在当前上下文中不存在）

这是我目前的填写声明

```
 protected void getGLDepts()
    {
            mpSearch.Focus();
            string[] mpvalue = mpSearch.Text.Split('(',')');
            string coa = "";
            string map = "";
            SqlConnection myconn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Rollup2ConnectionString"].ConnectionString);
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = myconn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "USP_GET_GL_BY_DEPT";
            cmd.Parameters.Add("@DEPTCODE", SqlDbType.Int).Value = mpvalue[1].ToString();
            foreach (ListItem item in mpcbl.Items)
            {
                if (item.Selected)
                {
                    coa += "','" + item.Value;
                }
            }
            if (coa != "") coa = coa.Substring(2, coa.Length - 2) + "'";
            else coa = "''";
            cmd.Parameters.Add("@COA", SqlDbType.VarChar).Value = coa;
            foreach (ListItem item in exceptdefault.Items)
            {
                if (item.Selected)
                {
                    map += "','" + item.Value;
                }
            }
            if (map != "") map = map.Substring(2, map.Length - 2) + "'";
            else coa = "''";
            cmd.Parameters.Add("@MAP", SqlDbType.VarChar).Value = map;

            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();

            try
            {
                da.Fill(ds);
                if (ds.Tables[0].Rows.Count > 0)
                {
                    gvMapping.DataSource = ds;
                    gvMapping.DataBind();

                    lblGLDeptData.ForeColor = System.Drawing.Color.Black;
                    lblGLDeptData.Text = " " + ds.Tables[0].Rows.Count + " Cost Center/Funds are Mapped to this Department.";
                }
                else
                {
                    gvMapping.DataSource = ds;
                    gvMapping.DataBind();

                    lblGLDeptData.ForeColor = System.Drawing.Color.Black;
                    lblGLDeptData.Text = " No Currently Mapped Cost Centers.";
                }
            }
            catch (Exception ex)
            {
                lblGLDeptData.ForeColor = System.Drawing.Color.Red;
                lblGLDeptData.Text = ex.Message;
            }
            finally
            {
                myconn.Close();
                myconn.Dispose();
            } 
```

我的选择行语句

```
 protected void gvSelect(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            //e.Row.Cells[0].Style["display"] = "none";           
            e.Row.ToolTip = "Click to select row";
            e.Row.Attributes["onclick"] = this.Page.ClientScript.GetPostBackClientHyperlink(this.gvMapping, "Select$" + e.Row.RowIndex);            
        }
    } 
```

和我的删除声明

```
protected void delSysGLDepts(object sender, EventArgs e)
    {
        if (cbsys.Checked && !cbgl.Checked)
        {
            GridViewRow row = gvMapping.SelectedRow;
            SqlConnection myconn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["Rollup2ConnectionString"].ConnectionString);
            SqlCommand cmd = new SqlCommand();
            cmd.Connection = myconn;
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "USP_DELETE_SYS_ROW";
            cmd.Parameters.Add("@SYSID", SqlDbType.Int).Value = row.Cells[1].Text;

                myconn.Open();
                object count = cmd.ExecuteNonQuery();

                myconn.Close();
                myconn.Dispose();

                getSysDepts(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:21:23.463

对我很有效：

```
void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes.Add("onContextMenu ", ClientScript.GetPostBackEventReference(GridView1, "Select$" + e.Row.RowIndex.ToString()) + "; return false;");
    }
}

protected override void Render(HtmlTextWriter writer)
{
    for (int index = 0; index < GridView1.Rows.Count; index++)
    {
        ClientScript.RegisterForEventValidation(GridView1.UniqueID, "Select$" + index.ToString());
    }

    base.Render(writer);
} 
```

# css - Opera 不显示来自谷歌字体的特殊字符

> ID：11976913
> 
> 赞同：7
> 
> 时间：2012-08-15T20:39:40.940
> 
> 标签：css, opera

我使用谷歌字体的 PT Sans。它有我需要的所有特殊字符（ą、ś、ź、ł 等）。问题是 - Opera 没有以粗体显示它们（在我写的 CSS 中`font: bold 16px/2em "PT Sans", sans-serif`，所以它不可能寻找“PT Sans Bold”（但我确实包括了 PT Sans 400 和 700）。Firefox、Chrome 和 IE (8, 9) 做得很好。

我能做些什么？

编辑 - 现场示例：[http ://buszewski.com/opera.html](http://buszewski.com/opera.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T11:45:04.193

呸，我成功了！实际上，解决方案非常简单，您只需`&subset=latin-ext`在字体链接的末尾添加即可。请参阅[示例](http://jsfiddle.net/yT3TN/1/)。

# python - 如果 setUpClass 抛出异常，如何使 python 单元测试失败

> ID：11976914
> 
> 赞同：13
> 
> 时间：2012-08-15T20:39:42.887
> 
> 标签：python, unit-testing

我在使用 python setUpClass 时遇到了一些麻烦。

例如考虑以下情况

```
class MyTest(unittest.case.TestCase):

    @classmethod
    def setUpClass(cls):
        print "Test setup"
        try:
            1/0
        except:
            raise

    @classmethod
    def tearDownClass(cls):
        print "Test teardown" 
```

几个问题

1.  上面的代码是处理测试setUpClass异常的正确方法吗（通过提高它以便python unittest可以处理它），有fail（），skip（）方法，但这些只能由测试实例使用而不是测试类。

2.  当出现setUpClass异常时，我们如何确保tearDownClass运行（unittest不运行它，我们应该手动调用它）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T13:09:15.960

`tearDownClass`正如 Jeff 指出的那样，您可以调用异常，但您也可以实现该`__del__(cls)`方法：

```
import unittest

class MyTest(unittest.case.TestCase):

    @classmethod
    def setUpClass(cls):
        print "Test setup"
        try:
            1/0
        except:
            raise

    @classmethod
    def __del__(cls):
        print "Test teardown"

    def test_hello(cls):
        print "Hello"

if __name__ == '__main__':
    unittest.main() 
```

将有以下输出：

```
Test setup
E
======================================================================
ERROR: setUpClass (__main__.MyTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "my_test.py", line 8, in setUpClass
    1/0
ZeroDivisionError: integer division or modulo by zero

----------------------------------------------------------------------
Ran 0 tests in 0.000s

FAILED (errors=1)
Test teardown 
```

**注意：**您应该知道该`__del__`方法将在程序执行结束时调用，如果您有多个测试类，这可能不是您想要的。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-09T13:30:10.010

最好的选择是为调用 tearDownClass 并**重新引发**异常的异常添加处理程序。

```
@classmethod
def setUpClass(cls):
    try:
        super(MyTest, cls).setUpClass()
        # setup routine...
    except Exception:  # pylint: disable = W0703
        super(MyTest, cls).tearDownClass()
        raise 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T22:02:57.823

```
import contextlib

class MyTestCase(unitest.TestCase):

    @classmethod
    def setUpClass(cls):
        with contextlib.ExitStack() as stack:
            # ensure teardown is called if error occurs
            stack.callback(cls.tearDownClass)

            # Do the things here!

            # remove callback at the end if no error found
            stack.pop_all() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-14T09:24:49.200

使用 tearDownModule。它应该在 setUpClass 运行后调用。

# celltable - GWTP：显示 CellTable 的麻烦

> ID：11976915
> 
> 赞同：1
> 
> 时间：2012-08-15T20:39:45.817
> 
> 标签：celltable, gwtp

嗨，我是 GWT 的新手，所以也是 GWTP 的新手。

我尝试使用 CellTables，并决定首先在 developer.google.com/web-toolkit/doc/2.4/DevGuideUiCellWidgets#celltable 上构建一个简单的 GWT 文档。我调整了一些东西来匹配 GWTP MVP 设计。

首先，我在 View.ui.xml 文件上创建了 Celltable：

```
xmlns:c="urn:import:com.google.gwt.user.cellview.client">
<g:HTMLPanel>
     <c:CellTable pageSize='15' ui:field='cellTable' />
</g:HTMLPanel> 
```

然后，我创建了一个联系人类：

```
public class Contact {
    private final String address;
    private final String name;

    public Contact(String name, String address) {
      this.name = name;
      this.address = address;
    }

    public String getAddress() {
        return address;
    }

    public String getName() {
        return name;
    }
} 
```

在我的 View.java 文件中：

```
@UiField(provided=true) CellTable<Contact> cellTable = new CellTable<Contact>();

public CellTable<Contact> getCellTable() {
     return cellTable;
} 
```

最后在我的 Presenter.java 文件中：

```
public interface MyView extends View {
   CellTable<Contact> getCellTable();
}

@Override
protected void onReset() {
    super.onReset();

    // Create name column.
    TextColumn<Contact> nameColumn = new TextColumn<Contact>() {
          @Override
          public String getValue(Contact contact) {
            return contact.getName();
          }
        };

    // Create address column.
   TextColumn<Contact> addressColumn = new TextColumn<Contact>() {
          @Override
          public String getValue(Contact contact) {
            return contact.getAddress();
          }
        };

    // Add the columns.
    getView().getCellTable().addColumn(nameColumn, "Name");
    getView().getCellTable().addColumn(addressColumn, "Address");

    // Set the total row count. 
    getView().getCellTable().setRowCount(CONTACTS.size(), true);

    // Push the data into the widget.
    getView().getCellTable().setRowData(0, CONTACTS);
} 
```

一切对我来说似乎都很好，但是当我尝试这段代码时没有显示 CellTable ......而且我没有收到任何错误......

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:05:49.680

看起来您没有为您的 CellTable 使用/注册 DataProvider。GWT CellWidgets 基于 DataProvider/DIsplay 模式。所以 CellTable 只是你的 DataProvider 的一个显示。一个 DataProvider 可以有多个显示器。

你不需要写：

```
// Set the total row count. 
getView().getCellTable().setRowCount(CONTACTS.size(), true);

// Push the data into the widget.
getView().getCellTable().setRowData(0, CONTACTS); 
```

您需要将 CellTable 注册为 DataProvider 的显示（例如 ListDataProvider），然后在使用新数据更新 DataProvider 时调用 refresh 方法。

# ruby - ruby irb 结果中缺少“=>”

> ID：11976923
> 
> 赞同：1
> 
> 时间：2012-08-15T20:40:40.357
> 
> 标签：ruby, terminal, irb, ruby-1.8

我正在为 Ruby 的 EXTREME 初学者阅读一本电子书。它一步一步地引导我，但我想确保在我继续之前我正在做这件事。

我的第一个问题是当我输入`irb`. `irb(main):001:0>`我没有像我应该做的那样，而是得到了`>>`。我终于找到了如何将提示格式更改为`inf-ruby`.

现在，我担心每行都缺少其他前缀。没有结果`=>`s 或`>`s。有人可以（非常简单地）向我解释如何“打开它们”，以便我可以将我的代码与我的书进行完全比较吗？

太感谢了。

（我在 Mac OS X 1.7、Ruby 1.8.7 上，使用终端）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T21:31:20.950

尝试

```
irb --prompt default 
```

或者

```
irb --prompt inf-ruby --readline 
```

或者这个在 irb 开始之后

```
conf.prompt_c="%N(%m):%03n:%i* "
conf.prompt_i="%N(%m):%03n:%i> "
conf.prompt_mode=:DEFAULT
conf.prompt_n="%N(%m):%03n:%i> "
conf.prompt_s="%N(%m):%03n:%i%l " 
```

还要检查`irb --help`它对使用它有很大帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:19:15.037

你跑了`irb --prompt simple`吗？

这解释了： http:
[//tagaholic.me/2009/05/29/exploring-how-to-configure-irb.html#prompt](http://tagaholic.me/2009/05/29/exploring-how-to-configure-irb.html#prompt)

# vb.net - 我将如何解析这样的文本文件并对其进行编辑

> ID：11976927
> 
> 赞同：0
> 
> 时间：2012-08-15T20:41:00.963
> 
> 标签：vb.net, file, parsing, text, edit

基本上我希望它在文本框中显示单独的数据。当文本框被编辑时，它也在文本文件中被编辑。是否可以在 vb.net 中执行此操作？如果是这样我应该使用什么方法？文本文件的格式如下：

```
[1]
Name=Bulbasaur
InternalName=BULBASAUR
Type1=GRASS
Type2=POISON
BaseStats=45,49,49,45,65,65
GenderRate=FemaleOneEighth
GrowthRate=Parabolic
BaseEXP=64
EffortPoints=0,0,0,0,1,0
Rareness=45
Happiness=70
Abilities=OVERGROW
HiddenAbility=CHLOROPHYLL
Moves=1,TACKLE,3,GROWL,7,LEECHSEED,9,VINEWHIP,13,POISONPOWDER,13,SLEEPPOWDER,15,TAKEDOWN,19,RAZORLEAF,21,SWEETSCENT,25,GROWTH,27,DOUBLEEDGE,31,WORRYSEED,33,SYNTHESIS,37,SEEDBOMB
EggMoves=AMNESIA,CHARM,CURSE,ENDURE,GIGADRAIN,GRASSWHISTLE,INGRAIN,LEAFSTORM,MAGICALLEAF,NATUREPOWER,PETALDANCE,POWERWHIP,SKULLBASH,SLUDGE
Compatibility=1,7
StepsToHatch=5355
Height=0.7
Weight=6.9
Color=Green
Habitat=Grassland
Kind=Seed
Pokedex=Bulbasaur can be seen napping in bright sunlight. There is a seed on its back. By soaking up the sun's rays, the seed grows progressively larger.
BattlerPlayerY=0
BattlerEnemyY=25
BattlerAltitude=0
Evolutions=IVYSAUR,Level,16
[2]
Name=Ivysaur
InternalName=IVYSAUR
Type1=GRASS
Type2=POISON
BaseStats=60,62,63,60,80,80
GenderRate=FemaleOneEighth
GrowthRate=Parabolic
BaseEXP=141
EffortPoints=0,0,0,0,1,1
Rareness=45
Happiness=70
Abilities=OVERGROW
HiddenAbility=CHLOROPHYLL
Moves=1,TACKLE,1,GROWL,1,LEECHSEED,3,GROWL,7,LEECHSEED,9,VINEWHIP,13,POISONPOWDER,13,SLEEPPOWDER,15,TAKEDOWN,20,RAZORLEAF,23,SWEETSCENT,28,GROWTH,31,DOUBLEEDGE,36,WORRYSEED,39,SYNTHESIS,44,SOLARBEAM
EggMoves=
Compatibility=1,7
StepsToHatch=5355
Height=1.0
Weight=13.0
Color=Green
Habitat=Grassland
Kind=Seed
Pokedex=To support its bulb, Ivysaur's legs grow sturdy. If it spends more time lying in the sunlight, the bud will soon bloom into a large flower.
BattlerPlayerY=0
BattlerEnemyY=21
BattlerAltitude=0
Evolutions=VENUSAUR,Level,32 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T21:36:08.700

这看起来像一个 INI 文件。在这种情况下，您可以使用 Windows 中内置的 INI 解析器。请参阅[GetPrivateProfileString](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724353%28v=vs.85%29.aspx) ( [pinvoke sig](http://www.pinvoke.net/default.aspx/kernel32.getprivateprofilestring) ) 和[WritePrivateProfileString](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725501%28v=vs.85%29.aspx) ( [pinvoke sig](http://www.pinvoke.net/default.aspx/kernel32/WritePrivateProfileString.html) )

# android - 在 Android 中通过三角测量收到错误的位置

> ID：11976930
> 
> 赞同：2
> 
> 时间：2012-08-15T20:41:18.093
> 
> 标签：android, geolocation, triangulation

这有点宽泛，但我们开始吧：我的三角测量算法出现了一个非常奇怪的问题。有时，它返回正确的纬度/经度，然后，一段时间后，它返回错误的纬度/经度。更奇怪的是，我无法预测何时会发生此错误，也无法重现它。即使我没有更改代码中的行（收到正确的值，然后是错误的，然后是正确的，等等......），它也会发生。

我正在使用 google GLM 服务，将设备 LAC（位置区号）和 Tower ID 发送到三角我的位置。我的算法的核心方法如下：

```
private double[] getPositionByTriangle(int lac, int cid) {
    int shortcid = cid & 0xffff;
    double location[] = new double[2];
    try {
        String surl = "http://www.google.com/glm/mmap";
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(surl);
        httppost.setEntity(new CellIDRequestEntity(shortcid, lac));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        DataInputStream dis = new DataInputStream(entity.getContent());
        // Read some prior data
        dis.readShort();
        dis.readByte();
        // Read the error-code
        int errorCode = dis.readInt();
        if (errorCode == 0) {
            location[0] = (double) dis.readInt() / 1000000D;
            location[1] = (double) dis.readInt() / 1000000D;
        }
    } catch (Exception e) {}
    return location;
} 
```

**额外信息，可能会有所帮助**：此方法用于扩展 Android 服务的类中，通过 PendingIntent 延迟 1 分钟调用。调用它的线程将纬度/经度值保存在 SharedPreferences 中，然后我在所有视图中使用它。

我想知道我是否使用错误的算法实现了该方法，或者我错过了过程中的技巧。目前，我正确的近似纬度/经度值为**latitude = -23**和**longitude = -46**，但我（有时）收到**latitude = 17**和**longitude = 81**的值。有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:48:37.330

好吧。我自己找到了解决方案。开始了。三角测量过程基本上是一个三参数组合过程。根据我所做的一些搜索，我推断您可以使用不同类型的数据组合。我使用的组合是与塔 ID（设备握手的塔收发器）、位置代码（区号和国家代码）和位置区号的组合。因此，我的新代码如下所示：

 **```
TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
GsmCellLocation.requestLocationUpdate();
location = (GsmCellLocation) tm.getCellLocation();
networkOperator = tm.getNetworkOperator();
cellID = location.getCid();
lac = location.getLac();

public double[] getLocationByMCCMNC(String mcc, String mnc, String lac, String cellId, boolean requestAddress) throws IOException {

    final String data = "{\"cell_towers\": [{\"location_area_code\": \""
        + lac + "\", \"mobile_network_code\": \"" + mnc
        + "\", \"cell_id\": \"" + cellId
        + "\", \"mobile_country_code\": \"" + mcc
        + "\"}], \"version\": \"1.1.0\", \"request_address\": \""
        + requestAddress + "\"}";

    URL anUrl = new URL("https://www.google.com/loc/json");
    HttpURLConnection conn = (HttpURLConnection) anUrl.openConnection();

    conn.setRequestMethod("GET");
    conn.setDoOutput(true);
    conn.setDoInput(true);
    conn.setUseCaches(false);
    conn.setAllowUserInteraction(false);
    conn.setRequestProperty("Content-type", "application/jsonrequest");

    OutputStream out = conn.getOutputStream();
    out.write(data.getBytes());
    out.close();

    InputStream in = conn.getInputStream();

    StringBuilder builder = new StringBuilder();
    Reader reader = new InputStreamReader(in);
    char[] buf = new char[1024];
    int read = 0;
    while ((read = reader.read(buf)) >= 0) {
        builder.append(String.valueOf(buf, 0, read));
    }
    in.close();
    conn.disconnect();

    double location[] = new double[2];
    try {
        JSONObject loc = new JSONObject(builder.toString()).getJSONObject("location");
        location[0] = Double.valueOf(loc.getDouble("latitude"));
        location[1] = Double.valueOf(loc.getDouble("longitude"));
    } catch (JSONException e) {
        location[0] = -1;
    location[1] = -1;
    }
    return location;
} 
```*  *使用这个新代码，请注意我使用的是 Google Location JSON 服务，它返回一个 JSON 对象。我应该说这是一个非常棘手的问题，我需要更多地搜索以了解所有机制，但至少，这是一个有效的代码。希望它可以帮助某人。

**更新：我还想在以下情况下完成此答案：三角测量通过移动网络（GSM、UMTS、LTE 等）使用无线电接入。我现在很确定这些价值波动来自无线电波对环境（墙壁、建筑物、相邻的塔楼等）有很大干扰的事实****

# c# - c# google spreadhseets 输入特定单元格

> ID：11976933
> 
> 赞同：3
> 
> 时间：2012-08-15T20:41:36.287
> 
> 标签：c#, google-sheets, gdata-api, google-docs

我正在尝试使用 C# 写入 Google 电子表格中的特定单元格，而不必搜索每个单元格并查看它是否是正确的单元格。例如，我不想为了写入 A1 而搜索以查看“A1”是否在工作表中所有单元格的标题中。在其他编程语言（python）中，我找到了很多如何做到这一点的示例，但我在 C# 中找不到相同的方法。我该怎么做：

```
cell[1,1].value = "JoMama"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T22:04:02.277

```
/// <summary>
    /// Updates a single cell in the specified worksheet.
    /// </summary>
    /// <param name="service">an authenticated SpreadsheetsService object</param>
    /// <param name="entry">the worksheet to update</param>
    private static void UpdateCell(SpreadsheetsService service, WorksheetEntry entry)
    {
        AtomLink cellFeedLink = entry.Links.FindService(GDataSpreadsheetsNameTable.CellRel, null);
        CellQuery query = new CellQuery(cellFeedLink.HRef.ToString());
        Console.WriteLine();

        Console.Write("Row of cell to update? ");
        string row = Console.ReadLine();

        Console.Write("Column of cell to update? ");
        string column = Console.ReadLine();

        query.MinimumRow = query.MaximumRow = uint.Parse(row);
        query.MinimumColumn = query.MaximumColumn = uint.Parse(column);

        CellFeed feed = service.Query(query);
        CellEntry cell = feed.Entries[0] as CellEntry;

        Console.WriteLine();
        Console.WriteLine("Current cell value: {0}", cell.Cell.Value);
        Console.Write("Enter a new value: ");
        string newValue = Console.ReadLine();

        cell.Cell.InputValue = newValue;
        AtomEntry updatedCell = cell.Update();

        Console.WriteLine("Successfully updated cell: {0}", updatedCell.Content.Content);
    } 
```

# sql-server - 列索引和 sql profiler

> ID：11976945
> 
> 赞同：1
> 
> 时间：2012-08-15T20:42:19.420
> 
> 标签：sql-server, sql-server-profiler

我启用了 sql profiler 并确定了几个需要很长时间才能执行的查询。

例如：

```
Select A from table_A where B = 2 
```

我的问题是，基于上述查询，我​​是在 A 列还是 B 列上创建索引？还是A和B？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:46:05.493

您的索引应该在 B 上，因为这就是您的情况。您可能会从尝试所有方法并查看生成的[执行计划](http://msdn.microsoft.com/en-us/library/ms178071%28v=sql.105%29.aspx)中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:46:14.747

我会在 B 列上创建一个索引，因为这就是 sql server 进行比较的原因。之后我会再次运行分析器以查看添加索引是否会对其他查询产生负面影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:56:44.787

`B`包含列的索引`A`。`B`where 可以在仍然返回时使用 seek on `A`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T03:48:23.630

在 B 和 A 上创建单独的索引。在 A 上创建索引是为了避免 KEY LOOKUP。

# c# - 在 C#/.NET 中，为什么 sbyte[] 与 byte[] 相同，但它不是？

> ID：11976969
> 
> 赞同：51
> 
> 时间：2012-08-15T20:44:10.390
> 
> 标签：c#

我刚刚在 C#/.NET 中观察到一个奇怪的现象。

我创建了这个最小的例子来演示：

```
if (new sbyte[5] is byte[])
{
 throw new ApplicationException("Impossible!");
}

object o = new sbyte[5];

if (o is byte[])
{
 throw new ApplicationException("Why???");
} 
```

这将抛出“Why???”，但不会抛出“Impossible!”。它适用于所有相同大小的整数类型数组。谁可以给我解释一下这个？我很困惑。顺便说一句，我正在使用.NET 4。

PS：我知道我可以通过使用`o.GetType() == typeof(byte[])`.

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-15T20:49:31.423

CLR 的强制转换规则指定这是可能的。C# 规则说这是不可能的。[C# 团队出于各种原因有意识地决定](http://blogs.msdn.com/b/ericlippert/archive/2009/09/24/why-is-covariance-of-value-typed-arrays-inconsistent.aspx)他们将容忍这种与规范的偏差。

为什么 CLR 允许这样做？可能是因为他们可以方便地实现它。`byte`并`sbyte`具有相同的二进制表示，因此您可以将 a`byte[]`视为 a`sbyte[]` **而不会违反内存安全性**。

相同的技巧适用于具有相同内存布局的其他原始类型。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-15T20:51:44.480

有趣的是，我在我的问题中被这个问题所困扰，[为什么使用 ToList 时这个 Linq Cast 会失败？](https://stackoverflow.com/questions/11039479/why-does-this-linq-cast-fail-when-using-tolist)

[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)（当然）解释说我的问题是 C# 编译器，无论出于何种原因，认为它们永远不会是同一件事，并有助于将其优化为 false。但是，CLR*确实*让这种情况发生。转换为对象会引发编译器优化，因此它会通过 CLR。

[他回答](https://stackoverflow.com/a/11039703/492405)的相关部分：

> 即使在 C# 中不能直接将 byte[] 转换为 sbyte[]，CLR 也允许：

```
var foo = new byte[] {246, 127};
// This produces a warning at compile-time, and the C# compiler "optimizes"
// to the constant "false"
Console.WriteLine(foo is sbyte[]);

object x = foo;
// Using object fools the C# compiler into really consulting the CLR... which
// allows the conversion, so this prints True
Console.WriteLine(x is sbyte[]); 
```

* * *

Joel 在评论中问了一个有趣的问题，“这种行为是否由优化代码标志（`/o`对编译器）控制？”

鉴于此代码：

```
static void Main(string[] args)
{
    sbyte[] baz = new sbyte[0];
    Console.WriteLine(baz is byte[]);
} 
```

并用`csc /o- Code.cs`（不要优化）编译，看来编译器无论如何都会优化它。生成的 IL：

```
IL_0000:  nop
IL_0001:  ldc.i4.0
IL_0002:  newarr     [mscorlib]System.SByte
IL_0007:  stloc.0
IL_0008:  ldc.i4.0
IL_0009:  call       void [mscorlib]System.Console::WriteLine(bool)
IL_000e:  nop
IL_000f:  ret 
```

IL_0008 将 0（假）直接加载到堆栈上，然后调用`WriteLine`IL_0009。所以不，优化标志没有任何区别。如果要咨询 CLR，`isinst`则将使用该指令。从 IL_0008 开始，它可能看起来像这样：

```
IL_0008:  ldloc.0
IL_0009:  isinst     uint8[]
IL_000e:  ldnull
IL_000f:  cgt.un
IL_0011:  call       void [mscorlib]System.Console::WriteLine(bool) 
```

我同意优化器的行为。优化标志不应改变程序的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T06:47:44.337

VB.NET 实际上在*编译*时“抛出”：

> “SByte 的一维数组”类型的表达式永远不能是“Byte 的一维数组”类型。

相当于第一个`if`语句。

并且第二个的等效项`if`在运行时按预期成功（即它抛出编码的异常），因为它是相同的 CLR。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T14:48:05.257

这是一个更简单的示例，显示了相同的问题：

```
static void Main(string[] args)
{
    bool a = ((object) new byte[0]) is sbyte[];
    bool b = (new byte[0]) is sbyte[];

    Console.WriteLine(a == b); // False
} 
```

出现不一致是因为 C# 编译器决定它`(new byte[0]) is sbyte[]`在编译时知道`false`. 也许它应该真正替代`true`，以与 CLR 行为更加一致。

据我所知，只有这个小小的优化是不一致的。仅当`is`表达式的两边都静态类型为数组，其元素类型为有符号或无符号整数或枚举，并且整数的大小相同时，才会发生这种情况。

好消息是，虽然这看起来不一致，但 C# 在替换`false`此类表达式时总是会发出警告——实际上，我认为这可能比安静地返回更有用`true`。

# android - 在模拟器中启动应用程序时调用 onDestroy

> ID：11976970
> 
> 赞同：1
> 
> 时间：2012-08-15T20:44:14.333
> 
> 标签：android

我正在模拟器中启动我的应用程序并看到`onDestroy()`对启动活动的调用。Android doc 似乎建议`onDestroy()`仅在应用停止时调用。还有其他情况可以调用吗？它给我的应用程序带来了问题，因为我正在关闭`onDestroy()`方法中的执行程序（它是在类加载时创建的）。然后第一次尝试使用执行器会抛出一个`RejectedExecutionException`. 我猜这是因为我已经关闭了它。

智慧欣然接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:56:25.990

onDestroy() 仅在您的应用程序关闭时被调用。以下是您可以尝试的一些事情：

1.  你删除代码以完全关闭执行程序会发生什么？
2.  如果将代码移到 onStop() 会发生什么？
3.  您确定没有在您的设备上已经运行的应用程序的先前实例上调用 onStop()。（即您安装应用程序，进行更改，再次安装，第一个必须停止。）

# css - 仅样式第一级菜单

> ID：11976971
> 
> 赞同：0
> 
> 时间：2012-08-15T20:44:21.600
> 
> 标签：css, menu, navigation, descendant

要设置菜单的第一级样式，我认为这段代码可以工作：

[http://jsfiddle.net/2g36L/1/](http://jsfiddle.net/2g36L/1/)

谁能指出我哪里出错了，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:46:33.823

确实如此，但是由于您没有为其他元素赋予其他颜色，因此它们继承了您赋予顶部`<ul>`元素的颜色。如果你给另一个`<ul>`颜色，它工作正常。

**[jsFiddle 示例。](http://jsfiddle.net/j08691/2g36L/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T20:48:13.453

颜色是一个继承的 CSS 特征，因此即使您只为 div 下的直接 UL 声明它，它也被嵌套元素继承。

# drupal - 从 Drupal 6 导出特定用户的内容

> ID：11976975
> 
> 赞同：0
> 
> 时间：2012-08-15T20:44:35.727
> 
> 标签：drupal, data-migration

我是 Drupal 的新手。我正在与一个已有的网站合作，该网站有几十个员工博客作者。一些博主需要将他们的所有帖子迁移到数据库中（他们将被导入到的 CMS 尚不清楚）。

我已经研究了一些用于备份的模块，但它们似乎没有能力选择确切导出的内容。

如果有人可以给我一些建议或指导我到合适的模块，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:36:02.733

您可以使用[视图](http://drupal.org/project/views/)和[视图数据导出](http://drupal.org/project/views_data_export/)模块轻松完成此操作。但是，在使用数据导出模块之前，您需要了解一些关于视图的知识。您可以按照一些快速教程进行操作。您不需要任何编码技能，而是专注于 Views UI、Filters 和 Arguments。

在节点上创建一个视图作为主要内容，并为 User: UID 添加一个过滤器（如果您想从 URL 中获取用户 ID，则添加一个参数）并添加您希望作为字段公开的字段。然后，在样式设置中，选择“数据导出”。创建一个页面显示并给它一个路径。

您还可以使用暴露的过滤器使表单高级。

# php - 22秒是在mysql中插入500行的好时机吗？

> ID：11976989
> 
> 赞同：3
> 
> 时间：2012-08-15T20:45:20.860
> 
> 标签：php, mysql

以下 php 脚本大约需要 22 秒才能执行。正常吗？如果不是什么会导致它执行缓慢？

```
$conn = mysql_connect('localhost', 'root', '123');
mysql_select_db('mydb', $conn);
$time1 = time();
for ($i=1;$i<500;$i++) {
mysql_query("Insert into accounts(id, username, email, password) VALUES(\"$i\", \"$i\",\"$i\",NOW())");
}
print time() - $time1; // return ~22 
```

编辑：表结构：

```
CREATE TABLE IF NOT EXISTS `accounts` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(20) NOT NULL,
  `email` varchar(200) NOT NULL,
  `password` varchar(20) NOT NULL,
  `status` varchar(10) DEFAULT 'pending',
  `email_newsletter_status` varchar(3) DEFAULT 'out',
  `email_type` varchar(4) DEFAULT 'text',
  `email_favorite_artists_status` varchar(3) DEFAULT 'out',
  `created_date` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7500 ; 
```

这段代码只是为了测试插入速度。使用 Zend 框架（Zend_Db 的插入方法）我得到了类似的结果，所以我认为它与 mysql 相关而不是 php 代码

Edit2：我知道执行这个查询有很多更好的方法，但我想知道为什么这个查询这么慢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T20:48:30.200

22秒是很长的时间。我的猜测是每次插入后，索引都需要更新。

尝试将其作为交易来执行。

```
mysql_query("START TRANSACTION");
for ($i=1;$i<500;$i++) {
    mysql_query("Insert into accounts(id, username, email, password) VALUES(\"$i\", \"$i\",\"$i\",NOW())");
}
mysql_query("COMMIT"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T20:48:43.850

与其运行多个插入语句，不如将它们批处理并作为一个语句执行

```
 INSERT INTO example
  (example_id, name, value, other_value)
VALUES
  (100, 'Name 1', 'Value 1', 'Other 1'),
  (101, 'Name 2', 'Value 2', 'Other 2'),
  (102, 'Name 3', 'Value 3', 'Other 3'),
  (103, 'Name 4', 'Value 4', 'Other 4'); 
```

这将大大加快您的插入速度

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T20:54:43.870

如果你使用股票，`my.cnf`你的表现可能会很糟糕。您可能想查看您的 MySQL 是如何配置的并相应地调整参数。调优 InnoDB 是更好的引擎，需要调整与 MyISAM 不同的值，MyISAM 通常是快速但不安全的默认值。

如果这些查询需要大量时间来执行，请尝试使用 MySQL 管理员工具查看或`SHOW PROCESSLIST`频繁执行以查看引擎在做什么。

在这样一个简单的表上，直接通过 MySQL 驱动程序插入 500 条记录最多只需要几秒钟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T20:51:02.047

尝试单个插入查询：

```
$valStr = "";
for ($i=1;$i<500;$i++) {
    $valStr = $valStr . ($valStr == "" ? "" : ", ") . "('$i', '$i', '$i', NOW())";
}
if ($valStr != "") {
    mysql_query("Insert into accounts(id, username, email, password) VALUES $valStr");
} 
```

此外，您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)。

# php - facebook 应用程序在使用 https url 时出错

> ID：11976992
> 
> 赞同：1
> 
> 时间：2012-08-15T20:45:27.393
> 
> 标签：php, facebook, facebook-graph-api

我在 iframe Facebook 中创建了应用程序。当我访问[apps.facebook.com/samkhkhkh/](http://apps.facebook.com/samkhkhkh/) itz 工作但当我访问[https://apps.facebook.com/samkhkhkh/](https://apps.facebook.com/samkhkhkh/)时出现此错误

> 此网页无法使用。[https://bluesoften.com/sample/?fb_source=bookmark_apps&ref=bookmarks&count=0&fb_bmpos=3_0](https://bluesoften.com/sample/?fb_source=bookmark_apps&ref=bookmarks&count=0&fb_bmpos=3_0)
> 上的网页 可能暂时关闭，或者它可能已永久移至新网址。 错误 501 (net::ERR_INSECURE_RESPONSE)：未知错误。

# templates - 从 vbulletin 注销并更改模板

> ID：11976993
> 
> 赞同：0
> 
> 时间：2012-08-15T20:45:33.923
> 
> 标签：templates, logout, vbulletin

我的问题：当我从 vbulletin 注销时，我的模板更改为默认模板。为什么？谢谢谁回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:09:53.433

客人似乎无法使用您的自定义样式。检查下一项：

1.  将您的自定义样式设置为默认样式：ACP - vBulletin 选项 - vBulletin 选项 - 样式和语言设置 - 允许用户更改样式 - 默认样式

2.  如果您需要，请确保用户可以更改样式：ACP - vBulletin 选项 - vBulletin 选项 - 样式和语言设置 - 允许用户更改样式 - 是

3.  请务必在此处检查您的自定义样式：ACP - 样式和模板 - 样式管理器

# c# - 起订量并抛出 SqlException

> ID：11976996
> 
> 赞同：38
> 
> 时间：2012-08-15T20:45:58.830
> 
> 标签：c#, .net, unit-testing, mocking, moq

我有以下代码来测试当某个名称被传递给我的方法时，它会抛出一个 SQL 异常（这是有原因的，尽管听起来有点奇怪）。

```
 mockAccountDAL.Setup(m => m.CreateAccount(It.IsAny<string>(), 
"Display Name 2", It.IsAny<string>())).Throws<SqlException>(); 
```

但是，这不会编译，因为 SqlException 的构造函数是内部的：

> 'System.Data.SqlClient.SqlException' 必须是具有公共无参数构造函数的非抽象类型，才能将其用作泛型类型或方法 'Moq.Language.IThrows.Throws()' 中的参数 'TException'

现在，我可以将其更改为声明它应该 throw `Exception`，但这对我不起作用，因为如果它是 a ，我的方法应该返回一个状态码，`SqlException`如果它是任何其他异常，则返回另一个状态码。这就是我的单元测试正在测试的内容。

有没有办法在不改变我正在测试的方法的逻辑或不测试这个场景的情况下实现这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2015-04-29T09:31:48.467

`Number`如果您需要异常的or属性的测试用例`Message`，您可以使用如下构建器（使用反射）：

```
using System;
using System.Data.SqlClient;
using System.Linq;
using System.Reflection;

public class SqlExceptionBuilder
{
    private int errorNumber;
    private string errorMessage;

    public SqlException Build()
    {
        SqlError error = this.CreateError();
        SqlErrorCollection errorCollection = this.CreateErrorCollection(error);
        SqlException exception = this.CreateException(errorCollection);

        return exception;
    }

    public SqlExceptionBuilder WithErrorNumber(int number)
    {
        this.errorNumber = number;
        return this;
    }

    public SqlExceptionBuilder WithErrorMessage(string message)
    {
        this.errorMessage = message;
        return this;
    }

    private SqlError CreateError()
    {
        // Create instance via reflection...
        var ctors = typeof(SqlError).GetConstructors(BindingFlags.NonPublic | BindingFlags.Instance);
        var firstSqlErrorCtor = ctors.FirstOrDefault(
            ctor =>
            ctor.GetParameters().Count() == 7); // Need a specific constructor!
        SqlError error = firstSqlErrorCtor.Invoke(
            new object[] 
            { 
                this.errorNumber, 
                new byte(), 
                new byte(), 
                string.Empty, 
                string.Empty, 
                string.Empty, 
                new int() 
            }) as SqlError;

        return error;
    }

    private SqlErrorCollection CreateErrorCollection(SqlError error)
    {
        // Create instance via reflection...
        var sqlErrorCollectionCtor = typeof(SqlErrorCollection).GetConstructors(BindingFlags.NonPublic | BindingFlags.Instance)[0];
        SqlErrorCollection errorCollection = sqlErrorCollectionCtor.Invoke(new object[] { }) as SqlErrorCollection;

        // Add error...
        typeof(SqlErrorCollection).GetMethod("Add", BindingFlags.NonPublic | BindingFlags.Instance).Invoke(errorCollection, new object[] { error });

        return errorCollection;
    }

    private SqlException CreateException(SqlErrorCollection errorCollection)
    {
        // Create instance via reflection...
        var ctor = typeof(SqlException).GetConstructors(BindingFlags.NonPublic | BindingFlags.Instance)[0];
        SqlException sqlException = ctor.Invoke(
            new object[] 
            { 
                // With message and error collection...
                this.errorMessage, 
                errorCollection,
                null,
                Guid.NewGuid() 
            }) as SqlException;

        return sqlException;
    }
} 
```

然后您可以让存储库模拟（例如）抛出这样的异常（此示例使用`Moq`库）：

```
using Moq;

var sqlException = 
    new SqlExceptionBuilder().WithErrorNumber(50000)
        .WithErrorMessage("Database exception occured...")
        .Build();
var repoStub = new Mock<IRepository<Product>>(); // Or whatever...
repoStub.Setup(stub => stub.GetById(1))
    .Throws(sqlException); 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-08-15T21:11:12.557

这应该有效：

```
using System.Runtime.Serialization;

var exception = FormatterServices.GetUninitializedObject(typeof(SqlException)) 
                as SqlException;

mockAccountDAL.Setup(m => m.CreateAccount(It.IsAny<string>(), "Display Name 2", 
                     It.IsAny<string>())).Throws(exception); 
```

但是，使用`GetUninitializedObject`有这个警告：

> 因为对象的新实例被初始化为零并且没有运行构造函数，所以该对象可能不代表该对象认为有效的状态。

如果这会导致任何问题，您可能可以使用一些更复杂的反射魔法来创建它，但这种方式可能是最简单的（如果可行的话）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-15T21:16:19.623

我刚试过这个，它对我有用：

```
private static void ThrowSqlException()
{
    using (var cxn = new SqlConnection("Connection Timeout=1"))
    {
        cxn.Open();
    }
}

// ...
mockAccountDAL.Setup(m => m.CreateAccount(It.IsAny<string>),
                     "Display Name 2", It.IsAny<string>()))
              .Callback(() => ThrowSqlException()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-28T13:56:54.673

对我来说，`SqlException`使用未初始化对象方法生成一条消息是最简单的方法：

```
const string sqlErrorMessage = "MyCustomMessage";
var sqlException = FormatterServices.GetUninitializedObject(typeof(SqlException)) as SqlException;
var messageField = typeof(SqlException).GetField("_message", BindingFlags.NonPublic | BindingFlags.Instance);
messageField.SetValue(sqlException, sqlErrorMessage); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-01T15:41:12.950

我在找到这个问题/答案之前写了这个。对于只想要具有特定编号的 SQL 异常的人可能很有用。

```
private static SqlException CreateSqlExceptionWithNumber(int errorNumber)
{
    var sqlErrorCollectionCtor = typeof(SqlErrorCollection).GetConstructor(
        BindingFlags.NonPublic | BindingFlags.Instance,
        null,
        CallingConventions.Any,
        new Type[0],
        null);

    var sqlErrorCollection = (SqlErrorCollection)sqlErrorCollectionCtor.Invoke(new object[0]);

    var errors = new ArrayList();

    var sqlError = (SqlError)FormatterServices.GetSafeUninitializedObject(typeof(SqlError));

    typeof(SqlError)
        .GetField("number", BindingFlags.NonPublic | BindingFlags.Instance)
        ?.SetValue(sqlError, errorNumber);

    errors.Add(sqlError);

    typeof(SqlErrorCollection)
        .GetField("errors", BindingFlags.NonPublic | BindingFlags.Instance)
        ?.SetValue(sqlErrorCollection, errors);

    var exception = (SqlException)FormatterServices.GetUninitializedObject(typeof(SqlException));

    typeof(SqlException)
        .GetField("_errors", BindingFlags.NonPublic | BindingFlags.Instance)
        ?.SetValue(exception, sqlErrorCollection);

    return exception;
} 
```

# ajax - 使用 iFrame 克服 AJAX 调用的同源策略

> ID：11976998
> 
> 赞同：0
> 
> 时间：2012-08-15T20:45:58.640
> 
> 标签：ajax, iframe, same-origin-policy

**问题**：Web 应用程序的一部分包含来自另一个域的另一个 Web 应用程序。由于 AJAX 请求的源策略相同，这两个 Web 应用程序都向它们发起的域发出 AJAX 请求，这会造成问题。

**解决方案：** 实现此目的的一种方法是将包含的 Web 应用程序包装在 iFrame 中。其中的 AJAX 请求进入 iFrame 的同一个域 - 这与父应用程序不同。

这对我来说听起来不错，但由于 iFrames ae 过时，还有什么其他/更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:48:01.930

您是否无法让两个应用程序都向您的域发送 AJAX 请求，并让您的服务器端执行对外部域的调用，然后将它收到的结果转发回请求客户端 App。您的服务器本质上成为 AJAX 请求的代理？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:48:32.910

你们男人有什么不合时宜的？如果你喜欢后退，你可以将高度应用到 0 并且不显示。