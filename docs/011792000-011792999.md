# StackOverflow 问答 11792000-11792999

# php - 为什么这个时间戳比较总是评估为真？

> ID：11792012
> 
> 赞同：0
> 
> 时间：2012-08-03T08:24:58.850
> 
> 标签：php, if-statement, timestamp, compare

我有以下代码来查看分配的时间是否已经过去。对于我的演示，它应该全部评估为 false，并且什么都不会发生。曾经发生的事情是它解析为真，即使我将它与 >= 进行比较

为什么我会出现这种奇怪的行为？

```
$data = '[{"ip":"80.61.150.173","endtime":1343988643},{"ip":"80.61.150.173","endtime":1343988649},{"ip":"80.61.150.173","endtime":1343988650},{"ip":"80.61.150.173","endtime":1343988664},{"ip":"80.61.150.173","endtime":1343988682},{"ip":"80.61.150.173","endtime":1343988723}]';
$json = json_decode($data,true);
foreach($json as $key => $obj)
    {
    var_dump($obj);
    echo "<BR>";
    var_dump(time());
    echo "<BR>";
    if($obj['endtime'] <= time());
        {
        echo "<BR>bliep<P>";
        }
    } 
```

此代码计算结果如下：

> 数组（2）{[“ip”]=>字符串（13）“80.61.150.173”[“endtime”]=>int（1343988643）}
> int（1343981967）
> 
> bliep array(2) { ["ip"]=> string(13) "80.61.150.173" ["endtime"]=> int(1343988649) }
> int(1343981967)
> 
> 哔哔
> 
> 数组（2）{[“ip”]=>字符串（13）“80.61.150.173”[“endtime”]=>int（1343988650）}
> int（1343981967）
> 
> 哔哔
> 
> 数组（2）{[“ip”]=>字符串（13）“80.61.150.173”[“endtime”]=>int（1343988664）}
> int（1343981967）
> 
> 哔哔
> 
> 数组(2) { ["ip"]=> 字符串(13) "80.61.150.173" ["endtime"]=> int(1343988682) }
> int(1343981967)
> 
> 哔哔
> 
> 数组（2）{[“ip”]=>字符串（13）“80.61.150.173”[“endtime”]=>int（1343988723）}
> int（1343981967）
> 
> 哔哔

正如你所看到的，那里有所有不应该存在的哔哔声。时间戳是整数，当前时间小于保存时间。它应该很容易比较，但它总是评估为真，而现在 < 比存储的时间戳。

这里发生了什么？

[这不是我的服务器，因为此代码在http://writecodeonline.com/php/](http://writecodeonline.com/php/)上的计算结果也为 true

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:27:19.687

`;`如果您的`if`陈述，我相信最后有一个错字。

应该是

```
if($obj['endtime'] <= time()); 
```

代替

```
if($obj['endtime'] <= time()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:28:25.787

因为

```
if($obj['endtime'] <= time()); 
```

应该

```
if($obj['endtime'] <= time())//without the semicolon 
```

* * *

尽管您有答案，但我认为很高兴知道为什么它没有引发错误。

本质上`if($obj['endtime'] <= time());`被解释为*短*的或单行的 if 语句：

```
if($obj['endtime'] <= time())
    echo 'foo';
else
    echo 'bar'; 
```

但是由于语句和分号之间没有语句`if`，php 将继续执行，并且 - 相当烦人的 IMO - 忽略花括号。我不确定这一点，但如果你`else{}`在下一行有一个，你可能会得到一个错误......
一个很好的例子，说明对各种语法的支持如何让你头疼。也就是说，我喜欢你的编码风格，在新行上保持打开和关闭卷曲。提高可读性恕我直言。

# php - 我可以在表单生成器中使用查询来获取 symfony 表单中的过滤集合吗

> ID：11792015
> 
> 赞同：13
> 
> 时间：2012-08-03T08:25:18.010
> 
> 标签：php, forms, symfony, doctrine-orm

在 AcmePizza BUndle 中，这工作正常

```
->add('pizza', 'entity', array(
                'class'         => 'Acme\PizzaBundle\Entity\Pizza',
                'query_builder' => function ($repository) { return $repository->createQueryBuilder('p')->orderBy('p.name', 'ASC'); },
            )) 
```

我可以在收藏中做类似的事情吗

```
->add('userTasks','collection',array('type' => new UserTaskType(),
                    'class'         => 'acme\myBundle\Entity\UserTask',
                    'query_builder' => function ($repository) { return $repository->createQueryBuilder('p')->orderBy('p.name', 'ASC'); },
                )) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T03:35:45.357

[假设您的 userTasks 是一种关系，您将在此处](https://stackoverflow.com/questions/12478583/how-to-orderby-on-onetomany-manytoone)找到您的案例的答案。这些只是如何排序，但如果您需要一些 WHERE 条件，它并不是那么简单，但也不难。

我不得不过滤掉一些实体，解决它的关键是在返回所需集合的实体类中创建 set/get 方法。

就我而言，它看起来像这样

```
/**
 * Set values
 *
 * @param ArrayCollection $values
 * @return Attribute
 */
public function setCustomValues($values)
{
    $result = $this->getNotCustomValues();
    foreach ($values as $value)
    {
        $value->setAttribute($this);
        $result->add($value);
    }
    $this->values = $result;

    return $this;
}

/**
 * Get values
 *
 * @return \Doctrine\Common\Collections\Collection
 */
public function getCustomValues()
{
    $result = new ArrayCollection();
    foreach ($this->values as $value) {
        if($value->getCustom()) {
            $result->add($value);
        }
    }
    return $result;
} 
```

在创建表单时，字段的名称是“customvalues”而不是“values”所以我的集合只包含自定义字段为 true 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-05T16:12:29.910

当你更新一个实体时，你经常想要过滤集合，而不是一个新的，对吧？

这是一个可行的解决方案，这是来自控制器（CRUD）的示例：

```
public function updateAction($id)
{
    $service = $this->getServiceRepository()->loadOne('id', $id);
    $this->checkPermission($service);

    $this->filterInventoryByPrimaryLocation($service);

    if($this->getFormHandler()->process('service_repair_service', $service, array('type' => 'update')))
    {
        $this->getEntityManager()->process('persist', $service);

        return $this->render('ServiceRepairBundle:Service:form_message.html.twig', [
            'message' => $this->trans('Service has been updated successfully.')
        ]);
    }

    return $this->render('ServiceRepairBundle:Service:form.html.twig', [
        'form' => $this->getFormHandler()->getForm()->createView(),
    ]);
}

private function filterInventoryByPrimaryLocation(Service $service)
{
    $inventory = $service->getInventory();

    $criteria = Criteria::create()
        ->where(Criteria::expr()->eq('location', $this->getUser()->getPrimaryLocation()))
        ->orderBy(array('timeInsert' => Criteria::ASC));

    $service->setInventory($inventory->matching($criteria));
} 
```

$service = ENTITY, $inventory = ArrayCollection ($service->getInventory())

这里的关键是使用 Doctrine's Criteria，更多信息在这里：

[http://doctrine-orm.readthedocs.org/en/latest/reference/working-with-associations.html#filtering-collections](http://doctrine-orm.readthedocs.org/en/latest/reference/working-with-associations.html#filtering-collections)

还可以考虑将 Criteria 移动到实体本身，在那里创建一个公共方法。当您从数据库加载它时，您可以使用学说的 postLoad 生命周期回调触发该方法。如果您不需要任何服务或类似的东西，当然将其放入实体中会起作用。

如果您只需要在表单内进行过滤，则另一种解决方案可能是在 Form 类内的 Form Event 中移动 Criteria。

如果您需要在整个项目中透明地完成集合过滤，请编写一个学说监听器并将代码放在 postLoad() 方法中。您也可以在学说监听器中注入依赖项，但我建议注入容器本身，因为延迟加载其他服务，所以您不会得到循环服务引用。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T19:11:16.233

我指出你正确的方向（我希望）：

[http://www.craftitonline.com/2011/08/symfony2-ajax-form-republish/](http://www.craftitonline.com/2011/08/symfony2-ajax-form-republish/)

本文处理字段依赖关系。例如，当您选择一个国家/地区时，您将拥有属于该国家/地区的城镇出现在列表中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-11T08:44:15.943

在 Symfony 2.7 中，我通过在**UserTaskType**中执行以下操作解决了这个问题：

```
<?php

namespace AppBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolver;
use Doctrine\ORM\EntityRepository;

class UserTaskType extends AbstractType
{

    /**
     * @param FormBuilderInterface $builder
     * @param array $options
     */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {

        $builder
            ->add('the_name', 'entity', array(
                'class' => 'acme\myBundle\Entity\UserTask',
                'query_builder' => function (EntityRepository $er) {
                    return $er->createQueryBuilder('u')
                        ->where('u.id > :id')
                        ->setParameter('id', '1')
                        ->orderBy('u.username', 'ASC');
                },
            ));
    }

    /**
     * @param OptionsResolver $resolver
     */
    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'acme\myBundle\Entity\UserTask',
        ));
    }

} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-07T00:18:32.450

是的。

在您的 UserTaskType 类中，添加以下方法。

```
public function getDefaultOptions(array $options)
{
    return array(
        'data_class' => 'acme\myBundle\Entity\UserTask',
        'query_builder' => function($repo) {
            return $repo->createQueryBuilder('p')->orderBy('p.name', 'ASC');
        }
    );
} 
```

# ruby-on-rails - 设计路由块来创建用户

> ID：11792016
> 
> 赞同：0
> 
> 时间：2012-08-03T08:25:18.697
> 
> 标签：ruby-on-rails, devise

如何在 routes.rb 中定义设计登录注销。我有

```
<%= link_to 'Logout', destroy_user_session_path, :method=>'delete' %>       
 <%= link_to 'Login', new_user_session_path %> 
```

我想在管理员登录时创建其他帐户。我制作了一个表格来创建帐户但是当我提交它时显示你已经登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:36:51.483

我不确定问题到底是什么，但是如果您想首先在 routes.rb 中定义 /logout /login /register 路由，我会将 routes.rb 中的 devise_for 行编辑为：

devise_for ：用户确实
得到“登录”，：to =>“设计/会话#new”
得到“注销”，：to =>“设计/会话#destroy”
得到“注册”，：to =>“设计/注册#新”
结束

像那样......然后你可以相应地使用它们......如果这没有帮助，请重新提出问题，我可以尝试进一步提供帮助。

# c# - 如何在实体框架中访问 c ontext.Database.SqlQuery？

> ID：11792018
> 
> 赞同：3
> 
> 时间：2012-08-03T08:25:23.223
> 
> 标签：c#, sql, entity-framework

我正在尝试遵循本教程：

[http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api.aspx](http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api.aspx)

但似乎无法访问此方法，它不会出现在智能感知中

```
context.Database.SqlQuery 
```

我正在使用以下代码，但似乎无法访问 SqlQuery 方法：

```
using(Entities db = new Entities())
{    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:43:39.513

您描述的方法适用于执行 SQL 与`DbContext`EF 版本。（`DbContext`用于代码优先，也可用于模型优先，但您需要进行一些设置）。但是，在您的示例中，它应该如下所示。

```
using(Entities db = new Entities())
{   
    db.Database.SqlQuery(....);
} 
```

如果您首先使用 OOB 模型（即 edmx），那么您可能正在使用`ObjectContext`，在这种情况下，您需要执行以下操作：

```
using(Entities db = new Entities())
{   
    db.ExecuteStoreQuery<ReturnType>("...");
} 
```

请参阅：http: [//blogs.microsoft.co.il/blogs/gilf/archive/2009/11/25/execute-t-sql-statements-in-entity-framework-4.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/11/25/execute-t-sql-statements-in-entity-framework-4.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T15:16:14.940

```
return context.Database.SqlQuery<myEntityType>("mySpName {0}, {1}, {2}",
new object[] { param1, param2, param3 }); 
```

//或者

```
using(var context = new MyDataContext())
{
return context.Database.SqlQuery<myEntityType>("mySpName {0}, {1}, {2}",
new object[] { param1, param2, param3 }).ToList();
} 
```

//或者

```
using(var context = new MyDataContext())
{
object[] parameters =  { param1, param2, param3 };

return context.Database.SqlQuery<myEntityType>("mySpName {0}, {1}, {2}",
parameters).ToList();
} 
```

//或者

```
using(var context = new MyDataContext())
{  
return context.Database.SqlQuery<myEntityType>("mySpName {0}, {1}, {2}",
param1, param2, param3).ToList();
} 
```

# javascript - jQuery Validate - 在焦点/按键上触发自定义“addMethod”

> ID：11792024
> 
> 赞同：0
> 
> 时间：2012-08-03T08:25:42.290
> 
> 标签：javascript, jquery, jquery-validate

我为 jQuery Validate 创建了几个自定义验证方法。一种用于密码强度测试。我希望在第一次关注输入时触发它，以便在用户输入实时反馈时进行验证，而不是在表单提交时进行验证。

**编辑：**验证仅在提交表单时运行，我希望它在用户输入密码时运行，以便他们获得有关密码强度的实时反馈。

理想情况下，我只希望这种实时验证适用于选定的字段。即，在提交表单之前帐户电子邮件地址不应以这种方式运行，否则在他们完成输入之前它会一直提醒他们地址无效。但是，如果它只能在应用于所有元素时起作用，我会接受这种形式。

那么，是否可以在提交表单之前在 focus/keyup 上调用 jQuery Validate 附加方法？

这是我要调用的新方法。

```
$.validator.addMethod('passwordStrength', function(password, element, param) {
// add our password test to
if (typeof zxcvbn === 'function') {
    var passwordMeter = $('#' + $(element).attr('id') + 'meter');
    var passwordMeterStrength = passwordMeter.find('.strength');
    var passwordMeterTrack = passwordMeter.find('.track');
    var passwordMeterBar = passwordMeterTrack.children();
    var strengthValues = ['Very weak', 'Weak', 'Average', 'Good', 'Strong'];
    //passwordMeter

    // get values of the other inputs in this form
    var otherinputs = [];
    if (param) {
        for (var input in param['user_inputs']) {
            // get the value and add it to an array
            otherinputs.push($(param['user_inputs'][input]).val());
        }
    }

    // run the test!
    var strength = testPasswordStrength(password, otherinputs);

    // show the strength of the password
    passwordMeterStrength.text(strengthValues[strength.score]);

    // change the class of our bar. nice browsers will animate this in CSS!
    passwordMeterBar.removeClass().addClass('bar strength' + strength.score);

    // we must be two or better
    if (strength.score > 1) {
        return true;
    } else {
        return false;
    }
} else {
    console.error('strength test is not loaded');
}
 }, ''); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:09:03.123

我最终将该方法的主要工作转移到了一个由我的方法调用的单独函数中。然后我将该函数绑定到密码输入。我选择了该`input`事件，因为它在按键和更改时触发 - 它非常灵活但经常被遗忘。

```
$.validator.addMethod('passwordStrength', function(password, element, param) {
    return passwordStrength(password, element, param);
}, '');

passwordEl.on('input', passwordStrength()); 
```

`passwordStrength`和我的问题一样。

# c# - GridView 项目模板链接按钮捕获后面的代码

> ID：11792025
> 
> 赞同：0
> 
> 时间：2012-08-03T08:25:46.657
> 
> 标签：c#, asp.net, gridview, itemtemplate

我的 asp.net 项目中有一个 gridview，我使用了类似的项目模板；

```
<asp:TemplateField>
                  <ItemTemplate>
                        <asp:LinkButton ID = "lnkSil" runat="server" CommandName="bla" 
CommandArgument='<%# ((GridViewRow) Container).RowIndex %>' Text= "Sil" ></asp:LinkButton>
                  </ItemTemplate>
                  </asp:TemplateField> 
```

我想从后面的代码中捕捉到这一点，我使用了下面的代码；

```
((Button)e.Row.Cells[1].Controls[0]).Attributes.Add("onclick", "return confirm('Bu kaydi silmek istediginizden emin misiniz?')"); 
```

但我失败了我怎么能像这样在后面的代码中捕捉到这个控件

我也试过

```
((LinkButton)e.Row.Cells[1].Controls[0]).Attributes.Add("onclick", "return confirm('Bu kaydi silmek istediginizden emin misiniz?')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:44:36.597

如果您想在没有 javascript 的情况下访问事件，请使用 GridView1_RowCommand。

```
 protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
 {
     int currentRowIndex = Int32.Parse(e.CommandArgument.ToString());
     LinkButton bf = (LinkButton)gv.Rows[currentRowIndex].Cells[1].Controls[0];
     ...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:46:49.783

试试这个..

```
protected void gvMyGrid_RowDataBound(object sender, System.Web.UI.WebControls.GridViewRowEventArgs e)
 {
 if (e.Row.RowType == DataControlRowType.DataRow) {
 LinkButton lnkSil = (LinkButton)e.Row.FindControl("lnkSil");
 lnkSil.Attributes.Add("onclick", "javascript:return confirm('Bu kaydi silmek istediginizden emin misiniz?');");
     }
 } 
```

# c# - 无法设置 SMTP 服务器

> ID：11792029
> 
> 赞同：0
> 
> 时间：2012-08-03T08:26:18.567
> 
> 标签：c#, email, smtp

我在 asp.net C# 中使用“createuserwizard”制作了一个注册表单，并设置了如下所示的邮件设置。

```
 <asp:CreateUserWizard ID="userwizard" ContinueDestinationPageUrl="~/secretfiles/secret.aspx" runat="server" >
    <MailDefinition BodyFileName="register.txt" Subject="Registration Confirmation" From="amrit.enest@gmail.com" />
    </asp:CreateUserWizard> 
```

这是我的 webconfig 文件设置：

```
<system.net>

    <mailSettings>
      <smtp deliveryMethod="PickupDirectoryFromIis"/>
    </mailSettings>
  </system.net> 
```

我在 ISS 中设置了一个具有以下设置的 smtp 服务器。

电子邮件地址： **amrit.enest@gmail.com**

将电子邮件存储在取件目录中： **C:\Users\eNest-25\Desktop\emails**

现在，当我向新用户注册时，它不会从“amrit.enest@gmail.com”发送电子邮件来注册电子邮件 ID，尽管它会给出以下错误消息。

```
**Server Error in '/membership' Application.
Cannot get IIS pickup directory.** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:31:39.783

只需输入您的主机凭据应该有帮助吗？

```
 <system.net>
    <mailSettings>
      <smtp from="amrit.enest@gmail.com">
        <network host="smtp.gmail.com" port="25" userName="yourname" password="yourpass" />
      </smtp>
    </mailSettings>
 </system.net> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:36:24.840

```
<smtp deliveryMethod="SpecifiedPickupDirectory" from="amrit.enest@gmail.com">
  <specifiedPickupDirectory pickupDirectoryLocation="C:\Users\eNest-25\Desktop\emails"/>
</smtp> 
```

# php - 动态集变量

> ID：11792035
> 
> 赞同：0
> 
> 时间：2012-08-03T08:26:33.553
> 
> 标签：php, class

我在课堂上遇到动态变量问题；

```
<?
  class test {
    public static function set($key, $value) {
      self::$$key = $value; 
    }
  }
  test::set('testKey', 'testValue');
?> 
```

如何设置变量，然后访问 test::$testKey ？

一段时间以后：

```
<?
  class test {
    public static $dynamic;
    public static function set($key, $value) {
      self::$dynamic->$key = $value;
    }
    public static function __callStatic($method, $agrs) {
      echo self::$dynamic->$method;
    }
  }
  test::$dynamic = new test();
  test::set("hey", "test");
  test::hey();
?> 
```

这个解决方案怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:33:24.340

无法在 php 中创建动态静态变量。

# java - 在 SWT 中测量 CTabItems 的字体大小？

> ID：11792037
> 
> 赞同：1
> 
> 时间：2012-08-03T08:26:37.453
> 
> 标签：java, swt, font-size, ctabitem

我有一些我想要测量的 CTab 项目，特别是我需要知道实际的字体大小，这样如果我更改标签大小 - 我不会将其设置为小于字体大小。

如何在 SWT 中测量 CTabItems 的字体大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:51:43.490

```
item.getFont().getFontData()[0].getHeight() 
```

将为您提供`item`.

# graphviz - 如何生成具有相同间距的img

> ID：11792042
> 
> 赞同：1
> 
> 时间：2012-08-03T08:26:49.787
> 
> 标签：graphviz

我从这个输出生成了一个图表：

```
digraph G {
    { rank = same; 1; 2; 3; 4; 5; 6; 7; 8; 9; };
    2 -> 3 [label="hi there"];
} 
```

但是标签很长，这导致节点 2 和 3 之间的空间大于其他节点之间的空间。我怎样才能使所有其他节点之间的空间与 2 到 3 之间的空间相匹配（即，它们中最大的一个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:16:16.683

您可以使用`xlabel`而不是标签，并使用以下命令增加相同等级的节点之间的间隔`nodesep`：

> 在 dot 中，这指定了相同等级的两个相邻节点之间的最小间距，以英寸为单位。

```
digraph G {
    nodesep=0.8;
    forcelabels=true;
    { rank = same; 1; 2; 3; 4; 5; 6; 7; 8; 9; };
    2 -> 3 [xlabel="hi there"];
} 
```

# autoit - 如何使用 AutoIt v3 发送长字符串以打开程序对话框

> ID：11792043
> 
> 赞同：1
> 
> 时间：2012-08-03T08:26:50.050
> 
> 标签：autoit

我需要发送一长串输入名称来打开程序的对话框。我试过 send() 函数，但它不能完全做到这一点。我认为由于操作系统上下文切换 send() 函数将字符串的某些部分发送到另一个程序。

以下代码是我脚本的一部分：

```
$ftmp = ""
while 1
  $fname = FileReadLine($file)
  if @error = -1 then ExitLoop
  $ftmp = $ftmp & $fname & " "
WEnd  
send("^o")
WinActivate("Open Image")
sleep(100)
send($fadrs)
Sleep(200)
send("{ENTER}")
sleep(10)
send($ftmp)
Sleep(100)
send("{ENTER}") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T09:16:46.460

这是我从[Autoitscript](http://www.autoitscript.com/forum/topic/143013-how-to-send-a-long-string-to-open-dialog-of-a-program-using-autoit-v3/)得到的答案，它有效。
我们应该在发送长字符串时使用[controlsettext() 。](http://www.autoitscript.com/autoit3/docs/functions/ControlSetText.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T18:32:41.477

ControlSend() 应该是您在 Send() 的位置使用的。另外，我注意到您发送了一些 {ENTER} 击键。使用 ControlClick() 或 ControlCommand() 按下应该将您移动到下一个屏幕的按钮（这更稳定）。

Send() 类型到当前聚焦的控件。SendKeepActive() 可以帮助解决这个问题，但是它只会使当前窗口保持活动状态，而不必让您在相关控件上保持活动状态。

使用 AutoIt Window Info 工具获取 ControlSend()/ControlClick() 函数输入的每个控件的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T15:23:54.300

对不起，没看到下面已经成功回答了。我会留下这个，以防万一它帮助别人。

也许由于您只是将部分 Send() 参数放入窗口，因此您的窗口正在停用。我会尝试在每个 Send() 之前使用 WinActivate()，并且我会在 500 甚至 1000 之间放置更长的睡眠时间。我认为如果我正确理解了这个问题，那就可以了。

对不起，没看到下面已经成功回答了。我会留下这个，以防万一它帮助别人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T02:09:33.910

我知道还有其他几个答案，但我认为我的答案可能会更好一点？开始：

```
;send a large string of text instantaneously using the clipboard
ClipPut($myString)
;then you could just send ctrl + v
;Send("^v")
;or to be more precise use controlsend()
ControlSend(WindowTitle, WindowText, controlID, "^v" [, flag] )
;this way it sends instantly 
```

希望这可以帮助！

# c# - Visual Studio 私有访问器和签入代码

> ID：11792045
> 
> 赞同：3
> 
> 时间：2012-08-03T08:27:05.700
> 
> 标签：c#, visual-studio-2010, unit-testing, reflection, shadowing

我使用 Visual Studio 自己的“创建单元测试...”选项在私有方法上生成了单元测试。

很好，它可以工作，但是如果我现在尝试检查我的代码，我会中断构建，因为 VS 在 AppData/Local/Temp 中创建了构建所需的私有访问器类。如果我尝试将此文件放在我的源代码树中，它不会编译，因为编译器说它“必须定义一个主体”。实在看不懂这倒影云雀……

这是访问器类：

```
#region Assembly AgentConfiguration_Accessor.exe, v4.0.30319
// C:\Projects\AgentConfigurationTests\obj\Debug\AgentConfiguration_Accessor.exe
#endregion

using Agent.ConfigurationData;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;

namespace Agent.AgentConfiguration
{
    [Shadowing("Agent.AgentConfiguration.AgentConfigurationGui")]
    public class AgentConfigurationGui_Accessor : BaseShadow
    {
        protected static PrivateType m_privateType;

        [Shadowing(".ctor@0")]
        public AgentConfigurationGui_Accessor();
        public AgentConfigurationGui_Accessor(PrivateObject value);

        [Shadowing("_agentPaths")]
        public AgentPaths _agentPaths { get; }
        [Shadowing("_agentServiceName")]
        public static string _agentServiceName { get; set; }
        [Shadowing("UpdateStatus@1")]
        public void UpdateStatus(string statusMessage);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:23:23.307

在使用私有访问器一段时间后，在与我们的源代码版本控制系统进行一些分支和合并后，我在编译代码时遇到了一些麻烦。

我开始研究该主题，并在[Visual Studio Team Test](http://blogs.msdn.com/b/vstsqualitytools/)博客中找到了一篇文章。据我了解，您不应**再**使用 Private Accessor 类。

[在Visual Studio 2010 的私有访问器的生成 (Publicize) 和代码生成中](http://blogs.msdn.com/b/vstsqualitytools/archive/2010/01/18/publicize-and-code-generation-for-visual-studio-2010.aspx)有一篇博客文章指出**不再进一步支持**此功能：

> 我们已停止为 Visual Studio 2010 开发这些功能，并且可能会在后续版本中将它们从产品中删除。这是由于以下原因：
> 
> *   缺乏资源和时间：此版本的重点是改善手动测试人员的体验，因此降低了代码生成和宣传功能的优先级。我们使用的宣传功能还存在其他尚未解决的问题。
> *   语言团队的新功能：由于语言团队对其项目类型和语言进行了修改，我们无法响应他们所做的更改，也无法使用他们引入的新功能。

当然，有一些关于你可以做什么的建议：

> 对于那些希望继续测试内部 API 的人，您有以下三种选择：
> 
> 1.  使用 Microsoft.VisualStudio.TestTools.UnitTesting.PrivateObject 类来帮助访问代码中的内部和私有 API。这可以在 Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 程序集中找到。
> 2.  创建一个反射框架，该框架能够反射您的代码以访问内部或私有 API。
> 3.  如果您尝试访问的代码是内部代码，您可以使用 InternalsVisibleToAttribute 访问您的 API，以便您的测试代码可以访问内部 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:45:10.160

我不使用此功能，尽管在我第一次开始学习单元测试时我确实使用了一段时间。一般来说，单元测试应该测试类的公共表面。如果您从该原则开始，则不需要访问器类。

但是你如何在你的类中测试重要的私有逻辑呢？我通常将私有方法提取到辅助类中，在那里它们成为公共方法（想想“单一责任原则”）。当然，作为公共方法，它们可以在没有访问器类的情况下进行测试。然后原始类获得帮助类的私有实例。

除了让您在测试中避免使用访问器类之外，这种方法还可以让您更轻松地在测试中使用模拟对象。当您测试原始类时，不是给它“真正的”帮助类，而是给它一个模拟实例。这将原始类的测试与助手类中的逻辑分离：如果您在助手类中引入错误，助手类的测试将失败，但原始类的测试不受影响。

# ios - 如何为每个数组保存一个图像

> ID：11792048
> 
> 赞同：0
> 
> 时间：2012-08-03T08:27:12.070
> 
> 标签：ios, xcode, arrays, uitableview, uiimageview

我正在尝试为 UITabelView 中的每个数组设置图像。如何为照片库中的每个数组设置图像？所以我可以在 UITableView 的单元格中查看它。

我希望这有助于这是我的简单代码[下载](https://www.dropbox.com/s/iicqjlipn2mg3es/NewSavaData-2.zip)

从现在开始感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:11:37.327

你可以这样做：

```
NSArray *photos = [[NSArray arrayWithObjects:   
                        [UIImage imageNamed:@"1.png"],
                        [UIImage imageNamed:@"2.png"],
                        [UIImage imageNamed:@"3.png"],
                        [UIImage imageNamed:@"4.png"],
                        nil] retain]; // Arrange images in the same order your table data is arranged. 
```

现在，在`cellForRowAtIndexPath:`方法中：

```
cell.imageView.image = [photos objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:50:55.633

首先，您是指每张图片吗？您将使用一个填充有图像的数组来执行此操作。

您可以在表格视图`cellForRowAtIndexPath`方法中执行此操作，通过告诉表格视图其单元格图像属性将填充单元格索引处的数组中的对象，例如：

```
cell.imageView.image = [UIImage imageNamed:[myArray objectAtIndex:indexPath.row]]; 
```

# windows - 使用 DEFINES 变量构建 Qt nmake

> ID：11792056
> 
> 赞同：0
> 
> 时间：2012-08-03T08:27:43.233
> 
> 标签：windows, qt, visual-c++, nmake

我需要帮助来使用“nmake”构建我的 Qt 项目。
我正在使用带有“nmake”的 Qt4.8、Windows 7 64Bit、VS2008 命令提示符编译器。

要求是，
我有多个预编译的静态库，我想在我的 Qt 项目中使用它们。

所有静态库，命名为Type1、Type2、Type3和Type4，都经过预编译，生成对应的Type1.lib、Type2.lib、Type3.lib和Type4.lib库文件。

我必须在我的项目中使用 Type1.lib 和 Type3.lib，
我知道常规方法，在我的 Qt 生成的 .PRO 文件中我可以放在哪里

```
LIBS+=C:\Proj\PRO1\Type1.lib \ 
      C:\Proj\PRO1\Type3.lib 
```

和

```
HEADERS += C:\Proj\PRO1\Type1.h \
           C:\Proj\PRO1\Type3.h 
```

我在 main.cpp 中添加了相应的 .h 文件，以从 Type1 和 Type3 库访问 api。编译并且工作得很好。
但就我而言，有多个项目我不应该每次都这样做。

我不打算在我的项目中一一包含头文件；相反，有一个全局头文件 GlobalHeader.h，其中定义了所有其他 lib 头文件路径信息，看起来像这样，

```
#ifndef GLOBALHEADER_H  
#define GLOBALHEADER_H 

#define TYPE1        "C:\Proj\PRO1\Type1.h" 
#define TYPE2        "C:\Proj\PRO2\Type2.h"  
#define TYPE3        "C:\Proj\PRO3\Type3.h"  
#define TYPE4        "C:\Proj\PRO4\Type4.h" 

#endif 
```

我的 main.cpp 文件看起来像这样，

```
#include GLOBAL_HEAD    //this is my requirement
#include TYPE1          //I should be able to use like this
#include TYPE3          //... " ...
#include <QtCore>
#include <QtGui>
#include <QApplication>
#include <QTextEdit>
int main(int argv, char **args)
{
    QApplication app(argv, args);
    QTextEdit textEdit;
    textEdit.show();
    //Lib functions called from TYPE1
    //... some operations ...
    //... some more operations ...
    //Lib functions called from TYPE3
    //... some operation ...
    //... some more operations ...
    return app.exec();
} 
```

我给了 qmake 命令来编译 main.cpp，

```
qmake -project DEFINES+=GLOBAL_HEAD=C:\Proj\GlobalHeader.h LIBS+=C:\Proj\PRO1\Type1.lib LIBS+=C:\Proj\PRO1\Type3.lib 
```

它在下面生成了 .PRO 文件，

```
DEFINES += GLOBAL_HEAD=C:\Proj\GlobalHeader.h
LIBS += C:\Proj\PRO1\Type1.lib 
LIBS += C:\Proj\PRO1\Type3.lib
TEMPLATE = app
TARGET = 
DEPENDPATH += . 
INCLUDEPATH += .
HEADERS +=
SOURCES += main.cpp 
```

现在，我的步骤是使用相应的 test.pro 文件生成 Makefile，
所以我给了，

```
qmake test.pro 
```

Makefile、Makefile.Debug 和 Makefile.Release 生成成功。

现在，我打开了 Visual Studio 2008 命令提示符并导航到我的项目所在的目录，并给出了编译命令，

```
nmake all 
```

它产生了错误...

```
.
.
main.cpp
C:\Proj\test\main.cpp(1) : error C2006: '#include' : expected a filename, found 'identifier'
C:\Proj\test\main.cpp(1) : fatal error C1083: Cannot open include file: '': No such file or directory
.
. 
```

有人可以告诉我代码有什么问题吗？还是我错过了 qmake 命令中的任何信息？我如何使这个项目编译？
对不起，如果我没有写好。如果您需要更多详细信息，请告诉我。
在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:05:46.340

回答有什么问题。发生这种情况是因为

```
#include GLOBAL_HEAD 
```

转换为

```
#include C:\Proj\GlobalHeader.h 
```

何时应将其括在 " 或尖括号中

我尝试添加到 .pro 文件

```
DEFINES += GLOBAL_HEAD=<C:\\Proj\\GlobalHeader.h> 
```

但它没有帮助。

我不知道如何使它正确编译，所以这只是答案的一半

# oracle - 是否有可能在没有物化视图日志的情况下快速刷新 oracle 数据库？

> ID：11792057
> 
> 赞同：0
> 
> 时间：2012-08-03T08:27:43.077
> 
> 标签：oracle, oracle11g

我只有读取权限（只读）的远程数据库表没有物化视图日志。我希望能够通过物化视图中的快速刷新仅添加新数据。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:20:07.767

简短的回答：没有。

[来自http://docs.oracle.com/cd/E16338_01/server.112/e10706/repmview.htm#REPLN354](http://docs.oracle.com/cd/E16338_01/server.112/e10706/repmview.htm#REPLN354)文档的长答案：

> 只有当主表或主实例化视图有实例化视图日志时，才能执行实例化视图的快速刷新。

# c# - 将 DevExpress.Xpo.XPCollection`1 转换为 DevExpress.Xpo.XPCollection

> ID：11792059
> 
> 赞同：0
> 
> 时间：2012-08-03T08:27:52.547
> 
> 标签：c#, collections, devexpress

您好，我需要将两个集合作为 XpCollections，但是“cMemberInfo.GetValue(this)”给我输入“DevExpress.Xpo.XPCollection`1”是否可以以某种方式将其转换为 DevExpress.Xpo.XPCollection？

```
 XPCollection cColl1 = cMemberInfo.GetValue(this) as XPCollection;
            XPCollection cColl2 = cMemberInfo.GetValue(cObject) as XPCollection; 
```

由于没有转换类型，两个 cColl 都是 null

有使用这些集合的代码的完整部分

```
 foreach (XPMemberInfo cMemberInfo in ClassInfo.CollectionProperties)
        {
            XPCollection cColl1 = cMemberInfo.GetValue(this) as XPCollection;

            XPCollection cColl2 = cMemberInfo.GetValue(cObject) as XPCollection;

            if (cColl1 == null || cColl2 == null) { Debug.Assert(false); return false; }
            if (cColl1.Count != cColl2.Count) { return false; }

            for (int i = 0; i < cColl1.Count; ++i)
            {
                XPOBase cObj1 = cColl1[i] as XPOBase;
                XPOBase cObj2 = cColl2[i] as XPOBase;

                bRet &= cObj1.IsDataEqual(cObj2);
            }
        } 
```

如果我在 XPCollection 的情况下使用 XPBaseCollection，我无法声明 cColl1[i] 或 cColl2[i]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:05:55.500

GetValue 返回一个泛型`XPCollection<T>`，其中 T 是集合对象的类型。

```
XPCollection<MyType> cColl1 = cMemberInfo.GetValue(this) as XPBaseCollection<MyType>;
XPCollection<MyOtherType> cColl2 = cMemberInfo.GetValue(cObject) as XPBaseCollection<MyOtherType>; 
```

或者您可以`XPBaseCollection`改用：

```
XPBaseCollection cColl1 = cMemberInfo.GetValue(this) as XPBaseCollection;
XPBaseCollection cColl2 = cMemberInfo.GetValue(cObject) as XPBaseCollection; 
```

# dart - 如何在 Dart 中处理更深的库层次结构？

> ID：11792060
> 
> 赞同：1
> 
> 时间：2012-08-03T08:28:12.343
> 
> 标签：dart

库的基本用法是定义其名称，如：

```
#library('Name'); 
```

就我而言，我想定义“嵌套”或“更深”的库层次结构。因此，如果我有一个名为的框架`Foo`，假设我构建了库`Messenger`：

```
#library('Messenger'); 
```

恐怕这会与其他事情发生冲突。我正在寻找的是这样的：

```
#import('Foo.Messenger'); 
```

所以很明显，信使库是 Foo 库的一部分。

解决此问题的推荐方法是什么？据我了解，人们会像这样引用您的图书馆：

```
#import('package:Foo.Messenger') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:03:05.910

如果您担心您的库可能与命名空间冲突，那么在使用它时需要定义一个前缀。但是，您不能强制其他人在使用您的库时使用前缀。

要自己使用前缀，您可以像这样导入：

```
#import('lib/library.dart', prefix: 'myLib'); 
```

现在从该库导入的任何内容都需要这样调用：

```
var item = new myLib.SomeClass(); 
```

有关更多详细信息，请参阅此[链接](http://www.dartlang.org/docs/language-tour/#using-libraries)。

正如您在问题的最后一个晚上所定义的，一个包是一种分发和导入可能是一个或多个第三方库的方法。它仍在进行大量开发，但它不会改变您的库在导入后的调用方式。

有关 Dart 中的 Pub 包管理器的信息，请参阅此[链接](http://www.dartlang.org/docs/pub-package-manager/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:28:10.240

图书馆很快就会改变，请参阅[http://news.dartlang.org/2012/07/draft-spec-changes-to-library-and.html](http://news.dartlang.org/2012/07/draft-spec-changes-to-library-and.html)。请注意，您的问题已在本文档中得到解答，因为它说：*旨在广泛使用的库的名称应遵循众所周知的反向 Internet 域名约定。*

# javascript - 如何一键加载html页面并在其中运行功能？

> ID：11792063
> 
> 赞同：0
> 
> 时间：2012-08-03T08:28:23.973
> 
> 标签：javascript, html, css

我是 HTML-CSS-JS 的初学者，我遇到了这个问题：

当我在我网站的 page1.html 时，我可以通过选择导航栏的子菜单来对页面的不同文章进行排序（例如子菜单 1 是“运动”，当我点击它时，只有标记为“运动”的文章可见）。这是功能：

```
 <script style="text/javascript">
    <!--
        function sortNews(id){
            var elmt = document.getElementsByTagName("section");

            for(var i = 0; i<elmt.length; i++){
                if(id == "all")
                    elmt[i].style.display = "block";
                else if(elmt[i].className != id)
                    elmt[i].style.display = "none";
                else
                    elmt[i].style.display = "block";
            }
        }
    // -->
    </script> 
```

当我在 page2.html 时，我还可以通过导航栏选择第 1 页的子菜单（这意味着当我的鼠标经过菜单“新闻”时，子菜单会出现，我可以直接单击“体育”）。我的问题是：我可以加载 page1.html 并运行上面的功能而无需再次点击用户吗？（因此将加载只有“体育”文章的新闻页面）

先感谢您 ！此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:36:42.973

在 page1.html 的 body 的 onload 属性中调用您的函数

```
<body onload="sortNews(id);"> 
```

但是你需要一些东西来获取 id 值。
您可以使用 php，更具体地说是[$_GET](http://php.net/manual/fr/reserved.variables.get.php)来执行此操作。

（在您的 page2.html 中，链接将类似于：

```
<a href="page1.php?id=sport>Sports News !</a> 
```

并在 page1.php

```
<body onload="sortNews(<?php echo $_GET['id']; ?>);"> 
```

)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:35:22.557

我不确定您的要求是什么，您希望在加载页面时运行一个函数吗？如果是这样：http: [//javascript.about.com/library/blonload.htm](http://javascript.about.com/library/blonload.htm)

# ipv6 - 如何将 ipv6 源地址设置为“::0”？

> ID：11792066
> 
> 赞同：2
> 
> 时间：2012-08-03T08:28:32.623
> 
> 标签：ipv6

我想做一个 DAD (DuplicateAddressDetection) 测试。我需要将 ipv6 源地址设置为“::0”，但是当我调用绑定函数时，它将地址设置为链接本地地址而不是“::0”。

我应该如何将地址设置为“::0”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T21:00:33.817

我认为您要做的是使用任何（ipv4 等效为 0.0.0.0）或未指定的地址。在 ipv6 中 0:0:0:0:0:0:0:0 是 ::。[::]:80 表示端口 80 上的任何/所有 ipv6 地址。

[http://en.wikipedia.org/wiki/IPv6_address#Unspecified_address](http://en.wikipedia.org/wiki/IPv6_address#Unspecified_address)

# javascript - 如何将特定的表 id 获取到 javascript？

> ID：11792069
> 
> 赞同：0
> 
> 时间：2012-08-03T08:28:45.820
> 
> 标签：javascript, jquery, ajax, inline

我有很多行数据。每行有 3 个单元格 - id、eesnimi、perenimi。我希望能够内联编辑所有单元格。我正在使用[就地编辑器](http://code.google.com/p/jquery-in-place-editor/)。

如何将特定单元格（我目前正在编辑的单元格）`id`获取到 javascript（element_id 字段），以便我知道要在 mysql 中更改哪个元素。

Javascript：

```
$(document).ready(function(){
    $(".editme1").editInPlace({
        url: 'http://localhost/petka/kast.php',
        element_id: ??????,
        show_buttons: true
    });
}); 
```

HTML：

```
<table>
    <?PHP
        $sql="SELECT * FROM nimed";
        $result = mysql_query($sql)or die(mysql_error());
        WHILE ($row = mysql_fetch_array($result, MYSQL_ASSOC))  {
            echo '<tr class="row">';
            echo '<td class="editme1" id="id|'.$row["id"].'" title="id">'.$row["id"].'</td>';
            echo '<td class="editme1" id="eesnimi|'.$row["id"].'" title="eesnimi">'.$row["eesnimi"].'</td>';
            echo '<td class="editme1" id="perenimi|'.$row["id"].'" title="perenimi">'.$row["perenimi"].'</td>';
            echo '</tr>';
        }
    ?>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:34:16.337

你用过吗

```
 $(this).attr('id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:34:17.237

尝试

```
$(document).ready(function(){
  $(".editme1").editInPlace({
  url: 'http://localhost/petka/kast.php',
  element_id: $(this).attr("id"),
  show_buttons: true
 });
}); 
```

# php - PHP 保留字作为命名空间和类名

> ID：11792070
> 
> 赞同：6
> 
> 时间：2012-08-03T08:28:48.397
> 
> 标签：php, namespaces, reserved-words

最近我开始将我的框架转换为使用 php 命名空间，一个我似乎无法找到答案的问题是 - 使用保留字如“对象”、“数组”、“字符串”是否“合法” ' 作为该命名空间中的命名空间和类名？一个例子是：

```
namespace System\Object;

class String { }

class Array { } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T08:34:11.713

PHP 会抛出如下错误：

```
Parse error: syntax error, unexpected T_ARRAY, expecting T_STRING 
```

如果你试试：

```
class Array
{

}
$myClass = new Array; 
```

相反，尝试类似

```
class myArray
{

}
$myClass = new myArray; 
```

[编辑] 我会详细说明一下，它们被保留是有原因的，因为在上面的第一个场景中，PHP 无法区分定义数组或初始化同名类之间的区别，所以它会抛出一个错误。没有办法像在 MySQL 中那样解决这个问题，例如，您可以使用反引号来转义保留字。所以在 PHP 中你不得不改变名字，你不必改变太多，只要你不使用与保留字完全相同的名字，一个字符就可以了。

希望有帮助！

# android - xml Shape-Gradient 未显示在我的小部件上

> ID：11792071
> 
> 赞同：2
> 
> 时间：2012-08-03T08:28:49.863
> 
> 标签：android, widget, gradient, remoteview

我想给我的小部件一个渐变背景。为此，我将以下 xml 用于渐变：

```
<?xml version="1.0" encoding="utf-8"?>
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">
    <gradient 
        android:startColor="@color/general_listrow_background_start"
        android:endColor="@color/general_listrow_background_end"
        android:angle="270"/>    
</shape> 
```

并将其添加到我的布局中：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget_main_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="@dimen/widget_margin"
    android:padding="@dimen/widget_padding"
    android:orientation="vertical"
    android:background="@drawable/background_gradient">
    ....
</LinearLayout> 
```

如果我在我的应用程序中使用这个布局，它会显示出来，但在我的小部件上我只得到一个白屏。我错过了什么吗？不能在 RemoteViews 中提供 xml 渐变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:17:12.223

可以清理并构建您的项目，然后检查它是否可以工作:)

# cakephp - 验证码组件读取会话错误

> ID：11792072
> 
> 赞同：0
> 
> 时间：2012-08-03T08:28:59.723
> 
> 标签：cakephp, cakephp-2.0

我正在使用来自[http://www.devarticles.in/的验证码组件](http://www.devarticles.in/)

我已经导入了验证码组件，例如

```
 App::import('Component', 'Captcha'); //load it
    $this->Captcha = new CaptchaComponent(new ComponentCollection()); //make instance
    $this->Captcha->startup($this); 
```

但是当我尝试调用函数时

```
 $captcha = $this->Captcha->getVerCode(); 
```

它给了我错误

```
Call to a member function read() on a non-object in C:\xampp\htdocs\westudy_old\app\Controller\Component\CaptchaComponent.php on line 65 
```

我的组件功能是

```
function getVerCode() {
    return $this->Controller->Session->read('security_code');
} 
```

组件的启动功能是

```
 function startup() {
    $this->Controller = $this->_controller;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:52:13.127

我猜你在 CakePHP 2.x 中使用它。CakePHP 2.x 的此验证码组件的最新工作版本可在作者的网站[http://www.devarticles.in/cakephp/simple-captcha-component-for-cakephp/上找到](http://www.devarticles.in/cakephp/simple-captcha-component-for-cakephp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:31:26.383

您需要在顶部声明 $Controller：`public $Controller;`

并将 startup() 更改为

`function startup($controller) {`

`$this->Controller = $controller;`

`}`

通常我在 initialize() 方法中分配 $controller。我不确定它是否可以在 startup() 方法中工作，但我认为它会。

有关更多信息，请参阅[CakePHP](http://book.cakephp.org/2.0/en/controllers/components.html)组件部分。

# asp-classic - 经典的 asp if 语句问题

> ID：11792075
> 
> 赞同：1
> 
> 时间：2012-08-03T08:29:10.067
> 
> 标签：asp-classic, vbscript

我有一个 if 语句，我很确定它是正确的并且应该可以工作。但由于某种原因，它不是。

```
while not oRs2.EOF
if iCat = oRs2("id")  then
%>
   <div class ="<%= oRs2("id") %><%= iCat  %>">
<%
else
%>
   <div class ="faqquestion <%= oRs2("id") %><%= iCat  %>">
<%
end if
%> 
```

这就是你得到的。

```
<div class="faqquestion 11">
<div class="faqquestion 21">
<div class="faqquestion 31"> 
```

但它应该是什么

```
<div class="11">
<div class="faqquestion 21">
<div class="faqquestion 31"> 
```

看不到我做错了什么，1确实= 1！？

如何设置变量：

```
dim iCat
iCat = request.QueryString("cat")

dim sSQL
sSQL = "Select * from table"        
set oRs2 = oConn.Execute(sSQL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:34:15.193

我认为问题是数据类型之一。

例如，我测试了以下脚本（只需将内容放入名为 test.vbs 的文件中，然后双击它：

```
dim i
i = "1"

dim j
j=1

if i = j then
    msgbox "yes"
else
    msgbox "no"
end if
msgbox i & j 
```

这将输出“no”和“11”。

在您的代码中，iCat 将是一个字符串，因为您只是从中提取它，`request.QueryString`因此请尝试使用将其转换为整数`CInt`

# sql - Oracle - 日期不在多行之间

> ID：11792077
> 
> 赞同：0
> 
> 时间：2012-08-03T08:29:14.807
> 
> 标签：sql, oracle, date

我有一张包含开始日期和结束日期的表格。我想确保没有新日期与开始日期和结束日期之间定义的任何时间段重叠。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:33:27.897

您可以在插入之前检查该新日期的现有行：

```
SELECT COUNT(*) FROM THE_TABLE 
  WHERE  (
    ? BETWEEN START_DATE AND END_DATE
  OR 
    ? BETWEEN START_DATE AND END_DATE 
  OR
    START_DATE BETWEEN ? AND ?
  ) AND ROWNUM<2 
```

（其中 ? 是要测试的新时期的开始和结束日期）。

您可能需要同步它（例如使用 LOCK TABLE）以避免竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:48:35.877

除了 Thilo 所说的，还必须处理以下问题

```
SELECT COUNT(*) FROM THE_TABLE 
  WHERE  (
    DATE_1 BETWEEN START_DATE AND END_DATE
  OR 
    DATE_2 BETWEEN START_DATE AND END_DATE 
  OR
    START_DATE BETWEEN DATE_1 AND DATE_2
  OR
    END_DATE BETWEEN DATE_1 AND DATE_2
  ) 
AND ROWNUM<2 
```

# .htaccess - 在索引上显示“my-choice.html”

> ID：11792082
> 
> 赞同：0
> 
> 时间：2012-08-03T08:29:34.630
> 
> 标签：.htaccess, indexing

当您转到“http://mysite.com”时，我如何完成此操作，我想显示为索引的文件在 URL 中。前任：

*   您浏览到： http: [//mysite.com](http://mysite.com)
*   浏览器 URL 字段中显示的是： http: [//mysite.com/my-choice.html](http://mysite.com/my-choice.html)

因为现在“my-choice.html”没有出现。到目前为止，我的 .htaccess 中有这个：

**DirectoryIndex my-site.html**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:45:07.177

当请求是针对目录时，该`DirectoryIndex`指令仅设置要尝试解析的文件列表。它不会像您想要的那样重定向浏览器。试试这个：

```
RedirectMatch 301 ^/$ /my-choice.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:47:25.557

这是你可爱的 htaccess ：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^/?$ /my-choice.html [L,R=301] 
```

# asp.net - 在客户端使用 Web 服务 asp.net

> ID：11792088
> 
> 赞同：0
> 
> 时间：2012-08-03T08:29:48.373
> 
> 标签：asp.net, web-services, jakarta-ee

我创建了一个 Web 服务 asp.net，并在 Visual Studio Development Server 中对其进行了测试。在该服务器中，我可以选择我想要的功能，输入参数，我得到的结果是正确的。在客户端，我有一个 Java EE 应用程序。我的问题是，我不知道如何使用 URL 传输参数。我尝试过这样的事情：`http://localhost:64378/WebSite3/Service.asmx/EchoWithGet?s=7458`或这样`http://localhost:64378/WebSite3/Service.asmx?op=EchoWithGet&s=7458` 的事情：它们都不起作用。所以我的问题是，如何使用带有参数 s 的“EchoWithGet”函数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:34:14.970

由于您的服务被调用`Service.asmx`，我假设您创建了一个基于 SOAP 的 Web 服务。使用服务中的 WSDL 文档 (http://localhost:64378/WebSite3/Service.asmx?WSDL) 为您的 Java EE 应用程序创建一个代理客户端（在[此处](http://teaching.cs.uml.edu/~heines/tools/JRun4/docs/html/Programmers_Guide/ws_wsdl5.html)查看该主题）。

如果您只想在浏览器中测试您的服务，您可以使用众多可用客户端之一。Firefox 有一个不错的[插件](https://addons.mozilla.org/de/firefox/addon/soa-client/)。

# c++ - 无法绘制棋盘角，因为 cvCvColor 方法中的断言失败

> ID：11792091
> 
> 赞同：1
> 
> 时间：2012-08-03T08:30:04.070
> 
> 标签：c++, opencv, camera-calibration

我正在从两个摄像头收集好帧，用于立体摄像头校准。

```
 #include <iostream>
  #include <cv.h>
  #include <highgui.h>
  #include <stdio.h>
  #include <stdlib.h>
  #include <sstream>

  using namespace std;

  int main() {

  CvCapture* videocapture_CAM0=cvCreateCameraCapture(0);    
  CvCapture* videocapture_CAM1=cvCreateCameraCapture(1);

  IplImage* img_0;    
  IplImage* img_1;

  int nx=4,ny=3;

  int i, j, nframes, n = nx*ny;

  vector<CvPoint2D32f> temp_0(n);    
  vector<CvPoint2D32f> temp_1(n);

  CvSize imageSize_0 = {0,0};    
  CvSize imageSize_1 = {0,0};

  while(1)  
  {
      int count_0 = 0,count_1 = 0;
      int result_0 = 0,result_1 = 0;

      img_0=cvQueryFrame(videocapture_CAM0);
      img_1=cvQueryFrame(videocapture_CAM1);

      imageSize_0 = cvGetSize(img_0);
      imageSize_1 = cvGetSize(img_1);    

      cvShowImage("camera 1", img_0);
      cvShowImage("camera 2", img_1);

      IplImage* timg_0 = img_0;
      IplImage* timg_1 = img_1;

      result_0 = cvFindChessboardCorners(timg_0, cvSize(nx, ny), &temp_0[0], &count_0,
                            CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_NORMALIZE_IMAGE);

      result_1 = cvFindChessboardCorners(timg_1, cvSize(nx, ny), &temp_1[0], &count_1, 
                            CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_NORMALIZE_IMAGE);

      if(result_0&&result_1)
      {
            cout<<"Found"<<endl;

            IplImage* cimg_0 = cvCreateImage(imageSize_0, 8, 3);            

            IplImage* cimg_1 = cvCreateImage(imageSize_1,8,3);

            cvCvtColor(img_0, cimg_0, CV_GRAY2BGR);
            cvCvtColor(img_1, cimg_1, CV_GRAY2BGR);

            cvDrawChessboardCorners(cimg_0, cvSize(nx, ny), &temp_0[0], count_0, 
                                    result_0);

            cvDrawChessboardCorners(cimg_1, cvSize(nx, ny), &temp_1[0], count_1,
                                    result_1);

            cvShowImage("corners", cimg_0);
            cvShowImage("corners", cimg_1);

            cvReleaseImage(&cimg_0);
            cvReleaseImage(&cimg_1);

            cvWaitKey(5);

       }
       char c=cvWaitKey(30);
       if(c==27)
        break;
     }
     return 0;
  } 
```

但我在运行时遇到了一个奇怪的错误：-

```
OpenCV Error: Assertion failed (scn == 1 && (dcn == 3 || dcn == 4)) in cvtColor,
 file C:\opencv\modules\imgproc\src\color.cpp, line 3234 
```

另外，我检查了源图像和目标图像的 Dimension 和 nchannel 值是否相等。

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:54:38.660

断言非常清楚`scn == 1`意味着您的源图像必须有一个通道（那是因为您指定`CV_GRAY2BGR`为转换代码`cvCvtColor`）。

# apache - 给定条件时，Apache ur 重写不起作用

> ID：11792095
> 
> 赞同：0
> 
> 时间：2012-08-03T08:30:13.367
> 
> 标签：apache

我写过类似的代码

```
 RewriteEngine on
  RewriteRule $1 !mobile
  RewriteRule ^(.*)$  /mobile [R,L] 
```

如果没有找到像 www.abc.com/mobile 这样的第一个参数作为第一个参数的移动设备，我将使用 /mobile 的 url，但是此代码不起作用，即第二行不起作用。这是对的吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:41:08.410

您的错误是您想要 a**`RewriteCond`**而不是 a`RewriteRule`来满足您的条件：

```
RewriteEngine on
RewriteCond $1 !mobile
RewriteRule ^(.*)$  /mobile [R,L] 
```

# html - 在哪里可以找到 Google 搜索结果的 html 和 css？

> ID：11792099
> 
> 赞同：-4
> 
> 时间：2012-08-03T08:30:20.183
> 
> 标签：html, css, styles

在我的网站上，我想以一种与 Google 搜索结果非常相似的形式显示结果，以便用户可以看到他们熟悉的内容。有人知道我在哪里可以找到生成与 Google 搜索结果相同样式的输出的 html 和 css 吗？查看谷歌搜索结果的页面来源并没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T08:33:10.077

如果您想了解 html 布局，获取 chrome 并使用检查元素，请单击每个元素以查看其遵循的 CSS 规则。但是复制google的css很简单，蓝色链接，黑色文字，简单

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T08:36:28.910

您已经在每个包含样式的 Google 结果页面中获得了`<style id="gstyle"></style>`标签：`<head>`

```
body{
   color:#000;
   margin:0;
   overflow-y:scroll
}
body,#leftnav,#tbdi,#hidden_modes,#hmp{
   background:#fff
}
... 
```

这个 div 中大约有 54000 个字符，我们可以假设你需要的都在这里。

# git - LibreOffice / OpenOffice 合并工具可以用作`git-mergetool`吗？

> ID：11792100
> 
> 赞同：2
> 
> 时间：2012-08-03T08:30:26.400
> 
> 标签：git, git-merge, opendocument, mergetool

我偶然发现了[一篇旧博客文章](http://alecthegeek.wordpress.com/2009/10/01/git-and-openoffice-org/)提出了这一点，不幸的是，这只是一个未实现的想法。这是否同时完成/如何实现？（我听说 TortoiseGit 可能会这样做，但我正在运行 Linux）

[另一种选择也可能是这里](https://git.wiki.kernel.org/index.php/GitTips#How_to_use_git_to_track_OpenDocument_.28OpenOffice.2C_Koffice.29_files.3F)提到的重新压缩方法，建议使用 git 过滤器跟踪未压缩的 OpenDocument 并在结帐时重新压缩它们，这将提供至少合并（和区分）xml 内容而不是二进制垃圾（或有损[odt2txt](http://www-verimag.imag.fr/~moy/opendocument/)），但是我也没有找到有关此方法的任何更新，关于此的最后一篇[文章](http://permalink.gmane.org/gmane.comp.version-control.git/103077)警告了此方法中的潜在缺陷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:59:24.853

你可以试试，你会告诉我们的。据我记得，合并工具被配置为有 4 个输入，因此您必须配置 Git 以将其用作合并工具。

您必须在配置文件中添加几行`merge.tool`，`mergetool.<tool>.path`和`mergetool.<tool>.cmd`

[http://www.kernel.org/pub/software/scm/git/docs/git-config.html](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)（在页面中搜索“merge.tool”）

[http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html](http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:09:01.173

受[twalberg](https://stackoverflow.com/users/1253222/twalberg)[评论](https://stackoverflow.com/questions/11792100/can-the-libreoffice-openoffice-merge-tool-be-used-as-git-mergetool#comment15675759_11792100)的启发，我编写了简单的脚本`od2fod`，`fod2od`并使用`--convert-to`Libre/OpenOffice 的参数将压缩的 xml 转换为未压缩的 xml，反之亦然。由于[在 LibreOffice GUI 运行时拒绝 CLI 操作的错误，](https://bugs.freedesktop.org/show_bug.cgi?id=37531)我不得不编写解决方法`loInstance`：

```
#!/bin/bash
tmpdir=$(mktemp -d)
cp -rf ~/.libreoffice $tmpdir
soffice -env:UserInstallation=file://$tmpdir $@
rm -rf $tmpdir 
```

`od2fod`并且`fod2od`很简单：

```
#!/bin/bash
loInstance --headless --convert-to f${1#*.} $1 
```

和

```
#!/bin/bash
loInstance --headless --convert-to ${1#*.f} $1 
```

现在可以设置 a`clean`并`smudge`过滤[`.gitattributes`](http://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)，但我注意到 LO 会跟踪多余的元数据，这会阻碍`clean-smudge`循环。所以现在这只能作为一个不完美的`textconv`工具`git-diff`......

# python - 如何配置和运行 celerybeat

> ID：11792101
> 
> 赞同：4
> 
> 时间：2012-08-03T08:30:26.377
> 
> 标签：python, celery, celerybeat

我刚开始使用芹菜，试图运行一个定期任务。

配置 *rabbitmq** 添加了 celeryconfig.py。

并在tasks.py中添加以下代码：

```
from celery.decorators import periodic_task
from datetime import timedelta

@periodic_task(run_every=timedelta(seconds=2))
def every_2_seconds():
    print("Running periodic task!") 
```

现在，当我通过在终端中键入“celerybeat”来启动 celerybeat 时，它开始运行并显示以下消息

```
celerybeat 
celerybeat v3.0.3 (Chiastic Slide) is starting.
__    -    ... __   -        _
Configuration ->
    . broker -> amqp://arnold@localhost:5672//
    . loader -> celery.loaders.default.Loader
    . scheduler -> celery.beat.PersistentScheduler
    . db -> celerybeat-schedule
    . logfile -> [stderr]@INFO
    . maxinterval -> now (0s)
[2012-08-03 14:24:52,202: INFO/MainProcess] Celerybeat: Starting... 
```

并且终端中没有`every_2_seconds`方法的输出。我假设我必须在 celerybeat 命令期间指定要运行的应用程序或任务。如何做到这一点？

如何指定任务并在每 2 秒后打印一行作为定期任务？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:03:02.330

添加`CELERY_IMPORTS=("tasks",)`到你的 celeryconfig.py 然后运行 ​​celerybeat。

# c# - 如何从 XML 文件中获取元素

> ID：11792105
> 
> 赞同：0
> 
> 时间：2012-08-03T08:30:36.243
> 
> 标签：c#, asp.net, .net, xml, nodes

我想从 XML 文件中获取元素。但我不知道如何从 XML 中获取元素。

我的 XML 文件：

```
<?xml version="1.0" standalone="yes" ?>
<NewDataSet>
  <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
      <xs:complexType>
        <xs:choice minOccurs="0" maxOccurs="unbounded">
          <xs:element name="resources">
            <xs:complexType>
              <xs:sequence>
                <xs:element name="id" type="xs:string" minOccurs="0" />
                <xs:element name="text" type="xs:string" minOccurs="0" />
              </xs:sequence>
            </xs:complexType>
          </xs:element>
        </xs:choice>
      </xs:complexType>
    </xs:element>
  </xs:schema>
  <resources>
    <id>id_SearchUser</id>         <!--Label lblSearchUser-->
    <text>Benutzer</text>
  </resources>
  <resources>
    <id>id_location</id>           <!--Label lblLocation-->
    <text>Werk</text>
  </resources>
  <resources>
    <id>id_Search</id>             <!--Button Button2-->
    <text>Suchen</text>
  </resources>
  <resources>
    <id>id_User</id>                <!--Label lblUser-->
    <text>Benutzer</text>
  </resources>
  <resources>
    <id>id_eMail</id>               <!-- Label lblEmail-->
    <text>eMail</text>
  </resources>
  <resources>
    <id>id_Firstname</id>           <!--LinkLabel lnkFirstname-->
    <text>Vorname</text>
  </resources>
  <resources>
    <id>id_Lastname</id>           <!--LinkLabel lnkLastname-->
    <text>Nachname</text>
  </resources>
  <resources>
    <id>id_Telephonnumber</id>     <!--Label lblTelephon-->
    <text>Telefon</text>
  </resources>
</NewDataSet> 
```

我的想法：

我得到了用户的位置。例如“de”，然后我想调用 GetXMLElement 方法来给我一个元素的内容。

例如：

我的应用程序“id_SearchUser”中有一个标签，我希望此文本属性更改为...的内容

...

```
<resources>
    <id>id_SearchUser</id>        
    <text>Benutzer</text>
</resources> 
```

……

并且文本比Benutzer。

我的方法：

```
public string GetXMLElement()
{
    XmlDocument xmldoc = new XmlDocument();
    xmldoc.Load(Server.MapPath("~/App_Data/de_language.xml"));
    XmlNode node = // ??
    return // node as string
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T08:38:04.400

那这个呢？

```
XDocument document = XDocument.Load(Server.MapPath("~/App_Data/de_language.xml"));
XElement element = document.Root.Elements("resources").FirstOrDefault(e => e.Element("id").Value == "id_SearchUser");
string text;
if (element != null)
  text = element.Element("text").Value; 
```

请注意，我使用XDocument`XDocument`而不是您的`XmlDocument`LINQ，而 XmlDocument 使用 XPATH 来获取节点。这是一个偏好问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:39:19.160

您可以使用 XQuery 来获取您想要的元素：

这是一个简单的例子：

```
XPathDocument doc = new XPathDocument(Server.MapPath("~/App_Data/de_language.xml"));
var nav = doc.CreateNavigator();
var nodes = nav.select("/xpath/to/the/node/you/want/to/select"); // for example /resources/id/text
nodes.First();
// now nodes.Current.Value is the value of the node you've just selected. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:36:10.703

您可以通过 xpath 访问节点

[http://msdn.microsoft.com/en-us/library/hcebdtae.aspx](http://msdn.microsoft.com/en-us/library/hcebdtae.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:36:17.573

您需要使用 xpath 来选择您需要的节点。MSDN 上的[xpath 参考](http://msdn.microsoft.com/en-us/library/ms256115.aspx)是一个很好的资源。

然后，您需要使用[SelectSingleNode 方法](http://msdn.microsoft.com/en-us/library/fb63z0tw.aspx)来查找该节点。

# java - MultipartResolver 不工作

> ID：11792107
> 
> 赞同：4
> 
> 时间：2012-08-03T08:31:00.377
> 
> 标签：java, rest, file-upload, spring-roo, multipart

我使用 Maven 和 Spring Roo 开发 RESTFul Web 服务。

在我的配置 xml 文件中，我定义了一个`multipartResolver`bean，因为我正在上传 300KB 的文件：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize" value="400000" />
    <property name="maxInMemorySize" value="400000" />
</bean> 
```

文件上传成功并推入堆栈。这些文件是`CommonsMultipartFile`或`MultipartFile`对象（我对这两种类型的对象都有相同的现象）。弹出文件后，我可以调用`getSize()`方法并验证文件的大小是否正确。但是一旦我打电话`getInputStream()`，我就会收到以下错误：`File has been moved - cannot be read again.`

`multipartResolver`我在声明中做错了吗？还有其他原因会出现此错误吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:53:34.540

对 getInputStream() 的调用被识别为在客户端获取文件输入流的请求。由于文件已经上传，它说“文件已被移动 - 无法再次读取”

您还想通过调用 getInputStream() 来做什么？如果要读取上传的文件，请使用上传位置的路径创建一个新的 FileInputStream 并访问文件内容。

# android - LinearLayout 无法转换为 android.widget.Button

> ID：11792109
> 
> 赞同：3
> 
> 时间：2012-08-03T08:31:09.280
> 
> 标签：android, xml

我的原始布局 xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/app"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_margin="0px"
android:background="#e4e8ed"
android:orientation="vertical"
android:padding="0px" >

<include
    android:id="@+id/tabBar"
    layout="@layout/tab" />

<Button
    android:id="@+id/nist"
    android:layout_width="301dp"
    android:layout_height="63dp"
    android:text="Generate NIST file" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rectangle"
    android:layout_width="276dp"
    android:layout_height="wrap_content"
    android:background="@drawable/rectangle"
    android:layout_gravity="center_horizontal">

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="ToggleButton" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="128dp"
        android:text="Button" />

</LinearLayout>

</LinearLayout> 
```

但是，如果我`Button`在内部移动下方，`LinearLayout`我的应用程序只会抛出异常：

```
LinearLayout cannot be cast to android.widget.Button 
```

我觉得这很奇怪，我怎么能做到呢？

**编辑：**

这是我将按钮“导入”到我的 java 代码的方式：

```
setTabBar(R.layout.horz_scroll_app);
nist = (Button) findViewById(R.id.nist); 
```

`setTabBar`方法：

```
public void setTabBar(int id) {

    LayoutInflater inflater = LayoutInflater.from(this);
    scrollView = (MyHorizontalScrollView) inflater.inflate(
            R.layout.horz_scroll_with_list_menu, null);
    setContentView(scrollView);

    menu = inflater.inflate(R.layout.horz_scroll_menu, null);

    app = inflater.inflate(id, null);
    ViewGroup tabBar = (ViewGroup) app.findViewById(R.id.tabBar);

    ListView listView = (ListView) app.findViewById(R.id.list);

    listView = (ListView) menu.findViewById(R.id.list);

    ArrayList<MenuItem> menuItems = getMenuItems();
    listView.setAdapter(new MenuCustomAdapter(this, menuItems));

    btnSlide = (ImageButton) tabBar.findViewById(R.id.BtnSlide);
    btnSlide.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN:
                btnSlide.setImageResource(R.drawable.lincolor);
                break;
            case MotionEvent.ACTION_UP:
                btnSlide.setImageResource(R.drawable.lin);
                break;
            }

            return false;
        }

    });
    btnSlide.setOnClickListener(new ClickListenerForScrolling(scrollView,
            menu));

    final View[] children = new View[] { menu, app };

    int scrollToViewIdx = 1;
    scrollView.initViews(children, scrollToViewIdx,
            new SizeCallbackForMenu(btnSlide));

} 
```

我还应该提到，`Button`如果我在内部添加其他元素，则此问题仅发生在元素上`LinearLayout`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T08:43:57.447

尝试清理和重建项目，或者如果这不起作用，则重新启动 Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:10:32.737

遇到了同样的问题，是什么帮助了我：

确保不要为视图元素（togglebutton、editText 等）使用默认 ID。

当您在布局中添加和删除相同类型的新元素时，它们似乎会相互干扰。

因此，请始终使用个人 ID。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-18T06:27:15.383

对于所有可能在他们的代码中也遗漏了一些明显的东西（就像我一样）的人来说，要进一步**扩展：**

确保您的 java 代码不会将您的布局直接转换为按钮：

```
public class MainActivity extends AppCompatActivity {
    protected Button LL_vertical; //MISTAKE HERE

    public void someFunction() {

        //R.id.LL_vertical is a linearlayout
        LL_vertical = view.findViewById(R.id.LL_vertical); 

        ...

    }

 ... rest of code ..
} 
```

应该

```
public class MainActivity extends AppCompatActivity {
    protected LinearLayout LL_vertical; //MISTAKE FIXED

    public void someFunction() {

        //R.id.LL_vertical is a linearlayout
        LL_vertical = view.findViewById(R.id.LL_vertical); 

        ...

    }

 ... rest of code ..
} 
```

# c# - 拆分两组

> ID：11792111
> 
> 赞同：0
> 
> 时间：2012-08-03T08:31:21.390
> 
> 标签：c#, linq, algorithm, data-structures

给定 2 个元素集合 S1 和 S2，计算 3 个集合（A、B、C）的最有效方法是什么，其中 A 是 S1 的唯一元素，B 是 S2 的唯一元素，C 是 S1 的公共项和 S2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T08:34:47.393

你可以在这里找到：http: [//msdn.microsoft.com/en-us/library/bb546153.aspx](http://msdn.microsoft.com/en-us/library/bb546153.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:39:14.823

或者，在代码中：

```
var C = S1.Intersect(S2).Distinct()
var A = S1.Except(C).Distinct()
var B = S2.Except(C).Distinct() 
```

# c# - unity ResolveAll 后代

> ID：11792113
> 
> 赞同：1
> 
> 时间：2012-08-03T08:31:25.103
> 
> 标签：c#, .net, dependency-injection, unity-container

我有`IBaseModel`许多后代（例如`IContactModel : IBaseModel;`等`IRelationModel : IBaseModel;`）的基本接口和实现这个接口的对象。

所有这些后代接口都注册在 Unity 容器中。

如何解决我的所有对象的后代`IBaseModel`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:46:27.533

```
var types = Container
  .Registrations
  .Where(x => typeof (IBaseModel).IsAssignableFrom(x.RegisteredType))
  .Select(x => x.RegisteredType)
  .ToList();

var result = types
  .Select(x => (IBaseModel) Container.Resolve(x.UnderlyingSystemType))
  .ToList(); 
```

# json - Sencha touch 2：通过代理在商店检索信息

> ID：11792115
> 
> 赞同：0
> 
> 时间：2012-08-03T08:31:32.217
> 
> 标签：json, proxy, extjs, sencha-touch-2, store

我为一个移动应用程序项目工作，并且在商店中使用代理检索信息时遇到问题。这是一个管理火车站的应用程序，对于一个火车站，我调用了一个 WebService 来检索接下来的 10 列火车（在 json 中）。

我有 2 节课，TrainStation（法语中的 Gare；））和 Train

Gare 中检索火车的方法：

```
getListTrains: function(TR3A) {
    console.log('plop');
    var trains = Ext.create('Ext.data.Store', {
        model: 'Train',
        proxy: {
            type: 'ajax',
            url: 'http://eclernet-mobile.dev.dsit-hp.sncf.fr/Trainservice.svc/GetListTrainsAtGare/'+TR3A,
            method: 'POST',
            headers: {
                'Accept': 'application/json'
            },
            reader: {
                type: 'json'
            }
        }
    });

    console.log(trains);
} 
```

Train 类（将 Model 扩展为使用该方法）：

```
Ext.define('Train', {
extend: 'Ext.data.Model',
config: {   
    codeMission: null,      
    numero:  null,
    sens: null,     
    dessertes: null,    
    voie: null,
    heureProbable: null,        
    heureTheorique: null,
    voiePrecedente: null,   
    quai: null,
    retard: null
},  

constructor: function(config) {
    this.initConfig(config);    
}, 
```

});

当我使用有效的火车站调用我的方法时，我的 console.log(trains); 检索一个空对象...

我的 JSON：

```
[
{
    "codeMission": "AMIE",
    "dessertes": [
        {
            "codeTR3A": "VPL",
            "nom": "Villiers St Paul"
        },
        {
            "codeTR3A": "RIA",
            "nom": "Rieux Angicourt"
        },
        {
            "codeTR3A": "PXE",
            "nom": "Pont Ste Maxence"
        },
        {
            "codeTR3A": "CVE",
            "nom": "Chevrieres"
        },
        {
            "codeTR3A": "LUE",
            "nom": "Longueil Ste Marie"
        },
        {
            "codeTR3A": "LXS",
            "nom": "Le Meux La Croix"
        },
        {
            "codeTR3A": "CPE",
            "nom": "Compiegne"
        }
    ],
    "heureProbable": "02/08/2012 15:21",
    "heureTheorique": "02/08/2012 15:21",
    "numero": "847809",
    "quai": null,
    "retard": null,
    "sens": "I",
    "voie": "1",
    "voiePrecedente": null
},
{
    "codeMission": "PADI",
    "dessertes": [
        {
            "codeTR3A": "CLY",
            "nom": "Chantilly Gouvieux"
        },
        {
            "codeTR3A": "ORY",
            "nom": "Orry la Ville"
        },
        {
            "codeTR3A": "PNO",
            "nom": "Paris Nord GL"
        }
    ],
    "heureProbable": "02/08/2012 15:39",
    "heureTheorique": "02/08/2012 15:39",
    "numero": "847616",
    "quai": null,
    "retard": null,
    "sens": "P",
    "voie": "DE",
    "voiePrecedente": null
},
{
    "codeMission": "TOLI",
    "dessertes": [
        {
            "codeTR3A": "SLT",
            "nom": "St Leu d'Esserent"
        },
        {
            "codeTR3A": "PYO",
            "nom": "Précy sur Oise"
        },
        {
            "codeTR3A": "BRN",
            "nom": "Boran sur Oise"
        },
        {
            "codeTR3A": "BRK",
            "nom": "Bruyères sur Oise"
        },
        {
            "codeTR3A": "PEB",
            "nom": "Persan Beaumont"
        },
        {
            "codeTR3A": "CPO",
            "nom": "Champagne sur Oise"
        },
        {
            "codeTR3A": "IAP",
            "nom": "L'Isle Adam Parmain"
        },
        {
            "codeTR3A": "VMD",
            "nom": "Valmondois"
        },
        {
            "codeTR3A": "AUW",
            "nom": "Auvers sur Oise"
        },
        {
            "codeTR3A": "CPW",
            "nom": "Chaponval"
        },
        {
            "codeTR3A": "PPT",
            "nom": "Pont Petit"
        },
        {
            "codeTR3A": "EPL",
            "nom": "Epluches"
        },
        {
            "codeTR3A": "SOA",
            "nom": "St Ouen l'Aumone"
        },
        {
            "codeTR3A": "PSE",
            "nom": "Pontoise"
        }
    ],
    "heureProbable": "02/08/2012 15:54",
    "heureTheorique": "02/08/2012 15:54",
    "numero": "121038",
    "quai": null,
    "retard": null,
    "sens": "P",
    "voie": "DE",
    "voiePrecedente": null
},
{
    "codeMission": "ZUCO",
    "dessertes": [
        {
            "codeTR3A": "CLY",
            "nom": "Chantilly Gouvieux"
        },
        {
            "codeTR3A": "ORY",
            "nom": "Orry la Ville"
        },
        {
            "codeTR3A": "BBN",
            "nom": "La Borne Blanche"
        },
        {
            "codeTR3A": "SUR",
            "nom": "Survilliers Fosses"
        },
        {
            "codeTR3A": "LOV",
            "nom": "Louvres"
        },
        {
            "codeTR3A": "LNX",
            "nom": "Les Noues"
        },
        {
            "codeTR3A": "GOU",
            "nom": "Goussainville"
        },
        {
            "codeTR3A": "VIB",
            "nom": "Villiers le Bel"
        },
        {
            "codeTR3A": "GAJ",
            "nom": "Garges Sarcelles"
        },
        {
            "codeTR3A": "PRF",
            "nom": "Pierrefitte Stains"
        },
        {
            "codeTR3A": "SDE",
            "nom": "St Denis"
        },
        {
            "codeTR3A": "SFD",
            "nom": "Stade de France St D"
        },
        {
            "codeTR3A": "GDS",
            "nom": "Paris Nord RER"
        },
        {
            "codeTR3A": "CLX",
            "nom": "Châtelet les Halles"
        },
        {
            "codeTR3A": "PAA",
            "nom": "Paris Lyon Banlieue"
        },
        {
            "codeTR3A": "MFA",
            "nom": "Maisons Alfort"
        },
        {
            "codeTR3A": "VSG",
            "nom": "Villeneuve S Georges"
        },
        {
            "codeTR3A": "KRW",
            "nom": "Montgeron Crosne"
        },
        {
            "codeTR3A": "YES",
            "nom": "Yerres"
        },
        {
            "codeTR3A": "BNY",
            "nom": "Brunoy"
        },
        {
            "codeTR3A": "BXI",
            "nom": "Boussy St Antoine"
        },
        {
            "codeTR3A": "CBV",
            "nom": "Combs la Ville"
        },
        {
            "codeTR3A": "LIU",
            "nom": "Lieusaint Moissy"
        },
        {
            "codeTR3A": "ZTN",
            "nom": "Savigny le Temple"
        },
        {
            "codeTR3A": "CES",
            "nom": "Cesson"
        },
        {
            "codeTR3A": "WEE",
            "nom": "Le Mée"
        },
        {
            "codeTR3A": "MEL",
            "nom": "Melun"
        }
    ],
    "heureProbable": "02/08/2012 15:59",
    "heureTheorique": "02/08/2012 15:59",
    "numero": "153260",
    "quai": null,
    "retard": null,
    "sens": "P",
    "voie": "DE",
    "voiePrecedente": null
},
{
    "codeMission": "PADI",
    "dessertes": [
        {
            "codeTR3A": "PNO",
            "nom": "Paris Nord GL"
        }
    ],
    "heureProbable": "02/08/2012 16:07",
    "heureTheorique": "02/08/2012 16:07",
    "numero": "848522",
    "quai": null,
    "retard": null,
    "sens": "P",
    "voie": "2",
    "voiePrecedente": null
},
{
    "codeMission": "AMIE",
    "dessertes": [
        {
            "codeTR3A": "PXE",
            "nom": "Pont Ste Maxence"
        },
        {
            "codeTR3A": "CPE",
            "nom": "Compiegne"
        },
        {
            "codeTR3A": "NOY",
            "nom": "Noyon"
        },
        {
            "codeTR3A": "CNY",
            "nom": "Chauny"
        },
        {
            "codeTR3A": "TGR",
            "nom": "Tergnier"
        },
        {
            "codeTR3A": "SQ",
            "nom": "St Quentin"
        }
    ],
    "heureProbable": "02/08/2012 16:35",
    "heureTheorique": "02/08/2012 16:35",
    "numero": "847907",
    "quai": null,
    "retard": null,
    "sens": "I",
    "voie": "1",
    "voiePrecedente": null
},
{
    "codeMission": "PADI",
    "dessertes": [
        {
            "codeTR3A": "CLY",
            "nom": "Chantilly Gouvieux"
        },
        {
            "codeTR3A": "ORY",
            "nom": "Orry la Ville"
        },
        {
            "codeTR3A": "PNO",
            "nom": "Paris Nord GL"
        }
    ],
    "heureProbable": "02/08/2012 16:40",
    "heureTheorique": "02/08/2012 16:40",
    "numero": "847822",
    "quai": null,
    "retard": null,
    "sens": "P",
    "voie": "2",
    "voiePrecedente": null
},
{
    "codeMission": "AMIE",
    "dessertes": [
        {
            "codeTR3A": "LAI",
            "nom": "Laigneville"
        },
        {
            "codeTR3A": "LIA",
            "nom": "Liancourt Rantigny"
        },
        {
            "codeTR3A": "CDO",
            "nom": "Clermont de l'Oise"
        },
        {
            "codeTR3A": "AVY",
            "nom": "Avréchy"
        },
        {
            "codeTR3A": "SJS",
            "nom": "St Just en Chaussée"
        }
    ],
    "heureProbable": "02/08/2012 16:43",
    "heureTheorique": "02/08/2012 16:43",
    "numero": "848517",
    "quai": null,
    "retard": null,
    "sens": "I",
    "voie": "1",
    "voiePrecedente": null
},
{
    "codeMission": "TOLI",
    "dessertes": [
        {
            "codeTR3A": "SLT",
            "nom": "St Leu d'Esserent"
        },
        {
            "codeTR3A": "PYO",
            "nom": "Précy sur Oise"
        },
        {
            "codeTR3A": "BRN",
            "nom": "Boran sur Oise"
        },
        {
            "codeTR3A": "BRK",
            "nom": "Bruyères sur Oise"
        },
        {
            "codeTR3A": "PEB",
            "nom": "Persan Beaumont"
        },
        {
            "codeTR3A": "CPO",
            "nom": "Champagne sur Oise"
        },
        {
            "codeTR3A": "IAP",
            "nom": "L'Isle Adam Parmain"
        },
        {
            "codeTR3A": "VMD",
            "nom": "Valmondois"
        },
        {
            "codeTR3A": "AUW",
            "nom": "Auvers sur Oise"
        },
        {
            "codeTR3A": "CPW",
            "nom": "Chaponval"
        },
        {
            "codeTR3A": "PPT",
            "nom": "Pont Petit"
        },
        {
            "codeTR3A": "EPL",
            "nom": "Epluches"
        },
        {
            "codeTR3A": "SOA",
            "nom": "St Ouen l'Aumone"
        },
        {
            "codeTR3A": "PSE",
            "nom": "Pontoise"
        }
    ],
    "heureProbable": "02/08/2012 16:54",
    "heureTheorique": "02/08/2012 16:54",
    "numero": "121042",
    "quai": null,
    "retard": null,
    "sens": "P",
    "voie": "DE",
    "voiePrecedente": null
},
{
    "codeMission": "TSOL",
    "dessertes": [],
    "heureProbable": "02/08/2012 17:07",
    "heureTheorique": "02/08/2012 17:07",
    "numero": "121031",
    "quai": null,
    "retard": null,
    "sens": "I",
    "voie": "AE",
    "voiePrecedente": null
} 
```

]

什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:55:40.487

或许

```
 reader: {
            type: 'json',
            model: 'Train'
        } 
```

??

# android - 在首选项中，像使用 RingtonePreference 一样选择我的声音

> ID：11792120
> 
> 赞同：11
> 
> 时间：2012-08-03T08:31:44.303
> 
> 标签：android, selection, android-preferences, audio

我的 /raw 文件夹中有声音，我希望我的用户能够像 RingtonePreference 一样在首选项中选择一种声音，但仅限于我的声音。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-06-23T13:38:20.700

这是我的 RingtonePreference 替换。列出了所有系统铃声和您的自定义铃声（在 xml 中定义，存储在 res/raw 中）：

**ExtraRingtonePreference.java**

```
package de.almisoft.test;

import java.util.Arrays;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.TreeMap;

import de.almisoft.test.R;

import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.content.res.TypedArray;
import android.database.Cursor;
import android.media.Ringtone;
import android.media.RingtoneManager;
import android.net.Uri;
import android.preference.DialogPreference;
import android.util.AttributeSet;

public class ExtraRingtonePreference extends DialogPreference {

    private Context mContext;
    private String mValue;
    private Ringtone ringtone;
    private int mRingtoneType;
    private boolean mShowSilent;
    private boolean mShowDefault;
    private CharSequence[] mExtraRingtones;
    private CharSequence[] mExtraRingtoneTitles;

    public ExtraRingtonePreference(Context context, AttributeSet attrs) {

        super(context, attrs);

        mContext = context;

        final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.ExtraRingtonePreference, 0, 0);

        mRingtoneType = a.getInt(R.styleable.ExtraRingtonePreference_ringtoneType, RingtoneManager.TYPE_RINGTONE);
        mShowDefault = a.getBoolean(R.styleable.ExtraRingtonePreference_showDefault, true);
        mShowSilent = a.getBoolean(R.styleable.ExtraRingtonePreference_showSilent, true);
        mExtraRingtones = a.getTextArray(R.styleable.ExtraRingtonePreference_extraRingtones);
        mExtraRingtoneTitles = a.getTextArray(R.styleable.ExtraRingtonePreference_extraRingtoneTitles);

        a.recycle();
    }

    public ExtraRingtonePreference(Context context) {
        this(context, null);
    }

    public String getValue() {
        return mValue;
    }

    private Map<String, Uri> getSounds(int type) {

        RingtoneManager ringtoneManager = new RingtoneManager(mContext);
        ringtoneManager.setType(type);
        Cursor cursor = ringtoneManager.getCursor();

        Map<String, Uri> list = new TreeMap<String, Uri>();
        while (cursor.moveToNext()) {
            String notificationTitle = cursor.getString(RingtoneManager.TITLE_COLUMN_INDEX);
            Uri notificationUri =  ringtoneManager.getRingtoneUri(cursor.getPosition());

            list.put(notificationTitle, notificationUri);
        }

        return list;
    }

    private Uri uriFromRaw(String name) {
        int resId = mContext.getResources().getIdentifier(name, "raw", mContext.getPackageName());
        return Uri.parse("android.resource://" + mContext.getPackageName() + "/" + resId);
    }

    private String getExtraRingtoneTitle(CharSequence name) {
        if (mExtraRingtones != null && mExtraRingtoneTitles != null) {
            int index = Arrays.asList(mExtraRingtones).indexOf(name);
            return mExtraRingtoneTitles[index].toString(); 
        } 

        return null;
    }

    @Override
    public CharSequence getSummary() {

        String ringtoneTitle = null;

        if (mValue != null) {

            if (mValue.length() == 0)
                ringtoneTitle = mContext.getString(R.string.silent);

            if (ringtoneTitle == null && mExtraRingtones != null && mExtraRingtoneTitles != null) {

                for (int i = 0; i < mExtraRingtones.length; i++) {

                    Uri uriExtra = uriFromRaw(mExtraRingtones[i].toString());

                    if (uriExtra.equals(Uri.parse(mValue))) {
                        ringtoneTitle = mExtraRingtoneTitles[i].toString();
                        break;
                    }
                }
            }

            if (ringtoneTitle == null) {
                Ringtone ringtone = RingtoneManager.getRingtone(mContext, Uri.parse(mValue));
                String title = ringtone.getTitle(mContext);
                if (title != null && title.length() > 0)
                ringtoneTitle = title;
            }

        }

        CharSequence summary = super.getSummary();

        if (ringtoneTitle != null) { 
            if (summary != null)
                return String.format(summary.toString(), ringtoneTitle);
            else
                return ringtoneTitle;
        } else return summary;
}

    @Override
    protected void onPrepareDialogBuilder(Builder builder) {

        final Map<String, Uri> sounds = new LinkedHashMap<String, Uri>();

        if (mExtraRingtones != null) {
            for (CharSequence extraRingtone : mExtraRingtones) {
                Uri uri = uriFromRaw(extraRingtone.toString());
                String title = getExtraRingtoneTitle(extraRingtone);

                sounds.put(title, uri);
            }
        }

        if (mShowDefault) {
            Uri uriDefault = RingtoneManager.getDefaultUri(mRingtoneType);
            if (uriDefault != null) {
                Ringtone ringtoneDefault = RingtoneManager.getRingtone(mContext, uriDefault);
                if (ringtoneDefault != null) {
                    sounds.put(ringtoneDefault.getTitle(mContext), uriDefault);
                }
            }   
        }

        if (mShowSilent) 
            sounds.put(mContext.getString(R.string.silent), Uri.parse(""));

        sounds.putAll(getSounds(RingtoneManager.TYPE_NOTIFICATION));

        final String[] titleArray = sounds.keySet().toArray(new String[0]);
        final Uri[] uriArray = sounds.values().toArray(new Uri[0]);

        int index = mValue != null ? Arrays.asList(uriArray).indexOf(Uri.parse(mValue)) : -1;

        builder.setSingleChoiceItems(titleArray, index, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {

                if (ringtone != null)
                    ringtone.stop();

                String title = titleArray[which];
                Uri uri = uriArray[which];

                if (uri != null) {
                    if (uri.toString().length() > 0) {
                        ringtone = RingtoneManager.getRingtone(mContext, uri);
                        ringtone.play();
                    }
                    mValue = uri.toString();
                } else mValue = null;

            }
        });

        builder.setPositiveButton(R.string.ok, this);
        builder.setNegativeButton(R.string.cancel, this);

    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {

        super.onDialogClosed(positiveResult);

        if (ringtone != null)
            ringtone.stop();

        if (positiveResult && callChangeListener(mValue)) {
            persistString(mValue);
            notifyChanged();
        }

    }

    @Override
    protected Object onGetDefaultValue(TypedArray a, int index) {
        return a.getString(index);
    }

    @Override
    protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {

        if (restoreValue)
            mValue = getPersistedString("");
        else {
            if (mExtraRingtones != null && defaultValue != null && defaultValue.toString().length() > 0) {

                int index = Arrays.asList(mExtraRingtones).indexOf((CharSequence) defaultValue);
                if (index >= 0) 
                    mValue = uriFromRaw(defaultValue.toString()).toString();
                else mValue = (String) defaultValue; 

        } else mValue = (String) defaultValue; 

            persistString(mValue);
        }

    }

} 
```

**资源/值/attrs.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <declare-styleable name="ExtraRingtonePreference">
        <attr name="ringtoneType">
            <!-- Ringtones. -->
            <flag name="ringtone" value="1" />
            <!-- Notification sounds. -->
            <flag name="notification" value="2" />
            <!-- Alarm sounds. -->
            <flag name="alarm" value="4" />
            <!-- All available ringtone sounds. -->
            <flag name="all" value="7" />
        </attr>
        <attr name="showSilent" format="boolean"/>
        <attr name="showDefault" format="boolean"/>
        <attr name="extraRingtones" format="reference"/>
        <attr name="extraRingtoneTitles" format="reference"/>
    </declare-styleable>

</resources> 
```

**res/values/strings.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="silent">Silent</string>
    <string name="ok">OK</string>
    <string name="cancel">Cancel</string>
    <string name="ringtoneTitle">Ringtone</string>
    <string name="ringtoneSummary">Ringtone: %s</string>

    <string-array name="extraRingtones">
        <item>deichkind_sone_musik</item>
        <item>madonna_like_a_virgin</item>
    </string-array>

    <string-array name="extraRingtoneTitles">
        <item>Sone Musik</item>
        <item>Like A Virgin</item>
    </string-array>
</resources> 
```

**资源/原始**

```
res
 ↳ raw
    ↳ deichkind_sone_musik.mp3
    ↳ madonna_like_a_virgin.mp3 
```

**res/xml/preferences.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:auto="http://schemas.android.com/apk/res-auto">

    <de.almisoft.test.ExtraRingtonePreference
        android:key="ringtone"
        android:title="@string/ringtoneTitle"
        android:summary="@string/ringtoneSummary"
        android:defaultValue="deichkind_sone_musik"
        auto:ringtoneType="notification"
        auto:showSilent="true"
        auto:showDefault="true"
        auto:extraRingtones="@array/extraRingtones"
        auto:extraRingtoneTitles="@array/extraRingtoneTitles"/>

    <!-- set android:defaultValue 
         to "deichkind_sone_musik" for your custom mp3
         to "" for silent
         to "content://settings/system/notification_sound" for system default ringtone -->

</PreferenceScreen> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-05T15:27:00.807

所以最后我查看了 ListPreference 的源代码，并做了一些修改。由于我不能使用 com.android.internal.R.styleable.ListPreference 我必须在 attrs.xml 创建自己的样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="ListPreference">
        <attr name="entries" format="string"></attr>
        <attr name="entryValues" format="string"></attr>
    </declare-styleable>
    <declare-styleable name="Preference">
        <attr name="summary" format="string"></attr>
    </declare-styleable>
</resources> 
```

然后将其导入到我的preferences.xml 文件中，如下所示：

```
 xmlns:foo="http://schemas.android.com/apk/res/com.abe.abemoto" 
```

并使用它：

```
 <com.abe.abemoto.preference.CustomSoundListPreference
        android:defaultValue="@string/pref_alert_ring_value_1"
        android:key="@string/pref_alert_sound_choice_for_notif_key"
        android:title="Sonnerie de notification"
        foo:entries="@array/pref_alert_ring_entries"
        foo:entryValues="@array/pref_alert_ring_values"
        foo:summary="Choisissez la sonnerie pour les notifications" /> 
```

在我的类 CustomSoundListPreference 中，我修改了 onPrepareDialogBu​​ilder 方法以在单击的项目上播放我的声音。

```
 @Override
protected void onPrepareDialogBuilder(Builder builder) {
    super.onPrepareDialogBuilder(builder);

    mMediaPlayer = new MediaPlayer();

    if (mEntries == null || mEntryValues == null) {
        throw new IllegalStateException(
                "ListPreference requires an entries array and an entryValues array.");
    }

    mClickedDialogEntryIndex = getValueIndex();
    builder.setSingleChoiceItems(mEntries, mClickedDialogEntryIndex,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    mClickedDialogEntryIndex = which;

                    String value = mEntryValues[which].toString();

                    Resources res = getContext().getResources();
                    int resId = res.getIdentifier(value, "raw",
                            getContext().getPackageName());

                    Uri uri = Uri.parse(String.format(getContext()
                            .getString(R.string.resource_sound),
                            getContext().getPackageName(), resId));

                    Log.d(TAG, "uri sound = " + uri);
                    try {
                        mMediaPlayer.reset();
                        mMediaPlayer.setDataSource(getContext(), uri);
                        mMediaPlayer.prepare();
                        mMediaPlayer.start();

                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }

                }
            });

    builder.setPositiveButton("Ok", this);
    builder.setNegativeButton("Annuler", this);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T12:47:02.210

这是自定义 ListPreference 的完整代码，就像铃声首选项一样：

```
import java.io.IOException;

import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.database.Cursor;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Parcel;
import android.os.Parcelable;
import android.preference.ListPreference;
import android.provider.MediaStore;
import android.util.AttributeSet;
import android.util.Log;

public class CustomListPreference extends ListPreference{

private MediaPlayer mMediaPlayer;
private Context mContext;
CharSequence[] mEntries;
CharSequence[] mEntryValues;
private int mClickedDialogEntryIndex;
private String mValue;

public CustomListPreference(Context context) {
    super(context);
    mContext = context;
}

/**
 * Sets the value of the key. This should be one of the entries in
 * {@link #getEntryValues()}.
 * 
 * @param value The value to set for the key.
 */
public void setValue(String value) {
    mValue = value;

    persistString(value);
}

/**
 * Sets the value to the given index from the entry values.
 * 
 * @param index The index of the value to set.
 */
public void setValueIndex(int index) {
    if (mEntryValues != null) {
        setValue(mEntryValues[index].toString());
    }
}

/**
 * Returns the value of the key. This should be one of the entries in
 * {@link #getEntryValues()}.
 * 
 * @return The value of the key.
 */
public String getValue() {
    return mValue; 
}

/**
 * Returns the entry corresponding to the current value.
 * 
 * @return The entry corresponding to the current value, or null.
 */
public CharSequence getEntry() {
    int index = getValueIndex();
    return index >= 0 && mEntries != null ? mEntries[index] : null;
}

 public int findIndexOfValue(String value) {
    if (value != null && mEntryValues != null) {
        for (int i = mEntryValues.length - 1; i >= 0; i--) {
            if (mEntryValues[i].equals(value)) {
                return i;
            }
        }
    }
    return -1;
}

private int  getValueIndex() {

    return findIndexOfValue(mValue);
}

@Override
protected void onPrepareDialogBuilder(Builder builder) {
    super.onPrepareDialogBuilder(builder);

    mMediaPlayer = new MediaPlayer();
    mEntries = getEntries();
    mEntryValues = getEntryValues();

    if (mEntries == null || mEntryValues == null) {
        throw new IllegalStateException(
                "ListPreference requires an entries array and an entryValues array.");
    }

    mClickedDialogEntryIndex = getValueIndex();
    builder.setSingleChoiceItems(mEntries, mClickedDialogEntryIndex,
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    mClickedDialogEntryIndex = which;

                    String value = mEntryValues[which].toString();
                    String path = findPathFromName(value);

                    try {
                        playSong(path);
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            });

    builder.setPositiveButton("Ok", this);
    builder.setNegativeButton("Cancel", this);
}

private void playSong(String path) throws IllegalArgumentException,
    IllegalStateException, IOException {

    Log.d("ringtone", "playSong :: " + path);

    mMediaPlayer.reset();
    mMediaPlayer.setDataSource(path);
    mMediaPlayer.setAudioStreamType(AudioManager.STREAM_RING);
//  mMediaPlayer.setLooping(true);
    mMediaPlayer.prepare();
    mMediaPlayer.start();
}

public String findPathFromName(String name) {
    Cursor mCursor = getContext().getContentResolver().query(
            MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, null, 
            MediaStore.Audio.Media.TITLE  + "='" +  name + "'", null, null );

    String path = "";
    if(mCursor.moveToFirst()){
        path = mCursor.getString(mCursor.getColumnIndex(MediaStore.Audio.Media.DATA));
    }

    mCursor.close();
    mCursor = null;

    return path;
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    if (state == null || !state.getClass().equals(SavedState.class)) {
        // Didn't save state for us in onSaveInstanceState
        super.onRestoreInstanceState(state);
        return;
    }

    SavedState myState = (SavedState) state;
    super.onRestoreInstanceState(myState.getSuperState());
    setValue(myState.value);
}

private static class SavedState extends BaseSavedState {
    String value;

    public SavedState(Parcel source) {
        super(source);
        value = source.readString();
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        super.writeToParcel(dest, flags);
        dest.writeString(value);
    }

    public SavedState(Parcelable superState) {
        super(superState);
    }

    public static final Parcelable.Creator<SavedState> CREATOR =
            new Parcelable.Creator<SavedState>() {
        public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
        }

        public SavedState[] newArray(int size) {
            return new SavedState[size];
        }
    };
}

 @Override
protected void onDialogClosed(boolean positiveResult) {
    super.onDialogClosed(positiveResult);

    if (positiveResult && mClickedDialogEntryIndex >= 0 && mEntryValues != null) {
        String value = mEntryValues[mClickedDialogEntryIndex].toString();
        if (callChangeListener(value)) {
            setValue(value);
        }
    }

    mMediaPlayer.stop();
    mMediaPlayer.release();
}

@Override
protected Object onGetDefaultValue(TypedArray a, int index) {
    return a.getString(index);
}

@Override
protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {
    setValue(restoreValue ? getPersistedString(mValue) : (String) defaultValue);
}

@Override
protected Parcelable onSaveInstanceState() {
    final Parcelable superState = super.onSaveInstanceState();
    if (isPersistent()) {
        // No need to save instance state since it's persistent
        return superState;
    }

    final SavedState myState = new SavedState(superState);
    myState.value = getValue();
    return myState;
}
} 
```

希望这对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-09T07:21:47.583

在进行铃声偏好自定义时，我更喜欢铃声只播放一小段时间，有点像样本声音。如果他们只是从列表中选择声音，用户不需要听到整个声音播放。这是我实现这一目标的方法：

首先创建一个将播放铃声的服务（使用铃声管理器播放声音而不是媒体播放器，因为它为我们处理取消）：

公共类 PlayRingtoneService 扩展服务 { 静态铃声 r; 私有处理程序处理程序；

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    //activating alarm sound
    if (r != null)
        r.stop();

    String filePath = intent.getStringExtra("uri");
    r = RingtoneManager.getRingtone(this, Uri.parse(filePath));
    r.play();

    handler.removeCallbacksAndMessages(null);

    handler.postDelayed(new Runnable() {
        @Override
        public void run() {
            if(r!=null)
                r.stop();
        }
    },6000L); //stop sound in 6 seconds

    return super.onStartCommand(intent, flags, startId);
}

void setThreadPriority(int priority) {

    try {
        Process.setThreadPriority(priority);
    } catch (Exception e) {
        Timber.e(e);
    }

}

@Override
public void onCreate() {
    super.onCreate();
     handler =new Handler();
    setThreadPriority(Process.THREAD_PRIORITY_URGENT_AUDIO);

}

@Override
public void onDestroy() {
    if (r != null)
        r.stop();
}

@Nullable
@Override
public IBinder onBind(Intent intent) {
    return null;
} 
```

}

还使用服务更新清单：

```
<service android:name=".services.PlayRingtoneService" /> 
```

然后使用上面但修改的解决方案，您可以创建一个列表首选项，其行为就像铃声首选项：

```
public class CustomRingtoneListPreference extends ListPreference {

CharSequence[] mEntries;
CharSequence[] mEntryValues;
private int mClickedDialogEntryIndex;
private String mValue;

public CustomRingtoneListPreference(Context context) {
    super(context);
}

public CustomRingtoneListPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
}

/**
 * Returns the value of the key. This should be one of the entries in
 * {@link #getEntryValues()}.
 *
 * @return The value of the key.
 */
public String getValue() {
    return mValue;
}

/**
 * Sets the value of the key. This should be one of the entries in
 * {@link #getEntryValues()}.
 *
 * @param value The value to set for the key.
 */
public void setValue(String value) {
    mValue = value;

    persistString(value);
}

/**
 * Returns the entry corresponding to the current value.
 *
 * @return The entry corresponding to the current value, or null.
 */
public CharSequence getEntry() {
    int index = getValueIndex();
    return index >= 0 && mEntries != null ? mEntries[index] : null;
}

public int findIndexOfValue(String value) {
    if (value != null && mEntryValues != null) {
        for (int i = mEntryValues.length - 1; i >= 0; i--) {
            if (mEntryValues[i].equals(value)) {
                return i;
            }
        }
    }
    return -1;
}

private int getValueIndex() {

    return findIndexOfValue(mValue);
}

/**
 * Sets the value to the given index from the entry values.
 *
 * @param index The index of the value to set.
 */
public void setValueIndex(int index) {
    if (mEntryValues != null) {
        setValue(mEntryValues[index].toString());
    }
}

@Override
protected void onPrepareDialogBuilder(AlertDialog.Builder builder) {
    super.onPrepareDialogBuilder(builder);
    mEntries = getEntries();
    mEntryValues = getEntryValues();

    if (mEntries == null || mEntryValues == null) {
        throw new IllegalStateException(
                "ListPreference requires an entries array and an entryValues array.");
    }

    mClickedDialogEntryIndex = getValueIndex();
    builder.setSingleChoiceItems(mEntries, mClickedDialogEntryIndex,
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    mClickedDialogEntryIndex = which;

                    String value = mEntryValues[which].toString();
                        playSong(value);
                }
            });

    builder.setPositiveButton("Ok", this);
    builder.setNegativeButton("Cancel", this);
}

private void playSong(String path) {
    Intent i = new Intent(getContext(), PlayRingtoneService.class);
    i.putExtra("uri", path);
    getContext().startService(i);

}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    if (state == null || !state.getClass().equals(SavedState.class)) {
        // Didn't save state for us in onSaveInstanceState
        super.onRestoreInstanceState(state);
        return;
    }

    SavedState myState = (SavedState) state;
    super.onRestoreInstanceState(myState.getSuperState());
    setValue(myState.value);
}

@Override
protected void onDialogClosed(boolean positiveResult) {
    super.onDialogClosed(positiveResult);

    if (positiveResult && mClickedDialogEntryIndex >= 0 && mEntryValues != null) {
        String value = mEntryValues[mClickedDialogEntryIndex].toString();
        if (callChangeListener(value)) {
            setValue(value);
        }
    }

    Intent i = new Intent(getContext(), PlayRingtoneService.class);
    getContext().stopService(i);
}

@Override
protected Object onGetDefaultValue(TypedArray a, int index) {
    return a.getString(index);
}

@Override
protected void onSetInitialValue(boolean restoreValue, Object defaultValue) {

    setValue(restoreValue ? getPersistedString(mValue) : (String) defaultValue);
}

@Override
protected Parcelable onSaveInstanceState() {
    final Parcelable superState = super.onSaveInstanceState();
    if (isPersistent()) {
        // No need to save instance state since it's persistent
        return superState;
    }

    final SavedState myState = new SavedState(superState);
    myState.value = getValue();
    return myState;
}

private static class SavedState extends BaseSavedState {
    public static final Parcelable.Creator<SavedState> CREATOR =
            new Parcelable.Creator<SavedState>() {
                public SavedState createFromParcel(Parcel in) {
                    return new SavedState(in);
                }

                public SavedState[] newArray(int size) {
                    return new SavedState[size];
                }
            };
    String value;

    public SavedState(Parcel source) {
        super(source);
        value = source.readString();
    }

    public SavedState(Parcelable superState) {
        super(superState);
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        super.writeToParcel(dest, flags);
        dest.writeString(value);
    }
} 
```

}

现在在你的 xml 中像这样使用它：

```
<mypackage.blah.blah.CustomRingtoneListPreference
            android:key="myRingtone"
            android:title="my title"
            android:summary="ringtone chosen %s"
            android:defaultValue="0"
            android:dependency="whatever you have"

            /> 
```

现在要将值实际加载到列表中，我们创建一个 utils 方法，该方法可以获取所有内部和外部媒体，并将其放入我们的模型类中，称为歌曲，定义如下：

```
public class Song {

private long id;
private Uri filePath;

private boolean externalPath;

/**
 * Creates a new Song, with specified `songID` and `filePath`.
 *
 * @note It's a unique Android identifier for a media file
 * anywhere on the system.
 */
public Song(long id, String title, String artist, Uri fileUri, boolean externalPath) {
    this.id = id;
    this.title = title;
    this.artist = artist;
    this.filePath = fileUri;
    this.externalPath = externalPath;
}

/**
 * Identifier for the song on the Android system.
 * (so we can locate the file anywhere)
 */
public long getId() {
    return id;
}

public Uri getFilePath() {
    return filePath;
}

public Song setFilePath(Uri filePath) {
    this.filePath = filePath;
    return this;
}

private String title = "";
private String artist = "";

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getArtist() {
    return artist;
}

public void setArtist(String artist) {
    this.artist = artist;
}

public boolean isExternalPath() {
    return externalPath;
}

public Song setIsExternalPath(boolean externalPath) {
    this.externalPath = externalPath;
    return this;
} 
```

}

现在在您的 Util 类中，或者如果您希望创建一个静态方法，该类将查询媒体存储中的所有音频文件：

public static List getAllExternalAudioSongs(Context c) { List songList = new ArrayList<>(); ContentResolver contentResolver = c.getContentResolver();

```
 List<Uri> contentUriLists = new ArrayList<>();
    contentUriLists.add(MediaStore.Audio.Media.INTERNAL_CONTENT_URI);
    contentUriLists.add(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
    String selection= MediaStore.Audio.Media.DURATION + ">= 3000";

    boolean externalPath = false;

    for (Uri uri : contentUriLists) {
        Cursor cursor = contentResolver.query(uri, null, selection, null, android.provider.MediaStore.Audio.Media.TITLE+ " ASC");
        if (cursor == null) {
            // query failed, handle error.
        } else if (!cursor.moveToFirst()) {
            // no media on the device
        } else {
            int titleColumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Media.TITLE);
            int idColumn = cursor.getColumnIndex(android.provider.MediaStore.Audio.Media._ID);
            int artistColumn = cursor.getColumnIndex(MediaStore.Audio.Media.ARTIST);

            do {
                long id = cursor.getLong(idColumn);
                String title = cursor.getString(titleColumn);
                String artist = cursor.getString(artistColumn);
                Uri contentUri = ContentUris.withAppendedId(
                        uri, id);
                Song song = new Song(id, title, artist, contentUri, externalPath);
                songList.add(song);
            } while (cursor.moveToNext());
            externalPath=true;
        }
    }
    return songList;
} 
```

注意：externalPath 只是为了区分内部音频文件和外部音频文件。

最后，在preferenceActivity（或片段）的onCreate中，您可以这样做：

```
private void setRingtoneList() {

    ListPreference listPreferenceCategory = (ListPreference) findPreference("myRingtone");
    if (listPreferenceCategory != null) {
        List<Song> songList = Utils.getAllExternalAudioSongs(getApplicationContext());
        CharSequence entries[] = new String[songList.size()];
        CharSequence entryValues[] = new String[songList.size()];
        int i = 0;
        for (Song song : songList) {
            entries[i] = song.getTitle();
            entryValues[i] = song.getFilePath().toString();
            i++;
        }
        listPreferenceCategory.setEntries(entries);
        listPreferenceCategory.setEntryValues(entryValues);
    }
} 
```

注意：您需要外部存储的运行时权限。并且要更新摘要，您必须在我相信的偏好活动中执行此操作。无论如何，这很好地说明了如何播放示例音频而不是整个音频文件。

# wcf - SOAP 错误 - 集成 .NET WCF 和 Java WSImport

> ID：11792121
> 
> 赞同：4
> 
> 时间：2012-08-03T08:31:45.490
> 
> 标签：wcf, soap, wsdl, jax-ws, fault

*在使用 .NET WCF 创建 Web 服务并使用 JAX-WS ( wsimport* )使用它时，我正在寻找有关以正确方式定义 SOAP 错误的帮助/建议。

假设我的服务如下所示：

```
[ServiceContract(Namespace = "http://sub.pub.com")]
public interface IService
{
    [OperationContract]
    [FaultContract(typeof(ArgumentOutOfRangeException))]
    void OperationOne(int deviceId, int socket);

    [OperationContract]
    [FaultContract(typeof(ArgumentOutOfRangeException))]
    void OperationTwo(int deviceId, int socket);
} 
```

在我服务的某个地方，我正在做以下事情......

```
throw new FaultException<ArgumentOutOfRangeException>(...); 
```

*为我的 WCF 服务的 WSDL 生成 JAX-WS 工件会导致OperationOne*和*OperationTwo*出现以下 Java 异常：

*   IServiceOperationOneArgumentOutOfRangeExceptionFaultFaultMessage
*   IServiceOperationTwoArgumentOutOfRangeExceptionFaultFaultMessage

它可以工作，但是很难看，而且我的代码变得很奇怪，因为同一件事有两个例外（在此示例中：参数超出范围）。

*   **我是否以正确的方式使用通用 FaultException？**
*   **如何使用 wsimport 正确使用此类 WSDL 以仅生成 1 个异常？**

# jakarta-ee - 如何在多模块 Java EE 项目中配置 Maven？

> ID：11792124
> 
> 赞同：0
> 
> 时间：2012-08-03T08:31:58.653
> 
> 标签：jakarta-ee, maven, websphere, ear, pom.xml

在我的项目中，将使用不同的模块生成两个独立的耳朵。

我的问题是找出如何绑定 Websphere 的库，实际上如何在 maven 项目中使用 Websphere。第二个问题是找出 poms 的样子。

EAR1 --> 模 A、模 B、模 C

EAR2 --> 模 A、模 D、模 E

模块 A --> EJB 模块

模块 B --> WEB 模块

模块 C --> EJB 模块

模块 D --> EJB 模块

模块 E --> EJB 模块

应用服务器 --> Websphere 8

使用的技术：MyFaces、OpenJPA

我可以在 EAR 项目中使用类似的东西：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-ear-plugin</artifactId>
        <configuration>
            <modules>
                <webmodule>
                    ../ModulB
                </webmodule>
                <ejbmodule>
                    ../ModulA
                </ejbmodule>
                <ejbmodule>
                    ../ModulC
                </ejbmodule>
            </modules>
        </configuration>
    </plugin> 
```

# php - 在 PHP 中正确打印 python 脚本输出

> ID：11792129
> 
> 赞同：3
> 
> 时间：2012-08-03T08:32:44.823
> 
> 标签：php, python

我有一个 php 文件调用一个脚本并像这样打印输出

```
    $output=shell_exec('/usr/bin/python hello.py');
    回声$输出；

```

它打印；

```
    b'total 16\ndrwx---rx 2 oae 用户 4096 Jul 31 14:21 .\ndrwxr-x--x+ 9 oae root 4096 Jul 26 13:59 ..\n-rwx---rx 1 oae 用户 90 8 月 3 日 11:22 hello.py\n-rwx---rx 1 oae 用户 225 8 月 3 日 11:22 index.php\n'

```

但应该是这样的；

```
    总计 16K
    drwx---rx 2 oae 用户 4.0K Jul 31 14:21 ./
    drwxr-x--x+ 9 oae root 4.0K Jul 26 13:59 ../
    -rwx---rx 1 oae 用户 90 年 8 月 3 日 11:22 hello.py*
    -rwx---rx 1 oae 用户 225 Aug 3 11:22 index.php*

```

\n 字符不应显示。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T09:13:53.267

这可以工作

```
$output=shell_exec('/usr/bin/python hello.py');
echo "<pre>";
print_r($output);
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:39:37.767

希望您尝试在 web.xml 中打印此字符串。在这种情况下，PHP 可能无法使用 \n 字符，而是希望`<br/>` PHP 有一个内置函数来处理字符串的这种转换。

[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:45:01.263

另一种方法是将字符串包装在`<pre>...</pre>`标签之间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:32:01.797

这似乎是 Python 3 脚本的输出：

```
from subprocess import check_output as qx
print(qx(['ls'])) 
```

子进程返回字节，打印函数将它们的表示打印为`b'...\n...'`其中 '\n' 是两个字符（不是换行符）。

您可以通过将 qx() 返回值转换为 Unicode 然后打印它或按原样写入字节来修复它：

```
sys.stdout.buffer.write(qx(['ls'])) 
```

# android - 自定义 Adapter 的 getView() 中的空指针异常

> ID：11792133
> 
> 赞同：0
> 
> 时间：2012-08-03T08:32:51.717
> 
> 标签：android, nullpointerexception, custom-adapter

我正在为我的 ListView 使用这个自定义适配器：

```
public class SideMenuAdapter extends BaseAdapter {

    private static final int TYPE_MAX_COUNT = 2;
    private static LayoutInflater inflater = null;
    private Activity activity;
    public static String[] values;
    ListView myList;

    public SideMenuAdapter(Activity a, String[] sa, ListView lv) {

        values = sa;
        activity = a;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        myList = lv;
    }

    public int getCount() {

        return values.length;
    }

    public Object getItem(int position) {

        return position;
    }

    public long getItemId(int position) {

        return position;
    }

    public static class ViewHolder {

        public TextView mainText;
        public TextView sideText;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder = new ViewHolder();
        View vi = convertView;
        if (vi == null) {

            //here i am getting NullPointerException
            vi.setTag(holder);
        } else {

            holder = (ViewHolder) vi.getTag();
        }
        vi = inflater.inflate(R.layout.side_menu_list_item, null);
        holder.mainText = (TextView) vi.findViewById(R.id.mainText_sideMenu);
        holder.sideText = (TextView) vi.findViewById(R.id.sideText_sideMenu);
        holder.mainText.setText(values[position]);
        if(position == 2){

            holder.sideText.setText("3");
            holder.sideText.setBackgroundResource(R.drawable.orange);
        }
        return convertView;
    }
    @Override
    public int getViewTypeCount() {

        return TYPE_MAX_COUNT;
    }
} 
```

我以这种方式将适配器设置为我的列表视图：

```
 String menuItems[] = new String[] { "My Wants", "Profile", "Notifications",
            "Feedback", "Logout" };
    listView1.setAdapter(new SideMenuAdapter(this, menuItems, listView1)); 
```

我哪里错了？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:39:12.417

`vi`你应该在你之前初始化`vi.setTag(holder);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:45:28.040

试试这个，可能对你有帮助...

```
public View getView(int position, @Nullable View convertView, ViewGroup parent) {

    ViewHolder holder = new ViewHolder();
    View vi = convertView;
    if (vi == null) {
        LayoutInflater inflater = ((Activity)activity).getLayoutInflater();
        vi = inflater.inflate(R.layout.side_menu_list_item, null);
        holder.mainText = (TextView) vi.findViewById(R.id.mainText_sideMenu);
        holder.sideText = (TextView) vi.findViewById(R.id.sideText_sideMenu);
        vi.setTag(holder);
    } else {

        holder = (ViewHolder) vi.getTag();
    }

    holder.mainText.setText(values[position]);
    if(position == 2){

        holder.sideText.setText("3");
        holder.sideText.setBackgroundResource(R.drawable.orange);
    }
    return convertView;
} 
```

# android - 单击图像时创建下拉菜单

> ID：11792137
> 
> 赞同：1
> 
> 时间：2012-08-03T08:33:07.647
> 
> 标签：android, drop-down-menu

我想为我的 android 应用程序创建一个按钮，单击操作会打开一个下拉菜单列表。

类似于 Go Launcher 的菜单按钮，如下所示：

![在此处输入图像描述](../Images/361ce6a21c92f413e679d67657dc1a49.png) ![在此处输入图像描述](../Images/de8332fa6def11d34dee9406c74e71fb.png)

我不想使用操作栏；我阅读了有关[PopupMenu](http://developer.android.com/reference/android/widget/PopupMenu.html)和[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)的信息，但它们仅从 API 级别 11 引入，我想从 API 4 中获得支持。

有一些简单的方法或库来实现这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:48:44.547

我发现这个库做类似的事情：

[新快速动作](https://github.com/lorensiuswlt/NewQuickAction)

它使用简单，效率高！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T06:37:46.293

我找到了另一个非常适合这项任务的库。

[Droppy菜单](https://github.com/shehabic/Droppy)

使用非常简单，并且支持在菜单中添加自定义视图

# php - 在内部按键拆分数组

> ID：11792141
> 
> 赞同：1
> 
> 时间：2012-08-03T08:33:16.283
> 
> 标签：php

我有一个这样的数组：

```
Array (
    0 => Array ( 
        'id' => 1,
        'name' => 'Hack n\' Slash',
        'slug' => 'hack-n-slash',
        'popular' => 0
    ),
    1 => Array ( 
        'id' => 2,
        'name' => 'FPP',
        'slug' => 'fpp',
        'popular' => 1
    ),  
    2 => Array ( 
        'id' => 3,
        'name' => 'RPG',
        'slug' => 'rpg',
        'popular' => 1
    )
) 
```

我想要的是通过 key 将它分成两个数组`popular`，所以我会有一个类似的列表：

受欢迎的：

*   一
*   二

不受欢迎：

*   一
*   二

我尝试像这样使用 if/else：

```
foreach($genres as $genre) : 
    if($genre['popular'] == '1' : 
        echo $genre['name']; 
    endif; 
endforeach; 
```

但是，当我添加另一个语句 ( `if($genre['popular'] == '0')`) 时，我无法使用它，因为它非常混乱。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:41:20.627

```
<?php

    $pages   = array(
        array(
            "id"      => 1,
            "name"    => "Hack n' Slash",
            "slug"    => "hack-n-slash",
            "popular" => 0
        ),
        array(
            "id"      => 2,
            "name"    => "FPP",
            "slug"    => "fpp",
            "popular" => 1
        ),
        array(
            "id"      => 3,
            "name"    => "RPG",
            "slug"    => "rpg",
            "popular" => 1
        )
    );
    $results = array();
    foreach ($pages as $page) {
        $results[$page["popular"]][] = $page["name"];
    }

    print_r($results); 
```

在这种情况下，`$results[0]`将包含一个不受欢迎的页面列表，`$results[1]`并将包含一个受欢迎的页面列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:45:29.533

为什么不做类似的事情

```
$popular = array();
$notPopular = array();
foreach($genres as $genre) {
    if($genre['popular'] == '1')
        $popular[] = $genre;
    else
        $notPopular[] = $genre;
} 
```

并在代码中使用大括号？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:53:57.213

更通用的解决方案，使用 PHP 闭包

```
$pages   = array(
        array(
            "id"      => 1,
            "name"    => "Hack n' Slash",
            "slug"    => "hack-n-slash",
            "popular" => 0
        ),
        array(
            "id"      => 2,
            "name"    => "FPP",
            "slug"    => "fpp",
            "popular" => 1
        ),
        array(
            "id"      => 3,
            "name"    => "RPG",
            "slug"    => "rpg",
            "popular" => 1
        )
    );

function myFilter($arrayValues,$key,$value) {
    return array_filter($arrayValues,
                        function($entry) use ($key,$value) {
                            return $entry[$key] == $value;
                        }
            );
}

$popular = myFilter($pages,'popular',1);
var_dump($popular);
$unpopular = myFilter($pages,'popular',0);
var_dump($unpopular); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:41:22.167

为您要拆分的键构建一个数组（让我们称之为键数组）。对于原始数组中的每个条目，如果它的键尚未出现在键数组中，则为其创建一个新的 Array()。然后，只需将条目推入其键数组数组即可。

```
function split_by_key($entries, $key) {
    $results = array();
    foreach ($entries as $entry) {
        $results[$entry[$key]][] = $entry;
    }
    return $results;
} 
```

用于

```
$by_popularity = split_by_key($pages, 'popular');
$popular = $by_popularity[1];
$not_popular = $by_popularity[0]; 
```

# cocos2d-iphone - 将屏幕位置设置为屏幕中心

> ID：11792145
> 
> 赞同：0
> 
> 时间：2012-08-03T08:33:31.993
> 
> 标签：cocos2d-iphone, box2d-iphone

我正在使用基于图块的游戏，并且还使用了操纵杆。使用操纵杆精灵身体移动完美，但瓷砖地图无法滚动。

```
-(void)setCenterOfScreen:(b2Vec2)position
{
    int x=MAX(position.x*PTM_RATIO, size.width/2);
    int y=MAX(position.y*PTM_RATIO, size.height/2);

    int x1=MIN(x, (theMap.mapSize.width * theMap.tileSize.width-size.width/2));
    int y1=MIN(y, (theMap.mapSize.height * theMap.tileSize.height-size.height/2));

    b2Vec2 goodpoint=b2Vec2(x1,y1);
    NSLog(@"GoodPoint X: %f",goodpoint.x);
    NSLog(@"GoodPoint Y: %f",goodpoint.y);

    b2Vec2 differ=b2Vec2((size.width/2-goodpoint.x),(size.height/2-goodpoint.y));
    position=differ;
} 
```

这是真实的逻辑吗？请帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:58:15.740

你可能想看看这个写得很好的关于瓦片地图的教程，它不使用操纵杆，但很容易改变代码，这样它就可以了（我自己已经这样做了）。 [http://www.raywenderlich.com/1163/how-to-make-a-tile-based-game-with-cocos2d](http://www.raywenderlich.com/1163/how-to-make-a-tile-based-game-with-cocos2d)

# database - Play 中的 SSL 连接！框架

> ID：11792146
> 
> 赞同：3
> 
> 时间：2012-08-03T08:33:35.767
> 
> 标签：database, postgresql, scala, playframework

从戏剧！API 可以使用 application.conf 中的以下配置建立数据库连接：

```
db.default.driver=org.postgresql.Driver
db.default.url="jdbc:postgresql://someDomain.com/someDatabase"
db.default.user=user
db.default.password=password 
```

但是当我`&ssl=true`输入 url 时，它没有被注册并且我收到以下错误：

> 引起：org.postgresql.util.PSQLException：致命：主机“xx.xx.xx.xx”，用户“user”，数据库“test&ssl=true&sslfactory=org.postgresql.ssl.NonValida”没有pg_hba.conf条目， SSL 关闭

有什么方法可以强制播放！通过 .conf 文件使用 SSL 连接？

更新：我忘了提到我使用该`psql`命令从控制台成功登录尝试。不知何故，一定是 Play 不理解 ssl 参数。

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T10:14:33.130

Postgresql 报告`database "test&ssl=true&sslfactory=org.postgresql.ssl.NonValida"`为您尝试连接的数据库名称表明 JDBC 驱动程序没有按照您的需要取消该后缀并对其进行处理。

您可能需要`?`在第一个参数之前使用，如普通 URL：

```
jdbc://db.example.com/test?ssl=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:20:27.080

问题似乎是[Postgres](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)端的配置？

从文档中我怀疑数据库创建的默认 pg_hba.conf 文件不包含 SSL 条目，您需要手动添加它。

# android - 如何更改对话框的标题颜色？

> ID：11792151
> 
> 赞同：0
> 
> 时间：2012-08-03T08:34:03.717
> 
> 标签：android, colors, styles, dialog

我在我的应用程序中使用对话框。但我想改变我的对话框标题的颜色。我该如何处理。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:43:14.853

您可以尝试扩展默认主题并在您的活动中使用它。您需要扩展 Theme.Dialog 样式。[在这里](http://www.anddev.org/custom_theme_dialog___transparent_background-t7300.html)找到示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:43:48.210

如果您使用`AlertDialog`，则`setCustomTitle(View)`可以使用一个功能（也在 Builder 中）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T08:40:57.713

你可以根据自己的意愿创建一个 xml .. 然后在对话框中膨胀布局..

```
 LayoutInflater factory2 = LayoutInflater.from(this);
    final View coloredChangedView= factory2.inflate(R.layout.my_layout, null);
//do other things...
.setView(coloredChangedView); 
```

这样你就可以自定义你的对话框..

# ruby-on-rails - 混合单选按钮和 text_field

> ID：11792157
> 
> 赞同：6
> 
> 时间：2012-08-03T08:34:17.610
> 
> 标签：ruby-on-rails, forms, radio-button, textfield

我正在尝试将单选按钮和 text_field 组合为一个值：

```
= f.radio_button :system, "bacteria"
Bacteria
= f.radio_button :system, "mammalian"
Mammalian
= f.radio_button :system, "yeast"
Yeast
= f.radio_button :system, "insect"
Insect
= f.radio_button :system, "other"
Other:
= f.text_field :system, class:"input-small" 
```

当我提交时，没有任何反应，因为即使检查了收音机（我认为它考虑了文本字段），参数中也会给出一个空白值。

我试图给 text_field 取另一个名字，并在更新后替换了控制器中的 :system 值，但它看起来像一个肮脏的方式......

你有更清洁的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:17:49.000

在这里，您不能直接将 radio_button 和 text_field 混合在一起用于同一字段。我认为您可以定义一个额外的 radio_button 字段，该字段将被隐藏，并且当用户输入 text_field 时其值将得到更新。

```
= f.radio_button :system, "bacteria"
Bacteria
= f.radio_button :system, "mammalian"
Mammalian
= f.radio_button :system, "yeast"
Yeast
= f.radio_button :system, "insect"
Insect
= f.radio_button :system, "other"
Other:
= f.radio_button :system, nil, :id => :hidden_radio, :style => "display:none"
= f.text_field :free_system_input, class:"input-small", :id => :free_system_input 
```

在上面，您将在 text_field 上编写 onchange 事件，并且每当在 text_field 中输入值时，它会将隐藏的 radio_button 的值设置为 text_field_value。

```
:javascript
 $("free_system_input").keyup(function(){
   $("hidden_radio").val($(this).val())
 }) 
```

上面的代码只是为了给出如何处理问题的想法，并且不会像它一样工作.. :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:03:33.173

感谢 Sandip 的帮助，我设法解决了我的问题！

这是视图：

```
= f.radio_button :system, "bacteria"
Bacteria
= f.radio_button :system, "mammalian"
Mammalian
= f.radio_button :system, "yeast"
Yeast
= f.radio_button :system, "insect"
Insect
%br/
= f.radio_button :system, nil, id: 'other_system_radio', 
                checked: radio_checked?('system', f.object.system) 
Other:
%input.input-small#other_system_text{ value: text_input?('system', f.object.system) } 
```

我使用辅助函数来管理编辑表单（如果值与给定值不同，则填写文本字段）：

```
def radio_checked?(type,val)
  case type
    when 'system'
      ['bacteria', 'mammalian', 'yeast', 'insect'].include?(val) ? '' : 'checked'               
    end
  end

def text_input?(type,val)
  case type
    when 'system'
      ['bacteria', 'mammalian', 'yeast', 'insect'].include?(val) ? '' : val
  end       
end 
```

当用户关注文本字段时，还有一点 Javascript 可以选择“其他”单选按钮：

```
@handle_other_field = ->
  $('#other_system_text').focus( -> $('#other_system_radio').attr('checked','checked'))
  $('#other_system_text').keyup( -> $('#other_system_radio').val($(this).val())) 
```

# javascript - 优化 javascript 代码以在数组中查找 3 个最大元素及其索引？

> ID：11792158
> 
> 赞同：12
> 
> 时间：2012-08-03T08:34:18.283
> 
> 标签：javascript, algorithm, sorting

我需要这个 javascript 代码的更优化版本来查找数组中的 3 个最大值。我需要获取最大数字的索引。有没有其他更简单的方法来解决这个问题？

```
var maxIndex = new Array();
var maxPoints = new Array();
var scoreByPattern = new Array(93, 17, 56, 91, 98, 33, 9, 38, 55, 78, 29, 81, 60);

function findLargest3() {
  maxPoints[0] = 0;
  maxPoints[1] = 0;
  maxPoints[2] = 0; 

  for (i = 0; i < scoreByPattern.length; i++) {
    if (scoreByPattern[i] > maxPoints[0]) {
      maxPoints[0] = scoreByPattern[i];
      maxIndex[0] = i;
    }
  }

  for (i = 0; i < scoreByPattern.length; i++) {
    if (scoreByPattern[i] > maxPoints[1] && scoreByPattern[i] < maxPoints[0]) {
      maxPoints[1] = scoreByPattern[i];
      maxIndex[1] = i;
    }
  }

  for (i = 0; i < scoreByPattern.length; i++) {
    if (scoreByPattern[i] > maxPoints[2] && scoreByPattern[i] < maxPoints[1]) {
      maxPoints[2] = scoreByPattern[i];
      maxIndex[2] = i;
    }
  }

  console.log(scoreByPattern + "/******/" + maxPoints[0] + "/" + maxPoints[1] + "/" + maxPoints[2]);
  //alert(maxIndex);
}

findLargest3();
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T08:40:07.683

**修改版**

我修改了我的答案以使其更通用。它搜索数组中最大数量的元素的索引：

```
var scoreByPattern = [93,255,17,56,91,98,33,9,38,55,78,29,81,60];

function findIndicesOfMax(inp, count) {
    var outp = [];
    for (var i = 0; i < inp.length; i++) {
        outp.push(i); // add index to output array
        if (outp.length > count) {
            outp.sort(function(a, b) { return inp[b] - inp[a]; }); // descending sort the output array
            outp.pop(); // remove the last index (index of smallest element in output array)
        }
    }
    return outp;
}

// show original array
console.log(scoreByPattern);

// get indices of 3 greatest elements
var indices = findIndicesOfMax(scoreByPattern, 3);
console.log(indices);

// show 3 greatest scores
for (var i = 0; i < indices.length; i++)
    console.log(scoreByPattern[indices[i]]); 
```

这是一个[jsFiddle](http://jsfiddle.net/bQtvG/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-03T08:38:53.477

您可以对数组进行降序排序。那么最高 3 个值的索引将是数组中的前三个项目。您可以单独访问它们或使用`slice()`一次获取它们。下面的示例显示了这两种方法。

```
var maxPoints = new Array();
var scoreByPattern = new Array(93, 17, 56, 91, 98, 33, 9, 38, 55, 78, 29, 81, 60);

findLargest3();

function findLargest3() {
  scoreByPattern.sort((a, b) => a < b ? 1 : a > b ? -1 : 0);

  console.log(scoreByPattern + "/******/" + scoreByPattern[0] + "/" + scoreByPattern[1] + "/" + scoreByPattern[2]);  
  console.log(scoreByPattern.slice(0, 3));
}
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-03T08:52:16.477

无需对巨大的数组进行排序：在`O(n)`其中运行优于涉及对原始数组进行排序的任何操作。返回初始数组中最大值及其索引的数组。使用一些更智能的代码，您可以消除小数组的排序，从而获得更好的最坏情况性能。

```
var ar = [93, 17, 56, 91, 98, 33, 9, 38, 55, 78, 29, 81, 60];
console.log(`input is: ${ar}`);

function getMax(ar){
    if (ar.length <= 3) return ar;
    let max = [{value:ar[0],index:0},
               {value:ar[1],index:1},
               {value:ar[2],index:2}];
    max.sort((a,b)=>a.value-b.value);

    for (let i = 3;i<ar.length;i++){
        if (ar[i] > max[0].value){
           max[0] = {value:ar[i],index:i};
           max.sort((a,b)=>a.value-b.value);
        }
    }
    return max;
}

result = getMax(ar);

console.log('the three largest values are:');
console.log(result);
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-03T08:40:27.920

默认的 javascript 排序回调不能正常工作，因为它按[字典顺序排序](http://en.wikipedia.org/wiki/Lexicographical_order)。10 会在 5 之前变成（因为 1）

我不相信，但是：

```
my_array.sort(function(a,b) {
    return a-b;
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-10T23:31:11.363

最好的方法是结合使用[sort](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)和[slice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice?redirectlocale=en-US&redirectslug=JavaScript/Reference/Global_Objects/Array/slice)：

这个简单的一个班轮将解决您的问题。

```
[1, -5, 2, 8, 17, 0, -2].sort(function(a, b){return b - a}).slice(0, 3) 
```

因此，如果您有一个数组并想找到 N 个最大值：

```
arr.sort(function(a, b){return b - a}).slice(0, n) 
```

对于 N 个最小值：

```
arr.sort(function(a, b){return a - b}).slice(0, n) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-03T08:48:35.277

假设一个相当正态的分布，这应该是相当最优的：

```
var max_three, numbers = new Array(93,17,56,91,98,33,9,38,55,78,29,81,60);

max_three = (function (numbers) {
    var i, one, two, three;
    one = -9999;
    two = -9999;
    three = -9999;

    for (i = 0; i < numbers.length; i += 1) {
        num = numbers[i];
        if (num > three) {
            if (num >= two) {
                three = two;
                if (num >= one) {
                    two = one;
                    one = num;
                }
                else {
                    two = num;
                }
            }
            else {
                three = num;
            }
        }
    }

    return [one, two, three]

}(numbers))

document.write(max_three)​​​​​​​ 
```

98,93,91

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-08-03T05:41:02.580

这是针对您的问题的**优化解决方案**，无需使用排序或其他复杂数组方法：

```
var maxIndex = new Array();
var maxPoints = new Array();
var scoreByPattern = new Array(93,17,56,91,98,33,9,38,55,78,29,81,60);
function findTop3(n) {
	for (var i = 0; i < n.length; i ++) {
		if (i === 0) {
			maxPoints.push(n[i]);
			maxIndex.push(i);
		} else if (i === 1) {
			if (n[i] > maxPoints[0]) {
				maxPoints.push(maxPoints[0]);				
				maxPoints[0] = n[i];
				maxIndex.push(maxIndex[0]);
				maxIndex[0] = i;
			} else {
				maxPoints.push(n[i]);
				maxIndex.push(i);
			}
		} else if (i === 2) {
			if (n[i] > maxPoints[0]) {
				maxPoints.push(maxPoints[0]);
				maxPoints[1] = maxPoints[0];
				maxPoints[0] = n[i];
				maxIndex.push(maxIndex[0]);
				maxIndex[1] = maxIndex[0];
				maxIndex[0] = i;

			} else {
				if (n[i] > maxPoints[1]) {
					maxPoints.push(maxPoints[1]);
					maxPoints[1] = n[i];
					maxIndex.push(maxIndex[1]);
					maxIndex[1] = i;
				} else {
					maxPoints.push(n[i]);
					maxIndex.push(i);
				}
			}
		} else {
			if (n[i] > maxPoints[0]) {
				maxPoints[2] = maxPoints[1];
				maxPoints[1] = maxPoints[0];
				maxPoints[0] = n[i];
				maxIndex[2] = maxIndex[1];
				maxIndex[1] = maxIndex[0];
				maxIndex[0] = i;
			} else {
				if (n[i] > maxPoints[1]) {
					maxPoints[2] = maxPoints[1];
					maxPoints[1] = n[i];
					maxIndex[2] = maxIndex[1];
					maxIndex[1] = i;
				} else if(n[i] > maxPoints[2]) {
					maxPoints[2] = n[i];
					maxIndex[2] = i;
				}
			}
		}
	}
}
findTop3(scoreByPattern);
console.log('Top Elements: ', maxPoints);
console.log('With Index: ', maxIndex);
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-11T10:24:13.840

**编辑**：以下所有内容仍然有效。但是，在评论中向我澄清说，原始问题没有要求索引，并且许多答案都是对先前存在的问题的回应。对我原始帖子中的任何草率表示歉意。

但是，即使查看原始问题，我仍然不同意对此类问题推荐一般排序。

* * *

我无法相信这些答案中有多少比 OP 提供的解决方案更糟糕。大多数都更简洁，但要么：

*   不要回答问题。当问题还要求提供前 3 个值的*索引*时，通常只提供前 3个值。
*   建议“排序”，但甚至不提及性能、副作用或 Big-O 表示法。

这对 SO 来说可能有点太长了，但我觉得这是相关的信息。

* * *

> 1.  我需要这个 javascript 代码的更优化版本来查找数组中的 3 个最大值。
> 2.  我需要获取最大数字的索引。
> 3.  有没有其他更简单的方法来解决这个问题？

我认为 (3) 的意思是“我希望该方法更简洁/可读”，(2) 是“直接在输出中可用的索引”，以及 (1) 的意思是“我希望代码同样高效尽可能”。

从（3）开始，因为它对人们最有用：您的原始算法非常有效，但是您基本上在 3 个循环中的每个循环中都复制了代码；每个循环的唯一区别实际上是索引发生了变化。如果你只是想减少字符数，你可以重写你的算法（有几个小警告¹）：

```
function findLargest3(arry) {
  const max = {
    indices: new Array(0, 0, 0),
    points : new Array(0, 0, 0)
  }

  // Inner private function to remove duplicate code
  // Modifies "max" as a side-effect
  function setLargest (idx) {
    const lastMax = max.points[idx - 1] || Number.MAX_VALUE;
    for (let i = 0; i < arry.length; i++) {
      if (arry[i] > max.points[idx] && arry[i] < lastMax) {
        max.points[idx] = arry[i];
        max.indices[idx] = i;
      }
    }
  }

  // Get's the 0'th, 1st, and 2nd largest items
  for (let i = 0; i < 3; i++) {
    setLargest(i);
  }

  return max;
}

let scoreByPattern = new Array(93, 17, 56, 91, 98, 33, 9, 38, 55, 78, 29, 81, 60);
let max = findLargest3(scoreByPattern);
console.log(scoreByPattern + "/******/" + max.points.join("/")); 
```

除了添加功能之外，我唯一真正需要添加的是：`const lastMax = max.points[idx - 1] || Number.MAX_VALUE;`. 这仅适用于`idx == 0`. 因为没有`max.points[-1]`。我们希望第二次检查始终返回 true，因此如果`max.points[idx - 1]`不存在，则通过 将其设置为可能的最高值`||`。

这实际上最终比您的实现慢了大约 4 倍。这种缓慢是由于*没有*直接修改全局状态（这更快但更难维护）并包括该内部函数而不是代码重复。用你原来的重复代码替换内部函数，让所有其他更改保持不变，最终执行速度提高了 40%，因为它完全避免了函数的创建和调用；但同样更容易阅读。它还使扩展`findLargest3`变得`findLargest5`或`findLargestN`更简单。

此外，它应该是与您的原始解决方案相同的 Big-O（请参阅我对 1 的回答），这与涉及`sort`;的解决方案不同。这意味着它将与您的原始解决方案一样可扩展，同时更易于阅读和维护。如果您*真的*需要性能，那么您的原始解决方案几乎没有错误，我什至认为您的原始解决方案比某些已发布的解决方案更好。（例如，从粗略的测试来看，将数组的大小增加到 ~100 个元素会使我的解决方案运行慢约 3 倍，但使用`sort`运行的解决方案会慢 6 倍以上）。

* * *

¹注意：您的算法存在一个主要问题，那`i`就是“全局范围”。如果您编写以下内容，它将运行 for`i==0`然后永远循环`i==scoreByPattern.length`& 永远不会完成：

```
// Outer loop
for (var i = 0; i <= scoreByPattern.length + 1; i++) {
    findLargest3()
} 
```

那是因为您的`for (i = 0 ...`语句没有引用`i`& 的“本地”版本，它将回退到在先前范围中定义的版本（或者如果找不到，则为全局版本）。您的循环总是在完成时`i`设置为`scoreByPattern.length`，这将更改此外部循环中的值。如果您尝试在循环期间修改迭代器，某些语言和语言结构（`foreach`例如在 C# 中）实际上不会编译。修复实际上*非常*简单，它只是说`var i`或`let i`在你的循环声明中，然后`i`只会引用函数本地的变量。

还有一个小问题是您的原始算法忽略了数组中的重复项。如果我将另一个添加`93`到原始数组的末尾，它仍将顶部值返回为`[98, 93, 91]`. 我没有在我的解决方案中更改它，因为它可能是故意的（例如，前三个“值”是 98、93 和 91，但 93 恰好出现了两次）。要修复，而不是检查`arry[i] < max.points[...`您是否只检查它`i`不在`max.indices`. 根据重复的数量，这可能会减慢算法速度（无需重写），但假设`duplicates << array.length`它不会明显变慢。

虽然本身不​​是一个“问题”，但拥有“全局状态”（即`scoreByPattern, maxPoints, maxIndex`）然后让它们被一个函数突变通常并不理想。它可以在计算上更快，但更难维护。这就是为什么我将声明移到函数体中并将其作为参数`maxPoints / maxIndex`请求。`scoreByPattern`有很多场景可以做到这一点（例如，对象成员变量和修改器方法）。但是在这里，`findLargest3`实际上看起来确实像是一个辅助函数/函数，因此理想情况下不应该有副作用（即修改外部状态/传递给它的参数）。

* * *

简要提及（2）：如果索引本身很重要，那么对数组进行排序并没有真正意义，除非在某些非常特殊的情况下（请参阅我对第 1 点的回答）。`sort`排序是直接在数组上使用 Javascript 方法的“就地”操作。这意味着它将在大多数答案中修改原始数组；所以原始索引实际上丢失了，并且对程序的其余部分也有其他后果。为了使用排序来获取前 N 个值，您必须先复制数组，对副本进行排序，获取前 3 个值，然后遍历原始数组〜 3 次尝试使用`indexOf`或类似的匹配（并处理有重复）。

这显然是一种资源浪费，因为其中一些答案比原始答案慢了 30 倍。您可以尝试生成“索引”列表而不是值，根据原始数组对它们进行排序，这会稍微快一些。但是在这种我们只想要“前 3 名”的特定情况下（再次，请参阅我对第 1 点的回答），除非我疯了，否则*排序几乎总是会变慢*。

* * *

最后，看看（1），在分析算法时应用一个称为“Big-O notation”的概念很有用。我建议用谷歌搜索它并阅读，但粗略地说：随着输入长度的增加，我们想看看算法的效率如何。`scoreByPattern`例如，在您的应用程序中，我们有一个长度为的数组`N`，以及您的问题强加的显式“3 个索引/值”，但能够说“返回顶部`M`索引”很有用/ 值”。如果`scoreByPattern`或`top M`非常短，那么算法的复杂性就无关紧要了，但是如果它们有 100 到 100 的数千个元素，那么它们的计算复杂度就会变得非常重要。

另外，很重要的一点是，对于 JS 中的数组，如果您知道索引，“查找”实际上是一个几乎瞬时的操作`~Big O(1)`。此外，在 Big-O 中，我们倾向于只查看分析的“主导”项而忽略任何恒定时间因素。例如，如果一个解决方案是`10x O(1) + 2x O(N)`（10 个恒定时间操作 + 长度列表中每个项目的 2 个操作`N`），我们说解决方案的 Big-O 是`O(N)`。这是因为，对于一个相当长的列表，如果我们将 N 的值加倍，所花费的时间大约会加倍。如果它以 O(N ² ) 操作为界且列表长度加倍，则需要 2 ²倍的时间（即慢 4 倍）。

所以你原来的解决方案是：

*   一些恒定的时间步长
*   遍历列表一次，进行两次布尔检查和两次赋值
*   再做一次
*   第三次这样做

这意味着它类似于`kO(1) + 3*cO(N)`where `k`&`c`是一些常量，将其保留为：`O(N)`一般来说。如果我们想要“顶级`M`索引”，您最终会得到：`MO(N)`最终是`O(NM)`（即 Big-O of `N * M`）。为什么这很重要？

`sort`是 Big-O`O(N Log2(N))`这意味着什么，比如说，一个约 64 个项目的列表，排序将大致采用`64 * Log2(64) == 64 * 6 == ~384ish operations`. 因此，将您的解决方案与涉及`sort`, unless `M > Log2(N)`， not 排序的解决方案进行比较是可取的。

从这个角度来看：如果您的列表有 100 个项目，那么您需要尝试获得超过 6 个“最大”项目才能更有效地进行排序。如果是 100,000 个项目，您需要尝试获得超过 16 个“最大”项目。*在这个用例中，特别是因为您已经明确表示“3”，所以不*排序几乎总是更有意义。特别是，因为您正在尝试获取索引；如果您*只*想要值，那么排序解决方案可能更可取，因为它们很简单。

您可能可以稍微调整您的算法以进一步加快速度，但从粗略的测试来看：我认为您的解决方案*已经*是这里最快的解决方案。如果您想让维护/阅读/扩展更容易，那绝对是可能的；但这真的不应该以实际增加“时间复杂度”（即使解决方案比 更糟）为代价，`O(N)`除非它*大大*简化了实现。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-03T08:37:04.800

您为什么不对其进行排序并取第一个（或按升序排序的最后一个）三个元素。

```
var maxPoints = new Array();
var scoreByPattern = new Array(93,17,56,91,98,33,9,38,55,78,29,81,60);
scoreByPattern.sort();
maxPoints[0] = scoreByPattern[scoreByPattern.length - 1];
maxPoints[1] = scoreByPattern[scoreByPattern.length - 2];
maxPoints[2] = scoreByPattern[scoreByPattern.length - 3]; 
```

**编辑**
如果您需要最大数组的索引，您可以制作一个您排序的副本，然后在原始数组中找到索引：

```
var scoreByPattern = new Array(93,17,56,91,98,33,9,38,55,78,29,81,60);

// Make a copy of the original array.
var maxPoints = scoreByPattern.slice();

// Sort in descending order.
maxPoints.sort(function(a, b) {
    if (a < b) { return 1; }
    else if (a == b) { return 0; }
    else { return -1; }

});

// Find the indices of the three largest elements in the original array.
var maxPointsIndices = new Array();
maxPointsIndices[0] = scoreByPattern.indexOf(maxPoints[0]);
maxPointsIndices[1] = scoreByPattern.indexOf(maxPoints[1]);
maxPointsIndices[2] = scoreByPattern.indexOf(maxPoints[2]); 
```

另一种无需排序即可找到索引的方法是：

```
var scoreByPattern = new Array(93,17,56,91,98,33,9,38,55,78,29,81,60);
var maxIndices = new Array(Number.MIN_VALUE, Number.MIN_VALUE, Number.MIN_VALUE);

for (var i = 0; i < scoreByPattern.length; i++) {
  if (maxIndices[0] < scoreByPattern[i]) {
    maxIndices[2] = maxIndices[1];
    maxIndices[1] = maxIndices[0];
    maxIndices[0] = scoreByPattern[i];
  }
  else if (maxIndices[1] < scoreByPattern[i]) {
    maxIndices[2] = maxIndices[1];
    maxIndices[1] = scoreByPattern[i];
  }
  else if (maxIndices[2] < scoreByPattern[i]) maxIndices[2] = scoreByPattern[i];
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-03T08:54:31.857

[http://jsfiddle.net/GGkSt/](http://jsfiddle.net/GGkSt/)

```
var maxPoints = [];
var scoreByPattern = [93,17,56,91,98,33,9,38,55,78,29,81,60];

function cloneArray(array) {
    return array.map(function(i){ return i; });
}    
function max3(array) {
    return cloneArray(array).sort(function(a,b) { return b-a; }).slice(0,3);
}
function min3(array) {
     return cloneArray(array).sort(function(a,b) { return a-b; }).slice(0,3);
}

var array=scoreByPattern;
alert("Max:"+ max3(array)[0] +' '+max3(array)[1] +' '+max3(array)[2]);
alert("Min:"+ min3(array)[0] +' '+min3(array)[1] +' '+min3(array)[2]); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-17T18:39:50.007

```
function get3TopItems(arr) {
  return arr.sort((a, b) => b - a).slice(0, 3);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-01T08:37:37.793

下面的函数返回一个数组，它的元素是一个固定的二元素数组，第一个元素作为索引，第二个元素作为它的值。

```
function findTopValues(dataArray, n) {
  var resultArray = [];

  var dataArrayCopy = dataArray.slice();

  var topNArray = dataArrayCopy
    .sort(function (begin, end) {
      return end - begin;
    })
    .slice(0, n);
  for (let ele of topNArray) {
    resultArray.push([dataArray.indexOf(ele), ele]);
  }
  return resultArray;
}

var dataArray = [12,5,20,4,50,23,98,8];

console.log(findTopValues(dataArray,3))
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-03-23T21:02:20.093

我创建了一个返回最大元素`N`索引的函数`N`（在相等值的情况下，它返回找到的第一个索引）。在代码中，`N`是`qtyMax`. 功能有成本`O(n)`，在最坏的情况下`n * qtyMax`。

```
function maxIdxs(arr, qtyMax) {
    var maxIndex = new Array();
    for(var i=0; i<arr.length; i++) {
        var m=0;
        while(m<qtyMax && arr[i]<=arr[maxIndex[m]])
            m++;
        if(m<qtyMax)
            maxIndex.splice(m, 0, i);
    }
    return maxIndex.slice(0, qtyMax);
}

console.log(maxIdxs( [1,23,46,35,20] , 0 )); // []
console.log(maxIdxs( []              , 3 )); // []
console.log(maxIdxs( [1,23]          , 3 )); // [1,0]
console.log(maxIdxs( [1,23,46,35,20] , 3 )); // [2,3,1]
console.log(maxIdxs( [1,40,40,40,40] , 3 )); // [1,2,3]
```

要获得相应的功能`minIdxs`（查找最小的索引） ，`N`您只需`<=`在`>=`.`while`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-03T03:47:05.123

这是一个没有排序的解决方案：

```
let getLargest = (a,n)=>{
    let max,p,b=[],n1;
    for(let i=0;i<n;i++){
        max=a[0]
        p=false
        n1=0
        for(let j in a){
            if(max<a[j]){
                max=a[j]
                p=true
                n1=j
            }
        }
        if(!!p){
            b.push(max)
            a.splice(n1,1);
        }
    }
    console.log(a)
    return b;
}

console.log(getLargest([5.03, 7.09, 6.56,  9.09, 11.11], 3))
console.log(getLargest([5.03, 7.09, 6.56,  9.09, 11.11], 4))
console.log(getLargest([5.03, 7.09, 6.56,  9.09, 11.11], 1))
console.log(getLargest([5.03, 7.09, 6.56,  9.09, 11.11], 2)) 
```

对于 n 个循环，我们正在寻找最大值并将其从原始数组中删除并将其推送到新数组。你可以得到n个大元素。

# java - 检测点击 JTable：有时无法识别

> ID：11792161
> 
> 赞同：0
> 
> 时间：2012-08-03T08:34:20.447
> 
> 标签：java, swing, jtable, mouseevent, mouseclick-event

我有这段代码来检测点击 JTable

```
table.addMouseListener(new java.awt.event.MouseAdapter()
{
    @Override
    public void mouseClicked(java.awt.event.MouseEvent e)
    {

        int row= table.rowAtPoint(e.getPoint());
        int col= table.columnAtPoint(e.getPoint());
        System.out.println(table.getSelectedRow());

        if (e.getClickCount() == 2)
        {

            System.out.println ("Doppio Click");

        }

    }

}); 
```

这段代码很好用，问题是如果我单击一行并且在鼠标按钮向上之前我将鼠标向上移动，则未检测到单击，但在我的 JTable 中选择了该行。谁能知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:35:52.650

改为使用`MouseListener.mouseReleased`or`MouseListener.mousePressed`事件（以这种方式检测双击比较棘手，但可以做到）。

# mysql - 如何在mysql中使用正则表达式提取子字符串

> ID：11792164
> 
> 赞同：2
> 
> 时间：2012-08-03T08:34:45.350
> 
> 标签：mysql, sql, regex

例如，我有一个表格保存了一堆 URL。

```
like http://...?action_press=1&pid=56523 
```

我想获取变量 pid 的所有 id。我想写一些东西`"pid=(\d+)"`来提取所有这些ID。

我不想使用 locate()，因为有时 url 可能看起来像

```
?pid=56523&action_press=1 
```

是否可以使用正则表达式来实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:38:49.317

您可以使用

```
SELECT
    SUBSTRING_INDEX(SUBSTRING_INDEX(url_column, 'pid=', -1), '&', 1)
FROM
    tbl 
```

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/506b7/1/0)

# javascript - 功能在 IE7 中失败，但适用于所有现代浏览器。如何修复？

> ID：11792169
> 
> 赞同：1
> 
> 时间：2012-08-03T08:35:06.127
> 
> 标签：javascript, function, internet-explorer-7

我有这个 JavaScript 代码来格式化一个美元的数字，在 Stackoverflow 上得到了很多赞许。它在最新的网络浏览器中运行良好，但它会导致 JavaScript 在 IE7 中失败。我试图使用不需要 JQuery 的函数，因为该项目的其余部分没有使用它：

```
 function formatDollar(num) {
     var p = num.toFixed(2).split(".");
     return "$" + p[0].split("").reverse().reduce(function(acc, num, i, orig) {
         return  num + (i && !(i % 3) ? "," : "") + acc;
     }, "") + "." + p[1];
 } 
```

IE7 对用户简单地说“页面错误”。在 IE7 的调试模式下，抱怨它不是在 On Click 行上提交的表单的预期对象。如果我删除上述函数并让它传递数字而不格式化它在 IE7 中工作。它还抱怨以第一个“返回”开头的行。我已经从 JavaScript 中删除了所有其他内容，而这个函数是它出现的罪魁祸首。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:41:12.317

该`reduce`功能仅适用于 JavaScript 1.8 (ECMAScript 5) 及更高版本，IE7 未实现。如果您还没有使用任何提供跨浏览器功能的库，则可以这样实现：

```
if (!Array.prototype.reduce) {  
  Array.prototype.reduce = function reduce(accumulator){  
    if (this===null || this===undefined) throw new TypeError("Object is null or undefined");  
    var i = 0, l = this.length >> 0, curr;  

    if(typeof accumulator !== "function") // ES5 : "If IsCallable(callbackfn) is false, throw a TypeError exception."  
      throw new TypeError("First argument is not callable");  

    if(arguments.length < 2) {  
      if (l === 0) throw new TypeError("Array length is 0 and no second argument");  
      curr = this[0];  
      i = 1; // start accumulating at the second element  
    }  
    else  
      curr = arguments[1];  

    while (i < l) {  
      if(i in this) curr = accumulator.call(undefined, curr, this[i], i, this);  
      ++i;  
    }  

    return curr;  
  };  
} 
```

或者，如果您不介意不使用 的简化语法`reduce`，只需在函数中将其替换为等效循环（例如`while`上面的循环或变体`for`）。

[参考](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array#section_14)

# c# - Visio 可以导入 C# 代码吗？

> ID：11792177
> 
> 赞同：0
> 
> 时间：2012-08-03T08:35:44.823
> 
> 标签：c#, events, uml, visio

是否可以以某种方式将 C# 代码导入 Microsoft Visio 2010 以生成 UML 模型？

主要问题是我不知道如何为定义如下事件的接口建模：

```
public interface IInterface
{
    bool Method();

    event EventHandler MyEvent;
} 
```

所以我认为如果 Visio 能够导入我的代码将是最简单的，但是如果有人可以向我解释如何对上述接口进行建模，我不需要导入任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:53:46.857

我认为 Visio 不会这样做。但是，[Enterprise Architect](http://www.sparxsystems.com/products/ea/index.html/)会。您可以进行免费试用，看看它会产生什么。此外[，这篇文章](https://stackoverflow.com/questions/51464/how-do-you-show-events-in-uml-class-diagrams)可能会有所帮助，因为它讨论了其他一些人如何在 UML 中建模事件。

# postgresql - Postgres 创建被 SELECTed INTO 的表，即使该规则没有可操作的行

> ID：11792180
> 
> 赞同：0
> 
> 时间：2012-08-03T08:35:59.557
> 
> 标签：postgresql, sql-delete, temp-tables, rule

我在一个视图上创建了一个 ON DELETE 规则，该规则将 OLD 选择到一个临时表中，然后调用一个使用 OLD 值执行操作的函数。该规则会在运行 SELECT INTO TEMPORARY TABLE 之前删除临时表，以防在会话期间通过执行 SELECT dropTempTable() 多次调用该规则。这一切都很好，除非没有什么可以删除，例如当没有名称为“John Doe”的记录时运行以下查询：

```
DELETE FROM myview WHERE name = 'John Doe'; 
```

在这种情况下，临时表是由计划程序创建的，以准备使用它，即使它不会被使用，但是我的 dropTempTable() 语句从未被调用，所以第二次在我的视图上执行 DELETE 时，它会失败，因为临时表已经存在。任何有关如何解决此问题的建议将不胜感激。我意识到使用触发器可以更好地解决此示例，但出于本文的目的，我已经对其进行了简化，并且触发器不适用于我的特定问题。

我的观点：

```
CREATE VIEW myview 
AS SELECT * FROM mytable 
```

我的规则：

```
CREATE RULE myview_delete
AS ON DELETE TO myview
DO INSTEAD (
     SELECT dropTempTable();
     SELECT OLD INTO TEMPORARY TABLE myTempTable;
     SELECT myDeleteFunction();
); 
```

我的放置表功能：

```
CREATE FUNCTION dropTempTable()
RETURNS void AS $$
BEGIN
     DROP TABLE IF EXISTS myTempTable;
END;
$$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:01:29.797

我最终将对 dropTempTable 函数的调用从 DELETE 规则中移到 SELECT 规则中，并添加了一个 EXCEPTION 语句，因此它看起来像：

我的放置表功能：

```
CREATE FUNCTION dropTempTable()
RETURNS void AS $$
BEGIN
     DROP TABLE IF EXISTS myTempTable;
EXCEPTION
     WHEN OTHERS THEN
END;
$$ LANGUAGE plpgsql; 
```

这有点骇人听闻，但它确实有效。

# android - 从单例管理器类发布到 UI 线程

> ID：11792190
> 
> 赞同：2
> 
> 时间：2012-08-03T08:36:50.227
> 
> 标签：android, thread-safety, singleton, handler, ui-thread

我有一个从活动（UI 线程）调用的单例管理器类，然后它在不同的线程（网络）上运行，最后应该在调用活动中调用回调方法。

我想知道在 UI 线程上调用回调方法的最佳方法是什么。我熟悉这些选项（请参阅[http://android-developers.blogspot.co.il/2009/05/painless-threading.html](http://android-developers.blogspot.co.il/2009/05/painless-threading.html)）

所以我在想两个选择：

**第一个：** 调用活动将实现一个带有 getActivity() 方法的接口。该方法将用于调用 Activity.runOnUiThread(Runnable)。

**第二种：** MainApplication，它初始化manager单例，会传递一个属于UI线程的Handler实例。

更好的选择是什么？我也很高兴听到任何其他建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:43:12.373

无论您选择什么选项，您都必须记住活动具有一定的生命周期，并且与您的单例类不同，可以完成或移至后台。鉴于此，您应该再次考虑单例是否真的是这里的最佳选择：如果它需要与活动交互，也许活动应该管理其生命周期。如果它不依赖于任何特定活动，您可能希望将其设为服务并发送广播以通知进度等。

你到底想做什么？

# asp.net - SqlMembershipProvider 密码强度正则表达式和空格

> ID：11792198
> 
> 赞同：1
> 
> 时间：2012-08-03T08:37:42.057
> 
> 标签：asp.net, membership-provider

我们有一个网站使用默认的 System.Web.Security.SQLMembershipProvider 来处理用户及其密码。今天我注意到空格不算作一个有点奇怪的特殊字符，这让我想到其他特殊字符是否也无效？它产生了一个小问题，因为我们还有验证正则表达式来匹配链中较早的密码，并且那些将空格视为有效的特殊字符。

我的配置如下所示：

```
<add connectionStringName="MyConnectionString" 
  enablePasswordRetrieval="false" 
  enablePasswordReset="true" 
  requiresQuestionAndAnswer="false" 
  applicationName="Payson 2.0" 
  requiresUniqueEmail="true" 
  passwordFormat="Hashed" 
  maxInvalidPasswordAttempts="20" 
  minRequiredPasswordLength="8" 
  minRequiredNonalphanumericCharacters="0" 
  passwordStrengthRegularExpression="(?=.{6,})(?=(.*\d){1,})(?=(.*\W){1,})" 
  passwordAttemptWindow="10" 
  name="AspNetSqlMembershipProvider" 
  type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/> 
```

你会认为这`.*\W`会匹配空格，但它不会。如果我尝试将密码从更改为`abcdefg!1`失败`abcdefg 1`，我的问题是为什么以及是否还有其他不明显的情况？

# java - 如何正确使用同步链接哈希映射

> ID：11792202
> 
> 赞同：3
> 
> 时间：2012-08-03T08:37:45.347
> 
> 标签：java, map, synchronized, linkedhashmap

试图通过子类化链接的哈希映射来制作 lru 映射。

地图通过 collections.synchronized 运行。

地图的所有用法都被一个同步块包围。如果它们都被删除，单元测试也会失败。有人会认为它们没有必要，因为地图是通过 collections.synchronized 运行的。

一个线程将序列号 (0,1,2,3 ...) 放入地图中。删除由已删除的最旧条目处理。没有其他人从地图中删除条目。

另一个线程从地图中获取数据。

以下单元测试通常在“oops”处失败。这是当一个非零数字出现在第一个位置时（它应该是零，直到地图变满）。其他奇怪的事情可能会发生，例如条目集中的空值。

任何指针将不胜感激。

谢谢

```
import static org.junit.Assert.*;

import java.util.Collections;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.Set;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
class LruMap<K,V> extends LinkedHashMap<K,V> {
    public LruMap() {
        super(defaultMaxSize+1,.75f,true);
        maxSize=defaultMaxSize;
    }
    public LruMap(int arg0) {
        super(arg0+1,.75f,true);
        maxSize=arg0;
    }
    public LruMap(int arg0,float arg1) {
        super(arg0+1,arg1,true);
        maxSize=arg0;
    }
    public LruMap(int arg0,float arg1,boolean arg2) {
        super(arg0+1,arg1,arg2);
        if(!arg2)
            throw new RuntimeException("you did not construct an lru map!");
        maxSize=arg0;
    }
    public LruMap(Map<K,V> arg0) {
        super(arg0);
        throw new RuntimeException("you did not construct an lru map!");
    }
    public boolean removeEldestEntry(Map.Entry<K,V> eldest) {
        return size()>maxSize;
    }
    public final int maxSize;
    public static final int defaultMaxSize=2048;
    static final long serialVersionUID=0;
}
class Server implements Runnable {
    public Server(final int pieces,final int period) {
        this.pieces=pieces;
        this.period=period;
        lruMap=Collections.synchronizedMap(new LruMap<Long,Long>(3*pieces/2));
    }
    @Override public void run() {
        t0=System.currentTimeMillis();
        while(piece<stopAtPiece) {
            final long dt=System.currentTimeMillis()-t0;
            final long target=piece(dt);
            System.out.println("adding "+(target-piece+1)+" items");
            for(;piece<=target;piece++) {
                synchronized(lruMap) {
                    lruMap.put(piece,piece);
                }
            }
            checkMap(piece,true);
            try {
                Thread.sleep(100);
            } catch(InterruptedException e) {
                e.printStackTrace();
                break;
            }
        }
    }
    Map.Entry<Long,Long>[] checkMap(final long n,boolean print) {
        synchronized(lruMap) {
            Map.Entry<Long,Long>[] entries=null;
            if(lruMap.size()>0) {
                final Set<Map.Entry<Long,Long>> entrySet=lruMap.entrySet();
                entries=new Map.Entry[entrySet.size()];
                entrySet.toArray(entries);
                long first=entries[0].getKey();
                long last=entries[entries.length-1].getKey();
                if(print)
                    for(Map.Entry<Long,Long> entry:entries)
                        System.out.print(entry.getKey()+" ");
                System.out.println();
                if(n<pieces&&first!=0) {
                    System.out.println("lru: first!=0! "+first);
                    if(throwWhenfirstIsNotZero) { throw new RuntimeException("oops"); }
                }
                for(int i=0;i<entries.length-1;i++) {
                    long p0=entries[i].getKey();
                    long p1=entries[i+1].getKey();
                    if(p0>p1)
                        System.out.println("out of order! "+p0+" "+p1);
                    else if(p0==p1)
                        System.out.println("dupicate "+p0+" "+p1);
                    else if(p0+1==p1)
                        ; // ok
                    else if(p0+1<p1)
                        System.out.println("skipped "+p0+" "+p1);
                    else System.out.println("some case i mssed!");
                }
            }
            return entries;
        }
    }
    public long piece(final long dt) {
        return dt/period*pieces+dt%period*pieces/period;
    }
    public boolean throwWhenfirstIsNotZero=true;
    protected long piece;
    public long t0;
    protected long stopAtPiece=Long.MAX_VALUE;
    public final int period;
    public final int pieces;
    public final Map<Long,Long> lruMap;
}
public class ServerTestCase {
    @Before public void setUp() throws Exception {}
    @After public void tearDown() throws Exception {}
    @Test public void testRun() {
        server.stopAtPiece=server.pieces;
        server.throwWhenfirstIsNotZero=true;
        Thread thread=new Thread(server);
        thread.setName("server");
        thread.start();
        while(thread.isAlive()) {
            for(long i=0;i<server.piece;i++)
                synchronized(server.lruMap) {
                    server.lruMap.get(i);
                }
        }
    }
    final int period=2*1000;
    final int serverPieces=100;
    Server server=new Server(serverPieces,period);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:11:24.657

如果您正在访问`synchronized(lruMap)`块内的集合，那么您可能不想将其包装`Collections.synchronizedMap()`- 使用其中一个。这是因为他们可能会使用不同的锁——事实上几乎可以肯定，因为内部`synchronizedMap()`使用的可能性极小`synchronized(this)`。

另外我建议[在此处输入链接描述](http://www.amazon.co.uk/Java-Concurrency-Practice-Brian-Goetz/dp/0321349601)

# sql - SQL 将明年数据添加到列

> ID：11792205
> 
> 赞同：0
> 
> 时间：2012-08-03T08:38:03.837
> 
> 标签：sql, sql-server, join, add

我想根据周进行预测。我有这样的桌子。

```
personName, year, week1, ..., week52. 
```

并且想根据我需要多少周将下一年添加到列中。选择中的某种选择。

最终选择应如下所示：

```
select personName, week1,week2,..., (nextyear)week1,(nextyear)week2,.. from x 
```

任何想法如何将明年移至列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:40:58.800

您想为您的数据而不是列创建行 - 出于您所询问的确切原因。

像这样的结构：

```
personName Year Week 
```

然后您可以执行如下查询：

```
select week from table1 where year=$year-1 and week=$week 
```

或像这样的纯 SQL：

```
select
    a.personName
    a.week,
    a.year
from
    table1 a
        join table1 b
            on a.personName=b.personName
            and a.week=b.week
            and a.year=b.year-1 
```

但是，这种类似的方法*可以*与您的表一起使用，如下所示：

```
select
    a.personName
    a.week1,
    a.week2,
    a.week3,
    b.week1,
    b.week2,
    b.week3,
    a.year
from
    table1 a
        join table1 b
            on a.personName=b.personName
            and a.year=b.year-1 
```

# c# - 为什么在创建带参数的构造函数时默认的无参数构造函数消失

> ID：11792207
> 
> 赞同：167
> 
> 时间：2012-08-03T08:38:04.793
> 
> 标签：c#, java, c++, default-constructor

在 C#、C++ 和 Java 中，当您创建一个带参数的构造函数时，默认的无参数构造函数就会消失。我一直只是接受这个事实，但现在我开始想知道为什么。

这种行为的原因是什么？它只是一种“安全措施/猜测”，说“如果你已经创建了自己的构造函数，你*可能*不希望这个隐含的构造函数存在”？或者它是否有技术原因导致编译器无法在您自己创建构造函数后添加一个？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-08-03T08:43:15.447

如果您添加了自己的构造函数，编译器没有理由无法添加构造函数 - 编译器几乎可以做任何它想做的事情！然而，你必须看看什么是最有意义的：

*   如果我没有为非静态类定义*任何*构造函数，我很可能希望能够实例化该类。为了实现这一点，编译器*必须*添加一个无参数构造函数，它没有任何作用，但允许实例化。这意味着我不必为了让它工作而在我的代码中包含一个空的构造函数。
*   如果我定义了自己的构造函数，尤其是带有参数的构造函数，那么我很可能有自己的逻辑，必须在创建类时执行。如果编译器在这种情况下创建一个空的、无参数的构造函数，它将允许某人*跳过*我编写的逻辑，这可能会导致我的代码以各种方式中断。如果在这种情况下我想要一个默认的空构造函数，我需要明确地说出来。

*因此，在每种情况下，您都可以看到当前编译器的行为在保留代码的可能意图*方面最有意义。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-08-03T08:43:21.857

*语言必须*以这种方式设计当然没有技术原因。

我可以看到四个有点现实的选项：

1.  根本没有默认构造函数
2.  目前的情景
3.  *默认情况下始终*提供默认构造函数，但允许显式抑制它
4.  始终提供默认构造函数*，*不允许它被抑制

选项 1 有点吸引人，因为我编写的代码越多，我*真正*想要一个无参数构造函数的频率就越低。总有一天，我应该计算一下我*实际上*最终使用默认构造函数的频率......

选项2我很好。

对于语言的其余部分，选项 3 与 Java 和 C# 的流程背道而驰。从来没有任何东西是你明确“删除”的，除非你明确地让事情变得比 Java 中的默认设置更私密。

选项 4 太可怕了——您*绝对*希望能够使用某些参数强制构造。`new FileStream()`甚至意味着什么？

因此，基本上，*如果*您接受提供默认构造函数完全有意义的前提，我相信一旦您提供自己的构造函数就禁止它是很有意义的。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-08-03T15:48:23.623

编辑。实际上，虽然我在第一个答案中所说的是有效的，但这才是真正的原因。：

一开始是 C。C 不是面向对象的（您可以采用 OO 方法，但它对您没有帮助或强制执行任何操作）。

然后是 C With Classes，后来改名为 C++。C++ 是面向对象的，因此鼓励封装，并确保对象的不变性——在构造以及任何方法的开始和结束时，对象都处于有效状态。

与此相关的自然做法是强制类必须始终具有构造函数以确保它以有效状态启动 - 如果构造函数不需要做任何事情来确保这一点，那么空构造函数将记录这一事实.

但是 C++ 的目标是尽可能地与 C 兼容，所有有效的 C 程序也是有效的 C++ 程序（不再是一个活跃的目标，而 C 与 C++ 分离的演变意味着它不再适用）。

这样做的一个影响是 和 之间的功能`struct`重复`class`。前者以 C 方式做事（默认情况下所有内容都是公开的），后者以良好的 OO 方式做事（默认情况下所有内容都是私有的，开发人员主动公开他们想要公开的内容）。

另一个原因是，为了使 C `struct`（由于 C 没有构造函数而不能具有构造函数）在 C++ 中有效，那么对于 C++ 的看待方式来说，它必须具有意义。因此，虽然没有构造函数会违背积极确保不变量的 OO 实践，但 C++ 认为这意味着存在一个默认的无参数构造函数，它的行为就像它有一个空的主体一样。

现在所有的 C`structs`都是有效的 C++ `structs`（这意味着它们与 C++ 相同`classes`，所有内容 - 成员和继承 - 公共）从外部被视为具有单个无参数构造函数。

但是，如果您确实在 a 中放置了构造函数`class`，`struct`那么您正在以 C++/OO 方式而不是 C 方式进行操作，并且不需要默认构造函数。

由于它是一种速记，即使在其他情况下无法兼容时，人们也继续使用它（它使用了 C 语言中没有的其他 C++ 特性）。

因此，当 Java 出现（在许多方面基于 C++）和后来的 C#（以不同的方式基于 C++ 和 Java）时，他们保留了这种方法，因为编码人员可能已经习惯了这种方法。

*Stroustrup 在他的 The C++ Programming Language*中写到了这一点，甚至更多，在*C++ 的设计和演变中*更加关注语言的“为什么” 。

===原始答案===

假设这没有发生。

假设我不想要一个无参数的构造函数，因为没有它我无法将我的类置于有意义的状态。事实上，这是`struct`在 C# 中可能发生的事情（但如果你不能在 C# 中有意义地使用全零和空值`struct`，那么你充其量只能使用非公开可见的优化，否则会有使用中的设计缺陷`struct`）。

为了让我的类能够保护它的不变量，我需要一个特殊的`removeDefaultConstructor`关键字。至少，我需要创建一个私有的无参数构造函数，以确保没有调用代码调用默认值。

这使语言更加复杂。最好不要这样做。

总而言之，最好不要将添加构造函数视为删除默认值，最好将根本没有构造函数视为添加不做任何事情的无参数构造函数的语法糖。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-08-03T08:43:19.707

如果您自己不做任何事情来控制对象的创建，则会添加默认的无参数构造函数。一旦您创建了一个构造函数来获得控制权，编译器就会“退出”并让您拥有完全的控制权。

如果不是这种方式，如果您只想通过带参数的构造函数构造对象，则需要某种显式方法来禁用默认构造函数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-03T08:44:42.200

我认为问题应该是相反的：如果您没有定义任何其他构造函数，为什么不需要声明默认构造函数？

对于非静态类，构造函数是必需的。
所以我认为如果你没有定义任何构造函数，生成的默认构造函数只是 C# 编译器的一个方便特性，如果没有构造函数，你的类也将无效。所以隐式生成一个什么都不做的构造函数没有错。它看起来肯定比到处都是空的构造函数更干净。

如果您已经定义了一个构造函数，那么您的类是有效的，那么为什么编译器要假定您需要一个默认构造函数呢？如果你不想要一个怎么办？实现一个属性来告诉编译器不生成该默认构造函数？我认为这不是一个好主意。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-03T08:45:21.617

这是编译器的一个便利功能。如果你定义了一个带参数的构造函数，但没有定义一个无参数的构造函数，那么你不想允许一个无参数的构造函数的可能性要高得多。

对于许多使用空构造函数进行初始化没有意义的对象来说就是这种情况。

否则，您必须为要限制的每个类声明一个私有无参数构造函数。

在我看来，允许一个需要参数才能起作用的类的无参数构造函数是不好的风格。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-03T20:11:32.700

只有当类没有构造函数时，才能构造默认构造函数。编译器的编写方式仅将其作为备份机制提供。

如果您有参数化构造函数，您可能不希望使用默认构造函数创建对象。如果编译器提供了默认构造函数，您将不得不编写一个无参数构造函数并将其设为私有，以防止使用无参数创建对象。

此外，您更有可能忘记禁用或“私有化”默认构造函数，从而导致难以捕获的潜在功能错误。

现在，如果您希望以默认方式或通过传递参数创建对象，则必须显式定义无参数构造函数。这是经过严格检查的，否则编译器会抱怨，从而确保这里没有漏洞。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-25T23:59:15.863

**前提**

这种行为可以看作是*类具有默认公共无参数构造函数的决定*的自然扩展。基于所提出的问题，我们将此决定作为前提，并假设我们在这种情况下不会质疑它。

**删除默认构造函数的方法**

因此，必须有一种方法可以删除默认的公共无参数构造函数。这种移除可以通过以下方式完成：

1.  声明一个非公共的无参数构造函数
2.  声明带参数的构造函数时自动移除无参数构造函数
3.  一些关键字/属性指示编译器删除无参数构造函数（很尴尬，很容易排除）

**选择最佳解决方案**

现在我们扪心自问：*如果没有无参构造函数，它必须被什么替代？*以及*在什么类型的场景下，我们希望移除默认的公共无参数构造函数？*

事情开始到位。首先，它必须要么用带参数的构造函数替换，要么用非公共构造函数替换。其次，您不想要无参数构造函数的场景是：

1.  我们根本不希望类被实例化，或者我们想控制构造函数的可见性：*声明一个非公共构造函数*
2.  我们要强制在构造时提供参数：*声明带参数的构造函数*

**结论**

我们有了它——正是 C#、C++ 和 Java 允许删除默认公共无参数构造函数的两种方式。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-27T17:38:56.430

我认为这是由编译器处理的。如果您在其中打开`.net`程序集，`ILDASM`您将看到默认构造函数，即使它不在代码中。如果您定义参数化构造函数，则不会看到默认构造函数。

Actually when you define the class (non static), the compiler provides this feature thinking that you will be just creating an instance. And if you want any specific operation to perform you surely will be having your own constructor.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-26T05:35:58.780

这是因为当您不定义构造函数时，编译器会自动为您生成一个不带任何参数的构造函数。当你想从构造函数中得到更多东西时，你会覆盖它。这不是函数重载。因此，编译器现在看到的唯一构造函数是带有参数的构造函数。为了解决这个问题，如果构造函数没有传递值，您可以传递一个默认值。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-14T20:52:02.760

A class need a constructor. It is mandatory requirement.

*   If you don't create one, parameterless constructor will be given to you automatically.
*   If you don't want a parameterless constructor, then you need to create your own.
*   If you need both, parameterless constructor and parameter based-constructor you can add them manually.

I will answer you question with another, why do we want always a default parameterless constructor? there are case where this is not desired, so the developer has the control to add or remove it as is need.

# javascript - 从包含的不同域 iframe 中更改主机页面：Firefox 和 Chrome 中的错误

> ID：11792220
> 
> 赞同：3
> 
> 时间：2012-08-03T08:39:24.360
> 
> 标签：javascript, jquery

我有一个 iframe 应用程序。我收到一条警报，上面写着**-error** in chrome for `top.location.href`。

```
jQuery.ajax({
          type : 'get',
          url : 'check_if_fb_data_set.php',
          success : function(response){
          if(jQuery.trim(response)  == 'success') {
            top.location.href = "http://mysite.com";
          } else {
                setTimeout(CheckIfFbDataSet,2000);
          }                     
        }, error : function (jqXHR, textStatus, errorThrown){
          console.log(errorThrown);
        }
}); 
```

我试过了

1.  location.reload()
2.  window.location.href = 窗口.location.href;
3.  document.write('元刷新............');
4.  document.write('<script> window.location ........< /script>');

第三个没有用，但其他四个都给了我同样的错误。我没有其他方法可以测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:42:37.830

尝试：

```
window.location = window.location; 
```

或者

```
window.location.reload(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:22:19.657

包含页面可能会将您的 iframe 放置在沙盒中。Firefox 和 Chrome 等 HTML5 浏览器支持[sandbox 属性](https://developer.mozilla.org/en/HTML/Element/iframe)，可以完全防止此类行为。

例如，如果您的页面位于

```
<iframe src="url" sandbox="allow-forms allow-scripts"></iframe> 
```

但未`allow-top-navigation`设置，您的内容将无法更改顶部导航**。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T08:18:39.310

问题是我有另一个带有错误回调的ajax函数，它被触发了，我有`alert(textStatus +''+ errorThrown)`

# c++ - 对构造函数的未定义引用

> ID：11792224
> 
> 赞同：7
> 
> 时间：2012-08-03T08:39:42.823
> 
> 标签：c++, g++

我是一名尝试使用 C++ 的 Java 开发人员。

我刚刚创建了一个新课程。在我的其他课程中，我想列出可以存储过滤器对象的列表。

**过滤器.h**

```
#ifndef FILTER_H_
#define FILTER_H_

class Filter {
public:
  Filter(int id);
  int id;
  ~Filter();

};

#endif /* FILTER_H_ */ 
```

**过滤器.cpp**

```
#include "Filter.h"

Filter::Filter(int id) {
this.id = id;
}
Filter::~Filter() {
} 
```

**汽车.h**

```
#include "Filter.h"
...
...
private:
  std::vector<Filter> filters; 
```

**汽车.cpp**

所以在这里的一个函数中我尝试这样做：

```
int id = 2;
Filter *filter = new Filter(id); 
```

产生此错误：

```
Cars.cpp:120: undefined reference to `Filter::Filter(int)'
stl_construct.h:83: undefined reference to `Filter::~Filter()' 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-03T08:53:54.227

该错误是由链接器生成的，因为它看不到构造函数的定义所在的位置。

如果您使用的是 IDE，则应将两个 .cpp 文件添加到项目中，以便它们可以一起编译，并且链接器可以找到定义。不是，那么您必须自己组合它们 - 假设您使用的是 gcc：

```
g++ cars.cpp filter.cpp 
```

会将它们组合成一个可执行文件，并且不应向您显示*该*错误

# php - 我如何在我的代码中使用 echo？

> ID：11792229
> 
> 赞同：-4
> 
> 时间：2012-08-03T08:40:04.353
> 
> 标签：php, mysql

```
 $results=mysql_query("SELECT count(*) as total FROM new where date>'$date' and erisim='1'   group by date_format(tarih,'%Y-%m') ");
   $array=mysql_fetch_array($results,MYSQL_ASSOC);

    echo $array['']; 
```

我应该在 $array[''] 中填写什么才能获得每月的计数值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T08:41:47.840

```
 $results=mysql_query("SELECT count(*) as Total FROM new where year(date)='$ss' and erisim='1'      group by date_format(tarih,'%Y-%m') ");

 while ($row = mysql_fetch_array($results, MYSQL_ASSOC)) {
    echo  $row["Total"] ;
 } 
```

# java - Spring MVC 捕获 http 错误 (400.404, ....)

> ID：11792231
> 
> 赞同：3
> 
> 时间：2012-08-03T08:40:07.973
> 
> 标签：java, exception, spring-mvc

下午好。为这个问题苦苦挣扎了好几天。我想帮助 Spring bean（解析器）捕获应用程序中的所有错误。几乎立即捕获异常，但不处理捕获 http 错误。

问题解析器的本质是无法拦截http错误。

我不想使用 web.xml 和控制器，因为我希望决定仍然使用 Spring 上下文。

捕获异常的实现：

```
<bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
    <property name="exceptionMappings">
        <map>
            ...
            <entry key="java.lang.Throwable" value=".error" />
        </map>
    </property>
    <property name="defaultErrorView" value=".error"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:45:11.357

`40x`我为错误设置映射，`web.xml`然后在控制器中处理它们（它也扩展`SimpleMappingExceptionResolver`和处理这些错误`500`）

```
<error-page>
    <error-code>404</error-code>
    <location>/404</location>
</error-page>

@RequestMapping(value = "/404")
public String handle404(final HttpServletRequest request, final Model model) {

     final String originalUri = (String)       
        request.getAttribute("javax.servlet.forward.request_uri");
     // etc.
    return "404";
} 
```

[我在这里](https://stackoverflow.com/questions/11558240/not-all-exceptions-are-mapping-to-resolveexception-in-simplemappingexceptionreso)有一个关于同一件事的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:57:58.210

一种方法是使用`HandlerExceptionResolver`接口。

HandlerExceptionResolver 接口的替代方法是`@ExceptionHandler`注解。您使用控制器中的`@ExceptionHandler`方法注释来指定在执行控制器方法期间抛出特定类型的异常时调用哪个方法。例如：

```
package com.spring3;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class HelloWorldController {

    @ExceptionHandler(Exception.class)
    public ModelAndView handleMyException(Exception exception) { 
        ModelAndView mv = new ModelAndView("redirect:errorMessage.html?error=" + exception.getMessage());
        return mv; 
    }

    @RequestMapping(value = "/errorMessage", method = RequestMethod.GET)
    public ModelAndView handleMyExceptionOnRedirect(@RequestParam("error") String error) {
        ModelAndView mv = new ModelAndView("uncaughtExceptionSpring"); 
        v.addObject("error", error);
        return mv; 
    }

    @RequestMapping("/hello")
    public ModelAndView helloWorld() throws Exception {
        String message = "Hello World, Spring 3.0!";
        return new ModelAndView("hello", "message", message);
    }
} 
```

Spring MVC 异常处理和显示自定义视图[Part1](http://www.imrantariq.com/blog/?p=659) , [2](http://www.imrantariq.com/blog/?p=661) , [3](http://www.imrantariq.com/blog/?p=663) , [4](http://www.imrantariq.com/blog/?p=675)

# gwt - 更改可见范围时如何避免 CellList/Table 自动滚动到所选项目

> ID：11792233
> 
> 赞同：4
> 
> 时间：2012-08-03T08:40:09.353
> 
> 标签：gwt, gwt-celltable

[我正在使用 CellList 展示示例 ( http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellList](http://gwt.google.com/samples/Showcase/Showcase.html#!CwCellList) )实现具有无限滚动功能的自定义 CellTable 。但是，我在 CellList/Table 中发现了一个在这种情况下不受欢迎的功能：单击项目后更改可见范围会导致 List/Table 自动滚动到所选项目。

您可以尝试上面的展示示例以查看完全相同的行为。当没有选择项目时，无限滚动工作得很好，但是当你单击一个项目然后滚动它时，当范围改变时它总是会跳回到选定的项目。

我还发现只有当焦点仍然在该项目上时才会发生，即如果您选择一个项目然后单击其他地方失去焦点，则不会发生这种情况。

我一直在挖掘 GWT 代码并试图找出如何禁用此功能但没有成功。以前有人处理过这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:55:53.233

作为一个简单的解决方法，您可以调用`focus()`某个元素，以从项目中移除焦点（不移除选择）。

在展示示例中`ShowMorePagerPanel`，添加 eg

```
scrollable.getElement().focus(); 
```

在`onScroll(ScrollEvent event)`方法的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-15T19:58:32.590

我遇到了同样的问题，无法得到克里斯的答案来解决它，但以下解决方案对我有用：

在您的`onScroll(ScrollEvent event)`方法中，添加类似于以下内容的行，假设 yourTable 是扩展 AbstractHasData 的实例

```
yourTable.setFocus(false); 
```

# c# - 动态获取上传图片的 url 到 Imgur

> ID：11792235
> 
> 赞同：2
> 
> 时间：2012-08-03T08:40:15.677
> 
> 标签：c#, visual-studio-2010, c#-4.0

我想以匿名用户的身份使用它的 API 将图像上传到 Imgur.com。上传图片后，我想动态获取该图片网址。我如何使用 C# Winforms 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:43:19.550

该文档提供[了一个您可以尝试的示例](http://api.imgur.com/examples#uploading_cs)：

```
using System;
using System.IO;
using System.Net;
using System.Text;

namespace ImgurExample
{
    class Program
    {
        static void Main(string[] args)
        {
            PostToImgur(@"C:\Users\ashwin\Desktop\image.jpg", IMGUR_ANONYMOUS_API_KEY);
        }

        public static void PostToImgur(string imagFilePath, string apiKey)
        {
            byte[] imageData;

            FileStream fileStream = File.OpenRead(imagFilePath);
            imageData = new byte[fileStream.Length];
            fileStream.Read(imageData, 0, imageData.Length);
            fileStream.Close();

            const int MAX_URI_LENGTH = 32766;
            string base64img = System.Convert.ToBase64String(imageData);
            StringBuilder sb = new StringBuilder();

            for(int i = 0; i < base64img.Length; i += MAX_URI_LENGTH) {
                sb.Append(Uri.EscapeDataString(base64img.Substring(i, Math.Min(MAX_URI_LENGTH, base64img.Length - i))));
            }

            string uploadRequestString = "image=" + sb.ToString() + "&key=" + imgurApiKey;

            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("http://api.imgur.com/2/upload");
            webRequest.Method = "POST";
            webRequest.ContentType = "application/x-www-form-urlencoded";
            webRequest.ServicePoint.Expect100Continue = false;

            StreamWriter streamWriter = new StreamWriter(webRequest.GetRequestStream());
            streamWriter.Write(uploadRequestString);
            streamWriter.Close();

            WebResponse response = webRequest.GetResponse();
            Stream responseStream = response.GetResponseStream();
            StreamReader responseReader = new StreamReader(responseStream);

            string responseString = responseReader.ReadToEnd();
        }
    }
} 
```

服务器返回的响应将包含指向上传图像的链接。例如：

```
{
    "upload": {
        "image": {
            "name": false,
            "title": "",
            "caption": "",
            "hash": "cSNjk",
            "deletehash": "ZnKGru1reZKoabU",
            "datetime": "2010-08-16 22:43:22",
            "type": "image\/jpeg",
            "animated": "false",
            "width": 720,
            "height": 540,
            "size": 46174,
            "views": 0,
            "bandwidth": 0
        },
        "links": {
            "original": "http:\/\/imgur.com\/cSNjk.jpg",
            "imgur_page": "http:\/\/imgur.com\/cSNjk",
            "delete_page": "http:\/\/imgur.com\/delete\/ZnKGru1reZKoabU",
            "small_square": "http:\/\/imgur.com\/cSNjks.jpg",
            "large_thumbnail": "http:\/\/imgur.com\/cSNjkl.jpg"
        }
    }
} 
```

为了使用匿名 API，您需要[获取 API 密钥](http://api.imgur.com/resources_anon#anonapi)。

# perl - 在 Perl 中正确处理 UTF-8

> ID：11792239
> 
> 赞同：3
> 
> 时间：2012-08-03T08:40:30.737
> 
> 标签：perl, utf-8, character-encoding, latin1

我得到了一个文件，（可能）用 Latin-1 (ISO 8859-1) 编码，并且有一些转换和数据挖掘需要用它来完成。输出应该是 UTF-8 格式，我已经尝试了所有我能找到的关于 Perl 中的编码转换的方法，但它们都没有产生任何可用的输出。

我知道这`use utf8;`从一开始就无济于事。我试过这个[`Encode`](http://search.cpan.org/~dankogai/Encode-2.44/Encode.pm)包，看起来很有希望：

```
open FILE, '<', $ARGV[0] or die $!;

my %tmp = ();
my $last_num = 0;

while (<FILE>) {
    $_ = decode('ISO-8859-1', encode('UTF-8', $_));

    chomp;
    next unless length;
    process($_);
} 
```

我尝试了我能想到的任何组合，还加入了`binmode(STDOUT, ":utf8");`，`open FILE, '<:encoding(ISO-8859-1)', $ARGV[0] or die $!;`等等。结果要么是混乱的变音符号，要么是错误消息，例如`\xC3 is not a valid UTF-8 character`，甚至是混合文本（一些在 UTF-8 中，一些在 Latin-1 中）。

我想要的只是一种简单的方法来读取 Latin-1 文本文件并通过`print`. 在 Perl 中是否有任何简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T09:31:48.580

请参阅[Perl 编码介绍](http://p3rl.org/UNI)和[Unicode 食谱](http://training.perl.com/scripts/perlunicook.html)。

*   最简单的[piconv](http://p3rl.org/piconv)：

    ```
    $ piconv -f Latin1 -t UTF-8 < input.file > output.file 
    ```

*   简单，带有编码层：

    ```
    use autodie qw(:all);
    open my $input, '<:encoding(Latin1)', $ARGV[0];
    binmode STDOUT, ':encoding(UTF-8)'; 
    ```

*   适度地，使用手动解码/编码：

    ```
    use Encode qw(decode encode);
    use autodie qw(:all);

    open my $input, '<:raw', $ARGV[0];
    binmode STDOUT, ':raw';
    while (my $raw = <$input>) {
        my $line = decode 'Latin1', $raw, Encode::FB_CROAK | Encode::LEAVE_SRC;
        my $result = process($line);
        print {STDOUT} encode 'UTF-8', $result, Encode::FB_CROAK | Encode::LEAVE_SRC;
    } 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T08:50:29.703

也许作为：

```
$_ = encode('utf-8', decode('ISO-8859-1', $_)); 
```

数据是 gb2312 编码，因此可以将其转换为 utf-8：

```
#!/usr/bin/env perl

use Encode qw(encode decode);

while (<DATA>) {
    $_ = encode('utf-8', decode('gb2312', $_));
    print;
}

__DATA__
Â×¶Ø°ÂÔË»á 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T10:39:46.807

```
$_ = decode('ISO-8859-1', encode('UTF-8', $_)); 
```

这条线有两个问题。首先，您将输入编码为 UTF-8，然后从 ISO-8859-1 解码。这两个操作是错误的。

其次，您几乎肯定不想同时解码和编码。在 Perl 中处理字符编码的黄金法则是遵循这个过程：

1.  从外部世界获取数据后立即解码。这将获取您的输入字节流并将其转换为 Perl 的字符串内部表示。
2.  根据您的要求处理数据。
3.  在将数据发送到外界之前对其进行编码。这采用 Perl 对字符串的内部表示并将其转换为正确编码的字节流，以用于您所需的输出编码。

# c# - 如何修剪字符串并将残差存储在数组中？

> ID：11792244
> 
> 赞同：0
> 
> 时间：2012-08-03T08:40:49.780
> 
> 标签：c#, arrays, string, .net-2.0

我被困住了。（现在有一个思维障碍）：/

我需要一个字符串数组，它包含很多“sometext\n\t\t\t\t00:00\n\t\t\t\t05:32\n\t\t\t\t.. ..”
这个字符串中总是有 8 个值。我想要数组 [8] 中的每个（这 8 个）值。
但最重要的是价值。（开头的文字是不必要的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:01:54.983

这会起作用吗：

```
 var source = "sometext\n\t\t\t\t00:00\n\t\t\t\t05:32\n\t\t\t\t...."
 var result = source.Split(new []{"\n\t\t\t\t"}, StringSplitOptions.None); 
```

即：猜测您的所有值都由换行符 + 4 个制表符分隔。

如果那不是（总是）分隔符，那么您需要指定如何从“分隔符”中识别“值”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:45:50.323

我认为以下代码将满足您的需求

```
 int i,j;
 int[] array=new int[8];
 string s="sometext\n\t\t\t\t00:00\n\t\t\t\t05:32\n\t\t\t\t...."; // or input something
 for(i=j=0;i<s.Length;i++){
    if (s[i]>='0'&&s[i]<='9'){
       array[j++]=s[i]-'0';
    }
 } 
```

# asp.net - 通过链接按钮注销 Facebook

> ID：11792247
> 
> 赞同：3
> 
> 时间：2012-08-03T08:41:05.387
> 
> 标签：asp.net, facebook, logout, linkbutton

我一直在查看 StackOverflow 和 Internet 上关于能够通过 ASP.NET LinkBut​​ton 将用户从 Facebook 注销的大量帖子。

我尝试从以下帖子中实施解决方案：

*   [asp.net web 应用程序中的 Facebook 注销按钮](https://stackoverflow.com/questions/8516326/facebook-logout-buton-in-asp-net-web-application)
*   [如何在asp.net中从facebook连接注销？](https://stackoverflow.com/questions/2883718/how-to-logout-from-facebook-connect-in-asp-net)
*   [Facebook注销混乱](https://stackoverflow.com/questions/3927513/facebook-logout-confusion)

## 代码

### ASPX 页面

```
<asp:LinkButton ID="LogoutButton" CssClass="log-out fb"  OnClick="LogoutButton_Click" runat="server">Logout</asp:LinkButton> 
```

### JavaScript

```
$(".log-out.fb").click(function () {
    FB.logout(function (response) {
        //Logged out
        FB.Auth.setAuthResponse(null, 'unknown');
    });
}); 
```

### HTML 输出

```
<a id="MainContent_LogoutButton" class="log-out fb" href="javascript:__doPostBack('ctl00$MainContent$LogoutButton','')" style="width: 66px; ">Logout</a> 
```

我绝对知道通过 Firebug 调试时会触发 jQuery click 事件。jQuery 代码在与标准 HTML 锚点结合使用时可以正常工作，因此它没有理由不在 ASP.NET LinkBut​​ton 上工作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T10:17:12.953

感谢你的帮助。但是我设法通过使用以下链接找到了一种注销用户的方法：

```
https://www.facebook.com/logout.php?next=YOUR_URL&access_token=ACCESS_TOKEN 
```

我创建了一个类似于[本文](http://www2.suddenelfilio.net/2010/09/08/connect-to-facebook-using-asp-net-facebook-graph-api-hammock/)中的回调页面。收到“访问令牌”后，我设法将用户注销。

这是我的回调页面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!String.IsNullOrEmpty(Request["code"]) && !Page.IsPostBack)
    {
        FacebookCallback();
    }
}

private void FacebookCallback()
{
    var client = new RestClient { Authority = "https://graph.facebook.com/oauth/" };
    var request = new RestRequest { Path = "access_token" };

    request.AddParameter("client_id", ConfigurationManager.AppSettings["facebook.appid"]);
    request.AddParameter("redirect_uri", ConfigurationManager.AppSettings["facebook.logout.callbackurl"]);
    request.AddParameter("client_secret", ConfigurationManager.AppSettings["facebook.appsecret"]);
    request.AddParameter("code", Request["code"]);

    RestResponse response = client.Request(request);
    // A little helper to parse the querystrings.
    StringDictionary result = QueryStringHelper.ParseQueryString(response.Content);

    string aToken = result["access_token"];

    LogUserOut(aToken);
}

private void LogUserOut(string sToken)
{
    string url = String.Format("https://www.facebook.com/logout.php?next=http://{0}/Default.aspx&access_token={1}", ConfigurationManager.AppSettings["site.url"], sToken);

    Response.Redirect(url);
} 
```

如果遇到同样的问题，我希望这对其他人有所帮助。

# python - 如果没有被单引号包围，Python 正则表达式将替换字符串

> ID：11792258
> 
> 赞同：2
> 
> 时间：2012-08-03T08:42:00.583
> 
> 标签：python, regex

如果没有被单引号包围，我正在尝试编写一个正则表达式来替换字符串。例如，我想在以下字符串中将 FOO 替换为 XXX：

```
string = "' FOO ' abc 123 ' def FOO ghi 345 ' FOO '' FOO ' lmno 678 FOO '" 
```

所需的输出是：

```
output = "' FOO ' abc 123 ' def FOO ghi 345 ' XXX '' XXX ' lmno 678 FOO '" 
```

我目前的正则表达式是：

```
myregex = re.compile("(?<!')+( FOO )(?!')+", re.IGNORECASE) 
```

我想我必须使用环视运算符，但我不明白......正则表达式对我来说太复杂了：D

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:16:19.027

这是如何完成的：

```
import re

def replace_FOO(m):
    if m.group(1) is None:
        return m.group()

    return m.group().replace("FOO", "XXX")

string = "' FOO ' abc 123 ' def FOO ghi 345 ' FOO '' FOO ' lmno 678 FOO '"

output = re.sub(r"'[^']*'|([^']*)", replace_FOO, string)

print(string)
print(output) 
```

[编辑]

该`re.sub`函数将接受字符串模板或函数作为替换。如果替换是一个函数，每次找到匹配时都会调用该函数，传递匹配对象，然后使用返回值（必须是字符串）作为替换字符串。

至于模式本身，当它搜索时，如果`'`当前位置有 a ，它将匹配到并包括 next `'`，否则它将匹配到但不包括`'`字符串的下一个或结尾。

每次匹配都会调用替换函数并返回适当的结果。

其实，现在想来，我根本不需要用组。我可以这样做：

```
def replace_FOO(m):
    if m.group().startswith("'"):
        return m.group().replace("FOO", "XXX")

    return m.group()

string = "' FOO ' abc 123 ' def FOO ghi 345 ' FOO '' FOO ' lmno 678 FOO '"

output = re.sub(r"'[^']*'|[^']+", replace_FOO, string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:58:40.567

如果没有可变长度的后视，这很难做到。我不确定 python 正则表达式是否支持它。无论如何，一个简单的解决方案如下：

使用这个正则表达式： `(?:[^'\s]\s*)(FOO)(?:\s*[^'\s])`

第一个捕获组应该返回正确的结果。

如果这始终是一个引号，后面有一个空格，如在您的示例中，您可以使用固定长度的lookbehind：`(?<=[^'\s]\ )FOO(?=\s*[^'\s])`这将与您想要的完全匹配。

# ruby - 在 Sinatra 中使用 AssetPack 访问请求对象

> ID：11792262
> 
> 赞同：1
> 
> 时间：2012-08-03T08:42:18.400
> 
> 标签：ruby, sinatra, sinatra-assetpack

我正在使用[AssetPack](http://ricostacruz.com/sinatra-assetpack/)处理我的 Sinatra 应用程序上的公共资产。因为该应用程序在网站上作为可嵌入广告工作，所以我需要声明 css assets route absolute。这是我当前的代码：

```
require 'rubygems'
require 'sinatra'
require 'rack'
require 'sinatra/assetpack'

class Ads < Sinatra::Application

  assets {
    css :mybanner, "http://#{request.host_with_port}/css/styling.css", [
      "http://#{request.host_with_port}/css/styling.css"
    ]
  } 
```

问题是打电话时`request.host_with_port`出现以下错误

```
NameError: undefined local variable or method `request' for #    <Sinatra::AssetPack::Options:0x007fc1f88b0a80> 
```

我不确定为什么`request`不工作。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:50:49.180

据我了解，*AssetPack*在服务器启动时构建资产。
显然，该`request`对象当时不可用。

这是我的建议：

```
class Ads < Sinatra::Application
  host_with_port = ENV['HOST_WITH_PORT']

  assets {
    css :mybanner, "http://#{host_with_port}/css/styling.css", [
      "http://#{host_with_port}/css/styling.css"
    ]
  }
end 
```

您需要设置一个`HOST_WITH_PORT`环境变量，但您只需为每个站点设置一次。

# php - 如何设置正确的codeigniter base url？

> ID：11792268
> 
> 赞同：39
> 
> 时间：2012-08-03T08:42:51.657
> 
> 标签：php, codeigniter

当我在开发环境中有我的网站时 - 它是 url: **testurl.com**

现在在生产服务器上，我的 codeigniter 应用程序的地址必须是**someurl.com/mysite/**

我把它移到那里，每次我试图运行一些功能，例如**/home/test** - 它让我进入**someurl.com/home/test** - 这是错误的。

它必须是**someurl.com/mysite/home/test** - 如何解决？我确实设置了

```
$config['base_url'] = someurl.com/mysite/ 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-03T18:19:58.137

基本 URL 应该是绝对的，包括协议：

```
$config['base_url'] = "http://somesite.com/somedir/"; 
```

如果使用 URL 助手，`base_url()`则将输出上述字符串。

将参数传递给`base_url()`or`site_url()`将导致以下结果（假设`$config['index_page'] = "index.php";`：

```
echo base_url('assets/stylesheet.css'); // http://somesite.com/somedir/assets/stylesheet.css
echo site_url('mycontroller/mymethod'); // http://somesite.com/somedir/index.php/mycontroller/mymethod 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-11-04T06:47:39.337

查看

> 配置 > 配置

代码点火器文件结构

代替

```
$config['base_url'] = "your Website url"; 
```

和

```
$config['base_url']  =  "http://".$_SERVER['HTTP_HOST'];

$config['base_url'] .= preg_replace('@/+$@', '', dirname($_SERVER['SCRIPT_NAME'])).'/'; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-06-15T10:41:39.627

嗯，这很有趣，这是快速且有效的代码：

**`index.php`**

```
/**
 * Define APP_URL Dynamically
 * Write this at the bottom of index.php
 *
 * Automatic base url
 */
define('APP_URL', ($_SERVER['SERVER_PORT'] == 443 ? 'https' : 'http') . "://{$_SERVER['SERVER_NAME']}".str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME'])); 
```

**`config.php`**

```
/*
|--------------------------------------------------------------------------
| Base Site URL
|--------------------------------------------------------------------------
|
| URL to your CodeIgniter root. Typically this will be your base URL,
| WITH a trailing slash:
|
|   http://example.com/
|
| If this is not set then CodeIgniter will guess the protocol, domain and
| path to your installation.
|
*/
$config['base_url'] = APP_URL; 
```

CodeIgniter 摇滚！！！:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-03T08:46:51.063

如果您将其留空，框架将尝试从 version开始[自动检测](https://github.com/bcit-ci/CodeIgniter/blob/b563d76e574ba02df3fca9fe6ab21bf9be348c7b/system/core/Config.php#L68)`2.0.0`它。

但不在`3.0.0`，请参见此处：[config.php](https://github.com/bcit-ci/CodeIgniter/blob/3.1-stable/application/config/config.php#L14-L26)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-05T00:17:36.143

我认为 CodeIgniter 3 建议`$config['base_url']`手动设置为完整的 url 以避免[HTTP 标头注入](https://en.wikipedia.org/wiki/HTTP_header_injection)。

如果你不关心它，你可以简单地在你的

**`application/config/config.php`**

```
defined('BASE_URL') OR define('BASE_URL', (is_https() ? 'https://' : 'http://') . $_SERVER['HTTP_HOST'] . dirname($_SERVER['SCRIPT_NAME']) . '/');
$config['base_url'] = BASE_URL; 
```

通过这种方式，您`BASE_URL`在所有项目代码（包括视图）中也可以使用常量，并且您不必使用函数：

```
config_item('base_url') //returns BASE_URL
$this->config->item('base_url'); //returns BASE_URL 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-15T09:19:37.123

这是我在hostinger.com申请的服务器和实时站点，它工作正常

第一个：（`$config['base_url'] = 'http://yoursitename.com';` **在confing.php中）**

2）：（`src="<?=base_url()?>assest/js/wow.min.js"` **在视图文件中）**

3）：（ `href="<?php echo base_url()?>index.php/Mycontroller/Method"` **用于url链接或方法调用）**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-24T19:55:13.930

在 config.php 中声明基本 url 后，（注意，如果您仍然收到相同的错误，请检查 autoload.php）

```
$config['base_url'] = "http://somesite.com/somedir/"; 
```

检查“自动加载”

CodeIgniter 文件结构：

```
\application\config\autoload.php 
```

并启用自动加载：

```
$autoload['helper'] = array(**'url',** 'file'); 
```

它有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-25T10:27:02.030

您可以为必须在配置文件夹中使用的任何服务器使用默认基本 URL 路径 > config.php 文件替换您：

```
$config['base_url'] = 'index.php'; 
```

通过此代码： `$config['base_url'] = "http://".$_SERVER['HTTP_HOST']; $config['base_url'] .= preg_replace('@/+$@','',dirname($_SERVER['SCRIPT_NAME'])).'/';`

它会从任何服务器自动找到您的文件夹

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-10T09:06:01.867

应用程序 > 配置 > config.php

搜索 $config['base_url'] 并将您的网站设置为“//example.com”（跳过协议）

```
 $config['base_url'] = "//someurl.com/"; 
```

这对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-08T11:37:35.393

在您的配置文件中，保留`$config['base_url'] = ''`

`base_url`会自动创建一个。在您的 Codeigniter 中`system/core/Config.php`

```
 // Set the base_url automatically if none was provided
        if (empty($this->config['base_url']))
        {
            if (isset($_SERVER['SERVER_ADDR']))
            {
                if (strpos($_SERVER['SERVER_ADDR'], ':') !== FALSE)
                {
                    $server_addr = '['.$_SERVER['SERVER_ADDR'].']';
                }
                else
                {
                    $server_addr = $_SERVER['SERVER_ADDR'];
                }

                $base_url = (is_https() ? 'https' : 'http').'://'.$server_addr
                    .substr($_SERVER['SCRIPT_NAME'], 0, strpos($_SERVER['SCRIPT_NAME'], basename($_SERVER['SCRIPT_FILENAME'])));
            }
            else
            {
                $base_url = 'http://localhost/';
            }

            $this->set_item('base_url', $base_url);
        } 
```

此代码已用于自动创建基本 URL 和协议。

谢谢。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-08-03T09:00:27.150

你错过了双引号吗？

> $config['base_url'] = "someurl.com/mysite"

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-07-02T09:12:35.713

> **动态基本网址（codeigniter）**
> 
> 只需使用以下内容覆盖 config/config.php 中的行：
> 
> $config['base_url'] = 'http://'.$_SERVER['HTTP_HOST'].'/';

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-03-01T05:51:08.240

```
$config['base_url'] = "http://".$_SERVER['SERVER_NAME']."/project_name/"; 
```

> 这样你就可以配置你 base_url ，然后就不用担心托管了。两者都适用于本地主机和服务器。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-06-07T13:57:33.543

```
Base url set in CodeIgniter for all url

$config['base_url'] = "http://".$_SERVER['HTTP_HOST']."/"; 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2018-01-06T08:45:59.690

像这样更改config.php。

```
$base_url = ((isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == "on") ? "https" : "http");
$base_url .= "://". @$_SERVER['HTTP_HOST'];
$base_url .= str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']);
$config['base_url'] = $base_url; 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-07-19T07:33:22.503

基本 URL 应该是绝对的，包括协议：

```
$config['base_url'] = "http://".$_SERVER['SERVER_NAME']."/mysite/"; 
```

此配置适用于 localhost 和服务器。

不要忘记启用自动加载：

```
$autoload['helper'] = array('url','file'); 
```

然后 base_url() 将输出如下

```
echo base_url('assets/style.css'); //http://yoursite.com/mysite/assets/style.css 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2012-08-03T08:49:54.680

尝试将控制器添加到您的索引页面。只是在我自己的一个站点上查看了类似的结构，我将基本 url 设置为 = "somedomain.com/v2/controller"

# google-bigquery - 无法删除表

> ID：11792270
> 
> 赞同：1
> 
> 时间：2012-08-03T08:43:00.533
> 
> 标签：google-bigquery

我似乎无法删除我的表 387047224813。API 调用失败并出现*Undefined error*，当我通过控制台尝试时它不会抱怨，但它也不会删除表。

我该如何解决这个问题？

为了确认，我使用了 API 文档中的以下 API 代码，它适用于任何其他表，但不适用于这个：

```
# Delete a table
def deleteTable(service, projectId, datasetId, tableId):
  try:
    service.tables().delete(projectId=projectId, datasetId=datasetId, tableId=tableId).execute()

  except AccessTokenRefreshError:
    print ("The credentials have been revoked or expired, please re-run the application to re-authorize")

  except Exception as err:
    print 'Undefined error' % err

  except:
    print "\nWARNING: Table [" + tableId + "] doesn't exist!\n" 
```

我收到错误*未定义的错误*，没有解释

Web 控制台中的 Delete Table 命令不会删除该表这一事实也让我认为[BigQuery](https://en.wikipedia.org/wiki/BigQuery)可能存在与此特定表有关的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:25:48.710

BigQuery 表 ID 包含三个部分：项目 ID、数据集 ID 和表 ID。您给“387047224813”的值是一个项目 ID .. 但要删除一个表，您还需要指定一个数据集和表 ID。如果您正在指定数据集和表 ID，您现在可以告诉我们它们是哪些吗？

# android - 在 Android 中如何让我的活动表现得像浏览器

> ID：11792274
> 
> 赞同：0
> 
> 时间：2012-08-03T08:43:09.287
> 
> 标签：android, android-activity, android-browser

我有两个活动“主要”（其中有一个按钮）和“第二个”，我希望当我单击主要活动中的按钮时，应该启动第二个活动，但它应该像浏览器一样运行。表示启动第二个活动时应打开浏览器。

我的代码如下：
在我写的清单文件中

```
 <activity android:name=".Second">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE"/>
        </intent-filter>
    </activity> 
```

在 Main.java 文件中，我编写了这样的事件处理程序

```
Button b = (Button) findViewById(R.id.button1);

b.setOnClickListener(new OnClickListener() {

         @Override
         public void onClick(View v) {
         // TODO Auto-generated method stub

         Intent intent = new Intent(Main.this, Second.class);
         startActivity(intent);
    }
}); 
```

首先，是否有可能是我想要的，如果是，那么我是否以正确的方式做这件事？如果我的问题很愚蠢，真的很抱歉，因为我是 Android 新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:46:40.183

在你的第二个活动中写下这个。当您的第二个活动将调用它时，它将打开一个浏览器。

您也可以在 onClick() 中使用它。

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:52:36.973

当我开始学习 android 及其意图时，我发现它非常混乱。但是 Manifest 中的 BROWSABLE 类别执行以下操作。

浏览器可以安全地调用目标活动来显示链接引用的数据——例如，图像或电子邮件消息。

阅读更多：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

其他两个答案打开标准网络浏览器并转到指定的地址。如果你想要一个自定义浏览器，让第二个活动像这个例子一样的 web 视图：

[http://www.mkyong.com/android/android-webview-example/](http://www.mkyong.com/android/android-webview-example/)

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:31:21.830

```
 public class WebDialog extends Dialog
{

    static final int                      BLUE                  = 0xFF6D84B4;
    static final float[]                  DIMENSIONS_DIFF_LANDSCAPE =
                                                                    { 20, 60 };
    static final float[]                  DIMENSIONS_DIFF_PORTRAIT  =
                                                                    { 40, 60 };
    static final FrameLayout.LayoutParams   FILL                    = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT);
    static final int                      MARGIN                    = 4;
    static final int                      PADDING                   = 2;
    static final String                   DISPLAY_STRING            = "touch";

    private String                        mUrl;
//  private DialogListener                mListener;
    private ProgressDialog                mSpinner;
    private WebView                       mWebView;
    private LinearLayout                  mContent;
    private TextView                      mTitle;

    public WebDialog(Context context, String url)
    {
        super(context);
        mUrl = url;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        mSpinner = new ProgressDialog(getContext());
        mSpinner.requestWindowFeature(Window.FEATURE_NO_TITLE);
        mSpinner.setMessage("Loading...");

        mContent = new LinearLayout(getContext());
        mContent.setOrientation(LinearLayout.VERTICAL);
        setUpTitle();
        setUpWebView();
        Display display = getWindow().getWindowManager().getDefaultDisplay();
        final float scale = getContext().getResources().getDisplayMetrics().density;
        int orientation = getContext().getResources().getConfiguration().orientation;
        float[] dimensions = (orientation == Configuration.ORIENTATION_LANDSCAPE) ? DIMENSIONS_DIFF_LANDSCAPE : DIMENSIONS_DIFF_PORTRAIT;
        addContentView(mContent, new LinearLayout.LayoutParams(display.getWidth() - ((int) (dimensions[0] * scale + 0.5f)), display.getHeight() - ((int) (dimensions[1] * scale + 0.5f))));
    }

    private void setUpTitle()
    {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        Drawable icon = getContext().getResources().getDrawable(R.drawable.ic_launcher);
        mTitle = new TextView(getContext());
        mTitle.setText("Website");
        mTitle.setTextColor(Color.WHITE);
        mTitle.setTypeface(Typeface.DEFAULT_BOLD);
        mTitle.setBackgroundColor(BLUE);
        mTitle.setPadding(MARGIN + PADDING, MARGIN, MARGIN, MARGIN);
//      mTitle.setCompoundDrawablePadding(MARGIN + PADDING);
//      mTitle.setCompoundDrawablesWithIntrinsicBounds(icon, null, null, null);
        mContent.addView(mTitle);
    }

    private void setUpWebView()
    {
        mWebView = new WebView(getContext());
        mWebView.setVerticalScrollBarEnabled(false);
        mWebView.setHorizontalScrollBarEnabled(false);
        mWebView.setWebViewClient(new WebDialog.DialogWebViewClient());
        mWebView.getSettings().setJavaScriptEnabled(true);

        System.out.println(" mURL = "+mUrl);

        mWebView.loadUrl(mUrl);
        mWebView.setLayoutParams(FILL);
        mContent.addView(mWebView);
    }

    private class DialogWebViewClient extends WebViewClient
    {

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
            view.loadUrl(url);

            return true;
        }

        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl)
        {
            super.onReceivedError(view, errorCode, description, failingUrl);
            WebDialog.this.dismiss();
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon)
        {
            super.onPageStarted(view, url, favicon);
            mSpinner.show();
        }

        @Override
        public void onPageFinished(WebView view, String url)
        {
            super.onPageFinished(view, url);
            String title = mWebView.getTitle();
            if (title != null && title.length() > 0)
            {
                mTitle.setText(title);
            }
            mSpinner.dismiss();
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:48:11.230

当单击主要活动上的按钮时，似乎您正试图将浏览器打开到特定页面。

如果是这种情况，您不需要第二个活动，您只需要执行以下操作：

```
Button b = (Button) findViewById(R.id.button1);

b.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
        startActivity(i);
    }
} 
```

# haskell - monad 转换器是否需要访问 monad 的内部结构？

> ID：11792275
> 
> 赞同：10
> 
> 时间：2012-08-03T08:43:11.903
> 
> 标签：haskell, monads, monad-transformers

是否有必要访问 monad 的内部结构来编写 monad 转换器？

例如：我想拥有来自 Data.Binary.Get`GetT`的 monad 转换`Get`器，但是这个模块不会暴露`Get`monad 的内部结构。这是否意味着我唯一的方法是`GetT`直接添加到 Data.Binary.Get 模块？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T11:01:43.820

一般来说，是的。在这个例子中看看内部 monad（这里是 list monad）如何“撤销”外部 monad 的“早期”动作的效果：

```
> execWriterT (tell "Hi" >> tell "Ho" >> lift [()])
["HiHo"]
> execWriterT (tell "Hi" >> tell "Ho" >> lift [])
[] 
```

现在假设您可以将每个 monad 变成一个 monad 转换器。然后你就可以构建一个`IOT`单子变压器，这可以发射导弹但随后撤消它：

```
> execIOT (launchMissile >> lift []) 
```

因此，在不查看定义的情况下，不可能将任意 monad 转换为 monad 转换器。

# javascript - 使用单选按钮引用另一个功能

> ID：11792281
> 
> 赞同：-3
> 
> 时间：2012-08-03T08:43:18.303
> 
> 标签：javascript

我是 javascript 新手，现在我有一个问题。我们如何使用单选按钮来引用一个功能？我有国家名单，这个名单包括人口、面积和密度。我想在我的脚本中添加单选按钮，例如当我选择单选按钮“区域”时，此功能返回另一个功能并从另一个功能中提取国家区域。我已经编写了这些函数，但它仅适用于区域。例如，当我选择它引用此函数的密度按钮并提取这些国家的密度时，我需要在此脚本中添加 3 个单选按钮
，然后第二个函数将更改颜色。请帮我

```
var myCantons = []; 
myCantons[0] = ["Name Country","area km²","density",Population];
myCantons[102] = ["Germany",221.90,2696,117];
myCantons[106] = ["Italy",271.50,6510,485];
myCantons[107] = ["Denmark",141.31,2661,406];
myCantons[122] = ["Poland",286.25,3331,237];
myCantons[130] = ["Russia",124.49,5099,431];

 function myInit(){
   for(var i = 100; i < myCantons.length; i++){
    if(typeof myCantons[i] != 'undefined'){
        var myDensity = myCantons[i][2] ;
    var myNewColor = '';
    if(myDensity < 110){
         myNewColor = 'yellow';
         } else if (myDensity > 250){
           myNewColor = 'red';
         } else {
           myNewColor = 'orange';
         }
     var mySvgId ='myCantonId'+(''+i).substr(1);
     document.getElementById(mySvgId).setAttributeNS(null,'fill',myNewColor);
         }
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:48:57.290

您可能想查看 DOM 事件。

```
var handleChange = function (e) {
    if(e.target.checked) {
        // do something if the checkbox was selected
    } else {
        // do something if the checkbox was deselected
    }
}

document.getElementById("myCheckbox").addEventlistener("change", handleChange, false); 
```

您可以将更改事件附加到任何输入元素并监视它的状态。对于将成为`checked`属性的复选框/单选按钮。如果输入被选中，则为真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:05:51.547

我们可以放三个单选按钮

```
<input type="radio" name="group1" id="area" value="area" onClick="myInit(this)"/>
<input type="radio" name="group1" id="density" value="density" onClick="myInit(this)" />
<input type="radio" name="group1" id="population" value="population" onClick="myInit(this)"/> 
```

myInit 函数将被修改如下以获取单选按钮对象的参数。

```
myInit(myradio)
{

    if(myradio.checked == true && myradio.value=='area')
        //Here logic for returning area will come

    else if(myradio.checked == true && myradio.value=='density')
        //Here logic for returning density will come

    else if(myradio.checked == true && myradio.value=='population')
        //Here logic for returning population will come
} 
```

# java - 我可以通过 JSON 在运行时动态创建 Java 对象吗？

> ID：11792286
> 
> 赞同：6
> 
> 时间：2012-08-03T08:43:28.737
> 
> 标签：java, json, object

例如，我有这样的 JSON 格式：

> {"class":"MySpecialClass", "attri1":"value1", "attri2":"value2"}

我想创建一个对象，它是一个`MySpecialClass`对象，并获取两个属性，`attri1`并具有and`attri2`的值。`value1``value2`

这是要求：

1.  我有一个类文件，名为 ,`MySpecialClass`和`attri1`, 和`attri2`，我可以创建这个对象，并在其中赋值吗？

2.  我`DONT'T`有类文件`MySpecialClass`，我想在运行时生成它，这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:49:19.410

您的第一个案例使用任何 Java/JSON 解析器都是完全可行的。

你的第二种情况是可能的，但要努力。

您可以使用*字节码工程*在运行时构造类——例如使用[Apache BCEL](http://commons.apache.org/bcel/manual.html)。请注意，JSON 将仅包含字段，而不包含行为或类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:48:16.040

看看[https://github.com/google/gson](https://github.com/google/gson)它做你想要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:48:52.357

你想要一个 JSON 处理器，比如[Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)。我不确定您是否可以通过这种方式轻松完成第二种情况，因为您可能最好查看 JVM JavaScript 实现，除非您想进入诸如动态字节码操作之类的东西。[Java6 运行时中](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/scripting/)有一个。

# java - 从许多 jar 文件中创建一个合并的可执行 Jar（在类路径中使用）

> ID：11792288
> 
> 赞同：0
> 
> 时间：2012-08-03T08:43:36.533
> 
> 标签：java, jar, merge, executable-jar

我有一个桌面应用程序，它被打包为一个可自执行的 jar 文件，但我的代码需要访问许多 jar 文件，这些文件是我在清单文件的类路径中设置的。但是我遇到的问题是类路径中要使用的所有 jar，我必须将它们保存在与我的可执行 jar 文件相同的目录中。我需要以某种方式合并所有各种 jar，以便我可以在 .mf 文件的类路径中指定此单个 jar。.mf 文件是-->

```
Class-Path: poi-3.7-20101029.jar poi-examples-3.7-20101029.jar poi-ooxml-3.7-20101029.jar poi-ooxml-schemas-3.7-20101029.jar poi-scratchpad-3.7-20101029.jar jfreechart-1.0.14.jar jcommon-1.0.17.jar jfreechart-1.0.14-experimental.jar jfreechart-1.0.14-swt.jar junit.jar servlet.jar swtgraphics2d.jar gnujaxp.jar iText-2.1.5.jar
Main-Class: gui/GUILauncher 
```

请给我一个解决方案，这样我就可以实现我的目标......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:51:49.157

您可以在清单中指定每个 at 文件的路径

```
Class-Path: lib/poi-3.7-20101029 ... 
```

并将图书馆的罐子存放在这里。

虽然我喜欢将所有类组合到一个 Jar 中的想法，但您需要注意可能共享同一路径的资源。我们的应用程序中有这个问题，我们所有的罐子都包含一个版本文件，我们用作标记并通过 Class.getResources(...) 读取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:53:19.413

您不需要将所有这些 jar 文件保存在可执行的 jar 目录中。相反，您可以在 Manifest.mf 文件中指定依赖 jar 的相对路径。例如，您将可执行 jar 保存在 bin 文件夹下，将依赖 jar 保存在 lib 文件夹下。app-root + + \bin + + GuiLauncher.jar + + \lib + junit.jar + servlet.jar

Manifest.mf 类路径将是

`Class-Path: ..\lib\junit.jar ..\lib\servlet.jar`

# python - python random.sample("abc",3) 。如何使用正则表达式代替“abc”

> ID：11792293
> 
> 赞同：2
> 
> 时间：2012-08-03T08:43:52.997
> 
> 标签：python, regex

我正在尝试使用 random.sample 在 python 中生成随机数。这就是我编写代码的方式。

```
import random
r = "".join(random.sample("abcdefghijklmnopqrstuvwxyz", 10)) 
```

上面的代码生成长度为 10 的随机数，其字母由字母 az 填充。我怎样才能在那里使用像 [az] 这样的正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:44:58.850

改用这个

```
>>> from string import ascii_lowercase, ascii_uppercase
>>> ascii_lowercase
'abcdefghijklmnopqrstuvwxyz'
>>> ascii_uppercase
'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 
```

如果要生成数字，可以使用`range`

```
>>> map(str, range(10))
['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:14:57.953

如果您有方便的 pyparsing 模块，则可以使用 srange 方法将正则表达式字符集扩展为字符串：

```
>>> from pyparsing import srange
>>> srange('[a-z]')
u'abcdefghijklmnopqrstuvwxyz'
>>> srange('[a-z0-9]')
u'abcdefghijklmnopqrstuvwxyz0123456789' 
```

# javascript - 动画 jQuery 高度百分比

> ID：11792302
> 
> 赞同：3
> 
> 时间：2012-08-03T08:44:14.447
> 
> 标签：javascript, jquery, animation, jquery-animate

当我尝试为百分比设置动画时，它不是动画，而是立即扩展到整个高度。我希望它扩展到 100%，但很顺利

CSS：

```
#block-views{
overflow:hidden;
height:20px;
} 
```

HTML：

```
<div id="block-views">
    1<br/>
    2<br/>
    3<br/>
    4<br/>
    5<br/>
    6<br/>
    7<br/>
    8<br/>
    9<br/>
    10<br/>
</div>
<a href="#" class="loadmore">Load more</a> 
```

jQuery代码：

```
$(function() {
    $( ".loadmore" ).toggle(
        function() {
            $( "#block-views" ).animate({
                height: "20px",
            }, 1000 );
        },
        function() {
            $( "#block-views" ).animate({
                height: "100%",
            }, 1000 );
        }

    );
}); 
```

当我点击加载更多时，它会立即扩大到 100%，不平滑，但是当我第二次点击它时，它会平滑地减小到 20 像素。我尝试在 Chrome 的检查器工具中观看扩展过程，我可以清楚地看到百分比添加顺利，但数字不是整数，Chrome 似乎无法识别它。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:56:29.620

我认为 CSS 百分比值在父节点上。

所以如果你想让这成为可能，你想添加 div 父节点并设置父节点的高度，我在[jsFiddle中举了一个例子](http://jsfiddle.net/TUR76/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:47:02.670

我建议 JQuery 论坛上的这篇文章适合您的要求。

[http://forum.jquery.com/topic/jquery-animate-with-a-percentage-placed-div](http://forum.jquery.com/topic/jquery-animate-with-a-percentage-placed-div)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:47:34.400

我很确定这是不合法的。您不能混合使用 px 和 percent - 它无法在它们之间进行转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:51:23.673

我想到了两种方法。

第一种方式是你的方式，我在这里发现一个**逗号`,`错误：**并且需要使用`position:aboslute;`css 属性。最后一件事改变你的主要响应功能顺序。

[这是工作的jsFiddle。](http://jsfiddle.net/WN4tJ/21/)

```
$(function() {
    $( ".loadmore" ).toggle(
        function() {
            $( "#block-views" ).stop().animate({
                height: "20px"//if you wont use another animate property; dont use comma here
            }, 1000 );
        },
        function() {
            $( "#block-views" ).stop().animate({
                height: "100%"
            }, 1000 );
        }

    );
});​ 
```

结构是这样的 = .animate( properties [, duration] [, easing] [, complete] )

多个动画功能应该是这样的：`.animate({'height':'20px','width':'20px'},1000);`

## -------------------------------------------------- ----------

第二种方式是我的方式，您可以为每次点击添加 +20px 高度：

[这是jsFiddle](http://jsfiddle.net/WN4tJ/9/)

```
$(function() {
    $( ".loadmore" ).click(function() {
        $("#block-views").animate({'height':'+=20px'},1000);
    });
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-15T22:54:31.213

我找到了解决这个问题的方法（抱歉迟到了）。您需要做的是在**#block-views**元素内制作额外的包装器，该包装器将具有实际的高度信息：

```
<div id="block-views"> //height is 20px now
 <div class="wrapper"> //has its full height in px
  1<br/>
  2<br/>
  3<br/>
  4<br/>
  5<br/>
  6<br/>
  7<br/>
  8<br/>
  9<br/>
  10<br/>
 </div>
</div> 
```

现在在 javascript 中，您可以将**.wrapper**高度传递给 animate() 函数：

```
$('#block-news').stop().animate({'height': $('#block-news .wrapper').height()}, 1000); 
```

为我工作。对于切换，您可以添加新变量并在那里存储初始高度（20px）。

# eclipse - 将 Git 用于多个开发场所

> ID：11792303
> 
> 赞同：1
> 
> 时间：2012-08-03T08:44:27.833
> 
> 标签：eclipse, git, workflow, sync, dvcs

我想在我的开发工作流程中使用 git。我正在使用 Eclipse Juno。我来自 CVS，但看到分布式 VCS 有很多好处。我正在阅读 Pro Git 书，已经阅读了相当多的内容以开始使用它，但不知何故，有些东西并没有按照我认为的方式工作。我在单机上做得很好，但是当我进行远程存储库同步时失败。

这就是我想要实现的目标：

我有两台 PC，HOME 和 WORK。我想在两台 PC 上开发，所以也选择了 git 来同步它们。我在 THUMB 驱动器上创建了存储库，并将其克隆到 HOME & WORK 上。

现在，我想在 HOME 或 WORK 上进行开发，在本地提交，与 THUMB 同步，然后与另一台 PC（HOME 或 WORK）同步。

我应该发出什么命令来做到这一点？（例如工作 -> 拇指 -> 主页）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:56:34.157

基本工作流程是使用以下方式在本地提交：

```
$ git add .
$ git commit -m "Commit message" 
```

直到完成，然后：

```
# Push the 'master' branch to the 'thumb' repository
$ git push thumb master 
```

现在将拇指驱动器切换到另一台电脑，然后：

```
# Pull from the 'thumb' drive into your local repo
$ git pull thumb master 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:56:28.133

因此，在您的情况下，THUMB 就像一个在线中央存储库。如果您从 THUMB 克隆了 WORK 和 HOME，它应该设置为`origin`在两台 PC 上命名的远程，这很好。

因此，现在当您对 WORK 进行更改时，您需要`git push`. 它应该会自动*推送*您对`origin`, 所以在您的情况下对 THUMB 所做的更改。

然后在 HOME 你需要`git fetch`然后手动合并你的`master`with `origin/master`or `git pull`。这是一个偏好问题，我相信 Pro Git 比我能更好地解释它。

# javascript - 获取 div 信息的 Javascript

> ID：11792310
> 
> 赞同：1
> 
> 时间：2012-08-03T08:44:48.663
> 
> 标签：javascript, jquery, html

我有 4 个`<div>`标签和`<a>`每个标签的`<div>`标签。在每个`div`标签中，我都插入了 2 个`span`标签和一个`a`标签。

单击标签时，`a`我需要获取产品名称和价格`div`

这是演示[http://jsfiddle.net/8VCWU/](http://jsfiddle.net/8VCWU/)

当我在答案中使用代码时，我收到以下警告消息... ![警告信息](../Images/8b86ae0ac2762bfdd6ebacb666ab0db4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:05:56.050

解决方案如下

使用打击代码并尝试一下

```
<a data-role="link" href="javascript:linkHandler('<%= obj.productname %>', '<%= obj.price %>')" class="get" >Add <a>

function linkHandler(name, price)
{
    alert(name);
    alert(price);
    var name = name;
    var price = price;
    var cartItem = new item(name, parseFloat(price));
            // check duplicate
            var match = ko.utils.arrayFirst(viewModel.cartItems(), function(item){ return item.name == name; });
            if(match){
                match.qty(match.qty() + 1);
            } else {
              viewModel.cartItems.push(cartItem);
var rowCount = document.getElementById("cartcontent1").getElementsByTagName("TR").length;
document.getElementById("Totala").innerHTML = rowCount;
            }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:48:10.993

尝试这个：

```
$(".get").click(function(e) {
    e.preventDefault();
    var $parent = $(this).closest(".item");
    var itemName = $(".postname", $parent).text();
    var itemPrice = $(".price", $parent).text();

    alert(itemName + " / " + itemPrice);    
}); 
```

[**示例小提琴**](http://jsfiddle.net/8VCWU/1/)

请注意，您有很多重复的`id`属性，这些属性是无效的代码，会给您带来问题。我已经将`#item`元素及其子元素转换为使用类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T08:55:24.527

## jQuery

```
$(".get").click(function(event){    

    event.preventDefault(); /*To Prevent the anchors to take the browser to a new URL */

    var item = $(this).parent().find('#postname').text();
    var price = $(this).parent().find('#price').text(); 
    var result = item + " " + price;    
    alert(result)
}); 
```

## [演示](http://jsfiddle.net/akhurshid/wuR5M/)

**关于[id](https://developer.mozilla.org/en/XUL/Attribute/id)的快速说明：**

> id 属性为 HTML 元素指定一个唯一的 id（该值在 HTML 文档中必须是唯一的）。
> 
> 唯一标识符，以便您可以识别元素。您可以将其用作 getElementById() 和其他 DOM 函数的参数，并在样式表中引用该元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:18:52.767

嗨，我不止一次使用相同的 ID 清理了提到的 HTML 是一个问题。

使用 jQuery 和我提供的解决方案的标记是微不足道的。

记下下面小提琴上的 CSS

[http://jsfiddle.net/8VCWU/27/](http://jsfiddle.net/8VCWU/27/)

```
$(document).ready(function(){
    $("#itmLst a.get").click(function(){
        var $lstItm = $(this).parents("li:first");
        var pName = $lstItm.find("span.postname").html();
        var price = $lstItm.find("span.price").html();

        alert("Product Name: " + pName + " ; Price: " + price);
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:50:59.847

用 jQuery

```
​$('a.get').on('click',function(){
 var parent = $(this).parent(); 
 var name = $(parent+' #postname').text(); 
 var price = $(parent+' #price').text();    
});​​​​​​​​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T08:51:25.053

或者再次：

```
$('a').click(function(e){

    e.preventDefault();
    var $price = $(this).siblings('#price').text();
    var $postname = $(this).siblings('#postname').text();
    alert($price);
    alert($postname);

}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T08:54:57.490

尝试

```
function getPrice(currentClickObject)
{
   var priceSpan = $(currentClickObject).parent("div:first").children("#price");
   alert($(priceSpan).html());
} 
```

并添加到您的 a 标签：

```
<a href="..." onClick="getPrice(this)">...</a> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T08:56:20.520

如果您的代码中有多个，我建议使用 classed 而不是 id 。您正在寻找的功能是siblings() [http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

这是您更新的小提琴：http: [//jsfiddle.net/8VCWU/14/](http://jsfiddle.net/8VCWU/14/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-03T13:10:43.493

我对您的 html 标签进行了一些更改，并将所有重复的 Id 替换为 class，因为您在 html 中重复了许多 id，这会导致麻烦，因此结构错误。在 HTML 中，您必须为每个标签提供唯一的 id。它不会与任何其他标签冲突。

在这里，我完成了完整的 bins 演示。我还指定了使用适当的 jQuery 选择器查找标签内容的所有替代方法。演示链接如下：

**演示：** [http ://codebins.com/bin/4ldqp8v](http://codebins.com/bin/4ldqp8v)

**jQuery**

```
$(function() {
    $("a.get").click(function() {

        var itemName = $(this).parent().find(".postname").text().trim();
        var itemPrice = $(this).parent().find(".price").text().trim();

        //OR another Alternate
        // var itemName=$(this).parents(".item").find(".postname").text().trim();
        // var itemPrice=$(this).parents(".item").find(".price").text().trim();

        //OR another Alternate

        //var itemName=$(this).closest(".item").find(".postname").text().trim();
        //  var itemPrice=$(this).closest(".item").find(".price").text().trim();

        //OR another Alternate

        //var itemName=$(this).siblings(".postname").text().trim();
        //var itemPrice=$(this).siblings(".price").text().trim();
        alert(itemName + " / " + itemPrice);

    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp8v](http://codebins.com/bin/4ldqp8v)

您可以通过一一取消注释来检查所有替代方案。一切正常。

# c++ - 模板声明错误

> ID：11792311
> 
> 赞同：0
> 
> 时间：2012-08-03T08:44:57.897
> 
> 标签：c++

对于下面的代码，我收到“错误：无法声明指向 'void' 成员的指针”。

```
 template  <class T>
    DtRequestId Notify(T* pObject, void (T::*callback)(Status*)); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:51:01.297

编译此（整个文件）时出现此错误：

```
typedef int DtRequestId;
template  <class T>
    DtRequestId Notify(T* pObject, void (T::*callback)(Status*)); 
```

但如果我也定义`Status`了，错误就会消失：

```
typedef int DtRequestId;
typedef int Status;
template  <class T>
    DtRequestId Notify(T* pObject, void (T::*callback)(Status*)); 
```

所以也许你忘了给`Status`.

# ruby-on-rails - ActiveResource：指定重试？

> ID：11792317
> 
> 赞同：3
> 
> 时间：2012-08-03T08:45:11.920
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, activeresource

我将 ActiveResource 用于长时间运行的导入和同步作业。有没有办法为失败的请求指定重试？我想避免围绕每个 ActiveResource 请求进行丑陋的开始/救援/重试构造。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:05:18.740

这取决于逻辑/编码失败。如果出现编码失败，那么您只需要使用救援来捕获异常；）

如果逻辑失败，那么您可以推送到失败堆栈并在之后重新处理相同的内容。

# php - PHP Readdir 不按字母顺序阅读

> ID：11792320
> 
> 赞同：0
> 
> 时间：2012-08-03T08:45:27.743
> 
> 标签：php, arrays, html, dir

> **可能重复：**
> [PHP readdir() 未按字母顺序返回文件](https://stackoverflow.com/questions/541510/php-readdir-not-returning-files-in-alphabetical-order)

上传到托管服务器时，Readdir 似乎不会按字母顺序读取文件。我有点按特定顺序命名我的文件，所以我真的需要这个功能。

这是我的代码：

```
if (is_dir($dir)) {

            if ($dh = opendir($dir)) {  

                while (($file = readdir($dh)) !== false) {

                    $ext = pathinfo($dir.$file,PATHINFO_EXTENSION);

                    if ($ext == 'jpg' || $ext == 'png') {

                        $dataArr = split('\.',$file);

                        $file = $dataArr[0];

                        ?>
                        <li>
                          <a href="/test/img/picture gallery/<?php echo $folder.'/'; ?><?php echo $file; ?>.jpg">
                            <img src="/test/img/picture gallery/<?php echo $folder.'/thumbs/t'; ?><?php echo $fileFirst; ?>.jpg" title="" class="image0">
                          </a>
                        </li>
                        <?php
                    }

                }  

                closedir($dh);  

            }  

        } 
```

关于如何使这成为可能的任何想法？谢谢！

编辑：

固定的。

我尝试将它们保存到一个数组中，并使用 PHP 的 sort() 函数很好地按字母顺序对其进行排序。文件系统似乎不按字母顺序读取文件。

# c++ - 基类中的 typedef 在继承类中是否可见而没有完全限定？

> ID：11792328
> 
> 赞同：2
> 
> 时间：2012-08-03T08:45:52.587
> 
> 标签：c++, templates, inheritance

**例子**

```
template <typename T>
struct A
{
    typedef A<T> super;
};

template <typename T>
struct B : A<T>
{
    B() : super() {} // <-- HERE
};

int main()
{
} 
```

使用 MSVC 编译器，它按原样编译。但是使用 gcc，我需要更改`super()`为`A<T>::super()`. 我假设 gcc 在这里是正确的，但是有人可以帮我理解这里的规则以及哪个编译器在技术上是正确的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T08:51:02.467

不，因为它是一个从属名称，因为它`A`是一个类模板。您需要完全限定它，或者使用快捷方式`B::super`。后者还将告诉编译器它是一个依赖名称，如果派生类也有很多模板参数，它会非常方便，因为它`B`会扩展为，`B<T, and, stuff>`因为它是*注入的类名称*。

由于不完整的两阶段查找，MSVC 在这里是错误的。基本上，使用 MSVC，所有的依赖检查和东西只发生在模板的实例化期间，而它应该在声明时检查。

# c# - 如何使用 FileHelpers 库从 csv 中仅读取一组字段？

> ID：11792329
> 
> 赞同：3
> 
> 时间：2012-08-03T08:46:05.700
> 
> 标签：c#, csv, filehelpers

我手上有一个应用程序，它使用 FileHelpers 库来处理 csv 文件。

过去，输入的 csv 文件总是具有相同的结构，一个记录有 5 个逗号分隔的字段，然后是一个新行来分隔记录。

然而，最近，我开始收到每行超过 5 条记录的 csv 文件，而且，显然，当前用于 csv 解析的类不适用于这些行。问题是，我仍然只需要前五个字段，它们仍然以相同的顺序提供。

有没有办法用 FileHelpers 读取前五个字段，并在换行之前忽略任何其他数据？

当前用于解析的类：

```
[IgnoreEmptyLines()]
[DelimitedRecord(";")]
public sealed class SemicolonsRow
{
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String LastName;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String Name;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String MidName;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String BirthDate;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String BirthPlace;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-26T15:11:14.080

使用 FileHelper 您可以将此变量添加为最后一个：

```
public string[] FunkyNewField; 
```

如果你定义了 FieldOrder 然后像这样添加它：

```
[FieldOrder(n)]
public string[] FunkyNewField; 
```

其中 n = 您最后指定的订单号之后的数字。

这将包含文件中您不想使用的所有额外列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:15:34.190

列数导致问题的事实表明您的设计是错误的。

我最近使用“ [A Fast CSV Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader) ”进行了一些 CSV 解析，效果非常好。您可以在一个简单的循环中索引列`for`，因此如果您只想要前 5 列，您可以执行以下操作：

```
CsvReader csv = new CsvReader(new StreamReader(fileName), true);

// Iterating LINES
while (csv.ReadNextRecord())
{
    // Iterating COLUMNS on current line
    for (int i = 0; i < 5; i++)
    {
        string value = csv[i];
        // do stuff with value
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T18:36:20.733

一个简单的解决方案是添加一些私有虚拟字段（作为可选项）来获取值

```
[IgnoreEmptyLines()]
[DelimitedRecord(";")]
public sealed class SemicolonsRow
{
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String LastName;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String Name;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String MidName;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    public String BirthDate;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    private String DummyField1;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    private String DummyField2;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    private String DummyField3;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    private String DummyField4;

    [FieldOptional()]
    [FieldQuoted('"', QuoteMode.OptionalForRead, MultilineMode.AllowForRead)]
    private String DummyField5;
} 
```

# php - php日期转换为秒

> ID：11792343
> 
> 赞同：0
> 
> 时间：2012-08-03T08:46:54.457
> 
> 标签：php

我以这种形式将帖子的日期存储在 mysql 数据库中 y/m/d 我想检查帖子是否超过 3 天。有什么办法可以将其转换为秒吗？然后像这样检查：

```
if($mysql_date > $three_days_old){
echo "old post";
}else {
echo "new post";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:52:09.130

试试[strtotime](http://php.net/manual/en/function.strtotime.php)，它可以解析各种[时间字符串格式](http://php.net/manual/en/datetime.formats.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:54:37.270

混合使用`date()`和`strtotime()`：

```
$myDate = date('Y-m-d', strtotime($mysql_date));
$oldDate = date('Y-m-d', strtotime('3 days ago'));

if ($myDate > $oldDate) {
     echo "old post";
} else {
     echo "new post";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T12:03:09.623

您可以执行以下操作：

```
$d1 = strtotime(date('Y-m-d', strtotime($mysql_date)));
$d3 = mktime(0, 0, 0, date('m', $d1), date('d', $d1)-3,  date('Y', $d1));

$d2 = strtotime(date('Y-m-d', strtotime('3 days ago')));

if ($d3 > $d2) {
  echo 'old post';
}else {
  echo 'new post';
} 
```

# c# - 基于我刚刚完成的 SQL 教程。返回主键

> ID：11792344
> 
> 赞同：0
> 
> 时间：2012-08-03T08:46:54.917
> 
> 标签：c#, .net, sql

我一直在[使用本教程](http://www.homeandlearn.co.uk/csharp/csharp_s12p1.html)使用 C# 自学 SQL Server Express。这几乎是我对数据库的全部了解，因此当我搜索示例或信息以构建此项目时，我似乎无法使其符合本教程的最终结果。

例如，在教程的最后，作者为数据表创建了一个主键。我希望能够返回最后添加的密钥。我发现您需要使用 select last_insert_id() 函数来执行此操作，但具体是如何完成的呢？我读过一些关于查询和过程的东西，但我不知道如何使用它们。

谁能向我解释这是如何完成的？非常感谢为教程中的示例代码获取最后创建的主键的示例。

谢谢！

编辑：操作，我提到 SELECT SCOPE_IDENTITY()，而不是选择 last_insert_id()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:52:21.157

您可以将该[`Scope_Identity`](http://msdn.microsoft.com/en-us/library/ms190315.aspx)函数与`ExecuteScalar`命令中的方法一起使用：

```
using (var conn = new SqlConnection("Server=.\SQLExpress;AttachDbFilename=|DataDirectory|Northwind.mdf;Database=Northwind;Trusted_Connection=Yes;"))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText = 
    @"
        INSERT INTO Categories (CategoryName) Values (@CategoryName); 
        SELECT Scope_Identity()
    ";
    cmd.Parameters.AddWithValue("@CategoryName", "some category");
    int lastId = (int)cmd.ExecuteScalar();
} 
```

# php - 正则表达式后面的字符串

> ID：11792348
> 
> 赞同：0
> 
> 时间：2012-08-03T08:47:10.793
> 
> 标签：php, regex

我有一个正则表达式

```
$pattern = '/\b\d{4}-\d{4}\b/';
preg_match($pattern, $text, $matches); 
```

我需要在那个正则表达式之后得到 5 个单词。任何想法我将如何做到这一点？

例如“Power Slot Slotted Rotors - 1997-1998 Oldsmobile Regency - Brakes & Brake Pads - Brake Rotors”。

我需要返回“1997-1998 Oldsmobile Regency - Brakes &”;

有任何想法吗？

**// 从底部评论更新。**

一个字符串中可能有多个匹配项。例如

“例如：”2000-2009 年福特探险者，2000-2010 年福特游侠。1674SJT JBA Cat4ward 接头特性"

我仍在尝试在数字序列 xxxx-xxxx 之后获得第一个 5 个“非空格”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:50:26.650

```
/\b\d{4}-\d{4}( [^ ]*){5}\b/ 
```

获取一个空格，后跟除空格（即单词）之外的任何内容。并做 5 次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:17:08.047

按照您的编辑，试试这个：

```
/\b\d{4}-\d{4}(?:\s(?!\d{4}-\d{4})\S+){1,5}\b/ 
```

[看到它工作](http://viper-7.com/oFFmrJ)

感谢@Ariel 提供了基于此的正则表达式，在通过编辑指定其他要求之前，这是正确的。如果你喜欢这个，也去投票这个答案;-)

# c# - UDP有时收不到任何东西

> ID：11792351
> 
> 赞同：4
> 
> 时间：2012-08-03T08:47:34.020
> 
> 标签：c#, sockets, udp

我有一个从远程主机接收 UDP 数据的 C# 应用程序。我发现有时我的套接字什么也没收到，而且我似乎找不到任何关于为什么的线索！Wireshark 告诉我我的数据正在从远程设备正确发送。我似乎不明白为什么有时我能收到罚款，有时却不能。

我没有得到任何例外，但 OnRecieve 永远不会被调用

这是我的代码以防万一：

```
class cUdpRx
{
    private Thread rxThread = null;
    private Socket UdpSocket;
    private IPEndPoint localEp;
    byte[] byData;
    //rxbytes event
    public delegate void OnRxBytesEventHandler(byte[] rxBuf);
    public event OnRxBytesEventHandler OnRxBytesEvent;

    /// <summary>
    /// Creates the udp socket
    /// </summary>
    /// <param name="Port"></param>
    /// <returns></returns>
    public bool CreateSocket(int Port)
    {
        try
        {
            byData = new byte[1500]; //create our buffer
            UdpSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
            UdpSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
            localEp = new IPEndPoint(IPAddress.Any,Port);
            UdpSocket.Bind(localEp);
            UdpSocket.BeginReceive(byData,0,byData.Length, SocketFlags.None, new AsyncCallback(OnRecieve), UdpSocket);

            return true;    //seemed to work ok
        }
        catch
        {
            Dispose();
            return false;   //something went wrong, abort
        }
    }

    private void OnRecieve(IAsyncResult iar)
    {
        byte[] rxData;
        int nBytesRec = 0;
        Socket socket = (Socket)iar.AsyncState;
        try //in case something else has already disposed of the socket
        {
            nBytesRec = socket.EndReceive(iar);
        }
        catch
        {
            Debug.WriteLine("cant access udp rx socket");
        }
        try
        {
            if (nBytesRec > 0)
            {
                rxData = new byte[nBytesRec];
                Array.Copy(byData, rxData, nBytesRec); //copy exact data into new array
                OnRxBytesEvent(rxData);
            }
            if(!killThreads)
                UdpSocket.BeginReceive(byData, 0, byData.Length, SocketFlags.None, new AsyncCallback(OnRecieve), UdpSocket);
        }
        catch(SocketException se)
        {
            Debug.WriteLine(se.ToString());
        }
    } 
```

任何帮助都将不胜感激，因为它阻止了我继续我的项目。谢谢

**更新** 似乎使用 IPAdress.any 是问题所在。如果我改变：

```
localEp = new IPEndPoint(IPAddress.Any,Port); 
```

至

```
localEp = new IPEndPoint(IPAddress.Parse("192.168.0.33"),Port); 
```

其中 192.168.0.33 是我电脑的 IP 地址，它每次都会接收数据。谁能解释为什么？使用 IPAddress.any 并从无线和有线连接接收是非常有用的。IPAddress.any 相当于 0.0.0.0 并且根据 MSDN，它应该在所有网络接口上接收。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:21:48.527

此类问题的常见原因是处理数据包的速度不够快。它们填满了套接字接收缓冲区，内核开始丢弃它们。

增加套接字[接收缓冲区大小](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivebuffersize.aspx)以适应流量突发。从快速套接字读取路径中删除所有不必要的内容。考虑下面的简单迭代方法，而不是针对线程池工作：

```
rxData = new byte[nBytesRec];

while ( !time_to_stop ) {
    int len = socket.Receive( rxData );
    OnRxBytesEvent( rxData, len );
} 
```

您的代码注释提到了多播。请注意，您需要为此添加显式[组成员身份](http://msdn.microsoft.com/en-us/library/system.net.sockets.multicastoption)，以及您在接口上加入多播组的事实（显式或通过路由表决定），因此如果您想在两个接口上侦听多播数据，则需要两个插座。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-05T03:32:57.787

我刚刚遇到了同样的问题，并通过将 timeTolive 设置为大数据来解决它。

```
_client = new UdpClient();
_client.Client.Bind(new IPEndPoint(IPAddress.Any, targetURI.Port));
_client.JoinMulticastGroup(IPAddress.Parse(targetURI.Host) , 250); 
```

*   timeToLive = 250，它有效。
*   timeToLive = 50 ，工作或不工作交替发生。
*   timeToLive = none 或 0，不起作用。

# vba - Excel ActiveX ComboBox onClick 事件

> ID：11792352
> 
> 赞同：2
> 
> 时间：2012-08-03T08:48:00.453
> 
> 标签：vba, excel, excel-2007, activexobject

我正在尝试在 excel 中使用 ActiveX ComboBox。一切正常，可以从下拉按钮中填充`click_event`。但是当它设置点击事件时，我发现它甚至被像箭头键这样的击键触发。这是正常行为吗？如果是，我该如何绕过？

我正在使用 Excel 2007 VBA

这是我用来允许使用键在组合框中导航的方法，我会等着看是否有更好的解决方案..：lastkey 是一个公共变量

```
Private Sub ComboBox1_KeyDown(ByVal KeyCode As _
MSForms.ReturnInteger, ByVal Shift As Integer)
    If KeyCode = 38 Then
        If ComboBox1.ListIndex <> 0 Then
            lastkey = KeyCode
            ComboBox1.ListIndex = ComboBox1.ListIndex - 1
            KeyCode = 0
        End If
    ElseIf KeyCode = 40 Then
        If ComboBox1.ListIndex <> ComboBox1.ListCount - 1 Then
            lastkey = KeyCode
            ComboBox1.ListIndex = ComboBox1.ListIndex + 1
            KeyCode = 0
        End If
    End If
End Sub

Private Sub ComboBox1_Click()
    If lastkey = 38 Or lastkey = 40 Then
        Exit Sub
    Else
        MsgBox "click"
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:29:08.750

是的，这是正常行为。使用箭头键导航组合中的项目，因此会触发 click 事件。

要绕过该插入此代码。这会捕获所有 4 个箭头键，并且在按下时什么也不做。此方法的唯一缺点是您将无法再使用箭头键进行导航。

```
Private Sub ComboBox1_KeyDown(ByVal KeyCode As _
MSForms.ReturnInteger, ByVal Shift As Integer)
    Select Case KeyCode
    Case 37 To 40: KeyCode = 0
    End Select
End Sub 
```

**跟进**

```
Dim ArKeysPressed As Boolean

Private Sub ComboBox1_Click()
    If ArKeysPressed = False Then
        MsgBox "Arrow key was not pressed"
        '~~> Rest of Code
    Else
        ArKeysPressed = False
    End If
End Sub

Private Sub ComboBox1_KeyDown(ByVal KeyCode As _
MSForms.ReturnInteger, ByVal Shift As Integer)
    Select Case KeyCode
    Case 37 To 40: ArKeysPressed = True
    End Select
End Sub 
```

# sql - SQL Server 代理启动和停止脚本，可由普通用户而非系统管理员运行

> ID：11792353
> 
> 赞同：0
> 
> 时间：2012-08-03T08:48:00.327
> 
> 标签：sql, sql-server

我在 SQL Server 代理中创建了几个工作。现在我需要在客户端机器上部署这些作业。客户端 SQL Server 没有系统管理员登录。

我想要做的是让普通 SQL 登录（不是系统管理员）用户运行启动和停止 SQL 代理服务脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:55:03.743

您可以使用[`execute as owner`](http://msdn.microsoft.com/en-us/library/ms188354.aspx). 该过程将以系统管理员身份运行，并且可以使用[`sp_start_job`](http://msdn.microsoft.com/en-us/library/ms186757.aspx).

然后，您可以授予普通用户`execute`对存储过程的权限。这将允许他们开始/停止工作。

# .net - 服务器上的语音识别引擎。Sphinx VS .Net 语音识别

> ID：11792354
> 
> 赞同：1
> 
> 时间：2012-08-03T08:48:08.757
> 
> 标签：.net, voice-recognition, cmusphinx

我是一名`.Net(Asp.Net)`开发人员，我迫切需要`speech recognition`在我搜索语音识别引擎的一个网站中使用，
到目前为止，我遇到了专业 2

```
1\. Sphinx 
```

`2\. .Net Voice recognition`
但问题是，无论何时我读到这两个平台中的任何一个，
我都发现.Net 的替代方案需要在连续听写之前进行培训，而我倾向于更喜欢这个平台，因为我已经是.Net 开发人员了。
我在哪里可以找到两者之间的比较。
我不介意在 .Net 中为 sphinx 开发一个包装器，或者使用其中一个已经可用的包装器，
**但值得吗？
存在比较的链接？
或者可能使用过这两个框架的人？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:48:18.423

没有什么可比的，CMUSphinx 是一个开源灵活的框架，它可以让您开发复杂的语音到文本应用程序，资源较少且无需互联网连接。它有几个 C# 包装器，作为一个 C 库，它可以用任何语言包装。

如果您正在寻找可以根据应用需求实际修改和调整的解决方案，CMUSphinx 是唯一的选择。

# layout - extj4 网格不适合容器面板

> ID：11792357
> 
> 赞同：0
> 
> 时间：2012-08-03T08:48:11.640
> 
> 标签：layout, extjs, grid, extjs4

我有一个包含数据的网格，包含在一个面板中，该面板还包含一个标题和一个较小的摘要网格。该面板具有适合的布局，因此标题和第一个网格（即摘要网格）显示得很好。但是有问题的网格的记录比屏幕上显示的要多，并且它的组件高度没有调整到面板的大小，面板的大小总是适合浏览器窗口的高度。

我想要的是网格组件的高度，就像面板一样，被调整到它的父级，这样网格体内的滚动条就会显示出来。

我的代码与此类似（initComponent 是 Ext.panel.Panel 的扩展）：（此代码中的标题表示摘要网格）

```
initComponent: function (config) {
    var config = {
        border: false,
        hidden: false,
        hideMode: "display",
        padding: '5',
        layout: "fit"
    }

    Ext.apply(this, Ext.apply(this.initialConfig, config));
    this.callParent(arguments);

    title = Ext.create("Ext.panel.Panel", {
        html: '<h2>title</h2>',
        padding: '5',
        border: false
    });

// the stores for the grids are created here
    var storeHdr = DataStoreFactory.CreateStore("GetHeaderP", DataStoreFactory.fieldsCollection.Default);
    var storeBdy = DataStoreFactory.CreateStore("GetBodyP", DataStoreFactory.fieldsCollection.Default);

    var grdHeader = Ext.create("Ext.grid.Panel", {
        store: storeHdr,
        columns: getHeaderColumns(), 
        columnLines: true,
        autoHeight: false,
        autoWidth: false,
        enableHdMenu: false,
        enableColumnMove: false,
        enableColumnResize: false,
        disableSelection: true,
        trackMouseOver: false,
        sortable: false
    });

    var grdBody = Ext.create("Ext.grid.Panel", {
        id: id,
        store: storeBdy,
        columns: getBodyColumns(), 
        columnLines: true,
        autoHeight: false,
        autoWidth: false,
        autoScroll: true,
        scroll: "vertical",
        enableColumnMove: false,
        enableColumnResize: false,
        enableHdMenu: false,
        trackMouseOver: false,
        disableSelection: true
    });
},

    var headerGridContainer = Ext.create("Ext.panel.Panel", {
        layout: "fit",
        border: false,
        items: [grdHeader]
    });
    var bodyGridContainer = Ext.create("Ext.panel.Panel", {
        layout: "fit",
        border: false,
        items: [grdBody]
    });

    this.add(title);
    this.add(headerGridContainer);
    this.add(bodyGridContainer);
    storeHdr.load();
    storeBdy.load();
    this.doLayout();
} 
```

我希望有人可以帮助我。提前致谢

编辑 - 截图它是如何以及它应该如何。实时数据被删除或抹去，因为它是私有的并且与问题无关。

![怎么样](../Images/552145a8ecf9e4d0b2557710484e7123.png) 就是这样

![应该如何](../Images/68384e3e98bd78fd266b9e2647c42b99.png) 这是应该的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:41:52.647

您以错误的方式使用布局。首先，您的主容器具有布局“适合”，当您在里面有单个项目时应该使用它 - [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.layout.container .Fit](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.layout.container.Fit) - 你的物品很少。

其次，尽量避免过度嵌套。您将网格包装成面板，然后将这些面板放入容器中。这有什么原因吗？

请张贴您拥有的和想要拥有的屏幕截图，我们将帮助您确定为此需要使用的布局。

**更新：**

尝试`layout: 'hbox'`在您的主容器中使用。如果您希望它填充屏幕的其余部分，请指定`flex: 1`主（底部）网格。儿子基本上你会有类似的东西（在你的主容器中）：

```
{
   layout: 'hbox',
   ..
   items: [{
      xtype: 'panel', // header
      height: 100, 
   },
   {
      xtype: 'grid', // first grid
      height: 200
   },
   {
      xtype: 'grid', // second grid
      flex: 1
   }]
} 
```

# bamboo - 三叶草和竹子清除旧版本

> ID：11792359
> 
> 赞同：0
> 
> 时间：2012-08-03T08:48:22.507
> 
> 标签：bamboo, clover

有谁知道我如何配置竹子来清除它的旧版本。我正在运行三叶草，而我的服务器空间刚刚用完。我发现对于每个构建，三叶草目录大约是 100 MB。它充满了所有代码覆盖率报告。最好有最后 10 个 clover 报告，但我不需要所有这些。我可以让 Bamboo 清除它的旧版本吗？

由于它没有清除竹数据目录，因此每次构建时都会变得越来越大。（每天发生很多次）

在我的机器上，这个目录包含大量的构建文件。/usr/local/bamboo-data/artifacts/PROJECT_NAME/JOB1/build....

我可以创建一个在 cron 下运行的脚本来执行删除，但这似乎应该是常见问题，所以我想要一个 Atlassian 基础解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:13:46.440

我想我已经想通了。在构建配置中有一个 Build Expiry 选项。根据 Atlassian 文档，我可以启用它来删除旧工件和测试结果。我已经在我的构建中设置了它，并且会看到运行时会发生什么。

# xml - XSLT 模板匹配不起作用

> ID：11792360
> 
> 赞同：0
> 
> 时间：2012-08-03T08:48:22.403
> 
> 标签：xml, xslt

我的 MySQL 数据库中有一个表的 XML 文件，该文件是使用 WebRowSet 创建的。

XML 看起来像这样：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="Status.xslt" ?>
<webRowSet xmlns="http://java.sun.com/xml/ns/jdbc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/jdbc http://java.sun.com/xml/ns/jdbc/webrowset.xsd">
  <properties>
     ....
  </properties>
  <metadata>
     ....
  </metadata>
  <data>
    <currentRow>
      <columnValue>...</columnValue>
    </currentRow>
    ...
  </data>
</webRowSet> 
```

（这是架构：http: [//java.sun.com/xml/ns/jdbc/webrowset.xsd](http://java.sun.com/xml/ns/jdbc/webrowset.xsd)）

我的目标是使用 XSLT 使 XML 更具可读性，这就是我目前所拥有的：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
    <html><head></head><body>

        <xsl:apply-templates />

    </body></html>
</xsl:template>

<xsl:template match="columnValue">
    <p style="color:red">
        <xsl:value-of select="." />
    </p>
</xsl:template>

</xsl:stylesheet> 
```

当我在 Firefox 中打开 .XML 时，它只会打印所有值 - 我希望 columnValues 是红色的。当我将 TEST 放入 columnValue 模板时，它也没有显示出来。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:55:31.623

在源 XML 中，`columnValue`位于命名空间中：`http://java.sun.com/xml/ns/jdbc`

您尚未在 XSLT 中声明此名称空间。试试这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:j="http://java.sun.com/xml/ns/jdbc">

...

<xsl:template match="j:columnValue">
.... 
```

# c# - WinRT后台网络调试

> ID：11792361
> 
> 赞同：1
> 
> 时间：2012-08-03T08:48:34.253
> 
> 标签：c#, debugging, sockets, background, windows-runtime

我制作了一个项目，而不是使用 tcp 套接字连接（自己的封闭协议），添加了与网络触发 API 的后台连接，如此[处](http://www.microsoft.com/en-us/download/details.aspx?id=28999)所述（从第 17 页开始） - StreamSocket 控制通道注册块和 IBackgroundTask 类，每个都应该触发时间套接字接收一些东西。

已尝试一切在后台任务中调试代码，但没有用：

*   用手势关闭可见的应用程序
*   锁定屏幕
*   试图加载其他一些繁重的应用程序，让 Windows 暂停我的应用程序

所有这些都没有帮助我在套接字消息期间使后台任务运行（和调试）。我究竟做错了什么？我是否必须获得单独的可暂停设备（如 WinRT 平板电脑）才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:30:29.643

默认情况下，引用的项目不会添加到主项目中。这并不像看起来那么明显，这就是为什么我花了将近一周的时间来找出这个。~~所以线索是：**检查参考项目可访问性**。~~

更新：

正如我在开发过程中发现的那样，还有更多的事情需要处理。其中一些并不像他们需要的那样清楚。这是我所做的列表：

1.  将后台项目添加到主项目的引用中（右键单击解决方案浏览器中的引用节点）。
2.  检查主项目清单是否包含正确的声明（带控制通道的后台任务，带有完整包的正确后台入口点名称，$targetnametoken$.exe 作为可执行文件）
3.  从 #1 引出的一件事：您计划在后台使用的所有实体都应该放在解决方案中的单独项目中。然后这个项目被主项目和后台项目引用。
4.  请注意在注册 ControlChannelTrigger 之前要调用 BackgroundExecutionManager.RequestAccessAsync()
5.  我在示例项目的一个小评论中发现了一件关键的事情：

```
 // IMPORTANT: When using winRT based transports such as StreamWebSocket with the ControlChannelTrigger, 
            // we have to use the raw async pattern for handling reads instead of the await model.  
            // Using the raw async pattern allows Windows to synchronize the PushNotification task's  
            // IBackgroundTask::Run method with the return of the receive  completion callback.  
            // The Run method is invoked after the completion callback returns. This ensures that the app has 
            // received the data/errors before the Run method is invoked. 
            // It is important to note that the app has to post another read before it returns control from the completion callback. 
            // It is also important to note that the DataReader is not directly used with the  
            // StreamWebSocket transport since that breaks the synchronization described above. 
            // It is not supported to use DataReader's LoadAsync method directly on top of the transport. Instead, 
            // the IBuffer returned by the transport's  ReadAsync method can be later passed to DataReader::FromBuffer() 
            // for further processing. 
```

更多信息在这里 - [http://code.msdn.microsoft.com/windowsapps/ControlChannelTrigger-91f6bed8/sourcecode?fileId=57961&pathId=2085431229](http://code.msdn.microsoft.com/windowsapps/ControlChannelTrigger-91f6bed8/sourcecode?fileId=57961&pathId=2085431229)

如果你做的一切都正确，后台任务的调试就很简单了。只需设置断点并继续，不要管主项目正在运行或暂停。

**ps** - 如果项目被挂起，请注意调用 UI 线程（尤其是等待的东西） - 它们在应用程序运行之前不会运行，并且会等待。

# android - PhoneGap / Apache Cordova 是否提出加密 SQLite 数据库的 API

> ID：11792365
> 
> 赞同：7
> 
> 时间：2012-08-03T08:48:47.700
> 
> 标签：android, ios, sqlite, cordova

我想知道在使用 PhoneGap/Apache Cordova 创建/访问和加密的 SQLite 数据库时是否有可能。

我读到我可以在存储/解密之前加密，但这不是我想要的。

我宁愿寻找一个 PhoneGap 插件或 API 使用类似的东西：

*   [http://sqlite-crypt.com/](http://sqlite-crypt.com/)

寻找这样但加密的东西：

*   [https://github.com/davibe/Phonegap-SQLitePlugin](https://github.com/davibe/Phonegap-SQLitePlugin)

谢谢

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T10:09:41.150

只是为了清除它：无论您选择哪种方法，您都一直在进行加密之前和之后的解密。

如果您要使用 Apache Cordova 来标记 Android，那么更好的选择是使用 javax.crypto,* API 在 Javascript/Java 中开发一个插件。

Java中加解密本机算法的一个例子：

*   [http://cs.saddleback.edu/rwatkins/CS4B/Crypto/FileEncryptor.html](http://cs.saddleback.edu/rwatkins/CS4B/Crypto/FileEncryptor.html)

以及为面向 Android 的 Apache Cordova 制作插件的教程：

*   [http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)

适用于 iOS 的加密原生库：

*   [https://chiselapp.com/user/thebeing/repository/GS-CommonCrypto/home](https://chiselapp.com/user/thebeing/repository/GS-CommonCrypto/home)

针对 iOS 的 Apache Cordova 插件方法：

*   [http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html)

希望能帮助到你

# php - 在具有许多图像的typo3站点中读取数据超时

> ID：11792368
> 
> 赞同：0
> 
> 时间：2012-08-03T08:48:56.827
> 
> 标签：php, typo3, graphicsmagick

在typo3 网站上包含许多图像的页面需要大量时间进行图像处理以使用graphicsmagic 缩放图像。用户收到错误：`500 Internal Server error.`

error_log 是这样说的：

> mod_fcgid：45秒内读取数据超时

如果我在一段时间后多次重新加载页面，所有图像都会生成并缓存，它可以工作。

我的问题是：

1.  我可以强制typo3生成所有图像而不重新加载页面吗
2.  不能typo3显示更好的错误页面
3.  有没有其他解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:34:36.293

错误消息已经告诉您原因：TYPO3 需要更多时间，但是您的 Web 服务器超时 45 秒并停止等待 PHP 进程。

因此，创建错误页面的不是 TYPO3，而是您的 Web 服务器软件（Apache？nginx？）

增加超时时间，在使用 Apache 时应该会受到[FcgidIOTimeout的影响。](http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html#fcgidiotimeout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:16:41.840

这听起来很愚蠢，但真正的问题是服务器的性能。我订购了一个新的/更好的并在大多数情况下解决了这个问题。

# oracle - 无法从远程数据库中选择图像

> ID：11792372
> 
> 赞同：0
> 
> 时间：2012-08-03T08:49:26.383
> 
> 标签：oracle, oracle10g

我正在通过 访问远程数据库`DBLINK`，但是当尝试触发选择查询以获取存储在 BLOB 数据类型中的图像时，它给了我以下错误：

```
ORA-22992: 无法使用从远程表中选择的 LOB 定位器

```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:52:13.710

您没有提供您要执行的语句，但我猜您正在尝试做一些在 Oracle 10g 中根本不可能的事情。

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#sthref161](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#sthref161)上的文档状态：

> Oracle 数据库对远程 LOB 的支持有限。以三种方式支持远程 LOB。
> 
> 1.  创建表作为选择或插入作为选择。
>     
>     
> 2.  远程 LOB 上的函数返回标量。支持具有 LOB 参数并返回标量数据类型的 SQL 和 PL/SQL 函数。不支持将其他 SQL 函数和 DBMS_LOB API 用于远程 LOB 列。
>     
>     
> 3.  远程 LOB 的数据接口。您可以将字符或二进制缓冲区插入到远程 CLOB 或 BLOB，并选择远程 CLOB 或 BLOB 到字符或二进制缓冲区。
>     
>     
> 
> 这些是唯一受支持的涉及远程表中的 LOB 的语法。不支持其他用法。

有关扩展示例，请参阅[链接](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements001.htm#sthref161)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:20:30.350

要访问类型`BLOB`的数据，请使用`PIC`数据类型。像这样构建您的查询：

```
*select(
  **select PIC from  AGENT_SIGNATURES_TB@DBLINK**
)  as PIC
from dual* 
```

至少这在 Oracle 数据库上对我有用。

# css - 如何在点击时播放 Edge 动画？

> ID：11792373
> 
> 赞同：1
> 
> 时间：2012-08-03T08:49:39.747
> 
> 标签：css, onclick, html5-animation, adobe-edge

我想要一个 Adob​​e Edge 动画，它在访问者单击普通 HTML 表单按钮后播放。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:57:12.200

```
ball_edge.js

remove:
$(window).load(function() {
$.Edge.play();
});

The HTML file

Add immediately before </HTML>:
<script>
$("#RoundRect1").click(function () {
$.Edge.play();
});
</script> 
```

# c# - XAML：引擎盖下

> ID：11792376
> 
> 赞同：3
> 
> 时间：2012-08-03T08:50:00.953
> 
> 标签：c#, wpf, xaml

好吧，我必须承认，有时 XAML 对我来说似乎有点神秘。问题是，我总是喜欢通过 C# 代码进行调试（在其中设置很多断点）来了解“正在发生什么”和“它是如何发生的”。但是对于声明性 XAML 语法，这不是一个选项。我想你会同意使用 XAML，或者更准确地说，使用/理解一些现有的 XAML 代码，你必须“已经知道”XAML 声明是如何工作的。您无法知道/学习调查应用程序代码执行的事情。因此，我非常有兴趣从内到外地查看 XAML，尽可能详细。我不是在谈论“学习”XAML，我知道基本的东西。也许我可以提供一些例子来澄清我的事情

*   与 C# 代码相比，当我们在 XMAL 中使用对象时如何实例化它们？它们是否存储在托管堆中？与 C# 代码实例化对象的方式相同吗？
*   使用标记扩展语法进行数据/命令绑定时如何设置属性？
*   当 INotifyPropertyChanged 类型的任何属性被更新时，XAML 语法中的 Binding 实例如何更新自身？它究竟是如何在第一时间得到通知的，以及由谁通知？
*   通过定义 Typed DataTemplate，可以在运行时将视图模型设置为视图的 DataContext，例如 - 它实际上是如何发生的？除了在逻辑树上向上搜索 DataContext 属性之外，设置 DataContext 的规则是什么？
    `<DataTemplate DataType="{x:Type viewmodels:AccountsViewModel}">
    <views:Accounts/>
    </DataTemplate>`

*   在运行时如何处理/解决整个模板内容（DataTemplate、ControlTemplate 和 ItemsPanelTemplate）。
*   等等等等等等

因此，如果您在 XAML 方面表现出色/经验丰富/专家，您会建议（链接、文章、博客文章、书籍等）作为参考，以帮助更清楚和更深入地了解 XAML 如何“在幕后”工作？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T10:32:39.330

大多数可以通过不将 XAML 视为一种真正的编程语言来解释，更像是一种声明性语言。你在 xaml 中所做的一切，也可以在 C# 中进行，事实上这就是正在发生的事情。

> 与 C# 代码相比，当我们在 XMAL 中使用对象时如何实例化它们？它们是否存储在托管堆中？与 C# 代码实例化对象的方式相同吗？

是的，因为它们只是 c# 对象。大多数资源都存储在休眠状态，我记得某处膨胀这个词。转换器或其他“直接”c# 对象在需要时创建。这里重要的是这些资源通常是共享的，因此它们只会被创建一次。

> 使用标记扩展语法进行数据/命令绑定时如何设置属性？

这又取决于您在何处使用标记扩展。在一个风格？在模板中？在像窗口这样的实例化用户控件中？通常在您真正需要它们时对它们进行评估。当膨胀的样式存储在实际的资源字典中时，评估它们是没有意义的。当您实际在对象上使用样式时，它们会被评估。

> 当 INotifyPropertyChanged 类型的任何属性被更新时，XAML 语法中的 Binding 实例如何更新自身？它究竟是如何在第一时间得到通知的，以及由谁通知？

通过绑定引擎。WPF 检查您的 DataContext 是否继承了 INotifyPropertyChanged 接口，附加到该接口提供的事件并侦听任何更改。如果引发这样的事件，绑定引擎将再次调用 getter。

> 它实际上是如何发生的？除了在逻辑树上向上搜索 DataContext 属性之外，设置 DataContext 的规则是什么？

简而言之：没有其他。Datacontext 只是一个继承的附加属性。如果您不在子控件上重新设置它，它将采用父控件的值，直到它到达根。唯一的例外是`ContentControls`，`ContentPresenter`它们不会继承 DataContext，而是会根据内容更改它们。因此，这些控件始终默认将 Content 作为其 DataContext。

> 在运行时如何处理/解决整个模板内容（DataTemplate、ControlTemplate 和 ItemsPanelTemplate）。

简单地说：每当 WPF 找到一个非 ui 对象时，它都会尝试为给定类型找到一个 DataTemplate。例如，在 ItemsControl 中：您可以绑定`MyClass`; 除非您提供显式 DataTemplate 或 DataTemplateSelector，否则它将向上搜索资源树以查找隐式样式。再次记住，这已经不会在 XAML 中发生，而是在从 xaml 生成的 C# 对象上发生。

> 是否可以通过 XAML 代码进行调试（目前或不久的将来）？

您认为如何调试未执行但在编译时评估的内容？

请不要认为这是 100% 正确的。多年来，这是我收集的有关 XAML 和使用的信息。如果您有任何更正或发现明显错误的地方。请告诉我，我们都在这里学习，我总是学习关于我使用的东西的新东西:)

# unit-testing - 部分模拟或新课程或其他什么？

> ID：11792378
> 
> 赞同：0
> 
> 时间：2012-08-03T08:50:13.397
> 
> 标签：unit-testing, testing, mocking

我有一个关于测试的问题。

我有一个返回异常的类。在这个类中，我有两种不同的方法，它们只返回两种不同类型的异常，一种返回所有异常（两种类型的）

这是示例代码：

```
 public interface IAnomalyService
{
    IList<Anomaly> GetAllAnomalies(object parameter1, object parameter2);
    IList<Anomaly> GetAnomalies_OfTypeA(object parameter1);
    IList<Anomaly> GetAnomalies_OfTypeB(object parameter2);
}
public class AnomalyService : IAnomalyService
{
    public IList<Anomaly> GetAllAnomalies(object parameter1, object parameter2)
    {
        var lstAll = new List<Anomaly>();
        lstAll.AddRange(GetAnomalies_OfTypeA(parameter1));
        lstAll.AddRange(GetAnomalies_OfTypeB(parameter2));
        return lstAll;
    }
    public IList<Anomaly> GetAnomalies_OfTypeA(object parameter1)
    {
        //some elaborations
        return new List<Anomaly> { new Anomaly { Id = 1 } };
    }
    public IList<Anomaly> GetAnomalies_OfTypeB(object parameter2)
    {
        //some elaborations
        return new List<Anomaly> { new Anomaly { Id = 2 } };
    }
}

class Anomaly
{
    public int Id { get; set; }
} 
```

我已经为检索 A 型和 B 型异常的两种方法（GetAnomalies_OfTypeA 和 GetAnomalies_OfTypeB）创建了测试。现在我想测试函数 GetAllAnomalies 但我不确定我必须做什么。

我认为我必须对其进行测试：1）将 AnomalyService 类中的 GetAnomalies_OfTypeA 和 GetAnomalies_OfTypeB 声明为虚拟，模拟 AnomalyService 类，并使用 Moq 将 CallBase 设置为 true 并模拟两种方法 GetAnomalies_OfTypeA 和 GetAnomalies_OfTypeB。

2）在另一个名为 AllAnomalyService 的类（带有接口 IAllAnomalyService）中移动方法 GetAllAnomalies，在其构造函数中，我将传递一个 IAnomalyService 接口，然后我可以测试 GetAllAnomalies 模拟 IAnomalyService 接口。

我是单元测试的新手，所以我不知道哪种解决方案更好，是其中一个还是另一个。你能帮助我吗？

谢谢卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:28:21.753

当一个类拒绝测试时，模拟是一个很好的工具。如果您有源代码，则通常不需要模拟。试试这个方法：

*   创建一个可以返回`AnomalyService`具有各种已定义异常的 s 的工厂（仅类型 A，仅类型 B，两者，无，仅类型 C，...）
*   由于这三种类型以某种方式连接，因此您应该在每个测试中检查所有三种类型。如果只预期 A 类型的异常，您应该检查它`GetAllAnomalies`返回的结果与返回相同的结果`GetAnomalies_OfTypeA`并`GetAnomalies_OfTypeB`返回一个空列表。

# java - lsof 表示我的 java 进程正在泄漏 /devices/pseudo/tl@0:ticots

> ID：11792379
> 
> 赞同：0
> 
> 时间：2012-08-03T08:50:20.703
> 
> 标签：java, jboss, memory-leaks, file-descriptor, lsof

我有一个在 Unix 的 Jboss 中运行的 java EE 应用程序，我注意到几天后我得到“打开的文件太多”我已经确定了泄漏的内容，但我不知道它实际上是什么或如何找到哪个我的部分代码正在泄漏

我对 lsof 的分析表明，这些行正在缓慢增加：

```
java    25222  user  220u  unix    105,208835    0t465959  55050244 /devices/pseudo/tl@0:ticots->(socketpair: 0x32fc3) (0x6009c7d41f0) 
```

最接近类似问题的是[http://tinyurl.com/csmy7ay](http://tinyurl.com/csmy7ay) 我使用 JMS，所以问题可能就在那里。

但我的主要问题是我应该如何着手解决这个问题？我很难在 lsof 文件中找到任何有形的东西，这可能有助于我确定这是什么类型的流量以及它们可能在我的代码中创建的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T21:26:14.820

我发现了问题所在，运行了一个维护脚本，其中包括运行 jstack 以及此错误：[http](http://tinyurl.com/c5fdl43) ://tinyurl.com/c5fdl43 （solaris 中的 java attach API 也会导致打开文件）。导致文件泄露

# bash - 测试两者：布尔值和字符串？

> ID：11792381
> 
> 赞同：0
> 
> 时间：2012-08-03T08:50:21.823
> 
> 标签：bash

我想检查是否设置了两个选项之一：`bin`to`true`或`str`提供：

```
bin=false; str=; if $bin -o [ -n "$str" ]; then echo yes; fi 
```

没有`echo`任何东西，应该是，但是：

```
bin=false; str='str'; if $bin -o [ -n "$str" ]; then echo yes; fi 
```

也不回声 - 虽然它应该。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:53:37.647

您的`-o`选择正在传递给`false`. 你需要`||`：

```
bin=false; str=; if $bin || [ -n "$str" ]; then echo yes; fi
bin=false; str='str'; if $bin || [ -n "$str" ]; then echo yes; fi 
```

# android - 在android上实现类似刷新的按钮

> ID：11792382
> 
> 赞同：0
> 
> 时间：2012-08-03T08:50:24.830
> 
> 标签：android

我正在 android 中开发一个使用 wcf web 服务的应用程序。

我目前想要做的是实现一个刷新按钮，

如果用户退出应用程序并且他当前处于可能从服务投射“脏”数据的活动中。

我从一个线程重新加载活动。

该线程还负责使用 wcf 并重新提供数据。

所以我从这个单独的线程开始新的（相同的）活动，并从活动的 ui 线程完成当前活动。

问题是这并不总是很好，这意味着有时 ui 线程首先完成，所以我在重新加载之前返回一个活动。

我试图进入睡眠状态，但问题是它不会显示在时间过去之前从单独线程启动的活动。

另外我不想尝试不同的时间段，因为这显然取决于来自 wcf 的数据，所以它不会每次都有效。

我的问题是如何同步这些操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:53:44.080

在这里，您可以从下面的链接下载实现类似刷新功能的解析示例应用程序

[http://developer.android.com/training/basics/network-ops/index.html](http://developer.android.com/training/basics/network-ops/index.html)

# c# - 在 Visual Studio 2010 中创建 wpf 应用程序时无法移动表单域

> ID：11792386
> 
> 赞同：0
> 
> 时间：2012-08-03T08:50:31.630
> 
> 标签：c#, wpf, visual-studio-2010

我目前正在使用 Visual Studio 2010，我想创建一个简单的 WPF 应用程序。我想知道为什么我不能移动表单域。我可以调整字段的大小但不能移动它们。我是新手，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:00:09.723

更改表单域的边距，它们会移动。它们采用“左、上、右、下”的形式。

# php - php foreach循环上的分页

> ID：11792388
> 
> 赞同：0
> 
> 时间：2012-08-03T08:50:33.393
> 
> 标签：php, jquery

我下面的代码基本上从数据库中获取了一堆电影，并将年份设置为数组键，然后每年回显每部电影。这一切都很酷，尽管我的结果越来越长并且需要分页。我找不到任何可以帮助我的情况的示例，因为 php 中的大多数分页都是针对 while 循环的 - 感谢任何帮助或反馈。

我不介意它的 jquery 或 php 或两者的组合。

```
<?php
require_once('Connections/timeline.php');
mysql_select_db($database_timeline, $timeline);
// select all the events from the database ordered by date:
$res = mysql_query("SELECT * FROM film2 ORDER BY `year` ASC"); 
$filmArray = null;
while($row_res = mysql_fetch_assoc($res)) {
            $year = $row_res['year'];
            $filmArray[$year][] = $row_res;
}
//for each year in the film array echo out each film within that year
foreach($filmArray as $year => $films) {
            echo $year;
            echo '<br />';
            foreach($films as $film) {
                            echo $film['event'];
                            echo '<br />';
                            echo $film['name'];
                            echo '<br />';
                         }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:56:32.553

您需要有 GET 参数，例如 page。网址：localhost/film.php?page=1

接着

```
if (isset($_GET['page']))
    $page = $_GET['page'];
else
    $page = 1;

$entriesPerPage = 20;
$limitFrom = $page - 1;
$limitTill = $limitFrom + $entriesPerPage; 
```

然后你的 SQL 查询：

```
$res = mysql_query("SELECT * FROM film2 ORDER BY `year` ASC LIMIT $limitFrom, $limitTill"); 
```

最后，创建 html 链接。

```
<a href="film.php?page=<?=$page-1?>">Previous</a>
<a href="film.php?page=<?=$page+1?>">Next</a> 
```

# c# - Visual Studio 2010 C# 单行编译器

> ID：11792401
> 
> 赞同：2
> 
> 时间：2012-08-03T08:51:13.897
> 
> 标签：c#, visual-studio-2010, code-snippets, visual-studio-extensions

> **可能重复：**
> [Anders Hejlsberg 的 C# 4.0 REPL](https://stackoverflow.com/questions/1187423/anders-hejlsbergs-c-sharp-4-0-repl)

VS2010 中是否有本机窗口/扩展程序，您可以在其中编写单行代码并查看结果（据我所知，就像“立即窗口”一样，女巫只能在调试模式下使用）。

我对 Linq Pad 或 SnippetCompiler 等外部工具不感兴趣

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T08:55:52.550

使用 Roslyn，Visual Studio 将获得一个内置的交互式窗口：

[http://blog.filipekberg.se/2011/11/14/using-the-c-interactive-window-that-c​​omes-with-roslyn/](http://blog.filipekberg.se/2011/11/14/using-the-c-interactive-window-that-comes-with-roslyn/)

不幸的是，它仍然仅处于 CTP 状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:54:01.497

也许 IronPython 交互式控制台（在视觉工作室内）可以完成这项工作。但这不是一个直接的答案：/

[http://ironpython.net/](http://ironpython.net/)

# codeigniter - 哪个更好 - 许多库具有较少的功能或较少的库具有许多功能 - codeigniter

> ID：11792407
> 
> 赞同：0
> 
> 时间：2012-08-03T08:51:46.170
> 
> 标签：codeigniter

我正在开发 Web 应用程序并使用 codeIgniter 框架。我有一个模块被多次调用，说函数“get_small_profile_info”。

我的疑问是：如果我将此功能保留在非常大的配置文件库中。每次我调用这个函数时，整个配置文件库都会被执行吗？

将最常用的函数保存在单独的库中是个好主意吗？

拥有许多功能较少的库或较少功能的库是个好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:02:17.733

一开始将很多函数塞进一个库听起来不错，但是很多程序员和工程师更喜欢许多库，这取决于它们提供的函数，因为它们可以在其他项目中重用。

使用许多库确实没有任何缺点，但有很多好处。通常，您的代码更干净，因为您必须以逻辑单元来考虑事物。

在这里，我们看到了两个相互竞争的目标，适当的平衡取决于您将如何为自己或他人使用这些库。

*   更少的分离（更少的库）通常会导致更容易的开发和更容易的维护。
*   更多的分离（更多的库）会带来更大的灵活性，并且可能会带来更小的部署，因为不同的产品可以挑选他们想要的东西。

我倾向于支持尽可能少的库，前提是每个库的功能通常是独一无二的并且不重复。为什么项目引用不好？为什么拥有每个处理自己独特任务的微型图书馆是不好的？答案是一点也不差。我们应该接受关注点分离和枯燥的原则。

# gwt - gwt 在 window.settitle 中使用 safehtml 设置浏览器标题

> ID：11792411
> 
> 赞同：0
> 
> 时间：2012-08-03T08:51:58.260
> 
> 标签：gwt, xss

我需要向 Window.setTitle() 发送一个 SafeHtml。问题是我在标题上使用了 SafeHtmlUtils.fromString(String c) 。由于 XSS 泄漏的可能性。

结果是我的标题看起来很糟糕（由于将 SafeHtmlUtils.fromString 转换为 HTML Entity References）

我的问题是你能用 SafeHtml 设置窗口标题吗？或者我如何将 Safehtml 转换回普通字符串？

代码（更新）：

```
 public void setTitle(SafeHtml title) {
            internalHeader.setPageTitle(title);
        Window.setTitle(("fileee | " + title).replaceAll("\\<.*?>", ""));

    }

//in internalHeader
    public void setPageTitle(SafeHtml title) {
        pageNameBig.setInnerSafeHtml(title);

    } 
```

pageNameBig 是一个 HeadingElement。问题是如果我把`<h1>test`结果放在 Window.setTitle =`&lt;h1&gt;test`

但在 internalHeader 中是好的 = dispalys`<h1>test`

都是因为它的 HTML 实体引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:08:45.320

窗口标题上的 XSS 是不可能的，因为标题无法呈现 HTML。

`SafeHtml.asString()`会给你一个字符串，虽然不是原始的`SafeHtmlUtils.fromStrong`- 相反，因为窗口标题不能显示任何 HTML，所以根本不需要使用 SafeHtml。

# z3 - 如何使用z3消除表达式中的“not”？

> ID：11792412
> 
> 赞同：1
> 
> 时间：2012-08-03T08:52:04.937
> 
> 标签：z3

我尝试使用代码来删除表达式中的 not：

```
(declare-const t Int)

(assert (and (or (>= t 2) (>= t 1)) (not (= t 1))))

(apply ctx-solver-simplify) 
```

我想得到如下结果： t >= 2 但是，结果是：

```
(goals
(goal
  (>= t 1)
  (not (= t 1))
  :precision precise :depth 1)
) 
```

有人会帮我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:49:46.783

战术`simplify`有一个选项`:eq2ineq`。启用后，它将等式`t1 = t2`转换为`t1 <= t2 and t1 >= t2`. 应用此策略后，该策略`propagate-ineqs`将更加有效。

这是一个可以解决问题的脚本： [http ://rise4fun.com/Z3/JWit](http://rise4fun.com/Z3/JWit)

请注意，这不是通用解决方案。没有任何内置策略完全符合您的要求。

# php - ajax调用后迭代php数组

> ID：11792420
> 
> 赞同：0
> 
> 时间：2012-08-03T08:52:25.197
> 
> 标签：php, jquery, ajax, arrays, call

我有一个 ajax 函数，它调用一个返回数组的 php：

```
<?php
$testing = array("one","two","three", "four");   
echo json_encode($testing);        
?> 
```

我用这个 ajax 调用来调用它；

```
$.ajax({
url:"ajax_response.php",
type:"POST",   
success:function(msg)
{
  var array = msg;    
  var test = array[2];      
  alert(test);
}
}); 
```

问题是我想将数组 [1] 作为“一”，并且我在每个数组位置上获得 1 个字符，例如：数组 [0] = “o”，数组 [1] = “n”，数组 [2] = “e”。就像 json 编码或某些东西将我的数组变量拆分为字符一样。

有什么帮助吗？？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:56:52.570

你必须解析你的答案。最简单的方法是`dataType`在您的 AJAX 调用中添加一个：

```
$.ajax({
    url: "ajax_response.php",
    dataType: 'json', // add the dataType
    type: "POST",   
    success: function(msg) {
        var array = msg;    
        var test = array[2];      
        alert(test);
    }
}); 
```

或者您可以“手动”解析它。这有时是必要的：

```
success: function(msg) {
    var array = JSON.parse(msg); // or parse it manually
    var test = array[2];      
    alert(test);
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-03T08:57:10.703

你的回复是字符串格式在你的成功函数中试试这个

```
success:function(msg)
{
  var array ;
 eval('array ='+msg );  
  var test = array[2];      
  alert(test);
} 
```

# c++ - 如何使用 C++ 中的 sigaction 和 itimerval 结构同时安排两个事件？

> ID：11792422
> 
> 赞同：0
> 
> 时间：2012-08-03T08:52:30.517
> 
> 标签：c++, scheduled-tasks, setitimer

我想在特定时间安排一个事件，更准确地说，我想产生一个泊松流量。所以我需要以指数分布生成的特定时间间隔发送一个数据包。我在网上做了一些研究，发现该`setitimer`方法可以在一定时间后安排警报信号，但我不知道如何在我的情况下使用它。

感谢您的建议。我按照你说的做了。我还有一点疑问：在我的代码中，我需要同时安排两个独立的事件，通常是同时填充两个队列。这就是我现在所做的：

```
void Queue_class::SetPoissonTraficFirstQueue(void)

{  // add one packet to the queue 
   struct sigaction act ; 
   struct itimerval timer ; 
   act.sa_handler = this ; 
   sigempty_set(&act.sa_mask) ; // no signal is added to the sa_mask 
   act.sa_flags = 0 ; 
   sigaction(SIGALARM, &act,0) ; 
   timer.it_value.tv_usec = 0 ; 
   timer.it_value.tv_sec = exponential_variable() ; // generates a random exponential variable
   timer.it_interval.tv_sec = 0 ; 
   timer.it_interval.tv_usec = 0 ; 
   setitimer(ITIMER_REAL, *timer, NULL) ; 

 } 
```

另一个队列的函数相同，但指数随机变量不同

总的来说，我做以下事情：

```
int main()
{
   Queue_class queue ; 
   queue.SetPoissonTraficFirstQueue() ; 
   queue.SetPoissonTraficSecondQueue() ; 
   // do business
} 
```

请问我有两个问题：

1-在 sa_handler 方法中使用指针“this”在内部调用函数是一个很好的解决方案吗？

2- 在主函数中，两个进程是否如我所愿同时发生：我的意思是两个队列是否同时填充？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:18:01.413

假设你想为今天下午 6 点安排一个计时器，你得到一个`time_t`那个时间（使用 eg[`strptime`](http://linux.die.net/man/3/strptime)或其他函数），然后你可以使用它[`difftime`](http://linux.die.net/man/3/difftime)来获取从现在到那时的秒数。该值可用于定时器的“值”（即`itimerval.it_value.tv_sec`）。如果间隔被清除，那么这将是一个一次性计时器。

另一方面，如果要创建一个循环计时器，即每 X 秒调用一次，则将值和时间间隔都设置为 X。

在这两个花瓶中，使用`ITIMER_REAL`并有一个[信号](http://linux.die.net/man/7/signal)处理程序 catch `SIGALRM`。

# c# - 不同的 window.open 打开同一个页面

> ID：11792423
> 
> 赞同：0
> 
> 时间：2012-08-03T08:52:34.830
> 
> 标签：c#, javascript, asp.net

我正在使用 window.open 在弹出窗口中打开 2 个不同的页面，但由于某种原因，两个触发器都在弹出窗口中打开了相同的页面，这就是我尝试执行此操作的方法：

第一的：

```
Response.Write("<script type='text/javascript'>window.open('TransEditEntry.aspx','mywindow','width=850px,height=300px,left=0,top=10,screenX=100,screenY=10')</script>"); 
```

第二：

```
Response.Write(@"<script type='text/javascript'>window.open('TransNewEntry.aspx','','width=850px,height=300px,left=0,top=10,screenX=100,screenY=10')</script>"); 
```

这将打开“TransEditEntry.aspx”页面而不是“TransNewEntry.aspx”`

这里的其余代码：

单击添加按钮时调用的整个函数：

```
protected void addNew(object sender, EventArgs e)
    {
        //HiddenField sr = (HiddenField)GridView1.SelectedRow.Cells[6].FindControl("srno");
        //Session["TransSrNo"] = sr.Value;
        Response.Write(@"<script type='text/javascript'>window.open('TransNewEntry.aspx','','width=850px,height=300px,left=0,top=10,screenX=100,screenY=10')</script>");
        //Session["transAdd"] = "1";
    } 
```

调用该函数的添加按钮：

```
<asp:Button ID="AddBtn" runat="server"  OnClick="addNew" Text="Add"/> 
```

TransNewEntry.aspx.cs 页面

```
public partial class TransEditEntry : System.Web.UI.Page
{
    SqlConnection con = new SqlConnection(GetConnectionString.Get());
    string subCode;
    DataTable dt;
    SqlDataAdapter sda;
    SqlCommandBuilder build;
    DataRow dr;
    DataSet ds = new DataSet();

    protected void Page_Load(object sender, EventArgs e)
    {
        Response.Write((Session["TransSrNo"]).ToString());
        int SRno = Convert.ToInt32((Session["TransSrNo"]).ToString());
        con.Open();
        SqlCommand cmd3 = new SqlCommand("select sub_code from tran_dtls where sr_no='" + SRno + "'", con);
        subCode = (string)cmd3.ExecuteScalar();

        con.Close();
        if (!IsPostBack)
        {

            sda = new SqlDataAdapter("select * from tran_dtls where sr_no=" + SRno + "", con);
            build = new SqlCommandBuilder(sda);
            dt = new DataTable();
            sda.Fill(dt);
            foreach (DataRow row in dt.Rows)
            {
                srNoTxt.Text = "";
                amttxt.Text = "";
                partTxt.Text = "";
                checkNoTxt.Text = "";
                checkDtTxt.Text = "";
                refNoTxt.Text = "";
                refDtTxt.Text = "";
                jobNoTxt.Text = "";

            }

        }
    }

    protected void GlChange(object sender, EventArgs e)
    {
        con.Open();
        SqlCommand cmd4 = new SqlCommand("select ac_type from ac_mstr where AC_desc='" + GlDrp.SelectedValue + "'", con);
        string acType = (string)cmd4.ExecuteScalar();

        SqlCommand cmd5 = new SqlCommand("select gl_code from ac_mstr where AC_desc='" + GlDrp.SelectedValue + "'", con);
        string gl_code = (string)cmd5.ExecuteScalar();

        if (acType == "S")
        {
            SqlDataSource3.SelectCommand = ("select ac_desc from ac_mstr where gl_code='" + gl_code + "'");
            subDrp.DataBind();
            subDrp.Enabled = true;
            //Response.Write("<script type='javacript/text'>alert('1')</script>");
        }
        else
        {
            subDrp.Enabled = false;
            //Response.Write("<script type='javacript/text'>alert('2')</script>");
        }

        con.Close();
    }

    protected void saveRow(object sender, EventArgs e)
    {
        int SRno = Convert.ToInt32((Session["TransSrNo"]).ToString());

        sda = new SqlDataAdapter("select * from tran_dtls where tc='" + Session["TC"] + "' and doc_no='" + Session["docNo"] + "' ", con);
        build = new SqlCommandBuilder(sda);
        //dt = new DataTable();
        // DataSet ds = new DataSet();

        sda.Fill(ds);
        dt = (DataTable)ViewState["myViewState"];
        if (Session["gridRow"] == null)
        {
            dt = ds.Tables[0];

            dr = dt.NewRow();
            dr["GL_code"] = GlDrp.SelectedValue;
            dr["sub_code"] = subDrp.SelectedValue;
            dr["particulars"] = partTxt.Text;
            dr["chq_no"] = checkNoTxt.Text;
            dr["chq_dt"] = checkDtTxt.Text;
            dr["ref_no"] = refNoTxt.Text;
            dr["ref_dt"] = refDtTxt.Text;
            dr["dbcr"] = dbcrDrp.SelectedValue.ToString().Substring(0, 1);
            dr["amt"] = amttxt.Text;
            dr["job_no"] = jobNoTxt.Text;
            dr["EMP"] = empDrop.SelectedValue;
            dt.Rows.Add(dr);
            dt.AcceptChanges();
            ViewState["myViewState"] = dt;
            //Session["gridRow"] = dt;
            Session["gridRow"] = dt;
            Session["saveToggle"] = "1";
            closeFunction();
            Response.Write("<script type='text/javascript'>this.close()</script>");
        }

        else
        {
            dt = (DataTable)Session["gridRow"];
            dr = dt.NewRow();
            dr["GL_code"] = GlDrp.SelectedValue;
            dr["sub_code"] = subDrp.SelectedValue;
            dr["particulars"] = partTxt.Text;
            dr["chq_no"] = checkNoTxt.Text;
            dr["chq_dt"] = checkDtTxt.Text;
            dr["ref_no"] = refNoTxt.Text;
            dr["ref_dt"] = refDtTxt.Text;
            dr["dbcr"] = dbcrDrp.SelectedValue.ToString().Substring(0, 1);
            dr["amt"] = amttxt.Text;
            dr["job_no"] = jobNoTxt.Text;
            dr["EMP"] = empDrop.SelectedValue;
            dt.Rows.Add(dr);
            dt.AcceptChanges();
            ViewState["myViewState"] = dt;
            //Session["gridRow"] = dt;
            Session["gridRow"] = dt;
            Session["saveToggle"] = "1";
            //Response.Write("<script type='text/javascript'>window.opener.location.reload(true);</script>");
            closeFunction();
            Response.Write("<script type='text/javascript'>this.close()</script>");

        }
    }

    private void closeFunction()
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("window.opener.RefreshPage();");
        sb.Append("window.close();");

        ClientScript.RegisterClientScriptBlock(this.GetType(), "CloseWindowScript", sb.ToString(), true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:59:23.407

检查您正在做的事情：Response.Write。必须先指出这两个条件>

# ios - 新的 iOS SDK 3.0，在没有弃用 API 的情况下发布到用户的墙上

> ID：11792427
> 
> 赞同：2
> 
> 时间：2012-08-03T08:52:43.457
> 
> 标签：ios, facebook

我想知道是否有一种正确的方法可以使用新的 SDK 将消息发布到用户的墙上。
据我了解，在发布之前无法再向用户显示带有对话框视图的消息预览。
我宁愿不使用已弃用的 API。我按照教程使用新的 SDK 登录 Facebook（导入框架等）。在发布消息时，他们要求导入已弃用的 Facebook.h 标头（及其朋友...），但由于某些类的名称相同，因此会产生很多编译错误。
你们使用过时的 API 吗？
还是我必须自己创建一个自定义视图来向用户显示预览，然后使用 FBRequest 方法`+ requestWithGraphPath:parameters:HTTPMethod:`“在后台”执行帖子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T11:41:25.507

解决方案很简单。这对我有用：

**我们根本不需要导入已弃用的标头。**通过仅使用最新的 facebook ios sdk 3.0 以下是您可以做的。

```
[FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/feed",fbid]
                                 parameters:params
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection, id     result,NSError *error) 
{

  NSLog(@"error %@ \n\n\nresult = %@",error,result);

} 
```

*fbid*是用户的个人资料 ID。您可以提供朋友的个人资料 ID，以便在他的墙上发帖。

如果您必须在用户自己的墙上发帖，您可以将*图形路径*指定为 @"me/feed" 或如上所述（通过将*fbid*作为用户的配置文件 ID）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T11:35:10.773

从 Facebook SDK 3.2 开始，现在可以显示带有 SDK 中可用的新类的本机对话框。看看[FBNativeDialogs](https://developers.facebook.com/docs/reference/ios/3.2/class/FBNativeDialogs)、[FBShareDialogParams](https://developers.facebook.com/docs/reference/ios/3.2/class/FBShareDialogParams)和[FBOpenGraphActionShareDialogParams](https://developers.facebook.com/docs/reference/ios/3.2/class/FBOpenGraphActionShareDialogParams)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:09:10.653

我遇到了同样的问题，我找不到导入已弃用标头的方法，就像教程说的那样。与朋友一起导入框架和 Facebook.h 后，清理您的项目以确保链接器不会抱怨相同的文件名。

apprequests[教程](http://developers.facebook.com/docs/howtos/send-requests-using-ios-sdk/ "申请教程")仍然明确表示要导入已弃用的标头。所以我认为 FB 不希望你实现自己的观点。我假设他们必须发布 3.0 并发布到墙上并且 apprequests 还没有完成，所以他们现在拥有这个混合的 3.0/不推荐使用的系统，直到他们完成其余的工作。

# vbscript - 单击 Enter 键调用 VBScript 函数？

> ID：11792428
> 
> 赞同：1
> 
> 时间：2012-08-03T08:52:44.137
> 
> 标签：vbscript, enter

我创建了一个 VBScript 函数 OnRefreshList()，单击“刷新列表”按钮即可调用该函数。

```
Sub OnRefreshList ()

Initdatatable(false)

if ReadFilters() = false then
    msgbox "It is not possible to refresh the whole orders list. Please enter more filters"
    exit sub
end if

End Sub 
```

“刷新列表”按钮定义为

```
 <td class="button cmd" valign="center" nowrap id="cmdRefresh" onclick="OnRefreshList()" title="Refresh the order list">Refresh List</td> 
```

当我单击按钮时，此功能工作正常。

现在我想在按键盘上的 Enter 键时调用这个函数。

为此，我尝试更改以下代码，但它对我不起作用。

```
<td class="button cmd" valign="center" nowrap id="cmdRefresh" onKeydown="vbscript: if (event.keyCode==13) then OnRefreshList()" onclick="OnRefreshList()" title="Refresh the order list">Refresh List</td> 
```

如果有人对此有答案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:49:52.003

您的 onKeydown 事件中没有正确的 VBScript 语句。它应该是：

```
onKeydown="vbscript: if event.keyCode=13 then OnRefreshList()" 
```

注意单 = 符号和括号的缺失（它们不是强制性的）。如果您更熟悉 javascript：您可以混合使用 VBScript 和 Javascript：

```
onKeydown="javascript: if (event.keyCode==13) OnRefreshList(); //this will work too!" 
```

# android - Android 圆圈按钮

> ID：11792431
> 
> 赞同：4
> 
> 时间：2012-08-03T08:52:45.937
> 
> 标签：android, button

如何制作自定义 **圆形按钮**？（只点击圆圈）

有没有办法用圆形png文件制作它？

我尝试使用 imageView 覆盖 onTouch 方法，但效果很差，因为 view.getWidth()、view.getHeight() 和 view.getTop... 方法效果很差

```
public boolean inCircle(MotionEvent e, int radius, int x, int y) {
    int dx = (int) (e.getX() - x);
    int dy = (int) (e.getY() - y);
    double d = Math.sqrt((dx * dx) + (dy * dy));
    if (d < radius)
        return true;
    return false;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T03:02:28.700

它非常简单。创建一个可绘制的自定义形状并将其设置为视图的背景。例子：

drawable/中的round_button_drawable.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >
    <solid android:color="@android:color/holo_orange_dark"/>
</shape> 
```

将此drawable设置为任何视图的背景。

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/round_button_drawable"
    android:text="btn"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:57:49.250

另一种方法是扩展`Button`和覆盖它的方法然后你可以在using方法`onDraw`上画一个圆圈。`canvas``canvas.drawCircle`

您还可以使用方法`circle.png`在画布上绘制文件`Drawable.draw`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:57:49.980

有可以为您服务的[ImageButton](http://developer.android.com/reference/android/widget/ImageButton.html)类..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:15:10.527

不要进行复杂的逻辑，只需选择任何圆形图像并将该图像设置为您的简单按钮的背景，它看起来就像简单的圆形按钮，并且只接受对该圆形的点击。

# javascript - 大型静态网站的 JavaScript 树视图

> ID：11792433
> 
> 赞同：1
> 
> 时间：2012-08-03T08:52:47.097
> 
> 标签：javascript, tree, treeview

需要为以下站点提供“treeview”（导航）JS 小部件的建议：

1.  非常大（最多 100,000 页）
2.  静态 - 所有页面都是从外部源生成的，并且小部件嵌入在每个页面中。

澄清一下：没有框架，也没有应用程序服务器。所有页面都生成并放置在一个文件系统中，每个页面都是独立加载的，这意味着每次都会加载树视图导航，因此它应该使用多个文件并按需加载树的部分，或者超级-高效的。

商业OK。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:17:32.477

使用可混搭的树。点击[这里](http://www.ankitblog.com/2012/02/mac-type-grid-view-control-for.html)查看详细架构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:22:01.477

所有严肃的 JS 树小部件都允许动态加载子级。这里的关键问题是它们中的大多数会向服务器发送类似的查询，`getChildren?parent=23674`而这不适用于您的情况。

由于站点是静态的，因此您需要以 JSON 格式生成包含树分支描述的文件，并在用户展开树中的节点时从服务器请求这些文件。您还可以创建包含作为 HTML 的子树的文件，但是当您将数据发送到客户端并使用 JavaScript 将数据转换为 HTML 时，您会更加灵活（另外您将节省大量带宽）。

试试雅虎的[TreeView](http://developer.yahoo.com/yui/treeview/)。有一个[如何动态加载数据的例子](http://developer.yahoo.com/yui/treeview/#dynamicloading)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-20T02:39:40.720

注意到所有链接都不起作用。然而，有一个出于完全相同的原因而编写，即在大量数据上的效率。您可能想查看[PixoTree](https://pixotree.pixobit.eu)，看看它是否适合您。

PS。我知道这是一个老问题，但认为它可能会对偶然发现这个问题的人有所帮助。

# qt - QT 奇怪的 GUI 组件：选项卡？

> ID：11792435
> 
> 赞同：0
> 
> 时间：2012-08-03T08:52:52.583
> 
> 标签：qt, user-interface

我曾经看到有人在 QT 中制作 GUI，他有一些我以前从未见过的东西：它们看起来像一个接一个的大按钮，当你单击它们时，下面的按钮正在向下，为对话框或选项卡腾出空间。就像，如果您单击“绘图”按钮，按钮下方会突然出现一个选项卡或一个对话框或??? 与绘制所需的所有 GUI 组件（单选按钮、列表框...）一起出现。当您单击另一个按钮时，此 GUI 会消失，以便为另一个 GUI 腾出空间。有人知道它是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:01:46.683

Qt 确实支持标签。

它们实际上是不同的小部件，您可以在同一窗口中切换。

在这里您可以找到有关如何使用的示例：http: [//qt-project.org/doc/qt-4.8/declarative-ui-components-tabwidget.html](http://qt-project.org/doc/qt-4.8/declarative-ui-components-tabwidget.html)

在选项卡内，它就像一个普通的小部件。

# sql-server - 查找表的连接是否比用户定义的标量函数更优化？

> ID：11792443
> 
> 赞同：2
> 
> 时间：2012-08-03T08:53:28.317
> 
> 标签：sql-server, query-optimization

我有一个函数并传递一个整数，例如 99、4 或 3

该函数返回一个不同的整数（如此有效地转换它）

现在我发现这个函数是在一个选择中调用的，所以对于我所有相关表的 300 行导入，调用数字转换函数的总次数是 250k 次！

这让我很害怕——我的问题是在加入我的查询的查找表中这会更好——从而从选择中删除该函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:55:27.620

我会投票支持查找表，因为它可以利用表的索引（如果创建）此外，在针对表运行时，不需要为每一行运行该函数

但是查找表的一个问题是它应该处理所有可能的输入。我们只能使用查找表处理有限的情况。

因此，如果您可以为所有可能的输入创建一个查找表，那么查找表相对于函数具有性能优势

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:22:29.447

您能否将函数中的逻辑复制到您的 select 语句中？

例如

```
SELECT (a.ValueA + a.ValueB) as [ValueC]
FROM SomeTable a 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T09:23:22.710

对于第一种方法，我建议在 select 子句本身中编写查询/逻辑（相关函数的）。您肯定会看到性能提升。我也遇到了 7,000,000 条记录的性能问题。这对我有点帮助。虽然没有。执行次数不会减少，但肯定会提高性能，因为查询比函数快得多

# ruby-on-rails - 是否可以存储 Ruby 命令并稍后执行它们的输出？

> ID：11792449
> 
> 赞同：1
> 
> 时间：2012-08-03T08:53:38.370
> 
> 标签：ruby-on-rails, ruby

我正在尝试做一些不寻常的事情来解决另一个问题。我想存储 ruby​​ 命令并在以后执行它们。

我可以将命令存储在变量中，但我只能将它们打印到屏幕上，我玩弄了 flatten 以查看我能否以某种方式将它们转换为可用的形式，但它不起作用。

这是一个例子：

```
Command_Store = Array[puts "Hello World", my_first_array = array.new, puts "Hello World again"]

execute.Command_Store[0] => Hello World 
execute.Command_Store[1] => my.first_array[] 
execute.Command_Store[2] => Hello World again 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T09:09:56.270

您也可以将 lambda 用于此类任务：

```
command_store = []
command_store << lambda { puts "Hello World" }
command_store << lambda { my_first_array = Array.new }
command_store << lambda { puts "Hello World again" }

command_store.each(&:call) 
#=> Hello World
#=> Hello World again 
```

更新：

你可以捕获变量`my_first_array`，这就是所谓的闭包

```
my_first_array = [3,4,5,6,7]

command_store << lambda { puts my_first_array[0] }

command_store.each(&:call)
#=> ...
#=> 3 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T08:57:01.040

为什么不使用标准函数[eval()](http://ruby.about.com/od/advancedruby/a/Eval-Running-Code-On-The-Fly.htm)？

例如（来自链接的文章）

```
code = "Time.now"
result = eval(code)
puts result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:35:06.477

您已经有了一些使用 lambdas 的答案（这是正确的答案）。

> 我想存储 ruby​​ 命令并在以后执行它们。

如果*后者*在脚本的末尾，您可以使用`END`：

```
END {
  puts 1
}
puts 2 
```

结果：

```
2
1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:26:11.937

就更好的**变量范围**和**可见性**而言，我建议使用**块**。但是如果你只想存储和执行，**lambda是一个完美的解决方案。**

据我了解，我猜您想在 command_store 之外的某个地方访问 my_first_array。因此，在您的情况下，它将是：

***场景一***：如果您不想公开 my_first_array，但仍想以某种方式使用它。

```
def command_store
  puts 'Hello World'
  # here my_first_array is just a local variable inside command_store
  my_first_array = Array.new(5) {|i| Random.rand(100)}
  yield(my_first_array)
  puts 'Hello World again'
end

command_store() do |x|
  # puts '**Call from outside'
  puts "The first element is #{x[0]}"
  # ...
  puts "The last element is #{x[-1]}"
  # puts '**Call from outside again'
end

# Output:
# => Hello World
# => The first element is 41
# => The last element is 76
# => Hello World again 
```

***场景二***：假设您希望赋值语句对外部变量有效。在这种情况下考虑使用绑定也是一个好主意。

```
def command_store(var=[])
  puts 'Hello World'
  # here my_first_array is just a local variable inside command_store
  my_first_array = Array.new(5) {|i| Random.rand(100)}
  var.replace(my_first_array)
  puts 'Hello World again'
  return var
end

a = Array.new
command_store(a)
puts a[0]

b = command_store()
puts b[0]

# Output:
# => Hello World
# => Hello World again
# => 66
# => Hello World
# => Hello World again
# => 16 
```

# coffeescript - CoffeeScript 将散列参数发送到构造函数

> ID：11792458
> 
> 赞同：0
> 
> 时间：2012-08-03T08:54:13.987
> 
> 标签：coffeescript

我想用 CoffeeScript 创建 Ruby 风格的对象。所以我想做类似的事情

```
class A
  constructor: (@params) ->

a = new A {send: true, name: "fit"}
a.send #true 
```

有没有“标准”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:58:01.143

没有办法直接做到这一点。您可以定义一个有代码的基类，就像这样

```
class Base
   constructor: (props) ->
      for key, value of props
           @[key] = value

class Extend extends Base
    constructor: (props) ->
       super props
       alert "#{@key1}, #{@key2}"

e = new Extend 'key1': 'val1', 'key2': 'val2'

alert "#{e.key1}, #{e.key2}" 
```

[看到它在这里工作](http://coffeescript.org/#try%3a%0Aclass%20Base%0A%20%20%20constructor%3a%20%28props%29%20-%3E%0A%20%20%20%20%20%20for%20key,%20value%20of%20props%0A%20%20%20%20%20%20%20%20%20%20%20@%5Bkey%5D%20=%20value%0A%0A%0Aclass%20Extend%20extends%20Base%0A%20%20%20%20constructor%3a%20%28props%29%20-%3E%0A%20%20%20%20%20%20%20super%20props%0A%20%20%20%20%20%20%20alert%20%22#%7B@key1%7D,%20#%7B@key2%7D%22%0A%0A%0Ae%20=%20new%20Extend%20%27key1%27%3a%20%27val1%27,%20%27key2%27%3a%20%27val2%27%0A%0A%0Aalert%20%22#%7Be.key1%7D,%20#%7Be.key2%7D%22)

# visual-studio-2010 - Visual Studio gitignore 和 mdf、ldf 文件

> ID：11792461
> 
> 赞同：14
> 
> 时间：2012-08-03T08:54:23.713
> 
> 标签：visual-studio-2010, git, gitignore

我有一个生成这些文件并添加到 gitignore 的数据库项目。但是，它们似乎并没有被忽略，我需要在提交之前恢复它们，这很烦人。文件仍然被VS锁定，这是一个问题吗？

```
#
# Windows and Mac OS X Temp Cache Files
#
[Tt]humbs.db
*.DS_Store

#
#Visual Studio files
#
*.[Oo]bj
*.user
*.aps
*.pch
*.vspscc
*.vssscc
*_i.c
*_p.c
*.ncb
*.suo
*.tlb
*.tlh
*.bak
*.[Cc]ache
*.ilk
*.log
*.lib
*.sbr
*.sdf
*.dbmdl
*.mdf
*.ldf
*.Database.dbmdl
ipch/
obj/
[Bb]in
[Dd]ebug*/
[Rr]elease*/

#
#Tooling
#
_ReSharper*/
*.resharper
[Tt]est[Rr]esult*

#
#Project files
#
[Bb]uild/

#
#Subversion files
#
.svn

#
# Microsoft Office Temp Files
#
~$*

#
# YoureOnTime specific files
#
YoureOnTime.Database.dbmdl

# End of File 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-03T09:07:12.993

> 我需要在提交之前还原它们

表示它们已经版本化，并且是在使用 添加`.gitignore` **后**`git add`输入的。

两种可能的解决方案：

1.  暂时把它们从你的`.gitignore`, 然后
    `git rm --cached -- *.mdf`和
    `git rm --cached -- *.ldf`.
    这将从索引中删除文件，同时[将它们保留在磁盘上](http://linux.die.net/man/1/git-rm)。完成后，
    `git commit -m "removing crap from repo"`恢复您的`.gitignore`.

2.  如果你不想玩弄你的`.gitignore`，你可以使用[`update-index`](http://linux.die.net/man/1/git-update-index):
    `git update-index --assume-unchanged -- *.mdf`和
    `git update-index --assume-unchanged -- *.ldf`.
    这将强制 git 将文件视为未更改，即使它们是未更改的。

# sql - SQL 中两个 SELECT 在两列中的连接

> ID：11792464
> 
> 赞同：0
> 
> 时间：2012-08-03T08:54:33.353
> 
> 标签：sql, select, join, union

我有两个查询来获取数据，我想在同一个表中显示它们：

```
select aaa.Text, count(*)
  from XXXXX main inner join XXXXXX
on XXXXX
 where status = A
 group XXXXX
 order by aaa.Text

   Text1    111111  
   Text2    222222 
   Text3    333333  

select aaa.Text, count(*)
  from XXXXX main inner join XXXXXX
on XXXXX
 where status = B
 group XXXXX
 order by aaa.Text

  Text1    444444
  Text2    555555 
  Text3    666666 
```

我只想用两列显示同一张表中的数据

```
 Text1    111111     444444    
  Text2    222222     555555
  Text3    333333     666666 
```

我是 SQL 新手，在使用 UNION、UNION ALL、SELECT INTO 之间迷失了方向，我确信这样做非常简单。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T08:57:53.500

您需要加入表，而不是联合它们

```
SELECT a.text, a.count, b.count
FROM
( 
    select Text, count(*)  
    from XXXXX main inner join XXXXXX  
    on XXXXX  
    where status = A  
    group XXXXX  
    order XXXXX  
) a
INNER JOIN
( 
     select Text, count(*)   
     from XXXXX main inner join XXXXXX   
     on XXXXX   
     where status = B   
     group XXXXX   
     order XXXXX   
) b
ON a.text=b.text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:57:58.117

```
select Text, a.cnt, b.cnt from

(select Text, count(*) cnt
from XXXXX main inner join XXXXXX
on XXXXX
where status = A
group XXXXX) a

JOIN

(select Text, count(*) cnt
from XXXXX main inner join XXXXXX
on XXXXX
where status = B
group XXXXX) b

USING Text
ORDER xxxxx 
```

连接表以将*列*彼此相邻。

联合表将*行*逐个放置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:00:58.600

一种方法是使用`sum`total 一系列`1`条件匹配的位置。

例如：

```
select Text, 
    sum(case when status="A" then 1 else 0 end),
    sum(case when status="B" then 1 else 0 end)
from XXXXX main inner join XXXXXX
on XXXXX
group XXXXX
order XXXXX 
```

# java - itext 将 PDF 转换为 csv

> ID：11792465
> 
> 赞同：0
> 
> 时间：2012-08-03T08:54:36.297
> 
> 标签：java, pdf, itext

我正在尝试使用 itext 框架将 pdf 文件转换为 csv 以导入到 excel 中。

输出是乱码，我认为我缺少有关格式转换的步骤，但是我似乎无法在 itext 站点中找到信息并正在寻求帮助。

电流如下。

```
package com.pdf.convert;

import java.io.FileOutputStream;
import java.io.IOException;

import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Image;
import com.itextpdf.text.pdf.PdfImportedPage;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfWriter;

public class ThirdPDF {

    private static String INPUTFILE = "/location/test.pdf";
    private static String OUTPUTFILE = "/location/test.csv";

    public static void main(String[] args) throws DocumentException,
            IOException {
        Document document = new Document();

        PdfWriter writer = PdfWriter.getInstance(document,
                new FileOutputStream(OUTPUTFILE));
        document.open();
        PdfReader reader = new PdfReader(INPUTFILE);
        int n = reader.getNumberOfPages();
        PdfImportedPage page;
        // Go through all pages
        for (int i = 1; i <= n; i++) {
            // Only page number 2 will be included
            if (i == 2) {
                page = writer.getImportedPage(reader, i);
                Image instance = Image.getInstance(page);
                document.add(instance);
            }
        }
        document.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-02T11:07:26.070

将 PDF 文件转换为 CSV 文件。当前目录和文件创建基于 Android 框架。根据您的框架相应地更改您的路径和目录。

```
private void convertPDFToCSV(String pdfFilePath) {
        String myfolder = Environment.getExternalStorageDirectory() + "/Mycsv";
        if (createFolder(myfolder)) {
            try {
                Document document = new Document();
                document.open();
                FileOutputStream fos=new FileOutputStream(myfolder + "/MyCSVFile.csv");
                StringBuilder parsedText=new StringBuilder();
                PdfReader reader1 = new PdfReader(pdfFilePath);
                int n = reader1.getNumberOfPages();
                for (int i = 0; i <n ; i++) {
                    parsedText.append(parsedText+PdfTextExtractor.getTextFromPage(reader1, i+1).trim()+"\n") ;
                    //Extracting the content fromx the different pages
                }
                StringReader stReader = new StringReader(parsedText.toString());
                int t;
                while((t=stReader.read())>0)
                    fos.write(t);
                document.close();

            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    private boolean createFolder(String myfolder) {

        File f = new File(myfolder);
        if (!f.exists()) {
            if (!f.mkdir()) {
                return false;
            } else {
                return true;
            }
        }else{
            return true;
        }
    } 
```

# c++ - 此代码中是否创建了临时值？

> ID：11792468
> 
> 赞同：2
> 
> 时间：2012-08-03T08:54:40.943
> 
> 标签：c++

考虑以下代码：

```
class B;

class A
{
  public:
    A() {}
    A(B &b);
};

class B {};

A::A(B &b) {}

int main()
{
    B b;

    const A &refa = b;// does this line create a temporary value?

    return 0;
} 
```

我的问题是：代码是否`const A &refa = b;`创建临时值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T09:00:08.423

是的，在初始化语句中创建了一个临时对象`A(b)`，并立即绑定到 constant-reference `refa`。这具有延长临时变量的生命周期以匹配`refa`变量范围的效果。

# java - 使用gson从反序列化的json中获取内部类变量

> ID：11792471
> 
> 赞同：0
> 
> 时间：2012-08-03T08:54:56.760
> 
> 标签：java, json, oop, deserialization, gson

我正在尝试从反序列化的 json 对象的内部类访问变量。下面是我使用的代码。

```
package jsonparser;

public class JsonParser {

private long uid = 0;
private String username, secret, filter, machine_id, access_token,
        session_key = null;

    public JsonParser() {

     }

     public static class Profile {
        private String last_name, first_name, pic_square, name = null;
        private long uid = 0;
        final JsonParser outer = JsonParser.this;

         public String getLast_name() {
        return last_name;
         }

         public void setLast_name(String last_name) {
            this.last_name = last_name;
         }

         public String getFirst_name() {
         return first_name;
         }

         public void setFirst_name(String first_name) {
          this.first_name = first_name;
         }

             public String getPic_square() {
           return pic_square;
         }

         public void setPic_square(String pic_square) {
          this.pic_square = pic_square;
         }

         public String getName() {
         return name;
         }

         public void setName(String name) {
         this.name = name;
         }

         public long getUid() {
        return uid;
         }

         public void setUid(long uid) {
        this.uid = uid;
         }

         public Profile() {
         }
       }
} 
```

在另一个班级：

```
JsonParser jp = gson.fromJson(Data, JsonParser.class); 
```

数据看起来像：

```
{
    "uid": 123,
    "username": "Hello",
    "secret": "87920",
    "filter": "nf",
    "machine_id": "machine_id",
    "access_token": "access_token",
    "session_key": "123e",
    "profile": {
        "last_name": "Tan",
        "uid": 123,
        "first_name": "Sally",
        "pic_square": "url.jpg",
        "name": "Sally Tan"
    }
} 
```

我如何能够从 jp 对象访问配置文件内部类中的 last_name ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:07:27.893

添加字段

```
private Profile profile;

public Profile getProfile() { return profile; } 
```

到外面的班级`JsonParser`。然后你可以使用

```
jp.getProfile().getLast_name(); 
```

注意：该名称`JsonParser`令人困惑，因为它不解析任何内容 - 它存储解析*结果*。将其重命名为`Config`或类似的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:17:10.847

首先删除

```
final JsonParser outer = JsonParser.this; 
```

从你的代码。这是一个非法构造，因为`this`不能从静态上下文中引用。

然后加

```
private Profile profile; 
```

到您的 JsonParser 类，就在其他成员（如用户名、秘密、...）的定义下方

有了这个成员，GSon 解析器将在您调用`gson.fromJson(...)`.

您可以添加一个 getter 方法来从外部访问您的子结构。

# java - 通过java函数在MySQL中插入数据

> ID：11792476
> 
> 赞同：0
> 
> 时间：2012-08-03T08:55:14.710
> 
> 标签：java, mysql

我的 java 项目中有 3 个函数，如下所示。此结构在名为**PropertyInterface的接口中提供**

> > // 将属性添加到数据库
> > public void addProperty (String name, String value);
> > 
> > // 从数据库中获取属性
> > public String getProperty (String propertyName);
> > 
> > // 将属性设置为 DB
> > public void setProperty (String name, String value);

与数据库的连接已经建立。**我将如何在DatabaseProperty**类中实现这些功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:00:28.663

我建议你用谷歌搜索[“java mysql 教程”](http://www.google.nl/search?q=java+mysql+tutorial)。你的第一击是 Lars Vogels[关于 MySQL、Java 和 JDBC 的教程](http://www.vogella.com/articles/MySQLJava/article.html)，它肯定会对你有所帮助。

# asp.net - 用相同的数据填充多个下拉列表

> ID：11792483
> 
> 赞同：0
> 
> 时间：2012-08-03T08:55:51.253
> 
> 标签：asp.net, vb.net

我需要使用相同的 0-9 选项填充 12 个 asp:dropdownlist 。(ASP.NET VB)

现在我可以手动填充它们，但是如果有更简单的方法，我会徘徊......我可以填充一个数组并使用它来填充它们吗？

我以为我可以编写一个小函数，将 DDL 的名称传递到其中，但是我如何使用该函数输入字符串作为下拉列表名称呢？

我知道这是简单的东西，但它是我以前不需要做的事情，并且看不到一个简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:13:38.713

试试这个

```
 Protected Sub Page_Load(ByVal sender as Object, ByVal e As EventArgs)

        If (Not Page.IsPostBack) Then

        BindDropdown(list1)
        BindDropdown(list2)
        BindDropdown(list3)
        End If
    End Sub

    Private Sub BindDropdown(ByVal list As DrodownList)

        Dim items As String() = {"0","1","2","3","4","5","6","7","8","9" }
        list.DataSource = items
        list.DataBind()
    End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T09:07:36.623

将此添加到缓存并制作一个通用的辅助函数来绑定下拉列表

# php - 是否可以使用 .html 扩展名创建文件名，其中 php 代码包含在文件中？

> ID：11792496
> 
> 赞同：0
> 
> 时间：2012-08-03T08:56:37.490
> 
> 标签：php

如果有必要制作带有`.php`扩展名的文件，或者可以将 php 代码添加到带有扩展名的文件中，我想这样做`.html`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:59:33.900

是的，在 .htaccess 文件的下面（假设您使用的是 Apache）

```
AddHandler x-httpd-php5 .php .htm .html 
```

**[更多信息](http://websitedesign.websitesinaflash.com/2007/04/htaccess-addhandler/)**。

请注意，这在服务器方面**效率不高**，因为将为脚本中的所有页面触发 PHP（您失去了拥有有时需要的高效静态 HTML 网页的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:00:27.240

如果你想保留文件的 HTML 扩展名并且你想在文件中使用 PHP 代码，你必须通过添加 .html 扩展名告诉网络服务器这样做，并告诉网络服务器让 PHP 处理它。

然而，这是非常低效的，因为每个 HTML 请求都会触发 PHP。

# javascript - 如何完全从 JavaScript 添加新视频？

> ID：11792498
> 
> 赞同：7
> 
> 时间：2012-08-03T08:56:41.997
> 
> 标签：javascript, html, html5-video, video.js

我正在尝试添加一个新的 VideoJS 对象并完全从 JS 设置它，而没有 DOM 视频元素。结果是视频已加载，但没有任何 VideoJS 控件。这是代码：

```
obj = document.createElement('video');
                $(obj).attr('id', 'example_video_1');
                $(obj).attr('class', 'video-js vjs-default-skin');

                var source = document.createElement('source');
                $(source).attr('src', path);
                $(source).attr('type', 'video/mp4');
                $(obj).append(source);

                $("#content").append(obj);
                _V_("example_video_1", {}, function () {
                    //
                    }
                }); 
```

我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T09:16:19.997

好的，看了一下video-js，很不错。试试这个：

**HTML：**

```
<html>
  <head>  
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <link href="http://vjs.zencdn.net/c/video-js.css" rel="stylesheet">
    <script src="http://vjs.zencdn.net/c/video.js"></script>
  </head>
  <body>
    <div id="content"> </div>
      <!-- appending video here -->
    <hr />
    <!-- written in html -->
    <video id="example_video_by_hand" class="video-js vjs-default-skin" controls width="640" height="264" poster="http://video-js.zencoder.com/oceans-clip.jpg" preload="auto" data-setup="{}">
     <source type="video/mp4" src="http://video-js.zencoder.com/oceans-clip.mp4">
   </video>
  </body>
</html> 
```

**JavaScript：**

```
var obj,
    source;

obj = document.createElement('video');
$(obj).attr('id', 'example_video_test');
$(obj).attr('class', 'video-js vjs-default-skin');
$(obj).attr('width', '640');
$(obj).attr('data-height', '264');
$(obj).attr('controls', ' ');
$(obj).attr('poster', 'http://video-js.zencoder.com/oceans-clip.jpg');
$(obj).attr('preload', 'auto');
$(obj).attr('data-setup', '{}');

source = document.createElement('source');
$(source).attr('type', 'video/mp4');
$(source).attr('src', 'http://video-js.zencoder.com/oceans-clip.mp4');

$("#content").append(obj);
$(obj).append(source); 
```

[jsbin 上的工作示例](http://jsbin.com/welcome/7929/edit)。

* * *

**更新：**

正如[polarblau](https://stackoverflow.com/users/564721/polarblau)在评论中指出的那样，`jQuery.attr()`可以获取一个对象，而不必`jQuery.attr()`像我的第一个示例那样多次调用。

*注意：*以下只是一个示例，而不是一个工作演示。

```
 var attributes = {
   'id': 'example_video_test',
   'class': 'video-js vjs-default-skin',
   'width': '640',
   'data-height': '264',
   'controls': ' ',
   'poster': 'http://video-js.zencoder.com/oceans-clip.jpg',
   'preload': 'auto',
   'data-setup': '{}'
 }

 var element = $('<video/>').attr(attributes)
 //you would also have to add the source element etc but this gives
 //a good example of a shorter approach 
```

# sharepoint - 将powershell输出格式化为喜欢的表格格式

> ID：11792504
> 
> 赞同：0
> 
> 时间：2012-08-03T08:57:10.780
> 
> 标签：sharepoint, powershell

我在下面有这段代码，我想在表格中显示输出，如时尚

```
$spSite = Get-SPSite "http://sp2010" 
$spWeb = $spSite.OpenWeb()

$spList = $spWeb.Lists["ReportList"]
$items = $spList.Items
foreach($item in $items)
{
    Write-Host  $item["ID"] $item["Name"] $item["Department"] $item["Telephone"]

} 
```

像这样：

```
ID      Name            Department        Telephone
---    --------         -----------       ------------

1       Somone          IT                 02554445588 
```

我看到了 Format-Table，但我似乎无法掌握它。

非常感谢使用上面代码的一些示例。非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-03T09:10:25.407

甚至很难开始提供帮助，因为当前的代码根本无法工作......（$spListItem 是......什么？foreach 使用 $item，我们可以假设您正在使用它吗？）。另外：我们几乎没有关于这些项目类型的信息，它看起来像一些字典对象......无论如何，我会尝试：

```
$items | ForEach-Object {
    # assume $items is array of dictionary objects...
    New-Object PSObject -Property $_
} | Format-Table ID, Name, Department, Telephone 
```

显然，它可能行不通，因为我做了一些可能是错误的假设.. ;)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T11:59:41.867

试试这个：

```
function Get-SPListItem
{
    param(
        [Parameter(Mandatory=$true,ValueFromPipeline=$true)] 
        [Microsoft.SharePoint.SPList]$List,

        [Parameter()] 
        [ValidateNotNullOrEmpty()]
        [string]$ViewName
    )

    process 
    {
        try
        {
            if($PSCmdlet.MyInvocation.BoundParameters.ContainsKey('ViewName'))
            { 
                $views = $list.Views | Select-Object -ExpandProperty Title   

                if($views -contains $ViewName)        
                {
                    $columns = $List.Views[$ViewName].ViewFields
                }
                else
                {
                    throw 'Invalid view name'
                }
            }
            else 
            {
                $columns = $List.DefaultView.ViewFields
            }

            foreach($item in $List.Items) 
            {
                $obj = New-Object PSObject

                foreach($col in $columns) 
                {
                    $obj | Add-Member -MemberType NoteProperty -Name $col -Value $item[$col]
                }

                $obj
            }

        } 
        catch
        {
            Write-Error $_
        }    
    }
}

$spWeb.Lists["ReportList"] | Get-SPListItem 
```

# c# - 将 IQueryable Where 与具有多个参数的表达式一起使用

> ID：11792505
> 
> 赞同：3
> 
> 时间：2012-08-03T08:57:11.393
> 
> 标签：c#, linq, linq-to-entities, c#-3.0

我正在使用 LINQ to Entities 并查询某个日期时间段内的条目，这些条目保存在具有属性`DateFrom`和`DateTo`. 为此，我可以使用以下内容创建一个序列

```
var allActiveLogs = this.repository.RoutePerformanceLogs
         .Where(log => log.Date >= model.DateFrom.Value && 
                log.Date <= model.DateTo.Value) 
```

如果我想将其抽象出来以供重用，我可以创建以下表达式（只要模型在范围内）。

```
Expression<Func<RoutePerformanceLog, bool>> logWithinDateBounds = log => 
        log.Date >= model.DateFrom.Value && log.Date <= model.DateTo.Value; 
```

然后再打电话

```
var allActiveLogs = this.repository.RoutePerformanceLogs.Where(logWithinDateBounds) 
```

我想做的是进一步抽象这个表达式，在模型不在范围内的代码中，可能使用签名的表达式

```
Expression<Func<RoutePerformanceLog, DateTime?, DateTime?, bool>> logWithinDateBounds 
```

但是，这在 Where 方法中不起作用，因为 where 方法需要 a`Func<T, boolean>`或 a `Expression<Func<T, boolean>>`。

是否有可能有一个可重用的表达式，它需要多个参数并且可用于过滤`IQueryable`集合（最好使用查询提供程序进行过滤，而不是过滤内存中的对象）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:22:54.893

我希望这会有所帮助。这是一种非常实用的编程方法。您可以创建返回函数并将该函数用于 Where 的函数（或表达式）。

类似于以下内容：

```
Func<int, int, Func<int,bool>> func = (x, y) => z=> x + y > z;
var list = new List<int> { 1, 2, 3, 4, 5, 6 };

Console.WriteLine("How many greater than 2+1? {0}", 
                  list.Where(func(1, 2)).Count());
Console.WriteLine("How many greater than 3+1? {0}", 
                  list.Where(func(3, 1)).Count());
Console.WriteLine("How many greater than 2+3? {0}", 
                  list.Where(func(2, 3)).Count());
Console.ReadKey(); 
```

在您的情况下，您需要：

```
Func<DateTime, DateTime, Expression<Func<RoutePerformanceLog, bool>>> logWithinDateBounds =         
    (dateFrom, dateTo) => 
       log => log.Date >= dateFrom && log.Date <= dateTo; 
```

# java - 动态创建 java 字节码和可运行的 jar

> ID：11792507
> 
> 赞同：0
> 
> 时间：2012-08-03T08:57:12.033
> 
> 标签：java, dynamic, jar, bytecode

我正在制作需要动态创建 java 字节码的软件，甚至可能使它成为一个可运行的 jar。

我目前的想法是创建一个新的 .java 文件并在运行时编译它。我可以创建文件，但我不确定如何在运行时编译它，并使其成为可运行的 jar。任何帮助将不胜感激。

```
public static String generate(String filePath) {
    try {
        File file = new File("Test.java");
        if(!file.exists())file.createNewFile();
        FileWriter write = new FileWriter(filePath+".java");
        BufferedWriter out = new BufferedWriter(write);
        out.write(
                "public class Test {\n\t" +
                    "public static void main(String[] args){\n\t\t"+
                        "System.out.println(\"Working\");\n\t"+
                    "}\n" +
                "}"

                );
        out.close();

    } catch (Exception e) {// Catch exception if any
        return "Error: " + e.getMessage();
    }
    return "Test.java created!";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T09:04:29.207

要编译 Java 代码，您可以使用[Java Compiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)。

要直接生成字节码，可以使用[ASM](http://asm.ow2.org/)等工具。

要生成可执行 JAR，请创建一个[JarOutputStream](http://docs.oracle.com/javase/7/docs/api/java/util/jar/JarOutputStream.html)，其中包含[声明主类](http://docs.oracle.com/javase/tutorial/deployment/jar/appman.html)的清单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:43:52.183

您当然可以使用 ASM 等，但不要在 jvm 上打折脚本语言。如果您对 vm 和一般字节码不太熟悉，ASM 可能会让人感到困惑。您可以将 groovy 或 jython（或任何您喜欢的语言）代码生成到文件中，并将其与主程序一起打包到 jar 文件中。

例如，您创建一个主程序，它查找类路径资源并将其发送到 groovy 脚本语言：

```
Binding binding = new Binding();
// maybe set some binding variables here
GroovyShell shell = new GroovyShell(binding);
GroovyCodeSource source = 
  new GroovyCodeSource(
    Thread.currentThread().getContextClassLoader().getResource("script.groovy"));

Object value = shell.evaluate(source); 
```

一旦你有了它，就很容易将主类和脚本打包到一个可执行的 jar 中。您甚至可以解压缩 groovy-all.jar 并将其打包到您的 jar 中，使其成为一个完全自包含的可执行 jar 文件。

这一切都归结为你想要完成的事情，任何一种方法都可能对你有用。

# bash - 如何逐行评估流

> ID：11792508
> 
> 赞同：5
> 
> 时间：2012-08-03T08:57:13.613
> 
> 标签：bash, shell, unix

我试图避免创建任何新文件来存储输出，以尽量减少覆盖同名目录中某些内容的风险。我试图用管道评估流中的每一行，而不是输出到文件然后使用`while read line do done < file`循环。就像是：

```
echo -e "1\n2\n3\n4\n5" | #evaluate current line separately# 
```

我可以以某种方式将每一行读入一个数组，然后评估数组中的元素吗？还是有更好的方法来避免意外覆盖文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T08:59:11.527

在`bash`中，常用的方法是使用 Process Substitution：

```
while read line ; do
    ...
done < <( commands producing the input) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T09:08:42.647

你已经到了一半...

```
echo -e "1\n2\n3\n4\n5" | while read line; do
    ...
done 
```

请注意，bash 在单独的进程中运行管道的每个部分，并且在那里定义的任何变量都不会在该块之后持续存在。（ksh93 将保留它们，因为循环将在当前 shell 进程中运行。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:13:20.933

`mktemp`您可以通过使用或`tempfile`创建具有唯一名称的临时文件来避免覆盖文件。但是，我会在 choroba 的回答中使用流程替换。

# android - 区分手指触摸和手/掌托

> ID：11792510
> 
> 赞同：3
> 
> 时间：2012-08-03T08:57:17.363
> 
> 标签：android, ios, touch, multi-touch

在触摸表面上绘图时，是否有任何技术可以区分表面上的手指触摸和掌托~~在 iOS 中~~基于触摸的操作系统？

编辑：添加了**android**标签，因为问题与任何基于触摸的操作系统相关。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:45:51.600

我不能代表 Android 系统，但在 iOS 上，我不相信有任何明确的区别，因为所有触摸，无论表面积如何，都被解析为单个点。

也就是说，您可以通过多种方式确定特定触摸是手掌还是手指。例如，如果您正在制作一个手写应用程序，如果您询问用户他们是左撇子还是右撇子，那么您可以忽略所有在逻辑上是手指/触控笔的触摸右侧/左侧的触摸。您消除“手掌触摸”的方法将特定于您正在编写的应用程序。

我注意到的另一件事（尽管我赶紧补充一下，这不是特别可靠！）是手掌触摸通常会导致手掌区域周围的许多小触摸而不是单次触摸，因为手掌的形状，手掌的小动作/rolling 等。如果你知道你只需要接收和使用一次触摸，这可能是你可以操纵的东西。

最后，您用来区分手掌触摸和手指触摸的任何技术都可能是合乎逻辑的，而不是 API/硬件可用。同样，这是 iOS 特有的，我对 Android 的触摸系统一点也不熟悉。

# java - 如何实现高斯滤波器将图像从 9x9 块下采样为 5x5 的特征向量？

> ID：11792519
> 
> 赞同：1
> 
> 时间：2012-08-03T08:57:45.237
> 
> 标签：java, image-processing

90x90 的图像被分成 8 个链码方向的 9x9 块，并且需要最小化特征下采样！如何使用 5x5 高斯滤波器将图像下采样为 5x5 块。java中是否有实现高斯滤波器的库函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-24T21:05:40.193

我不太清楚您要做什么，但仅用于调整图像大小，您可以使用`AffineTransform at = AffineTransform.getTranslateInstance(x, y);`然后`at.scale(scaleX, scaleY);`，但我想您实际上想要模糊图像。这实际上是一个非常简单的过程，我曾经为此编写了一个方法。

```
public BufferedImage blur(int range, int angle)
{
    BufferedImage b = new BufferedImage(main_image.getWidth() * 2, main_image.getHeight(), BufferedImage.TYPE_INT_RGB);
    Graphics2D g = b.createGraphics();

    for(int x = 0; x < main_image.getWidth(); x++)
    {
        for(int y = 0; y < main_image.getHeight(); y++)
        {

            int red[] = new int[range * 2], green[] = new int[range * 2], blue[] = new int[range * 2];
            int pixels[] = new int[range * 2];

            for(int i = 0; i < pixels.length; i++)
            {
                pixels[i] = main_image.getRGB(clamp(x - clamp(range / 2, 0, range) + i, 0, main_image.getWidth() - 1), clamp(y - clamp(range / 2, 0, range) + (int)(i * Math.toRadians(angle)), 0, main_image.getHeight() - 1));

                red[i] = (pixels[i] >> 16) & 0xff;
                green[i] = (pixels[i] >> 8) & 0xff;
                blue[i] = (pixels[i]) & 0xff;
            }

            int red_t = 0, green_t = 0, blue_t = 0;

            for(int i = 0; i < pixels.length; i++)
            {
                red_t += red[i];
                green_t += green[i];
                blue_t += blue[i];
            }

            int r = red_t / (range * 2);
            int gr = green_t / (range * 2);
            int bl = blue_t / (range * 2);

            //System.out.println(r + ", " + gr + ", " + bl);

            g.setColor(new Color(r, gr, bl));
            g.fillRect(x, y, 1, 1);

        }
    }
    g.dispose();

    return b;
} 
```

这实际上是一个非常简单的线性拟合器。对于高斯滤波器，您必须将`pixels`、`red`和变量转换为二维数组，然后对 y 轴重复整个过程`green`。`blue`如果您了解高斯蓝色的工作原理，那么您应该可以毫无问题地实现它或将其更改为高斯滤波器。如果你愿意，你可以问我有关它的东西。

# php - PHP 链接到 MAC 和 PC 上的本地文件

> ID：11792520
> 
> 赞同：1
> 
> 时间：2012-08-03T08:57:48.237
> 
> 标签：php

**完成**PHP 和 HTML 的新手，所以这可能是一个男生错误。我正在尝试为我的工作建立一个小型 Intranet 站点。我希望能够显示本地文件的链接，例如公司手册、程序等。我的主要问题是它需要对 PC 和 MAC 用户友好（Mac 用户主要使用 Firefox，PC 使用 IE）。我有一个 PHP 脚本在我可以为 Mac 或 PC 单独工作但无法同时工作的每个页面上。例如，我希望我的代码查找用户操作系统并运行与显示该操作系统的本地文件链接相关的脚本部分。我相信脚本的关键部分是“文件///”如果它是“文件///”，它可以在 IE 和 Firefox 的 PC 上运行，但它需要是“文件”（没有三个 /' **s) 在 Mac 上工作？****但我在这个类比中可能是错的。****当前代码如下；**

```
<?php

//determine OS of user MAC or PC
$user_agent = getenv("HTTP_USER_AGENT"); 
if (strpos($user_agent, "Win") !== FALSE) 
$os = "Windows"; 
else if((strpos($user_agent, "Mac") !== FALSE) || (strpos($user_agent, "PPC") !== FALSE))
$os = "Mac";

if ($os == "Windows") 
{
//path to S:\One reality\Personnel\Culture & Values
$uncpath = "//servername/shared/one reality/personnel/culture & values/";

//get all files with a .pdf extension.
$files = glob($uncpath . "*.pdf");

//print each file name
foreach ($files as $file)

{
    echo "<a target=_blank href='file:///$file'>".preg_replace("/\\.[^.\\s]{3,4}$/", "",basename($file))."</a><br><br>"; 
}
}
elseif ($os == "Mac")
{
//path to S:\One reality\Personnel\Culture & Values
$uncpath = "//servername/shared/one reality/personnel/culture & values/";

//get all files with a .pdf extension.
$files = glob($uncpath . "*.pdf");

//print each file name
foreach ($files as $file)
{
    echo "<a target=_blank href='file:$file'>".preg_replace("/\\.[^.\\s]{3,4}$/", "",basename($file))."</a><br><br>"; 
}
}

?> 
```

上面的代码在 PC 上运行良好，并以 pdf 格式打开一个新的 TAB，但在 Mac 上，没有三个斜杠，代码无法运行 Mac 特定的“文件：”，因此不知道如何显示本地文件链接。PS 我知道在 Firefox 中允许本地文件链接，并且已经到位，所以它基本上是一个编码问题。我怀疑我的 IF $os = 语句有问题。

如果您认为我走错了路，我已经准备好放弃这种方法并重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:05:19.010

对于检测操作系统，您可以在 php 中使用“用户代理”...如果您愿意，您可以阅读[本文](http://translate.google.fr/translate?sl=fr&tl=en&js=n&prev=_t&hl=fr&ie=UTF-8&layout=2&eotf=1&u=http://sebastienguillon.com/journal/2005/10/script-php-pour-dechiffrer-les-chaines-user-agent&act=urlz)，使用脚本检测操作系统、浏览器、用户代理中的所有详细信息...

对于您在“else”中的问题，您是否尝试在“else”部分中创建日志？

```
elseif ($os == "Mac")
{
    print_r("mac os was found");
    // your code
} 
```

对于您的代码，if/else 不是很重要，您可以这样做：

```
<?php
    // First step: you detect OS plateform : 

    //determine OS of user MAC or PC and add "pathOsFile" var:
    $user_agent = getenv("HTTP_USER_AGENT"); 
    if (strpos($user_agent, "Win") !== FALSE){
        $os = "Windows"; 
        $pathOsFile = "file:///";
    }else if((strpos($user_agent, "Mac") !== FALSE) || (strpos($user_agent, "PPC") !== FALSE)){
        $os = "Mac";
        $pathOsFile = "file:":
    }

    // Second step: You display all your file...

    //path to S:\One reality\Personnel\Culture & Values
    $uncpath = "//servername/shared/one reality/personnel/culture & values/";

    //get all files with a .pdf extension.
    $files = glob($uncpath . "*.pdf");

    //print each file name
    foreach ($files as $file)
    {
        echo "<a target=_blank href='".$pathOsFile.$file."'>".preg_replace("/\\.[^.\\s]{3,4}$/", "",basename($file))."</a><br><br>"; 
    }
?> 
```

# r - 过滤掉 data.table 中的重复/非唯一行

> ID：11792527
> 
> 赞同：91
> 
> 时间：2012-08-03T08:58:02.803
> 
> 标签：r, duplicates, data.table

**2019 年编辑：** *此问题是`data.table`在 2016 年 11 月更改之前提出的，请参阅下面接受的当前和以前方法的答案。*

我有一个`data.table`大约 250 万行的表。有两列。我想删除在两列中重复的任何行。以前对于data.frame，我会这样做： `df -> unique(df[,c('V1', 'V2')])`但这不适用于data.table。我已经尝试过`unique(df[,c(V1,V2), with=FALSE])`，但它似乎仍然只对 data.table 的键而不是整行进行操作。

有什么建议么？

干杯，戴维

例子

```
>dt
      V1   V2
[1,]  A    B
[2,]  A    C
[3,]  A    D
[4,]  A    B
[5,]  B    A
[6,]  C    D
[7,]  C    D
[8,]  E    F
[9,]  G    G
[10,] A    B 
```

在上面的 data.table 中`V2`，表键在哪里，只有第 4、7 和 10 行会被删除。

```
> dput(dt)
structure(list(V1 = c("B", "A", "A", "A", "A", "A", "C", "C", 
"E", "G"), V2 = c("A", "B", "B", "B", "C", "D", "D", "D", "F", 
"G")), .Names = c("V1", "V2"), row.names = c(NA, -10L), class = c("data.table", 
"data.frame"), .internal.selfref = <pointer: 0x7fb4c4804578>, sorted = "V2") 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-03T09:04:08.657

**对于 v1.9.8+**（[2016 年 11 月发布](https://github.com/Rdatatable/data.table/blob/master/NEWS.0.md)）

From`?unique.data.table` 默认使用所有列（与 一致`?unique.data.frame`）

```
unique(dt)
   V1 V2
1:  A  B
2:  A  C
3:  A  D
4:  B  A
5:  C  D
6:  E  F
7:  G  G 
```

或者使用`by`参数来获得特定列的唯一组合（就像以前使用的键一样）

```
unique(dt, by = "V2")
   V1 V2
1:  A  B
2:  A  C
3:  A  D
4:  B  A
5:  E  F
6:  G  G 
```

**之前的 v1.9.8**

从`?unique.data.table`，很明显，`unique`对数据表的调用仅对键有效。这意味着您必须在调用之前将键重置为所有列`unique`。

```
library(data.table)
dt <- data.table(
  V1=LETTERS[c(1,1,1,1,2,3,3,5,7,1)],
  V2=LETTERS[c(2,3,4,2,1,4,4,6,7,2)]
) 
```

`unique`以一列为键调用：

```
setkey(dt, "V2")
unique(dt)
     V1 V2
[1,]  B  A
[2,]  A  B
[3,]  A  C
[4,]  A  D
[5,]  E  F
[6,]  G  G 
```

* * *

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T02:50:43.143

使用您的示例 data.table ...

```
> dt<-data.table(V1 = c("B", "A", "A", "A", "A", "A", "C", "C", "E", "G"), V2 = c("A", "B", "B", "B", "C", "D", "D", "D", "F", "G"))
> setkey(dt,V2) 
```

考虑以下测试：

```
> haskey(dt) # obviously dt has a key, since we just set it
[1] TRUE

> haskey(dt[,list(V1,V2)]) # ... but this is treated like a "new" table, and does not have a key
[1] FALSE

> haskey(dt[,.SD]) # note that this still has a key
[1] TRUE 
```

因此，您可以列出表的列，然后获取其中的列，而无需按照@Andrie 的解决方案的要求（并由@MatthewDowle 编辑）`unique()`将键设置为所有列或将其删除（通过将其设置为） `NULL`）。@Pop 和 @Rahul 建议的解决方案对我不起作用。

请参阅下面的尝试 3，这与您的初始尝试非常相似。你的例子不清楚，所以我不确定为什么它不起作用。也是几个月前你发布这个问题的时候，所以也许`data.table`更新了？

```
> unique(dt) # Try 1: wrong answer (missing V1=C and V2=D)
   V1 V2
1:  B  A
2:  A  B
3:  A  C
4:  A  D
5:  E  F
6:  G  G

> dt[!duplicated(dt)] # Try 2: wrong answer (missing V1=C and V2=D)
   V1 V2
1:  B  A
2:  A  B
3:  A  C
4:  A  D
5:  E  F
6:  G  G

> unique(dt[,list(V1,V2)]) # Try 3: correct answer; does not require modifying key
   V1 V2
1:  B  A
2:  A  B
3:  A  C
4:  A  D
5:  C  D
6:  E  F
7:  G  G

> setkey(dt,NULL)
> unique(dt) # Try 4: correct answer; requires key to be removed
   V1 V2
1:  B  A
2:  A  B
3:  A  C
4:  A  D
5:  C  D
6:  E  F
7:  G  G 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:03:29.623

`unique(df)`适用于您的示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-08T10:21:01.197

这应该适合你

```
dt <- unique(dt, by = c('V1', 'V2')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T09:54:41.733

保留 data.table 表示法，您可以使用：

```
unique(df[, .(V1, V2, V3), nomatch=0 ]) 
```

如这里[https://stackoverflow.com/a/31875208/10087503](https://stackoverflow.com/a/31875208/10087503)

我没有比较这个和 Magma 版本的速度。

# python - C++ 到更简单的语言（Python、Lua 等）转换器？

> ID：11792529
> 
> 赞同：1
> 
> 时间：2012-08-03T08:58:14.873
> 
> 标签：python, c++, code-translation

我知道 Python，并且遇到了一个小的 C++ 源文件，我想将其转换为 Python。但是 C++ 代码太复杂了，我不学习语言就无法理解。

所以我想知道是否有一种工具与许多人想要的相反：将 C++ 代码转换为 Python，或者我能理解的另一种更简单的语言。我知道这些工具可以处理非常简单的代码，即使那样也很难完美地完成工作，但是我拥有的代码*非常*小而且简单。

我找到了“ctopy”，但没有使用示例，如果我只是将 .cpp 文件传递​​给它，它就会挂起，没有错误消息或任何东西。也许它根本不适用于 C++。 [http://www.catb.org/~esr/ctopy/](http://www.catb.org/~esr/ctopy/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-04T14:16:02.673

相信我，不要浪费时间寻找这样的软件。只有真正的人类大脑才能完美地做到这一点。听我的建议，学习语言。如果您已经了解 python，那么您学习 C++ 不会花费太多时间。所有的编程语言都是兄弟！您不必深入了解语言。在这里浏览备忘单、阅读好文章、观看视频和提问。这样，您将快速学习基本知识，并且您将拥有了解另一种语言的额外优势。

我在这里找到了一个简洁的 C++ 入门：[http](http://www.entish.org/realquickcpp/) ://www.entish.org/realquickcpp/ 。祝你好运！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T23:38:30.060

我已经看到（并且想要）这样的编程代码转换器，并在 cpp2py 中找到了您想要的东西，尽管我个人还没有为自己的网站[https://github.com/hlamer/cpp2python尝试过](https://github.com/hlamer/cpp2python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T00:04:24.330

这有点痛苦，但我已经使用了一些 python 代码

[https://code.google.com/p/ctypesgen/](https://code.google.com/p/ctypesgen/)

由于某种原因，它不处理`bool`'s.

它可能使用正则表达式替换和其他类似的东西，但它肯定比没有它写出你自己的 ctypes 包装器要好。

[http://docs.python.org/2/library/ctypes.html](http://docs.python.org/2/library/ctypes.html)

您可以考虑的另一个选择是将您的 C++ 编译为可执行文件，然后使用 python 运行该可执行文件。

如果您决定在您的工具带中需要 C/C++ 的强大功能：

[https://stackoverflow.com/questions/3973899/learning-c-java-coming-from-python](https://stackoverflow.com/questions/3973899/learning-c-java-coming-from-python)

希望有帮助。

# add-in - DTE2 _applicationObject 读取文件夹中的文件名

> ID：11792530
> 
> 赞同：0
> 
> 时间：2012-08-03T08:58:15.810
> 
> 标签：add-in, envdte

以下是我拥有的当前代码。它所做的基本上是遍历项目解决方案项目文件并检测它是否是 C# 文件。但是它无法检测到放在文件夹中的文件，我如何修改它以读取解决方案文件夹中的 C# 文件。

问候，安迪

```
 foreach (var projectItem in
            _applicationObject.Solution.Projects.Cast<Project>().SelectMany(project => project.ProjectItems.Cast<ProjectItem>()))
        {
            //for (var i = 0; i < projectItem.FileCount; i++)
            //{

            if (projectItem.FileCount > 0 && projectItem.Name.EndsWith(".cs")) // check if project is .Cs files
            {
                string fileName;
                try
                {

                    fileName = projectItem.FileNames[0];
                }
                catch (Exception)
                {
                    continue;
                }
                //end of find filename

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T07:30:48.757

我相信这将打印解决方案中的所有项目。它适用于 VS 2012 中的 C++ 解决方案。

```
 // XXX  Test
    IEnumerator enumerator = m_applicationObject.Solution.GetEnumerator();
    string indent = "  ";
    while (enumerator.MoveNext())
    {
        Project p = enumerator.Current as Project;
        if (p != null)
        {
            Debug.WriteLine(p.Name);
            ProcessProjectItems(p.ProjectItems, indent);
        }
    }

// XXX  Test
void ProcessProjectItems(ProjectItems pis, string indent)
{
    if (pis == null)
        return;

    IEnumerator items = pis.GetEnumerator();
    while (items.MoveNext())
    {
        ProjectItem pi = items.Current as ProjectItem;
        if (pi != null)
        {
            Debug.WriteLine(indent + pi.Name);

            if (pi.ProjectItems != null)
            {
                ProcessProjectItems(pi.ProjectItems, indent + "  ");
            }
            else
            {
                Project p = pi.Object as Project;
                if (p != null && p.ProjectItems != null)
                    ProcessProjectItems(p.ProjectItems, indent + "  ");
            }
        }
    }
} 
```

# python - 将 WebSphere MQ 与 Twisted 一起使用

> ID：11792531
> 
> 赞同：0
> 
> 时间：2012-08-03T08:58:21.680
> 
> 标签：python, ibm-mq, twisted, pymqi

我正在尝试研究如何构建一个“机器”来通过 Twisted 向 WebSphere MQ 发送和接收消息。我希望它尽可能通用，因此我可以在与 MQ 接口的许多不同情况下重用它。

我以前用过 Twisted，但很多年前的现在，我正试图恢复我曾经拥有的知识......

我遇到的具体问题是如何使用 Twisted 实现 MQ IO。有一个与 MQ 接口的 pymqi Python 库，它提供了我需要的所有接口。我需要实现的 MQ 调用是：

*   发起与特定 MQ 服务器/端口/通道/队列管理器/队列组合的连接
*   获取内容并将其作为消息发布到所需的队列
*   轮询队列并返回队列中下一条消息的内容
*   向队列管理器发送请求以查找当前队列中的消息数

所有这些都涉及阻塞对 MQ 的调用。

由于我打算在一系列项目中多次重用 Twisted/MQ 接口，我应该将 MQ IO 实现为 Twisted 协议、Twisted 传输，还是只是通过 deferToThread() 调用调用 pymqi 方法? 我意识到这是一个非常广泛的问题，可能没有明确的答案；我真的很喜欢那些之前可能遇到过类似挑战的人的建议（即使用总是会阻塞的排队接口）并找到了一种行之有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:54:40.337

如果你要经常使用这个功能，那么拥有一个原生的 Twisted 实现可能是值得的。基于 的包装器`deferToThread`工作量会减少，但它也会更难测试和调试，性能较差，并且在 Python 线程不能很好工作的某些平台（例如 FreeBSD）上会出现问题。

原生 Twisted 实现的方法可能是实现一个可以与 MQ 服务器对话的协议，并为其提供丰富的 API 用于与通道、队列、队列管理器等交互，然后在其之上构建一个抽象层远离应用程序的实际网络连接（我相信 mqi/pymqi 在很大程度上是这样做的）。

# java - 如何编辑我的比较方法

> ID：11792534
> 
> 赞同：0
> 
> 时间：2012-08-03T08:58:35.580
> 
> 标签：java, arrays, string, compare, filewriter

我想比较我的两个 txt 文件的内容并在其他 file3.txt 文件中写入不同的单词

我想用这种方式做比较方法来写另一个txt文件。我也没有编码错误

我没有结果。这是我的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:30:07.253

我已将您的代码简化并更正为：

```
public class TextAreaSample
{
  public static void main(String [] args) throws IOException {
    compare(readFileAsList("deneme1.txt"),
            readFileAsList("deneme2.txt"));
  }

  private static void compare(List<String> strings1, List<String> strings2)
  throws IOException
  {
    final Collator c = Collator.getInstance();
    c.setStrength(Collator.PRIMARY);
    final SortedSet<String>
      union = new TreeSet<String>(c),
      intersection = new TreeSet<String>(c);
    union.addAll(strings1);
    union.addAll(strings2);
    intersection.addAll(strings1);
    intersection.retainAll(strings2);
    union.removeAll(intersection);
    write(union, "deneme3.txt");
  }

  private static void write(Collection<String> out, String fname) throws IOException {
    FileWriter writer = new FileWriter(new File(fname));
    try { for (String s : out) writer.write(s + "\n"); }
    finally { writer.close(); }
  }

  private static List<String> readFileAsList(String name) throws IOException {
    final List<String> ret = new ArrayList<String>();
    final BufferedReader br = new BufferedReader(new FileReader(name));
    try {
      String strLine;
      while ((strLine = br.readLine()) != null) ret.add(strLine);
      return ret;
    } finally { br.close(); }
  }
} 
```

我有 deneme1.txt：

```
plane
horoscope
microscope 
```

deneme2.txt：

```
phone
mobile
plane 
```

deneme3.txt 中的输出：

```
horoscope
microscope
mobile
phone 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T09:25:27.283

我刚刚使用以下文件运行了您的程序，但无法重现您的问题。

**定名1**

```
abc
def
ghi 
```

**定位基因2**

```
abc
ghi
klm 
```

并且**deneme3**是使用以下内容创建的：

```
abc
ghi 
```

**编辑**

看来你想要相反的行为。您的某些方法不必要地复杂，并且可以通过使用标准 JDK 的正确工具来缩短。请参阅下面的简化实现示例（仅保留两个文件之间不通用的单词）-**此示例区分大小写**：

```
public class TextAreaSample {

    public static void main(String[] args) throws IOException {
        //readAllLines does what you do in readFileAsList
        List<String> strings1 = Files.readAllLines(Paths.get("C:/temp/deneme1.txt"), Charset.defaultCharset());
        List<String> strings2 = Files.readAllLines(Paths.get("C:\\temp\\deneme2.txt"), Charset.defaultCharset());
        Set<String> notInCommon = getNotInCommon(strings1, strings2);
        write(notInCommon, "C:\\temp\\deneme3.txt");
    }

    private static void write(Collection<String> out, String fname) throws IOException {
        FileWriter writer = new FileWriter(new File("C:\\temp\\deneme3.txt"));
        for (String s : out) {
            writer.write(s + "\n");
        }
        writer.close();
    }

    private static Set<String> getNotInCommon(List<String> strings1, List<String> strings2) {
        //Sets are great to get unique lists and check commonality
        Set<String> onlyInFile1 = new HashSet<String>(strings1);
        onlyInFile1.removeAll(strings2); //remove strings in s1 AND s2
        Set<String> onlyInFile2 = new HashSet<String>(strings2);
        onlyInFile2.removeAll(strings1); //remove strings in s1 AND s2
        Set<String> notInCommon = new HashSet<>();
        notInCommon.addAll(onlyInFile1);
        notInCommon.addAll(onlyInFile2);

        return notInCommon;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:25:39.407

我的建议是不要试图一次性解决所有问题。您可以通过使用一个班轮来简化您的比较方法 `strings1.retainAll(strings2)`

有关更多信息，请参阅此 [http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#retainAll(java.util.Collection](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#retainAll(java.util.Collection) )

并打印 strings1 的内容，看看是否可以，然后解决文件写入部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:29:17.677

您将第三个文件打开`deneme3.txt`两次，但中间没有关闭它。我猜第二次（in `write()`）会抛出异常，所以不会写。删除`FileWriter writer = new FileWriter(new File("D:\\Denemeler\\deneme3.txt"));`（中的那个`compare()`）的第一次出现，你应该没问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-03T09:16:40.727

我认为您必须在关闭它之前刷新（）您的作家。

```
private static void write(ArrayList<String> out, String fname) throws IOException {
    FileWriter writer = new FileWriter(new File("D:\\Denemeler\\deneme3.txt"));
    for (int i = 0; i < out.size(); i++) {
        writer.write(out.get(i) + "\n");
    }
    // Flush the writer before closing it.
    writer.flush();

    writer.close();
} 
```

# git - 在 git 中，commit(s) 和 revision(s) 有什么区别

> ID：11792538
> 
> 赞同：28
> 
> 时间：2012-08-03T08:59:03.560
> 
> 标签：git, version-control

有许多 git 命令，例如`git clone --depth 10 <repo>`，需要给出修订数 [ `git help revisions`]。

提交和修订之间有什么区别（在 git 中，[而不是说 svn](https://stackoverflow.com/questions/8586601/whats-the-difference-between-commit-and-revision)）？

还是仅在尝试计算修订/提交时以复数形式显示，例如必须通过遍历提交及其父项的 DAG（有向无环图）或其他一些仔细的区别来计算修订？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T09:10:35.927

请参阅[git rev-parse的“](http://git-scm.com/docs/git-rev-parse)[指定修订](http://git-scm.com/docs/git-rev-parse#_specifying_revisions)” ：

> 修订参数`<rev>`通常但不一定会命名提交对象。
> 它使用所谓的扩展 SHA1 语法，[并包括]各种拼写对象名称的方法。

所以“revision”是指可以用作参数来*引用*git 中的对象（通常是提交）的 id。

`HEAD@{5 minutes ago}`是引用 5 分钟前提交的修订版。

[`gitrevision`](http://git-scm.com/docs/gitrevisions.html)提到：

> [...] 一些 Git 命令（例如[`git show`](http://git-scm.com/docs/git-show.html)）还采用**修订参数，这些参数表示除提交之外的其他对象**，例如**blob**（“文件”）或**树**（“文件目录”）。

例如，以下 rev 参数不引用提交：

```
<rev>:<path>, e.g. HEAD:README, :README, master:./README 
```

> 后缀`:`后跟路径命名树状对象中给定路径上的 blob 或树，该对象由冒号之前的部分命名。

* * *

Git 中的“提交”通常指定一个“提交*对象*”（例如，如中所述[`git commit-tree`](http://git-scm.com/docs/git-commit-tree)）：

> 提交封装：
> 
> *   所有父对象 ID
> *   作者姓名、电子邮件和日期
> *   提交者姓名和电子邮件以及提交时间。

* * *

所以：

*   提交指定*其中一个*git 对象（其他是 blob、树、标签、注释），
*   修订是引用 git 对象的一种方式。

* * *

在您的情况下 ( [`git clone`](http://git-scm.com/docs/git-clone))`--depth <n>`会：

> 创建一个浅克隆，其历史被截断为指定的*修订*数。

它适用于在该深度可访问的所有提交，直至`n`DAG 中每个路径的修订。
由于结果可能不仅仅是`n`提交，因此此处更适合使用修订一词，以强调您不只想要`n`提交，而是任何`n`可访问的最大修订引用的提交。

但是，在这种情况下，修订明确地引用了可访问的提交（如下图所示）（正如您在“ [（浅克隆）比它做出来的更有用吗？](https://stackoverflow.com/questions/6941889/is-git-clone-depth-1-shallow-clone-more-useful-than-it-makes-out/6949805#6949805)[”`git clone --depth 1`](https://stackoverflow.com/questions/6941889/is-git-clone-depth-1-shallow-clone-more-useful-than-it-makes-out/6949805#6949805)中提到的）。

问题是“从什么可以到达”？

您引用[了这个线程](http://article.gmane.org/gmane.comp.version-control.git/177617)，其中包括：

> IIRC，`--depth=<n>`不是“加深`<n>`”，而是“**确保我至少`<n>`有更新的提示**”。如果您过去以浅克隆方式并在另一方添加比 更多的提交后
> 获取，那么浅克隆 hack 会给您带来非常无用的语义（即使它可能是内部一致的），因为您无法猜测正确的值应该没有实际获取没有.`--depth``<n>``<n>``--depth`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:02:21.923

有趣的。我以前没有遇到过这种区别，但是从浏览文档和我自己的经验来看，git 中的提交是一个指向项目历史中特定时间点的对象（以及有关它如何到达那里的信息） . 修订版是它的超集，它讨论了引用提交或一系列提交的不同方式。

# nsdate - NSTimeInterval since1970 to NSDate

> ID：11792541
> 
> 赞同：0
> 
> 时间：2012-08-03T08:59:21.003
> 
> 标签：nsdate, nsdateformatter, nstimeinterval

我有以下代码：

```
-(void)setDate:(double)dateInterval {
    NSDate *date = [NSDate dateWithTimeIntervalSince1970:(NSTimeInterval)dateInterval];
    NSLog(@"NSDate-Result: %@", [date description]);

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterMediumStyle];
    [formatter setTimeStyle:NSDateFormatterMediumStyle];

    [formatter setFormatterBehavior:NSDateFormatterBehavior10_4];
    [formatter setDateFormat:@"YYYY-MM-DD HH:mm:SS"];

    NSString *dateString = [formatter stringFromDate:date];
    NSLog(@"String-Result: %@", dateString);

    date_label.text = dateString;
} 
```

在`NSDate`Date 中是正确的，但转换后的字符串不再正确。

结果：

> 2012-08-03 10:58:40.469 iSkizzenaufmass[4148:c07] NSDate-Result: 2012-08-03 08:08:35 +0000 2012-08-03 10:58:40.471 iSkizzenaufmass[4148:c07] 字符串-结果：2012-08-216 10:08:48

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:02:41.727

您必须使用`yyyy-MM-dd HH:mm:SS`而不是 -DD （DD 是一年中的一天）

编辑：将 YYYY 更改为 yyyy，因为 YYYY 是基于周的年份，并且可能与当前年份不同（有关所有选项，请参见下面的链接）

*   [http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)

# python - Python 导入“从 sys 导入 argvs”给出错误

> ID：11792543
> 
> 赞同：0
> 
> 时间：2012-08-03T08:59:32.337
> 
> 标签：python

我是一个新的 Python 用户，非常感谢一些帮助。我的代码如下：

```
from sys import argvs
script, mum_mood, dad_mood = argvs 
```

我自己的功能

```
def dad_and_mum_mood(mum_mood, dad_mood):
    print "If both mum and dad are in a good mood, all is good."
    print "If one is and one isn't, all is good."
    print "If both are in a bad mood, not so good."
    print "Mum is in a %s mood" % (mum_mood)
    print "Dad is in a %s mood" % (dad_mood)
    print "Where does that leave us?" 
```

?

```
dad_and_mum_mood(mum_mood, dad_mood) 
```

我只是想从s 获取信息（写入命令行），但我得到了`mum_mood`错误。`dad_mood``argv``ImportError: cannot import name argvs`

你知道为什么这不起作用吗？非常感谢你帮助我。

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:01:57.367

你的意思是`from sys import argv`，即`argv`，不是`argvs`吗？查看[`sys`模块文档](http://docs.python.org/library/sys.html)，`argv`是第一个条目。

对于功能强大的命令行参数处理模块，我建议您查看[`argparse`](http://docs.python.org/dev/library/argparse.html)，它是标准库的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T09:02:43.170

如果您在使用 Python 中的某个模块时遇到问题，请使用`dir`和`help`来解决问题：

```
>>> import sys
>>> help(sys)
>>> dir(sys) 
```

您会发现您尝试导入的名称不是`argvs`，而只是`argv`.

# actionscript-3 - AS3 bitmapdata.draw 不添加到显示列表/舞台

> ID：11792546
> 
> 赞同：2
> 
> 时间：2012-08-03T08:59:37.987
> 
> 标签：actionscript-3, bitmapdata

我希望能够将 HTML 文本转换为位图，以便在 AlivePDF 中使用。我的测试适用于 TextArea 或者该组件是否在舞台上或可见。但我希望能够处理不一定位于屏幕上的文本块。有谁知道如何做到这一点？

到目前为止我失败的地方

```
 public static function rasterizeText( text:String, width:int = 100, height:int = 100, x:int = 0, y:int = 0 ):BitmapData {
        var textRenderer:TextArea = new TextArea();
        textRenderer.width = width;
        textRenderer.height = height;
        textRenderer.htmlText = text;

        var bitdata:BitmapData = new BitmapData(width, height, true, 0xFF000000)
        bitdata.draw( textRenderer );
        return bitdata;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:47:43.193

您的代码应该可以正常工作。无需将 textRenderer 添加到舞台即可将其绘制到 BitmapData 中。您正在将 textRenderer 绘制到纯黑色背景上。也许您的文字也是黑色的，这就是为什么您看不到它？

尝试将 0xFF000000 更改为例如 0xFFFF0000 并查看文本是否会显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:13:48.627

不，这不是颜色问题。此外，我将颜色设置为 FF000000，至少应该显示为黑色。TextArea 似乎不能很好地处理位图，尽管 TextField 工作得非常好。

编辑：我猜 TextArea 不能作为 spark 或 mx 工作，因为它们是 FlexSprite 的东西，它的行为与普通的 AS3 Sprite 不同。它们将延迟渲染，直到它们被添加到显示列表中。

工作功能：

```
public function rasterizeText( text:String,
        width:int = 100, height:int = 100 ):BitmapData {
    var tf:TextField = new TextField();
    tf.multiline = true;
    tf.wordWrap = true;
    tf.width = width;
    tf.height = height;
    tf.htmlText = text;
    var bd:BitmapData = new BitmapData(width, height, true,0x00000000);
    bd.draw(tf);
    return bd;
} 
```

这不起作用（我尝试了 mx & spark textarea 组件）：

```
public function rasterizeText( text:String,
        width:int = 100, height:int = 100 ):BitmapData {
    var textRenderer:TextArea = new TextArea();
    textRenderer.width = width;
    textRenderer.height = height;
    textRenderer.textFlow = TextConverter.importToFlow( text, TextConverter.TEXT_FIELD_HTML_FORMAT );
    var bitdata:BitmapData = new BitmapData( width, height, false, 0xFF000000 )
    bitdata.draw( textRenderer );
    return bitdata;
} 
```

但是，从舞台绘制时它会起作用：

```
public function rasterizeText( text:String,
        width:int = 100, height:int = 100 ):BitmapData {
    var textRenderer:TextArea = new TextArea();
    textRenderer.width = width;
    textRenderer.height = height;
    textRenderer.textFlow = TextConverter.importToFlow( text, TextConverter.TEXT_FIELD_HTML_FORMAT );
    canvas.addElement( textRenderer );
    var bitdata:BitmapData = new BitmapData( width, height, false, 0xFF000000 )
    bitdata.draw( canvas );
    return bitdata;
} 
```

# javascript - Javascript 中的数组值中不允许回车？

> ID：11792549
> 
> 赞同：0
> 
> 时间：2012-08-03T08:59:52.877
> 
> 标签：javascript, arrays, carriage-return

我对 JavaScript 中的数组有疑问。我真的找不到答案。也许我看起来更努力，我确实看起来足够努力。或者我在用作参考的书中错过了它。

我有一个数组并试图推入引号。

```
 var quotes =[];
    quotes.push("It has become appallingly obvious that our technology has exceeded 
    our humanity - Albert Einstein") /*i placed it on the second line to make 
                                       it more readable*/ 
```

这给了我一个错误。它没有说明这是什么错误。我快要疯了，想这会是什么？我的意思是，我在这两行代码中可能缺少什么。

然后我将它们全部放在同一行并猜猜是什么，是的，不再有错误。=_=

有人可以告诉我为什么吗？还是我在这里错过了显而易见的事情。

任何回应表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:02:23.923

尝试：

```
var quotes =[];
quotes.push("It has become appallingly obvious that our technology has exceeded \
    our humanity - Albert Einstein"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:01:46.543

字符串中不能有换行符。首先结束字符串并将其与新字符串连接，如下所示；

```
quotes.push("It has become appallingly obvious that our technology has exceeded "
    + "our humanity - Albert Einstein"); 
```

如果您实际上希望换行符成为字符串的一部分，请`"\n"`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:02:15.263

```
quotes.push("It has become appallingly obvious that our technology has exceeded " +
    "our humanity - Albert Einstein"); 
```

那行得通；我还在你的行尾添加了一个分号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:04:00.583

```
var quotes =[];
quotes.push("It has become appallingly obvious that our technology has exceeded \
our humanity - Albert Einstein"); 
```

请注意第`\`2 行末尾的 。
这就是您使用多种语言编写多行字符串的方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T09:09:53.673

是的，单行会起作用，因为正如您正确指出的那样，回车不起作用。也就是说，在 Javascript 中，回车被认为是编程语句的结尾。

# php - 不同浏览器中的不同数学计算

> ID：11792558
> 
> 赞同：0
> 
> 时间：2012-08-03T09:00:50.340
> 
> 标签：php, jquery, session, firefox, google-chrome

我为我的一位客户创建了折扣功能。无论何时，将选定的优惠券输入优惠券字段，然后它将从数据库中匹配优惠券是否处于活动状态并且是否存在？如果是，那么它会进行一些数学计算，给予用户 10% 的折扣，并向用户显示折扣金额。它在 Chrome 中运行良好，但是当我在 Firefox 中测试相同的功能时，它的行为很奇怪。它给了我大约 20%、50% 的折扣。像一些随机数学计算。

我正在使用 jquery、php、mysql 向客户实时显示结果。这个问题真的是在逗我。最初，我使用 PHP 会话来获取折扣值，但我尝试将折扣值存储在 db 中，然后再次检索它进行计算。但同样的问题也会发生。在这一点上我很困惑。

这是jquery代码：

```
<script type="text/javascript">
$(document).ready(function(){
 $("button").click(function(){
    $.post('coupapply.php', {coup:$('#coupon').val()}, function(result) {
    });
    $.post('discount.php', {disc:$('#totamt tr').find("td").eq(1).html()}, function(result) {
    $('#cpresult').html(result);
    });
 });
});
</script>
<span id='cpresult'></span> 
```

这是php代码：

```
<?

if ($_REQUEST) {
$disc = $_REQUEST['disc'];
$amt = substr($disc, 1);
$caldisc = $amt*0.1;
$total = (200-$caldisc);
echo "<spain style='font-size:14px;'>*10% discount applied* Pay ".$total." now!</span>";
}
?> 
```

让我解释一下这段代码。我使用两个 $post 函数的原因是因为我从当前页面获得了两个值。一个是设置为“coup”的优惠券代码，一个是设置为“disc”的总计算金额。然后两个值都处理到不同的 php 页面并打印结果。我认为问题不在于 PHP 代码。问题在于我的 jquery 代码。我尝试在 php 代码中使用一些常量值来进行 200-100 之类的计算，并且效果很好。但是'disc'变量的值正在产生影响。

问题解决了：实际上发生了什么，我已经包含了这样一个 200 美元的空间

这个空间在 Firefox 浏览器中造成了所有问题。所以，我最初使用 substr() 是从位置 1 断开字符串，但现在。我更改了中断位置并将其设置为 2，现在一切都很好。顺便说一句，谢谢你们的帮助：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:03:21.877

PHP 是一种服务器端语言。向服务器发送请求，服务器运行 PHP 代码。这意味着无论您使用什么浏览器，您的 PHP 代码都无法返回不同的结果。您的 MySQL 数据库也是如此。知道了这一点，我们就可以确定问题所在。

问题出在您的 HTML 或 javascript (jQuery) 中。没有代码，我们不知道在哪里。

* * *

阅读您的编辑后：

> 我试图将折扣值存储在 db 中，然后再次检索它进行计算。但同样的问题也会发生。

当您处理响应时，听起来好像出了点问题。如果您临时更改 PHP 代码使其始终返回静态值，而浏览器仍然给出不同的结果，您就知道是您的 javascript 错误地解释了这些值。

如果不是，我们知道浏览器发送的数据是不同的。在这两种情况下，错误很可能在您的 javascript 中。

这是您通过这些小信息可以获得的最佳答案。

# git - 如何从一个 Github 仓库拉取到多个本地仓库？

> ID：11792559
> 
> 赞同：2
> 
> 时间：2012-08-03T09:00:51.647
> 
> 标签：git, github, pull

我有一个 WordPress 父主题和多个使用它的 WordPress 网站（都在同一个文件系统上）。那么如何使用 Git 确保父主题的每个实例都与 Github 上的版本同步？无需单独拉取每个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:19:29.307

您已经询问了如何在无需单独拉取每个实例的情况下使多个本地存储库克隆保持最新。Carl-Eric 已经解决了如何在文件系统上有效地*存储*多个存储库。以下是一些关于使它们保持最新的建议：

一种解决方案是在其中一个存储库中设置一个`post-merge`钩子，以遍历其他存储库并执行`pull`操作：

```
#!/bin/sh

unset GIT_DIR
for repo in /path/to/repo1 /path/to/repo2; do
   ( cd $repo && git pull)
done 
```

该`post-merge`脚本在操作后`git pull`运行。

话虽如此，最简单的选择是拥有存储库的单个克隆，然后从其他位置符号链接到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:08:03.133

首先，您将 github 存储库克隆一次到您的本地计算机。

然后您可以通过两种方式继续：

*   您可以简单地对该克隆进行本地深层复制。所有设置都是相同的，副本都将`origin`远程指向 github。但是，您会浪费一些磁盘空间，因为所有副本显然都包含整个存储库。
*   或者，为了节省磁盘空间，您可以根据需要经常克隆该本地存储库。Git 将尝试通过硬链接尽可能多地重用存储库对象。在这种情况下，您可能需要调整您正在使用的遥控器，因为`origin`默认情况下将指向本地存储库，而不是 Github。

# iphone - UIview 的特定矩形可以有不同的 alpha 吗？

> ID：11792563
> 
> 赞同：9
> 
> 时间：2012-08-03T09:01:08.770
> 
> 标签：iphone, objective-c, ios, cgrect

我不想要一个在其他部分是半透明而在中间完全透明的图像视图.. 看这张图片.. ![在此处输入图像描述](../Images/bc071552aa9218d053894ccda0827a4c.png)

我已经做到了，但这不是最好的方法..我只能在黄线内有一个透明的矩形吗...？

**编辑**：是否可以更改视图的某个矩形的 alpha ..？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-01T11:17:32.480

将自定义 UIView 放置在显示图像、大小和位置的视图上以完全重叠。在自定义视图的 drawRect 方法中

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    CGRect rBounds = self.bounds;

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Fill background with 80% white
    CGContextSetFillColorWithColor(context, [[[UIColor whiteColor] colorWithAlphaComponent:0.8] CGColor]);
    CGContextFillRect(context, rBounds);

    // Draw the window 'frame'
    CGContextSetStrokeColorWithColor(context, [[UIColor orangeColor] CGColor]);
    CGContextSetLineWidth(context, 10);
    CGContextStrokeRect(context, self.maskRect);

    // make the window transparent
    CGContextSetBlendMode(context, kCGBlendModeClear);
    CGContextFillRect(context, self.maskRect);
} 
```

其中 maskRect 是要显示为透明的矩形。确保自定义视图的背景颜色设置为“clearColor”

您可以编写更改 maskRect 所需的任何附加逻辑并在此视图上调用“setNeedsDisplay”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:58:26.930

经过大量的努力，我找到了解决方案。

这是它的代码！

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    [screenShotButton setHidden:YES];
    UITouch *touch = [touches anyObject];
    CGPoint pnt =[touch locationInView:self.view];
    CGRect viewFrame=changeView.frame;
    CGFloat x1Diff,y1Diff,x2Diff,y2Diff;
    x1Diff=ABS(viewFrame.origin.x-pnt.x);
    y1Diff=ABS(viewFrame.origin.y-pnt.y);
    x2Diff=ABS(viewFrame.origin.x+viewFrame.size.width-pnt.x);
    y2Diff=ABS(viewFrame.origin.y+viewFrame.size.height-pnt.y);
    if (x1Diff<=10) {
        left=YES;
        shouldExpand=YES;
    }
    if (y1Diff<10) {
        top=YES;
        shouldExpand=YES;
    }
    if (x2Diff<=10) {
        right=YES;
        shouldExpand=YES;
    }
    if (y2Diff<=10) {
        bottom=YES;
        shouldExpand=YES;
    }

    if(CGRectContainsPoint(changeView.frame, pnt))
    {
        shouldChange=YES;
        fromPoint=pnt;
    }
    else
    {
        shouldChange=NO;
    }

}
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    if (!shouldChange) {
        return;
    }

    if (shouldExpand)
    {
        UITouch *touch = [touches anyObject];
        CGPoint pnt =[touch locationInView:self.view];
        CGRect preFram =changeView.frame;
        CGRect modifiedFrame=preFram;
        if (left) {
            modifiedFrame.origin.x=preFram.origin.x-(fromPoint.x-pnt.x);            
            modifiedFrame.size.width=preFram.size.width+fromPoint.x-pnt.x;
            fromPoint.x=pnt.x;
        }
        if (right) {
            modifiedFrame.size.width=preFram.size.width+pnt.x-fromPoint.x;
            fromPoint.x=pnt.x;

        }
        if (top) {
            modifiedFrame.origin.y=preFram.origin.y-(fromPoint.y-pnt.y);
            modifiedFrame.size.height=preFram.size.height+fromPoint.y-pnt.y;
            fromPoint.y=pnt.y;
        }
        if (bottom) {
            modifiedFrame.size.height=preFram.size.height+pnt.y-fromPoint.y;
            fromPoint.y=pnt.y;
        }
        changeView.frame=modifiedFrame;
        [clearImage setBounds:CGRectMake(0-modifiedFrame.origin.x, 0-modifiedFrame.origin.y, clearImage.frame.size.width, clearImage.frame.size.height)];

    }
    else
    {
        UITouch *touch = [touches anyObject];
        CGPoint pnt =[touch locationInView:self.view];
        changeView.center=CGPointMake(changeView.center.x-fromPoint.x+pnt.x, changeView.center.y-fromPoint.y+pnt.y);
        [clearImage setBounds:CGRectMake(0-changeView.frame.origin.x, 0-changeView.frame.origin.y, clearImage.frame.size.width, clearImage.frame.size.height)];
        fromPoint=pnt;
    }

}
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [screenShotButton setHidden:NO];
    left=top=right=bottom=NO;
    shouldExpand=NO;
    fromPoint=CGPointZero;
    toPoint=CGPointZero;
    shouldChange=NO;
}

- (IBAction)takeScreenShot:(id)sender
{
    [screenShotButton setHidden:YES];
    UIGraphicsBeginImageContext(self.view.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextScaleCTM(context, 1.0, 1.0);
    [self.view.layer renderInContext:context];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filePath = [NSString stringWithFormat:@"%@/1.png",docPath];
    CGRect cutRect = changeView.frame;
    CGImageRef imgRef = CGImageCreateWithImageInRect([img CGImage], cutRect);
    CFURLRef url = (__bridge CFURLRef)[NSURL fileURLWithPath:filePath];
    CGImageDestinationRef destination = CGImageDestinationCreateWithURL(url, kUTTypePNG, 1, NULL);
    CGImageDestinationAddImage(destination, imgRef, nil);
    CFRelease(imgRef);

    if (!CGImageDestinationFinalize(destination)) {
        NSLog(@"Failed to write image to %@", filePath);
    }
    img=nil;
    imgRef=nil;
    CFRelease(destination);
    [screenShotButton setHidden:NO];
    [changeView setHidden:NO];
} 
```

只是，这里的逻辑很重要！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T08:06:10.300

你为什么不这样做：

1.  创建一个 imageview 设置它的 alpha 使其半透明
2.  然后只需裁剪您想要完全透明的图像部分并创建一个 alpha = 1 的新图像视图，并将裁剪后的图像设置为仅在半透明图像视图上方:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:35:16.020

**一个简单的方法**

```
 1:Create a image in photoshop with the alpha values which you have specified.
   2:Place the new imageview  over your image .
   3:If you want to move the transparent box ,change the image frame.
   4:If you want to expand you just change the size of upper image. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T10:02:48.660

我想你可以使用 CGContext

```
void CGContextDrawRadialGradient(
  CGContextRef context,
  CGGradientRef gradient,
  CGPoint startCenter,
  CGFloat startRadius,
  CGPoint endCenter,
  CGFloat endRadius,
  CGGradientDrawingOptions options
); 
```

请参阅下面的链接[CGContext 参考](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/c/func/CGContextDrawRadialGradient) 或[CGGradient 参考](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGradient/Reference/reference.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T12:55:30.507

![ss](../Images/ad0c48ebc26f76903fc8862c84f802d4.png)

我认为您也许可以更改所选矩形的外部。至于下图，你应该 4 个矩形的 4 个 alpha。例如，首先您设置白色窗口背景颜色，然后将 4 个 alpas 矩形设置为 0.5。

我认为您最好使用 CALayer 而不是 UIView。

我希望我的建议对你有所帮助。

# unit-testing - 保持通过单元测试有什么意义？

> ID：11792564
> 
> 赞同：2
> 
> 时间：2012-08-03T09:01:14.757
> 
> 标签：unit-testing, tdd

假设我正在开发一种方法，我可以传入两个数字并取回最大的数字。由于我正在做这种 TDD 风格，我将进行十几个单元测试并提出以下实现：

```
public int GetHighestNumber(int x, int y)
{
    if (x > y) return x;
    else return y;
} 
```

这非常有效。

测试已用于创建实现。实现完成后，保持这些单元测试有什么意义？这就像在房子已经交付后在房子周围保留脚手架一样。

我不是在寻找进行单元测试的理由，或者是否/何时使用 TDD。我只是好奇为什么在代码完全实现后应该保留单元测试，而不是将这些测试作为临时手段并在不需要支持开发人员时将其删除。

* * *

**编辑**

在对*CodeGnome*发表评论后，我意识到我应该强调这只是关于 TDD 测试，它的创建主要是为了将开发人员指向正确的方向。可以说是脚手架。

不过，我确实很欣赏所有的评论。

* * *

在阅读了所有的消息后，我可以总结出两件事：

1.  stackoverflow 上没有人真正阅读原始问题
2.  你应该保留这些单元测试，不是因为测试本身有任何用处，而是因为你可能正在与非常不称职的同事一起工作，而这些测试是为了防止他们做难以置信的愚蠢事情

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T09:06:21.963

Real life code is almost never "finished".

Requirements change and expand. Features are added. Despite TDD, there are bugs to be fixed.

Unit tests also work as regression tests, to prove that the code still works after these changes. This is in fact the most valuable aspect of unit tests (any TDD proponent who claims that it's less important that the design benefits is deluding themselves).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T09:06:47.223

我想到了几个原因（至少）：

*   他们帮助记录您的代码应该/不应该做什么
*   推论：它们为未来的开发人员提供了您方法的示例用法
*   如果您想在以后更改方法，它们充当回归测试：您可以检查更改后原始测试是否仍然通过，并且您没有破坏任何东西

**编辑**

*“不会对该方法进行任何更改，并且不需要在该级别进行回归测试”*

直到某个聪明人到来并将代码更改为

```
if (x - y > 0) return x;
else return y; 
```

（是的，它可以而且将会发生，如果不是用那种方法，在其他地方）。

希望您的测试之一是：

```
assertEquals(Integer.MAX_VALUE, GetHighestNumber(Integer.MIN_VALUE, Integer.MAX_VALUE)); 
```

并且该测试将失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T09:11:30.430

### 测试防止回归

正确实施的单元测试可验证程序行为。“遗留”测试确保当您扩展或修改程序时，您不会意外引入新的错误或在代码中创建回归。

如果随着代码的发展，测试不再具有明确的目的，那么测试当然可以与代码一起重构。但是，如果一个特性一开始就值得测试，那么在代码的整个生命周期中继续测试该行为仍然很有用。

如果你发现你的单元测试包含很多“无用”的测试，你可能正在测试错误的东西（例如组合而不是行为），或者可能只是需要重构你的测试以防止测试随着时间的推移变得陈旧。我当然不会建议完全删除它们，因为它们是*完整性检查*，而不仅仅是遗留的脚手架。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:49:07.523

[回归，回归，百万次回归。](http://en.wikipedia.org/wiki/Software_regression)

想象一下在实现功能后没有测试的假设情况：

1.  您为您的应用程序实现了每月报告功能。例如，假设它从数据库中提取实体，扫描它们的定义并创建适当的表。
2.  您发布了报告功能，您的客户很高兴这一切都可以正常工作并按照他的意愿创建漂亮的闪亮表格。
3.  一段时间后，您的朋友在数据访问层上做了一些内部工作。他更改了一些实体定义以优化数据库内容。
4.  你把它作为重要的*补丁*发布。客户再次高兴，您的应用程序现在似乎运行得更快了。
5.  几天后，您接到恼怒的客户打来的电话，声称报告产生了一些垃圾。

谁该受责备？当然是你。发生了什么？您的代码停止工作。也许它根本没有用？也许它在一种特殊情况下有效？抛开这些愚蠢的问题，每个人都知道到底发生了什么；实体代码中的更改*破坏了*报告生成功能。你的朋友造成了问题，你承担责任。

这就是你有自动化测试的原因（不仅仅是*单元*自然）。防止**倒退**。手动发现由回归引起的错误非常困难。它们可能会在更改后立即出现，稍后会出现，稍后会出现其他更改。你永远不会知道。这就是单元测试（以及其他测试方法）提供帮助的地方。从上面的假设情况来看，如果他运行测试，您的朋友会知道他破坏了您的报告生成器代码。就那么简单。

[这个programs.SE问题](https://softwareengineering.stackexchange.com/questions/158052/are-unit-tests-really-that-useful)的评论很少：

> 大学将单元测试暴露为您出于纯粹的信念必须做的事情，而没有详细解释**有一种疾病需要预防和控制，并且这种疾病称为*回归***。
> 
> 单元测试并不能证明您的代码没有缺陷，但它们确实提高了您的信心（或应该......）代码按照您设计的方式执行，并且明天继续执行今天的任务。

每当您开始怀疑自己是否真的需要所有这些测试时，请记住一些事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T10:01:15.977

使用上面的代码，您可以进行以下测试：

*   X 大于 Y，X 返回。
*   Y大于X，返回Y。
*   X 等于 Y，返回 Y。

因此，三个简短、快速运行的测试记录了该方法的预期行为并强制执行。（保留它们的两个很好的理由）。

现在，如果您的测试数量明显多于上述三个测试，那么您可以开始减少测试数量。像所有代码一样，它应该在不需要时进行重构和删除，但请确保您只删除不需要的部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-05T00:28:22.480

测试应该作为模块的文档为您的团队服务。它们向读者展示了进入值和预期退出值的示例。他们应该明确指示下一个人如何调用例程。

我在上面的很多评论中注意到，您对下一个程序员会出现很多假设，他会很聪明且能干，他会仔细阅读您的代码，他会信任您的方法名称。做出这些假设是危险的。也许今天不在你的老板手下，但很可能在某个时候你的代码将由比你当前假设所表明的能力差的人维护。

可以这样想：如果你的代码是开源的，突然数百名不同水平的人都在看它，他们都会理解吗？可能不是。

对模块的作者来说显而易见的东西对其他人来说通常并不那么明显。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T09:49:36.017

TDD 越相关，项目必须扩展的规模就越大。

在处理大型复杂项目时，各个级别的代码部分之间存在许多依赖关系。对某一点的错误修复可以通过自动化测试立即发现其他部分的新错误。

一旦你在这样一个大项目中获得经验，你就会看到它的价值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T09:15:25.943

TDD 摇滚。您正确的 TDD 有助于设计。因此，没有失败的测试在编写代码后几乎没有价值，或者没有价值。然而，它们的存在确实提供了一种安全带的感觉，以鼓励重构。但是，如果您的代码遵循开放/封闭原则，那么一旦编写代码，测试可能会被认为不再有用。

我遵循的规则是，如果原始设计成立并且我正在对需求进行微小的更改（例如构建带有小写前缀的字符串），那么测试确实有帮助，它们避免了回归。但是，如果我意识到该类的设计或意图是完全错误的，那么单元测试可能会阻碍更改（更改不等于重构）。

困难的部分是从需求的变化中识别意图的变化。

像往常一样，没有非黑即白的答案。

# sql - 使用来自不同数据库的不同表删除记录

> ID：11792565
> 
> 赞同：0
> 
> 时间：2012-08-03T09:01:16.307
> 
> 标签：sql, database, sqlite

这是我使用的代码：

```
DELETE FROM db1.table1 
WHERE db1.table1.Timestamp = db2.table2.Timestamp; 
```

根本无法准备陈述。这让我疯狂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:06:20.000

Try this

```
DELETE from db1.table1 WHERE 
db1.table1.Timestamp IN( SELECT Timestamp FROM db2.table2) ; 
```

It will delete all matching records from `db1.table1` with `db2.table2`

# iphone - 如何使用 UIStoryboard segues 将数据从一个视图传递到 IOS 中的另一个视图？

> ID：11792567
> 
> 赞同：1
> 
> 时间：2012-08-03T09:01:20.990
> 
> 标签：iphone, ios, ios5, uistoryboard, shake

我正在使用**Xcode 4.3.1**。我使用具有许多视图控制器的 Storyboard 创建了 UI。

**问题**

在我的应用程序中，我使用的是 ShakeGesture。虽然摇晃我正在做一些操作，但它工作正常。但是，当摇晃停止时，我需要将一些值传递给另一个视图控制器以显示它。我看过很多帖子说如何在单击按钮时传递值，但没有一个与我的问题有关。

如果能解决我的问题就好了

**我的问题是**

摇动停止后如何将值从一个视图传递到另一个视图控制器？

我正在寻找任何示例或教程。非常感激。

上述问题的确切功能

我在**第一个视图控制器中有一个按钮**

![在此处输入图像描述](../Images/5cb80e91844da13dd68d12b25451e040.png)

当按钮触发时，它将弹出带有一些数据的pickerview。当用户选择它时，选择器值将替换按钮值。

![在此处输入图像描述](../Images/b343e6a4cbe8979440d296c6b7499151.png)

然后当它停止时发生抖动我必须将数据传递给其他视图控制器。

**代码**

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {
if (event.subtype == UIEventSubtypeMotionShake)
{
        // I need to pass data here. Thats i am confusing

} 
```

}

之前有人问过这个问题，但我无法得到解决方案，这就是我再次问的原因。为此道歉。谢谢你们的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:33:40.180

您可以在使用 prepareForSegue 调用的情节提要中显式传递数据。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([[segue identifier] isEqualToString:@"ContactsViewControllerSegue"]){
        ContactsViewController *cvc = (ContactsViewController *)[segue destinationViewController];
        cvc.contacts = self.contacts;
        cvc.delegate = self;
    }
} 
```

如需完整教程，请查看此[网站](http://photoplyr.wordpress.com/2011/10/21/ios-5-storyboard-how-to-use-segues-scenes-and-static-content-uitableviews/)。

要以编程方式触发 segue，您可以查看[Apple Docs](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/UsingViewControllersinYourApplication/UsingViewControllersinYourApplication.html)，但这是他们关于方向更改的示例。

```
- (void)orientationChanged:(NSNotification *)notification
{
    UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
    if (UIDeviceOrientationIsLandscape(deviceOrientation) &&
        !isShowingLandscapeView)
    {
        [self performSegueWithIdentifier:@"DisplayAlternateView" sender:self];
        isShowingLandscapeView = YES;
    }
// remainder of example omitted....
} 
```

所以你会在摇动停止时触发segue，然后在prepareForSegue方法中准备下一个viewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:27:01.987

您需要在 SecondViewController 中创建字符串对象并设置 Property(nonatomic,retain) 并对其进行合成，然后在推送控制器时添加以下代码。

```
SecondViewController *objSecondViewController=[[SecondViewController alloc] 
initWithNibName:@"SecondViewController" bundle:nil];             

objSecondViewController.strtitle=@"Your data";
[self.navigationController pushViewController:objSecondViewController animated:YES];
[objSecondViewController release]; 
```

# c - 紧跟 exec 时的克隆、fork、vfork 行为

> ID：11792568
> 
> 赞同：2
> 
> 时间：2012-08-03T09:01:22.613
> 
> 标签：c, multithreading, process, fork, system-calls

我很好奇从设置了大多数标志的进程调用 clone 的行为（以便两个进程共享一个执行上下文，即共享地址空间、文件描述符 talbe 等）。我无法使用在线材料完全回答我的问题。

现在假设我从克隆的进程中调用 execve。这会将进程的映像替换为全新的映像，破坏附加的内存段，丢弃分配的内存等，但是父进程会发生什么？给定这些共享（例如，所有分配的内存区域），它们是否也会被释放？

新的 execved 进程是否仍与父进程共享地址空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:29:52.147

共享对象未映射或未链接，但从共享的角度来看。

假设您有 3 个进程/线程，它们都从 0x1000 开始共享内存。

其中一个执行 execve。然后它将`shm_unlink(2)`在 0x1000 上执行一次。 `shm_unlink(2)`会尝试的`unlink(2)`。

现在对于使用该内存范围的每个进程/线程都有一个计数器。在我们的例子中，计数器在 之前设置为 3，之后`execve(2)`将设置为 2。没有失忆。

正如您所说，当没有进程不再使用它时，内存将被“销毁”。当计数器为 0 时。

所有共享对象也是如此。有关调用哪些系统调用以及它们如何“破坏”共享对象的列表，请查看`execve(2)` [手册页](http://linux.die.net/man/2/execve)中的链接。搜索这个短语：

```
All process attributes are preserved during an execve(), except the following 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:06:57.303

父进程不受 execve 影响。毕竟这是一个不同的过程。进程总是必须使用一些显式的方法进行通信（文件、管道、IPC，如共享内存、信号……）。由于所有这些都在执行 exec 的子进程中被破坏，因此在再次明确设置之前无法进行通信。

# windows - 用于将 rtf 文件批量转换为 pdf 的 windows 脚本

> ID：11792574
> 
> 赞同：0
> 
> 时间：2012-08-03T09:01:45.633
> 
> 标签：windows, batch-file

我有大约 100 个`.rtf`文件，我需要将其转换为`pdf`具有相同名称的文件。

我使用可爱的pdf打印机/插件并打印文件/将其保存为pdf。

是否有自动化的方法或命令行方法？

任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:09:24.627

如果您安装了 Office 2007 或 2010（可以本地导出为 PDF），您甚至不必通过打印机（尽管这也应该可以）。有很多关于如何使用 PowerShell 自动转换为 PDF 的示例：

*   [用于将 Word 文档转换为 PDF 格式的 Powershell 脚本](http://dougfernando.blogspot.de/2009/06/powershell-script-for-converting-word.html)
*   [嘿，脚本专家！如何将 Word 文件转换为 PDF 文件？](http://blogs.technet.com/b/heyscriptingguy/archive/2008/11/12/how-can-i-convert-word-files-to-pdf-files.aspx)

（是的，他们将 Word 文档转换为 PDF，但 RTF 的过程应该完全相同，它与 Word 文件格式具有相同的功能）。

# eclipse - 在 Windows 7 上安装 scion-browser 时出错

> ID：11792586
> 
> 赞同：1
> 
> 时间：2012-08-03T09:02:25.387
> 
> 标签：eclipse, haskell, windows-7

我在安装 scion-browser 时遇到了一些问题：

> c:>cabal install scion-browser
> Resolving dependencies...
> 配置 scion-browser-0.2.9...
> 警告：这个包间接依赖于同一个
> 包的多个版本。这极有可能导致编译失败。
> 包persistent-sqlite-0.9.0.2 需要conduit-0.4.2
> 包persistent-0.9.0.4 需要conduit-0.4.2
> 包scion-browser-0.2.9 需要conduit-0.4.2
> 包persistent-0.9.0.4 需要conduit-0.4 .2
> 包 persistent-sqlite-0.9.0.2 需要 persistent-0.9.0.4
> 包 scion-browser-0.2.9 需要persistent-
> 0.9.0.4 包persistent-template-0.9.0.2 需要persistent-0.9.0.4
> 包persistent-0.9.0.4 需要pool-conduit-0.1.0.2
> 包persistent-0.9.0.4 需要pool-conduit-0.1.0.2
> 包pool-conduit-0.1.0.2 需要resource-pool-0.2.1.0
> 包pool-conduit-0.1 .0.2 需要resource-pool-0.2.1.0
> 包resource-pool-0.2.1.0 需要stm-2.3
> 包resource-pool-0.2.1.0 需要stm-2.4
> 包conduit-0.4.2 需要void-0.5.6
> 包conduit-0.4 .2 需要 void-0.5.7
> 构建 scion-browser-0.2.9...
> 为 scion-browser-0.2.9... 预处理可执行文件“scion-browser”...
> ：不能满足 -package-id 管道 0.4.2- c025272176b9b270983e467
> 261997051：
> 管道 0.4.2-c025272176b9b270983e467261997051 被包 condui
> t-0.4.2-0f5630d0055300f13b0cabee16d6043f 遮蔽
> （使用 -v 获取更多信息）
> cabal：错误：某些软件包安装失败：
> scion-browser-0.2.9 在构建阶段失败。例外是：
> ExitFailure 1

尝试从 Eclipse 弹出窗口安装 scion-browser 会出现以下错误：

> src\Scion\PersistentBrowser\Build.hs:43:1：
> 警告：已定义但未使用：`ghcDbUrl'<br/> [18 of 23] Compiling Scion.PersistentBrowser ( src\Scion\PersistentBrowser.hs, dist\build>scion-browser\scion-browser-tmp\Scion\PersistentBrowser.o )<br/> [19 of 23] Compiling Scion.PersistentHoogle.Instances.Json ( src\Scion\PersistentHoogle\Instances\Json.hs, dist\build\scion-browser\scion-browser-tmp\Scion\PersistentHoogle\Instances\Json.o )<br/> [20 of 23] Compiling Scion.PersistentHoogle ( src\Scion\PersistentHoogle.hs, dist\build\scion-browser\scion-browser-tmp\Scion\PersistentHoogle.o )<br/> [21 of 23] Compiling Paths_scion_browser ( dist\build\autogen\Paths_scion_browser.hs, dist\build\scion-browser\scion-browser-tmp\Paths_scion_browser.o )<br/> [22 of 23] Compiling Server.PersistentCommands ( src\Server\PersistentCommands.hs, dist\build\scion-browser\scion-browser-tmp\Server\PersistentCommands.o )<br/> [23 of 23] Compiling Main ( src\Main.hs, dist\build\scion-browser\scion-browser-tmp\Main.o )<br/> <br/> src\Main.hs:31:24:<br/> No instance for (MonadException BrowserM)<br/> arising from a use of`getInputLine'
> 可能的修复：
> 为 (MonadException BrowserM) 添加实例声明
> 在“do”块的 stmt 中：maybeLine <- getInputLine" "
> 在表达式中：
> do { maybeLine <- getInputLine "";
> case maybeLine of {
> Nothing -> return ()
> Just line -> do { ... } } }
> 在 `loop' 的等式中：
> loop
> = do { maybeLine <- getInputLine "";
> case 也许Line of {
> Nothing -> return ()
> 只需行 -> ... } }
> cabal.exe：错误：某些软件包无法安装：
> scion-browser-0.2.9 在构建阶段失败。例外是：
> ExitFailure 1

[安装 scion-browser 时出错](https://stackoverflow.com/questions/11617335/error-installing-scion-browser) 建议运行：cabal install --constraint="haskeline < 0.7" scion-browser

但我得到与第一个相同的错误。

> c:>cabal install --constraint="haskeline < 0.7" scion-browser
> Resolving dependencies...
> 配置 scion-browser-0.2.9...
> 警告：这个包间接依赖于同一个
> 包的多个版本。这极有可能导致编译失败。
> 包persistent-sqlite-0.9.0.2 需要conduit-0.4.2
> 包persistent-0.9.0.4 需要conduit-0.4.2
> 包scion-browser-0.2.9 需要conduit-0.4.2
> 包persistent-0.9.0.4 需要conduit-0.4 .2
> 包 persistent-sqlite-0.9.0.2 需要 persistent-0.9.0.4
> 包 scion-browser-0.2.9 需要persistent-
> 0.9.0.4 包persistent-template-0.9.0.2 需要persistent-0.9.0.4
> 包persistent-0.9.0.4 需要pool-conduit-0.1.0.2
> 包persistent-0.9.0.4 需要pool-conduit-0.1.0.2
> 包pool-conduit-0.1.0.2 需要resource-pool-0.2.1.0
> 包pool-conduit-0.1 .0.2 需要resource-pool-0.2.1.0
> 包resource-pool-0.2.1.0 需要stm-2.3
> 包resource-pool-0.2.1.0 需要stm-2.4
> 包conduit-0.4.2 需要void-0.5.6
> 包conduit-0.4 .2 需要 void-0.5.7
> 构建 scion-browser-0.2.9...
> 为 scion-browser-0.2.9... 预处理可执行文件“scion-browser”...
> ：不能满足 -package-id 管道 0.4.2- c025272176b9b270983e467
> 261997051：
> 管道 0.4.2-c025272176b9b270983e467261997051 被包 condui
> t-0.4.2-0f5630d0055300f13b0cabee16d6043f 遮蔽
> （使用 -v 获取更多信息）
> cabal：错误：某些软件包安装失败：
> scion-browser-0.2.9 在构建阶段失败。例外是：
> ExitFailure 1

我在 Windows 7 64 位机器上安装了 HaskellPlatform-2012.2.0.0-setup 和 Eclipse 4.2。我也已经按照他们网站上的 Yesod 安装说明进行操作。

谢谢
丹尼尔

# java - @OneToMany 表关系中的冗余行数据或实体

> ID：11792587
> 
> 赞同：0
> 
> 时间：2012-08-03T09:02:25.473
> 
> 标签：java, jpa, orm, one-to-many, jpql

我在 NEWSGROUP 表中得到了多余的行。如何更改实体或查询以防止这种情况发生？

架构：

```
mysql> 
mysql> USE usenet;SHOW TABLES;DESCRIBE ARTICLE;DESCRIBE NEWSGROUP;
Database changed
+------------------+
| Tables_in_usenet |
+------------------+
| ARTICLE          |
| NEWSGROUP        |
+------------------+
2 rows in set (0.00 sec)

+---------------+------------+------+-----+---------+----------------+
| Field         | Type       | Null | Key | Default | Extra          |
+---------------+------------+------+-----+---------+----------------+
| ID            | bigint(20) | NO   | PRI | NULL    | auto_increment |
| MESSAGENUMBER | int(11)    | YES  |     | NULL    |                |
| NEWSGROUP_ID  | bigint(20) | YES  | MUL | NULL    |                |
+---------------+------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| ID        | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| NEWSGROUP | varchar(255) | YES  |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> 
```

假设与数据库的单个连接暂时保持解决方案简单，虽然我确实[看到这是一个复杂的主题](https://stackoverflow.com/questions/3495368/unique-constraint-with-jpa-and-bean-validation)，但假设有一个简单的方法假设“正确”的条件。

文章实体：

```
 package net.bounceme.dur.usenet.model;

    import java.io.Serializable;
    import java.util.ArrayList;
    import java.util.List;
    import java.util.Set;
    import javax.mail.Folder;
    import javax.mail.Message;
    import javax.persistence.*;

    @Entity
    public class Article implements Serializable {

        private static final long serialVersionUID = 1L;
        @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        private Long id;
        @Column
        private int messageNumber;
        @ManyToOne(cascade = CascadeType.PERSIST)
        private Newsgroup newsgroup;

        public Article() {
        }

        public Article(Message message, Folder folder) {
            messageNumber = message.getMessageNumber();
            newsgroup = new Newsgroup(folder); //need to ensure uniqueness
        }

        public Long getId() {
            return id;
        }

        public void setId(Long id) {
            this.id = id;
        }

        @Override
        public int hashCode() {
            int hash = 0;
            hash += (id != null ? id.hashCode() : 0);
            return hash;
        }

        @Override
        public boolean equals(Object object) {
            // TODO: Warning - this method won't work in the case the id fields are not set
            if (!(object instanceof Article)) {
                return false;
            }
            Article other = (Article) object;
            if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
                return false;
            }
            return true;
        }

        @Override
        public String toString() {
            return "\nmessageNumber\t" + messageNumber;
        }

        public int getMessageNumber() {
            return messageNumber;
        }

        public void setMessageNumber(int messageNumber) {
            this.messageNumber = messageNumber;
        }
    }

And the Newsgroup entity:

package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.HashSet;
import java.util.Set;
import javax.mail.Folder;
import javax.persistence.*;

@Entity
public class Newsgroup implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column //@Unique @UniqueConstraint interface..?
    private String newsgroup;
    @OneToMany(mappedBy = "newsgroup", cascade = CascadeType.PERSIST)
    private Set<Article> articles = new HashSet<>();

    public Newsgroup() {
    }

    public Newsgroup(Folder folder) {
        newsgroup = folder.getFullName();//if row already exists, then what?
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Newsgroup)) {
            return false;
        }
        Newsgroup other = (Newsgroup) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return newsgroup;
    }
} 
```

我怎样才能先查询现有的新闻组，而不是每次都创建一个新的新闻组实体？

NEWSGROUP 中的冗余行：

```
mysql> 
mysql> USE usenet;SELECT * FROM ARTICLE;SELECT * FROM NEWSGROUP;
Database changed
+----+---------------+--------------+
| ID | MESSAGENUMBER | NEWSGROUP_ID |
+----+---------------+--------------+
|  1 |             4 |            1 |
|  2 |             5 |            2 |
|  3 |             6 |            3 |
|  4 |             7 |            4 |
|  5 |             8 |            5 |
|  6 |             9 |            6 |
|  7 |            10 |            7 |
|  8 |            11 |            8 |
|  9 |             4 |            9 |
| 10 |             4 |           10 |
| 11 |             5 |           11 |
| 12 |             6 |           12 |
| 13 |             7 |           13 |
| 14 |             8 |           14 |
| 15 |             9 |           15 |
| 16 |            10 |           16 |
| 17 |            11 |           17 |
| 18 |             4 |           18 |
| 19 |             5 |           19 |
| 20 |             6 |           20 |
| 21 |             7 |           21 |
| 22 |             8 |           22 |
| 23 |             9 |           23 |
| 24 |            10 |           24 |
| 25 |            11 |           25 |
+----+---------------+--------------+
25 rows in set (0.00 sec)

+----+-------------------------------+
| ID | NEWSGROUP                     |
+----+-------------------------------+
|  1 | gwene.com.androidcentral      |
|  2 | gwene.com.androidcentral      |
|  3 | gwene.com.androidcentral      |
|  4 | gwene.com.androidcentral      |
|  5 | gwene.com.androidcentral      |
|  6 | gwene.com.androidcentral      |
|  7 | gwene.com.androidcentral      |
|  8 | gwene.com.androidcentral      |
|  9 | gwene.com.blogspot.emacsworld |
| 10 | gwene.com.blogspot.googlecode |
| 11 | gwene.com.blogspot.googlecode |
| 12 | gwene.com.blogspot.googlecode |
| 13 | gwene.com.blogspot.googlecode |
| 14 | gwene.com.blogspot.googlecode |
| 15 | gwene.com.blogspot.googlecode |
| 16 | gwene.com.blogspot.googlecode |
| 17 | gwene.com.blogspot.googlecode |
| 18 | gwene.com.economist           |
| 19 | gwene.com.economist           |
| 20 | gwene.com.economist           |
| 21 | gwene.com.economist           |
| 22 | gwene.com.economist           |
| 23 | gwene.com.economist           |
| 24 | gwene.com.economist           |
| 25 | gwene.com.economist           |
+----+-------------------------------+
25 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:35:10.073

你的问题是你的新闻组一直都是......当然，如果你保存文章，一个新的“冗余”新闻组将被插入到数据库中，因为我没有 ID。

提示（希望）：

在 Articles Countstructor 内部（或在 Article 类外部并添加它）搜索您要添加到文章的 NewsGroup。

我的问题是......我不知道那个“文件夹”是什么所以我只能给你提示：

```
Query query = entityManager.createNativeQuery("SELECT * FROM Newsgroup WHERE "dunno what you want to select here" = ?1",
            Newsgroup.class);
query.setParameter(1, "your parameter);

Newsgroup group = (Newsgroup) query.getSingleResult(); 
```

如果 NewsGroup 是`null`创建一个新的，否则添加您找到的那个。

# jquery - 在列表中添加和删除复选框，然后能够更改它们的顺序？

> ID：11792591
> 
> 赞同：0
> 
> 时间：2012-08-03T09:02:49.833
> 
> 标签：jquery, list, dynamic, checkbox

我正在使用一些 jQuery，它将允许我执行以下操作：-

在左侧，我有一个预先填充的汽车功能列表，我可以选择然后更改这些功能的顺序 - 在列表中移动它们。我还需要选择从列表中删除任何这些功能。

然后在右侧我需要一个输入框，您可以在其中键入以将新功能添加到左侧列表中。所以我添加了新功能，它建立在列表的顶部？

我怎样才能做到这一点？谢谢

# android - 共享首选项的 Android 空指针异常

> ID：11792593
> 
> 赞同：3
> 
> 时间：2012-08-03T09:02:54.420
> 
> 标签：android, nullpointerexception, sharedpreferences

我试图在共享首选项中保存一个整数值，并在应用程序重新启动时再次加载它。

我在我的主要活动中创建了一个共享首选项，并尝试在单击菜单项时将整数值保存在另一个菜单侦听器类中。Menu 侦听器类位于不同的包中，Menu Listener 类扩展了 Main Activity。

但是当我尝试这样做时，我得到了一个空指针异常。

我也通过了这个[链接](https://stackoverflow.com/questions/5991289/sharedpreferences-null-pointer-exception)！但这似乎对我没有帮助。

这是我的代码：

主要活动：

```
 protected SharedPreferences mPrefs;
protected SharedPreferences.Editor mEditor;
protected Context  main_activityclass_context; //EDIT
public static int count=0;

@Override
protected void onCreate(final Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

     mPrefs = this.getSharedPreferences("THEME", 0);
     mEditor = mPrefs.edit();
    } 
```

菜单监听类：

```
 case  mainActivity.MENU_ITEM_THEME_DARK:
    {

        mainActivity.count=1;

        mPrefs =main_activityclass_context.getSharedPreferences("THEME", 0); //EDIT
        mEditor = mPrefs.edit();
        mEditor.putInt("Theme_count", mainActivity.count).commit();

    break;
    } 
```

我在 Menu Listener 的行中收到 Null 指针异常：

```
 mPrefs = getSharedPreferences("THEME", 0);
        mEditor = mPrefs.edit(); 
```

我的日志猫：

```
 08-03 10:54:03.650: E/AndroidRuntime(31258): FATAL EXCEPTION: main
      08-03 10:54:03.650: E/AndroidRuntime(31258): java.lang.NullPointerException
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at               android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:153)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at de.exb.ptpt.tablet.menu.TabletMenuListener.onMenuItemClick(TabletMenuListener.java:215)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:144)
       08-03 10:54:03.650: E/AndroidRuntime(31258):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
       08-03 10:54:03.650: E/AndroidRuntime(31258):     at com.android.internal.view.menu.MenuPopupHelper.onItemClick(MenuPopupHelper.java:156)
       08-03 10:54:03.650: E/AndroidRuntime(31258):     at android.widget.AdapterView.performItemClick(AdapterView.java:292)
       08-03 10:54:03.650: E/AndroidRuntime(31258):     at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at android.widget.AbsListView$1.run(AbsListView.java:3168)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at android.os.Handler.handleCallback(Handler.java:605)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at android.os.Handler.dispatchMessage(Handler.java:92)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at android.os.Looper.loop(Looper.java:137)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at android.app.ActivityThread.main(ActivityThread.java:4424)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at java.lang.reflect.Method.invokeNative(Native Method)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at java.lang.reflect.Method.invoke(Method.java:511)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
      08-03 10:54:03.650: E/AndroidRuntime(31258):  at dalvik.system.NativeStart.main(Native Method) 
```

谁能帮帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T10:15:03.570

一种好方法是，您创建一个辅助类来声明、保存和检索首选项。您可以参考以下代码示例：

```
public class PreferencesHelper {

private SharedPreferences sharedPreferences;
private Editor editor;

public PreferencesHelper(Context context) {
this.sharedPreferences = getPreferences(MODE_PRIVATE);    
this.editor = sharedPreferences.edit(); }

public String GetPreferences(String key) {
    return sharedPreferences.getString(key, "");
}

public void SavePreferences(String key, String value) {
editor.putString(key, value);    
editor.commit();  
}
} 
```

在活动的 onCreate 事件中，您可以创建 PreferencesHelper 对象并获取所有已保存的首选项，例如：

```
Prefs = new PreferencesHelper(getApplicationContext());  

Prefs.GetPreferences("YOURARGUMENT"); 
```

您可以保存以下首选项：

```
Prefs.SavePreferences(key, value); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:06:52.153

在 onCreate 方法之外编写此代码。

```
mPrefs = this.getSharedPreferences("THEME", 0);
     mEditor = mPrefs.edit(); 
```

主要是因为它产生空指针异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:16:51.277

您在 MenuListener 类中使用 SharedPrefrence：

排队 ->

```
 getSharedPreferences("THEME", 0); 
```

这里需要 MainActivity 类的 Context

你可以把它当作->

```
 main_activityclass_context.getSharedPreferences("THEME", 0); 
```

因为在 MenuListener 类中，您没有直接获取 MainActivity 类的上下文，您必须将其传递给 MenuListener 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:28:35.507

[尝试使用https://stackoverflow.com/a/5991458/1105291](https://stackoverflow.com/a/5991458/1105291)中指定的上下文

即你的代码看起来像

```
MainActivity.this.getSharedPreferences("THEME", 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-27T09:04:24.903

我认为你在 App 中获得了共享首选项值，从那时起，preferenceactivity xml 页面未加载，因此它显示空指针错误。一次你去设置然后它工作正常。空指针错误不显示。

# jquery - 使用 Django 分页和 jquery 处理下拉框

> ID：11792598
> 
> 赞同：1
> 
> 时间：2012-08-03T09:03:10.153
> 
> 标签：jquery, django, jquery-selectors, django-pagination

在下面的代码中，我试图向标签添加一个下拉框。为此，我调用了一个函数onready，然后添加它。我这里有两个问题

1.表格有两千多行，我使用django分页。但是准备好下拉框填充了所有两千行。我如何加载100行的下拉框，即正在分页. 这样它会更快。2.Also下拉框显示数据选择较慢。我该如何纠正这个。

希望我对这个问题很清楚

```
 {% extends "base/admin_base.html" %}
  {% load pagination_tags %}

  {% block content %}
  <script>

  $(document).ready(function() {
  $('font').css({'color':'red'})
     getcategory('1');
  });
  function getcategory(flag)
  {
     if($("#cgroup").val().trim() == "-1")
     {
        alertmsg+= "Select Category group\n"
     }  
     else
     {
        var html = "";
        var opt = "";
        var cgroup = $("#cgroup").val();
        html += '<select id="category" class="category">';
        html += '<option value="-1" class="cat">Select Category</option>';   
         {% for category in response_dict.category %}
           gp = '{{category.categorygroup.id}}' ;
           if(cgroup == gp)
           {
              html += '<option class="data" value="{{category.id}}">{{category.name}}</option>';  
           }
         {% endfor %}
           html += '</select>';
           if(flag == 1)
           {
              $(".tg").html('');
              $(".tg").append(html);
           }

     }
  }

  </script>
  <h1>Tag data</h1>
         {% autopaginate response_dict.taggeddata 100 %}
           <div align="right">{% paginate %}</div>
  <form action="/users/saveuser/" method="post">{% csrf_token %}
 <table>

   <tr><td><font>*</font>Select Category group for tagging</td><td> 
   <select id="cgroup" onchange="getcategory('1');">
   {% for group in response_dict.categorygroup %}
            <option value="{{group.id}}">{{group.name}}</option> 
   {% endfor %}
   </select>  
   </td></tr>

  </table>

  <b>
        <table>

         <tr><td><font>*</font>Select Category group for tagging</td><td> 
         <select id="cgroup" onchange="getcategory('1');">
         {% for group in response_dict.categorygroup %}
                  <option value="{{group.id}}">{{group.name}}</option> 
         {% endfor %}
         </select>  
         </td></tr>

        </table>
        </b>
        <table  id="box-table-a">
        <colgroup>
        <col class="vzebra-odd">
        </colgroup>
        <thead>
         <tr><th id="vzebra-comedy" scope="col">Field1</th><th id="vzebra-adventure" scope="col">Field2</th><th id="vzebra-comedy" scope="col">Field3</th><th id="vzebra-adventure" scope="col">Field4</th><th id="vzebra-comedy" scope="col">Field5</th><th id="vzebra-adventure" scope="col">Field6</th><th id="vzebra-comedy" scope="col">Tag</th><th id="vzebra-adventure" scope="col">Actions</th><thead></tr>
        <tbody>
         {% for td in response_dict.taggeddata %}
           <tr id="{{td.id}}">
           <td class="tg">Select category</td>
           </tr>
         {% endfor %}
        </tbody>
        </table>
         <input type="button" value="Add" id="addbtn" onclick="validate();"/>

  </form>
  {% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:17:17.457

那是一些非常奇怪的 JavaScript。对于初学者来说，你**永远不**应该这样做。

```
{% for category in response_dict.category %}
  gp = '{{category.categorygroup.id}}' ;
  if(cgroup == gp)
  {
    html += '<option class="data" value="{{category.id}}">{{category.name}}</option>';  
  }
{% endfor %} 
```

这意味着您一遍又一遍地丢弃相同的 JavaScript。相反，您应该构建一个 JavaScript 数组并使用纯 JavaScript 对其进行循环。看看你从那个代码中得到的渲染页面，它会很大。

```
// Build your array with Django templates or load it with ajax
var data = [...],
    i; // Also initialise the counter for the loop

for(i = 0; i < data.length; i += 1) {
    // Loop over your built array and construct your HTML
    // This line now only occurs once
    html += '<option foo=' + data[i].foo + '>' + data[i].bar + '</option>';
} 
```

我也永远不会真正动态地构建 JavaScript。我个人的偏好是使用没有 Django 标签的纯 JavaScript，我向我的服务器发出 ajax 请求，它会呈现一些包含我需要的数据的 JSON。它干净多了。我必须这样做，因为我将 JavaScript 保存在一个可以缩小的单独文件中。

因此，如果您不想以我认为“正确”的方式执行此操作，我将使用您相同的分页循环来构建您的 JavaScript。调用`{% autopaginate %}`两次或使用它来呈现 HTML。

# mysql - 如何从 MySQL 中的连接表中正确提取受日期计算约束的记录？

> ID：11792599
> 
> 赞同：1
> 
> 时间：2012-08-03T09:03:10.817
> 
> 标签：mysql, datetime, join, where-clause, having

我从以下查询中得到以下结果：

```
SELECT users.ID, user_registered, post_date, post_type
FROM users LEFT OUTER JOIN posts ON users.ID = post_author
ORDER BY ID, user_registered, post_date, post_type

  ID   user_registered          post_date      post_type
---+-----------------+------------------+--------------+
   1    6/18/2012 4:04     6/18/2012 4:04           page
   1    6/18/2012 4:04     6/18/2012 4:04           post
   1    6/18/2012 4:04    6/18/2012 10:32  nav_menu_item
   1    6/18/2012 4:04    6/18/2012 10:32  nav_menu_item
   1    6/18/2012 4:04    6/18/2012 10:32  nav_menu_item
   1    6/18/2012 4:04    6/18/2012 10:32  nav_menu_item
   1    6/18/2012 4:04    6/18/2012 10:32  nav_menu_item
   1    6/18/2012 4:04    6/18/2012 10:33  nav_menu_item
   1    6/18/2012 4:04    6/18/2012 10:48     attachment
   1    6/18/2012 4:04    6/19/2012 10:32     attachment
   1    6/18/2012 4:04     6/30/2012 6:49  nav_menu_item
   1    6/18/2012 4:04     6/30/2012 7:04  nav_menu_item
   1    6/18/2012 4:04      7/1/2012 7:39     attachment
   1    6/18/2012 4:04    7/13/2012 10:00           page
   1    6/18/2012 4:04    7/20/2012 18:18           page
   1    6/18/2012 4:04    7/21/2012 16:37           post
   1    6/18/2012 4:04    7/23/2012 14:15           page
   1    6/18/2012 4:04    7/31/2012 15:12           post
   1    6/18/2012 4:04      8/1/2012 8:47     attachment
   2   6/19/2012 10:05              NULL            NULL
   6    6/29/2012 4:47    6/19/2012 10:11     attachment
   6    6/29/2012 4:47    6/19/2012 10:15     attachment
   6    6/29/2012 4:47    6/19/2012 10:17     attachment
   6    6/29/2012 4:47    6/19/2012 10:20     attachment
   6    6/29/2012 4:47    6/19/2012 10:22     attachment
   6    6/29/2012 4:47     6/28/2012 0:00       employee
   6    6/29/2012 4:47     6/29/2012 0:00       employee
   6    6/29/2012 4:47      8/1/2012 0:00       employee
   6    6/29/2012 4:47      8/2/2012 0:00       employee
   6    6/29/2012 4:47      8/2/2012 0:00       employee
   6    6/29/2012 4:47      8/2/2012 0:00       employee
   7    7/7/2012 16:52    7/31/2012 14:26           post
  20   7/21/2012 14:48    7/21/2012 21:53           post
  20   7/21/2012 14:48    7/22/2012 12:50           post
  21   7/27/2012 14:56              NULL            NULL 
```

*   `ID`： 用户身份。唯一的主键
*   `user_registered`：用户成为网站一部分的日期时间
*   `post_date`: 用户创建帖子的日期时间
*   `post_type`：用户创建的帖子类型

    1.  我需要获取自用户上次`employee`发帖以来的天数（`post_date`where `post_type = 'employee'`）。
    2.  如果用户还没有`employee`发帖，那么我需要获取用户注册后的天数（`user_registered`）。

**要求**

我只需要获取`ID`所有用户

1.  其最近`employee`的发布日期是例如`< 7`几天或`>= 14`几天，或`BETWEEN 6 AND 14`根据需要；或者
2.  如果用户没有`employee`帖子，则获取注册`< 7`天数或`>= 14`天数的用户，或`BETWEEN 6 AND 14`如＃1。

`< 7`我为一个案例尝试了以下查询：

```
SELECT users.ID
FROM users LEFT OUTER JOIN posts ON users.ID = post_author
GROUP BY ID
HAVING MIN(DATEDIFF(NOW(), IFNULL(post_date, user_registered))) < 7 
```

它`ID`按预期产生 s 1、6 和 7，因为：

1.  有帖子的用户（6）`employee`没有其他人的任何其他帖子`post_type`；和
2.  没有`employee`帖子的用户（1、7）从他们的`user-registered`日期开始计算。

但是当这个查询中断时

1.  `employee`有帖子的用户也有其他`post_type`的

因为我不能将日期计算限制为`employee` `post_type`仅限帖子。如果用户有 a`post`或 a`page`或 an `attachment`，即比他的 latest 晚 2 天`employee`，则日期计算将返回`post`or`page`或的结果`attachment`。

所以我尝试包含`WHERE post_type = 'employee'`，但只`ID`返回了 6 个，因为所有其他用户都没有`employee`帖子。所以我失去了我的第二个要求。

我该怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:19:42.620

尝试：

您可以使用[`CASE`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#operator_case)聚合函数中的表达式来导出仅s`MIN`之间的最小日期差异，其中'employee' 是。如果特定用户没有带有 'employee' 的 s，请改用他/她的注册日期进行比较。`post_date``post_type``post_type`

```
SELECT    a.ID
FROM      users a
LEFT JOIN posts b ON a.ID = b.post_author
GROUP BY  a.ID
HAVING    IFNULL(
              MIN(CASE b.post_type WHEN 'employee' THEN DATEDIFF(NOW(), b.post_date) END),
              DATEDIFF(NOW(), MIN(a.user_registered))
          ) < 7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:12:13.853

我认为不是`post_type = 'employee'`在 where 子句中添加条件 add on`join`子句将解决您的问题。

```
SELECT users.ID
FROM users 
     LEFT OUTER JOIN posts 
         ON users.ID = post_author AND 
            post_type = 'employee'
GROUP BY ID
HAVING MIN(DATEDIFF(NOW(), IFNULL(post_date, user_registered))) < 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:15:22.050

根据您的其他限制，这可能不是正确答案 - 如果您在员工注册时添加默认帖子怎么办？它会简化你的头痛吗？

# unit-testing - 如何使 Spring JDBC 查询独立于数据库？

> ID：11792601
> 
> 赞同：1
> 
> 时间：2012-08-03T09:03:22.793
> 
> 标签：unit-testing, hsqldb, junit4, spring-jdbc, database-independent

我正在使用 Spring Jdbc 3.0.5 RELEASE，我们正在根据客户的要求使用 DB2 数据库。我们希望针对 HSQL DB 运行我们的测试，因为我们不想在测试中干扰 DB2 主键（通过创建序列来实现）。

我在 ApplicationContext.xml 中使用了与测试相关的“jdbc:embedded-database”标签来创建所需的表并为测试插入虚拟数据（成功运行）。

但现在很明显，我们在 DAO 层中使用 DB2 Dialect 编写的查询语法面临问题。

克服这个问题的最佳解决方案是什么？

是否有任何“休眠标准”之类的 API 支持 Spring jdbc 以使我们与连接相关的查询（在针对 HSQL 运行时更痛苦）在任何数据库上运行

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:13:54.157

JPA 是一个很好的解决方案，因为它为您提供了数据库操作的标准接口，允许您相当自由地交换引擎实现（Hibernate、Toplink 等）。

如果您需要，那么您可以随时混合和匹配 JPA 和 JDBC，以应对 JPA 不能为您提供足够灵活性的情况。

您应该会发现，在设置持久性上下文时，指定底层数据库的方言归结为配置选择。这应该消除 JPQL 中各种数据库之间的一些差异。

与以往一样，避免使用特定于供应商的扩展以获得最大的可移植性。

# html - 如何使用css隐藏表格的第二行？

> ID：11792605
> 
> 赞同：1
> 
> 时间：2012-08-03T09:03:46.247
> 
> 标签：html, css

我有一张桌子

```
<table>
<tr><td>test data 1</td></tr>
<tr><td>test data 2</td></tr>
<tr><td>test data 3</td></tr>
<tr><td>test data 4</td></tr>
<tr><td>test data 5</td></tr>
</table> 
```

要隐藏表的第二行，我使用以下 css

```
 table tr:nth-child(2) {display : none;} 
```

但不适用于所有浏览器。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T09:06:20.587

使用邻接选择器：

```
table tr:FIRST-CHILD + tr
{
    display:none;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T09:05:59.923

`:nth-child()`根本[不适用于所有浏览器](http://caniuse.com/#search=nth-child)（主要是 IE），如果你想使用 CSS2 隐藏第二行，你可以添加一个特定的类：

```
<table>
<tr><td>test data 1</td></tr>
<tr class="row2"><td>test data 2</td></tr>
<tr><td>test data 3</td></tr>
<tr><td>test data 4</td></tr>
<tr><td>test data 5</td></tr>
</table>

 table tr.row2 {display : none;} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T09:06:01.933

最好的方法是给它一个类名。

```
<table>
<tr><td>test data 1</td></tr>
<tr class="hide_me"><td>test data 2</td></tr>
<tr><td>test data 3</td></tr>
<tr><td>test data 4</td></tr>
<tr><td>test data 5</td></tr>
</table> 
```

进而

```
.hide_me { display: none; } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T09:21:08.870

[http://jsfiddle.net/p2b8H/1/](http://jsfiddle.net/p2b8H/1/)

使用 Jquery eq(1) 表示，0=> 第一行，1 => 第二行，2=> 第三行 ...等

```
$(document).ready(function (){
    $('table tr:eq(1)').remove();
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T09:07:06.840

不幸的是，`:nth-child()`旧浏览器不支持类似的选择器。

但是您始终可以使用一个类，例如`.invisible {display:none}`并将其应用于`<tr>`您要隐藏的类。

```
<table>
<tr><td>test data 1</td></tr>
<tr class="invisible"><td>test data 2</td></tr>
<tr><td>test data 3</td></tr>
<tr><td>test data 4</td></tr>
<tr><td>test data 5</td></tr>
</table> 
```

# android - 日期选择器的 Android 按钮样式

> ID：11792611
> 
> 赞同：0
> 
> 时间：2012-08-03T09:04:07.173
> 
> 标签：android, button, styles

我想知道是否有带有日期时间的按钮的标准样式（或者它是什么？）？我正在寻找这种字段样式：

![截屏](../Images/3584d37a886ceedc5fd73bfdac57adce.png)

它是标准风格的东西吗？或者我应该使用drawable来制作这个右下角？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:52:10.677

这是 Holo 主题中的标准 Spinner。

如果您想将 Holo 带入您的应用程序，请使用：[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

或者，如果您想要一些新的、不同的东西，请尝试使用其他 Android Picker 小部件[android-wheel](http://code.google.com/p/android-wheel/)

# android - ScrollView 太慢了

> ID：11792613
> 
> 赞同：0
> 
> 时间：2012-08-03T09:04:08.837
> 
> 标签：android, android-scrollview

我正在为社交网络编写应用程序。所以在提要页面中我有太多的图像，这使得滚动非常慢。我正在寻找解决问题的方法，但找不到任何真正有用的东西！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:07:26.063

您可以延迟加载列表视图的图像。[这](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)是一个完整的示例，它涵盖了您需要了解的有关延迟加载的所有内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:10:15.833

使用延迟加载。请下载此[示例](http://androidsnips.blogspot.in/2010/08/lazy-loading-of-images-in-list-view-in.html)。

# wpf - 定义列表 WPF 用户控件中的属性

> ID：11792616
> 
> 赞同：0
> 
> 时间：2012-08-03T09:04:24.273
> 
> 标签：wpf, user-controls, attributes

我创建了一个`UserControl`有几个属性的。当我将用户控件添加到 WPF 应用程序中时，它将在 Visual Studio 属性窗口中显示这些属性。

但是我有一个名为的属性`UserList`，它是一种`List<String>`类型。该属性也显示在属性窗口中，带有提示文本“（集合）”和带有三个点的按钮。当我单击该按钮时，它将显示一个对话框，可以向`UserList`变量添加一些值。但是窗口的那部分没有启用。

那么我该如何启用该部分。我必须为我的`UserList`财产做些什么特别的事情吗？

这是我的属性定义的样子：

```
 private List<String> dataSources = new List<String>();
    [Description("Users"), Category("Time Line")]
    public List<string> UserList
    {
        get { return dataSources; }
        set { dataSources = value; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:05:20.043

我找到了解决方案，但我认为这种方法不适用于列表。但无论如何，`Collection`都可以转换成`List`.

```
private Collection<String> dataSources = new Collection<String>();
[Description("Data Sources"), Category("Time Line")]
[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
public Collection<DataSourceModel> DataSources
{    
    get { return dataSources; }
    set { dataSources = value; }
} 
```

# delphi - 我们可以在 Delphi XE2 LiveBinding 表达式中使用布尔运算符吗？

> ID：11792623
> 
> 赞同：3
> 
> 时间：2012-08-03T09:04:44.697
> 
> 标签：delphi, delphi-xe2, livebindings

我打算为 TCheckBox 编写一个 Live Binding 源表达式：

```
SourceExpression = '(Checked = False) and (Enabled = True)' 
```

执行代码时出现异常提示：

```
Expected EOF - trailing text in expression 
```

Delphi XE2 Live Binding 是否支持布尔运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-10T15:03:16.477

不，不直接支持布尔运算符。

从[文档](http://docwiki.embarcadero.com/RADStudio/Berlin/en/Using_Custom_Format_and_Parse_Expressions_in_LiveBindings)：

> 您可以在表达式中使用以下数学符号：
> 
> *   常量：nil True False Pi
> *   算术运算符：+ - * /
> *   逻辑运算符：= <> < <= > >=
> *   括号 ()，用于更改运算符优先级。

但是您可以使用[内置函数`IfAll()`,`IfAny()`和`IfThen()`](http://docwiki.embarcadero.com/RADStudio/Berlin/en/Default_LiveBindings_Methods),而不是`and`,`or`和`not`:

```
SourceExpression := 'IfAll(IfThen(Checked, False, True), Enabled)' 
```

或者您[注册自己的功能](http://www.malcolmgroves.com/blog/?p=1226)。

我测试了这个 4 XE4，但它应该适用于 XE2 2。

*   `A or B`：`IfAny(A, B)`
*   `A and B`：`IfAll(A, B)`
*   `not A`：`IfThen(A, False, True)`
*   `A xor B`：`IfAll(IfAny(A, B), IfThen(IfAll(A,B), False, True))`

# c# - 无法在 AX 2009 中使用 AIF Web 服务更新小数

> ID：11792624
> 
> 赞同：0
> 
> 时间：2012-08-03T09:04:49.247
> 
> 标签：c#, web-services, dynamics-ax-2009, x++, ax

我在 AX 2009 中使用来自查询的标准向导创建了一个 AIF Web 服务。现在看起来一切正常，除了更新。我无法从“十进制”类型中写回字段。但是“字符串”字段可以正常工作。

如果您查看下面的代码，“PickQty”字段是一个小数，它不起作用，而“PickQtyMob”是一个字符串字段，它起作用。

如果我只更新 PickQty，我会从 AX 中的服务而不是 parm 方法中进行更新。

而且我没有收到任何错误消息或异常。

更新代码片段：try { MOBBatchPickServiceUpdateRequest updateRequest = new MOBBatchPickServiceUpdateRequest(); updateRequest.MOBBatchPick = new AxdMOBBatchPick(); updateRequest.MOBBatchPick.BatchPick = 新 MOBBatchPickService.AxdEntity_BatchPick[1]; updateRequest.MOBBatchPick.BatchPick[0] = 新 MOBBatchPickService.AxdEntity_BatchPick();

```
 updateRequest.EntityKeyList = new MOBBatchPickService.EntityKey[mobBatchPick.BatchPick.Length];

    for (i = 0; i < mobBatchPick.BatchPick.Length; i++)
    {
        updateRequest.EntityKeyList[i] = new MOBBatchPickService.EntityKey();
        updateRequest.EntityKeyList[i].KeyData = new MOBBatchPickService.KeyField[1];

        updateRequest.EntityKeyList[i].KeyData[0] = new MOBBatchPickService.KeyField();
        updateRequest.EntityKeyList[i].KeyData[0].Field = "PickRequestNum";
        updateRequest.EntityKeyList[i].KeyData[0].Value = mobBatchPick.BatchPick[i].PickRequestNum;

        mobBatchPick.BatchPick[i].PickQty = mobBatchPick.BatchPick[i].PickQty; // decimal: Doesn't work
        mobBatchPick.BatchPick[i].PickQtyMob = mobBatchPick.BatchPick[i].PickQty.ToString(); // string: Works

        mobBatchPick.BatchPick[i].action = MOBBatchPickService.AxdEnum_AxdEntityAction.update;

    }// for

    updateRequest.MOBBatchPick = mobBatchPick;
    batchPickClient.update(updateRequest);

}
catch (Exception _exception)
{
    MessageBox.Show(_exception.ToString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:08:42.783

我通过将字段添加到 AX 中的 initMandatoryFieldsMap 方法来解决问题，如下所示：

```
protected void initMandatoryFieldsMap()
{
    super();
    this.setParmMethodAsMandatory(classNum(AxMobBatchPick),methodStr(AxMobBatchPick,parmPickty));
} 
```

# css - @page Css 样式不适用于 Mozilla firefox

> ID：11792625
> 
> 赞同：6
> 
> 时间：2012-08-03T09:04:54.373
> 
> 标签：css, asp.net-mvc, printing

我的要求是在打印时为所有页面提供**10 厘米的边距。**

我正在使用`window.print()`. 我的网页会动态增加（因此无法确定页数）。对于所有页面，我需要提供 10 厘米的边距。

我使用了 CSS `Media="Print"`，在其中定义了样式：

```
 @page
  {
     Margin-top :10cm; 
  } 
```

这适用于**除 Mozilla firefox 之外**的所有浏览器。我搜索了解决方案，所有博客都说，Mozilla 不支持`@page`，但没有解决方案。有人可以帮我吗？请让我知道是否可以在 Mozilla 中实施

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-28T16:47:35.453

抱歉，我知道你的问题已经很老了，但它出现在我对同样问题的谷歌查询中。

根据此链接（[https://developer.mozilla.org/en-US/docs/Web/CSS/@page](https://developer.mozilla.org/en-US/docs/Web/CSS/@page)），自 19.0 以来，Firefox 就支持它，这是在您的帖子之后，只是为了完整性......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:16:39.357

尝试使用带有前缀的[**@document**](https://developer.mozilla.org/en/CSS/@document) ，例如**Firefox**`moz``@-moz-document`

 **> @-moz-document 规则是 Gecko 特定的规则，它根据文档的 URL 限制其中包含的样式规则。它主要是为用户样式表设计的。@-moz-document 规则可以指定一个或多个匹配函数。如果任何功能适用于 URL，则规则将在该 URL 上生效。

**例子：**

```
@-moz-document url(http://www.w3.org/),  
           url-prefix(http://www.w3.org/Style/),  
           domain(mozilla.org),  
           regexp("https:.*")  
{  
  /* CSS rules here apply to: 
     + The page "http://www.w3.org/". 
     + Any page whose URL begins with "http://www.w3.org/Style/" 
     + Any page whose URL's host is "mozilla.org" or ends with ".mozilla.org" 
     + Any page whose URL starts with "https:" */  

  /* make the above-mentioned pages really ugly */  

     @media print{
         body { margin-top :10cm; }
     }       
} 
```

**可用功能：**

*   url()，匹配一个精确的 URL
*   url-prefix()，如果文档 URL 以提供的值开头，则匹配
*   domain()，如果文档 URL 位于提供的域（或其子域）上，则匹配
*   regexp()，如果文档 URL 与提供的正则表达式匹配，则匹配。表达式必须匹配整个 URL。**

# python - 线程在调用 Thread.start 之前开始运行

> ID：11792629
> 
> 赞同：22
> 
> 时间：2012-08-03T09:05:36.337
> 
> 标签：python, multithreading, python-multithreading

```
t1=threading.Thread(target=self.read())
print("something")
t2=threading.Thread(target=self.runChecks(), args=(self,)) 
```

`self.read`无限期地运行，所以程序永远不会到达这`print`条线。不打电话怎么可能`t1.start()`？（即使我这么叫，它也应该开始运行并继续下一行，不是吗？）

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-03T09:10:43.970

由于. `()`_ `target=self.read()`_ `self.read`_ *_* _ *_* _ `self.read`_ `target`_ 期望传递一个函数来调用，所以只需删除括号并记住启动线程：`Thread``Thread`

```
t1=threading.Thread(target=self.read)
t1.start()
print("something") 
```

对于需要参数的目标，您可以使用`args`和`kwargs`参数`threading.Thread`，也可以使用 lambda。例如，要`f(a, b, x=c)`在线程中运行，您可以使用

```
thread = threading.Thread(target=f, args=(a, b), kwargs={'x': c}) 
```

或者

```
thread = threading.Thread(target=lambda: f(a, b, x=c)) 
```

但请注意，如果您选择 lambda - lambda 将在使用时查找`f`, `a`, `b`, 和`c`在使用时，而不是在`lambda`定义时，因此如果您在安排线程之前重新分配这些变量中的任何一个，您可能会得到意想不到的结果（这可能花费任意长的时间，即使你`start`立即打电话）。

# jasper-reports - JasperReports：传递给子报表的常量字符串在 SQL 查询中使用 P!{} 评估时获得空值

> ID：11792652
> 
> 赞同：1
> 
> 时间：2012-08-03T09:06:48.400
> 
> 标签：jasper-reports, ireport

**简而言之：**

我将一个常量字符串传递给子报表，但由于某种原因，`null`当它在子报表 SQL 中使用`P!{}`语法时，它会获得价值。

**更详细地说：**

我有两个几乎相同的子报告。我想使用通用子报表，而不是单独定义每个子报表。现在我有了这个带有字符串参数的子报表`main_or_side`。这个想法是将值“main”或“side”传递给子报表，然后在 SQL 查询中使用它。

在查询中，参数以这种方式使用：`SELECT table.P!{main_or_side}_diagnosis ...`并且应该例如`SELECT main_diagnosis ...`在使用参数调用它时产生结果。

当我在 iReports 中预览子报表时，它会提示询问参数，当我输入“main”或“side”时，它会很好地显示报表。现在，当我预览已将其设置为将值`new String("main")`作为`side_or_main`-parameter 传递的 mainreport 时，它将返回一个错误：

```
Unknown column 'table.null_diagnosis' in 'field list'
```

如果我将查询设为静态并添加一个 textField 以显示它的值，`main_or_side`则可以很好地显示传递的值。所以值 get 肯定会传递给子报表。`P!{main_or_side}`SQL查询内部的计算结果怎么可能是`null`？

**编辑：**

我正在做一些清理并重命名为我的 jrxml 文件的副本，这样我就可以在这里过去的片段。在我删除了一些不相关的元素并进行了一些重命名以使代码与我的描述相匹配之后，它突然开始工作了。

问题仍然存在于原始文件中。如果我找出导致问题的原因，我将尝试查看与修改后的文件相比的差异并在此处发布。

# c# - 带有链接按钮的 ASP.net Visual Studio 中继器

> ID：11792658
> 
> 赞同：2
> 
> 时间：2012-08-03T09:06:58.623
> 
> 标签：c#, asp.net, visual-studio-2010, repeater, linkbutton

在加载页面时，我想通过界面访问名称列表并为该列表中的每个名称创建链接按钮。同样单击任何链接按钮会导致另一个页面。

我是 ASP.net 的新手，所以我不确定应该在哪里创建链接按钮。起初我想在 .aspx 文件中创建它，但是中继器如何知道在列表中创建尽可能多的按钮，所以我在页面加载函数中完成了它并将名称绑定到按钮。但这不起作用：

```
 public void Repeater1_ItemDataBound(object sender, EventArgs e)
    {
        LinkButton lb = (LinkButton)this.FindControl("lb");

        IComparisonDataService ds = new ComparisonDataService();
        IList<string> apps = ds.GetApplicationList();
        foreach (var app in apps)
            lb.Text = app;
    } 
```

对于 .aspx，我只有一个带有链接按钮的转发器对象：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
  <link href="Styles/Layout.css" rel="stylesheet" type="text/css" />
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
  <div align="center" class="submitButton">
    <asp:Repeater ID="Repeater1" runat="server"  OnItemDataBound="Repeater1_ItemDataBound">
        <ItemTemplate>
            <asp:LinkButton ID="lb" runat="server" />
        </ItemTemplate>
    </asp:Repeater>
       </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:13:36.950

您必须将`lb`我假设的控制权`Label`放入您的`Repeater1`控件中，然后在您的中继器控件上创建一个事件`OnItemDataBound`并将您的代码放在那里排除这个：

```
protected void Page_Load(object sender, EventArgs e)
    {
        List<string> str = new List<string>{"I", "You", "They"};
        Repeater1.DataSource = str;
        Repeater1.DataBind();
    }

    protected void Repeater1_OnItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            LinkButton lb = (LinkButton)e.Item.FindControl("lb");
            string str = (string) e.Item.DataItem;
            lb.Text = str;
        }

    } 
```

**编辑：** 您的 .aspx 应如下所示：

```
<asp:Repeater ID="Repeater1" runat="server" OnItemDataBound="Repeater1_ItemDataBound">
     <%-- here you can also add some <HeaderTemplate> if you need a headers --%>
     <ItemTemplate>
         <%-- here you can put your controls --%>
         <asp:LinkButton ID="lb" runat="server"/>
     </ItemTemplate>
</asp:Repeater> 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:02:17.060

不要数据绑定到控件列表，数据绑定到实际数据，在这种情况下，您的字符串列表存储在变量应用程序中。然后在模板中添加数据绑定表达式来设置 LinkBut​​ton 控件的属性：

```
<asp:Repeater ID="Repeater1" runat="server">
<ItemTemplate>
<asp:LinkButton ID="LinkButton1" runat="server" Height="200px" Width="150px" BackColor="#33CC33"
    BorderColor="Black" Font-Underline="False" Text='<%# Container.DataItem #>'></asp:LinkButton>
</ItemTemplate>
</asp:Repeater> 
```

# ruby-on-rails - Ruby on Rails：选择天/月/年前搜索

> ID：11792659
> 
> 赞同：1
> 
> 时间：2012-08-03T09:07:04.773
> 
> 标签：ruby-on-rails, ruby, search, date, time

我正在尝试为用户提供按时间范围进行搜索的选项。我想要一个下拉菜单来显示下拉菜单中的选项，如下所示：

搜索自：3 天前、1 周前、1 个月前、6 个月前、1 年。等等。

我知道我必须使用`DateTime.now.to_date - 3.days`所以 rails 知道我想在 3 天前查询，但我不确定如何让用户在下拉菜单中看到 3 天前选项作为文本，但是查询`DateTime.now.to_date - 3.days`

谢谢

我的搜索视图目前看起来像这样：

```
 <h1>Search</h1>

<% if @project_search.total_entries > 0 %>
<%= form_tag search_path, method: :get do %>

Client :
<%= select(@projects, :client, Project.all.map {|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br>

Industry :
<%= select(@projects, :industry, Project.all.map {|p| [p.industry]}.uniq, :prompt => "-Any-", :selected => params[:industry]) %></br>

Role :
<%= select(@projects, :role, Project.all.map {|p| [p.role]}.uniq, :prompt => "-Any-", :selected => params[:role]) %></br>

Technologies :
<%= select(@projects, :tech, Project.all.map {|p| [p.tech]}.uniq, :prompt => "-Any-", :selected => params[:tech]) %></br>

Business Division :

<%= select(@projects, :business_div, Project.all.map {|p| [p.business_div]}.uniq, :prompt => "-Any-", :selected => params[:business_div]) %></br>

Project Owner :
<%= select(@projects, :project_owner, Project.all.map {|p| [p.project_owner]}.uniq, :prompt => "-Any-", :selected => params[:project_owner]) %></br>

Exception PM
<%= select(@projects, :exception_pm, Project.all.map {|p| [p.exception_pm]}.uniq, :prompt => "-Any-", :selected => params[:exception_pm]) %></br>

<%= select_tag "start_date", options_for_select({
      "3 days ago"   => 3.days,   # =    259_200 sec.
      "1 week ago"   => 1.week,   # =    604_800 sec.
      "1 month ago"  => 1.month,  # =  2_592_000 sec.
      "6 months ago" => 6.months, # = 15_552_000 sec.
      "1 year ago"   => 1.year,   # = 31_557_600 sec.
    }) %>

Project Dates between

<%#=  text_field_tag("start_date") %>

and

<%= text_field_tag("end_date") %></br>

Status :

<%= select(@projects, :status, Project.all.map {|p| [p.status]}.uniq, :prompt => "-Any-", :selected => params[:status]) %></br>

Keywords :

<%= text_field_tag :keywords, params[:keywords] %></br>

<%= submit_tag "Search", name: nil %>

<% end %> 
```

我的模型：

```
class Project < ActiveRecord::Base
  attr_accessible :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

validates_presence_of :business_div, :client, :customer_benifits, :end_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

def self.search(search_client, search_industry, search_role, search_tech, search_business_div, search_project_owner, search_exception_pm, search_status, search_start_date, search_end_date, search_keywords) 
  return scoped unless search_client.present? || search_industry.present? || search_role.present? || search_tech.present? || search_business_div.present? || search_project_owner.present? || search_exception_pm.present? || search_status.present? || search_start_date.present? || search_end_date.present? || search_keywords.present?

  where(['client LIKE ? AND industry LIKE ? AND role LIKE ? AND tech LIKE ? AND business_div LIKE ? AND project_owner LIKE ? AND exception_pm LIKE ? AND status LIKE ? AND DATE(start_date) BETWEEN ? AND ? AND DATE(end_date) BETWEEN ? AND ? AND keywords LIKE ?', 
      "%#{search_client}%", "%#{search_industry}%" , "%#{search_role}%" , "%#{search_tech}%" , "%#{search_business_div}%" , 
      "%#{search_project_owner}%" , "%#{search_exception_pm}%" , "%#{search_status}%", 
      search_start_date, search_end_date, search_start_date, search_end_date,"%#{search_keywords}%"
    ])

end

def self.paginated_for_index(projects_per_page, current_page)
    paginate(:per_page => projects_per_page, :page => current_page)
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:25:54.770

您可以以秒为单位指定时间范围：

```
<%= select_tag "ago", options_for_select({
      "3 days ago"   => 3.days,   # =    259_200 sec.
      "1 week ago"   => 1.week,   # =    604_800 sec.
      "1 month ago"  => 1.month,  # =  2_592_000 sec.
      "6 months ago" => 6.months, # = 15_552_000 sec.
      "1 year ago"   => 1.year,   # = 31_557_600 sec.
    }) %> 
```

并在您的查询中使用该值：

```
Model.where("created_at >", Time.now - params[:ago]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:13:50.817

使用由 github 家伙编写的[慢性](https://github.com/mojombo/chronic)gem提供支持的自然语言处理。从用户那里获取人类可读格式的范围，然后将`chronic`其解析为 ruby​​ 理解的完全有效日期，并可作为参数传递给 Active Record 以查询数据库

这里有一些例子：

```
1.9.3p194 :001 > require 'chronic'
 => true 
1.9.3p194 :002 > Chronic.parse '3 days ago'
 => 2012-07-31 15:20:59 +0530 
1.9.3p194 :003 > Chronic.parse '1 week ago'
 => 2012-07-27 15:22:15 +0530 
1.9.3p194 :004 > Chronic.parse '1 month ago'
 => 2012-07-03 15:22:26 +0530 
1.9.3p194 :005 > Chronic.parse '6 months ago'
 => 2012-02-03 15:23:25 +0530 
1.9.3p194 :006 > Chronic.parse '1 year ago'
 => 2011-08-03 15:23:34 +0530 
```

现在，你也会在这里变得有点疯狂，还可以做一些类似的事情

```
1.9.3p194 :007 > Chronic.parse 'last night'
 => 2012-08-02 22:00:00 +0530 
```

[自述](https://github.com/mojombo/chronic/blob/master/README.md)文件中提供了更多示例，但由于它非常灵活，我想说你也可以在接受用户输入的同时获得创意。因此，您可以允许用户选择任意日期，而不是选择框中的预定值（您仍然可以这样做）。我知道这不是传统的方式，但我认为使用 NLP 非常酷！所以[试试看](http://rubygems.org/gems/chronic)

# c++ - 将指针传递给成员函数

> ID：11792664
> 
> 赞同：5
> 
> 时间：2012-08-03T09:07:16.583
> 
> 标签：c++, function-pointers, glut, member-function-pointers, freeglut

我有一个带有实例函数（或方法？）的类。在一个实例中，我尝试将指向这些函数的指针传递给库。该库需要静态函数。

当我将指针传递给回调函数时，编译器抱怨我的函数不是静态的。我试图将它们设为静态，但如果我这样做，那么我将无法从函数中访问实例字段。

我怎么能绕过这个？

类似的问题是：[使用 C++ 类成员函数作为 C 回调函数](https://stackoverflow.com/questions/1000663/using-a-c-class-member-function-as-a-c-callback-function)，他们建议将方法静态化。但是我不能这样做，或者我不知道我怎么能这样做。

# 代码

```
GlutController::GlutController (int argc, char **argv) {

   // stuff ..

   // Register callbacks
   glutSpecialFunc( OnSpecialKeys );  // Error, need static functions
   glutReshapeFunc( OnChangeSize );   // Error...
   glutDisplayFunc( OnRenderScene );  // Error...

   // stuff ..
}

GlutController::~GlutController() {

}

void GlutController::OnChangeSize(int aNewWidth, int aNewHeight){

   glViewport(0,0,aNewWidth, aNewHeight);
   mViewFrustrum.SetPerspective( APP_CAMERA_FOV,             // If this function is 
            float( aNewWidth ) / float( aNewHeight ),        // static, this won't 
            APP_CAMERA_NEAR,                                 // work
            APP_CAMERA_FAR );
   mProjectionMatrixStack.LoadMatrix(                        // Same here
            mViewFrustrum.GetProjectionMatrix() );
   mTransformPipeline.SetMatrixStacks(mModelViewMatrixStack, // Same here  
            mProjectionMatrixStack);

}

void GlutController::OnRenderScene(void){
   mGeometryContainer.draw();                                // Won't work if static
}

void GlutController::OnSpecialKeys(int key, int x, int y){
   mGeometryContainer.updateKeys(key);                       // Won't work if static
} 
```

*免责声明：我刚开始使用 C++。我阅读了所有 Accelerated C++，这是我尝试该语言的第一个项目。我的背景是Java。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T09:14:21.057

你试图做的事情是不可能的。这`glut`其实是自己的错。

事情是这样的：

*   `glut`想要调用一个函数，而不给它数据，
*   你希望你的函数使用一些数据，

这是相互冲突的需求。我相信`glut`决定您可以安全地使用全局变量。

因此，一种解决方案是使用*带有静态数据的*静态函数。或者更好的解决方案是切换到[SDL](http://www.libsdl.org/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T09:18:40.950

简而言之，你不能。C++ 成员函数实际上“链接”到对象的实例。在较低级别，它们有一个额外的参数，实际上是指向该对象实例的指针。

因此，您必须使用静态函数，并且由于 glut 不允许您传递可以识别当前实例的参数，因此您必须想出一些解决方法。最简单的解决方法是使用静态成员。如果您的 GlutController 是单例的（我认为是），那么您会没事的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T11:03:01.617

使用指向您的 GlutInstance 的文件范围的静态变量（静态函数 + 静态数据，如另一个答案中提到的）是可能的并且显然是安全的。

```
static GlutController* s_this;

static void s_OnChangeSize(int w, int h) { s_this->OnChangeSize(w, h); }

GlutController::GlutController (int argc, char **argv) { 
   s_this = this;

   glutSpecialFunc(s_OnSpecialKeys);
}

GlutController::~GlutController() { s_this= 0; } 

void GlutController::OnChangeSize(int w, int h) { /* non-static stuff */ } 
```

`s_this`仅在本地文件中可见，例如对于从另一个文件调用 GlutController 构造函数的任何代码均不可见。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:14:39.120

你应该有一个`static method`和一个（可能是静态的）来调用from函数`instance`的成员函数`instance``static`

像这样的东西：

```
//static method
void MyClass::myCallback()
{
    static MyClass instance; //or you can store your in instance in some Singleton, or
    //possibly create a temporary
    instance.nonStaticMethod();
} 
```

# css - JavaFX GridPane 设置特定单元格的样式

> ID：11792669
> 
> 赞同：4
> 
> 时间：2012-08-03T09:07:31.653
> 
> 标签：css, javafx-2

我有 GridPane 并调用`gridPane.setStyle("...")`将样式设置为整个窗格。我的目标是为每一列添加边框。有没有可能实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:10:18.767

我认为仅使用 CSS 是不可能的。有些人已经在这里讨论了这个主题，并提供了一些解决方案：[https](https://forums.oracle.com/forums/thread.jspa?threadID=2384973) ://forums.oracle.com/forums/thread.jspa?threadID=2384973 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-11T14:40:28.057

如果将来 Teocali 的答案中的链接确实断开，建议的解决方案是为 GridPane 设置背景颜色并添加间隙。添加间隙可以通过在 GridPane 的 css 样式中设置 -fx-hgap 和 -fx-vgap 属性来完成，或者通过在 FXML 中修改 vgap 和 hgap 属性来完成。

然后，您可以使用 StackPane 将 GridPane 中的每一列包装起来，并在 StackPane 样式中设置不同的背景颜色。

# git - 如何 git 捆绑一个完整的 repo

> ID：11792671
> 
> 赞同：144
> 
> 时间：2012-08-03T09:07:37.940
> 
> 标签：git

我需要将完整的 repo 传输到新的非联网机器，最好作为单个文件实体。git bundle 允许在sneakernet 环境`git fetch`中`git pull`进行样式操作，但似乎假设您已经在目标机器上拥有了一个工作版本的repo。

什么是正确的调用：

1.  捆绑当前仓库中的*所有*分支
2.  在目标目录上启动新的 repo，即正确安装 root 提交

* * *

我已经向上游发送了一个补丁来澄清：

```
`git clone` can use any bundle created without negative refspecs
(e.g., `new`, but not `old..new`).
If you want to match `git clone --mirror`, which would clone other
refs such as `refs/remotes/*`, use `--all`.
If you want to provide the same set of refs that a clone directly
from the source repository would get, use `--branches --tags` for
the `<git-rev-list-args>`. 
```

所以`$ git bundle create repo.bundle --branches --tags`最好匹配克隆。

`$ git bundle create repo.bundle --all`将提供源机器的镜像，包括它的远程参考。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2012-08-03T12:14:48.970

> 什么是正确的调用：
> 
> *   捆绑当前仓库中的所有分支

简单的：

```
$ git bundle create repo.bundle --all 
```

这`repo.bundle`是您要创建的捆绑文件的名称。请注意，它`--all`不包括远程跟踪分支......就像普通克隆也不包括在内。

> *   在目标目录上启动新的 repo，即正确安装 root 提交

首先，`clone`只是`init`+ `fetch`（+ administrativia）。

其次，您可以在可以使用存储库 URL 的任何地方使用捆绑文件，因此您可以简单地`clone`从捆绑文件中：

```
$ git clone repo.bundle 
```

这将创建`repo`为一个 git 存储库。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-12-08T14:21:49.620

首先克隆存储库，并包含该`--mirror`选项。

`git clone --mirror git@example.org:path/repo.git`

这确保所有远程分支也是准备捆绑的本地分支。

然后运行

`git bundle create repo.bundle --all`正如 Jakub Narębski 的回答所描述的那样

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T09:16:46.780

我建议您 tar 或压缩 .git 文件夹，然后将其解压缩到新位置，然后执行`git reset --hard HEAD`. 所有分支所需的一切都在 .git 下，您需要做的就是调整 .git/config 文件中的任何遥控器或删除它们。

```
tar cf myrepo.tgz .git
cp myrepo.tgz [USB_STICK]
... move to new machine ...
mkdir myrepo && cd myrepo
tar xpf [USB_STICK]/myrepo.tgz
git reset --hard HEAD 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-11-01T17:10:25.143

随着 Git 2.34（2021 年第四季度），`git bundle`进一步澄清：

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 1d9c8da](https://github.com/git/git/commit/1d9c8daef8d0c9c9f57e06eac7511c3b9355960b)、[提交 0bb92f3](https://github.com/git/git/commit/0bb92f3a3a0034247868b4fcd901c18654b76c4d)、[提交 9ab80dd](https://github.com/git/git/commit/9ab80dd6aeadf398de45a6add5fc7ed6b2e166b7)、[提交 5c8273d](https://github.com/git/git/commit/5c8273d57caf173517c9eb1ca77604709e2487b0)（2021 年 7 月 31 日[）](https://github.com/avar)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 f19b275](https://github.com/git/git/commit/f19b2752e7788ad3a66812fd37fc482fc247eb4c))^(中，2021 年 8 月 24 日）)[`avar`](https://github.com/avar)
^([`gitster`](https://github.com/gitster))

> ## [`bundle doc`](https://github.com/git/git/commit/9ab80dd6aeadf398de45a6add5fc7ed6b2e166b7): 详细说明对象的先决条件
> 
> ^(签字人：Ævar Arnfjörð Bjarmason)

> 将关于“对象先决条件”的讨论分成单独的部分，并添加更多常见案例的示例。
> 
> 有关此处更改的文档的介绍，请参见[2e0afaf](https://github.com/git/git/commit/2e0afafebd8c5a1a8cdddb0714073461229ecfef)（“添加 git-bundle：按存档移动对象和引用”，2007-02-22，Git v1.5.1-rc1 -- [merge](https://github.com/git/git/commit/77b50ab009deab7f8eb703843a71ac7253b977c8)）。

`git bundle`现在在其[手册页](https://github.com/git/git/blob/9ab80dd6aeadf398de45a6add5fc7ed6b2e166b7/Documentation/git-bundle.txt#L47)中包含：

> 请参阅下面的“对象先决条件”部分。

`git bundle`现在在其[手册页](https://github.com/git/git/blob/9ab80dd6aeadf398de45a6add5fc7ed6b2e166b7/Documentation/git-bundle.txt#L156-L184)中包含：

> ## 对象先决条件
> 
> 创建捆绑包时，可以创建一个独立的捆绑包，可以在没有共同历史的存储库中解包，并提供负面修订以排除历史早期部分所需的对象。
> 
> 馈送诸如`new`to之类的修订`git bundle create`将创建一个捆绑文件，其中包含可从该修订访问的所有对象 `new`。该捆绑包可以在任何存储库中展开，以获得导致修订的完整历史记录`new`：
> 
> ```
> $ git bundle create full.bundle new 
> ```
> 
> 一个修订范围，例如`old..new`将生成一个捆绑文件，该文件将要求修订`old`（以及可从它访问的任何对象）存在，以使捆绑能够“解包”：
> 
> ```
> $ git bundle create full.bundle old..new 
> ```
> 
> 一个没有任何先决条件的独立包可以提取到任何地方，甚至可以提取到一个空的存储库中，或者从中克隆（即`new`，但不是`old..new`）。

`git bundle`现在在其[手册页](https://github.com/git/git/blob/9ab80dd6aeadf398de45a6add5fc7ed6b2e166b7/Documentation/git-bundle.txt#L195-L198)中包含：

> 'git bundle verify' 命令可用于检查您的收件人存储库是否具有捆绑所需的先决条件提交。

# android - 将文件上传到 Android 模拟器并从 Java 调用它们

> ID：11792672
> 
> 赞同：0
> 
> 时间：2012-08-03T09:07:39.077
> 
> 标签：android

我已经使用 SWIG 和 Android-NDK 将 C 共享库移植到 Android

为了测试我的一些库 API，我需要能够指定文件，例如从

我目前正在使用模拟器（我没有智能手机）进行所有开发，并且想知道如何：

a）将文件移动到模拟器（可能是 adb shell mv？）

b) 从我的 Java 代码中访问这些文件

感激地收到任何指示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:11:04.237

如果您想在您的应用程序中拥有这些文件，您可以将它们放在项目根目录的**assets/**文件夹中（如果不存在则创建它）。

从那里您可以使用 AssetManager 类访问它们

[http://developer.android.com/reference/android/content/res/AssetManager.html](http://developer.android.com/reference/android/content/res/AssetManager.html)

您也可以使用 SD 卡，这里解释了如何将文件放到 enulators SD 卡上

[手动将文件放入 Android 模拟器 SD 卡](https://stackoverflow.com/questions/2808632/manually-put-files-to-android-emulator-sd-card)

这是有关如何在之后访问数据的文档

[http://developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

# asp.net - ASP.NET 表单身份验证和持久身份验证 Cookie 安全性

> ID：11792674
> 
> 赞同：8
> 
> 时间：2012-08-03T09:07:51.333
> 
> 标签：asp.net, security, browser, ssl, forms-authentication

当我们在任何 ASP.NET 框架（ASP.NET MVC、Web 窗体等）中使用 ASP.NET 表单身份验证时，我们会将身份验证 cookie 持久保存在客户端的浏览器中。作为最佳实践，我们将 cookie 设置为 HttpOnly 且安全。我们还通过 SSL 进行所有交易。无论我们使用什么样的机制来验证用户（OAuth、ASP.NET Membership Provider 等），我们仍然需要持久化验证以获得更好的用户体验。

有了所有这些，我假设有人仍然可以从客户端浏览器中获取 cookie 并使用这些 auth cookie 值发出请求。服务器无法检测到这一点，我们会将受保护的数据提供给其他人。

一个想法是，我想降低这里的风险，每次他/她尝试采取一些严肃的行动（例如更改电子邮件地址，访问个人资料信息等）时询问客户的密码，但这并不能解决任何事情，对客户来说都可能很烦人。

对于此类问题，您是否有任何积极遵循的方法？或者在客户端浏览器中保持身份验证的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T09:30:16.360

你几乎做的一切都是正确的。

如果您使用的是会员提供程序，那么 cookie 将被标记为仅 HTTP（如您所说），因此无法通过客户端脚本（例如恶意 XSS）访问它。

如果您已将 cookie 标记为安全，那么我假设您已将表单身份验证上的“RequireSSL”标志设置为 true。通过这样做，cookie 不会在任何不通过 HTTPS 发出的请求中发送到服务器，因此即使您不小心插入了 HTTP 请求（如果它的内容嵌入在浏览器上，浏览器应该警告用户无论如何HTTPS 页面），cookie 将不会被发送。

您唯一可以做的另一件事——除了你所拥有的东西之外，这并不能提供太多的防御，但这是一个很好的做法——也是使用 HSTS。[我在OWASP Top 10 for .NET 开发人员第 9 部分](http://www.troyhunt.com/2011/11/owasp-top-10-for-net-developers-part-9.html)中谈到了这一点：传输层保护不足作为确保请求继续通过安全通道发送的附加方法。

除了对会员提供商进行一些认真的重新设计之外，您真的无能为力。您可以将会话绑定到一个 IP，并且如果它发生变化则不接受请求，但这可能会导致问题（即 IP 发生变化并且不能保护您免受同一地址上的多个人的影响）。您还可以创建浏览器的指纹（即在请求标头中发送的所有内容）并确保后续请求匹配，但我们将在这里进行非常详细的介绍。

但归根结底，安全性应该根据所保护资产的价值和恶意活动的可能性进行调整。你不会说你保护的是*什么*，但如果它是一个金融系统，你会比博客上的一个简单的评论引擎更努力。

总而言之，看起来您做得很好，只需考虑您在保护的价值背景下实施的措施的适当性。哦 - 如果您使用 SQL 成员资格提供程序进行凭证存储，请确保您阅读了[我们的密码散列没有衣服](http://www.troyhunt.com/2012/06/our-password-hashing-has-no-clothes.html)然后停止这样做！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:24:53.197

加上你所做的一切，并考虑到我额外建议的[这个问题](https://stackoverflow.com/questions/2498599/can-some-hacker-steal-the-cookie-from-a-user-and-login-with-that-name-on-a-web-s)，将更多关于用户的信息与身份验证 cookie 一起保存在服务器上，所以如果有人窃取 cookie 并尝试使用它，也是必须满足客户端的所有其他特征才能使用它。

我保留并检查的其他一些信息与身份验证 cookie 是否相同。

1.  与身份验证 cookie 连接的会话 cookie。
2.  连接的浏览器 ID
3.  用户的ip与
4.  必须启用 Javascript

我知道有人会说所有可以被黑客克隆的东西——如果黑客可以拿走 cookie，为什么不能拿走其余的。好吧，在这种情况下，没有什么是 100% 保证的，如果有人可以获取所有这些信息实际上可以拥有的信息以及密码它自己和登录 - 至少你让它更安全一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:21:38.840

您已经在使用 HTTPS 并加密 cookie，这是相当安全的。

如果您仍然担心，我建议在服务器上存储有关用户会话的其他信息（IP 地址、用户代理等），并根据会话期间提供的信息进行验证。

如果用户更改了他们的电子邮件地址，您可以向原始电子邮件地址发送一个撤销链接，因此如果该更改未经授权，则真正的所有者会收到有关更改的警报。

# javascript - jsp页面中的javascript函数

> ID：11792682
> 
> 赞同：1
> 
> 时间：2012-08-03T09:08:06.863
> 
> 标签：javascript, jsp, servlets, forms, onsubmit

我有jsp页面-

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
</head>
<body>

    <legend>Create new customer</legend>
    <script Language="JavaScript">
        function checkForm() {

            alert("YOU ARE IN checkForm FUNCTION !");
            return (false);
        }
    </script>
    <form action="CreateCustomerServlet" method="GET" onsubmit="checkForm">
        // form fields ... 
        <input type="submit" value="Create customer" />
    </form>
</body>
</html> 
```

当我在服务器上运行此页面并按下`submit`按钮时，我看到它忽略`checkForm`并且不输入他，然后直接转到`CreateCustomerServlet`。

我的目标是，当按下`submit`它时`checkForm`，如果只有`checkForm`返回`true`，它就会去`CreateCustomerServlet` 。为了达到这个目标，我必须改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:10:11.543

尝试

```
onsubmit="return checkForm();" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:10:19.483

你应该更换

```
onsubmit="checkForm" 
```

经过

```
onsubmit="return checkForm();" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:14:33.533

你应该使用

```
onsubmit="return checkForm();" 
```

因为只有在`false`返回的`onSubmit`时候才会停止，否则会继续提交表单。

# javascript - 处理重叠元素的点击

> ID：11792683
> 
> 赞同：3
> 
> 时间：2012-08-03T09:08:14.540
> 
> 标签：javascript, google-maps, google-maps-api-3

我有谷歌地图应用程序，在地图上显示一些圆圈。一些圆圈相互重叠，如下图所示。

单击圆圈时，我想显示一些附加信息。问题是，当单击重叠区域时，我想显示有关多个圆圈的信息。

呈现此信息的方法不太重要。它可以是 InfoWindow，也可以显示在地图之外的某个 DOM 元素中。没关系。

问题是如何处理点击它会触发光标下所有元素的事件。

![重叠的圆圈](../Images/290dfaf03cfbf884d631718cd675e1ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:23:03.817

Learn about event bubbling in HTML and javascript, you should be able to code an event listener that would work for all overlapping elements.

[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:42:11.190

首先，您可以为 Circle 对象添加一个方法，以便您可以检查它是否包含地图上的点击点：

```
google.maps.Circle.prototype.contains = function(latLng) {
    return this.getBounds().contains(latLng) && google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(), latLng) <= this.getRadius();
} 
```

然后，您应该将您创建的所有圆形对象添加到数组中。假设这是我正在谈论的数组：

```
var circles = new Array(); 
```

最后，当用户点击地图上的一个点时，你应该得到纬度和经度并检查上面数组的所有元素。

```
var latlng = _CLICKED_LAT_LNG_OBJECT_; // Get this from your map's click event

for(var i = 0; i < circles.length; i++) {
    var _circle = circles[i];
    if( _circle.contains( latlng ) ) {
        // here, you've got a clicked circle ;)
        // do whatever you want with _circle
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:18:43.040

如果您的圈子的数据来自数据库，您可以将圈子的可点击属性设置为 false 并将点击事件处理程序附加到地图本身。然后，当点击发生时，您通过 AJAX 调用将点击的纬度/经度发送到服务器，并在数据库中查找覆盖该点的圆圈。不用说，启用空间的数据库（如 PostgreSQL/PostGIS）会使任务变得容易得多。

# ios - 从 zip 下载的 ShareKit“未找到 SHK.h”

> ID：11792685
> 
> 赞同：0
> 
> 时间：2012-08-03T09:08:32.150
> 
> 标签：ios, sharekit

“ShareKit “SHK.h not found” 从 zip 下载！

我试过使用 git submodule 命令，但没有运气。所以我下载了 ShareKit 2.0 作为 zip。

但主要问题是“未找到 SHK.h”。我认为即使没有子模块它也应该是可见的。我试过添加标题搜索路径，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:55:23.050

我按照 wiki 上的说明集成了 sharekit，一切都编译了，但是当我`#import "SHK.h"`为第 5 部分添加时，xcode 找不到它。

当您下载 ShareKit 时，您将项目解压缩到某个目录中。就我而言，我将其下载到 Documents。因此，在我的项目文件夹中，整个共享工具包都在 Documents 下。

在[设置说明](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)的第 2 步的第 4 步中，它说将用户标题搜索路径更改为 Submodules/。由于我在文档中有它，因此我不得不将其更改为 Documents/ 。这解决了问题。

# sql - Query all the employees under a single employee

> ID：11792686
> 
> 赞同：1
> 
> 时间：2012-08-03T09:08:34.790
> 
> 标签：sql, database, oracle11g

I have an Employees table. I am using Oracle database.

```
 Employees Table
 - Employee_id
 - first_name
 - last_name
 - manager_id
 - email_id 
```

How can I query all the employees under another employee ?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:01:53.747

Oracle 有一个`CONNECT BY`语法...

```
 SELECT *
      FROM employees
START WITH employee_id = 123
CONNECT BY PRIOR employee_id = manager_id 
```

# jquery - 循环中每个项目 [number] 的 json 查询

> ID：11792687
> 
> 赞同：1
> 
> 时间：2012-08-03T09:08:35.083
> 
> 标签：jquery, json, loops

我有两个循环：一个用于计算页面中的对象，另一个用于为每个对象设置一个变量。假设 x 是对象的数量，y 是变量；所以例如：

`for x=10 ; y=3`循环保持看起来像：

```
 x:y
    1:1
    2:2
    [..]
    8:2
    9:3
    10:1 
```

对于每个对象，我需要进行 json 查询。Json 将回复 0/1 表示查询是否成功，如果响应失败，则查询必须忽略 y var：例如：

```
x:y
    1:1 //1
    2:2 //1
    3:3 //0 -   this is the failed query
    4:1 //1
    5:2 //1
    6:1 //1 -   y !=3 cause of failed query 
```

……

```
 $('button.#start').click(function(){
        var last = $('input.blue').length;
        var totalpackages = '10';
        var currentpackage;
        for( currentpackage = '1'; currentpackage <= totalpackages; )
        {// for each package;
            var n;
            for(n='1'; n <= last;)
            {
                //alert(currentpackage + ' : ' + n)
                //n++
                //currentpackage++
                $.getJSON('api/testsenderfail.php', 
                function(data){
                    worklink = data.data;
                    if(worklink == '1')
                    {
                    alert(currentpackage + ' : ' + n + ' : ' + worklink)
                    n++
                    currentpackage++
                    }else{
                    alert(currentpackage + ' : ' + n + ' : ' + worklink)
                    n++
                    //currentpackage++
                    }
                });
            }
        }
    }) 
```

我确定我做错了什么。Mozzila 警告“此页面上的脚本可能正忙，或者它可能已停止响应。您可以立即停止该脚本，或者您可以继续查看该脚本是否会完成。”

PHP 脚本“api/testsenderfail.php”生成 json 数组并输出 {"data":"1"} (0/1) 90% 输出 1 和 10% 输出 0。这是出于测试目的。

```
<?php
    $rand = rand(0, 9);
    if($rand == '0'){$work = '0';}else{$work = '1';}
    $data = array('data' => $work);
    echo json_encode($data);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:56:13.487

我找到了一种简单的方法。我会发布以防其他人处于同样的情况。

```
$('button.#start').click(
  function(){
    var X;
    for(X='1'; X <= lastX;){
      do_Y_vals(x, y) // here a loop to count X that will pass every X to another function  
      x++
      y++
    }
  }) 
```

在这个函数内部查询每个 X。如果他得到回复，函数循环直到 y = lastY

```
function do_y_vals(x){
  $.getJSON(//variables here
    function(data){
      if(data.reply == '1'){
        function do_y_vals(x, y)
        y++
      }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:20:30.807

AJAX 调用是异步的，这意味着回调方法将在您退出单击事件处理程序后运行。您只是在回调方法中更改循环计数器，这只能在您完成循环后发生，并且只能在您更改循环计数器后发生。

所以，你有一个永恒的循环。

# installation - 使用压缩存档在 Windows 上安装 Java 3D

> ID：11792688
> 
> 赞同：2
> 
> 时间：2012-08-03T09:08:39.260
> 
> 标签：installation, java-3d

我正在尝试使用[此处](http://download.java.net/media/java3d/builds/release/1.5.2/)提供的压缩存档在 Windows 上手动安装 Java 3D 1.5.2 。存档中的 README-unzip.html 文件中的安装说明如下：

> 视窗
> 
> 适用于 Windows 2000、Windows XP（x86 或 amd64）和 Windows Vista 的 Java 3D API 1.5.2 版本在 JDK 1.5.0 及更高版本上运行。要手动安装此版本，请执行以下操作：
> 
> 1.  下载 j3d-1_5_2-XXX.zip（使用 Windows 资源管理器或 WinZip 等解压缩工具）并将其解压缩到临时下载文件夹，例如 c:\Downloads。这将在您的下载文件夹中创建一个 j3d-1_5_2-XXX 子文件夹，您可以在其中找到下载的文件。手动安装所需的文件是 j3d-jre.zip。
>     
>     
> 2.  为 j3d jar 文件和本机库创建一个文件夹，例如 C:\Users\myhome\j3d，并将 j3d-jre.zip 解压缩到此文件夹中。
>     
>     
> 3.  修改 CLASSPATH 环境变量以包含 j3dcore.jar、j3dutils.jar 和 vecmath.jar 的完整路径。例如，使用系统控制面板、高级选项卡、环境变量按钮将以下内容添加到您的 CLASSPATH 变量中：
>     
>     
> 
> > ;C:\Users\myhome\j3d\lib\ext\j3dcore.jar;C:\Users\myhome\j3d\lib\ext\j3dutils.jar;C:\User > s\myhome\j3d\lib\ext\ vecmath.jar
> 
> 4\. 修改您的 PATH 环境变量以包含 lib\i386 文件夹（或 lib\amd64 对于 Windows/x64）的完整路径。例如，在 32 位 Windows 上，使用系统控制面板、高级选项卡、环境变量按钮将以下内容添加到 PATH 变量中。
> 
> C:\Users\myhome\j3d\lib\i386
> 
> 此时您的 Java 安装应该能够看到 j3d 类文件。NetBeans 和 Eclipse 等 IDE 的用户应查阅 IDE 的文档以了解如何将 jar 文件和本机库添加到他们当前的项目中。

根据步骤 4，我将 lib 文件夹中名为“i386”的文件夹添加到 PATH 变量中。但是，lib 文件夹中不存在这样的文件夹！我应该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:04:11.977

将 j3d\bin 文件夹添加到 PATH 变量中。

它应该包含 32 位或 64 位的 DLL 文件，其名称类似于 j3d-ogl.dll。

除了 Java 6 SDK 之外，我还编写了一个安装 Java3D 1.5.2 的 .exe。如果你想看看，源代码在这个[GitHub 存储库- 它是用 PowerShell 编写的。](https://github.com/hmartiro/princeton-java-installers)64 位 Java 3D 是从[j3d64.zip](http://introcs.cs.princeton.edu/java/windows/j3d64.zip)下载的。32 位在同一个地方，后缀是 32 而不是 64。

以下是安装日志的相关片段，详细说明了所采取的步骤：

```
#### Step 2 - Java3D ###############################################

Downloading Java3D from
http://introcs.cs.princeton.edu/java/windows/j3d64.zip
to
C:\Users\username\introcs\j3d.zip

Extracting zip archive in place at
C:\Users\username\introcs\j3d.zip
and deleting .zip file.

Setting the user PATH environment variable to include
C:\Users\username\introcs\j3d\bin

Setting the user CLASSPATH environment variable to include
C:\Users\username\introcs\j3d\lib\ext\vecmath.jar

Setting the user CLASSPATH environment variable to include
C:\Users\username\introcs\j3d\lib\ext\j3dcore.jar

Setting the user CLASSPATH environment variable to include
C:\Users\username\introcs\j3d\lib\ext\j3dutils.jar 
```

# java - 如何使用 jnlp 文件在控制面板的“添加或删除程序”中设置“版本”

> ID：11792694
> 
> 赞同：2
> 
> 时间：2012-08-03T09:09:31.463
> 
> 标签：java, windows, jnlp

我正在使用 JNLP 安装应用程序。

它的条目添加在添加/删除程序下，但未显示其他有用信息。

在 Windows XP 中，它只显示与信息标签的供应商和描述子标签相对应的条目。

有没有办法从 jnlp 文件中添加有关应用程序的版本和大小信息？

# plesk - 无法在 Plesk 11 中显示日志文件

> ID：11792696
> 
> 赞同：0
> 
> 时间：2012-08-03T09:09:36.537
> 
> 标签：plesk

如果我尝试在 Plesk 中打开一个日志文件，我会得到一个空的弹出窗口。可以下载日志文件。

这是一个全新安装的系统，带有 Ubuntu 12 和 Plesk 11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:45:15.420

Parallels 刚刚发布了新版本的 Plesk Mobile Manager，可用于通过 iPad 或 iPhone 浏览访问和面板日志。如果您的 Plesk 有 PowerPack，则该应用程序可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T01:15:41.760

您要打开哪些日志文件？HTTP？普莱斯克？Nginx？php? 需要考虑的一件事是像 Splunk 这样的服务。您可以通过 Splunk 服务获取所有 HTTP/Plesk/NGINX/Syslog 文件。然后，您可以在一个漂亮整洁的界面中查看所有内容。

# asp.net-mvc - ASP.NET Mvc 向帖子所有者显示元素？

> ID：11792699
> 
> 赞同：0
> 
> 时间：2012-08-03T09:09:50.867
> 
> 标签：asp.net-mvc, razor, comparison

我正在比较，如果当前用户是帖子的所有者或个人资料的所有者，如下所示。

```
if (Request.IsAuthenticated)
{
      if (Users.IsInRole("Admin") || (Guid)System.Web.Security.Membership.GetUser().ProviderUserKey == Model.UserId)
      {
          @Html.ActionLink("EditProfile", "EditProfile", "UserProfile")
      }
} 
```

这是最好的方法还是有更好的方法来控制这种比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:18:07.587

这是业务逻辑。我不会把这张支票放在视图中。

更好的一步是在控制器中完成检查，然后设置视图模型的布尔参数。

更好的是在控制器可以查询的某种业务层中运行检查。

至于视图，可能还有其他情况需要您显示编辑选项（例如，用户是管理员）。通过保持视图哑铃，您可以最大限度地提高它们的可重用性：

```
@if(Model.ShowEditLink){
    @Html.ActionLink("EditProfile", "EditProfile", "UserProfile")
} 
```

# excel - 根据其他单元格复制一个单元格中的值并构建数据

> ID：11792702
> 
> 赞同：0
> 
> 时间：2012-08-03T09:10:02.793
> 
> 标签：excel, vba

我有一个数据表，其中包含人员的姓名和他们每天工作的时间。我需要总结每个人每天和每周工作的数字。工作表看起来像这样

```
 A      B  
Peter  8.000  
Bob    4.000  
Jane   3.000  
Jane   4.000 
```

每个人都有几个条目，我的老板希望我每周和每月显示它们，这样他就可以跟踪某人最近是否比其他人加班。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:17:15.833

我同意 Jmax 和 KingCronus 的观点。您实际上不需要宏。你可以用一个公式来实现它。

**非 VBA**

我假设值在 Col A 和 Col B 中。

```
=SUMPRODUCT((A:A="Jane")*(B:B)) 
```

**VBA**

如果您仍然想要 VBA，那么您可以使用它

```
Sub Sample()
    Dim sName As String

    sName = "Jane"

    Debug.Print Application.Evaluate("=SUMPRODUCT((A:A=" & _
    Chr(34) & sName & Chr(34) & ")*(B:B))")
End Sub 
```

# iphone - MGTwitterEngine 已经设置了下一步？

> ID：11792704
> 
> 赞同：0
> 
> 时间：2012-08-03T09:10:08.377
> 
> 标签：iphone, objective-c, ios, mgtwitterengine

我已将 MGTwitterEngine 设置为我的项目。登录后我收到消息`Authenticated with user MyName`。但接下来呢？我尝试了类似的东西`NSLog("%@",[self.engine getFollowedTimelineSinceID:1 startingAtPage:1 count:100])`并得到`CFD0815B-8124-4F26-8E63-A2AB4CB830EB`. 例如，我怎样才能获得我的最后一条推文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:41:10.837

有一个[很好的教程](http://www.icodeblog.com/2010/09/16/dealing-with-the-twitter-oauth-apocalypse/)解释了如何使用**MGTwitterEngine**以及 **Twitter OAuth,SAOAuthTwitterEngine** 。我不确切知道您使用的是哪个第三个库，但我认为这可能有用。

# python - 从限制下的 int 列表生成所有可能的组合

> ID：11792708
> 
> 赞同：5
> 
> 时间：2012-08-03T09:10:19.047
> 
> 标签：python, list, optimization, combinations

我需要在 Python 中执行此操作。有一个给定的列表 l，可能包含超过 5000 个整数元素。数字总和有限制，20000 或可能很高。输出应该是从列表中选择的 2 个数字的所有可能总和，例如，

```
l=[1,2,3,4,5,6,7,8,9]
output 
1+1,1+2,1+3,1+4,1+5,1+6...........
2+2,2+3,2+4.......
.........
.......

2,3,4,5,6... like that 
```

我正在使用此代码，暂时执行此操作，但速度很慢

```
l=listgen()
p=[]
for i in range(0,len(l)):
    for j in range(i,len(l)):
        k=l[i]+l[j]
        if k not in p:
            p.append(k)
p.sort
print(p) 
```

`listgen()`是生成输入列表的函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T09:33:03.937

一些老式的优化可能会为您提供比具有多个 for 循环的列表推导更容易理解的更快代码：

```
def sums(lst, limit):    # prevent global lookups by using a function
    res = set()          # set membership testing is much faster than lists
    res_add = res.add    # cache add method
    for i, first in enumerate(lst):   # get index and item at the same time
        for second in lst[i:]:        # one copy operation saves n index ops.
            res_add(first + second)   # prevent creation/lookup of extra local temporary
    return sorted([x for x in res if x < limit])

print sums(listgen(), 20000) 
```

作为额外的奖励，此版本将与 psyco、cython 等进行完美优化。

**更新：** 当将此与其他建议进行比较时（将 listgen 替换为 range(5000)，我得到：

```
mine:        1.30 secs
WolframH:    2.65 secs
lazyr:       1.54 secs (estimate based on OPs timings -- I don't have Python 2.7 handy) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T09:13:21.523

**编辑：** Thebjorn 说他有最有效的解决方案，我自己的测试也同意，尽管我的表现有所提高。他的代码也较少依赖于 python 版本，并且似乎经过深思熟虑并在优化方面进行了解释。你应该接受他的回答（并给他投票）。

使用[`itertools.combinations_with_replacement`](http://docs.python.org/library/itertools.html#itertools.combinations_with_replacement)（在 python 2.7 中添加），并制作`p`一个`set`.

```
def sums(lst, limit):
    from itertools import combinations_with_replacement
    p = set(x + y for x, y in combinations_with_replacement(listgen(), 2))
    return sorted([x for x in p if x < limit]) 
```

由于这一行，您的代码很慢：

```
if k not in p: # O(N) lookup time in lists vs average case O(1) in sets 
```

如果你只是对你的代码做一些小的改动，那么`p`它`set`就会产生很大的不同：

```
L = listgen()
p = set()
for i in range(0, len(L)):
    for j in range(i, len(L)):
        p.add(L[i] + L[j])
print(sorted(p)) 
```

顺便说一句，你的例子中的这一行

```
p.sort 
```

没有效果。您必须调用一个方法来实际执行它，如下所示：

```
p.sort() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T09:15:27.190

编辑：包括限制（不在 OP 的代码中）。

```
a = set(x + y for x in l for y in l)
print(sorted(x for x in a if x < limit)) 
```

这也降低了算法的复杂性（由于列表中的成员资格测试，您的算法可能是 O(n^4)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T09:29:53.663

如果输入列表是排序的，当你达到限制时，你可以跳出内循环。另外，做`p`一套。

```
lst=listgen()
lst.sort()
p=set()
for i in range(0,len(lst)):
    for j in range(i,len(lst)):
        k=lst[i]+lst[j]
        if k > limit:
            break
        p.add(k)
p = sorted(p)
print(p) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T09:40:27.583

您可以为此使用“NumPy”。这无疑为您提供了所需的性能：

```
import numpy as np

data = np.arange(5000)
limit = 20000
result = np.zeros(0,dtype='i4')
for i in data:
    result = np.concatenate((result,data[i]+data[i:]))
    if len(result) >= limit: break
result = result[:limit] 
```

**编辑：** 我刚刚意识到限制是总和而不是元素的数量。然后代码应为：

**EDIT2：** 发现进一步的逻辑错误。我更正的建议是：

```
for idx, x in np.ndenumerate(data):
    result = np.concatenate((result,x+data[idx[0]:]))
    if x + data[-1] >= limit: break
result = result[result <= limit] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T09:17:41.347

如果列表可以包含重复的元素，那么首先摆脱它们可能是一个明智的主意，例如将列表转换为集合。

# c# - 实体框架 - ExecuteFunction 返回 null 而不是异常

> ID：11792711
> 
> 赞同：1
> 
> 时间：2012-08-03T09:10:33.067
> 
> 标签：c#, sql-server, entity-framework

我有一个非常简单的存储过程，我用它来测试一些东西：

```
ALTER PROCEDURE [cms].[TestSPROC]
AS
BEGIN

DECLARE @Test INT 

    SELECT *,CONVERT(NUMERIC(3,2),15) AS Test
    FROM Viper.Currencies

END 
```

SP 应返回算术溢出异常，并在 SQL Server Management Studio 中执行此操作。

**问题：** 在我的应用程序中使用实体框架的`.ExecuteFunction<T>`方法调用 SP 时，**返回 null 而不是抛出 EntityException**。（使用函数导入时会发生同样的事情，但本质上只是调用`.ExecuteFunction<T>`）

这是我的代码：

```
using (CmsEntities context = new CmsEntities())
{
    try
    {
        context.ExecuteFunction<TestSPROCResult>("TestSPROC");
    }
    catch (EntityException exc)
    {
        MessageBox.Show(exc.Message);
    }
} 
```

如果我调用`context.ExecuteFunction("TestSPROC");`异常被抛出并处理，那么问题可能与复杂类型有关。

有没有人遇到过/设法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:22:09.280

ExecuteFunction 返回一个实体集，但执行会延迟到实际需要时。因此，在您的示例中，该函数从未被实际调用。

尝试

```
context.ExecuteFunction<TestSPROCResult>("TestSPROC").ToList(); 
```

强制执行

# html - CSS 和 HTML 水平弹出菜单 - 位于右侧的弹出菜单

> ID：11792714
> 
> 赞同：2
> 
> 时间：2012-08-03T09:10:46.893
> 
> 标签：html, css

我正在尝试使用 CSS 和 HTML 创建一个弹出菜单。本质上，我想显示一个按钮，当悬停时会在其下方显示一个列表。弹出列表应与按钮的右侧对齐。例如

```
 ////////////
           // BUTTON //
           ////////////
///////////////////////
//  FLYOUT OPTION    //
/////////////////////// 
```

我遵循了一些示例并生成了以下 jsFiddle - [http://jsfiddle.net/JT5gs/](http://jsfiddle.net/JT5gs/)

但是，我无法找到使用 .filtersnav ul 规则的边距值将弹出菜单与表单分开放置的方法。例如

```
.filtersnav ul {
    margin:0px 0px 0px -165px; 
```

当我知道显示浮出控件的主按钮的宽度时，此方法有效，但我需要向我的网站添加本地化，​​以便按钮可以是任意长度，因为其中的文本可能会发生变化。

为了澄清我的问题，当按钮的宽度未确定时，是否可以将弹出菜单放置在按钮的右侧？JsFiddle 显示了一个弹出菜单，其中菜单正确对齐到右侧，但第二个弹出菜单（带有包含较长文本值的按钮）未正确对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:17:23.273

戴上`position: relative`您的`li`标签，并在标签上设置`right: 0`而不是边距`ul`：

```
.filtersnav {
  background:#eeeeee;
  font-size:12px;
  font-family:verdana,sans-serif;
  font-weight:bold;
  z-index:1000;
  padding:0;
}
.filtersnav, .filtersnav ul {
  float:right;
  list-style:none;
  margin:0px;
  border: 1px solid #CCCCCC;
  min-width: 75px;
  padding:0;
  background-color: #EEEEEE;
  font-weight:bold;
  z-index:1000;
}
.filtersnav span {
  display:block;
  color:#000000;
  text-decoration:none;
  padding:3px 10px;
  cursor:pointer;
}
.filtersnav li {
  position: relative;
  float:left;
  padding:0;
  background:#eeeeee url('../images/Down.png') no-repeat 97% center;
}
.filtersnav ul {
  position:absolute;
  left:-999em;
  height:auto;
  width:280px;
  font-weight:normal;
  right: 0;
  line-height:1;
  border:0;
  border-top:1px solid #CCCCCC;
  padding:0;
}
.filtersnav li li {
  width:280px;
  border-bottom:1px solid #CCCCCC;
  border-left:1px solid #CCCCCC;
  border-right:1px solid #CCCCCC;
  font-weight:bold;
  font-family:verdana,sans-serif;
  background:#eeeeee;
}
.filtersnav li li span {
  padding:10px 10px;
  width:260px;
  font-size:12px;
  color:#000000;
}
.filtersnav li ul ul {
  margin:-33px 0 0 -281px;
  padding:0px;
  max-height:262px;
  overflow-x: hidden;
  overflow-y: auto;
}

.filtersnav li li:hover{
  background:#145197;
}
.filtersnav li ul li:hover span, .filtersnav li ul li li:hover span, .filtersnav li ul li li li:hover span, .filtersnav li ul li li li:hover span {
  color:#ffffff;
}
.filtersnav li:hover span, .filtersnav li.sfhover span {
  color:#ffffff;
}
.filtersnav li:hover li span, .filtersnav li li:hover li span, .filtersnav li li li:hover li span, .filtersnav li li li li:hover li span {
  color:#000000;
}
.filtersnav li:hover ul ul, .filtersnav li:hover ul ul ul, .filtersnav li:hover ul ul ul ul, .filtersnav li.sfhover ul ul, .filtersnav li.sfhover ul ul ul, .filtersnav li.sfhover ul ul ul ul {
  left:-999em;
}
.filtersnav li:hover ul, .filtersnav li li:hover ul, .filtersnav li li li:hover ul, .filtersnav li li li li:hover ul, .filtersnav li.sfhover ul, .filtersnav li li.sfhover ul, .filtersnav li li li.sfhover ul, .filtersnav li li li li.sfhover ul {
  left:auto;
  background:#eeeeee;
}
.filtersnav li:hover, .filtersnav li.sfhover {
  background:#145197 url('../images/DownSel.png') no-repeat 97% center;
}
.filtersnav li li:hover img {
  filter:Invert;
}    
.filtersnavSelected {
  background-color:#FCBF44
}
```

```
<ul class="filtersnav">
  <li>
    <span>Another Flyout Menu &nbsp; &nbsp;</span>
    <ul>
      <li>
        <span>Option</span>
        <ul>
          <li><span>Sub Option</span></li>
        </ul>
      </li>
    </ul>
  </li>
</ul> 

<ul class="filtersnav" style="margin-right:25px;">
  <li>
    <span>Flyout Menu &nbsp; &nbsp;</span>
    <ul>
      <li>
        <span>Option</span>
        <ul>
          <li><span>Sub Option</span></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
```

# android - 在 CustomListView 的 EditText 中保留和检索值

> ID：11792715
> 
> 赞同：2
> 
> 时间：2012-08-03T09:10:53.303
> 
> 标签：android, android-listview

我正在尝试在自定义列表中创建一个`ListActivity`具有`CheckBox`,`TextView`和`EditText`连续的。

I need to get the user's input in my `EditText`and save that value in a database when the `CheckBox`for that row is selected. 如果`CheckBox`未选择，`EditText`则禁用。后者我可以做到，但我无法保留 的值`EditText`并将其存储在数据库中。

目前，如果我输入任何内容`EditText`并按下后退按钮以最小化键盘，则会`EditText`返回到之前的值。

到目前为止，我已经编写了以下代码以显示自定义`ListView`以及选择和取消选择复选框。我只需要帮助我完成这`EditText`部分。

编辑Exepense.Java

```
package h.pkg.main;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.RadioGroup.OnCheckedChangeListener;

public class EditExpense extends ListActivity {
    int eid, tid, mid;
    String etyp,amount;
    float eamt;
    DBAdapter db;
    ArrayList<Integer> memmid = new ArrayList<Integer>();
    ArrayList<String> memname = new ArrayList<String>();
    ArrayList<Float> memcexp = new ArrayList<Float>();  
    List<Model> list = new ArrayList<Model>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Button Save = (Button)findViewById(R.id.Save);
        //ListView l1= (ListView)findViewById(R.id.listView1);
        setContentView(R.layout.eexp);
        Bundle idata = getIntent().getExtras();
        db = new DBAdapter(this);

        if (idata !=null)
        {
            eid=idata.getInt("EID");
            tid=idata.getInt("TID");
            etyp=idata.getString("ETYP");
            eamt=idata.getFloat("EXAMT");
            amount = "" + eamt;
        }

        try {
            db.open();
            Cursor c = db.getAllmem(tid);
            float nofm = (float)(c.getCount());
            float evenshareamt = eamt/nofm;
            db.close();

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String MN = c.getString(c.getColumnIndex("NAME"));
                        mid = c.getInt(c.getColumnIndex("MID"));
                        String ceamts = String.valueOf(evenshareamt);

                        list.add(get(MN,ceamts,true));

                        memname.add(MN);
                        memmid.add(mid);
                        memcexp.add(evenshareamt);
                    } while (c.moveToNext());
                } 
            }

            c.close();
        } finally {
        }

        ArrayAdapter<Model> adapter = new InteractiveArrayAdapter(this,list);
        setListAdapter(adapter);

        RadioGroup radioGroup = (RadioGroup) findViewById(R.id.radioGroup1);
        RadioButton rbs = (RadioButton) findViewById(R.id.Shared);
        RadioButton rbc = (RadioButton) findViewById(R.id.Custom);

        radioGroup.setOnCheckedChangeListener( new OnCheckedChangeListener() {
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                RadioButton rbs = (RadioButton) findViewById(R.id.Shared);

                if (rbs.isChecked()) {
                    //DisplayToast("Option 1 checked!");
                } else {
                    //DisplayToast("Option 2 checked!");
                }
            }
        });
    }    

    public void expUpdate(View V) {
        setResult(RESULT_OK);
        finish();
    }

    private Model get(String memn, String ceam, boolean sel) {
        return new Model(memn,ceam,sel);
    }
} 
```

InteractiveArrayAdapter.Java

```
package h.pkg.main;
import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnFocusChangeListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.TextView;

public class InteractiveArrayAdapter extends ArrayAdapter<Model> {
    private final List<Model> list;
    private final Activity context;

    public InteractiveArrayAdapter(Activity context, List<Model> list) {
        super(context, R.layout.listview, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {
        protected TextView memnames;
        protected EditText ceamount;
        protected CheckBox checkbox;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.listview, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.memnames = (TextView) view.findViewById(R.id.memname1);
            viewHolder.ceamount = (EditText) view.findViewById(R.id.expamt1);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.chkbox1);
            viewHolder.checkbox.setOnCheckedChangeListener( new CompoundButton.OnCheckedChangeListener() {
                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                                                            boolean isChecked) {
                    Model elementc = (Model) viewHolder.checkbox.getTag();
                    elementc.setSelected(buttonView.isChecked());
                    boolean edenable = buttonView.isChecked();
                    if(edenable)
                    {
                        viewHolder.ceamount.setEnabled(true);
                    } else {
                        viewHolder.ceamount.setText("");
                        viewHolder.ceamount.setEnabled(false);
                    }
                }
            });

            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.memnames.setText(list.get(position).getName());
        holder.ceamount.setText(list.get(position).getCeamt());
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
    }
} 
```

模型.Java

```
package h.pkg.main;

public class Model {
    private String name;
    private String ceexpamt;
    private boolean selected;

    public Model(String name, String ceexpamt, boolean selected) {
        this.name = name;
        this.ceexpamt = ceexpamt;
        this.selected = selected;
    }

    public String getName() {
        return name;
    }

    public String getCeamt() {
        return ceexpamt;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setCeamt(String ceamt) {
        this.ceexpamt = ceamt;
    }

    public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }

    public void enableEditText()
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:11:47.987

大家好，感谢您的回答..但是由于我已经在使用模型类...我尝试通过该示例本身完成任务...请查看修改后的 InteractiveArrayAdapter.Java 这在保留编辑文本的值方面效果很好编辑后在正确的行中。

我刚刚将此方法添加到我的 InterativeArrayAdapter.java

```
viewHolder.ceamount.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                // TODO Auto-generated method stub
                 if (!hasFocus){
                     viewHolder.ceamount.setFocusable(true);
                     Model elemente = (Model) viewHolder.ceamount.getTag();
                     final EditText custamt = (EditText) v;
                     elemente.setCeamt(custamt.getText().toString());
                }
            }
        }); 
```

请参阅下面的完整代码..

```
package h.pkg.main;
import java.util.HashMap;
import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnFocusChangeListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.TextView;

public class InteractiveArrayAdapter extends ArrayAdapter<Model> {

    private final List<Model> list;
    private final Activity context;

    public InteractiveArrayAdapter(Activity context, List<Model> list) {
        super(context, R.layout.listview, list);
        this.context = context;
        this.list = list;
    }

    static class ViewHolder {
        protected TextView memnames;
        protected EditText ceamount;
        protected CheckBox checkbox;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.listview, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.memnames = (TextView) view.findViewById(R.id.memname1);
            viewHolder.ceamount = (EditText) view.findViewById(R.id.expamt1);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.chkbox1);
            viewHolder.checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {
                            Model elementc = (Model) viewHolder.checkbox.getTag();
                            elementc.setSelected(buttonView.isChecked());
                            boolean edenable = buttonView.isChecked();
                            if(edenable)
                            {
                            viewHolder.ceamount.setEnabled(true);
                            }
                            else
                            {
                                viewHolder.ceamount.setText("");
                                viewHolder.ceamount.setEnabled(false);
                            }

                        }
                    });

            viewHolder.ceamount.setOnFocusChangeListener(new OnFocusChangeListener() {

                @Override
                public void onFocusChange(View v, boolean hasFocus) {
                    // TODO Auto-generated method stub
                     if (!hasFocus){
                         viewHolder.ceamount.setFocusable(true);
                         Model elemente = (Model) viewHolder.ceamount.getTag();
                         final EditText custamt = (EditText) v;
                         elemente.setCeamt(custamt.getText().toString());
                    }
                }
            });
            view.setTag(viewHolder);
            viewHolder.memnames.setTag(list.get(position));
            //viewHolder.memnames.setId(position);
            viewHolder.checkbox.setTag(list.get(position));
            //viewHolder.checkbox.setId(position);
            viewHolder.ceamount.setTag(list.get(position));
            //viewHolder.ceamount.setId(position);
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
            ((ViewHolder) view.getTag()).memnames.setTag(list.get(position));
            ((ViewHolder) view.getTag()).ceamount.setTag(list.get(position));
        }

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.memnames.setText(list.get(position).getName());
        holder.ceamount.setText(list.get(position).getCeamt());
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:19:49.600

在您的适配器中，使用`Map<Integer,Boolean>`and`Map<Integer,String>`来存储复选框的状态和 editText 的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:52:15.393

Map 是两种数据类型之间的链接，因此从 Integer 到 Boolean 的 Map 是从特定整数值到相应的布尔值（ 1 -> true ， 2 -> false 等）的一对一函数所以这个从本质上讲，您可以为每个列表位置维护一个“映射”到复选框的状态。因此，在 java 中实现 Map 的方法是：

```
Map<Integer,Boolean> listMap = new HashMap<Integer,Boolean>(); 
```

当您希望将一个列表元素的映射添加到它的布尔状态时，您必须使用以下代码：

```
listMap.put(yourListPositionInIntValue, statusOfCheckboxInTrueOrFalse); 
```

当您希望修改地图中的布尔值时，您所要做的就是使用相同的 ListPosition 和更新的布尔值重复上述代码行。

# jquery - 多个 ajax 调用同步工作

> ID：11792718
> 
> 赞同：2
> 
> 时间：2012-08-03T09:11:13.957
> 
> 标签：jquery, ajax

我正在使用的 Ajax 代码：

```
$(document).ready(function(){
        $.ajax({
            url:"load_search_list.php",
            async:true,
            beforeSend: function()
            {
                $("#loadStatus" ).html('laoding 1');
            },
            success: function(msg)
            {
                $("#loadStatus").html(msg);
                $.ajax({
                    url : 'load_search_complete_list.php',
                    async:true,
                    success: function(msg)
                    {
                        alert(msg)
                    }
                });
            }
        });
        $('input#detail').click(function(){
            $.ajax({
                url:laod_details.php,
                data:{id: $(this).val()},
                async:true,
                success: function(res)
                {
                    $('#detail'+$(this).val() ).html(res);
                }       
            });
        });
}); 
```

我正在使用下面提到的 3 个 ajax 调用 - 1\. 此调用从数据库加载前 10 条记录并显示给用户 2\. 在第一个 ajax 成功时，我使用此 ajax 调用从数据库加载其余详细信息。3\. 这个 ajax coll 我用来加载从数据库中获取的记录的详细信息。

现在，当加载前 10 条记录时，将进行另一个 ajax 调用以加载其余记录，但与此同时，如果我尝试获取屏幕上显示的任何记录的详细信息，则仅在第二个 ajax 调用之后才执行此 ajax 调用已完成我什至尝试使用 async true 但它对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:20:44.480

试试这个方法。我不确定

```
$(document).ready(function(){
         $('input#detail').click(function(){
            $.ajax({
                url:"load_details.php",
                data:{id: $(this).val()},
                async:true,
                success: function(res)
                {
                    $('#detail'+$(this).val() ).html(res);
                }       
            });
        });

        setTimeout(function(){
        $.ajax({
            url:"load_search_list.php",
            async:true,
            beforeSend: function()
            {
                $("#loadStatus" ).html('laoding 1');
            },
            success: function(msg)
            {
                $("#loadStatus").html(msg);
                $.ajax({
                    url : 'load_search_complete_list.php'
                    async:true,
                    success: function(msg)
                    {
                        alert(msg)
                    }
                });
            }
        });
     },100);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:21:06.243

更改`laod_details.php`为`"load_details.php"`。

`laod_details`由于缺少引号和拼写错误的 url 名称，请求失败（或者您更可能收到语法错误，因为它不是有效的对象名称）。如果您的 ajax 请求中没有`error`回调，如果服务器以错误代码响应（例如在这种情况下找不到 404），您将不会收到通知。`error: function() {...}`为您的请求添加一个选项。

# java - 将 javax.* 包添加到 android 应用程序

> ID：11792719
> 
> 赞同：-2
> 
> 时间：2012-08-03T09:11:19.307
> 
> 标签：java, android

我正在寻找一种将`javax.*`包添加到我的 android 应用程序的方法。由于 dalvik 错误，添加 jars 的正常方法不起作用（一些`javax.*`包已实现，但不是我需要的。我无法覆盖核心类）我已经在以下位置找到了这个解决方案： [google Code wiki Link](http://code.google.com/p/dalvik/wiki/JavaxPackages%20but%20since%20API10%20android_rules.xml)但是因为 API10 android_rules.xml 不再存在。所以我不能使用教程。

我希望有人可以帮助我解决这个问题，最好在 Eclipse 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:44:39.767

你上班的几率`java.xml.crypto`不大。但是，您可以尝试从 OpenJDK 中获取这些类（因为它们似乎不存在于 Apache Harmony 中），然后将它们重构到一个新的包中（例如，`jay.xml.crypto`）。请记住，如果您使用 OpenJDK 代码，则需要根据 GPL 许可您的应用程序。

# asp.net - Web应用程序中的CLR触发器？

> ID：11792720
> 
> 赞同：1
> 
> 时间：2012-08-03T09:11:21.507
> 
> 标签：asp.net, sql-server, clr, signalr

我刚刚开始使用 SQL-CLR 来创建一个非常基本的触发器......但是当我这样做时，另一个问题“弹出”了......无论如何，实际上是否有一个 SQL 触发器来触发 Web 应用程序中的一个方法？ .我的第一个想法是有一个Web服务，它将位于SQL-CLR然后调用的Web应用程序中。整个想法是一旦触发器被“触发”..它将调用一个SignalR-hub然后提醒客户数据库中发生了一些事情..整个事情对我来说更具实验性..我不能使用网络服务方式的原因..是每次触发器获取时都需要额外的请求“触发”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:22:18.723

不要从触发器进行 HTTP 调用。引入这种耦合会导致性能下降，会降低可用性，增加延迟并使系统极其脆弱（HTTP 失败会导致触发器失败，进而导致事务失败）。

而是将 HTTP 调用与触发器分离。在触发器中，将调用请求放入[队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)中，并让 HTTP 请求从监视队列的外部进程完成。

监控数据库更改的系统已经存在，实时更改的[查询通知和断开系统的](http://rusanu.com/2006/06/17/the-mysterious-notification/)[更改跟踪](http://msdn.microsoft.com/en-us/library/cc280462%28v=sql.105%29.aspx)。

# javascript - 使用 jQuery 将秒转换为 H:M:S 格式

> ID：11792726
> 
> 赞同：8
> 
> 时间：2012-08-03T09:11:44.507
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [使用 javascript 将秒转换为 HH-MM-SS？](https://stackoverflow.com/questions/1322732/convert-seconds-to-hh-mm-ss-with-javascript)

如何使用 jQuery 将 125 秒变成 00:02:05？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-03T09:19:47.930

来吧！您不需要 jQuery 来实现这一点:-) 这是一个可能的片段：

```
function secondsTimeSpanToHMS(s) {
  var h = Math.floor(s / 3600); //Get whole hours
  s -= h * 3600;
  var m = Math.floor(s / 60); //Get remaining minutes
  s -= m * 60;
  return h + ":" + (m < 10 ? '0' + m : m) + ":" + (s < 10 ? '0' + s : s); //zero padding on minutes and seconds
}

console.log(secondsTimeSpanToHMS(125));
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T09:20:07.277

试试这个代码：

```
function getTime(seconds) {

    //a day contains 60 * 60 * 24 = 86400 seconds
    //an hour contains 60 * 60 = 3600 seconds
    //a minut contains 60 seconds
    //the amount of seconds we have left
    var leftover = seconds;

    //how many full days fits in the amount of leftover seconds
    var days = Math.floor(leftover / 86400);

    //how many seconds are left
    leftover = leftover - (days * 86400);

    //how many full hours fits in the amount of leftover seconds
    var hours = Math.floor(leftover / 3600);

    //how many seconds are left
    leftover = leftover - (hours * 3600);

    //how many minutes fits in the amount of leftover seconds
    var minutes = Math.floor(leftover / 60);

    //how many seconds are left
    leftover = leftover - (minutes * 60);
    document.write(days + ':' + hours + ':' + minutes + ':' + leftover);
} 
```

**测试：**

```
getTime(2490453);​ //-> 28:19:47.55:2853 
```

# ruby - Ruby - 如何为文本文件中的每一行分配 ID

> ID：11792732
> 
> 赞同：0
> 
> 时间：2012-08-03T09:12:24.803
> 
> 标签：ruby, file-io

我想创建一个本地化文件，其中包含 ID 行；每行都可以通过其 ID 调用，然后在程序中显示。

我之前使用的方法是使用 .ini 文件使用 win32api，该文件可以读取“一对”键和值。这是通过调用它的键来完成它的最简单的方法。但我遇到了 unicode 问题，因此，非标准字符在 ANSI 中读取并显示为随机框。该程序是在 ruby​​ 1.8.1 中编译的，由于我没有它的源代码，所以无法升级它的 ruby​​ 版本。

> 所以，我的问题是，如何通过从文件中调用其 ID 来调用特定行**而不循环整个文件**？ID 必须不仅包含数字而且只包含 ruby​​ 方法。文本文件必须是纯 .txt

我在使用 String、IO 和 File 类的方法组合之前尝试过它，结果是，我必须首先**遍历整个文件**以搜索特定 ID 并返回其值。该文件很大，如果我必须在一秒钟内阅读大约 10 次文本，我认为这不是正确的方法。

提前致谢！

# mysql - mysql，join查询，一头雾水

> ID：11792733
> 
> 赞同：3
> 
> 时间：2012-08-03T09:12:26.847
> 
> 标签：mysql

我面临的问题是，我想加入这两个查询。

```
 SELECT recipes.RecipeID ,recipes.Name,recipes.ImageThumb,recipes.RatingTotal,
   count(ratings.RecipeID) AS trates  
   FROM recipes 
        JOIN ratings 
            ON ratings.RecipeID = recipes.RecipeID 
   WHERE recipes.Name LIKE '%ade%'  
   ORDER BY Name; 
```

此查询无法按预期工作，当有多个结果时，它会带来 1 个结果，并且 trats 是所有结果的总和，而不仅仅是那个特定的 RecipeID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:14:45.957

我认为这就是你要找的：

```
SELECT recipes.RecipeID ,recipes.Name,recipes.ImageThumb,recipes.RatingTotal,
       COUNT(ratings.RecipeID) AS trates  
FROM recipes 
     LEFT JOIN ratings 
         ON ratings.RecipeID = recipes.RecipeID 
WHERE recipes.Name LIKE '%ade%'  
GROUP BY RecipeID 
ORDER BY Name; 
```

# java - 访问动态资源消息

> ID：11792734
> 
> 赞同：3
> 
> 时间：2012-08-03T09:12:35.833
> 
> 标签：java, spring, jsp, spring-mvc, internationalization

在我的 Jsp 中，我有单选按钮

```
typeA

typeB

typeC

typeD 
```

我使用了以下标签：

```
<c:forEach var="abcTyp" items="${abcTypeList}">
    <form:radiobutton path="abcType" value="<spring:message code="label.admin.lot.${abcType.value}" />" label="${abcTyp.value}" onclick="actSingStone();"/>
</c:forEach> 
```

但我不想使用“abcTyp.value”作为标签，而是想使用国际化消息表单资源包。

我尝试使用

```
<form:radiobuttons path="abcType" value="${abcTypeList}" label="<spring:message code="label.admin.pep.${abcTyp.value}"/>." onclick="actSingStone();"/> 
```

在我提到的资源文件中

```
label.admin.pep.typeA = some text
label.admin.pep.typeB = some text
label.admin.pep.typeC = some text
label.admin.pep.typeD = some text 
```

但它给出了一个错误“预期的等号”

任何人都可以给我同样的解决方案....？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:21:33.193

尝试将标签设置为变量并使用它，如下所示

```
<c:forEach var="abcTyp" items="${abcTypeList}">
  <c:set var="labelVar">
      <spring:message code="label.admin.lot.${abcType.value}" />
  </c:set>    
  <form:radiobutton path="abcType" label="${labelVar}" value="${abcTyp.value}" onclick="actSingStone();"/>    
</c:forEach> 
```

# mqtt - MQTT RSMB 和 mosquitto 最大连接

> ID：11792735
> 
> 赞同：1
> 
> 时间：2012-08-03T09:12:37.340
> 
> 标签：mqtt

我的应用程序中有超过 20,000 个用户，有时我必须向所有客户端推送一些消息，例如新闻，我在（i<100000）时编写代码来测试与 mqtt 服务器的最大连接，当 i=1018 时，rsmb 不能连接，并运行相同的代码来连接mosquitto，i = 4000 +，但它不支持超过10,000个客户端，我尝试了很多方法，但没有结果，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:33:43.307

在 mosquitto 中，您正在达到操作系统施加的最大打开文件限制。如果您在 Linux 上运行，则需要查看“nofiles”条目下的 limits.conf 手册页以及“ulimit -n”。您可以使用“ulimit -a”查看当前限制。

我相信 rsmb 仅限于大约 1000 个客户，但您应该注意它的许可证，其中指出它仅用于评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T21:11:08.863

如果您在 linux 或 ubuntu 上使用 mosquitto，您可能需要使用 mosquitto.conf 来定义连接数

允许的最大客户端连接数取决于侦听器设置。默认值为 -1，表示无限连接。请注意，其他进程限制意味着无限连接实际上是不可能的。通常，可能的默认最大连接数约为**1024**。

**最大连接数 -1**

如果您想超越这一点，您可能需要使用可扩展的消息代理。IBM messageSight 等一些产品说他们提供这种可扩展性。

# html - 渲染 CSS 水平渐变

> ID：11792738
> 
> 赞同：0
> 
> 时间：2012-08-03T09:12:43.830
> 
> 标签：html, css

我无法在本地工作：http: [//jsfiddle.net/efortis/t6QsP/](http://jsfiddle.net/efortis/t6QsP/) 我怀疑 CSS 或类似的阴影，因为我看起来非常小心，它应该可以工作，它曾经可以工作但由于对于许多更新，我已经失去了窗口列表颜色渐变的功能。我的窗口现在看起来像这样没有渐变：

![在此处输入图像描述](../Images/174e7b5db918395b496017042ea1f305.png)

这不是我所期望的，因为我在 HTML 中定义了 CSS 类：

```
<div class="popup" id="popupD" 
            style="display: none;" >

<table width="100%" border="1" cellspacing="0" cellpadding="2" align="center" class="horizontal-gradient">
  <tr>
  <td colspan="3"><h2><div class="horizontal-gradient">Pandora sök</div></h2> 
</td>
  <td><a href="javascript:void(0)" onclick="document.getElementById('popupD').style.display = 'none';">X</a></td>
</tr>
</table> 
        <table id="mainTable" border="0" class="tabell" cellspacing="5" cellpadding="2">
          <tr>
            <!-- Placeholder for the form table -->
            <td valign="top">
              <table id="formTable" border="0" class="tabell" cellspacing="2" cellpadding="2">
                <tr>
                  <td>
                    <b>Sök efter handläggare</b>
                  </td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                </tr>
                <tr>
                  <td>Sök efter person, funktion, organisation, roll eller signatur med följande namn:</td>
                </tr>
                <tr>
                  <td>
                    <input type="text" class="textandlist" name="searchValue" size="40" />
                  </td>
                </tr>
                <tr>
                  <td align="right">
                    <input type="button" class="knapp" name="searchButton" id="searchButton" value="&nbsp;&nbsp;Sök&nbsp;&nbsp;" onclick="doSubmit('HandlaggareSearch','search')" />
                    <input type="button" class="knapp" name="cancelButton" id="cancelButton" value="Avbryt" onclick="cancelHandlaggareDialog()" />
                    <input type="button" class="knapp" name="showButton" id="showButton" value="Visa alla" onclick="doSubmit('HandlaggareSearch','showAll')" />
                  </td>
                </tr>
              </table>                      
            </td>
            <!-- Placeholder for the result table -->
            <td valign="top"><a href="javascript:void(0)" onclick="document.getElementById('popupD').style.display = 'none';">Stäng</a>

              <img src="/PandoraArendeWeb/images/spacer.gif" />
              <table id="headerTable" class="tabell" cellspacing="2" cellpadding="2" width="700">

                <tr>
                  <td colspan="5">
                    <b>Sökningen gav inga träffar.</b>
                  </td>
                </tr>

                <tr>
                  <td colspan="5">
                    <b>Resultat</b>
                  </td>
                </tr>
                <tr>
                  <td colspan="2">
                    <span>Antal träffar: </span>
                  </td>

                  <td colspan="3" align="right">

                  <a href="javascript:SearchHandlaggareShow('previous')">
                    &lt;&lt;

                    -

                  </a>

                  [

                  -

                  ]

                  <a href="javascript:SearchHandlaggareShow('next')">

                    -

                    &gt;&gt;
                  </a>

                </td>

              </tr>

            </table>

            <div style="height: 220px; overflow: auto;" >   
              <table id="resultTable" class="tabell" cellspacing="2" cellpadding="2" width="700">
                <tr>
                  <th><a href="javascript:SearchHandlaggareSort('1')">Signatur</a></th>
                  <th><a href="javascript:SearchHandlaggareSort('2')">Namn</a></th>
                  <th><a href="javascript:SearchHandlaggareSort('3')">Enhet</a></th>
                  <th><a href="javascript:SearchHandlaggareSort('4')">Grupp</a></th>
                  <th><a href="javascript:SearchHandlaggareSort('5')">Roll</a></th>
                </tr>

                <tr class="bakgrund1" onmouseover="this.className='highlight'" onmouseout="this.className='bakgrund1'">

                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>

              </table>
            </div>

          </td>
        </tr>
      </table>
      </div> 
```

我之前问过这个问题，我们得出的结论是，问题出在我的其他代码上： [https](https://stackoverflow.com/questions/11344739/css-horizontal-gradient-not-working) : //stackoverflow.com/questions/11344739/css-horizo​​ntal-gradient-not-working 所以我怀疑我正在遮蔽来自某个地方的 CSS 类，这是我唯一的解释。你知道如何解决这个问题吗？

这是整个 CSS 文件，我没有在其中找到阴影：

```
*  {font-family:arial;}

.avnamn{ 
                color: #90002b; 
                font-size: 140%; 
                display: inline; 
                vertical-align: 3%; 
                margin-left: 1%;
                }

.b{border:1px solid #000;}

.readonly{background-color: #CCC;}

.Webdings{
    font-family: Webdings;
    }

ul{margin-top: 0px}

.mt3{margin-top:-3px;}
.mt5p{margin-top:5px;}

.fontS80 {font-size: 80%;} 
a:link{color:#000; text-decoration:none; }
a:visited{color:#000; text-decoration:none; }
a:hover{color:#000; text-decoration:none; }
a:active{color:#000; text-decoration:none; }

.fontS75 {font-size: 75%;} 

.link{color: #003366;
    text-decoration: underline;
    cursor: pointer;
    font-weight: bold;}

.link_sm{color: #003366;
    text-decoration: underline;
    cursor: pointer;}

.link_sm{font-size: 70%;cursor: pointer;}

.small{font-size: 75%;}

.smallg{font-size: 75%;
color: #555;}

.ssmall{
    font-size: 65%;
    font-weight: bold;
    color: #555;
}
.small60{font-size: 60%;}
.small50{
    font-size: 50%;
    color: #333;
}
.smallb{font-size: 85%;}
table{display:inline;}

h1{font-size: 130%;display:inline;}
h2{font-size: 100%;display:inline;}
h3{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}
h4{font-size: 70%;display:inline;}
h5{
    font-size: 80%;
    display:inline;
    font-family: "Arial Unicode MS", Arial, Helvetica, sans-serif;
}

.hthin{
    font-size: 125%;
}

.th {text-align: left;}

td, th{font-size: 75%;
    vertical-align: text-top;}
.td_link{cursor: pointer;}
.td40{height:40px;}
.td60{height:60px;}

.thkant{
    border-top: 1px solid #000;
    border-bottom: 1px solid #000;
    font-size: 70%;
        text-align: left;
}

.labb{F0F0E3; c1c1b3 }

.bb{border-bottom: 1px solid #000;}
.bbV{border-bottom: 1px solid #FFF;}
.TB_nbA {background-color:#CCC;}
.TB_bt, .TB_nb, .TB_db, .TB_bb {background-color:#efefdc;}

.hk {background-color:#d9ddb3;}

.hknot {background-color:#f9faf2;}
/*<!--F8F8F1-->*/
.TB_bt{border-top: 1px solid #FFF;}
.TB_bt5{border-top: 5px solid #FFF;}
.TB_bb{border-bottom: 1px solid #999;}
.TB_bb2{border-bottom: 2px solid #c1c1b3;}
.TB_db{border-bottom: 1px solid #000; border-top: 1px solid #000;}
.TB_tb{border-top: 2px solid #efefdc;}

.TB_bo{border: 2px solid #efefdc;}
.TB_bo_hk{border-top: 1px solid #efefdc;}

.TB_bo2{border: 1px solid #efefdc;}

.TB_bo2B{
border-top: 2px solid #c1c1b3;
border-left: 3px solid #efefdc;
border-right: 3px solid #efefdc;
border-bottom: 2px solid #c1c1b3;
}

.TD_bo{
    border-right: 1px solid #c1c1b3;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.TD_bo2{

    border-right: 0;
    width: 9%;
    font-size: 70%;
    text-align: center;
}

.ytb{
    border-left:3px solid #efefdc;
    border-right:3px solid #efefdc;
}

.datum {
    font-size: 70%;
    padding-right: 5px;
    vertical-align: text-top;} 
.sub {background:#EAEAEA;}
.sub_meny, .sub_meny_r, .sub_meny_active, .sub_meny_sm{
    font-size: 70%;
    padding-left: 20px;
    padding-right: 20px;
    vertical-align: text-top;}

.sub_meny_sm {
    font-size: 60%;
    vertical-align: middle;
    padding-left: 10px;
    padding-right: 10px;
}   

.sub_meny_r{
    float:right;
    font-size: 70%;
    padding-left: 8px;
    padding-right: 8px;}

.sub_meny_rm{margin-top:4px;}
.sub_meny_active{font-weight: bold;}

.flikkant1 {
    background-image: url(../images/fl1k.jpg);
    background-position: center;
    z-index: -1;}

.inl_namn{
    font-weight: bold;
    font-size: 70%;
    color: Black;
    text-decoration: none;}

.th{text-align: left;}
.tr{text-align: right;}

.g1{
    background-color: #FFF;
    line-height: 20px;
}

.g2{
    background-color: #EEE;
    line-height: 20px;
}

.g3{
    background-color: #DCDCDC;
    line-height: 20px;
    font-weight: bold;
    font-size: 100%;
}
.g4{
    background-color: #CCC;
    line-height: 20px;
}

.popup{
    border-color: #000; 
    border-style: groove; 
    border-width: 2px; 
    padding: 0px; 
    background-color: #FFF;
    font-size: 70%;
}

.popuphandlaggare{ 
    border-color: #000;
    border-style: groove;      
    border-width: 2px;      
    padding: 0px;      
    background-color: #FFF;     
    font-size: 70%;     
    position: absolute;     
    top: 900px; 
    }

.popupN{
    background-color: #F0F0E3;
    color: #000;
    width: 100%;
    display: inline;
    font-weight: bold;
    height: auto;
    padding: 2px;
    border-bottom: 1px solid #000;
}
.pin{padding: 6px;}

.fl10, .fl20, .fl30, .fl40, .fl50, .fl60, .fl70, .fl80, .fl90, .fl100 {
    padding-bottom:4px;color: #000000;
}

.over{
    background-color: #EFEFDC;
    line-height: 20px;
}

.half{
line-height:50%;
}

.quarter{
line-height:25%;
}

.lh10{
line-height:10%;
}

.checkmargin {margin-right: 25px;}  
.checkmarginL {margin-left: 25px;}  

.pusher {padding-left: 15px;"}
.pusherR {margin-right: 40px;"}

.rand3{background-color: #FFF; line-height: 3px;}
.rand1{background-color: #FFF; line-height: 1px;}

.whiteborder {     color: #ffffff;      border: 4px solid #ffffff;      padding: 10px;      margin: 10px; }
#details { width: 700; color: #ffffff; }
.column1 {     color: #000000; margin: 0;      padding: 0;     width: 600px;     border:0;     float: left; }
.column2 {     color: #000000;margin: 0;      padding: 0;     border:0;     width: 80px;     float: right; }

.f200 {
    color: #000000;
}

.f210 {
    color: #000000;float: left;
}
.f220 {
    width: 400;
}
.f1450 {
    width: 600;
    float:left;
}
.f1550 {
    width: 150;
    float:left;
    padding:15px;
}
.paddedcell {
    padding:15px;
}
.b2{border:2px solid #efefdc;}
.inp_sel{width: 80%;}

.fl21{float:left; padding:5px; margin:5px; width:150px;} .fl455{float:left; padding:5px; margin:5px; width:120px;} 

.form-bg {
  background: #eeefdf;
  width:1000px;
  overflow:hidden;
}
.form-bg2 {
  background: #eeefdf;
  width:100%;
  overflow:hidden;
}
.data-bar {
  border-bottom:1px solid #fbfbf7;
  display:inline-block;
  padding:10px 10px;
}

.left {
float:left;
width:200px;

}
.discount {
float:right;
width:500px;

}
.discounts {
width:900px;

}
.right {
float:right;
width:700px;
}
.yta20 {
background: #eeefdf;
width:1100px;
}

.yta2 {

width:1100px;
}

.data-box {
width:650px;
height:100px;
border:1px solid #cbcbcb;
}
#table td { 
margin:120px; 
} 

#personName {     float:left;     width:300px;   }  #otherDetails {     float:right;     width:450px;      }

.th_rad_sort {border-bottom: 2px solid #000000; text-decoration: none;"}

a img { border: 0; outline:0;}

.horizontal-gradient {
    background: #1a2adb; /* Old browsers */
    background: -moz-linear-gradient(left,  #1a2adb 0%, #a1e6ed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1a2adb), color-stop(100%,#a1e6ed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* IE10+ */
    background: linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a2adb', endColorstr='#a1e6ed',GradientType=1 ); /* IE6-9 */
    color: white;
    width: 1015px;
}
.f { float: right;     color: white; }

.handlaggare { width: 1000px; }

div.data-box-nat{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
}
div.data-box-pct{
    margin-bottom: 10px;
    border: 2px solid gray;
    width: 600px;
}
.newpopup {
z-index:100;
 position: absolute; 
  top:50%;
  left:50%;
  background-color:#ffffff; //not working

} 
```

检查 chrome 中的元素显示 CSS 已被划掉。这是什么意思？ ![在此处输入图像描述](../Images/c6cbc24e02b34f9f3143be25b6a10ec7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:29:48.500

由于您提供的代码工作正常，我无法重现您的问题，因此您可以通过以下方式对其进行调试：

1.  在 Chrome 中打开功能失调的页面
2.  按住`Ctrl`+`Shift`并按`i`- 将出现开发人员工具
3.  转到“元素”选项卡
4.  按窗口底部按钮中的放大镜，然后单击页面上的相关元素。在您的情况下，选择应该具有渐变的元素。
    **或者**：使用“元素”选项卡中的 DOM 浏览器浏览到相关元素。
5.  选择元素后，检查右列中的“样式”选项卡。*所有样式都已应用于您的元素，按优先级*从上到下排序，这意味着如果为同一属性定义了两种样式，则上面的样式将优先。

现在您可以查看您的样式是否已在任何地方被覆盖，以及它发生在哪个样式表和哪一行。

# html - LI 边距不影响 UL 元素

> ID：11792740
> 
> 赞同：1
> 
> 时间：2012-08-03T09:13:05.030
> 
> 标签：html, css, list, margin

如果我将margin-top 放在第一个列表项（LI），那么margin 在ul 之外。

最后一项和边距底部也是如此。但是margin-left/margin right按预期工作..

为什么会这样，并且可以修复吗？

请参阅：[小提琴链接](http://jsfiddle.net/itimeheke/Meapn/)

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T09:18:09.240

你必须把

```
overflow : auto; 
```

在父级 ul。

请参阅[Margin-Top 将外部 div 向下推](https://stackoverflow.com/questions/2680478/margin-top-push-outer-div-down)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:16:52.200

您的 ul 仅包含一个元素，女巫实际上具有工作余量。您应该替换此代码

```
<li>
    This is a test<br>
    This is a test<br>
    This is a test<br>
    This is a test<br>
</li> 
```

和：

```
<li>This is a test</li>
<li>This is a test</li>
<li>This is a test</li>
<li>This is a test</li> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:17:12.460

ul 标签和 li 标签之间没有任何关系。他们基本上是互相跟随的。你想要的是 ul 中的填充，而不是 li 中的边距。

[在这里提琴](http://jsfiddle.net/Meapn/4/)

# php - 使用 PHP 的 AJAX 代理，可以吗？

> ID：11792744
> 
> 赞同：2
> 
> 时间：2012-08-03T09:13:31.077
> 
> 标签：php, javascript, jquery, ajax

参考我的另一个问题：[模块化站点中的上下文感知 AJAX 调用](https://stackoverflow.com/questions/11790698/context-aware-ajax-call-in-a-modular-site)，是否可以以方便的方式设置 AJAX 代理？

我希望使用动态 url 发出 AJAX 请求，而不用服务器端 PHP 指令污染 JavaScript 代码，在模块化 Apache/PHP/MySQL 站点中计算 ajax php 文件的正确路径，这是我编写的粗略 CMS。换句话说，该站点有插件和组件，它们具有自己的文件夹结构，其中包含它们的 CSS、JS 和 PHP，并且我具有动态检索它们的文件夹的功能。我希望：

```
$("#mydiv").load(siteRoot + "/ajax.php?plugin=datagrid&
action=myaction&... other params..."); 
```

将改为调用（使用 PHP 在服务器端计算的 URL）：

```
{siteRoot}/components/datagrid/ajax/myaction.php?... other params ... 
```

（显然，对注入、CSRF 和其他黑客进行了所有可能的检查）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:21:01.097

/ajax/get.php 文件应如下所示：

```
$plugin = $_GET['plugin'];
$action = $_GET['action'];
$get = array();
foreach ($_GET as $k=>$v) {
    if($k!='plugin' && $k!='action') {
        $get[] = "{$k}={$v}";
    }
}
$url = 'siteRoot/components/'.$plugin.'/ajax/'.$action.'.php?'.implode('&', $get);

header("Location: {$url}"); 
```

当然，您需要在上面的代码中添加一些安全检查

编辑：缺点是它不适用于发送 POST 请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:30:19.950

相反，您也可以在您的第一页请求中声明您的 javascript 变量，然后使用它，假设 SITE_URL 包含您的 php 计算 url

```
 var siteRoot = '<?php echo SITE_ROOT?>' // or some thing else 
```

因此，对于此行之后包含的任何 .js 脚本，都将定义 siteRoot var。

# objective-c - IOS - 使用外部库构建项目

> ID：11792749
> 
> 赞同：0
> 
> 时间：2012-08-03T09:13:50.763
> 
> 标签：objective-c, ios, xcode, compilation, libraries

我正在寻找的东西可能是不可能的，但也许有人可以找到替代方案。

我正在尝试制作一个带有主细节的程序，显示“组件”。

每个组件都可以是一个简单的按钮、一个表格视图、一个音乐播放器或其他任何东西。不是字符串或任何类型的数据，而是功能。

所以每个组件都可能需要一个特定的库或框架，以及它自己的 xib。

问题是这些组件是动态的，其他人将在未来添加更多，我不会在每次更改时都修改项目。

有没有办法下载代码（.h 或 .m 或 .xib 或整个库）并在项目中执行它们？或者其他解决这个问题的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:46:07.803

那根本不可能。您只能链接静态库（显然是在编译时），唯一的例外是 iOS SDK 随附的库和框架（例如 UIKit.framework、libz.dylib）。AppStore 指南禁止您在用户设备上下载和执行代码，因此您的应用创意根本不可能实现。

# c# - 使用正则表达式从字符串.net c#中获取值

> ID：11792750
> 
> 赞同：1
> 
> 时间：2012-08-03T09:13:51.123
> 
> 标签：c#, regex, string

我想解析字符串：

```
????log L 07/31/2012 - 14:32:50: "Username1<4><STEAM_ID_PENDING><CT>" killed "Username2<2><STEAM_ID_PENDING><TERRORIST>" with "m4a1" 
```

我必须得到价值观：

1.  用户名1
2.  用户名2
3.  m4a1

我有正则表达式模式

```
Regex reg = new Regex("[^\"]+\"([^<]+)<[^\"]+\" killed \"([A-Za-z0-9]+)[^\"]+\" with \"([A-Za-z0-9]+)\""); 
```

如果第二个用户名不包含`_`此或此`-` 如果第一个包含正则表达式获取值，则此方法非常有效。

请帮我修改我的模式

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:23:50.920

用这个替换它：

```
Regex reg = new Regex("[^\"]+\"([^<]+)<[^\"]+\" killed \"([^<]+)[^\"]+\" with \"([A-Za-z0-9]+)\"") 
```

查找名称的组是：

```
([A-Za-z0-9]+) 
```

我将其替换为：

```
([^<]+) 
```

这是用于查找第一个用户名的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:20:29.297

**尝试这个**

```
(?<Username1>"Username1(?<data>[^"]*)")\s+killed\s+(?<Username1>"Username2(?<data>[^"]*)")\s+with\s+(?<m4a1>"m4a1(?<data>[^"]*)") 
```

命名组将返回它们各自的值。

# javascript - 使用 jQuery 创建和访问 SVG 标签？

> ID：11792754
> 
> 赞同：2
> 
> 时间：2012-08-03T09:13:55.330
> 
> 标签：javascript, jquery, svg

是否可以像这样在 jQuery 中创建 SVG 标签：

```
var dragSVG = $('<svg xmlns="http://www.w3.org/2000/svg"></svg>');
dragSVG.append('<rect x="0" y="0" width="20" height="20" style="fill:red"></rect>'); 
```

如果是这样，如何访问 DOM？IE。如果是 HTML，我会执行以下操作：

```
return dragSVG.html(); 
```

但由于它不是 HTML，这会引发异常......或者我错过了一些完全基本的东西！？

**编辑：**

我将尝试更清楚地解释我要实现的目标；我有一个代表 SVG '项目' 的按钮，可以将它拖到主 SVG 画布上。当用户开始拖动时，我想在鼠标下显示 SVG“项目”以提供用户反馈。当用户将它放到画布上时，我需要将“项目”移动到主画布上。

```
 $('#testBtnDrag').draggable({
          opacity: 0.7,
          revert: 'invalid',
          cursorAt: { top: 0, left: 0},
          helper: function (event) {
              var dragSVG = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><rect x="0" y="0" width="20" height="20" style="fill:red"></rect></svg>';
              return dragSVG;
          }              
      });

      // I can't attach the droppable to the SVG tag directly, IE / FF don't work with this
      // so we have to attach it to a <div> tag that wraps the <svg>.
      $('#drawArea').droppable({
        accept: '.svg-item',
        drop: function (event, ui) {
          // Get the mouse offset relative to the <svg> canvas
          var posX = event.originalEvent.clientX - $(this).offset().left;
          var posY = event.originalEvent.clientY - $(this).offset().top;

          // Get the dragged element and put it onto the "main" canvas
          var rawSVG = ui.helper.children().html()  // This won't work!
          var mainCanvas = $('#drawArea > svg');
          mainCanvas.append(rawSVG);
        }
      });

  }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T16:54:19.150

A**`<svg>`**等**`<path>`**是**SVGAnimatedString**对象，jQuery 本身无法生成它们，因为它是使用`createElement`函数来创建标签的。jQuery 的简单 hack 看起来像：

![在此处输入图像描述](../Images/3f84007fca1b41af7ea2bca4a6a0a238.png)

```
 // line 526 in jquery-X.X.X.js, in my case it is jquery-1.9.1.js   
    // Single tag
    if ( parsed ) {
        // ----------------------------------------------------
        var xml_html_element;
        if ( parsed[1] == "svg" || parsed[1] == "path" ) {
            xml_html_element = context.createElementNS( "http://www.w3.org/2000/svg", parsed[1] );
        } else {
            xml_html_element = context.createElement( parsed[1] );
        }
        return [xml_html_element];
        // ----------------------------------------------------
        //return [ context.createElement( parsed[1] ) ];

    } 
```

现在，您可以像这样使用 jQuery：

```
var $svg = $("<svg>").attr({'version': "1.1"});
var $path = $("<path>").attr({
    'd': 'M' + 10 + ',' + 100 + ' C' + 200 + ',' + 150 + ' ' + 200 + ',' + 170 + ' ' + 300 + ',' + 250,
    'fill': "none",
    'stroke': "rgba(100,100,100,0.9)",
    'stroke-width': "1"
});
var $body = $("body");
$body.append($svg.append($path)); 
```

当然，为了您的个人需要，您可以在此 hack 中扩展 SVG 标签的数量：

```
parsed[1] == "svg" || parsed[1] == "path" || parsed[1] == "line" || etc. ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:22:44.637

SVG 本质上是一种 XML 文件格式。尝试**parseXML()**代替。如果这不起作用，请尝试 [http://keith-wood.name/svggraphRef.html](http://keith-wood.name/svggraphRef.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-10T17:22:06.113

不要破解 JQuery；只需创建一个简单的单行函数，该函数创建一个 SVG 元素并将返回的元素包装在 JQuery 中，然后您可以在其上使用任何您想要的 JQuery 函数，即：

```
 function createSvg(tagName) {
        return document.createElementNS("http://www.w3.org/2000/svg", tagName);
    }
    function sayHi() { 
        alert('hi'); 
    }
    $(document).ready(function() {
        var svg = $(createSvg("svg"))
            .attr('width', 500)
            .attr('height', 500);
        $('body').append(svg);
        var rect = $(createSvg("rect"))
            .attr("id","rect1")
            .attr("x","20")
            .attr("y","150")
            .attr("height","72")
            .attr("width","120")
            .attr("rx","20")
            .attr("stroke","black")
            .attr("fill","white");
        $("svg").append(rect);
        $("#rect1").on("click", sayHi);
        $("#rect1").attr("x",150);
    }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-18T00:22:06.517

我已经将 SVG 与 jQuery 一起使用，并且不需要在 jQuery 核心库中进行任何更改。您只需要生成 svg 标签，如下所示

`var svg = $('<svg></svg>').attr('xmlns','[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)');`

使用 jquery 并通过 jQuery 将其添加到 dom`$('body').html(svg);`然后将其视为 dom 对象，您可以在此标记上调用任何与 dom 相关的方法，就像您可以添加属性等一样。您可以将 var svg 保留在全局范围内，以便您可以用于进一步参考和您还可以分配一个 id 或 class 属性，以便您可以使用 jquery 访问它。

# magento - 如何在magento中进行自定义查询？

> ID：11792762
> 
> 赞同：7
> 
> 时间：2012-08-03T09:14:24.377
> 
> 标签：magento

我想在 magento 网站上编写一个自定义查询。

我在我的 magento 根文件夹中创建了一个文件 test.php 并编写了一个自定义查询

```
<?php
 $read= Mage::getSingleton('core/resource')->getConnection('core_read');
 $value=$read->query("Select * from catalog_product_flat_1");
 $row = $value->fetch();
 echo "<pre>";print_r($row);echo "</pre>";
?> 
```

但这没有给我任何结果。请指导我。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-03T09:20:11.890

试试这个：

```
$connection = Mage::getSingleton('core/resource')->getConnection('core_read');
$sql        = "Select * from catalog_product_flat_1";
$rows       = $connection->fetchAll($sql); //fetchRow($sql), fetchOne($sql),...
Zend_Debug::dump($rows); 
```

为了进行测试，您可以在您的 magento 安装的根目录中创建 sandbox.php 文件并粘贴以下代码：

```
<?php
$mageFilename = 'app/Mage.php';
require_once $mageFilename;
Mage::setIsDeveloperMode(true);
ini_set('display_errors', 1);
umask(0);
Mage::app();
$connection = Mage::getSingleton('core/resource')->getConnection('core_read');
$sql        = "Select * from catalog_product_flat_1";
$rows       = $connection->fetchAll($sql); //fetchRow($sql), fetchOne($sql),...
Zend_Debug::dump($rows); 
```

并从 url 调用：

```
http://your-magento-url/sandbox.php 
```

# android - 从网络获取图像时出现android.content.ActivityNotFoundException

> ID：11792763
> 
> 赞同：1
> 
> 时间：2012-08-03T09:14:26.987
> 
> 标签：android, rest, service, web

每次我想使用 Android 中的内置库从 Web 显示图像时，我都会收到此错误。

```
08-03 10:12:59.895: E/AndroidRuntime(27974): FATAL EXCEPTION: main
08-03 10:12:59.895: E/AndroidRuntime(27974): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://192.168.10.132:8000/someimage.jpg typ=image/* }
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.app.Activity.startActivityForResult(Activity.java:2827)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.app.Activity.startActivity(Activity.java:2933)
08-03 10:12:59.895: E/AndroidRuntime(27974): at my.package.activities.MediaActivity$2.onItemClick(MediaActivity.java:58)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.widget.AdapterView.performItemClick(AdapterView.java:284)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.widget.AbsListView$PerformClick.run(AbsListView.java:1936)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.os.Handler.handleCallback(Handler.java:587)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.os.Handler.dispatchMessage(Handler.java:92)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.os.Looper.loop(Looper.java:123)
08-03 10:12:59.895: E/AndroidRuntime(27974): at android.app.ActivityThread.main(ActivityThread.java:3687)
08-03 10:12:59.895: E/AndroidRuntime(27974): at java.lang.reflect.Method.invokeNative(Native Method)
08-03 10:12:59.895: E/AndroidRuntime(27974): at java.lang.reflect.Method.invoke(Method.java:507)
08-03 10:12:59.895: E/AndroidRuntime(27974): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-03 10:12:59.895: E/AndroidRuntime(27974): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-03 10:12:59.895: E/AndroidRuntime(27974): at dalvik.system.NativeStart.main(Native Method) 
```

我的代码是：

```
gridView.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
        Media clicked = adapter.getItem(position);

        String url = Backend.BASE_MEDIA_URL + clicked.url_big;

        Log.d("Media", url);

        Intent intent = new Intent();  
        intent.setAction(android.content.Intent.ACTION_VIEW);   
        intent.setDataAndType(Uri.parse(url), "image/*");  
        startActivity(intent);  
    }
}); 
```

我 100% 肯定 url 是正确的。提前致谢。

编辑：清单文件，我删除了一些不相关的活动

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="my.package" android:versionCode="1"
    android:versionName="1">

    <uses-sdk android:minSdkVersion="10" android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCOUNT_MANAGER" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name" >

        <activity android:name=".android.intent.action.VIEW" ></activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:41:48.847

> 每次我想使用 Android 中的内置库从 Web 显示图像时都会出现此错误

首先，没有单一的“内置图库”应用程序。有成百上千的设备，它们将具有各种“内置图库”应用程序。

其次，除了浏览器之外，您的设备上没有任何东西能够“显示来自网络的图像”，并且只有当您让 Android 确定实际的具体 MIME 类型时。不要求任何设备的“内置图库”应用程序支持第三方应用程序使用它来下载和显示图像。

# c# - N 层 Web 服务器和 N 层业务服务器

> ID：11792764
> 
> 赞同：0
> 
> 时间：2012-08-03T09:14:28.843
> 
> 标签：c#, asp.net, n-tier-architecture

在架构上，当您有一个单独的 n 层业务服务器要连接以进行逻辑处理时，您是否需要一个 n 层 ASP.net MVC Web 服务器？

除了业务逻辑分离之外，还有其他理由为 Web 服务器使用 n 层架构吗？数据层也由业务服务器处理是否有意义？

在我看来，Web 服务器似乎不需要 n 层？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:39:43.420

据我所知，没有不适合 1 层的应用程序。所以理论上你不需要到处都是多层的。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ee658103.aspx)：

> 确定是否需要单独的业务层。尽可能使用单独的业务层来提高应用程序的可维护性总是一个好主意。例外情况可能是具有很少或没有业务规则（数据验证除外）的应用程序。

您可能有不同的理由来添加额外的图层，例如：

*   重用性和可维护性
*   耦合和内聚
*   可追溯性
*   缓存
*   可扩展性
*   安全

一切都取决于具体的需求。所以你需要知道你的权衡。

[从MSDN](http://msdn.microsoft.com/en-us/library/ms998478.aspx)也很高兴知道：

> 层是构成软件解决方案的元素的逻辑结构机制；层是系统基础设施的物理结构机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:47:16.197

*如果*您已经拥有专用的应用程序服务器，则不需要在 Web 应用程序内部使用 n 层，因为您的 Web 应用程序（应该）只是现有业务层之上的表示层。

顺便说一句，你确定你没有混淆层和层吗？

# mysql - MySQL自动增量列 - 删除记录后无法重复使用数字

> ID：11792766
> 
> 赞同：2
> 
> 时间：2012-08-03T09:14:33.317
> 
> 标签：mysql

我有一个带有自动递增整数字段“ID”的表。假设其中有一百条记录，我删除记录 91 - 100。我创建的下一条记录我希望 ID 字段为 91，但它不是，它是 101。有什么办法可以解决这个问题? 多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:15:54.880

您可以在操作后手动设置[auto_increment](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)`delete`为：

```
ALTER TABLE table_name AUTO_INCREMENT = 91; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:18:33.223

您可以在每次插入内容时从表中删除自动增量并手动设置 id

```
@maxid = select max(id) from your_table
insert into your_table (id) values (@maxid+1) 
```

# c# - 允许将私有变量放在 C# 中的公共方法中吗？

> ID：11792769
> 
> 赞同：1
> 
> 时间：2012-08-03T09:14:44.420
> 
> 标签：c#

我有一个小代码

```
public void StartConnection(){
  _connection = new DatabaseConnection();
}

public Results ExecuteQuery( string format ){
  _queryExecuter.SetText = string.Format(_queryString, format);

  return _queryExecuter.Execute();
} 
```

我做了什么，它允许在公共方法中使用私有成员？

我提到公共方法将用于另一个类（来自不同的项目但在相同的解决方案中）。

或者我必须创建私有方法并在私有变量中使用？

我需要的只是建议。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T09:17:42.283

是的，它是一种非常基本的编程哲学，称为[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。它完全有效并鼓励这样做。在您的情况下，只有您知道如何使用您的连接对象并通过您的公共方法“限制”如何使用它，从而使您的应用程序保持在您定义的范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:18:18.297

> 我做了什么，它允许在公共方法中使用私有成员？

是的，您绝对可以在公共成员中使用私人成员。否则它们将毫无用处！（如果你只能在其他私人成员中使用私人成员，你怎么能使用它们中的任何一个？）

封装的很多要点是对公共 API 隐藏*实现细节*（私有成员）。

# wordpress - 我的 wordpress 帖子重定向到我的主页

> ID：11792771
> 
> 赞同：0
> 
> 时间：2012-08-03T09:14:49.670
> 
> 标签：wordpress

在我的本地机器上，我正在运行一个 Wordpress 网站。当我尝试访问我的帖子时，它会重定向到我的主页。

我希望它显示相应的页面（帖子的页面）。在所有论坛中搜索。一切都是徒劳。

你有什么建议从哪里开始或如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:50:31.470

您可以只更新您的原始帖子，而不是让我们尝试以评论格式阅读您的代码。但是，从您发布的代码中，我看到了两个问题。

'category_name=Key Links...' category_name 需要一个字符串，它应该是您的类别的 slug-name，“Key Links”不能是您的 slug，因为 slug 不允许空格。因此，查询正在抓取所有帖子，而不考虑类别。

另一个问题是您生成链接的位置

```
<a href="#">, 
```

您没有指定要指向的链接的 url，它应该是

```
<a href="<?php the_permalink(); ?>"> 
```

# c# - 获取合并单元格的高度和宽度以放置图片。

> ID：11792773
> 
> 赞同：1
> 
> 时间：2012-08-03T09:15:05.757
> 
> 标签：c#, excel, interop

我正在尝试将放入我的 excel 中的图片自动调整为其中单元格的大小，但它给了我原始的高度和宽度，而不是整个合并单元格的高度和宽度。

我正在使用 Microsoft.Office.Interop.Excel 与我的工作簿和电子表格进行交互。

```
//This is checking if is a photo
if (File.Exists(ArrayNode[i].TagValue))
{
float Left, Top, Width, Height;
Left = float.Parse(cell.Left.ToString());
Top = float.Parse(cell.Top.ToString());
//This gives me the width and height of the cell, but i need it for the merged cells.
Width = float.Parse(cell.Width.ToString());
Height = float.Parse(cell.Height.ToString());
String path = Application.StartupPath + "\\" + ArrayNode[i].TagValue;
xlWorkSheet[k].Shapes.AddPicture(path, Microsoft.Office.Core.MsoTriState.msoFalse,     Microsoft.Office.Core.MsoTriState.msoCTrue, Left, Top, Width, Height); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:42:31.793

要使用合并的单元格放置图片，您必须获取`.MergeArea.Width`和`.MergeArea.Height`

例如

```
Width = float.Parse(cell.MergeArea.Width.ToString());
Height = float.Parse(cell.MergeArea.Height.ToString()); 
```

# powershell - 使用 POWERSHELL 生成不再使用的 AD 组列表

> ID：11792778
> 
> 赞同：1
> 
> 时间：2012-08-03T09:15:20.683
> 
> 标签：powershell

我正在尝试获取未使用的组列表或结果中不包含任何成员我想查看以下创建日期、所有权、位置`AD,NAME OF THE GROUP & memberships`

我试过用这个

```
$result = $csv | foreach-object {
$group=$_
get-qadgroupmember "$_" -sizelimit 0 -indirect | select-object samaccountname,@{n="GroupName";e={$group}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:55:45.287

这将使您从您的 AD 中获取所有空组：

```
Get-QADGroup -Empty -SizeLimit 0 | Select-Object Name,DN,whenCreated 
```

在 Select-Object 命令中包含要导出的其他属性

# android - Android：如何不重叠动态视图？+视图的动态位置

> ID：11792780
> 
> 赞同：1
> 
> 时间：2012-08-03T09:15:22.970
> 
> 标签：android, dynamic, view, augmented-reality, overlapping

我开发了一个在相机视图上显示标记的增强现实应用程序。标记是通过获取数据库中的位置动态创建的视图。例如，标记代表建筑物，由名称和位置（纬度/经度）描述。

当应用程序启动时，我会获取手机的当前位置，并根据它们的位置和手机的方向（SensorManager）在屏幕上显示标记。

问题是当标记在同一方向时，它们会重叠。我希望标记是一对一排列的。

我尝试使用 RelativeLayout 但它没有改变任何东西。

标记创建代码：

```
@Override
public void onResume() {
    super.onResume();

        for(int j=0;j<markers.length;j++) {
            //System.out.println(prefMarkers[j]);
            if(markers[j] == null) {

                RelativeLayout.LayoutParams rParams = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);

                    markers = new DataList(); // My list of markers
                    for(int i=0; i<markers.size();i++) {
                        markers[i].setOnClickListener(clickListener);
                            //addContentView(markers[j].get(i), params);
                            relative.addView(markers[j].get(i), rParams);
                    }
                }
            }}} 
```

位置更改（标记移动）时的代码：

```
public final static void moveSpot(Context c, View tv, GeoPoint p,
        float azimut, Location me, int screenWidth, float roll,
        int screenHeight, float pitch) {
    int angle = // Calculation for the position of the markers
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
            FrameLayout.LayoutParams.WRAP_CONTENT,
            FrameLayout.LayoutParams.WRAP_CONTENT);

            lp.leftMargin = -angle * screenWidth / 90;

    lp.addRule(RelativeLayout.ABOVE);

    tv.setLayoutParams(lp);
}

public SensorEventListener createListener() {
    return new SensorEventListener() {
        public void onAccuracyChanged(Sensor _sensor, int _accuracy) {

        }

        public void onSensorChanged(SensorEvent evt) {
            if (evt.sensor.getType() == Sensor.TYPE_ORIENTATION && markers != null) {

                for(int j=0;j<markers.length;j++)
                    moveSpot(context, markers[i], markers[i]
                                    .getGeoPoint(), azimut, myLoc,
                                    mScreenWidth, roll, mScreenHeight, pitch);

        }
    };
} 
```

我想我没有采取正确的方法，所以我该怎么做才能防止标记重叠？如果您需要精确度，请询问，我会尽量精确。

对不起我的英语不好：/

* * *

编辑：感谢 Martin Revert 的回复，我解决了部分问题。现在我没有重叠的问题，而是位置的问题。

这是我现在的应用程序的屏幕截图：

[http://hpics.li/f7c402b](http://hpics.li/f7c402b)

在这张图片上，我们可以看到无论如何都没有重叠的问题。我想做的是在这个截图的重拍中：

[http://hpics.li/25a059d](http://hpics.li/25a059d)

我希望这次我清楚了：x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:55:03.793

您需要为您在 ViewGroup 上创建的每个视图分配一个 ID。

如果每个标记都是一个视图，请使用以下内容：

```
yourview[j].setId(j); 
```

在将 addRule() 应用到“lp”布局之前执行此操作。

编辑：

您还可以考虑参考每个视图位置，执行以下操作：

```
lp.addRule(RelativeLayout.ABOVE, yourview[j-1]); 
```

# postgresql - 是否有任何用于 SQL（尤其是 postgres）分片的 Node.js 库？

> ID：11792785
> 
> 赞同：1
> 
> 时间：2012-08-03T09:15:30.163
> 
> 标签：postgresql, node.js, sharding

使用 Mongo 或类似的东西时，分片不是问题。

有没有分片经典 SQL 库的解决方案，尤其是 PostgreSQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:08:33.190

如果没有更详细地说明“分片”的含义（它对不同的人确实意味着不同的东西），很难给出很多答案：是的。也就是说，您可能想看看[Greenplum](http://www.greenplum.com/)和[Postgres-XC](http://postgres-xc.sourceforge.net/)。

# android - 将数据作为 Activity 或 Dialog 呈现给用户

> ID：11792786
> 
> 赞同：2
> 
> 时间：2012-08-03T09:15:32.570
> 
> 标签：android, android-dialog, ui-guidelines

大多数时候，我遇到了一种情况，选择我应该将这个数据列表作为 Activity 还是 Dialog 呈现给用户。我想知道，**我应该遵循任何基本的 UI 设计指南吗？**我通过网络搜索，我没有看到太多关于这个的讨论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:26:18.313

在不了解您的用例的情况下，我建议您不要使用对话框，因为您只是在普通 Activity 上有更多的屏幕空间。对于呈现数据列表，ListActivity 或 ListView 是一个很好的起点。

有关 UI 模式和有关 android 的最佳实践的一般信息，谷歌在这里提供了很多信息：

[http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:26:55.000

如果数据呈现只是工作流的自然/直接路径，则应在活动中呈现。如果您的 UI 要求确认，警告/通知用户某些特定或不寻常的事情（数据丢失警告/确认删除文件等），则可以使用对话框。

还要记住 Activity 也有 back-stack，所以通过按下 back，用户可以回到之前的 Activity。虽然对话框并不意味着通过按返回来返回。

# javascript - JavaScript：未捕获的类型错误：无法读取 null 的属性“样式”

> ID：11792794
> 
> 赞同：1
> 
> 时间：2012-08-03T09:16:01.770
> 
> 标签：javascript, cookies, hide, visibility, hidden

我正在构建这个小 cookiescript，它在单击按钮时创建一个 cookie，然后隐藏消息。

但是现在我正在构建函数以在看到 cookie 时隐藏消息（div#cookie），但我每次都会收到此错误，但我的 div 确实存在：

```
Uncaught TypeError: Cannot read property 'style' of null 
```

现在这些是我正在使用的脚本，有人可以帮忙吗？:)

```
<script type="text/javascript">
        function createCookie(name,value,days) {
            if (days) {
                var date = new Date();
                date.setTime(date.getTime()+(days*24*60*60*1000));
                var expires = "; expires="+date.toGMTString();
            }
            else var expires = "";
            document.cookie = name+"="+value+expires+"; path=/";
        }

        function readCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
            }
            return null;
        }

        function eraseCookie(name) {
            createCookie(name,"",-1);
        }
        </script> 
```

而这个，无论“hidediv”在哪里给出错误，但在单击按钮时确实有效：

```
<script type="text/javascript">
            function hidediv() { 
                if (document.getElementById) { 
                    document.getElementById('cookie').style.visibility = 'hidden'; 
                    createCookie('uscnCookieScriptJS','uscninternetservicescookiescriptjavascriptversion',365)

                } 
                else { 
                    if (document.layers) { 
                        document.hideShow.visibility = 'hidden'; 
                        createCookie('uscnCookieScriptJS','uscninternetservicescookiescriptjavascriptversion',356)
                    } 
                    else { 
                        document.all.hideShow.style.visibility = 'hidden'; 
                        createCookie('uscnCookieScriptJS','uscninternetservicescookiescriptjavascriptversion',356)
                    } 
                } 
            }

            function showdiv() { 
                if (document.getElementById) { 
                    document.getElementById('cookie').style.visibility = 'visible'; 
                } 
                else { 
                    if (document.layers) { 
                        document.hideShow.visibility = 'visible'; 
                    } 
                    else { 
                        document.all.hideShow.style.visibility = 'visible'; 
                    } 
                } 
            } 
        </script>
        <script type="text/javascript">
        if (document.cookie.indexOf("uscnCookieScriptJS") >= 0) {
          alert("yes");
          hidediv();
        }
        else {
          alert("no");
        }
        </script> 
```

该脚本可以在这里找到：http: [//dev.uscn.nl/cookiescript/v2/](http://dev.uscn.nl/cookiescript/v2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:22:23.543

问题是您`hidediv()`在加载实际 HTML 内容之前调用了该函数。将脚本放在文档末尾（在结束`body`标记之前）或将其设置在`window.onload`/ on document ready

# vb.net - 用户控件在运行时自动调整大小

> ID：11792795
> 
> 赞同：4
> 
> 时间：2012-08-03T09:16:03.960
> 
> 标签：vb.net, user-controls

我有一个带有标签和文本框的用户控件，但我无法确定为什么它们在运行时总是重新调整大小。这是快照：

![设计时间](../Images/fc0497a8d011ad25f9e235a626ce04c2.png)

![运行](../Images/7976d13cdcf69637ada02e160dfbd810.png)

如您所见...对象已调整大小并且间距已更改。我不认为它与我的代码有关......它只是 vb.net 的设置吗？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:25:51.623

请检查用户控件内的文本框、标签和按钮中的**Anchor属性的值。**可能设置为保持与容器右边界的距离（用户控件）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T06:42:52.883

I just found the answer to my question. Instead of user control, I change the form (the container) **AutoScaleMode** from **Form** to **None**. Thanks everyone! Cheers!

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T18:58:16.950

尝试使用用户控件的**AutoScaleMode**属性，如果设置为**Font**将其更改为**None**。

在某些情况下，容器（可能是表单）的字体大小和类型与用户控件不同，如果用户控件将此属性设置为**Font**，那么它将尝试调整自身大小以覆盖新的字体类型和大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-17T15:56:16.797

我已经能够复制您的问题。我创建了一个用户控件，并为尝试重新调整大小而奋斗了很长时间。最初按照您的建议向我的用户控件添加了一个拆分容器，但我无法调整它的大小。

我想知道 3,3,3,3 的默认保证金可能与它有关。当我最初添加我的拆分容器时，它比用户控件小，因此无法重新创建问题。

如果我的拆分容器和我的用户控件的宽度相同，那么边距会更明显，并且实际上增加了我的用户控件的宽度。

当然，您的问题可能与此完全无关，但我建议您检查与控件宽度相比的边距。我很欣赏边距对您来说可能是完全必要的，但至少如果只是为了检查这是否解决了您的问题，为什么不删除它们。或者通过确保拆分容器的宽度小于用户控件的宽度，然后减去每一侧的边距。例如，如果您的用户控件的宽度为 300，而您的拆分容器的边距为 3,3,3,3，则检查您的拆分容器是否小于 300-3-3 = 294。

只是一个理论，实际上可能没有用....祝你好运

# c# - 如何以编程方式创建名称为变量的事件处理程序？

> ID：11792796
> 
> 赞同：0
> 
> 时间：2012-08-03T09:16:17.047
> 
> 标签：c#

例如：

```
MySlider.ValueChanged += new RoutedPropertyChangedEventHandler<double>(Slider_ValueChanged); 
```

上面的内容很好，除了没有“Slider_ValueChanged”方法，它不会编译。不仅如此，如果我想以编程方式创建多个滑块，我可能想为它们提供不同名称的不同处理程序。

理想情况下，我想做类似的事情：

```
var x = some_handler;
MySlider.ValueChanged += new RoutedPropertyChangedEventHandler<double>(x); 
```

基本思想是按需返回以编程方式预配置的滑块面板，我可以根据用户选择的选项来换入和换出。以编程方式创建的滑块的事件处理程序的实际实现已经存在于项目中。

根据下面 Matthew Walton 的回答更正了代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:20:23.060

我认为答案已经在您的问题中，除了您的代码不太正确。

```
var x = some_handler;
MySlider.ValueChanged += new RoutedPropertyChangedEventHandler<double>(x); 
```

将附加`some_handler`到事件。由此，您可以编写一个方法，该方法将幻灯片的处理函数和其他信息作为参数，并使用它来设置事件处理程序和其他相关数据，并可能返回幻灯片对象或将其存储在集合中或您需要做的任何事情。

您可能还想研究匿名函数和 lambda，这是为循环内创建的不同对象构建相似但不同的事件处理程序的有用方法。

# c# - 如何访问 ListView LayoutTemplate 控件的“文本”属性

> ID：11792799
> 
> 赞同：0
> 
> 时间：2012-08-03T09:16:19.090
> 
> 标签：c#, asp.net, listview, text, controls

我有一个 ASP.NET 应用程序并使用`ListView`. 这`ListView`有一个`LayoutTemplate`，`ItemTemplate`和一个`AlternatingItemTemplate`。在我的`LayoutTemplate`我有`LinkLabels`. 我想制作一个多语言页面，我必须访问`Text`this 的属性`Linklabels`。但我无法访问此属性。

我的 ASPX（列表视图）

```
<LayoutTemplate>
    <table id="UserTable" runat="server" border="0">
        <tr id="Tr1" style="background-color:#E5E5FE">
            <th runat="server"><asp:LinkButton ID="lnkBenutzer" runat="server" >id_Benutzer</asp:LinkButton></th>
            <th runat="server"><asp:LinkButton ID="lnkemail" runat="server" >id_Email</asp:LinkButton></th>
            <th runat="server"><asp:LinkButton ID="lnkVorname" runat="server" >id_Vorname</asp:LinkButton></th>
            <th runat="server"><asp:LinkButton ID="lnkNachname" runat="server" >id_Nachname</asp:LinkButton></th>
            <th runat="server"><asp:LinkButton ID="lnkTelefon" runat="server" >id_Telefon</asp:LinkButton></th>
        </tr>
        <tr runat="server" id="ItemPlaceholder">
        </tr>
    </table>
</LayoutTemplate>

<ItemTemplate>

    <tr> 

        <td align="left" ><asp:Label ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
        <td align="left"><asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
        <td align="left"><asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
        <td align="left"><asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
        <td align="left"><asp:Label ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

     <td align="left"><asp:Button ID="Button1" Text="Anzeigen" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>'  runat="server" /></td>

      <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

    </tr>

</ItemTemplate>

<AlternatingItemTemplate>

    <tr style="background-color:#EFEFEF"> 

        <td align="left" ><asp:Label ID="Label1" Text='<%# Eval("Benutzername") %>' runat="server" /></td>
        <td align="left"><asp:Label ID="Label2" Text='<%# Eval("eMail") %>' runat="server" /></td>
        <td align="left"><asp:Label ID="Label3" Text='<%# Eval("Vorname") %>' runat="server" /></td>
        <td align="left"><asp:Label ID="Label4" Text='<%# Eval("Nachname") %>' runat="server" /></td>
        <td align="left"><asp:Label ID="Label5" Text='<%# Eval("Telefonnummer") %>' runat="server" /></td>

    <td align="left"><asp:Button ID="Button1" Text="Anzeigen" OnCommand="Button1_Command" CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>'  runat="server" /></td>

        <td align="left"><asp:Label ID="Label6" Text='<%# Eval("GUID") %>' runat="server" Visible="False" /></td>

    </tr>

</AlternatingItemTemplate> 
```

我的 C# 代码：

```
 if (lang == "de")
        {
            string xmlfile= "de_language.xml"; 
                              //GetXMLElement() is my Method
            id_SearchUser.Text = GetXMLElement(xmlfile, "id_SearchUser");
            id_location.Text = GetXMLElement(xmlfile, "id_location");
            Button2.Text = GetXMLElement(xmlfile, "id_Search");

                        //I must access to the text property
            //lnkBenutzer.text = GetXMLElement(xmlfile, "User"); 
        } 
```

我的按钮：

```
protected void Button1_Command(object sender, CommandEventArgs e)
        {
            if (e.CommandName == "Select")
            {
                //Der Index der Zeile wird ermitellt
                int index = Convert.ToInt32(e.CommandArgument);

                string xmlfile = Session["language_file"].ToString(); 
               //it doen't works :( 
                ((LinkButton)myListView.FindControl("lnkBenutzer")).Text = GetXMLElement(xmlfile, "id_User");

                //Der Inhalt (GUID[Unsichtbar]) wird aus der zeile mit dem Index herausgezogen und übergeben       

                Label lb = (Label)myListView.Items[index].FindControl("Label6");

                //Der GUID, Benutzer-Nachname und das Werk werden an eine Session übergeben
                Session["UserID"] = lb.Text;
                Session["SearchUser"] = txtBenutzer.Text;
                Session["DropDownValue"] = dropWerk.SelectedValue;

                //Es wird eine neue Webform geöffnet
                Response.Redirect("Benutzer.aspx");

            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:34:38.707

我认为在codeBehind中会是这样的：

```
LinkButton lb = myListView.FindControl("lnkBenutzer") as LinkButton;
lb.Text = GetXMLElement(xmlfile, "user"); 
```

虽然没有测试过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:35:41.143

我相信您需要执行以下操作：

在您的 Benutzer.aspx 中：

```
public void Page_Load() {
    string xmlfile = Session["language_file"].ToString(); 
    LinkButton lnkBenutzer = (LinkButton)myListView.FindControl("lnkBenutzer");
    lnkBenutzer.Text = GetXMLElement(xmlfile, "User"); 
} 
```

简而言之，您需要做的是“找到”列表视图控件，然后在列表视图中找到该控件。这可以缩短为：

```
((LinkButton)myListView.FindControl("lnkBenutzer")).Text = GetXMLElement(xmlfile, "User"); 
```

更进一步，您可以将其提取到一个方法中，在该方法中传入您的项目名称和新文本：

```
public void SetText(string controlName, string text)
{
    ((LinkButton)myListView.FindControl(controlName)).Text = text;
} 
```

那么你可以打电话：

```
SetText("lnkBenutzer", GetXMLElement(xmlfile, "User")); 
```

根据需要替换您的姓名和值。

# c# - Silverlight 4 时间选择器

> ID：11792800
> 
> 赞同：0
> 
> 时间：2012-08-03T09:16:23.900
> 
> 标签：c#, silverlight-4.0

这是我的 timePicker 的 xaml 代码

```
<toolkit:TimePicker Name="timePickerStart" Grid.Row="9" Grid.Column="2" Foreground="White" HorizontalAlignment="Left" FontWeight="Bold" Format="HH:mm"/> 
```

我想要实现的是我的投递箱只显示完整的小时数：

10:00 11:00 12:00

默认情况下，它显示半小时（10:00、10:30、11:00），我可以通过更改 PopupMinutesInterval 属性来管理它（假设为 5，所以它将是 10:05、10:10、 10:15) ，但当然它只在 0 到 59 的范围内，而且我仍然很短，只能得到完整的小时有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:11:07.163

在 Codeplex 上查看[这个](http://silverlight.codeplex.com/workitem/3538)问题，您似乎不是第一个遇到这个问题的人。浏览最新的[TimePicker 源代码](http://silverlight.codeplex.com/SourceControl/changeset/view/77450#779272)，问题似乎仍然存在。

在这个阶段，我必须解决这个问题的唯一建议是您下载[工具包源代码](http://silverlight.codeplex.com/SourceControl/list/changesets)，更正错误并构建您的工具包的个人副本。

# javascript - 谷歌地图 API 不在不同的大陆上绘制

> ID：11792801
> 
> 赞同：2
> 
> 时间：2012-08-03T09:16:31.493
> 
> 标签：javascript, html, api, google-maps, google-maps-api-3

我已经使用谷歌地图 API 在谷歌地图上绘制了一个航点

我参考了以下页面：

[https://developers.google.com/maps/documentation/javascript/directions](https://developers.google.com/maps/documentation/javascript/directions)

“在路线部分使用航点”并对其进行了一些修改，以便在地图上仅绘制 3 个点。以下是我的 javascript 代码。

```
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

function initialize() {
    directionsDisplay = new google.maps.DirectionsRenderer();
    var initialloc = new google.maps.LatLng(12.971599, 77.594563);
    var mapOptions = {
        zoom : 6,
        mapTypeId : google.maps.MapTypeId.ROADMAP,
        center : initialloc
    }
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    directionsDisplay.setMap(map);
    calcRoute();

}

function calcRoute() {
    var lat = new Array();
    var lon = new Array();

    var start = new google.maps.LatLng(12.971599,77.594563);
    var mid = new google.maps.LatLng(12.971558,77.594552);
    var end = new google.maps.LatLng(12.971558,77.594552);

    var waypts = [];
    waypts.push( {
        location : mid,
        stopover : true
    });

    var request = {
        origin : start,
        destination : end,
        waypoints : waypts,
        optimizeWaypoints : true,
        travelMode : google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(
                    request,
                    function(response, status) {
                        if (status == google.maps.DirectionsStatus.OK) {
                            directionsDisplay.setDirections(response);
                            var route = response.routes[0];

                        }
                    });

} 
```

如果这 3 个位置在同一个国家/地区内，则效果很好，即它们有路线图。

我的问题是当位置位于不同的大陆（例如印度和澳大利亚）时如何绘制地图？

任何人都可以请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:53:51.210

问题不在于不同的大陆，而在于路由引擎的数据库是否包含有关起点和终点之间所有国家/地区的信息，包括汽车渡轮。您可以在 maps.google.com 中看到同样的情况。[这是一条从欧洲到印度的洲际航线](https://maps.google.com/maps?saddr=Bergev%C3%A4gen&daddr=MSH%203&hl=en&ie=UTF8&sll=28.304381,43.945313&sspn=142.933439,321.679688&geocode=FXIfsQMd7K7DAA;FWK3NQEdchSnBA&mra=dme&mrsp=1&sz=2&t=m&z=2)，但是如果您尝试将 B 标记移动到美国或加拿大，它不会获得航线，因为它不知道有渡轮穿越大西洋。[您可以在此电子表格](http://gmaps-samples.googlecode.com/svn/trunk/mapcoverage_filtered.html)中查看覆盖哪些国家/地区。

# java - 在另一个项目 Eclipse 中调用一个类

> ID：11792812
> 
> 赞同：14
> 
> 时间：2012-08-03T09:17:16.120
> 
> 标签：java, eclipse

我有一个项目“A”，我需要从另一个项目“B”中调用一个类“c”。

我做了以下事情。单击“A”-->Properties-->Build Path--> 在 Java Source 的一个选项卡中，我选择了项目 B.--> Accept

现在我可以创建“c”类的对象，但是当我运行项目时，我得到“ClassNotFoundException”

**更新，**

我不断收到 java.lang.ClassNotFoundException。

在 "JSF" --> 属性 --> 构建路径 --> 项目 ---> 我添加了项目：

![在此处输入图像描述](../Images/d16d98c98e1664d4d6cf95d8653414bf.png)

在 Run --> Run Configurations --> ClassPath 我有：

![在此处输入图像描述](../Images/06b3dec97972253f62d7f2e596bf7dcc.png)

现在我添加了项目“JIRA”和“JIRA 依赖项” ![在此处输入图像描述](../Images/982e5c1b2dd731ec10013080f83c19e9.png)

JIRA 项目具有以下依赖项：

![在此处输入图像描述](../Images/3d2d2187b1290ee80257a9767f6561a1.png)

我收到以下错误：

![在此处输入图像描述](../Images/b457dffd4a513c3762bb28186bfd3941.png)

但是这个类在 M2_REPO 中：

![在此处输入图像描述](../Images/4509d193347c7d4761029e6083c4f4e1.png)

**解决方案**

我只在没有 Maven 的 JAR 中添加“JIRA 依赖项”： ![在此处输入图像描述](../Images/537101c2b395e8f1dd0b22d7185b2f48.png) 现在它运行了。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T09:24:27.007

您应该在“项目”选项卡中添加另一个项目，或在“库”选项卡中添加项目的类文件夹。

![例子](../Images/daff8073208f95fa026643fccfdcbc90.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-03T09:21:22.387

您需要将项目 B 添加到项目 A 使用的运行配置中。在菜单 Run -> Run configurations... 中，将项目 B 添加到运行配置的选项卡“类路径”中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-03T09:24:17.053

将项目 B 放在构建路径上，然后从项目菜单选项中执行清理项目...然后使用它..

**-**

```
Click in "A" -->Properties -->Build Path --> Projects ---> Add the Project --->Ok 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T09:27:36.473

为了在 Java 中调用 Classes 中的方法，您首先需要该类的实例。

因此，在您的代码中，您需要执行以下操作：

1.  获取实例：

    MyClass instanceOfMyClass = MyClass.getInstance();

2.  调用方法：

    instanceOfMyClass.someFunction(...);

这意味着当您调用 getInstance() 时，如果这样的实例已经存在，它将返回 MyClass 的实例，如果没有实例，它将创建一个新实例。在获得一个类的实例后，如果它们具有适当的访问修饰符，您只需调用它的方法。

根据 java doc java.lang.classNotFoundException 出现以下情况：

1.  当我们尝试使用 MyClass.someMethod() 方法加载一个类并且 MyClass 在类路径中不可用时。
2.  当 Classloader 尝试使用 findSystemClass() 方法加载类时。
3.  在 Java 中使用 ClassLoader 类的 loadClass() 方法时。

要解决上述异常，我们需要：

1.  首先找出存在问题类文件的jar文件，例如“com.mysql.jdbc.driver”它的mysql-connector-java.jar。如果您不知道如何找到某个特定类的 jar 文件，您可以简单地在 Eclipse 中执行“Ctrl+T”并键入类的名称，它将按照它们在 Eclipse 类路径中出现的顺序列出所有 jar。

2.  检查您的类路径是否包含该 jar，如果您的类路径不包含该 jar，则只需将该类添加到您的类路径中。

3.  如果它存在于您的类路径中，那么您的类路径很可能被覆盖，或者应用程序正在使用 jar 文件或启动脚本中指定的类路径，并修复您需要找到应用程序使用的确切类路径的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T09:21:51.903

如果 B 在同一个工作区中并且 alos 打开，则必须将 int 放入“项目”而不是“源”。如果你想让 A “更”独立，你必须导出 B.jar 并将其添加到“库”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T10:05:42.070

也考虑使用[maven](http://maven.apache.org/)。如果您有多模块项目，它非常有用。只需添加另一个项目的依赖项，maven 将负责休息..！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-22T14:11:44.900

将项目“A”创建为 jar 并将此 jar 添加到项目“B”构建路径中。然后您可以调用所需的类并使用 calss 名称导入该类包名称。

# c# - TCP 监听套接字错误

> ID：11792815
> 
> 赞同：-1
> 
> 时间：2012-08-03T09:17:22.910
> 
> 标签：c#, sockets

我有 2 个程序，客户端和服务器，客户端程序通过*TCP*协议使用特定端口（EX：1370）发送数据。
我使用以下代码在我的服务器程序中等待客户端。

```
IPAddress IP = (my IP Address);
IPEndPoint ipep = new IPEndPoint(IP, 1370);

listenSocket = new Socket(AddressFamily.InterNetwork, 
                          SocketType.Stream, 
                          ProtocolType.Tcp);
listenSocket.Bind((EndPoint) ipep);
listenSocket.BeginReceive(clientData, 0, clientData.Length,
                          SocketFlags.None, new AsyncCallback(OnReceiveClient), null); 
```

我在最后一行有一个错误，套接字无法接收 TCP 协议中的数据。这段代码在 UDP 协议中工作得很好。你能帮助我吗？！（谢谢）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:51:33.843

长话短说，TCP/IP 协议有**连接建立**阶段。所以服务器必须调用`bind()`，客户端`listen()`也`accept()`必须调用`connect()`。建立连接后，服务器`accept()`返回一个**新的客户端-服务器**套接字。该套接字允许服务器与客户端通信（即服务连接）。

我想向您推荐以下示例：

1.  [同步服务器套接字示例](http://msdn.microsoft.com/en-us/library/6y0e13d3)。
2.  [同步客户端套接字示例](http://msdn.microsoft.com/en-us/library/kb5kfec7.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:31:45.593

代码应该是这样的

```
IPAddress IP = (my IP Address);
listenSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

IPEndPoint ipep = new IPEndPoint(IP, 1370);
listenSocket.Bind((EndPoint) ipep);

listenSocket.Listen(4);
// Create the call back for any client connections...
listenSocket.BeginAccept(new AsyncCallback (OnClientConnect), null); 
```

并且一旦客户端连接

```
// This is the call back function, which will be invoked when a client is connected
 public void OnClientConnect(IAsyncResult asyn)
 {
   try
   {
        Socket workerSocket = m_mainSocket.EndAccept (asyn);        
        workerSocket.BeginReceive();                    
        // Since the main Socket is now free, it can go back and wait for
        // other clients who are attempting to connect
        m_mainSocket.BeginAccept(new AsyncCallback ( OnClientConnect ),null);
   }
   catch(ObjectDisposedException)
    {
    }
    catch(SocketException se)
    {
    }

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T10:55:58.483

试试这个代码

```
 public void Listen()
            {
            string portStr = "5656";
            int port = System.Convert.ToInt32(portStr);
            // Create the listening socket...
            m_mainSocket = new Socket(AddressFamily.InterNetwork,                            SocketType.Stream,ProtocolType.Tcp);
            IPEndPoint ipLocal = new IPEndPoint(IPAddress.Any, port);
            // Bind to local IP Address...
            m_mainSocket.Bind(ipLocal);
            // Start listening...
             m_mainSocket.Listen(4);
             btn_start.Enabled = false;
             lbl_connect.Visible = true;
            // Create the call back for any client connections...
            m_mainSocket.BeginAccept(new AsyncCallback(OnClientConnect), null);
           }

             public void OnClientConnect(IAsyncResult asyn)
             {
             m_workerSocket[m_clientCount] = m_mainSocket.EndAccept(asyn);
            // Let the worker Socket do the further processing for the 
            // just connected client
            WaitForData(m_workerSocket[m_clientCount]);
            // Now increment the client count
            ++m_clientCount;
            // Display this client connection as a status message on the GUI    

            // Since the main Socket is now free, it can go back and wait for
            // other clients who are attempting to connect
            m_mainSocket.BeginAccept(new AsyncCallback(OnClientConnect), null); 
```

//** 等待客户端数据

```
 public void WaitForData(System.Net.Sockets.Socket soc)
            {
                try
                {
                   if (pfnWorkerCallBack == null)
                   {
                       // Specify the call back function which is to be 
                      // invoked when there is any write activity by the 
                      // connected client
                      pfnWorkerCallBack = new AsyncCallback(OnDataReceived);
                   }
                    SocketPacket theSocPkt = new SocketPacket();
                    theSocPkt.m_currentSocket = soc;
                   // Start receiving any data written by the connected client
                   // asynchronously
                    soc.BeginReceive(theSocPkt.dataBuffer, 0,                                                      theSocPkt.dataBuffer.Length,
                               SocketFlags.None,
                               pfnWorkerCallBack,
                               theSocPkt);
                    }
                    catch (SocketException se)
                    {
                        MessageBox.Show(se.Message);
                    }

               } 
```

# c++ - 如何处理 *.IDL 文件中的循环依赖？

> ID：11792818
> 
> 赞同：0
> 
> 时间：2012-08-03T09:17:31.740
> 
> 标签：c++, include, corba, circular-dependency, idl

我有两个 *.IDL 文件，我必须在其中处理循环依赖：

```
#ifndef __USER_IDL__
#define __USER_IDL__

#include "Group.idl"

interface User
{
    typedef<sequence> Groups;
        Groups getGroups(); 
    void setGroups(in Groups u);
};

#endif

#ifndef __GROUP_IDL__
#define __GROUP_IDL__

#include "User.idl"

interface Group
{
    typedef<sequence> Users;
        Users getUser();    
    void setUsers(in Users u);
};

#endif 
```

**我需要将它保存在单独的文件中，如何解决？**

查看我的文件：[http](http://www32.zippyshare.com/v/32255598/file.html) ://www32.zippyshare.com/v/32255598/file.html （我在那里添加了一个 Makefile，所以只需运行命令：“make all”） - 我得到的错误是：

> omn​​iidl -bcxx User.idl Group.idl：8：接口主体中的语法错误 Group.idl：8：查找“用户”时出错：找不到“用户” Group.idl：9：查找错误“用户”：未找到“用户” Group.idl：10：查找“用户”时出错：未找到“用户” User.idl：8：接口正文中的语法错误 User.idl：8：查找错误-up of 'Groups'：找不到'Groups' User.idl：9：查找'Groups'时出错：找不到'Groups' User.idl：10：查找'Groups'时出错：'未找到组的omniidl：8 个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:11:30.173

您可以转发声明一个接口，例如使用

接口组；

而不是在用户 idl 文件中包含 Group.idl

# twitter - Twitter身份验证：403 Forbidden：服务器理解请求，但拒绝执行

> ID：11792824
> 
> 赞同：2
> 
> 时间：2012-08-03T09:17:49.747
> 
> 标签：twitter, twitter-oauth, http-status-code-403

我正在尝试使用 OAuth 对用户进行身份验证并检索用户数据。当用户未登录 twitter 时，身份验证有效，我能够获取用户详细信息。但是，如果用户已经在 Twitter 上登录，我会收到此错误消息“403 Forbidden：服务器理解请求，但拒绝执行它。” . 在一些帖子中，他们说通过 https 而不是 http 发出所有请求。我已经做到了。我已经从 'http://net.tutsplus.com/tutorials/php/how-to-authenticate-users-with-twitter-oauth/' 下载了验证代码。请帮忙。

```
$twitterOauthObj    =   new TwitterOAuth($oauth_consumer_key, $oauth_consumer_secret);
if(!isset($_GET['oauth_token'])){

    $requestTokenArray  =   $twitterOauthObj->getRequestToken($callback_url);
    $requestToken       =   $requestTokenArray['oauth_token'];
    $tokenSecret        =   $requestTokenArray['oauth_token_secret'];

    $authorizeUrl       =   $twitterOauthObj->getAuthorizeURL($requestToken);
    $response       =   $twitterOauthObj->oAuthRequest($authorizeUrl, 'GET', $requestTokenArray);
    print_r($response);
} else{

    $oauthToken     =   $_GET['oauth_token'];
    $requestToken       =   $oauthToken;
    $oauthVerifier      =   $_GET['oauth_verifier'];
    $accessTokenArray   =   $twitterOauthObj->getAccessToken($oauthVerifier, $oauthToken);
        $oauthToken     =   $accessTokenArray['oauth_token'];
    $oauthTokenSecret   =   $accessTokenArray['oauth_token_secret'];
    $userTwitterId      =   $accessTokenArray['user_id'];
    $screenName     =   $accessTokenArray['screen_name'];
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:06:13.363

行。我让它工作了。我没有重定向以正确授权 url。这是修改后的代码。

```
if(!isset($_GET['oauth_token'])){

    $requestToken   =   $twitterOauthObj->getRequestToken();
    $_SESSION["oauth_token"] = $requestToken["oauth_token"];
    $_SESSION["oauth_token_secret"] = $requestToken["oauth_token_secret"];

    header("Location:".$twitterOauthObj->getAuthorizeURL($requestToken["oauth_token"]));

} 
```

谢谢你们所有的宝贵建议。真的很感激！！

# php - 使用mono for android上传图像不起作用

> ID：11792827
> 
> 赞同：0
> 
> 时间：2012-08-03T09:18:00.870
> 
> 标签：php, mono, xamarin.android

我正在尝试在 android 2.2 上使用以下单声道代码上传图像，但没有上传任何内容。

在服务器上，我有一个获取并保存图像文件的 php 文件，当我替换下面的行时，代码可以在 C# 4.0 中正常工作

```
string path = "/mnt/sdcard/DCIM/Camera/" + "abc.jpg"; 
```

和

```
string path = @"C:/images/" + "abc.jpg"; 
```

请指教

```
 void btnUpload_Click(object sender, EventArgs e)
  { 

  ManualResetEvent evt = new ManualResetEvent(false);
  WebClient wc = new WebClient();

  string path = "/mnt/sdcard/DCIM/Camera/" + "abc.jpg";

  wc.UploadFileCompleted += new UploadFileCompletedEventHandler(CB);
  wc.UploadFileAsync(new Uri("http://mywebsite.com/upload.php"), "POST", path, evt);

  evt.WaitOne();

  }

  static void CB(object sender, UploadFileCompletedEventArgs e)
  {

        if (!e.Cancelled && e.Error == null)
        {
            Console.WriteLine("File uploaded");

        }
        else
        {
            //Toast.MakeText(this, e.Error.ToString(), ToastLength.Short).Show();
            Console.WriteLine(e.Error.ToString());
        }
        ((ManualResetEvent)e.UserState).Set();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T19:00:04.377

我最终按照此处的说明将图像直接上传到 FTP

[http://memorypointer.com/uploading-image-to-ftp-mono-for-android/](http://memorypointer.com/uploading-image-to-ftp-mono-for-android/)

认为它可能会帮助别人

# php - Magento 购物车 - 动态定价

> ID：11792829
> 
> 赞同：2
> 
> 时间：2012-08-03T09:18:05.043
> 
> 标签：php, magento, e-commerce

基本上我是网页设计师。我是 magento CMS 的新手。我参与了一个新的 magento 电子商务项目。

我想在我的产品页面中进行动态定价。

在我的网站上，我正在销售窗帘布，所以我希望动态计费就像

> **用户可以给出特定产品的宽度和高度** 我有一个固定的平方英尺价格。我需要将用户提供的宽度和高度相乘以获得平方英尺值。

例如，请参考此链接。

参考网站网址：[http ://www.woodyattcurtains.com/net-curtains-voiles-c2/net-curtains-c3/ellie-white-net-curtains-p3](http://www.woodyattcurtains.com/net-curtains-voiles-c2/net-curtains-c3/ellie-white-net-curtains-p3)

我希望我的产品页面完全像这样。我在 magento 中搜索了许多扩展，以便轻松实现此结果。但是很倒霉。magento 中是否有任何免费扩展来实现这一目标？或者，请指导我通过任何类型的编码来开发这个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:45:03.913

Magento 扩展可用，但它是付费扩展

下面见网址：-

Advanced Variation Pricing 扩展支持 Magento 的动态平方英尺和平方米定价。它还提供了通过选择不同的自定义选项和变体来抵消动态产品价格的能力。

[http://www.micosolutions.com/magento-extensions/advanced-variation-pricing-for-magento](http://www.micosolutions.com/magento-extensions/advanced-variation-pricing-for-magento)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-06T11:45:38.547

只需将这段代码添加到您的

app/design/frontend/default/[template_NAME]/template/catalog/product/view.phtml 文件我已经为宽度和高度添加了两个新字段就像这样

```
<label for="height"><?php echo "Height" ?></label>
            <input type="text" name="height" id="height" maxlength="30" value="1" title="<?php echo 'Height' ?>" class="input-text" />
            <label for="width"><?php echo "Width" ?></label>
            <input type="text" name="width" id="width" maxlength="30" value="1" title="<?php echo 'Width' ?>" class="input-text" /> 
```

还要添加这些php代码

```
<?php  $br_special_price = $_product->getSpecialPrice(); 
    $br_old_price = $_product->getPrice(); 
    $an_id = $_product->getId(); 

$special_priceID="product-price-".$an_id;

$old_priceID="old-price-".$an_id;
?> 
```

文件末尾还有这个脚本

```
<script type="text/javascript">
var mq= 0;
function respondToChange(event) {
mq= Math.ceil($('width').getValue() * $('height').getValue() * <?php echo $br_special_price;?> );
document.getElementById('<?php echo $special_priceID; ?>').innerHTML = '&#163; &nbsp;'+mq;
 mq1= Math.ceil($('width').getValue() * $('height').getValue() * <?php echo $br_old_price;?>);
 document.getElementById('<?php echo $old_priceID; ?>').innerHTML = '&#163; &nbsp;'+mq1;
}
$('width').observe('change', respondToChange);
$('height').observe('change', respondToChange); 
</script> 
```

这段代码有问题。您可以获得所有产品页面中反映的价格。但是您不能将这些更新的特价商品传递到购物车。旧值将反映在购物车中。希望有人更新此代码。

# sql - SQL Server：按字段上的函数分组并选择

> ID：11792836
> 
> 赞同：2
> 
> 时间：2012-08-03T09:18:31.580
> 
> 标签：sql, sql-server, datetime, aggregation

我有一个`group by YEAR(mydate),MONTH(mydate)`

我想选择它们作为一个独特的领域

```
SELECT SUM(Price),YEAR(mydate) + '/' + MONTH(mydate)
FROM MyTable
GROUP BY YEAR(mydate), MONTH(mydate) 
```

或类似的东西。

`mydate`是`smalldatetime`。

是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T09:22:34.743

试试这个：

```
SELECT cast(YEAR(mydate) as CHAR(4))+'/'+cast(MONTH(mydate) as varchar(2))
FROM MyTable
Group by YEAR(mydate),MONTH(mydate) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:22:50.570

您需要将它们转换为字符串

尝试

```
SELECT convert(varchar(7), mydate ,111)
FROM MyTable 
GROUP BY convert(varchar(7), mydate ,111) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T15:20:19.983

对于 MS SQL Server 2012，带有前导零：

```
CAST(YEAR(mydate) AS VARCHAR(4)) + '/' +
RIGHT('00' + CAST(MONTH(mydate) AS VARCHAR(2)), 2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-05T08:35:47.417

这是我的解决方案:) 我需要在 sqlserver 表（列 year_rif 和 month_rif）中获取较旧的日期，以从链接的 oracle 表中插入更新的记录（按月作业在 sqlserver 中镜像 oracle 表）

```
DECLARE @anno_INIZIO int
DECLARE @mese_INIZIO int

select top(1) @mese_INIZIO= mese_rif,@anno_INIZIO=anno_rif 
 from dbo.ORACLE_BUDGET_MENSILI 
 group by  mese_rif,anno_rif 
 order by max(mese_rif/12+anno_rif) desc

set @anno_inizio=coalesce(@anno_INIZIO ,2016)
set @mese_INIZIO=coalesce(@mese_INIZIO,1) 
```

在第一次导入时，我假设从 2016 年 1 月开始获取数据完整的工作是：

```
 DECLARE @anno_INIZIO int
    DECLARE @mese_INIZIO int
--get max year/mont avaible in mirrored table
    select top(1) @mese_INIZIO= mese_rif,@anno_INIZIO=anno_rif from dbo.ORACLE_BUDGET_MENSILI group by  mese_rif,anno_rif order by max(mese_rif/12+anno_rif) desc
--
    set @anno_inizio=coalesce(@anno_inizio,2016)
    set @mese_INIZIO=coalesce(@mese_INIZIO,1)
-- query to linked oracle to get into table newer data
    SET @SQL='select * FROM OPENQUERY(ADL_REP,''
    SELECT CODICE_UO,ANNO_RIF,MESE_RIF,ID_CLASSE,BUDGET,ORE_MENSILI_OBIETTIVO FROM ADL.BUDGET_MENSILI where  mese_rif/12+anno_rif > '+convert(varchar(255),@mese_INIZIO/12+@anno_INIZIO)+'
    '')'
    INSERT INTO uat.[dbo].ORACLE_BUDGET_MENSILI EXECUTE sp_executesql @SQL 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-04T06:28:38.943

```
SELECT CAST(DATENAME(yy, mydate) AS CHAR(4)) + '-' + CAST(DATENAME(mm, mydate) AS VARCHAR(2)) 'Date'
 ,SUM(Price)
FROM [My Table]
GROUP BY DATENAME(yy, mydate)
 ,DATENAME(ww, mydate) 
```

# paypal - PayPal Error: “Your payment can’t be completed. Please return to the participating website and try again”

> ID：11792844
> 
> 赞同：1
> 
> 时间：2012-08-03T09:18:54.783
> 
> 标签：paypal, paypal-adaptive-payments

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T05:58:37.577

I solved the problem. In my client code, I was referring to the sandbox URL instead of the live URL.

```
<form action="https://www.paypal.com/webapps/adaptivepayment/flow/pay" target="PPDGFrame">
  <input id="type" type="hidden" name="expType" value="light">
  <input id="paykey" type="hidden" name="paykey" value="AP-...">
  <input type="submit" id="submitBtn" value="Pay with PayPal">
</form> 
```

# javascript - 将js确认更改为jquery ui的良好确认？

> ID：11792845
> 
> 赞同：1
> 
> 时间：2012-08-03T09:18:58.650
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我正在使用js确认。[我想用 jquery UI](http://jqueryui.com/demos/dialog/#modal-confirmation)让它更漂亮。

使用js确认：

```
$("a.delete").click(function() {
    el = $(this);
    if (confirm("Are you sure you want delete the data?")) {
        $.ajax({
            url : $(this).attr("href"),
            type : "GET",
            dataType : 'json', //The requested response in JSON format
            success : function(response) {
                if (response.status == 1) {
                    loadData();
                    $("#divFormContent").load("ajax.php?module=test&action=form_test");
                    $("#divFormContent").hide();
                    $("#btn_hide").hide();
                    // alert("The data successfully deleted!");
                } else {
                    alert("Data failed in the clearing!");
                }
            }
        });
    }
    return false;
}); 
```

谁能告诉我如何使用 jquery UI 确认更改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:51:10.573

首先，您需要创建将要显示的元素。示例 html：

```
<div id="dialog-confirm" title="Confirmation">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:5px 7px 20px 0;"></span>Are you sure?</p>
</div> 
```

`.dialog()`当您通过`autoOpen: false`参数调用该元素时，该元素将自动隐藏。最好在 DOM 就绪处理程序中执行此操作。

jQuery UI 的对话框是**异步**的，它们不会像提示那样冻结函数并等待响应`confirm`。相反，您必须将函数包装在“是”确认按钮的回调中。

当您需要该对话框时，只需调用`$("#dialog-confirm").dialog("open");`.

最后，`this`当您将函数从单击处理程序移动到对话框的回调处理程序时，将不再引用单击的元素。我曾经[`.data`](http://api.jquery.com/data/)将点击的数据存储`$(this).attr('href')`在`#dialog-confirm`的数据中，并为 Ajax 调用检索它。

这是代码：

```
$(function() {
    $("a.delete").click(function() {
        $('#dialog-confirm').data('clickedHref', $(this).attr('href'));
        $("#dialog-confirm").dialog("open");
        return false;
    });

    $("#dialog-confirm").dialog({
        autoOpen: false,
        resizable: false,
        modal: true,
        buttons: {
            "Yes": function() {
                $.ajax({
                    url : $('#dialog-confirm').data('clickedHref'),
                    //rest of your function here
                });
                $(this).dialog("close");
            },
            "No": function() {
                $(this).dialog("close");
            }
        }
    });
}); 
```

## [*jsFiddle*](http://jsfiddle.net/KvXdv/)

# vb6 - [ADODC]：未指定 RecordSource。[ADO]：没有为命令对象设置命令文本

> ID：11792851
> 
> 赞同：0
> 
> 时间：2012-08-03T09:19:09.297
> 
> 标签：vb6, ado

下面是我正在使用的代码

```
Private Sub Form_Load()
    On Error Resume Next

    Adodc1.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=D:\Smart Invoice\Smartdata.mdb;Persist Security Info=False"
    Adodc1.RecordSource = "Select * From tableSerMast"

End Sub 
```

我得到低于所说的错误：

> [ADODC]：未指定 RecordSource。[ADO]：没有为命令对象设置命令文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:47:32.240

我将假设 VBA，如果这就是您的意思，那么更改为 VB6 应该不会太难。

```
 Private Sub Form_Load()
    ''Almost never a good idea
    ''On Error Resume Next
    ''Reference: Microsoft ActiveX Data Objects x.x Library
    Dim adodc1 As New ADODB.Connection
    Dim rs As New ADODB.Recordset
    Adodc1.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;" _
        & "Data Source=D:\Smart Invoice\Smartdata.mdb;" _
        & "Persist Security Info=False"
    Adodc1.Open

    rs.Open "Select * From tableSerMast", Adodc1
End Sub 
```

# android - OpenGL：模型视图和投影矩阵

> ID：11792852
> 
> 赞同：1
> 
> 时间：2012-08-03T09:19:22.517
> 
> 标签：android, opengl-es, projection-matrix

我想使用 gluUnProject 进行 3D 拾取。它返回错误的值。我认为原因是 ModelView & Projection 矩阵生成不正确。为了获取它们，我使用 API 演示中的 MatrixGrabber、MatrixStack 和 MatrixTrackingGL 类：

```
MatrixGrabber mg = new MatrixGrabber();  
mg.getCurrentProjection(gl);  
mg.getCurrentModelView(gl); 
```

无论我把相机放在哪里，Projection 和 ModelView 矩阵都是一样的：

**模型视图**

```
1.0 0.0 0.0 0.0  
0.0 1.0 0.0 0.0  
0.0 0.0 1.0 0.0  
0.0 0.0 0.0 1.0 
```

**投影**

```
1.0 0.0 0.0 0.0  
0.0 1.0 0.0 0.0  
0.0 0.0 1.0 0.0  
0.0 0.0 0.0 1.0 
```

一些代码：

```
private Game game;
private final float boardSize = 25f;
private float[] eyeV;
private float[] centerV;
private float[] upV;
private GL10 gl;
private MatrixGrabber mg;
public GLRenderer() {
    game = new Game();
    eyeV = new float[] { boardSize / 2f, boardSize / 5f, boardSize * 1.2f };
    centerV = new float[] { boardSize / 2f, boardSize / 2f, 0f };
    upV = new float[] { 0f, 1f, 0f };
    mg = new MatrixGrabber();
}
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    this.gl = gl;
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
    gl.glDisable(GL10.GL_DITHER);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glCullFace(GL10.GL_BACK);
    gl.glShadeModel(GL10.GL_SMOOTH);
    gl.glClearColor(.2f, .2f, .2f, 1f);
    gl.glClearDepthf(1f);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    game.LoadTextures(gl);
}
public void onDrawFrame(GL10 gl) {
    gl.glDisable(GL10.GL_DITHER);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
    GLU.gluLookAt(gl, eyeV[0], eyeV[1], eyeV[2], centerV[0], centerV[1], centerV[2], upV[0], upV[1], upV[2]);
    game.draw(gl);
    mg.getCurrentProjection(gl);
    mg.getCurrentModelView(gl);
}
public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);
    float ratio = (float) width / (float) height;
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glFrustumf(-ratio, ratio, -1, 1, 1, 100);
} 
```

非常感谢您的任何建议！

# magento - 如何在magento的标题顶部链接中显示“我的愿望清单”

> ID：11792854
> 
> 赞同：1
> 
> 时间：2012-08-03T09:19:25.630
> 
> 标签：magento

我将我的 magento 站点从 1.4.1.1 升级到 magento 1.7.0.2 。

之后，我的愿望清单链接不会显示在标题右上角。

我怎样才能显示这个？

我在 customer.xml 文件中使用了这段代码：

```
<reference name="top.links">
            <action method="addLink" translate="label title" module="customer"><label>My Wishlist</label><url helper="customer/getAccountUrl"/><title>My Wishlist</title><prepare/><urlParams/><position>10</position></action>
</reference> 
```

但登录后它不会链接到愿望清单。

那么我怎样才能链接它没有正确的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:28:03.290

您可以通过如下布局规则添加指向标题的链接。我从 `app/design/frontend/base/default/layout/customer.xml`

```
<reference name="top.links">
    <action method="addLink" translate="label title" module="customer"><label>My Account</label><url helper="customer/getAccountUrl"/><title>My Account</title><prepare/><urlParams/><position>10</p$
</reference> 
```

# asp.net - ASP.NET 1.1 到 4.0 迁移：事件不起作用

> ID：11792856
> 
> 赞同：14
> 
> 时间：2012-08-03T09:19:32.383
> 
> 标签：asp.net, .net, migration, asp.net-4.0, asp.net-1.1

我最近开始将 ASP.NET 项目从 .NET 版本 1.1 迁移到 4.0。该系统目前在客户站点上运行并且可以正常工作。当我通过 VS 向导迁移解决方案时，我没有收到任何错误。错误是**没有服务器控件事件起作用**，并且**视图状态始终为空**。

我已经尝试明确设置`ViewStateMode`为 Enabled 和`AutoEventWireup`true。不幸的是，没有任何效果。该项目不是作为 Web 应用程序编写的（转换不能解决问题）。

我还检查了是否所有服务器控件都设置了 ID（它们确实设置了）。

该项目有自己的母版页系统，System.Web.UI.Page 上有一层厚厚的层，可能会破坏很多东西，但到目前为止我还没有找到问题的根源。

是否有任何我应该检查的特定设置（即自 .NET 1.1 以来更改的默认值）或者你能给我一些提示为什么会发生这种情况？

编辑 1：这些是单击链接按钮时发布的值：

**CRC** =-2134936892& **_ *EVENTTARGET*** *=MPage%24BC%24TestButton&*****_EVENTARGUMENT** =& **_ *VIEWSTATE*** *=&*****_EVENTVALIDATION** =%2FwEWAwL%2BraDpAgLB49K8AwKy8rFAt4Axk3NlUEWxrtY%2FRtaexH%2F634CkJe6G9Im5EOPXtVw%3D****

 ****编辑 2：我仔细检查了自定义母版页机制，发现它`Server.Transfer(...)`在跳转到正确的页面之前广泛使用了方法。这是缺少 ViewState 的可能原因吗？（那么奇怪的是，EventTarget 总是保持不变）更重要的是，1.1 和 4.0 之间会不会有任何变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T10:30:36.653

你检查了这个链接吗？[http://www.asp.net/whitepapers/aspnet4/break-changes](http://www.asp.net/whitepapers/aspnet4/breaking-changes)

在页面的更深处指出，当`FORM`' 的操作为空时，会发生以下情况：

1.  一个 .aspx 页面被发送到浏览器，其中 form 元素的 action 属性设置为“”。
2.  该表单被回发到 ASP.NET。
3.  托管 HTTP 模块读取实体主体的某些部分。例如，一个模块读取 Request.Form 或 Request.Params。这会导致 POST 请求的实体主体被读入托管内存。因此，实体主体不再可用于在 IIS 7 或 IIS 7.5 集成模式下运行的任何本机代码模块。
4.  IIS DefaultDocumentModule 对象最终运行并创建对 Default.aspx 文档的子请求。但是，由于实体主体已被一段托管代码读取，因此没有可用于发送给子请求的实体主体。
5.  当 HTTP 管道针对子请求运行时，.aspx 文件的处理程序在处理程序执行阶段运行。
6.  **因为没有实体主体，所以没有表单变量和视图状态**，因此 .aspx 页面处理程序没有可用信息来确定应该引发什么事件（如果有）。因此，受影响的 .aspx 页面的任何回发事件处理程序都不会运行。您可以通过以下方式解决此问题：

编辑：我们在两年前迁移到 3.5 时遇到了类似的问题......我们所做的是使用带有 Web App 项目类型的 VS2005 作为桥梁，所以我们的迁移路径是：

*   1.1 到 2.0
*   2.0 到 3.5

这是我们最后的手段，也是在找到这份文件之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:02:59.147

迁移完成后，

如果是 Web 应用程序：

这是一个清单：

1.  尝试在 Visual Studio 2010 的设计模式下更改 .NET 服务器控件的值。（从其框架 4.0 开始，您将使用 Visual Studio 2010）更改它包括：更改服务器控件的大小或任何其他属性。这将迫使设计者生成服务器端的设计者代码。

2.  确保清理解决方案并重建它。我曾经遇到过类似的问题，他们曾经在设计师更改设计后修复，偶尔会出错。它在迁移过程中没有给出错误。

3.  保存表单并进行测试。

4.  在 Firefox 中使用 Firebug 检查加载网页时是否有任何 javascript 脚本错误。

    希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:54:50.477

这可能会也可能不会解决问题，但是如果您查看堆栈上的这篇文章[为什么生产服务器上的表单操作属性为空？](https://stackoverflow.com/questions/2620874/why-is-the-form-action-attribute-empty-on-production-server)它谈到了在 ASP.NET 3.5 sp1 中引入的以表单的 action 属性为中心的重大变化——它可能是一个开始的地方！

过去我不得不做类似的事情，这可能是一个艰苦的过程，尤其是当您拥有“自定义母版页”功能时（我必须这样做）。我会选择一个非常基本的页面 - 我们有一个 BasePage 由 CustomPage 继承，而后者又可以由 AdminBasePage 继承，然后是 Admin 页面等。如果您选择一个相对简单的页面并在早期设置断点页面构建过程尽可能，然后一直 F10 直到它呈现它可能会显示事物被调用两次的位置（这在我们的案例中发生了很多，并且是导致一些值被覆盖等问题的原因）。

在回答您的 server.transfer 问题“编辑 2”时，我发现了这个资源[http://www.codeproject.com/Tips/74472/ViewState-and-Server-Transfer-Best-practices](http://www.codeproject.com/Tips/74472/ViewState-and-Server-Transfer-Best-practices)，它解释了如何确保（希望） viewstate 和 server.transfer 继续协调工作。我每天都在不断地回答这个问题——请务必发布更多关于你的进展情况的更新。你有我最深切的同情！****

# php - 如何在时间表中根据特定日期和时间段显示主题和房间名称？

> ID：11792866
> 
> 赞同：0
> 
> 时间：2012-08-03T09:20:17.047
> 
> 标签：php, cakephp

我从周一到周六有 6 天。但我在数据库中只存储了 3 天的时间段。
我像这样在数组中得到了这些东西。

```
Array
(
    [0] => Array
        (
            [subject] => 17
            [room] => 3
            [period] => 1
            [day] => 1
        )

    [1] => Array
        (
            [subject] => 8
            [room] => 2
            [period] => 1
            [day] => 3
        )

    [2] => Array
        (
            [subject] => 10
            [room] => 1
            [period] => 1
            [day] => 5
        )

..... 
```

现在我需要在视图中显示它。如果我在特定时期有主题，我想显示它，否则所有主题都应该显示。

我的ctp文件内容：

```
 1\. <table id="ss" style="border:1px solid #cccccc" class="form_text">
            <tr style="background: url('<?php echo $this->webroot;?>img/title.gif') repeat-x; height:20px">
                <td align="center" style="width:1%"><strong>Days</strong></td>

            <?php foreach($period_num as $k) : ?>

            <td align="center" style="width:2%"><strong><?php echo $k    ?></strong></td>
          <?php endforeach ?>               

            </tr>
          <?php for($i=0; $i<6; $i++) : ?> <?php

                          if ( ( $i % 2) == 0 ) 

                              $bg_color = "#efefef";

                          else

                               $bg_color = "#FFF"; ?>       <tr  style="background: <?php echo $bg_color; ?>">          <?php      
    $total=count($period_num);?>            <?php for($j=0; $j<=$total; $j++) : 
    ?>          <?php $index = $i*$total+$j-1 ?>
                          <?php $count=0; ?>

            <td>            <?php if($j==0) : ?>

                    <?php echo $workingDays[$i]['Day']['day_name'] ?> 
                    <?php elseif($j!=0 && $subject==0): ?>

                     <?php echo $form->hidden('ClassSchedule.'.$index.'.day_id',
                                             array('value'=>$workingDays[$i]['Day']['day_id'],

                                            'style' => 'width: 35%;'));?>
                    <?php echo $form->hidden('ClassSchedule.'.$index.'.period_name',
                                             array('value'=>$j,

                                            'style' => 'width: 35%;')); 
                      ?>
                    <?php echo $form->input('ClassSchedule.'.$index.'.subject_id', array('options'=>$subject_sel,'empty'=>'none')) ?>
                    <?php echo $form->input('ClassSchedule.'.$index.'.room_id', array('options'=>$room_sel,'empty'=>'none')) ?>
                          <?php else:?>
                                     <?php echo $form->hidden('ClassSchedule.'.$index.'.day_id',
                                             array('value'=>$workingDays[$i]['Day']['day_id'],

                                            'style' => 'width: 35%;'));?>
                    <?php echo $form->hidden('ClassSchedule.'.$index.'.period_name',
                                             array('value'=>$j,

                                            'style' => 'width: 35%;')); ?>

                                    <?php echo $form->input('ClassSchedule.'.$index.'.subject_id',      
    array('options'=>$subject_sel)) ?>
                    <?php echo $form->input('ClassSchedule.'.$index.'.room_id', array('options'=>$room_sel)) ?>             <?php endif ?>
                                    <?php endfor ?> </td> <?php $count++; ?>    </tr> <?php endfor ?> </table> <?php } ?>
          <?php echo $form->end();?> 
```

# select - 在 Three.JS 中通过鼠标单击选择 Collada 对象

> ID：11792867
> 
> 赞同：2
> 
> 时间：2012-08-03T09:20:17.827
> 
> 标签：select, mouseevent, webgl, three.js, collada

我需要通过鼠标单击在 Three.JS 中选择 Collada 对象。我知道我可以根据他们的 id 选择对象，并且我看到了一些用户可以与几何定义的对象交互的示例（[here](http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html)）。但我需要访问 Collada 格式的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:05:54.873

假设这`dae_scene`是从 ColladaLoader 返回的 COLLADA 场景，您可以执行以下操作来检查交叉点：

```
var toIntersect = [];
THREE.SceneUtils.traverseHierarchy(dae_scene, function (child) {
    if (child instanceof THREE.Mesh) {
        toIntersect.push(child);
    }
}); 
```

这将获取 COLLADA 场景中的所有 Mesh 对象。然后，您可以使用该数组来查找射线交点，如下所示：

```
var ray = new THREE.Ray( camera.position,
                         vector.subSelf( camera.position ).normalize() );
var intersects = ray.intersectObjects( toIntersect ); 
```

# tridion - .NET 中 VBScript 和 .NET 函数的映射

> ID：11792869
> 
> 赞同：2
> 
> 时间：2012-08-03T09:20:20.520
> 
> 标签：tridion, tridion-2011

目前，作为从 SDL Tridion 5.3 升级到 SDL Tridion 2011 SP1 的一部分，我们正在将 VBScript 模板转换为模块化模板，但在这样做的同时，我们在 .NET 中寻找正确的等效函数时面临挑战。

例如，这两个 VBScript 函数在 .NET 中的等效函数`DisplayPublishedComponentLink`和`MakeTcdlComponentLink`

任何人都可以向我提供有关这些 VBScript 函数在 .NET 中的映射的信息吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T10:58:23.240

模块化模板中没有 VBScript 函数（在 VBScript 模板中使用）的精确映射，因为这两个模板模型完全不同。

在迁移 VBScript 模板时，您永远不应该尝试只是转换（或重写）它，而是查看它的要求并从头开​​始构建一个满足这些要求的模块化模板。这可能听起来效率较低，但实际上并不是因为模块化模板模型具有不同的好处，您将开始使用这些好处。

*更详细地说，在模块化模板中，您应该使用 Dreamweaver TBB 和 .NET 程序集 TBB 将设计和功能分开，而在 VBscript 模板中，这一切都是混合的。*

您提到的功能既包含功能又包含设计，在模块化模板中您应该会发现它们甚至不再需要。例如，您可以在 Dreamweaver TBB 中简单地使用以下代码：

```
<a tridion:href="@@LinkField.ID@@">@@LinkText@@</a> 
```

您可能还对以下有关模块化模板的文章感兴趣，以获取有关其概念以及如何使用它们的更多详细信息：

*   [复合模板的不同级别第 1 部分](http://sdltridionworld.com/articles/compound_templating_part1.aspx)
*   [复合模板的不同级别第 2 部分](http://sdltridionworld.com/articles/compound_templating_part2.aspx)
*   [ASP.NET 网站中的动态链接](http://sdltridionworld.com/articles/dynamiclinkinginaspnetwebsites.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:31:08.537

我同意 Bart 从头开始​​的观点。简单地复制 C# 代码中的所有内容可能会节省一些前期费用，但会错过模块化模板的最强大功能（例如*模块化*）。

在比较新旧模板时，请考虑：

*   将布局和标记生成代码移至 DWT TBB
*   跟踪 VBScript 模板之间的重复逻辑，并考虑创建 C# TBB 以对类似功能进行分组
*   查找因上下文或硬编码值而异的模板功能，并将它们移动到参数架构或 C# TBB 逻辑

如果你能做到最后一点，你可以减少这种转换中的模板数量，同时创建有用和可重用的模板构建块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:16:29.417

从旧的旧模板迁移到模块化模板时，只有在您实施网站的新设计时才这样做。如果可能的话，您可以同时重新考虑您的网站解决方案的整个架构（发布模型）。

从技术角度来看，转向模块化模板肯定有好处，而且由于旧模板已被弃用，因此在支持方面肯定是这样。

但我敢肯定，您希望为您的 $$ 获得更多收益。

# java - Java Jersey - 我如何在我的 Tomcat 服务器中写入文件

> ID：11792878
> 
> 赞同：1
> 
> 时间：2012-08-03T09:20:49.597
> 
> 标签：java, rest, tomcat

我在将文件写入系统中 tomcat 服务器的本地主机时遇到问题。

我如何在下面提到的位置写入文件？当文件上传到提到的位置时，我收到了回复。但我不知道它存储在我的系统中的什么位置。这是正确的做法吗？？

```
@POST
@Path("/upload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(
        @FormDataParam("file") InputStream uploadedInputStream,
        @FormDataParam("file") FormDataContentDisposition fileDetail) {

    String uploadedFileLocation = "http://127.0.0.1:8080/Attachments"
            + fileDetail.getFileName();

    // save it
    writeToFile(uploadedInputStream, uploadedFileLocation);

    String output = "File uploaded to : " + uploadedFileLocation;

    return Response.status(200).entity(output).build();

}

private void writeToFile(InputStream uploadedInputStream, String uploadedFileLocation) { 
  try { 
    OutputStream out = new FileOutputStream(new File( uploadedFileLocation)); 
    int read = 0; 
    byte[] bytes = new byte[1024]; 
    out = new FileOutputStream(new File(uploadedFileLocation)); 
    while ((read = uploadedInputStream.read(bytes)) != -1) { 
      out.write(bytes, 0, read); 
    } 
    out.flush(); 
    out.close(); 
  } catch (IOException e) { 
    e.printStackTrace(); 
  } 
} 
```

实际上我从[http://www.mkyong.com/webservices/jax-rs/file-upload-example-in-jersey/得到了这个 [writeToFile] 代码](http://www.mkyong.com/webservices/jax-rs/file-upload-example-in-jersey/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:36:20.657

如果要将文件写入与 Web 服务器相同的服务器，则 uploadFileLocation 应该是`uploadedFileLocation = "/your_uploaded_file_direcoty/";`HTTP URL 以外的目录。

如果你想通过 http 将文件写入远程服务器，你可以使用一些 http 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:36:33.030

您正在尝试写入`File`被调用的`http://127.0.0.1:8080/Attachments/something.else`. 那肯定行不通。根据[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File%29)：

> 如果文件存在但是是目录而不是常规文件，不存在但无法创建，或者由于任何其他原因无法打开，`FileNotFoundException`则抛出 a。

由于您只是打印出异常堆栈跟踪，但不处理失败，因此您不会得到写入文件失败的指示。检查您的服务器日志，会有一个堆栈跟踪说明您尝试访问的文件找不到。

相反，生成一个文件名，例如`System.getProperty("java.io.tmpdir") + fileDetail.getFileName()`，然后写入该文件。[该类](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)的[JavaDoc`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)指出：

> 在 UNIX 系统上，该属性的默认值通常是“/tmp”或“/var/tmp”；在 Microsoft Windows 系统上，它通常是“C:\WINNT\TEMP”。

# python - Objective-C 数组中的连续数字，如 Python 中的 range()

> ID：11792883
> 
> 赞同：7
> 
> 时间：2012-08-03T09:21:15.417
> 
> 标签：python, objective-c, ios, macos, cocoa

Python 可以创建一个包含连续数字的列表，如下所示：

```
numbers=range(1,10); // >> [1,2,3,4,5,6,7,8,9] 
```

如何在 Objective-c 中实现这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T11:51:47.013

阅读您的陈述*“只需要一个带有连续数字的数组，我不想用循环初始化它”**让*我问：对您来说更重要的是：拥有*`array`*或拥有代表连续范围的（自然）数字。看看它可能会接近你想要的。你用它初始化它*`NSIndexSet`*

 *```
[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(1,9)]; 
```

迭代这个集合就像迭代一个数组一样简单，不需要 NSNumbers。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T09:39:20.970

Objective-C（实际上是 Foundation）对此没有特殊功能。你可以使用：

```
NSMutableArray *array = [NSMutableArray array];
for(int i=1; i<10; i++) {
    [array addObject:@(i)]; // @() is the modern objective-c syntax, to box the value into an NSNumber.
}
// If you need an immutable array, add NSArray *immutableArray = [array copy]; 
```

如果您想更频繁地使用它，您可以选择将它放在一个[类别中](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T09:48:28.087

您可以使用`NSRange`.

```
NSRange numbers = NSMakeRange(1, 10); 
```

*NSRange*只是一个结构，**不像**Python*范围*对象。

```
typedef struct _NSRange {
       NSUInteger location;
       NSUInteger length;
} NSRange; 
```

所以你必须使用*for*循环来访问它的成员。

```
NSUInteger num;
for(num = 1; num <= maxValue; num++ ){
    // Do Something here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T10:26:31.007

您可以将 NSArray 子类化为范围类。继承 NSArray 非常简单：

*   你需要一个合适的初始化方法，它调用`[super init]`；和

*   你需要覆盖`count`和`objectAtIndex:`

你可以做更多，但你不需要。这是一个缺少一些检查代码的草图：

```
@interface RangeArray : NSArray

- (id) initWithRangeFrom:(NSInteger)firstValue to:(NSInteger)lastValue;

@end

@implementation RangeArray
{
    NSInteger start, count;
}

- (id) initWithRangeFrom:(NSInteger)firstValue to:(NSInteger)lastValue
{
    // should check firstValue < lastValue and take appropriate action if not
    if((self = [super init]))
    {
        start = firstValue;
        count = lastValue - firstValue + 1;
    }
    return self;
}

// to subclass NSArray only need to override count & objectAtIndex:

- (NSUInteger) count
{
    return count;
}

- (id)objectAtIndex:(NSUInteger)index
{
    if (index >= count)
        @throw [NSException exceptionWithName:NSRangeException reason:@"Index out of bounds" userInfo:nil];
    else
        return [NSNumber numberWithInteger:(start + index)];
}

@end 
```

您可以按如下方式使用它：

```
NSArray *myRange = [[RangeArray alloc] initWithRangeFrom:1 to:10]; 
```

如果你`copy`a`RangeArray`它将成为一个普通的`NSNumber`对象数组，但你可以通过实现`NSCopying`协议方法来避免。*

# vim - 让omnifunc 和completefunc 优先于supertabs

> ID：11792885
> 
> 赞同：0
> 
> 时间：2012-08-03T09:21:27.470
> 
> 标签：vim, omnicomplete, supertab

> **可能重复：**
> [在超级标签之前检查omnifunc](https://stackoverflow.com/questions/11785124/checking-omnifunc-before-supertags)

在默认为 Supertab 完成之前，我如何让 Vim 检查是否可以完成任何 Omni 完成或完整功能？例如在 .html 文件中我会输入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:39:34.960

我对 supertab 有以下设置：

```
let g:SuperTabDefaultCompletionType = "context"
let g:SuperTabContextTextOmniPrecedence = ['&omnifunc', '&completefunc'] 
```

如果上下文合适（例如，如果您在 c++ 文件中并键入 ::），supertabdefaultcompletion的设置`context`使 supertab 使用omni 完成。如果上下文不合适，它将只返回默认完成 ( `ctrl-p`)。

# php - 如何使用 Symfony 向组件函数发送 Ajax 请求？

> ID：11792888
> 
> 赞同：0
> 
> 时间：2012-08-03T09:21:43.140
> 
> 标签：php, jquery, symfony-1.4

我有一个 Button`data-attributes`和一个 Component **MyComp**。

调用组件时，应在 : 之前运行函数`executeMyComp(sfWebRequest $request)`。在我的**executeMyComp 中**，我执行了一些 Propel SQL，但我需要通过 AJAX 从 Button 发送一些变量。

1.  Ajax 应该将变量保存到 Symfony 会话中吗？如果是的话怎么办？
2.  或者我应该通过 Ajax 发送一个 sfWebRequest 如果是的话如何？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T08:39:47.903

for function 之前`executeMyComp`你可以使用`preExecute`函数。它们在实际操作之前运行，您可以通过使用 getModuleName 和 getActionName 方法检查它是否是特定操作来编写代码。

关于你的第二个问题，我总是使用 JQuery Ajax 函数，因为使用原型 ajax 总是存在一些冲突。它使用起来非常简单，您可以将请求的值发送到特定操作。所以不需要将它们添加到会话中

```
$(document).ready( function(){
    $.ajax({
            type: "POST",
            url: "your action URL",
            data: fields, // this fields variable(a string full of parameters) will be sent by request and you can get them using getParameter
            success: function(data){
                //if everything goes well you come here.here you can show your response.
            }
        });
}); 
```

当然，无需说您可以通过 jquery 将属性保存到变量中，然后再通过 ajax 发送它们，如下所示：

```
var myvar=$("#componentid").val(); 
```

# python - Python多线程输出

> ID：11792898
> 
> 赞同：0
> 
> 时间：2012-08-03T09:22:31.930
> 
> 标签：python, multithreading

我是 python 多线程的新手，对下面的代码感到困惑：

```
#!/usr/bin/env python

import thread
from time import sleep, ctime

loops = [4, 2]

def loop(nloop, nsec, lock):
    print 'start loop', nloop, 'at:', ctime()
    sleep(nsec)
    print 'loop', nloop, 'done at:', ctime()
    lock.release()

def main():
    print 'starting at:', ctime()
    locks = []
    nloops = range(len(loops))

    for i in nloops:
        lock = thread.allocate_lock()
        lock.acquire()
        locks.append(lock)

    for i in nloops:
        thread.start_new_thread(loop,
                    (i, loops[i], locks[i]))

    for i in nloops:
        while locks[i].locked():
            pass

    print 'all done at:', ctime()

if __name__ == '__main__':
    main() 
```

当我尝试运行时，我得到了以下结果

```
starting at: Fri Aug 03 17:07:20 2012
start loopstart loop  01  at:at:  Fri Aug 03 17:07:20 2012Fri Aug 03 17:07:20 20
12

loop 1 done at: Fri Aug 03 17:07:22 2012
loop 0 done at: Fri Aug 03 17:07:24 2012
all done at: Fri Aug 03 17:07:24 2012 
```

如您所见，这两个线程的“开始”输出混淆了，我想有一些冲突，但我不明白细节以及如何解决它，谁能帮助我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:48:53.000

当您使用线程和 I/O 时，这是很常见的情况 - 线程同时写入标准输出并且它们的消息变得混合。

您的多线程实现应该没有问题。

# sql - 秒范围内的 SQL 选择

> ID：11792899
> 
> 赞同：2
> 
> 时间：2012-08-03T09:22:32.110
> 
> 标签：sql, sql-server-2008-r2

我有下表

```
2012-05-24 19:00:00.000
2012-07-27 15:51:18.750
2012-07-30 09:40:25.333
2012-07-30 14:25:27.563
2012-07-27 15:51:18.750
2012-07-30 09:40:25.333
2012-07-30 14:25:27.563
2012-05-12 09:23:16.850
2012-05-12 18:00:00.000 
```

我正在尝试进行范围选择，例如

```
SELECT * FROM RUN WHERE RUN_DATETIME = '14:25:29.563' 
```

这是一个非常简单的选择，但我的问题是我正在搜索代码的日期与上表中的日期相差 30 秒，所以我需要能够执行与上面相同的操作，但窗口为 30 秒我不确定最好的方法是什么。

此选择不基于另一行，仅基于窗口内的 RUN_DATE 行。

我正在使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:28:33.743

```
SELECT * FROM RUN
WHERE RUN_DATETIME < DATEDADD(s, '14:25:29.563', 30) AND
      RUN_DATETIME > DATEDADD(s, '14:25:29.563', -30) 
```

看起来比 podiluska 的答案更复杂，但这可以通过预先计算范围来处理索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:25:09.557

```
SELECT * 
FROM RUN 
WHERE ABS(DATEDIFF(s, RUN_DATETIME , '14:25:29.563' ))< 30 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:28:36.457

```
SELECT
  *
FROM
  RUN
WHERE
      RUN_DATETIME >= DATEADD(second, -30, '14:25:29.563')
  AND RUN_DATETIME <  DATEADD(second,  30, '14:25:29.563') 
```

这比`ABS(DATEDIFF())`版本长。但是，它在应用于索引字段时要快得多。

那是因为优化器可以很容易地看到您想要一个连续块中的所有记录。它可以搜索开始，然后搜索结束，并返回其间的所有内容。

该`ABS(DATEDIFF())`变体要求独立检查每一行，并且不使用索引或范围搜索。这是对整个表的完整扫描。

**编辑：**

另请注意，我使用`>=`and `<`。这是时间范围的标准做法。

例如`val >= 0 AND val < 60`，并`val >= 60 AND val < 120`确保`val = 60`仅在一个时间范围内计算 at 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:52:38.887

我认为 RUN_DateTime 列包含日期，我们正在做的比较只是时间在这里'14：25：29.563'。我同意 podiluska 的回答。只是我们需要通过从 RUN_DateTime 列中取出日、月、年将 '14:25:29.563' 转换为日期。我们可以通过 Date_Part 函数来完成。

# vim - vim 项目插件，如何排除文件

> ID：11792901
> 
> 赞同：0
> 
> 时间：2012-08-03T09:22:35.657
> 
> 标签：vim

我刚刚开始在 Windows 7 上使用 gvim 中的 Project 插件（实际上我才刚刚开始使用 gvim）。

首先，当我使用 \C 创建项目时，它不会创建子目录（我可以手动添加它们），但我的主要问题是我希望在我的 django 项目中排除 *.pyc 文件。

我在互联网上搜索了不包括文件的 glob，但没有找到任何解决方案。

如果我无法排除文件，那么我需要使过滤器命令相当长。

```
project=d:\projects\myproject filter="*.py *.html *.bat *.dat *.txt *.json *.sqlite" 
```

至少可以说这似乎很麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:52:01.560

你可以试试我的叉子。我添加了排除支持。与过滤器相同，但它们不能一起工作。过滤或排除，而不是两者。添加 exclude="*.pyc" 它应该忽略它们。

[https://github.com/destroy/project.vim](https://github.com/destroy/project.vim)

# python - 谷歌驱动器 api 与桌面应用程序崩溃

> ID：11792902
> 
> 赞同：0
> 
> 时间：2012-08-03T09:22:37.377
> 
> 标签：python, google-drive-api, pyinstaller, google-api-python-client

我使用 google drive 应用程序使用 python 编写了一个桌面应用程序，一切正常。但是当我使用 pyinstaller 输出一个 .exe 文件并运行该应用程序时。这些行出现问题：

```
if credentials is None or credentials.invalid:
  credentials = run(FLOW, storage) 
```

身份验证页面显示，我允许其访问。与往常不同的是，在那之后没有任何反应，我发现.exe程序无故退出。以前有人遇到过这个问题吗？如果是这样，如何解决？

PS我现在跟踪错误，如下所示：

```
Traceback (most recent call last):
  File "<string>", line 697, in <module>
  File "<string>", line 562, in __init__
  File "build\bdist.win32\egg\oauth2client\tools.py", line 166, in run
  File "build\bdist.win32\egg\oauth2client\client.py", line 1069, in step2_exchange
  File "USB\build\pyi.win32\USB\outPYZ1.pyz/httplib2", line 1544, in request
  File "USB\build\pyi.win32\USB\outPYZ1.pyz/httplib2", line 1294, in _request
  File "USB\build\pyi.win32\USB\outPYZ1.pyz/httplib2", line 1230, in _conn_request
  File "USB\build\pyi.win32\USB\outPYZ1.pyz/httplib2", line 984, in connect
  File "USB\build\pyi.win32\USB\outPYZ1.pyz/httplib2", line 80, in _ssl_wrap_socket
  File "USB\build\pyi.win32\USB\outPYZ1.pyz/ssl", line 381, in wrap_socket
  File "USB\build\pyi.win32\USB\outPYZ1.pyz/ssl", line 141, in __init__
       ssl.SSLError: [Errno 185090050] _ssl.c:340: error:0B084002:x509 certificate rout
       ines:X509_load_cert_crl_file:system lib 
```

我看到有人遇到了类似的错误[http://code.google.com/p/google-api-python-client/issues/detail?id=58](http://code.google.com/p/google-api-python-client/issues/detail?id=58)但回复说它已经修复了。我也尝试了[https://github.com/kennethreitz/requests/issues/557](https://github.com/kennethreitz/requests/issues/557)中的方法，但它不起作用。有谁知道如何修理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:37:45.757

我猜，但这可能与 pyinstaller 在 Windows exe 上的 STDIN 处理有关 - 通常这对您不可用，因此您可能必须运行自己的自定义流程。

但您可以将其缩小为：

1.  从 STDIN/STDOUT 读/写
2.  启动本地 Web 服务器
3.  启动浏览器

因为所有这些都需要在本地运行流程时执行，其中一个对您来说是错误的。

如果您将 STDERR 记录到文本文件中，您将能够看到哪个部分正在崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:16:34.987

经过一番挖掘，我找到了基于 Dropbox api 开发人员提供的解决方案的解决方案：[https](https://forums.dropbox.com/topic.php?id=65523&replies=1#post-461457) ://forums.dropbox.com/topic.php?id=65523&replies=1#post-461457 。这个问题基本上是由以下原因引起的：

```
 CA_CERTS = os.path.join(os.path.dirname(os.path.abspath(__file__ )), "cacerts.txt")

__file__ is the key that causes this problem. It cannot work normally in the executable program to find the path. 
```

类似的问题可以在这里找到：[pyinstaller似乎没有找到数据文件](https://stackoverflow.com/questions/7838606/pyinstaller-seems-not-to-find-a-data-file)

为了解决这个问题，我把上面的代码改成这样：

```
 CA_CERTS = os.path.join(os.path.dirname(sys.executable), "cacerts.txt") 
```

通过这样做，.exe 程序将尝试在 .exe 文件所在的目录中查找 cacerts.txt。将其编译为 .pyc 后，我将 cacerts.txt 放入 .exe 目录。然后程序就可以正常运行了。

# c# - 从 jquery ajax 调用 webmethod 并使用静态对象进行问题

> ID：11792903
> 
> 赞同：4
> 
> 时间：2012-08-03T09:22:37.847
> 
> 标签：c#, jquery, asp.net, c#-4.0, c#-3.0

我有一个通过 jquery ajax 调用它的 webmethod .in web 方法我将转发器数据源绑定到 pagedatasourse 对象但是当我运行我的程序时，如果我在方法名称之前不使用静态关键字 webmethode jquery ajax 方法不能正常工作并且如果使用静态关键字我有这个错误

> 对象引用未设置为对象的实例....System.NullReferenceException：对象引用未设置为对象的实例。

和 pagedatasource 属于异常。我很困惑。什么是解决方案？非常感谢它是我的 jquery 功能

```
 $(function () {
            var x = 0;
            $('.c1').bind('click', function () {

                counter = counter + 1;
                $.ajax(
                {
         type: "POST",
            url: "WebForm1.aspx/bringdata",
      data: { counter: counter },
          contentType: "application/json; charset=utf-8",
           dataType: "json",
           async: true,
            cache: false,
              success: function (ret) {

                alert("success");
           },
           error: function (x, e) {
           alert("error ");
                 }
                   }
                );

            })
            $('.c2').bind('click', function () {

                x = x - 1;

            })

        }) 
```

及其背后的代码：

```
 [WebMethod]
  public  static void bringdata(int counter){
   SqlConnection con = new SqlConnection("data source=.;database=site;integrated   security=true;");
   int cnt;
   string sSQL = "Select username ,average,weight,point,password ,kal, Rank() over(order    by point desc) as 'ranking' from karbar order by point desc";  
   SqlCommand cmd = new SqlCommand(sSQL, con);  

   SqlDataAdapter adapt = new SqlDataAdapter(cmd);
   DataSet ds = new DataSet();
   adapt.Fill(ds);
   cnt=ds.Tables[0].Rows.Count;
   PagedDataSource pds = new PagedDataSource();
   pds.AllowPaging=true;
   pds.DataSource=ds.Tables[0].DefaultView;
   pds.PageSize=5;
   pds.CurrentPageIndex=counter;
   int vcnt=cnt/pds.PageSize;
   rptList.DataSource = pds;  
   rptList.DataBind(); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:40:19.043

## 为什么会出现异常？

我的猜测是，因为 APS.NET 在每次请求后都会处理 DataSet（此处未显示），而您正在尝试对上一个请求的结果进行分页。如果您将 DataSet 设为*静态*（这在 ASP.NET 中是一个很大的禁忌），那么它会保存在内存中，并在所有请求之间共享。

## 如何解决这个问题？

您正在使用不正确的数据访问模式。数据集真的很糟糕，实际上不应该与 ASP.NET 一起使用。

*   完全摆脱 DataSet。不要使用静态对象，当您的应用程序获得一些流量时，您会看到真正奇怪的错误。
*   使用更轻量级的东西，例如`List<Record>`并用`DataReader`.
*   使用*数据库*分页，而不是*内存*分页。永远不要让数据库服务器带上所有的数据，否则你的应用程序会崩溃（当你获得一些流量并且数据库变得更大时）。
*   考虑使用 ORM（如 NHibernate 或 EF），它会为您带来很多魔力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:29:03.693

第一个 Web 方法必须是静态的，因为我们直接调用它们而不创建任何对象。第二件事是我们不能直接在 web 方法中访问任何服务器端控件。

在这里您可以获取客户端的数据源并将其与客户端的转发器绑定。

```
success: function (ret) {

            // here get the datasource as "ret".
            // bind the repeater with the data source manually.
     } 
```

或者

然后将您的控件放在更新面板中，您不需要任何客户端数据，也不需要在 jQuery 中进行任何 ajax 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:54:53.110

该`rptList`成员为空，请在尝试使用之前创建一个新的 rptList

# weka - 我所有数据库查询的相同实例标头（ arff ）

> ID：11792905
> 
> 赞同：0
> 
> 时间：2012-08-03T09:22:45.797
> 
> 标签：weka

我正在使用[InstanceQuery](http://weka.sourceforge.net/doc/weka/experiment/InstanceQuery.html)和 SQL 查询来构建我的[Instances](http://weka.sourceforge.net/doc.dev/weka/core/Instances.html)。但是我的查询结果并不总是与 SQL 中的正常顺序相同。由于这个由不同 SQL 构造的实例具有不同的标头。一个简单的例子可以在下面看到。我怀疑我的结果会因为这种行为而改变。

标题 1

```
@attribute duration numeric
@attribute protocol_type {tcp,udp}
@attribute service {http,domain_u}
@attribute flag {SF} 
```

标题 2

```
@attribute duration numeric
@attribute protocol_type {tcp}
@attribute service {pm_dump,pop_2,pop_3}
@attribute flag {SF,S0,SH} 
```

我的问题是：如何为实例构造提供正确的标头信息。

类似下面的工作流程是可能的吗？

1.  从 arff 文件或其他地方获取预先准备好的头信息。
2.  给实例构造这个头信息
3.  调用 sql 函数并获取实例（标头 + 数据）

我正在使用以下 sql 函数从数据库中获取实例。

```
public static Instances getInstanceDataFromDatabase(String pSql
                                      ,String pInstanceRelationName){
    try {
        DatabaseUtils utils = new DatabaseUtils();

        InstanceQuery query = new InstanceQuery();

        query.setUsername(username);
        query.setPassword(password);
        query.setQuery(pSql);

        Instances data = query.retrieveInstances();
        data.setRelationName(pInstanceRelationName);

        if (data.classIndex() == -1)
        {
              data.setClassIndex(data.numAttributes() - 1);
        }
        return data;
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:34:31.640

我尝试了各种方法来解决我的问题。但似乎 weka 内部 API 目前不允许解决此问题。为了我的目的，我修改了 weka.core.Instances 附加命令行代码。[此答案](https://stackoverflow.com/questions/10923947/adding-an-instance-to-instances-in-weka/10930216#10930216)中也给出了此代码

据此，这是我的解决方案。我创建了一个 SampleWithKnownHeader.arff 文件，其中包含正确的标头值。我用以下代码阅读了这个文件。

```
public static Instances getSampleInstances() {
    Instances data = null;
    try {
        BufferedReader reader = new BufferedReader(new FileReader(
                "datas\\SampleWithKnownHeader.arff"));
        data = new Instances(reader);
        reader.close();
        // setting class attribute
        data.setClassIndex(data.numAttributes() - 1);
    }
    catch (Exception e) {
        throw new RuntimeException(e);
    } 
    return data;

} 
```

之后，我使用以下代码创建实例。我必须使用 StringBuilder 和实例的字符串值，然后将相应的字符串保存到文件中。

```
public static void main(String[] args) {

    Instances SampleInstance = MyUtilsForWeka.getSampleInstances();

    DataSource source1 = new DataSource(SampleInstance);

    Instances data2 = InstancesFromDatabase
            .getInstanceDataFromDatabase(DatabaseQueries.WEKALIST_QUESTION1);

    MyUtilsForWeka.saveInstancesToFile(data2, "fromDatabase.arff");

    DataSource source2 = new DataSource(data2);

    Instances structure1;
    Instances structure2;
    StringBuilder sb = new StringBuilder();
    try {
        structure1 = source1.getStructure();
        sb.append(structure1);
        structure2 = source2.getStructure();
        while (source2.hasMoreElements(structure2)) {
            String elementAsString = source2.nextElement(structure2)
                    .toString();
            sb.append(elementAsString);
            sb.append("\n");

        }

    } catch (Exception ex) {
        throw new RuntimeException(ex);
    }

    MyUtilsForWeka.saveInstancesToFile(sb.toString(), "combined.arff");

} 
```

我将实例保存到文件代码如下。

```
public static void saveInstancesToFile(String contents,String filename) {

     FileWriter fstream;
    try {
        fstream = new FileWriter(filename);
      BufferedWriter out = new BufferedWriter(fstream);
      out.write(contents);
      out.close();
    } catch (Exception ex) {
        throw new RuntimeException(ex);
    } 
```

这解决了我的问题，但我想知道是否存在更优雅的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T22:20:28.887

我用过滤器解决了一个类似的问题，`Add`它允许将属性添加到`Instances`. 您需要为`Attibute`两个数据集添加正确的正确值列表（在我的情况下 - 仅用于测试数据集）：

加载训练和测试数据：

```
/* "train" contains labels and data */
/* "test" contains data only */
CSVLoader csvLoader = new CSVLoader();
csvLoader.setFile(new File(trainFile));
Instances training = csvLoader.getDataSet();
csvLoader.reset();
csvLoader.setFile(new File(predictFile));
Instances test = csvLoader.getDataSet(); 
```

`Add`使用过滤器设置新属性：

```
Add add = new Add();
/* the name of the attribute must be the same as in "train"*/
add.setAttributeName(training.attribute(0).name());
/* getValues returns a String with comma-separated values of the attribute */
add.setNominalLabels(getValues(training.attribute(0)));
/* put the new attribute to the 1st position, the same as in "train"*/
add.setAttributeIndex("1");
add.setInputFormat(test);
/* result - a compatible with "train" dataset */
test = Filter.useFilter(test, add); 
```

结果“train”和“test”的header是一样的（兼容Weka机器学习）

# ios - 我的应用程序未能及时启动

> ID：11792906
> 
> 赞同：0
> 
> 时间：2012-08-03T09:22:47.397
> 
> 标签：ios

我的应用程序崩溃了。我不知道坠机的原因是什么，因为它在一个月内只坠毁了两次。同样在设备日志中，我发现以下消息：

> 8 月 3 日 11:26:28 未知 SpringBoard[15]：com.xyz.abe 未能及时启动
> 
> 8 月 3 日 11:26:28 未知的 SpringBoard[15]：强制 abc[392] 的崩溃报告...
> 
> 8 月 3 日 11:26:28 未知 SpringBoard[15]：完成崩溃报告。
> 
> 8 月 3 日 11:26:28 未知 com.apple.launchd[1] : (UIKitApplication:com.xyz.abe[0x8558]) 退出：杀死：9
> 
> 8 月 3 日 11:26:28 未知 SpringBoard[15]：应用程序“abc”异常退出，信号 9：已终止：8 月 3 日 11:26:28 未知 ReportCrash[393]：将崩溃报告保存到 /var/mobile/Library/Logs /CrashReporter/abc_2012-08-03-112628_DeviceName.plist 使用 uid：0 gid：0，synthetic_euid：501 egid：0

在网上搜索时，我发现这是因为在“applicationDidFinishLaunchingWithOptions：”中进行了大量处理，请检查我的代码并让我知道代码有什么问题。

谢谢！

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
CGRect frame = [[UIScreen mainScreen] bounds];
self.window = [[UIWindow alloc] initWithFrame:frame];
britenessView = [[UIView alloc] initWithFrame:frame];
britenessView.userInteractionEnabled = NO;
britenessView.backgroundColor = [UIColor blackColor];
britenessView.alpha = 0.0;
StoreIPad *viewController = [[StoreIPad alloc] init];
nav = [[UINavigationController alloc] initWithRootViewController:viewController];    
[self.window addSubview:nav.view];
[self.window addSubview:britenessView];
[self.window makeKeyAndVisible];
return YES;}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self)
{
    //iniatializing inAppPurchase
    InAppPurchase *inAppManager = [InAppPurchase sharedManager];
    inAppManager.inappDelegate = self;        
    subscriber = FALSE;        
}
return self;}
+ (InAppPurchase *)sharedManager{    // InAppPurchase sharedManager
@synchronized(self)
{
    if (!_sharedInstance)
    {
        _sharedInstance =  [[self alloc] init];
    }
}
return _sharedInstance;}-(id)init{ // InAppPurchase init

self = [super init];
if (self)
{
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    isRestoring = NO;
    arrTransactions = [[NSMutableArray alloc] init];
}
return self;} 
```

# ios - iOS核心位置查找行进距离

> ID：11792912
> 
> 赞同：1
> 
> 时间：2012-08-03T09:23:19.157
> 
> 标签：ios, gps, core-location

我想计算使用核心位置的人所覆盖的总距离。用户按下开始按钮，它将在 iphone 屏幕上显示计算出的距离。它还会在一段时间后提供一些更新的数据。即使这个人没有做任何动作，它仍然显示了一些距离。谁能帮我。

# jquery - 如何使用 jquery 或 phonegap 创建网格视图？

> ID：11792914
> 
> 赞同：2
> 
> 时间：2012-08-03T09:23:20.720
> 
> 标签：jquery, cordova

**我想使用 jquery 或 phonegap 在网格视图中显示一些字母列表，当我单击每个字母时，它必须根据字母系列从数据库中检索数据。我该怎么做？

这是我的数据库/**

```
 function populateDB(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS ALLWORDS (id INTEGER PRIMARY KEY AUTOINCREMENT, Word TEXT NOT NULL, Type_Of_Word TEXT NOT NULL,Meaning TEXT,Synonym TEXT,Example TEXT,Starred BOOL)');

    } 
```

![在此处输入图像描述](../Images/0413c58dc45bfafa44c7eec461a7434f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:37:57.307

看看这个 jquery 插件：[http](http://www.trirand.com/blog/) ://www.trirand.com/blog/它将基于 json 数据创建一个漂亮的网格视图。很多不错的功能。

# codeigniter - 使用巨大（6000+ 宽）图像调整 GD 图像大小（带 CI）

> ID：11792915
> 
> 赞同：1
> 
> 时间：2012-08-03T09:23:35.823
> 
> 标签：codeigniter, gd, php, ram

我有一个使用 Codeigniter 图像处理类和 GD 调整上传图像大小的应用程序。

但是，客户端需要能够调整超大图像的大小，6000 像素或更高。发生这种情况时我有记忆问题。

我的问题分为两部分——有没有办法通过图像的尺寸来计算需要多少内存？

是否有用于调整这些图像大小的内存密集型选项较少，每个操作似乎超过 250MB。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:23:34.403

GD 总是在未压缩的图像上工作；这是使用内存的地方。[您可以按此问题](https://stackoverflow.com/questions/527532/reasonable-php-memory-limit-for-image-resize)所示估算内存消耗。有关更多信息，另请参阅[此处](https://stackoverflow.com/questions/12661/efficient-jpeg-image-resizing-in-php)或[此处](https://stackoverflow.com/questions/3684396/should-gd-need-so-much-memory-when-resizing)。

# javascript - Google Maps API v3 中的 OVER_QUERY_LIMIT：如何在 Javascript 中暂停/延迟以减慢速度？

> ID：11792916
> 
> 赞同：41
> 
> 时间：2012-08-03T09:23:36.930
> 
> 标签：javascript, google-maps-api-3

我遇到了一个在这些论坛中讨论得很好的问题，但似乎没有一个建议对我有用，所以我正在寻找一些在保存为 html 文件时可以工作的完整 javascript。

问题是我在尝试使用 Javascript 调用的 V3 API 对 Google 地图上 > 11 个位置进行地理编码时不断遇到 OVER_QUERY_LIMIT 错误。我知道调用地理编码器的速率是有限制的（以及总交易量的每日限制），所以我需要在数组中的每个结果之间引入一个暂停。

非常感谢任何帮助。

这是我的代码：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
var geocoder;
var map;
var wait = false;

  function initialize() {
geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(51.32, 0.5);

var myOptions = {
  zoom: 8,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
codeAddress('KT16 8LA' + ', UK');
codeAddress('LS8 2LQ' + ', UK');
codeAddress('NE13 8AF' + ', UK');
codeAddress('KT12 2BE' + ', UK');
codeAddress('W1W 8AN' + ', UK');
codeAddress('EC3N 2LS' + ', UK');
codeAddress('BS9 3BH' + ', UK');
codeAddress('KA10 6LZ' + ', UK');
codeAddress('EC1V 9BW' + ', UK');
codeAddress('WD18 8YN' + ', UK');
codeAddress('HA3 6DQ' + ', UK');
codeAddress('W1U 3PL' + ', UK');
codeAddress('W1T 7QL' + ', UK');
codeAddress('W1S 1TD' + ', UK');
codeAddress('SW1X 8NX' + ', UK');
codeAddress('LE2 8ET' + ', UK');
codeAddress('BA3 4BH' + ', UK');
codeAddress('AL3 8JP' + ', UK');
codeAddress('DE55 4QJ' + ', UK');
codeAddress('W6 0QT' + ', UK');
codeAddress('LA1 1PP' + ', UK');
codeAddress('SW16 4DH' + ', UK');
codeAddress('WC2N 6DF' + ', UK');
codeAddress('RM6 6LS' + ', UK');
codeAddress('S25 3QZ' + ', UK');
codeAddress('WC2H 7LR' + ', UK');
codeAddress('BH24 1DW' + ', UK');
codeAddress('EC2N 6AR' + ', UK');
codeAddress('W1U 2FA' + ', UK');
codeAddress('B60 3DX' + ', UK');    
}

  function codeAddress(vPostCode) {
if (geocoder) {
  geocoder.geocode( { 'address': "'" + vPostCode + "'"}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      map.setCenter(results[0].geometry.location);
      var marker = new google.maps.Marker({
          map: map, 
          position: results[0].geometry.location
      });
    } else {
      alert("Geocode was not successful for the following reason: " + status);
    }
  });
}
}

</script>
<body style="margin:0px; padding:0px;" onload="initialize()">
<div id="map_canvas" style="width:100%; height:90%"></div>
</body> 
```

编辑：这是我试图让它在相关部分暂停/等待，但它没有做任何事情：

```
function codeAddress(vPostCode) {
    if (geocoder) {
    while (wait) { /* Just wait. */ };
      geocoder.geocode( { 'address': "'" + vPostCode + "'"}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
          map.setCenter(results[0].geometry.location);
          var marker = new google.maps.Marker({
              map: map, 
              position: results[0].geometry.location
          });
        /* When geocoding "fails", see if it was because of over quota error: */
        } else if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) { 
        wait = true;
        setTimeout("wait = true", 2000);
        //alert("OQL: " + status);
        } else {
          alert("Geocode was not successful for the following reason: " + status);
        }
      });
    }
  } 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-06T09:01:09.350

Mike Williams 的教程中没有出现类似这两行的内容：

```
 wait = true;
    setTimeout("wait = true", 2000); 
```

这是一个版本 3 的端口：

[http://acleach.me.uk/gmaps/v3/plotaddresses.htm](http://acleach.me.uk/gmaps/v3/plotaddresses.htm)

相关的代码是

```
 // ====== Geocoding ======
  function getAddress(search, next) {
    geo.geocode({address:search}, function (results,status)
      { 
        // If that was successful
        if (status == google.maps.GeocoderStatus.OK) {
          // Lets assume that the first marker is the one we want
          var p = results[0].geometry.location;
          var lat=p.lat();
          var lng=p.lng();
          // Output the data
            var msg = 'address="' + search + '" lat=' +lat+ ' lng=' +lng+ '(delay='+delay+'ms)<br>';
            document.getElementById("messages").innerHTML += msg;
          // Create a marker
          createMarker(search,lat,lng);
        }
        // ====== Decode the error status ======
        else {
          // === if we were sending the requests to fast, try this one again and increase the delay
          if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
            nextAddress--;
            delay++;
          } else {
            var reason="Code "+status;
            var msg = 'address="' + search + '" error=' +reason+ '(delay='+delay+'ms)<br>';
            document.getElementById("messages").innerHTML += msg;
          }   
        }
        next();
      }
    );
  } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-03T09:55:04.970

这个问题的一般答案是：

> 不要在每次加载页面时对已知位置进行地理编码。对它们进行离线地理编码并使用生成的坐标在您的页面上显示标记。

限制的存在是有原因的。

如果您无法离线对位置进行地理编码，请参阅Mike Williams 的 v2 教程中的[此页面（第 17 部分地理编码多个地址）](http://econym.org.uk/gmap/geomulti.htm)，该教程描述了一种方法，将其移植到 v3 API。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-06T11:16:48.503

在这里，我加载了 2200 个标记。添加 2200 个位置大约需要 1 分钟。 [https://jsfiddle.net/suchg/qm1pqunz/11/](https://jsfiddle.net/suchg/qm1pqunz/11/)

```
//function to get random element from an array
    (function($) {
        $.rand = function(arg) {
            if ($.isArray(arg)) {
                return arg[$.rand(arg.length)];
            } else if (typeof arg === "number") {
                return Math.floor(Math.random() * arg);
            } else {
                return 4;  // chosen by fair dice roll
            }
        };
    })(jQuery);

//start code on document ready
$(document).ready(function () {
    var map;
    var elevator;
    var myOptions = {
        zoom: 0,
        center: new google.maps.LatLng(35.392738, -100.019531), 
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map($('#map_canvas')[0], myOptions);

    //get place from inputfile.js
    var placesObject = place;
    errorArray = [];

  //will fire 20 ajax request at a time and other will keep in queue
    var queuCounter = 0, setLimit = 20; 

  //keep count of added markers and update at top
  totalAddedMarkers = 0;

  //make an array of geocode keys to avoid the overlimit error
    var geoCodKeys = [
                    'AIzaSyCF82XXUtT0vzMTcEPpTXvKQPr1keMNr_4',
                    'AIzaSyAYPw6oFHktAMhQqp34PptnkDEdmXwC3s0',
                    'AIzaSyAwd0OLvubYtKkEWwMe4Fe0DQpauX0pzlk',
                    'AIzaSyDF3F09RkYcibDuTFaINrWFBOG7ilCsVL0',
                    'AIzaSyC1dyD2kzPmZPmM4-oGYnIH_0x--0hVSY8'                   
                ];

  //funciton to add marker
    var addMarkers = function(address, queKey){
        var key = jQuery.rand(geoCodKeys);
        var url = 'https://maps.googleapis.com/maps/api/geocode/json?key='+key+'&address='+address+'&sensor=false';

        var qyName = '';
        if( queKey ) {
            qyName = queKey;
        } else {
            qyName = 'MyQueue'+queuCounter;
        }

        $.ajaxq (qyName, {
            url: url,
            dataType: 'json'
        }).done(function( data ) {
                    var address = getParameterByName('address', this.url);
                    var index = errorArray.indexOf(address);
                    try{
                        var p = data.results[0].geometry.location;
                        var latlng = new google.maps.LatLng(p.lat, p.lng);
                        new google.maps.Marker({
                            position: latlng,
                            map: map
                        });
                        totalAddedMarkers ++;

            //update adde marker count
                        $("#totalAddedMarker").text(totalAddedMarkers);
                        if (index > -1) {
                            errorArray.splice(index, 1);
                        }
                    }catch(e){
                        if(data.status = 'ZERO_RESULTS')
                            return false;

            //on error call add marker function for same address
            //and keep in Error ajax queue
                        addMarkers( address, 'Errror' );
                        if (index == -1) {
                            errorArray.push( address );
                        }
                    }
        });

    //mentain ajax queue set
        queuCounter++;
        if( queuCounter == setLimit ){
            queuCounter = 0;
        }
    }

  //function get url parameter from url string
    getParameterByName = function ( name,href )
    {
      name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
      var regexS = "[\\?&]"+name+"=([^&#]*)";
      var regex = new RegExp( regexS );
      var results = regex.exec( href );
      if( results == null )
        return "";
      else
        return decodeURIComponent(results[1].replace(/\+/g, " "));
    }

  //call add marker function for each address mention in inputfile.js
    for (var x = 0; x < placesObject.length; x++) {
        var address = placesObject[x]['City'] + ', ' + placesObject[x]['State'];
        addMarkers(address);
    }
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-25T10:20:45.440

使用“setInterval”和“clearInterval”解决了这个问题：

```
function drawMarkers(map, markers) {
    var _this = this,
        geocoder = new google.maps.Geocoder(),
        geocode_filetrs;

    _this.key = 0;

    _this.interval = setInterval(function() {
        _this.markerData = markers[_this.key];

        geocoder.geocode({ address: _this.markerData.address }, yourCallback(_this.markerData));

        _this.key++;

        if ( ! markers[_this.key]) {
            clearInterval(_this.interval);
        }

    }, 300);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-03T13:32:52.773

这篇文章是不久前发布的，但它提供的答案并没有解决我在迭代中达到请求限制的问题，所以我发布了这篇文章，以帮助其他没有服务的人。

我的环境发生在 Ionic 3 中。

我没有在迭代中进行“暂停”，而是产生了使用 a 进行迭代的想法`timer`，这个计时器具有执行将在迭代中进行的代码的特殊性，但会每隔一段时间运行一次，直到达到最大值我们要迭代的“数组”的计数。

换句话说，我们会在一定时间内查询 Google API，使其不超过允许的毫秒数限制。

```
// Code to start the timer
    this.count= 0;
    let loading = this.loadingCtrl.create({
      content: 'Buscando los mejores servicios...'
    });
    loading.present();
    this.interval = setInterval(() => this.getDistancias(loading), 40); 
```

```
// Function that runs the timer, that is, query Google API
  getDistancias(loading){
    if(this.count>= this.datos.length){
      clearInterval(this.interval);
    } else {
      var sucursal = this.datos[this.count];
      this.calcularDistancia(this.posicion, new LatLng(parseFloat(sucursal.position.latitude),parseFloat(sucursal.position.longitude)),sucursal.codigo).then(distancia => {
    }).catch(error => {
      console.log('error');
      console.log(error);
    });
    }
    this.count += 1;
  }
  calcularDistancia(miPosicion, markerPosicion, codigo){
    return new Promise(async (resolve,reject) => {
      var service = new google.maps.DistanceMatrixService;
      var distance;
      var duration;
      service.getDistanceMatrix({
        origins: [miPosicion, 'salida'],
        destinations: [markerPosicion, 'llegada'],
        travelMode: 'DRIVING',
        unitSystem: google.maps.UnitSystem.METRIC,
        avoidHighways: false,
        avoidTolls: false
      }, function(response, status){
        if (status == 'OK') {
          var originList = response.originAddresses;
          var destinationList = response.destinationAddresses;
          try{
            if(response != null && response != undefined){
              distance = response.rows[0].elements[0].distance.value;
              duration = response.rows[0].elements[0].duration.text;
              resolve(distance);
            }
          }catch(error){
            console.log("ERROR GOOGLE");
            console.log(status);
          }
        }
      });
    });
  } 
```

我希望这有帮助！

对不起我的英语，我希望这不是一个不便，我不得不使用谷歌翻译。

问候，莱安德罗。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-20T08:57:41.240

你使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout)错误的方式。（之一）函数签名是`setTimeout(callback, delay)`. 所以你可以很容易地指定在什么延迟之后应该运行什么代码。

```
var codeAddress = (function() {
    var index = 0;
    var delay = 100;

    function GeocodeCallback(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            new google.maps.Marker({ map: map, position: results[0].geometry.location, animation: google.maps.Animation.DROP });
            console.log(results);
        }
        else alert("Geocode was not successful for the following reason: " + status);
    };

    return function(vPostCode) {
        if (geocoder) setTimeout(geocoder.geocode.bind(geocoder, { 'address': "'" + vPostCode + "'"}, GeocodeCallback), index*delay);
        index++;
    };
})(); 
```

这样，每次`codeAddress()`调用都会在`geocoder.geocode()`上一次调用后 100 毫秒后被调用。

我还为标记添加了动画，因此您将获得一个很好的动画效果，标记被添加到一个又一个地图中。我不确定当前的 google 限制是多少，因此您可能需要增加`delay`变量的值。

此外，如果您每次对相同的地址进行地理编码，您应该将地理编码的结果保存到您的数据库中，下次只需使用这些（这样您将节省一些流量并且您的应用程序会更快一点）

# java - 如何从 jlabel 或 jbutton 中的 imageicon 获取图像？

> ID：11792921
> 
> 赞同：1
> 
> 时间：2012-08-03T09:24:08.007
> 
> 标签：java, swing, icons, jlabel, imageicon

我正在尝试使用 draw 方法，我需要从 jlabel 或 jbutton 获取 Image 但不知道如何准确地做到这一点，有人知道吗？例如像这样的东西

```
g.drawImage(tiles[(bounds[0]+j)%Map.width][i].getIcon().getImage(), 0, 0, null); 
```

但这显然不适用于 tiles[(bounds[0]+j)%Map.width][i] 作为 jlabel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:32:27.953

我假设您已经有一个 working `ImageIcon`，您只需要将它包含在您的`JLabel`（如问题标题中所述）中。

如[`JLabel`](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)教程中所述，您可以使用图像和文本、仅文本或仅图像创建标签。对于后者，使用[`new JLabel( icon )`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#JLabel%28javax.swing.Icon%29)构造函数

# ruby-on-rails - ubuntu 12.04 上的乘客安装 apache2 模块失败

> ID：11792922
> 
> 赞同：13
> 
> 时间：2012-08-03T09:24:10.980
> 
> 标签：ruby-on-rails, ubuntu

我已经`gem install passenger`为我的 rails 应用程序安装了。现在我试试`passenger-install-apache2-module`。

我得到错误屏幕：

> 所需软件的安装说明
> 
> *   要安装 Apache 2 开发头文件：请以 root 身份运行 apt-get install apache2-prefork-dev。
> *   要安装 Apache Portable Runtime (APR) 开发头文件：请以 root 身份运行 apt-get install libapr1-dev。
> *   要安装 Apache Portable Runtime Utility (APU) 开发头文件：请以 root 身份运行 apt-get install libaprutil1-dev。

当我跑步时`sudo apt-get install apache2-prefork-dev`，我得到

> 以下软件包具有未满足的依赖关系： apa​​che2-prefork-dev ：依赖： apa​​che2.2-common (= 2.2.22-1ubuntu1) 但要安装 2.2.22-1ubuntu1.1。
> E: 无法纠正问题，您持有破损的包裹。

当我运行时`sudo apt-get update`，它不能解决任何问题。错误仍然存​​在。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-08-11T09:46:50.780

试试这个：

```
sudo apt-get install apache2-dev 
```

我这样做了，passenger-install-apache2-module 能够通过上述错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T11:01:53.650

对我来说，解决方法是**重新启用`precise-updates`存储库**——我在更新管理器中禁用了它——然后更新系统。

（我本来希望只安装重要的安全更新，这就是我一开始就禁用它的原因。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T15:02:17.850

尝试

```
sudo apt-get -f install
sudo apt-get clean all
sudo apt-get autoremove
sudo apt-get update
sudo apt-get upgrade 
```

然后重试安装 apache，以及所有开发包。您可能必须先卸载 apache。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-29T13:05:14.260

Precise repo 中还有一个针对乘客的预制包：

```
apt-get install libapache2-mod-passenger 
```

# objective-c - 将 JSON 文件解析为 POST 请求 Objective C

> ID：11792927
> 
> 赞同：1
> 
> 时间：2012-08-03T09:24:40.997
> 
> 标签：objective-c, json, post

我将一个 JSON 文件解析为一个字典，然后我想为 couchDB 构建一个发布请求。

解析工作正常，但如果我发布我得到一个错误。我认为这与我在帖子字符串中的转义序列有关。

这是代码：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"json"];

NSString *fileContent = [[NSString alloc] initWithContentsOfFile:filePath]; 

SBJsonParser *parser = [[SBJsonParser alloc] init];

NSDictionary *data = (NSDictionary *) [parser objectWithString:fileContent error:nil]; 

// getting the data from file
NSString *_id = (NSString *) [data objectForKey:@"_id"];
NSString *rev_ =  self.rev;
NSString *_herausgeber = (NSString *) [data objectForKey:@"Herausgeber"];
NSString *_nummer = (NSString *) [data objectForKey:@"Nummer"];
NSNumber *_deckung = [data objectForKey:@"Deckung"];
NSString *_waerhung = (NSString *) [data valueForKey:@"Waehrung"];

NSDictionary *_inhaber = (NSDictionary *) [data objectForKey:@"Inhaber"]; 
NSString *_name = (NSString *) [_inhaber objectForKey:@"Name"];
NSString *_vorname = (NSString *) [_inhaber objectForKey:@"Vorname"];
NSNumber *_maennlich = (NSNumber *) [_inhaber objectForKey:@"maennlich"];

NSArray *_hobbys = (NSArray *) [_inhaber objectForKey:@"Hobbys"];
    NSString *_hobby0 = [_hobbys objectAtIndex:0];
    NSString *_hobby1 = [_hobbys objectAtIndex:1];
    NSString *_hobby2 = [_hobbys objectAtIndex:2];
NSNumber *_alter = (NSNumber *) [_inhaber objectForKey:@"Alter"];

NSArray * _kinder = (NSArray *) [_inhaber objectForKey:@"Kinder"];
    NSString *_kind0 = [_kinder objectAtIndex:0];
    NSString *_kind1 = [_kinder objectAtIndex:1];
    NSString *_kind2 = [_kinder objectAtIndex:2];
NSString *_partner = (NSString *) [_inhaber objectForKey:@"Partner"];

   [parser release];

//post string:

NSString *post = [NSString stringWithFormat:@"{\"_id\":\"%@\",\"_rev\":\"%@\",\"Herausgeber\":\"%@\",\"Nummer\":\"%@\",\"Deckung\":%@,\"Waehrung\":\"%@\",\"Inhaber\":{\"Name\":\"%@\",\"Vorname\":\"%@\",\"maennlich\":%@,\"Hobbys\":[\"%@\",\"%@\",\"%@\"],\"Alter\":%@,\"Kinder\":[\"%@\",\"%@\",\"%@\"],\"Partner\":%@}}",_id,rev_,_herausgeber,_nummer,_deckung,_waerhung,_name,_vorname,_maennlich,_hobby0,_hobby1,_hobby2,_alter,_kind0,_kind1,_kind2,_partner];

//post header:

NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:cdbURL]];
[request setHTTPMethod:@"PUT"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData]; 
```

我得到的错误：

> 回复：{"error":"bad_request","re​​ason":"无效的 UTF-8 JSON:<<\"{\\"_id\\":\\"161eba7093799b610502bdfba5004281\\",\\"_rev\\" :\\"199-bb065cbd0a365b188fc492cc22453d74\\",\\"Herausgeber\\":\\"SAP\\",\\"数字\\":\\"1234-5678-9012-3456\\",\ \"Deckung\\":2000000,\\"Waehrung\\":\\"法郎\\",\\"Inhaber\\":{\\"姓名\\":\\"Mustermann\\", \\"Vorname\\":\\"Max\\",\\"maennlich\\":1,\\"爱好\\":[\\"Reiten\\",\\"Golfen\\" ,\\"Lesen\\"],\\"Alter\\":42,\\"Kinder\\":[\\"Max\\",\\"Moritz\\",\\"丽莎\ \"],\\"合作伙伴\\":}}\">>"}

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:43:14.990

就个人而言，我会避免自己构建 JSON 后置字符串，而是使用 SBJson 的 [NSObject JSONRepresentation] 函数。

然后你可以填写一个 NSDictionary 并让 API 为你构造 JSON。

```
NSString *_id = @"161";
NSString *_rev = @"199";
NSString *_herausgeber = @"SAP";

NSMutableDictionary *toPost = [NSMutableDictionary dictionary];
[toPost setObject:_id forKey:@"_id"];
[toPost setObject:_rev forKey:@"_rev"];
[toPost setObject:_herausgeber forKey:@"Herausgeber"];

NSLog(@"JSON: %@", [toPost JSONRepresentation]); 
```

给出：

```
JSON: {"_id":"161","_rev":"199","Herausgeber":"SAP"} 
```

# c++ - Microsoft STL 和 Stlport STL 之间的冲突

> ID：11792930
> 
> 赞同：0
> 
> 时间：2012-08-03T09:25:05.160
> 
> 标签：c++, visual-c++, dll, stl, stlport

我在我的windows电脑上安装了Stlport，为了在VC10中用Stlport替换Microsoft STL，我将Stlport的头文件添加到Include Directories（Property Pages->VC++ Directories->Include Directories），放入`stl_port.lib`链接（ Linker->Input->Additional Dependencies )，并`stlport.dll`在搜索目录中。此外，我还定义了以下宏：`STLP_DONT_USE_AUTO_LINK;_STLP_LEAKS_PEDANTIC;_STLP_USE_DYNAMIC_LIB`(C/C++->Preprocessor Definitions)。

当我调用 STL 函数时，它似乎工作得很好。但是，当我调用依赖于 STL 的第三方库（带有 lib 和 dll）时，会出现 STL 冲突问题。我猜的原因是因为第三方库使用 Microsoft STL。一个典型的错误如下：

```
Error   2   error LNK2019: unresolved external symbol "void __cdecl cv::namedWindow(class stlp_std::basic_string<char,class stlp_std::char_traits<char>,class stlp_std::allocator<char> > const &,int)" (?namedWindow@cv@@YAXABV?$basic_string@DV?$char_traits@D@stlp_std@@V?$allocator@D@2@@stlp_std@@H@Z) referenced in function _main    C:\Research\OpencvTest\OpencvTest.obj 
```

我也尝试从源代码构建第三方库，但我遇到了类似的链接错误：

```
grfmt_jpeg2000.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class stlp_std::allocator<char> __thiscall stlp_std::basic_string<char,class stlp_std::char_traits<char>,class stlp_std::allocator<char> >::get_allocator(void)const " (__imp_?get_allocator@?$basic_string@DV?$char_traits@D@stlp_std@@V?$allocator@D@2@@stlp_std@@QBE?AV?$allocator@D@2@XZ) referenced in function "class stlp_std::basic_string<char,class stlp_std::char_traits<char>,class stlp_std::allocator<char> > __cdecl stlp_std::operator+<char,class stlp_std::char_traits<char>,class stlp_std::allocator<char> >(char,class stlp_std::basic_string<char,class stlp_std::char_traits<char>,class stlp_std::allocator<char> > const &)" (??$?HDV?$char_traits@D@stlp_std@@V?$allocator@D@1@@stlp_std@@YA?AV?$basic_string@DV?$char_traits@D@stlp_std@@V?$allocator@D@2@@0@DABV10@@Z) 
```

我想知道我能做些什么来解决链接错误问题。谢谢！

# php - PHP比较非AD日期

> ID：11792931
> 
> 赞同：2
> 
> 时间：2012-08-03T09:25:07.547
> 
> 标签：php, date

我需要在 PHP 中比较 Bikram Sambat 日期。假设今天在 AD 是 2012-08-03，今天的 BS 日期是 2069-04-19。在 BS 中，我们一个月的总天数从 29 到 32 不等。同样，每年的天数并不一致。例如，如果今年当月有 31 天，明年同月可能有 30 甚至 32 天。

我能想到的方法是，使用 php 日期转换器类（我已经拥有），将给定的 BS 日期转换为等效的 AD 日期并进行比较。只是我想知道是否有其他更好的方法可以在不使用我拥有的课程的情况下做到这一点？

通过在这里进行比较，我的意思是 a) 查找给定日期范围之间的天数。b）检查日期是否在给定的两个日期范围内 c）我们可以使用 php Date Function 对 AD 日期进行其他比较

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:31:38.563

一般来说，我建议将两个日期都转换为 unix 时间戳（自公元 1970 年 1 月 1 日以来的秒数），这是一个用于比较的简单整数值。

显然，BS 背后没有简单的逻辑，因此您将无法找到直接将您从这里带到那里的分析表达式。如果您不想使用外部类，您可以编写某种（递归）函数，从公元 1970 年 1 月 1 日开始，您手动将其转换为 BS，并按照 BS 的规则从那里计算时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:08:27.767

[查看KashmirStamps.ca/Samvat.html](http://www.kashmirstamps.ca/Samvat.html)的源代码

它将 BS 日期转换为 AD 日期。你会发现 Javascript 代码和逻辑。您可以轻松地将逻辑调整为 PHP 代码。

# olap - 我们可以将字符串值显示为 mondrian olap 上的度量吗

> ID：11792933
> 
> 赞同：1
> 
> 时间：2012-08-03T09:25:14.797
> 
> 标签：olap, pentaho, mondrian

我想将字符串值显示为度量值之一。当事实表分别具有整数值和字符串值并且还具有一些外部表的键时。然后我可以将整数值显示为度量值，但我不能将字符串值显示为度量值。因为多维数据集架构中的[Measure 元素](http://mondrian.pentaho.com/documentation/xml_schema.php#Measure)（用 XML 编写）不允许度量值没有“聚合器”（它指定了度量值的聚合函数）。当然我知道我们不能聚合一些字符串值。但我想显示层次结构中最新级别的字符串值。

我阅读了以下文章。[一个图](http://type-exit.org/adventures-with-open-source-bi/wp-content/uploads/2010/07/display_props.png)（在本页中间附近）显示了一个包含字符串值作为度量值的多维数据集。但这是一个维度表的属性值的例子，所以这个字符串值不包含在事实表中。我想显示包含在事实表中的字符串值。

[蒙德里安立方体的简单日期维度](http://type-exit.org/adventures-with-open-source-bi/2010/07/a-simple-date-dimension-for-mondrian-cubes/)

有人知道可以将字符串值显示为度量值吗？或者我必须编辑蒙德里安的源代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T12:04:43.380

我遇到了同样的问题，并通过将`aggregator`度量标签中的属性设置为`max`. 例如

```
\<Measure name="Comment" datatype="String" column="comment" caption="Comment" aggregator="max"/\> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:51:50.507

为什么它需要成为一个衡量标准？

如果没有自然地对其应用聚合并且您只需要字符串值，那么它是一个维度，而不是一个度量。试图强迫它成为一种衡量标准并不是最好的方法。

我认为您引用的数字只是显示钻取，唯一的*实际* 衡量标准是营业额。报告布局在维度和度量方面略有误导。

如果由于某种原因您不想将其拆分为单独的物理表，则可以在架构中再次将事实表用作维度表。

听起来字符串可能是整数的高基数，可能是 1:1。根据多维数据集的大小，这可能是也可能不是性能挑战。但不要试图将其作为衡量标准。

祝你好运！

# wpf - 在 windows phone 中的用户控件的列表框中绑定数据

> ID：11792935
> 
> 赞同：0
> 
> 时间：2012-08-03T09:25:24.100
> 
> 标签：wpf, silverlight, windows-phone-7, windows-phone-7.1

```
public class Emp
    {
        public string Id { get; set; }

    }

I declared the class like this, but property i didnt set. I set the dependency property for textblock

 public static readonly DependencyProperty LabelProperty
  = DependencyProperty.Register("TextBlock", typeof(string), typeof(WindowsPhoneControl1), new PropertyMetadata(new PropertyChangedCallback(LabelChanged)));

 public string List
    {
        get { return (string)GetValue(LabelProperty); }
        set { SetValue(LabelProperty, value); }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:01:32.470

这可能不是答案，但您的代码存在根本性错误。

您将 ListBox 的`ItemSource`属性绑定到一个属性`Emp`。然后在 Click 处理程序中，将类型对象添加到ListBox`Emp`的属性中。`Items`这行不通。

为了使它与绑定一起工作，必须有`EmpList`某种可枚举类型的属性，最好是[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604)。绑定还需要知道定义此属性的（模型）对象。因此，您必须设置 ListBox 的[DataContext](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)或指定绑定的[Source](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.source)。

当您将元素添加到数据绑定 ListBox 时，您不会将它们添加到 中`Items`，而是将它们添加到绑定的源属性中，`EmpList`此处。

```
public class Model
{
    private ICollection<Emp> empList = new ObservableCollection<Emp>();

    public ICollection<Emp> EmpList { get { return empList; }}
} 
```

像这样绑定：

```
<ListBox ItemsSource="{Binding EmpList, Source={ an instance of Model }}" ... /> 
```

或者像下面这样

```
<ListBox Name="listBox" ItemsSource="{Binding EmpList}" ... /> 
```

并设置 DataContext，也许在代码中：

```
listBox.DataContext = model; // where model is an instance of class Model

for (int i = 0; i < result.Length; i++)        
{        
    Emp data = new Emp { Id = result[i] };
    model.EmpList.Add(data);
} 
```

# plugins - 我需要 Edgewall Trac 的插件

> ID：11792938
> 
> 赞同：0
> 
> 时间：2012-08-03T09:25:38.777
> 
> 标签：plugins, trac, bug-tracking

我需要以下 Trac 插件（如果存在）：

*   图表：甘特图等；
*   导出到 MS Excel；
*   仪表板：控制面板、显示器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:32:41.597

根据您的请求顺序提供的一些指示以及一些备注、插件描述中的引用或自己的经验（如果适用）：

*   对于甘特图，实际上有多种选择（完全没有自己的经验，大致按照可用性的可能性排序）：
    *   [TracJsGanttPlugin](http://trac-hacks.org/wiki/TracJsGanttPlugin) by jsgantt，计算完成百分比，积极维护
    *   [GanttCalendarPlugin](http://trac-hacks.org/wiki/GanttCalendarPlugin) - 手动设置完成百分比，工单的月视图，维护
    *   基于 FusionCharts Free 的[FlashGanttPlugin - 仅用于里程碑，而不用于票证，似乎未维护](http://trac-hacks.org/wiki/FlashGanttPlugin)
    *   [SchedulingToolsPlugin](http://trac-hacks.org/wiki/SchedulingToolsPlugin)，早期测试版，绝对无人维护
    *   [GanttChartPlugin](http://trac-hacks.org/wiki/GanttChartPlugin)没有动态，只是到甘特标记处理器的 YAML 文本块，似乎没有维护
*   [ExcelDownloadPlugin](http://trac-hacks.org/wiki/ExcelDownloadPlugin) - 我自己使用这个：效果很好，甚至还有 i18n 支持
*   [WhiteboardPlugin](http://trac-hacks.org/wiki/WhiteboardPlugin) - 这里不完全相信

更一般地说，我向您推荐[TracStatsPlugin](http://trac-hacks.org/wiki/TracStatsPlugin)以制作一个漂亮的捆绑视图，并导航到主题（repo、ticket、wiki）的子页面。它看起来整洁实用，并且有一个响应迅速的维护者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:06:48.907

有一个很棒的网站叫做[Trac Hacks](http://trac-hacks.org/)。在这里快速搜索将向您展示许多用于处理可视化的不同插件。 [这是进行可视化的插件的快速列表](http://trac-hacks.org/tags/%27chart%27)。

至于导出到 Excel，您要导出什么？对于工单和报告，在每个页面的底部，都有一个导出到逗号或制表符分隔的文本文件的选项。这可以在 Excel 中打开。如果这还不够，这里有三个插件可以导出到 Excel

*   [Excel下载插件](http://trac-hacks.org/wiki/ExcelDownloadPlugin)
*   [ExportImportXlsPlugin](http://trac-hacks.org/wiki/ExportImportXlsPlugin)
*   [Excel报表插件](http://trac-hacks.org/wiki/ExcelReportPlugin)

我希望这有帮助。

乔什

# android - 将android开发环境从一个分区转移到另一个分区

> ID：11792940
> 
> 赞同：1
> 
> 时间：2012-08-03T09:25:41.997
> 
> 标签：android

我将一个新的 Windows 7 安装到新的分区到一个新的硬盘中我：我的旧分区是 vista，并且为 android 开发配置了所有东西。

我想询问有关如何将我的完整android dev 转移到新的win7 而不会弄乱一切的信息。

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:32:02.353

要安装 Android，您需要 1.Android SDk 2\. Eclipse 和运行 Eclipse 您需要 JDK。所以如果您已经安装了 JDK，那么您可以将 eclipse 和 Android-SDK 复制到您的 I: 中。然后将您的工作区复制到您的 I:。就是这样。否则首先在您的 Windows 7 上安装 JDK，然后按照其余部分进行操作。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:30:21.990

像平常一样复制粘贴。在 Eclipse 中，将指向 android sdk 的路径的值重新设置为新位置的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:35:20.220

您可以将 android-sdk 目录复制到另一个分区。但是如果你使用的是eclipse，则需要在eclipse中重新配置sdk路径，在Window -> Preferences -> SDK Location

此外，如果您使用任何其他需要知道 android 位置的工具，则需要重新配置其路径。例如，maven 使用 ANDROID_HOME 环境变量。

# c# - c# Winforms：DataGridView离开事件没有获得最后更新单元格的值

> ID：11792945
> 
> 赞同：4
> 
> 时间：2012-08-03T09:26:10.657
> 
> 标签：c#, xml, winforms, datagridview, xmldataset

我有一个 WinForms 屏幕，`DataGridView`上面有一个和 Back/Next 按钮。在 上`FormLoad`，网格中填充了来自 XML 文档的值。然后，用户可以更改网格中任何单元格的值。我创建了一个`SaveGridValuesToXml`方法，它使用网格单元格中的更新值更新 XML 文件。

这大部分工作正常，我已经`SaveGridValuesToXml`从网格上的 Leave 事件中触发了该方法，因此当用户单击返回或下一步并且网格失去焦点时，将调用 save 方法。

我遇到的问题是所有单元格值都已更新并正确反映在 XML 文件中，但网格失去焦点时具有焦点的单元格除外。例如，在三列网格中，如果我更新第一行中的第一个、第二个和第三个单元格，当网格失去焦点时，只有我在第一个和第二个单元格中所做的更改会保存到我的 XML 文件中。

代码示例如下 -`LoadXmlDataIntoGridGridView()`加载父窗体时调用该方法。

```
XmlDataDocument xmlData = new XmlDataDocument();

private void LoadXmlDataIntoGridGridView()
{        
    xmlData.DataSet.ReadXml(@"C:\testFile.xml");
    uxMappingDataGridView.DataSource = xmlData.DataSet;
    uxMappingDataGridView.DataMember = "Item";
}

private void uxBackButton_Click(object sender, EventArgs e)
{
    this.Hide();
    uxSettingsUserControl settingsScreen 
       = ParentForm.Controls["uxSettingsUserControl"] as uxSettingsUserControl;
    settingsScreen.Show();
}

private void uxNextButton_Click(object sender, EventArgs e)
{
    this.Hide();
    uxLoadScriptUserControl loadScriptScreen 
       = ParentForm.Controls["uxLoadScriptUserControl"] as uxLoadScriptUserControl;
    loadScriptScreen.Show();
}

private void uxMappingDataGridView_Leave(object sender, EventArgs e)
{
    SaveGridValuesToXml();
}

private void SaveGridValuesToXml()
{   
    xmlData.DataSet.WriteXml(@"C:\testFile.xml");
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T10:39:51.247

这是因为当您通过单击按钮离开网格时，当前正在编辑的单元格未被提交。¹

`EndEdit()`要获得最后一个值，您需要通过调用网格来强制提交更改。

在下面的代码中，我从 SaveGridValuesToXml() 调用它 - 在您的示例中，在离开处理程序期间也可以工作，两者之间没有显着差异。

```
private void uxMappingDataGridView_Leave(object sender, EventArgs e)
{
    SaveGridValuesToXml();
}

private void SaveGridValuesToXml()
{   
    uxMappingDataGridView.EndEdit(DataGridViewDataErrorContexts.Commit);
    xmlData.DataSet.WriteXml(@"C:\testFile.xml");
} 
```

* * *

¹不完全确定它为什么会这样工作 - 个人感觉像是一个错误，但 DataGridView 产品团队中的某个人可能会说这是一个功能。

# python - 如何在远程机器的 python 脚本中的 paramiko 模块中运行 sudo 命令

> ID：11792946
> 
> 赞同：3
> 
> 时间：2012-08-03T09:26:12.043
> 
> 标签：python, sudo, paramiko, remote-server

我的场景是我需要登录到远程机器，然后对另一个帐户（如（`sudo su anotheract`））执行 sudo，然后运行其他所需的命令。

但我能够使用以下脚本成功连接到远程机器。但是脚本挂在我正在执行 sudo 命令的行中（`sudo su anotheract`）

您能帮我找到此代码的修复程序吗？

```
import paramiko

ssh = paramiko.SSHClient()

ssh.set_missing_host_key_policy(
    paramiko.AutoAddPolicy())

ssh.connect(hostname='XX.XXX.XX.XX',port=22, username='myname',password='XXXXX')

ssh.exec_command=("sudo su anotheract")

stdout,stdin,stderr=ssh.exec_command("java -jar /usr/share/XXX/LogR.jar")

print stdout.readlines() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T22:55:34.073

一种（不是很安全）的方法是输入密码。需要注意的是，您用来使用 paramiko 连接到盒子的用户应该具有 sudo 权限。

例如：

```
supass = 'some_pass'

stdout, stdin, stderr = ssh.exec_command('echo %s | sudo -S anotheract' % supass) 
```

同样，这不是一个非常安全的实现，但可以很快完成工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T10:46:23.167

```
import pxssh
ssh = pxssh.pxssh()
ssh.login('host', 'user', 'password')
ssh.sendline("sudo su anotheract")
ssh.prompt('yourrootpassword') 
```

在大多数 linux 系统上的 paramiko 中，你不能执行 sudo 命令，因为 sudo 期望来自 tty 的命令，然后它不会引发异常，但是你可以尝试方法 invokeshell，但我多年前使用 paramiko，我不记得它出了什么问题。如果你想在 shell 上发送各种命令，你可以使用 pxssh。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-03T09:39:52.267

它可以挂起，因为`sudo`等待密码。尝试将`NOPASSWD:`语句添加到`/etc/sudoers`.

```
user    ALL = NOPASSWD: /bin/true 
```

同样不可能更改用户使用`su`，然后在完成后继续做某事`su`。完成`su`后，您将回到原始用户的原始 shell。

因此，您需要使用以下命令运行所有命令`sudo`：

```
stdout,stdin,stderr = ssh.exec_command=("sudo -u anotheract java -jar /usr/share/XXX/LogR.jar") 
```

# asp.net-mvc-3 - 如何在 MVC3 中获取上传的文件？

> ID：11792949
> 
> 赞同：0
> 
> 时间：2012-08-03T09:26:23.197
> 
> 标签：asp.net-mvc-3, file-upload

大家好，我正在上传用户在此路径中上传的文件

```
 string savefilename = Path.Combine(Server.MapPath("~/Content/UploadedFiles/"),
                                Path.GetFileName()); 
```

我将 URL 保存在数据库中的 Url 列中

```
 ~/Content/UploadedFiles/BugTrackerDataBase.xlsx 
```

我正在尝试通过我的网格视图中的链接检索用户上传的文件我的检索方法如下所示

```
 public ActionResult ViewAttachments(string AttachmentName)
           {
          try
           {
            AttachmentName = Session["AttachmentUrl"].ToString();
            var fs = System.IO.File.OpenRead(Server.MapPath("'" + AttachmentName + "'"));
            return File(fs, "application/doc", AttachmentName);
        }
        catch
        {
            throw new HttpException(404, "Couldn't find " + AttachmentName);
        }
    } 
```

我有例外

```
 "Could not find a part of the path 'D:\AnilWork\BugTracker\BugTracker\ViewBug\'UploadedFiles\BugTrackerDataBase.xlsx''." 
```

谁能告诉我我在哪里做错了或者写程序来做这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:29:57.563

那是因为你的路径中有“'”。

> \BugTracker\ViewBug\'UploadedFiles\BugTrackerDataBase.xlsx''

删除它们应该可以工作。像这样

```
var fs = System.IO.File.OpenRead(Server.MapPath(AttachmentName)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:31:51.513

尝试

```
var fs = System.IO.File.OpenRead(Server.MapPath(" + AttachmentName + ")); 
```

代替

```
var fs = System.IO.File.OpenRead(Server.MapPath("'" + AttachmentName + "'")); 
```

它应该替换为 (Server.MapPath(""+ AttachmentName + ""))

# java - 如何在此 Builder 实现中摆脱 instanceof

> ID：11792950
> 
> 赞同：5
> 
> 时间：2012-08-03T09:26:22.513
> 
> 标签：java, oop, design-patterns, instanceof

## 这个想法

我需要创建命令。命令可以配置参数。并非每个命令都可以接收相同的参数。所以有些不得不被忽略。

我有一个抽象类命令，我在其中定义了一个生成器。默认情况下，每个附加参数都会抛出“UnsupportedOperationException”

```
public abstract class Command {

   public static abstract class CommandBuilder {

        // TODO instanceof. How to do this better?
        public CommandBuilder append(Parameter p)
            throws UnsupportedOperationException {

            if (p instanceof URLParameter)
                return append((URLParameter) p);

            if (p instanceof ActionParameter)
                return append((ActionParameter) p);

            if (p instanceof RepeatParameter)
                return append((RepeatParameter) p);

            if (p instanceof TimeOutParameter)
                return append((TimeOutParameter) p);

            return this;

        }

        public CommandBuilder append(URLParameter p)
                throws UnsupportedOperationException {

                    throw new UnsupportedOperationException(
                        "URLParameter not applicable");

        }

        public CommandBuilder append(RepeatParameter p)
            throws UnsupportedOperationException {

                throw new UnsupportedOperationException(
                    "RepeatParameter not applicable");

            }
            ...

} 
```

如果您希望参数适用于某个具体命令，可以说是 FTPCommand。

你将不得不做这样的事情：

```
public class FTPCommand extends Command {

    public static class Builder extends CommandBuilder {

    @Override
    public CommandBuilder append(URLParameter p) {
            System.out.println("URLParemeter appended");
                return this;
            }
        }

} 
```

因此，当提供 URLParameter 时，它不会再抛出异常，而是应用它。

但是这个 CommandBuilder 的客户端可能无法提供具体的子类。所以通常给出一个“参数”。但它需要去正确的地方（方法）

就像一个 URLParameter 必须到达`append(UrlParameter p)`

我怎样才能以干净（er）和漂亮（r）的方式做到这一点？因为我对使用 instanceof 并不是很“热情”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T09:32:02.150

这看起来像一个经典的[双重调度](http://en.wikipedia.org/wiki/Double_dispatch)或[访客](http://en.wikipedia.org/wiki/Visitor_pattern)场景。从双重调度参考：

> 一种机制，根据调用中涉及的两个对象的运行时类型将函数调用分派到不同的具体函数

并且需要在他们之间就做什么进行交互`Parameter`。`CommandBuilder`

`CommandBuilder`可以回调参数。这些`Parameter`对象都实现了一个公共接口*，每个子类的实现*会有所不同。

```
public CommandBuilder append(Parameter p) {
   // the append method called depends on the underlying type of 'p'
   p.append(this);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T09:36:23.787

我会在您的界面中添加一个访问者方法

```
interface Parameter {
    public void append(CommandBuilder builder);
}

class CommandBuilder {
    public CommandBuilder append(Parameter p) {
       p.append(this);
    }
} 
```

# python - PIL open.image & 转换问题

> ID：11792954
> 
> 赞同：4
> 
> 时间：2012-08-03T09:26:42.837
> 
> 标签：python, image, python-imaging-library

PIL Image.open.convert(L) 给了我一个奇怪的结果：

```
 from PIL import Image

   test_img = Image.open('test.jpg').convert('L')

   imshow(test_img)

   show() 
```

1.  它旋转图像（？）
2.  它不会将其转换为 L (?)

（对不起，我是新手，所以我不能发送图像作为演示）

为什么（如果你有想法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:24:04.963

由于 和 之间的原点不一致，您的图像被`Image`旋转 `pylab`。如果您使用此代码段，图像将不会倒置旋转。

```
import pylab as pl
import Image

im = Image.open('test.jpg').convert('L')
pl.imshow(im, origin='lower')
pl.show() 
```

但是，图像不会以黑白显示。为此，您需要指定灰度颜色图：

```
import pylab as pl
import Image
import matplotlib.cm as cm

im = Image.open('test.jpg').convert('L')
pl.imshow(im, origin='lower', cmap=cm.Greys_r)
pl.show() 
```

*瞧！*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:37:22.497

轮换是因为 PIL 和 matplotlib 不使用相同的约定。如果您执行 test_img.show() 它不会旋转图像。或者，您可以在使用 matplotlib 显示之前将图像转换为 numpy 数组：

```
imshow(np.asarray(test_img)) 
```

至于 .convert('L') 方法，它适用于我：

```
test_img = Image.open('test.jpg').convert('L')
print test_img.mode
# 'L' 
```

# c++ - C ++模板和继承，派生类中未替换函数

> ID：11792955
> 
> 赞同：3
> 
> 时间：2012-08-03T09:26:45.130
> 
> 标签：c++, templates, inheritance

在这里我附上了一个最小的案例，在子类中，`cmp`将替换父类中的那个，但是它不起作用，它总是从父类中调用那个

```
#include <iostream>

template <typename T>
class A
{
    public:
        void tell(T a, T b)
        {
            std::cout << (cmp (a, b) ? a : b) << " is better" << std::endl;
        }
    protected:
        bool cmp (T & a, T & b)
        {
            return a > b;
        }
};

template <typename T>
class B: public A<T>
{
    protected:
        bool cmp (T & a, T & b)
        {
            return a < b;
        }
};

int main ( int argc , char **argv ) 
{
    B<int> b;
    // should be: 3 is better here
    b.tell(5, 3);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:27:59.470

您必须声明多态函数`virtual`。否则你不会得到多态行为

```
virtual bool cmp (T & a, T & b) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:29:19.053

您的`cmp`函数必须`virtual`在`A`.

```
protected:
    virtual bool cmp (T & a, T & b)
    {
        return a > b;
    } 
```

它将在派生类中隐含地保持虚拟，尽管为了清楚起见，我也会显式声明`cmp`虚拟。`B`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T09:29:37.090

您应该`cmp`在基类中创建一个虚函数：

```
virtual bool cmp (T & a, T & b); 
```

# android - ListView.onItemClick 不起作用

> ID：11792959
> 
> 赞同：4
> 
> 时间：2012-08-03T09:27:00.473
> 
> 标签：android, onitemclicklistener

我在活动中的 ListView：

```
 ListView listView1 = (ListView) menu.findViewById(R.id.menuList);
    String menuItems[] = new String[] { "My Wants", "Profile", "Notifications",
            "Feedback", "Logout" };
    listView1.setAdapter(new SideMenuAdapter(this, menuItems, listView1));
    listView1.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            if (position == 1) {
                Intent intent = new Intent(FeedListViewActivity.this,
                        UserProfileActivity.class);
                startActivity(intent);
            }
            if (position == 0) {
                showMyWants();
            }
        }
    }); 
```

菜单是：

```
menu = inflater.inflate(R.layout.horz_scroll_menu, null); 
```

horz_scroll_menu.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/menu"
    android:layout_width="1dp"
    android:layout_height="1dp"
    android:background="#FFFFFFFF"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#FF000000"
        android:text="Menu"
        android:textColor="#FFFFFFFF"
        android:gravity="center" />

    <ListView
        android:id="@+id/menuList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="#FFFFFFFF"
        android:scrollbars="none" >
    </ListView>

</LinearLayout> 
```

我的 SideMenuAdapter：

```
public class SideMenuAdapter extends BaseAdapter {

    private static final int TYPE_MAX_COUNT = 2;
    private static LayoutInflater inflater = null;
    private Activity activity;
    public ImageLoader imageLoader;
    public static String[] values;
    ListView myList;

    public SideMenuAdapter(Activity a, String[] sa, ListView lv) {

        values = sa;
        activity = a;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        myList = lv;
    }

    public int getCount() {

        return values.length;
    }

    public Object getItem(int position) {

        return position;
    }

    public long getItemId(int position) {

        return position;
    }

    public static class ViewHolder {

        public TextView mainText;
        public TextView sideText;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder = new ViewHolder();
        View vi = convertView;

        LayoutInflater inflater = activity.getLayoutInflater();
        vi = inflater.inflate(R.layout.side_menu_list_item, null);
        holder.mainText = (TextView) vi.findViewById(R.id.mainText_sideMenu);
        holder.sideText = (TextView) vi.findViewById(R.id.sideText_sideMenu);
        vi.setTag(holder);

        holder.mainText = (TextView) vi.findViewById(R.id.mainText_sideMenu);
        holder.sideText = (TextView) vi.findViewById(R.id.sideText_sideMenu);

        holder.mainText.setText(values[position]);
        if (position == 2) {

            holder.sideText.setText("3");
            holder.sideText.setBackgroundResource(R.drawable.orange);
        }
        return vi;
    }

    @Override
    public int getViewTypeCount() {

        return TYPE_MAX_COUNT;
    }

} 
```

我的 ListView 项目的 Xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/sideMenuListItem"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:orientation="horizontal"
    android:padding="3dp" >

    <TextView
        android:id="@+id/sideText_sideMenu"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentRight="true"
        android:clickable="true"
        android:gravity="center"
        android:textSize="20dp"
        android:padding="5dp" />

    <TextView
        android:id="@+id/mainText_sideMenu"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@id/sideText_sideMenu"
        android:clickable="true"
        android:gravity="left|center_vertical"
        android:textSize="20dp"
        android:padding="5dp" />

</RelativeLayout> 
```

在模拟器上运行此应用程序时，如果我用鼠标单击没有任何反应。但是，当我使用键盘上的导航按钮选择列表中的任何项目并单击 Enter 时，它工作正常。

在设备上运行应用程序时。如果我继续单击列表中的任何项目，例如大约 10-20 次，它有时会起作用。

编辑：

```
Actually everything worked fine when i was using predefined ArrayAdapter<String> and android.R.simple_list_item. But i want a custom adapter 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T10:25:46.703

这是因为在我的 ListView 项目布局中我添加了

```
android:clickable="true" 
```

对于两个 TextViews。因此，当我单击 ListView 项目时，它确实是单击未实现 onClick 的这些 TextView。从 TextViews 中删除可点击属性解决了我的问题。

感谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:44:20.730

试试这个

[http://www.mkyong.com/android/android-listview-example/](http://www.mkyong.com/android/android-listview-example/)

res/layout/list_fruit.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:padding="10dp"
  android:textSize="20sp" >
</TextView> 
```

列表显示

```
 public class ListFruitActivity extends ListActivity {

static final String[] FRUITS = new String[] { "Apple", "Avocado", "Banana",
        "Blueberry", "Coconut", "Durian", "Guava", "Kiwifruit",
        "Jackfruit", "Mango", "Olive", "Pear", "Sugar-apple" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // no more this
    // setContentView(R.layout.list_fruit);

    setListAdapter(new ArrayAdapter<String>(this, R.layout.list_fruit,FRUITS));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text
            Toast.makeText(getApplicationContext(),
            ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
        }
    });

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:29:44.597

尝试使`RelativeLayout`可点击和可聚焦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:37:34.323

**布局文件**

```
 <ListView android:id="@id/android:list"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#000fff"
android:layout_weight="2"
android:drawSelectorOnTop="false">
</ListView> 
```

**主要活动**

```
public class MyListView extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, PENS));
        getListView().setTextFilterEnabled(true);

    }

    static final String[] PENS = new String[]{
        "MONT Blanc",
        "Gucci",
        "Parker",
        "Sailor",
        "Porsche Design",
        "Rotring",
        "Sheaffer",
        "Waterman"
    };

    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Object o = this.getListAdapter().getItem(position);
        String pen = o.toString();
        Toast.makeText(this, "You have chosen the pen: " + " " + pen, Toast.LENGTH_LONG).show();
    }
} 
```

# jquery - 调整元素大小以避免重叠

> ID：11792961
> 
> 赞同：0
> 
> 时间：2012-08-03T09:27:15.337
> 
> 标签：jquery, html, css

我正在创建一个带有几个 div 和一个徽标的。

调整页面大小时，徽标位于 div 下方，这并不是真正的问题。

但是，我确实希望图像和 div 在发生重叠之前调整到最小宽度。例如，假设用户在 1920x1080 的屏幕上打开页面，图像的宽度为 250 像素，div 框为 800 像素。但是，当他调整大小时，图像和 div 将相互“挤压”到一个点（图像的最小宽度 = 100px；div = 400px）。

我已经编写了代码，这些代码会在这些元素开始重叠时显示出来，并且它可以工作，但我不知道如何调整元素的大小。目前，我只是减去 1，但这不起作用，因为有时它们在调整大小时会重叠。

这是jQuery代码：

```
$(window).resize(function(e) {
    if($(window).width()-$('.info').width()-170-$('.logo').width() < 0 && $('.logo').width() > 100 && $('.info').width() > 400) {
        $('.info').width($('.info').width()-1);
        $('.logo').width($('.logo').width()-1);
    } else if($(window).width()-$('.info').width()-170-$('.logo').width() > 0 && $('.logo').width() < 250 && $('.info').width() < 800) {
        $('.info').width($('.info').width()+1);
        $('.logo').width($('.logo').width()+1);
    }
}); 
```

我将不胜感激在使这些元素正确调整大小方面的任何帮助。我知道我显然在实际调整元素大小时遗漏了一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:13:32.697

所以我自己修好了。在此处发布以备将来参考或有人有更好的方法（甚至对此进行改进）。这是我第一次尝试这样的事情，所以请放轻松嘿嘿嘿

```
$(window).resize(function(e) {
resizeAfter = $(window).width();
if($(window).width()-$('.info').width()-170-$('.logo').width() < 0) {
    if($('.logo').width() > 100){
        $('.logo').width($('.logo').width() - (resizeBefore-resizeAfter));
        $('.logo').height($('.logo').width()*ratio);
        if($('.logo').width() < 100) {
            $('.logo').width(100);
            $('.logo').height(100*ratio);
        }
    } else if($('.info').width() > 510){
        $('.info').width($('.info').width() - (resizeBefore-resizeAfter));
        if($('.info').width() < 510) {
            $('.info').width(510);
        }
    }
} else if($(window).width()-$('.info').width()-170-$('.logo').width() > 0){
    if($('.info').width() < 800){
        $('.info').width($('.info').width() + (resizeAfter-resizeBefore));
        if($('.info').width() > 800) {
            $('.info').width(800);
        }
    } else if($('.logo').width() < 250){
        $('.logo').width($('.logo').width() + (resizeAfter - resizeBefore));
        $('.logo').height($('.logo').width()*ratio);
        if($('.logo').width() > 250) {
            $('.logo').width(250);
            $('.logo').height(250*ratio);
        }
    }
}
resizeBefore = $(window).width();
}); 
```

# magento - 具有前端和管理功能的 Magento 模块

> ID：11792962
> 
> 赞同：4
> 
> 时间：2012-08-03T09:27:17.143
> 
> 标签：magento, module, admin, frontend, controllers

我目前正在为 Magento 开发一个自定义模块。我了解包、模块和路由器的基础知识，并且我已经构建了模块的前端部分。

但是，我现在正在转向管理方面的事情。但是，我对如何将管理部分添加到路由器并让它调用相关控制器感到有些困惑。

假设我已经创建了这些路由器......

```
<frontend>
    <routers>
        <slider>
            <use>standard</use>
            <args>
                <module>Mypackage_Myodule</module>
                <frontName>Mymodule</frontName>
            </args>
        </slider>
    </routers> 
</frontend> 
<admin>
    <routers>
        <mymoduleadmin>
            <use>admin</use>
            <args>
                <module>Mypackage_Myodule</module>
                <frontName>Mymodule</frontName>
            </args>
        </mymoduleadmin>
    </routers>
</admin> 
```

我认为这两个路由器都会尝试调用 controllers/IndexController.php 并因此具有相同的功能？是否可以进行设置，以便我的路由器根据它们是前端还是管理员调用不同的控制器？这甚至可能还是我需要设置一个前端模块和一个管理模块？

如果这是一个男生的问题，我很抱歉，但这让我有点困惑，实际上我只想知道设置具有前端和管理功能的自定义模块的最有效方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:38:10.127

根据区域（前端或 adminhtml），调度前端或 adminhtml 路由器。
因此，只要您为前端和 adminhtml 使用不同的控制器文件，前端控制器扩展自`Mage_Core_Controller_Front_Action`& adminhtml 扩展自`Mage_Adminhtml_Controller_Action`.

Frontend / Adminhtml 路由器可以定义为（只是一种语法）：

```
<frontend>
    <routers>
        <[module]>
            <use>standard</use>
            <args>
                <module>[Namespace]_[Module]</module>
                <frontName>[module]</frontName>
            </args>
        </[module]>
    </routers>
</frontend>
<admin>
    <routers>
        <[module]>
            <use>admin</use>
            <args>
                <module>[Namespace]_[Module]</module>
                <frontName>[module]</frontName>
            </args>
        </[module]>
    </routers>
</admin> 
```

您可以在以下位置创建前端控制器：`app/code/[codePool]/[Namespace]/[Module]/controllers/`
例如：

```
<?php
//file: app/code/local/MagePsycho/Testmodule/controllers/IndexController.php
class MagePsycho_Testmodule_IndexController extends Mage_Core_Controller_Front_Action
{
    public function indexAction(){

    }
} 
```

为了从 url:`http://your-magento-url/testmodule/index/index`
和 adminhtml 控制器访问它： `app/code/[codePool]/[Namespace]/[Module]/controllers/Adminhtml/`
例如：

```
<?php
//file: app/code/local/MagePsycho/Testmodule/controllers/Adminhtml/IndexController.php
class MagePsycho_Testmodule_Adminhtml_IndexController extends Mage_Adminhtml_Controller_Action
{
    public function indexAction(){

    }
} 
```

为了从 url 访问它：（`http://your-magento-url/testmodule/adminhtml_index/index`
您可以看到用于分隔 adminhtml 控制器的 Adminhtml 文件夹）

希望这能给你一些信息。
谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:12:54.113

看看我的类似问题：[自定义模块中的管理路由](https://stackoverflow.com/questions/7521620/admin-route-in-custom-modules)

我也建议使用

```
<admin>
 <routers>
   <adminhtml>
     <args>
       <modules>
         <modulename before="Mage_Adminhtml">Namespace_Module_Adminhtml</modulename>
       </modules>
     </args>
   </adminhtml>
 </routers>
</admin> 
```

这将允许您避免`adminhtml`在路由中使用部分，因此您的模块后端 url 将具有像核心模块一样简单而干净的 url，例如`admin/mymodule`

# ember.js - Ember.js/在把手上渲染嵌套数组内容

> ID：11792966
> 
> 赞同：4
> 
> 时间：2012-08-03T09:27:37.860
> 
> 标签：ember.js

我有一个模型“事务”，其中声明了一个子类别数组。每当调用 transactionsController 的方法“add_subcagtegory”时，此数组都会填充事务类型对象。现在，当我尝试在嵌套循环（#collection）中呈现子类别时，我没有完成它。渲染数组控制器对象的外循环（#each）工作正常。谁能告诉如何渲染 subCategories 数组？

应用程序.js

```
App.transaction=Em.Object.extend({
  account:null,
  date:null,
  source:null,
  description:null,
  category:null,
  flag_for_later:null,
  amount:null,
  category_id:null,
  record_index:null,
  isSubCategory:null,
  subCategories:[]
});

App.transactionsController = Em.ArrayController.create({
  content: [],
  add_subcategory: function(param){
     var records=this.toArray();
     if (typeof(records[param.value -1].subCategories) === "undefined") {
       records[param.value -1].subCategories = new Array();
     }

      var category=App.transaction.create({
        account:"//",
        date:"//",
        source:"//",
        description:"//",
        category:" ",
        flag_for_later:" ",
        amount:null,
        category_id:records[param.value -1].subCategories.length + 1,
        isSubCategory:true
      });

     records[param.value -1].subCategories.push(category);

     App.transactionsController.set('content',[]);
     App.transactionsController.pushObjects(records);

     App.array.push(obj1);
    }
}); 
```

和模板：

```
<table>
    {{#each App.transactionsController}}
      <tr>
        <td>{{account}}</td>
        <td>{{date}}</td>
        <td>{{source}}</td>
        <td>{{view App.TextField class="span12" style="border:0px;"  objcount=record_index fieldname="description" value=description}}</td>
        <td>{{view App.TextField class="span12" style="border:0px;" objcount=record_index fieldname="category" value=category }}</td>
        <td><button onclick="App.transactionsController.add_subcategory(this);" value="{{unbound record_index}}">+</button></td>
        <td>{{view App.TextField class="span6" style="border:0px;" objcount=record_index fieldname="flag_for_later" value=flag_for_later }}</td>
        <td>{{amount}}</td>
      </tr>
      {{#collection contentBinding="App.transactionsController.subCategories"}}
        <b>content does,nt not render</b>
      {{/collection}}
    {{/each}}
</table> 
```

在集合下的模板中，如何访问子类别？

[http://jsfiddle.net/KbN47/29/](http://jsfiddle.net/KbN47/29/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:37:10.473

简单地将 {{collection}} 助手的内容绑定到 this.subcategories （`this`是您的上下文中的事务）有效吗？

```
{{#collection contentBinding="this.subcategories"}} 
```

**更新**

这是一个jsfiddle：http: [//jsfiddle.net/Sly7/tRbZC/](http://jsfiddle.net/Sly7/tRbZC/)

请注意，ember 版本是最新版本。您应该更新，因为 0.9.5 已经很旧了。我没有看这种`<select>`行为，但如果它不起作用，我想你现在拥有使它起作用的所有关键:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:12:29.857

我将 ember 版本从最新版本修改为 pre 1.0，然后单击 + 即可。

[http://jsfiddle.net/y3YX9/](http://jsfiddle.net/y3YX9/)

# perl - Perl one liner 提取多行模式

> ID：11792967
> 
> 赞同：10
> 
> 时间：2012-08-03T09:27:39.680
> 
> 标签：perl, bash, sed, awk, perl-module

我在文件中有一个模式，如下所示，它可以/不能跨越多行：

```
 abcd25
 ef_gh
 ( fg*_h
 hj_b*
 hj ) { 
```

我尝试过的：

> perl -nle '打印而 m/^\s*(\w+)\s+(\w+?)\s*(([\w-0-9,* \s] *))\s* {/gm'

我不知道标志在这里的含义，但我所做的只是`regex`为模式编写一个并将其插入到模式空间中。如果模式在一行中，这匹配得很好：

```
abcd25 ef_gh ( fg*_h hj_b* hj ) { 
```

但仅在多行情况下失败！

我昨天开始使用 perl，但语法太混乱了。因此，正如我们的一位同事所建议的那样，我写了一个`regex`并将其插入到他提供的代码中。

我希望`perl`和尚能在这种情况下帮助我。欢迎替代解决方案。

输入文件 ：

```
 abcd25
 ef_gh
 ( fg*_h
 hj_b*
 hj ) {

 abcd25
 ef_gh
 fg*_h
 hj_b*
 hj ) {

 jhijdsiokdù ()lmolmlxjk;
 abcd25 ef_gh ( fg*_h hj_b* hj ) { 
```

预期输出：

```
 abcd25
 ef_gh
 ( fg*_h
 hj_b*
 hj ) {
 abcd25 ef_gh ( fg*_h hj_b* hj ) { 
```

输入文件可以有多个模式，这些模式与所需模式的开始和结束模式一致。提前感谢您的回复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T09:54:14.620

正则表达式甚至不匹配单行。你认为双括号有什么作用？

你可能想要

```
m/^\s*(\w+)\s+(\w+?)\s*\([\w0-9,*\s]+\)\s{/gm 
```

**更新：**规范已更改。正则表达式（几乎）没有，但您必须稍微更改代码：

```
perl -0777 -nle 'print "$1\n" while m/^\s*(\w+\s+\w+?\s*\([\w0-9,*\s]+\)\s{)/gm' 
```

**另一个更新：**

解释：

*   开关描述`perlrun`如下：[zero](http://p3rl.org/perlrun#*-0*%5B_octal/hexadecimal_%5D) , [n](http://p3rl.org/perlrun#*-n*) , [l](http://p3rl.org/perlrun#*-l*%5b_octnum_%5d) , [e](http://p3rl.org/perlrun#*-e*-_commandline_)
*   正则表达式可以由[YAPE::Regex::Explain自动解释](http://p3rl.org/YAPE::Regex::Explain)

    ```
    perl -MYAPE::Regex::Explain -e 'print YAPE::Regex::Explain->new(qr/^\s*(\w+\s+\w+?\s*\([\w0-9,*\s]+\)\s{)/)->explain'
    The regular expression:

    (?-imsx:^\s*(\w+\s+\w+?\s*\([\w0-9,*\s]+\)\s{))

    matches as follows:

    NODE                     EXPLANATION
    ----------------------------------------------------------------------
    (?-imsx:                 group, but do not capture (case-sensitive)
                             (with ^ and $ matching normally) (with . not
                             matching \n) (matching whitespace and #
                             normally):
    ----------------------------------------------------------------------
      ^                        the beginning of the string
    ----------------------------------------------------------------------
      \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                               more times (matching the most amount
                               possible))
    ----------------------------------------------------------------------
      (                        group and capture to \1:
    ----------------------------------------------------------------------
        \w+                      word characters (a-z, A-Z, 0-9, _) (1 or
                                 more times (matching the most amount
                                 possible))
    ----------------------------------------------------------------------
        \s+                      whitespace (\n, \r, \t, \f, and " ") (1
                                 or more times (matching the most amount
                                 possible))
    ----------------------------------------------------------------------
        \w+?                     word characters (a-z, A-Z, 0-9, _) (1 or
                                 more times (matching the least amount
                                 possible))
    ----------------------------------------------------------------------
        \s*                      whitespace (\n, \r, \t, \f, and " ") (0
                                 or more times (matching the most amount
                                 possible))
    ----------------------------------------------------------------------
        \(                       '('
    ----------------------------------------------------------------------
        [\w0-9,*\s]+             any character of: word characters (a-z,
                                 A-Z, 0-9, _), '0' to '9', ',', '*',
                                 whitespace (\n, \r, \t, \f, and " ") (1
                                 or more times (matching the most amount
                                 possible))
    ----------------------------------------------------------------------
        \)                       ')'
    ----------------------------------------------------------------------
        \s                       whitespace (\n, \r, \t, \f, and " ")
    ----------------------------------------------------------------------
        {                        '{'
    ----------------------------------------------------------------------
      )                        end of \1
    ----------------------------------------------------------------------
    )                        end of grouping
    ---------------------------------------------------------------------- 
    ```

    *   /gm 开关在[perlre中解释](http://p3rl.org/perlre)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-03T10:06:48.747

### 将触发器运算符用于单线

Perl 使用触发器运算符使这变得非常容易，它允许您打印出两个正则表达式之间的所有行。例如：

```
$ perl -ne 'print if /^abcd25/ ... /\bhj \) {/' /tmp/foo
abcd25
ef_gh
( fg*_h
hj_b*
hj ) { 
```

但是，像这样的简单单行不会区分您想要拒绝分隔模式之间的特定匹配的匹配。这需要更复杂的方法。

### 更复杂的比较受益于条件分支

单行并不总是最好的选择，如果正则表达式变得过于复杂，它们会很快失控。在这种情况下，您最好编写一个可以使用条件分支的实际程序，而不是尝试使用过于聪明的正则表达式匹配。

*一种方法是使用简单*模式建立匹配，然后拒绝任何与*其他*简单模式不匹配的匹配。例如：

```
#!/usr/bin/perl -nw

# Use flip-flop operator to select matches.
if (/^abcd25/ ... /\bhj \) {/) {
    push @string, $_
};

# Reject multi-line patterns that don't include a particular expression
# between flip-flop delimiters. For example, "( fg" will match, while
# "^fg" won't.
if (/\bhj \) {/) {
    $string = join("", @string);
    undef @string;
    push(@matches, $string) if $string =~ /\( fg/;
};

END {print @matches} 
```

当针对 OP 更新的语料库运行时，这会正确产生：

```
abcd25
ef_gh
( fg*_h
hj_b*
hj ) {
abcd25 ef_gh ( fg*_h hj_b* hj ) { 
```

# windows-phone-7 - Windows Phone 在特定工作日重复警报

> ID：11792968
> 
> 赞同：2
> 
> 时间：2012-08-03T09:27:40.453
> 
> 标签：windows-phone-7, alarm, repeatingalarm

我正在开发一个用户需要能够在 Windows Phone 上创建警报的应用程序。我遇到的问题是我们希望提供在特定日期重复警报的功能（例如仅周一至周五）。

RecurrenceInterval 类似乎没有提供适合这种情况的选项（即使在本机警报应用程序中可能），只有每天、每周等......

我是否需要为每个工作日创建单独的闹钟并将它们设置为每周重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T02:57:34.870

枚举不允许为警报指定一周中的几天 - 所以我会为每个工作日使用单独的警报并每周重复一次。为了使警报更容易找到，我只会对警报使用命名约定，例如“AlarmName_[n]”，其中 n=1..6 - 取决于警报需要响起的天数，然后你可以从 1 开始枚举，直到没有指定名称的警报。

# javascript - Javascript 和 xml 解析

> ID：11792970
> 
> 赞同：0
> 
> 时间：2012-08-03T09:27:47.447
> 
> 标签：javascript, xml-parsing

我有一个 XML 对象，我想返回可能有多个子节点的节点上的文本值。

```
 <binding name="s"><bnode>b1fff4d00000000fe</bnode></binding>
  <binding name="p"><uri>http://cidoc-crm.org/P1F.is_identified_by</uri></binding>
  <binding name="zebra"><literal>copper</literal></binding> 
```

在上述情况下，如果我可以指定绑定的名称值，我想返回每个节点中的文本。

伪代码：获取绑定名称值 == "s" 的文本；

我试过这个

```
x[i].getElementsByTagName("binding")[0].childNodes[0].nodeValue 
```

所以在这种情况下，bnode 的子节点名称是什么并不重要。

我希望那很清楚

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:49:00.223

获取文本内容的最简单方法是

```
x[i].getElementsByTagName("binding")[0].textContent; 
```

但是，`textContent`在 IE < 9 中不受支持，因此您需要导航到这些浏览器中的文本节点：

```
x[i].getElementsByTagName("binding")[0].firstChild.firstChild.data; 
```

演示：http: [//jsfiddle.net/p2SrZ/](http://jsfiddle.net/p2SrZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:52:14.393

您正在尝试获取`nodeValue`将始终导致`null`. ^([[1]](http://reference.sitepoint.com/javascript/Node/nodeValue)) 你想要的是`nodeValue`包含的文本节点的。因此，不幸的是，您必须在此语句中添加另一层，您的语句变为

```
x[i].getElementsByTagName("binding")[0].childNodes[0].childNodes[0].nodeValue; 
```

这将拉取内部元素的文本节点值。

^(^(^(^(^([1] 假引用只需点击链接即可。)))))

# c# - 为 Compact Framework 和 Full Framework 设计数据访问

> ID：11792978
> 
> 赞同：4
> 
> 时间：2012-08-03T09:28:26.363
> 
> 标签：c#, .net, compact-framework, sql-server-ce

我们目前有一个桌面应用程序，它使用来自 SQL CE 的数据。我们将实体框架用于我们的 ORM 层到数据库，所有数据访问方法都是围绕此构建的。

现在我们必须在 Compact Framework 上为 Windows CE 6.0 构建这个应用程序的缩小版“克隆”，同样使用与桌面版本相同的 SQL CE 数据库设计。问题是紧凑的框架不支持实体框架，所以我们被迫以老式的方式访问数据库（ADO.net、数据集等）。然而，这导致了我们整个数据访问层的重复，并且对这两个应用程序的维护看起来可能会变成一场噩梦。

理想情况下，我想切换到适用于两个平台的最低公分母 - 根据当前信息，我想这意味着使用旧的 ADO.net 将是可行的方法，编译成单独的程序集，但我只是想问一下这里的任何人有任何其他建议，或者可能遇到过类似的情况？是否有任何可以在紧凑和完整框架上工作的 EF 替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:49:44.247

我们在 Windows CE（支持 SQLCE）、桌面（支持 SQLCE）和 Android（支持 SQLite）中使用[OpenNETCF ORM](http://orm.codeplex.com)，这三者使用几乎相同的代码。我说“几乎”是因为它们之间的数据存储初始化代码不同（目标文件名、存储位置等）。你也可以很容易地添加一个完整的 SQL Server 实现——它可能是 SQLite 内容的近 1:1 副本。我从来没有这样做过，只是因为我不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:35:17.690

另请参阅：[.NET Compact Framework（Windows Mobile 6.1、SQLServerCE）是否有免费的 ORM？](https://stackoverflow.com/questions/2028556/is-there-any-free-orm-for-net-compact-framework-windows-mobile-6-1-sqlserverc)

另一种选择：[http ://sqlite.phxsoftware.com/](http://sqlite.phxsoftware.com/)

另一个选择：[http ://www.db4o.com/s/compactframeworkdb.aspx](http://www.db4o.com/s/compactframeworkdb.aspx)

# python - 大型项目的 Python 文件夹结构

> ID：11792980
> 
> 赞同：2
> 
> 时间：2012-08-03T09:28:30.733
> 
> 标签：python, import, setup-project

我是使用 python 进行大型项目的新手。我为我的 python 项目找到了以下文件夹结构：

```
project
├── doc
├── src
│   ├── hardware
│   ├── devices
│   │   ├── device1
│   │   └── device2
│   ├── measurement
│   ├── ui
│   └── util
└── tests
    ├── hardware
    ├── devices
    │   ├── device1
    │   └── device2
    ├── measurement
    ├── ui
    └── util 
```

测试文件夹包含源文件夹中模块的单元测试。这是这样一个程序的正确方法吗？

我应该如何进行导入？我想将根文件夹添加到 python 路径并从根路径绝对导入每个模块。我应该这样做吗？

这个程序在几个共同计算机上使用。我应该如何部署它？目前我使用`SVN`每台计算机都获取整个项目并从那里启动它。有一个缺点，我必须`PYTHONPATH`在每台计算机上添加项目路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:44:29.503

全球结构对我来说看起来不错。您需要一个模块来编写 setup.py 脚本来安装您的包，例如[setuptools](http://packages.python.org/an_example_pypi_project/setuptools.html)。这将允许安装和分发包。另请参阅[Pypi](http://pypi.python.org/pypi)以了解包的分发。通常，您可以：

```
sudo setup.py install 
```

在系统级别安装您的软件包。或者你可以：

```
sudo setup.py install --prefix=~/local 
```

在用户级别安装。但是你必须将 ~/local/lib/python/site-packages 添加到你的 PYTHONPATH 中。但是对于该用户安装的所有软件包，只需执行一次。

如果您的包存储在 PyPI 上，您可以在任何机器上执行以下操作：

```
easy_install mypackage 
```

自动神奇地安装包。

更好的是，您可以使用[virtualenv](http://pypi.python.org/pypi/virtualenv/)使您的包仅在隔离的 python“虚拟环境”中可见。这使得在同一台计算机上测试各种软件包和版本变得轻而易举。

您还可以在包根级别添加 README 文件等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:44:44.450

您最好的选择是使用`virtualenv`, 并有一个`setup.py`来描述包。

然后，为了开发，在虚拟环境中，只需`python setup.py develop`在开发模式下安装 egg 就可以了： [http ://packages.python.org/distribute/setuptools.html#develop-deploy-the-project-开发模式中的源代码](http://packages.python.org/distribute/setuptools.html#develop-deploy-the-project-source-in-development-mode)

在生产中，只需使用通常的：（`python setup.py install`总是在 virtualenv 中）。

# command-line - Yii 命令工具不起作用

> ID：11792981
> 
> 赞同：0
> 
> 时间：2012-08-03T09:28:32.773
> 
> 标签：command-line, yii

我在 web Root 文件夹 (C:\xampp\htdocs\myapps\cmd.exe) 中使用 Yii 命令行。我的命令如下所示：

`D:\xampp\htdocs\YiiRoot\framework\yiic shell`

通常它会起作用，但现在它没有；我只是没有输出：

![运行 <code>yiic shell</code> 后的控制台输出](../Images/fc68399d188b14309425d7d5b2933a54.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:30:41.450

对不起，迟到的答案。

自上次使用以来，您是否配置了访问规则？如果没有登录就无法访问 index.php，yiic 工具将失败。您可以通过指定配置文件的路径来克服这个问题：

```
protected\yiic shell protected\config\main.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T16:01:42.523

我经历了同样的事情，最后我发现 yiic 文件竟然是空的！

发现幕后发生的事情的一种方法是在 yiic.bat 文件的开头注释“rem echo off”。

# javascript - jquery中点击功能的自动调用

> ID：11792983
> 
> 赞同：0
> 
> 时间：2012-08-03T09:28:34.600
> 
> 标签：javascript, jquery

我希望`onclick`强行调用一个函数。

```
$('.checkbox-selector').click(function() {

});

$('.checkbox-selector1').click(function() {

}); 
```

当控件转到第一个函数时，应自动调用第二个函数，即触发 onlick 事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:31:26.113

```
function func1(e) {
    // do stuff for selector

    // run func2 too!
    func2();
}

function func2(e) {
    // do stuff for selector1
}

$('.checkbox-selector').click(func1);
$('.checkbox-selector1').click(func2); 
```

你是这个意思吗？

* * *

如果是这样，请务必查看评论！考虑到事件等，它们包含非常有价值的信息。

您也可以替换`func2();`为`$('.checkbox-selector1').trigger('click');`触发本机事件处理程序！使用`$('.checkbox-selector1').triggerHandler('click');`实际上与 相同`func2();`，无论您喜欢哪个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:30:37.750

看一下jQuery的[触发](http://api.jquery.com/trigger/)功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:37:29.550

不知道你到底在找什么，但我猜：

```
$('.checkbox-selector').click(function() {
    /* all sorts of stuff*/
    $('.checkbox-selector1').click();
    //or:
    $('.checkbox-selector1').trigger('click');
});

$('.checkbox-selector1').click(function() {

}); 
```

类似的东西？

# php - 如何在 PHP 中查找两个日期之间的 DateIntervals 数

> ID：11792986
> 
> 赞同：0
> 
> 时间：2012-08-03T09:28:58.060
> 
> 标签：php, date, dateinterval

我正在尝试确定两个日期之间的日期间隔数。间隔可以是几个月、几天、几小时或用户选择的任何时间。

目前我有一个使用递归的函数，但是，由于递归嵌套限制，如果两点之间的间隔超过 100 个，这将中断。

```
private static function findCurrentInterval($initialStartTimestamp, $intervalStrtotimeFormat, $now = null, $period = 1)
{
    if (is_null($now)){
        $now = time();
    }

    $endOfCurrentInterval = strtotime($intervalStrtotimeFormat, $initialStartTimestamp);

    if ($now > $initialStartTimestamp && $now < $endOfCurrentInterval){
        return new self($period);
    }else{
        # increment the period ID tracking variable
        $period++;
        return self::findCurrentInterval($endOfCurrentInterval, $intervalStrtotimeFormat, $now, $period);
    }
} 
```

我所需要的只是一个整数值，它表示我们当前所处的时间间隔，即如果它设置为 7 天的间隔，并且从起点到现在已经过去了 20 天，它将返回 '3 '，因为我们将进入第三阶段。

有没有办法在没有递归的情况下做到这一点，也许使用 DateInterval？

注意，如果它仅限于几天或几小时，这将非常简单 - 但它需要支持几个月，它可以有可变的长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:05:30.993

这似乎有效：

```
function findCurrentInterval($number, $type, $start, $end){

    $dt1 = DateTime::createFromFormat('Y-m-d H:i:s', $start);
    $dt2 = DateTime::createFromFormat('Y-m-d H:i:s', $end);
    $diff = $dt1->diff($dt2);

    $numDays = (int) $diff->format('%a');
    $numMonths = (int) $diff->format('%m');
    $numYears = (int) $diff->format('%y');
    $numHours = (int) $diff->format('%h');

    if ($numYears > 0){
        $numMonths += ($numYears * 12);
    }

    $numHours += $numDays * 24;

    switch ($type){
        case 'hours':
            return floor($numHours / $number);
        break;
        case 'days':
            return floor($numDays / $number);
        break;
        case 'months':
            return floor($numMonths / $number);
        break;
        default:
            throw new Exception('Interval type '.$type.' not implemented.');
    }

} 
```

例子：

```
echo findCurrentInterval(3, 'hours', '2012-01-01 00:00:00', '2012-08-01 00:00:00');
echo findCurrentInterval(7, 'days', '2012-01-01 00:00:00', '2012-08-01 00:00:00');
echo findCurrentInterval(1, 'months', '2012-01-01 00:00:00', '2012-08-01 00:00:00'); 
```

输出：

```
1704
30
7 
```

和：

```
echo findCurrentInterval(3, 'hours', '2011-01-01 00:00:00', '2012-08-01 00:00:00');
echo findCurrentInterval(7, 'days', '2011-01-01 00:00:00', '2012-08-01 00:00:00');
echo findCurrentInterval(1, 'months', '2011-01-01 00:00:00', '2012-08-01 00:00:00'); 
```

输出：

```
4624
82
19 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:05:49.713

这对你很有帮助

尝试这个

// 日基

```
$start_date = '20-07-2012';
$end_date = '22-07-2012';
$start = strtotime($start_date);
$end = strtotime($end_date);
$interval = 2;
$out='';
$int = 24*60*60*$interval;
for($i= $start;$i<= $end; $i += $int ){

    echo date('d-m-Y',$i).'<br />';
} 
```

//月基

```
$start_date = '20-07-2012';
$end_date = '22-12-2012';
$start = strtotime($start_date);
$end = strtotime($end_date);
$interval = 2;

$int = 30*24*60*60*$interval;
for($i= $start;$i<= $end; $i += $int ){

    echo date('d-m-Y',$i).'<br />';
} 
```

//小时基数

```
$start_date = '20-07-2012';
$end_date = '22-12-2012';
$start = strtotime($start_date);
$end = strtotime($end_date);
$interval = 2;

$int = 60*60*$interval;
for($i= $start;$i<= $end; $i += $int ){

    echo date('d-m-Y H:i:s',$i).'<br />';
} 
```

# cocoa - NSFileCoordinator 正确用法

> ID：11792987
> 
> 赞同：6
> 
> 时间：2012-08-03T09:29:01.760
> 
> 标签：cocoa, icloud, nsfilecoordinator

使用 NSFileCoordinator 编写文件时，我需要指定正确的 NSFileCoordinatorWritingOptions。尽管对它们进行了详细说明，但我不确定何时使用哪一个。可用的选项有：

*   NSFileCoordinatorWritingForDeleting
*   NSFileCoordinatorWritingForReplace
*   NSFileCoordinatorWritingForMoving
*   NSFileCoordinatorWritingForMerging

例如，如果我想创建一个文件（例如 plist），哪个选项是正确的？当我修改文件时，哪个？

有人可以解释 NSFileCoordinatorWritingOptions 以便更好地理解吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T07:24:55.267

我同意，这方面的文档并不完整，而且很难理解。即使是这样的基本操作，也没有示例代码可用。

我尝试从打开该特定文件的其他应用程序的角度来考虑这些选项，这有助于了解全局。

*   不传递任何选项 (0) 以简单地更新文件并通知其他人您的更改。

*   假设您正在删除 TextEdit 当前显示的文件，通过提供*NSFileCoordinatorWritingForDeleting*选项，您告诉 TextEdit 关闭该文件，因为它不再存在（或者如果它在内存中，它可能会建议将其保存到另一个地方）。它因删除而起作用。

*   如果您正在覆盖文件（而不是更新文件），您希望其他应用程序具有相同的行为。那是*NSFileCoordinatorWritingForReplacing*。

*   *NSFileCoordinatorWritingForMoving*说其他应用程序将文件跟踪到它的新位置，以便以后可以更新。

*   *NSFileCoordinatorWritingForMerging*要求其他进程首先提交他们的更改，以便您可以将自己的更改与这些更改合并。

要回答您的问题，您应该在创建新文件时使用 NSFileCoordinatorWritingForReplacing （即使不存在文件，因为它同时出现在另一个应用程序中，您将用自己的不相关内容替换它）。并且*NSFileCoordinatorWritingForMerging*应该在使用新数据更新现有文件时使用，因为它允许立即将最新更改集成到该文件（而不是稍后再解决冲突）。

# php - 如何创建查询以获得正确的复数结果？

> ID：11792988
> 
> 赞同：1
> 
> 时间：2012-08-03T09:29:00.750
> 
> 标签：php, mysql, sql, select

这是我的表，我需要得到如下结果：

```
in 560038 two hospitals, one temple, zero masjid, zero company, one church and 
in 560049 one schools, one masjid, one company, zero temple, zero hospitals, and 
in 562129 one high school, zero hospitals, zero company, zero masjid , zero temple. 

604=hospital,
1306=temple,
1302=church,
204=school,
1305=masjid,
102=company. 
```

是否可以从 mysql 中的单个查询中获取？在这里我只能给出city_id。

```
id  |cat_id|poi_id |addr                    |pincode|city_id 
1   |6     |604     |Amrutha  Hospital      |560038 |284 
2   |13    |1306    |Temple             |560038 |284 
3   |13    |1302    |Resurrection Church    |560038 |284 
4   |2     |204     |Lake Montfort School   |560049 |284 
5   |6     |604     |Garden City Hospital   |560038 |284 
6   |13    |1305    |Bilal Masjid           |560049 |284 
7   |1     |102     |Grindwell Limited      |560049 |284 
8   |2     |204     |Citizen High School    |562129 |284 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:03:40.947

您可以使用其中的[`CASE`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#operator_case)表达式`COUNT()`有条件地聚合`poi_id`s 以区分计数，按 分组`pincode`。

你要：

```
SELECT   pincode,
         COUNT(CASE poi_id WHEN 604  THEN 1 END) AS hospital_cnt,
         COUNT(CASE poi_id WHEN 1306 THEN 1 END) AS temple_cnt,
         COUNT(CASE poi_id WHEN 1302 THEN 1 END) AS church_cnt,
         COUNT(CASE poi_id WHEN 204  THEN 1 END) AS school_cnt,
         COUNT(CASE poi_id WHEN 1305 THEN 1 END) AS masjid_cnt,
         COUNT(CASE poi_id WHEN 102  THEN 1 END) AS company_cnt
FROM     tbl
GROUP BY pincode 
```

**编辑：**根据您的评论，您可以获得每个可能的计数的行`poi_id`格式`pincode`：

```
SELECT     a.pincode,
           b.poi_id,
           COUNT(c.pincode) AS cnt
FROM       (SELECT DISTINCT pincode FROM tbl) a
CROSS JOIN poi b
LEFT JOIN  tbl c ON a.pincode = c.pincode AND b.poi_id = c.poi_id
GROUP BY   a.pincode, b.poi_id 
```

链接到`poi`的表的名称在哪里。`poi_id`确保列名也一致。

如果您仍然想要每行`pincode`，您可以使用`GROUP_CONCAT`将计数全部放入一个分隔字符串中：

```
SELECT   a.pincode,
         GROUP_CONCAT(CONCAT(a.poi_id, ': ', a.cnt) SEPARATOR ' / ') AS poi_cnts
FROM     (
         SELECT     a.pincode,
                    b.poi_id,
                    COUNT(c.pincode) AS cnt
         FROM       (SELECT DISTINCT pincode FROM tbl) a
         CROSS JOIN poi b
         LEFT JOIN  tbl c ON a.pincode = c.pincode AND b.poi_id = c.poi_id
         GROUP BY   a.pincode, b.poi_id
         ) a
GROUP BY a.pincode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:34:13.330

```
select pincode, addr, count(id) from YourTable group by pincode, addr 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T09:32:27.307

我认为这就是你要找的：

```
SELECT pincode, poi_id, COUNT(1) AS place_cnt
FROM table_name
GROUP BY pincode, poi_id; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-03T10:15:55.070

如果我理解正确，您需要一个结果集，其中每一行都是密码，后跟每种兴趣点的数字。

您指定的目标结果看起来需要是一个很长的自然英文字符串。我不会让你走那么远，但我会给你一些你可以在代码中使用的东西。

这是您最终会得到的最终结果：

```
pincode | hospitals | temples | masjids | companies | churches | schools
560038  |     2     |    1    |    0    |     0     |    1     |    0
560049  |     0     |    0    |    1    |     1     |    0     |    1
562129  |     0     |    0    |    0    |     0     |    0     |    1 
```

注意：我认为以这种方式要求结果并不理想。如果稍后添加新类型的兴趣点，您将不得不重写查询。但既然是这个问题，那就是答案：

有两种方法可以做到这一点，并且都使用对每种类型的兴趣点执行 count(*) 的子查询。第一个选项是将子查询嵌入到查询的 SELECT 部分。第二种选择是从子查询中创建派生表并将它们连接在一起。

这是选项1：

```
SELECT
mainTbl.pincode,
(SELECT count(*) FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 604) as hospitals,
(SELECT count(*) FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 1306) as temples,
(SELECT count(*) FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 1305) as masjids,
(SELECT count(*) FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 1302) as churches,
(SELECT count(*) FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 204) as schools,
(SELECT count(*) FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 102) as companies
FROM myTable mainTbl
WHERE mainTbl.city_id = ? 
```

和选项2：

```
SELECT
mainTbl.pincode,
hospitalsTbl.hospitals,
templesTbl.temples,
masjidsTbl.masjids,
churchesTbl.churches,
schoolsTbl.schools,
companiesTbl.companies

FROM myTable mainTbl
JOIN (SELECT count(*) as hospitals, pincode FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id  AND poi_id = 604) hospitalsTbl ON hospitalsTbl.pincode = mainTbl.pincode
JOIN (SELECT count(*) as temples, pincode FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 1306) templesTbl ON templesTbl.pincode = mainTbl.pincode
JOIN (SELECT count(*) as masjids, pincode FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 1305) masjidsTbl ON masjidsTbl.pincode = mainTbl.pincode
JOIN (SELECT count(*) as churches, pincode FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 1302) churchesTbl ON churchesTbl.pincode = mainTbl.pincode
JOIN (SELECT count(*) as schools, pincode FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 204) schoolsTbl ON schoolsTbl.pincode = mainTbl.pincode
JOIN (SELECT count(*) as companies, pincode FROM myTable WHERE pincode = mainTbl.pincode AND city_id = mainTbl.city_id AND poi_id = 102) companiesTbl ON companiesTbl.pincode = mainTbl.pincode
WHERE mainTbl.city_id = ? 
```

如您所见，查询非常冗长。最好有这样的东西：

```
SELECT count(*) as num_poi, poi_id, pincode
FROM myTable
WHERE city_id = ?
GROUP BY poi_id, pincode 
```

然后在代码中构建你的一行行。

# php - 如何在使用单引号的回声中使用单引号

> ID：11792990
> 
> 赞同：18
> 
> 时间：2012-08-03T09:29:05.520
> 
> 标签：php, echo, quotes

首先，我已经完成了相关问题..没有找到任何答案..我正在使用此代码显示一条消息

`echo 'Here goes your message with an apostrophe S like thi's ';`

我怎样才能做到这一点，因为这个回声中的任何引用都会破坏声明......

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-03T09:31:15.410

使用反斜杠转义引号，或使用双引号指定字符串。

```
echo 'Here goes your message with an apostrophe S like thi\'s';

echo "Here goes your message with an apostrophe S like thi's"; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T09:31:16.627

使用反斜杠转义引号。

```
'hello\'s' 
```

反斜杠后出现的单引号将出现在屏幕上。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-12T17:42:03.013

您是否尝试过[addlashes()](http://php.net/manual/en/function.addslashes.php)功能？它甚至使用您的示例。

我个人更喜欢函数[htmlspecialchars()](http://php.net/manual/en/function.htmlspecialchars.php) ，它做同样的事情，但有让你指定其行为的标志。

像这样：

> echo htmlspecialchars("O'Rielly", ENT_QUOTES);

这会在 HTML 网页上正确显示字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T09:32:49.223

在 PHP 中，转义序列字符是反斜杠 ( `\`)。您可以在特殊字符之前添加它，以确保这些字符显示为文字。例如：

```
echo 'Here goes your message with an apostrophe S like thi\'s '; 
```

或者你也可以这样写：

```
echo "Here goes your message with an apostrophe S like thi's "; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T09:41:32.687

```
echo <<<EOT
You can put what ever you want here.. HTML, " ' ` anyting will go
Here goes your message with an apostrophe S like thi's
EOT; 
```

请务必在使用此类字符串之前阅读[此内容。](http://in.php.net/manual/en/language.types.string.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-23T02:22:32.550

由于答案中的方法不适用于我的情况，我最终只是在每次通过代码更改报价类型并交换报价类型以启动回声时调用新的回声，现在是 2019 年，我不知道关于任何其他解决方案，因为我对编程真的很陌生，但这对我来说很好，例如：

```
 else {
          echo '<a onclick="document.getElementById(';
          echo "'open_login').style.display='block'";
          echo '" class="branding w3-bar-item w3-button w3-mobile w3-light-blue w3-hover-white w3-right"href="#login"><span class="fa fa-user"></span>&nbsp;&nbsp;Login do Aluno</a>';
        }
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-15T17:32:45.543

问题可能是您通过 HTML 用单引号 '' 传递变量。如果是这种情况，请尝试使用双引号：“”。

# java - 如何在 Java 中实现“双色调”效果

> ID：11792999
> 
> 赞同：0
> 
> 时间：2012-08-03T09:29:40.717
> 
> 标签：java, image-processing

有没有办法在 Java 中实现“双色调”效果？

我想做的一个很好的例子是[here](http://www.webdesign.org/photoshop/color-management/duotone-effect.8400.html)或[here](http://www.creativebeacon.com/using-duotones-to-achieve-some-interesting-color-effects/)

我想 BandCombineOp 可能会有所帮助。对我来说，我应该先将其转换为灰色，然后再应用阈值效果。但是我没有设法获得好的输出。

另外我不明白如何为这种效果设置颜色。

```
float[][] grayMatrix = new float[][]
            {
               new float[] {0.3f, 0.3f, 0.3f},
               new float[] {0.3f, 0.3f, 0.3f},
               new float[] {0.3f, 0.3f, 0.3f},
            };

    float[][] duoToneMatrix = new float[][]
            {
                    new float[] {0.1f, 0.1f, 0.1f},
                    new float[] {0.2f, 0.2f, 0.2f},
                    new float[] {0.1f, 0.1f, 0.1f},
            };

    BufferedImage src = ImageIO.read(new File("X:\\photoshop_image_effects.jpg"));
    WritableRaster srcRaster = src.getRaster();

    // make it gray
    BandCombineOp bco = new BandCombineOp(grayMatrix, null);
    WritableRaster dstRaster = bco.createCompatibleDestRaster(srcRaster);
    bco.filter(srcRaster, dstRaster);

    // apply duotone
    BandCombineOp duoToneBco = new BandCombineOp(duoToneMatrix, null);
    WritableRaster dstRaster2 = bco.createCompatibleDestRaster(dstRaster);
    duoToneBco.filter(dstRaster, dstRaster2);

    BufferedImage result = new BufferedImage(src.getColorModel(), dstRaster2, src.getColorModel().isAlphaPremultiplied(), null);
    ImageIO.write(result, "png", new File("X:\\result_duotone.png")); 
```

我的输出![在此处输入图像描述](../Images/2a2903571768bef623a9bf0289d45f36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T17:45:16.887

据我所知，您正在尝试更改图像的颜色而不更改其[亮度](http://www.cambridgeincolour.com/tutorials/histograms2.htm)。注意与亮度的区别。

无论您的目标是亮度还是亮度，您的问题归结为改变 B、G 和 R 的相对贡献而不改变它们的加权和。您的第一个矩阵通过将 B、G、R 设置为相同的值并仅稍微改变它们的亮度 (.3+.3+.3 = .9) 来转换为灰度。要使用亮度而不是使用

```
greyMatrix = (.11,.59,.3,
              .11,.59,.3,
              .11,.59,.3); //note this is for bgr 
```

然后你想改变它们的相对权重而不改变它们的加权和。首先，请注意，由于在灰度转换后，您的 B、G、R 值相同，您可以将矩阵替换为

```
duoToneMatrix = (0,.3,0,
                 0,.6,0,
                 0,.3,0,) 
```

这将是等效的。为了保存亮度，您需要选择 3 个因子，使它们的总和为 1。这三个因子可以应用于双色调矩阵。因子越大，图像的颜色就越多。为了保持亮度，你需要 3 个因子 fb,fg,fr 使得

```
fb*.11+fg*.59+fr*.3 = 1; //again for bgr 
```

您可以选择因子 fb、fg、fr 来找到您选择的色调。

另外，请注意，您可以使用一个矩阵来执行此操作。只需结合您已有的两个矩阵。

```
[duoToneMatrix]*[greyMatrix]*vector = ([duoToneMatrix]*[greyMatrix])*vector; 
```

只需计算 duoToneMatrix 和 grayMatrix 的乘积（按此顺序）并一步处理。