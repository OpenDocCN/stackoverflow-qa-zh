# StackOverflow 问答 10296000-10296999

# regex - 特定要求的正则表达式

> ID：10296000
> 
> 赞同：1
> 
> 时间：2012-04-24T10:19:22.613
> 
> 标签：regex

我有一个密码文本框，要求如下：

1.  应该只以字母开头。
2.  应包含一个数字。
3.  应包含一个特殊字符
4.  不少于10个字符。

我创建了这个正则表达式：

`^.*[a-zA-Z](?=.*\d)(?=.*[@#$%^&+=])(?=.{10,15}).*$`

但它也将第一个字符作为数字和特殊字符，这不应该发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:22:38.633

尝试：

```
^[a-zA-Z](?=.*\d)(?=.*[@#$%^&+=])(?=.{9,}).*$ 
```

[看见](http://www.rubular.com/r/etJIfPOnaV)

# .htaccess - 带有 .htaccess 的 Google 广告系列和分析网址

> ID：10296003
> 
> 赞同：0
> 
> 时间：2012-04-24T10:19:29.557
> 
> 标签：.htaccess, google-analytics

我们的一位客户正在我们的城市开展一项活动，他们想要的要求之一是跟踪访问者在 QR 码中扫描的项目。为此，我已将其输入到我的 .htaccess 文件中：

```
RewriteRule ^(beermat|poster|flyer)$ /video?utm_source=$1&utm_medium=PrintedMaterial&utm_campaign=VideoCampaign2012 [R=301] 
```

因此，如果有人扫描具有以下地址的二维码：[http](http://www.website.com/beermat) ://www.website.com/beermat ，它会重定向到具有相关属性的 /video。

如果我在 /video 页面上有谷歌分析代码，这应该可以工作，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:09:13.863

试试这个插件，看看 google-analytics 是否正在记录任何东西。这样你就可以直接看到它是否工作。

[https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:23:13.067

我认为最好将“海报”设为目录，其中的 index.php 应设置 $_SESSION['found']="poster" 然后重定向到将从 SESSION 读取的主页。

额外的好处是你不会留下任何丑陋的 GET 数据，只是一个漂亮干净的 url，但缺点是你必须手动创建目录，所以只有在你有一个可管理的数量时才这样做。

# wix - 如果 env 路径被更改或删除，msi 安装失败

> ID：10296004
> 
> 赞同：0
> 
> 时间：2012-04-24T10:19:31.880
> 
> 标签：wix, windows-installer

我有这个 wxs 文件，预计它是：1）如果 env ZENWORKS_HOME 存在，它安装在那里，2）如果没有，它安装到 Program Files。

我面临的问题是：

a) 如果 ZENWORKS_HOME env 路径我更改，默认是`C:\Program Files\Novell\ZENworks\bin\preboot`我更改为 D:\，msi 安装失败并出现错误代码

b) 如果我删除 ZENWORKS_HOME 环境变量，那么它也无法安装。

下面是我的 wxs 文件的代码片段：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2003/01/wi">
  <!-- TODO: Create new GUIDs for the Product and Package Id. -->
  <!-- TODO: Create a GUID for the UpgradeCode.  This GUID must remain the same forever more
             for your MSI...at least as long as you want the MSI engine to actually upgrade
             between versions of your MSI -->
  <!-- TODO: Fill out the Description field and the Product Name. -->
  <Product UpgradeCode="5CB46018-7411-4049-BB2D-CF7414BC8618" Id="????????-????-????-????-????????????" Name="ZENworks Image Explorer" Language="1033" Version="$(var.version)" Manufacturer="Novell, Inc.">
    <Package Id="????????-????-????-????-????????????" Description="ZENworks Image Explorer allows to you to view and modify the contents of a ZENworks image." InstallerVersion="200" Compressed="yes" />
    <Condition Message="ZENworks Image Explorer requires that your computer is running Windows XP or Windows 2003 Server"><![CDATA[(Not Version9X) And (VersionNT > 500)]]></Condition>
    <Media Id="1" Cabinet="Product.cab" EmbedCab="yes" />
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="ProgramFilesFolder">
       <Directory Id="INSTALLATIONDIRECTORY" Name="DefltDir">
            <Directory Id="bin" Name="bin">
              <Directory Id="preboot" Name="preboot">
                <Component Id="ZMGEXP_Start_script" Guid="CC1958FD-E438-4C13-9C97-D0A629AFB6A4" DiskId="1">
                  <File Id="zmgexp.bat" LongName="zmgexp.bat" Name="ZMGEXP1.BAT" Source="zmgexp.bat" />
                </Component>
                <Directory Id="nls" Name="nls">
                  <Component Id="ZMGEXP_Help_files" Guid="F70E341C-2B27-4FED-B1DF-DC8C311FF322" DiskId="1">
                    <File Id="ImgExplorerHelp.html" Name="IMGEXPH1.htm" Source="resources\helpfiles\ImgExplorerHelp.html" LongName="ImgExplorerHelp.html" />
                  </Component>
                </Directory>
               </Directory>
            </Directory>
            <Directory Id="lib" Name="lib">
              <Directory Id="java" Name="java">
                <Component Id="ZMGEXP_jar" Guid="B0F2E4AA-17AC-4B0A-8560-9DA8CE17790F" DiskId="1">
                  <File Id="zmgexp.jar" LongName="zmgexp.jar" Name="ZMGEXP1.JAR" Source="zmgexp.jar" />
                </Component>
                <Component Id="SWT_64_jar" Guid="51A737C4-F199-4366-A3A0-D374A7800A96" DiskId="1" Win64="yes">
                  <Condition>VersionNT64</Condition>
                  <File Id="swt_64.jar" LongName="swt.jar" Name="SWT_64.JAR" Source="swt-win64\swt.jar" />
                </Component>
                <Component Id="SWT_32_jar" Guid="9B01F63C-F125-4f6d-B729-A2CE6B303E35" DiskId="1" Win64="no">
                  <Condition>NOT VersionNT64</Condition>
                  <File Id="swt_32.jar" LongName="swt.jar" Name="SWT_32.JAR" Source="swt-win32\swt.jar" />
                </Component>
.
.
.<snip>

    <Upgrade Id="5CB46018-7411-4049-BB2D-CF7414BC8618">
       <UpgradeVersion IgnoreRemoveFailure="yes" IncludeMaximum="yes" Maximum="$(var.version)" Property="UPGRADE_VERSIONS"/>
       <UpgradeVersion OnlyDetect="yes" IgnoreRemoveFailure="yes" IncludeMinimum="no" Minimum="$(var.version)" Property="NEWER_VERSIONS"/>  
    </Upgrade>
    <Property Id="UPGRADE_VERSIONS" Secure="yes"/>
    <Property Id="NEWER_VERSIONS" Secure="yes"/>

    <CustomAction Id="SetInstallationDirectory" 
        Directory="INSTALLATIONDIRECTORY"
        Value="[%ZENWORKS_HOME]" />

    <CustomAction Id="NEWER_VERSION_PRESENT" Error="A newer version already exists"/>

    <InstallExecuteSequence>
       <RemoveExistingProducts After="InstallFinalize"/>
       <Custom Action="NEWER_VERSION_PRESENT" After="FindRelatedProducts">
          NEWER_VERSIONS
       </Custom>

       <Custom Action="SetInstallationDirectory" After='CostFinalize'>[%ZENWORKS_HOME%]</Custom>

    </InstallExecuteSequence>

  </Product>
</Wix> 
```

# javascript - 打开浏览器时出现锚点标签问题

> ID：10296005
> 
> 赞同：0
> 
> 时间：2012-04-24T10:19:33.767
> 
> 标签：javascript, html

```
viewresident = '<a href="javascript:;" onclick="return openPopup(' + viewUrl + ');" >' + name[i] + '</a>'; 
```

我正在使用 JQ Grid 将其设置为网格的名称行。没有错误，但页面不会在新窗口中打开弹出窗口。请让我知道这是错的。

```
function openPopup(url) {
      window.open(url, "popup_id", "scrollbars,resizable");
      return false;
    } 
```

整个事情都是用JS编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:31:43.187

阅读如何使用`window.open()`：[Window open() 方法](http://www.w3schools.com/jsref/met_win_open.asp)，然后试试这个：

```
viewresident = '<a href="javascript:openPopup(' + viewUrl + ');" >' + name[i] + '</a>';

function openPopup(url){
    window.open(url,'Popup','scrollbars=yes, resizable=yes, width=500, height=400');
} 
```

`scrollbars=no`禁用窗口滚动条并`resizable=no`禁用窗口大小调整。

# ios - 转换为 ARC：将保留属性转换为 unsafe_unretained？

> ID：10296009
> 
> 赞同：2
> 
> 时间：2012-04-24T10:20:02.400
> 
> 标签：ios, xcode, automatic-ref-counting

我正在尝试使用 XCode 将现有的 iOS4 应用程序转换为 ARC，并且对转换预览有疑问。一些保留属性被转换为 unsafe_unretained 属性。知道为什么>

例如：

```
@property (retain, nonatomic) UIImageView *icon; 
```

变成

```
@property ( unsafe_unretained, nonatomic) UIImageView *icon; 
```

我希望它是一个强大的属性...

这个对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:02:47.863

我有类似的问题，我发现，当你有保留财产但你没有在 dealloc 中释放它时，就会发生这种情况。当将 [property release] 添加到 dealloc 中时，转换器按预期工作 - 使用了强类型的属性。

# javascript - 使用正则表达式在javascript中修剪标签

> ID：10296011
> 
> 赞同：0
> 
> 时间：2012-04-24T10:20:04.007
> 
> 标签：javascript, regex, trim

我有一个正则表达式，我想修剪变量的 <br>

```
str1.replace(/^&lt;br&gt;|&lt;br&gt;$/g,''); 
```

例如我想修剪这样的字符串

```
var str1 = "<br>hooray!<br>"; 
```

我希望它是这样的

```
var str = "hooray!"; 
```

但它似乎不起作用......

删除第一个和最后一个 <br> 标签的正确正则表达式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T10:28:59.457

试试这个正则表达式：

```
str1.replace(/(^<br>|<br>$)/g,""); 
```

[这个小提琴](http://jsfiddle.net/WBfxm/)的演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:39:50.587

试试这个：

```
var mystring = '<br>hooray!<br>';
var find = "<br>"; 
var regex = new RegExp(find, "g"); 
var result = mystring.replace(regex, ""); 
```

这是[小提琴](http://jsfiddle.net/gE5tg/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:24:02.097

我认为`br`标签通常写成`<br/>`这样你就可以使用正则表达式`<br[ ]?/>;`

如果你想覆盖`br`写成的标签，`<br> </br>`那么你必须使用`<br>[\s\S]*?<br[ ]?/>`

**问题编辑后**

对于这样的输入`<br>hooray!<br>` ，您可以使用 just`<br>`并将所有匹配项替换为空白

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:26:00.707

**试试这个：**
`(?im)(^<br[\s/]*>|<br[\s/]*>$)`

**JavaScript 代码：**

`result = subject.replace(/(?:(?:^<br[\s\/]*>)|(?:<br[\s\/]*>$))/mg, "");`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-23T18:24:19.057

这似乎对我有用，并且可以处理中断标签被奇怪编码的情况......

```
var newData = data.replace(/&lt;br ?\/\>|&lt;br ?\/&rt;|\<br ?\/\>/g, "\n"); 
```

# xpages - xp:viewPanel - 引导和关闭空表行

> ID：10296013
> 
> 赞同：1
> 
> 时间：2012-04-24T10:20:18.413
> 
> 标签：xpages

我有以下带有 xp:viewPanel 的简单 xpage：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
<xp:viewPanel rows="30" id="viewPanel1" disableTheme="true">
    <xp:this.data>
        <xp:dominoView var="view1" viewName="testView"></xp:dominoView>
    </xp:this.data>
    <xp:viewColumn columnName="$0" id="viewColumn1">
        <xp:viewColumnHeader value="Col 1" id="viewColumnHeader1"></xp:viewColumnHeader>
    </xp:viewColumn>
</xp:viewPanel>
</xp:view> 
```

尽管页眉和页脚禁用了分页器，但生成的 HTML 始终在视图数据周围有一个前导空行：

```
<table id="view:_id1:viewPanel1_OUTER_TABLE" cellspacing="0" cellpadding="0">

 <tr>
  <td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
 </tr>

 <tr>
  <td colspan="3" style="padding:0px" width="100%" height="100%" valign="top">
     <table id="view:_id1:viewPanel1">
       <thead>
         <tr>
           <th scope="col">
             <div><span><span id="view:_id1:viewPanel1:viewColumn1:__internal_header_title_id">Col 1</span></span></div>         
           </th>
         </tr>
       </thead>
       <tbody>
        <tr>
         <td>
          <span id="view:_id1:viewPanel1:0:viewColumn1:_internalViewText">&nbsp;</span>         
         </td>
        </tr>
       </tbody>
     </table>

  </td>
 </tr>

 <tr>
  <td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td>
 </tr>

</table> 
```

我该怎么做才能隐藏/删除这些空行？

我已经添加了一个空主题并在测试数据库中使用它，但这并没有帮助：

```
<theme xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="platform:/plugin/com.ibm.designer.domino.stylekits/schema/stylekit.xsd">
</theme> 
```

我正在使用 Domino Domino 8.5.3 升级包 1

提前谢谢丹尼尔

* * *

编辑 2012 年 4 月 24 日：

感谢 Ulrich Krause，他的回答给了我正确的方向，我最终编写了自己的主题扩展。

```
<theme extends="webstandard" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="platform:/plugin/com.ibm.designer.domino.stylekits/schema/stylekit.xsd">

  <!-- ================== View Table with no footer and header ================================ -->
    <!-- View DataTable - copied from webstandard theme and customized  (Notes\xsp\nsf\themes)-->
    <control >
            <name>DataTable.ViewPanelNoHeaderFooter</name>
            <property>
                    <name>headerEndStyle</name>
                    <value>display: none;</value>
            </property>
            <property>
                    <name>headerStartStyle</name>
                    <value>display: none;</value>
            </property>           
            <property>
                    <name>headerStyle</name>
                    <value>display: none;</value>
            </property>

            <property>
                    <name>footerStyle</name>
                    <value>display: none;</value>
            </property>
            <property>
                    <name>footerStartStyle</name>
                    <value>display: none;</value>
            </property>           
            <property>
                    <name>footerEndStyle</name>
                    <value>display: none;</value>
            </property>
    </control>
</theme> 
```

使用该主题扩展，我可以在需要的地方将 xp:viewPanel 的主题 ID 设置为“DataTable.ViewPanelNoHeaderFooter”，并且隐藏页眉和页脚行。

```
<xp:viewPanel rows="30" id="viewPanel1" 
    themeId="DataTable.ViewPanelNoHeaderFooter">
    <xp:this.data>
        <xp:dominoView var="view1" viewName="testView"></xp:dominoView>
    </xp:this.data>
    <xp:viewColumn columnName="$0" id="viewColumn1">
        <xp:viewColumnHeader value="Col 1" id="viewColumnHeader1">
        </xp:viewColumnHeader>
    </xp:viewColumn>

</xp:viewPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:35:10.783

我为此使用了一个主题。它将空的 .xspDataTableViewPanelHeaderStart 等设置为 display:none。用萤火虫检查以找到元素。将发布解决方案，但目前只有智能手机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:51:17.477

尝试使用 disableTheme="true" 作为寻呼机的属性，看看是否可以摆脱代码。

```
 <xp:pager partialRefresh="true" layout="Previous Group Next"
            xp:key="headerPager" id="pager1" disableTheme="true">
        </xp:pager> 
```

# html - 如何在 div 中水平和垂直居中图像

> ID：10296015
> 
> 赞同：16
> 
> 时间：2012-04-24T10:20:21.543
> 
> 标签：html, css, image

我的页面中有以下标记代码：

```
<div id="root_img" style="width:100%;height:100%">
    <div id="id_immagine" align="center" style="width: 100%; height: 100%;">
        <a id="a_img_id" href="./css/imgs/mancante.jpg">
            <img id="img_id" src="./css/imgs/mancante.jpg" />
        </a>
    </div>
</div> 
```

它并没有像我预期的那样出现，它看起来像这样：

![在此处输入图像描述](../Images/a83eda2cab84fd28c5879d35669028aa.png)

但我想得到这个结果：

![在此处输入图像描述](../Images/c0c32f1285e5d6eecab830a8626917b1.png)

如何使该图像水平和垂直居中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T10:34:40.377

这是一个关于如何在 div 中垂直和水平居中图像的**[教程。](http://www.brunildo.org/test/img_center.html)**

这是您要查找的内容：

```
.wraptocenter {
  display: table-cell;
  text-align: center;
  vertical-align: middle;
  width: 200px;
  height: 200px;
  background-color: #999;
}
.wraptocenter * {
  vertical-align: middle;
}
```

```
<div class="wraptocenter">
  <img src="http://www.brunildo.org/thumb/tmiri2_o.jpg">
</div>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T10:27:03.453

对于垂直对齐，我将包含一些 CSS 以将其从顶部 50% 定位，然后将其向上移动图像像素高度的一半。

水平，我会按照建议使用边距。

因此，如果您的图像是 100x100 像素，那么您最终会得到。

```
<img id="my_image" src="example.jpg">

<style>
#my_image{
 position: absolute;
 top: 50%;
 margin: -50px auto 0;
}
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-08T09:23:52.187

```
Image in a div horizontally and vertically.

<div class="thumbnail">                
    <img src="image_path.jpg" alt="img">
</div>

.thumbnail {
    height: 200px;
    margin: 0 auto;
    position: relative;
}
.thumbnail img {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    top: 0;
    margin: auto;
    max-width: 100%;
    max-height: 100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-10T13:58:45.537

您需要解决两个方面的问题。第一个方面是水平对齐。这很容易通过 margin: auto 应用到图像本身周围的 div 元素上来实现。DIV 需要将宽度和高度设置为图像大小（否则这将不起作用）。要实现垂直居中对齐，您需要在 HTML 中添加一些 javascript。这是因为 HTML 高度大小在页面启动时是未知的，以后可能会改变。最好的解决方案是使用 jQuery 并编写以下脚本： $(window).ready( function() { /* 监听窗口就绪事件 - 在页面加载后触发*/ repositionCenteredImage(); });

```
 $(window).resize(function() { /* listen to page resize event - in case window size changes*/ 
        repositionCenteredImage();
    });

    function repositionCenteredImage() { /* reposition our image to the center of the window*/
        pageHeight = $(window).height(); /*get current page height*/
        /*
        * calculate top and bottom margin based on the page height
         * and image height which is 300px in my case.
         * We use half of it on both sides.
         * Margin for the horizontal alignment is left untouched since it is working out of the box.
        */
        $("#pageContainer").css({"margin": (pageHeight/2 - 150) + "px auto"}); 
    } 
```

显示图像的 HTML 页面如下所示：

```
 <body>
        <div id="pageContainer">
            <div id="image container">
                <img src="brumenlabLogo.png" id="logoImage"/>
            </div>
        </div>
    </body> 
```

附加到元素的 CSS 如下所示：

```
#html, body {
    margin: 0;
    padding: 0;
    background-color: #000;
}

#pageContainer { /*css for the whole page*/
    margin: auto auto;   /*center the whole page*/
    width: 300px;
    height: 300px;
}

#logoImage { /*css for the logo image*/
    width: 300px;
    height: 300px;
} 
```

您可以从我们公司主页的以下网址下载整个解决方案：

> [http://brumenlab.com](http://brumenlab.com)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-07T07:31:45.437

**此解决方案适用于所有尺寸的图像** 在此图像的比例也保持不变。

```
.client_logo{
  height:200px;
  width:200px;
  background:#f4f4f4;
}
.display-table{
    display: table;
    height: 100%;
    width: 100%;
    text-align: center;
}
.display-cell{
    display: table-cell;
    vertical-align: middle;
}
.logo-img{
    width: auto !important;
    height: auto;
    max-width: 100%;
    max-height: 100%;

}
```

```
<div class="client_logo">
    <div class="display-table">
      <div class="display-cell">
         <img src="http://www.brunildo.org/thumb/tmiri2_o.jpg">
      </div>
    </div>
</div> 
```

> 您可以设置大小
> 
> .client_logo
> 
> 根据您的要求

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-24T10:27:27.800

尝试这样的事情：

```
<div style="display:table-cell; vertical-align:middle">
 "your content"
</div> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-24T10:31:32.213

使用边距顶部

示例 CSS

```
 #id_immagine{
  margin:0 auto;
   } 
```

# plane - 通过给定的交线和另一个平面的法线找到一个平面的法线

> ID：10296016
> 
> 赞同：-1
> 
> 时间：2012-04-24T10:20:24.333
> 
> 标签：plane

通常，两个平面 A 和 B 的交点（不平行）将返回一条线 L。我知道如何实现这一点，但是如果现在给定一个平面 A 和相交线 L 来找到平面 B。有解决方案吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:32:47.863

不，不可能找到（或“恢复”）平面 B，因为无限数量的平面 (Bs) 可以与平面 A 正好在线 L 处相交，但仍然允许围绕它“铰接”（或旋转） （当然在一定的范围内，以免像你提到的那样平行）。

您需要更多信息来定义一个平面（三个点、一个点和一条线、一个点和一个法线向量，有关更多信息，请[参见此处](http://en.wikipedia.org/wiki/Plane_%28geometry%29#Line_of_intersection_between_two_planes)）。此外，如果您从事计算机图形学工作， [Paul Bourke 的网站确实包含大量信息。](http://paulbourke.net/geometry/)

也许有一种方法可以从您的问题中获取这一点信息（？）

（顺便说一句，我不确定这是 Stackoverflow 的问题，也许它更适合数学部分）

# c# - 从 WPF 窗口获取 System.Windows.Forms.IWin32Window

> ID：10296018
> 
> 赞同：17
> 
> 时间：2012-04-24T10:20:42.727
> 
> 标签：c#, wpf, winforms

我正在编写一个 WPF 应用程序，我想利用[这个库](http://www.codeproject.com/Articles/21276/Vista-TaskDialog-Wrapper-and-Emulator)。

我可以`IntPtr`通过使用获得一个窗口

```
new WindowInteropHelper(this).Handle 
```

但这不会转换为`System.Windows.Forms.IWin32Window`，我需要显示这个 WinForms 对话框。

我该如何`IntPtr`投到 `System.Windows.Forms.IWin32Window`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-24T10:55:28.680

**选项1**

IWin32Window 只需要一个`Handle`属性，因为您已经拥有 IntPtr，所以实现起来并不难。 [创建一个](http://ryanfarley.com/blog/archive/2004/03/23/465.aspx)实现 IWin32Window 的包装类：

```
public class WindowWrapper : System.Windows.Forms.IWin32Window
{
    public WindowWrapper(IntPtr handle)
    {
        _hwnd = handle;
    }

    public WindowWrapper(Window window)
    {
        _hwnd = new WindowInteropHelper(window).Handle;
    }

    public IntPtr Handle
    {
        get { return _hwnd; }
    }

    private IntPtr _hwnd;
} 
```

然后你会得到你的 IWin32Window 像这样：

```
IWin32Window win32Window = new WindowWrapper(new WindowInteropHelper(this).Handle); 
```

或（响应 KeithS 的建议）：

```
IWin32Window win32Window = new WindowWrapper(this); 
```

**选项 2**（感谢 Scott Chamberlain 的评论）

使用现有的实现 IWin32Window 的 NativeWindow 类：

```
NativeWindow win32Parent = new NativeWindow();
win32Parent.AssignHandle(new WindowInteropHelper(this).Handle); 
```

# asp.net-mvc - 使用 WEB API 的自定义授权

> ID：10296019
> 
> 赞同：1
> 
> 时间：2012-04-24T10:20:49.913
> 
> 标签：asp.net-mvc, asp.net-mvc-4, wcf-web-api

我已经使用 MVC WEB API 实现了一项服务，并且我实现了一种自定义方式来验证请求。这是它的样子：

```
public HttpResponseMessage GetTest()
    {
        try
        {                
            IDBModel DAO = new DBModelDAO();
            if (DAO.IsApiKeyValid(Request.Headers.Authorization.Parameter))
            {
                return new HttpResponseMessage(HttpStatusCode.OK);
            }
        }
        catch (Exception e)
        {
            System.Diagnostics.Trace.WriteLine(e.Message);                
        }
        return new HttpResponseMessage(HttpStatusCode.Unauthorized);
    } 
```

但是，如果身份验证失败，我将被重定向到此 uri：/Account/Login?ReturnUrl=%2ftest

我不希望这样，因为我不使用网络浏览器进行身份验证。

如何禁用此功能？

非常感激您的帮忙！

佐利

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T14:02:57.887

那个部分：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

必须评论，它不会重定向

# android - 无法从 Android 上的 xmpp 服务器获取公共房间列表？

> ID：10296022
> 
> 赞同：4
> 
> 时间：2012-04-24T10:20:59.693
> 
> 标签：android, xmpp, android-2.2-froyo, smack, asmack

大家好，我是 android 新手，我目前被困在这个问题上。我必须返回在 xmpp 服务器上创建的公共房间列表。我遇到的问题是下面的代码适用于java，但在android的情况下存在空指针异常。对此的任何帮助将不胜感激。

我正在使用 openfire 服务器并在本地机器上对其进行测试，这就是我使用 ip 地址而不是域名的原因。

我正在使用 JAVA 的 smack 库和 android 的 Asmack 库

```
String server_name = "192.168.3.113";
    ConnectionConfiguration config = new ConnectionConfiguration(
            server_name, 5222);
    XMPPConnection connection = new XMPPConnection(config);
    try {
        connection.connect();

        connection.login("s1", "123");

        Collection<HostedRoom> rooms = MultiUserChat.getHostedRooms(
                connection, "conference.geekoid");
        for (HostedRoom room : rooms) {
            System.out.println(room.getName());
        }

    } catch (XMPPException e) {
        System.out.println("Error" + e.getMessage() + "\n"); //for JAVA
                    log.e("Android Error",e.getmessage());  // For Android
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T15:24:28.543

问题是必须在创建**任何**连接之前评估[ServiceDiscoveryManager 类的静态块。](http://fisheye.igniterealtime.org/browse/smack/trunk/source/org/jivesoftware/smackx/ServiceDiscoveryManager.java?hb=true#to63)在 smack 中，这是通过配置文件完成的，但这种方法不适用于 Android，因此不适用于 aSmack。

 **答案中提到的解决方法有点难看，因为您*真的不想*使用构造函数来获取 SDM 对象，而是应该使用 get() 方法。但是 get() 方法只有在实际为连接创建了 SDM 时才有效。

因此，为了在 Android 上正确初始化 SDM，您需要在创建第一个 (XMPP)Connection 对象之前调用[完整的 forName 表示法](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String,%20boolean,%20java.lang.ClassLoader%29)来初始化类的静态块。

```
Class.forName("org.jivesoftware.smackx.ServiceDiscoveryManager", true, ClassLoader.getSystemClassLoader()): 
```

这被跟踪为[aSmack 问题 8](https://github.com/Flowdalic/asmack/issues/8)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T07:16:13.630

**我找到了问题的解决方案。**

Android asmack 库在 **getHostedRooms(Connection connection, String serviceName)**方法中使用它

```
ServiceDiscoveryManager discoManager =ServiceDiscoveryManager.getInstanceFor(connection); 
```

我把它换成了

```
ServiceDiscoveryManager discoManager = new ServiceDiscoveryManager(connection); 
```

对于那些对这种方法在哪里感到困惑的人

**包：org.jivesoftware.smackx.muc**

**文件：MultiUserChat.java**

完成此操作后。我们必须在 Android 中注册所有提供程序，其详细信息可在[此处](http://community.igniterealtime.org/message/201866#201866)找到。这些提供程序在使用 JAVA 的 smack 库（在 java 开发中）时会自动注册，但在 Android 中我们必须自己注册。**

# php - 多文件上传 PHP Ajax

> ID：10296025
> 
> 赞同：-3
> 
> 时间：2012-04-24T10:21:07.993
> 
> 标签：php, ajax, file-upload

我正在寻找一个 ajax php 上传器来上传多个文件，我找到了一些，但不幸的是它们无法在 IE 上成功运行，因为 IE 7 和 8 不支持 HTML5。

Uploadify & Plupload 与 IE 中的 flash 一起工作正常，但在上传文件后它们没有返回任何内容。作为响应，我想要修改后的文件名，因为在上传文件之前我会修改文件名。

任何帮助或建议都会受到高度评价。

谢谢高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:38:12.260

Please refer this link for multiple file uploads using uploadify [php - file uploads using uploadify](https://stackoverflow.com/questions/9717818/php-file-uploads-using-uploadify/9718294#9718294)

and in that link(in uploadify.php) replace the line

```
$fna = $_FILES['Filedata']['name']; 
```

with

```
$fna = "your modified new filename"; 
```

# jquery - 如何将值从控制器函数返回到视图中的 Ajax

> ID：10296027
> 
> 赞同：1
> 
> 时间：2012-04-24T10:21:10.413
> 
> 标签：jquery, ajax, json, return, return-value

嗨，我基本上是 Ajax 的新手，并且很难编写它..

我想将 src 值分配给从数据库中获取的 Iframe
表是 HobbyMasters

```
HobbyName
HobbyUrl 
```

我现在编写一个函数并从表中获取 url，当我单击显示为链接的 Hobbyname 时，我希望将该 url 加载到 iframe 中。

我在我的视图中编写了以下 ajax 函数：

```
 <script type="text/javascript">
  $(document).ready(function () {
      $('a').click(function (e) {
          e.preventDefault();
          var filename = $(this).text();
          var Hobbyurl = '@Url.Action("FetchUrlByHobbyName")';
          $.ajax({
              type: "POST",
              url: Hobbyurl,
              data: { data: filename },
              success: function (returndata) {
                  jsonObj = jQuery.parseJSON(returndata)
                  $('iframe').attr('src', jsonObj.url);
              }
          });
      });
  });
  </script> 
```

控制器内部的 FetchUrlByHobbyName() 函数代码：

```
[HttpPost]
public ActionResult FetchUrlByHobbyName(string Hobbyurl)
{
    HobbyMasters hobbymaster = new HobbyHomeService().FetchHobbyMasterByHobbyName(Hobbyurl);

    string url=hobbymaster.InformationUrl;
    if (HttpContext.Request.IsAjaxRequest())
        return Json(url);
    return View();
} 
```

返回后它给了我一个异常错误。可能是我返回获取值的方式不正确。**请告诉我如何将值返回给 Ajax**函数

# ruby-on-rails - rails 中的 attr_accessor 问题

> ID：10296032
> 
> 赞同：1
> 
> 时间：2012-04-24T10:21:27.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个应用程序，其中授权是一个模型。provider 是模型的一个字段。我已经为提供者字段定义了 attr_accessor

```
attr_accessor :provider 
```

虽然它不需要，但在我试图为模型创建记录时，我在不知不觉中定义了它并遇到了问题

```
Authorization.create(:user_id => user.id, :uid => hash['uid'], :provider =>
hash['provider']) 
```

正在为 user_id 分配 user.id 的值（用户是我函数中的变量），但始终为提供者分配 null（哈希 ['provider'] 包含一个值。

当我删除 attr_accessor 时，一切正常，我的问题得到了解决。但为什么它以前不起作用？我只是想知道是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:33:19.047

我认为您可能打算定义一个[attr_accessible](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)（假设提供者是您数据库中的一个字段。）

attr_accessor 是一种 ruby​​ 方法，用于在类（或在 rails 的上下文中，虚拟属性）上创建属性（具有实例变量、getter 和 setter）。您想在模型上创建一个，这就是 attr_accessible 的用途。

有关更详细的说明，请参阅[http://www.ruby-forum.com/topic/95220 。](http://www.ruby-forum.com/topic/95220)

# php - PHP不必要地修剪空格？

> ID：10296037
> 
> 赞同：0
> 
> 时间：2012-04-24T10:21:44.223
> 
> 标签：php, string, character, trim

假设我有一个变量`$foo`：

```
$foo = "   a          a             blablabla          a        a"; 
```

但是当我执行`var_dump($foo)`以下操作时会输出：

```
string(57) " a a blablabla a a" 
```

就像长度（在这种情况下为 57）它是正确的并且它计算空格，但它不显示它们。如何显示*完整*的字符串，包括其他字符之间的多个空格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:24:55.210

如果您使用`<pre>`标记，则文本会在您键入时显示在浏览器中。几个链接：

*   [http://www.tizag.com/htmlT/htmlpre.php](http://www.tizag.com/htmlT/htmlpre.php)
*   [http://www.htmlcodetutorial.com/linepar/_PRE.html](http://www.htmlcodetutorial.com/linepar/_PRE.html)

您还可以用不间断空格替换空格`&nbsp;`。

Web 浏览器会忽略代码中的大量空白，这很好。否则我们将无法使用我们的源代码或使用换行符...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:26:07.850

您是否有机会在浏览器中执行此操作。如果是这样，您需要这样做。

```
<pre>
<?php echo var_dump($foo); ?>
</pre> 
```

因为我只是在命令行中尝试过，我得到了带空格的输出。浏览器不处理多个空格，它们会缩小它们。如果您希望浏览器处理多个空格，则必须使用`<pre>`标签内的输出或使用`&nbsp;`而不是空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:31:47.880

就像是`echo str_replace(' ', '&nbsp;',$test);`

# ruby-on-rails - 是否可以使用 Capybara Webkit 进行 facebook 连接

> ID：10296038
> 
> 赞同：2
> 
> 时间：2012-04-24T10:21:44.453
> 
> 标签：ruby-on-rails, ruby, capybara, capybara-webkit

是否可以使用 Capybara-webkit 驱动程序进行 facebook 连接？

我在网上看到的所有示例都使用 Capybara -webkit 目前不支持的“within_window”方法（例如：[https ://gist.github.com/1187574）。](https://gist.github.com/1187574)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T00:01:24.213

我也只找到了“within_window”示例，但经过更多研究后，我在capybara [-webkit repo上发现了一个最近的](https://github.com/thoughtbot/capybara-webkit)[pull request](https://github.com/thoughtbot/capybara-webkit/pull/314) ，它解决了这个[问题](https://github.com/thoughtbot/capybara-webkit/issues/129)并增加了对 capybara-webkit gem 的支持`within_window`

可能最好的方法是从 Github 而不是 ruby​​gems 获取 gem。

```
gem "capybara-webkit", git: "https://github.com/thoughtbot/capybara-webkit.git" 
```

让我知道它是否有效。我还没有真正测试过。

# javascript - 为 iPad 制作 2 窗格 Web 应用程序的最佳方式

> ID：10296043
> 
> 赞同：-1
> 
> 时间：2012-04-24T10:21:56.420
> 
> 标签：javascript, ios, ipad

我正在制作一个 iPad 网络应用程序，客户希望它有两个窗格（都单独滚动），就像 iPad 设置应用程序一样。在保持与旧版本 iOS 的兼容性的同时，最好的方法是什么？

谢谢！

编辑：我忘了提到它应该看起来有点原生，所以没有两个手指滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:37:27.250

这可以通过让 2 个`<div>`元素分别占据 50% 的屏幕并单独控制它们的溢出来滚动来完成。

在其最简单的 css 中，如下所示就足够了：

```
#left{
    width:50%;
    height:300px;
    float:left;
    overflow-y:scroll   
}

#right{
    width:50%;
    height:300px;
    float:left;
    overflow-y:scroll    
} 
```

我将它们分开，以便您可以单独控制左侧和右侧（即，您可能希望左侧为 40%，右侧为 60%。或者您可能希望左侧固定而右侧滚动）。

这是一个演示此工作的 jsfiddle：http: [//jsfiddle.net/tFJeS/1/](http://jsfiddle.net/tFJeS/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:46:44.473

您可以只使用两个容器元素（例如 DIV）并使用以下样式

```
#first,
#second {
  float: left;
  height: 500px; // or whatever fits your needs
  width: 50%;
  overflow-y: scroll   
} 
```

请注意，在 Web 应用程序中使用它时，iOS 溢出内容需要用两根手指滚动，而不能像在本机应用程序中那样用一根手指滚动。另请参阅[Safari Web 内容指南](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)

# javascript - 以 HTML 格式获取移动屏幕上溢出（放大）图像的可见部分（坐标）

> ID：10296045
> 
> 赞同：3
> 
> 时间：2012-04-24T10:21:59.367
> 
> 标签：javascript, jquery, html, canvas, cordova

我正在用 HTML / javascript 制作一个移动应用程序，用户在某些时候可以捏合（放大）图像以显示图像的特定部分。由于缩放，图像只有可见部分（众所周知），而不是整个图像。当触摸事件触发时（当用户从​​捏合中抬起手指时），我想获得那个可见部分（*用户放大了多少以及图像的哪一部分）。*

我想了很多办法，想听听你的意见。

*   使用 pageXOffset 和 pageYOffset （但我找不到用户做了多少缩放）
*   使用画布并手动处理捏合效果
*   截取放大后的屏幕截图（如果可能）并将其与原始图像进行比较，以找到可见部分。

我正在用 PhoneGap 包装应用程序，所以我可以编写本机代码，如果这有任何帮助的话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:01:03.080

zoom 是一个带有 2 个手指的手势，因此您必须使用 event.targetTouches.length == 2 来监听 touchmove，然后从每个手指读取 X 和 Y 坐标

图像缩放中心将是 event.targetTouches[0].pageX - event.targetTouches [1](https://i.stack.imgur.com/3MFHT.png) .pageX 和 event.targetTouches[0].pageY - event.targetTouches [1](https://i.stack.imgur.com/3MFHT.png) .pageY 与您的滚动位置或图像位置有关（注意 + 或-)

你的比例因子应该是vectorLengthCurrent-vectorLengthStart

请参阅[http://www.html5rocks.com/en/mobile/touch/](http://www.html5rocks.com/en/mobile/touch/)

图片：![概述](../Images/484b3a1cce742a31561c14525546394c.png)

例子：

图片：左：-100px | startFinger[0].pageX: 50px | currentFinger[0].pageX: 55px | startFinger [1](https://i.stack.imgur.com/3MFHT.png) .pageX: 150px | currentFinger [1](https://i.stack.imgur.com/3MFHT.png) .pageX: 140px

所以中心应该是： startFinger [1](https://i.stack.imgur.com/3MFHT.png) .pageX - startFinger[0].pageX - left （仅当 startFinger [1](https://i.stack.imgur.com/3MFHT.png) .pageX 更大 | Y 以同样的方式）

向量长度：sqrt(x^2 + y^2)；

# vb.net - 如何在不使用匿名类型的情况下使用 Linq to entity 对集合进行分组？

> ID：10296049
> 
> 赞同：1
> 
> 时间：2012-04-24T10:22:13.357
> 
> 标签：vb.net, linq-to-entities, grouping

该[文档](http://msdn.microsoft.com/en-us/library/bb386922.aspx)有一个关于对多个属性进行分组的示例：

```
Dim custRegionQuery = From cust In db.Customers _
    Group cust.ContactName By Key = New With _
        {cust.City, cust.Region} Into grouping = Group

For Each grp In custRegionQuery
    Console.WriteLine(vbNewLine & "Location Key: {0}", grp.Key)
    For Each listing In grp.grouping
        Console.WriteLine(vbTab & "{0}", listing)
    Next
Next 
```

假设我有一个真正的类型（即不是匿名的），它具有键的每个元素的属性，以及组的属性，所以有点像：

```
Public Class CustomerRegionGroup

    Public Sub New(city As String, region as String, customers As IEnumerable(Of Customer))
        Me.City = city
        Me.Region = region
        Me.Customers = customers
    End Sub

    Public Property City As String
    Public Property Region As String
    Public Property Customers As IEnumerable(Of Customer)
End Class 
```

是否可以将原始查询重写为仅返回`IEnumerable(Of CustomerRegionGroup)`，或者我是否必须使用匿名类型，并对第一个查询的结果运行第二个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:03:39.700

事实证明它比我尝试过的一些事情要简单得多，因为我不明白你可以这样做：

```
Dim custRegionQuery = From cust In db.Customers _
                      Group By cust.City, cust.Region _
                      Into Group _
                      Select New CustomerRegionGroup(City, Region, Group) 
```

# database - 查询更新整个表

> ID：10296050
> 
> 赞同：0
> 
> 时间：2012-04-24T10:22:13.440
> 
> 标签：database, ms-access

这是我在我的数据库中的查询

```
UPDATE NewCustomer INNER JOIN ACTList ON NewCustomer.NewProvider<>ACTList.Provider SET       NewCustomer.Status = "Denied Not Freemail"; 
```

如您所见，唯一应该更新的记录是 NewCustomer.Provider 不等于 ACTList.Provider 但它实际上正在更新所有字段的记录。

有人能告诉我这是为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:04:42.577

您的查询选择了所有行，因为每一行不等于 ActList 中的至少一行。您可以使用外部联接并检查空值。

```
UPDATE NewCustomer LEFT JOIN ACTList ON NewCustomer.NewProvider = ACTList.Provider SET NewCustomer.Status = "Denied Not Freemail"
WHERE (((ACTList.Provider) Is Null)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:25:52.983

尝试：

```
UPDATE NewCustomer 
SET NewCustomer.Status = "Denied Not Freemail"
FROM NewCustomer INNER JOIN ACTList 
WHERE NewCustomer.NewProvider<>ACTList.Provider; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:29:50.283

试一试（未经测试）。它基本上说`WHERE NewCustomer.NewProvider NOT IN ()`，但更有效。

```
UPDATE NewCustomer 
  SET NewCustomer.Status = "Denied Not Freemail"
LEFT JOIN ACTList ON NewCustomer.NewProvider = ACTList.Provider 
WHERE ACTList.Provider IS NULL 
```

# java - 如何安装蚂蚁？

> ID：10296052
> 
> 赞同：-2
> 
> 时间：2012-04-24T10:22:27.490
> 
> 标签：java, netbeans, ant

我想在我的 Netbeans 中安装 ant。当我在插件中搜索 ant 时，我只看到“Ant 1.8.1 文档插件”。运行ant就足够了吗？

![在此处输入图像描述](../Images/2bea046c9091a85496c83181fa08121e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:27:45.887

正如您截图中的文档所说“[...] 一个补充的 Ant 模块，添加了 Ant 手册 [...]”，所以我认为它不是强制性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:48:28.930

正如您问题的评论中提到的，Netbeans 默认情况下已经随 Ant 一起提供。您应该在同一窗口的“已安装”选项卡下看到它。

# debugging - 构建intel风格的内联汇编代码时如何使gcc编译器保留寄存器？

> ID：10296054
> 
> 赞同：-1
> 
> 时间：2012-04-24T10:22:29.087
> 
> 标签：debugging, gcc, assembly, xcode4, inline-assembly

我正在 Xcode 4 上使用 gcc 编译器构建一些 intel 风格的内联汇编代码。下面列出了部分内联汇编代码：

```
_asm
{   
    mov eax, esp
    sub esp, 116
    and esp, ~15
    mov [esp+112], eax       
} 
```

在 ship 模式下，GCC 将上述 4 行 asm 代码编译为：

```
mov    %esp,%eax
sub    $0x74,%esp
and    $0xfffffff0,%esp
mov    %eax,0x70(%esp) 
```

这正是我想要的。但是，在调试模式下，GCC 会将该代码编译为

```
mov    %esp,%eax
mov    %eax,%esp
mov    %esp,%eax
mov    %eax,-0x28(%ebp)
mov    %esp,%eax
mov    %eax,%esp
sub    $0x74,%esp
mov    %esp,%eax
mov    %eax,-0x24(%ebp)
mov    %esp,%eax
mov    %eax,%esp
**and    $0xfffffff0,%esp**         
**mov    %esp,%eax**        **//changing the value of “eax”**
mov    %eax,-0x24(%ebp)
mov    %esp,%ecx
mov    %ecx,%esp
**mov    %eax,0x70(%esp)**  **//store a “dirty” value to address 0x70(%esp), which is not we want** 
```

解决上述问题的一种方法是使用 AT&T 样式指令重写内联 asm 代码，并将寄存器添加到破坏列表中。但这种方式将是一项非常耗时的工作，因为要重写的代码太……太长了。

有没有其他有效的方法来解决这个问题？让 gcc 编译器知道应该保留寄存器“eax”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:12:22.760

有2种方式：

1.  解决它的最佳方法是使用 gcc 程序集模板功能。然后你可以告诉编译器你在做什么，寄存器分配器不会将你的寄存器用于其他任何事情。

2.  一个快速破解方法是只使用“asm volatile”而不是“asm”，这样 gcc 就不会重新安排该块内的任何指令。您仍然必须告诉 GCC 您正在使用该寄存器，因此它不会在其中存储任何内容。您还应该在 clobber 列表中列出“内存”，以便 gcc 知道它不能信任它可能在您的代码块之前加载的值。

    asm volatile("代码在这里":::"eax", "esp", "memory");

顺便说一句：您的代码正在做一些“坏事”，例如移动 esp，这可能会导致麻烦，除非您确切知道自己在做什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-09-27T14:45:00.073

英特尔风格的块之后的空`asm`块解决了问题，如下所示：

```
__asm volatile {   
    mov eax, esp
    sub esp, 116
    and esp, ~15
    mov [esp+112], eax       
};
__asm__ __volatile__ ("":::"eax", "memory"); 
```

但是，如果您不恢复`%esp`，它将造成严重破坏。

# mercurial - 如何撤消提交拉取

> ID：10296057
> 
> 赞同：1
> 
> 时间：2012-04-24T10:22:47.817
> 
> 标签：mercurial, commit, undo, pull

我今天遇到了我的第一个反复无常的问题。我在我的仓库中，我修改了一个文件，我做了一个

```
hg commit
hg pull 
```

其次是 hg 更新 hg 回滚

修复我所做的，（但实际上我没有推动任何东西）问题是当我进行拉动时（我应该在提交之前做，头部改变了，所以 hg 头部看起来像：

```
- Modif from yesterday
- My modif
- Modif from last week 
```

现在我看到有人也做了另一个修改（通过http接口）。我应该怎么做才能修复我的本地仓库（如果可能的话，修改我的摘要）并在其他 2 个修改之后推送它。

非常感谢。安静令人困惑，在我的“单人”回购中更容易..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:27:16.150

您的本地仓库不需要“修复”。这是一个非常标准的案例，如果您经常使用 Mercurial，您会经常看到。

问题是***多头***。

您可以合并您的头，假设您的工作目录是您的版本并且只有另一个头：

`hg merge`

这将导致合并变更集（就像跨分支合并一样）。

或者您可以启用[rebase 扩展](http://mercurial.selenic.com/wiki/RebaseExtension)以将您的版本重新定位到分支的尖端（另一个头）：

`hg rebase --source<YourVersionNumber> --dest<TipVersionNumber>`

这**不会**导致合并变更集，并且只会将您的更改移植到您指定的变更集之上，就好像它们一直是从该变更集诞生的（因此变基或“新”基）。

多头是一种有趣的内部分支分支......您可以继续检查自己的头并在头之间使用`hg update`. 我们在服务器上阻止每个分支的多个头，所以我们的推送会失败。我建议将多个头保持在本地，因为它们不像分支那样清晰。

我倾向于以以下两种方式之一与 Mercurial 合作：

1.  如果工作规模很大，我会将其分支并遵循持续集成实践（不断将主分支合并到我自己的分支等）。然后，当我对最终结果感到满意时，我会重新合并回 main。
2.  如果工作规模很小，我将简单地针对主分支和“合并”头部每隔一段时间进行一次。我说“合并”，因为我通常使用变基。如果更改很简单并且不太可能发生冲突，则重新设置基础效果很好。

我的硬性规定：如果我不能使用 rebase，我把它放在 main 的一个分支上。

# javascript - 如何制作一个可以对多个元素进行 Hightligt 的 Highligther 工具？

> ID：10296059
> 
> 赞同：-3
> 
> 时间：2012-04-24T10:22:58.493
> 
> 标签：javascript, html, css

所以我确实找到了一款非常好的荧光笔。这个问题是它不能选择一个以上的元素。

```
function changeBGr() {

  var sel = window.getSelection ? window.getSelection() : document.selection.createRange(); //FF:IE 
  if(sel.getRangeAt){ // thats for FF
    var range = sel.getRangeAt(0);
    var newNode = document.createElement("span");
    newNode.setAttribute('style', 'background: red');
    range.surroundContents(newNode);
  } 
  else { //and thats for IE7
  sel.pasteHTML('<span style="background:red">'+sel.htmlText+'</span>');
  }
} 
```

我也看到了这个。[使用 Javascript 更改选定文本的 CSS，](https://stackoverflow.com/questions/3223682/change-css-of-selected-text-using-javascript) 但我无法使其工作：S（是的，我知道我是菜鸟）有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:28:02.357

这看起来像是一个很好的起点：http: [//www.codetoad.com/javascript_get_selected_text.asp](http://www.codetoad.com/javascript_get_selected_text.asp)

# php - 我可以在不在服务器上创建 .doc 的情况下使用 htmltodoc 和 LiveDocx 将 html 页面转换为 pdf 吗？

> ID：10296060
> 
> 赞同：1
> 
> 时间：2012-04-24T10:22:58.803
> 
> 标签：php, html, pdf, doc, livedocx

我正在尝试使用 htmltodoc 类从 html 页面创建 .pdf： [http ://www.phpkode.com/source/s/html-to-doc-classes/html-to-doc-classes /html_to_doc.inc.php](http://www.phpkode.com/source/s/html-to-doc-classes/html-to-doc-classes/html_to_doc.inc.php)

并使用库 LiveDocx（使用 Zend）： [http ://srhwd.com/documentation/moodle/_mail_merge_8php_source.html](http://srhwd.com/documentation/moodle/_mail_merge_8php_source.html)

无需创建 .doc 。这是我的代码：

```
$htmltodoc= new HTML_TO_DOC();

$htmltodoc->createDocFromURL("http://www.youtube.com/","google.doc",false);

$mailMerge = new Zend_Service_LiveDocx_MailMerge(
    array (
        'username' => 'xxxxxxx',
        'password' => 'xxxxxxx'
    )
);

$mailMerge->setLocalTemplate($htmltodoc);

//$mailMerge->setLocalTemplate('template.doc'); Normally, template.doc is registered on server

$mailMerge->createDocument();

$document = $mailMerge->retrieveDocument('pdf');

header('Content-disposition: attachment; filename=document.pdf');

header('Content-type: application/pdf');

echo $document; 
```

但它返回：

> 错误 HTTP 500（内部服务器错误）

有人能帮助我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:50:54.590

如果要将 HTML 转换为 PDF，可以使用 PDF 库，例如：

*   [dompdf](http://code.google.com/p/dompdf/)
*   [tcpdf](http://www.tcpdf.org/)（参见[示例 6](http://www.tcpdf.org/examples.php)）

# ios - 在新 iPad 上，我们如何使用 Retina 显示屏提供的更高分辨率进行绘图？

> ID：10296061
> 
> 赞同：0
> 
> 时间：2012-04-24T10:22:59.273
> 
> 标签：ios, ipad, core-graphics, retina-display

那是因为所有代码似乎只使用旧的 iPad 1 和 iPad 2 坐标值，用于绘制触摸事件。我们如何使用“新值”来获得更高的分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T05:27:40.547

所以 Kai（在问题的评论中）很友好地指出，通过使用浮点数，我们能够达到精度，因此如果我们给 iPad 2 和新 iPad 提供相同的坐标并且它会填满屏幕，但如果我们使用浮点，我们可以实现额外的精度并利用更高的分辨率。

# git - 为什么 git 使用 'rm' 远程和 '-d' 删除分支？

> ID：10296064
> 
> 赞同：0
> 
> 时间：2012-04-24T10:23:08.080
> 
> 标签：git

我发现它在 git 中令人困惑，要删除使用“remote **rm** ”的遥控器......

```
git remote rm myremote 
```

...而删除分支的语法需要**-d**（或**-D**）开关：

```
git branch -d mybranch 
```

这种不一致是否有合乎逻辑的原因（这可能有助于我正确记住它）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:27:59.530

因为创建分支的语法是just `git branch mybranch`，not `git branch add mybranch`。

如果你有一个名为 的分支`rm`怎么办？

# python - 在 Python 解释器中调试代码

> ID：10296067
> 
> 赞同：15
> 
> 时间：2012-04-24T10:23:13.570
> 
> 标签：python, debugging, function, interpreter, functional-testing

我喜欢在*Python 解释器*中测试函数。当我想查看的不仅仅是返回值和副作用时，是否可以在*Python 解释器*中调试函数？

如果是这样，您能否展示基本的调试器操作（**使用参数启动函数、设置断点、下一步、单步执行、观察变量**）？如果不是，您将如何以另一种方式调试函数？

关键是，我只想调试一个将提供参数的特定函数。我不想调试整个模块代码。

谢谢你的建议

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T10:31:58.223

如果你想调试特定的功能，你可以使用这个 -

```
>>> import pdb
>>> import yourmodule
>>> pdb.run('yourmodule.foo()') 
```

通过命令行。`pdb.set_trace()`应该添加到你的函数中以打破那里。

可以在此处查看有关 pdb 的更多信息 - [http://docs.python.org/library/pdb.html](http://docs.python.org/library/pdb.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T10:26:00.810

请参阅 pdb 模块。插入代码：

```
import pdb
pdb.set_trace() 
```

...创建一个断点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-20T15:40:54.317

code-to-debug 不需要修改为包含`pdb.set_trace()`. 该调用可以在代码调试之前直接在解释器中进行：

```
>>> import pdb
>>> pdb.set_trace(); <code-to-debug> 
```

例如，给出`test_script.py`以下代码：

```
def some_func(text):
    print 'Given text is {}'.format(repr(text))
    for index,char in enumerate(text):
        print ' '*index, char 
```

`some_func`使用调试器命令 step-into ( `s`)、next ( `n`) 和 continue ( )进行调试的解释器会话`c`如下所示：

```
>>> import pdb
>>> import test_script
>>> pdb.set_trace(); test_script.some_func('hello')
--Call--
> c:\src\test_script.py(1)some_func()
-> def some_func(text):
(Pdb) s
> c:\src\test_script.py(2)some_func()
-> print 'Given text is {}'.format(repr(text))
(Pdb) n
Given text is 'hello'
> c:\src\test_script.py(3)some_func()
-> for index,char in enumerate(text):
(Pdb) c
 h
  e
   l
    l
     o
>>> 
```

`pdb`有关如何使用调试器的更多信息，请参阅该模块的文档：http: [//docs.python.org/library/pdb.html](http://docs.python.org/library/pdb.html)

此外，在使用调试器时，该`help`命令提供了一个很好的命令列表并`help <command>`提供特定于给定命令的帮助。

# asp.net-mvc - 将参数发送到主控制器索引操作？

> ID：10296070
> 
> 赞同：1
> 
> 时间：2012-04-24T10:23:20.837
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我的要求是什么；如果我输入 www.mysite.com - 它会加载首页。但如果我输入 www.mysite.com/john - 它会返回 john 的个人资料页面。

John 的个人资料最初位于 /Profile/John 中，并且工作正常。但要求是 www.mysite.dom/John。

我尝试了很多方法都没有成功。如果有人可以帮助我，那就太好了。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:27:59.533

定义两条路线。

先到`"/Profile/{name}"`，再到`"/{name}"`，指向同一个动作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T17:32:15.287

如果你想使用同一个控制器并设置路由来响应参数，你也可以像这样设置你的路由

```
routes.MapRoute(
                name: "Meeting",
                url: "{name}",
                defaults: new
                {
                    controller = "Home",
                    action = "Welcome"
                }
            );
routes.MapRoute(
                name: "Default",
                url:"",
                defaults: new
                {
                    controller = "Home",
                    action = "Index"
                }
            ); 
```

我的 HomeController 看起来像

```
 public void Welcome(string name)
        {
            ViewBag.Title = "Home Page";
        }

        public ActionResult Index()
        {
            return View();
        } 
```

# wcf - WCF Duplex - 向每个客户端推送不同的通知？

> ID：10296078
> 
> 赞同：1
> 
> 时间：2012-04-24T10:23:44.267
> 
> 标签：wcf, push-notification, authentication

> **可能重复：**
> [WCF Duplex - 向每个客户端推送不同的通知？](https://stackoverflow.com/questions/10297892/wcf-duplex-push-different-notifications-to-each-client)

我正在设计我的所有客户都将连接到的 2 个 WCF 服务。其中一项服务将是通知服务。

我希望每个客户端都连接到服务，订阅它，然后使用双工回调接口接收通知（服务将触发客户端中的“通知”操作）。

这是我的设计理念：

![在此处输入图像描述](../Images/c6cf7baff791d46b856fc66957b145ed.png)

我的问题是：当每个客户端连接到我的服务时，我将根据数据库中的“用户”表对其进行验证（我将使用**UserNamePasswordValidator**并实现“验证”功能）。

要求：每个用户需要根据数据库中定义的规则接收不同的通知。

假设我的服务检测到数据库中的更改（将“葡萄酒”类型的新产品插入到数据库中） - 它现在需要通知客户端。但并非所有客户都需要被告知这一点。只有要求更新葡萄酒的客户才会收到通知。

我该怎么做呢 ？

一旦客户端连接并使用**UserNamePasswordValidator**进行验证- 我是否有某种“ClientID”附加到该客户端？

我知道我不应该在我的服务中存储“客户端端点+客户端 ID”的本地列表，因为这意味着我必须使用单例服务，对吗？

那么如何为每个连接到服务的客户端存储该客户端的 ID 呢？

我需要知道每个客户端的 ID，以便当数据库中的事件发生时——我可以遍历每个连接的客户端——检查每个客户端是否要求被告知该事件——如果是的话——通知他事件。

希望我的问题被理解...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:57:18.627

我认为在实践中很难做到这一点。

一个可能的解决方案将涉及维护您的服务回调合同的许多不同列表并公开相同数量的订阅操作。因此，您的客户将为他们感兴趣的每个事件调用一个订阅操作，然后您的服务将能够为每个订阅的事件调用一次客户回调合约。

但是，您必须提前确切地知道您的客户想要订阅什么，因为这些信息将被编入公开的服务合同中，因此更改成本很高。

我不知道如何将其链接到数据库中定义的规则。

处理此问题的另一种方法是迁移到像 NServiceBus 这样的 pubsub 消息传递平台，但这意味着不再使用 WCF。

# java - 时区无关

> ID：10296083
> 
> 赞同：0
> 
> 时间：2012-04-24T10:24:06.263
> 
> 标签：java, jaxb, timezone

我有一个转换 DateTime 的类，如下所示：

```
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.TimeZone;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class DateFormatConverter extends XmlAdapter<String, Date> {

  private static final String XML_DATE_PATTERN = "yyyy-MM-dd HH:mm:ss.SSS z";

  @Override
  public Date unmarshal(String xmlDate) throws Exception {
    if (xmlDate == null || xmlDate.length() == 0) 
    {
      return null;
    }    
    SimpleDateFormat xmlDateFormat = new SimpleDateFormat(XML_DATE_PATTERN);    
    return xmlDateFormat.parse(xmlDate);
  }

  @Override
  public String marshal(Date date) throws Exception {
    if (date == null) {
      return "";
    }    
    SimpleDateFormat xmlDateFormat = new SimpleDateFormat(XML_DATE_PATTERN);    
    return xmlDateFormat.format(date);
  }
} 
```

我的单元测试：

```
public void testMarshalDate() throws Exception {

    DateFormatConverter converter = new DateFormatConverter();
    SimpleDateFormat dateFormater  = new SimpleDateFormat("MM-dd-yyyy");
    Date date = dateFormater.parse("10-13-2011");

    String marshalledDate = converter.marshal(date);

    String timezone = Calendar.getInstance().getTimeZone().getDisplayName(true, TimeZone.SHORT);

    System.out.println("Default Timezone:" + TimeZone.getDefault().getDisplayName(true, TimeZone.SHORT));
    System.out.println("Timezone of formatter:" + dateFormater.getTimeZone().getDisplayName(true, TimeZone.SHORT));
    System.out.println("Timezone:" + timezone);
    System.out.println("MarshaledDate: " + marshalledDate);

    assertEquals("Marshalled date string is not expected.", "2011-10-13 00:00:00.000 " + timezone, marshalledDate);
  } 
```

控制台中的输出是：

```
Default Timezone:ICST
Timezone of formatter:ICST
Timezone:ICST
MarshaledDate: 2011-10-13 00:00:00.000 ICT 
```

例外是：

```
Marshalled date string is not expected. expected:<...S...> but was:<......>
junit.framework.ComparisonFailure: Marshalled date string is not expected. expected:<...S...> but was:<......> 
```

为什么封送日期具有时区 ICT，而我所在位置的默认时区是 ICST。我应该如何修复以使时区独立？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:31:03.920

我怀疑您看到“时区的一部分”和“时区名称”之间的区别。例如，英国的时区使用 GMT 和 BST，两者都是ID 为“Europe/London”的时区的一部分，尽管*我*不知道在这种情况下显示名称是什么。

如果您在此处*不需要*默认时区，请在创建时将其指定为格式中的 UTC 之类的内容。（`setTimeZone`在构造函数调用之后调用。）

# xml - 我无法添加复杂类型标签的属性

> ID：10296084
> 
> 赞同：0
> 
> 时间：2012-04-24T10:24:06.293
> 
> 标签：xml, xsd

我正在做作业，我在谷歌上找，但没有找到任何答案。

我有这个xml：

```
<?xml version="1.0" encoding="utf-8"?>
<book isbn="0836217462" xmlns="http://www.domain.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.domain.com 15.07.shema.xsd">
    <title>Being a Dog Is Full-Time Job</title>
    <author>Charles M. Schulz</author>
    <character>
        <name>Snoopy</name>
        <friend-of>Peppermint Patty</friend-of>
        <since>1950-10-04</since>
        <qualification>extroverted beagle</qualification>
    </character>
    <character>
        <name>Peppermint Patty</name>
        <since>1966-08-22</since>
        <qualification>blog, brash and tomboyish</qualification>
    </character>
</book> 
```

我写了一个 XML shema：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema 
    xmlns="http://www.domain.com"
    targetNamespace="http://www.domain.com"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified"
    id="index.xml">
    <xs:element name="book">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="title" type="xs:string" />
                <xs:element name="author" type="xs:string" />
                <xs:element name="character">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="name" type="xs:string" />
                            <xs:element name="friend-of" type="xs:string" minOccurs="0" />
                            <xs:element name="since" type="xs:date" />
                            <xs:element name="qualification" type="xs:string"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

但我的问题是我不知道如何添加标签书的属性。你能给我一些建议吗？我看到了一些示例，但没有一个具有复杂的类型和属性。

# java - 响应后刷新视图

> ID：10296086
> 
> 赞同：0
> 
> 时间：2012-04-24T10:24:16.287
> 
> 标签：java, spring, spring-mvc, page-refresh

在我的@RequestMapping POST 方法之一中，我需要返回 HttpServletResponse（这是一个 xml 文件）并且我想刷新视图。通常我只会返回路径，但在这种情况下，它会附加到用户正在下载的 xml 文件中。有没有办法先关闭并发送响应然后生成（刷新）视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:37:07.410

I would say no, it's not. Not a 100 percent sure though. You could try to send the file and also set the redirect header in your response. I didn't try it just now but I guess you will just be redirected. Really depends on the browser though. A browser could decide to still download the file.

Once you sent the response a new request needs to be generated by the client, so there is no way to close it server-side and just create a new one.

I would suggest a solution using Javascript. Either AJAX or just setting the current location twice (first the download, then the new view). I'm not sure, I guess via `location.href`

Let me know if you need an actual code example, as it would take me some time to manufacture something.

# java - 通过启动脚本启动 Jetty 不起作用

> ID：10296095
> 
> 赞同：2
> 
> 时间：2012-04-24T10:25:24.887
> 
> 标签：java, jetty, init.d

我在通过启动命令 /etc/init.d/jetty 启动 Jetty 时遇到问题。当我执行命令时，会生成以下输出：

```
/etc/init.d/jetty start

Starting Jetty servlet engine.: 
Jetty Rotate logs
Jetty servlet engine started, reachable on http://jagadguru:80/.: jetty. 
```

`java -jar start.jar`当我输入我的 Jetty 目录时，它会成功启动。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T18:21:26.927

This is likely a file permission issue. Even if you are running the start script with sudo, the script defines a jetty user (default is jetty). I had an issue similar to this where my permissions on /tmp prevented jetty from creating a file there. I adjusted the permissions on /tmp and all is well! The jetty user also needs permissions on the jetty folder of course.

Also, for checking if Jetty is finding java correctly, run sudo service jetty check

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:04:17.897

由于某些工作或日志文件夹的权限错误，这可能是一个问题。我假设启动脚本尝试更改用户，因此与通过“java -jar”运行 Jetty 时使用的权限不同。

另一种可能性是您没有设置 JAVA_HOME 并且启动脚本找不到您的 java bin。

请附上某种日志文件，因为如果没有更详细的信息，真的很难说更多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T08:54:09.310

[正如这里](https://raspberrypi.stackexchange.com/questions/3710/running-jetty-webserver)回答的那样，Jetty 的默认配置`/etc/default/jetty`只允许来自 的连接`localhost`，您需要设置`JETTY_HOST`为`0.0.0.0`允许 Jetty 接受来自任何主机的连接。

将以下行添加到`/etc/default/jetty`：

```
JETTY_HOST 0.0.0.0 
```

# php - php从类文件列表中创建对象

> ID：10296097
> 
> 赞同：1
> 
> 时间：2012-04-24T10:25:34.857
> 
> 标签：php, class, object, auto-generate

我的项目中有包含文件的目录 CLASSES。

```
../classes/class.system.php
../classes/class.database.php
... 
```

我拉出每个类并使用以下代码将其包含到主 index.php 中：

```
// load classes
foreach (glob("classes/class.*.php") as $filename) {
    require_once $filename;
} 
```

然后我创建（手动编写）对象，例如：

```
$system = new System();
$database = new Database();
... 
```

问：如何在不写入目录的情况下从目录 CLASSES 中的文件列表中自动为每个类生成对象？

感谢您的答案和代码。

## 编辑：

**我的工作解决方案**：

```
// load classes
foreach (glob("classes/class.*.php") as $filename) {
    require_once $filename;
    $t = explode(".",$filename);
    $obj = strtolower($t[1]);
    $class = ucfirst($t[1]);
    ${$obj} = new $class();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:28:38.080

如果您遵循典型的模式，同时创建这些文件，例如

> `class.<classname>.php`

然后

```
foreach (glob("classes/class.*.php") as $filename) {
    require_once $filename;
    $t = explode(".",$filename);
    ${strtolower($t[1])}= new ucfirst($t[1])(); // automatically create the object        

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:26:36.913

我不认为`glob`在需要或不需要时加载所有类并包括它们是有效的或好的主意性能明智。如果你有`500 different classes ???`

你为什么不利用`PHP`自动加载看到[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)只会加载你需要的类

例子

```
function __autoload($className) {
    require_once "classes/class." . $className . ".php";
}

$system = new System();
$database = new Database(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:03:50.050

```
// load classes and create objects
foreach (glob("classes/class.*.php") as $filename) {
    require_once $filename;
    $t = explode(".",$filename);
    $obj = strtolower($t[1]);
    $class = ucfirst($t[1]);
    // create object for every class
    ${$obj} = new $class();
} 
```

# jsp - 将自定义对象从 servlet 传递到 JSP

> ID：10296098
> 
> 赞同：6
> 
> 时间：2012-04-24T10:25:43.713
> 
> 标签：jsp, session

我想将 Student 类型的自定义对象从 servlet 传递给 JSP。我创建了一个学生 bean 类。Student 包含 2 个属性 firstname 和 lastName。

学生豆：

```
import java.io.Serializable;

public class Student implements Serializable {

    public Student() {
    }

    String firstName;
    String lastName;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

} 
```

用于从用户获取 FirstName 和 LastName 的 HTML 文件：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>
    <form id="myForm" method="POST" action="MyFormServlet">
        FirstName<input type="text" id="firstName"  name="FirstName"/><br>
        LastName<input type="text" id="lastName" name="LastName"/><br>
        <button type="submit" />Submit</button>
    </form>
</body>
</html> 
```

小服务程序代码：

```
import javax.servlet.RequestDispatcher;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

    public class MyFormServlet extends HttpServlet {

        @Override
        protected void doPost(HttpServletRequest request,
                HttpServletResponse response) {

            Student s = new Student();
            s.setFirstName(request.getParameter("FirstName"));
            s.setLastName(request.getParameter("LastName"));

            HttpSession session =request.getSession();
            session.setAttribute("student", s);

            try {
                RequestDispatcher rd = getServletContext().getRequestDispatcher("/myJsp.jsp");
                rd.forward(request, response);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

    } 
```

myJsp.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
    <body>
        <%
            // I want to do something like this :   
            //Student student =(Student)session.getAttribute("student");
            //String fullName=student.firstName + student.lastName;
        %>      
        <h1><%=fullName%></h1>
    </body>
</html> 
```

我想获取“学生”对象，访问其属性并将其存储在 JSP 变量中以供进一步处理。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T15:05:42.673

The `setAttribute()` method on `request`, `session` and `servletContext` will already make it available as a [JSP](https://stackoverflow.com/tags/jsp/info)/[EL](https://stackoverflow.com/tags/el/info) variable by the attribute name.

In your particular case, with the following line in the servlet,

```
session.setAttribute("student", s); 
```

it's available in JSP/EL as `${student}`. So, just this should do:

```
<body>
    <h1>${student.firstName} ${student.lastName}</h1>
</body> 
```

If you want to store it as another variable in JSP so that you can reuse it multiple times, use [JSTL](https://stackoverflow.com/tags/jstl/info) `<c:set>`.

```
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
...
<body>
    <c:set var="fullName" value="${student.firstName} ${student.lastName}" />
    <h1>${fullName}</h1>
</body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T12:07:20.170

如果不需要在整个会话中使用，您应该将属性传递给请求范围。在 Servlet 中，

```
 request.setAttribute("student", s); 
```

在 JSP 中，

```
Student student =(Student) request.getAttribute("student");
String fullName = "Default";
if(student!=null){
 fullName=student.firstName +" " + student.lastName;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-23T06:33:27.753

不必使用**request.setAttribute()**来发送数据。您也可以为此使用**HttpSession 。**首先，您必须像已经完成的那样设置它。

```
HttpSession session =request.getSession();
session.setAttribute("student", s); 
```

现在您可以使用 getAttribute() 在 jsp 中取回它

```
Student student =(Student) session.getAttribute("student"); 
```

现在你可以随心所欲地和你的学生一起玩了。（您可能希望将 Student 类导入 jsp。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-16T09:56:45.150

我遇到了同样的问题，然后在跟踪和错误之后，我得到了如下解决方案 -

```
<% Student student = (Student)request.getAttribute("student");%><br>
<table><br>
    <tr><td>First Name :</td><td><%=student.getFirstName() %></td></tr><br>
    <tr><td>Last Name :</td><td><%=student.getLastName() %></td></tr><br>
</table><br> 
```

# struts2 - Struts2 ActionContext 和 ValueStack？

> ID：10296108
> 
> 赞同：3
> 
> 时间：2012-04-24T10:26:12.330
> 
> 标签：struts2, struts, actioncontext

我的问题是：

1.  在Struts2中，是不是每个动作对象都有自己对应的ActionContext和ValueStack？

换句话说，对于每个新请求，都会创建一个新的操作对象。这是否意味着每次创建一个新的动作对象时，也会创建一个新的 ActionContext 和 ValueStack ？

2.  考虑这种情况：

Action1------1st req----->view.jsp------2nd req--------->action2。

因此，当对 action1 的请求到来时，将创建 action1 的新对象以及相应的 ActionContext 和 ValueStack。

从 view.jsp（点击超链接）一个新的请求去 action2。

这是否意味着先前的 ActionContext 和 ValueStack（与 action1 相关）被销毁，而新的 ActionContext 和 ValueStack（与 action2 相关）被创建？

3.  假设我在 view.jsp 中的 ActionContext（action1）中存储了一些东西，然后单击 action2（来自 view.jsp）的超链接，这些数据会与 ActionContext（action1）一起丢失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:53:59.477

Q1。有一个 ActionContext，只有一个 ValueStack。

Q2。

> 这是否意味着先前的 ActionContext 和 ValueStack（与 action1 相关）被销毁，而新的 ActionContext 和 ValueStack（与 action2 相关）被创建？

不。

Q3。我不明白这个问题。我认为缺少的是对[ThreadLocal](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html)的认识，因此尽管有一个 ActionContext 每个线程都能够拥有自己的变量，这些变量是该线程的本地变量，因此 ValueStack 的操作范围以这种方式保持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:00:48.500

1.  是的
2.  是的，在操作执行后清理将完成。

    ```
    //SourceCode from StrutsPrepareAndExecuteFilter.

    //Cleans up a request of thread locals

    public void cleanupRequest(HttpServletRequest request) {

      Integer counterVal = (Integer) request.getAttribute(CLEANUP_RECURSION_COUNTER);
      if (counterVal != null) {
          counterVal -= 1;
          request.setAttribute(CLEANUP_RECURSION_COUNTER, counterVal);
          if (counterVal > 0 ) {
              if (log.isDebugEnabled()) {
                  log.debug("skipping cleanup counter="+counterVal);
              }
              return;
          }
      }

      // always clean up the thread request, even if an action hasn't been executed
      ActionContext.setContext(null);
      Dispatcher.setInstance(null);
    } 
    ```

3.是的，如果您希望该数据在下一个动作使用链中可用（不建议使用）。

# android - 如何在 android 仪器测试中停止和重新启动活动？

> ID：10296110
> 
> 赞同：18
> 
> 时间：2012-04-24T10:26:16.540
> 
> 标签：android, testing, android-testing

我正在尝试编写一个停止（`onPause()`，然后`onStop()`）并重新启动当前活动的 Android 活动检测测试。我试过

```
activity.finish();
activity = getActivity(); 
```

...但这似乎无法正常工作。

测试的目标是断言表单数据在方法期间存储并在`onPause()`方法期间重新读取`onStart()`。它在手动执行时有效，但测试失败，从中我得出的结论`activity.finish()`似乎是停止和重新启动活动的错误方法。

* * *

**编辑：**我的主要问题似乎是同步问题。重新启动活动后，测试运行程序没有等待所有事件处理程序完成。以下行暂停测试执行，直到活动空闲：

```
getInstrumentation().waitForIdleSync() 
```

除此之外，请查看接受的答案以获取有关生命周期的更多有价值的信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T22:51:27.460

通过调用（或触发屏幕方向更改）：

```
activity.finish(); // old activity instance is destroyed and shut down.
activity = getActivity(); // new activity instance is launched and created. 
```

导致活动经历完整的娱乐生命周期：

```
onPause() -> onStop() -> onDestroy() -> onCreate() 
```

你需要的是：

```
onPause() -> onStop() -> onRestart() 
```

我最近公开了[Instrumentation API](http://developer.android.com/reference/android/app/Instrumentation.html)，发现了很多有趣的活动生命周期触发方法 callActivityOnXXX()，下面的单行代码应该可以解决问题：

```
MyActivity myActivity = getActivity();
// make activity falling into restart phase:
getInstrumentation().callActivityOnRestart(myActivity); 
```

活动生命周期图引用官方开发指南： ![在此处输入图像描述](../Images/591c2d1cb680cf94b3fbb1b02b637029.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-14T11:40:06.370

我尝试调用 .finish()、setActivity(null)、getActivity() 并且它确实重新启动了活动，但对我来说它并没有恢复状态。我尝试了关于 SO 的所有其他答案，以及我可以在网上找到的所有其他方法，但没有一个对我有用。经过大量实验，我发现了以下作品（nb：需要 API 级别 11+）：

```
 getInstrumentation().runOnMainSync(new Runnable() {
        @Override
        public void run() {
            activity.recreate();
        }
    });
    setActivity(null);
    activity = getActivity(); 
```

当我这样做时，会创建一个新的 Activity 实例，并且还会创建我在测试早期附加到该 Activity 的片段的新实例，并且该 Activity 和片段都以预期的方式恢复它们的状态。

我不知道这是如何工作的，也不知道为什么会这样，我通过反复试验达到了这个解决方案，我只在运行 KitKat 的 Nexus 4 上对其进行了测试。我不能保证它正确地模拟了一个活动游戏，但它适用于我的目的。

编辑：稍后我想出了这是如何工作的。getActivity() 通过注册接收正在创建的新活动的钩子来工作，这些钩子捕获由 activity.recreate() 创建的新活动。`setActivity(null)`需要清除支持getActivity的内部缓存，否则它将返回旧的而不是寻找新的。

您可以通过检查扩展自的各种测试用例类的源代码来了解其工作原理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T12:28:10.933

测试生命周期事件的一个好方法是通过屏幕方向更改。以我的经验，这是一种对 onPause / onStart 模式进行防弹的便捷方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T12:20:44.083

也许你可以尝试保存你的活动的名称，完成它......并使用反射来获取 .class 的新实例以创建新的意图......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T13:08:26.360

更改您的代码如下：

```
mActivity.finish();
    setActivity(null);
    mActivity = this.getActivity(); 
```

[完整的解释可以在这个问题中找到](https://stackoverflow.com/questions/8846615/android-activity-tests-testing-restarts/14459190#14459190)

# android - 为多屏创建应用

> ID：10296116
> 
> 赞同：0
> 
> 时间：2012-04-24T10:26:39.483
> 
> 标签：android, xml, android-layout

我如何为手机和平板电脑创建相同的应用程序设计。因为我有 ldpi、mdpi 和 hdpi 文件夹，我的问题有点像有些手机有 hdpi 分辨率，而有些平板电脑也有 hdpi 分辨率，那如何创建手机和平板电脑的设计相同。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:31:38.350

看看[这个](http://developer.android.com/guide/practices/screens_support.html)页面。您不会根据 DPI 值区分手机/平板电脑/等屏幕，而是使用 -small、-medium、-large、-xlarge 等标签。

# intellij-idea - play 2.0：如何生成包含依赖文档和源的 IntelliJ IDEA 项目？

> ID：10296117
> 
> 赞同：3
> 
> 时间：2012-04-24T10:26:44.403
> 
> 标签：intellij-idea, sbt, playframework-2.0

我知道该`idea`命令会生成 *.iml 文件（Idea 模块文件）

但是生成的文件不包括依赖文档和源。

请问[sbt-idea](https://github.com/mpeltonen/sbt-idea)`gen-idea`有帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:25:24.813

它似乎`gen-idea`对我有用！

伟大的！[sbt-idea](https://github.com/mpeltonen/sbt-idea)摇滚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:39:21.750

看看你的`sbt`日志。
存储库中很可能缺少 src。
我在尝试为 Eclipse 获取 src 时得到了这个。

```
project files for your project(s). [warn] [NOT FOUND ]
org.scala-lang#scala-library;2.9.1!scala-library.jar(src) (0ms) 
```

# iphone - 在表格单元格中添加 uiwebviews 是个好主意吗？

> ID：10296118
> 
> 赞同：1
> 
> 时间：2012-04-24T10:26:49.453
> 
> 标签：iphone, uitableview, uiwebview, custom-cell

我有几个本地 html 文件，我想将它们显示在带有静态（目前）单元格的表格中。每个 UIWebView 都会有不同的高度（我不想在 UIWebView 中有任何滚动），所以显然每个单元格都有不同的高度。我阅读的大多数评论都不鼓励在表格单元格中使用 UIWebView。你怎么看：这适用吗？它会很慢并且需要时间来加载吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T10:44:24.903

UIWebview in tableview cells will affect the performance for sure. To display Html content in tableview cells you can use [NSAttributedString](https://stackoverflow.com/questions/4217820/convert-html-to-nsattributedstring-in-ios).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T10:49:13.530

我`UIWebView`在应用程序中使用 a 将来自网络的内容显示为表格视图中的行。

我知道这样做是不鼓励的，因为`UIWebView`. 简而言之，我试过了，效果很好。

该应用程序不时收到内存警告，但它也能够有效地恢复内存并且即使在 ipod touch 上运行也不受影响（仅 256MB 内存）。性能可能会受到影响，但由于应用程序正在这样做（从 Web 加载文本并将其显示在表格中），因此应用程序的响应速度非常好。

一个重要的注意事项：页面非常简单，只有文本，每个表格包含的元素不超过 15 个。此外，您必须考虑的一件事是`UIWebView`在渲染中引入了一个小的延迟，因此您必须处理它并在您的应用程序中接受它（据我所知，没有办法摆脱它）。

在后来的项目中，我使用了一种不同的方法：只使用一个`UIWebView`并在其中使用 HTML/js 创建表。好吧，它也有效，但我看不到峰值内存使用或性能有任何大的改进（我用仪器检查过）。

这只是我的经验，我并不是要说这会奏效或这是一种好的做法。无论如何，我希望它有所帮助。

# c# - 为什么 MVC 3 Validation 会覆盖我的？

> ID：10296123
> 
> 赞同：0
> 
> 时间：2012-04-24T10:26:58.723
> 
> 标签：c#, asp.net-mvc-3, validation

在我的模型中，我有一个以以下方式注释的特定字段：

```
 [DataType(System.ComponentModel.DataAnnotations.DataType.Text)]
    [RegularExpression("[0-9]{1,10}", ErrorMessage = "The stated Attempt Id is invalid!")]
    public long? AttemptId { get; set; } 
```

当我在尝试 ID 中输入不正确的数据时，它会在模型​​状态中给我以下错误消息：

```
The value 'cbcbxcb' is not valid for AttemptId. 
```

我还有其他带有类似错误消息的字段，但它们的类型是字符串而不是长？并且在给出无效值的情况下会显示正确的错误消息。为什么不是“长”的消息？正在使用？我正在使用页面中的以下文字标签显示我的错误。

```
<%: Html.TValidationSummary() %> 
```

编辑：我试图将模型中的验证更改为以下内容：

```
 [Required(ErrorMessage="The stated Attempt Id is invalid!", AllowEmptyStrings=true)] 
```

然而，这仍然是不正确的。首先，我需要让该字段留空，当我这样做时，它会给我“声明的尝试 ID 无效！” 错误信息。其次，当我在字段中输入无效数据时，它会恢复到原来的错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:34:35.617

这可能是因为 MVC 绑定甚至无法将输入值转换为正确的类型，因此它已经知道该值必须是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:49:03.503

RegularExpression 验证属性仅适用于字符串类型。要获取自定义错误消息，请改用 Required 验证属性并放入您自己的自定义错误消息。

如果您的模型参数不是强制性的，您可以在控制器中执行验证并使用 ModelState.AddModelError 方法添加您自己的自定义消息 - 不过，这有点小技巧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:34:22.780

您应该使用 FluentValidation

使用属性的内置验证东西是脆弱和讨厌的——至少可以这么说。

# c# - C#根据来自另一个列表（不同类）的值序列对列表进行排序

> ID：10296125
> 
> 赞同：5
> 
> 时间：2012-04-24T10:27:10.733
> 
> 标签：c#, .net, linq

我目前遇到一个问题，我有 2 个列表，我想根据第一个列表中的值对第二个列表进行排序，这是一个示例：

```
public class data
{
    public string Name{get; set;}
    public int ID{get; set}
}
public class dataToSort
{
    public int ID{get; set;}
    public string retrievedData{get; set}
    public string timeStamp{get; set}
} 
```

假设我有 2 个 List 对象，一个用于数据，一个用于 dataToSort，它们的内容如下：

```
data: "Alpha", "80"           dataToSort: "21", "XA", "YA"
      "Beta", "47"                        "47", "XB", "YB"
      "Charlie", "153"                    "80", "XC", "YC"
      "Delta", "21"                       "153","XD", "YD" 
```

所以我想要做的是使 dataToSort 的顺序等于数据中 ID 的顺序，如下所示：

```
dataToSort: "80", "XC", "YC"
            "47", "XB", "YB"
            "153","XD", "YD"
            "21", "XA", "YA" 
```

我已经尝试在谷歌上搜索一种对这些进行排序的方法，但是所有 LINQ 语法都让我感到困惑，而且由于每个对象的类不同，我遇到了问题:(我能想到的唯一方法是有一个 for 循环来获取索引一个List的ID并做一些类似冒泡排序的事情，但它太麻烦而且效率低下。非常感谢帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T10:32:53.713

您可以加入 ID 上的两个列表：

```
var query = from x in data
            join y in dataToSort on x.ID equals y.ID
            select y;

var result = query.ToList(); 
```

这保持了第一个列表的顺序`data`。

* * *

您还可以通过这种方式轻松组合这两个列表：

```
var query = from x in data
            join y in dataToSort on x.ID equals y.ID
            select new
            {
                x.Name,
                x.ID,
                y.retrievedData,
                y.timeStamp,
            };

var result = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:37:43.630

This should do the trick:

```
var list = dataList
           .Select(data => dataToSortList
               .First(x => x.ID == data.ID)
           )
           .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:36:07.407

```
List<data> lstofdata = new List<data>();
List<dataToSort> lstdataToSort = new List<dataToSort>();

var q = from d in lstofdata 
        join s in lstdataToSort on d.ID equals s.ID 
        orderby d.Name 
        select s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:31:58.503

像这样的东西可以解决问题（伪代码）：

```
dataToSort sortedData;

foreach data
{
    sortedData.AddRange(from unsortedData.Where(x => x.ID == data.ID));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T10:33:02.497

您可以同时加入列表并按以下顺序订购`IndexOf`

```
var ordered = (from ds in dataToSort
              join d in data
              on ds.ID equals d.ID
              orderby data.IndexOf(d)
              select ds).ToList(); 
```

# jquery - 在 jquery 菜单上添加滑动事件

> ID：10296129
> 
> 赞同：0
> 
> 时间：2012-04-24T10:27:26.293
> 
> 标签：jquery, html

好的，我有这个代码：

```
<html>
<head>
var timeout         = 0;
var closetimer      = 0;
var ddmenuitem      = 0;

function jsddm_open()
{   jsddm_canceltimer();
jsddm_close();
ddmenuitem = $(this).find('#as').eq(0).css('visibility', 'visible');
bb = $(this).css("background","#0099FF");
}

function jsddm_close()
{
if(ddmenuitem)
ddmenuitem.css('visibility', 'hidden');
}

function jsddm_timer()
{   closetimer = window.setTimeout(jsddm_close, timeout);
bb = $(this).css("background","none");
}

function jsddm_canceltimer()
{   if(closetimer)
    {   window.clearTimeout(closetimer);
        closetimer = null;}}

$(document).ready(function()
{

$("#sinputbox").watermark("Search item here...");
$('#menu > li').bind('mouseover', jsddm_open);
$('#menu > li').bind('mouseout',  jsddm_timer);});

document.onclick = jsddm_close;

</head>
<body>
<div id="hmenu">
<ul id="menu">
    <li><a class="active" href="index.php">Home</a></li>
    <li><a href="gallery.php?name=gallery">Gallery</a>
    <ul id="as">
            <li><a href="gallery.php?name=clothing">Clothing</a></li>
            <li><a href="gallery.php?name=furniture">Furniture</a></li>
            <li><a href="gallery.php?name=householditems">Household-items</a></li>
            <li><a href="gallery.php?name=automotive">Automotive</a> </li>
            <li><a href="gallery.php?name=food">Food</a></li>
    </ul>
    </li>
    <li><a href="about.php">About</a></li>
    <li><a href="contact.php">Contact</a></li>
</ul>
</div>
</body>
</html> 
```

现在，我打算在该下拉菜单中添加一个下拉菜单，但我不知道如何。我试图`$('this').slideDown('slow');`在这个函数中添加这一行：“”：“ `function jsddm_timer()`”但到目前为止没有任何效果。有人可以帮我解决这个问题吗？我对任何建议都持开放态度，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:51:21.610

试试这个 JSFiddle 并告诉你是否想要这样的功能：

更新链接：

[http://jsfiddle.net/qFEJh/1/](http://jsfiddle.net/qFEJh/1/)

这是更新的代码

```
function jsddm_open()
{
    $(this).find('#as').slideDown('slow');
    bb = $(this).css("background","#0099FF");
}

function jsddm_close()
{
    $(this).find('#as').slideUp('slow');
}

$(document).ready(function()
{
    $('#menu > li:has(ul)').hover(jsddm_open,jsddm_close);
});

document.onclick = jsddm_close; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:30:54.790

在你的情况下，它不是：

```
$(this).find('#as').eq(0).slideDown('slow'); 
```

假设你把它放在你的`jsddm_open`函数中。

# java - 如何在画布上一张一张地绘制多个图像，就像带有淡入和淡出动画的幻灯片一样

> ID：10296131
> 
> 赞同：1
> 
> 时间：2012-04-24T10:27:27.957
> 
> 标签：java, android, imageview, slideshow, android-canvas

我正在开发动态壁纸，我是新手，遇到了这个问题，谁能告诉我如何在画布上一张一张地绘制图像，就像带有淡入淡出动画的幻灯片一样。我能够在视图和布局上执行此动画，但我不知道在画布上运行它们。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:34:19.857

不知道你是说`java`还是`javascript`

关于淡入解决方案的一些线索：

```
var delta = 0;
var interval = 0;
var duration = 2000;

setInterval(function() {
  ctx.globalAlpha = 1.0;
  ctx.drawImage(oldImage);

  ctx.globalAlpha = delta / duration;
  ctx.drawImage(nextImage);

  delta += interval;
}, interval); 
```

*   考虑使用[requestAnimationFrame](https://developer.mozilla.org/en/DOM/window.requestAnimationFrame)而不是计时器

*   使用 (new Date).getTime() 计算实际增量

*   玩一些缓动方程 - 例如：

`alpha = Math.sin(0.5 * Math.PI * delta / duration)`

# php - 需要在发送给用户之前扫描电子邮件内容中的垃圾邮件

> ID：10296134
> 
> 赞同：2
> 
> 时间：2012-04-24T10:27:44.993
> 
> 标签：php, spam, spamassassin

我有一个 PHP 应用程序，客户使用它向他们的客户发送电子邮件。有一个页面可让客户用户构建电子邮件模板以发送给他们的客户。

我想添加一个名为“垃圾邮件检查”的功能。这将允许客户端用户检查他们的电子邮件模板是否通过垃圾邮件过滤器。

我在服务器上安装了 spamassassin。在发送给客户之前，如何使用它来检查电子邮件模板中的垃圾邮件内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:59:07.490

## 解决方案 1

您可以使用贝叶斯垃圾邮件过滤器[http://en.wikipedia.org/wiki/Bayesian_spam_filtering](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)

背景知识

贝叶斯概率：[http](http://en.wikipedia.org/wiki/Bayesian_probability)
://en.wikipedia.org/wiki/Bayesian_probability 贝叶斯推理：[http ://en.wikipedia.org/wiki/Bayesian_inference](http://en.wikipedia.org/wiki/Bayesian_inference)

`PHP`实现 这里已经讨论过好几次了

[在朴素贝叶斯垃圾邮件过滤中结合个体概率](https://stackoverflow.com/questions/6463983/combining-individual-probabilities-in-naive-bayesian-spam-filtering)

## 解决方案 2

既然你`spamassassin installed`在你的系统上，你可以

```
$fname = tempnam ( "/tmp", "sa" );
file_put_contents ( $fname, $message ); // Put the template in a file
/* Execute the system command and pass the file name to get spam count */
exec ( "/usr/bin/spamc -R < $fname", $score, $rr );
/* This will return score details in array format */
print_r ( $score ); 
```

您现在可以操纵垃圾邮件过滤器的分数

# xcode4 - Xcode 调试快捷方式

> ID：10296138
> 
> 赞同：33
> 
> 时间：2012-04-24T10:28:02.120
> 
> 标签：xcode4

在使用键盘快捷键进行调试时，如何在 Xcode 中逐步进行？我想跨步并使用键盘进入，我已经寻找了键盘等，但没有找到该特定操作的键。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-24T12:00:38.557

这确实是一件容易的事。转到`Xcode`> `Preferences`>`Key Bindings`并搜索“ `step`”。您可以在此处为每个操作定义快捷方式。

PS：正如@Jenn 在下面指出的，此列表中缺少“暂停/继续”，默认情况下绑定到`⌃⌘Y`(ctrl + command + Y)

![XCode 键绑定](../Images/d7bcdd9f18298afe63f4d2a5da2add6f.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-07T11:13:21.817

请参阅有关 Xcode 键盘快捷键的备忘单：

**更新**：

有很多很好的资源可以了解 Xcode 快捷方式。我在这里列出一些：

*   Xcode 和模拟器的快捷方式与演示：[Xcode Shortcuts the iOS Cheat Sheet](https://mobidevtalk.com/xcode-shortcuts-cheat-sheet/)
*   Git Tower 的 Xcode 备忘单：[xcode-cheat-sheet-detail](https://www.git-tower.com/blog/xcode-cheat-sheet)
*   关于 Xcode 快捷方式的非常深入的详细信息：[Xcode 效率提示：键盘快捷方式](http://spin.atomicobject.com/2014/03/23/xcode-keyboard-shortcuts/)
*   一篇关于动画的更详细的文章：[成为 Xcode 高级用户](http://www.pasanpremaratne.com/2014/05/16/becoming-an-xcode-power-user/)
*   苹果 Xcode 官方文档：[关于 Xcode 手势和键盘快捷键](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/xcode_help-command_shortcuts/Introduction/Introduction.html)
*   Xcode 快捷键的一个很好的概述：[Xcode 6 键盘快捷键](https://s3.amazonaws.com/iphonedev.tv/14+Xcode+Keyboard+Shortcuts+Cheat+Sheet.pdf)
*   简单快捷键列表：[Xcode 键盘快捷键](https://swifteducation.github.io/assets/pdfs/XcodeKeyboardShortcuts.pdf)
*   用动画解释快捷方式：[我最喜欢的 Xcode 8 快捷方式](https://medium.com/ios-geek-community/bobs-favorite-xcode-8-shortcuts-part-1-3-36381e07284d)
*   一些提高速度的捷径：[17 Xcode Tips and Tricks](https://www.detroitlabs.com/blog/2017/04/13/17-xcode-tips-and-tricks-that-every-ios-developer-should-know/)

我知道这不是问题的直接答案。Alladinian 已经给出了直接的答案。但我认为这个答案是对 Xcode 快捷方式感兴趣的很好的资源。

**旧答案** ![在此处输入图像描述](../Images/b8050fd4cbcc8072b09ac57bb9b2933e.png)

笔记：

*   访问此链接以获取 PDF 版本：[Xcode 4.0 键盘快捷键（蓝色）](http://cloud.github.com/downloads/Machx/Xcode-Keyboard-Shortcuts/Xcode_Shortcuts.pdf)
*   如果有人有兴趣为 Xcode 5.x 更新此内容，请访问原始 GitHub 存储库：[Xcode 键盘快捷键](https://github.com/Machx/Xcode-Keyboard-Shortcuts)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-24T11:09:26.033

苹果网站有一个易于阅读的列表：

[https://developer.apple.com/library/mac/documentation/IDEs/Conceptual/xcode_help-command_shortcuts/MenuCommands/MenuCommands014.html](https://developer.apple.com/library/mac/documentation/IDEs/Conceptual/xcode_help-command_shortcuts/MenuCommands/MenuCommands014.html)

特别是 F6 跳过和 F7 进入是我使用最多的。

# c# - 插入、删除和更新命令不是由适配器构建的

> ID：10296145
> 
> 赞同：2
> 
> 时间：2012-04-24T10:28:21.933
> 
> 标签：c#, sql, database, sqlcommand, dataadapter

我已经用 DataAdapter 与 .mdb 文件建立了连接，但插入、删除和更新命令为空，我无法使用它们。

为什么会这样，解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:56:06.030

要知道这一点，您应该了解 SqlCommand 和 SqlCommandBuilder 之间的区别。

Command 对象用于对数据库执行标量或非查询命令。您可以将命令对象的 CommandText 属性设置为要运行的 sql 语句，然后使用它的 ExecuteScalar 或 ExecuteNonQuery 方法来运行它。

CommandBuilder 对象用于根据您提供的 Select 语句为您自动创建 Update、Delete 和 Insert SQL 语句。您将声明一个 DataAdapter 对象，将其 SelectCommand.CommandText 属性设置为您的 Select SQL 语句。然后，当您声明一个 CommandBuilder 对象时，您将 dataadapter 包含在 CommandBuilder 的构造函数参数中，它会在您运行 DataAdapter 时自动为您创建其他语句。

例子：

//使用SqlDataAdapter的Update方法在数据库中保存一条记录

```
using System.Data; 
using System.Data.SqlClient; 

class dd 
{ 
static void Main() 
{ 
        SqlConnection cn=new SqlConnection("server=.\SqlExpress;uid=sa;pwd=tiger;database=employeemaster"); 
        SqlDataAdapter da=new SqlDataAdapter("select no,name from employee",cn); 
        DataTable dt=new DataTable(); 
        da.Fill(dt); 

        //emp has 2 columns known as no and name. 

        //Initialize the SqlCommandBuilder. 
        SqlCommandBuilder cd=new SqlComandBuilder(da); 

        //create a DataRow 
        DataRow dr=dt.NewRow(); 
        dr["no"]=101; 
        dr["name"]="romil"; 
        //the row is temporarily saved 
        dt.Rows.Add(dr); 

        //save the Row permanently in database

           da.Update(dt); 
    }
} 
```

# java - 将输入提交到网页并提取结果的 java 代码

> ID：10296146
> 
> 赞同：-1
> 
> 时间：2012-04-24T10:28:27.193
> 
> 标签：java, javascript, html

我想要一个可以向网页提交用户名的java代码

[http://103.4.221.147/srmwebonline/exam/onlineResult.jsp](http://103.4.221.147/srmwebonline/exam/onlineResult.jsp)

并提交...然后它也可以从网页中提取结果..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:36:23.337

我认为您可以通过 apache 使用[HttpClient](http://hc.apache.org/httpclient-3.x/)来发布请求并获得响应。互联网上应该有很多例子。我给出了一个链接，它有一个简单的例子

[http://www.java2s.com/Code/Java/Apache-Common/HttppostmethodExample.htm](http://www.java2s.com/Code/Java/Apache-Common/HttppostmethodExample.htm)

# ios - (iPhone, OpenGL) 在文件中直接存储纹理数据

> ID：10296149
> 
> 赞同：1
> 
> 时间：2012-04-24T10:28:46.723
> 
> 标签：ios, performance, opengl-es, textures

此时我使用此方案从 PNG 加载 OpenGL 纹理：

*   通过 UIImage 加载 PNG
*   通过位图上下文获取像素数据
*   将像素重新打包为新格式（当前为 RGBA8 -> RGBA4、RGB8 -> RGB565，使用 ARM NEON 指令）
*   使用数据创建 OpenGL 纹理

（这种方式在 Cocos2d 引擎中常用）

这需要很多时间，而且似乎需要做额外的工作，每次构建可能会完成一次。所以我想将重新打包的像素数据保存回文件中，然后第二次将其直接加载到 OpenGL。

我会知道实际的优势。有人试过吗？通过 zip 压缩数据是否值得（据我所知，当前的 iDevices 在文件访问方面存在瓶颈）？非常感谢真实的经验分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:46:01.107

更好的是，如果这些是预先存在的图像，请使用 PowerVR 纹理压缩 (PVRTC) 对其进行压缩。PVRTC 纹理可以直接加载，并以压缩形式存储在 GPU 上，因此它们可以比各种原始像素格式小得多。

[我在这个示例代码](http://www.sunsetlakesoftware.com/sites/default/files/CubeExample.zip)中提供了一个如何压缩和使用 PVRTC 纹理的示例（纹理坐标在那里有点乱，因为我还没有更正它们）。在该示例中，我只是重用 Apple 的 PVRTexture 示例类来处理这种类型的纹理。PVRTC 纹理通过属于构建阶段之一的脚本进行压缩，因此可以为您的各种源图像自动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:49:52.160

所以，我做了一些成功的实验：

我按（最大压缩率）压缩纹理数据`zlib`并将其保存到文件（通过`NSData`方法）。在某些情况下，文件的大小比 PNG 小得多。

至于加载时间，我不能说确切的时间戳，因为在我的项目中有 2 个并行线程 - 一个在背景上加载纹理，而另一个仍在渲染场景。**它大约快两倍**- 恕我直言，主要原因是我们直接将图像数据复制到 OpengGL 而不重新打包，并且输入数据量更小）。

PS：构建优化级别对加载时间的影响非常大：调试配置大约 4 秒，发布大约 1 秒。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-21T03:23:57.633

忽略任何关于 PVRTC 的建议，这些东西只对颜色使用有限的 3D 纹理有用。最好只使用来自真实图像的 24 或 32 BPP 纹理。如果您想查看您描述的过程的真实工作示例，请查看[load-opengl-textures-with-alpha-channel-on-ios](http://iosgraphicsanimation.wordpress.com/2013/06/15/load-opengl-textures-with-alpha-channel-on-ios/). 该示例展示了在附加到应用程序资源时如何使用 7zip（比 zip 好得多）压缩纹理数据，然后将结果解压缩并以最佳格式保存到磁盘，无需进一步像素即可直接发送到视频卡组件重新排列。这个例子使用了 POT 纹理，但适应非 POT 并使用 Apple 优化不会太难，因此不需要将纹理数据显式复制到显卡中。这些优化在将视频数据发送到 CoreGraphics 时已经实现。

# iphone - 使用 Dealloc 和 ViewDidUnload 释放变量的正确方法

> ID：10296150
> 
> 赞同：1
> 
> 时间：2012-04-24T10:28:50.950
> 
> 标签：iphone, objective-c, ios, release, release-management

我已经阅读了一些教程和一些信息，但是对于释放变量的最佳方式或最佳位置，我没有直接的答案。

让我们看看这种情况，我有这两个变量：

```
@property (nonatomic, strong) IBOutlet UIButton *myButton;
@property (nonatomic, strong) NSString *myString;

...

@synthesize myButton = _myButton, myString = _myString; 
```

这是释放它们的最佳方式吗？：

```
 -(void)viewDidUnload {

    self.myButton = nil;
    self.myString = nil;
    [super viewDidUnload];

 }

-(void)dealloc{

   [_myButton release];
   [_myString release];
   [super dealloc];

} 
```

当调用 dealloc 和调用 viewDidUnload 时，我理解得足够多了，我只想知道这种方式是否正确，以及为什么必须以这种方式完成。

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:46:24.473

建议不要在 init 和 dealloc 中使用属性访问器方法，因为它们可能期望对象中存在一些其他信息。如果你知道自己在做什么，那么在 dealloc 中使用 self.myButton = nil 真的没有问题。但是，实际上将它们设置为 nil 是没有用的，因为对象正在被销毁 - 除非某些代码意外地从 dealloc 运行（如我上面提到的访问器方法）。

在 viewDidUnload 中，您希望将成员设置为 nil 而不是只释放它们，因为您的对象将继续存在并且不希望访问悬空指针。

所以，你的例子应该是最好的性能和最安全的编程方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:53:20.240

还有其他方法，例如不将 IBOutlets 声明为属性，或者将它们声明为属性而不保留。我发现在大多数情况下，我更喜欢让它们成为保留属性，然后我必须明确释放它们。例如，当您从一个视图控制器切换到另一个视图控制器时。当一个视图控制器被解除时，它的视图被删除并被释放。如果我不保留它们，该视图上的任何 IBOutlet UILabel 也会被释放。这意味着当我翻回旧视图时，我必须重新设置标签和控件到它们的最后值，如果我只保留 IBOutlet，我可以很容易地保存它们。

我已阅读有关使用 viewDidUnload 方法的文档。我以为我确实理解了这种方法的含义

1) 我在 .h 文件中使用带有 @propery 的保留，在 .m 文件中使用 @syntesize。我使用 self.object = something 为对象赋值。在这种情况下，我会设置 self.object = nil; 在 viewDidUnload 方法中。

2) 我不保留 .h 文件中的对象，但我在 viewDidLoad 方法中分配和初始化对象。在 dealloc 方法中，我有 [object release]; 在 viewDidUnload 方法中我还设置了 [object release]; 因为下次出现视图时，会在viewDidLoad方法中创建对象

希望对你有帮助...

# visual-studio-2010 - 应用程序配置不正确？？？？？？怎么办？

> ID：10296155
> 
> 赞同：4
> 
> 时间：2012-04-24T10:29:09.687
> 
> 标签：visual-studio-2010, visual-c++, x86, 64-bit, manifest

我在 Visual Studio 2010 Express 中运行我的应用程序，当我运行时，它给了我一个错误：-“应用程序无法启动，因为应用程序配置不正确。查看清单文件以了解可能的错误”

我的清单文件如下所示：-

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="asInvoker" uiAccess="false"></requestedExecutionLevel>
      </requestedPrivileges>
    </security>
  </trustInfo>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.VC80.DebugCRT" version="8.0.50727.6195" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
    </dependentAssembly>
  </dependency>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.VC80.CRT" version="8.0.50727.6195" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
    </dependentAssembly>
  </dependency>
</assembly> 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:52:50.897

清单文件包含对 Visual Studio 2008 运行时的引用，但您是在 VS2010 中编译它。这似乎是错误的原因。

# plone - 揭露未发现的错误并在 Plone 中查看其真正的异常

> ID：10296156
> 
> 赞同：1
> 
> 时间：2012-04-24T10:29:13.453
> 
> 标签：plone, zope

以下来自 Zope 的 BaseRequest.py：

```
 # traverseName() might raise ZTK's NotFound
            except (KeyError, AttributeError, ztkNotFound):

                if response.debug_mode:
                    return response.debugError(
                        "Cannot locate object at: %s" % URL)
                else:
                    return response.notFoundError(URL) 
```

它将各种异常翻译为未找到的页面。这对网站开发人员来说是非常糟糕的，他们不知道网站上实际出了什么问题。

如何禁用此机制（显然有 response.debug_mode），以便您看到真正的异常

*   当 Plone 在调试模式下运行时

*   在单元测试和功能测试中

*   当 Plone 在生产模式下运行时（例如暂时查看某些 URL*确实*失败的原因）

# html - CSS：右侧导航 DIV 填充整个页面高度

> ID：10296157
> 
> 赞同：1
> 
> 时间：2012-04-24T10:29:18.923
> 
> 标签：html, css-position, css

我目前正在开发一个新网站： http: [//maartenlodewijk.nl/2013/](http://maartenlodewijk.nl/2013/)

右侧的浅灰色条（其中包含“测试”一词）应该是我的导航条。几天来我一直在尝试让它的高度来填充页面高度（不仅仅是浏览器高度，而是整个页面）。就像我制作的这个模型一样：http: [//i.imgur.com/Knjlc.jpg](http://i.imgur.com/Knjlc.jpg)

我现在尝试了多种方法，从简单的方法，例如将 body 和 html 高度设置为 100%（没有运气）和 CSS hack，例如：ejeliot.com/samples/equal-height-columns/example-7。 html （可行，但 hack 对我来说确实是最后的选择）

这是我的 HTML 和 CSS 代码。如果您想知道：是的，我有一个包装器和一个容器 div，包装器使容器居中，而容器在包装器内保持固定位置。

**HTML**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Maarten Lodewijk // Home</title>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div id="navigation">
    test
</div> <!-- end navigation -->

<div id="wrapper">
<div id="container">
    <div id="header">
    <img src="images/headerpng.png" alt="Logo" border="0" />
    </div> <!-- header -->
    <div id="weclome">
    <img src="images/homemessagepng.png" width="645" height="203" alt="Maarten Lodewijk, Communication &amp; Multimedia Designer" /></div><!-- end welcome -->
    <div id="content">
        <div id="leftcolumn">
            <h1>HEADER</h1>
                <p>TEXT</p>

                <p>TEXT</p>

                <p>TEXT</p>
            </div><!-- end leftcolumn -->

    <div id="rightcolumn">
        <h1>Contact</h1>
            <table width="286" border=0>
            <tbody>
            <tr>
                <td width="96">Mail:</td>
                <td width="180" class="rightalign">mail@maartenlodewijk.nl</td>
            </tr>
            <tr>
                <td>Telefoon:</td>
                <td class="rightalign">+31 6 348 268 52</td>
            </tr>
            </tbody>
            </table>
        <h1>HEADER</h1>
        <p>TEXT</p>

        <p>TEXT</p>

        <p>TEXT</p>

      </div><!-- end rightcolumn -->
    </div> <!-- end content -->
</div> <!-- end container -->
</div> <!-- end wrapper -->

</body>
</html> 
```

**CSS**

```
/* ----- TAGS -------*/

body {
    font-size: 100%;
    padding: 0px;
    margin: 0px;
    font-family: Georgia, "Times New Roman", serif;
    background: #e8e8eb url(images/bg.png) repeat-y;
    color: #666666;
}

html{
}
h1{
    font-size: 150%;
    color: #ff3366;
    padding-top:30px;
}

/* ----- LAY OUT -----*/
#wrapper{
    width:955px; 
    margin-left:auto;
    margin-right:auto;
}

#container{
    width:645px;
    margin-left:20px;
}

#content{
    padding: 0px 20px 0px 20px;
}

#navigation{
    position:absolute;
    top:0;
    right:0;
    width: 16%;
    min-width: 163px;
    max-width:233;
    background-image:url(images/navbarbg.jpg);
    height: 100%;
}

#leftcolumn{
    width:286px;
    float:left;
}

#rightcolumn{
    width:286px;
    float:right;
}

/* ----- CLASSES -----*/
.rightalign{
    text-align:right;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:44:15.720

如果我看到了你的布局，那么如果你给`position:fixed`而不是`position:absolute;`给你的**#navigation** DIV，那就太好了。像这样写：

```
#navigation{
    position:fixed;
    top:0;
    right:0;
    width: 16%;
    min-width: 163px;
    max-width:233;
    background-image:url(images/navbarbg.jpg);
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:47:44.123

请添加背景颜色`#wrapper`并查看您的`#leftcolumn`和`#rightcolumn`不在该`#wrapper`区域中。也许这是您的模板中的一个问题。请在修复后检查。

如果这不起作用，您可以使用 jQuery 动态获取高度并设置导航高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:48:23.813

在这个布局中存在很大的问题，你在 body 标签上使用背景图片，`1920x99`所以你的身体只对这个部分做出反应。

一些快速的改变使这个工作正常。请查看我的附加输出，我使用开发人员工具进行了这些快速更改。您应该重组布局，将所有内容放在包装器中，并使用浮动、导航和其他部分的位置。

您的布局中没有任何东西可以协同工作，您应该重新构建它并为每个部分使用适当的样式

![在此处输入图像描述](../Images/8fe20be0ec946523dde790c538568748.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:50:15.390

如果您希望您的菜单始终可见，您可能想使用[先前答案](https://stackoverflow.com/a/10296343/1144057)中的解决方案。

如果您只是想在滚动后扩展侧边栏 - 您需要使用所谓的`css equal height columns`- 这是其中的一个示例：[http ://www.vanseodesign.com/css/equal-height-columns/](http://www.vanseodesign.com/css/equal-height-columns/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T10:57:01.847

如果你想要相等的高度`#navigation`并`#wrapper`应用这个类`.equal_height`和

将此 jquery 函数与库文件一起使用

```
function equalHeight(group) {
   tallest = 0;
   group.each(function() {
      thisHeight = $(this).height();
      if(thisHeight > tallest) {
         tallest = thisHeight;
      }
   });
   group.height(tallest);
}
$(document).ready(function() {
   equalHeight($(".equal_height"));
}); 
```

愿它对你有所帮助。

# android - 换图很费时间

> ID：10296161
> 
> 赞同：0
> 
> 时间：2012-04-24T10:29:38.893
> 
> 标签：android, bitmap, imageview

有什么办法可以提高设置图像的速度吗？我想说的是假设我有数百张图像，并且每个图像都可以自动更改或通过按前进/后退按钮进行更改。（想想媒体播放器的情况，您可以前进或倒退尽可能多的文件，就像我对图像和后面的一些音频所做的那样）。

现在，如果我连续按住 RW/FW 按钮，布局会显示一段时间为黑色或要求强制关闭或等待应用程序。

有人知道如何提高读取位图并将其设置为图像视图的速度吗？

这是我的代码的一部分，

```
 private void playAudio() {
    msg = new Message();
    msg.obj = (filepath);
    imageHandler.sendMessage(msg);
 } 

 private Handler imageHandler = new Handler() {
    public void handleMessage(Message msg) {

        try {
            path = (String) msg.obj;
            imagePath = RaconTours.PATH + path;
            imagenamearray = imagePath.split("/");
            currentImagename = imagenamearray[8];
            i++;
            if (!imagePath.equalsIgnoreCase(staticpath)) {
                isSeekBarChangedManually = false;
                staticpath = imagePath;
                Bitmap snoop = readBitmap(Uri.fromFile(new File(filepath)));
                image.setImageBitmap(snoop);
                image.setMaxZoom(4f);
           } catch (Exception e) {
                e.printStackTrace();
          }
     }
}; 
```

希望您对这段代码有所了解，这只是大蛋糕的一小部分。

我没有得到解决这个问题的方法。我也尝试禁用该按钮，直到正在执行某些操作，但这也没有用。

任何帮助，干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:43:49.747

I think the only way to make this process "faster" is to load and cache the bitmaps in a buffer before you actually need them. When you need a bitmap, you check this forward-cache to see if it's already loaded. If it is, then it means it's already in memory -> you just need to set it for the proper ImageView (or whatever you use). If not, then you load it from the disk.

Of course, you need to know that which bitmaps you'll need most likely in the near future for this to work.

You can't really make disk I/O work any faster you see.

# escaping - 在cmd中转义特殊字符

> ID：10296162
> 
> 赞同：16
> 
> 时间：2012-04-24T10:29:46.023
> 
> 标签：escaping, cmd

我有一个 Windows .bat 脚本，我尝试在其中运行参数中带有密码的命令。我希望能够使用的密码是`~!@#$%^&*()_+|-=\][{}';:"/.>?,<`.

从我在[这里](http://ss64.com/nt/syntax-esc.html)读到的内容来看，我应该逃脱`^&|\<>`。`^`从我的假设来看，我应该`"`用`\"`.

这给了我类似的东西：

```
runme.exe /password:"~!@#$%^^^&*()_+^|-=^\][{}';:\"/.^>?,^<" 
```

但它不起作用 - 我的目标应用程序以登录失败响应。

我应该如何转义所有这些字符才能在我的批处理中硬编码密码（现在忽略安全问题）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T12:11:44.477

将密码中的引号加倍，并确保完整的密码也包含在引号中：

```
runme.exe /password:"~!@#$%%^^^&*()_+^|-=\][{}';:""/.>?,<" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:59:05.230

试一试，但如果`runme.exe`'s 参数解析器需要引号作为密码的字符串封装器，则它将无法工作。如果您需要在密码中包含引号，那么 runme.exe 需要提供一种转义方法！

```
runme.exe /password:~!@#$%%^^^&*()_+^|-=\][{}';:"/.>?,< 
```

# android - 将捆绑包发送到其他进程

> ID：10296167
> 
> 赞同：0
> 
> 时间：2012-04-24T10:29:55.603
> 
> 标签：android, bundle, serializable

我正在使用以下代码序列化对象并通过 putSerializable 将其附加到包，然后通过消息将包发送到其他进程。问题是我收到对象不可序列化的错误。我尝试添加“实现 Serialazable”，但我仍然得到同样的错误。

```
public static byte[] serializeObject(Object o)
{ 
    ByteArrayOutputStream bos = new ByteArrayOutputStream(); 

    try { 
      ObjectOutput out = new ObjectOutputStream(bos); 
      out.writeObject(o); 
      out.close(); 

      // Get the bytes of the serialized object 
      byte[] buf = bos.toByteArray(); 

      return buf; 
    } catch(IOException ioe) { 
      Log.e("serializeObject", "error", ioe); 

      return null; 
    } 
  } 
```

这是进行调用的代码：

```
 ArrayList<byte[]> blist=null;
                Bundle b = new Bundle();
                if (TriggerList != null && TriggerList.size() > 0)
                {
                    Iterator iter = TriggerList.iterator(); 
                    while (iter.hasNext()) 
                    {
                        Bundle entry = (Bundle) iter.next();
                        if (msg.arg1 == entry.getInt(ProjDefs.APP_ID))
                        {
                            if (blist == null)
                                blist=new ArrayList<byte[]>();
                            SerBundle sb = new SerBundle(entry);
                            byte[] bb = serializeObject(sb);
                            blist.add(bb);
                        }    
                    }
                    b.putSerializable(ProjDefs.SERIAL_DATA, blist);
                }
                NotifyClient(msg.arg1, ProjDefs.GET_APP_TRIGGERS_RESPONSE, 0, 0, b, null); 
```

可序列化的类：

公共类 SerBundle 实现 Serializable{

```
/**
 * 
 */
private static final long serialVersionUID = 1L;
public Bundle bundle;

public SerBundle(Bundle bundle)
{
    this.bundle = bundle;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:17:39.250

A`Bundle`已经是`Parcelable`。您可以将 a`Bundle`作为值放在 another`Bundle`中，而不必乱用`ObjectOutputStream`。

# ios - Facebook移动版评论在iPad上的UIWebView上太窄了

> ID：10296169
> 
> 赞同：3
> 
> 时间：2012-04-24T10:29:55.870
> 
> 标签：ios, facebook, ipad

我正在尝试使用 HTML5 代码将 Facebook 评论框添加到应用程序中。代码由[FB工具](https://developers.facebook.com/docs/reference/plugins/comments/)生成。该视图是常规的 iOS UIWebView。

问题是评论框对于 iPad 来说太窄了。单击“登录”按钮时，下一个登录页面出现正常宽度（屏幕的 100%）。如何强制将移动版本的评论拉伸到视图的宽度？

![在此处输入图像描述](../Images/8ca1f4212170a197cdb0c1b72a6e9c8d.png)

# sql - 在数据库中设置日期格式

> ID：10296170
> 
> 赞同：0
> 
> 时间：2012-04-24T10:29:56.273
> 
> 标签：sql, oracle, oracle10g

我在 Oracle 10g XE 中工作。我在 Oracle SQL Developer 中有两个数据库。我正在执行这个查询..

```
SELECT SCHEDULE_ID, START_DATE, END_DATE 
  FROM SCHEDULE
 WHERE C_ID IN (5781) 
   AND START_DATE >=TO_DATE ('1/29/2012','MM/DD/YYYY') 
   AND END_DATE <=TO_DATE ('4/14/2012','MM/DD/YYYY') 
```

在 First Database 中，数据正确返回。我在第二个数据库中执行相同的查询，但它不返回任何值。但数据在表中可用。

我已经执行了查询

```
SELECT dump(START_DATE), dump(END_DATE) FROM SCHEDULE WHERE C_ID=5026 
```

我得到的结果是，

```
DUMP(START_DATE ) -> Typ=12 Len=7: 100,112,2,7,1,1,1 
DUMP(END_DATE) -> Typ=12 Len=7: 100,112,2,13,1,1,1 
```

重要的是，我不应该修改查询......因为它在所有其他数据库中工作......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:28:59.623

**您的声明：**

```
SELECT dump(START_DATE), dump(END_DATE) FROM SCHEDULE WHERE C_ID=5026 
```

我得到的结果是，

```
DUMP(START_DATE ) -> Typ=12 Len=7: 100,112,2,7,1,1,1 and DUMP(END_DATE) -> Typ=12 Len=7: 100,112,2,13,1,1,1 
```

**我的评论：**

100,112,2,7,1,1,1

100,112,2,13,1,1,1

这导致 YYYY-MM-DD

```
Startdate    0012-02-07 00:00:00
Enddate      0012-02-13 00:00:00 
```

所以你大约有2000年的时间。

日期数据类型的格式是

```
byte 1 - century (excess 100)  100 - 100 = 00
byte 2 - year (excess 100)  112 - 100 = 12
byte 3 - month = 2
byte 4 - day = 7
byte 5 - hour (excess 1) 1 - 1 = 0
byte 6 - minute (excess 1) 1 - 1 = 0
byte 7 - seconds (excess 1) 1 - 1 = 0 
```

# bash - bash脚本在目录中创建多个目录

> ID：10296172
> 
> 赞同：0
> 
> 时间：2012-04-24T10:30:07.693
> 
> 标签：bash

我想在 nix 中创建一个这样的目录结构：

`mkdir -p 1,2,3,4,5,6,7,8,9`在每个文件夹中我想要文件夹`1,2,3,4,5,6,7,8,9`

我已经开始编写一个像这样的简单循环（一直到文件夹 2），但这似乎效率低下。

```
#!/usr/bin/env bash   
for i in 1 2 4 5 6 7 8 9; do mkdir -p 1/{1,2,3,4,5,6,7,8,9} $i, mkdir -p  2/{1,2,3,4,5,6,7,8,9} $2; done 
```

有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T10:39:17.220

This should help (requires bash):

```
mkdir -p {1,2,3,4,5,6,7,8,9}/{1,2,3,4,5,6,7,8,9} 
```

Some newer versions of bash also allow this:

```
mkdir -p {1..9}/{1..9} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:41:45.833

Sounds simple enough unless I've misunderstood:

```
#!/bin/sh
for i in `seq 1 9`; do
  for j in `seq 1 9`; do
    mkdir -p $i/$j
  done
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:25:25.607

Perl 解决方案。

```
for($counter = 1; $counter <= 9; $counter++)
{
        `mkdir -p $counter/{1..9}`; //Executing Unix Command
} 
```

# python - 将作为 pyodbc 游标属性返回的所有字段附加到用户定义的数据类型

> ID：10296175
> 
> 赞同：1
> 
> 时间：2012-04-24T10:30:11.720
> 
> 标签：python, pyodbc

我有这些代码：

```
classinstance.col1 = queryresult.col1
classinstance.col2 = queryresult.col2
classinstance.col3 = queryresult.col3
classinstance.col4 = queryresult.col4 
```

它将变量添加到`classinstance`并分配与`queryresult`变量同名的列的值。

我希望使我的代码更灵活一点，并且不需要按名称识别列。为此，我想知道是否有某种方法可以对所有列进行循环，而不是单独处理每一列。像这样的东西（这是伪代码而不是实际代码，因为我不确定它实际上应该是什么样子）：

```
for each var in vars(queryresult):
    classinstance.(var.name) = var.value 
```

这可能吗？它需要什么？我有一些基本的误解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T14:07:11.937

我假设以下示例的结果中只有一行（在[此处](https://code.google.com/p/pyodbc/wiki/Rows)注释的帮助下构建）。这里的关键组件`zip(row.cursor_description, row)`用于从`pyodbc.Row`对象中获取列名。

```
# convert row to an object, assuming row variable contains query result
rowdict = { key[0]:value for (key, value) in zip(row.cursor_description, row) }

# loop through keys (equivalent to column names) and set class instance values
# assumes existing instance of class is variable classinstance
for column in rowdict.keys():
    classinstance[column] = rowdict[column] 
```

# iphone - 运行 Clean My Mac 删除开发垃圾文件后，Xcode 项目将无法构建

> ID：10296176
> 
> 赞同：2
> 
> 时间：2012-04-24T10:30:13.467
> 
> 标签：iphone, objective-c, ios, xcode

运行 Clean My Mac 后，此 Xcode 项目将无法构建。看起来该程序清除了一些“开发垃圾文件”，现在我收到了诸如“Foundation/Foundation.h”之类的错误未找到。

该项目在我的笔记本电脑上运行良好，但在另一台 Mac 上运行良好。（基本上没有项目在 Mac 上构建了。）另外一个全新的项目也无法构建同样的错误

![在此处输入图像描述](../Images/33c5cc196091cf8d39a7a1de7061e083.png)

我尝试了两件事，但问题仍然存在：

1.  一个干净和建立。

2.  我已经搜索并发现其中一种解决方案可能是清除框架搜索路径，正如您所看到的，尽管我的是空的：

![框架搜索路径](../Images/38d74b7dbdc4f6bf0df153fbfffea750.png)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:34:00.880

作为 CleanMyMac 的开发人员，我要感谢您报告此问题 :) 我们已在 CleanMyMac 版本 1.10.5 中修复了此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:54:40.127

通过使用 Clean My Mac 卸载 Xcode 然后通过 AppStore 重新安装 Xcode 解决了这个问题。

# php - 如何在 Wordpress PHP 中将图像 URL 更改为图像本身

> ID：10296181
> 
> 赞同：0
> 
> 时间：2012-04-24T10:30:36.977
> 
> 标签：php, wordpress

如何使 Wordpress 像这样工作，当我在发布后将图像的 URL 粘贴到博客文章中时，它将自动替换为图像本身？我知道可以选择从上传图像窗口嵌入图像，但我需要一个像我写的那样工作的解决方案。Wordpress 是在 PHP 中的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:04:42.783

这种方法的风险是您将加载您链接的图像的确切大小。如果您打算使用 调整图像大小`<img src='/path/image1.jpeg' width='..' height='...'/>`，您仍将加载原始图像。

我的想法是，您将在函数中为您的 the_content 添加一个过滤器，以使用正则表达式搜索粘贴图像的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:11:40.223

您将需要编写自己的插件来实现与 content_save_pre 类型匹配的过滤器。

过滤器将需要执行一个正则表达式来搜索 http(s) 后跟通配符并以 .jpg .jpeg .gif .png .tiff 等结尾。

然后，您需要遍历内容中的所有匹配项，然后下载并将它们添加到您的媒体库中。最后一步是用 html 标签替换内容中的原始 URL。

# php - 原则 2：页面、块、策略模式和相关实体

> ID：10296183
> 
> 赞同：3
> 
> 时间：2012-04-24T10:30:54.230
> 
> 标签：php, doctrine-orm, block, strategy-pattern

我的问题正是 Doctrine 文档中[*Strategy Pattern*文章中](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/strategy-cookbook-introduction.html)描述的问题：

*   页面实体
*   一个页面可以有一些块
*   块可能是文本、图像、表格、日历……（策略）
*   页面知道它包含的块，但不知道它们的行为
*   块继承是不可能的

所描述的解决方案（策略模式）似乎正是我所需要的（阅读文章了解更多信息）：

页：

```
<?php

namespace Page\Entity;

class Page
{
    /**
     * @var int
     * @Id @GeneratedValue
     * @Column(type="integer")
     */
    protected $id;

    /**
     * @var string
     * @Column
     */
    protected $title;

    /**
     * @var string
     * @Column(type="text")
     */
    protected $body;

    /**
     * @var Collection
     * @OneToMany(targetEntity="Block", mappedBy="page")
     */
    protected $blocks;

    // ...
} 
```

堵塞：

```
<?php

namespace Page\Entity;

class Block
{
    /**
     * @Id @GeneratedValue
     * @Column(type="integer")
     */
    protected $id;

    /**
     * @ManyToOne(targetEntity="Page", inversedBy="blocks")
     */
    protected $page;

    /**
     * @Column
     */
    protected $strategyClass;

    /**
     * Strategy object is instancied on postLoad by the BlockListener
     *
     * @var BlockStrategyInterface
     */
    protected $strategyInstance;

    // ...

} 
```

策略界面：

```
<?php

namespace Page\BlockStrategy;

interface BlockStrategyInterface
{
    public function setView($view);

    public function getView();

    public function setBlock(Block $block);

    public function getBlock();

    public function renderFrontend();

    public function renderBackend();
} 
```

我可以很容易地想象，如果我展示一个表格或一个日历，我的策略是什么；但是如果我的策略是显示其他实体的内容呢？

该块需要了解实体类/ID，并且必须在删除相关实体时将其删除。

我想在 BlockListener 中的 postLoad 事件中添加`entityClass`和属性并加载相关实体。`entityId`但是如果相关实体不存在怎么办？我无法删除 postLoad 中的块。

因此，我想创建一个其他监听器来监视相关实体的删除并删除该监听器中的引用块。

但这意味着我需要为每个可以放入块中的实体添加一个侦听器。

它可以工作，但它似乎很复杂......也许有人有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:26:21.980

我不确定我是否很好地理解了您的问题，但是如果您想要在实体中包含实体并在删除父亲时删除子实体，您也可以将实体视为一个块并使用复合模式。

您基本上可以在实体和块上使用相同的界面，并且在实体上，显示功能可能类似于：

```
foreach ($block in $blocks) {
  $block->display();
} 
```

要在删除父实体时删除所有子实体，您可以简单地在实体的析构函数上执行此操作。

```
function __destruct() {
   foreach ($block in $blocks) {
     /* call a common interface function that does all that need to be done, implemented on each block */
   }
} 
```

有关复合模式的更多信息： [http ://en.wikipedia.org/wiki/Composite_pattern](http://en.wikipedia.org/wiki/Composite_pattern)

# haskell - Haskell：隐藏模块中的函数（即使函数只能被同一模块中的其他函数使用）

> ID：10296185
> 
> 赞同：1
> 
> 时间：2012-04-24T10:30:55.213
> 
> 标签：haskell, ghc, ghci, winghci

假设我有一个文件 NecessaryModule.hs，它具有以下内部结构：

```
module NecessaryModule where

addNumber1 :: Int -> Int -> Int
addNumber1 a b = a + b

addNumber2 :: Int -> Int -> Int
addNumber2 a b = a + b 
```

当我做 ：

```
:load NecessaryModule 
```

addNumber1 和 addNumber2 在当前范围内都可用。有没有办法隐藏函数 addNumber2 以便它可用于同一模块中的其他函数但当我以上述方式加载模块时不会加载？谢谢

## -------------------------------------------------- --------------------------------------

[对纳米窃贼的回应]

我通过以下方式尝试了您的建议，但它对我不起作用。我有一个名为 test2.hs 的文件，如下所示：

```
--test2.hs
module Test2 (addNumber1) where

addNumber1 :: Int -> Int -> Int
addNumber1 a b = a + b

addNumber2 :: Int -> Int -> Int
addNumber2 a b = a + b 
```

但是当我这样做时

```
:load test2 
```

然后我可以同时调用 addNumber1 和 addNumber2。我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T10:33:48.270

您只需在模块行上指定要导出的方法：

```
module NecessaryModule (addNumber1) where
.... 
```

如果您不指定该行，则默认情况下它包含所有内容。

# javascript - jQuery Mobile 输入不是来自外部链接的样式

> ID：10296188
> 
> 赞同：0
> 
> 时间：2012-04-24T10:31:03.777
> 
> 标签：javascript, jquery-mobile

我有一个非常基本的 jquery 移动页面，它是 3 个`data-role:page`div 合二为一`index.php`。第一页只是一个背景图像和`input type="tel"`屏幕`position:fixed`中心的一个。如果我直接在 iPhone 上加载网站，样式和定位都是正确的。

`?event=123123123`然而，人们将通过传入参数（例如，随机字符串）的外部链接到达该站点。以这种方式加载时，第一页总是以非样式加载，即输入框忽略所有 css，包括 jquery.css 和我自己的，无论是内联的、在头部声明的、从外部文件加载的等等。如果我刷新页面，然后样式启动，看起来应该是这样。

我基本上已经尝试了我能想到的所有东西（以及很多可能甚至没有意义的东西），比如绑定到`pagebeforeload`,`pageinit`等`pageshow`，例如：

```
$( '#step1' ).live( 'pagebeforecreate',function(event){
 // alert( 'This page was just enhanced by jQuery Mobile!' );

 $('<div id="formbox"><form><input type="tel" name="number" id="number" value="" style="width:87%; height:40px; font-size:36px; font-weight: bold; left:14px; position:relative; text-align:center;" /></form></div>').appendTo('#formboxouter');
 // var $container = $('#step1');
 // refreshStyles($container);
 $('#formbox').trigger('create');
 // $( window.document ).trigger( "mobileinit" );
}); 
```

我已经到了“把所有东西都扔到墙上，看看有什么东西会粘住”的沮丧阶段，好吧，没有任何东西被粘住。

我找到了很多关于修改内部链接（例如`rel=external`）的方法的信息，但我没有发现任何似乎可以解释为什么会发生这种情况的信息。

为什么传递外部参数会导致样式无法加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:41:15.807

您可能需要阅读有关参数的 JQM 文档。也尝试`$('.ui-page').trigger('create');`代替`$('#formbox').trigger('create');`

> **在页面之间传递参数**
> 
> jQuery Mobile 不支持将查询参数传递给内部/嵌入式页面。例如，如果框架看到指向“#somePage?someId=1”的链接，它会将其解释为“#somePage”并导航到 ID 为 somePage 的内部页面 div 并应用 #somePage?someId= 的数据 URL 1 到该页面容器。对其他参数（例如“#somePage?someId=2”）的后续调用将找到相同的 div，因为 jQuery Mobile 引用了 div 上的 data-url，该 url 仅设置一次并将保持在 #somePage?someId=1。
> 
> 如果页面之间需要查询参数，您可以将两个插件添加到您的项目中。有一个轻量级[页面参数插件](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)和一个功能更全面的[jQuery Mobile 路由器插件](https://github.com/azicchetti/jquerymobile-router) ，可与主干.js 或脊柱.js 一起使用。

[信息来源](http://jquerymobile.com/demos/1.1.0/docs/pages/page-scripting.html)

# symfony - Symfony2实体表单类型的Texbox自定义表示？

> ID：10296190
> 
> 赞同：0
> 
> 时间：2012-04-24T10:31:04.540
> 
> 标签：symfony, symfony-forms

我的实体`Person`与实体有一对多的关系`Tag`。创建新人时，我想显示一个文本框，用于分配**以逗号分隔的标签名称**。然后用户可以输入一个现有的标签名称或一个新的标签名称（在这种情况下，一个新的`Tag`实体被创建和持久化）。

不幸的是，[实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)只有复选框和选择表示。如何实现我自己的文本框表示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:22:50.287

您需要创建自定义表单类型以及自定义数据转换器。

[本文](http://readthedocs.org/docs/symfony2-document/en/latest/cookbook/form/create_custom_field_type.html)是创建自己的表单类型的非常好的指南。

另外，请查看[Symfony 自己的 EntityType 源](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Doctrine/Form/Type/EntityType.php)以了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:28:32.933

一种方法是创建自定义[数据转换器](http://symfony.com/doc/current/cookbook/form/data_transformers.html)。

# php - 在第一个 & 号之后去掉其余的查询字符串

> ID：10296194
> 
> 赞同：1
> 
> 时间：2012-04-24T10:31:31.623
> 
> 标签：php, regex, query-string

我正在尝试从 url 中删除查询字符串，但我需要保持第一个键/var 不变。所以我知道第一次出现的＆符号是我想要丢弃查询字符串的点。最好的方法是什么？下面是我的代码，它目前只是一直附加到查询字符串。

```
<a href="<?php echo $_SERVER["REQUEST_URI"] ?>&sortkey=year&sortval=asc"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:07:17.910

你可以简单地匹配所有不是 & 符号的东西，直到我们找到第一个 & 符号。例如

```
$incomingURI = 'http://www.example.com/?id=12&left=right&up=down';
preg_match('/[^&]+/', $incomingURI, $match);
$outgoingURI = $match[0]; 
```

*上面的代码将在变量 $outgoingURI 中输出以下内容：*

```
http://www.example.com/?id=12 
```

这将比使用 preg_replace 快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:37:46.770

使用[strpos](http://php.net/strpos)函数找到 & 符号的位置。然后使用[substr](http://php.net/manual/en/function.substr.php)函数获取 URL 的部分直到该点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:45:15.020

如果我正确理解了您的问题，那么您想在第一次出现＆符号后删除所有内容。你可以使用这样的东西：

```
<?php
$uri = 'blah.blah.com?a=b&sortkey=year&sortval=asc';
$new_uri = preg_replace("/([^&]+)&(.*)/", "$1", $uri)
?> 
```

图案：

```
([^&]+) : Match everything except '&'
&       : First '&'
(.*)    : Any thing after that 
```

被第一个组 ( `$1`) 替换，它是第一次出现 之前的任何内容`&`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:43:47.733

strpos 可以，但除非您使用 RewriteRule，否则 $_SERVER['SCRIPT_NAME'] 或 $_SERVER['PHP_SELF'] 就足够了（并且可能更有效）。

如果 URL 正在重写，则 $_SERVER['REDIRECT_URL'] 更合适。

编辑：我错过了保留查询字符串第一部分的内容：s

# php - 需要使用 Dublin Core 索引 Zotero 中的一些变量

> ID：10296196
> 
> 赞同：0
> 
> 时间：2012-04-24T10:31:32.343
> 
> 标签：php, drupal-6

我想使用 Dublin Core 从我在 Zotero 的站点中索引一些变量。我搜索了如何索引这些变量，但还没有找到解决方案。下面列出了一些变量。

1.  页数
2.  系列
3.  系列号
4.  卷数
5.  地方
6.  索书号
7.  系列名称
8.  系列文本
9.  期刊缩写
10.  集数
11.  运行时间
12.  部分
13.  报告编号
14.  会议名称
15.  来宾
16.  节目名称
17.  报告类型

我正在索引这样的标题：`<meta name="dc.title" content="lorem ipsum"/>`. 请告诉我如何索引其他变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:14:11.413

也在这里问和回答：[http ://forums.zotero.org/discussion/23021/some-variables-need-to-index-in-zotero-using-dublian-core/#Item_4](http://forums.zotero.org/discussion/23021/some-variables-need-to-index-in-zotero-using-dublian-core/#Item_4)

DC 标准不够丰富，无法显示和/或导入这些类型的字段。最好的方法是使用像 MODS 或 Bibliontology RDF 这样的丰富标准，并通过 unAPI [http://www.zotero.org/support/dev/exposing_metadata#using_an_open_standard_for_exposing_metadata将其提供给 Zotero](http://www.zotero.org/support/dev/exposing_metadata#using_an_open_standard_for_exposing_metadata)

# ios - 对于 iPad 和 iPhone，使用 CADisplayLink 是否必须为 60fps？

> ID：10296199
> 
> 赞同：0
> 
> 时间：2012-04-24T10:31:47.507
> 
> 标签：ios, cadisplaylink

换句话说，我们可以选择每秒 20 次调用处理程序，还是每秒 45 次，还是必须每秒 60 次？

我想模拟它的一种方法是使用给处理程序的时间戳来确定它是否是“还没有采取行动的时间”——如果不是，直接返回而不做任何事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:45:22.453

您可以使用该属性在每帧[`frameInterval`](http://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40009031-CH1-SW4)调用处理程序，其中是一个正整数。`60/n``n`

您不能`45`每秒调用处理程序次数，但可以使用以下值：`60`, `30`, `20`, `15`, `12`, ...

# css - IE8 中的不透明度不起作用

> ID：10296204
> 
> 赞同：2
> 
> 时间：2012-04-24T10:32:04.713
> 
> 标签：css, internet-explorer, internet-explorer-8, opacity

我设置了覆盖层的不透明度，它在 FF、Chrome、Safari 和 IE9 中运行良好，但在 IE8 中没有。我google了很多，但没有找到任何解决方案。

我的CSS代码是

```
#overlayEffectDiv { 
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    width: 100%;
    height: 100%;
    filter: alpha(opacity = 50);
    -moz-opacity: 0.5;
    -khtml-opacity: 0.5;
    opacity: 0.50;
    background: #000;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 3000;
    /* hide it by default */
    display: none;
} 
```

在 FF 中，它看起来如下：

![在此处输入图像描述](../Images/275ac70391de38f4e6d757fa14ad182e.png)

但在 IE8 中它看起来如下：

![在此处输入图像描述](../Images/210b4e58b277d67b80560dac5d92fe78.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T06:32:35.313

[在这里](https://stackoverflow.com/questions/1284163/jquery-ie-fadein-and-fadeout-opacity)找到解决方案。不透明度不是问题，我做了一些调试，发现它对 ie8 工作正常，问题出在 jquery fadeIn 和 fadeOut。jQuery fadeIn 使半透明背景变为实心。

感谢所有帮助过的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:46:22.767

I don't think you syntax for the filter is correct:

[http://blogs.msdn.com/b/ie/archive/2009/02/19/the-css-corner-using-filters-in-ie8.aspx](http://blogs.msdn.com/b/ie/archive/2009/02/19/the-css-corner-using-filters-in-ie8.aspx)

this might not be the cause of the problem but it might be worth ruling it out.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:46:56.687

May be you have define `zoom` also. write like this:

```
#overlayEffectDiv { 
    width: 100%;
    height: 100%;
    filter: alpha(opacity = 50);
    opacity: 0.50;
    *zoom:1;
    background: #000;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 3000;
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:49:53.157

如果某些涉及图层的动画效果出现问题，您可以完全避免在 IE 中使用，而是使用具有黑色背景颜色`filter`的小（不太小，如 2x2，使用例如 100x100）透明文件作为重复背景和〜 `png`80% 不透明度

# jquery - val() 开启 在 ie7 中返回文本而不是值

> ID：10296213
> 
> 赞同：4
> 
> 时间：2012-04-24T10:32:58.490
> 
> 标签：jquery

```
$(this).find('select option:selected').each(function (i, val) {

    var selectedValue = $(val).val(); //this returns the text from the option instead of the value
}); 
```

这是ie7中的一个已知问题吗？我没有找到任何关于它的信息？可能的解决方法？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T10:36:55.027

根据[http://api.jquery.com/val/上的文档](http://api.jquery.com/val/)

`.val()`仅适用于

> .val() 方法主要用于获取输入、选择和文本区域等表单元素的值。在`<select multiple="multiple">`元素的情况下， .val() 方法返回一个包含每个选定选项的数组；如果未选择任何选项，则返回 null。

为了实现你想要的，你可以迭代`select`并调用`.val()`它，你的原始代码实际上是调用`val()`on `option`，而不是实际的`select`元素，这就是它不起作用的原因。

```
$(this).find('select').each(function (i, val) {

    var selectedValue = $(this).val(); 
}); 
```

`val()`有一个额外的好处是能够在`multiple`选择的情况下返回一个值数组：（强调我的）

> .val() 方法主要用于获取输入、选择和文本区域等表单元素的值。**在`<select multiple="multiple">`元素的情况下， .val() 方法返回一个包含每个选定选项的数组**；如果未选择任何选项，则返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:35:12.900

尝试

对于单选

```
var selectedValue = $(this).val(); 
```

您只需要在上面写下即可获得选定的值。

对于多选它应该是

```
var result = ""; 
$('#idselect  option:selected').each(function(i, item)
{     
   result += $(this).val() + ", "; 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:43:40.533

这是一种预期的行为，因为您要求的是选项的值而不是元素本身。

不要把事情复杂化。

```
$(this).find('select').each(function() {
   var val = $(this).val();
}); 
```

# tsql - TSQL 选择一行或多行加入

> ID：10296215
> 
> 赞同：3
> 
> 时间：2012-04-24T10:33:16.663
> 
> 标签：tsql, sql-server-2005

这是类似于：[TSQL select rows by one from 2 conditions 的问题](https://stackoverflow.com/questions/10208849/tsql-select-rows-by-one-from-2-conditions)，但我想要的结果不同

我有一张这样的桌子：

```
ORDER_ID   CODE1   CODE2   CODE3   STATUS    TYPE        SUM      GROUP
1          '001'   'BIGP'  NULL    4         'company'   120      48
2          '002'   'BIGP'  NULL    1         'priv'      100      20
3          '001'    NULL   NULL    6         'priv'      50       49
4          '002'    NULL   'L'     1         'company'   1253     22 
```

第二张桌子像这样：

```
ADDRESS_ID   ORDER_ID   ZIP       TYPE   ADD_DATE       CATEGORY     VERIFIED
1            1          '15-125'    'K1'   '2010-01-01'   'CLIENT'     1
2            1          '22-022'    'D1'   '2010-01-02'   'SYSTEM'     1
3            2          '16-159'    'D2'   '2010-01-02'   'SYSTEM'     1
4            2          '15-125'    'D2'   '2010-02-01'   'CLIENT'     0 
```

第三和第四个表包含邮政编码和城市名称，如下所示：

```
ZIP       CITY
'15-125'    'Warszawa'
'22-022'    'Koszalin'
'16-159'    'Krakow'
'15-125'    'Lublin' 
```

对于每一个订单

*   状态不在 (4,6)
*   '002' 和 '005' 之间的代码 1
*   (code2=null and code3=null) or (code2 in ('BIGA', 'BIGP') and code3=null) or (code2=NULL and code3 = 'L')

如果 code1 ='002' AND group IN (48,59,60,87) 我必须选择一个地址
（非常感谢 Nikola Markovinović）：

```
SELECT TOP 1000 o.order_Id
              , a.Address_Id
              , a.Zip
            --, *
FROM orders o
CROSS APPLY
(
 select TOP 1
        a.Address_Id,
        a.Zip
   from address a
  WHERE a.order_Id = o.order_Id
  ORDER BY case a.Type 
                when 'D2' then 1 
                when 'K1' then 2 
                else 3 
            end,
        a.ADD_DATE
) a
WHERE
 o.Status NOT IN (4, 6)
 AND code1='002'
 AND group IN (48,59,60,87)
 AND ((code2 IS NULL AND code3 IS NULL) OR (code2 IN ('BIGA', 'BIGP') AND code3 IS NULL) OR (code2 IS NULL AND code3 = 'L')) 
```

对于所有其他符合最高标准并获得 code1 ='002' AND group NOT IN (48,59,60,87) 的订单，我必须为那些已验证 =1 的订单选择所有地址

收集这些地址后，我将能够检查特定邮政公司是否可以将我的邮件递送到这些地址（我将检查另一个包含邮政编码的表格）

我正在考虑全部联合，首先选择并与第二个进行联合，这将返回 code1 ='002' 和 group NOT IN (48,59,60,87) 的所有地址。

但也许没有联合就可以做到吗？

这是我想要得到的最终结果：

```
CODE1        TYPE        COUNT_OF_ORDERS        COUNT_OF_ADDRESSES     COMPANY1  OTHER
'001'        'NORMAL'    125                    150                    110       40
'002'        'NORMAL'    100                    122                    100       22
'003'        'NORMAL'    150                    110                    100       10
'004'        'NORMAL'    200                    220                    220       0
'005'        'NORMAL'    220                    240                    210       30
'005'        'PRIORITY'  100                    110                    110       0
'SX1'        'PRIORITY'  100                    100                    20        80 
```

因此，如果我的类型是“正常”，我必须检查该订单地址是否存在于具有正常邮政编码的表格中，如果它具有“优先”类型，我必须检查具有优先代码的表格。

如果代码存在于特定表中，我将 +1 添加到 COMPANY1 列，如果不添加到 OTHER，则这些列的总和必须是我的地址的总和。

* * *

这是我设法完成的查询（在@Nikola Markovinović 的帮助下）

```
SELECT TOP 1000 o.order_Id
              , a.Address_Id
              , a.Zip
            --, *
FROM orders o
CROSS APPLY
(
 select TOP 1
        a.Address_Id,
        a.Zip
   from address a
  WHERE a.order_Id = o.order_Id
    AND code1='002'
    AND o.[group] IN (48,59,60,87)
  ORDER BY case a.Type 
                when 'D2' then 1 
                when 'K1' then 2 
                else 3 
            end,
        a.ADD_DATE
  UNION ALL
 select 
        a.Address_Id,
        a.Zip
   from address a
  WHERE a.order_Id = o.order_Id
    AND ((code1='002' AND o.[group] NOT IN (48,59,60,87)) OR code1 IN ('001', '003', '004', '005'))
    --I'm not shure of that top line, it work's but mayby it con de written better
    AND Verified = 1
) a
WHERE
 o.Status NOT IN (4, 6)
 AND ((code2 IS NULL AND code3 IS NULL) 
    OR (code2 IN ('BIGA', 'BIGP') AND code3 IS NULL) 
    OR (code2 IS NULL AND code3 = 'L')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:05:07.547

您可以轻松过滤地址 ( `[group] IN (48,59,60,87) OR Verified = 1)`，但调整 TOP 1 会使事情变得荒谬 ( `TOP (case when [group] IN (48,59,60,87) then 1 else (select count(*) from addresses where order_Id = o.order_Id) end)`。所以我建议您这样做，`union all`但仅针对地址：

```
SELECT TOP 1000 o.order_Id
              , a.Address_Id
              , a.Zip
            --, *
FROM orders o
CROSS APPLY
(
 select TOP 1
        a.Address_Id,
        a.Zip
   from address a
  WHERE a.order_Id = o.order_Id
    AND o.[group] IN (48,59,60,87)
  ORDER BY case a.Type 
                when 'D2' then 1 
                when 'K1' then 2 
                else 3 
            end,
        a.ADD_DATE
  UNION ALL
 select 
        a.Address_Id,
        a.Zip
   from address a
  WHERE a.order_Id = o.order_Id
    AND o.[group] NOT IN (48,59,60,87)
    AND Verified = 1
) a
WHERE
 o.Status NOT IN (4, 6)
 AND code1='002'
 AND ((code2 IS NULL AND code3 IS NULL) 
    OR (code2 IN ('BIGA', 'BIGP') AND code3 IS NULL) 
    OR (code2 IS NULL AND code3 = 'L')) 
```

PS 如果订单可能没有地址，请将 CROSS APPLY 替换为 OUTER APPLY。

# c# - 从编译器/CLR 的角度来看，接口和具体实例有什么区别？

> ID：10296218
> 
> 赞同：1
> 
> 时间：2012-04-24T10:33:21.797
> 
> 标签：c#, oop, clr

我知道接口是一种不包含数据但公开行为和属性的抽象类型，并且对象的实例是内存中存在的对象的出现或副本。

我想知道编译器/底层代码如何处理两者的差异？基于对此的回答，如果我将接口作为依赖项传递给对象而不是具体实例，为什么代码更松散耦合？`DoSomething`如果我调用接口中定义`MyClass`的方法而不是`DoSomething`具体实例中定义的方法，会发生什么区别`MyClass`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:00:35.580

我知道您说过您了解界面是什么——但考虑到您将第二个问题与第一个问题联系起来的方式，我确实想知道这是否完全正确。第二个可以在不知道第一个的情况下回答，它也不受它的任何影响。

*特别是关于*为什么它更松散耦合的问题与编译器的实现或任何东西无关：它只是*软件架构*。

除了方法/属性的存在之外，接口对实现类型没有任何限制（嗯，从技术上讲，它们也是方法）。

实现甚至不必在类型本身上公开，类型也不必具有特定的构造函数等。更重要的是 - 它甚至不必是*class*。然后有一个（相当极端的）事情，使用接口，单一类型可以有同一个接口的多个实现。

一旦您使用基类，就可能会引入大量其他限制。

诚然，这些显然也是一件好事 - 例如，如果已知的具体基础已知是不可变的（为了一致性）并且不允许在其构造函数中使用“空值”等（都不能通过接口强制执行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:40:13.193

您可以拥有接口或抽象类的许多实现（具体实例）。

通常，您应该定义接受具有接口的类层次结构而不是具体类的方法，以便它们是通用的，并且不必为您定义的每个新实现重写。

在基类或派生类中调用该方法应该调用相同的方法，前提是您正确地覆盖了该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:52:35.493

查看 MSDN 杂志文章：[“深入了解 .NET Framework 内部结构以了解 CLR 如何创建运行时对象”](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx#S12)以了解实现细节。
我认为运行时需要支持接口的主要原因尤其与不同编译时间的程序集在运行时可能相互连接的事实有关。

# linux - ant sshexec 任务在执行的命令返回时或之前返回吗？

> ID：10296220
> 
> 赞同：0
> 
> 时间：2012-04-24T10:33:32.437
> 
> 标签：linux, ant

基本上我在一个 ant 目标中有 2 个 sshexec 任务，一个接一个。第一个在一台机器上启动消息发送者，第二个在另一台机器上启动消息接收者。我假设 sshexec 任务将发出命令来运行消息发送方，然后在发送方运行时返回，然后下面的 sshexec 任务将启动接收方，因此发送方和接收方将并行运行，这是我希望实现的，但我不确定是否真的是这样，或者实际上第一个任务只会在发送方返回时返回，因此接收方只有在发送方完成执行后才会开始。

sshexec 任务页面似乎没有提供太多信息，而且我对 mac 有点陌生（这些命令是在运行 macos 10 的 mac minis 上发出的），所以任何帮助将不胜感激，谢谢！

```
 <!--start sender-->
    <sshexec host="${ip.client3}"
                 username="${username}"
                 password="${userpassword}"
                 trust="true"
                 command="./sender"
    />

    <!-- start receiver-->
    <sshexec host="${ip.client4}"
                 username="${username}"
                 password="${userpassword}"
                 trust="true"
                 command="./receiver "
    /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T05:27:34.313

`<sshexec>` task will return after the remote command returns.

If you just want the two commands to start at the same time, you can use `<parallel>` task. Any task nested in `<parallel>` task will run "at the same time" by multi threading. However, in this way, `<sshexec>` still need to wait for the two commands to return.

If you just want your ant script to launch those two commands and continue building without waiting for remote commands to return, you may use things like `nohup` in your commandline.

I am not sure if nohup works, because when I run a remote command from a ssh terminal with nohup like this:

```
nohup command & [ENTER] 
```

I have to press enter again before I start to use the same terminal to do something else.

# python - Python：使用 argparse 时，允许最后指定位置参数或在帮助输出中先写入

> ID：10296221
> 
> 赞同：1
> 
> 时间：2012-04-24T10:33:34.600
> 
> 标签：python, argparse

这段代码

```
import argparse

parser = argparse.ArgumentParser()

parser.add_argument('target', help='Specifiy who to attack!')

magic = ['fireball', 'heal', 'microwave']
parser.add_argument('-m', '--magic', nargs='*',
                    choices=magic,
                    help=('Magic'))
parsed_arguments = parser.parse_args() 
```

生成此帮助输出

```
usage: Example.py [-h]
                  [-m [{fireball,heal,microwave} [{fireball,heal,microwave} ...]]]
                  target

positional arguments:
  target                Specifiy who to attack!

optional arguments:
  -h, --help            show this help message and exit
  -m [{fireball,heal,microwave} [{fireball,heal,microwave} ...]], --magic [{fireball,heal,microwave} [{fireball,heal,microwave} ...]]
                        Magic 
```

我认为帮助输出令人困惑，并且看起来应该最后指定目标，但是这不起作用：`python example.py -m fireball troll`给`argument -m/--magic: invalid choice: 'troll'`.

我意识到语言的语法变得模棱两可，但仍然可以说，因为句子最后应该存在一个单词（目标）`troll`不是该`-m`选项的论据。

**问题：**

1.  有没有办法让位置参数最后指定而不会击败 argparse？
2.  有没有办法让 argparse 帮助输出表明确实应该首先指定目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:18:14.193

正如前面在评论中提到的，POSIX 系统上表示选项结束的标准方法是将参数和选项用`--`.

至于第二个问题：您可能必须创建自己的 HelpFormatter 来实现这一点，请参阅[formatter-class](http://docs.python.org/dev/library/argparse.html#formatter-class)。您可能能够从默认格式化程序继承并仅覆盖必要的函数来生成使用行。

# asp.net-mvc - 对象引用未设置为对象错误 MVC3 的实例

> ID：10296230
> 
> 赞同：1
> 
> 时间：2012-04-24T10:34:31.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, actioncontroller

我有一个 ajax 帖子，它为我提供了用户在我的表单中输入的值。

在我的数据库中，我有两个正在使用的实体，我首先使用模型。但是，尝试执行此操作时出现“对象引用未设置为对象的实例”错误：

> targetCardQuestionAnswer.SelectedQuestion.Id = selectedQuestionViewModel.QuestionID;

这是我的控制器帖子：

```
 [HttpPost]
    public bool AnswerForm(SelectedQuestionViewModel selectedQuestionViewModel)
    {
        if (ModelState.IsValid)
        {
        var goalCardQuestionAnswer = new GoalCardQuestionAnswer();

        goalCardQuestionAnswer.SelectedQuestion.Id = selectedQuestionViewModel.QuestionID;
        goalCardQuestionAnswer.Comment = selectedQuestionViewModel.Comment;
        goalCardQuestionAnswer.Grade = selectedQuestionViewModel.Grade;

        answerNKIRepository.SaveQuestionAnswer(goalCardQuestionAnswer);
        answerNKIRepository.Save();

        } 
```

我选择的问题视图模型：

```
 public class SelectedQuestionViewModel
{

    public int? Grade { get; set; }
    public string Comment { get; set; }
    public string SelectedQuestionText { get; set; }
    public int QuestionID { get; set; }

} 
```

我的数据库模型

![在此处输入图像描述](../Images/dcfdc9b7341a916df337d18b7a52fab3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T10:37:50.313

您必须初始化您的`SelectedQuestion`属性：

```
var goalCardQuestionAnswer = new GoalCardQuestionAnswer();
goalCardQuestionAnswer.SelectedQuestion = new SelectedQuestion(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:42:56.487

如果我是你，我还会在我的模型中添加一个外键属性 SelectedQuestionId。然后您可以设置此值，您的导航属性将在 SaveChanges 或当您从存储库请求对象时自动检索。

# asp.net - Azure webrole 充当第三方 api 的代理

> ID：10296231
> 
> 赞同：0
> 
> 时间：2012-04-24T10:34:32.180
> 
> 标签：asp.net, api, azure

我目前正在研究开发一个 azure 托管 Web 服务来充当我的移动应用程序和第三方 Web 服务之间的代理，以保护我的 API 机密。我对天蓝色架构的经验并不多，并且想知道是否有人可以提供一些指导。

考虑到这个问题，我的第一个想法是在 azure 上托管一个 asp.net Web API，将数据从手机发送到充当代理的 azure API，后者将接收 Web 请求，然后转发信息。通过另一个 httpwebrequest 将 API 秘密提供给 Web 服务，然后将该响应作为原始 API 调用响应返回。

首先，这行得通吗？其次，如果我让一个网络角色执行此任务，它一次只能处理一个请求，而必须等待一个请求从第三方返回，然后再从另一部手机发送请求？如果对第三方的调用需要一秒钟左右的时间，我猜就可扩展性而言，这可能会成为一个问题。

任何其他关于我如何做到这一点的架构建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:11:54.290

据我所知，Azure (YET) 尚不支持 ASP.NET Web API，Windows Azure 仅运行 .NET 4 运行时，有一些方法可以在 Azure 上运行 MVC 4，但尚未得到官方支持。

您当然可以拥有一个代理服务来拦截您的请求，然后将其转发，该架构听起来确实有点令人费解，但您可能/必须有正当理由。我会尝试为来自您的客户端的所有通信使用 HTTP (REST)，以实现最大的互操作性并减少延迟。

您的第二个问题是关于横向扩展，您永远不应该运行您的 Web 角色的一个实例，因为这不符合 Azure SLA（最低 2 个）。当您正在寻找构建互联网可扩展应用程序时，您还应该始终努力实现异步编程/设计。如果您构建无状态 WCF 服务，那么您可以水平扩展以满足更多流量。如果您的消费者具有全球影响力，您还可以在服务的地理定位实例中使用 Windows Azure 流量管理器[http://msdn.microsoft.com/en-us/gg197529](http://msdn.microsoft.com/en-us/gg197529)

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:48:11.800

如果您的意思是代理设置将作为正常的 Web 服务运行，它会“工作”......但我认为它没有太多机会让您的 API 保密。如果有人想学习，他们会很容易做到（他们所要做的就是查看网络流量）。

对于第二个问题：IIS/Azure 中运行着多个线程（无需配置任何东西）。由于明显的原因（两个请求而不是一个），延迟会减慢您的站点，并且代理请求期间的延迟将占用更多的工作线程；但这不应该是一个大问题，除非您期望您的网站有大量流量。

# python - 如何在 Python 中使用 lxml 将 html 元素与另一个标签包围起来

> ID：10296243
> 
> 赞同：-1
> 
> 时间：2012-04-24T10:35:46.520
> 
> 标签：python, html, html-parsing, lxml

我想做的是这样的。在我的页面中，我有一个包含此标签的 html 文档

```
<p class="pretty">
Some text
</p> 
```

我想用

```
<blockquote>
    <p>
    Some Text
    </p>
</blockquote> 
```

我可以使用剥离标签的类，`tag.attrib.pop('class')`但我无法了解如何将另一个 html 标签包装在特定标签周围。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:46:04.130

我相信您的想法是错误的：您不能将一个元素包裹在另一个元素上。您需要做`<p>`的是将.`<p>``<blockquote>``<p>``<p>``<blockquote>`

# linux - 如何订阅补充服务器频道以在 RHEL 4.x 上安装 sun jdk 6

> ID：10296244
> 
> 赞同：7
> 
> 时间：2012-04-24T10:35:51.777
> 
> 标签：linux, installation, java, redhat, sun

我想在 RHEL 4.x 上安装 sun jdk 6， `yum install java-1.6.0-sun-devel`但发现我必须订阅补充服务器频道。我怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T14:40:31.430

添加补充频道/存储库：

```
yum-config-manager --enable rhel-6-server-supplementary 
```

检查所需的软件包是否可用并安装：

```
yum list *-sun-devel
yum install java-1.6.0-sun-devel 
```

# python - 在python中 - 在嵌套字典中查找最大日期

> ID：10296251
> 
> 赞同：2
> 
> 时间：2012-04-24T10:36:24.697
> 
> 标签：python

我有一本如下所示的字典。

对于键 '10000ag2' 和 10000ag1'，找出哪个键具有最长日期的 last_event 的最有效方法是什么？

```
{'10000ag2': 
    {'last_view': datetime.datetime(2012, 4, 24, 8, 27, 30),
     'last_event': datetime.datetime(2012, 4, 24, 8, 28, 30),
     'last_prid': '300'},
 '10000ag1':
    {'last_view': datetime.datetime(2012, 4, 24, 8, 27, 30),
     'last_event': datetime.datetime(2012, 4, 24, 8, 28, 30),
     'last_prid': '300'}} 
```

我期望一个列表，例如 20 个顶级键。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T10:39:48.030

```
max(my_dict.items(), key=lambda x: x[1]['last_event'])[0] 
```

# encryption - 当我拥有原始文件时恢复 AES 加密文件密码

> ID：10296259
> 
> 赞同：0
> 
> 时间：2012-04-24T10:37:19.687
> 
> 标签：encryption

如果有人同时拥有加密文件和原始文件 - 有没有办法知道用于加密文件的秘密是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:07:22.590

AES 是一种不易受到[Known-plantext 攻击](http://en.wikipedia.org/wiki/Known-plaintext_attack)的分组密码。蛮力是你唯一的选择。

# android - create balls moving from the edge of the screen

> ID：10296265
> 
> 赞同：0
> 
> 时间：2012-04-24T10:37:42.417
> 
> 标签：android, canvas

I am doing a game . It have balls will moving from the edge of the screen .To do it , I used a function random

```
public void random(){
    Random rnd = new Random(System.currentTimeMillis());
    x = rnd.nextInt(gameView.getWidth() - bmp.getWidth());
    y = rnd.nextInt(gameView.getHeight() - bmp.getHeight());
    xSpeed = rnd.nextInt(10) - 5;
    ySpeed = rnd.nextInt(10) - 5;
    x = x + xSpeed;
    y = y + ySpeed;
} 
```

If I used:

```
x = rnd.nextInt(gameView.getWidth() - bmp.getWidth()); 
y = rnd.nextInt(gameView.getHeight() - bmp.getHeight()); 
```

the balls will appear at any position. If I used:

```
x = 0, y = rnd.nextInt(gameView.getHeight() - bmp.getHeight()); 
```

the balls will appear along the axis Oy .

But I don't can for balls appear along all edge of the screen . Please help me .Thanks ,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:50:03.280

你可以在你的函数中加入一些逻辑，比如......

```
 x = rnd.nextInt(gameView.getWidth() - bmp.getWidth());
y = rnd.nextInt(gameView.getHeight() - bmp.getHeight());
//here
if(x<y){
 x=0;
}

else if(y<x){
  y=0;
}
 else{
 x=0;
  y=0;
  } 
```

这将始终将您的球放在框架的两侧...

# sql-server - SqlServer clustered index storage ( >1 columns )?

> ID：10296270
> 
> 赞同：1
> 
> 时间：2012-04-24T10:37:52.717
> 
> 标签：sql-server, sql-server-2008, indexing, clustered-index

lets say i have a table like this :

```
a | b | c | d 
______________
1 | 2 | 4 | 5
6 | 2 | 5 | 5
3 | 5 | 2 | 5 
```

`[a]` column has clustered index

so the physical order which its stored is :

```
a | b | c | d 
______________
1 | 2 | 4 | 5
3 | 5 | 2 | 5
6 | 2 | 5 | 5 
```

now lets enhance the `[a]` index to be `[a,c]` ( still as clustered).

now , I can't udnerstand how it can be stored since `[a]` column is already sorted and `[c]` column cant be sorted ( because sorting of `[a]` hurts the sorting of `[c]`)

so how does sqlServer will store it ?

2'nd question : do I need to open another index for `[c]` ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:52:57.833

我认为你遗漏了一些明显的东西。考虑您对查询的期望

```
select * from myTable
order by [a], [c] 
```

您在列 [a,c] 上的聚集索引将给出具有相同顺序的物理布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:01:01.003

复合索引产生[字典顺序](http://Lexicographical%20order)`c`：当值`a`被认为“相等”时，记录额外排序。

```
a c
1 2
2 3 -- Within this block, records are sorted on [c]
2 5 --
2 7 --
3 7
4 1
5 6 -- Within this block, records are sorted on [c]
5 8 -- 
```

这就是字典的排序方式。

`c`如果要加快不涉及的查询，则需要附加索引`a`：

```
SELECT  *
FROM    mytable
WHERE   c = @some_value 
```

# android - Draw text on SurfaceHolder

> ID：10296271
> 
> 赞同：0
> 
> 时间：2012-04-24T10:37:55.603
> 
> 标签：android, surfaceholder

I am doing an application witch uses the webcam and i want to display some text after the picture is taken so in the method ShutterCallBack i wrote this

```
 ShutterCallback shutterCallback = new ShutterCallback() {
        public void onShutter() {
            Log.d("DHA", "onShutter'd");
            Canvas cnv = mSurfaceHolder.lockCanvas(null);
            Log.w("DHA", "Nana");
            Paint p = new Paint();
            Log.w("DHA", "Nana2");
            p.setColor(Color.RED);
            Log.w("DHA", "Nana3");
            cnv.drawText("Hello", 0, 0, p);
            Log.w("DHA", "Nana4");
            mSurfaceHolder.unlockCanvasAndPost(cnv);
            Log.w("DHA", "Nana5");
        }
    }; 
```

It fails awfuly terminating my application...How can i write text on the surface ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:41:45.190

没有日志很难判断，但我的猜测是`lockCanvas()`返回 null。当 Surface 不可用时调用 lockCanvas 会发生这种情况。检查surfaceCreated 和surfaceDestroyed。另一个与您的代码可能无关的问题是您与 drawText() 一起使用的坐标。(0,0) 表示文本绘制在可见区域之外。

# asp.net-mvc - ASP.NET Razor RadioButton select multiple radiobuttons, returns data in one field EF

> ID：10296273
> 
> 赞同：1
> 
> 时间：2012-04-24T10:38:02.230
> 
> 标签：asp.net-mvc, entity-framework, razor

I'm using Entity Framework and from my 6 radio buttons I want to write the value in **code_options**.

How can it be done ? ![6 radiobuttons returns](../Images/0fb22a600a10ee9dd4ddee1577a24e3a.png)

After writing I need to read this data.(part 2).

**EDIT** : I was thinking to concatenate 6 strings provided by my 6 radiobuttons and send this to my database. Not sure if it will work.

```
@{
        string po = " "; string sb = " "; string cb = " "; string rl = " "; string pi = " "; string ca = " ";
     }                     

    <div class="editor-label">
        @Html.LabelFor(model => model.panou_ornament)
    </div>
    <div class="editor-field">
        Panel ornamental
        @Html.RadioButton(po, "1") DA
        @Html.RadioButton(po, "0") NU            
    </div>
    <div class="editor-field">          
        Sticle bombate
        @Html.RadioButton(sb, 1) DA
        @Html.RadioButton(sb, 0) NU
    </div>
    <div class="editor-field">
        Curburi
        @Html.RadioButton(cb, 1) DA
        @Html.RadioButton(cb, 0) NU            
    </div>
    <div class="editor-field">
        Rolete
        @Html.RadioButton(rl, 1) DA
        @Html.RadioButton(rl, 0) NU
    </div>
    <div class="editor-field">
        Profile infoliate
        @Html.RadioButton(pi, 1) DA
        @Html.RadioButton(pi, 0) NU
    </div>
    <div class="editor-field">
        Contractul are si pozitii din aluminiu
        @Html.RadioButton(ca, "1") DA
        @Html.RadioButton(ca, "0") NU
        @Html.Hidden(Model.panou_ornament = po + sb + cb + rl + pi + ca)    
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:51:01.573

我不知道 ASP.NET MVC 提供开箱即用的任何方式来执行此操作。然而，你可以很容易地用 javascript 做到这一点。假设 code_options 是你的模型的一部分，为它做一个隐藏的输入：

```
@Html.HiddenFor(m => m.code_options) 
```

然后使用 jQuery 连接点击处理程序并执行必要的二进制操作，将结果存储在您创建的隐藏输入中。您可以在[此处](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Bitwise_Operators)找到有关按位运算符的文档。

# highlighting - Run pageMod in background thread in firefox addon sdk?

> ID：10296275
> 
> 赞同：1
> 
> 时间：2012-04-24T10:38:11.220
> 
> 标签：highlighting, background-process, firefox-addon-sdk

I have to make a firefox addon that searches the loaded page against a list of words (potentially 6500 words) and highlight matches and show synonyms on hover.

So i am using [HightlightRegex.js](https://github.com/jbr/jQuery.highlightRegex/blob/master/highlightRegex.js) that traverses the dom and searches based on a regex which is using the regex **\bMyWord\b**.

The main problem is when testing the addon on a page that has many occurrences of the search word, Firefox hangs for a while (5-6 sec) and then highlights are shown. This is happening for 1 word so one can just imagine what will happen if i search 6500 words.

So is there any way that i can run the [pageMod](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/page-mod.html) in a background thread or asynchronously and highlight words as they are matched without freezing the UI?

You can have a look at the add-on at [https://builder.addons.mozilla.org/addon/1042263/latest/](https://builder.addons.mozilla.org/addon/1042263/latest/)

Currently the add-on is not tied to separate tabs and run as a whole on the browser but i doubt that would cause Firefox to hang.

I need to do this as efficiently as possible so suggestion are very welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:12:51.750

正如 canuckistani 暗示的那样，更好的解决方案只需要两个同步的 DOM 操作：读取和写入。撕掉整个页面（或者更好的是，只撕掉它的`<body>`）并将其发送到异步工作者或线程，该线程将执行突出显示。完成后，worker 会发出一个事件并传递突出显示的内容，插件现在可以将其插入回页面中。

这样，唯一完成的同步操作是快速、廉价的操作，而其余操作是异步完成的，远离主线程。但是，canuckistani 建议将页面加载到`page-worker`: 中，因为该页面已经加载到选项卡中，因此无需这样做。只需加载一个假页面并插入实际内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:51:23.030

您可以尝试的一件事是使用 page-worker 模块来加载页面并对其进行处理：

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/packages/addon-kit/page-worker.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/packages/addon-kit/page-worker.html)

而且，正如 Wladimir 建议的那样，只使用异步代码来搜索文档文本以避免锁定 firefox。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:14:03.830

DOM 通常不是线程安全的，您不能从主线程以外的任何地方访问它。唯一的解决方案是将工作分解成更小的块并使用`setTimeout(..., 0)`异步运行下一个块，而不阻塞所有内容。

# .htaccess - Run Magento Store via .htaccess

> ID：10296279
> 
> 赞同：0
> 
> 时间：2012-04-24T10:38:40.940
> 
> 标签：.htaccess, magento, magento-1.6

I have a fairly simple question which I thought would be easy to setup, but is proving difficult.

I have a Magento installation, and I want it to have 2 websites, with two languages on each. Then wehen I go on the tennis UK domain it loads the UK store. If I go on the French domain it loads the French store.

**This is how it is working now (INCORRECT):**

```
Tennis UK (website)
Tennis UK (store & store views)

Tennis FR (website)
Tennis FR (store & store views)

Volleyball UK (website)
Volleyball UK (store & store views)

Volleyball FR (website)
Volleyball FR (store & store views) 
```

**This is how I'd prefer it to work (CORRECT):**

```
Tennis (website)
Tennis UK / Tennis FR (stores & store views)

Volleyball (website)
Volleyball UK / Volleyball FR (stores & store views) 
```

In the htaccess I am running a script to run the correct website, but I thought that I should also be able to run a store code if needed, like this:

```
SetEnvIf Host www\.tennisukdomain\.co.uk MAGE_RUN_CODE=tennis_uk
SetEnvIf Host www\.tennisukdomain\.co.uk MAGE_RUN_TYPE=store
SetEnvIf Host ^tennisukdomain\.co.uk MAGE_RUN_CODE=tennis_uk
SetEnvIf Host ^tennisukdomain\.co.uk MAGE_RUN_TYPE=store 
```

But this is not working for some reason. Does anybody know the correct way to get this working. By loading a store view instead of a website each time it will cut down on the amount of configuration I have to do in the admin.

Any help much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T06:30:11.823

你可以通过代码来实现。例如：

**索引.php**

```
$host = explode(':', $_SERVER['HTTP_HOST']);
$dname = substr($host[0], -3,3);

switch ($dname) {
case '.uk':
   $store = 'tennis_uk';
   break;
case '.fr':
   $store = 'tennis_uk';
   break;
default:
   $store = '';
}

Mage::run($store); 
```

# mongodb - Restlet + mongoDB + Freemarker

> ID：10296284
> 
> 赞同：0
> 
> 时间：2012-04-24T10:39:21.913
> 
> 标签：mongodb, freemarker, restlet, kundera

We are making a web based application in Java that should be accessible to any device and so we zeroed in for Restlet for our REST based web service need. For UI we are thinking of Freemarker together with Twitter bootstrap and database will be mongoDB. And guice for dependency injection. Since I am new to most these technology stack, do you think this is fair choice for a long run. Also, for database mapper framework we decided to use Jongo it seems lightweight. Kundera is an option but it has lots of dependency. What you expert say ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:59:04.363

“昆德拉是一种选择，但它有很多依赖性。” 不知道你说这个声明是什么意思？你能解释一下吗？请查看[https://github.com/impetus-opensource/Kundera/wiki/Kundera-Mongo-performance](https://github.com/impetus-opensource/Kundera/wiki/Kundera-Mongo-performance)以了解使用 Kundera 的性能！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:29:36.093

这真的取决于你的需求

**REST 框架：**

IHMO 您应该至少测试这 3 个 JAX-RS 框架：RestEasy / Jersey / Restlet 并根据您的需要选择一个。

[JAX-RS 框架](https://stackoverflow.com/questions/80799/jax-rs-frameworks)

[https://stackoverflow.com/questions/1710199/which-is-the-best-java-rest-api-restlet-or-jersey](https://stackoverflow.com/questions/1710199/which-is-the-best-java-rest-api-restlet-or-jersey)

**用户界面：**

我通过 Nuxeo 的一个名为[Webengine](http://doc.nuxeo.com/display/NXDOC/WebEngine+%28JAX-RS%29)的框架与 Jersey + Freemarker 合作过，没关系。

不过，您应该考虑基于 Javascript/CSS/HTML 的富客户端方法（请参阅 Backbone.js、Ember.js）

优点：通过这种方法，您可以使用 JAX-RS 框架（而不是 freemarker/html 服务）公开 JSON REST 服务。这些服务可以由 Web 应用程序和/或本机移动应用程序（ios、android）使用。

缺点：您的团队必须具备高级 javascript 技能（此[博客](http://addyosmani.com/blog/)可以提供帮助）

**数据库：**

您需要存储什么样的数据？

MongoDB 是面向文档的，并且足够灵活，可以满足很多需求

正如你所说，[Jongo](http://jongo.org/)是 mongo-java-driver 的轻量级 API（500 行代码 + 1 个依赖项）。

它允许您像在 MongoShell 中一样查询 MongoDB（即使用普通的 json/bson 查询）并使用 jackson 映射您的对象。这个问题就是一个很好的例子：[Mongo DB query in java](https://stackoverflow.com/questions/10444038/mongo-db-query-in-java/10445169)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T08:38:30.237

为您的 RESTful Web API/服务后端依赖 Restlet 框架听起来是多设备应用程序的不错选择。FreeMarker 非常强大和灵活，所以你也应该在那里有很好的伙伴。

我不太了解你的堆栈的其他部分。

# cakephp - cakephp auth and user register stopped working

> ID：10296285
> 
> 赞同：0
> 
> 时间：2012-04-24T10:39:32.870
> 
> 标签：cakephp, authentication

I have following piece of code:

```
public function check()
        {
            $result = $this->User->field('id', array('username' => 'alek@lol.pl'));
            debug($result);
        } 
```

In my users table I have record:

```
NSERT INTO `users` (`id`, `username`, `password`, `role`, `created`, `modified`) VALUES 
('5', 'alek@lol.pl', '64c918dd65b67b455248c2498bcc5421a66b68a6', 'member', '2012-04-24 10:56:37', '2012-04-24 10:56:37'); 
```

and the result of this controller method check is:

```
false 
```

And the sql query is:

```
Nr  Query   Error   Affected    Num. rows   Took (ms)
1   SELECT `User`.`id` FROM `freebooks`.`users` AS `User` WHERE `username` = 'alek@lol.pl' LIMIT 1      1   1   0 
```

So SQL return one row but in cake result is 'false' - whats wrong? something broken??

when I execute this SQL statement in my PhpMyAdmin it correctly returns id = 5

And when I change one line to

```
$result = $this->User->find('all'); 
```

this prints

```
true 
```

This is impossible!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:54:07.073

```
$this->User->field('id', array('username', $this->request->data['User']['username'])); 
```

你可以这样检查：

```
if(!empty($this->User->field('id', array('username', $this->request->data['User']['username']));)) {

  // code
} 
```

**或者**

```
$id = $this->User->field('id', array('username', $this->request->data['User']['username']));

$this->User->id = $id;

if($this->User->exists()) {
  // code
} 
```

# ios - 在 AppStore 中上传 iOS 应用

> ID：10296292
> 
> 赞同：0
> 
> 时间：2012-04-24T10:39:46.393
> 
> 标签：ios, xcode, app-store, application-loader

这是我第一次上传到 AppStore。

我在图标文件夹中创建带有项目文件夹的 zip 文件。然后在应用程序加载器中，我选择“交付您的应用程序”并在那里选择我的 zip 文件。但是应用程序加载器给出了这个错误： ![在此处输入图像描述](../Images/2112f043cf69e008f3c3dcf879e2aa98.png)

我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:47:07.887

哦，要是这么简单就好了……

阅读本[指南](http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1)

应该让你朝着正确的方向开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T03:06:12.773

我归档了包含项目的文件夹，但我应该从 .app 归档一些文件

# javascript - 将 C# 参数传递给 JS

> ID：10296302
> 
> 赞同：2
> 
> 时间：2012-04-24T10:40:24.657
> 
> 标签：javascript, asp.net-mvc-3

我有一个 C#-MVC 项目。我想每隔 X 秒刷新一次页面 - 我将代码放入 cshtml 文件中：

```
<script type="text/JavaScript">
   timedRefresh(X);
</script> 
```

但我需要从 C# 中获取 X，假设它是“ViewBag.Seconds”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:45:35.670

Razor 不在乎它是输出 HTML 还是 javascript，所以你可以这样做：

```
<script type="text/JavaScript">
   timedRefresh(@(ViewBag.Seconds));
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T10:46:48.210

如果您使用的是 Razor 语法，则可以这样做：

```
<script type="text/JavaScript">
  timedRefresh(@(ViewBag.Seconds));
</script> 
```

IntelliSense 可能会报告错误或警告，但它仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:46:23.177

这很容易

```
<script type="text/JavaScript">
   timedRefresh(@ViewBag.Seconds);
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:23:01.773

你也可以使用一个动作。像这样：

```
<script type="text/JavaScript">
   timedRefresh(@(Html.Action("Action","Controller")));
</script> 
```

# visual-studio-2010 - OpenCV 2.3.1 cxcore210.lib 和 cv210.lib 继承值

> ID：10296303
> 
> 赞同：0
> 
> 时间：2012-04-24T10:40:24.830
> 
> 标签：visual-studio-2010, opencv

我现在正在使用 OpenCV 2.3.1 和 MS Visual Studio 2010 工作一段时间，并将其安装在多台 PC 上。过去，我也在我的一台 PC 上安装了 openCV 2.1.0。我的问题是，在我安装了 openCV 2.1.0 的 PC 上，cxcore210.lib 和 cv210.lib 在链接器 >> 输入 >> 附加依赖项中列为继承值

问题是，当我尝试使用 OpenCV 2.3.1 在这台 PC 上构建程序时（我已经正确设置了所有链接器和东西，并且在我的“干净”PC 上它工作正常）它一直在询问这 2 个 lib 文件。当然，我可以再次安装 OpenCV 2.1.0 并链接到这些文件，但这并不是我真正想要的，因为我正在使用 OpenCV 2.3.1

我试过重新安装我的 Visual Studio，但这也不能解决问题。OpenCV 2.1.0 也被卸载，路径设置也被删除。有谁知道为什么它一直在寻找 cxcore210.lib 和 cv210.lib 作为继承值，我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:11:51.380

**那是因为您的项目仍然认为您正在使用 OpenCV 2.1**。您需要转到下的项目设置`Linker > Input > Additional Dependencies`并替换`cxcore210.lib cv210.lib`为它们各自的 v2.3.1 对应项，它们是：

```
opencv_core231.lib opencv_highgui231.lib 
```

您可能需要添加其他库，例如`opencv_imgproc231.lib`abd 可能还有其他库，具体取决于您的程序在 OpenCV 中使用的内容。这些版本之间发生了很多变化。

此外，如果您将 OpenCV 2.3.1 安装在与 v2.1 不同的目录中，您将不得不在项目设置中调整更多内容：

*   标题的路径：`C/C++ > General > Additional Include Directories`
*   可能还有图书馆的路径：`Linker > General > Additional Library Directories`

[本教程](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010/7014918#7014918)逐步展示了如何配置这些以及更多内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:11:34.500

嗯，现在似乎可以工作，我想我设法找到了一些解决方法。我去了 Linker > Input > Additional Dependencies 并取消选中**“从父级或项目默认值继承”**框。两个 lib 文件都保留为继承值，但至少我可以正确构建和运行项目，而不会出现错误，告诉我指向 cxcore210.lib cv210.lib

# jquery - 为什么 $("#element").get() 与 $("#element")[0] 不同？

> ID：10296307
> 
> 赞同：2
> 
> 时间：2012-04-24T10:40:51.973
> 
> 标签：jquery

我正在使用 jquery 对 html 5 文件上传进行一些测试，但遇到了一些奇怪的事情（至少对我而言）。我试图获取已在文件控件中选择的文件列表：

```
<html><head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type">
  <script src="http://code.jquery.com/jquery-1.7.1.js" type="text/javascript"></script>
</head>
<body>
    <input type="file" multiple="multiple" id="inputFile" name="inputFile">
    <button onclick="buttonClicked()" type="button">upload</button>
<script type="text/javascript">//<![CDATA[ 
function buttonClicked() {
    console.log($("#inputFile").val()); // depending on the browser, gives either the file name, either the full path, but only for the first file
    console.log($("#inputFile").files); // gives undefined
    console.log($("#inputFile").attr("files")); // gives undefined
    console.log($("#inputFile").get()); // according to the jquery documentation, give the dom element...
    console.log($("#inputFile").get().files); // ...but strangely, files is undefined
    console.log($("#inputFile")[0].files); // on the other hand, this gives me the list of files
}
//]]>;  
</script>
</body></html> 
```

所以首先我期待 $("#inputFile").val() 会给我至少，太糟糕了，事实并非如此。所以我尝试了 input.files 的变体，并没有真正期望它能够工作，因为它似乎不适合 jquery 对象（但是嘿，你永远不知道）。所以我尝试从 jquery 获取底层 dom 元素来访问 files 项。这就是它变得奇怪的地方，因为它也是未定义的。另一方面，$("#inputFile")[0].files 给出了预期的结果。

[编辑] 然后，像往常一样，在输入这​​个问题时，我自己找到了解决方案。无论如何我都会把它留在这里，所以任何为此奋斗的人也有机会解决它。它基本上在 RRTFM 上运行，就像真的 RTFM 一样：

> 此调用返回所有匹配的 DOM 节点，包含在标准数组中

这意味着，即使只有一个元素。所以调用：

```
console.log($("#inputFile").get()); 
```

返回一个包含一个元素的数组，当然数组没有`files`属性。它应该是：

```
console.log($("#inputFile").get(0)); 
console.log($("#inputFile").get()[0]); // or this one, but that's a bit silly 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:45:05.030

问题是，除了`.get()`返回一个数组（`.get(0)`给你第一个元素）你使用`.attr()`而不是`.prop()`.

如果需要`elem.files`，访问它的 jQuery 方法是`$(elem).prop('files')`.

使用时`.attr()`，它对应于`.getAttribute()`通常不是您想要的属性的调用，例如`files`or `checked`。jQuery 有时会自动切换到属性，例如 for `checked`，但当然它不能涵盖每一个属性。

因此，您最终要使用的是`$('#inputFile').prop('files')`or `$("#inputFile").get(0).files`。但是，如果您的选择器不匹配任何内容，后者将引发错误。

# serialization - NotSerializableException in a ManagedBean with ViewScoped and Spring's services

> ID：10296308
> 
> 赞同：3
> 
> 时间：2012-04-24T10:40:56.423
> 
> 标签：serialization, jsf-2, spring-3

This is the ManagedBean

```
@ManagedBean @ViewScoped public class DetailItem {
    private static final long serialVersionUID = -7647929779133437125L;
    @ManagedProperty(value = "#{itemServiceImpl}")
    private ItemService servItem; 
```

This is the Service

```
@Service("itemServiceImpl") @Transactional(value = "transactionManagerLocal") public class ItemServiceImpl implements ItemService {
    private static final long serialVersionUID = 1L;
    @Autowired
    @Qualifier("itemDaoImpl")
    private ItemDAO dao; 
```

but when I try to access to the page that used 'DetailItem', I have the following exception:

```
java.io.NotSerializableException: org.springframework.dao.support.PersistenceExceptionTranslationInterceptor    java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)   java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518) 
```

To fix that I do the servItem transient and obtain it from the applicationContext. But I understand that it is not the correct solution and I dont find any other. Which is the proper way to do that?

I don´t have the exception with sessionscoped or requestscoped.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:36:25.433

听起来像类似的问题，如[ManagedProperty 的序列化](https://stackoverflow.com/questions/11141052/serialization-of-managedproperty/)

ItemService 是否实现 Serializable 并且 ItemServiceImpl 的所有成员本身都是可序列化的？

# ajax - Magento: product with custom options, needs ajax update with price and sku

> ID：10296314
> 
> 赞同：1
> 
> 时间：2012-04-24T10:41:29.287
> 
> 标签：ajax, magento, options, product

I want to show the SKU of a customizable article. Have a look at the screenshot below.

If I select color, length and so, the price will be updated via ajax. So far, very good. But I want to display the SKU of the article too.

The site calls this url via ajax:

```
http://SERVER/oi/ajax/co/?id=5106&pid=5114 
```

and returns me the following code:

```
<script type="text/javascript">
    //<![CDATA[
    window.opConfig = new Product.Options([]);
    $('product_addtocart_form').encoding = 'multipart/form-data';
    //]]>
</script> 
```

which file should I update / alter for this change ?? Where the correct js for this new Product.Options ??

![enter image description here](../Images/d42ca43ff8e0fb567b04eb9a00cd0f3e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:57:19.040

我解决了它......好吧。休息后，我想出了以下解决方案：

我已将此代码放在产品的 view.pthtml 中（实际显示产品的 html）

```
<div style="text-align:left; font-size:11px; font-weight:bold;">
<div id="pv_article_sup_art_no" style="display:none;text-align:right;"></div>
</div> 
```

然后我将以下代码添加到 scpajaxoptions.phtml

```
<?php 
$data = $this->getProduct()->toArray();
?>

<script type="text/javascript">
    jQuery('#pv_article_sup_art_no').html("Artikelnummer: <?php echo $data['a_sup_artno']; ?>");
    jQuery('#pv_article_sup_art_no').show();
</script> 
```

嗯，瞧……它有效！

# foursquare - 四方和共享签到？

> ID：10296318
> 
> 赞同：0
> 
> 时间：2012-04-24T10:41:46.800
> 
> 标签：foursquare

是否可以通过允许用户单击将他们带到共享位置（签入页面）的 html 页面中的按钮来创建签入？

我在想 - 像 twitter 分享网址之类的东西？

例如-

```
http://foursquare.com/share/?venue_id=12345 
```

我想要这个功能，以允许用户在智能标签上刷他们的 nfc 手机，它会加载一个带有不同选项的 html 页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:58:44.733

在基于 Android 或 iOS 的移动设备上，您可以使用特殊格式的 URL 来启动 Foursquare 应用程序以查看所需的地点：[https ://developer.foursquare.com/resources/client](https://developer.foursquare.com/resources/client)

URL [https://m.foursquare.com/venue/#venue_id#](https://m.foursquare.com/venue/#venue_id#)（例如[https://m.foursquare.com/venue/4b477346f964a520723226e3](https://m.foursquare.com/venue/4b477346f964a520723226e3)）既可以通过安装的 Android Foursquare App 打开，也可以通过普通浏览器打开（或为该 URL 注册的其他 Intent 接收器）。

您可以进一步使用 URL [https://foursquare.com/mobile/checkin?vid=#venue_id#](https://foursquare.com/mobile/checkin?vid=#venue_id#)进入移动页面，您只需按“签到”或输入喊声即可。通过移动页面（而不是应用程序）签到，您不会获得积分，也无法获得市长职位（请参阅[Foursquare 支持](http://support.foursquare.com/entries/384200-i-can-t-use-the-app-on-my-phone-what-can-i-do-on-the-mobile-web)）。

但是，例如，您可以创建自己的 Web 应用程序来访问 Foursquare API 并为经过 OAuth 的用户执行签入。通过使用[HTML5 地理定位](http://html5demos.com/geo)功能，您还可以将移动设备的纬度/经度坐标发送到您的 Web 应用程序并执行有效的签到，这也算作市长等。一个好的开始是 Foursquare 的开发者页面：[https://developer。 foursquare.com/overview/](https://developer.foursquare.com/overview/)

# android - 如何从 Android 连接远程 MySQL 数据库？

> ID：10296321
> 
> 赞同：0
> 
> 时间：2012-04-24T10:42:01.113
> 
> 标签：android, web-services, wsdl, http-post, android-webview

我想将我的 Android 应用程序连接到远程 MySQL 数据库，该数据库具有仅用于身份验证的 WSDL Web 服务。数据推送通过 HttpPost 进行。全部在 ColdFusion 中。

我对 Android 开发非常陌生，我搜索了很多教程但找不到解决方案。我想知道以下问题的答案？

1.  如何连接到 WSDL Web 服务仅用于身份验证是 Android？
2.  如何使用 Http Post 访问远程数据库？（如果可能，请发布一些教程）

如果您发布一些示例或相关帖子，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:47:10.587

在发布问题之前，您需要在此论坛和网络上进行研究。这可能是重复的：[Android remote MySQL operations using a web service with php](https://stackoverflow.com/questions/4508439/android-remote-mysql-operations-using-a-web-service-with-php)

# apache - Directory rewrite URL in Apache, htaccess

> ID：10296322
> 
> 赞同：0
> 
> 时间：2012-04-24T10:42:04.677
> 
> 标签：apache, .htaccess, url, rewrite

I urgently need help in rewriting php URLs for my site. I have researched and tried everything but it's still not working.

I want to rewrite all the URLs in my htaccess file to rename the directory '_public' to 'art':

```
www.site.com/_public/work.php 
```

so all url's show:

```
www.site.com/art/work.php 
```

Can anyone help? would appreciate it very much.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:51:01.240

如果我理解正确，您希望用户转到“www.site.com/art/work.php”并显示位于“www.site.com/_public/work.php”的页面。

在 .htaccess （在根目录中）执行：

`RewriteEngine on`

`RewriteRule ^art/(.+)$ /_public/$1 [L,QSA]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:56:14.470

请在您的 htaccess 文件中添加以下行：

```
RewriteEngine on

RewriteRule ^art/(.+)$ /_public/$1 
```

# php - 爬虫会理解被 jQuery 改变的页面标题吗？

> ID：10296328
> 
> 赞同：0
> 
> 时间：2012-04-24T10:42:50.050
> 
> 标签：php, jquery, html, web-crawler, title

在一个项目中，我试图在`<body>`标签中获取数据。所以我不能回应任何东西，`<title>`因为我还没有拿到任何东西。我想在页面加载 jQuery 后更改标题标签。
爬虫会理解这一点，当他们索引页面时，他们会使用我为 jQuery 提供的标题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:44:15.027

不，爬虫极不可能执行页面上的任何 javascript。有些人可能会检查任何 javascript 并基于此做出一些假设。但人们不应该假设情况就是这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T10:46:07.297

不..搜索引擎爬虫查看服务器呈现的内容..

但是，如果您正在构建 AJax 网站，您可以阅读 google 提供的[Making AJAX Applications Crawlable](https://developers.google.com/webmasters/ajax-crawling/)

***引用指南***

> 如果您运行的 AJAX 应用程序包含您希望出现在搜索结果中的内容，我们有一个新流程，在实施后，它可以帮助 Google（以及可能的其他搜索引擎）抓取您的内容并将其编入索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:46:22.753

谷歌的蜘蛛可以[在它处理的页面上运行 JavaScript](http://searchengineland.com/google-can-now-execute-ajax-javascript-for-indexing-99518)，但我认为没有任何关于它可以做什么和不能做什么的建议。当然，其他爬虫不会那么复杂，并且可能会忽略动态内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:51:34.640

这实际上是一个有趣的测试。我会尝试我的其中一个网站并回发。我知道 googlebot 确实了解一些 javascript，但我认为这更适用于黑暗的 SEO 策略；即 $('.spammystuff').hide(); 输入东西。

# java - 从 jar 文件恢复项目

> ID：10296330
> 
> 赞同：1
> 
> 时间：2012-04-24T10:43:02.207
> 
> 标签：java, netbeans, jar

首先，我想指出，我对 netbeans 和 java 还很陌生，无法在网上准确找到我需要的东西。
我下载了一个软件的源文件，并在 netbeans 上对其进行了修改。在构建项目时，netbeans 自然会在（例如）documents/project_folder/dist/ 中创建一个 lib 文件夹和我可以使用的完成的 JAR 文件。
如果我错误地删除了源文件，并且想使用我仍然拥有的 JAR 和 lib 文件夹应用我之前对新源文件所做的所有更改，是否有可能以及如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:46:44.047

首先，不可能再次从 lib 文件夹中的 jar 文件中获取源代码。Jar 文件是只包含类文件的可执行文件。您可以使用 java 反编译器再次获取源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:47:51.877

NB 默认没有版本控制，也没有自动保存。你可以看看 NB7 中的[git](http://netbeans.org/kb/docs/ide/git.html)。

当您使用反编译器从 Jar 中恢复时，有很大机会取回源代码，如果您知道代码的全部内容，则更有可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:49:01.927

您可以使用一些反编译器来获取源代码。有许多可用的反编译器，例如 DJ Decomipler。我最喜欢的是[Jd Java Decompiler](http://java.decompiler.free.fr/)。它的尺寸非常小，并且做得很好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T10:49:04.140

我是一个 Eclipse 用户，但我猜 Eclipse 和 Netbeans 在一定程度上是相似的。除非已创建包含源代码的 jar，否则您将没有其他选择来反编译类文件。

需要时，我通常会使用 JD-GUI，它可以很好地反编译 jar。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T10:54:48.240

无法从已编译的字节码中检索**准确的**源代码。但是有可能在某种程度上恢复您的代码

JD 是一个很好的 Java 反编译器。 [http://java.decompiler.free.fr/?q=jdgui](http://java.decompiler.free.fr/?q=jdgui)

在原始源代码丢失的情况下，我认为京东是超级英雄。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T10:47:28.417

将您的源代码保存在任何 SCM 上。使用远程 SCM 不要丢失您的代码。请参阅：谷歌代码、github、启动板等。

# for-loop - plupload，如何允许对上传的图像进行描述

> ID：10296332
> 
> 赞同：1
> 
> 时间：2012-04-24T10:43:19.263
> 
> 标签：for-loop, plupload, dropdownbox

我正在尝试使用 plupload flash 小部件，因为它适用于所有浏览器以进行多张图片上传。

对于每张图片，我希望我的用户从下拉框中选择一个属性。因为我网站中使用的每个图像都代表一种属性图像类型，例如后图像、侧图像、前图像等。这些选项将在下拉列表中。

我想知道，如果我可以动态地向 pluploader 注入一个下拉列表。这是一张图片，可以查看我希望如何为每张图片设置下拉框。

![在此处输入图像描述](../Images/aa75a148231f8b36d888fb97e23422a2.png)

[http://www.diigo.com/item/image/2ma3g/9wsq](http://www.diigo.com/item/image/2ma3g/9wsq)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T08:31:55.903

在检查 jQuery 队列元素后，很容易确定如何将下拉框注入 DOM。

![在此处输入图像描述](../Images/01bc9d7346bfd97757d5e24f1d45da14.png)

因为它基于[jQuery](http://jquery.com/)，所以您可以简单地使用类似..

```
$('#uploader_filelist li').each(function(index,data){
  $(this, '#plupload_file_name').append('<html>Your html here</html>');
}); 
```

这是一个非常简单的示例，但这就是您将标记动态注入队列的方式。

问题是你什么时候做？以及以后如何识别。有了这个，您需要返回[plupload API 并将事件](http://www.plupload.com/example_events.php)（[此处的文档](http://www.plupload.com/plupload/docs/api/index.html)）附加到以下内容：

*   公共事件文件添加（上传者：上传者，文件：数组）
*   公共事件UploadProgress（上传者：上传者，文件：文件）

并且您将需要处理脚本中的块以及您使用的 uplaod 处理程序，以使用`multipart_params`在每个上传的块上设置的 get 检索下拉值。

添加下拉菜单很容易，确保整个过程得到处理是另一个问题，可能需要一些时间来完善。

# django - Django MultipleChoiceField 不保留所选值的顺序

> ID：10296333
> 
> 赞同：5
> 
> 时间：2012-04-24T10:43:21.023
> 
> 标签：django, django-forms, cleaned-data

`order`我有一个 Django ModelForm，它通过一个包含选择（文档列表）作为额外属性的模型公开与多对多关系相对应的多项选择字段。在前端，该字段显示为两个类似于 admin 中的多选字段，一个用于列出可用的选项，另一个用于保存选定的元素。

可以通过正确选择元素来保存表单，但它们始终按照原始选择顺序的顺序排列，而不是选择顺序。浏览器以正确的顺序发送选择，但顺序`form.cleaned_data['documents']`始终是原始选择顺序中的顺序。

如何使 MultipleChoiceField 尊重所选元素的顺序？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:18:42.073

没有简单的方法。您要么需要覆盖 the 的`clean`方法，`MultipleChoiceField`要么正如您在评论中提到的那样，使用 getlist 手动重新排序它们。这可能取决于您需要在代码中多久执行一次。

通过像这样通过运算符过滤对象列表来创建您正在接收的 a的`clean`方法，因此顺序由数据库给出：`MultipleChoiceField``QuerySet``IN`

```
qs = self.queryset.filter(**{'%s__in' % key: value}) 
```

您可以继承自`ModelMultipleChoiceField`：

```
class OrderedModelMultipleChoiceField(ModelMultipleChoiceField):
    def clean(self, value):
        qs = super(OrderedModelMultipleChoiceField, self).clean(value)
        return sorted(qs, lambda a,b: sorted(qs, key=lambda x:value.index(x.pk))) 
```

缺点是返回的值不再是`QuerySet`一个普通的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T16:43:42.343

要在覆盖 clean 方法时返回一个有序的 QuerySet，你也可以这样做：

```
class OrderedModelMultipleChoiceField(ModelMultipleChoiceField):
    def clean(self, value):
        qs = super(OrderedModelMultipleChoiceField, self).clean(value)
        clauses = ' '.join(['WHEN id=%s THEN %s' % (pk, i) for i, pk in enumerate(value)])
        return qs.filter(pk__in=value).extra(
            select={'ordering': 'CASE %s END' % clauses},
            order_by=('ordering',)
        ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-07T22:52:21.617

我是通过一个小部件做到的。它的好处是，它将以不同的语言正确排序：

```
class SortedSelectMultiple(SelectMultiple):

def render_options(self, selected_choices):
    self.choices = sorted(self.choices)
    self.choices.sort(key=lambda x: x[1])
    return super(SortedSelectMultiple, self).render_options(selected_choices) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-22T08:51:29.460

我可以使用以下方式维护选择的顺序：

```
class OrderedModelMultipleChoiceField(models.ModelMultipleChoiceField):

    def clean(self, value):
        qs = super(OrderedModelMultipleChoiceField, self).clean(value)
        preserved = Case(*[When(pk=pk, then=pos) for pos, pk in enumerate(value)])
        return qs.filter(pk__in=value).order_by(preserved) 
```

**注意：我使用的是 Django 2.2**

# android - Eclipse 中 Android Hackbook 的构建错误 (token_refresh.xml)

> ID：10296335
> 
> 赞同：1
> 
> 时间：2012-04-24T10:43:42.320
> 
> 标签：android, eclipse, facebook

我跟随 Facebook 的 Android 开发网站在 Eclipse 中设置 Facebook Android 项目： [https ://developers.facebook.com/docs/guides/mobile/android_hackbook/](https://developers.facebook.com/docs/guides/mobile/android_hackbook/)

我使用 build.xml 中的“调试”目标来使用 Ant 进行构建。但我收到这些错误：

[aapt] E:\Android\facebook-android-sdk\examples\Hackbook\res\layout\token_refresh.xml:15：错误：错误：不允许字符串类型（在 'layout_width' 处，值为 'match_parent'）。[aapt] E:\Android\facebook-android-sdk\examples\Hackbook\res\layout\token_refresh.xml:28：错误：错误：不允许字符串类型（在 'layout_width' 处，值为 'match_parent'）。

BUILD FAILED C:\Android\android-sdk-windows\tools\ant\build.xml:598：执行此行时出现以下错误：C:\Android\android-sdk-windows\tools\ant\build.xml ：627：返回空值：1

为什么 token_refresh.xml 出错了？我没有对从 github 下载的最新 facebook sdk 进行任何更改。

我确实更改了 Hackbook 的 APP_ID 以使用我创建的新的。我在这个项目中引用了 facebook sdk。我在这个项目中有 libs 文件夹。

我打开 token_refresh.xml 并在日志中显示这些错误：

注意：这个项目包含资源错误，所以 aapt 没有成功，这可能会导致渲染失败。先解决资源问题。

```
Failed to convert @color/grey into a drawable
Couldn't resolve resource @string/app_name
Couldn't resolve resource @string/access_token_label
Couldn't resolve resource @string/access_token_expires_label
Couldn't resolve resource @color/grey
Couldn't resolve resource @string/refresh_button
Couldn't resolve resource @string/tip_label
Couldn't resolve resource @string/refresh_token_tip
Exception details are logged in Window > Show View > Error Log 
```

有谁知道如何解决这些问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:29:52.437

Hackbook 仅适用于 Android SDK 2.2 +。我把它设置为2.1，所以它不起作用。现在它在我的 AVD 2.2 上编译并运行。

# c# - 如何覆盖自定义库类中的方法

> ID：10296340
> 
> 赞同：1
> 
> 时间：2012-04-24T10:44:07.700
> 
> 标签：c#, oop, namespaces, overriding

我有两个项目：`ClientProj`和`ServerProj`，它们都共享一个`SharedLibrary`包含我的游戏基础知识的项目。

在这个库中，我有一个类`GameObject`，它是许多其他游戏项目继承的基类。

里面`GameObject`是一个`SetPosition()`方法。

**这是我的问题：**当我`SetPosition()`在客户端上运行时，我希望添加一些额外的代码/完全覆盖该方法。然而，我希望添加的代码与仅存在于`ClientProj`命名空间中的类有关，对此`SharedLibrary`一无所知。

是否有任何干净的方法来覆盖或扩展库方法？

*更新：请注意，GameObject 的实例和继承它的所有事物都在 SharedLibrary 命名空间中定义、包含和处理。大多数情况下，ClientProj 和 ServerProj 只处理网络、用户和输入/输出。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:53:06.457

您可以使用[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)并让游戏对象从代理类而不是真实类继承：

*共享库：*

```
public class GameObject
{
    public virtual void SetPosition() { ... }
}

public class DelegatingGameObject : GameObject
{
    public GameObject Inner;
    public override void SetPosition() { Inner.SetPosition(); }
}

public class Tree : DelegatingGameObject
{
} 
```

*客户图书馆：*

```
class ClientGameObject : GameObject
{
    public override void SetPosition()
    {
        if (isMonday) base.SetPosition();
    }
}

var tree = new Tree { Inner = new ClientGameObject() };
tree.SetPosition(); 
```

* * *

*共享库：*

```
public class GameObject
{
    public virtual void SetPosition() { Console.WriteLine("GameObject.SetPosition"); }
    public static event Func<GameObject> Factory;
    internal static GameObject CreateBase() { var factory = Factory; return (factory != null) ? factory() : new GameObject(); }
}

internal class GameObjectBase : GameObject
{
    private readonly GameObject baseGameObject;
    protected GameObjectBase() { baseGameObject = GameObject.CreateBase(); }
    public override void SetPosition() { baseGameObject.SetPosition(); }
}

internal class Tree : GameObjectBase
{
    public override void SetPosition()
    {
        Console.WriteLine("Tree.SetPosition");
        base.SetPosition();
    }
}

public static class Game
{
    public static void Start()
    {
        new Tree().SetPosition();
    }
} 
```

*客户图书馆：*

```
internal class ClientGameObject : GameObject
{
    public override void SetPosition()
    {
        Console.WriteLine("ClientGameObject.SetPosition Before");
        base.SetPosition();
        Console.WriteLine("ClientGameObject.SetPosition After");
    }
}

internal static class Program
{
    static void Main(string[] args)
    {
        GameObject.Factory += () => new ClientGameObject();
        Game.Start();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T10:47:16.953

将 SetPosition 方法设为虚拟并使用 override 关键字覆盖其在 ClientProj 中的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:47:28.913

您可以`virtual`在基类中执行此操作，覆盖 in `derived`，并在覆盖方法中调用您的方法和后`base`类方法。

伪*代码*可能如下所示：

```
public class GameObject 
{
    public virtual void SetPosition()
    {
       //do something here 
    }
}

public class Derived: GameObject
{
    public override void SetPosition()
    {
       // do something specific to Derived
       base.SetPosition(); // CALL BASE CLASS METHOD AFTER
    }
} 
```

# eclipse - Eclipse 在哪里存储更新站点列表？它可以复制到另一个安装吗？

> ID：10296347
> 
> 赞同：7
> 
> 时间：2012-04-24T10:44:39.420
> 
> 标签：eclipse

我的 Eclipse 安装完全无用，无法启动，所以我可能不得不重新安装它（但这在升级到新的 Eclipse 版本时也很重要）。我不想去寻找我安装的所有插件。那么 Eclipse 在哪里存储可用更新站点的列表呢？如果它不是纯文本格式，是否可以毫无问题地将其复制到另一个安装中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T13:51:24.510

单击文件->导出->安装（已安装的软件项到文件）

**抱歉**，我没有注意到您的 Eclipse 安装不起作用。我认为没有直接的解决方案可以从 eclipse 配置文件中导入安装（如果您无法从 eclipse 中导出）。Eclipse 将此配置存储在“eclipse/configuration/../../....”内的“articles.xml”文件中，
例如在我在这里检查的盒子上： `eclipse/configuration/org.eclipse.osgi/bundles/293/data/-750392822/artifacts.xml` 会有很多这样的articles.xml 文件。我建议在损坏的 Eclipse 路径中找到一个articles.xml 文件，然后尝试通过帮助->安装新的softeare->（单击）可用软件站点->导入将其导入到新的eclipse中，然后导入这些articles.xml文件. 老实说，我没有尝试这个，但想试试这个..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:11:30.343

我不知道它存储网站的位置，但您可以从/到 Eclipse 导出/导入站点

在 intall update/plugin 窗口中有一个类似按钮的链接，名为“Available Software Sites”。在那里，您可以选择所有站点并导出这些站点并在另一个 Eclipse 安装中导入。

# wpf - 将两个字段合并为一个文本内容wpf

> ID：10296349
> 
> 赞同：3
> 
> 时间：2012-04-24T10:44:50.490
> 
> 标签：wpf

我想在歌曲的标题中组合歌曲的名称和 ID。如果我有可能：

```
Song
{
   public string Name {get; set;}
   public int ID {get; set;}
} 
```

我想将它们绑定到扩展器的标题中。目前，只绑定一个属性。是这样的：

```
<Expander Foreground="#FFF4E7CA"  Header="{Binding Song.Name}" FontWeight="Bold">
</Expander> 
```

但我想成为这样的人：

```
Header = "{Binding Some.Name, Song.ID}" 
```

那有可能吗？如果是，如何？提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T10:57:22.013

像这样的东西：

```
<Expander ...>
  <Expander.Header>
    <TextBlock>
      <TextBlock Text="{Binding Song.Name}"/>
      <TextBlock Text=" "/>
      <TextBlock Text="{Binding Sond.ID}"/>
    </TextBlock>
  </Expander.Header>
  ...
</Expander> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T11:41:05.097

你也可以

1）在您的视图模型上公开一个新属性并绑定到该属性

```
Song
{
   public string Name {get; set;}
   public int ID {get; set;}
   public string Header {get { return string.Format("{0} {1}", Name, ID); } }
} 
```

2) 使用字符串格式的多重绑定

```
<TextBlock.Text>
    <MultiBinding StringFormat="{}{0} {1}">
        <Binding Path="Song.Name"/>
        <Binding Path="Song.Id"/>
    </MultiBinding>
</TextBlock.Text> 
```

3）如果您使用的是 WPF4，则`Run`可以绑定，因此有关使用的答案`Run`将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:55:24.720

是的，您可以使用[多重绑定类](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)

# database-migration - Database versions deployment. Entity Framework Migrations vs SSDT DacPacs

> ID：10296350
> 
> 赞同：9
> 
> 时间：2012-04-24T10:44:52.580
> 
> 标签：database-migration, entity-framework-4.3, sql-server-2012, fluent-migrator, data-tier-applications

I have a data-centered application with SQL Server. The environments in which it´ll be deployed are not under our control and there´s no DBA in there (they are all small businesses) so we need the process of distribution of each application/database update to be as automatic as possible.

Besides of the normal changes between versions of an application (kind of unpredictable sometimes), we already know that we´ll need to distribute some new seed data with each version. Sometimes this seed data will be related to other data in our system. For instance: maybe we´ll need to insert 2 new rows of some master data during the v2-v3 update process, and some other 5 rows during the v5-v6 update process.

## EF

We have checked Entity Framework Db Migrations (available for existing databases with no Code-First since 4.3.1 release), which represents the traditional sequential scripts in a more automatic and controlled way (like Fluent Migrations).

## SSDT

On the other hand, with a different philosophy, we have checked SSDT and its dacpacs, snapshots and pre- and post-deployment scripts.

## The questions are:

1.  Which of these technologies / philosophies is more appropriate for the case described?

2.  Any other technology / philosophy that could be used?

3.  Any other advice?

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:53:51.337

这是一个有趣的问题。在 Red Gate，我们希望在今年晚些时候解决这个问题，因为我们有很多客户询问我们如何提供简单的部署包。我们确实有[SQL Packager](http://www.red-gate.com/products/sql-development/sql-packager/)，它本质上将 SQL 脚本包装到 exe 中。

我会说 dacpacs 旨在涵盖您描述的用例。但是，据我了解，它们在应用于目标时会动态生成部署脚本。缺点是您不会有部署预先测试的 SQL 脚本时可能得到的温暖模糊感。

我之前没有尝试过使用 dacpacs 更新数据，所以我很想知道它的效果如何。据我记得，它会截断目标表并重新填充它们。

我没有 EF 迁移的经验，所以我很想阅读有关此主题的任何答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:24:47.390

我们可能会采用混合解决方案。我们不想放弃部署打包器的想法，但另一方面，由于我们应用程序的性质（小型企业作为最终用户，没有 DBA，没有义务升级多个“活动”数据库版本并存），我们也不能放弃对迁移过程的完全控制，包括模式和数据。在我们的案例中，部署前和部署后脚本可能不足以（或至少不够舒适），无法像 EF 迁移那样进行完整迁移。诸如添加/删除种子数据、将“一对多”更改为“多对多”关系甚至彻底的数据库架构更改（以及因此，从任何先前发布的架构迁移到此架构的数据）之类的更改可能是我们的一部分我们的第一个版本发布时的日记工作。

因此，我们可能会使用 EF 迁移，每个版本发布都有其“Up”和“Down”系统。原则上，每个“Up”都将使用最后一个数据库快照（以及每个 Down，它的前一个）调用一个 dacpac，每个都有其自己的部署参数用于此特定迁移。EF 迁移将处理版本控制线，这可能也是数据迁移的一些复杂部分。

我们以这种混合方式感到更安全。我们错过了实体框架迁移中的自动​​化和架构更改检测，就像我们错过了 Dacpacs 方式中的版本控制线控制一样。

# xna - Normal for surface of a cube in XNA

> ID：10296355
> 
> 赞同：0
> 
> 时间：2012-04-24T10:45:09.133
> 
> 标签：xna, cube, normals, vertices

Can anyone please help.

I have a cube which I have made in 3DS Max. I don't know the dimensions of the cube. Is there a way to get the vertices of each of the triangles of the faces of the cube? I am trying to get the normal to one of the faces of the cube to determine which way its pointing. So if I can determine the vertices I can get the normal for the face if I have 3 vertices, V1, V2 and V3, ordered in counterclockwise order, I can obtain the direction of the normal by computing (V2 - V1) x (V3 - V1), where x is the cross product of the two vectors.

I have looked in my models .fbx file and I can see a number of values there: Vertices: *24 { **a: -15,-12.5,0,15,-12.5,0,-15,12.5,0,15,12.5,0,-15,-12.5,0.5,15,-12.5,0.5,-15,12.5,0.5,15,12.5,0.5}**

**PolygonVertexIndex: *36 { a: 0,2,-4,3,1,-1,4,5,-8,7,6,-5,0,1,-6,5,4,-1,1,3,-8,7,5,-2,3,2,-7,6,7,-4,2,0,-5,4,6,-3}**

Are these my models vertices? Also, I would assume that *Vertices:* * *24* would be my list of vertices, but why is there only 24? Should a cube not have 36 vertices? And finally, if the coordinates for my vertices are *PolygonVertexIndex:* * *36* these values just seem off to me when I imagine the cube in my head with those dimensions?

Or alternatively, is there a automatic way to get the vertices of a cube without having to manually enter all the values for each vertex? I might have a couple of models to

Any help would be greatly appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:50:32.477

我不知道你为什么需要那个......因为当你加载一个模型时，它是计算出来的，在内部每个顶点都会有法线，......

总之很容易计算...

前三个索引定义了面部的第一个三角形，接下来的三个索引定义了面部的另一个三角形。

您只需要一个三角形来计算法线...

因此，通过三个索引访问 veretex 数组并获得三个点... A、B 和 C

现在您的法线是由该顶点形成的两个向量之间的叉积的结果。

```
 Vector3 Normal = Vector3.Cross(B-A, C-B); 
```

如果正常后退或前进将取决于 A、B、C 顺序，可以是 CounterClockWise 或 ClockWise，但模型的每个三角形都将以一种方式排序。所以你会尝试并修复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:04:14.187

您可以编写一个 XNA 程序来轻松读取您的法线。

但是，如果您仍想计算它们，请使用取自 FFWD 的此 C# 代码作为指南。检查 URL 以获取有关利弊的更详细讨论。就个人而言，我对结果不太满意，但目前它确实有效。当然，由于这段代码与 FFWD 相关（Unity 的 XNA API 的实现），它与 XNA 不完全匹配，但数学保持不变。

```
 /// <summary>
    /// Recalculates the normals.
    /// Implementation adapted from http://devmaster.net/forums/topic/1065-calculating-normals-of-a-mesh/
    /// </summary>
    public void RecalculateNormals()
    {
        Vector3[] newNormals = new Vector3[_vertices.Length];

        // _triangles is a list of vertex indices,
        // with each triplet referencing the three vertices of the corresponding triangle
        for (int i = 0; i < _triangles.Length; i = i + 3)
        {
            Vector3[] v = new Vector3[]
            {
                _vertices[_triangles[i]],
                _vertices[_triangles[i + 1]],
                _vertices[_triangles[i + 2]]
            };

            Vector3 normal = Vector3.Cross(v[1] - v[0], v[2] - v[0]);

            for (int j = 0; j < 3; ++j)
            {
                Vector3 a = v[(j+1) % 3] - v[j];
                Vector3 b = v[(j+2) % 3] - v[j];
                float weight = (float)Math.Acos(Vector3.Dot(a, b) / (a.magnitude * b.magnitude));
                newNormals[_triangles[i + j]] += weight * normal;
            }
        }

        foreach (Vector3 normal in newNormals)
        {
            normal.Normalize();
        }

        normals = newNormals;
    } 
```

# wordpress - Wordpress：从 content_save_pre 访问帖子标题

> ID：10296359
> 
> 赞同：1
> 
> 时间：2012-04-24T10:45:23.240
> 
> 标签：wordpress

我在保存时修改内容并需要访问帖子标题，到目前为止我在functions.php中拥有的内容

```
add_filter('content_save_pre', 'custom_content_save_pre');

function custom_content_save_pre($s) {
   // need to access post title here
   $postTitle = ? 

    // some more code here 
    return $s;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:32:15.933

全球化 $post 对象，您将可以访问它，例如：

```
add_filter('content_save_pre', 'custom_content_save_pre');

function custom_content_save_pre($s) {
   global $post;
   $postTitle = $post->title;

    return $s;
} 
```

但更好的使用方法是`wp_insert_post_data`接受 2 个参数 `$data`，`$postarr` 其中 data 是需要返回以进行保存的 post 对象的数组。

# asp.net-mvc - 是否可以手动更新 ModelState.IsValid？

> ID：10296361
> 
> 赞同：28
> 
> 时间：2012-04-24T10:45:31.753
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想尽可能使用内置的验证功能。我也想对 CRUD 方法使用相同的模型。

但是，由于无法使用标准模式完成下拉列表，我必须手动验证它。在回发方法中，我只想验证下拉列表并将此结果添加到 ModelState 中，这样我就不必验证使用数据注释完成的所有其他参数。有可能实现这一目标吗？

我可能对下拉列表有误，但根据我的阅读，下拉列表的 Html 对象名称不能与模型中的属性相同，以便正确设置所选值。是否仍然可以通过此解决方法使用数据注释？

谢谢。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-24T10:56:18.727

您可以使用[`addModelError`](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstatedictionary.addmodelerror%28v=vs.90%29.aspx)

```
ModelState.AddModelError(key,message) 
```

当您使用它时，它将使 ModelState 无效，因此`isValid`将返回 false。

* * *

***看到@Pieter 回答的评论后***更新**** 

 ***如果要排除某个元素对`isValid()`结果的影响，可以[`ModelState.Remove(field)`](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelstatedictionary.remove%28v=vs.90%29.aspx)在调用之前使用该方法`isValid()`。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-24T11:08:37.703

另一种选择是继承`IValidatableObject`您的模型。实现它的`Validate`方法，您可以保留所有其他验证并在此方法中编写您想要的任何代码。注意：您返回一个空`IEnumerable<ValidationResult>`表示没有错误。

```
public class Class1 : IValidatableObject
{
    public int val1 { get; set; }
    public int val2 { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        var errors = new List<ValidationResult>();
        if (val1 < 0)
        {
            errors.Add(new ValidationResult("val1 can't be negative", new List<string> { "val2" }));
        }
        if (val2 < 0)
        {
            errors.Add(new ValidationResult("val2 can't be negative", new List<string> { "val2" }));
        }
        return errors;
    }
} 
```

编辑：重新阅读问题后，我认为这不适用于这种情况，但我将答案留在这里，以防它帮助其他人。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T10:56:08.250

您不能手动设置 ModelState.IsValid 属性，但可以向 ModelState 添加消息，以确保 IsValid 为 false。

```
ModelState.AddModelError(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-24T15:04:17.933

是的，你可以做到这一点（你也将使用相同的模型用于 CRUD 方法）：

示例模型

```
public class User 
{
    public virtual int Id{ get; set; }
    public virtual Role Role { get; set; }
}
public class Role 
{        
    [Required(ErrorMessage = "Id Required.")]
    public virtual int Id { get; set; }
    [Required(ErrorMessage = "Name Required.")]
    public virtual string Name { get; set; }
} 
```

在下拉列表中进行验证的示例 VIEW

```
@Html.DropDownListFor(m => m.Role.Id, (SelectList)ViewBag.gRoles, "-- Select --")
@Html.ValidationMessageFor(m => m.Role.Id) 
```

CONTROLLER：清除必填（但此处不需要）字段

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Creedit(User x)
{
    x.Role = db.RoseSet.Find(x.Role.Id);
    if (x.Role != null)
    {
        ModelState["Role.Name"].Errors.Clear();

    }

    if (ModelState.IsValid)
    {
      // proceed
    }
    else
    {
      // return validation error
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-05T14:24:48.613

可能是更新的方法，因为这是一篇旧文章，但这可能会对未来的读者有所帮助。

可以使用以下两种方法将字段设置为有效：

```
ModelState.ClearValidationState("Password");
ModelState.MarkFieldValid("Password"); 
```

需要同时使用两者，因为第二个没有第一个，它会给出一个错误，指出状态已经被标记。

要将字段设置为无效，只需使用前面提到的 ModelState.AddModelError() 方法。***

# javascript - 使用咖啡脚本的正确时间

> ID：10296365
> 
> 赞同：18
> 
> 时间：2012-04-24T10:45:45.177
> 
> 标签：javascript, ruby-on-rails, coffeescript

所以基本上我有一些担心让我远离咖啡脚本：

1.  我还不是真正的 js 专家，即使我使用它大约 3 年了，我仍然觉得我错过了一些重要的东西。因为它对我来说主要是一种支持性技术，所以我从来没有时间深入研究 js（我承认，这可能是一种错误的态度）。

2.  如果我开始使用咖啡脚本，我的 js 知识会变得更糟

3.  我不确定我是否真的可以信任 coffescript，这意味着它编译成的 js 代码

4.  有时我不明白 js 代码 Coffeescript 编译成什至更糟 - 为什么它会这样编译。

我想知道您对以上几点的看法。关键是：使用coffeescript如何影响你对js的了解？你认为在切换到coffeescript之前完全理解js有多重要？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T15:02:59.687

您应该了解 Coffeescript 应该解决的问题。为此，您应该对 javascripts 的“坏部分”有基本的了解。我建议阅读 Douglas Crawford 的相关内容（有一本书，但互联网上也有很多资源。只需谷歌“javascript bad parts”）。基本上，这个想法是“在所有那些笨拙的大括号和分号之下，JavaScript 的核心始终有一个华丽的对象模型。CoffeeScript 试图以一种简单的方式展示 JavaScript 的优点。” （取自咖啡脚本的网站）。

有一个工具可以帮助程序员避免 JavaScript 陷阱，称为 jslint。这个工具分析你的代码并给出关于常见错误的警告，例如全局变量、分号插入、命名空间污染等……

Coffeescript 翻译成 javascript。但它生成的 javascript 是一个规范的子集，与 jslint 高度兼容。更重要的是，它会生成适用于所有浏览器的 javascript 代码。所以它不仅仅是一个很好的语法糖层，它确实有助于生成可靠的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T10:58:46.130

我想解决你的担忧。

1）如果你已经使用 JS 三年了，你可能对 JS 有相当扎实的了解。如果您还没有获得扎实的理解，也许是时候用一本好的 JS 书籍来补充您的知识了。

2) Coffee-script 可能不会让你对 JS 的了解更差。您设计 Coffee-script 应用程序的方式与您设计 JS 应用程序的方式相同（大部分情况下），因此您获得的设计技能将会转移。在我看来，程序设计是编程最重要的方面。

3）你为什么不相信JS？为什么您信任您使用的任何其他编译器/解释器/其他工具？我怀疑 Coffee-script 没有错误，但很多人将它用于多种目的。这意味着已经测试了大量的行为，通常是在生产环境中，所以您的用例可能已经过尝试和测试。

4) 当然，Coffee-script 生成的 JS 对你来说看起来很陌生，因为生成它的规则没有优先考虑人类可读性。然而，阅读它会增加你对 JS 的了解，因为你会看到特殊编写的程序是如何运行的。这使我们回到第 1 点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:56:36.210

我认为这里要记住的关键是 Coffeescript 是 javascript。每个 Coffeescript 语句或魔术运算符在 Javascript 中都有不同的具体表示。例如`(x) -> x * x`在 Coffeescript 中会直接翻译成`function (x) { return x * x; }`.

如果不知道它将生成的 Javascript，您就无法真正编写 Coffeescript。一方面，生成的 Javascript 是您必须调试的。如果有的话，我相信编写 Coffeescript 可能会提高您对 Javascript 的理解，因为它迫使您做出 Javascript 独有的决定。例如，在 Coffeescript 中，您决定使用`=>`而不是`->`实际上您正在决定是否要绑定`this`- 一个非常真实的 Javascript 问题。

何时（或是否）开始使用 Coffeescript？我认为这个问题的答案或多或少取决于你。试试看，如果你觉得使用 Coffeescript 完成任务更容易，那就坚持下去。如果你发现很难用与运行的语言不同的语言编写代码（因此你必须调试的语言），然后回到 Javascript。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T10:59:44.040

所以这就是我对这个话题的看法：

1.  JS 不是一种支持性技术（支持什么？）。它是一种主要用于前端的语言，并且有一种在后端使用它的新趋势。由于浏览器本身不支持 CoffeeScript，除非您将其用作后端，所以我认为使用 CoffeeScript 没有意义。虽然学习新语言总是一个好主意。

2.  一点也不。实际上使用 CoffeeScript 就像使用不同的语言。学习一个不会让你在另一个方面变得更笨。除非你停止学习另一个。

3.  没有证据表明 CoffeeScript 可以编译为错误或缓慢的代码。实际上我使用 CoffeeScript 有一段时间了，我没有观察到**任何**性能损失。

4.  实际上你不需要理解它**为什么**会这样编译。如果您在后端使用 CoffeeScript，那么您甚至不必查看它编译成的代码（您只需要源代码）。至于使用它来制作浏览器脚本，那么是的 - 使用它可能有点困难（调试）。这就是为什么我总是建议为浏览器编写*普通*的 JavaScript 并在后端使用 CoffeeScript。

现在至于最后一个问题：我认为 CoffeeScript 根本不会影响我的 JS 知识。我将它们视为不同的语言。此外，除非您想在前端使用 CoffeeScript，否则您无需了解 JS 即可切换到 CoffeeScript（尽管您应该）。

无论如何，掌握 JavaScript**总是一个好主意。**:)

# iphone - IOS4 和 IOS5 中的 contentSizeForViewInPopover 高度不同

> ID：10296366
> 
> 赞同：0
> 
> 时间：2012-04-24T10:45:50.090
> 
> 标签：iphone, ios, uipopover, contentsize

![在此处输入图像描述](../Images/d9cb11b61c0a11482af78f20c797fe3b.png)

![在此处输入图像描述](../Images/37ce4151e3d7378bb1846b7183fd2f8e.png)

您好，我在 UIScrollView 中嵌入了静态内容的 UITableView，所以我刚刚在弹出窗口中设置了大小：

```
- (CGSize)contentSizeForViewInPopover
{    
    return CGSizeMake(600, 670);
} 
```

但是，我得到了不同的弹出高度（见附件）。在 IOS4.3 中高度大于在 IOS5 中。我不想检查 IOS 版本和增加/减少高度。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:27:54.953

您可以根据 tableview 的高度动态计算弹出框的高度，并`contentSizeForViewInPopoverView`像这样覆盖：

```
- (CGSize)contentSizeForViewInPopoverView {
    CGFloat width = 200.0; // Currently no way to obtain the width dynamically, only height.
    CGRect rect = [self.tableView rectForSection:[self.tableView numberOfSections] - 1];
    CGFloat height = CGRectGetMaxY(rect);
    return (CGSize){width, height};
} 
```

这假设您有 1 个部分。如果你有更多，你只需要使用`rectForSection`确定每个部分的高度并将它们相加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:36:42.180

据我所知，当使用导航控制器作为弹出内容时，你必须

1.  在`contentSizeForViewInPopover`根控制器（或显示为第一个的任何人）上设置。（不要尝试在导航控制器上设置大小）。

2.  每当您推送/弹出控制器并且想要更改堆栈上新控制器的弹出框大小时，请`setPopoverContentSize:animated:`显式调用。A`UINavigationControllerDelegate`对此有好处。

# iphone - 如何从detailView中删除子视图？

> ID：10296368
> 
> 赞同：1
> 
> 时间：2012-04-24T10:45:51.817
> 
> 标签：iphone, ipad, uisplitviewcontroller, master-detail

我的 masterView 中有一个表，在 detailView 中有一些 imageView，基于 masterView 中的不同行选择，我必须删除 ImageView 并添加一些其他视图。我无法删除 ImageView .... 任何帮助??? 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:51:32.093

尝试：

```
for (UIView *view in masterView.subviews){
   if (view == yourImageView) {
       [view removeFromSuperview];            
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:51:51.457

首先，您向所有图像视图提供除 0 以外的标记值

进而

```
for (UIView *sub in [self.view subviews]) {
         use tag to find proper view and remove it from superView
    } 
```

# windows-phone-7.1 - Microsoft Ad Control - Black box when launching app

> ID：10296369
> 
> 赞同：1
> 
> 时间：2012-04-24T10:45:52.133
> 
> 标签：windows-phone-7.1

I am implementing Ad Control into a WP7 app. When I launch the application, a black ad box appears for a second or two then disappears or it changes showing the ad.

I do not want the black box to be shown.

# html - Firefox 中表格行之间的间隙

> ID：10296374
> 
> 赞同：1
> 
> 时间：2012-04-24T10:46:12.070
> 
> 标签：html, css

我已经在这个问题上苦苦挣扎了几个小时。我有一个表格行，其中包含三个围绕图像作为按钮的锚点。在大多数浏览器中它还可以，但在 Firefox 和 IE 中，带有“A”标签的表格行与下一个表格行之间存在间隙。在 Firefox 中，这似乎是由锚点引起的，因为当我取出锚点时，问题就消失了。在 IE 中，问题似乎有所不同，我还没有进一步隔离它。在这个阶段，如果有人知道如何在 Firefox 中解决它，我将不胜感激。这是受影响的表行的代码部分：

```
<tr class="topcontrols" height="55">
    <td class="topcontrols"  style="width:13px;" height="55" width="13">
        <img class="topcontrols"  src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/lt_frame_corner.gif" width="13" height="55" hspace="0" vspace="0" border="0"/>
    </td>
    <td style="width:56px;" height="55" width="56" class="frametop">
        <img class="topcontrols"  src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/frame_top.gif" width="56" height="55" hspace="0" vspace="0"  border="0"/>
    </td>
    <td class="topcontrols"  style="width:160px;" width="160" height="55">
        <a class="topcontrols"  class="topcontrols"  href="<?php echo $this->baseurl ?>/index.php/novazeal">
            <?php if($this->countModules('novazeal-home')) { ?>
                <img class="topcontrols"  src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/button_home_active.gif" width="160" height="55" border="0" />
            <?php } else { ?>
                <img class="topcontrols"  src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/button_home_inactive.gif" width="160" height="55" border="0"  />
            <?php } ?>
        </a>
    </td>
    <td class="servicestab" height="55" width="163">
        <div class="servicesdropmenu"></div>
        <a class="topcontrols"  href="<?php echo $this->baseurl ?>/index.php/novazeal/services">
            <?php if($this->countModules('novazeal-services')) { ?>
                <img class="servicestab" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/button_services_active.gif" width="163" height="55" border="0"  />
            <?php } else { ?>
                <img class="servicestab" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/button_services_inactive.gif" width="163" height="55" border="0"  />
            <?php } ?>
        </a>
    </td>
    <td class="topcontrols"  style="width:161px;" height="55" width="161">
        <a class="topcontrols"  href="<?php echo $this->baseurl ?>/index.php/novazeal/contact">
            <?php if($this->countModules('novazeal-contact')) { ?>
                <img class="topcontrols"  src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/button_contact_active.gif" width="161" height="55" border="0" />
            <?php } else { ?>
                <img class="topcontrols"  src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/button_contact_inactive.gif" width="161" height="55" border="0" />
            <?php } ?>
        </a>
     </td>
    <td class="frametop"  style="width:256px;" height="55" width="256">
        <img class="topcontrols"  src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/frame_top.gif" width="256" height="55" border="0" style="width:256px"/>
    </td>
    <td class="topcontrols"  style="width:14px;" height="55" width="14">
        <img class="topcontrols"  src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/rt_frame_corner.gif" width="14" height="55" border="0" />
    </td>
</tr>
<tr style="height:100%;">
    <td class="frameedges" bgcolor="#131243" style="background-image: url(<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/left_frame_edge.gif);">
    </td>
    <td colspan="5" BGCOLOR="#ffffee" class="contentarea">
        <jdoc:include type="component" />
    </td>
  <td class="frameedges" bgcolor="#131243" style="background-image: url(<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/images/right_frame_edge.gif);">
  </td>
</tr> 
```

这是这些行中使用的 CSS：

```
.contentarea {
    background-color: #ffffff;
    min-height:100%; 
    height:100%; 
    overflow:hidden;
    position:relative; 
    vertical-align: top;
}

.frametop {
    background:url(../images/frame_top.gif);
    max-height:55px; 
    height:55px; 
    overflow:hidden;

}

.topcontrols {
    position: relative;
    max-height:55px; 
    height:55px; 
    overflow:hidden;
}

.servicestab {
    position: relative;
    max-height:55px; 
    height:55px; 
    overflow:hidden;
    width:163px;

}

.servicesdropmenu {
    -moz-transition: all 0.2s ease-in-out;
    -webkit-transition: all 0.2s ease-in-out;
    -o-transition: all 0.2s ease-in-out;
    transition: all 0.2s ease-in-out;
    background-color:rgba(100,100,255,0.0); 
    height:14px; 
    width:158px; 
    position:absolute; 
    z-index: 100;
    top:38px; 
    left:3px;
}

.servicestab:hover .servicesdropmenu {
    height:100px;
    background-color:rgba(100,100,255,0.92);
} 
```

提前感谢任何可能导致解决方案的想法。

特里·罗兹穆斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:55:21.717

使用表格进行布局是一种不好的做法。尝试将 div 与 css 一起使用。它会更好，一旦你掌握了它的窍门，它就更容易、更可配置了。

1.  表通常是更多字节的标记。（下载时间更长，主机流量更大。）
2.  表格通常会阻止增量渲染。（用户需要更长的时间才能看到页面上的任何内容。）
3.  表格可能需要您将单个逻辑图像分割成多个图像。（这使得重新设计完全是地狱，并且还增加了页面加载时间[更多的 http 请求和更多的总字节数]。）
4.  表格会破坏某些浏览器上的文本复制。（这对用户来说很烦人。）
5.  表格会阻止某些布局在其中工作（例如 height:100% 的子元素）。（它们限制了您在布局方面实际可以做的事情。）
6.  一旦你了解了 CSS，基于表格的布局通常需要更多的时间来实现。（前期学习 CSS 的一点努力最终会获得丰厚的回报。）
7.  表格在语义上是不正确的布局标记。（他们描述的是演示文稿，而不是内容。）
8.  对于那些使用屏幕阅读器的人来说，表格让他们的生活变得很糟糕。（您不仅可以获得 CSS 的其他好处，还可以帮助盲人/有视力障碍的人。这是一件好事。）
9.  表格将您锁​​定在当前设计中，使重新设计比语义 HTML+CSS 更难

# grails - 在集成测试中开发grails插件“没有定义名为'transactionManager'的bean”

> ID：10296382
> 
> 赞同：5
> 
> 时间：2012-04-24T10:46:24.437
> 
> 标签：grails, integration-testing, grails-orm, grails-plugin

我正在开发一个 grails 插件，但是当我尝试为服务创建集成测试时，我收到了这个错误

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'aService': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'transactionManager' is defined
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:232)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:61)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:223)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:29)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.junit.runners.Suite.runChild(Suite.java:129)
at org.junit.runners.Suite.runChild(Suite.java:24)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:232)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:61)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:223)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at _GrailsTest_groovy$_run_closure4.doCall(_GrailsTest_groovy:290)
at _GrailsTest_groovy$_run_closure2.doCall(_GrailsTest_groovy:249)
at _GrailsTest_groovy$_run_closure1_closure21.doCall(_GrailsTest_groovy:195)
at _GrailsTest_groovy$_run_closure1.doCall(_GrailsTest_groovy:184)
at TestApp$_run_closure1.doCall(TestApp.groovy:82)
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'transactionManager' is defined
... 24 more 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T15:03:27.567

我相信如果您卸载了 Hibernate 并且没有指定另一个事务管理器，就会发生这种情况。默认情况下，Grails 服务是事务性的，而 Hibernate 负责管理该事务。如果您不使用 Hibernate，则可以将您的服务设置为非事务性的`def transactional = false`

# asp.net - Quartz.NET 来自 ASP.NET 中的 config.xml

> ID：10296383
> 
> 赞同：5
> 
> 时间：2012-04-24T10:46:27.870
> 
> 标签：asp.net, quartz.net

有人可以建议我做错了什么。我正在尝试设置石英，以便在启动时读取一个 xml 配置文件。在文件中有一个激活我的`HelloEmail_Job.cs`类的作业（它被正确创建，扩展`IJob`了执行方法中的逻辑）。该 xml 还具有一个用于每分钟触发的作业的 cron 触发器（纯粹用于测试）。

但是一切都在没有错误的情况下启动，但工作永远不会触发。我确定我配置错误。

我有一个处理调度程序生成的单例，调度程序在我的应用程序启动时启动（在`global.asax`文件中）

```
 NameValueCollection properties = new NameValueCollection();
    properties["quartz.scheduler.instanceName"] = "RemoteServer";

    ////// set thread pool info
    properties["quartz.threadPool.type"] = "Quartz.Simpl.SimpleThreadPool, Quartz";
    properties["quartz.threadPool.threadCount"] = "5";
    properties["quartz.threadPool.threadPriority"] = "Normal";

    properties["quartz.jobStore.type"] = "Quartz.Impl.AdoJobStore.JobStoreTX, Quartz";
    properties["quartz.jobStore.useProperties"] = "true";
    properties["quartz.jobStore.dataSource"] = "default";
    properties["quartz.jobStore.tablePrefix"] = "QRTZ_";
    properties["quartz.jobStore.lockHandler.type"] = "Quartz.Impl.AdoJobStore.UpdateLockRowSemaphore, Quartz";

    properties["quartz.dataSource.default.connectionString"] = "Data Source=CRAIG-PC\\SQLEXPRESS;Initial Catalog=MCWdb;User ID=sa;Password=mastercrud;";
    properties["quartz.dataSource.default.provider"] = "SqlServer-20";

    // job initialization plugin handles our xml reading, without it defaults are used
    properties["quartz.plugin.xml.type"] = "Quartz.Plugin.Xml.XMLSchedulingDataProcessorPlugin, Quartz";
    properties["quartz.plugin.xml.fileNames"] = "~/quartz_jobs.xml";

    ISchedulerFactory sf = new StdSchedulerFactory(properties);
    _sched = sf.GetScheduler(); 
```

我的`quartz_jobs.xml`文件如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>

        <job-scheduling-data xmlns="http://quartznet.sourceforge.net/JobSchedulingData"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                        version="2.0">

          <processing-directives>
            <overwrite-existing-data>true</overwrite-existing-data>
          </processing-directives>

          <schedule>        
                <job> 
                  <job-detail> 
                    <name>MyJob</name> 
                    <group>MyJobs</group> 
                    <description>sends out a test email</description>
                      <job-type>HelloEmail_Job</job-type>
                      <volatile>false</volatile> 
                    <durable>true</durable> 
                    <recover>false</recover> 
                    <job-data-map> 
                      <entry> 
                        <key>Body</key> 
                        <value>Hello From your website!!!!!!!!</value> 
                      </entry> 
                    </job-data-map> 
                  </job-detail> 
                  <trigger> 
                    <cron> 
                      <name>MyJobTrigger</name> 
                      <group>MyJobs</group> 
                      <description>A description</description> 
                      <job-name>MyJob</job-name> 
                      <job-group>MyJobs</job-group> 
                      <cron-expression>0 0/1 * 1/1 * ? *</cron-expression> 
                    </cron> 
                  </trigger> 
                </job>
            </schedule>

        </job-scheduling-data> 
```

我知道调度程序可以通过简单的触发器正确运行*临时*作业，因为当我的应用程序创建它们并动态调度它们时，它可以完美运行。但我希望逻辑可重复（通过 cron），并通过 xml 进行配置。

我的直觉是 JOB_TYPE 的值是错误的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T23:04:31.957

您的工作类型需要指定为

```
<job-type>Fully.Qualified.Type.Name, AssemblyNameWithoutTheDllExtension</job-type> 
```

# c# - How to save a form's layout at runtime

> ID：10296384
> 
> 赞同：1
> 
> 时间：2012-04-24T10:46:43.577
> 
> 标签：c#, .net, winforms, serialization

I have a project in which I create a blank form and add controls to it from a XML template at runtime. This works well, but it takes a bit of time to do it. I want to know if it is possible to save the layout of the form to a .NET format after it has been defined at runtime so I don't have to keep parsing the xml to create the form. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:58:23.310

您无法序列化`windows.forms.control`，但下面的链接应该可以帮助您

[如何在c#中序列化windows窗体和其他子控件并将它们保存到表中](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/9de0d09d-537a-49a0-a260-877f47b42c89)

[如何克隆/序列化/复制和粘贴 Windows 窗体控件](http://www.codeproject.com/Articles/12976/How-to-Clone-Serialize-Copy-Paste-a-Windows-Forms)

顺便说一句，您应该为此查看 WPF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:49:58.160

[Form.Controls](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controls.aspx)是一个[Control](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.aspx)列表。这些控件中的每一个都包含一个 Width、Height 和 Location 属性，您可以在序列化回 XML 文档时使用这些属性。

基本上我想说的是，你可以序列化 Form.Controls

# c# - 贝宝即时付款通知

> ID：10296386
> 
> 赞同：2
> 
> 时间：2012-04-24T10:46:44.310
> 
> 标签：c#, asp.net, paypal, sandbox

我正在开发一个捐赠页面，用户可以在其中输入捐赠金额，然后被重定向到 PayPal 页面进行付款。

**我想从 PayPal 获得验证，告知我用户是否真的在 PayPal 支付页面上进行了交易，以便我可以在数据库中记录交易。** 我读到我必须使用 PayPal 即时付款通知，但是我找不到有关如何执行此操作的好教程。

这是我到目前为止使用的代码：

```
string temp_url = "https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_donations&business=sponsorchild92@gmail.com&item_name=Sponsor a Child Society&amount=";
string PayPal = temp_url + Convert.ToString(donation);
Response.Redirect(PayPal); 
```

我正在使用 PayPal 的沙盒帐户。我已经建立了一个企业帐户并且能够进行付款。唯一的问题是我不知道如何使用 PayPal 即时付款通知。

有人可以提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:05:36.907

对于 PayPal 即时付款通知，请在您的业务 a/c 中进行设置

点 1。

对于沙箱 a/c，请阅读此内容-> [Paypal IPN 在 paypal 帐户中不起作用，但在沙箱中正常工作](https://stackoverflow.com/questions/9870288/paypal-ipn-is-not-working-in-paypal-account-but-its-working-correctly-in-sandbox/9919647#9919647)

对于 PayPal a/c 阅读此内容-> [notify_url 不再工作](https://stackoverflow.com/questions/9905100/notify-url-no-longer-working/9908027#9908027)

第 2 点。您将根据 point1 或 point2 在您的业务 a/c 中设置的任何 url 在该 url 上使用 Instant Payment Notification api

第 3 点。对于付款通知 api，请阅读此[Paypal API 和 Paypal 的示例代码？](https://stackoverflow.com/questions/4057762/paypal-api-and-paypals-sample-code)或[http://thecodenode.com/PayPalAPICSharpdotNetWrapper.aspx](http://thecodenode.com/PayPalAPICSharpdotNetWrapper.aspx)

我希望它会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:04:30.063

IPN 服务将回调您网站上的指定 URL，并回显您的付款参考和结果。您的网站上会有一个页面，IPN.aspx，一旦您的付款得到确认，paypal 将在您的 HTTP POST 中向您发送回您可以访问的元素列表，例如状态、金额、货币等。我相信一旦用户返回您的站点，查询字符串中返回的字段集是相同的。

当您将用户发送到贝宝时，您可以在那里定义您的 IPN 网址，或在贝宝本身中配置它。我发现在您发送它们时这样做更容易，因为它允许您根据您的环境配置不同的。

请记住，PayPal 需要能够看到您的 URL，因此如果您位于防火墙后面，则需要设置一个规则来允许它。

PayPal SDK 文档提供了一些很棒的示例，我不记得具体的表单名称，所​​以只谈论一般的原理。

# html - HTML body isn't as height as page

> ID：10296389
> 
> 赞同：0
> 
> 时间：2012-04-24T10:46:49.693
> 
> 标签：html, css

I have strange problem. I've a two column DIV layout and I'm setting the page's background via an background-image for the body element.

But my body-element isn't as height as my visible content. I think the problem are absolute positioned div container which grow more than the rest of the page.

How can I fix that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:48:56.807

给出的信息很少，让我建议提高你的身体：

```
body { height:100%; } 
```

根据您的设计，这可能有效，也可能无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:49:34.363

尝试包括

```
 body
 {
  height: 100%;
 } 
```

在你的 css 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:50:23.940

像这样写：

```
html, body {
    height:100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:50:51.757

如果没有代码或示例，我的建议是为您的浏览器添加一个不错的 CSS 重置。默认情况下，浏览器有一个 CSS “电子表格”，通常正文有边距。

[试试这个](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T10:53:40.233

在您的 CSS 文件中，您可以使用：

```
html{
    background: url(../images/image.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

这会将背景图像的大小调整为所有显示器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T11:34:49.053

抱歉，我不能发布解决方案的代码，因为我必须发布整个 HTML 文件，这个文件非常大。

问题似乎是我正在处理的那种页面：它只是一个分为多个部分的 HTML 站点。但是每个部分在经典网页设计中都是一整页。用户使用 JS 在各个部分之间切换。

删除 position: relative 从增长的内容 div 后，使部分高度 100%，死增长的内容 div 高度 100% 似乎工作。

但是仍然奇怪的是，为什么该部分没有像具有动态大小内容的 div 那样增长。

# entity-framework - EntityFramework：EntityCollection.Remove 存在严重的性能问题

> ID：10296404
> 
> 赞同：2
> 
> 时间：2012-04-24T10:47:36.463
> 
> 标签：entity-framework

通过导航属性从集合对象中删除对象时，我遇到了严重的性能问题。调用 EntityCollection.Remove 需要 8 分钟 (!!!!) 才能完成

详细信息：CollectionObject X 有 65.000 个对象。只有其中一个应该从集合中删除。

没有太多自己的代码涉及，即 EntityCollection 是通过（生成的代码）创建的

```
RelationshipManager.GetRelatedCollection<...>(<relationShipName>, <targetRoleName>) 
```

而实际的 Remove 只是一个调用

```
EntityCollection<Type>.Remove 
```

我怀疑 EntityFramework 在执行实际删除之前会加载所有 65.000 个对象。然而，到目前为止，我还无法证明这个假设。

有任何想法吗？

谢谢弗兰克

附加信息：我发现这个有用的链接： [EF 构建 EntityCollection，但我（我认为我）想要 IQueryable](https://stackoverflow.com/questions/4317879/ef-builds-entitycollection-but-i-think-i-want-iqueryable) 问题的真正原因是 EntityCollection 在执行删除时的行为。

我找到了一种解决方法并使用关系的较小端，即当我想删除从对象 A 到对象 B 的关系时，当对象 A 有 65000 个对象时，我从对象 B 端删除关系，其中性能没关系，因为对象 B 仅与例如 10 个对象相关。显然，这不是该问题的令人满意的通用解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:28:10.960

是的，它可能会在删除之前加载所有对象。您可以使用 SQL Server 附带的 SQL Profiler 工具来验证这一点。

就删除对象而言，如果您需要获取此导航属性，您可以在 EntityReference 上使用 CreateSourceQuery。如果您的导航属性称为 Candles，则默认情况下会调用 CandlesReference 的 EntityReference。所以你的删除看起来像这样：

```
var victim = entity.CandlesReference.CreateSourceQuery().Single(c => .....);
context.DeleteObject(victim);
context.SaveChanges(); 
```

这将获得本应执行的查询，并让您有机会选择您想要的查询，而无需先获取所有内容。

假设您有必要的信息，直接查询可能更有效，例如

```
var victim = context.Candles.Single(c => ....); 
```

# iphone - 检索 iPhone 短信对话

> ID：10296406
> 
> 赞同：0
> 
> 时间：2012-04-24T10:47:41.080
> 
> 标签：iphone, cocoa-touch

我需要知道如何通过我的 iPhone 应用程序检索本机 SMS。任何帮助都感激不尽。

例如，我启动我的应用程序并在单击按钮时想要检索特定人的一些 SMS 对话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:52:24.093

你不能这样做。除非您在越狱设备上运行。

今后，请使用搜索功能，避免重复发布已经被多次询问和回答的问题。

# javascript - jsTree：如何从 jstree 获取所有节点？

> ID：10296410
> 
> 赞同：12
> 
> 时间：2012-04-24T10:47:49.760
> 
> 标签：javascript, jquery, jquery-plugins, jquery-selectors, jstree

如何获取jsTree中存在的所有节点？

我正在用 xml 构建 jsTree

```
Root
     -----A
          -----A1
               -----A1.1
               -----A1.2
          -----A2
               -----`A2.1`
               -----A2.2

     -----B
          -----B1
          -----B2

     -----C
          -----C1
               -----C1.1
               -----C2.2 
```

我想要 jsTree 中存在的所有节点（ID）的数组如下

**预期输出：[根，A，A1，A1.1，A1.2，A2，A2.1，A2.2，B，B1，B2，C，C1，C1.1，C2.2]**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T12:12:40.243

从[文档](http://www.jstree.com/documentation/json_data)：

> `.get_json ( node , li_attr , a_attr )`
> 
> 此函数返回转换回 JSON 的树节点数组。

[此文档](http://luban.danse.us/jazzclub/javascripts/jquery/jsTree/reference/_documentation/7_api.html)中有关相同功能的更多信息：

> 此函数遍历整个树并将其导出为 JSON。请参阅数据源部分以查看输出的格式。
> 
> 如果将节点指定为第一个参数，则仅该节点及其子节点包含在导出中，否则将导出整个树。

只需搜索，您就会找到！:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T05:58:35.250

**示例解决方案:)**

```
var xmlString = $("#tree").jstree("get_xml");   
    var xmlDOM = $.parseXML(xmlString);

    var IDList =[];
var items = $(xmlDOM).find('root item');
$.each (items, function(key, val){
    IDList.push($(val).attr('id'));
})

IDList.pop(); 
```

**xml字符串 =**

```
<root>  
        <item id="A" parent_id="0" state="close">  
            <content><name>Charles Madigen</name></content>                
        </item>
        <item id="A1" parent_id="A" state="close">  
            <content><name>Charles Madigen</name></content>                
        </item>
          .
          .
</root> 
```

**输出：根，A，A1，A1.1，A1.2，A2，A2.1，A2.2，B，B1，B2，C，C1，C1.1，C2.2**

**:)**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-08T07:42:12.533

您可以遍历每个节点元素并将其 id 通过以下方式放入数组中：

```
var idList = [];
var jsonNodes = $('#tree').jstree(true).get_json('#', { flat: true });
$.each(jsonNodes, function (i, val) {
    idList.push($(val).attr('id'));
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-13T18:44:57.907

```
var treeData = $('#MyTree').jstree(true).get_json('#', {flat:false})
// set flat:true to get all nodes in 1-level json
var jsonData = JSON.stringify(treeData ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-16T12:04:46.200

鉴于 get_xml 在 jstree3 中不再可用，我需要同样的东西并提出以下解决方案

```
function get_jstree_order(root_ul_selector, children) {
    var output = [];
    var _this = this;

    if (typeof children === 'undefined') {
        children = $(root_ul_selector).find('> li');
    }

    children.each(function() {
        if ($(this).find('ul').length > 0) {
            output.push({
                id: $(this).attr('id'),
                children: get_jstree_order(root_ul_selector, $(this).find('ul > li'))
            });

            return;
        }

        output.push({
            id: $(this).attr('id'),
            children: false
        })
    });

    return output;
}

console.log(get_jstree_order('#mytree > ul')); 
```

输出（为了便于阅读，转换为 JSON）：

```
[
  {
    "id": "1",
    "children": false
  },
  {
    "id": "2",
    "children": false
  },
  {
    "id": "5",
    "children": [
      {
        "id": "6",
        "children": false
      },
      {
        "id": "7",
        "children": false
      }
    ]
  },
  {
    "id": "8",
    "children": false
  },
  {
    "id": "9",
    "children": false
  },
  {
    "id": "10",
    "children": false
  },
  {
    "id": "11",
    "children": false
  }
] 
```

根据需要修改；包括什么需要，但我的目的只是为了获得服务器端处理的正确项目顺序。

如果孩子的 id 独立于他们的父母（例如，父母的第一个孩子总是从 1 开始），那么延迟加载就可以了

# php - 当存储过程插入语句具有重复的主键或不成功时显示错误消息

> ID：10296413
> 
> 赞同：0
> 
> 时间：2012-04-24T10:47:56.743
> 
> 标签：php, mysql, codeigniter, stored-procedures, error-handling

我正在使用一个在表中插入数据的存储过程。现在，如果我使用表中已经存在的主键值插入数据，那么它应该会提供一个错误，但目前它正在将我带到这个页面

```
A Database Error Occurred

Error Number: 0

call spInsertabc('primary_key_value_which_already_exists','edd')

Filename: models/abc_model.php

Line Number: 46 
```

如果存在类似的主键值或如果插入数据时出错。

我怎样才能做到这一点？

我正在使用 codeigniter 2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:56:02.327

您试图在已经有主键的表上使用 ALTER TABLE 命令的 ADD PRIMARY KEY 子句。

首先删除现有的主键。

# c# - 在silverlight 4 中从一个xaml 页面导航到另一个xaml 页面？

> ID：10296420
> 
> 赞同：0
> 
> 时间：2012-04-24T10:48:28.583
> 
> 标签：c#, silverlight, xaml, silverlight-4.0

我是银光新手。我想在silverlight 4中从登录页面转到另一个页面。如何在silverlighr 4中做到这一点。c#中的代码是什么？

我在登录按钮上写了点击

```
NavigationService n = NavigationService.GetNavigationService(sender as Button);

n.Navigate(new Uri("SelectionPage.xaml", UriKind.Relative)); 
```

但我收到以下错误：

```
System.Windows.Navigation.NavigationService' does not contain a definition
for 'GetNavigationService' 
```

我正在使用 System.windows.navigation 命名空间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:51:27.117

尝试

`this.NavigationService.Navigate(new Uri("SelectionPage.xaml", UriKind.Relative));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:37:48.773

我使用您的代码来定义以下方式，但仍然没有调用该页面 `this.NavigationService.Navigate(new Uri("Parchase_order_main.xaml", UriKind.Relative));`

# sql - 如何将 id 分配给组 SQL Server

> ID：10296422
> 
> 赞同：1
> 
> 时间：2012-04-24T10:48:31.210
> 
> 标签：sql, sql-server, database, database-design, schema

我正在运行一个计划任务，它每晚在设定的时间检查属性的值。我的计划是根据返回的值构建一个前端。

目前，由于要返回的数据量如此之大，我每晚要在数据库中返回 800 多行。

其中一列是查询运行的日期——令我震惊的是，这是多余的，因为对于每组属性（即每晚运行计划任务），这个 dateTime 值将是相同的。

从我的数据库中删除这个冗余/重复日期的最佳方法是什么？

目前我有以下标题：

```
Id -- Name -- AttributeIMeasure -- dateRan 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:00:44.527

我很想创建一个单独的表，`RunInformation`，一个主键列`Id`， 和一个`RunDate`列：

```
Id -- RunDate 
```

`dateRan`然后，您可以将表中的列替换为对该表的引用`RunInformation`。如果需要，这将允许您在将来存储有关运行的其他信息。

```
Id -- Name -- AttributeIMeasure -- RunInformationId 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:04:05.837

我不会删除这种冗余。

你能*确定*你永远不会只更新组的*一部分*吗？
- 某种失败或错误？
- 未来要求的变化？

另外，冗余的真正缺点是什么？您要解决什么实际*问题？*

如果您*确实*需要这样做，那么您只需要一种将属性映射到组的方法。

创建一个`attribute_groups`表（至少包含 id 和 dateRan 字段），并`attributeGroupID`在原始表中添加一个字段。

但是在这种情况下，我仍然看不到架构复杂性的增加、获取 DateRan 值所需的额外连接以及增加的约束是如何值得的。

# facebook - 检索 Facebook 用户标记的信息

> ID：10296425
> 
> 赞同：1
> 
> 时间：2012-04-24T10:49:00.710
> 
> 标签：facebook, facebook-graph-api

再会！我正在尝试检索 Facebook 用户标记的信息。目前我正在使用 Facebook Graph API 使用 USER_ID 和 APP_ACCESS_TOKEN 检索用户墙信息

Facebook Graph API（或任何其他 API）中是否有任何方法可以检索用户标记的详细信息？我只有应用程序访问令牌（但没有用户访问令牌）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:15:05.437

是`/USER_ID/tagged`你要找的吗？[在图形资源管理器](https://developers.facebook.com/tools/explorer?method=GET&path=NewRepublicBrewing/tagged)中尝试。

# android - 我无法在我的 android 应用程序中打开 PDF

> ID：10296430
> 
> 赞同：0
> 
> 时间：2012-04-24T10:49:23.003
> 
> 标签：android, pdf

我做了一个安卓应用程序。我创建了一个可扩展的列表，当我单击想要打开 PDF 的孩子时。PDF 未打开，显示来自 no_application_found 的消息（“无法打开 PDF”）。打开PDF的代码是：

```
 public boolean onChildClick (
        ExpandableListView parent, 
        View v, 
        int groupPosition,
        int childPosition,
        long id) {
    Log.d( LOG_TAG, "onChildClick: " + childPosition );

    File file = new File("http://www.ratt.ro/grafice/e2-a.pdf");
    Uri path = Uri.fromFile(file);
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.setDataAndType(path, getString(R.string.application_type));
    try 
    {
        startActivity(intent);
    } 
    catch (ActivityNotFoundException e) 
    {
        Toast.makeText(ElistCBox.this, 
            getString(R.string.no_application_found), 
            Toast.LENGTH_SHORT).show();
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:01:37.820

这是您在网络视图中打开 PDF 的方式：

```
webview.loadUrl("http://docs.google.com/gview?embedded=true&url=http://www.ratt.ro/grafice/e2-a.pdf"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:20:42.507

这是我在阅读器中打开 PDF 文件的代码，如果用户没有任何 pdf 阅读器，它会打开指向 Google Play 的链接以供下载：

```
void openpdf (String filename)

{
    String loc = "/sdcard/";
    File file = new File(loc+filename);
    Uri path = Uri.fromFile(file);
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(path, "application/pdf");
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

    try {
        startActivity(intent);
    } catch (Exception e) {

        e.printStackTrace();
        Toast.makeText(getApplicationContext(), "No pdf reader installed", Toast.LENGTH_SHORT).show();
        Intent market = new Intent(Intent.ACTION_VIEW);
        market.setData(Uri.parse("market://details?id=com.adobe.reader"));
        startActivity(market);
    }

} 
```

# c# - MVC3 布局 - 重复部分

> ID：10296432
> 
> 赞同：2
> 
> 时间：2012-04-24T10:49:32.240
> 
> 标签：c#, asp.net-mvc-3, layout, razor

我想将布局页面的主体分为两部分：实际主体和侧边栏。该侧边栏可以包含 0、1 或更多`<div>`元素，这些元素将我在视图中静态定义的控件或数据组合在一起。为了不在每个视图上重复此 div 结构，我想将其拆分为布局页面上的一个部分。但是，由于一个部分不能在视图上多次定义，我不能重复它们。

我可以静态定义一些侧边栏部分，如下所示，但这似乎是一种肮脏的方式：

```
<div id="sidebar1">
    @RenderSection("Sidebar1", false))
</div>
<div id="sidebar2">
    @RenderSection("Sidebar2", false))
</div> 
```

有没有办法动态定义这种类型的布局？

我已经看到一些关于模板化 Razor Delegates 的提及，它可以用作将参数封装在 div 块中的函数：

```
@{ 
    Func<dynamic, object> div = @<div class="block">@item</div>;
}
@div("Block 1")
@div("Block 2") 
```

但是这些似乎只接受不是我正在寻找的文本，并且在布局上定义时它们不会被视图继承。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:22:37.243

我认为您不需要更多部分来解决此问题，而是您可以做的是在渲染侧边栏部分时，您可能只想渲染视图（它将动态处理您的多个 div 逻辑）像这样

```
@section Sidebar
{
    @{Html.RenderAction("actiontorendermultipledivs", "Fromthiscontroller");}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:56:49.277

'Templated Razor Delegates' 不限于只接受'字符串'。您可以将委托定义为：

鉴于：

```
@model IEnumerable<SidebarViewModel>

@{ 
    Func<SidebarViewModel, object> div = @<div class="block">@item.Name</div>;
}

@foreach (var block in Model)
{ 
    @div(block)
} 
```

您将在代表中获得完整的智能感知支持。

示例视图模型：

```
public class SidebarViewModel
{
    public string Name { get; set; }
} 
```

# java - 无法在 java 中使用 cachingHttpClient 缓存 HttpResponse？

> ID：10296433
> 
> 赞同：6
> 
> 时间：2012-04-24T10:49:32.423
> 
> 标签：java, caching, httpresponse

我正在尝试使用cachingHttpClient 缓存HTTP 响应，但徒劳无功。这是我通过参考这个链接放在一起的演示，[http://hc.apache.org/httpcomponents-client-ga/tutorial/html/caching.html](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/caching.html)

```
 public class CacheDemo {

    public static void main(String[] args) {
        CacheConfig cacheConfig = new CacheConfig();
        cacheConfig.setMaxCacheEntries(1000);
        cacheConfig.setMaxObjectSizeBytes(1024 * 1024);

        HttpClient cachingClient = new CachingHttpClient(new DefaultHttpClient(), cacheConfig);

        HttpContext localContext = new BasicHttpContext();

        sendRequest(cachingClient, localContext);
        CacheResponseStatus responseStatus = (CacheResponseStatus) localContext.getAttribute(
                CachingHttpClient.CACHE_RESPONSE_STATUS);
        checkResponse(responseStatus);

        sendRequest(cachingClient, localContext);
        responseStatus = (CacheResponseStatus) localContext.getAttribute(
                CachingHttpClient.CACHE_RESPONSE_STATUS);
        checkResponse(responseStatus);
    }

    static void sendRequest(HttpClient cachingClient, HttpContext localContext) {
        HttpGet httpget = new HttpGet("http://www.mydomain.com/content/");
        HttpResponse response = null;
        try {
            response = cachingClient.execute(httpget, localContext);
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        HttpEntity entity = response.getEntity();
        try {
            EntityUtils.consume(entity);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    static void checkResponse(CacheResponseStatus responseStatus) {
        switch (responseStatus) {
            case CACHE_HIT:
                System.out.println("A response was generated from the cache with no requests "
                        + "sent upstream");
                break;
            case CACHE_MODULE_RESPONSE:
                System.out.println("The response was generated directly by the caching module");
                break;
            case CACHE_MISS:
                System.out.println("The response came from an upstream server");
                break;
            case VALIDATED:
                System.out.println("The response was generated from the cache after validating "
                        + "the entry with the origin server");
                break;
        }
    }

  } 
```

它是一个简单的程序，但我无法弄清楚我哪里出错了。您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T20:22:46.847

[带有 url http://www.mydomain.com/content/](http://www.mydomain.com/content/)的 GET 请求将以 Http 404 代码结束（未找到）。这个结果很可能不会被缓存，所以我猜这就是它对你不起作用的原因。

**更新：** 必须满足某些条件才能提供来自缓存的响应。您应该启用 apache http 客户端的日志记录（例如[http://hc.apache.org/httpclient-3.x/logging.html](http://hc.apache.org/httpclient-3.x/logging.html)）。比您可以调试正在发生的事情以及为什么其他 URL 存在缓存未命中的原因。您可能还应该下载该库的源代码并在那里查看（http://hc.apache.org/downloads.cgi）。尤其是你会对`org.apache.http.impl.client.cache.CachedResponseSuitabilityChecker`课堂感兴趣。这也应该有助于您使用该库进行后续开发。

顺便提一句。[http://muvireviews.com/celebrity/full_view/41/Shahrukh-khan](http://muvireviews.com/celebrity/full_view/41/Shahrukh-khan)返回此标题：

`Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0, max-age=0, no-cache, no-store`

并且由于 if 语句中`CachedResponseSuitabilityChecker`：

```
 if (HeaderConstants.CACHE_CONTROL_NO_CACHE.equals(elt.getName())) {
                log.trace("Response contained NO CACHE directive, cache was not suitable");
                return false;
            } 
```

不会使用缓存。

祝你好运 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T11:31:02.647

默认情况下，CachingHttpClient 假定共享缓存，因此如果响应标头包含“Cache-Control：private”（在您的情况下我认为是这种情况），它将忽略存储。见@https [://hc.apache.org/httpcomponents-client-ga/tutorial/html/caching.html](https://hc.apache.org/httpcomponents-client-ga/tutorial/html/caching.html)（第6.4节配置）

尝试将其关闭，以便能够在仅客户端模式下使用，即

```
CacheConfig cacheConfig = new CacheConfig();
cacheConfig.setMaxCacheEntries(1000);
cacheConfig.setMaxObjectSizeBytes(1024 * 1024);
cacheConfig .setSharedCache(false); // Turn it OFF here 
```

这对我有用。祝你好运 ！！！

# google-plus - 需要 AddThis Google 加号按钮，但旧图标不是当前图标？

> ID：10296437
> 
> 赞同：1
> 
> 时间：2012-04-24T10:49:59.710
> 
> 标签：google-plus

我需要使用 AddThis 显示 Google + 旧按钮，有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T20:35:18.777

这既不是您可以使用 AddThis 做的事情，也不是您应该尝试自己做的事情。

AddThis 积极努力遵守[Google+ 按钮政策](http://www.google.com/webmasters/+1/button/policy.html)。该政策规定只能使用官方图标，这意味着使用按钮图像的每个人都应保持其副本是最新的。此外，作为网站管理员，在与第三方网站互动时遵守此类政策也很重要。

# android - android没有这样的表错误

> ID：10296442
> 
> 赞同：2
> 
> 时间：2012-04-24T10:50:17.603
> 
> 标签：android, sqlite

在创建数据库类时，我被困在没有此类表错误的中间。logcat 说没有这个表。我一直在尝试用几种方法解决，不幸的是仍然出现错误。以下是代码，错误是

> **android.database.sqlite.SQLiteException：没有这样的表：tbl_category：，编译时：SELECT * FROM tbl_category WHERE idx = 1**

```
public class DatabaseManager extends SQLiteOpenHelper {
private SQLiteDatabase db;
private static Context myContext;
public static final String DB_NAME = "ykko.db";

public static final String name = "name";
public static String DB_PATH = "/data/data/com.bit.ykko/databases/";

public DatabaseManager(Context context) {
    super(context, DB_NAME, null, 1);
    DatabaseManager.myContext = context;
}

public void createDataBase() throws IOException {
    boolean dbExit = checkDataBase();

    if (dbExit) {

    } else {
        this.getReadableDatabase().getPath();

        try {

            copyDataBase();

        } catch (IOException e) {
            // throw new RuntimeException(e.getMessage());
            e.printStackTrace();
        }
    }
}

private boolean checkDataBase() {
    SQLiteDatabase checkDb = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        Log.v("Path", myPath);
        checkDb = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLException e) {

    }

    if (checkDb != null) {
        checkDb.close();
    }
    return checkDb != null ? true : false;
}

public void copyDataBase() throws IOException {

    InputStream databaseInput = null;
    String outFileName = DB_PATH + DB_NAME;
    OutputStream databaseOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;

    databaseInput = myContext.getAssets().open("ykko.sqlite");
    while ((length = databaseInput.read(buffer)) > 0) {
        databaseOutput.write(buffer, 0, length);
        databaseOutput.flush();
    }
    databaseInput.close();

    databaseOutput.flush();
    databaseOutput.close();
}

public void openDatabase() throws SQLiteException {

    String myPath = DB_PATH + DB_NAME;
    db = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);

}

public ArrayList<ChineseInfo> getCatByIdx(int idx) {
    ArrayList<ChineseInfo> list = new ArrayList<ChineseInfo>();

    String query = "SELECT * FROM tbl_category WHERE idx = " + idx;

    Cursor c = this.db.rawQuery(query, null);

    if (c.moveToFirst()) {
        do {
            ChineseInfo ch = new ChineseInfo();
            ch.idx = c.getInt(0);
            ch.name = c.getString(1);
            ch.mm_name = c.getString(2);
            list.add(ch);

        } while (c.moveToNext());
    }
    if (c != null && !c.isClosed()) {
        c.close();
    }
    return list;
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:13:23.387

为什么要在内存中创建数据库然后复制粘贴？如果你想在 sd 卡上有一个数据库，只需从头开始在 sd 卡中创建一个数据库：

```
File sdpath = Environment.getExternalStorageDirectory();
String dbPath = sdpath.getAbsolutePath() + "/my_dir/mydb.sqlitedb";
SQLiteDatabase database = SQLiteDatabase.openDatabase(dbPath, null, SQLiteDatabase.CREATE_IF_NECESSARY); 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:41:53.127

你可以试试下面的东西。

```
 private dbhelper mydbhelper;
   public static SQLiteDatabase myDataBase; 

... 

      public Cursor getData(int Id){
          return myDataBase.query("tbl_category", new String[]{"_id", "column1", "column2", "column3",},
                  "_id" + " = " + Id, null, null, null, null);} 
```

然后像下面这样调用你的活动

```
 Cursor cursor = mydbhelper.getData(Id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T05:00:34.113

这个问题已经由我自己解决了。该错误仅发生在模拟器中。在真实设备上可以正常工作。

# asp.net - 允许在 ASP.NET 网页上按升序和降序对 XSLT 表标题进行排序

> ID：10296447
> 
> 赞同：2
> 
> 时间：2012-04-24T10:50:51.473
> 
> 标签：asp.net, xml, vb.net, xslt

我有一个 ASP.NET 网页，它有几个 XSLT 来转换 xml 文件中的数据。XSLT 处理数据并将其呈现在一个表中。

是否可以允许用户单击每个表格标题以按升序或降序对值进行排序？

后端代码在 VB.net 中以防万一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:40:22.923

**是的，只需将排序顺序和数据类型作为参数传递给转换**：

这是一个简短的例子：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pSortField" select="'age'"/>
 <xsl:param name="pSortOrder" select="'descending'"/>
 <xsl:param name="pSortDataType" select="'number'"/>

 <xsl:template match="/*">
     <xsl:copy>
       <xsl:for-each select="*">
         <xsl:sort select="*[name()=$pSortField]"
                   order="{$pSortOrder}" data-type="{$pSortDataType}"/>
         <xsl:copy-of select="."/>
       </xsl:for-each>
     </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<people>
  <person>
    <age>15</age>
    <name>Anna</name>
  </person>
  <person>
    <age>22</age>
    <name>Kim</name>
  </person>
  <person>
    <age>31</age>
    <name>Harry</name>
  </person>
  <person>
    <age>27</age>
    <name>Peter</name>
  </person>
</people> 
```

**产生了想要的正确结果**（所有`person`元素按年龄按数字降序排列）：

```
<people>
   <person>
      <age>31</age>
      <name>Harry</name>
   </person>
   <person>
      <age>27</age>
      <name>Peter</name>
   </person>
   <person>
      <age>22</age>
      <name>Kim</name>
   </person>
   <person>
      <age>15</age>
      <name>Anna</name>
   </person>
</people> 
```

**只需更改参数的值，就会产生其他排序结果**。

**使用这些参数**：

```
 <xsl:param name="pSortField" select="'name'"/>
 <xsl:param name="pSortOrder" select="'ascending'"/>
 <xsl:param name="pSortDataType" select="'text'"/> 
```

**现在的结果是**：

```
<people>
   <person>
      <age>15</age>
      <name>Anna</name>
   </person>
   <person>
      <age>31</age>
      <name>Harry</name>
   </person>
   <person>
      <age>22</age>
      <name>Kim</name>
   </person>
   <person>
      <age>27</age>
      <name>Peter</name>
   </person>
</people> 
```

# android - android - 如何为 gson 设计映射类

> ID：10296450
> 
> 赞同：1
> 
> 时间：2012-04-24T10:51:05.170
> 
> 标签：android, gson

如果我的 WS 成功然后得到以下响应

```
{"status":"SUCCESS","reason":"User phrase returned successfully.","response":{"isValidUser":"1","Phrase":"montu"}} 
```

如果相同的 WS 失败，则得到以下响应

```
{"status":"FAILED","reason":"Invalid Username","response":false} 
```

这里我使用 gson 进行映射。

映射类是

```
class HomeScreenUserResponse extends Object {
  public String status;
  public String reason;
  public checkUser response;
}

class checkUser {
  String isValidUser;
  String Phrase;
} 
```

但是，如果 Web 服务失败，则此映射不起作用。它仅适用于 ws 成功。如何为这两种情况设计单个映射类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:31:53.587

也许是这样的

```
class Class {
  boolean status;
  String reason;
  Responce responce;

  public Class(JSONObject jObject) {
    status = jObject.getString("status").equals("SUCCESS") ? true : false;
    reason = jObject.getString("reason");
    if (status) {
      responce = new Responce(jObject.getJSONObject("response"));
    } else {
      responce = null;
    }
  }
}

class Responce{
  String isValidUser;
  String Phrase;
  public Responce(JSONObject jObject){
   //Loading json data
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:26:09.243

您应该为此类型注册一个自定义类型适配器。您需要检查“响应”的值，并根据它是对象还是布尔值而表现出不同的行为。

# c# - 如何使用 LINQ 比较两个 IEnumerable 集合

> ID：10296452
> 
> 赞同：2
> 
> 时间：2012-04-24T10:51:21.210
> 
> 标签：c#, wpf, linq, mvvm

我正在使用带有 MVVM 模型的 WPF 应用程序。我想知道如何比较两个 IEnumerable 集合值。我有**两个 IEnumerable**值，分别命名为 **AvailablePacks**和**RecommendedPacks**。这两个集合具有不同的值集，但它们具有共同的属性**PackID**值。并且 AvailablePacks 具有另一个名为**Quantity**的属性。

现在我想**根据 PackID**值比较这两个 IEnumerable 集合值，当两个集合具有相同的**PackID 时**，我需要将该**Quantity**（AvailablePacks 内部）值分配给某个名为**PackQuantity**的变量，该变量在外部声明。

我是 LINQ 的新手，所以我无法正确执行此操作。

那么我该如何实现呢？谁能告诉我这个的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T11:01:15.547

```
 var result = from ap in AvailablePacks  
             join rp in RecommendedPacks 
               on ap.PackID equals rp.PackID
               select new {
                  PackQuantity = ap.Quantity
               }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T10:57:32.397

你在寻找这样的东西吗？

```
var query = from x in AvaillablePacks
            join y in RecommendedPacks on x.PackID equals y.PackID
            select new
            {
                PackQuantity = x.Quantity
            }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:57:40.417

像这样的东西*应该*适合你：

```
var result = (from availablePack in AvaillablePacks 
                join recommendedPack in RecommendedPackson 
                     availablePack.PackID equals recommendedPack .ID)

foreach(var availablePack in result)
    availablePack .Quantity = PackQuantity ; 
```

# java - 如何使用海报或任何插件调用网络服务？

> ID：10296459
> 
> 赞同：0
> 
> 时间：2012-04-24T10:51:38.380
> 
> 标签：java, json, firefox-addon, webservice-client

我正在编写安静的 Web 服务，一切都很好，我的 Web 服务将输入作为 XML 并将输出作为 XML。对于 Web 服务的客户端测试，我使用的是[Firefox Poster 扩展](https://addons.mozilla.org/addon/poster/)。它工作正常，但我的一些 Web 服务将输入作为 JSON 对象并将输出作为 JSON 对象生成。我的问题是如何将 JSON 对象而不是 XML 传递给海报。或者，可以使用不同的扩展来对生成 JSON 对象的 restful web 服务进行客户端测试。

例如，我的一个 Web 服务如下所示：

```
public String authenticateUser(@FormParam("userName") String userName, @FormParam("password") String password)
{

//related stuffs

} 
```

如何`authenticateUser`使用海报扩展或其他东西测试网络服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:37:50.697

将“内容类型：”字段（在“要发送的内容”选项卡上）设置为`application/json`应该有帮助。

您还可以在 Headers 选项卡上指定“Accept”参数的`application/json`值，以通知服务您期望以 JSON 格式输出。

# python - 变量内部列表的列表理解示例

> ID：10296460
> 
> 赞同：0
> 
> 时间：2012-04-24T10:51:41.110
> 
> 标签：python, list, compression

我正在研究python中的列表理解。

```
l = [['200801', '100'], ['', ''], ['200802', '151'], [''], ['200805', '160'] ,['', u''], [''], [u'\xa0'], ['\r\n                       \r\n                        ', '\r\n                      '], ['200812', '50']] 
```

我想要输出为

```
[['200801', '100'], ['200802', '151'], ['200805', '160'], ['200812', '50']] 
```

如何删除这种不确定的可变长度和额外字符的内部列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T10:56:33.923

这是一种方法：

```
>>> [x for x in l if all(y.strip() for y in x)]
[['200801', '100'], ['200802', '151'], ['200805', '160'], ['200812', '50']] 
```

不过我不太喜欢它，它在一行中做的太多了。

如果你能更好地描述你想要*表达*的东西，你会发现用*Python*（或任何其他语言）来描述会容易得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T10:57:18.493

您可以使用正则表达式来搜索看起来像数字的模式。

```
>>> x = [['200801', '100'], ['', ''], ['200802', '151'], [''], ['200805', '160'] ,['', u''], [''], [u'\xa0'], ['\r\n                       \r\n                        ', '\r\n                      '], ['200812', '50']]
>>> import re
>>> [p for p in x if all(re.match(r'\d+', q) for q in p)]
[['200801', '100'], ['200802', '151'], ['200805', '160'], ['200812', '50']] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T11:35:15.647

`join`可以在这里派上用场

```
# keep only non-empty lists
print [x for x in l if ''.join(x).strip()]

# keep only lists with digits
print [x for x in l if ''.join(x).isdigit()] 
```

# android - 带有微调器的 EditText

> ID：10296461
> 
> 赞同：0
> 
> 时间：2012-04-24T10:51:42.393
> 
> 标签：android

我尝试使用调用微调器制作edittext。所有作品，但 onItemSelected 未在微调器中调用

```
final String[] items = new String[] {"Item1", "Item2", "Item3"};
        final Spinner spinner = new Spinner(this);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, items);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

        spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener()
        {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }

        });

        city.setOnFocusChangeListener(new OnFocusChangeListener(){
            public void onFocusChange(View v, boolean hasFocus)
            {
                if (hasFocus)
                {
                    InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    mgr.hideSoftInputFromWindow(city.getWindowToken(), 0);
                    spinner.performClick();
                }

            }
        }); 
```

调用微调器并选择项目后没有任何反应。没有微调监听器的呼叫。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:07:21.760

```
final String[] items = new String[] {"Item1", "Item2", "Item3"};
        final Spinner spinner = new Spinner(getApplicationContext());
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(),
                    android.R.layout.simple_spinner_item, items);

        spinner.setAdapter(adapter);

     spinner.setOnItemClickListener(new OnItemClickListener() {

        @Override
            public void onItemClick(AdapterView<?>arg0,View v, int i, long lng) {

                                //what you want

                            }
                        }); 
```

# c# - 为 Umbraco 搭建本地开发环境

> ID：10296463
> 
> 赞同：8
> 
> 时间：2012-04-24T10:51:55.780
> 
> 标签：c#, .net, c#-4.0, content-management-system, umbraco

我继承了一个 Umbraco CMS 项目，我们的测试服务器上存在 Umbraco 实例和自定义用户控件，因为初始构建已经在客户端进行了演示。我现在需要接受这个，最初的构建是在我来这里之前由一名自由开发者完成的，并且没有关于设置、部署等的文档。

经过一些错误修复后，自定义用户控件处于源代码控制之下并且构建良好。我已按照以下内容尝试在我的机器上获取 Umbraco 安装和自定义控件的实例以进行开发。

[http://slickjuanito.wordpress.com/2012/02/27/setting-up-umbraco-development-environment-in-visual-studio-2010/](http://slickjuanito.wordpress.com/2012/02/27/setting-up-umbraco-development-environment-in-visual-studio-2010/)

[http://our.umbraco.org/wiki/how-tos/getting-started-with-umbraco-what-is-next-after-you-install/setting-up-your-project-in-visual-studio](http://our.umbraco.org/wiki/how-tos/getting-started-with-umbraco-what-is-next-after-you-install/setting-up-your-project-in-visual-studio)

我将 Umbraco Web 配置指向包含相关内容的数据库，并且可以访问 CMS 的后端，但是当我转到 Default.aspx 时，我只得到一个空白页面。我已将 VS2010 设置为抛出 CLR 异常并在调试模式下启动解决方案，以查看是否抛出错误而什么也没有。

任何人都可以建议尝试使其正常运行或向我指出一些可能有帮助的资源吗？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T18:33:41.143

如果您安装了[IIS Express](http://www.microsoft.com/download/en/details.aspx?id=1038)，我发现最简单的方法是：

1.  将站点的文件系统从服务器复制到本地计算机的 Inetpub 中的文件夹。
2.  在 IIS 中创建一个站点并指向这些文件。
3.  在 Visual Studio 中，单击文件、打开、网站，然后选择站点。

如果您安装了[MVC 框架](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=1491)，语法突出显示将适用于 razor (.cshtml) 脚本。

更进一步的步骤是制作数据库的副本并将连接字符串指向该副本。该副本可以恢复到另一个数据库服务器，或者如果您安装了[SQL Server Express](http://www.microsoft.com/download/en/details.aspx?id=23650)，您也可以在本地运行该副本。

# javascript - CSS jQuery - 展示图像（淡入淡出）

> ID：10296464
> 
> 赞同：0
> 
> 时间：2012-04-24T10:51:56.763
> 
> 标签：javascript, jquery, css, background-image

我已经使用 jQuery 好几天了，只是想真正地习惯它。所以，我认为是时候建立一个新的个人展示/作品集网站了工作。

“工作”设置在具有图像背景集的 div 中（这是实际的“工作”）。

基本上，我想知道是否可以淡出 CSS 背景图像，替换它，然后淡入？

我正在考虑为我的每件作品使用不同的 div，每件作品都有一个独特的 css，带有 dsiplay:none 并在用户单击“下一步”时使用 jQuery 淡入每件作品。但是如果我有超过 50 件作品要展示，那可能会变得有点混乱。所以我只是想知道我是否可以有一个 div，一个 css，并使用 jQuery 淡出 css 背景图像，替换和淡入。

我还没有真正构建我的代码，因为我仍处于“想法”阶段：-/

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:56:03.780

每张图片使用不同元素的好处是浏览器将预加载图像，并使应用程序看起来更具响应性，如果您面对另一个背景，您可能会及时加载，并且在过渡，尤其是在低速连接上。我的想法是 div 方法还是更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T10:57:02.457

您不能在背景图像上使用 .fadeIn() 但有一些解决方法，请参阅[A way to fade in the background on load?](https://stackoverflow.com/questions/1055414/a-way-to-fade-in-the-background-on-load) 进行更多讨论。

# java - 在 Java 中验证类的成员

> ID：10296469
> 
> 赞同：1
> 
> 时间：2012-04-24T10:52:24.107
> 
> 标签：java, string, validation, reflection

我想验证一个 Java 类对象以检查成员是否遵守某些规则。除了特定规则外，我还想检查是否有任何字符串成员为空/空。

这样做的好方法是什么（验证字符串成员）？

我的做法是：

```
if(StringUtils.isNotEmpty(sMember1) && StringUtils.isNotEmpty(sMember2)...) 
```

是否有一种简洁的方法来验证所有字符串成员？

（反射是一种可能性吗？如果是，它会是一个昂贵的操作吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T10:55:40.517

您应该使用符合 jsr 303 的验证器。请参阅此讨论[是否有可用的 JSR-303（bean 验证）实现？](https://stackoverflow.com/questions/1384968/is-there-an-implementation-of-jsr-303-bean-validation-available)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:14:53.833

正如@krishnakumarp 指出的那样，我还建议使用JSR 303，我不会构建自己的框架，而是使用任何已经可用的东西。但是，如果您想了解如何实现它，那么它实际上非常简单：

```
public static Collection<ErrorMessage> validate(Object obj) {
    Collection<ErrorMessage> errors = new ArrayList<ErrorMessage>();
    Field[] fields = obj.getClass().getDeclaredFields();
    for (Field field : fields) {
        field.setAccessible(true);
        if (field.getType().equals(String.class)) {
            try {
                String value = (String) field.get(obj);
                if (isEmpty(value)) {
                    errors.add(new ErrorMessage(field.getName() + " is empty"));
                }
            }
            catch (Exception e) {
                // oops.
                e.printStackTrace();
            }
        }
    }
    return errors;
} 
```

请注意，在此示例中，有一个自定义错误处理，并且为每个验证错误`ErrorMessage`创建一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T10:54:48.530

为此有很多框架和库。看看[http://oval.sourceforge.net/](http://oval.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:18:11.193

为什么不考虑在使用同一对象的 setter 方法设置成员时检查成员的有效性？在对对象进行任何操作之前检查对象成员的有效性是很好的，但 IMO 最好在设置它们后立即进行验证。如果值不合适，允许操作（在核心类内部）向更高层抛出适当的异常。

注意：如果您不重构旧代码片段，但您正在编写新数据对象，则此方法是可行的。

# apex-code - 顶点批处理类和java线程之间的区别

> ID：10296470
> 
> 赞同：0
> 
> 时间：2012-04-24T10:52:26.327
> 
> 标签：apex-code

是 apex 中的批处理类，类似于 java 中的线程。一个区别是可以安排批处理课程，是否还有其他区别请告知区别..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:29:36.380

Batch Apex is not a form of threading. You are not going to be add another thread of execution to a class or trigger with Batch Apex.

What you will be able to do with Batch Apex is write code that can perform operations on all (up to 50 million) records of a certain type. Limitations are similar to other Apex code with a larger heap size and more script statements allowable. You can only have five batch jobs running at once and cannot generate PDFs from batch jobs.

The only similarity between threading and batch apex is that batch apex is able to run asynchronously to other code in your org.

# listview - JQuery Mobile Listview 与浮动 img 重叠

> ID：10296477
> 
> 赞同：0
> 
> 时间：2012-04-24T10:52:51.753
> 
> 标签：listview, jquery-mobile, css-float

我正在尝试构建一个简单的页面，该页面在左侧显示图像，在右侧显示带有列表视图的描述。虽然似乎服从图像浮动，但列表视图占用了 100% 的页面，与图像本身重叠。

这是一个例子：http: [//jsfiddle.net/NYwux/](http://jsfiddle.net/NYwux/)

我已经尝试过这个`<fieldset class=\"ui-grid-a\">`解决方案——它可以工作，但我不想要一个完美的 50% - 50% 分割，而是一个自然的浮动行为。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:20:02.167

**HTML：**

```
<div data-role="content">    

    <img style="float: left; max-width: 100px;" src="http://softsupplier.com/wp-content/uploads/2010/07/placeholder.png" alt="description" title="description" />

    <div id="wrap">
        <p>TEST TEXT.</p>
        <ul data-role="listview" data-inset="true" data-filter="true">
        <li><a href="#">1<sup>st</sup> Item</a></li>
        <li><a href="#">2<sup>nd</sup> Item</a></li>
        </ul>    
    </div>
    <p>TEST TEXT.</p>        
</div> 
```

**CSS：**

```
​#wrap{margin-left:110px;}
#wrap p{margin-bottom:15px;} 
```

我把 15px 的边距放在

标记，因为 JQM 列表视图有 -15px 的边距。

# groovy - Groovy 单元测试神秘地失败了

> ID：10296482
> 
> 赞同：2
> 
> 时间：2012-04-24T10:53:09.317
> 
> 标签：groovy

我正在 Groovy 和以下测试中测试一些简单的 XML 解析：

```
assertEquals("TestSuiteParameter1", testSuite.props[0].name) 
```

给出了一个非常烦人的错误：

```
expected:<TestSuiteParameter1> but was:<TestSuiteParameter1> 
```

如果我使用 Groovy assert 关键字（但使用更奇怪的堆栈跟踪），我会得到同样的错误。我敢打赌这是某种类型的不匹配，但我太像 Groovy n00b 了，无法理解是什么。

以下是打印它们各自的类的结果：

```
println testSuite.props[0].name.getClass()
println "TestSuiteParameter1".getClass()
println 'TestSuiteParameter1'.getClass()

class groovy.util.slurpersupport.Attributes
class java.lang.String
class java.lang.String 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:34:48.123

`testSuite.props[0].name`可能是 a`String`而不是 a `GString`，而`"TestSuiteParameter1"`左侧是 a`GString`凭借双引号。更改为单引号，它可能会通过。

这是 groovy 中的常见问题。令人困惑的是，`"x" != 'x'`。

来自文档： http: [//groovy.codehaus.org/Strings+and+GString](http://groovy.codehaus.org/Strings+and+GString)

> GString 和 String 是两个不同的类，因此使用 GString 对象作为 Map 对象的键或涉及 GString 对象的比较，在与 String 对象结合时会产生意想不到的结果，因为 GString 和 String 不会有相同的 hashCode 也不会等于。

# python - django：从另一个模型中的 url 保存图像

> ID：10296483
> 
> 赞同：6
> 
> 时间：2012-04-24T10:53:13.563
> 
> 标签：python, django

```
class Item(models.Model):
    name = models.CharField(max_length = 200)
    image = models.ImageField(upload_to = 'read', blank=True)
    creative_url = models.CharField(max_length = 200)
    description = RichTextField()

    def save(self, *args, **kwargs):
        content = urllib2.urlopen(self.creative_url).read()
        self.image.save("test.jpg", File(content))
        super(Item, self).save(*args, **kwargs) 
```

给出异常：“str”对象没有属性“name”

我试图遵循这个答案（http://stackoverflow.com/questions/1393202/django-add-image-in-an-imagefield-from-image-url）但它无助于摆脱异常。

* * *

```
AttributeError at /admin/collection/item/1/ 'str' object has no attribute 'name' Request Method:    POST Request
URL:    http://127.0.0.1:8000/admin/collection/item/1/ Django
Version:    1.2.5 Exception Type:   AttributeError Exception Value:  'str'
object has no attribute 'name' Exception
Location:   D:\FF\django\core\files\base.py in _get_size, line 39 Python
Executable: C:\Python27\python.exe Python Version:  2.7.2 Python
Path:   ['D:\\FF',
'C:\\Python27\\lib\\site-packages\\django_social_auth-0.6.7-py2.7.egg',
'C:\\Python27\\lib\\site-packages\\python_openid-2.2.5-py2.7.egg',
'C:\\Python27\\lib\\site-packages\\oauth2-1.5.211-py2.7.egg',
'C:\\Python27\\lib\\site-packages\\httplib2-0.7.4-py2.7.egg',
'C:\\Python27\\lib\\site-packages\\selenium-2.20.0-py2.7.egg',
'C:\\Python27\\lib\\site-packages\\ipython-0.12-py2.7.egg',
'C:\\Python27\\lib\\site-packages\\django_localeurl-1.5-py2.7.egg',
'C:\\Python27\\lib\\site-packages\\pil-1.1.7-py2.7-win32.egg',
'C:\\Python27\\lib\\site-packages\\pip-1.1-py2.7.egg',
'C:\\Windows\\system32\\python27.zip', 'C:\\Python27\\DLLs',
'C:\\Python27\\lib', 'C:\\Python27\\lib\\plat-win',
'C:\\Python27\\lib\\lib-tk', 'C:\\Python27',
'C:\\Python27\\lib\\site-packages',
'c:\\python27\\lib\\site-packages'] Server time:    Tue, 24 Apr 2012
14:19:00 +0300 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T12:17:41.263

而不是`File`，您需要使用[`django.core.files.base.ContentFile`](https://docs.djangoproject.com/en/1.4/ref/files/file/#the-contentfile-class)

```
self.image.save("test.jpg", ContentFile(content), save=False) 
```

`File`接受文件对象或`StringIO`具有`size`属性的对象，或者您需要手动设置`size`a 的属性`File`或`ImageFile`使其工作 w/ `StringIO`：

```
s = StringIO()
s.write(urllib2.urlopen(self.creative_url).read())
s.size = s.tell()
self.image.save('test.jpg', File(s), save=False) 
```

另外，请注意`save=False`里面的`self.image.save`: 默认情况下`save=True`，这将导致包含图像字段的实例被保存。因此`save`，您的代码中的逻辑可能会遇到无限循环并达到最大递归深度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T12:15:23.680

## 尝试类似：

（如假设：以[编程方式将图像保存到 Django ImageField](https://stackoverflow.com/questions/1308386/programmatically-saving-image-to-django-imagefield)）

```
from django.db import models
from django.core.files.base import ContentFile
import urllib2
from PIL import Image
from StringIO import StringIO

class Item(models.Model):
    name = models.CharField(max_length=200)
    image = models.ImageField(upload_to='read', blank=True)
    creative_url = models.URLField(max_length=200)

    class Meta:
        verbose_name = "Item"
        verbose_name_plural = "Items"

    def download_image(self, url):
        input_file = StringIO(urllib2.urlopen(url).read())
        output_file = StringIO()
        img = Image.open(input_file)
        if img.mode != "RGB":
            img = img.convert("RGB")
        img.save(output_file, "JPEG")
        self.image.save(self.name+".jpg", ContentFile(output_file.getvalue()), save=False)

    def save(self, *args, **kwargs):
        self.download_image(self.creative_url)
        super(Item, self).save(*args, **kwargs) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-26T16:53:58.920

使用**请求的解决方案**

```
from django.core.files.base import ContentFile
from requests import request, HTTPError

def save(self, *args, **kwargs):
    try:
        data = request('GET', self.creative_url,)
        data.raise_for_status()
        self.image.save('fname.jpg', ContentFile(data.content),save=False)
    except HTTPError:
        pass
    super(Item, self).save(*args, **kwargs) 
```

# c - 结构内部联合

> ID：10296484
> 
> 赞同：3
> 
> 时间：2012-04-24T04:04:36.197
> 
> 标签：c, unions

我正在尝试构建网络应用程序，我需要能够一次编写一个选项，一个、两个或三个。即使我只使用结构一个，下面的联合也会将 4 个字符写入网络。

```
union choice_
{
    struct one_
    {
        unsigned char one[2];
    }src;   
    struct two_
    {
        unsigned char two[2];
    }two;
    struct three
    {
        unsigned char one[2];
        unsigned char two[2];
    }three;
}choice; 
```

我不能只写choice.one

我在这里有点困惑，我该如何构建结构的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T05:10:42.343

一个联合与其最大的成员一样大，因为它必须能够随时存储最大的成员。在这种情况下，您有`struct three`两个数组，每个数组包含两个字符，总共四个字符，因此任何实例的`choice`长度都是四个字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T06:24:31.427

联合对您根本没有帮助，而是混淆了代码并增加了插入不需要的填充字节的机会。相反，这样做：

```
typedef struct
{
  char data[2];
} choice_t;

...

void write_bytes_to_network (const choice_t* choice);

...

choice_t one = ...;
choice_t two = ...;

switch(something)
{
  case 1: 
    write_bytes_to_network (&one);
    break;

  case 2:
    write_bytes_to_network (&two);
    break;

  case 3:
    write_bytes_to_network (&one);
    write_bytes_to_network (&two);
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:23:43.097

你可以：

```
union choice_ u;
...
write(<fd>, u.one, sizeof(u.one)); 
```

或者如果是两个

```
union choice_ u;
...
write(<fd>, u.two, sizeof(u.two)); 
```

或在第三种情况下

```
union choice_ u;
...
write(<fd>, u.three, sizeof(u.three)); 
```

但是请注意，在您的情况下`sizeof(union choice_)`将始终等于`struct three`.

# mysql - 如何将表结构从一个数据库复制到另一个？

> ID：10296488
> 
> 赞同：9
> 
> 时间：2012-04-24T10:53:22.807
> 
> 标签：mysql

**如何将表结构从一个数据库复制到另一个**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T10:59:30.723

转到要在其中创建新表的数据库，并使用`CREATE TABLE... LIKE...`完全限定源表名称。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T11:06:06.617

根据评论，您想要实现的目标并不完全清楚。正在尝试创建数据库的副本（从头开始）或只是将单个表结构复制到另一个数据库？

无论如何，我都会推荐[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)。

如果要复制所有表，请使用：

```
> mysqldump -d $databaseName > $newFile 
```

或者，如果您只想复制一个表，您可以使用：

```
> mysqldump -d $databaseName.$tableName > $newFile 
```

然后您可以将此文件导入其他数据库...

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-15T07:19:42.487

以下代码行应该可以完成这项工作：

```
create table new_table_name like existing_table_name; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-24T10:57:21.643

有多种工具可让您查看现有数据库的架构并将其导出为文件，然后您可以针对新数据库运行该文件。想到几个锥体：

*   [MySQL工作台](http://www.mysql.com/products/workbench)
*   [松鼠 SQL](http://www.squirrelsql.org/)
*   [mysql转储](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

还有很多其他的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-30T05:13:46.610

我正在寻找相同的解决方案。我尝试了下面的示例，它有效，转到您要创建表的数据库并尝试如下示例。

```
CREATE TABLE new_table_name LIKE database.table_name 
```

这个例子将创建一个带有 AI、Index、Key 的表。它类似于重复的表结构。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-26T20:14:31.477

您可以为此使用 SQLyog。SQLyog 是一个全方位的 MySQL 管理工具（/'GUI'/'Frontend'）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-03T14:45:38.253

这是一个简单的操作，我认为没有必要转储数据库。

我解决这个问题的方法：

```
USE TARGET_DB;
CREATE NEW_TABLE LIKE SOURCE_DB.SOURCE_TABLE; 
```

# foreach - d2：具有 opApply 的不可变结构在使用非默认构造函数初始化时不会编译

> ID：10296490
> 
> 赞同：1
> 
> 时间：2012-04-24T10:53:26.967
> 
> 标签：foreach, immutability, d

考虑以下代码：

```
immutable struct Test {
    this(int foo) { }

    int opApply(int delegate(ref int) dg) {
        return (0);
    }
}

int main(string[] argv) {
    auto set = Test(); // compiles
    // auto set = Test(1); // Error: cannot uniquely infer foreach argument types

    foreach (item; set) { }

    return 0;
} 
```

当`Test`使用默认的无参数构造函数构建结构时，代码编译得很好，但是当我尝试使用任何其他构造函数时，我得到编译时错误。如果我注释掉`foreach`，代码将编译。如果我注释掉`immutable`，代码也会编译。

这种行为的原因是什么以及应该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:46:48.227

实际上，至少使用 DMD 2.059 版，它不能使用任一构造函数编译（在 Windows 7 和 FreeBSD 上测试）。

这样做的原因应该是相当明显的。通过使结构（或类）不可变，您只需将不可变应用于该结构（或类）的每个成员。但是，构造函数不会变得不可变。也就是说，当您声明`immutable struct Test`您已经有效地执行了以下操作时：

```
struct Test {
    this(int foo) { }
    immutable int opApply(int delegate(ref int) dg) {
        return (0);
    }
} 
```

注释掉 foreach 循环允许代码编译，因为 foreach 正在寻找一个没有`immutable`声明的 opApply 方法。

根据您要执行的操作，您可以简单地制作 struct`final`而不是`immutable`，或者，如果您想保持大部分 struct 不可变...

```
struct Test {
    // Anything that needs to be mutable should go up here
    int opApply(int delegate(ref uint) dg) {
        return 0;
    }

    // Anything put in this block is immutable
    immutable {
        this(int foo) { }
    }
} 
```

# javascript - Javascript：按标签类型获取孩子

> ID：10296492
> 
> 赞同：18
> 
> 时间：2012-04-24T10:53:35.810
> 
> 标签：javascript, jquery

我有一种情况，服务器端正在生成表单的结果 HTML：

```
<div id="myDiv">
    <ul>
        <li class="imageElem">
            <img src="..."/>
            <div id="imgInfo">
                <p class="imgDetail">
                    Image Title #1
                </p>
            </div>
        </li>

        <!-- Etc. for many images (1 <li> per <img>) -->

    </ul>
</div> 
```

我正在尝试遍历此列表并使用 jQuery 执行动态 DOM 操作。我遇到了三个瓶颈：

*   如何获得既没有or`myDiv`的独生子女（并且更改服务器端代码以生成其中之一将是一场**噩梦**）；和`<ul>``id``class`
***   如何获得每个`<li>`人的`<img>`独生子女；和上面一样，让服务器生成 id/class 属性；和*   如何获取每个`<li>`孩子`<p>`的文本（例如“Image Title #1”）**

 **我正在尝试以下（分别针对这三个问题中的每一个）无济于事：

```
var myDivUL = document.getElementById("myDiv").ul;
for(i = 0; i < myDivUL.length; i++)
{
    var currImageElem = myDivUL[i].img;
    var currPText = myDiv[i].div.p.text;

    // ... rest of function omitted for brevity
} 
```

**我在这里做错了什么？**我需要更改哪些内容才能在无法访问 id/class 属性的情况下获取这三个元素？提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-24T11:04:09.033

你可以做这样的事情

```
var myDivUL = document.getElementById("myDiv").getElementsByTagName('ul')[0]; 
```

等等，关键是**在任何 html 元素上使用 getElementsByTagName()**。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T11:11:23.910

你可以得到所有这样的东西：

```
$("#myDiv").find("ul:not([id],[class])").each(function()
{
    $(this).find("li").each(function(){
       var IMG = $(this).find("img:not([id],[class])");
       var PText = $(this).find("p.imgDetail").text();
    });
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:01:56.867

```
var ul = $('#myDiv ul').filter(function() {
    return !$(this).attr('id') && !$(this).attr('class');
});
var img = $('li > img', ul); // will give li > img child of the "ul" 
var pText = $('li p', ul).text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T10:58:11.673

只是几个提示：

1.  `getElementById()`返回单个值，而不是数组，因为 ID 应该是唯一的。

2.  在修复无效的 HTML 时，您应该验证您的浏览器如何处理重复的 ID。Firebug 的 DOM 树或您的浏览器的等价物可能是一个很好的起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T10:59:03.393

你可以这样做

```
$("ul:not([id], [class])").each(function() {
      var img = $(this).find("img");
      var p = $(this).find("p.imgDetail");
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T11:04:05.867

*   `myDiv`的`<ul>`独生子女，既没有`id`or`class`

    ```
    $("#myDiv li:not([class]):not([id])") 
    ```

*   获得每个`<li>`人的`<img>`独生子女

    ```
    $("#myDiv li:not([class]):not([id]) img") 
    ```

*   获取每个`<li>`的`<p>`独生子女的文本

    ```
    $("#myDiv li:not([class]):not([id]) p") 
    ```

你可以遍历结果`.each()`来获取你的东西

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T11:35:55.647

我实现这一点的方式是：

```
$('ul li').filter(
    function(){
        return !this.id && !this.className;
    }).find('img, p').each(
        function(){
            if ($(this).is('img')){
                imgs.push($(this));
                // or console.log($(this));
                // or anything else, really...
            }
            else if ($(this).is('p')){
                pText.push($(this).text());
                // or console.log($(this));
                // or anything else, really...
            }
        }); 
```

[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/Nesk5/)。**

# c# - 如何使用连接类型搜索文档

> ID：10296499
> 
> 赞同：0
> 
> 时间：2012-04-24T10:54:07.463
> 
> 标签：c#, ravendb

[在我之前的问题](https://stackoverflow.com/questions/10141213/how-to-create-index-on-multiple-documents-with-reducing)旁边。我现在想执行 lucene 查询搜索。

这是我的模型：

```
public class User
{
    public string Id { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
}

public class Book
{
    public string Id { get; set; }
    public string Title { get; set; }
}

public class BookFavorite
{
    public string Id { get; set; }
    public string UserId { get; set; }
    public string BookId { get; set; }
} 
```

所以，我想搜索书籍的“标题”字段，但只能在收藏夹中的书籍中搜索。所以我需要在 Book 和 BookFavorite 和索引标题字段之间建立一种连接。

我已经尝试过使用 MultiMap Index，但我发现很难让它工作。

有什么帮助吗？谢谢。

编辑：MultiMap 索引

```
public class BookFavoriteSearchIndex : AbstractMultiMapIndexCreationTask<BookFavoriteSearchIndex.ReduceResult>
{
    public class ReduceResult
    {
        public string BookId { get; set; }
        public string Title { get; set; }
        public string Description { get; set; }
        public string Abstract { get; set; }
        public string Tag { get; set; }
    }

    public BookFavoriteSearchIndex()
    {
        AddMap<Book>(books => from book in books
                              from tag in book.Tags
                              select new
                                         {
                                             BookId = book.Id,
                                             Title = book.Title,
                                             Description = book.Description,
                                             Abstract = book.Abstract,
                                             Tag = tag
                                         });

        AddMap<BookFavorite>(bfs => from bf in bfs
                                    select new
                                               {
                                                   BookId = bf.BookId,
                                                   Title = (string)null,
                                                   Description = (string)null,
                                                   Abstract = (string)null,
                                                   Tag = (string)null
                                               });

        Reduce = results => from result in results
                            group result by result.BookId
                                into g
                                select new
                                           {
                                               BookId = g.Key,
                                               Title = g.Select(x => x.Title).FirstOrDefault(x => x != null),
                                               Description = g.Select(x => x.Description).FirstOrDefault(x => x != null),
                                               Abstract = g.Select(x => x.Abstract).FirstOrDefault(x => x != null),
                                               Tag = g.Select(x => x.Tag).FirstOrDefault(x => x != null),
                                           };
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:58:37.993

书名不会经常改变，所以你为什么不包括`Title`里面的`BookFavourite`，像这样：

```
public class BookFavorite
{
    public string Id { get; set; }
    public string UserId { get; set; }
    public string BookTitle { get; set; }
} 
```

然后你可以只查询对象`BookTitle`中的。`BookFavourite`

您将复制数据，但数据不会更改，因此您不必担心更新它。

**更新（根据额外信息）**

`IsFavourite`在类中存储一个字段怎么样`Book`，然后您可以在查询中使用它？您只需要维护此字段，因为书是“收藏”。

```
public class Book
{
    public string Id { get; set; }
    public string Title { get; set; }
    public bool IsFavourite { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T10:57:59.110

我相信这个答案应该可以解决您在我问的类似问题中链接 Book 和 BookFavorite 的问题： [Link](https://stackoverflow.com/a/10296212/1353377)

编辑：它假设您的 Book 和 BookFavorite 包含在单独的列表中

# ruby-on-rails - 通过 2 个有条件的表在 named_scope 中排序

> ID：10296501
> 
> 赞同：1
> 
> 时间：2012-04-24T10:54:14.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, arel, meta-search

我正在寻找解决方案，如何按两个关联级别深且有条件的属性进行排序。

我的订单模型必须与 Shop 模型或 Warehouse 模型相关联，这两种模型都与具有名称的国家/地区相关联。

## 我的目标是：

确定订单范围并按国家/地区名称排序。

结果必须是 ActiveRelation 对象

主要目标是将此范围用于 MetaSearch gem 以获取视图助手 sort_link

```
class Order < ActiveRecord::Base

  belongs_to :shop
  belongs_to :warehouse

  validate :shop_id, :presence => true,      :if => "warehouse_id.nil?"
  validate :warehouse_id, :presence => true, :if => "shop_id.nil?" 

  #the case with shop_id.present? && warehouse_id.present? does not exist 

  scope :sort_by_country_name, ???

end

class Shop < ActiveRecord::Base
  belongs_to :country
end

class Warehouse < ActiveRecord::Base
  belongs_to :country
end

Country.coulumn_names => [:id, :name, ...] 
```

实际上我不知道这是否可能，所以我很感激任何建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T07:40:22.157

你可以这样写，虽然我没有尝试过：

```
scope :sort_by_warehouse_country_name, joins(:warehouse).order('warehouse.country_name DESC') 
```

这是假设你有

```
delegate :name, to: :country, prefix: true 
```

在仓库类中。

编辑：

由于您想获取仓库国家或商店国家，因此您需要在选择查询中使用逻辑来选择国家名称的第一个非空条目。PostgreSQL 和 MySQL 支持函数[coalesce](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_coalesce)，它返回第一个非空列。您应该可以像这样使用它：（同样，虽然没有尝试过）

```
def self.sort_by_country_name
    Order.select("COALESCE(warehouse.country_name, shop.country_name) as country_name").joins(:warehouse, :shop).order("country_name DESC")
end 
```

# ruby-on-rails - 嵌套资源和漂亮的网址

> ID：10296509
> 
> 赞同：1
> 
> 时间：2012-04-24T10:55:04.443
> 
> 标签：ruby-on-rails, routing, friendly-url

我有 2 个模型：

1.  运动
2.  竞赛

在我的 routes.rb 中，我通常会这样做

```
resources :sports, :only => [:index, :show] do
  resources :competitions, , :only => [:index, :show]
end 
```

这给了我这样的网址`/sports/1/competitions/4`

但我想要的**不是** `:controller/:id`，而是直接`:name`作为路径，就像这样`/soccer/euro2012`

我可以通过这样做得到第一部分：

```
match "/:sports_name" => "sports#show", :as => :sport 
```

在我的控制器中：

```
def show
  @sport = Sport.find_by_name(params[:sports_name])
end 
```

但仅此而已。我不知道如何获取嵌套资源，或者我是否在做一些根本错误的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:08:15.177

让我们首先制作嵌套资源，如果你真的需要它们，然后处理漂亮的 url：

```
# nested resources:
resources :sports, :only => [:index, :show] do
  resources :competitions, , :only => [:index, :show]
end

# pretty urls:
match "/show/:sport_name/:competition_name" => "competitions#show" 
```

您首先需要“/show”，否则这条路线也会将所有其他路线（如 /sports/new）路由到`competitions#show`. 当然，您可以将其重命名为最适合您情况的名称。

现在您可以通过in访问运动`params[:sport_name]`和比赛。`params[:competition_name]``competitions#show`

如果您希望 rails 为您生成路径，请在路径中附加一些代码：

```
match "/show/:sport_name/:competition_name" => "competitions#show", :as => "some_name" 
```

并生成这样的路径：

```
some_name_path( "sport", "competition" ) 
```

这应该会导致类似“/show/sport/competition”的结果。

# php - PHP - 对匹配变量进行分组并计算平均值

> ID：10296515
> 
> 赞同：0
> 
> 时间：2012-04-24T10:55:35.590
> 
> 标签：php, jquery, graph, charts, jqplot

我希望你们一切都好。

我目前正在自学 PHP，作为其中的一部分，我一直在尝试开发一个反馈系统，用于存储我工作的餐厅的客户反馈卡信息。

我遇到的问题围绕着我用来生成 json 输出的 php 代码，然后 jqplot 使用它来创建图形。

这是我用来执行此操作的代码：

```
<?php

// $toDate and $fromDate will eventually be values coming over via post however i am using static values at the moment for testing

$toDate = time();
$fromDate = time() - (7 * 24 * 60 * 60);

$sql = "SELECT * FROM feedback WHERE visitDateTime BETWEEN FROM_UNIXTIME($fromDate) AND FROM_UNIXTIME($toDate)";

$result = mysql_query($sql) or die(mysql_error());
?> 
```

获取数据后，我在 javascript 和 php 中使用此代码生成 jqplot 数据。

```
<script>
$(document).ready(function(){
 var line1 = [
<?php
while ($row = mysql_fetch_assoc($result)){
echo '[';
echo "'";
echo $row['visitDateTime'];
echo "',";
echo $row ['foodScore'];
echo ']';
echo ',';
}

?>

];

// code then goes on to generate the chart, etc....

</script> 
```

这工作正常并生成以下 json 输出：

```
 var line1 = [
['2012-04-20 19:00:00',7],['2012-04-20 19:00:00',8],['2012-04-20 12:00:00',8],['2012-04-22 16:00:00',5],['2012-04-21 20:00:00',9], 
```

];

但是，我遇到的问题是，当 2 个日期和时间相同时（它们可能会相同），这会导致图表出现问题，因为我有 1 个日期的多个值。

经过一番思考，我得出的结论是，我实际上需要做的是计算日期和时间的平均分数，以便生成如下所示的输出：

```
var line1 = ['unique date/time', average of all scores from this date/time ] 
```

但我什至不知道如何开始这样做。

我知道这可能是错误的，但我认为我需要遍历所有检索到的记录并检查日期/时间是否相同。所以基本上，而不是返回这个：

```
['2012-04-20 19:00:00',7],['2012-04-20 19:00:00',8],['2012-04-20 12:00:00',8],['2012-04-20 12:00:00',5],['2012-04-20 12:00:00',9] 
```

我需要返回这个：

```
['2012-04-20 19:00:00',7.5],['2012-04-20 12:00:00',7.3] 
```

如果有人可以为我提供有关如何解决此问题的任何指示，那真的会对我有所帮助。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:00:59.777

您可以让 MySQL 为您完成，而不是在服务器上进行平均计算。您可以使用这样的查询来直接从 MySQL 中检索分组和平均的数据

```
SELECT avg(foodScore), visitDateTime FROM feedback WHERE visitDateTime BETWEEN FROM_UNIXTIME($fromDate) AND FROM_UNIXTIME($toDate) group by visitDateTime 
```

如果这不起作用，请告诉我

# google-maps - 如何使用某些 Web 服务检查地理点是否属于某个城市？

> ID：10296519
> 
> 赞同：0
> 
> 时间：2012-04-24T10:55:42.737
> 
> 标签：google-maps, reverse-geocoding

鉴于：

*   一座城市
*   一个地理点

问题：确定给定的地理点是否属于城市。

我目前的解决方案是微不足道的：

1.  进行反向地理编码（我使用的是 python [googlemaps](http://py-googlemaps.sourceforge.net/)包）。这会产生**结果**字典。
2.  检查**结果['Placemark'][0]['AddressDetails']**寻找**LocalityName**关键字。
3.  如果找到的**LocalityName**等于城市名称，则将给定的地理点视为在城市内部。

到目前为止，一切都很好。即使它不是最好的算法，它肯定是最简单的。但是，也有问题。举个例子：

*   英国阿伯丁。
*   纬度 = 57.14369, lng = -2.22314

产生以下`GoogleMaps.reverse_geocode(57.14369, -2.22314)`结果：

```
{ u'Placemark': [ { u'AddressDetails': { u'Accuracy': 6,
                                         u'Country': { u'CountryName': u'UK',
                                                       u'CountryNameCode': u'GB',
                                                       u'Thoroughfare': { u'ThoroughfareName': u'A944'}}},
                    u'ExtendedData': { u'LatLonBox': { u'east': -2.2200414,
                                                       u'north': 57.1480762,
                                                       u'south': 57.1453783,
                                                       u'west': -2.2239393}},
                    u'Point': { u'coordinates': [-2.221984, 57.1467683, 0]},
                    u'address': u'A944, Aberdeen, Aberdeen City AB15, UK',
                    u'id': u'p1'}],
  u'_id': 7635459717214061L,
  u'loc': [-2.2231, 57.1437]} 
```

问题是格式化的地址 ( `A944, Aberdeen, Aberdeen City AB15, UK`) 没有分解成细节——返回`AddressDetails`的地址本质上是无用的。

因此，看起来必须`address`手动解析返回的内容，这在一般情况下似乎是真正的 PITA。

我想知道其他人如何解决这个问题。使用谷歌地图网络服务 API 不是必需的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:49:55.780

[http://maps.googleapis.com/maps/api/geocode/json?latlng=57.14369,-2.22314&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=57.14369,-2.22314&sensor=false)的 反向地理编码**网络服务**

产生的数据比您从 Python 包中发布的数据多得多，包括

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "A944",
               "short_name" : "A944",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Aberdeen City",
               "short_name" : "Aberdeen City",
               "types" : [ "administrative_area_level_2", "political" ]
            },
... 
```

这似乎符合要求。你得到“阿伯丁市”。

# ios - 在 iOS 中强制使用“按需”VPN？

> ID：10296520
> 
> 赞同：4
> 
> 时间：2012-04-24T10:55:44.247
> 
> 标签：ios, cocoa, vpn

1.  是否可以始终强制 vpn 连接而不是“按需”
2.  还需要在配置文件中添加域。如果域不断变化怎么办？为什么以这种方式设计，即仅适用于某些域？如果我需要所有域的 vpn 并且不想添加几个可用域的列表，如 .ru、.in 怎么办？任何帮助将是可观的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-12T07:12:25.030

我在我的配置文件中使用了以下有效负载，它也适用于 iOS 6 和 7。

它将为任何网络请求建立 VPN 连接

```
<key>OnDemandEnabled</key>
            <integer>1</integer>
            <key>OnDemandMatchDomainsAlways</key>
            <array>
                <string>*</string>                        
            </array>
            <key>OnDemandMatchDomainsNever</key>
            <array/>
            <key>OnDemandMatchDomainsOnRetry</key>
            <array/>
            <key>OnDemandRules</key>
            <array>
                <dict>
                    <key>Action</key>
                    <string>Connect</string>
                </dict>
            </array> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T04:24:09.027

在 ios7 中不可能，仅在 ios5 和更早版本上可用

# django - django 模板标签中变量的值

> ID：10296525
> 
> 赞同：0
> 
> 时间：2012-04-24T10:56:10.820
> 
> 标签：django, django-templates

我编写了一个自定义模板标签，它返回聊天中的一些用户。

`{% chat_online chat_channel %}`

但是，令牌似乎接收值`chat_channel`而不是该变量的值。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:05:19.763

请记住，`{% ... %}`HTML 中的模板标签定义 () 只是被 django 的模板引擎解析的文本片段，因此您需要[告诉 django 实际在使用 name 呈现的上下文中查找变量`chat_channel`](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#passing-template-variables-to-the-tag)。文档中的这个例子非常清楚：

```
class FormatTimeNode(template.Node):
    def __init__(self, date_to_be_formatted, format_string):
        self.date_to_be_formatted = template.Variable(date_to_be_formatted)
        ...

    def render(self, context):
        try:
            actual_date = self.date_to_be_formatted.resolve(context)
            ...
        except template.VariableDoesNotExist:
            return '' 
```

where`template.Variable(date_to_be_formatted)`是从传递给模板标签的原始值创建一个模板变量（`blog_entry.date_updated`在示例中），并`self.date_to_be_formatted.resolve(context)`通过根据上下文解析它来找到模板中该变量的实际值。

# date - 在grails Rich-ui datechooser中将日期字符串转换为日期

> ID：10296526
> 
> 赞同：0
> 
> 时间：2012-04-24T10:56:14.353
> 
> 标签：date, grails, rich-ui

我使用了丰富的 ui 的日期选择器。我得到正确的日期值。但是如果我想设置richui的datechooser的值是怎么做的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:03:20.973

You'll have to parse the date manually in your controller because your format/pattern is unknown to grails.

```
def date = Date().parse("MM-dd-yyyy", params.date); //<-- consider using a constant for the date format 
```

or reset the params value to the java.util.Date class.

```
params.date = Date().parse("MM-dd-yyyy", params.date);  //<-- re-assigns date string as date class 
```

You might also want test the inbound format to make sure someone doesn't manually enter an invalid format...

```
def date = (parmas.date.matches("\\d{2}-\\d{2}-\\d{4}"))? Date().parse("MM-dd-yyyy", params.date) : null; //<-- safely return null if doesn't match a date regex. 
```

see also:

*   [Groovy String to Date - Stackoverflow](https://stackoverflow.com/questions/3817862/groovy-string-to-date)
*   [Jira feature request (won't fix but, suggests custom DataBinder)](http://jira.grails.org/browse/GRAILS-4881)

# java - 卡在使用spring上传和下载图像

> ID：10296529
> 
> 赞同：1
> 
> 时间：2012-04-24T10:56:31.830
> 
> 标签：java, spring, jakarta-ee, spring-mvc, file-upload

我正在为人力资源部门开发一个应用程序，其中

1.  我想显示具有通过用户图像上传器功能上传用户详细信息的员工注册表单

2.  在表格的末尾还有一个文件上传器，可以上传任何文件，如 doc 文件（用于简历）、图像文件（用于教育证书、经验信扫描副本）

3.  提交表单后，我想显示一张包含所有用户详细信息的表格和一个链接（查看/删除/更新新图像）以显示上传的文件和图像。

上传图片代码已完成，但对如何在 jsp 页面上显示（下载）该图片感到困惑（点击后应提示我保存、取消、打开）

任何人都可以指导我...

（我已经通过在oracle db中直接将图像导入blob来完成上传图像。可以吗？？？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:15:31.177

您需要将上传的图像存储在某个地方（在数据库中很好），然后`<img src="...">`向您的 JSP 添加一个引用该图像的标签。然后添加一个 servlet 来提供图像（对应`src`于标签中的），如下所示：http: [//balusc.blogspot.co.uk/2007/04/imageservlet.html](http://balusc.blogspot.co.uk/2007/04/imageservlet.html)

# asp.net - 使用登录页面保护 asp.net 站点的密码

> ID：10296538
> 
> 赞同：0
> 
> 时间：2012-04-24T10:57:07.917
> 
> 标签：asp.net, password-protection

我正在尝试用密码保护一个 asp.net 站点，我做得很好，但是如果他们把 /home.aspx 放在地址的末尾，那么它将绕过登录页面，有没有办法让那些其他的页面只能通过按钮访问，如果直接访问它们会将您重定向到登录页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:01:00.457

除非您使用其他方式.. 只需查看 msdn 上的 asp.net 会员提供程序文档：

[http://msdn.microsoft.com/en-us/library/ff648345.aspx](http://msdn.microsoft.com/en-us/library/ff648345.aspx)

如果您向右滚动到底部，这就是您要查找的内容，但此页面提供了您需要的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:13:31.260

您可以将登录状态存储在会话中，并检查页面加载或预初始化以获取 isLoggedin 标志，该标志只有在成功登录时才会设置。如果他们登录，这不会阻止他们直接导航到页面，但如果他们没有登录，则会阻止他们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:40:26.943

在您登录的那一刻，您应该开始一个会话。这是我在一个高中项目中使用的一些代码

```
> public void LoginUser(string id, string mail, string ww, string admin)
>     {
>         Session["UserID"] = id;
>         Session["IsAdmin"] = admin;
>         if(admin == "admin")
>         {
>             Response.Redirect("~/Admin/AdminCP.aspx");
>         }
>         else if (admin == "user")
>         {
>             Response.Redirect("~/User/UserCP.aspx");
>         }
>         else
>         {
>             lblLoginError.Text = "An error has accurred";
>             lblLoginError.Visible = true;
>             lblLoginError.CssClass = "failureNotification left";
>         }
>     } 
```

这是我用来检测用户是管理员还是基本用户的一种方法。在此之后，您必须在 Page_Load-section 的每一页中添加

```
> if (Session["UserID"] == null)
>         {
>             Response.Redirect("~/Account/Login.aspx");
>         } 
```

这将检查每次会话用户 ID 是否正在运行。如果为空，则永远不会登录，因此用户将被重定向到他可以登录的页面。

希望这有帮助;-)

# c++ - 如何使用智能指针实例化对象

> ID：10296544
> 
> 赞同：3
> 
> 时间：2012-04-24T10:57:22.880
> 
> 标签：c++, boost, constructor, smart-pointers

大家好，我目前正在使用 QuickFast 库，我看到了使用 boost 智能指针的声明：

```
namespace QuickFAST{
namespace Messages{
    class FieldIdentity;
    typedef boost::intrusive_ptr<const FieldIdentity> FieldIdentityCPtr;
    typedef boost::intrusive_ptr<FieldIdentity> FieldIdentityPtr;

    void QuickFAST_Export intrusive_ptr_add_ref(const FieldIdentity * ptr);
    void QuickFAST_Export intrusive_ptr_release(const FieldIdentity * ptr);
    void QuickFAST_Export intrusive_ptr_add_ref(FieldIdentity * ptr);
    void QuickFAST_Export intrusive_ptr_release(FieldIdentity * ptr);

    }
} 
```

我有另一个需要实例化的类，这是类：

```
namespace QuickFAST{
namespace Messages{
    /// @brief the representation of a field within a message.
    class QuickFAST_Export MessageField
    {
    public:
    /// @brief Construct from an identity and a typed value.
        MessageField(const FieldIdentityCPtr & identity, const FieldCPtr & field)
            : identity_(identity)
            , field_(field)
            {
            }

    private:
        FieldIdentityCPtr identity_;
        FieldCPtr field_;
    };
    }
} 
```

所以我的问题是：当我需要创建一个 MessageField 时，我需要首先准备我的 FieldIdentityCPtr （或 FieldCPtr ），但它是一个提升智能指针，所以如果我错了请纠正我，但我想也许我可以这样做：

```
FieldIdentityCPtr identityFF_= new  FieldIdentity(nameFld,,idFld);
FieldCPtr fieldFF_ = new Field(typeFld,false);
MessageField(*identityFF_,*fieldFF_); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:58:44.030

**不**，应该是`MessageField(identityFF_,fieldFF_);`。

当您取消引用智能指针时，您将返回原始对象。因此，如果您这样做`MessageField(*identityFF_,*fieldFF_);`，您基本上是将 a`FieldIdentityC`和 a传递`FieldC`给构造函数，而构造函数又会尝试将它们转换为智能指针。因此，您将有 2 个不同的智能指针引用相同的对象。

# delphi - 如何在 Delphi XE 中使用 RTTI 设置记录值

> ID：10296547
> 
> 赞同：3
> 
> 时间：2012-04-24T10:57:31.970
> 
> 标签：delphi, delphi-xe, record, rtti, setvalue

我正在尝试在 Delphi XE 中使用 RTTI 设置记录的值。我可以使用 GetValue 方法从记录中获取值，但无法使用 SetValue 方法设置值。

有谁知道如何做到这一点/为什么它不起作用？

提前致谢！

我的上下文：最终目标是编写一个组件，该组件将读取任何 XML 文件并使用来自 XML 的数据自动填充应用程序的数据模型。数据模型将被注释以确定所有元素的 XPath。对于对象和基本数据类型，我已经启动并运行了它。

```
 TSize = record
    X, Y: double;
  end;

  TMyTest = class
  protected
    FSize: TSize;
  public
    constructor Create;
    procedure DoStuff;
  end;

constructor TMyTest.Create;
begin
  FSize.X := 2.7;
  FSize.Y := 3.1;
end;

procedure TMyTest.DoStuff;
var
  MyContext: TRttiContext;
  MyField: TRttiField;
  MySizeField: TRttiField;
  MyVal: TValue;
  MyRecord: TRttiRecordType;
  NewVal: TValue;
begin 
  // Explicit Create of MyContext does not help (as expected)
  for MyField in MyContext.GetType(ClassType).GetFields do
    if MyField.Name = 'FSize' then //For debugging
    begin
      MyRecord := MyField.FieldType.AsRecord;
      MyVal := MyField.GetValue(Self);
      for MySizeField in MyRecord.GetFields do
      begin
        //This works
        NewVal := MySizeField.GetValue(MyVal.GetReferenceToRawData).AsExtended;
        NewVal := NewVal.AsExtended + 5.0;
        try
          // This does not work. (no feedback)
          MySizeField.SetValue(MyVal.GetReferenceToRawData, NewVal);
          // This however does work. Now to find out what the difference between the two is.
          MySizeField.SetValue(@FSize, NewVal);
        except
          on e: Exception do //Never happens
            ShowMessage('Oops!' + sLineBreak + e.Message);
        end;
      end;
    end;
  // Shows 'X=2.7 Y=3.1'
  // Expected 'X=7.7 Y=8.1'
  ShowMessage(Format('X=%f Y=%f', [FSize.X, FSize.Y]));
end; 
```

如果 TSize 被声明为类，则`MyVal.GetReferenceToRawData`在代码中应替换为`TObject(MyVal.GetReferenceToRawData^)`. 如果你这样做，一切都会按预期工作。（是的，`MyVal.AsObject`在这种情况下也可以解决问题）这使我找到了一个可能的解决方案：`MyVal.GetReferenceToRawData^`将类型转换为正确的记录类型。这怎么能做到呢？

我刚刚尝试在 SetValue 中直接使用@FSize。正如您所期望的那样，这很有效。这引发了一个问题：@FSize 和 MyVal.GetReferenceToRawData 有什么不同

* * *

经过大量进一步的调查，我发现 MyVal 实际上是记录的副本，因此确实如 Serg 在他的第一个答案中提到的那样正确设置了值，但是，它是在副本中设置的。我觉得很傻，没有早点意识到这一点……

无论如何，下面是一个有效的代码示例。此外，如果您愿意使用“字段名称路径”，您可以在[这篇](https://stackoverflow.com/a/2810732/1353360)文章中查看 Barry Kelly 的方法，这让我走上了正轨。我只是不喜欢`Follow`例程所需的路径。

```
procedure TMyTest.DoStuff;
var
  MyContext: TRttiContext;
  MyField: TRttiField;
  MySizeField: TRttiField;
  NewVal: TValue;
  dMyVal: double;
begin
  for MyField in MyContext.GetType(ClassType).GetFields do
    if MyField.Name = 'FSize' then
    begin
      for MySizeField in MyField.FieldType.GetFields do
      begin
        dMyVal := MySizeField.GetValue(PByte(Self) + MyField.Offset).AsExtended;
        NewVal := TValue.From(dMyVal + 5.1);
        try
          MySizeField.SetValue(PByte(Self) + MyField.Offset, NewVal);
        except
          on e: Exception do
            ShowMessage('Oops!' + sLineBreak + e.Message);
        end;
      end;
    end;
  if FSize.X > 5.0 then
    ShowMessage(Format('X=%f Y=%f', [FSize.X, FSize.Y]));
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:28:50.767

`MyVal.GetReferenceToRawData`不返回指向`FSize`字段的指针，这就是`FSize`字段值不会改变的原因。

我不确定我的代码是你想要写的，但我希望它会有所帮助：

```
uses rtti, typinfo;

type
  TSize = record
    X, Y: double;
  end;

  TMyTest = class
  protected
    FSize: TSize;
  public
    constructor Create;
    procedure DoStuff;
  end;

constructor TMyTest.Create;
begin
  FSize.X := 2.7;
  FSize.Y := 3.1;
end;

procedure TMyTest.DoStuff;
var
  MyContext: TRttiContext;
  MyField: TRttiField;
  MyVal: TValue;
  NewSize: TSize;

begin
  // Explicit Create of MyContext does not help (as expected)
  for MyField in MyContext.GetType(ClassType).GetFields do
    if MyField.Name = 'FSize' then //For debugging
    begin
      MyVal := MyField.GetValue(Self);
      NewSize:= MyVal.AsType<TSize>;
      NewSize.X:= NewSize.X + 5;
      NewSize.Y:= NewSize.Y + 5;
      TValue.Make(@NewSize, TypeInfo(TSize), MyVal);
      MyField.SetValue(Self, MyVal);
    end;
  ShowMessage(Format('X=%f Y=%f', [FSize.X, FSize.Y]));
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  Test: TMyTest;

begin
  Test:= TMyTest.Create;
  Test.DoStuff;
  Test.Free;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T19:33:58.670

我遇到了同样的困难，但在我的情况下，我使用的是属性而不是字段，这非常复杂，因为 TRttiProperty 没有属性 Offset 来解决问题，在搜索了很多并运行了几个测试后，我找到了一个解决方案，我在这里分享。

```
procedure TMyTest.DoStuff;
var
  MyContext: TRttiContext;
  MyProp: TRttiProperty;
  MySizeField: TRttiField;
  NewVal: TValue;
  dMyVal: double;
  MyPointer:Pointer;
begin
  for MyProp in MyContext.GetType(ClassType).GetProperties do
    if MyProp.Name = 'Size' then
    begin
      MyPointer := TRttiInstanceProperty(MyProp).PropInfo^.GetProc;
      for MySizeField in MyProp.PropertyType.GetFields do
      begin
        dMyVal := MySizeField.GetValue(PByte(Self) + Smallint(MyPointer)).AsExtended;
        NewVal := TValue.From(dMyVal + 5.1);
        try
          MySizeField.SetValue(PByte(Self) + Smallint(MyPointer), NewVal);
        except
          on e: Exception do
            ShowMessage('Oops!' + sLineBreak + e.Message);
        end;
      end;
    end;
  if FSize.X > 5.0 then
    ShowMessage(Format('X=%f Y=%f', [FSize.X, FSize.Y]));
end; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-24T16:48:14.803

RTTI 在已发布的属性上效果最好。所以如果你添加

发布属性大小：TSize read fSize write fSize；

到你的课我想你会有更好的成绩。

# apache-poi - Java Eclipse Apache POI

> ID：10296550
> 
> 赞同：0
> 
> 时间：2012-04-24T10:57:34.527
> 
> 标签：apache-poi

我正在尝试`MS Visio XML`使用[Apache POI](http://poi.apache.org/)读取 (.vdx) 文件，但出现以下异常。我在 Eclipse 中使用 Java 代码。

```
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.poi.POIDocument.<init>(Lorg/apache/poi/poifs/filesystem/DirectoryNode;)V
    at org.apache.poi.hdgf.HDGFDiagram.<init>(HDGFDiagram.java:73)
    at org.apache.poi.hdgf.HDGFDiagram.<init>(HDGFDiagram.java:60)
    at org.apache.poi.hdgf.dev.VSDDumper.main(VSDDumper.java:48) 
```

是否有任何其他用于读取 visio 文件或 visio xml 文件的库。或者我们如何将 MS visio xml 转换为简化`xml`或 UML 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:01:54.443

尝试这个 ：

[http://poi.apache.org/hdgf/index.html](http://poi.apache.org/hdgf/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:30:24.163

该异常意味着您的类路径上有多个不同版本的 Apache POI 副本。

您应该确保您只有一份 Apache POI jar 副本（最好是最新版本，目前是 3.8 Final）

如果您无法自行确定重复的旧 POI jar 来自何处，那么[有关此主题的 POI FAQ](http://poi.apache.org/faq.html#faq-N10006)提供了一些方便的代码，可用于识别重复 jar 的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:39:56.227

Apache POI 尝试解码二进制 .vsd 文件，而不是 XML .vdx。调用 main 的类名确实给了你一个提示。

# java - flamingo 支持从右到左的功能区菜单吗？

> ID：10296555
> 
> 赞同：5
> 
> 时间：2012-04-24T10:58:04.543
> 
> 标签：java, swing, ribbon, right-to-left, radiance-flamingo

我想提供一个带有类似 Microsoft Ribbon 视图的 Java 应用程序。快速搜索后，我发现 flamingo 项目很有用。问题是我想要一个从右到左的功能区菜单，但我做不到。我只想知道 API 是否为从右到左的功能区任务、功能区等提供任何支持？

我确实尝试以这种方式为 JRibbonBand 的实例设置组件方向：

```
JRibbonBand band1 = new JRibbonBand band1.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT); 
```

以及主功能区：

```
frame.getRibbon().setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT); 
```

不幸的是，除了应用程序菜单按钮（顶部的圆形按钮）外，它不起作用。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:15:45.607

解决了！

我发现我应该调用**applyComponentOrientation**而不是 setComponentOrientation 来让功能区实例切换到 RTL 模式。

# resharper - 编辑 Resharper Intellisense 建议

> ID：10296557
> 
> 赞同：3
> 
> 时间：2012-04-24T10:58:09.657
> 
> 标签：resharper, intellisense

我将 Resharper 6.1 与 VS 2008 结合使用，并启用了 Resharper Intellisense。它工作得很好，但一些智能感知建议让我发疯：

*   '_' 总是建议 '_Appdomain'。大多数时候我只想要下划线，所以我每次都必须逃避这个建议。
*   当调用我要传递的变量与参数同名的方法时，第一个建议始终是参数。例如：

    ```
    Public Sub DoSomething()
      Dim someVar As String
      Dim result = DoSomethingElse(someVar :=)    '<--this
    End Sub

    Public Sub DoSomethingElse(someVar As String) 
       'stuff
    End Sub 
    ```

我试图找到可以删除它或更改建议顺序的地方，但没有运气。

有没有办法改变这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:06:34.613

发生这种情况是因为您在按 Enter 之前在完成列表中预先选择了“_AppDomain”。在这种情况下，您可以：

1.  在按 Enter 之前使用 Esc 显式关闭 IntelliSense 窗口

2.  将 ReSharper | 下的“字母和数字”上下文的自动弹出选项更改为“显示但不预选” 选项 | 智能感知 | 自动弹出 | VB.NET

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T07:43:44.603

Resharper 6.1 添加了一项新功能来控制智能感知自动弹出窗口的行为方式。转到 ReSharper->Options->Environment->IntelliSense->Autopopup 并将设置更改为“显示但不预选”。

![在此处输入图像描述](../Images/02afdc1ff7c28d4b26f520fc86358070.png)

注意：此屏幕截图用于 C# 设置，我刚刚注意到您的代码示例是在 VB 中，我认为 VB 可能也有类似的设置。

# android - ActionBar 支持库

> ID：10296558
> 
> 赞同：0
> 
> 时间：2012-04-24T10:58:11.753
> 
> 标签：android, android-actionbar, android-2.2-froyo

我正在使用 API Level 8 (Froyo) 进行开发。此 API 不提供 ActionBar 功能（API Level 13 中引入了 ActionBar）。

但我想在 Froyo 的项目中使用 ActionBar 功能。在哪里可以找到为 Froyo 添加 ActionBar 功能的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:01:10.747

我更喜欢使用[ActionBarSherlock](http://actionbarsherlock.com/)

# java - 通过 Tibco JMS 发送 Serializable 对象会引发反序列化失败错误

> ID：10296562
> 
> 赞同：1
> 
> 时间：2012-04-24T10:58:26.367
> 
> 标签：java, serialization, jms, tibco

我有一个 java 应用程序，它通过 JMS 将一个简单的 java bean 发送到另一个 java 应用程序。

这完全可以正常工作 ActiveMQ，但是当我切换到 Tibco JMS Broker 时，接收应用程序会引发错误。bean 实现了*Serializable*接口，并且两个应用程序都从包含 bean 类的相同 jar 中运行。

*我使用tibjmsd.exe*启动 Tibco JMS 。版本为 4.1.0。

来自发送 java 客户端的简单检查会生成以下错误：

代码：

```
..
....
MyBean bean = new MyBean(1,”Test”);
final ObjectMessage msg = jmssession.createObjectMessage(bean);
    try {
        msg.getObject();
    } catch (Exception e) {
        LOG.error("Problem with storing bean", e);
    }
....
.. 
```

来自上述代码的错误消息：

```
javax.jms.MessageFormatException: Deserialization failed: [Ljava.lang.String;
     at com.tibco.tibjms.TibjmsObjectMessage.getObject(TibjmsObjectMessage.java:199) 
```

运行 ActiveMQ 时相同的代码可以正常工作有什么我可以做或检查的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T09:40:44.210

首先，你需要找出`linkedException`那个`JMSException`

```
catch(MessageFormatException mfe)
{
      mfe.printStackTrace(); // what you told us
      mfe.getLinkedException().printStackTrace(); // the interesting one
} 
```

我觉得这与他们`TibjmsObjectMessage$CLOIS.resolveClass`无法正确解析原生数组的类名有关。

似乎有些人很难在他们的信息中包含一个简单`long`的信息： [https ://jira.springsource.org/browse/SPR-1231?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel](https://jira.springsource.org/browse/SPR-1231?page=com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel)

一个可行的建议解决方案是自己序列化对象并使用`javax.jms.BytesMessage`.

# hibernate - MappingException 尝试将 POJO 用于 Grails 中的域对象

> ID：10296567
> 
> 赞同：4
> 
> 时间：2012-04-24T10:58:53.037
> 
> 标签：hibernate, grails, mapping, pojo

我有几个 POJO：

```
public class FlightBase {

    public AirportBase getDeparture() {
        return departure;
    }

    public void setDeparture(AirportBase departure) {
        this.departure = departure;
    }

    public AirportBase getDestination() {
        return destination;
    }

    public void setDestination(AirportBase destination) {
        this.destination = destination;
    }

    public String getDetails() {
        return details;
    }

    public void setDetails(String details) {
        this.details = details;
    }
    String details = "";
    AirportBase departure;
    AirportBase destination;
}

public class AirportBase {
    String icaoIdentifier = "KSPG";

    public String getIcaoIdentifier() {
        return icaoIdentifier;
    }

    public void setIcaoIdentifier(String icaoIdentifier) {
        this.icaoIdentifier = icaoIdentifier;
    }

} 
```

...我试图通过扩展它们将它们用作 grails 应用程序中的域类：

```
package flightloggrails

    import com.flightloglib.domain.AirportBase
    import com.flightloglib.domain.FlightBase

    class Flight extends FlightBase  {

        static hasOne = [departure:AirportBase, destination:AirportBase ]

        static mapping = {

            departure type: Airport
            destination type: Airport
        }

        static constraints = {
            details( blank:false,null:false, widget:'textarea')
        }
    } 
```

和这个域类：

```
package flightloggrails

import com.flightloglib.domain.AirportBase

class Airport extends AirportBase {

    static constraints = {
    }
} 
```

...继续尝试执行'run-app'（前面是'clean'）：

```
 Error 2012-04-24 06:50:18,892 [pool-5-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: flightloggrails.Airport, at table: flight, for columns: [org.hibernate.mapping.Column(departure)]
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: flightloggrails.Airport, at table: flight, for columns: [org.hibernate.mapping.Column(departure)]
   Line | Method
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: flightloggrails.Airport, at table: flight, for columns: [org.hibernate.mapping.Column(departure)]
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.hibernate.MappingException: Could not determine type for: flightloggrails.Airport, at table: flight, for columns: [org.hibernate.mapping.Column(departure)]
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread

Caused by MappingException: Could not determine type for: flightloggrails.Airport, at table: flight, for columns: [org.hibernate.mapping.Column(departure)]
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   662 | run . .  in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:02:09.147

您正在将多对一关系映射到一个非域的类。

```
class Flight extends FlightBase  {
    static hasOne = [departure:AirportBase, destination:AirportBase ]
...
} 
```

AirportBase 必须是一个域。或者您可以使用类 Airport 进行映射

```
class Flight extends FlightBase  {
    static hasOne = [departure:Airport, destination:Airport ]
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T22:17:53.733

似乎有更好的方法来做到这一点：

[关于stackoverflow的一个很好的问题和答案](https://stackoverflow.com/questions/14104081/grails-use-java-domain-classes-to-create-grails-domain-classes-using-gorm)

[Grails 文档](http://blog.springsource.com/2010/08/26/reuse-your-hibernatejpa-domain-model-with-grails/)

# iphone - 将按钮连接到 xcode 中的 TableViewController

> ID：10296573
> 
> 赞同：1
> 
> 时间：2012-04-24T10:59:11.960
> 
> 标签：iphone, objective-c, uitableview, xcode4.2

我的视图控制器中有一个按钮，我想将我的按钮连接到表视图控制器（这意味着当我单击按钮时，它会加载并带来我的表）

但我不知道该怎么做（我可以将按钮连接到另一个视图控制器但不能连接到表格），这是我的代码

在此先感谢！（我真的是初学者）

第一视图控制器.h

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController

@end 
```

第一视图控制器.m

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} else {
    return YES;
}
}

@end 
```

CreateViewController.h //我的表

```
 #import <UIKit/UIKit.h>

 @interface CreateViewController : UIViewController <
 UITableViewDataSource, UITableViewDelegate>
 {
 NSArray *tableData;

 }

 @property (nonatomic, retain) NSArray *tableData;
 @end 
```

创建视图控制器.m

```
#import "CreateViewController.h"

@implementation CreateViewController
@synthesize tableData;

#pragma mark - View lifecycle

- (void)viewDidLoad
{
tableData = [[NSArray alloc] initWithObjects:@"Johan", @"Paul",@"George",@"Ringo", nil];
[super viewDidLoad];
// Do any additional setup after loading the view.
}

#pragma mark - TableView Data Source methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [tableData count];

}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = nil;

cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];
if(cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];

}
cell.textLabel.text = [tableData objectAtIndex:indexPath.row];

return cell;
}

 @end 
```

编辑：我用故事板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:42:01.513

我认为按钮在 FirstViewController 中。如果是，则实现 -(IBAction)clickButton 并编写代码并将其连接到 Interface Builder 的底部（如果您使用 Interface Builder）。写入`createViewController`对象并`#import <CreateViewController.h>`在 FirstViewController.h

在 FirstViewController.h 中，

```
#import "CreateViewController.h"

@interface FirstViewController : UIViewController{

    CreateViewController *createViewController;
}
-(IBAction)clickButton:(id)sender;
@end 
```

在 FirstViewController.m 中，您只需添加以下方法

```
 -(IBAction)clickButton:(id)sender{

if (!createViewController) {
                createViewController = [[CreateViewController alloc] initWithNibName:@"CreateViewController" bundle:nil];

            }

            UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
            self.navigationItem.backBarButtonItem = backBarButtonItem;
            [backBarButtonItem release];
            [self.navigationController pushViewController:createViewController animated:YES];
} 
```

在 AppDelegate.h 中，

```
#import "FirstViewController.h"
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) FirstViewController *viewController;
@property (nonatomic, retain) UINavigationController *navControl;
@end 
```

在 AppDelegate.m 中，

```
@synthesize window;
@synthesize viewController;
@synthesize navControl;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
    navControl = [[UINavigationController alloc] initWithRootViewController:self.viewController];
[self.window addSubview:[navControl view]];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T13:01:54.373

**第一视图控制器.h**

```
 #import <UIKit/UIKit.h>

    @interface FirstViewController : UIViewController
   <UITableViewDataSource,UITableViewDelegate>
          {
             UITableView *maintableView;
             NSArray *tableData;

          }  

        @property (nonatomic,retain)IBOutlet UITableView *maintableView;
          -(IBAction)click;

       @end

          FirstViewController.m

              #import "FirstViewController.h"

              @implementation FirstViewController
              @synthesise maintableView;
                - (void)viewDidLoad
                    {

                    [maintableView setHidden : YES];
                    [super viewDidLoad];

                   }

               - (void)viewDidUnload
                     {
                       [super viewDidUnload];

                     }

         - (BOOL)shouldAutorotateToInterfaceOrientation:     (UIInterfaceOrientation)interfaceOrientation
                  {
            if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
                     return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
                      } 
     else 
     {
          return YES;
          }
  -(IBAction)click
     {
          [maintableView setHidden : NO];
       tableData = [[NSArray alloc] initWithObjects:@"Johan", @"Paul",@"George",@"Ringo", nil];
       }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
      {
       return [tableData count];

       }

       - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
        {
            UITableViewCell *cell = nil;

           cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];
        if(cell == nil)
          {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyCell"];

         }
       cell.textLabel.text = [tableData objectAtIndex:indexPath.row];

       return cell;
   }

    }
    @end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:03:46.337

In the first view ,Create one buton named btn1\.

set it on the top of simulator screen.

Now take tableview from object library. put it under the button.....

Now in load time make the table hidden....

Write [tablename sethidden: YES]

Now, on button's action method , [tablename sethdden : NO]

tableData = [[NSArray alloc] initWithObjects:@"Johan", @"Paul",@"George",@"Ringo", nil];

Then write all the methods required for table:

three methods are must :

1.  -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

2.  -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath: (NSIndexPath *)indexPath

3.  -(void)tableView:(UITableView *) tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

Try this....and let me know if something query occur

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T23:22:17.933

正如你所说的故事板：

首先浏览 iphone 故事板并创建您的视图，然后添加您的按钮

在那之后

*   拖放您的表格视图
*   使用模块将您的按钮连接到表格视图 - 单击表格并从菜单中选择-->编辑器-->嵌入-->并添加导航控制器

通过此过程，您无需编写代码即可轻松拥有 GUI 演示，然后您应该创建 TableViewController 文件并添加代码，

只是不要忘记 --> 当您完成 GUI 部分和代码时，您应该通过自定义类中的对象将 createViewController 类添加到您的 GUI。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T11:12:56.283

不要将 UITableView 的代码放在 viewDidLoad() 方法中。

创建一个按钮并在加载时显示它...在按钮的操作方法上显示表格并加载数据...

如果你不能得到塔问我....我很乐意帮助你

# wpf - 在 WPF 3D 中绝对缩放 LinearGradientBrush 纹理

> ID：10296582
> 
> 赞同：1
> 
> 时间：2012-04-24T11:00:01.237
> 
> 标签：wpf, 3d, lineargradientbrush

我有以下 XAML：

```
 <Viewport3D>
      <Viewport3D.Camera>
        <OrthographicCamera FarPlaneDistance="100" LookDirection="0, 0,-1" UpDirection="0,1,0" NearPlaneDistance="1" Position="0,0,5" Width="10" />
      </Viewport3D.Camera>
      <ModelVisual3D>
        <ModelVisual3D.Content>
      <DirectionalLight Color="White" Direction="0,0,-1" />
        </ModelVisual3D.Content>
      </ModelVisual3D>
      <ModelVisual3D>
        <ModelVisual3D.Content>
          <GeometryModel3D>
            <GeometryModel3D.Material>
              <DiffuseMaterial>
                <DiffuseMaterial.Brush>
                  <LinearGradientBrush>
                    <GradientStop Color="Yellow" Offset="0" />
                    <GradientStop Color="Blue" Offset="1" />
                  </LinearGradientBrush>
                </DiffuseMaterial.Brush>
              </DiffuseMaterial>
            </GeometryModel3D.Material>
            <GeometryModel3D.Geometry>
              <MeshGeometry3D Positions="-1,-1,0 -1,1,0 1,1,0 1,-1,0" TriangleIndices="0,2,1 2,0,3" TextureCoordinates="0,0 .5,0, .5,.5 0,.5"/>
          </GeometryModel3D.Geometry>
        </GeometryModel3D>
      </ModelVisual3D.Content>
    </ModelVisual3D>
  </Viewport3D> 
```

我*想要*的是只使用一半的渐变（因为我的纹理坐标只从 0 到 0.5）。不幸的`LinearGradientBrush`是，无论使用的纹理坐标如何，都会拉伸以填充几何图形。

您可以使用`TileBrush`派生画笔修复此问题`ViewportUnits="Absolute"`，但我不知道如何为`LinearGradientBrush`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:00:53.483

使用全尺寸的`LinearGradientBrush`a ，并在 a 中使用它：`RectangleGeometry``DrawingBrush`

```
<DrawingBrush ViewportUnits="Absolute">
    <DrawingBrush.Drawing>
       <GeometryDrawing>
          <GeometryDrawing.Geometry>
              <RectangleGeometry Rect="0,0,1,1" />
          </GeometryDrawing.Geometry>
          <GeometryDrawing.Brush>
              <LinearGradientBrush>
                   <GradientStop Color="Yellow" Offset="0" />
                   <GradientStop Color="Green" Offset="0.5" />
                   <GradientStop Color="Blue" Offset="1" />
               </LinearGradientBrush>
          </GeometryDrawing.Brush>
       </GeometryDrawing>
    </DrawingBrush.Drawing>
 </DrawingBrush> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T10:57:51.250

在 LinearGradientBrush 上设置 MappingMode="Absolute" 应该可以工作

# ios - 如何将音频 CMSampleBufferRef 转换为数据，并在收到数据的其他设备中播放音频

> ID：10296587
> 
> 赞同：4
> 
> 时间：2012-04-24T11:00:21.110
> 
> 标签：ios, audio, cmsamplebufferref

我尝试实现视频会议，我可以使用 CaputreSession 捕获视频和音频，并将视频 CMSampleBufferRef 隐藏到图像并将数据发送到其他设备。

但我不知道如何将音频 CMSampleBufferRef 转换为数据，并在其他设备中播放带有数据的音频？

有人可以帮助我吗？

编辑：

我在一个中文网站上找到了[这个](http://blog.csdn.net/zxc110110/article/details/7188092)，它说我们可以使用 OpenAL 读取 CMSamplerBufferRef 中的数据。我已经在我的项目中尝试过代码，似乎 OpenAL 和带有音频的 AvCaptureSession 不能一起工作，因为带有文件的 OpenAL 很有趣。有人可以帮我吗？？？？？？

# android - 设置 ID 以唯一标识复选框

> ID：10296590
> 
> 赞同：0
> 
> 时间：2012-04-24T11:00:27.880
> 
> 标签：android, android-layout

我是 Android 3.1 及以上应用程序的开发人员。

我是一个动态表单生成器的开发人员，我需要以编程方式添加很多复选框。

表格将是第一列带有问题的表格，其他列将带有复选框。

这是一段代码，我在其中添加了复选框：

```
int optionsTotalNum = this.calculateColumsForBlock(block);
            QuestionsGroup qGroup = block.getQuestionsGroup();
            for(int z = 0; z < qGroup.getQuestions().size(); z++)
            {
                tableRow = new TableRow(this);
                Question q = qGroup.getQuestions().get(new Integer(z));
                params = new LayoutParams(this.optionWidth, this.rowHeight);
                params.column = 0;

                TextView optionName = new TextView(this);
                optionName.setText(q.getQuestionText().toUpperCase());
                optionName.setGravity(Gravity.CENTER);
                optionName.setLayoutParams(params);
                tableRow.addView(optionName);

                for (int index = 1; i < optionsTotalNum; i++)
                {
                    params.column = index;
                    CheckBox check = new CheckBox(this);

                    int id = ((z + 1) * 100) + index;
                    check.setId(id);
                    check.setLayoutParams(params);
                    tableRow.addView(check);
                }
                table.addView(tableRow, new TableLayout.LayoutParams(
                        LayoutParams.FILL_PARENT,
                        this.rowHeight));
            } 
```

我使用`int id = ((z + 1) * 100) + index;`动态创建 ID，但我不确定我是否会重复和 Id。换句话说，我不确定我是否会有两个具有相同 ID 的视图。我知道所有复选框都有不同的 ID，但我会有`TextViews`, 和 a`TableLayout`并且`TableRows`我不知道它们是否可以有一个用于 a 的 ID `CheckBox`。

`findViewById()`如果有两个具有相同 ID 的视图会发生什么？
我们可以在同一个 ContentView 上有两个或多个具有相同 ID 的视图吗？
有没有更好的方法来唯一地识别所有复选框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:03:02.787

好吧，因为您是在运行时添加它..您不必设置一个ID..您可以将它们全部保存在一些维护插入顺序并直接访问它们的集合中......如果您想继续相同的想法。 . 然后不要在这里做任何复杂的事情.. 只需在类级别保留一个**静态计数器**.. 将其设置为 id 然后递增它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:55:01.820

如果您想拥有唯一的 id，只需使用 int id = (int) java.util.Date().getTime() 此函数将以毫秒为单位返回当前日期和时间，并且始终是唯一的。将此 id 保存在数组（或另一个容器）中以供进一步参考。

# javascript - Safari 浏览器中未触发 Onchange 事件

> ID：10296591
> 
> 赞同：1
> 
> 时间：2012-04-24T11:00:30.333
> 
> 标签：javascript, javascript-events

请在 Safari 中检查下面的小提琴，

[http://jsfiddle.net/mothi_gautham/t5MEa/2/](http://jsfiddle.net/mothi_gautham/t5MEa/2/)

1) 选择一个文件 2) 单击清除 3) 再次选择相同的文件

onchange 事件不会在 Safari 中触发。

有什么办法可以克服这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T08:06:02.517

尝试使用下面的代码：

```
<script type="text/javascript">
    window.onload = function() {
        var fieldsets = document.getElementsByTagName("fieldset");
        for( i = 0 ; i < fieldsets.length ; i++ ) {
            fieldsets[i].onchange = function() {
                Validate(); // Calling sample function
            }
        }
    }
    function Validate() {
        // Sample function content
    }
</script> 
```

# php - Imagick 内存和 CPU 限制

> ID：10296594
> 
> 赞同：0
> 
> 时间：2012-04-24T11:00:47.913
> 
> 标签：php, cpu-usage, imagick

我正在使用 Imagick 最新版本和 PHP 5.3。当我尝试为图像创建缩略图时（下面的代码），该脚本使用了过多的 CPU。如何在 Imagick 上设置资源消耗限制？

```
$thumb = new Imagick();
$thumb->readImage($this->tmp_file);
$thumb->thumbnailImage(200, null);
$thumb->writeImage($this->thumb_file);
$thumb->destroy(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-08T15:15:51.313

我相信您可以使用以下方法更改 Imagick 的限制[`setResourceLimit`](http://php.net/manual/en/imagick.setresourcelimit.php)：

```
Imagick::setResourceLimit( $type, $limit ); 
```

可用的类型常量：

```
Imagick::RESOURCETYPE_AREA
Imagick::RESOURCETYPE_DISK
Imagick::RESOURCETYPE_FILE
Imagick::RESOURCETYPE_MAP
Imagick::RESOURCETYPE_MEMORY 
```

[`getResourceLimit`](http://php.net/manual/en/imagick.getresourcelimit.php)您可以使用上面列出的相同常量查看当前使用的限制之一：

```
Imagick::getResourceLimit( $type ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:59:01.613

你想做什么？如果您尝试在每次用户访问该页面时创建缩略图，您将很快在 CPU 上创建一个非常重的负载。您可以通过仅生成一次图像并将其保存到缩略图目录来解决此问题。

您还可以使用 PHP.ini 或 ini_set 命令将 PHP 设置为具有特定的内存限制。见[这里](http://php.net/manual/en/ini.core.php)和[这里](http://uk3.php.net/manual/en/function.ini-set.php)。

我不认为你可以在 imagemagick 中专门设置内存限制，除非你可以自己设置命令行参数（最后一个答案[在这里](http://drupal.org/node/985784)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T12:27:05.737

**我的建议**

A. 利用缓存

B. 不要一直生成 Thumb

C. 使用作业排队系统（例如`Gearman`或`beanstalkd`来生成拇指，这样您就不必立即进行操作）

示例仅在修改原始文件时生成拇指

```
$file = "a.jpg" ;
$thumbFile = "a.thumb.jpg" ;
$createThumb = true;
if(is_file($thumbFile))
{
    if((filemtime($file) - 10) < filemtime($thumbFile));
    {
        $createThumb = false;
    }
}

if($createThumb === true)
{
    $thumb = new Imagick();
    $thumb->readImage($file);
    $thumb->thumbnailImage(50, null);
    $thumb->writeImage($thumbFile);
    $thumb->destroy();
} 
```

# javascript - IE7中Google Maps v2上的PNG显示问题

> ID：10296600
> 
> 赞同：0
> 
> 时间：2012-04-24T11:01:02.367
> 
> 标签：javascript, ajax, google-maps, internet-explorer-7, png

我在[此页面](http://www.dorothyperkins.com/webapp/wcs/stores/servlet/CatalogNavigationSearchResultCmd?catalogId=33053&storeId=12552&langId=-1&viewAllFlag=false&sort_field=Relevance&categoryId=484014&parent_categoryId=329608&beginIndex=1&pageSize=20&interstitial=true#6)上使用 Google Maps v2 API（是的，我知道它的旧版本 - 我必须选择） 。基本上，您单击左侧的链接之一，它会将您带到带有该商店标记的地图，您会认为它既漂亮又简单，但不适用于 IE7。

地图页面本身是一个单独的[html 页面](http://www.dorothyperkins.com/cms/pages/ajax/ajax-0000037136/files/or_stores.html)，在 iframe 中加载[到此页面](http://www.dorothyperkins.com/cms/pages/ajax/ajax-0000037136/ajax-0000037136.html)中，然后通过 ajax 将此页面加载到登录页面中（不要问）。如果我自己在 IE7 中点击地图页面（带有 iframe 的页面），那么它显示得很好，但是当它通过 ajax 加载时，地图开始看起来非常粗糙。它看起来像 png 透明度问题，但我无法弄清楚为什么通过 ajax 加载会导致这种情况。

# php - nginx 502 网关错误

> ID：10296601
> 
> 赞同：1
> 
> 时间：2012-04-24T11:01:05.760
> 
> 标签：php, ubuntu, nginx

我刚刚从 apache2 切换到 nginx，因为我的一个应用程序可能会占用大量流量。

我已经安装了 php-fastcgi，并且之前有一个`phpinfo();`功能正常的测试页面。我也有一小部分快照。

![phpinfo 快照](../Images/e3566461627b75f4ad56e3dff7020cbb.png)

我不知道如何使它工作！

这是我的 nginx 错误日志所说的：

```
2012/04/24 16:21:18 [error] 5951#0: *1 recv() failed (104: Connection reset by peer) while reading response header from upstream, client: 192.168.1.6, server: 192.168.1.4, request: "GET / HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "192.168.1.4:81"
2012/04/24 16:21:19 [error] 5951#0: *1 open() "/home/hitesh/brainlab/favicon.ico" failed (2: No such file or directory), client: 192.168.1.6, server: 192.168.1.4, request: "GET /favicon.ico HTTP/1.1", host: "192.168.1.4:81" 
```

更新：我重新启动了服务器，现在有一些新的日志消息；

```
2012/04/24 16:31:53 [error] 765#0: *3 connect() failed (111: Connection refused) while connecting to upstream, client: 192.168.1.6, server: 192.168.1.4, request: "GET / HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "192.168.1.4:81"
2012/04/24 16:31:54 [error] 765#0: *3 open() "/home/hitesh/brainlab/favicon.ico" failed (2: No such file or directory), client: 192.168.1.6, server: 192.168.1.4, request: "GET /favicon.ico HTTP/1.1", host: "192.168.1.4:81" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:58:49.297

您想在 nginx 中使用 php-fpm*而不是*fastcgi。那里有很多关于如何设置的文档，这很简单。

# java - 读取重复事件的问题

> ID：10296605
> 
> 赞同：1
> 
> 时间：2012-04-24T11:01:11.597
> 
> 标签：java, blackberry, java-me, calendar, jsr75

我正在开发一个日历应用程序，我试图在其中读取事件是否重复发生。我能够在创建重复事件的那一天读取重复事件值。

假设我在 4 月 24 日创建了一个事件“xyz”，每天发生（频率）并在 4 月 26 日结束。所以在我的应用程序中，我只能看到 24 日的事件，我没有收到 25 日和 26 日的任何事件，这些事件重复了。

我正在使用以下代码段来获取所有事件：

```
EventList eventList = null;
            eventList = (EventList) PIM.getInstance().openPIMList(
                    PIM.EVENT_LIST, PIM.READ_ONLY); 
```

这不会返回重复事件的日期。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:38:29.120

看一下`RepeatRule`class 和`getRepeat`,类中的`setRepeat`方法`Event`

# css - 对 2 张响应式（不固定）大小的图像使用 CSS 位置绝对、相对和 z-index

> ID：10296611
> 
> 赞同：1
> 
> 时间：2012-04-24T11:01:26.273
> 
> 标签：css, responsive-design, z-index

我正在尝试叠加 2 个图像，但它们都需要在高度和大小上做出响应（即父 DIV 不是固定大小（特别是缩略图上的播放按钮）。

例子...

```
<div class="img-wrap">
   <div class="play-button">Play Button Img</div>
   <div class="thumb-image">Thumbnail Video Image</div>
</div> 
```

通常我会在 .img-wrap 上设置高度、宽度和相对位置，然后设置 .play-button 和 .thumb-image 的绝对位置和 z-index 以允许播放按钮图像很好地位于缩略图上。

我遇到的问题是缩略图是响应式的，所以我无法设置 .img-wrap 的高度和宽度。我仍然可以将 z-index 设置好，但如果不设置高度，下面的一切都令人绝望。

有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T01:48:17.267

使用以下技术：

```
<!doctype html>
<html>
<head>
<title>Responsive Nested Images</title>
<meta charset="utf-8">
</head>
<style>
     .play-button, .thumb-image
       {
       position: absolute; /* Absolutely position both containers */
       font-size:0; /* Hide text */
       line-height:0;
       }
     .play-button { outline: 1px solid red; } /* Add outline for debugging */
     .thumb-image { top:50%; left: 50%; outline: 1px solid green; } /* Responsive Container */
     .play-button img, .thumg-image img { max-width: 100%; height: auto; } /* Responsive Image Dimensions */
</style>
</head>
<body>
    <div class="play-button"><img src="http://www.stackoverflow.com/favicon.ico">
      <div class="thumb-image">Thumbnail Video Image<img src="http://www.stackoverflow.com/favicon.ico"></div>
      Play Button Img
    </div>
</body>
</html> 
```

**参考**

*   [贴合收缩技术](http://www.cssplay.co.uk/menu/fast.html)
*   [PlayBox：垂直和水平居中的模态](http://www.cssplay.co.uk/menu/cssplayBox.html)

# jsf-2 - JSF 2.0 中的 WEB.XML 错误页面

> ID：10296613
> 
> 赞同：2
> 
> 时间：2012-04-24T11:01:32.550
> 
> 标签：jsf-2, error-handling

*我正在使用 JSF2 和 Glassfish 3.0。*

`404`我有一个非常简单的应用程序，我正在尝试为错误设置一些默认错误页面`500`。

这是`WEB.XML`部分：

```
<error-page>
    <exception-type>404</exception-type>
    <location>/error.xhtml</location>
</error-page>

<error-page>
    <exception-type>500</exception-type>
    <location>/error.xhtml</location>
</error-page> 
```

即使存在 error.xhtml，在浏览器中我仍然会收到标准`HTTP Status 404 -`警告。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T13:06:55.677

`<exception-type>`应该指向 的子类的完整限定名[`java.lang.Exception`](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html)。例如

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/expired.xhtml</location>
</error-page> 
```

但是您所拥有的只是[HTTP 状态代码](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。你应该`<error-code>`改用。

```
<error-page>
    <error-code>500</error-code>
    <location>/error.xhtml</location>
</error-page> 
```

顺便说一句，我不会让 404 和 500 指向同一个错误页面。404 是“找不到页面”，通常是客户端自己的错误，而不是服务器的错误。获取一般错误页面而不是“找不到页面”会非常混乱。

# javascript - 模块模式 - 为什么将 JQuery 作为参数传入？

> ID：10296615
> 
> 赞同：7
> 
> 时间：2012-04-24T11:01:48.910
> 
> 标签：javascript, jquery

我想我了解模块模式，但为什么有些示例将 JQuery 作为参数传递，如下所示：

```
Namespace.AppName = (function ($) {
     // Code Here
})(jQuery); 
```

如果我不传入 JQuery，我仍然可以通过在模块内进行 $() 调用来很好地使用 Jquery 库。那么为什么有些人会这样做呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T11:04:48.657

这里的想法是你传递`jQuery`给`$`内部函数，确保`$`是 jQuery. 这通常用于保护使用的代码，`$`尤其是在使用 jQuery 以及使用`$`mootools 之类的其他库时。

* * *

例如，如果您在`<head>`

```
<!--load jQuery-->
<script src="jquery.js"></script>

<script>
    //"$" is jQuery
    //"jQuery" is jQuery 
</script>

<!--load another library-->
<script src="anotherlibrary.js"></script>

<script>
    //"$" is the other library
    //"jQuery" is jQuery 

    //out here, jQuery code that uses "$" breaks

    (function($){
        //"$" is jQuery
        //"jQuery" is jQuery (from the outside scope)

        //in here, jquery code that uses "$" is safe

    }(jQuery));

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:02:59.040

为了“安全”地使用 $。大多数开发人员更喜欢使用 '$' 而不是 jQuery。

将 $ 用作全局时，可能会与其他 JS 库发生冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:04:24.877

这样您就可以使用 $ 作为 jQuery 的快捷方式。如果您不这样封装它，这有时会与其他库发生冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:03:42.577

这是为了确保您的命名空间/范围使用 $ as`jQuery`而不是其他 JS 库，如 Prototype，它也使用 $。

# html - 格式化列表的水平列表，如何固定动态html的高度

> ID：10296616
> 
> 赞同：4
> 
> 时间：2012-04-24T11:01:51.860
> 
> 标签：html, css

我正在创建一个位于页面底部的站点地图类型的菜单，以便快速访问站点结构的前两个级别。但是，我在格式化列表时遇到了麻烦，因此它们在包装时可以整齐地显示。

这是我要达到的目标的图片： ![所需的页脚菜单布局](../Images/c16526c6a2706e6375ba1ff1e254b584.png)

但是，我最终得到的结果是这样的： ![格式错误的列表](../Images/a275826b70ff2120e10b7b53d2cfddc8.png)

这是简化以显示问题的代码，以及指向[JSFiddle的链接](http://jsfiddle.net/PV8Bq/)

```
<html lang="en">
<head>
    <style type="text/css">
        #footer-menu { 
            float:left; 
            background:#454545; 
            color:#FFFFFF; 
            width:850px;
            margin:50px auto 0 auto; 
            padding:10px 10px 2px 10px; 
            display:inline;
        }
        #footer-menu ul { 
            padding:0; 
            list-style-type:none; 
            left:auto; 
            overflow: auto; 
        }
        #footer-menu li { 
            margin:0 20px 5px 0; 
            padding-left:6px; 
            list-style-type:none; 
            float:left; 
            display:inline; 
            background:none; 
            position:relative; 
            font-family:Arial; 
            font-weight:bold; 
            border-left:1px solid #FFFFFF;
        }
        #footer-menu ul li ul {
            margin:5px 0 5px 0;
        }
        #footer-menu ul ul li {
            float:none; 
            padding:0; 
            margin:0 0 2px 0; 
            font-weight:normal; 
            display:block; 
            width:auto; 
            border:0;
        }
        #footer-menu a { 
            text-decoration: none; 
            color: white;
        }
        #footer-menu a:hover {
            text-decoration: underline; 
            color: white;
        }
    </style>
</head>
<body>
    <div id="footer-menu">
        <ul>
            <li><a href="#">List 1 Title is quite looooong</a>
                <ul>
                    <li><a href="#">List 1 Item 1</a></li>
                    <li><a href="#">List 1 Item 2</a></li>
                    <li><a href="#">List 1 Item 3</a></li>
                    <li><a href="#">List 1 Item 4</a></li>
                    <li><a href="#">List 1 Item 5</a></li>
                    <li><a href="#">List 1 Item 6</a></li>
                    <li><a href="#">List 1 Item 7</a></li>
                    <li><a href="#">List 1 Item 8</a></li>
                </ul>
            </li>
            <li><a href="#">List 2 Short title</a>
                <ul>
                    <li><a href="#">List 2 Item 1</a></li>
                    <li><a href="#">List 2 Item 2</a></li>
                    <li><a href="#">List 2 Item 3</a></li>
                    <li><a href="#">List 2 Item 4</a></li>
                </ul>
            </li>
            <li><a href="#">List 3 Title of average length</a>
                <ul>
                    <li><a href="#">List 3 Item 1</a></li>
                    <li><a href="#">List 3 Item 2</a></li>
                    <li><a href="#">List 3 Item 3</a></li>
                </ul>
            </li>
            <li><a href="#">List 4 with no sub items</a></li>
            <li><a href="#">List 5 Should wrap under list 1</a> 
                <ul>
                    <li><a href="#">List 2 Item 1</a></li>
                    <li><a href="#">List 2 Item 2</a></li>
                    <li><a href="#">List 2 Item 3</a></li>
                    <li><a href="#">List 2 Item 4</a></li>
                </ul>
            </li>
        </ul>
    </div>
</body>
</html> 
```

列表中的项目来自站点地图 XML 文件，通过脚本生成 HTML，列表将随着页面添加到站点而更改，因此我正在寻找一种不需要我手动调整高度的解决方案列表，以使其正确格式化。

是否可以使用 CSS 来修复整行列表的高度，以便任何包装列表从新行的左侧开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:15:45.770

检查这个[jsFiddle](http://jsfiddle.net/PV8Bq/3/)

在 Firefox 中完美运行。

改变了

```
#footer-menu li {
    margin:0 20px 5px 0;
    padding-left:6px;
    list-style-type:none;
    /*float:left;
      display:inline;
    */
    /*Added this */ 
    display:inline-table;

    background:none;
    position:relative;
    font-family:Arial;
    font-weight:bold;
    border-left:1px solid #FFFFFF;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:12:40.077

也许你可以使用`:nth-child`这个可能对你有帮助。像这样写：

```
#footer-menu > ul > li:nth-child(5){
    clear:both;
} 
```

检查这个[http://jsfiddle.net/PV8Bq/1/](http://jsfiddle.net/PV8Bq/1/)

但是 nth-child 在 IE 中不起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:25:17.043

检查这个[jsFiddle](http://jsfiddle.net/PV8Bq/10/)

我还清理了一点您的代码，并减少了边距以允许 4 个前块连续放置。

# axapta - 将链接数据源添加到查询时分组失败

> ID：10296617
> 
> 赞同：1
> 
> 时间：2012-04-24T11:01:52.537
> 
> 标签：axapta, x++, dynamics-ax-2009

我有以下代码在 Req Trans 表上构建查询，以按项目/站点向我显示合并数量；

```
query = new Query();
dsReqTrans = query.addDataSource(tablenum(ReqTrans));

dsReqTrans.addRange(fieldnum(ReqTrans, ReqPlanId)).value(_reqPlanId);
dsReqTrans.addRange(fieldnum(ReqTrans, RefType)).value(enum2str(_reqRefType));

dsReqTrans.addGroupByField(fieldnum(ReqTrans, ItemId));
dsReqTrans.addSelectionField(fieldnum(ReqTrans, Qty),  SelectionField::Sum);

dsInventDim = dsReqTrans.addDataSource(tablenum(InventDim));
dsInventDim.joinMode(JoinMode::InnerJoin);
dsInventDim.relations(false);
dsInventDim.addLink(fieldnum(ReqTrans, CovInventDimId), fieldnum(InventDim, InventDimId));

dsInventDim.addGroupByField(fieldnum(InventDim, InventSizeId));
dsInventDim.addGroupByField(fieldnum(InventDim, InventSiteId));

rangeInventSiteId = dsInventDim.addRange(fieldnum(InventDim, InventSiteId));
rangeInventSiteId.value(_parmSiteId); 
```

这很好用。我按项目/站点得到 qty 列的总和。

但是，如果我还想在 ItemGroupId 上添加一个范围。为此，我需要像这样链接到 InventTable；

```
dsInventTable = dsReqTrans.addDataSource(tablenum(InventTable));
dsInventTable.joinMode(JoinMode::InnerJoin);
dsInventTable.relations(false);
dsInventTable.addLink(fieldnum(ReqTrans, ItemId), fieldnum(InventTable, ItemId));

dsInventTable.addRange(fieldnum(InventTable, ItemGroupId)).value(_parmItemGroupId); 
```

当我添加此数据源时，指向 InventDim 的链接已断开。我得到仅按项目分组的所有站点的所有项目数量的总和，而不是按项目/站点分组。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:37:46.543

基本上你不能有两个内部连接到同一个数据源（你可以，但它不起作用）。

如果使用 AX 2012，您可以将`InventTable`数据源添加到`InventDim`：

```
dsInventTable = dsInventDim.addDataSource(tablenum(InventTable));
dsInventTable.joinMode(JoinMode::ExistsJoin);
dsInventTable.relations(false);
// OBS 3 arguments next:
dsInventTable.addLink(fieldnum(ReqTrans, ItemId), fieldnum(InventTable, ItemId), dsReqTrans.name()); 
dsInventTable.addRange(fieldnum(InventTable, ItemGroupId)).value(_parmItemGroupId); 
```

在早期版本中，您`InventTable`首先放置（请记住按一个字段分组`InventTable`）：

```
query = new Query(); 
dsInventTable = dsReqTrans.addDataSource(tablenum(InventTable)); 
dsInventTable.addGroupByField(fieldnum(InventTable, ItemId)); // You have to group/sum something
dsReqTrans = dsInventTable.addDataSource(tablenum(ReqTrans)); 
dsReqTrans.joinMode(JoinMode::InnerJoin); 
dsReqTrans.relations(false); 
dsReqTrans.addLink(fieldnum(InventTable, ItemId).fieldnum(ReqTrans, ItemId));
... 
```

# css - IE 中的 Margin-top -15px 使图标位于底部，而 -16px 使其位于顶部

> ID：10296622
> 
> 赞同：2
> 
> 时间：2012-04-24T11:02:14.713
> 
> 标签：css, internet-explorer, css-position

我想在输入右侧放置一个图标，使其像组合。我必须使用相对位置，因为它必须是完整的代码。我将编写一个 jQuery 插件并在任何地方使用它。

这是我的代码。Firefox 和 Chrome 可以正常显示，但 IE-9 有问题。如果我做图标`margin-top -15px`，它会有点底部，如果我做 -16px，它会进入输入的顶部。

我怎么解决这个问题？

```
<!DOCTYPE HTL>
<html>

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>

<body>
  <div style="width:50%; position:relative; top:0; left:0; height:0; background-color:#ccc;">
    <input class="rounded" type="text" style="width:100%;">
    <img src="https://placehold.it/77" style="position:relative; z-index:2; float:right; margin-top:-16px; padding-right:5px;" />
  </div>
</body>

</html>
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:44:25.910

你为什么不使用`top:-value;` 我认为它对你有用

如果你只想`margin-top`使用这个 ie9

`margin-top/*\**/:-16px\9;` 和你给的其他浏览器。

也许它会帮助你。

# javascript - KnockoutJS 的 contenteditable 绑定

> ID：10296625
> 
> 赞同：2
> 
> 时间：2012-04-24T11:02:36.603
> 
> 标签：javascript, html, data-binding, knockout.js, contenteditable

我目前正在尝试实现自定义 KnockoutJS 绑定以使 div 内容可编辑。作为一个例子，我将使用第一个教程在 knockoutJS 中的 ViewModel，并添加一个“编辑模式”标志：

JSBin：http: [//jsbin.com/ejugip/3/edit](http://jsbin.com/ejugip/3/edit)

视图模型代码：

```
function HelloWorldViewModel() {
    var self = this;
    self.isInEditMode = ko.observable(true);
    self.firstName = ko.observable('Bert');
    self.lastName = ko.observable('Berntington');
    self.fullName = ko.computed(function () {
        return self.firstName() + ' ' + self.lastName();
    });
} 
```

查看代码：

```
<fieldset id="HelloWorldView">  
    <legend>Hello World</legend>
    <p><input type="checkbox" data-bind="checked: isInEditMode" /> edit mode</p>
    <label>First name:</label>
    <div data-bind="contenteditable: isInEditMode, text: firstName"></div>
    <label>Last name:</label>
    <div data-bind="contenteditable: isInEditMode, text: lastName"></div>
    <label>Full name:</label>
    <div data-bind="text: fullName"></div>
</fieldset> 
```

到目前为止，这是我的绑定处理程序代码：

```
function makeEditable(element, editable) {
    $(element).attr('contenteditable', (editable) ? true : false);
    $(element).removeClass('Editable');
    if (editable) {
        $(element).addClass('Editable');
    }
}

ko.bindingHandlers.contenteditable = {
    init: function (element, valueAccessor) {},
    update: function (element, valueAccessor) {
        var editable = ko.utils.unwrapObservable(valueAccessor());
        makeEditable(element, editable);
    }
}; 
```

现在，我只是将 contenteditable 属性添加到元素和一个 css 类。

所以进入和离开编辑模式工作正常。仍然缺少的一件事是，在编辑 contenteditable 元素后 viewModel 得到更新。

使视图模型与我的可编辑元素同步的最佳方法是什么？我需要一个自己的自定义“文本：”绑定，还是有更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T19:18:40.157

前段时间我创建了一个基于 KO 的 contenteditable binding plus 编辑器，你或许可以从中获得一些灵感。

[https://github.com/madcapnmckay/Knockout-UI/blob/master/js/ui-editor.js](https://github.com/madcapnmckay/Knockout-UI/blob/master/js/ui-editor.js)

希望这可以帮助。

# wpf - ExpanderViewer selectionchanged 或 selectedItem (Windows Phone)

> ID：10296626
> 
> 赞同：0
> 
> 时间：2012-04-24T11:02:39.863
> 
> 标签：wpf, silverlight, windows-phone-7, silverlight-toolkit

我正在尝试将 ExpanderViewer 与绑定一起使用，我按照本[教程进行操作](http://www.windowsphonegeek.com/articles/Windows-Phone-Toolkit-ExpanderView-in-depth-Part2-Data-Binding)

现在我需要一个在点击 ExpanderViewer 项目之一时触发的事件。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:06:20.590

我正在使用这个：`<Controls:ExpanderView Expanded="ExpanderView_Expanded" />`

对于每个项目，您必须在数据模板中添加事件，例如：

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="CustomHeaderTemplate">
            <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}" Checked="CheckBox_Checked" Unchecked="CheckBox_Unchecked"/>
            <TextBlock Text="{Binding Name}" FontSize="{StaticResource PhoneFontSizeExtraLarge}" FontFamily="{StaticResource PhoneFontFamilySemiLight}"/>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

# javascript - jQuery 对话框是否默认显示为隐藏？

> ID：10296628
> 
> 赞同：5
> 
> 时间：2012-04-24T11:02:41.797
> 
> 标签：javascript, jquery

我在一个简单的典型用例中使用 jQuery 对话框：

在 Javascript 中：

```
$('myDialog').dialog({
    modal: true;
}); 
```

在 HTML 中：

```
<div id="myDialog" title="Dialog Title">
    Dialog contents here
</div> 
```

但是，我用来控制 div 的布局和外观的 CSS`myDialog`托管在我的本地计算机无法访问的服务器上（不要问为什么）。因此，在 Firebug 中，我看到 CSS 文件找不到文件的网络 404 错误。

当我在本地测试此对话框时，它显示得非常好。但是我刚刚注意到，在触发执行对话框调用的代码*之前*`myDialog`， div 的内容实际上显示在我的 HTML 页面上。

 *所以，这让我相信两件事之一：

*   默认情况下， jQuery 对话框的相应`<div>`元素是不可见/隐藏的；然而，浏览器找不到 CSS 文件的这种奇怪情况导致`<div>`在对话框甚至在屏幕上弹出之前就显示给用户；或者
*   默认情况下， jQuery 对话框的相应`<div>`元素是可见的，我必须采取措施在页面加载时隐藏它

**谁能告诉我这两个断言中哪一个是正确的？**

如果前一个断言是正确的，那么当我们将代码推送到我们的开发环境（它*确实*可以访问 CSS 文件）时，问题*应该会自行解决。*

 *如果后一个断言是正确的，那么如何`myDialog`在页面加载时隐藏 div？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T11:05:36.197

第二个或多或少是正确的。当页面加载时`<div>`是可见的，因为默认情况下`<div>`HTML 中的所有 s 都是可见的。jQuery 只是后来才出现的。

您应该简单地`<div>`默认隐藏，并`.dialog`决定何时显示它，例如：

CSS：

```
.hidden { display: none } 
```

HTML：

```
<div id="myDialog" class="hidden" title="Dialog Title">
    Dialog contents here
</div> 
```

如果您不这样做，那么如果对话框不应该在页面加载时立即打开，事情就会从“不受欢迎”恶化到“不可接受”。[**看一个例子**](http://jsfiddle.net/FDQzN/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-16T13:33:09.927

您可以将 autoOpen 选项设置为 false。

```
$('foo').dialog({
    autoOpen: false,
    title: 'I\'m hidden',
    width: 500,
    height: 500
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:05:51.883

你的第二个断言是正确的。调用`.dialog()`div，立即显示对话框**

# c++ - 如何防止Visual Studio在调试时打开异常标头？

> ID：10296630
> 
> 赞同：1
> 
> 时间：2012-04-24T11:02:49.283
> 
> 标签：c++, visual-studio, debugging

每当我调试我的程序并引发异常时，Visual Studio 都会打开一个标准库的标头，向我显示发生错误的位置。那个未来让我非常抓狂，因为我每次调试时都必须关闭那个标准文件，否则我看不到我的代码。

有没有办法消除那种烦人的黄色“颈部疼痛”的未来？

# encoding - 编码的表单数据

> ID：10296634
> 
> 赞同：0
> 
> 时间：2012-04-24T11:02:59.503
> 
> 标签：encoding

我处理作为分隔字符串通过电子邮件发送的表单数据。最近，一个额外的领域被证明是令人困惑的。

我收到 base64 编码的字符串，我在拆分之前对其进行解密。从任何 Windows 电子邮件实用程序查看，编码字段如下所示：

```
http://xxx/preloaddocument.aspx?instanceid=1971900&isreadonly=true&internal=false 
```

解密并“直接”查看后，该字段如下所示：

```
http://xxx/preloaddocument.aspx[?Ý[?ÙZYLNMÌNL   ?\Ü?XYÛ?O]YI?[\??[Y?[ÙOÝ\?? 
```

控制字符导致不同的观众以不同的方式看到它。

不管为什么查询字符串的形成方式与 URL 的其余部分不同，关于如何处理这个问题的任何想法？翻译后的查询字符串应该有 50 个字符，而编码（？）版本有 56 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T23:40:33.417

这故事太好了，讲不完。

在发现上面评论中提到的 jquery.base64.js 后，我在我的 SharePoint 开发站点中使用它来替换微妙地失败的 jquery.crypt.js 库。工作完美，然后我将相关代码移至生产环境。彻底失败。

现在这是有趣的部分。我的开发站点引用的库和文件与生产站点完全相同。因此，我的 JavaScript 引用对于两个站点都是相同的。但是，尽管相同的代码在开发中完美运行，但在生产中显然找到了该库，但无法提供任何方法。我为此工作了几个小时，然后又回到了我用这个替换了一个 Base64 库的事实——为什么不尝试另一个呢？当然，这并不是说它有任何意义。

于是我找到了 webtoolkit.base64.js。到那时，它在开发中的工作毫无意义，但从生产代码中引用它也有效，所以我现在可以报告真正的成功。

# javascript - IE 中 iframe 的颜色选择器问题

> ID：10296646
> 
> 赞同：1
> 
> 时间：2012-04-24T11:03:56.523
> 
> 标签：javascript, iframe

我有一个可内容编辑的 div，您可以在其中写一些东西，然后单击按钮，打开一个 iframe。有一个颜色选择器，通过它可以更改内容字体颜色。

它适用于 FF 和 Chrome。我的问题是它在 IE 中不起作用。问题是当我选择要更改颜色的内容然后单击 iframe 时，内容已失去焦点，因此无法更改字体颜色。请给我这个问题的解决方案。

# java - Android 异常（不受信任的服务器证书）：带有服务器身份验证的 https XML 请求

> ID：10296647
> 
> 赞同：1
> 
> 时间：2012-04-24T11:03:57.360
> 
> 标签：java, android, xml, httpclient, inputstream

在我的 android 应用程序中，我必须读取存储在服务器中的 XML 文件。由于这是一个安全的网页 [SSL(https)]，要访问`https://serverAddress/path/`XML 文件所在的位置（），通常需要用户名/密码验证

以下是我用来阅读和获取 XML 流的代码。但是它在尝试执行`HttpResponse httpResponse = httpClient.execute(httpGet);`语句时总是会出现异常。异常说`Not trusted server certificate`。

`<uses-permission android:name="android.permission.INTERNET" />`还在Manifest 文件中添加了 Internet 访问权限

如果 XML 文件存储在不需要任何身份验证的地方，那么它可以正常工作。我到处搜索，但没有找到任何可以做到这一点的例子。如果有人可以指导这个过程，我将不胜感激。提前致谢...！！！！

```
 try
   {
         Log.v("State","Started...");

         HttpClient httpClient = new DefaultHttpClient();
         HttpGet httpGet = new HttpGet("https://serverAddress/path/MyXMLFile.xml");
         httpGet.addHeader(BasicScheme.authenticate(new UsernamePasswordCredentials("username", "password"),HTTP.UTF_8, false));
         HttpResponse httpResponse = httpClient.execute(httpGet);
         InputStream xmlInputStream = httpResponse.getEntity().getContent();
         Toast.makeText(getApplicationContext(), this.convertStreamToString(xmlInputStream), Toast.LENGTH_LONG).show();

         Log.v("State","Finish...");
    }
    catch(Exception e)
    {
        Log.v("State",e.getMessage().toString());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:15:48.107

这不是`http`问题`https`- 您正在使用安全连接。我也遇到了很多麻烦。[作为一个快速修复，您可以使用这个不可替代的帖子](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)让您的客户信任所有证书。

稍后考虑只信任适当的证书。

**编辑**：因为我知道 SO 用户有多挑剔。是的，信任所有证书是不好的做法，但这可以在 3 分钟内完成，并且您可以测试其余代码。永远不要忘记这是潜在的安全漏洞，您应该切换到只信任指定的证书。

# javascript - 如何使用 JavaScript 禁用链接按钮

> ID：10296651
> 
> 赞同：0
> 
> 时间：2012-04-24T11:04:05.977
> 
> 标签：javascript, asp.net

我正在尝试禁用链接按钮，但没有运气！我尝试了所有可能的解决方案，但是我不能限制用户点击该链接按钮。最终用户应该不能多次点击链接按钮。一键就可以了！按钮必须马上去！我怎样才能做到这一点？我的按钮在 ModalPopupExtender 上，它是一个**“付款”**按钮，因此图像用户单击该按钮不止一个进行多次付款:(请帮助我！

我的解决方案与此类似：

```
function returnFalse() {
     return false;
}

function disableLinkButton(clientID) {
     document.getElementById(clientID).disabled = "disabled";
     document.getElementById(clientID).onclick = returnFalse;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:19:20.147

以为我会把我的解决方案扔在那里：

```
$('a.btn').click(function() {
    var self = $(this);
    setTimeout(function() { self.attr('href', 'javascript:void(0);'); }, 10);
    return true;
}); 
```

这在 IE10 中对我来说很好，但我不明白为什么它在旧版本中也不起作用。

如果您正在使用异步回发，并且您的 UpdatePanel 还包含您不希望用户疯狂点击的按钮，那么下面是我的解决方案，因为 jQuery 'live' 功能不起作用：

```
$(function() {
    function bindButtonDisabler() {
        $('a.btn').click(function() {
            var self = $(this);
            setTimeout(function() { self.attr('href', 'javascript:void(0);'); }, 10);
            return true;
        });
    }

    bindButtonDisabler(); // Initial bind on DOM ready.

    $(window).load(function() { // Ensure re-bind after postback (optional)
        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(bindButtonDisabler);
    });
}); 
```

希望有人觉得它有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:06:49.107

你可以这样做：

```
function disableLink(id) {
   document.all[id].removeAttribute('href');
}​ 
```

HTML：

```
<a id='link1' href="javascript:disableLink('link1');">Click me</a> 
```

（或）试试这个：

```
 document.getElementById("#<%=LinkButton.ClientID%>").attr("disabled", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:08:12.853

返回 false 应该可以。试试这个：

```
function disableLinkButton(clientID) {
 document.getElementById(clientID).disabled = "disabled";
 document.getElementById(clientID).onclick = return returnFalse;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:08:18.047

你可以尝试这样的事情，给你一个想法：

```
document.getElementById(clientID).onclick = function() {
   /* process payment */
   this.onclick = function(){};
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T11:11:54.320

想要这样的东西。

```
 document.getElementById(clientID).setAttribute("disabled", "true"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-03T15:29:37.487

我真的很想表明链接被禁用，我稍微修改了@shousper 的代码。

```
$('a.btn').click(function() {
    var self = $(this);
    setTimeout(function() { self.fadeTo("fast", .5).removeAttr("href"); }, 1);
    return true;
});; 
```

我用它来防止多次点击信用卡表格，它工作得很好。

# c# - 将文本文件的编码从 ANSI 更改为 UTF8，而不会影响 C# 中文件的任何字符！

> ID：10296655
> 
> 赞同：1
> 
> 时间：2012-04-24T11:04:20.963
> 
> 标签：c#, windows

谁能帮我吗？我尝试了很多不同的方法，但我没有得到想要的结果。我只想将现有文本 [.txt] 文件的编码从 ANSI 更改为 UTF8，其中包含 ö、ü 等字符。当我通过在编辑模式下打开该文本文件然后 FILE=>SAVE AS 手动执行此操作时，它在编码列表中显示 ANSI。使用它，我可以将其编码从 ANSI 更改为 UTF8，在这种情况下它不会更改任何内容/字符。但是在使用 CODE 时，它不起作用。

==>我曾经通过以下代码实现这一目标的第一种方式：

```
if (!System.IO.Directory.Exists(System.Windows.Forms.Application.StartupPath + "\\Temp"))
{
    System.IO.Directory.CreateDirectory(System.Windows.Forms.Application.StartupPath + "\\Temp");
}
string destPath = System.Windows.Forms.Application.StartupPath + "\\Temp\\temporarytextfile.txt";

File.WriteAllText(destPath, File.ReadAllText(path, Encoding.Default), Encoding.UTF8); 
```

==> 我使用的第二种选择：

```
using (Stream fileStream = new FileStream(path, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
{
    using (Stream destStream = new FileStream(destPath, FileMode.Create, FileAccess.Write, FileShare.ReadWrite))
    {
        using (var reader = new BinaryReader(fileStream, Encoding.Default))
        {
            using (var writer = new BinaryWriter(destStream, Encoding.UTF8))
            {
                var srcBytes = new byte[fileStream.Length];
                reader.Read(srcBytes, 0, srcBytes.Length);
                writer.Write(srcBytes);

            }
        }
    }
} 
```

==> 我使用的第三种选择：

```
System.IO.StreamWriter file = new System.IO.StreamWriter(destPath, true, Encoding.Default);
using (StreamReader sr = new StreamReader(path, Encoding.UTF8, true))
{
    String line1;
    while ((line1 = sr.ReadLine()) != null)
    {
        file.WriteLine(line1);
    }
}

file.Close(); 
```

但不幸的是，上述解决方案都不适合我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T11:09:16.880

ANSI 的问题在于它不是一种特定的编码，它只是“某些 8 位编码是创建它的系统的默认值”的术语。

如果文件是在同一个系统上创建的，并且默认编码没有改变，你可以用`Encoding.Default`它来读取它，所以你的第一个和第三个版本都可以工作。（您的第二个版本只是复制文件而不做任何更改。）否则您必须确切知道使用了哪种编码。

此示例使用 windows-1250 代码页：

```
File.ReadAllText(path, Encoding.GetEncoding(1250)) 
```

有关可用编码的列表，请参阅[Encoding 类的文档。](http://msdn.microsoft.com/en-us/library/86hf4sb8.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-13T10:15:40.800

我也有同样的需要。这是我如何进行的：

```
 int Encode(string file, Encoding encode)
    {
        int retour = 0;
        try
        {
            using (var reader = new StreamReader(file))
            {
                if (reader.CurrentEncoding != encode)
                {
                    String buffer = reader.ReadToEnd();
                    reader.Close();
                    using (StreamWriter writer = new System.IO.StreamWriter(file, false, encode))
                    {
                        writer.Write(buffer);
                        writer.Close();
                    }
                    message = string.Format("Encode {0} !", file);
                    retour = 2;
                }
                else retour = 1;
            }
        }
        catch(Exception e)
        {
            message = string.Format("{0} ?", e.Message);
        }
        return retour;
    }

    /// <summary>
    /// Change encoding to UTF8
    /// </summary>
    /// <param name="file"></param>
    /// <returns></returns>
    public int toUTF8(string file)
    {
        return Encode(file, Encoding.UTF8);
    }

    public int toANSI(string file)
    {
        return Encode(file, Encoding.Default);
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T11:11:17.300

您是否尝试过以下方法：

[http://msdn.microsoft.com/en-us/library/system.text.encoding.convert%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.text.encoding.convert%28v=vs.71%29.aspx)

```
using System;
using System.Text;
namespace ConvertExample
{
   class ConvertExampleClass
   {
      static void Main()
      {
         string unicodeString = "This string contains the unicode character Pi(\u03a0)";

         // Create two different encodings.
         Encoding ascii = Encoding.ASCII;
         Encoding unicode = Encoding.Unicode;

         // Convert the string into a byte[].
         byte[] unicodeBytes = unicode.GetBytes(unicodeString);

         // Perform the conversion from one encoding to the other.
         byte[] asciiBytes = Encoding.Convert(unicode, ascii, unicodeBytes);

         // Convert the new byte[] into a char[] and then into a string.
         // This is a slightly different approach to converting to illustrate
         // the use of GetCharCount/GetChars.
         char[] asciiChars = new char[ascii.GetCharCount(asciiBytes, 0, asciiBytes.Length)];
         ascii.GetChars(asciiBytes, 0, asciiBytes.Length, asciiChars, 0);
         string asciiString = new string(asciiChars);

         // Display the strings created before and after the conversion.
         Console.WriteLine("Original string: {0}", unicodeString);
         Console.WriteLine("Ascii converted string: {0}", asciiString);
      }
   }
} 
```

# html - html注释框剪切文本而不换行

> ID：10296658
> 
> 赞同：-1
> 
> 时间：2012-04-24T11:04:28.653
> 
> 标签：html, css

![在此处输入图像描述](../Images/d6a44ed38fcd71852e3e4a97d0190ea3.png)

当我插入超过设置宽度（600px）的评论时，文本将被截断（参见上面的图片链接）而不是换行。我正在使用 html 评论框。评论框的样式是：

```
 #HCB_comment_box div.comment {
  border-top:1px solid #fff;
  width: 600px;

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:06:24.427

使用自动换行属性

```
#HCB_comment_box div.comment {
   word-wrap: break-word;
} 
```

[演示](http://jsfiddle.net/R3y2Q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:08:04.260

```
#HCB_comment_box div.comment {
word-wrap: break-word;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:08:27.067

这是正常行为。你已经插入了一个非常日志的词，它是一个词......你会期待什么？）如果你在那里插入几个空格，它会有所帮助）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:16:37.047

嘿，你可以在你的 CSS 属性中定义

使用自动换行

```
#HCB_comment_box div.comment {
  border-top:1px solid #fff;
  width: 600px;
word-wrap: break-word;
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T11:17:43.190

使用 word-wrap:break-word ，因为 word-wrap 属性允许长单词被破坏并换行到下一行。

查看结果：[http ://www.w3schools.com/cssref/tryit.asp?filename=trycss3_word-wrap](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_word-wrap)

# jakarta-mail - 使用 javamail api 的 smtp 连接失败？

> ID：10296660
> 
> 赞同：0
> 
> 时间：2012-04-24T11:04:31.010
> 
> 标签：jakarta-mail

每当我尝试连接到 smtp 主机时，它会显示连接失败，并在我的本地交换服务器上的端口 25 上响应 -1，但我能够连接到 gmail smtp 主机以从我使用以下代码的 gmail 发送电子邮件。

```
 Properties props = System.getProperties();
        props.put("mail.smtp.host", "localexchange.server.address");
        props.put("mail.from", "emailid");
        Session session = Session.getInstance(props, null);

        try {
            MimeMessage msg = new MimeMessage(session);
            msg.setFrom();
            msg.setRecipients(Message.RecipientType.TO,
                              "emailid");
            msg.setSubject("JavaMail hello world example");
            msg.setSentDate(new Date());
            msg.setText("Hello, world!\n");
            Transport.send(msg);
        } catch (MessagingException mex) {
            System.out.println("send failed, exception: " + mex);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:02:39.660

首先检查您的 SMTP 服务器端口是否对您的系统开放。

您可以通过 Telnet 命令检查这一点

Windows---start----run----cmd---type 'Telnet (SMTP SERVER IP) (PORT)' 回车

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T22:08:55.323

`mail.smtp.debug`通过将属性设置为 来获取实际的 SMTP 会话调试文本`true`。您可以从命令提示符读取调试输出，也可以将其设置为输出到文件。

检查您的身份验证方法是否被允许。在它说它`AUTH`应该具有允许的身份验证选项（GSSAPI、DIGEST-MD5、PLAIN、LOGIN）之后。

如果它没有到达`AUTH`您可能使用了错误的端口。通常：

*   25 用于 SMTP
*   465 用于 SSL
*   587 用于 TLS

如果您发布调试输出，我们可能会提供更多提示。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T17:08:31.340

[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html)提供[了调试连接问题](http://www.oracle.com/technetwork/java/javamail/faq/index.html#condebug)的技巧。你试过了吗？

# java - 使用 Velocity 生成基于 HTML 的电子邮件

> ID：10296667
> 
> 赞同：5
> 
> 时间：2012-04-24T11:05:05.690
> 
> 标签：java, css, velocity

我尝试本教程[http://www.java2s.com/Code/Java/Velocity/UseVelocitytogenerateHTMLbasedemail.htm](http://www.java2s.com/Code/Java/Velocity/UseVelocitytogenerateHTMLbasedemail.htm) 但是，当我添加 css 时，它看起来没有执行。

```
<HTML>
<HEAD>
  <TITLE>Pet Store Sale!</TITLE>
  <style type="text/css">
    body    {
            margin: 0 0 0 0;
            padding: 0 0 0 0;
            text-align: center; 
            background-color: #FFF;
            border-top: 3px solid #CCC;
            }

    #container  {
                position: relative;
                width: 860px;
                height: 1600px;
                margin: 84 auto 0 auto;
                padding: 0 0 0 0;
                background-color: #FFF;
                }

    p       {
            font-family: times, Times New Roman, times-roman, georgia, serif;
            color: #444;
            margin: 0 0 0 0;
            padding: 0 0 0 0;
            text-align: center;
            }

    .woodtwo        {
                    font-size: 22px;
                    line-height: 46px;
                    letter-spacing: -1px;
                    }

    .eyebrow        {   
                    font-size: 19px;
                    line-height: 29px;
                    }

    .caps           {
                    font-size: 14px;
                    line-height: 20px;
                    text-transform: uppercase;
                    }

    .copyone        {
                    font-size: 16px;
                    line-height: 20px;
                    }

    #line           {
                    border-bottom: 1px solid #CCC;
                    width: 748px;
                    margin: 10 0 20 56;
                    }

    #break          {
                    height: 30px;
                    }

    a:link          { color: #B95E27; text-decoration: none; } 
    a:visited       { color: #B95E27; text-decoration: none; }
    a:active        { color: #1A69A1; text-decoration: none; } 
    a:hover         { color: #888; text-decoration: none;}

    .grey           { color: #888; }

    .smallcaps      { font-size: 88%; }

</style>
</HEAD>
<BODY>

<div id="container">
    <p class="caps"><a href="">From Pet Store Sale</a></p>
    <div id="line"></div>
    <p class="eyebrow">
        <span class="grey">*</span>T<span class="smallcaps">HANK YOU FOR JOINING </span>P<span class="smallcaps">ET</span> S<span class="smallcaps">TORE</span> S<span class="smallcaps">ALE</span> A<span class="smallcaps">PPLICATION</span><span class="grey">*</span>
    </p>
    <p class="copyone">
        <i>You received this email because your registration process in Pet Store Sale is successful.<br/>
        To Confirm your registration, please visit this link <a href ="$link">Confirmation Link</a>.<br/>
        Your username : $username<br/>
        Password : $password<br/>
        If you have any questions about Application, please send an email to <a href="mailto:admin@store.com">admin@store.com</a></i> 
        <br><br><b>THANK YOU</b>
    </p>
    <div id="break"></div>

    <p class="woodtwo">
        <a href="">GETTING STARTED</a>
    <div id="line"></div>
    <div id="line"></div>
</div>

</BODY>
</HTML> 
```

我也试过

```
<link rel="stylesheet" href="./style/css/emailFormat.css" type="text/css"  media="screen" /> 
```

但它也不起作用。如何在此页面上添加 css 的正确方法。谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T04:47:21.000

电子邮件客户端会忽略 CSS 类。如果您使用的是 Outlook Express 等独立客户端，`div`则 s 也将无法识别（不依赖于`float:left`）。

我建议您更改您的 HTML 页面，例如 -

1.  把所有东西都丢在外面`<body>...</body>`
2.  使用`<table>`代替`<div>`
3.  不要使用`<style>`标签来定义样式类，或者使用 .css 文件来加载样式。`style="...."`而是在`<td>`/`<table>`容器中使用内联 css 。

希望这可以帮助您进行电子邮件模板设计。

# excel - Excel 2007 中的自定义页码（页脚）

> ID：10296672
> 
> 赞同：1
> 
> 时间：2012-04-24T11:05:22.527
> 
> 标签：excel, excel-2007

我有一个单标签电子表格。当我进行打印预览时，我看到总共 10 页。如果我插入页脚并使用页码，我会看到从第 1 页到第 10 页。是否可以自定义此页码系统？我想查看从第 4 页到第 10 页显示的页码。前 3 页不应显示页码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:15:51.960

There are three ways I'm aware of to go about it.

1.  Put your first 3 pages on a different worksheet (tab). Start the numbering of the other pages at 4.
2.  Use a cell for the footer.
3.  Use VBA to alter the page footers before printing the workbook.

It just depends on what's easiest for you.

# matlab - xlswrite 精度 matlab

> ID：10296676
> 
> 赞同：0
> 
> 时间：2012-04-24T11:05:41.703
> 
> 标签：matlab

我有一个双值的二维数组。例如;

```
0.6074    0.1388    0.6711
0.9967    0.2230    0.7232
0.0424    0.5830    0.5044 
```

我需要将其写入具有 '%2.2f' 格式的 Excel 文件，如下所示

```
0.61    0.14    0.67
1.00    0.22    0.72
0.04    0.58    0.50 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:55:15.810

你可以四舍五入：

```
round(My2dArray .* 100)./100 
```

# java - 有效地输入准备好的语句

> ID：10296677
> 
> 赞同：-1
> 
> 时间：2012-04-24T11:05:45.943
> 
> 标签：java, prepared-statement

我在我的代码中使用 PreparedStatement，因为我有很多特殊字符要插入到数据库中。

我的一些表有很多列，所以一次分配一个参数似乎有点过头了。指定参数是否有更好/更有效的方法？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:22:53.160

我不完全清楚你的问题是什么。

必须在 PreparedStatement 中单独设置参数——这是因为您需要告诉 PreparedStatement 如何在数据库中表示不同的 Java 对象。

但是，您可以轻松编写一个允许您传入 args 的 Object[] 的类/方法，然后可以通过适当的索引和对象处理将其添加到 PreparedStatement 中。

类似于以下内容：

```
private static void setParameters(PreparedStatement stmt, Object[] args){
  for (int i=0; i<args.length; i++){
    setArgument(stmt, i+1, args[i]);
  }
}

private static void setArgument(PreparedStatement stmt, int index, Object arg){
  if (arg instanceof MyObject){
    stmt.set[X](index, handleMyObject(arg));
  }
} 
```

# ms-access - 强制逗号格式，忽略文化

> ID：10296679
> 
> 赞同：0
> 
> 时间：2012-04-24T11:05:54.803
> 
> 标签：ms-access, vba

我需要将`single`值格式化为字符串，其中逗号分隔符是一个点。但是，由于我的计算机使用德语设置运行，我总是得到类似`1,23`而不是`1.23`. 我试过了

```
Format(factors(1) / 100, "##.##") 
```

和

```
FormatNumber(factors(1) / 100, NumDigitsAfterDecimal:=2, GroupDigits:=vbFalse), 
```

但两者我仍然得到德语格式。我如何“覆盖”这个？

我也读过[这个](https://stackoverflow.com/questions/7923648/how-do-i-change-the-culture-from-within-excel-vba "这个")；这是否意味着我根本无法更改这些设置？

我正在使用 Access 2007。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:46:31.467

你对一个字符串说，所以这可能会有所帮助。这是很久以前的事了，所以... :)

```
Dim IntPart, DecPart
''Format for this locale
cur = (Format(cur, "#,###.00"))
''This locale uses stop as decimal separator
''Change the "." to the decimal separator for your locale
If InStr(1, cur, ".") > 0 Then
    DecPart = Mid(cur, InStr(1, cur, ".") + 1)
Else
    DecPart = "00"
End If

''Ditto, change the stop.
IntPart = Mid(cur, 1, InStr(1, cur, ".") - 1)
''This locale uses comma for thousands separator, 
''so change the "," to the thousands separator for your locale
''and ="." to the required replacement separator
Do While InStr(1, IntPart, ",") > 0
    Mid(IntPart, InStr(1, IntPart, ","), 1) = "."
Loop
''This set the decimal separator to a comma,
''choose the separator required.
EUCurrency = IntPart & "," & DecPart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T20:33:23.287

如果您的值小于或等于 21,474,836.47，那么您可以采用这种简短优雅的方式（我假设 factor(1) 是您在数组中的单项）：

```
factor(1) = Fix(factor(1)) & "." & Format(Abs(Fix(factor(1) * 100) Mod 100), "00") 
```

显然，即使 Microsoft 声明相反，您也不能修改 Long 值 ((2 ^ 31) - 1) 范围之外的数字，因此如果您的数字大于 Long 范围 /100，您必须这样做另一种方式; 见这里：[http](http://www.access-programmers.co.uk/forums/showthread.php?t=219244) ://www.access-programmers.co.uk/forums/showthread.php?t=219244 。因此，如果您的值可能大于 21 等等，那么您有两个选择。有人以与 Remou 在他的回答中类似的方式执行此操作，在 InStr 中寻找一个点或逗号；优点是结果总是完美的，缺点是它不干净并且可能需要更长的时间才能运行。另一种方法如下：

```
factor(1) = Fix(factor(1)) & "." & Format(Abs(Fix(factor(1) * 100) - (Fix(factor(1)) * 100)), "00) 
```

优点是它很干净（尽管出于速度原因，您可能希望将 fix(factor(1)) 存储在变量中），但它并不准确。例如，如果我使用最后一个公式将值 214732133333,56999 作为参数给出，它会返回 214732133333.56，这是我想要的值（我不是四舍五入的数字）。但是，如果我将值 214732133333.569999 作为参数提供，它会返回 214732133333.57，这不是我想要的值。显然，在数字大于 long 的计算中，Access 中的舍入变得有问题。

关于本地设置的改变，我是不会做的，但是我相信你可以用SetLocaleInfo来做（谷歌说如果你想看看怎么做，你需要改变LOCALE_SDECIMAL的值）。但这是有风险的，如果你搞砸了或者如果出现问题并且例程的执行停止，你可能会无意中让机器配置错误。您在链接中读到的是关于非 Unicode 语言的区域设置，这是一种完全不同的动物，即使您手动执行此操作，您也必须重新启动计算机。

# java - 在 JOGL2 中绘制图像

> ID：10296685
> 
> 赞同：1
> 
> 时间：2012-04-24T11:06:21.810
> 
> 标签：java, opengl, jogl

我想绘制一个图像，但无论我做什么，它都无法正常工作。我用于渲染的代码：

```
BufferedImage bi = null;
int w = 0;
int h = 0;
try {
    bi = ImageIO.read(new File("win.png"));
    w = bi.getWidth();
    h = bi.getHeight();
} catch (Exception e) {
    System.out.println(e.getMessage());
}

final GL2 gl = gLDrawable.getGL().getGL2();

        WritableRaster raster = 
            Raster.createInterleavedRaster (DataBuffer.TYPE_BYTE,
                    w,
                    h,
                    4,
                    null);
        ComponentColorModel colorModel=
            new ComponentColorModel (ColorSpace.getInstance(ColorSpace.CS_sRGB),
                    new int[] {8,8,8,8},
                    true,
                    false,
                    ComponentColorModel.TRANSLUCENT,
                    DataBuffer.TYPE_BYTE);
        BufferedImage dukeImg = 
            new BufferedImage (colorModel,
                    raster,
                    false,
                    null);

        Graphics2D g = dukeImg.createGraphics();
        g.drawImage(bi, null, null);
        DataBufferByte dukeBuf =
            (DataBufferByte)raster.getDataBuffer();
        byte[] dukeRGBA = dukeBuf.getData();
        ByteBuffer bb = ByteBuffer.wrap(dukeRGBA);

        bb.position(0);
        bb.mark();
    gl.glTexParameteri(GL2.GL_TEXTURE_2D, GL2.GL_TEXTURE_MAG_FILTER, GL2.GL_LINEAR);
        gl.glTexParameteri(GL2.GL_TEXTURE_2D, GL2.GL_TEXTURE_MIN_FILTER, GL2.GL_LINEAR);

    gl.glEnable(GL2.GL_TEXTURE_2D);
    gl.glTexEnvf(GL2.GL_TEXTURE_ENV, GL2.GL_TEXTURE_ENV_MODE, GL2.GL_DECAL);
        gl.glBindTexture(GL2.GL_TEXTURE_2D, 13);
        gl.glPixelStorei(GL2.GL_UNPACK_ALIGNMENT, 1);

        gl.glTexImage2D (GL2.GL_TEXTURE_2D, 0, GL2.GL_RGBA, w, h, 0, GL2.GL_RGBA, 
                GL2.GL_UNSIGNED_BYTE, bb);

        int left = 100;
        int top = 100;

    gl.glBegin(GL2.GL_QUADS); 
        gl.glTexCoord2d (0, 0);
        gl.glVertex3f  (left,top, 0);
        gl.glTexCoord2d(1,0);
        gl.glVertex3f  (left + w, top, 0);
        gl.glTexCoord2d(1,1);
        gl.glVertex3f  (left + w, top + h, 0);
        gl.glTexCoord2d(0,1);
        gl.glVertex3f  (left, top + h, 0);
        gl.glEnd ();    
        gl.glFlush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:07:17.103

得到它的工作。 [http://wiki.tankaar.com/index.php?title=Displaying_an_Image_in_JOGL_%28Part_1%29](http://wiki.tankaar.com/index.php?title=Displaying_an_Image_in_JOGL_%28Part_1%29) 只把GL换成GL2就行了！

# php - PHP中的数组顺序

> ID：10296689
> 
> 赞同：1
> 
> 时间：2012-04-24T11:06:42.587
> 
> 标签：php, arrays, multidimensional-array

我有一个数组。我想改变他们的顺序。这是一个我只想使用数组的数组。我只需要使用数组来执行此操作。

```
 Array
    (
        [Abhijit Singh] => Array
            (
                [Physics] => Array
                    (

                        [Assignment] => Array
                            (
                                [StudentName] => Abhijit Singh
                                [FatherName] => Mr. Pawanjit Singh
                                [housename] => Aitchison
                                [RollNo] => 11556
                                [ExamMonth] => APRIL
                                [SubjectName] => Physics
                                [MarksObtained] => 10
                                [MaxMarks] => 100
                                [ExamType] => Assignment
                                [Grade] => 
                            )

                        [Wednesday Tests] => Array
                            (
                                [StudentName] => Abhijit Singh
                                [FatherName] => Mr. Pawanjit Singh
                                [housename] => Aitchison
                                [RollNo] => 11556
                                [ExamMonth] => APRIL
                                [SubjectName] => Physics
                                [MarksObtained] => 1
                                [MaxMarks] => 100
                                [ExamType] => Wednesday Tests
                                [Grade] => 
                            )

                        [Examinations] => Array
                            (
                                [StudentName] => Abhijit Singh
                                [FatherName] => Mr. Pawanjit Singh
                                [housename] => Aitchison
                                [RollNo] => 11556
                                [ExamMonth] => APRIL
                                [SubjectName] => Physics
                                [MarksObtained] => 100
                                [MaxMarks] => 100
                                [ExamType] => Examinations
                                [Grade] => 
                            )

                        [Projects] => Array
                            (
                                [StudentName] => Abhijit Singh
                                [FatherName] => Mr. Pawanjit Singh
                                [housename] => Aitchison
                                [RollNo] => 11556
                                [ExamMonth] => APRIL
                                [SubjectName] => Physics
                                [MarksObtained] => 10
                                [MaxMarks] => 100
                                [ExamType] => Projects
                                [Grade] => 
                            )

                    )

                [History] => Array
                    (
                        [Examinations] => Array
                            (
                                [StudentName] => Abhijit Singh
                                [FatherName] => Mr. Pawanjit Singh
                                [housename] => Aitchison
                                [RollNo] => 11556
                                [ExamMonth] => APRIL
                                [SubjectName] => History
                                [MarksObtained] => 20
                                [MaxMarks] => 100
                                [ExamType] => Examinations
                                [Grade] => 
                            )

                        [Projects] => Array
                            (
                                [StudentName] => Abhijit Singh
                                [FatherName] => Mr. Pawanjit Singh
                                [housename] => Aitchison
                                [RollNo] => 11556
                                [ExamMonth] => APRIL
                                [SubjectName] => History
                                [MarksObtained] => 20
                                [MaxMarks] => 100
                                [ExamType] => Projects
                                [Grade] => 
                            )

                        [Grades] => Array
                            (
                                [StudentName] => Abhijit Singh
                                [FatherName] => Mr. Pawanjit Singh
                                [housename] => Aitchison
                                [RollNo] => 11556
                                [ExamMonth] => APRIL
                                [SubjectName] => History
                                [MarksObtained] => 0
                                [MaxMarks] => 0
                                [ExamType] => Grades
                                [Grade] => 20
                            )

                    )

                [Hindi] => Array
                    (
                        [Projects] => Array
                            (

                [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Hindi
                            [MarksObtained] => 12
                            [MaxMarks] => 100
                            [ExamType] => Projects
                            [Grade] => 
                        )

                    [Examinations] => Array
                        (
                            [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Hindi
                            [MarksObtained] => 12
                            [MaxMarks] => 100
                            [ExamType] => Examinations
                            [Grade] => 
                        )

                )

            [Econimics] => Array
                (
                    [Wednesday Tests] => Array
                        (
                            [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Econimics
                            [MarksObtained] => 2
                            [MaxMarks] => 100
                            [ExamType] => Wednesday Tests
                            [Grade] => 
                        )

                    [Examinations] => Array
                        (
                            [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Econimics
                            [MarksObtained] => 20
                            [MaxMarks] => 100
                            [ExamType] => Examinations
                            [Grade] => 
                        )

                )

            [Chemsitry] => Array
                (
                    [Grades] => Array
                        (
                            [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 0
                            [MaxMarks] => 0
                            [ExamType] => Grades
                            [Grade] => 20
                        )

                    [Assignment] => Array
                        (
                            [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 20
                            [MaxMarks] => 100
                            [ExamType] => Assignment
                            [Grade] => 
                        )

                    [Wednesday Tests] => Array
                        (
                            [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 20
                            [MaxMarks] => 100
                            [ExamType] => Wednesday Tests
                            [Grade] => 
                        )

                    [Examinations] => Array
                        (
                            [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 20
                            [MaxMarks] => 100
                            [ExamType] => Examinations
                            [Grade] => 
                        )

                    [Projects] => Array
                        (
                            [StudentName] => Abhijit Singh
                            [FatherName] => Mr. Pawanjit Singh
                            [housename] => Aitchison
                            [RollNo] => 11556
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 20
                            [MaxMarks] => 100
                            [ExamType] => Projects
                            [Grade] => 
                        )

                )

            [Geo] => Array
                (
                    [Grades] => Array
                        (
                            [Grade] => NULL
                        )

                    [Assignment] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Wednesday Tests] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Examinations] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Projects] => Array
                        (
                            [MarksObtained] => NULL
                        )

                )

        )
 [Vaishali Bhalla] => Array
        (
            [Chemsitry] => Array
                (
                    [Examinations] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Examinations
                            [Grade] => 
                        )

                    [Projects] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Projects
                            [Grade] => 
                        )

                    [Grades] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 0
                            [MaxMarks] => 0
                            [ExamType] => Grades
                            [Grade] => 
                        )

                    [Assignment] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Assignment
                            [Grade] => 
                        )

                    [Wednesday Tests] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Chemsitry
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Wednesday Tests
                            [Grade] => 
                        )

                )

            [History] => Array
                (
                    [Assignment] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => History
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Assignment
                            [Grade] => 
                        )

                    [Wednesday Tests] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => History
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Wednesday Tests
                            [Grade] => 
                        )

                    [Examinations] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => History
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Examinations
                            [Grade] => 
                        )

                    [Projects] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => History
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Projects
                            [Grade] => 
                        )

                    [Grades] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => History
                            [MarksObtained] => 0
                            [MaxMarks] => 0
                            [ExamType] => Grades
                            [Grade] => 
                        )

                )

            [Physics] => Array
                (
                    [Projects] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Physics
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Projects
                            [Grade] => 
                        )

                    [Grades] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Physics
                            [MarksObtained] => 0
                            [MaxMarks] => 0
                            [ExamType] => Grades
                            [Grade] => 
                        )

                    [Assignment] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Physics
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Assignment
                            [Grade] => 
                        )

                    [Wednesday Tests] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Physics
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Wednesday Tests
                            [Grade] => 
                        )

                    [Examinations] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Physics
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Examinations
                            [Grade] => 
                        )

                )

            [Econimics] => Array
                (
                    [Grades] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Econimics
                            [MarksObtained] => 0
                            [MaxMarks] => 0
                            [ExamType] => Grades
                            [Grade] => 
                        )

                    [Assignment] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Econimics
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Assignment
                            [Grade] => 
                        )

                    [Wednesday Tests] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Econimics
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Wednesday Tests
                            [Grade] => 
                        )

                    [Examinations] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Econimics
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Examinations
                            [Grade] => 
                        )

                    [Projects] => Array
                        (
                            [StudentName] => Vaishali Bhalla
                            [FatherName] => Mr. Atul Bhalla
                            [housename] => 
                            [RollNo] => 10794
                            [ExamMonth] => APRIL
                            [SubjectName] => Econimics
                            [MarksObtained] => 
                            [MaxMarks] => 100
                            [ExamType] => Projects
                            [Grade] => 
                        )

                )

            [Hindi] => Array
                (
                    [Grades] => Array
                        (
                            [Grade] => NULL
                        )

                    [Assignment] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Wednesday Tests] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Examinations] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Projects] => Array
                        (
                            [MarksObtained] => NULL
                        )

                )

            [Geo] => Array
                (
                    [Grades] => Array
                        (
                            [Grade] => NULL
                        )

                    [Assignment] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Wednesday Tests] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Examinations] => Array
                        (
                            [MarksObtained] => NULL
                        )

                    [Projects] => Array
                        (
                            [MarksObtained] => NULL
                        )

                )

        )

) 
```

该数组的长度可能会有所不同。现在，我想按字母顺序重新排列主题名称的顺序。

有人知道如何做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:12:51.713

您应该真正研究对象，您在数组中保存了复杂的数据结构，这提供了难以维护且不直观的代码。

这是一个关于php中对象的教程

[http://php.net/manual/en/language.oop5.php](http://php.net/manual/en/language.oop5.php)

如果您坚持使用数组（并且没有充分的理由这样做），您可以使用 php 的内置排序功能

[http://php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

或者

[http://www.php.net/manual/en/function.natsort.php](http://www.php.net/manual/en/function.natsort.php)

取决于你到底要完成什么。

这两个页面都提供了使用示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:53:29.760

试试这个：

```
foreach ($arr as $key => $val) {
    ksort($val);
    $temp[$key] = $val;
} 
```

# apache-flex - android平板电脑中的flex移动应用程序存储目录在哪里

> ID：10296696
> 
> 赞同：0
> 
> 时间：2012-04-24T11:07:04.740
> 
> 标签：apache-flex, flex4, tablet, android, flex-mobile

我使用 SDK4.1 在 Flex4 中使用 flex 移动应用程序在 flex 中创建了一个移动/平板电脑应用程序。在应用程序中，我将一些数据从应用程序目录复制到应用程序存储目录。它已成功复制并且工作正常。现在我想知道在哪里可以找到该应用程序的应用存储目录的位置。当我跟踪 app-storage 目录路径时，它显示“data/data/air.applicationname/local store/”，所以它在哪里： - 在 SD 卡中 - 在手机内存中

请给我一个想法以找出应用程序存储的物理位置。任何网络链接或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T13:58:56.113

它在手机内部存储中

文件夹

`"/data/app/air.applicationname/local store"`

`data/app`是android上非系统/手动安装应用程序的默认文件夹

`air.applicationname`是您的应用程序的名称 `local store`是 flex 创建的用于存储数据的文件夹...

您无法手动查看/使用此文件夹或使用文件资源管理器，而无需生根您的设备...无需生根即可访问此文件夹的唯一方法是通过应用程序本身...

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T10:10:23.110

我一直在`Android`设备上调试我的应用程序，并且我的 db 文件的父级`nativePath`处于打开状态：

```
/data/data/air.com.package.of.project/com.package.of.project/Local Store/ 
```

# php - 在字符串中检测多个mysql_real_escape_string？

> ID：10296700
> 
> 赞同：0
> 
> 时间：2012-04-24T11:07:29.703
> 
> 标签：php, mysql-real-escape-string

我正在使用具有多个 SQL 注入风险的旧系统。为了一起防止这个问题，我想转义所有`$_POST`数据`$_GET`。问题是脚本本身也会转义。现在我想知道是否有可能检测一个字符串是否已经被转义。

也欢迎任何其他解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:12:45.160

太糟糕了，无论如何你都得不到保护。
因为，尽管 php 人普遍存在误解，

## 逃避！=保护

事实上，您即将实现一个与臭名昭著的功能等效的自制`magic_quotes`功能，该功能被证明无法有效防止注射。

因此，尽管转义，您最终会得到一些数据双重转义，而其他数据仍然不安全（因为转义！=安全）

不幸的是，这种“魔杖”式的解决方案永远不会奏效。
您必须重构代码，保护某些查询。这是唯一的方法。

请记住 - 转义不是保护的同义词。它只是[整套规则的一部分](https://stackoverflow.com/a/2995163/285587)

# c# - ASP.NET 成员资格数据库在 SQL Server 实例中不起作用

> ID：10296708
> 
> 赞同：0
> 
> 时间：2012-04-24T11:08:29.143
> 
> 标签：c#, asp.net, sql, sql-server, asp.net-membership

具有成员控制的网络应用程序。默认情况下，成员数据库 (ASPNETDB.mdf) 在 APP_Data 文件夹中创建。它从那里工作正常，但我不得不将数据库移动到 SQL 服务器实例。

我将 MDF 和 LDF 文件复制到另一个文件夹，并将其作为新数据库附加到我的 SQL 服务器实例中。然后我将 web.config 文件中的连接字符串更改为指向新位置。

但问题是新的数据库位置不起作用。我总是收到登录失败异常。我确信连接字符串中提供的凭据是正确的，因为相同的凭据在不同的应用程序中工作。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:21:43.957

从 .net 命令行运行`aspnet_regsql.exe`以注册数据库以支持您需要的不同提供者，包括成员资格、角色或个人资料。

[http://msdn.microsoft.com/en-us/library/ms229862(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms229862(v=vs.80).aspx)

# android - 如何截取屏幕截图并以编程方式共享

> ID：10296711
> 
> 赞同：28
> 
> 时间：2012-04-24T11:08:50.387
> 
> 标签：android, screenshot

我正在 Android 中制作一个应用程序，我必须在其中截取我的一项活动的屏幕截图并将其作为附件邮寄。

我想截取当前页面的屏幕截图，然后通过电子邮件、蓝牙、Twitter 或 Facebook 分享。

我的代码如下：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
  MenuInflater inflater = getMenuInflater();
  inflater.inflate(R.menu.menuselected1, menu);
  return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

  switch (item.getItemId()) {
    case R.id.ScreenShot:

    try {
        takeScreenShot(this);
    }
    catch (Exception e) {
        System.out.println(e);
    }

    return true;

    default:
    return super.onOptionsItemSelected(item);
  }
}

private static void savePic(Bitmap b, String strFileName) {
  FileOutputStream fos = null;
  try {
      fos = new FileOutputStream(strFileName);
      if (null != fos) {
        b.compress(Bitmap.CompressFormat.PNG, 90, fos);
        System.out.println("b is:"+b);
        fos.flush();
        fos.close();
      }
  } catch (FileNotFoundException e) {
          e.printStackTrace();
  } catch (IOException e) {
          e.printStackTrace();
  }
}

public static void shoot(Activity a,String b) {
  //savePic(takeScreenShot(a), "sdcard/xx.png");
  savePic(takeScreenShot(a), b);
}

private static Bitmap takeScreenShot(Activity activity) {
  View view = activity.getWindow().getDecorView();
  view.setDrawingCacheEnabled(true);
  view.buildDrawingCache();
  Bitmap b1 = view.getDrawingCache();
  Rect frame = new Rect();
  activity.getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);
  int statusBarHeight = frame.top;
  int width = activity.getWindowManager().getDefaultDisplay().getWidth();
  int height = activity.getWindowManager().getDefaultDisplay()
               .getHeight();

  // Bitmap b = Bitmap.createBitmap(b1, 0, 25, 320, 455);
  Bitmap b = Bitmap.createBitmap(b1, 0, statusBarHeight, width, height
                                 - statusBarHeight);
  view.destroyDrawingCache();
  return b;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-24T11:22:20.907

试试这个来截取当前活动的截图：

安卓 2.2：

```
private static Bitmap takeScreenShot(Activity activity)
{
    View view = activity.getWindow().getDecorView();
    view.setDrawingCacheEnabled(true);
    view.buildDrawingCache();
    Bitmap b1 = view.getDrawingCache();
    Rect frame = new Rect();
    activity.getWindow().getDecorView().getWindowVisibleDisplayFrame(frame);
    int statusBarHeight = frame.top;

    DisplayMetrics displaymetrics = new DisplayMetrics(); 
    mContext.getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);

    int width = displaymetrics.widthPixels;
    int height = displaymetrics.heightPixels;

    Bitmap b = Bitmap.createBitmap(b1, 0, statusBarHeight, width, height  - statusBarHeight);
    view.destroyDrawingCache();
    return b;
}
private static void savePic(Bitmap b, String strFileName)
{
    FileOutputStream fos = null;
    try
    {
        fos = new FileOutputStream(strFileName);
        if (null != fos)
        {
            b.compress(Bitmap.CompressFormat.PNG, 90, fos);
            fos.flush();
            fos.close();
        }
    }
    catch (FileNotFoundException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-24T11:16:01.607

如果“当前页面的屏幕截图”是指“我的一项活动的屏幕截图”，您可以安排[将您的渲染`Views`到 bitmap-backed `Canvas`，然后从 bitmap 保存图像](http://androidfragments.blogspot.com/2012/02/in-app-screenshots.html)。

如果“当前页面的屏幕截图”是指“其他人活动的屏幕截图”，那么出于明显的隐私和安全原因，Android SDK 不支持。有根设备用户可以使用多种技术来截取屏幕截图。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-10T18:59:07.323

## **1.创建分享按钮**

我想在操作栏中使用我的，所以我创建了一个 share_menu.xml 文件：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <item
        android:id="@+id/share_item"
        app:showAsAction="always|withText"
        android:title="Share"
        android:icon="@drawable/share_icon"
        android:actionProviderClass=
            "android.widget.ShareActionProvider" />
</menu> 
```

这会在操作栏中添加一个带有我的 share_icon 和文本的按钮。

## **2\. 将分享菜单添加到您的活动（或片段）中**

我在片段中执行此操作，因此我将下面的代码添加到我的片段文件中。如果您在活动中，则`public boolean onCreateOptionsMenu(Menu menu)`改为覆盖。

```
@Override
public void onCreateOptionsMenu(
        Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.share_menu, menu);
} 
```

如果您使用片段执行此操作，则`onCreate()`必须添加：

```
setHasOptionsMenu(true); 
```

## **3.设置按钮动作/回调/onclick**

这就是分享的开始。

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == R.id.share_item){
            Bitmap bm = screenShot(this.getView());
            File file = saveBitmap(bm, "mantis_image.png");
            Log.i("chase", "filepath: "+file.getAbsolutePath());
            Uri uri = Uri.fromFile(new File(file.getAbsolutePath()));
            Intent shareIntent = new Intent();
            shareIntent.setAction(Intent.ACTION_SEND);
            shareIntent.putExtra(Intent.EXTRA_TEXT, "Check out my app.");
            shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
            shareIntent.setType("image/*");
            shareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
            startActivity(Intent.createChooser(shareIntent, "share via"));
        }
        return super.onOptionsItemSelected(item);
    } 
```

请注意，这调用了两个魔术方法：

**截屏（）：**

```
private Bitmap screenShot(View view) {
    Bitmap bitmap = Bitmap.createBitmap(view.getWidth(),view.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bitmap);
    view.draw(canvas);
    return bitmap;
}

private static File saveBitmap(Bitmap bm, String fileName){
    final String path = Environment.getExternalStorageDirectory().getAbsolutePath() + "/Screenshots";
    File dir = new File(path);
    if(!dir.exists())
        dir.mkdirs();
    File file = new File(dir, fileName);
    try {
        FileOutputStream fOut = new FileOutputStream(file);
        bm.compress(Bitmap.CompressFormat.PNG, 90, fOut);
        fOut.flush();
        fOut.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return file;
} 
```

## **重要的**

对于您的`AndroidManifest.xml`，您必须添加：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

否则屏幕截图将不会保存，gmail 会认为您正在尝试附加一个空文件。

此外，很多 SO 答案都说要使用`"*/*"`for `shareIntent.setType()`，但这会导致 facebook 共享出现问题，因此最好将其保留为`"image/*"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-04T10:16:45.193

带有权限检查的 Kotlin 完整解决方案代码：

1- 使用这个不错的库来截取带有 java / Kotlin / Rx 功能的屏幕截图，添加库依赖项： [InstaCapture github 链接](https://github.com/tarek360/Instacapture)

```
 implementation "com.github.tarek360:instacapture:2.0.1" 
```

2- 必须检查所有 android 版本的兼容性权限：

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M && checkSelfPermission(
                Manifest.permission.WRITE_EXTERNAL_STORAGE
            ) != PackageManager.PERMISSION_GRANTED
        ) { // Needs permission so request it
            DeviceUtil.showAlertMsg(this, GeneralDicModel.shareMsgScreenShot!!)
            requestPermissions(
                arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE),
                PERMISSIONS_REQUEST_WRITE_EXTERNAL_STORAGE
            )   //callback  result to onRequestPermissionsResult
        } else { //Has got the permission before or doesn't need
            screenShotAndShareIt()
        } 
```

3-检查许可结果：

```
 override fun onRequestPermissionsResult(
    requestCode: Int, permissions: Array<out String>,
    grantResults: IntArray
) {
    when (requestCode) {
        PERMISSIONS_REQUEST_WRITE_EXTERNAL_STORAGE -> {
            if (grantResults.isNotEmpty() && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                screenShotAndShareIt()
            } else {
                //  toast("Permission must be granted in order to save scrrenshot file")
            }
        }
    }
} 
```

4- Func 调用截图并按意图分享：

```
 fun screenShotAndShareIt() {
    Instacapture.capture(this, object : SimpleScreenCapturingListener() {
    override fun onCaptureComplete(bitmap: Bitmap) {
    val state = Environment.getExternalStorageState()
            if (Environment.MEDIA_MOUNTED == state) {
                val path: String = Environment.getExternalStorageDirectory().toString()  
                val picDir = File(path.plus("/myPic"))
                if (!picDir.exists()) {
                    picDir.mkdir()
                }
                var bitmapScreenShot = bitmap
                val fileName = "screenshot" + ".jpg"
                val picFile = File(picDir.path.plus("/" + fileName))
                try {
                    picFile.createNewFile()
                    val picOut = FileOutputStream(picFile)
                    bitmapScreenShot =
                        Bitmap.createBitmap(bitmapScreenShot, 0, 0, bitmapScreenShot.width, bitmapScreenShot.height)
                    val saved: Boolean = bitmapScreenShot.compress(Bitmap.CompressFormat.JPEG, 100, picOut)
                    if (saved) {
                        Log.i(
                            TAG,
                            "ScreenShotAndShareIt : Image saved to your device Pictures " + "directory! + ${picFile.absolutePath}"
                        )
                    } else {
                        Log.i(TAG, "ScreenShotAndShareIt Error on Save! + ${picFile.absolutePath}")
                    }
                    picOut.close()

                    // share via intent
                    val intent: Intent = Intent(android.content.Intent.ACTION_SEND)
                    intent.type = "image/jpeg"
                    intent.putExtra(Intent.EXTRA_STREAM, Uri.parse(picFile.absolutePath))
                    startActivity(Intent.createChooser(intent, "Sharing"))
                } catch (e: Exception) {
                    Log.i(TAG, "ScreenShotAndShareIt Error catch : " + e.printStackTrace())
                }
            } else {
                //Error
                Log.i(TAG, "ScreenShotAndShareIt Error Environment.MEDIA_MOUNTED == state : " )
            }
 }
 }) 
```

5-声明这个变量：

```
val PERMISSIONS_REQUEST_WRITE_EXTERNAL_STORAGE = 100 
```

6- 不要忘记将此权限添加到 AndroidManifest.xml：

```
 <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-01-17T16:28:53.797

这就是我捕获屏幕并共享它的方式。如果您有兴趣，请看一看。

```
public Bitmap takeScreenshot() {
  View rootView = findViewById(android.R.id.content).getRootView();
  rootView.setDrawingCacheEnabled(true);
return rootView.getDrawingCache();
 } 
```

以及将位图图像保存到外部存储的方法：

```
public void saveBitmap(Bitmap bitmap) {
  File imagePath = new File(Environment.getExternalStorageDirectory() +       "/screenshot.png");
  FileOutputStream fos;
  try {
  fos = new FileOutputStream(imagePath);
  bitmap.compress(CompressFormat.JPEG, 100, fos);
 fos.flush();
 fos.close();
 } catch (FileNotFoundException e) {
Log.e("GREC", e.getMessage(), e);
} catch (IOException e) {
Log.e("GREC", e.getMessage(), e);
}} 
```

查看更多：[https ://www.youtube.com/watch?v=LRCRNvzamwY&feature=youtu.be](https://www.youtube.com/watch?v=LRCRNvzamwY&feature=youtu.be)

# java - 如何使（加载）图像覆盖面板

> ID：10296712
> 
> 赞同：0
> 
> 时间：2012-04-24T11:08:55.740
> 
> 标签：java, gwt

在我的应用程序中，我有一些交互式小部件，但是在从服务器加载数据时，这些小部件必须在加载完成后停用并再次激活。我不想让小部件不可见或不激活每个字段/按钮。最好的解决方案是一个透明面板，其中心或角落的加载图像在加载时覆盖小部件 - 但如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:27:28.853

这是一些简单的代码开始。我在一些应用程序中使用过它，但它是在 GWT 2.0 中使用的，也许他们现在得到了更好的东西。您可能可以用动画 Gif 图像替换标签，只需将面板添加到根面板就可以了。

```
import com.google.gwt.user.client.Event.NativePreviewEvent;
import com.google.gwt.user.client.Event.NativePreviewHandler;
import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.SimplePanel;

public class GlassPanel extends SimplePanel implements NativePreviewHandler {

    private Label text;

    public GlassPanel() {
        setStyleName("glass-panel");
        add(text = new Label());
    }

    public void setText(String text) {
        this.text.setText(text);
    }

    @Override
    public void onPreviewNativeEvent(NativePreviewEvent event) {
        event.consume();
        event.cancel();
    }
} 
```

CSS：

```
.glass-panel {
    background-color: black;
    opacity: 0.7;
    filter: alpha(opacity=70);
    z-index: 4000;
    position: absolute;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T10:24:30.260

不要忘记添加“mozOpacity”，除了“不透明度”和“过滤器”（或者现在已经过时了吗？只需加上我的两美分）

# database-design - 数据库模式帮助多个产品和供应商

> ID：10296713
> 
> 赞同：1
> 
> 时间：2012-04-24T11:08:56.287
> 
> 标签：database-design, data-modeling

我希望有人可以帮助我解决我正在尝试实现的数据库模式。它基于销售移动合同和网络提供商的网络连接。合同由许多可能会或可能不会出售网络合同的分销商预先填写，每个分销商的价格也不同。

```
Distributors
Name                Address
Distributor 1       address1
Distributor2        address2

Networks
Name
Orange
O2
Vodafone

Tariffs
Network         Tariff          Minutes
Orange      Business 600        600 Mins
Orange      Business 100        100 Mins
O2          Everyday 100        200 Mins
O2          Everyday 100        100 Mins

Devices
Name        Make        
Apple       Iphone
Samsung     Galaxy

Bolt Ons
Network Description
Orange      Web 500mb
Orange      Unlimited Texts
O2          Web 250Mb
O2          Unlimited Texts 
```

```

命令
- 正好 1 个经销商
- 正好 1 个网络
- 正好 1 关税
- 0 个或更多设备
- 0个或更多螺栓
经销商
- 0 个或更多订单
- 1 个或多个网络
- 1 个或多个关税
o 独特的关税成本
- 1 个或多个螺栓
o独特的成本螺栓
- 1 个或多个设备
o 唯一设备成本
网络
- 0 个订单
- 0 个或更多经销商
- 1 个或多个关税
- 0 个或多个 BoltOns
- 0 个或更多设备
关税
- 0 个或更多订单
- 0 个或更多经销商
- 正好 1 个网络
- 0 个或多个 BoltOns
- 0 台设备
螺栓
- 0 个或更多订单
- 0 个或更多经销商
- 正好 1 个网络
- 0 个或多个关税
- 0 个或更多设备
设备
- 0 个或更多订单
- 0 个或更多经销商
- 0 个或更多网络
- 0 关税
- 1 个或多个螺栓

```

我想出了 2 个模式，但我真的不满意。主要是因为分销商可能无法提供来自网络的所有产品。关税、设备和配件的价格也因经销商而异。我希望对模式方法有一些建议？

非常感谢

抢

编辑-------- 根据我的评论，我提出了以下 shema。我添加了以下假设

设备和 Bolton 非常相似，可以在产品表中：

我们需要运行的查询类型是根据用户在 6-12 个月前可能支付的费用生成发票 - 分销商的价格可能会每月变化。

每个分销商每个网络销售的电话数量等...

*   分销商的关税相同，但每个分销商的价格和佣金会发生变化。

对以下架构有任何评论吗？

```
[Distributors] 
    [Dist_ID] PK
    [Name],
    [Address]

[Network]
    [Network_ID]  PK,
    [Name],

[Tarrif]
    [TariffID] PK
    [Name],
    [Minutes] ,
    [OtherMinutes] ,
    [Texts] ,
    [Data],
    [Term] ,
    [Active] BIT,

[TariffsByDistributor] 
    [TariffsDistributorID] PK
    [DistID]    FK
    [TariffID]  FK
    [RevShare],
    [Commision],
    [Cost],
    [Active]

[Product_Type] 
    [Product_Type_ID]  PK,
    [Name],
    [Details],

[TariffsByNetwork]
    [Network_ID]  PK,
    [TariffID]    PK,

[Order] (
    [Order_Id]      PK,
    [Customer_Id],
    [Date Sold],
    [PaymentStatus],
    [PaymentStatusDate],

[TariffOrders] (
    [Order_Id]          PK,
    [TariffsDistributorID]  PK,
    [RevenueShare],
    [Commision],
    [Cost],

[Products] (
    [Product_Id]    PK
    [Product_Type_ID] FK,
    [Name],
    [Manufacturer],
    [Colour] 
    [Picture],
    [Active] BIT,

[ProductByDistributor]
    [ProductsByDistributorID] PK,
    [Dist_ID]    FK,
    [Product_Id] FK,
    [RevShare],
    [Commision],
    [Cost],
    [Active],

[ProductsOrder] 
    [Order_Id]          PK,
    [ProductsByDistributorID]   PK,
    [RevenueShare],
    [Commision],
    [Cost],

[Products_Network] 
    [Network_ID]    PK,
    [Product_Id]    PK, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:15:26.033

您在完成架构的正确轨道上，因为您正在识别分销商和产品、分销商和定价之间的关系。

我首先添加一个 DistributorTariff 表，该表与 Distributor 和 Tariff 都有关系。然后，寻找其他限制，例如关税价格等，并在那里建立表格。

如果你知道所有的关系规则，你就可以先把它写在纸上。如果您分享所有规则，我可以帮助您进一步设计。

**关于您的架构**

这看起来不错的样子。在这个阶段规范化你的数据库可能看起来额外的复杂性将在以后让你头疼。我会提出以下建议：

*   标准化您的表名是否为复数。例如，您有单数“订单”但有复数“产品”。我个人的偏好是使用单数，但这是另一次讨论。
*   将“ProductByDistributor”重命名为“DistributorProduct”（如果采用这种方式，则为复数）。
*   使用连接表名称，我倾向于发现“OwnerItem”格式读起来更好。例如，“OrderProduct”与“ProductOrder”相对。
*   您可以摆脱您的表格“TariffOrders”和“ProductOrders”。代替这些，您需要添加一个“OrderPart”或“OrderItem”表。这将具有链接到“Order”、“DistributorProduct”和“DistributorTariff”的外键。这消除了收入分成、佣金和成本数据的重复。
*   更正您对“关税”一词的拼写错误。以后会惹恼你的！;o)

希望有帮助。我很乐意详细说明任何问题。

# php - php：检查字符串是否以数组中的元素结尾的最佳方法？

> ID：10296715
> 
> 赞同：4
> 
> 时间：2012-04-24T11:09:11.183
> 
> 标签：php, string

```
$arr1 = array ("llo" "world", "ef", "gh" ); 
```

检查是否`$str1`以某个字符串结尾的最佳方法是什么`$arr1`？答案真/假很好，虽然知道 $arr1 元素的数量作为答案（如果为真）会很好。

例子：

```
$pos= check_end("world hello");//$pos=0; because ends with llo
$pos= check_end("hello world");//$pos=1; because ends with world. 
```

有没有比在 for 语句中比较所有元素 of`$arr1`和结尾更好/更快/特殊的方法`$str1`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T11:18:51.677

从我的头顶上掉下来......

```
function check_end($str, $ends)
{
   foreach ($ends as $try) {
     if (substr($str, -1*strlen($try))===$try) return $try;
   }
   return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T11:40:05.263

请参阅PHP中的[startsWith() 和 endsWith() 函数](https://stackoverflow.com/questions/834303/php-startswith-and-endswith-functions)`endsWith`

用法

```
$array = array ("llo",  "world", "ef", "gh" );
$check = array("world hello","hello world");

echo "<pre>" ;

foreach ($check as $str)
{
    foreach($array as $key => $value)
    {
        if(endsWith($str,$value))
        {
            echo $str , " pos = " , $key , PHP_EOL;
        }
    }

}

function endsWith($haystack, $needle)
{
    $length = strlen($needle);
    if ($length == 0) {
        return true;
    }

    $start  = $length * -1; //negative
    return (substr($haystack, $start) === $needle);
} 
```

输出

```
world hello = 0
hello world = 1 
```

# php - PHP可以将图像写入公共文件夹中的文件，但不能写入子文件夹中

> ID：10296718
> 
> 赞同：0
> 
> 时间：2012-04-24T11:09:17.020
> 
> 标签：php, permissions, gd

我正在尝试使用以下方法将 gd 图像写入磁盘：

```
imagejpeg($gdimage, dirname(__FILE__) . $path . $fileName); 
```

*   如果我设置`$path = '/public/'`图像被创建。
*   如果一组`$path = '/public/images/'`我收到此警告并且未创建图像：

    警告：imagejpeg（）：无法打开“/Users/david/Documents/Developer/NetbeansProjects/aem.davidcasillas.es/public/images/498x282_v1_Golf-LaLlorea.jpg”进行写作：/Users/david 中没有此类文件或目录/Documents/Developer/Netbeans Projects/aem.davidcasillas.es/ModuloGijon.php 在第 943 行

权限设置为：

*   公共文件夹：`drwxr-xr-x 77 david admin 2618 24 abr 12:58 public`
*   图片文件夹：`drwxr-xr-x 6 david admin 204 24 abr 10:38 images`

所以我看不出为什么我不能在图像文件夹中创建图像。我在公共场合尝试过其他子文件夹，但总是遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:12:21.397

将子文件夹的权限更改为可写。

```
chmod -R 777 public 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:28:23.453

我找到了解决方案。我正在使用 Netbeans 并设置将项目从我的 Documents 文件夹复制到 MAMP 安装文件夹。我在 MAMP 安装下创建目录，但不在我的 Documents 文件夹项目下。如果您检查警告路径，您将看到它指向我的 Documents 文件夹，而不是 /Applications/MAMP 文件夹。

# axapta - 绕过 AOT 查询中的有效时间状态

> ID：10296720
> 
> 赞同：2
> 
> 时间：2012-04-24T11:09:19.877
> 
> 标签：axapta, dynamics-ax-2012

我在 Dynamics AX 2012 中有一个 AOT 查询，它由 HcmWorker 和 HcmEmployment 表（等等）组成。我的问题是，当我创建报告（不是 SSRS）或以其他方式使用此查询时，我只会在 HcmEmployment 中获取具有有效时间状态的员工。

我想获取在此表中有记录的所有员工，即使他们目前没有工作 - 而且只有一次。最佳解决方案是从 HcmEmployment 获取当前就业的记录（如果存在），否则获取开始日期在“现在”之前的最后一条记录。但是，我可以接受与最后开始日期结合的解决方案。

我更喜欢这样的解决方案，我不需要每次使用它时都添加代码（即在 AOT 查询中解决它）。

我尝试在代码查询中设置 validTimeStateDateTimeRange 属性，如果员工有多个工作，则会导致重复行。

如果我将 HcmEmployment 数据源设置为 ExistsJoin 和 firstOnly，那么它可以在视图中工作，但不适用于报告（仍然重复记录）:( 不能在报告上使用此视图，因为用户需要能够在 DefaultDimension 上进行过滤来自 HcmEmployment。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T07:42:51.383

我“解决”了自己的问题……

由于某种原因，报告未正确继承`ExistsJoin`AOT 查询的属性 ( )。再次在报表上删除查询，一些编译和查询`init`方法中的以下代码后，它可以工作:) 不再有重复记录！

```
this.query().validTimeStateDateTimeRange(DateTimeUtil::minValue(), 
                                         DateTimeUtil::maxValue()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:19:20.207

在我看来，您有相互矛盾的选择：

> 我想获取在此表中有记录的所有员工，即使他们目前没有工作

和：

> 用户需要能够从 HcmEmployment 过滤 DefaultDimension

如果用户过滤就业，如果未选择就业，员工是否应该被打印？

你可能想要的：

*   如果不过滤`HcmEmployment`禁用该数据源（属性`Enabled`）。

*   如果过滤`HcmEmployment`使用存在连接。

在这两种情况下，通过独立选择找到 maxof(ValidFrom)、maxof(ValidTo)。

看看[这个答案](https://stackoverflow.com/a/1097783/4509)，看看如何通过代码编辑查询属性。

或者制作两份报告，一份有和没有查询到`HcmEmployment`.

# jquery - 通过 event keyup 在自动完成中使字体粗细正常

> ID：10296721
> 
> 赞同：1
> 
> 时间：2012-04-24T11:09:30.137
> 
> 标签：jquery, events, if-statement, autocomplete

我想模仿谷歌建议列表，所以我有一个自动完成的建议，但如果它与输入的值不匹配，我也想**加粗字体，这是一个例子：** [JsBin](http://jsbin.com/epikim/27/edit)

如您所见，我为 CSS 设置了**粗体**以作为建议，如果它与值相同，我会尝试使其正常：

```
if($('#input').val() == $('.ui-autocomplete li a').text()){
       $('.ui-autocomplete li a').css("font-weight", "normal");
} 
```

到目前为止没有运气。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:22:57.473

`$('.ui-autocomplete li a').text()`不是比较任何*一个*元素，也不是单独比较它们中的每一个，而是这似乎连接了所有可能性，因此当您键入“gho”时，比较看起来像这样：

```
if ("gho" == "ghost riderghost huntersghost rider 2ghost adventuresghost rider spirit of vengeanceghanaghbghetto hikesghostbusters 3ghost") {

} 
```

另一个本质上相同的问题是

```
$('.ui-autocomplete li a').css("font-weight", "normal"); 
```

将更改所有找到的匹配项的样式。我怀疑这两种行为都不是你想要的。

你可能想要的是这样的：

```
$("#input").on('keyup', function(e){
  var val = $('#input').val();
  $.each($('.ui-autocomplete li a'), function() {
    if (val == $(this).text()) {
      $(this).css("font-weight", "normal");
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:08:11.890

试试这个

```
$("#input").on('keyup', function(e){
      var val = $('#input').val();
      $.each($('.ui-autocomplete li a'), function() {
        if (val == $(this).text()) {
          $(this).addClass('fontWeight');
        }
      });
}); 
```

添加css应该是

```
 .ui-autocomplete li a {
    font-weight: bold;
  }
  .fontWeight{
    font-weight:normal !important;
  } 
```

# java - 如何 在 Android 中处理标签

> ID：10296729
> 
> 赞同：3
> 
> 时间：2012-04-24T11:10:15.553
> 
> 标签：java, android, httpclient

我已经在网上搜索了一段时间，只是无法确定这个问题的正确答案。长话短说，我正在从网上检索一个网页以用作我的收件箱。我迫切需要在每个“消息”之间跳过行，所以我
在我的 php.ini 中添加了标签。它在网络浏览器中完美运行，但在我的 Android 应用程序中，我实际上可以将
标签视为纯文本。只是试图将它们读作“下一行/新行”。有任何想法吗？

我的方法代码：

```
public String getInbox(String where){

        BufferedReader in = null;
        String data = null;
        try{

            HttpClient client = new DefaultHttpClient();
            URI website = new URI("http://example.com/getInbox.php?where="+where);

            HttpPost post_request = new HttpPost();
            post_request.setURI(website);

            HttpGet request = new HttpGet();

            request.setURI(website);
            //executing actual request

                        //add your implementation here
            HttpResponse response = client.execute(request);

            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) != null) {
                sb.append(l+nl);

            }
            in.close();
            data = sb.toString();

return data;
        }catch (Exception e){
            return "ERROR";

        }

        } 
```

网页中的输出：

```
eg test
eg test
eg lol
eg lol
eg testing 
```

android中的输出：

```
eg test<br />eg test<br />eg lol<br />eg lol<br />eg testing<br />eg 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T11:14:42.353

```
String lineSep = System.getProperty("line.separator");
String yourString= "test<br />eg test<br />eg lol<br />eg lol<br />eg testing<br />eg34 ernestggggg";

yourString= yourString.replaceAll("<br />", lineSep): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:38:45.337

使您的文本出现在您的网络浏览器中。为此，您需要使用以下方法：

```
TextView tv = (TextView)findViewById(R.id.tv);
tv.setText(Html.fromHtml(  " Overs Alloted "  + "<small> <small> " + "at start of innings" + "</small> </small>" ));  //Example

String s= getStringFromSoruce(parameters);  //Pass the string you need here
tv.setText(Html.fromHtml(s)); 
```

您可以使用任何视图设置文本。您甚至可以使用它删除更多的 html 标签。

我希望这能解决你的目的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:14:03.477

您可以使用[`Html.fromHtml()`](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)将 html 转换为包含*任何*Html的`Spanned`字符串。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:21:45.250

看看这个。用新行替换`<br />`标签`"\n"`

```
data = sb.toString();

data = data.replaceAll("<br />", "\n");

return data; 
```*

# c# - 动态添加行 asp.net（单击按钮）-使用动态 HTML-未显示行

> ID：10296730
> 
> 赞同：1
> 
> 时间：2012-04-24T11:10:29.627
> 
> 标签：c#, asp.net, html

我有桌子和一个按钮。第一次加载页面时，会调用此方法并且它运行良好。当我按下“New Slot”按钮并调用此方法时，我可以在调试过程中看到该表的 row.count 增加，但在浏览器中，不会呈现新的（因此并非如此也许一排突然出现在另一排上）。我在我的 UI 中使用更新面板，但无论有没有它，我都有相同的效果。我也尝试在这种方法中每次都重新添加表，但是只有 1 行是 SHOWN/RENDERED，但是如果我在该行中键入一些内容，然后再添加一个，则第一行中的内容丢失了，可能是该行正在添加而前一个被删除？也许我必须使用视图状态？有人可以指导我找到正确的解决方案吗？

```
private void AddSlot()
        {
            DropDownList ddlProfiles = new DropDownList();
            ddlProfiles.DataSource = DLProfiles.Instance.GetAllProfilesByGid(Int32.Parse(Session["gid"].ToString()));
            ddlProfiles.DataTextField = "pName";
            ddlProfiles.DataBind();

            TableRow row = new TableRow();

            TableCell cellProfile = new TableCell();
            cellProfile.Controls.Add(ddlProfiles);

            TableCell cellStart = new TableCell();
            TextBox startTime = new TextBox();
            cellStart.Controls.Add(startTime);

            TableCell cellEnd = new TableCell();
            TextBox endTime = new TextBox();
            cellEnd.Controls.Add(endTime);

            row.Cells.Add(cellProfile);
            row.Cells.Add(cellStart);
            row.Cells.Add(cellEnd);

            scheduleTable.Rows.Add(row);

        }

<asp:UpdatePanel ID="pnlSchedTable" runat="server">
                <ContentTemplate>
        <div id="divCurrentSchedule" runat="server">
            <h3 id="scheduleTitle" runat="server">
            </h3>

                    <asp:Table ID="scheduleTable" runat="server">
                        <asp:TableHeaderRow ID="rowHeaders" runat="server">
                            <asp:TableHeaderCell Text="Profile Name" />
                            <asp:TableHeaderCell Text="Start time" />
                            <asp:TableHeaderCell Text="End time" />
                        </asp:TableHeaderRow>
                    </asp:Table>
                    <asp:Button ID="btnNewSlot" runat="server" OnClick="btnNewSlot_Click" Text="New Slot" />

        </div></ContentTemplate>
            </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:27:50.607

你什么时候打电话给AddSlot？很有可能，如果您希望它在任何页面请求之后运行，无论是初始加载还是按钮单击，您都应该将其移至“预渲染”...然后您的时间问题将得到调整。

# git - 错误后用 git 恢复过去的工作

> ID：10296732
> 
> 赞同：0
> 
> 时间：2012-04-24T11:10:40.750
> 
> 标签：git, github

让我先说我对 git 比较陌生，所以我可能很难正确表达我的情况。

我正在为一个项目做一些工作，我想提交我所做的更改。我继续运行接下来的几个命令：

```
 git add .
   git commit -m "Finished user signup" 
```

此时，它似乎处理了我的提交并处理了所有的更改、插入和删除。然后我继续：

```
 git checkout master 
```

它成功切换到master分支。我以为我当时在一个分支中，我尝试合并它，但这没有奏效，所以我只是继续前进。我推动，一切都是最新的。然后我对其他文件进行了一些快速更改并尝试：

```
 git commit -am "Add SSL in production" 
```

它是成功的。但是，现在我在最后一次提交之前所做的所有更改都已消失，如果可能的话，我真的很想找回它们。我现在意识到，也许我需要退后一步，真正理解 git，而不是仅仅完成我正在遵循的教程的步骤，但如果可能的话，我真的很想在这个教程上进行调度。如果您有任何想法，我可以如何将我的文件找回来，我真的可以使用您的帮助。

**编辑：**我尝试用“git log”查看日志，但它没有显示任何我想要恢复的提交的迹象......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:55:37.683

据我了解，您从主题分支切换到主分支，但您没有合并主题分支的提交。您可以使用 git 命令 merge 或 rebase 执行此操作：

```
# Be sure you're in the master branch, you should see a star before master
$git checkout master
$git branch
# Now take the commits from the topic-branch
$git rebase TOPIC_BRANCH_NAME 
```

使用`$git log`你现在应该能够看到另一个分支的提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:25:52.797

如果原因是在没有签出分支的情况下提交更改，也许您可​​以使用`git reflog`. 其输出的第一列列出了提交的指纹，您可以在其中找到您正在寻找的指纹。在你找到一个你想要恢复的特定提交之后，比如说`abc123`，你可以通过做一个指向它的分支`git branch recovery abc123`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:32:29.687

我认为您需要省略最后一次提交，如果它执行以下操作

```
git reset HEAD^1 
```

它将省略最后一个头部（提交）

# android - 图像 Uri 到字节数组

> ID：10296734
> 
> 赞同：53
> 
> 时间：2012-04-24T11:10:46.677
> 
> 标签：android, arrays, uri

我目前有两个活动。一种用于从 SD 卡中提取图像，另一种用于蓝牙连接。

我使用 Bundle 从活动 1 传输图像的 Uri。

现在我想做的是让蓝牙活动中的 Uri 通过字节数组将其转换为可传输状态我已经看到了一些示例，但我似乎无法让它们为我的代码工作！

```
Bundle goTobluetooth = getIntent().getExtras();
    test = goTobluetooth.getString("ImageUri"); 
```

是我必须克服的。下一步是什么？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-04-24T11:37:08.790

从`Uri`得到`byte[]`我做以下事情，

```
InputStream iStream =   getContentResolver().openInputStream(uri);
byte[] inputData = getBytes(iStream); 
```

`getBytes(InputStream)`方法是：

```
public byte[] getBytes(InputStream inputStream) throws IOException {
      ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();
      int bufferSize = 1024;
      byte[] buffer = new byte[bufferSize];

      int len = 0;
      while ((len = inputStream.read(buffer)) != -1) {
        byteBuffer.write(buffer, 0, len);
      }
      return byteBuffer.toByteArray();
    } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-01-18T09:16:11.717

Kotlin 在这里非常简洁：

```
@Throws(IOException::class)
private fun readBytes(context: Context, uri: Uri): ByteArray? = 
    context.contentResolver.openInputStream(uri)?.buffered()?.use { it.readBytes() } 
```

在 Kotlin 中，他们为`InputStream`like `buffered`、`use`和`readBytes`.

*   `buffered`将输入流装饰为`BufferedInputStream`
*   `use`处理关闭流
*   `readBytes`完成读取流和写入字节数组的主要工作

错误案例：

*   `IOException`可以在过程中发生（如在 Java 中）
*   `openInputStream`可以返回`null`。如果您在 Java 中调用该方法，您可以轻松地监督这一点。想想你想如何处理这种情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-10-15T13:01:25.240

kotlin 中的语法

```
val inputData = contentResolver.openInputStream(uri)?.readBytes() 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-09-18T08:47:23.467

Java 最佳实践：永远不要忘记关闭您打开的每个流！这是我的实现：

```
/**
 * get bytes array from Uri.
 * 
 * @param context current context.
 * @param uri uri fo the file to read.
 * @return a bytes array.
 * @throws IOException
 */
public static byte[] getBytes(Context context, Uri uri) throws IOException {
    InputStream iStream = context.getContentResolver().openInputStream(uri);
    try {
        return getBytes(iStream);
    } finally {
        // close the stream
        try {
            iStream.close();
        } catch (IOException ignored) { /* do nothing */ }
    }
}

 /**
 * get bytes from input stream.
 *
 * @param inputStream inputStream.
 * @return byte array read from the inputStream.
 * @throws IOException
 */
public static byte[] getBytes(InputStream inputStream) throws IOException {

    byte[] bytesResult = null;
    ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();
    int bufferSize = 1024;
    byte[] buffer = new byte[bufferSize];
    try {
        int len;
        while ((len = inputStream.read(buffer)) != -1) {
            byteBuffer.write(buffer, 0, len);
        }
        bytesResult = byteBuffer.toByteArray();
    } finally {
        // close the stream
        try{ byteBuffer.close(); } catch (IOException ignored){ /* do nothing */ }
    }
    return bytesResult;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T12:04:18.990

use getContentResolver().openInputStream(uri) to get an InputStream from a URI. and then read the data from inputstream convert the data into byte[] from that inputstream

Try with following code

```
public byte[] readBytes(Uri uri) throws IOException {
          // this dynamically extends to take the bytes you read
        InputStream inputStream = getContentResolver().openInputStream(uri);
          ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

          // this is storage overwritten on each iteration with bytes
          int bufferSize = 1024;
          byte[] buffer = new byte[bufferSize];

          // we need to know how may bytes were read to write them to the byteBuffer
          int len = 0;
          while ((len = inputStream.read(buffer)) != -1) {
            byteBuffer.write(buffer, 0, len);
          }

          // and then we can return your byte array.
          return byteBuffer.toByteArray();
        } 
```

Refer this LINKs

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T12:09:42.060

这段代码对我有用

```
Uri selectedImage = imageUri;
            getContentResolver().notifyChange(selectedImage, null);
            ImageView imageView = (ImageView) findViewById(R.id.imageView1);
            ContentResolver cr = getContentResolver();
            Bitmap bitmap;
            try {
                 bitmap = android.provider.MediaStore.Images.Media
                 .getBitmap(cr, selectedImage);

                imageView.setImageBitmap(bitmap);
                Toast.makeText(this, selectedImage.toString(),
                        Toast.LENGTH_LONG).show();
                finish();
            } catch (Exception e) {
                Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT)
                        .show();

                e.printStackTrace();
            } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-12T14:26:14.413

```
public void uriToByteArray(String uri)
    {

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(new File(uri));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        byte[] buf = new byte[1024];
        int n;
        try {
            while (-1 != (n = fis.read(buf)))
                baos.write(buf, 0, n);
        } catch (IOException e) {
            e.printStackTrace();
        }
        byte[] bytes = baos.toByteArray();
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-03T18:19:44.940

使用以下方法在 Android Studio中创建一个`bytesArray`from a 。`URI`

```
public byte[] getBytesArrayFromURI(Uri uri) {
    try {
        InputStream inputStream = getContentResolver().openInputStream(uri);
        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];

        int len = 0;
        while ((len = inputStream.read(buffer)) != -1) {
            byteBuffer.write(buffer, 0, len);
        }

        return byteBuffer.toByteArray();

    }catch(Exception e) {
        Log.d("exception", "Oops! Something went wrong.");
    }
    return null;
} 
```

# ruby - 使用 ruby mechanize 保存文件

> ID：10296735
> 
> 赞同：0
> 
> 时间：2012-04-24T11:10:57.797
> 
> 标签：ruby, mechanize

我的代码有问题（此代码可能会获取请求并下载生成的文件）：

```
require 'rubygems'
require 'mechanize'
require 'hpricot'

OpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE

user = "xxx"
pass = "xxx"
auth_key = "xxx"
ip = "xxx"

agent = Mechanize.new
page = agent.get("https://#{ip}/cgi-bin/welcome.cgi")
form = page.forms.first
form.username = user
form.password = Digest::MD5.hexdigest(pass + auth_key)
page = agent.submit form

page = agent.get("https://#{ip}/cgi-bin/config.exp")
form = page.forms.first
agent.pluggable_parser.default = Mechanize::FileSaver
agent.post("https://#{ip}/cgi-bin/config.exp", {"submitstatus" => "1"}) 
```

有了这个我有一个错误：

```
/var/lib/gems/1.8/gems/mechanize-2.4/lib/mechanize/http/agent.rb:291:in `fetch': 400 => Net::HTTPBadRequest for https://31.223.225.133/cgi-bin/config.exp -- unhandled response (Mechanize::ResponseCodeError)
 from /var/lib/gems/1.8/gems/mechanize-2.4/lib/mechanize.rb:407:in `get'
 from /home/lord/Dropbox/work/ruby/ruby_backup/backup.ru:22 
```

如何模拟这个下载文件的 wget 请求：

```
 `wget --no-check-certificate --load-cookies cookie --post-data='submitstatus=1' \
 --header='Host: 10.1.25.254' \
 --header='User-Agent: Mozilla/5.0' \
 --header='Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8' \
 --header='Accept-Language: ru-ru,ru;q=0.8,en-us;q=0.5,en;q=0.3' \
 --header='Accept-Encoding: gzip, deflate' \
 --header='Connection: keep-alive' \
 --header='Referer: https://10.1.25.254/sys_setting.htm' \
 --header='Content-Type: application/x-www-form-urlencoded' \
 --header='Content-Length: 14' \
 https://$ip/cgi-bin/config.exp` 
```

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:03:54.243

If you proxy your mechanize and wget requests through a debugging proxy such as fiddler or charles you can compare them side by side and thereby better understand the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T11:42:01.657

你试过`Mechanize::Download`吗？

这是一个参考

[使用 WWW:Mechanize 将文件下载到磁盘，而无需先将其全部加载到内存中](https://stackoverflow.com/questions/4360043/using-wwwmechanize-to-download-a-file-to-disk-without-loading-it-all-in-memory)

# java - 在 Tomcat 上手动运行 Web 服务

> ID：10296737
> 
> 赞同：0
> 
> 时间：2012-04-24T11:11:06.973
> 
> 标签：java, web-services

我正在使用 Apache TomCat 服务器在 eclips 中运行 WEB 服务程序。我正在手动运行它。在此期间，它会给我错误，即找不到符号 LoginResource.class。

我有两个文件 LoginResource.java 和 LoginApplication.java。两个文件都被编译但是当我在服务器上运行它们时它给了我这个错误。当我直接在服务器上运行整个项目时，它会运行，但是当我手动运行服务器时会出错。

为了解决这个问题，我将两个文件（.class）放在同一个文件夹中，但仍然是同样的错误。任何人都有解决这个问题。以下是我的两个 .java 文件- LoginApplication---->

```
package com.login;

import org.restlet.Application;
import org.restlet.Restlet;
import org.restlet.routing.Router;

public class LoginApplication extends Application {

    public Restlet createInboundRoot() {
    Router router = new Router(getContext());
    router.attach("/login", LoginResource.class);

    return router;
    }
} 
```

登录资源--->

```
package com.login;

import org.json.JSONObject;
//import org.restlet.data.CharacterSet;
import org.restlet.data.Form;
//import org.restlet.data.Language;
//import org.restlet.data.MediaType;
import org.restlet.data.Parameter;
import org.restlet.representation.Representation;
import org.restlet.representation.StringRepresentation;
import org.restlet.resource.Get;
import org.restlet.resource.ServerResource;
import java.sql.*;

public class LoginResource extends ServerResource {

    String name = "Login Example";

    public String getName()
    {
        return name;
    }

    protected Representation put(Representation input) {

        //Representation r = null;
        JSONObject jsonResult = new JSONObject();

        Connection con = null;
        String dbUrl = "jdbc:mysql://localhost:3306/loginDb";
        String driver = "com.mysql.jdbc.Driver";

        //String result = "Login Failed ...";

        try {

            Class.forName(driver).newInstance();
            con = DriverManager.getConnection(dbUrl, "loginDb", "loginDb");
            System.out.println("Connected to the database");

            Statement stm = con.createStatement();
            ResultSet rs = null;

            String inputText = input.getText();
            System.out.println(inputText);
            Form form = new Form(inputText);

            String email = "";
            String password = "";
            for (Parameter entry : form) {

                if(entry.getName().equals("email"))
                {
                    email = entry.getValue();   
                }

                if(entry.getName().equals("password"))
                {
                    password = entry.getValue();                            
                }
                System.out.println(entry.getName() + "=" + entry.getValue());
            }

         if(email.equals("") || password.equals(""))
         {
             System.out.println("EmailId or Password not provided");
             jsonResult.put("success", false);
             jsonResult.put("message", "EmailId or Password not provided");
         }
         else
         {
            //rs = stm.executeQuery("select * from users where email = '" + email + "' and password = '" + password + "'");
            String query = "select * from users where email='" + email + "' and password='" + password + "'";
            rs = stm.executeQuery(query);

            System.out.println("Query = " + query);

            if(rs.next())
            {
                query = "select * from users where email='" + email + "' and password='" + password + "' and verified = 1";
                ResultSet rs2 = stm.executeQuery(query);

                if(rs2.next())
                {
                    System.out.println("Logged In successfully");
                    jsonResult.put("success", true);
                    jsonResult.put("message", "Logged In successfully");
                }
                else
                {
                    System.out.println("Please confirm ");
                    jsonResult.put("success", false);
                    jsonResult.put("message", "Please confirm");
                }
                rs2.close();
            }
            else
            {
                System.out.println("In correct username or password");
                jsonResult.put("success", false);
                jsonResult.put("message", "In correct username or password");
            }

            /*r = new StringRepresentation(
                    jsonResult.toString(),
                    MediaType.APPLICATION_JSON,
                    Language.ALL,
                    CharacterSet.UTF_8);*/

            rs.close();
         }

        stm.close();
        con.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

        System.out.println(jsonResult);
        return new StringRepresentation(jsonResult.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:50:17.217

**问题原因：** class文件必须放在eclipse的.metadata目录下，不能放在tomcat webapp目录下（看你用什么eclipse插件）

**解决方案：**在 tomcat 中部署您的应用程序（war 文件），现在您应该可以正常启动应用程序了

# ruby-on-rails - rails i18n 重命名键

> ID：10296743
> 
> 赞同：0
> 
> 时间：2012-04-24T11:11:30.560
> 
> 标签：ruby-on-rails, internationalization

我从事一个翻译成 20 多种语言的项目。我需要重命名一些键，即“some.key.with.deep.nesting”为“this.lives.in.another.place”。我该怎么做？每次在 YAML 中手动移动部分树 20 次太长且乏味。在 Rails 中管理 i18n 是否有一些标准做法？

官方指南 (http://guides.rubyonrails.org/i18n.html) 解释了如何从 i18n 开始，但没有提及管理翻译。

有一些外部解决方案，例如 localeapp.com，但上次我测试它时，它无法重命名密钥。

还有像copycopter这样的项目，我还没有安装它，但在描述中也没有关于重命名密钥的内容。

那么你用什么来管理、重命名、移动和重组你的语言环境呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:49:09.417

Localeapp 允许您轻松地重命名键 - 您只需按下附加选项按钮：

![按钮](../Images/b213476ad41a299ff4bd4883c5125cc2.png) ![例子](../Images/6253f9eef1ee5b0c7fae292f9f43b47f.png)

它同时适用于您的所有语言环境。也许这个功能是在您尝试之后添加的——毕竟它是测试版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:41:43.230

如果您不介意 i18n 文件被破坏，您可以使用控制台通过 yaml 解析器读取它们，移动散列并使用 yaml 编码器再次将其转储到文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T17:08:40.643

对于 Rails 中的翻译管理，您可以尝试一下[phraseapp](https://phraseapp.com)。它提供了一个就地编辑器以及密钥管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T10:14:57.660

copycopter 就是为了这个。 [https://github.com/copycopter/copycopter-server](https://github.com/copycopter/copycopter-server)

这也是一个 Rails 演员 [http://railscasts.com/episodes/336-copycopter](http://railscasts.com/episodes/336-copycopter)

# google-maps - 谷歌地图 Query_Limit_Reached？

> ID：10296751
> 
> 赞同：1
> 
> 时间：2012-04-24T11:12:09.140
> 
> 标签：google-maps, google-maps-api-3

我一直在用 Google Maps 编写一些代码，并试图用 Places Library 接收（我不会撒谎）相当大量的数据。我知道每次搜索最多返回 20 分。在我的 JavaScript 应用程序中，我在一个相当小的区域内对搜索进行了 625 次调用。然而，有太多的重复项，我觉得在搜索中我什至没有在地图上制作超过 100 个标记。无论如何，我曾经看到约 74 个结果，但现在我只看到 40 个结果，而且我的许多搜索都没有发生，因为当我尝试运行地点搜索时返回了一些 OVER_QUERY_LIMIT 状态。有什么原因吗？我知道一天内访问网站的次数少于 10 次。

我搜索的主要驱动是这样的：

函数 mapSearch() {
    $.each(pointArray, function(i, iArray) {
        $.each(iArray, function(j, point) {
            placeRequest(pointArray[i][j]);
        });
    });
}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:18:44.700

如果您为 Google Maps API for Business 付费，则您的费率限制为每秒 10 次交易。我不希望非付费用户获得更好的价格。请参阅[https://developers.google.com/maps/documentation/business/faq?hl=en#usage_limits](https://developers.google.com/maps/documentation/business/faq?hl=en#usage_limits)

[Google Maps Geocoding API Incorrect Rate Limiting](https://stackoverflow.com/questions/7955899/google-maps-geocoding-api-incorrect-rate-limiting)有一些讨论如何解决这个问题。

# scala - 表达 xs.sort.head 的优雅方式

> ID：10296752
> 
> 赞同：3
> 
> 时间：2012-04-24T11:12:12.430
> 
> 标签：scala, collections

集合上的几种方法组合可以在 Scala 中更简洁地表达。例如，`xs.filter(f).headOption`可以表示为`xs.find(f)`，`xs.map.filter`通常可以通过 更好地表示`xs.collect`。

我发现自己在写作`xs.sortWith(f).head`，这对我来说就像是一种可以表达为单一方法的事情，“根据这个排序函数，在这个集合中找到最少的元素”。

`Seq`但是，我在or上看不到任何明显的方法`TraversableLike`。是否有一种方法可以捕获我的意图，或者是`.sort.head`找到“最少”元素的更优雅的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T11:21:03.620

```
scala> val xs = List("hello", "bye", "hi")
xs: List[java.lang.String] = List(hello, bye, hi)

scala> xs.sortWith(_.length < _.length).head
res10: java.lang.String = hi

scala> xs.min(Ordering.fromLessThan[String](_ > _))
res11: java.lang.String = hi

scala> xs.min(Ordering.by((_: String).length))
res12: java.lang.String = hi

scala> xs.minBy(_.length)
res13: java.lang.String = hi 
```

# teamcity - 如果 dotCover 没有报告足够高的结果，我如何使 TeamCity 构建失败？

> ID：10296753
> 
> 赞同：6
> 
> 时间：2012-04-24T11:12:13.040
> 
> 标签：teamcity, code-coverage, opencover, dotcover

我希望 TeamCity 运行我的 mSpec 测试并报告测试所涵盖的代码。

我还希望 TeamCity 报告**如果某些命名空间中的代码覆盖率未达到阈值**（例如，`MyProduct.ImportantStuff`必须为**100%**，但`MyProduct.LegacyStuff`必须为 [ **23%** *或当前的任何值，以确保我们不添加新的没有覆盖测试的东西*]。

我最初查看 dotCover 是因为它已集成到 TeamCity 中。从那以后，我一直在研究 OpenCover，因为我无法让 TC 在低覆盖率的情况下失败。

我让 OpenCover 正常工作，但我仍然想知道（我相信很多人都会）如果代码覆盖率太低，如何让 TC 使构建失败。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T13:33:48.770

您使用的是最新的 TeamCity，即版本 7？

设置构建配置时，您可以指定：

![在此处输入图像描述](../Images/0ad5ec74b65aaf2a8f4bd98ae3c7f9a3.png)

下拉菜单中有*更多*与代码覆盖率相关的选项。如果您使用其他代码覆盖工具，您也可以强制构建失败。例如，您可以将一行回显到控制台，然后由 teamcity 拾取：

```
##teamcity[buildStatus status='FAILURE' text='something failed'] 
```

[在这里](http://confluence.jetbrains.net/display/TCD7/Build+Script+Interaction+with+TeamCity#BuildScriptInteractionwithTeamCity-ReportingBuildStatus)查看官方文档

# visual-studio-2010 - Visual Studio 2010 包未正确加载已卸载的扩展

> ID：10296765
> 
> 赞同：18
> 
> 时间：2012-04-24T11:13:05.927
> 
> 标签：visual-studio-2010

在 Visual Studio 启动期间，我收到很多关于扩展包加载错误的恼人对话框。所有无法加载的扩展都是我卸载的。

我检查了本文中提到的所有地方（[在 VS2010 中引导 VS 包和 VSIX 扩展](http://blogs.msdn.com/b/visualstudio/archive/2009/12/07/bootstrapping-of-vs-packages-and-vsix-extensions-in-vs2010.aspx)）并且没有任何我得到错误的扩展存在。

还有其他地方我可以检查吗？

我“只是”想看看 Visual Studio 在哪里找到这些引用并请全部删除它们:)

![Visual Studio 错误 - 包未正确加载](../Images/f809e25d77b66d19631db3e404443d48.png)

* * *

我在 Windows 注册表中找到了这个文件夹：

```
HKEY_USERS\S-1-5-21-3990449039-760197492-1239349315-1121\Software\Microsoft\VisualStudio\10.0_Config\Packages 
```

它包含对 Visual Studio 尝试加载的扩展的所有引用（主要指向`HKEY_USERS\S-1-5-21-3990449039-760197492-1239349315-1121\Software\Microsoft\VisualStudio\10.0_Config\InstalledProducts`子文件夹）。

我刚刚重命名了我删除的扩展的文件夹，我不再看到加载错误。

我确信这可能会导致一些副作用，所以有人知道避免 Visual Studio 尝试加载已卸载的扩展的更好方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-05T14:07:35.397

[这](https://stackoverflow.com/a/17608676/109941)是正确的答案：

1.  关闭 Visual Studio。
2.  **备份**，然后删除 Visual Studio 的`AppData`文件夹。例如：
    *   ***视觉工作室 2010：***
        `%AppData%\..\Local\Microsoft\VisualStudio\10.0`
    *   ***视觉工作室 2012：***
        `%AppData%\..\Local\Microsoft\VisualStudio\11.0`
    *   ***视觉工作室 2013：***
        `%AppData%\..\Local\Microsoft\VisualStudio\12.0`
3.  重新启动 Visual Studio 并享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T13:20:53.517

在升级 SmartBear AQTime 后我遇到了这样的问题，我删除了 IDE 集成（无论如何都不能很好地运行，也可以独立运行）。VS2010 抱怨没有正确加载包的启动。

我实际上删除了内容

AppData\Local\Microsoft\VisualStudio\10.0\Extensions

这完全解决了问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-22T07:00:55.637

我从电脑中删除devexpress后遇到了这个问题，我昨天清理了注册表，然后我删除了%AppData%..\Local\Microsoft\VisualStudio\10.0\1033文件中的devenv.CTM文件并重新启动我的VS，它可以工作！

# php - 通过表单发送屏幕分辨率

> ID：10296772
> 
> 赞同：0
> 
> 时间：2012-04-24T11:13:50.963
> 
> 标签：php, javascript, html, forms, screen-resolution

我已经发送了用户代理：

```
<input type='hidden' name='user-agent' value='<?php echo $_SERVER['HTTP_USER_AGENT']; ?>'/><input type="submit" value="Send User Agent" /> 
```

我已经完成了我的研究，但遗憾的是那里有一些代码不起作用。是其他有问题的人自己寻求帮助。

如何使用 php 表单发送屏幕分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:18:37.113

您必须通过 JavaScript 填写屏幕分辨率，然后发送。这不是一种安全的方法，因为任何想要更改隐藏字段中的值的人......但它会起作用：

```
// Fill in forms with screen resolution (jQuery)
$('#screenWidth').val(screen.width);
$('#screenHeight').val(screen.height); 
```

并且只需使用几个隐藏字段：

```
<input type="hidden" name="screenWidth" id="screenWidth"/>
<input type="hidden" name="screenHeight" id="screenHeight"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:19:14.970

恕我直言，您不会从服务器获得屏幕分辨率...您可以让表单呈现，然后使用 javascript 使用正确的信息更新表单输入

HTML

```
<input id="browser-resolution" type="hidden" name="resolution" value=""> 
```

然后作为脚本

```
<script>
  document.getElementById('browser-resolution').value = screen.width + "x" + screen.height;
</script> 
```

编辑：添加[fiffle](http://jsfiddle.net/NEWSe/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:29:19.580

前面的示例应该可以工作：

Javascript

```
document.getElementById('debug').value = screen.width + 'x' + screen.height; 
```

你有任何错误吗？您使用的是哪个浏览器？操作系统？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T11:45:57.500

正如其他人所说，该`screen`对象有效。仅仅说“它不起作用”无助于找出问题所在。如果您正确加载了 jQuery，它将正常工作。

```
screen.width + "x" + screen.height 
```

在我的情况下，这将返回“1280x1024”。

有关它的工作示例，请参见[http://jsfiddle.net/KVQM4/ 。](http://jsfiddle.net/KVQM4/)如果您可以创建类似的东西来显示它是如何不起作用的，或者给我们更多关于错误的信息。

# c# - 定期在表单加载后运行代码

> ID：10296774
> 
> 赞同：0
> 
> 时间：2012-04-24T11:14:01.213
> 
> 标签：c#, .net, winforms, form-load

我正在开发一个桌面窗口应用程序。表单加载后，从正在运行的机器中获取一些数据，并将其以 csv 文件的形式保存到 ftp 服务器，这表明测试已完成。我想运行相同的代码，该代码每隔一小时获取一次值并存储在服务器上。我该怎么做？

控制台应用程序和窗口服务不是可行的解决方案，因为我必须向用户展示表单等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:15:56.107

使用 BCL 附带的计时器类之一。

请参阅MSDN 上[的比较 .NET Framework 类库中的计时器类。](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

本质上，您设置了一个带有间隔（触发频率，在您的情况下为每小时一次）的计时器，并设置了一个在触发时执行的方法。

# javascript - html: print() 嵌入文件

> ID：10296783
> 
> 赞同：4
> 
> 时间：2012-04-24T11:14:25.410
> 
> 标签：javascript, html, pdf, printing, embed

我正在使用以下方法在 html 中显示 pdf：

```
<embed id="print" src="file.pdf" type="application/pdf" width="100%" height="100%"> 
```

我想创建一个打印该文件的按钮。

我以为会是这样的；但它不起作用。

```
<button onClick="javascript:document.getElementById('print').print();"> 
```

有人知道如何在嵌入式文件上调用打印功能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T11:32:46.087

```
<script type="text/javascript">
function printPDF(pdfUrl) 
{
    var w = window.open(pdfUrl);
    w.print();
}
</script> 
```

你可以调用这个函数`printPDF("http://mywebsite.com/myfile.pdf")`

# objective-c - 前向声明错误

> ID：10296787
> 
> 赞同：2
> 
> 时间：2012-04-24T11:14:36.363
> 
> 标签：objective-c, protocols, forward-declaration

我有这样的协议：

```
#import <Foundation/Foundation.h>

@protocol Prot1 <NSObject>

@required
- (void)methodInProtocol;

@end 
```

这是我想存储在这样的类中的委托的协议：

```
#import <Cocoa/Cocoa.h>

@class Prot1;

@interface Class1 : NSObject

@property (nonatomic, strong) Prot1 *delegate;

- (void)methodInClass;

@end 
```

这个类的实现是这样的：

```
#import "Class1.h"
#import "Prot1.h"

@implementation Class1

@synthesize delegate;

- (void)methodInClass {
    [delegate methodInProt];
}

@end 
```

当我构建这些代码时，我收到以下错误：

```
Receiver type 'Prot1' for instance message is a forward declaration 
```

这里有什么问题？我确实明白我必须通过@class 为协议做一个前向声明，我认为我只需要在类实现中#import 协议......不是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T11:21:31.700

因为它不是一个类，所以你必须将它定义为它是什么 - 一个协议；）

使用前向声明：`@protocol Prot1;`;

并使用这样的属性：
`@property (nonatomic, strong) id<Prot1> delegate;`

# internet-explorer - Backbone.js 在 IE6 IE7 和 IE8 上的性能

> ID：10296791
> 
> 赞同：6
> 
> 时间：2012-04-24T11:14:50.527
> 
> 标签：internet-explorer, backbone.js

在大多数版本的 IE 上渲染 Backbone.js 集的大型结果表时，我遇到了性能瓶颈。

其他人是如何解决这个问题的？

无论如何我们可以在这些劣质浏览器上缓存输出吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T16:28:13.643

我的猜测是您正在将行一一添加到 DOM 中。这可能会导致许多浏览器重绘，在行渲染时给您带来迟缓/缓慢的感觉。

提高速度的最简单方法是限制与 DOM 的交互。不要将行一一插入到 DOM 中，而是将它们全部插入。

继续阅读我的意思的一个例子。

## 不该做什么：

[http://jsfiddle.net/skylar/arkxp/4/](http://jsfiddle.net/skylar/arkxp/4/)

在此示例中，请注意我在添加任何行之前如何将表添加到 DOM。 **这很糟糕**，因为它会导致浏览器重绘 1000 次！

**这是错误的：**

```
this.table = $("<table></table>").appendTo("body");
this.model.each(this.addRow); 
```

## 你应该做什么：

[http://jsfiddle.net/skylar/arkxp/5/](http://jsfiddle.net/skylar/arkxp/5/)

在此示例中，我等待将表添加到 DOM，直到生成所有行。这意味着 DOM 只重绘**一次**，应该比上面的例子快得多。

**这是对的：**

```
this.table = $("<table></table>");
this.model.each(this.addRow);
this.table.appendTo("body"); 
```

这适用于您与 DOM 的任何交互。你越弄乱它，它就会越慢。事实上，人们常说加快 JS 速度的最快方法是**限制与 DOM 的交互**

如果您发现自己需要向 DOM 中已经存在的元素添加某些内容，只需在`display:none`对 DOM 执行操作时将其设置为或暂时将其从 DOM 中删除。完成后，将其注入回去，您将只强制进行一次重绘。

一旦你掌握了优化 DOM 交互的窍门，我认为你会发现你的应用程序有很大的改进空间。

现代浏览器通过缓存更新 DOM 的请求并在“块”中进行更改来限制 DOM 重绘。IE（和旧浏览器）将在每次更改时重新绘制。这可能解释了为什么您的现代浏览器表现更好，尽管 DOM 交互过多。

# javascript - 使用 foreach 使用剃刀创建框并在其下带有数字的问题

> ID：10296792
> 
> 赞同：1
> 
> 时间：2012-04-24T11:14:52.383
> 
> 标签：javascript, html, css, asp.net-mvc, razor

我正在尝试创建这样的东西：

![http://i.stack.imgur.com/aabn9.png](../Images/219c5b83368dbdc99a8a073347c948fc.png)

但是我有问题，因为它必须在 foreach 循环中进行。

这就是我现在拥有的方式，但它不像图像我不知道如何像我的图像那样做。

```
 @{
       int counter = 1;

          @foreach (IconsViewModel items in Model.AllIconsModel)
          {

              <a href="#" class="box"></a>
              <p>@(counter++)</p>

          }               
  } 
```

CSS：

。盒子

```
{
    border: 1px solid black;
    width: 65px;
    height: 65px;
    float: left;     
} 
```

如果有人能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:20:02.563

我不确定你是否需要这个`<p>`标签，但你可以把计数器放在`<a>`标签里面（我猜这只是盒子的索引）然后放一个 display:block; 在 .box CSS 中使标签显示为正方形。

为了澄清它，您需要以下 CSS

```
.box
{
    border: 1px solid black;
    width: 65px;
    height: 65px;
    display: block;     
} 
```

**编辑：**对不起，我刚刚意识到广场下面的柜台。在这种情况下，使用 div 包装器包装标签更容易，如下所示：

```
<div class="wrapper">
   <a href="#" class="box"></a>
   <p>@(counter++)</p>
</div> 
```

并给包装类一个 text-align:center，像这样：

```
.wrapper 
{
    text-align:center;
    float: left;
} 
```

（所有这些都在上面的 .box 类旁边。）

我希望这有帮助。

**编辑：**根据sandeep 的评论，您还需要将浮动从盒子类移动到包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:20:54.020

我认为您的问题出在`<p>`段落标签中。它在每个框之后包含一个新行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:25:03.127

将两者一起包裹在一个盒子里。

像这样：

```
 @{
       int counter = 1;

          @foreach (IconsViewModel items in Model.AllIconsModel)
          {
              <div class="lefty" >
                <a href="#" class="box"></a>
                <p>@(counter++)</p>
              </div>
          }               
  } 
```

CSS：

```
.lefty
{
    float: left;     
}
.box
{
    border: 1px solid black;
    width: 65px;
    height: 65px;  
} 
```

其余的取决于您，例如将文本居中对齐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:26:47.043

您必须像这样定义html：

**HTML**

```
<div class="wrapper">
    <div class="parent">
      <a href="" ></a>
      <p></p>
    </div>
    <div class="parent">
      <a href="" ></a>
      <p></p>
    </div>
</div> 
```

**CSS**

```
.wrapper{
  text-align:center;
}

.parent{
  display:inline-block;
  *display:inline;/*For IE*/
  *zoom:1;
  text-align:center;
}
.box
{
    border: 1px solid black;
    width: 65px;
    height: 65px;
    display: block;     
} 
```

**JS**

```
 @{
       int counter = 1;

          @foreach (IconsViewModel items in Model.AllIconsModel)
          {
              <div class="parent" >
                <a href="#" class="box"></a>
                <p>@(counter++)</p>
              </div>
          }               
  } 
```

# java - Maven GlassFish 嵌入式插件。打包后重新部署

> ID：10296794
> 
> 赞同：3
> 
> 时间：2012-04-24T11:14:59.077
> 
> 标签：java, maven, maven-glassfish-plugin

如何在“Package”之后配置自动重新部署？通过命令运行服务器后，`org.glassfish:maven-embedded-glassfish-plugin:3.1.1:run`我在应用程序上运行包`goal`（因为我需要在源代码进行一些更改后重新编译我的应用程序），并使用以下参数`maven-embedded-glassfish-plugin`

```
 <execution>
                    <id>undeploy</id>
                    <phase>package</phase>
                    <goals>
                        <goal>undeploy</goal>
                    </goals>
                </execution>
                <execution>
                    <id>deploy</id>
                    <phase>package</phase>
                    <goals>
                        <goal>deploy</goal>
                    </goals>
                </execution> 
```

但这不起作用。

# c - C 中的格式说明符 - %s 内的 %s

> ID：10296801
> 
> 赞同：-1
> 
> 时间：2012-04-24T11:15:54.037
> 
> 标签：c, format-specifiers

我有这样的东西

```
char string[]="My name is %s";

printf("%s",string,"Tom"); 
```

我希望输出是，`My name is Tom`但我得到`My name is %s`

我试图逃避`%`角色，但它不起作用。

这里出了什么问题？我怎么会有一个`%s`inside a `%s`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T11:17:05.097

尝试这样的事情

```
printf(string,"Tom"); 
```

您的方法的问题是-

一旦在格式字符串中`printf`看到`%s`格式说明符，它就会假定 list 中的下一个参数是由字符指针指向的字符串，检索它并打印它来代替`%s`. 现在，`printf`不进行*递归*替换，因此 `%s`在你的`string`遗体中保持原样，“Tom”现在是一个额外的参数，只是被丢弃了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T11:29:53.293

期间只有一个扩展`printf`；这意味着传递给`printf`除格式字符串之外的任何字符串都将被逐字打印（如果有的话）。这实际上是一件好事，因为否则，它会留下一个巨大的安全漏洞。

安全风险与格式字符串和参数列表必须对应的事实有关。这意味着，如果不需要的`%`内容进入格式字符串，您将遇到麻烦：

```
char ch[50];
fgets(ch, 50, stdin);
printf(ch); 
```

如果用户提供例如。`%p %p %p %p`，他将读取存储在堆栈中的数据（如返回地址等），如果他提供`%s %s %s`，他可能会崩溃程序。如果他提供`%n`，他将覆盖堆栈上的一些数据。

也就是说，如果需要，您可以只计算格式字符串：

```
char ch[50];
char format_prototype[]="My name is %s";
snprintf(ch, 49, "%s", format_prototype);
ch[49]=0;
printf(ch, "Tom"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:17:35.497

`printf(string, "Tom")`也许？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T11:19:40.167

第一个参数`printf`是格式字符串。其余的都是将根据格式字符串格式化的参数。格式字符串不会以任何方式嵌套。换句话说，即使要格式化的字符串恰好包含格式化指令，它也会被简单地打印出来，而不是解释为另一个格式字符串。

如果您想要这种格式间接，您必须首先生成一个新的格式字符串（`sprintf`对此很有用）：

```
char string[] = "My name is %s";
char format[100];

sprintf(format, "%s", string); 
```

然后使用新生成的格式字符串：

```
printf(format, "Tom"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T11:26:57.787

问题出`printf("%s",string,"Tom");` 在线路上你应该使用

```
char string[]="My name is %s";
printf(string,"Tom"); 
```

在这里你会得到输出

```
My name is Tom 
```

# vbscript - VBScript 可以做我想做的事吗？

> ID：10296814
> 
> 赞同：0
> 
> 时间：2012-04-24T11:17:12.320
> 
> 标签：vbscript, batch-file

以前从未使用过 VBScript，我只是想在开始使用它之前确保自己走在正确的道路上。

我需要创建一个每周通过 Windows 调度程序运行的进程。

我需要脚本来执行以下操作：

1.  调用 PSFTP.exe 并打开与 SFTP 站点的 SSH 会话，下载文件并将其保存在特定文件夹中。
2.  下载后解压文件。
3.  打开 Truecrypt 并挂载加密卷。
4.  按顺序通过 cmd 行激活一些其他进程。

所有这些都需要按顺序进行，每个步骤都需要等待上一步完成。

我可以使用 VBScript 或 VBScript 和 BAT 文件的组合来实现这一点吗？还是我应该走另一条路？

提前致谢！

GPC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:41:17.087

以最简单的形式，您可以通过这个简短的 BAT 文件实现您想要的

```
::: C:\DEST\SO.BAT :::
pushd c:\dest
echo cd downloads > psftp.scr
echo get file.zip >> psftp.scr
echo quit >> psftp.scr
psftp user@domain.com -pw password -b psftp.scr
7z x -o file.zip
truecrypt /q /v myvolume 
```

并使用此命令安排它在每个星期一运行

```
AT 09:00 /EVERY:MONDAY C:\DEST\SO.BAT 
```

或（谢谢，iesou！）如果您需要特定的用户权限，想要一个特定于任务的名称......

```
schtasks /create /SC Weekly /MO 1 /D Friday /TN "File Download and Extract" /TR "C:\DEST\SO.BAT" /ST 09:00 /RU PCNAME\USER /RP PASSWORD 
```

# google-app-engine - CRON 数据存储管理员备份

> ID：10296815
> 
> 赞同：0
> 
> 时间：2012-04-24T11:17:14.363
> 
> 标签：google-app-engine

我有具有高复制能力的 Google App Engine。我已启用 Datastore Admin 并备份和复制数据到其他应用程序

任何人都知道这是否可能，如果可以，如何设置，以便 DataStore 在设定的时间进行备份，就像 CRON 作业一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:26:36.433

正如昨晚在 1.6.5 中宣布的那样，现在可以使用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:09:02.323

目前尚不可用，但我们希望将其作为 SDK 1.6.5 的一部分发布。在此处查看预发布 SDK 发行说明：

[https://groups.google.com/forum/?fromgroups#!topic/google-appengine/pxjxp1tQNg8](https://groups.google.com/forum/?fromgroups#!topic/google-appengine/pxjxp1tQNg8)

# php - 用户对 Joomla 中特定扩展的权限

> ID：10296816
> 
> 赞同：1
> 
> 时间：2012-04-24T11:17:22.897
> 
> 标签：php, joomla, joomla1.7

我的 Joomla 版本 1.7.2 中安装了一个特定的扩展。我希望特定的用户组可以在 Joomla Admin 中访问该扩展，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:45:16.683

您可以为单个用户设置单个模块、插件、扩展等的权限。检查此链接：[Joomla 1.7 ACL](http://www.joomlashine.com/blog/joomla-17-access-control-list-explained.html)

希望能帮助到你

# javascript - IE9 关联数组

> ID：10296817
> 
> 赞同：4
> 
> 时间：2012-04-24T11:17:31.210
> 
> 标签：javascript, internet-explorer-9

```
Fruit={4:"apple",2:"banana",3:"graps"}; 
var k;
for(k in Fruit)
{alert(k);} 
```

当在 IE8 和 FF 和其他浏览器中帮助我解决这个问题时，警报将 `2 3 4` 在 Ie9 中按顺序排列。`4 2 3`我需要的序列是 `4 2 3`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T11:27:40.220

在 JavaScript 中，您无法控制键从对象中出来的顺序。如果您关心顺序，请将键放在单独的数组中：

```
var fruit = { 4:"apple", 2:"banana", 3:"grapes" };
var fruitKeys = [ 4, 2, 3 ]
for (var i=0, l=fruitKeys.length; i<l; ++i) {
  var k = fruitKeys[i];
  alert(k + ":" + fruit[k]);
} 
```

（作为一种风格，您也不应该将变量名大写；仅对用作构造函数/“类”的函数使用大写字母）。

[小提琴](http://jsfiddle.net/FZJbH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:28:15.353

关联数组没有顺序，所以这里 IE9 的行为并没有错。没有现有的数据类型可以以这种方式存储订单。您最好的选择是明确存储订单：

```
var Fruit = [[4, "apple"], [2, "banana"], [3, "graps"]];
for (var i = 0; i < Fruit.length; i++) {
    alert(Fruit[i][0]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:41:09.190

从其他答案中，应该清楚 javascript 对象没有排序。您可以`Object.keys`在某些浏览器中使用来进行某种排序。例如：

```
function objSortedList(obj){
  var keys = Object.keys(obj).sort(), key;
  while(key = keys.shift()){
      console.log(key+': '+obj[key]);
  }
}
//usage
var fruit = {4:"apple",2:"banana",3:"graps"};
objSortedList(fruit);
/* =>result:
  2: banana
  3: graps
  4: apple
*/ 
```

如果你想保持一个预定义的顺序，你可以使用相同的稍微改变的函数：

```
function objSortedList(obj,keys){
  keys = keys || Object.keys(obj).sort()
  var key;
  while(key = keys.shift()){
   console.log(key+': '+obj[key]);
  }
}
//usage
var fruit = {4:"apple",2:"banana",3:"graps"};
objSortedList(fruit,[4,2,3]);
/* =>result:
  4: apple
  2: banana
  3: graps
*/ 
```

另一个想法可能是将订单存储为 Object 的属性并使用它：

```
function objSortedList(obj,keys){
  keys = keys 
         || (obj.order ? obj.order.slice() : false) 
         || Object.keys(obj).sort()
  var key;
  while(key = keys.shift()){
   if (/^order$/.test(key)){ continue; }
   console.log(key+': '+obj[key]);
  }
}
//usage
var fruit = {4:"apple",2:"banana",3:"graps",order:[4,3,2]};
objSortedList(fruit);
/* =>result:
  4: apple
  3: graps
  2: banana
*/ 
```

对于不支持`Object.keys`Mozilla 的浏览器，[这里提供了一个 shim](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)。IE9 支持它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:20:41.643

将其设为社区 wiki，因为 1）[提问者为他的问题添加了标准，](https://stackoverflow.com/a/10297135/418413)并且 2）此答案本质上是 Mark Reed 答案的修改版本。

另一种方法（[Mark Reed 答案](https://stackoverflow.com/a/10296958/418413)的修改版本）是使用*稀疏数组*。稀疏数组是在其长度内的每个索引处都没有元素的数组。如果我们采用 Mark 的代码，但转换`fruit`为关联数组，它看起来像这样：

```
var fruit = new Array();
fruit[2] = "banana";
fruit[3] = "graps";
fruit[4] = "apple";
// The rest of the solution is the same as Mark's:
var fruitKeys = [ 4, 2, 3 ]
for (var i=0, l=fruitKeys.length; i<l; ++i) {
  var k = fruitKeys[i];
  alert(k + ":" + fruit[k]);
} 
```

# php - 如何知道是否使用 mysqli dbdriver 删除了行

> ID：10296818
> 
> 赞同：0
> 
> 时间：2012-04-24T11:17:33.657
> 
> 标签：php, mysql, codeigniter, mysqli, delete-row

我正在使用带有 mysqli dbdriver 的 codeigniter 2.1.0。我有以下查询，想知道它何时成功

```
$query = $this->db->query("delete FROM abc WHERE id IN (" . $IdList . ")"); 
```

我怎么知道相关行是否被删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:43:14.030

`$this->db->affected_rows()`就是你要找的。您应该能够将该结果与预期的已删除行数进行比较。

还引用了[用户指南](http://codeigniter.com/user_guide/database/helpers.html)

> 在执行“写入”类型查询（插入、更新等）时显示受影响的行数。
> 
> 注意：在 MySQL 中，“DELETE FROM TABLE”返回 0 个受影响的行。数据库类有一个小技巧，允许它返回正确数量的受影响行。默认情况下，此 hack 已启用，但可以在数据库驱动程序文件中关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:22:56.687

来自[CodeIgniter 用户指南](http://codeigniter.com/user_guide/database/queries.html)：

> 该函数在运行“读取”类型查询时**`query()`**返回一个数据库结果**对象，您可以使用它来**[显示您的结果](http://codeigniter.com/user_guide/database/results.html)。当运行“写”类型查询时，它只是返回`TRUE`或`FALSE`取决于成功或失败。

因此，您的`$query`变量将是`TRUE`成功还是`FALSE`失败。

# c# - 在 c# 中的单个按钮单击中使用实体框架在两个不同的表中插入数据

> ID：10296826
> 
> 赞同：1
> 
> 时间：2012-04-24T11:18:03.213
> 
> 标签：c#, visual-studio-2010, sql-server-2008

在我的数据库中，我有 2 个表 Employee 和 Address。在表单中，单个选项卡代表两个表的字段。在确定按钮的单击事件下，我尝试插入数据但发生异常。我能够一次插入一个表的数据，但不能同时插入两个表。

我有例外：

“ObjectStateManager中已经存在具有相同键的对象。现有对象处于Modified状态。只有处于Added状态的对象才能添加到ObjectStateManager。”

我的代码是：

```
 try
        {

            using (TransactionScope ts = new TransactionScope())
            {
                db.Connection.Open();

                string empid = txtEmpId.Text.ToString();

                Employee emp = db.Employees.Single(a => a.Emp_ID == empid);

                emp.Full_Name = txtFullName.Text;

                db.AddToEmployees(emp);

                db.SaveChanges();

                Address address = db.Addresses.Single(b => b.Emp_Id == empid);

                address.House_No = txtHouseNo.Text.ToString();

                db.AddToAddresses(address);

                db.SaveChanges();

                ts.Complete();

                MessageBox.Show("completed successfully");
            }
        }

        catch (Exception e1)
        {
            MessageBox.Show(e1.Message);
        }

        finally
        {
            if (db.Connection.State == ConnectionState.Open)
            {
                db.Connection.Close();
            }
        } 
```

请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:24:18.963

通过您发布的代码的外观，您从数据库中检索了一个地址，对其进行了更新，然后尝试将其添加回数据库中？

这会导致主键冲突，因为记录不能被插入两次。

删除将地址添加到数据库的行，因为它已经在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:35:15.370

您可以使用事务将两个表作为一个 SQL 语句插入

[交易示例](http://msdn.microsoft.com/en-us/library/ms188929.aspx)

# javascript - 用户无法在 js.erb 文件中呈现

> ID：10296828
> 
> 赞同：0
> 
> 时间：2012-04-24T11:18:12.350
> 
> 标签：javascript, ruby-on-rails

我在 js.erb 文件中有以下内容：

```
 //add an image from the gallery to the mail later
  $('.uploaded_image').click(function(){

      var src=$(this).attr('src').replace("thumb", "medium");
      var location = $('#user_image_location').attr('value');
      $('#mailing_body').contents().find("[data-edit-img="+''+location+''+"]").attr('src', src);
      $('#image_form').html('<%=render "user_images/form"%>');
      $('[data-dismiss]="cancel"').click();

  }) 
```

我想我可以在 js 文件中使用 erb 来替换页面上的内容。我收到以下错误：

```
undefined method `render' for #<#<Class:0x00000103dea400>:0x000001059f2198> 
```

如果我删除以下行：

```
 $('#image_form').html('<%=render "user_images/form"%>'); 
```

一切正常。

我以为我可以在带有 Rails 3.2 的 js 文件中使用 erb

为什么这不起作用？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:37:20.843

您当然可以在您的 .js.erb 文件中使用渲染（包括任何和所有帮助程序、资源等）（我刚刚验证确定）。

对于`.js.erb`要以与您的文件相同的方式处理的`.html.erb`文件，它们必须放在您的`views`文件夹中（例如`app/views/<controller>`或`app/views/shared`），它们不能放在您的`app/assets/javascripts`文件夹中。

# php - 用于验证 URL 在 PHP 中无法正常工作的正则表达式

> ID：10296830
> 
> 赞同：1
> 
> 时间：2012-04-24T11:18:31.963
> 
> 标签：php, regex, codeigniter

我正在使用正则表达式来验证 URL。这个表达式在 JavaScript 中效果很好，但是在 PHP 中它给了我这个错误

```
A PHP Error was encountered

Severity: Warning

Message: preg_match() [function.preg-match]: Unknown modifier '('

Filename: home/auth.php

Line Number: 1596
A PHP Error was encountered

Severity: Warning

Message: preg_match() [function.preg-match]: Unknown modifier '('

Filename: home/auth.php

Line Number: 1601 
```

这是我的表达

```
$pattern ="/^(http|https|ftp)\:\/\/www\.([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&amp;%\$\-]+)*@)*(\.){1}((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(\:[0-9]+)*(/($|[a-zA-Z0-9\.\,\?\'\\\+&amp;%\$#\=~_\-]+))*$/"; 
```

这是php函数

```
public function valid_url($data)
{
    $data = trim($data);

    if(!$data)
    {
        return TRUE;            
    }

    $pattern ="/^(http|https|ftp)\:\/\/www\.([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&amp;%\$\-]+)*@)*(\.){1}((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(\:[0-9]+)*(/($|[a-zA-Z0-9\.\,\?\'\\\+&amp;%\$#\=~_\-]+))*$/";
    $valid = preg_match($pattern,$data);

    if(!$valid)
    {
        $data = "http://".$data;
        $valid = preg_match($pattern,$data);
    }

    if(!$valid)
    {
        $this->form_validation->set_message('valid_url', 'Please enter a valid URL.');
        return FALSE;           
    }
    else
    {
        return TRUE;
    }       
} 
```

我不太擅长正则表达式，所以我无法弄清楚问题所在，请帮助我更正正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T12:09:30.157

**哇，好大的表情**。我在其中发现了几个错误，希望能向您解释。让我们把它分开：

```
$pattern ="/ 
```

这是你的第一个错误。由于在 url 的多个部分中使用了正斜杠，因此您应该使用不同的分隔符。我建议使用波浪号`~`，因为它不经常在 url 中使用。这意味着您不必在任何地方都使用`\/`.

```
^(http|https|ftp)\:\/\/www\.([a-zA-Z0-9\.\-]+ 
```

这个字符类包含下一个错误。在字符类中，点仅表示点。没有必要逃避它。此外，将破折号放在最后，它也不需要转义，因为它不可能表示范围。字符类可以缩短为`[a-zA-Z0-9.-]+`.

```
(\:[a-zA-Z0-9\.&amp;%\$\-]+ 
```

这里我们有下一个错误，`&amp;`在字符类中。这将匹配 & 或 a 或 m 或 ;，而不仅仅是 &。您不需要将其转换为 html 代码，因为这样做意味着匹配代码包含的任何字符。并且使用以前的知识，您不需要转义点，或者如果它在末尾，则不需要转义。您也不需要转义美元符号，因为在字符类中它仅表示一美元。请记住，在字符类中，所有元字符都只是标准字符，除了插入符号`^`、反斜杠`\`、右方括号`]`、破折号`-`（但如果它位于末尾，则可以保留）以及您选择的任何分隔符，例如波浪`~`号 然后这个字符类可以变成`[a-zA-Z0-9.&%$-]+`.

```
)*@)*(\.){1} 
```

其中一部分可能是错误，也可能不是。基本上，有没有必要在这里捕捉点？如果不需要捕获它，请单独留下括号。但是，重复有一个明确的错误。`{1}`完全是多余的。那里的一切都必须至少重复一次。这只是使代码混乱。以上可以简写为，`)*@)*\.`。

```
((25[0-5]|2[0-4][0-9]|[0-1]{1} 
```

同样，`{1}`不需要。删除它，`((25[0-5]|2[0-4][0-9]|[0-1]`。

```
[0-9]{2}|[1-9]{1}[0-9]{1} 
```

再两次，这变成了`[0-9]{2}|[1-9][0-9]`。
你继续这样做，你的下一个代码块可以缩短：

```
|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9]) 
```

进入

```
|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9]) 
```

它并没有好得惊人，但每一点都有帮助。下一个：

```
|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+ 
```

这两个字符类可以优化，`|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+`.

```
\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}) 
```

这是非常严格的，但我认为你有这样的原因是有原因的，所以我会离开它。

```
)(\:[0-9]+)*(/ 
```

**这是您错误的原因。**你没有逃脱正斜杠。但是，我将保留它，因为使用不同的分隔符可以避免这种情况并整理您的模式。

```
($|[a-zA-Z0-9\.\,\?\'\\\+&amp;%\$#\=~_\-]+))*$/"; 
```

现在知道我们不需要转义其中的所有内容，该角色类可以大大缩短。它可以变成，`($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/";`.

**使用我们现在知道的一切，你的模式可以变得更漂亮，更容易处理。**

它可以变成：

```
$pattern = "~^(http|https|ftp)://www\.([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9])|([a-zA-Z0-9-]+\.)+(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(/($|[a-zA-Z0-9.,?'\\+&%$#=\~_-]+))*$~"; 
```

现在您有了一个更小的表达式，查找故障和更多的自定义应该会更容易一些。

**Just a quick note**
I keep noticing that you have used the following syntax at the beginning of some groupings, `(\:`. I have removed the backslash as it is not needed for a colon. However, were you trying to make it so the group was not captured? If so, the syntax for that is, `(?:`.

Edit:: **You can also optimize the pattern further by utilizing character classes**

\d = [0-9]
\w = [a-zA-Z0-9_]

Adding i to the end of the last pattern delimiter turns case insensitivity on too. Which means, instead of writing `[a-zA-Z]` you can just write `[a-z]` instead.

Also, the `http|https` can just become `https?`

So you pattern could be shortened further too:

```
$pattern = "~^(https?|ftp)://www\.([a-z\d.-]+(:[a-z\d.&%$-]+)*@)*((25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]\d|[1-9])\.(25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]\d|[1-9]|0)\.(25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]\d|[1-9]|0)\.(25[0-5]|2[0-4]\d|[0-1]\d{2}|[1-9]\d|\d)|([a-z\d-]+\.)+(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-z]{2}))(:\d+)*(/($|[\w.,?'\\+&%$#=\~-]+))*$~i"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:35:49.380

我看到一个错误：

`[0-9]+)*(/($`

到

`[0-9]+)*(\/($`

或者

`[0-9]+)*(($`

如果`/`应该是一个终结者，它不应该是。

但是说真的，没有其他方法可以实现这一目标吗？这个字符串真的很难排除故障。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:30:52.843

为什么不使用标准的 php 函数 filter_var？

[http://lv.php.net/manual/ru/function.filter-var.php](http://lv.php.net/manual/ru/function.filter-var.php)

# iphone - OAuth认证iPhone

> ID：10296833
> 
> 赞同：11
> 
> 时间：2012-04-24T11:18:36.287
> 
> 标签：iphone, ios, ios5, login, oauth-2.0

我正在做一个 iPhone 应用程序，它需要实现 OAuth 2.0 协议才能让用户登录到特定网站。我有在网站上注册我的应用程序后获得的客户 ID 和客户密码。我想知道一些关于这个的事情。

1.  我看到了一些关于这个的链接。但在我的脑海中，我不太确定是否需要使用 OAuth 类或 OAuth 消费者类？

2.  是否可以在 OAuth 中对用户进行身份验证，而无需在查询字符串中发送用户的电子邮件 ID 和密码？

3.  是否可以在 uiwebview 中加载网站并登录网站并获取用户凭据以使用更多屏幕功能。

这是我正在开发的第一种此类应用程序。如果有人可以帮助我，那就太好了，这样我就可以清楚地知道我应该怎么做。

**编辑：**如果有任何使用 OAuth 登录网站的好教程，请分享。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T05:38:54.740

**OAuth 规范和文档**

*   OAuth 1.0 协议：[https ://www.rfc-editor.org/rfc/rfc5849](https://www.rfc-editor.org/rfc/rfc5849)
*   OAuth 2.0 协议：[https ://www.rfc-editor.org/rfc/rfc6749](https://www.rfc-editor.org/rfc/rfc6749)
*   [http://oauth.net/documentation/getting-started/](http://oauth.net/documentation/getting-started/)
*   [http://hueniverse.com/oauth/](http://hueniverse.com/oauth/)

**适用于 iOS 上 OAuth 的 SDK**

*   YToolkit (OAuth 1.0 & 2.0)
    *   [来源在 GitHub](https://github.com/sprhawk/ytoolkit)
*   OAuthConsumer (OAuth 2.0)
    *   [谷歌代码上的来源](http://oauth.googlecode.com/svn/code/obj-c/)
    *   [维基](https://code.google.com/p/oauthconsumer/wiki/UsingOAuthConsumer)
*   LROAuth2Client (OAuth 2.0)
    *   [来源在 GitHub](https://github.com/lukeredpath/LROAuth2Client)
    *   [简单文档](http://lukeredpath.co.uk/blog/oauth2-for-iphone-and-ipad-applications.html)
    *   [演示项目](https://github.com/lukeredpath/LROAuth2Demo)
*   MPOAuthConnection (OAuth 1.0)
    *   [来源在 GitHub](https://github.com/thekarladam/MPOAuth)
    *   [维基](http://code.google.com/p/mpoauthconnection/w/list)

（说到“特定网站”，它有没有官方或第三方的iOS SDK？如果有，那么你不需要自己实现OAuth授权。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T12:52:24.043

[您可以在OAuth 教程](http://rodrigo.sharpcube.com/2010/06/29/using-oauth-with-twitter-in-cocoa-objective-c/)上找到一个很好的教程。本教程适用于 MAC 应用程序并使用 Google OAuthCustomer 库。可以在以下 URL 中找到 OAuthCustomer 相关的读数和源代码

1.  [Google OAuth客户](https://code.google.com/p/oauthconsumer/wiki/UsingOAuthConsumer)
2.  [示例应用程序](https://code.google.com/p/oauthconsumer-iphone/)

确保从 iOS 应用程序的 OAuthCustomer 库文件中删除非 ARC 内容

# java - 如何从 Java 验证 DB2 身份验证

> ID：10296835
> 
> 赞同：1
> 
> 时间：2012-04-24T11:18:39.293
> 
> 标签：java, db2

在创建 ant 数据库或执行任何 SQL 查询之前，需要从 Java 验证 DB2 中的用户身份验证。

有没有为此的任何 DB2 命令？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:23:38.747

您可以使用此命令在 db2cmd 上运行以验证用户名

```
db2icrt <db2_instancename> -u <userName> , <passWord> 
```

但是如何从 Java 中使用它，我不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-29T20:00:49.663

您可以使用**DB2Jcc** - *IBM Data Server Driver for JDBC 和 SQLJ*诊断实用程序来测试数据库连接并使用 Java 验证 DB2 身份验证。示例命令及其输出如下所示：

```
$ java com.ibm.db2.jcc.DB2Jcc -url jdbc:db2://myhost.bluemix.net:446/MYDB -user myuserid -password mydbpasswd

[jcc][10521][13706]Command : java com.ibm.db2.jcc.DB2Jcc -url jdbc:db2://myhost.bluemix.net:446/MYDB -user myuserid -password ********

[jcc][10516][13709]Test Connection Successful.

DB product version = DSN11015
DB product name = DB2
DB URL = jdbc:db2://myhost.bluemix.net:446/MYDB
DB Drivername = IBM Data Server Driver for JDBC and SQLJ
DB OS Name = Linux
$ 
```

# c# - 如何将此 2012 年 4 月 23 日 05:41:33 PDT 值转换为 C# 中的日期时间？

> ID：10296837
> 
> 赞同：5
> 
> 时间：2012-04-24T11:18:43.727
> 
> 标签：c#, asp.net

> **可能重复：**
> [使用 PST/CEST/UTC/等形式的时区解析 DateTime](https://stackoverflow.com/questions/241789/parse-datetime-with-timezone-of-form-pst-cest-utc-etc)
> [如何将 PDT 时间字符串转换为 DateTime](https://stackoverflow.com/questions/6941839/how-to-convert-pdt-time-string-to-datetime)

我想将此值 05:41:33 Apr 23, 2012 PDT 转换为 datetime 。

我正在尝试这个，但它给出了一个错误。

```
 DateTime dt = Convert.ToDateTime("05:41:33 Apr 23, 2012 PDT"); 
```

请帮助我，我们如何在 C# 中做到这一点。

谢谢，拉杰比尔

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T11:24:07.680

BCL 中的a的*任何*解析选项`PDT`都无法将其识别为时区。*`DateTime`*

 *如果将其转换为`-0700`解析之前，它将解析正常。

```
string correctedTZ = "05:41:33 Apr 23, 2012 PDT".Replace("PDT", "-0700");
DateTime dt = Convert.ToDateTime(correctedTZ); 
```*

# java - Google App Engine / Objectify 软删除

> ID：10296839
> 
> 赞同：3
> 
> 时间：2012-04-24T11:18:50.993
> 
> 标签：java, google-app-engine, objectify

我在 GAE 上将 Objectify 用于我的 DAO 层，我想让我的大部分实体都可以软删除，让这些实体使用 isActive 布尔值扩展父级是一个好主意，还是应该使用嵌入式还是应该只使用它接口isSoftDeleteable？

我要问的原因是，它似乎 Objectify 以相同的实体类型存储具有相同父类的实体（至少从我在 _ah/admin 中看到的）并且当所有内容都在相同的实体类型下时，它可能会减慢查询速度，也许？

哪个是最好的方法，或者是否有更好的方法在 GAE 中进行软删除？

请提前告知和感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T16:19:18.700

这个问题没有单一的正确答案。最佳解决方案主要取决于您的实体在任何给定时间可能处于已删除状态的百分比。

一种选择是存储一个字段`@Index(IfTrue.class) boolean active;`，并将此过滤器添加到所有查询中：

```
ofy.load().type(Thing.class).filter("size >", 20).filter("active", true) 
```

这样做的缺点是它需要添加额外的索引 - 可能是几个，因为您现在可能需要多属性索引，而单属性索引就足够了。

或者，您可以存储“已删除”标志并从查询结果中手动排除已删除的实体。需要维护的索引更少，但是当您拉回不需要的记录时，它会为每个查询增加额外的开销。如果您删除的条目很少，这无关紧要。

最后一招。您可能会发现最好将已删除的日期存储为索引，因为它可能最有用： `@Index Date deleted;` 这使您`filter("deleted", null)`可以获取活动项目，还可以按日期戳过滤以获取您可能希望清除的真正旧实体。但是，请注意，这将导致删除日期索引到任何多属性索引中，如果您的已删除实体百分比很高，则可能会显着增加索引大小。在这种情况下，您可能希望`@Index(IfNull.class) Date deleted;`并使用 map-reduce 来清除足够旧的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:07:57.470

我同意 StickFigure 的回答。利用“空”索引和“空”索引之间的差异。权衡是每次写入都会产生更多的数据存储写入操作 - 当您添加索引时，每次更新该值时至少需要 2 个额外的写入操作（升序和降序）索引。当您删除索引时，会再写入 2 次。就个人而言，我认为这是值得的。

每当您对实体类型的单个属性进行查询时，查询时间应该是相当可预测的，因为如果您考虑幕后发生的事情，您会在并行批量获取实体之前按顺序浏览项目列表数据。

# c# - 动态关键字导致 Visual Studio 2010 代码分析中的 Cyclomatic Complexity > 25

> ID：10296842
> 
> 赞同：4
> 
> 时间：2012-04-24T11:18:56.933
> 
> 标签：c#, visual-studio, code-analysis, cyclomatic-complexity

我有一段与此类似的代码：

```
dynamic a = new ValueHolder();
dynamic b = new ValueHolder();
dynamic c = new ValueHolder();

a.MtdActual = b.MtdActual + c.MtdActual;
a.YtdActual = b.YtdActual + c.YtdActual;
a.MtdVariance = b.MtdVariance + c.MtdVariance; 
```

我创建了这个例子，根据代码分析，那段代码的圈复杂度是 25。

在 IL spy 中反汇编代码时，您可以看到：

```
object a = new ValueHolder();
object b = new ValueHolder();
object c = new ValueHolder();
if (Program.<ConsumeA>o__SiteContainer2.<>p__Site3 == null)
{
    Program.<ConsumeA>o__SiteContainer2.<>p__Site3 = CallSite<Func<CallSite, object, object, object>>.Create(Binder.SetMember(CSharpBinderFlags.None, "MtdActual", typeof(Program), new CSharpArgumentInfo[]
    {
        CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null), 
        CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
    }));
}
Func<CallSite, object, object, object> arg_159_0 = Program.<ConsumeA>o__SiteContainer2.<>p__Site3.Target;
CallSite arg_159_1 = Program.<ConsumeA>o__SiteContainer2.<>p__Site3;
object arg_159_2 = a;
if (Program.<ConsumeA>o__SiteContainer2.<>p__Site4 == null)
{
    Program.<ConsumeA>o__SiteContainer2.<>p__Site4 = CallSite<Func<CallSite, object, object, object>>.Create(Binder.BinaryOperation(CSharpBinderFlags.None, ExpressionType.Add, typeof(Program), new CSharpArgumentInfo[]
    {
        CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null), 
        CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null)
    }));
}
... 
```

我的问题显然是 if else 和编译器生成的逻辑正在增加复杂性。但是，如果可能的话，我如何将代码分析配置为不在此级别上运行，而是在更简单的编码（预编译）阶段作为第一个代码片段进行评估？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:22:19.953

> 根据代码分析，那段代码的圈复杂度是 25

对于仅包含该代码的方法，我得到 13。您使用的是哪个版本的 Visual Studio，以及您的目标是哪个 .NET Framework 版本？

> 我的问题显然是 if else 和编译器生成的逻辑正在增加复杂性。

是的，编译器正在注入增加复杂性的指令。这不是它这样做的唯一情况。（使用匿名方法是另一个众所周知的 CC 被“增强”的场景。）

> 但是，如果可能的话，我如何将代码分析配置为不在此级别上运行，而是在更简单的编码（预编译）阶段作为第一个代码片段进行评估？

这是不可能的。Visual Studio Code Analysis 和 Code Metrics 使用的计算引擎（在底层是同一个野兽）只分析编译后的 IL。他们从不看源代码。

如果您希望解决指标计算错误，您应该考虑在[https://connect.microsoft.com/VisualStudio/feedback/details/729236/use-of-dynamic-types-makes-cyclomatic-complexity-上支持错误报告几乎毫无意义](https://connect.microsoft.com/VisualStudio/feedback/details/729236/use-of-dynamic-types-makes-cyclomatic-complexity-almost-meaningless)。

# php - 在 PHP 中使用单引号将 ASCII 代码转换为 UTF-8

> ID：10296845
> 
> 赞同：1
> 
> 时间：2012-04-24T11:19:26.807
> 
> 标签：php, character-encoding

我的编码有问题。我想要的输出是：

```
string(17) "New &amp; old" 
```

这也是我使用双引号时的输出。

这是我的代码。我无法更改单引号，因为它是另一个函数的输出。

```
$string = 'New \x26amp\x3Bamp\x3B old';
$string = iconv('ASCII', 'UTF-8//IGNORE', $string);
var_dump($string); 
```

这是我的输出：

```
string(26) "New \x26amp\x3Bamp\x3B old" 
```

那么在使用单引号时如何改变这种行为。您可以将字符串从单引号转换为双引号吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:32:52.343

这是一种方法：

```
$str = preg_replace_callback('/\\\x([0-9A-F]{2})/', function ($m) {
    return pack('H*', $m[1]);
}, $str); 
```

它用它所代表的实际字节替换十六进制表示法。它与Unicode没有太大关系。

# android - Android/ListView : 加载数据后选择第一项

> ID：10296846
> 
> 赞同：2
> 
> 时间：2012-04-24T11:19:31.467
> 
> 标签：android, listview, gmail, tablet

**编辑** 我必须告诉你我的 ListView 是由 AsyncTask 填充的。

当我在 onPostExecute 方法中执行以下代码时，以下代码可以正常工作：

```
synchronized (mListView) {
            if(mFeeds==null || mFeeds.size()==0){
                Utils.Log("mFeeds empty");
                _this.setListShown(false);
            }else{
                Utils.Log("mFeeds Full");
                _this.setListShown(true);
                mListView.setAdapter(new ListFeedsAdapter(mActivity,mFeeds));
                mListView.notifyAll();

                NewsFeedsDetailViewPagerFragment fragment = (NewsFeedsDetailViewPagerFragment) getFragmentManager()
                        .findFragmentById(R.id.feeddetailViewPagerFragment);

                if(fragment!=null){
                    mListView.performItemClick(null, 0, mListView.getFirstVisiblePosition());

                }
            }

        } 
```

单击该项目并填充我的详细信息视图...

我尝试将我的 Fragment 更改为 ListFragment 但没有任何改变......

**编辑结束**

对于我的应用程序，我创建了一个 UI（用于平板电脑），左侧屏幕为 ListView，右侧为详细视图。我想在加载数据后自动选择第一项，并查看详细信息。

我可以通过调用`mListView.performItemClick(null, 0, mListView.getFirstVisiblePosition());`和

```
mListView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
    // TODO Auto-generated method stub

    NewsFeedsDetailViewPagerFragment fragment = (NewsFeedsDetailViewPagerFragment)
            getFragmentManager().findFragmentById(R.id.feeddetailViewPagerFragment);
    if(fragment!=null){
        fragment.setFeedDetail(mFeeds, arg2);
    }
}); 
```

现在，我要做的是突出显示第一个项目，例如平板电脑的 Gmail 应用程序。我在每一行上使用选择器背景，例如：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/selected_item_background" android:state_activated="true"/>
    <item android:drawable="@drawable/pressed_item_background" android:state_activated="false" android:state_pressed="true"/>
    <item android:drawable="@drawable/pressed_item_background" android:state_focused="true"/>
    <item android:drawable="@drawable/unselected_item_background"/>
</selector> 
```

当我`mListView.getChildAt(arg2).setActivated(true);`在 onItemClick 侦听器中使用时，我有一个 NullPointerException，因为`mListView.getChildAt(arg2)`它是 null，只有当我保留 perforItemClick 时。如果我只是评论这一行，然后单击一行，则该行会像在 Gmail 应用程序中一样突出显示。

你能帮我告诉我我做错了什么吗？

预先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:36:07.040

我找到了解决我的问题的方法，如果有处于相同情况的开发人员，我会在此处发布解决方案。

我在我的适配器中创建了一个必须激活标志位置的方法，在我的 getView 方法中，我只是将当前位置与标志进行比较并激活或不激活该行：

```
((ListFeedsAdapter) mListView.getAdapter()).setItemSelected(mOldPosition); 
```

在适配器中：

```
private int mItemSelected = -1 ;
public void setItemSelected(int position){
mItemSelected=position;
}

public View getView(int position, View convertView, ViewGroup parent){
       //some code ....
    if(mItemSelected==position){
        convertView.setActivated(true);
    }else{
        convertView.setActivated(false);
    }
} 
```

谢谢 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T13:16:16.180

我认为这是因为您在`performItemClick()`方法中传递了 null ：

```
mListView.performItemClick(null, 0, mListView.getFirstVisiblePosition()); 
```

尝试类似：

```
mListView.performItemClick(mListView.getChildAt(0), 0, mListView.getFirstVisiblePosition()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:24:05.173

你试过 setSelection() 吗？

```
mListView.setSelection(0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T05:34:44.033

我知道答案被接受，但如果这对某人有帮助。

如果您想在列表加载时自动选择/播放列表视图的第一个视图，那么您应该访问此链接。我一直在寻找同样的东西，并找到了 post() 方法，它等到你的列表被填满。

这是我的问题链接：-[在 android 中加载列表视图时访问列表的第一项](https://stackoverflow.com/questions/19678918/accessing-lists-first-item-when-list-view-is-loaded-in-android)

这是它的解决方案链接：- [notifyDataSetChanged 后的 smoothScrollToPosition 在 android 中不起作用](https://stackoverflow.com/questions/6942582/smoothscrolltoposition-after-notifydatasetchanged-not-working-in-android/6944587#6944587)

但是，在 getView() 中编写任何代码都会花费您，因为 getView 会被重复调用。谢谢。

# jquery - JSON解析结果错误

> ID：10296847
> 
> 赞同：0
> 
> 时间：2012-04-24T11:19:36.417
> 
> 标签：jquery, json

我正在解析从 Cakephp 2.0 Controller 返回的字符串。

我的自动完成代码是..

```
jQuery("#name").autocomplete( '<?php echo HTTP_PATH.'/lensmaterials/getBrands'; ?>', {
    multiple: true,
    mustMatch: true,
    matchContains: true,
    autoFill: false,
    dataType: "json",
    parse: function(data) {
        return $.map(data, function(item) {
            return { data: item, value: item.label, result: item.label};
        });
    },
    formatItem: function(item) {
        return '<li>' + item.label + '</li>';
    }
}); 
```

我得到的列表是 Value，而不是 undefined，而不是 value 而不是 undefined。它以萤火虫中的错误结束了我。如果我选择比值未在我的文本框中输入。我想要美丽的价值。那是在 ul 中显示列表的 Div，li ...

我的控制器代码是..

```
public function getBrands(){
    $brandList = $this->Brand->find('list',array('fields'=>array('id','brand_name'),'order' => array('Brand.brand_name')));
    //pr($brandList); exit;
    foreach ($brandList as $key => $name) {
        $json_output[]['id'] = $key;
        $json_output[]['label'] = $name;
    }
    echo json_encode($json_output);
    $this->autoRender = false;
} 
```

返回 JSON 字符串是

```
 [{"id":1},{"label":"Bvlgari"},{"id":2},{"label":"Chanel"},{"id":7},{"label":"D & G"},{"id":8},{"label":"Dior"},{"id":10},{"label":"Emporio Armani"},{"id":11},{"label":"Fendi"},{"id":12},{"label":"Giorgio Armani"},{"id":13},{"label":"Gucci"},{"id":14},{"label":"Oakley"},{"id":15},{"label":"Oliver Peoples"},{"id":16},{"label":"Paul Smith"},{"id":4},{"label":"Polo Ralph Lauren"},{"id":18},{"label":"Prada"},{"id":19},{"label":"Prada Linea Rossa"},{"id":20},{"label":"Ray Ban"},{"id":21},{"label":"Tiffany"},{"id":3},{"label":"Tom Ford"}] 
```

最终它没有在我输入时返回。那就是我有香奈儿，如果我输入的不是未格式化和未定义的，就永远不会继续我的键盘输入。它保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:25:34.440

我认为您的数据格式错误。和属性应该在同一个对象中`id`。`label`您的一半对象没有`label`属性，因此尝试访问它会导致`undefined`（即您得到`{data: {...}, value: undefined, result: undefined}`）。

将您的生成过程更改为：

```
foreach ($brandList as $key => $name) {
    $json_output[] = array('id' => $key, 'label' => $name);
} 
```

然后输出将是：

```
[{"id":1,"label":"Bvlgari"},{"id":2,"label":"Chanel"},...] 
```

# asp.net-mvc-3 - httpErrors 未使用 MVC 3 重定向到正确的页面

> ID：10296850
> 
> 赞同：2
> 
> 时间：2012-04-24T11:19:48.903
> 
> 标签：asp.net-mvc-3, custom-error-pages, http-error, custom-errors

我正在尝试在我的 MVC 3 Web 应用程序中设置 http 自定义错误页面。我在 web.config 中添加了以下内容：

```
<httpErrors errorMode="Custom" defaultResponseMode="ExecuteUrl" defaultPath="/Error/404">
  <clear />
  <error statusCode="500" path="/Error/404"
</httpErrors> 
```

当请求发生 500 错误时，我希望这会重定向用户 my.domainname.com/Error/404。

我有一个错误控制器，其中包含一个称为错误的操作，我已将 404 请求映射到此操作。

当我在网站上强制出现 500 错误（由 chrome 开发人员工具网络选项卡验证）时，我收到一个空白页面，其中包含以下消息：

“该页面无法显示，因为发生了内部服务器错误。”

如果我从 web.config 中删除 httpErrors 部分，那么我会收到实际的异常消息。因此，我在 web.config 中的 httpErrors 部分必须正常工作，我只是不明白如何正确设置它。

以下是我选择的属性列表以及原因：

errorMode="Custom"：这样我就可以看到自定义错误页面并在将其更改为仅本地之前验证它是否正常工作。

defaultResponseMode="ExecuteUrl"：这应该允许我指定一个服务器相对 url 作为路径，这听起来像我想要的，因为我想点击一个控制器动作。

defaultPath="/Error/404"：如果我没有指定，我想要请求的相对 url。

编辑：

我应该补充一点，该站点在 IIS 7.5 上运行。我也不希望使用该标签，因为它旨在与 IIS 6 一起使用，并且应该用于 IIS 7+。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:29:47.820

尝试改用 web.config（system.web 内部）中的 customErrors 部分。

[http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)

例如

```
<customErrors mode="On">
        <error statusCode="404" redirect="Error/404" />
        <error statusCode="500" redirect="Error/500" />
    </customErrors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:32:44.170

应该是这样的`Controller/Action/Id`。在您的情况下，缺少 Action。检查以下示例并根据您的操作方法进行更改...

```
<system.web>
    <customErrors mode="On" defaultRedirect="/Error/Index/" >
      <error statusCode="401" redirect="/Error/NoAccess/" />
      <error statusCode="404" redirect="/Error/NotFound/" />
    </customErrors>
    ....
</system.web> 
```

# html - css display none 属性不适用于 Internet Explorer 上的 contenteditable div

> ID：10296853
> 
> 赞同：0
> 
> 时间：2012-04-24T11:20:04.317
> 
> 标签：html, css, internet-explorer-7, contenteditable

我必须插入一些跨度以将选择保存/恢复到 contentEditable div。不幸的是，这些跨度必须包含至少一个字符才能允许“range.setStart(startNode,0);” 功能正常工作。所以，这是我的一组元素：

```
<div contentEditable='true' id='THE_DIV'>
   some text
      <span id='START_SELECTION'>xxx</span>
         selected text
      <span id='END_SELECTION'>yyy</span>
   other text
</div> 
```

现在通过将 span display 属性设置为 none 应该没有问题，但是虽然 Fire Fox 正确隐藏了元素，但 Internet Explorer (7) 似乎忽略了它。

我注意到这种行为与 contentEditable 属性有关，但不幸的是我需要两者（contentEditable 父 div 和隐藏跨度子项）。

你有什么建议吗？

先感谢您，

弗拉维奥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T11:52:11.730

这是 IE 中的故意行为。您可以运行一个[鲜为人知的命令来禁用它：](http://msdn.microsoft.com/en-us/library/aa770023%28VS.85%29.aspx)

```
document.execCommand("RespectVisibilityInDesign", false, true); 
```

看这个演示：http: [//jsfiddle.net/DGWZF/1/](http://jsfiddle.net/DGWZF/1/)

另外，你看过[Rangy 的选择保存和恢复模块](http://code.google.com/p/rangy/wiki/SelectionSaveRestoreModule)吗？它完全符合您的要求。披露：我是 Rangy 的主要开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:55:58.417

非常感谢蒂姆，我已经尝试过你的 Rangy 插件（查看之前的几个答案），它与我正在寻找的非常接近。不幸的是，当通过箭头键移动光标时，我注意到 FF 中有一个奇怪的行为。当光标进入一个跨度与另一个跨度时，左箭头不起作用。

我试图更清楚：

```
<div contenteditable='true' id='THE_EDITOR'>
   some text <span class='in_red'>other in red</span><span class='in_blue'>||or in blue</span>
</div> 
```

我用过“||” 来表示光标。在这种情况下：`<span></span><span>||</span>` 左箭头无法在 FF 中移动光标（我不明白原因），但如果两个元素之间至少有一个字符，则可以正常工作：`<span></span>[space]<span>||</span>`

如果您想尝试重现此“错误”，则代码为（使用 JQuery）：

```
$("#THE_EDITOR").attr("contentEditable","true").keyup(function(){

   var savedSel = rangy.saveSelection();

   //this blok is only to clean the HTML code every time
   $(this).children(".star").each(function(){
      $(this).after($(this).html());
      $(this).remove();
   });

   //to wrap the spewial word "*" with a personal formatting span
   var str = $(this).html();
       str = str.split("*").join("<span class='star'>*</span>");

   $(this).html(str);

   rangy.restoreSelection(savedSel);
   rangy.removeMarkers(savedSel);
}); 
```

如果您尝试按顺序键入两个或多个“*”，然后使用左箭头向后移动，光标将不会移动。在它们之间放置一个空格或另一个字符，它会再次移动。

# c++ - 与字符串有关

> ID：10296854
> 
> 赞同：1
> 
> 时间：2012-04-24T11:20:12.797
> 
> 标签：c++, c

```
//SECTION I:
void main()
{
    char str[5] = "12345";  //---a)
    char str[5] = "1234";   //---b)
    cout<<"String is: "<<str<<endl;
}
Output: a) Error: Array bounds Overflow.
        b) 1234

//SECTION II:
void main()
{
    char str[5];
    cout<<"Enter String: ";
    cin>>str;
    cout<<"String is: "<<str<<endl;
} 
```

> 我尝试了许多不同的输入字符串，令我惊讶的是，我得到了奇怪的结果：
> 
> > 案例一：输入字符串：1234，输出：1234（没问题，因为这是预期的行为）
> > 
> > 案例二：输入字符串：12345，输出：12345（编译器没有报告错误，但我期待一个错误：数组边界溢出。）
> > 
> > 案例三：输入字符串：123456，输出：123456（编译器没有报告错误，但我期待一个错误：数组边界溢出。）
> > 
> > ..................................................................
> > 
> > ..................................................................
> > 
> > 案例六：输入字符串：123456789，输出：123456789（错误：未处理的异常。访问冲突。）

我的疑问是，当我在 SECTION I 中分配的字符数超过其容量时，编译器会报告错误：数组边界溢出。

但是，当我在第 II 部分尝试同样的事情时，我没有收到任何错误。为什么会这样？？请注意：我在 Visual Studio 上执行了这个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T11:24:44.937

```
char str[5] = "12345"; 
```

这是一个编译时错误。您将长度为 6 的字符串（注意附加的[null-termination](http://en.wikipedia.org/wiki/Null-terminated_string)）分配给大小为 5 的数组。

* * *

```
char str[5];
cin>>str; 
```

这可能会产生运行时错误。根据您输入的字符串的长度，您提供的缓冲区（大小 5）可能太小（再次注意空终止）。

* * *

编译器当然无法在运行时检查您的用户输入。如果幸运的话，Segmentation Faults 会通知您这样的访问冲突。真的，任何事情都可能发生。

对访问冲突抛出异常不是强制性的。为了解决这个问题，您可以自己实现数组边界检查，或者（可能更好）有容器类根据需要调整它们的大小（`std::string`）：

```
std::string str;
cin >> str; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T11:26:14.703

您所看到的是未定义的行为。您正在编写超出范围的数组，在这种情况下可能会发生任何事情（（包括看到您期望的输出）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T11:25:32.923

> 我尝试了许多不同的输入字符串，令我惊讶的是，我得到了奇怪的结果：

这种现象称为**未定义行为**（UB）。

一旦您输入的字符数超过`char`数组可以容纳的字符数，您就会邀请 UB。
有时，它可能会起作用，有时它可能不起作用，它可能会崩溃。简而言之，没有*明确的*模式。

[*旁注*：如果编译器允许`void main()`编译，那么它不符合标准。]

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T11:31:04.540

这是因为在第二种情况下，编译器无法知道。只有在运行时，才会有错误。默认情况下，C / C++ 不提供运行时边界检查，因此无法识别错误，但会“破坏”您的程序。但是，这种中断不必立即出现，但是虽然 str 指向内存中仅保留固定数量的字节的位置，但无论如何您只需写入更多字节。

您的程序的行为将是未定义的。通常，在您的特定情况下，它可能会继续工作，并且您将覆盖其他一些组件的内存。一旦你写了这么多来访问被禁止的内存（或两次释放相同的内存），你的程序就会崩溃。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-24T11:31:52.970

`char str[5] = "12345"`- 在这种情况下，您没有为空终止符留出空间。因此，当应用程序尝试打印时`str`，只要没有遇到 null，它就会继续运行，最终会踩到被禁止的内存并崩溃。

在这种``cin`情况下，cin 操作在字符串的末尾填充了 0，因此这可以防止程序在内存中走得太远。

然而，根据我的经验，当内存溢出违反规则时，事情会变得疯狂，并寻找一个原因，为什么在一种情况下它可以工作，而在另一种情况下它不起作用，不会导致任何地方。由于内存状态不同，同一个应用程序（内存溢出）通常可以在一台 PC 上运行并在另一台 PC 上崩溃。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-24T11:29:28.113

因为编译器会进行静态检查。在你的第二部分，尺寸是事先未知的。这取决于您的输入长度。

我可以建议你使用 STL 字符串吗？

# python - 尝试从元组列表中删除基于 var[0] 的元组，有一些是剩余的吗？

> ID：10296855
> 
> 赞同：3
> 
> 时间：2012-04-24T11:20:26.577
> 
> 标签：python, python-2.7, pygame, pydev

我不明白为什么这部分代码没有从 List[of tuples()] 中删除“策略”（元组）

```
def _cleanup(self):
    for tactic in self._currentTactics:
        if tactic[0] == "Scouting":
            if tactic[1] in self._estimate.currently_visible:
                self._currentTactics.remove(tactic)
        elif tactic[0] == "Blank":
            self._currentTactics.remove(tactic)
        elif tactic[0] == "Scout":
            self._currentTactics.remove(tactic) 
```

我的 IDE (pydev) 的屏幕截图以及更多调试信息可在以下网址获得：http: [//imgur.com/a/rPVnl#0](http://imgur.com/a/rPVnl#0)

编辑：我注意到的错误修复和改进。澄清一下，“空白”被删除，“侦察”在必要时被删除，“侦察”战术并没有被删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:31:20.333

在迭代列表时，您正在从列表中删除成员。通过这样做，您将错过列表中的某些元素。您需要迭代列表的副本。

改变：

```
for tactic in self._currentTactics: 
```

至：

```
for tactic in self._currentTactics[:]: 
```

# php - PHP mail（）除了在gmail上不发送电子邮件

> ID：10296856
> 
> 赞同：0
> 
> 时间：2012-04-24T11:20:28.150
> 
> 标签：php, email

我写了一个邮件脚本；

```
<?php
$to = 'something@domain.com';
$subject = 'This is subject!';
$body = 'Welcome to our website!';
$headers = 'From: myemail@mydomain.com' . "\r\n" .
        'Reply-To: myemail@mydomain.com' . "\r\n" .
        'X-Mailer: PHP/' . phpversion();
$sent = mail($to, $subject, $body, $headers);
if($sent) {
    echo "Your mail has been sent to ". $to .".";
} else {
    echo "You mail was not sent.";
}
?> 
```

而且我可以看到回显“您的邮件已发送到someone@somedomain.com”，无论电子邮件是什么，在所有情况下都发送邮件，**但电子邮件仅发送**到**something@gmail.com，但从未**发送到某**事@hotmail.com**或**something@yahoo.com 或 something@domain.com（托管在谷歌应用程序上）**。

我想知道是否缺少任何服务器配置或服务器已被阻止 hotmail/yahoomail 或任何错误？你们有什么可以帮助/建议我的吗？

我已经将我的 cPanel 邮件配置为在谷歌应用程序上接收，但我认为这并不重要，因为我正在尝试发送邮件，而不是在此处接收此代码。

是的，我试过检查垃圾邮件/垃圾文件夹，还等了很多分钟才看到它们没有送达。;(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:27:04.167

您好，请同时检查发件人的电子邮件发件箱，发件箱中可能有邮件并带有一些错误消息。或者可能是您的主机上的反向 DNS 设置不正确..谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:36:18.707

在发送之前，您必须使用密码验证您的电子邮件，这样它就不会在服务器中被阻止。如果您使用 phpmailer 之类的邮件类发送邮件，以下示例将对您有所帮助。

```
$mail->IsSMTP(); // telling the class to use SMTP  
$mail->Username   = "yourname@yourdomain"; // SMTP account username

$mail->Password   = "yourpassword";        // SMTP account password 
```

[Php mailer](http://phpmailer.worxware.com/) -- 在本网站下载 phpmailer。
[SMTP 演示](http://phpcode.mypapit.net/sending-mail-using-smtp-with-phpmailer/26/)——很好的教程如何使用 php mailer 发送经过身份验证的邮件。

# clojure - Clojure 中的 '() 和 (list) 有什么区别？

> ID：10296857
> 
> 赞同：21
> 
> 时间：2012-04-24T11:20:36.780
> 
> 标签：clojure

Lists 上的[API Cheatsheet](http://clojure.org/cheatsheet)部分似乎表明这`'()`是一个列表构造函数，就像`(list)`，但我发现在实践中它们并不完全相同。例如，给定：

```
(def foo "a")
(def bar "b")
(def zip "c") 
```

以下声明：

```
(apply str '(foo bar zip)) 
```

产生输出“foobarzip”，这是我没想到的。

但应该是等价的：

```
(apply str (list foo bar zip)) 
```

正如我所料，产生“abc”。

这里发生了什么？如果 Clojure 中有一个列表的“速记”（例如`{}`地图和`[]`向量），它是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-24T11:31:38.990

在 lisps 中，`'`(like `quote`) 引用它的参数，即保留它们几乎完全按照它们的 s-exp 形式编写，包括不评估其中的任何内容。

换句话说，`'(foo bar zip)`创建一个包含符号`foo`, `bar`, `zip`;的列表 while`(list foo bar zip)`创建一个包含, ,的*值*的列表。在第一种情况下，将符号本身转换为字符串，然后将它们连接起来。`foo``bar``zip``str`

作为对此的示范：

```
=> (def foo "a")
=> (type (first '(foo)))
clojure.lang.Symbol
=> (type (first (list foo))) 
java.lang.String 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-24T11:33:35.060

不同之处在于，如您所见，文字语法`'()`是带*引号*的。这意味着内部的符号不会被评估。要在评估元素时使用列表文字，您可以利用[`syntax-quote`](http://clojure.org/reader#The%20Reader--Macro%20characters)阅读器宏：

```
user=> (apply str `(~foo ~bar ~zip))
"abc" 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-14T00:31:26.017

当你写：

```
(def foo "a")
(def bar "b")
(def zip "c") 
```

您已经定义了三个符号：`foo`和`bar`与`zip`值相关联`"a"`：`"b"`和`"c"`。

关联存储在 namsepace 表中，因此如果使用 REPL，命名空间将`user`默认为，因此用户命名空间表现在将包含：

```
{foo
#'user/foo
bar
#'user/bar,
zip
#'user/zip} 
```

您可以通过执行以下操作查看命名空间表：`(ns-interns *ns*)`

现在，如果你写：`(foo bar zip)`在 Clojure 中，读者可以通过四种不同的方式来阅读它。您需要向读者指定应该以哪种方式阅读。这就是```，`'`并`list`开始发挥作用。

**无指标情况：**

```
(foo bar zip) 
```

当简单地编写而没有任何指示符时，读者会将其解释为 S 表达式，并将解释`foo`为映射到函数的符号，`bar`以及`zip`映射到要传递给`foo`函数的值的符号。

在我们的例子中，它会抛出一个异常：

```
java.lang.ClassCastException: java.lang.String cannot be cast to clojure.lang.IFn 
```

这是因为没有`foo`定义函数，`foo`与 关联`"a"`，它是一个字符串，而不是一个 IFn（一个 Clojure 函数）。

如果`foo`定义了函数，它将调用`foo`作为参数传入`"b"`和`"c"`.

**案例`list`：**

```
(list foo bar zip) 
```

使用列表符号时，读者实际上是在以与没有指示符的情况相同的方式解释这一点。也就是说，它正在寻找一个`list`映射到一个函数的符号，该函数将映射到和`foo`作为参数的关联值。该函数由 Clojure 在 clojure.core 命名空间内预定义；它返回它的参数列表。`bar``zip``list`

因此，当读者查找 时`list`，它会找到 clojure.core 函数，然后查找`foo`符号，并发现它映射到`"a"`，依此类推。一旦找到符号的所有映射，它就会调用`list`并将 的相关值传递给它`foo bar zip`，这将是`"a" "b" "c"`. 所以`(list foo bar zip)`是一样的`(list "a" "b" "c")`。

**案例`'`：**

```
'(foo bar zip) 
```

引文告诉读者，下面`'`的形式应按原样阅读。在我们的例子中`foo`，`bar`和`zip`是符号，并且`(foo bar zip)`是符号列表。所以读者会将其解释为符号列表。

这就是为什么当你运行`(apply str '(foo bar zip))`它会打电话`str 'foo 'bar 'zip`给你的原因`foobarzip`。也就是说，它将符号列表中的每个符号转换为字符串表示，然后将它们连接成一个字符串。

通过采用原样的形式，它将符号列表作为参数传递，而不评估符号，即，不查找它们与什么相关联。如果您运行`(eval '(foo bar zip))`，您会将符号列表传递给`eval`，并将`eval`符号评估为值并返回符号映射到的值列表。因此，您可以将引用`'`视为将代码作为代码传递。

**案例```：**

```
`(foo bar zip) 
```

这个有点复杂。读者将看到反引号```并将递归地解析符号列表中的符号以获得完全限定符号的列表。

基本上，当阅读器在符号表中查找符号时，它会从当前命名空间的符号表中进行查找。完全限定符号是包含命名空间信息的符号。因此，在运行时``(foo bar zip)`，阅读器会将这些符号替换为完全限定的符号，将其转换为`(user.foo user.bar user.zip)`.

可以告诉读者评估列表中的一些元素，同时将其他元素更改为完全限定的符号。为此，您需要在要评估的符号前面加上`~`：

```
`(foo ~bar zip) 
```

会给你

```
(clojure.foo "b" clojure.zip) 
```

实际上，反引号与引号```非常相似，`'`因为它不计算，而只是返回代码，除了它通过其中的完全限定符号来操纵要返回的代码。这对宏有影响，有时您可能需要完全限定的引用，从另一个命名空间中获取，有时您希望灵活地说，在当前命名空间中查找此符号。

# r - 查找行中第二高值的列号和值

> ID：10296866
> 
> 赞同：7
> 
> 时间：2012-04-24T11:21:03.680
> 
> 标签：r, dataframe, plyr

我正在尝试编写一些代码来识别每行的最大两个值并提供它们的列号和值。

```
df = data.frame( car = c (2,1,1,1,0), bus = c (0,2,0,1,0),
                 walk = c (0,3,2,0,0), bike = c(0,4,0,0,1)) 
```

`max`我已经设法让它使用and`max.col`函数来实现最大值。

```
df$max = max.col(df,ties.method="first")
df$val = apply(df[ ,1:4], 1, max) 
```

据我所知，没有第二高值的等效函数，所以这样做让事情变得有点棘手。使用此代码提供了第二高的价值，但（重要的是）不是在有关系的情况下。而且看起来风险很大。

```
sec.fun <- function (x) {
  max( x[x!=max(x)] )
}

df$val2 <- apply(df[ ,1:4], 1, sec.fun) 
```

理想情况下，该解决方案不涉及删除任何原始数据，并且可用于找到第三、第四……最高值，但这些都不是基本要求。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-24T11:33:49.737

试试这个：

```
# a function that returns the position of n-th largest
maxn <- function(n) function(x) order(x, decreasing = TRUE)[n] 
```

这是一个闭包，所以你可以这样使用：

```
> # position of the largest
> apply(df, 1, maxn(1))
[1] 1 4 3 1 4
> # position of the 2nd largest
> apply(df, 1, maxn(2))
[1] 2 3 1 2 1
> 
> # value of the largest
> apply(df, 1, function(x)x[maxn(1)(x)])
[1] 2 4 2 1 1
> # value of the 2nd largest
> apply(df, 1, function(x)x[maxn(2)(x)])
[1] 0 3 1 1 0 
```

*更新*

为什么在这里使用闭包？

一个原因是您可以定义一个函数，例如：

```
max2 <- maxn(2)
max3 <- maxn(3) 
```

然后，使用它

```
> apply(df, 1, max2)
[1] 2 3 1 2 1
> apply(df, 1, max3)
[1] 3 2 2 3 2 
```

我不确定优势是否明显，但我喜欢这种方式，因为这是更实用的方式。

# image - PhoneGap 允许从外部 URL 保存图像

> ID：10296867
> 
> 赞同：1
> 
> 时间：2012-04-24T11:21:05.157
> 
> 标签：image, cordova, webview, save

我如何允许用户通过长按 PhoneGap Webview 上的图像来保存图像？现在，如果我按下图像没有任何反应，但是在本机浏览器中弹出菜单（将图像另存为，保存图像，设置为墙纸）。我需要在 PhoneGap 中发生这种情况，就像在本机浏览器中一样。

```
package com.phonegap.helloworld;

import android.os.Bundle;
import org.apache.cordova.*;
import android.view.WindowManager;

public class App extends DroidGap {
    /** Called when the activity is first created. */
    @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);

        super.setIntegerProperty("splashscreen", R.drawable.splash);
        super.setStringProperty("loadingDialog", "Loading please wait...");

        super.loadUrl("http://www.mywebsite.com", 5000);

    }
} 
```

# php - 工作计划：找UI设计自己做

> ID：10296868
> 
> 赞同：0
> 
> 时间：2012-04-24T11:21:25.023
> 
> 标签：php, user-interface, extjs

我正在用 ExtJS 开发一个管理面板。

除了一件事，我几乎完成了它：我需要登录的“合作伙伴”能够在他/她工作时进行配置。

我喜欢重新发明轮子，但感谢 ExtJS 和我的结构，这不会是一个问题。

实际的问题是关于 UI 设计：

*   我想变得非常简单，以便可以输入非常简单的值，例如“我每个工作日从 8 点工作到 12 点，然后从 14 点到 18 点”
*   我想让它更具可配置性并能够准确地说“我从 7 月 1 日到 8 月 31 日休假”
*   我想让它*更加*可配置并且能够精确地“一月，我每天从 8 点到 20 点不停地工作”。

我一直在寻找 Microsoft Scheduler 的一些灵感，但老实说，一个基本用户永远不会（永远 x 87）能够在他/她工作时使用这样的 UI 进行配置

与 unix cronjob 相同。从我的角度来看，从基本用户的角度来看，这很难理解。

所以我的问题是：你知道我在哪里可以找到一些灵感吗？也许如果那里有一些写得很好的 PHP 组件来处理这些事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T15:43:52.420

这是我这样做的方式：包含以下行的“列表”：

*   开始时间
*   结束时间
*   开始日期
*   结束日期

以及相关日期的列表。

这种方式可以配置任何类型的场景，即使它需要一些思考，因为你不必以“自然”的方式输入它（=你通常认为你工作的第一天，小时数，*也许*开始/结束天数 = 这与我的配置相反）。

# java - 完全动态地创建 JPA 标准

> ID：10296870
> 
> 赞同：6
> 
> 时间：2012-04-24T11:21:30.023
> 
> 标签：java, generics, jpa-2.0, criteria-api

通常我是 Hibernate 用户，对于我的新项目，我们使用 JPA 2.0。

我的 DAO 收到一个带有泛型的 Container。

```
public class Container<T> {
  private String fieldId;    // example "id"
  private T value;           // example new Long(100) T is a Long
  private String operation;  // example ">"

  // getter/setter
} 
```

以下行不会编译：

```
if (">".equals(container.getOperation()) {
  criteriaBuilder.greaterThan(root.get(container.getFieldId()), container.getValue());
} 
```

因为我必须像这样指定类型：

```
if (">".equals(container.getOperation()) {
  criteriaBuilder.greaterThan(root.<Long>get(container.getFieldId()), (Long)container.getValue());
} 
```

但我不想那样做！因为我在容器中使用了泛型！你有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T11:37:01.100

只要你`T`是`Comparable`（它是必需的`greaterThan`），你应该能够执行以下操作：

```
public class Container<T extends Comparable<T>> { 
    ...
    public <R> Predicate toPredicate(CriteriaBuilder cb, Root<R> root) {
        ...
        if (">".equals(operation) {
            return cb.greaterThan(root.<T>get(fieldId), value);
        } 
        ...
    }
    ...
} 
```

# jquery-mobile - 标题与 jquery-mobile 中的内容 DIV 重叠

> ID：10296872
> 
> 赞同：3
> 
> 时间：2012-04-24T11:21:31.820
> 
> 标签：jquery-mobile, backbone.js

我认为这将是 jquery-mobile 1.1.0 RC 的问题。但在最终版本中我也遇到了这个奇怪的问题，我的标题与我的内容 div 重叠：

![包含导航栏的标题与我的内容 div 重叠](../Images/e2f86e63115ef1e12ea41fe452646ee4.png)

当我现在单击内容 div 中的某个位置时，页面会重新呈现，并且内容 div 位于正确的位置（标题正下方）。

我正在使用 Backbone.js 视图来表示内容，并使用 jquery-mobile-router。我几乎尝试了所有方法，但找不到任何解决此问题的方法。

有谁知道解决方案？

html:

```
<!-- newsoffers page -->
<div data-role="page" id="newsoffers">
    <div data-role="header" data-theme="a" data-fullscreen="false" data-position="fixed">
    </div>
    <!-- /content -->
    <div data-role="content" data-scroll="true" class="content-full">
    </div>
    <!-- /content -->
    <div id="newsoffersFooter" data-role="footer" data-position="fixed" data-fullscreen="false" data-id="mainFooter" data-theme="b">
    </div>
    <!-- /footer -->
</div> 
```

标头的代码是动态注入的！当“pagebeforeshow”事件被触发时，内容将被注入。

![显示页面的代码](../Images/91b210ffcb5e809c33f01d73205c316b.png)

“setNavBarCollection”将主干集合添加到标题中，然后将其呈现为导航栏。“refreshOffers”函数生成一个包含异步获取的主干集合的视图。

# javascript - 电话号码文本框问题

> ID：10296873
> 
> 赞同：2
> 
> 时间：2012-04-24T11:21:40.273
> 
> 标签：javascript, jquery, asp.net

我有三个`Textboxes`电话号码。`Textbox1 max length is 3`,`2nd's max length is 3`和`3rd max length is 4`. 当用户自动键入`three digits`时`TextBox1`，TextBox3 也会发生同样的事情。我正在处理这个功能。`cursor moves``TextBox2``TextBox2``keyup`

![在此处输入图像描述](../Images/841de8f22b9f69517633e73e9e2cf7c6.png)

问题是，当我按下

`Ctl`+`a`

`Ctl`+`c`

`Ctl`+`v`

光标自动移动到，`Textbox3`因为`Textbox`到达它`Max Length`并导航到 next `Textbox`。我想保持它`TextBox1`。有任何想法吗？

## 我的代码如下。

```
<asp:TextBox runat="server" ID="tbPh2" MaxLength="3" onkeyup="Mainautotab2(this, 0, event);"/>
<asp:TextBox runat="server" ID="tbPh22" MaxLength="3" onkeyup="Mainautotab2(this, 1, event);"/>
<asp:TextBox runat="server" ID="tbPh222" class="midium" MaxLength="4" />

function Mainautotab2(original, destination, evt) {
         if (document.getElementById('<%= tbPh2.ClientID%>').value.length == 3 && document.getElementById('<%= tbPh22.ClientID%>').value.length == 3) {

         if (destination == 0)
             document.getElementById("<%=tbPh22.ClientID %>").focus();
         if (destination == 1)
             document.getElementById("<%=tbPh222.ClientID %>").focus();
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T11:25:21.377

我建议检查是否使用了被按下的控制键，有关如何执行此操作的更多信息，[请参阅这篇文章。](https://stackoverflow.com/questions/9364338/cmd-enter-keyup-combination-detection-using-javascript)如果您检测到按下了 CTRL 键，则不要移动到下一个文本框。

或者，如果您只希望“移动到下一个”功能在用户输入第三个字符时工作，那么可能类似于检查 keydown 上的字符数。确保在第三个字符中的这个新按键和之前的按键是第二个字符（即在某处存储 lastKeyPressCount）

* * *

因为我是一个很好的人！这是我自己的一些工作：

html

```
<input type="text" id="1" maxlength="3" data-nextid="2"/>
<input type="text" id="2" maxlength="3" data-nextid="3"/>
<input type="text" id="3" maxlength="4"/>​ 
```

JavaScript（带 JQuery）

```
$("input").keyup(function(e){
    if(e.ctrlKey || e.which == 17 || e.which == 65 || e.which == 67 || e.which == 86){
        return;        
    }
    if($(this).val().length == $(this).attr("maxlength")){
        var nextid = $(this).data("nextid");
        if(nextid){
              $("#" + nextid).focus();       
        }
    }
});​ 
```

请记住，此代码已专门设置为忽略除字母 A、C 和 V 之外的 CTRL 键。

[有关工作示例，请参见此处](http://jsfiddle.net/musefan/qsq3t/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:17:27.783

不要使用 OnKeyUp 事件。使用文本框的 TextValueChanged 并计算文本框中文本的长度

# java - Base64 错误：图像内容不是有效的 base64 数据 java

> ID：10296877
> 
> 赞同：6
> 
> 时间：2012-04-24T11:21:51.287
> 
> 标签：java, android, image, magento, base64

我正在将图像流式传输到 Magento，并`android.util.Base64`使用以下任一方法对图像进行编码：

```
Base64.encodeToString(content, Base64.CRLF)
Base64.encodeToString(content, Base64.DEFAULT) 
```

但我总是收到错误：

```
The image contents is not valid base64 data 
```

> 工作：我发现数据必须编码两次，一次使用 Base64，另一次使用自定义库编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-01T12:15:41.090

尝试从图像的 base64 代码中删除数据节点。

例如，如果您有类似的数据，`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVQAAABXCAYAA...` 则删除数据节点。它应该如下所示并将其传递给 Magento。

```
iVBORw0KGgoAAAANSUhEUgAAAVQAAABXCAYAA... 
```

# jquery - 使用 css 和 jquery 的滑块

> ID：10296879
> 
> 赞同：-1
> 
> 时间：2012-04-24T11:22:03.863
> 
> 标签：jquery, html

我想使用 jquery 制作滑块，所以我已经制作了在左侧属性中添加值的函数，现在我想要当滑块 div 结束时，它假设来自其父 div 的右侧，就像选框一样，但不想使用选框。

[http://jsfiddle.net/](http://jsfiddle.net/)

```
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
        var left = 0;
        $(function moveable() {

            $('#slider').css('left', --left);

            setTimeout(moveable, 10)

        })
    </script>
    <style>
        .main {
            margin: 0 auto;
            width: 500px;
            height: 200px;
            border: solid 1px #F00;
            overflow: hidden
        }
        #slider {
            position: relative;
            background: #333;
            height: 200px;
        }

    </style>
</head>
<body>
    <div class="main">
        <div id="slider">
            <img src="slider.jpg" width="500" height="200" />
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:22:15.267

尝试这样的事情

```
 <html xmlns="http://www.w3.org/1999/xhtml">
                    <head>
                    <script src="http://code.jquery.com/jquery-latest.js"></script>
                    <style>
                    .main { margin:0 auto; width:500px; height:200px; border:solid 1px #F00; overflow:hidden}
                    #slider {position:relative; background:#333; height:200px;}
                    </style>
                    </head>
                    <body>
                    <div class="main">
                    <div id="slider">
                      <img src="test.png" width="500" height="200" alt="image" id="slider_img" /></div>
                    </div>
                    <script type="text/javascript">
                        var left=0;
                         $("#slider_img").click(function () {
                         $(function moveable(){
                        $('#slider').css('left' ,--left);
                        setTimeout(moveable,10)
                        });
                        });
                    </script>
                    </body>
                    </html> 
```

检查jsfiddle输出

[http://jsfiddle.net/srinivasan/T7xhW/2/](http://jsfiddle.net/srinivasan/T7xhW/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:30:11.177

已经有一个 jQuery UI 滑块：http: [//jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

它运作良好，样式选项非常好。如果对 jQuery UI 没有限制，我强烈建议改用它。

# xml - 如何概括 XSL 转换文件以用于所有场景

> ID：10296891
> 
> 赞同：1
> 
> 时间：2012-04-24T11:23:11.507
> 
> 标签：xml, xslt

如果我有这个 xml 文件：

```
 <root> 
    <node id="a">
        <Items id="a_1" method="pause">
            <item id="0" method="pause">
                <attribute>
                    <color>Red</color>
                </attribute>
            </item>
        </Items>

        <Items id="a_1" method="pause">
            <item id="0" method="stop">
                <attribute>
                    <color>Red</color>
                </attribute>
            </item>
        </Items>            
    </node>

    <node id="b">
        <Persons id="b_1">    
            <person id="b_1b" method="pause">
                <attribute>a</attribute>
            </person>       
            <person id="b_1a" method="start">
                <attribute>
                    <name>John</name>
                </attribute>
            </person>
            <person id="b_1b" method="stop">
                <attribute>a</attribute>
            </person>
            <person id="b_1a" method="pause">
                <attribute>a</attribute>
            </person>
        </Persons>

        <Persons id="b_1" method="start">               
            <person id="b_1a" method="stop">
                <attribute>a</attribute>
            </person>

            <person id="b_1b" method="start">
                <attribute>a</attribute>
            </person>
            <person id="b_1b" method="pause">
                <attribute>a</attribute>
            </person>
        </Persons>

        <Persons id="b_2">                
            <person id="b_1a" method="start">
                <attribute>
                    <name>John</name>
                </attribute>
            </person>
        </Persons>
    </node>
</root> 
```

预期的输出是：

```
 <root> 
    <node id="a">
        <Items id="a_1" method="pause">

        </Items>

        <Items id="a_1" method="pause">
            <item id="0" method="stop">
                <attribute>
                    <color>Red</color>
                </attribute>
            </item>
        </Items>            
    </node>

    <node id="b">
        <Persons id="b_1">    
        </Persons>

        <Persons id="b_1" method="start">               
            <person id="b_1a" method="stop">
                <attribute>a</attribute>
            </person>

            <person id="b_1b" method="start">
                <attribute>a</attribute>
            </person>
            <person id="b_1b" method="pause">
                <attribute>a</attribute>
            </person>
        </Persons>

        <Persons id="b_2">                
            <person id="b_1a" method="start">
                <attribute>
                    <name>John</name>
                </attribute>
            </person>
        </Persons>
    </node>
</root> 
```

该算法的关键在于**停止**方法。

1.  如果它是最后一个删除所有节点并留下一个'停止
2.  如果具有“停止”方法的节点不是最后一个，则删除具有“停止”的该节点及其之前的所有节点（在该停止之后保留所有节点）。

这必须发生**在父母的id属性相同**的孩子中，它只会删除子节点（删除用户节点后即使它是空的也离开父母）。

对于上面的例子：

1.  item id=0 pause 然后 item id=0 stop -> 结果将是**item id=0 stop**（父项：Items id=a_1-pause）。
2.  人 id=b_1a 开始然后人 id=b_1a 暂停然后人 id=b1_a 停止（父母：人 id=b_1） - 所以结果变成**只有人 id=b_1a 停止**
3.  person id=b_1b pause 然后 person id=b_1b stop 然后 person id=b_1b start 然后 person id=b_1b pause -> 它将变成**person id=b_1b start 然后 person id=b_1b pause**（我们再次比较父 Person id 下的每个人=b_1; 在父级中，我们不关心其中一个是否没有方法，只要它与示例中所示的 id 相同）

这就是我只为“人”节点所拥有的。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <!-- Ignore person with 'stop' method which are not the last such person -->
   <xsl:template match="person[@method='stop'][following::person[@method='stop']]"/>

   <!-- Match other persons -->
   <xsl:template match="person">
      <!-- Copy the person if there isn't a following person with the same id and 'stop' method -->
      <xsl:if test="not(following::person[@id=current()/@id][@method='stop'])">
         <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
         </xsl:copy>
      </xsl:if>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

是否可以更改以解决所有其他节点（节点和父名称可以是任何东西）？非常感谢。

亲切的问候，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:23:19.813

> 这必须发生在同一个父母身上

我猜这意味着您之前提到的约束仅适用于兄弟节点。但是，您的 id="0" 示例表明这不是真的。所以我想我不明白上面的条款。

**更新：**这并不意味着“在一个父元素的子元素中”，而是“在其父元素的 id 属性具有相同值的元素中”。

到目前为止我对规范的理解：

*如果具有“停止”方法的元素最后出现，则具有相同用户标识的具有其他方法（例如“暂停”和“运行”）的任何其他节点将被删除。但是，如果具有“停止”方法的元素不是最后一个，则具有“停止”的元素本身以及该“停止”之前的所有元素（具有相同的 id？）都将被删除。*

在我看来，这可以概括为：

*如果存在具有“停止”方法的元素，则该元素以及具有相同元素名称和相同 id 属性的任何先前元素将被删除。*

如果此摘要不正确，请澄清。

> 是否可以更改以解决所有其他节点（节点和父名称可以是任何东西）？

我还没有想到一种方法可以仅通过模板匹配来做到这一点。但它可以像你一样在 xsl:if 中完成：

```
<xsl:template match="*">
  <!-- Copy the element if there isn't a following sibling element with
       the same name, same id and 'stop' method, and if the element itself
       doesn't have a 'stop' method. -->
  <xsl:if test="not(@method = 'stop' or
                    following::*[local-name() = local-name(current()) and
                      @id = current()/@id and
                      ../@id = current()/../@id and
                      @method = 'stop'])">
     <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
     </xsl:copy>
  </xsl:if>
</xsl:template> 
```

我有点难以理解您对算法的规范，所以如果上述内容没有产生预期的结果，请给出一个具体示例，说明其结果与预期结果不同的地方，并澄清规范。

**更新：**我已经根据最近的评论更新了上面的代码，但它还没有完全符合我现在理解的规范。今晚我会努力解决这个问题。（也欢迎其他人来拍！）

# sql-server - 在 JobID 上连接

> ID：10296894
> 
> 赞同：0
> 
> 时间：2012-04-24T11:23:25.140
> 
> 标签：sql-server

> **可能重复：**
> [在单个查询中连接选定的列？](https://stackoverflow.com/questions/808613/concatenate-a-selected-column-in-a-single-query)

我知道这在 MySQL 中相当简单，但我不知道如何在 SQLServer 中做到这一点。我有一个包含两列的表。用户 ID 和标签 ID。我想将 TagID 连接成一个逗号分隔的字符串，其中结果按 UserID 分组。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:11:15.847

我会认为像 ethis 这样的东西可能是您正在寻找的东西：

```
SELECT ''+Table1.UserID+','+Table2.TagID+'' AS CombinedCSVColumn
      , SUM(Table1.Value) AS Value
From dbo.Table1 as Table1
INNER JOIN db.Table2 as Table2
ON Table1.EmployeeID = Table2.EmployeeID
GROUP BY ''+Table1.UserID+','+Table2.TagID+'' 
```

也就是说，如果它们来自两个表。一张桌子是相似的。

问候

苹果电脑

# c# - 如何在 Outlook 加载项中捕获打印事件？

> ID：10296895
> 
> 赞同：5
> 
> 时间：2012-04-24T11:23:29.400
> 
> 标签：c#, vsto, outlook-addin, outlook-2007, outlook-2010

我正在开发一个 C# VSTO 3.0 Outlook 插件，我需要在其中捕获打印事件（当用户从​​ Outlook 中选择打印选项来打印电子邮件时）。我在 Outlook 对象模型中找不到任何提供对此事件的访问权限的 API。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T05:38:07.313

如果想在后台视图拦截打印命令可以看下面的文章：

[http://msdn.microsoft.com/en-us/library/ee691833(office.14).aspx#odc_Office2010Introduction2OutSpaceUI_BackStageUIFAQs](http://msdn.microsoft.com/en-us/library/ee691833(office.14).aspx#odc_Office2010Introduction2OutSpaceUI_BackStageUIFAQs)

"*无法从自定义 UI XML 标记或使用对象模型覆盖这些命令。使用 DocumentBeforeSave 事件是一种替代方法，但使用它并不会真正改变显示在 Change 中的各个命令的功能后台中的文件类型库。更好的解决方案是考虑隐藏内置 UI 并使用自定义命令完全重建它。* “

（以上是关于文件 -> 另存为.. 但文件 -> 打印的情况几乎相同）。

所以基本上你需要添加你自己的命令而不是内置的。如果你不是在谈论后台，而是在菜单项/功能区/命令栏中打印命令的一些较旧的 Outlook，你也可以看看这篇文章AddIn Express（我认为没有他们的产品也可以）：

[http://www.add-in-express.com/creating-addins-blog/2012/02/27/how-an-office-add-in-intercepts-clicking-a-built-in-control/](http://www.add-in-express.com/creating-addins-blog/2012/02/27/how-an-office-add-in-intercepts-clicking-a-built-in-control/)

那里的想法是相同的 - 您找到感兴趣的按钮/菜单项的 Id 或 IdMso 并创建新的以获取事件。

希望这可以帮助。

# ajax - 在 IE9 中使用 SproutCore 进行跨域请求

> ID：10296908
> 
> 赞同：1
> 
> 时间：2012-04-24T11:24:38.323
> 
> 标签：ajax, xmlhttprequest, sproutcore, cors

我正在尝试构建一个基于 SproutCore 1.8 的网络应用程序。为了从服务器检索数据，应用程序向在单独域上运行的 REST Web 服务发出 CORS 请求。

代码如下所示：

```
var request = SC.Request.getUrl('http://example.com/some/path');
request.set('attachIdentifyingHeaders', NO);    
request.json().notify(this, this.didFetchData).send(); 
```

这在 Chrome、Safari 和 Firefox 中运行良好，但在 Internet Explorer 9 中不起作用。事实上，IE9 在 SproutCore 的内部请求实现中遇到了 JavaScript 错误“访问被拒绝”。此行引发错误：

```
// initiate request.
rawRequest.open(this.get('type'), this.get('address'), async); 
```

经过一些简短的调查，我发现微软在 IE9 中为 CORS 请求实现了一个专用的 XDomainRequest 对象。正如我从这些行（SproutCore 本机请求实现选择）推断的那样，SproutCore 似乎不支持这一点：

```
return tryThese(
  function() { return new XMLHttpRequest(); },
  function() { return new ActiveXObject('Msxml2.XMLHTTP'); },
  function() { return new ActiveXObject('Microsoft.XMLHTTP'); }
); 
```

这是 SproutCore 的缺点还是我遗漏了什么？如果是这样，您对如何在不编写自己的请求抽象的情况下解决该问题有任何建议吗？

请注意，CORS 是我正在使用的现有服务器基础架构的要求。我既不能将服务放在与交付客户端的服务器相同的域上，也不能使用反向代理或类似的基础设施来解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T12:10:36.040

你有两个选择

1) 破解 Sproutcore 本身。你可以尝试添加

`function() {return new XDomainRequest(); }`

到那个不同的xhr运输清单。先添加；如果它在浏览器上可用，它将被使用，否则代码将退回到其他对象。

2）如果您不想修改 SC 源，您可以创建自己的`App.CorsResponse`扩展类`SC.XHRResponse`。在您的实现中，提供您自己的`createRequest`方法并执行我在 1) 中所说的操作。每当您创建请求时，将 指定`responseClass`为您的自定义实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:43:31.193

我已经根据 hvgotcodes 的建议快速编写了一个解决方案。下面的代码实现了一个子类，`SC.XHRResponse`它添加了处理特定于 IE 的 XDomainRequest CORS 请求所需的功能。请注意，当使用 XDomainRequest 时，这还不能处理 IE 中的错误。

```
MyApp.CorsRequest = SC.XHRResponse.extend({
  createRequest: function() {
    function tryThese() {
      for (var i=0; i < arguments.length; i++) {
        try {
          var item = arguments[i]();
          return item;
        } catch (e) {}
      }
      return NO;
    }

    return tryThese(
      function() { return new XDomainRequest(); },
      function() { return new XMLHttpRequest(); },
      function() { return new ActiveXObject('Msxml2.XMLHTTP'); },
      function() { return new ActiveXObject('Microsoft.XMLHTTP'); }
    );
  },

  invokeTransport: function() {
    var rawRequest, transport, handleReadyStateChange, async, headers;

    rawRequest = this.createRequest();
    this.set('rawRequest', rawRequest);

    // configure async callback - differs per browser...
    async = !!this.getPath('request.isAsynchronous');

    if (async) {
      if (!SC.browser.isIE && !SC.browser.isOpera) {
        SC.Event.add(rawRequest, 'readystatechange', this,
                     this.finishRequest, rawRequest);
      } else if(SC.browser.isIE) {
           transport = this;
        handleLoad = function() {
          if (!transport) { return null; }
          var ret = transport.finishRequest();
          if (ret) { transport = null; }
          return ret;
        };
        rawRequest.onload = handleLoad;          
      } else {
        transport = this;
        handleReadyStateChange = function() {
          if (!transport) { return null; }
          var ret = transport.finishRequest();
          if (ret) { transport = null; }
          return ret;
        };
        rawRequest.onreadystatechange = handleReadyStateChange;
      }
    }

    // initiate request.
    rawRequest.open(this.get('type'), this.get('address'), async);

    // now send the actual request body - for sync requests browser will
    // block here
    rawRequest.send(this.getPath('request.encodedBody')) ;
    if (!async) { this.finishRequest(); }

    return rawRequest;
  }, 

  finishRequest: function(evt) {
    var rawRequest = this.get('rawRequest'),
        readyState = rawRequest.readyState,
        error, status, msg;

       if (SC.browser.isIE) {
            readyState = 4;
            rawRequest.status = 200;
       }       

    if (readyState === 4 && !this.get('timedOut')) {
      this.receive(function(proceed) {
        if (!proceed) { return; }

        // collect the status and decide if we're in an error state or not
        status = -1;
        try {
          status = rawRequest.status || 0;
        } catch (e) {}

        // if there was an error - setup error and save it
        if ((status < 200) || (status >= 300)) {

          try {
            msg = rawRequest.statusText || '';
          } catch(e2) {
            msg = '';
          }

          error = SC.$error(msg || "HTTP Request failed", "Request", status);
          error.set("errorValue", this) ;
          this.set('isError', YES);
          this.set('errorObject', error);
        }

        // set the status - this will trigger changes on related properties
        this.set('status', status);
      }, this);

      // Avoid memory leaks
      if (!SC.browser.isIE && !SC.browser.isOpera) {
        SC.Event.remove(rawRequest, 'readystatechange', this, this.finishRequest);
      } else {
           if (window.XDomainRequest)
                rawRequest.onload = null;
           else
             rawRequest.onreadystatechange = null;
      }

      return YES;
    }
    return NO;
  } 
}); 
```

# c# - 将 WSDL.exe 与具有外部 .xsd 文件的本地 WSDL 文件一起使用

> ID：10296909
> 
> 赞同：9
> 
> 时间：2012-04-24T11:24:40.000
> 
> 标签：c#, web-services, wsdl.exe

我正在尝试从客户发送给我们的一些 wsdl/xsd 文件中生成 Web 服务存根。在所有内容都在 wsdl 文件中之前，我已经使用 wsdl.exe 没有问题地完成此操作，但是当我在 wsdl 文件上运行该文件时，我收到一条错误消息，指出无法导入其中一项操作，因为其中之一缺少外部 xsd 中的元素。

我已经尝试在元素中放置一个 schemeLocation 参数，但它仍然无法正常工作。有没有办法在调用 wsdl.exe 时说明 xsd 是什么？

我无法发布 wsdl 文件，因为它们已被 NDA 覆盖。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T12:19:10.483

事实证明，如果在 wsdl 文件之后包含 xsd 文件，则可以将多个文件名作为 WSDL.exe 的参数，它可以正常工作...

# facebook - 如何剥离 Facebook 页面的粉丝个人资料图片？

> ID：10296910
> 
> 赞同：0
> 
> 时间：2012-04-24T11:24:40.330
> 
> 标签：facebook, facebook-graph-api, download, get, image

是否可以剥离页面粉丝的头像？

我试图基本上下载我页面的所有粉丝个人资料图片。我知道无法获取姓名列表，但对于个人资料图片，这是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:23:35.970

个人资料图片也不可能。您无法获取粉丝的个人数据。

# ruby-on-rails - “unexpected tIVAR, expecting $end”指向什么错误？

> ID：10296913
> 
> 赞同：1
> 
> 时间：2012-04-24T05:35:31.997
> 
> 标签：ruby-on-rails

我只是想将命令输入`$ rvm use 1.9.3@rails3tutorial2ndEd --create --default`到交互式 Ruby 中（命令取自 Michael Hartl 的教程）。

我不断收到有关意外 tIVAR 的错误消息。在多次尝试调整命令后，我似乎已将错误消息缩减为： `syntax error, unexpected tIVAR, expecting $end.` 那么现在呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:17:39.347

tIVAR 表示实例变量，额外的部分表示您缺少“结束”

以do开头:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:03:07.287

rvm 不是 Ruby 或 Rails 命令。在作为应用程序根目录的目录中运行命令。

# android - 冰淇淋三明治上的线

> ID：10296914
> 
> 赞同：2
> 
> 时间：2012-04-24T11:24:58.893
> 
> 标签：android, multithreading, loading

我在 ICS 4.0.3 上运行线程时遇到问题

我制作了 apk，并将其安装在 2.33 SE 手机和 Google Nexus S 4.0.3 上。

在 SE 上，apk 正在按预期运行和加载。但是，在 Nexus 上出现错误，我必须关闭它。但我看到程序在后面运行。我试图从代码中删除线程（加载屏幕，启动画面）并在 Nexus 上再次运行它，它可以运行。所以我发现我的问题出在线程上，onCreate 线程正在启​​动。它从 2.33 到 4.0.3 有什么区别吗？

```
package my.LigTv.Browser;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.MotionEvent;
import android.webkit.WebView;
import android.app.AlertDialog;
public class LigTVBrowserActivity extends Activity {
/** Called when the activity is first created. */

WebView mWebView;
AlertDialog alertDialog;
protected boolean _active = true;
protected int _splashTime = 3000; // time to display the splash screen in ms
int progress = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    final Activity activity = this;

    final ProgressDialog progressDialog = new ProgressDialog(activity);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.setMessage("Please wait for the applet to load");

    progressDialog.show();
    progressDialog.setProgress(0);
    activity.setProgress(progress * 1000);

    progressDialog.incrementProgressBy(progress);

    if(progress == 100 && progressDialog.isShowing())
        progressDialog.dismiss(); 

    Thread splashTread = new Thread() {
        @Override
        public void run() {                 
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);

                    if(_active) {
                        waited += 100;                                                    
                        }
                }
            } catch(InterruptedException e) {
                // do nothing
            } finally {
                finish();
                startActivity(new Intent("my.LigTv.Browser.Starter"));
                stop();
            }
        }
    };
    splashTread.start();
}    

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        _active = false;
    }
    return true;
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:33:47.197

`finish()`开始新活动后尝试调用。另外，你为什么`stop()`在线程上调用？一旦它开始了新的活动，它就会停止。这是一个我已经写过的例子，你可以随意改变：

```
 Runnable r1 = new Runnable(){
                public void run(){
                    new Handler().postDelayed(new Runnable(){
                        @Override
                        public void run(){
                            startActivity(new Intent(Splash.this,Main.class));
                            overridePendingTransition(R.anim.fade_out, R.anim.fade_in);
                            finish();

                        }
                    }, waitTime);
                }
            };
            runOnUiThread(r1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:01:37.130

我遇到了同样的问题，我用另一个代码作为快速修复来修复它：

```
private Timer myTimer;
private int x=0;
private int interval=2500;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    myTimer = new Timer();
    myTimer.schedule(new TimerTask() {
        @Override
        public void run() {
            TimerMethod();
        }

    }, 0, interval);

}

private void TimerMethod()
{
    this.runOnUiThread(Timer_Tick);
}

private Runnable Timer_Tick = new Runnable() {
public void run() {
    if(x==1)
    {
        SplashActivity.this.finish();
        startActivity(new Intent(SplashActivity.this,LoginActivity.class));
    }
    x++;
}
}; 
```

但是没有进度条，

如果您想在用户单击启动屏幕时执行此操作，他会转到下一个活动，您可以通过取消计时器并完成启动活动并转到另一个来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:32:20.270

这不应该在ui线程中吗？

```
 runOnUiThread(new Runnable(){
                finish();
                startActivity(new Intent("my.LigTv.Browser.Starter"));
                stop();
}); 
```

# vb.net - 我可以在没有 EZTwain 的情况下构建应用程序进行扫描吗？

> ID：10296915
> 
> 赞同：0
> 
> 时间：2012-04-24T11:25:00.160
> 
> 标签：vb.net

我可以在没有 EZTwain 库的情况下在 VB.NET 上构建软件来扫描文档或照片吗？因为 Twain 库在另一个窗口中进行扫描，所以我也不能对输入格式进行多项选择...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:09:25.450

最重要的替代方案是 WIA 库。（Windows 图像采集）

*WIA 是一种标准化的 Win32 API，用于从主要用于捕获静止图像的设备获取数字图像，并用于管理这些设备。*

您可以在此链接上找到[详尽的](http://www.codeproject.com/Articles/2303/WIA-Scripting-and-NET)[文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms630368%28v=vs.85%29.aspx)和示例如何使用此库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:15:30.247

正如史蒂夫所说，最好的选择是使用 WIA。我知道一个第三方工具包可以帮助你满足你的要求，那就是leadtools。您可以查看此页面以[获取 WIA 简介](http://www.leadtools.com/help/leadtools/v175/dh/wa/leadtools.wia_introduction.html)

另外，您可以查看本[教程](http://www.leadtools.com/help/leadtools/v175/dh/to/leadtools.topics.wia~wa.topics.wiaacquiringanimage.html)

# r - R计算系列的总和

> ID：10296918
> 
> 赞同：1
> 
> 时间：2012-04-24T11:25:13.020
> 
> 标签：r

假设我有一列数字，如下所示：

```
Y=
1
2
3
4
5
6
34
32
23 
```

我有一个数组`R1 = (1,3,7,8)`

我想通过使用 R1 中定义的下标来实现添加 Y 的元素。我需要生成一个值数组，例如：从 Y[1] 到 Y[3] 开始的数字总和作为我的第一个元素，从 Y[3] 到 Y[7] 开始的数字总和作为我的第二个元素，总和从 Y[7] 到 Y[8] 作为我的第三个元素，依此类推。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T13:04:54.873

该`embed`函数对于构建此处所需的偏移系列非常有用：

```
embed(R1,2)
     [,1] [,2]
[1,]    3    1
[2,]    7    3
[3,]    8    7
# So this becomes a simple one-liner:
 apply(embed(R1, 2) , 1, function(x) sum(Y[x[2]:x[1]]) )
#[1]  6 52 66 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:59:50.347

试试这个，虽然我确信有更好的方法。

首先，将您`r1`分解为我们想要求和的索引向量：

```
idx <- sapply(seq_len(length(r1) - 1), 
              function(ind, x) seq(x[ind], x[ind+1], by = 1),
              x = r1) 
```

这给了我们一个列表，其分量是求和的索引向量：

```
> idx
[[1]]
[1] 1 2 3

[[2]]
[1] 3 4 5 6 7

[[3]]
[1] 7 8 
```

一旦我们有了这个，就很容易`sapply()`克服它（好吧，我们`sapply()`在索引上`seq_along(idx)`，因为我们需要在匿名函数中引用多个向量）并对`y`indexed by `idx[[1]]`， by`idx[[2]]`等的元素求和：

```
sums <- sapply(seq_along(idx),
               function(ind, y, idx) sum(y[idx[[ind]]]), 
               y = y, idx = idx) 
```

这导致

```
> sums
[1]  6 52 66 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T12:22:13.667

这与@cbeleites 的答案非常相似（我首先完成了一个类似的答案，花了几分钟时间），但避免了创建`startend`对象：

```
sapply(seq_along(R1[-1]), function(x) {
  sum(Y[do.call(":", as.list(R1[x + c(0, 1)]))])
})

# [1]  6 52 66 
```

**编辑：**

好的，你不需要那个`do.call`位。我很闷。

```
sapply(seq_along(R1[-1]), function(x) {
  sum(Y[R1[x] : R1[x + 1]])
})

# [1]  6 52 66 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T12:16:47.583

这是另一种方式：

```
> startend <- cbind (head (R1, -1), tail (R1, -1))
> startend
     [,1] [,2]
[1,]    1    3
[2,]    3    7
[3,]    7    8
> apply (startend, 1, function (i) sum (Y [i [1] : i [2]]))
[1]  6 52 66 
```

# php - 如何合并 Zend Framework 2 模块公共目录

> ID：10296920
> 
> 赞同：21
> 
> 时间：2012-04-24T11:25:19.830
> 
> 标签：php, zend-framework2

一些 zf2 模块具有用于分发资源的公共目录，例如 js/css/images。将这些资源提供给应用程序的最佳实践是什么？

我希望这些资源可以通过`http://mysite.com/[moduleName]/`. 例如，

`root/public/js/sitescript.js`-->`http:\\mysite.com\js\sitescript.js`

`root/module/mymodule/public/js/modulescript.js`-->`http:\\mysite.com\mymodule\js\modulescript.js`

`root/vendor/vendormodule/public/js/vendorscript.js`-->`http:\\mysite.com\vendormodule\js\vendorscript.js`

是否应该将这些资源复制到根/公共目录？手动复制会很痛苦，而且我怀疑合并目录的自动构建过程是否会非常实用。

也许有一些魔法可以与 httpd.conf 或 .htaccess 一起使用？

也许符号链接是解决方案？但是，符号链接并不是直接在 Windows 平台上运行的，需要为每个单独的模块手动创建。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-25T12:56:54.487

有4种处理方法：

1.  `public/`对目录中的资产进行符号链接
2.  将资产从模块复制粘贴到`public/`目录
3.  使用[特定的虚拟主机配置](http://www.mwop.net/blog/why-conventions-matter.html)（或通常的 Web 服务器配置）
4.  使用资产管理器模块，例如以下之一：

    *   [AssetManager](https://github.com/RWOverdijk/AssetManager) - 由[assetic](https://github.com/kriswallsmith/assetic)支持- 在运行时合并资产，具有用于生产环境的缓存和用于CSS / JS缩小和LESS / SASS转换的过滤器，允许从模块本身的目录中公开资产。
    *   [zf2-assetic-module](https://github.com/widmogrod/zf2-assetic-module) - 由资产支持[-](https://github.com/kriswallsmith/assetic)在运行时处理 CSS/JS 缩小和 LESS/SASS 转换
    *   [BaconAssetLoader](https://github.com/Bacon/BaconAssetLoader)`public/` - 通过在部署时将它们部署在目录中来公开模块中的资产

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T14:55:45.593

有很多方法可以做到这一点。

在我看来，Assetic 浪费了计算性能，非常不适合这个简单的问题。

如前所述，问题是从模块访问 /public 。

我的解决方案如下：

编辑 htdocs/yoursite/public/.htaccess 以在 RewriteEngine On 之后添加此行：

```
RewriteRule ^resource/([a-zA-Z0-9\.\-]+)/([a-zA-Z0-9\.\-_\/]+)$ index.php?action=resource&module=$1&path=$2 [QSA,L] 
```

编辑 htdocs/yoursite/public/index.php 并在 chdir(dirname( **DIR** ));之后添加此代码：

```
if (isset($_GET['action']) && $_GET['action'] == "resource") {
    $module = $_GET['module'];
    $path = $_GET['path'];
    if (!ctype_alnum($module))
        die("Module name must consist of only alphanumeric characters");

    $filetype = pathinfo($path, PATHINFO_EXTENSION);
    $mimetypes = array(
        'js' => "text/javascript",
        'css' => "text/css",
        'jpg' => "image/jpeg",
        'jpeg' => "image/jpeg",
        'png' => "image/png"
    );

    if (!isset($mimetypes[$filetype]))
        die(sprintf("Unrecognized file extension '%s'. Supported extensions: %s.", htmlspecialchars($filetype, ENT_QUOTES), implode(", ", array_keys($mimetypes))));

    $currentDir = realpath(".");
    $destination = realpath("module/$module/public/$path");
    if (!$destination)
        die(sprintf("File not found: '%s'!", htmlspecialchars("module/$module/public/$path", ENT_QUOTES)));

    if (substr($destination, 0, strlen($currentDir)) != $currentDir)
            die(sprintf("Access to '%s' is not allowed!", htmlspecialchars($destination, ENT_QUOTES)));

    header(sprintf("Content-type: %s", $mimetypes[$filetype]));
    readfile("module/$module/public/$path", FALSE);
    die();
} 
```

用法：/resource/moduleName/path

示例：http: [//yoursite.com/resource/Statistics/css/style.css](http://yoursite.com/resource/Statistics/css/style.css)将从 yoursite/module/Statistics/public/css/style.css 读取实际的 css。

它快速、安全、不需要您在配置中指定任何路径、不需要安装、不依赖 3rd-party 维护，并且不需要帮助。只需从任何地方访问 /resource ！享受 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T04:03:45.367

您可以尝试使用 phing 来管理您的构建过程并让它全部自动化。您必须编写构建脚本，但之后就像在 CD 播放器上播放一样。

当然，对于测试，这将是一种痛苦。

# c# - C# - 澄清'where T:new()'

> ID：10296923
> 
> 赞同：1
> 
> 时间：2012-04-24T11:25:30.383
> 
> 标签：c#, c#-4.0

下面这行应该怎么理解？

```
public T Execute<t>(RestRequest request) where T : new() 
```

它是下面代码的一部分。

```
public T Execute<t>(RestRequest request) where T : new()
{
    var client = new RestClient();
    client.BaseUrl = BaseUrl;
    request.RequestFormat = DataFormat.Json;

    // Used on every request
    request.AddParameter("country", "gb", ParameterType.UrlSegment);

    var response = client.Execute<t>(request);
    return response.Data;
} 
```

还有这个：

> 公共类 RssItems：列表{}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T11:28:53.777

在处理泛型时，类型约束定义了使用泛型的方式。这

```
where T : new() 
```

意味着它有一个无参数的构造函数，允许你使用代码：

```
var something = new T(); 
```

在你的代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T11:28:17.707

类型约束意味着`T`必须有一个无参数的构造函数。[请参阅有关类型参数约束的](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.80%29.aspx)MSDN 文档

**UPDATE**
该行`public class RssItems : List {}`表示`RssItems`继承自`List`. 请参阅[继承（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173149.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:29:42.140

该方法将返回一个类型 T 的对象，该对象是在创建类时定义的：

```
var x = new SomeClass<T>(); 
```

部分： T: new() 表示类型参数必须具有公共无参数构造函数。当与其他约束结合使用时，必须最后指定 new() 约束。您可以在 MSDN 页面 'Constraints on Type Parameters' 上查看这一点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T11:27:22.030

您指定`T`(generic type) 必须有一个 parameterless `ctr`。

# mfc - 如何打开列表形式的 MFC 树控件项？

> ID：10296926
> 
> 赞同：0
> 
> 时间：2012-04-24T11:25:37.087
> 
> 标签：mfc

我正在尝试打开 MFC 树控件项的列表形式。当您右键单击某个类时，类似于 VC++ 类视图中的内容将显示选项列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:25:41.887

我认为您正在寻找的是一个菜单对象。您可以使用项目中的资源视图创建 MENU 资源，然后使用 CMenu MFC 类使用“CMenu::TrackPopupMenu”方法弹出该菜单。

# linux - 了解 shell 设置脚本错误

> ID：10296929
> 
> 赞同：1
> 
> 时间：2012-04-24T11:25:55.810
> 
> 标签：linux, bash, web2py, sh

我正在尝试在干净的 CentOS 6 安装上运行此[web2py 安装脚本，并且收到以下一组错误：](http://code.google.com/p/web2py/source/browse/scripts/setup-web2py-fedora.sh)

```
checkmodule:  loading policy configuration from httpd.te
httpd.te:1:ERROR 'Building a policy module, but no module specification found.
' at token 'EOF' on line 1:

checkmodule:  error(s) encountered while parsing configuration
semodule_package:  Could not open file No such file or directory:  httpd.mod
semodule:  Failed on httpd.pp!

 - Configure Apache to use mod_wsgi

Stopping httpd:                                            [FAILED]
Starting httpd: Syntax error on line 1 of /etc/httpd/conf.d/default.conf:
Invalid command 'EOF', perhaps misspelled or defined by a module not included in the server configuration
                                                           [FAILED]

 - Complete!

./setup-web2py-fedora.sh: line 407: EOF: command not found
./setup-web2py-fedora.sh: line 408: EOF: command not found
./setup-web2py-fedora.sh: line 409: EOF: command not found 
```

我不明白为什么脚本在处理 'EOF' 时遇到问题，因为它应该是[heredoc](http://en.wikipedia.org/wiki/End-of-file)的定界标识符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:38:47.780

`EOF`第 182 行有一个错误（正确的，匹配`<< EOF`，出现在第 193 行）。这最终会出现在文件中，这会在尝试处理它`httpd.te`时导致语法错误。`checkmodule`

# svn - IntelliJ IDEA 中多个 SVN 分支的工作流

> ID：10296930
> 
> 赞同：7
> 
> 时间：2012-04-24T11:26:01.630
> 
> 标签：svn, intellij-idea, branch

我想使用 IntelliJ IDEA 在 SVN 主干和一个或几个功能分支之间轻松切换，最好能够同时在多个分支上工作。我有一些“本地”配置，例如用于集成测试的数据库设置和启用调试日志记录，我想继续使用而不是提交给 SVN。

各种选择的优缺点是什么，有没有一种方法可以轻松击败其他方法？以下是我能想到的一些可能的方法，还有吗？：

*   使用“SVN - 更新目录”将当前分支换成另一个。
    不允许同时在多个分支上工作。

*   在单个项目中为每个分支创建一个模块。
    似乎会导致单击堆栈跟踪/类名进入错误模块的问题，很容易意外地意外搜索模块等等？

*   每个分支创建一个单独的 IntelliJ 项目。
    每个项目的单独设置更多冗余，更多工作以保持项目之间的所有内容同步。减少意外使用错误分支的风险。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T11:40:09.123

我有最好的经验

> 每个分支创建一个单独的 IntelliJ 项目

优点

*   分支之间的快速切换。
*   您可以同时开设更多分店。

缺点

*   您必须为每个分支设置创意项目。
*   仅可用于有限数量的分支。

我有一个用于主干版本的项目和另一个用于当前生产版本的项目。当你有更多的分支然后两个时，我认为第一个选择是更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:36:43.023

有一个特性使“在单个项目中为每个分支创建一个（或多个<所有模块）模块”方法比另一种更可行。

[jetbrains](http://devnet.jetbrains.net/thread/317389%5D)有一个论坛帖子讨论此功能的价值。也许这个功能可以由社区本身提出要求。

该请求是针对项目视图中的“标签装饰配置”。我仍在[youtrack](http://youtrack.jetbrains.com/)仪表板中搜索问题以投票支持此功能。也许我以后会加一个。

# c++ - SWIG 的 503 警告是什么？

> ID：10296932
> 
> 赞同：12
> 
> 时间：2012-04-24T11:26:06.293
> 
> 标签：c++, android-ndk, swig, gcc-warning

请解释 SWIG 的这些警告是什么以及如何避免它？

```
Warning 503: Can't wrap 'operator ()' unless renamed to a valid identifier.
Warning 503: Can't wrap 'operator =' unless renamed to a valid identifier.
Warning 503: Can't wrap 'operator *' unless renamed to a valid identifier. 
```

在 Android NDK 下编译 SWIG 生成的 C++ 代码时会生成警告。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T11:33:58.943

Java 没有与 C++ 等效`operator()`或`operator=`相同的意义，因此 SWIG 无法直接包装它。因为它们可能很重要，所以您会看到一条警告，说明它们没有被包装。（有时失踪`operator=`可能特别糟糕）。

此代码在运行时会出现这样的警告`swig -Wall -c++ -java`：

```
%module Sample

struct test {
  bool operator()();
}; 
```

但是您可以使警告静音并告诉 SWIG 将运算符直接公开为常规成员函数，方法是这样说：

```
%module Sample

%rename(something_else) operator();

struct test {
  bool operator()();
}; 
```

这会导致在生成的包装器`something_else`中添加一个名为的函数。`operator()`

或者您可以向 SWIG 断言忽略这些就可以了，使用：

```
%ignore operator() 
```

（您也可以通过使用类名限定运算符来更广泛地应用这些指令中的任何一个）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T11:28:49.430

如果要在目标语言中使用重载运算符，则需要在 SWIG 中以特殊方式处理它们。见[这里](http://www.swig.org/Doc1.3/SWIGPlus.html#SWIGPlus_nn28)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-18T12:51:26.770

如果您有一个出现在用于实例化函数的指令`%rename`之前的指令，您可能会遇到此警告，如下所示：`%template`

```
%module some_module
%rename("%(undercase)s", %$isfunction) ""; 
// equivalently  %rename("%(utitle)s", %$isfunction) "";

%inline %{
template<class T>
void MyFunction(){}
%}
// ...

%template(MyIntFunction) MyFunction<int>; 
```

> 警告 503：除非重命名为有效标识符，否则无法包装 'my_function< int >'

而且您不能尝试在以下内容中预期重命名`%template`：

```
%template(MyIntFunction) my_function<int>; 
```

因为那样你会得到

> 错误：模板“myfunction”未定义。

Which is very frustrating if you're applying global renaming rules, and you really only need to "ignore renaming" for just a few things. Unlike typemaps, rename directives live for all-time. It'd be nice to be able to turn them off, even temporarily.

The only workaround for this I've come up with is to go back to the `%rename` and update it to explicitly only match (or rather, not match) the template functions you've declared inline. Like so:

```
// don't rename functions starting with "MyFunction"
%rename("%(undercase)s", %$isfunction, notregexmatch$name="^MyFunction") ""; 
```

It's not perfect, but it's a workaround.

(This was all done in SWIG 4.0)

# function - 如何创建一个返回布尔值的 xsl:function

> ID：10296938
> 
> 赞同：5
> 
> 时间：2012-04-24T11:26:37.130
> 
> 标签：function, xslt, xslt-2.0

我想创建一个带有一些可以返回布尔值的参数的 xsl:function，我遇到了麻烦：

```
<xsl:if test="my:isEqual($Object1, $Object2)">SAME!</xsl:if>

<xsl:function name="my:isEqual">
    <xsl:param name="Object1" />
    <xsl:param name="Object2" />

    <xsl:variable name="Object1PostalCode select="$Object1/PostalCode" />
    <xsl:variable name="Object2PostalCode select="$Object2/PostalCode" />
    <xsl:if test="$Object1PostalCode = $Object2PostalCode">
        !!!What to do here!!!
    </xsl:if>
</xsl:function> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T12:25:33.053

> 我想创建一个带有一些可以返回布尔值的参数的 xsl:function，我遇到了麻烦：

```
<xsl:function name="my:isEqual"> 
```

你的麻烦甚至从这里开始。正如所写，没有任何东西可以保证此函数不会返回任何 XDM 类型的项目或项目序列。

**要记住**的规则：在编写`xsl:function`do 时指定其返回类型。还要指定参数的类型。这使您免于运行时类型不匹配的问题。它还为更强大和更积极的优化提供了机会。

**所以，不要写以下内容——你可能很难发现运行时类型不匹配的问题**：

```
<xsl:function name="my:isEqual">           
  <xsl:param name="Object1" />           
  <xsl:param name="Object2" /> 
```

**而是使用 XSLT 2.0 的全部功能并指定正确的类型**：

```
<xsl:function name="my:isEqual" as="xs:boolean">           
  <xsl:param name="Object1" as="element()?" />           
  <xsl:param name="Object2" as="element()?" /> 
```

**最后，代码结束**：

```
 <xsl:if test="$Object1PostalCode = $Object2PostalCode">                     
      !!!What to do here!!!                 
    </xsl:if>             
</xsl:function> 
```

**只需返回比较 - 它的计算结果完全为`true()`or`false()`**：

```
 <xsl:sequence select="$Object1PostalCode eq $Object2PostalCode"/>                     
</xsl:function> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T11:48:42.900

你只是想要

```
<xsl:sequence select="$Object1PostalCode = $Object2PostalCode"/> 
```

而不是`xsl:if`.

# iphone - 无法将 NSMutableArray 写入 NSFileManager iOS Sdk

> ID：10296941
> 
> 赞同：0
> 
> 时间：2012-04-24T11:26:49.883
> 
> 标签：iphone, objective-c, xcode, nsfilemanager

我写了下面的代码来将 nsmutablearray 写入文件管理器。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

// the path to write file
NSString *arrayFile = [documentsDirectory stringByAppendingPathComponent:arrayName];
[imagesarray writeToFile:arrayFile atomically:YES]; 
```

但是文件 id 没有在 NSFilemanager 中创建，我没有得到可能是问题所在。

谁能告诉我原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:59:10.283

有几件事可能会导致这段代码失败。要检查的事情是： 1) 确保 arrayFile 的值是应用程序沙箱绝对路径中的正确文件名。它不能在应用程序包中或沙盒之外。2) 确保 imagesArray 中的所有元素都可通过此方法写入。此方法只会写入 NSString、NSNumber、NSDate、NSData、NSArray 和 NSDictionary 对象。如果对象是 NSDictionary 或 NSArray，那么每个元素或子元素也必须是这四种类型之一。

数组的名称意味着您正在编写一个图像数组。这是行不通的，因为 UIImage 不是这 6 种神圣类型之一。您可以使用如下代码段将 UIImage 转换为 JPEG 或 PNG 表示：

```
UIImage *image = [UIImage imageNamed:@"myimage.png"];
NSData *data = UIImagePNGRepresentation(image, 1.0); 
```

# javascript - 如何使用 JavaScript 截取 HTML5 视频的不同屏幕截图？

> ID：10296942
> 
> 赞同：1
> 
> 时间：2012-04-24T11:26:52.863
> 
> 标签：javascript, html, video, canvas, screenshot

我一直在使用 HTML5 视频标签，我想实现一件事，我需要同时呈现视频的不同部分的多个屏幕截图，例如原始视频下方的一组缩略图。

到目前为止，我已经尝试了我在网上找到的各种方法，但到目前为止没有成功。

我想要实现的是这样的：http: [//open.bbc.co.uk/rad/demos/html5/rdtv/episode2/index.html](http://open.bbc.co.uk/rad/demos/html5/rdtv/episode2/index.html)

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:07:32.163

您是否尝试过“javaScript 画布快照”？

[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)

[您可以使用 Canvas 对页面进行“截图”吗？](https://stackoverflow.com/questions/4340056/can-you-take-a-screenshot-of-the-page-using-canvas)

[使用 HTML5/Canvas/JavaScript 截取屏幕截图](https://stackoverflow.com/questions/4912092/using-html5-canvas-javascript-to-take-screenshots)

如果您想使用 Node.jx 在桌面和/或服务器上半自动执行此操作，还有“无头 webkit 浏览器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:38:32.690

这是不可能的。您无法访问视频流中的数据以从 JavaScript 中获取屏幕截图。您必须在服务器端执行此操作。

# c# - 在转发器中重新绑定下拉列表

> ID：10296948
> 
> 赞同：1
> 
> 时间：2012-04-24T11:27:07.417
> 
> 标签：c#, asp.net, drop-down-menu, repeater, viewstate

我在转发器中有一个下拉列表。我希望每当提出回发时，然后重新绑定下拉列表。

问题是，当我调试这个东西时，代码确实通过 ddl.databind() 运行，但是对于某些响应，下拉列表仍然从原始视图状态加载列表和选择的值。我知道，因为如果我将 ddl 的 EnableViewState 设置为“false”，我可以正确地重新绑定 ddl。

有什么建议么？

```
<asp:Repeater ID="reEventsDataTypeOthers" runat="server" Visible="false">
...
<ItemTemplate>
...
<asp:DropDownList ID="ddlEventSessionLocation" runat="server" CssClass="ddlControlS1L" Title="Location" EnableViewState="true"/> 
```

Codebehinde（我试图将它绑定在 _ItemCreated 和 _ItemDataBound 中，但都失败了）：

```
void reEventsDataTypeOthers_ItemCreated(object sender, RepeaterItemEventArgs e)
        {
            if (e.Item.ItemType != ListItemType.Item && e.Item.ItemType != ListItemType.AlternatingItem)
                return;
            FSIDropDownList ddl = e.Item.FindControl("ddlEventSessionLocation") as FSIDropDownList;
            if (ddl != null && ddl.SelectedValue != "NOTSET")
            {
                ddl.DataSource = EventLocations;
                ddl.DataTextField = "Value";
                ddl.DataValueField = "Key";
                ddl.DataBind();
                ddl.Items.Insert(0, new ListItem("Not Set", "NOTSET"));
            }
        } 
```

**更新，问题已解决**：

我所做的是将下拉列表绑定代码放在此转发器的预渲染事件方法中，从而可以覆盖视图状态值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:43:38.863

the drop down list is probably being overwritten by the viewstate, make sure to populate it after page init has completed, in the page load for example. See the page cycle here: [http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

# php - 使用 php 为 html 创建自定义标签

> ID：10296957
> 
> 赞同：0
> 
> 时间：2012-04-24T11:27:36.023
> 
> 标签：php, html, regex

是否可以像我尝试做的那样使用 php 创建自定义标签

```
$str="[code] Code will goes here [/code]"
echo preg_replace("<div style='background-color:yellow;padding:5px'>$1</div>","/\[code\](.+)\[\/code\]/i",$str); 
```

所以 [code] 将是我的自定义标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:32:08.470

是的，这最终是可能的。

实际上，您正在寻找的是一个 bbcode 解析器，对吗？

如果是这种情况，请查看：[StringParser_BBCode](http://www.christian-seiler.de/projekte/php/bbcode/doc/en/chapter1.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:39:26.210

试试这个代码：

```
$str = "[code] Code goes here, and it can safely contain <html> tags [/code]";
echo preg_replace_callback(
  '#\[code\](.+?)\[/code\]#i',
  function($matches) {
    return "<div style='background-color:yellow;padding:5px'>".htmlspecialchars(trim($matches[1]))."</div>";
  },
  $str
); 
```

...或对于 PHP < 5.3：

```
function bbcode_code_tag($matches) {
  return "<div style='background-color:yellow;padding:5px'>".htmlspecialchars(trim($matches[1]))."</div>";
}

$str = "[code] Code goes here, and it can safely contain <html> tags [/code]";
echo preg_replace_callback('#\[code\](.+?)\[/code\]#i', 'bbcode_code_tag', $str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:44:48.150

你是如此接近：

```
$str = "[code] Code will goes here [/code]";

//Pattern, Replacement, Original String

echo preg_replace(
    "/\[code\](.*?)\[\/code\]/",
    '<div style="background-color:yellow;padding:5px">$1</div>',
    $str
); 
```

# wordpress - 具有自定义帖子类型和自定义分类的 WordPress 永久链接

> ID：10296959
> 
> 赞同：0
> 
> 时间：2012-04-24T11:27:53.340
> 
> 标签：wordpress

我有一个名为 product 的自定义帖子类型和一个名为 product_types 的产品自定义分类，它是分层的，所以我在其中有子类别。

我希望永久链接显示为[http://mysite.com/product_type/sub_category/postname](http://mysite.com/product_type/sub_category/postname)

我尝试了很多插件和我在网上找到的东西，到目前为止没有任何效果。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:31:01.407

首先，我会仔细检查创建自定义帖子类型的函数，在该函数中应该有一个名为：rewrite

IE：

```
register_post_type( 'products',
   'menu_position' => 25, // below pages
   'public' => true,
   'show_ui' => true,
   'rewrite' => array( 'slug' => 'product' ) <-- this is what you need!
); 
```

还要检查 register_taxonomy 函数是否相同！

IE：

```
 register_taxonomy(
  'team',array('product_types'), 
    array(
    'public' => true,
    'show_ui' => true,
    'show_in_nav_menus' => true,
    'query_var' => true,
    'hierarchical' => true, <-- this is needed!
    'rewrite' => true <-- this is what you need!
  )); 
```

唯一需要检查的是：

您的永久链接结构设置为 /%postname%/ 您可能必须重置为默认值，保存它，然后重新设置为 /%postname%/ 并保存，

希望有帮助:)

马蒂

# c# - System.IO.IOException：客户端和服务器之间存在时间和/或日期差异

> ID：10296960
> 
> 赞同：3
> 
> 时间：2012-04-24T11:27:56.857
> 
> 标签：c#

我正在尝试使用 System.IO.File.Copy() 从网络位置将文件复制到客户端。这已经工作了很长时间，但现在，突然之间，客户收到此错误：

> System.IO.IOException：客户端和服务器之间存在时间和/或日期差异。

我用谷歌搜索，但找不到任何与 C# 或 .Net 相关的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T12:13:59.730

由于低级 Windows 错误，总是会引发 IOException。查看 WinError.h SDK 头文件会产生很好的匹配：

```
//
// MessageId: ERROR_TIME_SKEW
//
// MessageText:
//
// There is a time and/or date difference between the client and server.
//
#define ERROR_TIME_SKEW                  1398L 
```

从字面上看，两台机器的时钟不会在同一 UTC 时间滴答作响。这是一个相当严重的问题，需要相应的系统管理员解决。就像让他们设置机器以将其时钟同步到域控制器或通过启用 Windows 时间服务。serverfault.com SE 站点是跟进有关此问题的更多问题的好地方。

# c# - 在开发模块化应用程序时使用快速失败的方法

> ID：10296961
> 
> 赞同：1
> 
> 时间：2012-04-24T11:28:00.757
> 
> 标签：c#, wpf, exception-handling, error-handling, modularity

在开发模块化应用程序时，我们需要使用[Fail-fast](http://en.wikipedia.org/wiki/Fail-fast)系统是否很明显？

创建模块时，如果模块无法处理的错误情况，它应该报告错误（如抛出异常......）而不用担心谁来处理它。看起来这可以作为开发模块时的指导方针。这有什么问题吗？

**编辑**：示例

**在 module.dll 中**

```
public class SomeClass:ISomeInterface
{

    public void CreateFile(string filename)
    {
       //The module have no idea who calls this. But there is something wrong        
       //somewhere so  throw an exception early. The module writer has no control over 
       //how the exception is handled. So if this exception is not handled by the 
       //Client Application the application can potentially crash.Do he need to worry 
       //about that?
       if(filename == null)
       {
          throw new ArgumentNullException("Filename is null");
       }

       //I think the following is bad. This code is making sure that a module 
       //exception wont crash the application.Is it good?
       //if(filename ==null)
       //{
       //Logger.log("filename is null");
       //return;
       //}
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:49:44.203

我可以看到两类严重异常：其中整个系统可能已被破坏，并且没有太多可以安全假设的情况，以及那些代码正在运行的系统的重要方面期望“正常工作”，不会，但没有理由相信系统的其他部分受到损害。在前一种情况下，除了死机之外，程序实际上并没有什么可以做的，如果它可以在不破坏任何“主线”数据的情况下记录发生的事情，则可能会尝试记录发生的事情。但是，在后一种情况下，终止应用程序将过于“粗鲁”。恕我直言，更好的方法是设计子系统，以便代码可以“拔掉插头”以防止它导致数据损坏，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:02:11.373

> 快速故障模块将处理错误但不检测错误的责任传递给**下一个更高的系统设计级别**。

来自维基百科的定义。“下一个更高的系统设计水平”究竟*是什么。*这不应该至少是一个报告故障的级别，以便有人可以采取纠正措施并解决问题吗？在使用您的类的客户端代码提供的上层中实现。或者通过 AppDomain.UnhandledException 调用的通用错误报告器。两者都完全不受您的控制。

抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:49:57.843

通常，当我在 C++ 中实现一个严重错误方案时，我不会让这样的严重异常甚至离开异常处理程序——我调用一个全局可访问的类实例的“criticalExit()”方法，（我通常有一个这些用于存储“全局”方法等，例如记录器、对象池），但有一个例外和一个字符串（字符串通常只是模块和函数名称）。criticalExit() 锁定互斥体，将其优先级提高到“THREAD_PRIORITY_TIME_CRITICAL”，打开“CriticalError.Log”，将异常消息和字符串附加到文件，关闭它并调用 ExitProcess(1)，(Environment.Exit(1)) .

..而且，只是为了看看，我试过在 C# 中这样做。生成全局可访问的单个实例并不容易 :(

# jquery-ui - JQuery UI Datepicker - 如何删除“完成”按钮

> ID：10296962
> 
> 赞同：8
> 
> 时间：2012-04-24T11:28:06.413
> 
> 标签：jquery-ui, jquery-ui-datepicker

我正在使用 Jquery 日期选择器。我希望按钮面板可见，但我不希望“完成”按钮。根据[这里的 Jquery UI 页面](http://jqueryui.com/demos/datepicker/#buttonbar)

> 使用布尔型 showButtonPanel 选项显示用于选择今天日期的按钮和用于关闭日历的完成按钮。显示栏时默认启用每个按钮，但可以使用其他选项关闭。

关闭“**完成”**按钮的选项有哪些？我的代码：

```
<script>
 $(function() {
  $( "#JourneyDate" ).datepicker({
        showButtonPanel: true,
        showWeek: true,
        maxDate: "+0",
        dateFormat: 'd MM yy',
        changeMonth: true,
        changeYear: true
    });
});
</script> 
```

我尝试使用选择器`ui-datepicker-close`和调用访问按钮，`remove()`但这似乎不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T11:33:56.757

你可以用 CSS 来做；

```
button.ui-datepicker-close {display: none;}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:21:38.017

```
$('<style type="text/css"> .ui-datepicker-close { display: none; } </style>').appendTo("head"); 
```

# javascript - 无法隐藏我的部分页面，但相同的代码适用于 JSFiddle

> ID：10296968
> 
> 赞同：1
> 
> 时间：2012-04-24T11:28:45.290
> 
> 标签：javascript, jquery, asp.net, css, razor

我想使用 jquery 中的 toggle() （或 hide()），但它不起作用。

我知道我使用的语法还不错。它适用于 [jsFiddle](http://jsfiddle.net/hNzn3/2/ "小提琴")，但我无法使其与剃刀视图一起使用。

这是我想使用的代码：

```
 <script type="text/javascript">
        $(".hidden").toggle();
    </script>

@Using Html.BeginForm(IsPost)
@Html.ValidationSummary(True)
@<fieldset>
    <legend>contact</legend>
    <table>
        <tr>
        <td><h3>@Html.Raw("Données personnelles : ")</h3></td>
        </tr>

        <tr>
        <td>@Html.Raw("Nom : ")</td>
        <td>@Html.EditorFor(Function(model) model.nom)
        @Html.ValidationMessageFor(Function(model) model.nom)</td>

        <td>@Html.Raw("Prénom : ")</td>
        <td>@Html.EditorFor(Function(model) model.prenom)
        @Html.ValidationMessageFor(Function(model) model.prenom)</td>
        </tr>

        <tr>
        <td class="hidden">@Html.Raw("Date de naissance : ")</td>
        <td>@Html.EditorFor(Function(model) model.dateNaissance)
        @Html.ValidationMessageFor(Function(model) model.dateNaissance)</td>
        </tr>

    </table>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
End Using 
```

生成的 html 代码如下：

```
 <tbody><tr>
        <td><h3>Données personnelles : </h3></td>
        </tr>

        <tr>
        <td>Nom : </td>
        <td><input class="text-box single-line" id="nom" name="nom" value="" type="text">
        <span class="field-validation-valid" data-valmsg-for="nom" data-valmsg-replace="true"></span></td>

        <td>Prénom : </td>
        <td><input class="text-box single-line" id="prenom" name="prenom" value="" type="text">
        <span class="field-validation-valid" data-valmsg-for="prenom" data-valmsg-replace="true"></span></td>
        </tr>

        <tr>
        <td class="hidden">Date de naissance : </td>
        <td><input class="text-box single-line" id="dateNaissance" name="dateNaissance" value="" type="text">
        <span class="field-validation-valid" data-valmsg-for="dateNaissance" data-valmsg-replace="true"></span></td>
        </tr> 
```

以下是与这些跨度相关的 CSS：

```
 /* Styles for validation helpers
        -----------------------------------------------------------*/
        .field-validation-error {
            color: #ff0000;
        }

        .field-validation-valid {
            display: none;
        }

        .input-validation-error {
            border: 1px solid #ff0000;
            background-color: #ffeeee;
        }

        .validation-summary-errors {
            font-weight: bold;
            color: #ff0000;
        }

        .validation-summary-valid {
            display: none;
        }

        /* Styles for editor and display helpers
        ----------------------------------------------------------*/
        .display-label, 
        .editor-label {
            margin: 1em 0 0 0;
        }

        .display-field, 
        .editor-field {
            margin: 0.5em 0 0 0;
            position:relative;
            left:5px;
        }

        .text-box {
            width: 30em;
        }

        .multiline
        {
            height: 6.5em;
            position:relative;
            left:5px;
        }

        .tri-state {
            width: 6em;
        }
        .display-field
        {
            font-size:1.5em;
        } 
```

我能做些什么来绕过所有这些东西来隐藏页面的某些部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T11:33:03.500

如果您的代码确实如引用的那样，那么它在 jsfiddle 而不是在您的代码中起作用的原因是 jsfiddle在 HTML*之后*包含您的脚本，但是您的代码在元素存在于 DOM*之前运行脚本。*

你有两个选择：

1.  将您的脚本放在页面*末尾*，就在结束`</body>`标记之前。我会推荐这个，[YUI 团队也是如此](http://developer.yahoo.com/performance/rules.html)。

2.  使用 jQuery 的[`ready`](http://api.jquery.com/ready)函数（人们经常使用令人困惑的快捷方式，它只是[将一个函数传递给函数`jQuery`，](http://api.jquery.com/jQuery/#jQuery3)通常别名为`$`）来安排您的代码在“DOM 就绪”上运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T11:30:50.873

```
 <script type="text/javascript">
 $(document).ready(function(){
        $(".hidden").toggle();
});
    </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T11:32:49.380

我认为不需要为此使用 Javascript（或 jQuery）。如果您希望最初隐藏该类的元素`hidden`，只需使用 CSS 声明：

```
.hidden {
    display: none;
} 
```

# liferay - 在服务器上部署 .war 文件（Liferay+Tomcat Bundle）

> ID：10296973
> 
> 赞同：4
> 
> 时间：2012-04-24T11:29:16.060
> 
> 标签：liferay, war

我已经准备好我的新 Liferay 站点并尝试在真实环境中对其进行测试。我刚刚在我的服务器上成功安装了 Tomcat-Liferay 包，并根据一些论坛和评论的说明将 .war 文件复制到了 tomcat 旁边的部署目录中；但是转到 URL 后，我仍然看到默认的 Liferay 页面，并且我的页面没有显示。我在这里做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:16:54.837

默认情况下，部署主题或 portlet 插件不会改变门户的外观。部署后，您必须在一个页面或一组页面上应用主题。同样，对于 portlet，您应该在部署后将 portlet 添加到页面上。

回到你的问题，因为它是一个主题，一旦主题被部署，登录到 Liferay，点击管理页面。您应该在两个级别上看到“外观”选项卡。一个是页面集级别，适用于该组中的所有页面，无论是公共页面还是私有页面，另一个是页面级别，即仅适用于一个页面。

根据您的要求单击“外观”选项卡（无论您希望将主题应用于所有页面还是仅应用于单个页面）。在这里，您应该看到当前应用的主题（默认情况下应该是经典主题）和可用主题。您的新主题应该在可用主题部分中可见。只需单击您的主题，您的门户页面或页面的外观就会发生变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T06:24:20.007

得到它的工作。将 them.war 文件拖放到 tomcat 文件夹旁边的 deploy 文件夹中，如果有 Liferay 自己的数据库以外的数据库，则在 portal-ext.properties 文件中定义其参数。此外，如果您在 tomcat 旁边的数据文件夹中保存了任何文件，则可能还需要导入该文件。

# iphone - xcode 中 *.mode1v3 文件的作用是什么？

> ID：10296977
> 
> 赞同：4
> 
> 时间：2012-04-24T11:29:29.893
> 
> 标签：iphone, ipad

我知道 project.pbxproje 包含项目文件信息。

*.pbxuser 包含一些窗口的布局信息。

但我找不到.mode1v3的效果是什么。

如果你给点小费。非常感谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-13T20:18:57.173

.mode1v3 文件包含用户特定的项目设置：窗口状态和几何图形、断点、自定义可执行文件等。

# c# - ASP.NET MVC 在表单 GET 上制定正确的 URL

> ID：10296978
> 
> 赞同：1
> 
> 时间：2012-04-24T11:29:31.377
> 
> 标签：c#, forms, asp.net-web-api, http-get

我的 web-api 控制器有一个 GET 方法来使用路由搜索域可用性：api/domain/query/

我想构建一个获取此路径的表单（顺便说一下，您认为 POST 在这种情况下更好吗？）

这是废话/坏/错误，但这是我到目前为止的地方（PS我希望表格有一个ID）。Model.Name 是域名：

```
@using (Html.BeginForm("query", "api/domain", FormMethod.Get, new { id = "domain-query" }))
{
    @Html.ValidationSummary(true)
    <div class="editor-field">
        @Html.EditorFor(Model => Model.Name)
        @Html.ValidationMessageFor(Model => Model.Name)
    </div>
    <p>
        <input type="submit" value="Search" />
    </p>
} 
```

这将导致：**api/domain/query?Name=test**而不是**api/domain/query/test**

感谢您的帮助，我知道这是一个菜鸟问题，抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:40:05.043

这里有几件事：

1) 不要在表单中使用 GET。除非在特殊情况下，否则应该以这种方式发布 MVC 表单。

2）你`BeginForm`错了。您需要具有此重载的操作名称和控制器名称，但大多数时候您不必担心它。同样，在大多数情况下，您会想要

```
@using (Html.BeginForm()) 
```

像这样。

当提示输入控制器时，您也不想为控制器放置“路径”。如果您的控制器名称是`AppController`字符串，`controller`则应该是`App`.

看看这个例子，我预计你会遇到很多其他问题。在你思考它应该如何工作之前，你将有很多问题需要解决。我强烈建议通过“Nerd Dinner”教程来了解如何编写 MVC 代码。

# jquery - 数据属性变为整数

> ID：10296985
> 
> 赞同：24
> 
> 时间：2012-04-24T11:30:02.373
> 
> 标签：jquery

[在 jsfiddle 上](http://jsfiddle.net/TZxUU/2/)查看这个简单的示例

```
<div id ="a" data-siteid="00005">00005 turns into:</div>
<div id="b" data-siteid="S00005">S00005 turns into: </div> 
```

代码

```
$('#a').append($('#a').data("siteid"));
$('#b').append($('#b').data("siteid")); 
```

​ 结果

```
00005 turns into:5
S00005 turns into: S00005 
```

我想返回“00005”和“S00005”。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-24T11:33:50.173

尝试

```
$('#a').append($('#a').attr('data-siteid'));
$('#b').append($('#b').attr('data-siteid')); 
```

[**来自 jQuery 文档**](http://api.jquery.com/data/#data-html5)

> 每次尝试都将字符串转换为 JavaScript 值（这包括布尔值、数字、对象、数组和 null），否则将其保留为字符串。要将值的属性作为字符串检索而不进行任何转换，请使用 attr() 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T11:35:07.477

> 每次尝试都将字符串转换为 JavaScript 值（这包括布尔值、数字、对象、数组和 null），否则将其保留为字符串。要将值的属性作为字符串检索而不进行任何转换，请使用 attr() 方法。

从这里：[http ://api.jquery.com/data/#data-html5](http://api.jquery.com/data/#data-html5)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-01-04T03:31:59.690

我知道这是一篇稍旧的帖子，但您可以采用另一种方法将数据属性值转换为字符串：

```
$('#a').data("siteid").toString() 
```

或者

```
$('#a').data().siteid.toString() 
```

这是如何工作的一些例子：

```
> (12345).toString()
"12345"

> (14.5).toString()
"14.5"

> (-14.5).toString()
"-14.5"

> "bob".toString()
"bob"

> (true).toString()
"true"

> ({a: "b"}).toString()
"[object Object]"

>(function(){console.log("bob")}).toString()
"function (){console.log("bob")}" 
```

示例中的括号是为了避免分配变量，因为您不能直接`#toString`在数字上使用: `123.toString()`，但是当它分配给变量或括在括号中时可以使用: `(123).toString()`。

请记住，您将无法将 null 或 undefined 转换为字符串。

数组以及未定义和空值也会发生一些有趣的事情：

```
> (["bob", 123, true, null, undefined, this]).toString()
"bob,123,true,,,[object Window]" 
```

# jquery - 带有 ASP.net 回发的 Jquery 对话框

> ID：10296990
> 
> 赞同：0
> 
> 时间：2012-04-24T11:30:29.420
> 
> 标签：jquery, asp.net, css, iframe, postback

我喜欢有一个带有外部 url 链接的对话框模式，并且允许在对话框内部保存而不关闭对话框。我不确定这是最好的方法，但至少在按钮保存对话框模式时不会关闭。因此，为了让我在不关闭对话框的情况下单击模态弹出窗口中的保存按钮，我与 iframe 一起使用，但有两个问题：

1.  如果没有运行，css 会有所不同`//dialog.load(url);`
2.  iframe 无法自动调整大小。

那么有人对此有解决方案吗？

```
$('.popupEdit').click(function () {
    var url = this.href;

    var dialog = $('<div id="pEdit"><iframe id="iframedit" src="' + url + '" style="width:1200px;height:490px;"  frameborder="0" ></iframe></div>').appendTo('body');
    //var dialog = $('<iframe src="' + url + '" style="width:1200px;height:490px;"></iframe>').appendTo('body');
    //dialog.load(url);
    dialog.dialog({
        autoResize: true,
        height: 'auto',
        width: 'auto',
        modal: true,
        position: 'center',
        draggable: true,
        open: function (type, data) { $(this).parent().appendTo("form"); },
        close: function (type, data) { $("[id$=btnSearch]").click(); }
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:29:37.080

可能这种替代方案可以为您提供要求：

[您可以在http://www.scriptiny.com/2009/05/javascript-popup-box/](http://www.scriptiny.com/2009/05/javascript-popup-box/) 上使用带有`Iframe`Option的 TinyBox 弹出窗口。

具有与您提到的相同的功能...

# php - 在 URL 中使用 mcrypted 值

> ID：10296991
> 
> 赞同：0
> 
> 时间：2012-04-24T11:30:30.067
> 
> 标签：php, urlencode, mcrypt

我写了一个小类来发送带有 url 的私有数据（不能使用 cookie/会话或其他任何东西）。我使用 PHP 的 mcrypt 对其进行加密/解密，并对其进行 base64-en/解码以在 url 中使用。

不幸的是，我仍然不时得到错误的结果。`+`我注意到，当网址中至少出现 a 时，总是会发生这种情况。我也玩过`rawurlencode`and `urlencode`/ `urldecode`，但没有成功。我也尝试`strtr()`了加密数据，但不知何故`+`仍然出现。有人有想法吗？

这是我的课：

```
class crypto 
{
    public function __construct()
    {
        $this->iv_size = mcrypt_get_iv_size(MCRYPT_BLOWFISH, MCRYPT_MODE_ECB);
        $this->iv = mcrypt_create_iv($this->iv_size, MCRYPT_RAND);
        $this->llave = 'da332sdf9'; 
    }

    public function make_crypt($string)
    {   
        $crypt = mcrypt_encrypt(MCRYPT_BLOWFISH, $this->llave, $string, MCRYPT_MODE_ECB, $this->iv);
        $crypt = rawurlencode(base64_encode($crypt));
        $crypt = strtr($crypt, '+/', '-_');     
        return $crypt;
    }

    public function get_crypt($data)
    {   
        $crypt = strtr($crypt, '-_', '+/');     
        $data = base64_decode($data);
        $decrypted = mcrypt_decrypt (MCRYPT_BLOWFISH, $this->llave, $data, MCRYPT_MODE_ECB, $this->iv);
        return $decrypted;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:37:18.917

你是什​​么意思你尝试了“没有成功”的 URL 编码？URL 编码该值确实有效，否则该功能将被破坏。我在我的框架中使用它并且没有错误。

您确定要对加密值进行编码吗？不要对整个 URL 进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:14:04.843

## 观察

`$crypt = strtr($crypt, '-_', '+/');`?? 在哪里`crypt`定义？？？

`rawurlencode`解码在哪里....

我总是喜欢`HEX`这样我就不必担心`url`安全字符

## 示例测试您当前的课程将失败

```
$crypt = new Crypto ();
echo "<pre>";
for($i = 0; $i < 10; $i ++) {
    $pass = generatePassword ( mt_rand ( 5, 10 ) );
    $test = $crypt->make_crypt ( $pass );
    $output = $crypt->get_crypt ( $test );

    if ($pass == $output) {
        echo " $pass ($test) = $output \n";
    } else {
        var_dump ( $pass, $output );
        echo " $pass ($test) != $output \n";
    }
} 
```

## 解决方案

```
class Crypto {

    private $iv_size;
    private $iv;
    private $llave;

    public function __construct() {
        $this->iv_size = mcrypt_get_iv_size ( MCRYPT_BLOWFISH, MCRYPT_MODE_ECB );
        $this->iv = mcrypt_create_iv ( $this->iv_size, MCRYPT_RAND );
        $this->llave = 'da332sdf9';
    }

    public function make_crypt($string) {
        $crypt = mcrypt_encrypt ( MCRYPT_BLOWFISH, $this->llave, $string, MCRYPT_MODE_ECB, $this->iv );
        return bin2hex ( $crypt );
    }

    public function get_crypt($data) {
        $data = pack ( "H*", $data );
        $decrypted = mcrypt_decrypt ( MCRYPT_BLOWFISH, $this->llave, $data, MCRYPT_MODE_ECB, $this->iv );
        return trim ( $decrypted );
    }
} 
```

## 解决方案输出

```
 tXHhC8fk4 (b929695d39555523348051a72d15baaf) = tXHhC8fk4 
 drKH9 (909994926fe5cd30) = drKH9 
 mNwh6K (10af1bb381338943) = mNwh6K 
 CJZvqwGX (aa705c290759b18d) = CJZvqwGX 
 Jt4W7j (bc7ee842041b9860) = Jt4W7j 
 tgCHXyPvm (9f46b74ef59ee70da1dda30b3e52fe92) = tgCHXyPvm 
 LYxhVj (9e2079cff9d54007) = LYxhVj 
 kR8WLwh3T (3e4606d65defc74f3c82af5fb095f41d) = kR8WLwh3T 
 Z8NqWM6RHj (1d9eea2358674d78cc43e024cba5ba48) = Z8NqWM6RHj 
 TtqRf7M (09ef38114bb729c4) = TtqRf7M 
```

**用于生成数据的函数**

```
function generatePassword($length = 8) {
    $password = "";
    $possible = "2346789bcdfghjkmnpqrtvwxyzBCDFGHJKLMNPQRTVWXYZ";
    $maxlength = strlen ( $possible );
    if ($length > $maxlength) {
        $length = $maxlength;
    }
    $i = 0;
    while ( $i < $length ) {
        $char = substr ( $possible, mt_rand ( 0, $maxlength - 1 ), 1 );
        if (! strstr ( $password, $char )) {
            $password .= $char;
            $i ++;
        }

    }
    return $password;

} 
```

# jquery - 使用 AJAX 动态更新表行

> ID：10296992
> 
> 赞同：2
> 
> 时间：2012-04-24T11:30:32.393
> 
> 标签：jquery, ajax, html-table, row, updating

通常，我是 jfGit 的忠实拥护者，但我一直在寻找整个网络，无法让这段代码正常工作。

**我的设置：**

*   index.php - 包含由 mysql 数据库中的数据填充的表的页面。
*   update.php - 一个能够以 html 格式输出表格行的 php 脚本

**意图**

我想要做什么：通过单击链接或按钮，更新特定的表格行。

**当前解决方案**

这是到目前为止我尝试过的代码。

Ajax/jQuery 代码，就在 body 标签下（位置对吗？）：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(document).ready(function(){
$('a.pop').click(function() { 
var popID = $(this).attr('rel');
$.ajax({
        url: 'update.php',
        method: 'GET',
        data: 'userID=' + popID,
        success: function(returnData){
             $(popID).html(data);
              $(popID).dialog();
              alert('Load was performed.');
        }
    });
});
});
</script> 
```

以及表格代码（使用 php 打印）：

```
echo "<div id=\"$ID\">";
// all tr + td from table
echo "<td><a href=\"#\" id=\"clickingEvent\" class=\"pop\" rel=\"$ID\">Update</a></td>\n";
echo "</tr>\n";
echo "</div>"; 
```

**结果**

目前，我根本没有得到任何结果，AJAX 甚至没有加载 php 页面。单击更新按钮后，没有任何反应。

任何帮助将不胜感激，在此先感谢您:)

编辑：

**部分解决方案**

代码的 Ajax 部分现在可以正常工作，感谢大家的输入！

但是现在发生的是它在 table 标记前面**添加了一个 NEW 行，而旧行仍然存在。**当我查看生成的源代码时，它说有一个我指定的 div id 为“popID”的新行。向下滚动，似乎旧行的 div 标签已被删除。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:33:42.827

请注意，您应该将检索到的数据添加到 popID。正确的方法是将您的功能修改为：

```
$.ajax({
        url: 'update.php',
        method: 'GET',
        data: 'userID=' + popID,
        success: function(new_data){
             $(popID).html(new_data);
              $(popID).dialog();
              alert('Load was performed.');
        }
    }); 
```

请注意，returnData 现在是 new_data，并且您附加了相同的名称

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T11:34:23.543

尝试用这个替换ajax函数：

```
$.get('update.php',{userID: popID}, function(data) {
       $("#" + popID).html(data);
       $("#" + popID).dialog();
       alert('Load was performed.');
}); 
```

此外，代替`$("a.pop").click(...)`，使用：`$(document).on('click', 'a.pop', function () { ...});`

这将为您返回相同的 jQuery 事件的新按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T11:34:37.897

应该`$(popID).html(data);`是`$(popID).html(returnData);`吗？或者它是一个错字？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-30T11:28:12.333

如果你有`update.php`：

1.  一条`UPDATE`sql语句
2.  用ajax查询它，你的数据库是MySQL
3.  您尝试在**不更改**的情况下更新记录，（我的意思是简单地更新具有相同数据的行）

那么......你必须得到任何更新，因为它是 ajax 查询中的超奇怪错误，`UPDATE`在你的服务器端脚本中具有特殊的语句。但是，如果您*在*任何保存（更新）数据之前对其进行一些更改，*它将起作用。*

 *```
Use `REPLACE` statement instead. 
```

我花了很多时间寻找这个解决方案，真的太多了。而且我不明白为什么会发生这种情况，因为当我使用自己的参数调试整个脚本时一切正常。*