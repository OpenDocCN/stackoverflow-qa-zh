# StackOverflow 问答 11492000-11492999

# android - Holo 主题是否包含在所有 4.0 设备中？

> ID：11492003
> 
> 赞同：0
> 
> 时间：2012-07-15T12:43:53.683
> 
> 标签：android, android-theme

我`android:Theme.Holo`在我的活动中使用，我想知道是否有任何方法可以不推荐。我的意思是如果设备中不存在 Holo 主题（显然在 >=Honeycomb 中）。如果它不存在，我猜应用程序会崩溃，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:56:30.160

在运行 Android Market 的所有 Android 4.0 设备上，Holo 主题是强制性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:55:48.557

是的， *Android 4.0展示了 Holo 主题系列，自**Android 3.0*首次亮相以来进一步完善。事实上，*谷歌*继续通过强制使用原生 Holo 主题（及其变体：Holo Holo Light 和 Light DarkActionBar）来访问 Marketplace，从而统一各种 Android 设备上的用户体验。所以要问你的问题，所有运行 Android 4.0 的设备都使用 Holo 主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T13:07:05.677

正如其他答案所说，Holo 在 4.0 中是强制性的，但如果您想在 4.0 之前的手机上支持 Holo，请查看 HoloEverywhere，[https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)。

# javascript - 如果我不通过，javascripts 可以工作

> ID：11492004
> 
> 赞同：0
> 
> 时间：2012-07-15T12:43:55.883
> 
> 标签：javascript

有没有人发现他们的 javascript 不起作用，但是当他们单步执行代码时它工作正常？

```
 var cookie = getCookie('lusr');
var username = cookie;
if(!cookie){
    $("#UserNav").load("loginform.html");
    $("#loginbtn").click( function(){
        var username = $("#usernametxt").val();
        var password = $("#passwordtxt").val();
        login(username,password);
    });
}else{
    $("#UserNav").load("user.htm");
    $("#WelcomeUser").text("Welcome "+ username);
} 
```

我的问题发生在这一行：

```
 $("#WelcomeUser").text("Welcome "+ username); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:48:19.687

您正在使用`load()`从服务器异步获取的功能。这意味着您的表单在您搜索其字段时尚未加载。

它在您单步执行时起作用的原因是因为它可以在您单步执行时加载表单。

您可以使用具有异步回调函数的另一个版本的加载，允许您提供仅在加载完成后才调用的功能。

查看[jQuery 文档](http://api.jquery.com/load/)以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:48:42.070

这是因为[load()](http://api.jquery.com/load/)是*异步*的：它立即返回，在后台执行其工作，然后在其任务完成时调用用户提供的函数。步进延迟给您一种错觉，即函数是同步的，并在返回之前执行所有工作。

因此，您应该传递一个回调函数`load()`并在该回调中执行后续工作：

```
var cookie = getCookie("lusr");
if(!cookie) {
    $("#UserNav").load("loginform.html", function() {
        $("#loginbtn").click(function() {
            var username = $("#usernametxt").val();
            var password = $("#passwordtxt").val();
            login(username, password);
        });
    });
} else {
    $("#UserNav").load("user.htm", function() {
        $("#WelcomeUser").text("Welcome " + cookie);
    });
} 
```

# cognos - 在 Cognos 中处理错误消息

> ID：11492007
> 
> 赞同：1
> 
> 时间：2012-07-15T12:43:58.987
> 
> 标签：cognos, cognos-bi

我已经在我的客户端计算机上安装了 Cognos 10 Framework Manager，当我尝试创建一个新项目时，出现了这个弹出消息。

我听说在这种情况下你需要有一个网络服务。问题是>我应该如何解决这个问题_

![在此处输入图像描述](../Images/f69f6bdc02eb4decf502583f49fb0736.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:40:11.890

Framework Manager 通常应配置为连接到正在运行的 Cognos BI 实例。如果您没有其中之一，您将在尝试在 FM 项目中执行各种活动时遇到错误（例如应用行级安全性）。即使是开始也很困难，因为 Framework Manager 将与 BI 服务器联系以检索数据源信息等内容。

如果您在某处有一个正在运行的 BI 服务器，则需要配置 FM 实例（客户端系统上的 Cognos 配置）以指向 Cognos BI 服务器的网关和调度程序 URL。以下是 IBM 网站上的相关文档：http: [//publib.boulder.ibm.com/infocenter/cbi/v10r1m1/topic/com.ibm.swg.ba.cognos.inst_cr_winux.10.1.1.doc/t_steps_configure_fm_environment_properties.html# steps_configure_FM_environment_properties](http://publib.boulder.ibm.com/infocenter/cbi/v10r1m1/topic/com.ibm.swg.ba.cognos.inst_cr_winux.10.1.1.doc/t_steps_configure_fm_environment_properties.html#steps_configure_FM_environment_properties)

# javascript - 使用 jquery 实现无限滚动

> ID：11492012
> 
> 赞同：9
> 
> 时间：2012-07-15T12:44:41.813
> 
> 标签：javascript, jquery, jquery-masonry, infinite-scroll

我正在开发一个项目，该项目使用[jQuery Masonry](http://masonry.desandro.com/index.html)和[Infinite Scroll](http://masonry.desandro.com/demos/infinite-scroll.html)插件使用他们的 API 从 instagram 加载“n”张图片。看看这个简短的[例子](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)，我的理解是我需要事先准备好要呈现的 html 页面：

```
<nav id="page-nav">
  <a href="pages/2.html"></a>
</nav> 
```

问题是，我真的不知道会检索到多少张图片。例如，这是我一次检索 20 张照片的方法。

```
 $(document).ready(function(){       
        var access_token = location.hash.split('=')[1];

        if (location.hash) {

              $.ajax({
            type: "GET",
            dataType: "jsonp",
            cache: false,
            url: "https://api.instagram.com/v1/users/MY_USER_ID/media/recent/?access_token=MY_ACCESS_TOKEN",
            success: function(data) {

                for (var i = 0; i < 20; i++) {
            $("#instafeed").append("<div class='instaframe'><a target='_blank' href='" + data.data[i].link +"'><img src='" + data.data[i].images.standard_resolution.url +"' /></a></div>");   
                }     

            }
        });

        } else {
        location.href="https://instagram.com/oauth/authorize/?display=touch&client_id=MY_CLIENT_ID&redirect_uri=MY_URI"; 

        }

    }); 
```

我想我需要一个分页机制，但根据上面提到的教程，我相信我首先需要预先定义要加载的 html 页面。所以现在我的问题在这里

1.  这是否意味着这个插件（[Infinite Scroll](http://masonry.desandro.com/demos/infinite-scroll.html)）需要在一个目录中有“n”个 html 文件才能实现无限滚动？
2.  如果我不知道我将拥有多少页，是否可以使用相同的插件实现无限滚动。甚至不必创建物理 html 文件就更好了？
3.  这种分页怎么实现呢？（即，只要用户继续向下滚动，就可以加载 20 张图片块）在线文档不多，您能否通过演示或描述提供一个简短的步骤？

亲切的问候

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T19:36:14.483

**1）这是否意味着这个插件（无限滚动）需要有“n”个html文件**

绝对不。不需要事先生成静态的html页面，唯一需要的就是一个URL方案，可以通过改变URL中的一个数字来获取后续页面内容。

从无限滚动插件的角度来考虑。您在页面 #1 中加载插件 JavaScript，并在页面 #1 内提供指向页面 #2 的链接。现在，当用户滚动过去第 1 页时，插件的唯一变量是当前页码，例如 2、3 或 4 (N)

插件需要创建 URL 以在用户滚动时获取内容。那么插件是如何做到的呢？该插件查看 page#1 中提供的下一个 URL 结构，对其进行解析并创建一个“基本路径”，它将不断添加 current_page_number 以获取后续内容。这就是 NAV 选择器的作用。

因此，假设我在 page#1 中有类似**/home/page/2**作为下一个 URL 的内容。该插件会将其解析为一个数组

**[/home/page/,2]**

并认为 base_path = **"/home/page/"**

当插件尝试获取 page_number 3 时，它只会将 3 附加到基本路径，例如 base_path.join(current_page_num) 使其成为**/home/page/3**

在服务器端，我可以有一个控制器来处理所有 /home/page/1 到 /home/page/N 的链接。您只需查看插件内部，查找 _determinePath 并检索函数。

现在您也可以看到问题所在。问题在于，根据您在代码中进行分页的方式以及您需要多少变量，可能存在无限多种 URL 结构。我做分页的方式与你做分页的方式不同。框架也是如此。Drupal 分页方案可能与 Djanga 和 wordpress 等不同。

该插件不可能处理所有这些 URL 结构。给定下一个 URL，不可能总是推断出它需要添加 current_page_number 的“基本路径”。再看插件的 _determinePath() 方法，看看它可以处理什么样的 URL。它可以解析简单的 URL 结构，例如 page2.html 或 page=2，但如果您的 URL 结构复杂或插件无法处理，您必须提供自己的实现。也看看 pathParse() 方法。

**2）如果我不知道我将拥有多少页，是否可以使用同一个插件实现无限滚动。**

同样，无需创建 HTML 文件。您有两种选择来表示内容结束（不知道您事先有多少张图片）

*   当您达到“无内容条件”时，您可以返回 HTTP 404。
*   或者您可以返回一个空字符串。

这能回答问题吗？

它如何与插件一起使用

*   第一页 - 包括 - 导航选择器 - 以通常的方式加载 THNIGS
*   加载的第一页 - 使用 instagram 分页并将“nextURL”存储在您的 javascript 中的某处
*   On Scroll - 使用 (2) 覆盖 _determinePath 以提供您自己的获取 URL - 让插件检索该 URL
*   覆盖插件内容选择器 - 因此它将新元素返回给回调
*   On Plugin fetch content - 使用插件内部的回调来更新你的页面

## 更新 github repo

我已经分叉了 paul 的 github repo 以添加 PHP 服务器端集成的文档。我认为插件假设下一个 URL 仅依赖于当前页码的限制过于严格。我们需要从下一页内容中获取 nextURL。

Github Repo - [https://github.com/rjha/infinite-scroll](https://github.com/rjha/infinite-scroll)

Pull request on base repo - [https://github.com/paulirish/infinite-scroll/pull/219](https://github.com/paulirish/infinite-scroll/pull/219)

My javascript knowledge is very limited and maybe you can do a better job of extending the base plugin. However every drop helps make the ocean :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T20:18:13.187

> 这是否意味着这个插件（无限滚动）需要在一个目录中有“n”个html文件才能实现无限滚动？

是的，[该特定插件](http://www.infinite-scroll.com/)似乎仅支持静态页面，否则将使用“下一页”链接。[您找到](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)的教程甚至指出它无法使用 URL 参数处理动态生成的内容，尽管我并不真的相信。

> 如果我不知道我将拥有多少页，是否可以使用相同的插件实现无限滚动。甚至不必创建物理 html 文件就更好了？

根据该插件的设计，我会说**No**。当然，您应该能够使用（未知）数量的带有图片的动态生成的页面。这需要从 instagram api 提供服务器端代码，这似乎不是您想要的。

> 这种分页怎么实现呢？（即，只要用户继续向下滚动，就可以加载 20 张图片块）在线文档不多，您能否通过演示或描述提供一个简短的步骤？

还有其他无限滚动插件。您在该[站点上找到](http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/)的演示 2 和 5实现了一个简单的“本机”（即无插件）无限滚动，两者都通过 ajax 加载新内容。演示 3 和 4 使用了带有[更多滚动选项的](https://github.com/fredwu/jquery-endless-scroll#configuration)[无限滚动插件](https://github.com/fredwu/jquery-endless-scroll)，尽管演示不包含 ajax。

现在您可以自由决定您希望如何实现*您的*脚本。您似乎首先想从 instagram 获取所有图像 url，但仅逐块附加（并因此加载图像文件）。如果 instagram 支持分页 api，您可能希望将两个加载过程结合起来。

这可以使用演示 2 到 5 中的代码来完成 - 当滚动到达页面末尾时，触发加载图像的请求。之后，在新的 img 元素（或 instaframe div，如您的示例中）上调用[Masonry 的`appended`方法。](http://masonry.desandro.com/docs/methods.html#appended)

# eclipse - Eclipse 快速修复对话框隐藏了底线

> ID：11492014
> 
> 赞同：8
> 
> 时间：2012-07-15T12:45:24.993
> 
> 标签：eclipse, eclipse-juno

每当弹出 Eclipse 快速修复对话框时，所有选项都是可见的，但只要将鼠标移至对话框，底部选项就会被一个“配置注释首选项”按钮隐藏。要再次查看底部选项，我需要在对话框中向下滚动。即使弹出窗口中只有一个选项，也会发生这种情况。

我觉得这很烦人，因为我更有可能选择快速修复选项而不是更改某些偏好。（我是唯一一个？：））

我怎样才能摆脱按钮，或者至少让对话框自行调整大小，这样就不会隐藏任何选项？

我在 Ubuntu_64 v12.04 上运行 Juno。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T06:34:48.697

更改首选项*Window -> Preferences -> General -> Editor -> Text Editors -> When mouse move into hover* to "Enrich on click" 来解决这个问题。在相同的 Ubuntu 设置上对我来说效果很好。

请注意，这只适用于不需要滚动的悬停。如果需要滚动才能查看底部的内容，则单击弹出窗口或使用鼠标滚轮滚动仍会显示该配置按钮。为了减少这个问题，您可能需要配置您的 Java、Lint 或其他提供快速修复的插件，以忽略某些类型的问题（您永远不会修复）。

# java - 替换/忽略字符串java中的标点符号

> ID：11492015
> 
> 赞同：2
> 
> 时间：2012-07-15T12:45:33.857
> 
> 标签：java, arrays, string, replace

所以基本上对于我的大学工作，我必须创建一个小程序，为特定句子提供单词模式，即“我是男人”会给出 2、1、1，因为有 2 个 1 字母单词、1 个 2 字母单词和1 个 3 个字母的单词。更难的部分（至少对我来说）是我必须排除所有标点符号，例如 i, i 会以 2 的形式出现，因为逗号被排除在字符之外。

我的讲师说这段代码应该可以工作 `str = str.replaceAll("[^A-Za-z]", "");` ，但问题是我不知道如何将它集成到我的小程序中，花了很长时间看它。这基本上是小程序的最后一部分（这加上一个图表）。希望你明白我的意思，如果你能帮助我，将不胜感激。顺便说一句，我实际上还没有被教过 str.replace 。

这就是我到目前为止所拥有的（希望我正确地输入了这个）

```
import java.util.*;
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class clarke_j_reass  extends Applet implements ActionListener
{
    Button pr_input1, pr_input2;

    Label pr_label;
    TextField pr_text;
    String pr_name;

    public void init()

    {
        pr_input1 = new Button("Analyze");
        pr_input2 = new Button("Reset");
        add(pr_input1);
        add(pr_input2);
        pr_input1.addActionListener(this);
        pr_input2.addActionListener(this);
        //add the buttons with action listeners
        pr_label = new Label("Word Pattern");
        add(pr_label);
        pr_text = new TextField();
        add(pr_text);
        pr_text.addActionListener(this);
        //add text field
    }    
    public void start()
    {           
        pr_name="";
            setSize(400,400);
            setBackground(Color.gray);
        pr_text.setBackground(Color.white);      
    }

    public void actionPerformed(ActionEvent e){

    pr_name = e.getActionCommand();
    repaint();
        if(e.getSource() == pr_input1)
            pr_name = pr_text.getText();
        else
            if(e.getSource() == pr_input2)
            {   pr_name = "";        
                pr_text.setText("");
                }
         repaint();
             // The user's input from the text area.                     
            int pr_char;

           String array[]=pr_name.split(" ");
           int counter=0;
           for(int i=0;i<array.length;i++)
               if(counter<array[i].length())
                   counter=array[i].length();
           int intArray[]=new int[counter];
           for(int i=0;i<intArray.length;i++){
               intArray[i]=0;
           }
           for(int i=0;i<array.length;i++){
               intArray[array[i].length()-1]++;
           }
           String a="";
           for(int i=0;i<intArray.length;i++){
               if(intArray[i]>0)
               {
                a+=String.valueOf(intArray[i]);
                a+=", ";
               }
           }
           pr_label.setText(a);

           pr_char = pr_name.length(); 
    }

    public void paint(Graphics g)
    {
  //      g.setColor(pr_col);
     //   g.drawString(pr_name,0,250);
      pr_text.setSize(400, 200);
      pr_text.setLocation(0,0);
      pr_input1.setLocation(150,220);
      pr_input2.setLocation(200,220);
      pr_label.setLocation(0,270);
      pr_label.setSize(400,30);
    }
} 
```

* * *

空格不是问题，因为代码不包含它们，我只查找单词。我现在遇到的问题是，当我将代码放在我被告知的位置时，它并没有给我正确的模式，而是将其限制为 1。即我是一个男人出来的时候是 1，而不是 2、1、1，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:00:39.987

定义为后，用循环中`array[i].length()`的变量替换所有实例：`length``length`

```
int length = array[i].replaceAll("[^A-Za-z]", "").length(); 
```

代替：

```
 for(int i=0;i<array.length;i++)
           if(counter<array[i].length())
               counter=array[i].length(); 
```

和：

```
 for(int i=0;i<array.length;i++) {
           int length = array[i].replaceAll("[^A-Za-z]", "").length();
           if(counter<length)
               counter=length;
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:56:27.887

This is an example of **Regular Expressions**. The first string in the **replaceAll** call defines the pattern of what it's looking for.

In this case, the "^" character means "not" and "A-Za-z" means all uppercase and lowercase letters. So the overall pattern means, anything that's not a letter. That's the wrong pattern if you want to split on spaces, so you also have to add "\s" to include whitespace characters. Thus, the call:

```
str = str.replaceAll("[^A-Za-z\s]", "") 
```

Will replace anything that's not a letter or a whitespace character with an empty string.

In your program, you would insert this call before you do your string processing. Like this:

```
pr_name = pr_name.replaceAll("[^A-Za-z\s]", "")
String array[]=pr_name.split(" "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T13:11:07.090

代替

```
for(int i=0;i<array.length;i++){
   intArray[array[i].length()-1]++;
} 
```

和

```
for(int i=0;i<array.length;i++){
   intArray[array[i].replaceAll("[^A-Za-z]", "").length()-1]++;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-15T12:56:30.207

Place your instructor's suggestion above this:

```
String array[]=pr_name.split(" "); 
```

It appears you're storing the text string as pr_name so before you split on the spaces, you can strip the other characters. It should appear like this:

```
pr_name = pr_name.replaceAll("[^a-zA-Z\s:]", "");
String array[]=pr_name.split(" "); 
```

# c++ - 比较文本和整数的多个 if 语句

> ID：11492016
> 
> 赞同：0
> 
> 时间：2012-07-15T12:45:38.677
> 
> 标签：c++, objective-c, if-statement

我正在尝试使用多个条件制作多个 if 语句。如果我运行代码，它可以正常工作，但它永远不会改变输出。我总是得到第二条语句> = 29。这是我的代码。

```
 if (label.text <= @"30") 
    {label.text = @"Text";}   
else if (label.text >= @"29") 
    {label.text = @"Text";} 
else if (label.text >= @"19")
    {label.text = @"Text";}
else if (label.text >= @"10") 
    {label.text = @"Text";}
else if (label.text  = @"00") 
    {label.text = @"Text";} 
```

好的，我已经更改了我的代码，但我仍然没有任何建议

```
 label.text = temporaryValue;
     if ([label.text floatValue] <= 30) 
         {label.text = @"text1";}   
else if ([label.text floatValue] >= 29) 
         {label.text = @"text2";}   
else if ([label.text floatValue] >= 19)
         {label.text = @"text3";}
else if ([label.text floatValue] >= 10) 
         {label.text = @"text4";}
else if ([label.text floatValue] == 0) 
         {label.text = @"text5";} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T12:48:45.853

你不能像这样比较字符串的数值；此操作执行指针比较，即它比较您传入的字符串实例的（相当随机的）地址。使用如下内容：

```
if ([label.text floatValue] >= 30.0) {
} 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:54:25.593

Using >= or <= with `NSString*` would compare the addresses, not the content of those strings. If you want to compare like this, you should parse your string into an `int` and compare it using common integer comparison:

```
int val = [label.text intValue];
if (val > 30) {
   ...
}
else ... // more of your ifs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T12:54:21.553

Once you fix your syntax (as suggested in other answers here) you will still have a problem, as once you are dealing with numeric comparisons your logic flow seems flawed. Consider this

```
if ([label.text floatValue]  <= 30.0) 
    {label.text = @"Text";}   
else if ([label.text floatValue]  >= 29.0) 
    {label.text = @"Text";} 
```

if your test value IS greater than 30, you move to the next else if

```
else if ([label.text floatValue]  >= 29.0) 
```

clearly this IS bigger than 29 since it failed to be less than or equal to 30\. Therefore all your other conditonals are never reached as assuming your first conditional is false, the second MUST be true.

# javascript - 使用扩展程序显示带有地址栏的 chrome 弹出窗口

> ID：11492018
> 
> 赞同：2
> 
> 时间：2012-07-15T12:46:01.030
> 
> 标签：javascript, html, google-chrome-extension

我有一个 chrome 扩展，它的 popup.html 有一个指向 oauth/openid 登录页面的链接。确切地说是这样的[页面](https://tipila.com/login)

我需要在只有地址栏的弹出式浏览器窗口中打开此登录页面。不应有任何其他工具/菜单栏。我试过`window.open` `chrome.windows.create`和 `window.showModalDialog`方法。

他们都以我想要的方式创建了一个弹出选项卡，但无论如何**都没有显示地址栏**。当通过浏览器直接浏览popup.html时，它显示地址栏，当点击链接时。**但不是在通过扩展加载弹出窗口时。**

由于此页面显示了一个 oauth/openid 登录页面，因此用户必须看到弹出窗口中显示的当前页面的地址。没有人会向没有地址栏的页面提供他们的 facebook/google 凭据。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-22T16:06:12.587

我环顾四周，似乎这是一个已知的错误....
[http://code.google.com/p/chromium/issues/detail?id=108875&q=popup%20bar&colspec=ID%20Pri%20Mstone%20ReleaseBlock %20OS%20Area%20Feature%20Status%20Owner%20Summary](http://code.google.com/p/chromium/issues/detail?id=108875&q=popup%20bar&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)
您应该为以后的更新加注星标，我认为您也应该对您的情况发表评论。

从扩展代码中获得所需弹出窗口的唯一方法是打开一个选项卡，让它打开弹出窗口，然后关闭选项卡......远非理想。
但是如果这对你来说已经足够好了，这里有一些示例代码......

**清单.json**

```
{
  "name": "Popup with adresse bar",
  "version": "1.0",
  "permissions": [
    "tabs", "<all_urls>"
  ],
  "browser_action": {
      "default_title": "Popup with adresse bar.",
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
  "manifest_version" : 2
} 
```

**popup.html**

```
<!doctype html>
<html>
  <head>
    <script src="popup.js"></script>
  </head>
  <body>
    <a id='clicky' href='#'>clicky</a>
  </body>
</html> 
```

**popup.js**

```
clicky = function() {
    chrome.tabs.create({
        url: 'open.html#' + 'http://www.google.com',
        active: false
    });
}
onload = function() {
    document.querySelector('#clicky').onclick = clicky;
}
window.onload = onload; 
```

**打开.html**

```
<script src='open.js'></script> 
```

**打开.js**

```
window.close();
window.open(window.location.hash.substr(1), '…', '…'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T16:00:05.600

好的，我将尝试这个问题。我了解您在隐藏地址栏时所说的内容。例如，我的 rem-i-con 扩展。如果用户尚未注册，它将打开一个新选项卡，然后要求他们创建帐户或登录。但是地址栏是空白的。

但是，在我的 popup.html 文件中，我有一些链接可以打开一个新选项卡，其地址显示在窗口中。我了解您想要一个模型类型的窗口，但我不确定是否可以做到。这是您可以尝试的方法。

有一个常规链接 asdd

单击后，您可以让监听器监视刚刚打开的选项卡。您可以通过扫描活动选项卡轻松完成此操作。

然后，一旦选项卡关闭，您就可以重新加载 popup.html 文件。为此，您需要使用 background.html 文件。

如果这可行，那么您可以自动执行标签点击。

* * *

# android - 将“JSON 数据到 textview”转换为“JSON 数据到 listview”

> ID：11492023
> 
> 赞同：-1
> 
> 时间：2012-07-15T12:46:33.810
> 
> 标签：android, listview, twitter, textview

您好，我有一个工作代码，可以将 twitter 时间线显示到 textview 中：

```
 void examineJSONdata()
{
    TextView tvData = (TextView) findViewById(R.id.txtData);
    try
    {
        String x = "";
        InputStream is = this.getResources().openRawResource(R.raw.jsontwitter);
        byte [] buffer = new byte[is.available()];
        while (is.read(buffer) != -1);
        String jsontext = new String(buffer);
        JSONArray entries = new JSONArray(jsontext);

        x = "JSON parsed.\nThere are [" + entries.length() + "]\n\n";

        int i;
        for (i=0;i<entries.length();i++)
        {
            JSONObject post = entries.getJSONObject(i);
            x += "------------\n";
            x += "Date:" + post.getString("created_at") + "\n";
            x += "Post:" + post.getString("text") + "\n\n";
        }
        tvData.setText(x);
    }
    catch (Exception je)
    {
        tvData.setText("Error w/file: " + je.getMessage());
    }
} 
```

现在我想尝试使用 ListView 而不是 TextView

我在 StackOverFlow [Android App 上找到了一个代码：JSON array from web to listview](https://stackoverflow.com/questions/7164963/android-app-json-array-from-web-to-listview)

```
ListView list = (ListView) findViewById(...);
String json = "[\"Country1\",\"Country2\",\"Country3\"]";
try {
        JSONArray array = (JSONArray) new JSONTokener(json).nextValue();

        String[] stringarray = new String[array.length()];
        for (int i = 0; i < array.length(); i++) {
            stringarray[i] = array.getString(i);
        }
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, stringarray); 
        list.setAdapter(adapter);
} catch (JSONException e) {
        // handle JSON parsing exceptions...
} 
```

我试过这样做，但我无法工作 有人能帮我转换代码吗？我认为所有必要的信息都在第一个代码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:34:25.330

```
 String x = "";
    InputStream is = this.getResources().openRawResource(R.raw.jsontwitter);
    byte [] buffer = new byte[is.available()];
    while (is.read(buffer) != -1);
    String jsontext = new String(buffer);
    JSONArray array = new JSONArray(jsontext);
    String[] stringarray = new String[array.length()]; 
```

和

```
int i;
    for (i=0;i<array.length();i++)
    {
        JSONObject post = array.getJSONObject(i);
        String temp;

        temp += "Date:" + post.getString("created_at") + "\n";
        temp += "Post:" + post.getString("text");
        stringarray[i]=temp;
    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,  android.R.layout.simple_list_item_1, stringarray); 
    list.setAdapter(adapter); 
```

# ios - Phonegap + jQueryMobile + iOS 上的 PushNotifications

> ID：11492030
> 
> 赞同：2
> 
> 时间：2012-07-15T12:48:01.563
> 
> 标签：ios, jquery-mobile, cordova, apple-push-notifications

我很乐意将这种软件组合用于一些简单的推送通知。

发送和接收不是问题 - 做到了！

但是我如何告诉 iOS 之外的 jQueryMobile 应用程序它是由 PushNotification 启动的，并且不应该显示主屏幕，而是显示其他 - 通知相关 - 屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:45:40.720

`Notification`如果应用程序通过通知启动，对象具有一个`applicationLaunchNotification`具有价值的属性。`1`

以下方法查询应用程序启动时的待处理通知：

```
window.plugins.pushNotification.getPendingNotifications(function(notifications) {
     if(notifications.length > 0){
          var note = notifications[0];
          if(note.applicationLaunchNotification == "1"){
              // do the processing
          }
     }
}); 
```

有关详细信息 - [https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T13:17:10.560

use can change you app deligate code and enable push in application pro-vising profile #import "AppDelegate.h" #import "MainViewController.h"

```
 #import <Cordova/CDVPlugin.h>

    @implementation AppDelegate

    @synthesize window, viewController;

    - (id)init
    {
        /** If you need to do any extra app-specific initialization, you can do it here
         *  -jm
         **/
        NSHTTPCookieStorage* cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage];

        [cookieStorage setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways];

        self = [super init];
        return self;
    }

    #pragma mark UIApplicationDelegate implementation

    /**
     * This is main kick off after the app inits, the views and Settings are setup here. (preferred - iOS4 and up)
     */
    - (BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
    {
        CGRect screenBounds = [[UIScreen mainScreen] bounds];

        [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
         (UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

        self.window = [[[UIWindow alloc] initWithFrame:screenBounds] autorelease];
        self.window.autoresizesSubviews = YES;

        self.viewController = [[[MainViewController alloc] init] autorelease];
        self.viewController.useSplashScreen = YES;

        self.window.rootViewController = self.viewController;
        [self.window makeKeyAndVisible];

        return YES;
    }

    // this happens while we are running ( in the background, or from within our own app )
    // only valid if __TESTING__-Info.plist specifies a protocol to handle
    - (BOOL)application:(UIApplication*)application handleOpenURL:(NSURL*)url
    {
        if (!url) {
            return NO;
        }

        // calls into javascript global function 'handleOpenURL'
        NSString* jsString = [NSString stringWithFormat:@"handleOpenURL(\"%@\");", url];
        [self.viewController.webView stringByEvaluatingJavaScriptFromString:jsString];

        // all plugins will get the notification, and their handlers will be called
        [[NSNotificationCenter defaultCenter] postNotification:[NSNotification notificationWithName:CDVPluginHandleOpenURLNotification object:url]];

        return YES;
    }

    // repost the localnotification using the default NSNotificationCenter so multiple plugins may respond
    // ADD OUR NOTIFICATION CODE

    #pragma mark - Push notification Delegate Methods

    -(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
    {
        NSString *token = [[deviceToken description] stringByTrimmingCharactersInSet:      [NSCharacterSet characterSetWithCharactersInString:@"<>"]];
        token = [token stringByReplacingOccurrencesOfString:@" " withString:@""];
        //NSLog(@"content---%@", token);
    }

    -(void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error
    {

        //flagPushConfirmation=[NSString stringWithFormat:@"startPush"];
        UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Error"
                  message:@"Device not Register for notification"
                 delegate:self cancelButtonTitle:@"OK"otherButtonTitles:nil];
        [message show];

    }

    -(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
    {
       UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Notification"
          message:@"Recieve Notification" delegate:self cancelButtonTitle:@"cancel"otherButtonTitles:@"ok",nil];
        [message show];
    }

    - (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
    {

        UIApplicationState state = [application applicationState];
        if (state == UIApplicationStateActive) {
            // WAS RUNNING
            NSLog(@"I was currently active");

            NSString *notCB = [notification.userInfo objectForKey:@"foreground"];
            NSString *notID = [notification.userInfo objectForKey:@"notificationId"];

            NSString * jsCallBack = [NSString
                                     stringWithFormat:@"%@(%@)", notCB,notID];

            [self.viewController.webView  stringByEvaluatingJavaScriptFromString:jsCallBack];

            application.applicationIconBadgeNumber = 0;
        }
        else {
            // WAS IN BG
            NSLog(@"I was in the background");

            NSString *notCB = [notification.userInfo objectForKey:@"background"];
            NSString *notID = [notification.userInfo objectForKey:@"notificationId"];

            NSString * jsCallBack = [NSString
                                     stringWithFormat:@"%@(%@)", notCB,notID];
            [self.viewController.webView stringByEvaluatingJavaScriptFromString:jsCallBack];

            application.applicationIconBadgeNumber = 0;
        }
    }
    - (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
    {
        // iPhone doesn't support upside down by default, while the iPad does.  Override to allow all orientations always, and let the root view controller decide what's allowed (the supported orientations mask gets intersected).
        NSUInteger supportedInterfaceOrientations = (1 << UIInterfaceOrientationPortrait) | (1 << UIInterfaceOrientationLandscapeLeft) | (1 << UIInterfaceOrientationLandscapeRight) | (1 << UIInterfaceOrientationPortraitUpsideDown);

        return supportedInterfaceOrientations;
    } 
```

# c# - 如何编写 IEnumerable 到磁盘？

> ID：11492031
> 
> 赞同：0
> 
> 时间：2012-07-15T12:48:01.020
> 
> 标签：c#

如何写入`IEnumerable<byte>`磁盘？

```
IEnumerable<byte> NewRIFF = riff.s_Chunk_ID.
                                Concat(riff.ui_Chunk_Size).
                                Concat(riff.s_Format);

IEnumerable<byte> NewFMT = fmt.s_Sub_Chunk_ID_1.
                                Concat(fmt.ui_Sub_Chunk_Size_ID_1).
                                Concat(fmt.us_Audio_Format).
                                Concat(fmt.us_Num_Channels).
                                Concat(fmt.ui_Sample_Rate).
                                Concat(fmt.ui_Byte_Rate).
                                Concat(fmt.us_Block_Align).
                                Concat(fmt.us_Bits_Per_Sample);

IEnumerable<byte> NewDATA = data.s_Sub_Chunk_ID_2.
                                Concat(data.i_Sub_Chunk_Size_2).
                                Concat(data.byar_Audio_PCM_data);

IEnumerable<byte> NewWaveFile = NewRIFF.Concat(NewFMT).Concat(NewDATA); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T12:49:19.573

您可以使用`File.WriteAllBytes`更多信息和示例：http: [//msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.writeallbytes.aspx)

更新：

根据评论有一个完整的答案：

```
File.WriteAllBytes(@"YourFullPath", NewRIFF.ToArray()); 
```

对于`NewFMT`,`NewDATA`和`NewWaveFile`

# amazon-s3 - 迁移到 Amazon S3 - 保留我的分层目录？

> ID：11492038
> 
> 赞同：3
> 
> 时间：2012-07-15T12:48:55.950
> 
> 标签：amazon-s3

我有一个带有 Paperclip gem 的 Rails 3 应用程序。实际上，我的本地目录结构是基于我的记录 UUID 来存储图像：

```
5D5E5641-FCE8-4D0B-A413-A9F993CD0E34 
```

变成：

```
5/D/5/E/5/6/....... 3/4/full/image.jpg
5/D/5/E/5/6/....... 3/4/thumb/image.jpg 
```

因此，我每个目录的节点数永远不会超过 32000 个。

我想迁移到 S3： 1) 我可以在 S3 上保留这个目录结构吗？会不会是性能问题？2) Amazon S3 每个存储桶都有自己的目录管理吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:49:00.473

Amazon S3 中没有文件夹之类的东西。它是一个“平面”文件系统。您越接近文件夹，就可以像您所说的那样添加前缀：`5/D/image.jpg`到您的文件名。在这种情况下，`5`是前缀，`5/D`也是前缀。另一方面，您的分隔符可能是`/`.

尽管一些 S3 工具会向您显示好像它们包含在文件夹中的东西，但 S3 上不存在这个概念。请查看[这个](https://stackoverflow.com/questions/9329234/amazon-aws-ios-sdk-how-to-list-all-file-names-in-a-folder/)和[这个](https://stackoverflow.com/questions/7396606/aws-s3-sdk-get-the-folder-instead-of-a-file/)相关的线程。

您绝对可以使用您建议的模式，而且我认为这样做不会对您造成任何性能损失。

# linux - Magento Apache 配置（app/etc/local.xml 可访问警告）

> ID：11492039
> 
> 赞同：8
> 
> 时间：2012-07-15T12:49:04.013
> 
> 标签：linux, apache, magento

刚刚在 Linux 服务器上安装完 Magento。

当我转到 Magento“管理面板”时，我可以在页面顶部看到以下消息。

您的 Web 服务器配置不正确。因此，可以从外部访问包含敏感信息的配置文件。请联系您的托管服务提供商。

此错误消息的最可能原因是什么？

谢谢，

约翰·戈切

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-15T16:54:46.333

Magento 使用各种目录中的 .htaccess 文件来拒绝对目录树的访问。您会在应用程序、媒体、var 以及 Magento 认为适合粘贴它们的任何其他地方找到它们。他们做各种各样的事情，比如拒绝查看（app、var）、执行（媒体.htaccess）。要使这些 .htaccess 文件正常工作，在 doc root .htaccess 或虚拟服务器配置中设置以下内容非常重要。

```
Options FollowSymLinks
AllowOverride All 
```

Magento 很有可能检测到应用目录 .htaccess 文件不允许拒绝对您的 app/etc/local.xml 文件的网络访问，因此任何使用 Web 浏览器的人都可以看到您的所有数据库凭据和加密密钥。

另一个问题可能是您的文件/目录权限过于宽松。

对于在 FastCGI、SuPHP 或 LSAPI 下运行的 Magento

```
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
chmod 550 pear #for Magento pre 1.5
chmod 550 mage #for Magento 1.5 and up
chmod 550 cron.sh 
```

对于在 DSO 下运行的 Magento (mod_php)

```
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
chmod o+w var var/.htaccess app/etc
chmod 550 pear #for Magento pre 1.5
chmod 550 mage #for Magento 1.5 and up
chmod 550 cron.sh
chmod -R o+w media 
```

**对于下面的问题，** app/etc 文件夹应该有以下 .htaccess 文件。尝试通过服务器读取任何内容都会引发 403 错误。您的下一步是与您的网络托管服务商取得联系，以了解为什么该文件没有被兑现。

```
Order deny,allow
Deny from all 
```

**注意：**如果您使用的是 nginx 等替代 http 服务器，则必须搜索在 Magento 目录树中创建的所有 .htaccess 文件，并重新创建 Magento 在 nginx 设置中使用的所有 .htaccess 函数，以便您拥有相同的文件/目录保护作为标准的 Apache DSO 安装。IIS 上的 Windows 安装也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-09T17:03:15.157

我尝试了以上所有方法，但都没有在我们的虚拟主机上工作。“AllowOverride All”在我们的 vhosts.conf 上不起作用，因此，“Deny from all”被忽略了。

将此代码添加到 .htaccess 中，它的魅力...

```
##### Block access to local.xml #####
RewriteRule ^(.*)local.xml$ - [F,L] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-11T15:59:37.410

Magento 检查是否`/app/etc/local.xml`可访问（使用 curl）。您可以在浏览器中自己尝试验证。

要解决此问题，您必须确保该文件不再可见。你如何做到这一点取决于你的网络服务器。Magento 附带了一个`.htaccess`以防止访问，但您可能复制了没有隐藏文件的文件夹。`cp`不复制它们。或者apache无法访问`.htaccess`检查文件权限。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T13:14:22.393

1.在httpd.conf中添加以下内容。

```
 <Directory "/var/www/html/app/etc">
        Options FollowSymLinks
        AllowOverride All
    </Directory> 
```

1.  将权限从 ftp 设置为 local.xml =>600

2.  `sudo /etc/init.d/httpd restart`

3.  `sudo /etc/init.d/httpd reload`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-24T08:01:33.713

@Brijmohan karadia 和 @Spudley

你的解决方案奏效了。我正在使用 AWS Linux 安装 Magento。

1.  转到 /etc/httpd/conf/httpd.conf

2.  在 httpd.conf 中添加以下内容。

    选项 FollowSymLinks AllowOverride All

3.在文件路径/app/etc/local.xml中设置从SSH/FTP到local.xml的权限=>600

4.  sudo 服务 httpd 重启

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-11T21:32:29.347

我按照以下步骤解决了这个问题：

确认 Magento 安装的 app 子目录中有一个 .htaccess 文件。如果 .htaccess 文件丢失，请在 app 子目录中创建一个新的 .htaccess 文件，其中包含以下指令：

```
Order deny,allow
Deny from all 
```

确认文件权限设置正确。通常，目录的权限应该设置为 755（用户的读取、写入和执行权限，组和世界的读取和执行权限）。文件的权限应该设置为 644（用户的读写权限，组和世界的读取权限）。

请将 .htaccess 文件权限更改为 644，然后刷新 magento 管理页面。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-07-15T21:26:48.653

The app/etc/local.xml file needs to be chmodded to 600 and the error will go away ;)

# c# - 如何选择内部可能包含相同图案的图案？

> ID：11492044
> 
> 赞同：2
> 
> 时间：2012-07-15T12:49:39.780
> 
> 标签：c#, regex

例如，我希望能够选择括号之间的一些文本。

假设，我们有以下文字

```
This is a (sample (or, may be, not))  text, which I write in a browser(with keyboard) 
```

我应该使用什么正则表达式模式，它将选择

```
(sample (or, may be, not)) 
```

和

```
(with keyboard) 
```

对于任意数量的嵌套括号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T12:59:06.400

正则表达式的已知限制之一是正则表达式无法处理嵌套。所以例如

a ^n b ^n不能与正则表达式匹配。

正确括起来的字符串也不能与正则表达式匹配。

通常你会使用某种递归的上下文无关语法实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:05:34.257

```
(?<Depth>\()
(
(?(Depth)([^\(\)]+))
|
(?<Depth>\()
|
(?<-Depth>\))
)*
(?(Depth)(?!)) 
```

对我来说很好。

# javascript - 捕获具有不同 z 索引的元素的 mouseover 和 onclick

> ID：11492046
> 
> 赞同：0
> 
> 时间：2012-07-15T12:49:42.290
> 
> 标签：javascript, onclick, copy, onmouseover, zeroclipboard

我想制作一个网页，允许用户通过单击选择和复制 HTML 实体，并且使用 ZeroClipboard 应该足够好。我希望页面上有数十个甚至数百个可复制的 HTML 实体，因此我不希望每个实体都有一个 ZeroClipboard 客户端。我想出的解决方案是有一个 HTML 实体表，其中每个 td 包含一个不同的 HTLM 实体，并捕获 onmouseover，因此我可以确定用户想要哪个 HTML 实体。然后我将 ZeroClipboard 粘贴到该表上以捕获 onclick。默认情况下，ZeroClipboard 对象的 z-index 为 99，因此它位于表格上方。不幸的是，由于 ZeroClipboard 对象在语义上与表无关，因此事件无法传播到隐藏在下面的 td。

有没有一种方法可以捕获 z-index 为 99 的 ZeroClipboard 对象（嵌入）上的 onclick，并捕获位于下方 z-index 为 1 的 td 上的 onmouseover？我需要找到鼠标光标的坐标来执行此操作吗？我宁愿不这样做，因为a）它很混乱，b）W3C规范在技术上是不可能的。

我已经冻结了我当前代码的两份副本：

ZeroClipboard embed z-index=99 : [http://www.aidansean.com/physics/symbols_static.php](http://www.aidansean.com/physics/symbols_static.php)
（这可以复制左上角框的“...”内容。）

ZeroClipboard embed z-index=-99: [http://www.aidansean.com/physics/symbols_static_2.php](http://www.aidansean.com/physics/symbols_static_2.php)
（这可以改变左上角方框的“...”内容。）

我想结合这两个页面的功能。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:49:52.313

最后，你去。我尝试了其他一些选项，但没有奏效。这是一个有用的解决方案吗？:)

[JSFiddle：单击嵌入较低 z-index](http://jsfiddle.net/hpRZE/65/)

# php - PHP通过查询获取MongoDBRef

> ID：11492047
> 
> 赞同：0
> 
> 时间：2012-07-15T12:49:54.140
> 
> 标签：php, mongodb, mongodb-php

我想知道是否有一种方法可以执行 find() 并让 Mongo 自动返回关联的引用，而无需在返回父记录后运行 getDBRef() 。

我在 PHP 文档中的任何地方都没有看到它。我可以轻松地支持使用 getDBRef，但它似乎没有它应该的效率。

另外...我很惊讶无法选择要在链接参考中返回的特定数据。我还不如执行另一个手动查找语句，这样我就可以控制返回是什么……但是*必须有*一种更注重性能的方式来做到这一点。

也许我应该改变我的方法，而不是使用 PHP 库类进行查找，而是生成我自己的 JavaScript 命令并使用 MongoCode 类运行它？那行得通吗？如果可以的话……我想知道它会是什么样子。*挠头然后前往谷歌*

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T21:05:24.203

MongoDB 不支持连接。 [数据库引用（DBRefs）](http://docs.mongodb.org/manual/applications/database-references/)只是指存储`_id`引用另一个文档的字段的做法。当前没有对此的特定服务器端支持，并且对文档的引用进行水合**确实**需要另一个查询。一些[MongoDB 驱动程序](http://www.mongodb.org/display/DOCS/Drivers)具有方便的方法，因此您不必手动进行查找。如果你想自己做`find()`一个 DBRef 来查找（或使用其他标准来查找相关文档），它同样有效/高性能。

根据您的用例和数据建模，DBRef 链接的更有效替代方法可能是将相关数据嵌入为子文档。有关更多示例，请参阅有关[Schema Design的 MongoDB wiki 信息。](http://www.mongodb.org/display/DOCS/Schema+Design)

就性能而言，使用 PHP 查询比使用[MongoCode](http://php.net/manual/en/class.mongocode.php)（需要在服务器上评估的 JavaScript）更好。MongoCode 的真正目的是用于更有限的用途，例如在 Map/Reduce 函数中。有关该方法的一些潜在限制，请参阅[服务器端代码执行](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Limitationsof%7B%7Beval%7D%7D)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T09:24:24.523

参考：[http ://docs.mongodb.org/manual/reference/database-references/](http://docs.mongodb.org/manual/reference/database-references/)

**手动参考**，您将一个文档的 _id 字段保存在另一个文档中作为参考。然后您的应用程序可以运行第二个查询以返回相关数据。对于大多数用例来说，这些参考资料既简单又足够。

**DBRefs**是使用第一个文档的 _id 字段、集合名称以及可选的数据库名称的值从一个文档到另一个文档的引用。通过包含这些名称，DBRefs 允许位于多个集合中的文档更容易地与来自单个集合的文档链接。

要解析 DBRefs，您的应用程序必须执行额外的查询以返回引用的文档。许多驱动程序都有自动形成 DBRef 查询的辅助方法。**驱动程序不会自动将 DBRefs 解析为文档。**

所以无论哪种方式，无论您使用哪种类型的引用，您都需要自己进行取消引用。

希望能帮助到你！

# python - 如何检测xml的起始标签然后解析和对象化

> ID：11492048
> 
> 赞同：0
> 
> 时间：2012-07-15T12:50:10.303
> 
> 标签：python, xml, xsd, lxml, xml-validation

我正在使用 lxml 解析和对象化路径中的 xml 文件，我有很多模型和 xsd，每个对象模型都映射到某些定义的类，例如，如果 xml 以模型标记开头，那么它是一个 dataModel，如果它开始带有页面标签的它是一个视图模型。

我的问题是如何以有效的方式检测 xml 文件以哪个标签开头，然后用适当的 xsd 文件对其进行解析，然后将其对象化

```
files = glob(os.path.join('resources/xml', '*.xml'))
for f in files:
    xmlinput = open(f)
    xmlContent = xmlinput.read()

    if xsdPath:
        xsdFile = open(xsdPath)
        # xsdFile should retrieve according to xml content
        schema = etree.XMLSchema(file=xsdFile)

        xmlinput.seek(0)
        myxml = etree.parse(xmlinput)

        try:
            schema.assertValid(myxml)

        except etree.DocumentInvalid as x:
            print "In file %s error %s has occurred." % (xmlPath, x.message)
        finally:
            xsdFile.close()

    xmlinput.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:47:05.303

我放下自愿的文件阅读和治疗，专注于你的问题：

```
>>> from lxml.etree import fromstring
>>> # We have XMLs with different root tag
>>> tree1 = fromstring("<model><foo/><bar/></model>")
>>> tree2 = fromstring("<page><baz/><blah/></page>")
>>>
>>> # We have different treatments
>>> def modelTreatement(etree):
...     return etree.xpath('//bar')
...
>>> def pageTreatment(etree):
...     return etree.xpath('//blah')
...
>>> # Here is a recipe to read the root tag
>>> tree1.getroottree().getroot().tag
'model'
>>> tree2.getroottree().getroot().tag
'page'
>>>
>>> # So, by building an appropriated dict :
>>> tag_to_treatment_map = {'model': modelTreatement, 'page': pageTreatment}
>>> # You can run the right method on the right tree
>>> for tree in [tree1, tree2]:
...     tag_to_treatment_map[tree.getroottree().getroot().tag](tree)
...
[<Element bar at 0x24979b0>]
[<Element blah at 0x2497a00>] 
```

希望这对某人有用，即使我之前没有看到过。

# arrays - 如何使用 Perl 将文本文件拆分为块？

> ID：11492054
> 
> 赞同：0
> 
> 时间：2012-07-15T12:51:01.133
> 
> 标签：arrays, perl, parsing

我有一个数据文件，其中包含如下行：

```
A1 2 3 4 5
B 1 2 4
B 7 8 9
A6 7 8 9
B 1 2 3
B 5 6 7
A3 6 9 7
B 2 3 3
B 5 6 6 
```

使用 Perl，当解析器遇到请求时，如何将文件拆分为一组数组（或任何其他数据结构）`/^A/`？所以我最终得到

数组1：

```
A1 2 3 4 5
B 1 2 4
B 7 8 9 
```

数组2：

```
A6 7 8 9
B 1 2 3
B 5 6 7 
```

等等

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T12:59:39.103

我不得不重写答案（在重写问题之后）

```
@arrays = ();
while (<>) {
  push(@arrays, []) if /^A/;
  push(@{$arrays[-1]}, $_)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:07:40.590

有时像这样，我希望[`$/`](http://perldoc.perl.org/perlvar.html)可以不仅仅是一个字符串。尽管如此，还是有一些解决方法。

可以将文件吞入并使用前瞻断言进行处理。下面的示例仅打印以 分隔的每个字符串`<< >>`，但无论您想对数据做什么，基本思想都是相同的：

```
$ perl -0777 -wE 'say "<<$_>>" for split /(?=^A)/m, <>' file.txt
<<A1 2 3 4 5
B 1 2 4
B 7 8 9
>>
<<A6 7 8 9
B 1 2 3
B 5 6 7
>>
<<A3 6 9 7
B 2 3 3
B 5 6 6
>> 
```

# html - 如何调整相对于内部绝对高度的相对 div 高度？

> ID：11492055
> 
> 赞同：16
> 
> 时间：2012-07-15T12:51:13.263
> 
> 标签：html, css, css-position

例如：http: [//jsfiddle.net/MYvYy/182/](http://jsfiddle.net/MYvYy/182/)

我在“outer_box”中有很多“inner_box”元素。Inner_box 元素是绝对的。

我想调整outer_box 的高度，使所有inner_box 元素都适合outer_box。

我知道这可以用js来完成。但我真的不喜欢用脚本调整风格。

所以我想知道是否可以使用 CSS 来完成？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-04-28T10:04:25.893

我有一些解决此问题的方法，它可能不适合您的情况，但请考虑查看。
首先，我们需要复制所有要让父级扩展到其高度的**绝对定位 div 。**所以你的`HTML`意志看起来像这样。

```
<div class="outer_box">
    <div class="inner_box">1</div>
    <div class="inner_box ghost">1</div>
</div> 
```

然后我们需要像这样添加“ghost div”CSS：

```
.inner_box.ghost{
    visibility: hidden;
    width: 100%;
    top: 0;
    left: 0;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-15T13:34:12.170

单独使用 CSS 是不可能的。

**布局流程：**

一个元素`position:absolute`在页面其余部分的布局流之外。就相对父级而言，绝对子级在布局中不占空间。

如果您需要在容器内嵌套弹出菜单或导航菜单，这将非常有用，因为它不会影响容器的布局。这`position:absolute`是非常适合的用例。

**固定高度：**

如果您需要绝对内容表现得好像它是布局流程的一部分，请使用固定高度。给相对父级和绝对子级一个固定的高度，并避免在绝对子级之前放置任何高度可变的子元素。如果可变高度内容确实在它之前，请在绝对子项需要出现的位置使用具有固定高度的相对占位符 div。

如果`position:absolute`必须使用并且不能选择固定高度，请使用 JavaScript。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T13:37:26.423

我只能使用 jQuery lib 为您提供 JavaScript 修复。让我知道你是否使用它，

```
$('.outer_box').height($('.inner_box').outerHeight()); 
```

此行将修复 outer_box 高度

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-19T06:44:34.827

我尝试过固定高度方法，但在小屏幕上它是重叠的。所以我通过将覆盖背景层设置为单独的分区和内容到另一个分区来解决了这个问题。

```
<div style="position:relative; background-color: blue; background-image:url('banner.png'); background-size:cover; background-position: center top;">
    <div style="position:absolute; top:0; bottom:0; left:0; right:0; z-index:1; background-color:#00000099;"></div>
    <div style="position:relative;z-index:2;"><h1 style="color:#fff;">Hello</h1></div>
</div> 
```

我已经在 Codepen 上上传了代码：[https ://codepen.io/shahbaz8x/pen/GRjEBze](https://codepen.io/shahbaz8x/pen/GRjEBze)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-15T12:58:58.333

我通过将**div.inner_box**的 position 属性更改为

```
position:relative 
```

如果这不是您想要的，或者这没有解决它，那么您将不得不使用 Javascript。

# javascript - How to set path to images for use with CKEditor?

> ID：11492059
> 
> 赞同：0
> 
> 时间：2012-07-15T12:51:52.810
> 
> 标签：javascript, html, ckeditor

It usual that location of viewed pages is different from location of edited. So, image urls will be broken in CKEditor by default. How to set path to images so that thet displayed ok while editing page?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:37:00.420

只需将[baseHref](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.baseHref)设置为最终页面的路径即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:00:57.843

如果您的图像源以`/`它表示域开头，例如，如果您将图像放入`images`文件夹中`public_html`，则您的源路径应该是`/images/file_name.png`并且它将在网站和 ckeditor 上工作。

# mysql - Sencha Touch2 General and external database related questions

> ID：11492060
> 
> 赞同：0
> 
> 时间：2012-07-15T12:51:57.800
> 
> 标签：mysql, sencha-touch, extjs

If I develop on Sencha Touch2, I would be able to create Apps and sell it through Google play store and Apple Market Store?

Can I code "on button click" action in Java ? And from that code call a web service and retrieve it's output?

What is Sencha's recommendation if I need to do SELECT/UPDATE/INSERT operations and stored procedure calls to a database preferably MySQL?

Please respond if you can answer any of the above questions

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:21:09.973

不，不可能在 Java 中编写“单击按钮”动作，因为 Sencha 使用 JavaScript 框架。

要连接到您需要使用 SQLite 的数据库，请参见[此处](https://github.com/tomalex0/SenchaTouch-SqliteProxy)。

# javascript - Sorting the results of an indexedDB query

> ID：11492062
> 
> 赞同：15
> 
> 时间：2012-07-15T12:52:14.663
> 
> 标签：javascript, indexeddb

I want to sort results obtained from indexedDB.
Each record has structure {id, text, date} where 'id' is the keyPath.

I want to sort the results by date.

My current code is as below:

```
 var trans = db.transaction(['msgs'], IDBTransaction.READ);
  var store = trans.objectStore('msgs');

  // Get everything in the store;
  var keyRange = IDBKeyRange.lowerBound("");
  var cursorRequest = store.openCursor(keyRange);

  cursorRequest.onsuccess = function(e) {
    var result = e.target.result;
    if(!!result == false){
        return;
    }
    console.log(result.value);
    result.continue();
  }; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-04T07:44:05.243

实际上，您必须在 objectStore 中索引`date`字段并在`msgs`objectStore 上打开索引游标。

```
var cursorRequest = store.index('date').openCursor(null, 'next'); // or prev 
```

这将得到排序的结果。这就是应该使用索引的方式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-31T09:14:10.397

这是 Josh 建议的更有效的方法。

假设您在“日期”创建了一个索引：

```
// Use the literal "readonly" instead of IDBTransaction.READ, which is deprecated:
var trans = db.transaction(['msgs'], "readonly");
var store = trans.objectStore('msgs');
var index = store.index('date');

// Get everything in the store:
var cursorRequest = index.openCursor();
// It's the same as:
// var cursorRequest = index.openCursor(null, "next");
// Or, if you want a "descendent ordering":
// var cursorRequest = index.openCursor(null, "prev");
// Note that there's no need to define a key range if you want all the objects

var res = new Array();

cursorRequest.onsuccess = function(e) {

    var cursor = e.target.result;
    if (cursor) {
        res.push(cursor.value);
        cursor.continue();
    }
    else {
        //print res etc....
    }
}; 
```

更多关于光标方向的信息：http: [//www.w3.org/TR/IndexedDB/#cursor-concept](http://www.w3.org/TR/IndexedDB/#cursor-concept)

IDBIndex API 在这里：[http ://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex](http://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-15T13:22:27.987

感谢 zomg，hughfdjackson of javascript irc，我对最终数组进行了排序。修改后的代码如下：

```
var trans = db.transaction(['msgs'], IDBTransaction.READ);
var store = trans.objectStore('msgs');

// Get everything in the store;
var keyRange = IDBKeyRange.lowerBound("");
var cursorRequest = store.openCursor(keyRange);

var res = new Array();

cursorRequest.onsuccess = function(e) {
    var result = e.target.result;
    if(!!result == false){
        **res.sort(function(a,b){return Number(a.date) - Number(b.date);});**
        //print res etc....
        return;
    }
    res.push(result.value);
    result.continue();
}; 
```

# php - Magento - 二级排序依据

> ID：11492067
> 
> 赞同：3
> 
> 时间：2012-07-15T12:53:03.680
> 
> 标签：php, magento

我浏览了一些与排序相关的帖子，但没有提出所需的解决方案。

我目前正在使用以下代码对类别视图字段中的产品进行排序，以覆盖默认选项并按toolbar.phtml 中的属性进行排序。

```
<option value="<?php echo $this->getOrderUrl('name', 'asc') ?>"<?php if($this->isOrderCurrent('name')): ?> selected="selected"<?php endif; ?>>
                 NAME
            </option>
            <option value="<?php echo $this->getOrderUrl('short_description', 'asc') ?>"<?php if($this->isOrderCurrent('short_description')): ?> selected="selected"<?php endif; ?>>
                 FRAGRANCE
            </option>
            <option value="<?php echo $this->getOrderUrl('price', 'asc') ?>"<?php if($this->isOrderCurrent('price') && $this->getCurrentDirection() == 'asc'): ?> selected="selected"<?php endif; ?>>
                 PRICE (Low to High)
            </option>
            <option value="<?php echo $this->getOrderUrl('price', 'desc') ?>"<?php if($this->isOrderCurrent('price') && $this->getCurrentDirection() == 'desc'): ?> selected="selected"<?php endif; ?>>
                 PRICE (High to Low)
            </option> 
```

（我错误地使用了 short_description 属性而不是添加自定义香味属性）

现在，我需要的功能是，当使用其中的每一个时，例如按价格排序，我希望它按价格排序，它已经这样做了，然后再按另一个自定义属性“范围”排序。因此，如果它显示所有 3 英镑的产品，它会显示每个范围内的它们聚集在一起，而不是目前看起来随机的东西。

这是我上线的最后一个主要绊脚石，所以任何帮助都将不胜感激。

我已经使用toolbar.php中的以下行设法通过了一些道路

```
if ($this->getCurrentOrder()) {
      $this->_collection->setOrder(array($this->getCurrentOrder(), 'range'), $this->getCurrentDirection());
 } 
```

唯一的问题是它似乎首先按范围排序，而不是按价格排序，即所有范围 1 按价格排序，然后范围 2 按价格排序。在哪里我需要它按价格排序，范围是价格的子排序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:53:30.040

当您调用`setOrder()`products 集合时，它会检查给定属性是否为`price`，如果是则使用`addAttributeToSort`。这是因为按价格排序需要一些比通用`sortOrder`方法更具体的代码。
但是当您传递一个数组时，测试失败并使用公共代码，因此您可以尝试将两个`setOrder()`调用分开：

```
if ($this->getCurrentOrder()) {
    $this->_collection->setOrder($this->getCurrentOrder(), $this->getCurrentDirection());
    $this->_collection->setOrder('range', $this->getCurrentDirection());
 } 
```

# file - vbScript automatic file download by extension

> ID：11492068
> 
> 赞同：1
> 
> 时间：2012-07-15T12:53:08.830
> 
> 标签：file, vbscript, download, file-extension

I have found this usefull vbscript [on the web](http://vbscriptautomation.net/73/download-files-using-vbscript) to automate file download.

```
function download(sFileURL, sLocation)

'create xmlhttp object
Set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")

'get the remote file
objXMLHTTP.open "GET", sFileURL, false

'send the request
objXMLHTTP.send()

'wait until the data has downloaded successfully
do until objXMLHTTP.Status = 200 :  wscript.sleep(1000) :  loop

'if the data has downloaded sucessfully
If objXMLHTTP.Status = 200 Then

        'create binary stream object
    Set objADOStream = CreateObject("ADODB.Stream")
    objADOStream.Open

        'adTypeBinary
    objADOStream.Type = 1
    objADOStream.Write objXMLHTTP.ResponseBody

        'Set the stream position to the start
    objADOStream.Position = 0    

        'create file system object to allow the script to check for an existing file
        Set objFSO = Createobject("Scripting.FileSystemObject")

        'check if the file exists, if it exists then delete it
    If objFSO.Fileexists(sLocation) Then objFSO.DeleteFile sLocation

        'destroy file system object
    Set objFSO = Nothing

        'save the ado stream to a file
    objADOStream.SaveToFile sLocation

        'close the ado stream
    objADOStream.Close

    'destroy the ado stream object
    Set objADOStream = Nothing

'end object downloaded successfully
End if

'destroy xml http object
Set objXMLHTTP = Nothing

End function

download "http://remote-location-of-file", "C:\name-of-file-and-extension" 
```

Is there a way to force it to parse the url and for example download *.exe file in some web location? like this:

```
URL:  http://examplesite.com/files/

file0001.exe 
```

because I have a URL which has a file which name changes during time. It has .exe extension.

I have both http and ftp protocols enabled over it and ftp has no authentication (free).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:58:38.813

只有在该站点上启用文件浏览时才有可能，而且这种情况很少发生。您将需要一些列出文件名的 URL 来解析文件名。你最好使用像 wget [http://users.ugent.be/~bpuype/wget/](http://users.ugent.be/~bpuype/wget/)这样的工具，它有这样的选项。对于此类操作，vbscript 也不是一个好的选择，如果您从头开始，您最好使用例如 Ruby。

如果您发布有问题的 URL，也许我可以进一步帮助您。

# java - How to improve the image quality before the image processing start in javacv or opencv?

> ID：11492070
> 
> 赞同：5
> 
> 时间：2012-07-15T12:53:11.107
> 
> 标签：java, image-processing, opencv, javacv

I have an image with 400x400 image to identify different components from it. But when I try to identify components using that most of time it doesn't provide correct answers. So I need to know whether there are some kind of methods in javacv or opencv to improve the quality of the image or increase the size of the image without effecting to its quality ?

This is the sample image that I use. (This is the maximum size that I can get and I can't use any photo editing softwares in the project, because it's dynamically generated image.)

![enter image description here](../Images/72e2c9742170081fe8e676f94bb0ca76.png)

In my image processing I need to identify squares and rectangles that connects those squares. And specially I need to get the width and height of those using pixel values.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:29:50.040

如果您可以对其进行矢量化，您可以将其缩放到任何大小......并且在您的情况下，vestorization 非常简单，因为您在图像中有一些简单的几何对象。

所以，在我看来，你的方法应该是这样的：

1.  以高阈值检测图像中的边缘（因为您有非常明显的对象）
2.  向量化它们
3.  将它们缩放到任何大小

您还应该查看以下链接：[Increasing camera capture resolution in OpenCV](https://stackoverflow.com/questions/14287/increasing-camera-capture-resolution-in-opencv)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T07:36:00.567

如果您坚持图像处理，最简单的方法是应用 equalizeHist()。这将增加对比度并改进后续步骤。

**但是**，这是一个biiiig'但是'，你为什么要这样做？刚刚阅读这篇文章，我看到了另一种解决方案，并且快速谷歌证明我是对的：

> Kabeja 是一个用于解析、处理和转换 Autodesk 的 DXF 格式的 Java 库。您可以从命令行使用 Kabeja 或嵌入到您的应用程序中。所有解析过的数据都可以通过类似 DOM 的 API 访问。

这意味着您可以直接从该图像中以文本格式提取所需的所有数据。可能类似于“在位置 x，y 有一个晶体管，或其他什么”。那么**为什么**要将该文件渲染成图像，然后分析该图像以提取组件呢？

如果你是为学校做的（我知道很多学校项目都是这样的），我建议你找一个真正的问题来解决，然后向你的老师提出。你会更乐意做一些不完全是胡说八道的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T17:04:00.087

[正如mocap](https://stackoverflow.com/users/989091/mocap)所建议的那样，我猜对图像进行矢量化是最好的选择。
您还可以使用增强工具，如锐化、饱和等。

# javascript - 如何检查继承（对象/原型）

> ID：11492077
> 
> 赞同：3
> 
> 时间：2012-07-15T12:54:21.927
> 
> 标签：javascript, underscore.js

我想检查一个对象是否扩展了另一个对象（真，假）：

例子：

```
var BaseObject = function(object) {
    this.name = object.name;
    this.someFunction = object.someFunction;
    this.someOtherProperty = object.someOtherProperty;
};

var ExtendingObject = new BaseObject({
    name: "extention",
    someFunction: function(value) { return value; },
    someOtherProperty = "hi"
});

// some possible function
var extends = isExtending(BaseObject, ExtendingObject);
var isParentof = isParentOf(BaseObject, ExtendingObject); 
```

underscore.js 是否提供这样的功能（我发现没有......）？

我怎样才能进行这样的检查？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T12:57:21.420

尝试使用[`instanceof`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof)运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T13:09:17.703

`ExtendingObject`（顺便说一句，没有理由大写它 - 它不是一个类）并没有真正扩展传统意义上的基础对象 - 它只是实例化它。

出于这个原因，正如@Inkbug 所说（+1），如果你想确保它`ExtendingObject`是基础对象的一个​​实例，你可以使用

```
alert(ExtendingObject instanceof BaseObject); //true 
```

请注意，它`instanceof`只能回答“A 是 B 的实例”的问题——您不能问“A 的实例是什么？”。

对于后者，您可以执行类似的操作（尽管我认为这不是跨浏览器）

```
alert(ExtendingObject.constructor.name); //"BaseObject" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T13:12:08.340

我不知道 underscore.js 但 instanceof 可以满足您的需要。你可以这样使用它：

```
function Unrelated() {}
function Base( name, fn, prop ) {
   this.name = name;
   this.someFunction = fn;
   this.someProperty = prop;
}
function Extending( name, fn, prop, newProp ) {
   Base( name, fn, prop );
   this.newProperty = prop;
}
Extending.prototype = new Base();
var a = new Extending( 'name', function () {}, 'prop', 'newProp' ); 
```

现在你可以说：

```
if( a instanceof Extending ) {/*it is true because a.prototype = Extending*/}
if( a instanceof Base ) {/*it is true because a.prototype.prototype = Base*/}
if( a instanceof Unrelated ) {/*it is false since Unrelated is not in prototype chain of a*/} 
```

# c++ - Does c++ compiler optimize 0*x?

> ID：11492081
> 
> 赞同：7
> 
> 时间：2012-07-15T12:55:06.403
> 
> 标签：c++, optimization

Does c++ compiler optimize 0*x? I mean does it convert to 0 or it actually does the multiplication?

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T12:56:14.920

It might:

```
int x = 3;
int k = 0 * 3;
std::cout << k;

00291000  mov         ecx,dword ptr [__imp_std::cout (29203Ch)] 
00291006  push        0    
00291008  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (292038h)] 
```

It even optimizes away the variables altogether.

But it might not:

```
struct X
{
    friend void operator *(int first, const X& second)
    {
       std::cout << "HaHa! Fooled the optimizer!";
    }
};

//...
X x;
0 * x; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T13:53:17.793

如果 x 是原始整数类型，则代码生成器将使用通常称为“算术规则”的优化来进行更改，例如：

```
int x = ...;
y = 0 * x;   ===> y = 0
y = 1 * x;   ===> y = x
y = 2 * x;   ===> y = x + x; 
```

但仅适用于整数类型。

如果 x 是非整数类型，则`0 * x`可能并不总是等于`0`，或者可能有副作用。

# php - Receive chat from non-friend from Facebook Chat API

> ID：11492084
> 
> 赞同：1
> 
> 时间：2012-07-15T12:55:32.830
> 
> 标签：php, facebook, facebook-apps, facebook-chat

I've logged in and used the Facebook CHAT api all right. The problem is that I want to have a system where anyone can send me a message, without actually being on the friend list.

When the sender is in the friend list, I see the message. Is there a possibility that I can configure my account to receive messages from anyone, independing on if they are in the friend list or not?

Best Regards.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:24:58.460

聊天 API 和消息 API 不一样。

您可能希望将聊天视为消息的子集。

当收到消息并且用户是朋友时，您会收到聊天通知，如果没有，则没有响应。

# java - 使用 ACTION_SEND 意图时，Facebook 在 Android 上剪辑文本

> ID：11492095
> 
> 赞同：9
> 
> 时间：2012-07-15T12:57:12.010
> 
> 标签：java, android, facebook

我在休闲游戏中添加了代码，以便通过社交网络、电子邮件等分享最高分。

这是我在 strings.xml 资源中定义的 l10n 发送的文本：

```
<string name="game_sharing_score" formatted="false">
    My new High Score on Gamename: %d\n
    You can download Gamename from here:\n
    https://play.google.com/store/apps/details?id=gamepackage
</string> 
```

请注意，Gamename 和 gamepackage 不是我实际使用的。

分享代码如下：

```
 String shareScoreMsg = String.format(context.getString(R.string.game_sharing_score), highestScore);
    Intent shareScoreInt = new Intent(Intent.ACTION_SEND);
    shareScoreInt.setType("text/plain");
    shareScoreInt.putExtra(Intent.EXTRA_TEXT, shareScoreMsg);

    game.startActivity(Intent.createChooser(shareScoreInt, context.getString(R.string.game_sharing_score_title))); 
```

game 是 Activity，context 是 Application 上下文，game_sharing_score_title 是“Share your score”活动的标题。无论如何，它自己的代码没有问题，它可以通过 Google+、WhatsUp 或 Twitter 共享，但是当用户选择通过 FaceBook 共享时，文本被剪裁，它只发布最后一个链接，其中包含信息和FB 从 Google Play 收集的一张图标图像，忽略链接前的所有文本。

很明显，问题出在 Facebook 上，与代码或字符串无关。

我想找到某种解决方法（如果存在），以避免这些 FB 问题。老实说，我不喜欢 Facebook，但它是一个拥有数百万人的社交网络，我不能简单地在我的游戏中忽略它。

非常感谢提前，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:40:15.063

1.  在您的帐户上创建 Facebook 应用程序
2.  之后，您将获得 App id。
3.  从 Facebook API 访问所有方法。

# java - 模型未在 Wicket 中的主页初始加载时更新

> ID：11492097
> 
> 赞同：0
> 
> 时间：2012-07-15T12:57:44.087
> 
> 标签：java, firefox, wicket, page-lifecycle

我在理解我做错了什么时遇到了一些问题。

**我做什么：**

*   在我的应用程序中覆盖 getHomePage()。我返回 MyStartPage.class。
*   MyStartPage 是 MySubPage 的子类。
*   MySubPage 是 MySuperPage 的子类。
*   在 MySuperPage 中，我添加了一个面板。此面板有一个 TextField 和 WebMarkupContainer 以及一个打印文本字段的支持模型对象的 AjaxEventBehavior(onclick)。

**当我启动服务器并浏览 localhost/MyApp 时会发生什么：**

*   即使当我单击 WebMarkupContainer 时用户输入不是，打印的模型对象也是空的。

**当我启动服务器、浏览 localhost/MyApp、转到我的应用程序中的另一个页面然后返回 MyStartPage 时会发生什么：**

*   当我单击 WebMarkupContainer 时，打印的模型对象与用户输入相匹配。

**当我执行以下操作时它也有效：**

*   在我的应用程序中覆盖 getHomePage() 并返回 MyLoginPage。MyLoginPage 包含 MySigninPanel。在 MySigninPanel 我覆盖 onSignInSucceeded() 像这样：

    ```
    @Override
    protected void onSignInSucceeded() {
         setResponsePage(new MyStartPage());
    } 
    ```

当用户首先单击 WebMarkupContainer 时，有人可以阐明让我的 TextField 正常工作的正确方法吗？

提前致谢！

**//编辑 ：**

这似乎只是 Firefox 中的一个问题，或者至少它在 Chrome IE9 和 IE9 中的 IE8 模式下运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:29:50.637

除非您使用单击事件提交表单，否则您的 TextField 的模型将不会使用用户输入的数据进行更新。您的 TextField 应该是该表单的子级。如果是，那么它的内容将被发送到服务器，转换为目标类型，并进行验证。成功后，您将能够查询模型并查看在您的页面上输入的数据。

为此，您应该使用 AjaxFormSubmitBehavior 而不是当前使用的 AjaxEventBehavior：

```
webMarkupContainer.add(new AjaxFormSubmitBehavior(form, "onclick") {

    @Override
    protected void onSubmit(AjaxRequestTarget target) {
        // You can now see what was entered in your TextField
        System.out.println(textField.getModelObject());
    }

    @Override
    protected void onError(AjaxRequestTarget target) {
        // An error occurred and you should provide some kind of feedback
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T08:23:50.933

好吧，我有一个解决方案，尽管我不确定它*为什么*会起作用。我添加了

`mountPage("invoice/overview", OverviewPage.class);`

在我的 WebApplication 中，现在它可以在 FireFox 中运行（OverviewPage 在我最初的帖子中称为“MyStartPage”）。

这是 wicket.ajax.baseurl 和浏览器中键入的 url 在更改之前的样子，当时它不起作用：

baseUrl： `wicket/bookmarkable/eyesys.web.invoice.overview.OverviewPage`
浏览器网址：`wicket/bookmarkable/eyesys.web.invoice.overview.OverviewPage?1`

更改后：

baseUrl： `invoice/overview`
浏览器网址：`invoice/overview?1`

# c# - Dreamweaver 中的单杠不起作用

> ID：11492100
> 
> 赞同：0
> 
> 时间：2012-07-15T12:58:12.563
> 
> 标签：c#, php, javascript, jquery, dreamweaver

我有 Macromedia Dreamweaver 8，无论我如何编写程序，我的水平滚动条都会褪色。 [在此处查看代码](http://i.stack.imgur.com/bePNy.png)

我在编写这个程序的过程中没有按下 Enter 按钮，但它仍然没有添加水平滚动条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:02:59.080

这应该是设置问题。转到`menu -> View -> Code view options -> word wrap`并关闭它。它可能有另一个名称，我使用的是德文版的 Dreamweaver。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:59:21.067

关闭换行，它位于代码左侧的那些小图像中

编辑

或者可能在视图中 > 自动换行

# javascript - 我将如何实现与 CSS / HTML 中的密码字段一起使用的非常简单的文本框提示？

> ID：11492103
> 
> 赞同：0
> 
> 时间：2012-07-15T12:59:02.147
> 
> 标签：javascript, html, css, hint

我希望我的 web 应用程序中的大多数文本框都显示一个提示，以尽量减少屏幕上的混乱。

我遇到了许多解决方案，但对于我想要的来说，所有这些解决方案似乎都很复杂。现在可能值得指出的是，我的 Javascript 知识很差。

我所需要的只是一个简单的脚本，它可以让我有文本框提示（使用 CSS 样式，所以我可以将其设置为灰色和斜体），并且可以使用密码字段。

我确实有一个脚本，但它只允许我每页有一个密码字段，而且在任何地方都不太容易使用。

谢谢，非常感谢您的帮助。

编辑：不幸的是，这也需要与 IE6 兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:10:13.020

例如，最安全的方法可能是创建两个密码框，其中一个带有文本的密码框如下：

```
<input style="color:#B0AEAE;width:167px;display:none;" id="password_text" type="text" value="Password" />
<input type="password" id="password_password" name="password" style="width:167px" maxlength="20"/> 
```

然后，您首先使用（我使用）jquery 隐藏“普通”密码输入字段并显示隐藏的密码字段，您可以单击返回到另一个，如下所示：

```
$(document).ready(function() {

$('#password_text').show();
$('#password_password').hide();

$('#password_text').focus(function() {
    $('#password_text').hide();
    $('#password_password').show();
    $('#password_password').focus();
});
    $('#password_password').blur(function() {
    var password = $(this).val();
    if(password == '') {
        $('#password_password').hide(); 
        $('#password_text').show();
    }
}); 
```

});

只需将其放在顶部：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

# c# - c shap中的三维数组

> ID：11492109
> 
> 赞同：0
> 
> 时间：2012-07-15T12:59:49.060
> 
> 标签：c#, api, multidimensional-array

我是 ac# 人，正在使用所有示例都在 php 中的 api，所以我需要帮助，这样我才能准确理解这段代码是什么

```
$rooms = array();

     // First Room
     $rooms[] = array(array("paxType" => "Adult"));

     // Second Room
     $rooms[] = array(array("paxType" => "Adult"), array("paxType" => "Adult"), array("paxType" => "Child", "age" => 8)); 
```

我需要是否有人可以向我描述此代码，因为我是 c# 人。

因为我是谷歌，所以这是一个我已经理解的多维数组

并且 pax 是这个 api 中的类（根据 api 文档），它具有一些属性，如 paxtype、age 等.....

但我没有办法在 c# 中解决这个问题。

**编辑**

传递给此方法的 pax 类型的多维数组

```
public getAvailableHotelResponse getAvailableHotel(string apiKey, string destinationId, DateTime checkIn, DateTime checkOut, string currency, string clientNationality, bool onRequest, pax[][] rooms, filter[] filters); 
```

**第二次编辑**

```
public getAvailableHotelResponse getAvailableHotel(string apiKey, string destinationId, DateTime checkIn, DateTime checkOut, string currency, string clientNationality, bool onRequest, pax[][] rooms, filter[] filters); 
```

我必须在我的方法中传递这个 pax[][] 房间，房间将具有以下结构

```
rooms[0][0][paxType]=Adult
rooms[0][1][paxType]=Adult
rooms[0][2][paxType]=Child
rooms[0][2][age]=6

rooms[1][0][paxType]=Adult
rooms[1][1][paxType]=Adult
rooms[1][2][paxType]=Child
rooms[1][2][age]=8 
```

和 pax 类在下面

```
 public class pax
    {
        public pax();

        [SoapElement(DataType = "integer")]
        public string age { get; set; }
        public string firstName { get; set; }
        public string lastName { get; set; }
        public string paxType { get; set; }
        public string title { get; set; }
    } 
```

我认为它现在对我们所有人来说都更清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:54:42.697

数组在 PHP 中是动态的。由于无法确定大小，因此将其转换为 C# 将需要一个非原始数组。

```
// $rooms = array ();
List<List<pax>> rooms = new List<List<pax>>(); 
```

ff PHP代码，

```
$rooms[] = array (array ("paxType" => "Adult")); 
```

也可以解释为：

```
$room = array ();
$pax = array ();
$pax["paxType"] = "Adult";
$room[] = $pax;
$rooms[] = $room; 
```

因此，

```
// $room = array ();
List<pax> room = new List<pax>();

// $pax = array ();
pax p = new pax();

// $pax["paxType"] = "Adult";
p.paxType = "Adult";

// $room[] = $pax;
room.Add(p);

// $rooms[] = $room;
rooms.Add(room); 
```

然后只需将其转换为原始数组。

```
// this will be the pax type array
pax[][] paxRooms = new pax[rooms.count][];
for (int i = 0; i < rooms.Count; i++) {
    paxRooms[i][] = rooms[i].ToArray();
} 
```

PS 我是一个 PHP/Java 人，所以请原谅我的语法错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T13:13:38.827

`$rooms`数据结构如下所示：

```
[
  [{paxType:"Adult"}],
  [{paxType:"Adult"}, {paxType:"Adult"}, {paxType:"Child", age:8}]
] 
```

# file - 如何在VIM中用当前文件名替换文本？

> ID：11492111
> 
> 赞同：11
> 
> 时间：2012-07-15T13:00:17.913
> 
> 标签：file, vim, replace

我想我的问题不是那么清楚，但让我试着在这里解释一下。

假设我打开了一个名为`myfilename.java`以下内​​容的文件

```
public class test{
} 
```

现在，我想要的是替换`test`为`myfilename`. 现在要在 vim 中获取我使用的文件名，`:echo expand('%:r')`它给了我`myfilename`.

现在，我的问题是如何使用上面的输出并`test`用它替换并将其映射到一个键以供将来使用。我需要的是可能是这样的：

```
:%s/test/above_output_from_command/g 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-15T13:03:19.080

你需要添加`\=`告诉 Vim 你正在尝试调用一个函数：

```
:%s/test/\=expand('%:r')/g 
```

见`:help sub-replace-expression`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T16:16:32.783

对于我的应用程序，我最终使用了一个键绑定宏（不确定 VIM 名称是什么），它进行了我想要的编辑，并简单地将文件名插入到我想要的位置：

`:nmap <F5> 0d$:put =expand('%:p:t')^M0ipackage ^[$a;^[`

就我而言，我想插入包含目录的名称而不是文件，所以我使用了：

`:nmap <F5> 0d$:put =expand('%:p:h:t')^M0ipackage ^[$a;^[`

`0d$`删除当前行的内容，插入`:put =expand('%:p:t')^M`文件名，其余命令编辑命令周围的行以产生类似

`package containing_directory;`

在当前行。

# c# - C# 中使用的方法关键字是什么？

> ID：11492114
> 
> 赞同：5
> 
> 时间：2012-07-15T13:00:33.727
> 
> 标签：c#, keyword

这可能是一个愚蠢的问题，或者是我的疏忽，但是.. 如果您在属性定义中键入“方法”，如下所示：

```
[method: ]
public class MyClass 
```

Visual Studio 突出显示该关键字。据我所知，它似乎并没有在属性之外突出显示它，并且在 VS 中按 F1 会将您引导至 404。

我从来没有见过这个实际使用过，我找不到任何关于它的信息。

有谁知道它是做什么的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T13:06:19.447

请参阅[消除属性目标的歧义（C# 编程指南）](http://msdn.microsoft.com/en-us/library/b3787ac0%28v=vs.90%29.aspx)。

基本上，它是在应用于方法的属性和应用于返回值的属性之间消除歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:08:58.073

这决定了`method`关键字后面的属性适用于特定的方法。您还可以声明不仅适用于单个方法或字段，甚至适用于整个 .dll 或程序集的属性。您也可以键入`module`或`assembly`。

# javascript - 如何创建在一定延迟后单击特定 URL 的 JavaScript？

> ID：11492116
> 
> 赞同：-2
> 
> 时间：2012-07-15T13:01:28.030
> 
> 标签：javascript, html

我想创建一个JavaScript，在一定的延迟后点击特定的链接，比如在HTML页面上10秒。

请给我JavaScript好吗？我在谷歌上搜索后才设法找到的是点击一个特定的链接，但没有延迟。

你能帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:28:52.213

包括这个方法（无论你想要什么）：

```
function fireEvent(element,event) { 
   if (document.createEvent) { 
       // dispatch for firefox + others 
       var evt = document.createEvent("HTMLEvents"); 
       evt.initEvent(event, true, true ); // event type,bubbling,cancelable 
       return !element.dispatchEvent(evt); 
   } else { 
       // dispatch for IE 
       var evt = document.createEventObject(); 
       return element.fireEvent('on'+event,evt) 
   } 
} 
```

然后调用它：

```
window.setTimeout(function() { 
    var e = document.getElementById('yourLinkId');
    if(e) fireEvent(e, 'click');

}, 10000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:07:18.760

```
window.setTimeout(function() {
    window.location = "http://your_url_here.com";
}, 10000); 
```

第二个参数是以毫秒为单位的时间。所以 10000 毫秒是 10 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T13:38:47.493

如果您需要类似于本[网站](http://www.subhashsarees.com/listing_products.aspx)上显示的延迟（请参阅页面左下角的“推荐”容器），请使用以下 jQuery 代码。

```
(function($){
$(document).ready(function(){
    var el = $("#testimonial"); //The id of the container. It may be a `<div>`
    if (el){
    RotateTestimonial();
    setInterval(RotateTestimonial, 20000);
    }
});

function RotateTestimonial(){
    var pageUrl = "RandomTestimonial.jsp"  //The page where the request goes.
    $.ajax({
            type: "GET",
            url: pageUrl,
            cache:false,
            success: function(msg) {                   
                $("#testimonial").slideUp('slow').fadeOut(3000, function (){
                    var el = $("#testimonial"); 
                    el.html(msg);
                    el.slideDown('slow').fadeIn('slow');
                });
            }
    });
}
})(jQuery) 
```

# mysql - 无法在服务器上创建数据库

> ID：11492118
> 
> 赞同：0
> 
> 时间：2012-07-15T13:02:07.553
> 
> 标签：mysql

我试图在服务器上创建数据库，`CREATE DATABASE cpi_mock`但收到类似`#1044 - Access denied for user 'cpibetap'@'localhost' to database 'cpi_mock'`. 然后我尝试执行`SHOW GRANTS`它给了我类似的东西

`Grants for cpibetap@localhost`
`GRANT USAGE ON *.* TO 'cpibetap'@'localhost' IDENTIFIED BY PASSWORD '<password>'`

```
GRANT ALL PRIVILEGES ON `cpibetap\_%`.* TO 'cpibetap'@'localhost' 
```

谁能告诉我上面几行的含义是什么？如何在我的服务器上创建数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:09:23.347

如果用户只有 USAGE 权限，则它无权创建数据库。

你写“它给了我类似的东西”，你能粘贴实际的回应吗？

Grant all 语句适用于用户 cpibetap_%，_ 需要一个字符，而用户名只有 cpibetap，因此没有任何额外字符。

# jquery - 在使用 jquery 进行 ajax 请求后触发事件

> ID：11492120
> 
> 赞同：0
> 
> 时间：2012-07-15T13:02:28.003
> 
> 标签：jquery, triggers, document-ready

我有一个包含 jQuery 脚本和 AJAX 请求的 html 页面。在我的页面上，我有一些带有“loading_span”类的跨度元素。单击一个 href 时，将执行一个 ajax 进程。该过程还使用类生成一些跨度：'loading_span'。问题是我的 jQuery 脚本不会通过 ajax 请求触发新添加的跨度元素。

问题是：为什么我的脚本没有看到添加了“loading_span”类的新元素？

在下面我将粘贴我的代码：

```
/* file js/javascript.js */
$(document).ready(function() {

    $.ajaxSetup ({
        cache: false
    });

    $('#show-more').click( function() {
    $.ajax({
        url: $(this).attr('href'),
        success: function(msg){
            $('#all_span').append().html(msg);
        },
        dataType: "Html"
    });
    return false;
});

    $('.loading_span').each(function(index, span){
        console.log($(this).attr('id'));
    });
}); 
```

index.php 文件：

```
 <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script src="js/script.js" ></script>   
        <style type="text/css">
            .loading_span {
                display: list-item;
            }
        </style>
    </head>
    <body>
        <div id="all_span">
        <?php

        for($i=0;$i<5;$i++)
            echo "<span class='loading_span' id='id$i'>span$i</span>";
        ?>
            <a href="ajax.php" id="show-more">show_more</a>
        </div>
    </body> 
```

以及 ajax.pho 文件内容

```
for ($i = 0; $i < 5; $i++)
    echo "<span class='loading_span' id='ajax$i'>ajax$i</span>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:34:09.787

您可以使用 after element 在 loading_span 之后添加元素。

请参阅下面的 url 仅 Javascript 部分。 [http://jsfiddle.net/vkTHK/1/](http://jsfiddle.net/vkTHK/1/)

我仍然无法弄清楚您要达到的目标。如果它不能满足您的需要，请详细说明或提供 JS fiddle URL，以便我提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:49:16.787

你应该使用

```
$('#all_span').append(msg); 
```

代替

```
$('#all_span').append().html(msg); 
```

并将您的成功回调更改为

```
success: function(msg){
        $('#all_span').append(msg);
        $('.loading_span').each(function(index, span){
            console.log($(this).attr('id'));
        });
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:28:01.363

您`$('.loading_span').each...`在 AJAX 调用完成之前执行，这就是它正在做它正在做的事情的原因。您可以将该代码移动到`success`AJAX 调用的事件中，以便在将新元素添加到 DOM 后应用它。

# jquery - z-index 在右键单击时不起作用

> ID：11492121
> 
> 赞同：1
> 
> 时间：2012-07-15T13:02:46.567
> 
> 标签：jquery, css, contextmenu, z-index

我正在尝试实现一个上下文菜单，该菜单出现在右键单击以 div`contextFolder`具有`z-index: 1000`.

为此，我使用 JQuery 将 contextmenu 事件绑定到 div。这工作正常。我希望这个上下文菜单在

*   用户左键单击屏幕上的任意位置，
*   用户右键单击屏幕上的任何位置，除了任何其他`div.contextfFolder`

如果在打开 contextmenu 并右键单击其他`div.contextFolder`时，我希望我当前的 contextmenu 消失并在 new 上打开一个新的`div.contextFolder`。

当我显示到上下文菜单时，要做到这一点，

*   我还使用`height: 100%`、`width: 100%`和`z-index: 100`.
*   我将左键单击事件绑定到此叠加层，以便在单击它时，
    *   覆盖被移除，
    *   上下文菜单被隐藏。
*   我还将上下文菜单绑定到`overlay`以隐藏上下文菜单并`overlay`在右键单击除另一个点之外的任何点时删除`div.contextFolder`
*   为了防止 contextmenu 上覆盖的左键单击事件，我还分配`z-index: 101`给 contextmenu。（叠加层的 z-index 为 100）

这对我来说似乎一切都很好。（我是 CSS 的新手，所以我可能会遗漏一些非常明显的东西）。

一切正常，除非当我右键单击`div.contextFolder`上下文菜单已经在另一个上打开时`div.contextFolder`，它会转到覆盖的上下文菜单事件（隐藏到当前事件）。我要开新的。

我已经在 Chrome 和 Firefox 最新版本中对此进行了测试。

这就是[小提琴](http://jsfiddle.net/nvSXd/6/)。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:38:48.683

我刚刚为你创建了一个小提琴。我所做的只是修改你的javascript。

[JSFiddle](http://jsfiddle.net/L4DD13/z4WrH/)

希望对您有所帮助。

PS：我还添加了其他代码，用于检查初始打开菜单后的点击是否是对子菜单的点击

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:13:45.397

```
 bind('contextmenu' , function(e){
             $(".folderContextMenu").css( {position:"absolute", top:e.pageY, left: e.pageX, zIndex: '101'} );
                e.preventDefault();
                //alert('not working');
                return false;
            } 
```

问题是您没有再次移动上下文菜单。它停留在旧位置。因此我稍微改变了绑定功能。但是，如果您正在使用叠加层，并对其应用绑定功能，则菜单会随处显示，这是第二个问题。

这是完整的、更改的[JSFiddle](http://jsfiddle.net/nvSXd/9/)

编辑：我使用了窗口 onclick 方法，看[这里](http://jsfiddle.net/nvSXd/10/)，[这里](http://jsfiddle.net/nvSXd/11/)是菜单反弹的证据。

# android - 使用 ContentProvider 插入多个表

> ID：11492122
> 
> 赞同：4
> 
> 时间：2012-07-15T13:02:53.507
> 
> 标签：android, android-contentprovider, android-contentresolver, android-sqlite

我正在实现一个 PRIVATE `ContentProvider`，它的关系表很少（一对多，多对多）。在我当前的实现中，所有表都可以通过 URI 访问。如何简化界面，使 URI 不必访问内部“直通”表？

比如我有一个POSTS表，每个POST通过TAGGINGS表有很多TAGS。我只想与 POSTS URI 交互并在`ContentProvider`.

因为`query`它很容易返回一个带有连接表的游标，但是我该怎么做`insert`呢？`bulkInsert`我应该调查什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T13:30:57.900

这是一个限制`ContentProvider`。如果您不将数据暴露给其他应用程序，则可以使用自定义数据库适配器实现，方法和查询直接满足您的要求。

`bulkInsert()`在这种情况下无济于事，因为它一次只将行插入到一个表中。但是看看[ContentProvider.applyBatch()](http://developer.android.com/reference/android/content/ContentProvider.html#applyBatch%28java.util.ArrayList%3Candroid.content.ContentProviderOperation%3E%29)方法和[ContentProviderOperation](http://developer.android.com/reference/android/content/ContentProviderOperation.html)，[ContentProviderOperation.Builder](http://developer.android.com/reference/android/content/ContentProviderOperation.Builder.html)类（您可能需要`withValueBackReference()`一对多插入）。

这些链接应该可以帮助您了解如何使用它们：

[http://www.grokkingandroid.com/better-performance-with-contentprovideroperation/](http://www.grokkingandroid.com/better-performance-with-contentprovideroperation/) [http://www.grokkingandroid.com/androids-contentprovideroperation-withbackreference-explained/](http://www.grokkingandroid.com/androids-contentprovideroperation-withbackreference-explained/) [withValueBackReference 的语义是什么？](https://stackoverflow.com/questions/4655291/semantics-of-withvaluebackreference)

但是请注意，使用`ContentProviderOperation`比`bulkInsert()`一次插入多行要慢得多，因为它`Uri`会在每次执行操作时解析（字符串比较）。这样做您仍然必须公开 Uri 才能插入到子表中。

如果您决定使用`applyBatch()`，请在您的提供程序中覆盖它，以便它在一个事务中执行所有操作，从而保持数据的一致性并加快数据库操作：

```
@Override
public ContentProviderResult[] applyBatch(ArrayList<ContentProviderOperation> operations)
        throws OperationApplicationException {
    final SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    db.beginTransaction();
    try {
        ContentProviderResult[] results = super.applyBatch(operations);
        db.setTransactionSuccessful();
        return results;
    } finally {
        db.endTransaction();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:30:22.580

只要提供了所需的值，您就可以自由地插入到乘法表中。

例如：

```
ContentValues v = new ContentValues();
v.put("title","post1");
v.put("tag","tag1");
getProvider().insert(POST_URI,v); 
```

在 实现 中`insert`, 可以 检查 是否 存在`tag`属于 其他 表 的 字段 ( ) 是否 存在 , 如果 存在 , 则 意味着 你 应该 做 额外 的 工作 -- 如果 标签 不 存在 则 先 插入 , 建立 标签 与 帖子 之间 的 正确 关联 .刚插入。

您可以查看android联系人的源代码以供参考。

更新：

要插入多个标签，一种 hack-y 方法是插入逗号分隔的字符串。这并不优雅，但它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T16:22:28.083

只是为了做到这一点：您想拥有一个 URI 并通过对 ContentProvider 的一次插入调用插入一篇文章及其所有标签？正确的？

问题是，您需要在 ContentValues 对象中包含所有值。数据库标准化是有原因的。尽管如此，它可能是可行的。对于标签，这应该很容易。只需对所有标签使用*一个*字符串。例如“android、ios、bada、wp7”并在您的插入方法中解析此字符串。

您还可以使用命名加整数约定。只要存在 tag1、tag2、... tagX，您就可以从 ContentProvider 的 insert 方法中读取这些值。

两者都不优雅，但会起作用。

在这种情况下，bulkInsert 或 applyBatch 在您的代码中没有位置。如果您想在一个事务中一次使用多个对 ContentProvider 的调用，它们只会发挥作用。

但我认为更好的解决方案确实是实际使用 biegleux 描述的多个操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T07:21:33.950

由于您将要插入多个表，因此正常的`SQLiteDatabase.insert`辅助函数将不起作用。但这以一种高性能和好的方式是完全可行的。

您需要从将要插入您的 ContentProvider 的用户的端点查看这一点，即使它只是您自己。因此，首先为所有字段定义名称或键。由于您不会使用`SQLiteDatabase.insert`，因此实际上不需要将它们命名为与数据库字段相同的名称。所有名称都不应重复。例如，如果您有两个不同表中的字段可能`tag`在`TableA`和 中重叠，`TableB`您可以将这些字段的名称定义为`TableA.tag`和`TableB.tag`。或者对不冲突的更具描述性的名称使用语义命名。

接下来，您需要使用`SQLiteStatement`per this [answer](https://stackoverflow.com/a/14344928/262789)创建插入查询。确保您使用的名称`createInsert`与 ContentProvider 的调用者用作 ContentValues 中的键的名称相同。

# informatica-powercenter - 时间值作为输出

> ID：11492126
> 
> 赞同：0
> 
> 时间：2012-07-15T13:03:29.527
> 
> 标签：informatica-powercenter

对于源文件中的几列，即 .csv 文件，我们的值类似于`1:52:00`, `14:45:00`。

我应该加载到 Oracle 表中。

我应该在 Target 和 source 中选择哪种数据类型？
我应该在表达式转换中做任何事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T03:13:50.227

Oracle 不支持仅时间值，它支持日期（带有时间组件）。你有几个选择：

1.  将值存储为字符串，可能为小时提供前导零。
2.  将该值存储为午夜过后的秒数（或分钟数）。
3.  将该值存储为某个任意定义的日期的时间分量，例如`0001-JAN-01 01:52:00`和`0001-Jan-01 14:45:00`。告诉您的报告编写者忽略值的日期部分。

您的源数据类型将是`string(8)`. 用于`LPAD`添加前导零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:08:46.060

使用 SQLLDR 以链接中描述的格式将数据加载到数据库中

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm)

即'HH24：MI：SS'

# javascript - Javascript 分析代码操作 (G. Analytics)

> ID：11492128
> 
> 赞同：6
> 
> 时间：2012-07-15T13:03:40.047
> 
> 标签：javascript, google-analytics, data-manipulation

对于我的工作，我正在做一个关于 Google Analytics 有效性的研究项目（主要是关于 Flippa 上经过验证的报告）-> 看看是否有可能完全伪造 G. Analytics（简单的“是”不会削减它）！

我修改了 G. Analytics 代码如下：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-19629541-5']);
_gaq.push(['_setAllowHash', false]);
_gaq.push(['b._setAccount', 'UA-19629541-5']);
_gaq.push(['b._setAllowHash', true]);

for (var i=0;i<=10;i++) {
  _gaq.push(['_trackPageview']);
  _gaq.push(['b._trackPageview']);
}
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async =   true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +         '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

现在，当您运行它时，它将产生多次访问和访问者。您可以看到 __utma 上的第二个数字会随着每次浏览量而变化，该数字是 visitorId，当它发生变化时，意味着您获得了新的访问者

问题是我现在得到的统计数据如下所示：

*   访问量：*1,785*
*   独立访客：*1,781*
*   浏览量：*2,188*
*   页数/访问：*1.23*
*   平均 参观时间： 00:00: *03*
*   跳出率：*96.13* % %
*   新访问：*99.78* %

请不要在平均极端**下降**。访问时长！

在它们与此类似之前：

*   访问：*135*
*   独立访客：*118*
*   浏览量：*383*
*   页数/访问：*2.84*
*   平均 参观时间：*00 :04:22*
*   跳出率：*57.78* %
*   % 新访问：*68.89* %

现在我的问题是：我需要如何修改 G. Analytics 代码（如果可能的话）以使其看起来与此类似：

*   访问：135 * **10** = *1350*
*   独立访客：118 * **10** = *1180*
*   浏览量：383 * **10** = *3830*
*   页数/访问：*2.84*
*   平均 参观时间：*00 :04:22*
*   跳出率：*57.78%*
*   % 新访问：*68.89%*

所以基本上将访问量、唯一身份访问者、网页浏览量增加**10**倍，但其他统计数据保持不变。

**非常欢迎[http://jsfiddle.net](http://jsfiddle.net)上的示例**

PS：对不起我的英语不好（不是我的母语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:34:00.353

您将无法在一个网页中执行此操作。问题是，每当您重置哈希时，它都会产生一个新会话，这将导致第一个“访问者”离开，从而降低 avg。访问持续时间并提高跳出率。

我相信您可以通过执行以下操作来完成除了唯一访问者 * 10 要求之外的所有事情：

*   创建一个包含标准 Google Analytics 代码的基本 HTML 页面，我们将其命名为`ga.htm`.
*   创建一个包含 9 个 0x0 大小的 iFrame 的包含文件，每个 iFrame 都带有`src`of `ga.htm`，我们称之为`include-ga.htm`.
*   将`include-ga.htm`文件包含在所有页面的底部。

这应该会人为地让 GA 认为用户一次浏览了 10 个页面，这应该会同时增加所有统计数据，唯一身份访问者除外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T22:29:14.437

Google Analytics 在服务器端定义了 timeOnPage 和 timeOnSite，代码基于您发送的浏览量之间经过的时间。由于所有这一切都是在服务器端完成的，因此除非您按您希望伪造的时间间隔来分隔浏览量，否则无法伪造。

您还需要为每个跟踪器发送 1 次以上的综合浏览量才能获得正确的页面/访问量。目前，每次您在 2 个跟踪器之间切换时，您都会重置 cookie，并且之前的 visitorId 将永远丢失。

所以你想做这样的事情：

*   创建第一个跟踪器
*   触发综合浏览量
*   等待 1 到 2 秒
*   触发另一个综合浏览量
*   80% 的时间可能会在 1 或 2 秒后触发第三次网页浏览，以接近正确的平均值。
*   创建一个新的跟踪器
*   冲洗重复

我会说您可能想要引入更多随机性，但仍保持相同的平均值。例如，为了获得正确的 BounceRate，您需要有 57% 的访问触发一次网页浏览。为了获得正确的新访问者指标，您需要使用其中一个旧 ID 回来，但在新访问中产生回访者。您可以通过删除 __utmb 或 __utmc cookie 来触发新的访问，或者在新的网页浏览之间等待超过 30 分钟。

正如您所看到的，您想用真实的数字伪造数字越近，它可能会变得越难。

现在，在单页脚本中生活变得有点不切实际。因为它可能需要几秒钟才能完成，并且您可能想要模拟数千次。所以也许最好使用像[phantom.js](http://phantomjs.org/)这样的无头浏览器来创建它，您可以同时触发多个实例以获得您想要的结果。

我想知道你打算从这些中提取什么样的分析。根据分析的类型，您已经拥有的就足够了，或者为更好的仿真所做的努力可能不值得洞察。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T16:48:53.633

这是我假设的概念证明。

您的代码是否已经证明您可以操纵 GA 统计数据，唯一的操纵提示是平均访问时间。

我发现有趣的是 GA 如何确定它是否是唯一访问者。你会认为谷歌会检查某种类型的 IP/Mac/主机名或主机上的秘密唯一 ID。在 GA 帮助中指出

> 唯一身份访问者（或绝对唯一身份访问者）：唯一身份访问者表示在指定时间段内访问您网站的不重复（仅计算一次）访问者的数量。唯一访问者是使用 cookie 确定的。

也许你的平均。访问时长：可以在 GA cookie 中进行操作。有一个 jquery 插件/插件，可用于通过 java 脚本制作 cookie。

有兴趣知道您的项目是否成功。

为了完整起见，[谷歌在 GA 上的帮助](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=33087&topic=11285&ctx=topic)

# javascript - How to lower the viewport in iphone

> ID：11492130
> 
> 赞同：0
> 
> 时间：2012-07-15T13:03:49.417
> 
> 标签：javascript, iphone, html

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <meta name="apple-mobile-web-app-status-bar-style" content="default" /> 
```

I have got the tags above on my page. What I struggle to achieve is to put the viewport below the black status bar that iphone has got. I read this:

> If content is set to default, the status bar appears normal. If set to black, the status bar has a black background. If set to black-translucent, the status bar is black and translucent. If set to default or black, the web content is displayed below the status bar. If set to black-translucent, the web content is displayed on the entire screen, partially obscured by the status bar.

But I did follow the guidelines, and still dont understand..why there is an overlap between the status bar and the viewport.. I want the viewport to go below the iphone status bar.. how to achieve so?

This solution doesnt also work:

```
 function fullScreen() {
       window.moveTo(0, 1);
      window.resizeTo(screen.width, screen.height);
    } 
```

An alternative solution could be to resize the document by 5px (shrink it) and give
at the beginning of the body. But does anyone knows how to do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:07:28.827

这是一个混乱的解决方案，但您可以将上边距设置为状态栏的大小。

# linux - measuring TX retransmission amount per interface

> ID：11492133
> 
> 赞同：1
> 
> 时间：2012-07-15T13:03:59.527
> 
> 标签：linux, network-programming, libpcap

i'm trying to get the TX re-transmission amount for a specific network interface on a Linux 2.6.33.3 kernel.
is there any Linux raw data i can use in order to get/calculate this kind of information?
i've tried `netstat`, but i couldn't find a way to get the retransmissions value for a specific interface.
with no other "quick" choice, what would it require from me in order to build a small app especially for that? listen to all outgoing packets using any capturing library and count.. what? duplicate packets? by some kind of a packet id?
i'm not a network pro.. am i suppose to find troubles in this kind of mission? (btw, i'll probably try to do it with python. any reason why not to?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:32:45.423

您可以使用以下命令检查您的接口是如何配置的：

```
mii-tool eth0
ethtool eth0
mii-diag eth0 
```

并非所有 Linux 系统都默认安装它们，但它们绝对是可分发和可安装的。

当你想测量你的界面到底有多快时，你可以使用`dd`+ `netcat`：

```
host1$ cat /dev/zero | nc -l -p 3000
host2$ nc host1 3000 | dd of=/dev/null
^C 
```

`dd``host1`会写给你和之间的重传速度`host2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T19:05:26.333

如果您想要每个接口，请尝试 ifconfig eth0，您可能在那里拥有您想要的东西。只需通过python解析它。

# sharepoint - 从 SQL Server 中提取数据并显示在普通的共享点列表中

> ID：11492135
> 
> 赞同：0
> 
> 时间：2012-07-15T13:04:14.023
> 
> 标签：sharepoint, bcs, external-contenttype

我正在做一个项目，我必须从 SQL Server 中提取数据并显示在列表中。但我只能在外部列表中显示，而不是在普通共享点列表中。有什么办法吗？或者努力使我们在普通列表中获得的所有功能都可以应用于外部列表。我搜索了很多但没有成功！

# symfony - 如何在 Symfony 2.0 中使用 Meta 标签

> ID：11492136
> 
> 赞同：3
> 
> 时间：2012-07-15T13:04:16.723
> 
> 标签：symfony

我不知道如何在我网站的所有页面中添加元标记？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T17:50:54.707

正确，您可以将元标记放在网站的基本布局中。对于更复杂的愿望，您可以将它们放入一个块中，如果需要，您可以在特定模板中覆盖它们。

有关更多信息，请查看 Symfony2 文档[创建和使用模板](http://symfony.com/doc/current/book/templating.html)。

**例子：**

在您的基本模板中，例如 app/Resources/view 中的 base.html.twig

```
{% block meta_title %}Default meta title{% endblock %} 
```

在您的模板中：

```
{% extends '::base.html.twig' %}

{% block meta_title %}{{ page.title }}{% endblock %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T16:45:44.497

@F481，所以我找到了一个很好的解决方案，我个人确实喜欢这样：

```
{% block meta %}
{% if (page.description) %}
    <meta name="description" content="{{ page.description }}">
{% endif %}

{% if (page.keywords) %}
    <meta name="keywords" content="{{ page.keywords }}">
{% endif %}
{% endblock %} 
```

我将每个页面的关键字和描述存储在数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:16:49.343

只需将这些元标记放在您网站的基本模板中。

# python - Facepy 事件数据，缺少描述

> ID：11492138
> 
> 赞同：0
> 
> 时间：2012-07-15T13:04:37.813
> 
> 标签：python, facebook

我想使用 Python Facepy 从我们公司的 Facebook 网站获取事件。奇怪的是一切正常，除了返回的数据中缺少事件描述：

```
from facepy import GraphAPI
graph = GraphAPI("mysecrettoken")
events = graph.get('ourcompany/events')
for x in events['data']:
    print x['description']
KeyError: 'description' 
```

除描述外，所有数据都在那里（名称，开始时间）等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:41:26.777

Graph api 不提供事件描述。我必须为每个事件单独获取它。

# asp.net - 使用 gridView 中的 Eval("") 从 .ASPX 文件访问公共静态类文件

> ID：11492140
> 
> 赞同：1
> 
> 时间：2012-07-15T13:04:52.600
> 
> 标签：asp.net, class, gridview, eval, invoke

嗨，我是这个系统的新手，请对我温柔一点。我现在遇到的问题是无法通过 Eval 从 ASPX 调用类文件。类文件位于“~/classes”文件夹中。请为我提供避免此错误甚至解决此错误的方法和方法，谢谢！^^

**编程语言**：C#
**问题发现于**：.ASPX gridView
**问题也发现于**：EstateDBManager 类文件
**错误消息**：DataBinding：“DWAD_Project.classes.Volunteer”不包含名为“EstateDBManager”的属性。
**下面部分gridView的代码**：

```
 <asp:TemplateField HeaderText="Estate Name" SortExpression="EstateId">
      <EditItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("EstateDBManager.findEstate({0}).Name") %>'></asp:TextBox>
      </EditItemTemplate>
      <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%# Eval("EstateDBManager.findEstate({0}).Name") %>'></asp:Label>
      </ItemTemplate>
    </asp:TemplateField> 
```

**下面是部分 EstateDBManager 类文件的代码：**

```
 namespace DWAD_Project.classes
    {
      public static class EstateDBManager
      {
        public static Estate findEstate(int ID)
        {
           // processes ...
        }
      }
    } 
```

感谢回复和帮助！！^^

**问题的答案**：
**GridView**：

```
 <asp:TemplateField HeaderText="Estate Name" SortExpression="EstateId">
      <EditItemTemplate>
        <asp:TextBox ID="TextBox1" runat="server" Text='<%# DWAD_Project.classes.EstateDBManager.findEstate(Eval("EstateId")).Name %>'></asp:TextBox>
      </EditItemTemplate>
      <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%# DWAD_Project.classes.EstateDBManager.findEstate(Eval("EstateId")).Name %>'></asp:Label>
      </ItemTemplate>
    </asp:TemplateField> 
```

**类文件**：

```
 namespace DWAD_Project.classes
    {
      public static class EstateDBManager
      {
        public static Estate findEstate(int ID)
        {
           // processes ...
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:20:41.963

Eval 用于数据源的属性。如果您只需要代码，请不要使用 Eval

```
'<%# EstateDBManager.findEstate(Eval("EstateId")).Name %>' 
```

您只需要将 Eval 结果转换为正确的类型，因为它是对象（例如 (int)Eval("EstateId")）

# postgresql - maven java.lang.ClassNotFoundException: org.postgresql.Driver

> ID：11492143
> 
> 赞同：3
> 
> 时间：2012-07-15T13:05:19.110
> 
> 标签：postgresql, maven, dependencies, classnotfoundexception

我在 maven 的 pom.xml 文件中添加了以下依赖项

```
<dependency>
    <groupId>postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.0-801.jdbc4</version>
</dependency> 
```

但是它还没有找到postgres 数据库的驱动程序？

请描述我的问题在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:29:46.867

看起来您的 repo 没有请求的 jar。如果是这样，请将 repo 标记添加到指向 jboss 或 maven 存储库的 pom.xml。

```
<project ...>
<repositories>
    <repository>
        <id>JBoss repository</id>
        <url>http://repository.jboss.org/nexus/content/groups/public/</url>
    </repository>
</repositories>
</project> 
```

或者

```
<project ...>
<repositories>
    <repository>
      <id>java.net</id>
      <url>http://download.java.net/maven/2</url>
    </repository>
 </repositories>
</project> 
```

# powershell - 将大型 XML 文件解析为 PowerShell 对象

> ID：11492145
> 
> 赞同：4
> 
> 时间：2012-07-15T13:05:26.517
> 
> 标签：powershell, xml-parsing

我是一名 PowerShell 和 XPath 初学者，努力高效地解析一些 XML 并构建一组对象以供进一步处理（例如 CSV 输出、SQL Server 加载）。下面包含一个 XML 示例以及我当前使用的代码片段。在此模式中，每个`object-array`代表所需输出中的单行。我正在解析`MetaData`子项以获取列的正确名称，然后构建一个 PSObject 集合，其中数组中的每个对象代表一行。该`MetaData`信息用于查找列名（PSObject 属性）。

这适用于大约 10K 行的文件，但在运行超过 500K 行的最大文件时会严重陷入困境。在这些情况下，每行大约需要 3-4 秒来处理。在 500K 行时，运行时间很长。我可以使用 XPath 或 PS 变量赋值来加快速度吗？

迫切需要将此 XML 转换为 CSV（当前`export-csv`通过实例或做其他处理。

谢谢您的帮助！

大卫

# 示例 XML

```
<Report>
<Data>
<Columns>
<MetaData>
<Index>0</Index>
<Name>Column1</Name>
<Index>1</Index>
<Name>Column2</Name>
<Index>2</Index>
<Name>Column3</Name>
</MetaData>
</Columns>
<Rows>
<object-array>
<string>column1 value</string>
<int>column2 value</string>
<string>column3 value</string>
</object-array>
</Rows>
</Data>
</Report> 
```

# 示例代码

```
#extract the column headers
[string[]]$ColumnHeaders = @()
$obj.SelectNodes("/Report/Data/Columns/MetaData") |% {$ColumnHeaders += $_.name}

$collection = @()
$rowint = 0
$rowcount = $obj.Report.Data.Rows."object-array".count

#unwind the rows
do {
    $hash=@{}

    #loop through each element in the row parent element and add it to the hash
    $columnint = 0
    $columncount = (Select-Xml -xPath "Report/Data/Rows/object-array[$rowint]/node()" $obj).count
        do {
            $hash.Add($columnheaders[$columnint], (Select-Xml -xPath "Report/Data/Rows/object-array[$rowint]/descendant::text()[$columnint]" $obj).Node.Value)
            $columnint++
        } while ($columnint -lt $columncount)

    $thisrow = New-Object PSObject -Property $hash 

    #add this new row to the collection 
    $collection += $thisrow 
    $rowint++
} while ($rowint -lt $rowcount) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:41:33.593

您无需在每次迭代中重新创建 ColumnHeaders 即可获取 MetaData 名称：

```
$ColumnHeaders = $obj.Report.Data.Columns.MetaData.Name 
```

同样适用于 $collection。您的代码的最终结果如何？

更新：试试这个

```
[xml]$obj = Get-Content test.xml

$data = $obj.Report.Data

$pso = New-Object PSObject
$pso | Add-Member NoteProperty -Name $data.Columns.MetaData.Name[0] -Value $data.Rows.'object-array'.string[0]
$pso | Add-Member NoteProperty -Name $data.Columns.MetaData.Name[1] -Value $data.Rows.'object-array'.int
$pso | Add-Member NoteProperty -Name $data.Columns.MetaData.Name[2] -Value $data.Rows.'object-array'.string[1] -PassThru 
```

# python - PySide 中的信号和槽——在类中定义槽

> ID：11492147
> 
> 赞同：0
> 
> 时间：2012-07-15T13:05:36.720
> 
> 标签：python, signals-slots, pyside

我是 Qt 和 PySide 的新手，并尝试了解 PySide 中的信号和插槽。

在遵循[PySide 中 Signals and Slots](http://qt-project.org/wiki/Signals_and_Slots_in_PySide)的文档时，我尝试转移一些代码以在我的课堂上使用。

下面的代码创建一个 DoubleSpinBox。更改值时，我希望该值由两个函数`value_changed_func`和打印`value_changed_class`，但只会`value_changed_func`被调用。

```
from PySide import QtCore
from PySide import QtGui

@QtCore.Slot(float)
def value_changed_func(value):
    print "Event func:"
    print value

class MainController(QtCore.QObject):

    def __init__(self, parent):
        self._ui = QtGui.QDoubleSpinBox(parent)

        self._ui.valueChanged.connect(self.value_changed_class)
        self._ui.valueChanged.connect(value_changed_func)

    @QtCore.Slot(float)
    def value_changed_class(self, value):
        print "Event class:"
        print value

app = QtGui.QApplication([])

main_window = QtGui.QMainWindow()
MainController(main_window)
main_window.show()

app.exec_() 
```

我究竟做错了什么？我怎样才能`value_changed_class`被叫到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T17:15:49.573

您没有调用父构造函数：

```
def __init__(self, parent):
    super(MainController, self).__init__(parent)
    ... 
```

# linux - 将参数传递给加载了 LD_PRELOAD 的库

> ID：11492149
> 
> 赞同：2
> 
> 时间：2012-07-15T13:06:00.240
> 
> 标签：linux, ld-preload

是否可以将参数传递给我的库，该库加载有`LD_PRELOAD`：

```
LD_PRELOAD=lib.so ./program 
```

如何将参数传递给这个库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T13:20:34.997

通常我会通过使用环境变量来做到这一点。例如：

```
#include <iostream>
#include <stdlib.h>

void init() __attribute__ ((constructor));
void init() {
  std::cout << "Init: " << getenv("MYLIB") << std::endl;
} 
```

让你做：

```
MYLIB=hi LD_PRELOAD=./test.so /bin/echo
初始化：嗨

```

this 不必在构造函数（它是[GCC 扩展](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)）中使用，但这通常是使用它们的好地方。

我过去所做的就是使用它，并结合一个看起来像是“普通”应用程序的 shell 脚本包装器。`exec`shell 脚本在调用加载您想要插入的程序之前获取其参数并将它们推送到您的库期望的环境变量中。它以这种方式对用户“感觉”是正确的，而不会过于脆弱或侵入性。

如果愿意，您也可以通过阅读`/proc/self/cmdline`直接读取当前进程的命令行来做到这一点。就个人而言，我会尽可能地避免干扰您正在使用的过程。

# xcode - iOS xcode 地图放大

> ID：11492152
> 
> 赞同：1
> 
> 时间：2012-07-15T13:06:33.347
> 
> 标签：xcode

当用户单击按钮时，我的地图当前正在工作。

当用户单击按钮时，如何放大地图并可能在地图中显示动画。

这是hte主要文件和头文件。另外，如何显示我的当前位置？

在此先感谢主文件

```
@synthesize map;

//Add Map overlay

-(MKOverlayView*)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay{

    MKCircleView* circleView =[[MKCircleView alloc] initWithOverlay:overlay];

    circleView.strokeColor = [UIColor blueColor];

    circleView.fillColor = [UIColor redColor];

    return circleView;

}

-(IBAction)onLocationButtonTop:(id)sender {

    UIBarButtonItem* b = (UIBarButtonItem*) sender;

    int tag = b.tag;

    float latitude = 40.0;

    float longitude  = -75.0;

    if(tag == 1){

        latitude = 57.15;longitude  = -2.15;

    }

    else if(tag == 2){

        latitude = 39.91;longitude  = 116.41;

    }

    else{

        latitude = -1.46;longitude  = -48.48;

    }

    CLLocationCoordinate2D x;

    x.latitude = latitude;

    x.longitude = longitude;

    MKCoordinateSpan z;

    z.latitudeDelta = 0.25;

    z.longitudeDelta = 0.25;

    MKCoordinateRegion y;

    y.center = x;

    y.span = z;

    map.region = y;

    [map addOverlay:[MKCircle circleWithCenterCoordinate:x

                                                 radius:1000]];

} 
```

h 文件

```
#import <UIKit/UIKit.h>

#import <MapKit/MapKit.h>

@interface MapExampleK2ViewController : UIViewController <MKMapViewDelegate>

@property (strong,nonatomic) IBOutlet MKMapView* map;

-(IBAction)onLocationButtonTop:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:34:17.940

对于您问题的第二部分，您可以使用 CLLocationManager 获取当前位置，然后在位置更新时使用 setRegion。您可以参考发布在[http://developer.apple.com/library/ios/#samplecode/Regions/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010726](http://developer.apple.com/library/ios/#samplecode/Regions/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010726)上的区域代码。

下面是该代码中的函数，它将地图上的焦点设置为您当前的位置。

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    NSLog(@"didUpdateToLocation %@ from %@", newLocation, oldLocation);

        if (oldLocation == nil) {
        // Zoom to the current user location.
        MKCoordinateRegion userLocation = MKCoordinateRegionMakeWithDistance(newLocation.coordinate, 1500.0, 1500.0);
        [regionsMapView setRegion:userLocation animated:YES];
    }
} 
```

# ios - 自定义 UiTableCell 调整大小问题

> ID：11492154
> 
> 赞同：1
> 
> 时间：2012-07-15T13:06:35.410
> 
> 标签：ios, uitableview

我有一个自定义表格单元格，其中有一个自定义 ui 视图。我的单元格高度是动态的，因为它取决于来自服务器的数据。获得数据后，我会调整单元格框架的大小，使其在表格中可见。

但是当我通过修改单元格的高度来调整单元格框架的大小时，单元格内容永远不会正确调整大小。我已经正确设置了调整掩码大小的内部视图，但不确定当我通过修改单元格框架更改表格视图的 heightForRowIndexPath 委托方法中的单元格高度时，内部视图不会调整大小。

我在这里找到的解决方案是，一旦我为单元格设置了新框架，我为内部容器视图设置了相同的框架，它会调整所有子视图的大小。

我只需要知道单元格调整大小可能是什么问题。

提前致谢

谢谢，纳文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:35:41.880

所有视图都有一个属性 autoresizesSubviews，它可以启用自动调整大小。也就是说，它对 UITableView 单元格意味着它的子视图将被调整大小。但是，UITableViewCell 的“contentView”属性不是子视图，它是由单元格管理的视图。虽然将单元格的帧更改传播到 contentView 似乎是合乎逻辑的，但事实并非如此。我刚刚修改了我自己的一个 tableView 项目，以验证在单元格和 contentView 上都设置了 autoresizesSubviews，并且单元格框架更改对 contentView 没有影响。

以我的经验，框架高度对单元格的显示方式没有影响，因为 backgroundView（如果有）和 contentView 都是“管理的”而不是子视图。您甚至不能将它用于 heightForRowAtIndexPath: 因为在创建单元之前调用该回调（并且尝试在该方法中获取和使用它会导致我的应用程序崩溃）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-27T16:49:38.670

如果将子视图添加到单元格中，则`contentView`在`layoutSubviews`. 但是，您必须记住`[super layoutSubviews];`在布局子视图之前调用，这将`contentView`正确调整单元格的大小。

# jquery - jquery - 获取元素相对于视口的位置

> ID：11492161
> 
> 赞同：0
> 
> 时间：2012-07-15T13:07:33.053
> 
> 标签：jquery, offset, scrolltop

我试图检测元素何时到达视口顶部。我已经设置了一个变量来获取元素的位置，并设置了另一个变量来获取窗口的实际滚动位置。然后我设置了一个条件，说明滚动位置是否等于与元素位置相同的值做某事。它正在获得所有价值，但一旦满足条件，它似乎什么也不做：

```
 var element = $("#element").offset().top;
  var totalscroll = $(window).scrollTop();
  if (totalscroll >= element) {
  alert('the element is at the top!'); 
```

# php - jquery自动完成ajax响应分离

> ID：11492162
> 
> 赞同：0
> 
> 时间：2012-07-15T13:07:35.110
> 
> 标签：php, jquery, ajax, jquery-ui

**HTML部分：**

```
 <form method="post" id="src-form" name="src-form" action="<?php echo $SCRIPT_NAME; ?>">

          <input id="src-location" name="src-location" autocomplete="off" />

          <input type="submit" name="src_submit" id="src_submit" value="Search" />

        </form>

    <script>

      $(document).ready(function() {

        $("input#src-location").autocomplete({

     source: "autosuggest-server.php"
        });

       $('input#src-location').focus(function()

        {       

                $(this).val('');

        });  

    });  

    </script> 
```

**PHP部分：**

```
<?php

include("db.php");

$return_arr = array();

$fetch = mysql_query("SELECT * FROM city INNER JOIN country ON country.countryid = city.countryid where cityname like '%" . mysql_real_escape_string($_GET['term']) . "%' ORDER BY cityname ASC limit 0,20"); 

    while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {

        $row_array['id'] = $row['id'];

        $row_array['value'] = $row['cityname'].", ".$row['countryname'];

        array_push($return_arr,$row_array);
    }

echo json_encode($return_arr);
?> 
```

**JS：普通 jquery 自动提示脚本**

**在我添加的 PHP 文件中：**

```
$row_array['value'] = $row['cityname'].", ".$row['countryname_'.$lang].",".$row['cityid']; 
```

当我输入某些内容时，它会按预期回显cityid。有没有办法将 cityid 与实际显示的值分开并将其输入隐藏的输入文本字段？

我想做的是按 cityid 搜索，但我不希望它显示在搜索字段中。

还有其他解决方案吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:49:04.780

我建议您将响应作为 JSON 对象返回，因此在 php 中您可以：

```
$dataArray = ... //get city data where key=cityId, value=1, key=cityName, value=London etc.
echo json_encode($dataArray); 
```

这将返回如下内容：

```
{'cityId':'1','cityName':'London'} 
```

现在在 javascript 中，通过添加定义您的 ajax 请求以接受 json：

```
dataType: 'json' 
```

一旦您收到响应消息，您可以执行以下操作：

```
$('#myHiddenField').val(msg.cityId);
var cityName = msg.cityName;
//do whatever you like with cityName 
```

# ios - 如何将 NSCFArray（可能的 JSON）序列化为 NSDictionary？

> ID：11492163
> 
> 赞同：2
> 
> 时间：2012-07-15T13:08:03.057
> 
> 标签：ios, json, nsdictionary, foursquare

在使用 BZForursquare 将附近的场地放入 UITableView 时，我现在真的被卡住了。

BZFoursquare：[https ://github.com/baztokyo/foursquare-ios-api](https://github.com/baztokyo/foursquare-ios-api)

我在 requestDidFinishLoading 委托方法中得到了我的 Requestresult。在此方法中，请求对象包含多个 NSDictionaries，并且一个字典在 request.response 中。此响应字典包含一个带有 key="venues" 的条目，并且作为 JSON 对象的值。当我将此值对象放入字典时，类型似乎不是字典而是 NSCFArray：

```
#pragma mark BZFoursquareRequestDelegate
- (void)requestDidFinishLoading:(BZFoursquareRequest *)request {
    self.meta = request.meta;
    self.notifications = request.notifications;
    self.response = [request.response objectForKey:@"venues"];
    self.request = nil;
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    NSLog(@"%@",[self.response objectForKey:@"name"]);
} 
```

我假设这是因为 NSLog Line 给了我以下错误：

-[__NSCFArray objectForKey:]：无法识别的选择器发送到实例 0x1e5c90f0

现在我完全感到困惑，并尝试了一些失败的尝试来将这个 JSON 从任何类型的 od 数据类型中获取到 NSDictionary 中。一种尝试是将值 Object 放入 NSString 并使用

```
[NSJSONSerialization JSONObjectWithData:[responseString dataUsingEncoding:NSUTF8StringEncoding] options:0 error:&error]; 
```

将其放入字典中，但这也失败了，因为它仍然是一个 NSCFArray。有人可以告诉我如何获得内容

```
[request.response objectForKey:@"venues"] 
```

进入 NSDictionary 以便我可以使用此内容填充我的 UITabelview？

编辑：

这是 Dictionary request.response 中值部分的内容：

```
(
    {
    categories =         (
                    {
            icon =                 {
                name = ".png";
                prefix = "https://foursquare.com/img/categories/food/default_";
                sizes =                     (
                    32,
                    44,
                    64,
                    88,
                    256
                );
            };
            id = 4bf58dd8d48988d10b941735;
            name = "Falafel Restaurant";
            pluralName = "Falafel Restaurants";
            primary = 1;
            shortName = Falafel;
        }
    );
    contact =         {
    };
    hereNow =         {
        count = 0;
        groups =             (
        );
    };
    id = 4df3489dfa76abc3d86c4585;
    likes =         {
        count = 0;
        groups =             (
        );
    };
    location =         {
        cc = DE;
        city = "Vinn";
        country = Germany;
        distance = 92;
        lat = "51.44985";
        lng = "16.648693";
        state = "Nordrhein-Westfalen";
    };
    name = "Yildiz D\U00f6ner";
    specials =         (
    );
    stats =         {
        checkinsCount = 3;
        tipCount = 0;
        usersCount = 2;
    };
    verified = 0;
} 
```

这似乎来自 NSCFArray 的类型。以及如何从另一个字典创建，以便我可以通过键访问 JSON 值？对不起，如果我今天真的很慢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:32:56.457

你要求“场地”，我认为这是一个这样的数组。所以在反序列化 json 之后，记录返回对象看看你得到了什么。几乎可以肯定的是一系列字典。

# java - 如何在不使用 while 循环的情况下运行服务器？

> ID：11492164
> 
> 赞同：3
> 
> 时间：2012-07-15T13:08:07.200
> 
> 标签：java, multithreading, datagram

我正在尝试使用 DatagramSocket 和 DatagramPacket 类制作服务器程序，但我当前的代码使用了一个丑陋的 while 循环，它在服务器运行时也会冻结我的程序，但服务器运行良好，没有任何问题。无论如何，代码如下。无论如何我可以使用不同于while循环的东西或防止while循环阻止程序中的任何其他代码执行吗？

```
protected void run() {
    try {
        socket = new DatagramSocket(port);
        socket.setBroadcast(true);
    } catch (Exception e) {
        e.printStackTrace();
        stopServer(); //stop the server
        return; 
    }
    while(isRunning()){ //hate this loop
        try {
            byte[] buf = new byte[256];
            DatagramPacket packet = new DatagramPacket(buf, 256);
            socket.receive(packet);
            DatagramPacket serverPacket;
            byte[] serverBuf;
            byte hb = 0;
            byte lb = packet.getData()[0];
            int e = ((int)hb<<8)|((int)lb&0xFF); //translate byte to int
            switch(e) {
                case 2:
                    //do something
                    break;
                case 5:
                   //do something
                   break;
                case 7:
                    //do something
                    break;
                default:
                    //default stuff
                    break;
            }
        } catch (Exception e) {
            System.out.println("Fatal Server Error:");
            e.printStackTrace(); 
            stopServer(); //stop the server
            return; //stop the method
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T13:17:11.137

你应该把它放在一个新线程中。接收数据包的过程涉及同步 IO，因此它总是会阻塞它正在运行的任何线程。

澄清一下，让程序的其余部分等待的不是 while 循环本身。这是 socket.receive() 调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T13:24:44.447

我怀疑您是否可以摆脱循环，因为从逻辑上讲，您打算让您的服务器“服务”多个请求。每个请求都将在服务器循环的一次迭代中得到服务。

现在，您的服务器通常只关心接收请求并将它们分派到线程池进行处理。

因此，您不必让服务器线程担心给定请求的处理。基本上是因为如果您的服务器正忙于处理请求，那么在此期间它无法处理任何其他到达其端口的请求。

建议是，接收数据包，并立即将接收到的数据传递给另一个线程进行处理。

显然，这并不意味着删除有问题的循环，正如我所提到的，除非您打算只处理来自客户的一个请求（一种不太可能的情况），否则这是不可能的。这将保证可以独立处理请求，并且它们的处理不会延迟处理到达服务器端口的其他请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T13:33:09.757

我建议使用[Apache Mina](http://mina.apache.org/)来管理您的流量和网络通信。

它专门为此而设计，并提供了[**Reactor**设计模式](http://en.wikipedia.org/wiki/Reactor_pattern)的实现，这可能是您的应用程序更好的设计选择。

# linux - 如何使用 .Xdefaults 文件更改 xterm 颜色？

> ID：11492166
> 
> 赞同：4
> 
> 时间：2012-07-15T13:08:29.727
> 
> 标签：linux, colors, xterm

我在我的主目录中创建了以下 .Xdefaults 文件，但 xterm 仍然有默认颜色，这里可能有什么问题？

```
*xterm*background: #101010
*xterm*foreground: #d0d0d0
*xterm*cursorColor: #d0d0d0
*xterm*color0: #101010
*xterm*color1: #960050
*xterm*color2: #66aa11
*xterm*color3: #c47f2c
*xterm*color4: #30309b
*xterm*color5: #7e40a5
*xterm*color6: #3579a8
*xterm*color7: #9999aa
*xterm*color8: #303030
*xterm*color9: #ff0090
*xterm*color10: #80ff00
*xterm*color11: #ffba68
*xterm*color12: #5f5fee
*xterm*color13: #bb88dd
*xterm*color14: #4eb4fa
*xterm*color15: #d0d0d0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T14:14:50.680

`xrdb .Xdefaults`您在（重新）启动 xterm 之前尝试过吗？

# java - Apache Validator 或 Hibernate Validator 替代方案

> ID：11492168
> 
> 赞同：0
> 
> 时间：2012-07-15T13:08:33.143
> 
> 标签：java, validation

我正在尝试为普通的 Pojo 类找到一个可配置/动态的验证器。

我正在开发的应用程序非常简单..

XML -> Pojo 对象 -> 验证 -> 插入数据库。

我正在尝试使验证动态化，因此只要我之前编写过验证，我就可以随时更改它。

这是一个独立的应用程序。

1) 可以通过 XML 配置每个类验证

2）可以先编写自定义验证，比如命令对象。

我先做文献研究。所以我想知道以下问题。

1) Apache Validator 或 Hibernate Validator 能满足我的要求吗？

2）我应该考虑其他选择吗？

3）如果他们不能满足我的要求，是否意味着我已经定制了它？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:28:32.243

你应该看看[OVal](http://oval.sourceforge.net/) 它是一个验证框架，仍然被维护，轻量级和可扩展。

您可以使用注释、pojo 或 XML 编写约束 可以编写复杂的约束，例如动态和/或自定义检查，基于以脚本语言（groovy、ruby、javascript 等）编写的多个字段

用户指南[做得](http://oval.sourceforge.net/userguide.html)很好

我无法判断它是否比 apache 验证器或休眠验证器更好，我没有很好地测试它们。但是我现在使用 OVal 有一段时间了，我很确定它可以满足您的需求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-22T15:03:27.273

hibernate-validator 的另一个不错的选择是[Apache BVal](https://bval.apache.org/)

通过以下代码获取验证器工厂

```
ValidatorFactory validatorFactory = Validation
                       .byProvider(ApacheValidationProvider.class)
                       .configure()
                       .buildValidatorFactory(); 
```

# c++ - 通过 Visual Studio 运行程序会导致它失败？

> ID：11492169
> 
> 赞同：0
> 
> 时间：2012-07-15T13:08:35.253
> 
> 标签：c++, visual-studio-2010, bittorrent

我正在编写的程序有问题。它是一个命令行解析器，用于解析 bencode（用于 torrent 文件）。该程序接受一个文件名作为它的命令行。当我使用调试命令行参数设置在 Microsoft Visual Studio 10.0 中构建和运行程序以输入命令行时，程序告诉我它解析失败。

如果我打开命令提示符并使用相同的命令行从命令提示符运行程序，则程序可以完美运行！这是怎么回事？这是 Visual Studio 的常见问题吗？

我使用 Visual Studio 中的调试器来跟踪程序失败的位置，并且似乎调用 stat 函数 ( [http://msdn.microsoft.com/en-us/library/14h5k7ff.aspx](http://msdn.microsoft.com/en-us/library/14h5k7ff.aspx) ) 用于获取长度该文件在 Visual Studio 中返回错误，但在 Visual Studio 之外运行时工作正常。

该代码使用 Bencode 解析器，可在此处找到： http://funzix.git.sourceforge.net/git/gitweb.cgi?p=funzix/funzix;a=blob;f=bencode/ [bencode.c](http://funzix.git.sourceforge.net/git/gitweb.cgi?p=funzix/funzix;a=blob;f=bencode/bencode.c)

这是程序的代码：

```
#include <stdio.h>
#include "../Parse/bencode.h"

int main(int argc, char *argv[]){
if(argc != 2){
    printf("Usage: whirlwind filename\n");
    return 1;
}

char *buf;
long long len;
be_node *n;

//read the torrent file into a buffer and store at &buf
buf = read_file(argv[1], &len);
if(!buf){
    buf = argv[1];
    len = strlen(argv[1]);
}

printf("Decoding: %s\n", argv[1]);
n = be_decoden(buf, len);

if(!n){
    printf("Parsing failed!\n");
    return 1;
}

if(n->type != BE_DICT){
    printf("This file is not a valid Bencoded Dictionary.\n");
    return 1;
}

int i;
char* keyName;

for(i = 0; i < 10; i++){
    keyName = n->val.d[i].key;
    if(keyName == "announce"){
        printf("\n\n");
    }
    printf("%s\n", keyName);
    if(keyName == "announce"){
        printf("\n\n");
    }
}

return 0; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:40:25.123

如果您从 Visual Studio 传递相对路径，您应该确保当您的应用在 IDE 中运行时它能够正确解析。出现这个问题是因为在调试时，当前目录通常是\bin\debug。
为了安全起见，请输入完整路径名或从配置文件中读取文件的位置。

# php - 使用php从图像中去除失真

> ID：11492173
> 
> 赞同：-1
> 
> 时间：2012-07-15T13:08:44.800
> 
> 标签：php, image, captcha

我是 PHP 图像处理的初学者。我有一张图片，我必须消除该图片的失真并读取日期。我怎样才能在 PHP 中做到这一点。

[![](../Images/56d6bce16e5a431ffc1b4ef7bfd37e7b.png)](https://i.stack.imgur.com/YEt0I.gif)

如何从该图像中删除失真并读取日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:14:16.067

根本没有任何*一种方法适合所有*类型的答案。除非您编写一些非常复杂的代码来选择应用的失真，否则将其逐个像素地与原始的本意相关联，您将通过用于该目的的所有验证码获得大量资金 - 到确保一个人在驾驶方向盘，而不是一点代码。

从理论上讲，您可以编写一些代码来相当容易地应用与该精确失真相反的东西，看起来只不过是在该图像中添加了重复的拖动 - 但这将适用于该精确图像，并且可能只会使下一个图像更加扭曲。

# firefox-addon - Firefox 插件中标准类的原型

> ID：11492177
> 
> 赞同：0
> 
> 时间：2012-07-15T13:09:02.410
> 
> 标签：firefox-addon, firefox-addon-sdk

一些背景：我正在为 Firefox 做一个附加组件。在 firefox 插件中，js 脚本可以在某些事件（内容脚本）时附加到网页。在这些脚本中，我想使用`XMLHttpRequest`.

是否可以在 javascript 中访问可用类的原型？例如：`XMLHttpRequest.toString()`返回`[object XMLHttpRequest]`，`XMLHttpRequest.prototype`而是`null`。我做错了什么，还是不能在这些脚本中使用原型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:01:38.873

是的，你一定做错了什么。我尝试使用基于 SDK 的最小扩展，`main.js`文件为：

```
var pageMod = require("page-mod");
pageMod.PageMod({
  include: "*.google.com",
  contentScriptWhen: "end",
  contentScript: 'throw "XMLHttpRequest.prototype = " + XMLHttpRequest.prototype'
}); 
```

当我加载 google.com 时，我在错误控制台中看到以下消息：

> XMLHttpRequest.prototype = [对象 XMLHttpRequestPrototype]

所以`XMLHttpRequest.prototype`绝对不是`null`。

# coding-style - 制表符与空格缩进

> ID：11492179
> 
> 赞同：29
> 
> 时间：2012-07-15T13:09:09.043
> 
> 标签：coding-style

如果您阅读任何编码风格指南，您很有可能会看到有关使用空格而不是制表符进行缩进的建议。一些指南明确表示：永远不要使用标签。

我知道存在引发关于制表符与空格的核战争的风险。这肯定不是我想要的。然而，我的意图是询问您是否有任何充分的理由提出此建议。为什么每个人都说空格是缩进代码的最佳方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T02:15:26.513

让标签看起来正确很大程度上取决于可能显示或打印源代码的所有软件的配置/选择。如果您有一组受限制的此类软件并且发现这对您来说不是一个实际问题，那很好 - 如果您看到价值，那就去吧。但是，请注意，当一行用制表符缩进时，然后在您希望根据左括号的位置缩进的后续行中继续，以对齐引号等 - 您将以一种方式混合制表符和空格视觉上无法验证其正确性（除非您的编辑器以不同方式显示选项卡）。与之相反，使用箭头键交叉制表符或删除可能更快，但也更令人困惑和令人沮丧。很少有不同的人使用不同的标签宽度来干净地处理相同的代码，这可能是标签的主要承诺。就个人而言，我使用空格。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T13:14:18.947

选项卡在不同的计算机和打印机上可以有不同的大小。代码在原始计算机上可能看起来很棒，但在另一台计算机或打印输出上，间距可能看起来很奇怪。

使用空格，无论计算机如何，代码看起来都一样。

# jquery - jQuery 克隆和删除 div 不会重新添加 div

> ID：11492181
> 
> 赞同：0
> 
> 时间：2012-07-15T13:09:19.337
> 
> 标签：jquery, video, clone, replacewith

我找到了一段代码，可以帮助我解决最初的问题：我有一段选项卡式内容，其中一些内容中有视频。当您播放视频，然后选择另一个选项卡时，视频会在后台继续播放。我猜常见的问题:)

无论如何，我发现了一些似乎可以工作的代码，但显然我做错了什么。这是代码：

```
// stop video playback when div is hidden
$('.contextual-help-tabs li').click(function() {
    var test = $('.contextual-help-tabs-wrap div.active').attr('id'); // gets previously active div ID
    var clone = $('#'+test).clone(true);                               // clones the previously active div
    $('#'+test).remove();                                              // removes the previously active div
    $('#'+test+'-holder').html(clone);                                 // puts it back like new
}); 
```

问题是这样的： `test`确实，返回正确的 div。它获取在当前和活动的一个之前打开的选项卡的 div ID。这是一种享受。它也可以很好地删除 div。

但是，它并没有将其放回原处。当我弹出“警报”以查看正在发生的事情时，它正在删除 div，但永远不会将其放回（它以“未定义”的形式返回）。所以我不知道是否`clone`只是没有克隆，或者`$('#'+test+'-holder').html(clone);`只是没有工作。

作为旁注，我也尝试使用这种替代方法：

```
// stop video playback when div is hidden
$('.contextual-help-tabs li').click(function() {
    var test = $('.contextual-help-tabs-wrap div.active').attr('id'); // gets previously active div ID
    var clone = $('#'+test).clone(true);                               // clones the previously active div
    $('#'+test).replaceWith(clone);                                // replaces the previously active div with the "refreshed" contents of the div
    }); 
```

这实际上工作得很好 - 它正在用内容替换内容（视频播放停止）但是 - 如果我`video`在内容中有标签（即 HTML5 视频播放），那么由于某种原因，视频会丢失。返回的 HTML*完全*正确，但由于我无法理解的原因，视频不再被识别，并且不会播放任何内容。它就像视频根本不存在，或者路径不正确。（我假设这与 DOM 不再识别它有关？）

有人知道我如何修复*任*一版本的代码吗？因为我只是看不到这里发生了什么。

非常感谢！

ETA：作为旁注，如果我使用的是 replaceWith() 函数，然后我转到带有 HTML5 视频的选项卡并*播放*它，然后交换选项卡，当我返回到其中包含视频的选项卡时，视频仍然在那里，工作正常，如果您单击“播放”，它将从您交换标签的位置开始播放（而不是从头开始）。

如果我转到包含视频的选项卡，然后在播放 HTML5 视频之前移动到另一个选项卡，然后返回到包含 HTML5 视频的选项卡，那么视频就消失了。这真的很奇怪。

如果它有帮助，到目前为止，这只发生在谷歌浏览器中。我还没有真正检查过其他浏览器是否存在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:23:11.683

您可以尝试使用 detach()。在这里找到它[http://api.jquery.com/detach/](http://api.jquery.com/detach/) 它的作用是它实际上从 DOM 树中删除了一个所需的节点，你可以为它分配一些像这样的变量

```
var video = $('#videoDivId').detach(); // you can also declare this var global then use it in some other function
$('#someDifferentDiv').append(video); 
```

我有同样的问题，这对我有用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T13:14:16.037

~~不能将`.html()`方法与 jQuery 对象一起使用 - 需要使用字符串。~~

**编辑：**顺便说一句，你在哪里找到`.html(clone)`代码？

# android - Listview 一次只显示一行

> ID：11492185
> 
> 赞同：3
> 
> 时间：2012-07-15T13:09:30.523
> 
> 标签：android, android-listview, android-tabhost

我遇到了一个列表视图的问题，即使有很多行，它一次只显示一行。列表视图包含在选项卡中，因此问题可能存在而不是列表视图中。我首先尝试在单独的布局文件中定义列表视图，并在创建选项卡时使用它。当这不起作用时，我将其放入带有选项卡定义的 FrameLayout 中。结果相同。

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost android:layout_width="fill_parent"
    android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost">
    <LinearLayout android:id="@+id/LinearLayout01"
        android:orientation="vertical" android:layout_height="fill_parent"
        android:layout_width="fill_parent">
        <TabWidget android:id="@android:id/tabs"
            android:layout_height="fill_parent" android:layout_width="wrap_content"></TabWidget>
        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_height="fill_parent" android:layout_width="fill_parent">
            <ListView android:id="@+id/list1" android:layout_width="fill_parent"
                android:layout_height="fill_parent"> 
            </ListView></FrameLayout>
    </LinearLayout>
</TabHost> 
```

这是我用来创建和添加选项卡的代码：

```
protected void addTab(String tabName, TabHost.TabContentFactory tabFactory){
    TabSpec tabSpec = tabHost.newTabSpec(tabName);
    tabSpec.setIndicator(tabName);
    tabSpec.setContent(tabFactory);
    tabHost.addTab(tabSpec);
    tabs.add(new TabDetails(tabName,tabFactory));

} 
```

我称之为：

```
addTab("Medical Center Tests",this); 
```

并包含此代码以创建选项卡内容：

```
@Override
public View createTabContent(String tag) {

    // Get the data returned from the servelet and display it in the ListView
    data = getDataArray(this.getIntent().getExtras());

    ListView lv = (ListView) contentView.findViewById(R.id.list1);

lv.setAdapter(new MyMedicalCentersTestsScreenAdapter(this,lv,data));
return lv;
} 
```

数据都在那里。只是列表视图的高度等于一行的高度。

**编辑**：

我添加了一些调试命令来查看 getView 请求的位置。它只请求第一行，然后在我滚动时一次请求一个。因此，它肯定将其视为一个小的列表视图并相应地滚动它们。

**编辑 2**：

决定尝试一个实验。返回列表视图的简单列表。

```
 ListView lv = (ListView) contentView.findViewById(R.id.list1);
    // create some dummy strings to add to the list
    List<String> list1Strings = new ArrayList<String>();
    list1Strings.add("Item 1");
    list1Strings.add("Item 2");
    list1Strings.add("Item 3");
    list1Strings.add("Item 4");
    lv.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, list1Strings)); 
```

还是一样。一次只能排一排。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:18:18.210

尝试这样做

`<TabWidget android:id="@android:id/tabs" android:layout_height="fill_parent" android:layout_width="fill_parent"></TabWidget>`

代替

`<TabWidget android:id="@android:id/tabs" android:layout_height="fill_parent" android:layout_width="wrap_content"></TabWidget>`

`android:layout_height="wrap_content"`或者`android:layout_height="100dp"`

而不是这个

`android:layout_height="fill_parent"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:19:27.960

您定义布局的高度而不是使用 fill_parent ...

代码：

```
 layout_height ="150dp" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T14:56:59.907

您的布局有点奇怪，因为 tabWidget（它显示代表父选项卡集合中每个页面的选项卡标签列表）高度设置为`fill_parent`. 这样的事情怎么样？

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost android:layout_width="fill_parent"
         android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@android:id/tabhost">
<LinearLayout
         android:id="@+id/LinearLayout01"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:orientation="vertical" >
<TabWidget
    android:id="@android:id/tabs"
    android:layout_width="match_parent"
    android:layout_height="84dp" >

</TabWidget>

<FrameLayout
    android:id="@android:id/tabcontent"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/tab1"
        android:layout_width="match_parent"
        android:layout_height="fill_parent">

        <ListView
            android:id="@+id/list1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

        </ListView>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/tab2"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" >

    </LinearLayout>

  </FrameLayout>

</LinearLayout>
</TabHost> 
```

对于标签：

```
 tabhost = (TabHost) findViewById(android.R.id.tabhost);
    tabhost.setup();

    TabSpec ts = tabhost.newTabSpec("tag1"); 
    ts.setContent(R.id.tab1);
    ts.setIndicator("TAB1");
    tabhost.addTab(ts);

    ts = tabhost.newTabSpec("tag2"); 
    ts.setContent(R.id.tab2);
    ts.setIndicator("TAB2");  
    tabhost.addTab(ts); 
```

您以这种方式添加选项卡是因为您动态添加它们？

# ios - Phonegap iOS 应用程序运行缓慢

> ID：11492192
> 
> 赞同：1
> 
> 时间：2012-07-15T13:10:37.047
> 
> 标签：ios, cordova, phonegap-plugins

我使用 jQuery Mobile 创建了一个带有 HTML + CSS 的 Phonegap 应用程序。除以下故障外，一切正常：

1.  `<a href="url"> Click here </a>`- 带有锚标记的链接非常慢，有时不会打开浏览器来加载页面。

2.  用于绘制具有某些预定义位置页面的 Google 地图的 Javascript 根本不会加载，或者如果加载了它会花费大量时间。

我将不胜感激任何帮助/建议。

# java - 引导接收器导致应用程序停止

> ID：11492193
> 
> 赞同：0
> 
> 时间：2012-07-15T13:10:50.413
> 
> 标签：java, android, boot, forceclose

我的作业计划器应用程序中有一个启动接收器，用于重新设置所有为提醒用户他们的作业到期而创建的警报。每次我的手机启动时，我都会收到“作业计划器已停止”，我想不通出为什么。而且我不能使用 LogCat，因为它在启动时没有连接（？）。

这是我在引导接收器中的代码。

```
public class BootReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    // RE-SET ALL ALARMS FROM THE DATABASE WHEN PHONE IS TURNED ON

    HomeworkDatabase db = new HomeworkDatabase(context);
    db.open();
    ArrayList<HomeworkItem> hwks = db.getHomeworks();
    db.close();

    int reminders = 0;

    for (int e = 0; e < hwks.size(); e++) {

        HomeworkItem current = hwks.get(e);

        {
            Calendar c = Calendar.getInstance();
            c.set(current.year, current.month, current.day, 0, 0);

            long alarmTime = c.getTimeInMillis();

            Intent i = new Intent(HomeworkList.getAppContext(),
                    RegularAlarm.class);
            i.putExtra("title", current.title);
            i.putExtra("id", current.id);
            PendingIntent pi = PendingIntent.getBroadcast(
                    HomeworkList.getAppContext(), (int) current.id, i, 0);
            AlarmManager mAlarm = (AlarmManager) context
                    .getApplicationContext().getSystemService(
                            Context.ALARM_SERVICE);
            mAlarm.set(AlarmManager.RTC_WAKEUP, alarmTime, pi);

            reminders++;
        }

        if (current.oneDayReminder == true) {

            Calendar c = Calendar.getInstance();
            c.set(current.year, current.month, current.day, 0, 0);
            c.roll(Calendar.DAY_OF_MONTH, -1);

            long alarmTime = c.getTimeInMillis();

            Intent i = new Intent(HomeworkList.getAppContext(),
                    OneDayAlarm.class);
            i.putExtra("title", current.title);
            i.putExtra("id", current.id);
            PendingIntent pi = PendingIntent.getBroadcast(
                    HomeworkList.getAppContext(), (int) current.id, i, 0);
            AlarmManager mAlarm = (AlarmManager) context
                    .getApplicationContext().getSystemService(
                            Context.ALARM_SERVICE);
            mAlarm.set(AlarmManager.RTC_WAKEUP, alarmTime, pi);

            reminders++;

        }
        if (current.twoDayReminder == true) {
            Calendar c = Calendar.getInstance();
            c.set(current.year, current.month, current.day, 0, 0);
            c.roll(Calendar.DAY_OF_MONTH, -2);

            long alarmTime = c.getTimeInMillis();

            Intent i = new Intent(HomeworkList.getAppContext(),
                    TwoDaysAlarm.class);
            i.putExtra("title", current.title);
            i.putExtra("id", current.id);
            PendingIntent pi = PendingIntent.getBroadcast(
                    HomeworkList.getAppContext(), (int) current.id, i, 0);
            AlarmManager mAlarm = (AlarmManager) context
                    .getApplicationContext().getSystemService(
                            Context.ALARM_SERVICE);
            mAlarm.set(AlarmManager.RTC_WAKEUP, alarmTime, pi);

            reminders++;
        }
    }

    Log.d("hwk","BOOT COMPLETE: " + reminders + " alarms created");
    Toast.makeText(context, reminders + " alarms created at boot", Toast.LENGTH_LONG);

}
} 
```

抱歉，代码片段很长，但我不知道问题出在哪里。

谢谢

编辑：错误的来源是在创建意图并从 PendingIntent 获取上下文时。

```
Intent i = new Intent(HomeworkList.getAppContext(), RegularAlarm.class); 
```

此行导致空指针异常。知道为什么吗？

# c - 如何创建一个调用 c lua api 的 lua 插件？

> ID：11492194
> 
> 赞同：1
> 
> 时间：2012-07-15T13:10:57.977
> 
> 标签：c, lua

根据以下消息，我正在编写的 lua 插件中出现错误，这些错误是链接到 lua 运行时的两个副本的症状：http: [//lua-users.org/lists/lua-l/2008- 01/msg00671.html](http://lua-users.org/lists/lua-l/2008-01/msg00671.html)

引用：

> 这反过来意味着 dummynode 的相等性测试失败。如果您将 Lua 核心的两个副本链接到您的应用程序（导致出现两个 dummynode 实例），这是常见的症状。
> 
> 一个常见的错误是将 C 扩展模块（共享库）与静态库链接。扩展模块的链接器命令行不得包含 -llua 或类似的东西！
> 
> Lua 核心符号（lua_insert() 等）只能从包含 Lua 核心本身的可执行文件中导出。之后加载的所有 C 扩展模块都可以访问这些符号。在 ELF 系统下，这就是 -Wl,-E 在链接器线上的用途。MACH-O 系统不需要这个，因为所有非静态符号都被导出。

这正是我看到的错误......我不知道我应该做什么。

我已将 lua src 目录添加到 DLL 的包含路径中，该路径是我的 lua 插件的 c 组件，但是当我链接它时，我得到了一堆错误，例如：

```
Creating library file: libmo.dll.a
CMakeFiles/moshared.dir/objects.a(LTools.c.obj): In function `moLTools_dump':
d:/projects/mo-pong/deps/mo/src/mo/lua/LTools.c:38: undefined reference to `lua_gettop'
d:/projects/mo-pong/deps/mo/src/mo/lua/LTools.c:47: undefined reference to `lua_type'
d:/projects/mo-pong/deps/mo/src/mo/lua/LTools.c:48: undefined reference to `lua_typename'
d:/projects/mo-pong/deps/mo/src/mo/lua/LTools.c:49: undefined reference to `lua_tolstring' 
```

所以，总而言之，我有这种情况：

1.  静态链接到 lua 运行时的父二进制文件。

2.  一个 lua 库，它加载一个带有 C 代码的 DLL。

3.  DLL中的C代码需要调用lua c api（如lua_gettop()）

我该如何链接？当然，动态库不能“看到”父二进制文件中的符号，因为父二进制文件不是从 DLL 加载它们，它们是静态链接的。

...但是如果我将符号作为插件的一部分链接，我会收到上面的错误。

帮助？这似乎是一个应该经常出现的问题（dll 依赖于父二进制文件中的符号，你如何链接它？）但我似乎看不到任何有用的线程。

（在你问之前，不，我无法控制父二进制文件，我无法让它从 DLL 加载 lua 符号）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:53:22.113

最好使用`libtool`它来使您的链接更容易和更便携。需要链接可执行文件`-export-dynamic`以导出其中的所有符号，包括静态库中的 Lua 符号。然后该模块需要与附加链接`-module -shared -avoid-version`，如果在 Windows 上，则需要附加`-no-undefined`；如果在 MacOS 上，另外`-no-undefined -flat_namespace -undefined suppress -bundle`；Linux 和 FreeBSD 不需要其他符号。这将使模块具有在父级中满足的未定义符号。如果缺少任何内容，则该模块将无法被`dlopen`父级编辑。

每个环境的语义略有不同，因此可能需要一些摆弄。有时标志的顺序很重要。再次`libtool`推荐，因为它隐藏了很多不一致之处。

# c# - 文本之间任何字符的正则表达式

> ID：11492197
> 
> 赞同：-2
> 
> 时间：2012-07-15T13:11:36.313
> 
> 标签：c#, regex

我正在开发一个 C# 应用程序，需要定期为以下场景提供任何帮助，我们将不胜感激。

`\Network Interface`和之间的文本`\Bytes Sent/sec`可以不同，如何使用正则表达式识别匹配？

> \Network Interface**虚拟机**\Bytes Sent/sec
> 
> \Network Interface **non virtual machine 1** \Bytes Sent/sec
> 
> \网络接口**非虚拟机 2** \字节发送/秒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T13:13:08.907

```
\\Network Interface (.*) \\Bytes Sent/sec 
```

# java - Eclipse 插件开发：带有 html 扩展名的多页编辑器

> ID：11492199
> 
> 赞同：0
> 
> 时间：2012-07-15T13:11:56.687
> 
> 标签：java, eclipse, eclipse-plugin

我从向导“带有多选项卡编辑器的插件”创建了一个插件。

问题：在项目配置中，如果我将`File Extension`字段设置为`html`，插件不起作用。如果我离开它`mpe`（预先插入的字段）或者我插入另一个未知的文件扩展名，那么它就可以工作。

什么可能导致此问题，如何激活 html 文件的插件？

**编辑：** 好的，我将尝试逐步描述我的问题。

我创建了一个新的插件项目 ![新插件项目](../Images/d2ea4fb91f44e5c0c51652db6afc6806.png)

我设置项目名称：

![项目基础设置](../Images/393ba2aafaf1b40d54c1c9ecc56f436b.png)

...和项目属性

![项目属性](../Images/7129bc575dc666b993aeb730892a0cc8.png)

我使用模板“多页编辑器”创建了一个插件

![模板插件](../Images/502fa4b353402caf4b4b68b84518793a.png)

现在，我必须选择类名和**文件扩展**名（mpe 是从 eclipse 中预先插入的，我暂时保留它）。

![在此处输入图像描述](../Images/5641481af468be0b72667d79bde9720e.png)

行。Eclipse 生成所有文件和一个有效的项目。所以，如果我测试它：

![运行日食](../Images/1cb1b83acb8d77d5a8ecf0d440641b4d.png)

我用 test.mpe 文件创建了一个测试项目

![测试项目](../Images/1a069236efd139b9a2947a83d781c93d.png)

我可以看到 3 个选项卡（因为在模板代码中配置了 3 个选项卡）和项目资源管理器上文件名 test.mpe 上的默认图标。**该插件工作！**

现在......我关闭所有并重复**所有**步骤，我使用`HTML`而不是`MPE`，我测试它并且......**没有标签，也没有图标**。

![测试html](../Images/9743f0dfc37a25cd68280994073e0379.png)

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T05:53:21.410

您的编辑器未设置为默认值，而是选择了您已安装的编辑器。[请参阅http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_editors.html?cp=2_1_1_143](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_editors.html?cp=2_1_1_143)上的完整文档和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T06:53:22.583

问题是nitind所说的。如此简单的解决方案是右键单击您创建的 .html 文件并选择打开方式并选择您安装的编辑器插件以打开 .html 文件。因此，该文件将在您创建的编辑器中打开，但不会使用默认的 html 编辑器打开。

# cuda - 我在使用 CUDA 在 GPU 上复制 char 时遇到问题

> ID：11492203
> 
> 赞同：2
> 
> 时间：2012-07-15T13:12:26.427
> 
> 标签：cuda, char, memcpy

主持人：

```
unsigned char exp[128];
unsigned char __e;

i = cudaMalloc( (void**)&__e, 128 * sizeof(unsigned char) );
if(i != cudaSuccess)
    printf("cudaMalloc __e FAIL! Code: %d\n", i);

BN_bn2bin128B(e, exp);  // copy data from e to exp, no problems since here

i = cudaMemcpy( &__e, &exp, 128 * sizeof(unsigned char), cudaMemcpyHostToDevice);
if(i != cudaSuccess)
    printf("cudaMemcpy __e FAIL! Code: %d\n", i); 
```

输出：

```
cudaMemcpy __e FAIL! Code: 11 
```

错误 11 对应于：

```
cudaErrorInvalidValue = 11, ///< Invalid value 
```

为什么？错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:54:52.403

你声明`__e`不正确。它必须是一个指针。尝试这个：

```
unsigned char exp[128];
unsigned char * __e;

i = cudaMalloc( (void**)&__e, 128 * sizeof(unsigned char) );
if(i != cudaSuccess)
    printf("cudaMalloc __e FAIL! Code: %d\n", i);

// whatever goes here to set exp

i = cudaMemcpy( __e, &exp[0], 128 * sizeof(unsigned char), cudaMemcpyHostToDevice);
if(i != cudaSuccess)
    printf("cudaMemcpy __e FAIL! Code: %d\n", i); 
```

# ssl - Firefox 阻止 SSL，适用于所有其他浏览器

> ID：11492205
> 
> 赞同：0
> 
> 时间：2012-07-15T13:13:07.387
> 
> 标签：ssl

我刚刚在我的服务器上安装了 SSL（共享经销商包）。

这是我第一次使用 SSL，我无法让它在 Chrome 或 Firefox 中正常工作。显然这是因为许多 CSS/JS/etc. 链接不是“https”，而是“http”。

我已经修改了必要的文件，现在谷歌浏览器显示一个漂亮的绿色 padlcok 并确认我的页面 (checkout/login/controls/accountools).php 都是安全的。

但是，如果我在 Firefox 中打开页面，我会立即得到：

```
This Connection is Untrusted

You have asked Firefox to connect
securely to www.domain.co.uk, but we can't confirm that your connection is secure.
          Normally, when you try to connect securely,
sites will present trusted identification to prove that you are
going to the right place. However, this site's identity can't be verified.

What Should I Do?

If you usually connect to

this site without problems, this error could mean that someone is
trying to impersonate the site, and you shouldn't continue. 
```

将此与谷歌进行对比：

```
Your connection to domain.com is encrypted with 256-bit encryption.
The connection uses TLS 1.0

The connection is encrypted using AES_256_CBC, with SHA1 for message authentication and DHA_RSA as the key exchange mechanism 
```

更重要的是，其他浏览器（MSIE、Safari、Opera）即使页面由于 CSS/JS/图像等而在技术上“不安全”，也没有眨眼。

我知道我可以简单地将我的网站添加到 Firefox 中的受信任列表中，但是当有人出现并在他们到达结帐/登录页面等之前看到“未测试的网站”时，这对我来说并不好。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:27:50.607

向 iSP 投诉。SSL 证书未正确签名。

# css - 百分比宽度的 CSS 翻转帮助

> ID：11492213
> 
> 赞同：0
> 
> 时间：2012-07-15T13:14:22.747
> 
> 标签：css, image, width, percentage, rollover

有谁知道我可以有一个具有百分比宽度的 CSS 翻转图像以便它随页面大小缩放的方法？

我认为我无法使用此处显示的方法[http://www.vision.to/css-only-single-image-fast-rollover.php](http://www.vision.to/css-only-single-image-fast-rollover.php)因为它将图像精灵设置为背景图像。

我见过的唯一其他 CSS 方法在这里：[http](http://thefiles.macadamian.com/2008/06/pure-css-image-rollover-without.html)
://thefiles.macadamian.com/2008/06/pure-css-image-rollover-without.html 我喜欢这种方法，但想知道是否可以使用一个图像精灵，而不是必须单独加载图像。

对不起，如果我听起来很含糊，每当我读到这些问题时，我总是认为写这些问题的人没有正确地描述它们的意思，现在我已经开始这样做了，我自己也没有更好哈哈。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:28:42.257

我不明白你怎么能用精灵做到这一点。它们是通过将大图像设置为元素（通常是 DIV）的背景来完成的，然后更改位置以便仅显示图像的所需部分。不同的DIV可以通过改变背景图像的位置来显示图像的不同部分。

但是，您不能缩放背景图像。它们始终以 1:1 显示。你可以让它们在元素内重复，也可以不重复，但你不能缩放它们，所以精灵的想法已经过时了。

如您发布的链接所示，使用单独的图像进行操作非常简单。

为翻转预加载图像非常简单。只需包含一个带有 CSS 设置的图像标签即可隐藏图像：

```
<img src='myrolloverimage.jpg' style='visibility:hidden; display:none;' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:50:55.253

如果您不需要支持 IE8 及更早版本，您可以使用`background-size`带有百分比值的 CSS3 属性。

与前景图像一样，精灵文件很可能不是一个合理的选择。缩放图像时，精灵文件会增加复杂性。这`background-position`是基于图像的缩放大小，使用百分比值获得准确的位置是有问题的。

# python - OpenCV via python：有没有一种快速的方法可以将一组矩形之外的像素归零？

> ID：11492214
> 
> 赞同：13
> 
> 时间：2012-07-15T13:14:24.387
> 
> 标签：python, opencv

我有一张脸的图像，我使用 haar 级联来检测嘴巴、鼻子和每只眼睛的位置（x、y、宽度、高度）。我想将这些区域之外的所有像素设置为零。最快（计算）的方法是什么？我最终会实时处理视频帧。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-15T13:46:09.653

我不知道这是否是最快的方法，但这是一种方法。

创建一个面部区域为白色的蒙版图像，然后对原始图像和蒙版图像应用 bitwise_and 函数。

```
x = y = 30
w = h = 100

mask = np.zeros(img.shape[:2],np.uint8)
mask[y:y+h,x:x+w] = 255
res = cv2.bitwise_and(img,img,mask = mask) 
```

它`0.16 ms`在我的系统（核心 i5,4GB RAM）中获取大小为 400x300 的图像

**编辑 - 更好的方法**：你不需要像上面那样做。只需创建一个零图像，然后将 ROI 从原始图像复制到零图像。就这样。

```
mask = np.zeros(img.shape,np.uint8)
mask[y:y+h,x:x+w] = img[y:y+h,x:x+w] 
```

它仅`0.032 ms`在我的系统中接受上述参数，`5 times faster`而不是上述参数。

结果 ：

输入图像：

![在此处输入图像描述](../Images/96c605995911d73de6d7aef128f09992.png)

输出 ：

![在此处输入图像描述](../Images/11272d57cc1cc0a0ad3271cb921db34b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-20T09:11:18.250

如果要制作多边形 ROI。创建多边形并为其制作蒙版。将图像与创建的帧相乘。

```
 ret,frame = cv2.imread()
    xr=1
    yr=1
    # y,x
    pts = np.array([[int(112*yr),int(32*xr)],[int(0*yr),int(623*xr)],[int(789*yr),int(628*xr)],[int(381*yr),int(4*xr)]], np.int32)
    pts = pts.reshape((-1,1,2))
    cv2.polylines(frame,[pts],True,(0,255,255))

    mask = np.zeros(frame.shape[:2],np.uint8)
    cv2.fillPoly(mask,[pts],(255,255,255))
    frame = cv2.bitwise_and(frame,frame,mask = mask)
    cv2.imshow("masked frame", frame) 
```

# python - 如何在 Pandas 的一组空列上进行分组？

> ID：11492215
> 
> 赞同：3
> 
> 时间：2012-07-15T13:14:38.750
> 
> 标签：python, group-by, pandas

我正在处理熊猫的一个角落案例。我正在尝试使用 agg fn 但没有进行 groupby。假设我想要对整个进行聚合`dataframe`，即

```
from pandas import *
DF = DataFrame( randn(5,3), index = list( "ABCDE"), columns = list("abc") )
DF.groupby([]).agg({'a' : np.sum, 'b' : np.mean } ) # <--- does not work 
```

而且`DF.agg( {'a' ... } )`也不行。

我的解决方法是`DF['Total'] = 'Total'`先做一个`DF.groupby(['Total'])`，但这似乎有点人为。

有没有人有更清洁的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:36:30.357

它也不是很好，但对于这种情况，如果你传递一个返回 True 的函数，至少它不需要更改`df`：

```
>>> from pandas import *
>>> df = DataFrame( np.random.randn(5,3), index = list( "ABCDE"), columns = list("abc") )
>>> df.groupby(lambda x: True).agg({'a' : np.sum, 'b' : np.mean } )
             a         b
True  1.836649 -0.692655
>>> 
>>> df['total'] = 'total'
>>> df.groupby(['total']).agg({'a' : np.sum, 'b' : np.mean } ) 
              a         b
total                    
total  1.836649 -0.692655 
```

您可以使用各种内置函数来代替，`lambda x: True`但它们不太明确，只会意外工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T15:20:22.377

有一个类似的`DataFrame.aggregate`方法是个好主意。在这里创建一个问题：

[https://github.com/pydata/pandas/issues/1623](https://github.com/pydata/pandas/issues/1623)

# drupal - 特定内容类型的 Drupal 7 hook_menu

> ID：11492216
> 
> 赞同：12
> 
> 时间：2012-07-15T13:14:44.600
> 
> 标签：drupal, drupal-7, drupal-routes

我试图向特定内容类型“abc”添加一个新选项卡，这是代码，但它不起作用，该选项卡显示在所有节点上。有人可以帮忙吗？谢谢！

```
function addtabexample_menu() {
  $items=array();

  $items['node/%node/test'] = array(
  'title' => 'Test',
  'page callback' => 'handle_test',
  'page arguments' => array('node', 1),
  'access arguments' => array('access content'), 
  'type' => MENU_LOCAL_TASK,
  'weight' => 100,
  );
return $items;
}

function handle_test($node){

  $result='hi';
  if ($node->type == 'abc') {
    $result='I am working';
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T15:21:28.537

这`access callback`是决定是否显示选项卡的正确位置，但代码只是单行代码：

```
function addtabexample_menu() {
  $items = array();

  $items['node/%node/test'] = array(
    'title' => 'Test',
    'page callback' => 'handle_test',
    'page arguments' => array('node', 1),
    'access callback' => 'addtabexample_access_callback',
    'access arguments' => array(1), 
    'type' => MENU_LOCAL_TASK,
    'weight' => 100,
  );

  return $items;
}

function addtabexample_access_callback($node) {
  return $node->type == 'abc' && user_access('access content');
} 
```

请记住在更改代码后清除缓存`hook_menu()`以使更改生效。

# ios - 格式化 NSDate 对象更改时区

> ID：11492217
> 
> 赞同：3
> 
> 时间：2012-07-15T13:14:46.340
> 
> 标签：ios, cocoa-touch, nsdate, nsdateformatter

我使用以下代码在用户时区获取当前 NSDate

```
-(NSDate *)getCurrentDateinLocalTimeZone
{
NSDate* sourceDate = [NSDate date];

NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];

NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;

NSDate* destinationDate = [[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate] ;

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
dateFormatter.dateFormat = @"yyyy-MM-dd HH:mm:ss";

return   [dateFormatter dateFromString: [dateFormatter stringFromDate:destinationDate]];
} 
```

在我的应用程序的其他某个点上，我想将日期格式化为“HH：mm”以用于 UI 目的，所以我使用以下方法

```
-(NSString *)formatDate:(NSDate *)date
{
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
dateFormatter.dateFormat = @"HH:mm";
return [dateFormatter stringFromDate:date]; 
} 
```

如果第二种方法的输出比第一种方法的结果移动了 3 小时，我只想更改 NSDate 的格式而不是时间，我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T13:25:30.420

该`getCurrentDateinLocalTimeZone`方法调整时区的日期，使用切断时区的格式字符串对其进行格式化，然后将格式化的字符串解析回来。结果`NSDate`是 UTC 时区（`+0000`in`2012-07-15 16:28:23 +0000`表示 UTC 时间）。该`formatDate:`方法使用`dateFormatter`为本地时区设置的，产生不同的时间。您应该将格式化程序设置为使用 UTC 来获取正确的时间：替换

```
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]]; 
```

和

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]]; 
```

在`formatDate:`方法中。

# validation - 如何在 PHPUnit 中动态设置 cakephp 验证集

> ID：11492222
> 
> 赞同：1
> 
> 时间：2012-07-15T13:15:41.473
> 
> 标签：validation, cakephp, phpunit

在 CakePHP 中，我写了两个模型，一个是 Invoice，另一个是 Product。发票“hasMany”与产品关联。发票有几个验证集，如“validateCreateInvoice”和“validateUpdateInvoice”等......

我正在编写如下所示的 PHPUnit 测试用例来对验证集进行单元测试。那么如何 1）动态设置验证集？2) 验证来自 PHPUnit 的模型和相关模型？

我运行了以下代码，商家电子邮件和产品名称数据验证应该失败。但事实并非如此。错误转储为空。可能是什么问题呢 ？注意：验证规则通过模型保存方法可以正常工作，这意味着验证规则没有问题。

```
App::import('Model', 'Invoice');
App::import('Model', 'Product');   

App::uses('Validation', 'Utility');
App::uses('CakeFixtureManager', 'TestSuite/Fixture');
App::uses('CakeTestFixture', 'TestSuite/Fixture');

require_once 'PHPUnit/Framework/TestCase.php';
require_once 'PHPUnit/Autoload.php';

 class InvoiceTest extends PHPUnit_Framework_TestCase  {

    public $sourceName = 'Invoice'; 

    public function setUp() {
        parent::setUp();
        $this->Invoice=& ClassRegistry::init('Invoice');
        $this->InvoiceValidation =& ClassRegistry::init('Validate');            
    }        

    public function tearDown() {
        parent::tearDown();
        unset($this->Model, $this->Source);
        ConnectionManager::drop($this->sourceName);
    } 

    public function testCreate() {      

        $data = array(              
                "merchantEmail" => "stest_1339339519_bizyahoo.com", // not a valid email address
                "payerEmail" => "stest_1340973819_per@yahoo.com",
                "currencyCode" => "USD",
                "paymentTerms" =>  "Net10",             
                "Products" =>array( 
                        0 => array ( 
                                "productName" => "", // product name shouldn't be empty
                                "description" => "From CocaCola",
                                "unitPrice" => 1.56,
                                "quantity" => 1,
                                "taxName" => "Tax1",
                                "taxRate" => 7

                              ),
                        1 => array (
                                "productName" => "Pepsi1",
                                "description" => "From Pepsi",
                                "unitPrice" => 1.65,
                                "quantity" => 1,
                                "taxName" => "Tax2",
                                "taxRate" => 7
                        ),
                    ),
                );  

        //Create Invoice
        $invoice=new Invoice();
        $invoice->set($data);
        $this->Invoice->setValidation('validateCreateInvoice');     
        $errors = $this->Invoice->validates($data); // validation should fails because of invalid merchant email address
            Debugger::dump($errors); // output is null
            $errors1 = $this->Invoice->validateAssociated($data);   // validation should fail because product name is empty         
            Debugger::dump($errors1); // output is null

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:50:52.787

您似乎使用了面包店的非核心多重验证行为，而测试套件似乎不尊重该行为

我会放弃多重验证行为，转而支持标准验证的标准“on”属性：http: [//book.cakephp.org/2.0/en/models/data-validation.html#on](http://book.cakephp.org/2.0/en/models/data-validation.html#on)

# concurrency - Web 应用程序中并发问题的重要性

> ID：11492223
> 
> 赞同：0
> 
> 时间：2012-07-15T13:16:14.200
> 
> 标签：concurrency

关于这个[问题](https://stackoverflow.com/questions/11487822/concurrency-issues-in-web-applications)，是否总是有必要拥​​有完美的并发安全 Web 应用程序，或者开发人员是否可以让一些可能的并发问题不予处理（例如，当不涉及金钱时），因为无论如何它们发生的可能性非常低。最佳做法是什么？

注意：如果我说并发问题，我的意思是脚本的重叠执行引起的问题。我并不是说多用户问题（例如时间戳解决方案的经典丢失更新）导致这些事情的概率非常重要，我很确定这里的最佳做法是始终对待它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:28:18.530

如果您要在 Web 服务器上运行代码，则应始终以可以同时运行多个副本的方式编写代码。

这真的没那么难。在大多数情况下，只需要围绕状态修改操作的数据库事务（或使用锁定文件，或解决此问题的任何其他众所周知的解决方案）。

注意：如果您所做的只是读取数据，则不存在并发问题。

# spring-mvc - 带有瓷砖 2 的 Spring mvc 3 给出 400 错误请求

> ID：11492225
> 
> 赞同：0
> 
> 时间：2012-07-15T13:16:46.617
> 
> 标签：spring-mvc, bad-request, apache-tiles

我正在尝试将 Apache Tiles 添加到我正在玩的一个简单的 Spring MVC webapp 中，但我似乎无法让它工作（它在没有 Tiles 的情况下工作）。我提出的任何请求都会返回 400 个错误请求，日志中不会出现任何内容（甚至设置为 DEBUG），所以我不确定从哪里开始调试。据我所知，控制器映射的方法永远不会被调用，因为那里有登录并且它没有出现在日志中（加上在此之前我会从 spring 中获得很多关于解析到控制器的映射的调试信息它之前实际上被称为 - 现在没有出现）。

我的配置文件如下（都在/WEB-INF/下）：web.xml：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <display-name>myapp</display-name>    

    <!-- Enable escaping of form submission contents -->
    <context-param>
        <param-name>defaultHtmlEscape</param-name>
        <param-value>true</param-value>
    </context-param>        
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:META-INF/spring/applicationContext*.xml</param-value>
    </context-param>

    <filter>
        <filter-name>CharacterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter>
        <filter-name>HttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>HttpMethodFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- Handles Spring requests -->
    <servlet>
        <servlet-name>myapp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>myapp</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>10</session-timeout>
    </session-config>
</web-app> 
```

myapp-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd                 http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd                 http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <!-- The controllers are autodetected POJOs labeled with the @Controller 
        annotation. -->
    <context:component-scan base-package="com.myapp.controller"
        use-default-filters="false">
        <context:include-filter expression="org.springframework.stereotype.Controller"
            type="annotation" />
    </context:component-scan>

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources -->
    <mvc:resources location="/resources/" mapping="/resources/**" />

    <!-- Allows for mapping the DispatcherServlet to "/" by forwarding static 
        resource requests to the container's default Servlet -->
    <mvc:default-servlet-handler />

    <mvc:annotation-driven />

    <bean id="tilesConfigurer"
        class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles.xml</value>
            </list>
        </property>
    </bean>    
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.tiles2.TilesView" />
    </bean>
</beans> 
```

瓷砖.xml

```
<tiles-definitions>    
    <definition name="product_detail" template="/WEB-INF/layout/detail.jsp">
        <put-attribute name="header" value="/WEB-INF/view/header.jsp" />
        <put-attribute name="banner" value="" />
        <put-attribute name="body" value="/WEB-INF/view/product.jsp" />
        <put-attribute name="footer" value="/WEB-INF/view/footer.jsp" />
    </definition>
</tiles-definitions> 
```

布局只包含一个 div 用于包装标签的每个部分。所有视图都包含简单的代码，例如标题或 div。

对于控制器 ProductController.java：

```
@Controller
@RequestMapping("/product")
public class ProductController {

    protected Logger logger = Logger.getLogger(getClass());

    @Autowired
    private ProductService productService;

    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public ModelAndView getProduct(@PathVariable Long id) {
        logger.info("GET product " + id);
        Product product = productService.find(id);
        ModelAndView mv = new ModelAndView("product_detail", "product", product);
        return mv;
    }
} 
```

使用 maven 嵌入式 tomcat 插件部署它并转到 localhost:8080/myapp/product/1 只会给出 HTTP 400 代码，而没有任何其他迹象表明出现问题。数据库中有一个具有该 ID 的产品，并且从控制器向下的所有内容都可以正常工作，就像我在添加图块之前尝试过的那样。

很抱歉代码丢失，但我现在无法让它工作一段时间，我不知道还有什么可以尝试或从哪里开始调试。

当返回 400 错误请求时，是否有某种方法可以强制记录问题所在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:33:46.807

您在 servlet 配置中缺少对 myapp-servlet.xml 的引用。

```
<!-- Handles Spring requests -->
<servlet>
    <servlet-name>myapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/spring/myapp-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>myapp</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

# svn - SVN Remote Repository 可从一台机器访问，但不能从另一台机器访问

> ID：11492230
> 
> 赞同：1
> 
> 时间：2012-07-15T13:17:44.100
> 
> 标签：svn, networking

我在 Windows 2008 R2 服务器上设置了 SVN 服务器
我可以从本地机器浏览/签出 SVN 存储库，但我的同事不能从他的机器上（SVN“无法连接到服务器”消息 TortoiseSVN &来自 Firefox 的连接超时）

但是，两台本地机器都可以 Telnet 和 http 浏览远程服务器，并且两台防火墙都被禁用

*PS：这本身不是编程问题，所以我提前道歉。但我认为所有阅读本文的编码人员都可能遇到过类似的问题，因此此处找到的反馈可能是明智的。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:22:26.870

事实证明，有问题的工作站位于主机构建防火墙的后面，并且端口在该级别被阻止。*叹...*

# php - 允许用户使用给定变量自定义布局

> ID：11492235
> 
> 赞同：1
> 
> 时间：2012-07-15T13:18:29.533
> 
> 标签：php

假设我有这个数组：

```
$meta = array(
    'name' => 'John Doe',
    'age' => 16,
    'e-mail' => 'john.doe@doedoe.com'
); 
```

如何允许用户使用这些变量自定义布局？（并且能够捕获错误）。这是我目前的想法：

```
extract($meta,EXTR_OVERWRITE);
$string = "Hi, I am $name. This is an $undefined_variable"; 
```

但是它无法捕获未定义的变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:20:37.443

这个怎么样？

```
$string = "Hi, I am {{name}}. This is an {{undefined_variable}}";
foreach ($meta as $key => $value) {
    $string = str_replace('{{' . $key . '}}', $value, $string);
} 
```

或者，如果您可以将`{{name}}`等直接作为 中的键`$meta`，则：

```
$string = "Hi, I am {{name}}. This is an {{undefined_variable}}";
$string = str_replace(array_keys($meta), array_values($meta), $string); 
```

`$meta`或者，`{{...}}`如果您不能将它们放在原始密钥中，您可以创建并缓存一个密钥：

```
$metaTokens = array();
foreach ($meta as $key => $value) {
    $metaTokens['{{' . $key . '}}'] = $value;
} 
```

然后，如果你想简单地隐藏未定义的变量，现在你应该已经填写了所有已定义的变量，所以里面的其他任何东西都`{{..}}`应该是一个未定义的变量：

```
$string = preg_replace('/{{.+?}}/', '', $string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:27:35.767

您可以根据[这篇文章](http://codeangel.org/articles/simple-php-template-engine.html)创建一个模板类（我尽量避免使用魔法方法）：

```
class Template 
{
    protected $parameters  = array();
    protected $filename = null;

    public function __construct( $filename )
    {
        $this->filename = $filename;
    }

    public function bind($name, $value) 
    {
        $this->parameters[$name] = $value;
    }

    public function render() 
    {
        extract( $this->parameters );
        error_reporting(E_ALL ^ E_NOTICE);
        ob_start();
        include( $this->filename );
        error_reporting(~0); // -1 do not work on OSX
        return ob_get_clean();
    }

} 
```

基本上，您在渲染输出之前禁用警告，然后再次启用它们。即使某些变量尚未定义，这也可以让您渲染文件。

# facebook - 用于提取人的基本（公共）个人资料信息的 Facebook API

> ID：11492236
> 
> 赞同：0
> 
> 时间：2012-07-15T13:18:30.093
> 
> 标签：facebook, api, profile, public

实际上，我想通过姓名或电子邮件 ID 在 Facebook 上提取一个人的基本（公共个人资料）信息，而无需任何类型的身份验证。那么，谁能告诉我如何使用 Java 编程实现这一点的详细过程，我想要 XML 格式的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:24:32.993

```
https://graph.facebook.com/4 
```

会给你一个类似于 -

```
{
   "id": "4",
   "name": "Mark Zuckerberg",
   "first_name": "Mark",
   "last_name": "Zuckerberg",
   "link": "http://www.facebook.com/zuck",
   "username": "zuck",
   "gender": "male",
   "locale": "en_US"
} 
```

这将为您提供有关用户的所有公共信息。您得到的响应是一个 JSON 对象。如果你想要它在 XML 中，你必须手动转换它。

**请注意，并非所有 USER_ID 都会返回信息。这完全取决于用户的隐私设置。**

* * *

我不了解 JAVA，所以我不能给你和代码示例，但你可以使用任何你觉得舒服的方法向那个 URL 发出一个简单的 HTTP 请求......

# c++ - Stack.pop 内存管理

> ID：11492237
> 
> 赞同：1
> 
> 时间：2012-07-15T13:18:38.113
> 
> 标签：c++, memory-leaks, clr, managed-c++

```
Stack^ my_stack=gcnew Stack;
my_class^ a=gcnew my_class;
my_stack->Push(a);
my_stack->Push(gcnew my_class);
my_stack->Pop(); //will it cause memory leak?
a=gcnew my_class;
my_stack->Pop(); //will it cause memory leak? 
```

抱歉，代码没有经过测试。但我想你们都明白我的意思。当您弹出指针时，您会丢失指针；内存会被释放吗？还有一种方法`my_stack->Clear()`也让我感到困惑。

任何帮助，将不胜感激。

**编辑：**

@康拉德鲁道夫

Pop() 方法会调用析构函数本身还是 clr 会自动检索内存空间？

Konrad Rudolph 还建议我考虑只使用泛型集合类。

对于新的`System::Collections::Generic::Stack<T>` 它说'删除并返回堆栈顶部的对象'如果是这样，如果我之前有另一个指向对象的指针怎么办？那是，

```
my_class^ a=gcnew my_class;
Stack<my_class>^ my_stack=gcnew Stack<my_class>;
my_stack->Push(a);
my_stack->Pop(); //what is a now? nullptr? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:25:21.073

Pop 不调用析构函数。你可以使用类似的东西

```
T *topObject = my_stack->top();
my_stack->pop();
delete topObject; 
```

# spring - 宁静服务出错

> ID：11492239
> 
> 赞同：0
> 
> 时间：2012-07-15T13:18:48.953
> 
> 标签：spring, rest, jersey, restful-architecture

致力于宁静的 Web 服务。调用 rest ful 服务时出现以下错误，但集成测试适用于相同的请求。

错误：严重：2012 年 7 月 15 日上午 8:59:10 org.apache.cxf.jaxrs.utils.JAXRSUtils readFromMessageBody 严重：将输入流反序列化为目标类 UserActivity 时出错，内容类型：*/* 2012 年 7 月 15 日 8:59:10 AM org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper toResponse 警告：WebApplicationException 已被捕获：由于输入结束，没有要映射到对象的内容

JsonInput 是：{"pageURL":"https://google.com,"activityType":"LOGIN","userGUID":"105"}

如果我用测试客户端尝试相同的输入，它正在工作......知道这里发生了什么，我错过了任何图书馆吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:24:40.153

您在 google.com URL 后缺少引号，因此 JSON 格式不正确。

应该：

```
{"pageURL":"https://google.com","activityType":"LOGIN","userGUID":"105"} 
```

您始终可以使用免费工具验证您的 JSON，例如：

*   见：http: [//jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:32:38.620

解决了。​​。

我没有将正确的请求值传递给 Jersey 客户端。

谢谢

# android - Android中基于视觉的手势识别

> ID：11492243
> 
> 赞同：0
> 
> 时间：2012-07-15T13:19:02.857
> 
> 标签：android, computer-vision, augmented-reality

我想知道在哪里可以使用 Android 相机跟踪手势（带有颜色标记）？我看到[了 Qualcomm 的 SDK](https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv)。但我没有找到与之相关的样本！！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:15:48.933

Qualcomm SDK 附带一个示例应用程序：[https ://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv/compiling-and-running-fastcv-sample-app](https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv/compiling-and-running-fastcv-sample-app)

# javascript - javascript：在嵌套对象中定义对父对象的引用

> ID：11492245
> 
> 赞同：2
> 
> 时间：2012-07-15T13:19:03.227
> 
> 标签：javascript, javascript-objects

我有以下对象：

```
var myObject = {
    attributes: { name: "dev.pus", age: 29 },
    someInjectedObject: {
        name: "someComponent",
        action: function() {
            // do something
            return this.this.attributes.name; // this surely won't work :(
        }
    }
}; 
```

如您所见，我想从对象的嵌套部分获取 myObject.attributes.name 而不必观察值。

我该怎么做呢？如何定义参考？

**编辑：** 一个简单的 myObject.attributes 是不够的，因为 myObject 更改或更好地分配给一个新变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T13:23:42.153

在对象周围创建一个闭包：

```
var myObject = (function() {
  var result = {
    attributes: { name: "dev.pus", age: 29 },
    someInjectedObject: {
      name: "someComponent",
      action: function() {
        // do something
        return result.attributes.name;
      }
    };
  };
  return result;
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:23:59.530

可以这样`myObject`直接引用：

```
var myObject = {
    attributes: { name: "dev.pus", age: 29 },
    someInjectedObject: {
        name: "someComponent",
        action: function() {
            // do something
            return myObject.attributes.name; // this surely will work :(
        }
    }
};

alert(myObject.someInjectedObject.action());
​ 
```

### [演示](http://jsfiddle.net/9qQWk/)

​</p>

# ocaml - OCaml 项目目录结构

> ID：11492246
> 
> 赞同：5
> 
> 时间：2012-07-15T13:19:03.383
> 
> 标签：ocaml

我想在我的源代码树的不同目录中为两个 .ml 源文件提供相同的名称，但 OCaml 文档指出文件 A.ml 导出为顶层模块 A = struct ... end。如果我有两个文件 X/A.ml 和 Y/A.ml，我如何从 B.ml 引用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:35:26.313

模块可以包含模块，即您可以有模块的层次结构。从 B.ml 的角度来看，可以看到名为`X.A`和的两个模块`Y.A`。它们甚至都可以有一个名为 的函数`foo`，这些函数将被视为`X.A.foo`和`Y.A.foo`。

请注意，如果您`open`同时使用模块`X`和`Y`，则`A`来自的模块`Y`将隐藏`A`来自的模块`X`。

那是从命名空间的角度来看的。现在，关于源代码树。一种方法是拥有这些文件：

*   毫升
*   X/a.ml
*   y.ml
*   是/a.ml

文件 x.ml 是自动生成的，仅包含以下内容：

```
module A = struct
(*The contents of x/a.ml is included here*)
end 
```

同样对于 y.ml 有几个预处理器能够包含一个文件：cpp、camlp4、camlp5、camlmix...

这套自动生成的文件（每次换源都会重新生成）不是很满意，我再看看其他的答案。

你也可以看一下`ocamlc -pack`，但是我很久以前尝试过的时候出现了`ocamldoc`无法拥有 x/a.ml 和 y/a.ml 的问题。所以在你选择一个工具之前检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:56:17.393

您不能将具有相同名称的模块链接到同一程序中。例如，标准库的扩展，如电池和核心，被迫给标准模块一个不同的名字。在电池中，列表模块称为 BatList。然后，他们提供了一个包装模块 Batteries，在该模块中，该模块通过 do 重命名`module List = BatList`。该模块的总体路径是`Batteries.List`，因此与标准库的顶层没有冲突`List`。最后，使用 Batteries 和 Core 的推荐方法是使用`open Batteries`and `open Core`，从而使您可以访问模块名称下的其他列表功能`List`。

因此，唯一的选择是重命名你的模块，但你可以通过两种方式来做到这一点：

*   更改模块的基本名称，例如称它们为 A 和 B。

*   将模块放在另一个模块下，例如将它们命名为 XA 和 YA 如果要保留当前目录结构，可以使用 OCaml 的 -pack 选项。就我个人而言，我觉得这个选项限制性太强，最终总是*手动打包*，即上面描述的电池和核心使用的技术。

# iphone - iPhone中OpenCV眼睛检测器的参数

> ID：11492247
> 
> 赞同：1
> 
> 时间：2012-07-15T13:19:26.207
> 
> 标签：iphone, opencv, face-detection, eye-detection

我正在尝试使用 iPhone 将 3d 玻璃映射到脸上。我正在使用以下 OpenCV 眼睛检测。然而，眼睛检测不是很可靠。稍微转一下脸，或者当眼睛变得有点狭窄时，如果我低头看着相机，眼睛检测不起作用。即使在正面，它也只能在一半的帧中检测到。我读过很多地方，调整某些参数可以帮助或预处理图像。但是我无法获得正确的组合。以下是我正在使用的预处理和参数。如果有人可以建议/分享更好的参数，请提供帮助。谢谢

`pixelBuffer`从-image获取灰度图像。然后`processFrame`被称为：

```
 if (format == kCVPixelFormatType_420YpCbCr8BiPlanarFullRange) {
            // For grayscale mode, the luminance channel of the YUV data is used
            CVPixelBufferLockBaseAddress(pixelBuffer, 0);
            void *baseaddress = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, 0);

            cv::Mat mat(videoRect.size.height, videoRect.size.width, CV_8UC1, baseaddress, 0);

            [self processFrame:mat videoRect:videoRect videoOrientation:videoOrientation];

            CVPixelBufferUnlockBaseAddress(pixelBuffer, 0); 
        }
        else if (format == kCVPixelFormatType_32BGRA) {
            // For color mode a 4-channel cv::Mat is created from the BGRA data
            CVPixelBufferLockBaseAddress(pixelBuffer, 0);
            void *baseaddress = CVPixelBufferGetBaseAddress(pixelBuffer);

            cv::Mat mat(videoRect.size.height, videoRect.size.width, CV_8UC4, baseaddress, 0);

            [self processFrame:mat videoRect:videoRect videoOrientation:videoOrientation];

            CVPixelBufferUnlockBaseAddress(pixelBuffer, 0);    
        }
        else {
            NSLog(@"Unsupported video format");
        } 
```

初始化分类器：

```
 NSString * const kFaceCascadeFilename = @"haarcascade_frontalface_alt2";
    NSString * const kEyesCascadeFilename = @"haarcascade_eye"; 
```

processFrame：进行检测

```
- (void)processFrame:(cv::Mat &)mat videoRect:(CGRect)rect videoOrientation:(AVCaptureVideoOrientation)videOrientation
{
    // Shrink video frame to 320X240
    cv::resize(mat, mat, cv::Size(), 0.5f, 0.5f, CV_INTER_LINEAR);
    rect.size.width /= 2.0f;
    rect.size.height /= 2.0f;

    // Rotate video frame by 90deg to portrait by combining a transpose and a flip
    // Note that AVCaptureVideoDataOutput connection does NOT support hardware-accelerated
    // rotation and mirroring via videoOrientation and setVideoMirrored properties so we
    // need to do the rotation in software here.
    cv::transpose(mat, mat);
    CGFloat temp = rect.size.width;
    rect.size.width = rect.size.height;
    rect.size.height = temp;

    if (videOrientation == AVCaptureVideoOrientationLandscapeRight)
    {
        // flip around y axis for back camera
        cv::flip(mat, mat, 1);
    }
    else {
        // Front camera output needs to be mirrored to match preview layer so no flip is required here
    }

    videOrientation = AVCaptureVideoOrientationPortrait;

    // Detect faces
    std::vector<cv::Rect> faces;
    std::vector<cv::Rect> eyes;

    _faceCascade.detectMultiScale(mat, faces, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, cv::Size(30, 30));

    // We will usually have only one face in frame
    if (faces.size() >0){
        cv::Mat faceROI = mat(faces.front());
        _eyesCascade.detectMultiScale( faceROI, eyes, 1.15, 3.0, 0 , cv::Size(30, 30));
    }

    // Dispatch updating of face markers to main queue
    dispatch_sync(dispatch_get_main_queue(), ^{
        [self displayFaces:faces eyes:eyes
             forVideoRect:rect
          videoOrientation:videOrientation];    
    });
} 
```

# jenkins - 有没有办法归档指向 Jenkins 存储库之外的符号链接？

> ID：11492249
> 
> 赞同：2
> 
> 时间：2012-07-15T13:19:47.787
> 
> 标签：jenkins

我有一个 Subversion 存储库，它使用符号链接来引用不属于存储库的文件/目录。

例如：

```
logs/  --->   /somewhere/else/in/filesystem/logs/ 
```

就 Subversion 而言，这没有问题：它们在安装在有效系统上时变得有效。

但是，在 Jenkins 中归档工件时，由于归档器试图解析符号链接，这会引发*FileNotFoundException 。*

理想情况下，我希望詹金斯在创建档案时**保留符号链接。**

这可能吗？

两个相关的问题报告：

*   [https://issues.jenkins-ci.org/browse/JENKINS-5993](https://issues.jenkins-ci.org/browse/JENKINS-5993)
*   [https://issues.jenkins-ci.org/browse/JENKINS-5597](https://issues.jenkins-ci.org/browse/JENKINS-5597)

如果没有，替代方法似乎是从存储库中**删除**符号链接并将代码更改为不需要它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T21:07:26.247

有一个解决方法：为您希望 Jenkins 归档的文件创建一个归档文件（如 tar 归档）。tar 存档能够将符号链接存储为符号链接。

我自己总是为我希望 Jenkins 存储的文件创建 tar 档案。它还保留了对 Jenkins 来说似乎很难的文件权限。

缺点是您需要在使用它的工作中解压缩存档，但这很容易。

如果您还压缩 tar 存档，则存档的工件不会占用太多空间。

# windows-phone-7.1 - 未显示横幅

> ID：11492255
> 
> 赞同：0
> 
> 时间：2012-07-15T13:20:49.423
> 
> 标签：windows-phone-7.1, ads

我开始使用广告控制，但试图让它发挥作用我快疯了。
我从[Microsoft Ad Control Sample复制](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)*了 PivotPage.xaml*并将其设置为我的应用程序的起始页，但未显示广告控件（我无法看到横幅）；如果我尝试运行 Microsoft 应用程序，则会显示横幅。

所以我在 pubCenter 上注册了我的应用程序，我得到了一个 appId 和一个 unitId 并尝试在我的应用程序中使用它们，但结果是一样的：没有横幅！如果我尝试在 Microsoft 应用中使用我的 ID，则会显示测试横幅。

为什么使用 Microsoft 示例我可以看到横幅，而在我的应用程序中使用相同的页面却不能？
为什么使用我的 ID，Microsoft 应用程序没有显示正确的横幅？

这是 XAML

```
 <!--Pivot Control-->
    <controls:Pivot Grid.Row="0" Title="Ad Control Sample">

        <!--Pivot item one-->
        <controls:PivotItem Header="piv 1">
        </controls:PivotItem>

        <!--Pivot item two-->
        <controls:PivotItem Header="piv 2">
        </controls:PivotItem>

        <!--Pivot item three-->
        <controls:PivotItem Header="piv 3">
        </controls:PivotItem>

    </controls:Pivot>

    <StackPanel Grid.Row="1" VerticalAlignment="Bottom" >
        <TextBlock Text="This is the same ad." 
                   TextWrapping="Wrap" 
                   HorizontalAlignment="Stretch" 
                   TextAlignment="Center" />
        <my:AdControl Name="adControl1" 
                      ApplicationId="test_client" 
                      AdUnitId="Image480_80" 
                      HorizontalAlignment="Center" 
                      Width="480" Height="80" />
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:04:26.923

我终于设法解决了我的问题，我想分享解决方案。我为广告控件
添加了一个事件处理程序并阅读我意识到我的清单（*WMAppManifest.xml*）丢失了`ErrorOccurred``Microsoft.Advertising.AdErrorEventArgs e`

 *```
<Capability Name="ID_CAP_IDENTITY_USER" />
<Capability Name="ID_CAP_MEDIALIB" />
<Capability Name="ID_CAP_WEBBROWSERCOMPONENT" /> 
```*

# vim - 查找光标下单词的出现次数

> ID：11492258
> 
> 赞同：3
> 
> 时间：2012-07-15T13:22:06.677
> 
> 标签：vim

我很喜欢用`#`它来突出显示和搜索单词（变量），但如果我可以点击一个命令来简单地告诉我当前文件中出现了多少次，我会很高兴。我发现了以下内容

```
:%s/dns_name_change_flag/&/gn 
```

但是打字太多了。有没有可能映射上面的单行以使用光标下的单词？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T14:05:56.813

我不知道没有`execute`. 以下映射`F5`使用`<cword>`和单词边界模式（`\\<`和`\\>`）计算光标下单词的出现次数：

```
:map <f5> :execute ":%s@\\<" . expand("<cword>") . "\\>\@&@gn"<CR> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T13:57:31.810

```
:map <F2> "zyiw:exe "%s/".@z."//gn"<CR> 
```

将此行（不带“：”）添加到您的 .vimrc 中，每次启动 vim 时都会映射 F2。

它将“内部单词”拉到 z 寄存器中，然后在整个缓冲区中执行搜索，输出出现次数。

这种方法与[Thor 给出的](https://stackoverflow.com/a/11492536/1521347)方法不同，它还计算单词的出现次数，这些单词本身不是单词，而只是单词的一部分。例如：**寻找 'an' 也会计算 'and'**。

* * *

这也可能有帮助：

“一种快速列出光标下所有出现的单词的方法，然后键入**[I**（在使用 C 等语言时，在此文件和包含的文件中显示包含当前关键字的每一行）。”

来源：http: [//vim.wikia.com/wiki/Word_count](http://vim.wikia.com/wiki/Word_count)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:14:31.863

### 将执行映射到 Grep

您可以将序列映射到外部 grep 命令。例如：

```
:nmap fg :execute '!fgrep --count <cword> %'<CR> 
```

这会将正常模式命令映射到`f``g`. 该命令将在外部进程中对当前文件运行*fgrep ，计算光标下单词的实例。*

### 小警告

这对当前文件而不是当前缓冲区进行操作。您需要确保在`:write`字数准确之前将文件写入磁盘（例如）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T19:13:12.660

我为此编写了一个插件：[SearchPosition](http://www.vim.org/scripts/script.php?script_id=2634)；它提供了当前搜索模式和当前单词/选择的映射，还列出了匹配发生的位置：

```
1 match after cursor in this line, 8 following, 2 in previous lines;
total 10 for /\<SearchPosition\>/ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-09T09:07:29.677

```
:nmap <Leader>* *<C-o>:%s///gn<CR><C-o> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-27T10:16:17.953

我有一个不改变搜索寄存器的功能`@/`

```
fun! CountWordFunction()
    try
        let l:win_view = winsaveview()
        exec "%s/" . expand("<cword>") . "//gn"
    finally
        call winrestview(l:win_view)
    endtry
endfun
command! -nargs=0 CountWord :call CountWordFunction()
nnoremap <F3> :CountWord<CR> 
```

如果你已经搜索过这个词，你可以输入

```
:%~n 
```

# jquery - jQuery Validate 插件不起作用

> ID：11492264
> 
> 赞同：1
> 
> 时间：2012-07-15T13:23:40.250
> 
> 标签：jquery, jquery-validate

这让我发疯了。jQuery 验证插件似乎根本没有做任何事情。这是代码：http: [//jsfiddle.net/pkyGf/](http://jsfiddle.net/pkyGf/)

这是导致错误的验证代码。

```
<script>
    $(function(){
      $('#purchase').validate({
        rules:{
          course:{
            minLength:1
          },
          creditCard: {
            required: true,
            creditCard: true
          },
          expMonth: {
            required: true,
            min: 1,
            max: 12,
            digits: true
          },
          expYear: {
            required: true,
            min: 12,
            max: 60,
            digits: true
          }
        }
      })
    })
  </script> 
```

感谢任何能提供帮助的人。编辑：已解决，见下文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:43:04.710

我想我把它作为一个答案，以防人们想知道。

当实际输入任何输入时（即尝试验证时），就会发生错误。此错误位于验证 js 文件的第 29 行。错误如下： `Uncaught TypeError: Cannot call method 'call' of undefined`。

从您上面的评论看来，这是由于在**minlength**属性上使用了错误的大小写。

# regex - 如何在同一个字符串中匹配多组正则表达式模式？

> ID：11492266
> 
> 赞同：3
> 
> 时间：2012-07-15T13:23:43.807
> 
> 标签：regex, whitespace

我正在针对满足以下要求的字符串构建正则表达式：

1.  该字符串最多包含 5 组字母数字字符。
2.  字符串中的每个集合都由单个空格字符分隔。

例如，我们可以有“asa22d asdcac3”或“Asdcd234 sacasW2 sas1 s sd1”（希望你能看懂）。到目前为止，我有：

```
^[A-z 0-9]\s{0,1} 
```

我没有使用`\w`，因为它允许下划线。这适用于一组字符，但我需要允许五组由空格分隔的相同类型的字符串。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:26:44.273

你还没有说你使用的是什么语言，但这应该为你做：

```
^[A-Za-z0-9]+(\s[A-Za-z0-9]+){0,4}$ 
```

一个单词，后跟最多四个 space-then-word 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:58:49.703

### 您需要的工具

要匹配正则表达式中模式的多个实例，您可以使用正则表达式引擎允许的匹配组、反向引用和区间表达式的任意组合。

### 例子

根据您的示例代码，您的正则表达式引擎显然支持间隔，因此请使用它。这里有两个可以实现目标的例子。

```
# Use POSIX character classes with an interval expression
^([[:alnum:]]+[[:space:]]?){1,5}$

# PCRE expression with intervals
\A(\p{Xan}+\s?){1,5}\Z 
```

# c# - 返回引用不使用 GetValue() 复制

> ID：11492267
> 
> 赞同：0
> 
> 时间：2012-07-15T13:23:57.033
> 
> 标签：c#, object, reflection, reference, copy

在 c# 中使用反射我只需要获取对对象的引用，而不是复制，这可能吗？

```
object data = actualData.GetType().GetProperty(properties[0]).GetValue(actualData, null); 
```

变量数据应该只是参考——如果我改变了里面的东西，我想在actualData变量中执行相同的改变，但它似乎从实际数据中复制值并且任何改变只保留在数据变量中。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:31:21.213

看来您的财产是价值类型。或者它可能是引用类型，但它创建了结果类的新实例而不是重用它。

如果是这种情况，那么恐怕一般都做不到——属性是方法，所以属性的结果值是计算出来的，你无法观察到结果什么时候会改变。

但是，如果您可以更改`actualData`实例的类，那么您可以实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口并在代码中订阅其事件`PropertyChanged`。

如果这不可能，那么您可以记住 ...GetProperty() 的结果，但是每次需要数据时都必须对其调用 GetValue()。

# android - 如何获得 android touch MotionEvent axix 长度？

> ID：11492269
> 
> 赞同：0
> 
> 时间：2012-07-15T13:24:02.930
> 
> 标签：android, touch, touch-event

我是一名 android 初学者程序员。我不知道如何处理 android 运动事件。任何人都可以帮助我使用以下代码。我想在 OnTouchListener.XML 和 .java 上获取 motionEvent 起始位置、结束位置已给出。在此先感谢。
xml代码：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/background2"
    android:gravity="top" >

    <TextView
        android:id="@+id/touch"
        android:background="#00000000"
        android:layout_width="350dp"
        android:layout_height="wrap_content"
        android:layout_above="@+id/tableRow1"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/sidebar" />

< /RelativeLayout> 
```

.java 代码：

```
package remote.bluefy.me;

import android.app.Activity;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class Touchpad extends Activity{

    private Button lclick;
    private Button rclick;
    private View touch;
    private View side;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.touch);

        touch=(View)findViewById(R.id.touch);       

        touch.setOnTouchListener(new OnTouchListener(){

            public boolean onTouch(View v, MotionEvent event) {

                switch(event.getAction())
                {
                case MotionEvent.ACTION_DOWN:
                  //do something
                case MotionEvent.ACTION_MOVE:
                  //do something
                case MotionEvent.ACTION_CANCEL:
                  //do something
                }
                return false;
            }

        });

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:37:30.480

尝试使用这个

```
package remote.bluefy.me;

import android.app.Activity;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class Touchpad extends Activity{

private Button lclick;
private Button rclick;
private View touch;
private View side;
private float startX, startY;
private float endX, endY;
private boolean isDown = false;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.touch);

    touch=(View)findViewById(R.id.touch);       

    touch.setOnTouchListener(new OnTouchListener(){

        public boolean onTouch(View v, MotionEvent event) {

            switch(event.getAction())
            {
            case MotionEvent.ACTION_DOWN:
                 if(isDown == false)
                 {
                 startX = event.getX();
                 startY = event.getY();
                 isDown = true;
                 }
            case MotionEvent.ACTION_UP:
                 endX = event.getX();
                 endY = event.getY();
            }
            return false;
        }

    });

}
} 
```

# perl - 比较两个 UTF-8 文本文件并忽略空白行或全空白行

> ID：11492271
> 
> 赞同：0
> 
> 时间：2012-07-15T13:24:23.683
> 
> 标签：perl, encoding, comparison

我是维护 Kindle(HTML) 和 Open Office 版本的书籍的作者。我有时会忘记对其中一个进行更改，并且文件会出现分歧。

我的过程是从每个文本中复制文本并粘贴到 UTF-8 中的单独文本文件中（使用 TextEdit 中的粘贴和匹配样式），然后执行差分操作。但是，HTML 粘贴会在段落之间添加空行。

我有一个文件差异工具，但它没有忽略空白行的选项。我的想法是编写一个 Perl 脚本来删除空行。但是，该脚本的输出搞砸了特殊字符——如 ndashes、花引号等。我尝试使用 BINMODE 和其他技巧，但无济于事。

我将接受一个指向 MAC OS X 的忽略空白行的免费比较器的指针，或者让 Perl 不搞砸 UTF-8 特殊字符的方法。我正在使用 Perl 5.14。我更喜欢不依赖于新功能的答案，但如果我必须安装新的 Perl，我会的。

更新：

这不起作用：

```
use open IO  => ":encoding(iso-8859-7)";
open(FILE, "From HTML.txt") or die "$!\n";
open(OUT, ">From HTML - no blank lines.txt") or die "$!\n";
while(<FILE>) {
    next if /^\s*$/;
    print OUT $_;
}
close FILE; close OUT; 
```

我也试过打电话`binmode(OUT, ":utf8");`

更新：从另一个 Stackoverflow 问题中尝试了这个提示但没有成功：

```
open(my $fh, "<:encoding(UTF-8)", "filename"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:37:15.737

[GNU diff](http://www.gnu.org/software/diffutils/)有[`-B`/`--ignore-blank-lines`](http://www.gnu.org/software/diffutils/manual/html_node/Blank-Lines.html#Blank-Lines)和[`-b`/`--ignore-space-change`](http://www.gnu.org/software/diffutils/manual/html_node/White-Space.html#White-Space)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T17:27:43.220

错误，“使用开放”表示您的数据*不是*UTF-8。在 FILE 和 OUT 上尝试 binmode？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:39:03.673

我最终使用了 XCode 文本编辑器。通过选择一个换行符并将其粘贴到搜索/替换对话框中，我能够用单个换行符替换所有双换行符。然后我保存了文件并使用了我的比较实用程序。

# c++ - 如何在 C++ 中为私有静态成员编写初始化/清理代码？

> ID：11492272
> 
> 赞同：2
> 
> 时间：2012-07-15T13:24:24.167
> 
> 标签：c++, initialization

使用简单的值没有问题：我们只需在 .cpp 文件中设置它们。

但请考虑以下示例，它需要一些初始化/清理代码：

```
// .h
class MyClass {
...
private:
    static unsigned First1000Primes[1000];
} ; 
```

在 .cpp 文件中，我们要初始化数组，并且需要一些代码。

我们可以在 .cpp 文件中定义一个*类 Initializer*，使用一个填充值的 ctor，并在同一文件中声明一个*静态 Initializer InitAndCleanup* ，因此代码将在启动时运行一次（如果需要，类似地运行 dtor/cleanup 代码） .

这个解决方案的问题是它的“混乱”，因为初始化器必须是 MyClass 的朋友才能访问它的私有部分。

所以我的问题是：有没有更清洁的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T13:27:54.930

改用 a `std::array`。

```
class MyClass {
...
private:
    static std::array<unsigned, 1000> First1000Primes;
} ; 
```

现在初始化的问题是一个简单的 lambda

```
std::array<unsigned, 1000> MyClass::First1000Primes = [&] {
    std::array<unsigned, 1000> primes;
    // fill primes
    return primes;
}(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T13:27:56.657

您可以使用初始化静态的正常方式：

```
unsigned MyClass::First1000Primes[] = {2,3, /*...*/}; 
```

在实现文件中。我可以建议你改用 a`std::vector`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:26:26.507

我想说，就像其他一切一样，这只是封装和包装的问题。

```
struct PrimeArray {
    PrimeArray();   // init here
    PrimeArray(PrimeArray const&) = delete;
    PrimeArray& operator=(PrimeArray const&) = delete;
    ~PrimeArray();  // cleanup here

    unsigned data[1000];
}; 
```

然后使用它：

```
class MyClass {
public:
    // ...
private:
    static PrimeArray const primes;
}; 
```

并像往常一样在 cpp 中初始化：

```
PrimeArray const MyClass::primes{}; 
```

# javascript - 在画布上移动对象

> ID：11492277
> 
> 赞同：0
> 
> 时间：2012-07-15T13:24:57.647
> 
> 标签：javascript, html5-canvas, javascript-objects, keyevent

目前我正在制作 HTML5 Canvas Spaceship 游戏。但我有一个大问题：我为我的宇宙飞船创建了一个类，我想用箭头键移动它。但由于某种原因，它不会移动。

Chrome Inspector 不会显示任何错误，但 Spaceship 仍然不会移动。

我不完全确定，但类中的对象可能存在问题吗？

您可以在我的 Git 上找到项目数据：[https ://github.com/nemoxdelight/First_Game/](https://github.com/nemoxdelight/First_Game/)

另外，对不起我的英语不好，我只是一个需要帮助的德国人；）

这也是我认为问题可能出在的部分：（在 main.js 中）

```
function o_move_paddle(p_event) {
    if(p_event.keyCode == KEY_RIGHT) {
        held1.rechtsTaste = true;
        p_event.preventDefault();
    }
    if(p_event.keyCode == KEY_LEFT) {
        held1.linksTaste = true;
        p_event.preventDefault();
    }
    if(p_event.keyCode == KEY_UP) {
        held1.hochTaste = true;
        p_event.preventDefault();
    }
    if(p_event.keyCode == KEY_DOWN) {
        held1.runterTaste = true;
        p_event.preventDefault();
    }
} 
```

在我的 Heroclass 被创建的 hold.js 中，它应该移动对象：

```
Held.prototype.tasteCheck = function() {
    if(this.hochTaste) {
        this.held_y -= this.speed;
    }
    if(this.rechtsTaste) {
        this.held_x += this.speed;
    }
    if(this.linksTaste) {
        this.held_x -= this.speed;
    }
    if(this.runterTaste) {
        this.held_y += this.speed;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:47:51.890

您的问题是您在游戏的主循环中（重新）创建了您的英雄。因此，每次您的游戏进入循环时，它都会在开始坐标处创建一个新英雄。因此显得一动不动。

这是针对您的问题的快速而肮脏的解决方案。在您的 main.js 中更改“循环”功能，就是这样

```
function loop(){
  clearCanvas();
  level();
  if(!held1)
    held1 = new Held();
  held1.draw();
  feinde_zeichnen();
  // snd.play();
} 
```

你应该在循环开始之前在别处创建你的英雄，并且只创建一次，这样你就可以确定它始终是某个对象。

编辑：

在我忘记之前：您应该重置您在 'o_stop_paddle' 函数中持有的 rechtsTaste、linksTaste、hochTaste 和 runterTaste 变量，否则一旦您松开按键，它就会继续移动，一旦按下所有方向，它就会停止移动它会尝试向各个方向移动，这相当于根本没有移动。

# java - ZK - 根据模型内容将组件添加到 Treeitem

> ID：11492278
> 
> 赞同：0
> 
> 时间：2012-07-15T13:25:05.210
> 
> 标签：java, zk

因此，我想根据当前节点的 AttType 字段添加特定组件（复选框或文本框）。我的 zul 文件如下所示：

```
<tree id="permissionTree" width="100%"
        model="@bind(vm.treeModel)" style="text-align:left;">
        <treecols>
            <treecol label="Item" width="400px" />
            <treecol label="Wert" />
        </treecols>
        <template name="model" var="node">
            <treeitem>
                <treerow>
                    <treecell label="@load(node.data.name)" />

                    <treecell> HERE COMPONENT DEPENDING ON node.data.AttType </treecell>
                </treerow>
            </treeitem>
        </template>
    </tree> 
```

我怎样才能做到这一点？哦，我希望将 Textbox/Checkbox 值作为字符串绑定到我的模型，这将非常好。

感谢您的任何建议。

编辑：我为自己做了一些“解决方法”。因为我只有 3 种可能的输入类型，所以我只是硬编码定义了它们：

```
<tree id="permissionTree" width="100%"
        model="@bind(vm.treeModel)" style="text-align:left;">
        <treecols>
            <treecol label="Item" />
            <treecol label="Wert" />
        </treecols>
        <template name="model" var="node">
            <treeitem open="@bind(node.open)" onClick="@command('expandNode', item=node)">
                <treerow>
                    <treecell label="@load(node.data.name)" />
                    <treecell>
                        <textbox visible="@load(node.data.isTextbox)" value="@bind(node.data.value)" />
                        <textbox visible="@load(node.data.isTextarea)" rows="6" width="300px" value="@bind(node.data.value)" />
                        <checkbox visible="@load(node.data.isCheckbox)" checked="@bind(node.data.checkboxValue)" />
                    </treecell>
                </treerow>
            </treeitem>
        </template>
    </tree> 
```

在 TreeNode 的构造函数中，我根据类型设置 isTextbox/isTextarea/isCheckbox 值。这样模型绑定仍然有效:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:30:50.243

正如您在上一个问题中所问的那样：使用 treeitem 渲染器并在那里添加您需要的项目。我认为绑定不适用于新组件。

# php - 使用 mysqli 包含连接的正确方法

> ID：11492285
> 
> 赞同：2
> 
> 时间：2012-07-15T13:26:07.860
> 
> 标签：php, mysqli

下面是我在 db.php 下的代码

```
 <?php
$con = mysqli_connect('localhost', 'root', '', 'mydb');

/* check connection */
if (!$con) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

?> 
```

在 index.php 下，我将 db.php 和 functions.php 包括为：

```
include("includes/db.php");
include("includes/functions.php"); 
```

functions.php 也使用 db.php 连接。我以前使用mysql时没有问题。但是在我将 mysql 更改为 mysqli 后，我在我的 functions.php 中收到错误“警告：mysqli_query() 期望参数 1 为 mysqli，null given in”。

这是functions.php下有错误的函数：

```
function get_type($r_id){
    $result=mysqli_query($con, "select type from rooms where id=$r_id") or die("select type from rooms where id=$r_id"."<br/><br/>".mysqli_error());
    $row=mysqli_fetch_assoc($result);
    return $row['type'];
} 
```

我的解决方案是在调用 mysqli 的 functions.php 下的每个函数中添加 db.php，例如：

```
function get_type($r_id){
    include("includes/db.php");
    $result=mysqli_query($con, "select type from rooms where id=$r_id") or die("select type from rooms where id=$r_id"."<br/><br/>".mysqli_error());
    $row=mysqli_fetch_assoc($result);
    return $row['type'];
} 
```

我想知道这是否是正确的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:38:19.877

问题是 $con 不适用于您的功能

您可以为每个函数添加另一个参数

```
function get_type($con, $r_id)... 
```

然后将 $con 传递给它

```
include('includes/db.php');
include('includes/functions.php');
$blah = get_type($con, 5); 
```

或者

例如，您可以通过添加这个来使每个函数都可以访问 $ `global $con;`con

```
function get_type($r_id){
    global $con;
    $result=mysqli_query($con, "select type from rooms where id=$r_id") or die("select type from rooms where id=$r_id"."<br/><br/>".mysqli_error());
    $row=mysqli_fetch_assoc($result);
    return $row['type'];
} 
```

我的朋友..是你的选择

（可能还有其他方法可以给这只猫剥皮）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:56:42.537

在函数中设置`$con`全局：

```
function get_type($r_id){
    global $con;
    $result=mysqli_query($con, "select type from rooms where id=$r_id") or die("select type from rooms where id=$r_id"."<br/><br/>".mysqli_error());
    $row=mysqli_fetch_assoc($result);
    return $row['type'];
} 
```

# css - 固定菜单覆盖的锚点

> ID：11492287
> 
> 赞同：0
> 
> 时间：2012-07-15T13:26:16.443
> 
> 标签：css, menu, anchor, fixed

> **可能重复：**
> [HTML 位置：固定页眉和页内锚点](https://stackoverflow.com/questions/4086107/html-positionfixed-page-header-and-in-page-anchors)
> [滚动到固定页眉的锚点，内容隐藏在页眉后面，边距和顶部填充不起作用](https://stackoverflow.com/questions/4835885/scroll-to-anchor-with-fixed-header-content-hidden-behind-header-margin-and-top)

我正在寻求一些帮助。我正在建立一个顶部有固定菜单的网站。我在网站上有一个部分，人们可以点击一年，页面将滚动到该部分（我正在使用锚点）这是问题所在。当您单击年份时，页面会向下滚动到正确的位置，但年份会被菜单覆盖。有没有办法将锚点向下推约 45px/50px 以使菜单不覆盖年份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:53:02.400

您可以将锚放在更高的位置，可能靠近上一部分的底部，以便显示年份。

# ruby-on-rails - 如何拥有基于语言环境/tld 的 url/路由？

> ID：11492290
> 
> 赞同：1
> 
> 时间：2012-07-15T13:26:42.980
> 
> 标签：ruby-on-rails, internationalization

有没有办法为每个语言环境/tld 设置不同的 URL（尤其是出于 SEO 原因）？

所以说，如果我通过 mysite.us 来，我可以：

[http://mysite.com/some-nice-url](http://mysite.com/some-nice-url)

如果通过 mysite.org，我可以：

[http://mysite.fr/another-very-nice-url](http://mysite.fr/another-very-nice-url)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:58:31.027

你可以做的是：

```
class ApplicationController < ActionController::Base
  ..
  before_filter :domain_locale
  protected
    def domain_locale
      I18n.locale = request.host.split('.').last
    end

  ...
end 
```

当然，您可以在`domain_locale`.

因此，对于您的 routes.rb，您可以添加如下约束：

```
match 'soem_nice-url', :to => 'nice#some', :constraints => {:host => 'mysite.com'}
match 'soem_nice-url', :to => 'nice#another', :constraints => {:host => 'mysite.fr'} 
```

# mysql - ST_Distance_Spheroid 的 MySQL GeoSpatial 函数？返回 GLength 类型中使用的度量标准？

> ID：11492294
> 
> 赞同：1
> 
> 时间：2012-07-15T13:27:17.127
> 
> 标签：mysql, geolocation, geospatial, latitude-longitude, geo

> *   MySQL 的 GeoSpatial Support 中是否有 ST_Distance_Sphere、ST_Distance_Spheroid 等效函数？
>     
>     
> *   如果没有，有什么方法可以模仿吗？
>     
>     
>     
>     * * *
>     
>     
> *   GLength（LineString 的长度）的返回类型中使用的度量是什么？
>     
>     
> *   [GLength](http://dev.mysql.com/doc/refman/5.0/en/geometry-property-functions.html#function_glength)的手册说*GLength() 是一个非标准名称。它对应于 OpenGIS Length() 函数。*但我找不到 OpenGIS Length() 的任何文档。我发现的只是[ST_Length](http://www.postgis.org/docs/ST_Length.html)他们是一样的吗？
>     
>     
>     
>     * * *
>     
>     
> *   另外为了准确性，我是否需要指定 SRID(4326)？我如何在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:48:03.877

自 MySql 5.1 以来，提供了 GIS 函数**distance_sphere()**和**distance_spheroid()**函数。有参数[说明](http://www.lenzg.net/archives/220-New-UDF-for-MySQL-5.1-provides-GIS-functions-distance_sphere-and-distance_spheroid.html)以及如何使用它们。

*GLength()*函数返回的长度可以是坐标所具有的任一单位。因此，如果坐标是以度为单位的，那么以度为单位的长度度量就没有意义。为了解决这个问题，使用了投影。

对于 WGS84 投影 SRID = 4326，但对于球形墨卡托投影，SRID = 900913，这与 Google 地图使用的投影兼容。球形墨卡托投影墨卡托投影使用米，因此 GLength 函数将以米为单位返回长度。[这段](http://www.wrightopia.com/tag/mysql/)话对MySql中的投影很有帮助。

# c# - 将 XML 编码的 HTML 加载到 WebView 控件中

> ID：11492295
> 
> 赞同：0
> 
> 时间：2012-07-15T13:27:32.397
> 
> 标签：c#, html, xml, microsoft-metro

我有一些编码为 XML 的 HTML，例如：

```
html = "this is a test &lt;/a&gt; test &lt;em&gt;test2&lt;/em&gt; ... " 
```

因此，当我尝试将其加载到`WebView`控件中时，它无法正确呈现 HTML：

```
myWebView.NavigateToString(html); 
```

为了清楚起见，我不是以这种方式创建这个 HTML，而是坚持下去。有没有办法将它呈现给控件，或者先将其转换为标准 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:32:27.220

```
string html = HttpUtility.HtmlDecode("this is a test &lt;/a&gt; test &lt;em&gt;test2&lt;/em&gt; ... "); 
```

# c# - 四元数到欧拉角算法 - 如何转换为“Y = Up”和左右手之间？

> ID：11492299
> 
> 赞同：9
> 
> 时间：2012-07-15T13:27:57.877
> 
> 标签：c#, math, quaternions

我有一个在四元数和欧拉角之间转换的算法。

```
 public static Vector3 ToEulerAngles(this Quaternion q)
    {
        // Store the Euler angles in radians
        Vector3 pitchYawRoll = new Vector3();

        double sqw = q.W * q.W;
        double sqx = q.X * q.X;
        double sqy = q.Y * q.Y;
        double sqz = q.Z * q.Z;

        // If quaternion is normalised the unit is one, otherwise it is the correction factor
        double unit = sqx + sqy + sqz + sqw;
        double test = q.X * q.Y + q.Z * q.W;

        if (test > 0.4999f * unit)                              // 0.4999f OR 0.5f - EPSILON
        {
            // Singularity at north pole
            pitchYawRoll.Y = 2f * (float)Math.Atan2(q.X, q.W);  // Yaw
            pitchYawRoll.X = PI * 0.5f;                         // Pitch
            pitchYawRoll.Z = 0f;                                // Roll
            return pitchYawRoll;
        }
        else if (test < -0.4999f * unit)                        // -0.4999f OR -0.5f + EPSILON
        {
            // Singularity at south pole
            pitchYawRoll.Y = -2f * (float)Math.Atan2(q.X, q.W); // Yaw
            pitchYawRoll.X = -PI * 0.5f;                        // Pitch
            pitchYawRoll.Z = 0f;                                // Roll
            return pitchYawRoll;
        }
        else
        {
            pitchYawRoll.Y = (float)Math.Atan2(2f * q.Y * q.W - 2f * q.X * q.Z, sqx - sqy - sqz + sqw);       // Yaw
            pitchYawRoll.X = (float)Math.Asin(2f * test / unit);                                             // Pitch
            pitchYawRoll.Z = (float)Math.Atan2(2f * q.X * q.W - 2f * q.Y * q.Z, -sqx + sqy - sqz + sqw);      // Roll
        }

        return pitchYawRoll;
    } 
```

此方法仅适用于 Z 轴朝上的右手笛卡尔坐标系。

为了使 Y 轴指向上方而不是 Z，我会进行哪些更改？（交换 X 和 Z 有用吗？）

如何适应左手坐标系？

编辑：

```
public static Quaternion CreateFromYawPitchRoll(float yaw, float pitch, float roll)
{
float num = roll * 0.5f;
float num2 = (float)Math.Sin((double)num);
float num3 = (float)Math.Cos((double)num);
float num4 = pitch * 0.5f;
float num5 = (float)Math.Sin((double)num4);
float num6 = (float)Math.Cos((double)num4);
float num7 = yaw * 0.5f;
float num8 = (float)Math.Sin((double)num7);
float num9 = (float)Math.Cos((double)num7);
Quaternion result;
result.X = num9 * num5 * num3 + num8 * num6 * num2;
result.Y = num8 * num6 * num3 - num9 * num5 * num2;
result.Z = num9 * num6 * num2 - num8 * num5 * num3;
result.W = num9 * num6 * num3 + num8 * num5 * num2;
return result;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T13:19:58.283

以下是使用相同定义的 yaw、pitch、roll 的更改方法：

```
public static Quaternion CreateFromYawPitchRoll(float yaw, float pitch, float roll)
{
    float rollOver2 = roll * 0.5f;
    float sinRollOver2 = (float)Math.Sin((double)rollOver2);
    float cosRollOver2 = (float)Math.Cos((double)rollOver2);
    float pitchOver2 = pitch * 0.5f;
    float sinPitchOver2 = (float)Math.Sin((double)pitchOver2);
    float cosPitchOver2 = (float)Math.Cos((double)pitchOver2);
    float yawOver2 = yaw * 0.5f;
    float sinYawOver2 = (float)Math.Sin((double)yawOver2);
    float cosYawOver2 = (float)Math.Cos((double)yawOver2);
    Quaternion result;
    result.X = cosYawOver2 * cosPitchOver2 * cosRollOver2 + sinYawOver2 * sinPitchOver2 * sinRollOver2;
    result.Y = cosYawOver2 * cosPitchOver2 * sinRollOver2 - sinYawOver2 * sinPitchOver2 * cosRollOver2;
    result.Z = cosYawOver2 * sinPitchOver2 * cosRollOver2 + sinYawOver2 * cosPitchOver2 * sinRollOver2;
    result.W = sinYawOver2 * cosPitchOver2 * cosRollOver2 - cosYawOver2 * sinPitchOver2 * sinRollOver2;
    return result;
} 
```

对于`ToEulerAngles`（省略奇点）：

```
pitchYawRoll.Y = (float)Math.Atan2(2f * q.X * q.W + 2f * q.Y * q.Z, 1 - 2f * (sqz  + sqw));     // Yaw 
pitchYawRoll.X = (float)Math.Asin(2f * ( q.X * q.Z - q.W * q.Y ) );                             // Pitch 
pitchYawRoll.Z = (float)Math.Atan2(2f * q.X * q.Y + 2f * q.Z * q.W, 1 - 2f * (sqy + sqz));      // Roll 
```

我进行了以下测试：

```
var q = CreateFromYawPitchRoll(0.2f, 0.3f, 0.7f);
var e = ToEulerAngles(q);
var q2 = CreateFromYawPitchRoll(e.Y, e.X, e.Z); 
```

结果如下；

```
e = (0.3, 0.2, 0.7) //pitch, yaw, roll
q2 = q 
```

资料来源：[维基百科](http://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles)

# c# - DynamicInvoke 和 Invoke 的奇怪行为

> ID：11492300
> 
> 赞同：1
> 
> 时间：2012-07-15T13:28:02.307
> 
> 标签：c#, performance, reflection, delegates, dynamic-invoke

我读[了这篇](https://stackoverflow.com/questions/1116073/can-delegate-dynamicinvoke-be-avoided-in-this-generic-code)文章并尝试做同样的事情，但是在比较 del.DynamicINvoke(args) 与时遇到了一个非常奇怪的行为。德尔（参数）

**更新**

因此，在 Jon 和 usr 评论之后，我现在发布了新的工作代码。

我真的很感激任何帮助！

代码：

```
using System;
using System.Diagnostic;
using System.Threading;

namespace DynamicInvokeVsInvoke {
  public class Program {
    static void Main(string[] args) {
      var objArgs = new object[] {100, 1.2345678 };
      Action<int, double> a = (i, d) => {};
      Action<object[]> action = o => a((int)o[0], (double)o[1]);
      var sw = new Stopwatch();
      sw.Start();
      for (int i = 0; i < 1000; i++)
         a.DynamicInvoke(objArgs);
      Console.WriteLine("Dynamic: " + sw.ElapsedMilliseconds);
      sw.Stop();
      sw = new Stopwatch();
      sw.Start();
      for (int i = 0; i < 1000; i++)
         action(objArgs);
      Console.WriteLine("Invoke: " + sw.ElapsedMilliseconds);
      sw.Stop();
    }
  }
} 
```

**结果：**

当“a”为空方法并且循环运行 1000000 次时，DynamicInvoke 大约需要 4000 毫秒，直接调用需要 20 毫秒

当我放入 Thread.Sleep(20) 并且循环运行 1000 次时，DynamicInvoke 和直接 Invoke 大约需要 20 秒

ps 由于某种原因，我无法从 vs 复制/粘贴，所以如果您看到语法错误，我会手动编写代码，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T07:10:54.730

首先要注意：在查看性能时，请始终确保您正在运行发布/优化的构建，并且在**没有**附加 IDE 的情况下运行它。您通常可以在 Visual Studio 中使用`ctrl`+ `f5`，但如果有疑问：从命令行运行它。

> 当“a”为空方法并且循环运行 1000000 次时，DynamicInvoke 大约需要 4000 毫秒，直接调用需要 20 毫秒

很公平; 我得到 2729ms`DynamicInvoke`和 8ms 的直接调用；但这正是我们所期望的；我们*知道*这`DynamicInvoke`比较慢。但这里的一切都如我们所料。事实上，如果我们纠正`Invoke`不公平地运行*额外级别*的委托调用的事实（我们应该期望这大约使所花费的时间加倍），我们得到：

```
static void Main()
{
    int x = 100;
    double y = 1.2345678;
    var objArgs = new object[] { x, y };
    Action<int, double> a = (i, d) => { };
    var sw = new Stopwatch();
    sw.Start();
    const int loop = 1000000;
    for (int i = 0; i < loop; i++)
        a.DynamicInvoke(objArgs);
    Console.WriteLine("Dynamic: " + sw.ElapsedMilliseconds);
    sw.Stop();
    sw = new Stopwatch();
    sw.Start();
    for (int i = 0; i < loop; i++)
        a(x,y);
    Console.WriteLine("Invoke: " + sw.ElapsedMilliseconds);
    sw.Stop();
} 
```

结果：

```
Dynamic: 2785
Invoke: 3 
```

到目前为止，没有什么意外的。

> 当我放入 Thread.Sleep(20) 并且循环运行 1000 次时，DynamicInvoke 和直接 Invoke 大约需要 20 秒

是的，20ms x 1000 绝对是 20 秒。20ms 的睡眠时间并不准确；我们预计这个数字会有一些差异，当乘以 1000 时会加起来。特别是，睡眠中断不会在每个 CPU 周期触发，所以我们应该*预期*稍微不规则的睡眠周期会吃掉两者之间的差异a`Invoke`和`DynamicInvoke`（每次调用大约 2.75 微秒）。

更改`loop`为 1000 并添加一个`Thread.Sleep(20)`我得到：

```
Dynamic: 20395
Invoke: 20370 
```

同样，这里没有什么令人惊讶的。事实上，由于 a 引入的轻微随机性`Thread.Sleep()`，乘以 1000，我会发现如果`Invoke`偶尔花费比`Dynamic`.

我认为这些数字丝毫没有令人惊讶的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:07:38.950

您的测量设置中有一些东西会产生系统误差。您肯定不会认为使用 DynamicInvoke 可以更快地调用委托的*主体*。它对身体没有影响。

# java - Intellij IDEA 如何管理插件依赖？

> ID：11492301
> 
> 赞同：8
> 
> 时间：2012-07-15T13:28:05.740
> 
> 标签：java, intellij-idea

在使用 Intellij IDEA 插件一段时间后，我注意到具有外部依赖项的插件工作正常，即使这些依赖项没有与插件本身捆绑在一起，也没有在任何地方公开声明。

随机选择一个例子：[GenerateToString](http://plugins.intellij.net/plugin/?idea_ce&pluginId=182)插件依赖于 log4j。但是如果你看一下 jar 文件，你会发现它只包含它自己的类以及一些资源（图像和 html 文件）和元数据（必需的 plugin.xml 和 MANIFEST.MF），这些都没有参考 log4j。并且该 jar 文件是您安装插件所需的唯一内容。

这怎么可能？IDEA 如何管理这些依赖关系，使其在运行时不会抛出 a`ClassNotFoundException`或类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T14:12:00.133

IDEA 使用自定义类加载器，如果在插件分发​​中找不到所需的类，则会在`IDEA_HOME/lib`目录下的所有 jar 中进行搜索。

# css - 具有固定顶部和相对左侧的菜单

> ID：11492305
> 
> 赞同：2
> 
> 时间：2012-07-15T13:28:32.277
> 
> 标签：css

facebook appcenter 菜单的顶部和相对左侧是固定的。看起来它是从 javascript 更新的。有谁知道这是怎么做到的吗？或者如果有这样的插件？我这辈子都找不到。

[http://www.facebook.com/appcenter/?from_bookmark=1](http://www.facebook.com/appcenter/?from_bookmark=1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:40:22.620

位置：固定

[http://www.w3schools.com/cssref/playit.asp?filename=playcss_position&preval=fixed](http://www.w3schools.com/cssref/playit.asp?filename=playcss_position&preval=fixed)

[这个小提琴使用 jQuery http://jsfiddle.net/Tws2W/](http://jsfiddle.net/Tws2W/)演示了一个具有动态“左”值的固定元素。

感兴趣的代码：

```
$(window).resize(function() 
{
  $('#fixed').css('left', Math.max(($(window).width() - 400), 0) + 'px');
});​ 
```

# ruby - 从 Rack 请求中确定 HTTP 端口

> ID：11492306
> 
> 赞同：1
> 
> 时间：2012-07-15T13:28:38.310
> 
> 标签：ruby, rack

我正在开发一个 Sinatra 网络应用程序，我想在那里规范化和绝对化许多 URL。为此，我使用了 Rack::Request 对象：

```
before do
  @cached_request = Rack::Request.new(env)
end

def absolutize(path)
  u = URI.parse('/%s' % path) # Ensure leading slash is there
  u.scheme =  @cached_request.scheme
  u.host =  @cached_request.host
  u.port =  @cached_request.port
  u.to_s
end 
```

但是，即使我的应用程序在端口 9393 上运行，SERVER_PORT 变量也有 80。我已经检查了 env 对象的相关信息，但它似乎没有关于请求端口的任何信息。

我应该如何从应用程序中找出这个？我没有在机架规范中看到对变量的引用...

到目前为止，我已经尝试在 Puma 和 Webrick 上运行 rackup 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:25:46.263

好的，我想通了。这只发生在通过 MarsEdit 完成的请求中，因为 MarsEdit 不会在`Host`标头中发送端口后缀（几乎所有 Rack 服务器都使用它来推断服务器端口）。

我已经联系 Daniel 并提交了错误报告。

# python - 为什么使用构造 x = (Condition and A or B)？

> ID：11492309
> 
> 赞同：9
> 
> 时间：2012-07-15T13:29:02.973
> 
> 标签：python, python-3.x

[这个问题](https://stackoverflow.com/questions/11491944/better-way-than-using-if-else-statement-in-python)的答案之一是

```
print len(s)>5 and 'y' or 'n'
print(len(s)>5 and 'y' or 'n') #python3 
```

如果 的长度`s > 5`，则`'y'`打印，否则`'n'`为。请解释这是如何/为什么起作用的。谢谢。

我知道这不是推荐的方法，但我想了解它为什么有效。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T13:29:53.087

这是一个老式的黑客。新方法是：

```
print 'y' if len(s) > 5 else 'n' 
```

它起作用的原因是因为“A和B”将评估A，如果为真，将评估为B。但如果A为假，则不需要评估B。同样，“C或D”将评估C，如果为假，将继续评估为 D。

所以“A and B or C”与“(A and B) or C”是一样的。如果 A 为真，它将评估 B。如果 A 为假，则“（A 和 B）”为假，因此它将评估 C。

正如 Voo 在评论中指出的那样， A 的值不必是`True`or `False`，而是任何表达式，并且将被 Python 的规则解释为布尔值（0、None 和空容器为假，其他一切都为真）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-01T12:33:00.907

-- 逻辑运算符的优先级从左到右。

-- 如果 first 为 True，OR 运算符不检查第二个条件。

所以你的代码首先检查是否

```
 len(s)>5 and 'y' 
```

这返回 True，它不检查 OR 的第二个条件，因此打印它。只有当它变为假时，才会检查第二个 OR 条件。这将打印“n”。

例如：

```
print('a' or 'b')
#Output: a

print(False or 'b')
#Output : b 
```

因此，如果 first 为 True，OR 运算符不会检查第二个条件。

# android - 让 SlidingDrawer 的内容部分始终可见？

> ID：11492311
> 
> 赞同：1
> 
> 时间：2012-07-15T13:29:18.983
> 
> 标签：android, slidingdrawer

我正在使用 android:bottomOffset 使抽屉从底部伸出 100dip。效果很好，但我的内容不可见。只有当我触摸抽屉时它才可见。我怎样才能让它始终可见（100dip 显示内容）？

我首先认为这是一个可见性问题，因为内容的可见性设置为 GONE in `onFinishInflate()`, `prepareContent()`, `closeDrawer()`... 复制了 SlidingDrawer 并删除了这些行，并没有解决它。似乎这是一个位置问题，目前我正在玩数字，但仍然找不到如何使内容出现在它应该出现的位置......并且没有更多时间......任何帮助非常感谢。

这是问题的图片以便快速理解：

![在此处输入图像描述](../Images/07e7b0c86a81d96d2218a582dc91421c.png)

我希望它从一开始就看起来像在正确的部分。

这种默认行为对我来说也是错误的，我不知道为什么有人只想为句柄制作偏移量，在它和内容之间制造一个间隙，然后在触摸时将内容直接放在句柄下面......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T23:44:46.423

这是一个有效的解决方案：

创建 SlidingDrawer 类的完整副本，然后替换该方法`dispatchDraw`，使其如下所示：

```
@Override
protected void dispatchDraw(Canvas canvas) {
    final long drawingTime = getDrawingTime();
    final View handle = mHandle;
    final boolean isVertical = mVertical;

    drawChild(canvas, handle, drawingTime);

    //if (mTracking || mAnimating) {
        final Bitmap cache = mContent.getDrawingCache();
        if (cache != null) {
            if (isVertical) {
                canvas.drawBitmap(cache, 0, handle.getBottom(), null);
            } else {
                canvas.drawBitmap(cache, handle.getRight(), 0, null);                    
            }
        } else {
            canvas.save();
            canvas.translate(isVertical ? 0 : handle.getLeft() - mTopOffset,
                    isVertical ? handle.getTop() - mTopOffset : 0);
            drawChild(canvas, mContent, drawingTime);
            canvas.restore();
        }
    //} else if (mExpanded) {
        //drawChild(canvas, mContent, drawingTime);
    //}
} 
```

我所做的是评论行。如您所见，mContent 是滑块的内容，仅当 mTracking、mAnimating 或 mExpanded 为 true 时才会绘制，而滑块“关闭”时则不然。可能开发人员没有想到在“关闭”时显示部分内容的滑块，因此在滑块关闭时绘制内容没有任何意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:37:23.327

lxx 的答案完美无缺。我无法粘贴所有代码作为响应，所以我提出了另一个答案。与 lxx 的代码唯一不同的是，我没有复制所有 SlidingDrawer 类，而是通过创建新类来扩展它。以下是完整代码。

```
package com.localini.widget;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.View;
import android.widget.SlidingDrawer;

public class ExtendedSlidingDrawer extends SlidingDrawer {

    private boolean mVertical;
    private int mTopOffset;

    public ExtendedSlidingDrawer(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        int orientation = attrs
                .getAttributeIntValue("android", "orientation", ORIENTATION_VERTICAL);
        mTopOffset = attrs.getAttributeIntValue("android", "topOffset", 0);
        mVertical = (orientation == SlidingDrawer.ORIENTATION_VERTICAL);
    }

    public ExtendedSlidingDrawer(Context context, AttributeSet attrs) {
        super(context, attrs);

        int orientation = attrs
                .getAttributeIntValue("android", "orientation", ORIENTATION_VERTICAL);
        mTopOffset = attrs.getAttributeIntValue("android", "topOffset", 0);
        mVertical = (orientation == SlidingDrawer.ORIENTATION_VERTICAL);
    }

    @Override
    protected void dispatchDraw(Canvas canvas) {
        final long drawingTime = getDrawingTime();
        final View handle = getHandle();
        final boolean isVertical = mVertical;

        drawChild(canvas, handle, drawingTime);

        //if (mTracking || mAnimating) {
        final Bitmap cache = getContent().getDrawingCache();
        if (cache != null) {
            if (isVertical) {
                canvas.drawBitmap(cache, 0, handle.getBottom(), null);
            } else {
                canvas.drawBitmap(cache, handle.getRight(), 0, null);
            }
        } else {
            canvas.save();
            canvas.translate(isVertical ? 0 : handle.getLeft() - mTopOffset,
                        isVertical ? handle.getTop() - mTopOffset : 0);
            drawChild(canvas, getContent(), drawingTime);
            canvas.restore();
        }
        //} else if (mExpanded) {
        //drawChild(canvas, mContent, drawingTime);
        //}
    }
} 
```

在 xml 布局文件中，您需要设置例如`android:buttonOffser="-100dip"`原始问题中的解释。

# math - 曲线的函数方程

> ID：11492313
> 
> 赞同：2
> 
> 时间：2012-07-15T13:30:11.713
> 
> 标签：math, equation, curve

我正在寻找使用函数方程来表达特定（见下图）曲线的方法。

重要的是（假设图表的大小是 1x1 - 实际上在最终结果中并不重要）：

*   显然是形状 - 如图所示；
*   f(x)=x应该有三个解：
    x=0，x接近或等于0.5，x=1；
*   如果两条弧线都是可扩展的，那就太好了——如左图所示（下部弧线比上部弧线更重要）。

![曲线示例](../Images/3cf1ea60550964617cb330746623b0e7.png)

我做了一些研究，但似乎没有什么能满足我的需求。我也尝试了三角函数和 sigmoid 函数，结果证明它们非常接近我想要的。我将不胜感激任何提示甚至解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:29:09.347

我相信我已经找到了一个可以满足您要求的函数形式，它使用带有两个三角调整的线性基 (y=x)。通过调整这两个参数，您应该能够达到您想要的任何形状。对于 x=0,1,0.5，f(x)=x 的约束将始终得到满足。'a' 的增加会导致两侧凸出（左侧向下，右侧向上），'b' 值非零将在两个凸起之间产生不对称。

```
y = x - a*sin(2*pi*x) - b*cos(4*pi*x) + b 
```

在下面的示例中，我选择 a 为 0.1，b 为 0.015。

![在此处输入图像描述](../Images/29cdea0f6b3288c543a7637fa2a25cd3.png)

# entity-framework - 关联绑定/解除绑定的HTTP方法

> ID：11492314
> 
> 赞同：0
> 
> 时间：2012-07-15T13:30:11.497
> 
> 标签：entity-framework, asp.net-mvc-4, asp.net-web-api

我正在开发一个基于 MVC4 RC 并使用数据库优先实体框架作为我的模型的 Web API。我拥有的 2 个实体是`Item`和`Group`。这两个实体之间存在多对多关系。

现在，在使用标准 HTTP 方法（、、和）非常轻松地实现了两者的 CRUD 操作 API 之后`GET`，我`POST`开始想要实现项目与组的绑定和解除绑定。`PUT``DELETE`

我尝试了其他动词，例如`LOCK`and `UNLOCK`，但没有成功（他们似乎不支持它们），并试图以某种方式操纵`POST`and`PUT`命令，再次没有成功。

你们中的任何一个好人都知道如何实现这一点吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:06:01.383

您可以将多对多表示为根资源上的子集合。例如，您有 /items/1234 和 /groups/4567 - 您可以将组作为 /items/1234/groups 或 /groups/4567/items 的子集合

无论哪种方式都同样有效。我通常会使用 a`PUT`来设置关系并使用 a`DELETE`来删除它——有些人会说这不是真正的 REST，但在我使用它的场景中它工作得很好。

`PUT /items/1234/groups/4567`- 创建项目 1234 和组 4567 `DELETE /items/1234/groups/4567`之间的关系 - 删除项目 1234 和组 4567 之间的关系

这篇文章对我帮助很大。当我最后研究这个时...

[如何在 RESTful API 中处理多对多关系？](https://stackoverflow.com/questions/6324547/how-to-handle-many-to-many-relationships-in-a-restful-api)

更新：路由

因此，对于这些更复杂的场景，我们最终只是使用了更具体的路线。试图将所有内容都塞进一条通用路线会很快变得丑陋。我们有一套单元测试确保相关的 URL 被路由到正确的控制器和操作。

```
 // routes
    routes.MapHttpRoute(
        name: "items.groups",
        routeTemplate: "items/{itemId}/groups/{groupId}",
        defaults: new { controller = "ItemGroup", groupId = RouteParameter.Optional }); 
```

然后 ItemGroupController 具有 Get、Delete 和 Put 方法。我们像这样进行单元测试...

```
 // unit tests
    [Test]
    public void PutItemGroup()
    {
        RoutingResult routingResult = this.GenerateRoutingResult(HttpMethod.Put, "~/items/1234/groups/4567");
        Assert.IsNotNull(routingResult);
        Assert.AreEqual("ItemGroup", routingResult.Controller);
        Assert.AreEqual("Put", routingResult.Action);
        Assert.AreEqual("1234", routingResult.RouteData.Values["itemId"]);
        Assert.AreEqual("4567", routingResult.RouteData.Values["groupId"]);
    }

    [Test]
    public void GetItemGroups()
    {
        RoutingResult routingResult = this.GenerateRoutingResult(HttpMethod.Get, "~/items/1234/groups");
        Assert.IsNotNull(routingResult);
        Assert.AreEqual("ItemGroup", routingResult.Controller);
        Assert.AreEqual("GetAll", routingResult.Action);
        Assert.AreEqual("1234", routingResult.RouteData.Values["itemId"]);
    }

    [Test]
    public void GetItemGroup()
    {
        RoutingResult routingResult = this.GenerateRoutingResult(HttpMethod.Get, "~/items/1234/groups/4567");
        Assert.IsNotNull(routingResult);
        Assert.AreEqual("ItemGroup", routingResult.Controller);
        Assert.AreEqual("Get", routingResult.Action);
        Assert.AreEqual("1234", routingResult.RouteData.Values["itemId"]);
        Assert.AreEqual("4567", routingResult.RouteData.Values["groupId"]);
    }

    [Test]
    public void DeleteItemGroup()
    {
        RoutingResult routingResult = this.GenerateRoutingResult(HttpMethod.Delete, "~/items/1234/groups/4567");
        Assert.IsNotNull(routingResult);
        Assert.AreEqual("ItemGroup", routingResult.Controller);
        Assert.AreEqual("Delete", routingResult.Action);
        Assert.AreEqual("1234", routingResult.RouteData.Values["itemId"]);
        Assert.AreEqual("4567", routingResult.RouteData.Values["groupId"]);
    }

    private RoutingResult GenerateRoutingResult(HttpMethod method, string relativeUrl)
    {
        HttpConfiguration httpConfiguration = new HttpConfiguration(this.HttpRoutes);
        HttpRequestMessage request = new HttpRequestMessage(method, string.Format("http://test.local/{0}", relativeUrl.Replace("~/", string.Empty)));
        IHttpRouteData routeData = this.HttpRoutes.GetRouteData(request);

        Assert.IsNotNull(routeData, "Could not locate route for {0}", relativeUrl);

        this.RemoveOptionalRoutingParameters(routeData.Values);

        request.Properties.Add(HttpPropertyKeys.HttpRouteDataKey, routeData);
        request.Properties.Add(HttpPropertyKeys.HttpConfigurationKey, httpConfiguration);

        IHttpControllerSelector controllerSelector = new DefaultHttpControllerSelector(httpConfiguration);
        HttpControllerContext controllerContext = new HttpControllerContext(httpConfiguration, routeData, request)
            {
                ControllerDescriptor = controllerSelector.SelectController(request)
            };

        HttpActionDescriptor actionDescriptor = controllerContext.ControllerDescriptor.HttpActionSelector.SelectAction(controllerContext);
        if (actionDescriptor == null)
        {
            return null;
        }

        return new RoutingResult
            {
                Action = actionDescriptor.ActionName,
                Controller = actionDescriptor.ControllerDescriptor.ControllerName,
                RouteData = routeData
            };
    }

    private void RemoveOptionalRoutingParameters(IDictionary<string, object> routeValueDictionary)
    {
        int count = routeValueDictionary.Count;
        int index1 = 0;
        string[] strArray = new string[count];
        foreach (KeyValuePair<string, object> keyValuePair in routeValueDictionary)
        {
            if (keyValuePair.Value == RouteParameter.Optional)
            {
                strArray[index1] = keyValuePair.Key;
                ++index1;
            }
        }

        for (int index2 = 0; index2 < index1; ++index2)
        {
            string key = strArray[index2];
            routeValueDictionary.Remove(key);
        }
    }

    private class RoutingResult
    {
        public string Controller { get; set; }

        public string Action { get; set; }

        public IHttpRouteData RouteData { get; set; }
    } 
```

干杯，院长

# asp.net-mvc-3 - 使用 WebImage 助手时，HTTP 响应看起来像图像数据？

> ID：11492316
> 
> 赞同：0
> 
> 时间：2012-07-15T13:30:38.340
> 
> 标签：asp.net-mvc-3

我有一个通过 AJAX 从我的 MVC3 应用程序调用的方法。该方法使用 WebImage 帮助器创建图像。创建图像后，我从控制器返回一个 Json 结果。实际返回的内容看起来像图像数据。我在请求标头中发送的内容类型是 json，所以我不确定服务器为什么返回图像数据而不是我的实际 json 结果。如果我删除 WebImage 代码，我会得到我正在寻找的实际 json 结果。

方法示例：

```
[HttpPost]
public ActionResult CreateTempImage(AvatarUploadModel avatar){

try{

var imageId = Guid.NewGuid();
            var newFileName = imageId + "_" + Path.GetFileName(avatar.FileName);
            var imageTempPath = Server.MapPath("~/Areas/Admin/TemporaryUploads/" + newFileName);
            var image = new WebImage(avatar.FileName).Resize(400, 400, true).Write();
            image.Save(imageTempPath);
return Json(new { success = true }, JsonRequestBehavior.AllowGet);
}
catch(Exception ex){
              return Json(new { success = false}, JsonRequestBehavior.AllowGet);
                   }
} 
```

![在此处输入图像描述](../Images/d142ed0cccb413e022fce8c22180ae6f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:00:06.177

这段代码是你的问题

```
var image = new WebImage(avatar.FileName).Resize(400, 400, true).Write(); 
```

它被记录为...

```
/// <summary>
/// Renders an image to the browser.
/// </summary>
/// 
/// <returns>
/// The image.
/// </returns>
/// <param name="requestedFormat">(Optional) The file format to use when the image is written.    </param> 
```

反编译它会给出以下代码：

```
 requestedFormat = requestedFormat ?? this._initialFormat.ToString();
  byte[] bytes = this.GetBytes(requestedFormat);
  string str = !requestedFormat.StartsWith("image/", StringComparison.OrdinalIgnoreCase) ? "image/" + requestedFormat : requestedFormat;
  HttpResponse response = HttpContext.Current.Response;
  response.ContentType = str;
  response.BinaryWrite(bytes);
  return this; 
```

即，它直接将图像写入`HttpContext.Current.Response`并将其设置`ContentType`为图像的格式。

如果您只想将图像保存到服务器上的文件系统，那么您可以删除调用`Write`并将其替换为调用`Save`：

```
var image = new WebImage(avatar.FileName).Resize(400, 400, true).Save(imageTempPath); 
```

干杯，院长

# mysql - 为什么 BOOLEAN 类型的列在关系数据库设计中存在问题？

> ID：11492319
> 
> 赞同：14
> 
> 时间：2012-07-15T13:31:07.893
> 
> 标签：mysql, sql, oracle, derby

在过去的几年中，我主要与 Oracle 合作，并且非常习惯于将单字符 varchar 列用作布尔值。

我还可以看到（每个堆栈溢出答案），MySQL 的建议类型是 TINYINT。

现在我开始了我的小项目——使用 DerbyDB，它支持 BOOLEAN 列，但直到版本 10 左右。

那么，问题是，为什么在设计关系数据库时很难合并一个 BOOLEAN 列？我是否遗漏了某些内容，或者只是将待办事项列表推到了不重要的位置，因为您可以同时使用另一种列类型？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T16:46:00.043

具体来说，就 Derby 而言，答案有点奇怪：开源数据库 Derby 曾经被称为 Cloudscape，是一个专有产品。当时，它完全支持 BOOLEAN。

随后，Cloudscape 被 IBM 收购的 Informix 收购，IBM 工程部决定让 Derby 与 DB2 兼容。这样做的原因是，如果这两个数据库兼容，用户将更容易在 Derby 数据库和 DB2 数据库之间迁移他们的应用程序。然而，工程人员并没有从 Derby 中删除与 DB2 不兼容的特性，他们只是在 SQL 语法中禁用了这些特性，而将大部分实现留在原处。

随后，IBM 将 Cloudscape 开源给 Apache Software Foundation，将其命名为 Derby。开源社区不再受限于 Derby 与 DB2 完全兼容的要求，决定恢复对 BOOLEAN 数据类型的支持。因此，Derby 现在支持 BOOLEAN 数据类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-15T17:50:47.297

Tom Kyte 与您[在此博客条目中](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:6263249199595)的最后一句话非常相似：

> “它不是我们拥有的类型——我不能说更多也不能更少。ANSI 没有它——许多数据库都没有它（我们当然并不孤单）。在宏伟的计划中——我会说这个的优先级相当“低”（这是我的看法）。

他是从 Oracle 的角度说的，但它适用于任何关系 RDBMS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T19:09:25.677

`boolean`只要我能想到，PostgreSQL 确实支持。

我能找到的最古老的在线文档是 1998 年 3 月 1 日发布的 6.3 版。他们提到了布尔类型：

[http://www.postgresql.org/docs/6.3/static/c0805.htm](http://www.postgresql.org/docs/6.3/static/c0805.htm)

在[后来的文档](http://www.postgresql.org/docs/7.2/interactive/datatype-boolean.html)中，他们提到 SQL99 作为他们遵循的标准。

Since SQL99 seems to mention this type I would assume, that many DBs did have support for that type quite well before 1999.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T13:48:40.850

我不*知道*，因为我还没有设计过，但我的猜测是，由于 RDBMS 是关于描述和存储事物的集合，因此不需要布尔字段，因为它们也可以表示集合中的内容，但它们是无关，因为集合的成员将来自数据库的实际数据或结构。

例如，对于赋予员工的角色，他们要么是经理，要么不是经理，取一个布尔列。您可以使用布尔列来描述这一点，但您*应该*做的是为经理提供一个表格，为非经理提供一个表格，或者（这将是更灵活且可能更易于管理的方式）创建一个额外的“外观up”表，它提供角色（作为单个文本列）和然后在员工表中引用的键（外键）。

* * *

我想我应该补充一点，大多数时候你在表格中看到一个布尔字段，这是一种代码味道，因为它~~将要~~ *可能会*影响性能 - 在 where 子句中使用布尔值将调用表扫描并使表上的索引相当无意义（但请参阅评论以进一步讨论此问题）。我冒昧地猜测布尔数据类型已添加到大多数 RDBMS 中，用于它们的过程语言扩展（T-SQL、PLSQL），以帮助处理所需的奇怪条件语句。

# database - 如何设计具有相似条目的数据库表

> ID：11492320
> 
> 赞同：1
> 
> 时间：2012-07-15T13:31:18.717
> 
> 标签：database, database-design

我目前有一个表，其中一个字段的大部分（如 99%）数据依赖于单个字段，但其他 1% 依赖于其他字段。

例如，我有以下价格表

```
product PK
color PK
cost 
```

以下是该表中的一些条目

```
product|color|cost
pen|red|$1.00
pen|blue|$1.00
pen|green|$1.00
etc....
pen|black|$0.90
pen|white|$0.85
pencil|red|$0.50
pencil|blue|$0.50
pencil|green|$0.50
etc...
pencil|black|$0.35
pencil|gray|$0.40 
```

我在使用此表时遇到的问题是，每当我必须添加单个产品或颜色时，我都必须在此表中添加数百个类似的条目。

我目前正在考虑以下列方式存储数据

```
pen|all_other_colors|$1.00
pen|black|$0.90
pen|white|$0.85
pencil|all_other_colors|$0.50
pencil|black|$0.35
pencil|gray|$0.40 
```

我是在正确的轨道上还是有更好的数据库设计来处理这个问题？任何帮助或链接将不胜感激。对于这个问题，我无法向谷歌找到正确的措辞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:36:09.987

您需要规范化数据库表

将其分为以下三个表：

**产品**

```
id | product 
```

**颜色**

```
id | color 
```

**产品成本**

```
id |  Product_id | color_id | Cost 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:58:01.677

您可以将颜色组合在一起，然后插入整个组的价格：

![在此处输入图像描述](../Images/14783e271a7e1adaa762e0635f8bfad4.png)

您的示例可以类似地表示...

```
PRICE:

    PRODUCT_ID  GROUP_ID    PRICE
    pen         1           $1.00
    pen         2           $0.90
    pen         3           $0.85    
    pencil      1           $0.50
    pencil      2           $0.35
    pencil      4           $0.40

GROUP:

    GROUP_ID
    1
    2
    3
    4

COLOR_GROUP:

    GROUP_ID    COLOR_ID
    1           red
    1           blue
    1           green
    2           black
    3           white
    4           gray

COLOR:

    COLOR_ID
    red
    blue
    green
    black
    white
    gray 
```

增加的复杂性是否值得取决于您...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:13:20.970

*   `BaseProduct`有所有产品名称及其价格
*   `Product`拥有所有可用的有效产品颜色组合
*   `ColorPrice`是与基本价格的差额（抵消）。
*   `ColorCharge`只有**带有异常定价**的行（没有 ColorPrice = 0 的行）

![在此处输入图像描述](../Images/101c0386456338e9972486fb1dbf1834.png)

获取特定基础产品的信息 ( `specific_prodict_id`)

```
select
      b.ProductName
    , c.ColorName
    , b.ProductPrice + coalesce(x.ColorPrice, 0.0) as ProductPrice
from      Product     as p
join      BaseProduct as b on b.BaseProductID = p.BaseProductID
join      Color       as c on c.ColorId       = p.ColorId
left join ColorCharge as x on x.BaseProductID = p.BaseProductID and x.ColorID = p.ColorID
where p.BaseProductID = specific_prodict_id; 
```

# php - 通过 ajax 调用将值传输到 php 文件

> ID：11492324
> 
> 赞同：1
> 
> 时间：2012-07-15T13:31:43.143
> 
> 标签：php, javascript, ajax

我正在尝试通过 ajax 调用发送一个 json 字符串和一个变量并在 php 文件中编辑查询，我的代码看起来像

```
queryData = {
    "data": {
        "data_string": {
            "data": "oil",
            "default_field": "Content"
        }
    }
};
from = 0;
$.ajax({
    url: "/elasticsearch-head/lib/es/queryManipulate.php",
    type: 'POST',
    data: 'dataString',
    datatype: 'json',
    data: {
        field: queryData,
        start: this.from
    },
    success: function(data) {
        Dumper.alert(data);
    }
}); 
```

PHP 文件看起来像，我将这两个值放入变量中，我想更改 php 中的 json 并以 {"from": $from, "data":{"data_string":{"data" 的形式返回值:"oil","default_field":"内容"}}}

```
<?php
$testData=$_POST["field"];
$from=$_POST["start"];
?> 
```

它应该返回查询 4 ​​次，每次 $from 的值应该增加 10 是否可以使用 ajax 和 php 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:42:15.300

那将是我的解决方案：

```
function retreiveData(from)
{
    queryData={"data":{"data_string":{"data":"oil","default_field":"Content"}}};
    $.ajax({
        url:"/elasticsearch-head/lib/es/queryManipulate.php",
        type: 'POST',
        data: 'dataString',
        datatype: 'json',
        data: {field : queryData, start : from},
        success:function(data)
        {
            Dumper.alert(data);
            if(from < (4-1)*10)
            {
                retreiveData(from+10);
            }
        }
    });
}
retreiveData(0); 
```

这是一个递归函数调用自身四次。

编辑：或者如果我误读了您的问题，您可以在服务器端使用 for 循环：

```
<?php
$testData=$_POST["field"];
$from=$_POST["start"];
for($i=0; ctype_digit($from) && is_numeric($from) && $i <  4; $i++)
{
    $from+=10;
    //process data on the server side
    //echo $testData; // or whatever
}
?> 
```

这会让你的数据被处理四次。

# ajax - POST JSON 失败，出现 415 Unsupported media type, Spring 3 mvc

> ID：11492325
> 
> 赞同：191
> 
> 时间：2012-07-15T13:31:56.480
> 
> 标签：ajax, json, spring, post, http-status-code-415

我正在尝试向 servlet 发送 POST 请求。请求是通过 jQuery 以这种方式发送的：

```
var productCategory = new Object();
productCategory.idProductCategory = 1;
productCategory.description = "Descrizione2";
newCategory(productCategory); 
```

newCategory 在哪里

```
function newCategory(productCategory)
{
  $.postJSON("ajax/newproductcategory", productCategory, function(
      idProductCategory)
  {
    console.debug("Inserted: " + idProductCategory);
  });
} 
```

而 postJSON 是

```
$.postJSON = function(url, data, callback) {
    return jQuery.ajax({
    'type': 'POST',
    'url': url,
    'contentType': 'application/json',
    'data': JSON.stringify(data),
    'dataType': 'json',
    'success': callback
    });
}; 
```

使用 firebug，我看到 JSON 发送正确：

```
{"idProductCategory":1,"description":"Descrizione2"} 
```

但我得到 415 Unsupported media type。Spring mvc 控制器具有签名

```
 @RequestMapping(value = "/ajax/newproductcategory", method = RequestMethod.POST)
public @ResponseBody
Integer newProductCategory(HttpServletRequest request,
        @RequestBody ProductCategory productCategory) 
```

前几天有效，现在无效。如果需要，我会显示更多代码。谢谢

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-07-18T20:24:33.670

我以前使用 Spring @ResponseBody 发生过这种情况，这是因为没有随请求发送的接受标头。使用 jQuery 设置 Accept 标头可能会很痛苦，但这对我有用[来源](https://stackoverflow.com/a/6692376/936869)

```
$.postJSON = function(url, data, callback) {
    return jQuery.ajax({
    headers: { 
        'Accept': 'application/json',
        'Content-Type': 'application/json' 
    },
    'type': 'POST',
    'url': url,
    'data': JSON.stringify(data),
    'dataType': 'json',
    'success': callback
    });
}; 
```

@RequestBody 使用 Content-Type 标头来确定在请求中从客户端发送的数据的格式。@ResponseBody 使用接受标头来确定在响应中将数据发送回客户端的格式。这就是为什么你需要两个标题。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-03-02T10:47:10.023

将内容类型添加到请求中以`application/json`解决问题

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-03T06:45:34.010

我遇到了类似的问题，但发现问题是我忽略了为使用 @RequestBody 注释的 DTO 提供默认构造函数。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-02-21T06:58:50.217

我遇到了类似的问题，这就是我解决它的方法，

问题是由于从 JSON 到 Java 的转换过程，需要有正确的运行时 jackson 库才能正确进行转换。

添加以下 jars（通过依赖项或通过下载并添加到类路径。

```
<dependency>
<groupId>org.codehaus.jackson</groupId>
<artifactId>jackson-mapper-asl</artifactId>
<version>1.9.13</version>
</dependency>
<dependency>
<groupId>com.fasterxml.jackson.core</groupId>
<artifactId>jackson-databind</artifactId>
<version>2.5.3</version>
</dependency> 
```

这应该可以解决问题。

完整代码：

```
function() {
  $.ajax({
    type: "POST",
    url: "saveUserDetails.do",
    data: JSON.stringify({
      name: "Gerry",
      ity: "Sydney"
    }),
    headers: {
      'Accept': 'application/json',
      'Content-Type': 'application/json'
    },
    success: function(data) {
      if (data.status == 'OK')
        alert('Person has been added');
      else
        alert('Failed adding person: ' + data.status + ', ' + data.errorMessage);
} 
```

控制器签名如下所示：

```
@RequestMapping(value = "/saveUserDetails.do", method = RequestMethod.POST)
public @ResponseBody Person addPerson( @RequestBody final  Person person) { 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-05-18T23:34:57.150

我相信我遇到了同样的问题。经过无数小时与 JSON、JavaScript 和服务器的斗争，我找到了罪魁祸首：在我的例子中，我在 DTO 中有一个 Date 对象，这个 Date 对象被转换为一个字符串，所以我们可以在视图中显示它格式：HH:mm。

当返回 JSON 信息时，这个 Date String 对象必须被转换回一个完整的 Date 对象，因此我们还需要一个方法来在 DTO 中设置它。最大的问题是即使它们具有不同类型的参数（字符串与日期），您也不能在 DTO 中有 2 个具有相同名称（重载）的方法，因为这也会给您 415 Unsupported Media type 错误。

这是我的控制器方法

```
 @RequestMapping(value = "/alarmdownload/update", produces = "application/json", method = RequestMethod.POST)
  public @ResponseBody
  StatusResponse update(@RequestBody AlarmDownloadDTO[] rowList) {
    System.out.println("hola");
    return new StatusResponse();
  } 
```

这是我的 DTO 示例（由于代码简短，不包括 id get/set 和 preAlarm get 方法）：

```
@JsonIgnoreProperties(ignoreUnknown = true)
public class AlarmDownloadDTO implements Serializable {

  private static final SimpleDateFormat formatHHmm = new SimpleDateFormat("HH:mm");

  private String id;
  private Date preAlarm;

  public void setPreAlarm(Date date) { 
    this.preAlarm == date;
  }
  public void setPreAlarm(String date) {    
    try {
      this.preAlarm = formatHHmm.parse(date);
    } catch (ParseException e) {
      this.preAlarm = null;
    } catch (NullPointerException e){
      this.preAlarm = null;
    }
  }
} 
```

为了使一切正常，您需要删除带有 Date 类型参数的方法。这个错误非常令人沮丧。希望这可以节省一些人的调试时间。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-06-03T05:54:33.800

当我将 spring boot 与 spring mvc 集成时，我遇到了这个问题。我通过添加这些依赖项来解决它。

```
<dependency>
<groupId>org.codehaus.jackson</groupId>
<artifactId>jackson-mapper-asl</artifactId>
<version>1.9.13</version>
</dependency>
<dependency>
<groupId>com.fasterxml.jackson.core</groupId>
<artifactId>jackson-databind</artifactId>
<version>2.5.3</version>
</dependency> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-01-16T10:37:00.550

一个小的旁注 - 在开发 Web 应用程序时偶然发现了同样的错误。通过使用 Firefox Poster 来玩弄该服务，我们发现的错误是 Json 中的字段和值都应该用双引号引起来。例如..

```
[ {"idProductCategory" : "1" , "description":"Descrizione1"}, 
  {"idProductCategory" : "2" , "description":"Descrizione2"} ] 
```

在我们的例子中，我们通过 javascript 填充了 json，据我所知，在处理单引号/双引号时可能会有些混乱。

之前在这篇文章和其他文章中所说的内容，比如包括“接受”和“内容类型”标题，也适用。

希望有帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-07-26T16:19:08.207

我设法使它工作。告诉我，以防我错了。`@JSONSerialize`我只使用了一种方法来序列化/反序列化：我删除了关于这个 (和)的所有注释，并在课堂上`@JSONDeserialize`注册了序列化器和反序列化器。`CustomObjectMapper`我没有找到解释这种行为的文章，但我以这种方式解决了。希望它有用。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-16T04:11:24.853

我有同样的问题。我必须按照以下步骤解决问题：

**1\. 确保您具有以下依赖项：**

```
 <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
        <version>${jackson-version}</version> // 2.4.3
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>${jackson-version}</version> // 2.4.3
    </dependency> 
```

**2\. 创建以下过滤器：**

```
 public class CORSFilter extends OncePerRequestFilter {

        @Override
        protected void doFilterInternal(HttpServletRequest request,
                                        HttpServletResponse response, FilterChain filterChain)
                throws ServletException, IOException {

            String origin = request.getHeader("origin");
            origin = (origin == null || origin.equals("")) ? "null" : origin;
            response.addHeader("Access-Control-Allow-Origin", origin);
            response.addHeader("Access-Control-Allow-Methods", "POST, GET, PUT, UPDATE, DELETE, OPTIONS");
            response.addHeader("Access-Control-Allow-Credentials", "true");
            response.addHeader("Access-Control-Allow-Headers",
                    "Authorization, origin, content-type, accept, x-requested-with");

            filterChain.doFilter(request, response);
        }
    } 
```

**3\. 对 web.xml 中的请求应用上述过滤器**

```
 <filter>
        <filter-name>corsFilter</filter-name>
        <filter-class>com.your.package.CORSFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>corsFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

我希望这对某人有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-12-04T10:46:14.070

弹簧靴+弹簧MVN

有问题

```
@PostMapping("/addDonation")
public String addDonation(@RequestBody DonatorDTO donatorDTO) { 
```

有溶液

```
@RequestMapping(value = "/addDonation", method = RequestMethod.POST)
@ResponseBody
public GenericResponse addDonation(final DonatorDTO donatorDTO, final HttpServletRequest request){ 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-10T15:29:20.650

我遇到过同样的问题。添加

```
<mvc:annotation-driven />
<mvc:default-servlet-handler /> 
```

到 spring-xml 解决了

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-24T10:43:27.687

我通过将 jackson-json 数据绑定添加到我的 pom.xml 解决了这个问题。

```
<dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>2.6.3</version>
</dependency> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-06T07:51:21.940

在您的模型类中添加一个 json 属性注释，还有一个默认构造函数

```
@JsonProperty("user_name")
private String userName;

@JsonProperty("first_name")
private String firstName;

@JsonProperty("last_name")
private String lastName; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-24T15:12:54.090

除了设置 Accept 和 Content-Type 标头并确保它们与控制器方法的使用/生成设置相匹配之外，您可能还需要查看 JSON 结构并确保编组和解组没有问题。在我的情况下，内容类型还可以，但是将 JSON 请求映射到我的请求/响应模型时存在问题。通常，控制器应该返回 400 错误而不是 415 错误，但在我的情况下，错误代码是 415。我通过添加一个测试类来调试问题，其中我使用 ObjectMapper 将我的 JSON 读入请求模型对象。ObjectMapper 因请求而窒息，并给了我有用的错误，帮助我修复了模型类定义。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-01-01T05:27:31.143

1.a. 在 applicationContext-mvc.xml 中添加以下内容

xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemaLocation=" [http://www.springframework.org/schema/mvc](http://www.springframework.org/schema/mvc) [http://www.springframework.org/schema/mvc](http://www.springframework.org/schema/mvc)

2.  添加杰克逊库

# java - 在android中拆分单词的每个字符？

> ID：11492326
> 
> 赞同：0
> 
> 时间：2012-07-15T13:32:02.003
> 
> 标签：java, android

我正在尝试拆分单词的每个字符..例如“CAT”=C,A,T

我已经能够获得单词的完整长度..通过在编辑文本中输入..

```
package com.pack.name;

import android.R.array;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class NamtestActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */
    EditText name;
    Button save;
    String sname;
    int pname, i;
    char eachword[];

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        name = (EditText) findViewById(R.id.editText1);
        save = (Button) findViewById(R.id.button1);
        save.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        sname = name.getText().toString();
        pname = sname.length();
        Toast.makeText(getApplicationContext(), "" + pname, Toast.LENGTH_LONG)
                .show();
        //for (i = 0; i < pname; i++) {

        }

    } 
```

}

在这里，我们从edittext中获取输入，然后通过单击按钮显示单词的长度...现在我需要拆分单词..我试图在for循环中执行此操作...请帮助.. ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T13:39:25.787

1.  您可以使用带有**getCharaterInstance() 静态方法的****BreakIterator 类来执行此操作。**

     **有关更多详细信息，请参阅此链接：

    [http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html](http://docs.oracle.com/javase/6/docs/api/java/text/BreakIterator.html)** 
***   您可以使用`toCharArray()`.

    公共无效processSong（字符串字）{

    ```
     //Conversion of String to Character Array//

        String s = word.toUpperCase();
        char[] tempArr = s.toCharArray();
        Character[] arr = new Character[tempArr.length];

        for (int i=0,j=0 ; i<tempArr.length ; i++,j++){

            arr[i] = tempArr[j];
        }

        for (Character c : l){

                 tempL.add(c);

        }

        Log.d("Vivek-Characters",tempL.toString());
        } 
    ```** 

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T13:35:20.190

您可以简单地使用：

```
eachword = sname.toCharArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T13:35:32.773

您可以像这样遍历它们：

```
for (char c: sname.toCharArray()) {
    ...
} 
```

或者只是保存它们

```
char[] chars = sname.toCharArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T13:42:19.420

打电话

```
"CAT".toCharArray(); 
```

你会得到结果

> [猫]**

# php - PHP MySQL：使用 Uploadify 时将文件详细信息写入数据库

> ID：11492329
> 
> 赞同：0
> 
> 时间：2012-07-15T13:32:14.647
> 
> 标签：php, mysql, uploadify

我正在使用 Uploadify 将文件（图像）上传到我的文件结构，然后捕获每个文件，给它一个随机数作为文件名，使用出色的 SimpleImage 脚本将其大小调整为大、中和小尺寸，然后将它们保存到目录，丢弃原始图像，并将文件详细信息（随机数、原始名称、专辑 ID 等）写入数据库以供以后访问。

除了写入数据库部分之外，所有这些都可以顺利进行。我发现只有第一个文件的信息被传递给数据库，并且文件名的数字不正确。

简而言之，在多个图像上使用 Uploadify 时，如何（正确）将每个文件的信息写入数据库？

我当前的脚本：

*注意：AlbumID 由用户动态设置，并作为文件数据发布以上传。

```
require_once '../../functions.php';
require_once '../../conn.php';

//defaults
$uploadify_path = '/contents/uploads/gallery/';
$albumID = $_POST['AlbumID'];

//Define a destination
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $_POST['path']; // Relative to the root

if (!empty($_FILES)) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$targetFile = $targetPath . $_FILES['Filedata']['name'];
include($_SERVER['DOCUMENT_ROOT'].'/includes/SimpleImage.php');

// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
    $ran = $albumID.RandNumber(10);
    $location=$targetPath.$ran;

    $LegacyName = $fileParts['filename'];
    $FileExt = $fileParts['extension'];

    if(is_numeric($albumID)) {
        $q = "INSERT INTO gallery_meta (AlbumID, FileName, LegacyName, FileExt, IsDefault, Public)
                VALUES ('$albumID','$ran','$LegacyName','$FileExt','0','1')";
        $r= mysql_query($q);
        mysql_free_result($r);
    }

    move_uploaded_file($tempFile,$targetFile);

    list($width, $height, $type, $attr) = getimagesize($targetFile);

    $image = new SimpleImage();
    $image->load($targetFile);

    if( $height >= 901 ) {
        $image->resizeToHeight(900);
        $image->save($location.'-lrg.'.$FileExt);
        $image->resizeToHeight(550);
        $image->save($location.'-med.'.$FileExt);
        $image->resizeToHeight(200);
        $image->save($location.'-sm.'.$FileExt);
        unlink($targetFile);
    }
    elseif(( $height  >= 551 )&&( $height <= 900 )) {
        $image->save($location.'-lrg.'.$FileExt);
        $image->resizeToHeight(550);
        $image->save($location.'-med.'.$FileExt);
        $image->resizeToHeight(200);
        $image->save($location.'-sm.'.$FileExt);
        unlink($targetFile);
    }
    elseif(( $height >= 201 )&&( $height <= 550 )) {
        $image->save($location.'-lrg.'.$FileExt);
        $image->save($location.'-med.'.$FileExt);
        $image->resizeToHeight(200);
        $image->save($location.'-sm.'.$FileExt);
        unlink($targetFile);
    }
    if( $height  <= 200 ) {
        $image->save($location.'-lrg.'.$FileExt);
        $image->save($location.'-med.'.$FileExt);
        $image->save($location.'-sm.'.$FileExt);
        unlink($targetFile);
    }

    echo '1';
} else {
    echo 'Invalid file type.';
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:58:32.367

向表中添加一个自动递增键，`BIGINT`如果您确定您的值不会超出 的大小，则将 albumID 更改为 a `BIGINT`，但如果是，我建议您将“AlbumId”保存为 a `VARCHAR(30)`，因为它更多名称而不是实际的数字键，特别是因为它看起来可以是任意长度。

我还认为，您应该附加当前时间戳，而不是最后的随机数，`time()`这样您就不会像具有随机数和用户输入的系统那样产生冲突的可能性。

顺便说一句，`$_POST['albumId']`通过直接用户输入.. 使您的数据库容易受到[MySQL 注入](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGkQFjAA&url=http://en.wikipedia.org/wiki/SQL_injection&ei=wtoCUNmyIom4rQGj6JCyDA&usg=AFQjCNGcGZNbIk2jM8itxItHrCja7eJ0PQ)攻击。

# android - kSoap2 意外类型（位置：END_DOCUMENT null@1:1 in java.io InputStreamReader@414fae00）

> ID：11492333
> 
> 赞同：2
> 
> 时间：2012-07-15T13:33:02.307
> 
> 标签：android, xml, soap, ksoap2, android-ksoap2

我正在尝试从方法中获得响应`Querypage`。[可以在此处](http://www.labs.skanetrafiken.se/v2.2/GetStartEndPoint.xsd)找到请求示例，并且可以在[此处](http://www.labs.skanetrafiken.se/v2.2/querypage.asp?inpPointFr=lund&inpPointTo=ystad)找到“文档”

API 可以在[这里](http://www.labs.skanetrafiken.se/api.asp)找到（勾选底部的框并单击按钮以查看 api 页面，这基本上只是他们确保您已阅读规则等的一种方式）。

```
public class KSoap2Activity extends Activity {
    private static final String SOAP_ACTION =  "http://www.etis.fskab.se/v1.0/ETISws/Querypage";
    private static final String METHOD_NAME = "Querypage";
    private static final String NAMESPACE = "http://www.etis.fskab.se/v1.0/ETISws";
    private static final String URL = "http://www.labs.skanetrafiken.se/v2.2/querypage.asp";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = (TextView) findViewById(R.id.text);

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("inpPointFr", "lund");
    request.addProperty("inpPointTo", "ystad");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE ht = new HttpTransportSE(URL);
    ht.debug = true;

    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        tv.setText("Message :" + response.toString());
    } catch (Exception e) {
        e.printStackTrace();
        tv.setText(e.getMessage()+ ht.requestDump);
    }
} 
```

}

我收到一个例外：`unexpected type(position:END_DOCUMENT null@1:1 in java.io InputStreamReader@414fae00)`.

这是请求转储：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
    <v:Header />
    <v:Body>
        <Querypage xmlns="http://www.etis.fskab.se/v1.0/ETISws" id="o0" c:root="1">                                                   
            <inpPointFr i:type="d:string">lund</inpPointFr>
            <inpPointTo i:type="d:string">ystad</inpPointTo>
        </Querypage>
    </v:Body>
</v:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:19:36.163

Thanx Feco, as you said using and old version of the library do the job! For those that get networkonmainthreadexception with this old library only append this to your code:

```
 //Codigo para evitar el networkonmainthreadexception 
    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()   
    .detectDiskReads()   
    .detectDiskWrites()   
    .detectNetwork()   // or .detectAll() for all detectable problems   
    .penaltyLog()   
    .build());   
    StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()   
    .detectLeakedSqlLiteObjects()   
    .detectLeakedClosableObjects()   
    .penaltyLog()   
    .penaltyDeath()   
    .build()); 
```

Thats All! All is working well now! Juan Chipoco

# objective-c - 以编程方式创建的 UILabel 未在旋转时调整大小

> ID：11492335
> 
> 赞同：3
> 
> 时间：2012-07-15T13:33:17.273
> 
> 标签：objective-c, ios, xcode, uiview, uilabel

以编程方式创建多行 UILabel、将其添加到 UIView 并将 UIView 添加到视图控制器以便在方向更改时正确调整大小的最佳方法是什么？

我看到以前曾多次提出过类似的问题，但我没有找到针对我的特定情况的任何解决方案。我有一个视图，我正在尝试添加一个多行 UILabel。我提出的代码添加了标签，但它始终是横向模式下视图的宽度。旋转 iPad 会导致整个应用程序按预期旋转，除了 UILabel 太宽。我确信答案在于某种组合的`.autoresizingMask`or `.sizeToFit`or`.autoresizesSubviews`属性，但到目前为止我还没有得到它。这是我的代码到这一点

```
 UIViewController *vc = [[UIViewController alloc] init];
    vc.title = @"Welcome";

    // tbc is an instance of the tab bar controller that this view will go into
    UILabel *copy = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, tbc.view.frame.size.width, MAXFLOAT)];
    NSString *copyText = @"Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Cras mattis consectetur purus sit amet fermentum. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Cras mattis consectetur purus sit amet fermentum. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.";
    UIFont *copyFont = [UIFont fontWithName:@"HoeflerText-Regular" size:20.0f];
    [copy setContentMode:UIViewContentModeScaleAspectFit];
    [copy setText:copyText];
    [copy setFont:copyFont];
    [copy setNumberOfLines:0];
    [copy setLineBreakMode:UILineBreakModeWordWrap];
    [copy setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleBottomMargin|UIViewAutoresizingFlexibleRightMargin];

    CGRect frame = copy.frame;
    frame.origin.x = 50;
    frame.origin.y = 100;
    frame.size.width = tbc.view.frame.size.width;
    frame.size.height = tbc.view.frame.size.height - 100;
    [copy setFrame:frame];
    [copy sizeToFit];

    UIView *content = [[UIView alloc] initWithFrame:CGRectMake(0, 0, tbc.view.frame.size.width, vc.view.frame.size.height)];
    [content setAutoresizesSubviews:YES];
    [content addSubview:copy];
    [content sizeToFit];

    [vc.view setAutoresizesSubviews:YES];
    [vc.view setContentMode:UIViewContentModeScaleAspectFit];
    [vc.view addSubview:content]; 
```

正如我所说，我确定我错过了一些东西，`.autoresizeMask`但我已经在墙上撞了几天，所以我觉得我已经尝试了一切。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:37:57.157

只需添加：

```
[content setAutoresizingMask:UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleBottomMargin|UIViewAutoresizingFlexibleRightMargin]; 
```

当你说：

`setContentMode:`，你只是告诉视图如何在边界改变时调整子视图的大小，但是，边界没有改变！（因为缺少自动调整大小的掩码标志）

如果 vc 是从 NIB 加载的 viewController ，请从 NIB 文件中仔细检查其视图的自动调整大小选项，否则，也向其添加自动调整大小掩码标志。

# filesystems - 不写入磁盘时是否可能丢失数据？

> ID：11492336
> 
> 赞同：2
> 
> 时间：2012-07-15T13:33:32.267
> 
> 标签：filesystems, ntfs, ext4, xfs

从文件系统的角度来看，当驱动器空闲或被读取但未写入时，是否有可能丢失数据？假设您可以确认没有用户或操作系统操作正在写入磁盘，在空闲或读取过程中是否有任何微妙的文件系统操作可能会在中断时导致数据损坏（即断电、数据线拔出）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:43:23.933

哦，“这一切都取决于”...

简短的回答是肯定的，可能会发生腐败。最简单的情况是您有一个具有 16Mb 缓存的硬盘。程序写入“控制器”，数据最终进入设备缓存。你的程序认为没问题。然后你就失去了力量。>一些<系统有足够的电容器容量让这些数据流出，但你仍然可以获得部分写入。

根据我的经验，这些延迟写入期间的断电也可能由于 ECC 更新不完整而产生媒体错误。重新启动后，硬件可能会检测到这一点并声明磁盘的该区域（扇区/磁道）是坏的，并从备用磁盘重新映射它。

一些操作系统会更新文件的最后访问时间戳，因为文件是 >read<，这意味着当用户进行纯只读活动时，仍然会写入磁盘。

# bash - 测试是否没有给出位置参数的惯用方法？

> ID：11492338
> 
> 赞同：5
> 
> 时间：2012-07-15T13:34:02.930
> 
> 标签：bash, parameters, command-line-arguments, idioms, conditional-statements

如果没有给出位置参数，Bash 中最惯用的测试方法是什么？有很多方法可以检查这一点，我想知道是否有一种首选方法。

一些方法是：

```
((! $# )) # check if $# is 'not true'
(($# == 0)) # $# is 0
[[ ! $@ ]] # $@ is unset or null 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T14:05:00.870

对我来说，经典的方式是：

```
[[ $# -eq 0 ]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:26:06.747

如果您希望没有位置参数是错误的：

```
: ${@?no positional parameters} 
```

如果未设置，则将“无位置参数”打印到标准错误（并退出非交互式外壳）`$@`。

否则，我不知道有比检查是否`$#`为 0 的各种方法之一更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:44:58.807

### 使用明智的语义

关键是代码的可读性和意图。除非您有充分的理由不这样做，否则您可能只想确定参数列表的长度。

```
# Is length of parameter list equal to zero?
[ $# -eq 0 ] 
```

但是，您当然可以使用任何表达代码意图的参数扩展或比较运算符。没有正确的方法可以做到这一点，但您当然可能希望考虑您的测试语义是否可*移植*。

### 深思熟虑

本质上重要的不是条件表达式。重要的是你*为什么*想知道。例如：

```
set -e
foo="$1"
shift

# $2 is now $1 (but only if the line is reached)
echo "$1" 
```

在这种情况下，永远不会直接检查参数列表的长度。第一个参数被简单地分配（即使它可能未设置），然后当您尝试移动参数列表时，shell 会抛出错误并退出。这段代码说“我只是希望参数在那里；我不应该明确地检查它们。”

这里的重点是你需要确定你的代码试图表达什么，并匹配你的测试和条件的语义以尽可能清楚地表达出来。真的没有正交的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-11T22:53:17.330

这是一个最合乎逻辑的方式：

```
[ ! $@ ] 
```

它基于一条规则：

```
[ ] # this returns 1 
```

好吧，

```
[ ! ] # this returns 0 
```

其余的很明显：$@ 是扩展为所有位置参数列表的特殊参数。

测试：（即使你扔几个空字符串（“”“”“”）它也会起作用。）

```
if [ ! $@ ]; then
    printf 'Note: No arguments are given.'
fi 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-15T13:45:36.937

我更喜欢使用这样一个事实，即如果没有位置参数，也没有第一个参数：

```
[[ -z $1 ]]
test -z "$1"
[ -z "$1" ] 
```

它对读者来说只是轻了一点。当然，它仅在第一个参数不能为空字符串的假设成立时才有效。

# winapi - “单实例应用程序”中 CreateMutex 和 COPYDATASTRUCT 的 Haskell Win32 等效项？

> ID：11492339
> 
> 赞同：0
> 
> 时间：2012-07-15T13:34:07.507
> 
> 标签：winapi, haskell

我目前有一个资源轻的“非托管”Windows C++ 应用程序，它使用：

*   `CreateMutex`以确保最多有一个应用程序实例。

*   `COPYDATASTRUCT`将命令行参数传递给该单个实例，如果另一个实例尝试启动（发送数据后，它将退出）。

用例很简单：启动一个新的应用程序实例以打开在命令行上指定的文件，或者在先前启动的应用程序实例中打开该文件。

如何在 Haskell 程序中实现相同的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:34:35.373

GHC 随附的[软件包](http://hackage.haskell.org/package/Win32)中似乎`CreateMutex`没有提供。您需要使用[FFI](http://www.haskell.org/onlinereport/haskell2010/haskellch8.html#x15-1490008)自己绑定到它，或者以跨平台的方式模拟它。Linux 上常用的一个技巧是选择一个特定的文件名作为“互斥体”。如果它不存在，则创建它并记下如何与您联系，然后在退出时将其删除，如果存在，则从中读取联系信息以了解如何连接到已运行的进程。这种方法确实有缺点：如果您的应用程序或整个计算机出现故障，您将获得过时的联系信息。[`Win32`](http://hackage.haskell.org/package/Win32)

对于 IPC，我认为有许多跨平台接口。[维基百科](http://en.wikipedia.org/wiki/Inter-process_communication)有一个很好的列表；特别适合在 Haskell 中执行此任务的是[套接字](http://hackage.haskell.org/package/network)、[（命名的）管道](http://hackage.haskell.org/packages/archive/unix/latest/doc/html/System-Posix-Files.html#v%3acreateNamedPipe)和[dbus](http://hackage.haskell.org/package/dbus)。对于后两者，您可能需要 Cygwin，因为它们最终依赖于安装 unix 包。

# graphics - 在 2D 上模拟透视矩形

> ID：11492343
> 
> 赞同：2
> 
> 时间：2012-07-15T13:34:39.353
> 
> 标签：graphics, opengl-es, 3d

所以，我目前正在开发一种益智游戏，但我遇到了一些我不知道如何解决的问题。

从下面的屏幕截图中可以看出，主正方形旁边的文本沿四边形的对角线扭曲。这是因为这不是 3D 环境的屏幕截图，而是 2D 环境，其中正方形已被拉伸，看起来像是 3D。

我尝试过使用 3D 透视和改变深度，虽然它解决了扭曲边的问题，但我想知道是否可以在不使用 3D 透视的情况下解决这个问题。主要是因为当前的网格转换方案需要一段时间才能实现，并且将其转换为适用于 3D 空间的东西是可以避免的额外*工作*。

我觉得这是不可避免的，但我很好奇是否有人知道解决方案。我目前正在使用 OpenGL ES 1。

![这将是最好的策略/益智游戏 evar！](../Images/de3e754f1325a744554ecfda31d1624f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:10:08.183

可能不是您想要的答案，但我会选择 3d 转换，因为它不仅可以为您节省这种失真，而且可以简化许多其他事情，并让您有机会做出漂亮的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T14:12:56.900

您在此场景中缺少的是“[透视正确插值](http://en.wikipedia.org/wiki/Texture_mapping#Perspective_correctness)”，它略微非线性，并且在您提供具有深度信息的坐标时自动完成。

可以用另一种方式模拟它（尽管您的选择有限，因为您没有可用的着色器），但它们的效率都可能低于使用 GPU 的专用功能。我建议您切换到使用 3D 坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:51:54.680

实际上，我刚刚找到了答案。原来有一个 Q 坐标，您可以使用它来处理梯形纹理失真：

[在 OpenGL 中用方形纹理映射梯形的纹理](https://stackoverflow.com/questions/5892120/texture-mapping-a-trapezoid-with-a-square-texture-in-opengl) [http://www.xyzw.us/~cass/qcoord/](http://www.xyzw.us/~cass/qcoord/) [http://hacksoflife.blogspot.com.au/2008/08/perspective-correct-texturing-in-opengl .html](http://hacksoflife.blogspot.com.au/2008/08/perspective-correct-texturing-in-opengl.html)

看起来它不会像 3D 那样正确，但我想我现在使用它会更容易。

# c++ - 根据成员类型可用性选择 C++ 模板专业化

> ID：11492347
> 
> 赞同：1
> 
> 时间：2012-07-15T13:35:26.853
> 
> 标签：c++, templates

我正在编写一种序列化类。它必须为容器提供功能。目前的实现是：

```
template <typename InsertIter>
bool readContainer(InsertIter result)
{
    typedef typename InsertIter::container_type::value_type tVal;
    UInt32 size = 0;

    if (!read(size))
        return false;

    for (UInt32 i = 0; i < size; ++i)
    {
        tVal val;
        if (!read(val))
            return false;
        *result++ = val;
    }
    return true;
}

template <typename InsertIter>
bool readMap(InsertIter result)
{
    typedef typename InsertIter::container_type::key_type tKey;
    typedef typename InsertIter::container_type::mapped_type tVal;
    UInt32 size = 0;

    if (!read(size))
        return false;

    for (UInt32 i = 0; i < size; ++i)
    {
        std::pair<tKey, tVal> pair;
        if (!read(pair))
            return false;
        *result++ = pair;
    }
    return true;
} 
```

如您所见，我必须为类似地图的类型 ( `std::map`) 和其他容器创建不同的实现，因为`std::map::value_type`is`std::pair(const K, V)`和 not `std::pair(K, V)`。

所以，我想创建`read(InsertIter)`一个自动选择适当的方法`readContainer(InsertIter)`or `readMap(InsertIter)`。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:14:07.077

我有一个非常相似的例子，你应该很简单地转换成你需要的东西：

```
#include <iostream>

template< typename T >
struct A;

template<>
struct A< int >
{
    void foo() const
    {
        std::cout<<"A(int)::foo()"<<std::endl;
    }
};
template<>
struct A< float >
{
    void foo() const
    {
        std::cout<<"A(float)::foo()"<<std::endl;
    }
};

template< typename T >
void call( const A<T> &a)
{
    a.foo();
}

struct B
{
    template<typename T>
    void bar(const A<T> &a)
    {
        call(a);
    }
};

int main()
{
    A<int> a1;
    A<float> a2;

    B b;
    b.bar(a1);
    b.bar(a2);
} 
```

您需要给出正确的名称，并在上面的示例中用适当的容器类型替换`int`和，并实现所需的功能。`float`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:38:40.367

我已经成功解决了我的问题。

感谢 Johan Lundberg，尤其是 nm - 我不熟悉[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)成语，您的链接和示例对我帮助很大。

我无法使用 C++11 功能（项目细节），但它们不是必需的。

当前代码如下所示：

```
struct SFINAE
{
    typedef char __one;
    typedef struct { char __arr[2]; } __two;
};

template <typename T> 
class has_mapped_type : public SFINAE
{
    template <typename C> static __one test(typename C::mapped_type *);
    template <typename C> static __two test(...);
public:
    enum { value = (sizeof(test<T>(0)) == sizeof(__one)) };
};

class Serializer
{
    template <typename InsertIter>
    bool read(InsertIter result) const
    {
        return readContainerSelector< InsertIter, 
            has_mapped_type<typename InsertIter::container_type>::value
            > ::read(result, *this);
    }

    template <typename InsertIter, bool isMapType>
    struct readContainerSelector;

    template <typename InsertIter>
    struct readContainerSelector<InsertIter, true>
    {
        static bool read(InsertIter result, Serializer const& ser)
        {
            return ser.readMap(result);
        }
    };

    template <typename InsertIter>
    struct readContainerSelector<InsertIter, false>
    {
        static bool read(InsertIter result, Serializer const& ser)
        {
            return ser.readContainer(result);
        }
    };

    // methods from my topic post
    template <typename InsertIter> bool readContainer(InsertIter result);
    template <typename InsertIter> bool readMap(InsertIter result)

}; 
```

# android - Android中的压缩ETC纹理更新 - glCompressedTexSubImage2D

> ID：11492350
> 
> 赞同：1
> 
> 时间：2012-07-15T13:36:00.770
> 
> 标签：android, opengl-es, textures, texture-mapping

我可以使用以下调用在 Android 中成功创建和加载 ETC 纹理：

```
ETC1Texture etc1tex = new ETC1Texture(...);
gl11.glCompressedTexImage2D(GL10.GL_TEXTURE_2D, 0/*level*/, 
                             ETC1.ETC1_RGB8_OES/*internal format*/,  
                 etc1tex.getWidth(), etc1tex.getHeight(),        
                 0/*border*/,   
                 etc1tex.getData().capacity()/*imagesize*/, 
                 etc1tex.getData()); 
```

但现在我需要用新的图像数据更新这个纹理。我正在使用对 SubImage 的调用：

```
GL11.glCompressedTexSubImage2D( GL10.GL_TEXTURE_2D, 0/*level*/,                    
            0,   0,     etc1tex.getWidth(), etc1tex.getHeight(),        
            ETC1.ETC1_RGB8_OES, 
            etc1tex.getData().capacity(), 
            etc1tex.getData()); 
```

这需要或多或少相同的参数，作为先前的调用。但它不起作用，我的纹理甚至没有改变一点。

但是，如果我只是将 SubImage 调用替换为第一个调用，我会在纹理更新时看到一些失真......

有谁知道我如何使用这个 CompressedTexSubImage 调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T04:31:57.177

是的，我遇到了同样的问题。

我用`glCompressedTexImage2D(texinfo.glTarget + face, level,glInternalFormat, pixelWidth, pixelHeight, 0,faceLodSize, data);`

有用。

但是当我使用

```
glCompressedTexImage2D(texinfo.glTarget + face, level,glInternalFormat, pixelWidth, pixelHeight, 0,faceLodSize, NULL); 
```

接着

```
glCompressedTexSubImage2D(texinfo.glTarget + face, level, 0, 0, pixelWidth , pixelHeight , glInternalFormat,faceLodSize, data); 
```

它不起作用。

```
gl error is GL_INVALID_OPERATION 
```

我需要使用`glCompressedTexSubImage2D`，因为我加载了一个纹理而不是一个缓冲区。可能会被加载到多个瓦片缓冲区中。如果一个图块加载完成，则调用`glCompressedTexSubImage2D`处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T17:52:48.610

根据 API ( [https://www.khronos.org/opengles/sdk/1.1/docs/man/glCompressedTexSubImage2D.xml](https://www.khronos.org/opengles/sdk/1.1/docs/man/glCompressedTexSubImage2D.xml) )

> “所需的调色板格式不允许子图像更新，但扩展定义的其他格式可以。”

我认为这意味着对于 ETC1 压缩，不允许使用子图像。

# java - Java 的 Coverity 静态分析：查找不适当的异常处理

> ID：11492352
> 
> 赞同：3
> 
> 时间：2012-07-15T13:36:25.593
> 
> 标签：java, exception-handling, static-analysis

几个月来，我们一直在测试 Java 的 Coverity 静态分析（版本 5.5.1）。很高兴发现那些潜在的 RESOURCE_LEAK，但我们也希望能够找到不适当的异常处理。最简单的情况是，我们只想找到所有忽略异常的地方，例如：

```
catch (SomeException se) {
    // TODO Auto-generated catch block
} 
```

以及捕获顶级异常的位置，例如：

```
catch (Exception e) {
    e.printStackTrack();
} 
```

Coverity 的手册谈到了使用自定义建模，但我不确定这是否是一个合适的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T22:06:22.283

目前不支持像 C/C++ 那样为 Java 编写自定义检查器，但我相信它会在未来推出。这是创建标记您想要查找（和修复）的特定行为的检查器的最佳方式。

Coverity Java 分析也运行 FindBugs 作为它的一部分 - FB 是否没有警告捕获未引发的异常？我相信这可能会解决你的第二个案例。我认为他们也有一个空的 catch 块，尽管我现在找不到指向它的链接。

# iphone - 从 Phonegap 过渡到原生应用

> ID：11492354
> 
> 赞同：0
> 
> 时间：2012-07-15T13:36:46.520
> 
> 标签：iphone, ios, cordova

我们正在寻求为教育行业创建一个应用程序。第一个应用程序，我们认为我们可以从 Phonegap 开始以加快速度，然后在未来过渡到 Objective-C iPad 应用程序。

有谁知道这种转变会是什么样子？我们希望它可以在 iOS 上的同一应用程序上进行 v1.x 到 v2.0 的更新，而无需安装新应用程序。我们不关心Android用户（对不起），edu领域目前都是Apple。

提前致谢

双边投资条约

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:48:29.070

过渡如下：

1.  您将学习 Objective-C 和 Cocoa Touch API 以制作原生 iOS 应用程序。
2.  然后，您需要重写所有 HTML/CSS/JavSscript 源代码，以在 Objective-C 中生成等效的应用程序。（2.5 如果您的应用程序使用 AJAX 等与 Web 服务通信，这可能会很棘手——本机网络并不像来自 JS 的 Web 浏览器那样简单。）
3.  之后 AppStore 中的更新应该会非常好——PhoneGap 只是使用原生的“骨架”应用程序来嵌入 Web 浏览器视图，因此不需要进行重大更改。

# c - rvalue for indirection operator in c

> ID：11492355
> 
> 赞同：0
> 
> 时间：2012-07-15T13:36:47.803
> 
> 标签：c

I am confused about working of the below statement:

```
*ptr++->str 
```

First `++` operator is applied to `ptr` which returns rvalue. Next operator is `->` has to be applied. Doesn't `->` operator require lvalue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:48:49.277

> Doesnt `->` operator require lvalue?

No. See section 6.5.2.3 of the C99 standard:

> The first operand of the `->` operator shall have type ‘‘pointer to qualified or unqualified structure’’ or ‘‘pointer to qualified or unqualified union’’, and the second operand shall name a member of the type pointed to.
> 
> ...
> 
> A postfix expression followed by the `->` operator and an identifier designates a member of a structure or union object. The value is that of the named member of the object to which the first expression points, and is an lvalue.

And that's all it says on the matter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:59:22.933

This could be a possible definition for the struct.

```
#include <stdio.h>

struct fuzz {
        char *str;
        } stuff = {"Hi there!"} ;

struct fuzz *ptr = &stuff;

int main()
{
char ch='@';

printf("Before: p=%p, ch=%c\n", (void*) ptr, ch);

ch = *ptr++->str;

printf("After: p=%p, ch=%c\n", (void*) ptr, ch);

return 0;
} 
```

Output:

```
Before: p=0x601020, ch=@
After: p=0x601028, ch=H 
```

And the output proves that the pointer expression is an lvalue. Modifyable, if str would not point to a string constant.

# javabeans - play2 框架是否在 avaje ebeans bean 缓存上使用 ehcache 包装器？

> ID：11492360
> 
> 赞同：0
> 
> 时间：2012-07-15T13:37:49.937
> 
> 标签：javabeans, playframework-2.0, ebean

play2 框架是否在 avaje ebeans bean 缓存上使用 ehcache 包装器？

在我看来，ehcache 必须更高效，并且围绕标准 bean 缓存实现包装器并不难。但我不知道 play2 如何使用 bean 缓存本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:58:52.387

根据[Ebean/Play 集成](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/db/ebean/EbeanPlugin.java)，Play 似乎没有为 Ebean 设置任何 L2 缓存。

所以 Ebean 必须使用它的默认缓存机制 ( `com.avaje.ebeaninternal.server.cache.DefaultServerCache`)。

# javascript - 使用 this.argu 存储参数是一种好习惯吗？

> ID：11492362
> 
> 赞同：1
> 
> 时间：2012-07-15T13:38:01.190
> 
> 标签：javascript, arguments

我是前端开发的新手，现在我正在阅读我公司其他人编写的大量 js 代码，发现他们会使用这种语法来存储参数：

```
function func1(argu1,argu2){
   this.argu1 = argu1;
   this.argu2 = argu2;
   // other code run here....
} 
```

对我来说，我通常跳过这个并直接在我的代码中使用参数或获取 n 的变量，如下所示：

```
function func2(argu1,argu2){
   alert(argu1);
   alert(argu2);
   var arguOne = argu1,arguSec = argu2;

  // other code run here...
} 
```

所以我想问为什么要使用这种语法来存储参数？这是一个好习惯吗？为什么？我有没有错过一些我应该知道的概念？

看看[小提琴](http://jsfiddle.net/strangeline/T29vd/)，由我不再是前端的同事写的....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:44:39.510

在您的第一个示例中， func1 可用于创建对象。它实际上是一个类定义（构造函数）。它可以按如下方式使用：

```
function func1(argu1,argu2)
{
   this.argu1 = argu1;
   this.argu2 = argu2;
}

var instance = new func1('a', 'b');
alert(instance.argu1);
alert(instance.argu2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:11:28.793

Lordy lord：与其定义函数并在最后调用它，不如尝试使用闭包。只需保持函数定义不变，但将其放在括号中：

```
(function new_slider (arguments)
{
    //your code here
})('#new_slider',1500,150,10); 
```

这样，函数被声明并同时被调用，主`new_slider`函数中定义的所有函数都可以访问参数。绝对没有理由使用`this.argu1`来存储这些值。如果有的话，它会创建全局变量，这被认为是不好的做法。

请在 JavaScript 中使用 Google 闭包，它们非常强大

# jquery - jQuery：输入值在 keyup 上丢失？

> ID：11492367
> 
> 赞同：2
> 
> 时间：2012-07-15T13:38:22.923
> 
> 标签：jquery

我有一个简单的表单，当用户在输入字段上按下回车键时，我想提交（即触发 ajax）。如果我按下提交按钮，事件会很好地触发，但是当使用 keyup 触发完全相同的功能时，输入字段的值是空白的。**我尝试使用$(this).val()**传递输入字段的值（来自 keyup 函数），但传递的参数仍然是空白的。

**更新二：**问题仅在初始加载时出现。点击刷新后，事件按预期触发。在 Chrome 和 FF 中测试。

[http://jsfiddle.net/R5QsC/1/](http://jsfiddle.net/R5QsC/1/)

```
// Value of #pin is blank in getKeyAjax()
$('#pin').keyup(function(e) {
    if (e.keyCode == 13) {
        console.log('DEBUG: Keypress detected (13)')
        getKeyAjax();
    }
});
// Value of #pin is correct in getKeyAjax()
$('#btnPwdCreate').click(function() {
    getKeyAjax();
});

function getKeyAjax() {
    console.log('DEBUG: Starting ... getKeyAjax()');
    var txtPin = $('#pin').val();
    console.log('DEBUG: Value of txtPin: ' + txtPin);
   .
   .
   .
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:41:39.770

我注意到你的小提琴可能导致这种情况的一件事。在使用表单域时，我注意到有时我会收到一条提示“仅 4 位数字”的警报，但通常我没有。问题是你的`form`标签。点击回车会触发浏览器的默认行为：非 ajax 表单提交。如果这在您`$.GET`运行之前完成，它将与您描述的行为一致，刷新后 js 被缓存，然后可能会更快地评估允许 $.get 在提交和刷新发生之前。它只是一个理论，但最终它给你留下了两个选择：

1.  从您的 html中删除`<form>`标签。
2.  `$('form').on('submit', function(e){e.preventDefault();});`

1# 将具有没有默认提交的效果，因为没有`<form>`这样做。2# 覆盖`onsubmit`事件以防止默认提交（让您保留表单标签）。

无论这是否解决了您要解决的问题，无论如何，您的脚本都需要它。在表单内输入输入时，它是执行 ajax 的关键。

[http://jsfiddle.net/9TYhT/](http://jsfiddle.net/9TYhT/)

上面拨弄。行为现在是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:44:02.463

尝试这个：

```
$(document).ready(function(){ // make sure DOM is ready to be manipulated
  // ...

    $('#pin').keyup(function(e) {
        if (e.which == 13) {
            getKeyAjax();
            e.preventDefault() // prevents form from being submitted
        }
    });

  // ...
}) 
```

# spring - 类型不匹配 - 为什么我收到此错误？

> ID：11492368
> 
> 赞同：2
> 
> 时间：2012-07-15T13:38:31.827
> 
> 标签：spring

我的代码如下所示：

```
import org.apache.catalina.core.ApplicationContext; 
import org.springframework.context.support.ClassPathXmlApplicationContext;

public static void main(String args[]) {
    ApplicationContext context = 
        new ClassPathXmlApplicationContext("spring_conf.xml");
} 
```

为什么我收到此错误？

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
Type mismatch: cannot convert from ClassPathXmlApplicationContext to ApplicationContext

at root.Main.main(Main.java:11) 
```

我有什么遗漏或做错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T13:46:04.390

将您的第一个 Spring 导入更改为：

```
import org.springframework.context.ApplicationContext 
```

这是 ClassPathXmlApplicationContext 实现的正确接口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T13:47:17.493

导入`org.apache.catalina.core.ApplicationContext` 不正确，应该是

```
org.springframework.context.ApplicationContext 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T05:38:30.543

这是一个简单的解决方案。

将 import 语句替换`org.apache.catalina.core.ApplicationContext;`为以下 import 语句：

```
import org.springframework.context.ApplicationContext; 
```

肯定有效，如果没有，请告诉我。

# vba - IE9 文件下载提示破坏了我的 VBA 宏

> ID：11492379
> 
> 赞同：-1
> 
> 时间：2012-07-15T13:40:06.317
> 
> 标签：vba, internet-explorer, outlook, internet-explorer-9

我有一个 Outlook 宏，它每天使用 IE8 保存和打印数百个 PDF 文件。我们正在升级到 IE9，到目前为止我的测试表明该脚本将无法运行，因为 IE9 不允许禁用文件下载提示。我不能使用 sendkeys，屏幕被锁定在运行脚本的工作站上。该脚本必须使用 IE 下载，因为它访问远程端的 CGI 脚本以验证和获取文档。不是直接下载。所以我似乎无法逃脱 IE9 的安全性。

有没有办法让文档在 Acrobat 之外的 IE 中打开并以这种方式保存文档？我想要 AutoIT 或任何其他我可能无法购买/安装的第三方实用程序之外的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:15:47.137

您说脚本“必须使用 IE，因为它在远程访问 CGI 脚本”。

首先想到的是，无论如何，IE 在这里可能是错误的工具。

您所描述的是一个自动化过程（特别是关于工作站被锁定的部分），因此具有图形用户界面（如网络浏览器）的程序不适合这项工作。

为此，您真正需要的是一个可用于编写脚本的命令行 HTTP 下载工具。

幸运的是，有这样一个工具：我建议你下载[WGet](http://www.gnu.org/software/wget/)。

然后，您可以打开命令提示符并简单地编写：

```
wget http://servername/filename.pdf 
```

这将完全像 IE 下载文件一样下载文件，并将其保存到本地磁盘以供您打印或其他任何您需要做的事情。

结合`wget`一些简单的脚本工具，你会发现完全可以绕过IE。

我建议这是一个比试图让 IE 按照你的方式行事要好得多的解决方案。

希望有帮助。

# sqlite - SQLite 它在哪些平台上运行？

> ID：11492383
> 
> 赞同：-1
> 
> 时间：2012-07-15T13:40:34.367
> 
> 标签：sqlite, serialization, cross-platform, object-persistence, nintendo

我想在 C++ 中使用 SQLite 进行对象持久性来制作游戏（我正在考虑使用 SDL）。无论如何，SQLite 是如何跨平台的？它适用于 Windows、Mac、Linux 和 Android，对吗？黑莓、iOS、任天堂便携式和控制台系统以及 Playstation 和 XBox 系统怎么样？它在那些系统上工作吗？或者如果不是，什么在这些系统上工作。如果我的目标是超跨平台，有没有比 SQLite 更好的解决方案？

另外-我应该使用普通序列化，例如增强序列化吗？我想使用 SQLite，因为我不想将平面文件用于对象存储，因为我觉得加载对象会更快 - 特别是因为我可能并不总是按顺序加载对象。

我的想法是创建我自己的带有加载和保存函数的串行抽象基类，并从中派生类，并为每个类编写自定义加载和保存函数以与 SQLite 数据库交互。

我想知道是否有人也可以就此提出任何更好的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:41:56.030

SQLite 是最便携的代码之一。很有可能它已经在您提到的所有设备中运行，以及您的手机、GPS、汽车仪表板等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:43:40.833

确认它可以在 iOS 上运行。事实上，CoreData 框架依赖于它。

# android - 为来电和消息自动发送短信

> ID：11492385
> 
> 赞同：0
> 
> 时间：2012-07-15T13:41:04.817
> 
> 标签：android, sms, phone-call

我是一名 UG 学生.....我正在创建一个 android 应用程序作为我的项目工作我的应用程序是......在日历中设置一个事件......我的应用程序从日历中检索开始时间和结束时间并将在那段时间内收到的电话和消息静音，并在需要时自动向电话和消息发送短信......对于短信，但如果用户选中复选框，我不明白如何发送消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:05:21.600

*   您可以根据复选框将用户首选项存储在数据库中（或共享首选项或[任何其他方式）](http://developer.android.com/guide/topics/data/data-storage.html)
*   检查首选项，每当您可以发送消息的事件发生并使用以下代码以编程方式发送消息时

    ```
     SmsManager sms = SmsManager.getDefault();
        try
        {
            sms.sendTextMessage(phoneNumber, null, messageText, null, null);
        }
        catch(IllegalArgumentException e)
        {

        } 
    ```

# zend-framework - Zend Framework - 控制器如何指向模型？

> ID：11492386
> 
> 赞同：0
> 
> 时间：2012-07-15T13:41:09.910
> 
> 标签：zend-framework

这是一个我在谷歌搜索数小时后无法弄清楚的问题，Zend Framework 文档没有解释我需要知道的内容。

我有一个文件：/application/controllers/RegisterController.php

```
class RegisterController extends Zend_Controller_Action
{
} 
```

我如何指向这个文件以使用来自：/application/models/User.php 的类

```
class Application_Model_User
{
} 
```

当文件命名为 Register.php 时，代码运行良好

我需要进行哪些配置才能将控制器指向特定型号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:32:06.807

在您的引导程序中，您可以从声明命名空间开始：

```
protected function _initAutoload() {
    //Autoloader
    $autoLoader = Zend_Loader_Autoloader::getInstance();
    $resourceLoader = new Zend_Loader_Autoloader_Resource(array(
            'basePath' => APPLICATION_PATH,
            'namespace' => '',
            'resourceTypes' => array(

                    //Tells the application where to find the models
                    'model' => array(
                            'path' => 'models/',
                            'namespace' => 'Model_'
                            )
                    )
        ));

    return $autoLoader;
} 
```

你的模型：/application/models/User.php

```
class Model_User extends Zend_Db_Table_Abstract 
{
} 
```

然后在你的控制器中：/application/controllers/RegisterController.php

```
class RegisterController extends Zend_Controller_Action
{
public function indexAction() {
$model = new Model_User();
}
} 
```

# jquery - jquery如何获取元素位置

> ID：11492391
> 
> 赞同：4
> 
> 时间：2012-07-15T13:41:33.297
> 
> 标签：jquery, css, scroll

我正在尝试将侧边栏位置绝对更改为固定。这个想法是侧栏将是绝对的，直到它接触到页脚，然后它会被固定。所以下面的代码在我的大显示器上运行良好，但在我的小显示器上，侧边栏在碰到页脚之前就固定了，我假设在更大的显示器上，侧边栏会进入页脚并且下面的代码不会触发。

```
$(document).scroll(function() {
    if ($(this).scrollTop() < 5953) {
        $('.hanger').addClass(' hanger sidebar');
        $('.xoxo').removeClass('xoxo2 ')
        $('.xoxo').css("position", "fixed");
    }
}) 
```

那么有没有办法`5953`动态获取号码呢？我试过： `var value = $('#footer').scrollTop()`和var value =`$('#footer').offset().top`然后传递`value`变量而不是固定数字

这是演示[http://aurelslab.co.uk/](http://aurelslab.co.uk/) - 如果您的显示器更大或更小，那么您会看到侧边栏无法正常工作

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T18:07:34.610

这就是你要找的吗？

```
var value           = $(window).height() + $(window).scrollTop(); 
var elementTop      = $('#pagefooter').offset().top;

if( value >= elementTop ) {
    $('.hanger').removeClass('sidebar');
    $('.xoxo').addClass('xoxo xoxo2')
    $('.xoxo').css("position","absolute");  
}
else if( value < elementTop ) {
    $('.hanger').addClass(' hanger sidebar');
    $('.xoxo').removeClass('xoxo2 ')
    $('.xoxo').css("position","fixed");  
} 
```

我在本地对其进行了测试，无论您的窗口大小如何，它似乎都可以工作。它基本上将窗口大小添加到滚动顶部以查看页脚是否已移动到视口中。

### 2 个音符

在移动设备上滚动时（如 iOS），当所有动量结束时会触发滚动事件。因此，您不会看到在桌面上看到的平滑移动。

而你的页脚的 id 不是`footer`but `pagefooter`。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:45:12.710

要访问页脚元素，您可以使用元素 id 或元素。

## 例子：

*   要访问页脚元素：`$('footer')`
*   要访问页脚 ID：`$('#pagefooter')`

只需这样做，即可找到当前页脚位置。

```
var currentPosition = $('footer').position().top - $(window).height(); 
```

我已经准备了一个粗略的**[LIVE DEMO](http://jsfiddle.net/SivaCharan/kjbLL/2/)**来解释你。

# php - 阻止变量在自调用时重置

> ID：11492395
> 
> 赞同：1
> 
> 时间：2012-07-15T13:42:25.200
> 
> 标签：php

在下面的 PHP 代码中，我尝试生成一个随机数（如果它还没有）并将其存储在一个名为 的变量中`$number`，我还接受用户输入并将其存储在`$userInput`.

每次按下提交按钮时，都会使用 再次调用相同的页面`$_SERVER['PHP_SELF']`。

我的问题是我希望`$number`一旦设置它就保持它的价值。无论提交按钮被按下多少次，现在都不会发生这种情况。`$number`每次按下提交按钮时都会设置。

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Number Guessing Game!</title>
    </head>
    <body>
        <?php 
            $userInput = $_POST['number'];
            if(!$number){
                 $number = rand(1, 500);
            }
            else{
                 echo "random number is $number <br>";
                 echo "you entered $userInput";
            }

            echo "<h3> $number </h3>"; //just to see if the number is changing everytime
       ?>
       <form method="post" action="<?php echo $_SERVER["PHP_SELF"];?>">
            <input type="text" name="number" /> <input type="submit" name="Submit"
            value="Submit" />
       </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:45:09.420

要使您的随机数在页面浏览量之间保持不变，您需要使用会话

[http://www.tizag.com/phpT/phpsessions.php/](http://www.tizag.com/phpT/phpsessions.php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:48:00.460

不使用 cookie 或会话的最简单方法就是在表单的隐藏字段中传递值。按下提交时，它将被传递。

如果您希望它在稍后返回页面时具有相同的值（即关闭浏览器然后在稍后阶段重新打开），请使用 cookie/会话。如果您只希望它在按下提交按钮时保持不变，请使用表单隐藏字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T13:49:14.903

您需要实现 PHP 会话。您分配给 $number 的数字只能在设置后调用的代码中访问。

[W3Schools PHP 会话教程](http://w3schools.com/php/php_sessions.asp)

希望该链接对您有所帮助。

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T13:54:31.960

在 php 运行脚本后，变量被销毁。使用 cookie、seesion 或 sql 将数据保存在页面上。

# objective-c - 显示键盘时无法与 ScrollView 中的（某些）UI 元素交互

> ID：11492400
> 
> 赞同：3
> 
> 时间：2012-07-15T13:44:14.613
> 
> 标签：objective-c, ios, ipad, uiscrollview, uikeyboard

我有一个相当基本的界面，通常看起来像这样：

![在此处输入图像描述](../Images/3dabf20efea27e8a63e5fedcbf122499.png)

相当缺乏灵感，但这就是规范所说的构建。无论如何，部分问题是当屏幕键盘弹出时，会发生这种情况：

![在此处输入图像描述](../Images/aa61bf14786a4fdce3b90648d6dfd2c8.png)

现在这本身并不是一个大问题。我已经将所有内容都包含在 a`UIScrollView`中，并且正在使用以下代码来处理键盘的显示和隐藏：

```
- (void) moveTextViewForKeyboard:(NSNotification*)aNotification up: (BOOL) up{
    NSDictionary* userInfo = [aNotification userInfo];

    // Get animation info from userInfo
    NSTimeInterval animationDuration;
    UIViewAnimationCurve animationCurve;

    CGRect keyboardEndFrame;

    [[userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey] getValue:&animationCurve];
    [[userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey] getValue:&animationDuration];

    [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardEndFrame];

    // Animate up or down
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:animationDuration];
    [UIView setAnimationCurve:animationCurve];

    CGRect newFrame = referrerInfoView.frame;
    CGRect keyboardFrame = [self.view convertRect:keyboardEndFrame toView:nil];

    newFrame.size.height -= (keyboardFrame.size.height - 71) * (up? 1 : -1);
    referrerInfoView.frame = newFrame;
    referrerInfoView.contentSize = CGSizeMake(703, 633);

    //FIXME:  doesn't play nice with rotation when the keyboard is displayed
    if (up && UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation)) {
        UIView* focusedField = [referrerInfoView findFirstResponder];
        if (focusedField && focusedField.frame.origin.y > 340.0) {
            referrerInfoView.contentOffset = CGPointMake(0.0, focusedField.frame.origin.y - 200.0);
        }
    }
    else {
        referrerInfoView.contentOffset = CGPointMake(0.0, 0.0);
    }

    [UIView commitAnimations];
} 
```

不是世界上最强大的东西，但它现在已经足够好了。这让我到了这里：

![在此处输入图像描述](../Images/31b2103871c2d3f446f57fcf65926343.png)

现在这很好，除了*在键盘保持在屏幕上时，阴影框中的任何元素都不会响应用户交互*。`UIScrollView`响应交互，视图中的所有其他控件也是如此。但是所有“地址”字段都停止工作。

从本质上讲，在我将它们滚动回视图之前隐藏在键盘后面的所有控件似乎仍然认为它们被隐藏在键盘后面。有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T04:53:57.877

我找到了解决方案。基本上我最初的布局是这样的：

```
UIScrollView
    UIView
        <Components> 
```

滚动视图内部的容器视图并不是绝对必要的，但它似乎也不应该伤害任何东西。事实证明，这种假设是不正确的。长话短说，我更改了界面，使其结构如下：

```
UIScrollView
    <Components> 
```

这解决了问题。不能说我真的明白为什么，但希望这些信息能帮助下一个碰巧遇到这个问题的人。

# javascript - 将 img 标签的 src 设置为 javascript 函数的结果

> ID：11492413
> 
> 赞同：1
> 
> 时间：2012-07-15T13:46:48.760
> 
> 标签：javascript, html, function, image, src

我有一个函数 getImgurUrl() ，我希望它返回的是 img 标签的 src 值。

我怎样才能做到这一点？

我的功能：

```
function getImgurUrl() {
    //get imgur url for current image
    var cookieArray = document.cookie.split(";");
    var encodedURL = cookieArray[2].split("=");
    var decodedURL = decodeURIComponent(encodedURL[1]);
    return decodedURL;
} 
```

和 img 标签：

```
<img id="image" name="image" src=""  alt="If you're seeing this something is wrong."> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T13:51:22.637

```
window.onload = function() {
    document.getElementById("image").src = getImgurUrl();
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:53:10.567

```
function getImageUrl(imageId) {
  return document[imageId].src;
}

<img id="mike" src="http://yoursite.com/images/1.jpg" /> 
```

我没有测试过这个，但你明白了。

我不确定你在用 cookie 逻辑做什么，所以只是保持示例简单。

--

我建议您添加 jQuery 来处理跨浏览器兼容性，因为 getElementById 或其他可能无法一直工作，所有版本，还有文档。可能不太好，有时是 window.functionName()

在 jQuery 中，您将类似地引用图像 src，但在我的返回中，您将使用 id 连接一个磅符号：

```
return $('#' + id).src; 
```

# c++ - 绘制圆形轮廓的百分比

> ID：11492414
> 
> 赞同：2
> 
> 时间：2012-07-15T13:46:50.817
> 
> 标签：c++, opengl

在 OpenGL 中，如何绘制给定*百分比*的圆*轮廓？*以及如何控制该轮廓的粗细？

示例：如果百分比为 100，则应绘制一个完整圆的轮廓。如果百分比为 50，则应绘制半个圆的轮廓。

我尝试了以下方法，但问题在于它完成了线环，导致连接圆轮廓的起点和终点的线。此外，它不会让我改变轮廓的粗细。

```
glBegin(GL_LINE_LOOP);

    for (int i=0; i < (360/10*percent/10); i++) {
        float degInRad = i*DEG2RAD;
        glVertex2f(a+cos(degInRad)*r,b+sin(degInRad)*r);
    }

glEnd(); 
```

我很想把 GL_POINTS 圈起来，但我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T13:58:29.810

替换`GL_LINE_LOOP`为`GL_LINE_STRIP`，这样最后一个顶点和第一个顶点不相连。使用该`glLineWidth()`功能来定义您的线条粗细。

# eclipse - 如何使主菜单中的元素可见/不可见（取决于编辑器类型）

> ID：11492422
> 
> 赞同：2
> 
> 时间：2012-07-15T13:48:05.873
> 
> 标签：eclipse, eclipse-rcp

在我的 RCP 应用程序中，我有两种类型的编辑器（一种用于 *.xsd 文件，另一种用于其他文本文件）。我在主菜单中添加了新元素，我只想在 xsd 编辑器处于活动状态时显示它，当其他编辑器处于活动状态时它应该是不可见的（在 Eclipse 中，“重构”选项在打开是 java 文件时可见，打开时不可见是 xml文件）。如何使主菜单中的可见/不可见元素取决于编辑器类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:42:47.107

查看[org.eclipse.ui.menus](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_menus.html&cp=2_1_1_170)扩展点，特别是`visibleWhen`元素。您可以将命令添加到主菜单子菜单，并在**activeEditorId** == 您的编辑器 ID 时使它们可见。

```
<visibleWhen>
   <with variable="activeEditorId">
      <equals value="org.eclipse.example.my.editor"/>
   </with>
</visibleWhen> 
```

另请参阅[核心表达式](http://wiki.eclipse.org/Command_Core_Expressions)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:50:58.910

据我所知，您无法更改菜单项的可见性。您要做的不是首先添加项目，具体取决于该编辑器是否处于活动状态。如果您可以发布有关如何添加菜单项的代码（因为有多种方法可以做到这一点），我可以帮助您进一步了解如何检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:37:39.990

如果菜单项的命令没有活动处理程序，则该项目不会出现在您的菜单中。

[查看这个问题](https://stackoverflow.com/questions/11450052/enable-disable-menu-item-in-eclipse-plugin)，了解使用**activeWhen**根据当前选择控制菜单中命令的可用性的示例。

# .htaccess - 为什么我的 RewriteRule 在 URL 中有 `?` 时不起作用

> ID：11492423
> 
> 赞同：1
> 
> 时间：2012-07-15T13:48:17.093
> 
> 标签：.htaccess, mod-rewrite

我正在学习如何为 .htaccess 重定向编写正则表达式。到目前为止，我已经设法弄清楚我需要的一切，除了几个不符合我预期的正则表达式。我正在使用桌面应用程序测试我的正则表达式，它们在那里工作正常，但在 .htaccess 文件中却不行。

仅供参考： RewriteBase 设置为`/site/`

这是传入的 URL： `/site/view-by-tag/politics/?el_mcal_month=3&el_mcal_year=2009`

我想抓住“政治”并重定向到`/site/tags/politics/`

这是我使用的：

`RewriteRule ^view-by-tag/([a-zA-Z\-]+)/([a-zA-Z0-9\-\/\.\_\=\?\&]+) /tags/$1/ [R=301,L]`

我在之后添加了所有字符的捕获，`politics`因为我遇到的问题是，当`?`URL 中有一个时，重定向不起作用，我不知道为什么。在上面给出的 URL 中，如果我删除`?`它可以正常工作，但如果`?`它在那里，则不会发生任何事情。是否有一个原因？

当我尝试`307`从`/site/?option=com_content&view=article&id=307&catid=89&Itemid=55`

我使用了这个正则表达式，`article&id=([0-9]+) /?p=$1 [R=301,L]`但同样，当`?`URL 中有 a 时，它会停止重定向以执行任何操作。

这是什么原因？

有问题的`.htaccess`文件位于 Wordpress 博客 (3.4.1) 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:36:08.590

如果需要操作查询字符串，则必须在 a 中单独`RewriteCond`处理，并且不应在其中匹配，`RewriteRule` 而是仅匹配*不*包含查询字符串的请求，并用于`QSA`将查询字符串附加到重定向：

```
RewriteRule ^view-by-tag/([A-Za-z-]+)/?$ /tags/$1/ [R=301,L,QSA]
# OR, if you don't want the rest of the query string appended, put a `?` onto 
# the redirect to replace it with nothing
RewriteRule ^view-by-tag/([A-Za-z-]+)/?$ /tags/$1/? [R=301,L] 
```

实际上，重定向中`QSA`可能不需要`R`- 我认为默认行为是通过重定向传递查询字符串。

如果您需要`307`从查询字符串中捕获，请在 a 中执行并在中`RewriteCond`捕获`%1`：

```
# Capture the id in %1
RewriteCond %{QUERY_STRING} id=([\d]+)
# Redirect everything to /, pass %1 into p
RewriteRule . /?p=%1 [LR=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:44:19.320

您错过的一点是重写引擎将 URI 分为两部分：**REQUEST_URI**和**QUERY_STRING**。查询字符串部分未在规则匹配字符串中使用，因此构建*规则*正则表达式模式来查找它没有意义。

**您可以通过使用重写条件和条件正则表达式来设置%N**变量，从查询字符串中探查和挑选参数。

默认情况下，查询字符串会附加到输出替换字符串中，除非您在其中包含一个`?someparam`- 在这种情况下，*除非*您使用 [QSA]（查询字符串追加）参数，否则它会被忽略。

您获取 id 的`/site/?option=com_content&view=article&id=307&catid=89&Itemid=55`方式是使用以下内容：

```
RewriteCond %{QUERY_STRING} \bid=(\d+) 
```

在规则之前，这将设置`%1`为 307。阅读[rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)以获取有关如何执行此操作的更一般性的讨论。

# iphone - iPhone 应用程序使用 core-plot（修复什么）？

> ID：11492424
> 
> 赞同：0
> 
> 时间：2012-07-15T13:48:16.933
> 
> 标签：iphone, objective-c, core-plot

我正在制作使用 Core-Plot 图表的 iphone 应用程序。该应用程序将“SavolaViewController”作为包含按钮的主类，当单击按钮时，此代码将转到另一个名为“ChartViewController”的类

```
ChartViewControllerVar = [[ChartViewController alloc]initWithNibName:@"ChartViewController" bundle:nil];
[self presentModalViewController:ChartViewControllerVar animated:YES]; 
```

我已经阅读 core-plot 4-6 小时，但我没有理解任何教程（无法理解）[（{“请不要用教程链接回答”}）]

我已经处理了 Core-Plot .zip 文件中示例中的 Core-Plot 代码（您将在下面的链接中找到代码）。

我在控制台中有这个味精

> 2012-07-15 16:38:31.325 Savola[13105:f803] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“-[UIViewController _loadViewFromNibNamed:bundle:] 加载了“ChartViewController”笔尖，但视图出口没有放。' *** First throw call stack: (0x140a022 0x19c2cd6 0x13b2a48 0x13b29b9 0x4102dd 0x410779 0x41099b 0x4199bc 0x414818 0x630565 0x417857 0x4179bc 0xca94792 0x4179fc 0x9a4f 0x3da5c5 0x3da7fa 0xc6f85d 0x13de936 0x13de3d7 0x1341790 0x1340d84 0x1340c9b 0x228f7d8 0x228f88a 0x349626 0x8c0a 0x2c55) terminate called throwing an exception(lldb)

我想要什么（如果可以的话）

1.  修复代码以在我的应用程序中运行。
2.  我需要什么，但在 .xib 文件中。
3.  删除不需要的代码。

[编码](http://ar2.co/Core.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:30:38.640

这与核心情节无关。您的 .xib 中有一个未正确连接的 IBOutlet。

# css - 带有悬停父项的下拉菜单

> ID：11492437
> 
> 赞同：0
> 
> 时间：2012-07-15T13:50:57.187
> 
> 标签：css, drop-down-menu, menu

我想要简单的下拉菜单。但我有一个问题。我希望当我将鼠标悬停在放置的项目（drop-menu-items）上时，我的父元素（drop-menu-parent）用黑色着色，但它是白色的。我不能很好地解释它。你可以在这里看到它-> [http://jsfiddle.net/YEyuP/](http://jsfiddle.net/YEyuP/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:14:08.600

我认为这就是你需要的：http: [//jsfiddle.net/YEyuP/6/](http://jsfiddle.net/YEyuP/6/)

HTML：

```
<nav>
        <ul id="cat-nav">
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
            <li class="drop-menu-parent">
                <a href="#">Portfolio</a>

                <ul class="drop-menu-items">
                    <li><a href="#" title="Some other category">Some other category</a></li>
                    <li><a href="#" title="Some other category">Some other category</a></li>
                    <li><a href="#" title="Some other category">Some other category</a></li>
                    <li><a href="#" title="Some other category">Some other category</a></li>
                </ul>
            </li>
            <li><a href="#">Testimonials</a></li>
            <li><a href="#">Browse Products</a></li>
            <li><a href="#">Support Forum</a></li>            

        </ul>
    </nav>
​ 
```

CSS：

```
nav {
    background: #000;
}

#cat-nav {
    text-align: center;
    background-color: #0f0609, #0f0609;
    background-image: url(cat-nav-bg.jpg), url(cat-nav-bg-bottom.jpg);
    background-repeat: no-repeat, repeat-y;
    margin-top: -8px;
    display: block;
}

#cat-nav:after {
    content: " ";
    display: block;
    clear: both;

    width: 81%;
    padding-top: 8px;
    margin: 0 auto;
    background: url(teeth.png) repeat-x;
}

ul#cat-nav > li {
    text-align: center;
    display: inline-block;

}

#cat-nav a:link { color: #fff; text-decoration: none; padding: 10px; display: inline-block;}
#cat-nav a:hover { color: #fff; text-decoration: none; }
#cat-nav a:visited { color: #fff; text-decoration: none; }
#cat-nav a:active { color: #fff; text-decoration: none; }

ul .drop-menu-items  {
    position: absolute;
    display: none;
    background: #fff url(drop-menu-bg.png) bottom repeat-x;
    -webkit-box-shadow: 0px 5px 5px #8f8f8f;
    -moz-box-shadow:    0px 5px 5px #8f8f8f);
    box-shadow:         0px 5px 5px #8f8f8f;
    border-radius: 0 10px 10px 10px;

}

ul.drop-menu-items  li{
    background: url(drop-menu-bullet.png) no-repeat 5px center;
    float: none;
    position: relative;
    color: #000;
    padding: 5px 15px;
    margin: 0 10px; 
    border-bottom: 1px dotted #cecece;
}

ul.drop-menu-items  li:hover {
    background: #f0f0f0 url(drop-menu-bullet.png) no-repeat  5px center;
} 

.drop-menu-parent:hover .drop-menu-items {
    display: block;
    z-index: 1000;
}

#cat-nav > li:hover a{
    color:#000;
}

ul#cat-nav li   a:hover {
    background: #fff;
    border-radius: 5px;
    /* padding-top: 5px; */

}

#cat-nav .drop-menu-items li a {
    color: #000;
}

#cat-nav .drop-menu-items li:hover a {
    text-decoration: underline;
    background: none;
    color:     #000;
}

.drop-menu-parent:hover {
    background: #fff;
    background-color: #fff;
    border-radius: 5px 5px 0 0;

}
​ 
```

**解释**

我添加的是这个：

```
#cat-nav > li:hover a{
    color:#000;
} 
```

'>' 表示直接子级...所以#cat-nav 的直接子级在悬停时将为标签分配黑色。

你也可以这样写：`#cat-nav .drop-menu-parent:hover > a { color:#000; }` 它本来也可以工作的……事实上，这第二位是一个更好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T14:13:27.877

添加：

```
ul#cat-nav li:hover a{
    color: #000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T14:19:49.557

不确定我是否理解正确（？），但这里有一个例子。你是这个意思吗？[jsFiddle](http://jsfiddle.net/zgvz4/)

```
nav {
    background: #000;
}

#cat-nav {
    text-align: center;
    background-color: #0f0609, #0f0609;
    background-image: url(cat-nav-bg.jpg), url(cat-nav-bg-bottom.jpg);
    background-repeat: no-repeat, repeat-y;
    margin-top: -8px;
    display: block;
}

#cat-nav:after {
    content: " ";
    display: block;
    clear: both;

    width: 81%;
    padding-top: 8px;
    margin: 0 auto;
    background: url(teeth.png) repeat-x;
}

ul#cat-nav > li {
    text-align: center;
    display: inline-block;

}

#cat-nav a:link { color: #fff; text-decoration: none; padding: 10px; display: inline-block;}
#cat-nav a:hover { color: #fff; text-decoration: none; }
#cat-nav a:visited { color: #fff; text-decoration: none; }
#cat-nav a:active { color: #fff; text-decoration: none; }

ul .drop-menu-items  {
    position: absolute;
    display: none;
    background: #000 url(drop-menu-bg.png) bottom repeat-x;
    -webkit-box-shadow: 0px 5px 5px #8f8f8f;
    -moz-box-shadow:    0px 5px 5px #8f8f8f);
    box-shadow:         0px 5px 5px #8f8f8f;
    border-radius: 0 10px 10px 10px;

}

ul.drop-menu-items  li{
    background: url(drop-menu-bullet.png) no-repeat 5px center;
    float: none;
    position: relative;
    color: #000;
    padding: 5px 15px;
    margin: 0 10px; 
    border-bottom: 1px dotted #cecece;
}

ul.drop-menu-items  li:hover {
    background: #000 url(drop-menu-bullet.png) no-repeat  5px center;
} 

.drop-menu-parent:hover .drop-menu-items {
    display: block;
    z-index: 1000;
}

ul#cat-nav li   a:hover {
    background: #000;
    border-radius: 5px;
    color: #fff;
    /* padding-top: 5px; */

}

#cat-nav .drop-menu-items li a {
    color:     #fff;
}

#cat-nav .drop-menu-items li:hover a {
    text-decoration: underline;
    background: none;
    color:     #fff;
}

.drop-menu-parent:hover {
    background: #000;
    background-color: #000;
    border-radius: 5px 5px 0 0;

} 
```

​</p>

# c# - 获取 ViewColumn 的 BaseColumn

> ID：11492440
> 
> 赞同：1
> 
> 时间：2012-07-15T13:51:21.773
> 
> 标签：c#, sql-server, sql-server-2008, c#-4.0, metadata

假设这个视图：

```
SELECT
 [Pr].[Id],
 [Pr].[Title],
 [Pr].[Category_Id] AS [CategoryId],
 [Pr].[IsScanAllowed],
 [Pr].[MaxLevelOfRegistration],
 [Cat].[Title] AS [Category],
 [Cat].[MajorCategory_Id] AS [MajorCategoryId],
 [Mc].[Title] AS [MajorCategory]
 [Cat].[Title]+[Pr].[Title] AS [FullProduct]
FROM [Products].[Product] AS [Pr]
INNER JOIN [Products].[Category] AS [Cat] ON [Pr].[Category_Id] = [Cat].[Id]
INNER JOIN [Products].[MajorCategory] AS [Mc] ON [Cat].[MajorCategory_Id] = [Mc].[Id]; 
```

那么有没有办法找到这个视图的每个列的基列，除了`[FullProduct]`这是一个计算列，所有其他列都有一个基列。像这样的东西：`BaseOf(MajorCategoryId) is [Products].[MajorCategory].[Id]`我尝试使用`Microsoft.SqlServer.Management.Smo`但我找不到任何东西，有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:59:13.957

没有办法知道，因为它没有传递回客户端，但您可以构造列名来显示它——像这样：

```
SELECT
 [Pr].[Id] AS [Products_Id],
 [Pr].[Title] AS [Products_Title],
 [Pr].[Category_Id] AS [Products_CategoryId],
 [Pr].[IsScanAllowed] AS [Products_IsScanAllowed],
 [Pr].[MaxLevelOfRegistration] [Products_MaxLevelOfRegistration],
 [Cat].[Title] AS [Category_Title],
 [Cat].[MajorCategory_Id] AS [Category_MajorCategoryId],
 [Mc].[Title] AS [MajorCategory_Title]
 [Cat].[Title]+[Pr].[Title] AS [FullProduct]
FROM [Products].[Product] AS [Pr]
INNER JOIN [Products].[Category] AS [Cat] ON [Pr].[Category_Id] = [Cat].[Id]
INNER JOIN [Products].[MajorCategory] AS [Mc] ON [Cat].[MajorCategory_Id] = [Mc].[Id]; 
```

然后要查看表格，您可以将第一项在拆分上`_`。

* * *

您还可以使用 SQL 元数据下载视图源并对​​其进行解析，但这对我来说似乎需要做很多工作。

# flash - 编码的 url: %9A 显示为 ?-diamond ... 如何让浏览器正确解释 %9A

> ID：11492444
> 
> 赞同：0
> 
> 时间：2012-07-15T13:51:35.953
> 
> 标签：flash, browser, encoding, urlrequest, navigatetourl

我正在从 Flash 生成一个 url（用于 facebook 对话框）：

```
var lvs_url = "http://www.facebook.com/dialog/feed?app_id=208524139202627&name=š š&caption=&description=&link=http://apps.facebook.com/celjska_puzzle&redirect_uri=http://apps.facebook.com/celjska_puzzle/"
var lvo_req : URLRequest = new URLRequest( lvs_url ) ;
navigateToURL( lvo_req , "_blank" ); 
```

但是当 url 进入浏览器时，**š**已经变成了**%9A**，然后在 facebook 弹出窗口中显示为**?-diamond 。**

但是，浏览器可以使用**%20**的

这是编码的网址：[http ://www.facebook.com/dialog/feed?app_id=208524139202627&name=%9A%20%9A&caption=&description=&link=http://apps.facebook.com/celjska_puzzle&redirect_uri=http:// /apps.facebook.com/celjska_puzzle/](http://www.facebook.com/dialog/feed?app_id=208524139202627&name=%9A%20%9A&caption=&description=&link=http://apps.facebook.com/celjska_puzzle&redirect_uri=http://apps.facebook.com/celjska_puzzle/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:14:25.747

尝试`encodeURIComponent`：

```
var lvs_url = "http://www.facebook.com/dialog/feed?app_id=208524139202627&name="+encodeURIComponent("š š")+"&caption=&description=&link=http://apps.facebook.com/celjska_puzzle&redirect_uri=http://apps.facebook.com/celjska_puzzle/";
var lvo_req : URLRequest = new URLRequest( lvs_url ) ;
navigateToURL( lvo_req , "_blank" ); 
```

* * *

来自 [docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html#URLRequest()) ：

> 创建一个 URLRequest 对象。
> 
> 如果`System.useCodePage`是`true`，则使用系统代码页而不是 Unicode 对请求进行编码。
> 
> 如果`System.useCodePage`是`false`，则使用 Unicode 而不是系统代码页对请求进行编码。

[规范](https://www.rfc-editor.org/rfc/rfc3986#page-21)说：

> 非 ASCII 字符必须首先根据 UTF-8 [STD63] 进行编码，然后必须对相应 UTF-8 序列的每个八位字节进行百分比编码才能表示为 URI 字符。

这意味着`"š"`必须按照`%C5%A1`url 进行编码。尝试设置`System.useCodePage`为`false`，即使文档不明确，因为*使用 Unicode 编码* 并不一定意味着`UTF-8`.

`UTF-8`我还应该提到，如果您确实在文件中使用，您的文件应该以编码保存`"š"`。

# php - MySQL / PHP：如果值不为0，则使用内连接

> ID：11492458
> 
> 赞同：0
> 
> 时间：2012-07-15T13:53:59.090
> 
> 标签：php, mysql, join

我想使用从表中获取数据的选择查询。

看起来像这样

```
SELECT table1.value1, table1.value2, table1.id, table2.id, table2.value2
FROM table1
INNER JOIN table2
ON table2.id = table1.value4
ORDER BY table1.id DESC
LIMIT 10 
```

虽然`table1.value4`有时可以为 0，并且没有`table2.id`值为 0，因为它是一个自动增量值，所以它从 1 开始。我希望它从 1 开始。

因为当它等于 0 时，该特定行不可用，只有其他行。

但是我想知道如何设置一个 where 子句，它只应该在不等于 0的情况下获取`table2`值。`table1.value4`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:08:29.120

看来，你真正想要的是一个`LEFT JOIN`then。将返回来自的所有行`table1`，即使在`table2`( 与`table1.value4 = 0`) 中没有匹配项也是如此。

```
SELECT table1.value1, table1.value2, table1.id, table2.id, table2.value2
FROM
  table1
  LEFT JOIN table2
    ON table2.id = table1.value4
ORDER BY table1.id DESC
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:11:42.970

试试这个：：

如果您在 table2 id 中没有 0，则以下查询可以正常工作::

```
SELECT table1.value1, table1.value2, table1.id, table2.id, table2.value2
FROM table1
INNER JOIN table2
ON table2.id = table1.value4
ORDER BY table1.id DESC
LIMIT 10 
```

但是 table2 中有一些 id 为 0 的值，然后您希望将其忽略

```
SELECT table1.value1, table1.value2, table1.id, table2.id, table2.value2
FROM table1
INNER JOIN table2
ON (table2.id = table1.value4 and table1.id!=0)
ORDER BY table1.id DESC
LIMIT 10 
```

# django - django：使用查询集作为模型形式的初始数据

> ID：11492460
> 
> 赞同：1
> 
> 时间：2012-07-15T13:54:09.513
> 
> 标签：django

我正在制作一个设置界面，它通过扫描已安装应用程序中的设置文件夹、扫描设置文件、最后扫描 ModelForms 来工作。

我现在处于最后一步。表单已正确找到并加载，但我现在需要提供初始数据。初始数据将从数据库中提取，正如您可以想象的那样，它必须仅限于经过身份验证的用户（通过 request.user.id）。

请记住，这一切都是动态完成的。没有任何名称，也没有高级已知的结构（我真的不想维护一个无聊的设置界面）。

这是一个示例设置表单。我只是选择模型和用户可以编辑的字段（这是我想要维护设置界面的程度）。

```
class Set_Personal_Info(forms.ModelForm):
    class Meta:
        model = UserProfile
        fields = ('nick_name', 'url') 
```

我看过 modelformset_factory*几乎*可以做我想做的事情，但它似乎只适用于两个或更多的结果。（这里，*obj*是设置形式之一）

```
Formset = modelformset_factory(obj.Meta.model, form=obj)
Formset(queryset=obj.Meta.model.objects.filter(id=request.user.id)) 
```

我无法过滤数据，我必须得到一个，而且只有一个结果。不幸的是我不能使用 get()

```
Formset = modelformset_factory(obj.Meta.model, form=obj)
Formset(queryset=obj.Meta.model.objects.get(id=request.user.id)) 
```

> “用户”对象没有“有序”属性

将查询结果作为初始数据提供也不起作用，因为它不是列表。

```
Formset = modelformset_factory(obj.Meta.model, form=obj)
Formset(initial=obj.Meta.model.objects.get(id=request.user.id)) 
```

> “用户”对象不支持索引

我有一种感觉，答案就在我面前。如何从数据库中提取数据库并将其作为初始值推入表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:47:14.120

我不确定我是否理解您想要做什么 - 如果您只对单个表单感兴趣，我不知道您为什么要参与表单集。

要使用数据库中的初始数据填充模型表单，您只需传递实例参数：

```
my_form = Set_Personal_Info(instance=UserProfile.objects.get(id=request.user.id)) 
```

当您在 POST 上实例化表单时，不要忘记传递 instance 参数，以便 Django 更新现有实例而不是创建新实例。

（请注意，您可能想考虑为您的对象提供更好的名称。`obj`通常描述一个模型实例，而不是一个表单，这`form`将是一个更好的名称。表单类应该遵循 PEP8，并且可能包含“表单”这个词 -所以`PersonalInfoForm`这将是一个好名字。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:09:59.143

根据我的理解......如果你想生成一个带有动态字段的表单，你可以使用这个：

> MyModelForm 类（forms.ModelForm）：
> 
> ```
> def __init__(self, dynamic_fields, *args, **kwargs):
>     super(MyModelForm, self).__init__(*args, **kwargs)
> 
>     self.fields = fields_for_model(self._meta.model, dynamic_fields, self._meta.exclude, self._meta.widgets)
> 
>     class Meta:
>         model = MyModel 
> ```

其中 dynamic_fields 是一个元组。

更多关于动态表格：

1.  [http://www.rossp.org/blog/2008/dec/15/modelforms/](http://www.rossp.org/blog/2008/dec/15/modelforms/)
2.  [http://jacobian.org/writing/dynamic-form-generation/](http://jacobian.org/writing/dynamic-form-generation/)
3.  [http://dougalmatthews.com/articles/2009/dec/16/nicer-dynamic-forms-django/](http://dougalmatthews.com/articles/2009/dec/16/nicer-dynamic-forms-django/)

丹尼尔的方法也是有效和干净的......根据您不同的 ids/types 等，您可以使用不同的 Form 对象

表格.py

> MyModelFormA 类（forms.ModelForm）：
> 
> ```
> class Meta:
>     model = MyModel
>     fields = ('field_a','field_b','field_c')
>      class MyModelFormB(forms.ModelForm):
> 
> class Meta:
>     model = MyModel
>     fields = ('field_d','field_e','field_f') 
> ```

视图.py

> 如果 request.method == 'POST'：
> 
> ```
> if id == 1:
>     form = MyModelFormA(data=request.POST)
> elif id == 2:
>     form = MyModelFormB(data=request.POST)
> else:
>     form = MyModelFormN(data=request.POST)
> 
> if form.is_valid():
>     form.save() else:
> if id == 1:
>     form = MyModelFormA()
> elif id == 2:
>     form = MyModelFormB()
> else:
>     form = MyModelFormN() 
> ```

# algorithm - 将数据从 8 位转换为 12 位

> ID：11492463
> 
> 赞同：0
> 
> 时间：2012-07-15T13:54:26.657
> 
> 标签：algorithm

我得到的信号存储为 char 数据（8 位）的缓冲区。我也得到相同的信号加上 24 dB，我的老板告诉我应该可以从这两个缓冲区中重建，一个（将用作输出）将存储为 12 位。我想知道可以做到这一点的数学运算以及为什么选择+24dB。谢谢（我很笨><）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:33:37.503

从问题陈述中，我猜你有一个以两个幅度采样的模拟信号。两个信号的分辨率均为 8 位，但有一个被移位和截断。

您可以通过组合第一个信号的高 4 位并将它们与第二个信号连接来获得 12 位信号。

```
sOut = ((sIn1 & 0xF0) << 4) | sIn2 
```

* * *

如果您想获得更好的精度，您可以尝试计算两个信号的公共位的平均值。通常，第一个信号的低 4 位应该大约等于第二个信号的高 4 位。由于舍入误差或噪声，这些值可能略有不同。其中一个值甚至可能溢出，并移动到范围的另一端。

```
int Combine(byte sIn1, byte sIn2)
{
    int a = sIn1 >> 4; // Upper 4 bits
    int b1 = sIn1 & 0x0F; // Common middle 4 bits
    int b2 = sIn2 >> 4;  // Common middle 4 bits
    int c = sIn2 & 0x0F; // Lower 4 bits

    int b;

    if (b1 >= 12 && b2 < 4)
    {
        // Assume b2 has overflowed, and wrapped around to a smaller value.
        // We need to add 16 to it to compensate the average.
        b = (b1 + b2 + 16)/2;
    }
    else if (b1 < 4 && b2 >= 12)
    {
        // Assume b2 has underflowed, and wrapped around to a larger value.
        // We need to subtract 16 from it to compensate the average.
        b = (b1 + b2 - 16)/2;
    }
    else
    {
        // Neither or both has overflowed. Just take the average.
        b = (b1 + b2)/2;
    }

    // Construct the combined signal.
    return a * 256 + b * 16 + c;
} 
```

当我对此进行测试时，它比第一个公式更准确地再现了信号。

# iphone - 我无法构建 iPhone 应用程序的项目

> ID：11492469
> 
> 赞同：0
> 
> 时间：2012-07-15T13:55:26.523
> 
> 标签：iphone, xcode

我从 github 下载了这 2 个开源 iPhone 应用程序

[https://github.com/indisolve/Barcode-Reader](https://github.com/indisoluble/Barcode-Reader)

[https://github.com/forresty/Dictionary](https://github.com/forresty/Dictionary)

并尝试通过 xcode 4.3.3 构建它们，但它们有相同的错误消息。

“运行目标 iPhone 5.1 模拟器对于运行方案‘BarcodeReaderClientXcode3’无效”

为什么会这样？？我只想通过模拟器运行它。

有什么办法可以解决吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:52:39.180

检查“构建设置”并将“iOS 部署目标”更改为 iOS 4.3，这可能会有所帮助。

# objective-c - 更新主包中的只读 Core Data sqlite

> ID：11492471
> 
> 赞同：2
> 
> 时间：2012-07-15T13:55:41.703
> 
> 标签：objective-c, core-data

我正在使用 Main Bundle 中的只读 Core Data sqlite，效果很好。当我将新版本的数据库（更多只读数据）添加到主包时，它仍然会读取数据库的“旧”版本。

当当前用户使用新版本的数据库下载更新时，任何人都可以帮助我理解为什么以及如何使新数据库版本成为当前版本？

这是试图解决这篇文章中的问题的一部分：[从文档目录访问更新的数据库时出现同样的问题](https://stackoverflow.com/questions/11487151/my-app-does-not-update-the-new-version-of-read-only-core-data-sqlite-database)

===解决方案====

我通过在“新”主包中更改新数据库的名称解决了这个问题，它就像一个梦一样工作。此外，如果这是更新，我会删除文档目录中的旧数据库以进行清理。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

    if (persistentStoreCoordinator != nil) {
    return persistentStoreCoordinator;
}

//===READ DATABASE FROM MAIN BUNDLE===//
NSFileManager *fileManager = [NSFileManager defaultManager];

NSURL *storeUrl = [[NSBundle mainBundle] URLForResource:kNewDB withExtension:@"sqlite"];

//=== IF THE OLD DATABASE STILL EXIST DELETE IT FROM DOCUMENT DIRECTORY ===//
NSURL *oldDatabasePathURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"database.sqlite"];
NSString *oldDatabasePath = [oldDatabasePathURL path];
if ([fileManager fileExistsAtPath:oldDatabasePath]) {
    //Remove old database from Documents Directory
    [fileManager removeItemAtURL:oldDatabasePathURL error:nil];

}

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil]; 

persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];

NSError *error;
if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
    // Update to handle the error appropriately.
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    exit(-1);  // Fail
}    

return persistentStoreCoordinator;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:10:08.697

您必须在代码中有一个位置，您可以检查数据库文件的副本是否存在于某个可写目录（可能是您的 Documents 目录）中，如果不存在，则将其复制到那里。当您需要对数据库进行更改时，这是一种非常常见的方法。问题是，当您更新应用程序时，该文件已经存在，因此永远不会再次复制。

有两种方法可以解决您的问题：

1.  （首选）：一开始就不要复制数据库。由于它是只读的，因此您不需要，它只会占用设备上的额外空间。只需使用主包中的文件路径打开数据库。

2.  与其检查文件是否**存在**于可写目录中，不如检查它是否比主包中的文件新。（不要使用日期，因为他们可能已经安装了程序并在您的更新提交到应用商店以供批准后创建了文件，这将导致无法复制新的。您需要检查版本数据库，可能通过在您的应用程序包中存储另一个文件来存储版本信息，或使用特定于版本的代码来确定它）。如果没有，那就再复制一遍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-01T11:37:20.797

PeterK，我在使用[http://www.raywenderlich.com/12170/core-data-tutorial-how-to-preloadimport-existing-data-updated](http://www.raywenderlich.com/12170/core-data-tutorial-how-to-preloadimport-existing-data-updated)上的教程以使用只读 sqlite 数据库时遇到了同样的问题由核心数据。一切都很好，直到我不得不更新我的数据库并重新发布我的目标应用程序。如您所知，该教程中建议的代码仅在应用程序的 Documents 目录中不存在数据库时复制到新数据库中。

我不认为重命名我的数据库（并更新复制代码）是一种好的设计方法，所以我按照 Inafziger 的首选建议和阅读 iOS 文件结构来完成我的设计。我提供以下内容只是为了展示如何实施 Inafziger 的提议。值得注意的是，这种方法可能仅在您的应用程序不更改核心数据信息的内容时才有效，因为它以只读方式读入。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
  if (_persistentStoreCoordinator != nil) {
    return _persistentStoreCoordinator;
  }    

  // Updated processing to now just have the NRPersistentStoreCoordinator point to the sqlite db in the
  //           application's Bundle and not by copying that db to the app's Documents directory and then using
  //           the db in the Documents directory.
  NSURL *refactoredStoreURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@“NameOfYourDatabase ofType:@"sqlite"]];

  NSError *error = nil;

  _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

  // Added to ensure the NSPersistentStoreCoordinator reads the Bundle's db file as read-only since
    //           it is not appropriate to allow the app to modify anything in the Bundle
  NSDictionary *readOnlyOptions = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES], NSReadOnlyPersistentStoreOption, nil];

  // Use the URL that points to the Bundle's db file and used the ReadOnly options
  if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:refactoredStoreURL options:readOnlyOptions error:&error]) {
    // Your logic if there is an error
  }
  return _persistentStoreCoordinator;
} 
```

我希望这对这个问题的下一位读者有所帮助。

# javascript - 检测字符串上的html标签，获取值并删除javascript中html标签内的值

> ID：11492472
> 
> 赞同：4
> 
> 时间：2012-07-15T13:55:41.627
> 
> 标签：javascript, jquery, string, html

我有一个包含 HTML 标签的字符串：

```
var str = "Hello World <br><p>1</p><em>My First Javascript</em>"; 
```

而且我还有一个带有隐藏输入的表单：

```
<input type='hidden' name='id' value=''> 
```

使用上面的字符串，我想获取`<p>`标签内的值，`1`并将该值分配给隐藏的输入。之后，我想删除字符串中的所有 HTML 标记，这些标记是`<br><p>1</p><em>My First Javascript</em>`. 因此，`str`will 的唯一值是`Hello World`。

有什么办法可以在 Javascript 或 jquery 上做到这一点？

多谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:09:40.697

因此，您要做的是将字符串转换为 jQuery 对象。你可以这样做 -

```
var str = "Hello World <br><p>1</p><em>My First Javascript</em>";
var $holder = $('<div>');
$holder.append(str); 
```

现在我们将您的字符串封装在另一个 div 元素中。接下来我们提取`<p>`元素内的值 -

```
var value = $holder.find('p').text(); // 1 
```

现在我们有了这个值，我们可以将它放入隐藏的输入字段 -

```
$('input[name="id"]').val(value); 
```

现在从原始字符串中删除所有其他元素 - 我们将使用我们之前为此创建的容器 -

```
$.each($holder.children(),function(index,elem){
  $(elem).remove();
}); 
```

现在我们可以获取`$holder`with的文本内容，`$holder.text()`它应该是 -

> 你好世界

* * *

如果你想摆弄这个，
你可以在这里 - [http://jsfiddle.net/TVXbw/1/](http://jsfiddle.net/TVXbw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:04:00.577

好的，一个快速简单的方法：

```
var tmpDiv = document.createElement('div');
tmpDiv.innerHTML = str;//where str is the html string, obviously...
var pTagValue = tmpDiv.getElementsByTagName('p')[0].innerHTML;//=== '1'
document.getElementById('yourInputId').value = pTagValue; 
```

如果我理解正确，那就是你所追求的，对吧？

# javascript - 在 JavaScript 中根据 isOdd 定义 isEven

> ID：11492476
> 
> 赞同：0
> 
> 时间：2012-07-15T13:56:08.980
> 
> 标签：javascript, boolean

我正在进行 Codecademy 练习：

> 还记得练习 3.4 中的函数 isOdd 和 isEven 吗？
> 
> 我们希望您再次在这里编写代码！但是这一次，我们的目标是使用 ! 象征。
> 
> 定义isOdd，然后根据isOdd定义isEven。

我尝试了一些我认为可以工作的不同方法，比如`console.log(!isOdd(1));` and `(n !% 2 ===)`，它们都不对。

这是我拥有的代码：

```
var isOdd = function (n)
{
 if (n % 2 ===0)
{
 return false;
} else {
 return true;
}
};
var isEven =function (n)
{
 if (n % 2 === 0)
{
 return true;
} else {
 return false;
}
};
console.log(isOdd(1));
console.log(isOdd(2));
console.log(isOdd(999)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:06:38.203

这很简单：

```
var isEven = function (n)
{
    return !isOdd(n);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:52:44.850

```
var isOdd = function(n){
 if (n % 2 !== 0)  {
 return true;
 }  else  {
 return false;}
 };

var isEven = function(n){
 return !isOdd(n) ;
 };
 console.log(isOdd(11)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T20:28:06.540

```
 var isOdd = function(){
    if(isEven){
        return isEven();
    } else {
        return false;
    }       
};
var isEven = function (){
    return true;
};

console.log(isOdd()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-29T21:07:26.187

根据定义，这些答案是错误的。

数字是整数和浮点数。

所有提交的答案都适用于整数。

以下是适当的量身定制的回应。

```
function isEven(n) { // covers all
    return (n).toString(2).endsWith(‘0’) // binary format
}

function isEven_integer(n) {
    return (n & 1) === 0;
}

function isEven_float(n) {
    // floats only, but works on integers.// faster for floats
    return ((n).toString()[(n).toString().length-1] % 2) === 0; // base 10
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-15T07:27:45.390

```
 var isOdd = function(n)
{
    if(n%2 !== 0)
    { return ("odd");}
};    

var isEven = function (n)
{
 return !isOdd(n);
};

console.log(isEven(8)); 
```

# data-mining - 对加权特征向量进行分类

> ID：11492478
> 
> 赞同：0
> 
> 时间：2012-07-15T13:56:25.447
> 
> 标签：data-mining, classification, weighting

我想在任何分类算法（如 KNN 或 J48）中使用特征之前给数据集的特征赋予权重，但我不知道如何评估加权特征向量。
是否有任何分类算法接受权重作为输入，而不仅仅是“0”和“1”？
特别是，Weka 的任何现成分类函数是否能够使用权重（不是 0 和 1 作为过滤器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:03:01.057

在大多数情况下，您可以根据您的权重缩放数据集。对于诸如欧几里得距离之类的 Minkowski 距离，这很容易证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:05:32.587

并非所有 weka 的分类算法都支持权重，但有些支持。

您需要在加载数据集后设置权重信息，请参阅[weka wiki 中的示例代码](http://weka.wikispaces.com/Add+weights+to+dataset)。我记得 Weka J48 决策树在开发者版本中支持权重但找不到参考。虽然有一个[补丁](http://weka.wikispaces.com/J48-Weighter+patch)。

在 weka wiki 中搜索[特征权重可能会有所帮助。](http://weka.wikispaces.com/search/view/feature+weights)

我建议尝试为数据集添加权重并在您的数据中进行训练。

# wpf - 如何在 WPF XAML 中设计形状（如图所示）？

> ID：11492483
> 
> 赞同：0
> 
> 时间：2012-07-15T13:56:57.910
> 
> 标签：wpf, xaml, shapes

我只想使用 XAML 使用 WPF 制作这样的形状： [![形状](../Images/a1e1d0f501cca167738fdde3d057b2a1.png)](https://i.stack.imgur.com/8lqGk.png) 形状是红色的，类似于引号的矩形框。你能帮我吗 ？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:20:54.560

这是与您的图表类似的尝试。对你有帮助吗？

```
 <Grid Width="602">
        <Path Stroke="Black" StrokeThickness="2" Fill="#FFFFCC" Data="M 0,50 400,50 450,0 500,50 600,50 600,150 0,150 0,50" />
        <Grid Margin="0,50,0,0">
            <TextBlock Text="Blah blah blah - blah blah?" TextWrapping="Wrap" FontSize="16" FontWeight="Bold" Margin="10" />
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="10">
                <Button Width="100" Content="Yes" />
                <Button Width="100" Content="No" Margin="50,0,0,0" />
            </StackPanel>
        </Grid>
    </Grid> 
```

# facebook-javascript-sdk - 已发布的故事和评论插件

> ID：11492486
> 
> 赞同：1
> 
> 时间：2012-07-15T13:57:27.987
> 
> 标签：facebook-javascript-sdk, feed, facebook-social-plugins, facebook-comments

我希望有人在使用评论社交插件方面有一些经验，特别是关于格式化 Facebook 在用户发表评论时发布的故事。

我曾预计该过程将与 Like 插件完全相同，因此我确保我在评论插件中使用的 URL 指向一个包含一堆 OG 元标记的页面，所有这些标记都正确提供和定义。然而，尽管已经设置了这个（并且使用 Like 按钮可以正常工作），并且通过 Linter 工具运行了目标 URL，并且看到所有内容都按我的预期显示（也没有警告或错误），但每当我有一个测试用户发表评论和将故事发布到他们的墙上，我看到的只是他们留下的评论和下面显示的完整 URL 链接。

一方面它非常丑陋，另一方面令人困惑。所有元数据都存在 AFAIK，正如我所说，它与 Like 按钮完美配合；我得到了一张漂亮的图片、标题/描述文本等。

这是我正在使用的元数据（注意：URL 和 IMAGE 元标记是根据我正在使用的评论插件 url 中的一些查询字符串参数动态写入的。我还替换了虚拟值的潜在敏感值）：

```
<meta property="fb:app_id" content="MY-APP-ID">
<meta property="og:type" content="article">
<meta property="og:url" content="https://apps.facebook.com/MY-APP/?key1=val1&amp;key2=val2&amp;key3=val3&amp;key4=val4">
<meta property="og:site_name" content="My Site">
<meta property="og:image" content="http://domain.com/myimage.jpg">
<meta property="og:title" content="My title">
<meta property="og:description" content="Some description here">
<meta property="article:published_time" content="1341126000">
<meta property="article:expiration_time" content="1356940800">
<meta property="article:author" content="http://www.mywebsite.com/">
<meta property="article:section" content="My Section">
<meta property="article:tag" content="My Tag"> 
```

评论是否仅在用户的提要中创建基本故事（似乎不太可能）。我是否必须使用“博客”或“网站”作为“og:type”（似乎也不太可能）？

将不胜感激任何帮助！

干杯

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:19:46.587

事实证明，问题是由于页面设置为未发布，而测试应用程序设置为沙盒模式。我不知道为什么 Comments 社交插件在 Like 按钮社交插件没有时会出现这个问题，但希望这可以帮助其他有同样问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:56:24.340

```
<meta property="og:url" content="https://apps.facebook.com/MY-APP/?key1=val1&amp;key2=val2&amp;key3=val3&amp;key4=val4"> 
```

您指定的 og:url 可能会导致您的问题。此 url 应该与您的应用设置中设置的域相同。作为测试，更改网址，发表评论。

以这种方式留下 url，Facebook 试图刮掉画布。这将导致不希望的结果。

# xslt - XSL 父选择器

> ID：11492491
> 
> 赞同：1
> 
> 时间：2012-07-15T13:58:19.997
> 
> 标签：xslt

XML

```
<dsInventory>
  <Room>
    <RoomName>kantoor 1</RoomName>
    <RoomId>1376257</RoomId>
  </Room>
  <Room>
    <RoomName>Hal</RoomName>
    <RoomId>1376258</RoomId>
  </Room>
<Method>
    <RoomId>1376257</RoomId>
    <Name>test</Name>
  </Method>
<Method>
    <RoomId>1376258</RoomId>
    <Name>test</Name>
  </Method>
</dsInventory> 
```

XSL

```
 <xsl:for-each select="/dsInventory/Room">
        <xsl:for-each select="/dsInventory/Method">
             <xsl:if test="RoomId=../RoomId">
             </xsl:if>
         </xsl:for-each>
    </xsl:for-each> 
```

问题

我正在尝试根据 roomid 选择相应房间的方法。但是选择器 ../RoomId 不起作用。如何从第一个 for-each 中获取 RoomId 的值？或者选择房间方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:10:41.253

```
<xsl:for-each select="/dsInventory/Room">
    <xsl:for-each select="/dsInventory/Method">
        <xsl:if test="RoomId=../RoomId"></xsl:if>
    </xsl:for-each>
</xsl:for-each> 
```

正如回答这个问题的人所指出的那样，您正在尝试将 a`/dsInventory/Method/RoomId`与 a进行比较`/dsInventory/RoomId`，而后者在提供的 XML 文档中不存在。

> 我正在尝试根据 roomid 选择相应房间的方法。

**这是一个完整的转换，展示了如何做到这一点：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Room">
  <xsl:copy>
    <xsl:apply-templates/>
    <xsl:apply-templates mode="grab" 
         select="/*/Method[RoomId = current()/RoomId]"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Method" mode="grab">
  <xsl:copy>
   <xsl:apply-templates/>
  </xsl:copy>
 </xsl:template>
 <xsl:template match="Method | Method/RoomId"/>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（提供的方法名称已更改——彼此不同）：

```
<dsInventory>
    <Room>
        <RoomName>kantoor 1</RoomName>
        <RoomId>1376257</RoomId>
    </Room>
    <Room>
        <RoomName>Hal</RoomName>
        <RoomId>1376258</RoomId>
    </Room>
    <Method>
        <RoomId>1376257</RoomId>
        <Name>test1</Name>
    </Method>
    <Method>
        <RoomId>1376258</RoomId>
        <Name>test2</Name>
    </Method>
</dsInventory> 
```

**产生了想要的正确结果**（添加到房间的方法和`Method`删除顶部元素的子元素）：

```
<dsInventory>
   <Room>
      <RoomName>kantoor 1</RoomName>
      <RoomId>1376257</RoomId>
      <Method>
         <Name>test1</Name>
      </Method>
   </Room>
   <Room>
      <RoomName>Hal</RoomName>
      <RoomId>1376258</RoomId>
      <Method>
         <Name>test2</Name>
      </Method>
   </Room>
</dsInventory> 
```

**说明**：

1.  **[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制选择执行它的每个节点。

2.  覆盖身份模板的模板匹配`Room`. 这里`Room`元素是“浅拷贝，模板应用于其子元素（为它们选择标识模板，并将它们“按原样”复制到输出），然后将模板应用于 any `Method`，其`RoomId`子元素具有相同的值作为`RoomId`当前匹配**[`current()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-current)**（`Room`_ `Method`_`"grab"`

3.  覆盖标识模板的第二个模板`Method`通过简单地匹配它们并具有空主体来删除所有元素。

4.  匹配`Method`in 模式的模板`"grab"`只是简单地对其进行浅拷贝并将模板应用于其子项。在其子项中，`Name`仅由标识模板匹配并“按原样”复制。`RoomId`子项由比身份模板更具体的模板匹配，并选择前者执行。所选模板没有正文，这有效地`Method/RoomId`从输出中“删除”了匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:55:41.730

您尚未指定正在使用的 XSLT 版本或预期的输出。我将假设您想要 XSLT 1.0，想要复制文档，但在 Room 下添加链接的方法名称并删除 Methods。

**这个 XSLT 1.0 样式表...**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="Method"/>

<xsl:template match="Room">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
  <xsl:apply-templates select="../Method[RoomId=current()/RoomId]/Name"/>
 </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于您的示例输入文档时，将产生...**

```
<dsInventory>
  <Room>
    <RoomName>kantoor 1</RoomName>
    <RoomId>1376257</RoomId>
    <Name>test</Name>
  </Room>
  <Room>
    <RoomName>Hal</RoomName>
    <RoomId>1376258</RoomId>
    <Name>test</Name>
  </Room>
</dsInventory> 
```

## 解释

使用 current() 函数指定相对于 Room 模板的序列构造函数的当前项，在本例中是 Room 元素。在谓词中，我们将 current()/RoomId 与我们选择表达式的方法步骤的 RoomId 进行比较。因此，链接的名称被复制到房间下。没有 xsl:if，没有 xsl:for-each，没有变量。所有这些都可以在 select 表达式中使用 current() 函数来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T14:39:10.303

你的问题是上下文。`if`条件失败，因为它是从节点的上下文运行的，因此`Method`XPath 表达式`../RoomID`正在寻找. 没有这样的节点。`RoomID``dsInventory`

你没有说你想要什么输出，但是基于你只是想遍历房间并找到每个房间的方法的假设，试试这个：（注意我使用模板而不是 for-each 循环，最好避免在 XSL 中）。

**[您可以运行它并在此 XML Playground](http://www.xmlplayground.com/5UZW2X)**中查看输出。

```
<!-- kick things off from the point of dsInventory -->
<xsl:template match="dsInventory">
    <ul><xsl:apply-templates select='Room' /></ul>
</xsl:template>

<!-- room nodes -->
<xsl:template match='Room'>
    <xsl:variable name='method' select='../Method[RoomId = current()/RoomId]' />
    <li>
        <xsl:value-of select='concat(RoomName," (",RoomId,")")' />:
        method = <xsl:value-of select='concat($method/Name," (",$method/RoomId,")")' />
    </li>
</xsl:template> 
```

# dns - 创建 DNS NSRecord

> ID：11492502
> 
> 赞同：-1
> 
> 时间：2012-07-15T13:59:30.493
> 
> 标签：dns, bind

我的服务器是 Ubuntu，我已经安装了 webmin/virtualmin，我正在尝试创建我的 NSRecord ns1 和 ns2。

我运行这个命令：

```
挖掘@localhost mydomain.info
```

```
; DiG 9.7.3 @localhost mydomain.info
; （找到 1 个服务器）
;; 全局选项：+cmd
;; 得到答案：
;; HEADER 操作码：QUERY，状态：NOERROR，id：64570
;; 标志：qr aa rd ra；查询：1，答案：1，权威：1，附加：1

;; 问题部分：
;mydomain.info。在一个

;; 答案部分：
mydomain.info。38400 在 10.28.166.120

;; 权威部门：
mydomain.info。38400 在 NS ns1.mydomain.info 中。

;; 附加部分：
ns1.mydomain.info。38400 在 10.28.166.120

```

但是 10.28.166.120 是我的本地 IP，我尝试在 /var/log/syslog 上查找有关 Bind 的任何信息，但我什么也没看到。

在防火墙中，我配置了这样的端口：

```
传入开放端口：

TCP/53
UDP/53

传出开放端口：

TCP/53
UDP/53
TCP/1024-65535
UDP/1024-65535

```

所以，知道我把我完整的 dns 记录：

```
$ttl 38400
@   IN  SOA ns1.mydomain.info. root.ns1.mydomain.info. (
            1342267814
            10800
            3600
            604800
            38400 )
@   IN  NS  ns1.mydomain.info.
mydomain.info.  IN  A   10.28.166.120
www.mydomain.info.  IN  A   10.28.166.120
ftp.mydomain.info.  IN  A   10.28.166.120
m.mydomain.info.    IN  A   10.28.166.120
ns1.mydomain.info.  IN  A   999.999.999.999
localhost.mydomain.info.    IN  A   127.0.0.1
webmail.mydomain.info.  IN  A   10.28.166.120
admin.mydomain.info.    IN  A   10.28.166.120
mydomain.info.  IN  TXT "v=spf1 a mx a:mydomain.info ip4:10.28.166.120 ?all"

999.999.999.999 = my external IP 
```

我试过发布一些这样的问题，任何人都可以在其他论坛上提供帮助。如果有人不明白某些事情，我会尽力解释。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:11:09.863

BIND 运行为`named`，因此这是您应该在日志中查找的内容。（虽然这个设置实际上没有任何问题，所以我怀疑日志中会有任何内容）。

我不确定您是如何在您的区域中设置记录的，但每条`NS`记录都指向一条`A`记录。NS 记录看起来不错，但 A 记录是错误的。缺少其他 NS 记录和/或其对应的 A 记录。您必须将 A 记录更改为`ns1.mydomain.info.`您的外部地址。没有简单的方法可以为单台机器同时使用内部和外部 IP（有关复杂方法，请参阅水平分割视图）。

# r - 删除由 pdf() 创建的临时文件

> ID：11492504
> 
> 赞同：5
> 
> 时间：2012-07-15T13:59:46.283
> 
> 标签：r, pdf, plot

在 pdf 中存储图时，R 会`/tmp/RtmpFKQqjI/pdf317d27df81a0`为每个图生成一个临时文件（例如 ）。在将许多绘图绘制到 pdf 中后，我的*/tmp*分区内存不足并且 R 停止工作（我的桌面也冻结了）。

小代码示例：

```
for (i in 1:10) {
    pdf(file=paste(i, ".pdf", sep=""))
    plot(1:10)
    dev.off()
}

list.files(path=tempdir(), pattern="^pdf.", full.names=TRUE)
# [1] "/tmp/RtmpFKQqjI/pdf317d27df81a0" "/tmp/RtmpFKQqjI/pdf317d28ed0612"
# [3] "/tmp/RtmpFKQqjI/pdf317d295c2453" "/tmp/RtmpFKQqjI/pdf317d304bb025"
# [5] "/tmp/RtmpFKQqjI/pdf317d3332d7fe" "/tmp/RtmpFKQqjI/pdf317d3921428f"
# [7] "/tmp/RtmpFKQqjI/pdf317d4cf812ca" "/tmp/RtmpFKQqjI/pdf317d5082bebe"
# [9] "/tmp/RtmpFKQqjI/pdf317d560d326"  "/tmp/RtmpFKQqjI/pdf317d674b25ea" 
```

（相同的结果`pdf(file="Rplots%03d.pdf"); for (i in 1:10) { ... }; dev.off()`。）

为什么 R 在调用后不删除这个临时文件`dev.off()`？

作为一种解决方法，我在每个之后添加以下行`dev.off()`：

```
unlink(list.files(path=tempdir(), pattern="^pdf.", full.names=TRUE)) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T20:14:14.983

我倾向于同意@stark 的观点，即这是 R`pdf`设备实现中的一个（小）错误。

一种解决方法是改用该`cairo_pdf`设备，该设备生成基本相同的 pdf，但不会在临时目录中留下额外的文件。

```
for (i in 1:2) {
    cairo_pdf(file=paste(i, ".pdf", sep=""))
    plot(1:10)
    dev.off()
}
list.files(path=tempdir(), pattern="^pdf.", full.names=TRUE)
# character(0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T16:21:10.583

由于在调用 dev.off 后文件被关闭，这是 R 的 pdf 库中的一个错误。最好的解决方案是修复错误。pdf 没有理由留下 tmp 文件。

# actionscript-3 - 将 swf 文件上传到 stencyl 问题？

> ID：11492512
> 
> 赞同：0
> 
> 时间：2012-07-15T14:01:17.203
> 
> 标签：actionscript-3, flash

好的，所以我正在使用 stencyl 引擎制作 Flash 游戏，我想上传一个 Swf 文件。问题是我不断收到错误

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 _247gamesonline_fla::bn0_Symbol1_2/frame1()

现在我去了 fla 文件中出现错误的那部分，并试图看看哪里出了问题，但无法弄清楚。这是代码：

```
stop();

var doMain:String = this.stage.loaderInfo.url;
        var doMainArray:Array = doMain.split("/");
        var domainname = doMainArray[2];
        var gamename = "nameofgame";

        var linktodjp = "http://www.247gamesonline.com/?        p=cat&order=2&tag=puzzle&utm_medium=partnergame&utm_campaign=" + gamename + "&utm_source=" + domainname + "&utm_content=partnergame";
var linktodjpfb = "http://www.facebook.com/connect/uiserver.php?app_id=201345053230176&next=http://www.3j.com/processfacebook.php%3Futm_source%3D" + domainname + "%26fgamet%3D76&display=page&cancel_url=http%3A%2F%2Fwww.3j.com%3F3Futm_source%3D" + domainname + "&locale=en_US&return_session=1&session_version=3&fbconnect=1&canvas=0&legacy_return=1&method=permissions.request&perms=publish_stream,offline_access,email,user_birthday,user_interests,read_friendlists";

buttonplay.addEventListener(MouseEvent.CLICK, playlogonow);
logo.addEventListener(MouseEvent.CLICK, gotowebsite);
logo.buttonMode = true;

stop();
function playlogonow(e:Event) {
logo.play();
gotoAndStop(2);
return;
}

function gotowebsite(e:Event) {
navigateToURL(new URLRequest(linktodjp));
return;
} 
```

同样在代码的另一部分中，它只是说

```
on (release) {
_root.play(); 
```

}

帮助任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:53:59.220

很难说只有那个代码。不管怎样，我建议在此处放置许多跟踪语句，以找出哪些变量实际上等于*null*并导致该异常。然后采取相应的行动。

# php - 从文件夹中的文件自动重定向到 index.php

> ID：11492513
> 
> 赞同：0
> 
> 时间：2012-07-15T14:01:23.667
> 
> 标签：php, .htaccess, redirect, http-status-code-403

在我的服务器上，我有目录“reset”，其中包含 3 个文件*index.php 、 1.php 、 2.php*。index.php 包含以下代码：

```
if (condition) {
        include_once "1.php";
    } else {
        include_once "2.php";
    } 
```

用户仍然可以直接从目录*reset/1.php*打开文件以包含在内 如何自动将用户从该文件重定向到*index.php*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:25:41.143

```
<?php
//if current executing file is not 1.php
if(strpos($_SERVER['SCRIPT_FILENAME'], "1.php") === FALSE){
    header("Location: index.php");
}
?> 
```

如果在当前正在执行的脚本的文件名中`1.php`找到，重定向到`index.php`.

[http://codepad.org/dE0zplUN](http://codepad.org/dE0zplUN) *注意，在 codepad.org 示例中，我已更改`1.php`为`t.php`，因为在撰写本文时，codepad.org 站点使用此文件名作为主/执行脚本。*
将其编辑为您需要的任何文件名。

你也可以看看 $_SERVER['PHP_SELF']。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:17:09.890

您可以在 PHP 中设置一个标头以自动将用户重定向到 index.php。请注意，在这种情况下触发 403 是不必要的：`header("Location: ./index.php");`

祝你好运！-TP

# vb.net - 处理程序关闭运行时生成的表单

> ID：11492515
> 
> 赞同：0
> 
> 时间：2012-07-15T14:02:08.543
> 
> 标签：vb.net, forms, handler

我知道如何在运行时制作一个表单并将控件添加到它并将它们连接到处理程序......我想知道的是如何使这个表单内的控件与其容器表单做出反应，例如关闭它?

为了更清楚，当我想通过一个按钮关闭启动表单时，我只需在所需的处理程序中添加以下代码：

```
Me.Close() 
```

那么，我应该写什么而不是“我”来关闭运行时创建的表单？！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:12:32.530

您使用引用运行时创建的表单的变量而不是 Me。

例如：

```
Dim customform As New Form()
' add some controls here before showing the form
customform.Show()
' when you're done with the form
customform.Close() 
```

# android - 我怎样才能在android中获得时钟闹钟

> ID：11492517
> 
> 赞同：1
> 
> 时间：2012-07-15T14:02:50.900
> 
> 标签：android, android-contentprovider, alarms

我想使用以下代码在移动 iam 的时钟应用程序中获取闹钟

```
Uri uri = Uri.parse("content://com.android.deskclock/AlarmClock");
        Cursor c = mContext.getContentResolver().query(uri, null, null, null,null);
        if (c != null) {
            String names[] = c.getColumnNames();
            for (String temp : names) {
                System.out.println(temp);

            }

            if (c.moveToFirst()) {
                do {
                    int i = 0;
                    for (int j = 0; j < c.getColumnCount(); j++) {
                    }
                } while (c.moveToNext());
            }
        } 
```

我得到以下异常

```
java.lang.SecurityException: Permission Denial: opening provider 
com.android.deskclock.AlarmProvider from ProcessRecord{4162b268 
12999:com.genie9.gcloudbackup/10059} (pid=12999, uid=10059) that is not exported from uid 10011 
```

有人知道我必须在这里使用什么许可吗？我找了很多，找不到有用的东西，谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:07:25.057

您可以使用警报类设置警报，[请参见此处](http://developer.android.com/reference/android/provider/AlarmClock.html)

或者您无法访问此 uri。但您可以使用下面的代码来设置闹钟闹钟，

```
Intent i = new Intent(AlarmClock.ACTION_SET_ALARM);
    i.putExtra(AlarmClock.EXTRA_HOUR, 9);
    i.putExtra(AlarmClock.EXTRA_MINUTES, 37);
    startActivity(i); 
```

您需要在下面给出的清单中添加权限

```
<uses-permission android:name="com.android.alarm.permission.SET_ALARM"/> 
```

# file - 重写 WWW 和文件扩展名？

> ID：11492518
> 
> 赞同：2
> 
> 时间：2012-07-15T14:03:20.243
> 
> 标签：file, .htaccess, web, rewrite, file-extension

我正在使用 HTML 5 Boilerplate HTAccess 文件，并在其中使用选项 2（强制 www.）。我现在正在尝试删除文件扩展名（即 services.php 显示为服务），以下工作正常：

```
<IfModule mod_rewrite>   
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php
</IfModule> 
<IfModule mod_rewrite.c>   
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</IfModule> 
```

但是一旦与完整的 HTMl5 样板 .htaccess 文件结合使用，文件扩展名就不能正常工作（即，输入 /services 会给出 404，而不是屏蔽为 services.php）。不过万维网。工作正常。完整代码如下：

```
# Apache configuration file
# httpd.apache.org/docs/2.2/mod/quickreference.html

# Note .htaccess files are an overhead, this logic should be in your Apache config if possible
# httpd.apache.org/docs/2.2/howto/htaccess.html

# Techniques in here adapted from all over, including:
#   Kroc Camen: camendesign.com/.htaccess
#   perishablepress.com/press/2006/01/10/stupid-htaccess-tricks/
#   Sample .htaccess file of CMS MODx: modxcms.com

###
### If you run a webserver other than Apache, consider:
### github.com/h5bp/server-configs
###

# ----------------------------------------------------------------------
# Better website experience for IE users
# ----------------------------------------------------------------------

# Force the latest IE version, in various cases when it may fall back to IE7 mode
#  github.com/rails/rails/commit/123eb25#commitcomment-118920
# Use ChromeFrame if it's installed for a better experience for the poor IE folk

<IfModule mod_headers.c>
  Header set X-UA-Compatible "IE=Edge,chrome=1"
  # mod_headers can't match by content-type, but we don't want to send this header on *everything*...
  <FilesMatch "\.(js|css|gif|png|jpe?g|pdf|xml|oga|ogg|m4a|ogv|mp4|m4v|webm|svg|svgz|eot|ttf|otf|woff|ico|webp|appcache|manifest|htc|crx|oex|xpi|safariextz|vcf)$" >
    Header unset X-UA-Compatible
  </FilesMatch>
</IfModule>

# ----------------------------------------------------------------------
# Cross-domain AJAX requests
# ----------------------------------------------------------------------

# Serve cross-domain Ajax requests, disabled by default.
# enable-cors.org
# code.google.com/p/html5security/wiki/CrossOriginRequestSecurity

#  <IfModule mod_headers.c>
#    Header set Access-Control-Allow-Origin "*"
#  </IfModule>

# ----------------------------------------------------------------------
# CORS-enabled images (@crossorigin)
# ----------------------------------------------------------------------

# Send CORS headers if browsers request them; enabled by default for images.
# developer.mozilla.org/en/CORS_Enabled_Image
# blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html
# hacks.mozilla.org/2011/11/using-cors-to-load-webgl-textures-from-cross-domain-images/
# wiki.mozilla.org/Security/Reviews/crossoriginAttribute

<IfModule mod_setenvif.c>
  <IfModule mod_headers.c>
    # mod_headers, y u no match by Content-Type?!
    <FilesMatch "\.(gif|png|jpe?g|svg|svgz|ico|webp)$">
      SetEnvIf Origin ":" IS_CORS
      Header set Access-Control-Allow-Origin "*" env=IS_CORS
    </FilesMatch>
  </IfModule>
</IfModule>

# ----------------------------------------------------------------------
# Webfont access
# ----------------------------------------------------------------------

# Allow access from all domains for webfonts.
# Alternatively you could only whitelist your
# subdomains like "subdomain.example.com".

<IfModule mod_headers.c>
  <FilesMatch "\.(ttf|ttc|otf|eot|woff|font.css)$">
    Header set Access-Control-Allow-Origin "*"
  </FilesMatch>
</IfModule>

# ----------------------------------------------------------------------
# Proper MIME type for all files
# ----------------------------------------------------------------------

# JavaScript
#   Normalize to standard type (it's sniffed in IE anyways)
#   tools.ietf.org/html/rfc4329#section-7.2
AddType application/javascript         js

# Audio
AddType audio/ogg                      oga ogg
AddType audio/mp4                      m4a

# Video
AddType video/ogg                      ogv
AddType video/mp4                      mp4 m4v
AddType video/webm                     webm

# SVG
#   Required for svg webfonts on iPad
#   twitter.com/FontSquirrel/status/14855840545
AddType     image/svg+xml              svg svgz
AddEncoding gzip                       svgz

# Webfonts
AddType application/vnd.ms-fontobject  eot
AddType application/x-font-ttf         ttf ttc
AddType font/opentype                  otf
AddType application/x-font-woff        woff

# Assorted types
AddType image/x-icon                        ico
AddType image/webp                          webp
AddType text/cache-manifest                 appcache manifest
AddType text/x-component                    htc
AddType application/x-chrome-extension      crx
AddType application/x-opera-extension       oex
AddType application/x-xpinstall             xpi
AddType application/octet-stream            safariextz
AddType application/x-web-app-manifest+json webapp
AddType text/x-vcard                        vcf

# ----------------------------------------------------------------------
# Gzip compression
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # HTML, TXT, CSS, JavaScript, JSON, XML, HTC:
  <IfModule filter_module>
    FilterDeclare   COMPRESS
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/html
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/css
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/plain
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/x-component
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/javascript
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/json
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xhtml+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/rss+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/atom+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/vnd.ms-fontobject
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/svg+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/x-icon
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/x-font-ttf
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $font/opentype
    FilterChain     COMPRESS
    FilterProtocol  COMPRESS  DEFLATE change=yes;byteranges=no
  </IfModule>

  <IfModule !mod_filter.c>
    # Legacy versions of Apache
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml application/atom+xml
    AddOutputFilterByType DEFLATE image/x-icon image/svg+xml application/vnd.ms-fontobject application/x-font-ttf font/opentype
  </IfModule>

</IfModule>

# ----------------------------------------------------------------------
# Expires headers (for better cache control)
# ----------------------------------------------------------------------

# These are pretty far-future expires headers.
# They assume you control versioning with cachebusting query params like
#   <script src="application.js?20100608">
# Additionally, consider that outdated proxies may miscache
#   www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/

# If you don't use filenames to version, lower the CSS  and JS to something like
#   "access plus 1 week" or so.

<IfModule mod_expires.c>
  ExpiresActive on

# Perhaps better to whitelist expires rules? Perhaps.
  ExpiresDefault                          "access plus 1 month"

# cache.appcache needs re-requests in FF 3.6 (thanks Remy ~Introducing HTML5)
  ExpiresByType text/cache-manifest       "access plus 0 seconds"

# Your document html
  ExpiresByType text/html                 "access plus 0 seconds"

# Data
  ExpiresByType text/xml                  "access plus 0 seconds"
  ExpiresByType application/xml           "access plus 0 seconds"
  ExpiresByType application/json          "access plus 0 seconds"

# Feed
  ExpiresByType application/rss+xml       "access plus 1 hour"
  ExpiresByType application/atom+xml      "access plus 1 hour"

# Favicon (cannot be renamed)
  ExpiresByType image/x-icon              "access plus 1 week"

# Media: images, video, audio
  ExpiresByType image/gif                 "access plus 1 month"
  ExpiresByType image/png                 "access plus 1 month"
  ExpiresByType image/jpg                 "access plus 1 month"
  ExpiresByType image/jpeg                "access plus 1 month"
  ExpiresByType video/ogg                 "access plus 1 month"
  ExpiresByType audio/ogg                 "access plus 1 month"
  ExpiresByType video/mp4                 "access plus 1 month"
  ExpiresByType video/webm                "access plus 1 month"

# HTC files  (css3pie)
  ExpiresByType text/x-component          "access plus 1 month"

# Webfonts
  ExpiresByType application/x-font-ttf    "access plus 1 month"
  ExpiresByType font/opentype             "access plus 1 month"
  ExpiresByType application/x-font-woff   "access plus 1 month"
  ExpiresByType image/svg+xml             "access plus 1 month"
  ExpiresByType application/vnd.ms-fontobject "access plus 1 month"

# CSS and JavaScript
  ExpiresByType text/css                  "access plus 1 week"
  ExpiresByType application/javascript    "access plus 1 week"

</IfModule>

# ----------------------------------------------------------------------
# ETag removal
# ----------------------------------------------------------------------

# FileETag None is not enough for every server.
<IfModule mod_headers.c>
  Header unset ETag
</IfModule>

# Since we're sending far-future expires, we don't need ETags for
# static content.
#   developer.yahoo.com/performance/rules.html#etags
FileETag None

# ----------------------------------------------------------------------
# Start rewrite engine
# ----------------------------------------------------------------------

# Turning on the rewrite engine is necessary for the following rules and features.
# FollowSymLinks must be enabled for this to work.

<IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
</IfModule>

 **<IfModule mod_rewrite>   
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}\.php -f
    RewriteRule ^(.*)$ $1.php
 </IfModule>    
  <IfModule mod_rewrite.c>   
    RewriteCond %{HTTPS} !=on
    RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
    RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
 </IfModule>**

# ----------------------------------------------------------------------
# Prevent 404 errors for non-existing redirected folders
# ----------------------------------------------------------------------

# without -MultiViews, Apache will give a 404 for a rewrite if a folder of the same name does not exist
#   e.g. /blog/hello : webmasterworld.com/apache/3808792.htm

Options -MultiViews

# ----------------------------------------------------------------------
# Custom 404 page
# ----------------------------------------------------------------------

# You can add custom pages to handle 500 or 403 pretty easily, if you like.
ErrorDocument 404 /404.html

# ----------------------------------------------------------------------
# UTF-8 encoding
# ----------------------------------------------------------------------

# Use UTF-8 encoding for anything served text/plain or text/html
AddDefaultCharset utf-8

# Force UTF-8 for a number of file formats
AddCharset utf-8 .css .js .xml .json .rss .atom

# ----------------------------------------------------------------------
# A little more security
# ----------------------------------------------------------------------

<IfModule mod_autoindex.c>
  Options -Indexes
</IfModule>

# Block access to "hidden" directories whose names begin with a period. This
# includes directories used by version control systems such as Subversion or Git.
<IfModule mod_rewrite.c>
  RewriteCond %{SCRIPT_FILENAME} -d
  RewriteCond %{SCRIPT_FILENAME} -f
  RewriteRule "(^|/)\." - [F]
</IfModule>

# Block access to backup and source files
# This files may be left by some text/html editors and
# pose a great security danger, when someone can access them
<FilesMatch "(\.(bak|config|sql|fla|psd|ini|log|sh|inc|swp|dist)|~)$">
  Order allow,deny
  Deny from all
  Satisfy All
</FilesMatch>

<IfModule php5_module>
  php_value session.cookie_httponly true
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:03:34.523

解决了！看起来我有/有 2 个问题，首先是 Jon Lin 提出的观点。然后通过反复试验，我删除了所有规则，直到找到违反规则的规则。它似乎如下：

```
Options -MultiViews – 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T16:29:37.407

您的 htaccess 文件中的此部分不正确：

```
<IfModule mod_rewrite>   
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.php -f
  RewriteRule ^(.*)$ $1.php
</IfModule>    
<IfModule mod_rewrite.c>   
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
  RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</IfModule> 
```

`mod_rewrite`不是模块，它必须是`mod_rewrite.c`. 您也可以将整个部分放在同`<IfModule>`一块下：

```
<IfModule mod_rewrite.c>   
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.php -f
  RewriteRule ^(.*)$ $1.php

  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
  RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</IfModule> 
```

# ios - 我应该如何设置一个可供所有应用程序控制器使用的布尔值？

> ID：11492519
> 
> 赞同：1
> 
> 时间：2012-07-15T14:03:32.090
> 
> 标签：ios, global-variables

我的应用程序中有一个帮助模式，当应用程序处于帮助模式时，它“告诉”所有按钮的行为不同。

我希望设置一个全局布尔值来指示应用程序是否处于帮助模式。

什么是最佳实践？

谢谢沙妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:58:07.187

我建议将它放在 App Delegate 中，然后通过以下方式访问它：

```
AppDelegate *myAppDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
myAppDelegate.yourboolean = YES; 
```

并继续前进。或者使用 NSNotification。当您的应用程序进入帮助模式时，在打开帮助模式的视图控制器中设置 NSNotification。

```
//Put this right after the switch for help mode is turned on!

    [[NSNotificationCenter defaultCenter] postNotificationName:@"helpModeOn" object:yourboolean]; 
```

并且在帮助模式影响的所有其他视图控制器或文件中应该有这个：

```
-(void)viewDidLoad:
{
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(ThingYouWantToDoWhenHelpModeIsOn:) name:@"helpModeOn" object:nil];
}

- (void)ThingYouWantToDoWhenHelpModeIsOn:(NSNotification *)notification{
        // Make sure you have an BOOL in your header file for all the other view controllers
        ThatBooleanValue = [notification object];
        [self performSelector:@selector(OtherThings:) object:ThatBooleanValue];
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:08:57.930

您可以设置一个全局静态布尔值，并通过一些 .h 文件使其作为外部可用。在某些情况下，这是一种完全可以接受的方式。

如果您希望用户以他们离开的方式返回您的应用程序，例如他们现在处于帮助模式，离开并在第二天返回并且仍然处于帮助模式，那么我可以通过 NSUserDefaults 使用 Preferences 来做到这一点。

# passwords - 我应该如何存储密码？

> ID：11492521
> 
> 赞同：0
> 
> 时间：2012-07-15T14:04:02.837
> 
> 标签：passwords, password-protection, digest-authentication, password-encryption

我有一个需要登录的系统，但我为谁构建它是要求在登录期间传输密码非常安全（即使使用 SSL）。所以我使用摘要访问身份验证的变体来传输登录请求。我现在遇到的唯一问题是如何将密码存储在数据库中（最好是在安全的加盐散列中），以便它们可以与摘要请求一起使用，并且密码在任何时候都不是非散列格式，除了在客户端浏览器几秒钟。

那么，简而言之，我怎样才能安全地存储密码但允许摘要（与数据库的盐不同且不断变化的随机数）进行身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:06:23.783

据我了解，这种机制发送如下内容：

```
hash(nonce + hash(password + salt)) 
```

所以在服务器上，你只需要存储`hash(password + salt)`和`salt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:17:21.313

你可能想看看[这个](http://search.cpan.org/~vidul/Linux-usermod-0.69/usermod.pm)Perl 模块的源代码；它管理 *nix 帐户。

# c# - c#如何请求url参数和更改char

> ID：11492523
> 
> 赞同：0
> 
> 时间：2012-07-15T14:04:14.660
> 
> 标签：c#, url, parameters, request.querystring, namevaluecollection

获得一些 url 参数后，我想稍后在我的 c# 代码中使用它们，但格式略有不同。

“http://example/myexample.aspx?attendees=john.sam&speakers=fred.will.tony.amy.al”

我可以使用以下方法以现有格式将值作为字符串获取：c# 代码

```
public string myattendees()
{
    string attendees;
    attendees = Request.QueryString["attendees"];
    return attendees;
}
public string myspeakers()
{
    string speakers;
    speakers = Request.QueryString["speakers"];
    return speakers;
} 
```

myattendees 返回（用不带引号的句点分隔）

约翰山姆

和 myspeakers 返回（用不带引号的句点分隔）

弗雷德.威尔.托尼.艾米.al

但我想对其进行转换，以便它返回像这样的字符串，其中包含逗号分隔和单引号值。

“约翰”，“山姆”

和

“弗雷德”、“威尔”、“托尼”、“艾米”、“阿尔”

在 c# 中执行此操作的最佳方法是什么？使用 NameValueCollection？

*为清楚细节而编辑了问题。*edit - 修正拼写错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:08:52.347

此代码将为您提供一个通过分割点获得的字符串数组：

```
string[] speakers;
if (Request.QueryString["speakers"] == null)
    speakers = new string[0];
else
    speakers = Request.QueryString["speakers"].Split('.'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:14:52.500

尝试这个：

```
public class MyClassGetQueryString
{

    private const string Attendees = "attendees";
    private const string Speakers = "speakers";

    public string MyAttendees()
    {
        return Request.QueryString[MyClassGetQueryString.Attendees] ?? string.Empty;
    }

    public string MySpeakers()
    {
        return Request.QueryString[MyClassGetQueryString.Speakers] ?? string.Empty;
    }

    public string[] MyAttendeesParts()
    {
        return this.MyAttendees().Split('.');
    } 

    public string[] MySpeakersParts()
    {
        return this.MySpeakers().Split('.');
    } 
} 
```

# python - 无法在 Windows 上安装 PyTables

> ID：11492526
> 
> 赞同：2
> 
> 时间：2012-07-15T14:04:27.873
> 
> 标签：python, visual-studio-2008, installation, hdf5, pytables

我尝试安装 PyTables 模块。我使用 Windows 7 (x32)、Python 2.7.3 (x32)、Cython 0.16、Visual Studio 2008 (9.0)。在 cmd.exe '以管理员身份运行' 写入：'python setup.py install --hdf5="C:\Program Files\HDF Group\HDF5\1.8.9"'。

但是有未解析的外部符号并且构建失败：

```
* Found numpy 1.6.2 package installed.
* Found numexpr 2.0.1 package installed.
* Found Cython 0.16 package installed.
* Found HDF5 headers at ``C:\Program Files\HDF Group\HDF5\1.8.9\include``, libra
ry at ``C:\Program Files\HDF Group\HDF5\1.8.9\lib``.
* Could not find LZO 2 headers and library; disabling support for it.
* Could not find LZO 1 headers and library; disabling support for it.
* Could not find bzip2 headers and library; disabling support for it.
cythoning tables\linkExtension.pyx to tables\linkExtension.c
running install
running build
running build_py
running build_ext
No module named msvccompiler in numpy.distutils; trying from distutils
building 'tables.utilsExtension' extension
C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /nologo /Ox /MD /W
3 /GS- /DNDEBUG -DNDEBUG=1 -DWIN32=1 -D_HDF5USEDLL_=1 -Iblosc -IC:\Python27\lib\
site-packages\numpy-1.6.2-py2.7-win32.egg\numpy\core\include -I"C:\Program Files
\HDF Group\HDF5\1.8.9\include" -IC:\Python27\include -IC:\Python27\PC /Tctables\
utilsExtension.c /Fobuild\temp.win32-2.7\Release\tables\utilsExtension.obj -Isrc
 -DH5_USE_16_API
Found executable C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\cl.exe
utilsExtension.c
c:\program files\hdf group\hdf5\1.8.9\include\H5public.h(47) : fatal error C1083
: Не удается открыть файл include: stdint.h: No such file or directory
error: Command "C:\Program Files\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /n
ologo /Ox /MD /W3 /GS- /DNDEBUG -DNDEBUG=1 -DWIN32=1 -D_HDF5USEDLL_=1 -Iblosc -I
C:\Python27\lib\site-packages\numpy-1.6.2-py2.7-win32.egg\numpy\core\include -I"
C:\Program Files\HDF Group\HDF5\1.8.9\include" -IC:\Python27\include -IC:\Python
27\PC /Tctables\utilsExtension.c /Fobuild\temp.win32-2.7\Release\tables\utilsExt
ension.obj -Isrc -DH5_USE_16_API" failed with exit status 2 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T14:09:50.010

在 Windows 上从源代码安装带有 C 扩展的 Python 包很困难。幸运的是，有人构建这些工具包并提供它们：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#pytables](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pytables)

从二进制工具包安装它，你会更开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-11T10:37:54.330

可能重复：[pytables 安装失败](https://stackoverflow.com/q/21607974/11236901)

看看这个答案： [https ://stackoverflow.com/a/68740234/11236901](https://stackoverflow.com/a/68740234/11236901)

或者只是为您的操作系统安装一个稳定版本：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#pytables](http://www.lfd.uci.edu/%7Egohlke/pythonlibs/#pytables)

并将文件安装在您的目录中：

*   pip install C:/some-dir/some-file.whl

# c++ - Canny边缘算法中只需要一个边缘

> ID：11492533
> 
> 赞同：7
> 
> 时间：2012-07-15T14:05:25.063
> 
> 标签：c++, opencv, image-processing, edge-detection, mathematical-morphology

当我使用精明的边缘算法时，它会产生与预期的粗彩色线相对的 2 条边缘，但我希望只显示一个边缘，以使我的直线和曲线检测算法变得不那么复杂，任何关于我如何可以的想法让它发生？

![在此处输入图像描述](../Images/f8af963c2304a7cca7d0edc114c19a6d.png)

这是代码：

```
bool CannyEdgeDetection(DataStructure& col)
{

Mat src, src_gray;
Mat dst, detected_edges, fin;
int WhiteCount = 0, BCount = 0;

char  szFil1[32] = "ocv.bmp";
char  szFil2[32] = "dst.bmp";
src = imread(szFil1);
dst = imread(szFil1);
blur( src_gray, detected_edges, Size(3,3) );
Canny( src, dst, 100, 200, 3 );
imwrite(szFil2, dst );

IplImage* img = cvLoadImage(szFil2);
int height    = img->height;
int width     = img->width;
int step      = img->widthStep;
int channels  = img->nChannels;
uchar * datau      = (uchar *)img->imageData;

for(int i=0;i<height;i++){
for(int j=0;j<width;j++){
for(int k=0;k<channels;k++){
datau[i*step+j*channels+k] = 255 - datau[i*step+j*channels+k];   
if (datau[i*step+j*channels+k]==0){
WhiteCount++;
col.pixel_col [i][j] = 2;
}
else{BCount++;
col.pixel_col[i][j] = 0;
}
}
}
}

cvSaveImage("img.bmp" ,img);

return 0;

} 
```

这不是原始图像，但类似：

![在此处输入图像描述](../Images/495d89f4b6a0fed6318ac6a4e7866c23.png)

我注释掉哪一部分才能在白色背景中读取黑色图像？或任何彩色图像？

```
bool done;
do
{
  cv::morphologyEx(img, temp, cv::MORPH_OPEN, element);
  cv::bitwise_not(temp, temp);
  cv::bitwise_and(img, temp, temp);
  cv::bitwise_or(skel, temp, skel);
  cv::erode(img, img, element);

  double max;
  cv::minMaxLoc(img, 0, &max);
  done = (max == 0);
} while (!done); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:08:25.737

该过程称为`skeletonization`or `thinning`。你可以用谷歌搜索。

这是一个`simple method for skeletonization`：[骨架化 OpenCV In C#](https://stackoverflow.com/questions/10658325/skeletonization-opencv-in-c-sharp)

以下是将`output`上述方法应用于您的图像时得到的结果（**图像在骨架化之前被反转，**因为上述方法适用于`white images in black background`您的输入图像的相反情况）。

![在此处输入图像描述](../Images/6812161ea6d28c05e46b802fc08e8b51.png)

# php - php vs c++ 中的处理

> ID：11492537
> 
> 赞同：3
> 
> 时间：2012-07-15T14:05:57.903
> 
> 标签：php, c++, performance

我需要设计一个使用哈希表的函数。它基本上将数据插入哈希表并搜索项目。通常，该函数将需要 15 秒到 10 分钟才能执行。我应该在 c++ 中实现这个函数并在 PHP 中使用系统调用，还是应该在 php 中使用关联数组来实现它。哪个会更有效率。各有什么优缺点。

键将是一个字符串。该值将是一个包含两个其他结构的结构。第一个结构基本上包含一个整数数组，第二个结构将包含一个整数对值数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:45:21.580

显然，PHP 数组是作为链接哈希表实现的。请参阅[如何在 C 级别上实现 PHP 数组？](https://stackoverflow.com/questions/2350361/how-is-the-php-array-implemented-on-the-c-level).

无论如何，对于 300 件物品，您使用的容器类型的速度差异可能很小。为了简单起见，如果可能的话，我会留在 PHP 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:48:32.007

PHP 以其快速的关联数组实现而闻名，但根据我的经验，C++ 仍然更快。几个月前我需要实现快速前缀匹配，哈希表中有数千个前缀和数百万个要匹配的字符串。我同时实现了 PHP 和 C++ 实现，我记得 C++ 的速度要快 10 倍以上，而且消耗的内存要少得多。但当然，它在很大程度上也取决于您的算法，而不仅仅是哈希表的实现。

# jquery - 更改网页内容而不刷新

> ID：11492542
> 
> 赞同：2
> 
> 时间：2012-07-15T14:06:36.420
> 
> 标签：jquery, ajax, html

我自愿为我当地的动物收容所建立一个网站，他们想要一个与[http://fsasri.com/](http://fsasri.com/)非常相似的网站。我真的很喜欢他们对按钮所做的事情，以及当您仅单击中心 div 时的变化。iv 尝试使用innerhtml 和jquery 版本来完成这多种方式，我不记得它了。无论我做什么，我都无法放入那么多新内容，并且 Internet Explorer 会弹出一个安全警告，并且不会让更改发生，除非您允许阻止脚本和 activeX。帮助你们如何实现这种效果以及避免这种弹出式互联网探索的方法将有助于捆绑。iv一直在做很多研究，到目前为止还没有运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:53:31.557

**HTML：**

```
<a href="http://path.com/to/page.html" data-ajax>Home</a> 
```

**JS：**

```
$(function() {
    var box = $('#loadtodiv');
    $(document).on('click', 'a[data-ajax]', function(e) {
        e.preventDefault();
        $.ajax({
            type: 'post',
            url: $(this).attr('href'),
            success: function(data) {
                box.html(data);
            }
        });
    });
}); 
```

如果页面上的内容仅适用于框，则应该这样做，否则您必须专门针对页面上的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:13:29.640

[http://fsasri.com](http://fsasri.com)上的网站使用框架，如果使用不当，由于存在很多安全问题，我真的不推荐。

但是，您可以做的是使用 jQuery 的 Ajax 函数更改“主”div 的内容。您的按钮应如下所示：

```
<a href="javascript:void(0);" class="button" onclick="getPage('home')">Home</a> 
```

通过以下功能，您可以使其正常工作：

```
<script>    
function getPage(page)
{
   $.ajax({

     type: "GET",
     url: 'www.yourweb.com/' + page + '.html',
     success: function(data) {
          $('#maindiv').html(data);
     }

   });

}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T14:51:21.333

尝试使用 ASP.net？

您自己的 VB/C# 代码将更新或更改您想要更改的网站页面的任何内容。

# php - PHP重写一个json数组（未定义的偏移量）

> ID：11492543
> 
> 赞同：0
> 
> 时间：2012-07-15T14:06:36.590
> 
> 标签：php, arrays, json

我正在使用 OpenLibrary.org 制作的一些 json，并从信息中重新制作一个新数组。 [链接到 OpenLibrary json](http://openlibrary.org/api/books?bibkeys=ISBN:9781599953540&jscmd=data&format=json)

这是我解码 json 的 PHP 代码：

```
$barcode = "9781599953540";

function parseInfo($barcode) {
    $url = "http://openlibrary.org/api/books?bibkeys=ISBN:" . $barcode . "&jscmd=data&format=json";
    $contents = file_get_contents($url); 
    $json = json_decode($contents, true);
    return $json;
} 
```

我正在尝试制作的新数组看起来像这样：

```
$newJsonArray = array($barcode, $isbn13, $isbn10, $openLibrary, $title, $subTitle, $publishData, $pagination, $author0, $author1, $author2, $author3, $imageLarge, $imageMedium, $imageSmall); 
```

但是当我尝试获取 ISBN_13 以将其保存到 $isbn13 时，出现错误：

```
Notice: Undefined offset: 0 in ... on line 38 
// Line 38
$isbn13 = $array[0]['identifiers']['isbn_13']; 
```

即使我尝试 $array[1] ,[2], [3].... 我也会得到同样的结果。我在这里做错了什么！OI 知道我的 Valuable 名称可能不一样，那是因为它们的功能不同。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:17:30.393

您的数组不是由整数索引，而是由 ISBN 编号索引：

```
Array
(
    // This is the first level of array key!
    [ISBN:9781599953540] => Array
        (
            [publishers] => Array
                (
                    [0] => Array
                        (
                            [name] => Center Street
                        )

                )

            [pagination] => 376 p.
            [subtitle] => the books of mortals
            [title] => Forbidden
            [url] => http://openlibrary.org/books/OL24997280M/Forbidden
            [identifiers] => Array
            (
                [isbn_13] => Array
                    (
                        [0] => 9781599953540
                    )

                [openlibrary] => Array
                    (
                        [0] => OL24997280M
                    ) 
```

因此，您需要通过第一个 ISBN 调用它，并且键`isbn_13`本身就是一个数组，您必须按元素访问它：

```
// Gets the first isbn_13 for this item:
$isbn13 = $array['ISBN:9781599953540']['identifiers']['isbn_13'][0]; 
```

或者，如果您需要对其中许多进行循环：

```
foreach ($array as $isbn => $values) {
  $current_isbn13 = $values['identifiers']['isbn_13'][0];
} 
```

如果您每次只期望一个并且必须能够在不提前知道它的情况下获得它的密钥但不想要一个循环，您可以使用`array_keys()`：

```
// Get all ISBN keys:
$isbn_keys = array_keys($array);
// Pull the first one:
$your_item = $isbn_keys[0];
// And use it as your index to $array
$isbn13 = $array[$your_item]['identifiers']['isbn_13'][0]; 
```

如果你有 PHP 5.4，你可以通过数组取消引用跳过一个步骤！：

```
// PHP >= 5.4 only
$your_item = array_keys($array)[0];
$isbn13 = $array[$your_item]['identifiers']['isbn_13'][0]; 
```

# node.js - express.compiler、app.error 和 app.address 在 Node.js 0.8.2 和 Express.js 3.0.0beta6 中是否已过时？

> ID：11492548
> 
> 赞同：0
> 
> 时间：2012-07-15T14:06:51.210
> 
> 标签：node.js, express

我刚刚将 Node.js 和一堆模块更新到了最新版本，然后我遇到了很多错误。我试图弄清楚，似乎有些东西是未定义的。谁能知道这些东西的等价物是什么？

Node.js 版本 0.8.2
Express.js 版本 3.0.0beta6
Connect.js 版本 2.3.8

```
express = require 'express'
app = express.createServer()
console.log express.compiler    # undefined
console.log app.error           # undefined
console.log app.address         # undefined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:41:52.300

Express 现在是您传递给 http.createServer 的处理程序。

```
express = require 'express'
http = require 'http'
app = express()
( http.createServer app ).listen 3000 
```

# unicode - CEDICT 的示例解析器代码

> ID：11492553
> 
> 赞同：0
> 
> 时间：2012-07-15T14:08:05.500
> 
> 标签：unicode, utf-8, dictionary, cjk

有没有人有解析 CEDICT 文件的示例代码？CEDICT是汉英词典。例如，目前，如果我在文本编辑器中打开它，CEDICT 文件中的一行如下所示：

‰∏ç ‰∏ç [bu4] /(否定前缀)/not/no/

我想将其视为：

不 不 [bu4] /(否定前缀)/not/no/

我发现 Textwrangler 作为文本编辑器为我做这件事。我现在需要的是实现相同的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:00:45.237

问题是，这只是一个编码问题。如果这条线看起来像

‰∏ç ‰∏ç [bu4] /(否定前缀)/not/no/

这是因为文本编辑器不知道/意识到文本被编码为 UTF-8。Text Wrangler，或者它的老大哥BBEdit，非常擅长猜测编码，甚至可以被要求以特定的编码显示文本。

由于我们不知道您最终想要实现什么，因此很难确切地告诉您必须做什么，特别是。我能说的是您的应用程序（您使用的是哪种语言？）需要支持 Unicode（并且能够读取/操作 UTF 字符串）。

我基于 CEDICT 编写了几个应用程序，一个用于 Mac OS X，一个用于 Android。解析和索引 CEDICT 并不难。

## 更新

关于 CEDICT 的解析本身，这并不复杂。我不做Objective-C，从来没有，永远不会，但是任何语言的过程都是一样的：

*   读一行。说你自己的例子： 不 不 [bu4] /(否定前缀)/not/no/
*   你有四个领域：传统。Ch.，辛普。Ch.，阅读，含义。这些字段是空格分隔的。当然第四个字段可能包含空格，所以要小心。
*   将 4 个字段存储（我使用了一个 sqlite 数据库）到数据库中。您可能想从定义字段中删除斜杠，将它们替换为其他内容。
*   环形

您现在已将 CEDICT 转换为数据库。那是容易的部分。至于标记中文，祝你好运，伙计。比我更优秀的人仍在努力解决这个问题。

# android - 菜单按钮 - 银河系

> ID：11492559
> 
> 赞同：1
> 
> 时间：2012-07-15T14:08:45.767
> 
> 标签：android, menu, visibility

我希望我的应用程序在我的 Galaxy nexus 中显示默认菜单按钮。但是，当我加载我的应用程序时，它会删除菜单按钮。我尝试以编程方式显示菜单按钮：首先它尝试了 OnCreateOptionsMenu，但在创建我的活动时它没有运行。然后我尝试在我的活动的 onCreate 方法中运行 openOptionMenu() 但没有好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:50:28.043

> 我希望我的应用程序在我的 Galaxy nexus 中显示默认菜单按钮

我不确定“默认菜单按钮”是什么。

如果您已设置`android:minSdkVersion`或`android:targetSdkVersion`设置为 11 或更高，则溢出菜单按钮将出现在操作栏的右侧。

在大多数其他情况下，您应该在底部导航栏中获得旧版菜单按钮。

更多信息，请阅读[这篇 Android 开发者博客文章](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)。

# redirect - Heroku/GoDaddy：将裸域发送到 www

> ID：11492563
> 
> 赞同：146
> 
> 时间：2012-07-15T14:08:55.450
> 
> 标签：redirect, heroku, cname, a-records

我试图弄清楚如何让我的网站的裸域重定向到 www 域。我正在使用 Heroku 并拥有来自 GoDaddy 的域。由于 Heroku，我的 A 记录已经设置为：

@：75.101.145.87

@：75.101.163.44

@：174.129.25.170

我的 www CNAME 指向 proxy.heroku.com。

我一直在寻找整个互联网，但找不到一个简单、免费的答案来说明如何进行此重定向。一些答案讨论使用付费服务，我不想这样做，而另一些答案则讨论进入和修改 Heroku 设置，但实际上并没有给出太多解释。现在，如果你去我的裸域，它只是 Heroku 说不存在这样的应用程序，而如果你去我的 www 域它是我的应用程序。

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2012-07-15T17:47:35.183

在 GoDaddy 上，使用“转发”功能设置转发 from`yourdomain.com`到`www.yourdomain.com`。可以在“域信息”部分底部的域管理器中访问转发功能：

![GoDaddy 中的域转发](../Images/c3d9663174f3cfa04e32da245c00deff.png)

如果你这样做，那么到 yourdomain.com 的所有流量都将被路由到 Heroku 应用程序 CNAME（这是[更好的方法](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords)）。

但是，请注意，如果您在[Cedar 堆栈](https://devcenter.heroku.com/articles/cedar)上，则不要用于您的CNAME`proxy.heroku.com`的主机。`www`而是使用`your-app-name.herokuapp.com`. 这些详细信息在[此处进行了介绍](https://devcenter.heroku.com/articles/custom-domains#dns_setup)。

GoDaddy 还[规定](http://support.godaddy.com/help/article/422/forwarding-or-masking-your-domain-name?locale=en)，为了让您的域名转发，其 A 记录必须指向 64.202.189.170 或必须介于以下范围之间：50.63.202.1 - 50.63.202.31 或 184.168.221.1 - 184.168.221.31。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-25T01:37:41.860

您还可以使用[http://wwwizer.com](http://wwwizer.com)从您的裸域转发到您的 www。在 GoDaddy 的 DNS 管理器中的 A 记录下，@标题类型为 174.129.25.170。他们会自动从裸域重定向到带有 www 的域。在它面前。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-15T14:37:31.357

在 GoDaddy 的 DNS 区域编辑器中，您需要将 CNAME 记录 www 配置为指向 @。在您的 A 记录中，您将使用通配符 (*) 指向 IP 地址，并使用第二个使用 @ 作为主机的 A 记录也将指向 Web 地址。这边走，

```
subdomain1.example.com will forward to your IP
www.example.com will forward to your IP
silly.example.com will forward to your IP
anything.example.com will forward to your IP 
```

![在此处输入图像描述](../Images/6f38927dfc5496bd9e0b23893fa6c651.png)

***经常问的问题***

**我可以将 *.mydomain.com 指向我的 Heroku 应用程序吗？**

> 是的，使用 Heroku 的免费自定义域功能，您可以将通配符域指向您的应用程序。

**我应该使用哪些 IP 地址将我的自定义域指向 Heroku？**

> Heroku 路由堆栈使用的 IP 地址集合可以随时更改，并且不支持使用 A 记录指向您的应用程序。为确保您的域始终正确指向路由网格，请使用 CNAME 记录配置子域（例如 www.example.org 中的 www）：

```
If the app is on…   Then CNAME the subdomain to
Bamboo  yourapp.heroku.com
Cedar   yourapp.herokuapp.com 
```

> 应避免裸（或裸/顶级）域（例如 example.org），因为它们的可用性和正常运行时间后果。

**为什么我不能为我的应用添加 subdomain.mydomain.com？**

> 在某些情况下，尝试为应用添加自定义域（如 subdomain.mydomain.com）可能会导致如下错误：

```
 ! mydomain.com is owned by another user 
```

> 给定基域的所有应用程序必须由同一个 Heroku 帐户拥有。上述错误意味着其他人已经将 mydomain.com 自定义域添加到他们的一个应用程序中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-15T17:16:47.237

如果您在裸域上设置了 IP 地址，并且您的 www cname'd 到 yourappname.herokuapp.com，那么您需要做的就是在您的应用程序中使用[RackRewrite 之](https://github.com/jtrupiano/rack-rewrite)类的东西来在请求到达您的应用程序时重定向它们。

您要设置的是对裸域的任何请求都会重定向到您的 www 地址。按照安装说明在 config/initializers 中添加一个初始化程序

```
 ApplicationName::Application.config.middleware.insert_before(Rack::Lock, Rack
 r301 %r{.*}, 'http://www.yourdomain.com$&', :if => Proc.new {|rack_env
  rack_env['SERVER_NAME'] != 'www.yourdomain.com'
 }
 end if Rails.env == 'production' 
```

也就是说，如果请求的 URL 不是 www.yourdomain.com，则 301 将其重定向到 www.yuordomain.com，但前提是它在生产中运行。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-14T02:38:14.157

**为此，要与网络解决方案一起使用，请执行以下操作：**

> 将 yourdomain.com 指向 www.yourdomain.com 的网络解决方案。就是这样。
> 
> 1.  在*Account Manager*中，选择*My Domain Names*
>     
>     
> 2.  选择您要管理的域名
>     
>     
> 3.  在绿色框中，选择*更改域点的位置*
>     
>     
> 4.  选择*Advanced DNS*，然后继续
>     
>     
> 5.  首先，通过选择*编辑 A 记录来编辑 A 记录*
>     
>     
>     
>     **对于“@ none”，输入以下 IP 地址 205.178.189.129，清除“www”和“*（所有其他）”的记录**，然后选择继续
>     
>     
> 6.  其次，通过选择编辑 CNAME 记录来编辑主机别名（CNAME 记录）
>     
>     
>     
>     在别名栏中输入“www”
>     
>     
>     
>     将 TTL 设置为 7200，但在同一行，在 Other Host 部分输入博客服务提供的名称服务器 **[IE FOLLOW THE HEROKU INSTRUCTIONS NOW www --> yourapp.herokuapp.com (Cedar Stack)]**
>     
>     
>     
>     选择继续

现在等待并使用以下终端命令检查域：

```
host domain.com
host www.domain.com 
```

# java - JSF：如何替换字符串中的“\\”

> ID：11492569
> 
> 赞同：2
> 
> 时间：2012-07-15T14:09:47.720
> 
> 标签：java, regex, string, jsf-2, el

假设我有字符串`text\\`，我需要替换`\\`为`/`. 我尝试了以下表达式：

```
/*  str = "text\\"  */
<h:outputText value="#{fn:replace(str, '\\', '/')}" /> 
```

但我总是遇到以下异常：

```
Caused by: java.util.regex.PatternSyntaxException: Unexpected internal error near index 1
\
^
at java.util.regex.Pattern.error(Pattern.java:1924)
at java.util.regex.Pattern.compile(Pattern.java:1671)
at java.util.regex.Pattern.<init>(Pattern.java:1337)
at java.util.regex.Pattern.compile(Pattern.java:1022)
at java.lang.String.replaceAll(String.java:2210)
at com.sun.faces.facelets.tag.jstl.fn.JstlFunction.replace(JstlFunction.java:222) 
```

如果您能给我一个建议，我将不胜感激。

**更新：**根据以下答案，我发现以下表达式将起作用：

```
<h:outputText value="#{fn:replace(str, '\\\\', '/')}" /> 
```

最好的祝福，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:16:26.053

我相信你需要避开反斜杠。试试这个：`replace("\\\\", "/")`

```
public class BackSlashEscaper {

    public static void main(String[] args) {

        String text = "text\\\\";
        System.out.println(text);

        System.out.println(text.replace("\\\\", "/"));
    }
} 
```

输出：

```
text\\
text/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:26:35.573

只是用一个反斜杠来演示：

```
public static void main(String[] args)
    {
        String text = "text\\";

        System.out.println(text.replaceAll("\\\\","/"));
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:37:52.020

试试这个（没有检查....）

```
<ui:param name="mydouble" value="\\\\"></ui:param>
<ui:param name="mysingle" value="/"></ui:param>
<h:outputText value="#{fn:replace(str, mydouble, mysingle)}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T14:39:19.260

```
public class TempClass {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        String str = sc.next();
        System.out.println("before : "+str);
        String newstr = str.replace("\\", "/");
        System.out.println("after  : "+newstr);
    }
} 
```

当我以文本形式提供输入时，我得到文本形式的输出//

```
before : text\\
after  : text// 
```

# objective-c - 在 iOS 上使用 UISwitches 作为单选按钮

> ID：11492574
> 
> 赞同：0
> 
> 时间：2012-07-15T14:10:11.953
> 
> 标签：objective-c, ios, radio-button, uiswitch

在我的应用程序中，我需要用户在 4 种类型的过滤器之间进行选择。如果他选择一个过滤器，其余的应该关闭。启动应用程序时，会预先选择 1 种类型的过滤器。要选择过滤器，我正在使用 UISwitches。每次只有 1 个开关应该打开。永远不会全部关闭，也不会超过一个。

为了完成这项工作，我使用了 4 个 UISwitches。我的代码看起来像这样：

```
- (IBAction)noFilterButtonTapped:(id)sender {
    if([noFilterButton isOn]){
        [noFilterButton setOn:YES animated:YES];
        [filterByTopicButton setOn:NO animated:YES];
        [filterByDateButton setOn:NO animated:YES];
        [filterByDistanceButton setOn:NO animated:YES];
    }
    else [noFilterButton setOn:YES animated:YES];

}

- (IBAction)filterByTopicButtonTapped:(id)sender {
    if([filterByTopicButton isOn]){
        [noFilterButton setOn:NO animated:YES];
        [filterByTopicButton setOn:YES animated:YES];
        [filterByDateButton setOn:NO animated:YES];
        [filterByDistanceButton setOn:NO animated:YES];    
    }
    else [filterByTopicButton setOn:YES animated:YES];
}

- (IBAction)filterByDateButtonTapped:(id)sender {
    if([filterByDateButton isOn]){
        [noFilterButton setOn:NO animated:YES];
        [filterByTopicButton setOn:NO animated:YES];
        [filterByDateButton setOn:YES animated:YES];
        [filterByDistanceButton setOn:NO animated:YES];    
    }    
    else [filterByDateButton setOn:YES animated:YES];    
}

- (IBAction)filterByDistanceButtonTapped:(id)sender {
    if([filterByDistanceButton isOn]){
        [noFilterButton setOn:NO animated:YES];
        [filterByTopicButton setOn:NO animated:YES];
        [filterByDateButton setOn:NO animated:YES];
        [filterByDistanceButton setOn:YES animated:YES];    
    }
    else [filterByDistanceButton setOn:YES animated:YES];
} 
```

该代码运行良好。如果您按下一个已经打开的开关，则该开关会再次打开（实际上是关闭半秒钟然后自动打开）。如果你按下另一个开关，它就会打开，其余的都关闭。问题是，在测试应用程序时，我注意到如果我按下一个开关并立即按下另一个开关，它们都可以打开！我认为发生这种情况是因为使用此代码时，当您点击一个已经打开的开关时，它会关闭然后再次打开，但是如果您点击另一个开关，就会发生这种“动作”，他们都“认为”应该打开。我如何确保始终只有 1 个开关打开？我不知道当开关打开并且您再次按下时是否有一种方法，而不是关闭和打开，而只是不对动作做出“反应”。即使有，它是一个可行的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:41:36.297

A`UISwitch`是您尝试执行的错误控制。您应该改用[`UISegmented`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html#//apple_ref/doc/uid/TP40006807)控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:42:28.057

```
- (IBAction)filterByDateButtonTapped:(id)sender 
{
    if(![filterByDateButton isOn])
        [filterByDateButton setOn:YES animated:YES];

    if([noFilterButton isOn])
        [noFilterButton setOn:NO animated:YES];

    if([filterByTopicButton isOn])
        [filterByTopicButton setOn:NO animated:YES];

    if([filterByDistanceButton isOn])
        [filterByDistanceButton setOn:NO animated:YES];
} 
```

显然其他方法也应该是这样的。

希望这可以帮助。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T18:18:40.157

公认的解决方案是很多代码，有更好的方法（除了 UISegmented）。

创建一个包含所有开关的数组

```
@property (strong,nonatomic) NSArray *switches

-(void)viewDidLoad{
    self.switches = [NSArray arrayWithObjects: filterByTopicButton, noFilterButton, filterByTopicButton, filterByDistanceButton, nil];
}
... 
```

将所有 UISwitch 连接到同一个 IBAction，然后像这样

```
-(IBAction)switchSwitched:(UISwitch *)sender{
    for (UISwitch *switch in self.switches)
        if (![switch isEqual:sender]) [switch setOn:NO animated:YES];
} 
```

就是这样，相同的效果和更少的代码

# c - c中下标中的字符串

> ID：11492576
> 
> 赞同：3
> 
> 时间：2012-07-15T14:10:42.057
> 
> 标签：c

下面的代码是什么意思？我以为是编译错误。但不会发生编译错误。

```
int main() 
{ 
    const int a=1; 
    printf("%c", ++a["Gyantonic"]); 
} 
```

Linux a 中的输出是分段错误。`a[1]`如果代替.它会给出编译错误`++a["Gyantonic"]`。

它是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T14:16:42.620

```
 ++a["Gyantonic"] 
```

相当于：

```
++(a["Gyantonic"]) 
```

这相当于

```
++("Gyantonic"[a]) 
```

相当于

```
++("Gyantonic"[1]) 
```

`"Gyantonic"[1]`产生`'y'`并`++`递增`'y'`存储在字符串文字中并产生结果。但是`"Gyantonic"`是字符串文字，字符串文字不能修改。这就是你得到分段错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:12:01.320

在 C 中，表达式`x[y]`完全等于`*(x+y)`。由于加法是可交换的，这意味着您也可以将其写为`y[x]`，即`*(y+x)`相同的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:16:02.060

```
++a["Gyantonic"] 
```

表示您正在尝试增加“Gyantonic”的第一个字符（因此，第一个，不是第一个而是*第二个*，从 0 开始的 C 字符串）字符。

而且由于“Gyantonic”是一个只读的常量字符串，它的任何字符都不能增加，你会得到一个分段错误。

在启用警告的 g​​cc 中，您将获得：

```
 warning: increment of read-only location ‘"Gyantonic"[a]’ [enabled by default] 
```

预期的输出显然是“z”（Gyantonic 中的“y”加 1）。为此，您应该编写：

```
 char string[] = "Gyantonic";
    const int a=1;
    printf("%c", ++a[string]); 
```

请注意，这与写作不同

```
 char *string = "Gyantonic"; 
```

第一个版本创建一个数组并在这个可写数组中初始化（COPIES）现有的只读字符串“Gyantonic”。第二个版本创建一个*指针*，一个指向现有只读字符串“Gyantonic”的*标签。*

允许写入可写副本 string[]；写入 *string 指向的 readonly 会出现段错误。

# html - 选择的 Html 选择选项不起作用

> ID：11492577
> 
> 赞同：10
> 
> 时间：2012-07-15T14:10:43.253
> 
> 标签：html, combobox

如何在组合框中设置默认选定元素？以下都不适合我：

版本 3：

```
<select id="parent">
    <option value='null'>(Root)</option>
    <option selected='yes' value='/'>Main</option>
</select> 
```

版本 2：

```
<select id="parent">
    <option value='null'>(Root)</option>
    <option selected='true' value='/'>Main</option>
</select> 
```

版本 1：

```
<select id="parent">
    <option value='null'>(Root)</option>
    <option selected value='/'>Main</option>
</select> 
```

在所有情况下，第一个选项都是在页面上选择的，而不是标记为选中的那个。

**其他一些细节**

(1)

页面源开头如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        ... 
```

(2)

浏览器是 Firefox 13.0.1

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-10-17T21:41:27.670

我只是要把它扔在那里，因为它不止一次让我发疯：

当您刷新 (F5) 页面时，Firefox 会保留页面上任何 <select> 元素的选定值。

因此，如果您像我一样编写选择菜单，请加载页面以确保其正常工作，然后添加“selected”属性，并刷新页面以确保出现所选的菜单......它不会（在无论如何，Firefox）。

通过单击地址字段并按 Enter 来完全重新加载页面确实尊重“选定”属性。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-18T05:19:48.903

也许自动完成表单属性会让你失望。

尝试将 autocomplete="off" 添加到表单标签。

这样，即使您在 FF 中刷新页面，也会尊重 selected 属性。

总帐

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-15T14:13:59.463

添加`selected`到您希望默认选择的选项。检查取自[此处](http://www.w3.org/wiki/HTML/Elements/select)的以下示例。

```
<!-- The second value will be selected initially -->
<select name="choice">
  <option value="first">First Value</option>
  <option value="second" selected>Second Value</option>
  <option value="third">Third Value</option>
</select> 
```

# javascript - 在数组中查找对象

> ID：11492580
> 
> 赞同：0
> 
> 时间：2012-07-15T14:11:00.420
> 
> 标签：javascript, underscore.js

我想用 underscore.js 实现某种 hasObject 函数。

例子：

```
var Collection = {
    this.items: [];
    this.hasItem: function(item) {
        return _.find(this.items, function(existingItem) { //returns undefined
            return item % item.name == existingItem.name;
        });
    }
};

Collection.items.push({ name: "dev.pus", account: "stackoverflow" });
Collection.items.push({ name: "margarett", account: "facebook" });
Collection.items.push({ name: "george", account: "google" });

Collection.hasItem({ name: "dev.pus", account: "stackoverflow" }); // I know that the name would already be enough... 
```

出于某种原因，下划线 find 返回未定义...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:31:09.780

看起来您正在阅读下划线文档，它们有：

```
var even = _.find([1, 2, 3, 4, 5, 6], function(num){ return num % 2 == 0; }); 
```

但是，这对您的情况没有任何意义，您只想查看`.name`属性是否等于其他对象的`.name`，如下所示：

```
var Collection = {
    items: [],

    hasItem: function(item) {
        return _.find(this.items, function(existingItem) { //returns undefined
            return item.name === existingItem.name;
        });
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:49:29.270

您需要检查名称和帐户的值。

```
var Collection = {
  this.items: [];
  this.hasItem: function(target) {
    return _.find(this.items, function(item) {
      return item.name === target.name && item.acount === target.account;
    });
  }
}; 
```

你考虑过使用[Backbone.js](http://backbonejs.org/)吗？它满足您所有的馆藏管理需求并使用 underscore 的方法。

```
// create a collection
var accounts = new Backbone.Collection();

// add models
accounts.add({name: 'dev.pus', account: 'stackoverflow'});
accounts.add({name: 'margarett', account: 'facebook'});
accounts.add({name: 'george', account: 'google'});

// getting an array.
var results = accounts.where({ name: 'dev.pus', account: 'stackoverflow' }); 
```

# python - 具有不同线条的 Matplotlib 密度图

> ID：11492581
> 
> 赞同：1
> 
> 时间：2012-07-15T14:11:13.110
> 
> 标签：python, matplotlib

我想在二维参数空间中创建一个密度图。但是，该示例由不同的解决方案组成，这些解决方案在参数空间中形成线条，因此由于像素化伪影，将所有内容放入矩阵并使用`imshow`是不可取的（图 1）。

![图1](../Images/5c08d3f1d1493084a201b5ab37f68d20.png)

我试图将每个不同的解决方案绘制为一条线，不透明度设置为它对应的概率，但不同线的混合似乎不是相加的（即所有线重叠的位置不是黑色的）。请参见图 2。

![图 2](../Images/fb01cb1c0c46becc382a6fea5821be7e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:52:03.733

不透明度不是附加的；如果您重叠两个不透明度为 0.5 的对象，您将不会得到黑色区域（不透明度 1.0）。

此外，所有线条重叠的点的大小可能小于 1 像素，这将使周围的颜色由于抗锯齿而渗入。

我认为像素化版本是最准确的解决方案，除非您想将所有不同的相交区域渲染为形状并手动着色。

# mysql - 优化查询或建议 LINQ 等效项

> ID：11492582
> 
> 赞同：7
> 
> 时间：2012-07-15T14:11:15.797
> 
> 标签：mysql, sql, linq, linq-to-sql, linq-to-objects

我有一个包含列 date_trans、time_trans、price 的表。在选择查询之后，我想添加一个新列“计数”，它将计算为价格列的连续相等值，并且先前具有连续相等价格的行将从最终结果中删除。查看预期输出：

```
date_trans  time_trans  price   **Count**    
2011-02-22  09:39:59    58.02   1
2011-02-22  09:40:03    58.1    *ROW WILL BE REMOVED
2011-02-22  09:40:07    58.1    *ROW WILL BE REMOVED
2011-02-22  09:40:08    58.1    3
2011-02-22  09:40:10    58.15   1
2011-02-22  09:40:10    58.1    *ROW WILL BE REMOVED
2011-02-22  09:40:14    58.1    2
2011-02-22  09:40:24    58.15   1
2011-02-22  09:40:24    58.18   *ROW WILL BE REMOVED
2011-02-22  09:40:24    58.18   *ROW WILL BE REMOVED
2011-02-22  09:40:24    58.18   3
2011-02-22  09:40:24    58.15   1 
```

请建议从表中选择的 sql 查询或 LINQ 表达式

目前，我可以将其作为一个选择查询并循环遍历所有选定的行，但是在选择数百万行时需要几个小时。

我当前的代码：

```
 string query = @"SELECT date_trans, time_trans,  price
                            FROM tbl_data 
                         WHERE date_trans BETWEEN '2011-02-22' AND '2011-10-21'
                        AND time_trans BETWEEN '09:30:00' AND '16:00:00'";

            DataTable dt = oUtil.GetDataTable(query);

            DataColumn col = new DataColumn("Count", typeof(int));
            dt.Columns.Add(col);

            int priceCount = 1;
            for (int count = 0; count < dt.Rows.Count; count++)
            {
                double price = Convert.ToDouble(dt.Rows[count]["price"]);
                double priceNext = (count == dt.Rows.Count - 1) ? 0 : Convert.ToDouble(dt.Rows[count + 1]["price"]);
                if (price == priceNext)
                {
                    priceCount++;
                    dt.Rows.RemoveAt(count);
                    count--;
                }
                else
                {
                    dt.Rows[count]["Count"] = priceCount;
                    priceCount = 1;
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:38:22.967

这是一个有趣的。我认为你需要的是这样的：

```
SELECT MAX(date_trans), MAX(time_trans), MAX(price), COUNT(*)
FROM
    (SELECT *, ROW_NUMBER() OVER(PARTITION BY price ORDER BY date_trans, time_trans) - ROW_NUMBER() OVER(ORDER BY date_trans, time_trans) AS grp
    FROM transactions) grps
GROUP BY grp 
```

在这里找到了解决方案：[http ://www.sqlmag.com/article/sql-server/solution-to-the-t-sql-puzzle-grouping-consecutive-rows-with-a-common-element](http://www.sqlmag.com/article/sql-server/solution-to-the-t-sql-puzzle-grouping-consecutive-rows-with-a-common-element)

**更新**

分组列还需要包含“价格”，否则组可能不是唯一的。另一件事是日期和时间列应该合并到一个日期时间列中，因此最大日期时间值在接近一天结束时开始并在下一天开始时结束的组中是正确的。这是更正后的查询。

```
SELECT MAX(CAST(date_trans AS DATETIME) + CAST(time_trans AS DATETIME)) , MAX(price), COUNT(*)
FROM
    (SELECT *, 
        CAST(ROW_NUMBER() OVER(PARTITION BY price ORDER BY date_trans, time_trans) - ROW_NUMBER() OVER(ORDER BY date_trans, time_trans) AS NVARCHAR(255)) + '-' + CAST(price AS NVARCHAR(255)) AS grp
    FROM transactions
    ORDER BY date_trans, time_trans) grps
GROUP BY grp 
```

使用 'grp' 列作为字节数组或 bigint 而不是 nvarchar，查询可能更优化。您还提到了您可能想要在组内求和的“体积”列。

# r - R：在ggplot中，如何为x轴上的多个日期中的每一个在y轴上添加多个文本标签

> ID：11492583
> 
> 赞同：5
> 
> 时间：2012-07-15T14:11:17.297
> 
> 标签：r, ggplot2

我正在制作一个非常宽的图表，当输出为 PNG 文件时，它在 x 轴上占据数千个像素；每天大约有20年的数据。（这可能被认为是好的做法，也可能不被认为是好的做法，但它是供我自己使用的，而不是为了出版。）因为图表很宽，当您滚动浏览图表时，y 轴会从视图中消失。因此，我想每隔 2 年向图中添加标签，以显示 y 轴上的值。生成的图表如下图所示，除了为了保持紧凑，我只使用了 30 天的假数据，并且大约每 10 天贴上标签：

![在gggplot2中用y轴值标记图](../Images/d38e59329d2d91974d228cfd8f1a9f28.png)

这或多或少地根据需要工作，但我想知道是否有更好的方法来接近它，如本图表所示（参见下面的代码）我为 120、140 和 160 的 3 个 y 轴值中的每一个都有一个列。真实数据有更多级别，所以我最终会调用 15 次 geom_text 来将所有内容都放在绘图区域中。

**问：有没有一种更简单的方法可以一次将所有 20 多个日期（每个日期有 15 个标签）打印到图表上？**

```
require(ggplot2)

set.seed(12345)
mydf <- data.frame(mydate = seq(as.Date('2012-01-01'), as.Date('2012-01-31'), by = 'day'),
                     price = runif(31, min = 100, max = 200))

mytext <- data.frame(mydate = as.Date(c('2012-01-10', '2012-01-20')),
                col1 = c(120, 120), col2 = c(140,140), col3 = c(160,160))

p <- ggplot(data = mydf) +
    geom_line(aes(x = mydf$mydate, y = mydf$price), colour = 'red', size = 0.8) +
    geom_text(data = mytext, aes(x = mydate, y = col1, label = col1), size = 4) +
    geom_text(data = mytext, aes(x = mydate, y = col2, label = col2), size = 4) +
    geom_text(data = mytext, aes(x = mydate, y = col3, label = col3), size = 4)

print(p) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T14:30:45.150

ggplot2 喜欢长格式的数据，因此`melt()`将您的文本转换为长格式可以让您一次调用`geom_text()`：

```
require(reshape2)
mytext.m <- melt(mytext, id.vars = "mydate") 
```

然后您的绘图命令变为：

```
ggplot(data = mydf) +
  geom_line(aes(x = mydf$mydate, y = mydf$price), colour = 'red', size = 0.8) +
  geom_text(data = mytext.m, aes(x = mydate, y = value, label = value), size = 4) 
```

# android - 无法使用 Eclipse 创建新的 Android 项目

> ID：11492585
> 
> 赞同：21
> 
> 时间：2012-07-15T14:11:23.490
> 
> 标签：android, eclipse

我最近将我的 sdk 版本从 18 更新到了 20。

我试图创建一个新的 Android 应用程序项目。我填写了创建新项目所需的所有字段，但是当我来到创建新 Android 应用程序项目的最后一页时，会出现以下内容：

" 此模板依赖于未安装的 Android 支持库，或者该模板依赖于比您安装的版本更新的版本。

所需版本：8 已安装版本：未安装"

然后它还会显示此链接。 [http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)

它还有两个按钮：

1.  安装/升级
2.  再检查一遍

当我单击第一个按钮时，它并没有下载、安装或升级我的任何软件。此消息显示到我的控制台：

```
[2012-07-15 21:55:08 - SDK Manager] Fetching https://dl-ssl.google.com/android/repository/addons_list-2.xml
[2012-07-15 21:55:16 - SDK Manager] Fetched Add-ons List successfully
[2012-07-15 21:55:16 - SDK Manager] Fetching URL: https://dl-ssl.google.com/android/repository/repository-7.xml
[2012-07-15 21:55:37 - SDK Manager] Done loading packages.
[2012-07-15 21:55:37 - Android Compatibility JAR not found:] D:\Software\Eclipse\v4\android-support-v4.jar 
```

按钮二根本不做任何事情。

我下载了压缩文件“android-sdk_r20-windows”并将其解压缩到我的硬盘上。我用它下载了以下内容：

1.  Android SDK 工具
2.  Android SDK 平台工具
3.  SDK平台API8
4.  谷歌 API 8

我不明白我的问题是什么，当我还没有更新它时，我的 Eclipse 可以正常工作。我是否忘记下载一些必需的工具或其他东西？

请帮我。

**添加：**当我导入以前的 Android 应用程序（我的应用程序在我的模拟器上运行）时，我的 Eclipse 工作正常，唯一的问题是我无法创建新的 Android 应用程序。

![这是我的截图。](../Images/04d8dbf82d3b950b8dd1743f8ab7dfb0.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-16T14:48:34.783

我今天为此挣扎了大约一个小时，它开始工作了。我认为关键是卸载并重新安装支持库，然后重新启动eclipse。

注意：从 SDK 管理器中卸载支持库后，我必须重新启动 eclipse 两次。手动删除文件夹表单终端对我不起作用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T14:31:17.287

`SDK Manager.exe`在您下载的 Android SDK r20 中打开。在软件列表中，向下滚动到底部的 Extras，然后选择 Android Support Library。

![在此处输入图像描述](../Images/ebd54f52d333ea45913bf0834d5f2141.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T03:36:06.537

第 1 步：打开 Android SDK 管理器。在软件列表中，向下滚动到底部的 Extras >> 并选择 Android Support Library >> Delete Package >> Delete complete restart eclipse

第 2 步：打开 Android SDK 管理器。在软件列表中，向下滚动到底部的 Extras >> 并选择 Android Support Library >> InstallPackage >> Installl complete restart eclipse >> Done

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-15T07:18:24.243

以下步骤对我有用：

1.  转到帮助>检查更新>选择Android工具开发并安装它
2.  重启 Eclipse
3.  Eclipse 要求我更新 Android SDK 工具。我点击确定
4.  Android SDK Manager 打开，我选择了安装和更新选项。
5.  完成后，我重新启动了eclipse并创建了新的android项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T09:54:56.617

[此处](https://stackoverflow.com/questions/11425730/how-to-create-an-project-with-adt-r20-without-including-the-android-support-libr)可能重复。这很奇怪，但很有效。

转到 SDK_Folder/extra/android 并将文件夹**兼容性**重命名为**support**。之后，重新启动 Eclipse。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-28T07:12:40.467

对我有用的解决方法： - 从 SDK 管理器中删除支持库 - 创建一个新项目并通过单击“安装/升级”安装支持库

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-06T08:13:13.087

事实上，我认为文本图标创建器存在错误。每次我尝试这样做时，即使按照其他帖子的建议进行了所有重新安装，它也无法正确创建项目。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-07T14:27:23.687

当我使用具有有限管理员权限的帐户登录时，我在一台机器上遇到了这个问题。我在 SDK Manager 选项菜单中设置了代理详细信息，并将其设置为强制使用 http 而不是 https。extras 文件夹是空的。

在日志中，我有一条消息说它无法下载“https://dl-ssl.google.com/android/repository/addons_list-2.xml”，因为找不到文件。然后我去了`tools->manage addon sites`，然后在`user defined sites`我添加了 URL“https://dl-ssl.google.com/android/repository/addon.xml”（与日志中提到的文件不同，但它似乎有效）。当我退出该对话框时，它更新了列表，并且 extras 文件夹现在填充了包括 Android 支持库在内的项目。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-16T09:07:46.830

从 Extras-Android 支持库中删除 Android 支持库..然后重新安装..稍后您将能够创建新项目

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-10-08T09:32:01.713

我有一些问题。因此，为了解决这个问题，我通过[http://dl-ssl.google.com/android/repository/tools_r22-windows.zip更改了文件夹工具（adt-bundle-windows-x86_64-20130911\sdk\tools）](http://dl-ssl.google.com/android/repository/tools_r22-windows.zip)

# android - 为 ListView 中的按钮创建侦听器

> ID：11492587
> 
> 赞同：0
> 
> 时间：2012-07-15T14:11:34.067
> 
> 标签：android, android-listview

复制别人的代码，我只懂一半，成功制作了一个listview，每个元素包含三个TextView和一个CheckBox。

代码涉及以下两个xml文件。第一个“customrowview.xml”：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="142dp"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
            <TextView android:id="@+id/text1"         

                android:layout_width="match_parent"         
                android:layout_height="fill_parent"/>
            <TextView android:id="@+id/text2"         

                android:layout_width="match_parent"         
                android:layout_height="fill_parent"/>
            <TextView android:id="@+id/text3" 

                android:layout_width="match_parent" 
                android:layout_height="wrap_content"/>

        </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="right" >

    <CheckBox
        android:id="@+id/checkbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />
        <Button
            android:id="@+id/editbut"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Edit" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

然后“customlistview.xml”：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<ListView android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000fff"
    android:layout_weight="2"
    android:drawSelectorOnTop="false">
    </ListView>
<TextView  android:id="@id/android:empty"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:background="#FFff00"
    android:text="No data"
    />
</LinearLayout> 
```

我可以通过以下方式访问列表：

```
listView = (ListView) findViewById(R.id.mylist); 
```

该代码还涉及：

```
 SimpleAdapter adapter = new SimpleAdapter(
            this,
            list,
            R.layout.custom_row_view,
            new String[] {"label","daysordate","time"},
            new int[] {R.id.text1,R.id.text3, R.id.text2}
            );
listView.setAdapter(adapter); 
```

现在我想做的是类似 listView.setlistenerforbuttonwithinlist() ！

但不知道该怎么做。我知道以前有关于 SO 的相关问题，但我无法理解答案:-(

**编辑：**在看到 azgolfers 的回答后......我制作了一个自定义适配器，如下所示：

```
public class myadapter extends SimpleAdapter
{
    LayoutInflater mLayoutInflater;

    public void myadapter(Context context) 
    {
        mLayoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View view = null;

        if (convertView != null)
        {
            view = convertView;
        } 
        else 
        {      
            view = mLayoutInflater.inflate(R.layout.custom_row_view, null);
        }

        Button buttonEdit = (Button) view.findViewById(R.id.editbut);

        buttonEdit.setOnClickListener(new OnClickListener()
        {   
            public void onClick(View arg0)
            {
                Log.i("xx","Button pressed!");
            }
        });

        return super.getView(position, convertView, parent);
    }

    public myadapter(Context context, List<? extends Map<String, ?>> data,int resource, String[] from, int[] to) 
    {
        super(context, data, resource, from, to);
        // TODO Auto-generated constructor stub
    }

} 
```

不幸的是，这在线路上崩溃了

```
view = mLayoutInflater.inflate(R.layout.custom_row_view, null); 
```

有一个空指针异常......不知道为什么:-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:42:29.227

首先，您需要扩展自己的适配器，可能来自 ArrayAdapter。ArrayAdapter 有一个名为 getView 的方法，您需要覆盖该方法并为特定位置的列表视图行提供 UI。例如

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView != null) {
            view = convertView;
        } else {
            view = mLayoutInflater.inflate(R.layout.custom_row_view, null);
        }
        Button buttonEdit = (Button) view.findViewById(R.id.editbut);
        buttonEdit.setOnClickListener(...);
    } 
```

在 getView() 中，由于您正在构建行的 UI，因此您有机会在这里设置按钮上的单击处理程序。

此外，您还需要将此添加到 Button 的 xml 标记中：

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

没有它，列表视图中的按钮在按下时不会触发 OnClick 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:21:45.593

尝试改变

```
 view = mLayoutInflater.inflate(R.layout.custom_row_view, null); 
```

到

```
 view = mLayoutInflater.inflate(R.layout.custom_row_view, parent, false); 
```

祝你好运！

# c# - RedirectToaction 和方法调用

> ID：11492596
> 
> 赞同：0
> 
> 时间：2012-07-15T14:12:14.113
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

这是我家控制器的默认索引功能

```
public ActionResult Index()
{
    if (User.Identity.IsAuthenticated)
    {
        return NewPosts();
    }
    else
    {
        ViewBag.Message = "Welcome!";
        return View();
    }
} 
```

这是同一个主控制器文件中的 newposts 函数

```
public ActionResult NewPosts()
{
    return View();
} 
```

我已登录我的帐户并关闭浏览器。然后我重新打开它访问同一个索引页面，我看到了我的身份（欢迎我的用户名），但没有调用 newposts 函数，因此它没有按预期显示 newposts 视图。

这是为什么 ？我怎样才能解决这个问题 ？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:08:50.533

问题不在于控制器，而在于浏览器的缓存。

如果您在第一页上按 Ctrl+F5，它应该将您识别为未经授权。

我知道这不是强制网站访问者按 Ctrl+F5 刷新浏览器的真正解决方案。互联网上有很多文章来解决这种缓存行为，为他们搜索。

关于您的代码的两个要点：

1-更改`return NewPosts();`为：

```
 RedirectToAction("NewPost"); 
```

2- 使用 [Authorize] 属性装饰 NewPosts 方法：

```
[Authorize]
public ActionResult NewPosts()
{
    return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:35:47.050

我认为让这个工作的更好方法是通过 web.config 将默认页面设置为网站的“NewPosts”。然后在您的 web.config 中，您可以将失败的登录页面设置为“索引”。这将导致用户在登录后被发送到“NewPosts”页面。如果他们关闭浏览器（并且他们的身份验证 cookie 没有过期），那么他们也会被发送到“NewPosts”页面。如果他们没有登录，那么他们将被踢到“索引”页面。您的 Index 操作方法中的 if 语句将不再需要，因为 Web 配置表单身份验证会以更健壮的方式为您处理此问题。以下是 Web 配置的示例：

```
<authentication mode="Forms"> 
      <forms loginUrl="~/Home/Index" timeout="2880" defaultUrl="~/Home/NewPosts" > 
      </forms> 
</authentication> 
```

有关表单身份验证的更多 web.config 信息，请参见[此处](http://msdn.microsoft.com/en-us/library/1d3t3c61.aspx)。

# ios - 架构 armv7 的未定义符号，同时集成了 nuance dragon mobile 的语音套件

> ID：11492600
> 
> 赞同：9
> 
> 时间：2012-07-15T14:12:32.417
> 
> 标签：ios, speech-recognition

我在运行时将我的应用程序与 naunce dragon mobile 的语音套件集成，但出现以下错误：

```
Undefined symbols for architecture armv7:
  "_kCFStreamPropertySSLPeerCertificates", referenced from:
      l469 in SpeechKit(libSpeechKit.a-armv7-master.o)
      l642 in SpeechKit(libSpeechKit.a-armv7-master.o)
      l643 in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_kCFStreamSSLValidatesCertificateChain", referenced from:
      l469 in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_kCFStreamSSLAllowsAnyRoot", referenced from:
      l469 in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_OBJC_CLASS_$_AVAudioPlayer", referenced from:
      objc-class-ref in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_kCFStreamSSLPeerName", referenced from:
      l469 in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_kCFStreamSSLAllowsExpiredRoots", referenced from:
      l469 in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_kCFStreamSSLAllowsExpiredCertificates", referenced from:
      l469 in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_SecCertificateCopySubjectSummary", referenced from:
      l642 in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_SecCertificateCopyData", referenced from:
      l643 in SpeechKit(libSpeechKit.a-armv7-master.o)
  "_kCFStreamPropertySSLSettings", referenced from:
      l469 in SpeechKit(libSpeechKit.a-armv7-master.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

请建议我解决这个错误

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-15T14:16:22.660

看来您还没有将`CFNetwork.Framework`,`SystemConfiguration.Framework`和添加`Security.Framework`到您的项目中。将它们添加到 Xcode 中的“要链接的库”部分，一切都应该没问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T17:26:28.987

这么晚才回复很抱歉。我自己解决了这个问题。

H2C03 很接近，但它实际上是您需要的 CFNetwork.Framework 和 Security.framework。

不幸的是，Dragon 文档中的 Speech Kit Basics 演练仅显示您需要 UIKit.framework、Foundation.framework、CoreGraphics.framework、AudioToolbox.framework、SystemConfiguration.framework 和 SpeechKit.framework。这有点误导。

如果您打开 DragonMobileRecognizer 示例项目，您可以将它使用的框架与您的框架进行比较，看看您缺少什么。

![DragonMobileRecognizer 示例项目框架](../Images/8580da2e57b6483f642e48198e7cf642.png)

# php - PHP循环每次都需要增加一个以上。满足条件时如何退出循环？

> ID：11492601
> 
> 赞同：1
> 
> 时间：2012-07-15T14:12:31.787
> 
> 标签：php

我想通过取一个条目并将其放在另一个下面来组合三个 php 数组，如下所示：

```
while ($i <= $no)
{
        $results[$i] = $blah[$i];
        $i++;
        $results[$i] = $thing[$i];
        $i++;
        $results[$i] = $something[$i];
        $i++;
} 
```

然而，这个问题是 $no 可以被超过，因为我需要在每个循环中增加 $i 三次。

最终结果：

```
array (size=12)
  1 => 
    array (size=4) (from $blah)
  2 => 
    array (size=4) (from $thing)
  3 => 
    array (size=4) (from $something)
  4 => 
    array (size=4) (from $blah) 
```

...这需要继续，直到满足 $no 的大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:16:02.660

简单的tought，你不能做这样的事情吗？？？

```
 while ($i <= $no)
        {
                $results[$i] = $blah[$i];
                $i++;
                if($i > $no){ break;}
                $results[$i] = $thing[$i];
                $i++;
                if($i > $no){ break;}
                $results[$i] = $something[$i];
                $i++;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:15:16.957

您正在寻找[`break`声明](http://php.net/manual/en/control-structures.break.php)。您可能还想[追加](http://php.net/manual/en/function.array-push.php)到结果数组，而不是指定特定的索引：

```
$results = array();
while ($i <= $no) {
    $results[$i] = $blah[$i];
    $i++;
    if ($i > $no) break;
    $results[] = $thing[$i]; // just append
    $i++;
    if ($i > $no) break;
    array_push($results, $something[$i]); // append with array_push
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-15T14:30:37.317

为什么不简化：

```
$results = array_push($blah, $thing, $something);
// appends the arrays together 
```

或者

```
$results = array_merge($blah, $thing, $something);
// merges arrays together 
```

# java - google-httpclient JSON 定义

> ID：11492604
> 
> 赞同：0
> 
> 时间：2012-07-15T14:13:05.873
> 
> 标签：java, android, json

当 JSON 是：

```
{
     "result":200,
     "data", "my data"
} 
```

类的定义可以是：

```
class HttpResult
{
    @Key
    public int result;

    @Key
     public String data;

} 
```

当 JSON 根是一个数组并且没有 Key 时：

```
[
    {
        "result:200",
        "data":"data1"
    },
    {
        "result":404,
        "data":"data2"
    }
] 
```

那么类的定义是什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:03:00.443

相同的类定义，它只是`Collection`其中一个而不是一个。

# c# - 在 webbrowser 网站上运行 Javascript 代码

> ID：11492605
> 
> 赞同：0
> 
> 时间：2012-07-15T14:13:06.123
> 
> 标签：c#, javascript, jquery, webbrowser-control

我所拥有的很简单，一个带有 webbrowser-controll 的表单。

该网络浏览器访问一个网站。这一切都有效。

但是当他在页面上时我不想做的是让他运行一些 javascript 代码（或 jQuery，如果可能的话）来获取`<b></b>`网站上标签之间的所有文本。

我该怎么做？

**编辑：** 感谢Birk，代码现在看起来像这样：

```
HtmlElementCollection bigFontTags = webBrowser1.Document.GetElementById("Frame_A").Document.GetElementsByTagName("b");
            string[] textPieces = new string[bigFontTags.Count];
            for (int i = 0; i < bigFontTags.Count; i++) {
                textPieces[i] = bigFontTags[i].InnerText;
            }
            //process text
            string bigText = String.Join(" ", textPieces);
            MessageBox.Show(bigText); 
```

但这不起作用。那是因为我需要获取的元素在框架和框架集的深处......这是布局（简单）：

```
<frameset rows="0,1000" border="0" frameborder="0">

    <frame src="/mail/Login?domain=telfort.nl&amp;style=default&amp;plain=0" name="SContentFrame" id="SContentFrame" scrolling="Auto" noresize="">
    <frameset rows="88,*" framespacing="0" frameborder="0" border="0" bordercolor="#FFFFFF">

        <frameset cols="182,*" framespacing="0" frameborder="0" border="0" bordercolor="#FFFFFF" onunload="ExitLogout()" onload="LoadFrames('/mail/Navigation?sid=1FBE4F29181F18D9358ABC082C7DEE1B6C67481B&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;style=default','/mail/MessageList?sid=1FBE4F29181F18D9358ABC082C7DEE1B6C67481B&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;chk=1&amp;style=default')">

        <frame src="/supp/blank.htm" name="Frame_A" id="Frame_A" frameborder="0" scrolling="Yes" marginwidth="0" marginheight="0" bordercolor="#FFFFFF" border="0">
        <form name="phoenix" method="post" action="" onsubmit="return clickedButton">
And then are here some tables and the content that i want to get..... 
```

那么我怎样才能从那里得到那个内容？？？（以一种很好的方式？？？）

**EDIT2：** 我将发布网站的生成源：（注意！我已经删除了所有不相关的内容......所以只有从开始到内容的方式）

```
<html><head>
<title>Telfort - Webmail</title>
<link rel="SHORTCUT ICON" href="http://www.telfort.nl/images/template/favicon.ico">
<link rel="stylesheet" href="/style/telfort/stylesheet.css" type="text/css" media="screen">
<!-- main.tpl 20001107 -->
<script type="text/javascript" src="/supp/phsec.js"></script>
<script type="text/javascript" src="/supp/client_sniffer.js"></script>

<script type="text/javascript" src="chrome-extension://bfbmjmiodbnnpllbbbfblcplfjjepjdn/js/injected.js"></script></head>
<frameset rows="0,1000" border="0" frameborder="0">
    <frame src="/mail/Login?domain=telfort.nl&amp;style=default&amp;plain=0" name="SContentFrame" id="SContentFrame" scrolling="Auto" noresize="">
        <html><head>
        <title>Telfort - Webmail</title>
        <link rel="SHORTCUT ICON" href="http://www.telfort.nl/images/template/favicon.ico">
        <link rel="stylesheet" href="/style/telfort/stylesheet.css" type="text/css" media="screen">
        <!-- main.tpl 20001107 -->
        <script type="text/javascript" src="/supp/phsec.js"></script>
        <script type="text/javascript" src="/supp/client_sniffer.js"></script>
        </head>
        <frameset rows="0,1000" border="0" frameborder="0">
            <frame src="/mail/Login?domain=telfort.nl&amp;style=default&amp;plain=0" name="SContentFrame" id="SContentFrame" scrolling="Auto" noresize="">
                <html><head>
                <title>Telfort - Webmail</title>
                <link rel="stylesheet" href="/style/telfort/stylesheet.css" type="text/css" media="screen">
                <!-- main_frame.tpl 20060510 -->
                <script src="/supp/phif.js" type="text/javascript"></script>
                <script type="text/javascript">
                <!--
                function LoadFrames(t1,t2) {
                  NavWin(frames["Frame_NAV"],t1);
                  NavWin(frames["Frame_A"],t2);
                }

                function ExitLogout() {
                  window.open(NavURL("/mail/Logout?sid=5D3995C305E2F91F575EDF1E2F11F5D75A7DF6D8&userid=marcmeesters%40telfort.nl&seq=+Q&auth=+A&style=default&popup=1"),"Logout","resizable=yes,scrollbars=yes,status=0,width=10,height=10");
                }
                //-->
                </script>
                </head>
                <frameset rows="88,*" framespacing="0" frameborder="0" border="0" bordercolor="#FFFFFF">
                    <frameset cols="182,*" framespacing="0" frameborder="0" border="0" bordercolor="#FFFFFF" onunload="ExitLogout()" onload="LoadFrames('/mail/Navigation?sid=5D3995C305E2F91F575EDF1E2F11F5D75A7DF6D8&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;style=default','/mail/MessageList?sid=5D3995C305E2F91F575EDF1E2F11F5D75A7DF6D8&amp;userid=marcmeesters%40telfort.nl&amp;seq=+Q&amp;auth=+A&amp;srcfolder=INBOX&amp;chk=1&amp;style=default')">
                        <frame src="/supp/blank.htm" name="Frame_A" id="Frame_A" frameborder="0" scrolling="Yes" marginwidth="0" marginheight="0" bordercolor="#FFFFFF" border="0">
                            <html><head>
                            <title>Berichtenlijst</title>
                            <!-- folders_msglist.tpl 20001106 -->

                            <link rel="stylesheet" href="/style/telfort/stylesheet.css" type="text/css" media="screen">
                            </head>
                            <body marginwidth="0" marginheight="0">
                            <form name="phoenix" method="post" action="" onsubmit="return clickedButton">

                            AND HERE THE CONTENT!!!!
                            </form>
                    </frameset>
                </frameset>
        </frameset>
</frameset>
</html> 
```

**编辑3：** 感谢Birk，问题解决了，这就是答案：

```
HtmlWindow SContentFrame = webBrowser1.Document.Window.Frames[1];
            HtmlWindow Frame_A = SContentFrame.Document.Window.Frames[2];
            HtmlElementCollection bigFontTags = Frame_A.Document.GetElementsByTagName("b");
            string[] textPieces = new string[bigFontTags.Count];
            for (int i = 0; i < bigFontTags.Count; i++) {
            textPieces[i] = bigFontTags[i].InnerText;
            }
            string bigText = String.Join(" ", textPieces);
            MessageBox.Show(bigText); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:58:49.380

创建一个 DocumentCompleted-event 并使用`((WebBrowser)sender).Document.GetElementsByTagName("b");`.

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            HtmlElementCollection bigFontTags = ((WebBrowser)sender).Document.GetElementsByTagName("b");
            string[] textPieces=new string[bigFontTags.Count];
            for (int i = 0; i < bigFontTags.Count; i++)
            {
                textPieces[i] = bigFontTags[i].InnerText;
            }
            //process text
            string bigText = String.Join(" ", textPieces);
            MessageBox.Show(bigText);
        } 
```

这不是 JavaScript，但结果完全相同。

编辑#2：对于所有可以使用的嵌套框架：

```
HtmlElementCollection bigFontTags = webBrowser1.Document.GetElementById("SContentFrame").Document.GetElementById("SContentFrame").Document.GetElementById("Frame_A").Document.GetElementsByTagName("b"); 
```

如果我正确理解您的框架集结构，那应该可以。

# css - 重新创建菜单现有菜单，在一项上添加下拉菜单

> ID：11492608
> 
> 赞同：0
> 
> 时间：2012-07-15T14:13:28.647
> 
> 标签：css, drop-down-menu

我有以下菜单：

```
<ul class="menu">
<li class="menu_item"><a href="mylink.php"><img src="menu/home.png"  class="menu_img"/></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/me.png" class="menu_img"/></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/listeners.png" class="menu_img"/></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/favorites.png" class="menu_img" /></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/notifications.png" class="menu_img" /></a> <span class="notification_badge_count"></span></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/settings.png" class="menu_img" /></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/signout.png" class="menu_img" /></a></li>
</ul> 
```

这是这个菜单的CSS：

```
.menu {
float:right;
}

.menu_item{
background: rgba(0, 0, 0, 0.0);
height:50px;
}

.menu li{
float:left;
height:25px;
padding:24px 10px 0 10px;
text-align: center;
font-size:12px; 
}

.menu_img {
opacity:0.5; 
filter:alpha(opacity=50); /* For IE8 and earlier */
} 
```

现在，我想为菜单中的一项添加下拉菜单，因此我重新创建菜单如下：

```
<ul class="menu">
<li class="menu_item"><a href="mylink.php"><img src="menu/home.png"  class="menu_img"/></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/me.png" class="menu_img"/></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/listeners.png" class="menu_img"/></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/favorites.png" class="menu_img" /></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/notifications.png" class="menu_img" /></a> <span class="notification_badge_count"></span></li>

<li class="menu_item"><a href="#"><img src="menu/arrow.png" class="menu_img" /></a>
<ul>
<li class="menu_item"><a href="mylink.php"><img src="menu/settings.png" class="menu_img" /></a></li>
<li class="menu_item"><a href="mylink.php"><img src="menu/signout.png" class="menu_img" /></a></li>
<ul/>
</li> 
```

我应该做哪些更改才能在箭头图标上添加下拉菜单？

我可以很容易地找到复制粘贴菜单，但是接下来会更难理解 css 下拉菜单是如何创建的......

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:39:47.543

这是你需要的吗？我已经删除了图像，因为我没有它们。相反，我只是放了一些文字。 [http://jsfiddle.net/9ZBJG/](http://jsfiddle.net/9ZBJG/)

html:

```
<ul class="menu">
    <li class="menu_item">
        <a href="mylink.php">
            HOME
        </a>
    </li>
    <li class="menu_item">
        <a href="mylink.php">
            ABOUT ME
        </a>
    </li>
    <li class="menu_item">
        <a href="mylink.php">
            LISTENERS
        </a>
    </li>
    <li class="menu_item">
        <a href="mylink.php">
            FAVORITES
        </a>
    </li>
    <li class="menu_item">
        <a href="mylink.php">
            NOTIFICATIONS
        </a>
        <span class="notification_badge_count">4</span>
    </li>
    <li class="menu_item">
        <a href="#">
            ARROW
        </a>
        <ul>
            <li class="menu_item">
                <a href="mylink.php">
                    SETTINGS
                </a>
            </li>
            <li class="menu_item">
                <a href="mylink.php">
                    SIGNOUT<img src="menu/signout.png" class="menu_img" />
                </a>
            </li>
        <ul/>
    </li>
</ul> 
```

CSS：

```
.menu {
float:right;
}

.menu_item{
background: rgba(0, 0, 0, 0.0);
}

.menu > li.menu_item{
float:left;
height:25px;
padding:24px 10px 0 10px;
text-align: center;
font-size:12px;
background-color:#f6f6f6;
position:relative;
}

.menu_item ul{
    display:none;
}

.menu_img {
opacity:0.5;
filter:alpha(opacity=50); /* For IE8 and earlier */
}

.menu_item ul{
    display:none;
}

.menu_item:hover ul{
    display:block;
    position:absolute;
    right:0px;
    top:100%;
}

.menu_item ul li{
    background-color:#f6f6f6;
    padding:5px;
} 
```

**说明** css 菜单的结构一般如下：

*   - 菜单项

    *   - 子菜单项
    *   - 子菜单项

如果你一直追到这里，太好了！现在我们所有的主菜单项都需要在一行中彼此相邻......这就是你使用 float:left; 的原因。这才是正确的方法。但是 .menu_item 也是给子菜单项的一个类。因此，我进行了一些调整，以便 float:left 仅由主菜单容器的直接子项使用。

现在，您的 SUB-MENU 是 a ，您必须将其置于其父级之下

*   为此，您定位父母*   作为**绝对**并定位它的孩子 - 作为相对并使用左侧和顶部值相应地定位。top:100% 意味着直接在主菜单项下。

    现在这个子菜单容器中的 menu_item 需要在另一个之下。为此，不要为这些 menu_items 提供浮动/位置/显示属性，并且代码可以正常工作。（我们之前已经这样做了）

    我在这里用背景和高度做了一点 CSS-play 来帮助你理解。随时提出更多问题。干杯!

# java - Java 矩形交集

> ID：11492620
> 
> 赞同：0
> 
> 时间：2012-07-15T14:15:21.187
> 
> 标签：java, intersection

java是否会计算矩形，其中一个在另一个内部作为相交，并在我调用intersection(Rectangle)时返回一个较小矩形的交集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:17:41.170

**返回**： 指定和 this`Rectangle`中包含的最大值`Rectangle``Rectangle`

据我了解你的情况，结果将`Rectangle`是包含在较大的较小的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:23:05.570

```
scala> import java.awt.Rectangle
import java.awt.Rectangle

scala> val big = new Rectangle(0, 0, 10, 10)
big: java.awt.Rectangle = java.awt.Rectangle[x=0,y=0,width=10,height=10]

scala> val small = new Rectangle(2, 2, 3, 3)
small: java.awt.Rectangle = java.awt.Rectangle[x=2,y=2,width=3,height=3]

scala> big.intersection(small)
res0: java.awt.Rectangle = java.awt.Rectangle[x=2,y=2,width=3,height=3]

scala> small.intersection(big)
res1: java.awt.Rectangle = java.awt.Rectangle[x=2,y=2,width=3,height=3] 
```

# android - Android - 如何在 ListView 中显示来自 URL 的图像？

> ID：11492622
> 
> 赞同：0
> 
> 时间：2012-07-15T14:15:33.280
> 
> 标签：android, android-listview, imageview, android-image

我已经搜索并尝试了很多不同的方法来在 ListView 中显示来自 URL 的图像，但我无法让我的代码正常工作。下面是我下载图像然后在 ListView 中显示它们的代码，但不知何故它不起作用。

```
private Drawable LoadImageFromWebOperations(String url)
    {
        try
        {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        }
        catch (Exception e) 
        {
             return null;
        }
    } 
```

这是我调用上述函数的代码

```
Drawable image = LoadImageFromWebOperations("http://10.0.0.5/images/logo.jpg"); 
```

在此之后，我将其放入 Map 中，然后将 Map 放入名为“productsList”的 ArrayList

```
map.put("avatar", image);
productsList.add(map); 
```

最后我用 SimpleAdapter 在 ListView 中显示 HashMap

```
ListAdapter adapter = new SimpleAdapter(
   Home.this, productsList, 
   R.layout.list_item, new String[] { TAG_PID,
   TAG_NAME, "url", "avatar"},
   new int[] { R.id.pid, R.id.name, R.id.url, R.id.avatar }); 
```

我的应用程序显示了除图像之外的所有内容。我在谷歌上搜索过这个问题，但没有得到任何帮助。任何帮助表示赞赏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:39:59.510

```
try

if (image != null) {

                Bitmap bitimage = null;
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inSampleSize = 1;
                try {

                                           //bitimage = BitmapFactory.decodeStream((InputStream) new URL(data.getThumbnail().toString().trim().toString()).getContent(), null, options);
                                            bitimage = BitmapFactory.decodeStream((InputStream) new URL(ed).getContent(), null, options);
                    image.setImageBitmap(bitimage);
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:03:01.927

**这绝对会帮助你，**

```
CustomAdapter adapter = new CustomAdapter(Home.this, productsList, R.layout.list_item,
new String[] { TAG_PID,TAG_NAME, "url", "avatar"},
 new int[] { R.id.pid, R.id.name, R.id.url, R.id.avatar }); 
```

创建一个扩展 SimpleAdapter 的 CustomAdapter 类，覆盖 getView() 方法，

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View v =  super.getView(position, convertView, parent);
    HashMap<String, Object> hm = (HashMap<String, Object>) super.getItem(position);
    ImageView image = (ImageView) v.findViewById(R.id.yourImageID);
    TextView txt1 = (TextView) v.findViewById(R.id.yourtxtID1);
    TextView txt2 = (TextView) v.findViewById(R.id.yourtxtID2);
    TextView txt3 = (TextView) v.findViewById(R.id.yourtxtID3);

    image.setImageDrawable((Drawable) hm.get("avatar"));
    txt1.setText(hm.get("TAG_PID").toString());
    txt2.setText(hm.get("TAG_NAME").toString());
    txt3.setText(hm.get("url").toString());

    return v;

} 
```

让我知道问题是否仍然存在..

# php - 如何使用 php exec() 运行另一个脚本并在后台运行，而不是等待脚本完成

> ID：11492623
> 
> 赞同：2
> 
> 时间：2012-07-15T14:15:38.337
> 
> 标签：php, magento

我想执行一个大型的数据库密集型脚本，但不需要等待该过程完成。我只想调用脚本，让它在后台运行，然后重定向到另一个页面。

编辑：我在 Windows 7 上的本地 Zend 社区服务器上工作。我可以访问项目所在的远程 linux 服务器，所以我可以在 linux 或 windows 上执行此操作。

我有这个

```
public function createInstanceAction()
{
    //calls a seperate php process which creates the instance
    exec('php -f /path/to/file/createInstance.php');

    Mage::getSingleton('adminhtml/session')->addSuccess(Mage::helper('adminhtml')->__('Instance creation process started. This may take up to a few minutes.'));
    $this->_redirect('instances/adminhtml_instances/');
    return;
} 
```

这完美地工作，但magento应用程序挂起该过程完成。它完成了我所期望的一切，不时记录到文件中，并且对它的运行方式感到满意。现在我想做的就是启动这个脚本，控制器动作不会挂起，而是重定向，就是这样。根据我对 exec() 的了解，您可以通过将我在上面调用 exec() 的方式更改为：

```
exec('php -f /path/to/file/createInstance.php > /dev/null 2>&1 &'); 
```

我从[这里拿的](https://stackoverflow.com/questions/3819398/php-exec-command-or-similar-to-not-wait-for-result)

如果我在 exec 调用中添加 "> /dev/null 2>&1 &" ，它不会按预期等待，但它不再执行脚本。有人能告诉我为什么吗，如果是这样，请告诉我如何让它工作？

这可能是与权限相关的问题吗？

谢谢

编辑：我假设如果我使用 (/dev/null 2>&1 &) 调用 exec 函数，将任何输出记录到文件中将是一个问题，因为这会取消它。那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:07:47.073

在花时间完全理解我自己的问题以及可以回答的方式之后，我准备了我的解决方案。

感谢大家的建议，感谢大家在提问时原谅我的随意，毫无准备。

上述问题的答案取决于许多因素，例如您所指的操作系统、您正在运行的 php 模块，甚至您正在运行的网络服务器。所以如果我不得不再次开始这个问题，我要做的第一件事就是说明我的设置是什么。

我想在两个环境中实现这一点：

1.) Windows 7 运行 Zend 服务器社区版。2.) Linux（我的操作系统是 Linux odysseus 2.6.32-5-xen-amd64 #1 SMP Fri Sep 9 22:23:19 UTC 2011 x86_64）

为了做到这一点，我希望它在部署到 Windows 或 linux 时以任何一种方式工作，所以我使用 php 来确定操作系统是什么。

```
public function createInstanceAction()
{

    //determines what operating system is Being used 
    if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN')
    {
        //This is a windows server

        //call a seperate php process to run independently from the broswer action

        pclose(popen("start php /path/to/script/script.php","r"));

    }
    else
    {
        //assuming its linux, but in fact it simply means its not windows
        // to check for linux specifically use (strtoupper(substr(PHP_OS, 0, 3)) === 'LIN')
        exec('php -f /path/to/file/script.php >/dev/null 2>&1 &');
    }
    //the browser will not hang around for this process to complete, and you can contimue with whatever actions you want.

    //myscript log any out put so i can capture info as it runs
} 
```

简而言之，一旦你理解了问题，就提出问题。有很多方法可以实现上述目标，这只是适用于我的开发和生产环境的一种解决方案。

感谢大家的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:34:12.307

[PHP 弹出](http://php.net/manual/en/function.popen.php)

从文档中（这应该可以帮助您做其他事情，而该进程正在运行；不确定关闭当前的 PHP 进程是否会杀死打开的进程）：

```
/* Add redirection so we can get stderr. */
$handle = popen('/path/to/executable 2>&1', 'r');
echo "'$handle'; " . gettype($handle) . "\n";
$read = fread($handle, 2096);
echo $read;
pclose($handle); 
```

**解决方案2：** 欺骗浏览器关闭连接（假设涉及浏览器）：

```
ob_start();
?><html><!--example html body--></html><?php
$strContents=ob_get_clean(); 

header("Connection: Close");
header("Content-encoding: none");//doesn't work without this, I don't know why:(

ignore_user_abort(true);

header("Content-type: text/html");
header("Content-Length: ".strlen($strContents));
echo $strContents;

flush();
//at this point a real browser would close the connection and finish rendering; 
//crappy http clients like some curl implementations (and not only) would wait for the server to close the connection, then finish rendering/serving results...:(

//TODO: add long running operations here, exec, or whatever you have. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:44:49.557

你可以写一个包装脚本，`createInstance.sh`比如

```
#! /bin/bash

trap "" SIGHUP
php -f "$1" > logfile.txt 2>&1 & 
```

然后从 PHP 中调用脚本：

```
exec('bash "/path/to/file/createInstance.sh"'); 
```

这应该最立即从脚本中分离新的 php 进程。如果这没有帮助，您可能会尝试使用 SIGABRT、SIGTERM 或 SIGINT 而不是 SIGHUP，我不知道确切发送了哪个信号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T15:21:45.380

我已经能够使用：

```
shell_exec("nohup $command  > /dev/null & echo $!") 
```

`$command`例如在哪里：

```
php script.php --parameter 1 
```

我注意到了一些奇怪的行为。例如，运行`mysql`命令行不起作用，似乎只有 php 脚本起作用。

此外，运行`cd /path/to/dir && php nohup $command ...`也不起作用，我必须`chdir()`在 PHP 脚本中运行命令才能使其工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T20:53:40.150

Zend Server 中包含的 PHP 可执行文件似乎是导致尝试在后台运行脚本（使用 exec 中的 & 运算符）失败的原因。

我们使用我们的标准 PHP 可执行文件对此进行了测试，它运行良好。这与 Zend Server 附带的版本有关，尽管我们有限地尝试弄清楚发生了什么并没有发现任何问题。

# .net - 在 .NET 中使用 YouTube API 搜索自定义参数

> ID：11492624
> 
> 赞同：1
> 
> 时间：2012-07-15T14:15:48.317
> 
> 标签：.net, youtube-api, youtube.net-api

一些查询，例如`OrderBy`，是`YouTubeQuery`类的一部分并且很容易设置。但是一般的 YouTube API 参考提到了我非常想用于我的应用程序的[HD](https://developers.google.com/youtube/2.0/reference#hdsp)和[持续时间参数。](https://developers.google.com/youtube/2.0/reference#durationsp)

由于我将[.NET 库用于 Google 数据 API，因此](http://code.google.com/p/google-gdata/)我更喜欢使用一些内置方法，而不是仅仅将查询字符串附加到 Uri 的末尾。也许使用`YouTubeQuery.ExtraParameters`或其他东西，但我找不到那会是什么。

如何[在 .NET 中设置 YouTube API 的额外参数](https://developers.google.com/youtube/2.0/reference#Custom_parameters)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:26:30.733

以下代码适用于 Java。我确信等效的 .Net 代码与此类似：

```
YouTubeQuery ytQuery = new YouTubeQuery(new URL(API_URL));

ytQuery.addCustomParameter(new Query.CustomParameter("hd", "true"));
ytQuery.addCustomParameter(new Query.CustomParameter("duration", "short")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T05:10:34.393

我遇到了同样的问题，我自己发现了。您可以使用以下代码设置持续时间的额外参数；

query.ExtraParameters = "&duration=medium";

# ruby-on-rails - 在 Capistrano 有条件地禁用资产预编译

> ID：11492625
> 
> 赞同：10
> 
> 时间：2012-07-15T14:15:51.887
> 
> 标签：ruby-on-rails, capistrano

我已经看到了在 Rails 中执行惰性资产预编译的各种复杂且通常无效的解决方案。作为后端开发人员，我并不特别希望每次部署程序时都重新编译我从未接触过的资产，但由于资产是`Capfile`通过加载的`load 'deploy/assets'`，而不是通过在 中定义任务`deploy.rb`，我想不出有条件地禁用它的方法.

我所追求的行为是`cap deploy`用于常规预编译部署，并用于`cap deploy:no_assets`跳过资产部署。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-15T03:45:47.917

turbo-sporocket-rails 和 that auto-skip 脚本都有一些陷阱（我稍后会提到）。所以我使用了下面的技巧，所以我可以传递一个参数来随意跳过资产预编译：

```
callback = callbacks[:after].find{|c| c.source == "deploy:assets:precompile" }
callbacks[:after].delete(callback)
after 'deploy:update_code', 'deploy:assets:precompile' unless fetch(:skip_assets, false) 
```

该脚本将更改内置的资产预编译钩子，因此它将根据**skip_assets**参数进行钩子。我可以调用`cap deploy -S skip_assets=true`以跳过整个资产预编译。

* * *

对我来说，turbo-sporocket-rails 在没有任何变化的情况下仍然需要几分钟来进行检查。当我需要尽快将修复推送到服务器时，这可能至关重要。因此我需要我的强制跳过方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T19:26:29.287

**rails4**使用新版本的 sprockets 解决了这个问题，只预编译已更改的资产。同时，对于您的**rails3**应用程序，我推荐[turbo-sprockets-rails3](https://github.com/ndbroadbent/turbo-sprockets-rails3) gem。

这个 gem 最初是由Nathan Broadbent 提供的一[组补丁](https://github.com/rails/sprockets-rails/pull/21)，由于问题已经在 rails4 中得到解决`sprockets-rails`，因此没有合并到这些补丁中。`master`从自述文件：

> *   加速 Rails 3 rake 资产：仅根据源文件的哈希重新编译更改的资产进行预编译
>     
>     
> *   仅编译一次即可生成指纹和非指纹资产

和：

> turbo-sprockets-rails3 应该可以与最新版本的 Capistrano 一起使用。

我可以确认它适用于使用 Capistrano 部署的 rails-3.2.x 应用程序。

*作为 GitHubbers 的旁注，原始[拉取请求](https://github.com/rails/sprockets-rails/pull/21)是一个很好的示例，说明如何将代码提交到开源项目，即使它没有被合并。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:41:10.210

这个要点看起来很有前途[https://gist.github.com/3072362](https://gist.github.com/3072362)

它会检查您从上次部署到现在的 git 日志，以查看是否有任何更改，`%w(app/assets lib/assets vendor/assets Gemfile.lock config/routes.rb)`如果有，则仅进行预编译。

# ios - 拉动刷新动画，如 iOS6 中的邮件

> ID：11492635
> 
> 赞同：7
> 
> 时间：2012-07-15T14:17:20.613
> 
> 标签：ios, core-animation, pull-to-refresh

我是一名 iOS 开发人员，最近我在测试中安装了最新的 iOS 6。当我遇到邮件拉动刷新动画时，我决定尝试自己实现它。我尝试将 CAShapeLayer 与 UIBezierPath 一起使用来创建相同的椭圆形，该椭圆形可以向下拖动。为了让下半部分向下拉伸，我尝试使用带有两个控制点的添加曲线并应用 CABasicAnimation。但不幸的是，结果并不像我预期的那样。由于拉伸的线条内部有点椭圆形。我想椭圆形动画必须与其他类有关。如果有人能在这里引导我提出一些想法，我将不胜感激。非常感谢

```
- (UIBezierPath *)createCircleForRect:(CGRect)bRect
{
    UIBezierPath *circle = [UIBezierPath bezierPath];

    CGFloat rectWidth = bRect.size.width;
    CGFloat rectHeight = bRect.size.height;

    minSize = MIN(rectWidth, rectHeight);

    //center = CGPointMake(minSize/2.0f, minSize/2.0f);

    CGFloat radius = minSize/2.0f - 5.0f;
    startPointOffset = center.x - radius;

    if(startPointOffset == 5.0f)
        testVal = 0;
    else 
        testVal += startPointOffset;

    NSLog(@"startPointOffset =>> %f", startPointOffset);
    NSLog(@"radius =>> %f", radius);

    NSLog(@"after center =>> %f, %f", center.x, center.y);

    [circle addArcWithCenter:center radius:radius startAngle:DEGREES_TO_RADIANS(0) endAngle:DEGREES_TO_RADIANS(180) clockwise:NO];

    [circle moveToPoint:CGPointMake(startPointOffset, center.y)];

    [circle addCurveToPoint:CGPointMake(center.x + radius, center.y) controlPoint1:CGPointMake(center.x - radius, rectHeight + 10.0f) controlPoint2:CGPointMake(center.x + radius, rectHeight + 10.0f)];

    [circle closePath];
    return circle;
}

-(void)startAnimation
{   
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"path"];

    animation.duration = 1.0;

    animation.repeatCount = HUGE_VALF;

    animation.autoreverses = YES;

    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

    animation.fromValue = (id)roundBPath;

    CGRect smallerRect = self.frame;

    smallerRect.size.height += 50;
    smallerRect.size.width -= 80;

    UIBezierPath *newRound = [self createCircleForRect:smallerRect];

    animation.toValue = (id)(newRound.CGPath);

    [shapeLayer addAnimation:animation forKey:@"animatePath"];
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-23T04:57:37.253

iOS 6 Mail 中的 pull-to-refresh 控件是任何应用程序都可用的标准 UIKit 控件：请参阅[`refreshControl`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewController/refreshControl)属性 on`UITableViewController`和[`UIRefreshControl`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIRefreshControl_class/Reference/Reference.html#//apple_ref/doc/c_ref/UIRefreshControl)类。（另请注意，您可以在 XCode 4.5 的 IB 中通过为表视图控制器选择“Refreshing -> Enabled”来设置一个。）

不过，如果您要部署到 iOS 5 或更早版本，[ODRefreshControl是一个不错的选择。](https://github.com/Sephiroth87/ODRefreshControl)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T02:29:02.320

给你....

[https://github.com/Sephiroth87/ODRefreshControl](https://github.com/Sephiroth87/ODRefreshControl)

# ios5 - Core Data - 无法在 iOS 5.1 上创建持久存储

> ID：11492640
> 
> 赞同：0
> 
> 时间：2012-07-15T14:17:48.067
> 
> 标签：ios5, core-data, persistence

当我想创建持久存储时出现错误。当我为 iOS 5.0 构建时，没有错误并且核心数据可以成功运行。

这是创建持久存储的代码：

```
+ (NSManagedObjectContext *)getContext {

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES],NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES],
                             NSInferMappingModelAutomaticallyOption, nil];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    NSURL *storeUrl = [NSURL fileURLWithPath:[basePath stringByAppendingFormat:@"Database.sqlite"]];
    NSPersistentStoreCoordinator *persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[NSManagedObjectModel mergedModelFromBundles:nil]];
    NSError *error = nil;

    if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
        NSLog(@"error loading persistent store..");
        [[NSFileManager defaultManager] removeItemAtPath:storeUrl.path error:nil];
        if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:options error:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            //abort();
        }
    }

    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] init];
    [context setPersistentStoreCoordinator:persistentStoreCoordinator];

    return context;

} 
```

错误日志：

```
error loading persistent store..
2012-07-15 13:16:31.440 Partyfinder[8213:707] Unresolved error Error Domain=NSCocoaErrorDomain Code=512 "The operation couldn‚Äôt be completed. (Cocoa error 512.)" UserInfo=0xde88ca0 {reason=Failed to create file; code = 1}, {
    reason = "Failed to create file; code = 1";
}
2012-07-15 13:16:31.455 Partyfinder[8213:707] error loading persistent store..
2012-07-15 13:16:31.458 Partyfinder[8213:707] Unresolved error Error Domain=NSCocoaErrorDomain Code=512 "The operation couldn‚Äôt be completed. (Cocoa error 512.)" UserInfo=0xdeb5360 {reason=Failed to create file; code = 1}, {
    reason = "Failed to create file; code = 1";
}
2012-07-15 13:16:31.467 Partyfinder[8213:707] error loading persistent store..
2012-07-15 13:16:31.470 Partyfinder[8213:707] Unresolved error Error Domain=NSCocoaErrorDomain Code=512 "The operation couldn‚Äôt be completed. (Cocoa error 512.)" UserInfo=0xdeb6680 {reason=Failed to create file; code = 1}, {
    reason = "Failed to create file; code = 1";
}
2012-07-15 13:16:31.483 Partyfinder[8213:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'This NSPersistentStoreCoordinator has no persistent stores.  It cannot perform a save operation.'
*** First throw call stack:
(0x358fa88f 0x37ca1259 0x36230fe7 0x36299287 0x593e5 0x45917 0x5bfc3 0x5c487 0x5bfc3 0x5bf6b 0x45285 0x5bfc3 0x5a883 0x5e26b 0x358ca433 0x3588f533 0x3588f77b 0x358cead3 0x358ce29f 0x358cd045 0x358504a5 0x3585036d 0x374ec439 0x3335ccd5 0x42119 0x420c4)
terminate called throwing an exception 
```

任何人都知道如何解决错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:27:53.797

我认为这个错误有两种可能的情况：

1）您在之前执行应用程序时错误地创建了该文件。如果您使用菜单重置模拟器，这将得到解决：iOS 模拟器 > 重置内容和设置，并从您的设备上卸载应用程序：长按 > 单击 x 符号。

2）在您的应用程序的其他地方有一些代码创建了这个文件。如果是这种情况，您应该找到此代码并将其删除。

或者

你可以通过这个链接

[iPhone 开发者的核心数据提示第 2 部分：更好的错误消息](http://www.freetimestudios.com/2009/11/13/core-data-tips-for-iphone-devs-part-2-better-error-messages/)

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T11:50:43.973

“解决方案”是 .sqlite 文件必须与项目名称同名！

# php - PDO “未捕获的异常 'PDOException' .. 在其他无缓冲查询处于活动状态时无法执行查询。考虑使用 PDOStatement::fetchAll()。”

> ID：11492644
> 
> 赞同：9
> 
> 时间：2012-07-15T14:18:06.367
> 
> 标签：php, mysql, exception, pdo

我知道这个问题已经被问过很多次了，但是我已经阅读了很多问题的答案，但仍然无法理解为什么我会收到这个错误：

> 致命错误：未捕获异常 'PDOException' 并带有消息 'SQLSTATE[HY000]：一般错误：2014 无法在其他无缓冲查询处于活动状态时执行查询。考虑使用 PDOStatement::fetchAll()。或者，如果您的代码只针对 mysql 运行，您可以通过设置 PDO::MYSQL_ATTR_USE_BUFFERED_QUERY 属性来启用查询缓冲。

奇怪的第一件事是，我的本地主机（wampserver）上没有错误，但我的网络服务器上确实出现了错误。我的本地主机上的 php 版本是 5.3.10，而在我的 Web 服务器上是 5.3.13。

我已经读过这个错误的来源是当数据从先前的查询留在缓冲区中时进行查询。这不是我的情况——我已经回显了所有数据，并且我知道查询中返回的每一行都被获取。

话虽如此，我发现将我的一个查询更改为`fetchAll`而不是`fetch`解决问题，但它根本没有，因为我**知道**所有返回的行都被读取。当我用于`fetchAll`查询时（它是在循环中进行的），我在每个循环中打印出数组，并且对于循环中的每个查询，数组中只有一个项目。

还有一条信息。引发 PDO 错误的不是我更改为的查询`fetchAll`（这会使错误消失），稍后在我的 php 文件中还有另一个查询会引发错误。我的文件基本上是这样的：

```
... code ...

query 1

... code ...

loop
query 2
end loop

... code ... 

query 3 
```

如果我注释掉查询 3，则没有错误。如果我注释掉或更改为`fetchAll`查询 2，则没有错误。查询 1 没有任何影响。

我还想补充一点，我已经尝试添加`LIMIT 1`到页面上的*所有*查询（同时），但错误仍然存​​在。我认为这证明缓冲区中没有未读数据，对吧？

我真的很困惑，所以我很感激你的建议。在有人问之前，我无法发布完整的代码，但这是我的代码的简化版本：

```
$stmt = $this->db->prepare('SELECT ... :par LIMIT 1');
makeQuery($stmt, array(':par' => $var));
$row = $stmt->fetch(PDO::FETCH_ASSOC);

$stmt = $this->db->prepare('SELECT ... :par LIMIT 1');

for loop
    makeQuery($stmt, array(':par' => $var));
    $row2 = $stmt->fetch(PDO::FETCH_ASSOC);
    ... [use row2] ...
end for loop

$stmt = $this->db->prepare('SELECT ... :par LIMIT 1');
makeQuery($stmt, array(':par' => $var));
$row3 = $stmt->fetch(PDO::FETCH_ASSOC); 
```

这里是`makeQuery()`。

```
/**************************************************************************************************************
* Function: makeQuery                                                                                         *
* Desc: Makes a PDO query.                                                                                    *
* Pre conditions: The statement/query and an array of named parameters (may be empty) must be passed.         *
* Post conditions: The PDO query is executed. Exceptions are caught, displayed, and page execution stopped.   *
**************************************************************************************************************/
function makeQuery($stmt, $array, $errMsg = '')
{
    try 
    {
        $stmt->execute($array);
    }
    catch (PDOException $e) 
    {
        print $errMsg != ''?$errMsg:"Error!: " . $e->getMessage() . "<br/>";
        die();
    }
} 
```

谢谢你的帮助！

编辑：我还尝试在查询 2 之后执行以下操作（因为这似乎是问题的根源：

```
$row2 = $stmt->fetch(PDO::FETCH_ASSOC); var_dump($row2); 
```

输出是：

```
bool(false) 
```

我是否偶然发现了 PDO 错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:48:47.547

您需要提取直到行提取尝试失败。我知道您可能在结果集中只有一行，并认为一次获取​​就足够了，但事实并非如此（当您使用无缓冲查询时）。PDO 不知道有多少行，直到它到达末尾，它试图获取下一行，但它失败了。

您可能还有其他语句没有完全“获取直到获取失败”。*是的，我看到您在其中一个*语句的提取失败之前进行了提取，但这并不意味着您对所有这些语句都进行了操作。

澄清 - 当您通过 execute() 执行查询时，您创建了一个必须从 db 获取到 php.ini 的结果集。PDO 一次只能处理这些“正在获取的结果集”中的一个（每个连接）。您需要完全获取结果集，一直到它的末尾，然后才能开始从对 execute() 的不同调用中获取不同的结果集。

当您“调用 fetch() 直到 fetch() 失败”时，当最终调用 fetch() 由于没有更多结果而失败时，PDO 会在内部记录您到达结果末尾的事实。然后 PDO 对完全获取结果感到满意，并且它可以清理为该结果集建立的 php 和 db 之间的任何内部资源，从而允许您进行/获取其他查询。

还有其他方法可以使 PDO “调用 fetch() 直到 fetch() 失败”。

1.  只需使用 fetchAll()，它只是获取所有行，因此它将到达结果集的末尾。
2.  或者只是调用 closeCursor()

*如果您查看 closeCursor() 的源代码，默认实现实际上只是获取行并丢弃它们，直到它到达末尾。它显然是用 c 编写的，但它或多或少是这样做的：

```
function closeCursor() {
    while ($row = $stmt->fetch()) {}
    $this->stmtFullyFetched = true;
} 
```

一些数据库驱动程序可能有一个更有效的实现，不需要它们获取很多没人关心的行，但这是 PDO 的默认方式。反正...

通常，当您使用缓冲查询时，您不会遇到这些问题。原因是由于使用缓冲查询，在您执行它们之后，PDO 会自动将 db 结果完全提取到 php 内存中，因此它会自动为您执行“调用 fetch() 直到 fetch() 失败”部分。当您稍后自己调用 fetch() 或 fetchAll() 时，它会从 php 内存中获取结果，而不是从数据库中获取结果。所以基本上，当使用缓冲查询时，结果集会立即完全获取，因此不可能同时有超过 1 个“正在获取的结果集”（因为 php 是单线程的，所以没有机会进行 2 个查询同时运行）。

鉴于这种：

```
$sql = "select * from test.a limit 1";
$stmt = $dbh->prepare($sql);
$stmt->execute(array()); 
```

完全获取结果集的方法（假设您只想要第一行）：

```
$row = $stmt->fetch();
$stmt->closeCursor(); 
```

或者

```
list($row) = $stmt->fetchAll(); //tricky 
```

或者

```
$row = $stmt->fetch();
while ($stmt->fetch()) {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-24T15:25:01.307

在为这个问题苦苦挣扎了几天之后，我终于发现这对我有用：

```
$db = new PDO ($cnstring, $user, $pwd);
$db->setAttribute (PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-09T15:08:17.683

如果您尝试获取非 SELECT 查询（例如 - UPDATE/INSERT/ALTER/CREATE），也会发生这种情况。确保仅对 SELECT 查询使用 fetch 或 fetchAll。

[可能重复的答案/问题](https://stackoverflow.com/a/65378546/1362713)

# android - 带有数字的 Android 可绘制资源

> ID：11492645
> 
> 赞同：0
> 
> 时间：2012-07-15T14:18:07.330
> 
> 标签：android, resources, numbers, drawable

我在我的 android 应用程序中实现了一个代码片段，在那里我打开了一个弹出窗口。这个弹出窗口需要一点可绘制并将其放在自身周围。此 png 资源名为***.9.png**。我可以根据自己的喜好重命名它，但是如果我删除**9**，则资源的输出会有所不同。使用数字正确显示png；否则它会在整个窗口上拉伸。这是什么意思？看到这个数字，框架是否做了一些特别的事情。此外，我注意到，当在代码或 XML 中使用此资源时，必须省略**.9** ...所以我认为它是用于框架的。有人可以详细解释一下吗？

代码来自 QuickAction3D 包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:19:59.783

是的，`*.9.png`命名表示[九个补丁图像](http://developer.android.com/tools/help/draw9patch.html)，这是一个带有注释以修改拉伸行为的图像。

# iphone - iPad模拟器上的应用程序崩溃

> ID：11492647
> 
> 赞同：0
> 
> 时间：2012-07-15T14:18:28.653
> 
> 标签：iphone, ipad, ios-simulator, uiwindow

应用程序在 iPhone 设备、iPhone 模拟器上运行良好，但在 iPad 模拟器上测试时它崩溃并且收到的消息是

`[UIWindowLayer convertPoint:fromView:]: unrecognized selector sent to instance.`

程序在线程 1 UIApplicationMain 上收到信号 EXC_BAD_ACCESS

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]autorelease];
self.containerViewController = [[[ContainerViewController alloc]init]autorelease];
self.window.rootViewController = self.containerViewController;
[window makeKeyAndVisible];
return YES;
  } 
```

应用程序委托中的 UIApplication 是否有问题，或者我更改了一些信息中的设置。

知道为什么它在 iPhone 设备、iPhone 模拟器上运行良好时只在 iPad 模拟器上崩溃。

任何线索如何解决这个问题。

感谢帮助。

# android - 当我想关闭套接字时如何处理应用程序终止？

> ID：11492648
> 
> 赞同：1
> 
> 时间：2012-07-15T14:18:44.873
> 
> 标签：android, sockets, application-lifecycle

假设我有三个活动 A、B 和 C。这些活动都使用套接字连接来接收数据。socket连接是Telnet连接，不能随意关闭重连。

如果当前返回栈是A > B > C，`Activity A`可能会被Android销毁，所以不能在`onDestroy()`方法中关闭socket，否则`Activity C`无法从socket接收数据。

我想在应用程序终止时关闭套接字。当我在根活动上按 BACK 时，我可以手动关闭它。但是，如果应用程序在后台被杀死，我该如何处理这种情况以关闭套接字并释放相关资源？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:33:43.220

实际上，我建议您只使用一个`Activity`/task 进行通信。所有其他人都应该使用`CommunicationManager`. 还要记住，`onDestroy`并不总是被调用。在您的开始/结束时使用`onPause`- 用于活动 - 以确保您以组织良好且安全的方式结束所有内容。

基本上我会创建一个异步后台任务来处理通信，这样你的 UI 就不会被阻塞。

# objective-c - 如何使 UIView 子类的框架在外部不可变

> ID：11492649
> 
> 赞同：0
> 
> 时间：2012-07-15T14:18:49.243
> 
> 标签：objective-c, ios, uiview

我想编写一个 UIView 的子类，其框架在外部是不可变的（例如 UIPickerView、UISwitch）。所以我尝试覆盖 layoutSubviews、sizeToFit 和 setFrame，但不起作用。
谁知道如何像 UIKit 的 UIPickerView 或 UISwitch 那样实现它，谢谢。

更新：

```
- (void)setFrame:(CGRect)frame        
{
    [super setFrame:frame];
    self.frame = CGRectMake(0, 0, 200, 200);
} 
```

我无法使用_frame设置视图的框架，所以当我写这些时，我会进入一个无限循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:28:06.060

覆盖[`-setBounds:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW1)以将您的视图限制在给定的范围内。

像这样的东西应该工作：

```
static CGFloat maxHeight = ...;
static CGFloat maxWidth  = ...;

- (void)setBounds:(CGRect)bounds {
   CGSize size = bounds.size; 
   size.width = MIN(maxWidth, size.width);
   size.height = MIN(maxHeight, size.height);

   bounds.size = size;
   [super setBounds:bounds];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T14:43:23.940

`self.frame = newFrame`本质上与调用相同`[self setFrame:newFrame]`，这就是它进入无限循环的原因。

但是，您可以这样做：

```
- (void)setFrame:(CGRect)frame        
{
    [super setFrame:CGRectMake(0, 0, 200, 200)];
} 
```

请注意，这会将锚点（左上角）设置为 (0,0)，这可能不是您想要的。改用`setBounds:`或将原点传递给超级：

```
- (void)setFrame:(CGRect)frame        
{
    [super setFrame:CGRectMake(frame.origin.x, frame.origin.y, 200, 200)];
} 
```

# playframework-2.0 - 如何使用 Play 2.0(java) 创建自定义 404 和 500 页面处理程序？

> ID：11492654
> 
> 赞同：1
> 
> 时间：2012-07-15T14:19:10.523
> 
> 标签：playframework-2.0

代码

```
public class Global extends GlobalSettings {      
    @Override
    public Result onHandlerNotFound(String s) {
        return notFound(views.html.error.render());
    }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:28:38.223

Play 没有将您的类加载为[Global object](http://www.playframework.org/documentation/2.0.2/JavaGlobal)。`error`将类重命名为`Global`并将其放入您的`app`文件夹中（在根目录下）。

或者，修改您的`application.conf`文件以更新 Global 对象的路径：

```
...
# Global object class
# ~~~~~
# Define the Global object class for this application.
# Default to Global in the root package.
global=your.package.to.error
... 
```

# python - 如何安装 python 的覆盖模块并在 Windows 的命令行中使用它

> ID：11492655
> 
> 赞同：2
> 
> 时间：2012-07-15T14:19:18.373
> 
> 标签：python, code-coverage, coverage.py, python-coverage

我想学习如何使用 python 的 coverage.py 模块来检查我的代码的覆盖模式。我尝试从各种来源阅读有关该工具的信息，最后使用“pip”实用程序将其安装在我的 Windows 7 机器上。安装后，覆盖模块安装在 C:\Python27\Lib\site-packages 中。

现在，我正在阅读有关如何从该页面使用它的说明：[作者的安装说明](http://nedbatchelder.com/code/coverage/install.html)。我按照本页给出的安装说明进行操作。但是，安装后，我不确定如何从命令行使用该工具？根据作者的说法，在 pip install 该工具之后，应该可以调用该命令

```
coverage --version 
```

并期望看到一些输出。但是，当我运行此命令时，我得到**command not found error**。根据我的说法，这是预期的行为，因为覆盖只是另一个 python 模块（即具有 .py 扩展名），而不是独立的可执行文件。所以，我不知道它如何以独立的方式运行。

请有人提供该工具安装的确切详细信息。我只需要安装帮助。我将从[nedbatchelder.com 的“Coverage command line usage”文章](http://nedbatchelder.com/code/coverage/cmd.html)中了解 CMD 的用法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T14:22:54.387

当你安装coverage时，你应该已经获得了可以直接执行的文件，安装到`c:\Python27\Scripts`. 确保您配置了 Windows 环境，以便该目录位于您的路径中。然后你就可以`coverage`作为命令使用了。

如果您在 Windows 上完成 Python 安装需要帮助，这里有一些[详细说明](https://openhatch.org/wiki/Boston_Python_Workshop_6/Friday/Windows_set_up_Python)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-15T21:13:55.967

您也可以`C:\Python27\python.exe -m coverage`用作命令

# python - 创建字典列表会生成同一字典的副本列表

> ID：11492656
> 
> 赞同：42
> 
> 时间：2012-07-15T14:19:26.620
> 
> 标签：python, list, dictionary

我想`iframe`从网页中获取所有内容。

**代码：**

```
site = "http://" + url
f = urllib2.urlopen(site)
web_content =  f.read()

soup = BeautifulSoup(web_content)
info = {}
content = []
for iframe in soup.find_all('iframe'):
    info['src'] = iframe.get('src')
    info['height'] = iframe.get('height')
    info['width'] = iframe.get('width')
    content.append(info)
    print(info)       

pprint(content) 
```

结果`print(info)`：

```
{'src': u'abc.com', 'width': u'0', 'height': u'0'}
{'src': u'xyz.com', 'width': u'0', 'height': u'0'}
{'src': u'http://www.detik.com', 'width': u'1000', 'height': u'600'} 
```

结果`pprint(content)`：

```
[{'height': u'600', 'src': u'http://www.detik.com', 'width': u'1000'},
{'height': u'600', 'src': u'http://www.detik.com', 'width': u'1000'},
{'height': u'600', 'src': u'http://www.detik.com', 'width': u'1000'}] 
```

为什么内容的价值不对？它应该与 I 时的值相同`print(info)`。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-15T14:25:04.783

您没有为每个 iframe 创建单独的字典，您只是一遍又一遍地修改同一个字典，并且不断在列表中添加对该字典的附加引用。

请记住，当您执行类似的操作时`content.append(info)`，您并没有制作数据的副本，您只是附加了对数据的引用。

您需要为每个 iframe 创建一个新字典。

```
for iframe in soup.find_all('iframe'):
    info = {}
    ... 
```

更好的是，您不需要先创建一个空字典。只需一次创建它：

```
for iframe in soup.find_all('iframe'):
    info = {
        "src": iframe.get('src'),
        "height": iframe.get('height'),
        "width": iframe.get('width'),
    }
    content.append(info) 
```

还有其他方法可以实现这一点，例如遍历属性列表，或者使用列表或字典推导，但很难提高上述代码的清晰度。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-07-15T14:37:49.123

您误解了 Python`list`对象。它类似于 C `pointer-array`。它实际上并没有“复制”您附加到它的对象。相反，它只是存储一个指向该对象的“指针”。

试试下面的代码：

```
>>> d={}
>>> dlist=[]
>>> for i in xrange(0,3):
    d['data']=i
    dlist.append(d)
    print(d)

{'data': 0}
{'data': 1}
{'data': 2}
>>> print(dlist)
[{'data': 2}, {'data': 2}, {'data': 2}] 
```

那么为什么`print(dlist)`不一样`print(d)`呢？

下面的代码告诉你原因：

```
>>> for i in dlist:
    print "the list item point to object:", id(i)

the list item point to object: 47472232
the list item point to object: 47472232
the list item point to object: 47472232 
```

所以你可以看到里面的所有项目`dlist`实际上都指向同一个`dict`对象。

这个问题的真正答案是附加目标项目的“副本”，使用`d.copy()`.

```
>>> dlist=[]
>>> for i in xrange(0,3):
    d['data']=i
    dlist.append(d.copy())
    print(d)

{'data': 0}
{'data': 1}
{'data': 2}
>>> print dlist
[{'data': 0}, {'data': 1}, {'data': 2}] 
```

试试这个`id()`技巧，你可以看到列表项实际上指向完全不同的对象。

```
>>> for i in dlist:
    print "the list item points to object:", id(i)

the list item points to object: 33861576
the list item points to object: 47472520
the list item points to object: 47458120 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-22T14:54:20.827

如果你想要一行：

```
list_of_dict = [{} for i in range(list_len)] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-15T14:23:59.197

`info`是指向字典的指针 - 您不断将相同的指针添加到列表中`contact`。

插入`info = {}`循环，它应该可以解决问题：

```
...
content = []
for iframe in soup.find_all('iframe'):
    info = {}
    info['src'] = iframe.get('src')
    info['height'] = iframe.get('height')
    info['width'] = iframe.get('width')
... 
```

# java - Android，Java，Eclipse：令牌“if”上的语法错误，（预计在此令牌之后

> ID：11492657
> 
> 赞同：-1
> 
> 时间：2012-07-15T14:19:32.057
> 
> 标签：java, android, syntax-error

为什么我会收到以下语法错误？

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    SharedPreferences pvtPref = getPreferences(MODE_PRIVATE);
    Boolean isFirstLaunch = pvtPref.getBoolean("isFirstLaunch", false);
    if (isFirstLaunch == true) {   // <<<< Syntax Error ?
    // Do Something
    }
} 
```

错误：

```
Multiple Markers at this line
-Syntax error on token "if", ( expected after this token
-Line breakpoint:LaunchEngine[line:30] - onCreate(Bundle) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:22:58.877

试试这样：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    SharedPreferences pvtPref = getPreferences(MODE_PRIVATE);
    boolean isFirstLaunch = pvtPref.getBoolean("isFirstLaunch", false);
    if (isFirstLaunch) {   // <<<< Syntax Error ?
    // Do Something
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:28:41.703

尝试这个...

1.  首先看到你已经将 isFirstLaunch 声明为布尔值，如果你有它应该可以工作。

2.  无需使用`isFirstLaunch == true`

    `if(isFirstLaunch)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T14:32:50.750

您得到的是布尔值而不是布尔值。所以你应该使用：

```
Boolean isFirstLaunch = pvtPref.getBoolean("isFirstLaunch", false);
if (isFirstLaunch.booleanValue()) {   
} 
```

或者 ：

```
boolean isFirstLaunch = pvtPref.getBoolean("isFirstLaunch", false);
if (isFirstLaunch) {   
} 
```

并尝试单击左侧的错误图标，然后选择“清除所有棉绒标记”（如果有）。

# jquery - 两个未命名/未行列的奇怪 jquery 错误

> ID：11492659
> 
> 赞同：0
> 
> 时间：2012-07-15T14:19:40.800
> 
> 标签：jquery, backbone.js

我收到两个连续的奇怪的 jquery 错误，没有名称，没有行引用，也没有对 jquery 之外的任何内容的引用。我也无法在 jquery 代码中找到第一个错误的神秘“J”函数。

两个错误都是循环

```
$.widget.destroy -> a.Widget._createWidget 
```

和

```
f.fn.extend.triggerHandler -> f.fn.extend.remove 
```

...在错误之前跟随其他几行。我直接从谷歌的控制台复制了它们，除了我已经切断了下面每个循环的大约 10 次遍历。

与 Backbone.js、underscore.js 和一些 jquery 插件一起使用，例如 jquery-ui、jquery.chosen、jquery.spinner 等。

有没有人见过这样的事情？任何建议都非常感谢！！！

```
<error>
J
c.Event
c.Event
c.event.fix
c.event.handle
c.event.add.j.handle.o
f.fn.extend.remove
$.widget.destroy
a.Widget._createWidget
f.event.dispatch
f.event.add.h.handle.i
f.event.trigger
f.fn.extend.triggerHandler
a.cleanData
f.fn.extend.remove
$.widget.destroy
a.Widget._createWidget
f.event.dispatch
f.event.add.h.handle.i
f.event.trigger
f.fn.extend.triggerHandler
a.cleanData
f.fn.extend.remove
$.widget.destroy

<error>
c.event.add.j.handle.o
f.fn.extend.remove
$.widget.destroy
a.Widget._createWidget
f.event.dispatch
f.event.add.h.handle.i
f.event.trigger
f.fn.extend.triggerHandler
a.cleanData
f.fn.extend.remove
$.widget.destroy
a.Widget._createWidget
f.event.dispatch
f.event.add.h.handle.i
f.event.trigger
f.fn.extend.triggerHandler 
```

# node.js - 从 Redis 中检索 Socket.io 客户端

> ID：11492661
> 
> 赞同：0
> 
> 时间：2012-07-15T14:19:57.833
> 
> 标签：node.js, redis, socket.io, scale

我正在构建一个实时数据系统，它允许 Apache/PHP 服务器将数据发送到我的 Node.js 服务器，然后它会立即通过 socket.io 将该数据发送到关联的客户端。因此 Apache/PHP 服务器发出一个包含数据的请求，以及一个告诉 Node.js 将数据发送给哪个用户的用户令牌。

现在这工作正常 - 我有一个关联数组，将用户的 socket.io 连接与他们的用户令牌联系起来。问题是我需要开始将其扩展到多台服务器。自然，使用 socket.io 的默认配置，我无法在节点工作人员之间共享连接。

我想到的解决方案是使用 RedisStore 功能，让我的每个员工查看同一个 Redis 存储。我一直在做研究，并且有很多关于如何使用发布/订阅功能向大型群组（房间）广播消息的文档。这很好，但我需要能够向单个客户端发送消息，所以我需要一些方法来从 RedisStore 检索用户的 socket.io 连接。

我现在能想到的唯一方法是创建大量以用户令牌命名的“房间”，并且每个房间只有一个用户。然后我就可以发射到那个房间。但是，这似乎非常低效。

有没有更好的方法可以从 Redis 检索用户唯一的 socket.io 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-26T08:55:16.793

一旦与运行节点服务器的服务器建立套接字连接，它就会连接到该实例。

因此，您似乎需要为您的 php 服务器提供一种方法来了解客户端连接到哪个节点服务器。

在您的 redis 存储中，您可以将服务器的 id 存储为客户端 id 的值。然后 php 查找要使用的节点服务器并发出请求。

# android - GridLayout android.view.ViewGroup$LayoutParams 无法转换为 android.support.v7.widget.GridLayout$LayoutParams

> ID：11492665
> 
> 赞同：2
> 
> 时间：2012-07-15T14:20:15.433
> 
> 标签：android, grid-layout, android-2.3-gingerbread

我有 GridLayout 作为子视图，设置（空）GridLayout.LayoutParams

```
setLayoutParams(new GridLayout.LayoutParams()); 
```

我没有在其他任何地方设置 LayoutParams。但我得到了例外

```
E/AndroidRuntime( 1620): FATAL EXCEPTION: main
E/AndroidRuntime( 1620): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams cannot be cast to android.support.v7.widget.GridLayout$LayoutParams
E/AndroidRuntime( 1620):    at android.support.v7.widget.GridLayout.computeLayoutParamsHashCode(GridLayout.java:872)
E/AndroidRuntime( 1620):    at android.support.v7.widget.GridLayout.checkForLayoutParamsModification(GridLayout.java:879)
E/AndroidRuntime( 1620):    at android.support.v7.widget.GridLayout.onMeasure(GridLayout.java:927)
E/AndroidRuntime( 1620):    at android.view.View.measure(View.java:15172)
E/AndroidRuntime( 1620):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1249)
E/AndroidRuntime( 1620):    at android.view.View.measure(View.java:15172)
E/AndroidRuntime( 1620):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
E/AndroidRuntime( 1620):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
E/AndroidRuntime( 1620):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
E/AndroidRuntime( 1620):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
E/AndroidRuntime( 1620):    at android.view.View.measure(View.java:15172)
E/AndroidRuntime( 1620):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
E/AndroidRuntime( 1620):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
E/AndroidRuntime( 1620):    at android.view.View.measure(View.java:15172)
E/AndroidRuntime( 1620):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
E/AndroidRuntime( 1620):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
E/AndroidRuntime( 1620):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
E/AndroidRuntime( 1620):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
E/AndroidRuntime( 1620):    at android.view.View.measure(View.java:15172)
E/AndroidRuntime( 1620):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
E/AndroidRuntime( 1620):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
E/AndroidRuntime( 1620):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
E/AndroidRuntime( 1620):    at android.view.View.measure(View.java:15172)
E/AndroidRuntime( 1620):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
E/AndroidRuntime( 1620):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
E/AndroidRuntime( 1620):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
E/AndroidRuntime( 1620):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
E/AndroidRuntime( 1620):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
E/AndroidRuntime( 1620):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
E/AndroidRuntime( 1620):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
E/AndroidRuntime( 1620):    at android.view.Choreographer.doFrame(Choreographer.java:525)
E/AndroidRuntime( 1620):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
E/AndroidRuntime( 1620):    at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime( 1620):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime( 1620):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 1620):    at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime( 1620):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1620):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 1620):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime( 1620):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime( 1620):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  304):   Force finishing activity com.capsule.launcher/.LauncherActivity 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T17:02:12.033

您是否将 a 传递`GridLayout.LayoutParams`给`GridLayout`自身？我不相信这是对的。

当您调用 时`setLayoutParams`，您正在向父类提供有关如何布局特定子类的信息。您应该将 a 传递`<ParentClass>.LayoutParams`给 GridLayout，GridLayout 所在`ParentClass`的容器在哪里。

`GridLayout.LayoutParams`仅用于为a的*子*`GridLayout`级设置 layoutParams 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T18:03:29.210

您的应用使用哪个版本的 Android Api？看起来它使用 Api 14 或更高版本，并且您还使用 android 支持库。当您尝试`GridLayout.LayoutParams()`从 Api 14 传递到`GridLayout.setLayoutParams`支持库时，可能会出现上述错误。请检查您的进口。

# php - PHP 的 PDO SQLite 驱动程序返回重复的日期

> ID：11492670
> 
> 赞同：0
> 
> 时间：2012-07-15T14:22:18.087
> 
> 标签：php, sqlite

我在我的服务器上运行 PHP 5.4.4，用`./configure`. 我有带有 SQLite 3.7.7.1 驱动程序的 PDO。我创建了以下表格。

```
CREATE TABLE IF NOT EXISTS
login (
    id PRIMARY KEY ON CONFLICT REPLACE,
    given_name,
    family_name,
    gender
);
CREATE TABLE IF NOT EXISTS
address (
    id,
    street,
    city,
    state,
    zip,
    FOREIGN KEY(id) REFERENCES login(id) ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS
certification (
    id,
    certification,
    certification_expiration,
    FOREIGN KEY(id) REFERENCES login(id) ON DELETE CASCADE
); 
```

而这个观点。

```
CREATE VIEW "members" AS SELECT
    login.id, login.given_name, login.family_name, login.gender,
    address.street, address.city, address.state, address.zip,
    certification.certification, certification.certification_expiration
FROM
    login, address, certification
WHERE
    login.id = certification.id
    AND
    login.id = address.id 
```

我正在查询这样的视图：

```
<?php   foreach ($sql->query('SELECT * FROM members;') as $row):    ?>
                    <tr>
<?php       foreach ($row as $index => $col): ?>
                        <td><?=$index;?>.<?=$col;?></td>
<?php       endforeach; ?>
                    </tr>
<?php   endforeach; ?> 
```

它正在产生这样的输出。

```
 <tr>
                <td>id.123456789012345678901</td>
                <td>0.123456789012345678901</td>
                <td>given_name.Mark</td>
                <td>1.Mark</td>
                <td>family_name.Tomlin</td>
                <td>2.Tomlin</td>
                <td>gender.Male</td>
                <td>3.Male</td>
                <td>street.1 Some Lane</td>
                <td>4.1 Some Lane</td>
                <td>city.Anywhere</td>
                <td>5.Anywhere</td>
                <td>state.NY</td>
                <td>6.NY</td>
                <td>zip.12345</td>
                <td>7.12345</td>
                <td>certification.AEMT-P</td>
                <td>8.AEMT-P</td>
                <td>certification_expiration.2015-07-31</td>
                <td>9.2015-07-31</td>
            </tr> 
```

我想知道，为什么它给我`id.`and `0.`， and `given_name.`and `1.`，还有什么我可以从查询中过滤掉这种行为吗？我想得到只是`id.`或只是`0.`但不是两种类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:18:40.123

这修复了它

```
$sql->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC); 
```

帽子提示，[biziclop](https://stackoverflow.com/users/260007/biziclop)为助攻。

# opa - 如何实现认证？

> ID：11492674
> 
> 赞同：1
> 
> 时间：2012-07-15T14:22:44.097
> 
> 标签：opa

我对 Opa 比较陌生，但我已经关注它一段时间了。我真的很喜欢它的发展方向。

我无法理解的一件事是 Opa 中的身份验证。

1.  如何跟踪当前用户是否已登录/是否具有特定权限？
2.  是否有用于电子邮件等常见内容的内置验证器？...总体而言，使用 Opa 构建身份验证的推荐方法是什么？

我想我的底线问题是：我将如何构建像[http://jetleague.com/](http://jetleague.com/)这样的身份验证？

谢谢，

——亚瑟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:08:45.707

我没有你*所有*问题的答案，但我想我可以提供一些帮助。

1.  我知道用于登录/身份验证的内置模块是`stdlib.components.login/CLogin`. 我在这里问过：http: [//forum.opalang.org/2_294](http://forum.opalang.org/2_294)，了解如何使用它的详细信息。阅读源代码很有帮助（但对我来说还不够！）：[https ://github.com/MLstate/opalang/blob/v2988/lib/stdlib/components/login/login.opa#L104](https://github.com/MLstate/opalang/blob/v2988/lib/stdlib/components/login/login.opa#L104)

2.  对于电子邮件地址，我使用了该`stdlib.web.mail/Email`模块。您可以使用以下`of_string`函数将字符串转换为电子邮件地址：

    ```
    import stdlib.web.mail;
    email = Email.of_string("drwho@example.com") 
    ```

但是，如果您的字符串无法解析为电子邮件地址，它会崩溃，这有点令人沮丧。您可能想使用更安全`of_string_opt`的返回`option(Email.email)`而不是`Email.email`.

一旦我弄清楚如何使用该`CLogin`模块，我将尝试更新这个问题！

# android - Android - ClassCastException - 在从 LinearLayout 到 AbsListView 的 LayoutParams

> ID：11492678
> 
> 赞同：17
> 
> 时间：2012-07-15T14:23:03.270
> 
> 标签：android, android-listview

我有一个列表适配器，如果我不使用通货膨胀（通过应用程序上下文直接识别 textview），我正在尝试为（item.xml）设置自定义 xml，它可以完美运行.. 但是我的列表视图不能主题..

```
public View getView(int position, View convertView, ViewGroup parent) {
        //System.gc();
        TextView tv;

        LayoutInflater inflater = getLayoutInflater();

        View row = View.inflate(mContext,R.layout.item,null); //.inflate(R.layout.item, parent, false); doesnt work either..
        String id = null;
        if (convertView == null) {
            tv =  (TextView) row.findViewById(R.id.TextView01);;
        } else
            tv = (TextView) convertView; 
```

[..]

在`logcat`我得到这个..

```
 07-15 19:45:51.710: ERROR/AndroidRuntime(20185): FATAL EXCEPTION: main
        java.lang.ClassCastException: android.widget.LinearLayout$LayoutParams cannot be cast to android.widget.AbsListView$LayoutParams
        at android.widget.ListView.setupChild(ListView.java:1827)
        at android.widget.ListView.makeAndAddView(ListView.java:1794)
        at android.widget.ListView.fillDown(ListView.java:688) 
```

我的 item.xml 文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_height="wrap_content"
          android:gravity="left|center"
          android:layout_width="fill_parent"
          android:paddingBottom="15px"
          android:background="#fff200"
          android:paddingTop="15px"
          android:paddingLeft="15px">

<TextView android:id="@+id/TextView01"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:textSize="40px"
          android:textStyle="bold"
          android:layout_marginLeft="20px"
          android:textColor="#0099CC">
</TextView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-15T16:20:39.023

问题是由于将您从适配器返回的控件包装在线性布局中引起的。从布局文件中丢失 LinearLayout（只需将 TextView 作为根），我认为它应该可以工作。

稍微扩展一下：您正在创建控件，然后将其添加到 LinearLayout 中。此时为其分配了一个 LinearLayout$LayoutParams 对象并将其设置为它的布局参数。然后，您将其从线性布局中拉出并放入您的列表视图中，该列表视图不理解 LinearLayout$LayoutParams。

或者，从 getView 返回 row 而不是（正如我假设你现在正在做的那样，因为你已经从引用的代码中删除了返回行）返回 tv.

（另一个不相关的提示：您正在膨胀布局，然后在 convertView != null 时将其丢弃；这将导致慢速设备上的滚动性能不佳。只有在您真正需要时才执行膨胀。）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-09T11:58:17.233

您可能正在退回电视而不是行

```
public View getView(int position, View convertView, ViewGroup parent) {
    TextView tv;

    LayoutInflater inflater = getLayoutInflater();
    View row = View.inflate(mContext,R.layout.item,null);
    String id = null;
    if (convertView == null) {
        tv =  (TextView) row.findViewById(R.id.TextView01);;
    } else
        tv = (TextView) convertView;
    }
 return row;  // returning tv brings to ClassCast! 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-15T14:38:24.647

您是否尝试使用布局充气器来充气静态 xml 布局？像这样：

```
LayoutInflater li = LayoutInflater.from(context);
View rootView = li.inflate(R.layout.item, null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T14:34:12.957

为您的代码使用 ArrayAdapter 的 getView 的正确方法是：

```
public View getView(int position, View convertView, ViewGroup parent) {
    //System.gc(); // Should not manually call gc
    View row;
    LayoutInflater inflater = getLayoutInflater();
    if (convertView == null) {
        row = inflater.inflate(R.layout.item, parent, false);
    } else
        row = convertView;

    TextView tv = (TextView) row.findViewById(R.id.TextView01); 
```

此外，如果可能，请勿在代码中手动进行垃圾收集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-21T07:13:43.610

**我有同样的问题，我使用了这些代码：**

```
public View getView(final int position, View convertView, ViewGroup parent) {
    convertView = G.layoutInflater.inflate(R.layout.list_lay_cities_markets, null);

    // your work 

    notifyDataSetChanged();
    return convertView;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-12-15T01:16:45.943

这是正确的：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    final ViewHolder holder;

    if(view==null){
        vi = inflater.inflate(R.layout.listview_row_myvideos,null);
        holder = new ViewHolder();
        holder.tv =  (TextView) vi.findViewById(R.id.TextView01);

        vi.setTag(holder);
    }else{
        holder = (ViewHolder)vi.getTag();
    }
    return vi;
}

public class ViewHolder{
    TextView tv;
} 
```

# ios - presentModalViewController 和 initWithRootViewController

> ID：11492680
> 
> 赞同：1
> 
> 时间：2012-07-15T14:23:06.430
> 
> 标签：ios, uiviewcontroller

我有一个名为**UserInfoViewController**的 UIViewController 类，当它出现时， parentViewController 使用如下代码：

```
 UserInfoViewController *rvc = [[UserInfoViewController alloc] initWithNibName:@"UserInfoViewController" bundle:nil];
    rvc.user = user;
    UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:rvc];
    nc.navigationBarHidden = YES;
    [self presentModalViewController:nc animated:YES];
    [rvc release];
    [nc release]; 
```

有时 UserInfoViewController 会推送或呈现另一个视图控制器，所以堆栈应该是这样的：

```
Root VC
     |
     A (push)
     |
     | - B (present)
           |
           |-- C (push)
                 |
                 |- D (push)
                     |
                     |- E (present) 
```

B, E 是**UserInfoViewController**的类。

问题是，当在视图控制器 E 上时，我想关闭所有视图控制器并返回**Root VC**，但我无法立即处理它们。

我尝试**了 popToRootViewControllerAnimated**、**dismissModalViewControllerAnimated**、**setViewControllers**，但它们都不起作用。

我还在**BE**中放置了一个通知侦听器，当需要返回 Root VC 时，只需发布​​该通知，然后在侦听器选择器中执行以下操作：

```
[self.navigationController popToRootViewControllerAnimated:NO];
[self.presentingViewController dismissModalViewControllerAnimated:NO]; 
```

然后**CD** 关闭，但 ** BE ** 仍然存在。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:10:19.207

我知道了。

只是不要考虑弹出或关闭它，让它去navigationController的dealloc动作。

因此，当您想从屏幕上删除所有视图控制器时，在应用程序委托中：

```
 self.window.rootViewController = nil; 
```

当你需要再次展示一些东西时：

```
navigationController = [[UINavigationController alloc] init];
navigationController.navigationBarHidden = YES;
self.window.rootViewController = navigationController;
[self.window makeKeyAndVisible]; 
```

而已。

# django - Django / Apache / mod_wsgi：没有名为 importlib 的模块

> ID：11492683
> 
> 赞同：10
> 
> 时间：2012-07-15T14:23:37.600
> 
> 标签：django, apache, deployment, mod-wsgi, virtualenv

在与 django 的 dev server 合作了两个月之后，终于到了迁移到 apache + mod_wsgi 的时候了。

问题是当我访问我的网站（我们称之为 junux）时，访问映射到 django 应用程序的 URL 时，事情似乎不起作用。在服务器上运行开发服务器时，一切正常。

在 apache error_log 中给出了错误的底线：

> ImportError：无法导入设置“junux_site.settings”（是否在 sys.path 上？）：没有名为 importlib 的模块

我知道这与有关此事的许多其他问题相似（有很多我什至不会在这里引用它们），但我仍然没有找到答案。我已经阅读了很多关于转向生产的指南，包括 django 的部署文档、mod_wsgi 的指南、一些 pycon 演示文稿，并且整天都在谷歌上搜索这个问题......

下面有很多有趣和令人兴奋的细节。

任何帮助将不胜感激。提前致谢。

* * *

配置：

*   CentOS 6 上带有 mod_wsgi 的 Apache 2.2.15
*   从源代码编译的 Python 2.7.3
*   该站点使用 virtualenv

这是apache返回的错误页面：

```
Internal Server Error
The server encountered an internal error or misconfiguration and was unable to complete your request.
Apache/2.2.15 (CentOS) Server at junux.net Port 80 
```

apache`error_log`显示以下信息：

```
mod_wsgi (pid=22502): Create interpreter 'junux.net|/dev'.
mod_wsgi (pid=22502): Exception occurred processing WSGI script '/var/www/junux_dev/junux_site/wsgi.py'.
Traceback (most recent call last):
  File "/var/www/junux_dev/venv/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 219, in __call__
    self.load_middleware()
  File "/var/www/junux_dev/venv/lib/python2.7/site-packages/django/core/handlers/base.py", line 39, in load_middleware
    for middleware_path in settings.MIDDLEWARE_CLASSES:
  File "/var/www/junux_dev/venv/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/var/www/junux_dev/venv/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/var/www/junux_dev/venv/lib/python2.7/site-packages/django/conf/__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'junux_site.settings' (Is it on sys.path?): No module named importlib 
```

相关`wsgi.py`：

```
import os
import sys
import site

# use our virtual environment
SITE_DIR = os.path.dirname(__file__)
PROJECT_ROOT = os.path.dirname(SITE_DIR)
site_packages = os.path.join(PROJECT_ROOT, 'venv/lib/python2.7/site-packages')
site.addsitedir(os.path.abspath(site_packages))
sys.path.insert(0, SITE_DIR)
sys.path.insert(1, PROJECT_ROOT)

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "junux_site.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

并且`httpd.conf`：（更多内容来自默认的 apache 配置文件）

```
<VirtualHost *:80>
        ServerName junux.net
        ServerAlias junux.net
        ServerAdmin admin@junux.net

        WSGIScriptAlias /test /var/www/test/hello.py
        WSGIScriptAlias /dev /var/www/junux_dev/junux_site/wsgi.py

        <Directory /var/www/test >
        Order allow,deny
        Allow from all
        </Directory>

        <Directory /var/www/junux_dev >
        Options FollowSymLinks
        Order allow,deny
        Allow from all
        </Directory>

</VirtualHost>

LogLevel info 
```

有`WSGIScriptAlias`必要`/test`提供一个健全性检查 mod_wsgi 确实有效。确实如此。打开该 URL 时，（非常简单的）应用程序可以工作（典型的 hello world）。

[按照此处](http://code.google.com/p/modwsgi/wiki/WhereToGetHelp#Conference_Presentations)引用的 pycon-sydney-2010 演示文稿中的说明，我已`chmod o+r`对我的 wsgi 文件和`chmod o+rx`整个目录设置了权限。`/var/www/junux_dev`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-15T16:08:42.323

mod_wsgi 是针对哪个版本的 Python 编译的？看起来您可能在系统上安装了多个 Python，并且您的虚拟环境使用的是 Python 2.7，但您的 mod_wsgi 是针对 2.6 编译的。

我的猜测是基于 importlib 仅在 Python 2.7 中添加的事实，因此如果为 2.6 编译 mod_wsgi 并使用该基本安装，那么将无法找到 importlib。

运行检查：

[http://code.google.com/p/modwsgi/wiki/CheckingYourInstallation#Python_Shared_Library](http://code.google.com/p/modwsgi/wiki/CheckingYourInstallation#Python_Shared_Library) [http://code.google.com/p/modwsgi/wiki/CheckingYourInstallation#Python_Installation_In_Use](http://code.google.com/p/modwsgi/wiki/CheckingYourInstallation#Python_Installation_In_Use)

# database - Freebase：什么数据转储文件包含“imdb_id”？

> ID：11492687
> 
> 赞同：11
> 
> 时间：2012-07-15T14:24:15.837
> 
> 标签：database, api, freebase, mql, imdb

我运行 IMDbAPI.com 并一直使用 Bing 的搜索 API 从标题搜索中查找 IMDb ID。Bing 目前正在将其 API 更改为 Azure 市场（8 月 1 日），并且不再免费提供。我开始使用 Freebase 测试我的 API 来解析这些 ID，并在前 8 小时内达到了 100k 的限制（我的网站目前每天收到大约 300 万个请求，但标题搜索只有 200-300k）

这正是他们提供数据转储文件的原因，

我下载了 Film 文件夹中的大部分文件，但找不到它们存储“/authority/imdb/title”imdb id 命名空间数据的位置。

[https://www.googleapis.com/freebase/v1/mqlread?query={"type":"/film/film","name":"True%20Grit","imdb_id":null,"initial_release_date>= ":"1969-01","limit":1}](https://www.googleapis.com/freebase/v1/mqlread?query=%7B%22type%22:%22/film/film%22,%22name%22:%22True%20Grit%22,%22imdb_id%22:null,%22initial_release_date%3E=%22:%221969-01%22,%22limit%22:1%7D)

这就是我当前访问 ID 的方式。

有谁知道哪个文件包含这些信息？以及如何从电影标题/ ID 链接回它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T15:02:31.277

That `imdb_id` property is backed by a key in the `/authority/imdb/title` namespace, so you're looking for the line:

```
/m/015gxt       /type/object/key        /authority/imdb/title   tt0065126 
```

in the file [http://download.freebase.com/datadumps/latest/freebase-datadump-quadruples.tsv.bz2](http://download.freebase.com/datadumps/latest/freebase-datadump-quadruples.tsv.bz2)

That's a 4 GB file, so be prepared to wait a little while for the download. Note that everything is keyed by MID, so you'll need to figure that out first if you don't have it in your database.

The equivalent query using MQL instead of the data dumps is [https://www.googleapis.com/freebase/v1/mqlread?query=%7B%22type%22%3a%22/film/film%22,%22name%22%3a%22True%20Grit%22,%22imdb_id%22%3anull,%22initial_release_date%3E=%22%3a%221969-01%22,%22mid%22:null,%22key%22:[{%22namespace%22:%22/authority/imdb/title%22}],%22limit%22:1%7D&indent=1](https://www.googleapis.com/freebase/v1/mqlread?query=%7B%22type%22:%22/film/film%22,%22name%22:%22True%20Grit%22,%22imdb_id%22:null,%22initial_release_date%3E=%22:%221969-01%22,%22mid%22:null,%22key%22:%5B%7B%22namespace%22:%22/authority/imdb/title%22%7D%5D,%22limit%22:1%7D&indent=1)

EDIT: p.s. I'm pretty sure the files in the Browse directory are going away, so I wouldn't depend on them even if you could find the info there.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T21:55:18.827

The previous answer works fine, it's just that a snappier version of such a query could be:

```
query = [{
          'type': '/film/film',
          'name': 'prometheus',
          'imdb_id': null,
          ...
        }]; 
```

The rest of the MQL request isn't mentionned as it doesn't differ from the aforementioned. Hope that helps.

# php - 尝试更改数据库中的密码时出错

> ID：11492688
> 
> 赞同：0
> 
> 时间：2012-07-15T14:24:31.707
> 
> 标签：php, sql, phpmyadmin, handler

我正在尝试创建一个需要更改数据库密码的功能。我的问题是我可能在 sql 代码中出错。

我收到此错误消息： mysqli 类的对象无法询问已转换为 C:\WAMP\www\Connection\DB_Connection.php 中的字符串，第 32 行

它说我的 db_connection 有问题，但更相信我在处理程序中做错了什么

处理程序：

```
 public function ChangePassword($password,$username){
    var_dump($password,$username);
    $DBConnection = new DBConnection();
    $DBConnection -> Connect();
    $sql= "UPDATE user SET password=? where m_username=?";
    $stmt = $DBConnection -> prepare($sql);
    $stmt -> bind_param("ss",$m_password, $m_username);
    if ($stmt === FALSE) {
        //echoBr("prepare of '$sql' failed " .  $DBConnection -> error);
        return false;
    }
    $stmt -> execute();
    // ger resultet.
    $result = $stmt -> get_result();
    $stmt -> close();
    return false; 
```

}

```
<?php
require_once ("settings.php");
require_once("Log.php");
class DBConnection {

private $m_mysqli = NULL;
public function Connect() {
    $log =  new Log(); 
    $password = "";
    $this -> m_mysqli = new mysqli(settings::DBhost, settings::DBroot,   

            settings::DBPassword, settings::DBdatabase);

    //utf 8
    $this -> m_mysqli -> set_charset("utf8");

    //kollar kopplingen till  databasen.
    if ($this -> m_mysqli -> connect_errno) {
        $log->LogMessage("Connect failed: $this->m_mysqli->connect_error");
        return false;
    } else {

        $log->LogMessage("har kontakt med databasen");

    }
    return true;
}

public function Prepare($sql) {
    $log =  new Log();
    $stmt = $this -> m_mysqli -> prepare($sql);
    if ($stmt === FALSE) {
        $log->LogMessage("Connect failed: $this->m_mysqli->connect_error");
        return false;
    }
    return $stmt;
}

public function Close() {
    $log =  new Log();
    $log->LogMessage("Close Connection");
    $this -> m_mysqli -> close();
}

public function error() {
    $log =  new Log();
    $wrong = "funktionen som heter error som ligger i db_c";
    $log->LogMessage("Close Connection");

    return $wrong;
} 
```

}

# java - 我需要鼠标监听器事件处理程序内外的数据

> ID：11492695
> 
> 赞同：1
> 
> 时间：2012-07-15T14:25:55.140
> 
> 标签：java, jframe, jlabel, mouselistener

如果这个问题的答案相当琐碎，请原谅我，因为我已经有一段时间没有编程了。我的应用程序的目标是从我在我的框架中显示的图像中获取 RGB 值，其中 (x,y) 坐标由鼠标侦听器给出，但是当我在我的事件处理程序中时，我只能访问x,y 值而不是我的 BufferedImage。帮助！我已经被困了好几个小时了！！

MouseHandler 类的代码：

```
 public void mouseClicked (MouseEvent e)
{
    int x = e.getX();
    int y = e.getY();
    System.out.printf("You clicked at: %d,%d\n", x, y);
} 
```

应用程序类的代码：

```
 public static void main(String args[]) 
{
    String file_name = args[0];

    BufferedImage image = readImage2(file_name);
    Frame frame = createFrame(file_name);

    //somehow get x,y from listener;
    //int RGB = image.getRGB(x,y);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:37:41.870

我建议您`BufferedImage`在创建课程时发送您的`MouseHandler`：

```
public class MouseHandler implents MouseListener {

  private BufferedImage image;

  public MouseHandler(BufferedImage image) {
    this.image = image;
  }
  public void mouseClicked (MouseEvent e) {
    int x = e.getX();
    int y = e.getY();
    System.out.printf("You clicked at: %d,%d\n", x, y);
    System.out.printf("Color is: %d", image.getRGB(x, y));
  }
  ...
} 
```

# c# - 如何使用 XmlDocument 创建 XML 文档？

> ID：11492705
> 
> 赞同：92
> 
> 时间：2012-07-15T14:27:56.367
> 
> 标签：c#, xml

如何创建这样的 XML 文档？

```
<body>
  <level1>
    <level2>text</level2>
    <level2>other text</level2>
  </level1>
</body> 
```

`XmlDocument`在 C# 中使用

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2012-07-15T14:59:22.273

关于什么：

```
#region Using Statements
using System;
using System.Xml;
#endregion 

class Program {
    static void Main( string[ ] args ) {
        XmlDocument doc = new XmlDocument( );

        //(1) the xml declaration is recommended, but not mandatory
        XmlDeclaration xmlDeclaration = doc.CreateXmlDeclaration( "1.0", "UTF-8", null );
        XmlElement root = doc.DocumentElement;
        doc.InsertBefore( xmlDeclaration, root );

        //(2) string.Empty makes cleaner code
        XmlElement element1 = doc.CreateElement( string.Empty, "body", string.Empty );
        doc.AppendChild( element1 );

        XmlElement element2 = doc.CreateElement( string.Empty, "level1", string.Empty );
        element1.AppendChild( element2 );

        XmlElement element3 = doc.CreateElement( string.Empty, "level2", string.Empty );
        XmlText text1 = doc.CreateTextNode( "text" );
        element3.AppendChild( text1 );
        element2.AppendChild( element3 );

        XmlElement element4 = doc.CreateElement( string.Empty, "level2", string.Empty );
        XmlText text2 = doc.CreateTextNode( "other text" );
        element4.AppendChild( text2 );
        element2.AppendChild( element4 );

        doc.Save( "D:\\document.xml" );
    }
} 
```

[(1)[有效的 XML 文件是否需要 xml 声明？](https://stackoverflow.com/a/7007781/1141063)]
[（2）[String.Empty和“”（空字符串）有什么区别？](https://stackoverflow.com/a/151481/1141063)]

* * *

结果是：

```
<?xml version="1.0" encoding="UTF-8"?>
<body>
  <level1>
    <level2>text</level2>
    <level2>other text</level2>
  </level1>
</body> 
```

但我建议您使用更简单、更易读的[**LINQ to XML ，如下所示：**](http://msdn.microsoft.com/en-us/library/bb387087.aspx)

```
#region Using Statements
using System;
using System.Xml.Linq;
#endregion 

class Program {
    static void Main( string[ ] args ) {
        XDocument doc = new XDocument( new XElement( "body", 
                                           new XElement( "level1", 
                                               new XElement( "level2", "text" ), 
                                               new XElement( "level2", "other text" ) ) ) );
        doc.Save( "D:\\document.xml" );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-26T11:18:18.803

在我的例子中，使用字典 ->level2 来自字典（以防万一有人发现它有用）尝试第一个示例时，我偶然发现了这个错误： *“这个文档已经有一个 'DocumentElement' 节点。”* 我受到了[这里的答案的启发](https://stackoverflow.com/questions/6262815/this-document-already-has-a-documentelement-node/6262889)

并编辑了我的代码： (xmlDoc. **DocumentElement** .AppendChild(body))

```
//a dictionary:
Dictionary<string, string> Level2Data 
{
    {"level2", "text"},
    {"level2", "other text"},
    {"same_level2", "more text"}
}
//xml Decalration:
XmlDocument xmlDoc = new XmlDocument();
XmlDeclaration xmlDeclaration = xmlDoc.CreateXmlDeclaration("1.0", "UTF-8", null);
XmlElement root = xmlDoc.DocumentElement;
xmlDoc.InsertBefore(xmlDeclaration, root);
// add body
XmlElement body = xmlDoc.CreateElement(string.Empty, "body", string.Empty);
xmlDoc.AppendChild(body);
XmlElement body = xmlDoc.CreateElement(string.Empty, "body", string.Empty);
xmlDoc.DocumentElement.AppendChild(body); //without DocumentElement ->ERR

foreach (KeyValuePair<string, string> entry in Level2Data)
{
    //write to xml: - it works version 1.
    XmlNode keyNode = xmlDoc.CreateElement(entry.Key); //open TAB
    keyNode.InnerText = entry.Value;
    body.AppendChild(keyNode); //close TAB

    //Write to xmml verdion 2: (uncomment the next 4 lines and comment the above 3 - version 1
    //XmlElement key = xmlDoc.CreateElement(string.Empty, entry.Key, string.Empty);
    //XmlText value = xmlDoc.CreateTextNode(entry.Value);
    //key.AppendChild(value);
    //body.AppendChild(key);
} 
```

两个版本（foreach 循环内的 1 和 2）都给出了输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<body>
    <level1>
        <level2>text</level2>
        <level2>ther text</level2>
         <same_level2>more text</same_level2>
    </level1>
</body> 
```

（注意：字典中的第三行“相同级别 2”也可以是级别 2，但我想说明字典的优势 - 在我的情况下，我需要具有不同名称的级别 2。

# linux - 请有人用初学者语言解释什么是LD_LIBRARY_PATH（unix）？

> ID：11492707
> 
> 赞同：4
> 
> 时间：2012-07-15T14:28:14.350
> 
> 标签：linux, ubuntu

我刚刚在 Ubuntu 上安装了 SPIKEfile(fuzzer)，它显示以下内容：

现在您需要设置 LD_LIBRARY_PATH 以包含 libdisasm.so 的路径和 libdlrpc.so 的路径

'printenv' 表明不存在这样的变量。

有人可以用初学者的方式向我解释这实际上意味着什么以及如何解决问题。我是一个非常缺乏经验的 Linux 用户。提前致谢。

PS我发现网上的大多数东西都没有帮助，我宁愿在不知道自己在做什么的情况下复制+粘贴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:31:22.407

Linux 有*共享库*的概念，即不被烘焙到可执行文件中的代码库，而是在程序执行时动态链接。可执行文件仅包含对所需库名称的引用。

`LD_LIBRARY_PATH`是一个环境变量，列出了 Linux 加载时链接器在定位这些库时应该使用的额外路径。它只是一个以冒号分隔的表单列表

```
/path/to/somewhere:/path/to/somewhere_else:/path/to/narnia 
```

假设您使用的是 Bash，您可以执行以下操作以将额外路径添加到列表中（即使`$LD_LIBRARY_PATH`最初为空或未设置也可以使用）：

```
export LD_LIBRARY_PATH=/path/to/dir/containing/libdisasm.so:$LD_LIBRARY_PATH 
```

（对于 libdlrpc.so 也是如此）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:27:18.823

我在 Solaris 下使用了 LD_LIBRARY_PATH，因为有时在启动脚本时似乎缺少一些库。在脚本开头设置此变量只是一种更安全的解决方法。

值得一提的东西（可能是您正在寻找的东西）：

```
ldd /path/to/narnia

export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/dir/containing/lib 
```

（这样做不会丢失以前设置的目录）

再次使用命令时是否应该工作：

```
ldd /path/to/narnia
    librt.so.1 => /lib/librt.so.1 (0x00002b4eca08e000)
    libc.so.6 => /lib/libc.so.6 (0x00002b4eca49f000)
    libpthread.so.0 => /lib/libpthread.so.0 (0x00002b4eca7df000)
    /lib64/ld-linux-x86-64.so.2 (0x00002b4ec9e72000)
    libmylib.so.1 => ~/myprogdir/lib/libmylib.so.1 (0x00002b4eca9fa000) 
```

如果仍然找不到库，这将引发错误，请确保在您的用户配置文件中添加设置：

```
# vi .bash_profile 
```

# facebook - 注册成就 ok，创建成就返回 false

> ID：11492709
> 
> 赞同：2
> 
> 时间：2012-07-15T14:28:32.010
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-apps, achievements

我刚刚开始为我的游戏实施 FB 成就。我正在为我的应用程序使用 PHP SDK。

我已经使用我的类中的以下代码成功注册了一个成就，该代码是 PHP SDK 类的子类：

```
$URL = 'apps.facebook.com/<app_name>/ach1.html';
$AppID = $this->getAppId();

$Params = array('achievement' => $URL);

$res = $this->api($AppID.'/achievements', 'POST', $Params); 
```

我可以确认这是通过 Graph API Explorer 创建的：

```
{
  "data": [
    {
      "url": "http://apps.facebook.com/<app_name>/ach1.html", 
      "type": "game.achievement", 
      "title": "Tutorial", 
      "image": [
        {
          "url": "<app_img_url>/1-ach.jpg"
        }
      ], 
      "description": "Tutorial Completed", 
      "site_name": "<app_name>", 
      "data": {
        "points": 1
      }, 
      "updated_time": "2012-07-13T16:05:44+0000", 
      "id": "<id>", 
      "application": {
        "id": "<app_id>", 
        "name": "<app_name>", 
        "url": "https://www.facebook.com/apps/application.php?id=<app_id>"
      }, 
      "context": {
        "display_order": 0
      }
    }
  ]
} 
```

但是，当我尝试为自己创建成就时，它返回 false：

```
$URL = 'apps.facebook.com/<app_name>/ach1.html';
$UserID = 100000466230867;

$AccessToken = $this->getApplicationAccessToken();

$Params = array('access_token' => $AccessToken,
                'method' => 'post',
                'achievement' => $URL);

$res = $this->api($UserID.'/achievements', 'POST', $Params); 
```

结果是“布尔错误”。不返回错误代码。我在这里做一些明显或根本错误的事情吗？我也尝试过提供值为 1 和 0 的“display_order”。

我可以确认我也授予了 publish_actions 权限。

```
permissions:Array ( [data] => Array ( [0] => Array ( [installed] => 1 [email] => 1 [publish_actions] => 1 [bookmarked] => 1 ) ) ) 
```

我的应用程序也正确配置为游戏。

非常感谢任何帮助！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:47:03.083

1.  如果应用程序处于沙盒模式，请将其取出。
2.  确保用户已授权且未删除该应用

“false”通常表示“您正在使用其访问令牌的人或页面看不到您要求的数据”，这种情况最常发生在被阻止的用户、沙盒模式下的应用程序、已删除的内容等。在这种情况下，我怀疑应用程序无法看到/与用户交互（如果这是通过应用程序设置界面或 API 创建的测试用户，这尤其可能是因为测试用户有一些奇怪的隐私怪癖）

# c - C如何工作？

> ID：11492714
> 
> 赞同：2
> 
> 时间：2012-07-15T14:29:35.370
> 
> 标签：c

> **可能重复：**
> [第一个编译器是如何编写的？](https://stackoverflow.com/questions/1653649/how-was-the-first-compiler-written)

我将其作为一个问题提出，因为基本上我要问的是在底部，所有这些是如何实现的，这里是：

第一个 C 编译器是如何生成的，既然 C 编译器是用 C 本身编写的，那么第一个 C 编译器的源代码是如何生成的？

C 是用 ASM 编写的，语言实际上是如何设计的？因为在我们拥有高级语言之前，设计某些东西的唯一方法是通过 ASM，即使 C 是从早期语言派生的，它们是如何设计的？（我的线索是 ASM）

我对 C 如何在底部工作感到困惑。我想说的是，在底层，一切都是由 OPcodes 在处理器上实现的。所以我的理解是 C 程序“基本上”被翻译成由内核实现的系统调用。

但是系统调用是如何实现的呢？（它们是直接对应于 OPcodes 还是有任何其他抽象层。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:32:19.533

> 第一个 C 编译器是如何生成的，既然 C 编译器是用 C 本身编写的，那么第一个 C 编译器的源代码是如何生成的？

[引导。](https://stackoverflow.com/questions/13537/bootstrapping-a-language)

# objective-c - 两个对象可以成为彼此的代表吗...？

> ID：11492716
> 
> 赞同：2
> 
> 时间：2012-07-15T14:29:49.660
> 
> 标签：objective-c, ios, design-patterns

可以将两个对象作为彼此的委托..吗？我的场景是我有一个以两种模式显示的视图..第一个：创建模式，第二个：编辑模式

在创建模式下，所有字段都是空的，我从用户填写的视图中获取数据，然后更新我的数据模型。

在视图模式下，我从我的数据模型中填充视图。

这是使用溢出的视图控制器完成的（因此我被迫使用委托）。我希望我能更好地解释这一点，但这是我能做的最好的。截至目前，我正在使用委托从 A 到 B 和从 B 到 A 的通知进行通信。

如果我以两种方式都使用委托，这会正常工作吗……或者是否有任何我无法预见的复杂性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T14:40:37.717

可能会出现一些问题，但如果您采取必要的预防措施，那就没问题了：

1.  确保两个代表都是弱引用的。这意味着`@property (weak)`在 ARC 或`@property (assign)`. 这将防止发生保留循环。

2.  确保您不会遇到委托方法调用另一个控制器的委托方法的情况，该方法在第一个控制器中调用相同的委托方法，依此类推。如果您不小心，您很容易陷入无限循环。

关于在这种情况下这是否是最佳设计模式的讨论或辩论并不是真正属于 SO 的事情。但是如果你小心的话，这样做是可能的，这就是你问题的答案。

# c# - FileSystemWatcher 是否创建自己的线程？

> ID：11492720
> 
> 赞同：17
> 
> 时间：2012-07-15T14:30:24.667
> 
> 标签：c#, .net, multithreading, filesystemwatcher

我希望这项工作在不同的线程中完成，但我必须创建一个线程还是它在不同的线程上完成所有工作？

喜欢：

```
Thread fileThread = new Thread(() =>
{
    FileWatcher = new FileSystemWatcher();

    FileWatcher.Created += OnFileEvent;
    FileWatcher.Deleted += OnFileEvent;
    FileWatcher.Renamed += OnRenameEvent;
    FileWatcher.EnableRaisingEvents = true;
});

fileThread.Start(); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-15T14:33:26.857

您不必创建线程。这些事件将在单独的线程上自动调用。

# android - Android EditText 以编程方式调整大小

> ID：11492725
> 
> 赞同：2
> 
> 时间：2012-07-15T14:30:53.317
> 
> 标签：android, resize, android-edittext

我有一个视图，其中有两个 LinearLayouts - 一个带有 Text、EditText 和一个 Button，另一个带有 Text 和 EditText。我试图让第二个 EditText （在第二行）的宽​​度与第一行的宽度相匹配。我尝试将其设为 TableLayout 而不是仅使用 LinearLayouts，现在我尝试以编程方式设置宽度。我得到第一个 EditText 的宽度并尝试设置第二个 EditText 的宽度，但它不会改变大小。

*** JAVA 调整大小尝试 ***

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
// TODO Auto-generated method stub
super.onWindowFocusChanged(hasFocus);

 getWidthBox = (EditText) findViewById(R.id.editText10);
 setWidthBox = (EditText) findViewById(R.id.EditText01);

 Toast.makeText(this, "Meaured Width: " + Integer.toString(getWidthBox.getMeasuredWidth()), Toast.LENGTH_SHORT).show();
 Toast.makeText(this, "Get Width: " + Integer.toString(getWidthBox.getWidth()), Toast.LENGTH_SHORT).show();

 //Neither of these setWidth Lines Work Correctly
 setWidthBox.getLayoutParams().width=getWidthBox.getWidth();
 setWidthBox.setWidth(getWidthBox.getWidth());
} 
```

*** XML 布局 ***

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.15"
        android:paddingLeft="5dp" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="110dp"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center_vertical"
            android:text="Points Allowed: "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15sp" />

        <EditText
            android:id="@+id/editText10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" >
        </EditText>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:src="@drawable/editpencil" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.15"
        android:paddingLeft="5dp" >

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="110dp"
            android:layout_height="wrap_content"
            android:text="Points Used: "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="15sp" />

        <EditText
            android:id="@+id/EditText01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="number" />
    </LinearLayout> 
```

*** 来自模拟器的屏幕截图 *** ![模拟器截图](../Images/3100fac7c8cf57158c64348c92e9097b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:27:40.993

我以一种对我来说最有意义的不同方式解决了它。我所做的是通过 getWidth 获取铅笔按钮的宽度，然后将 LinearLayout 的右侧填充（每行是它自己的 LinearLayout）设置为该按钮的宽度。这似乎工作得很好，并允许按钮改变大小（基于屏幕大小和 DP）和填充相应地做出反应。

```
imageButtonWidth = (ImageButton) findViewById(R.id.imageButtonEdit);
linearLayoutPointsUsed= (LinearLayout) findViewById(R.id.linearPointsUsed);

widthOfEditButton = imageButtonWidth.getWidth();

linearLayoutPointsUsed.setPadding(5, 0, widthOfEditButton, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:33:55.570

你可能想这样做

```
getWidthBox.getLayoutParams().width=getWidthBox.getWidth();
 setWidthBox.setWidth(getWidthBox.getWidth()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T15:02:06.620

我只会使用相对布局并将第二个 TextView 对齐到第一个

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/TV01"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_marginTop="8dp"
        android:text="Test Text1: "
        android:textSize="18dp" />

    <EditText
        android:id="@+id/ET01"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_toLeftOf="@+id/Btn"
        android:layout_toRightOf="@+id/TV01"
        android:text="test text" />

    <Button
        android:id="@+id/Btn"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_alignParentRight="true"
        android:text="myBtn" />

    <TextView
        android:id="@+id/TV02"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_below="@+id/TV01"
        android:layout_marginTop="8dp"
        android:text="Text2: "
        android:textSize="18dp" />

    <EditText
        android:id="@+id/ET02"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignLeft="@+id/ET01"
        android:layout_alignRight="@+id/ET01"
        android:layout_below="@+id/TV01"
        android:text="test text" />

</RelativeLayout> 
```

# java - 从键码重新创建键入的文本

> ID：11492726
> 
> 赞同：0
> 
> 时间：2012-07-15T14:30:57.303
> 
> 标签：java, parsing, keycode

我是一个 Java 程序，我有输入的 keyCodes 列表，需要计算输入的文本。

例如：

16-72-69-76-76-79-16-49 的意思是“你好！”。

我当然可以手动执行此操作，但是 Java 或库中是否有一些功能可以帮助解决这个问题？最好还指定键盘布局...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:36:39.590

据我所知，没有标准，正如您所暗示的，这取决于键盘布局。我相信您已经检查了这个 Java 库：

*   [http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html)

但就有助于从操作系统/设备/布局通用的库而言，我不知道是否存在。

# c - 为什么这段代码会导致编译错误“重新定义”？

> ID：11492731
> 
> 赞同：2
> 
> 时间：2012-07-15T14:31:28.253
> 
> 标签：c, function-pointers

此代码导致编译错误“错误：使用不同类型重新定义'p'”：

```
void fun() {
    printf("fun");
}
void (*p)();
p = &fun; 
```

但如果修改
`void (*p)(); p = &fun;`为
`void (*p)() = &fun`，一切正常。

`void (*p)(); p = &fun;`和有什么区别
`void (*p)() = &fun`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:36:46.983

您不能在全局范围内执行任意分配；尝试：

```
void fun() {
    printf("fun");
}

void (*p)();

int main(void) {
 p = &fun;
 return 0;
} 
```

`void (*p)() = &fun;`有效，因为您正在创建和初始化一个变量。在全局范围内允许初始化。`void (*p)(); p = &fun;`创建一个未初始化的变量，然后*为其赋值*。赋值与初始化不同，需要在某个函数内部执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T14:42:20.243

```
void (*p)();   // This is a declaration 
```

和

```
void (*p)() = &fun;  // This is also a declaration 
```

是声明。

```
p = &fun;  // This is a statement 
```

是一个声明。声明不是声明（声明也不是声明）。

您不能在文件范围内拥有语句。C 只允许在块范围内有语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T14:42:56.310

只有声明和函数定义在全局范围内有效；作业不是。

不同的是，这`int n = 1;`是一个带有初始化的声明，`n = 1;`而是一个赋值。前者在全局范围内有效，而后者则无效。函数指针也是如此。

通常，您应该始终更喜欢初始化而不是赋值，这可以解决您的问题：

```
void fun() { /* ... */ }

void (*p)() = &fun;  // declaration, definition and initialization of "p" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T15:06:29.397

前面的三个答案没有回答问题，并且当它们表明“p = &fun;”时是不正确的 是一个任务。

实际上，编译器试图解释“p = &fun;” 作为一个声明，所以“p”是一个声明符，“&fun”是一个初始化器，“p = &fun”形成一个初始化声明符（在 C 规范的形式语法中）。

将其解释为声明后，应在声明中的类型默认为 int（出于遗留原因），因此编译器本质上将其视为“int p = &fun;”，这是 p 的定义。因为 p 以前被定义为指向函数的指针，所以编译器会抱怨您正在用不同的类型重新定义 p。

对于语言语法学家：我无法弄清楚这怎么可能是形式语法中的声明。一个翻译单元将扩展为一个外部声明，一个外部声明将扩展为一个声明，一个声明将扩展为“declaration-specifiers init-declarator-list[opt];” （根据 C 标准中的 6.7）。声明说明符似乎至少需要存储类说明符、类型说明符、类型限定符或函数说明符中涉及的关键字之一。源代码中没有出现这样的关键字，因此这不能是声明。我怀疑编译器正在使用 1999 年标准之前的一些语法进行解析，所以这是遗留行为。尽管如此，错误消息清楚地表明编译器已经看到了两个定义，而不是一个定义后跟一个赋值。

# jquery - 如何用textarea替换xml中的特定标签

> ID：11492733
> 
> 赞同：1
> 
> 时间：2012-07-15T14:31:36.877
> 
> 标签：jquery, xml

我有一个xml，我有以下结构的标签<>

```
<?xml version="1.0" encoding="utf-8"?>
<learningBECContentbody>       
    <instructorNoteSay>Pranali When we read a text,
        <a>Pranali</a>
        together. Instead, we pause, or rest,
        <a>Manali</a>
    </instructorNoteSay>
    <instructorNoteSay>Harshila When we read a text,
        we <a>Riya</a>
        do notrun all our words together
        <a>sina</a>
    </instructorNoteSay>
    <instructorNoteSay>When we
        <a>check</a>
        read a text,
        <a>text</a>
    </instructorNoteSay>         
</learningBECContentbody> 
```

我想使用 jquery 用 textarea 替换标签 .. 有人可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:39:26.203

你可以使用`replaceWith()`方法，试试这个：

```
$('learningBECContentbody').find('a').each(function(){
   $(this).replaceWith('<textarea>'+ $(this).text() +'</textarea>')
}) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-15T14:41:07.577

如果您更喜欢 RegEx，您可以随时执行以下操作：

```
var xml = // store the XML in here, via an ajax call, or other
var rep = $(xml).replace(/<instructorNoteSay>(.*)</instructorNoteSay>/gi, "<textarea>$1</textarea>"); 
```

这将找到所有带有instructorNoteSay标签的元素，并将其中的文本放入textarea。

祝你好运！

# c++ - 我怎么知道我的数组在缓存中？

> ID：11492734
> 
> 赞同：3
> 
> 时间：2012-07-15T14:32:01.553
> 
> 标签：c++, c, arrays, caching

假设我的数组是 32KB，L1 是 64KB。Windows 是否在程序运行时使用其中的一些？也许我无法使用 L1，因为 Windows 正在使其他程序工作？我应该设置程序的优先级以使用所有缓存吗？

```
for(int i=0;i<8192;i++)
{
  array_3[i]+=clock()*(rand()%256);//clock() and rand in cache too?
  //how many times do I need to use a variable to make it stay in cache?
  //or cache is only for reading? look below plz
  temp_a+=array_x[i]*my_function();
} 
```

该程序使用 C/C++ 编写。

L2也一样。

功能是否也保存在缓存中？缓存是只读的？（如果我更改我的阵列，那么它会丢失缓存绑定？）

编译器是否创建 asm 代码以使用缓存更多产量？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-15T14:40:55.220

> 我怎么知道我的数组在缓存中？

一般来说，你不能。一般来说，缓存是由硬件直接管理的，而不是由 Windows 管理的。您也无法控制数据是否驻留在缓存中（尽管可以指定*不应*缓存内存区域）。

> Windows 在程序运行时会使用其中的一些吗？也许我无法使用 L1，因为 Windows 正在使其他程序工作？我应该设置程序的优先级以使用所有缓存吗？

L1 和 L2 缓存由给定内核上运行的所有进程共享。当您的进程运行时，它将使用所有缓存（如果需要）。当有上下文切换时，部分或全部缓存将被逐出，这取决于第二个进程需要什么。因此，下次有上下文切换回您的进程时，可能需要重新填充缓存。

但同样，这一切都是由硬件自动完成的。

> 函数也保存在缓存中？

在大多数现代处理器上，都有一个单独的指令缓存。参见[这个图表](http://en.wikipedia.org/wiki/File%3aIntel_Nehalem_arch.svg)，它显示了英特尔 Nehalem 架构的安排；注意共享的 L2 和 L3 高速缓存，但是用于指令和数据的单独的 L1 高速缓存。

> 缓存是只读的？（如果我更改我的数组，那么它会丢失缓存绑定？）

不可以。缓存可以处理修改过的数据，尽管这要复杂得多（因为[在多核系统中同步多个缓存的问题](http://en.wikipedia.org/wiki/Coherence_protocol)。）

> 编译器是否创建 asm 代码以使用缓存更多产量？

由于缓存活动通常全部由硬件自动处理，因此不需要特殊指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:43:57.463

*   缓存不是由操作系统直接控制的，它是在硬件中完成的

*   在上下文切换的情况下，另一个应用程序可能会修改缓存，但您不应该关心这一点。当您的程序表现出对缓存不​​友好的情况时，处理这种情况更为重要。

*   函数保存在缓存中（I-Cahce，指令缓存）

*   缓存不是只读的，当您编写某些内容时，它会进入[内存和]缓存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:43:58.587

据我所知，您无法控制缓存中的内容。您可以将变量声明为`register var_type a`，然后在单个周期（或少量周期）中访问它。此外，访问一块内存所需的周期数量还取决于虚拟内存转换和 TLB。应该注意的是 register 关键字只是一个建议，编译器可以完全自由地忽略它，正如评论所建议的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T14:45:48.133

缓存主要由硬件控制。但是，我知道 Windows 调度程序倾向于将线程的执行安排到与以前相同的核心，特别是因为缓存。它知道有必要将它们重新加载到另一个核心上。Windows 至少从 Windows 2000 开始就使用这种行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T15:19:15.090

正如其他人所说，您通常无法控制缓存中的内容。如果您正在编写高性能代码并且需要依赖缓存来获得性能，那么编写代码以使用大约一半的 L1 缓存空间的情况并不少见。这样做的方法涉及大量超出 StackOverflow 问题范围的讨论。从本质上讲，您希望在处理其他数据之前对某些数据做尽可能多的工作。

至于实际可行的方法，使用大约一半的缓存会留下足够的空间让其他事情发生，您的大部分数据将保留在缓存中。如果没有操作系统和计算平台其他方面的合作，你就不能依赖它，所以它可能是加速研究计算的有用技术，但它不能用于必须保证实时性能的地方，比如操作危险的机器.

除了您使用多少数据之外，还有其他注意事项。即使有大量未使用的缓存，使用映射到相同缓存行的数据也可以从缓存中逐出数据。矩阵转置因此而臭名昭著，因为行长度是 2 的适中幂的倍数的矩阵将具有其中元素映射到一小组缓存行的列。所以学习有效地使用缓存是一项重要的工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-15T15:49:14.427

即使您可能不知道哪些数据在缓存中，哪些不在缓存中，您仍然可能知道您正在使用多少缓存。现代处理器有很多性能计数器，其中一些与缓存有关。英特尔的处理器可能会告诉您有多少 L1 和 L2 未命中。检查此以获取有关如何执行此操作的更多详细信息：[How to read performance counters on i5, i7 CPUs](https://stackoverflow.com/questions/8091182/how-to-read-performance-counters-on-i5-i7-cpus)

# java - 从另一个 JFrame Gui 访问变量

> ID：11492735
> 
> 赞同：3
> 
> 时间：2012-07-15T14:32:02.753
> 
> 标签：java, swing, user-interface, methods, jframe

好的，伙计们，我已经按照你的说法对我的代码进行了一些更改。我有 3 节课：

第二类（也是第一个 GUI）：我有 4 个`JButton`- Simulare、CazParticular、Start 和 HandSelection，一些`JLabel`s 和 3 个`JTextField`；当我按下 HandSelection 按钮时，它会创建另一个具有不同内容的框架。

第三节课（和第二个 GUI）：我有 2`JButton`秒 - 确定和取消以及其他东西。当我按下 Ok 按钮时，我想`JTextField(QuesHandText)`从第一个 Gui 访问并使用方法`setText()`。我想不通，我想了 4-5 天，但仍然无法得到答案。请帮我！

![截屏](../Images/d90e45bfdd4b1aede870b978b3c60cf3.png)

我应该在 if 语句中编写什么代码才能修改`JTextField`第二类（第一个 GUI）中的文本？

## 一级：

```
import javax.swing.JFrame;
public class Main {

    public static void main(String[] args){

        //other stuff
        GuiMain gui = new GuiMain();

        gui.frame1.setLocation(150,150);
        gui.frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
        gui.frame1.setSize(400,250);
        gui.frame1.setResizable(false);
        gui.frame1.setVisible(true);

        //other stuff
    }
} 
```

## 二等：

```
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.WindowEvent;
import javax.swing.*;

public class GuiMain {

    public static GuiMain instance;
public static GuiMain getInstance(){
    if(GuiMain.instance == null){GuiMain.instance = new GuiMain();}
    return GuiMain.instance;
}
    public JFrame frame1 = new JFrame();

    public JTextField QuesHandText, FlopTurnRiverText, RezultatText; 
    public JButton Simulare, CazParticular, Start, HandSelection;
    public int w1,h1;
    public JLabel someText;
    static int u=0;
    public int j=0;

    public GuiMain(){

        frame1.setTitle("HoldemTool");
        frame1.setLayout(null);
        QuesHandText = new JTextField(4);

        Simulare = new JButton("Simulare");
        CazParticular = new JButton("Caz particular");
        Start = new JButton("Start");
        HandSelection = new JButton(new ImageIcon(getClass().getResource("GuiPic.png")));
        Handler handler1 = new Handler();

        CazParticular.addActionListener(handler1);
        Simulare.addActionListener(handler1);

        HandSelection.addActionListener(handler1);
        Start.addActionListener(handler1);

        QuesHandText.setEditable(false);
        FlopTurnRiverText.setEditable(false);
        RezultatText.setEditable(false);

        frame1.add(Welcome1);
        frame1.add(Welcome2);
        frame1.add(QuesHand);
        frame1.add(FlopTurnRiver);
        frame1.add(Rezultat);
        frame1.add(QuesHandText);
        frame1.add(FlopTurnRiverText);
        frame1.add(RezultatText);
        frame1.add(Simulare);
        frame1.add(CazParticular);
        frame1.add(Start);

    }

    public JTextField getQuesHandText(){
    return QuesHandText;
}
    public class Handler implements ActionListener{
        public void actionPerformed(ActionEvent e){

            if(e.getSource()==Simulare)
            {

            }
            if(e.getSource()==CazParticular){
                QuesHandText.setEditable(true);
                FlopTurnRiverText.setEditable(true);

                QuesHandText.setText("");
                FlopTurnRiverText.setText("");
                RezultatText.setText("");

                frame1.setSize(470, 250);
                Start.setBounds(3*FlopTurnRiverText.getX(), QuesHand.getY(), 65, h1);
                HandSelection.setBounds(3*FlopTurnRiverText.getX(), FlopTurnRiverText.getY(), 65, h1);

                frame1.add(HandSelection);
                frame1.add(Start);
            }
            if(e.getSource()==Start){
                QuesHandText.setText("Text");
            }
            if(e.getSource()==HandSelection){
                GuiSelection gui2 = new GuiSelection();  
                gui2.frame2.setVisible(true);
            }
        }

    }} 
```

## 三等

```
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.WindowEvent;
import javax.swing.*;

public class GuiSelection extends GuiMain {

    JFrame frame2 = new JFrame();
    GuiMain guiMain;
    public JButton Ok,Cancel;

    //other stuff

    public GuiSelection(){
        guiMain = new GuiMain();
        frame2.setTitle("Hand selection");
        frame2.setSize(1135,535);
        frame2.setLayout(null);
        frame2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame2.setVisible(true);
        frame2.setResizable(false);

        //other stuff

        Handler2 handler2 = new Handler2();

        Ok.addActionListener(handler2);
        Cancel.addActionListener(handler2);

        frame2.add(Ok); frame2.add(Cancel); 

    }

    public class Handler2 implements ActionListener{
        public void actionPerformed(ActionEvent e){
            if(e.getSource()==Cancel){
                frame2.hide();
            }
            if(e.getSource()==Ok)
            {
            GuiMain.getInstance().getQuesHandText().setText("From Ok");

                //When I prees this button "Ok" I want to get access to the JTextField(QuesHandText) in the         GuiMain class, and .setText();
                //somothing like QuesHandtText.setText("someText");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T16:18:25.823

也许您并不真的需要两个 Windows。您需要的是一个可以通过类实现的 Dialog [`JOptionPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)。

这是一个演示代码。

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class YourGui implements ActionListener {
    private JFrame frame;
    private JTextField text;
    private JButton takeInput;

    public YourGui() {
        frame = new JFrame();
        frame.setLayout(new GridLayout(2, 1));

        text = new JTextField();
        takeInput = new JButton("Take Input!");

        frame.add(text);
        frame.add(takeInput);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 100);

        takeInput.addActionListener(this);
    }

    public void show() {
        frame.setVisible(true);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        int selection =
            JOptionPane.showConfirmDialog(frame, "Select Hand", "Select",
                JOptionPane.OK_CANCEL_OPTION);

        if (selection == JOptionPane.OK_OPTION) {
            text.setText("You selected ok");
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                YourGui gui = new YourGui();
                gui.show();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T14:40:41.787

将方法和返回第一个 GUI 实例的`public JTextField getQuesHandText()`静态方法添加到您的第一个 GUI。`public static JFrame getInstance()`现在您可以`SecondClass.getInstance().getQuesHandText()`从任何地方调用来获取`JTextField`实例。`SecondClass`请注意，使用此方法，您在任何时候都只能有一个实例。

您的`getInstance()`方法如下所示：

```
public class SecondClass extends JFrame {

    private static SecondClass instance;

    public static SecondClass getInstance() {
        if(SecondClass.instance == null)
            SecondClass.instance = new SecondClass();

        return SecondClass.instance
    }

} 
```

请注意，您不应`SecondClass`手动创建 的实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T14:41:10.713

使用启动的实例`Class`来访问其`public`变量。因此，您应该执行以下操作：

```
GuiMain main=new GuiMain();
...
main.QuesHandtText.setText("someText"); 
```

或者，如果您`JTextField`是`private`（尽管不是）使用`public`有权更改其内容的实例方法 - 这是首选方法：

A类：

```
class A {
private JTextField tf;
public void setFieldText(String text) {
tf.setText(text);
}
} 
```

B类：

```
class B {
A a = new A();
a.setText("hello");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-15T14:42:37.167

使用**组合**，

**1.**创建包含 JFrame 的类的实例，您需要访问其 JTextField。

**2.**然后在该实例上调用 JTextField 的 setter 或 getter 方法。

**编辑：**

**确保**你已经**在 Main 类上实现了 Singleton 原则**，否则你会得到一个你不想要的新实例......在第二类。

公共类 GuiMain{

主要 m = new Main();

m.getText(); m.setText();

// 其他东西

}

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-15T14:57:21.330

在 GuiMain 的处理程序中，将自身（主 JFrame）作为参数传递给 GuiSelection 的构造函数：

```
GuiSelection gui2 = new GuiSelection(this); 
```

然后将 GuiSelection 的构造函数从

```
public GuiSelection(){
    guiMain = new GuiMain();
    ... 
```

至

```
public GuiSelection(GuiMain guiMain){
    this.guiMain = guiMain;
    ... 
```

此外，GuiSelection 是 GuiMain 的子类似乎很奇怪。可能这两个都应该是 JFrame 的直接子类。

此外，您应该将所有内容包装在 SwingUtilities.invokeLater 的 main 方法中，因为与 Swing 相关的所有内容都应该在事件调度线程上运行。

此外，您永远不应该使用公共成员变量：它非常非 Java。

# serialization - Kafka 对象的序列化

> ID：11492741
> 
> 赞同：6
> 
> 时间：2012-07-15T14:32:46.957
> 
> 标签：serialization, apache-kafka

我开始玩卡夫卡。我已经设置了一个 zookeeper 配置，并且我设法发送和使用 String 消息。现在我试图传递一个对象（在java中），但由于某种原因，在消费者中解析消息时，我遇到了标题问题。我尝试了几个序列化选项（使用解码器/编码器），并且所有的都返回相同的标头问题。

这是我的代码制作人：

```
 Properties props = new Properties();
        props.put("zk.connect", "localhost:2181");
        props.put("serializer.class", "com.inneractive.reporter.kafka.EventsDataSerializer");
        ProducerConfig config = new ProducerConfig(props);
        Producer<Long, EventDetails> producer = new Producer<Long, EventDetails>(config);
        ProducerData<Long, EventDetails> data = new ProducerData<Long, EventDetails>("test3", 1, Arrays.asList(new EventDetails());
        try {
           producer.send(data);
        } finally {
           producer.close();
        } 
```

和消费者：

```
 Properties props = new Properties();
        props.put("zk.connect", "localhost:2181");
        props.put("zk.connectiontimeout.ms", "1000000");
        props.put("groupid", "test_group");

        // Create the connection to the cluster
        ConsumerConfig consumerConfig = new ConsumerConfig(props);
        ConsumerConnector consumerConnector = Consumer.createJavaConsumerConnector(consumerConfig);

        // create 4 partitions of the stream for topic “test”, to allow 4 threads to consume
        Map<String, List<KafkaMessageStream<EventDetails>>> topicMessageStreams =
                consumerConnector.createMessageStreams(ImmutableMap.of("test3", 4), new EventsDataSerializer());
        List<KafkaMessageStream<EventDetails>> streams = topicMessageStreams.get("test3");

        // create list of 4 threads to consume from each of the partitions
        ExecutorService executor = Executors.newFixedThreadPool(4);

        // consume the messages in the threads
        for (final KafkaMessageStream<EventDetails> stream: streams) {
            executor.submit(new Runnable() {
                public void run() {
                    for(EventDetails event: stream) {
                        System.err.println("********** Got message" + event.toString());        
                    }
                }
            });
        } 
```

和我的序列化器：

```
public  class EventsDataSerializer implements Encoder<EventDetails>, Decoder<EventDetails> {
    public Message toMessage(EventDetails eventDetails) {
        try {
            ObjectMapper mapper = new ObjectMapper(new SmileFactory());
            byte[] serialized = mapper.writeValueAsBytes(eventDetails);
            return new Message(serialized);
} catch (IOException e) {
            e.printStackTrace();
            return null;   // TODO
        }
}
    public EventDetails toEvent(Message message) {
        EventDetails event = new EventDetails();

        ObjectMapper mapper = new ObjectMapper(new SmileFactory());
        try {
            //TODO handle error
            return mapper.readValue(message.payload().array(), EventDetails.class);
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }

    }
} 
```

这是我得到的错误：

```
org.codehaus.jackson.JsonParseException: Input does not start with Smile format header (first byte = 0x0) and parser has REQUIRE_HEADER enabled: can not parse
 at [Source: N/A; line: -1, column: -1] 
```

当我与`MessagePack`a一起工作时，`ObjectOutputStream`我遇到了一个类似的标题问题。我还尝试将有效负载 CRC32 添加到消息中，但这也无济于事。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-04T17:39:02.597

嗯，我没有遇到与您遇到的相同的标头问题，但是当我没有`VerifiableProperties`在我的编码器/解码器中提供构造函数时，我的项目没有正确编译。不过，缺少的构造函数会破坏杰克逊的反序列化似乎很奇怪。

也许尝试拆分您的编码器和解码器，并`VerifiableProperties`在两者中包含构造函数；您不需要实现`Decoder[T]`序列化。我能够按照本文中的格式成功实现 json[反](https://stackoverflow.com/a/24024119/1756430)`ObjectMapper`序列化。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T08:39:19.150

Bytebuffers .array() 方法不是很可靠。这取决于特定的实现。你可能想试试

```
ByteBuffer bb = message.payload()

byte[] b = new byte[bb.remaining()]
bb.get(b, 0, b.length);
return mapper.readValue(b, EventDetails.class) 
```

# xamarin.ios - 如何判断我安装了哪个版本的 monotouch？

> ID：11492745
> 
> 赞同：11
> 
> 时间：2012-07-15T14:33:18.017
> 
> 标签：xamarin.ios, xamarin

如何判断我安装了哪个版本的 monotouch？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T15:04:31.670

有几种方法可以获取版本号。

从终端您可以执行以下操作：

```
$ /Developer/MonoTouch/usr/bin/mtouch --version
mtouch 5.3.5.1340204820 
```

或者

```
$ cat /Developer/MonoTouch/Version 
5.3.5 
```

同样从 MonoDevelop 你可以做**关于 MonoDevelop**然后选择**版本信息**，这会给你（很多数据，包括 MonoTouch 版本）

```
...
Monotouch: 5.3.5
... 
```

# c - fscanf 不扫描文件

> ID：11492746
> 
> 赞同：1
> 
> 时间：2012-07-15T14:33:21.493
> 
> 标签：c, file-io, scanf

我正在尝试使用扫描文件`fscanf`并将字符串放入大小为 20 的 char 数组中，如下所示：

```
char buf[20];
fscanf(fp, "%s", buf); 
```

该文件`fp`当前包含：`1 + 23`.

我正在设置指向第一个元素的指针，`buf`如下所示：

```
char *p;
p = buf; 
```

印刷`buf`，`printf("%s", buf)`仅产量`1`。尝试增加`p`和打印也会打印出垃圾（`p++; printf("%c", *p)`）。

我在`fscanf`这里做错了什么？为什么不从文件中读取整个字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T14:35:10.210

`fscanf`（和相关函数）*格式字符串*“ *%s* ”将尝试读取尽可能多的字符而不包括空格，在这种情况下，它将找到第一个字符 ( `1`) 并存储它，然后它会碰到一个空格( `) 并因此停止搜索。`

 `* * *

如果您想一次阅读整行，请考虑使用`fgets`，它也更安全，因为您需要将目标缓冲区的大小指定为它的参数之一。

`fgets`将尝试读取最大*长度的缓冲区减去 1 个*字符（最后一个字节被保存为尾随的*null-byte*），它将在读取那么多字符时停止，击中*换行符*或文件末尾。

```
fgets (buf, 20, fp); 
```

* * *

**文档链接**

*   **[codecogs.com - scanf、fscanf 和相关函数 - <stdio.h>](http://www.codecogs.com/reference/computing/c/stdio.h/scanf.php)**
*   **[codecogs.com - fgets - <stdio.h>](http://www.codecogs.com/reference/computing/c/stdio.h/fgets.php)**`

# php - 带有ajax结果的url重定向

> ID：11492767
> 
> 赞同：0
> 
> 时间：2012-07-15T14:35:52.633
> 
> 标签：php, ajax

我希望在使用 AJAX 验证表单后，它将被重定向到另一个页面，但我的编码显示结果为 specfic `<div id="result">`。我在 index.php 上得到了这个结果，代码如下：

```
<div class="c_right">
    <div>
        <div class="t_h_c">
            Hi Guest
        </div>
        <div id="result" class="error">
        </div>
        <div class="username">
            Username:
        </div>
        <form name="signin" id="signin" method="post">
            <div class="f_l2">
                <input type="text" class="form_username" name="username" maxlength="40">
            </div>
            <div style="clear:both;">
            </div>
            <div class="username">
                Password:
            </div>
            <div class="f_l2">
                <input type="password" class="form_username" name="pass" maxlength="50">
            </div>
            <div style="clear:both;">
            </div>
            <div class="username"></div>
            <div class="f_l2">
                <a href="javascript:void(0)" onclick="document.getElementById('light3').style.display='block';document.getElementById('fade3').style.display='block'">
                    <img src="img/jpg/sinup.png" />
                </a>
            </div>
            <div class="f_r">
                <img src="img/jpg/sin-in.png" onClick="showHint()" />
        </form>
    </div>
</div>
</div>
<script type="text/javascript">
    // function create GetXmlHttpObject
    function showHint()
    {
        var t2lFname=document.signin.username.value;
        var t2lLname=document.signin.pass.value;
        var parameters="firstname="+t2lFname+"&lastname="+t2lLname;
        var xmlhttp;

        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.onreadystatechange=function()
        {
            if(xmlhttp.readyState == 1)
            {
                document.getElementById("chart").innerHTML ="<img src='img/ajax-loader.gif' />";
            }
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("result").innerHTML=xmlhttp.responseText;
            }
        }
        xmlhttp.open("POST","thank-you.php?username="+t2lFname+"&pass="+t2lLname,true);
        xmlhttp.send();
    }
</script> 
```

下面是thank-you.php 的代码。我希望在验证之后 index.php 将在验证 members.php 结果显示为结果 id 之后移动到 members.php。

```
<?php
    echo $_REQUEST['username'];
    echo $_REQUEST['pass'];
    include("connection.php");

    $query = mysql_query("SELECT COUNT(*) FROM user");
    list($number) = mysql_fetch_row($query);

    //Checks if there is a login cookie
    //if the login form is submitted
    if (isset($_REQUEST['username'])) { // if form has been submitted
        // makes sure they filled it in
        if(!$_REQUEST['username'] | !$_REQUEST['pass']) {
            die ('<span class="eror">You did not fill in a required field.</span>');
        }

        // checks it against the database
        if (!get_magic_quotes_gpc()) {
            $_REQUEST['email'] = addslashes(@$_REQUEST['email']);
        }

        $check = mysql_query("SELECT * FROM user WHERE un = '".$_REQUEST['username']."'")or die(mysql_error());
        //Gives error if user dosen't exist
        $check2 = mysql_num_rows($check);

        if ($check2 == 0) {
            die ("User name does not exist");
        }

        while($info = mysql_fetch_array( $check ))
        {
            $_REQUEST['pass'] = stripslashes($_REQUEST['pass']);
            $info['password'] = stripslashes($info['password']);
            $_REQUEST['pass'] = md5($_REQUEST['pass']);

            //gives error if the password is wrong
            if ($_REQUEST['pass'] != $info['password']) {
                die ('<span class="eror">Incorrect password,<i> please try again.</i></span>');
            }
            else
            {
                // if login is ok then we add a cookie
                $_REQUEST['username'] = stripslashes($_REQUEST['username']);
                $hour = time() + 600000000000000000000000000;
                setcookie(ID_my_site, $_REQUEST['username'], $hour);
                setcookie(Key_my_site, $_REQUEST['pass'], $hour);
                include("time.php");
                $conform=mysql_query("INSERT INTO user_ts (user_ts_user,user_ts_uli,user_ts_date, user_ts_umd) VALUES ('$_REQUEST[username]','$x','$d','$time_code')");

                if ($conform)
                    {
                        //then redirect them to the members area
                        setcookie('md',$time_code);
                        setcookie('li',$x);
                        setcookie('h',$h);
                        setcookie('m',$m);
                        # index.php is moved to members.php
                        header("Location: members.php");
                    }
                    else
                    {
                        die ('Not Inserted');
                    }
                }
            }
        }
        else
        {
            // if they are not logged in
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:44:54.797

我认为您可以使用`window.location`

代替：

```
xmlhttp.open("POST","thank-you.php?username="+t2lFname+"&pass="+t2lLname,true); 
xmlhttp.send(); 
```

使用window.location：

```
window.location("thank-you.php?username="+t2lFname+"&pass="+t2lLname); 
```

使用 xmlhttp 调用“thank-you.php”会导致 index.php 收到页面的响应，不会告诉浏览器去那里。

# android - Android：如何在 JSONStringer 中为 web 服务请求设置编码？

> ID：11492770
> 
> 赞同：4
> 
> 时间：2012-07-15T14:36:09.617
> 
> 标签：android, .net, json, web-services, encoding

我完成了我的应用程序的英文版本，我目前正在开发我的阿拉伯语应用程序版本。虽然我的英文 Web 服务运行良好，但我的阿拉伯语 Web 服务似乎有问题，我觉得在使用 JSONStringer 类构造我的 JSON 请求时需要指定编码类型（utf-8）。有没有办法做到这一点？

这是构造我的 JSON 请求的方法示例，

```
public static String initLoginJSONRequest(String username, String password){

String parentString = null;
String childString = null;

try{

    childString = new JSONStringer()
    .object()
        .key("username").value(username)
        .key("password").value(password)
    .endObject()
    .toString();

    parentString = new JSONStringer()
    .object()
        .key("UserCredentials").value(childString)
    .endObject()
    .toString();

}catch(JSONException e){
    e.printStackTrace();
}

return parentString; 
```

}

**编辑**

我还想补充一点，我在我的 HttpPost 中指定我的编码是 utf-8，如下所示，

```
HttpPost post = new HttpPost(getUrl);
             StringEntity se = new StringEntity(jsonString);
             se.setContentType("application/json;charset=UTF-8");//text/plain;charset=UTF-8
             se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,"application/json;charset=UTF-8"));

             post.setEntity(se);
             response = client.execute(post); 
```

但它没有正确接收我在 web 服务端（用 .NET 编写）的阿拉伯语字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:52:25.520

尝试将 UTF-8 更改为 ISO-8859-1

这里的答案可以帮助您： [Android - 使用 HTTP GET 读取 XML 文件](https://stackoverflow.com/questions/3395154/android-read-an-xml-file-with-http-get)

# asp.net - 当托管在 IIS .TCP 错误代码 10061 中时，Net Tcp 绑定在 .Net 4.0 中出现错误

> ID：11492775
> 
> 赞同：2
> 
> 时间：2012-07-15T14:37:24.927
> 
> 标签：asp.net, wcf, wcf-binding, wcf-client

我正在使用.net 4.0。

1.我在端口号 808 上托管了 net tcp 绑定服务。然后我收到错误说 TCP 错误代码 10061。

然后我处理了以下内容：

1.进入 services.msc 后，我将“Net Tcp 端口共享服务”设为自动。

2.右键单击网站并添加“http 和 net.tcp”以启用 tcp 绑定。

3.然后我运行以下命令：

%windir%\system32\inetsrv\appcmd.exe 设置站点“默认网站”-+bindings.[protocol='net.tcp',bindingInformation='808:*']

但是当我使用 netsat 时，我发现 808 端口根本没有监听。我得到 Tcp 错误代码 10061。

可能是什么原因 ？

我唯一错过的是：在 .net 3.0 下的控制面板中，有一个选项可以检查 http 和非 http 绑定。

我忽略了它，因为我使用的是 .Net 4.0。这是原因吗？或者是否缺少任何其他设置。

请告诉我

# symfony1 - 在 Symfony 1.4 中为所有表添加一个 Doctrine 事件监听器

> ID：11492779
> 
> 赞同：0
> 
> 时间：2012-07-15T14:37:42.237
> 
> 标签：symfony1, doctrine, symfony-1.4, doctrine-1.2

有没有一种快速的方法来为 Symfony 1.4 项目中的所有表添加一个 Doctrine 事件监听器？

我已经尝试将它添加到 Doctrine_Manager 中，`ProjectConfiguration::configureDoctrine()`但这似乎没有被调用。DQL 回调已启用，并且常规行为似乎有效 - 我似乎无法正确连接我的侦听器。

我正在扩展 Doctrine_Record_Listened 像这样：

```
<?php class siteFilterListener extends Doctrine_Record_Listener { ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:46:14.200

实现（无论您尝试做什么）的最佳方法是创建一个具有侦听器的行为，并将该行为添加到您的每个教义表中。启用回调，您的监听器将被您覆盖的事件调用：插入、删除、postsave、postdql。

我建议您使用任何行为插件作为您的基础，并开始进行更改。我写了 4 个非常简单的行为，每个行为只有 2 个代码文件——这对你来说是一个很好的起点。

[http://www.symfony-project.org/plugins/developer/prasad-gupte](http://www.symfony-project.org/plugins/developer/prasad-gupte)

# validation - 在 Struts 2 中验证同一操作中的 2 个方法

> ID：11492783
> 
> 赞同：1
> 
> 时间：2012-07-15T14:38:38.700
> 
> 标签：validation, struts2

我正在使用 Struts 2 进行开发，我想在同一个操作中验证 2 个方法（代表一个用户）。第一个是检查角色的登录方法，`user` `(admin or normal user)`第二个是编辑`user`：

```
public class UserAccountAction extends AppSupport {

    public String login() {
        if (getUsername().equals("admin") && getPassword().equals("admin")) {
            session.put("username", getUsername());
            return "adminSuccess";
        } else if (getUsername().equals("user") && getPassword().equals("user")) {
            session.put("username", getUsername());
            return "userSuccess";
        } else {
            addActionError(getText("login.failedLoginCredential"));
            return INPUT;
        }
    }

    public String editProfile {
        // ...
    }
} 
```

为此，我创建了 2 个 xml 文件: `UserAccountAction-login-validation.xml`:

```
<validators>
    <field name="login">
        <field-validator type="required">
            <message key="form.required" />
        </field-validator>
    </field>

    <field name="password">
        <field-validator type="required">
            <message key="form.required" />
        </field-validator>
    </field>
</validators> 
```

与和`UserAccountAction-editProfile-validation.xml`相同。`lastname``firstname`

`struts.xml`: _

```
 <action name="login" method="login" class="com.project.action.UserAccountAction">
    <result name="input">/jsp/login.jsp</result>
    <result name="userSuccess" type="redirect">home.html</result>
    <result name="adminSuccess" type="redirect">admin/home.html</result>
</action>

<action name="edit_account" method="editProfile" class="com.facilityrh.action.UserAccountAction">
    <result name="input" type="tiles">userEditProfile</result>
    <result name="success" type="redirect">account.html</result>
</action> 
```

和`login.jsp`：

```
<s:if test="hasActionErrors()">
    <div class="error"><s:actionerror /></div>
</s:if>

<s:if test="hasActionMessages()">
    <div class="message"><s:actionmessage /></div>
</s:if>

<s:form action="login" method="post">
    <s:textfield name="login" key="login.login" /><br />
    <s:password name="password" key="login.password" /><br />
    <s:submit name="submit" key="login.submit" /> 
</s:form> 
```

目前，在操作中，验证是基本的，但之后，我将使用数据库获取信息。

问题是当我提交表单时`(login or editProfile)`，该方法没有执行，因为我没有错误，我在同一个 jsp 上返回（输入旁边没有所需的消息）

谢谢

# ios - iOS avaudiosession 未在某些 iOS 硬件上启动

> ID：11492787
> 
> 赞同：1
> 
> 时间：2012-07-15T14:39:13.317
> 
> 标签：ios, avaudiorecorder, ipad-2, avaudiosession

我的 AVAudioRecorder 用于在我的 iOS 应用程序中录制音频时遇到了一个奇怪的情况。我发现一些罕见的 iPad2 设备无法开始录制音频会话。iOS 应用程序代码在所有其他类型的 iPod Touch、iPhone 和 iPad 以及模拟器中记录良好。似乎只是在极少数情况下无法记录。有谁知道为什么会发生这种情况？

这是编码信息。

* * *

在我的 .h 文件中，我设置了 AVAudioRecorder ...

RVC.h

```
@interface RVC : UIViewController <AVAudioRecorderDelegate, AVAudioPlayerDelegate>{
    AVAudioRecorder *audioRecorder;
}
@property (nonatomic, retain) AVAudioRecorder *audioRecorder; 
```

* * *

RVC.m

```
@implementation RVC
@synthesize audioRecorder;

// Set up the file path and name, where the path is to the temporary directory
soundFile = [NSURL fileURLWithPath:[tempDir stringByAppendingFormat:@"theSoundFile.m4a"]];

// Set up the settings for the recording
soundSetting = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithFloat: 44100.0],AVSampleRateKey,
      [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
      [NSNumber numberWithInt: 2], AVNumberOfChannelsKey,
      [NSNumber numberWithInt: AVAudioQualityHigh], AVEncoderAudioQualityKey, nil];

// Make the AVAudioRecorder with the filename and the sound settings.
self.audioRecorder = [[AVAudioRecorder alloc] initWithURL:soundFile settings:soundSetting error:&error];

// Check to make sure the iOS device has audio hardware that can make a recording
BOOL audioHWAvailable = [[AVAudioSession sharedInstance] inputIsAvailable];
if (! audioHWAvailable) {
   NSLog(@"No audio hardware is available.");
   return;
}

[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];

// Make sure any output sound is played through the speakers.
UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

[[AVAudioSession sharedInstance] setActive:YES error:nil];

// If the audiorecorder is properly set up, then start recording.
if (audioRecorder) {
    [audioRecorder prepareToRecord];
    // Start the recording
    isRecording = [audioRecorder record];
}
else {
    isRecording = FALSE;
    NSLog(@"The audio recorder was not properly set up.");
}

if (isRecording) {
    // The AVAudioSession is recording.
}
else {
    // The AVAudioSession did not start so make some kind of log file.
    NSLog(@"The recording was not started properly.");
    // This is where THE PROBLEM SHOWS UP where it is having trouble with some versions of the iPad2, which I can not replicate in the simulators.
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:43:53.973

您`error`在 init 调用中传入一个：

```
self.audioRecorder = [[AVAudioRecorder alloc] initWithURL:soundFile settings:soundSetting error:&error]; 
```

但你从来没有读过它。我敢打赌，在失败的情况下，您会在这里遇到错误，导致 audioRecorder 为`nil`.

# xml - Ant XML 文件的查找错误

> ID：11492789
> 
> 赞同：0
> 
> 时间：2012-07-15T14:39:18.277
> 
> 标签：xml, ant, metrics, findbugs, checkstyle

我们有一个相当大的项目，ant xml 增长得非常快。我们已经集成了不同的静态代码分析工具，我正在寻找类似 checkstyle+findbugs 的东西，但对于 ANT XML，来验证文件的正确性，也许是为了找到未使用的属性等。

有人知道这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:54:06.673

IntelliJ IDEA 和 Eclipse 都提供了出色的 Ant 支持。

# [IntelliJ Ant 支持](http://www.jetbrains.com/idea/webhelp/ant.html)

> ## 编码协助
> 
> 在 IntelliJ IDEA 中编辑 Ant 构建文件时，您可以享受以下高级编辑功能：
> 
> *   语法高亮。
> *   代码完成。特别是，为 File 类型的属性提供了代码完成。
> *   导航到声明`Ctrl`+ `B`。
> *   使用结构视图。
> *   重命名重构。
> *   代码折叠。
> *   重新格式化。
> *   **验证。**
> *   查看参数信息`Ctrl`+ `P`。
> *   查看快速信息**GuiDesigner.QuickJavadoc。**特别是，如果 classpath 被定义为类似路径的结构，则 fileset 或 dirset 指令的 View Quick Info 命令将显示磁盘上的实际文件和目录，这些指令被解析为这些文件和目录。
> 
> ## 类路径结构
> 
> IntelliJ IDEA 允许在任务定义中使用类似路径的结构。如果类路径被定义为类似路径的结构，则 fileset 和 dirset 指令中的路径将解析为磁盘上的实际文件和目录。执行任务所需的所有 JAR 应放置在包含具有任务定义的 JAR 的同一位置。

# [Eclipse 蚂蚁编辑器](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.user/reference/ref-anteditor.htm)

> *   语法高亮
> *   内容/代码辅助（包括 Ant 特定模板）
> *   注释

# c# - 刷新winform上显示的绑定数据需要什么？

> ID：11492794
> 
> 赞同：0
> 
> 时间：2012-07-15T14:39:38.297
> 
> 标签：c#, winforms, visual-studio-2010, sql-server-ce

设想：

*   通过按钮可见的子窗体。
*   当这个孩子关闭时，会创建一个委托来运行某些代码。
*   子窗体用于编辑底层数据
*   当子窗体关闭时，最新版本的数据应显示在父窗体上的任何绑定控件上。

问题 -

这是相关的代码尝试：

```
public partial class uxRevisionHelperForm : Form
{

    public SqlCeConnection conn = new SqlCeConnection(ConfigurationManager.ConnectionStrings["WindFormAppRevisionHelper.Properties.Settings.DefinitionsDBConnectionString"].ConnectionString);
    BindingSource definitionsBindingSource = new BindingSource();

    public uxRevisionHelperForm()
    {
        InitializeComponent();
        uxDescriptionTextBox.AutoSize = true;
        refreshBindingSource();
        assignControlsToSource();
    }

      //>>>>>>>>ALL OF THE FOLLOWING METHOD IS CALLED BY THE DELEGATE WHEN THE CHILD IS CLOSED
    public void refreshBindingSource()
    {            

        SqlCeDataAdapter da = new SqlCeDataAdapter(new SqlCeCommand("Select * From tb_RevisionDefinitions",conn));
        DataSet ds = new DataSet("Helper");
        ds.Tables.Add("DefinitionsTable");
        da.Fill(ds.Tables["DefinitionsTable"]);

        // Assign the BindingSource.
        definitionsBindingSource.DataSource = ds.Tables["DefinitionsTable"];
        uxBindingNavigator.BindingSource = this.definitionsBindingSource;

    }
    void assignControlsToSource() 
    {
        uxDescriptionTextBox.DataBindings.Add(new Binding("Text", definitionsBindingSource, "Description", true));
        uxWordPhraseTextBox.DataBindings.Add(new Binding("Text", definitionsBindingSource, "WordPhrase", true));
        uxReferenceTextBox.DataBindings.Add(new Binding("Text", definitionsBindingSource, "Reference", true));
    }

    private void uxUpdateDataButton_Click(object sender, EventArgs e)   
    {
        uxRevisionHelperGroupBox.Enabled = false;
        uxBindingNavigator.Hide();
        uxFormDatabase myNewDisplay = new uxFormDatabase();
        myNewDisplay.FormClosed += delegate { activateGroupBorder(); };
        myNewDisplay.Show();    
    }

    public void activateGroupBorder() 
    {
        uxRevisionHelperGroupBox.Enabled = true;
        uxBindingNavigator.Show();
        refreshBindingSource();    //<<<<<<<<<<<DELEGATE CALLS THIS METHOD
    }

} 
```

以上似乎可行，但我真的必须运行该方法中的所有代码`refreshBindingSource`以确保父表单上显示的信息是最新的吗？

**更新**

我遵循了 Amiram 的建议并传入了我的 BindingSource，这样就不必为父表单重复已经存在的代码。我已经在一些样板代码中复制了该方法`saveToolStripButton_Click`；...真的不知道那个小例程中发生了什么-这两行足以将信息保存回数据库吗？

```
public partial class uxFormDatabase : Form
{

    BindingSource rawtableBindingSource = null;

    public uxFormDatabase(BindingSource myPassedSource) 
    {
        InitializeComponent();
        rawtableBindingSource = myPassedSource;

        uxDGVtable.AutoSize = true;
        uxDGVtable.SizeChanged += new EventHandler(uxDGVtable_change);
        dataToDGV();
    }
    public void uxDGVtable_change(object sender, EventArgs e)
    {
        if (uxDGVtable.Width < 1158)
        {
            this.Width = uxDGVtable.Width;
        }
    }

    public void dataToDGV()
    {
        uxrawdataBindingNavigator.BindingSource = this.rawtableBindingSource;
        uxDGVtable.DataSource = this.rawtableBindingSource;
    }

    private void saveToolStripButton_Click(object sender, EventArgs e)
    {
        Validate();
        rawtableBindingSource.EndEdit();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:49:31.320

如果您对两种表单使用不同的数据源，您别无选择，只能重新加载数据（有一种方法可以使用 sql server 自动执行该操作），但如果您使用相同的数据集甚至相同的 BindingSource，则可以避免这种情况，所以刷新会自动发生。

# cryptography - 写一个爱经密码

> ID：11492795
> 
> 赞同：0
> 
> 时间：2012-07-15T14:39:47.123
> 
> 标签：cryptography

我最近学习了密码学，我的任务之一是创建一个 kama sutra 密码。直到生成密钥为止，我都没有问题。但是，由于 kama sutra 的性质，我认为密钥不应该被硬编码到程序中，而是为它接收的每个纯文本生成。

我的理解是密文的长度应该与纯文本的长度相同。但是，问题是我将密钥放在哪里，这样只要我的程序生成密文，即使程序关闭，程序也能够解密它。鉴于这是一种算法，我确信我不应该考虑将密钥存储在另一个平面文件/数据库中。

网上关于这个密码的相关资料不多。我看到的是那些允许你随机化一个密钥集，根据给定的密钥集生成一个密文。解密时，您还需要提供相同的密钥集。这是正确的实施方式吗？

有这方面知识的朋友，请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:03:08.223

如果您希望能够解密密文，那么您需要能够在需要时恢复密钥。对于经典密码，这通常是通过对多条消息使用相同的密钥来完成的，请参阅 Caesar Cypher 示例。凯撒使用恒定键，-3/+3 移位，而奥古斯都使用 +1/-1 移位。

您可能需要咨询您的讲师，了解是否需要固定键或可变键。

开发一个固定密钥版本，然后在上面添加不同的密钥功能会更简单。这样你就可以让程序的其余部分正常工作。

您可能还想查看使用关键词来混合字母的经典技术。

# php - 用于检查 div 是否被点击的 php 代码

> ID：11492797
> 
> 赞同：1
> 
> 时间：2012-07-15T14:39:48.977
> 
> 标签：php, html

谁能帮助我。我需要 php 代码来检查是否单击了 div。

喜欢，

```
if (isset($_POST['Submit1'])) { } 
```

但是我需要一个 div 而不是提交按钮...请任何人帮助我

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:01:16.737

我不知道您是否希望将 div 视为表单元素（如复选框），或者您是否想使用 div 提交表单。

Stano 已经解释了将其用作表单元素，如果您希望 div 提交表单，您真的应该只使用提交按钮。如果您想使用图像而不是按钮，则 using`<input type="image"...>`将用作提交按钮。

如果你真的需要使用 div 来提交表单，你将需要 javascript。像这样，我们采用一个名为“bald”的表单，当您单击 div 时，就像您按下提交按钮一样提交表单“bald”。

```
<form name="bald" action="somefile.php">
    <div onclick="bald.submit();">Click here to submit</div>
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T14:50:11.607

如果我正确阅读了您的问题，您将需要 JavaScript，因为 PHP 不会访问 DOM。我建议您将 jQuery lib 添加到您的页面，因为将单击事件添加到 DIV 更简单，否则您必须自己在 javascript 中添加一个事件侦听器来处理 DIV 上的单击事件。

jQuery： [http ://api.jquery.com/click/](http://api.jquery.com/click/)

DIY： http: [//www.codingforums.com/archive/index.php/t-122993.html](http://www.codingforums.com/archive/index.php/t-122993.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T14:47:51.007

PHP 无法告诉您是否单击了 div，因为 php 仅适用于服务器。为此，您需要 javascript。

[jquery](http://jquery.com/)使这样的事情变得非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T14:52:23.497

无法想象这个测试有什么好处，但你可以像这样使用 javascript：

```
<div id="clickable_div" onclick="document.getElementById('divclicked').value='YES'"> SOMETHING </div> 
```

以你的形式

```
<input type="hidden" id="divclicked" name="divclicked" value="NO"/> 
```

并在 php

```
if ($_POST['divclicked']=='YES') {...} else {...} 
```

# ios - 使用 MKNetworkKit 时的一个 MKNetworkEngine 对象

> ID：11492799
> 
> 赞同：3
> 
> 时间：2012-07-15T14:40:11.540
> 
> 标签：ios, mknetworkkit

我刚刚切换到使用 MKNetworkKit 并且我很困惑是否应该在应用程序启动时创建一个 MKNetworkEngine 对象并在我想要网络连接时使用它，或者我是否应该每次都创建一个新对象？

如果我只需要创建一个并在应用程序的整个生命周期中使用它，我会假设 MKNetworkKit 会创建一个单例，但它似乎没有（不是我能看到的）。

另一方面，每次我想做一个简单的 GET 请求时，分配/初始化 MKNetworkEngine 似乎很麻烦。

似乎有些不对劲，所以我想知道我是否正确使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:30:50.987

您为您打算调用的每个 Web 服务创建一个引擎，并将其作为一个强大的属性保存在应用程序委托中
（facebook = 一个引擎 / twitter = 一个引擎 / flickr = 一个引擎）

创作者 Mugunth Kuma 写道：

> MKNetworkEngine 是一个伪单例类，用于管理应用程序中的网络队列。它是一个伪单例，从某种意义上说，对于简单的请求，您应该直接使用 MKNetworkEngine 方法。对于更强大的自定义，您应该对其进行子类化。每个 MKNetworkEngine 子类都有自己的 Reachability 对象，用于通知它服务器可达性通知。您应该考虑为您使用的每个唯一 REST 服务器创建 MKNetworkEngine 的子类。从某种意义上说，它是伪单例，它的任何子类中的每个请求都通过一个且只有一个队列。

[看到这篇博客文章](http://blog.mugunthkumar.com/products/ios-framework-introducing-mknetworkkit/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:29:39.050

Etienne678 是对的。您应该为每个网络服务器创建一个引擎，并在引擎上设置该服务器所需的全局标头（如 gzip）和其他标头。

当您对操作进行排队时，这些标头会自动附加到引擎。

# java - facebook照片上传应用程序上的空指针

> ID：11492800
> 
> 赞同：1
> 
> 时间：2012-07-15T14:40:14.827
> 
> 标签：java, android, facebook, nullpointerexception

我将照片上传到 Facebook 的应用程序已停止工作，现在正在强制关闭。以下是发生强制关闭时的日志。我无法深入了解问题所在。非常感谢任何帮助或指导。谢谢！

完整代码可以在[https://github.com/adamwhiles/EasyPhotoUpload查看](https://github.com/adamwhiles/EasyPhotoUpload)

** 更新 ** 我恢复到我的应用程序的早期版本，我知道一个正在工作但仍然有同样的问题。我想也许 Facebook 改变了一些东西。我使用其他不依赖 SSO 的 Facebook 应用程序，它们似乎仍在工作。

```
07-15 14:33:13.262: W/dalvikvm(636): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
07-15 14:33:13.323: E/AndroidRuntime(636): FATAL EXCEPTION: main
07-15 14:33:13.323: E/AndroidRuntime(636): java.lang.NullPointerException
07-15 14:33:13.323: E/AndroidRuntime(636):  at libcore.net.UriCodec.decode(UriCodec.java:149)
07-15 14:33:13.323: E/AndroidRuntime(636):  at java.net.URLDecoder.decode(URLDecoder.java:45)
07-15 14:33:13.323: E/AndroidRuntime(636):  at com.facebook.android.Util.openUrl(Util.java:182)
07-15 14:33:13.323: E/AndroidRuntime(636):  at com.facebook.android.Facebook.request(Facebook.java:751)
07-15 14:33:13.323: E/AndroidRuntime(636):  at com.adamwhiles.easyphotoupload.EasyPhotoUpload.uploadImage(EasyPhotoUpload.java:239)
07-15 14:33:13.323: E/AndroidRuntime(636):  at com.adamwhiles.easyphotoupload.EasyPhotoUpload.access$5(EasyPhotoUpload.java:233)
07-15 14:33:13.323: E/AndroidRuntime(636):  at com.adamwhiles.easyphotoupload.EasyPhotoUpload$2.onClick(EasyPhotoUpload.java:132)
07-15 14:33:13.323: E/AndroidRuntime(636):  at android.view.View.performClick(View.java:3511)
07-15 14:33:13.323: E/AndroidRuntime(636):  at android.view.View$PerformClick.run(View.java:14105)
07-15 14:33:13.323: E/AndroidRuntime(636):  at android.os.Handler.handleCallback(Handler.java:605)
07-15 14:33:13.323: E/AndroidRuntime(636):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-15 14:33:13.323: E/AndroidRuntime(636):  at android.os.Looper.loop(Looper.java:137)
07-15 14:33:13.323: E/AndroidRuntime(636):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-15 14:33:13.323: E/AndroidRuntime(636):  at java.lang.reflect.Method.invokeNative(Native Method)
07-15 14:33:13.323: E/AndroidRuntime(636):  at java.lang.reflect.Method.invoke(Method.java:511)
07-15 14:33:13.323: E/AndroidRuntime(636):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-15 14:33:13.323: E/AndroidRuntime(636):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-15 14:33:13.323: E/AndroidRuntime(636):  at dalvik.system.NativeStart.main(Native Method)
07-15 14:33:14.092: I/dalvikvm(636): threadid=3: reacting to signal 3
07-15 14:33:14.252: I/dalvikvm(636): Wrote stack traces to '/data/anr/traces.txt' 
```

# algorithm - 埃拉托色尼的概率筛

> ID：11492811
> 
> 赞同：3
> 
> 时间：2012-07-15T14:41:23.453
> 
> 标签：algorithm, math

考虑以下算法。

```
function Rand():
    return a uniformly random real between 0.0 and 1.0

function Sieve(n):

    assert(n >= 2)

    for i = 2 to n
        X[i] = true

    for i = 2 to n
        if (X[i])
            for j = i+1 to n
                if (Rand() < 1/i)
                    X[j] = false

    return X[n] 
```

`true`Sieve(k)作为 k 的函数返回的概率是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T15:45:55.017

让我们递归地定义一系列随机变量：

令 X [k,r]表示指示变量，在变量取值的迭代结束时取值`1`iff 。`X[k] == true``i``r`

为了减少符号并且因为它对代码更直观，我们只写 X [k,i]这是有效的，尽管在定义中会令人困惑，因为当第一个引用变量时`i`取值会令人困惑`i`循环和后者到变量的值。

现在我们注意到：

P(X [k,i] ~ 0) = P(X [k,i-1] ~ 0) + P(X [k,i-1] ~ 1) * P(X [k-1,i-1] ~ 1) * 1/一世

（~ 用于代替 = 只是为了使其易于理解，因为 = 否则将具有两个不同的含义并且看起来令人困惑）。

这种等式成立是因为要么`X[k]`在迭代`false`结束时`i`要么因为它在 结束时为假`i-1`，要么`true`在那个点，但在最后一次迭代`X[k-1]`中`true`，所以我们进入循环并更改`X[k]`为1/i 的概率。事件是互斥的，所以没有交集。

递归的基础很简单，即 P(X [k,1] ~ 1) = 1 和 P(X [2,i] ~ 1) = 1。

最后，我们简单地注意到 P( · `X[k] == true`) = P(X [k,k-1] ~ 1)。

这可以很容易地编程。这是一个使用 memoisation 的 javascript 实现（如果使用嵌套索引比字典索引的字符串连接更好，您可以进行基准测试，您还可以重新设计计算以保持相同的运行时复杂性，但不会通过构建自下而上和不是自上而下）。自然地，该实现将具有运行时复杂性，`O(k^2)`因此对于任意大的数字是不切实际的：

```
function P(k) {
   if (k<2 || k!==Math.round(k)) return -1;
   var _ = {};
   function _P(n,i) {
      if(n===2) return 1;
      if(i===1) return 1;
      var $ = n+'_'+i;
      if($ in _) return _[$];
      return _[$] =  1-(1-_P(n,i-1) + _P(n,i-1)*_P(n-1,i-1)*1/i);
   }
   return _P(k,k-1);
}

P(1000); // 0.12274162882390949 
```

更有趣的是 1/i 概率如何改变事物。即概率是否收敛到 0 或某个其他值，如果是，如何改变 1/i 对其产生影响。

当然，如果您在 mathSE 上提问，您可能会得到更好的答案——这个答案非常简单，我相信有一种方法可以操纵它来获得直接公式。

# php - 在这个 javascript 中添加这个 php 代码

> ID：11492812
> 
> 赞同：-1
> 
> 时间：2012-07-15T14:41:22.957
> 
> 标签：php, javascript

有人可以告诉我如何添加这个 php 代码：

```
<?php  include('shopping_cart_temp.php'); ?> 
```

进入这个 javascript 行：

```
$('.cart_status').append('<p class="json-productname">' + retObj.product_name ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:44:50.927

使用 AJAX 调用：

```
$.get('shopping_car_temp.php', function(result){
    // display the data returned, value store in 'result'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:05:33.117

进一步来说，

```
$.get('shopping_car_temp.php', function(result){
   $('.cart_status').append('<p class="json-productname">' + result );
}); 
```

在您的 shopping_car_temp.php 文件中，仅回显 retObj.product_name。如果您需要回显多个内容，您可能希望将它们格式化为 JSON 对象。您可以在以下位置阅读这些内容： http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T15:05:39.937

PHP 是一种服务器端语言，而 Javascript 是一种客户端语言。当您在浏览器中请求 php 页面时，服务器会处理该请求，解释 PHP 代码并将 HTML 页面发送给您。然后，只有当 HTML 页面在您的浏览器中时，javascript 才会被解释，因此您不能从这里添加 PHP 代码，因为它无法被解释。

As @TurdPile said, you can make an ajax request to get the code from shopping_cart_temp.php and then manipulate it, but you should read some ajax tutorial to understand exactly how it works because it could be quite hard to understand

# javascript - 如何获取 AJAX 的 UI 设计器窗口

> ID：11492817
> 
> 赞同：-1
> 
> 时间：2012-07-15T14:42:02.070
> 
> 标签：javascript, ajax

我想开始 AJAX 编码，但也希望能够通过将小部件拖到工作区来在设计器窗口（如 MS Visual Studio 中）中设计用户界面。有什么工具可以让我轻松做到这一点吗？

现在我正在使用 Aptana 3。我已经安装了 jQuery，但在尝试获取 jQuery UI 时迷路了。有没有其他方法可以得到我需要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:20:19.503

没有 ajax/widget/js 库有自己的组件设计器，你可以停止搜索免费的库，没有。

大多数人都知道，它被称为 Sencha Architect，用于超级棒的 Sencha ExtJS 库。美丽的小部件，出色的设计师应用程序，出色的文档。这些东西当然是有代价的。

如果您愿意投资：

Sencha ExtJS：[http](http://www.sencha.com/products/extjs/)
://www.sencha.com/products/extjs/ ExtJS 商店：[http](http://www.sencha.com/store/architect/)
://www.sencha.com/store/architect/ Sencha Architect：[http ://www.sencha.com/products/建筑师/建筑师](http://www.sencha.com/products/architect/)
商店：[http ://www.sencha.com/store/architect/](http://www.sencha.com/store/architect/)

除了这个之外，我还没有看到任何 js/ajax 库的任何组件/UI 设计器应用程序。

# php - “调用非对象上的成员函数”的不寻常案例

> ID：11492818
> 
> 赞同：0
> 
> 时间：2012-07-15T14:42:16.607
> 
> 标签：php

我有一个代码：

```
class db {
    var $connection;
    function escape($esc) {
        return str_replace(array('%','_'),array('\%','\_'),mysqli_real_escape_string($this->connection,$esc));
    }
[...]
}
$db=new db;

class Session {
    private function read($sid) {
        global $db;
        $r=$db->query('SELECT `data` FROM `sess` WHERE `hash`=\''.$db->escape($sid).'\' LIMIT 1');
        if ($this->debug) echo 'Read: <u>SELECT `data` FROM `sess` WHERE `hash`=\''.$db->escape($sid).'\' LIMIT 1</u><br/>';
        if($db->num_rows($r)==1) {
            $fields=$db->fetch_assoc($r);
            return $fields['data'];
        }
        else return '';
    }

    private function write($sid, $data) {
        global $db;
        if ($this->debug) echo 'Write: <u>REPLACE INTO `sess`(`hash`,`data`) VALUES(\''.$db->escape($sid).'\',\''.$db->escape($data).'\')</u><br/>';
        $db->query('REPLACE INTO `sess`(`hash`,`data`) VALUES(\''.$db->escape($sid).'\',\''.$db->escape($data).'\')');
        return $db->connection->affected_rows;
    }
[...]
function __construct($debug=false) {
    session_set_save_handler(
        array(&$this, 'open'),
        array(&$this, 'close'),
        array(&$this, 'read'),
        array(&$this, 'write'),
        array(&$this, 'destroy'),
        array(&$this, 'clean')
    );
    $this->debug=$debug;
    session_start();
}
}
$sessions=new Session(true); 
```

我不断得到`Fatal error: Call to a member function escape() on a non-object on line 61`（第 2 行`function write($sid, $data)`）。奇怪的是，调试器显示该函数`read`已成功执行。谁能解释一下为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:17:31.610

很可能（尽管我们看不到您在哪里调用该方法），它`$db`是在声明变量之前的某个地方调用的。

**正确**的解决方案是通过构造函数将变量注入类。

```
public function __construct(db $db, $debug = false) {
    $this->db = $db;
    ....
} 
```

然后`$this->db`在需要的地方使用。

使用全局变量的问题在于**decleration 的顺序很重要**，这意味着您必须`$db`在调用之前声明`Session::write()`，**但您需要这样做并不明显！**. 现在，很明显，因为您需要一个`$db`对象才能让您的构造函数运行！

**[为什么全球国家如此邪恶？](https://softwareengineering.stackexchange.com/questions/148108/why-is-global-state-so-evil)**

# mysql - 在 SQL (MySQL) 中返回基于今天日期的查询结果

> ID：11492823
> 
> 赞同：1
> 
> 时间：2012-07-15T14:42:44.640
> 
> 标签：mysql, sql, where-clause

我有一个查询，我得到了帮助，但我又陷入了困境。

我的代码是

```
SELECT a.name, COUNT(*) AS num FROM table2 b 
INNER JOIN table1 a 
ON b.status_id=a.id 
GROUP BY status_id 
```

我现在想做的只是显示在当前日期输入的结果？日期列在表 2 中。日期列的格式是日期和时间（例如 1341241153），由 CRM 以这种方式自动设置。我不确定这是什么格式！

我只需要检查日期是否与当天匹配。我希望这很清楚。

这是一个 MySQL 数据库。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:37:13.007

使用此解决方案：

```
SELECT     a.name, COUNT(*) AS num
FROM       table2 b
INNER JOIN table1 a ON b.status_id = a.id
WHERE      b.datecol >= UNIX_TIMESTAMP(CURDATE()) AND
           b.datecol < UNIX_TIMESTAMP(CURDATE() + INTERVAL 1 DAY)
GROUP BY   b.status_id 
```

这将避免将您的日期列包装在一个函数中，这会使查询不可分割（即不能使用索引）。通过在裸日期列上进行比较，MySQL 仍然能够利用索引（如果您在日期列上设置了它），并且它应该非常有效。

***如果您绝对知道***输入的日期永远不会是将来的某个时间（即明天或第二天），您可以进一步简化它：

```
SELECT     a.name, COUNT(*) AS num
FROM       table2 b
INNER JOIN table1 a ON b.status_id = a.id
WHERE      b.datecol >= UNIX_TIMESTAMP(CURDATE())
GROUP BY   b.status_id 
```

第二个条件检查被删除，因为它不需要检查它是否在未来的一天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T14:45:24.280

试试这个：：

```
SELECT a.name, COUNT(*) AS num FROM table2 b 
INNER JOIN table1 a 
ON b.status_id=a.id 

where DATE(column_date) = DATE(now())  
GROUP BY status_id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T15:18:34.127

您应该`from_unixtime()`在日期列上使用函数，该函数包含`1341241153`.
因为这些值似乎以 unix 时间戳格式存储。

**示例**：

```
mysql> select
    ->     from_unixtime( 1341241153 ) as 'my_datetime_1341241153',
    ->     date( from_unixtime( 1341241153 ) ) as 'my_date_1341241153',
    ->     curdate(),
    ->     curdate() > date( from_unixtime( 1341241153 ) ) 'is_today_later?',
    ->     curdate() = date( from_unixtime( 1341241153 ) ) 'is_today_equal?',
    ->     curdate() < date( from_unixtime( 1341241153 ) ) 'is_today_before?'
    -> from
    ->     dual
    -> \G
*************************** 1\. row ***************************
my_datetime_1341241153: 2012-07-02 20:29:13
    my_date_1341241153: 2012-07-02
             curdate(): 2012-07-15
       is_today_later?: 1
       is_today_equal?: 0
      is_today_before?: 0
1 row in set (0.00 sec) 
```

* * *

您的查询应该是：

```
SELECT a.name, COUNT(*) AS num FROM table2 b 
INNER JOIN table1 a 
ON ( b.status_id=a.id and curdate() = date( from_unixtime( b.crm_date_time_column ) ) )
GROUP BY status_id 
```

# ruby - Ruby 中有独立的 i18n 库吗？

> ID：11492834
> 
> 赞同：5
> 
> 时间：2012-07-15T14:44:39.430
> 
> 标签：ruby, localization, internationalization, locale, i18n-gem

在 Ruby 中，我找不到任何本地化模块。有没有或者我应该使用一些外部库？我找到了 I18n gem，但我不知道我是否可以在独立应用程序中使用它（没有 Rails）。此外，我需要一些方法来定位浮点数，但我在 I18n gem 中看不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T19:29:20.600

你试过r18n吗？

[https://github.com/ai/r18n](https://github.com/ai/r18n)

它还本地化浮动：

[https://github.com/ai/r18n/blob/master/r18n-core/spec/locale_spec.rb](https://github.com/ai/r18n/blob/master/r18n-core/spec/locale_spec.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-16T14:12:13.070

Ruby 标准库中没有本地化模块。您可以`i18n`在 Rails 之外使用 gem，这可能是 Ruby 下载次数最多且最流行的国际化插件。

如果您正在寻找更轻量级的版本，我最近发布了[MiniI18n](https://github.com/markets/mini_i18n)：一个简单、灵活且快速的 Ruby 国际化和本地化库。它还支持日期和数字本地化、插值、复数、后备、嵌套键等。`i18n`它的 API 与库非常相似。在此处查看 [基准](https://gist.github.com/markets/eab1d4a82d22146b577a085d00f1185d)。

翻译示例：

```
>> MiniI18n.t(:hello)
=> "Hello"
>> MiniI18n.t(:hello_with_name, name: 'John Doe')
=> "Hello John Doe"
>> MiniI18n.t('notifications.unread', count: 0)
=> "no unread notifications"
>> MiniI18n.t([:hello, :bye])
=> ["Hello", "Bye"] 
```

号码本地化示例：

```
>> MiniI18n.l(1000.5)
=> "1,000.5"
>> MiniI18n.l(1000.5, as: :currency)
=> "1,000.5 $" 
```

日期本地化示例：

```
>> MiniI18n.l(Date.new(2018, 8, 15))
=> "Wednesday 15, August, 2018"
>> MiniI18n.l(Date.new(2018, 8, 15), format: :short)
=> "15 Aug 18" 
```

# python - 未在 C 中声明数组大小

> ID：11492836
> 
> 赞同：1
> 
> 时间：2012-07-15T14:44:46.247
> 
> 标签：python, c, arrays, element

考虑一下 Python 中的这个简单程序：

```
n=int(input("enter your lower limit"))
m=int(input("enter your higher limit"))
list=[]
x=n
while x<=m:
    if (x%2==0):
        list.append(x)
    x+=1
print("the even numbers in your range are:",end="")
print(len(list)) 
```

在这里，我最初可以将 list 的元素声明为空，并继续在其中插入结果，其范围完全取决于用户。然后我可以检查该列表的长度，因此在用户范围之间有多少元素满足我的条件。所以它在 Python 中变得很容易！

但是在 C 中，我必须首先声明数组的元素数！我可以将它声明为一个随机的大数，然后继续插入结果。然后通过检查 character 之前有多少元素来找出最终结果（在用户范围内有多少元素满足我的条件）`\0`。但它仍然会浪费大量内存并将垃圾留在未使用的元素中，这可能会导致更大的程序出现问题！

出色地！我对`malloc()`. 但我也必须在这里声明尺寸！虽然我可以稍后释放内存，从而减少更大程序的压力，但我真的想知道在 C 语言中是否存在像 Python 这样的简单过程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T14:54:54.040

您需要一个*动态数据集*，例如动态分配的数组。您可以使用`malloc`或`calloc`创建初始数组，并`realloc`更改其大小。但请注意测试是否成功：

```
Foo * array = calloc(25, sizeof(Foo));         // space for 25 Foo's, zeroed out
// test for "array != NULL"                    // "25" can be a dynamic value

// use array[0], array[1], ..., array[24]

Foo * tmp = realloc(array, 250 * sizeof(Foo)); // extend to 250 elements
if (tmp) { array = tmp; }
else     { /* error! */ }

// use ... array[249]

free(array);                                   // clean up 
```

或者，您可以实现任何其他动态数据结构，例如链表或树，并分别为每个元素（每个*节点*）分配/释放空间并以某种方式跟踪它们。连续数组只是最简单直接的动态数据结构，但它适用于很多场景。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T14:55:37.110

您可以使用`Linked List`，或者您可以调整数组的大小，以便允许它动态增长。只是一个基本的想法：

```
#include<stdlib.h>
#include<stdio.h>

struct list_el {
   int val;
   struct list_el * next;
};

typedef struct list_el item;

void main() {
   item * curr, * head;
   int i;

   head = NULL;

   for(i=1;i<=10;i++) {
      curr = (item *)malloc(sizeof(item));
      curr->val = i;
      curr->next  = head;
      head = curr;
   }

   curr = head;
   item * temp;
   while(curr) {
      temp = curr->next;
      printf("%d\n", curr->val);
      free(curr);
      curr = temp;
   }
} 
```

如果要使用数组，请使用[realloc](http://en.cppreference.com/w/c/memory/realloc)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T14:56:42.603

这就是 C 的工作方式。您必须手动控制内存消耗、分配、释放等。

对于您的情况，您可以：

1.  使用重新分配。它将重新分配您的数组，为其添加更多内存并复制其中的内容。
2.  使用一些外部库，如 [http://bstring.sourceforge.net/](http://bstring.sourceforge.net/)或其他东西，这将隐藏动态字符串/数组等的复杂性
3.  使用一些内存管理库，它将管理您自己的池，因此您的应用程序的内存消耗（对系统可见）将是恒定的，但在您的应用程序内部，您将能够灵活地管理您的变量和数组
4.  切换到 C++ 并使用 STL 容器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T14:49:29.067

您可以使用 realloc 动态增长您之前使用 malloc 分配的“数组”（内存块）。数组的旧内容将被保留。

请参阅[http://en.cppreference.com/w/c/memory/realloc](http://en.cppreference.com/w/c/memory/realloc)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T14:58:01.197

您可以尝试检查动态数组，它基本上只存储指向目标项的指针数组。每次你想扩展数组时，你实际上只是重新分配这个指针数组并刷新指针。

# c# - 创建 Asp.Net MVC 模型时如何触发事件

> ID：11492841
> 
> 赞同：1
> 
> 时间：2012-07-15T14:45:05.813
> 
> 标签：c#, asp.net-mvc-3

我有 OrderModel 并且有一堆日期属性。我想在为新创建的 Order 设置 DateSubmitted 属性时触发一个事件，或者在这种情况下只是在创建新的 OrderModel 时触发一个事件。

所以我的模型我有以下

```
 public DateTime? DateSubmitted
        {
          get
          {
            return this.dateSubmitted;   
           }
          set
          {
            this.dateSubmitted = value;
            var args = new StatusChangedEventArgs();
            args.NewDate = value;
            this.OrderSubmitted(this, args);
          }
        } 
```

在控制器中我有这样的东西

```
 [HttpPost]
    public ActionResult New(OrderModel order, HttpPostedFileBase file)
    {
        order.DateSubmitted = System.DateTime.Now;
        db.SaveChanges();
        return RedirectToAction("MyOrders");
    } 
```

但是当我在控制器中设置断点并遍历代码时，它永远不会达到 DateSubmittedProperty 的设置操作，因此永远不会引发事件。我做错了什么还是有更好的方法来做到这一点？

# java - 将包装器数组转换为基元数组

> ID：11492842
> 
> 赞同：4
> 
> 时间：2012-07-15T14:45:16.013
> 
> 标签：java, reflection, wrapper, primitive

如果我有一个原始包装类实例的数组，我如何获得它们各自的原始数组？

```
Object toPrimitiveArray(Object[] wrappedArray) {
    return ?;
}

Object primitiveArray = toPrimitiveArray(new Integer[] { 1, 2, 3 }); 
```

在上面的示例中，我想`toPrimitiveArray()`返回一个`int[]`包含`int`值`1`、`2`和`3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:47:44.747

问题是您的方法无法知道数组包含什么类型的 Number，因为您仅将其定义为 Object 数组，没有进一步的信息。所以不可能在不失去编译时类型安全的情况下自动生成原始数组。

您可以使用反射来检查对象类型：

```
if(obj instanceof Integer) {
    //run through array and cast to int
} else if (obj instanceof Long) {
    //run through array and cast to long
} // and so on . . . 
```

但是，这很丑陋，并且不允许编译器检查代码中的类型安全性，因此增加了出错的机会。

您可以切换到使用数字对象列表而不是数组吗？然后你可以使用类型参数（泛型）来保证类型安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:52:20.687

这个怎么样：

```
int[] toPrimitiveArray(Integer[] wrappedArray) {
  int[] array = new int[wrappedArray.length];
  for(int i = 0; i < wrappedArray.length; i++)
    array[i] = wrappedArray[i].intValue();
  return array;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T14:53:31.590

试试这个....

**遍历 WrappedArray 中的每个元素并将其转换为原始 int**

```
class Test {

     public int[] toPrimitiveArray(Object[] wrappedArray) {

         int i = 0;
         int[] arr = new int[wrappedArray.length];

           for ( Object w : wrappedArray){

               arr [i] = (Integer) w;
                       i++;
           }

            return arr;
        }

        public static void main(String[] args){

            int[] a = new Test().toPrimitiveArray(new Integer[] { 1, 2, 3 });

            for (int b : a){

                System.out.println(b);
            }
        }

    } 
```

**编辑：**

如果您需要将所有 Wrapper 类型转换为其各自的原始类型..

您需要使用`instanceof`了解 Wrapper 类型，然后将其转换为各自的原语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T16:45:00.177

这个答案已经很晚了，但希望它可以帮助未来的访问者解决这个问题。我对反射解决方案的看法可以改进，但基本思想是这样的：

```
@SuppressWarnings("unchecked")
private static <TArray, TElement> TArray toArray(final Object elements, final Class<TElement> elementType)
{
  final int length = java.lang.reflect.Array.getLength(elements);
  final Object resultArray = java.lang.reflect.Array.newInstance(elementType, length);

  for (int i = 0; i < length; ++i)
  {
    final Object value = java.lang.reflect.Array.get(elements, i);

    java.lang.reflect.Array.set(resultArray, i, value);
  }

  return (TArray)resultArray;
} 
```

然后使用如下：

```
final Boolean[] booleans = new Boolean[] { true, false, true, true, false };
final boolean[] primitives = toArray(booleans, boolean.class);

System.out.println(Arrays.asList(booleans));

for (boolean b : primitives)
{
  System.out.print(b);
  System.out.print(", ");
} 
```

这打印出来：

```
[true, false, true, true, false]
true, false, true, true, false, 
```

该实用程序帮助我们将数组拉出`java.sql.Array`，因为`java.sql.Array`只为我们`Object`提供了数组。

# ruby - pkg-config 中的项目因变量

> ID：11492843
> 
> 赞同：1
> 
> 时间：2012-07-15T14:45:18.667
> 
> 标签：ruby, pkg-config

我正在尝试帮助 Ruby 人员让代码在 AIX 上再次运行。Ruby 人正在尝试使用 pkg-config 来帮助用户编写模块。在 AIX 上，模块的最后一个链接需要指定入口点。在 Ruby 中，约定是将该入口点命名为 Init_foo，其中“foo”是要添加的模块。因此他们需要添加一个标志：-eInit_foo

但是由于 Init_foo 不是一个常数，当 ruby​​.pc 文件被提供给 pkg-config 时，pkg-config 会出错。我看不到在 pkg-config 文件中包含依赖于目标的变量的方法。

我想我会在这里问这个问题如何解决。

# c# - 是否可以在 asp:ListView 中定义两个项目模板？

> ID：11492850
> 
> 赞同：1
> 
> 时间：2012-07-15T14:46:04.217
> 
> 标签：c#, asp.net, .net

是否可以在列表视图中执行以下操作？如果不。请纠正我。

```
 <asp:ListView runat="server" ID="lsit">
    <LayoutTemplate>
        <div id="banner">
            <div id="paginate-slider2" class="banner_nav">
                <asp:PlaceHolder runat="server" ID="itemPlaceHolder1" />
            </div>
            <div id="slider2">
                <asp:PlaceHolder runat="server" ID="itemPlaceHolder2" />
            </div>
            <script src="/scripts/banner.js" type="text/javascript"></script>
        </div>
        <div class="clear"></div>
    </LayoutTemplate>
    <ItemTemplate>
        <a href="#" class="toc">
            <img src="./images/gallery/thumbnails/thumb1.gif" alt="" />
        </a> 
    </ItemTemplate>
    <ItemTemplate>
        <div class="contentdiv banner_sec">
            <div class="con_img">
                <img src="./images/gallery/images/img1.gif" alt="" />
            </div>
            <div class="con_desc">
                <h3>Featured</h3>
                <h5>Lorem ipsum dolor sit amet</h5>
                <p>
                    Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed elit.
                </p>
                <br />
                <a href="./detail.html" class="buttontwo"><span>Read More</span></a>
            </div>
        </div>
    </ItemTemplate>
</asp:ListView> 
```

更新：我想输出这样的东西；

```
<!-- Home Banner Section -->
<div id="banner">
    <div id="paginate-slider2" class="banner_nav">
        <!-- this should be repeated for each item -->

        <a href="#" class="toc">
            <img src="./images/gallery/thumbnails/thumb1.gif" alt="" />
        </a> 
    </div>
    <div id="slider2">
        <!-- this should be repeated for each item -->
        <div class="contentdiv banner_sec">
            <div class="con_img">
                <img src="./images/gallery/images/img1.gif" alt="" />
            </div>
            <div class="con_desc">
                <h3>Featured</h3>
                <h5>Lorem ipsum dolor sit amet</h5>
                <p>
                    Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Sed elit. Nulla sem risus, vestibulum in, volutpat eget, dapibus ac, lectus. Curabitur dolor sapien, hendrerit non, suscipit bibendum, auctor ac, arcu. Vestibulum dapibus. Sed pede lacus, pretium in, condimentum sit amet, mollis dapibus, magna. Ut bibendum dolor nec augue. Ut tempus luctus metus. Sed a velit. Pellentesque at libero elementum ante condimentum sollicitudin. Pellentesque lorem ipsum, semper quis, interdum et, sollicitudin eu, purus. Vivamus fringilla ipsum vel orci.
                </p>
                <br />
                <a href="./detail.html" class="buttontwo"><span>Read More</span></a>
            </div>
        </div>
    </div>
    <script src="/scripts/banner.js" type="text/javascript"></script>
</div>
<div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T15:04:36.340

> 是否可以在 asp:ListView 中定义两个项目模板？

是的，这是可能的。 [阅读这篇文章](http://msdn.microsoft.com/en-us/magazine/cc500643.aspx#S5)（当我正确格式化代码后，我会在此处发布代码，以免丢失）。

学分：

Dino Esposito 是一名 IDesign 架构师，也是 Programming ASP.NET 3.5 Core Reference 的作者。Dino 常驻意大利，经常在全球行业活动中发表演讲。您可以通过cutting@microsoft.com 与他联系，或通过[weblogs.asp.net/despos](http://mailto%3acutting@microsoft.com)加入他的博客。

## 多个项目模板

ListView 控件通过循环遍历数据源并应用以下算法来生成其标记。首先，它检查是否需要项目分隔符。如果是这样，它会实例化模板并创建数据项对象。数据项对象是项模板的容器，携带了项在视图中的索引和绑定的数据源的信息。实例化项目模板时，会触发 ItemCreated 事件。下一步是数据绑定。完成后，将触发 ItemDataBound 事件。

如您所见，没有可以处理的公共事件允许以编程方式更改每个项目的模板。您可以在 Init 或 Load 页面事件中更改模板，但这适用于所有绑定项目。如果您处理 ItemCreated 并在那里设置 ItemTemplate 属性，则更改将影响下一个项目，但不会影响当前正在处理的项目。您将需要一个 ItemCreating 事件，但 ListView 控件不会触发此类事件。然后，解决方案是创建您自己的 ListView 控件，如图 6 所示。

图 6 触发 ItemCreating 事件

```
namespace Samples.Controls
{
  public class ListViewItemCreatingEventArgs : EventArgs
  {
    private int _dataItemIndex;
    private int _displayIndex;

    public ListViewItemCreatingEventArgs(int dataItemIndex,
                                         int displayIndex) {
      _dataItemIndex = dataItemIndex;
      _displayIndex = displayIndex;
    }

    public int DisplayIndex {
      get { return _displayIndex; }
      set { _displayIndex = value; }
    }

    public int DataItemIndex {
      get { return _dataItemIndex; }
      set { _dataItemIndex = value; }
    }
  }

  public class ListView : System.Web.UI.WebControls.ListView
  {
    public event EventHandler<ListViewItemCreatingEventArgs>
                                               ItemCreating;

    protected override ListViewDataItem CreateDataItem(int
                           dataItemIndex, int displayIndex) {
      // Fire a NEW event: ItemCreating
      if (ItemCreating != null)
        ItemCreating(this, new ListViewItemCreatingEventArgs
                             (dataItemIndex, displayIndex));

      // Call the base method
      return base.CreateDataItem(_dataItemIndex, displayIndex);
    }
  }
} 
```

通过覆盖 CreateDataItem 方法，您有机会在项目模板被实例化之前运行您的代码。CreateDataItem 方法在 ListView 类中被声明为受保护的和虚拟的。正如您在图 6 中看到的，方法覆盖非常简单。您首先触发自定义 ItemCreating 事件，然后通过调用基本方法继续。

ItemCreating 事件将几个整数传回给用户代码——数据源中项目的绝对索引和特定于页面的索引。例如，对于大小为 10 的页面，当 ListView 正在渲染第二页的第一项时，dataItemIndex 包含 11 个项目，而 displayIndex 包含 1 个项目。为了使用新的 ItemCreating 事件，只需在自定义 ListView 控件上声明方法和处理程序，如以下代码所示：

```
<x:ListView runat="server" ID="ListView1" 
   ItemPlaceholderID="itemPlaceholder"
   DataSourceID="ObjectDataSource1"
   OnItemCreating="ListView1_ItemCreating">
   <LayoutTemplate>
      <div>
         <asp:PlaceHolder runat="server" ID="itemPlaceholder" /> 
      </div>
   </LayoutTemplate>
</x:ListView> 
```

在您的代码中，您可以像这样处理事件：

```
void ListView1_ItemCreating(
     object sender, ListViewItemCreatingEventArgs e)
{
    string url = "standard.ascx";
    if (e.DisplayIndex % DataPager1.PageSize == 0)
        url = "firstItem.ascx";

    ListView1.ItemTemplate = Page.LoadTemplate(url);
} 
```

在这里，使用两个不同的用户控件来呈现数据项。具体的用户控件由显示索引决定。除了第一个项目外，所有项目都共享相同的模板。图 7 显示了正在运行的页面。

当您考虑常见现实世界页面的复杂性时，这个解决方案显得过于简单。通常，您需要根据要显示的内容使用不同的模板。您需要进一步增强自定义 ListView 控件以更改数据绑定过程中的项模板。查看图 8 中的代码。

图 8 根据内容选择模板

```
namespace Samples.Controls
{
  public class ListViewItemCreatingEventArgs : EventArgs
  {
    private int _dataItemIndex;
    private int _displayIndex;

    public ListViewItemCreatingEventArgs(int dataItemIndex,
                                         int displayIndex) {
      _dataItemIndex = dataItemIndex;
      _displayIndex = displayIndex;
    }

    public int DisplayIndex {
      get { return _displayIndex; }
      set { _displayIndex = value; }
    }

    public int DataItemIndex {
      get { return _dataItemIndex; }
      set { _dataItemIndex = value; }
    }
  }

  public class ListView : System.Web.UI.WebControls.ListView
  {
    public event EventHandler<ListViewItemCreatingEventArgs>
     ItemCreating;

    private int _displayIndex;
    private bool _shouldInstantiate = false;

    protected override void InstantiateItemTemplate(Control container,
     int displayIndex) {
      if (_shouldInstantiate) {
        base.InstantiateItemTemplate(container, displayIndex);
        _shouldInstantiate = false;
      }
    }

    protected override ListViewDataItem CreateDataItem(int
     dataItemIndex, int displayIndex) {
      // Fire a NEW event: ItemCreating
      if (ItemCreating != null)
        ItemCreating(this, new
          ListViewItemCreatingEventArgs(dataItemIndex,
          displayIndex));

      // Cache for later
      _displayIndex = displayIndex;

      // Call the base method
      return base.CreateDataItem(_dataItemIndex, displayIndex);
    }

    protected override void OnItemCreated(ListViewItemEventArgs e) {
      base.OnItemCreated(e);

      // You can proceed with template instantiation now
      _shouldInstantiate = true;
      InstantiateItemTemplate(e.Item, _displayIndex);
    }
  }
} 
```

CreateDataItem 方法触发 ItemCreating 事件并缓存显示索引以供以后使用。此外，还重写了 InstantiateItemTemplate 方法以延迟实际的模板实例化。私有布尔标志用于该目的。如前所述，ListView 在实例化项目模板后开始数据绑定过程。

然而，在图 8 中的代码所示的实现中，在触发 ItemCreated 事件之前，没有真正实例化任何项模板。当引发 ItemCreated 事件时，数据项对象通过 DataItem 属性绑定到 ListView 项容器。通过在代码中处理 ItemCreated 事件，您可以根据绑定的数据项决定使用哪个项目模板，如下所示：

```
protected override void OnItemCreated(ListViewItemEventArgs e)
{
   base.OnItemCreated(e);

   _shouldInstantiate = true;
   InstantiateItemTemplate(e.Item, _displayIndex);
} 
```

在这种情况下，基本方法会触发页面的 ItemCreated 事件。之后，自定义 ListView 控件重置布尔标志并调用方法来实例化项模板。最后，项目模板的实例化时间比内置 ListView 控件稍晚，但您可以在查看绑定数据项的内容后，在 ItemCreated 事件处理程序中以编程方式为每个项目设置 ItemTemplate 属性（见图9）。图 10 显示了一个示例页面，其中蓝色模板用于男性，粉红色模板用于女性。

图 9 设置项目模板

```
void ListView1_ItemCreated(object sender, ListViewItemEventArgs e)
{
    // Grab a reference to the data item
    ListViewDataItem currentItem = (e.Item as ListViewDataItem);
    Employee emp = (Employee) currentItem.DataItem;
    if (emp == null)
        return;

    // Apply your logic here
    string titleOfCourtesy = emp.TitleOfCourtesy.ToLower();
    string url = "forgentlemen.ascx";
    if (titleOfCourtesy == "ms." || titleOfCourtesy == "mrs.")
        url = "forladies.ascx";

    // Set the item template to use
    Samples.ListView ctl = (sender as Samples.Controls.ListView);
    ctl.ItemTemplate = Page.LoadTemplate(url);
} 
```

# ios - 是否可以在 UITextField 中使用 NSMutableString 来优化文本设置？

> ID：11492851
> 
> 赞同：0
> 
> 时间：2012-07-15T14:46:09.070
> 
> 标签：ios, optimization, uitextfield, nsmutablestring, settext

Instruments Time Profiler 的使用表明`UITextField`'`text`属性的设置在我的应用程序中非常昂贵，因此我想以某种方式对其进行优化。我认为改变现有的 text/`NSString`可能比`NSString`每次都设置一个新对象要快，所以我尝试了以下方法：

```
@interface MutableTextField : UITextField

- (NSMutableString*) mutableText;

@end

@implementation MutableTextField

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

    if (self) {
        self.text = [NSMutableString stringWithFormat:@""];
    }

    return self;
}

- (NSMutableString*) mutableText {
    return (NSMutableString*)self.text;
}

@end 
```

这个想法是您将执行以下操作而不是设置新字符串：

```
[textField.mutableText replaceCharactersInRange:textRange withString:newText]; 
```

我很快发现这行不通，因为该`text`属性列在`UITextField`as 中`@property(nonatomic, copy) NSString *text`。**复制**修饰符意味着我为文本设置的`NSMutableString`被复制（作为不可变的`NSString`）然后设置 - 这意味着我实际上无法为`UITextField`.

任何人都可以看到解决这个问题的方法吗？还是我卡住了？如果这根本无法实现，那么还有其他方法可以优化 a`UITextField`的文本设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:52:23.767

在我看来，这听起来像是*过度优化*的经典案例。您是否真的分析过代码并发现它的性能很差？

设置一个新字符串最可能比替换一个子字符串**要快**，因为替换一个子字符串需要（根据定义）找到原始子字符串。

我的猜测是您提出的更改实际上会*降低*性能。

# css - Chrome 开发者工具检查器没有显示扩展样式表，即使它们正在被应用

> ID：11492852
> 
> 赞同：0
> 
> 时间：2012-07-15T14:46:29.477
> 
> 标签：css, google-chrome-devtools

在扩展的清单文件中，我有：

```
 "css": ["mycss.css"], 
```

在 mycss.css 中，我有：

```
body {
    color: red;
} 
```

在扩展程序运行的页面上，**我可以看到正在应用红色**。但是，检查元素不会显示来自扩展的“颜色”。我只看到，对于任何元素，页面都拥有 CSS。

如果我禁用扩展，红色就会消失。所以AFAICT我不是疯了。

如何让 Chrome 准确显示样式的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:02:13.823

Chrome 错误：[http ://crbug.com/132425](http://crbug.com/132425)

这应该在 Chrome 22 (http://trac.webkit.org/changeset/120600) 中得到修复。

# python - 如何在 Python 中使用正则表达式从文本中提取信息？

> ID：11492857
> 
> 赞同：-2
> 
> 时间：2012-07-15T14:47:40.553
> 
> 标签：python, regex, text-formatting

我有以下输入。我想将其解析为 CSV 分隔的字符串。我可以通过正则表达式模式获取 SKU，但由于我是正则表达式解析的新手，所以我不知道复杂的模式。如果有人可以帮助我，那就太好了。

谢谢！

```
 charset="iso-8859-1"

BODY {

}

TD {

}

TH {

}

H1 {

}

TABLE,IMG,A {

}

**PO Number:** 35102

**Ship To:**  

Georgie Clements

6902 Stonegate Drive

Odessa, TX 79765

432-363-8459

SKU

Product

Qty

JJ-Rug-Zebra-PK

Zebra Pink Rug

1

JJ-Zebra-PK-Twin-4

Zebra Pink 4 Piece Twin Comforter Set

1

JJ-TwinSheets-Zebra-PK

Zebra Pink 3 Piece Twin Sheet Set

1

JJ-Memo-Zebra-PK

Zebra Pink Memory Board

1 
```

我希望它的格式如下：

```
PONumber, Shipping info, SKU, Product, Qty
'35102', '[ShipToAddress]', 'JJ-Rug-Zebra-PK', 'Zebra Pink Rug', '1'
'35102', '[ShipToAddress]', 'JJ-Zebra-PK-Twin-4', 'Zebra Pink 4 Piece Twin Comforter Set', '1'
'35102', '[ShipToAddress]', 'JJ-TwinSheets-Zebra-PK', 'Zebra Pink 3 Piece Twin Sheet Set', '1'
'35102', '[ShipToAddress]', 'JJ-Memo-Zebra-PK', 'Zebra Pink Memory Board', '1' 
```

当前代码如下：

```
pattern = re.compile(r'(\b\w*JJ-\S*)') 

pos = 0 
    while True: 
        match = pattern.search(msgStr, pos) 
        if not match: 
            break 
        a = match.start() 
        e = match.end() 
        print ' %2d : %2d = %s' % (a, e-1, msgStr[a:e]) 
        pos = e 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:25:53.387

根据评论，与正则表达式解决方案相比，这种输入数据更适合状态解析方法。某些行表明解析状态应该更改以捕获一组新数据。

理想情况下，首先您会看到这个数据源是否以 JSON 格式提供，而不是我认为的 HTML 网页抓取。拥有 JSON 源将使这个过程变得微不足道，因为数据已经是对象格式。

如果您唯一的选择是使用此逐行源代码，则最好使用[pyparsing 之](http://pyparsing.wikispaces.com/)类的东西，或者如果认为这对您的需求来说太过分了，您可以遍历这些行并检查每一行以查看是否您应该开始或停止收集一种数据，直到下一个令牌。

作为最后的手段，您可以在整个输入上运行多个正则表达式模式。您必须在整个输入上运行它的原因是因为您的数据跨行。用于捕获 SKU/产品/数量的基本正则表达式可能是：

```
re.findall(r'(JJ-[\w-]+)\n+(.*?)\n+(\d+)\n', dataStr)
#[('JJ-Rug-Zebra-PK', 'Zebra Pink Rug', '1'),
# ('JJ-Zebra-PK-Twin-4', 'Zebra Pink 4 Piece Twin Comforter Set', '1'),
# ('JJ-TwinSheets-Zebra-PK', 'Zebra Pink 3 Piece Twin Sheet Set', '1'),
# ('JJ-Memo-Zebra-PK', 'Zebra Pink Memory Board', '1')] 
```

这将找到包含这些模式的每 3 行并返回一个元组列表。我真的不推荐正则表达式方法，但它是一种选择。

其他正则表达式：

```
re.search(r'\*{2}PO Number:\*{2}\s(\d+)\n', dataStr)
#('35102',)

re.search(r'\*{2}Ship To:\*{2}\s+(.*?)\s+SKU', dataStr, re.DOTALL)
#('John Doe\n6902 Stonegate Drive\nOdessa, TX 79\n000-000-0000',) 
```

您可以看到您只需要为每一位数据构建单独的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T20:45:51.363

这是另一个解决方案，不使用正则表达式：

```
s = "(your data as a single multiline string)"

datalines = lambda s: [ln for ln in (line.strip() for line in s.splitlines()) if ln]

_, _, po_number, _, rem = s.split('**')
shipto, data = rem.split('SKU', 1)

po_number = datalines(po_number)[0]
shipto    = '\n'.join(datalines(shipto))
data      = datalines(data)[2:]

res = [[po_number, shipto, sku, prod, qty] for sku,prod,qty in zip(*([iter(data)]*3))] 
```

给出最终结果

```
[
    ['35102', 'Georgie Clements\n6902 Stonegate Drive\nOdessa, TX 79765\n432-363-8459', 'JJ-Rug-Zebra-PK', 'Zebra Pink Rug', '1'],
    ['35102', 'Georgie Clements\n6902 Stonegate Drive\nOdessa, TX 79765\n432-363-8459', 'JJ-Zebra-PK-Twin-4', 'Zebra Pink 4 Piece Twin Comforter Set', '1'],
    ['35102', 'Georgie Clements\n6902 Stonegate Drive\nOdessa, TX 79765\n432-363-8459', 'JJ-TwinSheets-Zebra-PK', 'Zebra Pink 3 Piece Twin Sheet Set', '1'],
    ['35102', 'Georgie Clements\n6902 Stonegate Drive\nOdessa, TX 79765\n432-363-8459', 'JJ-Memo-Zebra-PK', 'Zebra Pink Memory Board', '1'] 
```

**编辑：**第二个数据文件返回

```
[
    ['35104', 'Angelica Alvarado\n669 66th St.\nSpringfield, OR 97478\n5412322525', 'JJ-CribSheet-Cheetah-PK-PRT', 'Cheetah Pink Print Microsuede Crib Sheet', '1']
] 
```

哪个检查似乎是正确的？

* * *

**最终总结**：我发现他正在使用 html2text 将 html 电子邮件转换为文本，然后尝试解析它。解决方案是直接使用 BeautifulSoup 解析 html，利用页面结构来识别他想要的字段。

# java - Postgres 复制：我应该使用内置机制还是让中间件控制它？

> ID：11492860
> 
> 赞同：0
> 
> 时间：2012-07-15T14:47:52.843
> 
> 标签：java, postgresql, replication

对于我的一个宠物项目（已经超出预期），我需要添加某种形式的负载平衡和故障安全。该项目使用三层：

1.  前端（客户访问）
2.  中间件（提供前端和后端之间的通信）
3.  后端（业务逻辑、数据存储）

中间件是 Java servlet，后端是 PostgreSQL。每个客户都有一个数据库，因此一直有数据库来来去去。后端非常简单，因为每 24 小时导入一次新数据，其余时间基本上是只读的。

为了使整个系统更具弹性（对服务器故障、负载峰值等），我现在想将后端复制到其他服务器上。然后中间件可以将请求均匀地分发到所有正在运行的后端。

现在的问题是如何处理复制：

1.  让中间件完成所有工作（制作数据库转储，将该转储推送到其他后端服务器并恢复它）
2.  使用 Postgres 的内置机制（Slony、流复制等）

两种方式都有其优点和缺点，都没有感觉完全正确。我的主要想法是：

*   使用中间件将提供更大的控制，我可以更轻松地确定当前存在哪些客户并仅复制这些数据库。将新的后端服务器添加到集群会更容易。我可以按需进行复制，即。当此客户的新数据已导入时。正确处理 pg_dump 和 pg_restore 涉及相当多的开发工作
*   使用内置机制将节省一些工作，并且可能会表现得更好、更可靠。我需要在后端服务器（SSH、VPN）之间提供一些通信通道。

那么，这里有什么更好的方法？我倾向于喜欢中间件选项，但这可能是我对 Postgres 的经验非常有限。

额外的问题：如果 Postgres 复制是更好的选择，哪种机制（在 Postgres 9 中现在有很多）最适合我的方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:21:02.130

简短的回答，建立在现有解决方案之上。复制很难，很多聪明人已经完成了大部分工作。Slony、Londiste、Streaming Replication 都为您提供不同的功能，但它们都有一个共同点：它们确实有效。至于你选择哪个，这取决于你想要达到的目标。

流式复制将为您提供多个只读节点，这些节点仅略微落后于主节点（通常不明显）。它将消除应用架构更改的管理开销，它是二进制复制。但是，它是全有或全无复制（集群级别的复制）。设置起来并不是特别困难，只要您对所有服务器都有根访问权限。

Londiste/Slony 将让您更好地控制要复制的内容，让您控制到表级别。这可以很容易地添加只执行单个任务的节点 - 即，一个业务领域 - 这可能对您有用，也可能对您没有用。安装更复杂一些，模式迁移更复杂。使用 Londiste，您可以获得 PGQ，因此您现在在数据库中有一个消息队列，这对您业务的其他部分可能有用也可能没有用。

我刚刚设置了二进制流复制（一个热备用节点），因为我们的生产数据库最近出现了小问题，因此可以进行故障转移。它的工作原理以及它的最新程度给我留下了深刻的印象，我们还在考虑对这个节点的只读查询进行负载平衡。我对 Londiste 有过简短的体验，发现它有据可查，但我通常想要整个集群复制，所以热备用对我来说最有意义。

除了浪费时间/创建错误/给自己做比你需要的更多的工作之外，我看不到你自己做复制会得到什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:10:23.657

我同意 ocharles 的观点，即在这里重新发明轮子没有意义。但是，如果 pg_dump/pg_restore 可以为您完成，那将是一个非常好的设置。完全转储/恢复通常不适用于复制的原因是：

1.  数据库太大 - 完全转储/恢复需要太长时间。

2.  数据库太活跃 - 您需要保持副本是最新的。

如果这些对您来说不是问题，那么您的复制过程可能只是：

对于每个数据库...

1.  将“about to take backup at time T”插入到某个日志记录表中

2.  pg_dump 数据库

3.  将备份复制到一个或多个从站

4.  pg_restore

5.  从上面检查我们的时间戳插入是否存在于从站中

这很简单，可维护，并为您提供了很大的好处 - 每个活动数据库的每日、可归档、独立备份。

当然，如果您的数据库变得太大，或者需要每天更新一次以上，那么这对您不起作用*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T16:20:25.473

回答 OP 的后续问题——设置/配置 Londiste 非常简单。只需几个简单的步骤，您就可以在主数据库上添加任意表以进行复制，并将它们具体化到目标数据库（可以使用级联复制）。skytools 包中的 doc 文件夹中有多个操作方法，描述了不同的场景。

# c++ - 如何从 NPObject 获取关联的 NPP 实例

> ID：11492862
> 
> 赞同：0
> 
> 时间：2012-07-15T14:47:57.153
> 
> 标签：c++, npapi

因为我的插件需要使用 JavaScript 代码与同一页面上的其他插件交互：obj1.invokeWith(obj2)

在这个方法中，obj2 的一个 NPObject 对象被传递给 obj1。如何在 obj1 的方法中从这个 NPObject 中获取 obj2 的 NPP 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:18:43.147

简短的回答：你不能。

更长的答案实际上可能会帮助您做您想做的事情，尽管方式不同：

您无法以任何“批准”的方式获取该信息。您可能会找到某种方法将数据作为 void* 通过障碍传递并取消引用它或其他东西，但这是一个非常糟糕的主意，IMO。

如果您尝试访问您自己插件的另一个实例中的数据，那么只需使用全局 std::map （或类似的东西）并拥有一个 NPObject 方法，该方法为您提供访问 std::map 正确值的密钥. 当我这样做时，我只使用一个全局/静态 int 并递增它以给每个实例一个唯一的 id，然后我在 NPObject 上有一个属性或方法，可以从返回该 id 的另一个 NPObject 调用。您获取 id，在地图中查找实例，然后就可以走了。

许多现代浏览器实际上将您的 NPObject 包装在其他东西中，即使它被传递给您的插件的另一个实例，因此您无法从您获得的那个中获取原始 NPObject，您可以对其进行 NPRuntime 调用。我们过去可以使用 FireBreath 做到这一点，但它不再适用于不同的实例。

# python - 处理带有排队任务的列表。如何确保列表中的每个值都使用一次且仅使用一次？

> ID：11492864
> 
> 赞同：1
> 
> 时间：2012-07-15T14:48:05.450
> 
> 标签：python, google-app-engine, task-queue

我正在使用带有 python 的应用程序引擎

我在价值列表上每天都有任务要做。这些值存储在目标属性下的“项目”值中：

```
myproject1.targets=['foo','bar','foo2','bar2','foo3','bar3','foo4','bar4','foo5','bar5'] 
```

我的目标是将对 url 的调用排入队列：`url_to_my_worker`对于每个值，将值作为参数。

我的数据库中目前只有一个项目对象。

我运行 schedule_daily_projects_tasks 基本上为每个配置文件对象排队 schedule_daily_profile_tasks

```
class schedule_daily_projects_tasks(webapp.RequestHandler):
    def post(self):
        key=self.request.get('key')
        pro=project.get(key)
        profiles=my_profile.gql("WHERE project=:1",pro)
        logging.info(profiles)
        for profile in profiles:
            taskqueue.add(url='/control/schedule_daily_profile_tasks', params={'key': profile.key()}) 
```

然后为每个配置文件运行“schedule_daily_profile_tasks”。

```
class schedule_daily_profile_tasks(webapp.RequestHandler):
    def post(self):
        key=self.request.get('key')
        profile=my_profile.get(key)
        pro=profile.project
        for i in range(1, 6):
            now=datetime.now()
            tim=datetime(year=now.year, month=now.month, day=now.day, hour=8+i)
            screen_name=pro.targets.pop()
            taskqueue.add(url='/url_to_my_worker', params={'profk': key, 'screen_name':screen_name}, eta=tim)
            pro.put() 
```

假设我的数据库中有 5 个配置文件对象：profile1 到 profile5 所以如果一切顺利，我应该有 5 个任务排队到 url '/url_to_my_worker'，参数：

```
1) params={'profk': profile1.key(), 'screen_name':'bar5'}
2) params={'profk': profile2.key(), 'screen_name':'foo5'}
3) params={'profk': profile3.key(), 'screen_name':'bar4'}
4) params={'profk': profile4.key(), 'screen_name':'foo4'}
5) params={'profk': profile5.key(), 'screen_name':'bar3'} 
```

但相反，我得到：

```
1) params={'profk': profile1.key(), 'screen_name':'bar5'}
2) params={'profk': profile2.key(), 'screen_name':'bar5'}
3) params={'profk': profile3.key(), 'screen_name':'bar5'}
4) params={'profk': profile4.key(), 'screen_name':'bar5'}
5) params={'profk': profile5.key(), 'screen_name':'bar5'} 
```

我相信任务运行得太快了，所以 n°2 在 n°1 “弹出”之前就开始了。因此 myproject1.targets 具有相同的值。

如何确保列表中的每个值都使用一次且仅使用一次？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:12:40.640

您遇到的问题或多或少与您描述的一样：您已将多个任务排入队列，这些任务试图同时修改同一个数据存储对象。由于您不使用事务，因此多个任务最终会检索相同的数据，执行相同的操作，然后覆盖彼此的结果。

您可以使用数据存储事务来避免这种情况，但更好的解决方案是重组您的任务，以便只有一个任务正在修改每个数据存储实体。这样，您就无需担心同步或事务问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:30:31.307

您可能需要考虑将任务作为批处理添加：

```
targets=pro.targets
tasks=[]
...
  screen_name=targets.pop()
  tasks.append(taskqueue.Task(url='/url_to_my_worker', params={'profk': key, 'screen_name':screen_name}, eta=tim))
...
pro.put()
taskqueue.Queue().add(tasks) 
```

请注意，您可以通过创建将 max_concurrent_requests 指定为 1 的 queue.yaml 来避免特定队列上的任务同时运行：

```
queue:
- name: default
  max_concurrent_requests: 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:24:22.910

Python 带有一个内置的线程安全队列库模块。

[http://docs.python.org/library/queue.html](http://docs.python.org/library/queue.html)

> Queue 模块实现了多生产者、多消费者队列。当必须在多个线程之间安全地交换信息时，它在线程编程中特别有用。该模块中的 Queue 类实现了所有必需的锁定语义。这取决于 Python 中线程支持的可用性；请参阅线程模块。

您可以这样做，以便在调用 pop() 时，它只是阻塞，直到任何锁被释放。

编辑：链接的示例页面使用队列模块来完成它的工作。

```
import Queue
targets = ['foo','bar','foo2','bar2','foo3','bar3','foo4','bar4','foo5','bar5']
queue = Queue.LifoQueue() # Last in first out
for target in targets:
    queue.put(target)
myproject1.targets = queue
##########################
class schedule_daily_profile_tasks(webapp.RequestHandler):
    ....
    screen_name=pro.targets.get(block=true) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T22:49:25.010

如果您的项目记录中没有大量的配置文件元素：Schedule_daily_projects_tasks() 可以将您的所有配置文件元素连接到序列化字符串中。将该字符串作为参数传递给任务队列。每个任务进程从字符串中弹出一个元素，对其进行处理，如果没有发生异常，则使用较短的序列化字符串将任务排入队列。如果您正在对同一实体进行更新，请以两秒左右的时间延迟将任务排入队列。这也将有助于调节为处理任务队列而启动的实例数量，从而降低成本。

# c++ - 在 C++ 中的多重继承中调用构造函数中的基成员

> ID：11492869
> 
> 赞同：11
> 
> 时间：2012-07-15T14:48:53.703
> 
> 标签：c++, constructor, multiple-inheritance

假设我有这两个类

```
class base_size
{
public:
   int size()
   { return 5; }
};

class base_implement
{
public:
   base_implement(int s) : _vec(s)
   {
      cout << "size : " << _vec.size() << endl;
   }
private:
   vector<float> _vec;
}; 
```

如果我要从这两个类中继承，那么在另一个类的构造函数中调用其中一个类的成员函数可以吗？例如

```
class derived : 
   public base_implement,
   public base_size
{
public:
   derived() : base_size(), base_implement(size())
   {
      // Is this OK? 
      // If derived is not yet constructed can I access this->size() ?
      // Works in VC++. Not sure about other compilers.
   }
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T15:04:33.593

原则上没问题。基子对象和成员对象是在派生构造函数体运行之前构造的，因此您可以毫无问题地调用成员函数。你甚至可以在构造函数中调用*自己的*成员函数；您只需要确保它们不依赖于稍后在同一个构造函数中出现的任何内容。

只需确保以正确的顺序调用基本初始化程序，即它们的声明顺序，和/或修复您的类定义：因为`base_size::size()`您希望`base_size`完全构造子对象，所以它必须首先出现。

```
 class derived : base_size, base_implement
 {
     derived() : base_size(), base_implement(size()) { /* ... */ }
     // ...
 }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T15:07:12.720

您可以安全地从初始化列表中调用继承的成员函数，前提是该函数所做的任何事情都与该继承级别的成员数据的初始化方式无关。而且，因为`size()`不依赖任何成员数据，它所做的只是返回一个文字

```
int size()
{ return 5; } 
```

您的代码可以与任何编译器一起使用。所以甚至不需要`base_size()`在初始化列表中

```
derived() : base_size(), base_implement(size()) 
```

在这种情况下。

然而，切换到一个更现实的例子，其中有一个初始化实例变量（即成员数据）的构造函数，在初始化列表中`base_size`会更有意义：`base_size()`

```
class base_size
{
public:
   base_size ()
   { _size = 5; } // initialization

   int size()
   { return _size; }
private:
    int _size; // instance variable
};

class base_implement
{
public:
   base_implement(int s) : _vec(s)
   {
      cout << "size : " << _vec.size() << endl;
   }
private:
   vector<float> _vec;
};

class derived :
   public base_implement,
   public base_size
{
public:
   derived() : base_size(), base_implement(size())
   {
       // crash
   }
}; 
```

而且，在这个特定的例子中，程序会崩溃，因为`vector`不会收到一个有效的值来分配它的大小。原因是您在所谓的*base-specifier-list 中*拥有的基类的顺序：

```
public base_implement,
public base_size 
```

提到权威，这是[标准](http://cs.nyu.edu/courses/summer12/CSCI-GA.2110-001/downloads/C++%20Standard%202003.pdf)在第 12.6.2 节“初始化基础和成员”中所述的内容

> 初始化应按以下顺序进行：
> 
> *   首先，并且仅对于如下所述的最派生类的构造函数，虚拟基类应按照它们在基类的有向无环图的深度优先从左到右遍历中出现的顺序进行初始化，其中“左-to-right”是派生类基说明符列表中基类名称的出现顺序。
> *   **然后，直接基类应按照它们出现在 base-specifier-list 中的声明顺序进行初始化**（不管 mem-initializers 的顺序如何）。
> *   然后，非静态数据成员应按照它们在类定义中声明的顺序进行初始化（同样不管 mem-initializers 的顺序）。
> *   最后，执行构造函数的主体。

所以如果你要更换

```
public base_implement,
public base_size 
```

和

```
public base_size,
public base_implement 
```

这一切都会正确初始化，并且程序可以在大多数符合标准的编译器上正常运行。一方面，正如我刚刚测试的那样，肯定使用 MSVC 10.0。

# html - 如何使用 HTML 在 Jquery Mobile 中设置选定选项？

> ID：11492874
> 
> 赞同：0
> 
> 时间：2012-07-15T14:49:53.717
> 
> 标签：html, jquery-mobile, html-select

我有一个简单的**选择**元素，我将其设置为第一个选项。

```
<select name="hersteller_typSEL" id="hersteller_typSEL" data-theme="c">
    <option value="aktiv" selected="selected">#tx_sellerlist_available_sellers#</option>
    <option value="alle">#tx_sellerlist_all_sellers#</option>
</select> 
```

我第一次加载页面时，这有时会起作用......

如果我然后选择第二个选项并通过单击（**Firefox**）刷新按钮刷新页面，我总是将**第二个选项作为初始值**，这让我发疯......因为 selected="selected" 是正确的第一个选项，但 JQM 将第二个选项的测试放在 *ui-btn-text*

**问题**：
当页面重新加载时，如何在 JQM 中设置选定的选项？（我不是在谈论在 DOM 中返回/返回，我在浏览器（Firefox）中单击刷新，但我仍然得到错误的值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T14:55:46.017

根据文档 jquerymobile.com/demos/1.0a4.1/docs/forms/forms-selects.html，您需要`refresh`在代码中更新后调用 select 元素。

您还应该在页面加载时执行此操作。

# java - 将此模式推广到“n”行

> ID：11492880
> 
> 赞同：3
> 
> 时间：2012-07-15T14:51:16.500
> 
> 标签：java, loops, console

对于家庭作业，我需要帮助来概括打印以下模式的代码。

```
 A
  B C  
 D E F 
G H I J 
```

问题是对字母之间的空格进行编码。
这就是我想出的，但这只是模式的前 4 行。
（对不起，我的格式化技巧很差>.>）

```
int r = 65;
char m ;
int count=0;
for(int i = 4;i>0;i--)
{
    for( int j = i;j>0;j--)
        {System.out.print(" ");}
    for(int j = 4-i;j>=0;j--)
        {
             count++;
             m=(char)r;
             if(count == 3||count == 6||count == 8 || count == 11|| count == 13|| count ==15)
             {
                 System.out.print(" ");r--; 

             }
                 else
                     System.out.print(m);r++;
        }
    for(int j = 4-i;j>0;j--)
        {
            count++;m=(char)r;
            if(count == 3||count == 6||count == 8 || count == 11|| count == 13|| count ==15)
            {
                System.out.print(" ");r--;
            }
                    else
                        System.out.print(m);r++;
        }                                                                               
            System.out.println("");
} 
```

感谢 Gene 的解释，我做了一些编辑，这就是我想出的。

```
 int r = 65;
char m ;
for(int i = 4;i>0;i--)
    {
        for( int j = i;j>0;j--)
            {System.out.print(" ");}
        for(int j = 4-i;j>=0;j--)
    {
         m=(char)r;

            System.out.print(m+" ");
            r++;
    }
            System.out.println("");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:03:28.957

编写循环就是使用数学（通常是简单的数学）根据循环索引来描述一次迭代。

让我们`N`成为行数，`i=0,1,...N-1`它们的索引也是如此。

首先，您的示例显示该行`i`具有`N-i-1`前导空格。让我们检查一下。对于 row`i=N-1`我们得到零，对于`i=0`我们得到`N-1`. 在您的示例中，`i=0`情况是 3。这与绘图一致，所以我们看起来不错。

第二部分是每行有`i+1`字符。除了最后一个之外，所有的都有一个后续空格。最后一个有以下换行符。

最后，我们可以通过从 A 开始并在每次打印新字母时递增来获得正确的字母。

所以现在我们准备好编写代码了：

```
char ltr = 'A';
for (int i = 0; i < N; i++) {

  // Print the leading spaces.
  int nLeadingSpaces = N - i - 1;
  for (int j = 0; j < nLeadingSpaces; j++) 
    System.out.print(' ');

  // Print the letters for this row.  There are
  // i+1 of them. So print the first i with a following
  // space and the last one with a newline.
  for (int j = 0; j < i; j++) 
    System.out.print(ltr++ + " ");
  System.out.println(ltr++);
} 
```

这是未经测试的，但应该可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T15:01:53.010

您需要两个（嵌套）循环。

行号的外层。

行中位置的内部。

您需要在当前字符的循环之外定义一个变量。

在内循环开始时，根据 max line - current line number * const 写入空格（自己弄清楚 const ）。

在内循环中输出当前字符和一个空格。

在内循环结束时增加输出字符。

在外循环结束时，继续下一行。

# java - 关于 servlet 执行时的错误

> ID：11492881
> 
> 赞同：0
> 
> 时间：2012-07-15T14:51:19.783
> 
> 标签：java, tomcat, servlets

我已经使用 servlet 开发了以下应用程序，但是在输入用户名和密码后，我没有得到第二页..请告知...

第一个 servlet 是..

```
package Demo;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class SendRedirectServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doPost(HttpServletRequest request, HttpServletResponse
            response)throws ServletException, IOException {
          response.setContentType("text/html");
          PrintWriter pw = response.getWriter();
          String name = request.getParameter("username");
          String password = request.getParameter("password");
          if(name.equals("james")&& password.equals("abc")){
          response.sendRedirect("Demo/ValidUserServlet");
          }
          else{
          pw.println("u r not a valid user");
          }
          }
} 
```

第二个 servlet 是..

```
package Demo;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class ValidUserServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse
              response)throws ServletException, IOException {
              PrintWriter pw = response.getWriter();
              pw.println("Welcome to roseindia.net " + " ");
              pw.println("how are you");
            }

} 
```

login.html 文件是...

```
<html>

<head>
<title>New Page 1</title>
</head>

<body>

<form method="post" action="SendRedirectServlet">
  <p>Enter your name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
   <input type="text" name="username" size="20"/></p>
  <p>Enter your password&nbsp; <input type="text" name="password"
   size="20"/></p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;
  <input type="submit" value="Submit" name="B1"/></p>
</form>

</body>

</html> 
```

最后 web.xml 是..

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
  <servlet>
    <servlet-name>Zulfiqar</servlet-name>
    <servlet-class>Demo.SendRedirectServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Zulfiqar</servlet-name>
    <url-pattern>/SendRedirectServlet</url-pattern>
  </servlet-mapping>
  <servlet>
    <servlet-name>Hello</servlet-name>
    <servlet-class>Demo.ValidUserServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Hello</servlet-name>
    <url-pattern>/ValidUserServlet</url-pattern>
  </servlet-mapping>
</web-app> 
```

我得到第一页（http://localhost:9050/SendRedirect/Login.html）输入名称和密码，但点击提交按钮后，我得到以下错误..

```
INFO: Marking servlet Zulfiqar as unavailable
15 Jul, 2012 8:14:56 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet Zulfiqar
java.lang.ClassNotFoundException: Demo.SendRedirectServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
15 Jul, 2012 8:20:26 PM org.apache.catalina.core.StandardWrapperValve invoke
INFO: Servlet Zulfiqar is currently unavailable 
```

完成了建议的更改，但仍然出现此错误...

```
INFO: Marking servlet Zulfiqar as unavailable
15 Jul, 2012 9:11:48 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet Zulfiqar
java.lang.ClassNotFoundException: Demo.SendRedirectServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1136)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
15 Jul, 2012 10:06:42 PM org.apache.catalina.core.StandardWrapperValve invoke
INFO: Servlet Zulfiqar is currently unavailable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:06:13.657

`response.sendRedirect("Demo/ValidUserServlet");`

should be changed to

`response.sendRedirect("/ValidUserServlet");`

only this url pattern will invoke the servlet, as mentioned in your web.xml file part:

```
<servlet>     
    <servlet-name>Hello</servlet-name>     
    <servlet-class>Demo.ValidUserServlet</servlet-class>   
</servlet>   
<servlet-mapping>     
    <servlet-name>Hello</servlet-name>     
    <url-pattern>/ValidUserServlet</url-pattern>   
</servlet-mapping> 
```

But your error seems to come from the other servlet after pressing the Submit button right? Check whether the servlet class exitsts in the Demo folder in `WEB-INF/classes` as mentioned by Hardik.

Do a clean and rebuild of your project if you are running it from Eclipse. That fixed class not found errors for me most of the time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:16:57.450

首先，不鼓励在大写/标题中使用包名。始终使用小写字母来定义包名称。

二、变化

```
response.sendRedirect("Demo/ValidUserServlet"); 
```

至

```
response.sendRedirect("/ValidUserServlet"); 
```

应该按照您的`web.xml`.

Tomcat 有一些热部署问题，因此它有时无法加载实际存在于类路径中的类。

因此，请检查您的 tomcat 是否已加载新的 servlet 类。再次编译并发布 Web 项目。

```
java.lang.ClassNotFoundException: Demo.SendRedirectServlet 
```

检查你的目录结构。

是否`SendRedirectServlet`存在于`Demo`目录下`/WEB-INF/class/Demo/SendRedirectServlet`

# c++ - 如何使用 static_assert 检查派生类是否覆盖了非虚拟基类方法？

> ID：11492883
> 
> 赞同：1
> 
> 时间：2012-07-15T14:51:28.960
> 
> 标签：c++, templates, metaprogramming

一个例子：

```
template <typename TDerived>
struct Base
{
    void DoSomething()
    {
        if (static_cast<TDerived*>(this)->CheckSomeFlag())
        {
            std::cout << "true" << std::endl;
        }
        else
        {
            std::cout << "false" << std::endl;
        }
    }

    // Default implementation
    bool CheckSomeFlag()
    {
        return false;
    }
};

struct Derived : public Base<Derived>
{
    bool CheckSomeflag()
    {
        return true;
    }
};

int main(int argc, char** argv)
{
    Derived d;

    d.DoSomething();
    return 0;
} 
```

在这种情况下，程序打印“false”，因为程序员在 Derived::CheckSomeFlag() 的声明中有错字，并且 F 是小写的。我想在编译时使用像 OVERRIDE(x) 这样的宏来捕获这种情况，该宏扩展为 a`static_assert(is_member_of<Base, x>::value, "error");`但不确定完成此操作所需的模板技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T21:29:25.640

模板和宏的组合可以提供以下功能：

*   如果未在基类上声明类似的函数，则静态断言。
*   在派生类中声明函数。

使用这种方法，宏将定义一个类型特征模板，用于测试基类上特定成员函数的存在。当基类具有指定的成员函数时，特征的`value`成员将是`true`. 然后`value`在静态断言中使用类型特征的 。

```
#define TRAITNAME_HELPER( PREFIX, FN, LN )  PREFIX ## FN ## LN
#define TRAITNAME( FN, LN ) TRAITNAME_HELPER( has_fn, FN, LN )

#define OVERRIDE_IMPL( CLASS, RETURN_TYPE, FN, ARG_TYPES, LN )  \
  /* Type trait used to determine if                            \
   * RETURN_TYPE T::FN( ARG_TYPES ) exists. */                  \
  template < typename T >                                       \
  struct TRAITNAME( FN, LN )                                    \
  {                                                             \
    /* Type that expects a value for the specific type.  For    \
     * example, type_check< int, 4 >. */                        \
    template < typename U, U > struct type_check {};            \
                                                                \
    /* Use type_check expect a specific                         \
     * pointer-to-member-function on T. */                      \
    template < typename U >                                     \
    static std::true_type                                       \
    check( type_check< RETURN_TYPE (T::*)ARG_TYPES,             \
                       &U::FN >* = 0 );                         \
                                                                \
    template < typename U >                                     \
    static std::false_type check( ... );                        \
                                                                \
    /* Determine which check function was resolved for T. */    \
    typedef decltype( check< T >( 0 ) ) type;                   \
    static constexpr decltype(type::value) value = type::value; \
  };                                                            \
  static_assert( TRAITNAME( FN, LN )< CLASS >::value,           \
                 "" #RETURN_TYPE " " #FN #ARG_TYPES             \
                 " is not defined in " #CLASS "." );            \
  RETURN_TYPE FN ARG_TYPES
#define OVERRIDE( CLASS, RETURN_TYPE, FN, ARG_TYPES )           \
  OVERRIDE_IMPL( CLASS, RETURN_TYPE, FN, ARG_TYPES, __LINE__ ) 
```

*   OVERRIDE_IMPL 宏末尾缺少分号允许在类中声明或定义成员函数。
*   需要额外级别的宏来支持重载方法。它`__LINE__`用于创建独特的类型特征。

使用以下`Base`课程：

```
template < typename TDerived >
struct Base
{
  bool CheckSomeFlag();
  bool CheckSomeFlag(int, int);
}; 
```

如果`Dervied`类定义为：

```
struct Derived : public Base< Derived >
{
  OVERRIDE( Base< Derived >, bool, CheckSomeflag, () );
}; 
```

然后编译失败并出现以下错误（[demo](http://ideone.com/zVUfi)）：

`error: static assertion failed: "bool CheckSomeflag() is not defined in Base< Derived >."`

但是，当类型正确时，它将编译，如下[所示](http://ideone.com/ONmPq)：

```
struct Derived : public Base< Derived >
{
  OVERRIDE( Base< Derived >, bool, CheckSomeFlag, () );
  OVERRIDE( Base< Derived >, bool, CheckSomeFlag, (int a, int b) )
  {
    return ( a > b );
  }
};
bool Derived::CheckSomeFlag() { return true; } 
```

* * *

这种方法很快就会想到两个缺点：

*   返回类型必须完全匹配。如果没有一些额外的工作，这可以防止使用协变返回类型。但是，这可能是 CRTP 模式的理想行为。
*   宏语法掩盖了函数类型。例如，不能`bool(int,int)`用作返回 a`bool`并具有两个`int`参数的函数的类型，而是必须将其作为两个单独的参数传递给宏`( ..., bool, ..., (int, int) )`。这可以通过更改宏期望的参数顺序来缓解，但我选择了与函数的正常声明相匹配的顺序：`return-type identifier(args)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T15:59:55.527

这是 C++11 中的一个想法：

```
#include <iostream>
#include <type_traits>

struct Foo { void f() { } };
struct Bar : Foo { void f() { } };
struct Zip : Foo {              };

int main()
{
    std::cout << "Bar: " << std::is_same<decltype(&Bar::f), void(Foo::*)()>::value << std::endl
              << "Zip: " << std::is_same<decltype(&Zip::f), void(Foo::*)()>::value << std::endl
    ;
} 
```

这可能会变成静态断言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:00:03.967

这似乎给你一个编译时错误：

```
...
template <bool (TDerived::*TPointer)()> class Checker { };

void DoSomething()
{
    static Checker<&TDerived::CheckSomeFlag> foo;
... 
```

这个想法是（不幸的是，我不是模板专家）我只是试图访问 TDerived 中的 CheckSomeFlag 成员，编译器将无法用指向 Base 成员的指针替换它，因为继承只有效另一种方式（或者可能根本没有，我对非虚拟方法不太确定）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T15:20:32.563

你不能从代码中做到这一点。我建议查看一些静态分析工具，您可以使用它们来捕获常见（而不是那么常见）的程序员错误。他们有很多。一个例子： http: [//www.coverity.com/products/static-analysis.html](http://www.coverity.com/products/static-analysis.html)

这是一个常见的程序员错误，基类作者应该意识到这一点。请注意，如果您想提供默认实现但又想强制派生类程序员重写该方法以避免错误，您可以使用以下技巧使用纯虚拟声明：

```
class Base {
  public:
  virtual void foo() = 0;
};
// Did you know that you can still implement pure virtual functions? Neat!
void Base::foo() {
  // does something useful that might be applicable to most cases
}
class Derived : public Base {
  typedef Base superclass;
  public:
  void foo() {
    // I am forced to override foo
    // But author of Base kindly provided a default implementation
    superclass::foo();
  }
}; 
```

# javascript - koGrid - 如何以编程方式选择一行

> ID：11492884
> 
> 赞同：1
> 
> 时间：2012-07-15T14:51:47.513
> 
> 标签：javascript, knockout.js

有谁知道是否可以以编程方式选择基于 knockoutjs 的 koGrid 中的一行？如果是这样，它是如何完成的。

我想在 MVC 页面视图的初始布局期间预先选择一行。希望这也会触发网格的“选定项目”viewModel 属性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T08:38:52.083

您可以通过将项目添加到 SelectedItems（或 SelectedItem）对象来选择 koGrid 中的项目。
该项目必须与用作数据的集合中的项目相同。

例子：

```
<div data-bind="koGrid: {data: foo, selectedItems: selected}"></div> 
```

和一个虚拟机

```
var vm = {
    items = [1,2];
    selected = ko.observableArray();
}

vm.selected(vm.items); 
```

这应该会导致选择网格中的所有项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:30:58.407

我不确定这是否是选择项目的“正确”方式，因为它看起来像是在访问私有字段，但以下内容对我有用。

```
<div data-bind="koGrid: { data: itemsAvailable, selectedItems: itemsChecked}"></div>

itemsAvailable()[0].__kg_selected__(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T12:17:39.937

使用 div.kgRow 选择行

然后通过触发点击选择它 $(row).trigger('click');

# php - 提取 PHP 类方法 REFLECTION 值

> ID：11492886
> 
> 赞同：1
> 
> 时间：2012-07-15T14:51:50.260
> 
> 标签：php, reflection

我正在使用这样的默认参数测试 php 的反射...

```
class Test{

  public function testMethod($class,$methodName){
     // the returned values
     $data = array();

    // get the method of the class passed by params
    $funcHandler = new ReflectionMethod($class,$methodName);

    // iterates through the parameters to catch de default values
    foreach ($funcHandler->getParameters() as $param){
      // instance the params to get the properties for that method
      $paramDetail = new ReflectionParameter(array($class, $method),$param->name);
      // check if that param is or has a default value attached like (public function method($a,$b,$c = false, $d = null)
      $data[$param->name] = ($paramDetail->isDefaultValueAvailable) ? funcHandler->getDefaultValue : '';

        return $data;
      }
   }

//let's test the reflection with the method params...
class Foo{

    public function method1($a,$b,$c = false, $d = null, $e = 'hello'){
     // instance of the Test Class
     $obj = new Test();

     // calling the test method with this class and method names
     print_r($obj->testMethod(__CLASS__,__FUNCTION__));

    }

} 
```

问题在于“new ReflectionParameter(array($class, $method),$param->name);”这一行 执行“$data[$param->name] = ($paramDetail->isDefaultValueAvailable) 时？”表示没有 isDefaultValueAvailable 也没有 isOptional。

任何想法如何从类方法中提取可选参数？它似乎适用于功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:15:17.827

[ReflectionParameter](http://php.net/manual/en/class.reflectionparameter.php)类有一个isOptional [()](http://php.net/manual/en/reflectionparameter.isoptional.php)方法，它会告诉你参数是否可选（并且只有当它有默认值时才可以是可选的），如果是可选的，你可以调用[getDefaultValue()](http://php.net/manual/en/reflectionparameter.getdefaultvalue.php)提取默认值。

这是您的代码修补以使用它们：

```
<?php
class Test {

    public function testMethod($class,$methodName){
        // the returned values
        $data = array();

        // get the method of the class passed by params
        $funcHandler = new ReflectionMethod($class,$methodName);

        // iterates through the parameters to catch de default values
        foreach ($funcHandler->getParameters() as $param){
            // the new ReflectionParameter ... not needed, getParameters() already give you ReflectionParameter instances
            // check if that param (a ReflectionParameter instance) has a default value attached like (public function method($a,$b,$c = false, $d = null)
            $data[$param->name] = ($param->isOptional()) ? $param->getDefaultValue() : '';
        }
        return $data;
    }
}

//let's test the reflection with the method params...
class Foo{

    public function method1($a,$b,$c = false, $d = null, $e = 'hello'){
        // instance of the Test Class
        $obj = new Test();

        // calling the test method with this class and method names
        var_dump($obj->testMethod(__CLASS__,__FUNCTION__));

    }

}

$f = new Foo;
$f->method1('a', 'b'); 
```

输出：

```
array(5) {
  ["a"]=>
  string(0) ""
  ["b"]=>
  string(0) ""
  ["c"]=>
  bool(false)
  ["d"]=>
  NULL
  ["e"]=>
  string(5) "hello"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T05:10:20.987

isOptional 和 isDefaultValueAvailable 都是方法而不是属性。

# php - 模型文件中的 Joomla 组件错误

> ID：11492890
> 
> 赞同：1
> 
> 时间：2012-07-15T14:52:24.477
> 
> 标签：php, joomla, web

我正在尝试为 joomla 开发一个组件（我是初学者）并收到此错误：

`Parse error: syntax error, unexpected $end in /home/sharesaf/public_html/test/components/com_usersall/models/usersall.php on line 1`.

问题是我没有任何未闭合的括号。

这是代码

```
<?php
defined('_JEXEC') or die();
jimport('joomla.application.component.model');

class UsersallModelUsersall extends JModel{

    function getUsers(){
        $db =& JFactory::getDBO();
        $query = 'SELECT id,username FROM l08sx_users';
        $db->setQuery($query);
        $users = $db->loadAssocList();
        return $users;
    }
}
?> 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:23:24.327

您发布的代码很好 - 缺少的大括号必须在您在与组件相关的其他文件中添加/更改的代码中。检查您的视图，例如 view.html.php（可能还有 default.php）和控制器文件夹中的文件

# java - 区分键盘/鼠标事件和 Java Robot 事件

> ID：11492891
> 
> 赞同：0
> 
> 时间：2012-07-15T14:52:29.453
> 
> 标签：java, events, listener, awtrobot

在 Java 中，您可以侦听用户键盘/鼠标生成的键/鼠标事件。此外，Java 允许您使用 生成键/鼠标事件`java.awt.Robot`，并且这些事件可以由相同的侦听器捕获。如何区分用户键盘/鼠标生成的事件和`java.awt.Robot`. 我检查了`event.getSource()`，但似乎两者的事件源是同一帧。还有其他方法可以判断是哪个触发了事件吗？

**编辑：** 由于此问题已关闭（无法回答），并且副本不是答案。您可以通过在使用 Robot 生成事件之前设置一个标志（如果需要，可以使用多个标志）来检测您自己的应用程序生成的 Robot 事件，然后在侦听器中发生事件时检查它们，并在处理它们后让它们休息。这不是最好的方法，但它是可能的。我一直在寻找一种更好的方法，因为它与应用程序的上下文相同，但是关闭问题的人匆忙决定关闭问题:(

# php - 除非更改表名，否则无法在 Mysql 中插入数据

> ID：11492893
> 
> 赞同：0
> 
> 时间：2012-07-15T14:52:51.567
> 
> 标签：php, mysql

我是一个学习 php 的新手，这对我来说是一个奇怪的问题。

我创建了一个名为 order 的表，它只有 1 列：一个 int(1)（主键，自动增量）（它之前有更多列，我已经改变了结构，但这会是一个问题吗？）

当我尝试使用以下方法插入数据时：

```
$db=mysql_connect('localhost','root','');
mysql_select_db('workroom',$db);
$sql = "insert into abc values (null)";
mysql_query($sql,$db); 
```

db什么也没发生。

但是当我将表名“order”更改为“abc”（或任何其他名称，并更新 $sql）时，插入函数起作用。

有人可以帮我吗？非常感谢。

再次感谢，

肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:59:41.163

我对 PHP 还是很陌生，但我相信 order 是 MySQL 的命令。因此，要克服此错误，您需要在 TableName 周围包含 `` 或更改表名。

这可能对你有用。

```
$sql = "INSERT INTO `TableName` (value1, value2, value3) VALUES ('value1', 'value2', 'value3')"; 
```

仅供参考， `` 键在键盘上的“tab”键上方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T15:02:56.387

您必须在要使用的表上使用反引号，而不是简单地使用“订单”，以便 MySQL 将其识别为表而不是保留字：

```
$sql = "INSERT INTO `order` VALUES..."; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T15:05:50.707

不要使用表名 order，因为它是保留字。如果要使用 order，则只需添加引号 ``

```
$sql = "INSERT INTO `order` values(Your data); 
```

# java - Java - 备用 While 循环声明

> ID：11492895
> 
> 赞同：1
> 
> 时间：2012-07-15T14:53:04.637
> 
> 标签：java, loops, while-loop

我目前正在根据教科书开展一个项目，并且我在 while 循环中遇到了一个晦涩的问题。教科书的代码如下；

```
while(getImage().getWidth(applet) <= 0);
double x = applet.getSize().width/2 - width()/2;
double y = applet.getSize().height/2 - height()/2;
at = AffineTransform.getTranslateInstance(x, y); 
```

我从未见过最后用分号声明的 while 循环，所以我将我的代码解释为标准；

```
while(getImage().getWidth(applet) <= 0) {
    double x = applet.getSize().width/2 - width()/2;
    double y = applet.getSize().height/2 - height()/2;
    at = AffineTransform.getTranslateInstance(x, y);
} 
```

有人可以解释两者之间的区别吗？我将我的代码更改为像第一个一样，我的程序运行得很好，但是我不明白其中的区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:55:22.790

分号是一个空语句。您可以在评估`while`循环的继续条件有副作用时使用它：循环将产生一系列副作用，使循环条件在完成时无效，或者永远运行。

例如，如果`getImage()`每次调用时都为您获取一个新图像，则循环将继续，直到返回的图像具有宽度为`<= 0`.

下面是一个使用`while`循环查找`a`字符串中第一个字符的简单示例：

```
int pos = 0;
String s = "quick brown fox jumps over the lazy dog";
while (i != s.length() && s.charAt(i++) != 'a')
    ; 
```

由于阅读这样的代码可能会令人困惑，因此通常将分号放在单独的行上，缩进为循环语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T14:58:33.817

您的更改改变了代码的逻辑。的想法`while(getImage().getWidth(applet) <= 0);`是等到小程序宽度大小> 0。之后是其余的代码。（它可能会等待另一个进程来初始化小程序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T15:00:00.307

这是故意的；图像在后台进程中**异步加载，** [getWidth(ImageObserver)](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html#getWidth%28java.awt.image.ImageObserver%29)实际上询问图像是否已经可以提供宽度。这只是一个所谓的繁忙循环。第一个 getWidth 是 -1。

这是一种糟糕的编码风格，并且 getWidth 也可以知道 getHeigth 仍未完全读取的位置。

这源于互联网连接速度较慢的 Java 的第一个时期。

更好的是使用[ImageObserver](http://docs.oracle.com/javase/7/docs/api/java/awt/image/ImageObserver.html)回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T14:56:09.840

在第一个示例中，分号是 while 循环的结尾。有这样的单行循环有时很有用，但这也是一个常见的错误。

如果是故意的，那么看起来这段代码可能正在等待另一个线程来更改相关小程序的宽度。这不是做类似事情的好方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T14:58:20.493

这是一个无限循环。不确定是否错字，我会按照你的方式写。

我怀疑这是一个测试，看看你是否发现了错误，恭喜你做到了！

见：[http ://users.csc.calpoly.edu/~jdalbey/SWE/JavaPitfalls.html](http://users.csc.calpoly.edu/~jdalbey/SWE/JavaPitfalls.html)

# gnuplot - Gnuplot 网格格式 xtics mxtics

> ID：11492903
> 
> 赞同：8
> 
> 时间：2012-07-15T14:54:07.287
> 
> 标签：gnuplot

如何为主网格（xtics、ytics）定义一种格式，为次要网格（mxtics 和 mytics）定义另一种格式？

我试过了：

```
set style line 100 lt 1 lc rgb "gray" lw 2
set style line 101 lt 1 lc rgb "gray" lw 1
set grid xtics ytics ls 100
set grid mxtics mytics ls 101 
```

但这需要所有网格的最后定义的 lw (1)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-01T14:37:30.677

```
set style line 100 lt 1 lc rgb "gray" lw 2
set style line 101 lt 0.5 lc rgb "gray" lw 1

set grid mytics ytics ls 100, ls 101
set grid mxtics xtics ls 100, ls 101 
```

真的行 ：）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-07T15:39:18.300

`gnuplot`还将使用 . 在轻微抽动处绘制网格线`set grid mxtics mytics`。

要为主要网格线和次要网格线设置不同的线型，请使用正确的语法（用逗号分隔主要线型和次要线型）：

```
set style line 100 lt 1 lc rgb "blue" lw 2
set style line 101 lt 1 lc rgb "gray" lw 1
set grid mxtics mytics ls 100, ls 101 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T13:08:07.333

The minor tics mxtics and mytics are also drawn but with the same format than the main tics. And that is a problem when you want to differentiate them. Your solution with the arrows did the trick but I found it easier to first draw the minor ticks and than overwrite them with arrows for the main ones. Tanks.

```
set style line 100 lt 2 lc rgb "blue" lw 1
set style line 101 lt 1 lc rgb "gray" lw 1

# first draw the minor tics
set xrange [0:1]
set mxtics 10
set yrange [0:1]
set mytics 5
set grid mxtics mytics ls 101

# then the main tics
dx=0.2  #grid spacing in x
set for [i=1:5] arrow from graph i*dx,graph 0 to graph i*dx,graph 1 nohead front ls 100
dy=0.2  #grid spacing in y
set for [i=1:5] arrow from graph 0,graph i*dy to graph 1,graph i*dy nohead front ls 100

plot sin(x) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T23:42:31.037

在 gnuplot 中，网格仅绘制在主要 tic 标记的位置，但是，如果您想要有两个不同的网格，您可以使用箭头：

```
set style line 101 lt 1 lc rgb "gray" lw 1
dx=.1  #grid spacing in x
set for [i=1:10] arrow from graph i*dx,graph 0 to graph i*dx,graph 1 nohead front ls 101 
set xrange [0:1]
plot sin(x) 
```

# ios - GCD：如何检查任务是否正在运行

> ID：11492904
> 
> 赞同：2
> 
> 时间：2012-07-15T14:54:20.610
> 
> 标签：ios, objective-c, grand-central-dispatch

我正在使用以下代码运行任务，

```
mTimerForImageUpload = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);
if (mTimerForImageUpload) {
    dispatch_source_set_timer(mTimerForImageUpload, dispatch_time(DISPATCH_TIME_NOW, NSEC_PER_SEC * uploadCheckInterval), NSEC_PER_SEC * uploadCheckInterval, leeway);
    dispatch_source_set_event_handler(mTimerForImageUpload, ^{
        [self uploadData];
    });
    dispatch_resume(mTimerForImageUpload);
} 
```

基本上我希望同时只有一个运行该`uploadData`方法的实例。即，如果任务仍在运行，我不想运行新线程，而是想等到它完成。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:04:37.883

GCD 和块本身不支持这一点，但你可以让它工作。

您可以有一个可变集，其中块在开始时添加它们自己，并在它们完成时删除它们（即它们做的第一件事和最后一件事），或者转到更高的抽象（NSOperation）。

# 自己跟踪跑步积木

如果您将块本身（或它们正在上传的资源之类的唯一键）添加到可变集，那么您可以查询该集并查看该资源是否已被上传`[runningBlocksSet containsObject:myNewBlockForResoucreThatImAboutToUpload]`（抱歉，变量名称过长）。

# 用于`NSOperation`查看是否`isExecuting`

如果您在另一边选择使用 NSOperations 来进行上传，那么他们已经支持使用`[myUploadOperation isExecuting]`. 您还可以检查它是否已取消、已完成或是否已准备好（操作可能具有依赖关系，并且在它们所依赖的所有操作完成之前还没有准备好运行）。

# php - PHP Mysql CHECK 行是否存在 id

> ID：11492915
> 
> 赞同：0
> 
> 时间：2012-07-15T14:55:52.080
> 
> 标签：php, mysql

我的脚本正确吗？我想要的是检查 id 是否存在然后更新如果不存在然后插入。

```
$sqlCheckRow = mysql_query( "SELECT * FROM wctilerack WHERE gameID = '$up_gameID' " ) or die ( mysql_error() );
$rowCounted = mysql_num_rows( $sqlCheckRow );
if ( $rowCounted == '0' ) {
    // INSERT wctilerack
    $sqlTileINSERT = mysql_query( "INSERT INTO wctilerack VALUE('', '$up_gameID', '$up_email_player1', '$playerRack' ) ") or die ( mysql_error() );
} elseif ( $rowCounted == '1' ) {
    // INSERT wctilerack
    $sqlTileINSERT = mysql_query( "UPDATE wctilerack SET tiles = '$playerRack' WHERE gamedID = '$up_gameID'  ") or die ( mysql_error() );
} 
```

我测试了它的工作我只是想确认这个过程是否正确。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:58:01.303

你可以这样写

```
INSERT INTO wctilerack VALUES ('', '$up_gameID', '$up_email_player1', '$playerRack')
  ON DUPLICATE KEY UPDATE tiles='$playerRack'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T14:59:43.767

你也可以这样做

```
if (empty($rowCounted)) 
{
    $sqlTileINSERT = mysql_query( "INSERT INTO wctilerack VALUE('', '$up_gameID', '$up_email_player1', '$playerRack' ) ") or die ( mysql_error() );
}
else
{
    $sqlTileINSERT = mysql_query( "UPDATE wctilerack SET tiles = '$playerRack' WHERE gamedID = '$up_gameID'  ") or die ( mysql_error() );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T14:58:41.227

试试这个：：

```
INSERT into table values (vcolumn1, vcolumn2) on duplicate key update set column1=vcolumn1, column2=volumn2 
```

# vb.net - 从 VB.net 中的命令提示符读取文本

> ID：11492917
> 
> 赞同：0
> 
> 时间：2012-07-15T14:56:03.510
> 
> 标签：vb.net, qr-code, command-prompt

我最近发现了这个名为 zbarcam 的应用程序，它是一个命令提示符应用程序，可以从我的网络摄像头读取 QR 码。当我从命令提示符运行它时效果很好，它会在命令提示符中显示所有二维码文本。

现在我正在尝试将其功能集成到我的 VB.Net 项目中，但是，虽然我可以使用 StartInfo 加载应用程序，但我无法读取命令提示符中显示的二维码。

这是我正在使用的代码：

```
 Dim myprocess As New Process

  Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    With myprocess
      .StartInfo.FileName = "C:\Progra~2\ZBar\bin\zbarcam"
      .StartInfo.RedirectStandardOutput = True
      .StartInfo.UseShellExecute = False
      .Start()
    End With
    Timer1.Enabled = True
    Timer1.Start()
  End Sub

  Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    resultsTextBox.Text = myprocess.StandardOutput.ReadToEnd
  End Sub 
```

我想要做的是每秒检查一次命令提示符中文本的更改。但是，当我运行此代码时，命令提示符显示为黑色，当我将代码移到相机前时，尽管它检测到它（我可以在视频预览中看到 QR 码周围的绿色框），文本不显示在命令提示符中。

如果我将“ *.StartInfo.UseShellExecute* ”设置为 True 并注释“ *.StartInfo.RedirectStandardOutput = True* ”行并禁用计时器，则二维码开始显示在命令提示符中，但我无法阅读它们！

解决此问题的最佳方法是什么？理想情况下，我希望仅在有更改时从命令提示符读取，但如果无法做到这一点，那么下一个最好的方法是每秒轮询一次命令提示符并检查更改。

# html - 如何修复我的下拉菜单

> ID：11492921
> 
> 赞同：0
> 
> 时间：2012-07-15T14:56:58.843
> 
> 标签：html, css, drop-down-menu, menu

我正在尝试创建一个纯 CSS 下拉菜单。我需要你的帮助来解决一个让我无法继续的问题。这是源代码：[这是问题所在](http://pastebin.com/jKwisNM9)

我不知道如何解释我的问题，所以只需将鼠标悬停在“Podpunkt 4”上，您就会清楚地看到我想要摆脱什么。

# sql - 使用 SQLite 从 n 中查找连续行

> ID：11492932
> 
> 赞同：3
> 
> 时间：2012-07-15T14:58:28.337
> 
> 标签：sql, sqlite

我有这张表的值：

```
val  
1
2
3
7
8
9 
```

该表还有一个 id 列，现在不相关。

我想插入一个值，但规则是不能有任何重复的值。假设我插入了一个新的 2，当前的 2 应该变成 3，依此类推，直到值 3，这将变成 4。在这种情况下，值 7、8 和 9 不需要'移动'。

我正在使用**SQLite**。在所需的新值持有者被“移动”后，插入或更新部分可以在单独的查询中完成。

到目前为止，我正在这样做：

```
//being n my new value.
UPDATE values SET val = val+1 WHERE val >= n 
```

但这也会修改 7,8 和 9，不需要修改。

关于如何解决这部分问题的任何想法？将更新限制为仅连续值？

在一个查询中进行整个插入/更新的更好方法也将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:31:43.107

解决方案＃1 `LEFT JOIN`：

[http://sqlfiddle.com/#!5/7eeea/12](http://sqlfiddle.com/#!5/7eeea/12)

```
UPDATE t
SET val = val+1
WHERE val >= 2
  AND val <= (
    SELECT MIN(t1.val)
    FROM      t AS t1
    LEFT JOIN t AS t2 ON t1.val+1 = t2.val
    WHERE t1.val >= 2
      AND t2.val IS NULL
  ); 
```

解决方案#2 `NOT EXISTS`：

[http://sqlfiddle.com/#!5/7eeea/17](http://sqlfiddle.com/#!5/7eeea/17)

```
UPDATE t
SET val = val+1
WHERE val >= 2
  AND val <= (
        SELECT MIN(t1.val)
        FROM  t AS t1
        WHERE t1.val >= 2
          AND NOT EXISTS (SELECT 1 FROM t AS t2 WHERE t1.val+1 = t2.val)
  ); 
```

# iphone - 我怎样才能让我的导航栏看起来像这样？

> ID：11492938
> 
> 赞同：1
> 
> 时间：2012-07-15T14:59:21.917
> 
> 标签：iphone, ios

我正在查看自定义表格单元教程并找到了这个[站点](http://ios.biomsoft.com/2011/11/20/how-to-design-a-custom-uitableviewcell-from-scratch/)。我真的很喜欢带有蓝色光环的导航栏效果，但不知道如何实现这一点。

![在此处输入图像描述](../Images/cc89960a95a2e4f7d8f8d3f682325a81.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:04:00.380

他们可能有一个自定义图像作为背景，也有自定义图像按钮。这是一个很好的例子：http: [//designm.ag/tutorials/designing-a-custom-iphone-app-navigation-bar/](http://designm.ag/tutorials/designing-a-custom-iphone-app-navigation-bar/)如果您需要更多信息，请发表评论！希望这可以帮助！（这也不是图片中的风格，但[PrettyKit](https://github.com/vicpenap/PrettyKit)在这样的东西上很棒！）

# visual-studio-lightswitch - 在 Lightswitch 中添加通用代码的正确位置

> ID：11492939
> 
> 赞同：1
> 
> 时间：2012-07-15T14:59:27.203
> 
> 标签：visual-studio-lightswitch

我正在开发一个 Lightswitch 2012 绿地应用程序。我对 Lightswitch 很陌生，所以我的方法可能完全错误。

我有一个 UserProfile 表，它提供了额外的用户详细信息，并且我计划根据需要使用它来查询用户数据。我想添加一个为当前用户查找适当记录的通用方法。以下代码是内联的，我的一个屏幕需要使用此信息：

```
 UserProfile myProfile;
        {
            var profiles = this.DataWorkspace.ApplicationData.UserProfiles;
            string myDomainId = Application.User.Name;
            myProfile = (from profile in profiles.OfType<UserProfile>()
                         where profile != null && profile.DomainId == myDomainId
                         select profile).FirstOrDefault<UserProfile>();
            if (myProfile == null)
            {
                myProfile = profiles.AddNew();
                myProfile.DomainId = myDomainId;
            }
        } 
```

现在，这段代码在我的一个屏幕中的一个 onsave 例程中运行。我想将其重构为 GetCurrentUserProfile() 方法以供一般使用。我首先尝试将其放入应用程序中，但出现上下文错误。

放置该方法的正确位置在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T02:48:34.153

随着越来越多的新人开始希望以更高级的方式使用 LightSwitch，我开始发现自己一遍又一遍地解释同样的事情。这是一件很棒的事情，所以为了让它更容易一些，我将在我的**LightSwitch Central**站点中添加一些“操作方法”。

这是第一个：[如何重构在我的一个屏幕中使用的代码，以便可以在其他屏幕中使用它？](http://lightswitchcentral.net.au/Blog/tabid/83/EntryId/28/How-Do-I-Refactor-Code-That-Im-Using-In-One-Of-My-Screens-So-I-Can-Use-It-In-Other-Screens.aspx) 我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:41:52.317

请记住，如果您想对数据做一些事情，您必须将当前数据工作空间传递给新方法。

# android - 如何将静态处理程序与服务/活动一起使用？

> ID：11492941
> 
> 赞同：1
> 
> 时间：2012-07-15T14:59:32.810
> 
> 标签：android, service

因此显然`Handlers`应该声明为静态的，否则它们可能会泄漏其外部类（以及随之而来的应用程序上下文）。这显然限制了您可以使用`Handler`. 看一下这段代码：

```
public class MyService extends Service {

    private int counter;

    private static final Handler handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            // Increment counter here
        }

    };

    @Override
    public void onCreate() {
        super.onCreate();
        counter = 0;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        handler.sendEmptyMessage(0);
        return Service.START_STICKY;
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

} 
```

静态处理程序不能保存对服务的引用，因此简单的`counter++`内部`handleMessage()`将无法工作。有没有办法检查服务是否正在运行并获得对它的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:48:09.297

您可以使用[Wea​​kReference](http://developer.android.com/reference/java/lang/ref/WeakReference.html)来保护您的服务不被泄露。但实际上`Handler`在您的代码中看起来是多余的。两者`onCreate`和`onStartCommand`都是从 UI 线程调用的，因此您可以安全地增加您的值`counter`，而无需额外同步。

如果您确实需要`counter`从不同的线程访问，请使用[AtomicInteger](http://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger.html)而不是`int`它。它将比使用更简单`Handler`，您将获得更多性能。

# java - 使用 Parcelable 发送 StringArray 时出现 NullPointerException

> ID：11492942
> 
> 赞同：4
> 
> 时间：2012-07-15T14:59:38.990
> 
> 标签：java, android, android-intent, parcelable

我在发送带有可包裹对象的意图时遇到了奇怪的问题。这个对象有一个字符串数组。使用这个答案[如何使用 Intents 将对象从一个 Android Activity 发送到另一个？](https://stackoverflow.com/questions/2139134/how-to-send-an-object-from-one-android-activity-to-another-using-intents)我首先将我的对象创建为可打包的，然后发送它。这是我的代码片段：

```
 public class MyObject implements Parcelable{

    private String _title = null;
    private String[] _genre;
    private int _time = 0;
    private String _disc = null;

    private static final String TAG = "MyObject";

    public MyObject (String title, String[] genre, int time, String disc) {
        _title = title;
        _genre = genre;
        _time = time;
        _disc = disc;
    }

    public MyObject(Parcel source) {
            /*
             * Reconstruct from the Parcel
             */
            Log.v(TAG, "ParcelData(Parcel source): time to put back parcel data");
            _title = source.readString();
            try{
                source.readStringArray(_genre);
            }catch(Exception e){
                Log.e(TAG,e.toString());
            }
        _time = source.readInt();
        _disc = source.readString();
    }

    /*... Getters and setters and other stuff...*/

    @Override
    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        Log.v(TAG, "writeToParcel..."+ flags);
        dest.writeString(_title);
        dest.writeStringArray(_genre);
        dest.writeInt(_time);
        dest.writeString(_disc);
        Log.i(TAG,_genre[0]);
    }

    // this is used to regenerate your object. All Parcelables must have a CREATOR that implements these two methods
    public static final Parcelable.Creator<MyObject> CREATOR = new Parcelable.Creator<MyObject>() {
        public MyObject createFromParcel(Parcel in) {
            return new MyObject(in);
        }

        public MyObject[] newArray(int size) {
            return new MyObject[size];
        }
    };
} 
```

发送似乎没问题。

```
Intent displayInfo = new Intent(getApplicationContext(), MovieInfo.class);
                    displayInfo.putExtra(OBJECT, mySQLiteAdapter.getEntry(idSet));
                    startActivity(displayInfo); 
```

但是，当我试图获取这些数据时

```
Intent intent = getIntent();
        myParcel = (MyObject) intent.getParcelableExtra(FBM2Activity.OBJECT); 
```

**我从 readStringArray 得到 NullPointerException**。有谁知道我可能在哪里出错？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T15:31:07.407

使用`_genre = source.createStringArray()`.

这背后的原因是`readStringArray(String[] val)`期望`val`是一个`String[]`已经用正确数量的数组元素创建的。你这样做的方式`_genre`是`null`当你打电话时`source.readStringArray(_genre)`。

# .net - .NET 4.5 中的异步任务中的WhenAny 方法从不完成

> ID：11492943
> 
> 赞同：3
> 
> 时间：2012-07-15T14:59:39.557
> 
> 标签：.net, task-parallel-library, async-await

我正在尝试使用 VS2012RC 和 .NET 4.5 的 new`async`和`await`关键字，只使用一个返回字符串的简单委托，当我运行单个委托时效果很好：

`string message = await Task.Run(() => { return "something"; });`

但是当我尝试时`WhenAny`：

`string message = await Task.WhenAny(new Task<string>(() => { return "something"; })).Result;`

它只是永远不会完成......为什么？

我一直在观看来自 TechDays 2012 Netherlands 的 Steve Sanderson 的视频，这让这看起来非常简单：[http ://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2287](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2287)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:36:04.463

当您`Task`使用其构造函数创建一个时，它还没有启动。你必须打电话`Start()`才能真正启动它。

我认为你也应该`Task.Run()`在你的第二个版本中使用它，它会返回一个`Task`已经开始的版本。

`await`此外，将异步等待 ( ) 与同步等待 ( `Result`or )混合使用也是一个坏主意`Wait()`，因为[它会导致死锁](http://blogs.msdn.com/b/pfxteam/archive/2011/01/13/10115163.aspx)。

所以，我会把你的代码写成：

```
var task = await Task.WhenAny(Task.Run(() => "something"));
string message = await task; 
```

（当然，`Task.WhenAny()`当你只有一个时没有理由使用`Task`，但我假设这只是一个例子。）

# php - 在php中将数字转换为字符串

> ID：11492945
> 
> 赞同：1
> 
> 时间：2012-07-15T14:59:41.587
> 
> 标签：php

在下面我尝试`$code = (string)$code;`没有成功，如何在 PHP 中将数字转换为字符串？

```
$code = 087326487326;
$strlen = strlen($code);
print $strlen."<br/>";
for ($i = $strlen; $i >= 0; $i--) {
  print substr($code, 0, $i)."<br/>";
} 
```

输出：

```
1
0 
```

和

```
$code = '087326487326';
$strlen = strlen($code);
print $strlen."<br/>";
for ($i = $strlen; $i >= 0; $i--) {
  print substr($code, 0, $i)."<br/>";
} 
```

输出：

```
12
087326487326
08732648732
0873264873
087326487
08732648
0873264
087326
08732
0873
087
08
0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T15:02:16.153

It's failing because it's prefixed with a `0`, making PHP attempt to interpret it as an octal number, where `8` is not a valid octal digit as it parses the string, so you get `0`.

The solution is to use a `(string)` cast or [`strval()`](http://php.net/strval), but you need to remove the leading zero from your definition of `$code`.

```
$code = 87326487326;
var_dump( $code, (string) $code, strval( $code)); 
```

This will output (on an x64 machine):

```
int(87326487326) string(11) "87326487326" string(11) "87326487326" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T15:05:45.820

I Like this type juggling way, if you have.

```
$code = 087326487326; 
```

All you have to do to cast it to string is:

```
$code = "$code"; 
```

**EDIT**

Sorry, was a bit distracted, I tested it wrong. What was said above is true, leading zero's are a disaster. Way not remove it, and pad the number later?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-09T10:10:41.267

您可以使用以下函数转换为字符串：

```
strval($code); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-31T13:34:09.867

**你可以像这样使用类型转换吗**

```
 $code = (string)58963245874; 
```

*检查它你打印它的类型如下*

```
 echo gettype($code); 
```

# c++ - 编译器如何知道移动局部变量？

> ID：11492948
> 
> 赞同：9
> 
> 时间：2012-07-15T14:59:46.517
> 
> 标签：c++, c++11, move-semantics

我很好奇这个功能到底是如何工作的。考虑类似的东西

```
std::unique_ptr<int> f() { std::unique_ptr<int> lval(nullptr); return lval; } 
```

即使对于仅移动类型，此代码也可以正常编译，因为编译器会隐式移动它。但从逻辑上讲，对于任何返回表达式，确定结果是否引用局部变量将解决停机问题 - 如果编译器只是将所有局部变量视为返回表达式中的右值，那么这将是有问题的变量可以在一个表达式中多次引用。即使本地只有一个*直接*引用，您也无法证明它没有其他间接别名。

那么编译器如何知道何时从返回表达式中移动呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T15:06:47.693

There's a simple rule: If the conditions for copy elision are met (except that the variable may be function parameter), treat as rvalue. If that fails, treat as lvalue. Otherwise, treat as lvalue.

`§12.8 [class.copy] p32`

> When the criteria for elision of a copy operation are met or would be met save for the fact that the source object is a function parameter, **and the object to be copied is designated by an lvalue, overload resolution to select the constructor for the copy is first performed as if the object were designated by an rvalue**. If overload resolution fails, or if the type of the first parameter of the selected constructor is not an rvalue reference to the object’s type (possibly cv-qualified), overload resolution is performed again, considering the object as an lvalue. [ *Note:* This two-stage overload resolution must be performed regardless of whether copy elision will occur. It determines the constructor to be called if elision is not performed, and the selected constructor must be accessible even if the call is elided. *—end note* ]

Example:

```
template<class T>
T f(T v, bool b){
  T t;
  if(b)
    return t; // automatic move
  return v; // automatic move, even though it's a parameter
} 
```

Not that I personally agree with that rule, since there is no automatic move in the following code:

```
template<class T>
struct X{
  T v;
};

template<class T>
T f(){
  X<T> x;
  return x.v; // no automatic move, needs 'std::move'
} 
```

See also [this question of mine](https://stackoverflow.com/q/9183087/500104).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T15:10:16.817

该标准没有说“指的是局部变量”，而是说“是非易失性自动对象的名称”。

`§12.8 [class.copy] p31`

> [...] 这种复制/移动操作的省略，称为*复制省略*，在以下情况下是允许的 [...]：
> 
> *   在`return`具有类返回类型的函数的语句中，**当表达式是非易失性自动对象的名称时**[...]

因此，不允许使用指针或引用。如果你以邪恶的方式阅读它，试图利用一种不太可能是有意的解释，你可以说它意味着移动以下内容

```
struct A {
  std::unique_ptr<int> x;
  std::unique_ptr<int> f() { return x; }
};

int main() { A a; a.f(); } 
```

在这种情况下，返回表达式是具有自动存储持续时间的变量的名称。标准中的其他一些段落可以以多种方式解释，但规则是采用最有可能的解释。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T16:58:43.073

> 但从逻辑上讲，对于任何返回表达式，确定结果是否引用局部变量将解决停机问题。

你高估了问题的复杂性。很明显，编译器会查看返回表达式是否提到了本地变量之一，并且它必须跟踪所有这些变量才能调用析构函数。请注意，*仅当*返回明确提及变量时，它才会移动，如果您返回指针或对局部变量的引用，则不需要这样做：

```
std::unique_ptr<int>& same( std::unique_ptr<int>& x ) { return x; }
std::unique_ptr<int> foo() {
   std::unique_ptr<int> p( new int );
   std::unique_ptr<int>& r = same(p);
   return r;                           // FAIL
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T15:11:00.120

我认为您在这里高估了编译器的能力。

如果你直接返回一个局部变量，那么工作很简单：你可以移动它。

如果您正在调用需要从局部变量移动的表达式，则必须手动指定它。

在此处查看[一些示例](http://ideone.com/f7Jp5)。

# iphone - 当用户摇动 iPhone 时如何做出反应？

> ID：11492950
> 
> 赞同：0
> 
> 时间：2012-07-15T15:00:23.953
> 
> 标签：iphone, xcode, motion

我正在创建一个应用程序，当用户摇动 iPhone 播放动画时，我正在使用以下代码：

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {
if (event.subtype == UIEventSubtypeMotionShake)
{
    animation...
} 
```

问题是，只要用户摇动 iPhone，上面的代码就会做出反应，只需一次。我需要用户上下摇晃它，就像他们在摇晃瓶子一样，持续几秒钟然后播放动画，同时他们摇动一个 mp3 文件必须播放，当动画播放时必须播放声音，请帮助，我是一个初学者，所以解释一下答案，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:04:28.987

Declare `int numOfShakes;` in your .h file and increment it everytime the user shakes their phone and once they reach a certain amount of shakes then call the animation code

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {
        if (event.subtype == UIEventSubtypeMotionShake) {
            if (numOfShakes == 10) {
                //animate
                //Shook for a couple seconds
                numOfShakes = 0;
            } else {
                numOfShakes++;
                if (numOfShakes == 1) {
                //play some mp3
                }
            }
        }
    } 
```

# sqlite - 将相关资源的集合作为带有实体的 URL 返回

> ID：11492952
> 
> 赞同：1
> 
> 时间：2012-07-15T15:00:29.403
> 
> 标签：sqlite, rest, servicestack

我正在使用 servicestack 编写用户服务，当请求用户资源时，我想以各自 URL 的形式返回实体集合。资源是被请求用户的朋友。

我当前的用户实体

```
[RestService("/users")]
[RestService("/users/{Id}")]
[Alias("Users")]
public class User
{
    [AutoIncrement]
    public int      Id              { get; set; }
    public string   Name            { get; set; }
    public string   CellPhoneNumber { get; set; }
    public string   EmailAddress    { get; set; }
    public DateTime CreatedDate     { get; set; }
} 
```

本质上，在我的 SQLite 数据库中，我会有一个名为“Friendships”的表来表达关系。桌子应该像这样工作得很好

```
ID       PK INT NOT NULL
UserID1  FK INT NOT NULL
UserID2  FK INT NOT NULL 
```

我需要一个“友谊”实体来表达这一点吗？我应该向我的用户实体添加/更改什么以让 ServiceStack 将其与友谊集合一起返回？

我认为可能是这样的友谊实体

```
[RestService("/users/{Id}/friends")]
[Alias("Friendships")]
public class Friendship
{
    [AutoIncrement]
    public int Id      { get; set; }
    public int UserId1 { get; set; }
    public int UserId2 { get; set; }
} 
```

并且在处理请求时，返回用户朋友的资源 URL 集合。我不确定如何继续前进，并且可以使用一些提示/建议。

* * *

**结果实施**

我最终将我的 Friendships 表保存在数据库中，但没有实现 FriendshipService 类，而是使用了类似于 myz 建议的东西。

```
[RestService("/users/{Id}/friends")]
public class UserFriends
{
    public int Id { get; set; }
} 
```

如您所见，我一直使用mythz 的UserFriends 实体。尽管符合我的需要，但我的服务等级有所不同。他/她提出的解决方案没有解决的问题是有问题的用户实体可以是 UserId1 或 UserId2。所以这就是用我的服务类来解决问题的。

```
public class UserFriendsService : RestServiceBase<UserFriends>
{
    public IDbConnectionFactory DbFactory { get; set; }

    public override object OnGet(UserFriends request)
    {
        if (request.Id != default(int))
        {
            User user = DbFactory.Exec(dbCmd => dbCmd.GetById<User>(request.Id));
            var friendIds = DbFactory
                .Exec(dbCmd => dbCmd.Where<Friendship>("UserId1", request.Id).Select(fs => fs.UserId2))
                .Union(DbFactory.Exec(dbCmd => dbCmd.Where<Friendship>("UserId2", request.Id)).Select(fs => fs.UserId1));

            List<User> friends = DbFactory.Exec(dbCmd => dbCmd.GetByIds<User>(friendIds));
            return friends;
        }
        else
        {
            return DbFactory.Exec(dbCmd => dbCmd.Select<User>());
        }
    }
} 
```

我可以通过使用选定的 Id 并`dbCmd.GetById<User>()`在初始查询中使用它们来选择用户实体而不是朋友 Id，但我认为这会使代码更加复杂且难以阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T19:15:24.693

您应该尝试对外部 API 隐藏您的服务的实现细节。在这种情况下，我将为每个朋友返回一个用户 DTO 列表，例如：

```
[RestService("/users/{Id}/friends")]
public class UserFriends {
    public Id { get; set; }
}

public class UserFriendsService : ServiceBase<UserFriends> {
    public IDbConnectionFactory DbFactory { get; set; }
    public object Run(UserFriends request) {
        return DbFactory.Exec(dbCmd => dbCmd.Select<User>(
         @"SELECT u.* FROM Users u INNER JOIN Friendships f ON (u.Id = f.UserId2)
           WHERE f.UserId1 = {0}", request.Id));
    }
} 
```

注意：它并不适合所有人，但我的偏好是将所有 ServiceStack 响应包装在 Typed Response DTO 中。这为客户端提供了一致的约定/类型化 API（即，它们可以预测每个服务的响应）并包括对[类型化 Validation](https://github.com/ServiceStack/ServiceStack/wiki/Validation)的支持。

```
public class UserFriendsResponse {
    public List<User> Results { get; set; }
    public ResponseStatus ResponseStatus { get; set; }
} 
```

# teradata - 如何识别 Teradata 用户的所有权利？

> ID：11492956
> 
> 赞同：2
> 
> 时间：2012-07-15T15:01:06.990
> 
> 标签：teradata

我正在寻找一种方法来识别授予特定数据库中用户的默认权限。我试过这个：

```
select *
from dbc.allrights
where username='user-id'
  and databasename='database-name' 
```

以上有两个问题；首先，如所写，查询为用户 ID 拥有的每个表的每个权限返回一行，并且它包括专门授予的权限。其次，如果 user-d 根本没有创建任何表，则不会返回任何行。

我希望有另一个 DBC 视图包含用户和数据库的默认权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-09T08:49:37.233

您可以使用此查询来检查用户对不同数据库的访问：

```
SELECT               
       A.GRANTEE as ProxyID,B.DATABASENAME,
       CASE WHEN B.ACCESSRIGHT = 'D' THEN 'DELETE'
            WHEN B.ACCESSRIGHT = 'I' THEN 'INSERT'
            WHEN B.ACCESSRIGHT = 'R' THEN 'SELECT'
            WHEN B.ACCESSRIGHT = 'SH' THEN 'SHOW TABLE/VIEW'
            WHEN B.ACCESSRIGHT = 'U' THEN 'UPDATE' ELSE 'OTHER' END ACCESS_LEVEL
   FROM    
       DBC.ROLEMEMBERS A Join DBC.ALLROLERIGHTS B 
   ON          
       A.ROLENAME = B.ROLENAME 
   WHERE 
       Grantee='USER_ID'  AND B.DATABASENAME IN ('DATABASE1','DATABASE2',.....)

   GROUP BY 1,2,3
   ORDER BY 1,2,3 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:00:28.357

仅当用户自己创建数据库时，才会存在数据库级别的隐式权限。否则，隐式权限位于创建对象的数据库中的对象级别。

建议在角色级别管理系统或安全管理员授予的显式权限。角色成员资格可以在 DBC.RoleMembers 视图中确定。可以在 DBC.AllRoleRights 中标识给定角色的访问权限。但是，如果我没记错的话，如果您在 DBC.AllRights 视图中引用伪表“All”，则可以确定在数据库级别授予用户的显式权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-01T12:51:42.843

这个sql是一样的，只是扩展了更多的访问权限：

```
SELECT RN.Grantee
       ,ARR.DatabaseName
       ,ARR.AccessRight
       ,CASE 
            WHEN ARR.AccessRight = 'AE' THEN 'ALTER EXTERNAL PROCEDURE'    
            WHEN ARR.AccessRight = 'AF' THEN 'ALTER FUNCTION'    
            WHEN ARR.AccessRight = 'AP' THEN 'ALTER PROCEDURE'    
            WHEN ARR.AccessRight = 'AS' THEN 'ABORT SESSION'    
            WHEN ARR.AccessRight = 'CA' THEN 'CREATE AUTHORIZATION'    
            WHEN ARR.AccessRight = 'CD' THEN 'CREATE DATABASE'    
            WHEN ARR.AccessRight = 'CE' THEN 'CREATE EXTERNAL PROCEDURE'    
            WHEN ARR.AccessRight = 'CF' THEN 'CREATE FUNCTION'    
            WHEN ARR.AccessRight = 'CG' THEN 'CREATE TRIGGER'    
            WHEN ARR.AccessRight = 'CM' THEN 'CREATE MACRO'    
            WHEN ARR.AccessRight = 'CO' THEN 'CREATE PROFILE'    
            WHEN ARR.AccessRight = 'CP' THEN 'CHECKPOINT'    
            WHEN ARR.AccessRight = 'CR' THEN 'CREATE ROLE'    
            WHEN ARR.AccessRight = 'CT' THEN 'CREATE TABLE'    
            WHEN ARR.AccessRight = 'CU' THEN 'CREATE USER'    
            WHEN ARR.AccessRight = 'CV' THEN 'CREATE VIEW'    
            WHEN ARR.AccessRight = 'D'  THEN 'DELETE'    
            WHEN ARR.AccessRight = 'DA' THEN 'DROP AUTHORIZATION'    
            WHEN ARR.AccessRight = 'DD' THEN 'DROP DATABASE'    
            WHEN ARR.AccessRight = 'DF' THEN 'DROP FUNCTION'    
            WHEN ARR.AccessRight = 'DG' THEN 'DROP TRIGGER'    
            WHEN ARR.AccessRight = 'DM' THEN 'DROP MACRO'    
            WHEN ARR.AccessRight = 'DO' THEN 'DROP PROFILE'    
            WHEN ARR.AccessRight = 'DP' THEN 'DUMP'    
            WHEN ARR.AccessRight = 'DR' THEN 'DROP ROLE'    
            WHEN ARR.AccessRight = 'DT' THEN 'DROP TABLE'    
            WHEN ARR.AccessRight = 'DU' THEN 'DROP USER'    
            WHEN ARR.AccessRight = 'DV' THEN 'DROP VIEW'    
            WHEN ARR.AccessRight = 'E'  THEN 'EXECUTE'    
            WHEN ARR.AccessRight = 'EF' THEN 'EXECUTE FUNCTION'    
            WHEN ARR.AccessRight = 'GC' THEN 'CREATE GLOP'    
            WHEN ARR.AccessRight = 'GD' THEN 'DROP GLOP'    
            WHEN ARR.AccessRight = 'GM' THEN 'GLOP MEMBER'    
            WHEN ARR.AccessRight = 'I'  THEN 'INSERT'    
            WHEN ARR.AccessRight = 'IX' THEN 'INDEX'    
            WHEN ARR.AccessRight = 'MR' THEN 'MONITOR RESOURCE'    
            WHEN ARR.AccessRight = 'MS' THEN 'MONITOR SESSION'    
            WHEN ARR.AccessRight = 'NT' THEN 'NONTEMPORAL'    
            WHEN ARR.AccessRight = 'OD' THEN 'OVERRIDE DELETE POLICY'    
            WHEN ARR.AccessRight = 'OI' THEN 'OVERRIDE INSERT POLICY'    
            WHEN ARR.AccessRight = 'OP' THEN 'CREATE OWNER PROCEDURE'    
            WHEN ARR.AccessRight = 'OS' THEN 'OVERRIDE SELECT POLICY'    
            WHEN ARR.AccessRight = 'OU' THEN 'OVERRIDE UPDATE POLICY'    
            WHEN ARR.AccessRight = 'PC' THEN 'CREATE PROCEDURE'    
            WHEN ARR.AccessRight = 'PD' THEN 'DROP PROCEDURE'    
            WHEN ARR.AccessRight = 'PE' THEN 'EXECUTE PROCEDURE'    
            WHEN ARR.AccessRight = 'R'  THEN 'SELECT'    
            WHEN ARR.AccessRight = 'RF' THEN 'REFERENCE'    
            WHEN ARR.AccessRight = 'RO' THEN 'REPLCONTROL'    
            WHEN ARR.AccessRight = 'RS' THEN 'RESTORE'    
            WHEN ARR.AccessRight = 'SA' THEN 'SECURITY CONSTRAINT ASSIGNMENT'    
            WHEN ARR.AccessRight = 'SD' THEN 'SECURITY CONSTRAINT DEFINITION'    
            WHEN ARR.AccessRight = 'SH' THEN 'SHOW'    
            WHEN ARR.AccessRight = 'SR' THEN 'SET RESOURCE RATE'    
            WHEN ARR.AccessRight = 'SS' THEN 'SET SESSION RATE'    
            WHEN ARR.AccessRight = 'ST' THEN 'STATISTICS'    
            WHEN ARR.AccessRight = 'TH' THEN 'CTCONTROL'    
            WHEN ARR.AccessRight = 'U'  THEN 'UPDATE'
            ELSE 'Unknown'
        END AS AccesRightText
  FROM DBC.RoleMembers AS RN
INNER JOIN DBC.AllRoleRights AS ARR 
    ON RN.RoleName = ARR.RoleName 
 WHERE RN.Grantee = 'User'
   AND ARR.DatabaseName IN ('Database1', 'Database2')
GROUP BY 1, 2, 3, 4
ORDER BY 1, 2, 3, 4 
```

# php - CodeIgniter 2.1.0 会话问题

> ID：11492959
> 
> 赞同：2
> 
> 时间：2012-07-15T15:01:17.580
> 
> 标签：php, codeigniter, session, authentication

我的 CodeIgniter Session() 类有问题，而当用户注销时出现错误。问题是我在显示他的头像和信息的页面的标题上有一个用户 HTML 块。问题是当我在注销控制器中执行此操作时：

```
if ($this->session->userdata('is_logged_in') == 1) {
    $data['logged_in'] = TRUE;

    $this->session->sess_destroy();
}

$this->output->set_header("Cache-Control: no-store, no-cache, must-revalidate");
$this->output->set_header("Cache-Control: post-check=0, pre-check=0");
$this->output->set_header("Pragma: no-cache"); 
```

..然后在我的 HTML 视图中我问这个：

```
<?php
    if ($this->session->userdata('is_logged_in') == 1) {
        // Output HTML
    }
?> 
```

..但它会为其丢失的所有会话变量生成错误。

所以我的问题；为什么检查时'is_logged_in'仍然存在，但其余数据消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:15:59.987

这是 CI 2.1.0 中的一个错误，如果您调用`$this->session->sess_destroy()`，它不会取消设置用户数据。

可以在此处找到修复问题的拉取请求：[https](https://github.com/EllisLab/CodeIgniter/pull/1323) ://github.com/EllisLab/CodeIgniter/pull/1323 。

修复非常简单。您必须更改文件`system\libraries\Session.php`。您必须在函数末尾添加以下行`sess_destroy()`：

```
// Kill session data
$this->userdata = array(); 
```

所以`sess_destroy()`看起来像这样：

```
/**
 * Destroy the current session
 *
 * @return  void
 */
public function sess_destroy()
{
    // Kill the session DB row
    if ($this->sess_use_database === TRUE && isset($this->userdata['session_id']))
    {
        $this->CI->db->where('session_id', $this->userdata['session_id']);
        $this->CI->db->delete($this->sess_table_name);
    }

    // Kill the cookie
    setcookie(
            $this->sess_cookie_name,
            addslashes(serialize(array())),
            ($this->now - 31500000),
            $this->cookie_path,
            $this->cookie_domain,
            0
        );

    // Kill session data
    $this->userdata = array();
} 
```

# ruby - How do I remove leading whitespace from a Ruby Heredoc, while maintaing 2 leading spaces

> ID：11492960
> 
> 赞同：1
> 
> 时间：2012-07-15T15:01:33.910
> 
> 标签：ruby, whitespace, heredoc, thor

This question is partly answered in [How do I remove leading whitespace chars from Ruby HEREDOC?](https://stackoverflow.com/questions/3772864/how-do-i-remove-leading-whitespace-chars-from-ruby-heredoc)

In Rails 3 there is a method `#strip_heredoc`, that strips all whitespace. But when inserting lines in an existing file, that already has identation, this doesn't work too well. An example:

```
begin
  insert_into_file "#{app_name}/config/environments/production.rb", <<-DEVISE_MAILER_STUFF.strip_heredoc, :before => "end\n"
    # for devise
    config.action_mailer.default_url_options = { :protocol => 'https', :host => 'YOURHOSTNAME' }
    config.action_mailer.delivery_method = :smtp
    something.each do |x|
      do stuff
    end
  DEVISE_MAILER_STUFF
end 
```

The 'begin' and 'end' are only added to show that the source code has indentation. The heredoc has 4 spaces before the line '# for devise'. @strip_heredoc will delete all these spaces, but it will maintain the two extra spaces in the line 'do stuff'.

In `environments/production.rb` this will look like this:

```
MyApp::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb
  # *** Identation here is two spaces! (We are in a block.) ***

# for devise
config.action_mailer.default_url_options = { :protocol => 'https', :host => 'YOURHOSTNAME' }
config.action_mailer.delivery_method = :smtp
something.each do |x|
  do stuff
end

  # back to original identation of this file
end # MyApp::Application.configure block! 
```

How to solve this? Maybe there are other ways instead of a heredoc? I thought maybe `strip_heredoc(min)` where `min` is the minimum of spaces to keep, but that doesn't work well with tabs I guess. Or have the first line of the heredoc determine the left margin, like this:

```
puts <<-HEREDOC
  FIRST_LINE
    Real code here
HEREDOC 
```

That 'FIRST_LINE' would be deleted by `strip_heredoc`, but it would also set the number of spaces/whitespace that needs to be deleted. So the output would have 2 spaces in front of 'Real code here'.

**Update**: Maybe something like this:

```
String.class_eval do
  def strip_heredoc_with_indent(indent=0)
    new_indent = ( self.empty? ? 0 : ( scan(/^[ \t]*(?=\S)/).min.size - indent ) )
    gsub(/^[ \t]{#{new_indent}}/, '')
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T23:48:18.970

我按照[这里](https://github.com/acesuares/inline_forms/blob/master/bin/inline_forms)`strip_heredoc_with_indent(indent)`的描述去了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:04:59.593

您可以使用某种分隔符来指示左边距。

```
def heredoc_with_margin()
  doc = <<-EOT.gsub(/^\s*\|/, '')
    |top:
    |  sub-one:
    |    sub-sub-one
    |  sub-two:
    |    sub-sub-two
    EOT
  return doc
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T18:27:45.417

自己剥。

```
insert_into_file "#{app_name}/config/environments/production.rb",
                 <<-DEVISE_MAILER_STUFF.gsub(/^  /, ''), :before => "end\n"
  ...
DEVISE_MAILER_STUFF 
```

这表示在每一行的开头，用空字符串替换两个空格。它很简单，很容易理解，很容易修复或改变。

* * *

或者，您可以在模板中执行此操作，但我不知道您是否真的在使用模板，或者您是否正在以某种方式解析文件并替换行（提示，您可能应该使用模板）。

* * *

*“我想也许 strip_heredoc(min) 其中 min 是要保留的最小空间，但我猜这不适用于制表符。”*

Ruby 标准是两个空格。即使不是，标签总是把一切搞砸。使用空格。

* * *

**关于你的更新**

情况很复杂。您需要这样的通用解决方案吗？你在很多地方都这样做吗？或者在你不能只看一眼就看gsub多少的地方？此外，扩展核心类是一种危险的游戏，我看到代码库卡在 Rails 1 和定制的 Ruby 1.8 上，因为它们对改变内置行为过于漫不经心。当它改变时，他们无法随之改变。我知道 Rails 可以做到，但 Rails 并不是最佳实践的良好参考。

它也有一些潜在的错误：

*   当给定这个字符串并且不传递任何参数时，它应该怎么做？" a\n\n b" 我什么也不期待，因为最短的行是空行，所以你的 new_indent 应该是零，但它会是一。
*   当他们传入的缩进超过 时会发生什么`scan(...).min.size`？
*   如果他们传递了一些负面的东西会发生什么？

对我来说，它最终似乎是一个复杂的解决方案，永远不可能真正正确，它将使用它的任何代码耦合到这个应用程序，而所有这些实际上可能并不是必需的。

# mysql - 在一个rowset mysql中选择两个计数条件

> ID：11492962
> 
> 赞同：0
> 
> 时间：2012-07-15T15:01:42.173
> 
> 标签：mysql, sql

简单表

```
________________________________________________
| id | parent_id | name | some_condition_field |
------------------------------------------------ 
```

我想要行集：

```
________________________________________________________________________________
| id | name | count_childs_with_condition_one | count_childs_with_condition_two |
--------------------------------------------------------------------------------- 
```

有可能的？变量，UNION 等..???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:05:24.733

这是一个跨平台的解决方案：

对于单亲父母：

```
select count(case when some_condition_field = 'xxx' then 1 end) as CountXXX, 
    count(case when some_condition_field = 'yyy' then 1 end) as CountYYY
from MyTable
where parent_id = 123 
```

对于所有父母：

```
select parent_id, 
    count(case when some_condition_field = 'xxx' then 1 end) as CountXXX, 
    count(case when some_condition_field = 'yyy' then 1 end) as CountYYY
from MyTable
group by parent_id 
```

对于 MySQL，您还可以使用以下语法：

```
select parent_id, 
    count(if(some_condition_field = 'xxx', 1, null) as CountXXX, 
    count(if(some_condition_field = 'yyy', 1, null)) as CountYYY
from MyTable
group by parent_id 
```

# python - 在特定条件下匹配第二组（使用一个正则表达式）

> ID：11492965
> 
> 赞同：1
> 
> 时间：2012-07-15T15:01:58.990
> 
> 标签：python, regex

考虑这个正则表达式：

```
<a href(="(?:/user)?/([^"]+))"> 
```

我想要的是，如果在第二个捕获组中如果有所有/只有数字，那么这个正则表达式不应该匹配。一个例子：

```
<a href="/user/15594243">
#this should not match 
```

有什么解决办法吗？我只想要一个正则表达式解决方案，我知道我可以通过使用更多的 python 代码来实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:43:19.110

我认为只需要对所有数字和报价进行负前瞻断言”

```
user_re = re.compile('<a href(="/(?!(?:user/)?[0-9]+").+)"')

In [74]: [(url,user_re.match(url) and user_re.match(url).group(1)) for url in 
                 ['<a href="/user/15594243">',
                  '<a href="/user/15594243_">',
                  '<a href="/user/user15594243">',
                  '<a href="/user/1">',
                  '<a href="/user/15594243/add">',
                  '<a href="/item/15594243">',
                  '<a href="/a"',
                  '<a href="/15594243">']]
Out[74]: 
[('<a href="/user/15594243">', None),
 ('<a href="/user/15594243_">', '="/user/15594243_'),
 ('<a href="/user/user15594243">', '="/user/user15594243'),
 ('<a href="/user/1">', None),
 ('<a href="/user/15594243/add">', '="/user/15594243/add'),
 ('<a href="/item/15594243">', '="/item/15594243'),
 ('<a href="/a"', '="/a'),
 ('<a href="/15594243">', None)] 
```

**编辑**：我知道我的最后一次编辑执行了两次正则表达式，但这只是为了显示目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:14:39.427

关于什么

```
<a href(="(?:/user)?/([^"/]*?[^0-9"/][^"/]*?))"> 
```

? 我们需要包含 /，因为如果不是，它会省略 /user，因为它是可选的，并将 user/ 作为非数字的东西......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T15:14:56.603

[将此](https://stackoverflow.com/a/1051998/974369)用于第二个捕获组。

```
\d*[a-zA-Z]+[a-zA-Z0-9]* 
```

这使您可以根据需要以数字开头，至少需要一个字母表，然后根据需要使用字母数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T15:16:20.370

您可以使用断言。Lookbehind 断言不起作用，因为它需要固定宽度，所以让我们使用前瞻。

```
reg = re.compile("<a href=\"(?:/user)?/(?![0-9]+)([^\"/]+)\">") 
```

这将起作用。但是这个正则表达式使那些 url 无效：`/user/test/u345`, `/user/t/user`（不允许斜杠）。那是因为你的`/user`部分是可选的：没有假设 ( `[^"/]`) ，`[^"]`消耗一切 ( `/user/45`)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-15T15:07:46.613

这样就可以了，替换`([^"]+)`为：

```
([^"]*?[^0-9"][^"]*?) 
```

**编辑**：除非 python 是带有大写 QI 的 Quaint，否则真的不知道你们都看错了什么。从 javascript 控制台这有效：

```
>>> 'user/user1234"'.match(/\/([^"]*?[^0-9"][^"]*?)"/);
Array ["/user1234"", "user1234"]
>>> 'user/1234"'.match(/\/([^"]*?[^0-9"][^"]*?)"/);
null 
```

那么，你是在告诉我这不是 Python 的情况吗？为什么？

**编辑2：啊哈**，可选的`/user`犯规结果......这将阻止它：

```
 <a href(="(?:/user)?/(?!user/)([^"]*?[^0-9"][^"]*?))"> 
```

# sqlite - PyQT QAbstractProxyModel mapToSource

> ID：11492966
> 
> 赞同：0
> 
> 时间：2012-07-15T15:02:03.660
> 
> 标签：sqlite, pyqt, qsortfilterproxymodel

我已经将我的 QTableView 设置为视图，该视图的模型是 QSqlQueryModel。

[![在此处输入图像描述](../Images/96c0735f963de450b8378de8b71e924b.png)](https://i.stack.imgur.com/wYZSF.png)

对不起，塞尔维亚的信件，不过你会明白我在说什么。

```
self.model = QSqlQueryModel(self)
db = QSqlDatabase.addDatabase("QSQLITE")
db.setDatabaseName("database.db")
db.open()

view = self.ui.myView
view.setVisible(True)
view.setSortingEnabled(True)
view.sortByColumn(2,Qt.AscendingOrder)
view.setModel(self.model)

view.clicked.connect(self.clickedSlot) #this function clickedSlot returns row and column numbers, which I use for extracting data from SQLite database.

def searchName(self): #this function searches the model for some name,lets say JOHN DOE`

    name = (str(self.ui.inputName.text()).upper())

    proxy = QSortFilterProxyModel()
    proxy.setSourceModel(self.model)
    proksi.setDynamicSortFilter(True)

    proxy.setFilterRegExp(QRegExp(name, Qt.CaseInsensitive))
    proxy.setFilterKeyColumn(1)

    view = self.ui.myView
    view.setVisible(False)
    view.resizeColumnsToContents()
    view.setVisible(True)
    view.setSortingEnabled(True)
    #view.sortByColumn(2,Qt.AscendingOrder)
    view.setModel(proxy)
    view.clicked.connect(self.clickedSlot) 
```

[屏幕截图 2](https://imgur.com/64dO6)，在 searchName 函数之后。再次，请原谅我的塞尔维亚字母。现在的问题；

如果我单击第一个屏幕截图中的一行，我会在控制台中打印行号和列号，例如 8,2。如果我单击第二个屏幕截图中的一行（打开代理过滤器的行），我会得到第 -1 行，第 -1 列。

我将如何实现 QAbstractProxyModel 和 mapToSource 方法来获取真实的行号和列号？

：编辑：

```
def clickedSlot(self,index):
 rownumber = index.row()
 colnumber = index.column()
 self.model.setQuery("select name from cases")
 tempname = self.model.data(self.model.index(rownumber, 1))
 print("row " +str(rownumber))
 print("column " +str(colnumber))
 print("name " +str(tempname)) 
```

我得到的输出：

第 9 行第 1 列名称 JOHN DOE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:30:13.233

*让我先向你保证......塞尔维亚字母一点也不麻烦:-)*

我需要查看您的 SLOT 代码`self.clickedSlot`才能确定，但​​我的猜测是您当时正在解决行列错误。

假设`self.ui.myView`是[QTableView](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtableview.html)并且您正在使用[clicked()](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qabstractitemview.html#clicked)信号，那么您应该收到的`clickedSlot`是代理模型的[QModelIndex](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qmodelindex.html)。此时，您应该能够执行以下操作：

```
def clickedSlot(self, modelIndex):
    model = modelIndex.model()
    if hasattr(model, 'mapToSource'):
        # We are a proxy model
        modelIndex = model.mapToSource(modelIndex)
    print modelIndex.row(), modelIndex.column() 
```

这只是检查代理的一种方法。也许您设置了一个标志并且您已经知道它是一个代理。但是在这里我只是检查索引上的模型引用是否有' [mapToSource](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qsortfilterproxymodel.html#mapToSource) '方法，如果有，那么我们知道它是一个代理。所以我们只需调用`mapToSource`ProxyIndex 来获取真正的索引。

# c# - How to change Color Dialog language

> ID：11492968
> 
> 赞同：1
> 
> 时间：2012-07-15T15:02:08.290
> 
> 标签：c#, winforms, colordialog

I write a word processor in C#, but not in English. I want to use the Color Dialog, but I want to change the words in Color Dialog to another language, how can I do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-30T00:33:15.267

我意识到这是一个老问题，但如果其他人需要这个问题的答案，您可以使用一些不同的 winapi 调用来更改颜色对话框的文本。这是一些示例 C# 代码来演示。

**注意：**由于“基本颜色：”和“自定义颜色：”标签由相同的控件 ID 引用，因此实现了一种相当间接的方法来查找“自定义颜色：”标签的句柄。如果颜色对话框上的所有控件 ID 都是唯一的，则“自定义颜色：”标签文本可以像其他控件一样轻松设置。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // Open the color dialog before the form actually loads

            ColorDialogEx oColorDialog = new ColorDialogEx(this.CreateGraphics());

            oColorDialog.FullOpen = true;
            oColorDialog.ShowDialog();
        }
    }

    public class ColorDialogEx : ColorDialog
    {
        private const Int32 WM_INITDIALOG = 0x0110; // Windows Message Constant
        private Graphics oGraphics;
        private const uint GW_HWNDLAST = 1;
        private const uint GW_HWNDPREV = 3;

        private string sColorPickerText = "1-Color Picker";
        private string sBasicColorsText = "2-Basic colors:";
        private string sDefineCustomColorsButtonText = "3-Define Custom Colors >>";
        private string sOKButtonText = "4-OK";
        private string sCancelButtonText = "5-Cancel";
        private string sAddToCustomColorsButtonText = "6-Add to Custom Colors";
        private string sColorText = "7-Color";
        private string sSolidText = "|8-Solid";
        private string sHueText = "9-Hue:";
        private string sSatText = "10-Sat:";
        private string sLumText = "11-Lum:";
        private string sRedText = "12-Red:";
        private string sGreenText = "13-Green:";
        private string sBlueText = "14-Blue:";
        private string sCustomColorsText = "15-Custom colors:";

        // WinAPI definitions

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        private static extern bool SetWindowText(IntPtr hWnd, string text);

        [DllImport("user32.dll", SetLastError = true)]
        internal static extern bool MoveWindow(IntPtr hWnd, int X, int Y, int nWidth, int nHeight, bool bRepaint);

        [DllImport("user32.dll")]
        public static extern long GetWindowRect(int hWnd, ref Rectangle lpRect);

        [DllImport("user32.dll")]
        [return: MarshalAs(UnmanagedType.Bool)]
        static extern bool GetTitleBarInfo(IntPtr hwnd, ref TITLEBARINFO pti);

        [DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, string lpszWindow);

        [DllImport("user32.dll")]
        private static extern IntPtr GetDlgItem(IntPtr hDlg, int nIDDlgItem);

        [DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr GetWindow(IntPtr hWnd, uint uCmd);

        [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        private static extern int GetClassName(IntPtr hWnd, System.Text.StringBuilder lpClassName, int nMaxCount);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);

        [StructLayout(LayoutKind.Sequential)]
        struct TITLEBARINFO
        {
            public const int CCHILDREN_TITLEBAR = 5;
            public uint cbSize;
            public RECT rcTitleBar;
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = CCHILDREN_TITLEBAR + 1)]
            public uint[] rgstate;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct RECT
        {
            public int Left, Top, Right, Bottom;

            public RECT(int left, int top, int right, int bottom)
            {
                Left = left;
                Top = top;
                Right = right;
                Bottom = bottom;
            }

            public RECT(System.Drawing.Rectangle r) : this(r.Left, r.Top, r.Right, r.Bottom) { }

            public int X
            {
                get { return Left; }
                set { Right -= (Left - value); Left = value; }
            }

            public int Y
            {
                get { return Top; }
                set { Bottom -= (Top - value); Top = value; }
            }

            public int Height
            {
                get { return Bottom - Top; }
                set { Bottom = value + Top; }
            }

            public int Width
            {
                get { return Right - Left; }
                set { Right = value + Left; }
            }

            public System.Drawing.Point Location
            {
                get { return new System.Drawing.Point(Left, Top); }
                set { X = value.X; Y = value.Y; }
            }

            public System.Drawing.Size Size
            {
                get { return new System.Drawing.Size(Width, Height); }
                set { Width = value.Width; Height = value.Height; }
            }

            public static implicit operator System.Drawing.Rectangle(RECT r)
            {
                return new System.Drawing.Rectangle(r.Left, r.Top, r.Width, r.Height);
            }

            public static implicit operator RECT(System.Drawing.Rectangle r)
            {
                return new RECT(r);
            }

            public static bool operator ==(RECT r1, RECT r2)
            {
                return r1.Equals(r2);
            }

            public static bool operator !=(RECT r1, RECT r2)
            {
                return !r1.Equals(r2);
            }

            public bool Equals(RECT r)
            {
                return r.Left == Left && r.Top == Top && r.Right == Right && r.Bottom == Bottom;
            }

            public override bool Equals(object obj)
            {
                if (obj is RECT)
                    return Equals((RECT)obj);
                else if (obj is System.Drawing.Rectangle)
                    return Equals(new RECT((System.Drawing.Rectangle)obj));
                return false;
            }

            public override int GetHashCode()
            {
                return ((System.Drawing.Rectangle)this).GetHashCode();
            }

            public override string ToString()
            {
                return string.Format(System.Globalization.CultureInfo.CurrentCulture, "{{Left={0},Top={1},Right={2},Bottom={3}}}", Left, Top, Right, Bottom);
            }
        }

        public ColorDialogEx(Graphics g)
        {
            oGraphics = g;
        }

        protected override IntPtr HookProc(IntPtr nColorDialogHandle, int msg, IntPtr wparam, IntPtr lparam)
        {
            IntPtr returnValue = base.HookProc(nColorDialogHandle, msg, wparam, lparam);

            if (msg == WM_INITDIALOG)
            {
                IntPtr[] oStaticHandleArray = new IntPtr[9];

                // Change the window title

                SetWindowText(nColorDialogHandle, sColorPickerText);

                // Get titlebar info for calculations later

                TITLEBARINFO oTITLEBARINFO = new TITLEBARINFO();
                oTITLEBARINFO.cbSize = (uint)System.Runtime.InteropServices.Marshal.SizeOf(oTITLEBARINFO);
                GetTitleBarInfo(nColorDialogHandle, ref oTITLEBARINFO);

                // Change the text of the "Basic colors:" label

                oStaticHandleArray[0] = GetDlgItem(nColorDialogHandle, 0xFFFF);

                SetWindowText(oStaticHandleArray[0], sBasicColorsText);

                // Change the text of the "Define Custom Colors >>" button

                SetWindowText(GetDlgItem(nColorDialogHandle, 0x2CF), sDefineCustomColorsButtonText);

                // Save the "OK" button size and new width

                Rectangle oOKButtonRect = new Rectangle();
                int nOKButtonWidth = (int)oGraphics.MeasureString(sOKButtonText, new Font("Microsoft Sans Serif", 8, FontStyle.Regular)).Width + 20;  // +20 accounts for extra +10 padding on either side

                // Find the "OK" Button

                IntPtr nChildHandle = GetDlgItem(nColorDialogHandle, 0x1);

                if (nChildHandle.ToInt32() > 0)
                {
                    // The "OK" button was found
                    // Now save the current size and position

                    GetWindowRect(nChildHandle.ToInt32(), ref oOKButtonRect);

                    // We have to subtract oOKButtonRect.X value from oOKButtonRect.Width to obtain the "real" button width (same thing with subtracting Y value from Height)

                    oOKButtonRect.Width = oOKButtonRect.Width - oOKButtonRect.X;
                    oOKButtonRect.Height = oOKButtonRect.Height - oOKButtonRect.Y;

                    // Resize the "OK" button so that the new text fits properly
                    // NOTE: I cannot be sure 100% if it is correct to use the titlebar to find the position of the button or not but the math works out in all of my tests

                    MoveWindow(nChildHandle, oOKButtonRect.X - oTITLEBARINFO.rcTitleBar.X, oOKButtonRect.Y - oTITLEBARINFO.rcTitleBar.Y - oTITLEBARINFO.rcTitleBar.Height, nOKButtonWidth, oOKButtonRect.Height, true);

                    // Finally, change the button text

                    SetWindowText(nChildHandle, sOKButtonText);
                }

                // Find the "Cancel" Button

                nChildHandle = GetDlgItem(nColorDialogHandle, 0x2);

                if (nChildHandle.ToInt32() > 0)
                {
                    // The "Cancel" button was found
                    // Now get the current size and position

                    Rectangle oCancelButtonRect = new Rectangle();
                    GetWindowRect(nChildHandle.ToInt32(), ref oCancelButtonRect);

                    // We have to subtract oCancelButtonRect.X value from oCancelButtonRect.Width to obtain the "real" button width (same thing with subtracting Y value from Height)

                    oCancelButtonRect.Width = oCancelButtonRect.Width - oCancelButtonRect.X;
                    oCancelButtonRect.Height = oCancelButtonRect.Height - oCancelButtonRect.Y;

                    // Resize the "Cancel" button so that the new text fits properly
                    // NOTE: I cannot be sure 100% if it correct to use the titlebar to find the position of the button or not but the math works out in all of my tests

                    MoveWindow(nChildHandle, oOKButtonRect.X + nOKButtonWidth - oTITLEBARINFO.rcTitleBar.X + 6, oCancelButtonRect.Y - oTITLEBARINFO.rcTitleBar.Y - oTITLEBARINFO.rcTitleBar.Height, (int)oGraphics.MeasureString(sCancelButtonText, new Font("Microsoft Sans Serif", 8, FontStyle.Regular)).Width + 20, oCancelButtonRect.Height, true);

                    // Finally, change the button text

                    SetWindowText(nChildHandle, sCancelButtonText);
                }

                // Change the text of the "Add to Custom Colors" button

                SetWindowText(GetDlgItem(nColorDialogHandle, 0x2C8), sAddToCustomColorsButtonText);

                // Change the text of the "Color" label text

                oStaticHandleArray[1] = GetDlgItem(nColorDialogHandle, 0x2DA);

                SetWindowText(oStaticHandleArray[1], sColorText);

                // Change the text of the "Solid" label text

                oStaticHandleArray[2] = GetDlgItem(nColorDialogHandle, 0x2DB);

                SetWindowText(oStaticHandleArray[2], sSolidText);

                // Change the text of the "Hue:" label

                oStaticHandleArray[3] = GetDlgItem(nColorDialogHandle, 0x2D3);

                SetWindowText(oStaticHandleArray[3], sHueText);

                // Change the text of the "Sat:" label

                oStaticHandleArray[4] = GetDlgItem(nColorDialogHandle, 0x2D4);

                SetWindowText(oStaticHandleArray[4], sSatText);

                // Change the text of the "Lum:" label

                oStaticHandleArray[5] = GetDlgItem(nColorDialogHandle, 0x2D5);

                SetWindowText(oStaticHandleArray[5], sLumText);

                // Change the text of the "Red:" label

                oStaticHandleArray[6] = GetDlgItem(nColorDialogHandle, 0x2D6);

                SetWindowText(oStaticHandleArray[6], sRedText);

                // Change the text of the "Green:" label

                oStaticHandleArray[7] = GetDlgItem(nColorDialogHandle, 0x2D7);

                SetWindowText(oStaticHandleArray[7], sGreenText);

                // Change the text of the "Blue:" label

                oStaticHandleArray[8] = GetDlgItem(nColorDialogHandle, 0x2D8);

                SetWindowText(oStaticHandleArray[8], sBlueText);

                // Change the text of the "Custom Colors:" label

                SetCustomColorsText(nColorDialogHandle, oStaticHandleArray);
            }

            return returnValue;
        }

        private static string GetClassName(IntPtr nHandle)
        {
            // Create the stringbuilder object that is used to get the window class name from the GetClassName win api function

            System.Text.StringBuilder sClassName = new System.Text.StringBuilder(100);
            GetClassName(nHandle, sClassName, sClassName.Capacity);
            return sClassName.ToString();
        }

        private static string GetWindowText(IntPtr nHandle)
        {
            // Create the stringbuilder object that is used to get the window text from the GetWindowText win api function

            System.Text.StringBuilder sWindowText = new System.Text.StringBuilder(100);
            GetWindowText(nHandle, sWindowText, sWindowText.Capacity);
            return sWindowText.ToString();
        }

        private void SetCustomColorsText(IntPtr nHandle, IntPtr[] oStaticHandleArray)
        {
            // Find the last control based on the handle to the main window

            IntPtr nWorkingHandle = GetWindow(FindWindowEx(nHandle, IntPtr.Zero, null, null), GW_HWNDLAST);
            bool bFound = false;

            do
            {
                // Look only for "Static" controls that we have not already changed

                if (GetClassName(nWorkingHandle) == "Static" && oStaticHandleArray.Contains(nWorkingHandle) == false)
                {
                    // Found a "Static" control
                    // Check to see if it is the one we are looking for

                    string sControlText = GetWindowText(nWorkingHandle);

                    if (sControlText != "")
                    {
                        // Found the "Custom Colors:" label
                        // Change the text of the "Custom Colors:" label

                        SetWindowText(nWorkingHandle, sCustomColorsText);
                        bFound = true;
                    }
                }

                // Working backwards we look for the previous control

                nWorkingHandle = GetWindow(nWorkingHandle, GW_HWNDPREV);

                // Jump out of the loop when the working handle doesn't find anymore controls

                if (nWorkingHandle == IntPtr.Zero)
                    break;
            } while (bFound == false);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T15:10:08.113

该对话框将使用用户安装的操作系统的语言。

无法手动定义语言及其本地化。

如果您仍然需要它，则必须自己构建一个，或者使用 Telerik 组件之类的组件并自己进行本地化。这些组件虽然不是ceeap..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T17:42:08.647

语言检测器可能很有用。看：

*   [检测书面文本的语言](http://www.codeproject.com/Articles/43198/Detect-a-written-text-s-language)
*   [返回给定字符串的语言](https://stackoverflow.com/questions/1192768/return-the-language-of-a-given-string/1192802#1192802)

[Avalon 编辑器](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)是一个可靠的开源项目，也可以帮助您解决这个问题。

# ios - textViewDidBeginEditing: within UIWebView not being called

> ID：11492972
> 
> 赞同：0
> 
> 时间：2012-07-15T15:02:53.523
> 
> 标签：ios, uiwebview, uitextview, uikeyboard, uitextfielddelegate

i´ve created a subclass from UIView and put in a UIWebView. This displays a simple external website which contains just two textfields. The user can type in his email address and the verification.

I´ve already included the UIWebViewDelegate for the webViewDidFinishLoad: method. Additionally i´ve created a NSNotification for "UIKeyboardDidShowNotification".

Everything works, but when i select the second textfield, the first textfield automatically will be scrolled half out of the visible area. I´ve also included the UITextViewDelegate with **- (void)textFieldDidBeginEditing:(UITextField *)textField** but i get no NSLog from that delegate method.

Any help how i can get the frame of the selected textfield (within a UIWebView)? Thanks for any hints...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:56:50.050

我读过使用 UIWebView 时没有 UITextField 委托。因此，没有关于当前选择哪个文本字段的信息，对吧？

# ios - UITextField like safari with progress

> ID：11492974
> 
> 赞同：2
> 
> 时间：2012-07-15T15:02:57.540
> 
> 标签：ios, uitextfield, progress

someone have the idea to make UITextField show Progress like safari(when loading ,there have blue progress in UITextField).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:24:04.407

我认为搜索栏会是一个更好的选择，并且还可以为您提供更多功能。

# android - Does multithreading affect programs in OpenGL ES for android?

> ID：11492975
> 
> 赞同：0
> 
> 时间：2012-07-15T15:03:04.110
> 
> 标签：android, opengl-es

I have got some strange and unexpected results from my program in OpenGL ES for android for example in the code below:

```
matrix = ThisRot.get();
gl.glMultMatrixf(matrix, 0);
currentRotation.toMatrix(matrix);
temp.set(matrix); 
```

I set the matrix value before I use it as an argument for gl.glMultMatrixf and after that I change the value of matrix and use it for another purpose, but it has effect an the way the object rotate so it should have effect on gl.glMultMatrixf(). and that's not the only one, some other places in my code I had this unexpected results. so I have thought maybe these happen due to mutual exclusion and multitreading and those kind of things. am I right? should we worry about multithreading when we code in Opengl ES for android? How can I avoid these kind of problems.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T16:06:21.060

当然，您应该担心多线程。特别是，当您使用 setRenderer() 函数将 GLRenderer 派生类附加到 GLSurfaceView 时，Android 会创建自己的 GLThread 进行渲染。

事实上，多线程可能会导致程序崩溃（不仅是意外行为），尤其是当您循环通过数组添加/删除对象等时。

检查您是否在 GLRenderer 的 onDrawFrame 函数和您自己的线程中修改相同的数据。如果是，请尝试在修改后的代码周围添加以下内容（在两个线程中）：

```
synchronize(variable) {
     modify(variable);
} 
```

这将在整个 modify() 函数中锁定变量，直到它结束块。不过，尽量不要过度使用它，只在你需要它的地方。一个线程将阻塞另一个线程，直到它完成！

# haskell - 在 Haskell 中创建交互式程序

> ID：11492976
> 
> 赞同：4
> 
> 时间：2012-07-15T15:03:11.130
> 
> 标签：haskell, user-interaction

我必须编写 3 个函数：一个将华氏温度转换为摄氏温度，一个将摄氏温度转换为开尔文，第三个使用前两个函数将华氏温度转换为开尔文。

我以前从来没有玩过 Haskell，所以这花了我相当长的时间，虽然现在我发现它很简单。

无论如何，我需要为前两个函数创建交互式 Haskell 程序，并使用它们来组合和执行管道，以获得与第三个函数等效的函数。我一直在阅读管道，它似乎很简单。我的主要问题似乎是使功能具有交互性。

非常感谢任何帮助、提示和资源！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T15:18:56.110

该[`interact`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v%3ainteract)功能在解决您的问题时应该非常有用。因为 UNIX 约定是进程应该使用文本（而不是数字，如温度）进行通信，这意味着该`interact`函数包装了接受`String`s 并返回`String`s 的函数。这意味着您必须将华氏/摄氏度函数包装在新函数中，这些函数接受和返回字符串而不是数字。

作为一个让你开始的例子，这个程序将给它的所有字符串都大写：

```
module Main (main) where

import Data.Char (toUpper)

main :: IO ()
main = interact upperCase

upperCase :: String -> String
upperCase = map toUpper 
```

你可以编译它：

```
ghc uppercase.hs 
```

...然后您可以通过以下方式使用它（在 Linux 上）：

```
echo "bla" | ./uppercase
# Result: "BLA" 
```

# php - 在 if 语句中插入 HTML

> ID：11492985
> 
> 赞同：1
> 
> 时间：2012-07-15T15:04:10.350
> 
> 标签：php, html

```
<?php
if(get_field('member_only_content')){
    echo "do something";
}else{
    echo "do something else";
}
?> 
```

如何在它说的地方插入 HTML 代码`"do something"`？删除`echo "do something";`和粘贴 HTML 代码时，Wordpress 站点崩溃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T15:05:54.637

关闭并打开 PHP 块，如下所示：

```
if(get_field('member_only_content')){
?>
    <html></html>
<?php
} else{
?>
    <html></html>
<?php
} 
```

您还可以为此使用 PHP 的替代语法：

```
if(get_field('member_only_content')): ?>
    <html></html>
<?php else: ?>
    <html></html>
<?php endif; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T15:06:54.963

像这样！

```
<?php
if(get_field('member_only_content')) : ?>
    <div>Html stuff</div>
<?php else : ?>
    <div>More Html stuff</div>
<?php endif; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T15:08:39.600

用 HTML 代替字符串。

```
<?php
if(get_field('member_only_content')){
    echo "<your>HTML here</your>";
}else{
    echo "<other>HTML</other>";
}
?> 
```

你也可以打破PHP标签

```
<?php
if(get_field('member_only_content')){
    ?> 
    <your>HTML here</your>
    <?
}else{

    ?>
     <other>HTML</other>
    <?
}
     ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T15:11:14.743

或者您可以使用 <<< 语句：

```
echo <<<END
This uses the "here document" syntax to output
multiple lines with $variable interpolation. Note
that the here document terminator must appear on a
line with just a semicolon. no extra whitespace!
END; 
```

直接来自[http://php.net/manual/en/function.echo.php](http://php.net/manual/en/function.echo.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T16:04:42.713

那是因为您将 HTML 代码放在了 php 标签 ( `<?php ?>`) 中。此标记内的文本被解释为 PHP 指令，因此它不会呈现 HTML。在 PHP 文件中呈现 HTML 的一般方法有两种：

## 回显 HTML

```
<?php

    if (get_field ('member_only_content')) {
        echo "<span>Put HTML here</span>";
    }
    else {
        echo "<span>Put HTML here</span>";
    }
?> 
```

## 将 HTML 放在 PHP 标记之外

```
<?php if (get_field ('member_only_content')): ?>
    <span>Put HTML here</span>
<?php else: ?>
    <span>Put HTML here</span>
<?php endif;?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-15T15:07:05.353

示例代码

```
echo("<h1>This is a sample</h1>"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T16:07:09.717

```
<?php
if(get_field('member_only_content')){
    echo "<div style='background-color: #888888'>This is a simple string between div's, make sure you've to be careful while inserting too many single and double quotes in this string as well as inline styles</div>";
}else{
    echo "do something else";
}
?> 
```

**在字符串中插入引号时要小心。**

# c - Printing 2D Array using pointers in C

> ID：11492988
> 
> 赞同：-4
> 
> 时间：2012-07-15T15:04:30.407
> 
> 标签：c, pointers, multidimensional-array

```
#include "stdio.h"

void main(){
 int a[2][2]={1, 2, 3, 4};
 int a[2][2]={1, 2, 3, 4};
 display(a, 2, 2);
 show(a, 2, 2);}
}

display(int *k, int r, int c){
int i, j, *z;
 for(i = 0; i < r; i++){
   z = k + i;
   printf("Display\n");
      for(j = 0; j < c; j++){
          printf("%d", *(z + j));
       }
  }
}

show(int *q, int ro, int co){
int i, j;
   for(i = 0; i < ro; i++){
     printf("\n");
     for(j = 0; j < co; j++){
       printf("%d", *(q + i*co + j));
     }
   }
} 
```

Output:

```
Display
12
23
Show
12
34 
```

Why `Display()` is not showing 1223 while `show()` gives 1234? Both uses the same logic to display the 2d array. Can any one help please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:27:33.340

在`display`您使用两个计数器，`i`用于行和`j`列。`i`由于数组在内存中是按顺序排列的，因此每次您想从一行移动到下一行时，您都需要增加一列的大小，即 c。因此，您应该添加`i*c`到 k，而不是`i`.

完整的功能：

```
display(int *k,int r,int c){
int i,j,*z;
 for(i=0;i<r;i++){
   z=k+i*c;
   printf("Display\n");
      for(j=0;j<c;j++){
          printf("%d",*(z+j));
       }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-08T20:20:15.623

使用指针访问二维数组：

```
#define R 2
#define C 2
...
int A[R][C]={1, 2, 3, 4};
for(i=0;i<R;i++)  
  for(j=0;j<C;j++)
    printf("%d ",*(*(A+i)+j));
... 
```

# css - Gecko 中未应用自动光标

> ID：11492997
> 
> 赞同：0
> 
> 时间：2012-07-15T15:05:24.653
> 
> 标签：css, cursor, gxt, gecko

*这似乎是一个渲染引擎的怪癖，因为它已经过测试并且无法在 WebKit 驱动的浏览器（Windows 的 Chrome 和 Safari）上重现。*

## 描述

当使用深度嵌套的 DOM 结构时，例如 GXT `Grid`，`default`光标似乎会覆盖任何其他应用的样式。如何覆盖（或回避）这种行为？

## 测试用例

### 重现步骤

*（需要您喜欢浏览器的开发工具的基本知识）*

1.  访问[GXT 2.2.x 示例展示](http://www.sencha.com/examples-2/#basicgrid)。
2.  右键单击网格中的单元格文本值，然后单击*Inspect Element*，或单击`F12`以打开开发人员工具，然后手动检查该元素。您应该检查一个标记为： 的元素`div.x-grid3-cell-inner.x-grid3-col-name`。
3.  在*样式*视图中，查找与以下选择器匹配的规则：`.x-grid3-row`，它应该有一个声明的属性`cursor`。将其值从 更改`default`为`auto`。

### 预期结果

光标应根据元素的类型呈现，例如文本内容元素的文本光标。

### 实际结果

在基于 Gecko 的浏览器上，无论元素的类型如何，都会出现默认光标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:39:26.373

这是一个已知问题，由声明`tabindex`属性的值等于或大于的祖先元素引起`0`，并且是Mozilla 错误跟踪器中[报告的错误](https://bugzilla.mozilla.org/show_bug.cgi?id=389283)。

它可以通过在 Gecko 浏览器上运行[这个简单的测试用例](https://bug389283.bugzilla.mozilla.org/attachment.cgi?id=273429)来重现（在 WebKit 上运行以供参考）。

作为一种解决方法，可以确保为层次结构中的所有元素分配一个`tabindex`值`-1`，或者完全删除它们，从而避免进入[这个块](http://bonsai.mozilla.org/cvsblame.cgi?file=/mozilla/layout/generic/nsTextFrameThebes.cpp&rev=3.54&root=/cvsroot&mark=3439-3454#3431)，将光标相关的 CSS 规则恢复到它们的正常行为。

# jquery-ui-accordion - How to apply accordion in jQuery

> ID：11492998
> 
> 赞同：1
> 
> 时间：2012-07-15T15:05:29.583
> 
> 标签：jquery-ui-accordion

I have a problem with creating accordions in my page where I'm using blogger API. I need to apply accordion format to a list of Blogger posts at [http://www.winworldgk.tk](http://www.winworldgk.tk) , which are fetched using Blogger API. The problem is- I'm able to display all post contents and titles but are of general style not the required accordion style. Could any one there be help. The code is as bellow...

```
 $(document).ready(function() {

        // Make a JSONP request for the Posts on the Blogger Buzz blog
        $.ajax({
          url:"https://www.googleapis.com/blogger/v3/blogs/578441859855451483/posts?labels=EnglishTest&maxResults=5&key=mykey",
    dataType: "jsonp",success: function(data, textStatus, jqXHR) {
            var items = []; 

            // Construct a chunk of HTML for each post
            // containing the Post title, content, and a 
            // link to the post author.
            $.each(data.items, function(index, value) {     
    $('<h3><a href="#">'+value.title+'</a></h3><div>'+value.content+'</div>').appendTo("#accId");
    }

    });$("#accId").addClass("accordion");
    }

    });
    });

<html>
<body>
<div id="accId"></div>
</body>
</html> 
```