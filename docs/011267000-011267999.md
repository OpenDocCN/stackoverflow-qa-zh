# StackOverflow 问答 11267000-11267999

# java - 静态块怪异行为

> ID：11267003
> 
> 赞同：-2
> 
> 时间：2012-06-29T18:22:16.103
> 
> 标签：java, static

```
public class MyClass{
    static{
        System.out.println("Weired Behaviour");
    }
} 
```

//如果使用 java MyClass 从命令行调用（什么和为什么）将是输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:27:48.803

输出将是：

```
Weired Behaviour
Exception in thread "main" java.lang.NoSuchMethodError: main 
```

实际上并不奇怪。以下是 JVM 中发生的一系列活动。

当您尝试调用应用程序时，将加载主类。类的静态块在 JVM 加载类时执行 - 静态块是类初始化器的一种，仅在类加载到内存中时才被调用。

类加载完成后，JVM 会尝试找出入口点——main 方法。由于没有找到 main 方法，所以抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:31:16.197

假设你实际上有这样的东西，这样它就不会对你大喊大叫：

```
public class MyClass{

    static{
        System.out.println("Weird Behavior");
    }

    public static void main(String[] args){}

} 
```

您将看到输出：

```
Weird Behavior 
```

这是因为类中的静态块在 JVM 加载类时被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:46:16.990

**Static Initalizer 是在 JVM 加载类时执行的块，在创建类的实例之前，甚至在初始化任何静态方法或变量之前。**

这将导致打印语句**“Weired Behaviour”** ，但随后它会尝试找到**“main”方法**的入口点，然后它会抛出异常。`Exception in thread "main"`

# json - 带有 ObjectStore（本地 json）的 Dojo OnDemandGrid (dgrid)

> ID：11267008
> 
> 赞同：1
> 
> 时间：2012-06-29T18:22:28.453
> 
> 标签：json, dojo, dgrid

这段代码有什么问题？我可以获取我的 json 并使用警报对其进行调试（以便该部分与 xhr 一起使用）......例如，如果我在（xhr 的）函数中执行此操作，则 alert(data[0].name) 我得到正确的价值。网络上也没有太多示例......但是指定列并添加对象存储并没有显示任何内容......基本上，我只想加载一些 json 文件（本地）并将其呈现在网格上，但我最终将使用 REST 在我的应用程序中处理 CRUD（因此，我将在不久的将来使用 JsonRest）。

我认为它也与 AJAX 相关......我可能应该将同步设置为 true（因为看起来我的全局变量无法正常工作......未定义）。

```
define([
    "dojo/_base/declare",
    "dijit/_WidgetBase",
    "dgrid/OnDemandGrid",
    "dojo/_base/xhr",
    "dojo/store/Memory",
    "dojo/data/ObjectStore",
    "dgrid/Keyboard", 
    "dgrid/Selection"
], function(
    declare,
    _WidgetBase,
    Grid,
    xhr,
    Memory,
    ObjectStore,
    Keyboard, 
    Selection
){
    var dataStore;

    xhr.get({
        url: "app/resources/data/content.json",
        handleAs: "json"
    }).then(function(data){
    dataStore =  new ObjectStore({ objectStore:new Memory({ data: data.items }) });
    });

    return declare([_WidgetBase, Grid, Keyboard, Selection], {
    store: dataStore,
    columns:{
            name: { label: "name" },
            autodelete: { label: "autodelete" },
            groupe_id: { label: "groupe_id" },
            global: { label: "global" },
            date: { label: "date" },
            duree: { label: "duree" },
            description: { label: "description" },
            fichier: { label: "fichier" },
            pleinecran: { label: "pleinecran" },
            repertoire: { label: "repertoire" },
            taille: { label: "taille" },
            expiration: { label: "expiration" },
            id: { label: "id" },
            catergorie: { label: "catergorie" },
            brouillon: { label: "brouillon" }
        }, 

    postCreate: function() {
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:46:44.110

出于某种原因，我无法将 objectStore 传递给商店（对于 dgrid - onDemandGrid）。这次我将“数据模型”和查看器分开了。所以，我在 app/models 中有这个（例如，我的代码非常模块化）：

```
define([
    "dojo/_base/xhr",
    "dojo/store/Memory",
    "dojo/store/Observable"],
function(
    xhr,
    Memory, 
    Observable
){

    xhr.get({
        url: "app/resources/data/content.json",
        handleAs: "json",
        sync: true,
    }).then(function(data){
        contentStore = Observable(Memory({data: data}));
    });

    // global var "song_store"
    return contentStore;
}); 
```

最后，我通过将我的商店附加到它（app/ui/layout/ContentGrid）来生成这样的网格。

```
define([
    "dojo/_base/declare",
    "dijit/_WidgetBase",
    "dgrid/OnDemandGrid",
    "dgrid/Keyboard", 
    "dgrid/Selection",
    "dgrid/extensions/ColumnHider",
    "dgrid/editor",
    "app/models/content"
], function(
    declare,
    _WidgetBase,
    Grid,
    xhr,
    Memory,
    ObjectStore,
    Keyboard, 
    Selection,
    Hider,
    editor
){

    return declare([Grid, Keyboard, Selection, Hider], {
        store: contentStore,
        /*columns: {
            selected: editor({
                    label: " ",
                    autoSave: true,
                    sortable: false
                }, "checkbox"),
            Name: "Name",
            Time: "Duration",
            Year: "Year",
            Artist: "Artist",
            Album: "Album",
            Genre: "Genre"
        },*/

    columns: {
        selected: editor({
                    label: " ",
                    autoSave: true,
                    sortable: false
                }, "checkbox"),
        nom: "Name",
        autodelete: "Auto-delete",
        groupe_id: "Groupe ID",
        global: "Global",
        date: "Date",
        duree: "Lenght",
        description: "Description",
        fichier: "Filename",
        pleinecran: "Fullscreen",
        repertoire: "Folder",
        taille: "Size",
        expiration: "Expired",
        id: "id",
        catergorie: "Category",
        brouillon: "Example"
    },

    });
}); 
```

# xcode - iphone 无线内部分发未通过网站下载到设备上

> ID：11267010
> 
> 赞同：3
> 
> 时间：2012-06-29T18:22:36.737
> 
> 标签：xcode, code-signing, enterprise, over-the-air

设置一切看起来不错，证书，规定等。应用程序开始下载，然后收到消息...

此时无法安装应用程序。

这是我们在控制台上得到的。

证书上的一切看起来都不错，等等。 AD HOC 工作正常。

企业签名的 .IPA 是否应该能够像 Ad-Hoc 一样在 iTunes 上拖放？这也行不通……？？？？

```
Jun 29 14:16:23 iPhone-4GS-IOS-60-Beta installd[30] <Error>: 0x2ffa6000 handle_install: Install of "/var/mobile/Media/Downloads/-1349820530180162939/-5817434632371065835" requested by itunesstored
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: 0x2ffa6000 __MobileInstallationInstall_Server_block_invoke_0: Installing app [REMOVED]
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: Jun 29 14:16:24  SecTrustEvaluate  [leaf CriticalExtensions IssuerCommonName]
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta lockdownd[28] <Error>: Jun 29 14:16:24  SecTrustEvaluate  [leaf AnchorTrusted NonEmptySubject]
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta lockdownd[28] <Error>: Jun 29 14:16:24  SecTrustEvaluate  [leaf AnchorTrusted NonEmptySubject]
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: entitlement 'get-task-allow' has value not permitted by a provisioning profile
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: 0x2ffa6000 verify_signer_identity: MISValidateSignatureAndCopyInfo failed for /var/tmp/install_staging.drjhzr/foo_extracted/Payload/[REMOVED] 0xe8008016
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: 0x2ffa6000 do_preflight_verification: Could not verify executable at /var/tmp/install_staging.drjhzr/foo_extracted/Payload/[REMOVED]
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: 0x2ffa6000 install_application: Could not preflight application install
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta itunesstored[65] <Error>: 0x2fe93000 MobileInstallationInstall: failed with -1
Jun 29 14:16:24 iPhone-4GS-IOS-60-Beta installd[30] <Error>: 0x2ffa6000 handle_install: API failed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T19:09:01.340

对于企业/内部分发，必须使用与存档/分发过程中使用的相同配置文件对发布版本进行签名。

# python - 对大 numpy 矩阵的单元格进行排序

> ID：11267011
> 
> 赞同：1
> 
> 时间：2012-06-29T18:22:42.397
> 
> 标签：python, numpy

我创建了一个大的（比如 4000 X 4000）numpy 浮点矩阵。我按浮点值对矩阵的单元格进行排序，生成一个`(row,col,value)`元组列表。这是我的代码（简化）：

```
def cells(matrix):
  shape = np.shape(matrix)
  for row in range(shape[0]):
    for col in range(shape[1]):
      yield (row, col, matrix[row,col])

# create a random matrix
matrix = np.random.randint(100, size=(4000,4000))
# sort the cells by value
sorted_cells = sorted(cells(matrix), key=lambda x: x[2]) 
```

我知道逐个单元格的产量是低效的，但我不知道如何`(row, col, value)`使用纯 numpy 迭代矩阵的元组？**也许这才是真正的问题**！

我当前方法的问题是我的计算机在排序步骤中完全死机。

如果我这样做，这不是问题：`sorted(matrix.flatten())`它工作正常，实际上非常快，但是我没有得到行和列......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T19:21:07.397

[numpy.argsort](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html)是你的朋友。它不是实际对给定的数组进行排序，而是返回一个整数索引数组，告诉您如何将数组重新排序为排序顺序。鉴于此，您可以对行值和列值应用相同的排序。

这是一些代码：首先我们生成一个矩阵；在这里，我使用了不同数量的行和列，以便我们可以轻松地检查结果是否正确。

```
>>> import numpy as np
>>> matrix = np.random.randint(100, size=(4000, 5000))
>>> rows, cols = np.indices(matrix.shape) 
```

现在用于`argsort`获取索引。

```
>>> reindex = np.argsort(matrix.flatten()) 
```

使用这些索引，我们可以恢复排序矩阵：

```
>>> matrix.flat[reindex]
array([ 0,  0,  0, ..., 99, 99, 99]) 
```

*以及*相应的行和列。

```
>>> rows.flat[reindex]
array([2455, 2870, 1196, ...,   56,   56, 3618])
>>> cols.flat[reindex]
array([ 863, 1091, 4966, ..., 3959, 3887, 4833]) 
```

为了验证答案，让我们检查第一行列对是否确实对应于 的矩阵条目`0`，并且最后一行列对对应于`99`：

```
>>> r = rows.flat[reindex]
>>> c = cols.flat[reindex]
>>> matrix[r[0], c[0]]
0
>>> matrix[r[-1], c[-1]]
99 
```

编辑：正如 nye17 的回答所指出的，行和列可以更直接地从`reindex`数组中恢复。

```
>>> r, c = divmod(reindex, matrix.shape[1]) 
```

这一切都运行得很快（排序步骤只需几秒钟）。我猜您的原始代码锁定机器的原因是您生成的列表占用了*大量*内存；通过坚持使用 numpy 数组而不是列表和元组，您的内存开销会显着降低。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:26:04.213

马克打败了我，但只有我的 2 美分

以 2x2 矩阵为例，

```
import numpy as np
# create a random matrix
matrix = np.random.randint(100, size=(2,2))
indice = np.argsort(matrix, axis=None)
# you can also use `divmod` per mark's version
ind_i = indice//2
ind_j = np.mod(indice, 2)
for i, j in zip(ind_i, ind_j) :
    print("%4d %4d %10.5f" % (i, j, matrix[i,j])) 
```

它给

```
1    0   12.00000
0    1   23.00000
1    1   59.00000
0    0   63.00000 
```

# ruby-on-rails - 有没有办法从 Rails 控制台查看方法的源代码？

> ID：11267014
> 
> 赞同：11
> 
> 时间：2012-06-29T18:22:57.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设我有以下课程：

```
class User < ActiveRecord::Base
  def fullname
    "#{self.first_name} #{self.last_name}"
  end
end 
```

我是否可以进入控制台并以某种方式在控制台中查看全名方法的源代码输出？就像，它看起来像......

```
irb(main):010:0> omg_console_you_are_awesome_show_source(User.fullname)
[Fri Jun 29 14:11:31 -0400 2012] => def fullname
[Fri Jun 29 14:11:31 -0400 2012] =>   "#{self.first_name} #{self.last_name}"
[Fri Jun 29 14:11:31 -0400 2012] => end 
```

或者真的有什么方法可以查看源代码？谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-29T19:07:00.207

您也可以使用类似于类固醇上的 IRB 的pry [(http://pry.github.com/ )。](http://pry.github.com)您可以执行以下操作：

```
[1] pry(main)> show-source Array#each

From: array.c in Ruby Core (C Method):
Number of lines: 11
Owner: Array
Visibility: public

VALUE
rb_ary_each(VALUE ary)
{
    long i;

    RETURN_ENUMERATOR(ary, 0, 0);
    for (i=0; i<RARRAY_LEN(ary); i++) {
    rb_yield(RARRAY_PTR(ary)[i]);
    }
    return ary;
}
[2] pry(main)> show-doc Array#each

From: array.c in Ruby Core (C Method):
Number of lines: 11
Owner: Array
Visibility: public
Signature: each()

Calls block once for each element in self, passing that
element as a parameter.

If no block is given, an enumerator is returned instead.

   a = [ "a", "b", "c" ]
   a.each {|x| print x, " -- " }

produces:

   a -- b -- c -- 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T18:32:46.970

不完全是您要问的，但这个[Railscast](http://railscasts.com/episodes/48-console-tricks-revised?view=asciicast)可能会有所帮助。

它教你一个技巧，可以让你从 Rails 控制台在文本编辑器中打开方法。

**更新：**

我刚刚意识到链接在付费墙后面......这是技巧的摘要。

将此添加到您的 ~/.irbrc 文件中

```
class Object
  def mate(method_name)
    file, line = method(method_name).source_location
    `mate '#{file}' -l #{line}`
  end
end 
```

...其中 mate 是打开 TextMate 的 CLI 命令（当然 subl 可以在这里用于 Sublime Text）。

然后在控制台中简单地调用

```
helper.mate(:number_to_currency) 
```

...其中 number_to_currency 是您要查看的来源的方法。

顺便说一句，如果你还没有，你应该订阅[Railscast Pro](http://railscasts.com/pro)。IMO，没有比每月花 9 美元更好的方法了。并且要透露，除了成为满意的客户之外，我与该网站没有任何关系。

# regex - 如何使用 awk 忽略空行和注释行

> ID：11267015
> 
> 赞同：5
> 
> 时间：2012-06-29T18:23:17.360
> 
> 标签：regex, linux, bash, awk

我正在写这段代码：

```
awk -F'=' '!/^$/{arr[$1]=$2}END{for (x in arr) {print x"="arr[x]}}' 1.txt 2.txt 
```

此代码忽略空白行，但我也想忽略以 # 开头的行（注释）。

知道如何添加多个模式吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T18:26:22.133

更改`!/^$/`为

```
!/^($|#)/ 
```

或者

```
!/^($|[:space:]*#)/ 
```

如果您想忽略`#`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-29T18:27:10.410

```
awk 'NF && $1!~/^#/' data.txt 
```

将打印所有非空行（字段`NF`数不为零）和不包含`#`作为第一个字段的行。

它将正确处理一行空白，因为 NF 将为零，并且前导空白`$1`将忽略它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-16T21:36:33.840

```
awk 'NF && !/^[:space:]*#/' data.txt 
```

因为 '[:space:]*' 捕获*一个*或多个空格。

# java - Java中如何乘法

> ID：11267020
> 
> 赞同：0
> 
> 时间：2012-06-29T18:23:41.707
> 
> 标签：java, android, numbers, multiplication

我正在制作一个按钮，当按下它时，它将一个数字乘以 2，但我一直收到错误消息，提示无效赋值运算符，红色在 * 下方，这应该意味着在 java 中相乘，对吗？

```
mult.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        ---->   counter  *2;
        display.setText("Your total is " + counter);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:25:55.823

`---->`不是运算符。

`counter*2`将乘以`counter`2 保持`counter`原样。

选项1：

`counter=counter*2;`

选项 2：

`counter*=2;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:25:51.953

假设在 counter * 2 之前没有代码，它应该是 counter = counter * 2; 或计数器 *=2；您实际上并没有通过说 * 2 来设置任何内容：P

希望 counter 是一个全局变量，以便它实际上保存在方法之外哈哈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:39:03.013

我认为您`totally unintentionally` **错过了左侧的赋值运算符和左值来保存结果**...

好吧……看到这个……

```
int counter = 0;

mult.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        counter = counter * 2;     

        display.setText("Your total is " + counter);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-07T21:41:11.333

```
mult.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        int counter_output=counter  *2;
        display.setText("Your total is " + counter_output);
    }
    }); 
```

这会将乘法保存到`int`变量中，然后使用保存的乘法打印变量将有助于解决您的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-02-17T12:55:56.703

```
// multiply without *
        int num1 = 3, num2 = 5;
        int mul = 0,j=0;
        while(j<num2)
        {
        for (int i = 0; i < num2; i++) {
            mul = mul + num1;
            j++;
        }
        System.out.println("Multiple "+mul); 
```

# android - 可拖动面具安卓

> ID：11267024
> 
> 赞同：0
> 
> 时间：2012-06-29T18:23:58.983
> 
> 标签：android, android-canvas

我正在寻找一个教程来实现一个很容易用actionscript创建的效果，但需要在`JAVA`android中完成。

基本上我想要两张图像相互叠加，一张上面有一个可拖动的蒙版层..基本上是这样的：

[http://flashexplained.com/actionscript/how-to-easy-make-a-draggable-mask-with-actionscript/](http://flashexplained.com/actionscript/how-to-easily-make-a-draggable-mask-with-actionscript/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T12:29:47.827

你必须有`RelativeLayout`这种方式：

```
 <RelativeLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <ImageView 
            android:src="@drawable/ic_launcher"
            android:layout_alignTop="true"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignBottom="true"/>
        <ImageView 
            android:id="@+id/top_mask"
            android:src="@drawable/ic_launcher"
            android:layout_alignTop="true"
            android:layout_alignBottom="true"/>
    </RelativeLayout> 
```

和代码来访问上面的掩码并以这种方式设置其拖动事件：

```
ImageView img = (ImageView)findViewById(R.id.top_mask);
                img.setOnDragListener(new View.OnDragListener() {
                    @Override
                    public boolean onDrag(View v, DragEvent event) {
                        RelativeLayout.LayoutParams params = (android.widget.RelativeLayout.LayoutParams) v.getLayoutParams();
                        params.topMargin = (int) event.getX();
                        params.bottomMargin = (int) event.getY();
                        v.setLayoutParams(params);
                        return false;
                    }
                }); 
```

我没有测试过这段代码。我刚写了这个。我相信这必须帮助您入门甚至是完整的解决方案:)

问候， 阿基夫·哈米德

# javascript - JIT - 将 Spacetree 保存为图像

> ID：11267026
> 
> 赞同：2
> 
> 时间：2012-06-29T18:24:10.950
> 
> 标签：javascript, canvas, infovis, thejit, space-tree

我正在使用 JavaScript InfoVis Toolkit (http://thejit.org/) 并尝试将我输出的 Spacetree 保存到图像中。Spacetree 被输出到画布上。这个问题真的让我很沮丧。我试过了：

1.  在新窗口中打开画布
2.  在新窗口中打开画布所在的div
3.  使用 Canvas2Image (http://www.nihilogic.dk/labs/canvas2image/)

这是我当前的 Javascript 方法（绑定到按钮）：

```
 function saveImage(div_id) {

        var canvas = document.getElementById("tree-canvas");
        Canvas2Image.saveAsJPEG(canvas);
    } 
```

但是，每次（我的意思是所有 3 个选项）我都会得到我的节点，而不是分配给节点的标签。这真是令人沮丧！

有没有人遇到过这个？这应该是以前遇到过的问题。。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T21:20:47.317

对于将来遇到这种情况的任何人，我通过以下方式解决了这个问题：

将标签类型更改为“本机”：

```
 Label: {
                type: 'Native',
                color: '#000000'
            }, 
```

我还抓取了画布 ID（顺便说一下 HTML 5）并将图像扔到了一个新窗口中：

```
 function saveImage() {

        var canvas = document.getElementById("canvas");
        window.open(canvas.toDataURL("image/jpeg"));
    } 
```

# ajax - Radgrid 从父行命令按钮以插入模式打开/展开子 DetailGridView

> ID：11267028
> 
> 赞同：2
> 
> 时间：2012-06-29T18:24:14.130
> 
> 标签：ajax, insert, telerik, radgrid

我正在使用 Telerik RadGrid 来显示和编辑分层数据。这听起来可能很奇怪——其中一项要求是在单击父行中的链接时，在插入模式下打开子详细信息网格。这需要两件事。子网格的扩展，并以插入模式加载此网格。

到目前为止，这是我使用 Telerik 文档中的建议所尝试的；但是，当调用 rebind 说子详细信息网格找不到它的 linqDataSourceControl 时，这不起作用并引发异常；但是，当下面的代码正在执行时，这个控件确实存在（我检查过）。

从父行命令按钮以插入模式打开子 DetailGridView 的解决方案是什么？

标记：

```
...
    <DetailTables>
        <telerik:GridTableView>
        ...
        <Columns>
            <ItemTemplate>
                <asp:LinkButton ID="addChildVendorRating" runat="server" CommandName="AddNewChildRating" CausesValidation="false" CssClass="normal-link" CommandArgument='<%# Eval("VendorM2MEntityToQualID")%>'>[Add Rating]</asp:LinkButton>
            </ItemTemplate>
        </Columns>
        <DetailTables>
            <!-- I Need this to be be expanded and in insert mode when addChildVendorRating command link is clicked -->
            <telerik:GridTableView>
        </<DetailTables> 
```

代码：

```
protected void gridRatings_ItemCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
{
    if (e.CommandName == "AddNewChildRating") {
                GridDataItem parentRow = e.Item as GridDataItem;
                GridTableView parentGridView = parentRow.GetClosestParentControlByType<GridTableView>();
                RadGrid parentGrid = parentGridView.GetClosestParentControlByType<RadGrid>();

                parentRow.Expanded = true;
                //parentGridView.HierarchyDefaultExpanded = true;
                //parentGridView.DetailTables[0].InsertItem();
                parentGridView.DetailTables[0].IsItemInserted = true;
                parentGridView.DetailTables[0].Rebind();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:46:38.777

我想通了，希望这对其他人有帮助。解决方案是将命令处理程序 e.Item 强制转换为`GridDataItem`; 这使您可以访问`NestedTableViews`- 谜题的关键。这是与数据不同的实际连接的详细视图`DetailTables`。一旦你设置`IsItemInserted`它并重新绑定它，它就会像魅力一样工作。

这使您可以一次性扩展一个部分并将子部分置于插入模式。下面是完整的代码。

```
 protected void gridRatings_ItemCommand(object sender, Telerik.Web.UI.GridCommandEventArgs e)
    {
        if (e.CommandName == "AddNewChildRating") {
                    GridDataItem parentRow = e.Item as GridDataItem;
                    GridTableView parentGridView = parentRow.GetClosestParentControlByType<GridTableView>();

                    if (parentGridView != null)
                    {
                        var targetGridView = ((GridDataItem)e.Item).ChildItem.NestedTableViews[0];
                        if (targetGridView != null)
                        {
                            parentRow.Expanded = true;
                            targetGridView.IsItemInserted = true;
                            targetGridView.Rebind();
                        }
                    }

} 
```

# c# - Html 与 C# 应用程序 .netCF 2.0/3.5 对话

> ID：11267031
> 
> 赞同：0
> 
> 时间：2012-06-29T18:24:33.197
> 
> 标签：c#, javascript, html, webserver, tcplistener

所以我有一个 C# 应用程序，我想通过浏览器远程更改值。我一直在进行一些挖掘，发现使用 TCPListener 的嵌入式网络服务器，如下所示：[http](http://webserver.codeplex.com/) ://webserver.codeplex.com/但是，它适用于 .NET，我正在使用 CF。我的目标是拥有一个带有一些 javascript 的静态 HTML 页面。例如，按钮 onclick... 来自 C# 中的 HTML 显示字符串，通过调用或其他方式。这可能吗？我必须从另一台计算机远程执行此操作，它将访问此 html 页面并进行更改。我不能使用 ASP。有没有人尝试过这个？

谢谢！

# sql - 性能：针对 NULL 与 @@ROWCOUNT 的 COALESCE 结果集

> ID：11267033
> 
> 赞同：0
> 
> 时间：2012-06-29T18:24:46.820
> 
> 标签：sql, performance, select, stored-procedures, null

我目前正在编写一个存储过程，它为调用应用程序提供有效城市和州值的检索。
当提供 zip_code 时，存储过程将返回指定输入参数的所有有效城市/州组合的列表。
但是，如果 zip_code 不存在，则存储过程必须返回错误字符串“ZipCode Wrong！” 返回到调用应用程序而不是空数据集。
我考虑了两种方法：

## 第一种方法

```
SELECT City, State FROM ZipCodeTable WHERE Zip = @ZipCode
IF (@@ROWCOUNT = 0)
return 'ZipCode Wrong!' 
```

## 第二种方法

```
SELECT COALESCE(  
               (SELECT City, State FROM ZipCodeTable WHERE Zip=@ZipCode FOR XML PATH ('')),
               (SELECT 'ZipCode Wrong!') FOR XML PATH ('')) 
```

由于此事务每秒将运行很多次，我想让它尽可能高效。从性能的角度来看，哪个更有效？另外，如果还有其他更好的方法，请随时告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:40:24.743

也许你不使用 a`COUNT`也不使用 a`SELECT`因为一个*计算*你的结果，另一个返回一个集合。

你*真的*是想问它是否存在......那么为什么不使用用于该目的的条款呢？

`EXISTS`
[http://msdn.microsoft.com/en-us/library/ms188336.aspx](http://msdn.microsoft.com/en-us/library/ms188336.aspx)

相反，如果您想要返回结果（如果存在），如果不存在则返回错误消息，那么`@@ROWCOUNT`可能会更快......您应该使用分析器对其进行基准测试。

不过，请考虑您的用例。您是否期望更多的错误和有效的回报？如果是这样，那么`EXISTS`作为过滤器的语法可能会更好......如果您期望更多的有效返回，那么`SELECT`with`@@ROWCOUNT`可能是首选。

对于这个，答案非常直接：**这取决于**

你用的是什么数据库？也许有一种特定于实现的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:27:27.283

IF Then 分支一般需要更多时间，COALESCE 更容易让你的处理器优化。

也就是说，它们可能会以相同的速度运行，我会加快测试这两种解决方案的速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:31:12.940

不需要时不要创建整个结果，只需数一下即可：

```
declare @cnt int
select @cnt = count(*) from ZipCodeTable where Zip = @ZipCode
if (@cnt) begin
  return 'ZipCode Wrong!'
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T18:39:50.143

我认为你应该在应用层处理这个问题。查看返回的行数并以这种方式检测错误。比 SQL 解决方案更快、更简单、更简洁。

# c - 这是在 C 或 Perl 中终止 for 循环的合适方法吗？

> ID：11267036
> 
> 赞同：2
> 
> 时间：2012-06-29T18:24:53.410
> 
> 标签：c, perl, coding-style

我在代码库中看到了一段类似的 perl 代码，想知道这（设置`i=100`）是否是摆脱 for 循环的好方法？这有什么陷阱吗？

```
int a[100];

...

bool check_if_array_contains_29()
{
    bool result = false;
    for(int i=0; i<100; ++i)
    {
        if(a[i] == 29)
        {
            result = true;
            i = 101;
        }
    }
    return result;
} 
```

这更像是我会做的。

```
bool check_if_array_contains_29()
{
    bool result = false;
    for(int i=0; i<100 && !result; ++i)
    {
        if(a[i] == 29)
        {
            result = true;
        }
    }
    return result;
} 
```

编辑-1：

我不是在寻找 perl 中的 oneliner 来实现该功能。真正的代码（功能）要复杂得多。这只是我简化以解释我的观点的一个示例（for 循环的提前终止）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T18:28:31.727

你为什么不这样做：

```
bool check_if_array_contains_29()
{
    for(int i=0; i < 100; ++i)
    {
         if (a[i] == 29)
           return true;
    }
    return false;
} 
```

编辑：
我知道有些人觉得多个 return 语句太可怕了，应该不惜一切代价避免，但对我来说，在像所提供的方法中具有多个 return 使代码更易于阅读和遵循。

编辑 2：
附加版本，因此如果该方法需要有一些副作用或执行一些附加操作，您可以使用 break 语句，或者您可以调整 for 循环条件，或者您可以添加一些标签和一些 goto。

```
bool check_if_array_contains_29_take2()
{
    bool result = false;
    for (int i=0; i < 100; ++i)
    {
        if (a[i] == 29)
        {
            result = true;
            break;
        }
    }

    // Do Other Stuff
    return result;
}

bool check_if_array_contains_29_take3()
{
    bool result = false;
    for (int i=0; !result && i < 100; ++i)
    {
        result = a[i] == 29;
    }

    // Do Other Stuff
    return result;
}

// Special edition for those who can't get enough goto
bool check_if_array_contains_29_and_do_more_stuff_without_early_return()
{
    bool result = false;
    for (int i=0; i < 100; ++i)
    {
        if (a[i] == 29)
        {
            result = true;
            break;
        }
    }

    if (!result)
        goto error;

    // Do some other stuff in the code here
    goto done;

done:
    return result;
error:
    result = false;
    goto done;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T18:28:11.523

有什么问题`break`或者只是`return true`在循环内部？它清楚地传达了意图，并且不依赖于循环条件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-29T18:36:23.827

在 Perl 中，您可以使用[last](http://perldoc.perl.org/functions/last.html)（可能带有标签）来提前退出循环。

要查找 29 在 array 中的第一次出现`@x`，您将使用[List::MoreUtils::first_index](http://search.cpan.org/perldoc/List%3a%3aMoreUtils)：

```
 my $i = first_index { $_ == 29 } @x;
 $i > -1 or die "Cannot find 29 in array\n"; 
```

对于循环变量的愚蠢赋值，我想不出任何技术陷阱，但它完全是 WTF，并且让阅读代码的人感到困惑是一个非常重要的陷阱。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T18:41:34.200

在 C 中，您将使用`break`，它退出最小的循环（指令所在的循环）：

```
for(...) {
    if (a[i] == 29) {
        result = true;
        break;
    }
} 
```

但是在您的情况下，您可以简单地`exit`使用整个功能：

```
for(...) {
    if (a[i] == 29)
        return true;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-29T18:35:58.333

正确的方法是使用`break`C 或`last`Perl中的指令

```
int a[100];

...

bool check_if_array_contains_29()
{
    bool result = false;
    for(int i=0; i<100; ++i)
    {
        if(a[i] == 29)
        {
            result = true;
            break;
        }
    }
    return result;
} 
```

虽然第一种方式是可以接受的。关于第二个，是有效的，但我不会使用它，因为有更简单的方法可以做到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T18:36:12.767

使用`break`：

```
 bool check_if_array_contains_29()
    {
       bool result = false;
       for(int i=0; i<100; ++i)
       {   
          if(a[i] == 29)
          {
            result = true;
            break;
          }
        }
     return result;
    } 
```

# c# - ASP.NET、Gridview 和 Linqdatasource 在更新时生成错误

> ID：11267055
> 
> 赞同：0
> 
> 时间：2012-06-29T18:25:56.303
> 
> 标签：c#, asp.net, linq, entity-framework-4

样本

```
<asp:GridView ID="data_basic_addresses" runat="server" AllowPaging="False" BorderWidth="0" AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="AddressId" HorizontalAlign="Center" 
DataSourceID="LinqAddressDS" PageSize="20" CssClass="GridViewClass">
<Columns>
   <asp:BoundField DataField="AddressId" HeaderText="AddressId" SortExpression="AddressId" ReadOnly="True"/>
   <asp:BoundField DataField="Address" HeaderText="Street" SortExpression="Address"  />
   <asp:BoundField DataField="City" HeaderText="City" SortExpression="City"  />
   <asp:BoundField DataField="State" HeaderText="State" SortExpression="State"  />
   <asp:BoundField DataField="Zip" HeaderText="Zip" SortExpression="Zip"  />
   <asp:CommandField HeaderText="Options" ShowDeleteButton="True" ShowEditButton="True" />
</Columns>
</asp:GridView>

<asp:LinqDataSource ID="LinqAddressDS" runat="server" OnContextCreating="LinqDS_ContextCreating" Where="AcctNo == @AcctNo"
ContextTypeName="MyProject.Models.DB_DataDataContext" EnableDelete="True" EnableInsert="True" 
EnableUpdate="True" TableName="Tbl_Addresses" OrderBy="AddressId">
    <WhereParameters>
        <asp:QueryStringParameter DefaultValue="1" Name="AcctNo" QueryStringField="AcctNo" Type="Int32" />
    </WhereParameters>
</asp:LinqDataSource> 
```

我在 page_load 方法中设置 WhereParamater 值

每次更改数据后按下更新链接时，我都会收到一条错误消息，指出“发生严重错误。调用目标引发了异常”。或“无法访问已处置的对象”

当网格视图重新加载时，数据会更新。我所做的一切似乎都没有改变。有人对为什么有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:44:57.577

找到解决问题的方法

我试图传递我自己的模型连接实例以在`LinqDS_ContextCreating`方法中使用。这适用于除更新命令之外的所有功能。我进入并更新了`model.designer.cs`文件中的模型默认连接字符串，现在更新工作。

# php - PHP - 使用 FTP 合并文件

> ID：11267057
> 
> 赞同：1
> 
> 时间：2012-06-29T18:26:05.747
> 
> 标签：php, ftp, merge, remote-server, chunks

因此，我正在尝试使用 FTP 将文件从本地服务器复制到远程服务器。问题是，我需要分块执行此操作。

到目前为止，根据我的研究，看起来通过在我的本地服务器上创建两个文件可能最容易做到这一点：要复制的文件和一个包含当前块的小型临时文件。然后，我应该简单地将该块与远程文件合并。

问题是，我无法附加文件。我无法弄清楚该`ftp://`协议是如何工作的，也找不到关于如何使用 cURL 进行操作的全面解释。我找到的最接近的是[this](http://www.cre8asiteforums.com/forums/index.php?showtopic=67006)，但我无法让它工作。

以下是我到目前为止所写的内容。我已经对其进行了评论，因此您可以浏览一下以了解想法，然后看看我卡在哪里-代码并不复杂。你建议我做什么？如何使用 FTP 将本地服务器上的文件附加到远程服务器上的文件？

```
<?php

// FTP credentials
$server = HIDDEN;
$username = HIDDEN;
$password = HIDDEN;

// Connect to FTP
$connection = ftp_connect($server) or die("Failed to connect to <b>$server</b>.");

// Login to FTP
if (!@ftp_login($connection, $username, $password))
{
    echo "Failed to login to <b>$server</b> as <b>$username</b>.";
}

// Destination file (where the copied file should go)
$destination = 'final.txt';

// The file on my server that we're copying (in chunks) to $destination.
$read = 'readme.txt';

// Current chunk of $read.
$temp = 'temp.tmp';

// If the file we're trying to copy exists...
if (file_exists($read))
{
    // Set a chunk size (this is tiny, but I'm testing
    // with tiny files just to make sure it works)
    $chunk_size = 4;

    // For reading through the file we want to copy to the FTP server.
    $read_handle = fopen($read, 'r');

    // For writing the chunk to its own file.
    $temp_handle = fopen($temp, 'w+');

    // Loop through $read until we reach the end of the file.
    while (!feof($read_handle))
    {
        // Read a chunk of the file we're copying.
        $chunk = fread($read_handle, $chunk_size);

        // Write that chunk to its own file.
        fwrite($temp_handle, $chunk);

        ////////////////////////////////////////////
        ////                                    ////
        ////       NOW WHAT?? HOW DO I          ////
        ////       WRITE / APPEND THAT          ////
        ////       CHUNK TO $destination?       ////
        ////                                    ////
        ////////////////////////////////////////////
    }
}

fclose($read_handle);
fclose($temp_handle);
ftp_close($ftp_connect);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:38:08.790

首先，我认为您不需要创建 tmp 文件。您可以使用[手册](http://www.php.net/manual/en/function.fopen.php)`a`中定义的“附加模式”( )或与标志一起使用附加到目标文件。`file_put_contents``FILE_APPEND`

file_put_contents 确实将文件名作为参数而不是文件句柄，因此它基本上`fopen`对您有用，这意味着如果您经常写入，它会`fopen`经常与使用文件句柄 a​​d 相比不太理想`fwrite`。

```
<?php
// The URI of the remote file to be written to
$write = 'ftp://username1:password1@domain1.com/path/to/writeme.txt';

// The URI of the remote file to be read
$read = 'ftp://username2:password2@domain2.com/path/to/readme.txt';

if (file_exists($read)) // this will work over ftp too
{
    $chunk_size = 4;
    $read_handle = fopen($read, 'r');
    $write_handle = fopen($write, 'a');

    while (!feof($read_handle))
    {
        $chunk = fread($read_handle, $chunk_size);
        fwrite($write_handle, $chunk);
    }
}

fclose($read_handle);
fclose($write_handle);
?> 
```

附带说明：PHP 具有流包装器，使 ftp 访问变得轻而易举，而无需使用 ftp 函数本身。

# windows - 本地测试：在 XP 中创建第二个 DocumentRoot？

> ID：11267062
> 
> 赞同：0
> 
> 时间：2012-06-29T18:26:43.193
> 
> 标签：windows, testing, vhosts, hosts

我正在尝试让我的计算机优先考虑未广播的域名：www.mythiddomain.com。我设置了我的 vhosts 文件，如下所示：

```
<VirtualHost *:80>
ServerName mythirddomain.com
DocumentRoot "C:/www"
<Directory "C:/www">
Options +Indexes FollowSymlinks +ExecCGI
AllowOverride AuthConfig FileInfo
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

我尝试以多种方式编辑我的主机文件，包括`127.0.0.1 mythirddomain.com`and `198.168.1.2 mythirddomain.com`，但我只是瞎了眼。在更改 vhosts 文件后，我不确定下一步是什么。

行动：浏览到 mythirddomain.com。

预期结果：获取我的 index.php 文件。

实际结果：获取 inuit.com（他们拥有 mythirddomain.com）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:21:31.780

编辑以下文件：

```
%SystemRoom%\system32\drivers\etc\hosts 
```

像这样添加一行：

127.0.0.1 mythirddomain.com

这显然只会对本地机器产生任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T00:24:53.177

`127.0.0.1 mythirddomain.com`是正确的。我的浏览器无法正确解析 mythirddomain.com 的原因是我没有重新启动浏览器。

# php - 如何按票数排序选项

> ID：11267063
> 
> 赞同：0
> 
> 时间：2012-06-29T18:26:45.610
> 
> 标签：php, javascript, jquery, mysql, html

我刚刚使用教程“创建”了一个按票数排序歌曲的脚本（参见此处：[http ://radiowhisper.com/demo/demo.php）。](http://radiowhisper.com/demo/demo.php)现在，问题是：**每次**我刷新页面时，我都会看到歌曲名称是随机的。我如何按票数排序？（**一直 -> 不随机**）。

**信息：歌曲名称写在 PhpMyAdmin 的“排序对象”表中。**

教程：[http ://tutorialzine.com/2009/11/jquery-sort-vote/](http://tutorialzine.com/2009/11/jquery-sort-vote/)

文件：

**演示.php**

```
<?php

// Hiding notices:
error_reporting(E_ALL^E_NOTICE);

// Including file for the DB connection:
define("INCLUDE_CHECK",1);
require 'connect.php';

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Radio Whisper - Top 40</title>

<link rel="stylesheet" type="text/css" href="demo.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>

<script type="text/javascript" src="script.js"></script>

</head>

<body>

<div id="main">
    <h1>Radio Whisper - Top 40</h1>
    <h2>Ordonati melodiile in functie de preferinte.</h2>

    <hr />

<?php

// Checking whether the user has voted today:

$voted=false;

$vcheck=mysql_query("   SELECT 1 FROM sort_votes
                        WHERE ip='".$_SERVER['REMOTE_ADDR']."'
                        AND date_submit=CURDATE()");

if(mysql_num_rows($vcheck)==1)
    $voted=true;

// If we are not on the data.php?results page:
if(!array_key_exists('results',$_GET))
{
    echo '<ul class="sort">';

    // Showing the tutorials by random
    $res = mysql_query("SELECT * FROM sort_objects ORDER BY RAND()");

    while($row=mysql_fetch_assoc($res))
    {?>
        <li id="li<?php echo $row['id']?>">
        <div class="tut">
            <div class="tut-img">
                <img src="<?php echo $row['img']?>" width="50" height="50" alt="<?php echo $row['title']?>" />
                <div class="drag-label"></div>
            </div>

            <div class="tut-title">
                <a href="<?php echo $row['url']?>" target="_blank" title="Open it in a new window!"><?php echo $row['title']?></a>
            </div>

            <div class="tut-description"><?php echo $row['description']?></div>
            <div class="clear"></div>
        </div>
        </li>
    <?php } ?>

   </ul>

    <div class="button-holder">
        <?php if(!$voted):?><a href="" id="submitPoll" class="button">Trimite topul<span></span></a><?php endif;?>
        <a href="?results" class="button">Vezi rezultatele<span></span></a>
    </div>

<?php
}
else require "results.php";
// The above require saves us from having to style another separate page

?>

<!-- The form below is not directly available to the user -->

<form action="?results" id="sform" method="post">
<input name="sortdata" id="sortdata" type="hidden" value="" />
</form>

</body>
</html> 
```

**演示.css**

```
body,h1,h2,h3,p,quote,small,form,input,ul,li,ol,label{
    /* A simple page reset */
    margin:0px;
    padding:0px;
}

body{
    color:white;
    font-size:13px;
    background: url(img/bg.jpg) repeat-x #003951;
    font-family:Arial, Helvetica, sans-serif;

    text-shadow:2px 2px 5px #333333;
}

.tut-title{
    font-size:20px;
    font-weight:bold;
}

.tut-description{
    color:#DDDDDD;
    font-family:Arial,Helvetica,sans-serif;
    font-size:17px;
    padding-top:5px;
}

.tut-img{
    border:0px solid white;
    float:right;
    margin:0 110px 0 0;

    width:50px;
    height:50px;
    overflow:hidden;

    /* CSS3 Box Shadow */
    -moz-box-shadow:2px 2px 3px #333333;
    -webkit-box-shadow:2px 2px 3px #333333;
    box-shadow:2px 2px 3px #333333;
    cursor:n-resize;
    position:relative;
}

.drag-label{
    /* The DRAG label that scrolls into visibility on hover */
    background:url(img/label_small.png) no-repeat;
    width:71px;
    height:25px;
    position:relative;
    margin-left:25px;
}

a.button{
    /* The pretty buttons on the bottom are actually hyperlinks.. */
    color:#434343 !important;
    display:block;
    float:left;
    font-size:10px;
    font-weight:bold;
    height:23px;
    margin:10px;
    padding:12px 10px 0 12px;
    position:relative;
    text-shadow:none;
    text-transform:uppercase;

    /* This is the left part of the button background image */

    background:transparent url(img/button_gray_bg.png) no-repeat;
}

a.button:hover{
    text-decoration:none !important;
    background-position:bottom left;
}

a.button:active{
    /* Offsetting the text 1px to the bottom on mouse-click*/
    padding-top:13px;
    height:22px;
}

a.button span{
    /* This span holds the right part of the button backgound */
    background:transparent url(img/button_gray_bg.png) no-repeat right top;
    height:35px;
    position:absolute;
    right:-2px;
    top:0;
    width:10px;
    display:block;
}

a.button:hover span{
    background-position:bottom right;
}

.button-holder{
    padding-left:107px;
}

ul.sort{
    /* This UL gets converted to a sortable by jQuery */
    font-family:"Myriad Pro",Arial,Helvetica,sans-serif;
    font-size:20px;
}

ul.sort li{
    margin:25px 50px 25px 0;
    height:102px;
    list-style:none;
}

.chart{
    /* Styling the chart container */
    background:#002A3C;
    border:1px solid #005A7F;
    height:300px;
    width:550px;
}

.bar{
    /* Each bar in the chart is a div. Colors and width are assigned later */
    height:17px;
    margin:15px;
    overflow:hidden;
    padding:15px 10px 10px;
    text-shadow:none;
    white-space:nowrap;
}

.bar a, .bar a:visited{
    color:white;
    font-size:12px;
}

.tot-votes{
    float:right;
    font-size:10px;
    font-weight:bold;
    position:relative;
    right:50px;
    text-transform:uppercase;
    top:18px;
}

/* General styles for the demo page */

h1{
    /* The title of the page */
    color:white;
    font-family:"MyRiad Pro",Arial,Helvetica,sans-serif;
    font-size:38px;
    font-weight:normal;
}

h2{
    /* The subtitle */
    font-family:"MyRiad Pro","Arial Narrow",Arial,Helvetica,sans-serif;
    font-size:16px;
    font-weight:normal;
    letter-spacing:1px;
    padding-left:2px;
    text-transform:uppercase;
    white-space:nowrap;
    margin:10px 0 25px;
}

#orig{
    /* The link that is positioned above the title */
    font-family:"MyRiad Pro",Arial;
    font-size:10px;
    letter-spacing:1px;
    padding-bottom:15px;
    text-transform:uppercase;
}

hr{
    /* The horizontal ruler */
    background-color:#BBBBBB;
    border:medium none;
    color:#BBBBBB;
    height:1px;
    margin:30px auto;
    width:450px;
}

.clear{
    /* The clearfix hack */
    clear:both;
}

#main{
    /* The main container */
    width:600px;
    margin:30px auto;
}

a img{
    border:none;
}

a, a:visited {
    color:#00BBFF;
    text-decoration:none;
    outline:none;
}

a:hover{
    text-decoration:underline;
}

.tutorial-info{
    text-align:center;
    padding:10px;
} 
```

**连接.php**

```
<?php

if(!defined('INCLUDE_CHECK')) die('You are not allowed to execute this file directly');

/* Database config */  (Edit: I don't want to see them)

$db_host        = '*********';
$db_user        = '***********';
$db_pass        = '******';
$db_database        = '***************';

/* End config */

$link = mysql_connect($db_host,$db_user,$db_pass) or die('Unable to establish a DB connection');

mysql_select_db($db_database,$link);
mysql_query("SET names UTF8");

?> 
```

**结果.php**

```
<?php

if(!defined('INCLUDE_CHECK')) die('You are not allowed to execute this file directly');

// If the poll has been submitted:
if($_POST['sortdata'])
{
    // The data arrives as a comma-separated string,
    // so we extract each post ids:
    $data=explode(',',str_replace('li','',$_POST['sortdata']));

    // Getting the number of objects
    list($tot_objects) = mysql_fetch_array(mysql_query("SELECT COUNT(*) FROM sort_objects"));

    if(count($data)!=$tot_objects) die("Wrong data!");

    foreach($data as $k=>$v)
    {
        // Building the sql query:
        $str[]='('.(int)$v.','.($tot_objects-$k).')';
    }

    $str = 'VALUES'.join(',',$str);

    // This will limit voting to once a day per IP:
    mysql_query("   INSERT INTO `sort_votes` (ip,date_submit,dt_submit)
                    VALUES ('".$_SERVER['REMOTE_ADDR']."',NOW(),NOW())");

    //  If the user has not voted before today:
    if(mysql_affected_rows($link)==1)
    {
        mysql_query('   INSERT INTO `sort_objects` (id,votes) '.$str.'
                        ON DUPLICATE KEY UPDATE votes = votes+VALUES(votes)');
    }
}

//  Selecting the sample tutorials and ordering 
//  them by the votes each of them received:
$res = mysql_query("SELECT * FROM sort_objects ORDER BY votes DESC");

$maxVote=0;
$bars=array();

while($row=mysql_fetch_assoc($res))
{
    $bars[]=$row;

    // Storing the max vote, so we can scale the bars of the chart:
    if($row['votes']>$maxVote) $maxVote = $row['votes'];
}

$barstr='';

// The colors of the bars:
$colors=array('#ff9900','#66cc00','#3399cc','#dd0000','#800080');

foreach($bars as $k=>$v)
{
    // Buildling the bar string:
    $barstr.='
        <div class="bar" style="width:'.max((int)(($v['votes']/$maxVote)*450),100).'px;background:'.$colors[$k].'">
            <a href="'.$v['url'].'" title="'.$v['title'].'">'.$v['short'].'</a> 
        </div>';
}

// The total number of votes cast in the poll:
list($totVotes) = mysql_fetch_array(mysql_query("SELECT COUNT(*) FROM sort_votes"));

?>

<div class="chart">

<?php echo $barstr?>

</div>

<a href="demo.php" class="button">Go Back<span></span></a>

<div class="tot-votes"><?php echo $totVotes?> votes</div> 
```

**脚本.js**

```
$(document).ready(function(){
// Executed once all the page elements are loaded

    // Convert the UL with all the tutorials into a sortable list:
    $("ul.sort").sortable({
        handle : '.tut-img',
        axis:'y',
        containment: 'document',
        opacity: 0.6
    });

    // The hover method takes a mouseover and a mouseout function:
    $(".tut").hover(

        function(){

            $(this).find('.drag-label').stop().animate({marginTop:'-25px'},'fast');
        },

        function(){

            $(this).find('.drag-label').stop().animate({marginTop:'0'},'fast');
        }
    );

    // Binding an action to the submitPoll button:

    $('#submitPoll').click(function(e){

        // We then turn the sortable into a comma-separated string
        // and assign it to the sortdata hidden form field:

        $('#sortdata').val($('ul.sort').sortable('toArray').join(','));

        // After this we submit the form:
        $('#sform').submit();

        // Preventing the default action triggered by clicking on the link
        e.preventDefault();
    });

}); 
```

**所以有什么问题 ？！？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:33:28.803

不想粗鲁，但不仅仅是复制和粘贴代码，您实际上会阅读代码并尝试理解它，您可能会看到这两行

```
// Showing the tutorials by random
    $res = mysql_query("SELECT * FROM sort_objects ORDER BY RAND()"); 
```

说真的，其中一个是对下一行代码的评论！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:41:33.837

`ORDER BY`是查询的一部分，告诉它如何对结果进行排序。`ORDER BY RAND()`毫不奇怪，会给你随机排序的结果。相反，您应该做`ORDER BY votes`或包含投票的列的名称是什么。`ORDER BY votes asc`将按升序对它们进行排序（票数最少的优先），`ORDER BY votes desc`并将按降序对它们进行排序（票数最多的优先）。

这假设您将投票存储在表的单个字段中。如果不是这种情况（例如，如果您有一张表，每次投票只有一条记录），您需要告诉我们您的数据库模式。

# php - 启用文本框数组 php javascript

> ID：11267068
> 
> 赞同：1
> 
> 时间：2012-06-29T18:27:08.030
> 
> 标签：php, javascript, arrays, textbox

我从数据库中获得了一组禁用的文本框。当我单击编辑按钮时，它应该启用数组中的所有文本框。但我只能启用第一个文本框。这是代码。

编辑按钮代码：

```
<input type="button" value="Edit" onclick="enable();" /> 
```

函数启用（）

```
function enable(){
document.getElementById("instance_name").disable = false;
document.getElementById("host_name").disable = false;
} 
```

大批：

```
$result=mysql_query("SELECT user_instance.instance_name, user_instance.host_name FROM
dba_account, user_instance WHERE dba_account.account_id = user_instance.account_id AND 
dba_account.account_id = '$accid'");

while($note = mysql_fetch_array($result))
{
<inut type='text' name='instance_name' id='instance_name' disabled='disabled' 
value='$note[instance_name]' size='25' />
<input type='text' name='host_name' id='host_name' disabled='disabled' 
value='$note[host_name]' size='25' />
} 
```

我得到了所有禁用的文本框，但我无法全部启用它们。感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:30:30.317

您为多个元素提供相同的 ID。每个 ID 只能对一个元素唯一，因此一旦 javascript 找到第一个 ID，它就会停止。我会给它一个`class="instance_name"`，然后按类获取元素。你可以这样做：

```
function enable(){
    Array.prototype.forEach.call( document.getElementsByClassName('instance_name'), 
                                  function(element){
                                      element.removeAttribute('disabled');
                                  });
} 
```

# .net - 自托管 (WinForm) WCF 服务如何与主窗体交互？

> ID：11267071
> 
> 赞同：2
> 
> 时间：2012-06-29T18:27:14.713
> 
> 标签：.net, winforms, wcf

我想要实现的简化版本：

*   我有一个在后台运行隐藏（可见 = false）的 WinForms 应用程序。
*   它只有一个表格，我保留了默认名称 - Form1
*   此 WinForms 应用托管 WCF 服务。现在我们将其称为监听器服务。
*   此侦听器服务有一个名为“DisplayAlert()”的函数，它作为服务函数公开
*   位于另一台计算机上的应用通过标准 WCF 服务调用向侦听器服务发送消息

我已经完成了上述所有工作。在调用 DisplayAlert() 函数时，我可以单步执行代码并观察消息流。

我想不通，我不敢相信很难找到如何做这么简单的事情：

**- 我希望托管服务中的 DisplayAlert() 函数直接与托管它的 WinForm 交互以使表单可见。**

我要做的就是将 Visibility 设置为 true，然后在 WinForm 上调用另一个函数。

在我看来，这应该像添加对表单的引用一样简单，或者在表单上创建一个公共函数并从服务类调用它，但我什至不知道如何从服务中引用 Form1班级。

我错过了一些明显的东西吗？我什至如何引用托管服务的 Form1 的实例？

我已经走上了……的路。

*   在ListenerService（AlertReceived，virtual void OnAlertReceived）中创建一个事件，认为在Form上，我可以添加一个事件处理程序。

    *   没有骰子。我没有直接实例化 ListenerService 类，它在 ServiceHost 中运行。
*   试图从类中引用 Application 对象，认为我可以将其引用为 Application.Form1，但不是。我什至无法从服务类中看到 Application 对象。
    *   我可能在这里遗漏了一些明显的东西，但我不确定。

还有其他建议吗？

如果有帮助，我可以添加代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T19:40:32.083

使用这种方法，您就拥有了一个完全线程安全的应用程序，并且没有任何限制。

服务合同定义

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    void DisplayAlert();
} 
```

服务实施

```
public class Service:IService
{
    public void DisplayAlert()
    {
        var form = Form1.CurrentInstance;
        form.MySynchronizationContext.Send(_ => form.Show(), null);
    }
} 
```

程序.cs

```
[STAThread]
static void Main()
{        
    var host = new ServiceHost(typeof (Service));
    host.Open();

    Application.SetCompatibleTextRenderingDefault(false);
    Application.EnableVisualStyles();
    Application.Run(new Form1());
 } 
```

表单实现

```
public partial class Form1 : Form
{
    public static Form1 CurrentInstance;
    public SynchronizationContext MySynchronizationContext;
    private bool showForm = false;

    public Form1()
    {
        InitializeComponent();
        MySynchronizationContext = SynchronizationContext.Current;
        CurrentInstance = this;
    }

    // use this method for hiding and showing if you want this form invisible on start-up
    protected override void SetVisibleCore(bool value)
    {
        base.SetVisibleCore(showForm ? value : showForm);
    }

    public void Show()
    {
        showForm = true;
        Visible = true;   
    }

    public void Hide()
    {
        showForm = true;
        Visible = true;
    }
} 
```

客户

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Press Enter to show form");
        Console.ReadLine();

        var client = new ServiceClient();
        client.DisplayAlert();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:00:43.300

在我看来，正如一位朋友所说，答案是“simpol”。首先，我什至不会费心遵循您描述的路径，毕竟 Web 服务提供了与之通信的所有必要手段。在您的 Form1（托管您的服务）和您的托管服务之间添加一个客户端（其中客户端代码由相同的 Form1 托管）并允许您的客户端使用双工通道与您的服务进行通信。通过这种方式，您的客户端将通过发起一个长时间运行的请求并通过回调得到通知来了解是否有消息发送到您的服务。这是与双工通道相关的精美文章的链接：http: [//blogs.msdn.com/b/carlosfigueira/archive/2012/01/11/wcf-extensibility-transport-channels-duplex-channels.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/01/11/wcf-extensibility-transport-channels-duplex-channels.aspx)

PS：这是一个粗略的建议，可以帮助您入门，肯定可以改进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:04:45.057

您可以为您的服务使用单例吗？如果是这样，您可以像这样实现它：

```
[ServiceContract]
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)]
public class MyClass : IMyClass
{
    Form1 _f;
    public MyClass(Form1 f)
    {
        _f = f;
    }

    [OperationContract]
    public void Alert(string mess)
    {
        _f.Text = mess;
    }
} 
```

然后，当您设置服务主机时，将其实例化并将其传递给表单：

```
MyClass c = new MyClass(this);
string baseAddress = "http://localhost:12345/Serv";
var host = new ServiceHost(c, new Uri(baseAddress)); 
```

# c++ - 使用静态库时对函数的未定义引用

> ID：11267073
> 
> 赞同：1
> 
> 时间：2012-06-29T18:27:32.410
> 
> 标签：c++, netbeans, undefined, static-linking

我正在尝试使用遗传算法编写程序，这是一种特定类型的优化算法。我为此任务找到了一个名为“[进化对象](http://eodev.sourceforge.net/)”的免费库，并实现了一个非常简单的遗传算法实例。程序代码、netbeans 实现的构建命令，以及最后我收到的错误消息都发布在下面的单独块中。如果您允许我帮忙，您会发现 cout 函数出了点问题。当我在互联网上搜索类似的困难时，我发现人们一直在通过简单地使用 g++ 而不是 gcc 来解决问题，但我已经在使用 g++，如您所见。任何帮助，将不胜感激....

程序代码如下：

```
#include <stdexcept>
#include <iostream>
#include <eo>
#include <ga.h>

typedef eoBit<double> Indi;

double binary_value(const Indi & _indi)
{
  double sum = 0;
  for (unsigned i = 0; i < _indi.size(); i++)
    sum += _indi[i];
  return sum;
}

void main_function(int argc, char **argv)
{

  const unsigned int SEED = 42;      // seed for random number generator
  const unsigned int T_SIZE = 3;     // size for tournament selection
  const unsigned int VEC_SIZE = 16;   // Number of bits in genotypes
  const unsigned int POP_SIZE = 100;  // Size of population
  const unsigned int MAX_GEN = 400;  // Maximum number of generation before STOP
  const float CROSS_RATE = 0.8;      // Crossover rate
  const double P_MUT_PER_BIT = 0.01; // probability of bit-flip mutation
  const float MUT_RATE = 1.0;        // mutation rate

  rng.reseed(SEED);

  eoEvalFuncPtr<Indi> eval(  binary_value );

  eoPop<Indi> pop;

  for (unsigned int igeno=0; igeno<POP_SIZE; igeno++)
    {
      Indi v;           // void individual, to be filled
      for (unsigned ivar=0; ivar<VEC_SIZE; ivar++)
    {
      bool r = rng.flip(); // new value, random in {0,1}
      v.push_back(r);      // append that random value to v
    }
      eval(v);                 // evaluate it
      pop.push_back(v);        // and put it in the population
    }

  pop.sort();

  cout << "Initial Population" << endl;
  cout << pop;

  eoDetTournamentSelect<Indi> select(T_SIZE);  // T_SIZE in [2,POP_SIZE]
  eo1PtBitXover<Indi> xover;
  eoBitMutation<Indi>  mutation(P_MUT_PER_BIT);

  eoGenContinue<Indi> continuator(MAX_GEN);

  eoSGA<Indi> gga(select, xover, CROSS_RATE, mutation, MUT_RATE, eval, continuator);

  gga(pop);

  pop.sort();
  cout << "FINAL Population\n" << pop << endl;
}

int main(int argc, char **argv)
{
main_function(argc, argv);
    return 1;
}
} 
```

Netbeans 向我展示了它在尝试构建时正在这样做：

```
make[1]: Entering directory `/home/gregemerson/EO_GA/EO_GA'
rm -f -r build/Debug
rm -f dist/Debug/GNU-Linux-x86/eo_ga
make[1]: Leaving directory `/home/gregemerson/EO_GA/EO_GA'

CLEAN SUCCESSFUL (total time: 94ms)

"/usr/bin/make" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
make[1]: Entering directory `/home/gregemerson/EO_GA/EO_GA'
"/usr/bin/make"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/eo_ga
make[2]: Entering directory `/home/gregemerson/EO_GA/EO_GA'
mkdir -p build/Debug/GNU-Linux-x86
rm -f build/Debug/GNU-Linux-x86/main.o.d
g++    -c -g -I../../EO/EO/eo/src -MMD -MP -MF build/Debug/GNU-Linux-x86/main.o.d -o build/Debug/GNU-Linux-x86/main.o main.cpp
mkdir -p dist/Debug/GNU-Linux-x86
g++     -o dist/Debug/GNU-Linux-x86/eo_ga build/Debug/GNU-Linux-x86/main.o -L../../EO/EO/eo/build/lib /home/gregemerson/EO/EO/eo/build/lib/libcma.a /home/gregemerson/EO/EO/eo/build/lib/libeoutils.a /home/gregemerson/EO/EO/eo/build/lib/libes.a /home/gregemerson/EO/EO/eo/build/lib/libga.a 
```

错误消息如下：

```
/home/gregemerson/EO_GA/EO_GA/main.cpp:94: undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, eoPrintable const&)'
/home/gregemerson/EO_GA/EO_GA/main.cpp:99: undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, eoPrintable const&)'
/home/gregemerson/EO_GA/EO_GA/main.cpp:149: undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, eoPrintable const&)'
build/Debug/GNU-Linux-x86/main.o: In function `eoPop<eoBit<double> >::sortedPrintOn(std::basic_ostream<char, std::char_traits<char> >&) const':
/home/gregemerson/EO_GA/EO_GA/../../EO/EO/eo/src/eoPop.h:294: undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, eoPrintable const&)'
build/Debug/GNU-Linux-x86/main.o: In function `std::ostream_iterator<eoBit<double>, char, std::char_traits<char> >::operator=(eoBit<double> const&)':
/usr/include/c++/4.6/bits/stream_iterator.h:198: undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, eoPrintable const&)'
collect2: ld returned 1 exit status
make[2]: *** [dist/Debug/GNU-Linux-x86/eo_ga] Error 1
make[2]: Leaving directory `/home/gregemerson/EO_GA/EO_GA'
make[1]: *** [.build-conf] Error 2
make[1]: Leaving directory `/home/gregemerson/EO_GA/EO_GA'
make: *** [.build-impl] Error 2 
```

您的回答确实解决了我的 cout(pop) 问题。但是，我现在在我正在使用的一个静态库的标头中看到类似的错误，以及看起来与基本 c++ 库之一相关的内容。我得到以下。你能理解这个吗？

```
build/Debug/GNU-Linux-x86/main.o: In function `std::ostream_iterator<eoBit<double>, char, std::char_traits<char> >::operator=(eoBit<double> const&)':
/usr/include/c++/4.6/bits/stream_iterator.h:198: undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, eoPrintable const&)'
build/Debug/GNU-Linux-x86/main.o: In function `eoPop<eoBit<double> >::sortedPrintOn(std::basic_ostream<char, std::char_traits<char> >&) const':
/home/gregemerson/EO_GA/EO_GA/../../EO/EO/eo/src/eoPop.h:294: undefined reference to `operator<<(std::basic_ostream<char, std::char_traits<char> >&, eoPrintable const&)' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:40:29.083

问题是（例如）这里：

```
cout << pop; 
```

错误，

```
/home/gregemerson/EO_GA/EO_GA/main.cpp:94: undefined reference to 
`operator<<(std::basic_ostream<char, std::char_traits<char> >&, eoPrintable const&)' 
```

意味着没有知道如何将`eoPrintable`对象推入`ostream`.

根据评论中提供的[链接](http://eodev.sourceforge.net/eo/doc/html/classeo_pop.html)`eoPop`，该类定义了一些打印方法：[sortedPrintOn](http://eodev.sourceforge.net/eo/doc/html/classeo_pop.html#ab6572898562eebe5bab105c4475a9a64)和[printOn](http://eodev.sourceforge.net/eo/doc/html/classeo_pop.html#a7c8f819840dd398905bc568152fc5cd4)。

为了使用其中一个打印到`cout`，您将执行以下操作：

```
pop.printOn(cout); //or pop.printOn(std::cout) if you remove using namespace std;
pop.printSortedOn(cout); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T09:20:26.233

许多人在第一次尝试使用 EO C++ lib 时都遇到了这个问题。我也遇到了这个问题并且能够找到解决方案。问题是链接器在构建 EO 程序时找不到必须链接的静态库。我现在能够在 Ubunut 10.04 (LTS) 上成功编译和使用第一个教程，即**FirstBitGA.cpp** & **FirstRealGA.cpp**和**EO-1.3.1 。**

**注意：**我正在编写从安装开始的完整步骤，请耐心等待。还将“用户名”一词替换为您的用户帐户。

**<<解决方案>>**

1.  [从http://sourceforge.net/projects/eodev/files/latest/download?source=files](http://sourceforge.net/projects/eodev/files/latest/download?source=files)下载 EO Lib
2.  创建一个名为EO的目录；我在 /home/username/ 中创建它。
3.  将 EO Zip 文件复制到 /home/username/EO 并解压缩。这将在 /home/username/EO 下创建另一个名为“eo”的目录。
4.  现在通过在终端的 /home/username/EO/eo/build_gcc_linux_release 中运行构建脚本来构建安装文件。
5.  第 4 步中的构建脚本将在 /home/username/EO/eo 下创建一个名为“ **release ”的目录。**在发布目录中，“ **lib** ”文件夹包含在编译任何 EO 程序时必须链接的库。
6.  现在必须向编译器提供两条路径才能成功编译：

    6.1。包含文件的路径作为 g++ 的命令行参数，即 -I /home/username/EO/eo/src **< OR>**如果您使用的是 Qt creator IDE，则输入行 ' INCLUDEPATH += /home/username/EO/ probject 的 .pro 文件中的 eo/src'。

    6.2\. 带有-L参数到g ++的所有链接库的路径，即

    ```
    -L/home/username/EO/eo/release/lib/libcma.a /home/username/EO/eo/release/lib/libeo.a /home/username/EO/eo/release/lib/libeoserial/home/username/EO/eo/release/lib/libeoutils.a /home/username/EO/eo/release/lib/libes.a /home/username/EO/eo/release/lib/libga.a 
    ```

    **对于 Qt Creator 用户，在 .pro 文件中输入以下行，**

     **LIBS += -L/home/username/EO/eo/release/lib/libcma.a /home/username/EO/eo/release/lib/libeo.a /home/username/EO/eo/release/lib/ libeoserial.a /home/username/EO/eo/release/lib/libeoutils.a /home/username/EO/eo/release/lib/libes.a /home/username/EO/eo/release/lib/libga。一个** 
***   **享受****

# git - 如何撤消工作区中的一些更改并返回上一次提交？

> ID：11267074
> 
> 赞同：6
> 
> 时间：2012-06-29T18:27:35.517
> 
> 标签：git

> **可能重复：**
> [Git：恢复到以前的提交状态](https://stackoverflow.com/questions/5004237/git-revert-to-previous-commit-status)

我已经尝试对我的代码进行一些更改，但我搞砸了太多事情（当你累了并且已经很晚时永远不会工作），我只想回到我的最后一次提交。我没有做`git add`，或者`git commit`很明显，如果我做`git pull`了一切都是最新的。

我以为那`git checkout`是我需要的，但它没有用..有什么帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T18:36:10.293

提到的答案`reset --hard`将做你想要的（以及你可能会或可能不会做的其他一些事情），但你认为这`checkout`是你需要的命令是正确的。问题是它`checkout`做了两件不同的事情，所以你需要为它提供一个路径参数：

`git checkout .`

从您的存储库的根目录中您就可以了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T18:34:17.600

**不要`git reset -hard`它是永久性的！**

请用

```
git stash -u 
```

反而！如果您在其中有一件不小心损坏的作品，您仍然可以将其取回。这永远不会被推送到您的遥控器，除非您选择通过创建一个分支并将其向上推送来这样做。

此外，您在正确的轨道上可以使用 git checkout 来完成同样的事情。语法是`git checkout HEAD -- .`. 但它有同样的问题`git reset --hard`。坚持藏起来，你将来会避免掉头发。

**更长的答案**

上述解决方案将还原您的所有更改。但是，您问如何摆脱*某些*更改。为了完整起见，我将添加此内容。

为此，您可以

```
git add file1 file2 file3
git stash save --patch 
```

现在将提示您确切地想要消失的内容......直到粒度级别。因此，如果您选择这样做，您可以安全地“拒绝”对单个文件的少量更改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T18:30:41.703

`git reset --hard`这将删除您对存储库中最后一次提交的所有未跟踪更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T18:34:13.950

`git reset --hard`会丢弃你所有的工作，但你可能想做：

```
git stash save "A bunch of stuff that didn't work" 
```

如果您想恢复一些更改。

# java - Java并发：如何选择和配置执行器

> ID：11267076
> 
> 赞同：0
> 
> 时间：2012-06-29T18:27:48.390
> 
> 标签：java, concurrency

Java Concurrency API 为您提供了构建的接口`Executor`和`ExecutorService`接口，并附带了几个具体的实现（`ThreadPoolExecutor`和`ScheduledThreadPoolExecutor`）。

我对 Java Concurrency 完全陌生，很难找到几个非常相似的问题的答案。我决定将它们捆绑在一起，而不是把所有这些小问题弄得一团糟，因为可能有一种方法可以一口气回答它们（可能是因为我在这里没有看到全貌）：

*   实现自己的`Executor`/是常见的做法`ExecutorService`吗？在什么情况下你会这样做而不是使用我上面提到的两个结核？在什么情况下，这两种结核比“本土”的东西更可取？
*   我不明白所有并发集合如何与`Executor`s 相关。例如，是否`ThreadPoolExecutor`使用，例如，`ConcurrentLinkedQueue`在引擎盖下对提交的任务进行排队？或者您（API 开发人员）是否应该`ConcurrentLinkedQueue`在并行化`run()`方法中选择和使用？基本上，那里的并发集合是由`Executor`s 内部使用的，还是您使用它们来帮助编写非阻塞算法？
*   您可以配置在后台使用哪些并发集合`Executor`（存储提交的任务），这是常见的做法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:31:35.920

> 实现自己的 Executor/ExecutorService 是常见的做法吗？

不，我从来没有这样做过，而且我使用并发包已经有一段时间了。这些类的复杂性以及使它们“错误”对性能的影响意味着在进行这样的项目之前你应该*仔细*考虑一下。

唯一一次我觉得需要实现我自己的执行器服务是当我想实现一个“自运行”的执行器服务时。直到一位朋友向我展示了[一种使用`RejectedExecutionHandler`](https://stackoverflow.com/questions/11249342/creating-a-dynamic-growing-shrinking-thread-pool-in-java/11249485#11249485).

我想要调整行为的唯一原因`ThreadPoolExecutor`是让它启动所有线程，直到最大线程数，*然后*将作业放入队列中。默认情况下，`ThreadPoolExecutor`启动 min-threads，然后在启动另一个线程之前填充队列。不是我期望或想要的。但是我只是从 JDK 中复制代码并对其进行更改——而不是从头开始实现它。

> 我不明白所有并发集合与 Executor 的关系。例如，ThreadPoolExecutor 是否在后台使用 ConcurrentLinkedQueue 对提交的任务进行排队？

如果您正在使用其中一种`Executors`辅助方法，那么您不必担心这一点。如果您正在实例化`ThreadPoolExecutor`自己，那么您提供`BlockingQueue`使用。

```
public static ExecutorService newFixedThreadPool(int nThreads) {
    return new ThreadPoolExecutor(nThreads, nThreads,
           0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue<Runnable>());
} 
```

相对：

```
 ExecutorService threadPool = 
     new ThreadPoolExecutor(minThreads, maxThreads, 0L, TimeUnit.MILLISECONDS,
            new SynchronousQueue<Runnable>()); 
```

> 您可以配置 Executor 在后台使用哪些并发集合（存储提交的任务），这是常见的做法吗？

看最后一个答案。

# scala - 抽象类型与类型参数 - 区别在哪里？

> ID：11267082
> 
> 赞同：2
> 
> 时间：2012-06-29T18:27:50.840
> 
> 标签：scala, type-parameter, abstract-type

> **可能重复：**
> [Scala：抽象类型与泛型](https://stackoverflow.com/questions/1154571/scala-abstract-types-vs-generics)

“Scala 编程”的第 20.6 章“抽象类型”解释了抽象类型的使用，并带有一个以以下结果代码结尾的示例：

```
class Food
abstract class Animal {
  type SuitableFood <: Food
  def eat(food: SuitableFood)
}

class Grass extends Food
class Cow extends Animal {
  type SuitableFood = Grass
  override def eat(food: Grass) {}
} 
```

有了这些定义，对象`Cow`不能吃鱼：

```
class Fish extends Food
val bessy: Animal = new Cow
bessy eat (new Fish) // Error, type mismatch 
```

在阅读了这个关于使用抽象类型的好例子之后，我想知道，为什么我们不只使用类型参数呢？

```
class Food
abstract class Animal[T <: Food] { 
  def eat(food: T)
}

class Grass extends Food
class Cow extends Animal[Grass] {
  override def eat(food: Grass){}
}

class Fish extends Food
val bessy: Animal[Grass] = new Cow
bessy eat (new Fish) // Also ends in a type mismatch error ! 
```

在这里使用类型参数而不是抽象类型有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:31:45.503

[Martin Odersky 在这次](http://www.artima.com/scalazine/articles/scalas_type_system.html#abstracttypes)采访中回答了这个问题。

> 一直有两个抽象概念：参数化和抽象成员。在 Java 中，你也有两者，但这取决于你抽象的内容。在 Java 中，您有抽象方法，但不能将方法作为参数传递。您没有抽象字段，但可以将值作为参数传递。同样，您没有抽象类型成员，但您可以将类型指定为参数。所以在Java中你也有这三个，但是对于你可以使用什么样的抽象原则是有区别的。你可以争辩说这种区别是相当武断的。
> 
> 我们在 Scala 中所做的就是尝试变得更加完整和正交。我们决定对所有三种成员都采用相同的构造原则。因此，您可以拥有抽象字段以及值参数。您可以将方法（或“函数”）作为参数传递，也可以对它们进行抽象。您可以将类型指定为参数，也可以对它们进行抽象。我们从概念上得到的是，我们可以根据另一个建模一个。至少在原则上，我们可以将每一种参数化表示为一种面向对象的抽象形式。所以在某种意义上你可以说 Scala 是一种更加正交和完整的语言。

也就是说，两者之间存在一些细微的差异，但我想不起来它们。

您可能还想看看[这个](https://stackoverflow.com/questions/7860163/what-are-some-compelling-use-cases-for-dependent-method-types)线程。

# inversion-of-control - 注册 Windsor 组件以供直接使用和作为数组使用

> ID：11267084
> 
> 赞同：1
> 
> 时间：2012-06-29T18:28:07.867
> 
> 标签：inversion-of-control, castle-windsor

我正在自动注册多个实现相同接口的组件：

```
container.Kernel.Resolver.AddSubResolver(
    new ArrayResolver(container.Kernel));

container.Register(AllTypes.FromAssembly(Assembly.GetExecutingAssembly())
    .BasedOn<IPaymentPostProcessor>()
    .WithService.FromInterface(typeof(IPaymentPostProcessor))
    .Configure(c => c.Named(c.Implementation.Name))
    .Configure(c => c.LifeStyle.PerWebRequest)); 
```

当我依赖数组本身时，这有效：

```
public class PaymentPostProcessorManager{
    public PaymentPostProcessorManager(IPaymentPostProcessor[] processors){}
} 
```

但如果我依赖于实现接口的特定组件，则不会：

```
public class SpecialService{
    public OtherService(SpecificPostProcessor processor){}
} 
```

这失败了，它说没有为SpecificPostProcessor注册任何组件。如果我单独注册该SpecificPostProcessor，则数组分辨率最终会包含它两次。

如何根据接口进行自动注册并让它自动注册特定的依赖项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T06:04:53.743

如果要将其公开为服务，则`WithService.Self()`需要添加。`SpecificPostProcessor`

# php - PHP：取消链接目录中的所有文件，然后删除该目录

> ID：11267086
> 
> 赞同：33
> 
> 时间：2012-06-29T18:28:12.020
> 
> 标签：php, unlink, rmdir

我有一种方法可以使用 RegExp 或通配符搜索快速删除文件夹中的所有文件，然后在 PHP 中删除该文件夹，而不使用“exec”命令？我的服务器没有授权我使用该命令。某种简单的循环就足够了。

我需要一些能够完成以下语句背后的逻辑的东西，但显然，这将是有效的：

```
 $dir = "/home/dir"
unlink($dir . "/*"); # "*" being a match for all strings
rmdir($dir); 

```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-06-29T18:32:32.500

用于[`glob`](http://php.net/manual/en/function.glob.php)查找与模式匹配的所有文件。

```
function recursiveRemoveDirectory($directory)
{
    foreach(glob("{$directory}/*") as $file)
    {
        if(is_dir($file)) { 
            recursiveRemoveDirectory($file);
        } else {
            unlink($file);
        }
    }
    rmdir($directory);
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-29T18:33:04.720

用于[`glob()`](http://us2.php.net/manual/en/function.glob.php)轻松循环目录以删除文件，然后您可以删除目录。

```
foreach (glob($dir."/*.*") as $filename) {
    if (is_file($filename)) {
        unlink($filename);
    }
}
rmdir($dir); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-29T18:36:12.767

该[`glob()`](http://php.net/manual/en/function.glob.php)功能可以满足您的需求。如果您使用的是 PHP 5.3+，则可以执行以下操作：

```
$dir = ...
array_walk(glob($dir . '/*'), function ($fn) {
    if (is_file($fn))
        unlink($fn);
});
unlink($dir); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-24T20:04:15.303

[一种使用标准 PHP 库](http://php.net/manual/en/book.spl.php)递归删除所有文件和文件夹的简单有效的方法，具体来说是[RecursiveIteratorIterator](http://php.net/manual/en/class.recursiveiteratoriterator.php)和[RecursiveDirectoryIterator](http://php.net/manual/en/class.recursivedirectoryiterator.php)。重点在`RecursiveIteratorIterator::CHILD_FIRST`flag，迭代器会先循环遍历文件，最后循环遍历目录，所以一旦目录为空就可以安全使用`rmdir()`。

```
foreach( new RecursiveIteratorIterator( 
    new RecursiveDirectoryIterator( 'folder', FilesystemIterator::SKIP_DOTS | FilesystemIterator::UNIX_PATHS ), 
    RecursiveIteratorIterator::CHILD_FIRST ) as $value ) {
        $value->isFile() ? unlink( $value ) : rmdir( $value );
}

rmdir( 'folder' ); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-12T10:21:55.880

**尝试简单的方法：**

```
$dir = "/home/dir";
array_map('unlink', glob($dir."/*"));
rmdir($dir); 
```

**在删除目录的函数中：**

```
function unlinkr($dir, $pattern = "*") {
        // find all files and folders matching pattern
        $files = glob($dir . "/$pattern"); 
        //interate thorugh the files and folders
        foreach($files as $file){ 
            //if it is a directory then re-call unlinkr function to delete files inside this directory     
            if (is_dir($file) and !in_array($file, array('..', '.')))  {
                unlinkr($file, $pattern);
                //remove the directory itself
                rmdir($file);
                } else if(is_file($file) and ($file != __FILE__)) {
                // make sure you don't delete the current script
                unlink($file); 
            }
        }
        rmdir($dir);
    }

//call following way:
unlinkr("/home/dir"); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-01-09T14:07:41.500

您可以使用[Symfony Filesystem 组件](http://symfony.com/doc/current/components/filesystem/introduction.html)，以避免重新发明轮子，所以您可以这样做

```
use Symfony\Component\Filesystem\Filesystem;

$filesystem = new Filesystem();

if ($filesystem->exists('/home/dir')) {
    $filesystem->remove('/home/dir');
} 
```

如果您更喜欢自己管理代码，这里是相关方法的 Symfony 代码库

```
class MyFilesystem
{
    private function toIterator($files)
    {
        if (!$files instanceof \Traversable) {
            $files = new \ArrayObject(is_array($files) ? $files : array($files));
        }

        return $files;
    }

    public function remove($files)
    {
        $files = iterator_to_array($this->toIterator($files));
        $files = array_reverse($files);
        foreach ($files as $file) {
            if (!file_exists($file) && !is_link($file)) {
                continue;
            }

            if (is_dir($file) && !is_link($file)) {
                $this->remove(new \FilesystemIterator($file));

                if (true !== @rmdir($file)) {
                    throw new \Exception(sprintf('Failed to remove directory "%s".', $file), 0, null, $file);
                }
            } else {
                // https://bugs.php.net/bug.php?id=52176
                if ('\\' === DIRECTORY_SEPARATOR && is_dir($file)) {
                    if (true !== @rmdir($file)) {
                        throw new \Exception(sprintf('Failed to remove file "%s".', $file), 0, null, $file);
                    }
                } else {
                    if (true !== @unlink($file)) {
                        throw new \Exception(sprintf('Failed to remove file "%s".', $file), 0, null, $file);
                    }
                }
            }
        }
    }

    public function exists($files)
    {
        foreach ($this->toIterator($files) as $file) {
            if (!file_exists($file)) {
                return false;
            }
        }

        return true;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-29T18:35:30.990

一种方法是：

```
function unlinker($file)
{
    unlink($file);
}
$files = glob('*.*');
array_walk($files,'unlinker');
rmdir($dir); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-20T09:40:06.720

要删除所有文件，您可以删除目录并再次制作..使用简单的代码行

```
<?php 
    $dir = '/home/files/';
    rmdir($dir);
    mkdir($dir);
?> 
```

# hibernate - Hibernate 3.6：插入具有循环引用的实体时如何利用延迟的 FK 约束？

> ID：11267089
> 
> 赞同：4
> 
> 时间：2012-06-29T18:28:34.940
> 
> 标签：hibernate, postgresql, foreign-keys, hibernate-mapping

考虑以下在实体 A 和 B 中具有循环引用的 Hibernate 3.6 实体映射：

```
@MappedSuperclass
abstract class Entity {

  @Id
  protected UUID id = UUID.randomUUID();

  @Version
  protected Integer revision;
} 

@Entity
class A extends Entity {
  // not null in the database
  @OneToOne(optional = false)
  B b;
}

@Entity
class B extends Entity {
  // not null in the database
  @ManyToOne(optional = false)
  A a;
} 
```

实体的 id 是在创建新实例时生成的，因此它在任何 SQL INSERT 之前设置。要确定实例是否是瞬态的，请`Interceptor`使用：

```
class EntityInterceptor extends EmptyInterceptor {

  @Override
  public boolean isTransient(Object entity) {
    return ((Entity)entity).getRevision == null;
  }
} 
```

当我尝试保存（在单个事务中）A 和 B 的实例（引用设置为彼此）时，Hibernate 失败并出现`TransientObjectException`（对象引用了未保存的瞬态实例 - 在刷新之前保存瞬态实例）。

```
A a = new A();
B b = new B();
a.setB(b);
b.setA(a);

// start transaction
sessionFactory.getCurrentSession().saveOrUpdate(a); // a before b or vice versa doesn't matter
sessionFactory.getCurrentSession().saveOrUpdate(b);
sessionFactory.getCurrentSession().flush();
// commit 
```

当我将映射更改为 Ab 和 Ba 的*级联保存*时，Hibernate 为 A 生成以下 SQL INSERT 语句：

```
INSERT INTO A (id, revision, b) VALUES ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 0, NULL); 
```

这违反了`NOT NULL`对 Ab 的约束并导致 a `ConstraintViolationException`。尽管 B 的 id 在插入时是已知的，但它并未在 SQL INSERT 中设置。在数据库（PostgreSQL 9.1）中，定义了对 Ab 的 FK 约束`DEFERRABLE INITIALLY DEFERRED`，因此如果设置了 Ab，则以下 INSERT 语句将运行而不会出现任何错误：

```
START TRANSACTION;
INSERT INTO A (id, revision, b) VALUES ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 0, 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb');
INSERT INTO B (id, revision, a) VALUES ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 0, 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa');
COMMIT; 
```

当我在数据库中删除对 Ab 的 NOT NULL 约束并保持*级联保存*映射时，上述代码以保存 A 和 B 工作正常。 **编辑**PostgreSQL 中`NOT NULL`不能推迟约束，只能推迟 FK 约束。 **结束编辑** 老实说，在这种情况下，我没有查看生成的 SQL 语句（我现在无法重现它），但我想它看起来像这样：

```
START TRANSACTION;
INSERT INTO A (id, revision, b) VALUES ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 0, NULL);
INSERT INTO B (id, revision, a) VALUES ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 0, 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa');
UPDATE A SET b = 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb' WHERE id = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa';
COMMIT; 
```

我知道对于我在这里尝试做的事情可能有更好的实体设计，但我真的很想知道是否有办法保持`NOT NULL`约束（如果可能的话，还有没有级联保存的原始映射) 并使我的原始代码工作。有没有办法*告诉*Hibernate 只用 Ab = B.id 插入 A，即使 B 在插入 A 时是瞬态的？一般来说，我找不到任何关于 Hibernate 和延迟 FK 约束的文档，所以任何关于它的指针都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:25:19.670

您在这里拥有的是经典的[双向关系](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/associations.html#assoc-bidirectional-121)。双方相互参照。如果你有双向的一侧需要标记为更强的一侧，这是通过使用[mappedBy](https://stackoverflow.com/questions/9108224/can-someone-please-explain-mappedby-in-hibernate) 或 inverse 来标记灯芯侧来完成的。此外，您有 FK 约束，因此需要定义 not-null 为真，以便休眠将插入 FK。

看这个[完整](https://stackoverflow.com/questions/9108224/can-someone-please-explain-mappedby-in-hibernate)的。

# yii - 为什么 imagecreatefromjpeg 在 yii 框架中不起作用？

> ID：11267090
> 
> 赞同：0
> 
> 时间：2012-06-29T18:28:34.957
> 
> 标签：yii

我试图在运行时在 yii 中调整图像大小，但不起作用。

我在视图中尝试了此代码，但它不起作用。

*我在 view.php 中的代码*

```
header('Content-Type: image/jpeg');
$image = imagecreatefromjpeg('image.jpg');
echo imagejpeg($image); 
```

我在控制器中的代码

```
 public function actionImage()
    {
            $this->render('image');
    } 
```

输出html

```
<html debug="true">
<body style="margin: 0px; ">
<img style="-webkit-user-select: none; " src="http://localhost/yiiadministration/index.php?r=administration/products/image"/>
</body>
<script src="chrome-extension://bmagokdooijbeehmkpknfglimnifench/googleChrome.js"/>
</html> 
```

附言; 视图中的代码只是为了查看操作，而不是缩放图像，因为我通常在 php.ini 中执行此操作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:41:06.587

在呈现视图之前已经发送了标头，因此您的代码尝试发送新标头并失败，因为它已经发送。

您可以从控制器发送该标头，也可以在视图中使用 img 标记，如前面在[此处的堆栈溢出中所述](https://stackoverflow.com/questions/11117403/how-to-make-yii-sendfile-function-to-set-content-desposition-to-inline)

此外 imagejpeg() 将图像直接输出到浏览器，因此在该上下文中回显是错误的。

# iphone - 新的 APNs 证书是否需要发布？

> ID：11267095
> 
> 赞同：-1
> 
> 时间：2012-06-29T18:29:06.890
> 
> 标签：iphone, ios5, app-store, apple-push-notifications

是时候升级我们的生产 APNs 证书了。我知道如何通过配置门户执行此操作，但我找不到任何文档表明这样做是否需要我们发布新签名的应用程序。我不相信它确实如此，但我找不到任何确凿的证据来支持这一点。

任何人都可以指出相关文件吗？如果没有，您是否在不发布更新的应用程序的情况下成功更新了您的证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:23:21.470

事实证明，不，您不需要发布更新的应用程序。我们正在诊断升级证书后立即出现的一些问题，因此我将其视为一个问题。原来是不相关的，所以我可以保证你不需要推送更新。

# vba - For Each 遍历 Outlook 日历项目列表

> ID：11267096
> 
> 赞同：0
> 
> 时间：2012-06-29T18:29:08.447
> 
> 标签：vba, timezone, runtime, outlook-2010

我想更改 Outlook 2010 日历中所有项目的时区。

我对在循环中迭代时如何处理集合中的项目感到困惑。我的主要背景是Java，据我所知，循环中有一个变量用作虚拟变量，它将依次获取集合中所有项目的值。这种 FOR 循环通常不需要特殊分配。您是否需要以某种方式手动推进变量以保持循环继续进行？

这是我的代码：

```
Public Sub TZFix()

    Dim oAppointmentItem As Outlook.AppointmentItem
    Dim tzs As Outlook.TimeZones
    Dim tzCentral As Outlook.TimeZone
    Dim oAppointments As Object
    Dim oNS As Outlook.NameSpace

    Set oNS = oOutlook.GetNamespace("MAPI")
    Set oAppointments = oNS.GetDefaultFolder(olFolderCalendar)
    Set tzs = Application.TimeZones
    Set tzCentral = tzs("Central Standard Time")

    For Each oAppointmentItem In oAppointments.Items
        Set oAppointmentItem.StartTimeZone = tzCentral
        Set oAppointmentItem.EndTimeZone = tzCentral
    Next

End Sub 
```

我相信循环中的变量分配存在问题，因为`Error 91: Object Variable or With block variable not set`每当我运行它时都会出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T09:35:19.107

我的脚本中也有这个问题。对我来说，解决方案是将 Macro-Security-Settings 设置为最低并再次运行它并且它起作用了。也许值得一试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:31:59.457

`oOutlook`从未分配给，因此是`Nothing`。您可能打算将其设置为`Application`.

此外，将局部变量设置`Nothing`为最后是多余的，请删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-12T10:41:20.753

我使代码只对您的代码进行了少量更改。这是有效的：

```
Public Sub TZ_change_to_Hawaii()
''''Changing  the selected appointments' time zones to Hawaii

Dim tzs As Outlook.TimeZones
Dim tzCentral As Outlook.TimeZone

Set tzs = Application.TimeZones
Set tzCentral = tzs("Hawaiian Standard Time")

Dim objOL As Outlook.Application
Dim objSelection As Outlook.Selection
Dim objItem As Object

Set objOL = Outlook.Application
Set objSelection = objOL.ActiveExplorer.Selection

For Each objItem In objSelection
    Set objItem.StartTimeZone = tzCentral
    Set objItem.EndTimeZone = tzCentral
    objItem.Save
Next
End Sub 
```

# ember.js - 是否可以在 Handlebars #if 中使用功能？

> ID：11267100
> 
> 赞同：15
> 
> 时间：2012-06-29T18:29:35.947
> 
> 标签：ember.js, handlebars.js

我有一个控制器对象，就像：

```
MyApp.objController = Ember.ArrayController.create({
  init: function(data) {
    data.isValid = function() {
      return (data.validity === "valid");
    }
    this.pushObject(MyApp.MyObj.create(data));
  }
}); 
```

我的看法是这样的：

```
{{#each MyApp.objController}}
  {{#if isValid}}
   <some markup>
   {{else}}
   <some other markup>
  {{/if}}
{{/each}} 
```

我假设`if`Handlebars 中的条件同时接受值和函数，但事实并非如此。这真的可能吗，我只是做错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T00:05:49.053

Handlebars if 语句只比较一个值是否存在，是否为假值（即不存在、0、空字符串等）。您必须编写自定义辅助函数。

你可以这样做

```
Handlebars.registerHelper('isValid', function (value, options) {
    if (value == "valid") {
        return options.fn(this);
    }
    return options.inverse(this);
}); 
```

这注册了一个块助手。如果您传入的值评估为“有效”，它会返回带有当前数据的助手后面的模板。如果它没有评估为有效，它会返回带有当前数据的 else 语句之后的模板。

然后在您的模板中，您可以像这样使用它

```
{{#each MyApp.objController}}
    {{#isValid validity}}
        <some markup>
    {{else}}
        <some other markup>
    {{/isValid}}
{{/each}} 
```

否则，如果您想遵守 Handlebars 的精神并制作“无逻辑”模板，请在渲染模板之前设置一个标志，指示该数据是否有效，然后使用带有标志的 helper 的把手。

您还可以设置一个通用函数来处理这种情况和其他情况。有关通用 if 的示例，请参阅我在[handlebars.js {{#if}} 条件中的逻辑运算符中的](https://stackoverflow.com/questions/8853396/logical-operator-in-a-handlebars-js-if-conditional/9405113#9405113)答案（类似于上述答案）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T06:30:25.543

如果您将您定义`isValid`为 a `property`，则可以在语句中使用它`if`而无需创建自定义 Handlebars 助手，请参阅[http://jsfiddle.net/pangratz666/Dq6ZY/](http://jsfiddle.net/pangratz666/Dq6ZY/)：

**车把**：

```
<script type="text/x-handlebars" data-template-name="obj-template" >
    {{view Ember.TextField valueBinding="age" }}
    {{#if isValid}}
        Si Si.
    {{else}}
        Nope!
    {{/if}}
</script>​ 
```

**JavaScript**：

```
App.MyObj = Ember.Object.extend({
    isValid: function() {
        return this.get('age') >= 18;
    }.property('age')
});

Ember.View.create({
    templateName: 'obj-template',
    controller: App.MyObj.create({
        age: 21
    })
}).append(); 
```

​</p>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-01T20:06:29.483

您可以创建一个自定义 Handlebars 助手来执行此操作。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-03T06:42:11.057

试试这个：

```
<ul>
  {{#each subsites}}
    {{#if this}}
      <li>{{{WhatIsTheSiteFor this}}}</li>
    {{else}}
      <li>no found</li>
    {{/if}}
  {{/each}}
</ul> 
```

辅助功能`WhatIsTheSiteFor`：

```
Handlebars.registerHelper('WhatIsTheSiteFor', function(siteName) {
  var subSiteName = '',
      siteNameStr = '';

  $.each(siteName, function(i, item) {
    siteNameStr += item;
    return siteNameStr;
  });

  if(siteNameStr === 's.gbin1.com') {
    subSiteName = '<a href="http://' + siteNameStr + '">GB搜索引擎</a>';
  }
  else if (siteNameStr === 'm.gbin1.com') {
    subSiteName = '<a href="http://' + siteNameStr + '">GB手机阅读</a>';
  }
  else if (siteNameStr === 'rss.gbin1.com') {
    subSiteName = '<a href="http://' + siteNameStr + '">RSS消息订阅</a>';
  }

  return subSiteName;
}); 
```

可以在此处找到演示：[http ://www.gbin1.com/gb/networks/uploads/71bb1c1e-0cd3-4990-a177-35ce2612ce81/demo6.html](http://www.gbin1.com/gb/networks/uploads/71bb1c1e-0cd3-4990-a177-35ce2612ce81/demo6.html)

# asp.net-mvc-3 - 通过 AJAX 向 MVC3 控制器发送和获取值

> ID：11267105
> 
> 赞同：3
> 
> 时间：2012-06-29T18:29:59.053
> 
> 标签：asp.net-mvc-3, jquery

我有一个 html 输入文本字段和一个按钮。

我想通过单击该按钮从该 ​​html 文本字段中获取用户输入值，并希望将该值（通过 AJAX）发送到 MVC3 控制器（就像 ActionResult setValue() 的参数一样）？

我想知道的另一件事是，我如何从 MVC3 控制器获取返回值（由 ActionResult getValue() 返回）并将其设置在 html 文本字段中（通过 AJAX）？

请帮我举一个很好的例子，拜托。对不起我的英语不好。:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T18:41:42.427

按钮点击事件

```
$(document).ready(function ()
{
    $('#ButtonName').click(function ()
    {
        if ($('#YourHtmlTextBox').val() != '')
        {
            sendValueToController();
        }
        return false;
    });
}); 
```

你这样调用你的ajax函数：

```
function sendValueToController()
{
    var yourValue = $('#YourHtmlTextBox').val();

    $.ajax({
        url: "/ControllerName/ActionName/",
        data: { YourValue: yourValue },
        cache: false,
        type: "GET",
        timeout: 10000,
        dataType: "json",
        success: function (result)
        {
            if (result.Success)
            { // this sets the value from the response
                $('#SomeOtherHtmlTextBox').val(result.Result);
            } else
            {
                $('#SomeOtherHtmlTextBox').val("Failed");
            }
        }
    });
} 
```

这是被调用的动作

```
public JsonResult ActionName(string YourValue)
{
    ...
    return Json(new { Success = true, Result = "Some Value" }, JsonRequestBehavior.AllowGet);
} 
```

# web-services - 如何从 jar 加载 TrustStore 文件？

> ID：11267119
> 
> 赞同：4
> 
> 时间：2012-06-29T18:31:01.767
> 
> 标签：java-web-start, web-services, security, jakarta-ee, glassfish, java-web-start

我正在使用通过[java-web-start](/questions/tagged/java-web-start "显示标记为“java-web-start”的问题")客户端使用对称密钥进行用户名身份验证保护的 Web 服务。问题是我`TrustStore`在 WSIT 文件中是硬编码的，因此身份验证失败并显示`FileNotFoundException`.

```
 <wsp:All>
       <sc:CallbackHandlerConfiguration wspp:visibility="private">
            <sc:CallbackHandler default="h" name="usernameHandler"/>
            <sc:CallbackHandler default="kiko" name="passwordHandler"/>
       </sc:CallbackHandlerConfiguration>
       <sc:TrustStore wspp:visibility="private"
           location="C:\glassfish3\glassfish\domains\domain_1\config\cacerts.jks"
           type="JKS" storepass="changeit" peeralias="xws-security-server"/>
  </wsp:All> 
```

如何将信任库嵌入应用程序并从 jar 加载它？谢谢。

**编辑 1**

这是 jws 客户端中的例外：

```
30 juin 2012 09:44:01 [com.sun.xml.ws.policy.parser.PolicyConfigParser] parse
INFO: WSP5018: Loaded WSIT configuration from file: jar:http://server_url.net:8080/___JWSappclient/___app/realm_consumer/realm_consumerClient/realm_consumer.jar!/META-INF/wsit-client.xml.
30 juin 2012 09:44:04 com.sun.xml.wss.impl.misc.DefaultCallbackHandler initTrustStore
GRAVE: WSS1509: Failed to initialize Trust store
java.io.FileNotFoundException: C:\glassfish3\glassfish\domains\domain_1\config\cacerts.jks (Le chemin d’accès spécifié est introuvable)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileInputStream.<init>(Unknown Source)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.initTrustStore(DefaultCallbackHandler.java:909)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.<init>(DefaultCallbackHandler.java:340)
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.configureClientHandler(SecurityClientTube.java:822)
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.<init>(SecurityClientTube.java:180)
at com.sun.xml.wss.provider.wsit.SecurityTubeFactory.createTube(SecurityTubeFactory.java:285)
at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:84)
at com.sun.xml.ws.assembler.TubelineAssemblerFactoryImpl$MetroTubelineAssembler.createClient(TubelineAssemblerFactoryImpl.java:130)
at com.sun.xml.ws.client.Stub.createPipeline(Stub.java:228)
at com.sun.xml.ws.client.Stub.<init>(Stub.java:205)
at com.sun.xml.ws.client.Stub.<init>(Stub.java:178)
at com.sun.xml.ws.client.sei.SEIStub.<init>(SEIStub.java:85)
at com.sun.xml.ws.client.WSServiceDelegate.createEndpointIFBaseProxy(WSServiceDelegate.java:608)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:348)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:330)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:312)
at javax.xml.ws.Service.getPort(Service.java:134)
at realm_consumer.Cw_Service.getCwPort(Cw_Service.java:72)
at realm_consumer.Ws.hmd(Ws.java:24)
at Gui.Gui.jButton1ActionPerformed(Gui.java:80)
at Gui.Gui.access$000(Gui.java:14)
at Gui.Gui$1.actionPerformed(Gui.java:43)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
30 juin 2012 09:44:04 com.sun.xml.wss.jaxws.impl.SecurityClientTube configureClientHandler
GRAVE: WSSTUBE0027: Error in configuring Client Security Callback Handler.
java.lang.RuntimeException: java.io.FileNotFoundException: C:\glassfish3\glassfish\domains\domain_1\config\cacerts.jks (Le chemin d’accès spécifié est introuvable)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.initTrustStore(DefaultCallbackHandler.java:919)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.<init>(DefaultCallbackHandler.java:340)
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.configureClientHandler(SecurityClientTube.java:822)
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.<init>(SecurityClientTube.java:180)
at com.sun.xml.wss.provider.wsit.SecurityTubeFactory.createTube(SecurityTubeFactory.java:285)
at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:84)
at com.sun.xml.ws.assembler.TubelineAssemblerFactoryImpl$MetroTubelineAssembler.createClient(TubelineAssemblerFactoryImpl.java:130)
at com.sun.xml.ws.client.Stub.createPipeline(Stub.java:228)
at com.sun.xml.ws.client.Stub.<init>(Stub.java:205)
at com.sun.xml.ws.client.Stub.<init>(Stub.java:178)
at com.sun.xml.ws.client.sei.SEIStub.<init>(SEIStub.java:85)
at com.sun.xml.ws.client.WSServiceDelegate.createEndpointIFBaseProxy(WSServiceDelegate.java:608)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:348)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:330)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:312)
at javax.xml.ws.Service.getPort(Service.java:134)
at realm_consumer.Cw_Service.getCwPort(Cw_Service.java:72)
at realm_consumer.Ws.hmd(Ws.java:24)
at Gui.Gui.jButton1ActionPerformed(Gui.java:80)
at Gui.Gui.access$000(Gui.java:14)
at Gui.Gui$1.actionPerformed(Gui.java:43)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.io.FileNotFoundException: C:\glassfish3\glassfish\domains\domain_1\config\cacerts.jks (Le chemin d’accès spécifié est introuvable)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileInputStream.<init>(Unknown Source)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.initTrustStore(DefaultCallbackHandler.java:909)
... 56 more
30 juin 2012 09:44:04 com.sun.xml.wss.jaxws.impl.SecurityClientTube <init>
GRAVE: WSSTUBE0023: Error in creating new instance of SecurityClientTube
java.lang.RuntimeException: WSSTUBE0027: Error in configuring Client Security Callback Handler.
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.configureClientHandler(SecurityClientTube.java:826)
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.<init>(SecurityClientTube.java:180)
at com.sun.xml.wss.provider.wsit.SecurityTubeFactory.createTube(SecurityTubeFactory.java:285)
at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:84)
at com.sun.xml.ws.assembler.TubelineAssemblerFactoryImpl$MetroTubelineAssembler.createClient(TubelineAssemblerFactoryImpl.java:130)
at com.sun.xml.ws.client.Stub.createPipeline(Stub.java:228)
at com.sun.xml.ws.client.Stub.<init>(Stub.java:205)
at com.sun.xml.ws.client.Stub.<init>(Stub.java:178)
at com.sun.xml.ws.client.sei.SEIStub.<init>(SEIStub.java:85)
at com.sun.xml.ws.client.WSServiceDelegate.createEndpointIFBaseProxy(WSServiceDelegate.java:608)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:348)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:330)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:312)
at javax.xml.ws.Service.getPort(Service.java:134)
at realm_consumer.Cw_Service.getCwPort(Cw_Service.java:72)
at realm_consumer.Ws.hmd(Ws.java:24)
at Gui.Gui.jButton1ActionPerformed(Gui.java:80)
at Gui.Gui.access$000(Gui.java:14)
at Gui.Gui$1.actionPerformed(Gui.java:43)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.RuntimeException: java.io.FileNotFoundException: C:\glassfish3\glassfish\domains\domain_1\config\cacerts.jks (Le chemin d’accès spécifié est introuvable)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.initTrustStore(DefaultCallbackHandler.java:919)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.<init>(DefaultCallbackHandler.java:340)
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.configureClientHandler(SecurityClientTube.java:822)
... 54 more
Caused by: java.io.FileNotFoundException: C:\glassfish3\glassfish\domains\domain_1\config\cacerts.jks (Le chemin d’accès spécifié est introuvable)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileInputStream.<init>(Unknown Source)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.initTrustStore(DefaultCallbackHandler.java:909)
... 56 more
Exception in thread "AWT-EventQueue-0" java.lang.RuntimeException: WSSTUBE0023: Error in creating new instance of SecurityClientTube
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.<init>(SecurityClientTube.java:185)
at com.sun.xml.wss.provider.wsit.SecurityTubeFactory.createTube(SecurityTubeFactory.java:285)
at com.sun.xml.ws.assembler.TubeCreator.createTube(TubeCreator.java:84)
at com.sun.xml.ws.assembler.TubelineAssemblerFactoryImpl$MetroTubelineAssembler.createClient(TubelineAssemblerFactoryImpl.java:130)
at com.sun.xml.ws.client.Stub.createPipeline(Stub.java:228)
at com.sun.xml.ws.client.Stub.<init>(Stub.java:205)
at com.sun.xml.ws.client.Stub.<init>(Stub.java:178)
at com.sun.xml.ws.client.sei.SEIStub.<init>(SEIStub.java:85)
at com.sun.xml.ws.client.WSServiceDelegate.createEndpointIFBaseProxy(WSServiceDelegate.java:608)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:348)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:330)
at com.sun.xml.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:312)
at javax.xml.ws.Service.getPort(Service.java:134)
at realm_consumer.Cw_Service.getCwPort(Cw_Service.java:72)
at realm_consumer.Ws.hmd(Ws.java:24)
at Gui.Gui.jButton1ActionPerformed(Gui.java:80)
at Gui.Gui.access$000(Gui.java:14)
at Gui.Gui$1.actionPerformed(Gui.java:43)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.RuntimeException: WSSTUBE0027: Error in configuring Client Security Callback Handler.
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.configureClientHandler(SecurityClientTube.java:826)
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.<init>(SecurityClientTube.java:180)
... 53 more
Caused by: java.lang.RuntimeException: java.io.FileNotFoundException: C:\glassfish3\glassfish\domains\domain_1\config\cacerts.jks (Le chemin d’accès spécifié est introuvable)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.initTrustStore(DefaultCallbackHandler.java:919)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.<init>(DefaultCallbackHandler.java:340)
at com.sun.xml.wss.jaxws.impl.SecurityClientTube.configureClientHandler(SecurityClientTube.java:822)
... 54 more
Caused by: java.io.FileNotFoundException: C:\glassfish3\glassfish\domains\domain_1\config\cacerts.jks (Le chemin d’accès spécifié est introuvable)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileInputStream.<init>(Unknown Source)
at com.sun.xml.wss.impl.misc.DefaultCallbackHandler.initTrustStore(DefaultCallbackHandler.java:909) 
```

我正在使用 glassfish 3.1.1 和 metro/jax-ws 。问题是路径是硬编码在 xml 文件中的，我必须从客户端的 jar 中加载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T19:58:44.930

我通过将 cacert.jks 放在 source/Meta-inf 包下并手动更改 WSIT 文件中的路径来解决了这个问题。XML 看起来像：

```
 <wsp:All>
       <sc:CallbackHandlerConfiguration wspp:visibility="private">
            <sc:CallbackHandler default="h" name="usernameHandler"/>
            <sc:CallbackHandler default="kiko" name="passwordHandler"/>
       </sc:CallbackHandlerConfiguration>
       <sc:TrustStore wspp:visibility="private"
           location="cacerts.jks"
           type="JKS" storepass="changeit" peeralias="xws-security-server"/>
  </wsp:All> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:01:26.573

查看这篇讨论如何引用 jar 文件中包含的 DTD 文件的文章：[http ://www-01.ibm.com/support/docview.wss?uid=swg21233092](http://www-01.ibm.com/support/docview.wss?uid=swg21233092)

可能不适用。

# node.js - Jade 中未定义的部分

> ID：11267135
> 
> 赞同：8
> 
> 时间：2012-06-29T18:32:10.643
> 
> 标签：node.js, express, pug

这是我在 index.jade 中的内容。是的，我正在使用 express.js

```
extends layout

block content
  h1 Invoices:
  != partial("invoice") 
```

这与我在每个 Jade/Express 教程中看到的一致。但我得到“参考错误：部分未定义”。任何想法为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T18:39:40.283

使用`include`，不带引号（此示例来自[玉文档](https://github.com/visionmedia/jade)）

```
users = [{ name: 'Tobi', occupation: 'Ferret' }]

each user in users
  .user
    include invoice 
```

`invoice`您的“部分”模板在哪里。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-29T18:36:47.983

Jade 最新版本不支持分部。您可能正在关注过时的教程。[请在此处](http://github.com/visionmedia/jade)阅读翡翠文档

# twitter-bootstrap - 活动时切换 Twitter Bootstrap 按钮类

> ID：11267137
> 
> 赞同：15
> 
> 时间：2012-06-29T18:32:31.117
> 
> 标签：twitter-bootstrap

在 twitter bootstrap 中，我正在寻找一种方法让按钮在不活动时成为默认颜色。一旦按钮处于活动状态，我想更改它的颜色。我查看了使用提供的 js 文件的方法。我最终写了一个小脚本来处理这个问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-29T18:32:32.147

通过向`class-toggle`按钮添加一个属性，等于按下按钮后您想要转到的内容并添加以下 jQuery，您将获得上述结果。

```
$('.btn-group > .btn, .btn[data-toggle="button"]').click(function() {

        if($(this).attr('class-toggle') != undefined && !$(this).hasClass('disabled')){
            var btnGroup = $(this).parent('.btn-group');

            if(btnGroup.attr('data-toggle') == 'buttons-radio') {
                btnGroup.find('.btn').each(function() {
                    $(this).removeClass($(this).attr('class-toggle'));
                });
                $(this).addClass($(this).attr('class-toggle'));
            }

            if(btnGroup.attr('data-toggle') == 'buttons-checkbox' || $(this).attr('data-toggle') == 'button') {
                if($(this).hasClass('active')) {
                    $(this).removeClass($(this).attr('class-toggle'));
                } else {
                    $(this).addClass($(this).attr('class-toggle'));
                }
             }

          }

      }); 
```

然后按钮看起来像

```
<button class="btn" data-toggle="button" class-toggle="btn-inverse">Single Toggle</button> 
```

如果您也想使用按钮组来执行此操作，则它的工作方式相同。只需将 添加`class-toggle`到组中的每个按钮即可。

[jsfiddle](http://jsfiddle.net/W9hUr/94)

**更新**

我已经修改并创建了一个要点，以便在开始使用课程按钮时获得更好的响应。 [Toggle Twitter 引导类](https://gist.github.com/bretterer/5103273)

**更新**

我进行了更改以修复单击活动单选按钮时出现的错误

[在这里找到它](http://jsfiddle.net/W9hUr/120/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-23T20:57:20.783

我不认为，任何 JS 都是真正必要的。我相信这完全可以**通过 CSS 和`data`属性**来完成。

是的，它涉及到一点*CSS 复制*，但仍然比有时出现故障的 javascript 更好。

1.  `data-active-class`为按钮添加数据属性，
2.  为所有类添加自定义 CSS（一个示例以提高可读性；颜色取自已经存在的类“primary”、“success”等）

    ```
    .btn.active[data-active-class="primary"] {
        color: #fff;
        background-color: #286090;
        border-color: #204d74;
    } 
    ```

*非活动按钮*将照常呈现，基于属性的*活动*`data-*`将由这个^^ CSS呈现。

[带有完整 CSS 的 JSFiddle](https://jsfiddle.net/ms040m01/3/)

**编辑：** 当使用 SASS 或 LESS 时，颜色可以/应该从 Bootstrap 已经定义的变量中使用......这解决了*重复*问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T01:08:45.617

我已经编辑了你的代码。如果您单击代码中的活动状态，一切都会搞砸。我添加了一些 if 语句来防止这种情况。如果你需要修复，只是一个贡献。很好地处理代码。

```
$('.btn-group > .btn, .btn[data-toggle="button"]').click(function() {
var buttonClasses = ['btn-primary','btn-danger','btn-warning','btn-success','btn-info','btn-inverse'];
var $this = $(this);

    if ($(this).attr('class-toggle') != undefined && !$(this).hasClass('disabled')) {

        var btnGroup = $this.parent('.btn-group');
        var btnToggleClass = $this.attr('class-toggle');
        var btnCurrentClass = $this.hasAnyClass(buttonClasses);

        if(btnToggleClass!='false'&&btnToggleClass!='btn') {

            if (btnGroup.attr('data-toggle') == 'buttons-radio') {
                var activeButton = btnGroup.find('.btn.active');
                var activeBtnClass = activeButton.hasAnyClass(buttonClasses);

                    activeButton.removeClass(activeBtnClass).addClass(activeButton.attr('class-toggle')).attr('class-toggle',activeBtnClass);               
                    $this.removeClass(btnCurrentClass).addClass(btnToggleClass).attr('class-toggle',btnCurrentClass);

            }

            if (btnGroup.attr('data-toggle') == 'buttons-checkbox' || $this.attr('data-toggle') == 'button') {
                $this.removeClass(btnCurrentClass).addClass(btnToggleClass).attr('class-toggle',btnCurrentClass);
            }

        }

    }

});    

$.fn.hasAnyClass = function(classesToCheck) {
    for (var i = 0; i < classesToCheck.length; i++) {
        if (this.hasClass(classesToCheck[i])) {
            return classesToCheck[i];
        }
    }
    return false; 
```

真诚的另一个引导爱好者

# python - Storing text mining data

> ID：11267143
> 
> 赞同：3
> 
> 时间：2012-06-29T18:32:58.303
> 
> 标签：python, database, data-mining, text-mining

I am looking to track topic popularity on a very large number of documents. Furthermore, I would like to give recommendations to users based on topics, rather than the usual bag of words model. To extract the topics I use natural language processing techniques that are beyond the point of this post.

My question is how should I persist this data so that: I) I can quickly fetch trending data for each topic (in principle, every time a user opens a document, the topics in that document should go up in popularity) II) I can quickly compare documents to provide recommendations (here I am thinking of using clustering techniques)

More specifically, my questions are: 1) Should I go with the usual way of storing text mining data? meaning storing a topic occurrence vector for each document, so that I can later measure the euclidean distance between different documents. 2) Some other way?

I am looking for specific python ways to do this. I have looked into SQL and NoSQL databases, and also into pytables and h5py, but I am not sure how I would go about implementing a system like this. One of my concerns is how can I deal with an ever growing vocabulary of topics?

Thank you very much

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:48:07.317

Why not have simple SQL tables

Tables:

*   documents with a primary key of id or file name or something
*   observations with foreign key into documents and the term (indexed on both fields probably unique)

The array approach you mentioned seems like a slow way to get at terms. With sql you can easily allow new terms be added to the observations table.

Easy to aggregate and even do trending stuff by aggregating by date if the documents table includes a timestamp.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T22:47:30.850

I would suggest that you do this work in a SQL database. You may not want to store the documents there, but the topics are appropriate.

You want one table just for the topics:

```
create table Topics (
    TopicId int identity(1,1), -- SQL Server for auto increment column
    TopicName varchar(255),
    CreatedBy varchar(255) default system_user,
    CreatedAt datetime default getdate() 
```

)

You want another table for the topics assigned to documents, assuming that you have some sort of document id to identify documents:

```
create table DocumentTopics (
    DocumentTopicId int identity(1,1), -- SQL Server for auto increment column
    TopicId int,
    DocumentID int,
    CreatedBy varchar(255) default system_user,
    CreatedAt datetime default getdate() 
```

)

And another table for document views:

```
create table DocumentView (
    DocumentViewId int identity(1,1), -- SQL Server for auto increment column
    DocumentId int,
    ViewedAt datetime,
    viewedBy int, -- some sort of user id
    CreatedBy varchar(255) default system_user,
    CreatedAt datetime default getdate() 
```

)

Now you can get the topics by popularity for a given date range using a query such as:

```
select t.TopicId, t.TopicName, count(*) as cnt
from DocumentUsage du join
     DocumentTopics dt
     on du.DocumentId = dt.DocumentId join
     Topics t
     on dt.TopicsId = t.TopicsId
where du.ViewedAt between <date1> and <date2>
group by t.TopicId, t.TopicName
order by 3 desc 
```

You can also get information about users, changes over time, and other information. You could have a users table, which could provide weights for the topics (more reliable users, less reliable users). This aspect of the system should be done in SQL.

# verilog - Verilog 总是阻塞

> ID：11267144
> 
> 赞同：0
> 
> 时间：2012-06-29T18:33:02.733
> 
> 标签：verilog

我只想在verilog中使用一些if else语句。所以我必须使用总是阻止。

```
integer count,index;
reg a=0;
always@(a) begin
   a=1;
   for(count=0;count<7;count=count+1) begin
      index=4*count;
      if((significand[index]==1'b0)&&(significand[index+1]==1'b0)&&
     (significand[ind‌​ex+2]==1'b0) &&(significand[index+3]==1'b0))
    lzero=lzero+1;
   end
end 
```

这段代码现在确实有些意义。我能够得到正确的仿真结果，但我未能在板上得到正确的合成。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T18:01:36.687

对于知道如何使用 C 或 C++ 编程但忘记 Verilog 和 VHDL 与那些不同的人来说，这是一个非常典型的问题。

**ALWAYS**块内的 Verilog 代码的每条信号线都同时“执行”。ALWAYS 块之外的组合逻辑也是如此。

在您的代码中，

```
assign a=1'b1;

assign a=1'b0; 
```

无论如何都会同时发生。

改变这一点的唯一方法是将最后一行放在你的 always 块中，在 for 循环的 end 语句之后。

可以帮助您了解 C 和 Verilog 之间区别的一页是以下页面：[EE-Times: The C Programmers Guide to Verilog](http://eetimes.com/design/embedded/4006420/The-C-Programmers-Guide-to-Verilog)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:40:56.073

既不`assign 1'b1;`是也不`assign 1'b0;`是有效的分配。如果你想不断地驱动一些网络`1'b1`，那么你必须写一些类似的东西`assign myvar = 1'b1;`。

此外，如果您的意图是实际分配给`a`，那么 always block 没有意义，因为`a`它是其敏感性列表中唯一的东西，这意味着该块必须在`a`更改其值时执行。由于`a`本质上永远不会改变它的值，所以这个块永远不应该被执行。

除非您提供一个最小的工作示例来证明您的问题，否则很难帮助您。我唯一可以推荐的是在右手边的语句中使用[三元运算符。](http://en.wikipedia.org/wiki/Ternary_operation)`assign`这样您就可以在不使用`always`块的情况下对行为逻辑进行建模。例如：

```
assign a = (b == 1'b1 ? c : 1'b0); 
```

希望能帮助到你。

**更新：**

您的第二个代码示例既不完整也不合法。同一个网络不能有两个组合分配。

但是，always 块中的敏感度列表现在是一个星号，这是 Verilog 2001 表示法，用于将所有右侧操作数自动包含到敏感度列表中。在您的情况下，该块将在每次`significand`或`lzero`更改时执行。

# algorithm - 有限制的排列

> ID：11267147
> 
> 赞同：4
> 
> 时间：2012-06-29T18:33:09.177
> 
> 标签：algorithm, combinatorics

我有一段时间无法应对的有趣问题。我们有 N 个字母和 N 对应于它们的信封，这意味着所有的字母和信封都被寻址（具有相同的排列）。任务是找出没有固定点的字母的可能排列数量 - 每个字母都在与该字母不同的信封中。当字母（和信封）通过一些 N 排列来处理时，问题就很容易了。然后我们所要做的就是找到 N 错位的数量（[http://en.wikipedia.org/wiki/Derangement](http://en.wikipedia.org/wiki/Derangement)）。

但总的来说，这个问题可能更有趣。我们得到数字 N 和 N 数字 - 第 i 个数字表示第 i 个字母（和信封）的地址。第一个数字是 0（所以我们有编号为 [0,...,N-1] 的字母和信封）。那么我们有多少精神错乱呢？例如，我们给出：

```
 5 
 1 1 2 2 3 
```

那么答案是 4，因为我们只有 4 种情况，每个字母都在不对应的信封中，它们是：

```
2 2 1 3 1
2 2 3 1 1 
2 3 1 1 2
3 2 1 1 2 
```

（所以我们不区分地址相同的字母）。

为了：

```
6
0 0 0 1 1 1 
```

答案是 1。因为：1 1 1 0 0 0 是唯一的方法。

我差点忘了.. 1<=N<=15 就足够了。

我想知道是否有任何方法可以快速计算它以及如何做到这一点。

我应该如何使用算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:43:48.130

第一次尝试，将其视为一个简单的动态规划问题。

所以你从左到右工作，对于信封列表中的每个位置，对于你可以留下的每组可能的字母，找出你可以到达那个点的方法的数量。前进很容易，你只需要一组，你知道有多少种方法可以到达那里，然后对于你可以放入下一个信封的每封信，你将结果集的总和乘以有多少种方法达到这一点。当您到达信封列表的末尾时，您会发现剩下 0 个字母的方法有多少，这就是您的答案。

对于您的第二个示例，可能会按以下方式进行：

```
Step 0: next envelope 1
  {1: 2, 2: 2, 3: 1}: 1
    -> {1: 2, 2: 1, 3: 1}
    -> {1: 2, 2: 2}

Step 1: next envelope 1
  {1: 2, 2: 1, 3: 1}: 1
    -> {1: 2, 2: 1}
    -> {1: 2, 3: 1}
  {1: 2, 2: 2}: 1
    -> {1: 2, 2: 1}

Step 2: next envelope 2
  {1: 2, 2: 1}: 2
    -> {1: 1, 2: 1}
  {1: 2, 3: 1}: 1
    -> {1: 1, 3: 1}
    -> {1: 2}

Step 3: next envelope 2
  {1: 1, 2: 1}: 2
    -> {2: 1}
  {1: 1, 3: 1}: 1
    -> {1: 1}
    -> {3: 1}
  {1: 2}: 1
    -> {1: 1}

Step 4: next envelope 3
  {2: 1}: 2
    -> {}
  {1: 1}: 2
    -> {}
  {3: 1}: 1
    // Dead end.

Step 5:
  {}: 4 
```

这有效，并将让您了解您要求的计算范围。在 15 时，您有 2^15 = 32768 个可能的子集来跟踪哪些是非常可行的。不过，大约 20 岁时，您将开始耗尽内存。

我们可以改进吗？答案是我们可以。我们的大部分精力都花在了记住，比如说，到目前为止，我们是否使用了标记为 8 的信封，还是使用了标记为 9 的信封。但我们不在乎这个。决定有多少种完成方式的不是我们使用的是信封 8 还是 9。而是图案。有多少个标签有 x 个信封和 y 个字母。不是哪个标签是哪个，只是有多少。

因此，如果我们只跟踪该信息，在每一步我们都可以抓取一个带有标签的信封，其中包含最多的信封，如果有平局，我们将选择剩下的字母最少的信封（如果*还有*领带，我们真的不在乎我们得到哪一个）。像以前一样进行计算，但中间状态要少得多。（我们不会像您那样将信封排成一行。但是对带有信封的最后一封信进行稳定的排序，您将获得上面的列表。）

让我们使用符号`[x y]: z`来表示留下带有信封和字母的`z`标签。我们有一个这样的标签列表然后你的例子可以表示为。对于过渡，我们将采用其中一个标签，并使用另一个标签的字母（给我们一个过渡到），或者我们将采用其中一个标签，并使用标签中的字母（给我们一个过渡到)。`x``y``1 1 2 2 3``{[2 2]: 2, [1 1]: 1}``[2 2]``{[2 1]: 1, [1 2]: 1, [1 1]: 1}``[2 2]``[1 1]``{[2 2]: 1, [1 2]: 1, [1 0]: 1}`

让我们进行计算。我将列出状态、到达那里的方式以及您所做的转换：

```
Step 1:
  {[2 2]: 2, [1 1]: 1}: 1
    -> 1 * {[2 1]: 1, [1 2]: 1, [1 1]: 1}
    -> 1 * {[2 2]: 1, [1 2]: 1, [1 0]: 1}

Step 2:
  {[2 1]: 1, [1 2]: 1, [1 1]: 1}: 1
    -> 1 * {[1 1]: 3}
    -> 1 * {[1 1]: 1, [1 2]: 1, [1 0]: 1}
  {[2 2]: 1, [1 2]: 1, [1 0]: 1}: 1
    -> 1 * {[1 2]: 1, [1 1]: 1, [1 0]: 1}

Step 3:
  {[1 1]: 3}: 1
       // This is 2x because once the label is chosen, there are 2 letters to use.
    -> 2 * {[0 1]: 1, [1 0]: 1, [1 1]: 1}
  {[1 1]: 1, [1 2]: 1, [1 0]: 1}: 2
    -> 1 * {[1 0]: 1, [1 2]: 1, [0 0]: 1}
    -> 1 * {[1 1]: 2, [0 0]: 1}
  {[1 2]: 1, [1 1]: 1, [1 0]: 1}: 1
    -> 1 * {[1 1]: 2, [0 0]: 1}
    -> 1 * {[1 2]: 1, [1 0]: 1, [0 0]: 1}

Step 4:
  {[0 1]: 1, [1 0]: 1, [1 1]: 1}: 2
    -> 1 * {[1 1]: 1, [0 0]: 2}
    -> 1 * {[1 0]: 1, [0 1]: 1, [0 0]: 1}
  {[1 0]: 1, [1 2]: 1, [0 0]: 1}: 2
    -> 1 * {[1 1]: 1, [0 0]: 2}
  {[1 1]: 2, [0 0]: 1}: 2
    -> 1 * {[1 0]: 1, [0 1]: 1, [0 0]: 1}

Step 5:
  {[1 1]: 1, [0 0]: 2}: 4
    // dead end
  {[1 0]: 1, [0 1]: 1, [0 0]: 1}: 4
    -> 1 * {[0 0]: 3} 
```

所以答案是4。

这似乎是一项疯狂的工作——远远超过枚举。它是！

但是它可以扩展。用 100 封信和信封试一试，它应该运行得很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:22:51.943

15 个“正常”排列将需要 1.3*10^9 次暴力尝试，但通过使用相同的键，我们剩下的排列要少得多。

让我们用你的例子：5张卡片，1 1 2 2 3

设置一个排列数组

5 4 3 2 1

并准备通过像数字一样从右到左递减来遍历它。忽略所有不是排列的组合。

5 4 3 2 1 忽略

5 4 3 2 0 忽略

5 4 3 1 5 忽略

...

5 4 3 1 2 好

有争议的是，这可以通过更好的排列算法得到极大的改进，但这并不容易，我必须考虑一下。

下一步是生成您的比较。排列数组选择一个排列：

5 4 3 1 2 表示 3 2 2 1 1

这将测试你的精神错乱。可以大大加快比较速度的一件事是您可以跳过无效的组合。

如果开头的 5 选择了错误的项目，您可以跳过所有 5 个 XXXX 排列并继续 4 5 3 2 1。

每次你发现一个错乱，增加一个计数器。完毕。

# class - => 在 Scala 类定义的开头是什么意思？

> ID：11267148
> 
> 赞同：24
> 
> 时间：2012-06-29T18:33:11.800
> 
> 标签：class, scala

问题 [交换类型参数与抽象类型](https://stackoverflow.com/questions/8619465/exchanging-type-parameters-with-abstract-types)`=>`的作者在他的类定义的开头写了一个。例子：

```
abstract class Thing { t => 
  type A 
  type G <: Group { type A = t.A } 
  val group: G 
} 
```

什么`t =>`意思？

因为这在 Google & Co 中很难找到，有人可以给我更多的背景信息或提供一个链接，我可以在哪里找到关于这种语言结构的更多信息？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-29T20:54:34.813

类本身的默认命名是`this`. 您可以将其替换`t`为`t =>`

如果您的类包含子类并且您需要访问封闭的自引用，这将很有用。

如果没有`t =>`您的示例，您将编写如下内容：

```
abstract class Thing {
  type G <: Group { type A = this.A }
} 
```

`Group { type A = this.A }`是一个子类型，因此`this`将引用组专业化本身而不是事物对象。可能你得到的不是你想要得到的。如果您需要访问事物自引用，您应该通过为自引用分配另一个名称来解决名称冲突

```
abstract class Thing { another_this = >
  type G <: Group { type A = another_this.A}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-14T03:27:21.500

它确实是自类型注释。请参阅官方 Scala 规范：

[https://scala-lang.org/files/archive/spec/2.13/13-syntax-summary.html](https://scala-lang.org/files/archive/spec/2.13/13-syntax-summary.html)

根据这个规范，它的上下文无关 EBNF 语法是：

SelfType ::= id [':' 类型] '=>' | 'this' ':' Type '=>' 所以，基本上，这意味着 SelfType 有两种基本形式。在一种形式中，您可以使用带或不带 Type 的 id。另一方面，您可以使用它，但它必须带有类型。

您可以在 Scala 第二版编程的第 29.4 节中找到它。但是，请记住，书籍很快就会过时，因此您需要参考规范。

# html - 使单元格宽度适合内容

> ID：11267154
> 
> 赞同：348
> 
> 时间：2012-06-29T18:33:49.617
> 
> 标签：html, css, html-table

鉴于以下标记，我如何使用 CSS 强制一个单元格（列中的所有单元格）适应其中内容的宽度而不是拉伸（这是默认行为）？

```
<style type="text/css">
td.block
{
border: 1px solid black;
}
</style>
<table style="width: 100%;">
<tr>
    <td class="block">this should stretch</td>
    <td class="block">this should stretch</td>
    <td class="block">this should be the content width</td>
</tr>
</table> 
```

编辑：我意识到我可以对宽度进行硬编码，但我不想这样做，因为该列中的内容是动态的。

看下面的图片，第一张图片是标记产生的。第二张图就是我想要的。

![在此处输入图像描述](../Images/8aad2a43b799d18068eb898ed4649e7b.png)

* * *

## 回答 #1

> 赞同：565
> 
> 时间：2012-06-29T18:41:19.830

我不确定我是否理解你的问题，但我会尝试一下：

```
td {
    border: 1px solid #000;
}

tr td:last-child {
    width: 1%;
    white-space: nowrap;
}
```

```
<table style="width: 100%;">
    <tr>
        <td class="block">this should stretch</td>
        <td class="block">this should stretch</td>
        <td class="block">this should be the content width</td>
    </tr>
</table>
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-02-25T10:39:24.063

环境

```
max-width:100%;
white-space:nowrap; 
```

将解决您的问题。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-03-08T19:14:11.400

对我来说，这是表格及其列的最佳自动调整和自动调整大小（使用 css !important ......只有当你不能没有时）

```
.myclass table {
    table-layout: auto !important;
}

.myclass th, .myclass td, .myclass thead th, .myclass tbody td, .myclass tfoot td, .myclass tfoot th {
    width: auto !important;
} 
```

不要为表格或表格列指定 css 宽度。如果表格内容较大，它将超过屏幕大小。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-10-04T15:22:01.140

有很多方法可以做到这一点！

如果我错了，请纠正我，但问题是寻找这种结果。

```
<table style="white-space:nowrap;width:100%;">
<tr>
<td class="block" style="width:50%">this should stretch</td>
<td class="block" style="width:50%">this should stretch</td>
<td class="block" style="width:auto">this should be the content width</td>
</tr>
</table> 
```

前 2 个字段将“共享”剩余页面（注意：如果您向任一 50% 字段添加更多文本，则将占用更多空间），最后一个字段将持续主导表格。

如果您愿意让文本换行，您可以**移动**white-space:nowrap; 到第三个字段的样式
将是在该字段中开始新行的唯一方法。

或者，您可以在最后一个字段上设置长度，即。宽度：150px，并在前 2 个字段上保留百分比。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-09T11:47:11.283

根据我能找到的所有规范，将 CSS 宽度设置为元素的 1% 或 100% 与父级有关。尽管在撰写本文时，Blink Rendering Engine (Chrome) 和 Gecko (Firefox) 似乎可以很好地处理 1% 或 100%（使列缩小或列以填充可用空间），但根据所有 CSS 规范并不能保证我可以找到正确渲染它。

一种选择是用 CSS4 flex div 替换 table：

[https://css-tricks.com/snippets/css/a-guide-to-flexbox/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

这适用于新浏览器，即 IE11+，请参阅文章底部的表格。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2019-05-01T11:57:05.230

简单的 ：

```
 <div style='overflow-x:scroll;overflow-y:scroll;width:100%;height:100%'> 
```

# c# - 如何仅显示不等于 0 的前 2 位小数

> ID：11267157
> 
> 赞同：6
> 
> 时间：2012-06-29T18:34:06.743
> 
> 标签：c#

如何仅显示 2 个非零小数的数字？

例子：

对于 0.00045578 我想要 0.00045 对于 1.0000533535 我想要 1.000053

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:41:52.717

我的解决方案是将数字转换为字符串。搜索“.”，然后计数零，直到找到一个非零数字，然后取两位数。

这不是一个优雅的解决方案，但我认为它会给你一致的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T18:45:28.250

没有内置的格式。

您可以获取数字的小数部分并计算有多少个零，直到获得两位数，然后将格式放在一起。例子：

```
double number = 1.0000533535;

double i = Math.Floor(number);
double f = number % 1.0;

int cnt = -2;
while (f < 10) {
  f *= 10;
  cnt++;
}

Console.WriteLine("{0}.{1}{2:00}", i, new String('0', cnt), f); 
```

输出：

```
1.000053 
```

注意：给定的代码仅适用于实际存在小数部分的数字，而不适用于负数。如果您需要支持这些情况，则需要为此添加检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:53:29.877

试试这个函数，使用解析来查找小数位数而不是寻找零（它也适用于负数）：

```
private static string GetTwoFractionalDigitString(double input)
{
    // Parse exponential-notation string to find exponent (e.g. 1.2E-004)
    double absValue = Math.Abs(input);
    double fraction = (absValue - Math.Floor(absValue));
    string s1 = fraction.ToString("E1");
    // parse exponent peice (starting at 6th character)
    int exponent = int.Parse(s1.Substring(5)) + 1;

    string s = input.ToString("F" + exponent.ToString());

    return s;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T14:22:23.803

你可以使用这个技巧：

```
int d, whole;
double number = 0.00045578;
string format;
whole = (int)number;
d = 1;
format = "0.0";
while (Math.Floor(number * Math.Pow(10, d)) / Math.Pow(10, d) == whole)
{
    d++;
    format += "0";
}
format += "0";
Console.WriteLine(number.ToString(format)); 
```

# html - 在固定容器中垂直居中图像

> ID：11267158
> 
> 赞同：1
> 
> 时间：2012-06-29T18:34:11.067
> 
> 标签：html, css

我正在使用 wordpress 来动态显示图像。每个图像具有 186 像素的固定宽度和可变高度，具体取决于图像的比例。每个图像都位于一个方形框中，具有 15 像素的填充。默认情况下，图像显示在框的顶部。我正在寻找一种将图像垂直居中的方法，因为它的宽度是固定的，但高度是可变的。这是我的代码：

HTML：

```
<div class="logoContainer">
    <img src="/path/to/image.jpg" />
</div> 
```

CSS：

```
.logoContainer {
    padding: 15px;
    background: #dddddc;
    margin-bottom: 10px;
    width: 186px;
    height: 186px;
}
.logoContainer img {
    max-width: 100%;
    height: auto;
} 
```

我可以使用绝对定位，但在不知道图像的确切高度的情况下，很难完美居中。但是，我们确实知道容器盒的确切尺寸。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:43:29.483

试试这个 - [http://jsfiddle.net/vLbRF/](http://jsfiddle.net/vLbRF/)

```
.logoContainer {
    padding:15px;
    background:#dddddc;
    margin-bottom: 10px;
    width:186px;
    height:186px;
    line-height: 186px;
}

.logoContainer img {
    max-width: 100%;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:38:41.547

使用这种实现的技术`vertical-align`将允许您拥有动态高度的容器：

```
<div class="logoContainer">
    <span></span><img src="/path/to/image.jpg" />
</div> 
```

CSS：

```
.logoContainer {
    padding:15px; 
    background:#dddddc; 
    margin-bottom: 10px; 
    width:186px; 
    height:186px; }
span {
    height: 100%;
    vertical-align: middle;
    display: inline-block;
.logoContainer img { 
    vertical-align: middle;
    display: inline-block; } 
```

# http - 如何清除 IIS 创建的 WinInet 缓存？

> ID：11267161
> 
> 赞同：1
> 
> 时间：2012-06-29T18:34:17.157
> 
> 标签：http, caching, httpwebrequest, wininet

使用 C# 中的[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29.aspx) /WebRequest API 构建 REST API 客户端。我更改了底层[RequestCachePolicy](http://msdn.microsoft.com/en-us/library/system.net.cache.requestcachepolicy.aspx)以允许它缓存具有适当 HTTP 缓存控制标头的响应。这很好用。

但是，我经常想在测试期间清除缓存。我读过的所有东西都这么说

1.  底层实现是[WinInet](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383928%28v=vs.85%29.aspx)缓存。
2.  您可以通过 Internet Explorer 清除它。
3.  在 Win7 上，缓存存储在 C:\Users\namehere\AppData\Local\Microsoft\Windows\Temporary Internet Files

当我的代码在中间层场景中**部署到 IIS**并且 HTTP 客户端从那里执行时，我发现

1.  底层实现仍然是 WinInet 缓存。
2.  Internet Explorer**不会**清除它。
3.  它存储在 C:\Windows\Temp\Temporary Internet Files\Content.IE5\

*我能够使用 System.Net 跟踪来监控客户端缓存行为。*

**我的问题是如何以非编程方式清除此 Content.IE5 缓存。**当然，我可以手动进去删除文件，但是对于 Content.IE5 下的所有字母数字文件夹等来说，这很麻烦。

# android - Google Cloud Messaging (GCM) 的 Android 文档的 Servlet 部分出错

> ID：11267163
> 
> 赞同：1
> 
> 时间：2012-06-29T18:34:27.697
> 
> 标签：android, servlets, google-cloud-messaging

我正在尝试为`Google Cloud to Messaging`. [这里](http://pages.citebite.com/g2a6c7p9quml)的服务器端实现的 Android 文档是

```
import com.google.android.gcm.server.*;

Sender sender = new Sender(myApiKey);
Message message = new Message.Builder(regId).build();
Result result = sender.send(message, 5); 
```

但是当我复制 Java Servlet 中的代码时，在第 3 行和第 4 行显示错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:09:37.987

你看到这个链接

> [https://github.com/ketanpatel25/GCM-Demo](https://github.com/ketanpatel25/GCM-Demo)

GCM-Demo / gcm / samples / gcm-demo-server 中的 GCM 文件夹

服务器说所有的演示代码给你尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:44:17.160

Android 文档中给出的示例有错误。

服务器端的完整代码`GCM`在`Android -> android-sdk ->extras -> google -> gcm -> gcm-server`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T10:04:56.083

你解决了这个问题吗？

如果您的编辑器无法识别 Sender 和 Message，则它无法找到 gcm-server.jar

将 gcm-server.jar 文件从 SDK 的 gcm-server/dist 目录复制到您的服务器类路径

# facebook - 使用 facebook 登录不起作用，案例刷新循环

> ID：11267164
> 
> 赞同：1
> 
> 时间：2012-06-29T18:34:28.630
> 
> 标签：facebook, api

在我的一个网站上，我们实现了使用 facebook 脚本登录。直到昨天它工作正常，但突然脚本似乎出现了问题。如果我已经登录 facebook，我的网站页面会不断刷新。如果我退出 facebook，那么刷新就会停止。

如果这是 facebook 的脚本问题，那么我认为会有很多其他人面临这个问题。这里有人也面临这个问题吗？如果有的话，请分享并提供解决方案。

谢谢

伊山

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:49:04.167

我们遇到了同样的问题，我们开始使用 Fb.getLoginStatus 而不是 FB.Login 并根据用户的状态手动将用户重定向到登录页面。

```
 FB.getLoginStatus(function (response) {
             if (response.status === 'connected') {
                 // the user is logged in and has authenticated your
                 // app, and response.authResponse supplies
                 // the user's ID, a valid access token, a signed
                 // request, and the time the access token 
                 // and signed request each expire
                 FB.api('/me', function (userDetails) {
                     LoadRegForm(userDetails);
                 });

             } else if (response.status === 'not_authorized') {
                 Rediret to facebook oauth page
              top.location.href = 'https://www.facebook.com/dialog/oauth?client_id=<%= ConfigurationManager.AppSettings["fbappid"] %>&redirect_uri=<%= ConfigurationManager.AppSettings["fbcanvasurl"] %>&scope=email,user_birthday,user_education_history';

             } else {
                 // the user isn't logged in to Facebook.
                 top.location.href = 'https://www.facebook.com/dialog/oauth?client_id=<%= ConfigurationManager.AppSettings["fbappid"] %>&redirect_uri=<%= ConfigurationManager.AppSettings["fbcanvasurl"] %>&scope=email,user_birthday,user_education_history';
             } 
```

您甚至可以在两个 else 块中调用 FB.Login 函数而不是重定向。

# vmware - ESX 可以处理多个文件管理器实例吗？

> ID：11267171
> 
> 赞同：1
> 
> 时间：2012-06-29T18:34:52.000
> 
> 标签：vmware, virtual-machine, file-manager, esx

这可能是一个简单的问题，但是 ESX 可以在多个线程中处理多个文件管理器实例吗？还是我必须将文件任务排队以连续工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:28:56.013

ESX 主机可以处理多个文件操作，例如迁移、vmotion、存储 vmotion 等

例如，在标准 1GB 网络上，最多可以在两个 Vsphere 5 ESX 主机之间执行[4 个并发 vMotion 。](http://www.vmware.com/pdf/vsphere5/r50/vsphere-50-configuration-maximums.pdf)在 10GB 网络上，最多 8 个并发 vMotion。

这些限制是对现代硬件功能进行全面考虑的结果。

# xslt - 在 group-starting-with in 下测试 2 个条件

> ID：11267172
> 
> 赞同：0
> 
> 时间：2012-06-29T18:34:53.943
> 
> 标签：xslt, xslt-2.0, xslt-grouping

我需要在每个组中测试 2 个可能标签中的 1 个。这可能吗？什么是正确的语法？

我试过“||” 但从解析器得到一个错误。我在 Oxygen 12.1 中使用 Saxon PE 9.3。

前任。

```
<xsl:param name="elements" as="element()*"/>    
<xsl:for-each-group select="$elements"
                group-starting-with="condition or condition" >
    <xsl:for-each-group> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:58:28.987

如果您想从两个元素名称中的任何一个开始分组，请尝试

```
<xsl:for-each-group select="$elements"
            group-starting-with="foo | bar"> 
```

# sql - ER图缺陷

> ID：11267174
> 
> 赞同：2
> 
> 时间：2012-06-29T18:35:01.567
> 
> 标签：sql, database-design, relational-database, erd

我有以下银行数据库的 ER 图 - 客户可能有多个帐户，帐户可能由多个客户共同持有，每个客户都与一个帐户集相关联，并且帐户是一个或多个帐户集的成员。违反了哪些设计规则？应该进行哪些修改，为什么？

到目前为止，我不确定的一些缺陷是：

1) AcctSets 实体中的冗余所有者地址属性。

2) 此 ER 不包括拥有多个不同地址的所有者的帐户。

我的问题是：我将如何修复这些缺陷和/或我的分析中可能遗漏的其他缺陷？谢谢！

![ER图](../Images/77bb9742b457d7446cf5bd40c24c4254.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:51:06.380

我不确定 AccountSet 实体的作用。

您与客户和客户有多对多的关系。因此，您需要一个 CustomerAccount 实体，将客户与一个或多个帐户联系起来，并将一个帐户与一个或多个客户联系起来。

```
CustomerAccount
---------------
CustomerAccountKey
CustomerKey
AccountKey 
```

此实体将由 CustomerKey 访问，以获取客户的帐户，或由 AccountKey 访问，以获取客户的帐户。CustomerAccountKey 仅用于对数据库上的数据进行聚类。

CustomerAccount 实体中的 CustomerKey - AccountKey 组合是唯一的。

如果您想要一个客户的多个地址，那将成为客户实体和地址实体之间的一对多关系。这允许客户有一个夏季地址和一个冬季地址，作为一个现实生活中的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T01:09:37.757

您没有说明使用 abstraction 的原因`Account Sets`。您需要 和 之间的交集`Customer`，`Account`因为您的业务规则说多对多，但是为什么要介入抽象呢？

即使假设您保留它，该属性`owner address`也不属于`Account`和`Customer`（即`Account Set`）之间的抽象/交叉实体。那是没有意义的。您规定的规则和一般经验中没有任何内容表明客户地址对帐户和客户之间的关系有任何功能依赖性。如果有的话，它将在功能上仅依赖于客户。就目前而言，您正在将此依赖关系建模为多值，因此地址在功能上甚至不完全依赖于客户。唯一放置它的 3NF 位置是`Addresses`实体类型。

您应该考虑一个比`Addresses`. 首先，您的实体应该以它们所代表的对象命名。抵制使用复数名词的冲动。实体类型不是集合。实现实体类型的表将是您的实体实例的集合，但这是不言而喻的，当您考虑关系的基数时，复数名词命名只会让您感到困惑。我建议`Location`作为实体类型名称，`address`作为属性。当你超越概念层面时`address`，几乎肯定会被分解。

除此之外，根据您引用的业务规则，您处于非常好的轨道上。

# ms-access - 列定义为插入时需要自动增量

> ID：11267175
> 
> 赞同：0
> 
> 时间：2012-06-29T18:35:02.543
> 
> 标签：ms-access, oledb

我正在尝试通过他们的 SQL DDL 定义一个 MS Access 表。我对传统 SQL 有丰富的经验，但访问特定的语言让我陷入了困境。

```
CREATE TABLE DemoTable (
    Demo_id IDENTITY PRIMARY KEY,
    Demo_nm VARCHAR(200) NOT NULL
);
=> Query executed successfully. 0 rows were affected. 
```

我试过了`AUTOINCREMENT`，`COUNTER`等等`IDENTITY(1,1)`。

```
INSERT INTO DemoTable VALUES('Some Name');
=> Number of query values and destination fields are not the same. 
```

这是因为它需要一个 Demo_id 值。

```
INSERT INTO DemoTable VALUES(5, 'Some Name');
=> Query executed successfully. 1 rows were affected. 
```

其他所有内容都已正确创建.. 为该创建了一个索引，`Demo_id`并且`Demo_nm`不能为空。

我的参考：

[如何：使用 Access SQL 修改表的设计](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:42:21.047

这对我有用：

```
CREATE TABLE DemoTable (
    Demo_id Counter PRIMARY KEY,
    Demo_nm VARCHAR(200) NOT NULL) 
```

然后

```
INSERT INTO DemoTable (   
Demo_nm ) Values ("abc") 
```

# box2d - 需要在 box2dweb 中使用碰撞过滤的真实示例

> ID：11267177
> 
> 赞同：1
> 
> 时间：2012-06-29T18:35:10.487
> 
> 标签：box2d

我正在 boxbox 中开发平台游戏，box2dweb 的包装器。我想避免某些实体不发生碰撞，即它们可以相互穿过。任何人都可以提供在 box2dweb 或 boxbox 中使用碰撞过滤的真实世界更简单的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:48:35.103

[http://codingowl.com/](http://codingowl.com/)。这个网站有一篇关于 的文章`Collision Filtering`。你可能想检查一下。

# html - Bootstrap出于某种原因在 a 内垂直移动文本 - 如何解决这个问题？

> ID：11267178
> 
> 赞同：1
> 
> 时间：2012-06-29T18:35:14.527
> 
> 标签：html, css, cross-browser, twitter-bootstrap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:42:47.320

有一个简单的修复：http: [//jsfiddle.net/Wexcode/uC5ax/](http://jsfiddle.net/Wexcode/uC5ax/)

变化`vertical-align: top`_`.table td`

```
.table th,
.table td {
  padding: 8px;
  line-height: 18px;
  text-align: left;
  vertical-align: top;
  border-top: 1px solid #dddddd;
} 
```

到`vertical-align: text-bottom`

```
.table th,
.table td {
  padding: 8px;
  line-height: 18px;
  text-align: left;
  vertical-align: text-bottom;
  border-top: 1px solid #dddddd;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-10T11:07:55.670

保持表格格式的更好解决方案是简单地从以下位置删除有问题的行：

```
.table {
  width: 100%;
  max-width: 100%;
  margin-bottom: @line-height-computed;
  > thead,
  > tbody,
  > tfoot {
    > tr {
      > th,
      > td {
        padding: @table-cell-padding;
        line-height: @line-height-base;
        vertical-align: top;
        border-top: 1px solid @table-border-color;
      }
    }
  }
  > thead > tr > th {
    vertical-align: top;
    border-bottom: 2px solid @table-border-color;
  }
  > caption + thead,
  > colgroup + thead,
  > thead:first-child {
    > tr:first-child {
      > th,
      > td {
        border-top: 0;
      }
    }
  }
  > tbody + tbody {
    border-top: 2px solid @table-border-color;
  }

  .table {
    background-color: @body-bg;
  }
} 
```

到

```
.table {
  width: 100%;
  max-width: 100%;
  margin-bottom: @line-height-computed;
  > thead,
  > tbody,
  > tfoot {
    > tr {
      > th,
      > td {
        padding: @table-cell-padding;
        line-height: @line-height-base;
        border-top: 1px solid @table-border-color;
      }
    }
  }
  > thead > tr > th {
    border-bottom: 2px solid @table-border-color;
  }
  > caption + thead,
  > colgroup + thead,
  > thead:first-child {
    > tr:first-child {
      > th,
      > td {
        border-top: 0;
      }
    }
  }
  > tbody + tbody {
    border-top: 2px solid @table-border-color;
  }

  .table {
    background-color: @body-bg;
  }
} 
```

# symfony - 在 Windows 7 机器上使用 Symfony2 parameters.ini 文件创建数据库

> ID：11267179
> 
> 赞同：0
> 
> 时间：2012-06-29T18:35:18.040
> 
> 标签：symfony

我的具体问题：如何解决使用 Symfony2 parameters.ini 文件创建数据库失败的问题？

这与 Windows7 和 Symfony2 有关。我在配置 Symfony2 后尝试创建数据库，但失败了。（详细信息：我正在使用 Windows 7 64 位、xampp 1.7.7 和 PHP 5.3.8 和 Symfony2 2.0.14）。

当我从命令行尝试这个时：

```
php app/console doctrine:database:create 
```

我明白了：

```
Could not create database for connection named <comment>jobeet</comment>
SQLSTATE[28000] [1045] Access denied for user 'root'@'localhost' (using password: YES) 
```

我的 parameters.ini 文件如下所示：

```
[parameters]
    database_driver="pdo_mysql"
    database_host="localhost"
    database_port="3306"
    database_name="jobeet"
    database_user="root"
    database_password="[intentionally left blank]"
    mailer_transport="smtp"
    mailer_host="localhost"
    mailer_user=""
    mailer_password=""
    locale="en"
    secret="[intentionally left blank]" 
```

我可以从命令行（mysqld --console）启动MySql，并以root用户身份进入MySql（mysql -p [故意留空] -u root）并创建一个数据库（CREATE DATABASE test;），所以我认为我的服务器正在运行，我可以使用它。

我怀疑“用户'root'@'localhost'的访问被拒绝”的问题与没有MySql root的密码有关。

如果有人以前遇到过这种情况，并且知道该怎么做，我们将非常感谢您的帮助。

我试图通过以下方式授予**所有特权**：

```
mysql> grant all privileges on *.* to 'root'@'localhost';
Query OK, 0 rows affected (0.05 sec)

mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec) 
```

我担心说'0行受影响'。那可不好。

这是我的**config.yml**。如果您发现问题，请告诉我。

```
imports:
    - { resource: parameters.ini }
    - { resource: security.yml }

framework:
    #esi:             ~
    #translator:      { fallback: %locale% }
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: %locale%
        auto_start:     true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true

# Swiftmailer Configuration
swiftmailer:
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%

jms_security_extra:
    secure_controllers:  true
    secure_all_services: false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:50:27.310

您创建了一个名为`test`，而不是的数据库`jobeet`。

# java - rich:listShuttle 使用复杂对象时出错

> ID：11267180
> 
> 赞同：1
> 
> 时间：2012-06-29T18:35:20.060
> 
> 标签：java, jsf, seam

**工作：**这是我的工作丰富：当 sourceValue 和目标值是字符串列表时的 listShuttle。

**1.JSF页面**

```
<rich:listShuttle id="companyJurisdictionShutle"
            sourceValue="#{companyAdminAction.statesList}"
            targetValue="#{companyAdminAction.selectedStates}"
            var="item" orderControlsVisible="false" fastOrderControlsVisible="false"
            sourceCaptionLabel="Available"
            targetCaptionLabel="Selected" styleClass="lishShuttle">
                 <rich:column>
                     #{item}
                 </rich:column>
</rich:listShuttle> 
```

**2\. 支持豆**

```
//sourceValue                    
public List<String> getStatesList() {

    for (DMPJurisdiction dmpJurisdiction: jurisdictionList) {
        if(!statesList.contains(dmpJurisdiction.getJurisName())) {
            statesList.add(dmpJurisdiction.getJurisName());
        }
    }
    return statesList;
}

//targetValue
public List<String> getSelectedStates() {
    return selectedStates;
} 
```

**3\. 价值对象**

```
public class DMPJurisdiction implements Serializable {

    /** serial version UID **/
    private final static Long serialVersionUID = 109892748283726L;

    /** jurisdiction id **/
    private Long jurisId;

    /** name **/
    private String jurisName;

    /** description **/
    private String jurisDescription;

    /** code **/
    private String jurisCode;

    //Getters and Setters

} 
```

**不工作：**我更改了列表穿梭，因此 sourceValue 和 targetValue 是复杂对象列表（DMPJurisdiction），而不是之前的字符串列表。为此我写了一个转换器。

**1.JSF页面**

```
<rich:listShuttle id="companyJurisdictionShutle"
      sourceValue="#{companyAdminAction.jurisdictionList}"
      targetValue="#{companyAdminAction.targetJurisdictionList}"
      converter="#{dmpJurisdictionConverter}"
      var="item" orderControlsVisible="false" fastOrderControlsVisible="false"
      sourceCaptionLabel="Available"
      targetCaptionLabel="Selected" styleClass="lishShuttle">
             <rich:column>
                #{item.jurisName}
             </rich:column>
 </rich:listShuttle> 
```

**2\. Backing Bean**：现在返回上面列出的复杂对象DMPJurisdiction的列表。

```
//sourceValue
public List<DMPJurisdiction> getJurisdictionList() {
    return jurisdictionList;
}

//targetValue
    public List<DMPJurisdiction> getTargetJurisdictionList() {
    return targetJurisdictionList;
} 
```

**3.转换器**

```
public class DmpJurisdictionConverter implements javax.faces.convert.Converter {

      public Object getAsObject(FacesContext facesContext, UIComponent uiComponent, String s) {
          List<DMPJurisdiction> dmpJurisdictionList = Cache.loadAllDmpJurisdictions();
            for (DMPJurisdiction dmpJurisdiction : dmpJurisdictionList) {
                if (dmpJurisdiction.getJurisName().equals(s)) {
                    return dmpJurisdiction;
                }
            }
            return null;
      }

      public String getAsString(FacesContext facesContext, UIComponent uiComponent, Object o) {
          List<DMPJurisdiction> dmpJurisdictionList = Cache.loadAllDmpJurisdictions();
            for (DMPJurisdiction dmpJurisdiction : dmpJurisdictionList) {
                if (((DMPJurisdiction) o).getJurisName().equals(dmpJurisdiction.getJurisName())) {
                    return dmpJurisdiction.getJurisName();
                }
            }
            return null;
      }

} 
```

**4.错误：** `sourceId=accountWorkcaseOpenTabForm:addDmpCompanySubview:companyJurisdictionShutle[severity=(ERROR 2), summary=(javax.el.PropertyNotFoundException: /html/workcase/type/dmp/admin/AddCompany.xhtml @55,98 sourceValue="#{companyAdminAction.jurisdictionList}": Property 'jurisdictionList' not writable on type java.util.List), detail=(javax.el.PropertyNotFoundException: /html/workcase/type/dmp/admin/AddCompany.xhtml @55,98 sourceValue="#{companyAdminAction.jurisdictionList}": Property 'jurisdictionList' not writable on type java.util.List)] ||||`

**注意：**顺便说一句，我正在为 selectOneMenu 成功使用相同的 dmpJurisdictionConverter，如下所示，在另一个**不相关**的JSF 页面中。

```
<h:selectOneMenu value="#{companyAdminAction.dmpJurisdiction}" converter="#{dmpJurisdictionConverter}">
                    <s:selectItems var="item" value="#{companyAdminAction.jurisdictionList}" label="#{item.jurisName}"
                                   hideNoSelectionLabel="true" noSelectionLabel="-- Select Jurisdiction --"/>
                    <a4j:support event="onchange" action="#{companyAdminAction.loadCompanyList()}"
                             reRender="dmpCompanies"/>
            </h:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:49:03.203

你可以使用接缝标签“<”s:convertEntity/>

它会自动进行转换，但复杂对象必须是实体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T13:28:05.347

**我正在使用它的getter getStatesList**加载 sourceValue="#{companyAdminAction.statesList}" 。它应该单独加载，因为在页面呈现时会多次调用 getter 和 setter。我不得不将加载 statesList 移动到在 bean 初始化期间调用的另一个私有方法。

# jquery - 将 AJAX 数据库条目添加到 jQuery

> ID：11267181
> 
> 赞同：0
> 
> 时间：2012-06-29T18:35:27.170
> 
> 标签：jquery, mysql, ajax, post, syntax

如何在此脚本中添加用于数据库条目的 AJAX？它可以正常工作，并且我有 php 文件可以使用，但我一直遇到括号或语法问题。

这是有效的代码（看看[http://jsfiddle.net/myuX3/5/](http://jsfiddle.net/myuX3/5/)）

```
<HTML>
<HEAD>
<script type="text/javascript" src="js/jquery.js"> </script>
</HEAD>
<BODY>
<label for="message_wall">Share your message on the Wall</label>
<input type="text" id="message_wall" name="message_wall" />
<button id="submitbtn" type="submit">Post to wall</button>
<ul id="wall">
</ul>

<script type="text/javascript">
$(document).ready(function(){

$('#submitbtn').click(function() {

    var message_wall = $('#message_wall').val();
    var $d=$("<li>"+message_wall+"</li>").fadeIn(500,function() {
        $('#message_wall').val('');
    });
    $("ul#wall").prepend($d);

});
});
</script>
</body>
</html> 
```

这是我对 ajax 的尝试。没有任何内容添加到数据库中，但其他一切正常：

```
$(document).ready(function() {

    $('#submitbtn').click(function() {

    var message_wall = $('#message_wall').val();
    $.ajax({
        type: "POST",
        url: "insert.php",
        data: {
            'message_wall': message_wall
        },
        success: function() {
            var $d = $("<li>" + message_wall + "</li>").fadeIn(500, function() {
                $('#message_wall').val('');
            });
            $("ul#wall").prepend($d);
        }
    });
});​
}); 
```

以及随附的 php 文件：

```
<?php
if(isset($_POST['submitbtn'])){ /*is this the correct syntax?*/
   $message = $_POST['message_wall'];
/* Connection to Database */
$link = mysql_connect("localhost", "*****", "*****") or die("Couldn't make connection.");
@mysql_select_db("*******", $link) or die("Couldn't select database");

/* Remove HTML tag to prevent query injection */
$message = strip_tags($_POST['message_wall']);

mysql_query("INSERT INTO wall (message) VALUES ('$message')");
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:42:23.603

更改随附的 php 文件

```
<?php
if(!empty($_POST['message_wall'])){ 
/* Connection to Database */
$link = mysql_connect("localhost", "*****", "*****") or die("Couldn't make connection.");
@mysql_select_db("*******", $link) or die("Couldn't select database");

/* Remove HTML tag to prevent query injection */
$message = strip_tags($_POST['message_wall']);

$done = mysql_query("INSERT INTO wall (message) VALUES ('".$message."')");
    if($done){
         echo true;
    }else{
        echo  false;
    }
}
?> 
```

关于萤火虫错误

看到这个`;`后删除`success:function() {}`[`fiddle`](http://jsfiddle.net/sAyr6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:13:31.300

```
<?php
if(isset($_POST['submit'])){
/* Connection to Database */
$link = mysql_connect("localhost", "****", "****") or die("Couldn't make connection.");
@mysql_select_db("****", $link) or die("Couldn't select database");

/* Remove HTML tag to prevent query injection */
$message = strip_tags($_POST['message_wall']);

$done = mysql_query("INSERT INTO wall (message) VALUES ('test')");
if($done){
     echo true;
}else{
    echo  false;
}
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:54:15.317

我认为这个调整会解决你的问题（你有一个额外的分号）：

```
$(document).ready(function() {
    $('#submitbtn').click(function() {
        var message_wall = $('#message_wall').val();
        $.ajax({
            type: "POST",
            url: "insert.php",
            data: {
                'message_wall': message_wall
            },
            success: function() {
                var $d = $("<li>" + message_wall + "</li>").fadeIn(500, function() {
                    $('#message_wall').val('');
                });
                $("ul#wall").prepend($d);
            } // ; <-- remove this semicolon 
        });
    });
}); 
```

# javascript - 如何正确处理空的、遗漏的、默认的表单值？

> ID：11267183
> 
> 赞同：0
> 
> 时间：2012-06-29T18:35:34.733
> 
> 标签：javascript, forms, google-app-engine

我有 html 表单，其中有可能：

(1) 用户输入什么都没有，例如，如果是文本输入字段；

```
<input type="text" class="input-xlarge" id="first-name" name="first-name"> 
```

(2) 用户保留默认空值，如选择：

```
<select id="prof-area" class="input-xlarge">
  <option value="0" selected="selected"></option> 
```

(3) 用户留空值，如多选项选择：

```
<select multiple="multiple" id="reason" name="reason" class="input-xlarge">
    <option value="001">reason001</option>
    <option value="002">reason002</option> 
```

在 GAE 方面的每种情况下，我都应该理解这是空值。

```
first_name = None
if self.request.get('first-name'):
    first_name = self.request.get('first-name') 
```

适用于案例（1）。

```
prof_area = None
if self.request.get('prof-area') and self.request.get('prof-area') !='0':
    prof_area = self.request.get('prof-area') 
```

应该适用于案例（2），但看起来不太好。有没有更好的方法来处理同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:08:06.507

`required=True`除非您添加了参数，否则您不需要所有这些工作。如果您放置了缺少某些属性的实体，GAE 会创建或更新具有缺少属性的实体为空。请参阅此[文档](https://developers.google.com/appengine/docs/python/datastore/propertyclass#Property)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:37:05.553

您的 prof-area 字段没有名称参数，这可能是您在服务器上看不到数据的原因。

无论如何，试试这个......

在客户端，只需在空选择选项中放入一个空字符串，如下所示：

```
<select id="prof-area" name="prof-area" class="input-xlarge">
  <option value="" selected="selected"> -- select -- </option>
</select 
```

然后在服务器上，首先将所有值抓取到局部变量中 - 让其他人更容易看到发生了什么......

```
first_name = self.request.get('first_name')
prof_area = self.request.get('prof-area')
reason = self.request.get('reason') 
```

然后您可以依次检查每个参数...

```
if first_name:
  # do something with first_name

if prof_area:
  # do something with prof_area

if reason:
  # do something with reason 
```

# objective-c - iOS 链接器命令使用 Core Plot Xcode 4.3.2 失败

> ID：11267185
> 
> 赞同：0
> 
> 时间：2012-06-29T18:35:40.410
> 
> 标签：objective-c, ios, xcode, linker, core-plot

所以我正在使用 CorePlot 构建一个应用程序，当我尝试运行它时，出现以下错误：

```
ld: warning: ignoring file /Users/tcbl/Library/Developer/Xcode/DerivedData/FaceTracker-    chbhtqlxwipamtailjamrakmkpuy/Build/Products/Debug-iphoneos/libCorePlot-CocoaTouch.a,     
file was built for archive which is not the architecture being linked (armv6)
ld: duplicate symbol _main in /Users/tcbl/Library/Developer/Xcode/DerivedData/FaceTracker-chbhtqlxwipamtailjamrakmkpuy/Build/Intermediates/FaceTracker.build/Debug-iphoneos/FaceTracker.build/Objects-normal/armv6/main-cocoatouch.o and /Users/tcbl/Library/Developer/Xcode/DerivedData/FaceTracker-chbhtqlxwipamtailjamrakmkpuy/Build/Intermediates/FaceTracker.build/Debug-iphoneos/FaceTracker.build/Objects-normal/armv6/main.o for architecture armv6
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我在某处读到需要添加到其他链接器标志`-ObjC -all_load -lCorePlot`的地方：但这似乎不在项目信息或构建设置中的任何地方，我不确定这是否与我的错误有关。任何帮助揭开这个神秘面纱将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:54:12.290

如果您选择您的项目并转到 Build Settings 选项卡，您应该会在 Linking 下找到它。确保您拥有选项卡的高级/完整视图。您要输入的字段是“其他链接器标志”。

希望有帮助！

# arrays - JDBC - 多维数组和解析结果

> ID：11267197
> 
> 赞同：1
> 
> 时间：2012-06-29T18:36:12.593
> 
> 标签：arrays, string, parsing, jdbc, multidimensional-array

在公开我的问题之前，我不得不说我从来没有学习过 Java，甚至没有进行过开发研究。很抱歉如果我的问题看起来“愚蠢”......

我必须从 derby 数据库的几个列中将结果显示到 Panel 中。

为了做到这一点，我有一个方法返回一个列数组和一个结果集：

```
public String[] toStringArray(ResultSet resultSet, int columnIndex) {
    LinkedList<String> resultList = new LinkedList<String>();
    try {
        while (resultSet.next()) {
            resultList.add(resultSet.getString(columnIndex));
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return resultList.toArray(new String[0]);
} 
```

这是我的第二个方法，它通过第一个方法从我的数据库的第一列和第二列返回一个二维数组......

```
public String[][] GetArray() {
String[] arrayone = new String[0];
String[] arraytwo = new String[1];
String[][] array = new String[2][];

try {
    String getInfo =
                     "SELECT ONE, TWO FROM APP.DB ";

ResultSet listR = s.executeQuery(getInfo);
arrayone = toStringArray(listR,1);
arraytwo = toStringArray(listR,2);
   array [0] = arrayone; 
   array [1] = arraytwo; 

} } }catch (SQLException ex) {
            Logger.getLogger(CalendarPanelTest.class.getName()).log(Level.SEVERE, null, ex);
        }}
      return array;

} 
```

所以我返回一个两个数组维度，其中包含数据库中两列的结果......

现在我像这样显示它（想法是两列结果查询的结果数量相同 - 或者必须输入空值才能显示）：

```
String[][] result = GetArray();

int nb = array.length;
for(int a=0; a < nb; a++) 
{
System.print.ln(result[0][a]+result[1][a])
} 
```

我认为问题出在

```
return resultList.toArray(new String[0]); 
```

我试图改变这个对象没有结果......

这似乎只将数据推送到第一列......

或形成我的方法或在列数组的声明中：

```
String[] arrayone = new String[0];
String[] arraytwo = new String[1];
String[][] array = new String[2][]; 
```

但是我尝试了所有数字的可能性，当我想显示它时，这个给了我第一列的结果......：

```
String[][] array = new String[2][]; 
```

即使

```
String[][] array = new String[1][] 
```

或者

```
String[][] array = new String[0][1]; 
```

似乎更符合逻辑...

我很高兴有一些解决方案的建议来正确构建这个二维数组，或者给我提供另一个更好的解决方案的方法......

数组是最好的方法吗？如果我需要显示 10 个 colmun 的结果，这可能是实现该目标的最佳/快速方法？

最好的问候，并为我糟糕的英语感到抱歉......

编辑：我的解决方案是为第二个值添加第二个结果集：

```
ResultSet listR = s.executeQuery(getInfo);
    ResultSet listR2 = s.executeQuery(getInfo);
    arrayone = toStringArray(listR,1);
    arraytwo = toStringArray(listR2,2); 
```

感谢 Soumyadip Das 的帮助！！！问候，

工作速度 第一时间就正常工作...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T13:54:08.867

我认为**您错过了右括号**，如下所示：

```
public String[] toStringArray(ResultSet resultSet, int columnIndex) {
    LinkedList<String> resultList = new LinkedList<String>();
    try {
        while (resultSet.next()) { // where is the closing bracket ??
            resultList.add(resultSet.getString(columnIndex));
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return resultList.toArray(new String[0]);
} 
```

如果这只是一个发布错误，请检查如下：

* * *

我认为让它简单，可能是我错了，但你可以试试这个：

```
public String[] toStringArray(ResultSet resultSet, int columnIndex) {
    ArrayList<String> results = new ArrayList<String>();
    try {
    // COMMENT: please debug your code to be sure the resultSet is not empty.
        while (resultSet.next()) {
            results.add(resultSet.getString(columnIndex));}
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return results.toArray();
} 
```

以下 2 行可能会导致问题：

```
 array [0] = arrayone; 
   array [1] = arraytwo; 
```

**建议：**始终正确调试您的代码。它可以解决您 80% 的问题。

# javascript - jQuery：图像在 HTML 表中的位置

> ID：11267202
> 
> 赞同：0
> 
> 时间：2012-06-29T18:36:25.523
> 
> 标签：javascript, jquery, html

假设我有一张桌子：

```
 <table id="table1" border="1">
    <tr>
      <td id='id1'  style="width:200px"></td>
      <td id='id2'  style="width:200px">2222</td> 
    </tr>

  </table> 
```

我正在使用以下代码将图像添加到这些表格单元格

```
$('#id1').append('<img src=images/image1.jpg />');
$('#id1').append('<img src=images/image2.jpg />');
$('#id1').append('<img src=images/image3.jpg />');

$('#id2').append('<img src=images/image4.jpg />'); 
```

现在我想要实现的是：
1\. 对于单元格“id2”，我希望图像始终向右对齐，因此它不在文本旁边。
2\. 对于单元格“id1”，由于这 3 个图像具有不同的尺寸（24x24、32x32、24x24），我不希望它们彼此相邻。我想要的是，好像那个单元格中有 3 个小单元格，每个单元格的大小为 32x32，并将这些图像一一放入这些小单元格中。

我不擅长 html 或 javascript。可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:41:21.670

CSS

```
#id2 img { float: right; } 
```

HTML

```
 <table id="table1" border="1">
    <tr>
      <td id='id1'  style="width:200px"><table><tr></tr></table></td>
      <td id='id2'  style="width:200px">2222</td> 
    </tr>
  </table> 
```

Javascript

```
$('#id1').find('tr').append('<td><img src=images/image1.jpg /></td>');
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:45:58.457

根据第 2 项，我会说您还没有完成对表格的定义。您需要在#id2 中添加一个嵌套表（这种方法的优点可以稍后讨论）。

所以你的桌子是

```
<table>
    <tr>
        <td id="id1"></td>
    </tr>
    <tr>
        <td>
            <table>
                <tr>
                    <td id="id1a"></td>
                    <td id="id1b"></td>
                    <td id="id1c"></td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

从那里您可以将图像附加到子单元格中。

# java - 是否可以使用 System.out.println() 自动换行？

> ID：11267205
> 
> 赞同：0
> 
> 时间：2012-06-29T18:36:49.240
> 
> 标签：java, line, break, word-wrap

我正在从命令行运行一个 java 程序，该程序打印从文件中检索到的相对较长的字符串。虽然字符串打印准确（我使用的是 System.out.println(string)），但换行符与我的终端窗口大小一致，导致单词在中间被截断，然后在下一行继续. 有没有办法更改系统打印设置，以便字符串仍然适合窗口内，但中断只会发生在有空格或连字符的地方？或者是构建简单 GUI 并使用 HTML 的唯一方法？谢谢！

# javascript - Java脚本在运行时修改函数

> ID：11267207
> 
> 赞同：0
> 
> 时间：2012-06-29T18:36:55.103
> 
> 标签：javascript

在此处输入代码我有以下代码

```
function a(){alert("a");} 
```

我想创建一个函数 b 作为

```
function b(){alert("a"); alert("b");} 
```

我的方法是

```
var b = a + alert("b"); 
```

这当然行不通。但我想知道是否有某种图书馆支持这一点。

编辑：也许我需要描述我的场景，以便更清楚我想要实现的目标。

我正在使用 async.js 库来处理多个异步调用。我的代码看起来像

```
var values = {};
...
function all() {
    var allDfd = $.Deferred();
    async.parallel(
            [function (callback) {
                remoteCall(function (result) {
                    values.v1 = result;
                    callback(null, 'one');
                });
            },
            function (callback) {
                remoteCall(function (result) {
                    values.v2 = result;
                    callback(null, "two");
                });
            },
            function (callback) {

                remoteCall(function (result) {

                    values.v3 = result;
                    callback(null, "three");
                });
            }], function (err, results) {
                allDfd.resolve();
            });
    return allDfd.promise();
} 
```

显然有很多重复的代码让我很困扰。所以我的想法是创建一个函数 asyncCall 来执行样板任务。这个想法是

```
 var values = {};
...
function all() {
    var allDfd = $.Deferred();
    function getAsyncCall (func, innerCallback, callback) {
        return function asyncCall(func, innnerCallback, callback){
            func(innerCallback + callback(null));  // combine innerCallBack and callback code
        }
    }

    async.parallel(
            [getAsyncCall(remoteCall, function(result){values.v1=result;},callback),
             getAsyncCall(remoteCall, function(result){values.v2=result;},callback),
             getAsyncCall(remoteCall, function(result){values.v3=result;},callback),
            ], function (err, results) {
                allDfd.resolve();
            });
    return allDfd.promise();
} 
```

有评论的那一行是我在思考的。我正在尝试创建一个结合内部和外部回调的新函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:38:36.737

你可以做

```
var b = function() { a(); alert('b'); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:41:39.770

你可以写：

```
var a=function(){alert("a");}

var b=function(){a(); alert("b");} 
```

更进一步，你甚至可以编写一个完整的函数组合函数：

```
function compose( functions ) {
   return function(){ 
      for(var i=0; i!=functions.length; ++i) {
        functions[i]();
      }
   };
}

var c=compose( [a, function(){ alert("b"); }] ); 
```

（在工作中查看[http://jsfiddle.net/xtofl/Pdrge/](http://jsfiddle.net/xtofl/Pdrge/)）

# apache2 - 如何获取用户经过身份验证的组？

> ID：11267208
> 
> 赞同：0
> 
> 时间：2012-06-29T18:36:56.073
> 
> 标签：apache2, require

我知道我们可以使用 REMOTE_USER 手动解析 htaccess 组文件以获取组名。但是 CGI 有没有办法从 apache2 获取组名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T01:17:34.247

Apache 不会为 CGI 或其他模块提供用户组或导致授权成功的组的完整列表。

# ios - 在会话之间保存数据对象

> ID：11267212
> 
> 赞同：0
> 
> 时间：2012-06-29T18:37:17.070
> 
> 标签：ios, objective-c, iphone, object, persistence

我将最后一点功能放在我的应用程序中。我想做的一件事是让用户能够保存笔记。每个注释都有一个用户指定的标题和正文。当用户点击保存时，我希望将标题和正文保存在一个对象中，并将该对象添加到一个数组中（稍后将用于填充表格视图）。在会话之间保存此数据对象数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:39:22.733

您应该使用 Core Data 来执行此操作。使用您想要的字段创建一个“注释”对象。阅读 Core Data 编程，因为它是一个完整的主题，但从本质上讲，您最终会得到一个底层的 sqlite 数据存储，您将使用 NSManagedObjects 与之交互

# assembly - 为什么这个汇编代码显示 2 种不同的颜色？

> ID：11267215
> 
> 赞同：1
> 
> 时间：2012-06-29T18:37:23.627
> 
> 标签：assembly, x86, nasm

我已经用 nasm 编译了这个，我正在通过 bochs 运行它。在我看来，2 颜色变量应该使它以蓝色打印 2 行。它实际上打印一种棕色和一种白色。我无法弄清楚。非常感谢任何帮助

```
 [BITS 16]   
    [ORG 0x7C00]
    main:

    ;set video mode
    mov ah,0x00     ;function ref
    mov al,0x10     ;param - video mode
    int 0x10

    mov si, TestString
    mov bl,Color        ; Normal text attribute
    call PutStr

    mov si, TestString
    mov bl,Color2       ; Normal text attribute
    call PutStr

    jmp $

    ;-------------------------------- End of running code

    PutStr:
    ; Set up the registers for the interrupt call
    mov ah,0x0E         ; The function to display a chacter (teletype)
    mov bh,0x00         ; Page number

    .nextchar:
    lodsb               ; load string byte from SI into AL and increments SI
    or al,al            ; check for end of string
    jz .endofstring     ; jump to end if null

    int 0x10            ; Run the BIOS video interrupt 
    jmp .nextchar       ; Loop back round to the top

    .endofstring:
    ret

    Color db 0001b
    Color2 db 0001b
    TestString db 'Hello world',13,10,0,0

    times 510-($-$$) db 0       ; Fill the rest of the sector with zero's
    dw 0xAA55           ; Add the boot loader signature to the end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:16:13.667

问题实际上与使用 Color 和 Color2 标识符有关。您需要“取消引用”它们以获得它们“指向”的实际值：

```
mov bl, [Color] 
```

查看NASM 手册中的[有效地址以获取更多信息。](http://www.nasm.us/xdoc/2.10.01/html/nasmdoc3.html#section-3.3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T20:29:54.443

`db`分配一个字节的内存并将符号设置为该内存的地址（因此需要取消引用它）。

如果您只想要一个常量值的符号名称，请使用`equ`：

```
Color equ 0001b
...
mov bl, Color
... 
```

# c# - 在 C# 中从大型机压缩十进制数转换为整数

> ID：11267216
> 
> 赞同：2
> 
> 时间：2012-06-29T18:37:24.530
> 
> 标签：c#, hex, decimal

我花了一周的大部分时间，终于弄清楚了如何将大型机中的打包数据转换为十六进制数字表示。现在，我试图弄清楚如何在 Visual C# 中将该十六进制字符串转换为整数。我确信这有一个简单的功能，但它目前绕过了我的搜索。这是给我大型机表示的代码：

```
// Get the packed decimal field from the input record
String testString = dataRecord.Substring(40, 4);
System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
Byte[] bytes = encoding.GetBytes(testString);
// Create two different encodings.
Encoding ascii = Encoding.ASCII;
Encoding ebcdic = Encoding.GetEncoding("IBM037");
// Unpack Data
Byte[] bt = Encoding.Convert(ascii, ebcdic, bytes);
// Get the data into a string in the format of 00-5F (represents a positive 5)
// The format of 00-5D (represents a negative 5)
String numberString = BitConverter.ToString(bt); 
```

如果主机十进制值为 5，则 bt[0] 最终为 00，bt[1] 最终为 5F。转换为字符串后，我最终得到“00-5F”。我真正想要的是一个只写“5”的整数或字符串。我可以编写自己的东西来测试每个数字，并返回正确的值，但我认为必须有一种方法可以将十六进制有符号数字转换为字符串或整数，而无需编写我自己的例程. 有谁知道这个功能可能是什么？我已经尝试过标准的 convert.toint、todecimal 等函数，但他们被这种格式吓坏了。

谢谢！

# c# - 从用户控件更新主页

> ID：11267217
> 
> 赞同：0
> 
> 时间：2012-06-29T18:37:26.803
> 
> 标签：c#, asp.net, gridview, user-controls

我的主页中有一个网格视图，我为用户显示了一些数据（使用`BindGrid`方法）。这个网格视图对于每一行都有一些命令按钮，这些按钮执行一些操作，例如`Update`。当用户单击更新按钮时，我向他/她显示更新值的用户控件。当用户单击更新时，我希望网格绑定到新数据（我想调用`BindGrid`新数据）。我该如何做到这一点并从用户控件调用主页中的方法？

**编辑 1)**

我为用户控制编写了这段代码：

```
public partial class SomeUserControl : System.Web.UI.UserControl
{
public event EventHandler StatusUpdated;

private void FunctionThatRaisesEvent()
{
    if (this.StatusUpdated != null)
        this.StatusUpdated(new object(), new EventArgs());
} 

public void Page_Load(object sender, EventArgs e)
{
    //.... 
}

protected void Button1_Click(object sender, EventArgs e)
{
    FunctionThatRaisesEvent();
}
} 
```

和用户控制的设计器：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="SomeUserControl.ascx.cs" Inherits="SomeUserControl" %>
<asp:Button ID="Button1" runat="server" Text="Update" Height="70px" 
onclick="Button1_Click" Width="183px" /> 
```

并为主页添加此代码：

```
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Unnamed1_Click(object sender, EventArgs e)
{
    SomeUserControl userControl = (SomeUserControl)LoadControl("SomeUserControl.ascx");
    userControl.StatusUpdated += new EventHandler(userControl_StatusUpdated);
    Panel1.Controls.Add(userControl);
}

void userControl_StatusUpdated(object sender, EventArgs e)
{
    GetDate();
}

private void GetDate()
{
    TextBox1.Text = DateTime.Today.ToString();
} 
```

和主页设计师：

```
<%@ Register src="SomeUserControl.ascx" tagname="SomeUserControl" tagprefix="uc1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <asp:UpdatePanel ID="upd1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                <asp:Button runat="server" Text="Add User Control" Height="44px"  ID="Nims"
                onclick="Unnamed1_Click" Width="133px" />
                <asp:Panel ID="Panel1" runat="server" BackColor="#FFFFCC"></asp:Panel>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>

    </form>
</body>
</html> 
```

但它不起作用，什么也没发生。即使我为单击用户控制按钮代码添加了断点，但似乎该事件没有引发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:42:16.447

从用户控件引发事件，并从主页处理事件。看看 [这个问题](https://stackoverflow.com/questions/6192739/how-do-i-raise-an-event-in-a-usercontrol-and-catch-it-in-mainpage)。

//** 编辑 **//

您正在单击按钮时动态添加用户控件。当您单击用户控件上的按钮时，它首先会在主页上启动回发 - 现在您的用户控件不再存在（这就是不引发事件的原因）。如果您将主页设计器更改为如下所示：

```
<%@ Register Src="SomeUserControl.ascx" tagname="SomeUserControl" tagprefix="uc1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
</head>
<body>
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<div>
    <asp:UpdatePanel ID="upd1" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
            <asp:Button runat="server" Text="Add User Control" Height="44px"  ID="Nims"
            onclick="Unnamed1_Click" Width="133px" />
            <asp:Panel ID="Panel1" runat="server" BackColor="#FFFFCC">
            <uc1:SomeUserControl ID="userControl" runat="server" />
            </asp:Panel>
        </ContentTemplate>
    </asp:UpdatePanel>
</div>

</form> 
```

你的代码隐藏看起来像这样

```
protected void Page_Load(object sender, EventArgs e)
{
    userControl.StatusUpdated += new EventHandler(userControl_StatusUpdated);
}

void userControl_StatusUpdated(object sender, EventArgs e)
{
    GetDate();
}

private void GetDate()
{
    TextBox1.Text = DateTime.Today.ToString();
} 
```

你会明白我的意思。尝试在主页和用户控件的页面加载事件上设置断点，以准确查看事情发生的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:47:06.817

您可以在用户控件中注册一个事件，在用户单击更新按钮时引发该事件并在页面上捕获该事件。

[http://codebetter.com/brendantompkins/2004/10/06/easily-raise-events-from-asp-net-ascx-user-controls/](http://codebetter.com/brendantompkins/2004/10/06/easily-raise-events-from-asp-net-ascx-user-controls/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T06:25:25.633

你需要为此使用事件处理程序

在 ascx 页面中定义事件处理程序

```
public event EventHandler ButtonClickDemo; 
```

当您执行更新或删除事件时，请使用以下代码作为事件处理程序。

```
 ButtonClickDemo(sender, e); 
```

在父页面中使用以下

```
 protected void Page_Load(object sender, EventArgs e)
  {
         btnDemno.ButtonClickDemo += new EventHandler(btn_Click);
  } 
```

绑定父页面网格的函数

```
 protected void btn_Click(object sender, EventArgs e)
  {
            BindGrid();
  } 
```

上面的代码会调用父页面的BindGrid函数。

# c# - 可以根据计算机以不同的速度打勾吗？

> ID：11267219
> 
> 赞同：0
> 
> 时间：2012-06-29T18:37:32.763
> 
> 标签：c#, timer

我创建了一个应用程序，它使用 Timer 类在一天中的某个时间回调一个方法，然后每 24 小时调用一次。

我用 Ticks 来表示 24 小时后。`(int) TimeSpan.FromHours(24).TotalMilliseconds` 我用它来检索 24 小时的刻度。

这对我来说很好，但在不同的计算机上，触发时间很长。

无论如何要调试这个？我应该如何解决/处理这个问题....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:41:35.990

对你来说“路途遥远”有多少？如果您希望应用程序在特定时间运行，请将其安排在该特定时间，而不是在完成后的 24 小时内 - 您不可避免地会看到一些滑点这样做，因为时间总是会在下一个天 X 秒，其中 X 是程序完成前一天所用的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:39:46.240

桌面计算机的时钟如何每天频繁波动一秒或更多，它们通常使用 NTP 服务器来纠正这些波动。但这只是野兽的本性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:40:39.330

首先，没有“我的刻度”，因为刻度是一个定义明确的值。

> 一个滴答表示一百纳秒或百万分之一秒。一毫秒内有 10,000 个滴答声。

DateTime 对象还有一个[Ticks 属性](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)，您可以使用它来访问它。我写了一些我在[这里](http://pastebin.com/gbDhQUhc)发布的简单代码对我来说效果很好，产生了[完美的结果](http://pastebin.com/aiCEaYpi)。

我认为你的实现没有理由漂移这么多。请制作一个始终如一地产生问题的样本或发布您自己来源的相关部分。

# android - 在某个点设置可绘制对象的中心

> ID：11267220
> 
> 赞同：1
> 
> 时间：2012-06-29T18:37:34.277
> 
> 标签：android, drawable, center, setbounds

在自定义视图中，有没有办法可以在画布上的某个点设置可绘制对象的中心？（我不想处理为可绘制对象确定矩形边界......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:48:19.287

当您调用绘制位图时，将其绘制在一个点，其 left 和 top 属性分别设置为位置减去图像宽度和高度的一半。这会将它集中在你想要的点上。

IE。

```
canvas.drawBitmap(bitmap, xPos - bitmap.getWidth()/2, yPos - bitmap.getHeight()/2, new Paint()); 
```

# java - Java ScriptEngine 因“长”添加而失败？

> ID：11267222
> 
> 赞同：0
> 
> 时间：2012-06-29T18:37:44.153
> 
> 标签：java, scriptengine

我正在使用 ScriptEngine 执行字符串中指定的计算。我尝试了一个简单的程序，如下所示：

```
 public static void main(String[] args){
    ScriptEngineManager mgr = new ScriptEngineManager();
    ScriptEngine engine = mgr.getEngineByName("JavaScript");
    Float f;
    try {
        f = new Float(engine.eval("1340984972921+7200000").toString());
        System.out.println(f.longValue()+"");
    } catch (Exception e){}
  } 
```

这给出了 1340992126976 的输出，但正确答案是 1340992172921

这似乎适用于相当大的整数，但不适用于长值。我希望它们作为长值，因为它们是时间戳，我想这样使用它们。关于什么可以使这项工作的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:42:54.773

尝试将数据类型从 更改`Float`为`Double`。我认为这是一个精度问题。

# wpf - 当用户单击 ListViewItem 时，如何获取要触发的事件或命令？

> ID：11267223
> 
> 赞同：1
> 
> 时间：2012-06-29T18:37:48.600
> 
> 标签：wpf

我的应用程序 UI 中有一个列表，当用户单击列表中的某个项目时，我想打开一个弹出窗口。据我所知，没有任何`Click`事件`ListViewItem`可以帮助我解决这个问题。该`SelectionChanged`事件也不起作用，因为用户可以关闭弹出框，并且我希望能够再次打开它，而无需他们先在列表中选择不同的项目。

这就是我的`ListView`创建代码的样子，因为它的价值：

```
<ListView x:Name="_resultsListView"
          ItemsSource="{Binding AvailableResults}"
          SelectedItem="{Binding SelectedResult}"
          ItemContainerStyle="{StaticResource LoadResultItemStyle}"
          VirtualizingStackPanel.IsVirtualizing="True"
          Style="{DynamicResource DefaultListViewStyle}" BorderThickness="0"/> 
```

谢谢！任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:53:47.197

[HB 建议](https://stackoverflow.com/a/11267278/302677)的工作，虽然我发现一个更永久的绑定解决方案`Events`是`Commands`使用[AttachedCommandBehavior](http://marlongrech.wordpress.com/2008/12/13/attachedcommandbehavior-v2-aka-acb/)，它可以让您将命令附加到几乎任何事件

```
<Style TargetType="{x:Type ListViewItem}">
    <Setter Property="local:CommandBehavior.Event" Value="Click" />
    <Setter Property="local:CommandBehavior.Command" Value="{Binding DataContext.MyCommand, ElementName=MyListView}" />
    <Setter Property="local:CommandBehavior.CommandParameter" Value="{Binding }" />
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:41:37.677

将 a`Button`放入`ItemTemplate`（或`ListViewItem.Template`通过 设置`ItemContainerStyle`）并将其绑定到命令，如果需要，您可以将其设置为不可见。

# c# - NotSupportedException 与 linq 查询和 groupBy

> ID：11267224
> 
> 赞同：5
> 
> 时间：2012-06-29T18:38:06.137
> 
> 标签：c#, nhibernate, linq-to-nhibernate

运行此 Linq 查询时出现“NotSupportedException”。“不支持指定的方法。” 什么方法？即使注释掉了“Count()”，错误也是一样的。空内部异常。

堆栈跟踪：

> 在 Hydra.WPF.ViewModels.AddressListViewModel._primaryMemberListWorker_DoWork(Object sender, DoWorkEventArgs e) in M:\Projects\Hydra\WPF\ViewModels\AddressList\AddressListViewModel.cs: System.ComponentModel.BackgroundWorker.WorkerThreadStart(Object argument) 的第 1377 行

SQL 查询：

```
Select * From _Members
Inner Join AddressDetailsCCN a on a.MemberId=_Members.MemberID
Inner Join 
  (
  Select Address+Address2 as CombinedAddress 
  From AddressDetailsCCN Where ListId=84 
  group by Address+Address2
  Having COUNT(*)>1
  ) B on B.CombinedAddress=A.Address+A.Address2
Where CombinedAddress is not null AND CombinedAddress!='' AND a.ListId=84
Order by ClientID, CombinedAddress 
```

林克：

```
var grouped = 
   (from mem in session.Query<Member>()
    join detail in session.Query<Detail>() on mem.Id equals detail.Member.Id
    join d2 in (from d3 in session.Query<Detail>()
                where d3.AddressList.Id == criteria.AddressList.Id
                group d3 by d3.Address + d3.Address2 into x
                where x.Count() > 1
                select x) on detail.Address+detail.Address2 equals d2.Key
    where detail.AddressList.Id==criteria.AddressList.Id
    select mem); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:34:55.680

你如何产生你的标准变量？如果这本身就是一个延迟查询或其他东西，那听起来可能是罪魁祸首。如果您`var criteriaId = criteria.AddressList.Id;`在查询之前执行 a，并为您的查询提供 criteriaId 而不是您的 criteria.AddressList.Id，会发生什么？

# php - 在不收缩或拉伸的情况下缓存和调整图像大小？

> ID：11267229
> 
> 赞同：2
> 
> 时间：2012-06-29T18:38:25.903
> 
> 标签：php, jquery, image, image-processing

Facebook 和其他图像密集型网站如何在不缩小或扭曲缩略图的情况下保持完整图像的缩略图大小？

这些拇指是否是原始版本的裁剪版本并已存储，因此当单击拇指时，它们会参考完整尺寸的图像。

如果我只是尝试将它们限制在我的 img 标签中的预设大小，我的图像会被拉伸或缩小。

理想情况下，我想裁剪每个图像以适应预设尺寸而不扭曲纵横比。如果这可以即时完成，这是一种处理大量图像的有效方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:07:05.857

使用 HTML 标记或 CSS 样式调整图像大小被[认为是不好的做法。](http://developer.yahoo.com/performance/rules.html#no_scale)放大它们意味着质量差，缩小它们意味着您的用户必须下载比必要更大的文件，这会损害速度。

几乎所有语言或框架都有为图像调整大小和缓存而构建的库。它们主要还具有裁剪功能，以保持标准的纵横比。对于 PHP，请查看基于 GD/ImageMagick的[phpThumb 。](http://phpthumb.sourceforge.net/)

生成的图像大小调整版本保存在缓存文件夹中，因此每次请求图像时都不需要重新生成它们。这样，性能几乎与提供静态文件一样好。唯一的开销是检查缓存中是否存在调整大小的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:41:18.443

我不能直接代表 facebook，但大多数网站上传一张大图片，然后自动重新创建更小的预设尺寸（通常通过脚本语言和某种库，如 PHP/GD）并以相似的文件名保存模式，以便您可以使用尽可能少的带宽，缩短加载时间，并避免使用 css 操作图像。

# iphone - 加速或优化持久drawrect

> ID：11267235
> 
> 赞同：0
> 
> 时间：2012-06-29T18:38:59.020
> 
> 标签：iphone, ios5, core-graphics, drawrect

我正在使用以下代码为手指绘画类型练习创建一个持久的 DrawRect

当我在模拟器上运行时很好，当我在 iPad 上运行时，它会延迟转弯曲线呈锯齿状 请有人帮助优化或提出更好的方法

提前致谢

```
 - (void)drawRect:(CGRect)rect
 {
 UIGraphicsPushContext(drawingContext);
 CGImageRef cgImage = CGBitmapContextCreateImage(drawingContext); 
 image = [[UIImage alloc] initWithCGImage:cgImage];

 if (draw) {
 CGContextSetLineWidth(drawingContext, (2.0 * size) );
 CGContextSetStrokeColorWithColor(drawingContext, color);
 CGContextSetLineCap(drawingContext,kCGLineCapRound);
 CGContextMoveToPoint(drawingContext,    lastPt.x - (31.0 / self.transform.a),  lastPt.y - (31.0 / self.transform.a)  );
 CGContextAddLineToPoint(drawingContext, currPt.x - (31.0 / self.transform.a),  currPt.y - (31.0 / self.transform.a)  );
 CGContextStrokePath(drawingContext);
 } else {
 //                     CGContextSetFillColorWithColor(drawingContext, [[UIColor redColor] CGColor]);
 //                     CGContextFillRect(drawingContext,    CGRectMake( currPt.x - (31.0 / self.transform.a) - 16.0 , currPt.y - (31.0 / self.transform.a) - 16.0 , 40.0 , 40.0) );
 CGContextClearRect(drawingContext, CGRectMake( currPt.x - (31.0 / self.transform.a) - 16.0 , currPt.y - (31.0 / self.transform.a) - 16.0 , 40.0 , 40.0) );
 }

 UIGraphicsPopContext();
 CGImageRelease(cgImage);
 NSLog(@"    %@   "  ,  rect);
 [image drawInRect: rect];

 lastPt = currPt;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T00:34:13.407

我发现从

```
[self setNeedsDisplay] 
```

至

```
[self setNeedsDisplayInRect] 
```

根据 Instruments 从 1fps 更改为 52fps

# javascript - 用于重采样数组的 Javascript 库？

> ID：11267244
> 
> 赞同：4
> 
> 时间：2012-06-29T18:39:48.543
> 
> 标签：javascript, canvas, interpolation, resampling

我正在尝试在 HTML 画布上可视化一些数据，并且遇到了与[此类](https://stackoverflow.com/questions/1851384/resampling-interpolating-matrix)似的问题。也就是说，我的数据大小与我的画布大小不完全匹配。

在一个例子中，我想在 100px 宽的画布上绘制一个 1024 点信号。（例如，音频波形。）

在另一个例子中，我想在 100 像素高 x 500 像素宽的画布上显示 1024 x 5000 点矩阵。（例如，音频频谱图。）

在这两种情况下，我都需要重新采样我的数据以使其适合画布。有谁知道 Javascript 中的库/工具包/函数可以做到这一点？

** 编辑 **

我知道我可以在这里使用很多技术。一种可能性是简单地丢弃或复制数据点。这将在紧要关头完成，但众所周知，丢弃/复制会产生看起来“锯齿状”或“块状”的结果（参见[此处](http://en.wikipedia.org/wiki/Image_scaling#Scaling_methods)和[此处](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)）。我更喜欢使用稍微复杂一点的算法来输出更平滑的图像，例如[Lanczos](http://en.wikipedia.org/wiki/Lanczos_resampling)、[双线性](http://en.wikipedia.org/wiki/Bilinear_filtering)或[双三次](http://en.wikipedia.org/wiki/Bicubic_interpolation)重采样。这些中的任何一个都可以满足我的需求。

不过，我的问题不是关于使用哪种算法，而是关于它们中的任何一个是否已在开源 javascript 库中实现。令人惊讶的是，我在 JS 中找不到太多东西。编写我自己的重采样函数显然是一种选择，但我想先咨询 SO 社区，以确保我没有重新发明轮子。

（[这个](https://stackoverflow.com/a/3223466/765287)答案给出了一个非常接近我想要的代码列表，除了它直接在画布对象而不是数据数组上操作，它强制输入和输出的纵横比相同。如果没有别的可用，我绝对可以使用它，但我希望有一个更通用和灵活的解决方案，类似于 Matlab 的[resample](http://www.mathworks.com/help/toolbox/signal/ref/resample.html)。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:17:24.937

使用画布比例

```
ctx.scale(xscale,yscale); 
```

您可以通过计算画布和数据之间的比率来确定缩放比例

```
ctx.scale(canvas_x/data_x,canvas_y/data_y) 
```

# php - curl php ssl连接超时

> ID：11267251
> 
> 赞同：5
> 
> 时间：2012-06-29T18:40:10.593
> 
> 标签：php, curl

我在互联网上找到了这段代码，我修改了它以供我使用，我不确定我在这里做错了什么，我收到这个错误 Curl error: SSL connection timeout 登录部分成功，但搜索失败不和我一起工作。有人可以帮我吗？

```
<?php
//create array of data to be posted
$post_data['username'] = 'user';
$post_data['password'] = 'log';
$post_data['cmd'] = 'log';

//create array of data to be posted
foreach ( $post_data as $key => $value) {
    $post_items[] = $key . '=' . $value;
}
//create the final string to be posted using implode()
$post_string = implode ('&', $post_items);
//create cURL connection
$curl_connection =
  curl_init('https://sie.com');
//set options
///curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 3990);

curl_setopt($curl_connection, CURLOPT_USERAGENT,
  "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");

curl_setopt($curl_connection, CURLOPT_HTTPHEADER, array(
    'Connection: Keep-Alive',
    'Keep-Alive: 300'
));

curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);
//set data to be posted
curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);
//perform our request
$result = curl_exec($curl_connection);
//show information regarding the request

//print_r(curl_getinfo($curl_connection));
//echo curl_errno($curl_connection) . '-' .
  //              curl_error($curl_connection);
//close the connection
//curl_close($curl_connection);

echo $result."\n";

$post_data1['cmd'] = 'Viewr';
$post_data1['search'] = 'test';

foreach ( $post_data1 as $key => $value1) {
    $post_items1[] = $key . '=' . $value1;
}
$post_string1 = implode ('&', $post_items1);
echo $post_string1."\n";
curl_setopt($curl_connection, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl_connection, CURLOPT_USERAGENT,
  "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);
//set data to be posted
curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);
//perform our request
$result1 = curl_exec($curl_connection);
//show information regarding the request
//$result1 =1;
//close the connection
//curl_close($curl_connection);
if ($result1)
echo "ok \n\n";
else
echo "nok\n";
if(curl_errno($curl_connection))
{
    echo 'Curl error: ' . curl_error($curl_connection)."\n";
}
echo($post_string1);
echo $result1."\n";

curl_close($curl_connection);

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T18:48:13.260

尝试添加这个**（但不要在生产中设置这个选项！）**：

```
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false); 
```

如果它之后工作，那是因为 CURL 未能协商 SSL 证书。

按照本教程了解如何获取 CA 证书的步骤：http: [//unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

在你的 curl_exec()**之前**，需要研究的其他内容是，[`curl_copy_handle();`](http://www.php.net/manual/en/function.curl-copy-handle.php)然后设置其他参数。

此外，或者，您可以使用 重新启动 cURL `curl_init($url);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:54:10.800

使用我列出的 2 个选项暂时禁用 SSL 验证，*可能*就是这样（如果证书设置不正确）。请注意“CURLOPT_SSL_VERIFYHOST”选项。否则我只会更多地使用这些选项。此外，您不必遍历这些值，只需使用关联数组即可。

```
<?php
//create array of data to be posted
$post_data['username'] = 'user';
$post_data['password'] = 'log';
$post_data['cmd'] = 'log';

//create cURL connection
$curl_connection = curl_init();
//set options
curl_setopt($curl_connection,CURLOPT_SSL_VERIFYHOST,0);
curl_setopt($curl_connection,CURLOPT_SSL_VERIFYPEER, false); 
```

//...

```
curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_data);//it can accept associative arrays 
```

//...

```
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:05:01.040

尝试其他答案后，我仍然收到`SSL connection timeout`错误消息。

我检查了我的`php.ini`并决定检查是否有任何与 OpenSSL 相关的内容，我确实发现：

```
;extension=php_openssl.dll 
```

我通过取消注释该行来启用它。

```
extension=php_openssl.dll 
```

现在，启用 OpenSSL（这是 Windows 上的参数，在 Linux/Mac 上应该类似），重新启动我的 Apache 服务器后，我终于可以执行我的 cURL 请求而没有任何错误！

# sql-server - 返回包含字符串中所有单词的行

> ID：11267253
> 
> 赞同：0
> 
> 时间：2012-06-29T18:40:28.567
> 
> 标签：sql-server, sql-server-2008

我想检索某一列包含在字符串参数中传递的所有单词的所有行，而不管它们出现的顺序如何。

如果参数是`'hi abc'`那么我想要这一行：`abc def hijk`而不是`hijk lmnop qr`

我设法做到了，但我怀疑它不是很好，所以我想看看替代品。如何更好地完成我下面的代码所做的事情？

```
create table t (s varchar(200));
insert into t (s) values
('abc def hijk'),
('hijk lmnop qr'),
('stu'),
('v xyz')
;

create function dbo.matchRows (@string varchar(max))
returns varchar(max)
begin

    set @string = replace(@string, '''', '''''');
    set @string = replace(@string, '  ', ' ');
    set @string = replace(@string, '  ', ' ');
    set @string = replace(@string, ' ', '%'' and s like ''%');
    set @string = 's like ''%' + @string + '%''';
    set @string = 'select * from t where ' + @string;
    return @string;

end;

declare @query varchar(max);
set @query = (select dbo.matchRows('hi abc'));
execute (@query); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:58:01.157

像这样的东西应该工作。它将您的搜索参数转换为 XML，然后将其拆分为表变量。之后，它会在您的 @t 表中搜索您传入的所有拆分参数（其中找到的单词数等于搜索参数的数量使其与所有参数匹配）。

```
DECLARE @SearchStringParams varchar(max),
  @Split char(1),
  @Xml xml,
  @NumOfSearchTerms Int
DECLARE @SplitTable table (valToSearchFor varchar(100));

SELECT @SearchStringParams = 'hi,abc',
@Split = ','

SELECT @Xml = CONVERT(xml,'<root><s>' + REPLACE(@SearchStringParams,@Split,'</s><s>') + '</s></root>')

INSERT @SplitTable
SELECT [Value] = T.c.value('.','varchar(20)')
FROM @Xml.nodes('/root/s') T(c)

SELECT @NumOfSearchTerms = @@ROWCOUNT

DECLARE @t table (searchWords varchar(200));
insert into @t (searchWords) values
('abc def hijk'),
('hijk lmnop qr'),
('stu'),
('v xyz')
;
select t.searchWords
from @t t inner join @SplitTable s
on t.searchWords like ('%' + s.valToSearchFor + '%')
group by t.searchWords
having count(t.searchWords) = @NumOfSearchTerms 
```

# c# - 以编程方式设置图像的来源 (XAML)

> ID：11267257
> 
> 赞同：28
> 
> 时间：2012-06-29T18:40:31.810
> 
> 标签：c#, xaml, windows-runtime

我正在开发一个 Windows 8 应用程序。我需要知道如何以编程方式设置图像的来源。我认为 Silverlight 方法会奏效。然而，事实并非如此。有人知道怎么做这个吗？以下将不起作用：

```
string pictureUrl = GetImageUrl();
Image image = new Image();
image.Source = new Windows.UI.Xaml.Media.Imaging.BitmapImage(new Uri(pictureUrl, UriKind.Relative));
image.Stretch = Stretch.None;
image.HorizontalAlignment = Windows.UI.Xaml.HorizontalAlignment.Left;
image.VerticalAlignment = Windows.UI.Xaml.VerticalAlignment.Center; 
```

我收到一个异常，上面写着：“给定的 System.Uri 无法转换为 Windows.Foundation.Uri。”

但是，我似乎找不到 Windows.Foundation.Uri 类型。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-29T18:48:01.167

我刚试过

```
Image.Source = new BitmapImage(
    new Uri("http://yourdomain.com/image.jpg", UriKind.Absolute)); 
```

它可以毫无问题地工作......我在`System.Uri`这里使用。也许您的 URI 格式不正确，或者您必须使用绝对 URI 并`UriKind.Absolute`改为使用？

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-29T19:49:52.120

这就是我使用的：

```
string url = "ms-appx:///Assets/placeHolder.png";
image.Source = RandomAccessStreamReference.CreateFromUri(new Uri(url)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-29T18:44:54.647

嗯，[`Windows.Foundation.Uri`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.foundation.uri)记录是这样的：

> .NET：此类型显示为 System.Uri。

所以棘手的一点不是将它转换成`Windows.Foundation.Uri`你自己 - 看起来 WinRT 会为你做到这一点。看起来问题出在您使用的 URI 上。在这种情况下，它*与*什么相关？我怀疑您真的只需要为 URI 找到正确的格式。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-30T12:44:26.993

本示例使用 FileOpenPicker 对象来获取存储文件。您可以使用所需的任何方法将文件作为 StorageFile 对象进行访问。

Logo 是图像控件的名称。

参考以下代码：

```
 var fileOpenPicker = new FileOpenPicker();
    fileOpenPicker.ViewMode = PickerViewMode.Thumbnail;
    fileOpenPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
    fileOpenPicker.FileTypeFilter.Add(".png");
    fileOpenPicker.FileTypeFilter.Add(".jpg");
    fileOpenPicker.FileTypeFilter.Add(".jpeg");
    fileOpenPicker.FileTypeFilter.Add(".bmp");

    var storageFile = await fileOpenPicker.PickSingleFileAsync();

    if (storageFile != null)
    {
        // Ensure the stream is disposed once the image is loaded
        using (IRandomAccessStream fileStream = await storageFile.OpenAsync(Windows.Storage.FileAccessMode.Read))
        {
            // Set the image source to the selected bitmap
            BitmapImage bitmapImage = new BitmapImage();

            await bitmapImage.SetSourceAsync(fileStream);
            Logo.Source = bitmapImage;
        }
    } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-02T02:13:29.107

检查您的pictureUrl，因为它是导致异常的原因。

但这也应该有效

```
img.Source = new BitmapImage(new Uri(pictureUrl, UriKind.Absolute)); 
```

它应该与 Windows.Foundation.Uri 无关。因为winrt会为你处理。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-29T18:48:04.137

试试这种格式：

```
ms-appx:/Images/800x600/BackgroundTile.bmp 
```

[给定的 System.Uri 无法转换为 Windows.Foundation.Uri](https://stackoverflow.com/questions/7569720/the-given-system-uri-cannot-be-converted-into-a-windows-foundation-uri)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-28T09:14:00.320

```
<Image Name="Img" Stretch="UniformToFill" />

var file = await KnownFolders.PicturesLibrary.GetFileAsync("2.jpg");
using(var fileStream = (await file.OpenAsync(Windows.Storage.FileAccessMode.Read))){
     var bitImg= new BitmapImage();
     bitImg.SetSource(fileStream); 
     Img.Source = bitImg;
} 
```

# javascript - 文本区域 onKeyChange 不起作用？

> ID：11267258
> 
> 赞同：-3
> 
> 时间：2012-06-29T18:40:39.783
> 
> 标签：javascript

我正在尝试使用 javascript 编写一个非常基本的脚本。我想要做的是能够检测到何时修改文本区域，然后对其他元素进行一些更改。

这是我的 jsfiddle：http: [//jsfiddle.net/QDRHT/1/](http://jsfiddle.net/QDRHT/1/)

我试图检测何时将新字符输入到文本区域，然后修改附近 div 的背景颜色。但是，它根本不起作用，我不知道为什么（我是 Javascript 新手，虽然我确实确保验证我的 HTML 和 CSS，并通过 JSLint 运行 javascript）。

如果重要的话，我在 IE 9 中运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T18:49:02.450

更改`onKeyPress`为`onkeypress`例如所有小写字符，应该可以工作。

# [演示](http://jsbin.com/epihul/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:48:54.773

`window.onload`处理程序不会被触发，因为您在其他事件的处理程序中添加了它`load`。所以删除它。也不要`onKeyPress`使用`onkeypress`（所有字母都应该小写）。

更改版本在[**这里**](http://jsfiddle.net/kESLD/)。

# events - 接缝组件中的触发事件

> ID：11267259
> 
> 赞同：0
> 
> 时间：2012-06-29T18:40:40.440
> 
> 标签：events, jboss, seam

我有一个使用请求的 Web 服务（jboss seam），它进一步将其工作委托给不同的接缝组件。接缝组件之一具有事件生成能力，如 Events.instance().raiseTransactionSuccessEvent，监听此事件的方法不会被调用。

我是否缺少任何配置？

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T21:31:29.350

@Tair

我有一个使用 Web 服务请求的 ejb 组件，如下所示

```
@Name("plugin")
@Stateless
@WebService(name = "PluginService", serviceName = "PluginService")
public class PluginService implements IPlugin {
    @WebMethod
    public boolean createUser(String username, String password) {
        System.out.println("in login ");
        WebAuthenticator authenticator = (WebAuthenticator) Component
                .getInstance("webauthenticator");

        usreCreated = authenticator.create(username, password);
        System.out.println("valid user "+validUser);
                return userCreated;
}
} 
```

WebAuthenticator 是一个接缝组件，如下

```
@Name("webauthenticator")
@Scope(ScopeType.CONVERSATION)

public class WebAuthenticator {

    @In
    EntityManager entityManager;

        @Observer("test")
        public void test()
        {
        System.out.println("A transaction success event was fired");
        }

    private static Log log = (Log) Logging.getLog(WebAuthenticator.class);
    private static byte[] accountPassword = null;
    private static Account currentAccount = null;

    public boolean createUser(String username, String password) {

        System.out.println("In web authenticator");
                User user = new User();
                user.username = username;
                user.password = password;
                entityManager.persist(user);
                entityManager.flush();
                Events.instance().raisTransactionSuccessEvent("test");
}
} 
```

在 components.xml 文件中，我有`<transaction:ejb-transaction />`，以便接缝可以获取有关容器事务事件的更新，并且我有接缝管理的持久性上下文

```
 <persistence:managed-persistence-context
   auto-create="true" name="entityManager" persistence-unit-jndi-   name="java:/pilotEntityManagerFactory" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T17:27:34.720

1.  确保在从您的 Web 服务调用 Seam 组件时启动事务。如果没有，请手动启动它。
2.  确保事务实际提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T21:33:31.287

我想到了。结论是永远不要将 ejb 事务与 seam 事务混合。我明确禁用了 ejb 中的 ejb 事务管理。有效！！。

# mysql - Cakephp - 从动作内部连接到不同的数据库/主机

> ID：11267262
> 
> 赞同：3
> 
> 时间：2012-06-29T18:41:06.207
> 
> 标签：mysql, cakephp

在 cakephp 中，我希望能够通过网站上的一项操作连接到不同的数据库。该操作确定要连接到哪个数据库和主机。使用 cakephp 1.3。

我已经看到在哪里可以更改控制器的 beforeFilter 中的 db 连接，但我希望能够从操作中处理这个问题，因为这是我找到需要连接的数据库和/或主机的地方。

我可以在那里编写自己的 SQL。我不需要通过模型。只想做一个简单的添加/更新 SQL 语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:53:16.473

您可以轻松[配置多个数据库连接](http://book.cakephp.org/1.3/view/922/Database-Configuration)以在您的应用程序中使用。

在`config/database.php`中，为您的数据库配置创建另一个变量，除了现有的`$default`：

```
var $otherDatabase = array(
    'driver' => 'mysql',
    // more settings...
); 
```

然后，在您的模型中，设置`$this->useDbConfig = 'otherDatabase'`或在您的控制器`$this->MyModel->useDbConfig = 'otherDatabase'`中。任何后续`find()`的 s 都将使用配置的数据库。

# mercurial - 我可以使用 Http 而不是 https 推送到 Bitbucket 吗？

> ID：11267264
> 
> 赞同：0
> 
> 时间：2012-06-29T18:41:11.673
> 
> 标签：mercurial, bitbucket

我知道这是一个你们中的许多人会认为可以通过使用 https 推送轻松解决的问题，但我无法推送 https。

我有一个需要推送到 Bitbucket 的存储库，但是，他们允许推送的方式是在 https 上，这显然是个好主意，但我不能使用 https，所以，有人知道是否有办法推送存储库使用http进入Bitbucket？我知道这有很多安全问题，但我必须处理 ssl 端口在我后面的代理上关闭的事实。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:45:53.883

不幸的是，您可以使用 SSH 代替吗？

来自 BitBucket 文档：“您可以使用安全超文本传输​​协议 (HTTPS) 或安全外壳 (SSH) 连接到 bitbucket。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T04:59:58.540

对于任何阅读本文的人，我们今天遇到了这个问题（代理拒绝 https）。我们尝试在 Bitbucket 中使用 http 而不是 https，并且效果很好。

# node.js - 是否可以将 WSH (wscript) 与 nodejs 结合起来

> ID：11267265
> 
> 赞同：8
> 
> 时间：2012-06-29T18:41:13.383
> 
> 标签：node.js, dom, wsh

作为 QA，我使用 WSH 脚本在 IE 中进行自动上传、部署和一些 Web 测试。带有 JavaScript 的 WSH(wscript) 可以打开 IE 窗口，激活它并访问 DOM 模型以执行某些操作或验证某些预期结果。它是一种 Selenium 1.0 方法，但不需要 JAVA 和任何环境配置，因此可以立即在任何开发人员/qa windows 机器上执行。

最近我发现了 NodeJS 及其所有功能，除了使用 Windows IE DOM 进行操作。找不到如何运行我的旧 WSH 脚本来测试 IE DOM，同时使用一些 NodeJS 模块来解析 XML 或运行测试报告服务器的方法。

所以问题是：是否可以运行 WSH JavaScripts 和 Node.js 并使用这两个世界的所有好东西？恐怕不是，但希望有人有解决方法...

作为解决方法，也许有人在 NodeJS 中找到了启动 IE 窗口访问其 DOM 的方法（...添加自己的 js 脚本或对其运行 SendKeys）！？

我知道 NodeJS 不是为执行 Windows 管理任务而设计的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-22T07:20:49.247

虽然实际上并没有按照问题的要求*结婚*，但评论中的@o_nix 对[https://github.com/idobatter/node-win32ole](https://github.com/idobatter/node-win32ole)提出了建议。

我建议这个模块可以满足从 Google 来到这里的人们的许多问题（就像我所做的那样）。它也可以从这里的 npm 获得：[https ://www.npmjs.com/package/win32ole](https://www.npmjs.com/package/win32ole)

该模块还有不少示例，例如： [https ://github.com/idobatter/node-win32ole/blob/dev0.1.3/examples/activex_filesystemobject_sample.js](https://github.com/idobatter/node-win32ole/blob/dev0.1.3/examples/activex_filesystemobject_sample.js)

```
 var win32ole = require('win32ole');
  . . . 
  var withReadFile = function(filename, callback){
    var fso = new ActiveXObject('Scripting.FileSystemObject');
    var fullpath = fso.GetAbsolutePathName(filename);
    var file = fso.OpenTextFile(fullpath, 1, false); // open to read
    try{
      callback(file);
    }finally{
      file.Close();
    }
  };
  var withEachLine = function(filename, callback){
    withReadFile(filename, function(file){
//    while(file.AtEndOfStream != true) // It works. (without unary operator !)
//    while(!file.AtEndOfStream) // It does not work.
      while(!file.AtEndOfStream._) // *** It works. oops!
        callback(file.ReadLine());
    });
  };
  withEachLine(testfile, function(line){
    console.log(line);
  }); 
```

所以，对我来说，这就像结合旧的 WSH 脚本一样好。当然会涉及到调整，但之后就是再见了 WSH。

更具体地说，对于手头的问题，这是一个演示 IE 脚本的片段： [https ://github.com/idobatter/node-win32ole/blob/master/examples/ie_sample.js](https://github.com/idobatter/node-win32ole/blob/master/examples/ie_sample.js)

```
 var win32ole = require('win32ole');
  . . . 
  var ie = new ActiveXObject('InternetExplorer.Application');
  ie.Visible = true;
  for(var i = 0; i < uris.length; ++i){
    console.log(uris[i]);
    ie.Navigate(uris[i]);
    win32ole.sleep(15000, true, true);
  }
  ie.Quit(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T21:07:13.883

WSH 是与 nodejs 不同的运行时和库集。对于您的用例，我能想到的唯一简单解决方案是使用 child_process 运行您的 WSH 脚本并捕获输出并解析它。

其他选项是：

*   看看其他浏览器自动化模块 - selenium 不是你唯一的选择，还有无头浏览器，可能会安抚这种情况：zombiejs、phantomjs 等
*   将本机绑定写入 WSH 用于 nodejs 的 API
*   合并 WSH 和 nodejs 的事件循环，并将 WSH 的 API 暴露给 nodejs：对于如此狭窄的用例，这不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:36:22.467

触发子进程的好处是 WSH 能够发出 HTTP 请求。显然，Node 可以提供 HTTP 服务。

可以想象一个 Node.js 库，它会以这种方式完全代理 ActiveXObject，并赋予 Node.js 与 WSH 相同的所有功能。

# xml - 使用 XPath 查找电子邮件地址

> ID：11267266
> 
> 赞同：2
> 
> 时间：2012-06-29T18:41:18.300
> 
> 标签：xml, xpath

很长一段时间以来，我一直在尝试使用 xpath 从以下代码中提取电子邮件地址，但没有成功...

[http://pastie.org/4172907](http://pastie.org/4172907)（第 78 行）

这是我到目前为止所尝试的：

```
//tr/td/div[@class='geTextA5'][2]/a 
```

我在 xpath 上玩了三个多小时，尝试了许多不同的变体。我对 xpath 很陌生，所以我希望有一种更简单的方法来实现这一点。

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-01T08:54:02.793

如果您确信所有电子邮件都具有示例中的 mailto 超链接，那么您可以尝试以下 xpath。

```
//a[starts-with(@href, 'mailto')]/text() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-23T02:04:32.117

进一步补充，如果您想从文本中解析电子邮件但它们没有包含在锚点中：

```
//*[contains(text(), '@')] 
```

# java - 在使用带有数组的类时遇到问题

> ID：11267281
> 
> 赞同：2
> 
> 时间：2012-06-29T18:41:46.503
> 
> 标签：java, oop, class, object

当我调用我的 TruthTable 类并使用输入填充它时，当我尝试设置 AND 门的输入时，我无法访问数组中的各个插槽？

**threeAndGates.java** - 发生错误的类

```
import java.util.Scanner;

public class threeAndGates {

   public static void main(String[] args){
      LogicGate and1 = new LogicGate(LogicGate.AND);
      LogicGate and2 = new LogicGate(LogicGate.AND);
      LogicGate and3 = new LogicGate(LogicGate.AND);

      System.out.print("What is the number of Inputs? ");
      Scanner scan = new Scanner(System.in);
      int numOfInputs = scan.nextInt();

      System.out.print("What is the number of Outputs? ");
      int numOfOutputs = scan.nextInt();

      TruthTable Table1 = new TruthTable(numOfInputs,numOfOutputs);
      Table1.PopulateTruthTable();

      //below is where it is giving me "the type of the expression must be an array type but it resolves to TruthTable"
      for(int r = 0; r<(Math.pow(2, numOfInputs)) ; r++ ){
         and1.setInput1(Table1[r][0]);
         and1.setInput2(Table1[r][1]);
         and2.setInput1(Truth1[r][2]);
         and2.setInput2(Truth1[r][3]);
         and3.setInput1(and1.getOutput());
         and3.setInput2(and2.getOutput());

         Table1[r][numOfInputs + numOfOutputs] = and3.getOutput();
      }

      Table1.printTruthTable();
   }
} 
```

**TruthTable.java**

```
public class TruthTable {
   private int numOfInputs;
   private boolean[][] table;

   public TruthTable(int inputs, int outputs){
      this.numOfInputs = inputs;
      int rows = (int) Math.pow(2,inputs);
      int columns =  inputs + outputs;
      table = new boolean[rows][columns];
   }

   public void printTruthTable(){
      for(int r = 0 ; r < table.length ; r++){
         for(int c = 0; c < table[r].length; c++)
            System.out.printf("%-5b ", table[r][c]);
         System.out.println();
      }
   }

   public String toString(){
      String outStr = new String();
      for(int r = 0; r < table.length; r++){
         for(int c = 0; c < table[r].length; c++)
            outStr += String.format("%-5b ", table[r][c]);
         outStr += '\n';
      }

      return outStr;
   }

   public boolean[][] PopulateTruthTable(){
      String s; 
      String r ="";
      int[] Line = new int[numOfInputs];
      boolean bit;

      for ( int i= 0; i < Math.pow(2,numOfInputs) ; i++){
         int x = numOfInputs - Integer.toBinaryString(i).length();
         for(int j = 0; j<x ; j++)
            r += "0"; 
         s = r + Integer.toBinaryString(i);
         for(int k=0; k<s.length() ;k++){
           Line[k] = s.charAt(k)-48;
         }  

         for(int m=0 ; m<numOfInputs ; m++){    
           if(Line[m]==1) bit = true;
           else bit = false; 
           table[i][m] = bit;
         }
         r="";
      } 
      return table;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:24:46.957

您的 TruthTable 类不是数组。它包含一个数组。您可以在 TruthTable 类中添加一个 get 和 set 方法：

```
public boolean getValueAt(int x, int y) {
   return this.table[x][y];
}

public void setValueAt(int x, int y, boolean value) {
   this.table[x][y] = value;
} 
```

并使用它来处理 TruthTable 值。

* * *

这与您的问题无关，但是在您的类中命名变量时，一般做法是使用小写。例如，您有：

```
TruthTable Table1 = new TruthTable(numOfInputs,numOfOutputs); 
```

会更好

```
TruthTable table1 = new TruthTable(numOfInputs,numOfOutputs); 
```

最好是

```
TruthTable truthTable = new TruthTable(numOfInputs,numOfOutputs); 
```

你对事物的命名越好、越一致，就越容易阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:25:06.020

您的 TruthTable 类不是多维数组；它有一个多维数组字段。因此，您不能使用以下语法：

```
tableInstance[x][y] 
```

如果你 TruthTable 的表字段是公开的，或者更好的是，它有一个吸气剂，你可以做这样的事情来代替......

```
tableInstance.getTable()[x][y] 
```

某些语言（如 C#）还支持运算符重载，这将允许您定义使用`[]`索引运算符（或其他类似`+`,`/`等）的行为。这将允许您使索引工作。不幸的是，Java 没有这个特性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T19:51:07.380

这更像是评论而不是答案，但我需要更多空间。

如果您的代码稍后给您带来问题，我可以提出建议吗？将 populateTruthTable 分解为 2 或 3 个方法，将每个循环放在它自己命名良好的方法中，因为[每个方法都应该只做一件事](http://www.codinghorror.com/blog/2007/03/curlys-law-do-one-thing.html)

此外，您可能不应该直接从主类访问数组，而是将主类“for”循环中的所有代码放入 TruthTable 类中的方法并从 main 调用该方法，因为您应该[告诉对象要做什么做而不是询问它的数据。](http://pragprog.com/articles/tell-dont-ask)

我并不是要说你做错了什么，你显然做得很好，但随着你的进步，学习更多的编码技巧/练习总是好的，你似乎处于这些水平会派上用场的。

# javascript - angularjs - 单击带有实际网址的链接时刷新

> ID：11267284
> 
> 赞同：49
> 
> 时间：2012-06-29T18:41:52.870
> 
> 标签：javascript, angularjs

我使用 routeProvider 为我的 url 定义控制器和模板。

当我单击与实际位置具有相同 url 的链接时，没有任何反应。`reload()`如果用户点击这样的链接，即使位置没有改变，我也希望调用该方法。换句话说，如果我将位置设置为相同的值，我希望它的行为与将其设置为不同的值一样。

有没有办法配置 routeProvider 或 locationProvider 自动完成？或者这样做的正确方法是什么？这是往返应用程序中的标准行为，但是如何在 angularjs 中做到这一点？

我也在[谷歌群组](https://groups.google.com/forum/#!topic/angular/VcaYuIuGhCM)上问过。

更新：

这个问题得到了很多意见，所以我将尝试解释我是如何解决我的问题的。

正如 Renan Tomal Fernandes 在评论中建议的那样，我创建了一个自定义指令，用于在我的应用程序中进行链接。

```
angular.module('core.directives').directive('diHref', ['$location', '$route',
        function($location, $route) {
    return function(scope, element, attrs) {
        scope.$watch('diHref', function() {
            if(attrs.diHref) {
                element.attr('href', attrs.diHref);
                element.bind('click', function(event) {
                    scope.$apply(function(){
                        if($location.path() == attrs.diHref) $route.reload();
                    });
                });
            }
        });
    }
}]); 
```

然后将该指令用于我想要具有此功能的应用程序中的所有链接。

```
<a di-href="/home/">Home</a> 
```

该指令的作用是它根据`href`属性为您设置属性，`di-href`因此 Angular 可以像往常一样处理它，当您将鼠标悬停在链接上时，您可以看到 url。此外，当用户单击它并且链接的路径与当前路径相同时，它会重新加载路由。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-07-11T08:40:28.127

**将 /（斜杠）添加到路由配置中定义的 url**

我今天遇到了类似的问题，我的网页中有一个链接，当我点击它时，我希望每次都重新加载 ng-view，以便我可以从服务器刷新数据。但是如果 url 位置没有改变，angular 不会重新加载 ng-view。

最后，我找到了解决这个问题的方法。在我的网页中，我将链接 href 设置为：

*   `<a href="#/test">test</a>`

但是在路由配置中，我设置了：

*   `$routeProvider.when('/test/', { controller: MyController, templateUrl:'/static/test.html' });`

不同的是 url 中的最后一个斜杠。当我第一次单击`href="#/test"`时，将 url 重定向到`#/test/`，并加载 ng-view。当我第二次点击它时，因为当前`#/test/`的 url 不等于`href="#/test"`我点击的链接（）中的 url，所以 Angular 会触发位置更改方法并重新加载 ng-view，此外 Angular 会`#/test/`再次将 url 重定向到。下次我点击 url 时，angular 会再次做同样的事情。这正是我想要的。

希望这对你有用。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-03-08T09:51:41.007

您可以`_target='_self'`在链接上添加一个强制页面重新加载。

例如

```
<a href="/Customer/Edit/{{customer.id}}" target="_self">{{customer.Name}}</a> 
```

在 IE 和 Firefox 上使用 1.0.5 和 1.2.15 版本进行测试。

[以下是来自AngularJS 网站](https://docs.angularjs.org/guide/$location)的更多信息：

**Html链接重写**

当您使用 HTML5 历史 API 模式时，您会在不同的浏览器中需要不同的链接，但您所要做的就是指定常规的 URL 链接，例如：

```
<a href="/some?foo=bar">link</a> 
```

当用户点击此链接时，

*   在旧版浏览器中，URL 更改为`/index.html#!/some?foo=bar`
*   在现代浏览器中，URL 更改为`/some?foo=bar`

在以下情况下，链接不会被重写；相反，浏览器将对原始链接执行完整的页面重新加载。

*   包含目标元素的链接示例：`<a href="/ext/link?a=b" target="_self">link</a>`

*   指向不同域的绝对链接示例：`<a href="http://angularjs.org/">link</a>`

*   以“/”开头的链接在定义 base 时指向不同的基本路径示例：`<a href="/not-my-base/link">link</a>`

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-29T18:59:23.580

您应该使用[$route.reload()](http://docs.angularjs.org/api/ng.$route#reload)强制重新加载。

我不知道是否有“自动”的方式来做到这一点，但你可以使用 ng-click 这些链接

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-09-25T14:22:41.650

对于使用[AngularUI 路由器](https://github.com/angular-ui/ui-router)的人。你可以使用这样的东西：

```
<a data-ui-sref="some.state" data-ui-sref-opts="{reload: true}">State</a> 
```

注意重新加载选项。

在这里找到答案：[https ://stackoverflow.com/a/29384813/426840](https://stackoverflow.com/a/29384813/426840)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-10-01T07:25:14.803

来自[@Renan Tomal Fernandes 的回答](https://stackoverflow.com/a/11267490/747134)。以下是一个例子

HTML

```
<a href="#/something" my-refresh></a> 
```

JS

```
angular.module("myModule",[]).
directive('myRefresh',function($location,$route){
    return function(scope, element, attrs) {
        element.bind('click',function(){
            if(element[0] && element[0].href && element[0].href === $location.absUrl()){
                $route.reload();
            }
        });
    }   
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-26T16:18:16.503

我认为这是一种更简单的方法。

```
.directive ('a', function ($route, $location) {
    var d = {};
    d.restrict = 'E';
    d.link = function (scope, elem, attrs) {

        // has target
        if ('target' in attrs) return;

        // doesn't have href
        if (!('href' in attrs)) return;

        // href is not the current path
        var href = elem [0].href;
        elem.bind ('click', function () {
            if (href !== $location.absUrl ()) return;
            $route.reload ();
        });
    };
    return d;
}); 
```

假设您希望在单击时重新加载所有基本`<a>`链接（不带属性）并且您在属性中使用相对链接（例如，而不是）您不必向 HTML 添加任何特殊标记（在使用 HTML 更新站点时会派上用场已经写好了）。`target``href``/home``http://example.com/home`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-03T22:33:16.270

在我的情况下，如果 url 相同，则没有任何工作，包括 $route.reload()、$location.path()、$state.transitonTo() 等。

所以我的方法是使用虚拟页面如下，

```
if( oldLocation === newLocation ) {
   // nothing worked ------------
   // window.location.reload(); it refresh the whole page
   // $route.reload();
   // $state.go($state.$current, null, { reload: true });
   // $state.transitionTo($state.current, $stateParams, {reload:true, inherit: false, notify: false } );
   // except this one
   $location.path('/dummy'); 
   $location.path($location.path());
   $scope.$apply(); 
} 
```

您需要在某处制作“/dummy”模块，该模块不做任何事情，它只会更改 url，以便可以应用下一个 $location.path()。不要错过 $scope.$apply()

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-28T17:06:07.033

我刚才遇到了这个问题，除了它是主页'/'。我想要一个代码更少的简单解决方案。我只是利用了 $routProvider 中的 .otherwise 方法

所以在 html 链接中看起来像：

```
<a href="#/home">Home</a> 
```

由于 routProvider 中没有指定“/home”页面，它将通过“otherwise”方法重定向到“/”。具有此设置的页面：

```
.otherwise({
redirectTo: '/'
}); 
```

希望它可以帮助某人

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-14T19:30:58.257

我使用指令方法尝试了上述 Wittaya 的解决方案。不知何故，该指令不断抛出错误。我最终得到了这个解决方案

HTML

```
<a href="javascript:void(0)" data-ng-click="stateGo('devices')">Devices</a> 
```

控制器

```
 $scope.stateGo = function (stateName) {
        if ($state.$current.name === stateName) {
            $state.reload();
        } else {
            $state.go(stateName);
        }
    } 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2015-02-20T04:09:00.363

刚刚尝试添加这个

```
$(window).on('popstate', function(event) {
//refresh server data
}); 
```

它工作正常

# javascript - 可靠地关闭 Webkit 通知

> ID：11267285
> 
> 赞同：4
> 
> 时间：2012-06-29T18:42:01.403
> 
> 标签：javascript, html, html5-notifications

我成功地创建和关闭 webkit 通知，如下所示：

```
notification = window.webkitNotifications.createNotification('foo.png', 'bar', 'baz')
notification.show()
setTimeout ->
    notification.cancel()
, 3000 
```

但是，如果用户在这三秒钟内关闭或刷新页面，通知不会被关闭，并且它们会一直停留在桌面上，直到手动关闭。

在这种情况下，有没有办法可靠地解雇他们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T22:14:27.257

使用[window.onunload](https://developer.mozilla.org/en/DOM/window.onunload)或[window.onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload)处理程序在页面关闭时清除通知。但是，这不会保留三秒延迟，因为当页面关闭时通知将立即关闭。

另一种选择（*确实*保留三秒延迟）是使用`createHTMLNotification(url)`. 通过在通知 HTML 文档中包含类似的脚本，让通知页面*自行关闭。*`setTimeout(window.close, 3000)`在这种情况下，很明显，您不需要`setTimeout`在主页中调用，因为它已经包含在通知中。

# java - CDI 是否为默认生产者提供 api？

> ID：11267287
> 
> 赞同：0
> 
> 时间：2012-06-29T18:42:12.433
> 
> 标签：java, dependency-injection, java-ee-6, guice, cdi

我有一堆写成快速二进制 Web 服务（又名 Ejb3.1）的依赖项。这是服务声明：

```
@Remote
public interface MyService {...} 
```

您可以使用以下语法将 EJB 注入 servlet 或托管 bean：

```
@EJB
MyService myService; 
```

但是我不想使用`@EJB`注射。我想使用普通的香草 CDI：

```
@Inject
MyService myService; 
```

实现此目的的一种`@Produces`方法是为每个 EJB 创建一个方法：

```
@Produces MyService produceMyService(InjectionPoint ijp){
 //jndi lookup for MyService interface
} 
```

但是，InjectionPoint 能够为您提供所需的所有信息，例如目标类名称（在本例中为 MyService）。

CDI有没有办法做这样的事情？如果无法以任何其他方式满足所需的注入点，我想最后调用这个生产者。

```
@Produces Object produce(InjectionPoint ijp){
 Class ejbInterface = ijp.getType();
 //jndi lookup for ejbInterface
} 
```

这是一个令人困惑的帖子，所以请提出澄清问题。万分感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T20:13:34.920

假设我理解了您的问题（请参阅评论）：不，没有用于此的 API。

好消息是有一种方法可以实现这一点 - 但您可能不想在运行时执行此操作，这是应用程序启动的一项任务。

[CDI 扩展机制在](http://docs.jboss.org/weld/reference/latest/en-US/html/extend.html)**容器启动**时为您提供了一些定义明确的 bean 处理钩子。这是决定启用/禁用某些托管 bean（可能基于静态类路径信息）的逻辑的理想场所。

看看 Seam [Solder](http://docs.jboss.org/seam/3/3.1.0.Final/reference/en-US/html/solder-programmingmodel.html#d0e384)的功能和实现`@Requires`。那应该非常接近您的用例...

# java - 我应该如何向 Java 语言添加功能？

> ID：11267293
> 
> 赞同：3
> 
> 时间：2012-06-29T18:42:24.180
> 
> 标签：java, compiler-construction, jls

我在 Java 周围的其他语言中看到了一些简洁的特性，比如生成器和最近的“等待”特性，我尝试使用字节码操作来实现其中的一些。但是，我认为这些对于大多数开发人员来说已经足够整洁，可以将它们作为一种语言特性。我看过 kijaro 项目；但是，关于如何到达那里的文档似乎很少。所以，即使只是为了我自己的使用和好奇，我应该如何处理呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:58:50.417

查看Oracle 博客上题为[“所以你想改变 Java 编程语言...”的文章。](https://blogs.oracle.com/darcy/entry/so_you_want_to_change)

# python - 将 HTML 输出导出为 pdf 或 odt 的合适模板系统是什么？

> ID：11267295
> 
> 赞同：1
> 
> 时间：2012-06-29T18:42:31.263
> 
> 标签：python, google-app-engine, templates, pdf

我是一个 python 新手，尝试使用 Google App Engine（和 Python）构建我的第一个应用程序，以便在您需要编写表单合同（如房屋租赁或汽车租赁合同）时节省时间（链接：[http://contractpy.appspot .com](http://contractpy.appspot.com)）。

我想知道将最终输出（目前是 HTML 页面）导出为 pdf、odt 或 googledoc 文件的最佳和最简单的方法是什么。换句话说：用户不需要复制和粘贴，而是得到他想要的：准备打印的合同文件。

这是输出的当前状态（样本）：

[http://contractpy.appspot.com/your_contract?resident=Nicola%20Tesla&nacionality=Serbian-American&SSN=1234567&driverLicense=0000001&email=&witness=Carl%20Sagan&owner=House%20owner&contractType=House%20Rental%20Contract&city=Smiljan](http://contractpy.appspot.com/your_contract?resident=Nicola%20Tesla&nacionality=Serbian-American&SSN=1234567&driverLicense=0000001&email=&witness=Carl%20Sagan&owner=House%20owner&contractType=House%20Rental%20Contract&city=Smiljan)

但我想得到这样的东西：

[https://docs.google.com/open?id=0B8TXLR_e14aCeVVfZVZGdUVNUEE](https://docs.google.com/open?id=0B8TXLR_e14aCeVVfZVZGdUVNUEE)

我怎么能得到这个？

提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T08:39:04.103

您需要使用一些[分页媒体](http://www.w3.org/TR/css3-page/)标签呈现一个 html 文件。例如：

```
@page {     
    size: 21cm 29.7cm;
    margin: 1.5cm;
} 
```

比使用 Conversion API 转换它并提供输出文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:51:48.773

看看[转换 API](https://developers.google.com/appengine/docs/python/conversion/overview)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T05:48:30.213

前段时间我遇到了相同类型的问题，但找不到自己构建报告的解决方案。

经过一番研究，我去了Docmosis。他们提供报告生成作为 SAAS 解决方案。我花了大约一个小时来生成自定义报告。他们的文档非常好，到目前为止他们的支持也很好。它可以生成 .doc 和 .pdf 文档。

我看到的唯一问题是他们的标准文档是针对 Java 的。然而，他们的 SAAS 解决方案通过 JSON 或 XML 进行对话。如果你能够从 Python 生成 JSON 或 XML，我想你会很容易生成你正在寻找的文档。

干杯，

雨果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T19:08:13.923

As far as my experience with browser engine based conversion tools goes, the documents are overly complicated and usually way several MBs.

I have never used [pandocs](http://johnmacfarlane.net/pandoc/index.html), but it might be what you are looking for. My preferred way of conversion to PDFs has been [reportlab](http://www.reportlab.com/), and [sphinx](http://sphinx.pocoo.org/) for documentation. For odt you might wanna look into [open office docs](http://wiki.services.openoffice.org/wiki/Python).

# java - Spring：如何通过读取外部属性文件来注入带有@Value 注释的值？

> ID：11267296
> 
> 赞同：3
> 
> 时间：2012-06-29T18:42:33.670
> 
> 标签：java, spring, annotations

我有以下情况
- 有一个 MongoService 类，它从文件中读取主机、端口、数据库

**xml配置**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>file:///storage/local.properties</value>
            </list>
        </property>
    </bean>
</beans> 
```

local.properties**看起来**像

```
### === MongoDB interaction === ###
host="127.0.0.1"
port=27017
database=contract 
```

和**MongoService 类**为

```
@Service
public class MongoService {

    private final Mongo mongo;
    private final String database;
    private static final Logger LOGGER = LoggerFactory.getLogger(MongoService.class);

    public MongoService(@Nonnull final @Value("#{ systemProperties['host']}") String host, @Nonnull final @Value("#{ systemProperties['port']}") int port, @Nonnull final @Value("#{ systemProperties['database']}") String db) throws UnknownHostException {
        LOGGER.info("host=" + host + ", port=" + port + ", database=" + db);
        mongo = new Mongo(host, port);
        database = db;
    }
} 
```

当我想测试该 bean 是否正常时，我在
**MongoServiceTest.java中执行以下操作**

```
public class MongoServiceTest {

    @Autowired
    private MongoService mongoService;

} 
```

它抱怨说`can not identify bean for MongoService`。

然后我将以下内容添加到上面的 xml

```
<bean id="mongoService" class="com.business.persist.MongoService"></bean> 
```

然后它抱怨说`"No Matching Constructor found"`

**我想做的事**

a.) MongoService 应该是`@Autowired`并从中读取配置参数`<value>file:///storage/local.properties</value>`

**问题**

a.) 在构造函数中访问值是否正确？ `(file name is local.properties and I am using @Value("#{ systemProperties['host']}") syntax)`

b.) 我需要什么让它工作才能`@Autowired private MongoService mongoService`正确加载并从 local.properties 文件中读取值。

PS我对Spring很陌生，真的不知道如何使这项工作

非常感谢您提前提供的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:25:00.203

我认为，您必须将构造函数参数添加到配置 xml，如下所示。

```
<bean id="mongoService" class="com.business.persist.MongoService">

        <constructor-arg type="java.lang.String">
            <value>host</value>
        </constructor-arg>

        <constructor-arg type="int">
            <value>port</value>
        </constructor-arg>

        <constructor-arg type="java.lang.String">
            <value>database</value>
        </constructor-arg>

    </bean> 
```

我不确定，Bst 方法可能是添加基于 java 的 bean 配置。从 xml 中删除 bean 定义并添加基于 java 的配置如下

```
@Service
public class MongoService {

    private final Mongo mongo;
    private final String database;
    private static final Logger LOGGER = LoggerFactory.getLogger(MongoService.class);

@bean
    public MongoService(@Nonnull final @Value("#{ systemProperties['host']}") String host, @Nonnull final @Value("#{ systemProperties['port']}") int port, @Nonnull final @Value("#{ systemProperties['database']}") String db) throws UnknownHostException {
        LOGGER.info("host=" + host + ", port=" + port + ", database=" + db);
        mongo = new Mongo(host, port);
        database = db;
    }
} 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:07:07.627

默认情况下，Spring 使用默认构造函数（没有参数）实例化对象，然后使用 setter 方法设置所有属性。如果您不想（或不能）使用 setter 或定义默认构造函数，则必须告诉 spring 要作为构造函数参数传入的内容。

这是一篇博客文章，解释了如何做到这一点：
[http ://www.javalobby.org/java/forums/t18396.html](http://www.javalobby.org/java/forums/t18396.html)

基本语法如下所示：

```
<bean name="MyBean" class="com.example.BeanClass">
  <constructor-arg index="0"><ref bean="OtherBeanName"/></constructor-arg>
</bean> 
```

index 属性是可选的，但它要求您按照`constructor-arg`与构造函数的参数相同的顺序对 XML 元素进行排序。

# python - 将方法参数放入字典的 Pythonic 方式

> ID：11267298
> 
> 赞同：3
> 
> 时间：2012-06-29T18:42:44.210
> 
> 标签：python

我正在编写一个 api，并且想知道执行以下操作的最 Pythonic 方式是什么。

我正在编写一堆方法来进行各种网络调用，参数主要转换为发布数据键和值。

到目前为止，我一直在写它的方式大多是这样的；

```
def doSomething(self,param1,param2,param3):
    payload={"param1":param1,
             "param2":param2,
             "param3":param3}
    return self.request("do/something",payload) 
```

这已经具有必须重复可能更改的参数名称的缺点，但是这种模式还不错。

下面的案例让我想出更好的方法。在这种情况下，调用有 4 个可选参数

```
def doSomethingElse(self,param1,param2=None,param3=None,param4=None,param5=None):
    payload= {"param1":param1}
    if param2:
        payload["param2"]= param2
    if param3:
        payload["param3"]= param3
    # ... etc ...
    self.request("do/something/else",payload) 
```

我的第一个想法是这样做：

```
def doSomethingElse(self,param1,**params):
    payload = {"param1":param1}
    payload.update(params)
    self.request("do/something/else",payload) 
```

甚至：

```
def doSomethingElse(self,**payload):
    self.request("do/something/else",payload) 
```

尽管第二个很好而且很简单，但是可以在没有非默认参数的情况下调用该方法。但是在这两种情况下，我在使用 api 时都会丢失方法签名，并且用户不会知道参数是什么（我知道我可以在文档字符串中编写预期的签名，但我宁愿防止发送拼写错误的关键字）。

我认为必须有一个很好的pythonic解决方案来做到这一点，有什么想法吗？

## 编辑

我认为我没有说清楚的一个关键点是参数是在调用中的 post 数据中发送的，我想确保只有这些键可以发送，就像在第一个示例中一样`doSomethingElse`，你可以' t 发送除这 5 个命名参数之外的任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:12:27.100

Pythonic 的方式是在调用函数时命名参数，而不是在函数签名中：

```
def doSomething(self, **kwargs):
    self.request("do/something/else", kwargs)

doSomething(param1=3, param2='one', param3=4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:01:55.423

Something like this, perhaps:

```
def doSomethingElse(self, param1, **params):
    payload = {"param1": param1}
    for name, value in params.items():
        if value is not None:
            payload[name] = value
    self.request("do/something/else", payload) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T19:24:23.897

简单点怎么样

```
def get_payload(ldict):
    return {k:v for k,v in ldict.iteritems() if k != 'self' and v is not None}

class fred(object):
    some_class_var = 17
    def method(self, a, b=2):
        payload = get_payload(locals())
        print payload 
```

这使

```
>>> f = fred()
>>> f.method()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: method() takes at least 2 arguments (1 given)
>>> f.method(2)
{'a': 2, 'b': 2}
>>> f.method(2, b=3)
{'a': 2, 'b': 3}
>>> f.method(5, b=None)
{'a': 5}
>>> f.method(2, b=3, c=19)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: method() got an unexpected keyword argument 'c'
>>> help(f.method)

Help on method method in module __main__:

method(self, a, b=2) method of __main__.fred instance 
```

我认为符合您的标准。下一步将是使用装饰器（可能使用包装或装饰器模块来保留签名）以便计算有效负载然后传递，但我不知道是否`@payload`会比`payload = get_payload(locals())`. 请注意，使用`locals()`这种方式，需要在开始时完成。

不过，我认为这并不是防止不必要的核攻击的最佳方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T21:52:51.067

如果您有几个这样的功能，您可以执行以下操作：

```
class Requester(object):
    def __init__(self, tobecalled, *allowed):
        self.tobecalled = tobecalled
        self.allowed = set(allowed)
    def __call__(self, otherobj, **k):
        for kw in k.iterkeys():
            if kw not in self.allowed:
                raise ValueError("unknown argument(s) given: %s" % kw)
        otherobj.request(self.tobecalled, **k)
    def __get__(self, outside, outsideclass):
        return lambda **k: self(outside, **k)

class Outside(object):
    def request(self, method, **k):
        print method, k
    do_one_thing = Requester("do/one/thing", 'param1', 'param2')
    do_nonsense = Requester("do/nonsense", 'param3')
    simple = Requester("simple")

o = Outside()
o.do_one_thing(param1=1, param2=2)
o.do_nonsense(param3=12)
o.simple()
try: o.do_one_thing(rparam1=1, param2=2)
except ValueError, e: print e
try: o.do_nonsense(gparam3=12)
except ValueError, e: print e
try: o.simple(whatever=12)
except ValueError, e: print e 
```

这里会发生什么？我们创建了一个`Requester`扮演方法角色的对象：如果我们把它放在另一个类中（这里：）`Outside`，它可以被调用的方式，它也获得一个对象的引用，它被调用。我`outside`在这里所说的是“外部`self`”，正如我现在所说的那样。然后，它返回一个调用对象本身的 lambda，就像函数一样。在那里，检查参数的有效性，如果通过，我们就调用“ `outside`”的`request()`方法。

# mysql - 使用命令行在 Mysql 中导入压缩文件

> ID：11267309
> 
> 赞同：34
> 
> 时间：2012-06-29T18:43:46.067
> 
> 标签：mysql, database, cmd, winzip, xz

[使用 CMD 在 Mysql 中导入压缩文件](https://stackoverflow.com/q/11258811/1488173)

使用 cmd 将 sql 压缩文件导入 mysql 的正确语法是什么？

我正在做以下事情

```
xz < backup.sql.gz | mysql -u root test 
```

但总是出现以下错误 ![在此处输入图像描述](../Images/6f72edddb3fd7f1a6deb83802164b5b8.png)

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2015-11-12T06:54:20.470

尝试：

```
unzip -p dbdump.sql.zip | mysql -u root -p yourdbname 
```

dbdump.sql.zip 应该包含一个 SQL 文件。-p 标志将输出通过管道传输到 mysql 二进制文件中。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-28T06:55:11.960

我从另一个问题中得到了答案。这是使用 7zip 时导入压缩文件的命令

> 7z x -so 备份.7z | mysql -u 根测试

x 是提取命令

`-so`选项使 7-zip 写入标准输出

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-29T14:03:12.897

```
zcat backup.sql.gz | mysql -u[username] -p[pswd] [db] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T18:46:46.287

您可能想尝试`xz −−decompress −−stdout`解压缩。

完整的命令将是`xz −−decompress −−stdout backup.sql.gz | mysql -u root test`

# php - 使用 php 在 gzopen 中解压缩大型 gzip 文件的合适缓冲区大小是多少？

> ID：11267311
> 
> 赞同：2
> 
> 时间：2012-06-29T18:43:53.727
> 
> 标签：php, gzip, internal-server-error, compression

```
function uncompress($srcName, $dstName) {
    $sfp = gzopen($srcName, "rb");
    $dstName = str_replace('.gz', '', $dstName);
    $fp = fopen($dstName, "w");

        fseek($FileOpen, -4, SEEK_END);
        $buf = fread($FileOpen, 4);
        $GZFileSize = end(unpack("V", $buf));

    while ($string = gzread($sfp, $GZFileSize)) {
        fwrite($fp, $string, strlen($string));
    }
    gzclose($sfp);
    fclose($fp);
} 
```

我使用此代码进行解压缩，但它不起作用，并且出现以下错误：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 webmaster@example.com 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T07:16:58.237

这个功能看起来很粗略。看来您正在用户空间中重新实现`stream_copy_to_stream()`。忘记缓冲区，只需使用本机的东西。

```
function uncompress($srcName, $dstName)
{
    $src = gzopen($srcName, 'rb');
    $dst = fopen($dstName, 'wb');

    stream_copy_to_stream($src, $dst);

    gzclose($src);
    fclose($dst);
} 
```

想想看，你甚至可以使用`copy()`

```
function uncompress($srcName, $dstName)
{
    copy('compress.zlib://' . $srcName, $dstName);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T13:26:35.403

我把我的功能改成了这个，我的问题就解决了：

```
function uncompress($srcName, $dstName) {
        $sfp = gzopen($srcName, "rb");
        $dstName = str_replace('.gz', '', $dstName);
        $fp = fopen($dstName, "w");

            $GZFileSize = filesize($srcName);

        while ($string = gzread($sfp, $GZFileSize)) {
            fwrite($fp, $string, strlen($string));
        }
        gzclose($sfp);
        fclose($fp);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:51:53.023

这应该可以帮助您查看错误消息。它要么显示在屏幕上，要么打印到 txt 文件中，尽管该目录必须是 php 可写的。

```
<?php //top of script
error_reporting(E_ALL);
ini_set('display_errors', 1);
ini_set('log_errors', 1);
ini_set('error_log', 'errors.txt'); 
```

# javascript - 从javascript打开jquery移动对话框？

> ID：11267314
> 
> 赞同：0
> 
> 时间：2012-06-29T18:44:11.573
> 
> 标签：javascript, jquery, html, jquery-mobile

是否可以从 javascript 在 Jquery Mobile 中打开对话框？

我尝试做这样的事情，但没有奏效：

```
 <a id='lnkDialog' href="goals.html" data-rel="dialog" data-transition="pop" style='display:none;'></a> 
```

然后在js中

```
 document.getElementById('lnkDialog').click(); 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:52:57.473

这就是我所做的。

在我的标记中，我在正文中定义了一个对话框，在它的末尾如下：

```
<div data-role="dialog" id="messagebox">
    <div data-role="header">
        <h1>Message</h1>
    </div><!-- /header -->

    <div data-role="content">
        <span id="phMessage"></span>
    </div>
</div> 
```

然后在javascript中我有：

```
function showMessage(message) {
    $("#phMessage").html(message);
    $.mobile.changePage('#messagebox', 'pop', false, true);
} 
```

你唯一真正需要的是`$.mobile.changePage('#messagebox', 'pop', false, true);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:48:40.173

我们需要更多信息，但除非#lnkDialog 已经有一个绑定到点击事件的函数，否则这是行不通的。我假设 data-rel 包含将弹出的模式的 ID。

会更像

```
$('#lnkDialog').on({
    click:
        function() {
            var selector = '#' + $(this).attr('data-rel');
            $(selector).show();
        }
}); 
```

但同样，需要更多信息。

# android - 当正常 Back 被禁用时，使用 Back 按钮返回调用客户端

> ID：11267315
> 
> 赞同：1
> 
> 时间：2012-06-29T18:44:18.833
> 
> 标签：android, android-activity, back

我的应用程序设计为作为单个实例运行，并且“后退”按钮不允许您退出应用程序并返回到“开始”屏幕，因为它在内部用于导航屏幕层次结构，其中每个屏幕都可以是一个活动。

但是，外部应用程序可以启动应用程序的内部活动之一。当用户完成了活动的设计目的时，用户的直观操作是点击返回按钮返回到调用客户端。但是因为我阻止了后退按钮退出，所以用户无法返回。

当代码检测到客户端正在启动活动时，我可以添加代码来覆盖它。然而问题是，如果应用程序关闭返回，用户可能会从他们离开的地方返回到应用程序。但是由于我关闭了应用程序以返回调用客户端，因此用户无法返回上次打开的应用程序。我的应用程序需要保留为单个实例，因此不能多次创建启动的活动。关于如何返回到调用客户端但如果在调用客户端使用其活动之一时应用程序正在运行时如何保持应用程序运行的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:44:50.630

通常，您可以以编程方式控制后退导航轨迹。查看 [TaskStackBuilder](http://developer.android.com/reference/android/support/v4/app/TaskStackBuilder.html)和处理通知的文档[Responding to Notifications](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#HandlingNotifications)。看来您要做的是控制所谓的“回栈”。如果您使用 TaskStackBuilder，则行为将与您所在的平台版本相匹配。

在 3.0 之前的平台中，“后退”按钮一直通过后退堆栈到达用户打开手机后执行的第一个任务。3.0后，back不穿越任务边界；为了获得其他任务，用户单击“最近的项目”图标。应用程序中还有“向上”图标，用于导航到应用程序内任务的“开始”。TaskStackBuilder 将为所有版本“做正确的事”。

在当前平台版本中，不允许 Back 退出你的应用是可以的，因为 Back 应该只去当前任务中的第一个 Activity。在 3.0 之前的版本中，不允许 Back 退出应用程序更成问题，我个人不会那样做，但这取决于你。

在 Intent 启动您的应用程序后用户单击返回时会发生什么，应该从我引用的文档中清楚地看出。基本上，您要做的就是回到上一个任务。

# javascript - 如何读取本地 json 文件？

> ID：11267316
> 
> 赞同：1
> 
> 时间：2012-06-29T18:44:29.860
> 
> 标签：javascript, json

我在这里看到过类似的问题，但我就是无法理解。

我正在构建一个小型网页，我想从我的文件系统中读取一个 .json 文件并获取其中的对象。

该网页也是本地的，并且 .json 文件与 .html 文件位于同一文件夹中。

如果可能的话，如何在不使用任何服务器且不使用 jquery 的情况下在我的 Ubuntu 机器上执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:17:50.030

这是一些普通的 javascript XMLHTTPRequest 代码，它确实考虑了 ActiveX 对象的 IE 怪癖：

```
var useActiveX = typeof ActiveXObject !== 'undefined';
function loadJSON(file, callback) {
    var xobj;
    if (useActiveX) {
        xobj = new ActiveXObject('Microsoft.XMLHTTP'); 
    } else {
        xobj = new XMLHttpRequest();
    }
    xobj.callback = callback;
    if (xobj.overrideMimeType) {
        xobj.overrideMimeType('application/json');
    }
    xobj.open('GET', file, false);
    xobj.onreadystatechange = function() {
        if (this.readyState === 4) {
            this.callback(this);
        }
     }
     xobj.send(null);
} 
```

然后你只需给它一个文件路径和一个回调函数来运行它：

```
loadJSON('filename.json', function(obj) {
    alert(obj.responseText);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:50:48.243

您可以简单地将`<script>`标签附加到您的页面，将 SRC 指向同一文件夹中的本地 .js 文件。您不需要使用 Ajax。

# asp.net - 框架集没有拾取css

> ID：11267317
> 
> 赞同：0
> 
> 时间：2012-06-29T18:44:30.330
> 
> 标签：asp.net, css

框架 src 页面不应用容器页面中引用的 css 是正常行为吗？

例如，外部样式表有一个 id #divbody 来设置文本的颜色。Header.aspx 有名为 divbody 的 div id。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>    
    <link href="StyleSheet.css" rel="stylesheet" type="text/css" />
</head>

<frameset rows="25%,*,25%">
  <frame src="Header.aspx" />
  <frame src="Body.aspx" />
  <frame src="Footer.aspx" />
</frameset>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:47:05.410

Frame 是一个单独的文档。每个文档都需要包含其 OWN 样式表。它不能从父窗口继承。

# c# - 有没有办法自动测试winforms中是否有设计器错误？

> ID：11267318
> 
> 赞同：2
> 
> 时间：2012-06-29T18:44:37.237
> 
> 标签：c#, winforms

有没有办法强制设计器引擎从给定的可设计 WinForms 控件的单元测试中运行（即具有自动生成的 Designer.cs 文件的控件）？自动捕获任何会阻止 Visual Studio 设计器视图为控件打开的错误会很好。

谢谢。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-29T23:05:31.667

本质上，设计师是在呼吁`InitializeComponent`您`Form`展示它。可能有一些差异，但没有什么太大的区别。

因为`InitializeComponent`默认情况下是私有的，所以相当于创建一个 new `Form`，因为默认构造函数调用`InitializeComponent`.

所以只是做

```
new Form1(); 
```

足以确保`InitializeComponent`不会引发任何异常。

# algorithm - 最小化到加权网格的距离

> ID：11267319
> 
> 赞同：5
> 
> 时间：2012-06-29T18:44:41.640
> 
> 标签：algorithm, math, optimization

假设您有一个 1000x1000 的正整数权重 W 网格。

我们想要找到最小化平均加权距离的单元格。到每个单元格。

这样做的蛮力方法是遍历每个候选单元格并计算距离：

```
int best_x, best_y, best_dist;

for x0 = 1:1000,
    for y0 = 1:1000,

        int total_dist = 0;

        for x1 = 1:1000,
            for y1 = 1:1000,
                total_dist += W[x1,y1] * sqrt((x0-x1)^2 + (y0-y1)^2);

        if (total_dist < best_dist)
            best_x = x0;
            best_y = y0;
            best_dist = total_dist; 
```

这需要大约 10^12 次操作，这太长了。

有没有办法在~10^8 左右的操作中或附近做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T21:11:18.280

## 理论

这可以在 O(nm log nm ) 时间内使用过滤器，其中 n，m 是网格尺寸。

您需要定义一个 size 的过滤器`2n + 1 x 2m + 1`，并且您需要（居中）将原始权重网格嵌入到 size 的零网格中`3n x 3m`。过滤器需要是距原点的距离权重`(n,m)`：

```
 F(i,j) = sqrt((n-i)^2 + (m-j)^2) 
```

让`W`表示嵌入在大小为 0 的网格中的原始权重网格（居中）`3n x 3m`。

然后过滤（[互相关](http://en.wikipedia.org/wiki/Cross-correlation)）结果

```
 R = F o W 
```

将为您提供`total_dist`网格，只需使用`min R`（忽略您放入 W 中的额外嵌入零）即可找到最佳`x0, y0`位置。

图像（即网格）过滤非常标准，可以在各种不同的现有软件（如 matlab）中使用[imfilter](http://www.mathworks.com/help/toolbox/images/ref/imfilter.html)命令完成。

我应该注意，虽然我在上面明确使用了互相关，但你会得到与[卷积](http://en.wikipedia.org/wiki/Convolution)相同的结果，只是因为你的滤波器`F`是对称的。一般来说，图像过滤器是互相关的，而不是卷积的，尽管这两种操作非常相似。

O(nm log nm) 运行时间的原因是因为可以使用 2D FFT 完成图像过滤。

## 实施

这是 Matlab 中的两种实现，两种方法的最终结果是相同的，并且它们以非常简单的方式进行基准测试：

```
m=100;
n=100;
W0=abs(randn(m,n))+.001;

tic;

%The following padding is not necessary in the matlab code because
%matlab implements it in the imfilter function, from the imfilter
%documentation:
%  - Boundary options
% 
%        X            Input array values outside the bounds of the array
%                     are implicitly assumed to have the value X.  When no
%                     boundary option is specified, imfilter uses X = 0.

%W=padarray(W0,[m n]);

W=W0;
F=zeros(2*m+1,2*n+1);

for i=1:size(F,1)
    for j=1:size(F,2)
        %This is matlab where indices start from 1, hence the need
        %for m-1 and n-1 in the equations
        F(i,j)=sqrt((i-m-1)^2 + (j-n-1)^2);
    end
end
R=imfilter(W,F);
[mr mc] = ind2sub(size(R),find(R == min(R(:))));
[mr, mc]
toc;

tic;
T=zeros([m n]);
best_x=-1;
best_y=-1;
best_val=inf;
for y0=1:m
    for x0=1:n

        total_dist = 0;

        for y1=1:m
            for x1=1:n
                total_dist = total_dist + W0(y1,x1) * sqrt((x0-x1)^2 + (y0-y1)^2);
            end
        end

        T(y0,x0) = total_dist;
        if ( total_dist < best_val ) 
            best_x = x0;
            best_y = y0;
            best_val = total_dist;
        end

    end
end
[best_y best_x]
toc;

diff=abs(T-R);
max_diff=max(diff(:));
fprintf('The max difference between the two computations: %g\n', max_diff); 
```

## 表现

对于 800x800 网格，在我的 PC 上肯定不是最快的，FFT 方法在 700 多秒内进行评估。蛮力方法在几个小时后没有完成，我必须杀死它。

就进一步的性能提升而言，您可以通过迁移到 GPU 等硬件平台来实现它们。例如，使用[CUDA 的 FFT 库](http://developer.nvidia.com/cufft)，您可以在 CPU 上花费的时间的一小部分内计算 2D FFT。关键是，FFT 方法会随着您投入更多硬件来进行计算而扩展，而蛮力方法的扩展性会更差。

## 观察

在实现这一点时，我观察到几乎每次，这些`best_x,bext_y`值都是`floor(n/2)+-1`. 这意味着距离项很可能在整个计算中占主导地位，因此，您可以`total_dist`只计算 4 个值的值，从而使该算法变得微不足道！

# mysql - 优化 MySQL 查询以查找重复项？

> ID：11267320
> 
> 赞同：0
> 
> 时间：2012-06-29T18:44:42.687
> 
> 标签：mysql, sql, duplicates

[我最初在这里](https://stackoverflow.com/questions/6299113/speed-up-mysql-join-to-check-for-duplicates)问了这个问题。

我正在使用以下查询返回具有相同名字和姓氏的所有重复记录。诀窍是contact_id必须按降序排列。

问题是数据库在“联系人”表中有几百万条记录。他们的查询需要几分钟才能完成。

我在数据库中索引了contact_firstName、contact_lastName、contact_client_id 和contact_id。

关于如何进一步优化此查询的任何其他想法？

```
SELECT c.contact_id, c.contact_purl, c.contact_firstName, c.contact_lastName, c.contact_organization 
FROM (
        SELECT contact_purl, contact_firstName, contact_lastName, MIN(contact_id) AS MinID 
        FROM contacts 
        WHERE contact_client_id = 1 
        GROUP BY contact_purl HAVING COUNT(contact_id) > 1)  t 
INNER JOIN contacts c 
ON t.contact_purl = c.contact_purl  
AND c.contact_client_id = 1
AND t.MinID <> c.contact_id  
ORDER BY contact_id asc 
```

解释： ![在此处输入图像描述](../Images/7ceaf74d60d22ef2c7c2ae712a4ed5bc.png)

架构：

```
 CREATE TABLE IF NOT EXISTS `contacts` (
  `contact_id` int(11) NOT NULL AUTO_INCREMENT,
  `contact_client_id` int(11) DEFAULT NULL,
  `contact_sales_id` int(11) DEFAULT NULL,
  `contact_campaign_id` int(11) DEFAULT NULL,
  `contact_purl` varchar(100) NOT NULL,
  `contact_purl1` varchar(50) DEFAULT NULL,
  `contact_purl2` varchar(50) DEFAULT NULL,
  `contact_firstName` varchar(50) NOT NULL,
  `contact_lastName` varchar(50) NOT NULL,
  `contact_organization` varchar(100) DEFAULT NULL,
  `contact_url_organization` varchar(200) DEFAULT NULL,
  `contact_position` varchar(50) DEFAULT NULL,
  `contact_email` varchar(100) DEFAULT NULL,
  `contact_phone` varchar(20) DEFAULT NULL,
  `contact_fax` varchar(20) NOT NULL,
  `contact_address1` varchar(100) DEFAULT NULL,
  `contact_address2` varchar(100) DEFAULT NULL,
  `contact_city` varchar(100) DEFAULT NULL,
  `contact_state` varchar(20) DEFAULT NULL,
  `contact_zip` varchar(10) DEFAULT NULL,
  `contact_IP` varchar(50) DEFAULT NULL,
  `contact_timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `contact_pw` varchar(200) NOT NULL,
  `contact_subscribed` varchar(1) NOT NULL DEFAULT 'Y',
  `contact_import` varchar(200) DEFAULT NULL,
  `contacts_c_1` varchar(500) DEFAULT NULL,
  `contacts_c_2` varchar(500) DEFAULT NULL,
  `contacts_c_3` varchar(500) DEFAULT NULL,
  `contacts_c_4` varchar(500) DEFAULT NULL,
  `contacts_c_5` varchar(500) DEFAULT NULL,
  `contacts_c_6` varchar(500) DEFAULT NULL,
  `contacts_c_7` varchar(500) DEFAULT NULL,
  `contacts_c_8` varchar(500) DEFAULT NULL,
  `contacts_c_9` varchar(500) DEFAULT NULL,
  `contacts_c_10` varchar(500) DEFAULT NULL,
  `contacts_c_11` varchar(500) DEFAULT NULL,
  `contacts_c_12` varchar(500) DEFAULT NULL,
  `contacts_c_13` varchar(500) DEFAULT NULL,
  `contacts_c_14` varchar(500) DEFAULT NULL,
  `contacts_c_15` varchar(500) DEFAULT NULL,
  `contacts_c_16` varchar(500) DEFAULT NULL,
  `contacts_c_17` varchar(500) DEFAULT NULL,
  `contacts_c_18` varchar(500) DEFAULT NULL,
  `contacts_c_19` varchar(500) DEFAULT NULL,
  `contacts_c_20` varchar(500) DEFAULT NULL,
  `contacts_c_21` varchar(500) DEFAULT NULL,
  `contacts_c_22` varchar(500) DEFAULT NULL,
  `contacts_c_23` varchar(500) DEFAULT NULL,
  `contacts_c_24` varchar(500) DEFAULT NULL,
  `contacts_c_25` varchar(500) DEFAULT NULL,
  `contacts_c_26` varchar(500) DEFAULT NULL,
  `contacts_c_27` varchar(500) DEFAULT NULL,
  `contacts_c_28` varchar(500) DEFAULT NULL,
  `contacts_c_29` varchar(500) DEFAULT NULL,
  `contacts_c_30` varchar(500) DEFAULT NULL,
  `contacts_c_31` varchar(500) DEFAULT NULL,
  `contacts_c_32` varchar(500) DEFAULT NULL,
  `contacts_c_33` varchar(500) DEFAULT NULL,
  `contacts_c_34` varchar(500) DEFAULT NULL,
  `contacts_c_35` varchar(500) DEFAULT NULL,
  `contacts_c_36` varchar(500) DEFAULT NULL,
  `contacts_c_37` varchar(500) DEFAULT NULL,
  `contacts_c_38` varchar(500) DEFAULT NULL,
  `contacts_c_39` varchar(500) DEFAULT NULL,
  `contacts_c_40` varchar(500) DEFAULT NULL,
  `contacts_c_41` varchar(500) DEFAULT NULL,
  `contacts_c_42` varchar(500) DEFAULT NULL,
  `contacts_c_43` varchar(500) DEFAULT NULL,
  `contacts_c_44` varchar(500) DEFAULT NULL,
  `contacts_c_45` varchar(500) DEFAULT NULL,
  `contacts_c_46` varchar(500) DEFAULT NULL,
  `contacts_c_47` varchar(500) DEFAULT NULL,
  `contacts_c_48` varchar(500) DEFAULT NULL,
  `contacts_c_49` varchar(500) DEFAULT NULL,
  `contacts_c_50` varchar(500) DEFAULT NULL,
  `contacts_i_1` varchar(100) DEFAULT NULL,
  `contacts_i_2` varchar(100) DEFAULT NULL,
  `contacts_i_3` varchar(100) DEFAULT NULL,
  `contacts_i_4` varchar(100) DEFAULT NULL,
  `contacts_i_5` varchar(100) DEFAULT NULL,
  `contacts_i_6` varchar(100) DEFAULT NULL,
  `contacts_i_7` varchar(100) DEFAULT NULL,
  `contacts_i_8` varchar(100) DEFAULT NULL,
  `contacts_i_9` varchar(100) DEFAULT NULL,
  `contacts_i_10` varchar(100) DEFAULT NULL,
  `contacts_i_11` varchar(100) DEFAULT NULL,
  `contacts_i_12` varchar(100) DEFAULT NULL,
  `contacts_i_13` varchar(100) DEFAULT NULL,
  `contacts_i_14` varchar(100) DEFAULT NULL,
  `contacts_i_15` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`contact_id`),
  KEY `contact_campaign_id` (`contact_campaign_id`),
  KEY `contact_client_id` (`contact_client_id`),
  KEY `contact_purl2` (`contact_purl2`),
  KEY `contact_purl1` (`contact_purl1`),
  KEY `contact_purl` (`contact_purl`)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:12:20.177

您可以简单地对自身进行连接，如下所示：

```
SELECT DISTINCT c1.contact_id, c1.contact_firstName, c1.contact_lastName,
       RIGHT(c1.contact_lastName,1) AS nameNum
FROM
      contacts c1 INNER JOIN contacts c2
        ON c1.contact_firstName = c2.contact_firstName
       AND c1.contact_lastName  = c2.contact_lastName
       AND c2.contact_client_id = 1
       AND c1.contact_id <> c2.contact_id
ORDER BY c1.contact_id DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:58:06.427

分别跟踪每个客户的联系人数量并将其存储在另一列中而不是每次都执行该子选择查询是否有意义？

有了这么多的记录，存储其中一些计算可能会更有效，而不必实时查询它们。

# image - 在 jQuery Mobile/HTML5 中使用图像映射

> ID：11267322
> 
> 赞同：0
> 
> 时间：2012-06-29T18:44:43.620
> 
> 标签：image, jquery-mobile

我想使用[图像地图](http://dev.w3.org/html5/markup/map.html)和[http://dev.w3.org/html5/spec/the-map-element.html#dom-map-images](http://dev.w3.org/html5/spec/the-map-element.html#dom-map-images)。我还没有看到太多这种用法（HTML5 Canvas 可能例外，因为上面的链接之一是 HTML5，但不确定）以及 jquery 和其他库的出现。我想有更简单的方法来实现这一点。所以我想知道是否有任何库或更好的方法可以在 jQuery Mobile 中实现图像映射，或者我是否需要采用旧的做法。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:18:52.403

据我所知，HTML5 中没有引入图像地图，但多年来所有浏览器都支持该地图。

我不确定你想用 jquery 库实现什么，但几年前我用它来突出显示图像地图区域，它就像一个魅力。

maphighlight： [http](http://davidlynch.org/blog/2008/03/maphilight-image-map-mouseover-highlighting/)
://davidlynch.org/blog/2008/03/maphilight-image-map-mouseover-highlighting/ 演示： [http ://davidlynch.org/projects/maphilight/docs/demo_world.html](http://davidlynch.org/projects/maphilight/docs/demo_world.html)

# java - 如何从不同的 Maven 项目在 Eclipse 中运行主类？

> ID：11267327
> 
> 赞同：0
> 
> 时间：2012-06-29T18:45:03.900
> 
> 标签：java, eclipse, maven, m2e

所以我说了两个项目，项目 A 和项目 B。项目 A 包含一个我要运行的主类。项目 B 包含一些必需的类路径资源，并且还引用了项目 A。如果我直接在项目 A 中运行主类，它只会在该项目的上下文中运行它，并且不会包含类路径资源，因为它们'在项目 B 中。

但是如果我尝试运行项目 B，我无法选择主类（因为它在该项目中不存在），如果我尝试右键单击项目 -> 运行方式 -> Java 应用程序，它不会想出那个主类作为一个有效的主类。（它确实出现在项目 A 的类似对话框中。）

这似乎是 Eclipse 的一个常见问题；我发现了这个相关的问题，但是这个人没有使用 Maven。此外，他们接受了一个从项目 A 引用项目 B 的答案，这打破了我在这里尝试实现的封装： [Eclipse 3,6 (Helios) referenced project has main method, cannot access from run config when Targeting referencing project](https://stackoverflow.com/questions/4090140/eclipse-3-6-helios-referenced-project-has-main-method-cannot-access-from-run)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:16:02.500

我能想到的选项：

1.  使用命令行启动在类路径中传递 jar 的 main 方法。
2.  让项目 A 引用项目 B 的配置，而不是其他方式。[我意识到你不想这样做，但觉得有必要把它列出来彻底）
3.  在项目 B 中创建一个类，该类具有委托给项目 A 的 main 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-18T17:31:51.220

所以我得到了这个工作

Eclipse IDE for Java Developers 版本：Kepler Service Release 1 Build id：20130919-0819

@Michael Piefel - 如果 B 依赖于 A，那么 A 已经在 B 的“Maven Dependencies”类路径条目下的运行配置类路径中。

问题似乎是 ui 没有显示要从其搜索对话框中选择的类。

但是，如果您只是在“主类”文本字段中输入完全限定的类名并运行它仍然可以工作。:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T20:47:06.513

You really just need to tweak your *Run Configurations* accordingly. In the *Classpath* tab for the run configuration you use to run the class from project A, you can add project B as a dependency. Now while running that class, all the resources from project B are included.

# php - 找出 MySQL / PHP 中最流行的词

> ID：11267329
> 
> 赞同：1
> 
> 时间：2012-06-29T18:45:36.300
> 
> 标签：php, mysql, explode

我有一个包含近 100,000 条评论的数据库，我想检测最常用的词（使用停用词来避免常用词）。

我只想这样做一次，然后使用一些最流行的词来标记包含它们的评论。

你能帮我用查询和 PHP 代码来做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:02:51.567

The easiest approach I guess would be:

*   Create two new tables: `keywords` (id, word) and `keywords_comments` (keyword_id, comment_id, count)
    *   `keywords` saves an unique id and the keyword you found in a text
    *   `keywords_comments` stores one row for each connection between each comment that contains that keyword. In `count` you wil save the number of times this keyword occurred in the comment. The two columns keyword_id + comment_id together form a unique or directly the primary key.
*   Retrieve all comments from the database
*   Parse through all comments and split by non-characters (or other boundaries)
*   Write these entries to your tables

# Example

You have the following two comments:

> Hello, how are you?!
> 
> Wow, hello. My name is Stefan.

Now you would iterate over both of them and split them by non-characters. This would result in the following lowercase words for each text: - First text: hello, how, are, you - Second text: wow, hello, my, name, is, stefan

As soon as you have parsed one of this text, you can already insert it into the database again. I guess you do not want to load 100.000 comments to RAM.

So it would go this:

*   Parse first text an get the keywords above
*   Write each keyword into the tabke `keywords` if it is not there yet
*   Set a reference from the keyword to the comment (`keywords_comments`) and set the count correctly (in our example each word occurs only once in each text, you have to count that).
*   Parse second text
*   …</li>

# Minor improvement

A very easy improvement you probably have to use for 100.000 comments, is to use a **counting variable** or add a new field **has_been_analyzed** to each comment. Then you can read them comment by comment from the database.

I usually use counting variables when I read data chunkwise and know that the data cannot not change from the direction I am starting (i.e. it will stay consistent up to the point I currently am). Then I do something like:

```
SELECT * FROM table ORDER BY created ASC LIMIT 0, 100
SELECT * FROM table ORDER BY created ASC LIMIT 100, 100
SELECT * FROM table ORDER BY created ASC LIMIT 200, 100
… 
```

Consider that this only works if we know for sure that there are no dates to be added at a place we think we already read. E.g. using `DESC` would not work, as there could be data inserted. Then the whole offset would break and we would read one article twice and never read the new article.

If you cannot make sure that the outside counting variable stays consistent, you can add a new field **analyzed** which you set to true as soon as you have read the comment. Then you can always see which comments have already been read and which not. An SQL query would then look like this:

```
SELECT * FROM table WHERE analyzed = 0 LIMIT 100 /* Reading chunks of 100 */ 
```

This works as long as you do not parallelize the workload (with multiple clients or threads). Otherwise you would have to make sure that reading + setting true is atomar (synchronized).

# c# - 显式布局类型中布尔字段的语义 (ECMA-334)

> ID：11267334
> 
> 赞同：2
> 
> 时间：2012-06-29T18:45:59.470
> 
> 标签：c#, boolean, specifications, language-specifications

我试图找到在 ECMA-334（C# 语言规范）中定义以下行为的位置。源程序如下。

```
static void Main(string[] args)
{
    TestStruct a = new TestStruct();
    a.byteValue = 1;
    TestStruct b = new TestStruct();
    b.byteValue = 2;

    Console.WriteLine(string.Format("Result of {0}=={1} is {2}.",
        a.boolValue, b.boolValue, a.boolValue == b.boolValue));
    Console.WriteLine(string.Format("Result of {0}!={1} is {2}.",
        a.boolValue, b.boolValue, a.boolValue != b.boolValue));
    Console.WriteLine(string.Format("Result of {0}^{1} is {2}.",
        a.boolValue, b.boolValue, a.boolValue ^ b.boolValue));
}

[StructLayout(LayoutKind.Explicit, Pack = 1)]
struct TestStruct
{
    [FieldOffset(0)]
    public bool boolValue;
    [FieldOffset(0)]
    public byte byteValue;
} 
```

执行结果如下。

```
Result of True==True is False.
Result of True!=True is True.
Result of True^True is True. 
```

这违反了 §14.9.4 和 §14.10.3 两节，所以我假设其他地方有一个例外情况，涵盖了这些情况。请注意，这不会影响使用 AND、OR、NAND 或 NOR 运算的代码，但会影响使用 XOR 和/或逻辑双条件运算的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:50:53.720

我怀疑这是否已被指定。当您明确布局结构时，您很可能会进入特定于体系结构和特定于实现的行为。

我强烈怀疑您所看到的行为都可以通过想象所有`bool`操作都有效地转换为整数操作来解释，然后（在必要时）通过检查结果是否为非零来转换结果。通常这很好，只要所有`bool`值在内存中使用相同的值（1 或 0），但在你的情况下，你给它一个意外的值（2）。因此，尽管`a.boolValue`和`b.boolValue`都是正确的，`a.boolValue ^ b.boolValue`但具有对所涉及的两个字节进行异或运算的效果，得到 3，它仍会转换为`true`必要的位置。

最好避免这种代码，IMO。你真的需要它，还是只是好奇？

# javascript - 使用 jQuery 检查 DOM 元素的继承可见性

> ID：11267335
> 
> 赞同：3
> 
> 时间：2012-06-29T18:46:04.083
> 
> 标签：javascript, jquery, html

如果我有以下 HTML：

```
<div style="display:none;">
    <span id="hello">Hey</span>
</div> 
```

我这样做`alert($("#hello").css("display"));`了，它会说“内联”。span 显然是不可见的，但由于它上面没有直接的`display:none;`属性，所以它仍然说它是可见的。

如何测试某个 DOM 元素是否实际可见，即使其父级或其父级的父级未显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:49:26.270

您可以使用：

```
if ($('#myitem').is(':visible')){

/*Do some sort of stuff in here */

} 
```

仍在动画的项目（如使用`.hide`or `.fadeOut`）将是“可见的”，直到动画完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T18:46:59.520

您可以使用[`:visible`](http://api.jquery.com/visible-selector/)选择器和[`is`](http://api.jquery.com/is/)方法：

```
if($("#hello").is(":visible")) {
    //It's visible!
} 
```

该`is`方法返回一个布尔值，指示是否*有任何*匹配的元素与该选择器匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T18:48:18.893

利用`$(selector).is('[:visible](http://api.jquery.com/visible-selector/)')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T18:48:48.083

将[.is() 函数](http://api.jquery.com/is/)与[:hidden](http://api.jquery.com/hidden-selector/)或[:visible](http://api.jquery.com/visible-selector/)伪选择器一起使用：

[http://jsfiddle.net/jbabey/ucSVx/](http://jsfiddle.net/jbabey/ucSVx/)

```
$('#hello').is(':hidden') 
```

# java - 在 XML 布局中使用自定义视图

> ID：11267338
> 
> 赞同：1
> 
> 时间：2012-06-29T18:46:21.937
> 
> 标签：java, android

我有一个自定义视图：

```
public class Loading extends View {

    private long movieStart;
    private Movie movie;

    public Loading(Context context, InputStream inputStream) {
        super(context);
        movie = Movie.decodeStream(inputStream);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.WHITE);
        super.onDraw(canvas);
        final long now = SystemClock.uptimeMillis();
        if(movieStart == 0)
            movieStart = now;
        final int relTime = (int)((now - movieStart) % movie.duration());
        movie.setTime(relTime);
        movie.draw(canvas, 0, 0);
        this.invalidate();
    }

} 
```

如何在 XML 布局中使用此视图？如何在 XML 布局中传递参数（上下文、输入流）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:52:11.173

```
How can I use this view in XML layout? 
```

..

```
 <pacakge_of_class.Loading 
            android:id="@+id/y_view1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" /> 
```

[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

当从代码和`form that is called when the view is inflated from a layout file. The second form should parse and apply any attributes defined in the layout file`.

```
How can I pass the parameters 
```

[https://stackoverflow.com/a/4495745/804447](https://stackoverflow.com/a/4495745/804447)

[在 layout/main.xml 中引用内部类视图时出错](https://stackoverflow.com/questions/2098318/error-referencing-an-inner-class-view-in-layout-main-xml)

```
<view class="Your_package.MainClass$Loading" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:55:20.363

简短的回答是你不能直接这样做。

长答案是你可以间接地做到这一点。

通过其完全限定名称（正如其他人提到的）将视图添加到 XML，然后：

What you need to do is implement the normal constructors from View. Define a custom attribute that declares the resource to use to create the InputStream in your constructor. The view system will give you the context automatically, you'd then need to open the InputStream based on the provided attribute value.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:02:21.093

You can use a custom View in an XML-Layout like this:

```
<com.your.package.Loading 
    android:id="@+id/y_view1"
    ... /> 
```

But you cannot use your own constructor, you have to use the constructors as shown in [this answer](https://stackoverflow.com/a/2888594/559745).

So you have to access your Loading View by code an set the InputStream manually:

```
Loading yourView = (Loading) findViewById(R.id.yourLoadingView);
yourView.setInputStream(); 
```

where you have this setter method in your `Loading` class:

```
public void setInputStream(InputStream inputStream){
    movie = Movie.decodeStream(inputStream);
} 
```

# oop - 接口因回调而臃肿

> ID：11267339
> 
> 赞同：2
> 
> 时间：2012-06-29T18:46:42.540
> 
> 标签：oop, design-patterns, interface, dependency-injection

想象以下类层次结构：

```
interface IRules
{
    void NotifyPickup(object pickedUp);
    void NotifyDeath();
    void NotifyDamage();
}

class CaptureTheFlag : IRules
{
    public void NotifyPickup(Pickup pickedUp)
    {
        if(pickedUp is Flag)
            GameOver();
    }

    public void NotifyDeath()
    {
    }

    public void NotifyDamage()
    {
    }
}

class DeathMatch : IRules
{
    public void NotifyPickup(Pickup pickedUp)
    {
        points++;
    }

    public void NotifyDeath()
    {
        lives--;
    }

    public void NotifyDamage()
    {
    }
}

class GameWorld
{
    IRules gameMode;

    public Main(IRules gameMode)
    {
        this.gameMode = gameMode;
    }

    object[] worldObjects;

    public void GameLoop()
    {
        foreach(object obj in worldObjects)
        {
            // This call may have a bunch of sideeffects, like getting a pickup
            // Or a player dying
            // Or damage being taken
            // Different game modes are interested in different events / statistics.
            obj.Update();

            // Stuff happens...
            gameMode.NotifyDamage();
            // Stuff happens...
            gameMode.NotifyDeath();
        }
    }
} 
```

所以这里我有一个包含 Notify* 功能的界面。这些是回调。不同的游戏模式对游戏的不同事件感兴趣。实际上不可能访问创建这些事件的具体对象，因为它们隐藏在 worldObjects 数组中。想象一下，我们正在为我们的游戏添加新的游戏模式。IRules 接口将变得非常臃肿，包含游戏模式可能感兴趣的所有可能的东西，并且大多数调用都将被存根！**我怎样才能防止这种情况？**

编辑2：具体示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:07:59.063

Seems like your `Process` logic sends out a lot of events. If you would give these events a name, you could subscribe your observers to them.

Then it would even be possible to create a 'filtering' observer that can forward the events to any other observer (a decorator pattern):

```
struct Event {
  enum e { A, B, /*...*/ };
  e name;
};

class IEventListener {
public:
   virtual void event( Event e ) = 0;
};

// an event dispatcher implementation:
using namespace std;

class EventDispatcher {
public:
   typedef std::shared_ptr<IEventListener> IEventListenerPtr;
   map<Event::e,vector<IEventListenerPtr>> listeners;

   void event(Event e){ 
      const vector<IEventListenerPtr> e_listeners=listeners[e.name].second;
      //foreach(begin(e_listeners)
      //       ,end(e_listeners)
      //       ,bind(IEventListener::event,_1,e));
      for(vector<IEventListenerPtr>::const_iterator it=e_listeners.begin()
         ; it!=e_listeners.end()
         ; ++it)
      {
        (*it)->event(e);
      }
   }
}; 
```

You program could look like this:

```
Main main;

EventEventDispatcher f1;

f1.listeners[Event::A].push_back(listener1);

main.listener=f1; 
```

Note: code untested - grab the idea.

If you really want to decouple the sender from the sink, you put an event system in between. The example given here is very dedicated and lightweight, but do sure take a look at various existing implementations: Signals and Slots implemented in [Qt](http://doc.qt.nokia.com/4.7-snapshot/signalsandslots.html) and in [Boost](http://www.boost.org/doc/libs/1_50_0/doc/html/signals.html), the delegates from C#, ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:50:01.927

如果我错过了什么，我会道歉，但为什么不使用事件？基本上让`IController`暴露`void Callback()`方法，然后 Main 将能够订阅任何回调到自己的事件：

```
class Main
{
    private event EventHandler SomeEvent;

    public Main(IController controller)
    {
        // use weak events to avoid memory leaks or
        // implement IDisposable here and unsubscribe explicitly
        this.SomeEvent += controller.Callback;
    }

    public void ProcessStuff()
    {
        // invoke event here
        SomeEvent();
    }        
} 
```

* * *

# 编辑：

这就是我要做的：将每个规则动作提取到单独的接口中，这样你就可以在具体的类中实现你需要的东西，例如`CaptureTheFlag`类现在只做`PickupFlag`动作所以不需要伤害/死亡方法，所以只需标记`IPickupable`就可以了. 然后只需检查具体实例是否支持具体操作并继续执行。

```
interface IPickupable
{
    void NotifyPickup(object pickedUp);
}

interface IDeathable
{
    void NotifyDeath();
}

interface IDamagable
{
    void NotifyDamage();
}    

class CaptureTheFlag : IPickupable
{
    public void NotifyPickup(Pickup pickedUp)
    {
        if (pickedUp is Flag)
            GameOver();
    }
}

class DeathMatch : IPickupable, IDeathable
{
    public void NotifyPickup(Pickup pickedUp)
    {
        points++;
    }

    public void NotifyDeath()
    {
        lives--;
    }
}

class GameWorld
{
    public void GameLoop()
    {       
        foreach(object obj in worldObjects)     
        {
            obj.Update();
            IPickupable pickupable = gameMode as IPickupable;
            IDeathable deathable = gameMode as IDeathable; 
            IDamagable damagable = gameMode as IDamagable;
            if (pickupable != null)
            {
                pickupable.NotifyPickup();
            }

            if (deathable != null)
            {
                deathable.NotifyDeath();
            }

            if (damagable != null)
            {
                damagable.NotifyDamage();
            }                      
         }
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:34:24.007

我的最终解决方案是 xtofl 发布的 C# 等价物。我创建了一个类，其中存储了一堆代表。这些委托从默认值开始（因此它们永远不会为空），不同的具体 IRules 类可以选择是否覆盖它们。这比抽象或存根方法更有效，因为它不会用不相关的方法阻塞接口。

```
class GameEvents
{
    public Action<Player> PlayerKilled = p => {};
    public Func<Entity, bool> EntityValid = e => true;
    public Action ItemPickedUp = () => {};
    public Action FlagPickedUp = () => {};
}

class IRules
{
    GameEvents Events { get; }
}

class CaptureTheFlag : IRules
{
    GameEvents events = new GameEvents();
    public GameEvents Events
    {
        get { return events; }
    }

    public CaptureTheFlag()
    {
        events.FlagPickedUp = FlagPickedUp;
    }

    public void FlagPickedUp()
    {
        score++;
    }
} 
```

每个规则集都可以选择它想要监听的事件。游戏只需调用 Rules.Events.ItemPickedUp();。它保证永远不会为空。

感谢 xtofl 的想法！

# desire2learn - 如何从 Desire2Learn API 获取组织名称？

> ID：11267341
> 
> 赞同：0
> 
> 时间：2012-06-29T18:46:49.517
> 
> 标签：desire2learn

如何从 Desire2Learn API 获取组织名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:48:01.263

[为组织信息](http://docs.valence.desire2learn.com/res/orgunit.html#get--d2l-api-lp-%28D2LVERSION-version%29-organization-info)返回的 json 的名称属性具有名称。

# wpf - 从 WPF 应用程序拖放到 Excel

> ID：11267342
> 
> 赞同：2
> 
> 时间：2012-06-29T18:46:54.643
> 
> 标签：wpf, excel

我的 WPF 应用程序由一些文本框和列表视图组成。我想实现从我的应用程序到 MS Excel Cell 的拖放功能。我想将一些文本数据从 WPF 应用程序拖到 Excel 单元格中。

我知道如何从 Source 实现 Drag 事件。但我不知道如何在 Excel 中实现 DragEnter、DragOver、DragLeave 或 Drop 事件。

这个你能帮我吗。

谢谢

# ruby-on-rails-3 - 基于参数的 Rails 路由

> ID：11267343
> 
> 赞同：4
> 
> 时间：2012-06-29T18:46:57.460
> 
> 标签：ruby-on-rails-3, routes

我正在开发一个 Rails 应用程序，我正在寻找一种方法来根据 url 中是否存在参数来路由到控制器中的不同操作。

例如，我想`website.com/model`路由到`model#index`，但是我想`website.com/model?opt=dev`路由到`model#show`。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:26:17.580

使用路由约束查看请求对象，看看它是否有 URL 参数。如果您使用的是宁静路线，则希望将此“一次性”放在宁静路线之前。像这样的东西：

```
get 'users' => 'users#show', constraints: { query_string: /.+/ }
resources :users 
```

所以这就是说，如果您请求“/users?opt=dev”，那么它将与您的特殊情况相匹配。否则，它会通过您正常的宁静路线到达索引操作。然后，您的 model#show 操作将必须知道拿起 param[:opt] 并对其进行任何处理。

另外，请注意，正则表达式非常松散，它只是检查任何参数......你需要收紧它以适应你想要做的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T06:59:56.123

不完全一样，但是如果你来到这篇文章并且想知道如何通过 POST 来做同样的事情，那么你可以根据 request_paramters 来做。

为您的路线.rb ..

```
module MyConstraintName  
extend self
  def matches?(request)
    request.request_parameters["routeFlag"] == "routeToModelShow"
  end
end

match "pages/:id", :via=>:post, :controller=>"model", :action=>"show",  :constraints => MyConstraintName 
```

并以您的形式例如..

```
<%= hidden_field_tag :routeFlag, "routeToModelShow" %> 
```

# python - Python 解释模型与直接编译和虚拟机编译的比较

> ID：11267347
> 
> 赞同：0
> 
> 时间：2012-06-29T18:47:09.753
> 
> 标签：python, compiler-construction, scripting, interpreter, vm-implementation

我一直在[编译图表](https://stackoverflow.com/questions/11253303/how-does-the-java-runtime-environment-compare-with-the-net-framework-in-terms-o)（双关语），希望了解常见编程语言的不同实现。我了解代码是编译还是解释取决于代码的实现，而不是编程语言本身的一个方面。

我有兴趣将 Python 解释与直接编译（前 C++）进行比较

[![在此处输入图像描述](../Images/89b295ed34663e88c7231748c2c88ba4.png)](https://i.stack.imgur.com/YEkNm.png)

和虚拟机模型（例如 Java 或 C#）

[![在此处输入图像描述](../Images/3a43276371bd0868a7c6112acbce7600.png)](https://i.stack.imgur.com/sxsw2.png)

根据上面的这两个图，请你帮我开发一个类似的流程图，说明如何将 .py 文件转换为 .pyc，使用标准库（我认为它们称为模块）然后实际运行。SO 上的许多程序员表示，作为脚本语言的 python 不是由 CPU 执行，而是由解释器执行，但这听起来很不可能，因为最终必须由硬件进行计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:42:18.553

首先，这是一个实现细节。我将我的答案限制在 CPython 和 PyPy 上，因为我熟悉它们。Jython、IronPython 和其他实现的答案会有所不同——可能根本不同。

Python 更接近于“虚拟机模型”。Python 代码，与一些对他们的知识水平来说太大声的人的陈述相反，尽管每个人（包括我）在随意的讨论中都将它混为一谈，但从未被解释过。它在加载时*总是被编译成字节码（同样，在 CPython 和 PyPy 上）。*如果它是因为模块被导入并从 .py 文件加载而被加载的，则可能会创建一个 .pyc 文件来缓存编译输出。此步骤不是强制性的；您可以通过各种方式将其关闭，并且程序执行不会受到任何影响（除非下一个加载模块的过程必须再次执行）。但是，编译成字节码是不可避免的，如果不是从磁盘加载，字节码是在内存中生成的。

然后在模块级别执行此字节码（其确切细节是实现细节并且版本之间不同），这需要构建函数对象、类对象等。这些对象只是重用（持有指向）已经在内存中的字节码。这与 C++ 和 Java 不同，其中代码和类在编译期间/之后是一成不变的。在执行过程中，`import`可能会遇到语句。我缺乏篇幅、时间和理解来描述进口机械，但简短的故事是：

*   如果它已经被导入一次，您将获得该模块对象（静态语言仅在编译时具有的另一个运行时构造）。在任何 Python 代码运行之前，已经导入了几个内置模块（好吧，它们都在 PyPy 中，原因超出了这个问题的范围），这仅仅是因为它们与解释器的核心紧密集成并且非常基础。`sys`就是这样一个模块。一些 Python 代码也可以预先运行，尤其是当您启动交互式解释器时（查找`site.py`）。
*   否则，模块被定位。这方面的规则不是我们关心的。最后，这些规则到达 Python 文件或动态链接的机器代码片段（Windows 上的 .DLL，虽然 Python 模块专门使用扩展名 .pyd 但这只是一个名称；在 unix 上使用等效的 .so ）。
    *   模块首先加载到内存中（动态加载，或解析并编译为字节码）。
    *   然后，模块被初始化。扩展模块对被调用的对象有一个特殊的功能。Python 模块只是从上到下运行。在表现良好的模块中，这只是设置全局数据、定义函数和类以及导入依赖项。当然，其他任何事情也可能发生。生成的模块对象被缓存（记住第一步）并返回。

所有这些都适用于标准库模块以及第三方模块。这也是为什么如果您调用您的脚本就像您在该脚本中导入的标准库模块一样调用您的脚本（它会自行导入，尽管不会由于缓存而崩溃 - 这是我忽略的许多事情之一），您可能会收到一条令人困惑的错误消息。

字节码的执行方式（问题的最后一部分）不同。CPython 只是简单地解释它，但正如您正确指出的那样，这并不意味着它神奇地不使用 CPU。取而代之的是一个大而丑陋的循环，它检测接下来应该执行什么字节码指令，然后跳转到一些执行该指令语义的本机代码。PyPy 更有趣；它开始解释但沿途记录一些统计数据。当它认为值得这样做时，它开始详细记录解释器所做的事情，并生成一些高度优化的本机代码。解释器仍然用于 Python 代码的其他部分。请注意，它与许多 JVM 和可能的 .NET 相同，但您引用的图表掩盖了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T18:58:57.513

对于python的参考实现：

(.py) -> python (检查 .pyc) -> (.pyc) -> python (执行动态加载模块)

还有[其他实现](http://wiki.python.org/moin/PythonImplementations)。最值得注意的是：

*   [jython](http://www.jython.org/)将 (.py) 编译为 (.class) 并从那里遵循 java 模式
*   [pypy](http://pypy.org/)在编译时使用[JIT](http://en.wikipedia.org/wiki/Just-in-time_compilation) (.py)。那里的链可能会有所不同（pypy 可以在 cpython、jython 或 .net 环境中运行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:58:31.663

Python 从技术上讲是一种脚本语言，但它也是经过编译的，python 源代码从其源文件中获取并输入解释器，解释器通常在内部将源代码编译为字节码，然后将其丢弃或在外部将其像 .pyc 一样保存

是的，python 是单个虚拟机，然后位于实际硬件之上，但所有 python 字节码都是 pvm（python 虚拟机）的一系列指令，就像实际 CPU 的汇编程序一样。

# haskell - 是否可以从 Hackage 查看软件包下载统计信息？

> ID：11267351
> 
> 赞同：7
> 
> 时间：2012-06-29T18:47:43.290
> 
> 标签：haskell, cabal, hackage

似乎有时会发布一些报告，详细说明一些顶级软件包的下载（[http://haskellwebnews.wordpress.com/2011/03/16/hackage-stats-the-past-year/](http://haskellwebnews.wordpress.com/2011/03/16/hackage-stats-the-past-year/)）。

是否可以查看单个软件包的更新统计信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T19:24:38.687

仅来自那些帖子。apache 日志不公开。

# css - 互联网浏览器 CSS

> ID：11267352
> 
> 赞同：0
> 
> 时间：2012-06-29T18:47:45.237
> 
> 标签：css, internet-explorer-9, drop-down-menu

我在一个网站上有一个下拉菜单，它可以在除 Internet Explorer 之外的所有浏览器上完美运行。有没有办法只为 Internet Explorer 关闭它？我尝试使用

```
-ms-display:none; 
```

（我不知道这是否真的有效）但这是我唯一的想法。有任何想法吗？

```
<div style="float:left;">
<ul id="nav" class="dropdown dropdown-linear dropdown-columnar">
    <a href="http://www.redballoontoystore.com/index.php"><li>Home</li></a>
    <a href="http://www.redballoontoystore.com/products/index.php"><li class="dir">Toys
        <ul>
            <li class="dir"><a href="http://www.redballoontoystore.com/buckyballs/index.php">Buckyballs</a></li>
            <li class="dir"><a href="http://www.redballoontoystore.com/calicocritters/index.php">Calico Critters</a></li>
            <li class="dir"><a href="http://www.redballoontoystore.com/games/index.php">Games</a></li>
            <li class="dir"><a href="http://www.redballoontoystore.com/magnetics/index.php">Magnetics</a></li>
            <li class="dir"><a href="http://www.redballoontoystore.com/outdoor/index.php">Outdoor</a></li>
            <li class="dir"><a href="http://www.redballoontoystore.com/playmobil/index.php">Playmobil</a></li>
            <li class="dir"><a href="http://www.redballoontoystore.com/quercetti/index.php">Quercetti</a></li>
            <li class="dir"><a href="http://www.redballoontoystore.com/science/index.php">Science</a></li>
        </ul>
    </li></a>
    <a href="http://www.redballoontoystore.com/calendar/index.php"><li>Calendar</li></a>
    <a href="http://www.redballoontoystore.com/aboutus/index.php"><li>About Us</li></a>
    <a href="http://www.redballoontoystore.com/storeinfo/index.php"><li>Store Info</li></a>
    <a href="mailto:management@redballoontoystore.com"><li>Contact Us</li></a>
</ul> 
```

```
ul.dropdown {
font: bold 15px/normal Arial, Helvetica, sans-serif; /*make sure to change ul.dropdown a:link, ul.dropdown a:visited, etc, when changing this line*/
 /*letter-spacing: -2px;*/
 text-transform: uppercase;
}

ul.dropdown li {
 padding: 0 10px;
 background-color: transparent;
 color: #c00;
}

ul.dropdown li.last ul li {
 float: right;
}

ul.dropdown a li.hover,
ul.dropdown a li:hover {
 background-color: #cc0000;
 color: #fff;
 border-radius: 4px;
}

ul.dropdown a:link,
ul.dropdown a:visited   { color: #c00; text-decoration: none; font: bold 15px/normal Arial, Helvetica, sans-serif; }
ul.dropdown a:hover     { color: #fff; font: bold 15px/normal Arial, Helvetica, sans-serif;}
ul.dropdown a:active    { color: #ffa500; font: bold 15px/normal Arial, Helvetica, sans-serif;}

/* -- level mark -- */

ul.dropdown ul {
 background-color: #cc0000;
 border-radius: 4px 4px 4px 4px;
 font-size: 12px;
 letter-spacing: normal;
 box-shadow: 0 3px 2px black;
 -ms-display:none;
}

* html ul.dropdown ul {
 width: 960px;
}

    ul.dropdown ul li {
     font-weight: bold;
     box-shadow: none;
     color: #fff;
    }

    /* -- level mark -- */

    ul.dropdown ul ul {
     margin-top: 5px;
     text-transform: none;
     box-shadow: none;
    }

        ul.dropdown ul ul li {
         font-weight: normal;
        }

ul.dropdown *.dir {
 padding-right: 30px;
     /*background-image: url(../../../../images/lwis.celebrity/nav-arrow-down.png);*/
 background-position: 100% 50%;
 background-repeat: no-repeat;
}

ul.dropdown li.hover,
    ul.dropdown li:hover.dir {
 border-radius: 4px 4px 0 0;
}

ul.dropdown ul *.dir {
 background-image: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:52:36.680

您可以尝试使用条件注释来避免 IE 执行代码：

```
<![if !IE]>

Your code

<![endif]> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:57:06.320

也总是有 IE css hacks。虽然它们不是可取的，但如果它只是一个真正快速和肮脏的东西，并且您需要针对 IE7 及以下版本，您可以在属性前面放置一个 * 。

例子：

```
div.box {
    display: inline-block;
    *display: inline;
} 
```

这只会在 IE7 及更低版本中显示内联。

# c# - 如何使用 MVC HTML 编辑器模板生成非顺序前缀集合索引？

> ID：11267354
> 
> 赞同：2
> 
> 时间：2012-06-29T18:47:46.820
> 
> 标签：c#, asp.net-mvc, editorfor, asp.net-mvc-templates

下面的代码已经被精简了很多，但基本上我想要实现的目标如下：

我希望能够编辑问题及其包含的答案选择，同时能够从页面中动态添加/删除问题/答案选择。理想情况下，我的项目的 HtmlFieldPrefix 将是非顺序的，但 Html.EditorFor() 使用顺序索引。

我有一个问题 ViewModel，其中包含一个 IEnumerable 的答案选择：

```
public class QuestionViewModel
{
    public int QuestionId { get; set; }
    public IEnumerable<AnswerChoiceViewModel> AnswerChoices { get; set; }
} 
```

在我的问题部分视图（Question.ascx）中，我有这个：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Models.QuestionViewModel>" %>

<%=Html.HiddenFor(m => m.QuestionId)%>
<%=Html.EditorFor(m => m.AnswerChoices) %> 
```

答案选择编辑器模板 (AnswerChoiceViewModel.ascx)：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<Models.AnswerChoiceViewModel>" %>

<%=Html.HiddenFor(m => m.AnswerChoiceId)%>
<%=Html.TextBoxFor(m => m.Name)%> 
```

当我渲染 Question.ascx 时，输出将如下所示：

```
<input type="hidden" id="QuestionId" value="1" />
<input type="hidden" id="Question.AnswerChoices[0].AnswerChoiceId" value="1" />
<input type="hidden" id="Question.AnswerChoices[0].Name" value="Answer Choice 1" />

<input type="hidden" id="QuestionId" value="2" />
<input type="hidden" id="Question.AnswerChoices[1].AnswerChoiceId" value="2" />
<input type="hidden" id="Question.AnswerChoices[1].Name" value="Answer Choice 2" /> 
```

我想知道的是如何提供 EditorFor 自定义 GUID 索引，以便页面呈现如下：

```
<input type="hidden" id="QuestionId" value="1" />
<input type="hidden" id="Question.AnswerChoices[e1424d5e-5585-413c-a1b0-595f39747876].AnswerChoiceId" value="1" />
<input type="hidden" id="Question.AnswerChoices[e1424d5e-5585-413c-a1b0-595f39747876].Name" value="Answer Choice 1" />

<input type="hidden" id="QuestionId" value="2" />
<input type="hidden" id="Question.AnswerChoices[633db1c3-f1e6-470b-9c7f-c138f2d9fa71].AnswerChoiceId" value="2" />
<input type="hidden" id="Question.AnswerChoices[633db1c3-f1e6-470b-9c7f-c138f2d9fa71].Name" value="Answer Choice 2" /> 
```

我已经编写了一个辅助方法，它将获取当前上下文的前缀索引并将其存储在隐藏的“.Index”字段中，以便可以正确绑定非顺序索引。只想知道 EditorFor 如何分配索引，以便我可以覆盖它（或任何其他工作解决方案）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:13:50.723

之前我解决了这个问题并遇到了 S. Sanderson（Knockoutjs 的创建者）的一篇文章，他描述并解决了类似的问题。我使用了他的部分代码并尝试对其进行修改以满足我的需要。我将下面的代码放在某个类中（例如：Helpers.cs），在 web.config 中添加命名空间。

```
 #region CollectionItem helper
    private const string idsToReuseKey = "__htmlPrefixScopeExtensions_IdsToReuse_";

    public static IDisposable BeginCollectionItem(this HtmlHelper html, string collectionName)
    {
        var idsToReuse = GetIdsToReuse(html.ViewContext.HttpContext, collectionName);
        string itemIndex = idsToReuse.Count > 0 ? idsToReuse.Dequeue() : Guid.NewGuid().ToString();

        // autocomplete="off" is needed to work around a very annoying Chrome behaviour whereby it reuses old values after the user clicks "Back", which causes the xyz.index and xyz[...] values to get out of sync.
        html.ViewContext.Writer.WriteLine(string.Format("<input type=\"hidden\" name=\"{0}.index\" autocomplete=\"off\" value=\"{1}\" />", collectionName, itemIndex));

        return BeginHtmlFieldPrefixScope(html, string.Format("{0}[{1}]", collectionName, itemIndex));
    }

    public static IDisposable BeginHtmlFieldPrefixScope(this HtmlHelper html, string htmlFieldPrefix)
    {
        return new HtmlFieldPrefixScope(html.ViewData.TemplateInfo, htmlFieldPrefix);
    }

    private static Queue<string> GetIdsToReuse(HttpContextBase httpContext, string collectionName)
    {
        // We need to use the same sequence of IDs following a server-side validation failure,  
        // otherwise the framework won't render the validation error messages next to each item.
        string key = idsToReuseKey + collectionName;
        var queue = (Queue<string>)httpContext.Items[key];
        if (queue == null)
        {
            httpContext.Items[key] = queue = new Queue<string>();
            var previouslyUsedIds = httpContext.Request[collectionName + ".index"];
            if (!string.IsNullOrEmpty(previouslyUsedIds))
                foreach (string previouslyUsedId in previouslyUsedIds.Split(','))
                    queue.Enqueue(previouslyUsedId);
        }
        return queue;
    }

    private class HtmlFieldPrefixScope : IDisposable
    {
        private readonly TemplateInfo templateInfo;
        private readonly string previousHtmlFieldPrefix;

        public HtmlFieldPrefixScope(TemplateInfo templateInfo, string htmlFieldPrefix)
        {
            this.templateInfo = templateInfo;

            previousHtmlFieldPrefix = templateInfo.HtmlFieldPrefix;
            templateInfo.HtmlFieldPrefix = htmlFieldPrefix;
        }

        public void Dispose()
        {
            templateInfo.HtmlFieldPrefix = previousHtmlFieldPrefix;
        }
    }

    #endregion 
```

之后你可以像这样拥有 EditorTemplate 或部分

```
@using (Html.BeginCollectionItem("AnswerChoices"))
{
@Html.HiddenFor(m => m.AnswerChoiceId)
@Html.TextBoxFor(m => m.Name)
} 
```

并枚举您的列表渲染模板（部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-14T17:59:48.873

我花了更长的时间才弄清楚这一点。每个人都在努力做到这一点。秘诀就是这四行代码：

```
 @{
            var index = Guid.NewGuid();
            var prefix = Regex.Match(ViewData.TemplateInfo.HtmlFieldPrefix, @"^(.+)\[\d+\]$").Groups[1].Captures[0].Value;
            //TODO add a ton of error checking and pull this out into a reusable class!!!!
            ViewData.TemplateInfo.HtmlFieldPrefix = prefix + "[" + index + "]";
        }
        <input type="hidden" name="@(prefix).Index" value="@index"/>
```

现在，这是在做什么？我们得到一个新的 guid，这是我们用来替换自动分配的整数的新索引。接下来，我们获取默认字段前缀，并去掉我们不想要的 int 索引。在确认我们已经产生了一些技术债务之后，我们会更新视图数据，以便所有 editorfor 调用现在都使用它作为新前缀。最后，我们添加一个输入，该输入被回发到模型绑定器，指定它应该用来将这些字段绑定在一起的索引。

这种魔法需要在哪里发生？在您的编辑器模板中：/Views/Shared/EditorTemplates/Phone.cshtml

```
@using TestMVC.Models
@using System.Text.RegularExpressions
@model Phone
    <div class="form-horizontal">
        <hr />
        @{
            var index = Guid.NewGuid();
            var prefix = Regex.Match(ViewData.TemplateInfo.HtmlFieldPrefix, @"^(.+)\[\d+\]$").Groups[1].Captures[0].Value;
            //TODO add a ton of error checking and pull this out into a reusable class!!!!
            ViewData.TemplateInfo.HtmlFieldPrefix = prefix + "[" + index + "]";
        }
        <input type="hidden" name="@(prefix).Index" value="@index"/>
        <div class="form-group">
            @Html.LabelFor(model => model.Number, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Number, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Number, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.IsEnabled, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <div class="checkbox">
                    @Html.EditorFor(model => model.IsEnabled)
                    @Html.ValidationMessageFor(model => model.IsEnabled, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Details, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextAreaFor(model => model.Details, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Details, "", new { @class = "text-danger" })
            </div>
        </div>
    </div>
```

编辑器模板？什么？！如何？！只需使用文件名的对象名称将其放在上面提到的目录中。让 MVC 约定发挥它的魔力。从您的主视图中，只需为该 IEnumerable 属性添加编辑器：

```
<div class="form-group">
@Html.LabelFor(model => model.Phones, htmlAttributes: new { @class = "control-label col-md-2" })
<div class="col-md-10">
    @Html.EditorFor(model => model.Phones, new { htmlAttributes = new { @class = "form-control" } })
</div>
</div>
```

现在，回到您的控制器中，确保更新您的方法签名以接受该 ienumerable（绑定包含电话）：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Create([Bind(Include = "ContactId,FirstName,LastName,Phones")] Contact contact)
    {
        if (ModelState.IsValid)
        {

            db.Contacts.Add(contact);
            db.SaveChanges();
            //TODO need to update this to save phone numbers
            return RedirectToAction("Index");
        }

        return View(contact);
    } 
```

您如何在页面上添加和删除它们？添加一些按钮，绑定一些 JavaScript，向控制器添加一个方法，该方法将返回该模型的视图。Ajax 回来抓取它并将其插入到页面中。我会让你解决这些细节，因为现在工作很忙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:07:46.813

`Html.EditorFor` is nothing else as a so called Html helper method, which renders `input` with all apropriate attributes.

The only solution which comes me to mind is to write the own one. It must be pretty simple - 5-10 lines ling. Take a look at this [Creating Custom Html Helpers Mvc](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T19:08:01.470

Steve Sanderson has provided a [simple implementation](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/) that may do what you're looking for. I recently started using it myself; it is not perfect, but it does work. You have to do a little magic-stringing to use his `BeginCollectionItem` method, unfortunately; I'm trying to workaround that myself.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T19:14:19.787

另一种选择是像这样覆盖 id 属性：

`@Html.TextBoxFor(m => m.Name, new { id = @guid })`

# python - 在 Python 中将文件复制为不同的 AD 组用户

> ID：11267362
> 
> 赞同：0
> 
> 时间：2012-06-29T18:48:09.237
> 
> 标签：python, active-directory

我正在尝试在 Python 中创建一个工具，该工具将为非开发人员提取存档的 XML。以下是一些给定的：

*   我们属于不同的 Active Directory 组（例如开发人员和分析师）
*   文件存储在多个删除服务器上（例如 Dev、QA、PROD）
*   我可以访问所有这些，但他们没有（看起来企业不允许改变）

我想做的是让 Python 像我一样复制 XML 文件。有没有办法做到这一点？复制文件的调用会传递我的凭据而不是他们的凭据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:33:51.853

您需要成为管理员（更准确地说，有权模拟其他用户）。然后您可以像这样在不同的域用户下执行应用程序：

```
handle = win32security.LogonUser('analystuser', 'mydomainname', 'password', win32con.LOGON32_LOGON_INTERACTIVE, win32con.LOGON32_PROVIDER_DEFAULT)
win32process.CreateProcessAsUser(handle, None, 'myapp.exe', None, None, 0, 0, None, None, win32process.STARTUPINFO()) 
```

但是，您可能没有这种特权，这就是故事的结局。

# ios - GLKView + CIImage with Alpha + AVFoundation = Trippy Mess

> ID：11267367
> 
> 赞同：2
> 
> 时间：2012-06-29T18:48:30.517
> 
> 标签：ios, avfoundation, core-image, glkit

我正在使用 AVFoundation 从相机捕获信息，将其传递给 CIFilter 以用 alpha 级别为 0 的像素替换较暗的像素，并将其显示在 GLKView 上。

包含的视图控制器是一个 GLKViewController 但程序的核心从函数开始：

```
-(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection {
    @autoreleasepool {

        CVPixelBufferRef pixelBuffer = (CVPixelBufferRef)CMSampleBufferGetImageBuffer(sampleBuffer);

                CIImage *image = [CIImage imageWithCVPixelBuffer:pixelBuffer options:[NSDictionary dictionaryWithObject:(id)kCFNull forKey:kCIImageColorSpace]];

        image = [image imageByApplyingTransform:CGAffineTransformMakeRotation(-M_PI/2.0)];

        CGPoint origin = [image extent].origin;
        image = [image imageByApplyingTransform:CGAffineTransformMakeTranslation(-origin.x, -origin.y)];

        [self.replaceDarkColorWithTransparentFilter setValue:image forKey:@"inputImage"];

        image = self.replaceDarkColorWithTransparentFilter.outputImage;

        [self.ciContext drawImage:image inRect:CGRectMake(0.0f, 0.0f, 480.0f, 640.0f) fromRect:[image extent]];
        [self.eaglContext presentRenderbuffer:GL_RENDERBUFFER];

        [self.replaceDarkColorWithTransparentFilter setValue:nil forKey:@"inputImage"];
    }
} 
```

在 GLKViewController 中，我使用以下方法初始化渲染缓冲区：

```
glGenRenderbuffers(1, &_renderBuffer);
glBindRenderbuffer(GL_RENDERBUFFER, _renderBuffer); 
```

结果是旧图像没有被清除和显示。结果如下所示：[http](http://d.pr/i/M02z) ://d.pr/i/M02z这正常吗？不应该清除旧的上下文并重新开始吗？

我尝试`glFlush();`过更新并`glkView:(GLKView *)view drawInRect:(CGRect)rect`尝试为 CIContext 中的图像绘制 nil 无济于事。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:28:37.783

您将需要使用以下代码清除帧缓冲区的先前内容

```
glClearColor(0.0, 0.0, 0.0, 0.0);
glClear(GL_COLOR_BUFFER_BIT); 
```

在绘制新的 Core Image 框架之前的某个时间点。这会将帧缓冲区的内容和 alpha 通道设置为 0.0，从而为您提供一个干净的石板，在上面绘制过滤后的图像。

您可能还需要使用类似的方法设置当前的 OpenGL ES 上下文

```
[EAGLContext setCurrentContext:self.openGLESContext]; 
```

在那之前，因为我不记得 Core Image 是否会为您正在处理的任何线程正确保留该设置。

# r - 如何从 elrm 汇总输出中提取系数

> ID：11267376
> 
> 赞同：4
> 
> 时间：2012-06-29T18:49:07.830
> 
> 标签：r, extraction, statistics-bootstrap

我使用包对我的数据集进行了精确的逻辑回归`elrm`

我将它与普通的逻辑回归进行比较。

我能够在普通逻辑回归上运行引导程序，我提取的感兴趣的统计数据是估计系数和 p 值。

但是，我无法运行我的 elrm 引导程序，因为我无法从输出中提取所需的系数。

使用我的数据，摘要会打印出来：

```
Results:
   estimate p-value p-value_se mc_size
M  0.15116 0.06594    0.00443   49000

95% Confidence Intervals for Parameters

     lower     upper
M 0.00156155 0.3647232 
```

我想提取 M 估计值和 p 值，以便在进行引导时提取这些统计信息。我尝试了一堆不同的组合来尝试提取值，但它们不起作用。

```
summary(model)$coefficient 
summary(model)$Results
summary(model)$estimate 
```

所有这些只是再次吐出摘要。

有谁知道是否可以从 elrm 摘要中提取？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:07:51.267

```
library(elrm)
data(drugDat)
drug.elrm <- elrm(formula=recovered/n~sex+treatment,interest=~sex+treatment,r=4, 
    iter=100000,burnIn=1000,dataset=drugDat)

> summary.elrm(drug.elrm)

Call:
[[1]]
elrm(formula = recovered/n ~ sex + treatment, interest = ~sex + 
    treatment, r = 4, iter = 1e+05, dataset = drugDat, burnIn = 1000)

Results:
          estimate p-value p-value_se mc_size
joint           NA 0.14886    0.00173   99000
sex        0.27092 0.69385    0.01204    2649
treatment  0.76739 0.07226    0.00314   13160

95% Confidence Intervals for Parameters

               lower    upper
sex       -0.6217756 1.212499
treatment -0.1216884 1.852346

# If you look at the summary function, it simply outputs formatted results to
# the screen. So instead, we can just work with the original drug.elrm object

names(drug.elrm)
# shows you everything in this object

# to see the p-values
drug.elrm$p.values.se
      joint         sex   treatment 
0.001734482 0.012039701 0.003143006 

# to get the p-value for joint
drug.elrm$p.values.se[[1]]

# now for the CI
drug.elrm$coeffs.ci
               lower    upper
sex       -0.6217756 1.212499
treatment -0.1216884 1.852346

> drug.elrm$coeffs.ci[[1]]
[1] -0.6217756 -0.1216884
> drug.elrm$coeffs.ci[[1]][1]
[1] -0.6217756
> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:14:38.083

看起来 p 值和置信区间是作为模型对象本身的一部分存储的。该`summary.elrm`功能只是为您提取和格式化一些信息。我展示了我用来解决这个问题的以下步骤，但摘要版本是分别索引到您的模型对象`object$p.values`本身`object$coeffs.ci`。

```
#Example from help page
data(utiDat) 
uti.elrm <- elrm(uti/n~age+current+dia+oc+pastyr+vi+vic+vicl+vis,
                 interest=~dia,r=4,iter=5000,burnIn=1000,dataset=utiDat)
#Look at summary
summary(uti.elrm)
#Let's examine the structure of the summary object to see what's in there, i.e.
#what can we extract?
str(summary(uti.elrm))
#Hmm, doesn't look like anything of interest. Let's look at the source code itself
summary.elrm
#Looks like the p.values are stored in the actual model object iself and the summary function
#just formats them for us. The relevant part of the summary code for the p-value is:
#-----
  #inferences = as.data.frame(cbind(round(as.numeric(object$coeffs),5), 
  #                                 round(as.numeric(object$p.values), 5), 
  #                                 round(as.numeric(object$p.values.se),5),
  #                                 object$mc.size)
  #                           )
  #results = data.frame(row.names = names(object$coeffs), inferences)
  #names(results) = c("estimate", "p-value", "p-value_se", "mc_size")
#So, it looks like we can grab the p.values directly from "object"
> uti.elrm$p.values
dia 
0.02225
#And the confidence intervals are also in the object, located here in the summary code:
#-----
  #cat(object$ci.level, "% Confidence Intervals for Parameters\n", 
  #    sep = "")
  #cat("\n")
  #print(object$coeffs.ci)
#So we can extract them thusly:
> uti.elrm$coeffs.ci
lower upper
dia 0.1256211   Inf 
```

# ruby-on-rails - Rails 3 为生产中的资产提供服务

> ID：11267378
> 
> 赞同：2
> 
> 时间：2012-06-29T18:49:28.187
> 
> 标签：ruby-on-rails, assets, production

使用 Rails 3.2.2 和 ruby​​ 1.9.2，我无法在生产中提供资产。我们在apache上运行。我已经阅读了一些文档并设置：

```
config.serve_static_assets = true
config.assets.compile = true 
```

在production.rb中，它似乎不起作用。我还能尝试什么？或者我怎样才能获得一些关于它在哪里寻找的调试信息。

另外，我回到开发，进入资产/图像并删除 .png 文件以故意破坏开发环境中的东西，但它没有用，图像仍然出现。必须对资产进行一些预编译，但是它们存储在哪里，我该如何清除呢？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:03:33.843

通常，如果您的 Rails 服务器前面有 Apache，您不希望您的应用程序在生产环境中编译资产。您可能想要预编译资产并让 Apache 为它们提供服务。

编译的资产默认存储在 public/assets 中。

所有这些如何结合在一起取决于您尚未共享的配置的详细信息。我建议阅读资产管道上的 Rails 指南：

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

特别是：

[http://guides.rubyonrails.org/asset_pipeline.html#in-production](http://guides.rubyonrails.org/asset_pipeline.html#in-production)

它甚至有一些关于如何配置 Apache 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:23:22.110

在`config/application.rb`：

```
config.assets.enabled = true 
```

# wpf - 子菜单的 WPF 父级在 WinXP 中未正确对齐

> ID：11267380
> 
> 赞同：1
> 
> 时间：2012-06-29T18:49:29.657
> 
> 标签：wpf, menu, windows-xp, alignment

当我`MenuItem`在 WPF 中`MenuItem`嵌套了一个 s 列表时，它会抛出父级的对齐。但这仅在 Windows XP 中，在 Windows 7 中一切正常。我认为这是因为它在右侧绘制和箭头，由于某种原因会导致对齐关闭。

它看起来像什么：

![在此处输入图像描述](../Images/7285cbaedd782a236389c10315b268d0.png)

它需要看起来像什么，但带有箭头和所有内容：

![在此处输入图像描述](../Images/79e520366dc99ea036e5717bec591c4f.png)

# javascript - Javascript 在数组对象中移动 .active 类

> ID：11267383
> 
> 赞同：3
> 
> 时间：2012-06-29T18:49:51.063
> 
> 标签：javascript, html, dom

如果我有一个包含四个图像的 div

```
<div id='imgs' class='sectionImage'>
    <img id='imgj1' imgn='1' class='carouselImage carouselActive' src='img/image1.jpg'/>
    <img id='imgj2' imgn='2' class='carouselImage' src='img/image2.jpg'/>
    <img id='imgj3' imgn='3' class='carouselImage' src='img/image3.jpg'/>
    <img  id='imgj4' imgn='4'class='carouselImage' src='img/image4.jpg'/>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我将如何设置一个数组和函数以通过将活动类移动到下一个图像并继续循环来滚动数组中的四个图像？请只使用 Javascript...没有库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:06:14.337

定义两个函数：一个用于下一个，一个用于上一个：

```
 function gotoNext() {
        var active = document.querySelector(".carouselImage.carouselActive");  //select active image
        if (active == null) { //if no active image select the first
            document.querySelector(".carouselImage[imgn='1']").className += " carouselActive";
        } else {
            active.className = "carouselImage";
            var curId = active.getAttribute("imgn"); //imgn of selected image
            var next = document.querySelector(".carouselImage[imgn='" + (++curId) + "']"); //next image. if there is no next image select the first
            if (next == null) document.querySelector(".carouselImage[imgn='1']").className += " carouselActive";
            else next.className += " carouselActive";
        }
    }

function gotoPrev() {
    var active = document.querySelector(".carouselImage.carouselActive");  //select active image
    if (active == null) { //if no active image select the first
        document.querySelector(".carouselImage[imgn='1']").className += " carouselActive";
    } else {
        active.className = "carouselImage";
        var curId = active.getAttribute("imgn"); //imgn of selected image
        var prev = document.querySelector(".carouselImage[imgn='" + (--curId) + "']"); //prev image. if there is no prev image select the last
        if (prev == null) document.querySelector(".carouselImage[imgn='4']").className += " carouselActive";
        else prev.className += " carouselActive";
    }
} 
```

注意：最好将 className = ... 替换为可以删除或添加类的函数。例如 jquery 有 removeClass("className") 和 addClass("className")。还有一些没有 jquery 的实现。

# perl - 如何在不了解参数的情况下从 Getopt Long 获得所有选项？

> ID：11267384
> 
> 赞同：0
> 
> 时间：2012-06-29T18:49:51.480
> 
> 标签：perl

我需要一个简单的脚本来回显给定的所有选项和值（而且我不知道潜在的选项会是什么）。我已经尝试过这样的事情：

```
use Getopt::Long qw(GetOptionsFromArray);

my %options;

my @opt_spec = qw(a:s b:s c:s d:s e:s f:s g:s h:s i:s j:s k:s l:s m:s n:s o:s p:s r:s q:s r:s s:s t:s u:s v:s w:s x:s y:s z:s);

Getopt::Long::GetOptions(\%options, @opt_spec); 
```

但我仍然必须指定所有可能的选项 - 有没有办法在不提前知道我将收到什么选项的情况下获取所有键/值对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:10:34.293

`Getopt::Long`支持的不仅仅是键值对：可否定选项、具有多个或散列值的选项、递增选项、单字符和捆绑选项。如果没有给出确切的方案`Getopt::Long`，就无法猜测您想要使用的模块的确切功能，所以它似乎不是完成这项任务的工具。

你可能想要[`Getopt::Whatever`](http://p3rl.org/Getopt%3a%3aWhatever)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:20:40.497

你确实需要一个规格。如果您没有规范，则无法知道

```
-a=-b -c -d -e -f g --h -- -i -j 
```

应该给

```
my %options = (
    'a' => '-b',
    'c' => '',
    'd' => '',
    'e' => '',
    'f' => 'g'
    'h' => '',
);
@ARGV = (
   '-i',
   '-j',
); 
```

代替

```
my %options = (
    'a' => '-b',
    'c' => '-d',
    'e' => '-f',
    'h' => '--',
    'i' => '-j'
);
@ARGV = (
    'g',
); 
```

（后者使用`a=s`,`b=s`等）

您可以编写一个版本`GetOptions`，为所有名称提供`:s`规范，但只要您只有单字母参数，简单地使用代码生成规范会更简单。

```
my @opt_spec = map "$_:s", 'a'..'z'; 
```

# batch-file - 修复 Sublime Text 中批处理文件的切换注释功能

> ID：11267389
> 
> 赞同：1
> 
> 时间：2012-06-29T18:50:50.043
> 
> 标签：batch-file, sublimetext, sublimetext2

我一定有一个糟糕的搜索日，但我找不到任何关于如何自定义 Sublime Text 2 的信息，以便`toggle comment`在 Windows 批处理文件中正常工作（即在一行的开头添加 a`REM`或）。`::`有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T20:51:26.120

您可以创建一个插件或宏来执行此操作。也许一个片段已经存在，但我还没有找到它。

我将尝试解释“创建宏”替代方案。

使用此代码创建一个宏（将其保存在 Packages/User 中，名称为 what-you-want.sublime-macro）：

```
[
    {"command": "split_selection_into_lines"},
    {"command": "move_to", "args": {"to": "hardbol", "extend": false}},
    {"command": "insert", "args": {"characters": "REM "}}
] 
```

现在你可以使用它了。选择要注释的行并执行宏。

您还可以将宏绑定到键。在“Key Bindings - User”中添加这个键绑定：

```
{ "keys": ["alt+."], "command": "run_macro_file", 
  "args": {"file": "Packages/User/what-you-want.sublime-macro"}, "context":
    [
        { "key": "selector", "operator": "equal", "operand": "source.dosbatch" }
    ]
} 
```

“上下文”中的“选择器”键确保仅在批处理文件（“source.dosbatch”）中映射此键。

参考：

*   [使用 Sublime Text 2 宏消除重复性任务](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-banish-repetitive-tasks-with-sublime-text-2-macros/)
*   [仅对 Python 代码等做出反应的键绑定上下文](http://sublimetext.userecho.com/topic/21146-key-binding-context-to-only-react-on-eg-python-code/)

# perl - 比较和合并文件-unix

> ID：11267392
> 
> 赞同：-2
> 
> 时间：2012-06-29T18:50:58.257
> 
> 标签：perl, unix, sed, awk

```
cat file1.txt
Id    leng  sal   mon
25671 34343 56565 5565
44888 56565 45554 6868
23343 23423 26226 6224
77765 88688 87464 6848
66776 23343 63463 4534

cat file2.txt
Id     sp He Ho
25671  33 45 35
34353  64 75 33
77765  56 56 67

cat output.txt
Id     leng   sal  sp He Ho
25671  34343 56565 33 45 35
77765 88688  87464 56 56 67 
```

比较file1.txt和file2.txt，如果两个文件（file1.txt和file2.txt）中的column1相同，则单独输出（output.txt）中的报告仅通过合并匹配一个（忽略file1.txt中的第4列，同时合并输出文件）。

我试过 cat file1.txt file2.txt|sort-u >output.txt。但它不起作用。任何 awk，使用 join 的技巧都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:06:19.910

```
awk 'NR==FNR{ s[$1] = $2 " " $3 }
     NR!=FNR{ if( $1 in s ) print $1, s[$1], $2,$3,$4}' file1.txt file2.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T08:19:50.367

这可能对您有用（GNU sed）：

```
cat <<\! >file1.txt
> Id    leng  sal   mon
> 25671 34343 56565 5565
> 44888 56565 45554 6868
> 23343 23423 26226 6224
> 77765 88688 87464 6848
> 66776 23343 63463 4534
> !
cat <<\! >file2.txt
> Id     sp He Ho
> 25671  33 45 35
> 34353  64 75 33
> 77765  56 56 67
> !
sed 's|^\(\S*\)\s*\(.*\)|/^\1/s/\\(\\(\\S*\\s*\\)\\{3\\}\\).*/\\1\2/p|' file2.txt
/^Id/s/\(\(\S*\s*\)\{3\}\).*/\1sp He Ho/p
/^25671/s/\(\(\S*\s*\)\{3\}\).*/\133 45 35/p
/^34353/s/\(\(\S*\s*\)\{3\}\).*/\164 75 33/p
/^77765/s/\(\(\S*\s*\)\{3\}\).*/\156 56 67/p
sed 's|^\(\S*\)\s*\(.*\)|/^\1/s/\\(\\(\\S*\\s*\\)\\{3\\}\\).*/\\1\2/p|' file2.txt |
sed -nf - file1.txt
Id    leng  sal   sp He Ho
25671 34343 56565 33 45 35
77765 88688 87464 56 56 67 
```

解释：

转换为转换为所需格式`file2.txt`的 sed 脚本。`file1.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:57:47.830

```
join -o 0 1.2 1.3 2.2 2.3 2.4 <(sort file1.txt) <(sort file2.txt) |sort -n | tr ' ' '\t' 
```

# .net - 编码和解码内容类型“application/soap+msbin1”以在 C#.NET 中与 HttpWebRequest/HttpWebResponse 一起使用

> ID：11267393
> 
> 赞同：10
> 
> 时间：2012-06-29T18:50:58.723
> 
> 标签：.net, wcf, c#-4.0, soap, wcf-binding

我一直在寻找一个简单的类或一组函数来编码和解码内容类型'application/soap+msbin1'

我的最终目标是能够使用 HttpWebRequest 和 HttpWebResponse 与运行 silverlight 应用程序的网络服务器进行交互。

非常感谢上述两项中的任何一项的任何示例或示例。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T20:44:33.783

我能够用 fiddler2 查看数据

[http://fiddler2.com/fiddler2/version.asp](http://fiddler2.com/fiddler2/version.asp)

使用提琴手扩展

[http://archive.msdn.microsoft.com/wcfbinaryinspector](http://archive.msdn.microsoft.com/wcfbinaryinspector)

并对数据进行编码/解码

[https://github.com/GDSSecurity/WCF-Binary-SOAP-Plug-In/blob/master/burp_wcf_plugin/src/NBFS.cs](https://github.com/GDSSecurity/WCF-Binary-SOAP-Plug-In/blob/master/burp_wcf_plugin/src/NBFS.cs)

# java - HTTPUrlConnection 500 错误仅在 android 上

> ID：11267394
> 
> 赞同：1
> 
> 时间：2012-06-29T18:51:05.133
> 
> 标签：java, android, httpurlconnection

我一直在尝试从我的 Android 应用程序调用服务器，但我不断收到 500 错误

> java.io.FileNotFoundException: https:// 有效 URL

但是当我使用相同的代码块并作为 Java 应用程序运行时，它返回 200 响应并且工作正常。

```
URL url = new URL("https://VALID URL");
HttpURLConnection conn = null;
conn =  (HttpURLConnection)url.openConnection();
conn.setRequestMethod("GET");
conn.setRequestProperty("Accept", "application/json");
conn.setRequestProperty("http.protocol.version", "HTTP/1.1");
conn.setRequestProperty("http.socket.timeout", "30");
conn.setRequestProperty("http.protocol.content-charset", "UTF-8");
conn.setRequestProperty("apiKey","90c67a05-7613-48c5-a986-4d4ba5649cb7");
conn.setRequestProperty("authId",authID);
conn.setRequestProperty("connectionTicket",connTicket);
conn.setRequestProperty("State", "Open,Pending,Canceled,Rejected,Completed");
conn.setDoOutput(true);
conn.setDoInput(true);
conn.setUseCaches(false);
conn.setAllowUserInteraction(false);
conn.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
int httpresponse = conn.getResponseCode();
System.out.println(httpresponse);
System.out.println(conn.getErrorStream());

BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
```

以上是我在两个应用程序中使用的代码。使用 HTTPClient 可能会解决问题，但我还没有尝试过。但由于我一直在使用 HTTPURLConnection，我想知道是否有可能的解决方案。

这是痕迹

```
06-29 11:35:00.438: W/System.err(5000): java.io.FileNotFoundException: https://VALID URL (edited)
06-29 11:35:00.438: W/System.err(5000):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
06-29 11:35:00.478: W/System.err(5000):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
06-29 11:35:00.488: W/System.err(5000):     at com.Tabs.List$Populate_List.doInBackground(List.java:126)
06-29 11:35:00.488: W/System.err(5000):     at com.Tabs.List$Populate_List.doInBackground(List.java:1)
06-29 11:35:00.548: W/System.err(5000):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
06-29 11:35:00.598: W/System.err(5000):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-29 11:35:00.648: W/System.err(5000):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-29 11:35:00.648: W/System.err(5000):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
06-29 11:35:00.678: W/System.err(5000):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
06-29 11:35:00.698: W/System.err(5000):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
06-29 11:35:00.708: W/System.err(5000):     at java.lang.Thread.run(Thread.java:856) 
```

顺便说一句，我将其作为后台线程运行。这解释了 AsyncTask 部分。我不确定这是否与这里有关。

有类似的线程

*   [有效 URL 的 java.io.FileNotFoundException](https://stackoverflow.com/questions/2794006/java-io-filenotfoundexception-for-valid-url)
*   [从 HttpURLConnection 获取 InputStream 对象时出现 FileNotFoundException](https://stackoverflow.com/questions/5379247/filenotfoundexception-while-getting-the-inputstream-object-from-httpurlconnectio)

# extjs - ExtJS 调用 directFn，失败

> ID：11267396
> 
> 赞同：1
> 
> 时间：2012-06-29T18:51:10.970
> 
> 标签：extjs

在 ExtJS 3 中，我想调用一个方法，如下所示。看起来服务器端的方法没有被调用。我不能这样使用'directFn'吗？如何解决？

服务器端是 C#。

谢谢

```
function showDetail(recordId) {    
    Ext.Ajax.request({
        directFn: Report.showDetail,
        success: received,
        failure: function () { alert('failure'); },
        params: { recordId: recordId }
    });
}

function received(response) {
    var x = Ext.decode(response.responseText);
    alert(x);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:21:19.817

嗯，是的，你不能只创建一个参数并期望它对 Ext 有意义。您需要调用 url 并将 directFn 作为 url 的一部分或作为参数传递，具体取决于您的服务器端内容的设置方式。

# sql - libdbi 中的预处理语句

> ID：11267397
> 
> 赞同：4
> 
> 时间：2012-06-29T18:51:12.643
> 
> 标签：sql, c, database, prepared-statement, database-abstraction

我想使用 libdbi 使应用程序与数据库无关。我想使用准备好的陈述。如何在 libdbi 中使用准备好的语句？我看到的所有示例都使用普通的 select bla from blub where foo; 语句并使用 libdbi 提供的转义函数进行输入转义。

如果在 libdbi 中无法做到这一点，您能否推荐另一个可以做到这一点的 db-abstraction-library 或解释为什么这样的功能没有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:10:04.640

不幸的是，libdbi 不支持准备好的语句。[资料来源：http://libdbi.sourceforge.net/docs/programmers-guide 上的libdbi](http://libdbi.sourceforge.net/docs/programmers-guide)文档 另请阅读 syslog-ng 上的此线程：[http ://marc.info/?t=129555478500003](http://marc.info/?t=129555478500003)

如果您不介意 C++，SOCI 可能是您的替代方案： [http ://soci.sourceforge.net](http://soci.sourceforge.net)

# mysql - 使用休眠对 MySQL 数据库的查询进行排序

> ID：11267399
> 
> 赞同：2
> 
> 时间：2012-06-29T18:51:25.817
> 
> 标签：mysql, sql, database, hibernate

我有一个 MySQL 数据库，其中包含一个名为“Task”的表。我使用 Hibernate 将数据映射到数据库。

它包括以下字段：id、user_id、project_id、deliverable_id、activity_id、...

当我从 Db 中检索任务时，我需要首先按 Project 对它们进行排序，然后按 Deliverable 排序，最后按 Activty。

```
 Session session = HibernateUtil.getSessionFactory().getCurrentSession();
            session.beginTransaction();
            List<Task> tasks = (List<Task>)session.createQuery(
"from Task as t where t.user.username = :name order by t.project.key ASC").setString("name", username).list();
            orderByDeliverable(tasks);
            orderByActivity(tasks);

    private void orderByDeliverable(List<Task> tasks) {
       Collections.sort(tasks, new Comparator<Task>(){   
          public int compare(Task t1, Task t2) {
             if(t1.getProject().getId() == t2.getProject().getId()) 
               return t1.getDeliverable().getKey().compareToIgnoreCase(t2.getDeliverable().getKey());
             return 0;
          }
       });
    }

    private void orderByActivity(List<Task> tasks) {
        Collections.sort(tasks, new Comparator<Task>(){  
           public int compare(Task t1, Task t2) {
              if(t1.getProject().getId() == t2.getProject().getId()) 
             if(t1.getDeliverable().getId() == t2.getDeliverable().getId()) 
                return t1.getActivity().getKey().compareToIgnoreCase(t2.getActivity().getKey());
            return 0;
           }
       });
    } 
```

正如您在代码中看到的，我使用两种方法按可交付成果和活动对它们进行排序，但我在 Query 中按项目对它们进行排序。

我不擅长查询写作，你知道有什么方法可以在查询中进行所有排序并获得相同的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:27:17.757

我找到了答案。我只需要使用这个查询：

```
tasks = (List<Task>)session.createQuery("from Task as t where t.user.username = :name 
order by t.project.key ASC, t.deliverable.key ASC, t.activity.key ASC")
.setString("name", username).list(); 
```

它对我来说也是一样的。

实际上，我正在寻找这个解决方案来加速我开发的应用程序。我测试了哪个更快。结果是一样的。它不会加速应用程序。

# java - 默认以超级用户身份执行linux命令

> ID：11267406
> 
> 赞同：0
> 
> 时间：2012-06-29T18:52:05.370
> 
> 标签：java, android, linux, rooted-device

我正在使用有根的 Android 设备。有没有办法让 linux 命令以超级用户身份执行而无需调用

```
Runtime.getRuntime().exec("su") 
```

每次？让我困扰的是每次都出现的 Toast 说应用程序已被授予超级用户权限。我第一次发出 su 命令时会出现一个对话框，即使我选择记住每次执行命令时的选择，我也会得到 Toast。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:17:37.507

不确定您要执行什么和频率。但是您可以在一个 OutputStream 中执行多个命令，因此您可以将您的命令排列在一个数组或类似的东西中。

```
public void runCommandsAsRoot(String[] cmds) throws IOException {
    Process proc = Runtime.getRuntime().exec("su");

    DataOutputStream oStream = new DataOutputStream(proc.getOutputStream());

    for (String cmd : cmds) {
        oStream.writeBytes(cmd + "\n");
    }

    oStream.writeBytes("exit\n");  
    oStream.flush();
} 
```

然后像这样调用它：

```
String[] commands = { "fistCommand", "secondCommand" };
runCommandsAsRoot(commands); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:13:43.000

不，使用提供的默认 su 二进制文件时没有办法。chainxx 和 chainfire 的 SU 应用程序都有不弹出窗口的选项，但这是用户的选择。

当然，您总是可以编译自己的 su 二进制文件并使用它，它是开源的。这可能会给安全问题留下一个开放的 su 二进制文件，用户可能不会喜欢这样。如果你这样做，你会想要做一些类似其他子二进制文件如何操作的事情，它会检查你的应用程序是否在执行调用，如果不是拒绝操作。但同样，这可能不是你应该做的事情。

# ios - iOS OpenGL 2D 旋转图像（不是屏幕）

> ID：11267407
> 
> 赞同：0
> 
> 时间：2012-06-29T18:52:09.703
> 
> 标签：ios, image, opengl-es, screen, rotation

例如，我有以下代码（例如，我正在构建而不是游戏，我正在尝试通过 OpenGL ES 构建 KNOB 控件，Quartz2D 不适合，不要问为什么）：

来自这里的原始代码：
[http ://www.raywenderlich.com/9743/how-to-create-a-simple-2d-iphone-game-with-opengl-es-2-0-and-glkit-part-1](http://www.raywenderlich.com/9743/how-to-create-a-simple-2d-iphone-game-with-opengl-es-2-0-and-glkit-part-1)

代码在屏幕上绘制以下图像，以后我将用我的旋钮替换这些图像：
![截屏](../Images/1aa9d9b18c9cc2d91d42439842b9a794.png)

基本上我只对旋转播放器（左侧区域的人）感兴趣。我希望他从 0 到 360 度连续旋转。我尝试了以下代码，但是...

```
 self.effect.transform.modelviewMatrix = GLKMatrix4Rotate(self.effect.transform.modelviewMatrix, radians(10), 0, 0, -1); 
```

我提供全屏旋转（也有怪物），但我只想旋转一个对象（在这个例子中只有左侧区域的玩家）。还要注意怪物在移动。

函数[sprite render]的代码；见下文。

这是主要代码：

```
 //
//  SGGViewController.m
//  SimpleGLKitGame
//
//  Created by Ray Wenderlich on 1/30/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "SGGViewController.h"
#import "SGGSprite.h"

@interface SGGViewController ()
@property (strong, nonatomic) EAGLContext *context;
@property (strong) GLKBaseEffect * effect;
@property (strong) SGGSprite * player;
@property (strong) NSMutableArray * children;
@property (assign) float timeSinceLastSpawn;
@end

@implementation SGGViewController
@synthesize effect = _effect;
@synthesize context = _context;
@synthesize player = _player;
@synthesize children = _children;
@synthesize timeSinceLastSpawn = _timeSinceLastSpawn;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    [EAGLContext setCurrentContext:self.context];

    self.effect = [[GLKBaseEffect alloc] init];

    GLKMatrix4 projectionMatrix = GLKMatrix4MakeOrtho(0, 1024, 0, 768, -1, 1);
    self.effect.transform.projectionMatrix = projectionMatrix;

    self.player = [[SGGSprite alloc] initWithFile:@"2.png" effect:self.effect];
    self.player.position = GLKVector2Make(self.player.contentSize.width/2, 160);

    self.children = [NSMutableArray array];
    [self.children addObject:self.player];

}

- (void)addTarget {
    SGGSprite * target = [[SGGSprite alloc] initWithFile:@"Target.png" effect:self.effect];
    [self.children addObject:target];

    int minY = target.contentSize.height/2;
    int maxY = 320 - target.contentSize.height/2;
    int rangeY = maxY - minY;
    int actualY = (arc4random() % rangeY) + minY;

    target.position = GLKVector2Make(480 + (target.contentSize.width/2), actualY);    

    int minVelocity = 480.0/4.0;
    int maxVelocity = 480.0/2.0;
    int rangeVelocity = maxVelocity - minVelocity;
    int actualVelocity = (arc4random() % rangeVelocity) + minVelocity;

    target.moveVelocity = GLKVector2Make(-actualVelocity, 0);
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}

#pragma mark - GLKViewDelegate

static inline double radians (double degrees) {return degrees * M_PI/180;}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {    

    glClearColor(1, 1, 1, 1);
    glClear(GL_COLOR_BUFFER_BIT);    
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);

    for (SGGSprite * sprite in self.children) {
        [sprite render];
    }
}

- (void)update {    

    self.timeSinceLastSpawn += self.timeSinceLastUpdate;
    if (self.timeSinceLastSpawn > 1.0) {
        self.timeSinceLastSpawn = 0;
        [self addTarget];
    }

    for (SGGSprite * sprite in self.children) {
        [sprite update:self.timeSinceLastUpdate];
    }
}

@end 
```

这是函数 [sprite render] 的代码；

```
//
//  SGGSprite.m
//  SimpleGLKitGame
//
//  Created by Ray Wenderlich on 1/30/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "SGGSprite.h"

typedef struct {
    CGPoint geometryVertex;
    CGPoint textureVertex;
} TexturedVertex;

typedef struct {
    TexturedVertex bl;
    TexturedVertex br;    
    TexturedVertex tl;
    TexturedVertex tr;    
} TexturedQuad;

@interface SGGSprite()

@property (strong) GLKBaseEffect * effect;
@property (assign) TexturedQuad quad;
@property (strong) GLKTextureInfo * textureInfo;

@end

@implementation SGGSprite
@synthesize position = _position;
@synthesize contentSize = _contentSize;
@synthesize effect = _effect;
@synthesize quad = _quad;
@synthesize textureInfo = _textureInfo;
@synthesize moveVelocity = _moveVelocity;

- (id)initWithFile:(NSString *)fileName effect:(GLKBaseEffect *)effect {
    if ((self = [super init])) {
        self.effect = effect;

        NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithBool:YES],
                                  GLKTextureLoaderOriginBottomLeft, 
                                  nil];

        NSError * error;    
        NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:nil];
        self.textureInfo = [GLKTextureLoader textureWithContentsOfFile:path options:options error:&error];
        if (self.textureInfo == nil) {
            NSLog(@"Error loading file: %@", [error localizedDescription]);
            return nil;
        }

        self.contentSize = CGSizeMake(self.textureInfo.width, self.textureInfo.height);

        TexturedQuad newQuad;
        newQuad.bl.geometryVertex = CGPointMake(0, 0);
        newQuad.br.geometryVertex = CGPointMake(self.textureInfo.width, 0);
        newQuad.tl.geometryVertex = CGPointMake(0, self.textureInfo.height);
        newQuad.tr.geometryVertex = CGPointMake(self.textureInfo.width, self.textureInfo.height);

        newQuad.bl.textureVertex = CGPointMake(0, 0);
        newQuad.br.textureVertex = CGPointMake(1, 0);
        newQuad.tl.textureVertex = CGPointMake(0, 1);
        newQuad.tr.textureVertex = CGPointMake(1, 1);
        self.quad = newQuad;

    }
    return self;
}

- (GLKMatrix4) modelMatrix {

    GLKMatrix4 modelMatrix = GLKMatrix4Identity;    
    modelMatrix = GLKMatrix4Translate(modelMatrix, self.position.x, self.position.y, 0);
    modelMatrix = GLKMatrix4Translate(modelMatrix, -self.contentSize.width/2, -self.contentSize.height/2, 0);
    return modelMatrix;

}

static inline double radians (double degrees) {return degrees * M_PI/180;}

- (void)render { 

    self.effect.texture2d0.name = self.textureInfo.name;
    self.effect.texture2d0.enabled = YES;
    self.effect.transform.modelviewMatrix = self.modelMatrix;

    [self.effect prepareToDraw];
    long offset = (long)&_quad;

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

}

- (void)update:(float)dt {

    GLKVector2 curMove = GLKVector2MultiplyScalar(self.moveVelocity, dt);

    self.position = GLKVector2Add(self.position, curMove);

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:32:20.663

在此示例中，您共享相同的函数来绘制玩家、目标和背景。您必须为玩家独立定义新效果和矩阵，以应用单独的效果，如旋转。

例如，这里是 SGGViewController.m：

```
//
//  SGGViewController.m
//  SimpleGLKitGame
//
//  Created by Ray Wenderlich on 1/30/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "SGGViewController.h"
#import "SGGSprite.h"

float _rotation;

@interface SGGViewController ()
@property (strong, nonatomic) EAGLContext *context;
@property (strong) GLKBaseEffect * effect;
@property (strong) GLKBaseEffect * effectPlayer;  //Added For The Player
@property (strong) SGGSprite * player;
@property (strong) NSMutableArray * children;
@property (strong) NSMutableArray * childrenPlayer; //Added For The Player
@property (assign) float timeSinceLastSpawn;
@end

@implementation SGGViewController
@synthesize effect = _effect;
@synthesize effectPlayer = _effectPlayer;
@synthesize context = _context;
@synthesize player = _player;
@synthesize children = _children;
@synthesize childrenPlayer = _childrenPlayer;
@synthesize timeSinceLastSpawn = _timeSinceLastSpawn;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

    if (!self.context) {
        NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;
    [EAGLContext setCurrentContext:self.context];

    //--------------------This Is To Define Effect For The background-------------------
    self.effect = [[GLKBaseEffect alloc] init];
    GLKMatrix4 projectionMatrix = GLKMatrix4MakeOrtho(0, 480, 0, 320, -1024, 1024);
    self.effect.transform.projectionMatrix = projectionMatrix;
    //----------------------------------------------------------------------------------

    //--------This One For The Player ---------
    self.effectPlayer = [[GLKBaseEffect alloc] init];
    GLKMatrix4 projectionMatrixPlay = GLKMatrix4MakeOrtho(0, 480, 0, 320, -1024, 1024);
    self.effectPlayer.transform.projectionMatrix = projectionMatrixPlay;
    //----------------------------------------------------------------------------------

    //----Note Here I Have Uses Another Separate Function To Init The Texture File----
    self.player = [[SGGSprite alloc] initWithFilePlayer:@"2.png" effectPlayer:self.effectPlayer];
    self.player.positionPlayer = GLKVector2Make(self.player.contentSizePlayer.width/2, 160);

    //--The Array Setting For Target And Anything Else (Background, Splash, Etc.)---
    self.children = [NSMutableArray array];

    //---And This Is The Array Setting For The Player---
    self.childrenPlayer = [NSMutableArray array];
    [self.childrenPlayer addObject:self.player];

}

//-----While The Target As Usual--------
- (void)addTarget 
{
    SGGSprite * target = [[SGGSprite alloc] initWithFile:@"Target.png" effect:self.effect];
    [self.children addObject:target];

    int minY = target.contentSize.height/2;
    int maxY = 320 - target.contentSize.height/2;
    int rangeY = maxY - minY;
    int actualY = (arc4random() % rangeY) + minY;

    target.position = GLKVector2Make(480 + (target.contentSize.width/2), actualY);    

    int minVelocity = 480.0/4.0;
    int maxVelocity = 480.0/2.0;
    int rangeVelocity = maxVelocity - minVelocity;
    int actualVelocity = (arc4random() % rangeVelocity) + minVelocity;

    target.moveVelocity = GLKVector2Make(-actualVelocity, 0);
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}

#pragma mark - GLKViewDelegate

static inline double radians (double degrees) {return degrees * M_PI/180;}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect {    

    glClearColor(1, 1, 1, 1);
    glClear(GL_COLOR_BUFFER_BIT);    
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);

    for (SGGSprite * sprite in self.children) {
        [sprite render];
    }
    //--------Separate Rendering For The Player In A New Function RenderPlayer-----------
    for (SGGSprite * sprite in self.childrenPlayer) {
        [sprite renderPlayer];
    }

}

- (void)update 
{    

    self.timeSinceLastSpawn += self.timeSinceLastUpdate;
    _rotation += self.timeSinceLastUpdate * 20;  //Speed And Angle Of Rotation

    if (self.timeSinceLastSpawn > 1.0) {
        self.timeSinceLastSpawn = 0;
        [self addTarget];
    }

    for (SGGSprite * sprite in self.children) 
    {
        [sprite update:self.timeSinceLastUpdate];
    }

    //---Another One For The Player Note Theres A New Function Called updatePlayer---
    for (SGGSprite * sprite in self.childrenPlayer) 
    {
        [sprite updatePlayer:self.timeSinceLastUpdate rotationPlayer:_rotation];
    }
}

@end 
```

现在对于 SGGSprite.m

```
//
//  SGGSprite.m
//  SimpleGLKitGame
//
//  Created by Ray Wenderlich on 1/30/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "SGGSprite.h"

typedef struct {
    CGPoint geometryVertex;
    CGPoint textureVertex;
} TexturedVertex;

typedef struct {
    TexturedVertex bl;
    TexturedVertex br;    
    TexturedVertex tl;
    TexturedVertex tr;    
} TexturedQuad;

typedef struct {
    CGPoint geometryVertexPlayer;
    CGPoint textureVertexPlayer;
} TexturedVertexPlayer;

typedef struct {
    TexturedVertexPlayer bl;
    TexturedVertexPlayer br;    
    TexturedVertexPlayer tl;
    TexturedVertexPlayer tr;    
} TexturedQuadPlayer;

@interface SGGSprite()

@property (strong) GLKBaseEffect * effect;
@property (strong) GLKBaseEffect * effectPlayer;  //Added
@property (assign) TexturedQuad quad;
@property (strong) GLKTextureInfo * textureInfo;
@property (assign) TexturedQuadPlayer quadPlayer; //Added
@property (strong) GLKTextureInfo * textureInfoPlayer; //Added

@end

@implementation SGGSprite
@synthesize position = _position;
@synthesize positionPlayer = _positionPlayer;  //Added
@synthesize contentSize = _contentSize;
@synthesize contentSizePlayer = _contentSizePlayer;  //Added
@synthesize effect = _effect;
@synthesize effectPlayer = _effectPlayer; //Added
@synthesize quad = _quad;
@synthesize quadPlayer = _quadPlayer; //Added
@synthesize textureInfo = _textureInfo;
@synthesize moveVelocity = _moveVelocity;
@synthesize textureInfoPlayer = _textureInfoPlayer;  //Added
@synthesize moveVelocityPlayer = _moveVelocityPlayer;  //Added

int moved = 0;   // to make sure the game just started

- (id)initWithFile:(NSString *)fileName effect:(GLKBaseEffect *)effect 
{
    if ((self = [super init])) 
    {
        self.effect = effect;

        NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithBool:YES],
                                  GLKTextureLoaderOriginBottomLeft, 
                                  nil];

        NSError * error;    
        NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:nil];
        self.textureInfo = [GLKTextureLoader textureWithContentsOfFile:path options:options error:&error];
        if (self.textureInfo == nil) 
        {
            NSLog(@"Error loading file: %@", [error localizedDescription]);
            return nil;
        }

        self.contentSize = CGSizeMake(self.textureInfo.width, self.textureInfo.height);

        TexturedQuad newQuad;
        newQuad.bl.geometryVertex = CGPointMake(0, 0);
        newQuad.br.geometryVertex = CGPointMake(self.textureInfo.width, 0);
        newQuad.tl.geometryVertex = CGPointMake(0, self.textureInfo.height);
        newQuad.tr.geometryVertex = CGPointMake(self.textureInfo.width, self.textureInfo.height);

        newQuad.bl.textureVertex = CGPointMake(0, 0);
        newQuad.br.textureVertex = CGPointMake(1, 0);
        newQuad.tl.textureVertex = CGPointMake(0, 1);
        newQuad.tr.textureVertex = CGPointMake(1, 1);
        self.quad = newQuad;
    }
    return self;
}
//----------The Init Function For The Player Only-------------
- (id)initWithFilePlayer:(NSString *)fileName effectPlayer:(GLKBaseEffect *)effectPlayer 
{
    if ((self = [super init])) 
    {
        self.effectPlayer = effectPlayer;

        NSDictionary * options = [NSDictionary dictionaryWithObjectsAndKeys:
                                  [NSNumber numberWithBool:YES],
                                  GLKTextureLoaderOriginBottomLeft, 
                                  nil];

        NSError * error;    
        NSString *path = [[NSBundle mainBundle] pathForResource:fileName ofType:nil];
        self.textureInfoPlayer = [GLKTextureLoader textureWithContentsOfFile:path options:options error:&error];
        if (self.textureInfoPlayer == nil) 
        {
            NSLog(@"Error loading file: %@", [error localizedDescription]);
            return nil;
        }

        self.contentSizePlayer = CGSizeMake(self.textureInfoPlayer.width, self.textureInfoPlayer.height);

        TexturedQuadPlayer newQuad;
        newQuad.bl.geometryVertexPlayer = CGPointMake(0, 0);
        newQuad.br.geometryVertexPlayer = CGPointMake(self.textureInfoPlayer.width, 0);
        newQuad.tl.geometryVertexPlayer = CGPointMake(0, self.textureInfoPlayer.height);
        newQuad.tr.geometryVertexPlayer = CGPointMake(self.textureInfoPlayer.width, self.textureInfoPlayer.height);
        newQuad.bl.textureVertexPlayer = CGPointMake(0, 0);
        newQuad.br.textureVertexPlayer = CGPointMake(1, 0);
        newQuad.tl.textureVertexPlayer = CGPointMake(0, 1);
        newQuad.tr.textureVertexPlayer = CGPointMake(1, 1);
        self.quadPlayer = newQuad;
    }
    return self;
}

- (GLKMatrix4) modelMatrix 
{

    GLKMatrix4 modelMatrix = GLKMatrix4Identity;    
    modelMatrix = GLKMatrix4Translate(modelMatrix, self.position.x, self.position.y, 0);
    modelMatrix = GLKMatrix4Translate(modelMatrix, -self.contentSize.width/2, -self.contentSize.height/2, 0);
    return modelMatrix;

} 

//-------------Added For The Player-----------------
- (GLKMatrix4) modelMatrixPlayer 
{

    GLKMatrix4 modelMatrixPlayer = GLKMatrix4Identity;    
    modelMatrixPlayer = GLKMatrix4Translate(modelMatrixPlayer, self.positionPlayer.x, self.positionPlayer.y, 0);
    modelMatrixPlayer = GLKMatrix4Translate(modelMatrixPlayer, -self.contentSizePlayer.width/2, -self.contentSizePlayer.height/2, 0);
    return modelMatrixPlayer;

} 

static inline double radians (double degrees) {return degrees * M_PI/180;}

- (void)render 
{ 

    self.effect.texture2d0.name = self.textureInfo.name;
    self.effect.texture2d0.enabled = YES;
    self.effect.transform.modelviewMatrix = self.modelMatrix;

    [self.effect prepareToDraw];
    long offset = (long)&_quad;

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

}

- (void)renderPlayer 
{ 

    self.effectPlayer.texture2d0.name = self.textureInfoPlayer.name;
    self.effectPlayer.texture2d0.enabled = YES;

    if (moved == 0) // Only Applied When You Restart Game To Position The Player In The Center
    {
        self.effectPlayer.transform.modelviewMatrix = self.modelMatrixPlayer;
    }

    [self.effectPlayer prepareToDraw];
    long offset = (long)&_quadPlayer;

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertexPlayer), (void *) (offset + offsetof(TexturedVertexPlayer, geometryVertexPlayer)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertexPlayer), (void *) (offset + offsetof(TexturedVertexPlayer, textureVertexPlayer)));

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

}

- (void)update:(float)dt 
{

    GLKVector2 curMove = GLKVector2MultiplyScalar(self.moveVelocity, dt);
    self.position = GLKVector2Add(self.position, curMove);

}

// ------------- Rotate The Object --------------------------------------------

- (void)updatePlayer:(float)rt rotationPlayer:(float)rotate
{

    moved = 1;

    self.effectPlayer.transform.modelviewMatrix = self.modelMatrixPlayer; //Adjust the player Location And Ready To Move 

    //Moving The Object 
    GLKVector2 curRotate = GLKVector2MultiplyScalar(self.moveVelocityPlayer, rt);
    self.positionPlayer = GLKVector2Add(self.positionPlayer, curRotate);     

    //Rotation Section
    self.effectPlayer.transform.modelviewMatrix = GLKMatrix4Rotate(self.effectPlayer.transform.modelviewMatrix, rotate, 0, 0, -1);

}

@end 
```

好吧，这并不是所有的东西都是 SGGSprite.h

```
//
//  SGGSprite.h
//  SimpleGLKitGame
//
//  Created by Ray Wenderlich on 1/30/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import <GLKit/GLKit.h>
#import <Foundation/Foundation.h>

@interface SGGSprite : NSObject
@property (assign) GLKVector2 position; 
@property (assign) GLKVector2 positionPlayer; //Position For The Player
@property (assign) CGSize contentSize;  
@property (assign) CGSize contentSizePlayer;  //Size Of The Player
@property (assign) GLKVector2 moveVelocity; 
@property (assign) GLKVector2 moveVelocityPlayer; //Speed Of The Player If Moved

- (id)initWithFile:(NSString *)fileName effect:(GLKBaseEffect *)effect;
- (id)initWithFilePlayer:(NSString *)fileName effectPlayer:(GLKBaseEffect *)effectPlayer;
- (void)render;
- (void)renderPlayer;

- (void)update:(float)dt;  //Move Object
- (void)updatePlayer:(float)rt rotationPlayer:(float)rotate; //Rotate Object
@end 
```

# css - CodeIgniter CSS 相关链接

> ID：11267409
> 
> 赞同：0
> 
> 时间：2012-06-29T18:52:11.573
> 
> 标签：css, codeigniter

我已经查看了涉及此问题的其他答案，但仍然无法正常工作。我正在尝试相对链接我的 CSS 文件。我已经尝试过`base_url()`concat ，它仍然无法正常工作。也许我只是对 CI URL 有一个误解。无论如何，我的CSS文件在`views->templates->Item_CSS.css`

我已经尝试了一切，但仍然没有结果。如果有人可以提供帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:57:44.987

您将无法轻松到达该路径，因为 codeigniter 使用它的 index.php（位于根目录中）来处理所有内容。**视图**文件夹不是基本路径

我所做的是在 CI 的根目录（index.php,.htaccess 所在的位置）添加一个**css**和**js**`www.example.com/css/mycss.css`文件夹，之后你的 css 路由将是or `base_url().css/mycss.css`.

如果您遇到禁止错误，您可能需要修改 .htaccess 以允许访问这些文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:03:58.770

假设您将基本 url 配置为：

`$config['base_url'] = 'http://www.abc.com/';`

然后将`application`文件夹放在`system`and`index.php`文件所在的位置。然后使用以下代码：

`<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>application/views/templates/Item_CSS.css" />`

# javascript - 元素未在 FireFox 和 Opera 上显示，但在 Chrome 和 Safari 上正常工作

> ID：11267413
> 
> 赞同：1
> 
> 时间：2012-06-29T18:52:28.457
> 
> 标签：javascript, jquery, css

我有一个元素没有在 Opera 或 Firefox 上显示的问题。在 Firefox 上使用 firebug 我可以看到一个错误，指出我用来初始化代码的函数“**未定义**”

现在事情是这样的，当我清空 Firefox 浏览器上的缓存时，我可以看到包含“facebook 按钮”的元素并且错误消失了，但是一旦我刷新浏览器，我就看不到我的元素并返回错误再次。我必须清空缓存才能再次看到该按钮。

该元素应该使用 jQuery 触发，以显示 facebook 用户是否在线，如果没有，它将显示该按钮。但这仅适用于 Chrome 和 Safari，我相信 IE8（我没有）但有人告诉我它有效。

这是在我的 Javascript 文件中显示元素的代码：

```
jQuery('#fbLogin').show(); 
```

现在，如果我要在我的 .css 文件上更改它：

```
#fbLogin {
display:none;
} 
```

对此：

```
#fbLogin {
display:block;
 } 
```

它会显示，但我看到的问题是它一直显示，如果用户登录，则需要隐藏它。我基本上有一个代码说 .show the button 和 .hide if login...

如果您想进一步了解，这里有一个页面链接：

[http://gullypost.com/entertainment/tim-westwood-kendrick-lamar-interview/](http://gullypost.com/entertainment/tim-westwood-kendrick-lamar-interview/)

在 Safari 和 Chrome 上，您会注意到 facebook 按钮显示在右侧边栏上，但在其他浏览器上不可见。

有人可以帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:58:10.657

`.show()`尝试在没有定义高度的元素上使用 jQuery 时，会出现一个奇怪的问题。解决方法是显式或动态设置高度。

```
​$(selector).height(function() { return $(this).height() });​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:09:58.057

看起来页面第二次加载时，您会收到以下 JavaScript 错误：

```
fb_og_actions_init_vid is not defined 
```

包含该函数的文件正在正确添加到页面中。我唯一的猜测是尝试移动对函数的引用：

```
fb_og_actions_init_vid("Connected to Facebook", "108821"); 
```

在`document.ready`函数内：

```
$(document).ready(function(){
    fb_og_actions_init_vid("Connected to Facebook", "108821");
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-29T19:06:25.963

我相信这会奏效：

```
document.getElementById('fbLogin').style.display = 'block'; 
```

# java - JAX-WS 处理 Eclipse 和 Netbeans 之间的不兼容问题

> ID：11267416
> 
> 赞同：0
> 
> 时间：2012-06-29T18:52:39.623
> 
> 标签：java, eclipse, web-services, netbeans, jax-ws

所以我有一个使用 GUI Web 服务工具在 NetBeans 7.1.2 中创建的 Web 服务客户端，然后在 Eclipse 项目（Eclipse Indigo）中使用。两者都使用JDK 1.6。问题是，即使使用完全相同的代码，两个 IDE 也使用不同的库来处理 Web 服务调用。

Eclipse 使用的是 Axis2，它绝对不适用于这个项目（不支持 NTLMv2）
我很确定 Netbeans 使用的是 Java SE 6 内部代码，尽管我不是 100% 确定。

这些调用在 Netbeans 中有效，但在 Eclipse 中无效，我遇到了 HttpClient 3.1 问题。

所以问题是：我如何强制 eclipse 使用 Netbeans 用来处理 Web 服务调用的同一个库。我确实可以访问 Netbeans 项目的代码。

我设法在 Netbeans 中生成了一个与我在 Eclipse 中得到的错误相匹配的错误，所以这里有两个堆栈跟踪：

蚀：

```
javax.xml.ws.WebServiceException: org.apache.axis2.AxisFault: Transport error: 401 Error: Unauthorized
at org.apache.axis2.jaxws.ExceptionFactory.createWebServiceException(ExceptionFactory.java:175)
at org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:70)
at org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:128)
at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.execute(AxisInvocationController.java:559)
at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.doInvoke(AxisInvocationController.java:118)
at org.apache.axis2.jaxws.core.controller.impl.InvocationControllerImpl.invoke(InvocationControllerImpl.java:82)
at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:317)
at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:159)
at $Proxy16.addList(Unknown Source)
at com.jnl.mktsys.sharepoint.JLists.addList(JLists.java:109)
at com.jackson.mktsys.wholesaler.document.document.jawscontract.DocumentContractImpl.createSite(DocumentContractImpl.java:212)
at com.jackson.mktsys.wholesaler.document.document.jawscontract.DocumentContractImpl.createDocument(DocumentContractImpl.java:39)
at com.jackson.mktsys.wholesaler.document.document.test.DocumentContractImplCreateTest.testCreateExist(DocumentContractImplCreateTest.java:53)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at junit.framework.TestCase.runTest(TestCase.java:168)
at junit.framework.TestCase.runBare(TestCase.java:134)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.apache.axis2.AxisFault: Transport error: 401 Error: Unauthorized
at org.apache.axis2.transport.http.HTTPSender.handleResponse(HTTPSender.java:295)
at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:190)
at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:389)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:222)
at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:435)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:402)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.execute(AxisInvocationController.java:554)
... 28 more 
```

网豆：

```
com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 401: Unauthorized
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.checkStatusCode(HttpTransportPipe.java:296)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.createResponsePacket(HttpTransportPipe.java:245)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:203)
at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:122)
at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:123)
at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:626)
at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:585)
at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:570)
at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:467)
at com.sun.xml.internal.ws.client.Stub.process(Stub.java:308)
at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)
at $Proxy30.addList(Unknown Source)
at com.jnl.mktsys.sharepoint.JLists.addList(JLists.java:109)
at Test.createSite(Test.java:36)
at Test.main(Test.java:24) 
```

# sql - sql中的序列错误。此处不允许使用序列号

> ID：11267418
> 
> 赞同：9
> 
> 时间：2012-06-29T18:52:50.303
> 
> 标签：sql, oracle, oracle11g

我正在尝试运行以下查询来插入许多具有 id 的节点，这些节点会随着节点加载到表中而自动递增。

但是，`ORA-02287: sequence number not allowed here`每当我运行它时，我都会收到错误消息。

```
INSERT INTO V1144Engine.T_NODES VALUES
  (
    (SELECT V1144ENGINE.S_PK_NODES.NEXTVAL FROM dual),
    1,
    'Chemistry of Life',
    0,1,
    SYSDATE,
    NULL,
    'CON.3.1',
    NULL
  ); 
```

我试过跑步

```
SELECT V1144ENGINE.S_PK_NODES.NEXTVAL from dual 
```

这工作正常并返回我想要的数字。

我该如何解决这个问题？我在 Oracle 11g 上运行。

此外，如果查询仍然可以在一行上运行，因为我在电子表格中制​​作这些并且希望仍然能够这样做，那将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-29T19:02:15.740

没有必要有内在的`SELECT`。简单地

```
INSERT INTO V1144Engine.T_NODES 
  VALUES(V1144ENGINE.S_PK_NODES.NEXTVAL,
         1,
         'Chemistry of Life',
         0,
         1,
         SYSDATE,
         null,
         'CON.3.1',
         null); 
```

不过，一般来说，您希望列出您在`INSERT`语句中为其提供值的列。这不仅记录了列，以便未来的开发人员不必在表中查找列的顺序，而且如果将来将新列添加到表中，它也可以保护您。

```
INSERT INTO V1144Engine.T_NODES( <<list of columns>> ) 
  VALUES(V1144ENGINE.S_PK_NODES.NEXTVAL,
         1,
         'Chemistry of Life',
         0,
         1,
         SYSDATE,
         null,
         'CON.3.1',
         null); 
```

# actionscript-3 - 如何每 30 帧只执行一次

> ID：11267419
> 
> 赞同：1
> 
> 时间：2012-06-29T18:52:50.723
> 
> 标签：actionscript-3

我的问题是，我想每秒添加一块石头（每秒 30 帧），我有不同的关卡，这意味着我在每个关卡中有不同数量的石头，我有不同的速度，所以我想添加 10在第 1 级中总共需要 30 秒的岩石，在第 2 级中总共需要 20 秒，以此类推。我愿意完全改变它，我只想要最好的解决方案。我希望它是动态的，所以我可以制作很多关卡。我该怎么做

我不想保留一个计数器，每次它在 30 时添加一块石头并重置它。

先感谢您

```
switch(difficulty)
            {
                case 1:
                    timer = 30;
                    numberOfRocks = 10;
                    break;
                case 2:
                    timer = 20;
                    numberOfRocks = 20;
                    break;
                case 3:
                    timer = 10;
                    numberOfRocks = 30;
                    break;
                case 4:
                    timer = 5;
                    numberOfRocks = 40;
                    break;
            }

            addEventListener(Event.ENTER_FRAME, loop)
        }
        private function loop(e:Event):void
        {   
            for (var i:int = 0; i < (timer * 30); i++)
            {
                    a_bitmap = new a_class();
                    a_bitmap.x = 750;
                    a_bitmap.y = Math.ceil(Math.random() * (600 - a_bitmap.height));
                    a_bitmap.height = 35;
                    a_bitmap.width = 35;
                    addChild(a_bitmap);
                    a_bitmap.name = "astroid" + i + "";
                    myArray.push(true);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T15:18:40.840

您也可以使用 flash.utils.setInterval 函数。

```
setInterval(trace , 1000 , "trace message once per second"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:32:00.073

Timer 可能比帧处理程序更适合您的需要。我建议使用数学来计算你的关卡参数而不是硬编码的 switch 语句，然后你可以添加任意数量的关卡（或者让你的游戏无限期地运行）

```
var rockLoadTimer:Timer;

function gameInit():void {
    //your games initialization code here

    //create a timer that fires every second when running
    rockLoadTimer = new Timer(1000);

    //the function to call every time the timer fires.  You could also listen for TIMER_COMPLETE is wanted to run a function once all rocks are loaded
    rockLoadTimer.addEventListener(TimerEvent.TIMER, addNextRock);
}

function startLevel(difficulty:int = 1):void {
    //your code here to clear the level 

    //repeat count is used as the amount of rocks to load this level - level number times 10
    rockLoadTimer.repeatCount = difficulty * 10;

    //the delay time is how quickly you want the rocks to load.  this is 5 seconds divided by the difficulty level
    //so the first level would be every 5 seconds, second would be every 2 and a half seconds, third level would be every second and two thirds. etc.  
    rockLoadTimer.delay = Math.round(5000 / difficulty);

    rockLoadTimer.reset();
    rockLoadTimer.start();

}

function addNextRock(e:Event = null):void {
    //your rock creation code here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T19:33:23.023

您可以使用, 并在每个滴答声中`Timer`创建一个实例：`a_class`

```
var timer:Timer = new Timer(1000, 30); // One per second for 30 seconds
timer.addEventListener(TimerEvent.TIMER, addAsteroid);
timer.start();
function addAsteroid():void {
    a_bitmap = new a_class();
    // etc.
} 
```

计时器延迟是“每毫秒小行星数”，因此如果您想在 30 秒内创建 10 个，您可以将其设置为`30000/10`= 3000。

但是，这种方法在帧速率平稳时效果最好——它将每秒执行一次，但如果 Flash 以低于 30 fps 的速度运行，动画的帧数可能会有所不同。如果你的游戏按照我的想法运行，这可能会导致小行星被“聚集”起来。因此，**在这里保留一个计数器可能是更好的解决方案，**除非您计划以一种可以解释帧速率变化的方式来处理游戏逻辑的其余部分（即小行星移动速度）。

如果要使用计数器：

```
var creationCounter:Number = 0; // put this at class level

// Then in the ENTER_FRAME event:
creationCounter += asteroids_per_second / 30; 
while (creationCounter-- >= 1) {
    a_bitmap = new a_class();
    // etc.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T08:54:28.583

如果你使用`TweenLite`，你可以使用该`delayedCall`功能，它可以使用时间或帧，

```
// delayedCall(delay:Number, onComplete:Function, onCompleteParams:Array = null, useFrames:Boolean = false):TweenMax
TweenLite.delayedCall(30, addAstroid, null, true); 
```

更多信息，请参阅文档：[http://www.greensock.com/as/docs/tween/com/greensock/TweenMax.html#delayedCall()](http://www.greensock.com/as/docs/tween/com/greensock/TweenMax.html#delayedCall%28%29)

# c++ - C中具有格式说明符的不同输出

> ID：11267423
> 
> 赞同：1
> 
> 时间：2012-06-29T18:53:12.307
> 
> 标签：c++, c, printf, scanf

```
int x;
scanf("%d",&x);
printf("%d",x);

Input: . (just a period)
Output: 4096 
```

为什么这里输出4096。这就是我的想法：所以一个句点的 ASCII 值是 46。在输入时，它读入 x 作为 46 的位模式？而当它打印的时候，是不是在x的内存位置打印出四个字节，所以只有第一个字节填充了46对应的位模式，其余的都是组成4096的随机东西？但这是不正确的，因为看看我这样做时会发生什么——

```
int x;
scanf("%d",&x);
printf("%c",x);

Input: . (period)
Output: (nothing)

Input: 46
Output: . (period) 
```

更令人困惑的是当我这样做时发生了什么：

```
int x;
scanf("%c",&x);
printf("%d",x);

Input: . (period)
Output: 4142

Input: 46
Output: 4148

Input: 47
Output: 4148 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T18:55:24.810

您需要检查 scanf 的返回值（它是成功读取值的计数）：

```
int x;

if (scanf("%d",&x) == 1) {
    printf("%d", x);
} else {
    printf("Invalid input.");
} 
```

如果解析失败，则 x 的值未定义。

一旦`scanf`失败，进一步的调用也将失败，因为无效输入没有从流中删除。因此，使用`scanf`.

# iphone - 分组静态 UITableViewCell 中的按钮边框

> ID：11267429
> 
> 赞同：1
> 
> 时间：2012-06-29T18:53:33.797
> 
> 标签：iphone, ios, uitableview, uibutton

我在静态分组单元格中放置了一个 UIButton 并试图使其适合单元格边框，但得到这种双线：

![在此处输入图像描述](../Images/5bfed908634c9a69fd8f29922d15c513.png)

我尝试更改分隔符样式，但没有帮助。有没有办法使按钮的边框线不可见？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:41:30.840

从设计的角度来看，最好将按钮添加为表格的页脚视图，而不是嵌入到单元格中。看看 iPhone 上的日历应用程序。当您编辑现有事件时，他们会在表格底部添加一个用于删除事件的按钮。他们的按钮比简单的圆形矩形按钮更漂亮，但这也很简单。

将您的登录按钮嵌入到一个泛型中`UIView`并将其添加如下：

```
UIView *footerView = [[UIView alloc] initWithFrame:...];
UIButton *logInButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
// do button set up here, including sizing and centering, and add to footer view
[footerView addSubview:logInButton];

self.tableView.tableFooterView = footerView;
[footerView release]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T21:25:16.380

将按钮类型更改为自定义，它将摆脱按钮周围的圆角矩形。

# c - 如何用 C（在 Linux 中）编写计时器？

> ID：11267430
> 
> 赞同：2
> 
> 时间：2012-06-29T18:53:44.037
> 
> 标签：c, linux, timer

> **可能重复：**
> [用户空间中的 Linux C/C++ Timer 信号处理程序](https://stackoverflow.com/questions/5437240/linux-c-c-timer-signal-handler-in-userspace)

我如何在 C 中创建一个计时器？我想每 5 秒执行一次某个动作，然后每 2 秒执行另一个动作？

我该如何实现这一目标？谁能指出一些好的链接或代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T01:00:46.053

问题不在于设置一个周期性定时器，而是有两个不同周期的定时器。

不幸的是 2 不能除以 5，但是我们可以有一个 1s 分辨率的计时器和一个计数器，当计数器是 2 的倍数，或者 5 的倍数时，你可以做你想做的事。您像往常一样使用计时器注册信号处理程序，但此处理程序应如下所示：

```
static int cnt = 0;

int handler(int) {
    cnt++;

    if (cnt % 2 == 0) {
        action_a();
    } 

    if (cnt % 5 == 0) {
        action_b();
    }
} 
```

为了摆脱溢出问题，我们可以在达到 2 和 5 的倍数时将计数器重置为 0，例如通过执行以下操作：

```
int handler(int) {
    cnt++;

    if (cnt == 10)
    {
        cnt = 0;
    }

    if (cnt % 2 == 0) {
        action_a();
    } 

    if (cnt % (2*5) == 0) {
        action_b();
    }
} 
```

请注意，这种技术可以很好地推广到 2 个以上的周期，但是如果您运气不好，最小的公分母可能是一个非常小的周期，因此您可能会在很少使用的情况下获得很高的定时器信号率。例如，如果您有一个 999 毫秒的周期和一个 1000 毫秒的周期，那么您最终每毫秒都有一个信号，这在准确性和开销方面并不是很理想，但是对于 2 秒和 5 秒，这应该是可以接受的每秒一个信号。

# php - PHP：如何在实际数组中转换包含数组表达式的字符串？

> ID：11267434
> 
> 赞同：1
> 
> 时间：2012-06-29T18:53:58.257
> 
> 标签：php, arrays, string, multidimensional-array, explode

我有一组用户输入（$atts）作为键=>值对。一些值可以写成数组表达式，例如：

```
'setting' => 'array(50,25)' 
```

在这些情况下，我想将该字符串中包含的数组表达式转换为实际数组。所以输出会是这样的：

```
$atts = array(
'setting' => array(50,25),
'another' => 'not written as an array expression'
) 
```

从逻辑上讲，代码将是：

对于数组 $atts 中的每个 key=>value 对...如果该值是格式化为数组表达式的字符串...将该值分解为数组。

有人知道我会如何用 PHP 写这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-12T13:16:20.967

```
function stringToArray($string) {
        $string = "return " . $string . ";";
        if (function_exists("token_get_all")) {//tokenizer extension may be disabled
            $php = "<?php\n" . $string . "\n?>";
            $tokens = token_get_all($php);
                        foreach ($tokens as $token) {
                $type = $token[0];
                if (is_long($type)) {
                    if (in_array($type, array(
                            T_OPEN_TAG, 
                            T_RETURN, 
                            T_WHITESPACE, 
                            T_ARRAY, 
                            T_LNUMBER, 
                            T_DNUMBER,
                            T_CONSTANT_ENCAPSED_STRING, 
                            T_DOUBLE_ARROW, 
                            T_CLOSE_TAG,
                            T_NEW,
                            T_DOUBLE_COLON
                            ))) {
                        continue;
                    }

                    exit("For your security, we stoped data parsing at '(" . token_name($type) . ") " . $token[1] . "'.");
                }
            }
        }

        return eval($string);
    }

$a='array(10,20)';
print_r(stringToArray($a)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:18:00.160

使用[标记器](http://php.net/manual/en/ref.tokenizer.php)：

```
function stringToArray($str) {
    $array = array();
    $toks = token_get_all("<?php $str");

    if ($toks[1][0] != T_ARRAY || $toks[2] != '(' || end($toks) != ')')
        return null;

    for($i=3; $i<count($toks)-1; $i+=2) {
        if (count($toks[$i]) != 3)
            return null;

        if ($toks[$i][0] == T_WHITESPACE) {
            $i--;
            continue;
        }

        if ($toks[$i][0] == T_VARIABLE || $toks[$i][0] == T_STRING)
            return null;

        $value = $toks[$i][1];
        if ($toks[$i][0] == T_CONSTANT_ENCAPSED_STRING)
            $value = substr($value, 1, strlen($value) - 2);

        $array[] = $value;

        if ($toks[$i + 1] != ',' && $toks[$i + 1] != ')' && $toks[$i + 1][0] != T_WHITESPACE)
            return null;
    }

    return $array;
} 
```

以上仅适用于文字。传递变量、常量、表达式、嵌套数组或格式错误的数组声明将返回`null`：

```
stringToArray('array(1,2)');              // works
stringToArray('array(1,2.4)');            // works
stringToArray('array("foo",2)');          // works
stringToArray('array(\'hello\',2)');      // works
stringToArray('array()');                 // works
stringToArray('array(1,2 + 3)');          // returns null
stringToArray('array(1,2 + 3)');          // returns null
stringToArray('array("foo"."bar")');      // returns null
stringToArray('array(array("hello"))');   // returns null
stringToArray('array($a,$b)');            // returns null
stringToArray('array(new bar)');          // returns null
stringToArray('array(SOME_CONST)');       // returns null
stringToArray('hello');                   // returns null 
```

您还可以使用以下内容检查您的字符串是否为数组表达式：

```
function isArrayExpression($str) {
    $toks = token_get_all("<?php $str");
    return (
        $toks[1][0] == T_ARRAY &&
        $toks[2] == '(' &&
        end($toks) == ')'
    );
}

isArrayExpression('array(1,2,3)');         // true
isArrayExpression('array is cool');        // false
isArrayExpression('array(!!!!');           // false 
```

您可以随时根据需要对其进行调整。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T18:57:45.093

您可以使用 eval，但我强烈建议不要使用它，而是尝试以更好的方式重新考虑您的设计来处理设置。因此，对于您的示例，而不是存储

```
'setting' => 'array(50,25)' 
```

你能做类似的事情吗

```
'setting' => array('type'=>'array', 'value'=>'50, 25') 
```

然后当你加载你可以做的设置

```
switch($type)
case 'array'
  $val = explode(', ', $value) 
```

或类似的东西

但就像其他人建议的那样，我会尝试使用序列化保存设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T19:01:29.080

正如您帖子评论中所建议的那样， eval() 将满足您的需求。但是，首先将数组存储为字符串并不实际。如果您希望使数据更具可移植性，我建议使用[json_encode()](http://php.net/manual/en/function.json-encode.php)甚至[serialize()](http://php.net/manual/en/function.serialize.php)

# java - Spring + Mongo + 泛型 + 灵活性

> ID：11267441
> 
> 赞同：1
> 
> 时间：2012-06-29T18:54:15.793
> 
> 标签：java, spring, generics, mongodb

以下代码不起作用（当然），因为标记的行无法编译：

```
MyClass {
    //singleton stuff
    private static MyClass instance;
    private MyClass () {}
    public static MyClass getInstance() {
        if(instance==null) {
            instance = new MyClass ();
        }
        return instance;
    }

    // method creating problems
    public NonGenericSuperClassOfGenericClass create(Class<?>... classes) {
        if(someCondition)
             return new GenericClass<classes[0],classes[1]>; // DOES NOT COMPILE
        else
             return new OtherGenericClass<classes[0]>;
    }
} 
```

因此，我实际上不知道“创建”是否会返回

```
GenericClass<classes[0],classes[1]> 
```

或者

```
OtherGenericClass<classes[0]> 
```

有不同数量的参数。

发生这种情况是因为我正在使用**Spring**并且我打算使用**MongoDB**，但将来我可能需要切换到不同的东西（例如 Hibernate）。

类 GenericClass 类似于：

```
 GenericClass<PersistetType1, Long> 
```

或者

```
 GenericClass<PersistentType2, Long> 
```

其中 PersistentType1/2 是我最终需要存储在数据库中的类，而 GenericClass 是一种访问 Mongo API 的代理。事实上，它看起来像：

```
 public MongoTemplate getTemplate();
  public void save(T toInsert);
  public List<T> select(Query selectionQuery);
  public T selectById(ID id);
  public WriteResult update(Query selectionQuery, Update updatedAttributes);
  public void delete(T toRemove);
  public void delete(Query selectionQuery); 
```

怎么办？从控制器（或实体，如果你很挑剔）我需要实例化存储库并调用任何方法。这导致控制器与 MongoDB 耦合，即它们必须显式实例化这样的 GenericClass，它实际上称为 MongoRepository 并且严格依赖于 Mongo（实际上它是一个具有恰好两个“自由度”的泛型）。

所以，我决定创建 MyClass，这是一个隔离控制器的进一步代理。这样，Controller 可以获取 MyClass 的单个实例，并让它创建相应存储库的新实例。特别是，当“somecondition”为真时，意味着我们要使用MongoRepository（当它为假时，可能需要实例化一个Hibernate代理，即HibernateRepository）。但是，MongoRepository 是通用的，因此它需要某种形式的实例化，我希望将其作为参数传递。

不幸的是，泛型是在编译时解决的，因此我猜它们对我不起作用。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:57:17.830

为了将底层持久性存储与应用程序逻辑分离，我将使用 DAO 方法。

使用所需的方法定义 DAO 的接口，例如保存、更新等。然后为您可能需要的每个持久性提供程序提供一个实现，例如 UserAccess 可能是您可以实现为 HibernateUserAccess 和 MongoUserAccess 的接口。在每个实现中，您注入适当的模板，例如 Mongo 或 Hibernate，并使用它来完成持久化操作。

您可能遇到的问题是您的加载操作将返回一个用户实例，这需要因持久性提供程序而异，即 JPA 注释将不同于 MongoDB 所需的 Spring Data 注释（泄漏抽象）。

我可能会通过创建一个用户界面来表示持久性操作的结果并为每个持久性提供者提供一个实现来解决这个问题。要么返回，要么返回您从 JPA 或 Mongo 加载的结果构建的通用模型。

# regex - 如何制作 FASTA 文件中特定模式出现的直方图？

> ID：11267442
> 
> 赞同：1
> 
> 时间：2012-06-29T18:54:15.910
> 
> 标签：regex, arrays, perl, bioinformatics, fasta

我为以下生物信息学问题编写了一个 Perl 脚本，但不幸的是，输出存在问题。

**问题**

1）从40,000个*唯一*序列的文件中，唯一的意思是序列ID号，提取以下模式

```
 $gpat = [G]{3,5}; $npat = [A-Z]{1,25};<br>
 $pattern = $gpat.$npat.$gpat.$npat.$gpat.$npat.$gpat; 
```

2）对于每个序列，查找是否`$pattern`出现在的值之间

*   0-100
*   100-200
*   200-300
*   ...
*   900-1000
*   > 1000

如果某个序列的长度小于 1000 个字符，则即使如此，也必须保持除法，即 0-100,100-200 等。

**问题**

我遇到的主要问题是计算***每个序列细分***出现 $pattern 的次数，然后***为所有序列添加它的计数***。

例如，对于序列 1，假设 $pattern 在长度 >1000 处出现 5 次。对于序列 2，假设 $pattern 在长度>1000 时出现 3 次。那么总数应该是 5+3 =8。

相反，我的结果是这样的： (5+4+3+2+1) + (3+2+1) = 21 即累计总数。

对于每个 100 个字符的前 10 个细分，我面临同样的问题。

如果可以为此计算提供正确的代码，我将不胜感激。

我写的代码如下。它很大程度上来自 Borodin 对我之前的一个问题的回答：[Perl: Search a pattern across array elements](https://stackoverflow.com/questions/11202714/perl-search-a-pattern-across-array-elements)

他的答案在这里：[https ://stackoverflow.com/a/11206399/1468737](https://stackoverflow.com/a/11206399/1468737)

*代码*：

```
use strict;
use warnings;

my $gpat = '[G]{3,5}';
my $npat = '[A-Z]{1,25}';
my $pattern = $gpat.$npat.$gpat.$npat.$gpat.$npat.$gpat; 
my $regex = qr/$pattern/i;

open my $fh, '<', 'small.fa' or die $!;

my ($id, $seq); 
my @totals = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0); #intialize the @total arrays...  
#..it should  contain 10 parts for 10 divisions upto 1000bp
my @thousandcounts =(0); #counting total occurrences of $pattern at >1000 length

while (<$fh>) {
  chomp;

  if (/^>(\w+)/) {
    process_seq($seq) if $id;
    $id = $1;
    $seq = '';
    print "$id\n";
  }
  elsif ($id) {
    $seq .= $_;
    process_seq($seq) if eof;
  }
}

print "Totals : @totals\n";
print "Thousand Counts total : @thousandcounts\n";

##**SUBROUTINE**    

sub process_seq {

  my $sequence = shift @_;   
  my $subseq = substr $sequence,0,1000;
  my $length = length $subseq;
  print $length,"\n";

  if ($length eq 1000) {

  my @offsets = map {sprintf '%.0f', $length * $_/ 10} 1..10;
  print "Offsets of 10 divisions: @offsets\n";

  my @counts = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
  my @count = (0); 

     while ($sequence =~ /$regex/g) {
     my $place = $-[0];
     print $place,"\n\n"; 

        if ($place <=1000){
        for my $i (0..9) { 
        next if $place >= $offsets[$i];                   
        $counts[$i]++;                                    
        last;
        }       

     }
      print "Counts : @counts\n\n";

      $totals[$_] += $counts[$_] for 0..9; 

        if ($place >1000){

        for my $i(0){
        $count[$i]++;
        last;
        }

        } print "Count greater than 1000 : @count\n\n"; 

         $thousandcounts[$_] += $count[$_] for 0;

  } 

} 

   #This region of code is for those sequences whose total length is less than 1000
   #It is working great ! No issues here
   elsif ($length != 1000) {

    my $substr = join ' ', unpack '(A100)*', $sequence;

    my @offsets = map {sprintf '%.0f', $length * $_/ ($length/100)} 1..10;
    print "Offsets of 10 divisions: @offsets\n";

    my @counts = (0, 0, 0, 0, 0, 0, 0, 0, 0, 0,);

       while ($sequence =~ /$regex/g) {
       my $place = $-[0];
       print "Place : $place","\n\n"; 

         for my $i (0..9) { 
         next if $place >= $offsets[$i];                   
         $counts[$i]++;                                    .
         last;
        }
      }
       print "Counts : @counts\n\n";

       $totals[$_] += $counts[$_] for 0..9;

  }

}#subroutine ends 
```

我还附上了我正在使用的文件的一小部分。这个文件的标题是`small.fa`，我一直在尝试使用这个文件，然后才转到包含超过 40,000 个序列的更大文件。

```
>NR_037701 1
aggagctatgaatattaatgaaagtggtcctgatgcatgcatattaaaca
tgcatcttacatatgacacatgttcaccttggggtggagacttaatattt
aaatattgcaatcaggccctatacatcaaaaggtctattcaggacatgaa
ggcactcaagtatgcaatctctgtaaacccgctagaaccagtcatggtcg
gtgggctccttaccaggagaaaattaccgaaatcactcttgtccaatcaa
agctgtagttatggctggtggagttcagttagtcagcatctggtggagct
gcaagtgttttagtattgtttatttagaggccagtgcttatttagctgct
agagaaaaggaaaacttgtggcagttagaacatagtttattcttttaagt
gtagggctgcatgacttaacccttgtttggcatggccttaggtcctgttt
gtaatttggtatcttgttgccacaaagagtgtgtttggtcagtcttatga
cctctattttgacattaatgctggttggttgtgtctaaaccataaaaggg
aggggagtataatgaggtgtgtctgacctcttgtcctgtcatggctggga
actcagtttctaaggtttttctggggtcctctttgccaagagcgtttcta
ttcagttggtggaggggacttaggattttatttttagtttgcagccaggg
tcagtacatttcagtcacccccgcccagccctcctgatcctcctgtcatt
cctcacatcctgtcattgtcagagattttacagatatagagctgaatcat
ttcctgccatctcttttaacacacaggcctcccagatctttctaacccag
gacctacttggaaaggcatgctgggtctcttccacagactttaagctctc
cctacaccagaatttaggtgagtgctttgaggacatgaagctattcctcc
caccaccagtagccttgggctggcccacgccaactgtggagctggagcgg
gagggaggagtacagacatggaattttaattctgtaatccagggcttcag
ttatgtacaacatccatgccatttgatgattccaccactccttttccatc
tcccagaagcctgctttttaatgcccgcttaatattatcagagccgagcc
tggaatcaaactgcctctttcaaaacctgccactatatcctggctttgtg
acctcagccaagttgcttgactattctcagtctcagtttctgcacctgtc
aaatagggtttatgttaacctaactttcagggctgtcaggattaaatgag
catgaaccacataaaatgtttggtgtatagtaagtgtacagtaaatactt
ccattatcagtccctgcaattctatttttcttccttctctacacagcccc
tgtctggctttaaaatgtcctgccctgctttttatgagtggataccccca
gccctatgtggattagcaagttaagtaatgacactcagagacagttccat
ctttgtccataacttgctctgtgatccagtgtgcatcactcaaacagact
atctcttttctcctacaaaacagacagctgcctctcagataatgttgggg
gcataggaggaatgggaagcccgctaagagaacagaagtcaaaaacagtt
gggttctagatgggaggaggtgtgcgtgcacatgtatgtttgtgtttcag
gtcttggaatctcagcaggtcagtcacattgcagtgtgtcgcttcacctg
gctccctcttttaaagattttccttccctctttccaactccctgggtcct
ggatcctccaacagtgtcagggttagatgccttttatgggccacttgcat
tagtgtcctgatagaggcttaatcactgctcagaaactgccttctgccca
ctggcaaagggaggcaggggaaatacatgattctaattaatggtccaggc
agagaggacactcagaatttcaggactgaagagtatacatgtgtgtgatg
gtaaatgggcaaaaatcatcccttggcttctcatgcataatgcatgggca
cacagactcaaaccctctctcacacacatacacatatacattgttattcc
acacacaaggcataatcccagtgtccagtgcacatgcatacacgcacaca
ttcccttcctaggccactgtattgctttcctagggcatcttcttataaga
caccagtcgtataaggagcccaccccactcatctgagcttatcaaccaat
tacattaggaaagactgtatttcctagtaaggtcacattcagtagtactg
agggttgggacttcaacacagctttttgggggatcataattcaacccatg
acagccactgagattattatatctccagagaataaatgtgtggagttaaa
aggaagatacatgtggtacaaggggtggtaaggcaagggtaaaaggggag
ggaggggattgaactagacacagacacatgagcaggactttggggagtgt
gttttatatctgtcagatgcctagaacagcacctgaaatatgggactcaa
tcattttagtccccttctttctataagtgtgtgtgtgcggatatgtgtgc
tagatgttcttgctgtgttaggaggtgataaacatttgtccatgttatat
aggtggaaagggtcagactactaaattgtgaagacatcatctgtctgcat
ttattgagaatgtgaatatgaaacaagctgcaagtattctataaatgttc
actgttattagatattgtatgtctttgtgtccttttattcatgaattctt
gcacattatgaagaaagagtccatgtggtcagtgtcttacccggtgtagg
gtaaatgcacctgatagcaataacttaagcacacctttataatgacccta
tatggcagatgctcctgaatgtgtgtttcgagctagaaaatccgggagtg
gccaatcggagattcgtttcttatctataatagacatctgagcccctggc
ccatcccatgaaacccaggctgtagagaggattgaggccttaagttttgg
gttaaatgacagttgccaggtgtcgctcattagggaaaggggttaagtga
aaatgctgtataaactgcatgatgtttgcaggcagttgtggttttcctgc
ccagcctgccaccaccgggccatgcggatatgttgtccagcccaacacca
caggaccatttctgtatgtaagacaattctatccagcccgccacctctgg
actccctcccctgtatgtaagccctcaataaaaccccacgtctcttttgc
tggcaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
aaa
>NR_002714 1
gttatacatctctaccattacctagcctgaaaagccacctcagattcagc
caacaagtaagtgggcattacaggagaagggtacctttcacaagggctgt
aatctaaaatcttggggaagatacagcgtcatctgtccaagaggtgtcag
cagtaacgaagcctcagtagaagccaaagttattttggattactgagcct
gtatagtttccagattctcaagagaaatatatgggaatgtagatatctca
gaggaccttcctgctgtcaggaattcagaggaggaaataaggaaggtaat
aggtgctctgctctcattctctcaaaccctcttccctgtgttttcctata
gagattgctgatttgctccttaagcaagagattcactgctgctcagcatg
gctcagaccaactcatgcttcatgctgatctcctgcctgatgttcctgtc
tctgagccaaggtgagattgttttccccacacatacctcccacaacccca
gccctgaagccctcactctatcctcatgcatatgagttcacttgagaaaa
agcagagtcaagttcaggggttgttttgtgttgttcagtgatatttattg
ctgatctcatcccattcaaaaacatcctgacctccctaaggagttagaga
tggaacttagcataaccctttatcagtgaccactgcagttggcattggtt
tgtcatattaacactactcatgatgggggtgttgaggatgtctgtttgta
gacagtcattagtggaatggggaactgaggggagctttgtgtgtagagaa
actggacaggcttgagaaagaagcctcagtccttcaaggaagaaaaagcc
ataagtaaaagggacaatggggacacttttcatgagcctattcattgtgt
gctcttgtcttgagcaaagacatcttgagagcctataggtaagatgcaga
agggcagaagtgaccaatcgcttcgtgacctataggatccttctattcct
ataaagaatcctcagaagctcctacctcatattttagcctttaccttgcc
ctgagggtctttcttaattgtctctcttttcccaggacaggaggcccatg
ctgagttgcccaaggcccagatcagctgcccagaaggcaccagtgcctaa
ggctcccactgctactactttaatgaagagcatgagacctgggtttatgc
agatgtgagtgaggagagcagtgtgggaagggaggctcacgaagggaggg
gaagctgccactctccagtgtgttcagtggctgatatgagatgagactaa
tcccctccctatccaatcatcagcccaaaactttccaatctactttatcc
catcattcagcacagagatgctggtggtcagtgacagcatcatcagggac
atttctgtgctgtcctttttctgttacatcctctgggagggctcaatatg
tctcccacactttcctccttcactgagtgctccattttcttctccaacag
ctctactgccagaacatgaattcaggtaacctggtgtctgtgctcaccca
ggctgagggtgcctttgtggcttcgctgattaaagagagtggcaccaagg
atagcaatgtctggattggcctccatgacccccaccggatcagtctgctg
catcttctacctcctgattatcaggttccagagggtctgatgtctggcac
ctcaagcatcagtttttactatattatgataaaagcaacctctctataaa
tcatataatgtaaaggatatcaaggttctccataggttcttcgagataag
cttaaagctgaatttcctgtgtgtttcaggcattcacagataaactcatt
ctctgtacttctagggtagcatctttatgtatctattatgtacctcttat
ctattgtgttatcatctctgttatagaagagccttctgtagaccatatag
aaaaagattatagaggaggagaatctactgctggcaattgggaaccgcaa
ggtatactaaataatatatcaacaactaatggccatctaatgctatgctg
gatatgaacttttggggcctcaggaaagaaaaaccaggaactagtttcaa
taatgaggtgtcatggttccctgtggcaaatttagaacgcttatcgtttg
gcaggacacagagaggtaggtgaacattccaggaaagaagcagcttagag
aaaatgtggaggaaataatatgacacttagagaaaaaggaaggtttattc
ttgtcttatgtcttgacctgtttctgagtgcgaacacaaaccaggtgttt
ctgtctctttctgagtcacgtctgcccctgttctggcccttccccatcta
gaactgccattatcagtggagtagtgggtccctggtctcctacaaatcct
gggacattggatccccaagctgtgccaatactgcctactgtgctagcctg
acttcaagctcaggtgaggggcacagaatccacacacttattgccatcct
ctcctatttatctctgaggatcgaccggggactgggatagaggaagggtg
agctcctcattcaggaaatagaggagtgtttcctctttatttttgctgag
tcctgcagccaggagggtaatacactctgatcccctcagtctgaatcttc
tcattgtcttataggattcaagaaatggaaggatgattcttgtaaggaga
agttctcctttgtttgcaagttcaaatactggaggcaattgtaaaatgga
cgtctagaattggtctaccagttactatggagtaaaagaattaaactgga
ccatctctctccatatcaatctggaccatctctcctctgctaaatttgca
tgactgatctttagtatctttacctacctcaatttctggagccctaaaca
ataaaaataaacatgtttcccccat
>NR_003569 1
ctgggacccacgacgacagaaggcgccgatggccgcgcctgctgagccct
gcgcggggcagggggtctggaaccagacagagcctgaacctgccgccacc
agcctgctgagcctgtgcttcctgagaacagcaggggtctgggtaccccc
catgtacctctgggtccttggtcccatctacctcctcttcatccaccacc
atggccggggctacctccggatgttccccactcttcaaagccaagatggt
gcttggattcgccctcatagtcctgtgtacctccagcgtggctgtcgctc
tttggaaaatccaacagggaacgcctgaggccccagaattcctcattcat
cctactgtgtggctcaccacgatgagcttcgcagtgttcctgattcacac
caagaggaaaaagggagtccagtcatctggagtgctgtttggttactggc
ttctctgctttgtcttgccagctaccaacgctgcccagcaggcctccgga
gcgggcttccagagcgaccctgtccgccacctgtccacctacctatgcct
gtctctggtggtggcacagtttgtgctgtcctgcctggcggatcaacccc
ccttcttccctgaagacccccagcagtctaacccctgtccagagactggg
gcagccttcccctccaaagccacgttctggtgggtttctggcctggtctg
gaggggatacaggaggccactgagaccaaaagacctctggtcgcttggga
gagaaaactcctcagaagaacttgtttcccggcttgaaaaggagtggatg
aggaaccgcagtgcagcccgggggcacaacaaggcaatagcatttaaaag
gaaaggcggcagtggcatggaggctccagagactgagcccttcctacggc
aagaagggagccagtggcgcccactgctgaaggccatctggcaggtgttc
cattctaccttcctcctggggaccctcagcctcgtcatcagtgatgtctt
caggttcactgtccccaagctgctcagccttttcctggagtttattggtg
atcccaagcctccagcctggaagggctacctcctcgccgtgctgatgttc
ctctcggcctgcctgcaaacgctgtttgagcagcagaacatgtacaggct
caaggtgctgtagatgaggctgcggtcggccatcactggcctggtgtaca
gaaaggcatccacagcatatctgaagaaatattcagaagttaactaatct
cagatgatttcagcaggagtaaagaagagaaacagactcagaaatgccat
tacaacagttaattatgtcaaatttatcaccctgattgatcacgcagcat
taacctcaagaacgccaagccaagtttttttgacaaatgtgagccaaggt
ttccgaaaaactagcagatatgactgtgacttacaaaatggaaaaagtaa
acgagaaacacaatttgatatgatttaataaaagatttgtttccaccact
tctcctgggaacctcagcacattttctttccactgacagttattatctct
acctttattgaacaaagacacccggaacacagctgctgaggatcagtaaa
gaaaatcattcttttattaataagactgttattagcaggaaaaaaaaatc
catgtttgggagtttgcactgaagttacaggccattttgaagaaatatgg
ctgactagtgccaacattatttcaggcaatttcatgatcaaatgtcttat
taggttgtttaaaatttttatagagattgtaaatcagaactattttctat
ttgccctaaatatttagatgctacagggaaagcagatcaaattaaagggt
actgtgcacatttttttactgggaactcccagggatataaatcatttcgc
ctgcagcatggaattcttcagtacacatgcttgtggaaacattccacgct
ccgccagcacgctcattaaagtgatgatttgggttgcaacaacagtgcca
agtacttcctgtgttcaactggggaccatgtggcaagacccaaagcttcc
ccagagatcctatgggaataagttttttgagccaccatattccattattt
cagcctaaaataacaccatgggacaagaatcagaagacagaggagcagac
aaatgtgtgtagacatgctggaaggaatctttctttttagaaacagggtc
aatatctattaaactttaagatgtgtatctcttgacctggcagtttctgt
atttgagttttaacctactgatatacccatgcatgtgaataaagtatctt
cctgcatgtaacaggatatttaatgtaaccttgattatagttgcaaatgc
tgggaaacgatccaaatgtctttcaatatggcactgattaaataaattat
ggcacagtctcacaatgaaaaacaaatgtagccattaaacagaatgaaat
gggtctagctaaattgaaataggactacctctaagatatgttgttaaaaa
gaaaaaaaagaaagtgcagaggaacaagtatgataccattttgtattttt
taacatatgcaagcgtgattgtgcccacacagaatacctttgaaaataaa
ctcagtatttgcctcagtggataaaaacaagaaccagccttattttcact
gttatatcttttggtgccactttttgaactttttaccatatgtgcatatg
taactttctaaataaattttgtaaaaaaaaaaaaaaaaaa
>NR_002817 2
aactcggtctccactgcactgctggccagacgagggatgttattttgggc
agtgcatctggacttggttcaagtggcaccagccaaatccctgccttact
gacctctcccctggaggagcaggagcagtgctcaaggccgccctgggagg
gctgagaggcaggctctggactggggacacagggatagctgagccccagc
tgggggtggaagctgagccagggacagtcacagaggaacaagatcaagat
gcgctttaactgagaagcccccaaggcagaggctgagaatcagaagacat
ttcagcagacatctacaaatctgaaggacaaaacatggttcaagcatctg
ggcacaggcggtccacccgtggctccaaaatggtctcctggtccgtgata
gcaaagatccaggaaatatggtgcgaggaagatgagaggaagatggcgcg
agagttcctggccgagttcatgagcacatatgtcatgatggagtggctga
ccgggatgctccagctgtgtctcttcgccatcgtggaccaggagaacaac
ccagcactgccaggaacacacgcactggtgataggcatcctcgtggtcat
catcagggtgtaccatggcatgaacacaggatatgccatcaatccgtccc
gggacctgccccccccccccgcatcttcaccttcattgctggttggggca
aactggtcttcaggtactgcccctgcccaggcccattcctttgagatttt
ctgtggggcccctgtgtgttgaggtgtggggggtgatgtgaggggcagca
caggagggtcctgcagagcccccaggtggcctggggagcaggagtgagtc
ccaacatttccccaggccagtagagatacagatcctgcacctgcactgag
tgtcaaccctgtccctgagtcgggctgaggctgaccagggccccgggttg
ggggtgtttcctgggttagcctgaggatgactcctctgctcaaccagtct
tggcccgaggtggatgagggtgctgtcctgggcatcagccccctcagccg
gcctctgcctcttgcctgcagcgatggggagaacttgtggtgggtgccag
tggtggcaccacttctgggtgcctctctaggtggcatcatctacctggtc
ttcattggctccaccatcccacgggagcccctgaaattggaggactctgt
ggcatatgaagaccacgggataaccgtattgcccaagatgggatctcatg
aacccatgatctctccccttaccctcatctccgtgagccctgccaacaga
tcttcagtccaccctgccccacccttacatgaatccatggccctagagca
cttctaagcagagattatttgtgatcccatcccttccccaataaagagaa
gcttgtcccacagcagtacccccacttcctgggggcctcctgtggttggg
cttccctcctgggttcttccaggagctctagggctatgtcttagcccaag
gtgtagaggtgaggcacctcaagtctttcatgccctgggaactggggtgc
cccagggggagaatggggaagagctgacctgcgccctcagtaggaacaag
gtaagatgaaagaatgacagaaacagaatgagggattttcaggcaagggg
gaaggaagggcagttttggtgaaaggactgtagctgactggtggggggct
ggctttggaaatactttgaggggatcctgagactggactctagactctcc
cctggttgttcccttccccgagttctggccggttcttggaccagacaagg
catggcccaagaaggtagatcagaattttttagcctttttttcattagtg
ccttccctagtataattccagattttttttcttaatcacatgaaatttta
ataccacagatatactatacatctgtttatgttctgtatatgttctgtgc
tttatacgtaaaaaagagtaagattttttttcacctccccttttaagaat
cagttttaattcccttgagaatgcttgttatagattgaaggctggtaagg
ggttgggctcctctttcttcttcctggtgccagagtgctcccacatgaag
gaataggaaaggaagatgcaaagagggaaatccttcgaacacatgaagac
acaggaagaggcctcttagggctccaagggctccagggaagcagctgcag
aggttgggtggggtgaggggccaggatccactgaccctggggccaggcag
gaatcactctgttgcctggggctcagaaggcagtatcacccatggttcct
gtcattgctcatgtattttgcctttcaacaattattgtgcacctactgtg
tgcaggccctgcctggacactggggatgcgcagtggatgcactgggctct
gcctttgagggttgcagtttaatgggtgacaggtaattataaggaagaag
gtgagtgcagagtgggaggcttggaggctgtggggcttggggtgggggag
ctcacatccagcctctgggccaaggccaggaggcttcccagagcaggaga
cagagcagggtattgtggtggggggtgtcctttttggggctgggatctgc
actttacagtttgaggggatgggcagaggaggctgggcttcattctggag
gtggggacatggtgaggtgaggtttagaaagcacacctgagccgcagtgt
gtaggatgctggaaatggtggagatgggcctgcgaagagagtgctgggaa
gtgatgacccaggagcagcagccgggcacctaacaatgggtcagcaccgt
gggcgtggagacaaaggccgggattgatcaatacccgagaagtacaatgt
acaggacttgggctccatttggatggagtgggtgagggaggagtcagaaa
tggcttccgatttccagcttgggcctggggattggagatgtccccactga
gagtagggcacaagtgaggaaatggtttggagaggaagatgataagttac
atcatggatgtgctgagtctgagttgcctatgggacttggaatggggggt
ggcaaaaggtgtgtgatcttgagcaagatattcaactcttctgggccttg
gtcttctcatttgtaaaacggtgataagaatattacttcccatttgtgtt
gctgtgaatattaaatgcgctaccacatgt 
```

感谢您花时间解决我的问题。

任何帮助和输入将不胜感激。

感谢您花时间解决我的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:27:52.630

以下似乎有效。在玩的过程中，我将您发布在`__DATA__`脚本末尾的部分中的数据放在了这里。要将它与真实数据文件一起使用，您需要打开它，并将文件句柄传递给`run`.

```
#!/usr/bin/env perl

use strict; use warnings;
use Data::Dumper;
use List::MoreUtils qw( first_index );

if (@ARGV) {
    my ($input_file) = @ARGV;
    open my $input, '<', $input_file
        or die "Cannot open '$input_file': $!";
    run($input);
    close $input
        or die "Cannot close '$input_file': $!";
}
else {
    run(\*DATA);
}

sub run {
    my ($fh, $start_pat, $stop_pat) = @_;

    # These are your patterns. I changed $npat because I don't
    # think, e.g., q is a valid character in your input.
    my $gpat = '[g]{3,5}';
    my $npat = '[acgt]{1,25}';
    my $wanted = qr/$gpat$npat$gpat$npat$gpat$npat$gpat/;

    # These just tell us where a sequence begins and ends.
    my $start = qr/\A>([A-Za-z_0-9]+)/;
    my $stop = qr/[^acgt]/;

    # Set up the bins and labels for the histogram.
    my @bins = map 100 * $_, 1 .. 10;
    my @labels = map sprintf('%d - %d', $_ - 100, $_), @bins;

    # Initialize the histogram with all zero counts.
    my %hist = map { $_ => 0 } @labels;

    my $id;
    while (my $line = <$fh>) {
        # Whenever you see a new sequence, read it completely
        # and pass it to build_histogram.
        if (($id) = ($line =~ $start)) {
            print "Start sequence: '$id':\n";
            my $seq_ref;
            ($line, $seq_ref) = read_sequence($fh, $stop);

            my $hist = build_histogram(
                $seq_ref,
                $wanted,
                \@bins,
                \@labels,
            );

            # Add the counts from this sequence to the overall
            # histogram.

            for my $key ( keys %$hist ) {
                $hist{ $key } += $hist->{$key};
            }

            # exit loop if read_sequence stopped because of EOF.
            last unless defined $line;

            # else see if the line that stopped input is the start
            # of a new sequence.
            redo;
        }
    }

    print Dumper \%hist;
}

sub build_histogram {
    my ($seq_ref, $wanted, $bins, $labels) = @_;

    my %hist;

    while ($$seq_ref =~ /$wanted/g) {
        # Whenever we find segment which matches what we want,
        # store the position,
        my $pos = $-[0];

        # and find the bin where it fits.
        my $idx = first_index { $_ > $pos } @$bins;

        # if you do not have List::MoreUtils, you should install it
        # however, the grep can be used instead of first_index
        # my ($idx) = grep { $bins->[$_] > $pos } 0 .. $#$bins;
        # $idx = -1 unless defined $idx;

        # if it did not fit in the bins, then the position must
        # be greater than the upper limit of the last bin, put
        # it in "> than upper limit of last bin".
        my $key = ($idx == -1 ? "> $bins->[-1]" : $labels->[$idx]);
        $hist{ $key } += 1;
    }

    # we're done matching, return the histogram for this sequence
    return \%hist;
}

sub read_sequence {
    my ($fh, $stop) = @_;

    my ($line, $seq);

    while ($line = <$fh>) {
        $line =~ s/\s+\z//;
        last if $line =~ $stop;
        $seq .= $line;
    }

    return ($line, \$seq);
}

__DATA__

-- Either paste your data here, or pass the name
-- of your input file on the command line 
```

### 输出：

```
开始序列：'NR_037701'：
开始序列：'NR_002714'：
开始序列：'NR_003569'：
开始序列：'NR_002817'：
$VAR1 = {
          '700 - 800' => 0,
          '> 1000' => 10,
          '200 - 300' => 1,
          '900 - 1000' => 1,
          '800 - 900' => 1,
          '500 - 600' => 0,
          '0 - 100' => 0,
          '100 - 200' => 1,
          '300 - 400' => 0,
          '400 - 500' => 0,
          '600 - 700' => 0
        };
```

此外，您应该接受[Chris Charley 的建议](https://stackoverflow.com/a/11219135/100754)并使用[Bio::SeqIO](http://search.cpan.org/perldoc/Bio::SeqIO)来读取序列，而不是我的自制`read_sequence`函数。`BioPerl`我只是为了回答这个问题而懒得安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-01T09:24:54.737

[这与您之前的问题](https://stackoverflow.com/questions/11202714)几乎相同，只是间隔与序列的长度无关，因此可以只定义一次，而不是为每个序列更改它们。

该程序是对我以前的解决方案的修改。正如我所描述的，它从一组固定的值开始，`@offsets`从`100`到`1000`，步长为`100`，最终范围以20 亿或 20 亿`> 1000`终止。`2E9`这接近最大的 32 位正整数，用于捕获 1000 以上的所有偏移量。我假设您不会处理比这更大的序列？

`@totals`和数组初始化为零，其`@counts`元素数量与`@offsets`数组相同。

否则功能和以前一样。

```
use strict;
use warnings;

use List::MoreUtils 'firstval';

my $gpat = '[G]{3,5}';
my $npat = '[A-Z]{1,25}';
my $pattern = $gpat.$npat.$gpat.$npat.$gpat.$npat.$gpat;
my $regex = qr/$pattern/i;

open my $fh, '<', 'small.fa' or die $!;

my @offsets = map $_*100, 1 .. 10;
push @offsets, 2E9;
my @totals = (0) x @offsets;

my ($id, $seq);

while (<$fh>) {

  chomp;

  if (/^>(\w+)/) {
    process_seq($seq) if $id;
    $id = $1;
    $seq = '';
    print "$id\n";
  }
  elsif ($id) {
    $seq .= $_;
    process_seq($seq) if eof;
  }
}

print "Total: @totals\n";

sub process_seq {

  my $sequence = shift;

  my @counts = (0) x @offsets;

  while ($sequence =~ /$regex/g) {
    my $place = $-[0];
    my $i = firstval { $place < $offsets[$_] } keys @offsets;
    $counts[$i]++;
  }

  print "Counts: @counts\n\n";
  $totals[$_] += $counts[$_] for keys @totals;
} 
```

**输出**

对你的新数据文件运行这个程序`small.fa`会产生

```
Total: 1 1 0 0 0 0 0 1 0 1 10 
```

但是使用上一个问题的数据，`sample.fa`更有趣

```
Total: 5 4 1 0 0 2 2 1 0 0 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:16:38.443

通常，在 Perl 中，您可以通过以下方式计算模式的出现次数：

```
 $_ = $input;
 my $c = 0;
 $c++ while s/pattern//s; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T13:44:01.960

我终于能够弄清楚我的代码哪里出了问题。原来是循环问题。以下代码完美运行。我已经在评论中标记了我进行修改的地方。

```
#!/usr/bin/perl -w

use strict;
use warnings;

my $gpat    = '[G]{3,5}';
my $npat    = '[A-Z]{1,25}';
my $pattern = $gpat . $npat . $gpat . $npat . $gpat . $npat . $gpat;
my $regex   = qr/$pattern/i;

open OUT, ">Quadindividual.refMrna.fa" or die;
open my $fh, '<', 'refMrna.fa' or die $!;

my ( $id, $seq );    # can be written as my $id; my $seq;
my @totals = ( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, );    #intialize the @total arrays.
my @thousandcounts = (0);

while (<$fh>) {

  chomp;

  if (/^>(\w+)/) {
    process_seq($seq) if $id;
    $id  = $1;
    $seq = '';
    print "$id\n";
    print OUT "$id\n";
  }
  elsif ($id) {
    $seq .= $_;
    process_seq($seq) if eof;
  }
}

print "Totals : @totals\n";
print OUT "Totals : @totals \n";

print "Thousand Counts total : @thousandcounts\n";
print OUT "Thousand Counts total : @thousandcounts\n";

sub process_seq {

  my $sequence = shift @_;

  my $subseq = substr $sequence, 0, 1000;
  my $length = length $subseq;
  print $length, "\n";

  my @offsets = map { sprintf '%.0f', $length * $_ / 10 } 1 .. 10;
  print "Offsets of 10 divisions: @offsets\n";

  my @counts = ( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, );
  my @count = (0);

  # *MODIFICATION*
  # This if loop was intialized from my @offsets above earlier
  if ( $length eq 1000 ) {
    while ( $sequence =~ /$regex/g ) {
      my $place = $-[0];
      print $place, "\n\n";

      if ( $place <= 1000 ) {
        for my $i ( 0 .. 9 ) {
          next if $place >= $offsets[$i];
          $counts[$i]++;
          last;
        }

      }

      if ( $place > 1000 ) {

        for my $i (0) {
          $count[$i]++;
          last;
        }
      }

    }    #*MODIFICATION*
         #The following commands were also subsequently shifted to ..
         #...properly compute the total

    print "Counts : @counts\n\n";

    $totals[$_] += $counts[$_] for 0 .. 9;

    print "Count : @count\n\n";

    $thousandcounts[$_] += $count[$_] for 0;
  }

  elsif ( $length != 1000 ) {

    my $substr = join ' ', unpack '(A100)*', $sequence;

    my @offsets =
        map { sprintf '%.0f', $length * $_ / ( $length / 100 ) } 1 .. 10;
    print "Offsets of 10 divisions: @offsets\n";

    my @counts = ( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, );

    while ( $sequence =~ /$regex/g ) {
      my $place = $-[0];
      print "Place : $place", "\n\n";
      for my $i ( 0 .. 9 ) {
        next if $place >= $offsets[$i];
        $counts[$i]++;
        last;
      }
    }
    print "Counts : @counts\n\n";

    $totals[$_] += $counts[$_] for 0 .. 9;

  }

}    #subroutine ends 
```

# c++ - 将 const char 数组转换为标头中的整数总是安全的吗？

> ID：11267443
> 
> 赞同：0
> 
> 时间：2012-06-29T18:54:51.430
> 
> 标签：c++, standards, standards-compliance

忽略它是多么令人厌恶和骇人听闻，以下内容是否可以保证是安全的？如果不是，为什么？

```
//.h
struct foo
{
 const static intptr_t KEY = (intptr_t) "VALUE";
};

//.cpp
void useFoo()
{
 const char * value = (const char *) foo::KEY;
 printf("%s",value);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T18:59:52.947

不仅不能保证代码安全，而且代码格式不正确。

`"VALUE"`是 type `char const[6]`，不能转换成`intptr_t`via `static_cast`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:00:12.167

保证不编译。您不能使用`static_cast`将指针转换为整数类型，反之亦然。如果它是一个，至少可以说`reinterpret_cast`是*脆弱*的，因为编译器可以进行常量折叠并且`KEY`可能变得不唯一。

此外，您应该在应用程序中*定义*静态成员变量。`KEY`

# php - PHPExcel 模式样式

> ID：11267444
> 
> 赞同：2
> 
> 时间：2012-06-29T18:54:51.510
> 
> 标签：php, phpexcel

有谁知道用于将图案样式添加到单元格颜色的语法？我想添加一条细的反向斜条纹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:05:25.173

据我所知，这是不可能的。在`\Style\Fill.php`中，这些似乎是唯一的选择，尽管可能会有具有更多选择的更新版本。

```
$worksheet->getStyle('A:C')->getFill()->setFillType(PHPExcel_Style_Fill::FILL_SOLID);

/* Fill types */
const FILL_NONE                         = 'none';
const FILL_SOLID                        = 'solid';
const FILL_GRADIENT_LINEAR              = 'linear';
const FILL_GRADIENT_PATH                = 'path';
const FILL_PATTERN_DARKDOWN             = 'darkDown';
const FILL_PATTERN_DARKGRAY             = 'darkGray';
const FILL_PATTERN_DARKGRID             = 'darkGrid';
const FILL_PATTERN_DARKHORIZONTAL       = 'darkHorizontal';
const FILL_PATTERN_DARKTRELLIS          = 'darkTrellis';
const FILL_PATTERN_DARKUP               = 'darkUp';
const FILL_PATTERN_DARKVERTICAL         = 'darkVertical';
const FILL_PATTERN_GRAY0625             = 'gray0625';
const FILL_PATTERN_GRAY125              = 'gray125';
const FILL_PATTERN_LIGHTDOWN            = 'lightDown';
const FILL_PATTERN_LIGHTGRAY            = 'lightGray';
const FILL_PATTERN_LIGHTGRID            = 'lightGrid';
const FILL_PATTERN_LIGHTHORIZONTAL      = 'lightHorizontal';
const FILL_PATTERN_LIGHTTRELLIS         = 'lightTrellis';
const FILL_PATTERN_LIGHTUP              = 'lightUp';
const FILL_PATTERN_LIGHTVERTICAL        = 'lightVertical';
const FILL_PATTERN_MEDIUMGRAY           = 'mediumGray'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T18:01:13.857

从 GDP 答案中列出的水平或垂直模式中选择最合适的模式，设置适当的颜色，然后为填充设置旋转（）：

```
$worksheet->getStyle('A1')->getFill()
    ->setFillType(PHPExcel_Style_Fill::FILL_GRADIENT_LINEAR)
    ->setStartColor(new PHPExcel_Style_Color(PHPExcel_Style_Color::COLOR_BLACK))
    ->setEndColor(new PHPExcel_Style_Color(PHPExcel_Style_Color::COLOR_WHITE))
    ->setRotation(45); 
```

# objective-c - 图像像素化

> ID：11267445
> 
> 赞同：0
> 
> 时间：2012-06-29T18:55:01.877
> 
> 标签：objective-c, ios

这就是我想要做的

1.  创建一个 UIImage 视图。
2.  在上面画一些
3.  按共享按钮将图像与上面的图纸共享。

我的代码在 iPad 和 iPhone 上完美运行。问题来自视网膜显示器。所以我的猜测是一些规模没有正确处理，但不确定我做错了什么。这是我的代码

```
// Create the UIImageView named centerCanvas
// Do the drawing
CGPoint origin = centerCanvas.frame.origin;
CGSize  size   = centerCanvas.frame.size;
CGSize screenSize = [self returnScreenSize];
CGRect  rect   = CGRectMake(origin.x, origin.y, size.width, size.height);
UIGraphicsBeginImageContext(screenSize);
CGContextRef context = UIGraphicsGetCurrentContext();
[self.view.layer renderInContext:context];
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
CGImageRef imageRef = CGImageCreateWithImageInRect([img CGImage], rect);
[shareView setImage:[UIImage imageWithCGImage:imageRef]]; 

-(CGSize) returnScreenSize
{
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    CGFloat screenScale = [[UIScreen mainScreen] scale];
    CGSize screenSize = CGSizeMake(screenBounds.size.width * screenScale,screenBounds.size.height * screenScale);
    return screenSize;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:58:28.807

尝试使用

```
 UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0); 
```

而不是旧的 UIGraphicsBeginImageContext，它使用等于 1 的比例因子（上面的第三个参数）。通过给出`0.0`比例因子，您可以获得当前屏幕的比例因子。看看[参考](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsBeginImageContextWithOptions)。

# python - 连续数据流 Arduino 到 Python

> ID：11267446
> 
> 赞同：3
> 
> 时间：2012-06-29T18:55:05.653
> 
> 标签：python, arduino

我正在尝试使用[Tkinter](http://en.wikipedia.org/wiki/Tkinter)获取 Python GUI 窗口，以连续显示来自充当电压表的[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)板的数据流。使用我得到的代码，窗口将显示一个数据点，一旦窗口关闭，就会打开一个新窗口，其中包含下一个可用数据点。这是我一直在使用的代码：

```
import serial
from Tkinter import *
ser = serial.Serial('/dev/tty.usbmodem621')
ser.baudrate = 9600
while 1 == 1:
    reading = ser.readline()
    root = Tk()
    w = Label(root, text = reading)
    w.pack()
    root.mainloop() 
```

我正在使用[MacBook Pro](http://en.wikipedia.org/wiki/MacBook_Pro)和[pySerial](http://pyserial.sourceforge.net/)包进行串行通信。如何让窗口自行刷新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T14:06:24.507

我认为问题在于您正在为每个循环迭代创建一个新的根。试试这个代码：

```
import serial
from Tkinter import *
from time import sleep
ser = serial.Serial('/dev/tty.usbmodem621')
ser.baudrate = 9600

def update():
    while 1:
        reading.set(ser.readline())
        root.update()
        sleep(1)

root=Tk()
reading = StringVar()

w = Label(root, textvariable = reading)
w.pack()

root.after(1,update)    
root.mainloop() 
```

这将“mainloop”设置为在一毫秒后调用“update”函数，并使用对变量“reading”的引用而不是它的实际值，从而允许对其进行更新。

我希望这有帮助。

# android - Android 聊天/MUD 客户端 - WCF 或 Socket 可行？

> ID：11267447
> 
> 赞同：1
> 
> 时间：2012-06-29T18:55:07.337
> 
> 标签：android, wcf, sockets

我正在尝试为 android 创建一个基于文本的多人游戏（类似于 oldschool MUD）。我目前有一个基本的 wcf 服务正在工作 - 我可以在我的 android 应用程序上发出请求，我的服务器会用一团 xml 数据进行响应。

但是，我不确定这是否是一个可行的策略——如果使用 WCF，我会受到我可以向服务器发出的请求数量和频率的限制。套接字连接似乎提供了我需要的全双工通信，但我不确定如何实现这一点（我读过 Android 可能不支持我描述的这种双工套接字通信？）。无论如何，这里的指导将不胜感激。

我可以合理地希望多久从 3g 上的 android 手机轮询我的 WCF 服务？这对于通过服务器在多个用户之间进行聊天之类的速度是否足够快？

有一些我可以查看的android套接字代码吗？我可以使用 Visual Studio (IIS？) 或 Eclipse 托管我自己的套接字服务器吗？

# java - 读取远程文件的内容

> ID：11267455
> 
> 赞同：1
> 
> 时间：2012-06-29T18:55:46.987
> 
> 标签：java, jsch, channel-api

有没有办法使用 jSch 读取远程服务器中文件的内容。我不想 scp 到我的本地机器，因为我无法获得许可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:16:38.723

打开 SSH 并发送命令：

> “猫文件名”

# r - 在条形图中获取 x 轴坐标？

> ID：11267457
> 
> 赞同：2
> 
> 时间：2012-06-29T18:56:11.680
> 
> 标签：r, ggplot2

我正在尝试将每个条形的值添加到我的条形图中。我想在中间写下每个条的值。我知道如何在 Y 轴上找到中点，但我不知道如何在 x 轴上找到中点。如果我知道如何获得每个条的起点和终点，我们可以找到中间点，但我不知道如何。谁能指导我如何解决这个问题？这是我的代码：

```
G3.AllLevels.data$pos = G3.AllLevels.data$ProfChange*0.5

ggplot(data=G3.AllLevels.data, aes(x=ProfLevel, y=ProfChange, fill=TRTstatus)) + 
   geom_bar(position=position_dodge(), colour="black") + 
   scale_fill_manual(values=c(rgb(198, 64, 5, maxColorValue=255), 
                     rgb(33, 80, 186, maxColorValue=255))) +
   ylab("Change in %Students in Each Level") + 
   xlab("Achievement Levels") + 
   opts(axis.text.x  = theme_text(size=12), 
        axis.title.x = theme_text(size=14),
        axis.title.y = theme_text(angle = 90, size=14)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T20:38:52.253

只要您正确构建带有标签的第二个数据框，您实际上并不需要数字坐标：

```
p <- ggplot(diamonds, aes(clarity, fill=cut)) + 
        geom_bar(position="dodge")

lab_dat <- unique(diamonds[,c("cut","clarity")])
lab_dat$y <- 4000
lab_dat$lab <- with(lab_dat,paste(cut,clarity,sep = "-"))

p + geom_text(data = lab_dat,aes(y=y,label = lab),
                angle = 90,size = 2,position = position_dodge(width = 1)) 
```

![在此处输入图像描述](../Images/a69d5372e8f98bc80662d39a417c305d.png)

# excel - 将文本文件导入excel工作表

> ID：11267459
> 
> 赞同：20
> 
> 时间：2012-06-29T18:56:45.737
> 
> 标签：excel, vba

我正在编写一个 VBA 代码，它应该删除所选 Excel 工作表上的数据，打开一个文本文件选择对话框，然后将该文本文件中的数据导入到我已从中删除数据的同一工作表中。到目前为止，我只能将文本文件打开到新工作簿中，但无法将其打开到我已从中删除数据的同一张工作表中。

到目前为止，这是我带来的，感谢您的帮助：

```
Dim Filt As String
Dim FilterIndex As Integer
Dim Title As String
Dim FileName As Variant

Filt = "Cst Files (*.prn),*.prn"
Title = "Select a cst File to Import"
FileName = Application.GetOpenFilename(FileFilter:=Filt, Title:=Title)

If FileName = False Then
MsgBox "No File Was Selected"
Exit Sub
End If

With Application.ActiveSheet
    Cells.Select
Selection.QueryTable.Delete
Selection.ClearContents
End With

Workbooks.Open FileName 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-29T19:08:07.403

There are many ways you can import Text file to the current sheet. Here are three (including the method that you are using above)

1.  Using a QueryTable
2.  Open the text file in memory and then write to the current sheet and finally applying Text To Columns if required.
3.  If you want to use the method that you are currently using then after you open the text file in a new workbook, simply copy it over to the current sheet using `Cells.Copy`

**Using a QueryTable**

Here is a simple macro that I recorded. Please amend it to suit your needs.

```
Sub Sample()
    With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;C:\Sample.txt", Destination:=Range("$A$1") _
        )
        .Name = "Sample"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = True
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

**Open the text file in memory**

```
Sub Sample()
    Dim MyData As String, strData() As String

    Open "C:\Sample.txt" For Binary As #1
    MyData = Space$(LOF(1))
    Get #1, , MyData
    Close #1
    strData() = Split(MyData, vbCrLf)
End Sub 
```

Once you have the data in the array you can export it to the current sheet.

**Using the method that you are already using**

```
Sub Sample()
    Dim wbI As Workbook, wbO As Workbook
    Dim wsI As Worksheet

    Set wbI = ThisWorkbook
    Set wsI = wbI.Sheets("Sheet1") '<~~ Sheet where you want to import

    Set wbO = Workbooks.Open("C:\Sample.txt")

    wbO.Sheets(1).Cells.Copy wsI.Cells

    wbO.Close SaveChanges:=False
End Sub 
```

**FOLLOWUP**

You can use the `Application.GetOpenFilename` to choose the relevant file. For example...

```
Sub Sample()
    Dim Ret

    Ret = Application.GetOpenFilename("Prn Files (*.prn), *.prn")

    If Ret <> False Then
        With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;" & Ret, Destination:=Range("$A$1"))

            '~~> Rest of the code

        End With
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-22T16:08:58.570

您可以在 .Refresh BackgroundQuery:=False 之后编写 .WorkbookConnection.Delete 这将删除文本文件外部连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T20:25:26.607

我认为[我在这里对我自己的问题的回答](https://superuser.com/a/731537/45564)是您尝试做的最简单的解决方案：

1.  选择文件中第一行文本所在的单元格。

2.  使用`Data`//对话框选择要导入的文本文件`Get External Data`。`From File`

3.  根据需要格式化导入的文本。

4.  在`Import Data`打开的对话框中，单击`Properties...`

5.  取消选中该`Prompt for file name on refresh`框。

6.  每当外部文件更改时，单击//`Data`按钮。`Get External Data``Refresh All`

注意：在您的情况下，您可能应该跳过第 5 步。

# php - 将用户当前页面保存在数据库中

> ID：11267461
> 
> 赞同：-1
> 
> 时间：2012-06-29T18:56:55.903
> 
> 标签：php, mysql

嗨，我在用户登录阅读文章的网站上工作，每篇文章都基于一个类别。所以我想在“用户主页”上显示最后访问/阅读的类别和文章。这适用于多个类别，因此需要显示“类别 'a' 已阅读 20 篇文章中的 12 篇'单击此处继续阅读'”如果有人可以帮助我或向我发送正确的方向，非常感谢任何帮助/信息. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:02:17.717

只是一个想法。您可以创建一个额外的表，我们称之为**user_read**并存储哪个用户阅读了哪篇文章。

表**user_read**

```
user_id
article_id 
```

我假设您知道哪个文章属于每个类别，因此您可以计算用户阅读了每个类别中的文章数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:02:57.587

如果您正在考虑的话，没有特殊的实用程序可以为您做类似的事情。您需要做的是在 MySQL 中创建一个表来存储用户阅读的文章列表。也许是一个只有`user_id`和的表`article_id`，它们一起构成了主键。`INSERT IGNORE`当用户访问一篇文章时，当你想获取阅读了多少篇文章时，你可以`SELECT COUNT(*) FROM table WHERE user_id = ?`

`SELECT COUNT(*) FROM table WHERE user_id = ? AND article_id IN (SELECT id FROM articles WHERE category_id = ?)`

上面的查询可以让您获取指定用户在指定类别中查看的文章数量，假设您已将其设置为这样。

您还提到您希望能够选择用户最近阅读的文章或类别。为此，您可以将时间戳字段添加到您创建的新表中。另一种方法是添加一个 auto_increment 字段并获取最大的字段。

# python - 在 Windows x64 上编译 Python 模块

> ID：11267463
> 
> 赞同：17
> 
> 时间：2012-06-29T18:57:08.857
> 
> 标签：python, visual-studio, python-2.7, compilation, windows-7-x64

我正在开始一些文字处理项目，我需要 NumPy 和 NLTK。那是我第一次知道`easy_install`如何将python的新模块编译到系统中。

我有 Python 2.7 x64 加上 VS 11 和 VS 12。还有 Cygwin（我猜是最新的）。我可以在使用 VS 编译的文件中看到，它会查找与编译 python 代码的版本相同的 VS env，为什么？当我对我的版本 11.0 进行硬编码时，numpy 未能建立几个奇怪的错误`vcvarsall`（它发现`vcvarsall`，可能误用了它）。

我不能在 Windows 上构建 python 二进制文件吗？如果没有，我可以在 Linux for Windows 上交叉编译吗？（对 Android SDK 使用与 Google 相同的方法）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-06T20:07:20.110

***更新：**这个答案现在已经超过 5 年了！Python-2.7 即将被弃用，因此您真正需要的是适用于 Python-3 的 Microsoft Visual C 编译器。在 MS Windows 编译器上查看[这个 Python wiki](https://wiki.python.org/moin/WindowsCompilers)。带有 VC-14.0 的 MS Build Tools 2015 是构建 Python-3.5 和 3.6 扩展所需的工具。您可以安装包含 VC-14.0 的较旧的[MS 构建工具 2015或](https://www.microsoft.com/en-us/download/details.aspx?id=48159)[2017](http://landinghub.visualstudio.com/visual-cpp-build-tools)年的较新的 MS 构建工具- 单击链接，然后向下滚动，直到找到[Visual Studio 2017 的构建工具](https://www.visualstudio.com/downloads/#build-tools-for-visual-studio-2017)- 其中还包括 VC-14.0。*

*此外，如果您的 pip 和 setuptools 版本是最新的，那么您可以忽略所有那些愚蠢的老式 MSSDK 废话。特别是如果您使用 VC for Python 2.7 或 MS 构建工具 2015。从 setuptools-24 开始，它只知道在哪里寻找这些编译器，希望如此。*

***更新：**正如[Zooba](https://stackoverflow.com/users/891/zooba)在下面提到的，[现在可以从 Microsoft 获得适用于 Python-2.7 的免费 x86 和 AMD64 (x86-64) VC90 c 编译器](http://www.microsoft.com/en-us/download/details.aspx?id=44266)。*

***更新：** [补丁`vcvarsall.bat`](https://gist.github.com/mikofski/11024332#file-vcvarsall-bat-patch)以直接`pip`在任何 shell 中使用来自 SDK v7.0 的 x64 编译器，而不是使用 SDK shell 以及设置`DISTUTILS_USE_SDK`和`MSSdk`环境变量，如下面的说明。请参阅[修复 vcvarsall.bat 以使用 v90 而不是 sdk7 安装 Python-2.7 x64 扩展](http://poquitopicante.blogspot.com/2014/04/fix-vcvarsallbat-to-install-python-27.html)。*

***tl;dr：**使用 Windows SDK v7.0 编译器，打开 SDK shell 并调用*

```
C:\> setenv /release /x64
C:\> set DISTUTILS_USE_SDK=1
C:\> MSSdk=1 
```

*使用 distutils`pip`或`easy_install`. 请参阅[带有 pip、MSVC 2008 Express 和 SDK 7 的 Python x64 包扩展](http://poquitopicante.blogspot.com/2012/11/python-x64-package-extensions-with-pip.html)。*

*注意*：您可以安装[使用来自 Christoph Gohlke 的英特尔 MKL 优化的 Numpy](http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy)。对于 virtualenv，尝试将二进制分发 Windows 安装程序转换为可以使用 pip安装的[轮文件。](https://pypi.python.org/pypi/wheel)从源代码构建[NumPy](http://www.numpy.org/)**并非易事**。[随着OpenBLAS （](http://www.tacc.utexas.edu/tacc-projects/gotoblas2) [GotoBLAS](http://www.openblas.net/)的一个分支）的最近推出和可用性，这已成为一种可能。有[适用于 Windows x86 和 x86-64 的优化二进制文件](http://sourceforge.net/projects/openblas/files)以及比 GotoBLAS 或[ATLAS](http://math-atlas.sourceforge.net/)更易于编译的源代码。

*注意*：过去我不建议从源代码编译 NumPy，因为您必须为您的平台优化 BLAS，这非常耗时，并且参考 BLAS (FORTRAN) 或 CBLAS (C/C++) 实现的性能相对较低. NumPy 还依赖于[LAPACK](http://www.netlib.org/lapack/)，LAPACK 也依赖于 BLAS，这是构建 NumPy 的额外障碍。但是 OpenBLAS 二进制文件已经用 LAPACK 编译，所以这个障碍已经被消除了。请参阅[Carl Kleffner 的静态 MinGW-w64 工具链以在 Windows 上使用 OpenBLAS 构建 NumPy](https://bitbucket.org/carlkl/mingw-w64-for-python) - 他解决了一些 ABI 不兼容问题以及链接到正确的 Microsoft Visual C Common Runtime 库（`msvcr90.dll`适用于 Python-2.7）的问题。

# 那么接下来是关于在 Windows 7 x64 上安装 Python 扩展的主要问题。

编译扩展的推荐方法是使用与编译 Python 共享库 [1-3] 相同的编译器。用于 Windows的[官方 Python 2.7.x](http://www.python.org/getit/)是使用[Microsoft Visual Studio 2008 Professional 中的 Microsoft Visual C++ 编译器版本 9.0 [4]（又名 MSVC90 或简称 VC90）编译的](http://www.microsoft.com/en-us/download/details.aspx?id=3713)，您可以从[Microsoft DreamSpark](https://www.dreamspark.com/Product/Product.aspx?productid=1)免费获得。显然 x64 编译器默认没有安装，因此请确保它们与 x86 编译器一起安装。*注意：MS Visual Studio 2008 可能不再可用，但 MS Visual Studio 2010 将允许您使用 MSVC90 工具链（如果已安装，可从 Windows SDK7 安装）。*

当你从命令行执行 python 解释器时，你可以通过查看标题来判断你的 Python 是用什么版本构建的。*eg* :`Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win32`表示它是用 VS 2008 C++ 构建的。您可以从源代码自己构建 Python，但这也是一项艰巨的任务。一般来说，不建议混合编译器运行时，尽管在实践中您可能会发现它们仍然有效。

如果您决定使用[GNU GCC](http://gcc.gnu.org/)，那么您将不得不使用[mingw-w64](http://mingw-w64.sourceforge.net/)，因为[MinGW](http://www.mingw.org/)仅适用于原生 x86 应用程序，而不适用于 AMD64/x86-64。您将需要

*   [创建一个 distutils 配置文件来指定 mingw 编译器](http://docs.python.org/2/install/index.html?highlight=pydistutils#distutils-configuration-files)，
*   [从 distutils.cygwinccompiler.Mingw32ccompiler](http://bugs.python.org/issue12641)和
*   [使用`pexports.exe`msys 或msys2 导出库定义文件，并使用(msys/msys2)`gendef.exe`制作静态库（但适用于 Windows 的官方 Python 的最新版本已经在文件夹中包含此文件，谢谢！）`libpython27.a``dlltool.exe``Python27\lib`](https://docs.python.org/2/install/index.html?highlight=pexports#older-versions-of-python-and-mingw)。

但是最后你*仍然*需要链接到构建 python 的运行时`msvcr90.dll`，所以你需要[Visual C++ 2008 redistributable](http://www.microsoft.com/en-us/download/search.aspx?q=Visual+C%2b%2b+2008+redistributable)。*注意：来自 mingw-w64 的 Windows GCC 使用[`msvcrt.dll`的不是相同`msvcr90.dll`或更高版本](http://en.wikipedia.org/wiki/Microsoft_Windows_library_files#MSVCRT.DLL_and_MSVCPP.DLL)的.*

如果您想免费使用，您可以使用[Microsoft Visual C++ 2008 Express SP1](http://www.microsoft.com/en-us/download/details.aspx?id=14597)，但您需要[为 .NET Frameworks 3.5 SP1 添加 Windows SDK 7，](http://www.microsoft.com/en-us/download/details.aspx?id=3138)因为 express 版本没有**x64**编译器。[使用 VS2008 Express & SDK 7 安装 x64 C++ 扩展的过程与cython 站点上的 windows x64 扩展](http://wiki.cython.org/64BitCythonExtensionsOnWindows)非常相似。*注意：MS Visual Studio 2008 Express 不再可用或不再受支持。*

仅供参考：您不一定需要 Visual Studio 来使用 Microsoft 编译器进行构建。它们可通过适当的 SDK 包免费获得。`CL.EXE`是编译器可执行文件，但您必须设置通常由 Autotools 或其他工具（如 CMAKE）配置的任何平台选项。CMAKE 与 MSVC 配合得很好，但 Autotools AFAIK 不适用于 MSVC，并且需要一些 POSIX 环境和实用程序，这些在 Windows 上可在[MSYS](http://sourceforge.net/projects/mingw-w64/files/External%20binary%20packages%20%28Win64%20hosted%29/MSYS%20%2832-bit%29/)中使用。

对于许多使用 distutils 或 setuptools 的 Python 包，他们可以使用 Windows SDK 7 编译扩展，方法是按照参考文档和 wiki 发布在各个地方的说明：

1.  从**开始菜单中**选择**所有程序**，然后选择**Microsoft Windows SDK v7.0**并启动**CMD Shell**以打开针对 Windows SDK 优化的命令窗口。
2.  第 1 步相当于从“**开始”菜单**或命令提示符（又名）在“**运行”**框中键入以下内容：**`C:\Windows\System32\cmd.exe`**

     **```
    %COMSPEC% /E:ON /V:ON /K "%PROGRAMFILES%\Microsoft SDKs\Windows\v7.0\Bin\SetEnv.cmd" 
    ```

    注意：`/E:ON`启用命令扩展的标志和`/V:ON`启用延迟变量扩展的标志都是运行所必需的`SetEnv.cmd`，否则您将收到未安装 x64 编译器的消息，&c。** 
***   然后键入`setenv /Release /x64`将专门为 Windows 7 x64 版本设置 SDK 环境变量的类型（与默认的 debug 或 x86 相比）。

    *   键入`set DISTUTILS_USE_SDK=1`hit return 然后键入`set MSSdk=1`并返回以告知`distutils.msvccompiler`您正在使用 SDK，并且 SDK 将确定所有环境变量。*   现在使用您选择的安装方法：
    *   `pip install pyyaml ntlk`这是推荐的方式，[请参阅 ntlk](http://nltk.org/install.html)，但您必须安装[setuptools](https://pypi.python.org/pypi/setuptools)和[pip](http://www.pip-installer.org)。
    *   `python setup.py install`对于每个下载、提取的 tarball
    *   `easy_install pyyaml ntlk`这是安装鸡蛋的旧方法和唯一方法。**

 **[1][在 Windows 上构建 C 和 C++ 扩展](http://docs.python.org/2/extending/windows.html)
[2] [distutils.msvccompiler — Microsoft 编译器](http://docs.python.org/2/distutils/apiref.html#module-distutils.msvccompiler)
[3] [Python 开发指南：入门：Windows](http://docs.python.org/devguide/setup.html#windows)
[4][这个 python 是用什么版本的 Visual Studio 编译的](https://stackoverflow.com/questions/2676763/what-version-of-visual-studio-is-this-python-compiled-with)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-21T16:21:03.923

自其他答案以来，微软已经发布了一个编译器包，专门用于为 Python 2.7（以及使用 VS 2008/VC9 的任何 Python 版本）构建扩展。以下是如何使用它：

1.  访问[http://aka.ms/vcpython27](http://aka.ms/vcpython27)，下载并安装包（它很小，不需要管理员权限）

2.  将 setuptools 更新到 6.0 或更高版本 ( `pip install -U setuptools`)

3.  安装你的包 ( `pip install <whatever>`)

最新的 setuptools 版本和这个编译器包的组合应该很容易做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T20:18:39.833

显然有几种方法可以做到这一点。

1.  使用 mingw 构建
2.  使用 VS 2008 express 构建 python 2.7。
3.  我不确定哪个版本适合构建 3.2，但它可能是 VS 2010。
4.  你可以使用你想要的 VS 从源代码编译 python x64，但是你会遇到与其他预构建包的竞争力问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-26T19:37:34.093

这对我最有效：

1.  安装`Visual Studio Express 2008`
2.  `Microsoft Windows SDK for Windows 7 and .NET Framework 3.5 SP1`从[http://www.microsoft.com/en-us/download/details.aspx?id=3138](http://www.microsoft.com/en-us/download/details.aspx?id=3138)安装
3.  前往`C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin`并打开`Visual Studio 2008 x64 Win64 Command Prompt`
4.  在那个外壳中，运行`pip install <package>`

以这种方式完成后，您不必在客户端系统上安装任何可再发行包。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-14T12:22:52.520

对于 Windows 10、Python 2.7.11、Cygwin 2.5.2 和 x86_64-w64-mingw32-gcc 4.9.2 或 5.4.0（但请参阅下面 1 下的**注释**），将其他地方的评论汇总在一起，这就是我必须做的我的 Python 扩展，用于编译、链接和击败 msvcrt.dll 和 msvcr90.dll 之间的竞争条件：

1.  编辑 distutils/cygwinccompiler，并在`class Mingw32CCompiler`

    *   将旧的 -mno-cygwin 修复替换为

        ```
        if self.gcc_version < '4' or is_cygwingcc():
          no_cygwin = ' -nostdlib -lgcc' 
        ```

        对于 gcc 4.9.2 -**注意**5.4.0，没有“如果”，只是

        ```
        no_cygwin = '' 
        ```

    *   安装正确的编译器：

        ```
         self.set_executables(compiler='x86_64-w64-mingw32-gcc%s -O -Wall' % no_cygwin,
                         compiler_so='x86_64-w64-mingw32-gcc%s -mdll -O -Wall' % no_cygwin,
                         compiler_cxx='x86_64-w64-mingw32-g++%s -O -Wall' % no_cygwin,
                         linker_exe='x86_64-w64-mingw32-gcc%s' % no_cygwin,
                         linker_so='x86_64-w64-mingw32-%s%s %s %s' 
        ```

    *   **注意x86_64-w64-mingw32-gcc 5.4.0，***没有*msvcr90似乎效果更好，所以调用`get_msvcr`有条件的：

        ```
         if self.gcc_version < '5':
                    self.dll_libraries = get_msvcr() 
        ```

2.  使用带有以下内容的 setup.py

    ```
    libdirs=['C:\\Python27\\libs',...]
    macros=[('MS_WIN64','1'),...]
    platform="WIN32" 
    ```

3.  修补我的源文件头之一以包含

    ```
    #ifdef MS_WIN64
    #define strdup _strdup
    #endif 
    ```

4.  最后，

    ```
     /c/Python27/python [editted setup].py -v build --compiler=mingw32
     /c/Python27/python [editted setup].py -v install 
    ```

以上某些内容可能不是最佳位置，但它让我的扩展工作......**

# jquery - element.animate('margin-left', value) 与 Chrome 一起使用在 Firefox 中不起作用

> ID：11267465
> 
> 赞同：0
> 
> 时间：2012-06-29T18:57:14.933
> 
> 标签：jquery, jquery-animate

如果我用 Chrome 运行这个[小提琴](http://jsfiddle.net/rWbFw/172/)，通过按 div 或选项卡，“包装器”div 上的动画可以顺利运行。如果你用 Firefox 运行它，它就不起作用。我一直在阅读的是 animate('margin-left', value) 应该用 animate('left', value) 替换 Firefox，但这不是一个选项，因为带有 margin-left 的动画在 div 上谁包含“标签”div，左边的动画在“标签”div上。

关于如何模拟这种行为的任何想法？

约束：

铬版：19.0.1084.56 m

火狐版本：13

jQuery版本：1.3.2

更新 jquery 不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:02:07.050

更改`margin-left`为`marginLeft`- [http://jsfiddle.net/rWbFw/173/](http://jsfiddle.net/rWbFw/173/)

# android - 应用程序被强制停止/终止后，Widget Pending Intent 将不起作用

> ID：11267467
> 
> 赞同：4
> 
> 时间：2012-06-29T18:57:34.090
> 
> 标签：android, android-intent, android-widget

我有一个小部件，它是我的主应用程序的一部分。通常在更新应用程序时，会创建一个 PendingIntent，当单击小部件时将用户带到主应用程序中的一个 Activity。但是，当主应用程序由于错误被操作系统强制停止或杀死时，小部件在单击时停止响应。我相信它也会停止接收广播，因为没有调用 onReceive 方法。

这是我在清单中的内容：

```
<receiver android:name=".widgets.AppWidget" android:label="@string/widget_name">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
        <action android:name="com.myApp.android.widgets.CLICK.start"></action>
    </intent-filter>
    <meta-data android:name="android.appwidget.provider"
                     android:resource="@xml/appWidget_provider"/>
</receiver> 
```

小部件代码位于与主应用程序不同的包中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:24:14.677

> 但是，当主应用程序由于错误被操作系统强制停止或杀死时，小部件在单击时停止响应。我相信它也会停止接收广播，因为没有调用 onReceive 方法。

在 Android 3.1+ 上，如果用户强制关闭您，您的应用小部件肯定会停止工作，直到用户通过其他方式（例如，主屏幕启动器）手动启动您的一项活动。

但是，“由于错误而被操作系统杀死”不应该产生这种影响 AFAIK。如果您可以创建一个可重现的测试用例来证明这一点，请将其发布在某个地方以便我们进行检查。

# php - 使用 GUID 类型：PHP

> ID：11267469
> 
> 赞同：1
> 
> 时间：2012-06-29T18:57:42.563
> 
> 标签：php, soap, parameters, guid

我正在使用一个 SOAP 应用程序，它要求一些 GUID 类型的参数。我不确定这一切意味着什么。

我发现这是在 PHP 中制作 GUID 的：

```
function getGUID(){
    if (function_exists('com_create_guid')){
        return com_create_guid();
    } else {
        mt_srand((double)microtime()*10000);//optional for php 4.2.0 and up.
        $charid = strtoupper(md5(uniqid(rand(), true)));
        $hyphen = chr(45);// "-"
        $uuid = chr(123)// "{"
            .substr($charid, 0, 8).$hyphen
            .substr($charid, 8, 4).$hyphen
            .substr($charid,12, 4).$hyphen
            .substr($charid,16, 4).$hyphen
            .substr($charid,20,12)
            .chr(125);// "}"
        return $uuid;
    }
} 
```

但是当我尝试传入参数时，我不知道这是如何工作的。这是我需要如何使用它的示例：

```
$option=array('trace'=>1);
$url = "http://example.com/admin.asmx?WSDL";
$client = new SoapClient($url, $option);
$params = array(
    'consumerid'   => '1234',
    'userName'     => '1234',
    'password'     => '1234',
    'adminDomain'  => 'admin.example.com',
    'SubscriberID' => '1234',
    'orderID'      => '22147'); /* <- This value needs to be of the type GUID */

$result = $client->getOrderDetail($params); 
```

我可以创建新的 GUID，但我不知道如何将值与之关联。有人可以提供解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:01:08.940

Did you mean:

```
$option=array('trace'=>1);
$url = "http://example.com/admin.asmx?WSDL";
$client = new SoapClient($url, $option);

# get guid and store in variable
$guid = getGUID();

$params = array(
    'consumerid'   => '1234',
    'userName'     => '1234',
    'password'     => '1234',
    'adminDomain'  => 'admin.example.com',
    'SubscriberID' => '1234',
    'orderID'      => $guid); # now use that guid here

$result = $client->getOrderDetail($params); 
```

# jekyll - 如何在 Jekyll 的顶部导航栏中添加图像徽标？

> ID：11267472
> 
> 赞同：4
> 
> 时间：2012-06-29T18:57:46.630
> 
> 标签：jekyll

刚开始使用 Jekyll 生成一些基本页面，并想在导航栏的顶部品牌区域添加图像徽标。有没有一种标准的方法可以做到这一点而不会弄乱 Jekyll 中的主题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T03:28:01.367

我不相信如果不至少对主题进行一点定制就不可能做到这一点。

但是，由于您使用 Jekyll-Bootstrap 的默认 twitter 主题，因此这些更改应该相当简单：

将您的 logo.png 放入`assets/themes/twitter`

在您的元素下，您`_includes/themes/twitter/default.html`需要添加一个`<li>`带有您的徽标的`<ul class="nav">`元素，如下所示：

```
<li><a class="brand-image" href="{{ HOME_PATH }}"><img class="brand-image" src="{{ASSET_PATH}}/logo.png"/></a></li> 
```

接下来，`brand-image`通过编辑定义类`assets/themes/twitter/css/style.css`并添加以下内容：

```
.navbar .nav > li > a.brand-image {
      padding: 4px 0px 0px 0px;
}
.navbar .nav > li > a > img.brand-image {
    -webkit-border-radius: 0px;
       -moz-border-radius: 0px;
            border-radius: 0px; 
```

}

您可能必须使用填充以使其恰好适合您的图像。

# python - 关于匹配字符串并替换python中的十六进制的问题

> ID：11267474
> 
> 赞同：-1
> 
> 时间：2012-06-29T18:57:58.217
> 
> 标签：python, regex, datetime

```
st = """
    What kind of speCialist would we see for this?He also seems to have reactions to the red dye cochineal/carmine cialist,I like Cialist much
 """ 
```

在这里我只需要替换 Cialist 字符串（完全匹配），它最后也可能有逗号

不应抛出“专家*专家*”一词

我试过这个正则表达式。

```
 bold_string = "<b>"+"Cialist"+"</b>"
 insensitive_string = re.compile(re.escape("cialist"), re.IGNORECASE)
 comment = insensitive_string.sub(bold_string,st) 
```

但它也抛出了字符串**专家**。

你能建议我解决这个问题吗？

在 python 中替换十六进制字符的另一个问题。

```
 date_str = "28-06-2010\xc3\x82\xc2\xa008:48 PM"
 date_str = date_str.replace("\n","").replace("\t","").replace("\r","").replace("\xc3\x82\xc2\xa"," ")
 date_obj = datetime.strptime(date_str,"%d-%m-%Y %H:%M %p")
 Error: time data '08-09-2005\xc3\x82\xc2\xa010:18 PM' does not match format '%d-%m-%Y %H:%M %p' 
```

在这里，我无法用空格替换十六进制字符以匹配日期时间模式。

你能帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:09:25.327

Use \b to match a word boundary. Then it becomes simples :)

```
import re

st = """
    What kind of speCialist would we see for this?He also seems to have reactions to the red dye cochineal/carmine cialist,I like Cialist much
 """

print re.sub(r'\bCialist\b', "<b>Cialist</b>", st) 
```

For the second question you're missing a 0 at the end of your last replace string. Just add 0 and it works :)

```
date_str = "28-06-2010\xc3\x82\xc2\xa008:48 PM"
print date_str
date_str = date_str.replace("\n","").replace("\t","").replace("\r","").replace("\xc3\x82\xc2\xa0"," ")
print repr(date_str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:10:22.487

两个问题合二为一？

用单词边界替换你的正则表达式，所以它是`re.sub(r'\bcialist\b', '', your_string, re.I)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:26:21.223

对于您的第二个问题：

```
>>> re.sub(r'\\[a-zA-z0-9]{2}', lambda L: str(int(L.group()[2:], 16)), text)
'28-06-20101238212210008:48 PM' 
```

要么为你的 strptime 重新组织它，要么让 strptime 解释它。

# c - 如何在C中将几行写入文件？

> ID：11267480
> 
> 赞同：0
> 
> 时间：2012-06-29T18:58:21.010
> 
> 标签：c

我有一个名为的变量`username`和另一个名为`password`...

我需要将用户注册到系统中，并将其写入文件.. 我的问题是，第二次或更多次，它将详细信息写入同一行..

例如 ：

在我第一次为文件编写时，它变成了这样：

`Amit 123456`

但是在我第二次注册用户时，它没有转到下一行并继续从那个地方写：

`Amit 123456Yosi 125818` 我需要文件是这样的：

```
Amit 123456
Yosi 125818 
```

我的意思是，我需要使`fprintf`文件的第二个或更多转到下一行，而不是从特定位置开始......

我在代码中写了这个：

```
fprintf(file, "%s %s\n", username, password); 
```

不过，`'\n'`似乎并没有让下一个`fprintf`进入下一行......

在夏季 - 我每次都需要在新行上打印到文件..

在第一次打印到文件时，它将在第 1 行写入，然后在第二次打印到文件时，它将在第 2 行写入，而不是从第 1 行的继续...

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:03:56.980

和评论者有同样的想法：你可能也需要一个`\r`，这取决于你的开发环境。甚至可能是您使用的文件查看器有问题（例如：Windows 上的 Notepad.exe 经常遇到简单的行尾问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:01:17.760

我猜你在 Windows 上，你需要 /r/n

请注意，保存密码是非常非常糟糕的做法，请谷歌如何使用密码。

# format - 孙子中的 web2py 表示“格式”

> ID：11267488
> 
> 赞同：1
> 
> 时间：2012-06-29T18:59:14.620
> 
> 标签：format, data-access-layer, web2py

这里的[q&a](https://stackoverflow.com/a/8746008/1480618)（和文档）描述了`format=`define_table 函数的参数的使用。我很难让它在稍微复杂一点的情况下工作。我正在使用 web2py 版本`(1, 99, 7, datetime.datetime(2012, 3, 4, 22, 12, 8), 'stable')`和 Python `2.5.4`。（我使用的是 MySQL，但我认为这无关紧要。）

我有以下内容：

“独立”（不是子）表`Institution`和`Person`. 表`Team`是`Institution`. 表`Team_staff`连接`Person`在一起`Team`。这是一个精简版：

```
db.define_table('Person',
                Field('First_name', 'string', length=60, required=True),
                Field('Last_name', 'string', length=60, required=True),
                ...
                format='%(First_name)s %(Last_name)s')

db.define_table('Institution',
                Field('Institution_name', 'string', length=60, required=True,
                   unique=True),
                format='%(Institution_name)s')

db.define_table('Team',
                Field('Institution', db.Institution),
                Field('Sex', 'string', required=True,
                   requires=IS_IN_SET(['m', 'f'])),
                Field('Level', 'string', required=True),
                ...
                format='%(Institution)s %(Sex)s')

db.define_table('Team_staff',
                Field('Team', db.Team),
                Field('Team_staff_member', db.Person),
                ...
                Field('Team_position', 'string', required=True)) 
```

到现在为止还挺好。我有一个创建`SQLFORM(db.Team_staff)`, 的控制器和一个仅显示表单的视图。当我下拉“团队”下拉菜单时，我看到机构*ID*与“性别”值连接在一起（例如`1 f`，然后`1 m`在其下方，然后`2 f`，等等）。同样`Institution`，`format='%(Institution_name)s'`为什么我没有看到机构名称而不是机构 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T15:05:32.187

“格式”属性不会以这种方式跨表传播。相反，您应该能够将“格式”属性定义为 lambda 函数，它将表格的一行作为其参数：

```
db.define_table('Team', ...,
    format=lambda r: '%s %s' % (db.Institution[r.Institution].Institution_name,
                                r.Sex)) 
```

# java - 为警报对话框上显示的列表视图项目实现单击侦听器

> ID：11267489
> 
> 赞同：0
> 
> 时间：2012-06-29T18:59:16.073
> 
> 标签：java, android

我正在向用户展示一个包含 2 个项目的警报对话框，我想为这两个项目实现一个 OnClickListener。我可以设置 1 项，但是当我尝试使用 switch 语句时，我收到此错误：

**无法打开 CharSequence[] 类型的值。只允许可转换的 int 值或枚举常量**

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

    // TODO Auto-generated method stub
    final CharSequence[] items = {"Reviews", "More Info"};
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Please Select an Option");
    builder.setItems(items, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

       switch (items){

        case 1 :

            //do something

        case 2:

            Intent intent = new Intent (MyActivity.this, WebViewActivity.class);
            MyActivity.this.startActivity(intent);

        }
    });
AlertDialog alert = builder.create();
alert.show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:03:03.120

Android 运行 JRE 6。如果我没记错的话。直到今年发布的 JRE 7 才允许执行 switch(CharSequence[]) 和 switch(String)。您必须执行一系列 if else 语句才能解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:09:51.143

[在开关盒中使用字符串作为菜单？](https://stackoverflow.com/questions/7620517/using-strings-in-a-switch-case-for-a-menu)

Java 7 中添加了 switch 语句中的字符串。例如，请看这里。由于 Android 开发当前不基于 Java 7 语法，因此您将不得不走另一条路。这意味着：if-else 语句。他们不是最漂亮的，但他们会完成工作。

所以可以试试

```
 public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

           switch (which){

            case 0 :
                    String str = items[which];
                //do something

            case 1:

                Intent intent = new Intent (MyActivity.this, WebViewActivity.class);
                MyActivity.this.startActivity(intent);

            }
        }); 
```

[http://www.botskool.com/geeks/how-create-dialog-box-android-part-2](http://www.botskool.com/geeks/how-create-dialog-box-android-part-2)

# node.js - Node.js 代理请求对应用服务器有效，但对本地主机失败

> ID：11267492
> 
> 赞同：0
> 
> 时间：2012-06-29T18:59:48.707
> 
> 标签：node.js, mamp

我继承了一个项目，该项目涉及在 node.js 上运行的管理员应用程序与在 apache 上运行的类似 REST 的 api 对话。我对 [LM]AMP 非常熟悉，但我是 node.js 的新手。

我正在尝试在我的本地机器上设置整个环境，即 MAMP。

当我使用原始设置（在名为“build”的目录下的节点配置文件中）时，应用程序主机指向真实服务器，node.js 站点正常运行：

```
var options = underscore.defaults(options, {
    ...
    port: 8000,
    proxy_app: true,
    app_host: 'www.example.com',
    app_port: 80
}); 
```

在浏览器中，将`http://localhost:8000/app/do/something`返回一些有效的 json。

（我在这里的理解是有限的，但我相信节点正在将此请求代理到运行应用程序的 apache 服务器）。

但是，当我将它指向我的本地服务器时......

```
var options = underscore.defaults(options, {
    ...
    port: 8000,
    proxy_app: true,
    app_host: 'www.mylocalexample.com',
    app_port: 80
}); 
```

现在，`http://localhost:8000/app/do/something`返回 404 Not Found。

所以这个 node.js 配置文件的唯一区别是主机，它是有效的（如果我直接在我的本地主机上调用应用程序 api 它可以工作，即我得到有效的 json）。由于某种原因，node.js 代理的请求似乎没有发送到我的 MAMP 服务器，或者确实被发送但 MAMP 拒绝了它。apache 日志中没有错误。

有任何想法吗？Firebug 也没有告诉我太多用处，所以我不确定如何进一步调试。我的直觉说这一定是我 MAMP 的 Apache 上的一些设置，但我不确定它可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T11:12:49.253

大概您的应用程序正在检查`Host`您的 HTTP 请求中的标头并基于它进行路由（“虚拟主机”）。`localhost...`在您的浏览器中转到会将标题设置为，`localhost`因此它不会匹配任何正在寻找的`www.mylocalexample.com`. 尝试在您的`hosts`文件中创建一个指向`www.mylocalexample.com`127.0.0.1 的条目，然后粘贴`www.mylocalexample.com`到您的浏览器中。

# ios - iOS 应用中的外部数据

> ID：11267494
> 
> 赞同：-1
> 
> 时间：2012-06-29T18:59:54.467
> 
> 标签：ios

我们将为 iOS 应用程序使用 JSON 提要。关于如何设计外部数据源，我有几个问题。

1.  外部数据源是否应该在核心数据中缓存一段时间，然后在缓存到期时重新获取？

2.  处理外部数据源的一般策略是什么？（在缓存/性能方面）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:10:47.820

如果应用程序的数据量很大，您可能希望使用 Core Data 缓存内容。您可以存储某种散列属性以与服务器进行比较，以查看缓存是否仍然有效，如果不是则刷新它（当获取数据时，应该从服务器生成并发送散列）。

取决于您的应用程序的复杂性。您可能想使用一些第三方类或框架。像[AFNetworking](https://github.com/AFNetworking/AFNetworking/)这样的东西在 Apple 的连接代码之上提供了很多快捷方式，而[RestKit](http://restkit.org/)提供了与外部服务器的数据同步（尽管需要一些设置）。

# html - 按钮中的阴影 DOM

> ID：11267497
> 
> 赞同：2
> 
> 时间：2012-06-29T19:00:18.077
> 
> 标签：html, dom, shadow-dom

有一个有效的 JS Fiddle[在这里演示了](http://jsfiddle.net/dglazkov/eQSZd/)[Shadow DOM](http://dvcs.w3.org/hg/webcomponents/raw-file/tip/spec/shadow/index.html) 。（**注意：**需要进行一些设置才能使其正常工作。我使用的是 Google Chrome 版本 20.0.1132.47 测试版，通过启用“Shadow DOM”实验）**`chrome://flags`**

 **我在[这里](http://jsfiddle.net/eQSZd/3/)创建了一个使用 a`button`而不是a 的修订版，但`span`它不起作用。它抛出一个：

```
Uncaught Error: HIERARCHY_REQUEST_ERR: DOM Exception 3 
```

知道为什么可以将 Shadow DOM 添加到 a`span`而不是 a`button`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:41:59.473

这是 WebKit 中当前实现的一个限制。

在实现的早期，一个元素最多可以有一个影子根附加到它上面。由于某些元素在内部（例如视频）或计划使用（例如输入元素）使用 Shadow DOM，因此存在[硬编码限制](http://code.google.com/p/chromium/source/search?q=allowsAuthorShadowRoot&origq=allowsAuthorShadowRoot&btnG=Search%20Trunk)，不允许为这些元素创建作者影子根。

[您可以在WebKit 错误 91486](https://bugs.webkit.org/show_bug.cgi?id=91486)中跟踪按钮元素的作者 Shadow DOM 的实现状态。**

# javascript - 使用 jQuery，背景不会变黑

> ID：11267498
> 
> 赞同：2
> 
> 时间：2012-06-29T19:00:23.210
> 
> 标签：javascript, jquery

我拥有的代码如下：

```
<!DOCTYPE html>
<html>

    <head>
        <script src="javascript/jquery.js" type="text/Javascript"> </script>
    </head>
    <body>

        <div id="demo"></div>

        <script type="text/javascript">
        document.getElementById("demo").innerHTML="Hi";
        </script>

        <script type"text/javascript">
            $(function()
            {
                $("#demo").css("background", "#000000");    
            }
        </script>

    </body>
</html> 
```

我遇到的问题是 JS/Jquery 的第二个块不会将 div 的背景变为黑色。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T19:04:47.323

```
$(function() {
    $("#demo").css("background", "#000000");    
}); // <-- You forgot a closing parenthesis 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:05:30.307

您在文档就绪处理程序回调中缺少一个右括号。

```
$(function() {
    $("#demo").css("background", "#000000");    
}); //<-- here 
```

处理 JavaScript 时始终检查浏览器的控制台。它会立即告诉您您遇到了解析错误。

另请注意，尽管此处的某些答案确实如此`$(document).ready(function...`，但这与 simple 同义`$(function...`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T19:04:44.793

您可以将您的 JavaScript 代码放在一个标签下：

```
<script type"text/javascript">
$(document).ready(function(){
  document.getElementById("demo").innerHTML="Hi";
  $("#demo").css("background-color", "#000000");    
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T19:06:27.887

问题是你的功能....

```
$(document).ready(function(){
    $("#demo").css("background", "#000000");    
}); 
```

此外，您可能需要为您的 div 添加宽度/高度。

# javascript - IOS HTML Canvas 或 CSS3 3D 变换

> ID：11267500
> 
> 赞同：0
> 
> 时间：2012-06-29T19:00:26.880
> 
> 标签：javascript, ios, html, css, cordova

在IOS平台上：

HTML5 画布元素不是硬件加速的。CSS3 3D 变换（例如：）`translate3d`是硬件加速的。

想要使用带有 PhoneGap 的 HTML/JavaScript 为 IOS 创建 2d 游戏，我应该考虑只使用带有 CSS3 的 DOM 吗？

有没有人试过这个？有没有基准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T00:32:24.647

接受的答案实际上是极具误导性的，问题的一部分也是如此。直截了当：

*   iOS 5 及更高版本实际上确实为 Canvas 使用了硬件加速。
*   画布根本没有设计得很好。仅当您应用转换时，硬件加速才会启动。如果您清除并重绘，即使使用 requestAnimationFrame，您的性能也可能会很不稳定。你肯定会注意到差异。
*   CSS3 转换可能会产生更好的性能 - 对于 Android 设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T00:51:10.520

在构建自己的 2D 游戏时，我也有这个顾虑。我最初在 iOS 上遇到动画性能问题，但我通过 CSS3 3D 转换解决了这个问题。我没有尝试过 Canvas，但一旦应用了正确的 CSS，我就真的不需要了。在 iOS 和 Android 版本下，PhoneGap 的性能仍然不错。一些较旧的 Android 设备有点慢，但我认为 Canvas 也无济于事。

至于基准测试，我确实发现它显示了带有图像的 Canvas 和 CSS3 过渡：[http ://www.spielzeugz.de/html5/compare/](http://www.spielzeugz.de/html5/compare/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:08:44.267

I made an attempt but lost interest. It seemed to be just as efficient as doing the same thing I was doing with canvases. You're not going to notice much difference unless you're doing heavy javascript calculations which you will probably be doing regardless of whether you use CSS3 or canvas.

I don't know of any benchmarks but you can read about it here: [http://www.sencha.com/blog/apple-ios-5-html5-developer-scorecard/](http://www.sencha.com/blog/apple-ios-5-html5-developer-scorecard/)

It is also going to depend on which device you're talking about. They all run different hardware and slightly different software so that should affect your decision: [http://www.codefessions.com/2012/03/how-fast-is-html5-canvas-part-2.html](http://www.codefessions.com/2012/03/how-fast-is-html5-canvas-part-2.html)

Canvas is pretty well designed, in a way such that it isn't going to make much of a difference whether you hardware accelerate it or not, especially if you're just doing 2d stuff.

# c++ - C++ chat bot rank based answering?

> ID：11267502
> 
> 赞同：5
> 
> 时间：2012-06-29T19:00:37.983
> 
> 标签：c++, chat, ranking, bots, aiml

I have this personal C++ project of mine and I am currently stuck. It seems that a lot of people have asked questions about this topic, and I would like to apologize now if it is a repeat question.

Anyways, this project is a chat bot that will answer based on the user input. **Currently** as it stands, it takes the whole query and looks for a match using long, inefficient lines of `if` statements. If it finds a match, it will respond with a certain answer.

The reason why I came here is because I got sick and tired of writing very time consuming and inefficient `if` statements that don't even catch all the variations of the same question. I'm not looking for code or solutions that takes data from Wikipedia or something like that. What I would like is for the chat bot to just answer some simple questions.

During my time slogging away with the if statements, I came up with an idea. Why don't I use keywords just like a search engine ranks web pages?

I have written code so far as to count how many times a keyword (or several different ones) exist in the query. The problem is how to go about ranking them to find the best answer? I would presume that the answers and keywords would need to be stored in a special way.

My list of answers to my main question so far are:

**1.** When a query is received, rank it via an ini file where it has the keyword(s) in the key, and the answer as the value of it. If there are multiple answers, take another keyword and search for that as well as the original (decreasing the scope). Doing this enough times should yield the correct answer.

*Pros:* Suits what I need to do, and it is something I can grasp in C++.

*Cons:* Seems lengthy and inefficient, almost like diving into the if statements again...

**2.** Using a SQL database, tell it to find the applicable answer. Not sure how that would be done though.

*Pros:* It would be light weight, as the database computer would handle the search and could be quite detailed.

*Cons:* Might cause quite a bit of pain for me as I'm already treading quite high waters with C++. However, I'm starting to think it will end up just like the if statements.

**3.** The best answer that someone would probably suggest here is AIML (which was [discussed here](https://stackoverflow.com/questions/4129725/simple-chat-bot-projects)).

*Pros:* Used to develop smart chat bots, and is quite powerful.

*Cons:* Seems too "heavy" for my simple project and I can not nail down a search that finds me an easy to understand code for a bot that takes AIML.

I hope someone could suggest a smart route to take as I'm not really a fan of C++ and I feel like I'm already treading deep water with this project. However for this summer I felt like biting my tongue, going out of my comfort zone and for once making something useful in C++. I could have done this quickly in PHP, but in order to send the messages, I have to use C++.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:33:44.940

前段时间我用 IRC 机器人做了类似的事情，为此我使用了 AIML。计算关键字在句子中出现的次数似乎不是一个非常准确的方法。使用 AIML 可能是要走的路。如果您使用 AIML，则不必费心编写 C++ 代码，因为实际的“大脑”（可以称为）是用 AIML 编写的。我（我认为大部分来自示例）为加载 libaiml.xml（包含您的机器人的 AIML 代码的文件）编写的代码的一小部分摘录：

```
#include <aiml.h>
// ...
using namespace aiml;

// setup Ai bot:
cInterpreter* interpreter = cInterpreter::newInterpreter();

try {
    if(!interpreter->initialize("libaiml.xml"))
        throw 1;
} catch(int _ret) {
    cout << "ERROR: " << interpreter->getErrorStr(interpreter->getError())
         << " (" << interpreter->getError() << ")" << endl;
    if(!interpreter->getRuntimeErrorStr().empty())
        cout << "Runtime Error: " << interpreter->getRuntimeErrorStr() << endl;
} 
```

然后我习惯`interpreter->respond(message, "name", result);`了得到回应。我链接了 libaiml（需要 libxml2），可以在[http://www.alicebot.org/downloads/programs.html](http://www.alicebot.org/downloads/programs.html.(scroll)找到。（向下滚动到 C++，你应该在那里找到 libaiml；注意你还必须安装 std_utils） . 我不知道，由于库中的更新，我的代码可能不再工作。幸运的是，libaiml 还包含一个很好的示例，当时对我来说非常有用。

您应该能够找到很多关于 XML 格式本身的文档，例如。[http://www.alicebot.org/TR/2011/](http://www.alicebot.org/TR/2011/)。我建议您也看一下我上面提到的示例（包含在 libaiml 中）。

祝你好运！

# linux - How to limit reverse SSH tunelling ports?

> ID：11267503
> 
> 赞同：5
> 
> 时间：2012-06-29T19:00:38.137
> 
> 标签：linux, ssh, ssh-tunnel

We have a public server which accepts SSH connections from multiple clients behind firewalls.

Each of these clients create a Reverse SSH tunnel by using the `ssh -R` command from their web servers at port 80 to our public server.

The destination port(at the client side) of the Reverse SSH Tunnel is 80 and the source port(at public server side) depends on the user. We are planning on maintaining a map of port addresses for each user.

For example, client A would tunnel their web server at port 80 to our port 8000; client B from 80 to 8001; client C from 80 to 8002.

```
Client A: ssh -R 8000:internal.webserver:80 clienta@publicserver

Client B: ssh -R 8001:internal.webserver:80 clientb@publicserver

Client C: ssh -R 8002:internal.webserver:80 clientc@publicserver 
```

Basically, what we are trying to do is bind each user with a port and **not allow** them to tunnel to any other ports.

If we were using the forward tunneling feature of SSH with `ssh -L`, we could permit which port to be tunneled by using the `permitopen=host:port` configuration. However, there is no equivalent for reverse SSH tunnel.

Is there a way of restricting reverse tunneling ports per user?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:59:05.460

您要做的是限制给定用户可以绑定的端口。

此处描述了执行此操作的方法：

[http://www.linuxquestions.org/questions/linux-server-73/how-can-i-restrict-ports-for-users-to-bind-to-667153/](http://www.linuxquestions.org/questions/linux-server-73/how-can-i-restrict-ports-for-users-to-bind-to-667153/)

# jquery - jQuery global variable and AJAX

> ID：11267507
> 
> 赞同：-1
> 
> 时间：2012-06-29T19:01:09.987
> 
> 标签：jquery, ajax

i have jQuery code below..

```
(function( $ ) {

$.fn.pokerClass = function( test ) {
    var test;

    this.a = function(){
                    $.ajax({
                        type: "POST",
                        url: "http://127.0.0.1/test.php",
                        success: function(data){
                            var json = $.parseJSON(data);
                            test = json.value; 
                            }
                    });
    }
    this.b = function() {
        alert("i am " + test);
    };
    this.class_var = test;
    return this;
};

})( jQuery ); 
```

HTML:

```
var t = $(document.body).testClass();
t.a();
t.b(); 
```

I get response "i am undefined". Can anyone help me how to solve this problem?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:03:59.217

Your ajax call runs asyncronically so when `t.b();` is executed, `test` has no value yet.

You could execute the ajax call syncronically (`async:false`) or run `t.b();` inside `success` callback

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:04:37.497

您正在使用 ajax 的**异步**，这意味着系统不会等待 ajax 完成以继续进行其余操作。

只需使用

```
$.ajax({
                        type: "POST",
                        async:false, /* Note this */
                        url: "http://127.0.0.1/test.php",
                        success: function(data){
                            var json = $.parseJSON(data);
                            test = json.value; 
                            }
                    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:42:12.540

*   我想你的意思是打电话`pokerClass`，不是`testClass`吗？

*   `test`您会收到已定义的警告。它是函数的参数，你用 . 再次声明它`var test;`。您可以删除函数参数，因为您不向函数传递任何内容。

*   为了**获取**JSON 数据，您`POST`无需发送任何内容即可发出请求。考虑改用[getJSON 函数](http://jqapi.com/#p=jQuery.getJSON)，尽管您不能使用该速记函数设置异步设置。您还可以`dataType`将预期响应的 设置为`json`。然后自动解析。

*   正如 Claudio Redi 所说（第一）：将 ajax 调用设置为`async:false`. 您可能想研究一些高级[`.when()`](http://jqapi.com/#p=jQuery.when)功能来等待异步请求的响应。

未测试：

```
(function( $ ) {
  $.fn.pokerClass = function( ) {
    var test;

    this.a = function(){
      $.ajax({
        type: "GET",
        async: false,
        dataType: "json",
        url: "http://127.0.0.1/test.php",
        success: function(data){
          test = data.value;
        },
        error: function(){
          console.log("Did not work.");
        }
      });
    };
    this.b = function() {
      console.log("I am " + test);
    };
    this.class_var = test;
    return this;
  };
})( jQuery );

var t = $("document.body").pokerClass();
t.a();
t.b(); 
```

# objective-c - Accessing property in the prepareForSegue of a UIViewController

> ID：11267508
> 
> 赞同：10
> 
> 时间：2012-06-29T19:01:13.740
> 
> 标签：objective-c, ios5, xcode4.3

I am relatively new to Objective-C and I am coming from a Java background, thus I find the notion of pointers and not-that-well explained compilation errors quite daunting.

I have a class that implements a delegate with the jsonControllerDidLinkedInAuth method. Whenever the **delegator** send a message to this class, passing itself and a (NSURL *)url, I am trying to assign the **url** to a property **authUrl**, when this operations finishes call the performSegueWithIdentifier, which in turn executes the prepareForSegue (as far as my understanding of this is concerned).

This doesn't seem to work, as I am receiving a:

> App[3278:13517] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UINavigationController setUrlAddress:]: unrecognized selector sent to instance 0x6acab00'

error message that terminates the application with **SIGABRT**.

Both of the methods reside in the same class, which is a UINavigationController and points to another UINavigationController. The compiler points me at the `[vc setUrlAddress:self.authUrl];` of the second method.

```
- (void)jsonControllerDidLinkedInAuth:(JsonController *)controller :(NSURL *)url {
    authUrl = url;
    if (authUrl != nil) {
        [self performSegueWithIdentifier:@"LinkedInAuth" sender:self];
    } else {
        NSLog(@"Auth URL is null");
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"LinkedInAuth"]) {
        // Get destination view
        LinkedInViewController *vc = [segue destinationViewController];
        NSLog(@"The auth url from prepareForSegue in SignupViewControlle: %@", self.authUrl);
        [vc setUrlAddress:self.authUrl];
    }
} 
```

What seems to be the problem is that for some reason I cannot access the authUrl property of the class I currently am. I tried with authUrl, [self authUrl] and self.authUrl but none of this seem to do the job. Properties are synthesized, but I have also noticed a little hint: "UINavigationController setUrlAddress", shouldn't this be a LinkedInViewController like defined in the method above? I tried casting (LinkedInViewController)[segue destinationViewController], but then I get a message notifying me that you cannot cast onto a pointer.

Any help would be highly appreciated. Thanks for reading.

Edit 1: The NSLog just above the setUrlAddress does return the self.authUrl. I am assuming it must be some sort of a visibility problem, but I am not sure how to solve this.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-29T19:24:34.897

如果您的视图控制器嵌入在 UINavigationController 中，`segue.destinationViewController`则指的是该导航控制器。这是你可以使用的：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

        if ([[segue identifier] isEqualToString:@"LinkedInAuth"]) {
            UINavigationController *navigationController = (UINavigationController *)segue.destinationViewController;
            LinkedInViewController *linkedInViewController = [[navigationController viewControllers] lastObject];
            linkedInViewController setUrlAddress:self.authUrl];
        }
} 
```

如果您有超过 1 个转换为嵌入 UINavigationController 的视图控制器的 segue，我通常将其添加到开头`prepareForSegue:sender`：

```
if ([segue.destinationViewController isKindOfClass:[UINavigationController subclass]])
        id vc = [[(UINavigationController *)segue.destinationViewController viewControllers] lastObject] 
```

现在`vc`包含您真正感兴趣的视图控制器，因此您不必为每个 segue 复制和粘贴铸件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:42:32.337

看起来您并没有分配委托，您需要这样做才能使委托模式起作用。尝试添加`vc.delegate = self`到您的 prepareForSegue。

# css - 如何在不遭受缓存 CSS 问题的情况下更新 Web 应用程序？

> ID：11267513
> 
> 赞同：6
> 
> 时间：2012-06-29T19:01:54.103
> 
> 标签：css, web-deployment

假设我有一个网络应用程序。我向它添加了一些功能，这些功能需要添加到我的 Web 服务器上的一些现有 CSS 文件中。我将我的新功能和 CSS 添加部署到我的服务器上，它们运行良好。不过，访问该站点的用户可能会在他们的浏览器中缓存 CSS，这意味着在他们手动刷新页面或缓存过期之前，新功能看起来会损坏/奇怪。如果我的服务器和用户之间有缓存服务器，问题可能会更糟，在这种情况下，即使手动刷新也无济于事（我不认为）。

有没有一种常见的方法来避免这种情况？

编辑：我在 ASP.NET 4.0 上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T19:05:46.843

您可以将任意名称值对添加到您的 css 请求的末尾，它的行为就好像它没有被缓存一样。例如：

```
<link media="all" href="myhomepage.css?sid=1" type="text/css" rel="stylesheet"> 
```

当您进行更改时，请更改 sid 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:06:26.603

我在 Apache 中将以下内容与 PHP 一起使用：

```
function cssInclude($file) {
    $fileMTime = filemtime($_SERVER['DOCUMENT_ROOT']."/media/css/".$file.".css");
    return "<link rel=\"stylesheet\" href=\"/media/css/{$file}.{$fileMTime}.css\"
} 
```

然后在我的`<head>`：

```
<?= cssInclude("style"); ?> 
```

然后在我的 .htaccess 中：

```
RewriteEngine on
RewriteRule ^media/(js|css|img|font)/(.+)\.(\d+)\.(js|css|png|jpg|gif)$ /media/$1/$2.$4 [L] 
```

本质上，这样做是使链接有时间。最初我在使用 ? 的 CSS 之后执行此操作，如在 中`style.css?12313123`，但发现一些代理没有缓存它，因为他们认为它是动态的，从而使其速度变慢（例如，我的工作搞砸了）。

通过将其编写为`style.123123123.css`无论何时修改它都好像是一个新文件，并且缓存工作正常。

您会注意到，在我的 .htaccess 中，我还允许自己为不同的目录和几种不同的文件格式执行此操作——根据需要对其进行自定义。

当然，这意味着您正在从文件系统读取内容，但如果您有一个缓存层，那么每次更新只会执行一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T20:15:08.293

当然我不知道你的设置，因为你没有提到它，但假设你有一个像 Tomcat 这样的 serlet 容器，我建议你看看[Jawr](http://jawr.java.net/)。其目的来自网站：“Jawr 是一种用于 Javascript 和 CSS 的可调封装解决方案……”</p>

它可以做的比你要求的要多得多，但它也完全自动地实现了@scrappedcola 的想法。客户端将看到一个包含内容哈希的 URL（类似于`scripts_A5F68E2.js`），该 URL 的缓存属性设置为永恒。每次内容更改时，名称也会更改，因此客户端将重新加载脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T20:31:01.360

首先，将版本附加到您加载的资源是一种常见的做法。这可以通过版本参数或使用像 yawr 这样的框架来完成。

如果您更喜欢第一个并使用版本控制，则使用 vcs 修订字符串作为版本可能不是坏主意，或者 - 如果您确实发布周期，则使用可能与您的更改最匹配的版本。

在 PHP 或 Python 中，您可以生成一个包含版本字符串的文件，并在所有需要的文件中引用它。使用 Java 或 .NET，您可能希望有一个已编译的工件。

由于您的设置丢失，我不会粘贴示例代码。

# sql - 数据从 SQL Server 导出到 Excel

> ID：11267520
> 
> 赞同：0
> 
> 时间：2012-06-29T19:02:18.063
> 
> 标签：sql, sql-server

我一直在想一种将数据从 SQL 导出到 Excel 的方法。可以选择使用导出/导入向导。在我的情况下，表格有列，由数字组成。这些数字指的是存储在另一个表中的值。例如，假设该表有一列 country_id，其编号为 1、2,3 等。还有另一个表，其中包含这些数字作为其主键和相应的行，即国家名称。

例如：

1 英国

2 中国

3 美国

因此，在导出时，我希望出现这些国家名称而不是数字。这将需要自定义查询。谁能给我一个关于如何开始的例子？如何编写查询的导出部分？有没有关于如何编写这些类型的查询的教程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:09:16.747

您仍然可以使用导入/导出向导并在向导步骤中选择选项 2 `Specify Table Copy or Query`。意义：

![在此处输入图像描述](../Images/5ca66014d339b97d690706890e110ce5.png)

您可以使用这样的查询。由于我不知道您的表名，所以我们将第一个表称为 ChildTable（带有 FK 的表）和第二个表，即带有国家名称的 CountryTable。

```
SELECT A.Col1, A.Col2, B.Country_Name,
FROM dbo.ChildTable A
INNER JOIN dbo.CountryTable B
  ON B.Id = A.Country_Id 
```

# java - Glassfish classloader can't resolve static method of a dependency

> ID：11267535
> 
> 赞同：0
> 
> 时间：2012-06-29T19:03:12.990
> 
> 标签：java, classloader, glassfish-3, static-methods

This awful project I know have to put my ands on makes wide (and obnoxious) use of static methods coming from other modules which I now *jarred-out* and declared as dependency of the (now lightweight) webapp.

now glassfish seems to have a problem with that.

it's literally a java.lang.NoClassDefFoundError of a certain class that is included in WEB-INF/lib

```
EJB Container initialization error
java.lang.NoClassDefFoundError: Could not initialize class yyy.ohyeah.commons.util.Logger 
```

(i'll try to reduce and anonymize the class and put it as a comment)

Here's where the issues arise:

```
import yyy.ohyeah.commons.util.Logger;

@Path("achievement")
@Produces("application/json")
@Stateless
public class MyResource {

    private final static Log log = Logger.getLogger(MyResource.class.getName()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:13:33.217

您需要包含所有依赖项 jar。在这种情况下，您似乎需要 apache commons logging jar。

# c# - 如何单独替换组的每个捕获？

> ID：11267536
> 
> 赞同：2
> 
> 时间：2012-06-29T19:03:14.233
> 
> 标签：c#, .net, regex, matchevaluator, capturecollection

我有一个正则表达式，它`GroupCollection`在它的捕获中使用 s 来捕获一组项目 ID（可以用逗号分隔，也说明最后一个有“和”这个词）：

`(\bItem #(?<ITEMID>\d+))|(,\s?(?<ITEMID>\d+))|(,?\sand\s(?<ITEMID>\d+))`

有没有一种简单的方法使用 C# 的`Regex`类来用 url 替换 ITEMID 数字？现在，我有以下内容：

```
foreach (Match match in matches)
{
    var group = match.Groups["ITEMID"];
    var address = String.Format(UnformattedAddress, group.Value);

    CustomReplace(ref myString, group.Value, address,
        group.Index, (group.Index + group.Length));
}

public static int CustomReplace(ref string source, string org, string replace,
    int start, int max)
{
    if (start < 0) throw new System.ArgumentOutOfRangeException("start");
    if (max <= 0) return 0;

    start = source.IndexOf(org, start);

    if (start < 0) return 0;

    var sb = new StringBuilder(source, 0, start, source.Length);

    var found = 0;
    while (max-- > 0)
    {
        var index = source.IndexOf(org, start);

        if (index < 0) break;

        sb.Append(source, start, index - start).Append(replace);
        start = index + org.Length;
        found++;
    }

    sb.Append(source, start, source.Length - start);
    source = sb.ToString();

    return found;
} 
```

我在网上找到的`CustomReplace`方法是在字符串源中用另一个字符串替换一个字符串的简单方法。问题是我确信可能有一种更简单的方法，可能会根据需要使用`Regex`类来替换`GroupCollection`s 。我只是想不通那是什么。谢谢！

示例文本：

`Hello the items you are looking for are Item #25, 38, and 45\. They total 100 dollars.`

`25`, `38`, 并且`45`应该替换为我正在创建的 URL 字符串（这是一个 HTML 字符串）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T05:47:31.307

您的模式适用于您的输入，但它确实有一个错误。具体来说，它将匹配您输入中出现在逗号或单词*" 和 "*之后的任何数字。

我继续重写你的模式以避免这个问题。为了实现这一点，我实际上使用了两种正则表达式模式。可以使用一种模式来实现这一点，但它比我选择分享的方法相当复杂且可读性差。

主要模式是：`\bItem #\d+(?:,? \d+)*(?:,? and \d+)?` 这里没有使用捕获组，因为我只对匹配项目感兴趣。该`(?: ... )`位是非捕获组。的用法`(?:,? \d+)*`是匹配字符串中间部分的多个逗号分隔值。

一旦项目匹配，我使用[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/e7f5w83z)格式化项目，然后重建字符串以用格式化项目交换原始项目。

这是一个带有几个不同输入的示例：

```
string[] inputs =
{
    "Hello the items you are looking for are Item #25, 38, 22, and 45\. They total 100 dollars.",
    "... Item #25, 38 and 45\. Other numbers 100, 20, and 30 untouched.",
    "Item #25, and 45",
    "Item #25 and 45",
    "Item #25"
};

string pattern = @"\bItem #\d+(?:,? \d+)*(?:,? and \d+)?";
string digitPattern = @"(\d+)";
// $1 refers to the first (and only) group in digitPattern
string replacement = @"<a href=""http://url/$1.html"">$1</a>";

foreach (var input in inputs)
{
    Match m = Regex.Match(input, pattern);
    string formatted = Regex.Replace(m.Value, digitPattern, replacement);
    var builder = new StringBuilder(input)
                        .Remove(m.Index, m.Length)
                        .Insert(m.Index, formatted);
    Console.WriteLine(builder.ToString());
} 
```

如果您需要使用现有方法来格式化 URL，而不是使用正则表达式替换模式，您可以使用`Regex.Replace`接受[`MatchEvaluator`](http://msdn.microsoft.com/en-us/library/ht1sxswy). 这可以使用 lambda 实现，并且比 MSDN 文档中显示的繁琐方法更好。

例如，假设您有一个`FormatItem`接受字符串并返回格式化字符串的方法：

```
public string FormatItem(string item)
{
    return String.Format("-- {0} --", item);
} 
```

要使用`FormatItem`，您可以使用以下代码更改`Regex.Replace`前面代码示例中使用的方法：

```
string formatted = Regex.Replace(m.Value, digitPattern,
                       d => FormatItem(d.Value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:09:47.770

这是所需语法的示例，还表明您可以通过回调在替换中回退到 C#。

[Regex.Replace 中的 MatchEvaluator 如何工作？](https://stackoverflow.com/questions/2587866/how-does-matchevaluator-works-c-sharp-regex-replace)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T04:55:56.657

你似乎是同时从两个方向来的。一方面，您有一个包含三个捕获组的正则表达式，因此您希望解决方案涉及 GroupCollection。另一方面，所有三个组都具有相同的名称，因此您可能必须将它们视为同一组的单独捕获 - 即 CaptureCollection。实际上，您可能不需要它们中的任何一个。这是你的正则表达式（经过一点美学调整）：

```
string source = @"Total cost for Item #25, 38, and 45 is 100 dollars.";

Regex regex1 = new Regex(
    @"\bItem #(?<ITEMID>\d+)|,\s*(?<ITEMID>\d+)|,?\s+and\s+(?<ITEMID>\d+)",
    RegexOptions.IgnoreCase | RegexOptions.ExplicitCapture);

foreach (Match m in regex1.Matches(source)) {
  Console.WriteLine(m.Groups["ITEMID"].Value);
} 
```

它按预期输出`25`, `38`。`45`每个备选方案都有自己的捕获组副本，但只有其中一个将参加每场比赛。这是 .NET 正则表达式风格的一个显着特征；其他一些提供了允许您重用组名的特殊设置或组构造，但它们都不像 .NET 那样简单。但是，在这种情况下您并不需要它。您可以合并替代方案，如下所示：

```
@"(\bItem #|,\s*|,?\s+and\s+)(?<ITEMID>\d+)" 
```

但是，您的正则表达式存在问题，如果您将源字符串更改为以下内容，则会显示该问题：

```
@"Total cost for Item #25, 38, and 45 is 1,500 dollars and 42 cents." 
```

现在的输出是`25`, `38`, `45`, `500`, `42`。为了防止这些误报，您需要确保每个不以`Item #`, 开头的匹配都从最后一个匹配结束的地方开始。为此，您可以使用`\G`：

```
@"(\bItem #|\G,?\s+and\s+|\G,\s*)(?<ITEMID>\d+)" 
```

（为了提高效率，我还交换了最后两个选项的顺序。）把所有这些放在一起，我们只有另一个正则表达式替换。

```
string source =
   @"Total cost for Item #25, 38, and 45 is 1,500 dollars and 42 cents.";
Regex regex2 = new Regex(
    @"(?<TEXT>\bItem #|\G,?\s+and\s+|\G,\s*)(?<ITEMID>\d+)",
    RegexOptions.IgnoreCase | RegexOptions.ExplicitCapture);
string result = regex2.Replace(source, 
    @"${TEXT}<a href='URL_${ITEMID}'>${ITEMID}</a>");
Console.WriteLine(result); 
```

不需要显式使用 GroupCollections 或 CaptureCollections，除非您的替换比这复杂得多，否则可能也不需要 MatchEvaluator。

# wpf - ScatterViewItem IsManipulationEnabled = false Routing Event

> ID：11267538
> 
> 赞同：0
> 
> 时间：2012-06-29T19:03:37.503
> 
> 标签：wpf, pixelsense, scatterview

I have a `ScatterViewItem` that I want to host a `UserControl` inside. Now I want to be able to toggle `IsManipulationEnabled` on the `ScatterViewItem` to lock it into place on a `ScatterView`.

When it's locked I want to be able to manipulate the `UserControl` inside (e.g panning, zooming, rotating, etc.).

If I set `IsManipulationEnabled` to false, then it seems to block all events to the `UserControl` because my `ManipulationStarting`, `ManipulationDelta` events hooked to my `UserControl` wont fire.

Is there a way around this problem? I'm just using a simple image as my `UserControl` at the moment.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:37:43.557

使用 CanMove/CanRotate/CanScale 代替 ManipulationMode

# ruby-on-rails - 如何将特定请求详细信息记录到 Rails 服务器日志

> ID：11267540
> 
> 赞同：15
> 
> 时间：2012-06-29T19:03:50.047
> 
> 标签：ruby-on-rails, ruby, logging, heroku

我通常不喜欢直接询问如何在不了解发生了什么的情况下做某事，但我对 Rails 还很陌生，而且我很难做到这一点。

基本上，我需要在单个日志语句中为每个请求捕获以下信息（如果可能的话）

*   日志输入日期*   日志进入时间*   HTTP方法*   请求的网址*   港口*   请求者的 IP 地址*   请求者的用户代理*   引荐网址*   HTTP 响应代码*   主机名

    自定义日志格式的首选方式是什么？是否可以只修改现有日志并将此信息传递给它？还是我需要扩展和覆盖我需要的行为？

    我不需要将其保存到不同的日志文件或任何东西，只需在每个请求上输出到 STDOUT。

    对此的任何帮助将不胜感激。

    谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-08T06:30:40.543

我知道这是一个老问题，但对于未来偶然发现这个问题的人，我相信 Rails 3.2+ 中的首选方法是使用 ActiveSupport::TaggedLogging。介绍这个的博文[在这里](http://weblog.rubyonrails.org/2012/1/20/rails-3-2-0-faster-dev-mode-routing-explain-queries-tagged-logger-store)

还有一个简单的示例，它将子域、每个请求的 UUID 和用户代理添加到每个日志消息。您可以在您的环境初始化文件中弹出它。

```
config.log_tags = [ :subdomain, :uuid, lambda { |request| request.user_agent } ] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-04T05:57:30.197

我相信大多数（如果不是全部）您请求的信息都可以在请求标头和响应中找到。有关如何将其添加到日志的信息[之前已得到解答](https://stackoverflow.com/questions/2667634/include-params-request-information-in-rails-logger)，但基本上您可以在 ApplicationController 中使用[around_filter](http://rails.rubyonrails.org/classes/ActionController/Filters/ClassMethods.html#M000322)来记录您关心的信息，形成请求标头。例如，您可以从请求中记录用户代理并从响应中记录状态代码：

```
class ApplicationController < ActionController::Base 
  around_filter :global_request_logging

  def global_request_logging 
    logger.info "USERAGENT: #{request.headers['HTTP_USER_AGENT']}"
    begin 
      yield 
    ensure 
      logger.info "response_status: #{response.status}"
    end 
  end 
end 
```

至于获得你想要的格式，如果你包装调用，你可以输出你想要的任何格式。此外，Rails 记录器也非常可定制，并且已经存在一些项目可能适合您替换默认日志记录的需求或作为如何创建有用格式的灵感：

*   [lograge](https://github.com/roidrage/lograge) - 用单行键值输出替换默认的 Rails 日志记录，但还没有做请求参数
*   [滚动](https://github.com/asenchi/scrolls)- 更通用的上下文，键值

# php - Run an exe file to open in browser via php

> ID：11267543
> 
> 赞同：0
> 
> 时间：2012-06-29T19:04:00.647
> 
> 标签：php, exec

I want to open an exe file stored in my linux server in a browser how this can be achieved I am trying this

```
<?php

echo exec('Undersaturated');
?> 
```

but it only shows a blank page while accessing the page through browser

Can it be achieved through other web language ?

# c++ - Why is the character `0x62A` printed with the "Calibri" font, but the character `0x660E` isn't?

> ID：11267545
> 
> 赞同：3
> 
> 时间：2012-06-29T19:04:04.467
> 
> 标签：c++, winapi, fonts

The `Calibri` font doesn't have neither one of the characters, `0x062A` and `0x660E`, but the first character gets printed using some other font. However, the character `0x660E` shows as an invalid char code. Why `TextOut()` doesn't substitute the font to print this last character, the same it did with the character code `0x062A` ?

If I replace the `Calibri` font by `Arial`, the result is the same.

**Edit : also I want to call your attention to this sentence, which can be found here [http://msdn.microsoft.com/en-us/goglobal/bb688134.aspx](http://msdn.microsoft.com/en-us/goglobal/bb688134.aspx) : "The Windows core fonts (Times New Roman, Courier New, Arial, Microsoft Sans Serif, and Tahoma) contain Latin, Hebrew, Arabic, Greek, and Cyrillic scripts but do not contain East Asian script characters. They link to fonts that do."** Well I've tried my code with all those fonts and the results were exactly the same : the character 0x660E is rendered invalid.

```
LRESULT CALLBACK WndProc (HWND hwnd, UINT message, UINT wParam, LONG lParam)
{
    static HFONT s_hFont;   

    switch( message )
    {
        case WM_CREATE:
        {
            LOGFONT lf;
            memset(&lf, 0, sizeof(LOGFONT));
            lf.lfHeight = -MulDiv(20, 96, 72);
            lf.lfOutPrecision = OUT_DEFAULT_PRECIS;
            wcscpy_s(lf.lfFaceName, LF_FACESIZE, L"Calibri");

            if( !(s_hFont = CreateFontIndirect(&lf)) ) return -1;
        }
        break;

        case WM_PAINT:
        {
            PAINTSTRUCT ps;
            BeginPaint(hwnd, &ps);
            s_hFont = (HFONT)SelectObject(ps.hdc, s_hFont);

            wchar_t wchar1 = 0x062A;                //  Arabic character
            TextOut(ps.hdc, 10, 10, &wchar1, 1);

            wchar_t wchar2 = 0x660E;                //  Japanese character
            TextOut(ps.hdc, 10, 50, &wchar2, 1);

            s_hFont = (HFONT)SelectObject(ps.hdc, s_hFont);
            EndPaint(hwnd, &ps);
        }
        break;

        case WM_DESTROY:
        DeleteObject(s_hFont);
        PostQuitMessage(0);
        break;

        default:

        return DefWindowProc(hwnd, message, wParam, lParam);
    }
    return 0L ;
} 
```

Screen shot from the output

![enter image description here](../Images/335c8bc4076049e87870e1728fc608c7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T20:04:00.817

我怀疑你会得到一个很好的答案，因为字体链接没有很好的文档记录，也没有人真正关心它（原因我会解释）。

Michael Kaplan 就该主题写了一系列简短的文章：字体替换和链接[第 1](http://www.siao2.com/2005/03/20/399322.aspx)部分、[第 2](http://www.siao2.com/2005/05/16/417711.aspx)部分和[第 3](http://www.siao2.com/2005/06/18/430507.aspx)部分。还有一篇[MSDN 文章](http://msdn.microsoft.com/en-us/goglobal/bb688134.aspx)。

正如 Michael Kaplan 所指出的，字体链接取决于当前的系统区域设置，也可以在任何系统上进行编辑。你不能依赖它。

因此，任何关心处理多语言文本的应用程序都将使用[MLang](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/16/185261.aspx)或[Uniscribe](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374091%28v=vs.85%29.aspx)或其他一些库来确保获得良好的结果。

大多数应用程序不需要这种级别的国际支持。处理用户自己的脚本通常就足够了，Windows 主要为您完成这些。比如我的日文用户想输入日文；他们不在乎乌尔都语是否不能在他们的电脑上工作。对于巴基斯坦的用户，反之亦然。

总之，如果您不关心支持的不仅仅是用户的脚本，请使用 Windows 默认值。如果您确实关心，请使用库进行文本输出。不要依赖字体链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T23:24:36.023

> Windows 核心字体（Times New Roman、Courier New、Arial、Microsoft Sans Serif 和 Tahoma）包含拉丁文、希伯来文、阿拉伯文、希腊文和西里尔文，但不包含东亚文字字符。它们链接到这样做的字体。

而且，确实它们确实链接到支持 CJK 的字体，但这并不意味着您已经安装了这些字体。您没有指定哪个版本的 Windows。在旧版本（例如，XP 和可能的 Vista）上，如果您安装“西方”版本，除非您明确要求 Windows 安装必要的字体和表格，否则您不会获得良好的 CJK 字体支持。

有一个控制面板应用程序（区域设置？）可让您表明您需要更完整的国际字符支持。它将要求您的安装媒体存在，并且它将安装更多字体并更新与这些附加字符相关的表格。它甚至可能更新字体链接注册表项。

# widget - how to create a widget layer in awesome wm with compton for screenlets

> ID：11267546
> 
> 赞同：1
> 
> 时间：2012-06-29T19:04:09.950
> 
> 标签：widget, awesome-wm

My google foo has produced no answers, and I'm not sure if this is something that would be implemented in compton, or awesome, or both need to be configured (compton is a fork of xcompmgr-dana)

Any help would be greatly appreciated.

# ruby-on-rails - How to delete Shopify Webhooks made thru Shopify API?

> ID：11267547
> 
> 赞同：6
> 
> 时间：2012-06-29T19:04:18.270
> 
> 标签：ruby-on-rails, shopify, webhooks

I'm having trouble deleting Webhooks that I created thru the Shopify API. To create the webhook, I used this code in RoR:

```
webhook = ShopifyAPI::Webhook.create(format: "json", topic: "orders/create", address: "some address") 
```

I'm able to send a GET request and retrieve all the webhooks that were created. But when I send the DELETE request with the respective ID, the response is "404 Not Found - errors: Not found". I'm sending the DELETE request using Firefox's RESTClient, and the format is like this:

```
DELETE https://api_key:shared-secret@hostname/admin/webhooks/1855159.json 
```

Maybe it's not working because the webhooks were created via the API. Is there another way to delete the webhooks? Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-13T12:53:29.087

删除/admin/webhooks/4759306.json

删除网络挂钩

从商店中删除现有的 webhook

```
DELETE /admin/webhooks/#{id}.json 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:15:05.917

我认为当您从管理面板中删除应用程序时，该应用程序创建的 webhook 会自动删除

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-30T05:15:37.823

这就是您删除应用程序创建的 webhook 的方式。Webhook`1855159`是由商店创建的，而不是由应用程序创建的，只能由商店的管理员删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-21T21:58:51.563

您应该先检索您的 webhook，然后再删除它们。

```
@webhooks = ShopifyAPI::Webhook.find(:all, :params => {:limit => 10})
@webhooks.each {|webhook| webhook.destroy } 
```

# java - 从方法返回数组以从哈希图中获取对象 - java

> ID：11267550
> 
> 赞同：0
> 
> 时间：2012-06-29T19:04:34.010
> 
> 标签：java, arrays, methods, hashmap

我有一个包含通过构造函数创建的对象的哈希图。这些对象在哈希图中

我有一个比较两个数组的函数。第一个数组是手动创建的，但第二个数组是通过方法创建的。我只需要哈希图中的值。

```
String[] checkOne= { "1.2:3,4:Brown", "1.1:5,4:Green" };

Map<String,RoundBrick> hashMap = new HashMap<String, RoundBrick>();

public void addBrick(RoundBrick roundBrick){
    hashMap.put(roundBrick.getRef, roundBrick)
}

checkBrick(getBricks(), one){
...
}

public static boolean checkBrick(Brick[] brick, String[] checkOne){
...
} 
```

我被困的地方是这种方法......

```
public Brick[] getBricks(){ 
```

如何将对象从 hashmap 转换为数组，以便比较两个数组的内容？我可以去...

```
public Brick[] getBricks() {   
Brick[] bricks = {hashmap.value().toArray()};   
return bricks;    
} 
```

但这给出了错误，说不能从 Object[] 转换为 Brick

*   如果我取出 .toArray()，我会得到“无法从 Collection< RoundBrick > 转换为 Brick”
*   如果我将 .toArray() 更改为 .toString()，我会得到“无法从 String 转换为 Brick”

如果我将方法更改为以下...

```
public Brick[] getBricks() {
    String a = Arrays.toString(hashmap.values().toArray());
    return a;
} 
```

我在“a”上遇到的错误是“无法从 String 转换为 Brick[]”

添加下面的行时，它会打印出数组。

```
System.out.print(hashmap.values());

[1.2:3,4:Brown, 1.1:5,4:Green] 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:10:02.497

```
public Brick[] getBricks() {   
    return hashmap.values().toArray(new Brick[0]);   
} 
```

# jquery - independently jquery toggle animate height only runs once each time

> ID：11267551
> 
> 赞同：0
> 
> 时间：2012-06-29T19:04:34.907
> 
> 标签：jquery, jquery-animate, toggle

This question is based on my previous question which I got a working answer to, but only for one slidetoggle element: [link](https://stackoverflow.com/questions/11252719/why-does-this-slide-toggle-only-run-once)

I use the animate method to have the "hidden" elements loaded in the background. Otherwise I could just use slidetoggle, but this leads to a display:none which I don't want.

So, here's the function I got so far, but it only runs once for each h2.

**HTML:**

```
<h2>Show</h2>
    <div class="content">
        text text text
        <br />
        text text text
        <br />
        text text text
    </div>

<h2>Show</h2>
    <div class="content">
        text text text
        <br />
        text text text
        <br />
        text text text
    </div> 
```

**CSS:**

```
.content {
  height: 0;
  overflow: hidden;
}

.heightAuto {
    height: auto;
}​ 
```

**SCRIPT:**

```
$(function(){  

    $("h2").toggle(function()

     {    
       var $content = $(this).next(".content");
       var contentHeight = $content.addClass('heightAuto').height();
       $content.removeClass('heightAuto');

       $content.removeClass('heightAuto').animate({ height: contentHeight}, 500);

     }, function() {

        $(this).next(".content").animate({ height: "0"}, 500);    

     });
});​ 
```

​Could it be a problem to get the height set to auto again? I just can't find the trick.

Here's also fiddle: [jsfiddle](http://jsfiddle.net/QwmJP/17/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:25:12.087

添加一个不会调整大小的额外包装器：

```
<div class="content"><div class="inner">
    text text text
    <br />
    text text text
    <br />
    text text text
</div></div> 
```

然后使用这个 JS：

```
jQuery(function($) {  
    $('h2').toggle(function() {
        var $content = $(this).next('.content');
        $content.animate({ height: $content.find('> .inner').height() }, 500);
    }, function() {
        $(this).next('.content').animate({ height: 0 }, 500);       
    });
}); 
```

**编辑：**如果您不想在 HTML 中使用额外的包装器，您可以让 JS 为您添加一个包装器：

```
jQuery(function($) {  
    $('h2').toggle(function() {
        var $content = $(this).next('.outer');
        $content.animate({ height: $content.find('> .content').height() }, 500);
    }, function() {
        $(this).next('.outer').animate({ height: 0 }, 500);       
    }).next('.content').wrap('<div class="outer" style="height:0;overflow:hidden"></div>');
});​ 
```

如果您使用这种方法，您应该删除 .content 块的 CSS。请参阅更新的小提琴：http: [//jsfiddle.net/QwmJP/21/](http://jsfiddle.net/QwmJP/21/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T20:19:06.973

为了克服你的问题，设置`overflow:hidden`if height is `0`。

参考**[现场演示](http://jsfiddle.net/SivaCharan/QwmJP/24/)**

## JS：

```
$(function(){
    $("h2").toggle(
        function() {    
            var $content = $(this).next(".content");
            var contentHeight = $content.addClass('heightAuto').height();
            if (contentHeight == 0) {
                contentHeight = $content.attr({
                    style:'overflow:hidden'
                }).height(); 
            }            
            $content.removeClass('heightAuto').animate({ height: contentHeight}, 500);
        }, 
        function() {
            $(this).next(".content").animate({height:0}, 500);
        });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:11:31.470

因为您第一次将高度设置为 0，所以下次它为零，所以 .height() 值返回零。

请改用 offsetHeight 属性：它将始终是内容的自然高度。

# c# - a = (x == null) 的最佳语法？空：x.func()

> ID：11267554
> 
> 赞同：58
> 
> 时间：2012-06-29T19:04:41.863
> 
> 标签：c#, syntax

这里的基本问题 - 我有很多看起来像这样的代码行：

```
var a = (long_expression == null) ? null : long_expression.Method(); 
```

类似的行在这个函数中重复了很多。`long_expression`每次都不一样。我试图找到**一种避免重复`long_expression`但保持紧凑**的方法。类似的东西`operator ??`。目前，我正在考虑放弃并将其放在多行上，例如：

```
var temp = long_expression;
var a = (temp == null) ? null : temp.Method(); 
```

但是我很好奇是否有一些我不知道的聪明语法会使这更简洁。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-29T19:09:11.363

Well, you *could* use an extension method like this:

```
public static TResult NullOr<TSource, TResult>(this TSource source,
    Func<TSource, TResult> func) where TSource : class where TResult : class
{
    return source == null ? null : func(source);
} 
```

Then:

```
var a = some_long_expression.NullOr(x => x.Method()); 
```

Or (depending on your version of C#)

```
var a = some_long_expression.NullOr(Foo.Method); 
```

where `Foo` is the type of `some_long_expression`.

I don't think I *would* do this though. I'd just use the two line version. It's simpler and less clever - and while "clever" is fun for Stack Overflow, it's not usually a good idea for real code.

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-06-29T19:27:22.570

我发现[这个答案](https://stackoverflow.com/a/1943617/8155)很有见地。

通过执行此分配，您将 null 传播到系统的更深处。您必须再次（一次又一次地）编写您的空处理条件来处理这些传播。

与其允许使用 null 继续执行，不如将 null 替换为更好的表示形式（引用自链接）

> 1.  如果 null 表示空集合，则使用空集合。
> 2.  如果 null 表示异常情况，则抛出异常。
> 3.  如果 null 表示意外未初始化的值，则显式初始化它。
> 4.  如果 null 表示合法值，请对其进行测试 - 或者更好地使用执行 null 操作的 NullObject。

特别是，用空集合替换空集合引用为我节省了许多空测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-30T07:02:46.640

```
var x = "";

/* try null instead */
string long_expression = "foo";

var a = ((x = long_expression) == null) ? null : x.ToUpper();

/* writes "FOO" (or nothing) followed by newline */
Console.WriteLine(a); 
```

的初始化值的`x`类型必须与`long_expression`（这里：`string`）的类型兼容。适用于[Mono](http://www.mono-project.com/Main_Page) C# 编译器，版本 2.10.8.1（来自 Debian 包 mono-gmcs=2.10.8.1-4）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-03T19:30:16.330

我认为 C# 语言真的可以为这种逻辑使用一个新的运算符——这很常见，一个运算符可以简化无数行代码。

我们需要类似“？？”的东西。或 "if null then" 运算符，但它作为特殊的 '.' 工作。带有“if not null”条件的点运算符。为了第一 '？' 就像 "?:" if-then 的 'if' 部分和第二个 '?' 表示“null”，如可空类型。我认为我们需要一个“.?” 运算符的工作方式与“.”类似，但如果左表达式为 null 而不是抛出异常，则它只是简单地计算为 null。我想这将是一个“dot not null”运算符（好吧，所以也许“.！？”会更合乎逻辑，但我们不要去那里）。

因此，您非常常见的示例可能会丢失这样的冗余符号名称：

```
var a = long_expression.?Method(); 
```

有大量的 C# 代码带有嵌套的空检查，这将大大受益。想想如果这样会多好：

```
if (localObject != null)
{
    if (localObject.ChildObject != null)
    {
        if (localObject.ChildObject.ChildObject != null)
            localObject.ChildObject.ChildObject.DoSomething();
    }
} 
```

可能会变成：

```
localObject.?ChildObject.?ChildObject.?DoSomething(); 
```

还有大量代码缺少应该存在的空检查，从而导致偶尔的运行时错误。所以，实际上使用新的'.?' 默认情况下，运算符将消除此类问题...不幸的是，我们无法逆转 '.' 的行为。和 '。？' 在这一点上，所以只有新的 '.?' 如果左侧为空，则抛出异常 - 这将是更清洁和更合乎逻辑的方式，但破坏性更改非常糟糕。虽然，有人可能会争辩说，这种特殊的变化可能会解决很多隐藏的问题，并且不太可能破坏任何东西（只有期望抛出 null ref 异常的代码）。哦，好吧……一个人总能做梦……

检查空值的唯一缺点实际上是对性能的轻微影响，这就是为什么 '.' 的原因。不检查空值。但是，我真的认为只使用 '.?' 的能力 当您关心性能时（并且知道左侧永远不会为空）会是更好的选择。

在类似的说明中，让“foreach”检查并忽略空集合也会好得多。不再需要用“if (collection != null)”来包装大多数“foreach”语句，或者更糟的是，养成始终使用空集合而不是 null 的习惯……这在某些情况下很好，但更糟糕的是在大多数集合为空的复杂对象树中执行此操作时，与空值检查相比，性能问题是空的（我见过很多）。我认为在大多数情况下，不让“foreach”检查 null 以提供更好的性能的良好意图适得其反。

Anders，做出这样的改变永远不会太晚，并添加一个编译器开关来启用它们！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T19:11:47.447

您可以为 long_expression 评估为的任何类型编写扩展方法：

```
public static object DoMethod(this MyType pLongExpression)
{
   return pLongExpression == null ? null : pLongExpression.Method();
} 
```

这将可以在任何`MyType`引用上调用，即使该引用是`null`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T19:07:10.357

您可以放入`long_expression == null`一个具有短名称的函数，然后每次都调用该函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-11T11:56:41.243

if (!String.IsNullOrEmpty(x)) x.func()

# mongodb - couchdb 或 mongodb/cassandra 或其他 nosql 的存储要求

> ID：11267560
> 
> 赞同：1
> 
> 时间：2012-06-29T19:04:50.660
> 
> 标签：mongodb, cassandra, couchdb, storage, nosql

我正在尝试存储数据以经常检索它并不时更新（不经常）。它主要是使用列表基于给定格式的键进行检索。

我用 1G 的原始 json 数据尝试了 couchDB，它运行良好，但在 couchDB 中需要 8G 的内存！

我有以下 json 格式的数据：

```
{"_id": "002100094112000000", ...mydata here} 
```

我错过了什么吗？为什么用 couchdb 会膨胀到 8G？我应该使用另一个系统（cassandra，mongodb）吗？

# pdf - QuickLook PDF 的 Monotouch 示例

> ID：11267562
> 
> 赞同：1
> 
> 时间：2012-06-29T19:04:50.540
> 
> 标签：pdf, xamarin.ios, quicklook

我正在寻找一个使用 QuickLook Monotouch API 的基本 pdf 查看器示例。我已经搜索并找到了一些零碎的东西，但似乎无法将它们全部整合起来。

我将从预先保存到 iPad 上个人文件夹的文件中读取 pdf，并希望将 pdf 显示为模态视图。

如果有人可以发布一个简单的例子，那将不胜感激。

到目前为止我所拥有的如下。

谢谢！

```
 path = Environment.GetFolderPath(Environment.SpecialFolder.Personal);
        pdfPath = System.IO.Path.Combine(path, "pdfReport.pdf");

        QLPreviewController myPdfController = new QLPreviewController();
        MyPdf pdfToShow = new MyPdf("", new Uri(""));   // Not sure about this line
        myPdfController.DataSource = pdfPath;           // Not sure what this line should be
        PresentModalViewController(myPdfController, true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:58:34.073

我刚刚使用了 UIWebView 并像这样加载它：

```
NSUrl docUrl = NSUrl.FromFilename(PDFInvoice.FullFilename);
NSUrlRequest request = new NSUrlRequest(docUrl);

webView.LoadRequest(request); 
```

# python - Tkinter 课程调用问题

> ID：11267567
> 
> 赞同：1
> 
> 时间：2012-06-29T19:05:33.787
> 
> 标签：python, tkinter, python-2.7

我试图在我的 Tkinter gui 中添加一个进度条，但我一直被一个我不是 100% 确定如何定义的问题所困扰。我的程序就是这样设置的。

```
class MAIN(object):
    def __init__(self, *args, **kwargs)
        tkinter stuff...

root = tk.Tk()
app = MAIN(root)
app.mainloop() 
```

然后我尝试使用[这个](https://stackoverflow.com/a/7310778/1373048)例子添加一个进度（它自己工作）。这段代码是这样设置的。

```
class MAIN(tk.Tk):
    def __init__(self, *args, **kwargs)
        tk.Tk.__init(self, *args, **kwargs)
        tkinter stuff....

app = MAIN()
app.mainloop() 
```

如果我将这些程序中的任何一个更改为其他程序的格式，它们都会引发错误。理想情况下，我希望能够保持我的格式（第一个格式）并能够以我的格式运行示例，这样我就不必更新很多遗留代码。

帮助/解释将不胜感激。

编辑：这是错误。

```
TypeError: unbound method __init__() must be called with Tk instance as first argument (got SampleApp instance instead) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:51:58.410

我的问题是我不了解类中的继承，并且在尝试使用进度条之前我的程序不需要对`tk.Tk.__init__`. 因此，该问题的解决方案是`class MAIN(object):`用`class MAIN(tk.Tk):`工作示例中的替换。我的进度条仍然无法正常工作，现在还有另一个窗口，但程序运行。

# bash - 在 Bash 中具有多个表达式的复合“if”语句

> ID：11267569
> 
> 赞同：18
> 
> 时间：2012-06-29T19:05:47.360
> 
> 标签：bash, if-statement, syntax

我想重新创建这样的东西

```
if ( arg1 || arg2 || arg 3) {} 
```

到目前为止，我确实做到了，但出现以下错误：

```
line 11: [.: command not found

if [ $char == $';' -o $char == $'\\' -o $char == $'\'' ]
then ... 
```

我尝试了不同的方法，但似乎都没有奏效。[我试过的一些](http://crazedmonkey.com/blog/programming/multiple-expression-if-statement-in-bash.html)。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-29T19:06:54.473

对于 Bash，您可以使用表单而`[[ ]]`不是`[ ]`，它允许在内部：`&&``||`

```
if [[ foo || bar || baz ]] ; then
  ...
fi 
```

否则，您可以在外部使用通常的布尔逻辑运算符：

```
[ foo ] || [ bar ] || [ baz ] 
```

...或使用特定于`test`命令的运算符（[尽管 POSIX 规范的现代版本将此 XSI 扩展描述为已弃用 - 请参阅应用程序使用部分](http://pubs.opengroup.org/stage7tc1/utilities/test.html)）：

```
[ foo -o bar -o baz ] 
```

...这是以下内容的不同书写形式，同样被弃用：

```
test foo -o bar -o baz 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-04T20:17:17.750

Bash 的`[[ ]]`和`(( ))`比`[ ]`.

*   `[[ ]]`用于字符串，`(( ))`用于整数逻辑和算术
*   `&&`and`||`运算符可以在`[[ ]]`and中使用`(( ))`，并且`()`可以用于分组
*   无需在内部引用变量扩展`[[ ]]`或- Bash在这些上下文`(( ))`中不进行[分词或通配](https://mywiki.wooledge.org/WordSplitting)
*   在里面`(( ))`，不需要`$`后面的变量名来扩展它们
*   `[[ ]]`并且`(( ))`可以跨越多行，而不需要与`\`

使用这些，我们可以编写干净、可读和更可靠的代码。

# 例子

## 带整数的复合语句

```
a=1 b=2 c=3
((a == 2 || (b == 2 && c == 3))) && echo yes                   # yields yes 
```

## 带字符串的复合语句

```
x=apple y=mango z=pear
[[ $x == orange || ($y == mango && $z == pear) ]] && echo yes  # yields yes 
```

# [ 上述语句的等价物，使用 {}

```
[ "$a" -eq 2 ] || { [ "$b" -eq 2 ] && [ "$c" -eq 3 ]; }
[ "$x" == orange ] || { [ $y == mango ] && [ "$z" == pear ]; } 
```

* * *

# 有关的

*   [在 Bash 中，双方括号 [[ ]] 是否优于单方括号 [ ]？](https://stackoverflow.com/q/669452/6862601)
*   [如何使用双括号或单括号、圆括号、花括号](https://stackoverflow.com/q/2188199/6862601)
*   比较整数： Unix & Linux 上的[算术表达式或条件表达式](https://unix.stackexchange.com/q/278707/201820)
*   [在 Bash 中测试非零长度字符串：[ -n “$var” ] 或 [ “$var” ]](https://stackoverflow.com/a/49825114/6862601)
*   [条件表达式 - Bash 手册](https://www.gnu.org/software/bash/manual/html_node/Bash-Conditional-Expressions.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-29T19:09:39.990

[Charles 的回答](https://stackoverflow.com/a/11267582/418413)是正确的，因为它向您展示了如何在语句内（和没有，就此而言）对命令执行逻辑操作`if`，但它看起来更像是您想在`case`这里使用：

```
case $char in
    \;|\\|\') echo found;;
    *) echo 'not found';;
esac 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-29T11:06:12.680

在 bash 中，要使用`[ ]`构造对条件进行分组，您必须使用括号将每个组括起来。每个左/右括号必须转义，并在前面/后面加一个空格。见下文：

```
if [ \( "$char" = "$;" \) -o \( "$char" = "$\\" \) -o \( "$char" = "$\" \) ] 
```

因此，最好听从其他人的建议并使用 bash 的新`[[ ]]`结构。最后，据我了解，它`==`是一个关系运算符，旨在用于算术表达式。IE -

```
$((3==4)) 
```

Cameron Newham 和 Bill Rosenblatt，“学习 bash Shell”，1998 年 1 月

# html - 下雪的烦恼

> ID：11267586
> 
> 赞同：2
> 
> 时间：2012-06-29T19:07:03.513
> 
> 标签：html, canvas

我决定尝试更多地了解 HTML5 画布，并构建一个背景为飘落的雪花的页面。我希望能够动态地执行此操作（我知道如何使对象在画布等上移动，并且可以手动执行此操作）。我的意思是我想简单地更改一个变量来控制页面上一次有多少雪花，而不必复制和粘贴代码。我也不是 100% 确定我的语法是否适用于某些对象和循环。

我第一次尝试寻找一个教程来引导我完成这个过程，但找不到任何关于如何制作雪的教程。如果有人碰巧知道一个并且会给出一个很棒的链接。到目前为止，这是我的代码。

```
<!DOCTYPE html>
<html>
<head>
<title>Obese</title>
<style type="text/css">
    body
{
     background-color:black;
    }
</style>
</head>
<body>
<script type="text/javascript">
    function vp(woh)
    {
        var viewportwidth;
        var viewportheight;

        if (typeof window.innerWidth != 'undefined')
        {
             viewportwidth = window.innerWidth,
             viewportheight = window.innerHeight
         }

         else if (typeof document.documentElement != 'undefined'
             && typeof document.documentElement.clientWidth !=
             'undefined' && document.documentElement.clientWidth != 0)
         {
             viewportwidth = document.documentElement.clientWidth,
             viewportheight = document.documentElement.clientHeight
         }

         else
         {
               viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
               viewportheight = document.getElementsByTagName('body')[0].clientHeight
         }
            if (woh == 'w')
            {
                return viewportwidth;
            }
            else if (woh == 'h')
            {
                return viewportheight;
            }
            else
            {
                return false;
            }

        }
    function snowflake()
    {
        this.x = Math.random() * canvas.width;
        this.y = 0;
        var toberadius = Math.random() * 50;
        this.radius = toberadius + 10;
        this.color = "white";
        var tobefallingSpeed = Math.random() * 100;
        this.fallingSpeed = tobefallingSpeed + 30;
        numberofSnowflakes++;
    }
    function update(m)
    {
        if (snowflakes < numberofSnowflakes)
        {
            for (i=0;i<numberofSnowflakes;i++)
            {
                sf[i] = new snowflake();
                snowflakes = i;
            }
        }
        for (c=0;c<snowflakes;c++)
        {
            sf[m].y += sf[m].fallingSpeed * m;
        }
    }
    function render()
    {
        for (b=0;b<snowflakes;b++)
        {
            ctx.fillStyle = "#FFFFFF";
            ctx.fillRect(sf[b].x,sf[b].y,sf[b].radius,sf[b].radius);
        }
    }
    function main()
    {
        alert('asdf');
        now = Date.now();
        delta = now - then;
        update(delta/1000);
        render();
        then = now;
    }
    then = Date.now();
    var int = self.setInterval("main()",1);
    var canvas = document.createElement("canvas");
    var ctx = canvas.getContext("2d");
    canvas.width = vp('w');
    canvas.height = vp('h');
    document.body.appendChild(canvas);

    var numberofSnowflakes = 50;
    var snowflakes = 0;
    var sf = new Object();

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:57:28.657

正如我在评论中提到的，我实际上创建了自己的 snow 插件，该插件已在一些网站、[博客文章](http://www.somethinghitme.com/2011/10/05/jquery-snowfall-1-5-update-now-with-snow-buildup/)和[Github](https://github.com/loktar00/JQuery-Snowfall)上使用。所以不用说我是这种效果的粉丝:)。

下面的代码应该可以帮助您入门。

**[工作版本](http://jsfiddle.net/loktar/DgrxX/)**

```
 function vp(woh)
    {
        var viewportwidth;
        var viewportheight;

        if (typeof window.innerWidth != 'undefined')
        {
             viewportwidth = window.innerWidth,
             viewportheight = window.innerHeight
         }

         else if (typeof document.documentElement != 'undefined'
             && typeof document.documentElement.clientWidth !=
             'undefined' && document.documentElement.clientWidth != 0)
         {
             viewportwidth = document.documentElement.clientWidth,
             viewportheight = document.documentElement.clientHeight
         }

         else
         {
               viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
               viewportheight = document.getElementsByTagName('body')[0].clientHeight
         }
            if (woh == 'w')
            {
                return viewportwidth;
            }
            else if (woh == 'h')
            {
                return viewportheight;
            }
            else
            {
                return false;
            }

        }
    function snowflake()
    {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.radius = Math.random()*2;
        this.color = "white";
        var tobefallingSpeed = Math.random() * 100;
        this.fallingSpeed = tobefallingSpeed + 30;
    }
    function render()
    {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        for (b=0;b<snowflakes;b++)
        {  
            sf[b].y+=0.4;
            if(sf[b].y> canvas.height){
             sf[b].y = 0;   
            }
            ctx.fillStyle = "#FFFFFF";
            ctx.fillRect(sf[b].x,sf[b].y,sf[b].radius,sf[b].radius);
        }
    }
    function main()
    {
        now = Date.now();
        delta = now - then;
        render();
        then = now;
    }
    then = Date.now();
    var int = self.setInterval(main,1);
    var canvas = document.createElement("canvas");
    var ctx = canvas.getContext("2d");
    canvas.width = vp('w');
    canvas.height = vp('h');
    document.body.appendChild(canvas);

    var numberofSnowflakes = 100;
    var sf = [];

    for (i=0;i<numberofSnowflakes;i++)
    {
        sf[i] = new snowflake();
        snowflakes = i;
    } 
```

# lotus-notes - Lotus Notes - Creating a view to display all "marked as read" email

> ID：11267590
> 
> 赞同：0
> 
> 时间：2012-06-29T19:07:15.163
> 
> 标签：lotus-notes, lotus

seeking for advise to create a specific view in lotus notes.

aim is to have a similar view to 'all documents' - ie showing ALL the emails, also the ones already filed in subfolders BUT with applying a filter so it only shows those documents that were already marked as read.

thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:39:19.910

您不能创建只显示未读文档的视图。

相反，您可以使用“所有文档”视图（或任何其他视图或文件夹）以及按未读过滤视图的选项。使用菜单 View - Show - Unread Only 来使用这个过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T06:13:27.370

这可以通过执行以下操作来实现。

1）在邮件文件中创建一个新文件夹（未读）。2）转到收件箱，然后查看菜单->显示->仅未读 3）将所有未读邮件移动到（未读）文件夹，然后再次转到查看菜单->显示->取消选中仅未准备，（因此它将显示所有剩余的已读邮件）

归档后，再次将所有邮件从新文件夹（未读）移动到收件箱文件夹 Kamlash

# core-audio - sub-millisecond latency in Core Audio

> ID：11267591
> 
> 赞同：4
> 
> 时间：2012-06-29T19:07:19.550
> 
> 标签：core-audio, latency, audiounit, audioqueue, low-latency

Is it possible to play sounds with sub-millisecond latency using Core Audio?

I've tried using AudioQueues with different sizes and numbers of buffers, and I've tried using AudioUnits, but I have been unable to get below 30 ms of latency.

I am using an oscilloscope to measure the time between when a pushbutton on an Arduino is pressed and when sound leaves the audio jack. The Arduino communication never contributes more than 1 ms of delay.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T02:45:54.297

不可以。对于亚毫秒级延迟，不包括 DAC 延迟，音频驱动程序需要以 44.1k 的采样率提取 32 个样本或更少的缓冲区大小，这在当前硬件上似乎不允许输出音频单元。音频队列在音频单元之上运行，因此具有更高的延迟。

# google-app-engine - 我应该从哪里开始使用 Google Apps API？

> ID：11267592
> 
> 赞同：0
> 
> 时间：2012-06-29T19:07:21.767
> 
> 标签：google-app-engine, google-apps

我有一个主题，我需要学习 Google Apps API，并将它们应用于 Web 应用程序。但是我以前从未了解过 API，很难说我应该从哪里开始。

我需要先使用 Google Apps 吗？Google Apps 和 Google App Engine 之间有什么关系？在我的 Web 应用程序上使用 Google Apps API 的更好方法是什么？最后是我应该使用哪种语言，java 还是 Php？虽然我不知道python。

任何人都可以请教我这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:51:16.993

Google App Engine 是一种 PaaS（平台即服务），人们可以在其中部署他们的应用程序并使用云基础架构进行扩展。目前唯一支持的语言是 Java、Python 和 Go。PHP 不受官方支持，但可以与一些 hack 一起使用。

Google Apps 类似于由人们/社区开发并可供购买的标准应用程序。这些应用程序非常类似于智能手机上的应用程序，您可以购买所需的内容。Google Apps API 允许人们编写此类应用程序并在 Google Apps Marketplace 上销售它们。

我建议从 GAE 的小教程开始，然后更好地了解 Google Apps 和 API。但为了简单起见，您可以简单地忽略 GAE 并了解 API 和 Google Apps。

有关 GAE 的一些教程可[在此处获得](http://cloudspring.com/author/vbiyani/)

[您可以从此处](https://developers.google.com/google-apps/app-apis)开始使用 Google Apps API

您可以使用您的 Google ID 开始免费试用 Google 应用，并在[此处将一些应用添加到您的假设公司](http://www.google.com/enterprise/apps/business/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:14:50.430

这是一个很好的起点：[Web 应用程序工程](http://www.udacity.com/overview/Course/cs253/CourseRev/apr2012)

# django - Use ORDER BY FIELD(name, 'Apple', 'Banana') in django

> ID：11267595
> 
> 赞同：2
> 
> 时间：2012-06-29T19:07:33.967
> 
> 标签：django

I would like to use ORDER BY FIELD() (MySQL) in Django. Does Django support that?

So in MySQL it looks like:

```
SELECT * FROM fruit 
ORDER BY FIELD(name, 'Banana', 'Apple', 'Pear', 'Orange'), variety; 
```

I would like use this in django ORM. How can i do that. Can i do that using `order_by()`. Or using `extra()` somehow.

Does not work like this:

`Fruit.objects.all().extra(order_by="FIELD(name, 'Banana', 'Apple', 'Pear', 'Orange')")`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T19:19:31.700

一点 Google-FU 发现了这个：[http ://davedash.com/2010/02/11/retrieving-elements-in-a-specific-order-in-django-and-mysql/](http://davedash.com/2010/02/11/retrieving-elements-in-a-specific-order-in-django-and-mysql/)

```
Fruit.objects.extra(
    select={'manual': "FIELD(name, 'Banana', 'Apple', 'Pear', 'Orange')"},
    order_by=['manual']
) 
```

# python - Call Python from R, to use Arcmap requires Python 26

> ID：11267596
> 
> 赞同：0
> 
> 时间：2012-06-29T19:07:38.570
> 
> 标签：python, r, system, arcmap

I am trying to run a python script from R. Which is easy enough to do.

```
system('python Checkpythonverion.py') 
```

file: Checkpythonverion.py

```
import sys
print (sys.version) 
```

returns:

```
2.7.2 |EPD 7.1-2 (64-bit)| (default, Jul  3 2011, 15:34:33) [MSC v.1500 64 bit (AMD64)] 
```

However when I run a code calling the arcpy module (from arcgis)

File: Pythoncode.py

```
import arcpy
arcpy.env.workspace = r"C:\Student\PythonDesktop10_0\Data\Westerville.gdb"
fc = "Streets"
distanceList = ["100 meters", "200 meters", "400 meters"]
for dist in distanceList:
    outName = fc+"_"+ dist[1]
    arcpy.Buffer_analysis(fc,outName,dist)
    print " Finished Buffer" 
```

Returns

> system('python PythonScript.py') Traceback (most recent call last): File "PythonScript.py", line 1, in import arcpy ImportError: No module named arcpy Warning message: running command 'python PythonScript.py' had status 1

I know the reason. Arcmap's arcpy only runs in python26\. The issue then is how can I change the default version of python called by the system. I have tried a number of things including: changing HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment

**from:** C:\Python27\python.exe" "%1" %*

**to:** C:\Python26\ArcGIS10.0\python.exe" "%1" %*

While also changing the user environmental variable "Path"

**from:** C:\Python27\;C:\Python27\Scripts

**to:** C:\Python26\ArcGIS10.0\;C:\Python27\Scripts

After which from R:

```
>system('python Checkpythonverion.py') 
```

still returns:

```
2.7.2 |EPD 7.1-2 (64-bit)| (default, Jul  3 2011, 15:34:33) [MSC v.1500 64 bit (AMD64)] 
```

Thoughts? It would be great if I could call the version of python I wanted from the R command line. For instance system('python26 file.py'). Running: Windows 7, R 2.15.1 Installed: Python 25,26,27

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:28:19.783

好吧，只是想通了...很简单

```
system('C:\\Python26\\ArcGIS10.0\\python.exe Checkpythonverion.py') 
```

返回：

```
2.6.5 (r265:79096, Mar 19 2010, 21:48:26) [MSC v.1500 32 bit (Intel)] 
```

# excel - More Information about Application.Caller with VBA in Excel

> ID：11267597
> 
> 赞同：2
> 
> 时间：2012-06-29T19:07:41.763
> 
> 标签：excel, vba

I have been using Application.Caller in a comparison in my code. When a user clicks a commandbutton, I am assuming Application.Caller returns the name of the command button, but am unsure.

I am trying to do something like: msgbox(Application.Caller), but realized its not the right data type. How would I go figuring out what Application.Caller actually is?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T19:29:28.943

如该[链接](http://msdn.microsoft.com/en-us/library/ff193687.aspx)所示，`Application.Caller`并不总是`String`类型

您正在使用`StrComp`which 比较 2 个字符串。我会推荐使用这个。

```
Sub Sample()
    If TypeName(Application.Caller) = "String" Then
        MsgBox StrComp(Application.Caller, "Button1")
    End If
End Sub 
```

并将此宏分配给工作表上的表单按钮。

如果您看到我之前提供的链接中给出的示例，您会自动清楚:)

```
Select Case TypeName(Application.Caller)
    Case "Range"
        v = Application.Caller.Address
    Case "String"
        v = Application.Caller
    Case "Error"
        v = "Error"
    Case Else
        v = "unknown"
End Select 
```

# php - FuelPHP ORM - Property not found

> ID：11267598
> 
> 赞同：0
> 
> 时间：2012-06-29T19:07:43.303
> 
> 标签：php, orm, fuelphp

I'm trying to build models using ORM in FuelPHP, never used ORM before, so not sure of certain aspects.

I have a table Project and a table Revision. Now, projects have multiple revisions, revision has only one project.

However, I have an additional link between Project and Revision where I always keep the ID of the latest revision in my Project table.

My tables look like this:

```
projects
- id
- latest_revision_id
- ...

revisions
- id
- project_id
- ... 
```

The project model:

```
class Model_Project extends Orm\Model
{

    protected static $_belongs_to = array(
        'latest_revision' => array(
            'key_from' => 'latest_revision_id'
        ),
    );

    protected static $_has_many = array(
    'revisions',
    );

...

} 
```

The revision model:

```
class Model_Revision extends \Orm\Model
{

    protected static $_belongs_to = array(
        'project',
    );

    protected static $_has_one = array(
        'project' => array(
            'key_to' => 'latest_revision_id',
        ),
    );

} 
```

However, when I try to access:

```
$project->latest_revision 
```

It gives me an OutOfBoundException: `OutOfBoundsException [ Error ]: Property "latest_revision_id" not found for Model_Project.`

Am I missing something?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T12:36:11.350

看起来我必须将 latest_revision_id 添加到我的 $_properties 数组中。我发誓我在发布问题之前尝试过，但我想我当时还有另一个问题！

所以我现在的项目模型：

```
protected static $_belongs_to = array(
    'latest_revision' => array(
        'key_from' => 'latest_revision_id',
        'model_to' => 'Model_Revision',
    ),
);

protected static $_has_many = array(
    'revisions',
);

protected static $_properties = array(
    'id', 
    ..., 
    'latest_revision_id',
); 
```

# xml - 使用 XPath 获取页面上唯一的电子邮件地址

> ID：11267604
> 
> 赞同：-1
> 
> 时间：2012-06-29T19:08:10.597
> 
> 标签：xml, xpath

我一直在尝试使用 XPath 从网站中提取电子邮件地址。整个页面只有 1 个电子邮件地址。有没有一种使用 XPath 引用该电子邮件地址的简单方法？

就像是：`//a/contains(@href,'@')`

我尝试了类似于我在上面发布的内容但没有成功，我将不胜感激任何有关使用 Xpath 提取电子邮件地址的可靠方法的建议。假设页面上只有 1 个电子邮件地址，除了一个简单的`<a href="mailto:example@george.com">`标签之外没有任何识别信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:18:55.973

```
//a[contains(text(), "@")] 
```

这将返回包含电子邮件地址的节点（`@`至少是一个符号），而不是电子邮件地址本身。

如果您可以确定该节点*仅*包含电子邮件地址而没有其他相邻文本，则可以使用

```
//a[contains(text(), "@")]/text() 
```

如果您*不能*确定，则必须手动从文本中对其进行字符串处理。这在 XPath 1.0 中会非常痛苦，因为根据您的实现，您可能无法访问任何 REGEX 功能。

# php - php forum building, input settings bar (bold,... links.. etc), how to apply?

> ID：11267615
> 
> 赞同：0
> 
> 时间：2012-06-29T19:08:51.160
> 
> 标签：php, javascript, pear, forum, bbcode

Ok , so I am creating a forum, I have successfuly installed the BBcodeParser PEAR package, everything works perfectly.

Now when someone wants to write a new topic, he has a bar, to turn text into bold for example.

Now how can I apply the BBcode based on the user's request?. (for example , when he marks some text and clicks on the [B] button, how can I make that text bold?)

It sounds simple to me, I just add [b] before , and [/b] after that text he marked, but I realy need a hint on where to start , and do I need javascript? , should I do it with buttons or hyperlinks?

And when he clicks the B button, I dont want to refresh the whole page...

thank you very much for your help in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:18:27.523

它简单明了。当您想根据某些用户操作做某事时，您需要 javascript。为了使它更容易，您可以使用一些 javascript 库（我最喜欢的 jQuery）。如果您真的想学习，最好编写自己的代码，但是有很多插件可用于您想做的事情。在 php 和 javascript 中。使用 javascript，您可以生成用户输入内容的快速**预览**，使用 php，您可以解析短代码（如 [b]I'm bold[/b] 为等效的**I'm bold**并将其存储在数据库中以供将来使用。我' d 建议你 google 并从那里开始。研究 stackoverflow 上提供的编辑器。比其他可用的替代品轻得多，但仍然具有丰富的可用性。

# javascript - 幻灯片放映，幻灯片效果

> ID：11267621
> 
> 赞同：0
> 
> 时间：2012-06-29T19:09:19.383
> 
> 标签：javascript, html, css

我有幻灯片......

```
 <script type="text/javascript">
    <!--
    var image1=new Image()
    image1.src="slide-image-1.png"
    var image2=new Image()
    image2.src="slide-image-2.png"

    //-->
    </script>

<img name="slide" class="image1" src="slide-image-1.png" />
<script>
<!--
//variable that will increment through the images
var step=1
function slideit(){
//if browser does not support the image object, exit.
if (!document.images)
return
document.images.slide.src=eval("image"+step+".src")
if (step<2)
step++
else
step=1
//call function "slideit()" every 2.5 seconds
setTimeout("slideit()",4000)
}
slideit()
//-->
</script> 
```

我想通过从右到左水平滚动来改变幻灯片相互替换的方式（我希望这是有道理的）。请问这种类型的转换叫什么？可以通过简单的几行来完成吗？

（我知道这对于经验丰富的网页设计师来说可能是一件容易的事情，但我才刚刚开始，不确定这会是什么）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:18:22.953

您可以使用 jQuery 来执行此操作。[您可以在此处](http://www.pixelzdesign.com/blog_view.php?id=55)找到许多插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:36:29.067

你可以简单地使用 jquery 来获得这样的效果我为两个 div 的动画添加了伪代码

```
<body>
    <div id="divone" style="background-color:#808080;width:150px;height:250px;"></div>
    <div id="div1" style="background-color:#0026ff;width:150px;height:250px;display:none;"></div>
    <script>
        //jQuery("#divone").animate({ opacity: 0.10 }, 5000);
        //jQuery("#divone").fadeOut(5000);
        jQuery("#divone").fadeOut(5000, function () { jQuery("#div1").fadeIn(5000) })
    </script>
</body> 
```

# haskell - 2dm 矩阵中的邻居表示为列表列表

> ID：11267637
> 
> 赞同：0
> 
> 时间：2012-06-29T19:10:49.567
> 
> 标签：haskell

好吧，我不知道如何在haskell中做到这一点。例如，我有这样的矩阵

```
[[1,2],[3,4]] 
```

我想生成一个列表列表，其中包含该矩阵的每个元素的所有可能邻居。

预期结果是：

```
[[1,2],[1,3],[1,4],[2,1],[2,3],[2,4],[3,1],[3,2],[3,4],[4,1],[4,2],[4,3]] 
```

我知道如何创建函数，该函数将使用每个单元格的邻居线创建列表列表：

```
pos how = [ (0+dx,0+dy) | dx <- [0..(how-2)], dy <- [0..how-1] ] :: [(Int,Int)]
neighbour (x,y) how = [ (x+dx,y+dy) | dy <- [-1..1], dx <- [-1..1],
                                      x+dx >= 0, y+dy >= 0, x+dx<=how-2, y+dy <= how-1,
                                      (x,y)/=(x+dx,y+dy) ] :: [(Int,Int)]
all_n how = [ p | x <- pos how, let p = neighbour x how ] :: [[(Int,Int)]] 
```

但我无法将其更改为按我描述的那样工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T21:01:58.717

让我勾勒出一种与您建议的方法截然不同的方法。在谈论邻居时，我会说 e 的*d**邻居*是元素*e向**d*方向迈出的一步。因此，例如，在矩阵中，数字是数字的右邻居。我们需要使用一些库代码。***`[[1,2],[3,4]]``2``1`***

 ***```
import Data.List 
```

我们将从最简单的事情开始：让我们只找到一维列表的右邻居。

```
rightList (x:y:rest) = (x,y) : rightList (y:rest)
rightList _ = [] 
```

我们可以通过不确定地选择矩阵的一行并找到该行中的所有右邻居来找到矩阵中的所有右邻居。

```
right m = m >>= rightList 
```

我们可以使用任何寻找邻居的函数，并通过反转元组来创建寻找另一个方向的邻居的函数。例如，左邻居与右邻居相同，但元组元素交换了，所以：

```
swap (x,y) = (y,x)
co direction = map swap . direction
left = co right 
```

下层邻居呢？实际上，下邻居只是转置矩阵中的右邻居：

```
down = right . transpose
up   = co down 
```

下一个感兴趣的方向是右下邻。这个有点棘手；我们要做的是并行遍历两个列表，但偏移一个。

```
downRight (xs:ys:rest) = zip xs (drop 1 ys) ++ downRight (ys:rest)
downRight _            = []
upLeft = co downRight 
```

有一个最终方向，即直立邻居；如果我们将矩阵颠倒过来，这些都是右下角的邻居。

```
upRight  = downRight . reverse
downLeft = co upRight 
```

最后，要形成所有邻居，我们可以不确定地选择一个相邻方向，然后找到该方向上的所有邻居。

```
allDirections = [right, left, up, down,
                 downRight, upLeft, upRight, downLeft]
neighbors m = allDirections >>= ($m) 
```

输出的顺序并不完全符合您指定的顺序，但我想这可能并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T21:33:28.797

为了更正您现在的代码，我提供了几个问题，经过深思熟虑的答案可能会帮助您取得进步：

*   `how-2`是一件奇怪的事情。为什么`2`要减去正确的数字？
*   的类型`all_n`很奇怪。为什么它是一个函数？（它的参数代表什么？）为什么它返回一个嵌套列表，而不是一个平面列表？
*   您似乎只跟踪一个大小参数，但您的矩阵是二维矩阵。为什么会有这样的差异？（为什么你没有宽度和高度参数？）
*   一旦你有了一个坐标，你知道如何从矩阵中获取那个位置的元素吗？（提示：有一个函数`(!!) :: [a] -> Int -> [a]`。）如果你有一个坐标列表，你知道如何对列表中的每个元素执行此操作吗？（提示：有一个函数`map :: (a -> b) -> ([a] -> [b])`。）

祝你好运！***

# cookies - Piwik：从第三方 cookie 中提取 idvisitor？

> ID：11267638
> 
> 赞同：1
> 
> 时间：2012-06-29T19:10:52.217
> 
> 标签：cookies, matomo

Piwik 如何在`_pk_uid`第三方 cookie 中编码访客 ID？

我是一个尝试跨域跟踪用户的新 Piwik 用户。我在 Piwik 常见问题解答中找到了一个看起来很有希望的部分：http: [//piwik.org/faq/how-to/#faq_118](http://piwik.org/faq/how-to/#faq_118)

它说当我启用第三方 cookie 时，Piwik 将创建一个第三方 cookie，其中包含与`idvisitor`某些 MySQL 表的字段相同的访问者的唯一 ID。

问题是我似乎无法弄清楚`idvisitor`第三方 cookie 中的编码方式（我认为`_pk_uid`以前名为`piwik_visitor`）——事实上，我怀疑它是否真的包含在 cookie 中！

这是我正在查看的 cookie 的值：

```
0%3DczoxNjoiMmMwMWY5OGU0MzFkNWQxOSI7%3A_%3Df6f84dfd6626b538220696bb070d22f8ae2af6ee 
```

应该包含在其中的访客 ID 是：

```
2c01f98e431d5d19 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-28T08:57:10.553

所以这是我在自己网站上的观察。

1.  第一个点之前的数字是 user_id(_id)
2.  接下来是这个访问者第一次访问的时间的UNIX时间戳。（_idts）
3.  5 是此访问者的当前访问次数。(_idvc)
4.  我猜这是现场最后一次操作的 UNIX 时间戳。
5.  此访问者上次访问时间的 UNIX 时间戳。

这是我网站上的示例。首先是 cookie，然后是 piwik 脚本发送的参数。

```
_pk_id.19.c40d=baa767bdf0dfe66d.1379976944.5.1380357406.1380061476.;

_id:baa767bdf0dfe66d
_idts:1379976944
_idvc:5
_viewts:1380061476 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T11:19:59.373

虽然有点过时，但由于我目前正在寻找它 - 据我所知（不是 100% 肯定），您首先需要将 cookie 转换为十六进制，然后从 16 进制转换为 10 进制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-18T20:31:37.953

这就是我在 PHP 中获取 visitorId 的方式：

```
$cookieArray = explode(":", $_COOKIE['_pk_uid']);
$visitorIdArray = explode(":",base64_decode(substr($cookieArray[0],2,31)));
$visitorId = str_replace('"','',$visitorIdArray[2]); 
```

# asp.net - 如何在asp.net中弹出特定控件的加载面板

> ID：11267643
> 
> 赞同：0
> 
> 时间：2012-06-29T19:12:12.297
> 
> 标签：asp.net, ajax

我正在使用 c# 处理 asp.net 和 ajax。当用户单击按钮时，我试图弹出加载面板。Mu 表单包含 3 个文本框和一个下拉列表（autopostback=true）和一个提交按钮。我使用以下代码。

```
 <asp:UpdatePanel ID="updatepanel1" runat="server">
    <ContentTemplate>   
     <asp:TextBox runat="server" ID="txtMI" Width="80px" Height="20px" CssClass="s1">                                       </asp:TextBox>
<asp:TextBox runat="server" ID="txtMI" Width="80px" Height="20px" CssClass="s1"></asp:TextBox>
<asp:TextBox runat="server" ID="txtMI" Width="80px" Height="20px" CssClass="s1"></asp:TextBox>
        <asp:Dropdownlist ID="drpCountries" runat="server" Font-Bold="True" ForeColor="#FF3300"></asp:Dropdownlist>
        <br />
        <asp:Button ID="btnLoad" runat="server" onclick="btnLoad_Click" Text="submit" />
        </ContentTemplate>
        </asp:UpdatePanel> 
```

我的更新进度代码是：

```
 <asp:UpdateProgress id="updateProgress" runat="server">
     <ProgressTemplate>
            <div style="position: fixed; text-align: center; height: 100%; width: 100%; top: 0; right: 0; left: 0; z-index: 9999999; background-color: #000000; opacity: 0.7;">
                    <asp:Image ID="imgUpdateProgress" runat="server" ImageUrl="~/avatarloading.gif" AlternateText="Loading ..." ToolTip="Loading ..." style="padding: 10px;position:fixed;top:25%;left:35%;" /><center><span style="color:White;font-weight:bolder;font-size:x-large;"><b>Loading...</b></span></center>
            </div>
     </ProgressTemplate>

</asp:UpdateProgress> 
```

当我点击提交按钮时，我需要弹出加载面板。但是当我在下拉列表中选择一个项目时，它也会弹出加载面板。当我单击仅使用 ajax 的提交按钮时，如何弹出加载面板。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:33:13.840

两件事：您的 DDL 没有 AutoPostBack=true 并尝试修改更新进度的 AssociatedUpdatePanelID 属性。回发也有可能发生得非常快，您无法看到更新进度发生了什么。无论如何，我会检查它是否遇到了 OnSelectedIndexChanged 事件，如果是，则让线程休眠几秒钟，看看您现在是否可以看到加载弹出。这是我为自己工作的示例项目：

代码背后：

```
public partial class _Default : System.Web.UI.Page
{
    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        System.Threading.Thread.Sleep(5000);
    }
} 
```

HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" OnSelectedIndexChanged="DropDownList1_SelectedIndexChanged">
                    <asp:ListItem>Item 1</asp:ListItem>
                    <asp:ListItem>Item 2</asp:ListItem>
                </asp:DropDownList>
            </ContentTemplate>
        </asp:UpdatePanel>
        <asp:UpdateProgress ID="UpdateProgress1" runat="server" AssociatedUpdatePanelID="UpdatePanel1">
            <ProgressTemplate>
                Loading.....</ProgressTemplate>
        </asp:UpdateProgress>
    </div>
    </form>
</body>
</html> 
```

祝你好运。

# java - 检查 EasyMock 模拟是否处于重放模式/状态

> ID：11267647
> 
> 赞同：3
> 
> 时间：2012-06-29T19:12:25.477
> 
> 标签：java, mocking, easymock

是否可以确定 EasyMock 模拟是否处于重放模式？

就像是：

```
if (EasyMock.isReplayed(mock))
  // do something 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:18:41.500

为了检查`state`一个模拟，您需要**取消代理**您的模拟并检查该模拟的状态集，其中一个状态是`ReplayState`. 由于 EasyMock 与 Java 代理一起工作，这很容易：

```
EasyMock.replay(mock); // setting replay state to a mock object

// stripping proxy and getting the invocation handler
InvocationHandler invocationHandler = Proxy.getInvocationHandler(mock); 

// for easyMock, invocation handler holds the state of the mock 
ObjectMethodsFilter objectMethodsFilter = (ObjectMethodsFilter) invocationHandler; 

// not the not so elegant part:
// this: objectMethodsFilter.getDelegate().getControl().getState() 
// retrieves  the state instance that can be checked if it is an 
// instance of ReplayState.class
boolean inReplayState = objectMethodsFilter.getDelegate()
    .getControl().getState() instanceof ReplayState; 
```

就是这样！这将打印`true`，因为已设置为`Replay`

也许对于 3.1 版，您可以使用：

```
ClassExtensionHelper.getControl(mock).getState() instanceof ReplayState 
```

[`ClassExtensionHelper.getControl()`文档](http://easymock.org/api/easymock/3.1/org/easymock/internal/ClassExtensionHelper.html#getControl%28java.lang.Object%29)

# cherrypy - 使用cherrypy即时提供任意静态内容

> ID：11267649
> 
> 赞同：1
> 
> 时间：2012-06-29T19:12:43.280
> 
> 标签：cherrypy

我正在尝试使用cherrypy创建媒体服务器，但无法让cherrypy在配置中启动时未设置的任何目录中提供文件。我不想公开驱动器根目录，我希望根据需要一次公开一个目录。有没有办法做到这一点？

这是我当前代码的相关片段。

```
@cherrypy.expose
def serve_mp3(self, mp3_path):
    #cherrypy.config.update({"media":{
    #"tools.staticdir.on" : True,
    #"tools.staticdir.root" : "C:\\Documents and Settings\\sdc\\My Documents\\My Music",
    #"tools.staticdir.dir" : "",
    #"tools.staticfile.root" : "C:\\Documents and Settings\\sdc\\My Documents\\My Music"
    #}})
    static_handler = cherrypy.tools.staticdir.handler(section="/media", dir="C:\\Documents and Settings\\sdc\\My Documents\\My Music")
    cherrypy.tree.mount(static_handler, '/media')
    mp3 = mp3_path.rsplit("\\",1)[1]
    return "media/" + urllib.quote(mp3) 
```

感谢 cyraxjoe，上面的烂摊子最终被重构为

```
 @cherrypy.expose
    def serve_mp3(self, mp3_path):
      mp3_path = urllib.unquote(mp3_path)
      return(cherrypy.lib.static.serve_file(mp3_path, content_type="audio/mpeg", disposition=None, name=None)) 
```

这对于提供音频标签来说效果很好。我知道它存在，这基本上是对我的硬盘的前门访问，但这只是第一步，最终结果将由数据库驱动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T22:03:55.247

我认为您应该使用这些[函数直接提供静态文件](http://docs.cherrypy.org/stable/refman/lib/static.html)而不是处理程序，您正在使用该工具。通过直接调用函数，您可以根据需要提供任意路径或文件对象。

# .net - SQL 子查询返回多于 1 个值

> ID：11267651
> 
> 赞同：-1
> 
> 时间：2012-06-29T19:12:54.340
> 
> 标签：.net, sql, sql-server, subquery, row-number

嗨，我正在尝试执行查询以获取特定数字之间的行，就像我试图获取 10-20 之间的行一样。所以我正在使用子查询，以便我可以使用`row_number()`函数

查询失败并出现以下错误：

> SQL 子查询返回多于 1 个值

所以我需要找到出路，因为我需要从查询中获得更多的结果

```
PROCEDURE dbo.Search

    (
    @search_text varchar(max), 
    @search_category varchar(max),
    @page int,
    @COUNT INT OUTPUT
    )

AS

     SET NOCOUNT ON
     DECLARE @Lower_limit int = (@page-1)*10;
     DECLARE @Upper_limit int = (@page * 10) + 1;
    -- SET @COUNT =0
     IF @search_category='deal'
     BEGIN
        SET @COUNT = (SELECT COUNT(*) FROM dealData WHERE dealInfo LIKE  '%' + @search_text + '%' OR dealName LIKE '%' + @search_text + '%' OR dealDescription LIKE  '%' + @search_text + '%' GROUP BY dealId);
        SELECT x.dealId , x.ROW 
        FROM
        ( SELECT dealId,ROW_NUMBER() OVER(ORDER BY dealId) as ROW from dealData WHERE dealInfo LIKE  '%' + @search_text + '%' OR dealName LIKE '%' + @search_text + '%' OR dealDescription LIKE  '%' + @search_text + '%'  GROUP BY dealId)x   
        WHERE x.ROW < @Upper_limit AND x.ROW > @Lower_limit
     END 
```

这是完整的过程，当我尝试从以下代码中调用它时，我在 _command.ExecuteReader();`Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.`

```
 _query = "Search";
                _command = new SqlCommand(_query, _connection);
                _command.CommandType = CommandType.StoredProcedure;
                _command.Parameters.AddWithValue("@search_text", search_text);
                _command.Parameters.AddWithValue("@search_category", search_category);
                _command.Parameters.AddWithValue("@page", page);
                var returnParameter = _command.Parameters.Add("@COUNT", SqlDbType.Int);
                returnParameter.Direction = ParameterDirection.Output;
                _reader = _command.ExecuteReader();
                while (_reader.Read())
                {
                    search_result index = new search_result();
                    index.category_id = this._categoryIdFromName(search_category);
                    index.post_id = _reader.GetValue(0).ToString();
                    _searchList.Add(index);
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:38:59.377

问题是您的 sp 的这一部分：

```
SET @COUNT = (  SELECT COUNT(*) FROM dealData 
                WHERE dealInfo LIKE  '%' + @search_text + '%' 
                OR dealName LIKE '%' + @search_text + '%' 
                OR dealDescription LIKE  '%' + @search_text + '%' 
                GROUP BY dealId) 
```

具体来说，`GROUP BY dealId`部分。如果您`dealId`在该表上有多个，那么您将获得多行结果。显然，您不能将其分配给标量变量。要么`@Count`需要声明为表变量（这将改变你的 sp 其余部分的逻辑），要么你摆脱`GROUP BY dealId`，并验证它是否给你想要的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T20:41:04.410

我必须同意@Lamak，并且只发布一个答案，以便重复可能会带来知识。如果你用以下方式重写你的作业，你的问题就会消失：

```
SELECT @COUNT = COUNT(*) 
  FROM dbo.dealData 
  WHERE dealInfo        LIKE '%' + @search_text + '%' 
     OR dealName        LIKE '%' + @search_text + '%' 
     OR dealDescription LIKE '%' + @search_text + '%' 
  /* GROUP BY dealId */ -- there is NO REASON for this grouping if you want total count!
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T21:06:05.037

除了其他人所说的填充返回多行的变量的子查询之外，可能还有一种更有效的方法来获取您所寻求的内容（我假设是分页）。这假定这是注释`GroupId`中所述的表的主键：`DealData`

```
Declare @Results Table
    (
    DealId ... not null Primary Key
    , RowNumAsc int not null
    , TotalCount int not null
    );

With NumberedData As
        (
        Select DealId
            , Row_Number() Over ( Order By GroupId ) As RowNumAsc
            , Row_Number() Over ( Order By GroupId Desc ) As RowNumDesc
        From DealData
        Where dealInfo LIKE  '%' + @search_text + '%' 
            Or dealName LIKE '%' + @search_text + '%' 
            Or dealDescription LIKE  '%' + @search_text + '%'  
        )
Insert @Results( DealId, RowNumAsc, TotalCount )
Select DealId, RowNumAsc
    , Min( RowNumAsc + RowNumDesc - 1 ) As Count
From NumberedData
Where RowNumAsc < @UpperLimit
    And RowNumAsc >= @LowerLimit
Group By DealId 

Set @Count = ( Select TOP 1 TotalCount From @Results );
Select DealId, RowNumAsc
From @Results 
```

# c# - 将 DataRow[] 转换为 DataTable 而不会丢失其 DataSet

> ID：11267653
> 
> 赞同：3
> 
> 时间：2012-06-29T19:13:13.780
> 
> 标签：c#, datatable, dataset, datarow

我正在使用 C# 中的数据集和数据表。

我的第一个问题是如何将 DataRow[] 对象转换为 DataTable，我通过这个链接解决了这个问题：

[将数据行数组转换为数据表的简单方法](https://stackoverflow.com/questions/2122511/simple-way-to-convert-datarow-array-to-datatable)

所以，我做了以下事情：

```
// Gets the rows according to the relation
DataRow[] rows = someDataRow.GetChildRows("the_table_relation");
DataTable newDataTable = rows.CopyToDataTable<DataRow>(); 
```

我使用的所有数据都在一个 DataSet 中，所以，我的问题是我的对象`newDataTable`不再包含对我的 DataSet 的引用（即`newDataTable.DataSet`等于`null`）。

**有没有办法在不丢失对我的数据集的引用的情况下进行转换？**

希望可以有人帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-29T19:17:42.667

大概你已经*有*一个`DataTable`？如果是这样，请使用将*现有*表作为参数的[重载：`CopyToDataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.copytodatatable.aspx)

 *```
rows.CopyToDataTable<DataRow>(existingTable, LoadOption.Upsert); 
```

或者，你可以使用[`DataTableCollection.Add(DataTable)`](http://msdn.microsoft.com/en-us/library/as4zy2kc.aspx)吗？

```
dataSet.Tables.Add(table); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-23T09:17:31.150

```
 DataView DV = MyDataTable.AsDataView();
 DV.RowFilter = "Id = '" + RecordId + "'";
 DataTable newDataTable = DV.ToTable(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T20:10:23.830

我相信解决方案可能包含在 Jon Skeet 的回答中 `dataSet.Tables.Add(newDataTable)`

问题是 newDataTable 没有 DataSet 子控件，而是有一个 DataSet 父控件。也就是说，DataSet 可以包含表，而 newDataTable 的 DataSet 是“拥有 newDataTable 的 DataSet”，在您在上面创建的表的情况下，它在添加到 DataSet 之前为空。*

# c# - PInvoke C++ 函数以在 C# 中使用

> ID：11267654
> 
> 赞同：0
> 
> 时间：2012-06-29T19:13:28.787
> 
> 标签：c#, c++, pinvoke, marshalling

我有一个问题 PInvoking a native function from c++ ...我已经 PInvoked 所有其他本机函数没有问题（参数是非常简单的转换）。下面是 c++ 原型及其在 c++ 中的用法：

```
DECL_FOOAPIDLL DWORD WINAPI FOO_Command(
VOID *Par,  //pointer to the parameter(s) needed by the command 
DWORD Len,  //length of Parameter in bytes
DWORD Id    //identification number of the command 
); 
```

用法：

```
static DWORD DoSomething(WCHAR *str)
{
DWORD len = (wcslen(str)+1)*sizeof(WCHAR);
DWORD ret = FOO_Command((VOID *)str,len,FOOAPI_COMMAND_CLOSE);
return(ret);
} 
```

我的 C# PInvoke：

```
[DllImport("FOO.dll")]
    static public extern uint FOO_Command(IntPtr par, uint len, uint id);

private void DoSomething()
{

    string text = "this is a test";
    IntPtr ptr = Marshal.StringToHGlobalUni(text);

    uint hr = FOO_Command(ptr,255, FOOAPI_COMMAND_CLOSE);

    Marshal.FreeHGlobal(ptr);

} 
```

1) 这是 PInvoke 这个 API 的正确方法吗？2）我怎样才能得到我有255作为参数的ptr的大小？

以上确实有效，但我是 PInvoke 和“本地”世界的新手......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T01:29:22.967

```
private void DoSomething() 
{ 

    string text = "this is a test"; 
    IntPtr ptr = Marshal.StringToHGlobalUni(text); 

    uint hr = FOO_Command(ptr, (text.Length + 1) * 2, FOOAPI_COMMAND_CLOSE); 

    Marshal.FreeHGlobal(ptr); 

} 
```

# php - wordpress插件中一个类的多个实例

> ID：11267657
> 
> 赞同：2
> 
> 时间：2012-06-29T19:13:42.137
> 
> 标签：php, oop, wordpress

我从wordpress部分交叉发布这个，b / c我认为问题更多在于我对OOP缺乏了解，所以也许它应该首先发布在这里。

在编写 wordpress 插件时，我想创建一个类，我可以在每个插件中使用它来处理插件选项页面的平凡创建：所以添加菜单页面、白名单设置、吐出和验证选项等。我认为基本上，我想重用一些我必须写一个类的东西。

在最基本的情况下，我希望我可以在插件一和插件二（使用不同的 $args）中说 new KIA_Plugin_Options($args)，并且每个插件都会为各自的插件创建选项页面。但是，我在 2 个插件中添加了以下类，而不是为每个插件创建菜单，它只处理 1 个然后死掉。所以它的一部分工作，但不是我想要的可重复使用的灵丹妙药，所以我觉得我错过了 OOP 中的一些重要概念。

这是我的选项类的骨架：

```
<?php

class KIA_Plugin_Options {

  private $page_title;
  private $menu_title;
  private $capability;
  private $menu_slug;
  private $setting_name;
  private $option_name;

  function KIA_Plugin_Options( $args ){

    //convert $args to array 
    if(!is_array($args)) $args['page_title'] = $args; 

    if(!isset($args['page_title'])) die (__('Plugin Options needs at least the plugin\'s page title parameter.','kia_plugin_options'));

    // Define the class variables
    $this->page_title = $args['page_title']; 
    $this->menu_title = isset($args['menu_title']) ? $args['menu_title'] : $this->page_title;
    $this->capability = isset($args['capability']) ? $args['capability'] : 'manage_options';
    $this->menu_slug = isset($args['menu_slug']) ? $args['menu_slug'] : sanitize_title_with_dashes($this->menu_title);
    $this->setting_name = isset($args['setting_name']) ? $args['setting_name'] : $this->menu_slug;
    $this->option_name = isset($args['option_name']) ? $args['option_name'] : $this->menu_slug;

    // Set-up Action and Filter Hooks
    register_activation_hook(__FILE__, array(&$this,'add_defaults_options'));
    register_uninstall_hook(__FILE__, array(&$this,'delete_plugin_options'));

    //add settings page
    add_action('admin_init', array(&$this,'register_settings' ));
    add_action('admin_menu', array(&$this,'add_options_page'));

    //add settings link to plugins page
    add_filter( 'plugin_action_links', array(&$this,'add_action_links'), 10, 2 );
  }

  // ------------------------------------------------------------------------------
  // CALLBACK FUNCTION FOR: register_activation_hook(__FILE__, 'add_defaults_options')
  // ------------------------------------------------------------------------------

  // Define default option settings
  function add_defaults_options() {
    if(get_option('kia_tell_a_friend_options')) return false;

    $defaults = array( 
              "emailsubject" => __( 'I saw this and thought of you!', 'kia_tell_a_friend'),
              "emailmsg" => __( 'I just saw this!', 'kia_tell_a_friend'),
              "twittermsg" => __( 'Check this out!', 'kia_tell_a_friend')
    );
    update_option('kia_tell_a_friend_options', $defaults);
  }

  // --------------------------------------------------------------------------------------
  // CALLBACK FUNCTION FOR: register_uninstall_hook(__FILE__, 'delete_plugin_options')
  // --------------------------------------------------------------------------------------

  // Delete options table entries ONLY when plugin deactivated AND deleted
  function delete_plugin_options() {
    $options = get_option('kia_tell_a_friend_options', true);
    if(isset($options['delete'])) delete_option('kia_tell_a_friend_options');
  }

  // ------------------------------------------------------------------------------
  // CALLBACK FUNCTION FOR: add_action('admin_init', array(&$this,'register_settings' ));
  // ------------------------------------------------------------------------------

  // Init plugin options to white list our options
  function register_settings(){ 
    register_setting( $this->setting_name, $this->option_name, array(&$this,'validate_options') );
  }

  // ------------------------------------------------------------------------------
  // CALLBACK FUNCTION FOR: add_action('admin_menu', array(&$this,'add_options_page'));
  // ------------------------------------------------------------------------------

  // Add menu page
  function add_options_page() {
     $page = add_options_page( $this->page_title , $this->menu_title, $this->capability, $this->menu_slug, array(&$this,'render_form'));

    /* Using registered $page handle to hook stylesheet loading */
    add_action( 'admin_print_styles-' . $page, array(&$this,'admin_style' ));
  }

  // ------------------------------------------------------------------------------
  // CALLBACK FUNCTION FOR: add_action( 'admin_print_styles-' . $page, array(&$this,'admin_styles' ));
  // ------------------------------------------------------------------------------

  // Add menu page styles
  function admin_style() {
    wp_enqueue_style('plugin-options',plugins_url('css/options-framework.css', __FILE__));
  }

  // ------------------------------------------------------------------------------
  // CALLBACK FUNCTION SPECIFIED IN: add_options_page()
  // ------------------------------------------------------------------------------

  // Render the Plugin options form
  function render_form() {
    echo "Bacon!!!";
  }

  // Sanitize and validate input. Accepts an array, return a sanitized array.
  function validate_options($input) {

    $clean = array();

     // strip html from textboxes
    $clean['pubid'] =  wp_filter_nohtml_kses($input['pubid']); // Sanitize text input (strip html tags, and escape characters)
    $clean['delete'] =  isset( $input['delete'] ) ? 'true' : 'false' ;  //checkbox

    $clean['emailsubject'] =  wp_filter_nohtml_kses($input['emailsubject']); // Sanitize text input (strip html tags, and escape characters)
    $clean['emailmsg'] =  wp_filter_post_kses($input['emailmsg']); // Sanitize textbox input (allow tags that area allowed in posts)

    $clean['twittermsg'] =  wp_filter_nohtml_kses($input['twittermsg']); // Sanitize text input (strip html tags, and escape characters)

    return $clean;
  }

  // Display a Settings link on the main Plugins page
  function add_action_links( $links, $file ) {

    if ( $file == plugin_basename( __FILE__ ) ) {
      $posk_links = '<a href="'.admin_url('options-general.php?page=tell-a-friend').'">'.__('Settings', 'kia_tell_a_friend').'</a>';
      // make the 'Settings' link appear first
      array_unshift( $links, $posk_links );
    }

    return $links;
  }

} 
```

然后在我的第一个插件中调用（在 init 钩子上）

```
$args = array ( 'page_title' => 'apple options page',
                        'menu_title' => 'apple options', 
                        'capability' => 'manage_options',
                        'menu_slug' => 'apple_options',
                        'setting_name' => 'apple_settings',
                        'option_name' => 'apple_db_options' );

    $this->options = new KIA_Plugin_Options( $args ); 
```

在第二个插件上

```
$args = array ( 'page_title' => 'bacon options page',
                    'menu_title' => 'bacon options', 
                    'capability' => 'manage_options',
                    'menu_slug' => 'bacon_options',
                    'setting_name' => 'bacon_settings',
                    'option_name' => 'bacon_db_options' );

$this->options = new KIA_Plugin_Options( $args ); 
```

这两个插件都包含在各自的类中。如果有帮助的话，我可以发布其中一个假人，但它会变成很多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T00:48:25.743

根据自己的经验，我可以说可以与 PHP 共享基类本身，但是请记住，Wordpress 本身不是面向对象的。

所以当你注册 hooks、pages、callbacks 之类的时候，要注意你和 wordpress 本身可以很容易的区分开来。

例如，在插件的基类中，您可以使用它`__FILE__`来注册钩子。该值在所有情况下都是相同的，因此没有用。此外，对于某些钩子，您还需要一些其他值。所以也许首先从更轻量级的东西开始，例如没有激活/卸载例程并让它工作。管理员中只有两个页面，他们的菜单条目等。一步一步。

然后看看 Breadcrumb NavXT 插件。它做了类似的事情，它有一个 AdminKi​​t 基类，具体选项页面从其扩展。我个人不会说它是完美的，但这对你来说可能会很有趣：

*   [http://plugins.trac.wordpress.org/browser/breadcrumb-navxt/trunk](http://plugins.trac.wordpress.org/browser/breadcrumb-navxt/trunk)

此外，我建议您不仅将所有内容都放入基类中，而且还应根据需要更多地创建对象，以使事物更加分开和灵活：

*   [WordPress 插件：如何避免“紧耦合”？](https://stackoverflow.com/questions/8688738/wordpress-plugin-how-do-i-avoid-tight-coupling)
*   [多个自定义 Metabox 帮助](https://wordpress.stackexchange.com/q/4089/178)

希望这有助于让事情恢复正常。

# text - 在 numpy savetxt 函数中，'newline' 参数有什么作用？

> ID：11267661
> 
> 赞同：1
> 
> 时间：2012-06-29T19:13:58.727
> 
> 标签：text, numpy, save

我正在使用 savetxt 函数（[此处](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)描述）将矩阵保存到 txt 文件，我想知道“换行符”参数有什么作用？此外，“header”参数似乎不适用于最新的 numpy 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:18:16.723

它用于设置行尾的表示方式，以实现 Mac/Linux/Windows 之间的互操作性。

Windows 通常用回车符后跟换行符 (\r\n) 来表示行结束。

Mac 过去只使用回车，许多 Microsoft Mac 软件仍然以这种方式保存文件，但在过去十年左右的时间里一直使用换行符 (\n)。

据我所知，Linux 一直使用换行符 (\n)。

# php - 循环遍历php中的复选框

> ID：11267663
> 
> 赞同：0
> 
> 时间：2012-06-29T19:14:07.223
> 
> 标签：php, forms, checkbox, foreach, while-loop

我有一个动态页面，它从 Mysql 中获取一定数量的房间结果，并将它们以复选框的形式显示出来。由于我在每个结果中没有确定的数字，我不确定要检查多少个复选框。无论如何，这是表单中的示例代码：

```
$rr = 1;
while($ro = mysql_fetch_array($getRooms)){
    $roomName = $ro['HotelRoom'];
    ?>
    <input type="checkbox" name="room<?php echo $rr ?>" value="<?php echo $roomName ?>" /><?php echo $roomName ?>
    <?php
    $rr++;
    } 
```

现在，当我提交表单时，我尝试使用一个函数来获取结果，但我什么也没得到。这是我接收数据的功能：

```
//Get all rooms
    $nn = 1;
    $retn = '';
    function roomGroup(){
    foreach ($_POST['room'.$nn] as $key => $value) {
        $retn .= $value.",";
        }
    $nn++;
    return $retn;
    }
$rooms = roomGroup(); 
```

我从 $rooms 变量中一无所获。我也试过这个作为一个功能：

```
 $nn = 1;
    $retn = '';
    function roomGroup(){
    while(isset($_POST['room'.$nn]))
    {
    $roomsn = $_POST['room'.$nn];
    $retn .= $roomsn.",";
    $nn++;
    }
    return $retn;
    } 
```

对于我做错的任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:23:03.147

您可以循环 $_POST 数组：

```
$rooms = "";
$first = true;

foreach($_POST as $key => $value) {
    if(strlen($key) >= 4 && substr($key,0,4) == "room") {
        if($first) {
            $rooms .= $value;
            $first = false;
        }
        else 
            $rooms .= ",".$value;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:18:49.750

你正在以艰难的方式做到这一点。=)

您可以使用 HTML 通过在输入元素名称的末尾添加括号来为您创建一个数组。

```
while($ro = mysql_fetch_array($getRooms)){    
    $roomName = $ro['HotelRoom'];     
    echo '<input type="checkbox" name="room[]" value="'.$roomName.'" />'.$roomName.'<br />';    
} 
```

现在，在您的逻辑方面，您可以访问数组。房间复选框将作为 POST 变量中的数组传递。您需要检查以确保您至少通过了一些房间。如果您通过房间，请执行以下操作：

```
implode( ", ", $_POST['rooms'] ); 
```

此外，如果对您来说更方便，您还可以将 name="room[]" 设置为 name="room['.$ro['HotelRoom'].']" 如果您的所有 HotelRoom 都是唯一的。然后您可以将值设置为酒店房间的 id。然后，您可以像在做的那样做一个 foreach 循环，而不是在逻辑方面进行内爆，以保持键值对。

foreach($_POST['room'] as $hotelRoom => $roomId){

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:21:22.403

您似乎遇到了[变量范围](http://php.net/manual/en/language.variables.scope.php)的问题。$retn 在函数内部和外部都定义了，但是如果要从函数内部访问外部函数，则必须使用`$GLOBALS`数组：

```
$GLOBALS['retn'] .= $roomsn.","; 
```

代替：

```
$retn .= $roomsn.","; 
```

或者，实际上更好。仅使用局部变量（在这种情况下，全局变量不是很好的做法）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T19:23:33.727

如果您打算以（草率，艰难）的方式进行操作：

```
function roomGroup() {
  $retn = '';
  foreach($_POST as $key => $value) {
    if (strstr($key,"room") !== false) {
      $retn .= $value.",";
    }
  }
  return $retn;
} 
```

# css - 如果您有两个类 CSS 选择器，它们是否具有后代关系，并且这种层次关系是否需要在 HTML 中进行镜像？

> ID：11267665
> 
> 赞同：0
> 
> 时间：2012-06-29T19:14:15.710
> 
> 标签：css, twitter-bootstrap, css-selectors

在我的 CSS 中，我使用了 2 个类选择器（带有 30 列的 Twitter 引导程序）：

```
.row-fluid .span9 {
width: 29.5597485%;
*width: 29.50766516666667%;
} 
```

如何确保应用此规则？我尝试的两种 HTML 设置似乎都不起作用。是这些正确的语法之一，还是有另一种方法来确保将上面的 CSS 规则应用于 HTML？

HTML 理念 1：

```
<div class="row-fluid span9"> 
```

HTML 理念 2：

```
<div class="row-fluid">
    <div class="span9"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:17:34.197

您提到的规则仅适用于想法#2（想法#1 需要`.row-fluid.span9`——类之间没有空格）。

关于调试：这是一个屏幕截图，显示了准确查看每个元素应用了哪些 CSS 规则（以及应用了哪些规则但被其他规则覆盖）是多么容易。最右侧的侧边栏不仅显示此信息，还允许您禁用/启用单个规则。CSS 文件/行号也是可点击的。

我有没有提到，在开发方面，Chrome 会把其他所有东西都从水中吹走？:)

![Chrome 开发者工具示例](../Images/a24a9afbefb26116b3a6603075c9ecab.png)

[链接到全尺寸图像](https://i.stack.imgur.com/PGRlQ.png)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:18:24.273

您的第一个标记将不会基于您的 CSS 应用。

`.row-fluid .span9`表示一个元素的类`.span9`作为其后代，`.row-fluid`因此它不会匹配 HTML 1。它将匹配 HTML 2。

*   第一个 HTML 示例由`.row-fluid.span9`.
*   第二个 HTML 示例是 match by `.row-fluid .span9`，或者`'.row-fluid > .span9`如果您想确保只有`.row-fluid`.

您也可能正确匹配 CSS 选择器，但是您的样式被引导程序默认样式的更高特异性所推翻。`!important`在这种情况下，在你的样式末尾抛出一个来测试。它将推翻。

我建议使用 FireBug 或其他 HTML 检查器，它可以帮助您以比反复试验更快的方式调试 CSS 问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:20:41.047

如果您的规则在加载 bootstrap.css**之前**`<style>`出现在文档中的 CSS 文件或标签中，那么您的规则将被 bootstrap 覆盖。

 **您可以做两件事来使您的规则优先。您可以通过扩展规则本身来赋予它更高的“价值”：

```
div.row-fluid div.span9 {
  width: 29.5597485%;
  *width: 29.50766516666667%;
} 
```

或者，您可以使用`!important`修饰符：

```
.row-fluid .span9 {
  width: 29.5597485% !important;
  *width: 29.50766516666667% !important;
} 
```

最后，这些规则将仅适用于您的第二个 HTML 片段。要将规则应用于具有两个类的单个元素，您需要执行以下操作：

```
.row-fluid.span9 {  // notice the lack of spaces
  ....
} 
```

虽然，不确定为什么要覆盖引导程序的宽度设置。**

# jquery - 手风琴效果不适用于 jquery 1.7.2

> ID：11267673
> 
> 赞同：0
> 
> 时间：2012-06-29T19:15:07.487
> 
> 标签：jquery, accordion, effects

当我将手风琴对象与较旧的 jquery 一起使用时，它起作用了。现在当我用 Jquery 1.7.2 替换它时，它不再工作了。我使用 script.aculo.us 的 effects.js 来实现手风琴。它与 Jquery 1.7.2 不兼容吗？

我尝试升级到最新的 script.aculo.us (1.9.0)，即使它没有工作。如果您有解决方案，请帮助我？

问候，哈沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:20:55.010

我的理解是你不能同时使用两个 JQuery 库，这是以前失败的原因。意思是，你不能用它加载 jquery-1.7.2.js 和prototype.js，你必须选择一个，否则它们都会失败。因此，请删除对该页面上除prototype.js 和script.acul.ous 之外的任何其他JQuery 库的调用。

# clojure - 用于操作 clojure 映射的“jQuery”类型函数

> ID：11267676
> 
> 赞同：4
> 
> 时间：2012-06-29T19:15:38.287
> 
> 标签：clojure, clojurescript, noir

有没有 jQuery 类型的函数来解决遍历嵌套地图的问题？

例如，如果我的配置如下所示：

```
 (def fig
    {:config
      {:example
        {:a "a"
         :b "b"
         :c "c"}
       :more
        {:a "a"
         :b "b"
         :c "c"}}}) 
```

我还没有想出用 assoc 和 dissoc 操作嵌套持久数据结构的好方法。但是，如果有一种`jquery`风格的方式来操作地图，那么我可以编写如下代码：

```
 (->  fig
    ($ [:config :example :a] #(str % "a"))
    ($ [:config :b] #(str % "b")))

  Giving this output:

  {:config
    {:example
      {:a "aa"
       :b "bb"
       :c "c"}
     :more
      {:a "a"
       :b "bb"
       :c "c"}}} 
```

对于选择器来说是这样的：

```
($ fig [:config :example :a])
  ;=> "a"

($ fig [:config :b])
  ;=> {[:config :example :b] "b", 
  ;    [:config :more :b] "b"} 
```

所以本质上，我正在寻找一种`jayq`用于操作 clojure 对象而不是 html doms 的实现。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T19:23:43.417

`update-in`是更新嵌套地图的绝佳功能。

```
user> (def data {:config
{:example  {:a "a" :b "b" :c "c"}}
 :more {:a "a" :b "b" :c "c"}})

user> (pprint (update-in data [:config :example] assoc :d 4))

{:config {:example {:a "a", :c "c", :b "b", :d 4}},
 :more {:a "a", :c "c", :b "b"}} 
```

`assoc-in`可能更接近你想要的

```
user> (pprint (assoc-in data [:config :example :d] 4))
{:config {:example {:a "a", :c "c", :b "b", :d 4}},
 :more {:a "a", :c "c", :b "b"}} 
```

为了在不更改值的情况下读取值，您可以使用关键字在地图中查找自己的事实来编写比 jquery 表单更紧凑的表单

```
user> (-> data :config :example :a)
"a" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T20:47:12.570

首先，您应该查看 Enlive。

否则：如果你想做 jQuery 所做的事情（当然非常简化）——而不是仅仅调用 update-in：

**选择：**

```
(defn clj-query-select [obj path]
  (if (empty? path)
    (list obj)
    (when (map? obj)
      (apply concat
        (remove nil? 
          (for [[key value] obj]
            (clj-query-select
              value 
              (if (= key (first path)) (rest path) path)))))))) 
```

来电：

```
(clj-query-select {:a {:b 1} :b 2} [:b]) 
```

它应该产生：

```
(1 2) 
```

**更新/替换：**

```
(defn clj-query-update [obj path fn]
  (if (empty? path)
    (fn obj)
    (if (map? obj)
      (into obj
        (remove nil?
          (for [[key value] obj]
            (let [res (clj-query-update 
                        value 
                        (if (= key (first path)) (rest path) path)
                        fn)]
          (when (not= res value) [key res])))))
      obj))) 
```

来电：

```
(clj-query-update {:c {:a {:b 1} :b 2}} [:c :b] #(* % 2)) 
```

它应该产生：

```
{:c {:a {:b 2} :b 4}} 
```

*虽然我没有彻底测试它。*

# php - 将 Sprockets 用作 PHP 应用程序的独立服务

> ID：11267677
> 
> 赞同：7
> 
> 时间：2012-06-29T19:15:56.007
> 
> 标签：php, ruby, zend-framework, sprockets

我想在我的 Zend Framework PHP 项目中复制 Rails 资产管道功能。我认为可以将 Sprockets gem 用作独立服务，但我不确定如何正确配置它。我对将 Sprockets 移植到 PHP 不感兴趣，也不使用 Sprockets 的 PHP 端口。Sprockets ruby​​gem 已经拥有我需要的一切。我只需要弄清楚如何在非红宝石环境中进行设置。

**更新：**我已经弄清楚如何将 Sprockets 作为 Rack 应用程序运行。现在我对开发和生产环境之间的差异感兴趣。Rails 视图助手如何在开发中生成所有`<link>`和`<script>`标记并在生产中为单个文件指纹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T16:30:15.583

您可能只需要深入研究[Sprockets](https://github.com/sstephenson/sprockets)和[Sprockets 与 Rails 集成](https://github.com/rails/rails/tree/3-2-stable/actionpack/lib/sprockets)的源代码，以便真正为您的问题找到一个好的解决方案，但我希望其中的一些建议会有所帮助。

首先，检查`Sprockets::Helpers::RailsHelper#javascript_include_tag`：

```
1  def javascript_include_tag(*sources)
2    options = sources.extract_options!
3    debug = options.key?(:debug) ? options.delete(:debug) : debug_assets?
4    body  = options.key?(:body)  ? options.delete(:body)  : false
5    digest  = options.key?(:digest)  ? options.delete(:digest)  : digest_assets?
6
7    sources.collect do |source|
8      if debug && asset = asset_paths.asset_for(source, 'js')
9        asset.to_a.map { |dep|
10         super(dep.pathname.to_s, { :src => path_to_asset(dep, :ext => 'js', :body => true, :digest => digest) }.merge!(options))
11       }
12     else
13       super(source.to_s, { :src => path_to_asset(source, :ext => 'js', :body => body, :digest => digest) }.merge!(options))
14     end
15   end.join("\n").html_safe
16 end 
```

在高层次上，此方法执行以下操作：

1.  确定是将所有内容连接到一个文件中还是单独包含所有资产（第 3 行）。
2.  确定我们是否应该在资产文件名中包含摘要字符串（第 5 行）。
3.  对于每个给定的源文件，检索`Sprockets::Asset`与该源文件对应的对象（第 8 行）。
4.  如果我们正在调试，请使用此方法`Asset`所需的每个方法调用超类方法。`Sprockets::Asset#to_a`返回这样一个数组（第 9-10 行）。
5.  如果我们没有调试（或者如果我们`Asset`由于某种原因未能检索到对象），请使用顶级`Asset`（或作为字符串的源文件名）调用超类方法（第 13 行）。

其中许多方法非常简单，仅取决于您设置的环境。例如`digest_assets?`：

```
def digest_assets?
  Rails.application.config.assets.digest
end 
```

其中一些配置保存在 中`Rails.application.assets`，它本身就是一个`Sprockets::Environment`对象。您实际上可以在 Rails 控制台上使用它来熟悉它（如果您还不熟悉，我强烈推荐[awesome_print gem ）：](https://github.com/michaeldv/awesome_print)

```
1.9.3p194 :001 > Rails.application.assets.class
Sprockets::Environment < Sprockets::Base
1.9.3p194 :002 > Rails.application.assets['application.js'].class
Sprockets::BundledAsset < Sprockets::Asset
1.9.3p194 :003 > Rails.application.assets['application.js'].to_a.map(&:digest)
[
    [ 0] "6bb424b2409c6a5fb28acd15cc184b16",
    [ 1] "0ff3e5680ead3dadeee021c144835311",
    [ 2] "4c908739f93e83bda6b5e84f7ab10a29",
    [ 3] "319003f54b9408b4e41b0199e1848423",
    [ 4] "3f52cd966b6bb99a8f7994f5dcd7767f",
    [ 5] "c50a6aac16f6a69deeb722fe51e36c54",
    # ...
] 
```

所以本质上，Sprockets 负责确定资产的依赖关系、连接和消化，而 Rails 只是将它与它的助手联系在一起。看起来您应该能够以相当直接的方式在您的框架中复制此行为。

# ruby-on-rails - Rails 中单个资源的 URL 别名

> ID：11267685
> 
> 赞同：0
> 
> 时间：2012-06-29T19:16:45.353
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我有一个模型 Page，它代表了一篇关于我的组织的某些方面的 HTML“文章”。

现在，我想为其中一些页面提供自己的顶级 URL，例如“/products”和“/contact-us”。但是，我更愿意以动态（数据库驱动）方式执行此操作，即不必`match`为每个添加子句。原因是我需要链接到主菜单中的一些页面，但显然不知道他们会在每次部署中获得哪个 id 号。

这样做的最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:43:58.010

在 routes.rb 末尾添加

```
get "/:page" => "main#page" 
```

在页面操作中使用 params[:page] 在 db 中查找页面并使用

```
render :inline => @model.haml, :type => 'haml', :layout => true 
```

如果你使用haml ofc

# asp.net - SubmitChanges() 上的 LINQ to Entity 超时

> ID：11267686
> 
> 赞同：2
> 
> 时间：2012-06-29T19:16:47.300
> 
> 标签：asp.net, sql-server, database, concurrency, linq-to-entities

在数据上下文上调用 SubmitChanges() 时，我遇到了以下异常的持续问题：

“超时时间已过。在操作完成之前超时时间已过或服务器没有响应。语句已终止。”

这发生在 5-100 个并发用户正在使用的 ASP.NET Web 应用程序上。请注意，增加站点/数据库的超时时间并没有帮助，并且正在运行的查询非常简单和快速。我已经完全取消了超时期限，这会导致网站在发生错误时无限期挂起。

这个问题的其他方面：

*   它是间歇性的，无法可靠地再现
*   它只发生在几种不同的方法中，从来没有其他方法
*   增加或删除超时时间无济于事
*   重新启动服务器并重新启动 MSSQL 数据库没有帮助

这似乎是一个并发/死锁问题，但我不知道如何调试或修复它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T16:14:18.893

当应用程序执行数据库操作并等待 SubmitChanges 的响应时，请尝试在 Sqlserver 中运行以下查询

```
**sp_who2** 
```

查看返回输出中的 Blkby 列。如果您发现一行具有某些值（这是阻止您的连接的命令的 SPID）。

检查该列中的 ProgramName 以查找更多信息。

如果您发现如所述的阻塞的 SPID，则运行以下命令以查找在该 SPID 上执行的最后一个查询。说 Blkby 的价值是 59

```
**dbcc inputbuffer(59)** 
```

这将使查询阻塞您的应用程序查询。

这是解决问题的一种方法。

**有时由于存储过程中的默认值参数导致参数嗅探而发生超时。**

在这种情况下，您可以尝试使用该行作为所用程序的第一行

**设置阿里萨博特**

更改过程并再次尝试数据库操作。

如果有效，您可以在之后删除此行，然后再次更改程序。

如果它适合你，试试这个。

我在这里发现了一个类似的问题

还可以在此处阅读有关 Web 应用程序和 SSMS 中的查询运行缓慢的更多信息

[从 Web 调用存储过程时速度慢，从 Management Studio 调用时速度快](https://stackoverflow.com/questions/6585417/stored-procedure-is-very-slow-only-when-called-from-web-but-fast-if-executed-di)

希望能帮助到你。

# android - PCM Raw Bytes [] 到 Android 上的音频

> ID：11267687
> 
> 赞同：20
> 
> 时间：2012-06-29T19:16:52.733
> 
> 标签：android, audio, bytearray, pcm, audiotrack

我目前有一个字节数组形式的 PCM 音频。格式是有符号的 16 位小端。我想将其转换为 Android 上的一些可播放格式，最好是 3.2 或更高版本。有人对如何做到这一点有建议吗？我做了一些研究并尝试了以下方法，但没有一个成功。如果有人能提出更好的方法或指出我哪里出错了，将不胜感激。

我尝试使用正确的音频设置创建 AudioFormat，但是 Android 不支持 javax.sound.sampled 库。

我也尝试将 PCM 数据写入波形文件，但在获取所有必要的 wav 标头信息时遇到了麻烦。

我还尝试使用 Android 提供的 AudioTrack 类来播放 PCM 数据。然而，我似乎听不到任何声音。这是我的方法：

```
 public void playback(){
         try{
              AudioTrack audioTrack = new  AudioTrack(AudioManager.STREAM_VOICE_CALL, 8000, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, 500000, AudioTrack.MODE_STATIC);
              audioTrack.write(audio, 0, 500000);

      } catch(Throwable t){
        Log.d("Audio","Playback Failed");
    }
} 
```

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-29T19:19:59.860

[http://developer.android.com/reference/android/media/AudioTrack.html](http://developer.android.com/reference/android/media/AudioTrack.html)

这个类看起来正是你所需要的！

```
write(byte[] audioData, int offsetInBytes, int sizeInBytes) 
```

将音频数据写入音频硬件进行播放。

**编辑**

将您的信息流更改为`AudioManager.STREAM_MUSIC`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-29T19:32:44.270

问题是您是否想直接在 Android 应用程序中播放从某个来源收到的 PCM 样本，或者如果您有一些需要转换的外部文件。在第一种情况下，按照 jack57 所描述的方式进行。这真的很容易，您甚至可以添加标记来精确计时。

```
int bufferSize = AudioTrack.getMinBufferSize(sampleRate, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT);

AudioTrack mAudioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, sampleRate, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize, AudioTrack.MODE_STREAM);

mAudioTrack.play(); 
```

然后循环调用write方法：

```
mAudioTrack.write(buffer, 0, buffer.length); 
```

在第二种情况下，只需使用一些免费的音频编辑器：[http](http://audacity.sourceforge.net/download/) ://audacity.sourceforge.net/download/ 。您可以将 PCM 样本存储为 .txt 文件，在编辑器中打开它并以您需要的格式保存...

# ios - 当我更改 UITableView 背景时，单元格消失

> ID：11267689
> 
> 赞同：0
> 
> 时间：2012-06-29T19:16:54.823
> 
> 标签：ios, uitableview, background

```
tableView.backgroundColor = UIColor.clearColor
tableView.separatorStyle = UITableViewCellSeparatorStyleNone

background = UIImageView.alloc.initWithImage( UIImage.imageNamed "soft.png" )
tableView.addSubview( background )
tableView.sendSubviewToBack( background ) 
```

这就是我用来更改表格视图的背景（分组样式）的方法。当我这样做时，部分标题仍然存在，但表格视图单元格都消失了......到底发生了什么？我怎样才能解决这个问题？

此外，当我滚动时，我可以看到黑色在屏幕内外弹跳，这很难看。这不是我的主要问题，但我觉得第一个问题的解决方案也可以解决这个问题......

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:19:21.963

代替

```
tableView.addSubview( background );
tableView.sendSubviewToBack( background ); 
```

采用

```
[tableView setBackgroundView:background]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:29:37.523

您无需添加子视图即可获取背景图像。UITableView 已经有一个你可以设置的 backgroundView 属性。

```
UIImageView *background = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"whatever.png"]];
self.tableView.backGroundView = background; 
```

# iphone - 使用 CPU 在 iOS 上最快的 YUV420P 到 RGBA 转换

> ID：11267693
> 
> 赞同：8
> 
> 时间：2012-06-29T19:17:26.973
> 
> 标签：iphone, ios, opencv, core-image, accelerate-framework

*任何人都可以推荐一个非常快速的 API，最好是 NEON 优化，以便在运行时使用 CPU*在 iPhone 上进行 YUV 到 RGB 转换？可悲的是，加速框架的 vImage 没有提供任何合适的东西，并且使用 vDSP，转换为浮点数和返回似乎不是最理想的，几乎与自己编写 NEON 一样多。

我知道如何通过着色器为此使用 GPU，事实上，我已经这样做了，以显示我的主视频平面。不幸的是，我还需要在运行时创建和保存显示子区域的 RGBA 纹理。这个问题的大部分好答案都涉及着色器，但我不想使用 GPU 来完成额外的工作，因为：

(1) 虽然我可以使用 RenderTextures 和我的 YUV 着色器来转换和缓存区域，但我不想给应用程序添加更多的同步/复杂性。（我已经将纹理从 CVTextureCache 传递到 Unity3D ......在很多情况下，我已经在 Unity3D 后面从 OpenGL 切换状态并且不想再进行调试......）

(2) 更实际的是，我正在编写一个游戏，并且没有任何可用的 GPU（因为游戏通常没有 - 在过去几年中，我已经提供了更多关于如何从 GPU 中获取东西的演示，而不是如何把东西放在上面……）

(3) 在 iPad 上，我有一个备用核心坐在那里无所事事。

虽然有许多库可以将 YUV 转换为 RGBA，但我希望节省编写自己的 NEON 版本的时间。现在我正在使用 OpenCV 的实现，如下所示：

```
cv::cvtColor(avFoundationYUVCaptureMat, BGRAInputImage, CV_YUV420sp2BGRA, 4); 
```

这是正确的，但结束的日子很慢。

如果有人以前看过其他实现（CoreImage？FFMpeg？）并且可以推荐一个，我将非常感激。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T00:09:13.783

如果您有`Y`, `U`,`V`在不同的平面上并且没有色度下采样，那么您应该可以使用它`vImageMatrixMultiply_Planar8`来进行转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T05:26:24.377

我所做的只是谷歌`yuv rgb neon`，这就是我发现的 - [https://code.ros.org/trac/opencv/browser/trunk/opencv/android/android-jni/jni/yuv2rgb_neon.c?rev=4083](https://code.ros.org/trac/opencv/browser/trunk/opencv/android/android-jni/jni/yuv2rgb_neon.c?rev=4083)

正如评论所述，它仍然很粗糙，您可能必须对其进行调整以转换为 RGBA，但这很容易。

据我所知，NEON 博客上应该还有其他此类功能 - 查看 hilbert-space、webshaker、arm 软件启用博客等

# css - Ruby on rails - 在表单的同一行中添加多个单选按钮

> ID：11267694
> 
> 赞同：1
> 
> 时间：2012-06-29T19:17:27.693
> 
> 标签：css, ruby-on-rails, button, radio

如何创建在同一行上有多个单选按钮的表单？我似乎只能让它们垂直显示，一个在另一个下方。我对 HTML/CSS/RoR 的经验有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:42:09.733

这可以通过将它们包装在具有 display style 的元素中来实现`inline`。

例如，​</p>

```
<div style="display:inline">
    <input type="radio" name="example" id="radio1" />
    <label for="radio1">Radio 1</label>
    <input type="radio" name="example" id="radio2" />
    <label for="radio2">Radio 2</label>
    <input type="radio" name="example" id="radio3" />
    <label for="radio3">Radio 3</label>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

看起来像这样：

> o 收音机 1 o 收音机 2 o 收音机 3

# ruby-on-rails - 如何禁用 Formtastic 类？

> ID：11267697
> 
> 赞同：1
> 
> 时间：2012-06-29T19:17:41.703
> 
> 标签：ruby-on-rails, formtastic

每当我使用 Formtastic 表单助手时，它都会将此作为`class`属性添加到表单中：

```
<form class="formtastic #{class_name}"></form> 
```

这最终导致了我的问题，如何禁用这些默认类？我已经使用：

`:html{ :class => 'foo' }`

但这只是被附加了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:26:13.300

您提供的任何类都将附加到 Formtastic 提供的默认类中。您最好的选择是在一个单独的 CSS 文件中重新定义默认类，您将在默认 Formtastic 样式表之后将其包含在布局中。

# asp.net-mvc-3 - 使用带有 MVC3 路由的 Html 锚点

> ID：11267699
> 
> 赞同：3
> 
> 时间：2012-06-29T19:17:43.903
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我的一个观点有一个锚点：

```
<a name="@("Doc" + Model.Key)"></a> 
```

我想从另一个视图链接到这个锚点：

```
<a href="@(Url.Action("Update") + "#Doc" + Model.DocumentId)">Go To Document Properties</a> 
```

这会生成一个这样的 url：`http://localhost:60010/Session/Update#Doc1`

当我单击此链接时，我收到以下错误：

> 参数字典包含“Controllers.SessionController”中方法“System.Web.Mvc.ActionResult Update(Int32)”的不可为空类型“System.Int32”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

我使用的是默认路由，没有自定义路由：

```
routes.MapRoute("Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

如何让 MVC 忽略 url 中的 html 锚（`#Doc1`例如）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:49:20.530

根据@BrettSmith 发布的建议，我提出了以下解决方案：

1.  我添加了带有锚点和约束的第二条路线，这样只有在指定了锚点时才会选择这条路线。

    ```
    routes.MapRoute(
            "DocAnchor", // Route name
            "{controller}/{action}/{id}#{anchor}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional, anchor = UrlParameter.Optional }, // Parameter defaults
            new { anchor = ".+" } // ".+" regex means any character one or more times.
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
    ```

2.  我修改了指向此的链接：

    ```
    <a href="@(Url.Action("Update", new { id=Model.DocumentId, anchor="Doc" + Model.DocumentId }).Replace("%23", "#"))">Go To Document Properties</a> 
    ```

    请注意，我将锚点作为路由数据对象的一部分传递（我也有一个错误，我没有传递 id，我也修复了该错误）。 `Url.Action`UrlEncodes 字符串，所以我不得不`%23`用散列字符替换 让浏览器识别锚点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:28:56.797

我有一条路线可以做到这一点，但是在硬盘驱动器故障中丢失了，您需要从内存中指定一条路线，其中包括

```
{controller}/{action}#{documentid} 
```

documentid 可以是任何不是 id 的东西

你还需要让你的控制器期望 int? id 而不是 int id

# php - Zend 框架 addMultiOption 为选项添加自定义参数，如“rel”

> ID：11267700
> 
> 赞同：1
> 
> 时间：2012-06-29T19:17:46.630
> 
> 标签：php, zend-framework, zend-form-select

我使用 Zend，我们有一个通过一系列函数组合在一起的表单。一个特别的 addMultiOption，它是从数据库中提取的（我不知道，因为如果我可以改变查询，那会更容易和更好。无论如何，我需要添加一个“rel”归因于每个选项 /选项将有一个“一”的相对值，这来自数据库所以。我试图弄清楚如何在值之外添加额外的属性

Zend 框架是否支持这一点，如果不支持，我该如何实现？我发现我之前认为这是一篇关于它的好帖子，但事实证明它对我不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T12:37:17.677

使用 addMultiOption($value,$label) 我只是将 value 参数设置为：

```
$value = $id . '" ref="' . $ref; 
```

当它渲染你得到：

```
<option value="<idValue>" ref="<refValue"><labelValue></option> 
```

希望这可以帮助....

好的，值被转义了，但 optionClasses 在添加 addMultiOptions(val,lable) 的循环中没有这样我做这样的事情：

```
$optionClasses[<val>] = 'ref_' . <val> . '" ref="' . <ref>; 
```

然后在循环之后只做一个 setAttrib('optionClasses',$optionClasses)

这实际上有效......

因此，这是一个示例，我将定义一个数组，该数组可能是来自数据库查询的记录集，其中包含我们将要使用的三个部分；id，代码和偏移量

```
$records = array( array('id' => 1, 'code' => 'Code 1', 'offset' => 4),
                  array('id' => 2, 'code' => 'Code 2', 'offset' => 5),
                  array('id' => 3, 'code' => 'Code 3', 'offset' => 6)
           ); 
```

我将在表单元素定义中使用它（在扩展 Zend_Form 的类中）进行选择，其中选项有一个名为“offset”的属性，该属性将具有数组中的“offset”值

```
$e = $this->createElement('select', 'code_id');
$e->setLabel('Event Type:')
    ->setAttrib('size', 1);
$optionClasses = array();
foreach ($records as $record) {
    $optionClass = 'xcode_' . $record['id'] . '" xoffset="' . $record['offset'];
    $optionClasses[$record['id']] = $optionClass;
    $e->addMultiOption($record['id'],$record['code']);
}
$e->setAttrib('optionClasses', $optionClasses);
$this->addElement($e); 
```

当它被渲染时，它会产生一个选择元素，如

```
<select name="code_id" id="code_id">
    <option value="1" class="xcode_1" xoffset="4" selected="selected">Code 1</option>
    <option value="2" class="xcode_2" xoffset="5">Code 2</option>
    <option value="3" class="xcode_3" xoffset="6">Code 3</option>
</select> 
```

然后您可以使用 jQuery 获得所选选项的偏移量

```
 var xoffset = $("#code_id").find("option:selected").attr("xoffset"); 
```

这是有效的，因为 optionClasses 结果类属性不会像 value 属性那样被渲染方法转义。

# c# - 有两个嵌套 using 子句时的 Microsoft.usage 警告

> ID：11267702
> 
> 赞同：0
> 
> 时间：2012-06-29T19:17:54.180
> 
> 标签：c#

我想知道为什么 Visual Studio 代码分析会用这段代码给出警告：

```
byte[] data = File.ReadAllBytes("myImage.png");
using (MemoryStream mem = new MemoryStream(data))
using (Bitmap bmp = new Bitmap(mem))            
{
     // do something with the bitmap
} 
```

错误是：

> 对象“mem”可以在方法中多次释放...为避免生成 System.ObjectDisposedException，您不应在对象上多次调用 Dispose。

以及如何纠正这一点？（是的，我可以直接从文件加载位图，但在我的实际项目中，我有自己的文件格式，其中多个图像保存到一个文件中，因此我需要`MemoryStream`从文件中的特定范围加载数据）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T19:21:28.407

问题是它`Bitmap`拥有它在其构造函数中给出的流的所有权。*它*会处理流 - 你不需要。所以你只需要：

```
using (Bitmap bmp = new Bitmap(new MemoryStream(data)))            
{
     // do something with the bitmap
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T20:15:38.953

关于第二个可靠性警告，似乎当这种情况发生时，无论您做什么，代码分析都会向 CA2000*或CA2202 抱怨。*对此有很多抱怨，[这里有一个供您欣赏。](http://connect.microsoft.com/VisualStudio/feedback/details/611525/disposable-objects-and-ca2000-ca2202-warnings)

只是为了看看它是否特别适用于 using 语法，我将 using 扩展为 try catch 块，您会得到相同的行为。

```
class Program
    {
        static void Main(string[] args)
        {
            byte[] data = {};
            //using (Bitmap bitmap = new Bitmap(new MemoryStream(data)))
            //{ }

            MemoryStream mem = null;
            Bitmap bitmap = null;
            try
            {
                mem = new MemoryStream(data);
                bitmap = new Bitmap(mem);

            }
            catch (Exception)
            {

                throw;
            }
            finally
            {
                if (null!= bitmap ) bitmap.Dispose();                
                // commenting this out will provoke a CA2000.
                // uncommenting this will provoke CA2202.
                // so pick your poison.
                // if (null != mem) mem.Dispose();
            }
        } 
    } 
```

编辑：正如您（Jaska）所指出的，Microsoft 有一条关于在位图的 using 块中标记有关内存流的意图的说明：

```
class Program
    {
        static void Main(string[] args)
        {
            byte[] data = new byte[1000];
            MemoryStream mem = null;
            try
            {
                mem = new MemoryStream(data);
                using (Bitmap bmp = new Bitmap(mem))
                {
                    mem = null; // <-- this line will make both warning go away
                }
            }
            finally
            {
                if (mem != null)
                {
                    mem.Dispose();
                }
            } 
        } 
    } 
```

我很高兴看到这行得通，但同时它比在位图的构造函数中使用匿名内存流有点难看。呃，好吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T20:42:10.070

Reacher-Gilt 到 ms-page 的链接引导我找到解决方案，这将使两个警告都消失：

```
 byte[] data = new byte[1000];
        MemoryStream mem = null;
        try
        {
            mem = new MemoryStream(data);
            using (Bitmap bmp = new Bitmap(mem))
            {
                mem = null; // <-- this line will make both warning go away
            }
        }
        finally
        {
            if (mem != null)
            {
                mem.Dispose();
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T19:30:39.697

一旦你输入第二个 using 语句，你的 Bitmap 将“消耗”内存流——它负责*内存*流，包括它的处理。`mem`这是明智的，如果您考虑一下您的用法：您是否希望在您在位图的构造函数中使用它之后（或期间）访问其他东西？我会说可能不会。

答案是将两个 using 语句合并在一起：`using (Bitmap bitmap = new Bitmap(new MemoryStream(data)))`. 那应该照顾CA警告。

# html - 为什么我的下拉菜单不显示？

> ID：11267704
> 
> 赞同：1
> 
> 时间：2012-06-29T19:18:09.720
> 
> 标签：html, css, drop-down-menu, frontend, submenu

我用 HTML 和 CSS 构建了一个下拉菜单。*当您将鼠标悬停在“女性”*链接上时，应该显示下拉菜单，但由于某种原因它没有显示。我找不到问题。

**CSS：**

```
li.menu_item {display:inline; list-style-type: none; padding-right: 20px; position:relative; }
#menu li a {text-decoration:none; color:black;}
#menu_main{border-color:#E2E2E2;border-style:solid; border-width:1px 0 1px 0;}

#submenu{  margin:0; padding:0; position:absolute; width:550px; border:1px solid black; left:5px; top:34px; background:#F6F6F6; visibility:hidden;}
a#women:hover {visibility:visible;}
.submenu{ margin:0; padding:0; }
.submenu li{ margin:0; padding:0; list-style:none; }
.submenu_vak{float:left; width:150px; margin: 5px; padding: 5px;}
.submenu_titel{font-weight:bold;} 
```

**HTML：**

```
 <ul id="menu">
        <li class="menu_item"><a href="merken2.php">Home</a></li>
        <li class="menu_item"><a href="steden.php">City</a></li>
        <li class="menu_item"><a id="women" href="#">Women</a>
           <div id="submenu">
              <div class="submenu_vak">
             <ul class="submenu">
                <li class="submenu_titel"><a href="#">Kleding</a></li>
                <li><a href="#">Broeken & Jeans</a></li>
                <li><a href="#">Jassen</a></li>
                <li><a href="#">Truien & Vesten</a></li>
                <li><a href="#">Colberts & Pakken</a></li>
                <li><a href="#">Lingerie</a></li>
             </ul>
              </div>
              <div class="submenu_vak">
             <ul class="submenu">
                <li class="submenu_titel"><a href="#">Schoenen</a></li>
                <li><a href="#">Sneakers</a></li>
                <li><a href="#">Slippers & Sandalen</a></li>
                <li><a href="#">Instappers</a></li>
                <li><a href="#">Nette schoenen</a></li>
             </ul>
              </div>
              <div class="submenu_vak">
             <ul class="submenu">
                <li class="submenu_titel"><a href="#">Accessoires</a></li>
                <li><a href="#">Horloges</a></li>
                <li><a href="#">Brillen & Zonnebrillen</a></li>
                <li><a href="#">Riemen</a></li>
                <li><a href="#">Tassen</a></li>
             </ul>
              </div>                  
           </div>
        </li>
        <li class="menu_item"><a href="#">Men</a></li>
    </ul>   
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:23:27.317

这里它的工作：http: [//jsfiddle.net/surendraVsingh/BKVfa/4/](http://jsfiddle.net/surendraVsingh/BKVfa/4/) **（更新）**

所以，这里是检查上面更新的小提琴和下面的代码:)

**CSS**

```
li.menu_item {display:inline; list-style-type: none; padding-right: 20px; position:relative; }
#menu li a {text-decoration:none; color:black;}
#menu_main{border-color:#E2E2E2;border-style:solid; border-width:1px 0 1px 0;}

#submenu{  margin:0; padding:0; position:absolute; width:550px; border:1px solid black; left:5px; top:34px; background:#F6F6F6; display:none;}
.menu_item:hover #submenu {display:block;}
.submenu{ margin:0; padding:0; }
.submenu li{ margin:0; padding:0; list-style:none; }
.submenu_vak{float:left; width:150px; margin: 5px; padding: 5px;}
.submenu_titel{font-weight:bold;}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:24:51.077

您将可见性规则应用于链接本身，而不是子菜单。更改此行：

```
a#women:hover {visibility:visible;} 
```

...进入这个：

```
.menu_item:hover #submenu {visibility:visible;} 
```

# asp.net - 这里缺少模型粘合剂吗？如果是，如何创建和注册 Global.asax？

> ID：11267707
> 
> 赞同：0
> 
> 时间：2012-06-29T19:18:18.470
> 
> 标签：asp.net, asp.net-mvc-3

我有以下不同工件的代码，

**实体**

```
public class ChooseFirst
{
    public int ChooseFirstId { get; set; }
    public string ChooseFirstName { get; set; }
} 
```

**查看模型**

```
public class SelectViewModel
{
    public IEnumerable<SelectListItem> ListChooseFirst { get; set; }
} 
```

**控制器/获取操作**

```
//
    // GET: /MenuOne/

    public ActionResult MenuOne()
    {
        var selectViewModel = new SelectViewModel
                                  {
                                      ListChooseFirst = ChooseFirstList()
                                  };

        return View(selectViewModel);
    }
 private IEnumerable<SelectListItem> ChooseFirstList()
    {
        //here data comes from database
        List<ChooseFirst> list = _getFComboService.GetFComboList();

        List<SelectListItem> items = new List<SelectListItem>();
        foreach (ChooseFirst chooseFirst in list)
        {
            SelectListItem item = new SelectListItem();
            item.Text = chooseFirst.ChooseFirstName;
            item.Value = chooseFirst.ChooseFirstId.ToString();
            items.Add(item);
        }
        return items;
    } 
```

**HTML 视图**

```
@Html.DropDownList("FCombo", Model.ListChooseFirst, "--Select One--") 
```

现在问题当我发布我的表单时，“selectViewModel”的值为NULL，是否需要建模活页夹，请建议并帮助我如何为此创建模型活页夹？

```
//
    // POST: /MenuOne/
    [HttpPost]
    public ActionResult MenuOne(SelectViewModel selectViewModel)
    {
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:24:00.623

那是对的。发布到服务器的所有内容都是带有所选选项值的“FCombo”。没有选择列表项的枚举。相反，您需要的是发布数据的视图模型。

```
class SelectedOptionViewModel
{
    public int FCombo {get;set;}
} 
```

或者您可以简单地将参数直接作为参数传递

```
public ActionResult MenuOne(int fcombo)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:24:17.563

看起来您缺少将下拉列表的选定值绑定到视图模型中的属性。你需要类似的东西：

```
 @Html.DropDownListFor(model => model.SelectedItem, Model.ListChooseFirst) 
```

您需要更新 viewModel 以添加 SelectedItem 属性

```
 class SelectedOptionViewModel
{
    public int SelectedItem {get;set;}
} 
```

# c# - 关于以编程方式在 aspx 中添加控件的几个问题

> ID：11267714
> 
> 赞同：1
> 
> 时间：2012-06-29T19:18:50.190
> 
> 标签：c#, asp.net, page-lifecycle, dynamic-controls

我只是对以编程方式在`aspx`. 在做了一些研究之后，我只是想确保我正确理解了这一点。

当您尝试以编程方式添加控件时，您应该在`page life cycle`.

1.  您可以以编程方式创建和添加控件的最新版本是否在`page_load`?

2.  在中创建控件是最佳实践吗？`initialization phase`是因为这是在`view state`加载之前吗？

3.  您是否必须继续重新创建每个控件`post back`？或者有没有办法创建一次并让它持久化？

4.  如果您更改`onInit`阶段中存在的任何控件，它会在加载`view state`时自动替换吗？`view state`

5.  是否`ContentTemplateContainer.Controls.Add(...)`添加子控件？例如，如果您尝试添加一个充满按钮的网格视图的表格，`partial post back`当单击其中一个按钮时会出现吗？如果不是，您应该如何将子控件添加到`UpdatePanel`?

这就是我现在能想到的所有问题。你们能给我的任何澄清都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:45:04.513

假设您谈论的是 webforms，而不是 mvc，您可以在生命周期的任何阶段添加*新的*动态控件。但是，重要的是要记住，每次您有一个回发（包括任何服务器端事件）时，您都在使用与您第一次添加动态控件*的页面不同的页面实例*，因为您现在正在准备响应对于*不同的 http 请求*。一旦你清楚地理解了这一点，其他一切都开始变得更有意义。

因此，您想在页面中添加一个控件以响应按钮单击。您可以在按钮的单击事件中安全地执行此操作，这在页面生命周期中非常晚。但是现在用户做了一些事情来触发另一个帖子。此时，您正在使用与以前不同的页面类实例。如果希望在回发完成后动态控件仍然在页面上，则必须再次将动态控件添加到页面中。如果您还想为此控件使用 ViewState，则必须在 Page_Load 事件*之前*（而不是期间）执行此操作。最常见的地方是 Page_Init。

我认为这涵盖了您的大部分观点。

# tsql - 在 guid 上将 sql 表与活动目录用户连接起来的棘手问题

> ID：11267717
> 
> 赞同：0
> 
> 时间：2012-06-29T19:19:06.600
> 
> 标签：tsql, active-directory, openquery

好的，所以我们在 SQL 中有一些表，它们通过活动目录中的 Guid 来识别用户。最初开发团队只想在 sql 中镜像用户群，但经理坚持我们将其保存在活动目录中。因此，无论如何，我们尝试执行的操作之一是从 SQL 中获取一个包含用户 Guid 和一些其他信息的表，并将其连接到一个从 openquery 到 AD 生成的表中。

问题是，如果用户从 AD 中删除，则打开的查询会呕吐。我假设这是因为我们试图导航到活动目录中不存在的条目，并且由于它不是实际的查询（本质上是索引），所以它爆炸了。这是我们用来拉取用户的 ldap 字符串

```
LDAP://<GUID=(guid here)> 
```

或者更具体地说，类似

```
SELECT * from openquery(ADSI, '
   SELECT displayName, mail
   FROM LDAP://<GUID=(userGuid)>
') 
```

现在，如果这是一个查询而不是索引，或者在这种情况下是一个“过滤器”，(objectGuid=x) 将简单地不返回任何结果而不是引发错误。但这里的问题是 objectGuid 不会作为 guid 返回到 SQL，它作为二进制 0x102938102938 或一些垃圾返回。现在，我想也许将 Guid 转换为十六进制，然后转换为二进制，然后尝试用它来查询 AD，但我什至不知道从哪里开始。

所以我想这里的最终问题是：我如何通过 guid 查询用户的活动目录，如果该 guid 不存在，它不会抛出错误？这样我可以将它加入到 sql 查询中吗？这需要在 T-SQL 中实现，而不是在使用 .net DirectoryServices 帮助器的代码中实现。

如果这看起来很分散，我很抱歉，我只是想把我们一直在处理的事情放在这里。任何意见表示赞赏，包括采取不同路线的建议。TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:20:36.703

所以有几件事：

至于格式化你的 GUID，你会想要做一个`CAST(yourColumn as varchar(38))`. 此链接解释了有效的格式 - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms677985(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677985(v=vs.85).aspx)。我不知道临时（如果/如何）你可以告诉 SQL 如何格式化转换的值。您可能需要在线挖掘一个可以为您进行 GUID 格式化的功能。

我建议您加入，看看您是否可以在表值函数中进行 AD 查找，您可以在那里捕获错误并且不返回任何行或返回该行并以这种方式加入。

# r - 从插入符号模型中收集非折叠预测

> ID：11267723
> 
> 赞同：10
> 
> 时间：2012-06-29T19:19:45.293
> 
> 标签：r, cross-validation, r-caret

我想使用插入符号模型中的非折叠预测来训练包含一些原始预测变量的第二阶段模型。我可以按如下方式收集超出预期的预测：

```
#Load Data
set.seed(1)
library(caret)
library(mlbench)
data(BostonHousing)

#Build Model (see ?train)
rpartFit <- train(medv ~ . + rm:lstat, data = BostonHousing, method="rpart",
               trControl=trainControl(method='cv', number=folds, 
                                        savePredictions=TRUE))

#Collect out-of-fold predictions
out_of_fold <- rpartFit$pred
bestCP <- rpartFit$bestTune[,'.cp']
out_of_fold <- out_of_fold[out_of_fold$.cp==bestCP,] 
```

这很好，但它们的顺序错误：

```
> all.equal(out_of_fold$obs, BostonHousing$medv)
[1] "Mean relative difference: 0.4521906" 
```

我知道该`train`对象返回一个用于训练每个折叠的索引的列表：

```
> str(rpartFit$control$index)
List of 10
 $ Fold01: int [1:457] 1 2 3 4 5 6 7 8 9 10 ...
 $ Fold02: int [1:454] 2 3 4 8 10 11 12 13 14 15 ...
 $ Fold03: int [1:457] 1 2 3 4 5 6 7 8 9 10 ...
 $ Fold04: int [1:455] 1 2 3 5 6 7 8 9 10 11 ...
 $ Fold05: int [1:455] 1 2 3 4 5 6 7 8 9 10 ...
 $ Fold06: int [1:455] 1 2 3 4 5 6 7 8 9 10 ...
 $ Fold07: int [1:457] 1 3 4 5 6 7 8 9 10 13 ...
 $ Fold08: int [1:455] 1 2 4 5 6 7 9 11 12 14 ...
 $ Fold09: int [1:455] 1 2 3 4 5 6 7 8 9 10 ...
 $ Fold10: int [1:454] 1 2 3 4 5 6 7 8 9 10 ... 
```

如何使用这些信息以`out_of_fold`与原始数据集相同的顺序将观察结果放入对象中`BostonHousing`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T00:23:31.140

我将在输出中添加另一列，指示下一个版本中每个样本的原始行号（可能从现在开始一个月）。

最大限度

# c++ - 我的单例模板真的是单例吗？

> ID：11267725
> 
> 赞同：2
> 
> 时间：2012-06-29T19:19:59.193
> 
> 标签：c++, design-patterns

有人告诉我，我的单例模板可能不是真正的单例，因为可以使用它创建多个对象。当我问如何解决它时，我被忽略了。这就是为什么我来这里问我的单例模板类真的是单例吗？

```
#ifndef SINGLETON_H_
#define SINGLETON_H_

template <class T>
class Singleton
{
private:
static T* instance;

protected:
    Singleton<T>(  )
    {
    }

public:
    static T* getInstancePtr(  )
    {
        if ( instance == 0 )
            instance = new T(  );

        return instance;
    }
};

template <class T> T* Singleton<T>::instance = 0;

#endif 
```

然后它被一个我希望成为单例的类继承，如下所示：-

```
class Console : public Singleton< Console >
{
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:26:35.907

您已经创建了默认构造函数`protected`。派生类可以访问它，所以这将编译：

```
Console c1, c2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:25:26.113

不能保证它是单例的一个简单原因是线程安全。

如果两个或更多线程同时调用 getInstancePtr，您可能最终会得到两个或更多实例，具体取决于线程交换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-12T07:47:02.047

使用*局部静态变量*来实现单例模式：

```
template <class T>
class Singleton
{
    static T* getInstancePtr(  )
    {
        static T instance; // <-- HERE

        return &instance;
    }
}; 
```

除了少得多的代码外，它还保证了线程安全。它将在第一次调用时构建`Singleton<X>::getInstancePtr()`，后续调用将获得一个实例。

或者，如果您希望每个线程一个实例，您可以使用`thread_local`：

```
template <class T>
class Singleton
{
    static T* getInstancePtr(  )
    {
        thread_local T instance; // <-- HERE

        return &instance;
    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-12T07:41:30.450

我使用了与您相同的单例模板，但留给用户创建私有构造函数和析构函数。用户必须与单例类成为朋友，但它与我想要的很接近，并且可以用作单例。它（还）不是线程安全的，但它“解决”了多实例问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T19:27:46.413

要在多线程环境中工作，您需要不同的解决方案。您必须使用特定的语言功能来确保在存在多个线程的情况下只创建对象的一个​​实例。更常见的解决方案之一是使用 Double-Check Locking 习惯用法来防止单独的线程同时创建单例的新实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-29T20:26:50.073

好的，除了多线程的任何问题之外，还有一个我可以创建两个实例的情况。通过初始化下面的类控制台

```
class Console : public Singleton< Console >
{
}; 
```

像这样

```
Console c1; 
```

我最终得到了两个 Console 实例，一个在 Singleton 类中保存的实例指针中，一个在 c1 对象本身中。我通过将 Singleton 类更改为以下解决了这个问题。

```
#ifndef SINGLETON_H_
#define SINGLETON_H_

template <class T>
class Singleton
{
private:
    static T* instance;

protected:
    Singleton<T>(  )
    {
        if ( instance == 0 )
            instance = static_cast<T*>(this);
    }

public:
    static T* getInstancePtr(  )
    {
        return instance;
    }
};

template <class T> T* Singleton<T>::instance = 0;

#endif 
```

然而，除了多线程问题之外，我现在更确定我的 Singleton 类不太可能导致多个实例。

# java - MonoDevelop 中的 Java 控制台错误

> ID：11267734
> 
> 赞同：0
> 
> 时间：2012-06-29T19:20:52.183
> 
> 标签：java, monodevelop, ubuntu-11.10

所以，我在我的 ubuntu 11.10 64 位上修改 MonoDevelop，当我尝试运行 Java 控制台应用程序时，我在打开新项目时立即收到此错误：

**尝试加载项目“/home/myhomefolder/documents/java/project.jproj”时出错：项目不支持框架“.NETFramework,Version=v4.0”**

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T21:41:30.143

您可以尝试将项目格式默认从 Visual Studio 2010 更改为 Visual Studio 2008。（编辑/首选项/“加载/保存”）。这在 Ubuntu 12.04 上对我有用。

作为旁注，此修复也适用于 Visual Basic 项目（[新的默认 VB.NET 项目立即给出错误](https://stackoverflow.com/questions/9623964/new-default-vb-net-project-immediately-gives-an-error)）

# verilog - Verilog 代码。总是声明需要帮助

> ID：11267735
> 
> 赞同：1
> 
> 时间：2012-06-29T19:20:54.460
> 
> 标签：verilog

以下是代码： 代码的目的是从寄存器之一计算前导零的数量。我只想从寄存器有效位计算前导零一次。为此，我必须使用 always 块。现在我最初将 a 分配为 1'b1，后来我将其更改为 1'b0，以便块执行一次。如果我尝试模拟代码。always 块不执行。但是，如果我稍后将 a 分配为 0'b1 （这没有任何意义）。代码在模拟器中正确模拟。但是如果我在 FPGA 套件上合成代码，它会给出一些错误的结果。请帮我

```
integer count,index;
wire a;
assign a=1'b1;
always@(a)
begin
    for(count=0;count<7;count=count+1) begin
        index=4*count;
        if((significand[index  ]==1'b0) && (significand[index+1]==1'b0) &&
           (significand[index+2]==1'b0) && (significand[index+3]==1'b0))
             lzero=lzero+1;
    end 
end
assign a=1'b0;
// If I use assign a=0'b1, it simulates properly, 
// but 0'b1 doesn't make any sense, also If I keep 0'b1, 
// I dont get proper result in actual synthesis onto the board. 
```

* * *

实际上，我问这个问题的意图是，我应该如何使用“始终”块。因为我只想执行这个块一次，所以我**不需要总是**设置“posedge clk”或“negedge clock”。所以我该怎么做 ？？请帮助，因为我的项目需要我高使用**for**循环**if else**循环

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-30T03:57:24.727

你看起来像一个试图编写程序而不是试图描述硬件的软件工程师。

在编码时，您必须并行思考。

您的代码说“连续并始终将 1 的值分配给 a”，然后它说“连续并始终将 0 的值分配给 a”。这显然不是你想要的。这些分配语句不是您希望的那样临时。

所以你想要这样的东西（在伪代码中）：1）读取输入寄存器 2）计算 0 的数量 3）输出 0 的数量

在软件中，您会像这样执行第 2 步：

```
for i=msb to lsb loop
   if (input[i] == 1) then break;
end loop
return i; 
```

硬件中的 for 循环要么意味着编写状态机（想想你如何在具有递归的功能语言中执行 for 循环，其中一个输入是你要达到的索引）。或者我们可以自己展开循环。

```
if (msb == 1 ) then return 0
else if (msb-1 == 1) then return 1
...
else if (msb-31 == 1) then return 31
else return 32
end if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:34:07.777

这里有几件事似乎是错误地使用了 verilog 语言来描述硬件。

如果这是一个需要初始化的测试台组件，那么`initial begin .. end`这就是执行此操作的方法。

如果这是为了综合而只运行一次，那么`always`我认为一个块并不是设计它的正确方法。如果要在上电时运行一次，则可以预先计算（参数）并因此在编译/综合中固定。

如果它基于一个可以更改的输入，则应该没有启用来运行计算。由于此输入可能不会在时间 0 设置，具体取决于硬件的上电顺序。

如果这是用于合成，则以下将更合适：

```
module count_lzero(
  input             clk,
  input             rst_n,
  input             enable, // Toggle high 1 Clk to calc new lzero
  output reg [31:0] lzero
);

always @(posedge clk or negedge rst_n) begin
  if (~rst_n) begin
    lzero <= 'b0;
  end
  else if ( enable ) begin
    for(count=0;count<7;count=count+1) begin
        index=4*count;
        if((significand[index  ]==1'b0) && (significand[index+1]==1'b0) &&
           (significand[index+2]==1'b0) && (significand[index+3]==1'b0))
             lzero<=lzero+1;
    end 
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T18:05:06.033

您可以做的是创建一个标志，在开始时将标志设置为 0，并在您的始终块中，检查标志的值，如果标志等于 0，则表示这是您的标志第一次执行您的操作并在那里，将您的标志设置为 1。

这样您就可以保证在启动时只执行一次这些操作。

# java - System.out 调用打印两次

> ID：11267737
> 
> 赞同：0
> 
> 时间：2012-06-29T19:20:59.267
> 
> 标签：java, printing, console, boolean

我推迟了这个问题，因为它一定很愚蠢，而且考虑到也是我提出这个问题，我犹豫了，在过去的几个小时里变得越来越沮丧： [for 循环的最后一行执行了两次？](https://stackoverflow.com/questions/8639122/last-line-of-for-loop-executed-twice)

我认为这可能是一种类似的疏忽。

我还发现了这个，它处理了一个类似的问题： [Java Exception printing two](https://stackoverflow.com/questions/1186148/java-exception-printing-twice)

但似乎仍然无法解决我的问题。

这是一个类的片段：

```
switch (Integer.parseInt(oc, 16)) 
{
  case 0x0F:
  ccrFlagState.zBit(true);
  break;
} 
```

在另一个中调用此代码段：

```
public boolean zBit(boolean set) {

    if (set = true) {
        System.out.println("Z set in CCR class");
    }
    return set;
} 
```

当我输入`0F`控制台打印`Z set in CCR class`两次。

谁能指出我正确的方向，为什么？谢谢，罗伯特。

-编辑-我应该补充一点，我得到了相同的结果：

```
if (set) 
```

和

```
if (set == true) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:24:13.413

（您的条件需要是`set == true`.`set = true`将变量分配给`true`，然后总是评估为`true`。）

你有多确定你没有打`zBit`两次电话？使用调试器确定。

您没有某种可能拦截和重复`System.out`行的日志记录包装器或系统吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:39:02.200

这对我来说是不可重现的。此代码仅将其标出一次。请提供更多代码...

```
public static void main(String[] args) {
    String oc = "0F";

    switch (Integer.parseInt(oc, 16)) {
      case 0x0F:
          zBit(true);
          break;
    }
}

public static boolean zBit(boolean set) {
    if (set) {
        System.out.println("Z set in CCR class");
    }
    return set;
} 
```

# html - CSS HTML：使用水平标签创建页面

> ID：11267738
> 
> 赞同：3
> 
> 时间：2012-06-29T19:21:03.990
> 
> 标签：html, css, tabs

我正在尝试编写一个在顶部显示水平选项卡的网页。我从几个不同的示例中复制了 CSS 和 HTML，但我总是得到一个垂直的无序列选项列表。我没有任何其他关于无序列表的 CSS 会与我正在试验的内容发生冲突。这是CSS：

```
#ts_tabmenu {
    font-size: .75em;
    padding: 20px 0px 0px 20px;
}
#ts_tabmenu ul
{
    line-height: 1em;
    margin: 0px;
    list-style-type: none;
    float: left;
    padding: 0px 0px 0px 5px;
}
#ts_tabmenu ul li
{
    float: left;
}
#ts_tabmenu ul li a
{
    text-decoration: none;
    display: block;
    float: left;
    padding: 0px 0px 0px 10px;
    background: url(tabs.gif) no-repeat left top;
    margin-left: -5px;
    z-index: 0;
    position: relative;
    color: #666666;
}
#ts_tabmenu ul li a strong
{
    font-weight: normal; /* remove the bold effect */
    display: block;
    background: url(tabs.gif) no-repeat right top;
    padding: 6px 10px 7px 5px;
    cursor: pointer;
}
#ts_tabmenu ul li a:hover
{
    position: relative;
    z-index: 5;
    background: url(tabs.gif) no-repeat left bottom;
    color: #000000;
}
#ts_tabmenu ul li a:hover strong
{
    background-image: url(tabs.gif) no-repeat;
    position: relative;
    z-index: 5;
    background-position: right bottom;
} 
```

这是HTML：

```
<div id="ts_tabmenu">
    <ul>
        <li><a href=#Dashboard><strong>Tutorialsphere</strong></a></li>
        <li><a href=#><strong>Photoshop</strong></a></li>
        <li><a href=#><strong>Illustrator</strong></a></li>
        <li><a href=#><strong>Fireworks</strong></a></li>
        <li><a href=#><strong>Flash</strong></a></li>
        <li><a href=#><strong>CSS</strong></a></li>
        <li><a href=#><strong>PHP</strong></a></li>
    </ul>
</div> 
```

任何意见是极大的赞赏。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:25:57.157

```
#ts_tabmenu ul li
{
  display:inline-block;
  float: left;
} 
```

那应该为你做.. float left 的问题是，如果它是一个块，它会占用它所在空间的宽度。

inline-block 将使其仅与其内容一样宽，您可能希望根据您的样式添加一些填充/边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:26:02.757

非常适合我：http: [//jsfiddle.net/EPSr6/](http://jsfiddle.net/EPSr6/)

我添加`display: inline-block`到#ts_tabmenu ul li 并且仍然可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:26:54.067

似乎在[http://jsfiddle.net/7GUVU/为我工作](http://jsfiddle.net/7GUVU/)

顶部的标签链接。

# php - 序列化的 Ajax 参数未显示在 PHP 中

> ID：11267744
> 
> 赞同：0
> 
> 时间：2012-06-29T19:21:33.507
> 
> 标签：php, javascript, ajax, serialization, prototypejs

我正在尝试访问在我的 AJAX 请求中传递的参数，但是当我尝试在 PHP 中将它们打印出来时，什么也没有出现。我知道 emailData 已定义且正确，所以这不是问题。

这是我当前的代码：

```
function sendEmail(){
var emailData = $('emailForm').serialize(true);
new Ajax.Request("php/email.php",
    {
        method : "get",
        parameters : emailData,
        onFailure : ajaxFailure,
        onException : ajaxFailure
    }
);} 
```

在 email.php 中

```
print_r($_GET); 
```

**编辑**

[当我检查 emailData 是否使用警报或 console.log 定义时，我会根据http://www.prototypejs.org/api/form/serialize](http://www.prototypejs.org/api/form/serialize)以正确的 ajax 参数格式获得我想要的正确值。

**第二次编辑**

似乎现在可以工作了。我根本没有修改代码，但它现在似乎可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:39:36.400

你没有`onSuccess:`价值。您只检查错误和异常。

执行以下操作：

```
function sendEmail(){
var emailData = $('emailForm').serialize(true);
new Ajax.Request("php/email.php",
    {
        method : "get",
        parameters : emailData,
        onFailure : ajaxFailure,
        onException : ajaxFailure,
        onSuccess : function() { alert("success!"); }
    }
);} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:24:36.787

```
var emailData = $('#emailForm').serialize(true); 
```

emailform 也许是一个 id？

# .net - 如何使用 C# ODP.NET 中的 Oracle Ref Cursor 作为 ReturnValue 参数，而不使用存储函数或过程？

> ID：11267746
> 
> 赞同：5
> 
> 时间：2012-06-29T19:21:42.793
> 
> 标签：.net, oracle, c#-4.0, plsql, odp.net

我需要帮助了解我尝试将 Ref 游标用作多个记录/值的 ReturnValue 参数的方式，PL/SQL 只是 OracleCommand 对象的 CommandText 而不是存储过程或函数，甚至可能的。

如果这是不可能的，我想做的是找到一种方法来发出一个 PL/SQL 语句，该语句将更新未知数量的记录（取决于有多少匹配 WHERE 子句），并返回所有的 Id记录在 OracleDataReader 中更新，使用单次往返数据库，不使用存储过程或函数。

我正在使用 ODP.NET 使用 Oracle 11g 与现有的 C# .NET 4.0 代码库进行通信，该代码库使用 SQL 连接来检索/修改数据。我正在使用的简化测试表定义如下所示：

```
CREATE TABLE WorkerStatus
(
    Id                  NUMERIC(38)         NOT NULL
    ,StateId            NUMERIC(38)         NOT NULL
    ,StateReasonId      NUMERIC(38)         NOT NULL
    ,CONSTRAINT PK_WorkerStatus PRIMARY KEY ( Id )
) 
```

我用三个测试值预先填充表格，如下所示：

```
BEGIN
    EXECUTE IMMEDIATE 'INSERT INTO WorkerStatus (Id, StateId, StateReasonId)
                        VALUES (1, 0, 0)';
    EXECUTE IMMEDIATE 'INSERT INTO WorkerStatus (Id, StateId, StateReasonId)
                        VALUES (2, 0, 0)';
    EXECUTE IMMEDIATE 'INSERT INTO WorkerStatus (Id, StateId, StateReasonId)
                        VALUES (3, 0, 0)';
END; 
```

从名为 Oracle_UpdateWorkerStatus2 的脚本文件加载并包含在 OracleCommand.CommandText 中的现有 SQL 语句如下所示：

```
DECLARE
    TYPE id_array IS TABLE OF WorkerStatus.Id%TYPE INDEX BY PLS_INTEGER;    

    t_ids   id_array;
BEGIN
    UPDATE WorkerStatus
    SET
         StateId = :StateId
        ,StateReasonId = :StateReasonId
    WHERE
        StateId = :CurrentStateId
    RETURNING Id BULK COLLECT INTO t_Ids;
    SELECT Id FROM t_Ids;
END; 
```

我创建了一个小型 C# 测试程序，以尝试隔离出现 ORA-01036“非法变量名称/编号”错误的位置，该错误的主体如下所示：

```
using System;
using System.Configuration;
using System.Data;
using System.Text;
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types;
namespace OracleDbTest
{
  class Program
  {
    static void Main(string[] args)
    {
        // Load the SQL command from the script file.
        StringBuilder sql = new StringBuilder();
        sql.Append(Properties.Resources.Oracle_UpdateWorkerStatus2);

        // Build and excute the command.
        OracleConnection cn = new OracleConnection(ConfigurationManager.ConnectionStrings["OracleSystemConnection"].ConnectionString);
        using (OracleCommand cmd = new OracleCommand(sql.ToString(), cn))
        {
            cmd.BindByName = true;
            cn.Open();

            OracleParameter UpdatedRecords  = new OracleParameter();
            UpdatedRecords.OracleDbType     = OracleDbType.RefCursor;
            UpdatedRecords.Direction        = ParameterDirection.ReturnValue;
            UpdatedRecords.ParameterName    = "rcursor";

            OracleParameter StateId         = new OracleParameter();
            StateId.OracleDbType            = OracleDbType.Int32;
            StateId.Value                   = 1;
            StateId.ParameterName           = "StateId";

            OracleParameter StateReasonId   = new OracleParameter();
            StateReasonId.OracleDbType      = OracleDbType.Int32;
            StateReasonId.Value             = 1;
            StateReasonId.ParameterName     = "StateReasonId";

            OracleParameter CurrentStateId  = new OracleParameter();
            CurrentStateId.OracleDbType     = OracleDbType.Int32;
            CurrentStateId.Value            = 0;
            CurrentStateId.ParameterName    = "CurrentStateId";

            cmd.Parameters.Add(UpdatedRecords);
            cmd.Parameters.Add(StateId);
            cmd.Parameters.Add(StateReasonId);
            cmd.Parameters.Add(CurrentStateId);

            try
            {
                cmd.ExecuteNonQuery();
                OracleDataReader dr = ((OracleRefCursor)UpdatedRecords.Value).GetDataReader();
                while (dr.Read())
                {
                    Console.WriteLine("{0} affected.", dr.GetValue(0));
                }
                dr.Close();
            }
            catch (OracleException e)
            {
                foreach (OracleError err in e.Errors)
                {
                    Console.WriteLine("Message:\n{0}\nSource:\n{1}\n", err.Message, err.Source);
                    System.Diagnostics.Debug.WriteLine("Message:\n{0}\nSource:\n{1}\n", err.Message, err.Source);
                }
            }
            cn.Close();
        }
        Console.WriteLine("Press Any Key To Exit.\n");
        Console.ReadKey(false);
    }
  }
} 
```

我尝试更改参数名称，命名和不命名 UpdatedRecords 参数，更改顺序，使 UpdatedRecords 是第一个或最后一个。到目前为止，我发现的最接近的是以下 StackOverflow 问题（[How to call an Oracle function with a Ref Cursor as Out-parameter from C#?](https://stackoverflow.com/questions/6360244/how-to-call-an-oracle-function-with-a-ref-cursor-as-out-parameter-from-c)），但据我所知，它仍然使用存储函数。

从 SQL Developer 运行 Oracle_UpdateWorkerStatus2 PL/SQL 脚本，它会打开“输入绑定”对话框，我在其中输入 CurentStateId、StateId 和 StateReasonId 的值，如上面的代码所示，但它给出以下错误报告：

```
Error report:
ORA-06550: line 13, column 17:
PL/SQL: ORA-00942: table or view does not exist
ORA-06550: line 13, column 2:
PL/SQL: SQL Statement ignored
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

我真的不明白为什么它告诉我该表不存在，当我定义了 WorkerStatus 表并将 t_Ids 类型的 id_array 变量也声明为一个表时。非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T00:39:35.293

我会尝试一个答案而不是另一个评论。

正如我在一条评论中所说，纯/简单的选择语句在 PL/SQL 中不起作用。但我说错了，你需要一个存储函数来返回一个引用游标。

但首先要做的事情是：您在 PL/SQL 块中声明的类型“id_array”是 PL/SQL 类型。它不能在引用游标选择语句中使用。相反，您将需要一个 SQL 类型：

```
create type id_array as table of number; 
```

这只需要执行一次，就像“创建表”一样。

您的 PL/SQL 块可能如下所示：

```
DECLARE
    t_ids   id_array;
BEGIN
    UPDATE WorkerStatus
    SET
         StateId = :StateId
        ,StateReasonId = :StateReasonId
    WHERE
        StateId = :CurrentStateId
    RETURNING Id BULK COLLECT INTO t_Ids;

    OPEN :rcursor FOR SELECT * FROM TABLE(cast(t_Ids as id_array));    
END; 
```

PS：
在整理这篇文章时，我意识到 ORA-00942 可能来自哪里。数组 t_ids 基于 PL/SQL 类型，该类型在 SQL 端未知/可用。

# python - Python 中关于 __main__ 的概念探究

> ID：11267751
> 
> 赞同：2
> 
> 时间：2012-06-29T19:22:03.963
> 
> 标签：python, function, main, conceptual

我目前正在使用 Python，并且对函数列在`__main__`. 我一直在查看多个 python 脚本，试图找到一个共同的主题，即哪些函数需要在 中占有一席之地`__main__`，但无济于事。在这里，我有一个我自己的代码示例。`firstfunction`并且 `anotherfunction`是我的代码中仅有的两个函数。

```
def main(argv):

    firstinput=""
    secondinput=""

    if len(argv) < 3 or len(argv) > 3:
        print """"Please set to:
                metisfinal.main(metisfinal.py, firstinput, secondinput)""""
        return
    else:
        firstinput = argv[1]
        secondinput = argv[2]

    firstfunction(firstinput, dictionary)
    anotherfunction(list, secondinput)

if __name__ == "__main__":
    main(sys.argv) 
```

（我认为）我知道参数和`__main__`调用是正确的，但 `firstfunction`总是`anotherfunction`返回错误（因为它们的参数不是全局定义的）。我很肯定这是由于对 的错误理解引起的`__main__`，因为我看过的所有其他示例基本上都是`__main__`以相同的方式设置的。

什么构成在中列出特定功能`__main__`？我偶然发现了一些 Python 代码，其中包含超过 30 个函数，但程序员仅在`__main__`. 同样，有时代码会在主要参数中包含类，例如这个（`Project`之前定义为对象类）：

```
def main(argv):

    filename = ""
    outputfilename = ""

    p = Project(filename, outputfilename, subdomainNames) 
    p.generateICs()

if __name__ == "__main__":
    main(sys.argv) 
```

从概念上讲，我不明白为什么没有列出所有功能......不是所有功能都需要运行还是`__main__`只是在初始化某些东西？

我在看非典型代码吗？`__main__`我错过了哪些关键概念？一旦我找到了要放入的函数`__main__`，是否有特定的方法来格式化它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T19:27:25.110

目前尚不清楚您所说的“列在`__main__`”中是什么意思。 `__main__`不是源文件中的实体。相反，它是模块的*名称*，如果您直接执行它。当你这样做时`if __name__=="__main__"`，你是在告诉 Python 当且仅当代码作为主模块执行时才执行该块中的代码——也就是说，如果它是一个正在运行的程序。如果模块是从另一个模块导入的，则块中的代码`if __name__=="__main__"`将不会运行。

请注意，您不会在该 if 块中“列出”函数。相反，您将*常规程序代码*放在要运行的那个块中。通常这段代码只调用一个函数。人们经常调用那个函数`main()`。`__main__`但和之间没有特殊关系`main`。您可以随意调用该函数：

```
def snicklefritz():
    # This function will be run when you run the program
    print "You ran the program!"

if __name__ == "__main__":
    snicklefritz() 
```

尝试运行该程序（例如，将其保存为“snicklefritz.py”，然后`python snicklefritz.py`从命令行执行）。你会看到“你运行了程序！” 打印。相反，如果您创建一个单独的文件，则`import snicklefritz`不会打印该消息。

请注意，没有关于“列出函数”的内容。例如，看这个程序：

```
print "This will always be printed!"

if __name__ == "__main__":
    print "This will only be printed if you run the file as a program!" 
```

这里的`if __name__=="__main__"`块没有“列出”任何功能。它只包含文件作为脚本运行时运行的实际代码。但是，人们通常不会这样做，因为将代码放在单独的函数中而不是仅仅“暴露”在函数之外会更整洁。

至于其他功能，您可以在模块中定义您喜欢的任何其他功能，在该模块中使用，或由导入您的模块的其他模块使用。通常，模块中的大多数功能不会在`if __name__=="__main__"`块内使用，因为它们不会成为“主”功能的一部分。相反，它们将是供其他代码使用的其他函数。例如：

```
def otherFunc(x):
    # Return x squared
    return x**2

def snicklefritz():
    # This function will be run when you run the program
    print "You ran the program!"

if __name__ == "__main__":
    snicklefritz() 
```

`otherFunc`在模块中根本没有使用。没关系。可能有人会想要导入您的模块并`otherFunc`自己使用。并非每个函数都必须在同一个模块中使用，更不用说从`if __name__=="__main__"`块中调用了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:59:14.723

你误会`__main__`成语了。

考虑下面的程序，保存在一个名为的文件中`sum.py`：

```
def read_numbers():
    n1 = int(raw_input())
    n2 = int(raw_input())
    return n1, n2

def sum_numbers(i1, i2):
    return i1+i2

def print_sum(i1, i2, i3):
    print "%d + %d = %d" % (i1, i2, i3)

v1, v2 = read_numbers()
sum = sum_numbers(v1, v2)
print_sum(v1, v2, sum) 
```

它具有三个功能 - 一个从标准输入读取两个数字，另一个将它们相加，第三个打印操作。定义函数后，我以读取两个数字并打印其总和的方式调用它们。相当容易。如果我执行它，我会得到如下信息：

```
$ python sum.py 
12
34
12 + 34 = 46 
```

现在，假设我需要编写另一个程序，它只读取一个数字——实际上给出了另一个数字。由于我已经有一个`sum_numbers()`函数和一个`print_sum()`函数，我可以重用`sum`模块，这是一件好事：

```
import sum
MY_FIXED_NUMBER=3
n = int(raw_input())
value = sum.sum_numbers(n, MY_FIXED_NUMBER)
print_sum(n, MY_FIXED_NUMBER, value) 
```

伟大的！但是，如果我执行它，我得到了什么？这：

```
$ python three_sum.py 
12
34
12 + 34 = 46
12
12 + 3 = 15 
```

哇？！程序要求我输入两个数字，打印它们的总和，然后要求输入第三个数字，它的总和正确为 3。我只是想被要求输入第三个数字，然后打印总和与 3！发生了什么？

碰巧，当我导入一个模块（例如`import sum`）时，它里面的所有代码都会被执行。因此，我的模块有两个部分，一个定义了可以在其他地方使用的有用函数（我将其称为*定义部分*），另一个部分是它以某种方式执行此函数以获得特定结果，因此我可以使用模块作为程序（我将其称为*执行部分*）。执行部分总是被执行。

*幸运的是，Python 有一个技巧，可以让我仅在未*导入模块时才执行执行部分。如果我使用 导入 Python 文件`import`，模块将有一个名为 的变量`__name__`，其名称将是模块的原始名称：

```
>>> import sum
12
34
12 + 34 = 46
>>> sum.__name__
'sum' 
```

但是，如果我将 Python 文件作为脚本 ( `$ python sum.py`) 运行，则`__name__`变量将存在，但名称不同。假设我添加了一行，例如

```
print __name__ 
```

在我的结尾`sum.py`。当我再次运行它时，我得到了它：

```
$ python sum.py
12
34
12 + 34 = 46
__main__ 
```

另一方面，如果我运行`three_sum.py`，结果`print __name__`是不同的：

```
$ python three_sum.py 
12
34
12 + 34 = 46
sum
12
12 + 3 = 15 
```

是的，`__name__`将文件作为脚本运行时变量的值是`__main__`.

那么，这对我有什么帮助？这样：我会将模块的执行部分放在一个`if`条件中。如果模块的名称是`__main__`，那是因为文件作为脚本运行`$ python sum.py`- 在这种情况下，我应该执行模块的执行部分。所以我的`sum.py`模块现在是这样的：

```
def read_numbers():
    n1 = int(raw_input())
    n2 = int(raw_input())
    return n1, n2

def sum_numbers(i1, i2):
    return i1+i2

def print_sum(i1, i2, i3):
    print "%d + %d = %d" % (i1, i2, i3)

if __name__ == "__main__":
    v1, v2 = read_numbers()
    sum = sum_numbers(v1, v2)
    print_sum(v1, v2, sum) 
```

如果我运行`$ python sum.py`，我会得到与以前相同的结果：

```
$ python sum.py
12
34
12 + 34 = 46 
```

但是，如果我运行`three_sum.py`，一切都会不同：

```
$ python three_sum.py 
12
12 + 3 = 15 
```

现在这按预期工作。之所以这样工作，是因为第一次执行的模块名是`__main__`，所以执行下面的命令`if __name__ == "__main__"` 。但是，在第二次执行中，模块的名称是`sum`，所以`if`没有执行下面的命令。

即使您的文件*不是*为导入而设计的，将文件的执行部分放在 下仍然是一个好习惯`if __name__ == "__main__"`，因此您的文件很容易适应成为一个模块。

# javascript - 为什么 form.reset() 在此页面上回发后不起作用？

> ID：11267752
> 
> 赞同：4
> 
> 时间：2012-06-29T19:22:33.383
> 
> 标签：javascript, webforms, postback, reset

我班上的一个学生引起了我的注意，我对此没有任何解释——我搜索后也找不到。

单击提交按钮后，重置按钮不起作用。如果已通过发布请求请求资源，就好像浏览器会阻止重置。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">

</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <fieldset>
            <legend>User Form</legend>
            <label for="Username"></label>
            <asp:TextBox ID="Username" runat="server"></asp:TextBox>
        </fieldset>
        <asp:Button runat="server" Text="Submit" />
        <input type="button" onclick="window.document.forms[0].reset()" value="reset" />
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T08:47:22.913

当您单击重置时，条目将重置为默认值。默认值是服务器在第一种情况下呈现的值，它是空字符串，但在发布后的值。（http 是无状态协议）如果您尝试编辑发布的值然后单击重置，您将看到原始发布的值将被恢复。

# jquery - “标签输入”插件上的 Jquery 验证

> ID：11267755
> 
> 赞同：8
> 
> 时间：2012-06-29T19:22:51.120
> 
> 标签：jquery, jquery-validate

我正在使用流行的[Bassistance jquery validate 插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation)来验证我的表单。在同一个表单上，我正在使用[xoxco 的 jQuery Tags Input Plugin](http://xoxco.com/projects/code/tagsinput/)。

我能够验证表单上的所有表单字段，但“标签输入”插件正在使用的字段除外。

原因是，原始输入被隐藏，插件绘制了新输入。

> **[jsFiddle 示例](http://jsfiddle.net/kKyAQ/8/)**

将我的验证样式应用于标签输入的任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T18:41:15.713

两个问题：

1.  您的所有字段都必须有一个`name`. 如果该属性不存在，验证将无法正常运行。
2.  您必须验证您的案例中的隐藏字段。您想要做的是用于`ignore: []`包含隐藏字段的验证。

总而言之，您的代码应如下所示：

**HTML：**

```
<form id="someForm" name="someForm" method="post">
    <input type="text" name="required-field" class="required"/>
    <input id="tagsx" type="text" name="tags" class="required" />
    <input type="submit" value="submit"/>
</form> 
```

**JavaScript：**

```
$(document).ready(function () {
    $("#someForm").validate({
        ignore: []
    });
    $('#tagsx').tagsInput({
        width: 'auto',
        autocomplete_url: 'http://xoxco.com/projects/code/tagsinput/test/fake_json_endpoint.html'
    });
}); 
```

**示例：http:** [//jsfiddle.net/5eC5B/](http://jsfiddle.net/5eC5B/)

请注意，您必须使用`errorPlacement`或类似方法才能正确显示错误消息。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-08T20:20:45.063

您可以通过使用将验证您的标签字段的自定义方法验证虚拟文本字段来做一个技巧。

### HTML：

```
<form id="someForm" name="someForm" method="post">
    <input type="text" id="txt1" name="txt1"/>
    <input id="tagsx" name="tagsx" type="text" />
    <input id="dummy" name="dummy" type="text" /><!-- dummy text field -->
    <input type="submit" value="submit"/>
</form> 
```

### CSS：

```
/*To hide dummy text field*/
#dummy{
    visibility: hidden!Important;
    height:1px;
    width:1px;
} 
```

### JavaScript：

```
$(document).ready(function () {

    $.validator.addMethod("checkTags", function(value) { //add custom method
        //Tags input plugin converts input into div having id #YOURINPUTID_tagsinput
        //now you can count no of tags
        return ($("#tagsx_tagsinput").find(".tag").length > 0);
    });

    $("#someForm").validate( {
        rules: {
            txt1:"required",
            dummy:"checkTags"
        },
        messages: {
            txt1: "Required",
            dummy: "Required"
        }
    });

    $('#tagsx').tagsInput({
        width: 'auto',
        autocomplete_url: 'http://xoxco.com/projects/code/tagsinput/test/fake_json_endpoint.html' 
    });
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-04T11:14:35.773

validate-Plugin 的默认设置`ignore: ":hidden"`用于`jQuery.not()`从忽略选项中排除所有内容。

如果要包含隐藏字段，可以使用：

```
$("#myform").validate({
   ignore: ""
}); 
```

* * *

在您的情况下，请使用此 Javascript 代码：

```
$(document).ready(function () {
    $("#someForm").validate({
       ignore: ""
    });
    $('#tagsx').tagsInput({
        width: 'auto',
        autocomplete_url: 'http://xoxco.com/projects/code/tagsinput/test/fake_json_endpoint.html'
    });
}); 
```

* * *

**更新：**正如我在验证代码中看到的，`name`强烈需要 -Attribute，因为插件将所有内容都存储在`name`. 即使您只添加`ignore: ""`到代码中，它也会给出一个验证错误，因为它的存储方式相同`name`并且名称为`null`.

这是一个有效的 JSFiddle：

> [**JSFiddle**](http://jsfiddle.net/kKyAQ/15/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-02T16:53:36.360

jQuery validate 默认忽略不可见的字段。要覆盖此行为，请使用`$("#someForm").validate({ignore:""});`

# php - 异步设计：从 mySQL 推送到 Web 层？

> ID：11267758
> 
> 赞同：0
> 
> 时间：2012-06-29T19:22:59.467
> 
> 标签：php, jquery, mysql, design-patterns, asynchronous

我正在尝试使用 jQuery/AJAX、PHP 和 mySQL 构建基于聊天的移动应用程序。我不希望客户端移动设备必须每秒轮询服务器上的 PHP 脚本以检查是否有新的聊天消息到达，因此我使用 AJAX 的“长轮询”范例来保持连接打开时间更长并且实现更多的推式架构。以下是服务器上的 PHP 代码：

```
$newMessage = CheckForNewMessage();
while ($newMessage == NULL) {
  usleep(10000);
  $newMessage = CheckForNewMessage();
}
$response = array();
$response['msg'] = $newMessage;
echo json_encode($response); 
```

然而，正如所写，这个 PHP 代码相当定期地轮询 mySQL DBMS（仍然是一个拉模式）。我想知道是否有一种方法可以在*此*连接上实现推送范例（即，在 Web 层和数据层之间）。当新消息添加到表中时，我可以使用触发器或类似的东西来实现这一点吗？有没有人有这样做的经验？任何指针或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:40:35.443

好吧，理论上可以编写一个[用户定义的函数](http://dev.mysql.com/doc/refman/5.5/en/adding-udf.html)，该函数将作为某个 DB 操作的触发器，并（通过套接字）调用一些外部 PHP 脚本。

但是，我想，你仍然会有一个冲突：这个 PHP 脚本应该如何与你的代码交互？问题是您的架构仍然是“拉动”导向的：只有这次拉动是在某个周期性的时间范围内进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T22:06:02.233

MySQL 只是不适合这种通信。即使使用支持推送通知的 MS SQL，我仍然会认为使用它是一个错误。关系数据库用于**存储**数据。不**发货**。

我建议使用一些 XMPP 服务器或（如果不可能的话）消息队列而不是 MySQL。请参阅[http://php.net/manual/en/function.msg-get-queue.php](http://php.net/manual/en/function.msg-get-queue.php)作为开始。

# javascript - 这是什么网络效果

> ID：11267759
> 
> 赞同：3
> 
> 时间：2012-06-29T19:23:01.560
> 
> 标签：javascript, jquery, web

当您的堆栈溢出声望达到 1000 时，您将获得一张可消耗的用户卡

![在此处输入图像描述](../Images/3d61f562a6ccdc80c1e274b813d87da8.png)

当您将鼠标悬停在卡片上时。

我怎样才能重现这种效果？怎么称呼？我的猜测是它是一种 Jquery 方法，但如果是这样的话，有人可以指出我正确的方向，因为我正在寻找它，但无法得到我需要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:27:06.913

我不知道这是否是他们使用的，但[CSS3 过渡动画](http://www.w3schools.com/css3/css3_transitions.asp)将是一种简单的、无需编程的方式来做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:42:18.487

你所追求的一个非常简单的例子是这里[http://jsfiddle.net/RjpLt/](http://jsfiddle.net/RjpLt/)

这足以让你开始。

**更新**

现在有了 ccs 动画：http: [//jsfiddle.net/RjpLt/1/](http://jsfiddle.net/RjpLt/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-29T19:30:50.683

简而言之：

当弹出窗口被触发时，`<div>`带有适当内容的 a 会被动态添加到 DOM 内的某处（很可能是 Javascript 定位弹出窗口并创建它）。这个元素一开始很小，然后动画到它的最终尺寸。同时，CSS 规则指定弹出窗口的视觉外观。当鼠标离开弹出区域时，`<div>`会从 DOM 中移除，从而使弹出窗口消失。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T19:24:28.873

我确定它确实使用了 jQuery，而且我打赌它是“动画”的：

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

动画样式可能是大小和背景颜色，以及该区域发生的其他事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-29T19:25:46.280

我认为这很简单`$('#container).show('slow');`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-29T19:33:33.620

由于您拍摄的是静态图像，因此很难判断到底发生了什么。这是我的猜测：

它使用 Hover 来触发事件： [http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

然后 Show 显示一个隐藏的 div： [http ://api.jquery.com/show/](http://api.jquery.com/show/)

就像是：

```
$('a.show-profile').hover(function(){ 
    $('#profile').show();
}); 
```

#profile 需要通过 css "display: none" 或 $('#profile').hide(); 提前隐藏。 [http://api.jquery.com/hide/](http://api.jquery.com/hide/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-29T19:45:31.400

我的猜测是（来自来源）：

`StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32"`

`$(b).closest(".user-hover").find(".user-details a").attr("href"));return!b?null:"/users/user-info/"+b[1]},cache:!0,id:"user-menu",showing:f,removed:c}))}}}();`

`b.fadeOutAndRemove()):setTimeout(p,500)};b.animate({width:j,height:a,top:f.top+k.top},200,p);`

但正如我所说，我对此很陌生，所以它甚至可能不相关，但它是一个`Animated onmouseover on the gravatar`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-30T00:04:55.110

我创建了 2 个解决方案：

## *[jsBin 演示](http://jsbin.com/ukibaf/4/)*

*   **使用所有**相关内容动态填充 DIV 卡。

*   `display:none`消除CSS 中不需要的内容、段落或元素
*   只有一张“大”卡片会改变它在页面上的位置，克隆并在悬停时显示完整内容 - 为该元素准备`display:block;`所有内容的 CSS。

悬停时：

*   获取悬停卡片的位置
*   抓取所有“小”卡片内容并填充一张更大的卡片
*   添加悬停意图以等待约 180 毫秒，然后再显示
*   将大卡片放在小卡片上并`.show(600)`用来展示它。
*   如果鼠标离开大卡使用`.hide()`

jQuery：

```
$('body').append('<div id="userCard"><div id="userCardContent"></div>');

var $hoveredImg;
$('.userCardMini').on('mouseenter','img',function(e){
   $hoveredImg = $(this);
   var thisSrc = $hoveredImg.attr('src').split('s=')[0];
   var posX = $hoveredImg.offset().left-10;
   var posY = $hoveredImg.offset().top-10;
   $('#userCardContent').html( $hoveredImg.parent().html() );
   $('#userCardContent').find('img').attr('src', thisSrc+'s=64&d=identicon&r=PG');
   var t = setTimeout(function() {  
     $('#userCard').css({left:posX, top:posY}).show(600);
   }, 200);     
   $hoveredImg.data('timeout', t);  
}).on('mouseleave',function(){
  clearTimeout($hoveredImg.data('timeout'));
});
$('#userCard').mouseleave(function(){
  $(this).stop(1,1).hide();
}); 
```

HTML：

```
<div class="userCardMini" data-user="383904"></div>
<div class="userCardMini" data-user="1063093"></div> 
```

CSS：

```
 .badge{
    width:6px;
    height:6px;
    border-radius:10px;
    font-size:11px;
    display:inline-block;
    margin:2px;
  }
  .gold{background:gold;}
  .silver{background:silver;}
  .bronze{background:#cc9966;}

  .userCardMini{
    width:200px;
    height:32px;
    /*background:#eee;*/
    margin:4px;
    clear:both;
  }
  a{color:#27f;}
  img.userImg{
    cursor:pointer;
    float:left;
    margin-right:10px;
    box-shadow:1px 1px 3px -1px #999;
  }
  .userDetails, .userLocation{display:none;}
  /* user card - BIG ONE */
  #userCard{
    position:absolute;
    top:0;
    left:0;
    width:280px;
    box-shadow:1px 1px 3px -1px #999;
    border-radius:3px;
    background:#666;
    color:#eee;
    display:none;
  }
  #userCardContent{
    width:260px;
    margin:10px;
  }
  #userCardContent a{color:#fff;}
  #userCard .userDetails,
  #userCard .userLocation{
    display:block;
    margin-bottom:4px;
  } 
```

* * *

另一个解决方案（我最喜欢）
是使用 DIV 元素的 CSS 和 z-index，方式是 - 将父元素悬停，我们从下面为内容（子元素）元素设置动画

## *[jsBin demo 2 - 简单的解决方案](http://jsbin.com/iregik/edit#javascript,html,live)*

这一点jQuery：

```
var $desc;
$('.userCard').hover(function(){  

  $desc = $(this).find('.description');
  $(this).css({zIndex:'3'});
   var t = setTimeout(function() {
      $desc.show('slow');
  }, 150);      
  $(this).data('timeout', t);   

},function(){
  $(this).css({zIndex:0});
  clearTimeout($(this).data('timeout'));
  $desc.hide();

}); 
```

HTML：

```
 <div class="userCard">
    <div class="initial">
      <img src="http://placehold.it/26x26/f7b" /><h2>User name 1</h2>
    </div>
    <div class="description">
      <div class="description_content">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.
      In et neque quam, vel dapibus neque. Praesent rutrum ultricies sodales.       
      </div>
    </div>
  </div> 
```

CSS：

```
 .userCard{
    position:relative;
    padding:10px;
    width:200px;
    margin:10px;
  }
  .initial{
    position:relative;
    cursor:pointer;
    z-index:2;
  }
  .userCard img{
    float:left;
    margin-right:10px;
    box-shadow: 1px 1px 3px -1px #999;
  }
  .description{
    background:#eee;
    position:absolute;
    top:0px;
    left:0px;
    padding:10px;
    clear:both;
    display:none;
  }
  .description_content{
    padding-top:37px;
    position:relative;
    width:200px;
  } 
```

# javascript - 复制 API 密钥是否意味着身份被盗？

> ID：11267762
> 
> 赞同：1
> 
> 时间：2012-06-29T19:23:15.860
> 
> 标签：javascript, security, api, authentication, key

让我们选择早期版本的 Google Maps API：您必须将 API 密钥添加到 JavaScript Maps API 的后缀，该密钥可以与查看源代码一起复制并供其他人使用。

这里的诀窍在哪里？我错过了什么？

我不受谷歌地图本身的影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:25:16.160

该 API 密钥特定​​于某个 URL，并且只能在该 URL 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T22:08:51.890

You should check old answers before creating new ones! :) This subject has been asked several times like in here: [How does Google Maps secure their API Key? How to make something similar?](https://stackoverflow.com/questions/2256305/how-does-google-maps-secure-their-api-key-how-to-make-something-similar) .

The answer is: In order for request to be allowed the registered url for that API key should match with the HTTP referer header of the incoming request.

# apache - 重定向到 401 错误而不是身份验证的受保护文件夹

> ID：11267767
> 
> 赞同：0
> 
> 时间：2012-06-29T19:23:42.823
> 
> 标签：apache, .htaccess

我在重定向到受保护文件夹时遇到问题。有两个域：domain1.com 和 domain2.com 托管在两个不同的服务器中。两者都设置了将 www 添加到地址的 .htaccess 规则：

```
RewriteCond %{HTTP_HOST} ^domain1\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain1.com/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^domain2\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain2.com/$1 [R=301,L] 
```

并且两者都有一个受保护的文件夹 /admin 。

当我想以这种方式访问​​此文件夹时没有问题：

```
- http://www.domain1.com/admin
- http://www.domain2.com/admin 
```

但是当我尝试使用这些地址访问它们时：

```
- http://domain1.com/admin
- http://domain2.com/admin 
```

只有 domain1.com 正常工作，要求输入密码， **domain2.com 返回 401 ERROR**

```
--------------
--------------
root@vps:~# telnet domain1.com 80
Trying 1.1.1.1...
Connected to domain1.com.
Escape character is '^]'.
HEAD /admin HTTP/1.1
Host: domain1.com

HTTP/1.1 401 Authorization Required
Date: Fri, 29 Jun 2012 18:54:34 GMT
Content-Type: text/html
Connection: keep-alive
WWW-Authenticate: Basic realm="admin"
Accept-Ranges: bytes
Vary: Accept-Encoding
Server: Apache/2

Connection closed by foreign host.
--------------
--------------
root@vps:~# telnet domain2.com 80
Trying 2.2.2.2...
Connected to domain2.com.
Escape character is '^]'.
HEAD /admin HTTP/1.1
Host: domain2.com

HTTP/1.1 301 Moved Permanently
Date: Fri, 29 Jun 2012 18:52:19 GMT
Server: Apache/2
WWW-Authenticate: Basic realm="Panel Administracyjny"
Location: http://www.domain2.com/401.shtml
Vary: Accept-Encoding
Content-Type: text/html; charset=iso-8859-1

Connection closed by foreign host.
--------------
-------------- 
```

有什么问题怎么解决？如果 domain2.com 的情况，是否有可能错过 Connection: keep-alive 的一行？domain2.com 的管理员说：不可能将这种重定向到受保护的文件夹 - 但你知道 -.- 正如你在 domain1.com 看到的那样 - 所以我必须在告诉他应该修复什么之前确定.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:49:39.210

好的，这是解决方案：domain1.com 已禁用 ErrorDocument 401，这就是此重定向有效的原因 - 不幸的是，似乎无法使用已启用的 ErrorDocument 401 进行此类重定向。

# php - 是否存在关于 json_decode 在有效 JSON 字符串上返回 NULL 的 PHP 5.3 错误？

> ID：11267769
> 
> 赞同：3
> 
> 时间：2012-06-29T19:23:57.283
> 
> 标签：php, json

我为一个朋友的 wordpress 网站编写了一个 API，它依赖 JSON API 插件来获取她最近帖子的 JSON 提要。它运行了几个月完美无缺，但几天前，当她的共享主机切换到 PHP 5.3 时，它完全停止运行（当然，他们没有提醒他们的用户——他们为什么要提醒他们？）

我四处寻找，在接受 JSON 字符串并将解码的 JSON 对象返回给另一个函数的代码部分中发现了一个奇怪的错误。以前，代码（有效，我发誓！）是这样工作的：

```
 $json_string = file_get_contents($url_to_json_string);
    return json_decode($json_string); 
```

这开始返回 NULL，而 json_last_error 为 4（语法错误。）我检查了 utf8_encoding: 很好。我检查了 BOM 奇怪性（根据[这篇文章](https://stackoverflow.com/questions/689185/json-decode-returns-null-php)）：很好。[我在jsonlint.com](http://jsonlint.com)和[json.parser.online.fr](http://json.parser.online.fr)中验证了 JSON 字符串，它完全有效。没有杂散的实体，没有游荡的斜线。JSON 字符串本身很好，应该已经过验证。

然后，我将代码更改为：

```
 $json_string = file_get_contents($url_to_json_string);
    $json_object = json_decode($json_string);
    return $json_object; 
```

它奏效了。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:42:33.837

不可打印的字符必须是 JSON 字符串。下面使用：

```
json_decode( preg_replace('/[\x00-\x1F\x80-\xFF]/', '', $json_string);, true ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:31:40.720

这些链接可能适用：

*   [json_decode() 返回空问题](https://stackoverflow.com/questions/3110487/json-decode-returns-null-issues)

*   [https://github.com/sebastianbergmann/phpunit/issues/142](https://github.com/sebastianbergmann/phpunit/issues/142)

*   [https://bugs.php.net/bug.php?id=45791](https://bugs.php.net/bug.php?id=45791)

PS：

我刚刚通过几个验证器运行了您的代码段：我没有*发现*任何问题......但您可能会：

*   [http://www.functions-online.com/json_decode.html](http://www.functions-online.com/json_decode.html)

*   [http://jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T08:59:54.173

jsonDecode 中存在一般错误，其中 "id":"google:1111111111111111111111111" 被翻译为 "id:"google:"11111111111111111111111111"" 导致语法错误。

要修复它，该行必须是： $json_without_bigints = preg_replace('/:\s*(-?\d{'.$max_int_length.',})/', ': "$1"', $input);

（它必须是：在前面的正则表达式中）。

# jquery - jQuery AJAX 图表对象引用传递？

> ID：11267771
> 
> 赞同：0
> 
> 时间：2012-06-29T19:24:07.970
> 
> 标签：jquery, ajax, reference, highcharts

我正在使用 HighCharts 库创建图表，然后通过 jQuery`getJSON()`函数对其进行更新。但是，当我收到更新的信息时，我不知道如何更新图表。我有一个调用来`setInterval(function() { update_chart(chart); }, 2500);`更新图表对象，方法是首先在 处销毁图表`chart`，通过调用获取新数据`getJSON()`，然后在成功触发的匿名函数中重绘图表。问题是，在我更新一次、重绘图表后，我失去了对新图表的引用。有没有办法把它传回去？

另一种方法是将图表的引用传递给成功函数，并简单地更新那里的数据系列。但是，我似乎无法获取成功函数来获取图表参数。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T04:40:54.220

您需要将图表声明为全局变量。这样你就可以在javascript中的任何地方访问它。查看 highcharts 团队提供的说明[http://www.highcharts.com/documentation/how-to-use#live-charts](http://www.highcharts.com/documentation/how-to-use#live-charts)

# regex - 正则表达式的差异 (Regex)

> ID：11267777
> 
> 赞同：-1
> 
> 时间：2012-06-29T19:24:22.523
> 
> 标签：regex

以下正则表达式有什么区别？

1.  `/[0-9]/`匹配数字，对吗？
2.  `/[a-z]/`匹配小写字母，对吗？
3.  `/[A-Z]/`匹配大写字母，对吗？
4.  `/[^a-zA-Z0-9]/`火柴？
5.  `/.[!,@,#,$,%,^,&,*,?,_,~,:,;]/`仅匹配那些特殊字符，正确

那么#4 和#5 有什么不同呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:28:32.747

1.  `/[0-9]/`匹配一位数

2.  `/[a-z]/`匹配一个小写字母

3.  `/[A-Z]/`匹配一个大写字母

4.  `/[^a-zA-Z0-9]/`匹配除字母（小写/大写）或数字以外的任何一个字符

5.  `/.[!,@,#,$,%,^,&,*,?,_,~,:,;]/`匹配任何一个字符`.`后跟`[`和之间列出的任何一个字符`]` *（逗号也是其中之一，您不必多次列出它，它不是分隔符）*

6.  `/[!,@#$%^&*?_~:;]/``[`匹配和之间列出的任何一个字符`]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:28:11.367

3 匹配小写字母，[AZ] 匹配大写字母。4 可以重写为 [a-Z0-9] 5 包含 a 。在其匹配任何单个字符的字符组前面。

这些表达式都不包含开始或结束锚点，所以这些都意味着如果字符串包含该组中的某些内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:29:45.477

4 将匹配任何非字母数字字符。

5 将匹配任何字符（前导句点），后跟括号中的任何字符，不必*用*逗号分隔（你本质上是一遍又一遍地说你可以匹配逗号）

它们不一样，“不是字母数字”的情况更全面 - 例如，它将匹配括号`(`或插入符号`^`，您没有包含在数字 5 的选项中

# javascript - jQuery：如何检查以确保所有异步操作都已完成

> ID：11267785
> 
> 赞同：0
> 
> 时间：2012-06-29T19:24:53.557
> 
> 标签：javascript, jquery, callback

我有一个带有一堆复选框的网络表单；单击特定框时，它会显示/隐藏其中包含更多数据的特定 div。当 div 被正确隐藏/显示时，我运行格式化命令来正确组织和着色它们。

一些复选框依赖于其他复选框，并且将实施级联方案，因此有可能，甚至很可能，几个复选框将同时更改状态。

我决定采用捷径并以相同的方式处理所有复选框，而不是为每个复选框编写代码。我最终是这样的（使用 2 个复选框/ div 来说明这一点，还有更多）：

```
jQuery(document).ready(function () {

    alternateDivs();

    jQuery('#AccessCAS, #CAS_LELOCSpecific').on('click', function () {
        showHide();
    });

});

function showHide() {

    var theChecks = [
        {
            checkId: 'AccessCAS',
            divId: 'divCAS'
        },
        {
            checkId: 'CAS_LELOCSpecific',
            divId: 'divLELOC'
        }
    ];

        var pendingChanges = 0;

    for (i = 0; i < theChecks.length; i++) {
        var checked = jQuery('#' + theChecks[i].checkId).is(':checked');
        var visible = jQuery('#' + theChecks[i].divId).is(':visible')
        if (checked && !visible) {
            pendingChanges++;
            jQuery('#' + theChecks[i].divId).fadeIn(400, function () {
                pendingChanges--;
            });
        } else if (!checked && visible) {
            pendingChanges++;
            jQuery('#' + theChecks[i].divId).fadeOut(400, function () {
                pendingChanges--;
            });
        }
    }
//check for pending changes

}

function alternateDivs() {
    jQuery('.formTable:visible:odd').css('background-color', '#eeb');
    jQuery('.formTable:visible:even').css('background-color', '#eef');
} 
```

我有必要确保所有应该显示的 div 都能正确显示，这意味着它们必须在调用之前完全转换为可见/不可见状态`alternateDivs()`。你可以看到我设置了一个`pendingChanges`在 div 转换时递增和递减的值。

我想做的是设置一个异步进程来检查何时`pendingChanges`等于零，以及何时调用`alternateDivs()`. 我希望这是异步的，这样它就不会干扰用户体验。

我相信这可以通过某种回调来完成，但这远远超出了我的专业领域。我将如何设置和调用异步函数来检查以确保我的其他异步函数已完成，以及它们何时调用另一个函数并退出？

我希望这很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:32:04.360

在你的淡入淡出回调中加入一个 if 语句怎么样？

```
if(pendingChanges==0){ alternateDivs() } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:30:40.060

在异步加载操作结束后，您需要进行轮询操作，检查您已加载的每个 div 并确认它们都已完成。您将进行轮询，直到确认所有元素。

您还可以为每个加载操作设置“onSuccess”或“onComplete”事件以发布标志并在轮询器中使用该标志。

这是您将如何投票：

```
load1();
load2();
loadn();

(function poll(){
   setTimeout(function(){

   if (!allAreLoaded()){
     poll();
   }

  }, 30000);
})(); 
```

# mysql - MySQL一天内多个项目的单独计数

> ID：11267791
> 
> 赞同：3
> 
> 时间：2012-06-29T19:25:21.530
> 
> 标签：mysql

我试图一次显示一天的多个索赔的状态。例如，“date1”有 3 个声明。每个索赔都有不同的状态。如何显示“date1”内所有索赔的状态计数。即，我想按最早到最晚日期排序我的结果，然后有三列计算当天有多少索赔具有该状态。三个状态栏应加起来就是当天的索赔总数。这就是我希望它看起来的样子：（St1 - St3 代表独特的状态）

```
Date      St1 St2 St3
12-02-12 | 1 | 2 | 3
12-03-12 | 2 | 5 | 3
12-04-12 | 7 | 3 | 8 
```

我开始使用的查询看起来像这样，但它完全不正确。

```
SELECT dates, statuses, COUNT(*) AS St1 FROM table_dates GROUP BY dates; 
```

这是我试图只计算一种状态的尝试。认为我必须从某个地方开始。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:27:38.660

您想将状态添加到您的 GROUP BY：

```
SELECT dates, status, COUNT(*) AS cnt
FROM table_dates
GROUP BY dates, status 
```

这将使您的结果与您所要求的格式略有不同：

```
日期 | 状态 | cnt
2012-12-02 | 1 | 1
2012-12-02 | 2 | 2
2012-12-02 | 3 | 3
2012-12-03 | 1 | 2
2012-12-03 | 2 | 5
2012-12-03 | 3 | 3
2012-12-04 | 1 | 7
2012-12-04 | 2 | 3
2012-12-04 | 3 | 8

```

这可能是一种更好的格式，因为如果您稍后添加新状态，您的数据库架构、SQL 查询和客户端代码都不需要更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:30:46.343

你可以做的是这样的：

```
SELECT SUM(if(statuses = st1,1,0)) as st1, 
SUM(if(statuses = st2,1,0)) as st2, 
SUM(if(statuses = st3,1,0)) as st3 
    FROM table_dates 
    GROUP BY dates; 
```

# ios - uitableview 中的异步图像加载

> ID：11267794
> 
> 赞同：2
> 
> 时间：2012-06-29T19:25:37.517
> 
> 标签：ios, facebook, uitableview, uiimageview

我目前正在将 Facebook 集成到我的应用程序中，并且目前正在加载登录用户的朋友的个人资料图片。我在 UITableView 中呈现这些用户，在每个单元格中显示朋友的图片和姓名。我将 UIImageView 子类化了，当在 cellForView 方法中处理相应的单元格时，图像被异步加载。

但是，当我上下滚动几次时，图像闪烁，首先加载了一些错误的图片，显示了很短的时间，然后加载了正确的图像。所以我认为当单元格在视图之外时，我必须寻找一种方法来停止加载图像。

有没有人可以帮助我解决这个问题并给我一个解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T23:23:11.867

您可以关闭任何已加载的图像（以及正在进行的加载操作，如果有）
`- (void)prepareForReuse method of UITableViewCell`。

我强烈建议重用单元格，没有它你就没有机会获得平滑的滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:53:02.497

您可以考虑不重复使用单元格。但是，如果您有很多需要加载的表格单元格（例如，很多朋友），这可能会影响性能。由于每个单元格都有自己的图像，因此不会因单元格重复使用而发生闪烁。

要查看的另一件事是图像的文件大小。它们可能比您实际展示它们的尺寸大。如果有办法获得更小的版本，那肯定也会有所帮助。

第三，您可以将图像视图设置为`tableView:willDisplayCell:forRowAtIndexPath`. 闪烁可能仍然会发生，但使用默认图像，它看起来比其他人的图片更好。事实上，我认为这就是 Facebook 应用程序所做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T20:07:13.893

当单元格被隐藏时，它会从`tableView`. 所以你可以在你的`UITableViewCell`派生类方法中重写`willMoveToSuperview:`

```
- (void)willMoveToSuperview:(UIView *)newSuperview
{
    [super willMoveToSuperview:newSuperview];
    if(newSuperview == nil) {
        // Stop image downloading
    }
} 
```

# python - 同一台计算机上的多个套接字线程

> ID：11267796
> 
> 赞同：0
> 
> 时间：2012-06-29T19:25:41.617
> 
> 标签：python, multithreading, sockets

我正在学习 Python 上的多线程和套接字，但遇到了一个问题。我正在尝试创建一个服务器，该服务器将从同一台计算机上的多个客户端接收和打印数据。到目前为止，这是我的服务器代码：

```
import socket
import threading

def conn(HOST, PORT, BUFSIZE):
    serversock = RecvConnection(HOST, PORT) 
    serversock.listen(BUFSIZE)

class RecvConnection(object):

    def __init__(self,host, port, sock=None):
        if sock == None:
            self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        else:
            self.sock = sock

        self.sock.bind((host, port))    

    def listen(self, buffsize):
        self.sock.listen(5)
        clisock, (remhost, remport) = self.sock.accept()
        while 1:
            print clisock.recv(buffsize)

HOST = 'localhost'
PORT = 21567
BUFSIZ = 1024

threading.Thread(target=conn, args=(HOST, PORT, BUFSIZ,)).start() 
```

问题是我的服务器似乎只处理了我的客户端文件的一个实例，因此它只显示我的客户端的第一个实例发送的数据。这是我的客户代码：

```
import socket
import threading

class CreateConnection(object):

    def __init__(self, sock=None):
        if sock is None:
            # Create a socket
            self.sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        else:
            self.sock = sock

    def connect(self, host, port):
        # Connect to host, port
            self.sock.connect((host, port))

class Communication(CreateConnection):

    def sendMsg(self, msg):
        self.sock.send(msg)

HOST = 'localhost'
PORT = 21567

cltsock = Communication()
cltsock.connect(HOST, PORT)
while 1:
    msg = raw_input('> ')
    cltsock.sendMsg(msg) 
```

任何人都可以帮助我实现这一目标吗？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:31:22.133

当服务器接受来自客户端的连接时，它应该启动一个线程来处理该连接，然后循环以等待下一个客户端。

[编辑]

这是我的意思的一个例子：

```
def listen(self, buffsize):
    self.sock.listen(5)

    while True:
        # Listen for a new client.
        clisock, (remhost, remport) = self.sock.accept()

        # Start listening to the new client.
        t = threading.Thread(target=self._handle_client, args=(clisock, buffsize))
        t.start()

def _handle_client(self, clisock, buffsize):
    while True:
        received = clisock.recv(buffsize)
        if not received:
            # The client has closed the connection.
            break

        print received 
```

# java - 哪些布局和容器适合制作像 Tiled 这样的 GUI？

> ID：11267798
> 
> 赞同：4
> 
> 时间：2012-06-29T19:25:54.240
> 
> 标签：java, swing, user-interface, layout, containers

我打算使用名为[Tiled](http://www.mapeditor.org/)的程序，但决定不使用，因为它会将所有内容都变成块并限制了一点自由。

我的问题是你会使用哪个布局管理器来制作看起来像 Tiled 的东西。我真的很喜欢这种感觉，当我制作这个工具时，我希望它在我移动组件时也能起到类似的作用。

**这是我所做的和正在思考的：**

*   有一个包含菜单栏和内容窗格的 JFrame。（完美的自动取款机）
*   内容窗格是一个 BorderLayout。（完美的自动取款机）
*   内容窗格内部是一个工具栏，如下所示。（完美的自动取款机）
*   在工具栏中，我将有按钮显示为图像，也就是图标，并且可以像红色圆圈一样单击
*   内容窗格将包含两个 J 面板
*   第一个 J 面板将像黑色圆圈一样，将包含我将在那里绘制的地图
*   第二个 J 面板将包含图层、历史、地图集和图像等组件
*   第一个 J 面板将是中心，第二个 J 面板将是东

**这是我的问题：**

*   当我启动 GUI 时，我几乎没有得到任何正确的 JPanel，并且似乎无法让它变得更宽，除非我在其中包含 JList 之类的实际内容。

我要求你们都指导我你会做什么。虽然我之前制作过 GUI，但在选择布局管理器以及如何在这种特殊情况下准确使用它时，我还没有足够的经验知道如何真正处理这个问题。**我所需要的只是有关您将如何做以及为什么做的基本信息**，不需要任何代码。谢谢！

![平铺](../Images/c376adf4d2101a8980fed40ccb623d9e.png)

![我的程序像 Tiled](../Images/60e72aa8038882bb73baf7af3dc3c351.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:37:06.427

我建议使用[MigLayout](http://www.miglayout.com/)。它是一个非常强大且得到很好支持的第 3 方布局管理器。已经有（迄今为止没有成功）将它包含在 Java 中的请愿书。MigLayout 将允许您做任何您想做的事情，而无需做出任何妥协，并且使用更少的代码。我可以继续说下去，但是如果您只是浏览他们的演示和示例代码，您将自己看到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T20:02:04.333

让您的 JPanel 成为 JPanel 的子类并覆盖其 getPreferredSize() 方法，返回大多数（但不是全部）布局管理器都会尊重的适当大小。

# sql-server - 在用户定义的函数中创建、删除和插入临时表

> ID：11267804
> 
> 赞同：12
> 
> 时间：2012-06-29T19:26:09.083
> 
> 标签：sql-server, function

我正在尝试根据我的要求创建一个功能。

但是，当我创建或删除时`#tempTable`，它会给出一个错误：

> 在函数中无效使用副作用运算符“drop object”

我的理解是，我们不能在函数中进行`create`, `drop`or`insert`操作。`#temptable`

那是对的吗？

我的 SQL：

```
CREATE FUNCTION [dbo].[RT_ResultFunction]
(
    Id VARCHAR(4000)
)
RETURNS @RT_ResultFunction TABLE 
(   
    Id VARCHAR(20)
    , Name varchar(20)
    ,Balance Int
)
AS
BEGIN
    IF OBJECT_ID('tempdb..#tempTable') IS NOT NULL  
       DROP TABLE #tempTable

    SELECT Id, COUNT(Balance) 
    INTO  #tempTable
    'Balance' FROM Table1

    INSERT  @RT_ResultFunction 
        SELECT T1.ID,T1,NAME,T2,Balance 
        FROM    Table2 T1, 
                #tempTable T2
        WHERE T1.ID = T2.ID

    RETURN
END 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-29T19:34:29.953

这是正确的 - 你不能有副作用的陈述：

从这里： http: [//msdn.microsoft.com/en-us/library/aa175085 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa175085(v=sql.80).aspx)

> BEGIN...END 块中的语句不能有任何副作用。函数副作用是对具有函数范围之外的资源状态的任何永久更改，例如对数据库表的修改。函数中的语句可以进行的唯一更改是对函数本地对象的更改，例如本地游标或变量。对数据库表的修改、对函数非本地游标的操作、发送电子邮件、尝试修改目录以及生成返回给用户的结果集都是无法在函数中执行的操作的示例。

即使没有您的`DROP`声明，您会发现任何访问​​临时表的尝试都会给您消息（例如 a `SELECT ... INTO #TMP`）：

> 无法从函数内访问临时表

正如@Dems 指出的那样，您可以使用表变量。因为这些是变量，所以它们在函数范围内，因此没有副作用。

您的函数可能运行为：

```
...

BEGIN
    DECLARE @tempTable table (id varchar(20), rows int)

    insert @tempTable
    SELECT Id, COUNT(Balance) 
    FROM Table1

    INSERT  @RT_ResultFunction 
        SELECT T1.ID,T1,NAME,T2,Balance 
        FROM    Table2 T1, 
                @tempTable T2
        WHERE T1.ID = T2.ID

    RETURN END 
```

没有经过测试或任何东西，但你明白了要点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T20:49:38.247

我不知道为什么在这个函数中需要一个#temp 表，或者为什么它首先是一个多语句 TVF。以下将更有效率（虽然我不明白`@Id`参数的目的）：

```
CREATE FUNCTION [dbo].[RT_ResultFunction]
(
    @Id VARCHAR(4000)
)
RETURNS TABLE
WITH SCHEMABINDING 
AS
  RETURN 
  (
    SELECT T2.ID, T2.NAME, T1.Balance
    FROM
    (
      SELECT ID, Balance = COUNT(Balance) 
        FROM dbo.Table1 
        GROUP BY ID
    ) AS T1
    INNER JOIN dbo.Table2 AS T2
    ON T1.ID = T2.ID
  ); 
```

正如乔恩指出的那样，我*认为*它也可以重写如下，这实际上是我开始编写它的方式，但我无法确认其中任何一个是否真的返回了你试图返回的数据：

```
CREATE FUNCTION [dbo].[RT_ResultFunction]
(
    @Id VARCHAR(4000)
)
RETURNS TABLE
WITH SCHEMABINDING 
AS
  RETURN 
  (
    SELECT T2.ID, T2.NAME, Balance = COUNT(T1.Balance)
    FROM dbo.Table1 AS T1 
    INNER JOIN dbo.Table2 AS T2
    ON T1.ID = T2.ID
    GROUP BY T2.ID, T2.NAME
  ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T08:51:03.597

去掉#改为使用@其他方面我没测试过

# visual-studio-2010 - Visual Studio 调试器

> ID：11267805
> 
> 赞同：-1
> 
> 时间：2012-06-29T19:26:13.190
> 
> 标签：visual-studio-2010

我相信我看到了它，但不知道在哪里。

假设我有以下代码：

```
 if(c == 6)... 
```

我喜欢做的是通过调试器设置 c 说 5 看看会发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:28:51.137

在 . 上放置一个断点，从而在执行*之前*`if`停止执行，并在命令窗口中键入.*`c=5`*

 *或者，戴上手表`c`并在手表窗口中双击它的值。然后，您可以将其设置为您想要的任何内容（也应与快速监视窗口一起使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:30:43.540

可能最简单的方法是设置断点，当调试器停止时，将鼠标悬停在变量上并在显示值的弹出窗口中单击该值并在那里更改它。适合小调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:31:32.863

查看 MSDN 文档[How to: Edit a Value in a Variable Window](http://msdn.microsoft.com/en-us/library/aa6fy2x5.aspx)，解释如何实现您想要做的事情，以及更多有趣的相关信息。*

# sql - 如何编写一条 SQL 语句来返回每个根的所有子节点，使它们的深度变平？

> ID：11267811
> 
> 赞同：0
> 
> 时间：2012-06-29T19:26:57.713
> 
> 标签：sql, sql-server, sql-server-2008, tree, sql-server-2008-r2

我有下表和值：

```
create table TreeTable (
    ID int primary key,
    ParentID int not null,
    Name varchar(255) not null
)
insert into TreeTable([ID], [ParentID], [Name]) values
    (1, 0, 'rootA'),
    (2, 1, 'rootAchildA'),
    (3, 1, 'rootAchildB'),
    (4, 2, 'rootAchildAchildA'),
    (5, 2, 'rootAchildAchildB'),
    (6, 3, 'rootAchildBchildA'),
    (7, 3, 'rootAchildBchildB');
    (8, 0, 'rootB'),
    (9, 8, 'rootBchildA'),
    (10, 8, 'rootBchildB'); 
```

我想编写一个 T-SQL 语句，该语句将返回具有根 ID 的每个根的所有子节点；那是，

```
[Name]              [RootID]
'rootAchildA'       1
'rootAchildB'       1
'rootAchildAchildA' 1
'rootAchildAchildB' 1
'rootAchildBchildA' 1
'rootAchildBchildB' 1
'rootBchildA'       8
'rootBchildB'       8 
```

树的深度可以任意长。什么语句会返回这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:42:47.877

我故意过度概括了这一点，以便它可能在更多情况下有用。

```
WITH
  children
AS
(
  SELECT id, ParentID, name FROM treeTable

  UNION ALL

  SELECT
    treeTable.id, children.ParentID, treeTable.Name
  FROM
    children
  INNER JOIN
    treeTable
      ON treeTable.ParentID = children.ID
)
SELECT
  children.name,
  treeTable.ID    AS rootID
FROM
  treeTable
INNER JOIN
  children
    ON children.ParentID = treeTable.ID
WHERE
  treeTable.ParentID = 0 
```

# php - 如何将这些数据正确插入到我的 MySql 表中？

> ID：11267813
> 
> 赞同：-2
> 
> 时间：2012-06-29T19:27:07.327
> 
> 标签：php, mysql, phpmyadmin

我正在尝试制作一个将数据插入表格的表格，但它无法正常工作；每次它都会回显：“列数与第 1 行的值计数不匹配”。希望这里有人能告诉我我做错了什么。

我的 SQL 表：

```
CREATE TABLE IF NOT EXISTS `products` (
 `serial` int(11) NOT NULL AUTO_INCREMENT,
 `name` varchar(20) COLLATE latin1_general_ci NOT NULL,
 `description` varchar(255) COLLATE latin1_general_ci NOT NULL,
 `price` float NOT NULL,
 `picture` varchar(80) COLLATE latin1_general_ci NOT NULL,
  PRIMARY KEY (`serial`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci AUTO_INCREMENT=7 ; 
```

我的表格：

```
<?php
include('config.php');

 echo '<h1 style="font-size:20px;">Sieraad toevoegen</h1>';
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if (empty($_POST['naam']) || empty($_POST['prijs'])) {
        echo '<span style="color:red"><b>Niet alle velden zijn ingevuld!</b></span>';
    } else {
        mysql_query("INSERT INTO products (name, description, picture, price) VALUES ('$_POST[naam]','$_POST[beschrijving]','$_POST[foto]', '$_POST[prijs]', NOW())") or die (mysql_error());
        echo '<span style="color:green"><b>Het sieraad is succesvol toegevoegd!</b></span>';
    }
}
echo '<form method="post" target="_self">';
echo '<input type="hidden" name="serial">';
echo 'Naam van sieraad:<br><input type="text" name="naam"><br>';
echo 'Beschrijving:<br><textarea type="text" maxlength="250" name="beschrijving" rows="6" cols="37"></textarea><br>';
/**echo '<input name="MAX_FILE_SIZE" value="102400" type="hidden">';**/
echo 'Foto:<br><input type="text" name="foto"><br>';
echo 'Prijs:<br><input type="text" name="prijs" maxlength:"7"><br>';
echo '<input type="submit" value="Toevoegen" onclick="this.value=\'Sieraad wordt verwerkt...\';"> <input type="reset" value="Wis velden">';
echo '</form>'; 
?> 
```

**编辑：好的，并没有真正考虑过第一篇文章，但现在我改变了一切，它仍然无法工作..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:31:22.433

检查您的查询

```
mysql_query("INSERT INTO products (naam, beschrijving, prijs) VALUES
('$_POST[naam]','$_POST[beschrijving]','$_POST[prijs]', NOW())") or die (mysql_error()); 
```

您正在为 3 个变量传递 4 个参数....它们必须相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:31:24.063

将您的表单操作设置为当前的 php 文件，或者您可以将其保留为没有操作属性。（不要设置`action = ""`它违反 HTML5 规范。）

同样在您的 SQL 语句中`INSERT INTO products (naam, beschrijving, prijs) VALUES ('$_POST[naam]','$_POST[beschrijving]','$_POST[prijs]', NOW())`，您列出了 3 个字段和 4 个输入。最好让字段的数量与输入的数量相匹配。

最后，确保您的输入语句字段名称与您的 MySQL 表中的表定义匹配。“名称”不等于“naam”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:30:41.797

插入查询中的列名与表架构不匹配。您应该在 die() 上看到列错误。

# regex - Vim：手动取消缩进

> ID：11267815
> 
> 赞同：0
> 
> 时间：2012-06-29T19:27:08.503
> 
> 标签：regex, vim, indentation

我想在 Vim 中使用替换来手动取消缩进（而不是做 <）

所以我这样做：

```
:%s/^(^I)?//g 
```

但它没有找到模式。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:36:53.713

您可能需要使用`\(`and`\)`而不是`(`and `)`。此外，请确保`^I`是单个字符（例如，使用 control-v TAB 创建）而不是两个（例如，使用 '^' 和 'I' 创建）。最后，我不确定您是否甚至需要/想要`?`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:39:20.657

Vim 不理解您似乎使用的 Perl-ish 正则表达式语法。一定是：

```
%s/^\t\?// 
```

不是必需的`(...)`，必须写为`\(...\)`。除了`\t`，您还可以按`Ctrl`+ `V` `Tab`，或使用通用原子作为空格`\s`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T21:28:29.160

我意识到这个问题要求替换，但我觉得有必要提出一些提供类似功能的前命令：

*   为整个文件减少 1 级缩进：`:%<`
*   为第 1-5 行减少 1 级缩进：`:1,5<`
*   为匹配模式的行减少 1 级缩进：`:g/pattern/<`
*   删除所有缩进：`:%left`或`:%le`简称

如需更多帮助，请参阅：

```
:h :<
:h :g
:h :left
:h :range 
```

# javascript - Dijit 模块脚本未正确添加；路径不正确

> ID：11267818
> 
> 赞同：0
> 
> 时间：2012-06-29T19:27:19.807
> 
> 标签：javascript, dojo

**使用 Dojo 1.7.2**

Dojo 初学者，尝试制作一个简单的自定义小部件。

根据教程，我创建了一个具有此定义的模块：

```
define(['dojo/_base/declare', 'dijit/_Widget', 'dijit/_Templated', 'dojo/text!./templates/groupNode.html'], ... 
```

我这样称呼它：

```
require(['modules/groupNode', 'dojo/domReady!'], ... 
```

我的 dojoConfig 看起来像这样：

```
var dojoConfig = {
    async: true,
    baseUrl: "./",
    packages: [
        { name: "dijit", location: "//ajax.googleapis.com/ajax/libs/dojo/1.7.2/dijit" },
        { name: "dojo", location: "//ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo" },
        { name: "modules", location: "modules" }
    ]
}; 
```

但是，**在页面加载之后**，这个模块永远不会完成定义；当我检查页面源时，我看到脚本包含如下所示：

```
<script type="text/javascript" charset="utf-8" src="modules/groupNode.js">
<script type="text/javascript" charset="utf-8" src="../dijit//_Widget.js">
<script type="text/javascript" charset="utf-8" src="../dijit//_Templated.js"> 
```

显然，`dijit`模块没有计算出正确的路径，也没有正确加载。

其他仅使用`dojo`模块的自定义模块可以正常工作。

控制台中**没有**记录错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:59:06.603

我以前从未在[配置](http://dojotoolkit.org/reference-guide/1.7/dojo/_base/config.html#dojo-config)中使用过包。我一直使用 modulePaths。下面是一个配置 Dojo 的示例：

```
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.7/dojo/dojo.js" 
  data-dojo-config="
    isDebug: true, 
    parseOnLoad: false,
    baseUrl: '/',
    modulePaths: {modules: 'modules'}
"></script> 
```

所以这意味着在 web 目录的根目录中，存在一个名为 modules 的子目录，这就是您的自定义 javascript 所在的位置。

# bash - 使用 Bash 读取的 RFID USB 阅读器终端

> ID：11267827
> 
> 赞同：0
> 
> 时间：2012-06-29T19:28:02.727
> 
> 标签：bash, arduino, rfid

我购买了[一个 RFID USB 套件](http://www.sparkfun.com/tutorials/243)，但无法使用以下 Bash 脚本读取 RFID ID。

```
#!/bin/bash

while [ read -r rfid ] ; do

#URL=http://www.mainpage.us/rfid/status.php?number=$rfid

#curl --request POST $URL

echo $rfid
sleep 1

done < /dev/cu.usbserial-A600JNHR 
```

根据终端，RFID 应该可以正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:15:48.763

`[`是一个命令。既然要使用`read`，就不要尝试使用`[`。

# design-patterns - 这是一种设计模式吗？如果有，它的名字是什么？

> ID：11267830
> 
> 赞同：1
> 
> 时间：2012-06-29T19:28:17.057
> 
> 标签：design-patterns, sdl, roguelike

我目前正在用 C++ 开发一个回合制 RPG（类似流氓），并且我在我的代码中创建了一个看起来像某种设计模式的简洁架构，因为我记得在其他一些项目中看到过这样的代码结构。我想知道这是否是我偶然发现的某种设计模式，如果是，它的名称是什么。我在程序的其他部分特意应用了一些模式，例如Factory和Singleton，但下面是对程序另一部分的粗略描述，我不知道是不是模式：

**我有一个名为GameElement**的基类，它是可能出现在游戏字段中的每个对象的根。这个类实现了所有子类继承的关于四处移动、检测碰撞等的基本和复杂的行为，因为无论元素的类型如何，它都是常见的行为。另外，它有 2 个虚拟方法，默认情况下什么都不做，但可以被子类覆盖：**handleCollision(GameElement* e)**和**handleTurn()**。可以重新实现handleCollision方法，**以便**对象在与另一个对象（尤其是玩家）发生碰撞时知道该怎么做，以及方法**handleTurn**存在，以便对象有机会在轮到他们时做他们想做的任何事情。到目前为止，我已经创建了几个子类，即**SolidElement**、**PushableElement**、**FighterElement**（用于玩家和敌人）、继承 FighterElement 的**PlayerElement**（玩家）和也继承**FighterElement**的**EnemyElement**（万恶之根**）**。

还有一个名为**GameEngine的类，它在****run()**方法中封装了游戏循环（也有 SDL 事件循环） 。这是此方法的（相当短的）实现：

```
void GameEngine::run()
{
    SDL_Event evt;

    while ( running ) {
        handlePlayerCollisions();
        handleTurns();
        updateScreen();
        delay();

        SDL_PollEvent(&evt);

        if ( evt.type == SDL_KEYDOWN )
            handleKeyInput( evt.key.keysym.sym );
            continue;
    }
} 
```

在游戏循环中，它调用**handlePlayerCollisions**，它有一个循环通过当前场景中的整个**GameElement*容器，在每个容器中调用****handleCollision(player)**，这样如果该元素与玩家发生碰撞，取决于元素的类型，它可以对玩家做一些事情，例如伤害、挡住他的去路、移动（即被推动），或者类在其**handleCollision**方法中实现的任何其他事情。此外，调用了方法**handleTurns ，它的作用与****handlePlayerCollisions**几乎相同，只是它调用**了 handleTurn**在每个元素中，以便他们可以做自己喜欢的事情。另一个调用的方法是**updateScreen**，它完全按照它的名字所说的那样做。最后一件事是用于处理按键输入的 SDL 事件循环。

如果这个架构是某种设计模式，并且如果我知道它是什么模式，那么我在其他项目中使用它会容易得多，并且在我需要或有的时候向其他人解释它会花费更少的时间至。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T10:26:44.010

不完全是您所拥有的，但许多模拟器的模式基于[OODA 循环](http://en.wikipedia.org/wiki/OODA_loop)- 观察、定向、决定、行动 - 或变体 Sense Decide Act 。在具有可视化的游戏或模拟器中，您将渲染标记到每个循环周期中。

对于您的游戏，`handlePlayerCollisions()`是观察步骤的一部分 - 每个组件都在确定它是否与玩家在同一个位置。大概`handleTurns()`有决定跟随或逃离玩​​家，以及其他决定和行动。`updateScreen`呈现当前游戏状态。将行动与观察和决定分开允许模拟从已知状态计算所有观察，然后根据已知观察计算决策，然后根据这些决策计算动作，这意味着您不会扭曲模拟，因此后面的实体正在观察早期实体的行动结果同一个周期。但是由于您仅限于仅观察玩家并集中观察、决定和行动，因此您没有这种保证（除非`updateScreen`还包括更新模拟状态）。

游戏中的实体是单一的深层层次结构、组件的聚合还是智能行为的协调是另一个讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T10:01:13.113

您描述的方法是“模板方法”（GoF）模式 [http://www.vincehuston.org/dp/template_method.html的实现](http://www.vincehuston.org/dp/template_method.html)

# css - 具有二级子菜单背景/加载问题的 CSS 菜单

> ID：11267834
> 
> 赞同：0
> 
> 时间：2012-06-29T19:28:21.280
> 
> 标签：css, menu, drop-down-menu

使用此处找到的 css menumaker 菜单：http://cssmenumaker.com/menu/grey-impression-drop-down-menu-0[我](http://cssmenumaker.com/menu/grey-impression-drop-down-menu-0)正在尝试为子菜单创建第三级。

这是一个带有 html 和 css 的示例。[http://jsfiddle.net/it_levon/ew4MP/](http://jsfiddle.net/it_levon/ew4MP/)

通过 css 我能够将 > 添加到 .cssmenu li:hover ul{display:block} 所以它看起来像 .cssmenu li:hover > ul{display:block}。这会加载子菜单项，但它会突出显示“产品 1”和“蓝色”，就好像您选择了两者一样，即使与每个相关联的链接正常工作。我希望有人可以帮助我弄清楚如何只让用户悬停的项目保持突出显示，并且如果有可能让第 3 级子菜单向右移动，因此它看起来像在扩展。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:54:39.683

这应该工作...

[http://jsfiddle.net/it_levon/ew4MP/](http://jsfiddle.net/it_levon/ew4MP/)

```
<div class='cssmenu'>
<ul>
   <li class='active '><a href='index.html'><span>Home</span></a></li>
   <li><a href='#'><span>Products</span></a>
      <ul>
         <li><a href='#'><span>Product 1</span></a>
           <ul>
              <li><a href='#'><span>blue</span></a></li> 
              <li><a href='#'><span>red</span></a></li>               
           </ul>               
         </li>
         <li><a href='#'><span>Product 2</span></a>
           <ul>
            <li><a href='#'><span>green</span></a></li>
           </ul>               
         </li>
      </ul>
   </li>
   <li><a href='#'><span>About</span></a></li>
   <li><a href='#'><span>Contact</span></a></li>
</ul>
</div>​ 
```

**CSS...**

```
.cssmenu{
    border:none;
    border:0px;
    margin:0px;
    padding:0px;
    font: 67.5% 'Lucida Sans Unicode', 'Bitstream Vera Sans', 'Trebuchet Unicode MS', 'Lucida Grande', Verdana, Helvetica, sans-serif;
    font-size:14px;
    font-weight:bold;
    }
.cssmenu ul{
    background:#333333;
    height:35px;
    list-style:none;
    margin:0;
    padding:0;
    }
.cssmenu li{
    float:left;
    padding:0px;
    }
.cssmenu li a{
    background:#333333 url('images/seperator.gif') bottom right no-repeat;
    color:#cccccc;
    display:block;
    font-weight:normal;
    line-height:35px;
    margin:0px;
    padding:0px 25px;
    text-align:center;
    text-decoration:none;
    }
.cssmenu li a:hover, .cssmenu ul li:hover a{
    background: #2580a2 url('images/hover.gif') bottom center no-repeat;
    color:#FFFFFF;
    text-decoration:none;
    }
.cssmenu li ul{
    background:#333333;
    display:none;
    height:auto;
    padding:0px;
    margin:0px;
    border:0px;
    position:absolute;
    width:225px;
    z-index:230;
    /*top:1em;*/
    }

.cssmenu li ul li ul {
   margin-left:225px;
   margin-top:-35px;    
}

.cssmenu li:hover > ul{
    display:block;

    }
.cssmenu li li {
    background:url('images/sub_sep.gif') bottom left no-repeat;
    display:block;
    float:none;
    margin:0px;
    padding:0px;
    width:225px;
    }
.cssmenu li:hover li a{
    background:none;

    }
.cssmenu li ul a{
    display:block;
    height:35px;
    font-size:12px;
    font-style:normal;
    margin:0px;
    padding:0px 10px 0px 15px;
    text-align:left;
    }

.cssmenu li ul li:hover {
    background:#2580a2 url('images/hover_sub.gif') center left no-repeat;
    border:0px;
    color:#ffffff;
    text-decoration:none;
    }
.cssmenu p {
    clear:left;
    }    ​​ 
```

# unix - unix 中的日期格式转换

> ID：11267837
> 
> 赞同：-3
> 
> 时间：2012-06-29T19:28:46.243
> 
> 标签：unix

有人可以帮我转换吗

2012.02.02D14:32:42.438865000

至

2012-02-02 14:32:42 -0000

在 unix 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:51:21.077

我不知道`-0000`应该来自什么，但是这个命令：

```
echo "2012.02.02D14:32:42.438865000" | tr .D "- " | sed 's/-[[:digit:]]\{1,\}$//' 
```

产生这个输出：

```
2012-02-02 14:32:42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:33:23.690

如果您尝试通过字符串操作命令执行此操作，请查看此链接。 [http://unstableme.blogspot.com/2008/07/convert-date-format-using-sed-awk-perl.html](http://unstableme.blogspot.com/2008/07/convert-date-format-using-sed-awk-perl.html)

# asp.net - 生产部署后带有 Telerik.Web.UI 的 HttpParseException

> ID：11267839
> 
> 赞同：0
> 
> 时间：2012-06-29T19:28:55.510
> 
> 标签：asp.net, exception, telerik, production-environment, sitefinity

发表于 0 分钟前（永久链接）

我们今天早上进行了部署，四台服务器中的一台没有响应，但有以下例外：

```
Event Type: Warning
Event Source:   ASP.NET 2.0.50727.0
Event Category: Web Event
Event ID:   1310
Date:       6/29/2012
Time:       6:53:12 AM
User:       N/A
Computer:   [REMOVED]
Description:
Event code: 3006
Event message: A parser error has occurred.
Event time: 6/29/2012 6:53:12 AM
Event time (UTC): 6/29/2012 10:53:12 AM
Event ID: f89c468e41794ddeb38756d2b524f072
Event sequence: 247
Event occurrence: 80
Event detail code: 0

Application information:
    Application domain: /LM/W3SVC/926158372/ROOT-3-129854401924948620
    Trust level: Full
    Application Virtual Path: /
    Application Path: C:\[REMOVED]\
    Machine name: [REMOVED]

Process information:
    Process ID: 504
    Process name: w3wp.exe
    Account name: [REMOVED]

Exception information:
    Exception type: HttpParseException
    Exception message: Could not load file or assembly 'Telerik.Web.UI, Version=2010.2.826.35, Culture=neutral, PublicKeyToken=121fae78165ba3d4' or one of its dependencies. The process cannot access the file because it is being used by another process. (Exception from HRESULT: 0x80070020)

Request information:
    Request URL: [REMOVED]/sitefinity/cmsentrypoint.aspx
    Request path: /sitefinity/cmsentrypoint.aspx
    User host address: 10.2.0.248
    User: 
    Is authenticated: False
    Authentication Type: 
    Thread account name: [REMOVED]

Thread information:
    Thread ID: 15
    Thread account name: [REMOVED]
    Is impersonating: False
    Stack trace:    at System.Web.UI.TemplateParser.ParseString(String text, VirtualPath virtualPath, Encoding fileEncoding)
   at System.Web.UI.TemplateParser.ParseReader(StreamReader reader, VirtualPath virtualPath)
   at System.Web.UI.TemplateParser.ParseFile(String physicalPath, VirtualPath virtualPath)
   at System.Web.UI.TemplateParser.ParseInternal()
   at System.Web.UI.TemplateParser.Parse()
   at System.Web.UI.TemplateParser.Parse(ICollection referencedAssemblies, VirtualPath virtualPath)
   at System.Web.Compilation.BaseTemplateBuildProvider.get_CodeCompilerType()
   at System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   at System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   at System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   at System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile)
   at System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile)
   at System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean noAssert)
   at System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp, Boolean noAssert)
   at System.Web.UI.PageHandlerFactory.GetHandlerHelper(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.UI.PageHandlerFactory.System.Web.IHttpHandlerFactory2.GetHandler(HttpContext context, String requestType, VirtualPath virtualPath, String physicalPath)
   at System.Web.HttpApplication.MapHttpHandler(HttpContext context, String requestType, VirtualPath path, String pathTranslated, Boolean useAppConfig)
   at System.Web.HttpApplication.MapHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

知道什么会导致这种情况吗？它已通过重新启动修复，我们以前从未见过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T11:51:31.893

听起来您可能有另一个网站锁定了telerik dll，或者现有网站在部署期间没有释放对该文件的先前锁定。

我会：

1.  回收应用程序池，如果仍然没有响应，则：
2.  重新启动特定网站，如果仍然没有响应，则：
3.  重新启动所有托管网站的 IIS。

如果最后一个选项不可行，我将重新启动所有其他可能正在使用 Telerik.web.ui dll 的网站（通常位于此处的子文件夹中：C:\Program Files\Telerik[Radcontrols or sitefinity related subfolder here]） .

在使用 MSBuild & Webdeploy 部署站点时，我偶尔也会看到此错误。通常重新部署站点第二次修复它。

# facebook-graph-api - 如何在 php.ini 中获取嵌套的 json 解码数据。

> ID：11267843
> 
> 赞同：-3
> 
> 时间：2012-06-29T19:29:12.313
> 
> 标签：facebook-graph-api, json

我想使用 json 解码来获取这些数据。请帮忙..

到目前为止，我想出了这个脚本，但我无法在操作下获取倒数第二个和最后一个“名称”和“链接”。请帮忙..

```
foreach($json['data'] as $post)
{
$name1 = $post['actions']['name'];
$name2 = $post['actions']['name']['name'];
$name3 = $post['actions']['name']['name']['name']; 
```

但这不起作用请帮助我想从以下示例中获取所有名称和链接数据，它是来自 facebook graph api 的片段。

> ```
>  {
>       "data": [
>         {
> 
>           "actions": [
>             {
>               "name": "Comment", 
>               "link": "http://www.facebook.com/xxxxxidxxxx/posts/xxxxidxxxxxx"
>             }, 
>             {
>               "name": "Like", 
>               "link": "http://www.facebook.com/xxxxxidxxxxxx/posts/xxxxidxxxxxxx"
>             }
> {
>               "name": "Comment", 
>               "link": "http://www.facebook.com/xxxxxidxxxx/posts/xxxxidxxxxxx"
>             }, 
>             {
>               "name": "Like", 
>               "link": "http://www.facebook.com/xxxxxidxxxxxx/posts/xxxxidxxxxxxx"
>             }
> {
>               "name": "Comment", 
>               "link": "http://www.facebook.com/xxxxxidxxxx/posts/xxxxidxxxxxx"
>             }, 
>             {
>               "name": "Like", 
>               "link": "http://www.facebook.com/xxxxxidxxxxxx/posts/xxxxidxxxxxxx"
>             }
>           ], 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:34:33.030

请注意，这是一个数组，在您的情况下`actions`它是唯一的成员。`data`

您只是迭代错误的部分，代码应该是：

```
foreach($json['data']['actions'] as $action) {
  $name = $action['name'];
  $link = $action['link'];
} 
```

# entity-framework - 实体框架更新现有对象

> ID：11267845
> 
> 赞同：1
> 
> 时间：2012-06-29T19:29:28.153
> 
> 标签：entity-framework, entity-framework-4, navigation-properties, objectstatemanager

我在我的数据库中添加了一行，并返回一个不同的上下文来更新它。我有这堂课：

```
public abstract partial class DataManager<I, C> 
    where C : class, IDomainObject, I, new( ) where I : IDomainObject 
```

C 可能是一个 EntityObject，但这个类不知道这一点。

我的保存看起来像这样：

```
 public virtual bool Save( I _item )
    {
        bool rc = true;
        try
        {
        var set = m_Context.GetObjectSet<I, C>( );
        ObjectStateEntry stateEntry = null;
        if( ! m_Context.ObjectStateManager.TryGetObjectStateEntry( ( C ) _item, out stateEntry ) )
        {
            if( _item is EntityObject )
            {
                    if ( _item.IsNew )
                    {
                        set.AddObject( ( C ) _item );
                    }
                    else
                    {
                        try
                        {
                            set.Attach( ( C ) _item );
                        }
                        catch( Exception ex )
                        {
                            set.ApplyCurrentValues( ( C ) _item );
                        } 
```

等等...

在我的测试用例中，TryGetObjectStateEntry 找不到 stateEntry。然而，它是一个 EntityObject，并且它不是新的（IsNew 是我的标志），所以它会到达 else。这是我的问题： set.Attach 抛出此错误

“ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。”

下一刻，ApplyCurrentValues 抛出这个：

“在 ObjectStateManager 中找不到键与所提供对象的键匹配的对象。验证所提供对象的键值是否与必须应用更改的对象的键值匹配。”

这两者怎么可能是真的？

更多信息：

_item 是由 Get 在另一个上下文中创建的。然后处理了该上下文。那时，_item 有一个 EntityState.Unchanged。我对其进行了一些更改，并将其更改为 EntityState.Modified。（我没想到，因为上下文（及其 ObjectStateManager）应该已经消失了。）无论如何，一旦它到达 Save（上面），它的状态（由调试器报告）被修改，但我有到那时一个新的背景。如果此时我得到所有 ObjectStateEntries（已添加、已删除、已修改、未更改）的列表，则只有两个，并且 _item 不是其中之一，正如 ApplyCurrentValues 报告的那样，但它无法附加，因为“它是也在那儿！”。也许问题在于它仍然附加到旧的 ObjectStateManager （可能有一些不会让 ObjectStateManager 处理的引用？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T20:19:39.093

问题是您将两个不同的用户附加到同一个组织，但是，组织对象在每种情况下都是不同的实例。

如果组织已经在数据库中，请尝试：

1.  将组织的导航属性设置为 null 并仅设置 OrganizationId 属性。

2.  或者从数据库加载组织实体并将其放入导航道具。

如果组织不在数据库中：

使用相同的实例（扔掉一个并用另一个替换它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:37:13.913

问题是每次初始化 db-context 时，它都会从数据库中获取行，并为每一行分配一个实体键。这意味着由 2 个 db-context 检索的同一行将具有 2 个不同的实体键。实体键就像实体框架中的 id，它被用来代替相关实体的 ID。但是虽然保留了表的约束（没有重复的主键）希望这是有道理的。

# php - 用于列出数据库内容的 Wordpress 插件或代码

> ID：11267848
> 
> 赞同：0
> 
> 时间：2012-06-29T19:29:41.200
> 
> 标签：php, jquery, ajax, wordpress

我有一个包含一组人姓名、位置、联系电话等的 CSV 数据库。我正在寻找一个插件或代码来执行此操作，当用户选择位置时，列出所有人员（及其信息）在那个位置使用 CSV 数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:43:05.817

你试过WP找到我最近的吗？

[http://wordpress.org/extend/plugins/wp-find-your-nearest/](http://wordpress.org/extend/plugins/wp-find-your-nearest/)

我不知道它是否可以从 csv 文件中获取数据，但它是免费的，所以你可以随时尝试看看..

# visual-studio-2010 - 带有多个项目的 Git 源代码控制提供程序

> ID：11267849
> 
> 赞同：0
> 
> 时间：2012-06-29T19:29:41.337
> 
> 标签：visual-studio-2010, git

刚刚尝试使用我现有的 VS 2010 项目尝试 Git。这是一个解决方案，其中包含一个包含网站的项目以及一个包含我的 DLL 项目的第二个项目。我安装了 Git Extensions 和 Git Source Control Provider。

如果我只打开一个项目（不是解决方案），我可以将一个打开的项目绑定到一个新存储库并跟踪更改，并允许我通过 VS2010 中的解决方案资源管理器拥有所有功能。我的问题出在包含 2 个项目的解决方案上。无论我尝试什么，它都会为解决方案创建一个存储库，并且只找到 .sln 文件，而没有找到任何项目及其文件。我找不到为单个解决方案创建存储库的方法。我希望每个项目都在它自己的存储库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:27:20.183

从命令行使用 git 并忘记 VS 集成。如果 DLL 项目也在其他地方使用，您可能希望将其制成子模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:34:03.843

我建议将 2 个项目放在 2 个单独的存储库中，并使用命令行或 3rd 方工具。目前，我认为 GIT 扩展不支持你想要的。

# python - 扭曲不使用扭曲的客户端和服务器 tcp 传输发送整个文件

> ID：11267853
> 
> 赞同：2
> 
> 时间：2012-06-29T19:30:08.090
> 
> 标签：python, tcp, twisted, file-transfer

编辑：由于我通过文本附加文件没有正确保存，我决定重写我最初希望的方式并将文件保存为流：Twisted server：

```
from twisted.internet import reactor, protocol
import os,json

class Echo(protocol.Protocol):
    f = file
    def dataReceived(self, data):
        try:
            try:
                print format(json.loads(data))
                print "got jason"
                self.f=open("test.png","wb")

                self.transport.write("ready")
            except:
                print "filedata incoming!"
                self.f.write(data)
        except:
            print "unknown error" #happens if we don't receive json first

    def connectionLost(self, reason):
        if self.f!=file:self.f.close()

def main():
    """This runs the protocol on port 8000"""
    factory = protocol.ServerFactory()
    factory.protocol = Echo
    reactor.listenTCP(8000,factory)
    reactor.run()

# this only runs if the module was *not* imported
if __name__ == '__main__':
    main() 
```

* * *

## 下面是原帖

Twisted 发送了 99.9% 的文件，然后似乎就是这样，我想我写的文件不正确。

扭曲的服务器：

```
from twisted.internet import reactor, protocol
import os,json

class Echo(protocol.Protocol):

    def dataReceived(self, data):
        try:
            print format(json.loads(data))
            print "got jason"
            self.transport.write("ready")
        except:
            print "filedata incoming!"
            f = open("test.png","a")
            f.write(data)
            f.close()

def main():
    """This runs the protocol on port 8000"""
    factory = protocol.ServerFactory()
    factory.protocol = Echo
    reactor.listenTCP(8000,factory)
    reactor.run()

# this only runs if the module was *not* imported
if __name__ == '__main__':
    main() 
```

扭曲的客户端：

```
from twisted.internet import reactor, protocol
import os,json

fname="pic.png"

class EchoClient(protocol.Protocol):
    """Once connected, send a message, then print the result."""

    def connectionMade(self):

        fsize = os.path.getsize(fname) 
        self.transport.write(json.dumps({"file":{"size":fsize}}))

    def sendFile(self):
        print "sending file" 
        f = open(fname,"rb")
        self.transport.write(f.read())
        f.close()
        print "closing conn"
        self.transport.loseConnection()

    def dataReceived(self, data):
        "As soon as any data is receive"
        print "Server said: ", data
        self.sendFile()

    def connectionLost(self, reason):
        print "connection lost"

class EchoFactory(protocol.ClientFactory):
    protocol = EchoClient

    def clientConnectionFailed(self, connector, reason):
        print "Connection failed - goodbye!"
        reactor.stop()

    def clientConnectionLost(self, connector, reason):
        print "Connection lost - goodbye!"
        reactor.stop()

# this connects the protocol to a server runing on port 8000
def main():
    f = EchoFactory()
    reactor.connectTCP("localhost", 8000, f)
    reactor.run()

# this only runs if the module was *not* imported
if __name__ == '__main__':
    main() 
```

基本上服务器正在运行并监听，客户端连接并立即发送json，服务器接收数据包并告诉发送客户端'ok'，然后客户端发送文件；然后服务器接收文件并将其写入磁盘。我只是在测试，所以这个程序可能没有多大意义，尤其是文件附加的使用——但我注意到在传输和最终写入之后，文件的大小与原始文件的大小差不多，但不完全和小了大约 300 字节，因此几乎没用。我是否错误地发送了文件？还是只是写错了？哦，是的，我正在同一台计算机上测试服务器和客户端。

最终，我计划在两台本地计算机之间发送大至 1GB 的文件以进行备份，并希望将文件作为数据流写入，我不喜欢我正在使用的附加方法，但我不知道如何在不实际打开文件的情况下引用文件对象，这是我第一次收到 json 对象时才想做的事情。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:40:01.363

您正在打开“test.png”以附加文本。这是故意的吗？

您还有一个 bare `except`，这是一个坏主意，因为它会捕获*所有*异常。仅捕获您期望的那些异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T21:47:19.820

问题是您希望所有数据都由`dataReceived`. 这不是 Internet 的工作方式：[请参阅此 Twisted FAQ 以了解为什么会这样以及如何修复您的代码](http://twistedmatrix.com/trac/wiki/FrequentlyAskedQuestions#Whyisprotocol.dataReceivedcalledwithonlypartofthedataIcalledtransport.writewith)。

# javascript - 下划线标记在主干中的作用是什么？我们什么时候使用它？

> ID：11267854
> 
> 赞同：1
> 
> 时间：2012-06-29T19:30:22.993
> 
> 标签：javascript, backbone.js, underscore.js

我正在经历学习骨干的过程，并不了解所有的语法。下面我输入了一些我一直在学习的代码，以便我可以在这个问题中引用它。虽然我了解了主干的大部分工作原理，但我不太了解某些代码中一些标记背后的一些含义。BackBone 的文档来源充其量是稀缺的。我得到了其中的 90%，但是我没有得到的语法是下划线 '_' 真正提供了什么以及何时使用它。例如，下面的代码在“.bindAll( ....”处使用下划线。当然我明白绑定是什么。只是不确定何时使用下划线以及标记起什么作用。另一个例子是当下划线出现在 '(this.collection.

```
(function($){

  var Item = Backbone.Model.extend({
    defaults: {
      part1: 'hello',
      part2: 'world'
    }
  });    
   var List = Backbone.Collection.extend({
    model: Item
  });

  var ListView = Backbone.View.extend({
    el: $('body'),
    events: {
      'click button#add': 'addItem'
    },
    initialize: function(){
      _.bindAll(this, 'render', 'addItem', 'appendItem'); // remember: every function that uses 'this' as the current object should be in here

      this.collection = new List();
      this.collection.bind('add', this.appendItem); // collection event binder

      this.counter = 0;
      //once the object is initialized, render the page.
      this.render();      
    },
    render: function(){
    var self = this;      
      $(this.el).append("<button id='add'>Add list item</button>");
      $(this.el).append("<ul></ul>");
      _(this.collection.models).each(function(item){ // in case collection is not empty
    self.appendItem(item);
      }, this);
    },
    addItem: function(){
      this.counter++;
      var item = new Item();
      item.set({
    part2: item.get('part2') + this.counter // modify item defaults
      });
      this.collection.add(item); // add item to collection; view is updated via event 'add'
    },
     appendItem: function(item){
      $('ul', this.el).append("<li>"+item.get('part1')+" "+item.get('part2')+"</li>");
    }
  });

  var listView = new ListView();
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:33:32.760

下划线只不过是一**组实用/有用的功能**，它们是高效的、跨浏览器的。下划线的每个功能都以一个下划线字符开头`_`（因此命名为下划线）。

（强调我的）

> Underscore 是一个**用于 JavaScript 的实用工具带库，**它提供了许多您在 Prototype.js（或 Ruby）中所期望的**函数式编程支持，但****没有扩展任何内置的 JavaScript 对象**。这是与 jQuery 的 tux 和 Backbone.js 的吊带搭配的领带。

主干也可以有自己的一组功能，但由于下划线中已经存在所需的实用功能，它们被主干使用。换句话说，Backbone 与 Underscore 结合为您在编程/功能需求方面提供了更多的功能和灵活性。

请注意，Backbone 和 Underscore 都是由**同一作者编写**的。

**阅读有关文档的更多信息：**

[http://underscorejs.org/](http://underscorejs.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:33:23.467

最好将下划线视为方便实用功能的命名空间。他们只是使用下划线来避免污染全局命名空间。

有关更多信息，最好阅读文档：[下划线](http://underscorejs.org/)

特别是，您似乎掌握的用法正在[链接中](http://underscorejs.org/#chaining)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:34:28.083

Underscore 本身就是一个库，Backbone 恰好在其源代码中使用了它。它的 API 完全包含在`_`命名空间中，一个对象。

Underscore 主要关注 JavaScript 原生 API 在数据级别的扩展。也就是说，它对相交数组的方法比对 DOM 操作（即 jQuery 擅长的）更感兴趣。

它还有一个模板系统，这是 Backbone 使用的其他东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T19:36:23.950

`Underscore.js`是由 DocumentCloud 编写的 javascript 实用程序库，`Backbone.js`.

它可以作为 Backbone.js 之外的可分发文件使用，这就是它有自己的命名空间的原因。

它通过提供各种功能性语言结构的接口来帮助开发人员，这些功能性语言结构并不一定被所有浏览器本机支持。

[Underscore.js 文档](http://underscorejs.org/)

例如：

```
bindAll_.bindAll(object, [*methodNames]) 
```

> 绑定由 methodNames 指定的对象上的许多方法，以便在调用它们时在该对象的上下文中运行。对于将用作事件处理程序的绑定函数非常方便，否则将使用相当无用的 this 来调用它们。如果没有提供 methodNames，则对象的所有函数属性都将绑定到它。

# linux - Shopify + Ubuntu 12.04LTS + Faraday 问题 = 可以使用旧版 OpenSSL？

> ID：11267856
> 
> 赞同：8
> 
> 时间：2012-06-29T19:30:34.927
> 
> 标签：linux, oauth, openssl, shopify, ubuntu-12.04

我正在使用 Ubuntu 12.04LTS Desktop 开发 Shopify 应用程序（使用 shopify_app gem），在处理回调 URL 时遇到了这个问题。

```
Faraday::Error::ConnectionFailed (Connection reset by peer - SSL_connect) 
```

[查看此处](https://groups.google.com/forum/?fromgroups#!searchin/shopify-app-discuss/Faraday$20Error/shopify-app-discuss/jzxKdrBGdQ8/SP-mNuqvEGMJ)和此处的 shopify-app-discuss 组，似乎问题出在 Ubuntu 12.04 及其 OpenSSL 上。我尝试安装最新的 OpenSSL，但没有。[我发现](http://railsapps.github.com/openssl-certificate-verify-failed.html)的一种替代方法是使用 RVM 提供的另一种较旧的 OpenSSL。

```
$ rvm remove 1.9.3 (or whatever version of ruby you are using)
$ rvm pkg install openssl
$ rvm install 1.9.3 --with-openssl-dir=$rvm_path/usr 
```

现在 Shopify 应用程序运行良好。它可以连接到 API。（这个技巧可能对其他 Ubuntu 12.04 用户有所帮助！）

所以，我的问题是：这是最好的解决方案吗？我有点担心较旧的 OpenSSL 版本。它可能存在一些安全问题。用这个开发应用程序安全吗？

当我部署应用程序（例如 Heroku）时，旧版 OpenSSL 是否会出现安全问题？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T18:49:34.293

其他建议对我们不起作用。具体来说，我们需要强制`:SSLv3`而不是 `:TLSv1`. （对于现有的 Ubuntu 12.04.01 Ruby 1.9.3 和我们从乘客 PPM 中使用的那个。）

此外，需要检查是否`@ssl_options`已定义。我从 ActiveResource 实现中复制了一个。

我们把它放进去`config/initializers/shopify_ssl.rb`，一切都很美好：

```
require 'active_resource/connection'

class ActiveResource::Connection
  def apply_ssl_options_with_ssl_version(http)
    apply_ssl_options_without_ssl_version(http)
    return http unless defined?(@ssl_options)
    http.ssl_version = @ssl_options[:ssl_version] if @ssl_options[:ssl_version]
    http
  end
  alias_method_chain :apply_ssl_options, :ssl_version
end

ShopifyAPI::Base.ssl_options = { :ssl_version => :SSLv3 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T18:19:41.550

使用最新的 OpenSSL 库时，您的客户端很可能尝试使用 TLS 1.2 进行连接，这是 HTTPS 中使用的最新 SSL/TLS 协议之一。我们的负载平衡硬件在 TLS 1.2 中存在一个已知问题，尽管直到我自己独立偶然发现了这个错误，我们才意识到这一点。

我已经让运营团队的其他成员意识到了这一点，我希望我们会尽快解决这个问题。在此之前，您可以使用

`http.ssl_version = :TLSv1`

强制 Ruby 改为使用 TLS 1.0。

下面是一个如何将此解决方法应用于 ActiveResource 的示例，它是`shopify_api`gem 内部使用的 gem：

```
require 'active_resource/connection'

class ActiveResource::Connection
  def apply_ssl_options_with_ssl_version(http)
    apply_ssl_options_without_ssl_version(http)

    http.ssl_version = @ssl_options[:ssl_version] if @ssl_options[:ssl_version]

    http
  end

  alias_method_chain :apply_ssl_options, :ssl_version
end 
```

现在你可以使用

`ShopifyAPI::Base.ssl_options = {:ssl_version => :TLSv1}`

解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T11:57:30.950

尽管最新版本的 OpenSSL 是尚未发现的安全漏洞的完美结合，但我想说您应该使用在特定时刻为您工作的库。没有没有安全漏洞的软件，除非您可以影响服务器端升级到与最新 SSL 版本兼容的东西，否则您的选择是有限的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T11:53:51.793

您应始终使用最新版本的 OpenSSL。

# ios - 如何在 UIScrollView 中的对象 (UIViews) 上执行翻转动画

> ID：11267859
> 
> 赞同：0
> 
> 时间：2012-06-29T19:30:40.557
> 
> 标签：ios, uiview, uiscrollview

我正在将可变数量的对象（卡片）加载到`UIScrollView`. 每张卡片都是从数组中的对象以编程方式创建的。这个想法是，用户将点击一张卡片，它会翻转表明它已完成。当我将对象（卡片）加载到`UIScrollView`最后一张卡片中时，它会翻转。轻触其他任何一张牌都会翻转最后一张牌。

我怀疑我需要提供一个指向我想要翻转的对象（卡片）的指针，但不确定如何做到这一点。我尝试将标签分配给被点击但没有走远的按钮。如何定位中的特定对象以`UIScrollView`对其执行操作？

这是我到目前为止的代码：

```
// create a cardScrollView
    // if there are not cards for the schedule, display the no cards message.
    // if there are cards then create the scroller, add the cards, and then add to screen.
    if (cardCount == 0) {
        NSLog(@"There are no cards available");
        // place a label on screen that tells user there are no cards on the schedule. with animation.
        // *** TODO: this will eventually be a better graphical message. ***
        UILabel *noScheduleMsg = [[UILabel alloc] initWithFrame:CGRectMake(0, 10, 240, 50)];
        noScheduleMsg.backgroundColor = [UIColor clearColor];
        [noScheduleMsg setText:@"Opps! It doesn't look like there are picture cards on this schedule!"];
        [noScheduleMsg setLineBreakMode:UILineBreakModeCharacterWrap];
        noScheduleMsg.numberOfLines = 2;
        [noScheduleView addSubview:noScheduleMsg];

        // animate the view onto the screen
        [UIView animateWithDuration:.3 animations:^{
            noScheduleView.alpha = 1.0; 
        }];
    }
    else
    {
        NSLog(@"Display schedule cards");
        // check to see if there is a cardview first.
        if (!cardView) {

            // TODO: check for the last known completed card and show the following card in line.

            //create UIView that the scroller will go into.
            cardView = [[UIView alloc] initWithFrame:CGRectMake(0, 100, 320, 250)];
            //set cardView properties
            cardView.backgroundColor = [UIColor clearColor];
            //make sure I hide the cardview so that animation to full alpha is completed. Add to main view.
            cardView.alpha = 0.0;
            [self.view addSubview:cardView];

            //create the cardViewScroller. this is where all the cards will be placed.
            cardScroller = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 250)];
            cardScroller.backgroundColor = [UIColor clearColor];
            cardScroller.alwaysBounceVertical = NO;
            cardScroller.pagingEnabled = YES;
            cardScroller.showsVerticalScrollIndicator = NO;
            cardScroller.showsHorizontalScrollIndicator = NO;
            cardScroller.scrollEnabled = YES;    
            int cardscrollWidth = 120;
            cardScroller.contentSize = CGSizeMake(cardscrollWidth,80); 

            //iterate over the scheduleCards array and load each object into a view
            NSMutableArray *cards = [[NSMutableArray alloc] initWithArray:[selectedSchedule scheduleCards]];

            // this is to create the picture cards. itterate over each object and display in the cardScroller
            for (int i = 0; i < cardCount; i++) {

                // TODO: 
                // create the front of the card and put in a UIView object
                // create the back of the card and put in a UIView object.
                // Add a clear button to each isComplete to each card that is complete. if selected then show the backside of the card.
                // Add the flip logic
                // tie reset button to clear all isComplete values on the cards.

                // pull the right cards from the array at each index
                Cards *theCard = [cards objectAtIndex:i];

                UIButton *frontBtn = [[UIButton alloc] init];
                [frontBtn setFrame:CGRectMake(35, 0, 250, 250)];
                frontBtn.backgroundColor = [UIColor clearColor];
                [frontBtn setTag:i];
                [frontBtn addTarget:self action:@selector(changeTaskStatus:) forControlEvents:UIControlEventTouchUpInside];

                //set card border
                UIImageView *pcImageViewBg = [[UIImageView alloc] initWithFrame:CGRectMake(35, 0, 250, 250)];
                UIImage *bgimg = [UIImage imageNamed:@"bigCardbg@2x"];
                [pcImageViewBg setImage:bgimg];

                // set card image
                UIImageView *pcImageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 230, 230)];
                NSString *ik = [theCard imageKey];
                if (ik) {
                    //get the image key from the store
                    UIImage *imageToDisplay = [[ScheduleImageStore sharedStore] imageForKey:ik];
                    // use that image to display in the view
                    [pcImageView setImage:imageToDisplay];
                } else {
                    //set default image.
                    [pcImageView setImage:[UIImage imageNamed:@"card"]];
                }

                // this is the front of the card.
                frontCard = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 255, 255)];

                // back of the card (done state)
                //backCard = [[UIView alloc] initWithFrame:CGRectMake(35, 0, 255, 255)];
                //[backCard addSubview:frontBtn];
                //backCard.backgroundColor = [UIColor redColor];

                // UIview for the flip (container)                
                CGRect frame;
                frame.origin.x = cardScroller.frame.size.width * i - 1;
                frame.origin.y = 0;
                frame.size = cardScroller.frame.size;                
                theCardFlipView = [[UIView alloc] initWithFrame:frame];
                //theCardFlipView.backgroundColor = [UIColor greenColor];

                // add the card views to the interface.                
                [pcImageViewBg addSubview:pcImageView];
                [frontCard addSubview:pcImageViewBg];
                [frontCard addSubview:frontBtn];
                // this is the container holding the frontcard and backcard
                // I need to target the appropriate 'theCardFlipView'
                [theCardFlipView addSubview:frontCard];
                [cardScroller addSubview:theCardFlipView];

                NSLog(@"%i",frontBtn.tag);
            }

            // set the contentsize of the scroller dynamically. it's based on how many cards there are in the schedule.
            cardScroller.contentSize = CGSizeMake(cardScroller.frame.size.width * cardCount, cardScroller.frame.size.height);

            //add scroller to card view.
            [cardView addSubview:cardScroller];

            // animate the cardview into view from transparent to opaque.
            [UIView animateWithDuration:.3 animations:^{ 
                cardView.alpha = 1.0;
            } completion: ^ (BOOL finished) {
                // if I want something to happen after loading the cardView, I could put it here.
            }];

        } 
```

这是我基于按钮按下的方法：

```
-(void)changeTaskStatus:(UIButton *)sender {

    NSLog(@"button tag: %@",[sender tag]);
    if(toggleIsOn){
        //NSLog(@"incomplete card");
        [UIView transitionWithView:theCardFlipView
                          duration:0.8
                           options:UIViewAnimationOptionTransitionFlipFromRight | UIViewAnimationOptionCurveEaseInOut
                        animations:^{
                            [[[theCardFlipView subviews] objectAtIndex:0] removeFromSuperview],
                            [theCardFlipView addSubview:frontCard];
                        }
                        completion:^(BOOL finished){
                            NSLog(@"card complete");
                        }];       
    }
    else {
        //NSLog(@"complete card");
        [UIView transitionWithView:theCardFlipView
                          duration:0.8
                           options:UIViewAnimationOptionTransitionFlipFromLeft | UIViewAnimationOptionCurveEaseInOut
                        animations:^{
                            [[[theCardFlipView subviews] objectAtIndex:0] removeFromSuperview],
                            [theCardFlipView addSubview:frontCard];
                        }
                        completion:^(BOOL finished){
                            //NSLog(@"front card tag: %i",frontBtn.tag);
                            NSLog(@"card not complete");
                        }];       
    }
    toggleIsOn = !toggleIsOn;

} 
```

有什么建议么？我觉得这也是非常笨拙的代码，因此欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:45:04.780

在创建卡片视图的循环中，在底部添加：

`theCardFlipView.tag = i + 100; // since you're already using i for those button tags`

100 是一个任意常数，只要没有其他人使用这些标签（并且只要您没有超过 99 张卡片），它就可以了。

然后，当您处理按钮按下时，将其放在最开始。

`thecardFlipView = [cardScrollerView viewWithTag:sender.tag + 100];`

您现在拥有的代码为按钮提供了一个标签，而不是您想要翻转的实际视图。您正在使用 theCardFlipView 而没有将其更改为您想要翻转的内容（它只是保持分配给循环中的最后一张卡片）。

综上所述，您实际上可以在不制作按钮的情况下执行此操作，您只需要处理滚动视图上的点击手势并找到点击点处的卡片。

**编辑：**

看起来你正在使用的切换（`toggleIsOn`）不是特定于卡片的，所以你最终会出现不正确的翻转行为。您应该跟踪哪些牌被翻转，哪些没有，并检查。如果您的卡片是 UIView 子类的实例，您可以在其中添加一个标志，否则您可能需要维护另一个包含该信息的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:55:12.497

Dima 的回答应该可以解决您的问题。

创建一个包含前 ui 视图和后 uiview 的卡片类，并在 init 语句中设置子视图，再加上一个翻转方法将有助于实现这一点。

# java - java 的 fileWriter() 函数是否适用于 Linux 类型的机器？

> ID：11267865
> 
> 赞同：0
> 
> 时间：2012-06-29T19:30:58.137
> 
> 标签：java, windows, linux

我正在使用 java fileWriter() 函数。它适用于 Windows 机器，但不适用于 Linux。

所以我想知道 fileWriter() 函数是否仅适用于 Windows 或还有其他问题？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T19:35:42.657

我看到过类似的报告，有人说文件 IO 不适用于他们的 Linux。问题几乎总是以他们使用 Windows 的目录路径分隔符而告终。

```
String filePath = "my\\file\\path\\File.txt"; // only works on windows
String filePath = "my/file/path/File.txt"; // works on all platforms 
```

确保您使用的是后者，它们甚至可以在 Windows 上运行（至少在 Java 中）！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T19:32:12.827

您指的是 FileWriter 类吗？如果是这样，它在两个系统上的行为都是正确的，如果不是，你将不得不告诉我们 fileWriter() 函数的来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T19:40:24.210

FileWriter 类对两个系统都有效，但请记住 Linux 和 Windows 使用不同的路径约定 - 基于 UNIX 的系统使用正斜杠“/”来分隔目录和文件，而 Windows 使用反斜杠“\”来分隔它们。因此，如果您在标有“home”的目录中有一个名为“file.txt”的文件，在 Linux 中它将是 /home/file.txt，在 Windows 中是 C:\home\file.txt，因为您很可能是在 Windows 上的 C: 驱动器中。

但是，您几乎肯定需要创建 FileWriter 的 File 类具有四个静态字段 - separatorChar、pathSeparatorChar、separator 和 pathSeparator - 它们由您运行的系统确定。例如，在 Linux 上 pathSeparator 是“/”，在 Windows 上是“\”。如果您需要在任一系统中创建文件路径，请参考这些字段（您甚至不需要实例化 File 类型的对象 - 您可以只使用 File.separatorChar，因为该字段是静态的）。

# debugging - Symfony2 Varnish NGINX 缓存 / DebugToolbar

> ID：11267866
> 
> 赞同：0
> 
> 时间：2012-06-29T19:31:03.243
> 
> 标签：debugging, caching, symfony, nginx, varnish

我正在尝试将清漆缓存与 symfony2 一起使用。设置是 Varnish -> NGNIX -> php-fpm

我的代码：

```
public function indexAction($city_url)
{

    $response = new Response();
    $response->setETag('foobar123fo');
    if ($response->isNotModified($this->getRequest())) {
        // return the 304 Response immediately
        return $response;
    }

    $data = array('randA'=> rand() );
    $response = $this->render('Foo:Event:index.html.twig', $data);

    $response->setCache(array(
        'public'        => true,
    ));
    $response->setETag('foobar123fo');
    $response->setSharedMaxAge(10); 

    return $response; 
```

这按预期工作 - 我得到缓存命中，但 Symfony 的调试工具栏也被缓存。谁能告诉我，如何排除工具栏被缓存？我想看看，在提供缓存结果时，例如确实没有 SQL 查询。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T23:09:48.813

如果页面在 Varnish 上完全缓存，请求甚至不会访问您的 Web 服务器。不仅没有进行 SQL 查询，而且根本没有调用 Symfony。

调试工具栏是页面的一部分，这就是它被缓存的原因。再次... Symfony 仅在第一个请求时被调用。

再次阅读官方文档中的[HTTP Cache](http://symfony.com/doc/current/book/http_cache.html)章节。里面推荐了两篇文章，也值得一读：

*   [缓存做的事情](http://tomayko.com/writings/things-caches-do)
*   [缓存教程](http://www.mnot.net/cache_docs/)

# mysql - OUT 或 INOUT 参数不起作用

> ID：11267868
> 
> 赞同：1
> 
> 时间：2012-06-29T19:31:08.237
> 
> 标签：mysql, stored-procedures, arguments, out

如果我在 MySQL 中使用 OUT 或 INOUT 参数创建存储过程，则它不起作用。即使我将存储过程留空。DDL 如下：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `testing_inout`(`a` int,INOUT `b` int)
BEGIN

END 
```

第一个参数是常规 IN 参数。第二个是 INOUT 参数（即使设置为 OUT，同样的问题仍然存在）

当我调用此存储过程时，我收到一条错误消息：

> 例程 db_name.testing_inout 的 OUT 或 INOUT 参数 2 不是 BEFORE 触发器中的变量或 NEW 伪变量。

即使在存储过程中编写代码，此错误仍然存​​在。我正在运行 mysql 版本 5.1.41。

这对我来说是个大问题，因为由于这个错误，我无法输出递归存储过程的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:51:00.637

这个对我有用

```
mysql> CREATE DEFINER=`root`@`localhost` PROCEDURE `testing_inout`(`a` int,INOUT `b` int)
    -> BEGIN
    -> 
    -> END
    -> ;
Query OK, 0 rows affected (0.00 sec) 
```

第二个参数因为它是 inout 它需要是一个变量：

```
mysql> set @c:=1;
Query OK, 0 rows affected (0.00 sec)

mysql> call testing_inout(1,@c);
Query OK, 0 rows affected (0.00 sec) 
```

如果您尝试这样做，它将返回 1：

```
delimiter |
CREATE DEFINER=`root`@`localhost` PROCEDURE `testing_inout`(`a` int,INOUT `b` int)
BEGIN
select b;
END
|
delimiter ;

mysql> call testing_inout(1,@c);
+------+
| b    |
+------+
|    1 |
+------+
1 row in set (0.00 sec)

Query OK, 0 rows affected (0.00 sec) 
```

# c# - svcutil生成的代理类报一些警告

> ID：11267869
> 
> 赞同：0
> 
> 时间：2012-06-29T19:31:08.687
> 
> 标签：c#, .net, wcf, svcutil.exe

在实现双工服务的过程中，我创建了一个新类，并用属性修饰了它`DataContract`：此外，我用属性修饰了这个类的属性`DataMember`，包括属性`public IPEndPoint Endpoint { get; set; }`。

然后我启动了 svcutil ，它生成了`generatedProxy.cs`和`app.config`文件。项目构建成功，但报一些警告如下：

> 'C:\Users\vincenzo\Documents\Visual Studio 2010\Projects\SampleDuplex\Client\generatedProxy.cs' 中的类型 'System.Net.IPEndPoint' 与 'c: 中导入的类型 'System.Net.IPEndPoint' 冲突： \Program Files\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\Profile\Client\System.dll'。使用“C:\Users\vincenzo\Documents\Visual Studio 2010\Projects\SampleDuplex\Client\generatedProxy.cs”中定义的类型。C:\Users\vincenzo\Documents\Visual Studio 2010\Projects\SampleDuplex\Client\generatedProxy.cs 90 28 客户端

是什么导致了这些警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:02:28.560

问题是由于生成的文件包含命名空间的定义`System.Net`，而在这个命名空间中还有`IPEndPoint`类的定义：这与 .NET Framework 的定义相冲突。为了解决问题，我在`/reference`svcutil 命令中添加了选项，如下：

1.  我搬进了小路`C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0`
2.  我添加了选项`/reference:System.dll`

因此，命名空间 System.Net 的定义不再存在于生成的文件中，并且在构建之后不会报告任何警告。

# jquery - Bumpbox 2.0 和 jquery 库冲突？

> ID：11267870
> 
> 赞同：2
> 
> 时间：2012-06-29T19:31:16.157
> 
> 标签：jquery, mootools

我刚刚安装了 bumpbox 2.0，发现与 jquery.min.js (v.1.7.2) 有冲突，如果我正在运行 jquery 库，当我删除它工作的库时，Bumpbox 不会弹出。

我已经尝试过以前版本的 jquery.min.js 并且问题仍然存在。

问题是我需要 jquery 库，那么解决方法是什么？

*我正在使用bumpbox，因为它似乎具有更好的swf功能，这就是我所需要的

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:37:23.083

我有同样的问题，这对我有帮助。

```
 $.noConflict();
    jQuery(document).ready(function($) {
    $(".hit").click(function() {
     $('##header').html('<img src="/english/images/myheader.jpg" width="760" height="97" />');
    });
});
doBump('.bx2',850, 400, '000', '000000', 0.7, 7, 2 ,'333', 15,'000', 2, Fx.Transitions.Back.easeOut, Fx.Transitions.linear); 
```

# recursion - 使用horner二进制转十进制

> ID：11267871
> 
> 赞同：1
> 
> 时间：2012-06-29T19:31:16.543
> 
> 标签：recursion, binary, decimal

1 x 2 ⁰ +1 x 2 ¹ + 1 x 2 ² + 0 x 2 ³ +1 x 2 ⁴ = 1 + 2 x (1 + 2 x (1 + 2 x (0 + 2 x 1) ))

记起`b[0] = 1, b[1] = 1, b[2] = 1,b[3] = 0, b[4] = 1`

```
/* to convert a binary representation to a decimal one*/

int dec, b[5] = {1, 1, 1, 0, 1};
dec = b[4];
for (int i = 3; i >= 0; i--)
{
    dec=2 * dec + b[i];  //horner's scheme
}
cout << dec << endl; 
```

我试图用 C 语言再次编写这段代码，但它不能正常工作：

```
#include<stdio.h>

int main()
{
    int B[5];
    int x, s, s1;

    for(int i = 1;i <= 5; i++)
    {
        printf("Enter %d. digit of binary number", i);
        scanf("%d", &B[i]);
    }

    s = B[5];   /*this part for reverse the array*/
    B[5] = B[1];
    B[1] = s;

    s1 = B[4];
    B[4] = B[2];
    B[2] = s1; 

    x = B[4];

    for (int i = 3; i >= 0; i--)
    {
        x = 2 * x + B[i];  
    }

    printf("%d", x);
    scanf("%d");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:52:52.777

这是您初始化数组 B 的初始循环

```
 int B[5];
    int x,s,s1;
    for(int i=1;i<=5;i++) {
    printf("Enter %d. digit of binary number",i);
    scanf("%d",&B[i]);} 
```

这很糟糕，因为您正在访问`B[5]`超出数组边界的元素，而且您永远不会初始化`B[0]`您在第二个循环中使用的元素

```
 x=B[4];
    for (int i=3;i>=0;i--)
    {
        x=2*x+B[i];  
    } 
```

尝试将您的第一个循环更改为

```
 for(int i=0;i<5;i++) {
        printf("Enter %d. digit of binary number",i);
        scanf("%d",&B[i]);
    } 
```

看看这是否给出了您期望的结果。

还有这段代码

```
 s=B[5];   /*this part for reverse the array*/
    B[5]=B[1];
    B[1]=s;

    s1=B[4];
    B[4]=B[2];
    B[2]=s1; 
```

有问题，因为您将 B 声明为 5 个整数的数组，并且由于数组具有从零开始的索引，因此有效索引的唯一值是从 0 到 4。如果要正确反转数组，请将代码替换为

```
 s=B[4];   /*this part for reverse the array*/
    B[4]=B[0];
    B[0]=s;

    s1=B[3];
    B[3]=B[1];
    B[1]=s1; 
```

**您不能访问 B[5] 因为这超出了您的数组范围**！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:54:43.303

您不需要还原阵列。

# coldfusion - (ColdFusion) 比较两个日期，使用结果来确定显示的内容

> ID：11267873
> 
> 赞同：11
> 
> 时间：2012-06-29T19:31:22.367
> 
> 标签：coldfusion

我在一个客户的网站上工作，如果优惠券到期日期在两周或更短的时间内到期，他需要将优惠券到期日期变为红色。否则它们将是黑色的。

该网站本身不是我制作的。我刚从这里开始，他们希望我学习 ColdFusion。所以我一直在磕磕绊绊。

我想也许通过使用[DateCompare](http://cfquickdocs.com/cf9/#datecompare)或[DateDiff](http://cfquickdocs.com/cf9/#datediff)我可以得到我想要的。`<CFOUTPUT>`但是，当我得到任一比较的结果时，我会得到乱码。对于客户列表中的每个后续优惠券项目，它会显示一长串`51515151551`逐渐变小的字符串。

优惠券日期本身（即 end_date）是从 Microsoft SQL 数据库中调用的。它使用 Dateformat: 进行格式化`#dateformat(end_date,"m/d/yyyy")#`。

我试图将其与它进行比较，`Now()`以便动态确定到期日期是否应为红色。我也尝试过格式化`Now()`，我得到了相同的结果。

这里有经验丰富的程序员可以带领我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-29T19:45:36.863

Datediff 是你想要的。您是否在日期差异中使用了正确的日期部分？您可以使用 'ww' 数周或 'd' 数天，我在下面的示例中使用天数。

```
<cfset CouponDate = createDate( 2012, 05, 29 ) />
<cfif DateDiff( "d", CouponDate, Now() ) GTE 14>
    <cfset Expired = False />
<cfelse>
    <cfset Expired = True />
</cfif> 
```

显然，您不需要设置变量或任何东西，这只是一些示例代码，可以让您的想法生效。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:50:17.757

```
<cfscript>
// setup first test date for 7 days ago
date1 = dateAdd( 'd', -7, now() );
// setup second date for 14 days ago
date2 = dateAdd( 'd', -14, now() );
// compare date 1
writeOutput( dateDiff('d', date1, now() ) & '<hr/>');
// compare date 2
writeOutput( dateDiff('d', date2, now() )  & '<hr/>');
// demonstrate use
if ( dateDiff('d', date2, now()) gte 14 ) {
    writeOutput( 'RED' );
}
</cfscript> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-26T07:01:01.990

这对我有用：

```
<cfset dtdiff = query.expiry_date - Now() />
<cfif Round(dtdiff) LEQ 14>
    Red
<cfelse>
    Black
</cfif> 
```

如果你不想使用 14 天的时差，你可以使用

`Fix(dtdiff)`代替`Round(dtdiff)`

# c++ - Mingw _Unwind_resume 的多重定义

> ID：11267877
> 
> 赞同：7
> 
> 时间：2012-06-29T19:31:33.200
> 
> 标签：c++, mingw, codeblocks

我知道已经有人问过与此类似的问题，但我几个小时都无法解决这个问题。

基本上我有一个包含代码的 DLL 和一个调用它的应用程序。一切正常，但如果我把这两个放在我的开发环境之外，它会说程序无法启动，因为`libgcc_s_dw2 1.dll`计算机中丢失了。

考虑到它不是开发计算机，这很公平。所以为了分发，我添加了编译器标志“ `-static-libgcc -static-libstdc++`”。我为 dll 和应用程序做了这个。

但是当我编译应用程序时，我得到了错误：

> “'_Unwind_Resume'的多重定义”

我认为这是由于 dll 和应用程序都内置了静态库，确实如此。但是如果它们都没有内置静态库，程序将无法在最终用户机器上运行。

如何在不依赖 mingw 库的同时消除此错误？我的 IDE 是 Code::Blocks。

大卫

**编辑：**这是构建链接到 dll 的应用程序时的构建日志：

```
c:/mingw/bin/../lib/gcc/mingw32/4.6.2/libgcc_eh.a(unwind-dw2.o):(.text+0x298c): multiple definition of `_Unwind_Resume'

..\EquilibriumEngine\bin\Release\libEquilibriumEngine.dll.a(d000015.o):(.text+0x0): first defined here

collect2: ld returned 1 exit status

Process terminated with status 1 (0 minutes, 0 seconds)

2 errors, 0 warnings 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-01T12:24:23.710

一种通常有效的 hacky 解决方法是将其添加到您的链接器标志中：

```
-Wl,-allow-multiple-definition 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:50:27.523

请仅使用链接器标志重复`-static`。但是（如果可能的话）包括`libgcc_s_dw2 1.dll`到你的 exe 并分发两者。`MinGW/bin`您可以从文件夹中获取 dll 。

还要确保你没有添加`-static-libgcc`到编译器，而是**链接器**-flags！

# javascript - Image.onload 中 IE8 中的事件目标

> ID：11267882
> 
> 赞同：3
> 
> 时间：2012-06-29T19:31:49.600
> 
> 标签：javascript, internet-explorer, javascript-events

在我的图像的`onLoad`事件处理程序中，我需要获取触发事件的图像的 URL。在 IE8 中， 的值`window.event.srcElement`始终为`null`。有解决方法吗？

```
var image = new Image();
image.onload = function (e) {
    var v = e || window.event;
    var t = v.target || v.srcElement;
    // t is null here
    //...
};
image.src = "test.png"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:33:18.730

只需使用`this`. `this`在事件处理程序中是附加事件的元素。

```
image.onload = function() {
    var t = this;
    alert(t);
}; 
```

# facebook - 我可以找回我在 Facebook 上的“签到”吗

> ID：11267883
> 
> 赞同：0
> 
> 时间：2012-06-29T19:31:52.263
> 
> 标签：facebook

我想通过 Facebook 的“签入”按钮获取我所做的所有签到的经纬度。我可以进行 API 调用吗？

Foursquare 让你这样做，在 FB 上看不到任何参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:40:27.660

签到可以通过对象[`checkins`](https://developers.facebook.com/docs/reference/api/user/#checkins)的连接检索[`user`](https://developers.facebook.com/docs/reference/api/user/)，您还需要`user_checkins`权限（或者`friends_checkins`如果您检索朋友的签到）。

您还可以通过 FQL 访问相同的数据：

```
SELECT coords, tagged_uids, page_id FROM checkin WHERE author_uid=me() 
```

您可能还想阅读[对象](https://developers.facebook.com/docs/reference/api/checkin/)[文档`checkin`](https://developers.facebook.com/docs/reference/api/checkin/)和表格[文档`checkin`(FQL)](https://developers.facebook.com/docs/reference/fql/checkin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:42:08.473

请参阅[https://developers.facebook.com/docs/reference/api/checkin/](https://developers.facebook.com/docs/reference/api/checkin/)

Place 字段返回一个

> 包含页面 ID、名称和位置的对象；位置包括特定的纬度和经度以及有关邮政地址的信息（如果有）

您还可以使用：

> 签到：[https](https://graph.facebook.com/search?type=checkin) ://graph.facebook.com/search?type= checkin（此请求返回您或您朋友的最新签到，或您或您的朋友已被标记的签到；目前，它不接受 aq= 参数。）

我认为第二个是你正在寻找的更多。

第三种方法是使用 FQL：

[https://developers.facebook.com/docs/reference/fql/checkin/](https://developers.facebook.com/docs/reference/fql/checkin/)

# php - PHP-合并两个xml属性而不重复

> ID：11267888
> 
> 赞同：0
> 
> 时间：2012-06-29T19:32:21.917
> 
> 标签：php, xml, merge, duplicates

我有两个像这样的xml1：

```
 <Title>Sea Change</Title>
    <thirdParty_ID></thirdParty_ID>
    <Animation_Indicator>N</Animation_Indicator>
    <Blackout_Indicator>N</Blackout_Indicator>
<SD_Purchase_Zoe></SD_Purchase_Zoe>
    <SD_Purchase_Window_Start_Zoe></SD_Purchase_Window_Start_Zoe>
    <SD_Purchase_Window_End_Zoe></SD_Purchase_Window_End_Zoe>
    <SD_Licensing_Window_start_Zoe></SD_Licensing_Window_start_Zoe>
<HD_Licensing_Window_start_Zoe>2012-04-01</HD_Licensing_Window_start_Zoe>
    <HD_Licensing_Window_end_Zoe>2013-04-01</HD_Licensing_Window_end_Zoe>
    <HD_Purchase_Window_Start_Zoe>2012-04-01</HD_Purchase_Window_Start_Zoe> 
```

xml2：

```
<Asset_Record>
    <Title>Sea Change</Title>
    <thirdParty_ID></thirdParty_ID>
    <Animation_Indicator>N</Animation_Indicator>
    <Blackout_Indicator>N</Blackout_Indicator>
<SD_Purchase_Zoe>Y</SD_Purchase_Zoe>
    <SD_Purchase_Window_Start_Zoe>2012-04-01</SD_Purchase_Window_Start_Zoe>
    <SD_Purchase_Window_End_Zoe>2013-04-01</SD_Purchase_Window_End_Zoe>
    <SD_Licensing_Window_start_Zoe>2012-04-01</SD_Licensing_Window_start_Zoe>
<HD_Licensing_Window_start_Zoe></HD_Licensing_Window_start_Zoe>
    <HD_Licensing_Window_end_Zoe></HD_Licensing_Window_end_Zoe>
    <HD_Purchase_Window_Start_Zoe></HD_Purchase_Window_Start_Zoe> 
```

我想合并 xml1 和 xml2 并输出如下

```
<Title>Sea Change</Title>
    <thirdParty_ID></thirdParty_ID>
    <Animation_Indicator>N</Animation_Indicator>
    <Blackout_Indicator>N</Blackout_Indicator>
<SD_Purchase_Zoe>Y</SD_Purchase_Zoe>
    <SD_Purchase_Window_Start_Zoe>2012-04-01</SD_Purchase_Window_Start_Zoe>
    <SD_Purchase_Window_End_Zoe>2013-04-01</SD_Purchase_Window_End_Zoe>
    <SD_Licensing_Window_start_Zoe>2012-04-01</SD_Licensing_Window_start_Zoe>
    <SD_Licensing_Window_start_Zoe></SD_Licensing_Window_start_Zoe>
<HD_Licensing_Window_start_Zoe>2012-04-01</HD_Licensing_Window_start_Zoe>
    <HD_Licensing_Window_end_Zoe>2013-04-01</HD_Licensing_Window_end_Zoe>
    <HD_Purchase_Window_Start_Zoe>2012-04-01</HD_Purchase_Window_Start_Zoe> 
```

首先，我需要检查这两个 xml 是否具有相同的标题，如果它们具有相同的标题并将它们合并，如果可以从其中任何一个中找到，则合并所有值。

谢谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:12:23.120

我写一些这样的想法：

```
$x1 = <<<XML
<xml>
<Title>Sea Change</Title>
<thirdParty_ID></thirdParty_ID>
<Animation_Indicator>N</Animation_Indicator>
<Blackout_Indicator>N</Blackout_Indicator>
<SD_Purchase_Zoe></SD_Purchase_Zoe>
<SD_Purchase_Window_Start_Zoe></SD_Purchase_Window_Start_Zoe>
<SD_Purchase_Window_End_Zoe></SD_Purchase_Window_End_Zoe>
<SD_Licensing_Window_start_Zoe></SD_Licensing_Window_start_Zoe>
<HD_Licensing_Window_start_Zoe>2012-04-01</HD_Licensing_Window_start_Zoe>
<HD_Licensing_Window_end_Zoe>2013-04-01</HD_Licensing_Window_end_Zoe>
<HD_Purchase_Window_Start_Zoe>2012-04-01</HD_Purchase_Window_Start_Zoe>
</xml>
XML;

$x2 = <<<XML
<xml>
<Title>Sea Change</Title>
<thirdParty_ID></thirdParty_ID>
<Animation_Indicator>N</Animation_Indicator>
<Blackout_Indicator>N</Blackout_Indicator>
<SD_Purchase_Zoe>Y</SD_Purchase_Zoe>
<SD_Purchase_Window_Start_Zoe>2012-04-01</SD_Purchase_Window_Start_Zoe>
<SD_Purchase_Window_End_Zoe>2013-04-01</SD_Purchase_Window_End_Zoe>
<SD_Licensing_Window_start_Zoe>2012-04-01</SD_Licensing_Window_start_Zoe>
<HD_Licensing_Window_start_Zoe></HD_Licensing_Window_start_Zoe>
<HD_Licensing_Window_end_Zoe></HD_Licensing_Window_end_Zoe>
<HD_Purchase_Window_Start_Zoe></HD_Purchase_Window_Start_Zoe>
</xml>
XML;

$oXML1 = new SimpleXMLElement($x1);
$oXML2 = new SimpleXMLElement($x2);

$oOutput = new SimpleXMLElement('<xml></xml>');

foreach ( $oXML1 as $key => $value )
{
    if ( empty($value[0]) )
        $oOutput->addChild($key, $oXML2->{$key}[0]);
    else
        $oOutput->addChild($key, $value[0]);
}

print_r($oOutput->asXML()); 
```

# c# - Error initializing threads (Closure?)

> ID：11267890
> 
> 赞同：1
> 
> 时间：2012-06-29T19:32:25.337
> 
> 标签：c#, multithreading, closures

This is my first question in this forum, so i hope to be clear:

I´m using Visual Studio 2010 RTM Programming in C#

The constructor of the class, which is converted to a thread, are always taking the values from the last Dictionary Entry. I don´t know what i´m doing wrong, someone?

This Code doesn´t work:

```
 Dictionary<string, Queue<string>> colas;

    public DataDispatcher(Dictionary<string, int> lectoras, ReadEventHandler callback)
    {
        colas = new Dictionary<string, Queue<string>>();

        foreach (KeyValuePair<string, int> pair in lectoras)
        {
            colas.Add(pair.Key, new Queue<string>>());

            Thread hilo = new Thread(
                () => new ReadHandler(pair.Value, colas[pair.Key], callback));

            hilo.Name = "Hilo-" + hilo.ManagedThreadId.ToString();

            hilo.Start();
        }
    } 
```

Instead, this Code works perfectly:

```
 Dictionary<string, Queue<string>> colas;

    public DataDispatcher(Dictionary<string, int> lectoras, ReadEventHandler callback)
    {
        colas = new Dictionary<string, Queue<string>>();

        foreach (KeyValuePair<string, int> pair in lectoras)
        {
            Queue<string> qs = new Queue<string>();

            colas.Add(pair.Key, qs);

            int jaula = pair.Value;

            Thread hilo = new Thread(
                () => new ReadHandler(jaula, qs, callback));

            hilo.Name = "Hilo-" + hilo.ManagedThreadId.ToString();

            hilo.Start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:40:41.147

It is a very common error called 'capturing the loop variable', or 'closing over the variable'.

```
 foreach (KeyValuePair<string, int> pair in lectoras)
 {
     colas.Add(pair.Key, new Queue<string>>());  // here 'pair' is OK

     var copy = pair;  // this is the fix, make a new 'copy' for each thread

     Thread hilo = new Thread(
         () => new ReadHandler(copy.Value, colas[copy.Key], callback)); 
 } 
```

You were starting a number of threads all using the *same* variable `pair`. This 'captured' variable behaves like a pass-by-reference parameter. By the time the Threads start executing the `foreach()` is done and they all use the last element.

On a side note, you probably shouldn't be using bare Threads for this. Use the ThreadPool or Task objects from the TPL.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:44:06.987

Yes. You are a victim of what's called "Captured Variable." The thing being captured here is `pair`. See this article: [http://blog.sluu.org/captured-variable/](http://blog.sluu.org/captured-variable/)

**Edit:** I also notice a syntax error in OP's first snippet: `colas = new Dictionary<string, Queue<string>>();` There's an extra greater sign in this line.

# javascript - jPlayer 与 PhoneGap 兼容吗？

> ID：11267894
> 
> 赞同：0
> 
> 时间：2012-06-29T19:33:05.670
> 
> 标签：javascript, android, html, cordova, jplayer

我有一个使用 jPlayer 作为播放列表音乐播放器主干的网络应用程序。这可以在 Google Chrome 的桌面上正常工作，但不能在 PhoneGap（移植到 Android）中正常工作，我已将问题缩小到 jPlayer。有谁知道PhoneGap是否支持jPlayer？

另外：我知道有一个重复的问题：[jPlayer and PhoneGap Build compatible](https://stackoverflow.com/questions/6938154/jplayer-and-phonegap-build-compatibility)，但没​​有人在那里回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:13:26.263

Android WebView 中的音频标记已损坏。如果我没记错的话，jPlayer 使用了 Audio 标签，所以它也会失败。

我正在研究一个猴子补丁：

[http://macdonst.github.com/corinthian/](http://macdonst.github.com/corinthian/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T15:31:05.280

是的，它会工作，jPlayer 只是包装了 HTML5 音频/视频功能。一些平板设备（iOS safari）的媒体标签存在问题/缺陷/限制，如果某些东西不起作用，那将是 HTML5 音频/视频标签而不是 jPlayer 的问题。

# c# - 任务并行库 ArgumentException

> ID：11267895
> 
> 赞同：1
> 
> 时间：2012-06-29T19:33:08.077
> 
> 标签：c#, .net, task-parallel-library

我正在尝试使用任务并行库逐个单元格地构建矩阵。

我有以下代码可以做到这一点：

```
List<Campaign> campaigns = GetHomeCampaigns();
Dictionary<int, string> sellers = GetHomeSellers();

int numTasks = campaigns.Count*sellers.Count;
Task<MatrixCell<string>>[] statusTasks = new Task<MatrixCell<string>>[numTasks];

int count = 0;                   
for(int i = 0; i < campaigns.Count -1;i++)
{
    for(int j = 0; j < sellers.Count -1;j++)
    {
        Func<MatrixCell<string>> getStatus = () => GetStatus(campaigns[i].CampaignID, sellers.ElementAt(j).Key);
        statusTasks[count] = Task.Factory.StartNew(getStatus);
        count++;
    }
}
Task.WaitAll(statusTasks); 
```

我正在尝试做的是并行处理和确定每个单元格，然后在它们全部完成后，使用与此示例无关的附加代码逐行组装矩阵。

我现在面临的问题是以下行

```
Task.WaitAll(statusTasks) 
```

我收到以下 ArgumentException

```
The tasks array included at least one null element.
Parameter name: tasks 
```

我检查了数组，它显示所有项目都存在于 statusTasks 中。

不知道还有什么地方可以看。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T19:38:00.217

当您在基于 0 的索引语言中使用`for`循环时，您不需要执行`< .Count - 1`. 那应该是：

```
for (int i = 0; i < campaigns.Count; i++) 
```

因为它是`<`和不是`<=`，它已经确保最后一个项目是`campaigns[campaigns.Count - 1]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:52:45.353

如果您真的想使用 TPL，请考虑使用 Parallel 类：

```
Parallel.For(0, campaigns.Count, i =>  // the outer loop is most important
{
    Parallel.For(0, sellers.Count, j =>  
    {
        GetStatus(campaigns[i].CampaignID, sellers.ElementAt(j).Key);
    }
}));
// no Waiting here 
```

这将使用一个分区器，该分区器可能会决定不为每个任务使用任务，`j`而是构建段。

# javascript - jQuery JSON 初学者尝试创建简单的服务器请求

> ID：11267903
> 
> 赞同：0
> 
> 时间：2012-06-29T19:33:36.200
> 
> 标签：javascript, jquery, ajax, json

我在使用 JavaScript 方面有些经验，但在处理 jQuery 和 JSON 方面没有经验。

我正在尝试创建一个从我们的数据库中获取数据的工具，以便我可以创建显示数据的新方式。

如果我在浏览器中输入以下 URL，我会收到一个我已识别为 JSON 并显示在页面上的响应：

```
**URL:** http://osuc.biosci.ohio-state.edu/hymDB/OJ_Break.getSpmInfo?cuid=OSUM%20110110&callback=test

**Response:** test({"spmInfo":{"cuid":"OSUM 110110","alt_ids":[],"loc_name":"Mad River near State Route..... 
```

我一直在尝试构建一些简单的东西来显示来自数据库的信息，但到目前为止，我什至没有成功让我的页面显示任何相关内容。任何帮助和建议将不胜感激。

这是我的代码：

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="json.js"></script>
<script type="text/javascript" src="getdb.js"></script>
</head>
<body>
<button type="button" onclick="getinfo()">click</button>
<h6 id="objinfo"></h6>
</body>
</html> 
```

JavaScript：

```
function getinfo(){
    $.getJSON('http://osuc.biosci.ohio-state.edu/hymDB/OJ_Break.getSpmInfo?cuid=OSUM%20110110&callback=test', function(data) {
  $('#objinfo').html(JSON.stringify(data));
});} 
```

这是 JSFiddle 链接的[链接](http://jsfiddle.net/qqFJL/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:39:51.453

请务必注意，在您的 JSON 有效之前，设置正确的标头并不重要。我从您的示例中的 url 中获取了您的响应，并通过 JSONLint 运行它来验证它。

[http://jsonlint.com/](http://jsonlint.com/)

* * *

这是我用来将数据数组转储为 JSON 响应的简单函数：

```
/**
 * @param $content Array of data to json_encode
 * @param bool $nocache If true, sets a no-cache header
 */
public function jsonOutput($content,$nocache = false)
{
    if( $nocache === true )
        header('Cache-Control: no-cache, must-revalidate');

    header('Content-type: application/json');
    print json_encode($content);
    exit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T14:27:16.967

我找到了一个解释 3rd 方 JSON 请求的解释，这对我有很大帮助。向下滚动到“从第三方服务器检索 JSON”部分，该部分位于页面下方约 2/3 处。感谢 MetalFrog 的帮助。

[http://www.hunlock.com/blogs/Mastering_JSON_%28_JavaScript_Object_Notation_%29#quickIDX9](http://www.hunlock.com/blogs/Mastering_JSON_%28_JavaScript_Object_Notation_%29#quickIDX9)

# javascript - 无法递归淡入，切换，显示工作

> ID：11267904
> 
> 赞同：0
> 
> 时间：2012-06-29T19:33:46.663
> 
> 标签：javascript, jquery, callback, fadein

我正在尝试使 recursive或函数正常工作，但看不到错误在哪里`fadeIn`。`show``toggle`

**HTML：**

```
<table id="myTable"></table>​ 
```

**JavaScript：**

```
$(function () {
    var showMenu = function (i, callback) {
            if (i > 10) {
                //stop
                return;
            } else {
                $('#myTable').append('<tr id="method_1' + i + '" style="display: none;"><th><label for="id_CAM_1">CMethod (CAM):</label></th><td><select name="CAM_1_' + i + '" id="id_1_' + i + '">        <option value="2">2- canopy</option>        <option value="9">9-canop</option></select>      </td></tr>');
                $('#method_1' + i).fadeIn('1000', showMenu(i + 1, showMenu));
            }
        }
    showMenu(2, showMenu);
}) 
```

问题是效果不是在回调中调用，而是一次调用。

[问题](http://jsfiddle.net/5NZPL/22/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T19:37:52.607

在您的 fadeIn 回调中，您必须提供一个函数，而不是函数调用（您在做什么）。我会建议：

```
$('#method_1'+i).fadeIn('1000', function () {
    showMenu(i+1,showMenu);
}); 
```

我认为应该这样做...

这是一个展示我的更改的 jsFiddle：http: [//jsfiddle.net/mAETY/1/](http://jsfiddle.net/mAETY/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:38:23.320

那是因为您没有提供对 的回调`fadeIn`，而是`showMenu`立即再次调用（甚至在 之前`.fadeIn()`）。

通过实际提供一个函数来调用而不是当场调用一个函数来解决这个问题：

```
 $('#method_1'+i).fadeIn('1000',function() { showMenu(i+1,showMenu) }); 
```

[**在行动中看到**](http://jsfiddle.net/k6SpA/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T19:40:53.320

尝试：

```
$(function(){

    var menu = (function(i){
         var $this =  {
             show: function(){
                  if(i++ > 10) return;
 $('#myTable').append('<tr id="method_1'+i+'" style="display: none;"><th><label for="id_CAM_1">CMethod (CAM):</label></th><td><select name="CAM_1_'+i+'" id="id_1_'+i+'">        <option value="2">2- canopy</option>        <option value="9">9-canop</option></select>      </td></tr>');

                  $('#method_1'+i).fadeIn('1000',$this.show); 

             }
         }
             return $this;
    });

    menu(0).show();

});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T19:46:51.380

或者您可以从表格行中删除 id 和 style 并将表格行封装在潜水中，然后将 id 和样式添加到它。它会起作用的。

```
$(function(){

    var showMenu = function (i,callback){

      if (i>10){
        //stop
         return;
      }else{
         $('#myTable').append('
         <div id="method_1'+i+'" style="display: none;">
         <tr><th><label for="id_CAM_1">CMethod (CAM):</label></th><td><select name="CAM_1_'+i+'" id="id_1_'+i+'">        <option value="2">2- canopy</option>        <option value="9">9-canop</option></select>      </td></tr>
         </div>');

          $('#method_1'+i).fadeIn('1000', function () {     showMenu(i+1,showMenu); });               
      }
    }

    showMenu(2,showMenu);                                                           

}) 
```

**编辑**

[http://jsfiddle.net/weightlossexp/V3gDE/](http://jsfiddle.net/weightlossexp/V3gDE/)

# where - PyroCMS 中正确的 PyroStreams where 语句

> ID：11267905
> 
> 赞同：0
> 
> 时间：2012-06-29T19:33:58.257
> 
> 标签：where, pyrocms, pyro

我是火焰兵和 CI 菜鸟，对于任何明显的遗漏，我深表歉意。

我正在为一家旅游公司建立一个网站。我已经设置了一个带有离开位置的流和另一个带有旅游的流。两者都有一个名为出发地点名称的分配字段。我正在尝试输出每个位置下的旅行列表，但我无法弄清楚 where 语句。

```
{{streams:departure_locations}}
  {{streams:tours where="`departure_location_name`='departure_location_name'"}}
    {{tour_name}}
  {{/streams:tours}}
{{/streams:departure_locations}} 
```

我得到了一个没有结果，尽管肯定有条目应该适合 where 语句。谁能看到我哪里出错了？提前致谢。

我正在使用 PyroCMS v2.1.2。我也在 PyroCMS 论坛上发布了这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:40:03.587

看起来我用这篇文章的语法想出来了：http: [//www.pyrocms.com/forums/posts/view_reply/16409](http://www.pyrocms.com/forums/posts/view_reply/16409)

```
{{streams:tours where="`departure_location_name`='{{departure_location_name}}'"}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T13:56:54.330

我今天堆叠了这个问题，并使用如下参数解决`include`了`include_by`：

```
{{ streams:tours include=departure_location_name include_by="departure_location_name" }} 
```

PyroCMS[官方文档引用](http://docs.pyrocms.com/2.2/manual/plugins/streams/entry-looping#parameter-reference)

# apache - 如何在 R Apache 中检索 cookie

> ID：11267908
> 
> 赞同：0
> 
> 时间：2012-06-29T19:34:04.853
> 
> 标签：apache, r, cookies, rapache

如何在 R-Apache 中获取 cookie 的值？

我使用 brew 在我的 html 代码中设置了 cookie：

`setCookie(name="ID",value=paste(sample(1:9999,1)))`

我的页面有一个表单，可以将发布数据发送到我的 R 代码。我怎样才能在 R 代码中检索这个 cookie？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T10:20:24.850

也许使用[RApache 的内置变量](http://rapache.net/manual.html#rapache_Variables): `COOKIES`。简短的例子：

```
setCookie(name="ID",value=paste(sample(1:9999,1)))
cat(COOKIES[["ID"]]) 
```

# mathjax - 如何在 MathJax 中定义一个新函数（'operator'）？

> ID：11267911
> 
> 赞同：22
> 
> 时间：2012-06-29T19:34:28.557
> 
> 标签：mathjax

我正在使用 MathJax 在我的网站上显示公式。开箱即用，MathJax 可以识别许多函数，例如`sin`, `cos`, ...，但是很多函数都丢失了，例如`sech`(双曲正割) 和`csch`(双曲余割)。我知道我仍然可以通过 来在公式中使用这些函数`\text`，例如

```
\text{sech} u 
```

但是，我宁愿`\sech`工作。为此，我尝试了

```
<div style="display:none">
  $\DeclareMathOperator{\sech}{sech}
   \DeclareMathOperator{\csch}{csch}$
</div> 
```

紧随其后`<body>`。（我还尝试在 之后添加一个星号`DeclareMathOperator`。）

这*几乎*可以工作。问题是现在

```
\sech^2 u 
```

将正方形*放在上面* `sech`，而不是在它后面（[证明](http://english.rejbrand.se/trecs/pseudosphere.asp)）。有没有办法来解决这个问题？在 MathJax 中定义新函数（“运算符”）的首选方法是什么？肯定有一个好方法，因为没有全谱的双曲函数谁能生存？！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-01T17:42:42.397

`\DeclareMathOperator`宏不提供声明在上标和下标位置始终有限制的运算符的方法，这就是为什么在`\sech`显示的方程式中使用时将上标置于其上方的原因。

你想要的是以下内容：

```
<div style="display:none">
  $
    \newcommand{\sech}{\mathop{\rm sech}\nolimits}
    \newcommand{\csch}{\mathop{\rm csch}\nolimits}
  $
</div> 
```

这将为您提供像`\sin`and一样工作的运算符`\cos`。请注意，与使用 的版本相比，这种形式的间距会更好`\text{...}`，因为`\mathop`它将在运算符名称周围提供适当的间距（但是，MathJax 中有一个错误会导致在存在上标或下标时空格丢失；这将在下一个版本中修复）。

# php - 仅显示带有 MySQL 查询的有限类别

> ID：11267918
> 
> 赞同：0
> 
> 时间：2012-06-29T19:36:23.090
> 
> 标签：php, mysql, categories

我有一个 mysql 数据库，其中大约有数百个相册类别。当我使用显示专辑时

```
"SELECT * FROM 'album' `status`='1' ORDER BY `cat_name` DESC LIMIT 10" 
```

所以它将显示最后 10 个类别，但如果我只想显示数百个类别之间的 15 个类别，那么查询应该是什么？我试过这个。

```
"SELECT * FROM 'album' `status`='1' and `cat_id`='2' || `cat_id`='7' || `cat_id`='8' || `cat_id`='14' || `cat_id`='20' ORDER BY `cat_name` DESC LIMIT 10" 
```

在这里它显示了我想要显示的类别，但它也显示了我在这里没有通过使用`status`='1' (inactive status=0) 显示的非激活类别，任何机构都可以帮助我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:40:23.127

您需要在您的“cat_id”或条件周围加上括号 ()。`'status'='1'`AND 仅适用于其他“cat_id ” ，`'cat_id'=2'`但不适用于其他“cat_id”，因为条件是从左到右读取的。

```
"SELECT * FROM 'album' WHERE `status`='1' and (`cat_id`='2' || `cat_id`='7' || `cat_id`='8' || `cat_id`='14' || `cat_id`='20') ORDER BY `cat_name` DESC LIMIT 10" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:43:55.000

您必须将`WHERE`关键字放在条件之前。

此外，不要使用所有这些`OR`s 或`||`s，而是使用`IN`.

```
SELECT *
FROM album
WHERE status = 1 AND cat_id IN (2,7,8,14,20)
ORDER BY cat_name DESC
LIMIT 10 
```

# css - 什么会导致图像替换类仅在 IE7 中失败？

> ID：11267922
> 
> 赞同：0
> 
> 时间：2012-06-29T19:36:29.857
> 
> 标签：css, internet-explorer, cross-browser

我正在尝试将**HTML5 样板系统 (http://html5boilerplate.com/)**用于客户的网站，但是当在某些浏览器和某些设备上查看该网站时，我遇到了内置 .ir 类的问题。即基于我的反馈和测试的**IE7和一些（或全部）黑莓。**在这些情况下，设计的主要导航和其他元素没有出现/不可导航。客户是一家迎合大型商业区的餐厅，因此不幸的是，他们的大量潜在客户和客户仍在使用 IE7 的公司系统上，无法按原样使用该网站。

**以下是相关页面的链接：**
[www.vb3restaurant.com](http://vb3restaurant.com)

[vb3restaurant.com/index-pizza.html](http://vb3restaurant.com/index-pizza.html)

**这是我认为是问题的 .ir 类（尽管它可能是其他问题）：**

**.ir { 显示：块；边框：0；文本缩进：-999em；溢出：隐藏；背景颜色：透明；背景重复：不重复；文本对齐：左；方向：ltr；*行高：0；}**

如果有人能指出我正确的方向是什么是“破坏”或更好的/跨浏览器/IE友好的方式来完成这个设计，我将不胜感激，通过图像替换或其他一些技术。

我无论如何都不是专业的程序员，但我已经建立了一些网站并使用了一些不同的框架、CMS 等。我试图在这个网站和其他地方寻找答案，所以如果我提前道歉我错过了一个回答这个问题的明显线索，或者我是否在错误的地方或错误地问过它。
当然 - 提前感谢您的时间和帮助！

最佳，AB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:29:17.427

该`ir`课程正在隐藏内容`text-indent:-999em`（改进：[http](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/) ://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/ ）。

但是替换这些项目的图像具有`nth-child`IE7 或 IE8 无法识别的新选择器：http: [//kimblim.dk/css-tests/selectors/](http://kimblim.dk/css-tests/selectors/)。`nth-child`不幸的是，这些浏览器中的渲染引擎早于选择器。

您可以编写一个 jQuery 填充程序来修补您的选择器：http: [//verboselogging.com/2010/01/17/making-nth-child-work-everywhere](http://verboselogging.com/2010/01/17/making-nth-child-work-everywhere)。或者为所有浏览器重写你的选择器，给菜单项 id 或类名。

糟透了吧？好吧，有些人认为是图像替换！（特别是对于低带宽的移动设备）所以......你也可能忘记使用 IE7/8 的图像置换，使用 IE 特定的样式表来设置纯文本的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:32:26.303

我怀疑这是这个规则：

```
#mainNav ul li:nth-child(1) a {
显示：块；
背景图像：url（../images/home-nav-test.png）；
背景重复：不重复；
背景位置：40px -35px；
}

```

改为在每个导航项上使用类。

# java - ActionBar 或 ActionBarSherlock - 平滑隐藏/显示 ActionBar

> ID：11267923
> 
> 赞同：19
> 
> 时间：2012-06-29T19:36:35.430
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我正在使用[ActionBarSherlock](http://actionbarsherlock.com/)，并尝试隐藏/显示全屏图像的 ActionBar，使用：

```
getSupportActionBar.hide(); 
```

和

```
getSupportActionBar.show(); 
```

但这真的很紧张和尴尬。有没有办法让它更平滑，或者应用翻译/不透明动画？

在进一步检查 ABS 源并观察其行为后，它似乎至少定义了最少量的动画。标准的ActionBar 则不能这样说。

为了完整起见，这里是我从 ImageView.click 调用的相关代码：

```
if( shouldRender )
{
  . . .

  getSupportActionBar().hide();

  getWindow().addFlags( WindowManager.LayoutParams.FLAG_FULLSCREEN );
}
else
{
  . . .

  getSupportActionBar().show();

  getWindow().clearFlags( WindowManager.LayoutParams.FLAG_FULLSCREEN );
} 
```

值得注意的是，标志设置/清除也会导致跳跃，但不太明显，所以我打算稍后解决它，如果有的话。

**编辑：** [这](https://stackoverflow.com/a/7439561/420001)（由 ABS 的创建者）似乎表明在本机 ActionBar 上是不可能的。我想我可以只编辑定义他的动画的两个 XML 文件，但这不会给我完整的平台渗透。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-29T21:53:47.743

我使用覆盖 ActionBar

```
 requestWindowFeature(com.actionbarsherlock.view.Window.FEATURE_ACTION_BAR_OVERL‌​AY); 
```

`show()`当/`hide()`被调用时它不显示动画。

# php - 将文字写入图片不起作用

> ID：11267925
> 
> 赞同：1
> 
> 时间：2012-06-29T19:36:43.757
> 
> 标签：php

我制作了一个 php 脚本，它可以在 Jpg 图像上打印文本，它将用作我网站的按钮。但是，它没有显示任何带有文字的图片。所以，我在 PHP 代码检查器上测试了代码，没有任何问题。JPG 按钮的源文件与脚本位于同一目录中。

![目录](../Images/d9c3832d1b04c643cfb6b57083879b00.png)

PHP 代码

```
<?php
$Text = $_GET['value'];
$Image = ImageCreateFromJPEG("Button.jpg");
$Cord = imagecolorallocate($rImg, 0, 0, 0);
imagestring($Image,3,3,3,urldecode("$Text"),$Cord);
header('Content-type: image/jpeg');
imagejpeg($Image,NULL,100);
?> 
```

它应该写入文本的图片大小是“100 x 30”所以，这可能是一个简单的问题，但我不确定是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:58:37.673

您将颜色分配给`$rImg`不存在的变量。`$Image`而是放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:59:14.803

```
$Cord = imagecolorallocate($rImg, 0, 0, 0); 
```

它应该是`$Image`，因为变量`$rImg`不存在。

# .htaccess - .htacess 重定向以删除 URL 末尾的“/”？

> ID：11267931
> 
> 赞同：0
> 
> 时间：2012-06-29T19:37:16.627
> 
> 标签：.htaccess

出于某种原因，某些链接会在 url 的末尾创建斜杠。我发现不同设备中的相同链接可以或不能在 URL 末尾添加斜杠。

由于我的 htaccess 结构，如果 URL 有斜杠，我有时会出错。有没有办法使用 htaccess 从 URL 中删除它们？

例如：

```
example.com/s/ 
```

立即重定向到：

```
example.com/s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:48:29.307

[一个类似的问题](https://stackoverflow.com/a/4217445/969967)给出了这个答案：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} (.*)$
RewriteRule ^(.+)/$ http://www.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T13:44:41.407

这可以完成工作，您无需指定域：

`RewriteRule ^(.+)/$ /$1 [R=301,L]`

# c# - 当我使用 IQueryable 函数时，它会显着增加查询时间

> ID：11267935
> 
> 赞同：0
> 
> 时间：2012-06-29T19:37:27.100
> 
> 标签：c#, performance, linq, oracle, entity-framework

当我执行以下操作时怎么会：

```
var query = from a in OBJ where a.ID == ID select c; 
```

它做到了 <1 秒，但是一旦我添加了 IQueryable 函数，它会增加到大约 3 秒吗？

```
var query = (from a in OBJ where a.ID == ID select c).SingleOrDefault(); 
```

当我使用 FirstOrDefault() 时也会发生同样的情况。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-29T19:39:05.830

这：

```
var query = from a in OBJ where a.ID == ID select c; 
```

...仅*代表*查询。它根本不*执行*它。它应该非常*快*——不仅仅是“不到一秒钟”，而是“几乎无法估量”。

这：

```
var query = (from a in OBJ where a.ID == ID select c).SingleOrDefault(); 
```

...获取*实际数据*，这意味着它必须执行查询。

通常，LINQ 尽可能使用*延迟执行*。这只是一个例子。搜索 LINQ 延迟执行，您将获得*大量*文章供您阅读。潜入最适合您阅读风格的那个:)

# vb.net - 在一个数据集中使用多个数据表在 Access DB 中插入新记录

> ID：11267942
> 
> 赞同：0
> 
> 时间：2012-06-29T19:37:59.593
> 
> 标签：vb.net, ms-access, datatable, dataset, oledb

VB2010 我有一个数据集，我添加了多个表，然后我填写这些表，然后将这些记录插入一个 Access db。

```
 'create a new DataSet
    Dim dsNav As New DataSet

    'first table
    Dim daTrips As New OleDb.OleDbDataAdapter("SELECT * FROM Trips", connNav)
    daTrips.Fill(dsNav, "Trips")
    Dim cbTrips As New OleDb.OleDbCommandBuilder(daTrips)

   'second table
    Dim daCars = New OleDb.OleDbDataAdapter("SELECT * FROM Cars", connNavDb)
    daCars.Fill(dsNav, "Cars")
    Dim cbCars As New OleDb.OleDbCommandBuilder(daCars)

    'here i open a huge text file and depending on the data i encounter, I create
    'a new DataRow and add it to the appropriate table. i add many new rows to each
    'table. for example
    Dim dsNewRow As DataRow = {tblCars}.NewRow()
    dsNewRow.Item("CarId") = textline.Substring(0, 10)
    dsNewRow.Item("CarMake") = textline.Substring(11, 15)
    tblCars.Rows.Add(dsNewRow)

    'i finish reading the text file and filling up the tables in the one DataSet
    'now i want to insert those records into the Access db
    Dim rowCnt1 As Integer = daTrips.Update(dsNav, "Trips")
    Dim rowCnt2 As Integer = daCars.Update(dsNav, "Cars") 
```

第一次更新有效，但在第二次更新时出现异常：

> System.Data.dll System.Data.OleDb.OleDbException (0x80040E14) 中出现“System.Data.OleDb.OleDbException”类型的第一次机会异常：INSERT INTO 语句中的语法错误。在 System.Data.Common.DbDataAdapter.UpdatedRowStatus(RowUpdatedEventArgs rowUpdatedEvent, BatchCommandInfo[] batchCommands, Int32 commandCount) 在 System.Data.Common.DbDataAdapter.UpdatedRowStatusErrors(RowUpdatedEventArgs rowUpdatedEvent, BatchCommandInfo[] batchCommands, Int32 commandCount) 在 System.Data.Common .DbDataAdapter.Update(DataRow[] dataRows, DataTableMapping tableMapping) 在 System.Data.Common.DbDataAdapter.UpdateFromDataTable(DataTable dataTable, DataTableMapping tableMapping) 在 System.Data.Common.DbDataAdapter.Update(DataSet dataSet, String srcTable)

我看过各种文章，他们都建议用一个包含多个 DataTables 的 DataSet 来更新数据库是可行的，但只是无法弄清楚为什么这是轰炸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T20:55:27.327

你在哪里设置你的`insertcommand`和`updatecommand`属性`dataadapter`？

从您的错误看来，它`dataadapter`正在尝试将记录插入数据库，但`insertcommand`没有实例化或没有给出值，因此它抛出了错误。

由于数据适配器通过检查数据表中的每一行来决定在`.Update`调用中执行什么操作，`rowstate`因此您添加到表中的任何行都将尝试使用`insertcommand`附加到您的`dataadapter`.

尝试在您的设备上设置`insertcommand`and并再次尝试运行它，看看会发生什么。`updatecommand``dataadapters`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:20:39.480

我希望将在评论中发现的所有内容作为答案

1.  尽量避免在表格中使用保留关键字的字段（以及嵌入空格的字段）
2.  CommandBuilders 需要主键信息，因此添加一个`adapter.MissingSchemaAction = MissingSchemaAction.AddWithKey`以从 db 模式中恢复主键信息
3.  对更新使用与填充相同的连接

    ```
    Dim dsNav As New DataSet 
    'first table 
    Dim daTrips As New OleDb.OleDbDataAdapter("SELECT * FROM Trips", connNav) 
    daTrips.MissingSchemaAction = MissingSchemaAction.AddWithKey 
    daTrips.Fill(dsNav, "Trips") 
    Dim cbTrips As New OleDb.OleDbCommandBuilder(daTrips) 

    'second table 
    Dim daCars = New OleDb.OleDbDataAdapter("SELECT * FROM Cars", connNav) 
    daCars.MissingSchemaAction = MissingSchemaAction.AddWithKey 
    daCars.Fill(dsNav, "Cars") 
    Dim cbCars As New OleDb.OleDbCommandBuilder(daCars) 

    'here i open a huge text file and depending on the data i encounter, I create 
    'a new DataRow and add it to the appropriate table. i add many new rows to each 
    'table. for example 
    Dim dsNewRow As DataRow = {tblCars}.NewRow() 
    dsNewRow.Item("CarId") = textline.Substring(0, 10) 
    dsNewRow.Item("CarMake") = textline.Substring(11, 15) 
    tblCars.Rows.Add(dsNewRow) 

    'i finish reading the text file and filling up the tables in the one DataSet 
    'now i want to insert those records into the Access db 
    Dim rowCnt1 As Integer = daTrips.Update(dsNav, "Trips") 
    Dim rowCnt2 As Integer = daCars.Update(dsNav, "Cars") 
    ```

# jquery-ui - 触发 Jquery UI 手风琴事件

> ID：11267944
> 
> 赞同：1
> 
> 时间：2012-06-29T19:38:10.200
> 
> 标签：jquery-ui, triggers, jquery-ui-accordion, jquery

我一直在尝试使此代码正常工作，但我不知道如何触发 Accordion 事件。

这是代码

```
$('.acc-f').accordion({
        header: '.toggler',
        event: 'click',
        autoHeight: false,
        navigation: true,
        collapsible: true,
        active: false
    });

$("map > area").click(function(){
        var getAnchor = $(this).attr('href');
            $("#"+getAnchor+"").trigger('click');
}); 
```

连接到 .trigger() 的选择器是标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T11:53:47.723

您需要使用手风琴小部件的“活动”选项，而不是触发标题，并将您要打开的标题的索引传递给它（记住第一个标题的索引是 0）。

前任。 `$('.acc-f').accordion('option', 'active', index-of-el-to-open);`

尝试这个：

```
 $("map > area").click(function(){
        var id = $("this").attr("href");
        index = $(".selector-for-your-headings").index(id);
        $(".acc-f").accordion("option", "active", index);

    }); 
```

# php - 如何从多个表中高效地访问用户数据

> ID：11267946
> 
> 赞同：1
> 
> 时间：2012-06-29T19:38:14.580
> 
> 标签：php, mysql, sql

许多论坛和网站在帖子或表格中显示用户信息（当您查看超过 1 个用户时）

例如，您可能有一个论坛主题，其中的每个帖子都显示有关海报的信息，如下所示：

姓名：约翰 电子邮件：email@email.com 帖子：450

他们可能有一个用于存储姓名和电子邮件的用户表，然后是一个用于帖子的表。

我能想到的唯一想法是在每次用户发布时在用户表中的一行（对应于发布帖子的用户）中添加 1，这似乎是一个不好的解决方案我。

他们如何计算每个用户的帖子数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:38:59.010

他们使用 SQL[`COUNT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)函数来动态生成计数：

```
SELECT COUNT( *) FROM posts WHERE user_id = 1 
```

这将计算`posts`表中符合条件的用户写入的行数`user_id = 1`。

要在一个查询中执行此操作，您可以使用 JOIN 和 GROUP BY 标识符，如下所示：

```
SELECT username, user_email, COUNT( p.post_id) as num_posts
    FROM users u
    LEFT JOIN posts p
    ON p.user_id = u.user_id
WHERE u.user_id = 1
GROUP BY u.user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:41:05.543

假设电子邮件在用户表中是唯一的，您可以执行以下操作：

```
SELECT u.name, u.email, count(*) 
FROM users u, posts p
WHERE u.user_id = p.user_id
GROUP BY u.email; 
```

# php - 如何使用 hook_menu_alter() 在 Drupal 6 中定位特定的内容类型

> ID：11267947
> 
> 赞同：0
> 
> 时间：2012-06-29T19:38:15.030
> 
> 标签：php, security, drupal, drupal-6

我正在尝试针对特定的内容类型，以便匿名用户在任何时候尝试访问内容类型的页面时都会给他们一个未经授权的消息。为此，我认为我需要使用 hook_menu_alter() 并向其添加访问回调。（这是一个 Drupal 6 站点）。

我遇到的问题是我真的不知道如何向菜单系统识别该内容类型的节点。我知道生成的 URL 类似于“name-and-biography/name-and-biography-%username”。所以我尝试了这个和其他一些组合，但似乎无法让它发挥作用。

我基本上试过这个：

```
function mysite_profile_menu_alter(&$items) {
  //Restrict access to profile pages
  $items['name-and-biography/%title']['access callback'] = 'mysite_profile_content_access';
}

function mysite_profile_content_access() {
  //Check to make sure they are an authenticated user
  GLOBAL $user;

  foreach ($user->roles as $role) {
    if ($role == 'authenticated user') {
      return TRUE;
    }
  }

  return FALSE;
} 
```

我也尝试过像“name-and-biography/%”和“name-and-biography/*”这样的项目路径。它似乎不起作用。默认的 URL 别名设置为“[type-name]/[title-raw]”。并且标题生成设置为“[type-name] - ([author-name])”。

我也尝试使用 hook_access()，但这似乎没有运行。即使在多次刷新所有缓存之后。这两种选择似乎都不是。

有没有人知道我需要如何在我的 hook_menu_alter() 中定位它？或者让 hook_access() 工作？还是有其他想法？我确实尝试了内容访问模块，但它在我们的网站上产生了问题。因此，另一种选择将是首选。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T21:55:21.880

实施`hook_nodeapi()`以检查访问`view`：

```
/**
 * Implementation of hook_nodeapi().
 */
function MODULE_nodeapi(&$node, $op, $a3 = NULL, $a4 = NULL) {
  global $user;

  switch ($op) {
    case 'view':
      if ($node->type == 'CONTENT_TYPE' && $user->uid < 1) {
        drupal_access_denied();
        exit;
      }
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T19:53:34.053

hook_menu_alter 是关于更改现有项目（路径，如 /admin、/node/%、admin/reports/status 等）。如果要添加新菜单项，请改用 hook_menu()。此外，您没有定义页面回调，因此这也不是有效的 hook_menu()。

通常要引入新的权限级别，我们使用 hook_perm() 来添加新的权限项。因此，您不必硬编码允许哪些角色访问内容。您也可以尝试[内容访问](http://drupal.org/project/content_access)模块。

请参阅[http://drupalcode.org/project/examples.git/blob/refs/heads/6.x-1.x:/node_access_example/node_access_example.module](http://drupalcode.org/project/examples.git/blob/refs/heads/6.x-1.x:/node_access_example/node_access_example.module)，这是一个很好的节点访问示例。

# javascript - 如何根据复选框的状态更改已经拥有自己的样式表的另一种媒体类型的 CSS 值？

> ID：11267950
> 
> 赞同：1
> 
> 时间：2012-06-29T19:38:43.547
> 
> 标签：javascript, jquery, css, ruby-on-rails, sass

我有两个单独的样式表，比如说 main.css.sass 和 print.css.sass。目前，打印样式表大多只是隐藏不必要的信息并且是静态的。但是，我现在有一个 div，我想根据是否选中复选框来隐藏或显示在打印媒体上。

我想这最好通过 Javascript 和/或 JQuery 来完成。我在 JQuery 中拉取复选框的状态或类似的东西没有任何问题。我的问题是找到一种让 CSS 依赖于该状态的好方法。

目前，我正在 main.css.sass 文件中尝试：

```
@media print
    #foo
        display: none 
```

编译为：

```
@media print {
    #foo {
        display: none;
    }
} 
```

但这目前不起作用。（这只是一个测试，看看我是否可以通过这种方式影响 print.css.sass 样式表，到目前为止，答案似乎是否定的）。

作为附加说明，在 print.css.sass 样式表中根本没有提到 #foo id。

PS：这也是使用 RoR。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T20:03:24.080

如果您在包含的 CSS 文件中指定元素的显示设置，则无法使用 JavaScript 在元素上轻松更改它。相反，您可以使用 jQuery 通过在元素上添加/删除 CSS 类来控制它。

```
@media print
    #foo {
        display:none
        &.visible {
            display:block
        }
    } 
```

使用 jQuery，您可以`$('#foo').toggleClass('visible')`根据复选框的状态使用。

# r - 省略数据框中的缺失数据

> ID：11267953
> 
> 赞同：1
> 
> 时间：2012-06-29T19:38:57.477
> 
> 标签：r, dataframe, missing-data, na

我有以下数据框：

```
DF <- data.frame(x = c(1, 2, 3,NA), y = c(1,0, 10, NA), z=c(43,NA, 33, NA)) 
```

如果我只想省略`x = NA`and `z = NA`。

`complete.cases`删除`NA`所需列的所有行。

因此，我不确定如何只删除 dataframe 中的最后一行`DF`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:48:15.710

不清楚是否要排除 x OR z = NA 或 x AND z = NA 的行。更改布尔值 from 和`&`to 或`|`如果是这种情况：

```
> DF[!(is.na(DF$x) & is.na(DF$z)),]
  x  y  z
1 1  1 43
2 2  0 NA
3 3 10 33 
```

# javascript - 缓出计数器

> ID：11267956
> 
> 赞同：1
> 
> 时间：2012-06-29T19:39:01.520
> 
> 标签：javascript, math

我有一个函数可以计算页面的访问量，并计算达到某个目标的剩余访问量。就像倒计时一样。有一个“隐藏”的图片，每次有新的访问，都会显示部分图片。

我有简单的 JavaScript 代码来计算访问次数，一些 CSS 根据百分比“揭示”图片。

但现在我需要让这个“揭幕”放慢速度，这意味着随着访问量越来越接近目标，剩余图片的百分比应该会减少。

现在这就是我能从我的大脑中得到的所有信息：

```
remaining_percentage_to_goal = (current_visits*100)/goal

div_height = (remaining_percentage_to_goal*image_height)/100 
```

我可以尝试类似：

```
slow_down_rate = 0.25 
div_height = div_height-(remaining_percentage_to_goal*slow_down_rate) 
```

当然，这永远不会达到图像高度的 100%，所以我想到我可以使用 IF 语句或在达到一定百分比时删除 slow_down_rate 的东西来做一个硬编码的固定变量，但这似乎并不完全我们正在寻找的效果。所以我想知道是否有更好或更优雅的方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T20:30:45.897

听起来你想要一种对数方法。为了这个答案，我们假设您的目标是 1500 次访问（当然，这可以是任意数字）。您知道，对于零访问，您希望显示百分比为零，对于 1500 次访问，您希望显示 100%，因此您知道图表上的两个点：(0,0) 和 (1500,1)。为了使自然对数适合这些参数，您必须对其进行平移和缩放，因此您有：

```
f(x) = alpha*ln(x+beta) 
```

我们知道 ln(1)=0，所以 beta=1 很容易。通过插入我们的第二点，我们也可以很容易地找到 alpha：

```
1500 = alpha*ln(1500+1)

alpha = 1500 / ln(1500+1) 
```

现在，如果我们绘制它，我们得到：

![在此处输入图像描述](../Images/4e51c50aededf02c28dabf7ad23147b3.png)

这看起来像我们想要的功能......它在接近目标时自然会变慢，但它仍然达到目标。

将其翻译成 Javascript，您将拥有：

```
var goal = 1500;
var alpha = goal / Math.log(goal+1);
var percentVisible = alpha * Math.log(visits+1); 
```

我希望这有帮助！

# android - CSS 溢出中断 Galaxy Tab 上的点击事件

> ID：11267961
> 
> 赞同：4
> 
> 时间：2012-06-29T19:39:15.810
> 
> 标签：android, css, media-queries, dolphin-browser

我觉得我错过了一些基本的东西。

上：

三星的 Galaxy Tab 10.1（在其他 Andoid 设备上可能是 tru - 不确定） Dolphin 或内置的“默认”浏览器任何带有溢出样式的块元素：自动或溢出-y 自动，以获得垂直滚动条会导致该 div 的行为像单击孩子时，它甚至不在事件树中。

例如。我有这样的事情：

```
<div id="a">
    <ul>
        <li>one</li>
        <li>two</li>
    <ul>
</div> 
```

如果 ul 的样式设置为具有溢出：自动，则单击“一”或“二”会触发 #a 上的事件 - 就好像 ul/li 甚至不存在一样。在纵向模式下，一切都很好。我可以将平板电脑倾斜 90 度以使其工作，使其失效等。

我仍然需要在提琴手中简化它，但你可以通过这里看到效果：

既然是两个浏览器，那一定是我的问题！？！

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:47:45.297

这似乎是[这个问题的一个变体。](http://code.google.com/p/android/issues/detail?id=2118)

# c# - 在使用实体框架时将数据库移到异地

> ID：11267965
> 
> 赞同：0
> 
> 时间：2012-06-29T19:39:35.193
> 
> 标签：c#, entity-framework

我目前正在开发的一个应用程序使用实体框架 4，它连接到本地网络上的数据库。我们现在需要将此数据库托管在不同位置的服务器上。显然，我们的客户端应用程序（Windows 窗体）仍然需要访问数据。使用 VPN 将是最简单的，但在这种情况下，这不是一个选项。话虽如此，我有什么选择？有没有一种方法可以通过 Web 服务公开实体数据模型，这需要对客户端应用程序进行最少的返工？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:50:59.830

WCF 数据服务研究：http: [//msdn.microsoft.com/en-us/library/cc668794.aspx](http://msdn.microsoft.com/en-us/library/cc668794.aspx)

并快速阅读此内容，了解为 EF 设置包装服务是多么容易。[http://blogs.msdn.com/b/adonet/archive/2011/03/21/using-wcf-data-services-with-entity-framework-4-1-and-code-first.aspx](http://blogs.msdn.com/b/adonet/archive/2011/03/21/using-wcf-data-services-with-entity-framework-4-1-and-code-first.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:57:37.457

简而言之; 看看 WCF 服务，但请确保您没有通过您的服务公开`IQueryable`或`IEnumerable`实例。

冗长的，可能与啤酒有关的版本：

在不了解应用程序架构的细节的情况下，很难给出具体的答案。

如果您已经在现有应用程序内的多个服务类上构建了应用程序，则您可以简单地通过某种形式的 Web 服务直接公开这些服务。`IQueryable`但是，如果您已通过服务边界或`IEnumerable`跨服务边界传递实例，则必须小心。如果您有，您可能会发现移植到 Web 服务会导致大量数据或数据通过网络传递，或者您可能会看到 N+1 问题并且应用程序可能开始变得非常“健谈”。

一种替代方法可能是让您的用户以有限的用户直接访问您的数据库。这总是让我感到紧张的事情，特别是如果这是一个公共应用程序。在这种情况下，您必须确保您提供给他们的 sql 用户具有您可能逃脱的最少和最少的权限。

您还需要注意，在与数据库通信时，离开本地网络会产生更大的延迟。根据您的应用程序的编码方式，您可能会在网络往返发生时开始看到 UI 锁定或挂起。

如果您已经很好地编写了您的应用程序，开始将您的数据库访问权限拆分为服务，那么至少会很棘手（除非您的应用程序非常简单）。

# .htaccess - htaccess 用于 apache 未读取的干净 url？

> ID：11267967
> 
> 赞同：4
> 
> 时间：2012-06-29T19:39:38.040
> 
> 标签：.htaccess, mod-rewrite, apache, laravel

我在这里有点疯狂，因为我已经浪费了两个小时来为 laravel 框架启用我的干净 URL。

我在 Mac 上并且有 XAMPP 设置。Loadmodule mod_rewrite 被注释掉并且 php_info() 表示 mod_rewrite 模块已加载。

我在 laravel 框架的公共文件夹中的 .htaccess 文件包含清理 URL 的代码（如他们网站上所述），但是当我浏览 domain.com/account 时，它仍然给我一个 404。

laravel 框架文件夹作为虚拟主机运行。

怎么可能，有问题？！

```
<IfModule mod_rewrite.c>
     RewriteEngine on

     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d

     RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-29T19:49:29.547

确保`Loadmodule mod_rewrite`未注释。

确保您为虚拟主机设置了适当的 AllowOverride 以允许 .htaccess 执行其操作。

一个好的指令的例子是：

```
<Directory "/some/absolute/path/htdocs">
Options Indexes Includes FollowSymLinks MultiViews
AllowOverride AuthConfig FileInfo
Order allow,deny
Allow from all
</Directory> 
```

.htaccess 对于您正在尝试做的事情，一个很好的模式是：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

非常接近你正在做的事情。

重新启动您的 apache 服务器。

# .net - 对从 wcf 生成的 xsd 添加限制

> ID：11267968
> 
> 赞同：1
> 
> 时间：2012-06-29T19:39:43.337
> 
> 标签：.net, wcf, xsd, wsdl, restrictions

因此，我正在研究如何格式化从 WCF 生成的 WSDL 和 XSD，特别是向 WSDL 和 XSD 添加注释/文档以及对各种参数添加限制。

到目前为止，我已经能够通过创建实现 IWSDLExportExtension 接口和 IOperationBehavior 接口的属性来将文档添加到 WSDL 和 XSD。

有关修改模式的总体思路，请参见：
[http ://thorarin.net/blog/post/2010/08/08/Controlling-WSDL-minOccurs-with-WCF.aspx](http://thorarin.net/blog/post/2010/08/08/Controlling-WSDL-minOccurs-with-WCF.aspx)

有关向 WSDL 添加注释的总体思路，请参见：http:
[//msdn.microsoft.com/en-us/library/ms731731 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms731731(v=vs.110).aspx)

但是，当我尝试在 xsd 中向元素添加限制（通过添加简单类型）时遇到了麻烦。

从这里我可以得到一个异常，说明我不能设置元素类型，因为它已经有一个与之关联的只读类型，或者我可以尝试使用只读类型来添加限制，但是没发生什么事。

这是生成异常的代码 `(System.Xml.Schema.XmlSchemaException: The type attribute cannot be present with either simpleType or complexType.)` ：

```
 var ComplexType = ((XmlSchemaElement)Schema.Elements[Parameter.XmlQualifiedName]).ElementSchemaType as XmlSchemaComplexType;
    var Sequence = ComplexType.Particle as XmlSchemaSequence;

    foreach (XmlSchemaElement Item in Sequence.Items)
    {
        if (Item.Name = Parameter.Name && Parameter.Length > 0)
        {
            XmlSchemaSimpleType tempType = new XmlSchemaSimpleType();
            XmlSchemaSimpleTypeRestriction tempRestriction = new XmlSchemaSimpleTypeRestriction();
            XmlSchemaLengthFacet lengthFacet = new XmlSchemaLengthFacet();
            tempType.Content = tempRestriction;
            tempRestriction.Facets.Add(lengthFacet);
            lengthFacet.Value = "" + Parameter.Length;

            Item.SchemaType = tempType; // <-- Problem code

         }
         ...
     } 
```

这是什么都不做的解决方法：

```
 var ComplexType = ((XmlSchemaElement)Schema.Elements[Parameter.XmlQualifiedName]).ElementSchemaType as XmlSchemaComplexType;
    var Sequence = ComplexType.Particle as XmlSchemaSequence;

    foreach (XmlSchemaElement Item in Sequence.Items)
    {
        if (Item.Name = Parameter.Name && Parameter.Length > 0)
        {
            XmlSchemaSimpleTypeRestriction tempRestriction = new XmlSchemaSimpleTypeRestriction();
            XmlSchemaLengthFacet lengthFacet = new XmlSchemaLengthFacet();
            tempRestriction.BaseTypeName = new XmlQualifiedName("string", "http://www.w3.org/2001/XMLSchema");
            tempRestriction.Facets.Add(lengthFacet);
            lengthFacet.Value = "" + Parameter.Length;

            // Appears to do nothing
            ((XmlSchemaSimpleType)Item.ElementSchemaType).Content = tempRestriction;

         }
         ...
     } 
```

快速的其他注意事项：如果我切换到正常的 for 循环并实际上尝试用新元素替换麻烦元素（我知道是骇人听闻的......），我会得到以下异常：`System.InvalidCastException: Unable to cast object of type 'System.Xml.Schema.XmlSchemaSimpleType' to type 'System.Xml.Schema.XmlSchemaParticle'.` 这个我只是好奇，因为他们两者都应该是 XmlSchemaElements 对吗？

所以基本上，有谁知道如何向 xmlschemaelements 添加简单类型/添加简单类型限制并将其显示在使用 WCF 的 WSDL 生成的 XSD 中？

谢谢！

* * *

编辑：添加
`tempRestriction.BaseTypeName = new XmlQualifiedName("string", "http://www.w3.org/2001/XMLSchema");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T23:10:32.853

在第二个例子中，不要忘记

```
tempRestriction.BaseTypeName = new XmlQualifiedName("string", "http://www.w3.org/2001/XMLSchema"); 
```

在定义方面之前。限制不是一个单独的模式对象，而是一种派生方法。它从预先存在的简单类型（例如`string`.

# wordpress - 带有 wordpress 的水平子菜单

> ID：11267970
> 
> 赞同：1
> 
> 时间：2012-06-29T19:39:52.230
> 
> 标签：wordpress

我正在使用 wordpress 3.4.1 和 headway 主题。我不确定进展是否搞砸了，但我希望有人能指出我正确的方向。

基本请求 - 悬停或单击主菜单项时水平显示的子菜单。

这是我的 html（块 id 和大量代码由 headway 插入）：

```
<nav id="block-10" class="custom_YAP_menu block block-type-navigation block-fluid-height block-mirrored block-mirroring-10 block-original-97">
<div class="block-content">
<div class="nav-horizontal nav-align-center">
<ul id="menu-yap-menu" class="menu">

<li id="menu-item-750" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-750">
<a href="#" title="Solutions">Solutions</a>
<ul class="sub-menu">
<li id="menu-item-764" class="nav2 menu-item menu-item-type-post_type menu-item-object-page menu-item-764">
<a href="http://youradminpro.com/business-solutions-2/business-solutions/">Business Solutions</a>
</li>
<li id="menu-item-780" class="nav2 menu-item menu-item-type-post_type menu-item-object-page menu-item-780">
<a href="http://youradminpro.com/pricing/">Pricing</a>
</li>
</ul> 
```

这是CSS：

```
body.custom #block-10 {position: relative; width: 100%;}

.block {-moz-box-sizing: float: left;}

menu, nav {display: block;}

.block-type-navigation li ul.sub-menu {left: -9999px; position: absolute; width: auto;
    z-index: 150;}

.block-type-navigation ul { display: inline-block; }

ol, ul {    list-style: none outside none;}

body.custom .block-type-navigation ul.sub-menu li a {margin: 5px 0 -5px -48px !important;     padding: 3px 0 30px; }

body.custom .block-type-navigation ul li a {margin: 0 -10px 0 -20px; }

.block-type-navigation li ul.sub-menu li a {-moz-box-sizing: border-box; max-width: 500px;
    min-width: 175px; width: auto; }

.block-type-navigation ul li a {display: block; white-space: nowrap; } 
```

继承自：`ul.sub-menu ol, ul { list-style: none outside none; }`

我希望我复制了你需要的一切。该站点是：youradminpro.com

# c# - 当 DataContext 更改时，WPF 命令 CanExecute 不会被重新评估

> ID：11267975
> 
> 赞同：1
> 
> 时间：2012-06-29T19:40:18.033
> 
> 标签：c#, wpf, xaml

我无法让我的命令的 CanExecute 方法工作属性。我已将命令绑定到 DataGrid 内的按钮。我已将 CommandParameter 绑定到按钮的 DataContext，它恰好是 DataGrid 中一行的记录。

我期望发生的是在 CommandParameter 绑定更改时重新评估 CanExecute 方法，在这种情况下，这将是设置行的 DataContext 属性。但是，不是针对行数据评估 CanExecute 方法，而是在行获取其 DataContext 之前评估 CanExecute 方法，并且在更新 DataContext 之后永远不会重新评估它。

你能告诉我如何让我的命令的 CanExecute 方法针对每一行的 DataContext 进行评估吗？

我创建了一个示例应用程序来演示我的问题。这是代码：

**MainWindow.xaml 的代码隐藏**

```
public partial class MainWindow : Window
{
    public ObservableCollection<LogRecord> Records { get; private set; }
    public ICommand SignOutCommand { get; private set; }
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        Records = new ObservableCollection<LogRecord>();
        SignOutCommand = new SignOutCommand();
        CreateDemoData();
    }
    private void CreateDemoData()
    {
        for (int i = 0; i < 5; i++)
        {
            Records.Add(new LogRecord());
        }
    }
}

public class LogRecord : INotifyPropertyChanged
{
    private DateTime _EntryTime;
    public DateTime EntryTime
    {
        get { return _EntryTime; }
        set
        {
            if (_EntryTime == value) return;
            _EntryTime = value;
            RaisePropertyChanged("EntryTime");
        }
    }

    private DateTime? _ExitTime;
    public DateTime? ExitTime
    {
        get { return _ExitTime; }
        set 
        {
            if (_ExitTime == value) return;
            _ExitTime = value;
            RaisePropertyChanged("ExitTime");
        }
    }

    public LogRecord()
    {
        EntryTime = DateTime.Now;
    }

    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    public void RaisePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion
}

public class SignOutCommand : ICommand
{
    #region Implementation of ICommand

    public void Execute(object parameter)
    {
        var record = parameter as LogRecord;
        if (record == null) return;
        record.ExitTime = DateTime.Now;
    }

    public bool CanExecute(object parameter)
    {
        var record = parameter as LogRecord;
        return record != null && !record.ExitTime.HasValue;
    }

    public event EventHandler CanExecuteChanged;

    #endregion
} 
```

**MainWindow.xaml 的 XAML**

```
<Window x:Class="Command_Spike.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow"
    Width="525"
    Height="350">
<DataGrid ItemsSource="{Binding Path=Records}" IsReadOnly="True" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Entry Time" Binding="{Binding Path=EntryTime}" />
        <DataGridTextColumn Header="Exit Time" Binding="{Binding Path=ExitTime}" />
        <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor,
                                                                             AncestorType=Window},
                                              Path=DataContext.SignOutCommand}"
                            CommandParameter="{Binding}"
                            Content="Sign Out" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

如果加载示例代码，您会看到所有的“退出”按钮都被禁用，因为在每一行中，CanExecute 方法都接收 null 作为参数，而不是我想要的特定于行的数据。如果此示例工作正常，所有按钮最初都会启用，并且只有在设置了 Exit Time 列中的值后才会禁用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T21:19:30.350

您没有正确设置自定义命令。在您当前的示例中，您不需要手动创建实现 ICommand 的命令，您只需创建一个 Routed 或 RoutedUI 命令并连接适当的处理程序。删除您的 SignOutCommand 对象，然后修改您的 Window 代码，如下所示：

```
public partial class MainWindow: Window
{
    public ObservableCollection<LogRecord> Records { get; private set; }
    public static RoutedUICommand SignOutCommand { get; private set; }

    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        Records = new ObservableCollection<LogRecord>();
        CreateDemoData();

        SignOutCommand = new RoutedUICommand();
        CommandBinding cb = new CommandBinding(SignOutCommand, OnSignOut, OnCanSignOut);
        this.CommandBindings.Add(cb);
    }

    private void CreateDemoData()
    {
        for (int i = 0; i < 5; i++)
        {
            Records.Add(new LogRecord());
        }
    }

    private void OnCanSignOut(object sender, CanExecuteRoutedEventArgs e)
    {
        var record = e.Parameter as LogRecord;
        e.CanExecute = record != null && !record.ExitTime.HasValue;

    }

    private void OnSignOut(object sender, ExecutedRoutedEventArgs e)
    {
        var record = e.Parameter as LogRecord;
        if (record == null) return;
        record.ExitTime = DateTime.Now;
    }
} 
```

然后，修改您的 DataTemplate 如下（基本上，只需从路径中删除 DataContext ）：

```
<dg:DataGridTemplateColumn>
  <dg:DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
       <Button Command="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}, Path=SignOutCommand}" CommandParameter="{Binding}" Content="Sign Out" />
    </DataTemplate>
  </dg:DataGridTemplateColumn.CellTemplate>
</dg:DataGridTemplateColumn> 
```

使用这种方法，您的退出按钮将在设置 DataContext 时正确启用。

# entity-framework - Entity Framework 5 和数据透视表，如何？

> ID：11267982
> 
> 赞同：3
> 
> 时间：2012-06-29T19:40:35.803
> 
> 标签：entity-framework

我有一个简单的表格：年 - 季度 - 价值 2012 1 177 2012 2 213 2012 3 168 2012 4 313

我想通过 Linq 返回数据，如下所示：

年份 - Q1 - Q2 - Q3 - Q4 2012 177 213 168 313

关于最好的方法有什么建议吗？我假设某种枢轴？

蒂亚杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T19:57:06.457

这就是我的工作：

```
 Metrics.GroupBy(c => c.Year) 
 .Select(g => new {
Year = g.Key,
Q1 = g.Where(c => c.Quarter == 1).Sum(c => c.Value), 
      Q2 = g.Where(c => c.Quarter == 2).Sum(c => c.Value), 
Q3 = g.Where(c => c.Quarter == 3).Sum(c => c.Value),
Q4 = g.Where(c => c.Quarter == 4).Sum(c => c.Value) 
}) 
```

有更好的建议吗？

# bash - Bash Init 脚本的 If, Then 语句

> ID：11267983
> 
> 赞同：1
> 
> 时间：2012-06-29T19:40:36.127
> 
> 标签：bash, function, if-statement

我正在尝试通过 pid 获取状态是否正在运行的输出。当我将以下内容添加到脚本时，它只输出第一个回声。进程是否已被杀死。我在第一个 if 中缺少什么？

```
 status() {         
          if [  'ps auxww | grep $APPLICATION | grep $SERVICE1 | gawk "{print $2}" | grep -v grep' ]; 
               echo -e $"$SERVICE1 is currently running \n "
          else
               echo -e $"$SERVICE1 is not running \n "
               RETVAL=$?
               echo
          fi
          fi
          return $RETVAL
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:54:12.883

`[`is 命令是“test”命令的别名，需要end `]`。bash 中的`if`语句测试命令的退出状态。在您的情况下，您想要测试管道的退出状态，而不是使用 test.

```
if ps auxww | grep $APPLICATION | grep $SERVICE1 | gawk "{print $2}" | grep -v grep; then
   ...
fi 
```

您通常不想以`ps`这种方式解析 的输出。相反，`pgrep`如果可用，请使用：

```
if pgrep -f "$APPLICATION.*$SERVICE1"; then
   ...
fi 
```

# c# - BindingSource 没有监听所有项目的属性更改

> ID：11267984
> 
> 赞同：1
> 
> 时间：2012-06-29T19:40:36.817
> 
> 标签：c#, winforms, datagridview

我知道我应该能够自己解决这个问题，但我已经把头撞在桌子上几个小时了。

我有一个 DGV 中的项目列表，并希望 DGV 在属性更改时更新（在本例中为一个属性）。下面是重现该问题的完整示例。程序的输出是：

```
Marking item 'One' as Missing
Status changing
Status changed has a listener
Marking item 'Two' as Missing
Status changing
Marking item 'Three' as Missing
Status changing
Marking item 'Four' as Missing
Status changing 
```

您会看到 DGV 上仅对第一项进行了更改。正如您从该输出中看到的那样，BindingSource 正在侦听列表中第一项的属性更改并将通知传递给 DGV，而不是其他任何一项。

我在这里想念什么？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Diagnostics;
using System.Windows.Forms;

class Form1 : Form
{
    private enum ModuleStatus
    {
        Ok,
        Missing,
    }

    private sealed class ModuleInfo : INotifyPropertyChanged
    {
        public string Label { get; set; }
        private ModuleStatus _status;
        public ModuleStatus Status
        {
            get { return _status; }
            set
            {
                if (_status != value)
                {
                    Trace.WriteLine(String.Format("Status changing"));
                    _status = value;
                    OnPropertyChanged("Status");
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                Trace.WriteLine(String.Format("Status changed has a listener"));
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
    }

    private List<ModuleInfo> moduleList = new List<ModuleInfo>();
    private BindingSource moduleBinding;
    private Timer timer = new Timer { Enabled = true, Interval = 1000 };

    public Form1()
    {
        moduleBinding = new BindingSource(moduleList, null);
        Controls.Add(new DataGridView
        {
            Dock = DockStyle.Fill, AutoGenerateColumns = false, AllowUserToAddRows = false, RowHeadersVisible = false,
            Columns =
                {
                    new DataGridViewTextBoxColumn { HeaderText = "Label", DataPropertyName = "Label", AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill, ReadOnly = true },
                    new DataGridViewTextBoxColumn { HeaderText = "Status", DataPropertyName = "Status", ReadOnly = true  },
                },
            DataSource = moduleBinding,
        });

        foreach (string label in new string[] { "One", "Two", "Three", "Four" })
            moduleBinding.Add(new ModuleInfo { Label = label, Status = ModuleStatus.Ok });

        timer.Tick += new EventHandler(timer_Tick);
    }

    int modifyIndex = 0;
    void timer_Tick(object sender, EventArgs e)
    {
        if (modifyIndex < moduleList.Count)
        {
            Trace.WriteLine(String.Format("Marking item '{0}' as Missing", moduleList[modifyIndex].Label));
            moduleList[modifyIndex].Status = ModuleStatus.Missing;
            modifyIndex++;
        }
    }

    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:02:08.903

将你的 moduleList 更改为：

```
private BindingList<ModuleInfo> moduleList = new BindingList<ModuleInfo>(); 
```

您可能会也可能不会觉得这篇文章有帮助：[BindingList vs List](https://stackoverflow.com/questions/2243950/listt-vs-bindinglistt-advantages-disadvantages)

# php - 如何理解排序逻辑？

> ID：11267990
> 
> 赞同：2
> 
> 时间：2012-06-29T19:41:09.737
> 
> 标签：php, sorting, usort

我试图了解 php 函数[usort](http://php.net/manual/en/function.usort.php)是如何工作的。我有这样的代码：

```
<?php 
$users[] = array('login' => 'moon', 'name' => 'Chris');
$users[] = array('login' => 'star', 'name' => 'Piter');
$users[] = array('login' => 'mars', 'name' => 'Tim');
$users[] = array('login' => 'earth', 'name' => 'Garry');

function compare($a, $b) {                  
    echo $a['login'] . '--' . $b['login'] . '<br />';
    echo strcmp($a['login'], $b['login']) . '<br />';
    return strcmp($a['login'], $b['login']);              
}
usort($users, "compare");

echo '<pre>'; print_r($users); echo '</pre>';
?> 
```

它将输出这样的结果：

```
star--moon
1
star--mars
1
earth--star
-1
moon--earth
1
mars--moon
-1
earth--mars
-1
Array
(
    [0] => Array
        (
            [login] => earth
            [name] => Garry
        )

    [1] => Array
        (
            [login] => mars
            [name] => Tim
        )

    [2] => Array
        (
            [login] => moon
            [name] => Chris
        )

    [3] => Array
        (
            [login] => star
            [name] => Piter
        )

) 
```

据我了解，第二个参数应该是比较函数，它只能返回 3 个值（-1,0,1）并`usort`使用此结果对数组进行排序？我也读过，`usort`使用 Quicksort 实现对数组进行排序。这就是为什么**星星**第一，**月亮**第二？快速排序将数组分成两部分然后排序？我可以为 2,3 维数组实现这个功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T10:45:10.927

是的，usort 使用比较函数来比较值并使用[快速排序](http://sv.wikipedia.org/wiki/Quicksort)算法对数组进行排序。从[http://php.net/manual/en/function.usort.php](http://php.net/manual/en/function.usort.php)：

> 如果认为第一个参数分别小于、等于或大于第二个参数，则比较函数必须返回小于、等于或大于零的整数。

可以在这里找到在 PHP 中实现 usort 的链接：[PHP 使用什么排序算法？](https://stackoverflow.com/questions/3165984/what-sort-algorithm-does-php-use). 根据[http://murilo.wordpress.com/2011/02/05/phps-sort-functions-are-bad-design/](http://murilo.wordpress.com/2011/02/05/phps-sort-functions-are-bad-designed/)该算法使用中间元素作为枢轴元素，实现如下：

```
offset = (end - begin) >> 1; 
```

这应该是算法使用“星”作为第一个枢轴元素的原因。

对于多维数组，如果要保持索引关联，请使用[uasort 。](http://se2.php.net/uasort)[此问题](https://stackoverflow.com/questions/9483215/php-multidimensional-array-usort)包含对多维数组进行排序的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T19:47:27.207

`usort`当它比较数组中的任何两个项目时，您会告诉首先放置哪个项目。您的函数返回元素值的`strcmp`比较`login`，因此它根据登录名将所有元素按字母顺序排列。

# python - python中的3d sobel算法？

> ID：11267994
> 
> 赞同：4
> 
> 时间：2012-06-29T19:41:38.697
> 
> 标签：python, image-processing, numpy, computer-vision

我正在尝试在 python 中计算 3d sobel 过滤器。我有一个很好的二维图像代码，如下所示。

顺便提一句。我的原始图像是 uint8 类型。

```
 preSobel = preSobel.astype('int32')
    dx = ndimage.sobel(preSobel, 0)  # horizontal derivative
    dy = ndimage.sobel(preSobel, 1)  # vertical derivative
    mag = numpy.hypot(dx, dy)  # magnitude
    mag *= 255.0 / numpy.max(mag)  # normalize (Q&D)
    img[i,:,:]=mag 
```

但是根据我对计算 2d 的[wiki 页面](http://en.wikipedia.org/wiki/Sobel_operator#Extension_to_other_dimensions)的理解，我应该乘以 1d sobel 结果而不是hypot :confused

无论如何，要转到 3d，我想我需要在每个轴上计算 1d sobel，然后将所有相乘，但我不确定......那里有没有更快计算 3d sobel 的库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T20:11:46.900

首先，参考您的[维基百科链接](http://en.wikipedia.org/wiki/Sobel_operator#Extension_to_other_dimensions)：那里的乘法是指构造索贝尔卷积核的方式，而不是最终结果。

对于 2D sobel 滤波器，您需要一个内核来获得 x 方向的导数，以及另一个内核来获得 Y 方向的导数，例如 ![在此处输入图像描述](../Images/cad2d0fa7bc5ec59d432e271c35c8cae.png)

这基本上就是你的两个命令所做的，所以如果你使用 numpy，你不需要自己构建这些内核。

```
dx = ndimage.sobel(preSobel, 0)  # horizontal derivative
dy = ndimage.sobel(preSobel, 1)  # vertical derivative 
```

现在对于 3D 案例，您需要 3 个具有 3 个内核的操作，一个用于 dx、dy、dz。链接的 wiki 部分告诉您如何通过乘以组件来构造内核。例如，dZ 的最终 sobel 核是一个 3x3x3 矩阵，如下所示：

![在此处输入图像描述](../Images/9328aae98bf22d908e26c412b11a6dbf.png)

为了获得幅度，您仍然必须在之后取平方导数（斜边）的平方根。

我没有 numpy，但据我从[文档](http://mail.scipy.org/pipermail/numpy-discussion/2004-November/003674.html)中可以看出，ndimage sobel 命令可以处理任意数量的维度，因此，内核已经提供：

```
dx = ndimage.sobel(your3Dmatrix, 0)  # x derivative
dy = ndimage.sobel(your3Dmatrix, 1)  # y derivative
dz = ndimage.sobel(your3Dmatrix, 2)  # z derivative 
```

现在 hypotenuse 命令可能只需要 2 个参数，因此您必须找到另一种有效计算 mag = sqrt(dx *dx + dy* dy + dz*dz) 的方法。但是 NumPy 应该有你需要的一切。

* * *

**更新**

实际上，如果您只对幅度感兴趣，[那么 numpy 中有一个完整的函数](http://docs.scipy.org/doc/scipy/reference/tutorial/ndimage.html#derivatives)：

```
 mag = generic_gradient_magnitude(your3Dmatrix, sobel) 
```