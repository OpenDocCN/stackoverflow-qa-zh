# StackOverflow 问答 12040000-12040999

# validation - 带有默认输入的检票口文本区域

> ID：12040003
> 
> 赞同：1
> 
> 时间：2012-08-20T14:53:44.500
> 
> 标签：validation, input, textarea, wicket, default

我有一个 textarea 有时会在其中包含默认文本，有时不取决于数据库中的值。现在，我在 textareas 构造函数中使用了一个模型，它的 getObject() 返回一个字符串，它可以很好地显示它从数据库中获取的文本：

```
myTextArea = new TextArea<String>("text", textModel); 
```

但问题是：我希望能够在用户在 textarea 中输入任何内容之前调用 myTextArea.validate() ，而现在我总是收到一个必需的错误。显然，checkRequired() 在验证 textarea 时使用了 getInput()，而 getInput() 的默认值为 null。

有什么方法可以将 textarea 的输入与它的 modelObject 匹配，或者使默认输入由 textarea 中显示的文本确定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:59:32.850

getInput 从与您的表单组件对应的请求参数中读取其值。我认为您应该在文本区域中覆盖此方法，并在原始 getInput 返回 null 时使其返回模型的值。例如：

```
public String getInput(){
  String originalInput = super.getInput();
  if(originalInput == null && textModel.getObject() != null)
   return textModel.getObject().toString();

  return originalInput;
} 
```

# visual-studio-2010 - VS2010 插件调试创建卷影副本？

> ID：12040004
> 
> 赞同：0
> 
> 时间：2012-08-20T14:53:47.147
> 
> 标签：visual-studio-2010, debugging, add-in

我正在尝试调试 Visual Studio 2010 的加载项。加载项引用了我的解决方案中的另一个项目。编译后，我可以看到引用项目的 DLL 已成功构建并放置在加载项的构建文件夹中。

当我开始调试时，会启动一个单独的 Visual Studio 实例，并且加载项出现在 Visual Studio 2010 的“工具”菜单上。但是，当我为它选择命令时，我收到一个错误，指出我引用的程序集可以找不到。

这听起来像是 Visual Studio 正在创建我的插件的影子副本，而不是复制引用的程序集。是这样吗？如果不是，那到底是怎么回事，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T17:51:50.357

我的理解是 VS 不会自动从加载项的文件夹中加载引用的程序集。在我的加载项中，我订阅了 System.AppDomain.CurrentDomain.AssemblyResolve 并使用 System.Reflection.Assembly.LoadFrom 返回我的程序集。

# css - 如何仅对特定段落类使用 Google Webfont 加载器？

> ID：12040006
> 
> 赞同：0
> 
> 时间：2012-08-20T14:53:47.557
> 
> 标签：css, webfonts, google-webfonts

我一直在使用[Google Webfont 加载器](https://developers.google.com/webfonts/docs/webfont_loader)来用漂亮的字体显示我网站的某些部分。我的这部分工作正常，我所有的`<p>`节目都用我想要的字体。但是，我希望只使用 webfonts 显示某些类`<p>`（即`<p class="someclass">`），然后使用常规字体（即不是 Google Webfonts）显示其余的类。我实现这一目标的最佳方法是什么？目前，我正在使用这个

```
<script type="text/javascript">
      WebFontConfig = {
        google: { families: [ 'McLaren' ] }
      };
      (function() {
        var wf = document.createElement('script');
        wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
            '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
        wf.type = 'text/javascript';
        wf.async = 'true';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(wf, s);
      })();
    </script>
    <style type="text/css">
      .wf-loading p.someclass {
        font-family: serif
      }
      .wf-inactive p.someclass {
        font-family: cursive
      }
      .wf-active p.someclass {
        font-family: 'McLaren', cursive
      }
    </style> 
```

并且`<p>`整个页面都以“McLaren”字体显示。我确定我在使用 CSS 选择器做一些愚蠢的事情，但我不太确定是什么。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:58:35.623

首先，您不一定需要 Google 字体的 js 版本，我刚刚通过 css 将它们链接起来，并且没有加载问题。其次，有人需要查看您的实际 html 正文，但您不需要 p 前缀，只需将字体添加到您的类中，`.someclass{font-family:cursizve;}`就像我说的那样，使用 css 伪类可以更好地工作，并且在客户端上更轻松

# c# - 如何以编程方式确定一个类型是否可以被 protobuf-net 本地序列化？

> ID：12040007
> 
> 赞同：4
> 
> 时间：2012-08-20T14:53:47.823
> 
> 标签：c#, .net, protobuf-net

我通过反映类型来动态创建 RuntimeTypeModel。当我反思一个类型时，我会查看它的每个属性并确定标签（使用我自己的机制）并将其添加到`MetaType`. 我还需要确定属性的类型本身是否是嵌套消息，而不是 protobuf-net 本身可序列化的原语，以便我也可以递归处理该类型，从而将其添加到模型中并制作protobuf-net 可序列化的外部类型。

例如，假设我正在反思以下类型：

```
public class Foo
{
    public int Number { get; set; }
    public string Text { get; set; }
    public Bar InnerMessage { get; set; }
}

public class Bar
{
    TimeSpan Duration { get; set; } 
} 
```

我被要求序列化`Foo`，并且对于每种属性的每种类型，我需要确定是否需要将其作为新的添加到模型中`MetaType`。显然，`int`和`string`类型`TimeSpan`不需要添加到模型中，但`Bar`确实需要。我将如何以编程方式做出这种区分？我是否需要对这个逻辑进行硬编码（使用`switch`块或链）`if`？`else`如果是这样，protobuf-net r480 原生支持哪些类型（即，将它们添加到模型中会抛出*“这种类型的数据具有内置行为，并且不能以这种方式添加到模型中”的*`ArgumentException`声明）？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T09:00:08.547

r583 通过扩展 current 来增加对此的支持`CanSerializeContractType`；现在有一个`CanSerializeBasicType`, 和一个包罗万象的`CanSerialize`. 和以前一样，这保留了对处理可空类型、列表（非嵌套）和一维数组的现有支持。*

# asp.net-mvc-2 - 从 DropDownListFor 显示文本

> ID：12040008
> 
> 赞同：0
> 
> 时间：2012-08-20T14:53:48.367
> 
> 标签：asp.net-mvc-2, html.dropdownlistfor

这是视图：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<TravelDeskWebsite.Models.TestModel>" %>

<!DOCTYPE html>

<html>
<head>
<title>TestPage</title>
</head>
<body>
<% using (Html.BeginForm())
   { %>
    <%= Html.DropDownListFor(x => x.SelectedText, ViewBag.Tests as SelectList)%>
    <%: (string)ViewBag.Test %>
<% } %>
</body>
</html> 
```

控制器：

```
public ActionResult TestFunc(TestModel model)
    {

        List<string> TestList = new List<string>();
        TestList.Add("Help");
        TestList.Add("Please");
        ViewBag.Tests = new SelectList(TestList, model.SelectedText);
        ViewBag.Test = model.SelectedText;
        return View();
    } 
```

我想在这里实现的只是将所选值显示为同一视图上的文本。问题是即使我有一个选定的值，ViewBag 也会返回 null。当我测试它时，它会抛出空异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:00:14.437

您将在`SelectedText`属性中拥有您的 SelectedValue。尝试使用它。

```
ViewBag.Test = model.SelectedText;
return View(model); 
```

# sql - 如何在 SQL Server 中以分钟为单位获取会话长度

> ID：12040011
> 
> 赞同：0
> 
> 时间：2012-08-20T14:54:02.500
> 
> 标签：sql, sql-server-2008, connection-pooling, sql-session-state

在我的过程中使用以下查询，我可以数到连接到我的数据库

```
SELECT 
    COUNT(dbid) as 'Total Connections'
FROM 
    master.dbo.sysprocesses WITH (nolock)
WHERE 
    dbid = 7 
```

这工作正常，有没有办法在几分钟内获得每个连接/会话的长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:07:09.237

如果你这样做：

```
SELECT DATEDIFF(n, login_time, GETDATE()) AS SessionTime
FROM master.dbo.sysprocesses WITH (nolock)
WHERE dbid =7 
```

您将以分钟为单位获得与现在之间的时差`login_time`，我认为这是会话时间。

请注意：

> 如果返回值超出 int 的范围（-2,147,483,648 到 +2,147,483,647），则返回错误。**对于毫秒，startdate 和 enddate 之间的最大差异是 24 天 20 小时 31 分钟和 23.647 秒。其次，最大差异是 68 岁。**

从这里：http: [//msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

注意：您应该没问题，因为您要求连接的分钟数不太可能很快溢出！

# javascript - 在呈现时复制网页，无论底层来源如何

> ID：12040013
> 
> 赞同：-1
> 
> 时间：2012-08-20T14:54:13.750
> 
> 标签：javascript, html, internet-explorer

所以我有这个网页，我想复制到 Word 文档中。这是一个安装指南，我们想使用它，但添加与我们如何在环境中安装程序有关的注释。

简单的问题。只是复制和粘贴，对吧？错误的。

问题是，这个特定的网页是由`<div ..>`标签组成的，其中有几个复选框启用/禁用与您的选择相关的标签。因此，我选中了在 Linux 中标记安装的复选框，并显示了与该安装选项相关的所有 div 标签。

来源示例：

`<div class="forWindows forAIX forLinux forZLinux forPLinux forSolaris">...</div>`

`<div class="forJTS"> ... </div>`

`<div class="forCCM"> ... </div>`

这意味着，每当我复制和粘贴网页的一部分时，我都会获得所有内容，无论我在屏幕上实际看到什么。我想要的只是复制我在屏幕上看到的网页。

我尝试从 Internet Explorer 和 Firefox 复制到 MS Word 和具有相同结果的基本文本编辑器。

我希望结果是文本，以便我可以对其进行编辑，因此屏幕截图或导出为 PDF 将不起作用。

我可以保存源 HTML，删除不适用的标签并打开本地 html 文件，但工作量很大。此外，该页面似乎严重依赖服务器端的脚本，所以我想这可能会导致一些问题。

理想情况下，我想保留显示的格式。

要重现该问题：

1.  转至 IBM 的[安装 Rational Team Concert](http://pic.dhe.ibm.com/infocenter/clmhelp/v4r0/index.jsp?topic=/com.ibm.jazz.install.doc/topics/roadmap_form.html)的交互式指南。
2.  选择任何选项，但要验证下面的步骤 5-6，请选择 Linux 作为操作系统。
3.  点击“获取您的互动”
4.  复制/粘贴网页的一部分，并将粘贴的版本与浏览器中的内容进行比较。
5.  转到指南中的第 3 步“设置数据库”。将上一步中“下一步做什么”之间的所有内容复制到第三步中标题的末尾。总而言之，大约6行。
6.  粘贴到文本编辑器中，您现在应该会看到仅与 zOS 和 IBMi 操作系统相关的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:22:47.300

It seems that the behaviour on copy and pasting is undefined. Some browsers will copy ignoring the styling that hides stuff and others will copy including styles (ie some will include hidden text and others will not).

A rough summary of browsers seems to be:

*   IE - copies hidden text on IE8 and presumably older, no idea about newer.
*   FF - newer versions will not copy hidden text, older versions it seems will. Unknown where the cutoff is but it seems to be somewhere between version 3 and version 14\. :)
*   Chrome - my current version (19.0.1084.52) will copy just the visible text. Untested on any other version.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:10:48.267

我会简单地截取页面并使用一个简单的图形编辑程序来裁剪图像并添加注释。

要截取页面，请按 Print screen（可能在键盘上缩写为 PrtScn）。这会将屏幕截图复制到内存中。现在，在您的图形编辑程序甚至文字处理器中，单击粘贴（或按 ctrl-v）。屏幕截图将出现。根据您的需要裁剪和添加注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:55:59.647

编写一个将 #text 节点连接在一起的小书签，但前提是父元素具有计算样式 where`display != none`和`visiblity != hidden`。

# java - Java 外观 - 如何打破对 sun.swing.SwingUtilities2 的依赖

> ID：12040014
> 
> 赞同：18
> 
> 时间：2012-08-20T14:54:13.193
> 
> 标签：java, swing, look-and-feel

我正在维护一些在 Java 中实现自定义外观的代码。在最近升级 Java 版本时（出于其他原因），我发现外观由于找不到字段而损坏

```
sun.swing.SwingUtilities2.BASICMENUITEMUI_MAX_TEXT_OFFSET; 
```

这是一个紧密基于`BasicMenuItemUI.layoutMenuItem()`大约 Java 6u02 的类（[这里是源代码](http://j6a.ru/_basic_menu_item_u_i_8java_source.html)）。我发现 Oracle 已经重构了他们的代码，以便`MenuItemLayoutHelper`在我使用的新目标版本 Java 6u31 中包含一个。

我可以只使用，`MenuItemLayoutHelper`但这并不能解决问题，它只是将其推迟到下次 Java 内部更改时。因此，我认为这是一种解决方案。

我正在寻求一些关于如何实现从左到右布局的建议，类似于`BasicMenuItemUI`不需要知道父母的最大文本偏移量（消除对 sun.swing.SwingUtilities 的不良依赖）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T21:48:31.643

正如albfan所说，你不能。您要么必须依赖代码，复制类并在程序中使用它，要么根本不使用它并使用第三方库，要么不使用该功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T13:17:10.093

好吧，这可能已经有一段时间了，但我发现我可以使用我自己的常量而不是 sun.swing.SwingUtilities2.BASICMENUITEMUI_MAX_TEXT_OFFSET，只要它在有问题的代码中一直使用。绝不是理想的解决方案。

从好的方面来说，来自 sun 包的不良导入已进入编码规则检查。

# logging - Glassfish 未捕获异常的日志

> ID：12040021
> 
> 赞同：0
> 
> 时间：2012-08-20T14:55:06.927
> 
> 标签：logging, glassfish

我有一个相当简单的问题：

Glassfish 2.1 中未捕获的应用程序错误记录在哪里？在 Web 服务实现中，引发 InvocationTargetException 并作为 SoapFault 返回。我想查看此异常的日志以追踪其来源。

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:11:23.457

在您的域文件夹中是一个日志文件夹。里面有server.log。你应该能够在那里找到你要找的东西。

# ruby - Selenium 使用 chromeDriver 和 ruby

> ID：12040026
> 
> 赞同：0
> 
> 时间：2012-08-20T14:55:18.930
> 
> 标签：ruby, selenium, automated-tests, selenium-chromedriver

我一直在尝试在 Windows 上的 Chrome 中启动我的节点 Selenium-IDE ruby​​ 测试/单元导出。

我找到了各种“应该”工作的解决方案，但是我什至无法启动 Chrome 的实例！

我尝试过的解决方案（但当然没有成功）：

```
@driver = new RemoteWebDriver("http://localhost:9515", DesiredCapabilities.chrome());
@driver = new Chromedriver();
caps = Selenium::WebDriver::Remote::Capabilities.chrome
@driver = Selenium::WebDriver.for(
      :remote,
      :url => "http://192.168.1.30:4444/wd/hub",
      :desired_capabilities => caps)
@driver = Selenium::WebDriver.for :chrome 
```

我已经运行了我的 selenium 服务器，其中`Dwebdriver`包含`nodeConfig`5 个可用的 chrome 实例。

我希望我已经提供了足够的信息，如果没有，请询​​问！我真的不知道如何自己解决这个问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:22:52.407

您的 PATH 是系统查找`chromedriver.exe`文件的位置。如果`.exe`不在您的 PATH 中，系统将找不到它。

您可以通过右键单击“我的电脑”并在选择框中`Properties -> advanced -> environment variables`找到并找到包含在 PATH 中的计算机上文件位置的详细信息。`PATH`您可以对其进行编辑以添加新位置或将 .exe 放在现有位置。

我在 C:\Ruby187\bin 中有它，我可能不得不在第一次设置 ruby​​ 时手动添加它，但我不记得了 :o)

# wordpress - wp_insert_post 自定义帖子类型

> ID：12040029
> 
> 赞同：1
> 
> 时间：2012-08-20T14:55:32.737
> 
> 标签：wordpress

我正在使用以下代码插入自定义帖子类型：

```
if(isset($_POST['submit'])){

    $post_id = wp_insert_post( array(
                    'post_status' => 'publish',
                    'post_type' => 'custom_type',
                    'post_title' => 'Some post',
                    'post_content' => 'Lorem ipsum'
                ) );

} 
```

我收到错误页面；标题：“WordPress 失败通知”和页面中的文字“您确定要这样做吗？

请再试一次。”

但是当我尝试插入 post_type: post 时，一切正常。当我尝试在没有 isset 的情况下插入时，一切正常；

```
$post_id = wp_insert_post( array(
                        'post_status' => 'publish',
                        'post_type' => 'custom_type',
                        'post_title' => 'Some post',
                        'post_content' => 'Lorem ipsum'
                    ) ); 
```

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:13:16.033

我没有找到除此之外的解决方案（并且它有效）：

```
if(isset($_POST['submit'])){

    $post_id = wp_insert_post( array(
                    'post_status' => 'publish',
                    'post_type' => 'post',
                    'post_title' => 'Some post',
                    'post_content' => 'Lorem ipsum'
                ) );

$post_type = 'custom_type';

$query = "UPDATE {$wpdb->prefix}posts SET post_type='".$post_type."' WHERE id='".$post_id."' LIMIT 1";

GLOBAL $wpdb; 

$wpdb->query($query);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T23:33:44.857

插入新的自定义帖子类型时遇到了同样的问题。通过在调用 wp_insert_post 函数之前取消设置 $_POST 找到了临时解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T22:58:59.703

我让我的工作：

PHP，放在标题之前：

```
if(isset($_POST['new_post']) == '1') {

$new_post = array(
      'ID' => '',
      'post_type' => 'customtype', // Custom Post Type Slug
      'post_status' => 'publish',
      'post_title' => $_POST['post_title'],
    );

$post_id = wp_insert_post($new_post);
$post = get_post($post_id);
} 
```

在 HTML 中：

```
<form method="post" action="">

      <input name="post_title" type="text" />

      <input type="hidden" name="new_post" value="1" />
      <input type="submit" name="submit" value="Post" />

</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:54:57.687

试试这个，这是表单标题

```
<form id="insert_new_lesson" name="insert_new_lesson" method="post" action="" class="lesson-form">; 
```

我做的if语句是这样的

```
if ( 'POST' == $_SERVER['REQUEST_METHOD'] && !empty( $_POST['action'] ) && 'insert_new_lesson' == $_POST['action'] ) 
```

# google-drive-api - GData Documents List API：按类型检索文件夹和文件列表

> ID：12040032
> 
> 赞同：0
> 
> 时间：2012-08-20T14:55:43.953
> 
> 标签：google-drive-api, google-docs-api

我想检索用户帐户中所有文件夹的列表以及具有特定 mime 类型的文件，例如 application/msword 和 application/pdf

我使用下一个查询： [https ://docs.google.com/feeds/default/private/full/folder%3Aroot/contents/-/%7Bhttp%3A%2F%2Fschemas.google.com%2Fg%2F2005%23kind% 7Dapplication%2Fmsword/%7Bhttp%3A%2F%2Fschemas.google.com%2Fg%2F2005%23kind%7Dapplication%2Fpdf/%7Bhttp%3A%2F%2Fschemas.google.com%2Fg%2F2005%23kind%7Dimage%2Fjpg？最大结果=1000&showfolders=true&sortorder=升序](https://docs.google.com/feeds/default/private/full/folder%3Aroot/contents/-/%7Bhttp%3A%2F%2Fschemas.google.com%2Fg%2F2005%23kind%7Dapplication%2Fmsword/%7Bhttp%3A%2F%2Fschemas.google.com%2Fg%2F2005%23kind%7Dapplication%2Fpdf/%7Bhttp%3A%2F%2Fschemas.google.com%2Fg%2F2005%23kind%7Dimage%2Fjpg?max-results=1000&showfolders=true&sortorder=ascending)

作为回应，我只得到 pdf 和 MS Word 文件，没有文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T02:57:16.147

您使用的是旧版文档列表，而不是新版 Drive SDK。

在云端硬盘中，您可以使用它

> GET [https://www.googleapis.com/drive/v2/files?maxResults=1000&q=mimeType+%3D+](https://www.googleapis.com/drive/v2/files?maxResults=1000&q=mimeType+%3D+) 'application%2Fmsword'+or+mimeType+%3D+'application%2Fpdf'+or+mimeType+%3D+'application%2Fvnd .google-apps.folder'+&key={YOUR_API_KEY}

如果您访问[https://developers.google.com/drive/v2/reference/files/list#try-it](https://developers.google.com/drive/v2/reference/files/list#try-it)，您可以自己尝试一下。

# iphone - 从导航控制器弹出视图后递归不会停止

> ID：12040035
> 
> 赞同：1
> 
> 时间：2012-08-20T14:55:57.490
> 
> 标签：iphone, objective-c, ios, sdk

我有一个递归调用来执行用户的一些记录动作。虽然使用以下递归调用执行动画，但如果用户按下后退按钮将视图控制器弹出堆栈，动画不会停止，我可以在控制台上看到日志条目（代表不同的日志移动）。

```
-(void)replayNextLog {
    if ((replayLogIndex < [lastTurnGameLogList count]-1) && (!skipReplayButtonWasPressed)) {
        float delayToNextReplay;

        //the replayLogIndex ends with count-1 because the last one is empty due to the last empty line
        NSDictionary *logEntryDict = [lastTurnGameLogList objectAtIndex:replayLogIndex];

        for (id key in logEntryDict) {
            if ([key isEqualToString:kGuessMoveTypeLetterButton]) {

            } else if ([key isEqualToString:kGuessMoveTypeRevealHint]) {

            } else if ([key isEqualToString:kGuessMoveTypeReset]) {

            } else if ([key isEqualToString:kGuessMoveTypePass]) {

            } else if ([key isEqualToString:kGuessMoveTypeShuffle]) {

            }
        }

        replayLogIndex++;

        // Recursive call
        [self performSelector:@selector(replayNextLog) withObject:nil afterDelay:delayToNextReplay];
    }
} 
```

可能是因为视图控制器中的任何泄漏？为了您的方便，让我告诉您，我没有达到 VC 的 dealloc 方法。

提前致谢。

问候， 奥贝德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:00:06.137

您将需要控制动画/递归，可能使用实例变量，并从方法中启动它并从`viewDidAppear`方法中停止它`viewDidDisappear`。视图控制器不一定会因为它是从导航控制器中弹出而被销毁。

# database - 如何在 Phonegap HTML5 离线应用程序上存储超过 5MB 的数据？

> ID：12040039
> 
> 赞同：0
> 
> 时间：2012-08-20T14:56:04.017
> 
> 标签：database, html, cordova, local-storage

我正在开发一个 HTML5 应用程序。此应用程序必须存储数据（大量 JSON 和 Base64 图片），直到用户将其与我们的服务器同步。同步后，我必须将数据存储在设备上一个月。

我将使用 Phonegap 来构建应用程序。我知道有 5MB 的限制，所以我肯定必须以不同的方式存储我的数据。什么是最好的解决方案？你会推荐我什么？

## 编辑：

我忘了说，但我将拥有我公司用于安装应用程序的所有设备，所以也许有办法通过欺骗 Android pad 来超越限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:19:26.313

这代表 localStorage 和内置的 SQLite 数据库。我建议您查看[File API](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#File)，它允许您将文件存储在设备中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T07:49:04.827

我在 iOS/Android Phonegap 应用程序中使用了[一个](https://github.com/chbrody/Cordova-SQLitePlugin)简洁的 SQLite 插件。我已经对其进行了测试，发现它的方法在两个平台上都能很好地工作。

至于同步 JSON 数据和 Base64 图像，我正在使用通过这个插件管理的 SQLite DB 做同样的事情。我只有几百个较小的图像我正在使用，但我发现 SQLite DB 对于这个目的非常可靠。

感谢该插件的作者。

# google-chrome - IE9中的线性渐变

> ID：12040043
> 
> 赞同：1
> 
> 时间：2012-08-20T14:56:16.593
> 
> 标签：google-chrome, internet-explorer-9, linear-gradients

这是 Google Chrome 中的线性渐变代码：

```
background: -webkit-gradient(linear,left top,right bottom,from(#FFFF99),color-stop(25%,#FFFF99),color-stop(25%,#FFCC00),color-stop(50%,#FFCC00),color-stop(50%,#FFFF99),color-stop(75%,#FFFF99),color-stop(75%,#FFCC00), to(#FFCC00));        -
webkit-background-size: 8px; 
```

我如何将此属性转换为 IE9？

# ios - 如何知道 UIView 的当前比例？

> ID：12040044
> 
> 赞同：21
> 
> 时间：2012-08-20T14:56:16.230
> 
> 标签：ios, objective-c, uiview, zooming, scale

您如何找到 a 的当前比例（缩放级别）`UIView`？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-20T15:10:00.560

如果您正在对视图应用缩放变换，则该变换将通过UIView 上的[`transform`属性（适当地）可用。](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW4)根据[CGAffineTransform 文档](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)，比例变换将在变换矩阵的坐标 (1,1) 和 (2,2) 处具有非零值；因此，您可以通过以下方式获得 x 和 y 比例因子：

```
CGFloat xScale = view.transform.a;
CGFloat yScale = view.transform.d; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-09-14T15:38:36.560

根据此[来源](https://www.hackingwithswift.com/example-code/core-graphics/how-to-find-the-scale-from-a-cgaffinetransform)，使用此方法可为您提供比例，而不管应用于变换的旋转或平移：

```
func scale(from transform: CGAffineTransform) -> Double {
    return sqrt(Double(transform.a * transform.a + transform.c * transform.c));
} 
```

我知道我迟到了，但接受的答案对我来说不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-30T19:21:33.180

使用围绕[CGAffineTransform](https://developer.apple.com/documentation/coregraphics/cgaffinetransform)变换矩阵的一些数学运算，您可以计算比例。这也在[玛格丽特的评论](https://stackoverflow.com/a/46223255/1636026)中提到。Swift 允许你编写一个带有计算属性的简单扩展：

```
extension CGAffineTransform {
    var scale: Double {
        return sqrt(Double(a * a + c * c))
    }
} 
```

因此，稍后您可以通过`scale`直接在 上调用 a 来使用`CGAffineTransform`，如下所示：

```
let someViewScale = someView.transform.scale 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T15:03:06.977

该功能由 UIScrollView 及其 zoomScale 属性提供。

编辑：

知道当前尺度由变换矩阵给出。如您所知，比例值在这里：

```
sx, 0,  0
0 , sy, 0
. . .. ,1\. 
```

要获取当前状态，只需记录转换的状态。但是，要返回该状态，您需要使用上次转换的逆或加载单位矩阵。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T15:14:29.720

检查这个它会帮助你....在这个你可以学习如何使用`UIPinchGestureRecognizer`....[设置最小和最大缩放比例。如何使用 UIPinchGestureRecognizer 设置最小和最大缩放比例](https://stackoverflow.com/questions/10958624/how-to-set-minimum-and-maximum-zoom-scale-using-uipinchgesturerecognizer)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T15:09:25.383

那不是`contentScaleFactor`（[参考](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/contentScaleFactor)）吗？

# objective-c - 无法签出 GData Objective-C 客户端 SVN

> ID：12040046
> 
> 赞同：0
> 
> 时间：2012-08-20T14:56:19.320
> 
> 标签：objective-c, ios, gdata

我试图检查 Obejctive-C 客户端的 GData（从这里找到链接：[http](http://code.google.com/p/gdata-objectivec-client/source/checkout) ://code.google.com/p/gdata-objectivec-client/source/checkout ），但它一直告诉我修订版不是-存在。我也尝试了不同的工具和方法。但这些都不起作用。如果您对这个问题有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:00:01.533

错误的网址。打开*终端*并执行以下操作：

```
svn checkout http://gdata-objectivec-client.googlecode.com/svn/trunk/ gdata-objectivec-client-read-only 
```

# windows-8 - Win8：WriteableBitmap.Render 支持？

> ID：12040047
> 
> 赞同：3
> 
> 时间：2012-08-20T14:56:25.327
> 
> 标签：windows-8, windows-runtime

在 Windows 8 应用程序中，我想对视觉树的特定层次结构进行“截图”，看起来`WriteableBitmap.Render`即使在 Windows 8 RTM 中也不支持。还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:33:20.060

我刚刚研究了很短的时间，但我正在努力实现一些基本的组合代码来将可视化树渲染为位图。现在让它适用于一些基本的 TextBlocks，但我可能很快也会添加其他部分。您可以使用代码添加场景中所需的元素。

[http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/585d3ae5a3e3#WinRTXamlToolkit.Composition%2fWriteableBitmapRenderExtensions.cs](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/585d3ae5a3e3#WinRTXamlToolkit.Composition%2fWriteableBitmapRenderExtensions.cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:07:09.353

不幸的是，没有简单的方法可以简单地将可视化树腌制为 WriteableBitmap。您可以获取[原始像素流](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.writeablebitmap.pixelbuffer.aspx)并对其进行操作。查看[WriteableBitmapEx——](http://writeablebitmapex.codeplex.com/) 我认为它不会取代 Render 功能，但它是如何在 WinRT 中使用 WriteableBitmaps 的一个很好的例子。

# iphone - iPhone的Phonegap中与URI相关的白名单错误？

> ID：12040049
> 
> 赞同：0
> 
> 时间：2012-08-20T14:56:34.950
> 
> 标签：iphone, cordova, uri, whitelist, cordova-2.0.0

```
ERROR whitelist rejection: url='http://api.some_host-name.country_code/some_thing.json' 
```

这是我用来获取 json 格式提要的 URI 格式。

请告诉我如何将它添加到我尝试添加 *, *.* , *.some_host_name.com *.some_host_name.country_code *.some_host_name.country_code/*

等等等等。但似乎没有任何效果，我得到的只是屏幕上加载的 UI。请帮我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:56:17.707

有时如果你不清理和重建项目，就会出现一些问题，所以我建议先清理。

要将新记录添加到白名单中，如果您使用的是 Xcode，请在工作树中获取 Cordova.plist 并选择它。打开`ExternalHosts`下拉列表并按下`+`将显示的符号，它将添加一条新记录，您可以填写您的服务器名称、通配符或任何您需要的内容。

# jquery - 奇怪的绝对定位行为

> ID：12040051
> 
> 赞同：2
> 
> 时间：2012-08-20T14:56:36.697
> 
> 标签：jquery, css, positioning

我正在使用 jQuery 添加一个新的 div 并将其放置在原始 div 之后。一切正常，定位正确，但是当我滚动时，绝对定位的 div 充当`fixed`而不是滚动内容。

有谁知道这可能是为什么？

```
$('[data-tagging]').after('<div id="tagging-msg"></div>');

$('[data-tagging]').on("keyup", function(e) {
    var content = $(this).text();
    var go = content.match(start);
    var name = content.match(word);

    var offset = $(this).offset();
    var height = $(this).outerHeight();
    var width = $(this).outerWidth();

    var top = (offset.top + height) - 3 + "px";
    var left = offset.left + "px";

    $("#tagging-msg").css({position: 'absolute', top: top, left: left, width: width - 10 + 'px'});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:20:32.820

您应该在 CSS 属性名称之间使用引号

```
$("#tagging-msg").css({'position': 'absolute', 'top': top,... 
```

# php - 如何从网站运行 php CLI 脚本

> ID：12040052
> 
> 赞同：2
> 
> 时间：2012-08-20T14:56:48.090
> 
> 标签：php, html, exec, command-line-interface, execute

> **可能重复：**
> [从网页运行 PHP CLI 脚本](http://stackoverflow.com/questions/4969250/run-a-php-cli-script-from-a-webpage)

我在这里有一个问题.. 它是关于如何从网页运行 php cli 脚本..
请注意，我使用的是本地主机并且安全模式已关闭..

我已经尝试过 exec() ， system() 和许多其他的。
这是我想要做的一个例子：

该网站包含：

```
<?php
//blabla
$command = "/usr/bin/php test.php";
exec($command);
//blabla
?> 
```

并检查脚本是否成功运行，脚本“test.php”包含：

```
<?php
$file = "/home/Me/Desktop/cccc.txt";
$fp = fopen($file, 'w');
fwrite($fp, 'aaaaa');
fclose($fp);
?> 
```

从命令行执行该脚本是可以的，但是当我从网站执行它时它没有
任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:07:41.887

尝试使用更简单的命令，例如 exec("dir")。

如果可行，请尝试 whoiam() 并查找权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:00:03.483

您需要告诉命令行命令在哪里`test.php`；“工作目录”几乎肯定**不会**是 PHP 文件的位置。

尝试`$command = '/usr/bin/php ' . dirname(__FILE__) . 'test.php';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T14:58:21.767

确保网站用户（通常是 apache）有权执行此脚本。

# facebook - 使用开放图的 Facebook 趋势文章

> ID：12040056
> 
> 赞同：0
> 
> 时间：2012-08-20T14:56:53.120
> 
> 标签：facebook, facebook-opengraph

我有一个 facebook 开放图形应用程序，用户可以在其中“阅读”（操作类型）“文章”（对象类型）。在我们的网站中，我们有一个 15 秒的计时器，当计时器结束时，我们有以下 JS 调用：

```
FB.api
(
    '/me/news.reads','post',
    {article:window.location.href}
); 
```

该模块一切正常，有时我们甚至在“热门文章”中。我看到像 9gag 这样的其他一些网站也有类似的模块，但是当您单击他们的热门文章时，它会将您带到他们的应用程序，并且您必须授予权限才能继续。另一方面 - 当您点击我们的应用程序时 - 它会将您带到文章本身。

我尝试`window.location.href`使用 facebook 登录 URL 更改部分，但它不起作用，因为当`FB.api()`调用该方法时，它会检查页面的 og:type。我的页面有正确的 og:type，但 facebook 登录 URL 没有这样的东西。

如何强制我在 facebook 中的社交阅读器应用程序上的链接要求用户先获得权限，然后再设置权限 - 将您重定向到我们网站上的真实文章。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:59:52.407

# javascript - 文本框搜索和返回

> ID：12040058
> 
> 赞同：-1
> 
> 时间：2012-08-20T14:57:09.053
> 
> 标签：javascript, html, xmlhttprequest, wikipedia-api

我正在尝试编写一个简单的文本框，因此当在其中输入查询时，它会在维基百科中搜索该查询并将结果返回到我的网站。

我遇到一些问题的部分是 Wikipedia API。我已经尝试使用它并对其进行测试 - 但失败了。

如果有人可以帮助我或知道教程网站或任何可以帮助我的东西，我会非常高兴。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T14:59:56.713

[这个网站](http://www.mediawiki.org/wiki/API%3aClient_code#Javascript)有相当多的信息。它包含一些链接，这些链接向您解释如何通过 JavaScript 连接到 Wikipedia API。

现在，非常感谢！;)

# sql - 按键分组并仅返回结果行之一

> ID：12040062
> 
> 赞同：0
> 
> 时间：2012-08-20T14:57:20.410
> 
> 标签：sql, oracle

我在一个简单的表中有以下数据：

```
ID | TYPE
---------
1  | 1
1  | 2
2  | 1
3  | 2
4  | 1
4  | 2
4  | 3
5  | 1
5  | 3
6  | 3 
```

我现在需要通过以下方式查询这些数据：

*   对于每个 ID，应该只返回一行
    *   如果 ID 只有一行，则返回它。
    *   如果 ID 有多行，则返回 TYPE = 2 的行。如果不存在，则返回 TYPE = 3 的行。
*   TYPE 可以是 1、2 或 3
*   ID 和 TYPE 有一个复合唯一索引，这意味着每个 ID 最多可以有三行。

问题：我如何将这个逻辑放在查询中？

* * *

预期结果：

```
ID | TYPE
---------
1  | 2
2  | 1
3  | 2
4  | 2
5  | 3
6  | 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:00:17.600

Oracle 在所有最新版本中都具有分析功能。

```
WITH
  sequenced AS
(
  SELECT
    *,
    ROW_NUMBER() OVER (PARTITION BY id
                           ORDER BY CASE type WHEN 2 THEN 1
                                              WHEN 3 THEN 2
                                              WHEN 1 THEN 3 END) AS sequenced_id
  FROM
    yourTable
)
SELECT
  *
FROM
  sequenced
WHERE
  sequence_id = 1 
```

使用此技术，您将返回表中的所有值，而不仅仅是 PrimaryKey 和搜索值。

**编辑：**

处理这个问题的最好方法是拥有另一个表，该表具有每种类型的优先顺序。

```
 type | preference_value
------+------------------
  2   |         1
  3   |         2
  1   |         3 
```

这表明这`2`是最优先的，`3`是第二优先的，`1`是第三优先的。

然而，因为它是一个很小的群体，它也可以只用一个简单的`CASE`语句来完成。请参阅上面我修改后的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:16:08.793

这是我的看法：[http ://www.sqlfiddle.com/#!4/9957d/4](http://www.sqlfiddle.com/#!4/9957d/4)

```
select id, 
    case when sum(case when type = 2 then 1 end) = 1 then
       2
    else
       max(type)
    end   
from tbl
group by id
order by id 
```

输出：

```
| ID | TYPE |
-------------
|  1 |    2 |
|  2 |    1 |
|  3 |    2 |
|  4 |    2 |
|  5 |    3 |
|  6 |    3 | 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T15:30:03.373

另一种方法，最小化 CASE WHEN 分支：[http ://www.sqlfiddle.com/#!4/9957d/17](http://www.sqlfiddle.com/#!4/9957d/17)

```
select id, 

    coalesce( sum(case when type=2 then 2 end), max(type) ) as type

from tbl
group by id
order by id 
```

输出：

```
| ID | TYPE |
-------------
|  1 |    2 |
|  2 |    1 |
|  3 |    2 |
|  4 |    2 |
|  5 |    3 |
|  6 |    3 | 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T14:58:59.850

由于您知道没有`TYPE`高于 2 的值，因此您可以这样做：

```
select ID, max(TYPE) as TYPE
from MyTable
group by ID 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T15:06:34.527

试试这个

```
select id, type from
(
   select *, ROW_NUMBER() over (partition by id order by abs(2.25-type) ) as rn
   from yourtable
)v
where rn=1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-20T15:11:59.890

我会使用一个小技巧。

```
SELECT ID, IF(SUM(TYPE) IN (5, 6), 2, MAX(TYPE)) AS TYPE
FROM table
GROUP BY ID 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-20T15:22:04.540

玩转`MOD()`功能：

```
SELECT 
    id,
    MOD(MIN(MOD(type+1,3))+1,3)+1 AS type
FROM
    tableX
GROUP BY
    id ; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-20T15:29:00.660

根据 podiluska 和 Dems 的建议，我现在使用这个：

```
with type_order as
(
    select 1 as type, 0 as prio from dual
    union all
    select 2 as type, 2 as prio from dual
    union all
    select 3 as type, 1 as prio from dual
)
select id, type from 
( 
   select yt.*, ROW_NUMBER() over (partition by id order by o.prio desc) as rn 
   from yourtable yt
   inner join type_order o on yt.type = o.type
)v 
where rn=1 
```

这是非常明确的意图并且易于扩展。如果以后有更多的类型，这个`type_order`内联视图可以重构为一个真实的表格。

# jquery - 如何在这个 div 上添加滚动？

> ID：12040069
> 
> 赞同：1
> 
> 时间：2012-08-20T14:57:43.633
> 
> 标签：jquery, scroll, overflow, positioning, css-position

我需要能够滚动的 div 是：我需要它在 timeholder div 中滚动，并且最好有一个自定义滚动条，但这不是必需的。我尝试过插件和 css 解决方案，但无济于事。我最好在 jquery 中寻找解决方案...

```
 <div class="timeHolder">
        <div class="timeView">              
<!-- Year Markers -->            
                <div class="yearMarker">1943</div><div class="yearMarker">1944</div><div class="yearMarker">1945</div><div class="yearMarker">1946</div><div class="yearMarker">1947</div><div class="yearMarker">1948</div><div class="yearMarker">1949</div><div class="yearMarker">1950</div><div class="yearMarker">1951</div><div class="yearMarker">1952</div><div class="yearMarker">1953</div><div class="yearMarker">1954</div><div class="yearMarker">1955</div><div class="yearMarker">1956</div><div class="yearMarker">1957</div><div class="yearMarker">1958</div><div class="yearMarker">1959</div><div class="yearMarker">1960</div><div class="yearMarker">1961</div><div class="yearMarker">1962</div><div class="yearMarker">1963</div><div class="yearMarker">1964</div><div class="yearMarker">1965</div><div class="yearMarker">1966</div><div class="yearMarker">1967</div><div class="yearMarker">1967</div><div class="yearMarker">1969</div><div class="yearMarker">1970</div><div class="yearMarker">1971</div><div class="yearMarker">1972</div><div class="yearMarker">1973</div><div class="yearMarker">1974</div><div class="yearMarker">1975</div><div class="yearMarker">1976</div><div class="yearMarker">1977</div><div class="yearMarker">1978</div><div class="yearMarker">1979</div><div class="yearMarker">1980</div><div class="yearMarker">1981</div><div class="yearMarker">1982</div><div class="yearMarker">1983</div><div class="yearMarker">1984</div><div class="yearMarker">1985</div><div class="yearMarker">1986</div><div class="yearMarker">1987</div><div class="yearMarker">1988</div><div class="yearMarker">1989</div><div class="yearMarker">1990</div><div class="yearMarker">1991</div><div class="yearMarker">1992</div><div class="yearMarker">1993</div><div class="yearMarker">1994</div><div class="yearMarker">1995</div><div class="yearMarker">1996</div><div class="yearMarker">1997</div><div class="yearMarker">1998</div><div class="yearMarker">1999</div><div class="yearMarker">2000</div><div class="yearMarker">2001</div><div class="yearMarker">2002</div><div class="yearMarker">2003</div><div class="yearMarker">2004</div><div class="yearMarker">2005</div><div class="yearMarker">2006</div><div class="yearMarker">2007</div><div class="yearMarker">2008</div><div class="yearMarker">2009</div><div class="yearMarker">2010</div><div class="yearMarker">2011</div><div class="yearMarker">2012</div><div class="yearMarker">2013</div><div class="yearMarker">2014</div><div class="yearMarker">2015</div><div class="yearMarker">2016</div><div class="yearMarker">2017</div><div class="yearMarker">2018</div><div class="yearMarker">2019</div>

<!-- End Year Markers -->           

        </div>
    </div>    

</aside> 
```

CSS：

```
/*---------- Start Timeline 2 ---------*/

.timeContainer { position: fixed; width: 100px; height: 90%; margin: 2% 0% 5% 0%; top: 0px; right: 30px; overflow:hidden;}

 .timeHolder { position: absolute; width: 100px; margin: 50px 0px 50px 0px; top: 0px; left: 0px;}

.timeView { position:absolute; width: 100px; height: 28105px; max-height: 28105px; top: 0px; left: 0px; background-image:url(../img/longTimeBG3.png); background-repeat:repeat-y; background-position: top left; z-index: 90;; 
}

/*---------- End Timeline 2 ---------*/ 
```

--------------------------编辑添加另一个问题-------------------- ---------

好的，我有这个准备好的动画，将 timeView div 移动到 2011 年（或 -24820 像素）

现在滚动位置现在设置在 2011 年的顶部，并且不会再向上滚动

这是初始化动画的脚本：

```
$('.timeView').animate({         
        easing: 'easeInExpo',
        top: '-=24820px',
}, 10000); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:41:21.597

您的

```
position : absolute; 
```

与卷轴冲突...你真的需要它是绝对的吗？尝试设置

```
position : relative 
```

到你的内部 div 就像在这个小提琴中：http: [//jsfiddle.net/GSzZw/27/](http://jsfiddle.net/GSzZw/27/)关键是让你的 timeView 高度大于你的 timeHolder 高度（两个高度都必须设置）并添加

```
overflow-y : scroll; 
```

或者

```
overflow-y : auto; 
```

----- 编辑 ------ 如果您更改“顶部”值，您将**无法**向上滚动。

如果您想**滚动**到特定位置，请使用 jQuery 的[scrollTop](http://api.jquery.com/scrollTop/)并看看这个小提琴：http: [//jsfiddle.net/GSzZw/48/](http://jsfiddle.net/GSzZw/48/)

动画使用：

```
$(document).ready(function() {
    $(".timeHolder").animate({         
        scrollTop: '24800',
     }, 10000);
}); 
```

代替 ：

```
$(document).ready(function() {
    $(".timeHolder").scrollTop(24800);
}); 
```

​ ​</p>

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:03:54.007

JQuery Scrollable 是最好和最简单的解决方案。

[http://jquerytools.org/download/](http://jquerytools.org/download/)

其他解决方案是 ScrollTo 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:17:02.077

放入你的CSS

```
overflow: auto; 
```

在你的 div 上你想要滚动条。

# jna - 如何通过 JNA 将指针指针映射到结构？

> ID：12040072
> 
> 赞同：1
> 
> 时间：2012-08-20T14:57:55.170
> 
> 标签：jna

现在我已经定义了 ac 结构如下：

```
struct HostNameEntry {
    char *hostName;
    struct HostNameEntry *next;
}; 
```

我已经定义了一个方法如下：

listHosts(HostNameEntry **hostNameListPtr)

上述方法将返回一个 HostNameEntry 给调用者。

如何通过 JNA 映射此结构/方法？以及如何获取存储在 HostNameEntry 中的主机名？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:29:49.853

您使用 Structure.ByReference 标记 HostNameEntry 类的一个版本，以强制该字段采用指针值（而不是内联）。

```
public class HostNameEntry extends Structure {
   public static class ByReference extends HostNameEntry implements Structure.ByReference { }

   public String hostName;
   public HostNameEntry.ByReference next;

   public HostNameEntry() { }
   public HostNameEntry(Pointer p) { super(p); read(); }
}

public interface MyInterface extends Library {
    MyInterface INSTANCE = ...;
    void listHosts(PointerByReference pr);
}

// actual usage
PointerByReference pref = new PointerByReference();
MyInterface.INSTANCE.listHosts(pref);
HostNameEntry first = new HostNameEntry(pref.getValue()); 
```

# mongodb - 从 mongodb 读取对象后如何实例化瞬态成员

> ID：12040073
> 
> 赞同：0
> 
> 时间：2012-08-20T14:58:01.440
> 
> 标签：mongodb, constructor, repository, init, transient

我正在使用 MongoRepository 在 MongoDB 中保存/检索对象。我有一个对象，其属性定义如下：

```
@Document
public class ConfigurationItem {

    String s1;

    @Transient
    String s2;
} 
```

存储库将按预期保存/检索 s1，但不理会 s2，因为它被定义为瞬态。

现在的问题是：我在哪里调用可以将正确值放入 s2 的“初始化瞬态”方法？我希望在每次实例化 ConfigurationItem 类型的对象后调用它，但是构造函数为时过早，s1 尚未设置其值，并且 s2 的值取决于 s1。

是否有我可以覆盖的“后期构造”方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:04:13.973

[@PersistenceConstructor](http://static.springsource.org/spring-data/data-mongodb/docs/current/reference/html/#mapping-usage-annotations)注释应该允许您根据对象从数据库中水合时`s2`的值进行设置。`s1`

# javascript - Rendering through javascript

> ID：12040074
> 
> 赞同：0
> 
> 时间：2012-08-20T14:58:09.880
> 
> 标签：javascript, image, web, svg, render

I have been trying to render a svg image through javascript. Tried various options, but ultimately have to resolve to this one.

I have declared an object id in html like this

```
<object id="gauge1" type="image/svg+xml" data="gauge.svg" width="127" height="122"/> 
```

Now, I have been trying to access this gauge.svg through javascript. I have created an element of embed type like this

```
this.m_svg = document.createElement('embed'); 
```

aand then trying to use `setAttribute` to access the image, but no success. Any suggestions?

Also pasting the svg code here with the image.

image: [https://sphotos-b.xx.fbcdn.net/hphotos-snc6/179594_10150982737360698_1827200234_n.jpg](https://sphotos-b.xx.fbcdn.net/hphotos-snc6/179594_10150982737360698_1827200234_n.jpg) svg code:

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g name="gauge" width="122px" height="127px">
        <image xlink:href="gauging.png" width="122" height="127"/>
    <circle id="led" cx="39" cy="76" r="5" style="fill: #999; stroke: none">
        <animateColor id="ledAnimation" attributeName="fill" attributeType="css" begin="0s" dur="1s"
        values="none;#f88;#f00;#f88;none;" repeatCount="0"/>
    </circle>
        <g id="needle" transform="rotate(0,62,62)">
            <circle cx="62" cy="62" r="4" style="fill: #c00; stroke: none"/>
            <rect transform="rotate(-130,62,62)" name="arrow"  x="58" y="38" width="8" height="24" style="fill: #c00; stroke: none"/>
            <polygon transform="rotate(-130,62,62)" points="58,39,66,39,62,30,58,39" style="fill: #c00; stroke: none"/>
        </g>
        <text id="value" x="51" y="98" focusable="false" editable="no" style="stroke:none; fill:#fff; font-family: monospace; font-size: 12px"></text>
    </g>
</svg> 
```

PS : Already tried this.m_svg.innerHTML = svg code (Doesnt work on safari)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:24:04.317

[This](https://jwatt.org/svg/demos/scripting-across-object.html) shows you how to access the elements that are the contents of an `<object>` tag.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:21:53.537

Make sure that your headers are set correctly, I know that webkit can get a little selective with it's SVG implementation unless headers are set to:

```
<meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8" /> 
```

for more info check here: [https://stackoverflow.com/a/6410814/873836](https://stackoverflow.com/a/6410814/873836)

# model-view-controller - MVC - 存储库与业务层

> ID：12040078
> 
> 赞同：0
> 
> 时间：2012-08-20T14:58:23.030
> 
> 标签：model-view-controller, repository, business-logic

我正在使用 MVC。我将使用存储库通过 LINQ 检索我需要的必要记录。

据我了解，数据访问是我在存储库中要做的。

例如，我可以使用 LINQ 检索存储库中的一些记录。

对存储库和业务层之间的区别有点困惑。他们不是同一个吗。意思是，我正在使用业务逻辑来检索 LINQ 中的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:04:30.593

> “Repository 层和 Business 层有什么区别，它们不是一回事吗？”</p>

存储库仅用于从例如数据库中检索业务对象。

业务层用于通常操作业务对象的业务逻辑。

所以答案是否定的，它们不一样。

您的业​​务层很可能使用存储库来获取业务对象，但这并不意味着它就是存储库。

# php - PHP 十进制做 DDD MM.MMM

> ID：12040079
> 
> 赞同：0
> 
> 时间：2012-08-20T14:58:34.577
> 
> 标签：php, gps

如何在 PHP 中将 Decimal (52.44554) 转换为 DDD MM.MMM？

标准步骤是：

```
52 = N52° + 0.44554*60 => 26,732;   ===>  N52° 26,732 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:04:15.810

这应该这样做。 `$degrees`并且`$minutes`会保存你感兴趣的值。

```
$dec_degrees = 52.44554;
$degrees = floor($dec_degrees);
$dec_minutes = $dec_degrees - $degrees;
$minutes = 60 * $dec_minutes; 
```

# jquery - 使用 jQuery 为所有元素更改 CSS 中精灵的背景位置

> ID：12040082
> 
> 赞同：3
> 
> 时间：2012-08-20T14:58:38.133
> 
> 标签：jquery, css, background, sprite, background-position

我有一个图像精灵，它是主 div 的背景，里面有十几个链接。我不想在每个链接悬停时在 CSS 文件中写入背景位置的值，而是想在 jQuery 中执行此操作，以便背景位置 y 增加 550 像素（x 位置将保持不变）。

标记：

```
<div class="compass">
    <a class="facebook" href="#">&nbsp;</a>
    <a class="twitter" href="#">&nbsp;</a>
    <a class="youtube" href="#">&nbsp;</a>
</div> 
```

CSS：

```
.compass {
    background-image: url('../images/compass.png');
    background-position: top;
    height: 550px;
    position: relative;
    width: 567px;
    margin: 0 auto;
}
.compass a{
    background-image: url('../images/compass.png');
    background-position: top;
    display: block;
    position: absolute;
}
a.facebook {
    height: 51px;
    width: 26px;
    left: 151px;
    top: 190px;
} 
```

所以想法是为每个链接编写一个 CSS 规则样式，指示背景图像的 x 和 y 位置。然后，在悬停时，y 位置将增加 550 像素。在鼠标移出时，它会回到原来的状态（减少 550 像素）。

我已经开始使用 jQuery 语法，但无法弄清楚：

```
var originalPosition = obj.css('background-position');
$(".compass a").hover(
    function(){
        $(this).css('backgroundPosition', originalPosition + 550 + "px")
    },
    function(){
        $(this).css('backgroundPosition', "");
    }
) 
```

非常感谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:14:11.933

编辑后也可以在 FF 中工作。

```
$(".compass a").hover(function() {
    var bgpos = $(this).css('backgroundPosition').split(' ');
    $(this).css('backgroundPosition', bgpos[0] + ' ' + (parseInt(bgpos[1],10)+550) + 'px');
}, function() {
    var bgpos = $(this).css('backgroundPosition').split(' ');
    $(this).css('backgroundPosition', bgpos[0] + ' ' + (parseInt(bgpos[1],10)-550) + 'px');
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/3TxW9/2/)

归功于FF hack 的[这个答案](https://stackoverflow.com/a/6821820/1331430)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:05:26.943

您最好将悬停和标准背景位置创建为单独的 CSS 规则，并使用`addClass`and `removeClass`。

```
$(".compass a").hover(
    function(){
        $(this).addClass('hoverIn');
    },
    function(){
        $(this).removeClass('hoverIn');
    }
); 
```

CSS：

```
.compass a.hoverIn {
    background-position: 550px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:15:00.903

看看这个，为你新鲜制作。做这项工作。 [http://jsfiddle.net/Anr24/](http://jsfiddle.net/Anr24/)

或者，在 CSS 中定义 :hover 属性不是更好吗？

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:20:35.640

如果您想在背景位置值中添加任意数量，请尝试使用 +=X 和 -=X 其中 X 是要添加/删除的值。

我可能有更精细的细节错误，但类似这样：

```
$(".compass a").hover(
    function(){
    $(this).css('backgroundPosition', '+=50px')
},
function(){
    $(this).css('backgroundPosition', '-=50px');
}
) 
```

...应该做的伎俩

这是一个快速的小提琴，向您展示我的意思：

[http://jsfiddle.net/erinfreeman/Jj46m/](http://jsfiddle.net/erinfreeman/Jj46m/)

# objective-c - 在我的应用程序的下一个版本之前更改 plist - 如何管理更改？

> ID：12040084
> 
> 赞同：0
> 
> 时间：2012-08-20T14:59:06.500
> 
> 标签：objective-c

如果我的 plist 字典数组不存在（appDidFinishLaunching），它会从捆绑包复制到文档目录。

字典中的某些字符串是用户定义的，并且在用户设置值之前具有默认值。（即Key：“Favorite”值：如果添加到收藏夹，“No”变为“Yes”）

如果我更改某些字典中的某些字符串（例如，如果对象的价格发生更改）和/或向数组添加一些新字典，如何在不更改用户定义字符串的情况下管理这些更改？

我想过两个选择：

1：将现有字典中的字符串与更新字典中的字符串进行比较，并在不触及用户定义的字符串的情况下替换更改的字符串。还要寻找新的词典。

2：为用户定义的字符串创建一个新的字典plist，即“Name”字符串等于主对象，以便在显示内容时它们可以“连接”。然后可以替换主plist和用户定义的数据保持不变。

我认为 nr 2 将是最简单的方法。但这是我的第一个应用程序，所以我不确定..

所以我的问题是：选项2是个好方法吗？如果是，则接受确认作为答案。如果不是，我想这是因为您看到了一些潜在的麻烦，如果不是 nr 1，请解释并建议替代方法。

附言。当前的复制代码：

```
- (void)copyPlist {
    NSError *error;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Objects.plist"];
     NSLog(@"Path %@", path); 

    NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath: path])
    {
        NSString *bundle = [[NSBundle mainBundle] pathForResource:@"Objects" ofType:@"plist"];

        [fileManager copyItemAtPath:bundle toPath:path error:&error];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:04:46.243

我认为选项 2 将是您的最佳选择。只让用户更改显示名称，而不是您用于属性的内部名称。否则，如果您在某个时候添加了另一个字段“Foo”，但用户已经将现有字段“Bar”重命名为“Foo”，该怎么办？

# excel - 你能在Excel中得到百分比范围吗？

> ID：12040086
> 
> 赞同：1
> 
> 时间：2012-08-20T14:59:09.927
> 
> 标签：excel, math, excel-formula, formula

几年来，我有一个用于电子邮件统计的冗长 Excel 电子表格。我正在测量平均打开次数/点击次数/等。但我也想放在一个特定的范围内。我知道有一个最小/最大公式，但我怎样才能提出 20%-80% 的范围。

注意：在输入数据的行和行之后，我在数据透视表中提取所有内容以便更好地进行比较，所以我也想在那里拉出 20-80。

另外，我没有使用VB（主要是因为我不熟悉它）所以请尽量减少VB响应。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:07:33.193

我不知道您是否可以直接在数据透视表中执行此操作，但您可以使用 Excel[`PERCENTILE`](http://office.microsoft.com/en-us/excel-help/percentile-HP005209211.aspx)函数来获取第 20 个和第 80 个百分位数的边界。

对于数据透视表，如果您将列添加到使用该`PERCENTILE`函数的源数据，那么您可以将这些列添加到数据透视表中。您在数据透视表中使用什么计算并不重要，因为所有行的值都是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:26:39.447

我的基础是您有一个包含您想要使用的百分比的列。例如，您可以创建一个名为特定范围的新列。然后，您可以输入以下公式进行工作，您必须更改单元格范围以满足您的需要。

这是一个公式，可以确定电子邮件是否属于 20-80% 类别：

```
=IF(AND(A1>=20%, A1<=80%),"True", "False") 
```

希望这可以帮助。

# javascript - 为什么使用带参数的 Array.prototype.slice.call

> ID：12040099
> 
> 赞同：5
> 
> 时间：2012-08-20T14:59:59.730
> 
> 标签：javascript

我正在使用 apply 调用一个方法，但我不知道我将传递多少个参数：

目前我的代码如下所示：

```
selectFolder: function(e){
  e.preventDefault();

  this.addSelectedClass.apply(this, Array.prototype.slice.call(arguments));
}, 
```

我使用 Array.prototype.slice 的唯一原因是因为它在大多数示例中。

为什么我不只是传递这样的参数：

```
 this.addSelectedClass.apply(this, arguments); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:06:03.340

## `arguments``apply()`很好_

调用`apply`函数时，只需使用 original 即可`arguments`。所以在你的例子中，你可以很容易地用这个替换这一行：

```
this.addSelectedClass.apply(this, arguments); 
```

## `arguments`用`call()`不好

但是，如果您要调用，那么如果您想向函数传递任意对象/值的数组，`call`则应该转换`arguments`为实际数组（通过调用完成）。`slice()`这就是为什么`call()`通常在您确切知道要传递的参数数量并单独传递它们时使用的原因。

`arguments`不是**实际的数组**对象。他们似乎是（`length`例如拥有财产），但事实并非如此。

[关于 Mozilla 开发者网络的争论](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

## 一点解释，以使其完全清楚

`apply()`相关文档`call()`如下所示：

```
func.apply(thisArg[, argsArray]);
func.call(thisArg[, arg1[, arg2[, ...]]]); 
```

我们可以使用其中任何一个来执行相同的功能。

1.  使用时，`apply()`我们可以一次传递所有参数。`slice()`通常用于省略调用中的特定参数或转换`arguments`为实际数组。

2.  使用时，`call()`我们传递单独的参数和我们需要的尽可能多的参数。如果我们将提供转换为数组的参数，我们被调用的函数将获得一个数组类型的参数，其中所有参数都在该特定数组中提供。

我希望这能更清楚地说明问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:01:24.893

因为`arguments`不是数组。运行`Array.prototype.slice`使它成为一个普通数组，其中包含 和 之类的`map`函数`forEach`。基本上任何东西都在`Array.prototype`. `arguments`是，没有这个，只是一个具有`length`属性的对象。

在您的特定情况下，通过`arguments`可能会起作用。

# java - StringUtils.substringBetween 返回空值

> ID：12040101
> 
> 赞同：-1
> 
> 时间：2012-08-20T15:00:02.140
> 
> 标签：java, apache-commons, apache-stringutils

我对以下代码有疑问：

```
public String SearchText(String fileName, String First, String Last) {
        String tag = new String();
        String file = FileUtils.readFileToString(new File(fileName));
        tag = StringUtils.substringBetween(file, First, Last);
        return First + tag + Last;
    } 
```

它还在字符串之后返回一个“null”值，例如：如果我在标签之间搜索文本`<a>`并`</a>`返回`<a>null</a>`. 问题是“标记”为空值！文本文件作为具有相同名称的多个标签，每个标签都包含不同的文本：是否可能存在问题？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:03:46.150

你说的不可能。如果`SearchText`返回`<a>text</a>null`，那么这一定意味着：

```
First = "<a>";
tag = "text";
Last = "</a>null"; 
```

这不会找到任何东西。如果`StringUtils.substringBetween()`找不到匹配项，则返回`null`，这意味着`SearchText`将返回`<a>null</a>null`。使用上面的代码，唯一的获取方法`<a>text</a>null`是：

```
First = "<a>text</a>";
Last = ""; 
```

所以你在你的问题中所说的是不可能的。再检查一下所有变量的内容，和你说的不一样。

# c# - 禁用 RichTextBox 换行自动格式化

> ID：12040109
> 
> 赞同：1
> 
> 时间：2012-08-20T15:00:24.950
> 
> 标签：c#, wpf, richtextbox

一段时间以来，我一直在尝试在 WPF RichTextBox 中使用语法突出显示来制作有效的编辑器，到目前为止，这确实是一次痛苦的经历。现在我遇到了另一个问题：

当用户按下回车键或绑定加载文本时，RTB 会添加一些我猜想的段落，并使换行符对我无用。我希望所有换行符都以字符串表示形式（\n、\r 等）且没有段落。我的猜测是有一种简单的方法可以禁用自动 RTB 格式化，但我找不到它。

当然，有很多解决方法（例如，当`InsertTextInRun("\r\n")`使用时，不应用自动格式化），但我想简单地禁用自动添加段落。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-08T16:57:57.637

如果边距为 0，则禁用自动格式化。请参阅下面的 xml 代码

```
 <RichTextBox ...>
        <FlowDocument/>
            <RichTextBox.Resources>
                <Style TargetType="{x:Type Paragraph}">
                    <Setter Property="Margin" Value="0" />
                </Style>
            </RichTextBox.Resources>
    </RichTextBox> 
```

# objective-c - 日期转换问题

> ID：12040110
> 
> 赞同：0
> 
> 时间：2012-08-20T15:00:39.910
> 
> 标签：objective-c, ios

我不明白为什么我的“小时”是 3。我期待 9。对我所缺少的任何见解。

```
NSDate* sourceDate = [NSDate date];

NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* destinationTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"CST"];

NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;

NSDate *currentTimeConvertedToHQTime = [[[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate] autorelease];
NSLog(@"currentTimeConvertedToHQTime = %@", currentTimeConvertedToHQTime);

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"HH"];
int hour = [[dateFormatter stringFromDate:currentTimeConvertedToHQTime] intValue];
[dateFormatter release]; 
```

///日志

```
2012-08-20 08:55:13.874 QTGSalesTool[3532:707] currentTimeConvertedToHQTime = 2012-08-20 09:55:10 +0000
2012-08-20 08:55:13.878 QTGSalesTool[3532:707] hour = 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:38:38.367

`NSDateFormatter`在这里可能没用。相反，`NSCalendar`在您需要的时区构造一个对象，然后获取`NSDateComponents`当前时间：

```
NSDate* currentDate = [NSDate date];

// Create a calendar that is always in Central Standard Time, regardless of the user's locale.
NSCalendar *calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"CST"]];
// The components will be in CST.
NSDateComponents *components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:currentDate];

NSLog(@"currentDate components = %@", components);
NSLog(@"currentDate hour = %ld", [components hour]);

// Test for 9:00am to 5:00pm range.
if (([components hour]>=9) && ([components hour]<=12+5))
{
    NSLog(@"CST is in business hours");
} 
```

有关其强大功能的更多信息，请参阅[NSCalendar 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html)。例如，您可以测试周末。只要确保您请求您需要的单位（`NSWeekdayCalendarUnit`在这种情况下）。

```
NSDateComponents *components =[calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSWeekdayCalendarUnit) fromDate:currentDate];
NSLog(@"currentDate components = %@", components);
NSLog(@"currentDate weekday = %ld", [components weekday]);

// Test for Monday to Friday range.
if (([components weekday]>1) && ([components weekday]<7))
{
    NSLog(@"Working day");
}
else
{
    NSLog(@"Weekend");
} 
```

# objective-c - 是否可以在 ios 中添加注释但不更改地图视图区域

> ID：12040112
> 
> 赞同：0
> 
> 时间：2012-08-20T15:00:53.933
> 
> 标签：objective-c, ios, mkmapview

我想使用*regionDidChangeAnimated*委托获取当前区域，然后从服务器请求数据并添加新注释，但是当添加新注释时，mapView 的区域也会改变，所以这将永远循环？有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:26:54.673

MapView addAnnotation 不会更改地图区域。[MapView setRegion] 和用户通过 UI 一样。

如果您正在执行这些服务器往返，则应仅在注释可见（基于当前可见区域）时添加注释，并且不要执行 setRegion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T13:13:07.887

如果该注释的标注发生更改，则地图区域会更改。否则，您将自己从代码中移动它以适应所有注释，也许？

在任何一种情况下，使用 BOOL 变量来指示地图将因代码而移动，并在委托方法中检查地图是由用户移动还是由您的代码移动。

# javascript - Safari 6：window.open() 在通知 onclick 中损坏？

> ID：12040115
> 
> 赞同：1
> 
> 时间：2012-08-20T15:01:03.950
> 
> 标签：javascript, html, safari, safari6

我正在开发一个使用 Safari 6/Mountain Lion 的 HTML5 通知的应用程序。当用户点击通知时，我想打开一个带有相关 URL 的新窗口。这在 Chrome 中运行良好（`window.open()`调用不会被弹出窗口阻止程序捕获，因为它在通知的`onclick`处理程序中）。但是，在 Safari 6 中，它似乎无法识别通知`onclick`是用户启动的事件处理程序，因此`window.open()`静默调用失败并返回`undefined`. 这是一个错误吗？有什么好的解决方法吗？

# ruby - Ruby 的目录 vs 文件 vs 路径名？

> ID：12040116
> 
> 赞同：21
> 
> 时间：2012-08-20T15:01:03.700
> 
> 标签：ruby

Ruby 的 Dir、File 和 Pathname 类有什么区别？它们似乎共享常用方法，如`basename`、`dirname`、`glob`和`join`。什么时候使用一种优于另一种？

在将其功能与 Dir 和 File 进行比较时，Pathname 似乎特别特别。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T16:20:44.007

根据[Dir](http://www.ruby-doc.org/core-1.9.3/Dir.html)、[File](http://www.ruby-doc.org/core-1.9.3/File.html)和[Pathname](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html)的 Ruby 文档，它们肯定看起来有很多共同点。

`Dir`两者之间的不同原则`File`似乎是`Dir`假设它正在使用的对象是一个目录并`File`假设文件。对于大多数目的，它们显然可以互换使用，但即使代码有效，如果您`File`使用`Dir`.

`Pathname`看起来是一种定位文件和目录的多操作系统方法。由于 Windows 和 *nix 机器处理文件管理的方式不同，如果您希望脚本在任何地方运行，那么以特定于操作系统的方式引用文件或目录可能会很痛苦。从文档：

> Pathname 表示在文件系统中定位文件的路径名。路径名取决于操作系统：Unix、Windows 等。路径名库与本地操作系统的路径名一起使用。但是，实验性地支持非 Unix 路径名。
> 
> 它不代表文件本身。路径名可以是相对的或绝对的。直到您尝试引用该文件时，该文件是否存在才重要。
> 
> 路径名是不可变的。它没有破坏性更新的方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T16:38:09.083

路径名特别有趣，因为它具有操作路径的便利性，并且在 File 和 Dir 类名中使用该字符串时避免了来回的字符串操作。一个例子：

```
require 'pathname'

def log_stuff(directory, data)
  path = Pathname.new(directory)
  raise "Directory does not exist" unless path.exist?

  raise "Path given is not a directory" unless path.directory?

  path += "development.log"
  path.open("a") { |io| io.write data }
end 
```

您还可以看到它在 Rails 的路径中使用，这也使您能够做一些很酷的事情：

```
$ rails c
> Rails.root
=> #<Pathname:/home/kibet/code/ruby/sample_app>
> Rails.root.join("config", "database.yml")
=> #<Pathname:/home/kibet/code/ruby/sample_app/config/database.yml>
> _.read
=> "development:\n  adapter: postgresql\n... 
```

与`File.join(Rails.root, "config", "database.yml")`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-20T16:05:10.800

最好的资源之一可能是语言文档，在这种情况下，它是[http://www.ruby-doc.org/](http://www.ruby-doc.org/)

Dir 正在处理目录，示例包括列出当前工作目录 ( `pwd`)、创建目录和删除它们。

File 与 Dir 类似，但处理的是使用 Files，例如获取和更改权限、创建文件和删除它们。

正如您所说，路径名很奇特，因为它确实包含 File 的所有功能和 Dir 的一些功能，但是如果您阅读文档，它会告诉您确切的原因。来自[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/pathname/rdoc/Pathname.html)：

> 此类的价值在于以比标准 Ruby 提供的更简洁的方式操作文件路径信息。下面的示例演示了差异。File、FileTest 的所有功能以及 Dir 和 FileUtils 的一些功能都包含在内，这并不奇怪。它本质上是所有这些的门面，甚至更多。

希望这有助于解释事情。

# soap - AXIS Soap Call - 仅对自签名证书使用信任库

> ID：12040121
> 
> 赞同：0
> 
> 时间：2012-08-20T15:01:20.553
> 
> 标签：soap, ssl, axis, truststore

我在客户端应用程序中使用 Axis 1.4 进行 SOAP 调用。我通过 HTTPS 调用服务。一些服务使用自签名证书，其他服务使用证书颁发机构颁发的证书。

我已使用[此答案](https://stackoverflow.com/a/7593421/156477)中的代码将自签名证书添加到我的信任库中。我的问题是信任库被用于所有调用——即使是对具有来自 CA 的有效证书的服务器的调用。

无论如何告诉 Axis 仅将信任库用于具有自签名证书的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:10:29.047

[它本质上与这里](https://stackoverflow.com/a/3256676/372643)的问题相同（除了这是用于客户端证书身份验证）。

您需要创建自己的套接字工厂类并使用此属性将其传递给轴：

```
AxisProperties.setProperty("axis.socketSecureFactory",
    "com.example.MySSLSocketFactory"); 
```

（见[`org.apache.axis.components.net.SecureSocketFactory`](http://ws.apache.org/axis/java/apiDocs/org/apache/axis/components/net/SecureSocketFactory.html)。）

由于您已经有一个 working `SSLContext`，而不是将其设置为默认上下文，您需要从中创建一个`javax.net.ssl.SSLSocketFactory`并使用它在 Apache Axis 套接字工厂中创建套接字。

# iphone - 带有添加到日历的 iphone 应用程序

> ID：12040124
> 
> 赞同：0
> 
> 时间：2012-08-20T15:01:24.283
> 
> 标签：iphone, events, calendar

我正在创建一个 iphone 应用程序，它可以将事件添加到本地 iphone 日历中。

我在这里实现了一个流程

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKEvent *event = [EKEvent eventWithEventStore:eventStore];
event.startDate = [[NSDate alloc] init];
event.endDate = [[NSDate alloc] initWithTimeInterval:600 sinceDate:event.startDate];
[event setCalendar:[eventStore defaultCalendarForNewEvents]];
NSError *err;
[eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

问题在于它不显示 iphone 新事件添加屏幕。这可以改变事件的时间。有什么方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:11:22.230

这是正确的，因为您以`MKEvent`编程方式创建。

如果您查找[`EventKitUI`](https://developer.apple.com/library/ios/navigation/index.html#section=Frameworks&topic=EventKitUI)这将允许您向用户呈现默认事件创建视图控制器的类。像[`EKEventViewController`](https://developer.apple.com/library/ios/#documentation/EventKitUI/Reference/EKEventViewControllerClassRef/Reference/Reference.html#//apple_ref/doc/uid/TP40009572)

# login - 无法使用云部署将 SQL Azure 数据库连接到 Web 应用程序

> ID：12040126
> 
> 赞同：0
> 
> 时间：2012-08-20T15:01:26.267
> 
> 标签：login, azure, azure-sql-database

无法使用云部署将 SQL Azure 数据库连接到 Web 应用程序。

`web.config` `<appsettings>`在指定为的Web 应用程序中

```
<add key="ConnectionString" 
     value="Server=tcp:n12uejqfps.database.windows.net,1433;Database=DBNAME;User ID=userId;Password=password;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:30:43.703

您的问题中没有足够的信息来解决您的特定连接错误，但乍一看似乎您可能对如何设置 web.config 连接字符串感到困惑。

MSDN 上的本教程对设置 web.config 以在 SQLEXPRESS 上进行本地调试和 SQL Azure 的云配置进行了很好的贯穿。

[MSDN：将 ASP.NET Web 应用程序部署到 Windows Azure 云服务和 SQL 数据库](https://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/)

# agile-project-management - Codesion - 开发和敏捷 ALM 工具

> ID：12040129
> 
> 赞同：-1
> 
> 时间：2012-08-20T15:01:37.740
> 
> 标签：agile-project-management, cloudbees

Codesion 服务计划似乎被打破了，可能是因为现在在 CloudForge 之下。Cloudbees平台是否集成了其他服务？

像这样的东西：

*   [xp开发](http://xp-dev.com/)
*   [解惑](http://unfuddle.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:59:13.677

xp-dev 没有像 Codesion/CloudForge 那样集成，但可以肯定的是，您可以使用它来托管存储库、ALM，还可以使用[https://wiki.jenkins-ci.org/display/JENKINS/XP-Dev+plugin](https://wiki.jenkins-ci.org/display/JENKINS/XP-Dev+plugin) on cloudbees jenkins 在提交时触发构建。

# json - 带有来自 JSON 的嵌套数据的树形面板

> ID：12040130
> 
> 赞同：2
> 
> 时间：2012-08-20T15:01:42.430
> 
> 标签：json, sencha-touch, extjs4, extjs

我想将 JSON 中的嵌套数据添加到树形面板中。我的问题是树被列出的 JSON 记录数（分区数，在示例中为 1）没有任何文本。但是当我选择一个孩子时，它显示**Uncaught TypeError: Cannot read property 'internalId' of undefined** error。这是我到目前为止所尝试的。

JSON 文件 (schemesInfo.json)。

```
{
"divisions":[
{"name": "division1","id": "div1","subdivisions":[
    {"name": "Sub1Div1","id": "div1sub1","schemes":[
        {"name": "Scheme1","id": "scheme1"},
        {"name": "Scheme2","id": "scheme2"}]},
    {"name": "Sub2Div1","id": "div1sub2","schemes":[
        {"name": "Scheme3","id": "scheme3"}]}

]}]
} 
```

模型：（方案模型.js）

```
 Ext.define('GridApp.model.schemesmodel',{
    extend: 'Ext.data.Model',
    fields: ['name','id'],
    proxy: {
        type: 'ajax',
        api: {
            read: 'data/schemesInfo.json'
        },
        reader: {
            type: 'json',
            root: 'divisions'
        }
    }
    }); 
```

商店：（schemesstore.js）

```
 Ext.define('GridApp.store.schemesstore',{
    extend: 'Ext.data.TreeStore',
    model: 'GridApp.model.schemesmodel',
    autoLoad: true,

    listeners: {
        load:function(){
            console.log('Schemes Data store loaded');
        }
    },
    root: {
        text: "Divisions",
        expanded: true,
        id: 'NULL'
//      children: [
//                 {
//                     text:['name'],
////                       id: 'divsionnameid',
////                       leaf: true
//                 }]
    }
}); 
```

我对 Extjs 4 很陌生。让我知道我哪里出错了。有关此的任何要点都将非常有帮助。

根据与@Izhaki 的讨论更新了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T16:30:44.303

在您的 JSON 中表示子项的属性必须包含并匹配`root`您的阅读器的属性。正如你的，`divisions`你的 JSON 应该是：

```
{
   "divisions":[
      {
         "name":"division1",
         "id":"div1",
         "divisions":[
            {
               "name":"Sub1Div1",
               "id":"div1sub1",
               "divisions":[
                  {
                     "name":"Scheme1",
                     "id":"scheme1"
                  },
                  {
                     "name":"Scheme2",
                     "id":"scheme2"
                  }
               ]
            },
            {
               "name":"Sub2Div1",
               "id":"div1sub2",
               "divisions":[
                  {
                     "name":"Scheme3",
                     "id":"scheme3"
                  }
               ]
            }
         ]
      }
   ]
} 
```

另外，不要忘记`displayField: 'name'`在您的 TreePanel 配置中。

# java - Swing 和 AWT 混合不好，但仍然完成，为什么？

> ID：12040131
> 
> 赞同：15
> 
> 时间：2012-08-20T15:01:43.967
> 
> 标签：java, swing, awt, event-listener, import

我注意到人们建议不要混合 Swing 和 AWT `Components`，但是我们经常看到：

```
import javax.swing.AbstractButton;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.ImageIcon;
 //AWT imports though only for listeners
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent; 
```

那么为什么包括 Java 在内的许多人（因为我从他们的教程中得到了这个[）](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/ButtonDemoProject/src/components/ButtonDemo.java)仍然使用 AWT 导入，尽管我认为它主要用于`Listener`s.

你如何为, , presss/slections 等添加*原生*Swing `Listener`s/Libraries ？`Key``Button``JComboBox`

或者我会用`firePropertyChangeListeners()`吗？（尽管这与 Java Beans 有关）

一段时间以来我一直很困惑，我的大多数应用程序都有 Swing 和 AWT 据说很糟糕？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T15:10:55.193

Swing 建立在 AWT 之上，具有不同的创建和绘制 UI 组件的理念。混合来自两个框架的 UI 组件可能会导致意外结果，因此不鼓励使用（正如 kleopatra 所说，这已得到修复）。*然而*，Swing 仍然使用 AWT 事件队列范例，包括侦听器 - 它不会用 Swing 原生的侦听器替换它们，因为没有理由这样做。

在您的应用程序中同时使用 Swing 和 AWT 是常见的做法，您被警告不要同时使用 Swing 和 AWT UI 组件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-20T15:15:58.557

Swing 与 AWT 共享相当多的类，并使用一些相同的实现 - 请注意 javax.swing.JComponent（基本 Swing 组件类）实际上继承自 java.awt.Component（基本 AWT 容器类）

如果你小心的话，实际上混合 Swing 和 AWT 并不是什么大问题。主要的陷阱是：

*   如果您混合 AWT 和 Swing UI 组件，您可能会获得非常不同的外观和感觉
*   Swing 组件是“轻量级的”（由 Java 呈现），而 AWT 组件是“重量级”的（作为主机平台中的组件实现）——这意味着如果将 AWT 组件放在 Swing 组件中会遇到问题（反之亦然）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-19T14:05:20.840

也许将来有人会看到这个并且仍然觉得它很有用。[有一个](http://www.cs.tut.fi/lintula/manual/java/tutorial/uiswing/converting/table.html)AWT 组件列表以及它们的 Swing 替代品是什么。

# java - 带有数据库的 Java 套接字

> ID：12040133
> 
> 赞同：1
> 
> 时间：2012-08-20T15:01:46.220
> 
> 标签：java, mysql, database, sockets, jdbc

我有一个关于 Java 和网络的有趣问题。

我正在创建一个基本的聊天程序，仅用于学习目的。现在，我之前已经将客户端正确连接到服务器并来回发送文本。这完全没问题。但是我遇到了一个问题。

假设我在某处的远程服务器上有一个数据库。该数据库将包含即时通讯程序的登录信息、联系人列表信息等。**这意味着当客户端**执行某些操作时，我将需要对数据库执行查询。显然我知道客户端不应该包含连接字符串或对数据库有任何访问权限。

我的问题是：拥有一个用于与多个潜在客户聊天的客户端-服务器架构的最佳方式是什么，同时还有一种通过网络发送数据以便可以在服务器端进行查询的方法？

这可能是一个简单的答案，但由于某种原因，我无法将头绕在同时发送数据的多个套接字/服务器套接字上。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:08:18.533

一种解决方案是设置 tomcat 并使用 java servlet，尽管这在技术上是 http 请求。

听起来你需要写一个服务器。我认为您所有的聊天都可以在服务器上进行，因此它不是p2p架构，而是集线器式架构。这样，您的服务器就可以代表客户端访问数据库。

我希望这能回答你的问题，在网络编程方面有一百万种不同的方法:)

根据评论的示例 XML 消息：

```
<XML>
<msg_header type="chat"/>
<msg_body>
   hello world
</msg_body>
</XML>

<XML>
<msg_header type="query"/>
<msg_body>
   SELECT * FROM myTable
</msg_body>
</XML> 
```

如果你不想，你甚至不必那么复杂。或者，您可以采用广泛使用的标准，例如 HTTP（使用 TCP/IP 并使用套接字）——这样您就可以使用 Java 的内置 http 处理器之一来完成工作。由你决定 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:11:17.640

前段时间我和你一样使用 TCP 连接（主要在游戏和聊天应用程序中），但在我看来，它不太适合你的要求，除了游戏。我非常喜欢webservices atm。它们通过 HTTP 而不是 TCP 进行通信，并使用 GET、POST 和 PUT 方法来确认您尝试执行的操作。自己建立一个正在运行的 java web 服务并尝试一下非常简单。尝试将 XML 或 Json 与它一起用于您的应用程序。

关于球衣网络服务的精彩教程：[http ://www.vogella.com/articles/REST/article.html#](http://www.vogella.com/articles/REST/article.html#)

稍后当您掌握它时，您可以像平常一样轻松地将数据库连接与您的 Web 服务绑定。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:11:48.843

您可以在此处采用多种方法：

1.  如果您为每个客户端使用一个专用的服务器端线程，该线程将执行所需的数据库查询。客户端传入初始登录信息等；在验证这些之后，处理程序线程可以发回联系人列表和客户端所需的其他信息。

2.  另一种方法是没有专用线程。相反，当客户端进行身份验证时，创建某种令牌对象并将其传递给客户端。每次客户端发送消息时，它都会发送令牌。服务器上接收消息+令牌的任何线程都可以通过检查令牌来验证客户端。

这里没有一个正确的答案；如果您想进一步探索，我建议您查看一些流行的聊天实现的架构，例如 IRC 和 jabber。

# android - 如何启用与 on{x} 的同步

> ID：12040136
> 
> 赞同：3
> 
> 时间：2012-08-20T15:01:48.367
> 
> 标签：android, onx

有没有办法打开/关闭 Sync with [on{x}](https://www.onx.ms)脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:09:28.377

根据[on{x} 文档](https://www.onx.ms/#apiPage/network "{x} 文档 - 网络")，没有。

您可以打开/关闭移动数据使用，`mobileDataEnabled(get; set;)`但可能不是您想要的。

实际上，再想一想，您可以编写一个原生 Android 应用程序，该应用程序将接收自定义意图并切换同步设置，然后从 on{x} 使用`launch(String appName, Object params, Object callback)`. 有关更多信息，请参阅on{x} 文档[的应用程序部分。](https://www.onx.ms/#apiPage/applications "关于{x} 文档 - 应用程序")

...和[常规同步设置“自动同步”复选框以编程](https://stackoverflow.com/questions/8009273/general-sync-settings-auto-sync-checkbox-programtically)方式可以帮助您制作这样的本机应用程序。

# wpf - 在刷新/更新时停止 WPF 图表颜色循环

> ID：12040139
> 
> 赞同：4
> 
> 时间：2012-08-20T15:01:58.107
> 
> 标签：wpf, xaml, charts

我有一个不断拉数据的图表，目前刷新率设置为 2 分钟。问题是每次图表更新时，颜色都会改变为循环中的下一个颜色。我想也许我可以让图表在刷新时完全重置，每次总是从 0 或 1 开始调色板颜色，但到目前为止还没有运气。有任何想法吗？

更新

一些 XAML/代码以获得更好的想法。

DynamicSeriesChart 头的 XAML

```
 <ana:DynamicSeriesChart SeriesSource="{Binding ChartSeries}" Title="{Binding ChartTitle}" Palette="{StaticResource ChartPalette}" Grid.Row="1" LegendTitle="Legend" Margin="0,25,0,0" Visibility="{Binding ShowGraph, Converter={StaticResource BoolToVisConv}}"> 
```

图表模板的 XAML

```
 <ana:DynamicSeriesChart.Template>
            <ControlTemplate TargetType="charting:Chart">
                <Border Background="{DynamicResource ContainerElementContentPanelBgBrush}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <datavis:Title Content="{TemplateBinding Title}" Style="{TemplateBinding TitleStyle}" />

                        <chartingprimitives:EdgePanel x:Name="ChartArea" Grid.Row="1" Margin="0,15,0,15" Style="{TemplateBinding ChartAreaStyle}">
                            <Grid Canvas.ZIndex="-1" Style="{TemplateBinding PlotAreaStyle}" />
                            <Border Canvas.ZIndex="10" BorderBrush="#FF919191" BorderThickness="1" />
                        </chartingprimitives:EdgePanel>

                        <datavis:Legend x:Name="Legend" Style="{TemplateBinding LegendStyle}" Grid.Row="2" HorizontalAlignment="Left">
                            <datavis:Legend.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </datavis:Legend.ItemsPanel>
                        </datavis:Legend>
                    </Grid>
                </Border>
            </ControlTemplate>
        </ana:DynamicSeriesChart.Template> 
```

调色板样本

```
<Style x:Key="ColumnSeries1Style" TargetType="Control">
    <Setter Property="Background" Value="#FFFFA500" />
</Style>
<Style x:Key="ColumnSeries1Style2" TargetType="Shape">
    <Setter Property="Fill" Value="#FFFFA500" />
    <Setter Property="Stroke" Value="#FFFFA500" />
</Style>
... 
```

...

```
<datavis:ResourceDictionaryCollection x:Key="ChartPalette">
    <ResourceDictionary>
        <Style x:Key="DataPointStyle" BasedOn="{StaticResource ColumnSeries1Style}" TargetType="Control" />
        <Style x:Key="DataShapeStyle" BasedOn="{StaticResource ColumnSeries1Style2}" TargetType="Shape" />
    </ResourceDictionary>
... 
```

重新加载调用 Refresh()，这是一个设置新参数的长查询。这将转到 LoadData()，然后转到 ApplyResults()，后者会清除 ChartSeries，然后应用新值。

*（我很犹豫是否要放置代码隐藏或cs，因为它们都不是我的（并且仍然让我有些困惑，到处都是参考和参考）。我在这个项目中参与它仍然相对较新，而且仍然在尝试解决这个问题时发现新的部分。如果需要细节或操作流程，我会尽我所能去寻找那些部分。）*

刷新后，图表（可以是区域、条形、柱形或线形）将在调色板颜色之间循环。例如，假设 3 个条形图，当前为红色/蓝色/橙色。刷新以使用新数据更新图表时，颜色将更改并循环到调色板中的下一个 - 比如说紫色/黄色/绿色。每次刷新数据时，它将继续在整个调色板中循环（并因此更改图表及其图例）。即使没有自定义调色板也会发生这种情况。

更新

仔细观察这些问题，“线”图的行为与其他图不同。所以只有柱形图/条形图/面积图有这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:19:40.680

如果您的折线图正常工作，但其他折线图具有循环颜色，您可以设置 Palette 属性的样式以检查正在使用的图形类型。然后您可以将整个调色板应用于折线图，但让其他人将索引（您将添加到数据来源的任何位置）转换为颜色。有关转换过程的详细信息，请参阅[此问题](https://stackoverflow.com/questions/8570850/how-to-reset-the-wpf-toolkit-chart-colour-palette-when-resetting-the-data)。

```
 <Style TargetType="ana:DynamicSeriesChart">
            <Setter Property="Palette" Value="{StaticResource ChartPalette}"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsLineGraph}" Value="False">
                    <Setter Property="Palette">
                        <Setter.Value>
                            <datavis:ResourceDictionaryCollection>
                                <ResourceDictionary>
                                    <Style x:Key="DataPointStyle" TargetType="Control">
                                        <Setter Property="Background" Value="{Binding Path=PointColorIndex, 
                            Converter={StaticResource IndexColorConverter}, 
                            ConverterParameter={StaticResource ChartPalette}}"/>
                                    </Style>
                                    <Style x:Key="DataShapeStyle" TargetType="Shape">
                                        <Setter Property="Fill" Value="{Binding Path=FillColorIndex, 
                            Converter={StaticResource IndexColorConverter}, 
                            ConverterParameter={StaticResource ChartPalette}}"/>
                                        <Setter Property="Stroke" Value="{Binding Path=StrokeColorIndex, 
                            Converter={StaticResource IndexColorConverter}, 
                            ConverterParameter={StaticResource ChartPalette}}"/>
                                    </Style>
                                </ResourceDictionary>
                            </datavis:ResourceDictionaryCollection>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style> 
```

# oracle - 如何通过代码确定 Oracle 数据类型的字符串值？

> ID：12040140
> 
> 赞同：10
> 
> 时间：2012-08-20T15:02:00.383
> 
> 标签：oracle, plsql, database

我使用`DBMS_SQL.DESCRIBE_COLUMNS`过程来确定我的 SELECT 查询的结果集中的列使用了哪些数据类型。但不幸的是，通过这种方式，我只能得到 Oracle 数据类型 ( `record.col_type`) - 1、8、12 等的代码。

所以我想知道，我怎样才能轻松地获得与返回数据类型的代码（即 VARCHAR2、LONG、DATE 等）等效的字符串，而不是其数字代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T15:47:36.143

查看 DBMS_TYPES 包（来自我的 11gr2）：

```
select text from all_source
where owner='SYS'
and name='DBMS_TYPES'
and type='PACKAGE';

PACKAGE dbms_types AS

  TYPECODE_DATE            PLS_INTEGER :=  12;

  TYPECODE_NUMBER          PLS_INTEGER :=   2;

  TYPECODE_RAW             PLS_INTEGER :=  95;

  TYPECODE_CHAR            PLS_INTEGER :=  96;

  TYPECODE_VARCHAR2        PLS_INTEGER :=   9;

  TYPECODE_VARCHAR         PLS_INTEGER :=   1;

  TYPECODE_MLSLABEL        PLS_INTEGER := 105;

  TYPECODE_BLOB            PLS_INTEGER := 113;

  TYPECODE_BFILE           PLS_INTEGER := 114;

  TYPECODE_CLOB            PLS_INTEGER := 112;

  TYPECODE_CFILE           PLS_INTEGER := 115;

  TYPECODE_TIMESTAMP       PLS_INTEGER := 187;

  TYPECODE_TIMESTAMP_TZ    PLS_INTEGER := 188;

  TYPECODE_TIMESTAMP_LTZ   PLS_INTEGER := 232;

  TYPECODE_INTERVAL_YM     PLS_INTEGER := 189;

  TYPECODE_INTERVAL_DS     PLS_INTEGER := 190;

  TYPECODE_REF             PLS_INTEGER := 110;

  TYPECODE_OBJECT          PLS_INTEGER := 108;

  TYPECODE_VARRAY          PLS_INTEGER := 247;            /* COLLECTION TYPE */

  TYPECODE_TABLE           PLS_INTEGER := 248;            /* COLLECTION TYPE */

  TYPECODE_NAMEDCOLLECTION PLS_INTEGER := 122;

  TYPECODE_OPAQUE          PLS_INTEGER := 58;                 /* OPAQUE TYPE */

  /* NOTE: These typecodes are for use in AnyData api only and are short forms

     for the corresponding char typecodes with a charset form of SQLCS_NCHAR.

  */

  TYPECODE_NCHAR           PLS_INTEGER := 286;

  TYPECODE_NVARCHAR2       PLS_INTEGER := 287;

  TYPECODE_NCLOB           PLS_INTEGER := 288;

  /* Typecodes for Binary Float, Binary Double and Urowid. */

  TYPECODE_BFLOAT          PLS_INTEGER := 100;

  TYPECODE_BDOUBLE         PLS_INTEGER := 101;

  TYPECODE_UROWID          PLS_INTEGER := 104;

  SUCCESS                  PLS_INTEGER := 0;

  NO_DATA                  PLS_INTEGER := 100; 
```

另请注意，109 是用户定义的类型，您可能需要改用 DESCRIBE_COLUMNS3。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-20T16:08:42.127

这是一个稍微笨拙的解决方案，但您可以使用 CASE 语句来“查找”数据类型描述。

```
case record.col_type
  when dbms_types.TYPECODE_DATE then 'DATE'             
  when dbms_types.TYPECODE_NUMBER then 'NUMBER'           
  when dbms_types.TYPECODE_RAW then 'RAW'              
  when dbms_types.TYPECODE_CHAR then 'CHAR'             
  when dbms_types.TYPECODE_VARCHAR2 then 'VARCHAR2'         
  when dbms_types.TYPECODE_VARCHAR then 'VARCHAR'          
  when dbms_types.TYPECODE_MLSLABEL then 'MLSLABEL'         
  when dbms_types.TYPECODE_BLOB then 'BLOB'             
  when dbms_types.TYPECODE_BFILE then 'BFILE'            
  when dbms_types.TYPECODE_CLOB then 'CLOB'              
  when dbms_types.TYPECODE_CFILE then 'CFILE'            
  when dbms_types.TYPECODE_TIMESTAMP then 'TIMESTAMP'        
  when dbms_types.TYPECODE_TIMESTAMP_TZ then 'TIMESTAMP_TZ'     
  when dbms_types.TYPECODE_TIMESTAMP_LTZ then 'TIMESTAMP_LTZ'    
  when dbms_types.TYPECODE_INTERVAL_YM then 'INTERVAL_YM'      
  when dbms_types.TYPECODE_INTERVAL_DS then 'INTERVAL_DS'      
  when dbms_types.TYPECODE_REF then 'REF'              
  when dbms_types.TYPECODE_OBJECT then 'OBJECT'           
  when dbms_types.TYPECODE_VARRAY then 'VARRAY'                       
  when dbms_types.TYPECODE_TABLE then 'TABLE'                        
  when dbms_types.TYPECODE_NAMEDCOLLECTION then 'NAMEDCOLLECTION'  
  when dbms_types.TYPECODE_OPAQUE then 'OPAQUE'                            
  when dbms_types.TYPECODE_NCHAR then 'NCHAR'            
  when dbms_types.TYPECODE_NVARCHAR2 then 'NVARCHAR2'       
  when dbms_types.TYPECODE_NCLOB then 'NCLOB'                  
  when dbms_types.TYPECODE_BFLOAT then 'BFLOAT'           
  when dbms_types.TYPECODE_BDOUBLE then 'BDOUBLE'          
  when dbms_types.TYPECODE_UROWID then 'UROWID'              
end case 
```

要获取此值，您应该[按照 tbone 的建议](https://stackoverflow.com/a/12040908/146325)查询数据字典。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-20T15:17:28.743

利用`ANYDATA.GetTypeName`

这是一个带有一些解释和示例的链接：[http ://www.oracle-developer.net/display.php?id=218](http://www.oracle-developer.net/display.php?id=218)

我引用：

```
SQL> DECLARE
  2     v_anydata  ANYDATA := ANYDATA.ConvertVarchar2('String');
  3     v_typename VARCHAR2(128);
  4  BEGIN
  5     v_typename := v_anydata.GetTypeName();
  6     DBMS_OUTPUT.PUT_LINE('Type of ANYDATA instance is [' || v_typename || ']');
  7  END;
  8  /

Type of ANYDATA instance is [SYS.VARCHAR2]

PL/SQL procedure successfully completed. 
```

以下是[在 select 中使用它的一些示例](http://mahmoudoracle.blogspot.com.au/2012/03/anydata-in-oracle-database.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-30T11:33:37.723

尝试：

```
select 
   distinct
   c.type# type_code,
   decode(c.type#, 1, decode(c.charsetform, 2, 'NVARCHAR2', 'VARCHAR2'),
                   2, decode(c.scale, null, decode(c.precision#, null, 'NUMBER', 'FLOAT'), 'NUMBER'),
                   8, 'LONG',
                   9, decode(c.charsetform, 2, 'NCHAR VARYING', 'VARCHAR'),
                   12, 'DATE',
                   23, 'RAW', 24, 'LONG RAW',
                   69, 'ROWID',
                   96, decode(c.charsetform, 2, 'NCHAR', 'CHAR'),
                   100, 'BINARY_FLOAT',
                   101, 'BINARY_DOUBLE',
                   105, 'MLSLABEL',
                   106, 'MLSLABEL',
                   111, 'REF',
                   112, decode(c.charsetform, 2, 'NCLOB', 'CLOB'),
                   113, 'BLOB', 114, 'BFILE', 115, 'CFILE',
                   121, 'USER_TYPE',
                   122, 'USER_TYPE',
                   123, 'USER_TYPE',
                   178, 'TIME(' ||c.scale|| ')',
                   179, 'TIME(' ||c.scale|| ')' || ' WITH TIME ZONE',
                   180, 'TIMESTAMP(' ||c.scale|| ')',
                   181, 'TIMESTAMP(' ||c.scale|| ')'||' WITH TIME ZONE',
                   231, 'TIMESTAMP(' ||c.scale|| ')'||' WITH LOCAL TIME ZONE',
                   182, 'INTERVAL YEAR(' ||c.precision#||') TO MONTH',
                   183, 'INTERVAL DAY(' ||c.precision#||') TO SECOND(' ||
                         c.scale || ')',
                   208, 'UROWID',
                   'UNDEFINED') type_name from sys.col$ c order by c.type#; 
```

# emacs - 如何在 Windows 7 x64 上使用 SLIME 和 Steel Bank Common Lisp 开始编程？

> ID：12040141
> 
> 赞同：4
> 
> 时间：2012-08-20T15:02:09.870
> 
> 标签：emacs, lisp, common-lisp, slime

我很想开始使用这些工具，但似乎我不够聪明:-(

我花了几个小时阅读文档、移动文件夹和编辑配置文件，但我仍然无法启动 Emacs ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-04T02:24:09.137

虽然花了很长时间才弄明白，但我还是成功地将 Steel Bank Common Lisp (SBCL)、GNU Emacs 和 SLIME 安装到了 Windows 7 64 位系统上。以下是我采取的步骤：

1.  **安装 Steel Bank Common Lisp。**我通过单击与“Windows”和“AMD64”相交的框从[SBCL 站点下载了它。](http://www.sbcl.org/platform-table.html)它应该带您到 Sourceforge 页面，该页面会自动开始下载链接。这应该下载 binary.msi 文件而不是 tar.gx 文件。（我已经了解到 tar.gz 文件在 Windows 系统上处理起来很痛苦。）下载文件后，单击它应该会启动一个安装向导，它应该会逐步引导您完成安装过程.

    在撰写本文时，64 位 Windows 的 SBCL 版本是 1.1.17，根据 SBCL 网站，这是一个正在进行的端口，而不是完全支持。如果您愿意，我想您还可以通过单击左侧的框下载更稳定的 32 位 Windows 1.1.12 版本；但是，我在使用 1.1.17 64 位版本的 SBCL 时还没有遇到任何严重的问题。

2.  **安装 GNU Emacs。**这可以从 Emacs 镜像站点下载。（我打算为你链接它，但我仅限于发布两个链接，我需要保存一个链接以供以后使用。）单击 tar.xz 文件（不是 tar.gz 文件）以获取最新版本的Emacs，然后将 zip 文件下载到您的计算机；在撰写本文时，最新的 Emacs 版本是 24.3。下载后，使用 WinZip 或类似程序打开文件，然后将 zip 文件的全部内容解压缩到计算机上您选择的文件夹中（最好是在路径上与 C 驱动器相当接近且便于您访问的地方）记住）。您可以通过单击程序最顶部的“提取”按钮来提取 WinZip 中的文件；这应该在您的计算机上创建一个新文件夹，其中包含所有单独的 Emacs 文件。

    在提取整个 zip 文件之前，阅读 zip 下载中包含的 README 和 README.W32 文件以收集更多信息可能会有所帮助，但如果严格遵循上述步骤，Emacs 应该会成功安装。安装后，它将极大地帮助您完成程序随附的 Emacs 教程。您可以单击首次打开 Emacs 时显示的教程链接，也可以在 Emacs 中按 [Control-h] 然后按 [t] 来加载教程。

3.  **安装史莱姆。**SLIME 可以从它的 GitHub 页面下载，也可以点击 SLIME 主站点的“最新版本”链接；在撰写本文时，最新的 SLIME 版本是 2.5 版。同样，请务必单击源代码 zip 按钮而不是 tar.gz 按钮。与安装 Emacs 类似，这将下载一个 zip 文件，然后您可以使用 WinZip 将文件的全部内容提取到计算机上您选择的位置。但是，这一次，请确保将 SLIME 提取到不包含名称中带有空格的文件夹的路径位置*（即，不要将 SLIME 提取到“C:\Program Files”或“C:\Shared Folder\Programs "或类似的东西）。当我们将 Emacs 配置为运行 SLIME 时，这将在下一步变得重要。

    *路径位置只是进入程序必须经过的文件夹列表。例如，您计算机上的文档可能具有路径“C:\Users\YourName\MyDocuments\document-title.doc”。在选择 SLIME 的位置时，除了避免名称中带有空格的文件夹外，请尝试将 SLIME 安装到离 C 盘相当近的文件夹中，因为接下来您必须记住并写出 SLIME 的路径位置步。

4.  **在 Emacs 中设置 SLIME。**此时，您应该已在计算机上成功安装了所有必要的程序。最后一步，也是最难的一步，就是修改你的 .emacs 文件，这样你就可以在 Emacs 中使用 SLIME。（[本页](https://stackoverflow.com/questions/10545437/how-to-disable-the-beep-in-emacs-on-windows)解释了如何非常好地操作 .emacs 文件，并且还包含了如果您计划定期使用 Emacs 会想知道的一般有用信息。）您可以通过运行 Emacs 来查找/创建 .emacs 文件和点击 [Control-x]，然后点击 [Control-f]。这应该在底部缓冲区中打开一个查找文件命令；在冒号之后，输入“~/.emacs”（不带引号），按回车/回车，它应该会打开你的 .emacs 文件。此时，将下面的确切文本逐字复制到您的 .emacs 文件中：

    > > (add-to-list 'load-path "C:\\wherever-you-installed-SLIME\\slime-2.5")
    > > (需要'slime)
    > > (add-hook 'lisp-mode-hook (lambda () (slime -mode t)))
    > > (add-hook 'inferior-lisp-mode-hook (lambda () (inferior-slime-mode t))))
    > > (setq lower-lisp-program "sbcl")

    将“C:\\wherever-you-installed-SLIME\\slime-2.5”替换为您的 SLIME 文件夹的任何路径位置和名称。

    当您将其写入 .emacs 文件后，请使用菜单中的 File-Save 选项或点击 [Control-x] 然后点击 [Control-s] 来保存文件。如果出现另存为提示，请务必将文件命名为 .emacs 并将其保存在“C:\Users\YourName\AppData\Roaming\.emacs”下。（至少，这是我的 Windows 7 系统自动保存 .emacs 文件的地方。如果您的计算机将其保存在其他地方，如果需要，您可以在 C 盘中搜索 .emacs 文件的位置。）确保只有一个.emacs 文件的实例；如果 .emacs 文件有多个副本，则 Emacs 程序不一定会识别您刚刚设置的配置。

    一旦你保存了上面写有代码的 .emacs 文件，关闭 Emacs 程序并重新打开它。重新打开后，键入 [Alt-x]，然后键入 [slime]（它将在底部显示为“Mx slime”）并按回车键。瞧：此时 Emacs 应该正在运行 SLIME。恭喜，您刚刚在 Windows 64 位系统上安装了 Emacs 和运行 SBCL 的 SLIME！

    还记得我说过在提取 SLIME 时不要选择名称中带有空格的任何文件夹吗？这与这一步有关；如果您选择带有空格的文件夹（例如 C:\\Program Files\\slime-2.5），.emacs 文件会将其视为“C:\\Program”，而“Files\\slime-2.5”解释为附加信息而不是整个路径位置。如果由于某种原因您必须将 SLIME zip 文件解压缩到名称中带有空格的文件夹中，则有一些方法可以解决此问题，但这会不必要地使过程复杂化；我发现最简单的方法就是避免 SLIME 路径位置中的空格。在 .emacs 文件中写出路径位置时，请务必使用双反斜杠而不是单反斜杠，否则会遇到问题。（我经过惨痛的教训才学到这个。）

如果您还有任何疑问，请随时通过电子邮件给我发送消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T18:00:29.077

最简单的入门方法可能是下载并运行**[Lispbox](http://common-lisp.net/project/lispbox/)**或**[Lisp Cabinet](http://lispcabinet.sourceforge.net/)**。它们都将 Emacs、SLIME、Quicklisp 和 Lisp 实现集成在一个包中，无需编辑任何配置文件。

注意 Lispbox 只支持 Clozure CL；但是虽然 Clozure CL 不是 SBCL，但它在外观、感觉和库支持方面非常相似。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T23:09:34.360

这并不能直接回答这个问题，但如果可能的话，我建议您使用 Linux 作为您的操作系统。将 Linux 与 Windows 并排安装非常容易（我推荐 Ubuntu 作为 Linux 发行版）。

对于一些开源软件和软件包，在 Windows 上安装相当困难。大多数开源社区都在 Linux 上，许多开源开发人员似乎首先专注于提供易于使用的 Linux 安装过程。Web 开发特别是一个使用 Linux 更容易的领域。

我已经在 Windows 7 上设置了 Slime + SBCL，这非常痛苦。在 Ubuntu 上设置它非常简单快捷。如果您打算使用其他开源软件、库等，这是需要考虑的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-20T23:05:42.877

（让我们为谷歌同事回答这个老问题……）

从 2016 年底开始，我们可以使用[Portacle](https://shinmera.github.io/portacle/)，一个可移植的多平台 Common Lisp 开发环境。它附带 Emacs25（略微定制）、SBCL、Slime、Quicklisp 和 Git 全部打包在一起，无需安装：下载、解压和运行。这是最简单的方法！

（看起来我们有更多的工具，比如 Lisp Machine，一个 Docker 容器中的 lisp IDE：[https](https://github.com/CodyReichert/awesome-cl#text-editor-resources) ://github.com/CodyReichert/awesome-cl#text-editor-resources ）

# c++ - 我应该如何处理在 C++ 中可视化 B+ 树的任务？

> ID：12040144
> 
> 赞同：1
> 
> 时间：2012-08-20T15:02:15.130
> 
> 标签：c++, recursion, tree, tree-traversal

我和我的朋友必须为我们的数据库类实现一个简单的 DBMS。

DBMS 的主要部分已经可以使用了，这意味着所有的命令（插入、删除、更新、选择）都经过了彻底的测试并且看起来工作得很好。

现在对于最后一个功能，我们必须实现 B+ 树，老实说，这非常困难。

我们尝试做的是首先实现一个可以在主内存中工作的简单 B+ 树（在实现基于文件的版本之前）。在网上阅读了 B+ 理论并研究了各种伪代码后，我们设法创建了一个递归实现，我使用 VS2010 的调试器对其进行了测试，看起来效果很好。

问题是，我想在某种程度上可视化创建的树，因为我相信这将使我们的调试工作更轻松。我的意思是如果你能看到树的样子，那么你就可以确定结果是否正确。

因此，让我们以最简单的情况为例。假设 B+ 树的节点上有 2 个整数作为数据和三个指向子节点的指针。

让我们插入数字 40,50,48,20,57,49。来自以下网站：[http ://www.seanster.com/BplusTree/BplusTree.html](http://www.seanster.com/BplusTree/BplusTree.html)

我们得到以下动画：

![在此处输入图像描述](../Images/19dd5b7ac0c09755155305eb26030801.png)

我添加了箭头。

现在我想通过以下方式在 C++ 中打印这棵树：

```
 [48|50]
  [20|40] [48|49] [50|57] 
```

但是我不确定我应该怎么做。我已经阅读了有关树遍历的信息，例如 preorder、postorder、inorder 但是我认为它们不会帮助我实现我想要的。

我所知道的只是根节点。从那个根节点开始，我必须通过以下方式遍历树：

1.  访问根
2.  打印根
3.  拜访根的孩子
4.  打印每个孩子的价值观
5.  对于根的每个孩子，访问它的孩子（这是根的孙子）。
6.  打印孙子的价值观
7.  为其他孙子做同样的事情
8.  以同样的方式为孙子的孩子做同样的事情等

解决这个问题的最佳方法是什么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:23:42.633

扩展我对级别顺序遍历的评论-如果我理解您的要求正确，这样的事情应该可以工作？好吧，它实际上不会起作用，因为 myNode 和诸如此类的东西没有定义，但希望它显示了这个想法。

```
std::vector<std::vector<std::string> > reprVect;

void visit(myNode n) { 
    if (reprVect.size() < myNode.level)
        reprVect.push_back(std::vector<std::string>());
    }
    reprVect[myNode.level].push_back(myNode.string_repr());
}

// [...]

std::queue<myNode> q;
q.push_back(rootNode);
while (!q.empty()) {
    myNode curNode = q.front();
    q.pop_front();
    visit(q);
    if (curNode.left != NULL) {
        q.push_back(curNode.left);
    } else { /*insert blank into the reprVect */ }
    if (curNode.right != NULL) {
        q.push_back(curNode.right);
    } else { /*insert blank into the reprVect */ }
}

// use cout to print contents of reprVect 
```

# jquery - JQuery Fancybox 弹出框

> ID：12040145
> 
> 赞同：0
> 
> 时间：2012-08-20T15:02:23.777
> 
> 标签：jquery, fancybox

我正在尝试使用 jquery 和 fancybox 来弹出一个带有重力形式的页面。我遵循了以下指示：

[http://www.gravityhelp.com/creating-a-modal-form-with-gravity-forms-and-fancybox/](http://www.gravityhelp.com/creating-a-modal-form-with-gravity-forms-and-fancybox/)

除了 jquery 部分外，一切似乎都正常工作。它不会在页面上的弹出框中打开。

这是一个链接

[http://whistlerworks.com/clients/nawreck/site/](http://whistlerworks.com/clients/nawreck/site/)

这是左下角的第一个方框，上面写着我们的律师已经追回了数百万美元。当您将鼠标悬停在该框上并单击它时，它应该会拉出弹出框，但它只是将您重定向到该页面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:22:59.710

确保您拥有所有这 3 行；

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="<?php bloginfo('template_directory'); ?>/fancybox/jquery.fancybox-1.3.0.css" media="screen" />
<script type="text/javascript" src="<?php bloginfo('template_directory'); ?>/fancybox/jquery.fancybox-1.3.0.pack.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:16:36.513

您不应该使用 2 个版本的 jQuery，并且从 jQuery 1.7 开始，委托已被 on() 取代。所以只需在 Fancybox 之前包含一个 jQuery 脚本，它的版本低于 1.7，你应该准备好了。

# android - 更新多个电话号码联系人

> ID：12040149
> 
> 赞同：-1
> 
> 时间：2012-08-20T15:02:34.667
> 
> 标签：android, android-contentprovider, android-contacts, contactscontract

我需要为同一个联系人更新多个电话号码。我只能更新一个电话号码，但我不知道如何更新例如 2

这是我的代码...

```
String stEtPhone = etPhone.getText().toString();

values.clear();
String phoneWhere = ContactsContract.Data.RAW_CONTACT_ID + "=? AND " + ContactsContract.Data.MIMETYPE + "=?";
String[] phoneWhereParams = new String[]{String.valueOf(idContacto),ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE};
values.put(ContactsContract.CommonDataKinds.Phone.NUMBER,stEtPhone);
cr.update(ContactsContract.Data.CONTENT_URI, values, phoneWhere, phoneWhereParams); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:14:13.817

您的代码应该更新与您的`WHERE`子句匹配的每一行。如果您知道有额外的行应该匹配但不匹配，那么那里有问题。

一种可能的测试方法：您可能首先要查询与`ContactsContract.CommonDataKinds.Phone.NUMBER`给定匹配的事物`ContactsContract.Data.RAW_CONTACT_ID`并查看返回了多少事物。

如有必要（尽管我不确定这与您已经在做什么不同），迭代您的结果`while(cursor.moveToNext())`，如果电话号码与您尝试更新的电话号码匹配，`update`它。

请注意，这是未经测试的现成代码，因此可能存在小错误，如果您真的这样做，您可能希望使用 a`List<ContentProviderOperation>`然后执行批处理操作，而不是一个一个地执行此操作。

```
ContentResolver resolver = getContentResolver();
String[] columnsToReturn = {Data._ID, ContactsContract.CommonDataKinds.Phone.NUMBER}
// This should return all of the phone numbers that match your criteria
Cursor cursor = resolver.query(ContactsContract.Data.CONTENT_URI, columnsToReturn, phoneWhere, phoneWhereParams, null);

while(cursor != null && cursor.moveToNext()){
    // This code doesn't do this, but you might want to see how many items 
    // are returned in your cursor here to verify that you're getting what 
    // you should for some known case..

    // I'm using the row ID here (Data._ID) to update, instead of your initial WHERE
    resolver.update(ContactsContract.Data.CONTENT_URI, values, Data._ID + "=?", cursor.getString(cursor.getColumnId(Data._ID));

} 
```

`UPDATE`如果您在语句中正确设置了所有内容，甚至不需要先执行查询。

您可能还会发现附加[到此](https://stackoverflow.com/questions/6433924/grab-multiple-number-from-an-android-contact)问题的代码块很有用。

# ruby-on-rails - 使用 rspec 进行简单的基本测试 1\. url 参数 2.view 控制器中的变量

> ID：12040156
> 
> 赞同：0
> 
> 时间：2012-08-20T15:03:06.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2

我是rspec的初学者。

案例示例：

我的控制器：

```
def index
   id=params[:id];
   @nameTest=id+'test';
end 
```

需要测试：

1.  身份证的价值
2.  @nameTest 的值

我的代码失败：

```
it "basic test for index" do
      get :index,:id => 'myid'
      response.code.should eq("200")
      assigns(:id).should be_kind_of('myid')
      assigns(@nameTest).should be_kind_of('myidtest')
end 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:54:45.097

您的测试中有几个错误：

1.  您尝试测试 id 的值*，*但*id*是本地方法变量，它会在`index`方法执行后消失。无法测试分配给局部变量的值。实际上它没有意义 - 在规范中，您只需要测试方法执行的结果（返回值、更改的状态等）。

2.  您使用检查器检查分配的值`be_kind_of`。但`be_kind_of`检查左侧的值是否属于指定类，而不是指定值。如果你需要检查值，那么你可以使用`==`检查器。

对您的操作的正确测试如下：

```
it "basic test for index" do
  get :index, :id => 'myid'

  response.code.should eq("200")

  assigns(:nameTest).should == 'myidtest'
end 
```

# emacs - Why aren't Syntax Highlighting and Line Highlighting getting along in Emacs 24?

> ID：12040161
> 
> 赞同：3
> 
> 时间：2012-08-20T15:03:21.593
> 
> 标签：emacs, lisp, emacs24

I'm having an issue similar to the one described here:

[Disable hl-line in Emacs when using Emacs Starter Kit?](https://stackoverflow.com/questions/3545458/disable-hl-line-in-emacs-when-using-emacs-starter-kit)

I am using Emacs 24 for OS X ( [http://emacsformacosx.com/](http://emacsformacosx.com/) ), invoked with the -nw flag to run it in the terminal (so I can have true fullscreen). I started my customizations with the Emacs Starter Kit ( [https://github.com/technomancy/emacs-starter-kit](https://github.com/technomancy/emacs-starter-kit) ). Most of the things I've added are working well.

但是，我已经注意到我的语法突出显示在突出显示所选行时不显示（所有文本是相同的颜色）。我喜欢这种`line-highlight`效果，但不想放弃语法高亮。有没有办法做到这一点（特别是在终端）？

我的语法/背景着色是使用`custom-theme`.

谢谢你的帮助。

编辑：我正在使用狮子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T00:46:28.700

嗯，我认为您必须`hl-line`使用`M-x customize-face RET hl-line`. 然后确保它没有其他属性（甚至没有`inherit`属性）并且它定义的只是背景颜色。突出显示的行应该用该背景颜色突出显示，但让现有的语法突出显示。

另一种方法是使用[https://github.com/sellout/emacs-color-theme-solarized/](https://github.com/sellout/emacs-color-theme-solarized/)上的“solarized”主题。这些已经解决了这个问题。

编辑：实际上您可以保留该`inherit`属性，只需确保该 face 不会覆盖您想要作为语法突出显示的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:29:29.537

因为我们不知道您使用的是什么版本的 OS X，所以这是在黑暗中刺探。在 Lion 之前，Terminal.app 不支持 256 色，所以：

1.  它在 Emacs.app 中运行良好吗？
2.  如果是这样，您运行的是 Lion 之前的 OS X 版本吗？
    *   如果是，并且您不想（或不能）升级您的操作系统：尝试使用[iTerm 2](http://www.iterm2.com/)作为您的终端，然后看看 emacs 是如何工作的。
    *   如果不是：也许其他人可以提供帮助。

# java - 可执行 jar 不通过命令行运行

> ID：12040162
> 
> 赞同：2
> 
> 时间：2012-08-20T15:03:24.410
> 
> 标签：java, cmd, command-prompt, executable-jar

我在 Eclipse 中从我的 java 项目创建了可执行 jar。双击它运行得很好，但通过命令行它返回一些错误。试过：

```
c:\>myFile.jar
c:\>"myFile.jar"
c:\>java -jar myFile.jar  //here i can see the errors 
```

![在此处输入图像描述](../Images/d47b92b39d989c5bd9a4074b9fe64f67.png) 我如何通过 cmd 运行文件，就像我双击它一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:10:58.360

您的 jar 找不到为 指定的路径`fonts\DINOT-Medium.ttf`，请提供正确的路径并且不要在程序中使用硬编码路径。为此使用属性文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:15:42.663

你在错误的文件夹中。尝试

```
cd Desktop 
```

并调用 java -jar

我假设文件夹 Desktop/fonts 存在。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-20T15:08:07.467

.jar 可能与`java`可执行文件无关。检查 Windows 注册表中的文件类型注册条目或通过控制面板中的“默认程序”。

# .net - 所选项目未显示在 DataGridComboBoxColumn 中

> ID：12040164
> 
> 赞同：0
> 
> 时间：2012-08-20T15:03:37.277
> 
> 标签：.net, wpf, c#-4.0, datagrid, datagridcomboboxcolumn

我在 XAML 中设置`DataGrid`了两个s（从[此处](https://stackoverflow.com/questions/6517346/wpf-datagridcomboboxcolumn-cell-not-displaying-selected-item-text)`DataGridComboBoxColumn`复制）：

```
<DataGrid x:Name="joinGrid" AutoGenerateColumns="False" CanUserAddRows="True">
                <DataGrid.Columns>
                    <DataGridComboBoxColumn>
                        <DataGridComboBoxColumn.ElementStyle>
                            <Style TargetType="ComboBox">
                                <Setter Property="IsDropDownOpen" Value="True" />
                                <Setter Property="ItemsSource" Value="{Binding Path=TableAColumns}" />
                                <Setter Property="ItemTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}"></TextBlock>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridComboBoxColumn.ElementStyle>
                        <DataGridComboBoxColumn.EditingElementStyle >
                            <Style TargetType="ComboBox">
                                <Setter Property="ItemsSource" Value="{Binding Path=TableAColumns}" />
                                <Setter Property="IsDropDownOpen" Value="True" />
                                <Setter Property="ItemTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}"></TextBlock>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridComboBoxColumn.EditingElementStyle>
                    </DataGridComboBoxColumn>

                    <DataGridComboBoxColumn>
                        <DataGridComboBoxColumn.ElementStyle>
                            <Style TargetType="ComboBox">
                                <Setter Property="IsDropDownOpen" Value="True" />
                                <Setter Property="ItemsSource" Value="{Binding Path=TableBColumns}" />
                                <Setter Property="ItemTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}"></TextBlock>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridComboBoxColumn.ElementStyle>
                        <DataGridComboBoxColumn.EditingElementStyle>
                            <Style TargetType="ComboBox">
                                <Setter Property="ItemsSource" Value="{Binding Path=TableBColumns}" />
                                <Setter Property="IsDropDownOpen" Value="True" />
                                <Setter Property="ItemTemplate">
                                    <Setter.Value>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding}"></TextBlock>
                                        </DataTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </DataGridComboBoxColumn.EditingElementStyle>
                    </DataGridComboBoxColumn>
                </DataGrid.Columns>
            </DataGrid> 
```

除了少数例外，因为老实说，我不明白丢失的部分应该包含什么。我正在尝试将列绑定到实体类中包含的字符串列表：

```
class JoinBlockDTO
{
    public List<string> TableAColumns { get; set; }
    public List<string> TableBColumns { get; set; }
} 
```

在我后面的代码中，我设置了网格`ItemsSource`：

```
DataGrid dg = (DataGrid)GetTemplateChild("joinGrid");

List<JoinBlockDTO> l = new List<JoinBlockDTO>();
List<string> colAList = (from DataRowView row in sourceA
                         select row.Row.Field<string>(0)).ToList();
List<string> colBList = (from DataRowView row in sourceB
                         select row.Row.Field<string>(0)).ToList();

((DataGridComboBoxColumn)dg.Columns[0]).ItemsSource = colAList; //doesn't work without this
((DataGridComboBoxColumn)dg.Columns[1]).ItemsSource = colBList; //doesn't work without this
l.Add (new JoinBlockDTO(){TableAColumns = colAList, TableBColumns = colBList});
dg.ItemsSource = l; 
```

最初，所有这些都会渲染一个包含所有空白单元格的 2 x 2 网格。我单击两次以查看一个下拉列表，其中包含正确绑定的字符串列表。但是，当我从下拉列表中选择一个值并将焦点移到外部时，单元格将留空。有人可以指出应该向 XAML 添加或修改什么吗？有没有更简单的方法来做这个绑定？我已经阅读了许多有关此组合框列绑定的帖子，但无法理解发生了什么。（使用VS2010）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T08:24:39.920

没错，我想通了。

使用 SelectedValueBinding={Binding object} 和 SelectedValuePath="" 为我修复了它。

[WPF：使用 DataGridComboBoxColumn 进行数据绑定](https://stackoverflow.com/questions/3337802/wpf-databinding-with-datagridcomboboxcolumn)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T18:58:18.200

这会帮助你

使用“ObservableCollection”列表自动 INotifyPropertyChanged

```
 <DataGrid x:Name="myDataGridTeacher" 
                  ItemsSource="{Binding ObservableCollectionList}" >

 <DataGridTemplateColumn Width="*" Header="MyHeader"  >
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate >

                            <TextBlock Text="{Binding Material_Name.Name}" 
                                  />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>

                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox  
                                       ItemsSource="{Binding Material_Name}" 
                                       DisplayMemberPath="Name"

                                />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>

                </DataGridTemplateColumn>

 </DataGrid> 
```

ItemsSource="{Binding Material_Name}" 是“ObservableCollectionList”中的列表

```
<TextBlock Text="{Binding Material_Name.Name}" 
                                      /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T10:48:38.417

也许您的 VM 没有实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。

这是一个例子：

```
<Window x:Class="wpfProj.MainWindow"
        ...
        d:DataContext="{d:DesignInstance wpfProj:MainViewModel}">

    <Grid >
        <Grid.Resources>
            <wpfProj:BindingProxy x:Key="proxy" Data="{Binding}"/>
        </Grid.Resources>
        <DataGrid AutoGenerateColumns="False" ItemsSource="{Binding Path=Persons}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}" Width="*"/>
                <DataGridComboBoxColumn Header="Sex" Width="*" ItemsSource="{Binding Source={StaticResource proxy}, Path=Data.SexList}"
                                        SelectedItemBinding="{Binding Path=Sex}"/>
                <DataGridComboBoxColumn Header="Sex" Width="*" ItemsSource="{Binding Source={x:Static wpfProj:DataCollection.Instance}, Path=SexList}"
                                        SelectedItemBinding="{Binding Path=Sex}"/>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

我放置了两个“Sex”列，只是为了展示绑定到源的两种方法。在第一种情况下，SexList 是 ViewModel (DataContext) 的一部分，这就是我使用代理的原因。在第二种情况下，它绑定到单例的属性。

性别属性：

```
 public string Sex
    {
        get { return _sex; }
        set
        {
            _sex = value;
            OnPropertyChanged("Sex");
        }
    } 
```

还有代理类（我在网上找过，不记得作者页面的链接了）

```
public class BindingProxy : Freezable
{
    #region Overrides of Freezable

    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxy();
    }

    #endregion

    public object Data
    {
        get { return GetValue(DataProperty); }
        set { SetValue(DataProperty, value); }
    }

    public static readonly DependencyProperty DataProperty =
        DependencyProperty.Register("Data", typeof(object), typeof(BindingProxy), new UIPropertyMetadata(null));
} 
```

希望能帮助到你。这是我上传的[示例。](http://dl.dropbox.com/u/62983561/Pro/StackOverflow%20samples/Wpf%20Datagrid%20ComboboxColumn%20Binding.7z)

# sql - Sql连接表部分连接连接结果？

> ID：12040165
> 
> 赞同：1
> 
> 时间：2012-08-20T15:03:41.803
> 
> 标签：sql, sql-server-2008, join, concatenation, partial

我有两张桌子。一列有 2 列 - ID、标签。标签列是一个逗号分隔的标签值列表。

我的第二个表，也有两列。一个是标签列表，每个标签都在自己的行中，第二列是该标签的标签。

我需要做的是为每个 ID 创建一个输出查询，并使用分号分隔的标签标签列表，为每个 ID 在其列表中具有相应的标签值。

这是两个表的简短示例：

```
Table1 - 
ID---Tags
1---tag1,tag2,tag3,tag6
2---tag2,tag4,tag5
3---tag3,tag8,tag9,tag10
4---tag1,tag2,tag6
5---tag1,tag4,tag5

Table2 - 
tagname---taglabel
tag1--- Nice Name Tag1
tag2--- Nice Name Tag2
tag3--- Nice Name Tag3
tag4--- Nice Name Tag4
tag5--- Nice Name Tag5
tag6--- Nice Name Tag6
tag7--- Nice Name Tag7
tag8--- Nice Name Tag8
tag9--- Nice Name Tag9
tag10--- Nice Name Tag10 
```

所需的结果集 -

```
ID---TagsNames
1---Nice Name Tag1,Nice Name Tag2,Nice Name Tag3,Nice Name Tag6
2---Nice Name Tag2,Nice Name Tag4,Nice Name Tag5
3---Nice Name Tag3,Nice Name Tag8,Nice Name Tag9,Nice Name Tag10
4---Nice Name Tag1,Nice Name Tag2,Nice Name Tag6
5---Nice Name Tag1,Nice Name Tag4,Nice Name Tag5 
```

我试图为初始连接设置查询，认为我可以获取该结果集并连接行，但我似乎无法让部分连接工作。这是该查询：

```
 SELECT gt.id as g
      ,gt.tags as tg
      ,tt.HitTagName as ht
      ,tt.termlabel as tl 
FROM tblidtags gt (nolock)
JOIN tbltaglabels tt (Nolock) ON gt.tg like '%' + tt.ht + '%' 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:33:33.123

首先，*如果*可以的话，[**规范化**](http://en.wikipedia.org/wiki/First_normal_form)表格而不是多值列。这是糟糕的数据库设计，很难查询，接下来您将看到。

现在，如果您真的无法修改数据库模式，那么您必须执行以下操作：

1.  将每个多值列转换为行，即`tag1,tag2,tag3`转换为三行；
2.  对于每一行，从`Table2`;中获取其描述。
3.  最后，连接所有描述，按 id 分组。

这是生成的查询和**有效的** [sqlfiddle](http://sqlfiddle.com/#!3/7b851/2)：

```
WITH tmp (id, tag, tags) AS (
SELECT id, LEFT(tags, CHARINDEX(',',tags+',')-1),
    STUFF(tags, 1, CHARINDEX(',',tags+','), '')
FROM tbl1
UNION ALL
SELECT id, LEFT(tags, CHARINDEX(',',tags+',')-1),
    STUFF(tags, 1, CHARINDEX(',',tags+','), '')
FROM tmp
WHERE tag > ''
)
SELECT id, 
 STUFF((SELECT ',' + tbl2.descr FROM tmp INNER JOIN tbl2 ON (tmp.tag = tbl2.tag) 
        WHERE id = a.id
        FOR XML PATH ('')), 1, 1, '') tag_names
FROM tmp a
WHERE tag != ''
GROUP BY id
ORDER BY id; 
```

要规范化您的模式，您需要创建一个中间表，例如，将`id_tag(id, tag)`在其中`(id, tag)`形成主键。然后，您可以使用`tmp`上述查询的第一部分（表）来填充此表。在此之后，您可以删除`Table1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:37:54.930

```
;WITH cte AS (
    SELECT a.ID, b.taglabel FROM
        (SELECT c.ID, Split.a.value('.', 'VARCHAR(100)') AS Tags FROM 
            (SELECT ID, CAST('<M>' + REPLACE(Tags,  ',' , '</M><M>') + '</M>' AS XML) AS Tag 
                FROM dbo.Table1) c
        CROSS APPLY Tag.nodes('/M') Split(a)) a
    LEFT JOIN dbo.Table2 b ON b.tagname = a.Tags)

SELECT ID, STUFF(
    (SELECT DISTINCT ',' + NULLIF(taglabel,'') FROM cte t2
        WHERE t1.id = t2.id FOR XML PATH(''), TYPE).value('.','VARCHAR(MAX)'),1,2,'') AS tags
FROM cte t1 GROUP BY ID ORDER BY ID 
```

### 架构

```
CREATE TABLE dbo.Table1 (
    ID tinyint PRIMARY KEY,
    Tags varchar(25))

CREATE TABLE dbo.Table2(
    tagname varchar(5) PRIMARY KEY,
    taglabel varchar(15))

INSERT INTO dbo.Table1 VALUES
(1, 'tag1,tag2,tag3,tag6'),
(2, 'tag2,tag4,tag5'),
(3, 'tag3,tag8,tag9,tag10'),
(4, 'tag1,tag2,tag6'),
(5, 'tag1,tag4,tag5')

INSERT INTO dbo.Table2 VALUES
('tag1', 'Nice Name Tag1'),
('tag2', 'Nice Name Tag2'),
('tag3', 'Nice Name Tag3'),
('tag4', 'Nice Name Tag4'),
('tag5', 'Nice Name Tag5'),
('tag6', 'Nice Name Tag6'),
('tag7', 'Nice Name Tag7'),
('tag8', 'Nice Name Tag8'),
('tag9', 'Nice Name Tag9'),
('tag10', 'Nice Name Tag10') 
```

### 结果

```
身份标签
---- ---------------------------------------------- --------------------
1 好名牌1,好名牌2,好名牌3,好名牌6
2 好名牌2,好名牌4,好名牌5
3 好名牌10,好名牌3,好名牌8,好名牌9
4 好名字标签1,好名字标签2,好名字标签6
5 好名牌1,好名牌4,好名牌5
```

### 编辑 1

要规范化，请创建另一个表，如下所示：

```
CREATE TABLE tags (
    id mediumint,
    tag varchar(5),
    PRIMARY KEY (id, tag))

INSERT INTO tags (id, tag) VALUES
SELECT c.ID, Split.a.value('.', 'VARCHAR(100)') AS Tags FROM 
    (SELECT ID, CAST('<M>' + REPLACE(Tags,  ',' , '</M><M>') + '</M>' AS XML) AS Tag 
        FROM dbo.Table1) c
CROSS APPLY Tag.nodes('/M') Split(a) 
```

然后，您可以`JOIN`在`tags`每个`tag`.

### 编辑 2

看看[这个](http://sqlfiddle.com/#!3/10386/1)小提琴，看看标准化模式的外观。

# iphone - 切换 MKMapView 显示语言

> ID：12040167
> 
> 赞同：15
> 
> 时间：2012-08-20T15:03:51.640
> 
> 标签：iphone, ios

是否可以将 MKMapView 的基础语言切换到与系统语言环境不同的语言？

例如，如果地址显示翻译后的街道名称（英文），但我需要查看母语翻译（例如在中国大陆或日本）。

一个替代方案是包含一个本地地图引擎（如百度），但我希望看看 iOS 是否可以开箱即用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T10:50:03.520

地图将以它所显示的国家/地区的语言显示，通常以英语（或者您的当地语言）作为第二语言。例如，在您的手机上打开地图应用程序并输入迪拜或埃及开罗，您将看到城市和街道的阿拉伯语文本。

其他语言也是如此。输入上海，中国，你会得到中文文本，东京，日本，你会得到日语文本，等等。

（截至目前）没有开放的框架功能可以手动更改输入的语言。我知道 openstreetmap API 对此有一些调用，但这需要滚动您自己的地图处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-08T06:02:11.783

用于`googlesdk`此。我这样做了，根据本地位置，它太有用了，地图将转换为本地语言，如果您担心注释和多个注释，您可以实现所有这些事情，就像`MKMapview`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-26T21:06:24.203

Maps 应用程序有一个以本地语言而不是系统语言显示标签的选项，但此选项不适用于 MapKit。

[iOS 版 Mapbox Maps SDK](https://www.mapbox.com/ios-sdk/)确实有一个选项，可以将标签本地化为每个区域的本地语言或全球九种语言之一（基于 OpenStreetMap 和 Wikidata）。

要将地图上的所有标签更改为系统语言，请让您的`MGLMapViewDelegate`对象实现该`-mapView:didFinishLoadingStyle:`方法，然后调用该`-[MGLStyle localizeLabelsIntoLocale:]`方法。

在斯威夫特：

```
func mapView(_ mapView: MGLMapView, didFinishLoading style: MGLStyle) {
    // Into the system language
    style.localizeLabels(into: nil)
    // Into Simplified Chinese
    style.localizeLabels(into: Locale(identifier: "zh-Hans"))
    // Into the local language where a given feature is located
    style.localizeLabels(into: Locale(identifier: "mul"))
} 
```

或者在 Objective-C 中：

```
- (void)mapView:(MGLMapView *)mapView didFinishLoadingStyle:(MGLStyle *)style {
    // Into the system language
    [style localizeLabelsIntoLocale:nil];
    // Into Simplified Chinese
    [style localizeLabelsIntoLocale:[NSLocale localeWithLocaleIdentifier:@"zh-Hans"]];
    // Into the local language where a given feature is located
    [style localizeLabelsIntoLocale:[NSLocale localeWithLocaleIdentifier:@"mul"]];
} 
```

还有一些用于本地化某些类型特征的选项，例如仅街道或仅地标。有关详细信息，请参阅[此文档。](https://www.mapbox.com/help/change-language/#mapbox-maps-sdk-for-ios)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-06T07:13:03.027

通过**强制应用默认语言**可以克服这个限制。虽然价格昂贵，但它确实有回报。

> ```
> let langCultureCode: String = "en"
> let defaults = UserDefaults.standard
> defaults.set([langCultureCode], forKey: "AppleLanguages")
> defaults.synchronize() 
> // UserDefaults.standard.set(["AR"], forKey: "AppleLanguages") // case Arabic 
> ```

在我的应用程序中，使用**基于阿拉伯语的设备**的用户错误地使用他们的阿拉伯语国家和城市名称从我的数据库中搜索。

**regionDidChangeAnimated?**

```
 // الرياض, السعودية
    // دبي ، الإمارات
    // القاهرة، مصر 
```

**强行忽略设备默认语言**并不是随便来的。恢复我的 Mapview 功能，使我的应用放弃任何本地化字符串。而且有很多。

[![在此处输入图像描述](../Images/a6e7e7d00d93a2067b72b041ccdfaa2c.png)](https://i.stack.imgur.com/zCBO3.jpg)

**regionDidChangeAnimated?**

```
// Riyadh, Saudi Arabia 
// Dubai , United Arab Emirates
// Cairo , Egypt 
```

*   奇怪的是，mapView 忽略了我的应用程序默认语言设置并使用用户默认语言呈现标签。这恰好是一个偶然的优势

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-11T20:47:17.230

只需`style.localizeLabels(into: Locale.current)`在您的`mapView(_ mapView: MGLMapView, didFinishLoading style: MGLStyle)`功能中执行即可。

确保您的应用程序已在项目设置中启用该特定语言并且 MapBox 支持该语言。

# javascript - 如何访问 Chrome 的拼写检查字典？

> ID：12040169
> 
> 赞同：11
> 
> 时间：2012-08-20T15:03:54.517
> 
> 标签：javascript, google-chrome, google-chrome-extension, spell-checking

显然 Chrome 有一个用于拼写检查的内置字典。是否有 API 或某种方式可以访问这本字典？我感兴趣的不是检查拼写，而是实际访问字典。例如，我想[为 chrome 编写字典自动完成扩展？](https://stackoverflow.com/questions/11993602/dictionary-autocomplete-extension-for-chrome)一个字典自动完成扩展，它使用 Chrome 的字典而不是维护我自己的。我特别感兴趣的是像`getWordsThatStartWith(text)`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T23:48:29.533

这些词典可从[http://src.chromium.org/viewvc/chrome/trunk/deps/third_party/hunspell_dictionaries/](http://src.chromium.org/viewvc/chrome/trunk/deps/third_party/hunspell_dictionaries/)下载。（带有`.dic`扩展名的文件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:42:40.227

我不确定这是否与您的要求有关。似乎另一个开发人员创建了一个扩展来查找单词，不确定他创建的 api 是否使用了内部字典拼写检查......我的假设是 api 只是使用高级搜索功能从谷歌查询返回结果像“定义：示例”，示例是查询/单词。这是文章的链接，尽管它已经过时了。

[http://googlesystem.blogspot.com/2009/12/on-googles-unofficial-dictionary-api.html](http://googlesystem.blogspot.com/2009/12/on-googles-unofficial-dictionary-api.html)

# c# - Excel 到 PDF 导出 - 页码限制

> ID：12040172
> 
> 赞同：1
> 
> 时间：2012-08-20T15:04:06.023
> 
> 标签：c#, excel

我正在使用 C# 将 Excel 文件转换为 PDF。这是我到目前为止的代码：

```
Excel.Application excelApp = new Excel.Application();
excelApp.Workbooks.Open(infile, 0, false, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
excelApp.ActiveWorkbook.ExportAsFixedFormat(Excel.XlFixedFormatType.xlTypePDF, outfile);
excelApp.DisplayAlerts = false;
excelApp.SaveWorkspace();
excelApp.Quit(); 
```

该部分有效，但有时我的文件超过 20 列，并且输出“分解”为 PDF 上的多个页面。

有什么方法可以控制我想允许多少“休息”？

例如。假设工作表有 25 列
，我输入了一个数字，例如。3
前 5 列打印在第 1 页
下 5 列打印在第2 页上
5 列打印在第 3 页
并且执行停止（或继续到下一张）

我认为答案在某个地方（但我不太确定）：

```
((Microsoft.Office.Interop.Excel._Worksheet)excelApp.ActiveSheet).PageSetup.Pages 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T16:13:34.413

您应该能够通过 PageSetup 类完成此操作并选择适当的 PrintArea。对于 PDF 转换，我们使用“FitToPages”功能来缩放视图，以便每个工作表仅占一页宽。

```
_Workbook document = application.Workbooks.Open(FileName,
                     oFalse, oTrue, oMissing, oMissing, oMissing, oMissing,
                     oMissing, oMissing, oFalse, oFalse, oMissing, oFalse,
                     oFalse, oFalse);

foreach (Worksheet ws in document.Worksheets.OfType<Worksheet>())
{
    ws.PageSetup.Orientation = XlPageOrientation.xlLandscape;
    ws.PageSetup.Zoom = false;
    ws.PageSetup.FitToPagesWide = 1;
    ws.PageSetup.FitToPagesTall = false;
}

document.ExportAsFixedFormat(fxFormat, fileName,
                             oMissing, oMissing, oFalse, oMissing,
                             oMissing, oFalse, oMissing); 
```

或者您可以设置打印区域而不是缩放：

```
 // Specified in the same range format as the UI
    ws.PageSetup.PrintArea = "a1-e50"; 
```

您可能需要从 ws 获取使用的列和行。[UsedRange](http://msdn.microsoft.com/en-US/library/microsoft.office.tools.excel.worksheet.usedrange%28v=VS.80%29.aspx)属性以提供正确的打印区域。确保在调用“ExportAsFixedFormat”时为 IgnorePrintAreas 参数提供 false。

# php - SimpleXML 查找父节点键

> ID：12040178
> 
> 赞同：1
> 
> 时间：2012-08-20T15:04:32.397
> 
> 标签：php, simplexml

我敢肯定，这很容易，但像往常一样完全厚实，而且我是 SimpleXML 的新手。

我要做的就是根据给定的值添加和或编辑特定的注释。示例 xml 文件：

```
<site>
    <page>
     <pagename>index</pagename>
      <title>PHP: Behind the Parser</title>
      <id>abc
      <plot>
       So, this language. It's like, a programming language. Or is it a
       scripting language? All is revealed in this thrilling horror spoof
       of a documentary.
      </plot>
      </id>
      <id>def
      <plot>
      2345234 So, this language. It's like, a programming language. Or is it a
       scripting language? All is revealed in this thrilling horror spoof
       of a documentary.
      </plot>
      </id>
    </page>

     <page>
      <pagename>testit</pagename>
      <title>node2</title>
      <id>345
      <plot>
       345234 So, this language. It's like, a programming language. Or is it a
       scripting language? All is revealed in this thrilling horror spoof
       of a documentary.
      </plot>
      </id>
    </page>
    </site> 
```

如果我想添加一个和索引如何找到节点键

我可以添加内容，例如

```
$itemsNode = $site->page->pagename;

$itemsNode->addChild("id", '12121')->addChild('plot', 'John Doe'); 
```

但我想要/需要做的是向 pagename='index' 或 pagename='testit' 添加内容某种形式的带有开关等的foreach循环。必须有一种简单的方法吗？不？

所以它看起来应该像我认为的那样（但不起作用，否则不会提出问题）

```
$paget = 'index' //(or testit')
if( (string) $site->page->pagename == $paget ){

$itemsNode = $site->page;

$itemsNode->addChild("id", '12121')->addChild('plot', 'John Doe');

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:21:16.920

您可以使用[xpath](http://www.w3.org/TR/xpath/)获取要修改的节点：

```
$xml_string = '<site>...'; // your original input
$xml = simplexml_load_string($xml_string);
$pages = $xml->xpath('//page/pagename[text()="index"]/..')
if ($nodes) {
    // at least one node found, you can use it as before
    $pages[0]->addChild('id', '12121');
} 
```

该模式基本上会查找's 内容所在的每个`<pagename>`下方，然后逐步返回以使节点返回。`<page>``<pagename>``index``<page>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:16:52.493

编辑：

如果您知道节点的确切位置，您可以执行以下操作：

```
$site->page[0]->addChild("id", '12121');
$site->page[0]->addChild('plot', 'John Doe'); 
```

在这种情况下，page[0] 将是“index”，而 page[1] 将是“testit”。

否则，您应该遍历页面节点，直到找到所需的节点。下面的代码显示了如何做到这一点：

```
$paget = "index";
foreach( $site->page as $page ) {
   if( $page->pagename == $paget ) {
     // Found the node
     // Play with $page as you like...
     $page->addChild("id", '12121');
     $page->addChild('plot', 'John Doe');
     break;
   }
} 
```

# asp.net-mvc - 在 VB 中使用 ActionMailer.Mvc 发送电子邮件，找不到视图

> ID：12040180
> 
> 赞同：1
> 
> 时间：2012-08-20T15:04:46.790
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, actionmailer.net

我尝试发送电子邮件时收到的错误是：

> NoViewsFoundException
> 
> 您必须提供此电子邮件的视图。视图应命名为 ~/Views/Email/VerificationEmail.html.vbhtml.txt.cshtml 或 ~/Views/Email/VerificationEmail.html.vbhtml.html.cshtml（或 WebFormsViewEngine 的 aspx），具体取决于您希望呈现的格式。

在线错误：

`Return Email("~/Views/Email/VerificationEmail.html.vbhtml", model)`

**电子邮件不能以 .vbhtml 格式发送，必须以 .cshtml 格式发送吗？这如何适用于 VB？**

这是我的代码控制器：

```
Imports ActionMailer.Net.Mvc

Public Class EmailController
    Inherits MailerBase

    Public Function VerificationEmail(ByVal model As RegisterModel) As EmailResult

        [To].Add(model.Email)
        From = "me@my.org"
        Subject = "Thanks for registering with us!"
        Return Email("~/Views/Email/VerificationEmail.html.vbhtml", model)

    End Function

End Class 
```

这是我的看法：

```
@modelType MyBlog.RegisterModel

@Code
    Layout = Nothing
End code

Welcome to My Cool Site, @Model.UserName

We need you to verify your email.  Click this nifty link to get verified!

@Html.ActionLink("Verify", "Account", New With {.code = Model.Email})

Thanks! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T03:07:42.127

在阅读了几个问题和答案之后，它可以让它与这个一起工作：

```
public override string ViewPath {
        get { return AppDomain.CurrentDomain.BaseDirectory + @"\EmailTemplates\"; }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:39:02.810

当然你可以有`vbhtml`电子邮件模板，你只需要小心命名（`.cshtml`s 异常消息是硬编码的，所以不要混淆）

您的视图命名正确，因为`VerificationEmail.html.vbhtml`您只需要从`Email`调用中的视图名称中删除所有前缀：

```
Return Email("VerificationEmail", model) 
```

因为 ActionMailer 会自动添加前缀并为您选择正确的模板。

请注意，**目前您不能使用**`~`以eg开头的相对视图名称`"~/Views/..."`（我不知道这是错误还是功能）。

因此，您需要将邮件模板放入常规视图文件夹，例如

*   `/Views/{MailControllerName}/`
*   `/View/Shared/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T14:37:12.353

和查德·理查森有同样的问题。要解决尝试从其他区域发送电子邮件时发生的问题，只需将此代码添加到 Application_Start 方法：

```
var razorEngine = ViewEngines.Engines.OfType<RazorViewEngine>().First();
    razorEngine.ViewLocationFormats = razorEngine.ViewLocationFormats.Concat(new string[] 
    { 
        "~/Areas/.../{0}.cshtml"
    }).ToArray(); 
```

# html - 使用 iFrame 将 Youtube 频道嵌入 HTML

> ID：12040181
> 
> 赞同：4
> 
> 时间：2012-08-20T15:04:47.743
> 
> 标签：html, iframe, youtube

我正在尝试将 Youtube 频道嵌入 HTML 页面。

比如我取这个频道地址：[http ://www.youtube.com/aaaa](http://www.youtube.com/aaaa)

我使用了这段代码：

```
<html>
<head>
</head>
<body>
    <iframe src="http://www.youtube.com/aaaa"></iframe> 
</body>
</html> 
```

问题是它不起作用。我尝试了另一个站点，它可以工作。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:19:40.103

问题似乎是由这个网址引起的：http://www.youtube.com/aaaa。

我尝试了其他一些 URL，它可以工作。

[您可以在这里](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_iframe)轻松尝试一些 URL 。

* * *

尝试这个：

```
 <script src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/youtube.xml&amp;up_channel=aaaa&amp;synd=open&amp;w=320&amp;h=390&amp;title=&amp;border=%23ffffff%7C3px%2C1px+solid+%23999999&amp;output=js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:19:16.440

尝试这个：

```
<div name="iframe" style="width:100%; height:635px; border:2px solid grey; overflow:hidden">
  <iframe src="http://yourchannel-URL" style="width:100%; height:700px; margin-top: -65px" scrolling="true">
     If you can see this, your browser doesn't support iframes. Click <a href="http://mychannel.url">here to see my YouTube channel.</a>
  </iframe>
</div> 
```

这应该嵌入一个没有 youtube 搜索栏的完整 youtube 频道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:21:09.347

```
<iframe class="youtube-player" type="text/html" width="640" height="385" src="http://www.youtube.com/aaaa" frameborder="0">
</iframe> 
```

这是取自 youtube[这里](http://apiblog.youtube.com/2010/07/new-way-to-embed-youtube-videos.html)

看来 IE（和其他）只能使用 [youtube.com/embed/videoID]（HTML5 播放器）——至少是我实现它们的方式。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-05-24T21:22:51.217

要显示您的 YouTube 频道最新视频的缩略图库，您可以使用 iframe：

```
<iframe
    onload="javascript:this.style.height = this.contentWindow.document.body.scrollHeight + 'px';"
    scrolling="no"
    height="600"
    marginheight="0"
    frameborder="0"
    width="480"
    src="http://youtubechannelembed.com/gallery.php?vids=9&user=doitfordummies&row=3&width=150&margin_right=15&desc=100&title=30&views=1&likes=1&dislikes=1&fav=1">
</iframe> 
```

# mysql - 涉及三个表的 SQL“不在”查询

> ID：12040184
> 
> 赞同：1
> 
> 时间：2012-08-20T15:04:59.503
> 
> 标签：mysql, join

我有三个表，产品、类别和 product_to_category。产品具有主键product_id、类别category_id和product_to_category p2c_id。Product_to_ category 使用它们各自的 ID 以多对多关系将产品链接到类别。

基本上我想编写一个查询，从类别表中不存在的类别中选择所有产品。这是由于产品从另一个数据库迁移而来。

我有这样的东西，但有点失落。

```
SELECT * 
FROM product AS p 
LEFT JOIN product_to_category AS p2c ON p.product_id = p2c.product_id 
LEFT JOIN category AS c ON c.category_id 
```

基本上这就是我所得到的。我需要将类别表加入到 product_to_category category_id 不在类别表中的 product_to_category 表中。我可能完全走错了路，但被卡住了！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:10:04.553

如果您正在寻找不存在的类别的产品，我建议

```
Select p.*,p2c.category_id
  from product p
  join product_to_category p2c
    on p.product_id=p2c.product_id
  left outer join category c
    on p2c.category_id=c.category_id
where c.category_id is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:10:20.360

```
 SELECT p.*
     FROM product AS p
LEFT JOIN product_to_category AS p2c ON p.product_id = p2c.product_id
    WHERE NOT EXISTS (
          SELECT 1
            FROM category c
           WHERE c.category_id = p2c.category_id
    ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:36:01.407

假设：产品可以是存在的类别、不存在的类别或根本没有类别的一部分。您根本没有要求不属于任何类别的产品，因此从 product 到 procduct_to_category 的第一个 LEFT JOIN 应该是 INNER JOIN。

警告：我对 mysql 生疏了，所以我使用 SQL SERVER 语法。我忘记了 mysql 是否有 ON 子句或对 JOIN 使用 where 子句。如果不支持 ON 子句，则将其更改为 WHERE 子句。

有两种常见的方法：OUTER JOIN 或 NOT IN 子句（或 NOT EXISTS 子句，它的性能通常与 NOT IN 子句相同。）

1.  外连接

    选择 p.*, p2c.category_id

    从产品 p

    INNER JOIN product_to_category p2c ON (p.product_id = p2c.product_id)

    LEFT JOIN category c ON p2c.category_id = c.category_id

    其中 c.category_id 为 NULL

对 null 的测试将找到不匹配的记录。

1.  NOT IN 子句

    选择 p.*, p2c.category_id

    来自产品 p

    INNER JOIN product_to_category p2c ON (p.product_id = p2c.product_id)

    WHERE p2c.category_id NOT IN（从类别 c 中选择 c.category_id）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:09:34.977

```
SELECT * 
FROM product AS p 
JOIN product_to_category AS p2c ON p.product_id = p2c.product_id  
JOIN category AS c ON c.category_id != as.category. 
```

尝试这个？

# c# - 将 DataTable 存储到 SQL Server 列

> ID：12040185
> 
> 赞同：3
> 
> 时间：2012-08-20T15:05:14.030
> 
> 标签：c#, asp.net, sql-server

我正在尝试将 a 存储`DataTable`到 SQL Server 表中的单个列中。这背后的想法是用户运行 SQL 命令并将返回的输出存储到数据表中，然后我希望将该数据表存储到 SQL Server 日志记录表中。稍后我希望能够检索整个数据表以显示在日志记录 aspx 页面上。

目前我只是将它存储为一个大字符串，但这并没有给我列标题，而且格式有点时髦而且效率低下。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:06:31.183

如果我打算做你想做的事情，我可能会将数据表转换为 XML 并将其存储为 XML 字段类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:07:21.297

你好，你可以试试`WriteXml`

此链接为您提供示例 interessant：http: [//msdn.microsoft.com/fr-fr/library/system.data.datatable.writexml.aspx](http://msdn.microsoft.com/fr-fr/library/system.data.datatable.writexml.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:13:03.990

另一个想法是在您的数据库中创建两个表。它有点复杂。

一个表包含两列，我们将表命名为 PTable。

**列：**

`ID and ColumnID` ID 是主键，ColumnID 包含数据表中列的名称

创建此表后，创建另一个表。它将由三个字段组成。让它命名为稳定。此表存储您数据表的列。

**列：**

`stblID, PtblID and PtColumnID` StbID是这个表的主键，PtblID是PTable的主键，PtColumnID是PTable的ColumnID。该表存储表的行。现在将数据存储在此表中，并在需要时接收数据。

最简单的想法是在您的数据库中创建一个具有 xml 列的表，并将您的数据表存储为 xml。

# c# - 图像按钮中的顶部和底部偏移未更新

> ID：12040193
> 
> 赞同：1
> 
> 时间：2012-08-20T15:05:52.310
> 
> 标签：c#, xamarin.android

我正在创建一个动态图像按钮控件。下面是我的代码。

```
 var deleteButton = new ImageButton(context);
           deleteButton.SetImageResource(Resource.Drawable.Delete); 
           deleteButton.SetPadding(0, 0, 0, 0);
           deleteButton.OffsetTopAndBottom(-5);
           deleteButton.Layout(0, 0, 16, 16);
           deleteButton.SetMaxHeight(16); 
           //deleteButton.LayoutParameters.Height = 16; 
           inner.AddView(deleteButton); 
```

以下都不是使图像按钮大小成为图像大小。

```
Offsettopandbottom 
Setmaxheight 
layout (l,t,r,b) 
```

请参考我正在使用的附加图像和按钮输出的屏幕截图。按钮是矩形的。它有顶部和底部偏移。我怎样才能删除那些。请帮忙。

删除图像 (16x16) - ![删除图片](../Images/6e71dacd7c8a3a33a9a4aaa3d84420ea.png)

截屏 - ![截屏](../Images/22f4a50f433d57188ea0a22c9118ded4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:11:11.930

您可以在 xml 中设置不同的按钮背景可绘制：

```
<ImageButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/cross"
    android:background="@android:drawable/btn_default_small"/> 
```

或在代码中：

```
deleteButton.SetBackgroundResource(Android.Resource.Drawable.ButtonDefaultSmall); 
```

不会有抵消。

# r - 较长的物体长度不是较短物体长度的倍数吗？

> ID：12040197
> 
> 赞同：20
> 
> 时间：2010-08-03T09:14:22.303
> 
> 标签：r, xts

我不明白为什么 R 会警告我“更长的对象长度不是更短的对象长度的倍数”

我有这个对象，它是通过对 xts 系列进行聚合生成的，给出工作日中位数：

```
u <- aggregate(d, list(Ukedag = format(index(d),"%w")), median)

1 314.0
2 282.5
3 270.0
4 267.0
5 240.5 
```

然后我尝试将它应用到我原来的 xts 系列中，看起来像这样（只有更长的时间）

```
head(d)
2009-01-02 116
2009-01-05 256
2009-01-06 286 
```

使用：

```
coredata(d) <- coredat(d) - u[format(index(d),"%w")]; 
```

这会导致警告。

目的是减去工作日平均值。尽管有警告，它似乎仍然有效，但我应该担心什么？

## 修改后的解决方案：尝试 2

```
apply.daily(d, function(x) coredata(x) - u[format(index(x), "%w")] ) 
```

我确实有一个严重的错误。这不会给出任何警告，我通过以下方式对其进行了测试：

```
apply.daily(d, function(x) u[format(index(x), "%w")] ) 
```

然后检查一些日期，它似乎与日历一致。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2010-08-03T09:24:24.087

是的，这是您应该担心的事情。使用 nrow() 检查对象的长度。R 可以自动复制对象，以便它们在不同时具有相同的长度，这意味着您可能正在对不匹配的数据执行操作。

在这种情况下，您有一个明显的缺陷，即从原始数据中减去聚合数据。这些肯定会有不同的长度。我建议您将它们合并为时间序列（使用日期），然后 locf()，然后进行减法。否则，通过将原始日期截断为与聚合系列相同的间隔来合并它们。只是要非常小心，不要放弃观察。

最后，作为开始时的一些一般建议：查看计算结果，看看它们是否有意义。您甚至可以将它们拉入电子表格并复制结果。

# python - 用 Python 在两个元组中查找对应项

> ID：12040199
> 
> 赞同：2
> 
> 时间：2012-08-20T15:06:12.730
> 
> 标签：python, python-3.x, tuples

我有一个包含数据的元组列表，以及另一个包含一些标题信息的相应元组。基于标题，我想从列表中的给定元素中提取特定值。例子：

```
>>> hdr = ("a", "b", "c", "d", "e")
>>> elt = (1, 2, 3, 4, 5)
>>> my_func(elt, "c")
3 
```

这里的关键是我提前知道标题名称，但不知道它们在标题元组中的位置。找到`elt`对应于`"c"`in的值的最简单方法是什么`hdr`？我正在使用 Python 3.2。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T15:07:50.043

最简单？

```
dict(zip(hdr, elt))["c"] 
```

另一种选择是：

```
elt[hdr.index("c")] 
```

`dict`但是，如果您进行重复搜索，则构建（根据第一个建议）会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:09:19.297

`.index`方法呢？

```
hdr.index("c") + 1 
```

# objective-c - 越狱ios中的USB检测

> ID：12040200
> 
> 赞同：1
> 
> 时间：2012-08-20T15:06:13.987
> 
> 标签：objective-c, ios, usb, daemon, jailbreak

我目前正在尝试在越狱 ios 设备上开发守护程序，并且正在寻找一种方法来检测该设备是否连接到 USB。是否有任何 plist 或其他我可以监控来检查 USB 的东西？如果没有，有没有办法在 ios 设备上使用 4.3 sdk 编译 GCC 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:37:36.173

您实际上可以使用公共 API 来做到这一点。请参阅[有关堆栈溢出的此答案](https://stackoverflow.com/a/7924384/119114)。

请注意，您可能需要检查电池状态是**Charging**还是**Full**。两者都意味着电缆已插入。

此外，如果您从 Cydia 下载`notificationWatcher`实用程序（**Erica Utilities**的一部分），并在越狱的 iPhone（通过 Wifi 和 SSH 连接）上运行它，当您连接/断开 USB 电缆时，您将在控制台上看到：

> 截获通知：com.apple.springboard.fullycharged
> 
> 截获通知：com.apple.springboard.pluggedin
> 
> 截获通知：com.apple.springboard.fullycharged

因此，我猜您可以通过以下两种方式之一注册通知：

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled: YES];
[[NSNotificationCenter defaultCenter] addObserver: self 
                                         selector: @selector(batteryStatus) 
                                             name: UIDeviceBatteryStateDidChangeNotification 
                                           object: nil]; 
```

或者，使用 Core Foundation 通知：

```
CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                NULL, // observer
                                plugStatus, // callback
                                CFSTR("com.apple.springboard.pluggedin"), // name
                                NULL, // object
                                CFNotificationSuspensionBehaviorHold); 
```

然后回调函数可以是：

```
- (void) batteryStatus {
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle: @"batteryStatus" message: @"battery" delegate: self cancelButtonTitle: @"Ok" otherButtonTitles: nil];
    [alert show];
}

static void plugStatus(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo) {
    UIAlertView* alert = [[UIAlertView alloc] initWithTitle: @"plugStatus" message: @"plug" delegate: nil cancelButtonTitle: @"Ok" otherButtonTitles: nil];
    [alert show];
    if (userInfo != nil) {
        CFShow(userInfo);
    }
} 
```

`com.apple.springboard.pluggedin`**在插入或**拔出电缆时发送。

# cuda - 具有不同数组大小的 Cuda 内核

> ID：12040203
> 
> 赞同：-1
> 
> 时间：2012-08-20T15:06:19.640
> 
> 标签：cuda

我正在处理 cuda 中的流体动力学问题并发现了这样的问题

如果我有一个数组，例如长度为 600 的 debug_array 和一个长度为 100 的数组 value_array 我想做某事

```
for(int i=0;i<6;i++)
{
   debug_array[6*(bx*block_size+tx)+i] = value_array[bx*block_size+tx];
} 
```

在此示例中，block_size 将基于 100 个元素的数组，例如 4 个块 block_size 25

如果 value_array 包含例如 10;20;30;..... 我希望 debug_array 有 6 个类似值的组，例如 10;10;10;10;10;10;20;20;20;20;20;20 ;30......
问题是它没有从值数组中获取所有值，知道为什么这不起作用或一个好的解决方法。

如果我定义 float val = value_array[bx*block_size+tx]; 在 for 循环之外并将其保持在循环内 debug_array[bx*block_size+tx+i] = val;

但我想避免这种情况，因为我的内核在循环中有 5 到 10 个设备函数，这使得它很难阅读。

提前感谢任何建议

马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:39:13.383

计算索引似乎有错误：

假设 debug_array`bx = 0`中`tx = 0` 的前 6 个元素将填充数据。

下一个线程：：`tx = 1`元素 1 到 7 将填充数据（覆盖现有数据）。由于线程并行工作，因此无法确定首先调度哪个线程，因此无法确定哪些值将写入 debug_array。

你应该写：

```
 debug_array[6*(bx*block_size+tx)+i] = value_array[bx*block_size+tx]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:55:45.620

如果更改代码以将 value_array 表达式移出循环并放入临时变量使代码工作 - 这是您所做的唯一代码更改 - 那么这闻起来像编译器错误。

尝试更改您的 nvcc 编译器选项以减少或禁用优化，并查看循环内的 value_array 表达式是否会改变行为。此外，请确保您使用的是最新的 CUDA 工具。

优化编译器通常会尝试将不依赖于循环索引变量的表达式移出循环，就像您的手动解决方法一样。它被称为“不变代码运动”，它通过减少循环的每次迭代中执行的代码量来加快循环速度。如果从循环中手动提取不变代码是可行的，但让编译器自己解决它却不行，那么就会对编译器产生怀疑。

# c# - 从 .vdproj 文件生成 .msi 文件？

> ID：12040204
> 
> 赞同：-2
> 
> 时间：2012-08-20T15:06:21.560
> 
> 标签：c#

在我的源代码中，我有 sample.vdproj 文件。但在指导方针中，他们要求构建 sample.msi.how 从 .vdproj 文件生成 .msi 文件？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:09:52.027

`devenv.exe`针对您的 vdproj运行：

```
devenv.exe /build Release_or_other_conf yourfile.vdproj 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:10:08.173

根据`vdproj`文件的类型，构建它将生成[安装包](http://en.wikipedia.org/wiki/Windows_Installer)(MSI) 或[合并模块](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369820.aspx)(MSM)。

因此，尝试在 Visual Studio 中构建它并检查其输出目录。有关概述，请参阅MSDN 上的[设置和部署项目。](http://msdn.microsoft.com/en-us/library/wx3b589t.aspx)

# java - Eclipse UI：TableWrapLayout 中的部分标题

> ID：12040211
> 
> 赞同：3
> 
> 时间：2012-08-20T15:06:41.530
> 
> 标签：java, layout, swt, eclipse-rcp, jface

我在编辑器中有两个部分，它们使用`TableWrapLayout`. 正如您在下面的屏幕截图中看到的，右侧部分的标题没有使用全宽。展开时，部分的标题和内容都使用全宽。当该部分再次关闭时，它会保持这种状态。所以问题只有在打开编辑器时才会出现。

那么，如何让部分部分使用全宽？我已经将`grabHorizontal`TableWrapData 的属性设置为`true`并`GridData.FILL_HORIZONTAL`在底层复合材料上使用。

当然，立即将该部分设置为展开可以解决问题，但我希望最初将其关闭，因为加载该部分的内容会导致一些繁重的后端工作，因此会导致编辑器的加载时间更长。

![编辑](../Images/66e291c74e363d3a472f32ef2f096975.png)

编辑器代码：

```
public void createPartControl(Composite parent) {
    toolkit = new FormToolkit(parent.getDisplay());

    form = toolkit.createScrolledForm(parent);
    form.setLayoutData(new GridData(GridData.FILL_BOTH));

    toolkit.decorateFormHeading(form.getForm());

    TableWrapLayout layout = new TableWrapLayout();
    layout.numColumns = 2;
    form.getBody().setLayout(layout);

    createMetaInfoSection();
    createUpdateDocumentSection();  
}

private void createMetaInfoSection() {
    Section metaInfoSection = toolkit.createSection(form.getBody(), Section.DESCRIPTION | Section.TITLE_BAR | Section.TWISTIE | Section.EXPANDED);
    TableWrapData twd = new TableWrapData();
    twd.grabHorizontal = true;
    twd.colspan = 1;
    metaInfoSection.setLayoutData(twd);

    // Composite
    Composite composite = toolkit.createComposite(metaInfoSection);
    GridLayout gridLayout = new GridLayout();
    composite.setLayout(gridLayout);
    composite.setLayoutData(new GridData(GridData.FILL_BOTH));

    // Content
    ...

    metaInfoSection.setClient(composite);
}

private void createUpdateDocumentSection() {
    Section updateDocumentSection = toolkit.createSection(form.getBody(), Section.DESCRIPTION | Section.TITLE_BAR | Section.TWISTIE | Section.EXPANDED);
    TableWrapData twd = new TableWrapData();
    twd.grabHorizontal = true;
    twd.colspan = 1;
    updateDocumentSection.setLayoutData(twd);

    // Composite
    Composite composite = toolkit.createComposite(updateDocumentSection);
    GridLayout gridLayout = new GridLayout();
    composite.setLayout(gridLayout);
    composite.setLayoutData(new GridData(GridData.FILL_BOTH));

    // Content
    ...

    updateDocumentSection.setClient(composite);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:41:46.543

试试这个

```
TableWrapData twd = new TableWrapData(TableWrapData.FILL_GRAB); 
```

# c++ - 混合来自不同编译器的 C++ 代码

> ID：12040214
> 
> 赞同：15
> 
> 时间：2012-08-20T15:06:56.883
> 
> 标签：c++, c, windows, swig

假设我有两个想要链接在一起的项目：

*   使用 Visual C++ 编译为 DLL 文件的 C++ 库。
*   使用库中的类使用 C++ Builder 编译的 C++ 可执行文件。

我意识到没有标准的 C++ ABI，任何将这两个 C++ 项目直接链接在一起的尝试都会失败。创建允许我完成此任务的兼容层的良好自动化方法是什么？

例如，可以想象 C++ 库可以通过 C 接口公开自己。然后可执行文件将包含一些 C++ 类，这些类包装了 C++ 库公开的 C 接口。由于 C 有*一个*标准的 ABI，所以它可以工作。

唯一的问题是如何自动创建 C 接口和 C++ 包装类 - 手动维护这不是一个选项。SWIG 项目看起来很有希望，但不幸的是，C++ 并不是 SWIG 在其网站上列出的出口之一。有没有办法用 SWIG 做我想做的事？或者除了 SWIG 之外还有其他项目可以帮助我完成这项任务吗？

还是我以错误的方式解决这个问题？

**编辑：** 核心 C++ 库旨在跨平台。显然，可执行文件是特定于 Windows 的。我不想将核心库污染到无法在其他平台上编译的程度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:17:23.867

如果它只需要在 Windows 上运行，我会将类公开为 COM 对象。它们仍将位于 DLL 中，并且可以被*任何*能够理解 COM 的语言使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T15:37:49.647

在 Windows 中执行此操作的“标准”方式是使用 COM 对象。因此，这当然是一个不错的选择。在Linux 系统中，模块交互模型（例如，可执行-DLL 交互）非常不同，并且存在用于C++ 的ABI。

如果您想手动执行此操作（创建您自己的类似 COM 的库），可能需要认真对待许多棘手的小问题。你需要一个跨模块的 RTTI 系统，你需要一个接口查询/定义协议，一些跨模块管理内存的机制等等。除此之外，为了“自动化”它，你可能需要 MACRO 和模板元函数。

我强烈建议您考虑或至少查看的一种跨平台选项是使用 Boost.Python 和 Python 语言作为模块之间的“粘合剂”。Boost.Python 库基本上完成了整个“类的自动导出/导入”，但它将您的 C++ 类和函数导出为 Python 类和函数。而且，它是完全非侵入式和跨平台的，因此这确实是自动导出的理想示例。因此，您可能会考虑使用 Python 编写高级粘合代码，或者使用 Python 作为 C++ 模块之间的中间体，或者甚至重新设计 Boost.Python 库以仅使用“自动导出”机制来导出到任何接口您设计或使用的系统。

我敢肯定那里还有很多其他类似的库。但第一个问题当然是，你真的需要这个吗？您可能正在使用火箭筒杀死苍蝇。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:37:23.693

为什么不直接用 C++ builder 编译这个库呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:39:30.833

环顾 swig（我知道 swig 应该能够在 C 中包装 C++）： [SWIG 和 C++](http://www.swig.org/Doc1.3/SWIGPlus.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T16:03:59.730

如果核心库是跨平台的，为什么不将 UI 编写为跨平台 Qt 应用程序并在 Windows 上使用 Visual C++ 构建所有内容。

# asp.net - ASPX 页面中“for”循环内的 Databinder

> ID：12040215
> 
> 赞同：0
> 
> 时间：2012-08-20T15:06:58.893
> 
> 标签：asp.net, vb.net, repeater, databinder

我仍在尝试了解如何利用 DataBinder（[有没有办法使用 DataBinder.Eval 语句作为 ASPX 页面中特定数组的索引？](https://stackoverflow.com/questions/12006141/is-there-a-way-to-use-a-databinder-eval-statement-as-an-index-of-a-specific-arra)）。

我目前正在中继器的帮助下构建表格，我想使用一个动态定义 Item 标签的循环，以允许更多交互。

目前，此测试代码正在运行：

```
<asp:Repeater id="Fish" runat="server">
<table>
<ItemTemplate>
  <tr>
    <td><%# Container.DataItem("ITEM")%></td>
    <td><%# Container.DataItem("AGG")%></td>
  </tr>
</ItemTemplate>
</table>
</asp:Repeater> 
```

但正如您可以想象的那样，这种类型的结构不允许从要忽略的列中动态选择要显示的列。

我在想，通过使用“for”循环结构，我可以动态选择可以显示哪一列。我试过这个作为测试：

```
Public Test_id() As String
Public Test_idp As String

<% Test_id = New String() {"id", "Agg"} %>
<asp:Repeater id="Fish" runat="server">
<table>
<ItemTemplate>
  <tr>
    <% For Each Test_idp as String In Test_id%>
      <td><%# Container.DataItem(Test_idp)%></td>
    <% Next Test_idp%>
  </tr>
</ItemTemplate>
</table>
</asp:Repeater> 
```

这不起作用...并由以下错误消息授予：

> 重载解析失败，因为没有公共“项目”对这些参数最具体：
> 
> 'Public Overrides ReadOnly Property Item(name As String) As System.Object'：不是最具体的。
> 
> 'Public Overrides ReadOnly Property Item(i As Integer) As System.Object'：不是最具体的。

任何想法？

* * *

编辑：

为了回答 Mike C 的问题，我尝试`DataBinder.Eval(Container.DataItem, Test_idp)`了而不是`Container.DataItem(Test_idp)`. 它仍然不起作用，但错误不同：

> System.ArgumentNullException：值不能为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:09:21.013

`Test_Idp`是一个`Object`（因为没有另外声明）。

因此，编译器无法确定要调用哪些重载。

您需要明确声明它`As String`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:17:19.070

您可以对列使用嵌套的中继器。

```
<asp:Repeater id="Fish" runat="server">
<table>
<ItemTemplate>
  <tr>
    <asp:Repeater id="columns" runat="server">
        <ItemTemplate>
          <td><%# ((RepeaterItem)Container.Parent.Parent).DataItem("ITEM")%></td>
          <td><%# ((RepeaterItem)Container.Parent.Parent).DataItem("AGG")%></td>
        </ItemTemplate>
    </asp:Repeater> 
  </tr>
</ItemTemplate>
</table>
</asp:Repeater> 
```

# java - java 7中稀疏文件的含义是什么？

> ID：12040216
> 
> 赞同：6
> 
> 时间：2012-08-20T15:07:02.607
> 
> 标签：java, java-7

在 java 7 OpenOption "SPARSE" 中提示新创建的文件将是稀疏的。这意味着什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:11:39.853

稀疏文件是这样一种文件，其中文件的全为零的连续部分可能不会被分配磁盘块。如果您打算创建一个包含大“洞”的文件，这是一种节省磁盘空间的方法。有关更多背景信息，请参阅此 Wikipedia 文章 - [http://en.wikipedia.org/wiki/Sparse_file](http://en.wikipedia.org/wiki/Sparse_file)

正如 Joachim 所指出的，许多操作系统上的多种文件系统都支持稀疏文件，并且已经这样做了很多年。Java 7 只是让 Java 应用程序可以使用此功能......在可用的情况下。

# c# - 为什么第一次后在 TabControl 上设置 DataContext 会变慢？

> ID：12040218
> 
> 赞同：1
> 
> 时间：2012-08-20T15:07:13.323
> 
> 标签：c#, wpf, tabcontrol, datacontext

我有一个带有多个 TabItem 的 TabControl，这些 TabItem 显示了 Person 对象的不同方面。我在代码隐藏中将 TabControl 的 DataContext 设置为 Person 对象。我第一次这样做时，显示信息大约需要 2-3 秒。第一次之后，选择不同的 Person 记录并设置 DataContext 大约需要 25 秒。任何想法为什么第二次和随后的时间需要这么长时间，以及如何解决这个问题？

xml:

```
<TabControl x:Name="MyTabControl">
    <TabItem>
        <...controls databound to various properties of a Person object...>
    </TabItem>
</TabControl> 
```

代码隐藏：

```
Person person = SelectedPerson;
MyTabControl.DataContext = person; 
```

# android - 打开一个立即调用另一个活动的活动：我不希望看到第一个活动

> ID：12040232
> 
> 赞同：0
> 
> 时间：2012-08-20T15:08:23.857
> 
> 标签：android

我有一个带有主菜单的应用程序可以访问多个选项。这些选项之一是主要选项（列出任务）。此应用程序有一个与帐户一起使用的登录系统。

我想要类似 WhatsApp 的东西。在 WhatsApp 中，当您单击通知时会显示对话，当您关闭该对话时，会显示包含所有对话的活动。我想要这样，当您打开应用程序时，会显示 List Tasks 活动，当您关闭此活动时，您会看到主菜单。为此，我让 MainMenuActivity 在创建后立即调用 TaskListActivity。

当我打开应用程序并登录时，这工作正常，用户没有看到打开了两个活动，似乎 TaskListActivity 是唯一打开的一个。但是，如果我在登录时（从 AccountAuthenticatorActivity）执行此操作，则会显示 MainMenuActivity 半秒，然后显示 TaskListActivity。

我该如何解决？我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:03:56.877

在 onCreate() 中执行您需要做的事情（但不要调用 setContentView() - 这将毫无意义），触发新意图以调用另一个活动，然后调用 finish() 以在结束时终止您的“过渡”活动它的 onCreate(); 瞧；）

# javascript - 如何在使用 javascript 生成的锚标记上添加 onclick 事件？

> ID：12040235
> 
> 赞同：0
> 
> 时间：2012-08-20T15:08:29.950
> 
> 标签：javascript

我只使用 javascript，而不是 jQuery 或没有其他 javascript 框架。

我创建了一个锚标记，例如：

```
var _a = document.createElement('a'); 
```

现在我想为这个标签添加 onclick。我试过以下：

```
_a.onclick = function(){ mycode(id); } 
```

该函数适用于此，但锚标签是在循环中创建的……所以`mycode(id)`总是取循环的最后一个值。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:12:05.443

可能您需要一个函数来创建您的处理程序，如下所示：

```
function createHandler( id ) {
  return function(){ mycode( id ); };
} 
```

然后在循环内分配

```
for ( i= ... ) {
   _a.onclick = createHandler( i );
} 
```

另一方面，您可能应该使用`addEventListener()`（[MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)）向元素添加事件：

```
_a.addEventListener( 'click', createHandler( i ) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:12:10.557

```
for(var id = 0; id < 10; id++){
    var _a = document.createElement('a');
    _a.onclick = (function(id){
        return function (){
            mycode(id);
        }
    })(id);
} 
```

那应该解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:11:52.010

尝试以下：

```
_a.onclick = (function(id){return function(){ mycode(id); }})(id); 
```

# python - 如何使用python删除每n行csv文件的特定列

> ID：12040236
> 
> 赞同：0
> 
> 时间：2012-08-20T15:08:32.460
> 
> 标签：python, csv

我将 sqlite 3 查询的结果写入 csv 文件，例如：

```
2221,5560081.75998,7487177.66,237.227573347,0.0,5.0,0.0
2069,5559223.00998,7486978.53,237.245992308,0.0,5.0,0.0
10001,5560080.63053,7487182.53076,237.227573347,0.0,5.0,0.0
1,50.1697105444,20.8112828879,214.965341376,5.0,-5.0,0.0
2,50.1697072935,20.8113209177,214.936598128,5.0,-5.0,0.0
10002,50.1697459029,20.8113995467,214.936598128,5.0,-5.0,0.0
1,50.1697105444,20.8112828879,214.965341376,-5.0,-5.0,0.0
2,50.1697072935,20.8113209177,214.936598128,-5.0,-5.0,0.0
10003,50.1697577958,20.8112608051,214.936598128,-5.0,-5.0,0.0 
```

我的第一个一般性问题是如何用 python 选择每第 n 行 csv 或 txt 文件？

而我的具体问题是如何删除每两行 csv 文件的最后三列，而每三行保持不变？输出将是：

```
2221,5560081.75998,7487177.66,237.227573347
2069,5559223.00998,7486978.53,237.245992308
10001,5560080.63053,7487182.53076,237.227573347,0.0,5.0,0.0
1,50.1697105444,20.8112828879,214.965341376
2,50.1697072935,20.8113209177,214.936598128
10002,50.1697459029,20.8113995467,214.936598128,5.0,-5.0,0.0
1,50.1697105444,20.8112828879,214.965341376
2,50.1697072935,20.8113209177,214.936598128
10003,50.1697577958,20.8112608051,214.936598128,-5.0,-5.0,0.0 
```

我已经尝试过：

```
fi = open('file.csv','r')
for i, row in enumerate(csv.reader(fi, delimiter=',', skipinitialspace=True)):
    if i % 3 == 2:
        print row[0:]
    else:
        print row[0], row[1], row[2], row[3] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:19:36.010

要检索第 n 行，最容易迭代，但您可以使用[行缓存模块](http://docs.python.org/library/linecache.html)来获取它。

要回答另一部分，假设您想要一个具有所需质量的新 csv 文件：

```
my_file = []
with open('file.csv','r') as fi:
    for i, row in enumerate(csv.reader(fi, delimiter=',', skipinitialspace=True)):
         if i % 3 == 2:
             my_file.append(row)
         else:
             my_file.append(row[:-3])

#if you want to save a new csv file
with open('new_file.csv', 'wb') as new_fi:
    new_fi_writer = csv.writer(new_fi, delimiter=', ')
    for line in my_file:
        new_fi_writer.writerow(line)

#alternatively (if you just want to print the lines)
for line in my_file:
    print ' '.join(line) 
```

# mysql - 在 RoR 中以惯用的方式连接到外部数据库？

> ID：12040238
> 
> 赞同：1
> 
> 时间：2012-08-20T15:08:44.753
> 
> 标签：mysql, ruby-on-rails

我正在创建一个 RoR 应用程序，需要连接到我公司的 MySQL 数据库（它本身与此应用程序无关）以收集一些数据并通过 RoR 应用程序报告。连接到该数据库的惯用方式是什么？我将只运行一些相当精简`select`的查询，但它们通常涉及表连接。我应该通过这不是 RoR 应用程序来连接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:18:06.400

如果您的查询主要绑定到单个表或仅使用几个连接，您实际上可以为它们定义模型。似乎允许 ActiveRecord 对它们进行操作可能是在 Rails 中执行此操作的最惯用的方法。

首先，在您的`database.yml`

```
class ExternalDbTable
  # Connect to the db
  establish_connection :connx_from_database_yml

  # Define table if this query is bound to a single table
  set_table_name 'ext_db_table'
  set_primary_key 'pk_column'
end 
```

从那里，您可以`named_scope`像使用 Rails 模型一样定义 s 并基本上享受 ActiveRecord 的所有好处。如果您不必访问外部数据库上的多个表，则可以为每个表创建模型并`has_many/belongs_to`像在 ActiveRecord 中通常那样定义关系。但是，如果它是大量表，并且您有能力在外部数据库上创建视图，则可以创建一个指向该视图的模型，该视图为您执行连接。然后`named_scope`根据需要针对视图定义 s。

# c# - 在 Outlook 加载项中发送时保存电子邮件

> ID：12040239
> 
> 赞同：2
> 
> 时间：2012-08-20T15:08:49.993
> 
> 标签：c#, outlook, outlook-addin

我正在制作 Outlook 加载项（Visual Studio 2010、.NET 4.0、C#），我想在用户发送电子邮件后自动存档。到目前为止，我有以下内容：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
   //Create an event handler for when items are sent
   Application.ItemSend += new ApplicationEvents_11_ItemSendEventHandler(saveEmail);
}

private void saveEmail(object Item, ref bool Cancel)
{
} 
```

我通过调试发现，我的 saveEmail 方法在电子邮件实际发送之前立即启动。没关系，理想情况下，我希望在成功发送电子邮件后立即将其启动，因此，如果有办法做到这一点，我将不胜感激。

在任何情况下，我都可以进入该方法，我想做的是将该电子邮件作为 Outlook.MailItem 对象访问，并使用我选择的任何参数的 .SaveAs 方法。我将如何将当前打开和即将发送的电子邮件作为 MailItem 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:35:18.580

您可以尝试使用此代码

```
private void saveEmail(object Item, ref bool Cancel)
{
         var msg = Item as Outlook.MailItem;
         msg.SaveAs(yourPath, Outlook.OlSaveAsType.olMSG);
} 
```

# r - 在 R heatmap() 函数中增加行高

> ID：12040240
> 
> 赞同：6
> 
> 时间：2011-02-14T06:03:25.210
> 
> 标签：r, data-visualization

我有一个包含数百行和数十列的矩阵，并希望绘制热图。如果我使用原生 R 函数：

```
heatmap(matrix(sample(1:10000),nrow=1000,ncol=10)) 
```

我得到一个行标题难以辨认的数字。我假设生成的图像与当前绘图设备的规格相匹配。我想控制行的高度，即使这不能显示在我当前的设备上。简单地写入一个高 PNG 只会在图像上方/下方添加空白：

```
png( '/looks_the_same_with_whitespace.png', width=500, height=1500)
heatmap(matrix(sample(1:10000),nrow=1000,ncol=10))
dev.off() 
```

有没有一种干净的方法可以做到这一点，也许是通过欺骗 R 以为我有一个非常高的显示器？来自受良好支持的库的函数也是一个很好的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-02-14T06:34:36.140

前段时间，我也遇到了同样的问题。`heatmap.2`包中的函数`gplots`解决了这个问题。但是，我不太明白查看这么多基因（或 rowlabs）有什么好处。但正如你所问的那样，你会做这样的事情：关键是改变热图的`layout`（参见？heatmap.2，？layout），它在绘图设备上的 2x2 网格上绘制热图（？layout 中的示例更好地解释了这一点）。之后，您可能希望通过相应更改来更改`cex`of 。您的情况可能需要对这些值进行一些调整才能获得所需的结果。`rowlabs``cexRow`

```
library(gplots)

row.scaled.expr <- matrix(sample(1:10000),nrow=1000,ncol=10)

png( 'heatmap_without_whitespace_smaller_row_lab.png', width=500, height=1500)
heatmap.2(row.scaled.expr, dendrogram ='row',
                 Colv=FALSE, col=greenred(800), 
                 key=FALSE, keysize=1.0, symkey=FALSE, density.info='none',
                 trace='none', colsep=1:10,
                 sepcolor='white', sepwidth=0.05,
                 scale="none",cexRow=0.2,cexCol=2,
                 labCol = colnames(row.scaled.expr),                 
                 hclustfun=function(c){hclust(c, method='mcquitty')},
                 lmat=rbind( c(0, 3), c(2,1), c(0,4) ), lhei=c(0.25, 4, 0.25 ),                 
                 )
dev.off() 
```

# r - 如何增加ggplot2中条形图中条形之间的空间？

> ID：12040245
> 
> 赞同：65
> 
> 时间：2011-01-13T00:26:45.187
> 
> 标签：r, ggplot2

如何增加[ggplot2](http://had.co.nz/ggplot2/)条形图中条形之间的空间？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2011-01-13T08:16:00.253

您可以随时使用`width`参数，如下所示：

```
df <- data.frame(x=factor(LETTERS[1:4]), y=sample(1:100, 4))
library(ggplot2)
ggplot(data=df, aes(x=x, y=y, width=.5)) + 
  geom_bar(stat="identity", position="identity") +
  opts(title="width = .5") + labs(x="", y="") +
  theme_bw() 
```

与以下其他设置进行比较`width`：

![替代文字](../Images/95b3f7cc664b874ab2a23939fc0722c2.png)

到目前为止，一切都很好。现在，假设我们有两个因素。如果您想使用均匀间隔的并列条（例如与in`space`一起使用时），使用起来并不容易：您可以更改条宽，但不能在相邻条之间添加空间（我没有找到方便的谷歌上的解决方案）。我最终得到了类似的东西：`beside=TRUE``barplot()``geom_bar(position="dodge")`

```
df <- data.frame(g=gl(2, 1, labels=letters[1:2]), y=sample(1:100, 4))
x.seq <- c(1,2,4,5)
ggplot(data=transform(df, x=x.seq), aes(x=x, y=y, width=.85)) +
  geom_bar(stat="identity", aes(fill=g)) + labs(x="", y="") + 
  scale_x_discrete(breaks = NA) + 
  geom_text(aes(x=c(sum(x.seq[1:2])/2, sum(x.seq[3:4])/2), y=0, 
                label=c("X","Y")), vjust=1.2, size=8) 
```

用于 $x$ 轴的向量在 data.frame 中“注入”，因此您可以根据需要更改外部间距，同时`width`允许控制内部间距。$x$-axis 的标签可以通过使用`scale_x_discrete()`.

![替代文字](../Images/9369b65c052a1bc458fb83b000cd1d8a.png)

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-01-24T14:22:57.573

对于因子条之间的空间，请使用

```
ggplot(data = d, aes(x=X, y=Y, fill=F)) 
 + geom_bar(width = 0.8, position = position_dodge(width = 0.9)) 
```

geom_bar 中的宽度控制相对于 x 轴的条形宽度，而 position_dodge 中的宽度控制给定两个条形的空间宽度也相对于 x 轴。玩弄宽度以找到您喜欢的宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-24T10:48:38.320

非常感谢你！我有同样的问题，你帮我解决了。我没有使用 geom_text 添加 X-labels 我使用 scale_x_continuous （见下文）

```
geom_text(aes(x=c(sum(x.seq[1:2])/2, sum(x.seq[3:4])/2), y=0, 
            label=c("X","Y")), vjust=1.2, size=8) 
```

取而代之

```
scale_x_continuous(breaks=c(mean(x.seq[1:2]), mean(x.seq[3:4])), labels=c("X", "Y")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-29T13:33:57.587

对于 POSIXlt 条之间的空间，您需要根据一天中的秒数调整宽度

```
# POSIXlt example: full & half width
d <- data.frame(dates = strptime(paste(2016, "01", 1:10, sep = "-"), "%Y-%m-%d"),
            values = 1:10)

ggplot(d, aes(dates, values)) +
  geom_bar(stat = "identity", width = 60*60*24) 

ggplot(d, aes(dates, values)) +
  geom_bar(stat = "identity", width = 60*60*24*0.5) 
```

# java - jcombobox 弹出菜单

> ID：12040248
> 
> 赞同：2
> 
> 时间：2012-08-20T15:09:14.587
> 
> 标签：java, swing, jcombobox

我希望的是，当输入可编辑的**JCombobox时，** **JCombobox**的**弹出菜单**会自动出现，我这样做了，它起作用了。但是，当我更改**箭头按钮**的**图标**时，它不再起作用，如图所示******`JCombobox`******

 ******在更改**箭头按钮图标之前**

![在此处输入图像描述](../Images/47265b1a738f5b35a4ad29ec0be1e025.png)

更改**箭头按钮图标**后（弹出窗口永远不会出现，当一个人写在`JCombobox`）

![在此处输入图像描述](../Images/7b0a8c033e7381db7e94c5ecd941d943.png)

这就是我所做的：

```
JTextComponent editor;
/** Creates new form combo */
public combo() {
    initComponents();

    editor = (JTextComponent) jComboBox1.getEditor().getEditorComponent();
    jComboBox1.setEditable(true);

    editor.addKeyListener(new KeyAdapter() {
        @Override
        public void keyReleased(KeyEvent e) {

            char keyChar = e.getKeyChar();
            if (jComboBox1.isDisplayable()) 
            { 
                jComboBox1.setPopupVisible(true);    
            }
            editor.setCaretPosition(editor.getText().length());

            //  System.out.println("wwwweeeee"+keyChar);
        }
    });    

    jComboBox1.setUI(new SynthComboBoxUI() {
        protected JButton createArrowButton() {

            JButton btn = new JButton();
            btn.setIcon(new javax.swing.ImageIcon(getClass().getResource("/Image/error3.png")));            
            return btn;
        }
    });
} 
```

Pleeeese 帮助，因为我真的厌倦了寻找解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T07:50:21.753

这里的技术问题是编辑器是由 ui 创建/维护的。设置自定义 ui 时，它会被新的编辑器替换，因此您正在监听的组件不再是容器层次结构的一部分。

经过一番挖掘......我仍然没有解决方案:-(从表面上看，你会在编辑器上安装监听器*之前调用 setUI -***但是**调用 setUI*总是*错误的......所以根本不要。

看到 ui 是基于合成器的，更新其视觉前景/背景属性的正确方法是提供自定义画家，每个应用程序或每个实例。Nimbus 特别允许通过“Nimbus.Overrides”客户端属性安装每个实例的自定义 UIDefaults。为了更改箭头按钮上的图标，适当的覆盖将是

```
Painter core = // a custom painter which paints the icon 
comboDefaults.put("ComboBox:\"ComboBox.arrowButton\"[Enabled].foregroundPainter", core);
combo.putClientProperty("Nimbus.Overrides.InheritDefaults", false);
combo.putClientProperty("Nimbus.Overrides", comboDefaults); 
```

一切都很好，除了不工作 - 看起来覆盖没有正确安装在孩子身上。

**编辑 2**

... 几个小时以后 ...

从所有可用资源中，上述内容应该可以工作，请参阅[Jasper](http://www.jasperpotts.com/blog/2008/08/nimbus-uimanager-uidefaults/)对如何定义自定义属性的初步解释：

> ComponentA:ChildComponentB.foreground 允许您指定包含在 ComponentA 中的 ChildComponentB。

所以我怀疑这真的是一个错误。一个不太令人满意的解决方法是在按钮本身上安装覆盖：

```
JButton org = null;
for (int i = 0; i < combo.getComponentCount(); i++) {
    if (combo.getComponent(i) instanceof JButton) {
        org = (JButton) combo.getComponent(i);
        UIDefaults buttonDefaults = new UIDefaults();
        buttonDefaults.put("ComboBox:\"ComboBox.arrowButton\"[Enabled].foregroundPainter", painter);
        org.putClientProperty("Nimbus.Overrides.InheritDefaults", false);
        org.putClientProperty("Nimbus.Overrides", buttonDefaults);
        break;
    }
} 
```

这一点都不令人满意，因为按钮的创建是由 ui 委托控制的，所以这个配置不会在 LAF 切换后继续存在。或者反过来：您需要使用 UIManager 安装 PropertyChangeListener，并在检测到切换到 Nimbus 时，手动将覆盖从组合复制到其子项。******

# mysql - 如何缓存流行的查询以避免 stamedes 和空白结果

> ID：12040255
> 
> 赞同：0
> 
> 时间：2012-08-20T15:09:28.657
> 
> 标签：mysql, caching, memcached, gearman

在我们网站的可定制首页上，我们为用户提供了显示最近更新内容的模块的选项，从 100 多个模块中进行选择。

所有数据都是由 MySQL 查询生成的，其结果通过 memcached 进行缓存。我们当前的系统是这样工作的：当用户加载包含模块的页面时，模块会立即从缓存中为他们提供数据，并且查询被添加到队列中以由单独的 gearman 进程更新（这样页面加载不会不要等待mysql查询）。然后，该查询每 15 分钟运行一次以刷新缓存中的数据。查询队列本身会定期清除，这样我们就不会不断刷新最近未请求的数据。

问题是由于某种原因，当缓存为空时该怎么办。这种情况不会经常发生，但是当它发生时，当前会向用户显示一个空模块，并且在 gearman 进程中刷新数据，以便稍后，当相同（或不同）用户重新加载页面时，是要显示的数据。

我们的流量是这样的，如果我们试图在缓存为空时为用户实时运行查询，我们将遇到一个严重的标记问题——我们将多次运行相同（可能很慢）的查询许多用户加载了该页面。有没有什么办法可以解决“空白模块”的问题，又不造成踩踏风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:18:42.523

这是一个有趣的实现，尽管与最常见的在 MySQL 前面实现 memcached 的方式有所不同。

在大多数情况下，用户会将事情设置为首先在 memcached 评估查询的位置，以查看是否有可用条目。如果是这样，他们会从 memcached 中提供服务，并且根本不会查询数据库。如果缓存未命中，则对数据库进行查询，将结果添加到 memcached，并将信息返回给调用者。这就是您通常为读取查询构建缓存的方式。

在更新数据的情况下，将针对数据库进行更新，然后 memcached 中的相应数据无效和/或更新。同样对于插入，您可以对缓存不做任何事情（并让对该记录的下一次读取填充缓存），或者您可以根据应用程序的需要主动将与插入相关的数据添加到缓存中。

这样，在从 memcached 获取初始数据后，您就不需要采取额外的步骤来调用数据库来获取权威数据。memcached 中的数据将是权威数据的副本，在更新/插入时刚刚更新/失效。

根据您的评论，为了防止在缓存未命中的情况下对数据库进行大量查询，您可能想要尝试的一件事是使用各种互斥锁。例如，当第一个客户端命中 memcached 并获得该查找的缓存未命中时，您可以在 memcached 中插入一个临时值，指示数据处于待处理状态，然后对数据库进行查询，并使用结果。

在客户端，当您收到缓存未命中或“待处理”结果时，您可以简单地在一段时间后重新启动缓存重试（您可能希望以指数方式增加）。因此，也许首先等待 1 秒，然后在 2 秒内尝试返回增益，如果他们仍然得到“待定”结果，然后在 4 秒内重试，依此类推。

这可能会增加对 memcached 服务器的请求，但应该可以解决数据库层上的任何问题。

# android - afreechart - ScrollView 中的图表

> ID：12040259
> 
> 赞同：1
> 
> 时间：2012-08-20T15:09:36.000
> 
> 标签：android, android-layout, android-scrollview

我一直在使用afreechart在我的应用程序中绘制一些图表，但是我遇到了一些我自己无法解决的问题，所以我希望这里有人能给我一个正确的方向。我使用示例中包含的 DemoView，并将图表传递给 View。当我的视图仅由 LinearLayout 组成时，这非常有效，并且图表已添加到此布局中。但是，如果我的视图是 ScrollView，并且我向此 ScrollView 添加相同的 LinearLayout（以完全相同的方式以编程方式构建），则图表不会显示。但是，布局的其余部分看起来是一样的。任何的想法？为了让它显示在滚动视图中，我应该在图表中设置什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:27:47.020

我似乎已经用 ScrollView 中的图表对这个问题进行了排序。看起来我只需要设置布局参数。就我而言，我使用了：

```
chartView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,500)); 
```

现在图表显示在 ScrollView 中。

现在我只需要找出为什么这条线没有出现在 XY 线图的图例中，但那是另一回事。

# xcode - UITableView - 根据索引路径设置单元格内容

> ID：12040260
> 
> 赞同：0
> 
> 时间：2012-08-20T15:09:36.967
> 
> 标签：xcode, uitableview

```
- (UITableViewCell *)tableView:... cellForRowAtIndexPath:... {
    // init and sanity check

    if (indexPath.row == 0) {
        // make cell look like a section header
        // easier and less complex than using a custom header view

        NSLog(@"header");
        // should prove that only four cells get the bg image
        // and yet, almost every time the table is reloaded
        // one more cell unexpectedly gets the background
        // without putting another line in the debugger
    } else {
        // normal cells after row 0
        // BUG: some of these are getting the row 0 background

        NSLog(@"row");
        // firing exactly the right number of times --
        // once for each row with an index greater than 0
        // so why are some of these cells getting the header bg?

        // when these cells get the headers' contents
        // they behave exactly as one would expect
        // except that they should be the normal rows
    }

    // misc stuff, not causing problems

    return cell;
} 
```

没有强迫用户完全重新启动应用程序只是为了将不同的数据转储到表中，我不知道如何修复这个错误。

如果我折叠每个部分（即清空`expandedSections`集合并重新加载，只留下伪标题可见），问题就不那么严重了，但它并没有消失。

* * *

**编辑：**

初始加载：[screenshot](http://i.stack.imgur.com/ts5tt.png)
重新加载后：[screenshot](http://i.stack.imgur.com/u3VDV.png)
链接而不是图像，因为它是一个 iPad 应用程序。
使用一些虚拟内容进行测试。

这有什么帮助吗？我知道需要更多代码才能获得真正的帮助，但我不知道还要添加什么，缺少指向整个视图代码的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:19:52.857

它可能与单元缓存有关......关于将图像设置为 row == 0 而不是清除它......但是由于您显示的代码数量有限，很难更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:44:35.463

您是否尝试过为第一个单元格设置不同的单元格标识符，为其余单元格设置另一个单元格标识符？tableView 在创建新单元格时重用相同的单元格类型，因此可能会使它们混淆。通过为每种类型使用不同的单元格标识符，它将准确地知道何时使用每个单元格。

# oracle - EXECUTE 识别存储过程，CALL 不识别

> ID：12040261
> 
> 赞同：6
> 
> 时间：2012-08-20T15:09:40.763
> 
> 标签：oracle, sqlplus

当我尝试使用 EXECUTE 运行存储过程时，proc 运行良好。当我使用 CALL 时，我得到`"ORA-06576: not a valid function or procedure name"`. 我通过蟾蜍直接连接。为什么我不能使用通话？

我已经尝试了这两个电话：

```
CALL(BPMS_OWNER.DAILY_PARTITION_NOROTATE('MIP_TEST',5,5,'MIP_TEST_',5,FALSE,TRUE));
CALL BPMS_OWNER.DAILY_PARTITION_NOROTATE('MIP_TEST',5,5,'MIP_TEST_',5,FALSE,TRUE); 
```

我需要使用 CALL 的原因是我们的平台在将 SQL 发送到 Oracle 之前对其进行解析，无论出于何种原因，Oracle 都不支持 EXECUTE。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-20T15:16:30.340

仅仅因为*需要*您添加括号，例如，[`call`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_4008.htm#BABDEHHG) *`call my_proc()`*

 *如果我设置一个小测试：

```
SQL>
SQL> create or replace procedure test is
  2  begin
  3     dbms_output.put_line('hi');
  4  end;
  5  /

Procedure created. 
```

运行这几种不同的方式，你会看到

```
SQL> exec test
hi

PL/SQL procedure successfully completed.

SQL> call test;
call test
     *
ERROR at line 1:
ORA-06576: not a valid function or procedure name

SQL> call test();
hi

Call completed. 
```

为什么需要使用`call`？不是`exec`，`execute`而且`begin ... end`够了吗？

* * *

根据您的更新，问题是布尔值，它`call`似乎不支持。创建另一个小程序

```
SQL> create or replace procedure test (Pbool boolean ) is
  2  begin
  3     if Pbool then
  4        dbms_output.put_line('true');
  5     else
  6        dbms_output.put_line('false');
  7     end if;
  8  end;
  9  /

Procedure created.

SQL> show error
No errors. 
```

并运行它证明了这一点

```
SQL> call test(true);
call test(true)
          *
ERROR at line 1:
ORA-06576: not a valid function or procedure name 
```

我不太明白你为什么不能使用的原因，`exec`或者`execute`假设这些都是禁止使用的，为什么不只使用传统的匿名 PL/SQL 块？

```
SQL> begin
  2     test(true);
  3  end;
  4  /
true

PL/SQL procedure successfully completed. 
```*

# macos - 有什么方法可以在silverlight 5中以编程方式禁用硬件加速的h.264视频解码？

> ID：12040263
> 
> 赞同：17
> 
> 时间：2012-08-20T15:09:51.553
> 
> 标签：macos, video, h.264, silverlight-5.0, hardware-acceleration

我们收到来自 Mac 用户的报告，称他们的某些视频播放出现乱码。这只是在 Silverlight 5 发布时才开始发生的。此版本包括 H.264 的硬件视频解码加速，这是我们使用的编解码器。我们发现通过 Silverlight Preferences 禁用硬件加速可以解决问题。

有谁知道禁用硬件加速的**编程方式？**我们在 OS X 上拥有数千名用户，并希望为他们抢先解决此问题。我们也欢迎其他解决问题的方法。

相关细节：

*   MP4 容器中的 H.264 编解码器，有时带有 AAC 音频
*   视频托管在 Amazon S3 上并通过 CDN 提供
*   使用 Silverlight [MediaElement](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement%28v=vs.95%29.aspx)
*   我尝试在对象参数中关闭[enableGPUAcceleration](http://msdn.microsoft.com/en-us/library/dd833062%28v=vs.95%29.aspx)
*   我已尝试关闭[CacheMode](http://msdn.microsoft.com/en-us/library/system.windows.uielement.cachemode%28v=vs.95%29.aspx)，因为它会影响 GPU 加速，如[本页有关 Silverlight 硬件加速的详细说明。](http://msdn.microsoft.com/en-us/library/ee309563%28v=vs.95%29.aspx)

**更新**

*   它不会始终如一地发生，这使得这个问题更难解决。有些视频可以正常播放，有些则不行。所有视频都以相同的方式编码。
*   它发生在 Google Chrome、Safari 和 Firefox 中。
*   这**仅适用于 Mac OS X**，在 Windows 中根本不会发生。
*   它发生在几种不同的 Mac 型号和版本上。Mac Mini、MacBook Air、MacBook Pro 等。到目前为止，我们还没有找到从未出现过问题的特定型号。

**更新 2**

*   使用 Silverlight 5.0 和 5.1 复制

**更新 3**

*   这是在浏览器中（因此上面列出的浏览器）

这是乱码视频的示例

![silverlight 5乱码视频](../Images/134c1389653d14ae3ce9f112122132f0.png)

解决问题的首选项设置

![银光偏好](../Images/0ea40e13e8b91f258ae5857be2f41033.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:54:24.410

您提到了几个浏览器，所以我假设您托管在一个页面上。看看这是否适合你：

```
<param name="enableGPUAcceleration" value="false"/> 
```

在`<object>`托管插件的 HTML 页面上的标记中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T22:51:23.067

如果是 Out of browser application 您可以在 OOB 设置中关闭 GPU 加速![在此处输入图像描述](../Images/40866ab9b7fed6e3537528b14cbd9251.png)

# .net - 如何调用仅在运行时已知的类的静态方法

> ID：12040273
> 
> 赞同：2
> 
> 时间：2012-08-20T15:10:16.740
> 
> 标签：.net, reflection

我需要调用一个静态类的方法。此类仅在运行时已知（它是 System.Type 变量）。我知道我的方法是在“MyObject”类中实现的。我该如何调用这种方法？说明我需要做的代码如下。它可能看起来有点变态，但我发誓我会把它用于好的目的，不会让宇宙内爆。

```
public class MyObject
{
    public static string ReturnUsefulStuff()
    {
        return "Important result.";
    }
}

public class MyChildObject: MyObject
{
    // Hey! I know about ReturnUsefulStuff() method too!
}

public class App
{
    public void Main()
    {
        // The following type isn't supposed to be known at compile time.
        // Except that it will always be MyObject type or its descendent.
        Type TypeOfMyObject = typeof(MyChildObject); 
        // My erotic fantasy below. That line doesn't actually work for static methods
        string Str = (TypeOfMyObject as MyObject).ReturnUsefulStuff();
        // I know that type has this method! Come on, let me use it!

        MessageBox.Show(Str);
    }
} 
```

在 Delphi 中，这可以通过声明来实现

```
// ...
// interface
Type TMyObjectClass = class of TMyObject;
// ...
// implementation
ClassVar := TMyChildObject;
Str := TMyObjectClass(ClassVar).ReturnUsefulStuff(); 
```

这要归功于 Delphi 的“类”构造。编译器知道 TMyObject 具有“ReturnUsefulStuff”并且 TMyChildObject 是从它派生的，并且它还具有对 ClassVar 中的类的引用。这是所需的一切。C# 没有“类”的概念，它只有 The One System.Type 将（几乎）统治它们。有什么建议么？我会被迫使用各种丑陋的反射技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:14:49.937

使用`TypeOfMyObject.GetMethod("ReturnUsefulStuff").Invoke(...)`null 作为目标对象实例（参见[http://msdn.microsoft.com/en-us/library/05eey4y9.aspx](http://msdn.microsoft.com/en-us/library/05eey4y9.aspx)和[http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:20:21.757

```
Type typeOfMyObject = typeof(MyChildObject);
MethodInfo method = typeOfMyObject.GetMethod("ReturnUsefulStuff", BindingFlags.Public | BindingFlags.Static | BindingFlags.FlattenHierarchy);
object result = method.Invoke(null, null);
MessageBox.Show(result.ToString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:35:07.793

您的代码中有一个误解：

Delphi 有“类”的概念，这意味着一个字段/变量可以为类本身保留一个引用。.net clr 没有这个概念。在运行时的 .Net 中，您可以查询有关特定类型的信息。当您调用时，`obj.GetType()`您会得到一个`Type`包含有关类型信息的对象。然而，`Type`它不是 Delphi 中的类本身，它只是一个带有一堆信息的常规对象。

这就是为什么这在 .net 中是非法的：

```
// TypeOfMyObject is a object of the class Type, which MyObject does not inherit.
(TypeOfMyObject as MyObject).ReturnUsefulStuff(); 
```

所以，是的，在这种情况下你必须使用反射。

```
var method = typeOfMyObject.GetMethod("ReturnUsefulStuff", 
      BindingFlags.Public | BindingFlags.Static | BindingFlags.FlattenHierarchy);
var result = method.Invoke(null, null); 
```

# flash - 用于 OpenLaszlo 的 Flash Stage Video 组件

> ID：12040278
> 
> 赞同：1
> 
> 时间：2012-08-20T15:10:25.673
> 
> 标签：flash, video, openlaszlo, lzx

是否有使用[Flash Stage Video](http://www.adobe.com/devnet/flashplayer/stagevideo.html)的 OpenLaszlo 视频组件？从[Flash Player 10.2](http://helpx.adobe.com/flash-player/release-note/release-notes-flash-player-10-2.html)开始支持舞台视频。根据 Adob​​e 的说法，使用 Stage Video 可将处理器使用量减少多达 85%。

有关 Flash 视频的详细信息，请查看此[Adob​​e Flash Player 团队博客文章](http://blogs.adobe.com/flashplayer/2011/02/flash-player-10-2-launch.html)，以及[MAX Sneaks 的 Adob​​e TV 重新编码：Flash Player 视频性能改进](http://www.youtube.com/watch?v=geK7geL3I40)。

# android - Android：SD卡有使用功能选项吗？

> ID：12040281
> 
> 赞同：3
> 
> 时间：2012-08-20T15:10:32.427
> 
> 标签：android, manifest

谷歌推出的一些较新的设备不包含 sd 卡，而且它们似乎正朝着这个方向发展。

我的问题：有没有办法将 sd 卡声明为使用功能，以防止没有外部存储的人从 Google Play 看到/下载应用程序？

我意识到这不是解决问题的正确方法，但是在我可以重新编码我的应用程序以预测这一点之前，我希望清单中有一个过滤选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:19:58.023

没有`<uses-feature>`哪个可以满足您的需求。

您可以在 Google Play 的开发者仪表板中手动选择设备。我知道这是非常低效的，可能会花费很多时间，但这是实现你想要的唯一方法。

如果您不想为此烦恼，那么我建议您将此信息包含在 Google Play 上您的应用程序描述中，并在此基础上处理您的应用程序首次启动时的情况（例如通知用户不支持该设备，因为它没有外部存储）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:19:06.097

我不知道这样的功能是否存在，即使存在也很难使用。我有一个三星 Galaxy Nexus，虽然它没有 SD 卡，但它确实有 16GB 的内部存储空间。我看过其他手机说“内部 SD 卡”，所以这真的取决于该功能（如果存在）是否可以区分两者之间的区别。有些设备还有一个对用户隐藏的实际 SD 卡，因此他们无法分辨它的存在。大多数设备现在也有相当数量的内部存储空间，所以我不确定为什么会出现问题。您甚至需要为此重新编码您的应用程序吗？我认为 android 会意识到您正在请求不可用的存储空间，并会通知用户他们需要更多存储空间。

# netty - Netty 4 (A1) - 具有多个处理程序的 AttributeMap

> ID：12040282
> 
> 赞同：2
> 
> 时间：2012-08-20T15:10:37.970
> 
> 标签：netty

我正在尝试使用 ChannelContext.attr() 方法将对象从一个处理程序传递到另一个处理程序：

```
private class TCPInitializer extends ChannelInitializer<SocketChannel>
{
    @Override
    public void initChannel(final SocketChannel ch) throws Exception
    {
        ChannelPipeline pipeline = ch.pipeline();

        pipeline.addLast(new ReadTimeoutHandler(mIdleTimeout));
        pipeline.addLast(new HostMappingHandler<SyslogHandler>(mRegisteredClients,
                                                               mChannels));
        pipeline.addLast(new DelimiterBasedFrameDecoder(MAX_FRAME_SIZE,
                         Delimiters.lineDelimiter()));
        pipeline.addLast(new Dispatcher());
    }
} 
```

HostMappingHandler 是一个将主机映射到数据的模板类：

```
public class HostMappingHandler<T> extends ChannelStateHandlerAdapter
{

    public static final AttributeKey<HostMappedObject> HOST_MAPPING =
        new AttributeKey<HostMappedObject>("HostMappingHandler.attr");

    private final ChannelGroup mChannels;
    private final Map<String, T> mMap;

    public HostMappingHandler(Map<String, T> registrations,
                              ChannelGroup channelGroup)
    {
        mChannels = channelGroup;
        mMap = registrations;
    }

    @Override
    public void channelRegistered(ChannelHandlerContext ctx) throws Exception
    {
        SocketAddress addr = ctx.channel().remoteAddress();
        T mappedObj = null;

        if (addr instanceof InetSocketAddress)
        {
            String host = ((InetSocketAddress) addr).getHostName().toLowerCase();
            mappedObj = mMap.get(host);
        }

        if (mappedObj != null)
        {
            // Add the channel to the list so it can be easily removed if unregistered
            mChannels.add(ctx.channel());

            // Attach the host-mapped object
            ctx.attr(HOST_MAPPING).set(new HostMappedObject<T>(mappedObj));
        }
        else
        {
            log.debug("Bad host [" + addr + "]; aborting connection request");
            ctx.channel().close();
        }
        super.channelRegistered(ctx);
    }

    @Override
    public void inboundBufferUpdated(ChannelHandlerContext ctx) throws Exception
    {
        // Find the parser for this host. If the host is no longer registered,
        // disconnect the client.
        if (ctx.channel().remoteAddress() instanceof InetSocketAddress)
        {
            InetSocketAddress addr = (InetSocketAddress) ctx.channel().remoteAddress();
            T handler = mMap.get(addr.getHostName().toLowerCase());

            if (handler == null)
            {
                log.debug("Host no longer registered");
                ctx.channel().close();
            }
            else
            {
                log.debug("Sanity Check: " + ctx.attr(HostMappingHandler.HOST_MAPPING).get());
            }
        }
        super.inboundBufferUpdated(ctx);
    }

    // ==================================================

    public static class HostMappedObject<C>
    {
        private final C mObj;

        public HostMappedObject(final C in)
        {
            mObj = in;
        }

        public C get()
        {
            return mObj;
        }
    }
} 
```

而调度器目前非常简单：

```
private static class Dispatcher extends ChannelInboundMessageHandlerAdapter<Object>
{
    @Override
    public void messageReceived(final ChannelHandlerContext ctx,
                                final Object msg)
            throws Exception
    {
        HostMappingHandler.HostMappedObject wrapper =
                ctx.attr(HostMappingHandler.HOST_MAPPING).get();

        log.debug("Received: " + wrapper);
    }
} 
```

顺便说一句，初始化程序和调度程序是“服务器”对象的私有类。但是，当我运行一个注册 localhost 并尝试连接它的单元测试时，它会失败并且我的调试输出显示：

```
HostMappingHandler.inboundBufferUpdated: Sanity Check: test.comms.netty.HostMappingHandler$HostMappedObject@eb017e
Dispatcher.messageReceived: Received: null 
```

因此，在通道注册和接收 HostMapper 类中的入站消息之间肯定会保留映射，并且在调试器中进一步调查表明 Dispatcher 中上下文的属性映射确实有一个条目 - 问题是该值为 NULL而不是对象。

我是否遗漏了一些明显的东西，或者只是一个 alpha 错误？

编辑：

我现在已经通过将数据附加到 Dispatcher 的上下文来解决这个问题，让 HostMappingHandler 也接受一个要附加的类。该错误似乎是在处理程序的 ChannelHandlerContext 中设置属性会导致该属性出现在另一个具有正确键但值为 NULL 的处理程序中。在不知道所需工作流的情况下，错误是根本不应该出现键，或者值不应该为空。

```
public HostMappingHandler(final Map<String, T> registrations,
                          final ChannelGroup channelGroup,
                          final Class<? extends ChannelHandler> channelHandler)
{
    mChannels = channelGroup;
    mMap = registrations;
    mHandler = channelHandler;
}

//...

@Override
public void channelRegistered(ChannelHandlerContext ctx) throws Exception
{
    //...
    // Attach the host-mapped object
     ctx.pipeline().context(mHandler).attr(HOST_MAPPING).set(new HostMappedObject<T>(mappedObj));
    //...
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T10:52:38.613

`AttributeMap`in`ChannelHandlerContext`绑定到上下文，这就是为什么您在一个上下文中设置的属性在其他上下文中不可见的原因。

请注意，它`Channel`也实现了`AttributeMap`. 您可以只使用绑定到通道的属性映射：

```
ctx.channel().attr(...) ...; 
```

# python - 从书中学习 PyQt。Python 的 C++ 风格代码太多？

> ID：12040295
> 
> 赞同：4
> 
> 时间：2012-08-20T15:11:41.540
> 
> 标签：python, pyqt

Summerfield 的“使用 Python 和 Qt 进行快速 GUI 编程”。总的来说，我喜欢这本书。前几章是我在网上或其他地方找到的最好的 Python 入门书，示例多种多样且很有帮助（虽然并不完美，肯定有一些填充和追溯——它可能更直接）。

我的问题是我觉得我可能会从中养成坏习惯。作者不只是动态地为现有对象分配新属性，而是使用“setData”函数、特殊的 MIMEData 插槽等等。这是我在 Stackoverflow 上提出的第一个问题的一个很好的例子：

[从 PyQt 小部件项目中设置和获取“数据”？](https://stackoverflow.com/questions/11485243/setting-and-getting-data-from-pyqt-widget-items)

或者，例如，在页面设计器应用程序中：

```
def writeItemToStream(self, stream, item):
    if isinstance(item, QGraphicsTextItem):
        stream << QString("Text") << item.pos() \
               << item.matrix() << item.toPlainText() << item.font()
    elif isinstance(item, QGraphicsPixmapItem):
        stream << QString("Pixmap") << item.pos() \
               << item.matrix() << item.pixmap()
    elif isinstance(item, BoxItem):
        stream << QString("Box") << item.pos() \
               << item.matrix() << item.rect
        stream.writeInt16(item.style) 
```

我是否认为作者的 C++/Qt 背景可能会使他的示例不理想？还是我应该继续尝试理解他的许多选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:59:33.127

你必须记住 PyQt4 是对 Qt 的绑定。对于 API 兼容性，一个中所做的很多事情在另一个中是相同的。

显然 C++ 是一种静态类型语言，python 允许您简单地将属性分配给对象，但不要将其与 setData 调用之类的东西混淆。通常，这些调用会设置不向您公开的内部成员。这是绑定方面有意义的地方。为了让 C++ 对象获得他们期望的交互，您通常需要在 pyqt 中使用相同的 api

与 C++ 非常相关的一个例子是 QVariant。它是一个可以表示许多不同类型的对象。Python 通常不需要这种对象，但 C++ 会在一个对象中保存动态类型。当您使用 QSettings 或模型/视图组件时，您将不得不处理此对象。

那本书是一本极好的学习工具，我建议不要考虑养成坏习惯。Mark 知道为了理解 PyQt 需要教什么。当您一般学习 python 时，您将能够轻松地进行这些区分。

# java - 从 Java Web 应用程序导出 WebGL 的 3D 模型的推荐格式

> ID：12040296
> 
> 赞同：0
> 
> 时间：2012-08-20T15:11:47.187
> 
> 标签：java, webgl, three.js, java-3d

我有一个 Web 应用程序，它在服务器上操作 3D 模型并允许用户查看模型。使用 Java 是 Web 应用程序的硬性要求，但 WebGL 查看器与应用程序交互的方式仍有待实现。

将 3D 模型从 Java 导出到 WebGL 中易于使用的东西的推荐格式/方法是什么？您可以假设我在服务器端使用 Java 3D 库，在客户端使用 Three.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:46:19.630

我首选的管道是导出为 JSON 格式，然后在我的加载器中转换为 Float32Array。Collada 也可以工作，但因为 Collada 允许以许多不同的方式描述网格之类的东西，所以 Collada 进口商通常很挑剔。

# java - 将 CKEditor 与 JSP 集成

> ID：12040299
> 
> 赞同：3
> 
> 时间：2012-08-20T15:11:53.973
> 
> 标签：java, jsp, ckeditor

我正在尝试将[CKEditor](http://ckeditor.com/blog/CKEditor_for_Java_released)与 JSP 页面（[演示](http://ckeditor.com/demo)）集成。我已经在*CKEditor for Java部分从*[这里](http://ckeditor.com/download)下载了 jar 文件，并将该文件添加到项目库中。我正在遵循[此](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Java/Integration)安装指南，但下载的 zip 文件夹不包含客户端脚本。*`ckeditor-java-core-3.5.3.jar`*

 *[在下载页面](http://ckeditor.com/download)*的 CKEditor for Java*部分的下载 zip 按钮旁边提到了“*注意：此包中不包含客户端脚本。* ” 。那么，它们在哪里可用，无处可寻？是否有其他 CKEditor（或 FCKEditor）可供 JSP 集成？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:27:15.950

那是因为您正在安装 CKEditor 的 Java 版本，因此您的编辑器将通过类似标签`<%@ taglib uri="http://ckeditor.com" prefix="ckeditor" %>`而不是脚本来配置。

如果您想使用完整的脚本编辑器，请在[此处](http://ckeditor.com/download)下载第一个 zip （仅命名`CKEditor`）并按照[此处](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Installation)的说明进行操作。

我最近在我正在处理的项目中使用它并且没有任何问题，即使通过使用 jQuery。**

# linux - 如何从 Linux 中的用户空间访问物理地址？

> ID：12040303
> 
> 赞同：44
> 
> 时间：2012-08-20T15:12:05.037
> 
> 标签：linux, memory, arm, memory-address, memory-mapping

在运行 Linux 的基于 ARM 的系统上，我有一个内存映射到物理地址的设备。从所有地址都是虚拟的用户空间程序中，如何从该地址读取内容？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2017-07-16T11:12:12.827

**`busybox devmem`**

`busybox devmem`是一个小型 CLI 实用程序，用于 mmaps `/dev/mem`。

您可以通过以下方式在 Ubuntu 中获取它：`sudo apt-get install busybox`

用法：从物理地址读取 4 个字节`0x12345678`：

```
sudo busybox devmem 0x12345678 
```

写信`0x9abcdef0`到那个地址：

```
sudo busybox devmem 0x12345678 w 0x9abcdef0 
```

来源：[https ://github.com/mirror/busybox/blob/1_27_2/miscutils/devmem.c#L85](https://github.com/mirror/busybox/blob/1_27_2/miscutils/devmem.c#L85)

**地图`MAP_SHARED`**

映射时`/dev/mem`，您可能希望使用：

```
open("/dev/mem", O_RDWR | O_SYNC);
mmap(..., PROT_READ | PROT_WRITE, MAP_SHARED, ...) 
```

`MAP_SHARED`使写入立即进入物理内存，这样更容易观察，并且对硬件寄存器写入更有意义。

**`CONFIG_STRICT_DEVMEM`和`nopat`**

要`/dev/mem`在内核 v4.9 上查看和修改常规 RAM，您必须首先：

*   禁用`CONFIG_STRICT_DEVMEM`（在 Ubuntu 17.04 上默认设置）
*   传递`nopat`x86 的内核命令行选项

没有这些，IO 端口仍然可以工作。

另请参阅：[/dev/mem 的 mmap 失败，virt_to_phys 地址的参数无效，但地址是页面对齐的](https://stackoverflow.com/questions/39134990/mmap-of-dev-mem-fails-with-invalid-argument-for-virt-to-phys-address-but-addre/45127582#45127582)

**缓存刷新**

如果您尝试写入 RAM 而不是寄存器，则内存可能会被 CPU 缓存：[如何在 Linux 中为地址空间区域刷新 CPU 缓存？](https://stackoverflow.com/questions/22701352/how-to-flush-the-cpu-cache-for-a-region-of-address-space-in-linux)而且我没有看到一种非常便携/简单的方法来刷新它或将该区域标记为不可缓存：

*   [如何使用 O_DIRECT 将内核空间内存（物理地址）写入文件？](https://stackoverflow.com/questions/6439082/how-to-write-kernel-space-memory-physical-address-to-a-file-using-o-direct)
*   [如何在 Linux 中刷新地址空间区域的 CPU 缓存？](https://stackoverflow.com/questions/22701352/how-to-flush-the-cpu-cache-for-a-region-of-address-space-in-linux)
*   [是否可以在 Linux 上的用户空间中分配不可缓存的内存块？](https://stackoverflow.com/questions/885658/is-it-possible-to-allocate-in-user-space-a-non-cacheable-block-of-memory-on-li)

那么也许`/dev/mem`不能可靠地用于将内存缓冲区传递给设备？

不幸的是，这在 QEMU 中无法观察到，因为 QEMU 不模拟缓存。

**如何测试它**

现在是有趣的部分。这里有一些很酷的设置：

*   [用户态内存](https://stackoverflow.com/questions/17021214/how-to-decode-proc-pid-pagemap-entries-in-linux/45126141#45126141)
    *   在用户态进程上分配`volatile`变量
    *   `/proc/<pid>/maps`使用+获取物理地址`/proc/<pid>/pagemap`
    *   用 修改物理地址的值`devmem`，并观察用户态进程的反应
*   [内核内存](https://stackoverflow.com/questions/39134990/mmap-of-dev-mem-fails-with-invalid-argument-for-virt-to-phys-address-but-addre/45127582#45127582)
    *   分配内核内存`kmalloc`
    *   获取物理地址`virt_to_phys`并将其传递回用户区
    *   修改物理地址`devmem`
    *   从内核模块查询值
*   [IO mem 和 QEMU 虚拟平台设备](https://stackoverflow.com/questions/28315265/how-to-add-a-new-device-in-qemu-source-code/44612957#44612957)
    *   创建具有已知物理寄存器地址的平台设备
    *   用于`devmem`写入寄存器
    *   watch`printf`作为响应从虚拟设备中出来

**奖励：确定虚拟地址的物理地址**

[是否有任何 API 用于从 Linux 中的虚拟地址确定物理地址？](https://stackoverflow.com/questions/5748492/is-there-any-api-for-determining-the-physical-address-from-virtual-address-in-li/45128487#45128487)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-08-20T16:18:11.123

`mmap(2)`您可以使用系统调用将设备文件映射到用户进程内存。通常，设备文件是物理内存到文件系统的映射。否则，您必须编写一个内核模块来创建这样的文件或提供一种将所需内存映射到用户进程的方法。

另一种方法是将 /dev/mem 的一部分重新映射到用户内存。

编辑：映射 /dev/mem 的示例（此程序必须有权访问 /dev/mem，例如具有 root 权限）：

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <unistd.h>

int main(int argc, char *argv[]) {
    if (argc < 3) {
        printf("Usage: %s <phys_addr> <offset>\n", argv[0]);
        return 0;
    }

    off_t offset = strtoul(argv[1], NULL, 0);
    size_t len = strtoul(argv[2], NULL, 0);

    // Truncate offset to a multiple of the page size, or mmap will fail.
    size_t pagesize = sysconf(_SC_PAGE_SIZE);
    off_t page_base = (offset / pagesize) * pagesize;
    off_t page_offset = offset - page_base;

    int fd = open("/dev/mem", O_SYNC);
    unsigned char *mem = mmap(NULL, page_offset + len, PROT_READ | PROT_WRITE, MAP_PRIVATE, fd, page_base);
    if (mem == MAP_FAILED) {
        perror("Can't map memory");
        return -1;
    }

    size_t i;
    for (i = 0; i < len; ++i)
        printf("%02x ", (int)mem[page_offset + i]);

    return 0;
} 
```

# cocoa - 弱 IBOutlet 属性和 ARC 问题

> ID：12040304
> 
> 赞同：1
> 
> 时间：2012-08-20T15:12:09.277
> 
> 标签：cocoa, automatic-ref-counting, weak-references, iboutlet

我的代码：

```
@interface WBMessageTableCellView : NSTableCellView

@property (weak) IBOutlet NSTextField *authName;
@property (weak) IBOutlet NSTextField *createdTime;
@property (weak) IBOutlet NSImageView *userProfileImageView;

@property (weak) IBOutlet NSTextView *statusTextView;

@end 
```

但我得到了这个错误， ![在此处输入图像描述](../Images/cbd1c867cec779bf5e2fa35d2e54b403.png) 这有什么问题？我必须将我的代码更改为此，它可以工作，

```
@interface WBMessageTableCellView : NSTableCellView
{
    IBOutlet NSTextView *statusTextView;
}

@property (weak) IBOutlet NSTextField *authName;
@property (weak) IBOutlet NSTextField *createdTime;
@property (weak) IBOutlet NSImageView *userProfileImageView;

@property NSTextView *statusTextView; 
```

我已经在这个文件上打开了 arc，并且该项目是新创建的。不是从非弧项目转换而来的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:33:40.023

我已将我的评论提升为答案：

> 请看一下这个问题： [哪些 iOS 类不支持归零弱引用？](https://stackoverflow.com/questions/9146540/which-ios-classes-that-dont-support-zeroing-weak-references) 您不能创建对不支持对其实例的弱引用的类的弱引用。

# php - “[浏览器版本] 及更高版本”的用户代理字符串

> ID：12040306
> 
> 赞同：0
> 
> 时间：2012-08-20T15:12:10.560
> 
> 标签：php, http, user-agent

我试图通过指定如果`HTTP_USER_AGENT`字符串对应于 [browser version x] 或更高版本，则应加载包含 CSS 动画的远程样式表来避免大量 PHP 代码。例如，知道 Chrome 19 及更高版本支持 CSS 动画，代码将检测 Chrome 的版本是否大于 19，并加载适当的样式表。
使用 PHP 是否可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:19:03.490

这是一种解决方案，但您必须不时更新用户代理字符串的解析器以包含其中的更改。使用代理字符串没有公认的标准，因此通常解析用户代理字符串非常困难，并且通常归结为查找表。

一种更具前瞻性的方法是使用例如[Modernizr](http://modernizr.com)检测客户端对 CSS 动画的支持，然后根据结果加载样式表。这样你就不用关心，如果某些浏览器开发人员想在将来更改用户代理字符串的（结构）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:36:49.800

如果您*必须*为此使用 PHP，那么有一个内置函数[`get_browser()`](http://php.net/manual/en/function.get-browser.php)可以满足您的需求。

但是...如果您使用`get_browser()`，请注意它不是解决您问题的方法。

为了使用这个功能，你必须有一个最新的`browsecap.ini`文件，它基本上是一个文本文件，它定义了每个浏览器和每个发布的版本的功能。

这样做的缺点是显而易见的：

*   您必须首先找到并安装最新的browsecap.ini 副本。
*   每次发布新浏览器时，您都必须对其进行更新（并且新版本经常出现，因此这是一项艰巨的任务）。
*   它可能不包括您要检测的所有功能。
*   如果用户屏蔽他们的用户代理字符串，它将中断。

由于所有这些原因，我强烈建议不要使用`get_browser()`，或者实际上任何基于 PHP 或服务器端的解决方案。

相反，正如其他人所说，您应该使用[Modernizr](http://modernizr.com/)库进行调查。这是您安装在网站上的 Javascript 库，可在浏览器中进行功能检测。它永远不会过时，因为它专门看功能是否受支持，所以它不关心实际的浏览器是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:29:46.137

您可能希望考虑使用设备描述存储库 (DDR)。这是一个应用程序或 Web 服务，您可以传入用户代理字符串并获取该用户代理的已知功能列表。

这样做的好处是，随着新用户代理的出现，您不必不断更新自己的代码。

[我最近在Dino Esposito 关于移动站点开发的 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/jj190798.aspx)中读到了 DDR 。他对 DDR 的功能和性质有出色的论述。

我意识到您正在使用 PHP，但连接/查询 DDR 应该与语言无关。

只是一个想法，希望这会有所帮助。

# c# - 使用c#asp.net从excel文件中获取数据

> ID：12040314
> 
> 赞同：0
> 
> 时间：2012-08-20T15:12:28.487
> 
> 标签：c#, asp.net, asp.net-mvc, ms-access, oledb

我正在尝试使用以下代码加载数据。

```
string path = System.IO.Path.GetFullPath(uploadExcelFile.PostedFile.FileName);
            string connString = "provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Rizwan shahid\\Desktop\\DataUpload\\Req.xls;Extended Properties=Excel 12.0;";
            OleDbConnection oledbConn = new OleDbConnection(connString);
            try
            {
                oledbConn.Open();
                OleDbCommand cmd = new OleDbCommand("SELECT * FROM [Sheet1$]", oledbConn);
                OleDbDataAdapter oleda = new OleDbDataAdapter();
                oleda.SelectCommand = cmd;
                DataSet ds = new DataSet();
                oleda.Fill(ds, "Table");
                return ds.Tables[0];
            }
            catch
            {
                return null;
            }
            finally
            {
                oledbConn.Close();
            } 
```

它在 32 位操作系统上运行，但在 64 位操作系统上运行此代码时出现以下错误

```
The Microsoft Access database engine could not find the object 'Sheet1$'. Make sure the object exists and that you spell its name and the path name correctly. If 'Sheet1$' is not a local object, check your network connection or contact the server administrator. 
```

我在管理员模式下运行 VS 并找到了许多解决方案，例如用文件名替换 Sheet1 或将文件放在 C 驱动器中，但仍然出现相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:25:55.897

这有效（我从一个“虚拟”路径开始，然后应用真正的运行时路径）：

```
OleStringBuilder =
        new OleDbConnectionStringBuilder(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\MyExcel.xls;Extended Properties='Excel 8.0;HDR=Yes;IMEX=1';");

OleStringBuilder.DataSource = MapPath(@"~\App_Data\MyExcelWorksheet.xls"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:17:04.997

你可以在这里下载最新版本的 Jet

[http://www.microsoft.com/en-us/download/search.aspx?q=jet](http://www.microsoft.com/en-us/download/search.aspx?q=jet)

# scope - 使用 C 预处理器确定当前范围？

> ID：12040318
> 
> 赞同：6
> 
> 时间：2012-08-20T15:12:40.447
> 
> 标签：scope, global-variables, clang, static-variables, nested-function

我正在用 C / Objective-C 开发一个应用程序（请不要使用 C++，我已经有一个解决方案），我遇到了一个有趣的用例。

因为[clang](http://clang.llvm.org)不支持嵌套函数，所以我原来的做法是行不通的：

```
#define CREATE_STATIC_VAR(Type, Name, Dflt) static Type Name; __attribute__((constructor)) void static_ ## Type ## _ ## Name ## _init_var(void) { /* loading code here */ } 
```

这段代码可以用 GCC 很好地编译，但是因为 clang 不支持嵌套函数，我得到一个编译错误：

> 预期的 ';' 在声明结束时。

所以，我找到了一个适用于函数内部变量的 Clang 解决方案：

```
#define CREATE_STATIC_VAR_LOCAL(Type, Name, Dflt) static Type Name; ^{ /* loading code here */ }(); // anonymous block usage 
```

但是，我想知道是否有一种方法可以利用宏连接来选择适合这种情况的连接，例如：

```
#define CREATE_STATIC_VAR_GLOBAL(Type, Name, Dflt) static Type Name; __attribute__((constructor)) void static_ ## Type ## _ ## Name ## _init_var(void) { /* loading code here */ }
#define CREATE_STATIC_VAR_LOCAL(Type, Name, Dflt) static Type Name; ^{ /* loading code here */ }(); // anonymous block usage

#define SCOPE_CHOOSER LOCAL || GLOBAL
#define CREATE_STATIC_VAR(Type, Name, DFLT) CREATE_STATIC_VAR_ ## SCOPE_CHOOSER(Type, Name, Dflt) 
```

显然，最终的实现不必完全如此，但类似的东西就足够了。

我曾尝试使用`__builtin_constant_p`with `__func__`，但因为`__func__`它不是编译时常量，所以它不起作用。

我也尝试过使用`__builtin_choose_expr`，但这似乎不适用于全局范围。

我在文档中还缺少什么吗？似乎这应该是相当容易做到的事情，但是，我似乎无法弄清楚。

[***注意：***我知道我可以简单地键入`CREATE_STATIC_VAR_GLOBAL`或`CREATE_STATIC_VAR_LOCAL`代替宏连接，但这是我试图突破编译器的限制。我也知道我可以使用 C++ 并立即解决这个问题，但这不是我的目标。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T18:04:01.203

```
#define SCOPE_CHOOSER LOCAL || GLOBAL
#define CREATE_STATIC_VAR(Type, Name, DFLT) CREATE_STATIC_VAR_ ## SCOPE_CHOOSER(Type, Name, Dflt) 
```

这里最大的困难是 C 预处理器通过文本替换工作，所以即使你知道如何`SCOPE_CHOOSER`去做你想做的事，你最终会得到一个看起来像这样的宏扩展

```
CREATE_STATIC_VAR_LOCAL || GLOBAL(Type, Name, Dflt); 
```

在替换过程中没有办法让预处理器“恒定折叠”宏扩展；事物“折叠”的唯一时间是它们出现在`#if`表达式中时。所以你唯一的希望（模数轻微的手摇）是找到一个可以在函数内部和外部工作的单一结构。

你能在这里解释更多关于最终目标的信息吗？我不认为你可以用 加载变量的初始值`__attribute__((constructor))`，但也许有一种方法可以在第一次输入函数体时加载初始值......或者在编译时将这些变量的所有地址注册到全局列表中 -时间并有一个`__attribute__((constructor))`​​遍历该列表的函数......或者这些方法的一些混搭。我没有任何具体的想法，但如果你提供更多信息，也许会出现一些东西。

**编辑：** *我认为这对您也没有帮助，因为它不是预处理器技巧，但这里有一个常量表达式，在函数范围内将评估为 0，在全局范围内评估为 1。*

```
#define AT_GLOBAL_SCOPE __builtin_types_compatible_p(const char (*)[1], __typeof__(&__func__)) 
```

*但是，请注意我说的是“评估”而不是“扩展”。这些构造是编译时的，而不是预处理时的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T09:09:23.963

受[@Qxuuplusone 答案](https://stackoverflow.com/a/12202868/2015778)的启发。

建议的宏`AT_GLOBAL_SCOPE`确实有效（在 GCC 中），但会导致编译器警告（我很确定它不能被[Diagnostic Pragma](https://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)静音，因为它是由[这里](https://github.com/openeuler-mirror/gcc/blob/c86e3c7d7c3dcdd4614196160a66bbd190d56fc1/gcc/testsuite/gcc.dg/func-outside-1.c#L7)[`pedwarn`](https://github.com/openeuler-mirror/gcc/blob/c86e3c7d7c3dcdd4614196160a66bbd190d56fc1/gcc/c-family/c-common.c#L743)的测试创建的）。

除非您打开电源，否则您`-w`将始终看到这些警告，并且在您的脑海中产生一种可怕的感觉，即您可能不应该做您正在做的任何事情。

幸运的是，有一个解决方案可以消除这些挥之不去的疑虑。在[Other Builtins](https://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)部分，有`__builtin_FUNCTION`一个非常有趣的描述（强调我的）：

> 此函数等效于`__FUNCTION__`符号，并返回一个地址常量，该地址常量指向调用内置函数的函数的名称，***如果调用不在函数范围内，则返回空字符串***。

事实证明，至少在 GCC 8.3 版中，您可以这样做：

```
#define AT_GLOBAL_SCOPE (__builtin_FUNCTION()[0] == '\0') 
```

这仍然可能无法回答最初的问题，但是在 GCC 决定这也会引起警告之前（它似乎是故意设计的*不*这样做），它让我继续使用宏做有问题的事情而没有任何警告我这是个坏主意。

# visual-studio-2010 - 向网站添加 dll 会增加其他 dll 的负载？

> ID：12040320
> 
> 赞同：0
> 
> 时间：2012-08-20T15:12:57.707
> 
> 标签：visual-studio-2010, dll, .net-assembly

在 Visual Studio 2010 中有一个网站项目、一个类库项目和一个控制台应用程序。

类库项目与 YouTube 对话并引用 dll 的 Google.GData.Client、Google.GData.Extensions、Google.GData.YouTube 等。

当我从控制台应用程序添加对该项目的引用时，它只会添加类库 dll。

但是当我从网站添加对类库项目的引用时，它会自动添加所有谷歌 dll。

为什么是这样？控制台应用程序的行为与我期望的一样，只是添加对类库的引用，但网站将类库依赖的所有 dll 也添加到网站。

我真的不想要这个，因为我不希望网站对底层框架（youtube）有任何了解。例如，我不希望开发人员能够创建 youtube 视频对象。我有一个包装类，因此如果底层视频存储库发生更改，我不必在整个网站上进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:37:59.840

为了让您的 Web 应用程序使用您的类库，所有直接或间接相关的程序集都需要存在。您的控制台应用程序在构建时还将具有与可执行文件相同的文件夹中的依赖项。如果您不希望很明显地使用 Google 库，则需要[将它们嵌入](https://stackoverflow.com/questions/189549/embedding-dlls-in-a-compiled-executable)到类库的程序集中。

关于依赖关系主题的另一个 SO 问题在[这里](https://stackoverflow.com/questions/2265330/net-assembly-dependencies)。

# vb.net - 从程序集中获取类型时，有没有办法确定类型是否为匿名类型？

> ID：12040328
> 
> 赞同：2
> 
> 时间：2012-08-20T15:13:34.950
> 
> 标签：vb.net, unit-testing, reflection, anonymous-types

我在我的项目中添加了一个匿名类型：

```
'Put the courses from the XML file in an Anonymous Type
Dim courses = From myCourse In xDoc.Descendants("Course")
              Select New With
                  {
                      .StateCode = myCourse.Element("StateCode").Value, _
                      .Description = myCourse.Element("Description").Value, _
                      .ShortName = myCourse.Element("ShortName").Value, _
                      .LongName = myCourse.Element("LongName").Value, _
                      .Type = myCourse.Element("Type").Value, _
                      .CipCode = CType(myCourse.Element("CIPCode"), String) _
                }

For Each course In courses
    If Not UpdateSDECourseCode(acadYear, course.StateCode, course.Description, course.Type, course.ShortName, course.LongName, course.CipCode) Then errors.Add(String.Format("Cannot import State Course Number {0} with Year {1} ", course.StateCode, acadYear))
Next 
```

这样做之后，单元测试失败了：

```
Public Function GetAreaTypeList() As List(Of Type)
    Dim types As New List(Of Type)
    Dim asmPath As String = IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "My.Stuff.dll")

    For Each t As Type In Reflection.Assembly.LoadFrom(asmPath).GetTypes()
        If t.Namespace.StartsWith("My.Stuff.BatchUpdater") Then
            If t.BaseType Is GetType(My.Stuff.BatchUpdater.Area) Then
                types.Add(t)
            End If
        End If
    Next

    Return types
End Function 
```

它失败是因为项目中添加了一个新类型 ( **VB$AnonymousType_0`6** )，并且它没有名为**Namespace**的属性。

我通过对 IF 语句进行以下更改来修复：

```
If Not t.Namespace Is Nothing AndAlso t.Namespace.StartsWith("My.Stuff.BatchUpdater") Then 
```

由于我不完全了解发生了什么，我对我的代码更改感到怀疑。

为什么匿名类型的命名空间没有？

你会以同样的方式修复你的单元测试吗？或者它应该更具体（例如 **If Not t.Names = "VB$AnonymousType_0`6"**）

* * *

# 更新

decyclone 为我提供了创建更好测试所需的信息：

```
For Each t As Type In Reflection.Assembly.LoadFrom(asmPath).GetTypes()
    'Ignore CompilerGeneratedAttributes (e.g. Anonymous Types)
    Dim isCompilerGeneratedAttribute = t.GetCustomAttributes(False).Contains(New System.Runtime.CompilerServices.CompilerGeneratedAttribute())

    If Not isCompilerGeneratedAttribute AndAlso t.Namespace.StartsWith("My.Stuff.BatchUpdater") Then
         '...Do some things here
    End If
Next 
```

老实说，它可以通过 LINQ 查询得到更多改进，但这适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:44:29.513

匿名方法和类型用*CompilerGeneratedAttribute*修饰。您可以检查它们的存在以识别匿名类型。

```
var anonymous = new { value = 1 };

Type anonymousType = anonymous.GetType();
var attributes = anonymousType.GetCustomAttributes(typeof(CompilerGeneratedAttribute), false);

if (attributes.Any())
{
    // Anonymous
} 
```

您可以在测试中过滤掉这些。

也可以使用*CompilerGeneratedAttribute*标记用户定义的类型。所以也许你可以将它与检查*命名空间*是否为空结合起来

```
var anonymous = new { value = 1 };

Type anonymousType = anonymous.GetType();
var attributes = anonymousType.GetCustomAttributes(typeof(CompilerGeneratedAttribute), false);

if (attributes.Any() && anonymousType.Namespace == null)
{
    // Anonymous
} 
```

# java - java：非转义引号终止xml文本节点值

> ID：12040329
> 
> 赞同：0
> 
> 时间：2012-08-20T15:13:39.390
> 
> 标签：java, xml, xmldom, entityreference

我正在用java编写一个android应用程序。该应用程序模拟抽认卡，一方面是问题，另一方面是答案。
我目前正在使用以下（相当标准的）代码来制作格式良好的（我相信）.xml 文档（由基于 Qt 的程序生成，该程序可以毫无问题地读取输出）：

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    try
    {
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document dom = builder.parse(new File(diskLocation));
        Element pack = dom.getDocumentElement();
        NodeList flashCards = pack.getElementsByTagName("flashcard");
        for (int i=0; i < flashCards.getLength(); i++)
        {
            FlashCard flashCard = new FlashCard();

            Node cardNode = flashCards.item(i);
            NodeList cardProperties = cardNode.getChildNodes();
            for (int j=0;j<cardProperties.getLength();j++)
            {
                Node cardProperty = cardProperties.item(j);
                String propertyName = cardProperty.getNodeName();
                if (propertyName.equalsIgnoreCase("Question"))
                {
                    flashCard.setQuestion(cardProperty.getFirstChild().getNodeValue());
                }
                else if (propertyName.equalsIgnoreCase("Answer"))
                {
                    flashCard.setAnswer(cardProperty.getFirstChild().getNodeValue());
                }
                else if
                    ...etc. 
```

这是学习xml的抽认卡：

```
 <flashcard>
  <Question>What is the entity reference for ' " '?</Question>
  <Answer>&amp;quot;</Answer>
  <Info></Info>
  <Hint></Hint>
  <KnownLevel>1</KnownLevel>
  <LastCorrect>1</LastCorrect>
  <CurrentStreak>4</CurrentStreak>
  <LevelUp>4</LevelUp>
  <AnswerTime>0</AnswerTime>
 </flashcard> 
```

据我了解标准，'<' 和 '&' 需要转义（'>' 可能应该是），但引号和撇号不需要（除非它们在属性中），但是当问题和答案时卡被解析，它们分别作为`What is the entity reference for '`和出来`&`；

输入似乎遵循标准。java XMLDom 实现真的不符合标准，还是我遗漏了什么？

我很难相信我是唯一一个遇到（有）这个问题的人，但是我搜索了谷歌和堆栈溢出，发现几乎没有直接相关性。

感谢您的任何帮助！

抢

编辑：我刚刚意识到该文件有一个！DOCTYPE，但不以`<?xml`标签开头。
我想知道这是否有什么不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:29:43.027

从标准：

> 在元素的内容中，字符数据是任何不包含任何标记的起始分隔符的字符串

这意味着 ' 或 " 必须在元素的内容中进行转义。

# perl - perl：调用存储在变量中的函数的正确方法是什么？

> ID：12040330
> 
> 赞同：0
> 
> 时间：2012-08-20T15:13:43.260
> 
> 标签：perl

调用存储在变量中的函数的正确方法是什么？

```
my $f = sub () { ... };
&$f();  # 1st
$f->(); # 2nd 
```

两者似乎都有效，第一个可能在`perl4`.

但是，我想知道“官方`perl5`方式”是什么。

此外，是否有任何性能影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:23:58.980

两者都是*正确的方式*。Perl 并不是要强迫你使用任何特殊的风格。

### 风格#1`&$f()`

*临：*

*   强调我们正在使用子程序

*缺点：*

*   看起来像线路噪音
*   覆盖函数模板
*   对我来说似乎有点*perl4* -ly

*注意事项：*

在 perl4 的黑暗时代，没有引用。*可以通过传递变量名称*来模拟引用(*shudder*)。这也适用于潜艇，所以这段代码运行：

```
sub f { (shift == 0) ? 1 : 0 }
$g = "f";
print &$g(1); # prints 0;
print &$g(0); # prints 1; 
```

请`use strict 'refs'`提防这种恐怖。

### 风格#2`$f->()`

*临：*

*   强调我们正在处理一个参考
*   看起来更干净

*缺点：*

*   可能与对象和 hashref 混淆

*注意事项：*

与其他语法相同，因为它们在引擎盖下是相同的。但是解引用运算符并没有经常被滥用。

### 性能影响

让我们面对现实吧，如果我们只关注性能，我们就会编写汇编程序。如果你想优化 Perl，首先优化算法，然后在 C/XS 中编写所有代码，丢弃所有对象和模块，最后讨论解引用语法。

我*猜*第一种风格在理论上更快，但我怀疑它会在现实生活中产生严重影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T15:26:43.550

我真诚地怀疑性能是否存在任何差异，因为两种方法都会产生相同的代码：

```
$ perl -MO=Deparse -e'&$f()'
&$f();
-e syntax OK
$ perl -MO=Deparse -e'$f->()'
&$f();
-e syntax OK 
```

# php - 下拉重新加载页面然后检索值

> ID：12040332
> 
> 赞同：0
> 
> 时间：2012-08-20T15:13:53.557
> 
> 标签：php, javascript

您好，到目前为止，我一直在尝试使用这行代码，我的目标是通过 select 重新加载页面，然后 select 获取该值，以便页面将使用所述值重新加载，以便我可以检索它。这两个都是 1 形式。这是我应该在重新加载后使用我的值的地方。

```
 <input type="hidden" name="student_id" class="typed" readonly="readonly" value="<?php echo @$get_display->student_id;?>"> 
```

这就是我试图用来重新加载页面以获取上述值的方法。

```
 <select name="lvl" onchange="window.location='search_enroll.php?id='$_GET['student_id']"> 
```

感谢您提供任何帮助。

这就是我检索的方式我在上一条语句中遇到问题，假设在重新加载后检索值。

```
 if (!empty($_POST['searchstudent'])){
                $id = $_POST['searchstudent'];

            }else if(!empty($_GET['id'])){
                $id = $_GET['id'];
            }
            else {
                $id= $_GET['student_id'];
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:23:39.697

当你写

`<select name="lvl" onchange="window.location='search_enroll.php?id='$_GET['student_id']">`

您实际上导航到将您带到该页面的同一个 student_id。

您想要做的是询问“用户选择了哪个 student_id？” 并在下一页加载中使用它。

HTML 应该类似于

```
<form action="search_enroll.php">
    <select name="id" onchange="submit()">
       <option> student_id_1 </option>
       <option> student_id_2 </option>
        ...
    </select>
</form> 
```

让我知道是否有任何问题。

这是一个[JSFiddle](http://jsfiddle.net/ZtGCU/)来模拟重新加载。（它会显示 404，因为 'search_enroll.php' 不存在，但您仍然可以看到重新加载有效。）

编辑：在我解释了此选择的目的后添加“隐藏”输入字段

如果您有 2 个字段（ student_id ，grade ），您应该在表单中添加一个隐藏的输入字段。表单应如下所示：

```
<form action="search_enroll.php">
        <input value="<?php echo $_GET['student_id']?>" type="hidden"/>
        <select name="grade" onchange="submit()">
           <option> student_id_1 </option>
           <option> student_id_2 </option>
            ...
        </select>
</form> 
```

这将确保用户之前选择的 student_id 将传递给另一个重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:18:55.143

如果您在表单中，则只需提交更改表单即可：

```
onchange="document.yourForm.submit()" 
```

所有参数都可用于您的 PHP 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:21:21.323

您不想在`select`元素中使用 PHP，因为它是在生成页面（服务器响应）时填充的，但您要做的是在请求发送到服务器时填充它。

最简单的方法是使用`onchange="document.aForm.submit()"`. 您的服务器端验证需要能够理解这是部分提交，并且不应向用户显示错误消息。

* * *

针对发帖人的问题：

您有以下事件链：

1.  客户请求表单页面。
2.  服务器发送响应，`select`元素填充`option`元素。
3.  客户端选择`option`元素的一个`select`元素。
4.  客户端向服务器发送请求，包括`option`选定的（*以某种方式*）。
5.  服务器发送响应，更改了一些表单元素，并`option`预先选择了客户端在上次请求中选择的元素。

服务器无法在第 1 步预填充元素的`onchange`属性`select`（并且不应该在第 5 步，因为客户端可能会更改他们的选择）；服务器不知道客户端将选择哪个选项，直到客户端在步骤 3 中选择并在步骤 4 中将该选项发送到服务器。

我和其他人建议`submit()`不要的原因`window.location`是，对于表单，客户可以按任何顺序填写字段，或者您以后可以在 之前添加字段`select`，在这种情况下，最好保留这些选择。如果 PHP在生成表单时`submit`从对象中获取所有字段，则保留这些。`POST`如果`window.location`使用，则`GET`请求中未包含的所有内容都将丢失。

如果您确实想使用`window.location`，则必须使用 JavaScript 来获取所选`option`路径的值（类似于`?id=document.aForm.selectElement.options[document.aForm.selectElement.selectedIndex]`）。

# android - 如何使用 Android sdk 在浏览器中创建程序化书签？

> ID：12040333
> 
> 赞同：1
> 
> 时间：2012-08-20T15:13:52.917
> 
> 标签：android, sdk, bookmarks, android-browser

我见过应用程序这样做，但我不知道从哪里开始。有什么提示吗？一些代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T05:08:59.090

```
/**
 * Add a bookmark to the database.
 * 
 * @param context
 *            Context of the calling Activity. This is used to make Toast confirming that the bookmark has been added. If the caller provides null, the Toast will not be shown.
 * @param cr
 *            The ContentResolver being used to add the bookmark to the db.
 * @param url
 *            URL of the website to be bookmarked.
 * @param name
 *            Provided name for the bookmark.
 * @param thumbnail
 *            A thumbnail for the bookmark.
 * @param retainIcon
 *            Whether to retain the page's icon in the icon database. This will usually be <code>true</code> except when bookmarks are added by a settings restore agent.
 */
static void addBookmark(Context context, ContentResolver cr, String url, String name, Bitmap thumbnail, boolean retainIcon) {

    final String WHERE_CLAUSE = "url = ? OR url = ? OR url = ? OR url = ?";
    final String WHERE_CLAUSE_SECURE = "url = ? OR url = ?";
    String[] SELECTION_ARGS;

    // Want to append to the beginning of the list
    long creationTime = new Date().getTime();
    // First we check to see if the user has already visited this
    // site. They may have bookmarked it in a different way from
    // how it's stored in the database, so allow different combos
    // to map to the same url.
    boolean secure = false;
    String compareString = url;
    if (compareString.startsWith("http://")) {
        compareString = compareString.substring(7);
    } else if (compareString.startsWith("https://")) {
        compareString = compareString.substring(8);
        secure = true;
    }
    if (compareString.startsWith("www.")) {
        compareString = compareString.substring(4);
    }
    if (secure) {
        SELECTION_ARGS = new String[2];
        SELECTION_ARGS[0] = "https://" + compareString;
        SELECTION_ARGS[1] = "https://www." + compareString;
    } else {
        SELECTION_ARGS = new String[4];
        SELECTION_ARGS[0] = compareString;
        SELECTION_ARGS[1] = "www." + compareString;
        SELECTION_ARGS[2] = "http://" + compareString;
        SELECTION_ARGS[3] = "http://" + SELECTION_ARGS[1];
    }
    Cursor cursor = cr.query(Browser.BOOKMARKS_URI, Browser.HISTORY_PROJECTION, secure ? WHERE_CLAUSE_SECURE : WHERE_CLAUSE, SELECTION_ARGS, null);
    ContentValues map = new ContentValues();
    if (cursor.moveToFirst() && cursor.getInt(Browser.HISTORY_PROJECTION_BOOKMARK_INDEX) == 0) {
        // This means we have been to this site but not bookmarked
        // it, so convert the history item to a bookmark
        map.put(Browser.BookmarkColumns.CREATED, creationTime);
        map.put(Browser.BookmarkColumns.TITLE, name);
        map.put(Browser.BookmarkColumns.BOOKMARK, 1);
        // map.put(Browser.BookmarkColumns.THUMBNAIL, bitmapToBytes(thumbnail));
        cr.update(Browser.BOOKMARKS_URI, map, "_id = " + cursor.getInt(0), null);
    } else {
        int count = cursor.getCount();
        boolean matchedTitle = false;
        for (int i = 0; i < count; i++) {
            // One or more bookmarks already exist for this site.
            // Check the names of each
            cursor.moveToPosition(i);
            if (cursor.getString(Browser.HISTORY_PROJECTION_TITLE_INDEX).equals(name)) {
                // The old bookmark has the same name.
                // Update its creation time.
                map.put(Browser.BookmarkColumns.CREATED, creationTime);
                cr.update(Browser.BOOKMARKS_URI, map, "_id = " + cursor.getInt(0), null);
                matchedTitle = true;
                break;
            }
        }
        if (!matchedTitle) {
            // Adding a bookmark for a site the user has visited,
            // or a new bookmark (with a different name) for a site
            // the user has visited
            map.put(Browser.BookmarkColumns.TITLE, name);
            map.put(Browser.BookmarkColumns.URL, url);
            map.put(Browser.BookmarkColumns.CREATED, creationTime);
            map.put(Browser.BookmarkColumns.BOOKMARK, 1);
            map.put(Browser.BookmarkColumns.DATE, 0);
            // map.put(Browser.BookmarkColumns.THUMBNAIL, bitmapToBytes(thumbnail));
            int visits = 0;
            if (count > 0) {
                // The user has already bookmarked, and possibly
                // visited this site. However, they are creating
                // a new bookmark with the same url but a different
                // name. The new bookmark should have the same
                // number of visits as the already created bookmark.
                visits = cursor.getInt(Browser.HISTORY_PROJECTION_VISITS_INDEX);
            }
            // Bookmark starts with 3 extra visits so that it will
            // bubble up in the most visited and goto search box
            map.put(Browser.BookmarkColumns.VISITS, visits + 3);
            cr.insert(Browser.BOOKMARKS_URI, map);
        }
    }
    if (retainIcon) {
        WebIconDatabase.getInstance().retainIconForPageUrl(url);
    }
    cursor.close();

} 
```

[您可以在此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.2.2_r1/com/android/browser/AddBookmarkPage.java?av=f)查看操作系统代码

# java - 如何将复选框树的复选框设置为禁用？

> ID：12040335
> 
> 赞同：1
> 
> 时间：2012-08-20T15:14:07.623
> 
> 标签：java, editor, render, jtree, jcheckbox

我使用了这个复选框树：[it.cnr.imaa.essi.lablib.gui.checkboxtree](http://www.essi-lab.eu/projectsSites/lablib-checkboxtree/apidocs/it/cnr/imaa/essi/lablib/gui/checkboxtree/package-summary.html)，这是介绍：[http ://www.javaworld.com/javaworld/jw-09-2007/jw-09-checkboxtree.html ?page=1](http://www.javaworld.com/javaworld/jw-09-2007/jw-09-checkboxtree.html?page=1)。

但是当我添加树节点时，我想将一些树节点设置为禁用。我可以使用什么api？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:03:37.430

在`TreeCheckingModel`接口中，方法之一是`setPathEnabled`.

你会`setPathEnabled(treePath, false)`禁用`TreePath`.

# ragel - 检查 Ragel 是否匹配整个输入

> ID：12040338
> 
> 赞同：3
> 
> 时间：2012-08-20T15:14:22.133
> 
> 标签：ragel

是否有更好的方法要求 Ragel 消耗所有输入？这是我现在使用的：

```
=begin
%%{
  machine my_lexer;
  # ...
  # extract tokens and store into `tokens`
  # ...
}%%
=end

class MyLexer

  %% write data;

  def self.run(string)
    data = string.unpack("c*")
    eof = data.length
    tokens = []
    %% write init;
    %% write exec;
    data.length == p ? tokens : nil
  end

end 
```

以上大部分都是样板，除了`data.length == p`测试。它有效——除了它不验证词法分析器是否以最终状态结束。因此，即使没有成功解析整个输入，我也有一些测试用例可以返回令牌。

有没有更好的办法？

（直接测试最终状态可能会更好。我正在研究如何做到这一点。想法？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T10:10:08.647

您可以使用全局或本地错误操作来处理错误。

对于全局错误操作，您可以使用以下语法：

```
$!action 
```

对于机器定义的本地错误操作，您可以使用以下语法：

```
$^action 
```

如果你在你的动作上加了一个标志，你可以检查这个标志来检测错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T07:14:52.740

我只是从 ragel 开始，但您可能希望查看 EOF 动作或错误动作，分别在输入结束或下一个字符不满足从当前状态的转换时执行。

# php - 将 Magento 的 var 目录放入 RAM

> ID：12040344
> 
> 赞同：1
> 
> 时间：2012-08-20T15:14:39.827
> 
> 标签：php, mysql, magento, caching, optimization

我需要加快我的 magento 安装速度，所以我打算将 'var/'（或仅 var/cache 和 var/sessions）的内容放在 tmpfs 上。

我还在亚马逊上购买了一个预留实例，所以我想保留足够数量的 RAM。我想启用 memcached、PHP Apc、MySQL 缓存和 HTTP 缓存。

我正在考虑具有以下规格的*中型预留实例：*

```
3.75 GB memory
2 EC2 Compute Unit (1 virtual core with 2 EC2 Compute Unit)
410 GB instance storage
32-bit or 64-bit platform
I/O Performance: Moderate
EBS-Optimized Available: No
API name: m1.medium 
```

RAM 是否足以应用一个好的缓存系统？现在看（3 个月后）var 目录是 14gb，但我认为每 5/7 天清理一次也很好。

你对我有什么建议吗？

PS 商店将包含平均 100/150 种产品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:19:40.407

我认为搬到`/var`a`tmpfs`可能不是你最大的瓶颈，而且可能比它的价值更麻烦。确保 Magento 缓存已启用并且您已启用 APC。

这篇文章涵盖了一些关于提高 Magento 性能的一般技巧：

[为什么 Magento 这么慢？](https://stackoverflow.com/questions/1639213/why-is-magento-so-slow)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T15:27:00.937

我建议考虑设置像 Varnish 这样的反向代理。

*   [让 Varnish 在 Magento 上工作](https://stackoverflow.com/questions/5029593/getting-varnish-to-work-on-magento)

如果您确实打算仅使用`tmpfs`内存中的 a，我建议您研究 Colin 的改进`Zend_Cache_Backend_File`

*   [https://github.com/colinmollenhour/Cm_Cache_Backend_File](https://github.com/colinmollenhour/Cm_Cache_Backend_File)

此外，我建议`mytop`您密切关注是否有任何地方可以优化应用程序本身的查询或`my.cnf`帮助缓解任何数据库瓶颈。

*   [http://jeremy.zawodny.com/mysql/mytop/](http://jeremy.zawodny.com/mysql/mytop/)

Session Digital 有一个关于优化 Magento 企业的很好的白皮书（虽然有些过时），同样可以应用于社区。正如白皮书中提到的，在我尝试过的所有方法中，Varnish 提供了最显着的响应时间增加。

*   [http://www.sessiondigital.com/resources/tech/060611/Mag-Perf-WP-final.pdf](http://www.sessiondigital.com/resources/tech/060611/Mag-Perf-WP-final.pdf)

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T20:31:31.760

首先，对这里的所有答案 +1。

如果您正在考虑在 tmpfs 之外运行 /var/，这可能是因为**您听说过**AWS 上糟糕的文件 IO，或者您自己遇到过问题。但是，/var/ 目录是您最**不**关心的 - Zend / Magento 的自动加载器对 IO 的负担更大。为了减轻您想要运行 APC 和编译的影响（假设您没有使用持久购物车）。

正如其他评论者所回应的那样，任何从缓存或内存运行的东西都会绕过 PHP，因此需要接触磁盘并引发 IO 问题。Varnish 是一种蛮力的方法，并且是在可扩展至数百万浏览量的大型网站上的出色工具；但我相信 Varnish 对 SSL 的限制以及我们 Magento 社区缺乏真正的文档和支持使其成为比实际替代方案更好的智力选择。

在运行 Magento Community 时，我更喜欢在 Medium 实例上运行 Tinybrick 的 Lightspeed on AWS - 这给了我最大的收益，而且它本身就是一个整页缓存。在此设置中，我每秒获得 200 多个并发页面，并且我没有运行 memcached 或使用编译。

> > [http://www.tinybrick.com/improve-magentos-slow-performance.html/](http://www.tinybrick.com/improve-magentos-slow-performance.html/)

在您的 AWS 实例中运行 memcached 时也要小心——我发现它可能会受到耗电的 Apache 的阻碍，在极少数情况下您没有准备好的缓存，这会在等待缓存响应时导致 Apache maxclients 问题. 如果你负担得起的话，我宁愿运行两个微型 Apache 实例，它们前面有一个共享的 memcached 会话存储和一个负载均衡器——不过，在一个单独的盒子上为数据库提供一些马力供它们共享。但是所有设置都是独一无二的，您的流量/使用情况将决定您**需要**什么。

我在 AWS 云中运行 Magento 已经 3 年了，并且取得了巨大的成功——我希望你也一样。干杯。

# regex - c ++中用于控制字符-空格的正则表达式

> ID：12040347
> 
> 赞同：1
> 
> 时间：2012-08-20T15:14:55.127
> 
> 标签：regex

c++中的正则表达式

有没有办法检查所有没有空格的控制字符（制表符，换行符，回车）？

我尝试了一些没有成功的东西

[:cntrl:] 考虑所有控制字符，包括空格(\n\r\t))

我想考虑除空间之外的所有控制？

这是这样做的有效方法吗？

[:cntrl:]-[:空格:]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:58:22.363

我认为没有任何正则表达式实现允许您构造 POSIX 字符类的子集。但是任何字符串匹配`^([^[:cntrl:]]|[[:space:]])*$`都会满足您的条件。也就是说，每个字符都必须是非控制字符或空格字符。

（不知道 C++ 支持什么风格；我相信你不应该用反斜杠转义任何东西，但还没有检查。）

# c# - 组合多个 .NET 解决方案后出现调试问题

> ID：12040349
> 
> 赞同：0
> 
> 时间：2012-08-20T15:15:08.577
> 
> 标签：c#, asp.net, .net, visual-studio-2010

我是如何到达现在的位置的。我有 3 个“子”解决方案（Web 应用程序）我想组合成 1 个“父”解决方案（Web 应用程序）。

在我的父解决方案中，我添加了 3 个新的解决方案文件夹。对于每个解决方案文件夹，我选择“添加现有项目...”在那里我选择了每个子项目的 *.sln。

我已将子项合并/排除：Web.Config 文件、Global.asax、CSS 和 C# 类到父项目中各自的文件中。

父解决方案构建成功。父解决方案中的 *.aspx 文件在调试模式下按预期运行。

我遇到的问题/问题是关于链接到子解决方案中的 *.aspx 文件。我一直无法在调试模式下找到将我定向到子解决方案中预期的 *.aspx 的 URL。在子解决方案中，我尝试浏览的 *.aspx 文件不断收到 404。

如果我不得不猜测我需要对子解决方案的“属性”页面上的“Web”选项卡进行更改...但是，我不确定要进行哪些更改。

有什么建议么？

# sencha-touch-2 - Sencha touch 2 标题省略号

> ID：12040351
> 
> 赞同：5
> 
> 时间：2012-08-20T15:15:19.950
> 
> 标签：sencha-touch-2, titlebar, ellipse

尽管水平空间很大，但 table view 上的标题有省略号。我在 .x-title .x-innerhtml 下的 default-style.css 中看到它。椭圆时调整的正确方法是什么？而且，如果您感觉活泼，在这种情况下我应该使用的方法来找到答案会有所帮助。例如，我查看了 sencha 的 API 文档，找到了 Ext.String.ellipsis、Ext.util.Format.ellipsis 和 Global_CSS.ellipsis。我看到了文档，但不确定如何实际更改省略号的处理方式。

```
 items: [
                        {
                            xtype: 'container',
                            title: 'Bla Mobile',
                            layout: {
                                type: 'vbox',
                                pack: 'start',
                                align: 'center'
                            }, 
```

编辑：
我将此添加到我的 style.css 以修复它：

```
.x-title { padding:0 .3em; }

.x-title .x-innerhtml { padding: 0; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:05:51.750

这似乎是 webkit 中的一个错误，我想出了这个解决方案：

```
.x-title .x-innerhtml:after {
    content: '';
    display: inline-block;
    width: .3em; /* equal to the amount of padding on the element */
} 
```

# arm - 如何强制 thumb2 指令集的功能从 32 位对齐地址开始？

> ID：12040352
> 
> 赞同：0
> 
> 时间：2012-08-20T15:15:19.137
> 
> 标签：arm, thumb

thumb2指令集中有16位和32位指令。函数可以从 16 位或 32 位对齐地址开始。有没有办法让所有函数都从 32 位对齐地址开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:47:16.880

如果您使用的是 GCC，我认为您可以通过 -falign-functions=4。

# vim - vim：制表符后无法匹配空格

> ID：12040358
> 
> 赞同：0
> 
> 时间：2012-08-20T15:15:39.140
> 
> 标签：vim

我有这样的文本（1 或 0 个制表符 + 行开头的多个空格）：

```
(tab)   There are a tab and 4 whitespaces before me.    // line 1
(tab)     There are a tab and 6 whitespaces before me.  // line 2
       There are 6 whitespaces before me.               // line 3
   There are 4 whitespaces before me.                   // line 4 
```

当我使用`^[\t\s]\s*`时，只有第 1,2 行匹配，第 3、4 行不匹配，为什么？

（当我使用`^\s*`时，可以匹配第 3 行和第 4 行。）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:22:05.190

事实证明，您不能`\s`使用`[]`. 只需`在`[]`.`

 `* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:21:32.913

这太有趣了。我不确定为什么在括号内`\s`不起作用。`[]`也许是因为`[]`定义了明确的字符并且`\s`是模棱两可的（它可以代表多个字符）。换句话说`\s`，代表任何空白，包括制表符( `\t`)。但是，如果您在这种情况下明确指定一个空格 ( `^[\t ]\s*`)，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:15:34.470

如前所述`\s`，在 内不起作用`[]`，或者您可以使用`[:blank:]`字符类：

```
^[[:blank:]]\+ 
````

# entity-framework - Entity Framework 4.3.1 Table Per Type Code First 在 SQL Server Express 2008 和 SQL Server 2008R2 中生成不同的架构

> ID：12040362
> 
> 赞同：1
> 
> 时间：2012-08-20T15:15:49.697
> 
> 标签：entity-framework, ef-code-first, sql-server-2008-r2, entity-framework-4.3, entity-framework-4.3.1

我正在使用 EF CodeFirst 生成相当大的模式，包括 TPT 表，例如

```
[Table("MissingReplacementDongles")]
public class MissingReplacementDongle : ReplacementRentalDongle
{
    public virtual bool OriginalStolen { get; set; }
}

public abstract class ReplacementRentalDongle : ConsequentialRentalDongle
{
    public virtual Money ReplacementCharged { get; set; }
}

[Table("ConsequentialRentalDongles")]
public abstract class ConsequentialRentalDongle : RentalDongle
{
}

[Table("RentalDongles")]
public abstract class RentalDongle : BaseConstraint
{
    public virtual DateTime CurrentExpirationDate { get; set; }

    public virtual DateTime? ReturnedDate { get; set; }
} 
```

我一直在针对 SQL Server Express 2008 安装进行开发，这可以完美地生成表，即带有 ReplacementCharged_Id 列的 ReplacementRentalDongles 表，它引用了 Money 表。

但是，当我运行相同的代码，但使用 SQL Server 2008R2 Developer 实例时，生成的表是不同的！在这种情况下，ReplacementCharged_Id 列最终会在“基本”表 BaseConstraint 中生成。

这是 EF 4.3.1 中的错误，因为不同的 SQL Server 版本最终会创建不同的架构？EF 是否与 SQL 2008R2 兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:22:24.767

只是为了让大家知道我设法解决了这个问题 - 只需升级到 Entity Framework 5.0（仅在两周前发布 - [http://blogs.msdn.com/b/adonet/archive/2012/08/15/ ef5-released.aspx](http://blogs.msdn.com/b/adonet/archive/2012/08/15/ef5-released.aspx) )

EF 5.0 实现了在 .NET 4.5 上运行时可用的新功能（我们不是，我们在 .NET 4.0 上）。但是，EF 5 确实也可以在 .NET 4 上运行，当在 .NET 4 上运行时，它实际上似乎也是 EF 4.3.1 的错误修复的汇总。

短版 - 将 EF DLL 升级到 5.0（通过 NuGet），现在为 SQL 2008 Express 和 2008R2 上的新数据库生成相同（正确！）架构，效果很好！

一个小警告 - 我必须使用额外的`using`指令更新我的源代码，因为`[Table]`, `[InverseProperty]`etc 属性已被移动到`System.ComponentModel.DataAnnotations.Schema`命名空间中（它们`System.ComponentModel.DataAnnotations`在 EF 4.3.1 的命名空间中）

简单的解决方案 - 只需升级！

# android-calendar - 如何获取 Android 4.0 的唯一日历事件 ID？

> ID：12040367
> 
> 赞同：3
> 
> 时间：2012-08-20T15:15:57.483
> 
> 标签：android-calendar

我们正在开发一个可以在所有版本的 Android 操作系统上运行的应用程序。

在我们的应用程序中，我们需要获取日历事件，这些事件将从手机随附的默认日历应用程序中添加。

我已经检查了 CalendarContract.Calendars、CalendarContract.Events 和 CalendarContract.Attendees 表。在 Calendars 表中没有事件 id 。但是在事件和与会者表中 event_id 在那里。如果我们在 Galaxy Nexus 的默认日历应用程序中插入日历事件，那么它会将 event_id 插入为 1、2、3、4。但是在 Android 2.1 中，我们得到了一个名为 iCalGuid 的优秀字段......我们得到了独特的日历 eventId，如 GUID 字段......他们有什么方法可以在较低版本中将 Android 4.0 中的日历事件 ID 作为 iCalGuid 获取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:45:56.127

我通过组合日历事件表的 5 列来创建唯一 id 解决了这个问题 -----

首先设置日历URI值如下---

```
Uri calenderContentUri;
if(Build.VERSION.SDK_INT >= 8)
{
     calenderContentUri = Uri.parse("content://com.android.calendar/events");
}
else
{
    calenderContentUri = Uri.parse("content://calendar/events");
} 
```

**注意 :: 不要使用像 Events.CONTENT_URI 这样的常量值。取而代之的是，如上所示设置 uri。**

**接下来**，我通过组合 Event 表的 5 列（title、ownerAccount、eventLocation、dtstart、dtend）来制作自定义复合唯一**键。**我在任何地方都在使用这个 id，它解决了我的问题。

```
if (Build.VERSION.SDK_INT >= 14)
                    {
                        String[] projection = null;
                        //By default  you have the following calendars in your android phone like 
                        //My Calendar, Gmail calendar,  Indian holydays or if you have installed some
                        //third party calendar app etc. They will be automatically given an unique id by OS.
                        //In the next line "selectedCalenderId" is indicating a perticular calendar like My Calendar or Gmail calendar.
                        //You need to write seperate code to get those particular calendar ids. here "selectedCalenderId" is that type of id(in my case value may be 0(My Calendar). 1(Gmail Calendar), or 3(Indian Holydays))
                        String selection = "calendar_id=" +selectedCalenderId +" and dtstart between ? and ?";

                        //provide the time range(in system mili seconds)  from what you want to get the events.
                        String[] selectionArgs = new String[] {getTimeInMilisecond(day + " 00:00:00"), getTimeInMilisecond(day + " 23:59:59")};

                        Cursor cursor = null;

                        try
                        {
                            cursor = getContentResolver().query(calenderContentUri, projection, selection, selectionArgs, "dtstart DESC, dtend DESC");
                            if (cursor.moveToFirst())
                            {
                                int increment = 0;

                                String eventName;
                                String calendarOwnerName;
                                String location;
                                long eventBeginTime;
                                long eventEndTime;

                                String description;
                                String calendarSyncId;

                                String customCalendarEventId ;

                                do
                                {
                                    eventName = cursor.getString(cursor.getColumnIndex("title"));
                                    eventBeginTime = cursor.getLong(cursor.getColumnIndex("dtstart"));
                                    eventEndTime = cursor.getLong(cursor.getColumnIndex("dtend"));
                                    location = cursor.getString(cursor.getColumnIndex("eventLocation"));
                                    calendarOwnerName = cursor.getString(cursor.getColumnIndex("ownerAccount"));
                                    description = cursor.getString(cursor.getColumnIndex("description"));

                                    //Watch that I am combining the 4 columns
                                    calendarSyncId = eventName +"-" +calendarOwnerName +"-" +location +"-" +eventBeginTime+"-" +eventEndTime;

                                    //Making MD5 encryption to use it as unique key
                                    customCalendarEventId =  yourMD5EncryptionLogic(calendarSyncId);

                                    //TODO ::: Do the rest of your coding for OS version higher than 14.
                                }
                                while(cursor.moveToNext());
                            }
                        }
                        finally  {
                            if(cursor != null) {
                                cursor.close();
                            }
                        }
              }
              else
              {
                    String[] projection = null;
                    //By default  you have the following calendars in your android phone like 
                        //My Calendar, Gmail calendar,  Indian holydays or if you have installed some
                        //third party calendar app etc. They will be automatically given an unique id by OS.
                        //In the next line "selectedCalenderId" is indicating a perticular calendar like My Calendar or Gmail calendar.
                        //You need to write seperate code to get those particular calendar ids. here "selectedCalenderId" is that type of id(in my case value may be 0(My Calendar). 1(Gmail Calendar), or 3(Indian Holydays))
                    String selection = "calendar_id=" +selectedCalenderId +" and dtstart between ? and ?";
                    String[] selectionArgs = new String[] {getTimeInMilisecond(day + " 00:00:00"), getTimeInMilisecond(day + " 23:59:59")};

                    Cursor cursor = null;

                    try
                    {
                        cursor = getContentResolver().query(calenderContentUri, projection, selection, selectionArgs, "dtstart DESC, dtend DESC");
                        if (cursor.moveToFirst())
                        {
                            int increment = 0;

                            String eventName;
                            String calendarOwnerName;
                            String location;

                            long eventBeginTime;
                            long eventEndTime;

                            String description;
                            String calendarGuid;

                            String customCalendarEventId;

                            int selfAttendanceStatusVal = -1;

                            do
                            {
                                selfAttendanceStatusVal = cursor.getInt(cursor.getColumnIndex("selfAttendeeStatus"));
                                eventName = cursor.getString(cursor.getColumnIndex("title"));
                                eventBeginTime = cursor.getLong(cursor.getColumnIndex("dtstart"));
                                eventEndTime = cursor.getLong(cursor.getColumnIndex("dtend"));
                                location = cursor.getString(cursor.getColumnIndex("eventLocation"));
                                calendarOwnerName = cursor.getString(cursor.getColumnIndex("ownerAccount"));
                                description = cursor.getString(cursor.getColumnIndex("description"));

                                //Watch that I am combining the 4 columns
                                calendarGuid = eventName +"-" +calendarOwnerName +"-" +location +"-" +eventBeginTime+"-" +eventEndTime;

                                //Making MD5 encryption to use it as unique key
                                customCalendarEventId =  yourMD5EncryptionLogic(calendarSyncId);

                                //TODO ::: Do the rest of your coding for OS version less than 14.
                            }
                            while(cursor.moveToNext());
                            }
                        }
                        finally  {
                            if(cursor != null) {
                                cursor.close();
                            }
                        }
              } 
```

# python - Django：清理 HTML 和 Textile

> ID：12040370
> 
> 赞同：1
> 
> 时间：2012-08-20T15:16:10.713
> 
> 标签：python, django, formatting, escaping, textile

我希望能够清理输入的 HTML 标签（例如，来自表单，这样用户就不会弄乱 HTML 标签），但允许用户通过 Textile 进行一些格式化（django.contrib.markup） . 下面的例子。

在我对它进行 Textil 化之前，我曾尝试对过滤器中的内容进行转义，就像这样`{{ data|escape|textile }}`，但它不起作用，似乎 Textile 未转义转义字符。

我应该怎么做？

我想做的例子：

*   在我的表格中输入以下内容：

    > <b>加粗的 HTML 标签；应该转义 </b>
    > *粗体带有纺织标签；应该显示为粗体*

*   我想在我的模板中看到的结果：

    > <b>加粗的 HTML 标签；应该
    > **用纺织品标签转义</b>粗体；应该显示为粗体**

作为记录，它类似于这个线程，但对于 Django： [我如何纺织和清理 html？](https://stackoverflow.com/questions/501737/how-do-i-textile-and-sanitize-html?rq=1)

# xml - 试图确定解决我的编程问题的方法

> ID：12040372
> 
> 赞同：0
> 
> 时间：2012-08-20T15:16:20.777
> 
> 标签：xml, parsing, architecture, excel-2003

我得到了这个问题。我有大约 10k 个包含一堆性能数据的 xml 文件。我需要parce，然后将它们导入excel，这样我就可以从中生成一个图表。

我正在尝试确定解决此问题的最佳方法。我无法直接导入，因为 excel 无法将其识别为有效的 xml 格式。（excel给了我无法识别的架构或某些东西）

文件格式是这样的：（我只包含了有用的信息。）文件的名称是这样的：YYDDMM.startOfPMPeriod_endOfPMPeriod 并且在文件中：

```
<time stamp>
<PM category1>
<PM category2>
<PM category3>
...

<sub system 1>
<result>1</result>
<result>2.0</result>
...

<sub system 2>
<result>0.221</result>
<result>2.0</result>
...

<sub system n>
<result>1</result>
<result>2.0</result> 
```

这些文件大约有 10k 个。每个文件大约有 6k 行。:)

我不确定如何解决这个问题。我得到了它的基本逻辑：

```
while (we got more files to read) 
    read a file
    parse PM category and timestamp
          while (not end of file)
               reading in results data and the subsystems
    //store it in an array of some sort, but I am not sure about the structure of it
//once we are done with our files
pass the array to excel, (somehow, maybe as a CSV?) 
```

你们认为解决这个问题的最佳方法是什么？我的编程能力有限。我熟悉 java、c++ 和 bash 脚本。3维数组超出了我的范围。我在二维方面遇到了足够的麻烦。:) 我最复杂的任务是用 java 制作一个多线程的银行应用程序。

戴维

更新：它适用于 excel 2003，excel 表应如下所示：我无法附加图像，因此您将不得不这样做：

```
 timestamp 1   timestamp2  timestamp 3
subsystem 1 pm cat 1
            pm cat 2
            pm cat 3

subsystem 2 pm cat 1
            pm cat 2
            pm cat 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:31:40.557

我建议您首先使用[VSTO](http://www.microsoft.com/en-us/download/details.aspx?id=20923)插入一条数据。插入单行后，您可以重复使用所学的内容来插入多行。

XML 到 NxN 数组是攻击 XML 解析的一种过于复杂的手段。XML 解析可以通过[XPATH](http://www.w3schools.com/xpath/default.asp)或[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)有效地完成。如果您没有使用 LINQ 的经验，也许 XPATH 是一个更好的开始。

首先弄清楚您希望行在 excel 中如何显示，然后相应地提取 XML。这将避免 N x N 数组，并为您提供生成已知输出的目标。

# vb.net - 更新查询在 Vb.NET 中不起作用

> ID：12040375
> 
> 赞同：1
> 
> 时间：2012-08-20T15:16:31.910
> 
> 标签：vb.net, ms-access

我正在尝试使用 update 更新数据库，但由于某种原因数据库没有得到更新，我使用了以下查询：

```
Dim dc As OleDbCommand
dc = New OleDbCommand("UPDATE tempM1 SET [input] = '" & ans_selected & "' WHERE question = '" & question & "'", cn)
dc.ExecuteNonQuery() 
```

我正在使用另外 1 个更新查询并且它工作正常：

```
dc = New OleDbCommand("UPDATE tempTof SET [input] = '" & optionSelected & "' WHERE question = '" & question & "'", cn)
dc.ExecuteNonQuery() 
```

请帮助...我浪费了将近 2 个小时来找出问题所在，但无法调试它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:38:40.570

您应该始终使用参数化查询，我也没有在您的代码中看到您打开连接的位置

```
Dim cn As OleDbConnection
Using(cn = GetConnection())
    cn.Open();
    Dim dc As OleDbCommand 
    dc = New OleDbCommand("UPDATE tempM1 SET [input] = ? WHERE question = ?", cn) 
    dc.Parameters.AddWithValue("@ans", ans_selected)
    dc.Parameters.AddWithValue("@question", question)
    dc.ExecuteNonQuery() 
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:03:46.790

```
Dim dc As OleDbCommand
dc = New OleDbCommand("UPDATE tempM1 SET [input] = '" & ans_selected & "' WHERE question = '" & question & "'", cn) 
```

> ## 在这里放一些东西来检查 dc.CommandText 例如：
> 
> ```
> Console.WriteLine dc.CommandText 
> ```

```
dc.ExecuteNonQuery() 
```

dc.CommandText 是否真的包含您期望它包含的内容？

如果是这样，它会说类似

```
UPDATE tempM1 SET [input]='foo' WHERE question='bar' 
```

然后通过直接转到数据库并检查用 UPDATE 替换 SELECT 是否返回至少一行来仔细检查：

```
SELECT * FROM tempM1 WHERE question='bar' 
```

如果所有这些步骤都令人满意并且您仍然卡住：

1.  仔细检查连接字符串是否真正指向您认为的同一数据库。
2.  绕过您的代码并直接在底层数据库中执行 UPDATE 命令并检查是否允许。

# resize - 调整窗口大小时如何使可见的固定位置元素

> ID：12040376
> 
> 赞同：1
> 
> 时间：2012-08-20T15:16:34.327
> 
> 标签：resize, window, position, fixed

我有 id="fixed" 和以下css样式的元素：

`#fixed { position: fixed; width: 100%; background: #444; height: 70px;}`

在此元素中是其他具有 class="inner" 并遵循 css 样式的元素：

`#fixed .inner {width: 1000px; margin: 0 auto;}`

#fixed 元素必须是固定位置，换句话说，#fixed 元素必须始终位于页面顶部。

现场示例[在这里](http://www.pavelhanys.cz/nahledy/test-page.html)。

当我在 800 像素（右侧菜单的 1000 宽度）下调整窗口大小时，右侧菜单消失并且没有可用的滚动条。

提前感谢您对如何解决此问题的任何想法。

夏维尔

# mysql - 将日期与 MySQL 中的 IF 语句进行比较

> ID：12040380
> 
> 赞同：1
> 
> 时间：2012-08-20T15:16:51.447
> 
> 标签：mysql

我有以下两个表`education`，`jobs`每个表都有时间戳字段。在后续语句中，我想选择并确定两个表上保存的两个时间戳中的哪一个是最新的。

我在下面尝试过，没有任何乐趣；

```
 SELECT e.StartDate, j.LastTimeModified, 
   IF(e.StartDate > j.LastTimeModified)
    THEN e.StartDate
   ELSEIF (j.LastTimeModified > e.StartDate)
    THEN j.LastTimeModified
  AS lastmodified FROM education e, jobs j; 
```

任何指针-:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:23:48.713

您应该使用另一个 IF 结构，例如 -

```
SELECT IF(a > b, column1, column2) FROM table 
```

对于更复杂的解决方案，请使用 CASE WHEN 函数，例如 -

```
SELECT CASE WHEN a > b THEN column1 WHEN a < b THEN column2 ELSE column3 END FROM table; 
```

文档：[控制流函数](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html)。

# python - 将 pydoc 用于非公共/私人课程

> ID：12040381
> 
> 赞同：5
> 
> 时间：2012-08-20T15:16:51.503
> 
> 标签：python, private, pydoc, private-class

当我使用 _ 作为类名的前缀时（另请参见[this](http://docs.python.org/tutorial/classes.html#private-variables-and-class-local-references)和[this](https://stackoverflow.com/questions/551038/private-implementation-class-in-python)），该类变为非公共并且不被 pydoc 显示：

```
 class _DoNotShowMeInPydoc:
      """Class Documentation which is not displayed""" 
```

这正是我想要的，因为这个类只在内部使用，对于使用该模块的人来说并不重要。

但是 - 如果有人来想了解我的模块的内部结构怎么办，（当然）也记录在案。pydoc 是否有显示非公共类的标志或选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-28T19:01:50.567

让我们假设文档有各种各样的受众，并且通过与源代码本身分开的文档来阅读代码是有价值的。

Pydoc 几乎不支持任何开关来控制输出。访问级别通常是临时约定，而不是 python 语言的一部分。

Pydoc 遵循这个不容易[总结的规则](https://github.com/python/cpython/blob/aaf42222cfd5774d23ca48ff304ace1f64426201/Lib/pydoc.py#L273)来决定什么是 private-as-in-do-not-document。因此，您唯一的选择是更改代码以使其通过 visiblename() 函数。

[Pdoc3 是 pydoc 的替代品，它使用`__pdoc__`字典](https://github.com/pdoc3/pdoc/blob/master/pdoc/documentation.md#overriding-docstrings-with-__pdoc__)来覆盖类似于 pydoc 的规则。

我创建了一个[pydoc 的分支，](https://github.com/matthewdeanmartin/pydoc_fork)它默认为所有内容生成文档。

# jquery - 更改选择器/框的颜色和样式

> ID：12040386
> 
> 赞同：-1
> 
> 时间：2012-08-20T15:17:06.057
> 
> 标签：jquery, selectable

使用 Selectable 处理图像裁剪。如何更改标准选择器（选择时绘制的虚线框）颜色和其他样式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:07:25.770

听起来您正在使用 UI Selectable 库，因此您需要修改`.ui-selectable-helper`CSS 类。

它的当前定义可以在[https://github.com/jquery/jquery-ui/blob/master/themes/base/jquery.ui.selectable.css看到](https://github.com/jquery/jquery-ui/blob/master/themes/base/jquery.ui.selectable.css)

# javascript - JSON关联数组到变量？

> ID：12040387
> 
> 赞同：0
> 
> 时间：2012-08-20T15:17:07.250
> 
> 标签：javascript, json

我有一个 JSON 关联数组

```
[{"Test":"5:00pm"},{"Testing2":"4:30 pm"}] 
```

我想让它成为一个数组

```
{
  theatre = Test
  time = 5:00pm
},
{
  theatre = Testing2
  time = 4:30 pm
} 
```

但我不知道如何取一个键名并使其成为一个值......

有什么帮助吗？我在看，`Object.keys`但找不到合适的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:24:35.963

您有一个包含对象值的数组。您需要遍历它们：

```
var oldArray = [{"Test":"5:00pm"},{"Testing2":"4:30 pm"}];
var newArray = [];

for (var i = 0; i < oldArray.length; i++) {
    var keys = Object.keys(oldArray[i]);

    newArray.push({
        theatre: keys[0],
        time: oldArray[i][keys[0]]
    });
} 
```

[http://jsfiddle.net/FNAtw/](http://jsfiddle.net/FNAtw/)

`newArray`这将为您提供一个包含两个元素的数组。第一个元素是具有 kvps`theatre: 'Test'`和的对象`time: '5:00pm'`。第二个元素是具有 kvps`theatre: 'Testing2'`和的对象`time: '4:30pm'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:21:17.850

试试这个解决方法：

```
var json = '[{"Test":"5:00pm"},{"Testing2":"4:30 pm"}]';
var betterJson = json.replace('{"', '{"theatre":"').replace('":"','",time:"'); 
```

如果 JSON 总是像上面那样简单，那么这应该可以工作。但是很脆...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:23:07.230

如果你有一个 JS 对象，你可以使用[Object.keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)。这将适用于最新的浏览器。

您还可以循环每个项目并只保存第一个项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:29:00.487

```
var result = [];
var str = [{"Test":"5:00pm"},{"Testing2":"4:30 pm"}];
for (var i = 0; i < str.length; i++) {
    var obj = {};
    foreach (var key in str[i]) {
        obj.theatre = key;
        obj.time = str[i][key];
    }
    result.push(obj);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T15:32:51.547

可能有点笨拙，但应该可以跨浏览器工作。

```
var js = [{"Test":"5:00pm"},{"Testing2":"4:30 pm"}]
var newJSON = []
for(var i = 0; i< js.length; i++) {
    for( var key in js[i]) {
        if(js[i].hasOwnProperty(key)) {
            var tmpJS= {};
            tmpJS['theater'] =  key;
            tmpJS['time'] = js[i][key];
            newJSON.push(tmpJS);
        }
    }
} 
```

# windows-8 - WinRT / Metro 应用程序限制是如何实施的？

> ID：12040390
> 
> 赞同：2
> 
> 时间：2012-08-20T15:17:11.197
> 
> 标签：windows-8, microsoft-metro, windows-runtime, executable

Windows 8 中的新 Metro 风格/WinRT 应用程序对您可以调用的 API 有一定的限制。此外，您必须使用异步技术，并且您的应用程序必须是可暂停的，等等。我想知道如何以及是否所有这些都被强制执行。

新的 Metro 应用程序是简单的可执行程序，还是其他的东西（例如，更像 COM 控件，具有一组定义的接口）？API 限制是如何在编译时、运行时（通过沙盒等）或仅通过 Windows 应用商店策略（类似于 iOS 中的情况）实施的？如果我觉得自己很狡猾，我是否可以例如获得屏幕句柄并操作界面、在顶部添加浮动窗口、在后台启动某些东西，或者以其他方式突破 Metro 的限制？

我问的一个原因是我正在研究为 Python 创建一个 WinRT 库，以便可以使用它来编写 Metro 应用程序。但是，Python 核心显然使用了大量非 WinRT API 调用，因此这可能从一开始就注定了。我还想大致了解 Metro 应用程序的结构。

* * *

编辑：根据[这个线程](http://mail.python.org/pipermail/python-dev/2012-January/115426.html)，您可以使用 C 运行时的所有功能。似乎您可以编译调用禁止函数的东西，但是“应用程序验证程序”会抱怨。我想知道你是否可以运行这样一个混合应用程序，如果你不关心商店（也许稍后通过为被禁止的功能编写变通方法使其与商店兼容）......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T15:53:18.610

~~Metro 风格~~的Windows 应用商店应用程序可以做什么（至少）有两组不同的技术限制。

首先是一组安全限制：Windows 应用商店应用程序以低权限运行，因此在允许它们与系统其余部分交互方面受到限制。例如，Windows 应用商店应用程序无法访问文件系统中的任意位置，它只能访问预定义位置集中的文件，以及系统明确允许访问的文件。您不能违反这些安全限制（如果可以，那将是一个相当有问题的操作系统错误）。

第二组限制是*API 分区*。Windows 应用商店应用只允许调用应用分区中存在的系统函数。MSDN 上每个系统函数的文档指定该函数是否存在于 App Partition 中。您还可以通过查看定义函数的头文件找到：函数是根据项目所针对的 API 分区有条件地定义的：`WINAPI_FAMILY`宏对此进行控制（有关更多信息，请参见 Windows SDK 中的 winapifamily.h）。

如果您调用“未经批准”的函数，则结果未定义。它可能看起来有效；它可能会灾难性地失败。它今天可能看起来工作正常，明天可能会发生灾难性的故障（或在应用 Windows 更新后，或使用下一版本的 Windows）。

API 分区以各种方式实施。标头的构造使得*很难*调用未经批准的函数。如果您自己定义函数或更改`WINAPI_FAMILY`，您的应用将无法通过 Windows 应用认证工具包 (WACK) 过程。我的理解是 CLR 禁止在运行时调用未经批准的 .NET 功能，尽管我不太熟悉 .NET 限制。无论如何，我的理解是，如果您的应用调用未经批准的功能，您不能将其提交到商店，根据[“Windows 8 应用认证要求”](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)（请自行阅读这些要求；我没有详细阅读它们并且我当然不能为你解释它们）。

如果您不关心将应用程序提交到 Windows 应用商店，或者只是想编写一些测试应用程序或玩 WinRT，那么没有什么可以阻止您尝试调用未经批准的函数。例如，我发现[为调试目的创建控制台窗口](http://seaplusplus.com/2012/06/25/printf-debugging-in-metro-style-apps/)很有用。这似乎工作正常，我不太在意它未能通过 Windows 应用商店认证，因为它仅用于调试和测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:19:25.703

它们不是标准的可执行文件。您只能使用 .Net 4.5 的一个子集来创建不允许您（或者更确切地说，使其极难）执行 MS 不希望 Metro 应用程序执行的任何操作的应用程序。它们也被大量沙盒化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:25:14.250

[您只有有限的 .net api 部分可用](http://msdn.microsoft.com/en-us/library/windows/apps/br230302.aspx)：

> .NET Framework 提供了托管类型的子集，可用于使用 C# 或 Visual Basic 创建适用于 Windows 的 Metro 风格应用程序。此托管类型的子集称为 .NET for Windows Store 应用程序，它使 .NET Framework 开发人员能够在熟悉的编程框架内创建 Metro 风格的应用程序。与开发 Metro 风格应用程序无关的任何类型都不包含在子集中。
> 
> 您可以将这些托管类型与来自 Windows 运行时 API 的类型一起使用来创建 Metro 风格应用。通常，您不会注意到使用托管类型和 Windows 运行时类型之间的任何区别，只是托管类型驻留在以 System 开头的命名空间中，而 Windows 运行时类型驻留在以 Windows 开头的命名空间中。.NET for Windows Store 应用程序和 Windows 运行时一起提供了完整的类型和成员集，可用于使用 C# 或 Visual Basic 开发 Metro 风格的应用程序。

[有应用商店要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)。

> 3.1 您必须仅使用 Metro 风格 API 来实现 Metro 风格应用程序的功能 我们在 Metro 风格应用程序 API 参考中描述了这些 API。您的应用程序可能仅依赖于 Windows 应用商店中列出的软件。

[应用程序是沙盒的](http://www.infoq.com/news/2011/09/Design-Details-Windows-Runtime)。

简而言之，您必须使用提供的 api。

# angularjs - ng-repeat 中的自定义排序功能

> ID：12040395
> 
> 赞同：113
> 
> 时间：2012-08-20T15:17:35.153
> 
> 标签：angularjs, ng-repeat

我有一组根据用户选择的选项显示特定数字的图块。我现在想按显示的任何数字实现排序。

下面的代码显示了我是如何实现它的（通过在父卡范围内获取/设置一个值）。现在，因为 orderBy 函数需要一个字符串，所以我尝试在卡片范围内设置一个名为 curOptionValue 的变量并按此进行排序，但它似乎不起作用。

那么问题就变成了，如何创建自定义排序功能？

```
<div ng-controller="aggViewport" >
<div class="btn-group" >
    <button ng-click="setOption(opt.name)" ng-repeat="opt in optList" class="btn active">{{opt.name}}</button>
</div>
<div id="container" iso-grid width="500px" height="500px">
    <div ng-repeat="card in cards" class="item {{card.class}}" ng-controller="aggCardController">
        <table width="100%">
            <tr>
                <td align="center">
                    <h4>{{card.name}}</h4>
                </td>
            </tr>
            <tr>
                <td align="center"><h2>{{getOption()}}</h2></td>
            </tr>
        </table>        
    </div>
</div> 
```

和控制器：

```
module.controller('aggViewport',['$scope','$location',function($scope,$location) {
    $scope.cards = [
        {name: card1, values: {opt1: 9, opt2: 10}},
        {name: card1, values: {opt1: 9, opt2: 10}}
    ];

    $scope.option = "opt1";

    $scope.setOption = function(val){
        $scope.option = val;
    }

}]);

module.controller('aggCardController',['$scope',function($scope){
    $scope.getOption = function(){
        return $scope.card.values[$scope.option];
    }
}]); 
```

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-08-20T16:45:03.190

实际上，`orderBy`过滤器不仅可以将字符串作为参数，还可以将函数作为参数。来自`orderBy`文档：[https](https://docs.angularjs.org/api/ng/filter/orderBy) ://docs.angularjs.org/api/ng/filter/orderBy ）：

> 功能：吸气剂功能。此函数的结果将使用 <、=、> 运算符进行排序。

因此，您可以编写自己的函数。例如，如果您想根据 opt1 和 opt2 的总和来比较卡片（我正在编造这个，重点是您可以拥有任意函数），您可以在控制器中编写：

```
$scope.myValueFunction = function(card) {
   return card.values.opt1 + card.values.opt2;
}; 
```

然后，在您的模板中：

```
ng-repeat="card in cards | orderBy:myValueFunction" 
```

[这是工作的jsFiddle](http://jsfiddle.net/zjvsu/286/)

另一件值得注意的事情是，这`orderBy`只是[AngularJS 过滤器](http://docs.angularjs.org/guide/filter#creating-custom-filters "创建自定义过滤器")的一个示例，因此如果您需要非常具体的排序行为，您可以编写自己的过滤器（尽管`orderBy`对于大多数用例来说应该足够了）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-12-30T21:42:47.817

公认的解决方案仅适用于数组，但不适用于对象或关联数组。不幸的是，由于 Angular 依赖于数组枚举的 JavaScript 实现，因此无法一致地控制对象属性的顺序。一些浏览器可能会按字典顺序遍历对象属性，但这不能保证。

例如，给定以下任务：

```
$scope.cards = {
  "card2": {
    values: {
      opt1: 9,
      opt2: 12
    }
  },
  "card1": {
    values: {
      opt1: 9,
      opt2: 11
    }
  }
}; 
```

并且指令`<ul ng-repeat="(key, card) in cards | orderBy:myValueFunction">`ng-repeat 可以在“card2”之前迭代“card1”，而不管排序顺序如何。

为了解决这个问题，我们可以创建一个自定义过滤器将对象转换为数组，然后在返回集合之前应用自定义排序函数。

```
myApp.filter('orderByValue', function () {
  // custom value function for sorting
  function myValueFunction(card) {
    return card.values.opt1 + card.values.opt2;
  }

  return function (obj) {
    var array = [];
    Object.keys(obj).forEach(function (key) {
      // inject key into each object so we can refer to it from the template
      obj[key].name = key;
      array.push(obj[key]);
    });
    // apply a custom sorting function
    array.sort(function (a, b) {
      return myValueFunction(b) - myValueFunction(a);
    });
    return array;
  };
}); 
```

我们不能与自定义过滤器一起迭代（键，值）对（因为数组的键是数字索引），因此应该更新模板以引用注入的键名。

```
<ul ng-repeat="card in cards | orderByValue">
    <li>{{card.name}} {{value(card)}}</li>
</ul> 
```

这是一个在关联数组上使用自定义过滤器的工作小提琴：http: [//jsfiddle.net/av1mLpqx/1/](http://jsfiddle.net/av1mLpqx/1/)

参考：[https ://github.com/angular/angular.js/issues/1286#issuecomment-22193332](https://github.com/angular/angular.js/issues/1286#issuecomment-22193332)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-20T19:38:58.910

以下链接非常好地解释了 Angular 中的过滤器。它展示了如何在 ng-repeat 中定义自定义排序逻辑。 [http://toddmotto.com/everything-about-custom-filters-in-angular-js](http://toddmotto.com/everything-about-custom-filters-in-angular-js)

对于具有属性的对象排序，这是我使用的代码：（请注意，此排序是标准的 JavaScript 排序方法，而不是特定于 angular）列名是要对其执行排序的属性的名称。

```
self.myArray.sort(function(itemA, itemB) {
    if (self.sortOrder === "ASC") {
        return itemA[columnName] > itemB[columnName];
    } else {
        return itemA[columnName] < itemB[columnName];
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-22T22:36:19.340

要包含方向以及 orderBy 函数：

```
ng-repeat="card in cards | orderBy:myOrderbyFunction():defaultSortDirection" 
```

在哪里

```
defaultSortDirection = 0; // 0 = Ascending, 1 = Descending 
```

# unix - 如何先处理目录，然后处理其下的文件和目录？

> ID：12040396
> 
> 赞同：0
> 
> 时间：2012-08-20T15:17:38.180
> 
> 标签：unix, find

在我的 Linux 系统上，我遇到了对已安装驱动器上的目录没有写/执行权限的情况。结果，在打开目录权限之前，我无法进入目录。每次我安装该驱动器时都会发生这种情况。挂载操作是由其引擎盖下的工具完成的，所以我怀疑是否可以修改挂载参数来解决这个问题。

作为一种解决方法，我正在使用此`find`命令来修改目录的权限。我重复使用它，因为每次运行它都会获得更多级别的目录。

```
find . -type d -print0 | xargs -0 -n 1 chmod a+wrx 
```

我确信有更好的方法来做到这一点。我想知道是否有一个`find`选项可以先处理目录然后处理其内容 - 与`-depth|-d`选项相反。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:43:57.897

尝试：

```
chmod +wrx /path/to/mounted/drive/* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:51:54.453

另一种可能性是调查可用于该特定文件类型的挂载选项（我在这里猜测是 FAT/VFAT，但可能是别的）。某些文件系统具有以某种形式或其他形式覆盖默认权限的挂载选项......这也将避免必须更改所有权限，当您将该文件系统放回其原始来源时，这可能会产生一些影响（这是来自相机或其他东西的存储卡或 USB 记忆棒，或者....？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T16:05:13.317

感谢 unix.stackexchange.com 上的 StarNamer，这里有一些非常有用的东西：

> 尝试：
> 
> ```
> find . -type d -exec chmod a+rwx {} ';' 
> ```
> 
> 这将导致 find 在尝试读取目录之前执行 chmod，而不是尝试生成列表并将其提供给 xargs。

来自：[https ://unix.stackexchange.com/q/45907/22323](https://unix.stackexchange.com/q/45907/22323)

# forms-authentication - 使用带有 Web API 和 MVC 的自定义 MembershipProvider

> ID：12040398
> 
> 赞同：0
> 
> 时间：2012-08-20T15:17:45.547
> 
> 标签：forms-authentication, asp.net-mvc-4, asp.net-web-api

我有两个控制器；

*   `AccountController : Controller //For accounts <-- MVC`
*   `ItemController : ApiController //For Items <-- WEB API`

从所有意图和目的来看，accounts 控制器都是 Accounts 代码的一个非常标准的实现，唯一的主要区别是它使用了 Custom MembershipProvider。在帐户控制器上，我还有另一项操作：

```
[Authorize]
public ActionResult Bleh(){ return View(); } 
```

如果我尝试到达：

```
http://localhost/Account/Bleh 
```

将我（如预期）重定向到登录页面，登录后，我返回到 Bleh 页面。都好。问题出在 ItemController 上，我有一个 Action，上面也有 Authorize 属性：

```
[Authorize]
public HttpResponseMessage PostItem(Item item) { /**/ } 
```

*在登录之前*转到此返回 401 - Unauthorized - 这再次符合预期，但在登录后，它仍然返回 401。我不明白为什么会这样。

我是否缺少任何配置元素？路由？NE 其他？

我的印象是 Web Api 会以与 MVC 相同的方式获取表单身份验证，并且我知道身份验证正在像 MVC 一样*工作*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:06:57.010

确保在托管 API 控制器的 web.config 中定义了身份验证方案：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn" timeout="2400" />
</authentication> 
```

或者，如果您正在使用某种其他类型的自定义身份验证方案，以不同方式跟踪用户，则可能需要编写 DelegatingHandler。这是我为基本身份验证编写的示例：[https ://stackoverflow.com/a/11536349/29407](https://stackoverflow.com/a/11536349/29407)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:31:12.793

我已经从头开始重建了应用程序，并且表单代码现在按预期工作。我一辈子都看不出我的原始代码和新代码之间有什么区别。我怀疑某处的配置文件中可能有一些东西，但经过相当长的一段时间后，它却让我无法理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T13:50:01.943

您可以覆盖 OnRedirectToLogin Identity 事件并根据它是 API 调用这一事实相应地返回响应（基于 url 中的“/api/”）

# c++ - C++ 使用 7zip.dll

> ID：12040399
> 
> 赞同：6
> 
> 时间：2012-08-20T15:17:53.210
> 
> 标签：c++, windows, archive, 7zip

我正在开发一个需要处理不同类型档案的应用程序。尽可能多的存档类型是好的。我选择了一个 7zip.dll 作为归档工作的引擎。但是有一个问题，有人知道如何将**文件从存档解压缩到内存缓冲区**吗？如我所见，7zip.dll 仅支持解压缩到硬盘。此外，从内存缓冲区加载存档会很好。有没有人试图做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T16:17:39.217

不确定我是否完全理解您的需求（例如，您不需要磁盘上的解压缩文件吗？）。

我正在查看**LZMA SDK 9.20**及其**lzma.txt**自述文件，并且有很多提示可以解压缩到内存 - 您可能只需要使用 C API 而不是 C++ 接口。例如，查看名为`Single-call Decompressing`：

```
When to use: RAM->RAM decompressing
Compile files: LzmaDec.h + LzmaDec.c + Types.h
Compile defines: no defines
Memory Requirements:
  - Input buffer: compressed size
  - Output buffer: uncompressed size
  - LZMA Internal Structures: state_size (16 KB for default settings) 
```

此外，还有这个功能：

```
SRes LzmaDec_DecodeToBuf(CLzmaDec *p, Byte *dest, SizeT *destLen,
    const Byte *src, SizeT *srcLen, ELzmaFinishMode finishMode, ELzmaStatus *status); 
```

您可以通过内存映射存档文件来利用这些。据我所知，如果您的进程创建了一个具有独占访问权限的内存映射文件（因此没有其他进程可以访问它）并且没有显式刷新，则对该文件的所有更改都将保留在内存中，直到映射被破坏或文件关闭。或者，您可以将存档内容加载到内存中。

为了完整起见，我将几个示例拼凑成一个在 Windows 中使用内存映射的演示。

```
#include <stdio.h>
#include <time.h>
#include <Windows.h>
#include <WinNT.h>

// This demo will limit the file to 4KiB
#define FILE_SIZE_MAX_LOWER_DW 4096
#define FILE_SIZE_MAX_UPPER_DW 0
#define MAP_OFFSET_LOWER_DW 0
#define MAP_OFFSET_UPPER_DW 0
#define TEST_ITERATIONS 1000
#define INT16_SIZE 2

typedef short int int16;

// NOTE: This will not work for Windows less than XP or 2003 Server!
int main()
{
    HANDLE  hFile, hFileMapping;
    PBYTE mapViewStartAddress;
    // Note: with no explicit security attributes, the process needs to have
    // the necessary rights (e.g. read, write) to this location.
    LPCSTR path = "C:\\Users\\mcmlxxxvi\\Desktop\\test.dat";

    // First, open a file handle.
    hFile = CreateFile(path,
                       GENERIC_READ | GENERIC_WRITE,    // The file is created with Read/Write permissions
                       FILE_SHARE_READ,                 // Set this to 0 for exclusive access
                       NULL,                            // Optional security attributes
                       CREATE_ALWAYS,                   // File is created if not found, overwritten otherwise
                       FILE_ATTRIBUTE_TEMPORARY,        // This affects the caching behaviour
                       0);                              // Attributes template, can be left NULL
    if ((hFile) == INVALID_HANDLE_VALUE)
    {
        fprintf(stderr, "Unable to open file");
        return 1;
    }

    // Then, create a memory mapping for the opened file.
    hFileMapping = CreateFileMapping(hFile,                     // Handle for an opened file
                                     NULL,                      // Optional security attributes
                                     PAGE_READWRITE,            // File can be mapped for Read/Write access
                                     FILE_SIZE_MAX_UPPER_DW,    // Maximum file size split in DWORDs.
                                     FILE_SIZE_MAX_LOWER_DW,    // NOTE: I may have these two mixed up!
                                     NULL);                     // Optional name
    if (hFileMapping == 0)
    {
        CloseHandle(hFile);
        fprintf(stderr, "Unable to open file for mapping.");
        return 1;
    }

    // Next, map a view (a continuous portion of the file) to a memory region
    // The view must start and end at an offset that is a multiple of
    // the allocation granularity (roughly speaking, the machine page size).
    mapViewStartAddress = (PBYTE)MapViewOfFile(hFileMapping,                    // Handle to a memory-mapped file
                                               FILE_MAP_READ | FILE_MAP_WRITE,  // Maps the view for Read/Write access
                                               MAP_OFFSET_UPPER_DW,             // Offset in the file from which
                                               MAP_OFFSET_LOWER_DW,             // the view starts, split in DWORDs.
                                               FILE_SIZE_MAX_LOWER_DW);         // Size of the view (here, entire file)
    if (mapViewStartAddress == 0)
    {
        CloseHandle(hFileMapping);
        CloseHandle(hFile);
        fprintf(stderr, "Couldn't map a view of the file.");
        return 1;
    }

    // This is where actual business stuff belongs.
    // This example application does iterations of reading and writing
    // random numbers for the entire length of the file.

    int16 value;
    errno_t result = 0;

    srand((int)time(NULL));
    for (int i = 0; i < TEST_ITERATIONS; i++)
    {
        // Write
        for (int j = 0; j < FILE_SIZE_MAX_LOWER_DW / INT16_SIZE; j++)
        {
            value = rand();
            result = memcpy_s(mapViewStartAddress + j * INT16_SIZE, INT16_SIZE, &value, INT16_SIZE); 
            if (result != 0)
            {
                CloseHandle(hFileMapping);
                CloseHandle(hFile);
                fprintf(stderr, "File write error during iteration #%d, error %d", i, GetLastError());
                return 1;
            }
        }
        // Read
        SetFilePointer(hFileMapping, 0, 0, FILE_BEGIN);
        for (int j = 0; j < FILE_SIZE_MAX_LOWER_DW / sizeof(int); j++)
        {
            result = memcpy_s(&value, INT16_SIZE, mapViewStartAddress + j * INT16_SIZE, INT16_SIZE);
            if (result != 0)
            {
                CloseHandle(hFileMapping);
                CloseHandle(hFile);
                fprintf(stderr, "File read error during iteration #%d, error %d", i, GetLastError());
                return 1;
            }
        }
    }

    // End business stuff

    CloseHandle(hFileMapping);
    CloseHandle(hFile);

    return 0;
} 
```

# java - 嵌套对象的 Spring JSON 数据绑定不起作用

> ID：12040400
> 
> 赞同：2
> 
> 时间：2012-08-20T15:17:55.347
> 
> 标签：java, json, spring, data-binding

我有以下`Person`包含另一个类的`Car`类

```
public class Person {
    private String name
    private Car car;        
    ... getter and setters
}

public class Car {
    private String manufacturer;
    ... getter and setters
} 
```

在 Javascript 中，我执行以下操作：

```
person = new Object();
person.name = "Bob";

person.car = new Object();

car = person.car;

car.manufacturer = "Mercedes";

$.ajax({
    url: 'someurl.com',
    type: 'POST',
    data: person,
    dataType: 'json',
    ...
    complete: function() {
        ...
    }
}); 
```

使用自动绑定功能时，出现以下错误：

功能：

```
public @ResponseBody Car validateCar( Car car, HttpServletRequest servletRequest){
        ...
} 
```

错误：

```
org.springframework.beans.InvalidPropertyException: Invalid property 'car[manufacturer]' of bean class [com.example.Person]: Property referenced in indexed property path 'car[manufacturer]' is neither an array nor a List nor a Map; returned value was [] 
```

我必须做什么才能使映射工作？

顺便说一句：我的 POST 数据如下所示：

```
name: Bob
car[manufacturer]: Mercedes 
```

字符串化为 JSON 它看起来如下（我对其进行了测试，但我没有对其进行字符串化）

```
{"name":"Bob",
 "car": {
  "manufacturer":"Mercedes"
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:26:05.863

似乎您传入了 Car 哈希并试图将其自动绑定到 Person 对象。为此，您的哈希需要看起来像 person[car[manufacture]]]。尝试在 javascript 中传入您的人员对象，然后将汽车对象从自动绑定的人员对象中拉出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:34:09.120

我认为您的汽车上缺少@RequestBody：

```
public @ResponseBody Car validateCar( @RequestBody Car car, HttpServletRequest servletRequest) 
```

# c# - TimeZoneInfo AdjustmentRule中的TimeOfDay是什么时区

> ID：12040403
> 
> 赞同：1
> 
> 时间：2012-08-20T15:18:01.300
> 
> 标签：c#, timezone, dst

我看到有日光转换的开始和结束日期。有一个名为 TimeOfDay 的属性。它显示类似 1/1/0001 2:00:00 AM 的内容。我想知道这是指什么时间？哪个国家，哪个时区？还是UTC？谁能解释一下？

那么，那里的时间是电脑的当地时间吗？还是使用“中大西洋标准时间”的国家/地区的当地时间？还是UTC？抱歉，这可能是一个愚蠢的问题，但我是时区新手

更多信息：这是我用来查询的代码：（
*为了清楚起见，从下面的评论中复制）*

```
System.TimeZoneInfo.FindSystemTimeZoneById("Mid-Atlantic Standard Time")
   .GetAdjustmentRules().Dump(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:32:31.903

通过使用以下命令查看英国时间的相关类：

```
System.TimeZoneInfo.FindSystemTimeZoneById("GMT Standard Time").GetAdjustmentRules().Dump(); 
```

并且知道我们从凌晨 1 点到凌晨 2 点会立即从凌晨 2 点到凌晨 1 点，而我可以说 GMT 的 TimeOfDay 与考虑夏令时的当地时间相匹配。即凌晨 1 点开始是没有修饰符的 GMT。夏季的凌晨 2 点结束时间为 GMT+1。

这只是一个轶事答案，但它绝对适用于这个时区，我想它也适用于其他时区。

# database - Zend_Db_Profiler 如何扩展类以记录行数

> ID：12040404
> 
> 赞同：0
> 
> 时间：2012-08-20T15:18:02.220
> 
> 标签：database, zend-framework, profiling

正如我在主题中所说，
我的团队基于 Zend Framework (1.11) 开发了社交网站。
问题是我们的客户想要一个带有
执行时间、受影响的行数和语句语句的调试（在屏幕上的数据库查询列表上）。
Zend_DB_profiler 为我们轻松获取时间和语句，但
我们还需要查询受影响的行数（获取、更新、插入或删除）。
请帮忙，如何应对这个任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:16:34.537

这是当前的实现，它阻止你得到你想要的。

```
$qp->start($this->_queryId);
$retval = $this->_execute($params);
$prof->queryEnd($this->_queryId); 
```

可能的解决方案是：

*   为 Statement 创建您自己的类，假设从 Zend_Db_Statement_Mysqli 扩展或您有什么。
*   重新定义其执行方法，以便将 $retval 进行到 $prof->queryEnd($this->_queryId);
*   用新的语句类名重新定义 Zend_Db_Adapter_Mysqli 中的 $_defaultStmtClass
*   创建您自己的 Zend_Db_Profiler 并重新定义公共函数 queryEnd($queryId)，因此它接受 $retval 并处理 $retval

# objective-c - ShareKit 电子邮件表单并不总是显示

> ID：12040407
> 
> 赞同：3
> 
> 时间：2012-08-20T15:18:09.433
> 
> 标签：objective-c, ios, cocoa-touch, email, sharekit

我正在使用 ShareKit 将对象共享到 Twitter、Facebook 和电子邮件。Twitter 和 Facebook 运行良好，但电子邮件却不行。我真的不知道为什么。

似乎它的工作方式非常随机。

我是这样设置的：

```
[self.customView.shareButton addTarget:self action:@selector(sharePost:) forControlEvents:UIControlEventTouchUpInside];

- (void)sharePost:(UIButton *)sender
{
    NSURL *url = [NSURL URLWithString:self.currentPost.link];

    // Add image.
    NSString *imageUrlString = [NSString stringWithFormat:[link]];
    NSURL *imageUrl = [NSURL URLWithString:imageUrlString];
    UIImageView *postImage = [[UIImageView alloc] init];
    [postImage setImageWithURL:imageUrl];

    SHKItem *item = [SHKItem image:postImage.image title:[NSString stringWithFormat:@"%@", self.currentPost.title]];
    [item setURL:url];
    [item setMailBody:[NSString stringWithFormat:@"%@ %@", self.currentPost.title, self.currentPost.link]];

    // Get the ShareKit action sheet
    // This works
    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];

    // ShareKit detects top view controller (the one intended to present ShareKit UI) automatically,
    // but sometimes it may not find one. To be safe, set it explicitly.
    [SHK setRootViewController:self];

    // Display the action sheet.
    [actionSheet showInView:self.view];
} 
```

有什么想法或我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:18:31.320

尝试更改 RootViewController 并查看您正在使用：

```
[SHK setRootViewController:self.view.window.rootViewController];
[actionSheet showInView:self.view.window.rootViewController.view]; 
```

很可能您的视图控制器层次结构有些混乱。

# objective-c - 是否可以在 KVC 中使用通配符？

> ID：12040409
> 
> 赞同：4
> 
> 时间：2012-08-20T15:18:25.080
> 
> 标签：objective-c

我正在尝试像这样在 KVC 中使用通配符。

是否可以？

或者有没有其他方法可以使用通配符来表示成员变量？

```
@interface MyClass : NSObject
@property(nonatomic, retain) NSNumber *test1;
@property(nonatomic, retain) NSNumber *test2;
@end

@implementation MyClass{
    NSNumber * test1;
    NSNumber * test2;
}
@synthesize test1;
@synthesize test2;
@end 
```

使用通配符

```
MyClass *testClass = [[[MyClass alloc] init] autorelease];
testClass.test1 = @50;

NSLog(@"test value : %@", [testClass valueForKey:@"*1"]); 
```

详细代码。

我想要的一个真正原因是通过整数或 nsnumber 类型的值来指示实例的成员变量。如果可能，设置值和读取任何实例的值会更容易。

例如属性部分副本。

```
MyClass *testClass = [[[MyClass alloc] init] autorelease];
testClass.year_1 = @2012;
testClass.quarter_2 = @3;
testClass.month_3 = @8;
testClass.day_4 = @20;
testClass.week_5 = @4;

// copy propertys to other instance.
// Normal way
MyClass *testClassCopy = [[[MyClass alloc] init] autorelease];
testClassCopy.year_1 = testClass.year_1;
testClassCopy.quarter_2 = testClass.quarter_2;
testClassCopy.month_3 = testClass.month_3;
testClassCopy.day_4 = testClass.day_4;

// copy propertys by using wildcard
for (int j = 0; j < 4; j++) {
    NSString *indicate = [NSString stringWithFormat:@"*%@", [NSNumber numberWithInteger:j + 1]];
    NSNumber *sourceProperty = [testClass valueForKey:indicate];
    [testClassCopy setValue:sourceProperty forKey:indicate];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T00:32:14.043

我将通过添加正则表达式和使用类别来提高您的通配符：

要了解 regex 如何使用它，请阅读[NSRegularExpression 类参考](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)。

特征：

*   使用正则表达式，用于匹配各种键
*   使用适用于任何实例的类别
*   缓存每个类的键列表
*   完整的 KVC 支持（不仅仅是属性，还有访问器方法和 iVar！）
*   与当前的 KVC 方法完美集成（仅在未找到密钥时使用正则表达式，从而提高性能）
*   子类化不会搞砸，就像@JamesWebster 的解决方案
*   `NSObject`不会用's 方法不必要地污染键列表
*   返回匹配键和值的 NSDictionary

缺点：

*   使用正则表达式，它更慢且更难理解
*   对类的初始查找缓慢（必须遍历所有方法和 iVar）
*   自动覆盖该`-valueForUndefinedKey:`方法，因此这可能会破坏一些现有代码（将其移至它自己的方法来修复）。
*   目前不支持值的设置（按照设计，那是另外一袋猫）。
*   结果中可能有重复的keyPaths（不是最大的问题，但源于KVC匹配很复杂，我必须实现所有规则）
*   Uses `NSRegularExpression`，仅在 iOS 4 及更高版本中可用（不是最大的问题）。

版本历史：

*   1.0：初始版本

所以，这里是代码：

**NSObject+KVCRegex.h：**

```
//
//  NSObject+KVCRegex.h
//  TestProj
//
//  Created by Richard Ross on 8/20/12.
//  Copyright (c) 2012 Ultimate Computer Services, Inc. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface NSObject (KVCRegex)

// custom implemenation
-(id) valueForUndefinedKey:(NSString *)key;

@end 
```

**NSObject+KVCRegex.m:**

```
//
//  NSObject+KVCRegex.m
//  TestProj
//
//  Created by Richard Ross on 8/20/12.
//  Copyright (c) 2012 Ultimate Computer Services, Inc. All rights reserved.
//

#import "NSObject+KVCRegex.h"
#import <objc/runtime.h>

@implementation NSObject (KVCRegex)

static NSSet *keyPathsForClass(Class cls)
{
    NSMutableSet *keys = [NSMutableSet set];

    do
    {
        if (cls == [NSObject class])
        {
            // nothing good can come from trying to use KVC on NSObject methods
            break;
        }

        unsigned count = 0;
        Method *methods = class_copyMethodList(cls, &count);

        for (int i = 0; i < count; i++) {
            // make sure that the method returns a value
            const char *methodName = sel_getName(method_getName(methods[i]));

            char returnType[64];
            method_getReturnType(methods[i], returnType, 64);
            if (strcmp(returnType, "v") == 0)
                continue;

            // make sure that the method takes no args (except for self & _cmd)
            if (method_getNumberOfArguments(methods[i]) == 2)
            {
                // add a duplicate entry for ones matching 'is'
                if (strstr(methodName, "is") == methodName)
                {
                    char *newStr = strdup(methodName + 2);
                    newStr[0] = tolower(newStr[0]);

                    [keys addObject:[NSString stringWithUTF8String:newStr]];

                    free(newStr);
                }

                [keys addObject:[NSString stringWithUTF8String:methodName]];
            }
        }

        free(methods);

        // now copy iVars

        count = 0;
        Ivar *ivars = class_copyIvarList(cls, &count);
        for (int i = 0; i < count; i++)
        {
            const char *ivarName = ivar_getName(ivars[i]);

            if (strstr(ivarName, "_") == ivarName)
                [keys addObject:[NSString stringWithUTF8String:ivarName + 1]]; // iVar name starting with _<key>

            [keys addObject:[NSString stringWithUTF8String:ivarName]];
        }

        free(ivars);
    } while ((cls = [cls superclass]));

    return [NSSet setWithSet:keys];
}

// returns a dictionary based on 'key' as a regex
-(id) valueForUndefinedKey:(NSString *)key
{
    // lookup for later use
    static NSMutableDictionary *keyClassPairs;
    if (!keyClassPairs)
        keyClassPairs = [NSMutableDictionary dictionary];

    if (!keyClassPairs[[self class]])
    {
        keyClassPairs[(id<NSCopying>)[self class]] = keyPathsForClass([self class]);
    }

    NSSet *keyPaths = keyClassPairs[[self class]];

    // assume 'key' is a regex
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:key options:0 error:nil];
    NSMutableArray *matches = [NSMutableArray array];

    for (NSString *keyPath in keyPaths)
    {
        NSRange matchRange = [regex rangeOfFirstMatchInString:keyPath options:0 range:(NSRange) { 0, keyPath.length }];

        if (matchRange.length == keyPath.length)
        {
            // we have a match
            [matches addObject:keyPath];
        }
    }

    if (matches.count)
        return [self dictionaryWithValuesForKeys:matches];
    else
        [NSException raise:NSUndefinedKeyException format:@"Could not find a key that matches the regex in %@", key];

    return nil;
}

@end 
```

**例子：**

```
@interface MyObject : NSObject
{
@public
    int normalIvar;
    id _underscoreIvar;
}

@property id     someProp;
@property BOOL isProperty;
@property int  nativeProp;

-(void) notAKey;
-(id) aKey;

@end

@implementation MyObject

@synthesize someProp, isProperty, nativeProp;

-(void) notAKey
{
    NSLog(@"Not a key!");
}

-(id) aKey
{
    return @"Value";
}

@end

int main()
{
    @autoreleasepool {
        MyObject *obj = [MyObject new];

        obj.someProp = @"a property";
        obj.nativeProp = 15;
        obj.isProperty = YES;
        obj->normalIvar = 172;
        obj->_underscoreIvar = @"Ivar";

        NSString *regex = @"[a|s].*"; // match a key starting with 'a' or 's', then matching anything else after

        NSLog(@"%@", [obj valueForKey:regex]); // prints "{ aKey = 'Value', someProp = 'a property' }"

        regex = @"_.*"; // match a key starting with '_', and then match anything else after

        NSLog(@"%@", [obj valueForKey:regex]); // prints "{ _underscoreIvar = 'Ivar' }"

        regex = @".*"; // match any key declared for this object

        NSLog(@"%@", [obj valueForKey:regex]); // prints "{ "_underscoreIvar" = Ivar; aKey = Value; isProperty = 1; nativeProp = 15; normalIvar = 172; property = 1; someProp = "a property"; underscoreIvar = Ivar; }"

        regex = @"(?i)[A-J].*"; // match (case insensitive) a key starting with A - J

        NSLog(@"%@", [obj valueForKey:regex]); // prints "{ aKey = value; isProperty = 1; }"
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:45:31.267

尽管我找不到使用您尝试的语法来支持通配符的方法。我发现了这个使用 Objective-C 运行时的迂回方法！

首先我们得到你想使用的类的所有属性

```
#import <objc/runtime.h>

unsigned int outCount;
objc_property_t *properties = class_copyPropertyList([MyClass class], &outCount);
NSMutableArray *array = [NSMutableArray arrayWithCapacity:outCount];
for (int i = 0; i < outCount; i++)
{
    objc_property_t property = properties[i];
    const char *propName = property_getName(property);
    if(propName)
    {
        NSString *propertyName = [NSString stringWithUTF8String:propName];
        [array addObject:propertyName];
    }
}
free(properties); 
```

* * *

然后过滤掉你真正想要的

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF ENDSWITH '1'"];
[array filterUsingPredicate:predicate]; 
```

* * *

然后实际使用它们

```
for (NSString *key in array)
    NSLog(@"%@", [testClass valueForKey:key]); 
```

# c# - 使用流利的 nhibernate 级联删除

> ID：12040411
> 
> 赞同：2
> 
> 时间：2012-08-20T15:18:34.927
> 
> 标签：c#, postgresql, fluent-nhibernate, nhibernate-mapping

我有一个映射如下：

```
public class InvoiceDetailMapping : ClassMap<InvoiceDetail>
{
    public InvoiceDetailMapping()
    {
        Id(x => x.DetailId)
            .GeneratedBy.Guid();

        Map(x => x.Account);
        Map(x => x.Credit);
        Map(x => x.Debit);
        Map(x => x.PayType);
        Map(x => x.RowNumber);

        References<InvoiceItem>(x => x.Invoice, "InvoiceItemId")
            .Cascade.All();

    }
}

public class InvoiceItemMapping : ClassMap<InvoiceItem>
{
    public InvoiceItemMapping()
    {
        Id(x => x.RecordId)
            .GeneratedBy.Guid();

        Map(x => x.BatchId);
        Map(x => x.Description);
        Map(x => x.DocumentDate);
        Map(x => x.DocumentId);
        Map(x => x.DocumentType);
        Map(x => x.FileId);
        Map(x => x.FileName);
        Map(x => x.InvoiceAmount);
        Map(x => x.LocationCode);
        Map(x => x.PayDate);
        Map(x => x.PaymentTerms);
        Map(x => x.PayNumber);
        Map(x => x.PurchaseAmount);
        Map(x => x.PurchaseInvoiceAmount);
        Map(x => x.InvoiceId);
        Map(x => x.Submittable);
        Map(x => x.SubmittedBy);
        Map(x => x.SubmittedTimeStamp);
        Map(x => x.TaxForm1099Amount);
        Map(x => x.TroubleClass);
        Map(x => x.VendorDocNumber);
        Map(x => x.VendorId);
        Map(x => x.PersistedTimeStamp)
            .CustomType<UtcDateTimeType>()
            .Generated.Insert();

        HasMany<InvoiceDetail>(x => x.InvoiceDetails)
            .Inverse()
            .Cascade.All()
            .KeyColumn("InvoiceItemId");
    }
} 
```

...但是当我将其应用于我的 PostgreSQL 数据库时，它会为 InvoiceDetail 创建以下 SQL：

```
CREATE TABLE "InvoiceDetail"
(
  detailid uuid NOT NULL,
  account character varying(255),
  credit numeric(19,5),
  debit numeric(19,5),
  paytype integer,
  rownumber integer,
  invoiceitemid uuid,
  CONSTRAINT "InvoiceDetail_pkey" PRIMARY KEY (detailid ),
  CONSTRAINT fkd8588014e9009e93 FOREIGN KEY (invoiceitemid)
      REFERENCES "InvoiceItem" (recordid) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION 
```

注意`ON UPDATE NO ACTION ON DELETE NO ACTION`线。我原以为该`Cascade.All()`指令会创建一个`ON UPDATE CASCADE ON DELETE CASCADE`DDL。我做错了什么或不完整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T13:52:10.980

NH 支持许多不同的 RDBMS 并且已经支持了很长时间，因此默认是在代码中进行。另一方面，FNH 开始实现最常见的功能，而这不是。而且仍然没有人提出问题来支持这项 NH 功能。也很难说，因为在映射中方言是未知的，因此它不知道是否支持该功能。

# objective-c - 我是否正确使用了时间分析仪？

> ID：12040414
> 
> 赞同：2
> 
> 时间：2012-08-20T15:18:46.313
> 
> 标签：objective-c, ios, instruments

我有一个正在为 iPad 开发的绘图应用程序。我正在尝试加快绘图速度，因此我正在使用时间分析仪进行一些测试。但是，我要么做错了什么，要么时间分析器在这种情况下不会有帮助。

我正在寻找的基本上是正在绘制的代码的逐行执行时间。我得到的是下面。基本上，时间分析器会说“你花了很多时间画画”。我的回答是“哦，rly！？”。我是否正确使用了分析器，或者有没有办法让它逐行显示执行时间（这比当前输出有用得多）？

![时间剖析工具截图](../Images/5e30231cf2ccd23d35a3a19e9501693a.png)

![](../Images/0cdace6ad5c387d659f3b94f1ccc1d7e.png)

编辑：在上面，您可以看到更多我正在寻找的内容。逐行执行时间。那不是我的代码，只是我希望/期望时间分析器如何工作的一个例子。

Edit2：在模拟器上运行时，您只能按方法查看执行时间吗？我刚刚尝试在模拟器上进行分析，输出正是我所期望的。但是，我真的希望使用该设备进行更准确的分析:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:30:31.407

时间分析工具在设备上的行为似乎与在模拟器中不同。模拟器版本允许我逐行查看执行时间，而在设备上进行分析时，我只能得到上面的输出，这远没有那么有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:51:53.260

我相信，您无法使用时间分析器来实现这一点，因为它会收集大量样本并将它们统一起来以显示您花费时间最多的地方。

您可能使用一些“原始” *dtrace*脚本来解决此任务。或者，您可以编写基于周围的采样代码`mach_absolute_time`（[此 QA](http://developer.apple.com/library/mac/#qa/qa1398/_index.html)可能有助于稍后将值转换为更有意义的数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T18:26:09.787

要获得所需的逐行执行时间，必须双击在调用树中编写的函数。在您的屏幕截图中，您双击了 Apple 编写的 UIView 方法。你正在反汇编，因为它是 Apple 的代码，而不是你的。

如果您想专注于调用树中的代码，请选中 Hide System Libraries 复选框，该复选框位于您在屏幕截图中选择的 Show Obj-C Only 复选框的上方。隐藏系统库可以更容易地在调用树中找到您的代码，这将帮助您逐行了解执行时间。

# grails - 如何在 Grails 中创建动态装置？

> ID：12040415
> 
> 赞同：1
> 
> 时间：2012-08-20T15:18:47.470
> 
> 标签：grails, groovy, fixtures

假设我有一个日历表，它应该跟踪进入停车场的汽车。`ParkingTime`是该表的域类。

我想用过去 30 天的夹具数据填充我的数据库。而不是将日期硬编码为字符串并为每辆车重复对象行 30 次，这些应该是在 for 循环中执行此操作的方法。

表的单个条目：

```
include "Cars"

fixture {
    entry(ParkingTime, car: bmw123, arrival: arrivalDate.getTime(), departure: departureDate.getTime())
} 
```

像这样循环运行：

```
for (i in 1..30) {
    arrivalDate.add(Calendar.DATE, 1)
    departureDate.add(Calendar.DATE, 1)
    entry(ParkingTime, car: bmw123, arrival: arrivalDate.getTime(), departure: departureDate.getTime())
} 
```

过去 30 天的物体在哪里`arrivalDate`和`departureDate`是什么。`Calendar`

我的期望是在`fixture{}`对象内部运行循环并在数据库中获取 30 行。但是只有一行是循环的最后一次迭代。

我在这里完全错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:54:50.187

我认为这是因为您正在覆盖变量`entry`

试试吧

```
"entry$i"(ParkingTime,....) 
```

让我知道

# python - 如何使用 python 仅移动 *.java 文件？

> ID：12040416
> 
> 赞同：0
> 
> 时间：2012-08-20T15:18:49.207
> 
> 标签：python, directory, shutil

我有这样的目录树：

> ```
> dir1
>  - dir2
>  - dir3
>  - file1.java
>  - file2.java
>  - file3.cpp 
> ```

我只想将 *.java 文件移动到当前目录中名为“java_files”的全新目录。怎么做？我读了shutil doc，但是...

这个：

```
def moveFiles() :
    source = "."
    destination = "java_files"
    if os.path.isfile(source):
        shutil.move(source, destination) 
```

根本不起作用...

**我不想用 shell 'mv' 代替！**

编辑：

我也试过这个：

```
def moveFiles() :
    source = "."
    destination = "java_files"
    dirList = os.listdir(source)
    for fname in  dirList:
        if fname.endswith(".java") :
            shutil.move(source, destination) 
```

但它给出了：

```
File "test.py", line 95, in <module>
 main()   File "test.py", line 91, in main
 moveFils()   File "test.py", line 82, in move
 shutil.move(source, destination)   File "/usr/lib/python2.7/shutil.py", line 295, in move
 raise Error, "Cannot move a directory '%s' into itself '%s'." % (src, dst) shutil.Error:Cannot move a directory '.' into itself 'java_files'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:21:17.393

```
if source.endswith('.java'):
    # do copy or move file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:23:53.160

在这种情况下，我使用[glob](http://docs.python.org/library/glob.html)（它接受通配符和正则表达式）

```
#!/usr/bin/env python

import glob
import shutil
import os

source="."
destination = "/tmp/newDestination/"

if not(os.path.exists(destination)):
    os.makedirs(destination)
elif not(os.path.isdir(destination)):
    raise OSError("Kabooom! The destination %s exists, but is not a directory" % destination)

for javaFile in glob.glob(os.path.join(source, "*.java")):
    if os.path.isfile(javaFile):
        shutil.move(os.path.abspath(javaFile), destination) 
```

# google-app-engine - 如何在 GAE 中将项目添加到实体的 1-N 属性

> ID：12040420
> 
> 赞同：0
> 
> 时间：2012-08-20T15:18:56.413
> 
> 标签：google-app-engine, jdo, datanucleus

我有实体 Profile、Like 和 Place

地方有喜欢。喜欢有参考地点和个人资料。

地点在喜欢上具有 1-N 关系

```
@PersistenceCapable
public class Place {

    @Persistent(mappedBy = "place")
    @Element(dependent = "true")
    private transient List<Like> likes; 
```

Like 有参考 Profile 和参考 Place

```
@PersistenceCapable
public class Like implements Serializable {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

    @Persistent
    private Profile profile;    

    @Persistent
    private Place place; 
```

并且配置文件类与该对象没有关系

```
@PersistenceCapable
public class Profile {
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private transient Key key; 
```

使用现有配置文件添加“喜欢”以放置现有地点的最佳方式是什么？

我使用以下代码来做到这一点：

```
 Profile profile;
    Place place;
    List<Like> likes;
    pm = PMF.get().getPersistenceManager();
    try {   
        place = pm.getObjectById(Place.class, placeId);
        likes = place.getLikes();
        profile = pm.getObjectById(Profile.class, KeyFactory.createKey(Profile.class.getSimpleName(), login));
    } finally {
        pm.close();
    }

    likes.add(new Like(place, profile));
    place.setLikes(likes);

    pm = PMF.get().getPersistenceManager();
    try {   
        pm.makePersistent(place);
    } finally {
        pm.close();
    } 
```

并且有 Profile 实体的副本。有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:03:16.370

如果您要向 Place 之类的对象添加新的 Like，为什么还要费尽心思在事务中检索对象，然后关闭 PM（这样对象就会变成瞬态的，根据 JDO 规范）？只是说会更有意义

```
place.getLikes().add(new Like(place, profile)); 
```

同时还在交易中。事实上，阅读对象生命周期应该是任何使用任何持久性规范（JDO 或 JPA）的人的先决条件。显然，上述内容也不特定于 GAE。

# web-applications - 如何检查浏览器兼容性

> ID：12040421
> 
> 赞同：0
> 
> 时间：2012-08-20T15:19:02.100
> 
> 标签：web-applications, cross-browser, web.py

我编写了一个 Web 应用程序，它使用的功能使其与 IE 不兼容，并且需要最低版本的 Firefox 和 Chrome。为了检查浏览器兼容性，我使用 web.py 从请求的标头中获取 User-Agent，并使用简单的正则表达式检查输出。

不过我很担心，Chrome 或 Firefox 声明它是 User-Agent 的方式的改变可能会破坏我的正则表达式。此外，由于我明确要求使用 Firefox 或 Chrome，因此我可能排除了一些可能能够使用该站点的浏览器。

检查用户代理是正确的方法吗？我应该如何检查兼容性以确保仅提供具有足够功能的浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T19:10:14.480

你最好在客户端做，浏览器嗅探被认为是不好的。最佳实践是使用条件注释在 html 上添加 ie#（Internet Explorer 版本）类名，以便能够为其编写单独的 css 样式，并使用[modernizr](http://modernizr.com/)来检测支持的功能。

# php - jQuery循环遍历表格并获取元素

> ID：12040425
> 
> 赞同：0
> 
> 时间：2012-08-20T15:19:07.460
> 
> 标签：php, jquery, json, forms

我在这样的 html 表中有一些表单输入元素：

```
<table>
    <thead>
    ....
    </thead>
    <tr>
        <td><input type="text" name="n_time" id="5030c9261eca0" value="2012" /></td>
        <td><input type="text" name="n_name" id="5030c9261eca0" value="a name" /></td>
        <td><textarea name="n_comment" id="5030c9261eca0">bla</textarea></td>
    </tr>
</table> 
```

现在，我需要将此表单数据发送`$.post`到我的 PHP 处理页面，它看起来像

```
if($_POST['data']){
    $array = json_decode($_POST['data']);

} 
```

所以我需要获取我所有的表单元素，然后以某种方式制作成 JSON

这就是我所做的：

```
// assume i can get 5030c9261eca0 from my predefined vars...
$my_array = $("#5030c9261eca0").map(function () { return $(this).is("input")?$(this).val():$(this).text(); } );
//now convert
JSON.stringify($my_array);
// the conversion failed with : Uncaught TypeError: Converting circular structure to JSON 
```

弹出此错误：

```
Uncaught TypeError: Converting circular structure to JSON 
```

我该如何解决？

另外，如果我通过 HTML 表单进行常规 HTTP 发布，`$_POST['n_name']`如果我有一个带有属性的 HTML 表单元素，我可以像在 PHP 中一样接收表单数据，我`n_name`该如何完成上述操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:21:57.623

您有两个具有完全相同 ID 的不同变量*5030c9261eca0*。对于给定的 HTML 页面，ID 应该是唯一的。

给每个元素一个唯一的 ID。

相反，给每个你想要定位共享类的元素，例如*needToPost*，并使用该类：

```
$my_array = $(".needToPost").map(function () { return $(this).is("input")?$(this).val():$(this).text(); } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:22:17.417

首先遍历 all `tr`，然后循环遍历 all`input,textarea`并将收集的值推送到数组。

```
var data = [];      
$('table tr').each(function(){
    var row = {};
    $(this).find('input,textarea').each(function(){
        row[$(this).attr('name')] = $(this).val();
    });
    data.push(row);
});

// now you can use "data" :) 
```

示例`data`：

```
[0][n_time] = foo
[0][n_name] = bar
[0][n_comment] = 123
[1][n_time] = foo
[1][n_name] = bar
[1][n_comment] = 123
... 
```

jQuery：

```
$.post("test.php", { 'mydata': data } ); 
```

PHP：

```
foreach($_POST['mydata'] as $row) {
    echo $row['n_name'];
} 
```

* * *

将其转换为 jQuery 函数是个好主意：

```
(function( $ ) {
  $.fn.tableData = function() {
    var data = [];      
    $(this).find('tr').each(function(){
        var row = {};
        $(this).find('input,textarea').each(function(){
            row[$(this).attr('name')] = $(this).val();
        });
    });
    return data;
  }
})( jQuery );

// Usage:

$.post("test.php", { 'mydata': $('table').tableData() } ); 
```

# scala - ScalaToolsSnapshots 替代解析器

> ID：12040427
> 
> 赞同：1
> 
> 时间：2012-08-20T15:19:16.593
> 
> 标签：scala, sbt

谁能帮我解决目前在 sbt._ 中列出的 ScalaToolsSnapshots 解析器的替代方案？

[XSBT](http://harrah.github.com/xsbt/latest/api/sbt/ScalaToolsSnapshots%24.html)声明它已从 0.11.3 版本中弃用，并建议使用替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:48:15.593

scala-tools 已不复存在，[错误消息](http://scala-tools.org/)告诉您将来如何解决 scala-tools 快照。

```
resolvers += "ScalaTools snapshots at Sonatype" at "https://oss.sonatype.org/content/repositories/snapshots/" 
```

# asp.net - 为什么我的 ASP.NET 中继器数据不能通过后面的代码在加载事件中使用？

> ID：12040428
> 
> 赞同：0
> 
> 时间：2012-08-20T15:19:19.183
> 
> 标签：asp.net, vb.net, repeater

我有一个通过数据源填充的 ASP.NET 中继器。数据加载并完美呈现在屏幕上，但是在加载阶段通过代码访问该转发器中的任何数据行的所有尝试均不成功。一旦转发器在屏幕上呈现，我就可以在表单提交上完美地访问所有内容，但是在我尝试过的每个与负载相关的事件（Load、Init、PreRender、DataBind 等）中，它都显示为空。是否有必要以编程方式在代码后面而不是 ASPX 标记中填充转发器，以便在加载阶段访问这些数据，或者我只是做错了什么？

ASPX 片段：

```
<div runat="server" id="rpt3" style="display: block;">
<p class="approvalHeaderText">
Rejected Items</p>
<asp:Repeater ID="RptRejected" runat="server" DataSourceID="SQL_EmployeeGetRejectedEdits">
<ItemTemplate>
<tr class="gridToggleWhite gridVisible" id="<%# Eval("RecID") %>_cont">
<td>
<%# Eval("OrderID")%>
</td> 
```

代码片段背后的代码 - 在几个事件中尝试过（假设所有变量都已声明）：

```
For i = 0 To RptRejected.Items.Count - 1
'Obtain current week's Expenses
curExpVal = RptRejected.Items(i).FindControl("ExpensePay")
If Not IsNothing(curExpVal) Then
If curExpVal.Text = "" Then
insertExp = 0
Else
insertExp = CSng(curExpVal.Text)
End If
Else
insertExp = 0
End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:29:13.357

您可以使用该`ItemDataBound`事件（并且您不需要循环）：

```
Sub rpt3_ItemDataBound(Sender As Object, e As RepeaterItemEventArgs)
  If (e.Item.ItemType = ListItemType.Item) OrElse _
            (e.Item.ItemType = ListItemType.AlternatingItem) Then

    Dim curExpVal = e.Item.FindControl("ExpensePay")
    If Not IsNothing(curExpVal) Then
      If curExpVal.Text = "" Then
        insertExp = 0
      Else
        insertExp = CSng(curExpVal.Text)
      End If
    Else
      insertExp = 0
    End If
  End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:53:41.847

R1_Load 和 R1_ItemDataBound 应该用于填充您的数据，而 R1_ItemCommand 应该用于处理按钮操作。

aspx

```
<asp:Repeater runat="server" ID="R1" OnItemCommand="R1_ItemCommand" OnItemDataBound="R1_ItemDataBound"
    OnLoad="R1_Load">
    <HeaderTemplate>
        <table>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <asp:TextBox runat="server" ID="txt"></asp:TextBox><asp:Button runat="server" ID="btn"
                    Text="Add" CommandName="AddOne" />
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table> </FooterTemplate>
</asp:Repeater> 
```

aspx.cs

```
protected void R1_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        var items = new List<int>();
        for (int i = 0; i < 5; i++)
        {
            items.Add(i);
        }
        R1.DataSource = items;
        R1.DataBind();
    }
}

protected void R1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        var txt = e.Item.FindControl("txt") as TextBox;
        txt.Text = Convert.ToString(e.Item.DataItem);
    }
}

protected void R1_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.CommandName == "AddOne")
    {
        var txt = e.Item.FindControl("txt") as TextBox;
        txt.Text = (Convert.ToInt32(txt.Text) + 1).ToString();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T17:30:16.567

我的主要错误是使用**Eval()**而不是**DataBinder.Eval()**方法。虽然屏幕上的结果相同，但**Eval()**不会触发 OnItemDataBound 事件。一旦我将标记切换到**DataBinder.Eval()**，一切就都到位了。谢谢大家，你的想法。

# asp.net - 在两个网站之间传递值

> ID：12040429
> 
> 赞同：0
> 
> 时间：2012-08-20T15:19:21.377
> 
> 标签：asp.net, asp.net-mvc, web-services, session

是否可以在两个完全不同的网站之间传递值？

我有网站 A 嵌入在网站 B 的 iframe 中。用户使用电子邮件 ID 登录网站 B，我需要将该电子邮件 ID 传递给 iframe/网站 A。我可以使用会话变量来执行此操作吗？我知道 webservices 解决方案，但这似乎是一种太大的方法，不能只传递一个值来显示。感谢任何见解，帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:24:10.950

将 传递`emailId`给`iframe`via URL，如下所示：

```
<iframe src="http://website.com/somepage.aspx?i=emailId" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:24:24.073

就我个人而言，我会走网络服务路线，但这也可能对你有用：

[在 iFrame 和父页面之间跨域通信的可能方式](https://stackoverflow.com/questions/2771397/possible-ways-to-communicate-between-iframe-and-parent-page-across-domains)

# c# - 在 XNA 和 c# 中计算某种颜色的像素

> ID：12040433
> 
> 赞同：0
> 
> 时间：2012-08-20T15:19:31.400
> 
> 标签：c#, xna, buffer, pixel

这是我在这里的第一篇文章，我相当绝望。

我的问题是我应该为客户制作游戏（更多的是朋友喜欢这种类型的东西，所以没有薪水：（但是我找到了一份工作，我说我可以做到，建立代表等等）

我使用 XNA 4，因此使用 C#。

现在我需要找出一种方法来计算某种颜色的像素，具体来说是黑色。而已。我画了一堆精灵，它们*不是*黑色的。其中一些是 UI，但它们都在屏幕的一侧，所以我应该能够忽略这些像素，对吧？

我想一旦我完成了所有的绘图调用，我应该能够读取缓冲区。但我只是找不到任何互联网资料（可读）告诉我这是否可能。读取是我感兴趣的像素的颜色是我需要做的。例如，让我们说从宽度 50 到窗口边缘的所有内容。

C# 和 XNA 4 答案是我需要的。无论您是在银盘上给我答案，还是向我指出可以告诉我如何做各个部分的事情的方向。

作为一名程序员，我仍然算作一个菜鸟，只是......一个训练有素的菜鸟，所以我可能会向你的优秀答案提出愚蠢的问题:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:32:17.827

您应该能够使用[GraphicsDevice.ResolveBackBuffer()](http://msdn.microsoft.com/en-us/library/bb975930%28v=xnagamestudio.31%29.aspx) 将屏幕复制到 ResolveTexture2D。然后您可以使用[Texture2D.GetData()](http://msdn.microsoft.com/en-us/library/bb197089.aspx)将纹理的颜色数据存储在 Color[] 数组中。

```
ResolveTexture2D texture = new ResolveTexture2D(
    graphics.GraphicsDevice,
    graphics.GraphicsDevice.PresentationParameters.BackBufferWidth,
    graphics.GraphicsDevice.PresentationParameters.BackBufferHeight,
    1,
    graphics.GraphicsDevice.PresentationParameters.BackBufferFormat);

Color[] colorData = new Color[texture.Width * texture.Height];
texture.GetData<Color>(colorData); 
```

从那里你应该能够做你的事情来计算颜色，同时忽略边缘像素。

# exception-handling - 使用 ServiceStack 未处理的异常行为

> ID：12040434
> 
> 赞同：1
> 
> 时间：2012-08-20T15:19:38.857
> 
> 标签：exception-handling, servicestack

我想在不手动将 ResponseStatus 添加到响应 DTO 的情况下获得自动异常序列化。

基于有关未处理异常行为的[此](https://stackoverflow.com/questions/11750799/is-responsestatus-needed-in-servicestack)信息，我编写了以下代码

```
public class ContactService : RestServiceBase<Contact>
{
    public override object OnGet(Contact request)
    {
        return ContactApi.GetContactInfo(request);
    }

    //To trigger the serialization of the Exception to ResponseStatus
    protected override object HandleException(Contact request, Exception ex)
    {
        throw ex;
    }

<snip />
} 
```

您是否发现以这种方式使用库有任何问题？

提前致谢。

更新：我想在出现异常时获得以下响应，而无需将 ResponseStatus 属性添加到我的响应 DTO 对象。

我可以通过重写如上所示的 HandleException 方法来实现这一点。

我的问题是：以这种方式覆盖默认异常处理行为会导致任何问题吗？

```
{
  "ResponseStatus":{
  "ErrorCode":"ApplicationException",
  "Message":"CRASH",
  }
} 
```

# .net - 为谷歌驱动器创建一个网络基础应用程序

> ID：12040437
> 
> 赞同：0
> 
> 时间：2012-08-20T15:19:49.763
> 
> 标签：.net, google-drive-api

我想在 .net c# 中创建一个网络基础应用程序，使用谷歌驱动器来存储可在组织之间共享的视频和图片。我希望能够将元数据添加到上传或编辑的文件中，以帮助进行搜索。是否可以创建这样的应用程序？有什么好的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:17:33.587

绝对可以编写一个将文件存储到 Google Drive 并管理其共享权限的 Web 应用程序。

一个很好的起点是 Google Drive SDK 文档中包含的示例 ASP.NET MVC 应用程序：

[https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

# asp.net - 以编程方式删除gridview行

> ID：12040441
> 
> 赞同：0
> 
> 时间：2012-08-20T15:19:55.690
> 
> 标签：asp.net, c#-4.0, gridview, webforms, delete-row

尝试删除 gridview 中的一行时，我一直返回错误（输入字符串的格式不正确）

不知道我做错了什么。有什么帮助吗？

```
<asp:GridView ID="favoritesGrid" runat="server" OnRowDeleting ="favoritesGrid_RowDeleting">
    <columns>
        <asp:CommandField HeaderText="Delete" ShowDeleteButton="True"/>
        <asp:BoundField HeaderText="FavoritesId" DataField="FavoritesId"/>
        <asp:TemplateField HeaderText="Site Name">
             <ItemTemplate>
                 <asp:HyperLink ID="myHyperlink"
                                Text='<%# Eval("SiteName") %>'
                                NavigateUrl='<%# Eval("Url") %>'
                                runat="server">

                 </asp:HyperLink>
             </ItemTemplate>
        </asp:TemplateField>

    </columns>
</asp:GridView>

   protected void favoritesGrid_RowDeleting(object sender, GridViewDeleteEventArgs e)
    {
        var delId = Convert.ToInt32(favoritesGrid.Rows[e.RowIndex].Cells[0].Text);
        //var id = favoritesGrid.Rows[e.RowIndex].Cells[0].Text;
        var delFavorites = new FavoritesDb();
        var delFavs = delFavorites.DeleteFavorite(delId);
        DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:32:25.320

位置 0 的单元格中包含单词“delete”，无法转换为 int。你需要使用：

```
var delId = Convert.ToInt32(favoritesGrid.Rows[e.RowIndex].Cells[1].Text); 
```

但是，这不是一个好方法，因为您可能会更改单元格的顺序或添加一个新的。您最好使用 DataKeyNames 属性。

aspx：

```
<asp:GridView DataKeyNames="FavoritesId" ...> 
```

C＃：

```
Convert.ToInt32(favoritesGrid.DataKeys[e.RowIndex].Value); 
```

# php - php从其他页面返回多个变量

> ID：12040444
> 
> 赞同：0
> 
> 时间：2012-08-20T15:20:07.183
> 
> 标签：php

我正在尝试创建一个包含返回“mf_id”值及其相应“制造商”值的链接的表。我可以一次做一个，但是当我尝试将两者结合起来时，问题开始出现。这是我到目前为止所拥有的：

```
while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td><a href=\"list.php?mf_id&&Manufacturer=" . $row['mf_id'&&'Manufacturer'] . "\">" . $row['Manufacturer'] . "</a></td>";
echo "</tr>";
} 
```

和另一页：

```
 $numb = $_GET['mf_id'];
$name = $_GET['Manufacturer'];
echo "<h1>$name</h1>";
$result=mysql_query("select * from Products where mf_id=$numb"); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:23:10.107

因为您从不`Manufacturer`通过查询字符串，所以第二页无法通过`GET`. 此外，出于有效性目的，您的查询字符串值应通过`urlencode()`.

这一行：

```
echo "<td><a href=\"list.php?mf_id=" . $row['mf_id'] . "\">" . $row['Manufacturer'] . "</a></td>"; 
```

应该：

```
echo "<td><a href=\"list.php?mf_id=" . urlencode($row['mf_id']) . "&Manufacturer=" . urlencode($row['Manufacturer']) . "'\">" . $row['Manufacturer'] . "</a></td>"; 
```

**请注意：**它可能无助于回答您的问题，但您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)。

**更新：**

根据我了解到的 meagar 的建议`http_build_query()`。这绝对是在将查询字符串写入 URL 时要走的路：

```
$data = array('mf_id' => $row['mf_id'], 'Manufacturer' => $row['Manufacturer']);
echo "<td><a href='list.php?" . http_build_query($data) . "'>" . $row['Manufacturer'] . "</a></td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:24:58.860

这根本没有任何意义：`$row['mf_id'&&'Manufacturer']`. 这不是您访问数组的两个元素的方式。您将两个字符串与 结合`&&`，产生 boolean`true`并尝试访问`$row[true]`. 您不能以这种方式访问​​数组。

如果要同时使用这两个项目，则需要单独访问它们：

```
$row['mf_id'] . $row['Manufacturer'] 
```

如果你想构建一个包含这两个值的查询字符串，你应该使用[http_build_query](http://php.net/manual/en/function.http-build-query.php)它将负责对你的数据进行 URL 编码：

```
$query = http_build_query(array('mf_id' => $row['mf_id'], 'manufacturer' => $row['Manufacturer']));

echo '<td><a href="list.php?' . $query . '">' . $row['Manufacturer'] . '</a></td>'; 
```

请注意，如果您实际上只是选择了所需的字段，则不必在`http_build_query`. 如果您`$row`已经只包含`mf_id`and `manufacturer`，那么使用就足够了

```
$query = http_build_query($row); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:22:25.823

您只是将 mf_id 传递到页面中，而不是传递制造商。

编辑（因为您更改了代码）

改变：

```
while($row = mysql_fetch_array($result))
{
  echo "<tr>";
  echo "<td><a href=\"list.php?mf_id&&Manufacturer=" . $row['mf_id'&&'Manufacturer'] . "\">" . $row['Manufacturer'] . "</a></td>";
  echo "</tr>";
} 
```

到：

```
while($row = mysql_fetch_array($result))
{
  echo "<tr>";
  echo "<td><a href=\"list.php?mf_id=".$row['mf_id']."&Manufacturer=" . $row['Manufacturer'] . "\">" . $row['Manufacturer'] . "</a></td>";
  echo "</tr>";
} 
```

# asp.net - Membership.ValidateUser 与数据库聊天

> ID：12040447
> 
> 赞同：2
> 
> 时间：2012-08-20T15:20:20.807
> 
> 标签：asp.net, asp.net-mvc, entity-framework, asp.net-membership, membership-provider

不确定我是否做错了什么，或者我是否应该放弃 ASP.NET SQL Membership 提供程序，也许可以推出我们自己的。我正在努力通过减少数据库调用次数来优化我们的 Web 应用程序/服务性能。为此，我连接了 Entity Framework Profiler (EFProf)，这很棒。

看起来从对 Membership.ValidateUser(username, password) 的一次调用中，我得到了对数据库的 8 次调用。4 次选择，4 次更新。似乎完全相同的选择和更新序列连续重复两次。它根据用户名选择用户数据，根据 userId 再次选择，然后更新上次登录和上次活动日期（最后两个作为两个单独的更新语句发送）。

当我们添加我们在 Azure 上运行的事实时，这会变得更大一些，因此数据库不是位于同一台机器上或位于 Web 服务器旁边，因此每个 db 调用平均需要 3-10 毫秒.

对此有什么想法吗？以前有人注意到这种行为吗？似乎这可能只是 MSFT 需要优化的东西，但我想无论如何我都会问。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:25:50.773

Azure 不支持 SqlMembershipProvider 和 SqlRoleProvider，建议迁移到[通用提供程序](http://blogs.msdn.com/b/webdev/archive/2012/08/16/migration-for-user-accounts-from-the-sqlmembershipprovider-to-the-universal-providers.aspx)。我不确定这是否是它如此健谈的原因，但新的提供商内置了 Azure 支持。

# ruby-on-rails - 如何实现omniauth、healthgraph和rails？

> ID：12040450
> 
> 赞同：1
> 
> 时间：2012-08-20T15:20:24.223
> 
> 标签：ruby-on-rails, ruby, api, omniauth

我正在尝试构建一个非常简单的 Rails 应用程序，人们可以在其中登录，然后查看他们的 Run Keeper 健身活动列表

我选择使用 Devise 和 OmniAuth 来处理登录（使用omniauth-runkeeper 完成）。一切都运作良好，跟随 Ryan Bates 关于这个话题的精彩 Railscast。

然后我热衷于使用[HealthGraph gem](https://github.com/kennyma/health_graph)连接到 RunKeeper API。为此，它需要一个访问令牌。我选择在授权应用程序时将其拉出，并将其记录在用户模型中（如[本 Gist](https://gist.github.com/3405032)中所述），但我不确定这种方法是否完全正确。我应该将此访问令牌永久记录在数据库中吗？我现在可以使用以下方法通过 API 轻松创建新连接，但我担心这不是最安全的方法。

```
@user = HealthGraph::User.new(current_user.run_token) 
```

任何有关不同方法的建议或提示将不胜感激。

伊恩

# ruby-on-rails - 使用 devise_invitable 发送邀请电子邮件失败

> ID：12040451
> 
> 赞同：0
> 
> 时间：2012-08-20T15:20:27.420
> 
> 标签：ruby-on-rails, heroku

我最近将我的应用程序部署到了 heroku。当我尝试向任何人发送邀请时，我收到以下错误。

```
 ActionView::Template:Error (invalid type sequence in UTF-8) 
```

在我的模板中，我添加了`<%# encoding: utf-8 %>`.

我现在被困住了，因为它在开发环境中运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:25:55.723

您是否尝试`magic_encoding`从命令行运行？您可能错过了需要`#encoding utf-8`. 你能给我们看一些代码吗？您是否在控制器中使用任何字符（日语等）？

# javascript - javascript中的花括号

> ID：12040452
> 
> 赞同：2
> 
> 时间：2012-08-20T15:20:28.797
> 
> 标签：javascript, curly-braces

演示1：

```
{"aa":111} 
```

演示2：

```
{aa:111} 
```

演示1结果：

> SyntaxError: Unexpected token : (in chrome)

演示2结果：

> 111

如何解释这两个演示？tks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T15:21:44.137

它们被解析为语句，而不是表达式。

被`{ ... }`解析为块语句。
被`aa:`解析为语句标签。
被`111`解析为包含数字的表达式语句。由于它是您要评估的最后一条语句，因此将返回其值。

这`"aa":`是一个语法错误。由于语句标签不能包含`"`s，因此将其解析为表达式语句（如`111`，但为字符串而不是数字）。因此，`"`没有任何意义。

您希望它们被解析为对象文字，即表达式。
将它们括在括号中。

# database - 更快的计数方法是什么？在数据库中使用计数查询或以编程方式计算检索到的行？

> ID：12040457
> 
> 赞同：2
> 
> 时间：2012-08-20T15:20:48.997
> 
> 标签：database, count

我想知道就从数据库计算行数而言，什么是更快的方法？DB（服务器）中的计数查询是否会比程序（客户端）中的某种计数更快。我认为要考虑的事情是

*   数据库大小

*   编程语言使用

*   客户需要计算的行数吗？

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:30:05.450

仅靠计数本身无法比在 C++、C# 或 Java 等编译语言中执行它更快。通过一行行数算*什么*。

不幸的是，将行从服务器复制到客户端比计算它们要昂贵得多。所以你最好让服务器计算它们。

我真的想不出一个应该依靠客户端的场景（如果唯一需要的是计数，而不是行本身）。

### 如果客户端需要这些行：

1.  如果需要所有行：依靠客户端
2.  如果只需要一个页面：依靠服务器！可能有成百上千的页面，您不想下载所有页面。RDBMS 通常可以优化计数，因为不需要列数据来计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:07:10.400

这取决于要求是什么，我宁愿在数据库级别进行，并且在客户端计算行需要将行传输到客户端。需要研究的一些问题是

考虑到所有这些，我一般会在数据库级别进行计数，但正如我在开始时所说的那样。这取决于我们想要实现它的场景。

# iphone - iOS人脸检测改造

> ID：12040458
> 
> 赞同：3
> 
> 时间：2012-08-20T15:20:57.490
> 
> 标签：iphone, objective-c, ios, xcode

我按照教程来检测图像中的人脸，它可以工作。它通过制作`UIView *faceView`. 现在我正在尝试获取检测到的人脸坐标，但是返回的结果在 y 轴上略有偏离。我怎样才能解决这个问题？我哪里错了。

这是我尝试过的：

```
CGRect newBounds = CGRectMake(faceFeature.bounds.origin.x, 
                              imageView.bounds.size.height - faceFeature.bounds.origin.y - faceFeature.bounds.size.height,
                              faceFeature.bounds.size.width, 
                              faceFeature.bounds.size.height); 
```

这是检测的源代码：

-

```
(void)markFaces:(UIImageView *)facePicture
{
    // draw a CI image with the previously loaded face detection picture
    CIImage* image = [CIImage imageWithCGImage:facePicture.image.CGImage];

    // create a face detector - since speed is not an issue we'll use a high accuracy
    // detector
    CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace 
                                              context:nil options:[NSDictionary dictionaryWithObject:CIDetectorAccuracyHigh forKey:CIDetectorAccuracy]];

    // create an array containing all the detected faces from the detector    
    NSArray* features = [detector featuresInImage:image];

    // we'll iterate through every detected face.  CIFaceFeature provides us
    // with the width for the entire face, and the coordinates of each eye
    // and the mouth if detected.  Also provided are BOOL's for the eye's and
    // mouth so we can check if they already exist.
    for(CIFaceFeature* faceFeature in features)
    {
        // get the width of the face
        CGFloat faceWidth = faceFeature.bounds.size.width;

        // create a UIView using the bounds of the face
        UIView* faceView = [[UIView alloc] initWithFrame:faceFeature.bounds];

        // add a border around the newly created UIView
        faceView.layer.borderWidth = 1;
        faceView.layer.borderColor = [[UIColor redColor] CGColor];

        CGRect newBounds = CGRectMake(faceFeature.bounds.origin.x, 
                                      imageView.bounds.size.height - faceFeature.bounds.origin.y - faceFeature.bounds.size.height,
                                      faceFeature.bounds.size.width, 
                                      faceFeature.bounds.size.height);

        NSLog(@"My view frame: %@", NSStringFromCGRect(newBounds));

        [self.view addSubview:faceView];

        if(faceFeature.hasLeftEyePosition)
        {
        }

        if(faceFeature.hasRightEyePosition)
        {
        }

        if(faceFeature.hasMouthPosition)
        {
        }
    }
}

-(void)faceDetector
{
    // Load the picture for face detection
    UIImageView* image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"jolie.jpg"]];

    // Draw the face detection image
    [self.view addSubview:image];

    // flip image on y-axis to match coordinate system used by core image
    [image setTransform:CGAffineTransformMakeScale(1, -1)];

    // flip the entire window to make everything right side up
    [self.view setTransform:CGAffineTransformMakeScale(1, -1)];

    // Execute the method used to markFaces in background
    [self performSelectorInBackground:@selector(markFaces:) withObject:image];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:47:22.040

CoreImage 协调系统和 UIKit 协调系统是完全不同的。CIFaceFeature 提供 coreimage 坐标系中的坐标，您需要将它们转换为 uikit 坐标系：

```
// CoreImage coordinate system origin is at the bottom left corner and UIKit is at the top left corner
// So we need to translate features positions before drawing them to screen
// In order to do so we make an affine transform
// **Note**
// Its better to convert CoreImage coordinates to UIKit coordinates and
// not the other way around because doing so could affect other drawings
// i.e. In the original sample project you see the image and the bottom, Isn't weird?
CGAffineTransform transform = CGAffineTransformMakeScale(1, -1);
transform = CGAffineTransformTranslate(transform, 0, -_pickerImageView.bounds.size.height);

for(CIFaceFeature* faceFeature in features)
{
 // Translate CoreImage coordinates to UIKit coordinates
 const CGRect faceRect = CGRectApplyAffineTransform(faceFeature.bounds, transform);

    // create a UIView using the bounds of the face
    UIView* faceView = [[UIView alloc] initWithFrame:faceRect];
    faceView.layer.borderWidth = 1;
    faceView.layer.borderColor = [[UIColor redColor] CGColor];

    // get the width of the face
    CGFloat faceWidth = faceFeature.bounds.size.width;

    // add the new view to create a box around the face
[_pickerImageView addSubview:faceView];

        if(faceFeature.hasLeftEyePosition)
    {
        // Get the left eye position: Translate CoreImage coordinates to UIKit coordinates
        const CGPoint leftEyePos = CGPointApplyAffineTransform(faceFeature.leftEyePosition, transform);

        // Note1:
        // If you want to add this to the the faceView instead of the imageView we need to translate its
        // coordinates a bit more {-x, -y} in other words: {-faceFeature.bounds.origin.x, -faceFeature.bounds.origin.y}
        // You could do the same for the other eye and the mouth too.

        // Create an UIView to represent the left eye, its size depend on the width of the face.
        UIView* leftEyeView = [[UIView alloc] initWithFrame:CGRectMake(leftEyePos.x - faceWidth*EYE_SIZE_RATE*0.5f /*- faceFeature.bounds.origin.x*/, // See Note1
                                                                       leftEyePos.y - faceWidth*EYE_SIZE_RATE*0.5f /*- faceFeature.bounds.origin.y*/, // See Note1
                                                                       faceWidth*EYE_SIZE_RATE,
                                                                       faceWidth*EYE_SIZE_RATE)];
        leftEyeView.backgroundColor = [[UIColor magentaColor] colorWithAlphaComponent:0.3];
        leftEyeView.layer.cornerRadius = faceWidth*EYE_SIZE_RATE*0.5;
        //[faceView addSubview:leftEyeView];  // See Note1
        [_pickerImageView addSubview:leftEyeView];
    }
} 
```

# mahout - 带有与偏好相关的元数据的 Mahout 建议

> ID：12040460
> 
> 赞同：0
> 
> 时间：2012-08-20T15:21:03.913
> 
> 标签：mahout

我正计划编写一个推荐器，它根据上下文信息（做出偏好的时间、用于推荐的设备……）对偏好进行不同的处理

在 Mahout in Action 一书中和 Mahout 附带的代码示例中，我似乎找不到任何相关内容。在一些示例中，有用于表达用户或项目相似性的元数据（又名内容）——但这*不是*我想要的。

我想知道是否有人已经尝试过对 Mahout 做类似的事情？

* * *

编辑：

一个实际的例子可能是，当前会话是在移动设备上完成的，这应该会导致在移动设备上跟踪的所有偏好上推（评级*1.1），而不同跟踪的偏好下降（评级*0.9）。

...

另一个示例可能是某些评级是隐式收集的，而其他评级是显式收集的。我如何能够在不直接将其“编码”到跟踪值的情况下跟踪这一事实，以及在计算分数时如何使用该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:27:21.570

我会说一种方法是使用[Rescorer](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/recommender/Rescorer.html)类来做到这一点，但我的猜测是，当你说这不是你要找的东西时，这就是你所指的。

另一种方法是在使用 Mahout 生成推荐之前，对您必须根据需要调整偏好的全部数据进行预处理。

如果您提供更多关于您希望如何使用您的数据来修改偏好的详细信息，这里的人们将能够提供更多帮助。

# c# - 使用响应式扩展观察标准输出

> ID：12040463
> 
> 赞同：3
> 
> 时间：2012-08-20T15:21:10.093
> 
> 标签：c#, .net, system.reactive

由于 StandardOutput 不是反应式的，我需要一种方法来观察它。我知道 Process 类在编写输出时会公开一个用于接收通知的事件，因此我使用此扩展方法来获取标准输出的 IObservable

```
public static class ProcessExtensions
{
    public static IObservable<string> StandardOutputObservable(this Process process)
    {
        process.EnableRaisingEvents = true;
        process.StartInfo.RedirectStandardOutput = true;

        var received = Observable.FromEventPattern<DataReceivedEventHandler,DataReceivedEventArgs>(
            handler => handler.Invoke,
            h => process.OutputDataReceived += h,
            h => process.OutputDataReceived -= h)
            .TakeUntil(Observable.FromEventPattern(
                h => process.Exited += h,
                h => process.Exited -= h))
            .Select(e => e.EventArgs.Data);

        process.BeginOutputReadLine();

        return received;

        /* Or if cancellation is important to you...
        return Observable.Create<string>(observer =>
            {
                var cancel = Disposable.Create(process.CancelOutputRead);

                return new CompositeDisposable(
                    cancel, 
                    received.Subscribe(observer));
            });
         */
    }
} 
```

如发现[here](http://social.msdn.microsoft.com/Forums/pl-PL/rx/thread/49da113d-6d2a-4ce9-85c4-3acdbfa28f56 "处理控制台输出重定向和 RX")。但是当我开始这个过程时

```
public sealed class ProgramHelper
{
    private readonly Process _program = new Process();
    public IObservable<string> ObservableOutput { get; private set; }

    public ProgramHelper(string programPath, string programArgs)
    {
        _program.StartInfo.FileName = programPath;
        _program.StartInfo.Arguments = programArgs;
    }

    public void StartProgram()
    {
        ConfigService.SaveConfig(
            new Config(
                new Uri(@"http://some.url.com")));

        _program.Start();

        ObservableOutput = _program.StandardOutputObservable();

    }
}

...

[TestFixture]
public class When_program_starts
{
    private ProgramHelper _program;

    [Test]
    public void It_should_not_complain()
    {
       //W
       Action act = () => _program.StartProgram();
       //T
       act.ShouldNotThrow<Exception>();
    }
} 
```

我收到此错误：

> “StandardOut 尚未重定向或进程尚未开始。”

感谢您的时间。

编辑：将 ProgramHelper 编辑为

```
 public ProgramHelper(string programPath, string programArgs)
    {
        _program.StartInfo.FileName = programPath;
        _program.StartInfo.Arguments = programArgs;
        _program.EnableRaisingEvents = true;
        _program.StartInfo.UseShellExecute = false;
        _program.StartInfo.RedirectStandardOutput = true;
    } 
```

但现在它抛出“访问被拒绝异常”。

看来我无权以编程方式启动该过程；如果我从控制台启动 exe，它就可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:27:45.327

在进程启动后，您正在改变[Process.StartInfo属性。](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.startinfo.aspx)

从[Process.StartInfo MSDN 文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.startinfo.aspx)：

> 您可以更改 StartInfo 属性中指定的参数，直到您在进程上调用 Start 方法。启动进程后，更改 StartInfo 值不会影响或重新启动关联的进程。

# matlab - 计算 FFT 时的信号长度

> ID：12040464
> 
> 赞同：5
> 
> 时间：2012-08-20T15:21:14.743
> 
> 标签：matlab, signal-processing, fft, wavelet

我想问一些与我的最后一个问题有关的问题，所以我不想在另一个线程中发帖。我的问题包含一个代码，因此我不能将其作为评论发布。所以我必须将我的旧问题编辑成一个新问题。请看一下并提供帮助。谢谢你。

我是 FFT 和 DSP 的新手，我想问你一些关于在 Matlab 中计算 FFT 的问题。以下代码来自 Matlab 帮助，我只是去除了噪音。

1.  我可以选择不同于 NFFT 的信号 L 的长度吗？

2.  我不确定我是否正确使用了窗口。但是当我使用window（在下面的代码中）时，我无法获得幅度的确切值？

3.  当 L 和 NFFT 取不同的值时，幅度的值也不同。如何获得输入信号幅度的确切值？（在下面的代码中，我使用了一个已知信号来检查代码是否正常工作。但如果我从传感器获得信号并且我不知道它的幅度，我该如何检查？）

非常感谢您，并期待收到您的来信：）

```
Fs = 1000;                    % Sampling frequency
T = 1/Fs;                     % Sample time
L = 512;                     % Length of signal
NFFT=1024;                   % number of fft points
t = (0:L-1)*T;                % Time vector
x = 0.7*sin(2*pi*50*t) + sin(2*pi*120*t);    input signal
X = fft(hann(L).*x', NFFT)/L;
f = Fs/2*linspace(0,1,NFFT/2+1);
plot(f,2*abs(X(1:NFFT/2+1)))     % Plot single-sided amplitude spectrum. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:07:45.220

`L`是输入信号中的样本数。如果`L < NFFT`那么差异是零填充的。

我建议您阅读零填充对 FFT 的影响。通常最好使用它，`L = NFFT`因为这将为您提供数据的最佳表示。

这里给出了关于使用零填充和 FFT 的例外答案： [https ://dsp.stackexchange.com/questions/741/why-should-i-zero-pad-a-signal-before-taking-the-傅里叶变换](https://dsp.stackexchange.com/questions/741/why-should-i-zero-pad-a-signal-before-taking-the-fourier-transform)

在您的实验中，您会看到不同的幅度，因为每种不同的频谱泄漏量都会有所不同`L`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T16:06:28.070

您需要在 FFT 之前应用[窗口函数](http://en.wikipedia.org/wiki/Window_function)，以获得与采样窗口内具有非整数周期数的频率分量一致的结果。

您可能还想考虑使用[周期图](http://www.mathworks.co.uk/help/toolbox/signal/ref/periodogram.html)而不是直接使用 FFT - 它会为您处理窗口函数和许多其他内务管理。

# actionscript-3 - AS3 forlooping 按钮和功能

> ID：12040465
> 
> 赞同：0
> 
> 时间：2012-08-20T15:21:15.350
> 
> 标签：actionscript-3, for-loop

我正在学习 Actionscript，我有点卡在 for 循环上。

我有这个代码，

```
movieClip.thumbnail1.addEventListener(MouseEvent.CLICK ,myBtn1);
function myBtn1(evt:MouseEvent):void
{

     var myMC:MC1 = new MC1();
     mcPlacement.addChild(myMC);
}

movieClip.thumbnail2.addEventListener(MouseEvent.CLICK ,myBtn2);
function myBtn2(evt:MouseEvent):void
{

     var myMC2:MC2 = new MC2();
     mcPlacement.addChild(myMC2);
} 
```

我想知道，你如何使用 for 循环将它们堆叠起来，这样我就可以运行超过 10 个按钮而不必输入很长的路，我也应该使用数组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:58:16.970

如果movieClip 仅包含您要为其添加事件侦听器的thumbNails，那么您可以执行以下操作：

```
private function addEventListeners():void
{
    for(var i=0; i<movieClip.numChildren; i++)
    {
        var dp:DisplayObject = movieClip.getChildByIndex(i) as DisplayObject;
        dp.addEventListener(MouseEvent.CLICK,onThumbNailClicked);
    }
}

private function onThumbNailClicked(e:MouseEvent):void
{
    trace("Clicked : "+e.target.name);

} 
```

如果您事先知道缩略图的名称，您可以在事件处理程序中创建不同的影片剪辑并将它们添加到 mcPlacement。

```
private function onThumbNailClicked(e:MouseEvent):void
{
    var mcs:Object = {
        "thumbNail1":MC1,
        "thumbNail2":MC2
    };
    trace("Clicked : "+e.target.name);
    var mc:MovieClip = new mcs[e.target.name]();
    mcPlacement.addChild(mc);
} 
```

# rest - HTTP 协议外的 RESTful

> ID：12040470
> 
> 赞同：5
> 
> 时间：2012-08-20T15:21:32.527
> 
> 标签：rest, restful-architecture

我知道**REST**是推荐的网络架构风格，它基本上适用于 HTTP 协议。我想知道是否在其他协议（如**TCP**或**自定义协议）中应用了****RESTful 架构**。有人可以向我指出一个体现这种特征的应用程序，或者解释一下 RESTful 是否仅适用于 HTTP。

 ****提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-27T08:57:40.680

HTTP 协议将 restful 资源映射到服务。如果您真的热衷于编写代码并解决 TCP 传输层问题，您可能会获得很少的性能优势。 [这](http://www.codeproject.com/Articles/344512/Building-and-Testing-WCF-RESTful-services)是一个具有一些相似之处的项目的链接

但我认为为了便于开发，您最好坚持使用 HTTP。****

# slickgrid - 使用 Slickgrid 进行页面转换会导致自定义编辑器消失

> ID：12040473
> 
> 赞同：0
> 
> 时间：2012-08-20T15:21:40.603
> 
> 标签：slickgrid

我们使用 Slickgrid，在切换到下一页时遇到了一个小问题。编辑器处于活动状态/可见状态。当加载网格并显示所有数据时，我们单击例如网格中的第一行以激活编辑器。

当我们在网格中向下导航时，当我们按下最后一行的向下键时，就像预期的那样，新页面会加载数据。当显示新页面的数据时，编辑器在第一行不活动，但是当我们按下向下键时，编辑器在第 2 行再次变为活动/可见。

然后当我们按一次向上键时，编辑器在第 1 行也处于活动/可见状态。奇怪的是，编辑器在页面转换时关闭了。同样，当我们在编辑器可见时在第二页的第一行按向上键时，前一页会加载，但编辑器再次不再可见（在该页的最后一行）。但是当我们再次按下向上键时，编辑器再次出现在最后一行的前面（无需单击鼠标）。

我们尝试了普通编辑器而不是自定义编辑器，但这并没有解决它。

这可能是什么原因或我们应该查看哪个事件/功能等？它可以是缺少的 javascript 或 css 包含吗？视口、寻呼机或数据加载器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T10:10:45.290

幸运的是，今天这个问题已经解决了。

原因是我们在新页面的数据加载之前调用了SlickGrid函数EditActiveCell。当为了在加载数据后调用 EditActiveCell 进行更改时，网格的行为与预期的一样。

# ruby-on-rails - 编写多行 ActiveRelation 查询的惯用方式是什么？

> ID：12040481
> 
> 赞同：6
> 
> 时间：2012-08-20T15:22:05.267
> 
> 标签：ruby-on-rails, ruby

我的应用程序中有许多多行 ActiveRelation 查询方法，我不确定编写这些方法的最惯用方式。看看这个例子：

```
def postal_code_ids_within(miles)
  nearby_postal_codes = PostalCode.where("latitude > :min_lat and latitude < :max_lat",
    min_lat: (latitude - (miles.to_f / MILES_PER_DEGREE_LATITUDE.to_f / 2.to_f)),
    max_lat: (latitude + (miles.to_f / MILES_PER_DEGREE_LATITUDE.to_f / 2.to_f)))
  nearby_postal_codes = nearby_postal_codes.where("longitude > :min_lon and longitude < :max_lon",
    min_lon: (longitude - (miles.to_f / MILES_PER_DEGREE_LONGITUDE.to_f / 2.to_f)),
    max_lon: (longitude + (miles.to_f / MILES_PER_DEGREE_LONGITUDE.to_f / 2.to_f)))
  nearby_postal_codes.pluck(:id)
end 
```

对我来说感觉有点不对劲。从其中返回 ActiveRelation 对象的块似乎是惯用的，但我还没有看到这种方法。

什么是标准？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T15:50:55.627

在 Brian 的建议的基础上，这更加清晰并且效果很好。

```
scope :near, lambda { |postal_code, miles|
  degree_offset = miles / MILES_PER_DEGREE / 2
  where("latitude > :min_lat and latitude < :max_lat and longitude > :min_lon and longitude < :max_lon",
    min_lat: postal_code.latitude - degree_offset,
    max_lat: postal_code.latitude + degree_offset,
    min_lon: postal_code.longitude - degree_offset,
    max_lon: postal_code.longitude + degree_offset)
}

def postal_code_ids_within(miles)
  self.class.near(self, miles).pluck(:id)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T08:30:19.680

分解成范围是一个很好的建议。与另一个答案相比，我更喜欢将复杂的作用域定义为一个函数，而不是搞乱 lambdas、块和[优先规则](https://stackoverflow.com/questions/1476678/rails-named-scope-lambda-and-blocks)：

```
def self.near(postal_code, miles)
  degree_offset = miles / MILES_PER_DEGREE / 2
  where("latitude > :min_lat and latitude < :max_lat and longitude > :min_lon and longitude < :max_lon",
    min_lat: postal_code.latitude - degree_offset,
    max_lat: postal_code.latitude + degree_offset,
    min_lon: postal_code.longitude - degree_offset,
    max_lon: postal_code.longitude + degree_offset)
end

def postal_code_ids_within(miles)
  self.class.near(self, miles).pluck(:id)
end 
```

# javascript - jQuery 扩展数据持久化

> ID：12040483
> 
> 赞同：0
> 
> 时间：2012-08-20T15:22:14.513
> 
> 标签：javascript, jquery, html

我想知道如何在 jQuery 扩展中的方法之间共享数据，所以当我调用该方法时`refresh`，它能够使用.`plugin``options``init`

每页有多个这些控件。

这是我所拥有的一个例子：

```
(function($) {
    var methods = {
        init: function(options) {
            var defaults = {
                defaultText: "Rating",
                maxRating: 5,
            };

            options = $.extend(defaults, options);

            return this.each(function() {
                var plugin = $(this);

                main($(plugin), options);
            });
        },

        refresh: function() {
            // I would like to be able to use the 'options' and 'plugin' variables defined in the init method
        }
    };

    function main(plugin, option) {
        // do main code stuff
    }
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:28:54.500

将数据存储在元素本身上，然后按元素访问它。

```
(function ($) {

var methods = { // should probably expose this object in some way so it can be extended by other develoeprs or so that defaults can be changed

    defaults : {
        defaultText: "Rating",
        maxRating: 5,
    },

    init : function (options) {

        options = $.extend({}, methods.defaults, options);

        this.data("myPlugin", options);

        return this.each(function () {

            main($(this), options);

        });
    },

    refresh : function () {

        return this.each(function(){

            var options = $(this).data("myPlugin");

        });
                // I would like to be able to use the 'options' and 'plugin' variables defined in the init method
    }
};

function main(plugin, option) {

    // do main code stuff

}

})(jQuery); 
```

我不确定您为什么要访问插件 var，您应该已经可以访问调用刷新方法的元素。

# javascript - 在Safari中检测MacO上触摸板两指滚动的事件

> ID：12040485
> 
> 赞同：6
> 
> 时间：2012-08-20T15:22:23.203
> 
> 标签：javascript, macos

我们正在研究网站滚动。我们的网站具有水平方向，并且开发了页面调整大小，因此没有垂直浏览器滚动到任何页面。但是当我们在 MacOs 机器上测试我们的网站时，我们发现在基于 WebKit 引擎（例如 Safari）的浏览器中，触摸板两指滚动时出现了错误。

在滚动过程中，我们有以下结果（Safari 浏览器 MacOs）：

1）如果我在触摸板上用两根手指向上/向下滚动页面向上/向下移动（但这里没有垂直浏览器滚动）然后页面根据需要向左/向右移动/滚动；

2）如果我在触摸板上用两根手指向左/向右滚动浏览器选项卡开始滚动/离开，我们需要此操作将我们的页面滚动到左侧/右侧或阻止此操作。

因此，我们需要在基于 WebKit 引擎的浏览器中捕获 MacO 上触摸板两指滚动的事件。

也许有人知道我们如何使用javascript检测/监听触摸板/触控板（触摸板上的两个手指）的事件？

谢谢你。

# java - Eclipse e4 应用程序/插件中的功能是否可选？

> ID：12040489
> 
> 赞同：3
> 
> 时间：2012-08-20T15:22:40.700
> 
> 标签：java, eclipse, eclipse-plugin, swt, eclipse-rcp

我正在尝试了解`e4`RCP 的 Eclipse 概念。
在阅读完教程之后，我陷入了以下困境：
假设我创建了一个`Plugin`项目（没有选中富客户端，没有选中 Actvator，因此 /src 下没有类等）
插件是 Eclipse 中最小的可部署和可安装的软件组件。好的。
现在我可以创建一个`Product Configuration`基于`Plugins` **or** `Features`的。
所以`Product Configuration`提供插件等，如果我理解正确，这`Feature`是可选的。假设我是正确的（不知道，是吗？）我将依赖项添加到产品配置中：
`org.eclipse.emf.common`然后`org.eclipse.emf.ecore`按`Add Required Plugins`
My product confuration is selected to be **plugin based**。
我现在不明白的是，如果我没有将*我的插件*定义为依赖项的一部分，那么我在运行应用程序时会丢失一个插件（我在运行之前检查了验证插件）。但为什么？该插件已在产品定义（新）中定义为“定义插件”。为什么我还必须在这里明确添加它？

无论如何，当我尝试启动一个窗口时（是的，我创建了 a`New Application Model`并定义了 a `Trimmed Window`）我得到运行时异常

```
java.lang.RuntimeException: Application "org.eclipse.e4.ui.workbench.swt.E4Application" could not be found in the registry. The applications available are: org.eclipse.equinox.app.error.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29) 
```

我只能假设发生这种情况是因为缺少一个插件，它是：（ `org.eclipse.e4.ui.workbench.swt`由于启用了插件验证，我得到了这个）

![在此处输入图像描述](../Images/828e1e9786981a178e5e80d6051bb575.png)

为什么我会得到这个异常？我相信我明白了，因为我没有添加`org.eclipse.e4.rcp`as 依赖项。
但我找不到它作为一种选择。事实证明，只有当产品配置为`based on Features`. 它不适用于插件。
此外，相同的过程，但定义 a`Feature`并将其“附加”为对产品配置的依赖是有效的！即没有运行时异常和窗口出现。

那么发生了什么？功能是强制性的吗？我不明白。我认为它们是可选的。谁能帮我解决这个问题？

**更新：**
如果我在我得到的手动添加`org.eclipse.e4.ui.workbench.swt`为依赖项（并按需要添加）`product`：

![在此处输入图像描述](../Images/ca67fbd013be063851fdcce55e74c577.png)

```
!ENTRY org.eclipse.osgi 2 0 2012-08-20 18:36:52.044
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-20 18:36:52.044
!MESSAGE Bundle initial@reference:file:plugins/org.eclipse.e4.ui.workbench.swt_0.10.1.v20120525-2014.jar was not resolved.
!SUBENTRY 2 org.eclipse.e4.ui.workbench.swt 2 0 2012-08-20 18:36:52.044
!MESSAGE Missing required bundle org.eclipse.core.databinding_[1.2.0,2.0.0). 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T19:28:26.303

如果您在 Eclipse 4 上创建基于插件的产品，您仍然需要包含 org.eclipse.e4.rcp 特性的大部分插件。尝试从[http://git.eclipse.org/c/platform/eclipse.platform.ui.git/tree/features/org.eclipse.e4.rcp/feature.xml的列表中添加它们](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/tree/features/org.eclipse.e4.rcp/feature.xml)

# jquery - 在 jquery 中创建一个数组并寻址多个元素

> ID：12040490
> 
> 赞同：0
> 
> 时间：2012-08-20T15:22:41.090
> 
> 标签：jquery

我正在使用以下简单的 jquery 函数，但我想在具有**不同类**的多个元素上使用它。如何使用数组使我的代码更短？

```
$(function() {

  $('.red').attr("href", "images/gallery/redSmall.jpg");
  $('.blue').attr("href", "images/gallery/blueSmall.jpg");
  $('.green').attr("href", "images/gallery/greenSmall.jpg");
  $('.black').attr("href", "images/gallery/blackSmall.jpg");

}); 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:29:54.873

JQuery方式是

```
$(function() {
    $.each(['red', 'blue', 'green', 'black'],function(index,item){
         $('.'+item).attr("href", "images/gallery/"+item+"Small.jpg");
    });
}); 
```

但是，如果您编写的 HTML 更好，您可以做得更短……将“red”、“blue”……移动到另一个属性，并为所有属性添加一个类。就像是

```
<a class="color" data-color="red" href="javascript:void(0)"/>
<a class="color" data-color="blue" href="javascript:void(0)"/>
... 
```

然后你的 JS 会更通用，更短

```
$(".color").each(function(item,index){ $(this).attr("href","images/gallery/"+this.attr("data-color")+"Small.jpg"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:25:39.090

我正在使用类的数组，而不是使用 for 循环将 href 更改为匹配的元素：

```
$(function() {
    var classes = ['red', 'blue', 'green', 'black'];

    for(var i=0; i < classes.length; i++)
    {
        $('.'+classes[i]).attr("href", "images/gallery/"+classes[i]+"Small.jpg");
    }
}); 
```

**您可以根据需要添加任意数量的课程。

# spring - 如何根据枚举常量在spring bean中分配属性的constructor-arg值

> ID：12040492
> 
> 赞同：0
> 
> 时间：2012-08-20T15:22:43.953
> 
> 标签：spring

我有一个枚举 ContentType，它有一个类似 ContentType.getName() 的方法，可以评估为 regText OR session。那么，我该如何执行以下操作，我可以根据此方法的返回值实例化 bean。此外，我只想在 XML 配置而不是注释中执行此操作。

```
<property name="contentCaptureRegEx" ref="${ContentType.getName()}">
</property>

<bean id="regText" class="java.util.regex.Pattern" factory-method="compile" lazy-init="true">
<constructor-arg value="xyz" /></bean>

<bean id="session" class="java.util.regex.Pattern" factory-method="compile" lazy-init="true">
<constructor-arg value="abc" /></bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:46:02.077

我建议使用静态工厂方法，因为模式正则表达式已经在使用该模式。只需消除它们并添加：

```
package com.mine;

public class MyFactory {

    public static Pattern newContentCaptureRegEx() {
        String patternString;
        if ("regText".equals(ContentType.getName())) {
            patternString = "xyz";
        } else if ("session".equals(ContentType.getName())) {
            patternString = "abc";
        } else {
            throw new IllegalStateException("ContentType must be regText or session");
        }
        Pattern.compile(patternString);
    }

} 
```

您可以将其连接为：

```
<bean id="ContentCaptureRegEx" class="com.mine.MyFactory"
    factory-method="newContentCaptureRegEx" /> 
```

然后你可以在任何地方引用那个bean：

```
<property name="contentCaptureRegEx" ref="ContentCaptureRegEx" /> 
```

# php - Apache 文件所有权/组

> ID：12040497
> 
> 赞同：2
> 
> 时间：2012-08-20T15:23:25.033
> 
> 标签：php, linux, apache, ownership

我目前为我的组织管理 8 个不同的站点，并建立了一个中央管理网站来帮助管理所有站点上的内容。

我目前在管理网站上有一个文件上传器，允许我将 ZIP 文件上传到服务器。该脚本然后解压缩包，并将文件移动到服务器的不同部分。

问题是，当我通过浏览器上传文件时，它会将所有权分配给 apache（对于用户和组）。当我尝试使用 FTP 覆盖文件时，这会给我带来问题。

我试图在上传/移动文件后立即更改上传文件的所有者，既使用 PHP 原生“chown”函数，也使用 exec 函数运行 linux 命令 chown，但都失败（PHP 原生 chown 显示“不允许操作”错误）

所以我的问题是：1）我是不是走错了路？（我对文件所有权的了解有限） 2）我有什么理由不应该更改文件所有权？3）有没有变通办法？

如果您想了解更多信息，请随时询问。

非常感谢

菲尔

通过浏览器上传的文件的当前文件详细信息：

```
[file].php      permissions: adfr (0644)    Owner: Apache    Group: Apache 
```

通过 FTP 上传的文件的文件详细信息：

```
[file].php      permissions: adfr (0644)    Owner: [ftp login name]   Group: psacln 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:54:30.263

我做的事情与你所做的非常相似，但我不使用 ftp，我使用 scp，部分 ssh。有了这个，你可以做这样的事情：

```
$> scp -rp /var/www/html/somedir/* 192.168.1.100:/var/www/html/somedir/. 
```

通过这种方式，您可以使用 p 标志告诉命令复制文件并保留权限、所有权、日期戳。r 标志根据需要创建子目录和递归副本。

就像任何其他命令一样，您可以在脚本中放置几行 scp 以实现自动化，但为了避免密码，请在服务器之间使用 ssh 生成的证书。

# asp.net - ASP.NET ajax 不起作用

> ID：12040501
> 
> 赞同：0
> 
> 时间：2012-08-20T15:23:35.890
> 
> 标签：asp.net, jquery

我不知道为什么这不起作用（不能调用 SendValues 方法）。没有错误引发。谁能帮我 ？非常感谢！

html页面如下所示：

```
 <script language="javascript" type="text/javascript">
     $(function () {
         $("#Button1").click(function () {
             $.ajax({
                 type: "POST",
                 url: "WebForm1.aspx/SendValues",
                 data: { 'Code': '1026' },
                 contentType: "application/json; charset=utf-8",
                 dataType: "json",
                 success: function (json) {
                     alert(json.d);
                 },
                 failure: function () {
                     alert("Sorry,there is a error!");
                 }
             });

         });
     });
 </script> 
```

c# 代码类似：

```
 public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    [WebMethod]
    public static string SendValues(string Code)
    {
        string contects = string.Empty;

        return contects;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:54:48.933

我已经通过将数据：{'代码'：'1026'}更改为“数据：{'代码'：'1026'}”解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T13:25:34.440

数据应指定为，

```
data: '{ Code:["1026"]}' 
```

# ruby - Ruby Net/SFTP 油门速度

> ID：12040502
> 
> 赞同：0
> 
> 时间：2012-08-20T15:23:37.720
> 
> 标签：ruby, sftp, net-sftp

有没有办法限制与 ruby[​​ Net/SFTP](http://net-ssh.rubyforge.org/sftp/v2/api/)库的传输连接？我想利用它每晚下载一些备份，但不想在这样做时耗尽服务器的所有带宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:23:07.033

考虑 Net::SFTP 文档中的这个示例：

```
# open and read from a pseudo-IO for a remote file
sftp.file.open("/path/to/remote", "r") do |f|
  puts f.gets
end 
```

如果你`sleep`在那个块里面放一个会发生什么？

# excel - MATLAB 内部的 Excel 到文本转换

> ID：12040505
> 
> 赞同：0
> 
> 时间：2012-08-20T15:23:39.343
> 
> 标签：excel, matlab, text

我可以在 Excel 中手动将 excel 文件转换为文本。

但是为了让我的 MATLAB 脚本更加自主而不依赖于

另一个应用程序，我正在努力将 .xlsx 文件转换为

MATLAB 中的文本。是否有函数或例程可以转换

.xlsx 文件到 .txt？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:43:41.220

`xlsxread()`并且`csvwrite()`应该做的伎俩。

否则，如果由于某种原因您不想要 csv，您可以使用`fprintf()`： http: [//www.mathworks.com/help/techdoc/ref/fprintf.html](http://www.mathworks.com/help/techdoc/ref/fprintf.html)但 CSV 是纯文本，所以我怀疑这是要走的路.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:19:02.303

```
[~, ~, rawData] Data = xlsread('yourfile');
save('text.txt', 'rawData', '-ASCII'); 
```

# android - 未找到处理 Intent com.android.phone.videocall 的活动

> ID：12040516
> 
> 赞同：0
> 
> 时间：2012-08-20T15:24:11.110
> 
> 标签：android, android-intent, android-activity

我正在尝试开始视频通话，但每次都收到此错误

```
E/AndroidRuntime(668): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.android.phone.videocall dat=tel:xxx-xxx-xxxx (has extras) }
E/AndroidRuntime(668):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1409)
E/AndroidRuntime(668):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
E/AndroidRuntime(668):  at android.app.Activity.startActivityForResult(Activity.java:2827)
E/AndroidRuntime(668):  at android.app.Activity.startActivity(Activity.java:2933) 
```

这是我的代码：

```
Intent callIntent = new Intent("com.android.phone.videocall");
callIntent.putExtra("videocall", true);
callIntent.setData(Uri.parse("tel:" + prefs.getString("videonumber", "")));
startActivity(callIntent); 
```

在我的清单中，我得到了`<uses-permission android:name="android.permission.CALL_PHONE"/>`许可。我以为这就是你所需要的，但也许我错了。我`videonumber`的格式是 1-xxx-xxx-xxxx。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:32:35.963

这意味着您的手机上没有安装任何可以处理视频通话的应用程序。

这就是为什么在调用外部活动时总是很好的原因，将所有代码包装在一个`try()catch{}`块中，因为您不能依赖用户将安装这样一个扭结的应用程序这一事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-09T17:53:01.590

虽然`try-catch`可行，但我建议使用现有的 Android 工具来检查是否`Intent`可以处理隐式：

```
if (callIntent.resolveActivity(getPackageManager()) != null) {
    // Send the intent, it's safe
} else{
    // There is nothing that can handle this Intent
} 
```

# ruby-on-rails - 在 ActiveRecord::Relation 与 MetaSearch 上找不到分页方法

> ID：12040518
> 
> 赞同：3
> 
> 时间：2012-08-20T15:24:19.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination, meta-search

我正在尝试对来自元搜索的搜索结果进行分页，但我得到了一个

```
undefined method `paginate' for #<ActiveRecord::Relation:0x6d3df28> 
```

这是我的控制器中的代码：

```
@search = Camping.search(params[:search])

if !params[:search].nil?
  @campings = @search.paginate(:page => params[:page])
else
  @campings = [];
end 
```

这应该很简单，我真的不明白有什么问题......

我的 gem 文件中有这些：

```
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T09:13:13.670

所以是的，这很愚蠢，只是在安装 gem 后忘记重新启动服务器

# java - 强化学习中的一个策略迭代问题

> ID：12040521
> 
> 赞同：1
> 
> 时间：2012-08-19T14:47:25.327
> 
> 标签：java, reinforcement-learning

我必须解决策略迭代的问题，模型显示在

![在此处输入图像描述](../Images/4698b7b24cbf87ee8273e3247103f272.png)

我做了一个Java程序来模拟，策略算法是基于萨顿和巴托的[强化学习](http://webdocs.cs.ualberta.ca/~sutton/book/ebook/node43.html)书。我相信java程序中的模型和图片中的模型是一致的。当我最终运行模拟时，我可以进行 4 次迭代，最终结果与教科书上的最终答案是对的。但是在教科书里，最终答案只需要3次迭代，虽然最终答案是对的，但迭代中的中间答案有细微的变化，不知道是什么问题？

```
public class PolicyIteration{

    private static final double TOLERANCE = 0.1;
    private double gamma = 0.9;

    private int stateCount = 5;
    private int actionCount = 7;

    //states names
    private final String s[] = {"s1","s2","s3","s4","s5"};
    private final String ac[] = {"a","b","c","d","e","f","g"};
    // states
    private final int s1 =0;
    private final int s2 =1;
    private final int s3 = 2;
    private final int s4 = 3;
    private final int s5 = 4;

    // actions 
    private final int a = 0;
    private final int b = 1;
    private final int c = 2;
    private final int d = 3;
    private final int e = 4;
    private final int f = 5;
    private final int g = 6;

    // transition
    private double t[][][] = new double[stateCount][stateCount][actionCount];
    // rewards
    private double r[][][] = new double[stateCount][stateCount][actionCount];    
    // utility
    private double values[] = new double[stateCount];
    // policy
    private int policy[] = new int[stateCount];
    // init

    private void init(){        
        for(int i=0;i<values.length;i++){
            values[i] = 0;
        }       
        //(s1; a); (s2; c); (s3; e); (s4; f); (s5; g)
        policy[s1] = a; policy[s2] = c; policy[s3] = e; policy[s4] = f;  policy[s5] = g;
        //
        t[s1][s2][a] = 1;  r[s1][s2][a] = 0;
        t[s1][s3][b] = 1;  r[s1][s3][b] = 0;
        t[s2][s2][c] = 0.5;  r[s2][s2][c] = 0;
        t[s2][s4][c] = 0.5;  r[s2][s4][c] = 0;
        t[s3][s3][e] = 1;  r[s3][s3][e] = 1;
        t[s4][s5][f] = 1;  r[s4][s5][f] = 0;
        t[s4][s4][d] = 1;  r[s4][s4][d] = 10;
        t[s5][s5][g] = 1;  r[s5][s5][g] = 0;
    }

    public static void main(String args[]){

        PolicyIteration p = new PolicyIteration();
        p.init();
        p.run();
    }

    public void run(){
        int it = 0;

        int changed= 1;
        do{
            it++;
            System.out.println("Iteration :"+it);
            changed = train();

            for(int i=0;i<policy.length;i++){
                System.out.print( s[i]+"->" + ac[ policy[i] ]  +" ; ");
            }

            System.out.println();

            for(int i=0;i<policy.length;i++)
            System.out.print(values[i]+" ,");

            System.out.println();
        }while(changed>0);

    }

    public int train() {

        boolean valuesChanged = false;
        do {
            valuesChanged = false;
            // loop through all the states
            for (int i = 0; i < stateCount; i++) {
                // calculate the new value
                int action = policy[i];
                double actionVal = 0;
                for (int j = 0; j < stateCount; j++) {
                    actionVal += t[i][j][action]*(r[i][j][action] + gamma* values[j]);
                }
                // check if we're done
                if (Math.abs(values[i] - actionVal) > TOLERANCE) {
                    valuesChanged = true;
                }
                values[i] = actionVal;
            }
        } while (valuesChanged);
        int changed = 0;
        // calculate the new policy
        for (int i = 0; i < stateCount; i++) {
            // find the maximum action
            double maxActionVal = -Double.MAX_VALUE;
            int maxAction = 0;
            for (int action = 0; action < actionCount; action++) {
                double actionVal = 0;
                for (int j = 0; j < stateCount; j++) {
                    actionVal += t[i][j][action]*(r[i][j][action] + gamma* values[j]);                          
                }                
                if (actionVal >= maxActionVal) {
                    maxActionVal = actionVal;
                    maxAction = action;
                }

                if(i==s5 && action == g){
                    System.out.println("----  actionVal:"+actionVal+"    "+action);
                }
            }
            if (policy[i] != maxAction) {
                changed++;
                policy[i] = maxAction;
            }
        }
        return changed;
    }

} 
```

教科书上的答案是

```
Initial policy:
s1 best action: a
s2 best action: c
s3 best action: e
s4 best action: f
s5 best action: g
After policy evaluation:
s1 value: 0.000
s2 value: 0.000
s3 value: 9.114
s4 value: 0.000
s5 value: 0.000
== End of iteration 1 ==

new policy:
s1 best action: b
s2 best action: c
s3 best action: e
s4 best action: d
s5 best action: g
After policy evaluation:
s1 value: 8.992
s2 value: 80.945
s3 value: 9.992
s4 value: 99.127
s5 value: 0.000
== End of iteration 2 ==

new policy:
s1 best action: a
s2 best action: c
s3 best action: e
s4 best action: d
s5 best action: g
After policy evaluation:
s1 value: 72.929
s2 value: 81.111
s3 value: 9.994
s4 value: 99.293
s5 value: 0.000
== End of iteration 3 == 
```

# javascript - CS5 隐藏层非常缓慢

> ID：12040522
> 
> 赞同：14
> 
> 时间：2012-08-20T15:24:29.250
> 
> 标签：javascript, optimization, photoshop, flash-cs5, photoshop-script

只有我认为 CS5 脚本运行缓慢吗？这几行代码需要超过 1 分钟才能执行。

```
for (n=0; n<app.activeDocument.layerSets.length; n++) {
  app.activeDocument.layerSets[n].visible = false;
} 
```

layerSet 的数量是 20。我在 Vista Home Premium 系统上运行 CS5.1 64 位版本，AMD Athlon 64 X2 Dual Core 5200+ 和 8GB RAM。

我尝试将脚本导出为 .JSXBIN，但仍需要 1 分钟以上。当 CS5.1 运行 .JSXBIN 脚本时，CS5.1 的 CPU 使用率从 3% 变为 57%。

这里一定有问题，我怎样才能加快脚本的速度？

// 谢谢

*** 编辑 *** 似乎 CS5 自己的 DOM 实现是这里的问题。通过将 DOM 相关值读入局部变量，该脚本加速了两倍以上。

```
var LayerCount = app.activeDocument.layerSets.length;
var LayerRoot = app.activeDocument.layerSets;

for (n=0; n<LayerCount; n++) {
  LayerRoot[n].visible = false;
} 
```

...但是，仅更改 20 个对象中的属性仍然需要很多时间。任何有关优化的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T01:58:50.787

我唯一能想到的就是尝试循环遍历`app.activeDocument.layers`包含所有图层和组的各个图层。执行此操作时，您会注意到分组图层仍将保留其原始`visible`属性，但由于其父组被隐藏而被隐藏。

```
#target photoshop

var myLayers = app.activeDocument.layers;
var myLayersLength = myLayers.length;

for (var i=0; i<myLayersLength; i++) {
    myLayers[i].visible = false;
} 
```

编辑：所以我在一个有 50 层的 400mb 文件上测试了这个解决方案，它的工作时间不到一秒钟。您确定问题出在 Photoshop 上吗？

如果您必须单独遍历每个层和子层以执行操作，您可以递归地执行它：

```
#target photoshop

var doc = app.activeDocument;
findLayers(doc);

function findLayers(set) {
    for (var i=0; i<set.layerSets.length; i++) {

        //recursive call
        findLayers(set.layerSets[i]);

        //iterate sub-layers and hide
        for (var j=0; j<set.layerSets[i].layers.length; j++) {
            set.layerSets[i].layers[j].visible = false;
        }
    }

    //hide top-level layers
    for (var l=0; l<set.layers.length; l++) {
        set.layers[l].visible = false;
    }
} 
```

这需要更长的时间，在我的机器上大约 20 秒，但它会影响文档中的每一层。

注意：我还从问题中测试了您的原始脚本，它们不适用于未分组的图层，因为您正在迭代`document.layerSets`而不是`document.layers`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:17:16.223

看看这个[ps-scripts 在图层上的迭代速度很慢 - 解释](http://www.ps-scripts.com/bb/viewtopic.php?f=9&t=5129) 这也可能对您有所帮助。

# java - 使用 Android 拍摄单色照片（黑白）

> ID：12040526
> 
> 赞同：5
> 
> 时间：2012-08-20T15:24:49.547
> 
> 标签：java, android, android-camera, photo, image

我想在我的应用程序中拍摄一张真正的黑白照片。我搜索了解决方案（也在这个网站上），但我总是找到将照片放在灰度中的解决方案（例如在[这个主题](https://stackoverflow.com/questions/9377786/android-converting-a-bitmap-to-a-monochrome-bitmap-1-bit-per-pixel)中），但这不是我要找的......

我还发现了一个提出这个问题的主题：

```
public static Bitmap createContrast(Bitmap src, double value) {
// image size

                int width = src.getWidth();
                int height = src.getHeight();
                // create output bitmap
                Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
                // color information
                int A, R, G, B;
                int pixel;
                // get contrast value
                double contrast = Math.pow((100 + value) / 100, 2);

        // scan through all pixels
        for (int x = 0; x < width; ++x) {
            for (int y = 0; y < height; ++y) {
                // get pixel color
                pixel = src.getPixel(x, y);
                A = Color.alpha(pixel);
                // apply filter contrast for every channel R, G, B
                R = Color.red(pixel);
                R = (int) (((((R / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if (R < 0) {
                    R = 0;
                } else if (R > 255) {
                    R = 255;
                }

                G = Color.red(pixel);
                G = (int) (((((G / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if (G < 0) {
                    G = 0;
                } else if (G > 255) {
                    G = 255;
                }

                B = Color.red(pixel);
                B = (int) (((((B / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if (B < 0) {
                    B = 0;
                } else if (B > 255) {
                    B = 255;
                }

                // set new pixel color to output bitmap
                bmOut.setPixel(x, y, Color.argb(A, R, G, B));
            }
        }

        return bmOut;

    } 
```

但是画质太差了。。。

请问有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-20T15:48:08.987

如果您希望图像是 1 位黑/白，您可以使用简单（和慢）阈值算法

```
public static Bitmap createBlackAndWhite(Bitmap src) {
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
    // color information
    int A, R, G, B;
    int pixel;

    // scan through all pixels
    for (int x = 0; x < width; ++x) {
        for (int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            A = Color.alpha(pixel);
            R = Color.red(pixel);
            G = Color.green(pixel);
            B = Color.blue(pixel);
            int gray = (int) (0.2989 * R + 0.5870 * G + 0.1140 * B);

            // use 128 as threshold, above -> white, below -> black
            if (gray > 128) 
                gray = 255;
            else
                gray = 0;
            // set new pixel color to output bitmap
            bmOut.setPixel(x, y, Color.argb(A, gray, gray, gray));
        }
    }
    return bmOut;
} 
```

但是取决于看起来不好的东西，为了获得更好的结果，您需要一种抖动算法，请参阅[算法概述](http://en.wikipedia.org/wiki/Dithering#Algorithms)- 这是阈值方法。

* * *

对于 256 级灰度转换：

根据[http://www.mathworks.de/help/toolbox/images/ref/rgb2gray.html](http://www.mathworks.de/help/toolbox/images/ref/rgb2gray.html)你计算每个像素的灰度值，`gray = 0.2989 * R + 0.5870 * G + 0.1140 * B`这将转化为

```
public static Bitmap createGrayscale(Bitmap src) {
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
    // color information
    int A, R, G, B;
    int pixel;

    // scan through all pixels
    for (int x = 0; x < width; ++x) {
        for (int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            A = Color.alpha(pixel);
            R = Color.red(pixel);
            G = Color.green(pixel);
            B = Color.blue(pixel);
            int gray = (int) (0.2989 * R + 0.5870 * G + 0.1140 * B);
            // set new pixel color to output bitmap
            bmOut.setPixel(x, y, Color.argb(A, gray, gray, gray));
        }
    }
    return bmOut;
} 
```

但这非常慢，因为您必须分别为数百万像素执行此操作。

[https://stackoverflow.com/a/9377943/995891](https://stackoverflow.com/a/9377943/995891)有更好的方法来实现相同的目标。

```
// code from that answer put into method from above
public static Bitmap createGrayscale(Bitmap src) {
    int width = src.getWidth();
    int height = src.getHeight();
    Bitmap bmOut = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(bmOut);
    ColorMatrix ma = new ColorMatrix();
    ma.setSaturation(0);
    Paint paint = new Paint();
    paint.setColorFilter(new ColorMatrixColorFilter(ma));
    canvas.drawBitmap(src, 0, 0, paint);
    return bmOut;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:33:03.937

G = 颜色.红色（像素）；

G = 颜色。**绿色**（像素）；

B = 颜色.红色（像素）；

B = 颜色。**蓝色**（像素）；

看看这种变化（粗体）是否有帮助。

# ruby - 创建对象时，Ruby 会自动调用 to_s 方法

> ID：12040527
> 
> 赞同：2
> 
> 时间：2012-08-20T15:24:50.663
> 
> 标签：ruby, ruby-1.9.3

```
class A
  def initialize(string, number)
    @string = string
    @number = number
  end

  def to_s
    "In to_s:\n   #{@string}, #{@number}\n"
  end
  def to_a
    "In to_a:\n   #{@string}, #{@number}\n"
  end
end
puts a = A.new("hello world", 5) 
```

输出是

```
 In to_s:
   hello world, 5 
```

该方法是如何`to_s`自动调用的？

为什么不自动调用另一种方法，例如`to_a`？

既然我没有在`to_s`方法中写puts，为什么要打印输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T15:26:23.333

您将其发送到`puts`，它将尝试使用 将对象呈现为字符串`to_s`。

如果您将最后一行更改为: `puts A.new("hello world", 5).to_a`，它将改为调用`to_s`返回的 Array 而`to_s`不会调用A。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-03T08:40:38.963

`puts`通常打印在`to_s`对象 上应用的结果在[此处](http://rubymonk.com/learning/books/4-ruby-primer-ascent/chapters/45-more-classes/lessons/108-displaying-objects)**阅读更多内容**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:47:03.650

除了@numbers1311407 回答

每当您尝试任何代码时`irb`

`to_s`它隐式调用。

正如@numbers1311407 回答所解释的那样。

`to_s`隐式调用

# c# - 如果语句澄清 AND/OR

> ID：12040533
> 
> 赞同：1
> 
> 时间：2012-08-20T15:25:12.677
> 
> 标签：c#, if-statement

很抱歉提出这么简单的问题。我只需要澄清一下，因为有时我会混淆这些差异。

有人可以通过解释以下 if 语句之间的区别来帮助我吗？

```
sending = true;
if (sending && e.AssetType == AssetType.Notecard) //#1 
```

对比

```
if ((sending) && (e.AssetType == AssetType.Notecard)) //#2 
```

对比

```
if (sending || e.AssetType == AssetType.Notecard) //#3 
```

对比

```
if ((sending) || (e.AssetType == AssetType.Notecard)) //#4 
```

在这种特定情况下，我需要将其评估为：“If(sending == true AND e.AssetType == AssetType.Notecard)”

在另一种情况下，我需要 if 语句来检查一个字符串和列表的内容，例如： "If(string == "Name" OR List.Contains("string"))

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:26:45.233

这些代码没有*任何*区别。

`if ((sending) && (e.AssetType == AssetType.Notecard))`并`if (sending && e.AssetType == AssetType.Notecard)`评估为同一件事。

`if(sending == true)`或`if(sending`) 也是一样的。

* * *

**如果**您询问`||`和之间的区别`&&`：

*   `||`是一个逻辑或。只有**一个**条件为 TRUE 就足够了`if`

*   `&&`是一个逻辑与。 **所有**条件都必须为真才能通过`if`

在这两种情况下，评估都是*从左到右进行的*。

序列示例： `if ((sending) && (e.AssetType == AssetType.Notecard))`=> if `sending==true`AND`..rest..`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:39:02.790

第一个和第二个语句是相同的（在这种情况下括号不是强制性的，因为 C# 评估优先级！）

```
if (sending && e.AssetType == AssetType.Notecard)
if ((sending) && (e.AssetType == AssetType.Notecard)) 
```

就像：

```
if ((sending == true) && e.AssetType == AssetType.Notecard))
if ((sending) && (e.AssetType == AssetType.Notecard)) 
```

由于上述相同的原因，3° 和 4° 语句也会给出相同的结果：http: [//msdn.microsoft.com/en-us/library/6a71f45d.aspx](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)

我会使用这些陈述：

```
if (sending && (e.AssetType == AssetType.Notecard)) 
```

和：

```
if ((string == "Name") || List.Contains("string")) 
```

（但请注意字符串比较模式，例如大写/小写和文化：

```
String.Compare(string, "Name", StringComparison.CurrentCultureIgnoreCase) == 0 
```

比较字符串而不考虑大小写和当前文化）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-18T21:11:20.050

第一个和第二个语句产生相同的结果，第三个和第四个语句也产生相同的结果。

有几点需要澄清：

*   在这种情况下，括号不是必需的，它只是额外的代码。
*   当您使用逻辑与运算时，始终评估第一部分，并且仅当第一部分为真时才评估第二部分。
*   当您使用逻辑或运算时，始终会评估这两个部分。
*   当你有超过+2个表达式时，用括号来阐明你的意图。eg[与 Operators](https://msdn.microsoft.com/en-us/library/2bxt6kc4(v=vs.140).aspx) Precedence`if(A && B || C)`相同。但是如果你想先执行逻辑或运算，那么你必须使用括号来覆盖优先级`if((A && B) || C)``if(A && (B || C))`
    *   此外，`if(A && B == C)`与`if(A && (B == C))`等式运算的优先级高于逻辑与，因此相同

# c# - F# 2.0 中的错误到泛型类型参数中的约束在哪里？

> ID：12040537
> 
> 赞同：3
> 
> 时间：2012-08-20T15:25:39.383
> 
> 标签：c#, generics, f#, c#-to-f#, f#-3.0

如果我有一个想从 F# 使用的 C# 方法并接收两个这样的类型化参数：

```
public class Foo
{
    public static void GenericMethodWithTwoTypeParamsThatHaveAWhereClass<TA, TB>() where TA : TB
    {

    }
} 
```

当我尝试通过 F# 调用它时，编译器会抱怨：

```
Foo.GenericMethodWithTwoTypeParamsThatHaveAWhereClass<System.IO.BinaryWriter, System.IDisposable>() 
```

那么，这是 F# 2.0 中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:35:28.693

F# 不支持这种类型的约束。[规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997258)表明表单的约束被`t1 :> t2`视为`t1 = t2`，这解释了您的错误：

> 此表达式应具有 BinaryWriter 类型，但此处具有 System.IDisposable 类型

根据`TB`使用方式，您可能可以通过

```
GenericMethodWithTwoTypeParamsThatHaveAWhereClass<BinaryWriter, _>() 
```

`TB`将被推断为`BinaryWriter`，根据上述规则。但是，如果这可行，那么您的 C# 方法可能会使用一种类型参数。

# c++ - C++ 中的 UTF-8 兼容性

> ID：12040539
> 
> 赞同：14
> 
> 时间：2012-08-20T15:25:50.903
> 
> 标签：c++, unicode, utf-8, wchar-t, wstring

我正在编写一个需要能够处理所有语言文本的程序。我的理解是 UTF-8 可以完成这项工作，但我遇到了一些问题。

我可以说 UTF-8 可以简单地存储`char`在 C++ 中吗？如果是这样，为什么我在使用带有`char`,`string`和`stringstream`:的程序时会收到以下警告`warning C4566: character represented by universal-character-name '\uFFFD' cannot be represented in the current code page (1252)`。`wchar_t`（当我使用,`wstring`和时，我没有得到那个错误`wstringstream`。）

此外，我知道 UTF 是可变长度的。当我使用`at`or`substr`字符串方法时，我会得到错误的答案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-20T15:29:02.223

要使用 UTF-8 字符串文字，您需要在它们前面加上前缀`u8`，否则您将获得实现的字符集（在您的情况下，它似乎是 Windows-1252）：`u8"\uFFFD"`是以 UTF-8 表示的以空字符结尾的字节序列替换字符 (U+FFFD)。它有类型`char const[4]`。

由于 UTF-8 具有可变长度，所有类型的索引都将在代码单元中进行索引，而不是代码点。不可能对 UTF-8 序列中的代码点进行随机访问，因为它是可变长度的。如果你想要随机访问，你需要使用固定长度的编码，比如 UTF-32。为此，您可以`U`在字符串上使用前缀。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-20T16:00:29.363

是的，UTF-8 编码可以与 char、string 和 stringstream 一起使用。一个 char 将包含一个 UTF-8 代码单元，其中最多可能需要四个来表示一个 Unicode 代码点。

但是，在 Microsoft 的编译器中使用 UTF-8 时存在一些问题。C++ 实现对许多事情使用“执行字符集”，例如编码字符和字符串文字。VC++总是使用系统语言环境编码作为执行字符集，而Windows不支持UTF-8作为系统语言环境编码，因此UTF-8永远不能由执行字符集。

这意味着 VC++ 从不故意生成 UTF-8 字符和字符串文字。相反，编译器必须被欺骗。

编译器将从已知的源代码编码转换为执行编码。这意味着如果编译器对源编码和执行编码都使用语言环境编码，则不会进行任何转换。如果您可以在源代码中获取 UTF-8 数据，但让编译器认为源使用区域设置编码，那么字符和字符串文字将使用 UTF-8 编码。VC++ 使用所谓的“BOM”来检测源编码，如果没有检测到 BOM，则使用区域设置编码。因此，您可以通过将所有源文件保存为“无签名的 UTF-8”来获得 UTF-8 编码的字符串文字。

这种方法有一些注意事项。首先，您不能使用具有窄字符和字符串文字的 UCN。通用字符名称必须转换为执行字符集，而不是 UTF-8。您必须按字面书写字符，使其在源代码中显示为 UTF-8，或者您可以在手动写出 UTF-8 编码的地方使用十六进制转义。其次，为了生成宽字符和字符串文字，编译器执行从源编码到宽执行字符集（在 VC++ 中始终为 UTF-16）的类似转换。由于我们在编码方面向编译器撒谎，因此它将错误地执行到 UTF-16 的转换。因此，在宽字符和字符串文字中，您不能直接使用非 ascii 字符，而必须使用 UCN 或十六进制转义。

* * *

UTF-8 是可变长度的（与 UTF-16 一样）。`at()`与和一起使用的索引`substr()`是*代码单元*，而不是字符或代码点索引。因此，如果您想要一个特定的代码单元，那么您可以像往常一样索引到字符串或数组或其他任何内容。如果您需要特定的代码点，那么您需要一个可以理解将 UTF-8 代码单元组合成代码点的库（例如 Boost [Unicode 迭代器库](http://www.boost.org/doc/libs/1_48_0/libs/regex/doc/html/boost_regex/ref/internal_details/uni_iter.html)），或者您需要将 UTF-8 数据转换为 UTF-32。如果您需要实际的用户感知字符，那么您需要一个了解代码点如何组成字符的库。我想 ICU 有这样的功能，或者你可以从 Unicode 标准实现[默认字素集群边界规范。](http://www.unicode.org/reports/tr29/#Default_Grapheme_Cluster_Table)

* * *

上面对 UTF-8 的考虑只对你如何在源代码中编写 Unicode 数据很重要。它对程序的输入和输出几乎没有影响。

如果您的要求允许您选择如何进行输入和输出，那么我仍然建议使用 UTF-8 进行输入。根据您需要对输入执行的操作，您可以将其转换为易于处理的另一种编码，也可以编写处理例程以直接在 UTF-8 上工作。

如果您想通过 Windows 控制台输出任何内容，那么您将需要一个定义明确的输出模块，该模块可以具有不同的实现，因为到 Windows 控制台的国际化输出将需要与输出到 Windows 或控制台上的文件不同的实现和其他平台上的文件输出。（在其他平台上，控制台只是另一个文件，但 Windows 控制台需要特殊处理。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:28:28.253

您收到警告的原因`\uFFFD`是您试图放入`FF FD`单个字节，因为正如您所指出的，UTF-8 适用于`char`s 并且是可变长度的。

如果你使用`at`or `substr`，你可能会得到错误的答案，因为这些方法计算一个字节应该是一个字符。UTF-8 并非如此。值得注意的是，使用`at`，您最终可能会得到一个字符序列的单个字节；使用`substr`，您可能会破坏一个序列并以无效的 UTF-8 字符串结尾（它将以 �, 开头或结尾，`\uFFFD`与您显然尝试使用的相同，并且损坏的字符会丢失）。

我建议您使用`wchar`来存储 Unicode 字符串。由于类型至少为 16 位，因此一个“单元”可以容纳更多的字符。

# java - 想让一个物体在一个圆圈内反弹，最终让物体沿着圆圈的边缘移动

> ID：12040547
> 
> 赞同：0
> 
> 时间：2012-08-20T15:26:22.333
> 
> 标签：java, collision-detection, game-physics

这是有问题的代码：

```
public void calculate() {
        // Center of circle is at (250, 250).
        //THIS ALGORITHM IS NOW PROVEN TO BE WORSE THAN I FEARED...

        /*      What it does:
         *          Moves object around in a circle.
         *          Does not move the object towards the center.
         *          Object always stays on the rim of the circle.
         * 
         *      Algorithm I used. (DOES NOT WORK):
         *          N is normalized vector. 
         *          R = -2*(V dot N)*N + V
         */

        vx += Accelero.X * 0.1;
        vy += Accelero.Y * 0.1;
        double nx = x - 250;
        double ny = y - 250;
        double nd = Math.hypot(nx, ny);
        if (nd == 0)
            nd = 1;
        nx /= nd;
        ny /= nd;
        double dotProduct = vx * nx + vy * ny;
        vx += (float) (-2 * dotProduct * nx);
        vy += (float) (-2 * dotProduct * ny);
        x -= vx * 2;
        y -= vy * 2;
        vx *= 0.99;
        vy *= 0.99;
    } 
```

这就是发生的事情。

![图片。](../Images/194ab98dbd09576d1474095a499d7a62.png)

您看到的黑线是紫色对象（框）移动的位置。它恰好正好在我画的圆线上`Canvas.drawCircle()`。

我不明白为什么反射不起作用。如果一个物体要撞到圆形墙上，它不应该反映物体的速度方向，这就是算法的本意吗？还是我使用了错误的算法？

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:38:13.153

你能从任意角度的直墙上反弹吗？这应该是第一步。（您可能会发现速度矢量的极坐标表示更易于使用。）

一旦你完成了这项工作，它应该相当简单：从一个圆反弹就像从一个在接触点接触它的圆的切线反弹。

您可以通过观察它垂直于接触点中的半径矢量（即从对象所在位置到圆心的矢量）来计算此切线

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:53:28.763

> 是否有基于矢量的实现，而不依赖于角度？

是的，请参阅[*2-Dimensional Elastic Collisions without Trigonometry*](http://www.vobarian.com/collisions/)，如图所示[`KineticModel`](https://sites.google.com/site/drjohnbmatthews/kineticmodel)。您的实现似乎缺少切向组件。详情请参阅[`Ensemble#collideAtoms()`](https://sites.google.com/site/drjohnbmatthews/kineticmodel/code#Ensemble)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T10:58:11.863

这就是我所拥有的，我将与大家分享我的发现。

```
public void calculate() {
    // Center of circle is at (250, 250). Radius is 40.
    //THIS ALGORITHM IS PROVEN TO BE BETTER THAN I FEARED...

    /*      What it does:
     *          Moves object around in a circle, if object is 
     *              inside of circle.
     *          Does not move the object towards the center, 
     *              nor outwards. This is crucial.
     *          Object always stays on the rim of the circle, 
     *              if the collision detection allows it to.
     * 
     *      Algorithm I used. (DOES WORK, NOT EXPECTING THIS THOUGH.):
     *          N is normalized vector. 
     *          R = -2*(V dot N)*N + V
     */

    double nx = x - 250;
    double ny = y - 250;
    double nd = Math.hypot(nx, ny);
    if (nd < 40){
        vx += Accelero.X * 0.1;
        vy += Accelero.Y * 0.1;
        x -= vx;
        y -= vy;
        vx *= 0.9;
        vy *= 0.9;
        return;
    }

    vx += Accelero.X * 0.1;
    vy += Accelero.Y * 0.1;

    if (nd == 0)
        nd = 1;
    nx /= nd;
    ny /= nd;
    double dotProduct = vx * nx + vy * ny;
    vx += (float) (-2 * dotProduct * nx);
    vy += (float) (-2 * dotProduct * ny);
    x -= vx * 2;
    y -= vy * 2;
    vx *= 0.99;
    vy *= 0.99;
} 
```

我在我的函数中嵌入了一个碰撞检测，基本上使这个函数尽可能地不高效。忽略这一点，因为它不是主要焦点。

圆的半径为 40，(x,y) 位置为 (250,250)。

只有当物体在圆上，或者远离圆心时，我们才应该计算碰撞响应，由算法 R = -2*(V dot N)*N + V 给出，其中法向量N 已经归一化。

该算法确实是正确的，我的碰撞检测的布尔条件是导致对象停留在圆的边缘并在圆上绕圈的原因。

我没有说@trashgod 提供的另一种算法是错误的。这是因为一些奇怪的问题导致对象异常移动。我猜这是我使用的 API 的错，它不允许双打，但我可能不正确。我只是找不到问题的根源。我也很高兴不再进一步研究它。

碰撞检测布尔条件本身可以改变一切，只要稍微改变一下。如果不是@nm 指出我似乎忘记了一个减号（在这种情况下是一个非符号），我可能永远不会意识到它是多么微不足道。

# html - Django base.html 提供静态表格

> ID：12040549
> 
> 赞同：-3
> 
> 时间：2012-08-20T15:26:34.930
> 
> 标签：html, django

我需要一些方向——目前在本地 django 开发服务器上部署我的应用程序。

我的 base.html 文件如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<div style="width:50%; marginleft:25%;"> 

</div> 
```

我只看到我的 base.html 的项目符号内容，没有样式 - 我应该只引用一个 css 表来查看实际的网页布局吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:29:22.653

如果这是您网站上唯一的样式，那么您需要创建样式，最好的方法是通过 css 文件。如果您已经有一个带有样式的 css 文件，那么您可以在基本模板中引用它，以便所有子模板都加载样式。

您需要设置项目以在开发中[提供静态](https://docs.djangoproject.com/en/dev/howto/static-files/)文件。

`<link href="/static/css.css" rel="stylesheet" type="text/css">`

您发布的示例中的类型无效。

# linux - 使用 SSH 在桌面上打开应用程序

> ID：12040551
> 
> 赞同：7
> 
> 时间：2012-08-20T15:26:40.997
> 
> 标签：linux, ssh, linux-mint

所以通常人们会问如何将 x11 转发到本地机器，但我想让应用程序在远程机器的桌面上运行。

因此，假设我从 Windows 机器（使用 putty）SSH 并运行`xclock & disown`. 如果我然后走到我的桌面并查看屏幕并看到 xclock 在 linux 机器上运行。

有什么办法吗？使用薄荷 13。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-20T13:04:08.973

一旦我进入ssh，这对我有用：

```
export DISPLAY=:0; nohup <command> &>/dev/null & 
```

例如：

```
export DISPLAY=:0; nohup iceweasel &>/dev/null & 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T23:30:29.557

当您正常 ssh 时，将`DISPLAY`变量设置为`export DISPLAY=0:0`（0:0 是目标框的显示），然后您可以像往常一样运行您的命令。如果您希望能够关闭 ssh 会话，请在命令前添加 nohup: `nohup ./yourcommand > dev/null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T16:04:07.983

h4bo --> 那行得通。只需要制作脚本。

学习 ssh 的第一部分。现在，我无需一直打开 teamviewer（一个远程桌面程序），而是可以在需要时启动它然后使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T18:37:11.520

我猜

```
nohup ssh -X <ip address> <application name> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-01T13:00:31.560

我最近不得不和 Thonny 在 Raspberry Pi 上进行一些 python tkinter 开发，我希望 tkinter 图形显示在 Pi 的 X 服务器上。为了这个特定的目的，我创建了一个 /usr/bin/pythonx 脚本，它简单地包括：

```
#!/bin/bash
DISPLAY=:0 python "$@" 
```

当 Thonny ssh 进入用户同时在 GUI 桌面登录的 Pi 时，这种包装技术起作用，因为 ssh 用户可以访问将 X 客户端请求（应用程序）发送到服务器（GUI）所需的 .Xauthority 数据。

# javascript - YoutubePlayer - 未触发 onStateChanged 事件

> ID：12040559
> 
> 赞同：0
> 
> 时间：2012-08-20T15:27:08.170
> 
> 标签：javascript, google-chrome-extension, youtube-api

> **可能重复：**
> [内容脚本中的 addEventListener 不起作用](https://stackoverflow.com/questions/9776054/addeventlistener-in-content-script-not-working)

我正在迈出第一步来编写我的第一个 Chrome 扩展程序，但是我在拦截来自 YoutubePlayer 的事件时遇到了一些问题。扩展是 content_scripts 类型的扩展。在我的 js 文件中，我将事件处理程序附加到 YoutubePlayer 的“onStateChange”事件。代码看起来像这样

```
var playerLoaded = ( document.getElementById("movie_player") == null ), intervalId;

var attachEvents = function(){
    var currentVideo =document.getElementById("movie_player");
    if(currentVideo){
        currentVideo.addEventListener("onStateChange", "onytplayerStateChange");
         if(intervalId)
            clearInterval(intervalId);
    }
}

function onytplayerStateChange() {
   alert("Player's new state: " + newState);
};

if(!playerLoaded){
debugger;
    intervalId = setInterval(attachEvents,100);
} else{
debugger;
  attachEvents();
} 
```

不幸的是 onytplayerStateChange 函数没有被触发，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:56:59.757

正如这个答案所说

> 内容脚本在隔离环境中执行。您必须在页面本身中注入 state 方法。

遵循那里已经给出的建议[使用内容脚本将代码插入页面上下文](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879#9517879)

# iphone - UIWebView 到 UIImage

> ID：12040560
> 
> 赞同：7
> 
> 时间：2012-08-20T15:27:10.447
> 
> 标签：iphone, objective-c, xcode, uiwebview

我尝试使用此方法从 UIWebView 捕获图像，但图像仅包含屏幕的可见区域。如何捕获 UIWebView 的全部内容，包括不可见区域，即整个网页到一个图像中？

```
-(UIImage*)captureScreen:(UIView*) viewToCapture{
  UIGraphicsBeginImageContext(viewToCapture.bounds.size);
  [viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];
  UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return viewImage;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-19T16:07:19.297

检查这一点[将 UIWebView 渲染到 ImageContext中](https://stackoverflow.com/questions/469764/rendering-a-uiwebview-into-an-imagecontext/21885693#21885693)

或者只是使用这个:)：

```
 (UIImage*) imageFromWebview:(UIWebView*) webview{

//store the original framesize to put it back after the snapshot
CGRect originalFrame = webview.frame;

//get the width and height of webpage using js (you might need to use another call, this doesn't work always)
int webViewHeight = [[webview stringByEvaluatingJavaScriptFromString:@"document.body.scrollHeight;"] integerValue];
int webViewWidth = [[webview stringByEvaluatingJavaScriptFromString:@"document.body.scrollWidth;"] integerValue];

//set the webview's frames to match the size of the page
[webview setFrame:CGRectMake(0, 0, webViewWidth, webViewHeight)];

//make the snapshot
UIGraphicsBeginImageContextWithOptions(webview.frame.size, false, 0.0);
[webview.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//set the webview's frame to the original size
[webview setFrame:originalFrame];

//and VOILA :)
return image;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T15:31:30.270

**编辑**（来自[Vad](https://stackoverflow.com/users/634603/vad)的评论）

解决方案是打电话

```
webView.scalesPageToFit = YES; 
```

在初始化中，和

```
[webView sizeToFit] 
```

当页面完成加载时。

您当前仅捕获可见部分，因为您将图像上下文限制为可见部分。您应该将其限制在可用的范围内。

`UIView`有一个`scrollView`属性 has `contentSize`，告诉你滚动视图中的 web 视图的大小。您可以使用该大小来设置图像上下文，如下所示：

```
-(UIImage*)captureScreen:(UIView*) viewToCapture{
    CGSize overallSize = overallSize;
    UIGraphicsBeginImageContext(viewToCapture.scrollView.contentSize);
    // Save the current bounds
    CGRect tmp = viewToCapture.bounds;
    viewToCapture.bounds = CGRectMake(0, 0, overallSize.width, overallSize.height);
    // Wait for the view to finish loading.
    // This is not very nice, but it should work. A better approach would be
    // to use a delegate, and run the capturing on the did finish load event.
    while (viewToCapture.loading) {
         [NSThread sleepForTimeInterval:0.1];
    }
    [viewToCapture.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    // Restore the bounds
    viewToCapture.bounds = tmp;
    return viewImage;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:31:49.647

**编辑**：我用经过测试的代码给出的新答案。

在下面添加`method`到. 它也将捕获。`capture` `UIWebView``UIImage``unvisible area`

```
- (UIImage*)webviewToImage:(UIWebView*)webView
{
  int currentWebViewHeight = webView.scrollView.contentSize.height;
  int scrollByY = webView.frame.size.height;

  [webView.scrollView setContentOffset:CGPointMake(0, 0)];

  NSMutableArray* images = [[NSMutableArray alloc] init];

  CGRect screenRect = webView.frame;

  int pages = currentWebViewHeight/scrollByY;
  if (currentWebViewHeight%scrollByY > 0) {
      pages ++;
  } 

  for (int i = 0; i< pages; i++)
  {
    if (i == pages-1) {
        if (pages>1)
            screenRect.size.height = currentWebViewHeight - scrollByY;
    }

    if (IS_RETINA)
        UIGraphicsBeginImageContextWithOptions(screenRect.size, NO, 0);
    else
        UIGraphicsBeginImageContext( screenRect.size );
    if ([webView.layer respondsToSelector:@selector(setContentsScale:)]) {
        webView.layer.contentsScale = [[UIScreen mainScreen] scale];
    }
    //UIGraphicsBeginImageContext(screenRect.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] set];
    CGContextFillRect(ctx, screenRect);

    [webView.layer renderInContext:ctx];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    if (i == 0)
    {
        scrollByY = webView.frame.size.height;
    }
    else
    {
        scrollByY += webView.frame.size.height;
    }
    [webView.scrollView setContentOffset:CGPointMake(0, scrollByY)];
    [images addObject:newImage];
  }

  [webView.scrollView setContentOffset:CGPointMake(0, 0)];

  UIImage *resultImage;

  if(images.count > 1) {
    //join all images together..
    CGSize size;
    for(int i=0;i<images.count;i++) {

        size.width = MAX(size.width, ((UIImage*)[images objectAtIndex:i]).size.width );
        size.height += ((UIImage*)[images objectAtIndex:i]).size.height;
    }

    if (IS_RETINA)
        UIGraphicsBeginImageContextWithOptions(size, NO, 0);
    else
        UIGraphicsBeginImageContext(size);
    if ([webView.layer respondsToSelector:@selector(setContentsScale:)]) {
        webView.layer.contentsScale = [[UIScreen mainScreen] scale];
    }
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] set];
    CGContextFillRect(ctx, screenRect);

    int y=0;
    for(int i=0;i<images.count;i++) {

        UIImage* img = [images objectAtIndex:i];
        [img drawAtPoint:CGPointMake(0,y)];
        y += img.size.height;
    }

    resultImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
  } else {

    resultImage = [images objectAtIndex:0];
  }
  [images removeAllObjects];
  return resultImage;
} 
```

还添加这些`macro`以检查`iOS`是否`retina`显示

```
#define IS_RETINA ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] && ([UIScreen mainScreen].scale == 2.0)) 
```

# httpresponse - 休息轻松响应状态+正文

> ID：12040564
> 
> 赞同：10
> 
> 时间：2012-08-20T15:27:24.080
> 
> 标签：httpresponse, resteasy

我在休息服务中有以下方法：

```
 @POST
    @Path("/create")
    @ResponseStatus(HttpStatus.CREATED)
    @Consumes(MediaType.WILDCARD)
    public String create( .... ) {.... return json;} 
```

所以我想在正文和状态码已创建时获得带有 json 的响应。

问题是：我无法获得已创建状态的响应。

状态代码总是可以的，所以似乎“@ResponseStatus(HttpStatus.CREATED)”被忽略了......

有人可以帮我吗？

我正在使用休眠 4.1、spring 3.1 和 resteasy 2.3

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-21T08:12:19.620

据我所知，不可能通过用`@org.springframework.web.bind.annotation.ResponseStatus`.

您可以`javax.ws.rs.core.Response`从您的方法返回：

```
return Response
        .status(Response.Status.CREATED)
        .entity("ok")
        .build(); 
```

或者你可以`org.jboss.resteasy.spi.HttpResponse`注入，直接设置状态码。

可能有更多方法可以做到这一点，但我只知道这两种。

工作测试用例：

```
import org.jboss.resteasy.core.Dispatcher;
import org.jboss.resteasy.core.ServerResponse;
import org.jboss.resteasy.mock.MockDispatcherFactory;
import org.jboss.resteasy.mock.MockHttpRequest;
import org.jboss.resteasy.mock.MockHttpResponse;
import org.jboss.resteasy.spi.HttpResponse;
import org.jboss.resteasy.spi.NotFoundException;
import org.jboss.resteasy.spi.interception.PostProcessInterceptor;
import org.junit.Assert;
import org.junit.Test;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.Response;

public class ResponseTest {

    @Path("/")
    public static class Service {
        @Context HttpResponse response;

        @GET
        @Path("/1")
        public Response createdUsingResponse() throws NotFoundException {
            return Response
                    .status(Response.Status.CREATED)
                    .entity("ok")
                    .build();
        }

        @GET
        @Path("/2")
        public String created() throws NotFoundException {
            response.setStatus(Response.Status.CREATED.getStatusCode());
            return "ok";
        }
    }

    public static class Interceptor implements PostProcessInterceptor {
        @Context HttpResponse response;

        @Override
        public void postProcess(ServerResponse response) {
            if(this.response.getStatus() != 0){
                response.setStatus(this.response.getStatus());
            }
        }
    }

    @Test
    public void test() throws Exception {
        Dispatcher dispatcher = MockDispatcherFactory.createDispatcher();
        dispatcher.getRegistry().addSingletonResource(new Service());
        dispatcher
            .getProviderFactory()
            .getServerPostProcessInterceptorRegistry()
            .register(new Interceptor());

        {
            MockHttpRequest request = MockHttpRequest.get("/1");
            MockHttpResponse response = new MockHttpResponse();

            dispatcher.invoke(request, response);

            Assert.assertEquals(201, response.getStatus());
        }
        {
            MockHttpRequest request = MockHttpRequest.get("/2");
            MockHttpResponse response = new MockHttpResponse();

            dispatcher.invoke(request, response);

            Assert.assertEquals(201, response.getStatus());
        }
    }
} 
```

# ios - 如何从 Xcode 中的着色器记录日志

> ID：12040565
> 
> 赞同：2
> 
> 时间：2012-08-20T15:27:26.577
> 
> 标签：ios, xcode, opengl-es

我一直在尝试查看运行时我的着色器中发生了什么。但是我一直无法找到将着色器变量的内容记录到控制台的方法。我知道着色器在 GPU 上运行，所以日志记录肯定会更复杂。如果可能的话？如何从着色器记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:33:05.417

无法从着色器记录。如果尝试调试，您​​只需要使用颜色输出来判断发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T00:16:40.377

看看[glm](http://glm.g-truc.net/)库。您可以使用 C++ 编写着色器代码，并使用您选择的工具对其进行调试。它并没有涵盖 OpenGL 中的所有内容，但它非常易于使用，并且可以让您很好地了解着色器中发生的事情。

# maven - Maven：尝试使用 settings.xml 文件中的凭据进行部署

> ID：12040566
> 
> 赞同：39
> 
> 时间：2012-08-20T15:27:28.757
> 
> 标签：maven, deployment, settings, artifactory

这似乎在上周有效，但现在却没有。

*   我们使用 Artifactory 作为我们的 Maven 存储库。
*   我正在使用`deploy:deploy-file`目标部署一个 jar 和 pom
*   我们的 Artifactory 存储库需要身份验证才能部署。

我可以通过在命令行的服务器 URL 中嵌入我的凭据来部署到存储库：

```
 $ mvn deploy:deploy-file \
     -Durl=http://deployer:swordfish@repo.veggiecorp.com/artifactory/ext-release-local \
     -Dfile=crypto.jar \
     -DpomFile=pom.xml \
     -Did=VeggieCorp
  yadda...yadda...yadda...
  [INFO] ------------------------------------------------------------------------
  [INFO] BUILD SUCCESS
  [INFO] ------------------------------------------------------------------------
  [INFO] Total time: 0.962s
  [INFO] Finished at: Mon Aug 20 10:06:04 CDT 2012
  [INFO] Final Memory: 4M/118M
  [INFO] ------------------------------------------------------------------------ 
```

但是，整个部署都会被记录下来，并且我的凭据将在日志中可见。因此，我希望能够在没有我的凭据的情况下在命令行上进行部署。为此，我有一个`$HOME/.m2/settings.xml`文件：

```
<settings>
    <proxies>
        <proxy>
            <active>true</active>
            <protocol>http</protocol>
            <host>proxy.veggiecorp.com</host>
            <port>3128</port>
            <nonProxyHosts>*.veggiecorp.com</nonProxyHosts>
        </proxy>
    </proxies>
    <servers>
        <server>
            <id>VeggieCorp</id>
            <username>deployer</username>
            <password>swordfish</password>
        </server>
    </servers>
    <profiles>
        <profile>
            <id>VeggieCorp</id>
            <activation>
                 <activeByDefault>true</activeByDefault>
            </activation>
            <repositories>
                <repository>
                    <id>VeggieCorp</id>
                    <name>VeggieCorp's Maven Repository</name>
                    <releases>
                        <enabled>true</enabled>
                        <updatePolicy>always</updatePolicy>
                        <checksumPolicy>warn</checksumPolicy>
                    </releases>
                    <snapshots>
                        <enabled>false</enabled>
                        <updatePolicy>always</updatePolicy>
                        <checksumPolicy>warn</checksumPolicy>
                    </snapshots>
                    <url>http://repo.veggiecorp.com/artifactory/ext-release-local</url>
                    <layout>default</layout>
                </repository>
            </repositories>
        </profile>
    </profiles>
    <activeProfiles>
        <activeProfile>VeggieCorp</activeProfile>
    </activeProfiles>
</settings> 
```

现在，我将尝试再次部署，但不要在 URL 中输入用户名和密码：

```
 $ mvn deploy:deploy-file \
     -Durl=http://repo.veggiecorp.com/artifactory/ext-release-local \
     -Dfile=crypto.jar \
     -DpomFile=pom.xml \
     -Did=VeggieCorp
yadda...yadda...yadda
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.751s
[INFO] Finished at: Mon Aug 20 10:17:15 CDT 2012
[INFO] Final Memory: 4M/119M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy-  file (default-cli) on project crypto:
 Failed to deploy artifacts: Could not transfer artifact  
    com.veggiecorp:crypto:jar:2.0.0 from/to remote-repository 
    (http://mvn.veggiecorp.com/artifactory/ext-release-local):
    Failed to transfer file:
    http://mvn.veggiecorp.com/artifactory/ext-release-local/com/veggiecorp/crypto/2.0.0/crypto-2.0.0.jar.
    Return code is: 401, ReasonPhrase:Unauthorized. -> [Help 1] 
```

（我已重新格式化输出以使其更易于查看。我收到 401“未经授权”错误）

那么，我做错了什么？为什么我不能使用我的`.settings.xml`文件来做我的凭据？代理部分确实有效，因为它可以从主 Maven 存储库下载所需的插件。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-20T16:26:29.027

您需要提供`repositoryId=VeggieCorp`(not `id`) 属性，以便 maven 知道`<server>`它必须从哪个配置中读取凭据。

```
$ mvn deploy:deploy-file \
 -Durl=http://repo.veggiecorp.com/artifactory/ext-release-local \
 -Dfile=crypto.jar \
 -DpomFile=pom.xml \
 -DrepositoryId=VeggieCorp 
```

见[http://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-05T03:59:03.477

您还可以在 distributionManagement 中指定您的快照存储库 ID

```
<distributionManagement>
<repository>
  <id>releases</id>
  <url>${env.MAVEN_RELEASE_REPOSITORY_URL}</url>
</repository>
<snapshotRepository>
  <id>snapshots</id>
  <url>${env.MAVEN_SNAPSHOT_REPOSITORY_URL}</url>
</snapshotRepository>
</distributionManagement> 
```

这里的 id 应该与`servers`

# mysql - MySQL 添加列的最佳实践

> ID：12040567
> 
> 赞同：1
> 
> 时间：2012-08-20T15:27:34.133
> 
> 标签：mysql

所以我开始在一家公司工作，他们有 3 到 5 个不同的表，这些表经常通过复杂的连接或双重、三重查询进行查询（我可能是第四个开始在这里工作的人，这非常混乱）。

无论如何，我创建了一个表，当同时查询其他 3 或 5 个表时，将该数据连同通常插入到那里的任何信息一起插入到我的表中。它极大地加快了许多应用程序的页面速度，我想知道我是否在这里犯了错误。

我希望将来可以删除插入到其他表中的操作，只需将所有信息插入到我已经启动的表中，然后将应用程序切换到那个表。它只是快了很多。

有人可以告诉我为什么将所有信息分组到一张大表中要快得多，这样做是否有任何不利之处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:32:03.003

如果连接速度很慢，可能是因为表没有`FOREIGN KEY`正确定义关系和索引。如果这些表之前已正确规范化，那么将它们非规范化为单个表可能*不是一个好主意，***除非它们在适当的索引下不*具有***性能。 `FOREIGN KEY`约束需要在 PK 表和相关的 FK 列上建立索引，因此如果这些约束不存在，则简单地定义它们可能对提高性能大有帮助。

第一步是确保在开始非规范化之前正确定义表关系并为表建立索引。

有一个称为[*物化视图*](http://en.wikipedia.org/wiki/Materialized_view)的概念，它通过将视图查询的结果存储到临时表中，作为结果集是确定性的视图或查询的一种缓存。MySQL 不直接支持物化视图，但您可以通过偶尔从多表查询中选择所有行并将输出存储到表中来实现它们。当该表中的数据过时时，您将使用新的行集覆盖它。`SELECT`对于用于显示**不经常更改**的数据的简单查询，您可以使用此方法加快页面加载速度。不建议将其用于不断变化的数据。

物化视图的一个很好的用途可能是构建行来填充站点的下拉列表或存储每周只运行一次的复杂报告的结果。对它们来说，一个不好的用途是存储需要及时访问的客户订单信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:33:32.770

如果没有看到表结构等，那将是猜测。但听起来可能是数据库过度规范化了。

如果没有看到它，很难确切地说出问题是什么。但是您可能想查看向表中添加索引和外键。

如果要添加一个包含所有数据的表，则可能是在对数据库进行非规范化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:35:01.763

在某些情况下，对表进行非规范化有其优势，但我更感兴趣的是找出问题是否真的出在表模式或查询的编写方式上。您需要知道查询是否使用索引（或者是否需要将索引添加到表中），原始查询编写器是否在本可以使用连接来提高查询效率时使用子选择等操作。

我不会仅仅因为它使事情变得更快而去规范化，除非有充分的理由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:36:02.437

在新定义的表中拥有一个单独的数据副本是一种有效的性能增强实践，但另一方面，在保持表中的数据和其他表中的数据相同时，它可能会变得一团糟。您基本上有两个事实，在更新/删除时不知道如何使这个“缓存”无效。

阅读更多关于“规范化”和阅读更多关于 MySQL 中的“解释”的信息——它会告诉你为什么其他查询很慢，你可能会用很少的正确索引和外键而不是复制数据来逃避。

# calendar - 居中 YUI 日历的 CSS 建议

> ID：12040568
> 
> 赞同：0
> 
> 时间：2012-08-20T15:27:38.243
> 
> 标签：calendar, yui, center

我在我的网站上使用 YUI 多页日历。我想把它放在我的网页上，但由于我不习惯复杂的 CSS，我不确定如何做到这一点。我尝试添加 margin-left 和 margin-right: auto 但这不起作用。

可以在此处找到此多页日历的示例：http: [//developer.yahoo.com/yui/examples/calendar/calgrp_clean.html](http://developer.yahoo.com/yui/examples/calendar/calgrp_clean.html)

有人能帮我把这个日历居中吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:34:59.033

这非常简单。您只需要为主 div 定义一个宽度，以便边距可以居中。您还需要在主 div 关闭之前放置一个 div 以清除月份，以便主 div 具有不同的高度/宽度。

将此样式添加到主 Div：

```
<div id="cal1Container" class="yui-calcontainer multi" style="margin: 0 auto; width: 500px; float: none;"> 
```

在这个 Div 关闭之前添加这个

```
<div style="clear: both;"></div> 
```

现在它起作用了！浮动一开始很令人困惑，但通常这是需要做的事情。除此之外，它是基本的 CSS。

# javascript - 搜索表单：按下回车键时重新加载页面，并在页面加载时突出显示

> ID：12040573
> 
> 赞同：0
> 
> 时间：2012-08-20T15:27:46.920
> 
> 标签：javascript, forms, search

这是表单的代码：

```
<form onsubmit="return false;" role="search"  method="get" id="searchform" action="window.location.reload()" autocomplete="off">
    <div><label class="screen-reader-text" for="s">Search for:</label>
    <input type="text" value="" name="s" id="s" class="searchbar" >
    </div>
    </form> 
```

由于我实际上使用的是 wordpress 中的“实时搜索”插件（搜索而不导航到另一个页面），并且它有一个错误，即删除并重新输入相同的文本不会再次搜索，我想知道如何获得如果用户刚刚在搜索框中按下回车键，页面是否会重新加载？

我的第二个问题是如何在加载页面时默认突出显示或选择搜索栏，就像谷歌一样？我试过这个：

```
<body onload"

$(function() {
    $("input[name='s']").focus();
});​

"> 
```

但它似乎没有做任何事情。任何对这些问题的任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:34:09.010

您没有转义`onload`函数中的双引号。您可以通过使用反斜杠转义引号来解决此问题，但解决此问题的更好方法是将此代码放在`<script>`标签中（而不是内联）：

```
<script>
    $(function() {
        $("input[name='s']").focus();
    });​
</script> 
```

使用这样的`$()`函数时，它充当 的快捷方式[`$(document).ready()`](http://api.jquery.com/ready/)，因此无需将其附加到 body 的`onload`事件。

澄清一下，解决它的另一种方法是使用转义的单引号，如下所示：

```
<body onload"
    $(function() {
        $('input[name=\'s\']').focus();
    });​"> 
```

但我**强烈**建议您将其放入`<script>`标签中。最好不要使用内联 JavaScript，而使用 jQuery 则没有必要。

# c# - 在 C# 项目中运行 .msi 文件？

> ID：12040574
> 
> 赞同：0
> 
> 时间：2012-08-20T15:27:49.010
> 
> 标签：c#

我有一个 C# 语言的源代码。在安装指南中，他们要求
“在机器上运行 SampleWebService_Setup.msi 和 sample2Service.Setup.msi”。但是，当我尝试归档该文件时，我只能找到 SampleWebService_Setup.vdproj 和 sample2Service.Setup.vdproj 如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:30:34.560

尝试使用此代码

```
Process p = new Process();
p.StartInfo.FileName = "msiexec";
p.StartInfo.Arguments = "/i yourMSI.msi";
p.Start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:13:11.203

我假设您正在尝试使用 Visual Studio 打开它？听起来这两个项目可能是应用程序安装程序项目。

如果是这样，您可以在 VS 中打开项目并构建它们。然后，您应该在项目的任一`/bin`文件夹中找到一个 MSI 安装文件。

# visual-studio-2010 - Visual Studio 2010 中的状态栏？

> ID：12040578
> 
> 赞同：2
> 
> 时间：2012-08-20T15:28:07.327
> 
> 标签：visual-studio-2010

我试图在 Visual Basic 中的 Visual Studio 2010 Windows 窗体项目的工具箱中找到 System.Windows.Forms.StatusBar 控件。我似乎看不到它。它在“通用控件”或“容器”部分的某个地方吗？我看不到。如果有人能告诉我顶部和底部的控件是什么，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:30:27.807

默认情况下它不存在，因为它已被更新（更好）的`StatusStrip`控件所取代。

如果您确实需要它，可以通过右键单击将其添加到任何选项卡，然后单击*选择项目*：

![在此处输入图像描述](../Images/a8a48e57e6b6bab239a4481ba8bef625.png)

# blackberry - 设备收到短信后必须关机

> ID：12040579
> 
> 赞同：1
> 
> 时间：2012-08-20T15:28:14.577
> 
> 标签：blackberry, sms

我需要帮助。

我创建了一个简单的应用程序来监听传入的短信，当短信到达时带有“OFF”这个词，那么设备应该关闭。

该应用程序打开但在收到一条带有“OFF”字样的短信后无法关闭设备

我不知道我做错了什么。这是我的代码：

```
new Thread() { //A new thread is created and surrounds the code 

    public void run() {

        try {

           DatagramConnection _dc =
           (DatagramConnection)Connector.open("sms://"); //A DatagramConnection is created to listen for any incoming sms's.

           for(;;) { //'For-Loop' used to listen continously for incoming sms's

                Datagram d = _dc.newDatagram(_dc.getMaximumLength());                     
                _dc.receive(d);  //The sms is received                           
                byte[] bytes = d.getData();
                String msg = new String(bytes); //The body of the sms is put on a string.

                if (msg == ("OFF") {

                    Device.requestPowerOff(false); //The device is shut down

                }                              
           }  

        } catch (NullPointerException me) { //NullPointerException caught       
              me.printStackTrace();
        } catch (IOException io) {
              io.printStackTrace(); 
        }        
    }
}; 
```

当我在没有线程的情况下运行应用程序时，它会冻结手机。

请帮助，我已经尝试了我所知道的一切，但似乎无法做到正确。

# javascript - Javascript - 将####-##-## 转换为纪元时间

> ID：12040584
> 
> 赞同：0
> 
> 时间：2012-08-20T15:28:35.553
> 
> 标签：javascript, html

有没有办法从 HTML 对象的格式中获取日期对象`####-##-##`并将其转换为纪元时间。例如，用户输入 2012 年 8 月 12 日的值，当我打印出它的 .val() 时显示为 2012-08-12，我需要在 Epoch 时间得到它。

**编辑**

迄今为止的代码：

```
if (hvStartDate == "") {
    hvStartDate = "start"
} 
else {
    console.log($("#hv-start-date").val()); // => 2012-08-20
    hvStartDate = new Date($("#hv-start-date").val()).getTime(); // => NaN
}
if (hvEndDate == "") {
    hvEndDate = "end"
} 
else {
    hvEndDate = new Date($("#hv-end-date").val()).getTime(); // => NaN
}

var myTmp = new Date("2012-08-20");
console.log(myTmp.getTime()); // => NaN 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:33:59.120

[Javascript 的`Date`内置](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)允许您将日期字符串传递到其构造函数中，从而为您提供基于该字符串的日期。从那里开始，呼叫`getTime( )`将为您提供纪元时间。

```
new Date($('.user-value').val()).getTime();  // => epoch time
new Date('2012-08-12').getTime();  // 1344729600000 
```

警告：注意区域设置字符串和特定区域设置的日期格式（例如，日期和月份的位置会根据区域设置切换）。

编辑：根据您在下面评论中的代码，这就是您需要做的。请注意，您必须在调用*之前*`getTime()`实例化一个新的 Date 对象：

```
if (hvStartDate == "") {
    hvStartDate = "start"
} 
else {
    hvStartDate = new Date($("#hv-start-date").val()).getTime();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:31:31.677

只需使用该`getTime()`功能。它返回自 Epoch 以来的毫秒数：

```
 var msSinceEpoch = myDate.getTime(); 
```

MDN 上的完整日期参考：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

编辑：如果你也必须解析它，你可以：

*   `new Date(theString)`如果它具有良好的格式，请使用
*   解析后为自己设置不同的日期字段（请参阅参考资料）
*   使用日期解析库。我使用这个：[http](http://www.datejs.com/) ://www.datejs.com/ ，它对所有日期解析、计算和格式化都非常强大。

# python - 如何简化python中的for循环

> ID：12040587
> 
> 赞同：3
> 
> 时间：2012-08-20T15:28:50.983
> 
> 标签：python, loops

我有这段 Python 代码，它在 for 循环中填充了一个 2d 矩阵

```
img=zeros((len(bins_x),len(bins_y)))

for i in arange(0,len(ix)):
   img[ix[i]][iy[i]]=dummy[i] 
```

是否可以对最后两行代码使用矢量运算？还有什么东西可以加快计算速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:50:39.460

如果 ix, iy 是索引序列：

```
img[ix, iy] = dummy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:48:17.487

[使用numpy](http://numpy.scipy.org/)可能很有用。特别是，[重塑](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)方法可能很有用。这是一个示例（改编自第二个链接）：

```
>>> import numpy as np
>>> a = np.array([1,2,3,4,5,6])
>>> np.reshape(a, (3,2))
array([[1, 2],
       [3, 4],
       [5, 6]]) 
```

# sql-server - SSIS 控制流程图现在为空

> ID：12040590
> 
> 赞同：2
> 
> 时间：2012-08-20T15:28:55.123
> 
> 标签：sql-server, sql-server-2008, ssis

上周我有一个可用的 SSIS 包。今天早上我回到办公室，打开包裹并尝试打开其中一项数据流任务。双击什么也没做。我关闭了项目并重新打开它，并收到一条错误消息，指出存在“灾难性错误”并且无法显示布局。控制流程图现在只显示了我的两个序列容器。

我制作了 dtsx 文件的副本，然后使用文本编辑器手动进入它，发现某些 XML 是重复的。我删除了“额外”副本并重新打开了我的包裹。空的序列容器现在不见了，但我仍然看不到我的任何组件。我查看了包资源管理器，一切都还在，但它只是没有显示在设计器中。我什至能够成功运行该软件包。

有没有办法重建包，以便我可以看到设计器中的所有内容？还有其他建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:55:10.663

我不确定为什么 BIDS 认为布局是垃圾，但您可以通过删除布局并强制 BIDS 重新生成该信息来解决这个问题。图形布局的东西对于概念化包的组织方式是一个很酷的想法，但是存储该信息的实现，在 XML 中的序列化 XML，是裤子。

有很多关于如何删除 XML 的文章，但这是一个更新的示例，说明如何使用此操作。[http://joshrobi.blogspot.com/2012/04/editing-existing-ssis-package-via-ezapi.html](http://joshrobi.blogspot.com/2012/04/editing-existing-ssis-package-via-ezapi.html)

与往常一样，在直接编辑 XML 之前，请确保您拥有一份完整的包副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:33:54.543

你有你的包的备份 - 首先尝试将它恢复到另一个位置，以确保它没有损坏。

您是如何访问该程序包的，您是远程连接到托管 SSIS 的服务器，还是使用位于服务器本地的工具？

我以前尝试跨网络访问包时遇到过问题。

此外，作为警告，在进行进一步诊断之前编辑包装内容不是一个好习惯！

# javascript - excanvas 在 IE8 中不起作用

> ID：12040594
> 
> 赞同：0
> 
> 时间：2012-08-20T15:29:05.883
> 
> 标签：javascript, jquery, html, internet-explorer-8, excanvas

我遇到了 excanvas 无法在 IE8 中呈现的问题。这是我初始化画布的地方。

```
var canvas = document.getElementById("map");
if (typeof (G_vmlCanvasManager) != 'undefined') {
    canvas = G_vmlCanvasManager.initElement(canvas);
}
var ctx = canvas.getContext("2d");
ctx.fillStyle = "#656600"; // sets colors of counties
ctx.strokeStyle = "#ff0000";
ctx.flobalAlpha = 0.33; // set transparency

<img name="texasmapofcounties" src=../texas-map-of-counties.jpg"style="position: absolute; height: 719px; width: 800px; left: 0px; top: 0;" alt="map of texas counties" />
<canvas id="map" width="800" height="719" style="position: absolute; left: 0px; top: 0; opacity: 1;"></canvas>
<div id="map_blind"  style="position: absolute; height: 719px; width: 800px; left: 0px; top: 0;"></div>
<img name="texasmapofcounties" src="../texas-map-of-counties.jpg" width="800" height="719" border="0" id="texasmapofcounties" usemap="#m_texasmapofcounties" alt="" style="position: absolute; height: 719px; width: 800px; left: 0px; top: 0; -moz-user-select: none; opacity: 0;" /> 
```

该网站的目的是，如果德克萨斯州的一个县在其中有一棵“著名的树”，则该县被涂成绿色。然后用户可以选择县并单击它以弹出树木列表。该功能适用​​于 IE7 IE9、FF、Chrome 等......它只是 IE8 和 Excanvas 无法正常工作。

任何帮助将不胜感激！

# objective-c - Xcode：图像数组无法在设备上实例化

> ID：12040597
> 
> 赞同：0
> 
> 时间：2012-08-20T15:29:17.727
> 
> 标签：objective-c, ios, xcode

我有一个在模拟器上运行良好的应用程序，但在我的 iPod Touch（第 4 代）上失败了，我想知道为什么。失败的部分是一个简单的交互式菜单，它在 a 的根上显示六张图片`UINavigationController`，然后推送一个 viewController 实例化一组食物图像，创建一个并排保存所有图像的视图，并移动查看区域在与在根视图中单击的图像相关的图像上。当我在设备上运行它时，该数组仅使用指向两个图像的指针进行实​​例化，并且当该数组用于并排创建图像时会引发异常。

```
//code from the pushed view controller
- (void)setupScrollView:(UIScrollView*)scrMain {
    // we have 6 images here.
    // we will add all images into a scrollView & set the appropriate size.
    NSMutableArray *array = [NSArray arrayWithObjects:
                        [UIImage imageNamed:@"shrimpquesadilla.jpg"],
                        [UIImage imageNamed:@"pulledpork.jpg"],
                        [UIImage imageNamed:@"filetMignon.jpg"],
                        [UIImage imageNamed:@"Reuben.jpg"],
                        [UIImage imageNamed:@"cajunshrimp.jpg"],
                        [UIImage imageNamed:@"primerib.jpg"], nil];
    NSLog(@"stuff: %@", array);
    for (int i=1; i<=6; i++) {
        UIImage *image = [array objectAtIndex:(i-1)];
        UIImageView *imgV = [[UIImageView alloc] 
            initWithFrame:CGRectMake((i-1)*scrMain.frame.size.width, 
            0, scrMain.frame.size.width, (scrMain.frame.size.height - 90))];
        imgV.contentMode=UIViewContentModeScaleToFill;
        [imgV setImage:image];
        imgV.tag=i+1;
        [scrMain addSubview:imgV];
    }
    [scrMain setContentSize:CGSizeMake(scrMain.frame.size.width*6, 
         scrMain.frame.size.height)];
    [scrMain scrollRectToVisible:CGRectMake(self.count*scrMain.frame.size.width, 
         0, scrMain.frame.size.width, scrMain.frame.size.height) animated:YES];
} 
```

通过模拟器运行时 NSLog 的输出：

```
2012-08-20 09:51:23.812 DemoTabbed[1545:11603] stuff: (
    "<UIImage: 0x7931150>",
    "<UIImage: 0x6e63270>",
    "<UIImage: 0x6e67700>",
    "<UIImage: 0x6e68040>",
    "<UIImage: 0x6e5c700>",
    "<UIImage: 0x6e64210>"
) 
```

在设备上运行时的输出：

```
2012-08-20 10:26:50.211 DemoTabbed[2128:707] stuff: (
    "<UIImage: 0x197e20>",
    "<UIImage: 0x181270>"
) 
```

然后是索引超出范围的标准错误。我不知道它是否相关，但我的两个图标也没有加载到设备上，尽管它们在模拟器上工作。如果您需要更多代码，或者您对应用程序或其行为有疑问，请告诉我，我很乐意添加更多代码。

编辑：我尝试重新排列将图像实例化到数组中的顺序，但它没有改变任何内容。输出 stll 显示该数组仅指向两个图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:35:30.353

iOS 有一个区分大小写的文件系统。您在 @"filetMignon.jpg" 文件中有一个案例问题，使其解析为 nil 图像并提前结束数组元素。

要解决此问题，请确保在加载图像时以相同的大小写命名图像（更好的想法是始终使用小写图像名称）。

这在 Simulator 上不是问题，因为 OS X 使用不区分大小写（在 99% 的情况下）文件系统，这意味着 @"filetMignon.jpg" 和 @"filetMignon.jpg" 将解析为同一个文件。

# email - 使用 cfmail 接收非序列电子邮件

> ID：12040598
> 
> 赞同：0
> 
> 时间：2012-08-20T15:29:18.537
> 
> 标签：email, coldfusion, cfmail

这是我的第一个问题。

我运行了这个脚本，

```
 <cfloop from=1 to=300 index="i">
     Sending email #i# <br>
    <cfmail to="test@email.com" from="test@email.com" subject="Bulk email test - #i#">
    #now()#
    </cfmail>
  </cfloop> 
```

*   我在 90 分钟内收到了 300 封电子邮件。为什么它很慢？
*   我收到的电子邮件不按顺序。例如，'Bulk email test -7'、'Bulk email test -232'、'Bulk email test -86'等。是什么原因造成的？
*   有什么设置吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T23:04:38.770

找到了解决方案。假脱机中存在许多 2010 年未送达的电子邮件。清除假脱机，一切正常。

# c# - 在后面的代码中使用命令行变量

> ID：12040599
> 
> 赞同：-3
> 
> 时间：2012-08-20T15:29:19.350
> 
> 标签：c#, variables, adodb

我有一个 WinForm，

我已经添加了命令行功能 -

```
foreach (string arg in args)
        {

            if (arg == "-id")
            {
                string u = "";

                ADODB.Connection ADconn = new ADODB.Connection();
                string connstr = "db connection string";

                ADconn.ConnectionString = connstr;

                object recs;

                ADODB.Recordset rs = new ADODB.Recordset();

                ADconn.Open(connstr);

                string qry = string.Format("Select ID from TABLE where NO = '" + args[counts + 1] + "'");

                rs = ADconn.Execute(qry, out recs, 0);

                for (; !rs.EOF; rs.MoveNext())
                {
                    string test = rs.Fields["column"].Value.ToString();

                    u = test;

                }

            }

            counts = counts + 1;
        } 
```

因此`args[counts + 1]`，用户在命令行中输入的任何变量都是`-id`. 我需要稍后在我的代码中使用这个值但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:32:45.043

一种选择是创建一个具有封装命令行参数的静态属性的类，例如

```
public class RunConfiguration
{
    public static int Id { get; set; }
} 
```

初始化*main()*例程中的值。然后，您可以在程序中的任何位置引用它们，例如

```
int id = RunConfiguration.Id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:33:21.733

使用[Environment.GetCommandLineArgs](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)从程序中的任何位置访问命令行参数，而不仅仅是主方法。（它也可以防止您在任何地方传递它们。）

# windows - 是否有与 lua 5.2.1 兼容的 luasocket 库？

> ID：12040601
> 
> 赞同：5
> 
> 时间：2012-08-20T15:29:37.940
> 
> 标签：windows, http, sockets, lua, luasocket

正如标题所说，我需要一个兼容 Lua 5.2.1 的 Windows luasocket 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T05:09:38.450

`luasocket`已移植到 5.2。见[https://github.com/diegonehab/luasocket/tree/unstable](https://github.com/diegonehab/luasocket/tree/unstable)

# sql - 使用 VB 写入大量记录以进行访问

> ID：12040607
> 
> 赞同：3
> 
> 时间：2012-08-20T15:29:51.087
> 
> 标签：sql, vb.net, ms-access, visual-studio-2005

我目前正在 Visual Studio 中编写一些软件，以使用 SQL 分析来自 Access 数据库的大量数据。我有代码来创建一个新的计算变量，但我正在努力将数据写回 Access 所需的时间。

我目前正在使用一些 vb com 代码与我的 Access 数据库进行通信，该数据库在 2002/3 比较模式下运行。以下是我当前的代码，它在循环中运行一个函数以写入数据库。

```
cnnOLEDB = New OleDbConnection
    cnnOLEDB.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & DataDirectoryName & DatabaseFileName
    cnnOLEDB.Open()

    'cmdOLEDB = New OleDbCommand
    cmdOLEDB.Connection = cnnOLEDB

    ColumnString = "ID_VAR, ID_PAR, TimeValue, strValue, ID_UPL"
    For RecordCounter = 0 To CalcData.GetLength(1) - 1
        Var_ID = Var_ID + 1
        ValueString = Format(Var_ID, "0") & ", " & Format(Parameter, "0") & ", #" & Date2String(CDate(CalcData(0, RecordCounter))) & "#, " & CalcData(CalcData.GetLength(0) - 1, RecordCounter) & ", " & Format(AsUpload, "0")
        If DatabaseConnectionInsert("INSERT INTO " & TableName & " (" & ColumnString & ") VALUES (" & ValueString & ")", "Non-Query") = "Error" Then GoTo Close
    Next

    cnnOLEDB.Close() 
```

这是功能：

```
Public Function DatabaseConnectioninsert(ByVal Query As String, ByVal Task As String) As String
        'On Error GoTo Err

        'If cnnOLEDB.State = ConnectionState.Open Then cnnOLEDB.Close()
        cmdOLEDB.CommandText = Query

        Select Case Task
            Case "Read Recordset"
                rdrOLEDB = cmdOLEDB.ExecuteReader()
                DatabaseConnectioninsert = "Read Recordset"
            Case "Read Scalar"
                DatabaseConnectioninsert = cmdOLEDB.ExecuteScalar
            Case "Non-Query"
                cmdOLEDB.ExecuteNonQuery()
                DatabaseConnectioninsert = "Non-Query"
        End Select

        Exit Function
Err:
        MsgBox("Database connection error.")
        DatabaseConnectioninsert = "Error"

    End Function 
```

我目前正在尝试为每个参数将约 4500 条记录插入 Access 数据库，这需要约 3 分钟。但是，当项目上线时，每个参数必须处理超过 100000 条记录，因此速度还不够快。

为了解决这个问题，我正在考虑将我的代码更新为 .net 或创建一个记录集，这样我就可以一次移动 Access 中的所有数据。谁能给我一些建议，哪些对提高插入速度的影响最大。我正在运行 Visual Studio 2005 和 Access 2007，将数据库更新到 2007 而不是兼容模式是可能的，但并不理想，但是我当前的代码无法访问它。

感谢您的帮助

乔什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:46:43.763

~~听起来~~很荒谬，在 Access 数据库上获得的最佳性能是使用~~古老~~的DAO COM 库。使用一个`RecordSet`对象在循环中一次添加一条记录，并通过它们的索引（序数位置）而不是它们的名称来引用这些字段。你会发现它*比*使用`oleDB.ExecuteNonQuery`.

有关详细信息，请参阅[此处给出的解决方案](https://stackoverflow.com/questions/7070011/writing-large-number-of-records-bulk-insert-to-access-in-net-c)。它是 C#，但如果您想尝试一下，它很容易遵循并转换为 VB.NET。

**编辑**
尊重 Remou 在下面的评论：看起来微软实际上*一直*在使 DAO 技术保持最新——尽管早在 2002 年就[宣布它已经过时](http://msdn.microsoft.com/en-us/library/ms810810.aspx#bkmk_ObsoleteDataAccessTech)——但你必须使用[Office Access Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=13255)而不是更知名的 DAO 3.6图书馆。

# heroku - Heroku、Play 框架、Phantomjs

> ID：12040610
> 
> 赞同：0
> 
> 时间：2012-08-20T15:29:59.443
> 
> 标签：heroku, playframework-2.0, phantomjs

我有一个在 heroku 中运行的 play 2 框架应用程序。如何将 phantomjs 支持添加到 play 2 应用程序？

我知道有一个用于 phantomjs 的 heroku 的 builspack。如何将其专门添加到我现有的 play 2 应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T08:10:02.460

不确定这是否是唯一的方法，但它对我们有用

*   在你的机器上安装 phantomjs
*   在你的 build.sbt libraryDependencies 添加`"com.github.detro.ghostdriver" % "phantomjsdriver" % "1.1.0" % "test",`
*   在你的测试中`WithBrowser(webDriver = classOf[org.openqa.selenium.phantomjs.PhantomJSDriver])`

# jquery - 使用过滤器方法中的表达式来查询表格行中的多个选择单元格

> ID：12040612
> 
> 赞同：1
> 
> 时间：2012-08-20T15:30:02.840
> 
> 标签：jquery, jquery-ui, jquery-plugins

我想知道如何使用 jquery**过滤器方法**来做这些事情：

在表格行中选择单元格 1 到 4 和 6 到 8。

**或者**

在该表的 TR 中选择单元格 1 和单元格 6 到 8。

我已经测试了这些方法，但它们没有用。

**对于第一个： filter('gt(2):lt(4),gt(7):lt(8))'**

**对于第二个： filter('eq(2),gt(7):lt(8)')**

在下面的代码中，结果可能类似于（第一个单元格编号 1 到 8，不包括单元格 5）和（第二个单元格 1 单元格 6 单元格 7 单元格 8

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="selection">
    <tbody>
        <tr>

            <td>cell1</td>
            <td>cell2</td>
            <td>cell3</td>
            <td>cell4</td>
            <td>cell4</td>
            <td>cell5</td>
            <td>cell6</td>
            <td>cell7</td>
                        <td>cell8</td>
        </tr>   
    </tbody>
</table> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:45:32.917

您可以使用 jquery 过滤器。

```
// exclude 5th column (zero based indexes)
$(your_selector_to_cels).filter(function(index) { return index != 4; })

// get only column 1, 6, 7, 8
$(your_selector_to_cels).filter(function(index) { return index == 0 || (index >= 5 && index <= 7); }) 
```

我不知道你想如何硬编码，但这是一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:45:37.523

这可能会有所帮助：

```
$('TABLE TD').slice(1, 9).not(':eq(4)').css({'color': '#f00'}); 
```

[http://jsfiddle.net/NNNqF/](http://jsfiddle.net/NNNqF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T16:09:39.347

您可以使用此选择器：

```
$('#selection tr:eq(0)').find('td:lt(4), td:gt(4):lt(3)') 
```

第一部分`$('#selection tr:eq(0)')`确保您仅选择特定行中的单元格（在本例中为第 0 行，即第一个）。

关于第 2 部分的几点说明：

1.  用于`find`在先前返回的 jQuery 对象中进行选择。
2.  `gt`和`lt`选择器是基于零索引的。因此，为了选择第一个单元格，您使用`'td:lt(1)`这意味着“选择`td`索引小于 1 的单元格”。同样，要选择最后一个，您必须使用`td:gt(8)`这意味着“选择`td`索引大于 8（因为它是从零开始的，10 个元素从 0 到 9，因此 9 是最后一个）。
3.  您可以有多个选择器，以 . 分隔`,`。所以`'td:lt(1), td:gt(8)'`会给你第一个和最后一个单元格
4.  最后但并非最不重要的一点是，当您链接`gt`和`lt`. 请注意，要获得 6、7 和 8，选择器是`td:gt(4):lt(3)`. `gt(4)`将获得索引大于 4 的单元格（请记住，在零索引集合中，索引 5 是第六个项目）并且当您使用`:lt(3)`索引链接时，现在与从 previous 返回的值相关`gt`，这最终意味着您在问对于接下来的 3 个项目。

# r - 将 R 向量转换为 XML 属性值

> ID：12040614
> 
> 赞同：1
> 
> 时间：2012-08-20T15:30:11.207
> 
> 标签：r

我正在研究使用 XML 包基于 R 对象创建 XML 树。

我想做的一件事是从数据框中提取信息，如下所示：

```
frame2
rules     support confidence      lift
1      1 0.010230179  1.0000000 78.200000
2      2 0.010230179  0.8000000 78.200000
3      3 0.010230179  1.0000000 65.166667
4      4 0.010230179  0.6666667 65.166667
5      5 0.012787724  0.8333333 54.305556
6      6 0.012787724  0.8333333 54.305556
7      7 0.010230179  0.6666667 26.066667
8      8 0.010230179  0.4000000 26.066667
9      9 0.007672634  0.6000000 26.066667
10    10 0.007672634  0.3333333 26.066667
11    11 0.007672634  0.6000000 21.327273
12    12 0.007672634  0.2727273 21.327273
13    13 0.007672634  0.4285714 16.757143
14    14 0.007672634  0.3000000 16.757143
15    15 0.010230179  0.6666667 26.066667
16    16 0.010230179  0.4000000 26.066667
17    17 0.007672634  0.3333333 10.861111
18    18 0.007672634  0.2500000 10.861111
19    19 0.007672634  0.3750000 13.329545
20    20 0.007672634  0.2727273 13.329545
21    21 0.007672634  0.3750000 11.278846
22    22 0.007672634  0.2307692 11.278846
23    23 0.007672634  0.3750000 18.328125
24    24 0.007672634  0.3750000 18.328125
25    25 0.007672634  0.4285714 13.964286
26    26 0.007672634  0.2500000 13.964286
27    27 0.007672634  0.4285714 11.171429
28    28 0.007672634  0.2000000 11.171429
29    29 0.007672634  0.3000000 11.730000
30    30 0.007672634  0.3000000 11.730000
31    31 0.007672634  0.2727273  8.886364
32    32 0.007672634  0.2500000  8.886364
33    33 0.007672634  0.3333333 10.861111
34    34 0.007672634  0.2500000 10.861111
35    35 0.007672634  0.3000000 11.730000
36    36 0.007672634  0.3000000 11.730000
37    37 0.007672634  0.3000000  9.775000
38    38 0.007672634  0.2500000  9.775000
39    39 0.007672634  0.2727273  8.202797
40    40 0.007672634  0.2307692  8.202797
41    41 0.007672634  0.2307692  8.202797
42    42 0.007672634  0.2727273  8.202797
43    43 0.007672634  0.2307692  6.015385
44    44 0.007672634  0.2000000  6.015385
45    45 0.010230179  0.8000000 31.280000
46    46 0.010230179  1.0000000 65.166667
47    47 0.010230179  1.0000000 65.166667 
```

进入 XML 树，如下所示

```
root
  1
   support=0.010230179
   confidence=1.0000000 
   lift=78.200000
  /1
  2 
   support=0.010230179
   confidence=0.8000000
   lift=78.200000
  /2
  47
   support=0.010230179
   confidence=1.0000000
   lift=65.166667
  /47
/root 
```

到目前为止，我已经能够使用以下命令创建 47 个子节点。

```
root<-newXMLNode("root")
sapply(frame2$rules,newXMLNode,parent=root) 
```

但是，我一直无法使用适当的值添加元素支持、信心和提升。

这导致我提出以下两个问题：

1.  如何为 47 个子节点中的每一个定义元素或属性 support、confidence 和 lift？

2.  如何根据 frame2 中的值填写它们各自的值？

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:27:17.723

基本问题：

*   您想逐行遍历您的数据帧。

`apply`那里是你的朋友：

```
> invisible(apply(df, MARGIN=1, print))
      rules     support  confidence        lift 
 1.00000000  0.01023018  1.00000000 78.20000000 
      rules     support  confidence        lift 
 2.00000000  0.01023018  0.80000000 78.20000000 
      rules     support  confidence        lift 
 3.00000000  0.01023018  1.00000000 65.16666700 
```

*   您希望将这些行转换为 XML 元素（以 rules 属性命名），以及其他列的属性

`newXMLNode`有一个`attrs`参数，它采用命名向量来产生属性

```
> newXMLNode(as.character(df[1,"rules"]), attrs=df[1,])    
<1 rules="1" support="0.010230179" confidence="1" lift="78.2"/> 
```

为了准确回答这个问题，我们还必须通过子集来摆脱你的`rules`属性，但这并不让我很高兴 -

```
> newXMLNode(as.character(df[1,"rules"]), attrs=df[1,-1])    
<1 support="0.010230179" confidence="1" lift="78.2"/> 
```

我建议不要创建具有不可预测元素名称的 XML 模式（因为在接收者代码中通常更难解析/验证），最好像这样编码

```
> newXMLNode("observation", attrs=df[1,])    
<observation rule="1" support="0.010230179" confidence="1" lift="78.2"/> 
```

结合以上两者并添加根节点：

```
> children <- apply(df, MARGIN=1, function(row) newXMLNode("observation", attrs=row))
> root <- newXMLNode("frame2", .children = children)

> root
<frame2>
  <observation rules="1" support="0.010230179" confidence="1" lift="78.2"/>
  <observation rules="2" support="0.010230179" confidence="0.8" lift="78.2"/>
  <observation rules="3" support="0.010230179" confidence="1" lift="65.166667"/>
</frame2> 
```

# javascript - Selenium WebDriver 点击隐藏元素

> ID：12040615
> 
> 赞同：11
> 
> 时间：2012-08-20T15:30:13.407
> 
> 标签：javascript, selenium, selenium-webdriver, webdriver, hidden-field

您好我想知道如何使用 Selenium WebDriver 单击隐藏元素和/或禁用元素。

我知道使用 selenium 1 我可以这样做：

```
selenium.click(id="idOfHiddenField"); 
```

这会起作用，但是对于 selenium 2 (WebDriver)，这不起作用。我不想使用 jquery 来启用或显示隐藏字段或 JavaScript。这是因为大多数测试都使用 xpath。

还是我只需要使用旧的 selenium，它可以让你点击隐藏的字段？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-21T06:18:44.057

有一种更简单的方法可以使用`JavascriptExecutor`.

例如：

```
document.getElementsByClassName('post-tag')[0].click(); 
```

上面的 javascript 会点击此页面右上角的“Selenium”标签（在您的问题旁边），即使它被隐藏（假设地）。

您需要做的就是通过如下`JavascriptExecutor`界面发出这条 JS 指令：

```
(JavascriptExecutor(webdriver)).executeScript("document.getElementsByClassName('post-tag')[0].click();"); 
```

这将使用 JS 沙箱和合成点击事件来执行点击操作。尽管它违背了 WebDriver 用户活动模拟的目的，但您可以在小众场景中使用它，例如在您的案例中效果良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T20:43:13.883

有一个答案，但有多个建议：

答案：使用 selenium 支持的驱动程序单击隐藏元素，使用类似的东西

```
Selenium selenium = new WebDriverBackedSelenium(driver, baseUrl);
selenium.clickAt("xpath=//area[@alt='Mercury']", clickPoint); 
```

建议1：如果要创建很多并且您正在寻找FOSS，请专门创建假数据，请选择JMeter。

建议2：检查javascript已关闭禁用Firefox实例本身的javascript，例如

```
DesiredCapabilities capabilities = DesiredCapabilities.firefox();
capabilities.setJavascriptEnabled(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T15:06:22.253

它可能不符合您的需求，但对于某些人来说，另一种解决方案可能是更改 CSS 以隐藏元素。

虽然 Selenium*不会*找到具有以下内容的元素，`display: none;`但它*会*找到具有以下内容的元素：

```
.hide {
    position: absolute;
    top: -99em;
    left: -99em;
} 
```

然后`jQuery.show/hide/toggle`，您将使用`jQuery.toggleClass('hide', true/false/unset_to_toggle)`.

# java - 如何使用 4 个不同类型的系统描述符 xml 文件查看 CAS

> ID：12040617
> 
> 赞同：1
> 
> 时间：2012-08-20T15:30:18.700
> 
> 标签：java, nlp, uima

我正在尝试使用 CAS 查看器（http://uima.apache.org/downloads/releaseDocs/2.1.0-incubating/docs/html/tutorials_and_users_guides/tutorials_and_users_guides.html#ugr.tug.cpe.configurator_and_viewer）查看 CAS 的内容

对于使用单一类型系统描述符 XML 创建的 CAS，它工作得非常好。但是，我不确定如何查看使用多类型系统描述符 XML 创建的 CAS。

我也在类路径中生成了相应的类型系统包/类，但不知道如何使用它。

或者，我尝试使用 Eclipse CAS 查看器（UIMA 插件）。这也需要单个类型系统描述符 XML。

让我知道有些事情不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:23:09.613

我对 UIMA 不是很有经验，但我认为您可以创建一个新的 TypeSystem 来[导入](http://uima.apache.org/downloads/releaseDocs/2.2.2-incubating/docs/html/references/references.html#ugr.ref.xml.component_descriptor.type_system.imports)其他 TypeSystem 描述所需的所有类型。

# c# - 如何处理隐藏的文件扩展名

> ID：12040622
> 
> 赞同：0
> 
> 时间：2012-08-20T15:30:34.267
> 
> 标签：c#, file-extension

这是一段代码：

```
if (fbFolderBrowser.ShowDialog() == DialogResult.OK)
{
   originalFiles = Directory.GetFiles(fbFolderBrowser.SelectedPath);
   supportedFiles = originalFiles.Where(s => s.EndsWith(".jpg") || s.EndsWith(".bmp") || s.EndsWith(".tiff") || s.EndsWith(".jpeg") || s.EndsWith(".gif")).ToArray();
} 
```

如果在选择的目录中，文件的扩展名被隐藏了怎么办？这是否意味着我将无法使用“EndsWith”？

了解文件扩展名的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:32:14.233

隐藏文件扩展名是 Windows shell 运行的 UI 的一种行为。

它对您的代码没有影响；所有实际的文件路径仍然有扩展名。

奖励：看看`Path.GetExtension()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:32:59.907

如果您从代码访问目录，您仍然会看到扩展名。“隐藏”扩展仅在通过 UI 浏览文件时隐藏它。

# android - Android fadeAnimation 部分工作

> ID：12040623
> 
> 赞同：-2
> 
> 时间：2012-08-20T15:30:40.437
> 
> 标签：android, android-layout, rotation, android-animation, rotateanimation

我正在尝试在以前使用 RotateAnimation 旋转过的布局上制作动画。我想做的动画是淡入淡出，视情况而定

```
aLayout = (LinearLayout) _context.findViewById(R.layout.layoutId);

    AlphaAnimation fadeIn = new AlphaAnimation(0, 1.0f);
    AlphaAnimation fadeOut = new AlphaAnimation(1.0f, 0);
    fadeIn.setDuration(500);
    fadeOut.setDuration(500);
    fadeIn.setFillAfter(true);
    fadeOut.setFillAfter(true); 
```

根据我申请的情况：

`aLayout.startAnimation(fadeIn);`

或者

`aLayout.startAnimation(fadeOut);`

我已经检查过了，动画并没有试图同时开始。行为是我的布局部分淡入。

而不是有“不可见的部分”，然后是“可见的部分”

我只将部分布局“不可见部分”设置为“in le rt”。

这似乎完全是随机的，这就是为什么我要问你，以防你知道它来自哪里。在轮换之前，这个 alpha 的东西效果很好，但是一旦我这样做了，我就会开始出现这种意想不到的行为

我从 2.2 工作到 4.1 任何帮助将不胜感激。谢谢

编辑：无法弄清楚。任何人 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:39:15.567

好像是安卓的bug。想不出怎么解决。无论如何，我找到了另一种方法来做到这一点。而不是让布局旋转，我只旋转我需要旋转的 UIElement 并创建我想要动画两次的元素。一个用于垂直位置，另一个用于水平位置。

这是我找到的唯一方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:45:02.767

我使用这个使用淡出动画：

```
public void fadeout(final View view) {
    // Start Fade Animation
    Animation fadeOut = new AlphaAnimation(1, 0);
    fadeOut.setInterpolator(new AccelerateInterpolator());
    fadeOut.setStartOffset(1000);
    fadeOut.setDuration(1000);
    AnimationSet animation = new AnimationSet(false);
    animation.addAnimation(fadeOut);
    view.startAnimation(animation);
} 
```

在设置了我想要在抓取布局根后淡出的活动的内容视图之后，我在 onCreate 中调用它：

```
 View layoutRoot = findViewById(R.id.splashscreen);
    fadeout(layoutRoot); 
```

至于旋转部分，你可以调用中的动画`onConfigurationChanged`

# html - 创建具有固定宽度列和可变宽度列的表

> ID：12040624
> 
> 赞同：-1
> 
> 时间：2012-08-20T15:30:42.660
> 
> 标签：html, css, html-table

我想创建一个包含 3 列的表：在左侧和右侧固定宽度的列（被位置：固定 - div 遮挡）和中间的可变宽度列。

这不起作用：

```
<table>
    <tr>
        <td width=202px></td>
        <td> [MYCONTENT] </td>
        <td width=200px></td>
    </tr>
</table> 
```

问题是，由于某种原因，浏览器（在 Chrome 和 Firefox 上测试）认为，当浏览器窗口不够宽时，我的意思并不是真的：外列被裁剪，宽度设置被忽略，因此真正的内容在我的 div 下滑动，变得完全无法访问。

我剩下的唯一想法是使用 1990 年代的透明像素，将其调整为 200 像素宽度，但我一想到就不寒而栗。肯定有更好的方法吗？

（顺便说一句，是的，我尝试过各种纯 css 布局，但没有一个是合适的，例如，如果您对中间列使用溢出：自动，底部的滚动条也会滚动（！！）这意味着如果页面都更高并且比窗口宽,你必须先向下滚动才能看到滚动条,然后水平滚动,然后可能再次向上滚动以首先查看您想看到的内容。我还尝试使用填充：强制所需的边距在左侧和右侧，但是当浏览器窗口不够宽时，这也会被忽略。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:39:27.013

表格用于表格数据，如果您想布局内容，您应该使用 CSS。

如果您在 CSS 方面遇到困难，我建议您使用[Twitter Boostrap 之类的东西。](http://twitter.github.com/bootstrap/)

如果您真的只是想要一个特定的解决方案，请查看[“css 3 列布局流体中心”](http://www.google.co.uk/#hl=en&q=css+3+column+layout+fluid+center&sa=X&ei=OuU0UJK6MIGH0AWN7YCoBg&ved=0CE8Q7xYoAA&bav=on.2,or.r_gc.r_pw.r_qf.&fp=1eacde5ba99084b&biw=1394&bih=907)之类的术语的结果- 我不是在欺骗您，那里确实有很好的答案，正是您想要的，还有很多搜索结果会将您带到这些页面（尤其是 manisheriar.com 和 A List Apart 文章）。

您可以使用 min-width（在中间 div 上）和 max-width - 以及媒体查询 - 来帮助控制在较小窗口中发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T17:46:14.043

好的-这里有桌子。

[http://jsfiddle.net/sheriffderek/wAGKp/2/](http://jsfiddle.net/sheriffderek/wAGKp/2/)

我想简短的回答是——

*   从 html 中取出样式并使用选择器。（本例中的类”，然后是 min-width --- 和 width...
*   另外 - 请记住，填充和边距会改变你的东西的宽度......所以你可以使用边界框方法......（它是rad）并包含在第二个......使得填充保持在原始 div 大小 --- 希望这会有所帮助。

这就是我要做的方式。（没有桌子......）

[http://jsfiddle.net/sheriffderek/GBtdy/1/](http://jsfiddle.net/sheriffderek/GBtdy/1/)

# asp.net-mvc - .net MVC 处理 ajax 加载的视图编译错误

> ID：12040627
> 
> 赞同：0
> 
> 时间：2012-08-20T15:30:51.950
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, error-handling

我有一个编译错误的视图。此视图通过 ajax 调用加载。我想将编译错误消息作为简单的字符串消息返回，但 MVC 将整个 HTML 页面作为错误返回。

我有一个 ajax 错误处理程序，它在 中查找错误消息`request.responseText`，如下所示：

```
$(document).ajaxError(function (event, request, settings) {
    ....
    //contains html error page, but I need a simple error message
    request.responseText 
    ....
}); 
```

当出现视图编译错误时，如何向 ajax 错误处理程序返回简单的错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:51:29.137

您可以在 Global.asax 中编写一个全局异常处理程序，它将拦截 AJAX 请求期间发生的错误并将它们序列化为响应的 JSON 对象，以便您的客户端错误回调可以提取必要的信息：

```
protected void Application_Error(object sender, EventArgs e)
{
    if (new HttpRequestWrapper(Request).IsAjaxRequest())
    {
        var exception = Server.GetLastError();
        Response.Clear();
        Server.ClearError();
        Response.ContentType = "application/json";
        var json = new JavaScriptSerializer().Serialize(new
        {
            // TODO: include the information about the error that
            // you are interested in => you could also test for 
            // different types of exceptions in order to retrieve some info
            message = exception.Message
        });
        Response.StatusCode = 500;
        Response.Write(json);
    }
} 
```

接着：

```
$(document).ajaxError(function (event, request, settings) {
    try {
        var obj = $.parseJSON(request.responseText);
        alert(obj.message);
    } catch(e) { }
}); 
```

# mysql - MySQL 存储过程 - 如何不返回任何内容

> ID：12040628
> 
> 赞同：3
> 
> 时间：2012-08-20T15:30:54.670
> 
> 标签：mysql, stored-procedures

我有一个存储过程 SP1，它调用另一个存储过程 SP2，如下所示：

```
CREATE PROCEDURE SP1()
BEGIN
    CALL SP2();
END 
```

SP2 存储过程从表中返回一行，但我不希望 SP1 返回任何内容。我尝试声明一个虚拟变量并以“SELECT 0 INTO dummy”之类的内容结束 SP1()，但似乎没有任何效果......

有没有简单的方法让 SP1 不从 SP2 返回行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:39:22.077

存储过程的返回类型是`Int`并且不能更改为 return `NULL`。
这看起来像[XY 问题](http://www.perlmonks.org/?node_id=542341)。
你为什么打来`SP2`电话`SP1`？如果返回值造成麻烦，也许你可以改变你的设计。

# c# - 使文本框响应树视图选择

> ID：12040629
> 
> 赞同：0
> 
> 时间：2012-08-20T15:31:10.890
> 
> 标签：c#, treeview

在这个项目中，生成了多个报告。每个报表都可以有无限的子报表，这使其成为一个完全递归的解决方案。我需要制作一个 C# 查看器来显示这些报告，所以我现在制作了一个基本原型，左侧面板为树视图，右侧面板带有文本框。

我的问题是我无法找到一种方法来正确地使用左侧报告（来自树视图）中的信息填充正确的文本。报告的名称可以重复。我最初将所有信息添加到字典中，其中键的报告名称和数据作为值，但由于标题重复，这不起作用......

我想为每个报告使用某种唯一的随机 ID 将树节点与正确的报告信息相关联，但我似乎很难做到这一点。 [http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.aspx)

从我读过的内容来看，似乎没有某种属性可以用来执行此操作...如何使正确的文本框根据左侧选定的树节点填充报告中的信息？目前正在递归添加树节点，就像我说的可能有重复，所以节点的名称不一定是唯一的。

谢谢，我很乐意回答任何进一步的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:36:19.393

使用该`TreeNode.Tag`属性存储对报告的引用：

```
TreeNode node = TreeView1.Nodes.Add(report.Name);
node.Tag = report; 
```

然后，在事件处理程序中，从选定节点`AfterSelect`的属性中检索报告：`Tag`

```
Report report = (Report)e.Node.Tag; 
```

# mysql - 可以在同一个 SQL 查询中使用两个 GROUP_CONCAT 吗？

> ID：12040631
> 
> 赞同：0
> 
> 时间：2012-08-20T15:31:18.197
> 
> 标签：mysql, sql

我试图在同一个 SQL 语句中使用两个 GROUP_CONCAT。

我有以下代码：

```
try
{
$sql = 'SELECT player.id, player.name AS name, GROUP_CONCAT(previousclubs.name) 
        previousclubs, satscore, gpa, GROUP_CONCAT(link) link
            FROM player INNER JOIN playerpreviousclubs
                ON player.id = playerid
            INNER JOIN previousclubs
                    ON previousclubid = previousclubs.id
            INNER JOIN links
                ON links.playerid = player.id
            GROUP BY player.id';

$result = $pdo->query($sql);
}
catch (PDOException $e)
{
$error = 'Error fetching details: ' . $e->getMessage();
include 'error.html.php';
exit();
}

foreach ($result as $row)
{
$names[] = array(
                'id' => $row['id'], 
                'name' => $row['name'],
                'previousclubs' => $row['previousclubs'],
                'links' => $row['link']
                );
}
include 'profiles.html.php'; 
```

如果玩家说三个以前的俱乐部和一个链接，那么不要像这样显示：

**姓名：**约翰·史密斯

**以前的俱乐部：**阿森纳、雷丁、QPR

**链接：** www.bbc.co.uk

它显示如下：

**姓名：**约翰·史密斯

**以前的俱乐部：**阿森纳、雷丁、QPR

**链接：** www.bbc.co.uk、www.bbc.co.uk、www.bbc.co.uk

更糟糕的是，如果您有多个链接（下面使用了两个链接），您会得到：

**姓名：**约翰·史密斯

**以前的俱乐部：**阿森纳、阿森纳、雷丁、雷丁、QPR、QPR

**链接：** www.bbc.co.uk、www.football.com、www.bbc.co.uk、www.football.com、www.bbc.co.uk、www.football.com

有人可以就这里发生的事情以及如何纠正它提供一些指导。

previousclubs 上的第一个 GROUP_CONCAT 本身可以正常工作，但是当将链接的第二个 GROUP_CONCAT 混合使用时，就会出现上述问题。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:37:24.880

问题不在于 GROUP_CONCAT，而在于参数。

您的第二组 concat 应该是：

```
GROUP_CONCAT(distinct link) link 
```

您还可以控制排序（例如，如果您想要最近的优先）。查看[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)的帮助页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:36:43.153

这是正常的行为。您的链接条目会为每个 重复`previousclub`，反之亦然。改用这个：

```
GROUP_CONCAT(DISTINCT link), GROUP_CONCAT(DISTINCT previousclubs.name) 
```

# ms-access - 访问记录锁定信息和共享使用

> ID：12040632
> 
> 赞同：1
> 
> 时间：2012-08-20T15:31:23.260
> 
> 标签：ms-access, networking

所以，

我遇到了一些问题，我想知道你们的业务用户如何处理这个问题。我在安全位置的共享驱动器上拥有 Access 数据库。它刚刚设置为只有几个用户具有“删除”权限（因为我们不希望有人删除数据库）。其他人都读过、写过等，但没有删除。

这很好用，但我注意到在普通用户注销数据库后，Record-Locking-Information 文件没有被删除（我确定是由于文件夹的“禁止删除”权限）。

这个问题你们都实施了哪些解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:38:24.987

> 许多人建议您必须向用户授予 FULL 权限，但事实并非如此。您只需要给他们 MODIFY 权限——您可以拒绝他们 DELETE 权限，这是一个好主意，因为它禁止用户“意外”删除您的数据文件。
> 
> 确实，对于具有 DELETE 权限的用户，当该用户是最后一个退出数据库的用户时，LDB 文件将在退出时被删除。但是不需要删除 LDB 文件——事实上，在 Access 2 和之前的版本中，LDB 文件在退出时并没有被删除，而是留在原处。这通常没有缺点，但偶尔 LDB 文件会损坏并导致问题，确实需要删除并重新创建。
> 
> 我所做的是拥有两类数据库用户（在特定于我的 Access 应用程序的自定义 NT 安全组中定义）——DBAdmins 和其他所有人。DBAdmins 拥有完整的权限，其他人只能更改。结果是，只要 DBAdmin 作为最终用户退出，LDB 就会被删除。这个设置效果很好，我已经使用了十多年了。

——大卫·W·芬顿

# javascript - 检查单选按钮是否打开

> ID：12040633
> 
> 赞同：0
> 
> 时间：2012-08-20T15:31:26.900
> 
> 标签：javascript, javascript-events

我正在尝试检查是否在我的页面上单击了单选按钮，但由于某种奇怪的原因，它没有按照我期望的方式运行。

在我的 .js 我有

```
function radio_is_on() {
    var elementId = document.getElementById('delete');
    if (elementId.checked == "on" ){
    alert('I am here');
    }
} 
```

在我的 html 中我有

```
<input type="radio" id="some"  name="radio1" value="someVal" >
<input type="radio" id="delete"  name="radio2" value="delete" >
<input class=b1 type="submit" name="ok" value="Go" onclick="radio_is_on();"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:34:39.913

尝试这个：

```
function radio_is_on() {
    var elementId = document.getElementById('delete');
    if (elementId.checked){
    alert('I am here');
    }
} 
```

顺便说一句：如果您至少两次没有使用相同的名称，则可能需要使用复选框。

# javascript - 在 Javascript 中在运行时动态设置断点

> ID：12040636
> 
> 赞同：2
> 
> 时间：2012-08-20T15:31:32.457
> 
> 标签：javascript, debugging, webkit, firebug, breakpoints

firebug 和 webkit 浏览器中的内置控制台都可以在运行的 Javascript 代码中设置断点，因此您可以像使用任何其他语言一样对其进行调试。

我想知道是否有任何方法可以指示 firebug 或 webkit 在运行时在文件 Y 的 X 行上设置断点，并能够检查我拥有的特定范围内的变量停了下来。

我需要可以在 Chrome（或任何其他 webkit 浏览器）和 Firefox 中运行的东西。对于后者，Firebug 是可接受的依赖项。支持 IE 不是必需的。

我一直在构建一个浏览器内的 IDE（感兴趣的快速视频：[http](http://www.youtube.com/watch?v=c5lGwqi8L_g) ://www.youtube.com/watch?v=c5lGwqi8L_g ）并且想给它更多的肉。

我尝试过的一件事就是`debugger;`在用户设置它们的地方添加一个额外的行，但这并不是一个理想的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T08:14:57.553

我想说您绝对可以使用远程调试协议为 webkit 浏览器执行此操作。这是基于 websocket 连接和来回传输的 json 消息协议。

您可以阅读[公告](http://www.webkit.org/blog/1875/announcing-remote-debugging-protocol-v1-0/)和整个[协议架构](http://trac.webkit.org/browser/trunk/Source/WebCore/inspector/Inspector.json)。

[Chrome 还在其远程开发者工具文档](https://developer.chrome.com/devtools/docs/remote-debugging)中提供了更多相关信息。

例如，对于[调试器域](https://developer.chrome.com/devtools/docs/protocol/1.0/debugger)，您可以了解如何使用[Debugger.setBreakpoint](https://developer.chrome.com/devtools/docs/protocol/1.0/debugger#command-setBreakpoint)、[Debugger.setBreakpointByUrl](https://developer.chrome.com/devtools/docs/protocol/1.0/debugger#command-setBreakpointByUrl)和[Debugger.setBreakpointsActive](https://developer.chrome.com/devtools/docs/protocol/1.0/debugger#command-setBreakpointsActive)来处理断点。

另一方面，正如您在[https://developer.mozilla.org/en-US/docs/Tools/Debugger-API](https://developer.mozilla.org/en-US/docs/Tools/Debugger-API)和[https://wiki.mozilla.org/中看到的那样，Mozilla 似乎也在努力解决这个问题Remote_Debugging_Protocol](https://wiki.mozilla.org/Remote_Debugging_Protocol)虽然我不知道它的完成状态。

在这种情况下，您可以使用[Debugger.Script](https://wiki.mozilla.org/Debugger#Function_Properties_of_the_Debugger.Script_Prototype_Object) API setBreakPoint、getBreakPoint、getBreakpoints、clearBreakpoints 和 clearAllBreakpoints 来处理断点

我希望这可以帮助您继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T06:13:51.110

不存在这样的事情，至少不使用 JavaScript 的公共、可编写脚本的一面。如果您有一个可以为您执行此操作的特权浏览器扩展程序，那将是可能的。例如，Firebug 有一个[调试方法](https://getfirebug.com/wiki/index.php/Debug)，您可以从它的命令行调用，但不能从页面内的脚本调用。

所以，你有两个解决方案：

1.  实现您自己的 JavaScript 解释器，您可以随意控制它。不过可能有点太野心勃勃了……
2.  依赖浏览器扩展，它可以在代码中的任何位置设置断点，向公共代码公开一些 API，并通过 JavaScript 与之交互。但这意味着用户必须安装一些额外的软件才能使用您的“Web IDE”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T22:29:32.847

用于[`_defineSetter__`](http://www.alistapart.com/articles/advanced-debugging-with-javascript/)观察变量，并将其与`debugger`赋值发生时的调用结合起来。

```
__defineSetter__("name", function() { debugger; }); 
```

或定义属性：

```
function setter () { debugger; }

Object.defineProperty(Math, 'name', { set: setter }); 
```

**参考**

*   [MDN：对象.defineProperty](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)

*   [A List Apart：使用 JavaScript 进行高级调试](http://www.alistapart.com/articles/advanced-debugging-with-javascript/)

*   [JavaScript Getter 和 Setter](http://ejohn.org/blog/javascript-getters-and-setters/)

# node.js - 使用请求的nodejs编码

> ID：12040643
> 
> 赞同：16
> 
> 时间：2012-08-20T15:31:53.657
> 
> 标签：node.js, encoding

我正在尝试通过请求获得正确的编码。

```
request.get({
    "uri":'http://www.bold.dk/tv/',
    "encoding": "text/html;charset='charset=utf-8'"
  },
  function(err, resp, body){    
    console.log(body);
  }
); 
```

无论我做什么，丹麦字符的编码都不正确。

有什么想法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-02-25T22:49:24.420

您可以使用 iconv (lite) 来转换它。您还需要通过将 encoding 属性设置为 null 来告诉 request 不要主动将编码设置为 UTF-8 的默认值。因此你应该这样做：

```
var iconv = require('iconv-lite');
request.get({
    uri:'http://www.bold.dk/tv/',
    encoding: null
  },
  function(err, resp, body){    
    var bodyWithCorrectEncoding = iconv.decode(body, 'iso-8859-1');
    console.log(bodyWithCorrectEncoding);
  }
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-24T09:54:04.390

也许你的麻烦在于`'Accept-Encoding'`标题。假设你有像这样的标题`'Accept-Encoding': 'gzip,deflate'`

如果是这样，您有两种方法可以解决此问题：

1.  删除此标题
2.  使用以下代码解压缩数据：

    ```
    const req = request(options, res => {
        let buffers = []
        let bufferLength = 0
        let strings = []

        const getData = chunk => {
            if (!Buffer.isBuffer(chunk)) {
                strings.push(chunk)
            } else if (chunk.length) {
                bufferLength += chunk.length
                buffers.push(chunk)
            }
        }

        const endData = () => {
            let response = {code: 200, body: ''}
            if (bufferLength) {
                response.body = Buffer.concat(buffers, bufferLength)
                if (options.encoding !== null) {
                    response.body = response.body.toString(options.encoding)
                }
                buffers = []
                bufferLength = 0
            } else if (strings.length) {
                if (options.encoding === 'utf8' && strings[0].length > 0 && strings[0][0] === '\uFEFF') {
                    strings[0] = strings[0].substring(1)
                }
                response.body = strings.join('')
            }
            console.log('response', response)
        };

        switch (res.headers['content-encoding']) {
            // or, just use zlib.createUnzip() to handle both cases
            case 'gzip':
                res.pipe(zlib.createGunzip())
                    .on('data', getData)
                    .on('end', endData)
                break;
            case 'deflate':
                res.pipe(zlib.createInflate())
                    .on('data', getData)
                    .on('end', endData)
                break;
            default:
                res.pipe(zlib.createInflate())
                    .on('data', getData)
                    .on('end', endData)
                break;
        }
    }); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-20T17:39:35.643

我有同样的问题，使用`request v2.88.0`.

参考woolfi makkinan的回答，我得到了解决问题的简单方法。

```
request.get({
    "uri": 'http://www.bold.dk/tv/',
    "encoding": "text/html;charset='charset=utf-8'",
    "gzip": true // notice this config
  },
  function(err, resp, body){    
    console.log(body);
  }
); 
```

添加`gzip: true`到`request`选项，`request`将处理gzip，然后blob可以正确转换为字符串。​</p>

# c - 为什么这个程序没有给出预期的输出？

> ID：12040645
> 
> 赞同：0
> 
> 时间：2012-08-20T15:31:55.163
> 
> 标签：c, for-loop, int

这个程序（在 C 中）没有输出我所期望的：

```
int main()
{
    int i, j ;
    for ( i = 1 ; i <= 2 ; i++ )
    {
        for ( j = 1 ; j <= 2 ; j++ )
        {
            if ( i == j )
                continue ;
            printf ( "\n%d %d\n", i, j ) ;
        }
    }
} 
```

我认为应该是

```
1 2
1 3
2 1
2 3

```

但是程序输出

```
1 2
2 1

```

为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:35:04.260

循环的索引永远无法达到数字 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:38:34.847

的值`i`和`j`经历这个序列：

```
i j
---
1 1
1 2
2 1
2 2 
```

请注意，循环体的每次迭代**之后**`i++`都会发生和`j++`增量。

 **你被调用的唯一情况`printf`是在哪里`i`并且`j`是不同的。这意味着你得到：

```
1 2
2 1 
```**

# r - 在 R 中：如何对交互的预测变量进行多元线性回归，而不对未交互的变量进行回归？

> ID：12040648
> 
> 赞同：0
> 
> 时间：2012-08-20T15:32:14.040
> 
> 标签：r, regression, linear-regression, modeling

在我的一生中，我无法弄清楚如何在两个预测变量相互作用的情况下运行多元线性回归，而不自己对相互作用的预测变量进行回归。这是一个例子：

当我使用此脚本进行回归时

```
lagfit <- lm(formula = Production ~ DayOfWeek*Employees, data = train) 
```

它返回一个包含三个预测变量的回归：星期几、员工人数和交互。但我只想回归交互。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:44:28.173

您可以只使用`:`运算符而不是`*`：

```
lagfit <- lm(formula = Production ~ DayOfWeek:Employees, data = train) 
```

# php - php -v 命令不起作用

> ID：12040651
> 
> 赞同：2
> 
> 时间：2012-08-20T15:32:24.160
> 
> 标签：php, debian

我刚刚使用标准的 apt-get 在我的 Debian 系统上安装了 php5 包。编码：

```
<?php
phpinfo();
?> 
```

工程和其他 php 页面工作。

但是命令 php -v 和 php -m 不起作用。它给出了一个错误“-bash: php: command not found”。

php5-cli 已安装。我的路径是/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games。我查看了 usr/bin 并没有 php 或 php5 文件。不知道还能在哪里找到这些？

我跑了：

```
whereis php5
php5: /etc/php5 /usr/lib/php5 /usr/lib64/php5 /usr/share/php5 
```

不认为其中任何一个是正确的文件吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T15:37:03.217

确保安装了 PHP CLI 包。`sudo apt-get install php5-cli`.

此外，需要将 PHP 二进制文件添加到您的路径中。如果您运行`which php`并且没有得到任何输出，那么可以肯定它不在您的路径中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:36:32.413

php 命令可能不在您的路径中。您可以使用 . 查看您的路径`echo $PATH`。如果安装 php 二进制文件的目录不在您的路径中，您可以使用`export PATH=$PATH:/path/to/php`.

# .net - 当 Web 服务正在调用另一个 Web 服务时 Current.User.Identity 为空

> ID：12040658
> 
> 赞同：1
> 
> 时间：2012-08-20T15:32:45.933
> 
> 标签：.net, web-services, iis, iis-6, .net-2.0

我对以下情况感到困扰：

我有一个用 C# 编写的 Web 服务（这是古老的符文。.NET 2.0，asmx 文件）。调用服务时，会使用 HttpContext.Current.User 等检查用户。调用需要使用 Active Directory 帐户完成。让当前用户认同这一点完全没有问题。

问题是这个 Web 服务在某个时候调用了另一个 Web 服务，但是在第二个 Web 服务中 Current.User.Identity-object 是空的！？

为什么会这样，我该如何解决？

这两个服务都托管在带有 IIS 6 的 Server 2003 上。这两个服务都在启用了 Windows 身份验证的 ApplicationPools 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:38:52.750

很难用对古代符文的有限描述来判断，但我猜第一个服务设置为需要身份验证，而第二个服务不是。所以首先要看的是第二个服务是否允许匿名连接，如果是这样禁用它并且它可以解决。

一般来说，这不是保护 Web 服务的好方法，即使是古老的 ASMX 也是如此。

# hook - Compass 中的后期编译钩子

> ID：12040667
> 
> 赞同：3
> 
> 时间：2012-08-20T15:33:27.590
> 
> 标签：hook, sass, compass-sass

在编译器将所有 SCSS 文件编译为独立（无 Rails）项目中的 CSS 后，我需要一个 Compass 挂钩。

除了编辑“compiler.rb”（由于 gem 更新，这不是好的解决方案）之外，指南针中是否有任何编译后挂钩？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T15:41:54.733

好的，我找到了；）指南针有这个钩子：

*   on_sprite_saved
*   on_sprite_generated
*   on_sprite_removed
*   on_stylesheet_saved （这就是我要找的）
*   on_stylesheet_error

可悲的是，在[http://compass-style.org/](http://compass-style.org/)上没有关于任何钩子的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T04:21:25.500

Compass 回调记录在[http://compass-style.org/help/documentation/configuration-reference/#callbacks的](http://compass-style.org/help/documentation/configuration-reference/#callbacks)**回调**部分。

该`on_stylesheet_saved`钩子将在 .css 文件编译后触发。您可以通过将以下内容添加到 config.rb 文件的底部来调用它：

```
on_stylesheet_saved do |file|
  #Do Ruby stuff. Below outputs to command line.
  puts ">>>> ZOMG"
end 
```

# installation - 如何在 Ubuntu 12.04 LTS 上安装 monogame？

> ID：12040674
> 
> 赞同：0
> 
> 时间：2012-08-20T15:33:57.840
> 
> 标签：installation, monodevelop, ubuntu-12.04, monogame

我一直在关注[http://www.youtube.com/watch?v=OFs319ECDEM](http://www.youtube.com/watch?v=OFs319ECDEM)，但 badgerports.org 存储库似乎不再有 monogame 了。有人可以给我一个更好的存储库，或者告诉我另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:37:55.180

您需要安装和构建 Monogame（C#/XNA 克隆）。

按照此链接中的说明进行操作：

*   [http://www.sharms.org/blog/2012/06/getting-started-with-monogame-on-ubuntu-12-04/](http://www.sharms.org/blog/2012/06/getting-started-with-monogame-on-ubuntu-12-04/)

# oauth - 如何进行 HTTP POST facebook 身份验证

> ID：12040679
> 
> 赞同：1
> 
> 时间：2012-08-20T15:34:10.703
> 
> 标签：oauth, facebook-c#-sdk

我需要一些帮助来实现 facebook 身份验证。我正在做这个示例： [http](http://csharpsdk.org/docs/web/getting-started) ://csharpsdk.org/docs/web/getting-started 并且工作正常，我可以获得访问令牌并获取用户信息。

但我的问题是因为 javascript 启动了一个 http post 循环，因为他正在执行调用处理程序的 javascript，所以不恰当地重定向我的页面。

所以我有 Main.aspx 并且在那里我实现了 javascript 和我的所有主要内容，如果我的处理程序重定向到 Main.aspx 他进入循环，如果我将处理程序重定向到 SecondPage.aspx 他停止循环，但是如果我点击返回到 Main.aspx（或其他我有 javascript 的地方），他重定向到第二个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T17:05:35.323

问题是您正在从 ashx 处理程序页面重定向回原始页面，当您这样做时，您的 JavaScript 将再次执行，因此向服务器提交另一个 Post，服务器又再次调用您的 ashx 处理程序页面。所以你最终陷入了无限循环。但是，当您从 ashx 处理程序页面重定向到不同的页面时，验证您的用户的 JavaScript 不会执行并且不会发送另一个 Post。

我自己也遇到了同样的问题，并提出了一个相当简单的解决方案，我将其发布在处理相同问题的不同线程上。[你可以在这个线程](https://stackoverflow.com/questions/11898862/infinite-refresh-getting-started-with-the-facebook-c-sharp-sdk)上找到答案。

顺便说一句，我继续研究这个并找到了一个很好的解决方案，它允许我在所有服务器端而不是使用 JavaScript SDK，所以我不确定你是否会对它感兴趣，因为你的帖子是关于“如何进行 HTTP POST facebook 身份验证”，但如果您是，该链接提供了一个处理未使用 MVC 编写的 ASP.NET 应用程序的解决方案。[Facebook C# SDK 入门](http://multitiered.wordpress.com/2010/08/05/getting-started-with-the-facebook-c-sharp-sdk/)

# increment - PHP 未定义索引/未定义偏移解决方法

> ID：12040680
> 
> 赞同：2
> 
> 时间：2012-08-20T15:34:19.660
> 
> 标签：increment, php

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

最近打开了错误，我在递增到新数组索引的行上捕获了未定义索引和未定义偏移错误。

这是一个非常基本的例子。

```
for($i = 0; $i<10; $i++)
{
    $arr['var1'] += $val1[$i];
    $arr['var2'] += $val2[$i];
} 
```

我收到错误是因为在第一次迭代时 $arr['var1'] 没有设置。

我发现两者都检查索引是否已设置

```
if (!isset($arr['var1'])) {
    $arr['var1'] = 0;
}
$arr['var1'] += $val1[$i]; 
```

• 和 •</p>

在递增的 forloop 之前自动将索引设置为 0 并停止错误消息。

我的问题是我将有大约 150 个这些问题要解决，解决这个问题的最佳方法是什么。检查每一个的isset，还是预先用0 val 定义每一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:37:17.210

您应该*始终*初始化变量。这绝对是几乎所有语言的最佳实践，访问未设置的变量被认为是一种极坏的习惯。您应该始终在开发带有错误*的*软件。

您的代码应为：

```
$arr['var1'] = $arr['var2'] = 0;
for($i = 0; $i<10; $i++)
{
    $arr['var1'] += $val1[$i];
    $arr['var2'] += $val2[$i];
} 
```

接受打击，修复所有 150 次出现的这个问题，然后从错误中吸取教训。下次正确编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:37:15.773

这是个人喜好，因为任何一种选择都会产生相同的功能。但是，提前声明它将为您节省条件调用和函数调用（将在循环中重复），因此从效率的角度来看，最好在循环之前声明它。通常，最佳实践是在使用变量之前声明它们。但是，PHP 可以让您摆脱这种情况，这就是它不是必需的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:37:36.570

首先初始化，然后迭代：

```
$arr['var1'] = 0;
$arr['var2'] = 0;
for($i = 0; $i<10; $i++)
{
    $arr['var1'] += $val1[$i];
    $arr['var2'] += $val2[$i];
} 
```

这是更具可读性的代码 - 比你一直在做的更好的做法。

如果您必须初始化一个包含许多计数器的数组，您可能会执行以下操作：

```
$arr = array('counter1' => 0, 'counter2' => 0, 'counter3' => 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T16:14:35.693

如果您通过引用访问它们，则数组条目将产生（自动激活）。因此：

```
for($i = 0; $i < 10; $i++) {
    $var1 =& $arr['var1'];
    $var2 =& $arr['var2'];
    $var1 += $val1[$i];
    $var2 += $val2[$i];
} 
```

甚至数组本身也不需要声明。默认情况下，新条目的值为 NULL，添加时将转换为 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T15:39:08.350

您应该修复这些区域，只是为了良好的编码实践。您采用的方法实际上取决于您的代码。如果您真的在使用新变量，那么只需将它们定义为 false、0、'' 或任何有意义的变量作为相关变量的默认值。

如果您在代码中可能有或没有值集的位置（例如评估 $_POST 或 $_GET 数组），则使用`isset()`,`empty()`或类似方法来评估它。

# boost - 许可要求（Boost、Qt Creator）

> ID：12040682
> 
> 赞同：3
> 
> 时间：2012-08-20T15:34:28.777
> 
> 标签：boost, licensing, qt-creator

我对使用许可库/软件的确切规则有些困惑。我使用 Boost 库和 MSVC 10 编译器在 Qt Creator 中生成了一个小型 C++ 程序。我无意出售这个软件，但我可能会在某个时候把它放到互联网上。这是否意味着我必须在 Boost 许可证和 LGPL（由于 Qt Creator）下对其进行许可，还是不需要？我不喜欢这样做，但想更好地理解规则，并且无法在 Google 或 Stack Overflow 上找到简单的英语“可以和不能做”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T05:35:15.180

**Qt Creator**在 LGPL 下获得许可。因此，如果您使用动态链接，则不必担心 Qt。

你没问题，如果你...

*   使用原始的 qt 库，

*   与您的应用程序一起分发`dll`文件，

*   您**不会将**这些`dll`文件编译到您的`exe`文件中。

请检查这个问题：[Qt, LGPL, Commercial closed-source application](https://stackoverflow.com/questions/3024547/qt-lgpl-commercial-closed-source-application?rq=1)

* * *

**Boost**有自己的许可证，名为 Boost License。

来自 Boost 网站：

> 如果您将自己的代码与一些 Boost 代码一起分发，**则 Boost 许可证仅适用于 Boost 代码（及其修改版本）**；您可以按照您喜欢的任何条款自由许可您自己的代码。

来自 Boost 许可证：

> 软件中的版权声明和整个声明，包括上述许可授予、此限制和以下免责声明，必须全部或部分包含在软件的所有副本以及软件的所有衍生作品中，**除非这样副本或衍生作品仅以源语言处理器生成的机器可执行目标代码的形式存在。**

这意味着如果您没有对原始 Boost 库进行任何更改，您**只**需要在**源**代码中包含 Boost 许可证文件。这是你唯一的限制。

* * *

关于**Visual C++**请在此处查看： [Visual Studio Express 2010 许可证](https://stackoverflow.com/questions/2624589/visual-studio-express-2010-license)

# macos - MacOSX 给别名/符号链接标签颜色，但不是原始文件

> ID：12040685
> 
> 赞同：1
> 
> 时间：2012-08-20T15:34:40.517
> 
> 标签：macos, applescript, label, symlink

海 Stackoverflow，

我有一个简短的问题。是否可以将别名/符号链接的标签设置为某种颜色而不影响其他符号链接和原始文件？

假设是否有一个主文件夹和不同的子组。每个子组都包含指向主文件夹中文件的符号链接。我想知道根据一些很容易完成的变量为这些符号链接着色

```
osascript -e "tell application \"Finder\" to set label index of alias POSIX file \"$1\" to \"$2\"" 
```

不幸的是，这会更改主文件的标签索引以及所有其他符号链接到该特定文件的标签索引。

提前非常感谢:-)

# jquery - 如何使用 jQuery 在 xml 中放置分页符

> ID：12040686
> 
> 赞同：0
> 
> 时间：2012-08-20T15:34:44.197
> 
> 标签：jquery, xml-parsing

我有一个 XML 文件“data.xml”，其中包含大约 80 辆汽车的详细信息（每辆汽车有 4 个子节点）。通过 Jquery 解析时，整个结果都出现在一个页面中，导致页面非常大。脚本代码为：

```
$(document).ready(function() {
    $('#car').click(function() {
        $.get('data.xml',function(data){
            $('#content').empty();
            $(data).find('car').each(function(){
                var $car = $(this);
                var html = '<div class="data">';                      
                html += '<b>' + $car.attr('company') + '</b>';
                html += '<div class="product">' + $car.find('product').text() + '</div>';
                html += '<div class="color">' + $car.find('color').text() + '</div>';
                html += '<div class="type">' + $car.find('type').text() + '</div>';
                $('#content').append(html);
            });                        
        });
        return false;
    });
}); 
```

我需要的是只有 8 辆汽车的详细信息应该出现在该页面中，并通过单击“转到下一页”在后续页面中显示进一步的 8 辆详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:55:05.907

最干净的选择是每 8 辆车执行一次 AJAX 调用 - 因为您不想在一次调用中加载太多数据。

尽管如此

*   将您的 XML（或对象）存储在可以重复使用的地方
*   使用计数器变量等，指示第一个可见项目的索引
*   创建一个显示项目 n 直到 n+8 的更新方法（参见下面的 URL）
*   此函数应清除 #content DIV 的内容（因为您正在使用 append 方法）

[使用 jQuery 选择前“n”个项目](https://stackoverflow.com/questions/1865552/selecting-the-first-n-items-with-jquery)

..如果您真的想成为专业人士，请使用[knockoutjs](http://knockoutjs.com/)玩一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:01:26.810

您可以设置一个变量来定义您希望在每个页面中显示多少条记录，以及一个包含您当前所在页面的记录。然后使用 jQuery 的 slice() 方法只选择你想要的记录。然后，当单击下一个按钮时，增加页码并再次调用您的函数。您可能应该对此进行优化以不每次都调用重新加载 XML，并添加一些检查以确保您不会超过可用记录的总数，但您应该了解情况。

```
// init your variables
var currentPageIndex = 0;
var recordsPerPage = 8;

function showRecords() {
    // load your xml
    var currentRecordIndex = currentPageIndex * recordsPerPage;
    $(data).find('car').slice(currentRecordIndex, currentRecordIndex + recordsPerPage).each(function(){
        // do your processing 
    });                        
}

$("#next").click(function(e) {
    e.preventDefault();
    currentPageIndex++;
    showRecords();
}); 
```

# php - 自定义注释与 jms/SecurityExtraBundle 中的 @secure 冲突

> ID：12040687
> 
> 赞同：2
> 
> 时间：2012-08-20T15:34:45.563
> 
> 标签：php, symfony, annotations

我编写了一个注释，当 AJAX 请求 (XMLHttpRequest) 未调用该操作时，该注释将引发 AccesDeniedException。

它可以工作，但是当我想使用 JMS/SecurityExtraBundle 中的 @Secure(roles="A") 注释时，它不起作用，就像我省略了我的自定义异常一样。

控制器

```
namespace Mendrock\Bundle\SagaBundle\Controller;

use JMS\SecurityExtraBundle\Annotation\Secure;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Mendrock\Bundle\SagaBundle\Entity\Saison;
use Mendrock\Bundle\SagaBundle\Form\SaisonType;
use Mendrock\Bundle\ExtraBundle\Annotation\XmlHttpRequest;

/**
* @Route("/episodesAjax")
*/
class EpisodeController extends Controller {
    /**
     * @XmlHttpRequest()
     * @Secure(roles="ROLE_SUPER_ADMIN")
     * 
     * @Route("/saisonAdd", options={"expose"=true})
     * @Template()
     */
    public function saisonAddAction() {
        $entity = new Saison();
        $form = $this->createForm(new SaisonType(), $entity);

        return array(
            'entity' => $entity,
            'form' => $form->createView(),
        );
    } 
```

注解

```
namespace Mendrock\Bundle\ExtraBundle\Annotation;

use Symfony\Component\HttpKernel\Exception\AccessDeniedHttpException;

/**
 * @Annotation
 */
class XmlHttpRequest 
{
    public $message = 'The action could be an XMLHttpRequest call.';

    public function checkRequest($event){
        if (!$event->getRequest()->isXmlHttpRequest()) {
            throw new AccessDeniedHttpException($this->message);
        }
    }

    public function execute($event){
        $this->checkRequest($event);
    }
} 
```

听众

```
namespace Mendrock\Bundle\ExtraBundle\Listener;

use Doctrine\Common\Annotations\Reader;
use Symfony\Component\HttpKernel\Event\FilterControllerEvent;
use Mendrock\Bundle\ExtraBundle\Annotation\XmlHttpRequest;

class EventListener {

    private $reader;

    public function __construct(Reader $reader) {
        $this->reader = $reader;
    }

    /**
     * This event will fire during any controller call
     */
    public function onKernelController(FilterControllerEvent $event) {

        if (!is_array($controller = $event->getController())) { 
            return;
        }
        $method = new \ReflectionMethod($controller[0], $controller[1]);

        foreach ($this->reader->getMethodAnnotations($method) as $configuration) {
            if ($configuration instanceof XmlHttpRequest) {
                $configuration->execute($event);
            }
        }
    }
} 
```

知道为什么我不能同时使用`@Secure(...)`吗`@XMLHttpRequest`？

编辑：

服务.yml

```
services:
    annotations.xmlhttprequest:
        class: Mendrock\Bundle\ExtraBundle\Listener\EventListener
        tags: [{name: kernel.event_listener, event: kernel.controller, method: onKernelController}]
        arguments: [@annotation_reader] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T16:21:06.817

当我想添加自己的注释时遇到了同样的问题。使用的解决方案`ClassUtils::getUserClass`不起作用（使用 Symfony 2.3，如果这有所作为）。

因为我们只使用`@Secure`来自 JMS\SecurityExtraBundle 的注解，所以我让我们的代码库改用[LswSecureControllerBundle](https://github.com/LeaseWeb/LswSecureControllerBundle "LswSecureControllerBundle")。

此捆绑包仅提供`@Secure`，并且不会对您的控制器进行巫术技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T05:46:01.430

升级到 Symfony 2.1 后我遇到了同样的问题。

根据我的调查，问题是 JMS SecurityExtraBundle 会在您使用其中一个注释时生成代理类。生成的代理类的问题是自定义注释没有被代理，这就是注释似乎丢失的原因。

根据作者的[解决方案](https://github.com/schmittjoh/JMSSecurityExtraBundle/issues/95 "解决方案")是使用 AOP（JMSAopBundle 提供的工具）重写或使用`ClassUtils::getUserClass`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T18:07:48.740

感谢 suihock 指出这一点：

```
$class = \CG\Core\ClassUtils::getUserClass($controller[0]);
$method = new \ReflectionMethod($class, $controller[1]); 
```

# python - 使用 FieldList 和 FormField

> ID：12040688
> 
> 赞同：17
> 
> 时间：2012-08-20T15:34:48.120
> 
> 标签：python, wtforms

我们有以下表格，我们正在尝试`GroupRoleForms`为每个组创建列表。

```
class FullNameMixIn():
    full_name = TextField(
        'Full name', [
            validators.required(message=u"Full name is required")
        ])

class GroupRoleForm(Form):
    group =BooleanField('Group', default=False)
    role = SelectField(
            'Role',choices=[
            ("none", "----------"), 
            ('approver', 'Approver'),
            ('editor', 'Editor')
            ])

class AdminEditUserForm(Form, FullNameMixIn):
    group_roles = FieldList(FormField(GroupRoleForm)) 
```

我们如何创建一个`AdminEditUserForm`包含预填充列表的实例`GroupRoleForms`？

目前我们正在尝试这样做：

```
form = forms.AdminEditUserForm()
for group in  company.groups:
    group_role_form = forms.GroupRoleForm()
    group_role_form.group.label =  group.name
    group_role_form.group.name = group.id
    form.group_roles.append_entry(group_role_form)
return dict(edit_user_form = form ) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-30T16:42:22.633

## 解释

在您的`data`或`formdata`关键字参数中，`Form`您只需要一个与包含可迭代的子字段`key`匹配的字典。该可迭代需求中的项目又具有与的字段列表`FieldList`匹配的带有属性的项目。`FieldList`

如果您遵循下面的示例，我会得到预先填充好的嵌套表单。

## 编码

```
from collections import namedtuple

from wtforms import validators
from wtforms import Form
from wtforms import SelectField
from wtforms import BooleanField
from wtforms import TextField
from wtforms import FieldList
from wtforms import FormField

from webob.multidict import MultiDict

# OP's Code
class FullNameMixIn():
    full_name = TextField(
        'Full name', [
            validators.required(message=u"Full name is required")
        ])

class GroupRoleForm(Form):
    group =BooleanField('Group', default=False)
    role = SelectField(
            'Role',choices=[
            ("none", "----------"), 
            ('approver', 'Approver'),
            ('editor', 'Editor')
            ])

class AdminEditUserForm(Form, FullNameMixIn):
    group_roles = FieldList(FormField(GroupRoleForm))

# create some groups
Group = namedtuple('Group', ['group', 'role'])
g1 = Group('group-1', 'none')
g2 = Group('group-2', 'none')

# drop them in a dictionary 
data_in={'group_roles': [g1, g2]}

# Build form 
test_form = AdminEditUserForm(data=MultiDict(data_in))

# test print
print test_form.group_roles() 
```

## 呈现的 HTML（截断）

```
<ul id="group_roles">
   <li>
      <label for="group_roles-0">Group Roles-0</label> 
      <table id="group_roles-0">
         <tr>
            <th><label for="gr
               oup_roles-0-group">Group</label></th>
            <td><input checked id="group_roles-0-group" name="group_roles-0-group" type="checkbox" value="y"><
               /td>
         </tr>
         <tr>
            <th><label for="group_roles-0-role">Role</label></th>
            <td>
               <select id="group_roles-0-role" name="group_roles-0-role">
                  <option
                     selected value="none">----------</option>
                  <option value="approver">Approver</option>
                  <option value="editor">Editor</option>
               </select>
            </td
               >
         </tr>
      </table>
   </li>
   <li>
      <label for="group_roles-1">Group Roles-1</label> 
      <table id="group_roles-1">
         <tr>
            <th><label for="group_roles-1-gro
               up">Group</label></th>
            <td><input checked id="group_roles-1-group" name="group_roles-1-group" type="checkbox" value="y"></td>
         </tr>
         <tr>
            <t
               h>
            <label for="group_roles-1-role">Role</label></th>
            <td>
               <select id="group_roles-1-role" name="group_roles-1-role">
                  <option selected value
                     ="none">----------</option>
                  <option value="approver">Approver</option>
                  <option value="editor">Editor</option>
               </select>
            </td>
         </tr>
      </table>
      <
      /li>
</ul>

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T14:30:26.810

我不熟悉这些软件包，但我会尝试一下：

```
class AdminEditUserForm(Form, FullNameMixIn):
    def __init__(self, groups):
        super(AdminEditUserForm, self).__init__()
        self.group_roles = FieldList(FormField(GroupRoleForm))
        for group in groups:
            self.group.label = group.name
            self.group.name = group.id
            self.group_roles.append_entry(self.group)  
            # If this doesn't create a copy of the GroupRoleForm 
            # superclass in group_roles, then you need a method to do it
            self.__clear_group()

    def __clear_group(self):
        # copy GroupRoleForm object, if needed
        # delete GroupRoleForm object
        ... 
```

那么你可以这样称呼它：

```
form = forms.AdminEditUserForm(company.groups) 
```

# python - 将子目录添加到 python 命名空间

> ID：12040689
> 
> 赞同：5
> 
> 时间：2012-08-20T15:34:55.870
> 
> 标签：python

我希望能够导入一个实际上位于另一个模块的子目录中的 python 模块。

我正在开发一个带有插件的框架。因为我希望有几千个（目前已经 > 250 个）并且我不想要一个包含 > 1000 个文件的大目录，所以我将它们排序在这样的目录中，它们按名称的第一个字母分组：

```
framework\
    __init__.py
    framework.py
    tools.py
    plugins\
        __init__.py
        a\
            __init__.py
            atlas.py
            ...
        b\
            __init__.py
            binary.py
            ...
        c\
            __init__.py
            cmake.py
        ... 
```

由于我不想给其他插件的开发人员或不需要像我一样多的人带来负担，我想将每个插件放在“framework.plugins”命名空间中。这样，添加一堆私有插件的人只需将它们添加到文件夹 framework.plugins 中即可，并提供一个包含以下内容的`__init__.py`文件：

```
from pkgutil import extend_path
__path__ = extend_path(__path__, __name__) 
```

然而，目前这种设置迫使他们也使用 az 子目录。有时一个插件正在扩展另一个插件，所以现在我有一个

```
from framework.plugins.a import atlas 
```

我想拥有

```
from framework.pugins import atlas 
```

有没有办法声明一个名称空间，其中完整的名称空间名称实际上不映射到文件夹结构？

我知道 pkg_resources 包，但这只能通过 setuptools 获得，我宁愿没有额外的依赖。

```
import pkg_resources
pkg_resources.declare_namespace(__name__) 
```

该解决方案应适用于 python 2.4-2.7.3

更新：结合提供的答案，我试图获取`__init__.py`从插件中导入的所有插件的列表。但是，由于依赖关系，这会失败。由于“c”文件夹中的插件尝试导入以“t”开头的插件，但尚未添加此插件。

```
plugins = [ x[0].find_module(x[1]).load_module(x[1]) for x in pkgutil.walk_packages([ os.path.join(framework.plugins.__path__[0], chr(y)) for y in xrange(ord('a'), ord('z') + 1) ],'framework.plugins.' ) ] 
```

我不确定我是否在正确的轨道上，或者只是让事情变得过于复杂并更好地编写我自己的 PEP302 导入器。但是，我似乎找不到任何合适的例子来说明这些应该如何工作。

更新：我尝试按照将`__getattr__`函数包装在 my 中的建议进行操作`__init__.py`，但这似乎无济于事。

```
import pkgutil
import os
import sys
plugins = [x[1] for x in pkgutil.walk_packages([ os.path.join(__path__[0], chr(y)) for y in xrange(ord('a'), ord('z') + 1) ] )]
import types
class MyWrapper(types.ModuleType):
    def __init__(self, wrapped):
            self.wrapped = wrapped

    def __getattr__(self, name):
           if name in plugins:
                   askedattr =  name[0] + '.' + name
            else:
                    askedattr = name
            attr = getattr(self.wrapped, askedattr)
            return attr

sys.modules[__name__] = MyWrapper(sys.modules[__name__]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:53:43.197

一个简单的解决方案是将您的`a`, `b`... 模块导入`plugins.__init__`，例如：

```
from a import atlas
from b import binary
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T09:19:57.800

我建议通过子类化和按需`types.ModuleType`转换`modname`来延迟加载模块；`modname[0] + '.' + modname`这应该比实现模块加载器少。

您可以查看[aipkg](http://pypi.python.org/pypi/apipkg/1.2)以了解如何执行此操作的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T16:10:14.057

Don't use the `pkgutil.extend_path` function here, it tries to do the opposite of what you're trying to accomplish:

> This will add to the package’s `__path__` all subdirectories of directories on sys.path named after the package. This is useful if one wants to distribute different parts of a single logical package as multiple directories.

Just extending `__path__` with the subdirectories in your `framework.plugins.__init__.py` works just fine.

So the solution to this problem is: put this in your `__init__.py`:

```
__path__.extend([os.path.join(__path__[0],chr(y)) for y in range(ord('a'),ord('z')+1)]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T16:26:04.237

这不是一个特别快速的解决方案（启动开销），但是让 plugins.__init__ 抓取文件系统并将每个找到的文件导入本地命名空间呢？

```
import glob
import sys

thismodule = sys.modules[__name__]

for plugin in glob.glob("?/*"):
    _temp = __import__(plugin.split("/")[0],
                   globals(),
                   locals(),
                   [plugin.split("/")[1]],
                   -1)
   setattr(thismodule, plugin.split("/")[1], getattr(_temp, plugin.split("/")[1])) 
```

# db2 - 在 DB2 中插入不可打印的字符

> ID：12040693
> 
> 赞同：1
> 
> 时间：2012-08-20T15:35:05.837
> 
> 标签：db2

如何在 DB2 表的一列中插入不可打印的字符。

例如，出于测试目的，我需要在其中一列中插入换行符和回车符。

我正在使用 DB2V9。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T05:29:16.250

要指定未映射到键盘的单字节字符集 [SBCS] 中的字符，您可以使用十六进制文字。例如，您提到 chr(10)，它会写成 X'0A' 或 x'0a'，而 chr(13) 会写成 x'0d'。两个字符加起来就是 x'0a0d'。

请参阅[DB2-LUW v9 信息中心](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp)[的 SQL 参考](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Fr0000731.htm)中的常量

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-07-12T13:29:02.813

试试这个打印“嗨，我很好”

```
try <pre tag both open and close> 
```

插入语句`"Hi<pre></pre> I am good"`

# batch-file - 批处理脚本值不变？

> ID：12040697
> 
> 赞同：0
> 
> 时间：2012-08-20T15:35:13.310
> 
> 标签：batch-file

我有一个批处理脚本，但无论出于何种原因，一旦在我的 foo 循环中设置了一个值，它就会持续存在并且不会更新。我的值：我的 for 循环中的“totalTime”和“totalHours”始终与第一次调用“converttime”时的值相同。我已经验证了我的“转换时间”函数可以准确地获取正确的值，但我不确定如何在我的 for 循环中更改值。

我的代码如下所示：

```
@echo off

set duration=01:25:45

call :converttime %duration%

set /A duration=%totalHours%+%totalMins%

FOR /F "tokens=2 delims=#" %%i IN (subtitle.txt) DO (
    call :converttime %%i
    set /A totalTime=%totalMins%+%totalhours%
    echo %totalTime%
)
endlocal
goto :eof

:converttime
set mytime=%1
set hour=%mytime:~0,2%
set minute=%mytime:~3,2%
set seconds=%mytime:~6,7%

if NOT "%minute%"=="" (
    SET /A totalMins=%minute%*60000
)

if NOT "%hour%"=="~0,2" (
    set /A totalhours=%hour%*3600000    
) 
```

输出是：

4500000 4500000 4500000 4500000 4500000 4500000

什么时候应该是这样的：

2500000 3520000 1450000

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:18:17.753

我得到了它。我只需要使用“setLocal”命令。并用 ! 包围我的变量 代替 ％

我完成的代码如下所示：

```
@echo off

set duration=01:25:45
call :converttime %duration%

set /A duration=%totalHours%+%totalMins%
setlocal ENABLEDELAYEDEXPANSION 
FOR /F "tokens=2 delims=#" %%i IN (subtitle.txt) DO (
    call :converttime %%i
    set /A totalTime=!totalMins!+!totalhours!
    echo !totalTime!
)
ENDLOCAL
goto :eof

:converttime
set mytime=%1
set hour=%mytime:~0,2%
set minute=%mytime:~3,2%
set seconds=%mytime:~6,7%

if NOT "%minute%"=="" (
    SET /A totalMins=%minute%*60000
)

if NOT "%hour%"=="~0,2" (
    set /A totalhours=%hour%*3600000    
) 
```

# javascript - 使用 jQuery 在元素类上第二次单击后开始操作

> ID：12040699
> 
> 赞同：0
> 
> 时间：2012-08-20T15:35:26.610
> 
> 标签：javascript, jquery, live, addclass

我的 jquery 函数有小问题，我需要帮助。所以，我有关闭功能的按钮，但这个关闭功能必须在添加一些特殊类后启动。所以首先点击这个关闭按钮，我正在添加类`.major_list`。现在我需要在此指定类单击后关闭一些面板...它正在工作，但是当我使用 .live 功能时第一次单击后面板关闭，您可以帮助我在第二次单击并单击类后如何执行此操作`.major_list`？

这是我的代码：

```
$('.bottom_panel_button_01').click(function(){
    $(this).addClass('major_list');
});

$('.major_list').delay(300).live('click', function(){
    setTimeout(function(){
    },600).stop(true,true);
}); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:37:21.187

```
$('.bottom_panel_button_01').click(function(){        
    if ($(this).hasClass("major_list")) {
        /* close */
    } else {
        $(this).addClass('major_list');
    }
}); 
```

# python - 如何包含包含另一个模板的模板？

> ID：12040703
> 
> 赞同：3
> 
> 时间：2012-08-20T15:35:29.513
> 
> 标签：python, django

我有 index.html，它加载 project/p1.html，它加载 project/p2.html。project/p1.html 和 project/p2.html 各自加载正常，所以我知道它们可以正常工作。问题是试图将 project/p1.html 加载到 index.html 中，其中包含以下语句：

```
{% include 'project/p1.html' %} 
```

project/p1.html 有以下声明：

```
{% include 'project/p2.html' %} 
```

加载 index.html，我得到错误：

```
VariableDoesNotExist at /
Failed lookup for key [objects] in u"[{'params': {}}, {'csrf_token': <django.utils.functional.__proxy__ object at 0x7fd3dc0e2410>}, {'perms': <django.contrib.auth.context_processors.PermWrapper object at 0x7fd3dc0e2210>, 'user': <django.utils.functional.SimpleLazyObject object at 0x7fd3dc10c790>}, {},...... 
```

如果我从 project/p1.html 中删除“{% include 'project/p2.html' %}”，则 index.html 加载正常并且错误消息消失（但显然我看不到我的内容）。

我该如何解决这个问题？

编辑：继承人“project/p2.html”：

```
<table class="mytable">

{% for object in objects %}
    <tr class="my_row">
      <td>{{ object.name }}</td>
    </tr>
{% endfor %}
</table> 
```

这是views.py：

```
from models import Mytable
from django.shortcuts import render_to_response, RequestContext

def my_request(request,
    template="project/p1.html",
    page_template="project/p2.html"):
    context = {
        'objects': Mytable.objects.all().order_by('-date'),
        'page_template': page_template,
    }

    if request.is_ajax():
        template = page_template
    return render_to_response(template, context,
        context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:39:41.250

它正在寻找它不可用的变量。传入额外的上下文参数。

`{% include "name_snippet.html" with person="Jane" greeting="Hello" %}`

编辑：[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:42:44.447

在模板中包含模板不需要做任何特别的事情，但您需要确保所有模板中引用的所有变量都在模板上下文中定义。根据您要执行的操作，您可能会发现这很有帮助：[Django 模板 - 更改“包含”模板的上下文](https://stackoverflow.com/questions/2111555/django-templates-changing-context-for-an-include-template)

# asp.net-mvc - 使用 ProgressMessageHandler 类的带有进度条的 webapi mvc4 文件上传

> ID：12040706
> 
> 赞同：1
> 
> 时间：2012-08-20T15:35:43.277
> 
> 标签：asp.net-mvc, file-upload, asp.net-mvc-4

[http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)展示了如何上传文件。但是，我希望有人向我展示代码示例，我可以在其中使用 ProgressMessageHandler 类显示文件上传的进度。到目前为止，我能够找到在 WPF 或控制台应用程序中使用的类的示例，但我想直接在 MVC 控制器方法或 WebAPI 方法上使用它，并将上传进度显示到 JQuery UI 进度条。有人可以发布如何完成的示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:56:04.663

所以你想通过跟踪服务器上的*接收进度来显示客户端的**发送*进度？请记住，该类是**服务器端**代码。*`ProgressMessageHandler`*

 ***为了执行您的建议，每次服务器收到数据包时，都需要将进度详细信息发送回客户端。但是为了让网络浏览器*接收*任何数据，它必须首先请求它。所以浏览器必须上传文件，*同时*向服务器询问进度更新？

我认为你把这一切都搞反了。如果您想在 Web 浏览器中显示文件上传进度，则需要查看*浏览器*技术。就像 HTML5 上传（有很多使用 HTML5 跟踪文件上传进度的例子）。或者，获得大量里程的 HTML5 之前的选项之一是 Shockwave Flash 插件。例如，GMail 确实，或者至少确实使用了 Shockwave Flash 插件来报告附件上传的进度。***

# c# - 使用格式化（断线等）在 SQL 中存储文本

> ID：12040716
> 
> 赞同：0
> 
> 时间：2012-08-20T15:36:27.460
> 
> 标签：c#, sql, forms, text-formatting

我目前有

```
<textarea id="Commentary" rows="5" cols="40" runat="server"></textarea> 
```

那么在活动中

```
insertCommand.Parameters["@Commentary"].Value = "<pre>" + Commentary.Value + "</pre>"; 
```

如果我在 HTML 输入框中输入，例如

*   新线 1
*   新线 2
*   新线 3

它将其放入 SQL 字段中

```
- 新线 1 - 新线 2 - 新线 3
```

我如何保留换行符之类的东西？我将在表格中显示数据，所以我想保留诸如换行之类的东西。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:42:28.227

它不会更改格式。所有必需的符号都在那里。但是，如果您在 MS Sql Server Management Studio 中查看它，它不会显示格式。同时，您应该能够稍后从数据库中选择它并放在您的页面上。并且格式将被保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:51:01.420

除此之外，您还可能遇到 html 编码问题。
所以你可能想检查`HttpUtility.HtmlEncode`课程。
虽然这不会对空格进行编码，但您可以在编码之上执行简单的 String.Replace，如下所示：

```
HttpUtility.HtmlEncode(Commentary.Value).Replace("\n", "<br/>") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:43:03.263

你可以使用这个代码

```
var reader = new StringReader(Commentary.Text);

string line;
while(null != (line = reader.ReadLine()) 
{
 ...
} 
```

# css - 如何组合 2 个 SASS 函数，因为它们只是使用不同的计算来做几乎相同的事情？

> ID：12040718
> 
> 赞同：0
> 
> 时间：2012-08-20T15:36:32.107
> 
> 标签：css, sass

我想知道是否有人可以建议我如何组合下面的 SASS 函数，基本上它们做同样的事情，但一个专门用于 IE，所以有 2 个是浪费。我尝试使用 if ( $property == 'ie' ) 等附加参数添加 if..else 语句，但没有成功。

职能：

```
// To use width, margin, padding...
@function percentageWidth( $elementWidth, $containerWidth ){
  @return $elementWidth/$containerWidth * 100%;
}

// To use *width ie6/7 workarounds
@function iePercentageWidth( $elementWidth, $containerWidth ){
  @return $elementWidth/$containerWidth - 0.5/$containerWidth * 100%;
} 
```

当前的 CSS：

```
width: percentageWidth( 214,945 );
*width: iePercentageWidth( 214,945 ); 
```

我还想在以下方面使用此功能：

```
margin: percentageWidth( 23,945 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:08:41.737

这是可用于创建一对属性的通用 mixin：

```
@mixin ieprop($name, $elementWidth, $containerWidth) {
   #{$name}: percentageWidth($elementWidth, $containerWidth);
   *#{$name}: iePercentageWidth($elementWidth, $containerWidth);
} 
```

您将属性名称作为第一个参数传递，如下所示：

```
.cls {
  @include ieprop('width', 214, 945);
  @include ieprop('margin', 23, 945);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:08:25.027

这是你需要的吗？

```
@mixin twoWidths($x, $y){
  width: percentageWidth($x, $y);
  *width: iePercentageWidth($x, $y);
} 
```

然后在您的样式表中，您可以这样称呼它：

```
@include twoWidths(500,700); 
```

# c# - 显示集合的子集合的特定元素

> ID：12040719
> 
> 赞同：0
> 
> 时间：2012-08-20T15:36:35.493
> 
> 标签：c#, linq

我有一个 List 集合，其中包含一个 List 子集合作为其中的属性，并且我想根据某些属性的值过滤掉该子集合中的项目。

为简化起见，我将调用主集合 THING 和子集合 SUBTHING。它们是不同的类型。THINGS 可以有 1 到多个 SUBTHINGS。SUBTHING 有 2 个我想过滤的属性，PROP1 应该等于 1（它可以等于 1、2、3），PROP2 不应该是 NULL（它可以包含一个字符串）。

因此，当我使用像下面这样的查询时，它似乎给了我想要的东西（尽管我不确定 All() 是否符合我的预期）：

```
search = from c in search
where c.SUBTHING.All(s=>s.PROP1==1)
select c; 
```

然后当我添加其他属性时我会怀疑：

```
search = from c in search
where c.SUBTHING.All(s=>s.PROP1==1 && s.PROP2 != NULL)
select c; 
```

我得到了 PROP2 为 Null 的东西。

当我切换到 Any() 时，我失去了对 SUBTHING 的所有过滤，它显示了 PROP1 = 1、2、3 以及 PROP2 为 NULL 而不是 NULL 的 SUBTHINGS。

我想要得到的是一个列出所有 THING ID 的集合，然后列出所有 SUBTHINGS 的名称，有点像这样：

```
THING.ID
     SUBTHING.Name
     SUBTHING.Name

THING.ID
     SUBTHING.Name
     SUBTHING.Name 
```

由于 THING 和 SUBTHING 是两种不同的类型，这是否也可以在使用 LINQ 过滤 THINGS 时过滤 SUBTHINGS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:42:31.283

尝试这样的事情：

```
search = 
    from c in search 
    where c.SUBTHING.All(s=>s.PROP1==1 && s.PROP2 != NULL) 
    select new {
         ThingId = c.ThingID,
         Something = c.SomeThing.Select(x=>x.Name)
     }; 
```

要对子项应用过滤器，请尝试：

```
from product in products
where product.productid == 1
from image in product.productimages
where image.ismainimage
select image.imagename 
```

来自：[101 个 linq 查询](http://msdn.microsoft.com/en-us/vcsharp/aa336746.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:44:20.473

一种方法是使用`Enumerable.Where`匿名类型：

```
var result = from thing in search
         from subthing in thing.subthings
         where subthing.prop1 == 1 && subthing.prop2 != null
         select new {ID = thing.ID, Name = subthing.Name};

foreach(var x in result)
{
    Console.WriteLine("ID={0} Name{1}", x.ID, x.Name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:45:32.063

您在查询父实体 ( `THING`) 时需要一个投影，但在结果集中您只想拥有它的一个子集`SUBTHINGS`。

您可以通过以下方式进行操作：

```
class Thing
{
    Thing(Thing original, IEnumerable<Subthing> subthings)
    {
        // Initialize based on original and set the collection
        //
        ...
    }
} 
```

然后像这样运行查询：

```
var filtered = from c in search
               select new Thing(c, c.Subthings.Where(x => x.PROP1 == 1 && x.PROP2 != null)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T17:39:39.770

我不确定这些答案中的任何一个是否真的能满足您的需求（尽管它们很接近）。据我了解，您需要一个`THING`s 列表，其中至少 1`SUBTHING`具有您感兴趣的值（在本例中为`Prop1 == 1`和`Prop2 != null`）。这里有几个选项，只取决于你是从一个角度`THING`还是一个`SUBTHING`角度工作。

**选项1：`THING`接近。**

您正在查看任何`THING`与`SUBTHING`您的情况有关的内容。所以：

```
var result = from thing in search
             where thing.Subthings.Any(tr => tr.Prop1 == 1 && tr.Prop2 != null)
             select new { ID = thing.ID, Names = thing.Subthings.Where(tr => tr.Prop1 == 1 && tr.Prop2 != null) }; 
```

**选项2：`SUBTHING`接近。**

您正在查看 ALL`SUBTHING`并找到满足条件的那些，然后按 ID 分组。

```
var result = from thing in search
             from sub in thing.Subthings
             where sub.Prop1 == 1 && sub.Prop2 != null
             group sub by thing.id into sg
             select new { ID = sg.Key, Names = sg.Select(tr => tr.Name) }; 
```

我更喜欢这种方法，但仍有改进的余地。我喜欢这个的原因是因为你`SUBTHING`首先找到了 s，然后它才会拉出`THING`与之关联的那个（而不是首先必须查找是否有`SUBTHING`匹配条件，然后选择它）。

**选项 3：混合方法。**

这两者都有一点。无论哪种方式，我们都会从`SUBTHING`s 中选择，所以还不如只执行选择。然后，如果任何投影的子集合有任何元素，那么我们返回我们`THING`的`Names`.

```
var result = from thing in search
             let names = thing.Subthings
                              .Where(sub => sub.Prop1 == 1 && sub.Prop2 != null)
                              .Select(sub => sub.Name)
             where names.Any()
             select new { ID = thing.ID, Names = names }; 
```

在我看来，最干净的选择。`Any`如果集合中有任何项目，则不带任何参数的集合上的扩展方法将返回 true。非常适合我们的情况。

希望对您有所帮助，让我们知道您的想法。

# c# - 将文件路径传递给批处理文件

> ID：12040725
> 
> 赞同：2
> 
> 时间：2012-08-20T15:36:46.913
> 
> 标签：c#, batch-file, xcopy

我正在调用一个 .bat 文件来 XCOPY 一个文件夹。无论如何将文件名和目标传递到批处理文件中？

我的 .bat 文件

```
XCOPY %1 %2
pause 
```

我用来调用 .bat 的代码是这样的：

```
process.Start(@"C:\Documents and Settings\cmolloy\My Documents\Test\XCOPY.bat"); 
```

我试过这段代码

```
process.Start(@"C:\Documents and Settings\cmolloy\My Documents\Test\XCOPY.bat" , copyfrom copyto); 
```

正如我之前使用它来关闭我的comp，但它不适用于这个。

谢谢

**更新**

```
process.StartInfo.FileName = @"C:\Documents and Settings\cmolloy\My Documents\Test\XCOPY.bat";
process.StartInfo.Arguments = copyFrom.ToString();
process.StartInfo.Arguments = copyTo.ToString();
process.Start(); 
```

那是我正在使用的代码，但它不起作用。我从 XCOPY 屏幕得到这个： ![在此处输入图像描述](../Images/b99656beabc06c6a9e19b39c99e72507.png)

因此，它看起来不像采用完整的文件路径。copyto 和 copyfrom 是包含路径的变量。

**更新**

使用阿兹瑞的代码：

```
String batch = @"C:\Documents and Settings\cmolloy\My Documents\Test\XCOPY.bat";
String src = @"C:\Tricky File Path\Is Here\test1.txt";
String dst = @"C:\And\Goes Here\test2.txt";  
String batchCmd = String.Format("\"{0}\" \"{1}\" \"{2}\"", batch, src, dst);

process.StartInfo.FileName = "cmd.exe";
process.StartInfo.Arguments = String.Format("/k \"echo {0}\"", batchCmd);

process.Start(); 
```

我得到这个输出： ![在此处输入图像描述](../Images/6cb3ec0959b565d778a6fc0aaf7660aa.png)

这实际上并没有复制文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:38:05.360

你可以使用`Arguments`财产

```
Process proce = new Process();
proce.StartInfo.FileName = "yourfile.exe";
proce.StartInfo.Arguments =  ..;
proce.Start(); 
```

文章：[http ://www.c-sharpcorner.com/UploadFile/jawedmd/xcopy-using-C-Sharp-to-copy-filesfolders/](http://www.c-sharpcorner.com/UploadFile/jawedmd/xcopy-using-C-Sharp-to-copy-filesfolders/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:39:42.490

换成这个，

```
var process = new Process();
process.StartInfo.FileName = @"C:\Documents and Settings\cmolloy\My Documents\Test\XCOPY.bat";
process.StartInfo.Arguments = // my arguments
process.Start(); 
```

更好的选择是用等效的调用替换您的 XCOPY.BAT 文件正在执行的`System.IO`操作（然后您会得到错误处理）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:43:26.457

您正在启动一个批处理文件 - 您需要使用`cmd.exe`

`"`用（如果参数有空格，则需要）包围每个参数。

```
 String batch = @"C:\Documents and Settings\cmolloy\My Documents\Test\XCOPY.bat";
  String src = @"C:\Tricky File Path\Is Here\test1.txt";
  String dst = @"C:\And\Goes Here\test2.txt";  
  String batchCmd = String.Format("\"{0}\" \"{1}\" \"{2}\"", batch, src, dst);

  process.StartInfo.FileName = "cmd.exe";
  process.StartInfo.Arguments = String.Format("/k \"{0}\"", batchCmd);

  process.Start(); 
```

如果您的批处理文件实际上是 xcopies 而没有其他内容，那么您只需替换`cmd.exe`并`xcopy.exe`删除`/k + batch`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:39:52.390

传递参数？

[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)

# ios - 通过没有 TLS 或类似的套接字与 localhost 通信是否安全？

> ID：12040731
> 
> 赞同：0
> 
> 时间：2012-08-20T15:37:05.603
> 
> 标签：ios, macos, security, sockets, distributed-objects

我正在编写一个通过套接字连接实现分布式对象系统的库。我要求用户至少在通过网络通信时对发送的任何消息进行签名，否则攻击者可能会冒充参与者之一并远程调用另一个参与者的方法，这将是一件坏事。

这个库的主要用途是网络通信。但是，我想让一个“hello world”示例尽可能简单地在本地运行，而不会损害某人的机器。假设从连接到 localhost 的传入数据确实来自 localhost 而没有以其他方式保护它是否合理？还有其他原因可能不安全吗？

如果它是相关的，我正在使用 OSX/iOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:20:02.533

除非您在机器上启用了远程登录，否则环回连接是安全的。用户可以轻松地使用 重定向连接[`ssh(1)`](http://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man1/ssh.1.html)。

通过不验证来自环回的消息来使代码复杂化是否是一个好主意，这是您必须问自己的另一个问题。

# javascript - jQuery 捕获“RangeError：超出最大调用堆栈大小”

> ID：12040736
> 
> 赞同：2
> 
> 时间：2012-08-20T15:37:18.993
> 
> 标签：javascript, jquery, google-chrome, chromium

我有一个页面，在 FF 和 IE 中运行良好。然而，铬抛出

```
jquery.min.js:2    Uncaught RangeError: Maximum call stack size exceeded 
```

这是因为试图处理大量数据（请参阅[Chrome RangeError：使用 jQuery $.map 时超出最大调用堆栈大小](https://stackoverflow.com/q/11783575/910868)）。

是否有可能`catch`出现错误，使整个页面的javascript不会挂起？还是我必须减少 chrome 的数据量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:43:18.160

JavaScript 不支持尾递归。您可能正在从一个函数调用一个函数，直到它发生故障。（请发布一些代码以显示您在做什么）。

在“迭代”之间使用**setTimeout 。**这样您就不会阻塞 UI 或炸毁堆栈。

# python - 如何在 Python 中弹出（）一个列表 n 次？

> ID：12040744
> 
> 赞同：6
> 
> 时间：2012-08-20T15:37:41.517
> 
> 标签：python, list

我有一个照片选择器功能，可以计算给定目录中的文件数并列出它们。我希望它只返回 5 个图像 URL。这是功能：

```
from os import listdir
from os.path import join, isfile

def choose_photos(account):
    photos = []
    # photos dir
    pd = join('C:\omg\photos', account)
    # of photos
    nop = len([name for name in listdir(location) if isfile(name)]) - 1
    # list of photos
    pl = list(range(0, nop))
    if len(pl) > 5:
        extra = len(pl) - 5
        # How can I pop extra times, so I end up with a list of 5 numbers
    shuffle(pl)
    for p in pl:
        photos.append(join('C:\omg\photos', account, str(p) + '.jpg'))
    return photos 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T15:42:23.047

我会继续发布几个答案。获取一些列表的最简单方法是使用`slice`符号：

```
pl = pl[:5] # get the first five elements. 
```

如果您真的想从列表中弹出，这可行：

```
while len(pl) > 5:
  pl.pop() 
```

如果您从该列表中随机选择选项，这可能是最有效的：

```
import random
random.sample(range(10), 3) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:40:56.630

由于这是一个列表，您可以通过切片获得最后五个元素：

```
last_photos = photos[5:] 
```

这将返回一个浅拷贝，因此任何列表中的任何编辑都将反映在另一个列表中。如果你不想要这种行为，你应该先做一个深拷贝。

```
import copy
last_photos = copy.deepcopy(photos)[5:] 
```

编辑：

当然应该是 [5:] 而不是 [:-5] 但如果你真的想“弹出”它 5 次，这意味着你想要没有最后 5 个元素的列表......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-04T15:50:03.517

在大多数语言中，pop() 从集合中移除并返回最后一个元素。所以要同时删除和返回 n 个元素，怎么样：

```
def getPhotos(num):
    return [pl.pop() for _ in range(0,num)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-01T09:39:38.567

快速简单 -

```
a = list("test string")
print(a[5:])#['s', 't', 'r', 'i', 'n', 'g']
a[:5] = []
print(a)#['s', 't', 'r', 'i', 'n', 'g'] 
```

# ios - 连接到 MFI 硬件时，iOS 设备可以检测或获取哪些硬件属性？

> ID：12040756
> 
> 赞同：9
> 
> 时间：2012-08-20T15:38:07.667
> 
> 标签：ios, mfi, external-accessory

我正在为一个项目处理外部附件和 MFI 并且有这个问题：

将 iOS 设备连接到 MFI 硬件后，可以识别哪些 3rd 方硬件属性（如果有）？具体来说，我正在寻找一种通用的方法来确定设备类或功能，而不必检查特定的制造商和设备名称，类似于 Android 可以做到的方式（见下文）。这可能吗？

[http://developer.android.com/reference/android/bluetooth/BluetoothClass.Device.html](http://developer.android.com/reference/android/bluetooth/BluetoothClass.Device.html)

最终目标：连接到音频基座时切换布尔值；忽略其他事件。我不确定 iOS 的粒度有多细。iOS 可以区分 [音频底座](http://www.ihomeaudio.com/iA91BZ/) 和[Golf Putter App Cradle](http://store.apple.com/us/product/H6926B/A?fnode=45&p=1)吗？MFi 是否允许深入了解设备的功能？

我的目标是 iOS 4.2+。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T07:18:35.313

您可以请求按`EAAccessoryManager`类（通过`registerForLocalNotifications`方法）获取通知。为此，您需要将其添加`ExternalAccessory.framework`到您的项目中。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_accessoryDidDisconnect:) name:EAAccessoryDidDisconnectNotification object:nil];
[[EAAccessoryManager sharedAccessoryManager] registerForLocalNotifications]; 
```

添加硬件后，您会收到一条通知`EAAccessoryKey`，然后可以使用该通知`EAAccessory`从附件管理器中获取

```
- (void)_accessoryDidConnect:(NSNotification *)notification {
      EAAccessory *accessory = [[notification userInfo] objectForKey:EAAccessoryKey]; 
```

该附件具有许多属性，有助于识别已连接的硬件类型：

```
NSString* name  
NSString* manufacturer  
NSString* modelNumber  
NSString* serialNumber  
NSString* firmwareRevision  
NSString* hardwareRevision  
NSArray* protocolStrings 
```

我不知道您的音频坞站在这里提供了什么，但应该很容易尝试并希望它对所有设备都是一致的 :-)

如果您对特定设备不感兴趣，但对一类设备（具有特定行为）感兴趣，`protocolStrings`应该会有用。该数组由命名协议的字符串组成（在行为意义上，而不是在 ObjectiveC 意义上）。名称被格式化为反向 DNS 字符串 (com.mycompany.myprotocol)。

如果您在`UISupportedExternalAccessoryProtocols`应用文件的部分（类型：字符串数组）中提供一个或多个此类协议名称，`Info.plist`则如果连接了正确的设备，您的应用将启动。

# c++ - c++ 11 - 实现 Promise 的示例程序不起作用

> ID：12040763
> 
> 赞同：1
> 
> 时间：2012-08-20T15:38:32.110
> 
> 标签：c++, multithreading, c++11, promise

我正在阅读 Anthony Williams 的 C++ concurrency in action。我试图运行一个实现 std::promise 的示例程序，但它给出了一个错误。请让我知道是否有人可以提供帮助。谢谢。

代码 ：-

```
 #include <iostream>
    #include <future>
    #include <thread>

    using namespace std;

    int myValue(int i,promise<int> intPromise)
    {
        cout<<"In myValue()"<<endl;
        intPromise.set_value(i);
    }

    int main()
    {
        cout<<"In main()"<<endl;
        promise<int> myPromise;
        future<int> result=myPromise.get_future();
        thread myThread(myValue,10,move(myPromise));
        cout<<"Value : "<<result.get()<<endl;
    } 
```

我在编译期间没有收到任何错误，但是在运行此程序时出现以下错误。

没有活动异常的终止被中止（核心转储）

虽然我得到了输出，但我也得到了这个错误。我在 Fedora 17 上使用 g++ 4.7.0。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:55:15.063

看起来主线程之前已经完成了`myThread`。为了阻止主线程，您应该使用`std::thread::join()`.

像这样：

```
#include <iostream>
#include <future>
#include <thread>

using namespace std;

void myValue(int i, promise<int> intPromise)
{
        cout << "In myValue()" << endl;
        intPromise.set_value(i);
}

int main()
{
        promise<int> myPromise;
        future<int> result = myPromise.get_future();

        thread myThread(myValue, 10, move(myPromise));
        myThread.join();

        cout << "Value : " << result.get() << endl;
} 
```

# java - 来自接收到的字符串的 android UTF8 编码

> ID：12040765
> 
> 赞同：11
> 
> 时间：2012-08-20T15:38:34.713
> 
> 标签：java, android

我收到一个未正确编码的字符串，例如`mystring%201`，必须在哪里`mystring 1`。如何替换所有可以解释为 UTF8 的字符？我阅读了很多帖子，但没有完整的解决方案。请注意，字符串已经编码错误，我不是在询问如何编码 char 序列。几天前我向 iOS 询问了同样的问题，并使用`stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding`. 谢谢你。

[来自nsstring的ios UTF8编码](https://stackoverflow.com/questions/11786075/ios-utf8-encoding-from-nsstring)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-20T15:46:57.650

您可以使用[URLDecoder.decode()](http://developer.android.com/reference/java/net/URLDecoder.html)函数，如下所示：

```
String s = URLDecoder.decode(myString, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T15:44:18.720

看起来您的字符串是部分 URL 编码的，所以......这个怎么样：

```
try {
 System.out.println(URLDecoder.decode("mystring%201", "UTF-8"));
} catch(UnsupportedEncodingException e) {
 e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-13T15:09:05.103

> 我收到一个未正确编码的字符串，例如“mystring%201

那么这个字符串已经是`encoded`，你必须解码：

```
String sDecoded = URLDecoder.decode("mystring%201", "UTF-8"); 
```

所以 now`sDecoded`必须有 " `mystring 1`" 的值。

### 字符串的“编码”：

```
String sEncoded = URLEncoder.encode("mystring 1", "UTF-8"); 
```

`sEncoded`必须具有“ `mystring%201`”的值

# javascript - 如何在javascript中将String变量转换为int？

> ID：12040769
> 
> 赞同：4
> 
> 时间：2012-08-20T15:38:40.657
> 
> 标签：javascript, string, int, type-conversion, numeric

将 String 变量的值转换为 int/numeric 变量的正确方法是什么？为什么`bcInt`仍然是字符串，为什么`isNaN`返回`true`？

```
bc=localStorage.getItem('bc');
var bcInt=parseInt(bc,10);
var bcInt2=1;
console.log("bc------------>" +bc +" isNaN:" +isNaN(bc)); //isNaN returns true
console.log("bcInt------------>" +bcInt +" isNaN:" +isNaN(bcInt)); //isNaN returns true

bcInt2// isNaN returns false 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T15:41:29.427

`parseInt`仅当您将数字作为第一个字符传递时才返回一个数字。

例子：

```
parseInt( 'a', 10 ); // NaN
parseInt( 'a10', 10 ); // NaN
parseInt( '10a', 10 ); // 10
parseInt( '', 10 ); // NaN
parseInt( '10', 10 ); // 10 
```

`+`此外，如果您想获取只有数字的字符串，您可以查看运算符。

```
+'a'; // NaN
+'a10'; // NaN
+'10a'; // NaN
+''; // 0, that's tricky
+'10'; // 10 
```

编辑：根据您的评论，我已经测试过`parseInt`：

```
parseInt( '08-20 19:41:02.880', 10 ); // 8 
```

你做错了其他事情。`parseInt`返回所有内容，直到它不是数字。如果第一个不是数字（或找不到任何数字），则返回`NaN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:50:11.937

答案是我使用`localStorage.setItem('bc',JSON.stringify(bc))`它并添加了双引号，`bc`因为在这种情况下它已经是一个字符串，这就是为什么`parseInt`不起作用。值为`""1""`。

# flash - 如何访问 Google Chrome 扩展程序 webRequest 中的缓存（闪存）文件？

> ID：12040770
> 
> 赞同：2
> 
> 时间：2012-08-20T15:38:46.017
> 
> 标签：flash, google-chrome, google-chrome-extension, webrequest

我正在使用[http://developer.chrome.com/extensions/webRequest.html#event-onHeadersReceived](http://developer.chrome.com/extensions/webRequest.html#event-onHeadersReceived)来获悉任何正在加载的 Flash 文件。但是，如果 Flash 文件已经在 Google Chrome 缓存中，则它不会再出现在此侦听器中。

知道如何获得有关特定网站中请求/需要的任何 Flash 文件的通知吗？

# linq-to-sql - 使用 LinqToSQL 查询多对多关系

> ID：12040773
> 
> 赞同：0
> 
> 时间：2012-08-20T15:38:56.150
> 
> 标签：linq-to-sql, entity-framework-4.1, many-to-many

我有一个数据库设置如下（不幸的是，不允许在此处发布图表图像，因此需要描述：响应表 - 包含 RespondentID、QuestionID、ResponseOptionID ResponseProperties - 包含 ResponsePropertyID、ResponsePropertyTypeID、名称 ResponsePropertyTypes - 包含 ResponsePropertyTypeID、名称

ResponsesInProperties（多对多表）- 包含 ResponseID、ResponsePropertyID

ResponsesInProperties 表上存在多对多关系。该表当然不会在 EF 中显示。

假设我有两个响应属性类型“Country”和“Wave”以及相应的 ResponeProperties“USA”、“UK”和“Wave2011”、“Wave2012”。

现在我需要从数据库中取回美国和 Wave2012 中的所有（而不是重复的）响应。诀窍是我需要的每个响应都必须在 Wave2012 和美国。我正在尝试使用 LINQ to SQL 来实现这一点。下面是我想出的 Linq，它为我提供了正确的记录，但它们针对不同的属性出现了很多次。限制属性不会给我任何记录....

任何帮助表示赞赏！

```
 var responses = from r in db.Responses
                            from rp in r.ResponseProperties
                            select new
                            {
                                RespondentID = r.RespondentID,
                                QuestionCode = r.Question.Code,
                                ResponseOptionCode = r.ResponseOption.Code,
                                ResponseOptionCodeName = r.ResponseOption.Text,
                                ResponsePropertyName = rp.Name,
                                ResponsePropertyTypeName = rp.ResponsePropertyType.Name
                            }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:13:20.637

澄清一下，您正在尝试使用 LINQ to SQL 而不是 EF 来执行此操作，因为它们对 MM 有相当不同的模型。使用 LINQ to SQL，您必须包含中间连接表。

此时您的查询中缺少的关键是过滤器 (Where) 子句。您需要为连接的两侧指定它们以正确过滤结果。您指出，当您提供过滤器时，您不会返回任何记录。您能否使用该过滤器澄清您的问题，因为它可能有助于解决您的潜在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T22:55:44.647

您的查询无法生成唯一响应，因为您还获得了 ResponsePropertyName 和 ResponsePropertyTypeName，这将重复结果。

这个实体框架查询 -

```
from r in db.Responses
where r.ResponseProperties.Any (rp => rp.Name == "USA")
where r.ResponseProperties.Any (rp => rp.Name == "Wave2012")
select new
{
    RespondentID = r.RespondentID,
    QuestionCode = r.Question.Code,
    ResponseOptionCode = r.ResponseOption.Code,
    ResponseOptionCodeName = r.ResponseOption.Text,
}; 
```

`Response`确实在美国和 Wave2012中产生了独特的 s。生成的 sql 将显示两个`EXISTS`谓词`AND`。

# php - Joomla 模块开发 - 从存储在模块文件夹中的文件中读取/处理 JSON 数据

> ID：12040776
> 
> 赞同：1
> 
> 时间：2012-08-20T15:39:05.550
> 
> 标签：php, json, joomla, joomla2.5

我正在开发一个模块，该模块需要将 JSON 数据存储在模块文件夹内的文件中。

最初，我使用的是远程 JSON 文件的链接，并且效果很好……直到我意识到使用此方法不适用于某些服务器配置并导致[某些版本的 jquery 和 IE 出现问题](https://stackoverflow.com/q/11874617/1586079)。

这个问题的明显解决方案是在 joomla 模块中本地读取文件，但是我在提供 json 数据的 php 文件上收到 403 Forbidden 错误（见下文）。

包含 JOSN 数据的文件是一个包含以下代码的 php 文件：

```
$json = file_get_contents('https://www.googleapis.com/webfonts/....');
die($json); 
```

我正在使用 jQuery 调用 JSON 文件：

```
$.getJSON('....', function (json) {....} 
```

有人知道如何解决这个问题吗？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:44:10.497

```
$json = file_get_contents(JPATH::base() . 'modules/my_module/myfilewithjson.php');
echo $json;
exit(); 
```

如果文件不是本地文件，那么您应该使用 curl 来获取内容。

# java - postgresql：如何存储用户密码？

> ID：12040786
> 
> 赞同：9
> 
> 时间：2012-08-20T15:39:35.883
> 
> 标签：java, security, postgresql, web-applications, playframework-2.0

我正在使用带有 postgresql 的 play-framework 2.0 (java web-framework)。

1.  当今最常见的用户密码加密类型是什么？我知道MD5在过去几年中已经很丰富了。
2.  用户类中字段“密码”的正确数据类型是什么（因此，在 postgresql 数据库中）？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T15:47:57.243

您想对密码进行哈希处理，而不是对其进行加密（有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/326699/difference-between-hashing-a-password-and-encrypting-it)）。当前推荐的方法是使用自适应散列算法，例如[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)。[jBcrypt](http://www.mindrot.org/projects/jBCrypt/)是一个可靠的 Java 实现，您可以使用它。

至于 DB 类型，您可以放心地将其视为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T16:38:45.183

我将 jBcrypt 与 Play 框架内部 Crypto 一起使用（从这里得到想法：https://groups.google.com/forum/?fromgroups#!topic/play-framework/9KIUwWBjudQ[1-25]）

此外，当我为用户添加注册时，我确保密码具有一定程度的复杂性（至少 8 个最小标记、大写字母、一个数字）。等你基本上命名它？但只是想指出安全不仅仅是加密，一半的蛋糕是确保用户将使用复杂的密码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:51:57.670

您应该使用 SHA-x 算法对密码进行哈希处理。这或多或少是 MD5 的替换散列函数。

```
MessageDigest.getInstance("SHA-512").digest(toBytes(toDigest))) 
```

但要小心，在对密码进行哈希处理之前添加一个盐，以避免哈希表攻击。

DB 列应该是 varchar。长度取决于您使用的 SHA 算法版本

HIH

# jquery - IE7中的jquery innerwidth关闭

> ID：12040790
> 
> 赞同：0
> 
> 时间：2012-08-20T15:39:46.957
> 
> 标签：jquery, internet-explorer-7

我正在尝试使用 jquery.innerwidth() 获取父 div 的宽度，这对于 IE7 无法正常工作。

在这里创建小提琴[。](http://jsfiddle.net/dkindler/6SLbn/)这实际上在小提琴中看起来不错，但在 IE7 中却不是，我也不明白。

我正在使用 jquery v1.4.2

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:12:59.250

试试这个：http: [//jsfiddle.net/dan_barzilay/6SLbn/1/](http://jsfiddle.net/dan_barzilay/6SLbn/1/)

我使用 .width() 代替 .innerWidth() 并且 css 函数的参数是错误的。

# javascript - 使用“超大”jQuery 插件按比例调整全屏图像的大小

> ID：12040792
> 
> 赞同：1
> 
> 时间：2012-08-20T15:39:59.383
> 
> 标签：javascript, jquery, css, jquery-plugins

我正在使用一个名为[Supersized](http://buildinternet.com/project/supersized/)的 jQuery 插件来全屏显示图像。

您可以在此处查看示例（在主页上）： http: [//mysampleconcept.com/situs4/](http://mysampleconcept.com/situs4/)

如果您尝试缩小屏幕，您会注意到图像也会调整大小，但是它可能会缩小太多以使图像看起来很糟糕。

这里也使用了相同的插件：http: [//mysampleconcept.com/situs3/](http://mysampleconcept.com/situs3/)；但是，调整大小的方式不同，因此图像不会不成比例。

我试图比较两个站点上的插件设置，它们似乎都很相似。

我尝试`100% !important`在我的css中设置图像宽度和高度，但没有帮助。

关于如何实现相同行为的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:46:59.377

当我删除

```
#超大图片{
 宽度：100%！重要；
 高度：100%！重要；
}

```

它似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:51:38.793

虽然不是最佳解决方案，但我能够通过添加`min-width`和`min-height`超大图像来解决这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T10:35:40.150

问题出在常见的 css 中，您的图像全部基于“max-width:100%”。

如果有类似的东西，请检查您的 CSS 重置

```
img { max-width: 100%; } 
```

超大官方对文件“supersized.3.2.7.js”有解决方案： [https ://github.com/buildinternet/supersized/issues/103](https://github.com/buildinternet/supersized/issues/103)

如果您无法按照官方解决方案解决，请尝试仅在您的超大 css 中添加：

```
#supersized img { max-width: none; } 
```

这个棘手的是[http://blog.valderama.net/node/30](http://blog.valderama.net/node/30)

# node.js - 多服务器设置的开发环境 - Nodejs

> ID：12040799
> 
> 赞同：3
> 
> 时间：2012-08-20T15:40:30.110
> 
> 标签：node.js, development-environment

这是我第一次用多台服务器构建东西。我想知道是否有人可以指点我为将在多台服务器上设置的后端设置开发环境（Windows）的指南，即一个服务器用于API，一个用于另一组进程（即文件压缩）一个用于其他一切。

同样，只是想弄清楚是否可以设置一个开发环境来测试我本地机器上的系统。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:11:54.293

你几乎肯定想要运行虚拟机（在 VMWare 或 VirtualBox 上）来*真正*测试多机的东西。然而，我每天也为多台机器进行开发（我们有一系列应用服务器、一系列后台工作服务器、电子商务服务器、缓存存储和前端代理——我仍然只是在*一个*拥有所有这些的虚拟机上开发在它上面运行的东西。如果您为所有内容设置主机名和端口，则 localhost 端口 9000 和 some.server.tld 端口 8080 之间没有太大区别。实际上在一台计算机上运行所有虚拟机可能会很痛苦，无论是在系统资源和复杂性。

还有一些工具可以帮助设置具有相似或相同配置的虚拟机。看看[http://vagrantup.com/](http://vagrantup.com/)和[http://babushka.me/](http://babushka.me/)。

只是我的 0.02 美元。

# xcode - 使用 Xcode 4 创建 MacOS 服务

> ID：12040800
> 
> 赞同：3
> 
> 时间：2012-08-20T15:40:30.200
> 
> 标签：xcode, service, osx-mountain-lion

我在 MacOS Mountain Lion 上：有没有类似模板可以为 ML 编写服务？我使用 Xcode 4.4.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:47:33.043

通俗地说，该服务是一个*unix 守护进程*，即在后台执行的二进制文件。

您可以使用 Xcode 的“命令行”实用程序模板来制作这样的守护进程；你仍然需要一些方法来盯着它。在大多数情况下，您会坚持使用 launchd。查看 launchd.plist(5) 上的手册页以获取更多信息。

好的，关于“其他”服务的事情。这是 NSService 的一部分，请参阅[Info.plist](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)上的文档。您将需要创建一个“通用”Cocoa 应用程序，然后公开其服务。

[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SysServices/introduction.html#//apple_ref/doc/uid/10000101i)还有一个关于服务的通用文档。

# java - 在 Java 中测试线程安全

> ID：12040802
> 
> 赞同：8
> 
> 时间：2012-08-20T15:40:40.030
> 
> 标签：java, multithreading, thread-safety

> **可能重复：**
> [我应该如何对线程代码进行单元测试？](https://stackoverflow.com/questions/12159/how-should-i-unit-test-threaded-code)
> [测试多线程代码或确保代码是线程安全的指南](https://stackoverflow.com/questions/4444452/guidelines-for-testing-multithreaded-code-or-ensuring-that-code-is-thread-safe)

是否可以“单元测试”一个简单的类是否是线程安全的？

我的具体情况是一个简单的类，它对向量进行子集：给定一个要保留的向量位置的“白名单”和一个输入向量，它会生成一个输出向量，其中仅包含白名单中位置的值。我想编写一个单元测试（如果可能的话），以确保如果我们将来重构这个类，我们会保持它的线程安全。如果该类不再是线程安全的，则单元测试将失败。我意识到这有点模糊和定义不足。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T16:42:17.230

这正是[Java Pathfinder](http://babelfish.arc.nasa.gov/trac/jpf)的用途。它的学习曲线有点陡峭，但实际上可以使用此工具构建详尽的证明。您构建一个场景并使用 JPF 运行它，然后 JPF 探索所有可能的线程顺序以查找可能的错误。您需要在程序中构建断言以供 JPF 检查。JPF 在执行期间假定顺序一致性，但您也可以使用 Java Racefinder 插件来证明这一点。

诚然，很难建立一个适当的证明——但这是可能的。如果没有别的，JPF 可以用来帮助您根除一些您可能会错过的并发错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T16:30:02.413

线程安全是类具有或不具有的属性。线程安全可能意味着，取决于上下文，没有竞争条件，以特定顺序执行代码或其他任何东西。

测试不能证明没有错误，它只能揭示它们。在我确保多线程代码正确的（不是那么广泛的）经验中，最好的提示可能是保持代码尽可能简单和清晰，并尝试通过检查发现错误。重复运行测试不会有太大帮助。

# sql - 如何为 SQL 表中的每个项目运行插入语句？

> ID：12040803
> 
> 赞同：2
> 
> 时间：2012-08-20T15:40:41.450
> 
> 标签：sql, sql-server, tsql, cursor

我有一个表变量如下：

```
declare @countries table (countryId int) 
```

其中有 5 条记录。

我需要为列表中的每个 countryId 编写单独的插入语句，例如：

```
insert into Countries (ID) VALUES (countryId) 
```

不使用游标怎么可能？

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:41:58.907

您可以使用`insert ... select`而不是`insert ... values`：

```
insert  Countries 
        (ID) 
select  countryId 
from    @countries 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:42:23.717

```
insert into Countries (ID)
SELECT CountryId FROM @countries 
```

[http://www.sqlteam.com/article/using-select-to-insert-records](http://www.sqlteam.com/article/using-select-to-insert-records)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T15:42:39.280

您将使用一个`INSERT INTO SELECT FROM`

```
INSERT INTO Countries (ID)
SELECT countryID
FROM @countries 
```

# c# - 以编程方式控制 SQL Server Reporting Services 报表查看器

> ID：12040804
> 
> 赞同：3
> 
> 时间：2012-08-20T15:40:42.353
> 
> 标签：c#, asp.net, reporting-services

我在使用 SSRS 的 ReportViewer 控件的 ASP.NET 版本时遇到问题。

在我的 ASP.NET Web 表单文件中，我有：

```
 <rsweb:ReportViewer ID="webViewer" runat="server" Width="100%" Height="100%" 
        ProcessingMode="Remote">
        <ServerReport ReportPath="/AnalyticReports/SiteOverview" 
            ReportServerUrl="http://someserver/ssrs" />
    </rsweb:ReportViewer> 
```

正如预期的那样，这工作得很好。

但是，假设我想以编程方式更改服务器和报告路径。我该怎么做？

我试过这个：

```
webViewer.ServerReport.ReportServerUrl = new Uri("http://someserver/ssrs");
webViewer.ServerReport.ReportPath = "/AnalyticReports/SiteOverview";
webViewer.ServerReport.Refresh(); 
```

然而，这似乎并没有做任何事情。我什至尝试添加 webViewer.Reset() 但无济于事。

有人指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T07:58:22.417

我使用将获取和设置值的属性做到了这一点

```
public string ReportPathString 
{ get { return ReportViewer1.ServerReport.ReportPath; } 
  set { ReportViewer1.ServerReport.ReportPath = value; } 
}

public string ReportServerUrlString 
{ get { return ReportViewer1.ServerReport.ReportServerUrl.ToString(); } 
  set { ReportViewer1.ServerReport.ReportServerUrl = new Uri(value); } 
} 
```

同样在 page_load 时，我使用以下代码设置凭据

```
IReportServerCredentials irsc = new ReportServerCredentials("Username", "Password", "Domain"); 
```

使用的类如下

```
public class ReportServerCredentials : IReportServerCredentials
{
private string _UserName;
private string _PassWord;
private string _DomainName;

public ReportServerCredentials(string UserName, string PassWord, string DomainName)
{
    _UserName = UserName;
    _PassWord = PassWord;
    _DomainName = DomainName;
}

public System.Security.Principal.WindowsIdentity ImpersonationUser
{
    // use default identity
    get { return null; }
}

public ICredentials NetworkCredentials
{
    // use default identity
    get { return new NetworkCredential(_UserName, _PassWord, _DomainName); }
}

public bool GetFormsCredentials(out Cookie authCookie, out string user,
 out string password, out string authority)
{
    authCookie = null;
    user = password = authority = null;
    return false;
}

} 
```

编辑：刚刚看到这个话题是一岁...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:15:53.413

实际上，问题似乎出在`Page_Load`事件上。在遇到[http://msdn.microsoft.com/en-us/library/aa337091.aspx](http://msdn.microsoft.com/en-us/library/aa337091.aspx)之后，我尝试`Page_Init`了，事情似乎按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:48:09.747

你试过吗，劳埃德？

```
webViewer.ProcessingMode = Microsoft.Reporting.WebForms.ProcessingMode.Remote; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T17:19:24.077

我使用 LocalReport 似乎效果更好：

```
var reportDataSource = new ReportDataSource("DataSet1", resultSet);

ReportViewer1.LocalReport.ReportPath = Server.MapPath("/Reports/" + reportName + ".rdl");
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.LocalReport.DataSources.Add(reportDataSource);

ReportViewer1.LocalReport.Refresh(); 
```

# c# - C#：如何将数据 POST 到由早期 POST 重定向的页面？

> ID：12040805
> 
> 赞同：1
> 
> 时间：2012-08-20T15:40:44.710
> 
> 标签：c#, post, web, webrequest, webresponse

我正在使用 c# 来完成以下任务：

1.  将数据发布到页面（使用 HttpWebRequest）。
2.  获取响应（通过发布的数据重定向到另一个页面）。
3.  **将进一步的数据发布到响应页面**。

我能够完成前两个步骤，但我无法让第三步工作，因为它总是让我回到开始页面。我尝试使用 a`CookieCollection`并将 cookie 从第一个请求传输到第二个请求，但它没有解决问题。关于如何使其工作的任何想法？

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:50:25.457

您可以尝试使用 PostBackUrl

```
<asp:button id="Button2"
      text="Post value to another page" 
      postbackurl="PostBackUrlPage.aspx" 
      runat="Server">
</asp:button> 
```

# java - 我们可以使用脚本语言检查队列深度吗？

> ID：12040808
> 
> 赞同：2
> 
> 时间：2012-08-20T15:40:59.407
> 
> 标签：java, perl, bash, shell, ibm-mq

使用任何脚本检查队列深度（MQ）是否可行？[对语言没有限制]。该计划是研究非 Java 解决方案。

我确实了解使用 MQQueueManager 在 Java 中可以实现，但这需要使用客户端 API。因此检查任何替代选项或更好的做法。

[http://www.capitalware.biz/mq_code_perl_python.html](http://www.capitalware.biz/mq_code_perl_python.html)上的 InquireQueue看起来很相似[但看起来有点过时]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:48:57.983

没人再用谷歌了吗？

PyMQI，一个用于 WebSphere MQ 的开源 Python 扩展

[http://metacpan.org/pod/MQSeries::队列](http://metacpan.org/pod/MQSeries::Queue)

我的 %qattr = $queue->Inquire( qw(MaxMsgLength MaxQDepth) );

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T01:15:30.593

[Google 没有给你我最近在http://www.capitalware.biz/rl_blog/?p=1616](http://www.capitalware.biz/rl_blog/?p=1616)上写的一篇名为“如何从脚本或程序中清除 MQ 队列”的博客文章

只需将 MQSC“清除”命令更改为“当前深度”(CURDEPTH)。IE

```
DIS QL(TEST.*) CURDEPTH 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T21:28:04.790

perl mqseries 非常完整。下面是一些示例代码。（该示例的部分功劳可能归功于其他人，但它多年来一直在我的驱动器上浮动。）代码连接到命令行指定的队列管理器，如果未提供，它将连接到默认队列经理。然后它会查询传入的队列名称，特别是该队列的当前深度。这显示给用户。可以轻松修改此代码以显示其他队列属性。此外，MQINQ 可用于查询其他对象的属性，而不仅仅是队列。这里是子集示例代码：

```
use MQSeries;

my $quename = $ARGV[0];
my $quemgrname = $ARGV[1];

my $Hconn = MQCONN($qmgrname, $CompCode, $Reason);
print"MQCONN reason:$Reason\n";

my $ObjDesc = { ObjectType => MQOT_Q, ObjectName => $qname };

my $Options = MQOO_INQUIRE | MQOO_SET | MQOO_FAIL_IF_QUIESCING;
my $Hobj = MQOPEN($Hconn,$ObjDesc,$Options,$CompCode,$Reason);
print"MQOPEN reason:$Reason\n";

my $tst = MQINQ($Hconn,$Hobj,$CompCode,$Reason,MQIA_CURRENT_Q_DEPTH);
print"Depth of $qname is: $tst\n";

MQCLOSE($Hconn,$Hobj,$COptions,$CompCode,$Reason);
print"MQCLOSE reason:$Reason\n";
MQDISC($Hconn,$CompCode,$Reason);
print"MQDISC reason:$Reason\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-10T15:49:01.387

如果您在 linux 上使用 MQM 用户登录并希望快速检查其中包含消息的队列 .. 这是一个快速修复 ..

```
echo "dis ql(*) CURDEPTH" | runmqsc <QMGRNAME> | grep -v '(0' | grep -v 'AMQ' 
```

这将为您提供命令行输出，如果需要，您可以直接在 crontab 中安排相同的命令（无需为其保存脚本）

我知道它并不整洁，但可能是最快的解决方案。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-20T15:52:15.147

有许多基于 JVM 的脚本/ish 语言可以让您访问 Java 类。有些需要薄胶层，有些根本不需要。

*   时髦的
*   杰通
*   斯卡拉
*   Clojure
*   等等

# javascript - visualforce页面javascript按钮单击不起作用

> ID：12040810
> 
> 赞同：1
> 
> 时间：2012-08-20T15:41:09.673
> 
> 标签：javascript, jquery, salesforce, visualforce

我有一个visualforce页面（Salesforce），我试图捕捉用户在文本字段中按下回车键并触发按钮点击。

这是我的jQuery代码：

```
$(document).ready(function() {

$("#thisPage\\:theForm\\:siteNumber").keypress(function() { 
    if(window.event){                           
        key = window.event.keyCode;     //IE, chrome
    } 
    else{                           
        key = e.which;     //firefox               
    }
    if(key == 13) {
        $("#thisPage\\:theForm\\:siteButton").click();                  
    }    
});
}); 
```

这很奇怪，我已经验证了密钥等于 13 并且它进入了 if 语句。我还尝试将 .click() 动作移到 if key==13 条件之上，它可以正常触发。它只是在 if key==13 我知道它进入的条件下不起作用。

我已经在这个简单的小提琴中重新创建了它基本上在做什么，但它当然可以正常工作：http: [//jsfiddle.net/2adPe/](http://jsfiddle.net/2adPe/)

任何帮助表示赞赏！

更新：

我发现这会起作用

```
function noenter(e){               
if(window.event){                    
    key = window.event.keyCode;     //IE, Chrome            
} 
else{                    
    key = e.which;     //firefox               
}               
if(key == 13) {                    
    document.getElementById('thisPage:theForm:siteButton').click();                                                                         
    return false;               
} 
else{                    
    return true;               
}          
} 
```

和

```
onkeypress="return noenter(event)" 
```

在文本框上。有没有办法不显眼地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T20:58:02.890

尝试使用[jQuery Attribute Ends With Selector](http://api.jquery.com/attribute-ends-with-selector/)引用您的元素 ID 。

像这样：

```
$("[id$='input1']").on("keypress",function(e) { // e is the current event
    if(e){ 
      key = e.keyCode; // IE, chrome
    }
    else{ 
      key = e.which; // firefox               
    }
    if(key == 13) {
      e.preventDefault(); // prevent a form submit when pressing enter (on IE)
      $("[id$='siteButton']").click(); // simulate a click of the siteButton
    }
}); 
```

此外，如果`key == 13`. 否则，按钮单击可能会执行两次。

[http://jsfiddle.net/2adPe/3/](http://jsfiddle.net/2adPe/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T02:55:05.390

终于明白了！我必须从 .click() 之前删除 e.preventdefault() 并在末尾添加 return false 以阻止默认操作发生。

```
$('input[name$="siteNumber"]').keypress(function() { 
    if(window.event){                           
        key = window.event.keyCode;     //IE, chrome
    } 
    else{                           
        key = e.which;     //firefox               
    }
    if(key == 13) {
        $('input[name$="siteButton"]').click(); 
        return false;                      
    }    
}); 
```

# java - Java MongoDB 查询条件（WHERE date > X and field = value）忽略第二个子句

> ID：12040811
> 
> 赞同：5
> 
> 时间：2012-08-20T15:41:16.277
> 
> 标签：java, mongodb-java

```
import java.util.Date;
import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.mongodb.core.MongoOperations;
import org.springframework.data.mongodb.core.query.Criteria;
import org.springframework.data.mongodb.core.query.Query;

public class CustomQuery {

  @Autowired private MongoOperations mongoOperations;    

  public void customQuery(Date submittalDate) {

     List<Question> q1s = mongoOperations.find(
        new Query(Criteria.where("category").is("New")), 
        Question.class);

     List<Question> q2s = mongoOperations.find(
      new Query(
        Criteria.where("submittalDate").gt(submittalDate).and("category").is("New")
      ),
      Question.class);
  }
} 
```

顶级 Spring Java MongoDB 查询以`q1s`.

底部查询应返回顶部查询的子集。相反，匹配`("submittalDate").gt(submittalDate)`的记录会出现在`q2s`结果中，无论它们是否属于“新”类别。

即，就像`and("category").is("New")`第二个查询被忽略一样。

使用带有 Spring Data 的 Mongodb v2.0.6 32 位版本。

帮助表示赞赏。

## 2012 年 5 月 9 日更新

还是不行

## 2012 年 8 月 26 日更新

这将在 Mongo 命令行上返回结果：

```
db.foo.find( {   "submittalDate":{ "$gte": ISODate("2012-07-31T23:00:00.000Z")  }, "category" : "New"    } ) 
```

相反，Java 代码（对于相同的日期参数）不起作用。为了比较，DEBUG 从 Java 记录的查询是：

```
[DEBUG] [http-8080-1] (MongoTemplate.java:doFind:1256) find using query: 
{ "submittalDate" : { "$gte" : { "$date" : "2012-07-31T23:00:00.000Z"}} , "category" : "New"} 
```

是的，日志记录了一个日期字符串，而为了让 Mongo shell 正常工作，我需要使用 ISODate(..)。但是我正在使用具有可接受类型的 java.util.Date 的 MongoDB Java 驱动程序 - ISODate(..) 怎么可能没有出现问题？问题可能有另一个原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:08:57.040

我不是弹簧专家，但您的某些导入似乎可能相互冲突。鉴于我查看过的文档，很难准确诊断出哪里出错了。如果您没有为此设置使用 spring 框架，则以下是替代/更常见的方法。

```
import com.mongodb.Mongo;
import com.mongodb.DB;
import com.mongodb.DBCollection;
import com.mongodb.BasicDBObject;
import com.mongodb.DBObject;
import com.mongodb.DBCursor;

public class CustomQuery {

public void customQuery(Date submittalDate)
{
        document = new BasicDBObject();
        document.put(("submittalDate").greaterThanEquals(submittalDate).put("category").is("New").get());
        DBCursor cursor = getDbCollection().find(document); 

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:23:58.710

```
{ "$date" : "2012-07-31T23:00:00.000Z"} 
```

等于

```
Date("2012-07-31T23:00:00.000Z") 
```

并将`Date("2012-07-31T23:00:00.000Z")`返回一个字符串，而不是 ISODate()。

通过[http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON](http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON)。

我认为这是一个错误`org.springframework.data.mongodb.core.query.Criteria`。

# mysql - 使用 'mysqldump' 以 CSV 格式转储所有表

> ID：12040816
> 
> 赞同：89
> 
> 时间：2012-08-20T15:41:50.873
> 
> 标签：mysql, csv

我需要以 CSV 格式转储MySQL 中的*所有*表。

是否有`mysqldump`用于*仅以*CSV 格式输出每个表的每一行的命令？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2014-08-21T13:31:35.977

首先，我可以给你*一张*桌子的答案：

所有这些`INTO OUTFILE`或`--tab=tmpfile`（和`-T/path/to/directory`）答案的问题在于，它需要在与 MySQL 服务器*相同的服务器上运行***mysqldump** ，并具有这些访问权限。

 *我的解决方案是简单地将`mysql`( *not* `mysqldump` ) 与`-B`参数一起使用，用 内联 SELECT 语句`-e`，然后用 按摩 ASCII 输出`sed`，最后使用包含标题字段行的 CSV：

例子：

```
 mysql -B -u username -p password database -h dbhost -e "SELECT * FROM accounts;" \
 | sed "s/\"/\"\"/g;s/'/\'/;s/\t/\",\"/g;s/^/\"/;s/$/\"/;s/\n//g" 
```

> "id","登录名","密码","文件夹","email" "8","mariana","xxxxxxxxxx","mariana","""3","squaredesign","xxxxxxxxxxxxxxxxx"," squaredesign","mkobylecki@squaredesign.com" "4","miedziak","xxxxxxxxxx","miedziak","miedziak@mail.com" "5","Sarko","xxxxxxxxx","Sarko"," ""6","Logitrans Poland","xxxxxxxxxxxxxx","LogitransPoland","""7","Amos","xxxxxxxxxxxxxxxxxxxx","Amos",""9","Annabelle","xxxxxxxxxxxxxxxx", "安娜贝尔",""11","Brandfathers and Sons","xxxxxxxxxxxxxxxxx","BrandfathersAndSons",""12","Imagine Group","xxxxxxxxxxxxxxxx","ImagineGroup","""13","EduSquare.pl","xxxxxxxxxxxxxxxxx","EduSquare .pl","""101","tmp","xxxxxxxxxxxxxxxxxxxxx","_","WOBC-14.squaredesign.atlassian.net@yoMama.com"_","WOBC-14.squaredesign.atlassian.net@yoMama.com"_","WOBC-14.squaredesign.atlassian.net@yoMama.com"

`> outfile.csv`在该单行代码的末尾添加一个，以获取该表的 CSV 文件。

接下来，获取*所有*表的列表

```
mysql -u username -ppassword dbname -sN -e "SHOW TABLES;" 
```

从那里开始，只需再进行一步即可创建循环，例如，在 Bash shell 中迭代这些表：

```
 for tb in $(mysql -u username -ppassword dbname -sN -e "SHOW TABLES;"); do
     echo .....;
 done 
```

在`do`and之间`; done` 插入我在上面第 1 部分中编写的长命令，但用您的表名`$tb`代替。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-01-16T11:07:46.960

此命令将在*/path/to/directory table_name.sql*和*table_name.txt*中创建两个文件。

SQL 文件将包含表创建模式，而 txt 文件将包含 mytable 表的记录，其中字段由逗号分隔。

```
mysqldump -u username -p -t  -T/path/to/directory dbname table_name --fields-terminated-by=',' 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-20T16:10:56.057

`mysqldump`具有 CSV 格式的选项：

```
--fields-terminated-by=name
                  Fields in the output file are terminated by the given
--lines-terminated-by=name
                  Lines in the output file are terminated by the given 
```

`name`应包含以下内容之一：

```
`--fields-terminated-by` 
```

`\t`或者`"\""`

```
`--fields-enclosed-by=name`
   Fields in the output file are enclosed by the given 
```

和

`--lines-terminated-by`

*   `\r`
*   `\n`
*   `\r\n`

当然，您应该单独对每个表进行 mysqldump。

我建议您将所有表名收集在一个文本文件中。然后，遍历所有运行 mysqldump 的表。这是一个脚本，它将一次转储和 gzip 10 个表：

```
MYSQL_USER=root
MYSQL_PASS=rootpassword
MYSQL_CONN="-u${MYSQL_USER} -p${MYSQL_PASS}"
SQLSTMT="SELECT CONCAT(table_schema,'.',table_name)"
SQLSTMT="${SQLSTMT} FROM information_schema.tables WHERE table_schema NOT IN "
SQLSTMT="${SQLSTMT} ('information_schema','performance_schema','mysql')"
mysql ${MYSQL_CONN} -ANe"${SQLSTMT}" > /tmp/DBTB.txt
COMMIT_COUNT=0
COMMIT_LIMIT=10
TARGET_FOLDER=/path/to/csv/files
for DBTB in `cat /tmp/DBTB.txt`
do
    DB=`echo "${DBTB}" | sed 's/\./ /g' | awk '{print $1}'`
    TB=`echo "${DBTB}" | sed 's/\./ /g' | awk '{print $2}'`
    DUMPFILE=${DB}-${TB}.csv.gz
    mysqldump ${MYSQL_CONN} -T ${TARGET_FOLDER} --fields-terminated-by="," --fields-enclosed-by="\"" --lines-terminated-by="\r\n" ${DB} ${TB} | gzip > ${DUMPFILE}
    (( COMMIT_COUNT++ ))
    if [ ${COMMIT_COUNT} -eq ${COMMIT_LIMIT} ]
    then
        COMMIT_COUNT=0
        wait
    fi
done
if [ ${COMMIT_COUNT} -gt 0 ]
then
    wait
fi 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2017-08-24T11:49:03.970

如果您使用 MySQL 或 MariaDB，最简单且高效的方式为单个表转储 CSV 是 -

```
SELECT customer_id, firstname, surname INTO OUTFILE '/exportdata/customers.txt'
  FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
  LINES TERMINATED BY '\n'
  FROM customers; 
```

现在您可以使用其他技术对多个表重复此命令。在此处查看更多详细信息：

*   [https://mariadb.com/kb/en/the-mariadb-library/select-into-outfile/](https://mariadb.com/kb/en/the-mariadb-library/select-into-outfile/)
*   [https://dev.mysql.com/doc/refman/5.7/en/select-into.html](https://dev.mysql.com/doc/refman/5.7/en/select-into.html)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-01-08T14:08:19.597

这对我来说效果很好：

```
mysqldump <DBNAME> --fields-terminated-by ',' \
--fields-enclosed-by '"' --fields-escaped-by '\' \
--no-create-info --tab /var/lib/mysql-files/ 
```

或者，如果您只想转储特定表：

```
mysqldump <DBNAME> <TABLENAME> --fields-terminated-by ',' \
--fields-enclosed-by '"' --fields-escaped-by '\' \
--no-create-info --tab /var/lib/mysql-files/ 
```

我正在倾倒以`/var/lib/mysql-files/`避免此错误：

> mysqldump：出现错误：1290：MySQL 服务器正在使用 --secure-file-priv 选项运行，因此在执行 'SELECT INTO OUTFILE' 时无法执行此语句

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-01-27T10:47:30.140

看起来其他人也有这个问题，[现在有一个简单的 Python 脚本](https://github.com/jamesmishra/mysqldump-to-csv)，用于将 mysqldump 的输出转换为 CSV 文件。

```
wget https://raw.githubusercontent.com/jamesmishra/mysqldump-to-csv/master/mysqldump_to_csv.py
mysqldump -u username -p --host=rdshostname database table | python mysqldump_to_csv.py > table.csv 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-21T06:01:20.087

您也可以使用[dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)中的数据导出工具来执行此操作。

它将允许您选择部分或所有表并将它们导出为 CSV 格式。*

# php - wordpress 媒体上传限制

> ID：12040817
> 
> 赞同：-2
> 
> 时间：2012-08-20T15:41:51.967
> 
> 标签：php, wordpress, php-ini

在我的本地 wordpress 站点中，我只能上传 2Mb 的文件，我已将文件增加到`upload_max_filesize`64Mb 并重新启动了 wamp，但是当我运行`<?php echo phpinfo()?>`它时显示`upload_max_filesize = 2M`尚未更改。我应该怎么做才能增加上传限制？

我还在stackoverflow和其他论坛上访问了很多帖子，例如：[increase-file-upload-size-for-media-in-wordpress](https://stackoverflow.com/questions/6488819/can-any-one-tell-me-how-to-increase-file-upload-size-for-media-in-wordpress) ，并且[无法更改php上传大小限制](https://stackoverflow.com/questions/6999439/cannot-change-php-upload-size-limit) ，但它们根本没有帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:46:22.917

这听起来不像是 Wordpress 问题，我想说的是你的 WAMP Apache 设置。这是 WAMP 论坛上一个主题的链接；

[增加 WAMP 上传限制](http://forum.wampserver.com/read.php?2,41520)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T16:57:47.157

我终于解决了我的问题。我一直在更改 C:\wamp\bin\php\php5.4 文件夹中的 php.ini，但正确的文件是该文件夹 C:\wamp\bin\apache\Apache2.3.14\ 的 php.ini斌

而且我也明白，为了增加`max_file_uploads`首先必须增加`post_max_size`，并且`max_file_uploads`必须小于或等于`post_max_size`，代码将以默认大小运行的任何其他方式`post_max_size`。

tnx 所有帮助过我的人

# jquery - 使用 jQuery 和 Twitter Bootstrap 查找活动选项卡

> ID：12040820
> 
> 赞同：63
> 
> 时间：2012-08-20T15:42:14.857
> 
> 标签：jquery, tabs, twitter-bootstrap

我已经绞尽脑汁一段时间了，我想知道是否有人知道我如何使用 jQuery 和 Twitter 的 Bootstrap 找到活动选项卡。从 URL 中提取散列不是我的第一个选择，我使用链接`data-toggle`中的属性，`<a>`因此不需要生成 URL 散列。

有什么见解吗？这是我的标记示例：

```
<ul class="nav nav-list" id="sampleTabs">
    <li><a href="#example" data-toggle="tab">Tab 1</a></li>
</ul>
<div class="tab-content">
    <div class="tab-pane fade active in" id="example">
        Example Tab
    </div>
</div>

<script>
$('#sampleTabs a:first').tab('show');
</script> 
```

我愿意接受任何建议——使用 PHP 会话、JS cookie 等。

编辑：这是真正的问题。我有一个使用 PHP 的分页系统，因此当单击页码或下一个/上一个箭头时，它将重新加载页面。这就是为什么我需要在加载下一页之前找到活动选项卡的原因，因为我只会在 url 或会话等中传递它。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-08-20T15:45:10.810

Twitter Bootstrap 将`active`类分配给`li`表示活动选项卡的元素：

```
$("ul#sampleTabs li.active") 
```

另一种方法是绑定`shown`每个选项卡的事件，并保存活动选项卡：

```
var activeTab = null;
$('a[data-toggle="tab"]').on('shown', function (e) {
  activeTab = e.target;
}) 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-03-24T07:09:10.380

这是需要 Boostrap 3 解决方案的人的答案。

**在引导程序 3 中，在下一行中使用 'shown.bs.tab' 而不是 'shown'**

```
// tab
$('#rowTab a:first').tab('show');

$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
//show selected tab / active
 console.log ( $(e.target).attr('id') );
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-02T11:48:40.733

首先，您需要删除**data-toggle**属性。我们将使用一些 JQuery，因此请确保包含它。

```
 <ul class='nav nav-tabs'>
    <li class='active'><a href='#home'>Home</a></li>
    <li><a href='#menu1'>Menu 1</a></li>
    <li><a href='#menu2'>Menu 2</a></li>
    <li><a href='#menu3'>Menu 3</a></li>
  </ul>

  <div class='tab-content'>
    <div id='home' class='tab-pane fade in active'>
      <h3>HOME</h3>
    <div id='menu1' class='tab-pane fade'>
      <h3>Menu 1</h3>
    </div>
    <div id='menu2' class='tab-pane fade'>
      <h3>Menu 2</h3>
    </div>
    <div id='menu3' class='tab-pane fade'>
      <h3>Menu 3</h3>
    </div>
  </div>
</div>

<script>
$(document).ready(function(){
// Handling data-toggle manually
    $('.nav-tabs a').click(function(){
        $(this).tab('show');
    });
// The on tab shown event
    $('.nav-tabs a').on('shown.bs.tab', function (e) {
        alert('Hello from the other siiiiiide!');
        var current_tab = e.target;
        var previous_tab = e.relatedTarget;
    });
});
</script> 
```

# mysql - 在 WHERE 子句中使用 OR 的 MySQL 全文不使用索引

> ID：12040821
> 
> 赞同：1
> 
> 时间：2012-08-20T15:42:20.267
> 
> 标签：mysql, indexing, where, full-text-search, explain

第一次发帖……我通常可以通过搜索找到答案，但这似乎是一个晦涩难懂的情况；

言归正传。我使用专为从父表搜索而设计的表创建了几个搜索。我遇到了这样一种情况，即我编写的​​查询在 WHERE 子句中使用 OR 时不会使用 PRIMARY KEY 索引，但如果换入 AND 则将按预期运行。这是表。

```
CREATE TABLE `tag_idx` (
  `tag_id` bigint(20) NOT NULL DEFAULT '0',
  `animation_id` int(10) NOT NULL DEFAULT '0',
  `tag_text` varchar(64) DEFAULT NULL,
  PRIMARY KEY (`animation_id`,`tag_id`),
  KEY `animation_id` (`animation_id`),
  FULLTEXT KEY `tag_text` (`tag_text`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8

CREATE TABLE `animation_notag_idx` (
  `animation_id` int(10) NOT NULL DEFAULT '0',
  `animation_user_id` int(10) NOT NULL,
  `contest_score` int(11) DEFAULT NULL,
  `animation_views` int(11) DEFAULT NULL,
  `animation_votes` int(255) DEFAULT NULL,
  `animation_finished` int(50) DEFAULT NULL,
  `animation_title` varchar(50) DEFAULT NULL,
  `artist_nickname` varchar(16) DEFAULT NULL,
  PRIMARY KEY (`animation_id`),
  KEY `animation_id` (`animation_id`),
  FULLTEXT KEY `animation_title` (`animation_title`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

查询；请注意，animation_title 和 tag_text 在查询中的使用方式不同。

```
SELECT
a.animation_id,
t.tag_id,
a.contest_score,
a.animation_views,
a.animation_votes,
a.animation_finished,
a.animation_title,
a.artist_nickname,
t.tag_text,
match(a.animation_title) AGAINST ('+*funny*') as title_score,
(
SELECT MAX(
MATCH(animation_title) AGAINST('+*funny*')
 ) FROM animation_notag_idx WHERE MATCH(animation_title) AGAINST('+*funny*')
) as max_name_relevance,
match(t.tag_text) AGAINST ('+*funny*') as meta_score,
(
SELECT MAX(
MATCH(tag_text) AGAINST('+*funny*')
) FROM tag_idx WHERE MATCH(tag_text) AGAINST('+*funny*')
) as max_meta_relevance

FROM
animation_notag_idx AS a

LEFT JOIN

tag_idx AS t

on 

t.animation_id = a.animation_id
WHERE

match(a.animation_title) AGAINST ('+%funny%' IN BOOLEAN MODE)

OR

match(t.tag_text) AGAINST ('+%funny%' IN BOOLEAN MODE)

ORDER BY ((title_score / max_name_relevance) * 0.5) + ((title_score / max_meta_relevance) * 0.2) DESC

LIMIT 5
OFFSET 0; 
```

和解释....

```
*************************** 1\. row ***************************
           id: 1
  select_type: PRIMARY
        table: a
         type: ALL
possible_keys: NULL
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 3226035
        Extra: Using filesort
*************************** 2\. row ***************************
           id: 1
  select_type: PRIMARY
        table: t
         type: ref
possible_keys: PRIMARY,animation_id
          key: animation_id
      key_len: 4
          ref: text_index.a.animation_id
         rows: 1
        Extra: Using where
*************************** 3\. row ***************************
           id: 3
  select_type: SUBQUERY
        table: tag_idx
         type: fulltext
possible_keys: tag_text
          key: tag_text
      key_len: 0
          ref: 
         rows: 1
        Extra: Using where
*************************** 4\. row ***************************
           id: 2
  select_type: SUBQUERY
        table: animation_notag_idx
         type: fulltext
possible_keys: animation_title
          key: animation_title
      key_len: 0
          ref: 
         rows: 1
        Extra: Using where
4 rows in set (0.00 sec)

And if I swap out for the AND...

*************************** 1\. row ***************************
           id: 1
  select_type: PRIMARY
        table: a
         type: fulltext
possible_keys: animation_title
          key: animation_title
      key_len: 0
          ref: 
         rows: 1
        Extra: Using where; Using filesort
*************************** 2\. row ***************************
           id: 1
  select_type: PRIMARY
        table: t
         type: ref
possible_keys: PRIMARY,animation_id
          key: animation_id
      key_len: 4
          ref: text_index.a.animation_id
         rows: 1
        Extra: Using where
*************************** 3\. row ***************************
           id: 3
  select_type: SUBQUERY
        table: tag_idx
         type: fulltext
possible_keys: tag_text
          key: tag_text
      key_len: 0
          ref: 
         rows: 1
        Extra: Using where
*************************** 4\. row ***************************
           id: 2
  select_type: SUBQUERY
        table: animation_notag_idx
         type: fulltext
possible_keys: animation_title
          key: animation_title
      key_len: 0
          ref: 
         rows: 1
        Extra: Using where
4 rows in set (0.00 sec) 
```

为什么？？我已经多次重写了这个查询，我在网上阅读的所有内容似乎都指向这个查询被正确编写。有任何想法吗？提前致谢！

# jaxb - 使用默认值初始化的 JAXB 对象

> ID：12040826
> 
> 赞同：11
> 
> 时间：2012-08-20T15:42:36.363
> 
> 标签：jaxb, xsd, default-value

**JAXB 几乎没有问题。**

* * *

**鉴于：**

*   Java 1.5；来自 jaxws-2_0 的 jaxb -jars。
*   .xsd 方案和生成的 JAXB 类。
*   .xsd 中的每个简单元素都有默认值。结果类成员具有类似“ **@XmlElement(name = "cl_fname", required = true, defaultValue = "[ *_* __ *_* __]")**的注释

* * *

**必需的**

* * *

获取完全表示 xml 的 java 对象（根元素）和默认值初始化的每个成员。

* * *

当我尝试在不显式设置值的情况下编组 xml 时，默认值没有意义......有没有办法在不自定义生成的类的情况下编组填充有默认值的 xml？

*.xsd 示例：*

```
<xs:element name="document">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="d_int"/>
            <xs:element ref="d_double"/>
            <xs:element ref="d_string"/>
        </xs:sequence>
    </xs:complexType>
</xs:element>

<xs:element name="d_int" type="xs:int" default="-1"/>
<xs:element name="d_double" type="xs:double" default="-1.0"/>
<xs:element name="d_string" type="xs:string" default="false"/> 
```

*和java类：*

```
public class Document {
    @XmlElement(name = "d_int", defaultValue = "-1")
    protected int dInt;
    @XmlElement(name = "d_double", defaultValue = "-1.0")
    protected double dDouble;
    @XmlElement(name = "d_string", required = true, defaultValue = "Default")
    protected String dString;
...
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-20T17:18:29.787

注释中的默认值仅在*unmarshalling*之后才有效。
解组这个

```
<document>
   <d_int/>
   <d_double/>
   <d_string/>
</document> 
```

您将获得具有默认值的对象（-1、-1.0、“默认”）

如果要将默认值设置为编组，则应执行此操作

```
public class Document {
    @XmlElement(name = "d_int", defaultValue = "-1")
    protected int dInt = 100;
    @XmlElement(name = "d_double", defaultValue = "-1.0")
    protected double dDouble = -100;
    @XmlElement(name = "d_string", required = true, defaultValue = "Default")
    protected String dString = "def";
...
} 
```

jaxb 仅为解组生成默认值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-30T13:28:52.020

对于从 XSD 提供的默认值初始化类成员，您可以使用 XJC 的 default-value-plugin。

查看[插件的网站](https://java.net/projects/jaxb2-commons/pages/Default-Value)。

请注意，该文档中解释的 ant 任务定义对我不起作用。[正如这里所解释](https://stackoverflow.com/questions/27977479/com-sun-tools-xjc-plugin-provider-plugin-not-a-subtype)的，XJC 和插件的类路径必须分开。调用插件时指定插件的路径对我有用：

```
<xjc schema="some.xsd" >
    <arg value="-Xdefault-value"/>
    <classpath>
        <pathelement location="lib/xjc-plugins/jaxb2-default-value-1.1.jar"/>
    </classpath>
</xjc> 
```

# internet-explorer-8 - 如何以编程方式获取 IE8 中打开的选项卡的数量？

> ID：12040829
> 
> 赞同：0
> 
> 时间：2012-08-20T15:42:40.050
> 
> 标签：internet-explorer-8

我需要获取当前 IE 窗口中的选项卡数。编程语言无关紧要，只要可以以编程方式进行即可:)

我使用的是 Windows XP SP3。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:14:41.580

安全限制阻止您执行此客户端。

你能做到这一点的唯一方法是做一个插件。

# javascript - 如何在新的 Meteor Collection 文档中在服务器上设置 created_on 字段？

> ID：12040831
> 
> 赞同：3
> 
> 时间：2012-08-20T15:42:50.520
> 
> 标签：javascript, mongodb, meteor

我正在建立一个按时间顺序显示帖子的聊天室。我目前在“entry”模板的提交事件上设置用户在客户端js中发帖的时间：

```
Template.entry.events =  {
  'submit': function(e){
    e.preventDefault();
    //console.log(this.userId());
    var user = Meteor.user();
    var roomName = Session.get('currentRoomName');
    Messages.insert({
      user: user,
      room_name: roomName,
      message: $('#message').val(),
      created_on: new Date().getTime()
    });
    $("#message").val('');
  }
}; 
```

我的问题是，因为这个日期是在客户端上设置的，如果用户更改了他们机器上的时间，它将被记录为允许用户在当前对话之前或之后发布。理想情况下，我可以在收到新的聊天条目后更新服务器上的 created_on 时间，以反映服务器上当前的 UTC 时间并更正输入的任何值。我仍然希望有时间在客户端延迟补偿等

我已经阅读了很多关于 II 的 Meteor 文档，我怀疑我可能会使用 .observe() 来解决这个问题，但我对 Meteor 和 Mongodb 都是新手。观察条目集合中的每个文档会不会很疯狂？是否可以只观察新条目？

我也在使用 auth 分支 - 不确定这是否会有所作为。

如果聊天室里有很多用户，那么[这个非问题](https://stackoverflow.com/questions/12037012/meteor-race-condition-intergrity-of-sequence)最终可能是相关的。

抱歉，如果这是我刚刚错过的 Mongo/Meteor 中超级简单的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T03:34:44.097

最简单的解决方案是使用一种方法，而不是由`Messages.insert`.

在服务器上：

```
Meteor.methods({
  addMessage: function(room_name, message) {
    Messages.insert({
      userId: this.userId,
      room_name: room_name,
      message: message,
      created_on: new Date().getTime();
    });
  });
}); 
```

在客户端：

```
Template.entry.events =  {
  'submit': function(e) {
    e.preventDefault();
    Meteor.call('addMessage', Session.get('currentRoomName'), $('#message').val());
  }
} 
```

这将立即在客户端上创建一条记录（带有客户端的日期），同时在服务器上创建一条记录（带有服务器的日期），然后在下次同步时覆盖客户端的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T01:14:06.727

我强烈建议你在`auth`分支中引入 ACL。您可以在插入/更新/删除/获取时进行一些验证和/或修改。看看`Meteor.Collection.prototype.allow`下面的源文件`packages/mongo-livedata/collection.js`。

# javascript - 如何使用 JavaScript 正则表达式替换字符串中双引号之间的文本？

> ID：12040833
> 
> 赞同：6
> 
> 时间：2012-08-20T15:43:00.877
> 
> 标签：javascript, regex

我有一个 JS 字符串，其中包含双引号 ( `"`) 之间的文本。我想使用 RegEx 将该文本替换为另一个用户输入的文本，但我不知道该怎么做。例如：

给定字符串：

```
The book "A Farewell to Arms" will be published again. 
```

新文本：乱世佳人 --> 上面的句子将是

```
The book "Gone with the Wind" will be published again. 
```

你能帮我解决这个案子吗？抱歉这个虚拟问题，因为我是 JS RegEx 的新手。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-20T15:48:24.117

应该这样做..请原谅我的拼写错误。我不是 javascript 开发人员

```
str.replace(/".*?"/,"\"Gone with the Wind\""); 
```

# javascript - Chrome的滚动优化

> ID：12040835
> 
> 赞同：0
> 
> 时间：2012-08-20T15:43:13.513
> 
> 标签：javascript, html, firefox, google-chrome, optimization

[我们有一个设置过程，可以在https://activegrade.appspot.com/?anonymous=true#firstsetup](https://activegrade.appspot.com/?anonymous=true#firstsetup)执行一些视差滚动效果。它在 Firefox 中比在 Chrome 中运行得更好——我认为是因为 Chrome 正在尝试做的优化：

1：似乎滚动事件在 chrome 中并不经常触发。请注意浮动图像不会像在 Firefox 中那样随 Chrome 中的页面位置更新

2：当一个新的 div（大的彩色部分）出现在屏幕上时，Chrome 似乎会窒息。也许直到最后一刻才真正加载这些部分，从而节省了其他地方的时间？

我正在寻找建议，以使其在 Chrome 中与在 Firefox 中一样流畅。解决这些优化问题会很好（我怀疑#2 比#1 更可行）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:55:12.190

当您使用 CSS3 转换而不是基本的 CSS 定位时，性能应该会更好。

```
-webkit-transform: translate(x,y) 
```

您也可以阅读[这篇](http://www.ianlunn.co.uk/blog/code-tutorials/recreate-nikebetterworld-parallax/)文章，这里有一些建议如何通过仅更改网站的可见部分来使视差效果更平滑。

# javascript - 我可以遍历 ap 标签并更改为 ul 吗？

> ID：12040840
> 
> 赞同：2
> 
> 时间：2012-08-20T15:43:27.680
> 
> 标签：javascript, jquery, html

我正在尝试创建一个脚本，该脚本遍历包含多个文本句子的段落，并在每个句子的开头和结尾插入一个 li 标签。这可能吗？

所以，翻这一段

```
<p>
   Give your work the edge with this pencil. Awesome design, and chunky gold finish. Get the look. 
</p> 
```

进入这个无序列表

```
<p>
  <ul>
    <li>
      Give your work the edge with this pencil.
    </li> 
    <li>
      Awesome design, and chunky gold finish. 
    </li>
    <li>
      Get the look. 
    </li>
  </ul>
</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:51:36.803

```
$('p').each(function() {
  var $par = $(this),
      theText = $par.text().split('. ');
  $par.text('');
  $.each(theText, function(i, item) {
    if ($.trim(item).length > 0)
      $par.append('<li>' + item + '</li>');
  });
}); 
```

未经测试，但你明白了。拆分，然后遍历数组，包装在您的标签中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:52:34.423

是的你可以。首先你要做的就是 `Tokenize`每个段落都带有“。” 这会将段落分成不同的句子，然后在中间添加 li 标签..

要将内容从 p 更改为 ul，您可以使用此链接 ::

[http://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

要将单个段落标记为句子，您可以使用它：

[http://www.tizag.com/javascriptT/javascript-string-split.php](http://www.tizag.com/javascriptT/javascript-string-split.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:51:56.203

你可以做这样的事情

```
$.each($(".my-content").text().split("."), function(index,item){  

     $(".my-ul").append($("<li/>").text(item));

}); 
```

# html - 在 HTML 中显示表格数据

> ID：12040841
> 
> 赞同：5
> 
> 时间：2012-08-20T15:43:27.940
> 
> 标签：html, css, html-lists, tabular

我以前总是用桌子。然而，有人告诉我，在现代 HTML 设计中使用表格是一个很大的禁忌。在现代 HTML 中显示表格数据有哪些好的和“公认”的方法？

我想做这样的事情：

```
名字姓氏电话号码
布兰妮斯皮尔斯 555-555-5555
乔恩·邦乔维 444-444-4444

```

我不是 100% 清楚为什么我不应该为此使用表格。但是我看到人们使用`<li>`'s 他们使用 CSS 使行为更像`<div>`'s

使用 HTML 和 CSS 设置这样的数据的好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:45:24.933

您**应该**为此使用表格。

它的表格数据，所以它属于 HTML 表格。

由于过度使用表格进行布局，表格的名声不好。但它们并不邪恶，并且是在网页上显示数据表时使用的完全可接受的元素。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T15:45:42.873

您的示例是规范所描述的表格的完全有效用途（强调我的）：

> table 元素代表一个表格；即**多维数据。**

[http://www.w3.org/TR/html-markup/table.html](http://www.w3.org/TR/html-markup/table.html)
[http://www.w3.org/TR/2011/WD-html5-20110525/tabular-data.html#examples](http://www.w3.org/TR/2011/WD-html5-20110525/tabular-data.html#examples)

对表格数据使用 CSS 是可能的，但很快就变得难以处理 100% 宽度、单元格等高、文本换行、溢出等。表格的布局和渲染模型针对这些场景进行了良好定义和优化，而a `div`or a `dl`or `ol`is not。

有不同的显示类型在非表格元素上支持更多类似表格的布局，但目前还没有很好地实现。

见：[http ://www.quirksmode.org/css/display.html#table](http://www.quirksmode.org/css/display.html#table)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T15:45:18.143

对于表格数据，请使用表格元素！这就是它的目的，它仍然存在（[参见 HTML5 规范](http://www.w3.org/TR/html-markup/table.html)）并被推荐。

当您可以使用 CSS 进行布局时，不要使用表格来布局屏幕（占所有情况的 99% 以上）。

# asp.net - 使用 ASP.NET 保护静态文件的困难

> ID：12040843
> 
> 赞同：0
> 
> 时间：2012-08-20T15:43:35.543
> 
> 标签：asp.net, asp.net-authorization

（根据 Menno 的反馈更新）

我请求使用 ASP.NET 授权保护站点其余部分的安全，以保护一个充满静态文件（htm、pdf 等）的文件夹。该文件夹位于网络的根目录中。普通的 ASP.NET 授权适用于 Web。唯一的问题是保护这个特定的文件夹。

我正在尝试重新配置 ASP.NET 身份验证模块，以便使用我的应用程序根目录下的 web.config 中的以下内容为我的“文档”文件夹中的所有文件调用它们：

```
<location path="Documentation">
    <system.webServer>
        <modules>
            <remove name="FormsAuthentication" />
            <add name="FormsAuthentication" type="System.Web.Security.FormsAuthenticationModule" preCondition="" />
            <remove name="UrlAuthorization" />
            <add name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule" preCondition="" />
        </modules>
    </system.webServer>
</location> 
```

没有效果。

如果我将相同的 system.webServer 节点放在 Documentation 文件夹中的 web.config 中——没有效果。

仅当我将相同的 system.webServer 节点放在 Documentation 文件夹中的 web.config 中，然后将 Documentation 文件夹转换为应用程序时，它才会生效。

我没有看到任何信息表明您可以在位置节点内成功使用 system.webServer 节点，但我也没有看到任何信息表明对位置节点内使用的内容有任何限制。

应用程序池正在运行 4.0，集成模式。关于我做错了什么有什么建议吗？

# c++ - C/C++ 上下文中的符号表和分支/跳转/虚拟方法表有什么区别

> ID：12040845
> 
> 赞同：0
> 
> 时间：2012-08-20T15:43:46.040
> 
> 标签：c++

C/C++ 上下文中的符号表和分支/跳转/虚拟方法表有什么区别？因为两者都保留了库/可执行模块中例程的引用。两者的主要区别是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:53:57.920

符号表是编译器的一个模块，虚方法表是实现虚函数的一种方式。我宁愿解释他们的共同点，除了他们名字中的单词表（简短回答没有），而不是他们的不同之处。首先，它们不是同时存在的，它们服务于不同的目的，它们包含不同的信息。

# php - 关于 php 分配变量的非常快速的问题

> ID：12040846
> 
> 赞同：-2
> 
> 时间：2012-08-20T15:43:46.867
> 
> 标签：php, mysql

我有这个快速的问题

我想在 $_POST[]; 之前添加一个数字 1；

```
$fileName = "1"'.$_POST['name'].'""; 
```

我究竟做错了什么？因为它没有给我任何结果！谢谢！ps.我知道这个问题很愚蠢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:44:56.430

您可以使用

```
$fileName = "1" . $_POST['name']; 
```

或者

```
$fileName = "1 {$_POST['name']}"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:45:16.587

试试这样...

```
$fileName = "1".$_POST['name']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:46:45.070

使用以下任一：

```
$fileName = '1' . $_POST['name']; 
```

或者

```
$fileName = "1" . $_POST['name']; 
```

或者

```
$fileName = "1{$_POST['name']}"; 
```

# bazaar - 在 Bazaar Explorer 中用作外部差异工具时，强制 Beyond Compare 使用选项卡

> ID：12040849
> 
> 赞同：0
> 
> 时间：2012-08-20T15:43:59.083
> 
> 标签：bazaar, beyondcompare, tortoisebzr

我正在尝试使用 Beyond Compare 作为我在 Bazaar Explorer 中的差异工具。

`In Settings`> `Configuration`> `User Configuration`>`Diff`

我添加了

姓名：`Beyond Compare`

命令：`C:\Program Files (x86)\Beyond Compare 3\BComp.exe`

注意：没有引号。

这工作正常，就像我右键单击一个文件夹一样，`Tortoise Bazaar`> `Diff`> `External Diff`>`Beyond Compare`

然后 Beyond Compare 打开并显示第一个文件的差异。但是，如果一个文件夹中有很多文件发生了变化。我必须关闭 Beyond Compare 才能使用下一个更改的文件重新打开它。如何让所有更改的文件在同一个 Beyond Compare 窗口中作为单独的选项卡打开？

我试过了`BComp.com`，但似乎没有一个能按我的意愿工作。`BComp.exe``BCompare.exe`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T00:20:18.097

看起来这可能在 qbzr 0.23 中得到了[改进](http://bazaar.launchpad.net/~qbzr-dev/qbzr/trunk2a/revision/1467)，它与 bzr 2.6 兼容，其中[第二个 beta 版](https://launchpad.net/bzr/2.6/2.6b2)目前可用。

# c++ - C++ Pi 逼近程序

> ID：12040851
> 
> 赞同：1
> 
> 时间：2012-08-20T15:44:11.047
> 
> 标签：c++, visual-c++, pi

我刚刚学习 C++，所以我开始制作一个简单的程序来近似 pi 的值，使用以下系列： Pi ^ 6 / 960 = 1 + 1 / 3 ^ 6 + 1 / 5 ^ 6... 和依此类推，继续使用 6 次方的奇数分母。这是我的代码：

```
/*-------------------------------------------
 *  AUTHOR:                                 *
 *  PROGRAM NAME: Pi Calculator             *
 *  PROGRAM FUNCTION: Uses an iterative     *
 *      process to calculate pi to 16       *
 *      decimal places                      *
 *------------------------------------------*/
#include <iostream>
#include <iomanip>
#include <cmath>
using namespace std;
double pi_approximation = 0; // the approximated value of pi
double iteration = 3; // number used that increases to increase accuracy
double sum = 1; // the cumulative temporary total

int main ()
{
    while (true) // endlessly loops
    {
        sum = sum + pow(iteration,-6); // does the next step in the series
        iteration = iteration + 2; // increments iteration
        pi_approximation = pow((sum * 960),(1 / 6)); // solves the equation for pi
        cout << setprecision (20) << pi_approximation << "\n"; // prints pi to maximum precision permitted with a double
    }
} 
```

代码似乎工作正常（变量“总和”和“迭代”都正确增加）到这一行：

```
pi_approximation = pow((sum * 960),(1 / 6)); // solves the equation for pi 
```

由于某种原因，'pi_approximation' 保留其值 1，因此打印到 'cout' 的文本为“1”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T15:47:51.963

问题是整数除法：

`(1 / 6)`将返回 0。我相信你知道，任何 0 次方都是 1。

对于浮点除法，更改为`((double)1 / (double)6)`或`(1.0 / 6.0)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T15:49:29.670

`(1 / 6) == 0`因为它使用整数数学 - 你可能想要`(1.0 / 6.0)`......

# javascript - sublime-jslint：有什么方法可以忽略特定的代码部分？

> ID：12040852
> 
> 赞同：7
> 
> 时间：2012-08-20T15:44:12.620
> 
> 标签：javascript, jslint, sublime-jslint

我有一吨 JS 意大利面，急需好好擦洗。我已经通过包 Control 将 sublimetext2 配置为 use `sublime-jslint`，并且我已经将必要的命令行开关传递给了它，`jslint4java-2.0.1`所以它知道如何发挥它的魔力。问题是，这些文件包含一些粘贴的*第三方代码*。我无法将此代码移到文件之外，因为它对时间要求很高，需要先加载。

我查看了`jslint4java`文档，找不到让它忽略脚本的特定部分的方法。我已经搜索了该站点，唯一能找到的关于忽略代码区域的内容是 jslint 网络版本。

所以，我的问题是：有什么方法可以让它忽略 javascript 文件的特定区域？如果我能以某种方式将那部分沙箱化，那么我宁愿不忽略这些警告，这样 jslint 就不会对我大喊大叫。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T22:06:53.853

JSLint 在解析时使用控制注释来控制其行为。一种方法是在第三方脚本之前禁用所有相关的。在脚本的最后一行之后，您必须再次启用它们。不幸的是，没有控制注释来禁用整个 linting。

第二种选择是将其放入一个单独的文件中，您明确声明您不想这样做。但是，有时可能会根据您的情况知道是否加载了此脚本。

这可能不适用于您，但可能适用于阅读此问题的其他人。

*   如果您将脚本放在页面上的任何其他脚本之上，它将始终在执行任何后续脚本之前加载。
*   如果您只使用*在另一个文件中单独定义的*特定函数或变量，那么您可以检查类型是否符合您的预期

[这是一个示例函数](http://pastebin.com/kT3zRjF6)，用于检查是否加载了必要的函数/变量（如果函数或变量在其他地方定义，则不起作用）。它在 5 秒内检查 10 次

*   如果您正在动态调用这两个脚本，或者无法控制它们的顺序，并且您不能确定这些 vars/func 没有在其他地方定义，您可以将所有依赖代码封装在一个函数中并使用 ajax 回调来执行编码。

[这是一个使用纯 JavaScript 处理 AJAX 的示例 使用 AJAX](http://net.tutsplus.com/articles/news/how-to-make-ajax-requests-with-raw-javascript/) 加载此脚本后，使用示例中函数的第二个参数来调用您的依赖代码。

这是我能提供的最好的帮助。

# jquery - jQuery 警报正在返回代码

> ID：12040855
> 
> 赞同：2
> 
> 时间：2012-08-20T15:44:19.220
> 
> 标签：jquery, html, alert

我正在使用以下 HTML 和 JavaScript 来显示`#username` `<input>`元素的值：

```
<form action="#" method="post">
  Username: <input type="text" name="username" /><br />
  Password: <input type="password" name="password" /><br />
  <input class="test" type="submit" id="thing" value="Log In" />
</form> 
```

```
$(document).ready(function() {
  $('input#thing').on('click', function() {
    var name = $('#username').val;
    alert(name);
  });
});​ 
```

当我在浏览器中运行它时，我收到一条警报说

```
function (value) {
    var hooks, ret, isFunction, elem = this[0];
    if (!arguments.length) {
        if (elem) {
            hooks = jQuery.valHooks[elem.type] ||
                jQuery.valHooks[elem.nodeName.toLowerCase()];
            if (hooks &&
                "get" in hooks &&
                (ret = hooks.get(elem, "value")) !== undefined) {
                return ret;
            }
            ret = elem.value;
            return typeof ret === "string" ? ret.replace(rreturn, "") : ret == null ? "" : ret;
        }
        return;
    }
    isFunction = jQuery.isFunction(value);
    return this.each(function (i) {var val, self = jQuery(this);if (this.nodeType !== 1) {return;}if (isFunction) {val = value.call(this, i, self.val());} else {val = value;}if (val == null) {val = "";} else if (typeof val === "number") {val += "";} else if (jQuery.isArray(val)) {val = jQuery.map(val, function (value) {return value == null ? "" : value + "";});}hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()];if (!hooks || !("set" in hooks) || hooks.set(this, val, "value") === undefined) {this.value = val;}});
} 
```

什么时候应该说输入的用户名是什么。

发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:45:52.617

采用

```
$("#username").val(); 
```

代替：

```
$("#username").val; 
```

该`val`功能的全部内容正在被警告。确保实际调用该函数（使用`()`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T15:46:17.650

以下代码将*函数* `val`分配给变量`name`。

```
 var name = $('#username').val;
    alert(name); 
```

然后，您将*函数*传递给`alert`. 如果要传递文本框中的值，则必须*调用*函数并传递其返回值：

```
 var name = $('#username').val();
    alert(name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:46:20.893

您需要调用该`val()`函数。将其更改为`$('#username').val();`（注意括号）

只是`.val`（没有括号）会给你函数的代码。

此外，当您在 jsfiddle 上进行演示时，请确保选择正确的框架。如果您使用的是 jQuery，请选择 jQuery。Mootools 是默认设置，会导致您的 jQuery 代码根本无法工作。

# appstore-approval - 提交使用 mailcore 的应用时，Apple 应用商店提交要求。（使用加密库）

> ID：12040858
> 
> 赞同：1
> 
> 时间：2012-08-20T15:44:20.627
> 
> 标签：appstore-approval, mailcore

我们的 IOS 应用程序已更新以支持某些电子邮件功能。为此，我们利用了 mailcore 框架，但在此过程中，我们的应用程序现在使用了加密技术。我的问题是，现在我们有了加密技术（mailcore 使用的加密库），苹果应用商店的提交要求是什么？当加密的使用完全由第三方库管理时，我们如何回答应用商店加密提交问题？

# php - 使用 exec、shell_exec 或 system 从 PHP 运行 SVN 命令

> ID：12040859
> 
> 赞同：0
> 
> 时间：2012-08-20T15:44:23.060
> 
> 标签：php, svn

我有一段非常简单的代码，理论上应该让我从 php 获得一个 svn 列表

```
<?php
print_r("Method 1<br/>");
$x = exec("/usr/bin/svn list svn+ssh://svn.server.com/path/to/trunk/ 2>&1", $o, $m);
print_r($o);

print_r("<br/><br/><br/>");

print_r("Method 2<br/>");
$x = exec("/usr/bin/svn list --username user --password pass svn+ssh://svn.server.com/path/to/trunk/ 2>&1", $o, $m);
print_r($o);
?> 
```

这两种方法都返回以下错误

```
Method 1
Array ( [0] => svn: warning: Can't open file '/root/.subversion/servers': Permission denied [1] => No protocol specified [2] => [3] => (gnome-ssh-askpass:6062): Gtk-WARNING **: cannot open display: :0.0 [4] => svn: To better debug SSH connection problems, remove the -q option from 'ssh' in the [tunnels] section of your Subversion configuration file. [5] => svn: Network connection closed unexpectedly ) 

Method 2
Array ( [0] => svn: warning: Can't open file '/root/.subversion/servers': Permission denied [1] => No protocol specified [2] => [3] => (gnome-ssh-askpass:6062): Gtk-WARNING **: cannot open display: :0.0 [4] => svn: To better debug SSH connection problems, remove the -q option from 'ssh' in the [tunnels] section of your Subversion configuration file. [5] => svn: Network connection closed unexpectedly [6] => svn: warning: Can't open file '/root/.subversion/servers': Permission denied [7] => No protocol specified [8] => [9] => (gnome-ssh-askpass:6066): Gtk-WARNING **: cannot open display: :0.0 [10] => svn: To better debug SSH connection problems, remove the -q option from 'ssh' in the [tunnels] section of your Subversion configuration file. [11] => svn: Network connection closed unexpectedly ) 
```

我可以从命令行运行任何一个 svn 命令就好了，我也有基于 ssh-key 的身份验证设置来与 svn.server.com 对话

我想做的就是从主干获取文件夹列表。我们的 svn 仅用于 svn+ssh 访问。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T10:07:52.953

你的答案在这里：

[通过浏览器从 php 脚本调用 svn update 不起作用](https://stackoverflow.com/questions/2947843/calling-an-svn-update-from-a-php-script-via-a-browser-is-not-working)

1.  在 .svn 目录上运行 chmod 777
2.  通过命令行运行 svn update
3.  调用脚本

# c# - c#中的一个语句中的多个内联赋值

> ID：12040863
> 
> 赞同：2
> 
> 时间：2012-08-20T15:44:38.740
> 
> 标签：c#, variable-assignment

显然，以下在 c# 中完全没问题；

```
int a;
int b = a = 2; 
```

是否可以在单个语句中在 c# 中进行多个变量赋值？

即类似的东西；

```
int a = (int b = 2); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:50:00.650

如果我们看：

```
int a;
int b = a = 2; 
```

基本上就是`a=2;`这样`b=a;`（但没有额外的评估）。所以我们可以通过颠倒顺序得到类似的结果：

```
int a = 2, b = a; 
```

但是：我会说有点犹豫：也请优先考虑可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:47:05.570

据我所知不是。我知道的唯一变化是：

```
int a = 2, b = 2; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T15:47:40.333

可能与您将要获得的一样近。

```
int a, b = a = 2;

Console.WriteLine(a.ToString()); // 2
Console.WriteLine(b.ToString()); // 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:46:38.767

不，但你可以

```
int a = 2, b = a; 
```

这里 a 将被初始化，然后 b 将被初始化为与 a 相同的值。

或者

```
int a, b = 2; 
```

或者

```
int a = 2, b = 2; 
```

或者如你所说

```
int a = b = 2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T15:47:07.673

你是这个意思？

```
int a = 2, b = 2; 
```

工作正常

# php - 修改扩展类中父类的变量

> ID：12040864
> 
> 赞同：0
> 
> 时间：2012-08-20T15:44:43.547
> 
> 标签：php, class

我想通过调用 B 类中的函数 replace 来替换 A 类中的一个变量。例如，在下面的代码中，我想将 'hi' 替换为 'hello' 但输出是 'hi'
PS：B 类是某个控制器，必须在 A 类中获取实例.
我正在使用 php 5.2.9+

```
<?php
$a = new A();
class A {
    protected $myvar;

    function __construct() {
        $this->myvar = "hi";
        $B = new B();
        echo $this->myvar; // expected value = 'hello', output = 'hi'
    }

    function replace($search, $replace) {
        $this->myvar = str_replace($search, $replace, $this->myvar);
    }
}

class B extends A {
    function __construct() {
        parent::replace('hi', 'hello');
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T15:48:29.860

这不是类和继承的工作方式。

```
<?php
$a = new A();
class A {
    protected $myvar;

    function __construct() {
        $this->myvar = "hi";

        /**
         * This line declares a NEW "B" object with its scope within the __construct() function
         **/
        $B = new B();

        // $this->myvar still refers to the myvar value of class A ($this)
        // if you want "hello" output, you should call echo $B->myvar;
        echo $this->myvar; // expected value = 'hello', output = 'hi'
    }

    function replace($search, $replace) {
        $this->myvar = str_replace($search, $replace, $this->myvar);
    }
}

class B extends A {
    function __construct() {
        parent::replace('hi', 'hello');
    }
}
?> 
```

如果您要检查`$B`，它的`myvar`值将是“你好”。您的代码中的任何内容都不会修改`$a->myvar`.

如果要声明`$B`修改`A`对象的成员变量，则需要将该对象传递给构造函数：

```
class A {
    .
    .
    .

    function __construct() {
         .
         .
         .
         $B = new B($this);
         .
         .
         .
    }
}
class B extends A {
    function __construct($parent) {
        $parent->replace('hi', 'hello');
    }
} 
```

**注意：**这是一个非常糟糕的继承实现；虽然它做了你“想要”它做的事情，但这不是对象*应该*如何相互交互的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:51:36.910

对你的脚本稍加修改就可以了>它很乱，但我知道你想先给父母打电话

```
$a = new A();
class A {
    protected $myvar;

    function __construct() {
        $this->myvar = "hi";
        $B = new B($this);
        echo $this->myvar; // expected value = 'hello', output = 'hi'
    }

    function replace($search, $replace) {
        $this->myvar = str_replace($search, $replace, $this->myvar);
    }
}

class B extends A {
    function __construct($a) {
        $a->replace('hi', 'hello');
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T15:48:04.630

目前，您正在创建一个`A`类的实例，那么您将永远不会调用该`B::replace()`函数。

更改此行：

```
$a = new A(); 
```

进入

```
$b = new B(); 
```

# javascript - 来自 ajax 响应的 JSON 对象

> ID：12040867
> 
> 赞同：0
> 
> 时间：2012-08-20T15:44:58.767
> 
> 标签：javascript, json

从下面的 JSON 字符串 `{cols:[{"id":"t","label":"Title","type":"string"},{"id":"l","label":"Avg ","type":"string"},{"id":"lb","label":"High","type":"string"},{"id":"lo","label":"Low","type":"string"}],rows:[{"c":[{"v":"Change navigation"},{"v":5.6666666666667},{"v":"10"},{"v":"1"}]},{"c":[{"v":"Executive leadership"},{"v":6.0666666666667},{"v":"7"},{"v":"3"}]},{"c":[{"v":"Business ownership"},{"v":5.8095238095238},{"v":"10"},{"v":"2"}]},{"c":[{"v":"Change enablement"},{"v":6.4285714285714},{"v":"9"},{"v":"5"}]}]}`

我怎么得到类似的东西，

`['Change navigation=6.5333333333333','Executive leadership=6.0666666666667', 'Business ownership=5.8095238095238','Change enablement=6.4285714285714']`

使用 Javascript

我得到了一个 JSON 对象作为 AJAX 的响应。现在尝试用它绘制图像图表。我应用 JSON.stringify 来转换对象。但不知道如何转换为图表可以理解的格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:46:56.300

将您的 JSON 字符串粘贴到神奇的 JSONLint 中，您会发现您的 JSON 无效。JavaScript 将尝试获取有效部分，这就是为什么您无法获取完整对象的原因。

[http://jsonlint.com/](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:47:46.003

创建一个结果数组。获取`rows`已解析对象的属性，然后遍历该数组，并为每个条目将适当的字符串 ( `entry.c[0].v+" "+entry.c[1].v`) 推送到结果数组。完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T15:48:26.807

本质上，您必须遍历每一行，并以 chard 控件期望的格式构建一组新对象，然后将其加载到图表控件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T15:58:23.140

如果`json`是您的 JSON 对象，您可以使用以下代码：

```
var arr = [],
    i = 0;

for (; i < json.rows.length; i++) {
    arr.push(json.rows[i].c[0].v + '=' + json.rows[i].c[1].v);
}

console.log(arr);  // -> ["Change navigation=5.6666666666667", "Executive leadership=6.0666666666667", "Business ownership=5.8095238095238", "Change enablement=6.4285714285714"] 
```

这是一个[**演示**](http://jsfiddle.net/teBF8/)。

# java - JSF - 如何将参数从一个控制器传递到另一个控制器动作事件？

> ID：12040870
> 
> 赞同：3
> 
> 时间：2012-08-20T15:45:09.503
> 
> 标签：java, jsf, jakarta-ee

如何传递参数或设置托管 Bean 的字段以从 addAction 获得适当的副作用？

我的 ManagedBean listaEntrada 有一个引用属性，但是我需要使用 ProductController Bean 从实体管理器获取描述。然后我需要调用 listaEntrada Bean 的 addAction 将该产品添加到产品列表中。

我的问题是如何传递从 productController 获得的值并设置我的 listaEntrada 控制器字段

是否可以/正确执行 value="#{listaEntrada.referencia}=#{productController.referencia}" ？

BalusC 等感谢您的回复，感谢您的回复和我的研究，该项目正在形成。

注意：我目前正在使用 JSF，但我将在最终产品上使用 Primefaces，因此使用 primefaces 命名空间。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h1>Adicionar Referências</h1>
        <h3>Lista de Referências</h3>
        <h:form>
            <table>
                <tr>
                    <td>Referencia :</td>
                    <td>
<!--                        <h:inputText size="10" value="#{listaEntrada.referencia}" />-->
                        <h:inputText value="#{produtoController.reference}" 
                                     onkeypress="if (event.keyCode == 13) {onchange(); return false; }"> 
                            <f:ajax event="change" render="textDescri" listener="#{produtoController.listener}"/> 
                        </h:inputText>
                    </td>

                </tr>
                <tr>
                    <td>Descrição :</td>
                    <td>
<!--                        <h:inputText size="20" value="#{listaEntrada.descricao}" />-->
                        <h:outputText id="textDescri" value="#{produtoController.replyWith}" /> 
                    </td>
                </tr>
                <tr>
                    <td>Quantidade :</td>
                    <td><h:inputText size="5" value="#{listaEntrada.quantidade}" /></td>
                </tr>
                <tr>
                    <!--                    <p:calendar id="dataEntrada"
                                                    value="#{listaEntrada.dataEntrada}"
                                                    showOn="button"
                                                    inputStyle="width:100px;"
                                                    navigator="true"/>-->
                </tr>    
            </table>

            <h:commandButton value="Adicionar" action="#{order.addAction}" />
            <h3>Lista de Produtos</h3>

            <h:dataTable value="#{listaEntrada.itemList}" var="item"
                         styleClass="order-table"
                         headerClass="order-table-header"
                         rowClasses="order-table-odd-row,order-table-even-row"
                         >

                <h:column>

                    <f:facet name="header">Referencia</f:facet>
                    #{item.referencia}

                </h:column>

                <h:column>

                    <f:facet name="header">Descrição</f:facet>
                    #{item.descricao}

                </h:column>

                <h:column>

                    <f:facet name="header">Quantidade</f:facet>
                    #{item.quantidade}

                </h:column>

                <h:column>

                    <f:facet name="header">Data Entrada</f:facet>
                    #{item.dataEntrada}

                </h:column>
                <h:column>

                    <f:facet name="header">Action</f:facet>

                    <h:commandLink value="Apagar" action="#{lista.deleteAction(item)}" />

                </h:column>
            </h:dataTable>
        </h:form>
    </h:body>
</html> 
```

这是我的 Bean 减去 getter 和 setter：

```
package Controllers;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Date;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean(name = "listaEntrada")
@SessionScoped
public class ListaEntrada implements Serializable {

    private static final long serialVersionUID = 1L;
    //Fields
    //Propriedades Produto
    String referencia;
    String descricao;
    int quantidade;
    Date dataEntrada;
    //Propriedades de Localizacao    
    private String armazem;
    private String corredor;
    private String estante;
    private String prateleira;

    private static final ArrayList<ListItem> listItems =
            new ArrayList<ListItem>(Arrays.asList(
                new ListItem("1", "ProdutoFixo", new Date(), 11),
                new ListItem("2", "ProdutoFixo", new Date(), 22))
            );

    //Operações de lista
    //Retorna lista 
    public ArrayList<ListItem> getItemList() {
        return listItems;
    }

    public String addAction() {

        //Cria um objecto Order com os campos 
        ListItem item = new ListItem(this.getReferencia(), this.getDescricao(), this.getDataEntrada(), this.getQuantidade());

        //Adiciona a orderList
        listItems.add(item);

        return null;
    }

    public String deleteAction(ListItem item) {

        listItems.remove(item);
        return null;
    }

    //ENTIDADE listItem
    public static class ListItem {

        String referencia;
        String descricao;
        Date dataEntrada;
        int quantidade;

        public ListItem(String ref, String des, Date dE, int qtt) {
            this.referencia = ref;
            this.descricao = des;
            this.dataEntrada = dE;
            this.quantidade = qtt;
        }

    }
} 
```

这是我的 productController bean：

```
package Controllers;

import entities.Produto;
import Controllers.util.JsfUtil;
import Controllers.util.PaginationHelper;
import Session.ProdutoFacade;

import java.io.Serializable;
import java.util.ResourceBundle;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.SessionScoped;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;
import javax.faces.event.AjaxBehaviorEvent;
import javax.faces.model.DataModel;
import javax.faces.model.ListDataModel;
import javax.faces.model.SelectItem;

@ManagedBean(name = "produtoController")
@SessionScoped
public class ProdutoController implements Serializable {

    private Produto current;
    private DataModel items = null;
    private int Reference;
    @ManagedProperty(value = "replyWith")
    private String replyWith;
    @EJB
    private Session.ProdutoFacade ejbFacade;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public ProdutoController() {
    }

    public void listener(AjaxBehaviorEvent event) {
        if (getReference() >= 0) {
            Produto returnProduto = getFacade().find(getReference());
            if (returnProduto != null) {
                String returnedName = returnProduto.getDescricao();
                setReplyWith(returnedName);
            } else {
                setReplyWith("N/A");
            }
            System.out.println(getReplyWith());
        }
        System.out.println("I am Listening!");
    }

    public Produto getSelected() {
        if (current == null) {
            current = new Produto();
            selectedItemIndex = -1;
        }
        return current;
    }

    private ProdutoFacade getFacade() {
        return ejbFacade;
    }

    public PaginationHelper getPagination() {
        if (pagination == null) {
            pagination = new PaginationHelper(10) {

                @Override
                public int getItemsCount() {
                    return getFacade().count();
                }

                @Override
                public DataModel createPageDataModel() {
                    return new ListDataModel(getFacade().findRange(new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}));
                }
            };
        }
        return pagination;
    }

    public String prepareList() {
        recreateModel();
        return "List";
    }

    public String prepareView() {
        current = (Produto) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "View";
    }

    public String prepareCreate() {
        current = new Produto();
        selectedItemIndex = -1;
        return "Create";
    }

    public String create() {
        try {
            getFacade().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ProdutoCreated"));
            return prepareCreate();
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String prepareEdit() {
        current = (Produto) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "Edit";
    }

    public String update() {
        try {
            getFacade().edit(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ProdutoUpdated"));
            return "View";
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String destroy() {
        current = (Produto) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        performDestroy();
        recreatePagination();
        recreateModel();
        return "List";
    }

    public String destroyAndView() {
        performDestroy();
        recreateModel();
        updateCurrentItem();
        if (selectedItemIndex >= 0) {
            return "View";
        } else {
            // all items were removed - go back to list
            recreateModel();
            return "List";
        }
    }

    private void performDestroy() {
        try {
            getFacade().remove(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("ProdutoDeleted"));
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        }
    }

    private void updateCurrentItem() {
        int count = getFacade().count();
        if (selectedItemIndex >= count) {
            // selected index cannot be bigger than number of items:
            selectedItemIndex = count - 1;
            // go to previous page if last page disappeared:
            if (pagination.getPageFirstItem() >= count) {
                pagination.previousPage();
            }
        }
        if (selectedItemIndex >= 0) {
            current = getFacade().findRange(new int[]{selectedItemIndex, selectedItemIndex + 1}).get(0);
        }
    }

    public DataModel getItems() {
        if (items == null) {
            items = getPagination().createPageDataModel();
        }
        return items;
    }

    private void recreateModel() {
        items = null;
    }

    private void recreatePagination() {
        pagination = null;
    }

    public String next() {
        getPagination().nextPage();
        recreateModel();
        return "List";
    }

    public String previous() {
        getPagination().previousPage();
        recreateModel();
        return "List";
    }

    public SelectItem[] getItemsAvailableSelectMany() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), false);
    }

    public SelectItem[] getItemsAvailableSelectOne() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), true);
    }

    /**
     * @return the Reference
     */
    public int getReference() {
        return Reference;
    }

    /**
     * @param Reference the Reference to set
     */
    public void setReference(int Reference) {
        this.Reference = Reference;
    }

    /**
     * @return the replyWith
     */
    public String getReplyWith() {
        return replyWith;
    }

    /**
     * @param replyWith the replyWith to set
     */
    public void setReplyWith(String replyWith) {
        this.replyWith = replyWith;
    }

    @FacesConverter(forClass = Produto.class)
    public static class ProdutoControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            ProdutoController controller = (ProdutoController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "produtoController");
            return controller.ejbFacade.find(getKey(value));
        }

        java.lang.Integer getKey(String value) {
            java.lang.Integer key;
            key = Integer.valueOf(value);
            return key;
        }

        String getStringKey(java.lang.Integer value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof Produto) {
                Produto o = (Produto) object;
                return getStringKey(o.getIdproduto());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + ProdutoController.class.getName());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T15:57:14.237

我定义：

```
<html xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"> 
```

我可以使用 f:setPropertyActionListener 将参数从 ManagedBean 传递给另一个：

```
<h:commandButton image="buscar.png" action="#{bean2.addData}"
    immediate="true" >
    <f:setPropertyActionListener target="#{bean2.data}" value="#{bean1.data}" />
    <f:setPropertyActionListener target="#{bean2.strReference}" value="test" />
</h:commandButton> 
```

[已编辑] 将 a4j 更改为 h

# sql - 查询返回基于两个唯一维度的聚合？

> ID：12040875
> 
> 赞同：0
> 
> 时间：2012-08-20T15:45:25.507
> 
> 标签：sql, sql-server, sql-server-2008, tsql, aggregate

我有以下表格，其中包含 SQL Server 2008 R2 中的客户和购买数据：

**顾客**

```
CustId   Last    First    Phone
   1     Doe     John    555-5555  
   2     Smith   Sally   444-4444
   3     Smith   Greg    222-1212 
```

**Order_Header**

```
OrderId  CustId  Date  
 1001       3   07/08/2011
 1002       2   07/19/2011
 1003       2   03/12/2012
 1004       1   03/14/2012
 1005       3   03/20/2012
 1006       1   04/17/2012
 1007       2   06/04/2012
 1008       1   08/04/2011 
```

**Order_Lines**

```
OrderId     Sequence    Item      Type    Manufacturer   Price
 1001          1        WIDGET     C         WidgCo      12.00
 1001          2        SWITCH     C        SwitchCo     10.00
 1002          1        RADIO      A        RadSupply    30.00
 1002          2        CRT        A        CRT&More     31.00
 1002          3        NCARD      G        iNetwork      5.00
 1003          1        SENSOR     E        Sensora       7.50
 1004          1        SENSOR     D        Sensora       6.00
 1005          1        WIDGET     C         WidgInc     11.50
 1006          1        RADIO      A        RadSupply    30.00
 1006          2        SCREEN     A        ScreensInc    2.00
 1007          1        ANTENNA    G       AntennasPlus   5.50
 1008          1        SWITCH     B       SwitchOutlet   6.00 
```

我正在尝试创建一个查询，该查询将列出每个客户、他们的联系信息以及他们在每种类型上花费的总额以及他们在每个制造商处花费的总额。到目前为止，我已经尝试了各种不同的 JOINS，但我似乎无法让它工作。
我希望返回这样的东西：

```
CustomerId  Last  First  Phone     TYPE  TOT_TYPE  
   1        Doe   John  555-5555    A      32.00
   1        Doe   John  555-5555    B      6.00  
   1        Doe   John  555-5555    D      6.00 
```

我也不确定如何合并制造商总数。如何在同一个查询中返回两个数据集？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T17:30:34.320

这听起来有点像你想要[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)的数据。这可以让你得到`type`每个总数，然后每个总数`manufacturer`。有两种方式，`PIVOT`要么是静态的，要么是动态的。

静态（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8559e/1)）

```
SELECT custid, last, first, phone, type,
    IsNull([AntennaPlus], 0) as [AntennaPlus],
    IsNull([CRT&More], 0) as [CRT&More],
    IsNull([iNetwork], 0) as [iNetwork],
    IsNull([RadSupply], 0) as [RadSupply],
    IsNull([ScreensInc], 0) as [ScreensInc],
    IsNull([Sensora], 0) as [Sensora],
    IsNull([SwitchCo], 0) as [SwitchCo],
    IsNull([SwitchOutlet], 0) as [SwitchOutlet],
    IsNull([WidgCo], 0) as [WidgCo],  
    IsNull([AntennaPlus], 0)+ 
    IsNull([CRT&More], 0)+ 
    IsNull([iNetwork], 0)+ 
    IsNull([RadSupply], 0)+ 
    IsNull([ScreensInc], 0)+ 
    IsNull([Sensora], 0)+ 
    IsNull([SwitchCo], 0)+ 
    IsNull([SwitchOutlet], 0)+ 
    IsNull([WidgCo], 0) Total 
from 
 (
    SELECT c.custid, c.last, c.first, c.phone,
        ol1.type, 
        ol1.manufacturer,
        ol1.price
    from customers c
    inner join Order_Header oh
        on c.custid = oh.custid
    inner join Order_Lines ol1
        on oh.orderid = ol1.orderid
 ) x
 pivot 
 (
    sum(price)
    for manufacturer in ( [AntennaPlus], [CRT&More], [iNetwork], [RadSupply], [ScreensInc], [Sensora], [SwitchCo], [SwitchOutlet], [WidgCo])
 ) p 
```

Dynamic Pivot（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8559e/2)）

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot AS NVARCHAR(MAX),
    @colsTotal AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ', ' + QUOTENAME(manufacturer)
                    from Order_Lines
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsPivot = STUFF((SELECT distinct ',IsNull(' + QUOTENAME(manufacturer)+', 0) as ['+ manufacturer+ ']'
                    from Order_Lines
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsTotal = STUFF((SELECT distinct '+ IsNull(' + QUOTENAME(manufacturer)+', 0)'
                    from Order_Lines
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
      = 'SELECT custid, last, first, phone, type,' + @colsPivot + ', '+ @colsTotal+' Total from 
         (
            SELECT c.custid, c.last, c.first, c.phone,
                ol1.type, 
                ol1.manufacturer,
                ol1.price
            from customers c
            inner join Order_Header oh
                on c.custid = oh.custid
            inner join Order_Lines ol1
                on oh.orderid = ol1.orderid
         ) x
         pivot 
         (
            sum(price)
            for manufacturer in (' + @cols + ')
         ) p '
execute(@query) 
```

两者都应该提供相同的结果。不同之处在于静态版本必须硬编码所需的值。动态版本在运行时获取列的值，因此如果制造商更改它将自动调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T16:07:32.393

为什么这被否决了？这是对该问题的有效答案。这个问题似乎想要不同行的类型和制造商（它没有明确说明，但这是一个合理的解释）。在没有评论的情况下投反对票绝对是不礼貌的。

您需要使用 UNION 来执行此操作。一个提示是您的最终输出不适合您的问题。你没有制造商的位置。

```
select CustomerId, Last, First, Phone,
       Type, Manufacturer, TotPrice
from Customers C join
     ((select customerId, Type, NULL as Manufacturer, sum(Price) as TotPrice,
       from Order_Header oh join
            Order o
            on oh.OrderId = o.OrderId
       group by  customerId, Type
      ) union all
      ((select customerId, NULL as Type, Manufacturer, sum(Price) as TotPrice,
       from Order_Header oh join
            Order o
            on oh.OrderId = o.OrderId
       group by  customerId, Manufacturer
      )
     ) s
     on s.CustomerId = s.CustomerId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:33:03.900

为什么需要它们在同一个数据集中？他们正在回答两个完全不同的问题，因此以任何方式将它们组合起来并没有任何意义。如果可以将类型混合在一起，并且您希望 TYPE 列是 TYPE/MANUFACTURER，那么这很容易。如果您需要将类型放在列中，以便您可以将每个客户的所有内容放在一行中，则需要使用数据透视表。

如果您想要一个支点，请使用@bluefeet 的解决方案。否则，您可以考虑这个或 Gordon 的版本。我认为这可能会表现得更好，但测试是有序的。

```
SELECT
   C.DesiredColumns,
   P.Category,
   P.Item
   P.TotalPrice
FROM
   dbo.Customers C
   INNER JOIN (
      SELECT
         H.CustomerId,
         V.Category,
         V.Item,
         Sum(L.Price) TotalPrice
      FROM
         dbo.Order_Header H
         INNER JOIN dbo.Order_Lines L
            ON H.OrderId = L.OrderId
         CROSS APPLY (
            VALUES
               ('Type', [Type]),
               ('Mfr', Manufacturer)
         ) V (Category, Item)
      GROUP BY
         H.CustomerId
         V.Category,
         V.Item
   ) P ON C.CustomerId = P.CustomerId 
```

# python - 如何避免在 python 中使用 gevent 阻塞代码？

> ID：12040880
> 
> 赞同：13
> 
> 时间：2012-08-20T15:45:36.550
> 
> 标签：python, nonblocking, gevent

我正在玩 gevent，我试图了解为什么我的代码被阻塞以及如何修复它。

我有一个 greenlets 池，它们每个都与一个从远程 thrift 服务器收集数据的 thrift 客户端交谈。出于练习的目的，thrift 服务器总是需要 > 1s 来返回任何数据。当我生成 greenlets 并运行 join 时，它们不会并行执行，而是一个接一个地执行。我的理解是，发生这种情况是因为我的代码是“阻塞的”，因为当我运行时`monkey.patch_all()`，所有 greenlet 都神奇地并行运行。

那么如何让代码不阻塞自己，而不是让猴子修补所有东西而不理解它在做什么呢？

这里有一个我不明白的例子：

```
import time

from gevent.pool import Pool

def hello():
    print 'Hello %d' % time.time()
    time.sleep(1) 

def main():
    pool = Pool(5)
    for _ in xrange(5):
        pool.spawn(hello)

    pool.join()

if __name__ == '__main__':
    main() 
```

输出

```
Hello 1345477112
Hello 1345477113
Hello 1345477114
Hello 1345477115
Hello 1345477116 
```

我知道我可以使用 gevent.sleep，但是如何使用常规 time.sleep 使该功能非阻塞？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T16:00:37.370

Greenlets 从不并行运行，它们都共享同一个进程和同一个线程，因此，一次最多运行一个。

Greenlets是绿色的，因为它们是co-routines（“co”来自于合作），因此，甚至不能说它们是并发运行的，因为你需要协调它们的运行。Gevent 在幕后为您完成大部分工作，并从 libevent（或 libev）知道哪些 greenlets 已准备好运行。根本没有抢占。

在您给出的示例中，`time.sleep(2)`将使进程在操作系统内休眠，因此 gevent 的调度程序将无法运行并且无法切换到另一个 greenlet。

因此，关于您的问题：如果您不想修补现有代码，则必须手动替换对 gevent 等效项的每个阻塞调用，以便 gevent 可以安排调用 greenlet 并选择另一个运行。

编辑：关于使用 gevent 和节俭而不用猴子修补所有：我不知道它是否值得。

如果要修改 (fork) thrift 的库，只需要更改文件`TSocket.py`，并更改：

```
import socket 
```

到：

```
from gevent import socket 
```

但是你的 thrift 库将依赖于 gevent，如果你更新了 thrift，你将需要重新应用补丁。

您也可以子类`TSocket`化，更改方法`open()`以使用 gevent 的套接字，并使用它来代替前者，但对我来说似乎更复杂。

我实际上是在使用 Thrift 和 Gevent，为了简单起见，我选择猴子修补整个事情。

# c# - 可以将此 xml 读入我的类结构

> ID：12040888
> 
> 赞同：0
> 
> 时间：2012-08-20T15:46:02.823
> 
> 标签：c#, xml, linq-to-xml

我需要将此 xml 读入一个类。我是 LINQ to XML 的新手。

```
<quiz>
  <step id="1">
    <question id="1">
      <text>What is the world’s tallest tower?</text>
      <answers>
        <answer id="1" value="0">Eiffel Tower</answer>
        <answer id="2" value="0">Petronas Tower</answer>
        <answer id="3" value="0">Canton Tower</answer>
        <answer id="4" value="1">Tokyo Skytree </answer>
      </answers>
    </question>
  </step>
</quiz> 
```

我已经创建了这两个类，但我不确定如何轻松读取信息。我的头被它毁了。

```
public class QuizQuestion
{
    public int StepId { get; set; }
    public int QuestionId { get; set; }
    public string QuestionText { get; set; }
    public List<QuizAnswer> Answers { get; set; }
}

public class QuizAnswer
{
    public int AnswerId { get; set; }
    public int CorrectAnswer { get; set; }
    public String AnswerText { get; set; }
} 
```

这个我试过了，不知道对不对

```
var quizQuestions = new List<QuizQuestion>();

_cacheLock.EnterWriteLock();
try
{
    XDocument xmlDoc = XDocument.Load(_questionsFilePath);

    XDocument data = XDocument.Load(_questionsFilePath);

    quizQuestions = (from c in data.Descendants("quiz")
    orderby c.Attribute("question")
    select new QuizQuestion()
    {
        StepId = Convert.ToInt32(c.Attribute("Id").Value),
        QuestionId = Convert.ToInt32(c.Attribute("Id").Value),
        QuestionText = c.Value
    }).ToList();

    foreach (QuizQuestion quiz in quizQuestions)
    {
        quiz.Answers = 
            (from c in data.Descendants("quiz")
                orderby c.Attribute("question")
                where Convert.ToInt32(c.Attribute("Id").Value) == 1
                select new QuizAnswer()
                {
                    AnswerId = Convert.ToInt32(
                                 c.Attribute("id").Value),
                    AnswerText = c.Value,
                    CorrectAnswer = Convert.ToInt32(
                                      c.Attribute("value").Value)
                }).ToList();
    }

}
catch (NullReferenceException e)
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:33:21.790

我已经测试了我的并且它有效，包括根据他们的 ID 对问题进行排序。

```
quizQuestions = (from step in data.Element("quiz").Elements("step")
                 from question in step.Elements("question")
                 orderby question.Attribute("id").Value
                 select new QuizQuestion()
                 {
                     StepId = Convert.ToInt32(step.Attribute("id").Value),
                     QuestionId = Convert.ToInt32(question.Attribute("id").Value),
                     QuestionText = question.Element("text").Value,
                     Answers = (from answer in question.Element("answers").Elements("answer")
                         select new QuizAnswer
                         {
                             AnswerId = Convert.ToInt32(answer.Attribute("id").Value),
                             AnswerText = answer.Value,
                             CorrectAnswer = Convert.ToInt32(answer.Attribute("value").Value)
                         }).ToList()
                  }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:52:02.217

这应该工作

```
var quizQuestions = (from question in data.Descendants("question")
                  select new QuizQuestion
                  {

                    //...                    

                    Answers = (from answer in question.Descendants("answer")
                              select new QuizAnswer
                              {

                                 //...

                              }).ToList(),

                  }).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T16:15:50.077

像这样的东西：

```
IEnumerable<QuizQuestion> questions =
    from step in doc.Descendants("step")
    from question in step.Descendants("question")
    select new QuizQuestion
    {
        StepId = int.Parse(step.Attribute("id").Value),
        QuestionId =  int.Parse(question.Attribute("id").Value),
        QuestionText = question.Element("text").Value,
        Answers = (from answer in question.Descendants("answer")
                    select new QuizAnswer
                    {
                        AnswerId = int.Parse(answer.Attribute("id").Value),
                        CorrectAnswer = int.Parse(answer.Attribute("value").Value),
                        AnswerText = answer.Value
                    }).ToList()
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T16:10:08.427

如果您的 XML 不打算改变结构，您可以从 Schema 生成一个类。在 Visual Studio 工具中使用 xsd.exe，然后使用 XmlSerializer 类将 XML 反序列化到您的类中。

[关于如何使用 XSD 工具的 MSDN 文章](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)

[关于 XMLSerializer 的 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T16:09:22.543

只需对有效的 xml 添加一些检查（某些元素可以为 null 或其他内容）

```
quizQuestions = (from s in data.Root.Elements("step")
                     from q in s.Elements("question") 
                     where q != null
    orderby s.Attribute("question")
    select new QuizQuestion()
    {
        StepId = Convert.ToInt32(s.Attribute("id").Value),
        QuestionId = Convert.ToInt32(q.Attribute("id").Value),
        QuestionText = q.Value,
        Answers = (from a in q.Element("answers").Elements("answer")
                   select new QuizAnswer()
                       {
                           AnswerId = Convert.ToInt32(a.Attribute("id").Value),
                           CorrectAnswer = Convert.ToInt32(a.Attribute("value").Value),
                           AnswerText = a.Value
                       }).ToList()
    }).ToList(); 
```

# c++ - for 循环初始化中的 auto 和 decltype

> ID：12040891
> 
> 赞同：4
> 
> 时间：2012-08-20T15:46:19.237
> 
> 标签：c++, templates, c++11, auto, decltype

我一直很高兴地迭代

```
for( auto n = object.get_size(), i = decltype( n )( 0 ); 
     i < n; 
     ++i 
) { ... } 
```

让所有类型自动正确。使用 g++ 4.7.1 没有问题，但使用 4.7.0 版本时出现错误。由于 4.7.1 相当新，我想知道哪个版本实现了这个错误，哪个版本是标准。此外，4.7.0（以及 std=c++0x 的 4.6.3）仅在与模板一起使用时才会报错，并且在不同的用法中会产生不同的错误。请参阅以下代码：

```
/* test.cxx */
#ifdef V1

#ifdef GENERIC
template< class T >
void do_some( T obj ) {
    for( auto n = obj, i = decltype( n )( 0 );
             i < n; ++i ) { }
}
#endif

#ifdef SPECIFIC
void do_some( int obj ) {
    for( auto n = obj, i = decltype( n )( 0 );
             i < n; ++i ) { }
}
#endif

#endif

#ifdef V2
template< class T >
class foo {
    T member;
public:
    foo( T stuff ) : member( stuff ) {}
    T get_member() { return member; }
};

#ifdef GENERIC
template< class T >
void do_some( T obj ) {
    for( auto n = obj.get_member(), i = decltype( n )( 0 );
             i < n; ++i ) { }
}
#endif

#ifdef SPECIFIC
void do_some( foo< int > obj ) {
    for( auto n = obj.get_member(), i = decltype( n )( 0 );
             i < n; ++i ) { }
}
#endif

#endif

int main() {
    #ifdef V1
    int foo_inst = 10;
    #endif

    #ifdef V2
    foo< int > foo_inst( 10 );
    #endif

    do_some( foo_inst );

    return 0;
} 
```

和 g++ 版本 4.7.0 的输出

```
$ g++-4.7 -DV1 -DGENERIC -std=c++11 test.cxx 
test.cxx: In function ‘void do_some(T)’:
test.cxx:7:42: error: inconsistent deduction for ‘auto’: ‘T’ and then ‘decltype (n)’
$ g++-4.7 -DV1 -DSPECIFIC -std=c++11 test.cxx 
/* compiles fine */
$ g++-4.7 -DV2 -DGENERIC -std=c++11 test.cxx 
test.cxx: In function ‘void do_some(T)’:
test.cxx:35:55: error: variable ‘auto n’ with ‘auto’ type used in its own initializer
$ g++-4.7 -DV2 -DSPECIFIC -std=c++11 test.cxx 
/* compiles fine */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:56:18.330

没有解释，只是测试：对于早于 4.7.1 的 gcc，我有与你相同的错误，并且没有来自 4.7.1、4.8（主干）和 clang-3.2（主干）的错误

# python - 无法从消息包中解码 python 中的加密字符串（Ruby openssl）

> ID：12040902
> 
> 赞同：2
> 
> 时间：2012-08-20T15:46:58.813
> 
> 标签：python, ruby, msgpack, messagepack

我无法对通过消息包从套接字连接获得的一些数据进行解码，并因此对其进行解密。我从 UTF-8 中的 Ruby on Rails Web 应用程序中获取字符串，并使用 messagepack 将其全部捆绑并使用套接字将其发送到 python 服务。其他数据很好：字符串、数字、数组等。但是我的加密密码被破坏了。

[https://github.com/msgpack/msgpack/issues/15](https://github.com/msgpack/msgpack/issues/15)这个讨论建议强制使用 ascii，我在 rails 代码和 python 中都这样做了。***如果我在 ruby​​ 中强制使用 ascii 而在 python 中什么也不做，我会在字符串中得到垃圾，但最后我有正确的未加密密码。***如果我尝试在我的 python 脚本中强制使用 ascii，我会收到解码错误

```
while 1:
    buf = clientsocket.recv(1024)
    unpacker.feed(buf)
    for obj in unpacker:
        print obj #works great! => ['3', [['really long url', [87987234, 'gobbledyguck of password']]]]
        #key.decrypt(obj[1][0][1][1]) roughly gives "YD3ztï¿½(-ï¿½½ï¿½ï¿½=you suck"
        print key.decrypt(obj[1][0][1][1].decode('ascii')) 
```

加密是使用公钥/私钥完成的（Python 中的 Crypto.PublicKey RSA，ruby 中的 openssl）。我可以在每个脚本中很好地解密和加密（而不是通过消息包通过套接字发送）

有什么想法吗？

**编辑：**
经过一些实验和思考后，我意识到密码出来就好了这一事实很有趣。问题是字符串开头的多余垃圾。我只是不知道它来自哪里......或者截断它是否安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T01:30:13.797

我最近遇到了明显是网络弄乱了我的密码字符的问题。在通过网络发送之前，我尝试在 base64 中对密码进行编码，并且像魔术一样完美地工作。

采用：

```
require 'base64'

cipher = Base64.encode64(cipher) 
```

-通过网络发送密码-

```
cipher = Base64.decode64(cipher) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T19:44:47.630

解决方案最终在于输出具有正确的未加密数据和绒毛。几个快速的谷歌让我了解到 ruby​​ 的 RSA 公钥的 openssl 实现默认打开了 PKCS#1 填充......很难快速找到一个好的 python 模块，所以在这里找到了快速而肮脏的解决方案

[http://kfalck.net/2011/03/07/decoding-pkcs1-padding-in-python](http://kfalck.net/2011/03/07/decoding-pkcs1-padding-in-python)

这就像一个魅力！

作为替代（可能更清洁）的解决方案[http://stuvel.eu/files/python-rsa-doc/usage.html](http://stuvel.eu/files/python-rsa-doc/usage.html)看起来不错。

查看 ruby​​ apidock 寻找不使用填充的方法并不直观[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/PKey/RSA.html#method-i -public_encrypt](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL/PKey/RSA.html#method-i-public_encrypt)

希望这对其他人有帮助

# excel - Excel VBA中的多重过滤？

> ID：12040906
> 
> 赞同：7
> 
> 时间：2012-08-20T15:47:09.970
> 
> 标签：excel, vba

我正在尝试使用 2 列和 2 个不同的过滤器要求过滤我的数据。

```
 ActiveSheet.AutoFilterMode = False
    ActiveSheet.Range("$K$2:$ZZ$200").AutoFilter Field:=5, Criteria1:="yes"
    ActiveSheet.Range("E:E").AutoFilter Field:=1, Criteria1:="Low" 
```

如果我按“是”过滤，那么它可以工作，如果我按“低”过滤，它也可以工作。但是，如果我尝试用 yes 过滤范围 K2-ZZ200，然后用 Low 过滤 E 列，它似乎隐藏了所有内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T16:10:32.450

您必须`Range("$K$2:$ZZ$200")`对两个[`AutoFilter`](http://msdn.microsoft.com/en-us/library/office/bb242013%28v=office.12%29.aspx)语句使用相同的：

```
' Column A = Field 1
ActiveSheet.Range("$K$2:$ZZ$200").AutoFilter Field:=1, Criteria1:="yes"
' Column E = Field 5
ActiveSheet.Range("$K$2:$ZZ$200").AutoFilter Field:=5, Criteria1:="Low" 
```

此外，您可能需要设置`ActiveSheet.AutoFilterMode = True`，但我不完全确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T08:28:35.967

几乎。设法使用数组来做到这一点。顺便说一下，范围不需要相同。

```
 ActiveSheet.AutoFilterMode = False
    ActiveSheet.Range("$E$2:$ZZ$200").AutoFilter Field:=nice, Criteria1:="yes"
    ActiveSheet.Range("$E$2:$ZZ$200").AutoFilter Field:=1, Criteria1:=Array( _
    "Filter 1", ""Filter 2", "On "Filter 3", ""Filter 4", ""Filter 5"), Operator:=xlFilterValues 
```

# jquery - 滑块图像淡入身体背景

> ID：12040912
> 
> 赞同：2
> 
> 时间：2012-08-20T15:47:43.043
> 
> 标签：jquery, css, slider, slideshow, opacity

这是一个很难解释的问题，所以我将使用一个示例。我有我的幻灯片，我想做的是在这个网页上的边缘淡化它：[http ://www.gloryworldseries.com/](http://www.gloryworldseries.com/)

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:09:14.637

您可以考虑放置两个从灰色渐变为透明的叠加层（左侧和右侧）。

您可以使用这个小工具轻松制作这些：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)。

为了说明，我给你做了一个[小提琴](http://jsfiddle.net/tNztZ/)，演示如何用你的 CSS 定位元素。

# security - 使用 POST 而不是 GET 更安全吗？

> ID：12040914
> 
> 赞同：1
> 
> 时间：2012-08-20T15:47:49.927
> 
> 标签：security, webpage

使用 POST 而不是 GET 是否有任何固有的“安全性”？例如，如果我有一个对 sql 注入开放的页面，POST 会以某种方式让我更安全吗？我知道它不会让我的代码变得更好，或者修复我的 sql 注入问题或任何问题（只是一个例子），但总的来说，POST 可以帮助网页更安全，不管它做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T15:59:54.127

POST 不会对安全注入做*任何事情。*

POST over GET 唯一可能的安全考虑是信息不会在 HTTP 引荐来源网址中泄漏到从页面链接到的站点。

这也意味着该信息不会出现在您的网络服务器日志中，这可能是寻找潜在漏洞的载体……但这也意味着除非您采取替代措施来记录值，否则它们将无法用于调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T15:50:08.363

# 一点都没有。

POST 只是告诉浏览器和代理该请求不是幂等的。（因此不应再次发送）

# ruby-on-rails-3.2 - 从 Ruby on Rails 中的嵌套方法重定向

> ID：12040924
> 
> 赞同：0
> 
> 时间：2012-08-20T15:48:09.530
> 
> 标签：ruby-on-rails-3.2

这是一个类似于我的代码。我需要做的是从嵌套方法重定向到其他页面并**停止执行它调用的所有操作**。在这种情况下，它是方法 2。它应该重定向到`'/home/index'`，我需要防止重定向到`'/home/index123'`

```
 class MyController::ApplicationController

    def index
     #some work
      method1
     #some work  that must be done if there is no redirect
     #some work   that must be done if there is no redirect
      redirect_to '/home/index123' 
    end

    private

    def method1
     #some work
     method2
     #some work that must be done if there is no redirect
     #some work  that must be done if there is no redirect
    end

    def method2
     #some work
     #I need to redirect to other page just from here!
     redirect_to '/home/index'
    end

end 
```

你的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:55:42.050

使您的重定向成为变量。将此变量设置为方法的返回值。例如：

```
 def method2
   #some work
   #I need to redirect to other page just from here!
   '/home/index'
 end

def index
     #some work
      to_action = method1
      redirect_to to_action
    end 
```

# c# - 如何获取有关基本元素的信息？.Children 抛出 NotImplementedException

> ID：12040926
> 
> 赞同：0
> 
> 时间：2012-08-20T15:48:21.697
> 
> 标签：c#, visual-studio, visual-studio-extensions, c#-code-model

我正在使用 Visual Studio 的 CodeModel 来收集代码中的接口信息。

我能够使用 type 成功收集有关接口的信息`CodeInterface`。这个接口公开了一个属性 Bases，它允许我发现我的接口继承自哪些接口。

但是，虽然我可以使用`.Children`. 我不能对父接口做同样的事情（ a`NotImplementedException`被抛出）。

最初我认为这个问题是因为我使用的是 FileCodeModel，所以我切换到`Project.CodeModel`：

```
FileCodeModel fileCM =  
        _applicationObject.ActiveDocument.ProjectItem.FileCodeModel; 
```

**我的代码：**

```
CodeModel CM = _applicationObject.ActiveWindow.Project.CodeModel;

CodeInterface myInterface = 
    (CodeInterface)CM.CodeTypeFromFullName( "ConsoleApplication8.IWrapper" );

foreach( CodeElement cE in myInterface.Bases ) {
    if( cE is CodeInterface ) {
        string itemName = cE.FullName;
        CodeInterface parentInterface = 
        (CodeInterface)CM.CodeTypeFromFullName( itemName );
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:54:05.723

原来使用的正确属性`CodeInterface`是`.Members`（它仍然是一个可枚举的集合`CodeElements`）

# gridview - 向 GridView 添加数据

> ID：12040933
> 
> 赞同：0
> 
> 时间：2012-08-20T15:48:32.463
> 
> 标签：gridview

我正在尝试将存储过程中的一些数据显示到我的`GridView`. 我正在做的是 onLoad；创建一个DataTable，向其中添加两行（已调试并且其中肯定有数据），然后；

GridView1.DataSource = 数据表

但是，我的 GridView 每次都返回空。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:52:13.993

尝试

```
 GridView1.DataBind(); 
```

加载数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T10:34:23.590

**在页面加载时，我们可以将数据与数据表绑定**

```
protected void Page_Load(object sender, EventArgs e)
{

    con.Open();
    cmd = con.CreateCommand();

    string CommandText1 = "select * from TRAVEL_Preferences_INFO where USER_ID='" + str_USER_ID + "'";
    DB = new SQLiteDataAdapter(CommandText1, con);
    DS.Reset();
    DB.Fill(DS);
    DT = DS.Tables[0];
    grdTravelPreference.DataSource = DT;
    grdTravelPreference.DataBind();
} 
```

# git - 从 GIT 远程分支获取特定文件

> ID：12040934
> 
> 赞同：10
> 
> 时间：2012-08-20T15:48:35.820
> 
> 标签：git

是否可以从远程存储库中提取但仅选择性地从我感兴趣的远程获取文件？我不想简单地拉下整个分支。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T15:57:26.247

“远程分支”只不过是一个提交指针和附属的包数据。如果你`git fetch <remote>`想查看远程文件和本地文件之间的差异，你可以这样做：

```
git diff <local_branch> <remote>/<remote_branch> -- <file> 
```

例如，在许多情况下，这将是`git diff master origin/master -- <file>`. 您还可以看到提交差异`git log`：

```
git log <local_branch>..<remote>/<remote_branch> -- <file> 
```

所以...`git log master..origin/master -- <file>`

最后，如果您只想从远程签出文件的特定版本（这并不理想；最好将远程分支与`git merge <remote>/<remote_branch>`or合并`git pull`），请使用：

```
git checkout <remote>/<remote_branch> -- <file> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T15:51:02.130

不，您必须获取整个分支，但可以选择签出特定文件。

# matlab - 将信号窗口代码从 Matlab 移植到 Java

> ID：12040937
> 
> 赞同：0
> 
> 时间：2012-08-18T11:44:31.623
> 
> 标签：matlab, voice, optimization

这是光谱减法算法代码的一部分，我正在尝试针对 android 优化它。请帮助我。

这是matlab代码：

```
function Seg=segment(signal,W,SP,Window)

% SEGMENT chops a signal to overlapping windowed segments
% A= SEGMENT(X,W,SP,WIN) returns a matrix which its columns are segmented
% and windowed frames of the input one dimentional signal, X. W is the
% number of samples per window, default value W=256\. SP is the shift
% percentage, default value SP=0.4\. WIN is the window that is multiplied by
% each segment and its length should be W. the default window is hamming
% window.
% 06-Sep-04
% Esfandiar Zavarehei

if nargin<3
    SP=.4;
end
if nargin<2
    W=256;
end
if nargin<4
    Window=hamming(W);
end
Window=Window(:); %make it a column vector

L=length(signal);
SP=fix(W.*SP);
N=fix((L-W)/SP +1); %number of segments

Index=(repmat(1:W,N,1)+repmat((0:(N-1))'*SP,1,W))';
hw=repmat(Window,1,N);
Seg=signal(Index).*hw; 
```

这是我们这个函数的java代码：

```
public class MatrixAndSegments 
{
    public int numberOfSegments;
    public double[][] res;

    public MatrixAndSegments(int numberOfSegments,double[][] res)
    {
        this.numberOfSegments = numberOfSegments;
        this.res = res;
    }
}

public MatrixAndSegments segment (double[] signal_in,int samplesPerWindow, double           shiftPercentage, double[] window)
{
    //default shiftPercentage = 0.4
    //default samplesPerWindow = 256  //W
    //default window = hanning 

    int L = signal_in.length;
    shiftPercentage = fix(samplesPerWindow * shiftPercentage); //SP
    int numberOfSegments = fix ( (L - samplesPerWindow)/ shiftPercentage + 1); //N

    double[][] reprowMatrix =  reprowtrans(samplesPerWindow,numberOfSegments);
    double[][] repcolMatrix = repcoltrans(numberOfSegments,    shiftPercentage,samplesPerWindow );

    //Index=(repmat(1:W,N,1)+repmat((0:(N-1))'*SP,1,W))';
    double[][] index = new double[samplesPerWindow+1][numberOfSegments+1];

    for (int x = 1;  x < samplesPerWindow+1; x++ )
    {
        for (int y = 1 ; y < numberOfSegments + 1; y++) //numberOfSegments was 3
        {
             index[x][y] = reprowMatrix[x][y] + repcolMatrix[x][y];
        }
    }

    //hamming window
    double[] hammingWindow = this.HammingWindow(samplesPerWindow);
    double[][] HW = repvector(hammingWindow, numberOfSegments);

    double[][] seg = new double[samplesPerWindow][numberOfSegments];
    for (int y = 1 ; y < numberOfSegments + 1; y++)
    {
        for (int x = 1; x < samplesPerWindow+1; x++)
        {
            seg[x-1][y-1] = signal_in[ (int)index[x][y]-1 ] * HW[x-1][y-1]; 
        }
    }
    MatrixAndSegments Matrixseg = new MatrixAndSegments(numberOfSegments,seg);
    return Matrixseg;
}

public int fix(double val) {
    if (val < 0) {
        return (int) Math.ceil(val);
    }
    return (int) Math.floor(val);
}

public double[][] repvector(double[] vec, int replications)
{
    double[][] result = new double[vec.length][replications];

    for (int x = 0; x < vec.length; x++) {
        for (int y = 0; y < replications; y++) {
            result[x][y] = vec[x];
        }
    }

    return result;
}

public double[][] reprowtrans(int end, int replications)
{
    double[][] result = new double[end +1][replications+1];

    for (int x = 1; x <= end; x++) {
        for (int y = 1; y <= replications; y++) {
            result[x][y] = x ;
        }
    }

    return result;
}

public double[][] repcoltrans(int end, double multiplier, int replications)
{
    double[][] result = new double[replications+1][end+1];

    for (int x = 1; x <= replications; x++) {
        for (int y = 1; y <= end ; y++) {
            result[x][y] = (y-1)*multiplier;
        }
    }  
    return result;
}

public double[] HammingWindow(int size)
{
    double[] window = new double[size];
    for (int i = 0; i < size; i++)
    {
        window[i] =  0.54-0.46 * (Math.cos(2.0 * Math.PI * i / (size-1)));
    }
    return window;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-18T12:36:08.490

逐句将 Matlab 代码“移植”到 Java 是一种不好的方法。

在 Matlab 中，很少使用循环和寻址单个元素来处理数据（因为 Matlab 解释器/VM 相当慢），而是通过调用块处理函数（已经仔细编写和优化）。这导致了一种非常特殊的编程风格，其中`repmat`, `reshape`, `find`, 花哨的索引等。用于执行通过 Java 循环更自然地表达的操作。

例如，要将矩阵 A 的每一列乘以向量 v，您将在 matlab 中编写：

```
A = diag(v) * A 
```

或者

```
A = repmat(v', 1, size(A, 2)) .* A 
```

这个解决方案：

```
for i = 1:size(A, 2),
  A(:, i) = A(:, i) .* v';
end; 
```

效率低下。

但是尝试在 Java 中做同样的事情并调用矩阵乘积或使用重复的 v 副本构建矩阵是非常愚蠢的。相反，只需执行以下操作：

```
for (int i = 0; i < rows; i++) {
  for (int j = 0; j < columns; j++) {
    a[i][j] *= v[i]
  }
} 
```

我建议你尝试了解**这个**matlab 函数实际上在做什么，而不是专注于它是**如何**做的，并在 Java 中从头开始重新实现它，忘记除了注释中给出的规范之外的所有 matlab 实现。确实，您编写的代码中有一半是无用的。实际上，在我看来，这个函数根本不需要，它的作用可以有效地集成到调用者的代码中。

# php - 除了对数字进行四舍五入之外，round() 还能做什么？

> ID：12040939
> 
> 赞同：4
> 
> 时间：2012-08-20T15:48:49.923
> 
> 标签：php, floating-point, arithmetic-expressions

我只是“修复”了以下 PHP 行中的一个错误：

```
 $value = 1091.09; // the failing test case
        $prop = sprintf('%013d', $value * 100); 
```

通过添加这些行：

```
 $cents = $value * 100; // $cents is now 109109
        $cents = round($cents, 2); // $cents is still 109109
        $prop = sprintf('%013d', $cents); 
```

前一个块的结果是`"0000000109108"`，而第二个块的结果是`"0000000109109"`，这是正确的。

请注意，我添加了这两行以便能够分别查看调试器中的每个步骤。如果我跳过第一行，它也可以工作，因此写：

```
 $cents = round($value * 100, 2); // $cents is now 109109
        $prop = sprintf('%013d', $cents); 
```

因此，显然，该`round()`函数做了一些对值不可见的事情，使其与`sprintf()`. 它是什么？

如果这是一种正确的语言，我可能会通过查看数据类型来知道。在这里，我什至不知道它们是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T15:58:34.203

## 重点：

初始数据类型是 float64。

乘以 100 后，它仍然是一个浮点数。

打印（使用 echo/print_r/var_dump）该值不会打印绝对精确值（`109108.9999999999999`）；它打印近似的浮点值`109109`，因为浮点数本质上是近似值而不是精确值。

使用 sprintf 将其打印*为 int*会触发到 int 的类型转换，从而截断`109108.9999999999999`to的值`109108`。

因此你的问题。

* * *

## 作为旁注：

PHP 支持的基本类型是使用处理程序变量和引用计数容器构造的。除此之外，它们几乎是低级的东西。

没有理由认为它们比看起来“更复杂”。我开始考虑一个复杂的对象，而不是一个标量数据类型。

还有一个很大的混淆因素是（隐式）类型转换和所有类型转换规则（包括所有可以作为布尔值 false 传递的东西）。

例 1：

```
 -1 == false // true
null == false // true
  -1 != null  // false 
```

例 2：

```
0  == false // true
0 === false // false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:18:20.990

可能没那么简单……

```
php > $value = 1091.09; print sprintf('%f', $value);
1091.090000
php > $value = 1091.09; print sprintf('%f', $value*100);
109109.000000
php > $value = 1091.09; print sprintf('%f', (int)($value*100));
109108.000000 
```

人们会期望在前两个结果中看到所有这些“999999”。

此外：

```
php > $value = 0.09; print sprintf('%f', $value);
0.090000
php > $value = 0.09; print sprintf('%f', $value*100);
9.000000
php > $value = 0.09; print sprintf('%f', (int)($value*100));
9.000000

(NOTE: same result of 0.009 and 0.9) 
```

底线，@Mihai 在[他的回答](https://stackoverflow.com/a/12041070/2077)中可能是正确的，但似乎这些“近似”浮点数（具有无限数量的 99999）存在于浮点算术单元的深处，并且仅在某些非常特殊的情况下影响 PHP 级别的计算案例。

# html - HTML5 Cache 显示带有更多内容的奇怪错误

> ID：12040945
> 
> 赞同：7
> 
> 时间：2012-08-20T15:49:23.820
> 
> 标签：html, application-cache, web-storage

我对 HTML5 Web 存储和应用程序缓存正在慢慢地但肯定会完全发疯。

这是我的例子： [http ://daviddarx.com/stuffs/work/custom/54/](http://daviddarx.com/stuffs/work/custom/54/)

缓存清单有效并在[http://manifest-validator.com/](http://manifest-validator.com/)上进行了测试：http : [//daviddarx.com/stuffs/work/custom/54/cache.manifest](http://daviddarx.com/stuffs/work/custom/54/cache.manifest)

由于它不起作用，我采取了一个非常简单的工作[示例](http://dev.bybjorn.com/ipadoffline/)，然后尝试逐步添加我的部分代码和数据，添加很少，然后我再次测试它。

当我从一个简单的例子开始时，一切都很好。如果我将 iPhone 置于平面模式，则在启动网站时会收到一条离线消息，但随后我可以查看结果。

当我添加一些资产（页面中的 HTML 代码、1-2 张图片等）时，它仍然可以正常工作。

如果我然后添加更多资产（例如，css 和所有相关的图像），问题就开始了......如果我进入平面模式然后打开页面，我会收到正常消息（当它是工作），然后是另一条消息，要求我重试或取消。如果我取消，网站就不会显示并且应用程序关闭，如果我按下重试按钮，我会一次又一次地收到相同的消息......

我真的不知道该怎么办。每次我在测试之前验证我的缓存清单，每次我更改 URL 以确保一切都被重置。

这是否与缓存文件的重量有关？大小或文件有限制吗？

另一句话：在测试之前，我总是在我的计算机上的控制台中检查我的页面，以确保这不是一个明显的问题。事实上，每次尝试都在桌面浏览器上成功，加载了所有资产。

你知道那可能来自哪里吗？

* * *

编辑：我又做了很多测试，但仍然无法正常工作。

以下是情况的摘要：

1.  这是我正在测试的版本：http: [//daviddarx.com/stuffs/work/custom/61/](http://daviddarx.com/stuffs/work/custom/61/)

2\. 这是我的缓存清单：[http](http://daviddarx.com/stuffs/work/custom/61/manifest.appcache) ://daviddarx.com/stuffs/work/custom/61/manifest.appcache 根据[http://manifest-validator.com/](http://manifest-validator.com/)完全有效。

3.当我在chrome（桌面）上加载页面并在控制台上显示时，一切正常。所有元素都被缓存了，如果我刷新，缓存就可以了。

4\. 当我在桌面 chrome 上加载页面并查看网络面板时，我可以看到所有内容都是从缓存中加载的。没有任何丢失的文件。

5\. 当我断开我的台式电脑与任何互联网的连接时，它就可以工作了！如果我在没有任何连接的情况下使用 chrome 浏览网站，我可以显示页面，一切都很好，因为我希望它会出现在我的 Iphone 上。

6\. 当我第一次使用我的 iPhone 并访问该网站时，一切正常。移动 Safari 的控制台没有任何错误。如果我打开“平面模式”并返回 safari，我可以显示我所在的页面（我以前无法实现）。但是，如果我尝试更改页面，它只会警告我“无法打开页面”，然后取消请求。我只能停留在当前页面。

在我的台式电脑上一切都很完美，但在我的 Iphone 上却不行。

你有什么主意吗？你能在你的桌面和iphone浏览器上试试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T16:05:46.513

分析了您的 /61/ 测试版本：

JS 函数`preloadDetailImages`从 CSS 类中提取背景图像 URL `content`，并将其作为`src`属性放入新的 Image 对象中。然后将此图像添加到 DOM 中，显然是为了让浏览器预加载它。但是，CSS 定义中 URL 周围的**双引号**不会被删除，因此最终会成为`src`属性值的一部分。这会产生一个损坏的 URL，该 URL 显然没有被缓存，因此无法脱机工作。

这是 CSS 定义：

```
#websiteContainer #customContainer .content {
    background-image: url("../images/custom_part_background.jpg");
} 
```

使用此 JS 代码，您可以提取 url() 中的所有内容，包括双引号：

```
$($(".content")[actualImageLoadingID]).css("background-image")
.split("url(")[1].split(")")[0] 
```

这就是文档中的内容（注意`&quot;`s）：

```
<img src="&quot;http://daviddarx.com/stuffs/work/custom/61/mobile/images/custom_part_background.jpg&quot;" style="display: none;"> 
```

由于双引号可以是有效的 URL 部分，浏览器将其解释为相对路径并尝试检索 [/stuffs/work/custom/61/%22http://daviddarx.com/stuffs/work/custom/61/mobile/ images/custom_part_background.jpg%22](http://daviddarx.com/stuffs/work/custom/61/%22http://daviddarx.com/stuffs/work/custom/61/mobile/images/custom_part_background.jpg%22)来自您的服务器。我可以在我的 http 嗅探器中看到它。

解决方案：删除 CSS 定义中的引号或在 JS 函数中过滤掉它们。

* * *

*这可能不是您在 iPhone 上出现缓存问题的主要原因，我宁愿将其添加为评论，但还没有权限。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T22:46:21.727

您说当您添加更多资产时问题开始出现。您可能正在达到**缓存限制**。

您可以查看此链接以获取有关 HTML5 配额的更多背景信息：http: [//updates.html5rocks.com/2011/11/Quota-Management-API-Fast-Facts](http://updates.html5rocks.com/2011/11/Quota-Management-API-Fast-Facts)

# cakephp-2.1 - CakePHP：包含带有脚本功能的 PHP 文件

> ID：12040949
> 
> 赞同：0
> 
> 时间：2012-08-20T15:49:29.717
> 
> 标签：cakephp-2.1

我有一个名为 script.php 的文件，这是一些 php 和一些 javascript 混合在一起的。这个文件的mime类型被强制为javascript，所以这是一个普通的javascript文件，但扩展名为php.ini。

我正在尝试通过脚本函数将其插入到我的布局中。如果写：

```
echo $this->Html->script('rsravenna/script.php'); 
```

cakephp 会尝试插入 script.php.js，如何避免追加 .js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:50:46.920

的附加在[HtmlHelper->script()](http://api20.cakephp.org/class/html-helper#method-HtmlHelperscript)函数中`.js`是[硬编码的。](http://api20.cakephp.org/view_source/html-helper#line-523)您的应用程序中是否有任何内容阻止您手动包含脚本？

```
<script type="text/javascript" src="myscript.php"></script> 
```

否则，您可以扩展 HtmlHelper 以将变量`ext`作为`options`数组的一部分传递给`HtmlHelper->assetUrl`.

您也可以反过来做，告诉您的服务器将特定文件夹中的 .js 文件解析为 php 以保留扩展名。如果您使用的是 apache，请将其放入您的`.htaccess`：

```
AddType application/x-httpd-php .js 
```

现在您应该能够将 myscript.php 重命名为 myscript.js 并且仍然可以对其进行解析。这将使您能够使用标准`script()`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:24:14.057

我真的不清楚你想做什么。script 是一个 HTML Helper，用于包含 javascript 而不是 PHP。

您可以执行以下操作：

```
echo $this->Html->url('/rsravenna/script.php', true); 
```

或者

```
echo $this->Html->url(array(
    "controller" => "foo",
    "action" => "bar",
    "ext" => "php"
)); 
```

为什么要强制 MIME 类型为 .js ？

# qt - 如何将一个 Qwidget 中的信号连接到另一个 Qwidget 中的插槽？

> ID：12040952
> 
> 赞同：1
> 
> 时间：2012-08-20T15:49:57.237
> 
> 标签：qt, qt-creator, qt-designer

我是 Qt 和 Qtcreator 的新手。我正在开发一个多小部件应用程序。我的问题是，是否可以使用 Qtcreator 中的图形信号槽编辑器将一个 Qwidget 中的信号（例如编辑联系人 Qwidget 中的提交按钮）连接到另一个 Qwidget 中的插槽（显示编辑过的联系人）。

从我与信号槽编辑器的交互中，我只能将信号拖到具有相同小部件的另一个组件，但不能拖到小部件外部。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T16:02:54.487

AFAIK 仅适用于同一 .ui 文件中的小部件。您将需要在生成的代码中执行此操作`connect(widgetA, SIGNAL(signal()), widgetB, SLOT(slot());`

# android - 在 Gingerbread 之前的设备上，来自 WebViewDatabase 的不可捕获 NPE 的解决方法

> ID：12040955
> 
> 赞同：1
> 
> 时间：2012-08-20T15:50:03.380
> 
> 标签：android, android-webview

我在 Gingerbread 之前的设备上遇到了这个无法捕获的异常：

```
java.lang.NullPointerException: null
 at android.webkit.WebViewDatabase.getCacheTotalSize(WebViewDatabase.java:735)
 at android.webkit.CacheManager.trimCacheIfNeeded(CacheManager.java:557)
 at android.webkit.WebViewWorker.handleMessage(WebViewWorker.java:195)
 at android.os.Handler.dispatchMessage(Handler.java:99)
 at android.os.Looper.loop(Looper.java:123)
 at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我只对 AdMob 广告使用 WebView，所以这很烦人。

有没有办法阻止这些崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:34:00.587

我得到了它的工作：

```
public static final boolean webViewIsProbablyCorrupt(Context context) {
    try {
        SQLiteDatabase cacheDb = context.openOrCreateDatabase("webviewCache.db", 0, null);

        if (cacheDb != null) {
            cacheDb.close();
            return false;
        }
    } catch (Throwable t) {
        Log.w(TAG, t);
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:50:03.380

如果您的 minSdkLevel 是 Donut 或更高版本，请尝试此操作（在加载任何广告之前）：

```
if (VERSION.SDK_INT < 9) {
    try {
        Method m = WebViewDatabase.class.getDeclaredMethod("getCacheTotalSize");
        m.setAccessible(true);
        m.invoke(WebViewDatabase.getInstance(thisContext));
    }
    catch (Exception e) {
        // disable webview/ads
    }
} 
```

如果您的 minSdkLevel 早于 Donut，则需要使用另一种方式来测试 SDK 级别：

```
private static int getSdkInt() {
    try {
        return Integer.parseInt(VERSION.SDK);
    }
    catch (Throwable t) {
        return -1;
    }
} 
```

# windows-7 - 文件读取行蓝屏窗口

> ID：12040975
> 
> 赞同：0
> 
> 时间：2012-08-20T15:51:31.053
> 
> 标签：windows-7, python-2.7

这段代码有什么问题？？它在两次或树执行后使我的窗户崩溃。

```
import os

f = file("C:\test.txt", "r")

try: 
    for l in f.readlines():
        if l <> "":
            print l
except:
    pass
finally:
    f.close() 
```

> Python 2.7.2（默认，2011 年 6 月 12 日，15:08:59）[MSC v.1500 32 位（英特尔）] 在 win32 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:39:47.510

这里的问题可能是在 Windows 上使用“import os”时。很久以前，我尝试在 windows 上使用 python 创建文件夹，我使用了那个库，但我被告知它可能会使我的 windows 崩溃。尝试使用任何与操作系统不同的库，还有其他一些选项。

# linux - 使用 du -sh * 命令时如何根据子目录的大小进行排序？

> ID：12040978
> 
> 赞同：4
> 
> 时间：2012-08-20T15:51:40.933
> 
> 标签：linux, shell, command-line, centos, du

```
du -sh *
275M    fusionforge_g
50M     git
99M     httpd
181M    php-doc
4.0M    pirate3
3.4G    qt
1.1M    vim-addon-manager
126M    wp-and 
```

这个输出现在乱序了，如何使这个输出根据子目录的大小排序？

@vstm 我的核心 util 版本低于 7.5，所以[https://serverfault.com/questions/62411/how-can-i-sort-du-h-output-by-size](https://serverfault.com/questions/62411/how-can-i-sort-du-h-output-by-size)中的解决方案无法解决我的问题.

```
rpm -qa | grep core
coreutils-5.97-19.el5
policycoreutils-1.33.12-14.2.el5 
```

@Leonid Volnitsky sort -nr 在使用 -h 选项时不起作用:(

```
du -sh * | sort -nr
275M    fusionforge_g
181M    php-doc
126M    wp-and
99M     httpd
50M     git
4.0M    pirate3
3.4G    qt
1.1M    vim-addon-manager 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:02:28.030

像这样的东西：

```
 command du -sh */ | sort -nrh 
```

# c# - 为“大西洋中部标准时间”映射 windows 时区和 IANA

> ID：12040979
> 
> 赞同：2
> 
> 时间：2012-08-20T15:51:51.490
> 
> 标签：c#, timezone

我发现“大西洋中部标准时间”的 Windows 时区与 IANA 的映射是“Etc/GMT+2”和“Etc/GMT+1”

根据实际数据，我发现：2011 年 3 月 27 日凌晨 3:00:00 到 2011 年 9 月 25 日凌晨 12:59:59 将是 Etc/GMT+1 2011 年 9 月 25 日凌晨 1:00:00 到2012 年 3 月 25 日凌晨 2:59:59 将是 Etc/GMT+2

这是我用来证明映射正确的代码：

```
var currentDateTime = DateTime.Now;
int currYear = currentDateTime.Year;

using(var database = Common.Patterns.TimeZoneInfo.Database.IANA.OpenInMemroyReadOnlyDatabase())
{
       var winTimeZone = System.TimeZoneInfo.FindSystemTimeZoneById("Mid-Atlantic Standard Time");
       var commonTimeZoneSG = Zone.FindZone(database, "Atlantic/South_Georgia", ZoneNameTypes.IANATZName);
       var commonTimeZoneNoronho = Zone.FindZone(database, "America/Noronha", ZoneNameTypes.IANATZName);
       var commonTimeZoneGMT2 = Zone.FindZone(database, "Etc/GMT+2", ZoneNameTypes.IANATZName);
       var commonTimeZoneGMT1 = Zone.FindZone(database, "Etc/GMT+1", ZoneNameTypes.IANATZName);

for (int nMonth = 1; nMonth <= 12; ++nMonth)
{
    int nbrDays = DateTime.DaysInMonth(currYear, nMonth);

    for (int nDay = 1; nDay <= nbrDays; ++nDay)
    {
        var currDateTime = new DateTime(currYear, nMonth, nDay, 11, 30, 09);
            //September 30 - March 24
            if(winTimeZone.GetUtcOffset(currDateTime) == commonTimeZoneSG.DetermineUTCOffset(currDateTime).Value)
            {
                break;
            }
            else if(winTimeZone.GetUtcOffset(currDateTime) == commonTimeZoneNoronho.DetermineUTCOffset(currDateTime).Value)
            {
                break;
            }
            else if(winTimeZone.GetUtcOffset(currDateTime) == commonTimeZoneGMT2.DetermineUTCOffset(currDateTime).Value)
            {
                break;
            }
            //March 25 - September 29
            if(winTimeZone.GetUtcOffset(currDateTime) == commonTimeZoneGMT1.DetermineUTCOffset(currDateTime).Value)
            {
                break;
            } 
            else
            {
                Console.WriteLine(string.Format("not mappable for {0}",currDateTime));
                break;                                                                      
            }
    }

} 
```

}

这是我发现的过渡规则：

```
System.TimeZoneInfo.FindSystemTimeZoneById("Mid-Atlantic Standard Time").GetAdjustmentRules().Dump(); 
```

我似乎无法将我发现的转换开始和结束规则与真实数据联系起来。它说它从凌晨 2 点开始，但我的真实数据是凌晨 3 点并在凌晨 1 点结束。

谁能解释一下？

# web-services - 尝试调用 web 服务时出现异常

> ID：12040986
> 
> 赞同：23
> 
> 时间：2012-08-20T15:52:05.080
> 
> 标签：web-services, cxf

尝试从中调用服务时出现以下异常`SOAPUI`。当我在浏览器中打开端点时，它会很好地显示 wsdl。

```
WARN  org.apache.cxf.phase.PhaseInterceptorChain - Interceptor for {http://contract.premsisc.usst.com/}PaidClaimFacadeService has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Message part {http://contract.premsisc.uss`enter code here`t.com/}findPaidClaims was not recognized.  (Does it exist in service WSDL?)
    at org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:194)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)
    at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:97)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)
    at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1655)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1595)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:104)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:932)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:500)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:272)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1550) 
```

我在 WAS 7 服务器中的 wsdl

```
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://contract.premsisc.usst.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="PaidClaimFacadeService" targetNamespace="http://contract.premsisc.usst.com/">
<wsdl:types>
<xs:schema xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://contract.premsisc.usst.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsd="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://contract.premsisc.usst.com/">
<xs:element name="findPaidClaims" type="tns:findPaidClaims"/>
<xs:element name="findPaidClaimsResponse" type="tns:findPaidClaimsResponse"/>
<xs:complexType name="findPaidClaims">
<xs:sequence>
<xs:element minOccurs="0" name="Product" type="xs:string"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="findPaidClaimsResponse">
<xs:sequence>
<xs:element name="return" type="xs:boolean"/>
</xs:sequence>
</xs:complexType>
<xs:element name="PremDiscountService" type="tns:PremDiscountService"/>
<xs:complexType name="PremDiscountService">
<xs:sequence/>
</xs:complexType>
</xs:schema>
</wsdl:types>
<wsdl:message name="findPaidClaims">
<wsdl:part element="tns:findPaidClaims" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:message name="PremDiscountServiceException">
<wsdl:part element="tns:PremDiscountService" name="PremDiscountServiceException"></wsdl:part>
</wsdl:message>
<wsdl:message name="findPaidClaimsResponse">
<wsdl:part element="tns:findPaidClaimsResponse" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:portType name="PaidClaimFacade">
<wsdl:operation name="findPaidClaims">
<wsdl:input message="tns:findPaidClaims" name="findPaidClaims"></wsdl:input>
<wsdl:output message="tns:findPaidClaimsResponse" name="findPaidClaimsResponse"></wsdl:output>
<wsdl:fault message="tns:PremDiscountServiceException" name="PremDiscountServiceException"></wsdl:fault>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="PaidClaimFacadeServiceSoapBinding" type="tns:PaidClaimFacade">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="findPaidClaims">
<soap:operation soapAction="" style="document"/>
<wsdl:input name="findPaidClaims">
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output name="findPaidClaimsResponse">
<soap:body use="literal"/>
</wsdl:output>
<wsdl:fault name="PremDiscountServiceException">
<soap:fault name="PremDiscountServiceException" use="literal"/>
</wsdl:fault>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="PaidClaimFacadeService">
<wsdl:port binding="tns:PaidClaimFacadeServiceSoapBinding" name="PaidClaimFacadePort">
<soap:address location="http://localhost:9084/premdisc/services/PaidClaimFacadeService"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

我的肥皂请求`SOAPUI`：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:con="http://contract.premsisc.usst.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <con:findPaidClaims>
         <!--Optional:-->
         <Product>abc</Product>
      </con:findPaidClaims>
   </soapenv:Body>
</soapenv:Envelope> 
```

Soap UI 中的 Soap 响应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <soap:Fault>
         <faultcode>soap:Client</faultcode>
         <faultstring>Message part {http://contract.premsisc.usst.com/}findPaidClaims was not recognized.  (Does it exist in service WSDL?)</faultstring>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

这就是我配置 jaxws:endpoint 的方式

```
<jaxws:endpoint id="paidClaimWs" implementor="#paidClaimFacadeImpl"
        address="/PaidClaimFacadeService" wsdlLocation="/wsdl/PaidClaimFacade.wsdl"
        serviceName="msg:PaidClaimFacadeService" endpointName="msg:PaidClaimFacadePort"
        xmlns:msg="http://contract.premsisc.usst.com/">
    </jaxws:endpoint> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-20T16:08:08.850

这意味着您正在调用一个不会在您的`WSDL`文件中退出的操作。

```
{http://contract.premsisc.usst.com/}findPaidClaims was not recognized 
```

这是您的目标名称空间：`http://contract.premsisc.usst.com/` 这是您的操作：`findPaidClaims`

如果您检查一下`WSDL`，您会发现没有这样的操作：`findPaidClaims`.

**编辑**

现在问题很清楚了。您在 WSDL 文件中的命名空间是错误的。这是固定的 WSDL，它将起作用。我不知道您是否对 WSDL 文件进行了一些验证，但我的 IntelliJ 显示了错误。所以我修复了它们：

```
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                  xmlns:tns="http://contract.premdisc.hcsc.com/"
                  xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                  name="PaidClaimFacadeService"
                  targetNamespace="http://contract.premdisc.hcsc.com/">
    <wsdl:types>
        <xs:schema xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                   xmlns:tns="http://contract.premsisc.usst.com/types"
                   xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
                   xmlns:xs="http://www.w3.org/2001/XMLSchema"
                   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                   attributeFormDefault="unqualified"
                   elementFormDefault="unqualified"
                   targetNamespace="http://contract.premsisc.usst.com/types">
            <xs:element name="findPaidClaims" type="tns:findPaidClaims"/>
            <xs:element name="findPaidClaimsResponse" type="tns:findPaidClaimsResponse"/>
            <xs:complexType name="findPaidClaims">
                <xs:sequence>
                    <xs:element minOccurs="0" name="Product" type="xs:string"/>
                </xs:sequence>
            </xs:complexType>
            <xs:complexType name="findPaidClaimsResponse">
                <xs:sequence>
                    <xs:element name="return" type="xs:boolean"/>
                </xs:sequence>
            </xs:complexType>
            <xs:element name="PremDiscountService" type="tns:PremDiscountService"/>
            <xs:complexType name="PremDiscountService">
                <xs:sequence/>
            </xs:complexType>
        </xs:schema>
    </wsdl:types>
    <wsdl:message name="findPaidClaims">
        <wsdl:part element="tns:findPaidClaims" name="parameters"></wsdl:part>
    </wsdl:message>
    <wsdl:message name="PremDiscountServiceException">
        <wsdl:part element="tns:PremDiscountService" name="PremDiscountServiceException"></wsdl:part>
    </wsdl:message>
    <wsdl:message name="findPaidClaimsResponse">
        <wsdl:part element="tns:findPaidClaimsResponse" name="parameters"></wsdl:part>
    </wsdl:message>
    <wsdl:portType name="PaidClaimFacade">
        <wsdl:operation name="findPaidClaims">
            <wsdl:input message="tns:findPaidClaims" name="findPaidClaims"></wsdl:input>
            <wsdl:output message="tns:findPaidClaimsResponse" name="findPaidClaimsResponse"></wsdl:output>
            <wsdl:fault message="tns:PremDiscountServiceException" name="PremDiscountServiceException"></wsdl:fault>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="PaidClaimFacadeServiceSoapBinding" type="tns:PaidClaimFacade">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
        <wsdl:operation name="findPaidClaims">
            <soap:operation soapAction="" style="document"/>
            <wsdl:input name="findPaidClaims">
                <soap:body use="literal"/>
            </wsdl:input>
            <wsdl:output name="findPaidClaimsResponse">
                <soap:body use="literal"/>
            </wsdl:output>
            <wsdl:fault name="PremDiscountServiceException">
                <soap:fault name="PremDiscountServiceException" use="literal"/>
            </wsdl:fault>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="PaidClaimFacadeService">
        <wsdl:port binding="tns:PaidClaimFacadeServiceSoapBinding" name="PaidClaimFacadePort">
            <soap:address location="http://localhost:9084/premdisc/services/PaidClaimFacadeService"/>
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

问题是您的命名空间与您的`xmlns:tns`和`targetNamespace`. 仔细查看您的 WSDL。

```
xmlns:tns="http://contract.premdisc.hcsc.com/"
targetNamespace="http://contract.premsisc.usst.com/" 
```

您会在文件中看到它们不同，但它们必须相同。对于您的 XSD，您需要使用不同的命名空间。就像是：

```
xmlns:tns="http://contract.premsisc.usst.com/types" 
```

就像在您的文件中一样：

```
xmlns:tns="http://contract.premsisc.usst.com/"
targetNamespace="http://contract.premdisc.hcsc.com/" 
```

屁股你可以看到他们也不同。比较我修复的文件和您的文件，会发现差异。尝试使用固定文件，它将起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T22:44:58.293

我知道这已经很老了，但是对于一些偶然发现它的人来说：我遇到了同样的问题，原因是什么？我在 SOAPUI 中加载了“旧”WSDL，而在“新”WSDL 中更改了一些内容。因此出现问题，请尝试在 SOAPUI 中重新加载 WSDL 或将其删除并再次加载，然后检查是否遇到相同的错误。希望这对某人有帮助！

# python - 同时打印多个列表中的所有值

> ID：12040989
> 
> 赞同：10
> 
> 时间：2012-08-20T15:52:18.273
> 
> 标签：python, list

假设我有 3 个这样的列表

```
l1 = [1,2,3]
l2 = [4,5,6]
l3 = [7,8,9] 
```

如何同时打印出这些列表中的所有内容？做这样的事情的pythonic方式是什么？

```
for f in l1,l2 and l3:
    print f 
```

这似乎只考虑了 2 个列表。

期望的输出：对于所有列表中的每个元素，我使用不同的函数将它们打印出来

```
def print_row(filename, status, Binary_Type):
    print " %-45s %-15s %25s " % (filename, status, Binary_Type) 
```

我在 for 循环中调用上述函数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T15:54:50.440

我想你可能想要`zip`：

```
for x,y,z in zip(l1,l2,l3):
    print x,y,z  #1 4 7
                 #2 5 8
                 #3 6 9 
```

你在做什么：

```
for f in l1,l2 and l3: 
```

有点奇怪。它基本上等同于`for f in (l1,l3):`因为`l2 and l3`返回`l3`（假设`l2`和`l3`都是非空的 - 否则，它将返回空的。）

如果您只想连续打印每个列表，您可以执行以下操作：

```
for lst in (l1,l2,l3):  #parenthesis unnecessary, but I like them...
    print lst   #[ 1, 2, 3 ]
                #[ 4, 5, 6 ]
                #[ 7, 8, 9 ] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T15:55:50.073

无需使用`zip`，只需使用运算符将​​它们相加即可`+`。`l1 + l2 + l3`创建一个由 , 组合而成的新列表，`l1`因此`l2`您`l3`可以简单地循环遍历它，如下所示：

```
for f in l1+l2+l3:
    print(f) 
```

您对`and`运算符的使用不正确。您的代码不起作用的另一个原因是使用逗号（如`l1, l2, l3`）创建一个元组，它是一个现在包含 3 个列表的容器。因此，当您尝试遍历`l1, l2, l3`它时，它将遍历该元组中的每个元素（即列表），而不是您想要的遍历列表中的每个元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T15:56:00.947

如果你想打印

```
1 4 7
2 5 8
3 6 9 
```

做：

```
for i,j,k in zip(l1,l2,l3):
    print i,j,k 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-20T16:09:00.430

这取决于你想要达到什么，

```
>>> #Given
>>> l1,l2,l3 = [1,2,3],[4,5,6],[7,8,9]
>>> #To print row wise
>>> import itertools
>>> for f in itertools.chain(l1,l2,l3):
    print(f,end=" ")

1 2 3 4 5 6 7 8 9 
>>> #To print column wise
>>> for f in itertools.izip(l1,l2,l3):
    print(*f,end=" ")

1 4 7 2 5 8 3 6 9 
>>> 
```

或以下将在 Python 2.7 中工作的实现

```
>>> for f in itertools.chain(*itertools.izip(l1,l2,l3)):
    print f,

1 4 7 2 5 8 3 6 9 
>>> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T16:06:26.200

如果您的列表长度不同，通常最好使用`map`：

```
>>> l1 = [1, 2, 3]
>>> l2 = [4, 5, 6]
>>> l3 = [7, 8, 9, 2]
>>> for x, y, z in map( None, l1, l2, l3):
...     print x, y, z
...
1 4 7
2 5 8
3 6 9
None None 2 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-20T17:39:05.883

要扩展 Abhijit 答案，您可以使用 itertools 生成器作为列表理解中的可迭代对象。

```
>>> [ n for n in itertools.chain(l1, l2, l3) ]
[1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-20T19:28:07.957

如果您的意思是您有 3 个长度相等的列表，并且您想将它们的内容打印为 3 列，那么如何 zip() 连接列，并在每次迭代时对 print() 进行列表理解：

```
[ print(row) for row in zip(l1, l2, l3) ] 
```

以上将打印元组的代表。如果要以其他方式格式化值：

```
[ print("{} / {} / {}".format(*row)) for row in zip(l1, l2, l3) ] 
```

没有人说你必须*使用*列表推导的输出。

# c++ - 在程序运行时编译程序

> ID：12040994
> 
> 赞同：17
> 
> 时间：2012-08-20T15:52:39.730
> 
> 标签：c++, compilation, runtime

我有一个广泛的问题：

假设我有一个 C++ 程序，我开始在后台的一个文件上运行它，并使用一些可以在内部设置的配置。在它运行时，我更改了这些内部配置，编译它并开始在另一个文件上运行它。

这会影响已经在后台运行的前一个实例吗？还是因为它已经启动并运行它不会？对此的任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-20T16:03:16.243

修改正在运行的可执行文件是不安全的。根据[覆盖内存映射的可执行文件时会发生什么？](https://stackoverflow.com/questions/4453781/what-happens-when-you-overwrite-a-memory-mapped-executable)

> 在 Linux 下，如果在运行时替换可执行文件，结果是不可预测的，并且可能会崩溃。

如果您删除该文件并编译程序的新版本，那么将会发生什么是非常明确的。已经运行的实例将使用先前的代码，并且该代码将由操作系统保存在内存中，直到程序终止。任何新实例都将使用新代码。

总结：您应该确保您的构建系统在重新编译之前删除旧的可执行文件，只要这是真的，那么重新编译将在您重新运行程序之前生效，否则行为未定义（阅读 SIGSEGV）。

各种附录：

JamesKanze 正确地指出，链接器本身可能会在写入其输出之前删除文件，如果是这种情况，那么它将总是表现得好像您在重新编译之前自己删除了文件（理智的场景）。从 binutils cvs 头查看bfd [/cache.c ：](http://sourceware.org/cgi-bin/cvsweb.cgi/src/bfd/cache.c?rev=1.41&content-type=text/x-cvsweb-markup&cvsroot=src)

```
/* Create the file.

   Some operating systems won't let us overwrite a running
   binary.  For them, we want to unlink the file first.

   However, gcc 2.95 will create temporary files using
   O_EXCL and tight permissions to prevent other users from
   substituting other .o files during the compilation.  gcc
   will then tell the assembler to use the newly created
   file as an output file.  If we unlink the file here, we
   open a brief window when another user could still
   substitute a file.

   So we unlink the output file if and only if it has
   non-zero size.  */ 
```

所以至少对于 GNU LD，这是可以保证的。然而，这不一定扩展到其他链接器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-20T15:58:11.377

可能/将会发生什么取决于操作系统，但一般来说，您的旧程序永远不会开始使用新代码运行。我说它取决于操作系统，因为在 Windows 上我相信该文件将被锁定并且您根本无法覆盖它，而在 Linux 上，您将本质上取消链接旧文件，但程序仍将使用该旧版本，并且您的新版本在技术上将是一个不同的文件。

现在这里有一个警告。如果您有动态库或其他动态代码资源，那么您可能会获得新版本。在任何情况下，您都按需加载库，您加载的版本将是加载时存在的版本。在大多数情况下，所有库都在程序开始时直接加载。然而，它们不是的一种常见情况是插件架构，它们根据需要加载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T15:55:25.953

不，它不会影响原始运行的实例——它已经加载到内存中并且不会被更改。

# asp.net-mvc-3 - ASP.NET MVC 3，视图中的 DisplayFor 不产生等宽输出

> ID：12040995
> 
> 赞同：0
> 
> 时间：2012-08-20T15:52:47.163
> 
> 标签：asp.net-mvc-3

使用 ASP.NET MVC 3...

注意：我无法让三行（元音、全名和辅音）垂直排列，就像它们在我的视图显示中实际出现的方式一样。很容易找出字母字符以及它们是元音（上方）还是辅音（下方）在名称上方或下方。使用的阿尔法“转换”是：AI = 1 到 9，JR = 1 到 9 和 SZ = 1 到 8 的数值。

从一个视图：

```
<!--
<table>
<span style="font-family:Monospace;">
    <tr>
        <td style="font-weight:bold; text-align:right;">Vowels</td>
        <td style="font-family:monospace; font-weight:bold; width:215pt;">@Html.DisplayFor(model => model.Vowels)</td>
        <td style="font-family:monospace; font-weight:bold;">@Html.DisplayFor(model => model.VowelReduction)</td>
    </tr>
    <tr>
        <td style="font-weight:bold; text-align:right;">Full Name</td>
        @if(Model.BMName == null || Model.BMName == "")
        {
            <td style="font-family:monospace; font-weight:bold; width:215pt;">@Html.DisplayFor(model => model.BFName)&nbsp;@Html.DisplayFor(model => model.BLName)</td> 
        }
        else
        {
            <td style="font-family:monospace; font-weight:bold; width:215pt;">@Html.DisplayFor(model => model.BFName)&nbsp;@Html.DisplayFor(model => model.BMName)&nbsp;@Html.DisplayFor(model => model.BLName)</td>
        } 
        <td style="font-family:monospace; font-weight:bold;">@Html.DisplayFor(model => model.NameAllReduction)</td>
    </tr>
    <tr>
        <td style="font-weight:bold; text-align:right;">Consonants</td>
        <td style="font-family:monospace; font-weight:bold; width:215pt;">@Html.DisplayFor(model => model.Consonants)</td>
        <td style="font-family:monospace; font-weight:bold;">@Html.DisplayFor(model => model.ConsonantReduction)</td>
    </tr>
</span>
</table>
--> 
```

示例 1 ***** ***

表外：

1 5 59 59

艾尔伯特爱因斯坦

32 92 512 5

* * *

示例 2 ***** ****

表内：

元音 1 5 59 59 34/7

全名 阿尔伯特·爱因斯坦 63/9

辅音 32 92 512 5 29/11

* * *

在项目运行期间，从 Model ABIPlusPhillips.BFName、.BLName（Big Al 没有中间名，如果没有中间名，到处都有代码可以挤出中间名。）、.Vowels 和 .Consonants，我使用 Quickwatch 和 TextVisualizer 查看对象并从对象的属性中获取基本信息，就在它们被传递给视图之前。该信息被复制并粘贴到文本编辑器中，使用等宽字体，并为所有字符提供了良好的垂直排列：

示例 3 ***** *****

1 5 59 59

艾尔伯特爱因斯坦

32 92 512 5

* * *

最后，我用标签对将表格括起来，得到了相同的间距问题（参见示例 1），但表格中的所有字符都是红色的。事实上，我在示例 1 的“表外”周围使用了 sam 括号，并得到了与示例 1 相同的结果，只是用红色表示。

尽管周围的 HTML 已设置为等宽，但嵌入在 中的信息确实看起来是成比例的。

我该如何解决这个问题？

感谢 Stack 人员和所有贡献者……这是一个很棒的信息丰富的网站……

马夫

```
 I stripped things down to "barebones" as follows. The .cshtml page displays wrong, however the HTML source appears correct.

-------
.cshtml page that displays:

@model Numer.Models.ABIPlusPhillips

           @Model.Vowels<br />
           @Model.FullName<br />
           @Model.Consonants

Site.css:

body 
{
    font-family:Courier New;
    color:Red;
}

--------

------
_Layout.cshtml:

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>

</head>
<body>
    <div>

        <section id="main">
            @RenderBody()
        </section>

    </div>
</body>
</html>

------

------
HTML Source from displayed page:

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>

</head>
<body>
    <div>
    <section id="main">

       1  5   59   59 <br />
       Albert Einstein<br />
        32 92   512  5

        </section>

    </div>
</body>
</html> 
```

# java - 从 PHP 强制杀死失控的 java exec

> ID：12040998
> 
> 赞同：1
> 
> 时间：2012-08-20T15:53:04.907
> 
> 标签：java, php, timeout

我有用户提交了服务器运行的 java 文件。由于无限循环的可能性，我在 PHP 中运行超时倒计时。问题是，`proc_get_status`似乎在 javaw.exe 实际完成之前更新（因为它永远不会有无限循环）；`procStatus["running"] == false`在第一次迭代之后：

```
$javaCmd = "javaw -cp \"$home/$target_dir\" $fl  2>&1 < ". $fileIn;
$proc = proc_open('exec '.$javaCmd, array(array("pipe", "r"), array("pipe", "w"), array("pipe", "w")), $pipes);

$procStatus = proc_get_status($proc);

if($procStatus["pid"] === false)
{
    echo 'PRocess is not running... something is wrong';
}
else
{
    if($procStatus["running"] == true)
    {
        $timeOut = 0;
        while($timeOut < $timeLimit)
        {
            echo 'timeout...'.$timeOut.' while timelimit is '.$timeLimit.'<br/>';
            sleep(1);
            $timeOut = $timeOut +1;
            if( $procStatus["running"] == false) 
            {
                echo 'broke before timeout...<br/>';
                break;  // Exited before the timeout.   
            }
            $procStatus = proc_get_status($proc);
        }
        var_dump($procStatus);  
    }
    echo 'killing process<br/>';

    var_dump(proc_terminate($proc));
} 
```

我曾尝试在 $proc 和 $pipes 上执行`proc_terminate`, `proc_close`, `fcloses`，但似乎无法杀死 javaw.exe 进程。会`exec("kill -9 ".$procStatus['pid'])`杀成功吗？我在 Windows 上进行测试，但服务器在 unix 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T16:14:49.413

执行 exec("kill -9 ".$procStatus['pid']) 肯定会杀死该进程。您可以先尝试不带“-9”参数的 kill 以允许更好的杀戮，然后 maxbe 再次检查进程是否仍然存在，“-9”参数是强制杀戮。

在 Windows（至少版本 7）下，您可以使用 exec("taskkill /PID".$procStatus['pid']) 进行测试，它应该做的完全一样。