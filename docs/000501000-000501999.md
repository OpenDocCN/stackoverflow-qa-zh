# StackOverflow 问答 000501000-000501999

# c# - 逗号分隔的文本框值到字符串列表/数组 - 有没有更好的方法来编写这段代码？

> ID：501008
> 
> 赞同：0
> 
> 时间：2009-02-01T15:36:11.940
> 
> 标签：c#, vb.net, coding-style, string, performance

我想创建在文本框中输入的逗号分隔字符串（文件扩展名）的字符串数组/列表。

对于以下代码块：

```
 Dim csv As String = Textbox1.Text + ","

            While csv.IndexOf(".") <> -1
                lstOfStrings.Add(csv.Substring(0, csv.IndexOf(",")))
                csv = csv.Remove(0, csv.IndexOf(",") + 1)
            End While 
```

输出是：

Textbox1.Text = ".exe,.php"

listOfStrings = { ".exe", ".php" }

有没有更好的方法来编写这段代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T15:42:33.453

更好的方法是使用[Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法：

```
Dim lstOfStrings() As String = Textbox1.Text.Split(","c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T15:45:41.640

这是 Regex+LINQ 的不同方式。它允许使用整个文件名，如果那是您所重视的。根据输入的条件（空格等），拆分是更可取的。

```
using System;
using System.Linq;
using System.Text.RegularExpressions;
using System.Collections.Generic;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            string s = "fileone.aspx, filetwo.csv,filethree.exe, filefour.php";
            List<string> extensions = Regex.Matches(s, @"(\.\w+)\s*,?")
                .OfType<Match>().Select(m => m.Groups[1].Value)
                .ToList();
            extensions.ForEach(i => Console.WriteLine(i));
            Console.ReadLine();
        }
    }
} 
```

**输出**

.aspx

.csv

。可执行程序

**深思熟虑**

如果你想要独特的扩展，你可以添加 .Distinct()

# web-services - RESTful 设计：分页集合

> ID：501013
> 
> 赞同：14
> 
> 时间：2009-02-01T15:41:08.730
> 
> 标签：web-services, api, rest

我正在设计一个 REST api，需要从服务器端强制执行分页（每 x）。

浏览任何资源集合的正确方法是什么：

选项1：

```
GET /resource/page/<pagenr>
GET /resource/tags/<tag1>,<tag2>/page/<pagenr>
GET /resource/search/<query>/page/<pagenr> 
```

选项 2：

```
GET /resource/?page=<pagenr>
GET /resource/tags/<tag1>,<tag2>?page=<pagenr>
GET /resource/search/<query>?page=<pagenr> 
```

如果是 1，我应该如何处理 GET /resource？重定向到 /resource/page/0，回复一些错误或回复与 /resource/page/0 完全相同而不重定向？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-03T21:42:27.823

URI 的样子并不是最重要的部分。相反，您应该考虑的是它是如何呈现给用户的。例如，一个页面应该有一个指向“下一个”页面的链接和另一个指向“上一个”页面的链接（如果有的话）。查看[RFC 5005 提要分页和归档](https://www.rfc-editor.org/rfc/rfc5005)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-01T15:47:38.903

由于我对 REST 是什么的理解有限，那么以下内容可能是“最”宁静的。

```
GET /resource/?page=<pageenr>&asof=<datetime> 
```

由于表示的内容永远不会意外更改，因此可以使用缓存。

但要真正回答你的问题，我认为参数页面是首选方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-07T10:09:53.603

我会选择选项（2）。为什么？

1.  您可以稍后将 page-size 参数添加到查询中，以便客户端可以指定页面大小。
2.  如果没有指定页面参数，您可以只返回第一页（默认）。在许多情况下，您的客户端可能只需要第一页，因此它简化了客户端和服务器之间的协议。

# linq-to-sql - 你是把 Linq2SQL 查询放在各处还是放在专用的 DAL 类中？

> ID：501018
> 
> 赞同：7
> 
> 时间：2009-02-01T15:45:05.570
> 
> 标签：linq-to-sql, tdd, solid-principles

我总是在所有地方插入我的 Linq2SQL 查询，几乎在所有地方的每个班级中。

我想知道您将 Linq2SQL 查询放在哪里的策略？

您是将它们放在单独的数据层类中还是将它们存储在各处使用它们的地方？

我认为我需要更改 Linq2SQL 查询的策略并将它们存储到单独的 DataLayer 类中。我认为，如果我要能够有效地进行 TDD 并遵守依赖注入和 Solid 原则，这是必须的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T16:09:17.550

我将所有 LinqToSQL 调用完全包装到一个 DAL 中。我的网站和业务层不知道我正在使用的持久性框架。这样，如果 LinqToSql 真的死了，或者我决定要使用一个全新的框架，我就不必寻找我进行数据库调用的所有地方。

它还有助于可重用性。我可以在使用相同数据库的其他项目中使用相同的业务或 DAL。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-01T16:15:56.617

LINQ 是一种语言结构。它所需要的只是您的 DAL 将您的实体公开为 IEnumerable 或 IQueryable，并且您可以对它使用 LINQ。您的 DAL 可以基于 LINQ2SQL 或 LINQ2Entities 或您自己的自定义代码——只要它正确地公开您的实体即可。如果您使用 LINQ2SQL，您将获得一些优势，例如延迟查询执行，但这并不是绝对必要的。我认为避免在 DAL 之外使用 LINQ 毫无意义。如果我想用其他不基于 LINQ2SQL 的东西替换 DAL，我可以。只要我维护基于 LINQ 的代码所期望的接口，我就可以了。

**编辑**：对我来说，最重要的是，在他们到达 DAL 之前，它们不是 LINQ2SQL 查询，它们只是 LINQ。LINQ 不会从语言中消失，除非它被更好的东西取代。使它成为 LINQ2SQL 的原因是 DAL 是用 LINQ2SQL 实现的。我的其余代码不知道（或关心）事实如此。它可以是 LINQ2Objects 或 LINQ2Entities 或...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-01T16:02:07.050

将我所有的 Linq2SQL 查询放入一个单独的类中，可以在测试访问它的业务对象时轻松地将其替换为“模拟/存根”。

还是我错了？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-01T15:52:07.210

如果您认为您的 LINQ 查询是 LINQ2SQL 查询，那么您会稍微忽略这一点。

您有 LINQ 查询。您的业​​务层通过对数据层（数据上下文）进行 LINQ 查询来访问数据层。LINQ2SQL 是允许 LINQ 查询访问 SQL Server 的组件。

这是一个严重的过度简化，但一般来说，如果您将所有 LINQ 隐藏在业务层之外，您并没有真正从其存在的理由中受益。

如果 LINQ2SQL 不允许您将 DB 模式抽象到您喜欢的程度，那么您应该考虑改用实体框架。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-01T16:16:27.893

*   我使用外部映射。
*   域类位于单独的程序集中。
*   数据上下文位于助手程序集中。
*   我有许多 xml 映射文件

当我需要访问数据库时，我使用连接字符串（哪个数据库）和一个映射文件（要映射哪些表）来实例化 Helpers.DataContext。

这可以很好地分离关注点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-14T01:12:46.087

我个人在其中创建“基本”查询并公开 IQueryable。

在我的业务对象中，我喜欢返回具体的结果，所以我通常只在内部创建 QueryByExpression 风格的方法，然后创建方法存根，我可以在其中传递我的条件，并在我处理查询的方法中，从数据库，并返回结果的 IEnumerable，而不是让应用程序的其余部分需要上下文或任何东西。

但是，就像上面许多人所说的那样，我不得不同意——将您的 IQueryable 暴露给您的代码并不可怕，它只是让您与您的 Linq2Sql 的东西有更多的联系。

如果您不介意创建公开方法但不公开 IQueryable 类型的业务对象，我觉得这样更好，但设置和配置业务对象更加繁琐。它也更容易测试我的感觉，但这只是我。还可以实现可重用性，如果你修复了一个错误，那么 2 年后它不会出现在你的代码中的 30 个不同位置。

只是我的2美分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-16T19:54:11.507

我不一定要创建单独的业务对象，因为这是 LINQ2SQL 的重点，您将重新创建很多使 LINQ2SQL 如此出色的东西。

但是，我建议创建一个包含静态类的类库，其中包含 L2SQL 代码。这为您提供了能够替换单个程序集以更改业务逻辑的优势。此外，如果您有额外的方法来访问数据，那么您的静态类是该逻辑的好地方。

但是，如果您的需求有点复杂并且您不介意创建自己的映射，我会同意 Florian。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-01-06T19:03:07.627

我的最新项目使用 ASP.NET MVC 框架和 LINQ-to-SQL。出于这个原因，我的数据层非常依赖存储库模式。由于这是我的第一个 LINQ-to-SQL 项目，因此数据库模式在单个 DataContext 类中表示。随着后续项目的出现，我可以分离出常见的 DataContexts 以供重用。

我创建了一个接口，其中包含我计划为特定存储库实现的所有签名，该存储库通常表示单个复杂对象。基于该接口，我实现了两个类：一个用于生产，一个用于测试。我所有的 LINQ-to-SQL 查询都保存在存储库类中。在我的控制器代码中，我访问我的数据访问方法的存储库。我的观点中不包含查询；我使用自定义视图模型类，这些类使用存储库方法填充到控制器中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-01-06T19:16:43.280

我在 DAL DLL 中使用了 Linq2SQL。我喜欢关注点的分离以及任何其他需要访问相同数据库的站点或应用程序，您可以重用 DLL 中的相当多的代码。所以所有的 Linq2SQL 都存储在这个 DAL 中。现在对于 Linq 本身，我根据需要在我的服务和表示层中使用它。

Linq2SQL DLL 布局

创建映射 .dbml 文件以将 SQL table.columns 映射到 Linq 目录 (SqlRepository)

编写与服务层类匹配的 sql 存储库类并使用正确的 Linq 目录类。

为每个 sql 存储库类添加了接口，以便服务层直接使用接口

编写了 sql 存储库类与服务层来回传递的业务模型。

# python - Python + SQLite 查询以查找位于指定时间段的条目

> ID：501021
> 
> 赞同：1
> 
> 时间：2009-02-01T15:45:53.293
> 
> 标签：python, sql, sqlite

我想为我日记中的每个预订在 SQLite 3 表中存储一行。

每行都有一个“开始时间”和一个“结束时间”。

有谁知道我如何在给定时间查询表中的事件？

例如，返回上午 10:30 发生的任何行

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T15:53:22.013

SQLite3 没有 datetime 类型，虽然它有[date 和 time 函数](http://www.sqlite.org/lang_datefunc.html)。

通常，您在数据库中以 ISO 8601 格式存储日期和时间：`YYYY-MM-DD HH:MM:SS`. 然后日期时间按字典顺序按时间顺序排序。

以这种方式存储您的日期时间，您只需使用文本比较，例如

```
SELECT * FROM tbl WHERE tbl.start = '2009-02-01 10:30:00' 
```

或者

```
SELECT * FROM tbl WHERE '2009-02-01 10:30:00' BETWEEN tbl.start AND tbl.end; 
```

# object - 闭包和对象

> ID：501023
> 
> 赞同：13
> 
> 时间：2009-02-01T15:46:49.437
> 
> 标签：object, functional-programming, closures, imperative

函数式编程..就像经典（[马克吐温的类型](http://www.twainquotes.com/Classic.html)）。在阅读另一篇关于 SICP 的文章时，人们正在谈论关闭对那里的思考产生的巨大影响，我想起了这个，这是我很久以前读过的

闭包是穷人的对象 对象是穷人的闭包

（不记得确切的来源，但它是程序员罗塞塔石碑，或编程之禅，或编程的 tau ......谷歌变得如此拥挤，无法找到原始来源）

所以联合程序员......你的看法是什么......是你一直缺少的东西......或者只是一些语法糖，预处理器可以做！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-01T15:59:36.120

[http://people.csail.mit.edu/gregs/ll1-discuss-archive-html/msg03277.html](http://people.csail.mit.edu/gregs/ll1-discuss-archive-html/msg03277.html)

> 尊贵的 Qc Na 大师与他的学生 Anton 同行。安东希望能引起大师的讨论，道：“大师，我听说物件是一个很好的东西，这是真的吗？” Qc Na 怜悯地看着他的学生，回答说：“愚蠢的学生 - 对象只是一个穷人的闭包。”
> 
> 受到责备后，安东离开了他的主人，回到了他的牢房，一心研究闭包。他仔细阅读了整个“Lambda: The Ultimate...”系列论文及其表亲，并实现了一个带有基于闭包的对象系统的小型 Scheme 解释器。他学到了很多，并期待着向他的主人通报他的进步。
> 
> 在与 Qc Na 的下一次散步中，Anton 试图打动他的师父，他说：“师父，我已经认真研究了这件事，现在明白了物体确实是穷人的闭包。” Qc Na 用棍子击打 Anton 回应说：“你什么时候才能学会？闭包是穷人的对象。” 那一刻，安东顿悟了。
> 
> ——安东·范·斯特拉滕

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-01T16:00:03.013

我在 Javascript 中使用闭包很长时间了。有时它们会形成一个“对象”，有时它们是向回调提供实例数据的有用方式。

就我而言，它们是盒子里另一个有用的工具，但它不仅仅是糖。Sugar 与您可以用另一种更复杂的语法合理地做的事情有关。用一种不直接支持闭包的语言实现闭包将非常困难。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-01T15:56:44.767

闭包不仅仅是语法糖，尽管我认为它在某种程度上取决于您对“语法糖”的定义。

对我来说，Java 1.5 的 for-each 是语法糖，但是，例如，Ruby 块远不止于此。闭包提供了方便的抽象级别，这对于隐式声明意图很有用——这是朝着 DSL 语法迈出的一大步。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-01T16:07:37.927

闭包和匿名块是非常重要的编程结构，我在 java、C++、C 和任何其他缺少它们的语言中都很快找到了它。它们对于异步和事件处理特别有用。它们还使获取函数的函数使用起来更加愉快，并提供了在不使用额外语法的情况下做更多事情的选择。（参见：smalltalk 和 scheme）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-01-15T12:30:20.193

闭包就像 OO 语言中的对象。但是函数式语言缺乏子类型和继承。

# c# - 如何确定字符串是否包含前 X 个字符内的特定子字符串

> ID：501026
> 
> 赞同：50
> 
> 时间：2009-02-01T15:48:19.793
> 
> 标签：c#

我想检查`Value1`下面是否在前 X 个字符中包含“abc”。您将如何通过`if`声明检查这一点？

```
var Value1 = "ddabcgghh";

if (Value1.Contains("abc"))
{
    found = true;
} 
```

它可以在前 3、4 或 5 个字符内。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-02-01T15:55:08.780

或者，如果您需要设置 found 的值：

```
found = Value1.StartsWith("abc") 
```

编辑：鉴于您的编辑，我会做类似的事情：

```
found = Value1.Substring(0, 5).Contains("abc") 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2010-01-14T03:25:54.257

我会使用 IndexOf 方法的重载之一

```
bool found = Value1.IndexOf("abc", 0, 7) != -1; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-02-01T15:56:37.153

较短的版本：

```
found = Value1.StartsWith("abc"); 
```

对不起，但我是“少”代码的坚持者。

* * *

鉴于提问者的编辑，我实际上会使用接受偏移量的东西，这实际上可能是重载 StartsWith 的扩展方法的好地方

```
public static class StackOverflowExtensions
{
    public static bool StartsWith(this String val, string findString, int count)
    {
        return val.Substring(0, count).Contains(findString);
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-02-01T15:50:22.923

```
if (Value1.StartsWith("abc")) { found = true; } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-02-01T16:32:27.427

使用 IndexOf 更容易且性能更高。

```
int index = Value1.IndexOf("abc");
bool found = index >= 0 && index < x; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-02-01T15:51:26.027

这就是你需要的：

```
if (Value1.StartsWith("abc"))
{
found = true;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-01T15:50:27.697

你很接近......但使用： `if (Value1.StartsWith("abc"))`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-02-01T16:04:14.330

更明确的版本是

```
found = Value1.StartsWith("abc", StringComparison.Ordinal); 
```

最好始终明确列出您正在进行的特定比较。String 类可能与所使用的比较类型有些不一致。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-02-01T16:51:42.817

您还可以使用正则表达式（虽然可读性较差）

```
string regex = "^.{0,7}abc";

System.Text.RegularExpressions.Regex reg = new System.Text.RegularExpressions.Regex(regex);
string Value1 = "sssddabcgghh";

Console.WriteLine(reg.Match(Value1).Success); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-04-07T10:31:04.037

从下面的答案添加，我创建了这个方法：

```
 public static bool ContainsInvalidStrings(IList<string> invalidStrings,string stringToCheck)
    {

        foreach (string invalidString in invalidStrings)
        {
            var index = stringToCheck.IndexOf(invalidString, StringComparison.InvariantCultureIgnoreCase);
            if (index != -1)
            {
                return true;
            }
        }
        return false;
    } 
```

它可以这样使用：

```
 var unsupportedTypes = new List<string>()
        {
            "POINT Empty",
            "MULTIPOINT",
            "MULTILINESTRING",
            "MULTIPOLYGON",
            "GEOMETRYCOLLECTION",
            "CIRCULARSTRING",
            "COMPOUNDCURVE",
            "CURVEPOLYGON",
            "MULTICURVE",
            "TRIANGLE",
            "TIN",
            "POLYHEDRALSURFACE"
        };

            bool hasInvalidValues =   ContainsInvalidStrings(unsupportedTypes,possibleWKT); 
```

您可以通过这种方式检查多个无效值。

# python - 在python中用函数参数命名的列表

> ID：501027
> 
> 赞同：1
> 
> 时间：2009-02-01T15:48:34.753
> 
> 标签：python, list, arguments

我觉得这可能是我应该知道的，但我现在想不起来。我正在尝试获取一个函数来构建一个列表，其中列表的名称是函数中给出的参数；

例如

```
def make_hand(deck, handname):
    handname = []
    for c in range(5):
        handname.append(deck.pop())
    return handname

    # deck being a list containing all the cards in a deck of cards earlier 
```

问题是，当我希望它被称为任何用户在创建手时输入的手名时，这会创建一个名为手名的列表。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T15:55:08.717

您可以保留一个字典，其中键是手的名称，值是列表。

然后你可以说 dictionary[handname] 来访问特定的手。沿着：

```
hands = {} # Create a new dictionary to hold the hands.
hands["flush"] = make_hand(deck) # Generate some hands using your function.
hands["straight"] = make_hand(deck) # Generate another hand with a different name.
print hands["flush"] # Access the hand later. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-01T16:05:21.427

虽然您可以在运行时创建具有任意名称的变量，使用`exec`（如 sykora 建议的那样），或通过干预`locals`,`globals`或`setattr`对象，您的问题有点没有实际意义。

一个对象（几乎任何东西，从整数到具有 1000 个成员的类）只是一块内存。它没有名称，可以有任意多个名称，并且所有名称都被视为平等：它们只是引入了对某个对象的引用并阻止它被收集*。*

如果您想在程序用户为对象提供用户可见名称的意义上命名项目，您应该使用字典来关联具有名称的对象。

您使用用户提供的变量名称的方法还有其他几个严重的含义： * 如果用户提供现有变量的名称怎么办？* 如果用户提供了一个无效的名字怎么办？

您正在引入[泄漏抽象](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)，因此除非用户可以指定新的变量名称对于您的程序的目的非常非常重要，否则用户不必担心您如何存储对象 - 不会被呈现带有看似奇怪的限制。

# rss - 新 RSS 条目的不显眼的实时通知

> ID：501043
> 
> 赞同：7
> 
> 时间：2009-02-01T15:55:43.147
> 
> 标签：rss, real-time

首先，我为什么要问：现在 StackOverflow 上的声誉点具有真正的价值（您可以通过提供赏金将它们用于该死的好答案）我想监控我可能能够回答的问题并猛扑他们！（此外，其他人实时回答我的问题这一事实使 StackOverflow 非常方便，所以如果能得到回报，那就太好了。）

将此作为更一般的问题提出，而不是特定于 StackOverflow：

*   RSS 提要与轮询和抓取相比通常会有什么样的延迟？
*   以不太分散注意力的方式显示通知的好方法是什么，例如 Mac 上的 Growl？（如果它确实太分散注意力，它也应该很容易打开和关闭。）

（或者，对于 StackOverflow 上瘾者来说，你在解决新问题方面的设置是什么，你能否将其推广到实时监控其他 Web 内容？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-01T16:45:00.113

> RSS 提要与轮询和抓取相比通常会有什么样的延迟？

这取决于站点对其 RSS 提要使用哪种缓存。在 SO 上，大多数提要没有明显的延迟，但您需要每分钟左右轮询一次提要。除非有问题的站点上有某种 ping 服务，否则程序无法自动从站点本身获取通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-12T01:14:57.567

您可以将[notify.me](http://notify.me)上的服务用作稍微显眼的 RSS 阅读器版本。它监控提要并向您发送电子邮件警报。但是使用基本的 StackOverflow 设置，即使只有“赏金问题”提要，您也可能会被通知淹没，因为每天有很多赏金优惠。

因此，也许可以将其与[Yahoo Pipes](http://pipes.yahoo.com/pipes/)结合起来，并根据仅包含您有兴趣回答的主题的信息构建一个过滤的子集。SO RSS 提要中的每个条目都有一个“类别”节点，其中包含其所有标签，并且 Pipes 将允许您基于这些类别构建 AND / OR / NOT 表达式。（而且我不知道可能会暴露哪些其他属性？）

即使您不希望通过电子邮件收到弹出式通知，Pipes 解决方案也可以让您在 RSS 提要中监控您想要的内容。不过，我猜你会看到大约一两个小时的延迟。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-16T21:56:30.330

关于问题#1：

让它尽可能短。如果您用来正确获取提要的任何东西都支持[ETags](http://en.wikipedia.org/wiki/HTTP_ETag)和[HTTP Cache-Control](http://www.mnot.net/cache_docs/#CACHE-CONTROL)，那么您应该没问题。如果您同时控制服务器和客户端，那么检查[Delta Encoding](http://www.wyman.us/main/2004/09/using_rfc3229_w.html) ( [RFC 3229](http://www.ietf.org/rfc/rfc3229.txt) ) 可能是一个好主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-13T04:42:07.637

Butcher 一个开源阅读器来打开/闪烁你的滚动锁定 LED。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-18T23:12:09.430

您可以使用 tcp 样式的退避来处理提要轮询。某人发帖的频率越高，您投票的频率就越高。

谷歌阅读器这样做；我在博客上发布的内容越多，每篇帖子的显示速度就越快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-29T19:34:40.893

为此，我正在尝试使用 Feed Notifier。

[http://www.feednotifier.com/](http://www.feednotifier.com/)

就其本身而言，我仍然无法突袭，因为我的弹出窗口会晚几分钟。那时，他们已经有 30 个观众、3 个答案等。

所以我很想看到第二个问题的答案......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-01T16:42:23.460

适用于 Mac的[Vienna RSS 阅读器](http://www.vienna-rss.org)显示 Growl 通知，但仅以“X 条新消息”的形式显示，并且不是非常实时的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-18T23:09:18.623

VibeFire 是一个不错的解决方案。它会为您读取 RSS 提要并弹出通知（如果您不阅读它们会自动消失）。 [http://vibefire.com](http://vibefire.com)如果您有兴趣。虽然它是一个捆绑安装程序，但它不会安装任何你不接受的东西。

# asp.net-mvc - 使用 Visual Studio 调试，ASP.NET MVC 上的 URL 错误

> ID：501059
> 
> 赞同：13
> 
> 时间：2009-02-01T16:04:23.957
> 
> 标签：asp.net-mvc, visual-studio-2008, debugging

我刚刚在 VS2008 中创建了一个 ASP.NET MVC 项目。

当我按 F5 在浏览器中调试当前视图时，它会打开 ASPX 文件的 URL：

[http://localhost/Views/MyController/Index.aspx](http://localhost/Views/MyController/Index.aspx)

代替 ：

[http://localhost/MyController](http://localhost/MyController)

如何让它打开好的网址？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-02-01T16:09:04.883

您已在项目属性的 Web 选项卡中将启动操作设置为当前页面。

将其更改为特定页面并将特定页面文本框留空。

**编辑**：从附加到这个答案的评论中，我们已经确定，VS 需要启发式地确定鉴于编辑器中的当前页面是“Views/Products/Index.aspx”，我们希望 VS 启动一个/Products 上的调试会话。

现在对 VS 要求太多了。

替代方案似乎总是从根开始并导航。

但是，您可以将特定页面文本框编辑为您希望它开始的路径。如果您正在调试上述视图，那么在文本框中输入“产品”可能是您最接近目标的方式。

每次要重复测试不同的视图时，都必须不断更改特定页面文本框的内容。

# c++ - 如何有效地实现事件循环？

> ID：501060
> 
> 赞同：0
> 
> 时间：2009-02-01T16:05:12.240
> 
> 标签：c++, com, performance

**COM 对象**（服务器）成功向**COM 客户端发送****事件通知**

 ****没有：**

*   ATL
*   MFC

如何有效地让**主线程**等待**/睡眠**（无限），直到**COM 服务器**通知**COM 客户端**特定**事件**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-01T16:52:58.663

带有事件对象。

主线程在其初始化中调用 CreateEvent() 以创建一个自动重置事件对象。

然后主线程进入一个事件循环，在该循环中它反复调用 MsgWaitForMultipleObjects()。（[这里](http://sarathc.wordpress.com/2008/09/19/when-and-how-should-we-use-msgwaitformultipleobjects/)是一个消息循环的例子。）

而且您通常*确实*需要检查窗口消息，即使主线程没有 GUI。

在任何必要的状态更新之后，在客户端线程（创建接收器对象的线程）中调用接收器方法中的 SetEvent()。这将唤醒主线程。

如果您还没有，请阅读[此](http://msdn.microsoft.com/en-us/library/ms809971.aspx)和[此。](http://blogs.msdn.com/oldnewthing/archive/2005/02/17/375307.aspx)

# generics - 具有泛型参数类型的函数

> ID：501069
> 
> 赞同：48
> 
> 时间：2009-02-01T16:09:47.503
> 
> 标签：generics, f#, overloading, type-inference, typeclass

我试图弄清楚如何定义一个适用于多种类型参数（例如 int 和 int64）的函数。据我了解，在 F# 中函数重载是不可能的（当然编译器会抱怨）。以下面的函数为例。

```
let sqrt_int = function
    | n:int   -> int (sqrt (float n))
    | n:int64 -> int64 (sqrt (float n)) 
```

编译器当然会抱怨语法无效（似乎不支持模式匹配中的类型约束），尽管我认为这说明了我想要实现的目标：一个对多个参数类型进行操作并返回相应值的函数类型。我有一种感觉，在 F# 中使用泛型类型/类型推断/模式匹配的某种组合是可能的，但是语法让我无法理解。我也尝试过使用 :? 运算符（动态类型测试）和模式匹配块中的*when*子句，但这仍然会产生各种错误。

由于我对这门语言相当陌生，我很可能在这里尝试做一些不可能的事情，所以如果有替代解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-02-01T18:50:49.253

重载通常是类型推断语言的错误（至少当像 F# 一样，类型系统不足以包含类型类时）。在 F# 中有许多选择：

*   对方法（类型的成员）使用重载，在这种情况下，重载的工作方式与其他 .Net 语言非常相似（您可以临时重载成员，前提是调用可以通过参数的数量/类型来区分）
*   使用“内联”、“^”和静态成员约束对函数进行临时重载（这是大多数需要处理 int/float/etc 的各种数学运算符；这里的语法很奇怪，这是除了 F# 库外很少使用）
*   通过传递额外的操作字典参数来模拟类型类（这是 INumeric 在 F# PowerPack 库之一中所做的，用于为任意用户定义的类型概括各种数学算法）
*   回退到动态类型（传入“obj”参数，进行动态类型测试，为错误类型抛出运行时异常）

对于您的特定示例，我可能只会使用方法重载：

```
type MathOps =
    static member sqrt_int(x:int) = x |> float |> sqrt |> int
    static member sqrt_int(x:int64) = x |> float |> sqrt |> int64

let x = MathOps.sqrt_int 9
let y = MathOps.sqrt_int 100L 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-28T20:40:19.313

这有效：

```
type T = T with
    static member ($) (T, n:int  ) = int   (sqrt (float n))
    static member ($) (T, n:int64) = int64 (sqrt (float n))

let inline sqrt_int (x:'t) :'t = T $ x 
```

它使用静态约束和重载，对参数的类型进行编译时查找。

静态约束是在存在运算符（`$`本例中为运算符）的情况下自动生成的，但始终可以手动编写：

```
type T = T with
    static member Sqr (T, n:int  ) = int   (sqrt (float n))
    static member Sqr (T, n:int64) = int64 (sqrt (float n))

let inline sqrt_int (x:'N) :'N = ((^T or ^N) : (static member Sqr: ^T * ^N -> _) T, x) 
```

更多关于[这里](http://nut-cracker.azurewebsites.net/blog/2011/11/15/typeclasses-for-fsharp/)的信息。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-02-01T16:42:26.627

是的，这是可以做到的。看看[这个 hubFS 线程](http://cs.hubfs.net/forums/thread/5343.aspx)。

在这种情况下，解决方案是：

```
let inline retype (x:'a) : 'b = (# "" x : 'b #)
let inline sqrt_int (n:'a) = retype (sqrt (float n)) : 'a 
```

**警告**：没有编译时类型检查。即`sqrt_int "blabla"`编译得很好，但你会在运行时得到一个 FormatException。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-02-01T21:21:16.187

这是使用运行时类型检查的另一种方法...

```
let sqrt_int<'a> (x:'a) : 'a = // '
    match box x with
    | :? int as i -> downcast (i |> float |> sqrt |> int |> box)
    | :? int64 as i -> downcast (i |> float |> sqrt |> int64 |> box)
    | _ -> failwith "boo"

let a = sqrt_int 9
let b = sqrt_int 100L
let c = sqrt_int "foo" // boom 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-01T19:10:01.960

不要放弃已经提供的正确答案，但实际上您可以在模式匹配中使用类型约束。语法是：

```
| :? type -> 
```

或者，如果您想结合类型检查和强制转换：

```
| :? type as foo -> 
```

# ruby-on-rails - 解析电子邮件的最佳插件和宝石 ala Highrise

> ID：501072
> 
> 赞同：2
> 
> 时间：2009-02-01T16:10:52.663
> 
> 标签：ruby-on-rails, ruby, email

我正在寻找有关解析电子邮件并将其插入数据库的最佳 Rails 插件和 gem 的建议，类似于 Highrise 和 Basecamp（以及其他）的工作方式。

此处描述[http://wiki.rubyonrails.org/rails/pages/HowToReceiveEmailsWithActionMailer](http://wiki.rubyonrails.org/rails/pages/HowToReceiveEmailsWithActionMailer)

目前有没有人推荐的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T20:57:47.933

我建议看看[astrotrain](http://github.com/entp/astrotrain/tree/master)。我自己没有使用过它，但我认为这是[entp](http://entp.com)家伙在他们的应用程序中使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T22:27:51.513

斯科特，

也许更多的信息会更好？您究竟需要对这些电子邮件做什么？解析它们？

当然，自然语言解析本身就是一个完整的主题。但我怀疑任何人的需求都会如此深入，以至于需要为这样的事情解析自然语言。

正如您自己在链接中提供的那样，获取/接收电子邮件非常简单。我个人会选择“使用 Net::POP3/IMAP 接收”下的示例路线，因为我讨厌在 unix 机器上设置任何类型的邮件服务器。恕我直言，设置谷歌邮件帐户（[http://www.google.com/apps/intl/en/business/details.html](http://www.google.com/apps/intl/en/business/details.html)）并使用 cron'd 脚本连接到该帐户绝对是最简单的（不使用脚本/运行器，呵呵）。

一旦你这样做了，设置一个解析器来通过主题行解释命令并在正文中导入消息将是微不足道的。这可能就是为什么还没有为这样的东西构建任何插件的原因。

抱歉，如果这不是您正在寻找的答案，但您自己动手似乎很简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-11T22:49:59.073

在 2011 年使用 Rails 3 时，我使用的方法是将邮件提取器与 rails ActionMailer 集成。

[https://github.com/look/fetcher](https://github.com/look/fetcher)

ActionMailer 使用底层邮件库解析电子邮件： [https ://github.com/mikel/mail](https://github.com/mikel/mail)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-24T15:21:37.357

试试[https://github.com/titanous/mailman](https://github.com/titanous/mailman)

来自 README：Mailman 是一个传入邮件处理微框架（支持 POP3 和 Maildir），它与 Rails 一起“开箱即用”。

# objective-c - 当文件、图片等放在其停靠图标上时，如何使 OS X 应用程序做出反应？

> ID：501079
> 
> 赞同：15
> 
> 时间：2009-02-01T16:16:09.267
> 
> 标签：objective-c, cocoa, macos, dock

某些应用程序，如 Photoshop，允许用户从 Web 浏览器中拖动图片，或从文件系统中拖动文件到 Dock 中的应用程序图标上。这样做会打开该应用程序中的文件。

这是怎么做到的？我想使用 Cocoa 和 Objective-C，但我对任何语言的任何解决方案都感兴趣。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-03T12:48:58.217

NSApplication 允许您为您的应用程序设置委托。如果用户将文件拖到您的停靠图标上，NSApplication 将调用该方法

```
- (BOOL)application:(NSApplication *)theApplication openFile:(NSString *)filename 
```

您的委托对象，以防它实现任何此类方法。如果内容不是真正的文件（例如，如果用户只是在应用程序中选择文本并将其拖到您的停靠图标上），则委托方法

```
- (BOOL)applicationOpenUntitledFile:(NSApplication *)theApplication 
```

叫做。

请参阅[NSApplication 类参考](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html)

基本上，您可以创建任何类型的任何对象（例如，仅继承 NSObject 的简单对象），在对象中定义上述两种方法，然后在您执行的应用程序的启动代码中的任何位置

```
whatever = [[YourObject alloc] init];
[[NSApplication sharedApplication] setDelegate:whatever]; 
```

就是这样。只要将文件或其他一些内容拖放到停靠图标上，就会调用相应的方法并且必须处理该请求。顺便说一句，如果您的应用程序与文件类型（例如 .myFileType）相关联并且用户在 Finder 中双击具有该扩展名的文件，则会调用相同的方法。

幕后真正发生的是启动服务向您的应用程序发送“打开文档”（'odoc'）Apple 事件。NSApplication 默认为这个事件注册一个句柄，并通过调用适当的委托方法转发请求。我猜你也可以直接收听这个 Apple Event，但你为什么会呢？直接处理 Apple Events 很尴尬。当您的应用程序不是 Cocoa，而是 Carbon（纯 C）时，您可能必须直接处理 Apple Event（我对 Carbon 不熟悉），但在 Cocoa 中，Apple 已经为您捕获了最重要的 Apple Events 并转换它们进入您的应用程序可以收听的委托调用或通知。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-01T19:22:52.090

如果您的应用程序是基于文档的，并且您在 Info.plist 中正确填写了必要的键，那么它就可以工作。当用户将文件拖到应用程序的 Dock 磁贴时，如果文件属于您注册的类型，Dock 将在磁贴上突出显示您的应用程序，如果用户将文件放在那里，NSDocumentController 将实例化您的文档类之一文件。如果文件不是您注册的类型，两者都会忽略它。

那么，您的应用程序是基于文档的吗？如果是这样，该文件是您注册的类型之一吗？

了解更多信息：

*   [Mac 的基于文档的应用程序编程指南](https://developer.apple.com/library/archive/documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/Introduction/Introduction.html)
*   [信息属性列表关键参考](https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/)
*   [如何使您的应用程序的 Dock 磁贴突出显示 [如果它应该但没有]](http://boredzo.org/blog/archives/2007-07-23/how-to-make-your-apps-dock-tile-highlight)

# android - Android上有标准的快捷方式吗？

> ID：501085
> 
> 赞同：10
> 
> 时间：2009-02-01T16:27:27.840
> 
> 标签：android, menu

是否有任何关于 Android 快捷方式的指南？我有典型的 CRUD，我想分配熟悉的快捷方式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-01T17:58:07.550

```
在应用程序之间切换/快速启动：
浏览器搜索 + b
联系人搜索 + c
电子邮件搜索 + e
谷歌邮件搜索 + g
日历搜索 + l
地图搜索 + 米
音乐搜索 + p
消息搜索 + s
YouTube 搜索 + y

在列表中导航
向下翻页空格键
向上翻页 SHIFT + 空格键
跳转到列表末尾 ALT + TRACKBALL roll DOWN
跳转到列表顶部 ALT + TRACKBALL roll UP

打字和文本导航提示：
插入特殊字符 ALT + SPACEBAR 打开特殊字符选择器
删除左边的字符 DEL
向右删除字符 SHIFT + DEL
删除整行 ALT + DEL
持续大写 按 SHIFT 两次；再次按 SHIFT 退出
将光标跳转到行首/行尾 ALT + 向左/向右滚动 TRACKBALL
创建制表符 ALT + q
突出显示（选择）文本 SHIFT + 滚动 TRACKBALL
剪切文本 MENU + x，或突出显示文本，按住轨迹球，选择剪切
将文本复制到剪贴板 MENU + c，或突出显示文本，按住
轨迹球，选择复制
粘贴复制到剪贴板的文本 MENU + v，或突出显示文本，按住
轨迹球，选择粘贴
撤消更改 MENU + z
选择字段 MENU + a 中的所有文本，或突​​出显示文本，按住
轨迹球，选择 全选

浏览器快捷方式
打开转到窗口 MENU + s
打开书签 MENU + b
打开 Windows 菜单 + w
查看历史 MENU + h
刷新或停止页面 MENU + r
返回一页 MENU + j
前进一页 MENU + k
在页面上查找 MENU + f
进入主页 MENU + ENTER
放大 MENU + i
缩小 MENU + o
转到设置 MENU + p
向下翻页空格键
向上翻页 SHIFT + 空格键

地图快捷方式
方向菜单 + d
选择地图模式 MENU + m
历史菜单 + h
我的位置 MENU + 0（零）
转到设置 MENU + p
放大 MENU + i
缩小 MENU + o

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-24T08:39:38.723

我上次检查时，答案是**否定**的。

# python - XMP 图像标记和 Python

> ID：501087
> 
> 赞同：5
> 
> 时间：2009-02-01T16:28:14.423
> 
> 标签：python, xmp

如果我要在 Python 中通过 XMP 标记一堆图像，最好的方法是什么？我使用过 Perl 的**Image::ExifTool**，我非常习惯它的可靠性。我的意思是这个东西从来没有在成千上万的图像上变砖。

我发现[了这一点](http://code.google.com/p/python-xmp-toolkit/)，得到了欧洲航天局等重量级机构的支持，但它被明确标记为不稳定。

现在，假设我对 C++ 很熟悉，那么在 Python 中直接使用[Adob​​e XMP 工具包有多容易？](http://www.adobe.com/devnet/xmp/)以前从未这样做过，我不确定我会注册什么。

**更新：**我尝试了一些库，包括前面提到的工具包，它们仍然很不成熟并且有明显的问题。我求助于实际编写了一个基于 Perl 的服务器，该服务器接受 XML 请求以读取和写入元数据，并使用经过实战测试的 Image::EXIF。代码量实际上非常少，绝对比通过尝试让 Python 库工作来折磨自己要好。服务器解决方案与语言无关，所以它是一个双重的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-01T16:44:56.247

好吧，他们的网站说 python-xmp-toolkit 通过 ctypes 使用基于 Adob​​e XMP 工具包的 Exempi。我想说的是，您不太可能自己创建更好的 C++ 代码包装。如果它不稳定（即有缺陷），那么创建补丁很可能比自己从头开始更便宜。

但是，在您的特殊情况下，这取决于您需要多少功能。如果您只需要一个函数，那么将 C++ 代码包装到一个小型 C 扩展库或使用 Cython 是可行的。当您需要拥有所有功能和灵活性时，您必须手动或使用 SWIG 创建包装器，基本上重复其他人已经完成的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-09-13T07:52:36.263

我用 python-xmp-toolkit 挣扎了几个小时，最终放弃了，只是打包了对[ExifTool](http://www.sno.phy.queensu.ca/~phil/exiftool/)的调用。

还有[一个包装 ExifTool 的 Ruby 库](http://miniexiftool.rubyforge.org/)（尽管比我创建的要好得多）；我觉得值得将它移植到 Python 中，以便以一种简单的方式处理 XMP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-05T16:58:22.930

对于 Python 3.x，有[**py3exiv2**](http://www.py3exiv2.tuxfamily.org/)支持编辑 XMP 元数据

> 使用 py3exiv2，您可以读取和写入所有标准元数据，创建自己的 XMP 命名空间或提取嵌入在图像文件中的缩略图。

我喜欢 py3exiv2 的一件事是它建立在 (C++) [exiv2 库之上](http://exiv2.org/)，该库似乎维护良好

虽然在我的系统（Ubuntu 16.04）上安装它时确实遇到了问题。为了让它工作，我首先必须安装最新版本的 libexiv2-dev ( `sudo apt-get install libexiv2-dev`)，然后才安装 py3exiv2 ( `sudo -H pip3 install py3exiv2`)

以下是我使用 py3exiv2 编写新标签的方法：

```
import pyexiv2
metadata = pyexiv2.ImageMetadata("file_name.jpg")
metadata.read()
key = "Xmp.xmp.CustomTagKey"
value = "CustomTagValue"
metadata[key] = pyexiv2.XmpTag(key, value)
metadata.write() 
```

（文档中也有[教程](http://python3-exiv2.readthedocs.io/en/latest/tutorial.html)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-01T22:30:52.330

对于将来找到此线程的人，我想分享我的解决方案。[我在 Python 包索引 (PyPI) 上放了一个名为`imgtag`.](https://pypi.org/project/imgtag/) 它允许您使用 进行基本的 XMP 主题字段标签编辑`python-xmp-toolkit`，但将实际使用的所有令人沮丧的废话抽象`python-xmp-toolkit`为一行命令。

为您的平台安装`exempi`，然后运行

```
python3 -m pip install imgtag 
```

现在您可以这样使用它：

```
from imgtag import ImgTag

# Open image for tag editing
test = ImgTag(
           filename="test.jpg", # The image file
           force_case="lower",  # Converts the case of all tags
                                # Can be `None`, `"lower"`, `"upper"`
                                # Default: None
           strip=True,          # Strips whitespace from the ends of all tags
                                # Default: True
           no_duplicates=True   # Removes all duplicate tags (case sensitive)
                                # Default: True
       )

# Print existing tags
print("Current tags:")
for tag in test.get_tags():
    print("  Tag:", tag)

# Add tags
test.add_tags(["sleepy", "happy"])

# Remove tags
test.remove_tags(["cute"])

# Set tags, removing all existing tags
test.set_tags(["dog", "good boy"])

# Save changes and close file
test.close()

# Re-open for tag editing
test.open()

# Remove all tags
test.clear_tags()

# Delete the ImgTag object, automatically saving and closing the file
del(test) 
```

我还没有为其他 XMP 字段（如描述、日期、创建者等）添加方法。也许有一天我会这样做，但是如果您查看[源代码中现有函数的](https://github.com/nimaid/python-imgtag/blob/master/imgtag/core.py)工作方式，您可能会弄清楚如何添加自己方法。如果您确实添加了更多方法，请提出拉取请求。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-04T04:21:00.897

您可以使用 ImageMagic [convert](http://www.imagemagick.org/www/convert.html)，IIRC 还有一个 Python 模块。

# c# - 如何在 C# 中将小数转换为 int？

> ID：501090
> 
> 赞同：248
> 
> 时间：2009-02-01T16:29:29.070
> 
> 标签：c#, .net, int, decimal

如何将小数转换为整数？

* * *

## 回答 #1

> 赞同：296
> 
> 时间：2009-02-01T16:31:37.193

使用`Convert.ToInt32`from `mscorlib`_

```
decimal value = 3.14m;
int n = Convert.ToInt32(value); 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/93kx4xke.aspx)。您也可以使用`Decimal.ToInt32`. 再次，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.decimal.toint32.aspx)。最后，您可以进行直接转换，如

```
decimal value = 3.14m;
int n = (int) value; 
```

它使用显式转换运算符。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/zf02hx8s.aspx)。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2009-02-01T17:10:24.090

你不能。

好吧，当然*可以*，但是 int (System.Int32) 不足以容纳所有可能的十进制值。

这意味着如果你投一个大于 int.MaxValue 的小数，你会溢出，如果小数小于 int.MinValue，它会下溢。

当您不足/溢出时会发生什么？两件事之一。如果您的构建未选中（即，CLR 不关心您是否这样做），您的应用程序将在值上溢/下溢后继续，但 int 中的值不会是您所期望的。这可能会导致间歇性错误，并且可能难以修复。您最终会使您的应用程序处于未知状态，这可能会导致您的应用程序损坏其正在处理的任何重要数据。不好。

如果您的程序集被检查（属性->构建->高级->检查算术溢出/下溢或 /checked 编译器选项），当发生下溢/溢出时，您的代码将引发异常。这可能总比没有好；但是，程序集的默认设置是不检查上溢/下溢。

真正的问题是“你想做什么？” 在不知道您的要求的情况下，没有人可以告诉您在这种情况下**应**该做什么，除了显而易见的：不要这样做。

如果您特别不在乎，这里的答案是有效的。但是，您应该*传达您的理解，即可能会发生溢出，并且通过将强制转换代码包装在***未经检查**的块中并不重要

```
unchecked
{
  // do your conversions that may underflow/overflow here
} 
```

这样你后面的人就会明白你不在乎，如果将来有人将你的构建更改为 /checked，你的代码不会意外中断。

**如果**您只想删除数字的小数部分，留下整数部分，您可以使用 Math.Truncate。

```
decimal actual = 10.5M;
decimal expected = 10M;
Assert.AreEqual(expected, Math.Truncate(actual)); 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2009-02-01T16:41:44.100

```
int i = (int)d; 
```

会给你四舍五入的数字。

如果您想四舍五入到最接近的偶数（即 >.5 将四舍五入），您可以使用

```
int i = (int)Math.Round(d, MidpointRounding.ToEven); 
```

通常，您可以在 C# 中的所有数字类型之间进行转换。如果在演员阵容中没有信息会丢失，你可以隐式地做到这一点：

```
int i = 10;
decimal d = i; 
```

尽管如果您愿意，您仍然可以明确地执行此操作：

```
int i = 10;
decimal d = (decimal)i; 
```

但是，如果你要通过演员表丢失信息，你必须明确地这样做（以表明你知道你可能会丢失信息）：

```
decimal d = 10.5M;
int i = (int)d; 
```

在这里你失去了“.5”。这可能很好，但您必须明确说明并进行明确的演员表以表明您知道您可能会丢失信息。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2009-02-01T16:32:55.177

```
decimal d = 2;
int i = (int) d; 
```

这应该工作得很好。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-07-16T12:36:24.477

```
decimal vIn = 0.0M;
int vOut = Convert.ToInt32(vIn); 
```

这是一个非常方便的转换数据类型网页，供其他人使用。 [http://www.convertdatatypes.com/Convert-decimal-to-int-in-CSharp.html](http://www.convertdatatypes.com/Convert-decimal-to-int-in-CSharp.html)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-02-01T16:32:11.123

`System.Decimal`实现`IConvertable`具有`ToInt32()`成员的接口。

打电话`System.Decimal.ToInt32()`对你有用吗？

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2011-09-05T13:13:36.730

将小数四舍五入到最接近的整数

```
decimal a ;
int b = (int)(a + 0.5m); 
```

当`a = 49.9`, 那么`b = 50`

当`a = 49.5`, 那么`b = 50`

当`a = 49.4`, 那么`b = 49`等等

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-02-01T17:06:01.710

快速舍入的一个巧妙技巧是在将小数转换为 int 之前添加 0.5。

```
decimal d = 10.1m;
d += .5m;
int i = (int)d; 
```

仍然离开`i=10`，但是

```
decimal d = 10.5m;
d += .5m;
int i = (int)d; 
```

将四舍五入，这样`i=11`。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2009-02-01T17:16:34.653

我更喜欢使用[Math.Round](http://msdn.microsoft.com/en-us/library/system.math.round.aspx)、[Math.Floor](http://msdn.microsoft.com/en-us/library/system.math.floor.aspx)、[Math.Ceiling](http://msdn.microsoft.com/en-us/library/system.math.ceiling.aspx)或[Math.Truncate](http://msdn.microsoft.com/en-us/library/system.math.truncate.aspx)来根据需要显式设置舍入模式。

请注意，它们也都返回 Decimal - 因为 Decimal 的值范围比 Int32 更大，所以您仍然需要强制转换（并检查溢出/下溢）。

```
 checked {
   int i = (int)Math.Floor(d);
 } 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2009-08-31T02:56:05.530

十进制`d = 5.5`;

```
int i = decimal.ToInt32(d);// you will get i = 5 
```

参考：[链接文本](http://msdn.microsoft.com/en-us/library/system.decimal.toint32.aspx)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-24T19:20:26.327

我发现如果您有一个装箱的小数（即对象类型内的十进制值），则转换运算符不起作用。Convert.ToInt32(decimal as object) 在这种情况下可以正常工作。

从数据库中检索 IDENTITY/AUTONUMBER 值时会出现这种情况：

```
SqlCommand foo = new SqlCommand("INSERT INTO...; SELECT SCOPE_IDENTITY()", conn);
int ID = Convert.ToInt32(foo.ExecuteScalar());  // works
int ID = (int)foo.ExecuteScalar();              // throws InvalidCastException 
```

请参阅[4.3.2 取消装箱转换](http://msdn.microsoft.com/en-us/library/aa691159.aspx)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-04-03T13:29:03.200

似乎没有答案可以处理由于尝试转换 int 范围之外的小数而产生的 OverflowException/UnderflowException。

```
int intValue = (int)Math.Max(int.MinValue, Math.Min(int.MaxValue, decimalValue)); 
```

如果十进制值超出 int 范围，此解决方案将返回可能的最大或最小 int 值。当值在 int 范围内时，您可能希望使用 Math.Round、Math.Ceiling 或 Math.Floor 添加一些舍入。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-02T09:54:04.863

将十进制转换为整数

```
decimal decimalValue=5.00;
int intValue=Convert.ToInt32(decimalValue); 
```

# gcc - .com 是什么意思？

> ID：501105
> 
> 赞同：13
> 
> 时间：2009-02-01T16:37:02.690
> 
> 标签：gcc, assembly, x86, gnu-assembler

我刚刚翻译了这个程序，

```
#include <stdio.h>

int dam[1000][1000];

int main (int argc, const char * argv[]) {
    // insert code here...
    printf("Hello, World!\n");
    return 0;
} 
```

使用 gcc 生产组装，

```
 .cstring
LC0:
    .ascii "Hello, World!\0"
    .text
.globl _main
_main:
    pushl   %ebp
    movl    %esp, %ebp
    pushl   %ebx
    subl    $20, %esp
    call    L3
"L00000000001$pb":
L3:
    popl    %ebx
    leal    LC0-"L00000000001$pb"(%ebx), %eax
    movl    %eax, (%esp)
    call    L_puts$stub
    movl    $0, %eax
    addl    $20, %esp
    popl    %ebx
    leave
    ret
.comm _dam,1000000,5
    .section __IMPORT,__jump_table,symbol_stubs,self_modifying_code+pure_instructions,5
L_puts$stub:
    .indirect_symbol _puts
    hlt ; hlt ; hlt ; hlt ; hlt
    .subsections_via_symbols 
```

.com 是什么意思？大坝使用堆空间、堆栈空间还是数据空间？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-01T16:53:59.830

从`as`手册：

> ..comm 声明了一个名为 symbol 的通用符号。链接时，一个对象文件中的公共符号可能与另一个对象文件中已定义或同名的公共符号合并。如果 ld 没有看到符号的定义——只有一个或多个常见符号——那么它将分配长度字节的未初始化内存。长度必须是绝对表达式。如果 ld 看到多个具有相同名称的常见符号，并且它们的大小不同，它将使用最大的大小分配空间。
> 
> 使用 ELF 时，.comm 指令采用可选的第三个参数。这是符号的所需对齐方式，指定为字节边界（例如，16 对齐意味着地址的最低有效 4 位应为零）。对齐必须是绝对表达式，并且必须是 2 的幂。如果 ld 为公共符号分配未初始化的内存，它将在放置符号时使用对齐方式。如果未指定对齐方式，as 会将对齐方式设置为小于或等于符号大小的 2 的最大幂，最大为 16。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-28T06:32:27.013

> ### .comm 名称、大小、对齐方式

.comm 指令在数据部分分配存储。存储由标识符名称引用。大小以字节为单位，必须为正整数。无法预定义名称。对齐是可选的。如果指定了对齐方式，则名称的地址将对齐到对齐的倍数。

来源：[https ://docs.oracle.com/cd/E26502_01/html/E28388/eoiyg.html](https://docs.oracle.com/cd/E26502_01/html/E28388/eoiyg.html)

# matlab - 寻找对微分精度持轻松态度的 ODE 积分器/求解器

> ID：501111
> 
> 赞同：1
> 
> 时间：2009-02-01T16:41:07.597
> 
> 标签：matlab, math, mathematical-optimization, numerical, scientific-computing

我有一个（一阶）ODE 系统，计算导数相当昂贵。

然而，在给定的误差范围内，导数的计算成本要低得多，因为导数是从收敛序列计算的，并且边界可以放在丢弃项的最大贡献上，或者通过使用存储在 kd-tree 中的预先计算的范围信息/octree 查找表。

不幸的是，我还没有找到任何可以从中受益的通用 ODE 求解器；他们似乎都只是给你坐标并想要一个准确的结果。（请注意，我不是 ODE 方面的专家；我熟悉 Runge-Kutta、Numerical Recipies 书中的材料、LSODE 和 Gnu 科学图书馆的求解器）。

即对于我见过的所有求解器，您提供了一个`derivs`回调函数，接受 a`t`和一个数组`x`，并返回一个返回数组`dx/dt`；但理想情况下，我正在寻找一个能提供回调`t`、`x`s*和一系列可接受的错误*，并接收`dx/dt_min`和`dx/dt_max`返回数组的方法，其导数范围保证在所需的精度范围内。（可能有许多同样有用的变体）。

任何考虑到这种事情而设计的求解器的指针，或解决问题的替代方法（我不敢相信我是第一个想要这样的东西的人）将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-01T17:28:31.620

粗略地说，如果你知道 f' 到绝对误差 eps，并从 x0 积分到 x1，那么来自导数误差的积分误差将是 <= eps*(x1 - x0)。还有来自您的 ODE 求解器的离散化错误。考虑一下 eps*(x1 - x0) 对您来说有多大，并为 ODE 求解器提供使用 error <= eps 计算的 f' 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T19:21:22.513

我不确定这是一个恰当的问题。

在许多算法中，*例如，*非线性方程求解，f(x) = 0，一个导数 f'(x) 的估计是用于像牛顿法这样的东西所需要的，因为你只需要在“大方向”的答案。

但是，在这种情况下，导数是您正在求解的（ODE）方程的主要部分 - 导数错误，您将得到错误的答案；这就像试图仅用 f(x) 的近似值来求解 f(x) = 0。

正如另一个答案所建议的那样，如果您将 ODE 设置为应用 f(x) + g(x)，其中 g(x) 是一个错误项，您应该能够将导数中的错误与输入中的错误联系起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-06T16:36:47.460

在考虑了更多之后，我想到区间算术可能是关键。我的`derivs`函数基本上返回间隔。使用区间算术的积分器会将 x 保持为区间。我感兴趣的只是`x`在 final 的 s 上获得足够小的误差界限`t`。一个明显的方法是迭代地重新集成，提高样本的质量，每次迭代都会引入最大的错误，直到我们最终得到一个具有可接受范围的结果（尽管这听起来可能是一种“比疾病更糟糕的治疗方法”）整体效率）。我怀疑自适应步长控制可以很好地适应这种方案，选择步长以保持“隐式”离散化误差与“显式误差”相当

无论如何，谷歌搜索“ode 求解器区间算术”或只是“区间 ode”会发现大量有趣的新内容和相关内容（特别是[VNODE](http://www.cas.mcmaster.ca/%7Enedialk/Software/VNODE/VNODE.shtml)及其参考资料）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-08T19:12:07.557

如果您有一个刚性系统，您将使用某种形式的隐式方法，在这种情况下，导数仅在牛顿迭代中使用。使用近似雅可比行列式会花费您在牛顿迭代上的严格二次收敛，但这通常是可以接受的。或者（主要是在系统很大的情况下）您可以使用无雅可比 Newton-Krylov 方法来求解阶段，在这种情况下，您的近似雅可比只是一个预处理器，并且您在牛顿迭代中保持二次收敛。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-01T23:04:42.453

您是否考虑过使用[odeset](http://www.mathworks.com/access/helpdesk/help/techdoc/ref/odeset.html)？它允许您为 ODE 求解器设置选项，然后将选项结构作为第四个参数传递给您调用的任何求解器。您可能最感兴趣的错误控制属性（RelTol、AbsTol、NormControl）。不确定这是否正是您需要的那种帮助，但这是我能想到的最好的建议，几年前最后一次使用 MATLAB ODE 函数。

另外：对于用户定义的导数函数，您是否可以将公差硬编码到导数的计算中，或者您真的需要从求解器传递错误限制？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-04T19:03:14.670

不确定我做出了多大贡献，但在制药建模领域，我们使用 LSODE、DVERK 和 DGPADM。DVERK 是一个不错的快速简单阶 5/6 Runge-Kutta 求解器。DGPADM 是一个很好的矩阵指数求解器。如果您的 ODE 是线性的，那么矩阵指数是迄今为止最好的。但是你的问题有点不同。

顺便说一句， T 论点只是为了一般性。我从未见过依赖于 T 的实际系统。

你可能正在进入新的理论领域。祝你好运！

补充：如果您正在进行轨道模拟，在我看来，我听说过用于此的特殊方法，基于圆锥截面曲线。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-11-08T19:30:25.290

检查具有线性基函数和中点求积的有限元方法。求解以下 ODE 只需要对每个元素的 f(x)、k(x) 和 b(x) 进行一次评估：

-k(x)u''(x) + b(x)u'(x) = f(x)

答案将具有与您的评估误差成比例的逐点误差。

如果您需要更平滑的结果，您可以使用二次基函数，每个元素对上述每个函数进行 2 次评估。

# mysql - MySql 5.0.x 中的存储过程可以加密吗？

> ID：501122
> 
> 赞同：1
> 
> 时间：2009-02-01T16:45:22.033
> 
> 标签：mysql

在 Microsoft Sql 中，可以使用加密存储过程

```
CREATE PROCEDURE dbo.foo 
WITH ENCRYPTION 
AS 
BEGIN 
    SELECT 'foo' 
END 
```

这会阻止人们查看存储过程代码。

如何在**MySql** 5.0.x 中执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-01T16:55:29.097

你不能在 MySQL 中做到这一点。请参阅错误 # [4210](http://bugs.mysql.com/bug.php?id=4210)。

[编辑]：[列奥尼达斯](https://stackoverflow.com/users/57510/leonidas)对这个问题的[另一个答案](https://stackoverflow.com/questions/501122/can-stored-procedure-in-mysql-5-0-x-be-encrypted/501145#501145)的评论需要在那里供任何人阅读，所以我在这里引用它：

> 混淆是可以逆转的。我通过 Google 找到了至少一种产品，该产品承诺会显示 SP 代码。所以我认为/希望 MySQL 团队不会为“默默无闻的安全性”或更糟糕的“知识产权保护”而烦恼（如错误 4210 中所述）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T16:57:40.463

看起来之前有人[要求](http://bugs.mysql.com/bug.php?id=4210) [过，](http://bugs.mysql.com/bug.php?id=19516)但我不知道他们是否正在考虑。

# xml - 使用 ant 和 xslt 动态连接 xml 文件

> ID：501133
> 
> 赞同：5
> 
> 时间：2009-02-01T16:52:04.220
> 
> 标签：xml, xslt, ant, saxon

# 问题

我们有大量的 xml 配置文件，我们希望在构建时将它们合并到一个主版本中。较小的配置文件更容易维护，一个大文件加载速度更快，所以我认为这是一种流行的构建转换过程，我会在网上找到很多很好的例子。

我能够[在 StackOverflow](https://stackoverflow.com/questions/217591/concatenating-xml-files-with-xslt)找到一些解决问题的一部分的好方法，但它们都依赖于知道需要预先合并的 xml 文件的名称。这对我来说似乎是不必要的开销。应该可以编写一个构建脚本，该脚本可以动态计算需要哪些输入 xml 文件。

不幸的是，我能找到实现这一目标的唯一方法是有点破解。它是这样工作的，

1.  使用我从互联网上偷来的随机蚂蚁任务将目录列表写入 xml 文件。
2.  将 xml 文件输入 xslt 转换，然后可以加载其他目录列表引用的 xml 文件并将它们连接起来。
3.  删除包含目录列表的临时 xml 文件。

这是蚂蚁脚本

```
<taskdef name="xml-dir-list"
  classname="net.matthaynes.xml.dirlist.AntFileListing"
  classpath="antlib/xml-dir-listing.0.1.jar;
    antlib/jakarta-regexp-1.5.jar;antlib/log4j-1.2.14.jar"/>

<macrodef name="build-plugin-xml" description="todo">
    <attribute name="pluginName"/>

    <xml-dir-list depth="0" verbose="false" 
      srcDir="${src.dir}/@{pluginName}/forms/" includesRegEx="\.xml$" 
      destFile="${src.dir}/@{pluginName}/forms/fileList.xml"/>

    <xslt in="${src.dir}/forms/fileList.xml"
      out="${src.dir}/@{pluginName}/@{pluginName}_extn.yuix
      style="${src.dir}/@{pluginName}/forms/extn.yuix.xsl" />

    <delete file="${src.dir}/@{pluginName}/forms/fileList.xml"/>
</macrodef> 
```

这是样式表，

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <xsl:template match="/">
        <Forms applicationId="YFSSYS00011">
            <GlobalExtensions>
                <Tasks/>
            </GlobalExtensions> 
            <xsl:apply-templates select="directory/file"/>
        </Forms>
    </xsl:template>

    <xsl:template match="file">
        <xsl:copy-of select="document(@name)/Forms/Form"/>
    </xsl:template>
</xsl:stylesheet> 
```

有没有人找到一种更简单的方法来实现在 XSLT 中合并哪些文件的动态发现？XSLT 不能直接读取目录并不奇怪，但我希望找到一种比通过另一个 xml 文件更简单的方法来传递文件名列表。

# 已实施的解决方案

一旦我对 ant 脚本进行了一些额外的调整，[Dimitre 的解决方案就非常有效，](https://stackoverflow.com/questions/501133/dynamically-concatenating-xml-files-with-ant-and-xslt/501534#501534)

```
<taskdef name="saxon-xslt" classname="net.sf.saxon.ant.AntTransform"
  classpath="antlib/saxon9.jar;antlib/saxon9-ant.jar"/> 
```

[...]

```
<macrodef name="build-plugin-xml" description="todo">
    <attribute name="pluginName"/>

    <saxon-xslt 
      in="build.xml"
      out="${compca.src.dir}/temp/@{pluginName}/@{pluginName}_extn.yuix"
      style="antscripts/extn.yuix.xsl">
    <param name="formsDir" 
      expression="${compca.src.dir}/@{pluginName}/forms/"/>
    </saxon-xslt>
</macrodef> 
```

和 xsl 样式表（我移动的）

```
 <xsl:stylesheet version="1.0" 
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
      <xsl:param name="formsDir" />
        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

        <xsl:template match="/">
            <Forms applicationId="YFSSYS00011">
                <GlobalExtensions>
                    <Tasks/>
                </GlobalExtensions>
                <xsl:apply-templates select=
                  "collection(
                  concat('file:///',
                  $formsDir,
                  '?select=*.yuix;recurse=yes;on-error=ignore'
                  )
                  )/*
                "/>
            </Forms>

        </xsl:template>

        <xsl:template match="file">
            <xsl:copy-of select="/Forms/Form"/>
        </xsl:template>
    </xsl:stylesheet> 
```

这些调整只是让 Saxon9 加载并使用参数设置目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T20:44:05.420

> 有没有人找到一种更简单的方法来实现在 XSLT 中合并哪些文件的动态发现？XSLT 不能直接读取目录并不奇怪，但我希望找到一种比通过另一个 xml 文件更简单的方法来传递文件名列表。

**XML 文件的动态发现和处理*可以*使用 XPath 2/0/XSLT 2.0 完成**。更具体地说，必须使用 XPath 2.0[**`collection()`**](http://www.w3.org/TR/xpath-functions/#func-collection)功能。

有关详细信息，请参阅[**我对这个问题的回答**](https://stackoverflow.com/questions/425117#425846)。

**所以，如果 ANT 可以使用合适的 XSLT 2.0 处理器**，（我会推荐使用[**Saxon**](http://www.sourceforge.net/projects/saxon)），**那么问题就有了完整的解决方案**，使用标准[**`collection()`**](http://www.w3.org/TR/xpath-functions/#func-collection)函数。

# c# - Windows 窗体中的动态内容

> ID：501161
> 
> 赞同：0
> 
> 时间：2009-02-01T17:08:46.557
> 
> 标签：c#, winforms

我正在开发一个从 C# 提要中获取内容的应用程序。然后，此内容应显示在表单上。

我的问题是我应该使用什么控件来保存这些数据？我应该为每个项目（动态）创建一个新标签吗？有人向我建议我应该使用 RichTextBox，但此内容不应该是可编辑的。

如果有帮助，我是一名网络开发人员。我通常会以 HTML 格式输出我的内容，并会为我的内容使用标题、段落等。我看错了吗？

如果这似乎是一个非常基本的问题，那么它可能是。我对 Windows 窗体很陌生。

谢谢，罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-01T17:14:32.693

如果您对 HTML 感到满意，我会说使用 WebBrowser 控件。它易于使用，您熟悉 HTML，因此您可以完全控制要显示的内容。试图重新发明轮子是没有用的。

编辑：如果您确实想坚持使用 Winforms，并且觉得 WebBrowser 不会削减它，我可能会建议使用 DataGridView。您可以在其中托管各种内容以及图像和链接，并且可以关闭各种编辑。您甚至可以摆脱网格线，因此它不会具有网格的“外观”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T17:24:12.533

列表框或列表视图也是不错的选择。最大的特点是可以方便的从顶部移除内容，同时向底部添加内容，让滚动非常容易实现

它是什么样的内容？是否有样式（例如有字体、颜色、链接）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T17:29:51.350

这就是发明 WPF 的原因。在将基于标记的内容放到您的应用程序中方面，它比 WinForms 灵活得多。如果您可以使用 WPF，请检查一下（尽管您必须通过学习曲线才能做到这一点）。

否则，您可以动态创建标签控件并将它们放在 Panel 控件上以在一定程度上控制布局。如果您必须使用 WinForms 并且必须使用公共控件，请坚持使用 TextBox 或 RichTextEditor 并禁用对它们的编辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-01T17:34:15.443

我有来自 Web 服务的数据的 WCF 提要。在 windows 窗体应用程序中，我创建了一个用户控件来显示一个数据单元。对于来自 Web 服务的每个数据单元，我创建了一个用户控件的实例。它们垂直添加到滚动窗口中。用户控件允许我根据需要对信息进行样式化，并且用户可以通过按钮等与内容进行交互。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-01T17:48:58.270

DataGridView 对此已经足够了。请参阅此示例。当然，您可以改善外观和感觉:)

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        List<Item> items = new List<Item>();

        items.Add(new Item("item 1"));
        items.Add(new Item("item 2"));
        items.Add(new Item("item 3"));
        items.Add(new Item("item 4"));

        dataGridView1.DataSource = items;
    }
}
class Item
{
    public string ItemName { get; set; }
    public Item(string name)
    {
        ItemName = name;
    }

} 
```

# c++ - 关于auto_ptr的一个问题

> ID：501163
> 
> 赞同：2
> 
> 时间：2009-02-01T17:09:57.413
> 
> 标签：c++, templates, standard-library

```
template<class Y>

operator auto_ptr_ref<Y>() throw() {

   return auto_ptr_ref<Y>(release());
} 
```

它是标准库中类 auto_ptr 实现的一部分。

这意味着什么？

为什么“运算符”和“（）”之间有一个“auto_ptr_ref”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-01T17:42:22.340

我会告诉你*为什么*那个转换运算符碰巧在那里。好吧，看看这个例子：

```
struct A;
struct B {
    explicit B(A&a):a(a){ }   
    A &a;
};

struct A {
    A() { }
    A(B b){ move_from(a); }
    A(A &a) { move_from(a); }

    operator B() { return B(*this); }

    void move_from(A &a) { 
        std::cout << "A::A(@" << &b.a << ")" << std::endl;
    }
};

int main() {
    A a = A();
} 
```

我们的类 A 有移动语义：在它的复制构造函数中，我们想从另一个实例中“窃取”一些东西。对于 auto_ptr，这是托管的指针，对我们来说，我们只是输出一条消息。重要的是我们不能使用通常的复制构造函数：

```
A(A const& a) { 
    /* oops, a is const, we can't steal something from it! */ 
} 
```

但是，如果我们将其更改为`A(A &a)`，我们将无法从按值/临时 A 构造：那些不能绑定到对非常量的引用：

```
A(A &a) { 

}

...
A a = A(); // fail, because A &a = A() doesn't work 
```

auto_ptr 和我们的 A 类使用仍然可以在临时/按值 A 上调用非常量成员函数的技巧。也就是说，我们也可以这样写：

```
struct A {
    ...
    B get_b() { return B(*this); } 
    ...
};

...
A a = A().get_b(); 
```

但这行得通，当然，我们不想为此烦恼。我们希望它只分配一个`A()`或返回一个`A`按值的函数的返回值。所以 auto_ptr 和我们的 A 类使用的是转换运算符，它会自动计算出当 A 转换为 B 时，我们可以使用我们临时创建的 B 构造一个 A 实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-01T17:17:26.320

这就是转换运算符的作用，从 auto_ptr 转换为 auto_ptr_ref<Y>。

# c# - 没有使用 XPath 从 Atom XML 文档中选择节点？

> ID：501171
> 
> 赞同：7
> 
> 时间：2009-02-01T17:13:00.307
> 
> 标签：c#, xml, xpath, xmldocument, atom-feed

我正在尝试以编程方式解析 Atom 提要。我将原子 XML 作为字符串下载。我可以将 XML 加载到`XmlDocument`. 但是，我无法使用 XPath 遍历文档。每当我尝试时，我都会得到`null`.

我一直在使用这个 Atom 提要作为测试：[http ://steve-yegge.blogspot.com/feeds/posts/default](http://steve-yegge.blogspot.com/feeds/posts/default)

调用`SelectSingleNode()`总是返回`null`，除非我使用“ `/`”。这是我现在正在尝试的：

```
using (WebClient wc = new WebClient())
{
    string xml = wc.DownloadString("http://steve-yegge.blogspot.com/feeds/posts/default");
    XmlNamespaceManager nsMngr = new XmlNamespaceManager(new NameTable());
    nsMngr.AddNamespace(string.Empty, "http://www.w3.org/2005/Atom");
    nsMngr.AddNamespace("app", "http://purl.org/atom/app#");
    XmlDocument atom = new XmlDocument();
    atom.LoadXml(xml);
    XmlNode node = atom.SelectSingleNode("//entry/link/app:edited", nsMngr);
} 
```

我认为这可能是因为我的 XPath，所以我也尝试了对根节点的简单查询，因为我知道根应该可以工作：

```
// I've tried both with & without the nsMngr declared above
XmlNode node = atom.SelectSingleNode("/feed"); 
```

无论我做什么，它似乎都无法选择任何东西。显然我错过了一些东西，我只是不知道是什么。为了使 XPath 在这个 Atom 提要上工作，我需要做什么？

# 编辑

> 虽然这个问题有答案，但我发现这个问题几乎完全相同：[SelectNodes not working on stackoverflow feed](https://stackoverflow.com/questions/24734/selectnodes-not-working-on-stackoverflow-feed)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-01T17:21:27.170

虽然 C# 实现可能允许默认命名空间（我不知道），但 XPath 1.0 规范不允许。所以，给“Atom”它自己的前缀：

```
nsMngr.AddNamespace("atom", "http://www.w3.org/2005/Atom"); 
```

并适当地更改您的 XPath：

```
XmlNode node = atom.SelectSingleNode("//atom:entry/atom:link/app:edited", nsMngr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-03-22T12:30:04.500

从字符串加载 XML 并查找任何“错误/错误”节点。

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(xmlResult);            
XmlNamespaceManager nm = new XmlNamespaceManager(xmlDoc.NameTable);
nm.AddNamespace("ns", "http://somedomain.com/namespace1/2"); //ns - any name, make sure it is same in the below line

XmlNodeList errors = xmlDoc.SelectNodes("/ns:*//ns:Errors/ns:Error", nm); 
```

-马图兰

# python - “扫描单引号字符串时 EOL”？（字符串中的反斜杠）

> ID：501187
> 
> 赞同：6
> 
> 时间：2009-02-01T17:20:02.120
> 
> 标签：python, syntax-error

```
import os
xp1 = "\Documents and Settings\"
xp2 = os.getenv("USERNAME")
print xp1+xp2 
```

给我错误

```
 File "1.py", line 2 
xp1 = "\Documents and Settings\"
                               ^
SyntaxError: EOL while scannning single-quoted string 
```

你能帮我吗，你看到问题了吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-01T17:25:09.003

反斜杠字符被解释为转义。对 Windows 路径使用双反斜杠：

```
>>> xp1 = "\\Documents and Settings\\"
>>> xp1
'\\Documents and Settings\\'
>>> print xp1
\Documents and Settings\
>>> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-01T17:26:31.420

除了黑斜线问题之外，不要使用“+”运算符连接路径——`os.path.join`改用。

此外，像这样在新版本的 Windows 上构建用户主目录的路径可能会失败。在 pywin32 中有 API 函数。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-01T17:39:28.693

您可以使用该`os.path.expanduser`函数获取用户主目录的路径。它甚至不必是现有用户。

```
>>> import os.path
>>> os.path.expanduser('~foo')
'C:\\Documents and Settings\\foo'
>>> print os.path.expanduser('~foo')
C:\Documents and Settings\foo
>>> print os.path.expanduser('~')
C:\Documents and Settings\MizardX 
```

" `~user`" 扩展为*用户*主目录的路径。只有一个“ `~`”被扩展到当前用户的主目录。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-01T17:53:46.700

与许多其他语言一样，Python 使用反斜杠作为转义字符（xp1=... 行末尾的双引号因此被视为字符串的一部分，而不是字符串的分隔符）。

这实际上是非常基本的东西，所以我强烈建议你在继续之前阅读[python 教程。](http://docs.python.org/tutorial/introduction.html#strings)

您可能对*不*转义反斜杠的*原始*字符串感兴趣。只需在字符串之前添加*r ：*

 **```
xp1 = r"\Documents and Settings\" 
```

此外，在操作文件路径时，您应该使用*os.path*模块，该模块将根据运行程序的操作系统使用“/”或“\”。例如：

```
import os.path
xp1 = os.path.join("data","cities","geo.txt") 
```

将在 Linux 上生成“data/cities/geo.txt”，在 Windows 上生成“data\cities\geo.txt”。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-12-09T07:09:22.200

`\"`被解释为“在字符串中插入双引号，因此您缺少字符串文字的终止引号。请注意，原始字符串`r"\"`也无济于事。

引用[文档](http://docs.python.org/reference/lexical_analysis.html#string-literals)（粗体是我的）：

> 当存在 'r' 或 'R' 前缀时，反斜杠后面的字符将不加更改地包含在字符串中，并且所有反斜杠都保留在字符串中。例如，字符串文字 r"\n" 由两个字符组成：一个反斜杠和一个小写的 'n'。字符串引号可以用反斜杠转义，但反斜杠保留在字符串中；例如，r"\"" 是由两个字符组成的有效字符串文字：反斜杠和双引号；r"\" 不是有效的字符串文字（**即使原始字符串也不能以奇数个反斜杠结尾**）。具体来说，原始字符串不能以单个反斜杠结尾（因为反斜杠会转义后面的引号字符）。另请注意，后跟换行符的单个反斜杠被解释为这两个字符作为字符串的一部分，而不是作为续行符。

@MizardX 给出的答案是正确的方法来编码你正在做的事情，无论如何。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-24T11:15:58.690

我有同样的错误，我通过阅读@Mark Tolonen 的评论解决了它

这是一个错误的路径字符串：

```
xp1 = "\Documents and Settings\" 
```

这是一个正确的路径字符串，没有最后一个反斜杠：

```
xp1 = "\Documents and Settings" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-06T10:40:26.393

在 Windows 中

```
for file in glob.glob('C:\Users\7000020370\3D Objects\audio\data\*\*'):
    print(file.split("\\")[0]) 
```

这会抛出错误，但下面的不会

```
for file in glob.glob(r'C:\Users\7000020370\3D Objects\audio\data\*\*'):
    print(file.split("\\")[0]) 
```

# c# - 字符串在数组中吗？

> ID：501194
> 
> 赞同：113
> 
> 时间：2009-02-01T17:24:03.187
> 
> 标签：c#, arrays, string

`string[]`查看 a以查看它是否包含元素的最佳方法是什么。这是我第一次尝试它。但也许我忽略了一些东西。数组大小将不超过 200 个元素。

```
bool isStringInArray(string[] strArray, string key)
{
    for (int i = 0; i <= strArray.Length - 1; i++)
        if (strArray[i] == key)
            return true;
    return false;
} 
```

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2009-02-01T17:27:00.903

只需使用已经内置的 Contains() 方法：

```
using System.Linq;

//...

string[] array = { "foo", "bar" };
if (array.Contains("foo")) {
    //...
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2011-11-19T05:32:12.677

我知道这是旧的，但我希望新读者知道有一种新方法可以使用泛型和扩展方法来做到这一点。

您可以阅读我的[博客文章](http://www.thecodepage.com/post.aspx?id=28197601-0cae-48a2-aadf-992e073f8690)以了解有关如何执行此操作的更多信息，但主要思想是：

通过将此扩展方法添加到您的代码中：

```
public static bool IsIn<T>(this T source, params T[] values)
{
    return values.Contains(source);
} 
```

您可以像这样执行搜索：

```
string myStr = "str3"; 
bool found = myStr.IsIn("str1", "str2", "str3", "str4"); 
```

它适用于任何类型（只要您创建了一个好的 equals 方法）。肯定是任何值类型。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-02-01T17:28:44.583

您只是在使用 Array.Exists 函数（如果您使用的是 .NET 3.5，则使用 Contains 扩展方法，这更方便一些）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-02-01T17:32:57.803

Linq（用于 s&g 的）：

```
var test = "This is the string I'm looking for";
var found = strArray.Any(x=>x == test); 
```

或者，根据要求

```
var found = strArray.Any(
    x=>x.Equals(test, StringComparison.OrdinalIgnoreCase)); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-02-01T17:28:11.587

数组是否排序？如果是这样，您可以进行[二分搜索](http://en.wikipedia.org/wiki/Binary_search)。这里也是[.NET 实现。](http://msdn.microsoft.com/en-us/library/system.array.binarysearch.aspx) 如果数组已排序，则二进制搜索将提高任何迭代解决方案的性能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-01T19:24:23.723

如果您想询问特定对象是否在集合中，数组通常是一种糟糕的数据结构。

如果您将经常运行此搜索，那么使用 a`Dictionary<string, something>`而不是数组可能是值得的。字典中的查找是 O(1)（恒定时间），而在数组中搜索是 O(N)（所花费的时间与数组的长度成正比）。

即使数组最多只有 200 个项目，如果您进行大量此类搜索，字典可能会更快。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2011-03-14T15:45:34.540

正如上面线程中多次提到的，它取决于使用的框架。.Net Framework 3 及更高版本具有用于数组的 .Contains() 或 Exists() 方法。对于下面的其他框架，可以执行以下技巧，而不是遍历数组...

```
((IList<string>)"Your String Array Here").Contains("Your Search String Here") 
```

不太确定效率……戴夫

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-01T17:27:37.923

您还可以使用 LINQ 遍历数组。或者您可以使用 Find 方法，该方法需要委托来搜索它。但是我认为 find 方法比循环遍历要贵一些。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-01T17:41:13.027

这比手动遍历数组要快：

```
static bool isStringInArray(string[] strArray, string key)
    {

        if (strArray.Contains(key))
            return true;
        return false;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-08T20:31:05.323

如果您不想或根本不能使用 Linq，您也可以使用静态`Array.Exists(...);`函数：

[https://msdn.microsoft.com/en-us/library/yw84x8be%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/yw84x8be%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)

```
var arr = new string[]{"bird","foo","cat","dog"};

var catInside = Array.Exists( 
  arr, // your Array
  (s)=>{ return s == "cat"; } // the Predicate
); 
```

当谓词确实返回 true 时，catInside 也将为 true。

# cocoa - 在石英 2d 中禁用颜色校正

> ID：501199
> 
> 赞同：1
> 
> 时间：2009-02-01T17:25:43.700
> 
> 标签：cocoa, macos, quartz-graphics, color-management

好的，我知道实际上不可能在石英中禁用颜色校正。我正在寻找的是一种与设备无关的色彩空间设置，它不会改变我在 CGLayer 中绘制的 RGB 值。

我尝试了系统库中的所有 ICC 配置文件，它们都改变了颜色。

这是我得到的最好结果：

```
const CGFloat whitePoint[] = {0.95047, 1.0, 1.08883};
const CGFloat blackPoint[] = {0, 0, 0};
const CGFloat gamma[] = {1, 1, 1};
const CGFloat matrix[] = {0.449695, 0.244634, 0.0251829, 0.316251, 0.672034, 0.141184, 0.18452, 0.0833318, 0.922602 };
CGColorSpaceRef colorSpace = CGColorSpaceCreateCalibratedRGB(whitePoint, blackPoint, gamma, matrix); 
```

这使用了 Apple RGB 的颜色转换矩阵和 D65 白点。

颜色仍然会发生一些变化，尽管我对此比设备相关设置更满意。

以下是我将 CGLayer 写入 TIFF 的方法：

```
CIImage *image = [CIImage imageWithCGLayer:cgLayer];
NSBitmapImageRep *bitmapImage = [[NSBitmapImageRep alloc] initWithCIImage:image];
[[bitmapImage TIFFRepresentation] writeToFile:fileName atomically:YES]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-06T10:21:24.067

为什么不将您的颜色声明为与您的目的地相同的颜色空间的一部分`CGLayer`？

doco for`CGColorSpaceCreateDeviceRGB`似乎只是在说：

[CGColorSpaceCreateDeviceRGB](http://developer.apple.com/documentation/GraphicsImaging/Reference/CGColorSpace/Reference/reference.html#//apple_ref/doc/uid/TP30000949-CH1g-F16994)

# linux - 当我启动 apache 并继续杀死我的机器时，如何防止产生大量的 apache 进程？

> ID：501205
> 
> 赞同：59
> 
> 时间：2009-02-01T17:27:26.240
> 
> 标签：linux, apache, apache2, debian, apache-config

我在一台 debian 机器上有一个流量很大的应用程序，而 apache 开始表现得很奇怪。

每次我启动 apache 时，都会产生大量 apache 进程，应用程序根本无法加载，而且很快整个机器就会死机，必须重新启动才能重新启动。

这是我在启动 apache 后立即得到的结果：

```
top - 20:14:44 up 1:16, 2 个用户，平均负载：0.48, 0.10, 0.03
任务：共 330 个，运行 5 个，睡眠 325 个，停止 0 个，僵尸 0 个
CPU：12.0%us、21.4%sy、0.0%ni、65.7%id、0.2%wa、0.1%hi、0.7%si、0.0%st
内存：总计 8179920k，已使用 404984k，空闲 7774936k，60716k 缓冲区
交换：总计 2097136k，使用 0k，免费 2097136k，缓存 43424k

10251 www-数据 15 0 467m 8100 4016 S 6 0.1 0:00.04 apache2
10262 www 数据 15 0 467m 8092 4012 S 6 0.1 0:00.05 apache2
10360 www-数据 15 0 468m 8296 4016 S 6 0.1 0:00.05 apache2
10428 www-数据 15 0 468m 8272 3992 S 6 0.1 0:00.05 apache2
10241 www-数据 15 0 467m 8256 4012 S 4 0.1 0:00.03 apache2
10259 www-数据 15 0 467m 8092 4012 S 4 0.1 0:00.04 apache2
10274 www-数据 15 0 467m 8056 4012 S 4 0.1 0:00.03 apache2
10291 www-数据 15 0 468m 8292 4012 S 4 0.1 0:00.03 apache2
10293 www-数据 15 0 468m 8292 4012 S 4 0.1 0:00.03 apache2
10308 www-数据 15 0 468m 8296 4016 S 4 0.1 0:00.02 apache2
10317 www-数据 15 0 468m 8292 4012 S 4 0.1 0:00.02 apache2
10320 www-数据 15 0 468m 8292 4012 S 4 0.1 0:00.04 apache2
10325 www-数据 15 0 468m 8292 4012 S 4 0.1 0:00.04 apache2

```

等等.. 有更多的 apache2 进程。

不到一分钟后，您可以在下方看到负载从 0.48 变为 2.17。如果此时我不停止 apache，负载会在几分钟或更短的时间内继续上升，直到机器死机。

```
顶部 - 20:15:34 上升 1:17，2 个用户，平均负载：2.17、0.62、0.21
任务：共 1850 个，运行 5 个，睡眠 1845 个，停止 0 个，僵尸 0 个
中央处理器：0.3%us、2.1%sy、0.0%ni、96.4%id、0.0%wa、0.1%hi、1.0%si、0.0%st
内存：总共 8179920k，已使用 1938524k，空闲 6241396k，60860k 缓冲区
交换：总共 2097136k，使用 0k，免费 2097136k，缓存 44196k

```

我们有一个防火墙，我们将已知允许访问我们网站的地址列入白名单。

任何关于问题可能是什么的想法都非常受欢迎。

谢谢！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-02-01T19:23:17.003

您可能犯了将 Apache 配置为使用远远超过您所有内存的错误。这是一个容易犯的错误。

我假设您使用的是 Prefork Apache 和进程内应用程序服务器（例如 PHP 或 mod_perl）。在此模型中，您最终将使用最大 (MaxClients * 每个进程的应用程序的最大内存使用量) 内存。如果你没有那么多，是时候减少一个，另一个或两者。

在一般情况下，这意味着将 MaxClients 减少到您的服务器有足够的内存来应对的程度。

如果您使用 Prefork 模型（大多数应用程序服务器不支持或不鼓励使用螺纹模型）。

但是，减少 MaxClients 最终会导致应用程序变得不可用，特别是如果您启用了 keepalives 并且 keepalive 超时时间过长。仅保持连接处于活动状态的进程（服务器状态中的状态 K）仍然使用大量 RAM，这可能是一个问题 - 尝试最小化保持连接超时，或完全关闭它。

您需要密切关注服务器状态（由 mod_status 提供）。

当然，只有在您了解后果的情况下，您才应该进行任何这些更改。三思而后行，更改配置一次。如果您有能力在类似规格的非生产机器上使用模拟负载测试更改，请这样做。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-29T17:43:40.767

使用 ps -aux | grep apache 找出运行 apache 的进程数。寻找“RSS”列，它给出了每个进程使用的内存的估计值。或者，您可以使用“top”，在其中 shift + f 然后选择 %MEM 列以按内存使用情况对进程进行排序。

进程数由 apache.conf 文件中的“MaxClients”指令决定。你得到这个数字的方式是[这个页面](http://www.virtacoresupport.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=102)所描述的；

1.  以 root 身份通过 SSH 连接到您的服务器。
2.  跑上去。
3.  按 shift + m。
4.  请注意 httpd 使用的最高 RES 内存。
5.  按 Q 退出顶部。
6.  执行：service httpd stop（在 debian 中，`sudo service apache2 stop`）
7.  一旦 httpd 停止，执行：free -m
8.  请注意“已使用”下列出的内存。
9.  为您的 VPS 计划找到保证的内存。如果找不到，支持人员可以告诉您保证了多少。
10.  从您的计划保证的内存中减去使用的内存。这将为您提供基本的免费内存池。
11.  将您的 FREE MEMORY POOL 的值乘以 0.8 以找到您的平均 AVAILABLE APACHE POOL（这将允许您为突发周期保留 20% 的内存）。
12.  将 AVAILABLE APACHE POOL 除以 httpd 使用的最高 RES 内存。这将为您提供应该为您的系统设置的 MaxClients 值。（如果它有小数部分，则将其四舍五入到小于该值的最接近的整数。）

“MaxClients”的正确值将确保为您的 apache 服务器分配正确的内存。我就是这样解决的。

在 Debian 中，apache conf 文件位于`/etc/apache2/apache2.conf`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-02-01T18:01:37.683

您最近是否更改了配置文件？如果是，我相信您保留旧版本进行差异化？

如果没有，请搜索“StartServers”、“MaxSpareServers”和“MinSpareServers”指令。通常，您希望将它们保留为默认值，但它们可能被故意设置为高（坏主意）或由于错误的配置编辑而意外设置为这种方式。

如果这没有帮助，是时候在 Apache 之外寻找一些快速打开连接的进程（可能是有一个运行异常的测试进程）。

第一步是访问日志。第二步是运行 netstat，查看连接可能来自哪里。如果它在同一个系统上运行，您可以查看 /proc/*/fd 以找到连接的两端。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-24T16:53:57.987

这个问题很古老，但我觉得有必要在这里添加一个答案，因为所有现有答案都忽略了来自 OP 的一条关键信息：负载开始上升几分钟后，`top`报告仍然有充足的 CPU & 可用的内存资源。通常只剩下一个罪魁祸首，那就是 I/O。

检查是否有完整的分区`df -h`。如果没有，请查看您的应用程序是否使用`vmstat 1 10`or `iostat 1 10`（这些由 Debian/Ubuntu 上的 'sysstat' 软件包提供）来破坏磁盘。如果您仍然没有在此处看到问题，则可能存在设备级 I/O 错误或网络安装存储的网络故障。检查系统和守护程序日志文件。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-25T22:40:48.607

正如已经说过的（假设 Prefork Apache） - MaxClients = max processes at once。

如果您发现自己受到真实流量的影响（而不是配置错误的 StartServers/Min/MaxSpareServers），您还可以做一些其他事情：

1.  为您的静态内容设置一个单独的轻量级 apache 进程（或 lighttpd）。这样，所有小的、静态的东西都不会“污染”你的重量级应用程序进程。这可以在同一台服务器上，也可以在不同的服务器上。没关系。
2.  在你的 Apache 进程前面放置一个像 Squid 这样的反向代理。反向代理将快速从 Apache 中吸取内容并将其存储在内存中，然后将其打包回客户端。这样，使用 14.4kb 调制解调器的 AOL 用户就不会占用您宝贵的 Apache 插槽之一。作为奖励，可以将此类设置配置为缓存您的一些内容，以减少 Apache 进程的负载。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-06-11T19:03:30.400

您的“顶部”输出显示您有足够的可用内存，所以我认为 MaxClients 不是问题（除非 Apache 分配超过 2GB 的内存有问题？）如果是，您的错误日志应该显示错误在创造更多孩子时遇到问题。

最有可能的是，您的 Apache 进程确实在使用大量资源。如果您正在运行 PHP 应用程序，请尝试安装 eAccelerator，它可以很好地优化和缓存 PHP 代码。其他事情可能包括繁重的 MySQL 查询、缓慢的 DNS 解析器等。除此之外，它还可以更多地了解哪些程序受到攻击以及它们在做什么。

# jquery - 下拉菜单需要显示所有内容，但它位于某个 div 下方

> ID：501227
> 
> 赞同：3
> 
> 时间：2009-02-01T17:40:15.713
> 
> 标签：jquery, html, css, internet-explorer-6, internet-explorer-7

我有一个下拉菜单，它适用于除 IE6 和 IE7 之外的所有内容。

*   [这是在 Safari/Firefox 浏览器中](http://img140.imageshack.us/img140/1171/picture2ow4.png)
*   [这是它在 IE6 和 IE7 中的外观](http://img175.imageshack.us/img175/3897/picture1gc5.png)

这是隐藏在 IE 6/7 下的 div 的 CSS

```
#featured-programs-left img,
#featured-programs-right img{
    overflow:auto;
    border:0;
}

#featured-programs-left,
#featured-programs-right {
    height:625px;
    float:left;
    overflow:auto;
    clear:left;
    clear:right;
    width:100%;
}

#featured-programs-left div,
#featured-programs-right div {
    overflow:auto;
    clear:left;
    clear:right;
    width:352px;
    height:345px;
}

#featured-programs-left {
    float:left;
}

#featured-programs-right {
    float:right;
} 
```

这是用于显示多个项目（淡入淡出进出项目）在 div 的两侧（#featured-programs-left & #featured-programs-right）

```
<script type="text/javascript">
$(document).ready(function() {
    $('#featured-programs-left').cycle({ 
        fx:     'fade', 
        speed:  'slow',
        timeout: 15000,
        next:   '#next2',
        prev:   '#prev2' 
    });
});

$(document).ready(function() {
    $('#featured-programs-right').cycle({ 
        fx:     'fade', 
        speed:  'slow',
        timeout: 21000,
        next:   '#next3',
        prev:   '#prev3' 
    });
});
</script> 
```

这是快速链接的 CSS（快速链接是链接的下拉菜单）

```
#header-nav-top li#quicklinks a:link,
#header-nav-top li#quicklinks a:visited,
#header-nav-top li#quicklinks a:active {
    padding-left: .9em;
    background: transparent url('/site/images/quicklinks_bullet.gif') no-repeat 0em .5em;
}

#header-nav-top li#quicklinks.hover {
    position: relative;
}

#header-nav-top li#quicklinks ul {
    position: absolute;
    display: none;
    xleft: -9999em;
    top: 14px;
    width: 142px;
    padding:5px 2px 5px 5px;
    z-index: 90;
    margin: 0px;
    background-color: #00693E;
    xborder: 1px solid #FDBE2F;
    xborder-width: 0px 1px 1px;
}

#header-nav-top li#quicklinks:hover ul,
#header-nav-top li#quicklinks.hover ul {
    left: 0px;
    display: block;
}

#header-nav-top li#quicklinks ul li {
    background: transparent none;
    float: none;
    margin: 0px 0px 0px;
    line-height: 1.4em;
    display: block;
    border:1px solid #00693E;
}

#header-nav-top li#quicklinks ul li a:link,
#header-nav-top li#quicklinks ul li a:visited,
#header-nav-top li#quicklinks ul li a:active {
    color: #fff;
    display: block;
    text-decoration: none;
    background: transparent none;
}

#header-nav-top li#quicklinks ul li a:hover {
    color: #C26B1A;
    background: transparent url('/site/images/bullet_link.gif') no-repeat 0% 6px;
} 
```

您认为什么可能导致它在 IE 6/7 中的特色程序左侧和特色程序右侧中的项目上不显示下拉菜单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T17:44:02.693

您是否尝试过将当前遮挡菜单的图片的[z-index设置为 0？](http://www.w3schools.com/Css/pr_pos_z-index.asp)您有我们可以查看的“实时”测试 URL 吗？或者，基于 IE 不正确地处理 z-index，您是否有余地将下拉菜单的 HTML 放置在页面中的其他元素之后，从而绕过 z-index？

**编辑：**啊，显然有一个错误。如果没有实际帮助，此[链接](http://www.webmaster-talk.com/css-forum/47892-z-index-ignored-by-ie.html)可能会解释...

引用 MrTazz 的话：

> 当运行一些特殊的 JavaScript 时，它神奇地将 div 置于后台。更新 div 并返回更远。

所以也许尝试以某种方式更新下拉菜单 div，就在页面显示之前？

**编辑：** 从布拉德的评论，复制到这里以启发未来的读者：“这帮助了我：[http](http://webdemar.com/webdesign/superfish-jquery-menu-ie-z-index-bug/) : //webdemar.com/webdesign/superfish-jquery-menu-ie-z-index-bug/ 我将#header设置为z-index 为 2，#content 的 z-index 为 1。” – 布拉德（5 小时前）

所以，总结一下：IE 6/7 中有一个 z-index 错误。要解决这个问题，请将出现在菜单前面的元素的 z-index 显式设置为较低的数字（例如 1），并将菜单容器的 z-index 设置为稍高一些数字（例如 2）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-02T15:52:24.463

我将#content z-index 设置为 1

并设置标题的z-index，即下拉导航所在的位置为2。

# objective-c - 我可以使用 NSURLCredentialStorage 进行 HTTP 基本身份验证吗？

> ID：501231
> 
> 赞同：19
> 
> 时间：2009-02-01T17:42:57.877
> 
> 标签：objective-c, cocoa, http, authentication, https

我设置了一个可可类，我想用它来连接我正在构建的 RESTful Web 服务。我决定像这样在我的 PHP 后端使用 HTTP 基本身份验证……</p>

```
<?php
if (!isset($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="My Realm"');
    header('HTTP/1.0 401 Unauthorized');
    //Stuff that users will see if they click 'Cancel'
    exit;
}
else {
    //Validation Code
    echo "You entered info.";
}
?> 
```

此时我使用的是同步 NSURLConnection，据我了解 Apple 文档状态对身份验证的支持较少。

但这有可能吗？我可以很容易地进行 cookie 身份验证，无需 NSURLProtectionSpaces 或 NSURLCredentials 或任何身份验证类。此外，是否有任何资源可以让我阅读更多关于 Cocoa 身份验证类的信息？

谢谢。

更新：mikeabdullahuk 你提供的代码（第二个例子）几乎和我写的一样。我做了更多调查，发现 NSURLConnection 正在返回一个错误……</p>

```
Error Domain=NSURLErrorDomain Code=-1012 UserInfo=0x1a5170 "Operation could not be completed. (NSURLErrorDomain error -1012.)" 
```

该代码对应于 NSURLErrorUserCancelledAuthentication。所以显然我的代码没有访问 NSURLCredentialStorage 而是取消了身份验证。这可能与 PHP HTTP 身份验证功能有关吗？在这一点上我很困惑。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2009-02-02T00:01:26.100

同步`NSURLConnection`绝对可以与`NSURLCredentialStorage`. 以下是通常的工作方式：

1.  `NSURLConnection`从服务器请求页面
2.  服务器回复 401 响应
3.  `NSURLConnection`看看它可以从 URL 中收集哪些凭据
4.  如果 URL 没有提供完整的**凭据**（用户名和密码），`NSURLConnection`也会咨询`NSURLCredentialStorage`以填补空白
5.  如果*仍未*确定完整凭据，`NSURLConnection`将发送`-connection:didReceiveAuthenticationChallenge:`委托方法请求凭据
6.  如果`NSURLConnection`now 最终拥有完整的凭据，它会重试包含授权数据的原始请求。

通过使用同步连接方法，您**只会**失去第 5 步，即提供自定义身份验证的能力。因此，您可以在 URL 中预先提供身份验证凭据，也可以`NSURLCredentialStorage`在发送请求之前将其放入。例如

```
NSURLRequest *request =
  [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://user:pass@example.com"]];

[NSURLConnection sendSynchronousRequest:request returningResponse:NULL error:NULL]; 
```

或者：

```
NSURLCredential *credential = [NSURLCredential credentialWithUser:@"user"
                                                         password:@"pass"
                                                      persistence:NSURLCredentialPersistenceForSession];

NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
  initWithHost:@"example.com"
  port:0
  protocol:@"http"
  realm:nil
  authenticationMethod:nil];

[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential
                                                    forProtectionSpace:protectionSpace];
[protectionSpace release];

NSURLRequest *request =
  [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://example.com"]];

[NSURLConnection sendSynchronousRequest:request returningResponse:NULL error:NULL]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-03T23:34:17.103

在 401 或其他身份验证挑战不可接受/不可能的情况下，我有时使用虚拟 CFHTTPMessage 生成身份验证行，然后将其复制回 NSURLRequest：

```
// assume NSString *username and *password exist and NSURLRequest *urlRequest
// exists and is fully configured except for HTTP Basic Authentication.. 

CFHTTPMessageRef dummyRequest =
    CFHTTPMessageCreateRequest(
        kCFAllocatorDefault,
        CFSTR("GET"),
        (CFURLRef)[urlRequest URL],
        kCFHTTPVersion1_1);
CFHTTPMessageAddAuthentication(
    dummyRequest,
    nil,
    (CFStringRef)username,
    (CFStringRef)password,
    kCFHTTPAuthenticationSchemeBasic,
    FALSE);
authorizationString =
    (NSString *)CFHTTPMessageCopyHeaderFieldValue(
        dummyRequest,
        CFSTR("Authorization"));
CFRelease(dummyRequest);

[urlRequest setValue:authorizationString forHTTPHeaderField:@"Authorization"]; 
```

这可能看起来完全是一种奇怪的方法，但它可以容忍用户名/密码不是 URL 干净的情况以及 NSURLRequest 拒绝咨询 NSURLCredentialStorage 因为服务器实际上没有发送 HTTP 401（例如它发送而是一个常规页面）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-02T17:54:18.680

我会注意到 mikeabdullahuk 的回答很好，但如果您使用 NSURLCredentialPersistencePermanent 而不是每个会话，它会将凭据存储在用户钥匙串中，因此下次您可以检查 NSURLCredentialStorage 以获取保护空间的默认凭据的非零值，如果您得到一个非零值，您可以只传递凭据。我现在正在为我正在编写的一个美味的.com 客户端使用这种方法，它在我的测试中运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T22:38:51.337

将您的凭据设置为保护空间的默认凭据：

```
// Permananent, session, whatever.
NSURLCredential *credential = [NSURLCredential credentialWithUser:username password:password persistence: NSURLCredentialPersistencePermanent];
// Make sure that if the server you are accessing presents a realm, you set it here.
NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc] initWithHost:@"blah.com" port:0 protocol:@"http" realm:nil authenticationMethod:NSURLAuthenticationMethodHTTPBasic];
// Store it
[[NSURLCredentialStorage sharedCredentialStorage] setDefaultCredential:credential forProtectionSpace:protectionSpace]; 
```

此时，使用与您设置的保护空间相匹配的任何后续 NSURLConnection 将使用此凭据

# ruby - 制作 n 叉树的“Ruby”方式

> ID：501232
> 
> 赞同：3
> 
> 时间：2009-02-01T17:43:04.647
> 
> 标签：ruby, tree, n-ary-tree

我正在编写一个 Ruby 脚本，并且想使用一个 n 元树数据结构。

是否有一个很好的实现可以作为源代码使用？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-01T21:24:28.600

为了扩展 Otto 的答案，让 Hash 自动激活数组的一种简单方法是使用默认值块 with `Hash::new`，如下所示：

```
node_children = Hash.new { |_node_children, node_key| _node_children[node_key] = [] } 
```

但实际上，代码取决于您要对数组执行的操作。您可以使用哈希和数组设置它们，或者创建一些类：

```
class Node
    attr_accessor :value, :children
    def initialize(value, children=[])
        @value = value
        @children = children
    end
    def to_s(indent=0)
        value_s = @value.to_s
        sub_indent = indent + value_s.length
        value_s + @children.map { |child| " - " + child.to_s(sub_indent + 3) }.join("\n" + ' ' * sub_indent)
    end
end

ROOT = Node.new('root', %w{ farleft left center right farright }.map { |str| Node.new(str) } )
puts "Original Tree"
puts ROOT
puts

ROOT.children.each do |node| 
    node.children = %w{ one two three four }.map { |str| Node.new(node.value + ':' + str) }
end
puts "New Tree"
puts ROOT
puts 
```

例如，此代码给出：

```
Original Tree
root - farleft
     - left
     - center
     - right
     - farright

New Tree
root - farleft - farleft:one
               - farleft:two
               - farleft:three
               - farleft:four
     - left - left:one
            - left:two
            - left:three
            - left:four
     - center - center:one
              - center:two
              - center:three
              - center:four
     - right - right:one
             - right:two
             - right:three
             - right:four
     - farright - farright:one
                - farright:two
                - farright:three
                - farright:four 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-01T19:26:15.577

一个属性都是数组的Hash？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-03-23T13:53:46.200

RubyTree gem 对我来说非常[有用。](http://rubytree.rubyforge.org/)

# ms-access - 访问报告上的 2007 选项组

> ID：501245
> 
> 赞同：0
> 
> 时间：2009-02-01T17:49:05.617
> 
> 标签：ms-access, report

我是 Access 的新手，因此请在形成您的回复时考虑这一点。这让我发疯了，我在网上到处寻找解决方案。我期待着您的回复。

我有一个带有选项组的表格。我希望在我的报告中显示此内容。以这个“测试”场景为例：

选项 a、b、c

我在表中创建了一个字段来接受表单中的数据。在我的表格中，我在保存记录时看到 1、2、3。够好了。现在，在我的报告中，我有代表选项 a、b 和 c 的复选框。我希望在与表格上选择的选项相对应的框中有一个复选标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-02T02:59:35.053

没有技术限制阻止您使用选项组和复选框在报告上显示输出。

在报表的设计视图中，从控件工具箱中添加一个选项组控件。

将 3 个复选框控件添加到选项组控件。当您选择复选框控件并将指针悬停在选项组上时，它会改变颜色以指示复选框在放置时将成为组的一部分。

我在报告的选项组中添加了三个复选框，它们的默认值分别为 1、2 和 3，因此对于您要执行的操作应该很容易。

在选中选项组的属性表中，确保将控件源属性设置为基础数据源中具有 1、2、3 值的列。

您可能希望设置边框样式以隐藏复选框周围的框，并删除为选项组自动生成的标签控件。我不确定你想要什么样的外观，但我相信你可以处理格式细节。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-02-01T21:43:15.443

选项组是用户界面对象，UI 对象不属于报表。

您的数据字段存储数字，但这些数字中的每一个都有含义。在报告中，您希望显示有意义的数据。这意味着您需要一个将 1、2 和 3 映射到某物的数据表，然后将该表连接到您存储选项组值的字段。

另一种方法是使用 Switch()，但这意味着您必须在任何时候添加另一个选项时编辑报告。数据表使这变得容易得多，因为您只需添加一条新记录即可添加新值。

# ruby - 使用 delta 迭代 Ruby Time 对象

> ID：501253
> 
> 赞同：32
> 
> 时间：2009-02-01T17:53:54.967
> 
> 标签：ruby

有没有办法在 Ruby 中迭代时间范围并设置增量？

这是我想做的一个想法：

```
for hour in (start_time..end_time, hour)
    hour #=> Time object set to hour
end 
```

您可以迭代 Time 对象，但它会在两者之间每秒返回一次。我真正需要的是一种设置偏移量或增量（如分钟、小时等）的方法

这是 Ruby 内置的，还是有一个不错的插件可用？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2009-02-01T18:13:09.330

在 1.9 之前，您可以使用`Range#step`：

```
(start_time..end_time).step(3600) do |hour|
  # ...
end 
```

但是，这种策略非常慢，因为它会调用`Time#succ`3600 次。[相反，正如 dolzenko 在他的回答](https://stackoverflow.com/a/1340731/525478)中指出的那样，更有效的解决方案是使用一个简单的循环：

```
hour = start_time
while hour < end_time
  # ...
  hour += 3600
end 
```

如果您使用的是 Rails，则可以将 3600 替换为`1.hour`，这明显更具可读性。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-08-27T12:25:14.190

如果您的`start_time`和`end_time`实际上是`Time`类的实例，那么使用 的解决方案`Range#step`将非常低效，因为它会在此范围内每秒迭代`Time#succ`. 如果您将时间转换为整数，将使用简单的加法，但这样您最终会得到如下结果：

```
(start_time.to_i..end_time.to_i).step(3600) do |hour|
  hour = Time.at(hour)     
  # ...
end 
```

但这也可以通过更简单、更高效（即没有所有类型转换）循环来完成：

```
hour = start_time
begin
  # ...      
end while (hour += 3600) < end_time 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-12-30T02:22:57.980

Range#step 方法在这种情况下非常慢。使用 begin..end while，正如 dolzenko 在此处发布的那样。

您可以定义一个新方法：

```
 def time_iterate(start_time, end_time, step, &block)
    begin
      yield(start_time)
    end while (start_time += step) <= end_time
  end 
```

然后，

```
start_time = Time.parse("2010/1/1")
end_time = Time.parse("2010/1/31")
time_iterate(start_time, end_time, 1.hour) do |t|
  puts t
end 
```

如果在铁轨中。

# c# - 创建类似 iSeries 的程序

> ID：501274
> 
> 赞同：2
> 
> 时间：2009-02-01T18:07:25.410
> 
> 标签：c#, ibm-midrange

我的主要语言是 vb/c#.net，我想制作一个控制台程序，但有一个菜单系统。

如果你们中的任何人使用过诸如 IBM 的程序或 iSeries 之类的“dos”，那么这就是我想要的风格。

![替代文字](https://media.techtarget.com/digitalguide/images/Misc/qe_iseries.gif)所以，想知道是否有人知道可以让我的表单看起来像这样的“winforms”库。我不介意“假的 winforms 外观”或控制台应用程序，但这就是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-01T20:03:38.733

我已经广泛使用了 iSeries，而且我清楚地记得你在说什么。为了在 C# 应用程序中模拟这种外观和感觉，您需要创建一个控制台项目并借助`Console.CursorTop`和 `Console.CursorLeft`属性将文本写入屏幕的不同区域，然后调用`Console.Write`或`Console.WriteLine`在先前设置的位置写出文本. 要更改颜色，在调用之前`WriteLine`您需要使用`Console.ForegroundColor`和`Console.BackgroundColor`属性。

您需要侦听输入，并在找到制表符后，您的程序可以使用自己的内部逻辑来确定光标接下来应该出现的位置（例如，在同一列的下一行，以模拟屏幕截图中的输入字段）。

使用 Windows 窗体应用程序执行此操作会有点棘手，您肯定希望为它编写自己的控件（可能从已经可用的多种标准多行文本控件中的一种子类化）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T21:07:02.457

这是个好问题。对于许多用例来说，标准的 Windows（或其他窗口）范例可能是矫枉过正、令人生畏和令人困惑的。

回到 DOS 时代，有许多“窗口化”库为此创建了各种抽象。

[谷歌搜索后]

[这是一个](http://www.thefreecountry.com/sourcecode/gui.shtml)列出各种库的站点，其中包括一些似乎感兴趣的库。

像这样的资源对于移动应用程序也很方便，鼠标驱动的窗口应用程序往往不是最适合的，尤其是对于工作流类型的流程。控制台是一种非常通用的最低公分母抽象，可在大多数环境中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-11T17:52:41.833

你正在寻找一个像图书馆但对于 windows 的诅咒。并且可以从 VB 和 C# 中使用。

Curses 提供了比 iSeries 更丰富的基于文本的 UI。各种小物件！
Windows 并不真正支持文本界面，无论是有意还是无意，所以运气不好。
但是......
好吧，[MonoCurses](http://www.mono-project.com/MonoCurses)怎么样？我不知道它是否会起作用。另请查看[PDCurses](http://pdcurses.sourceforge.net/)。如果您不介意仅将 Python 用于前端，请参阅[此](http://effbot.org/zone/console-index.htm)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-01T18:40:54.420

有几个用于 iSeries 的 webifiers 或屏幕抓取程序，它们将在您的 iSeries 应用程序之上创建一个 web 或 windows 用户界面。我从未使用过其中任何一种，因此我无法推荐特定的一种，但您可能希望从它们中寻找灵感或重用。

# java - 为什么 Java 不允许 Throwable 的泛型子类？

> ID：501277
> 
> 赞同：168
> 
> 时间：2009-02-01T18:07:51.943
> 
> 标签：java, generics, exception, language-design

根据[Java 语言规范](http://docs.oracle.com/javase/specs/)，第 3 版：

> [如果泛型类是`Throwable`.](http://docs.oracle.com/javase/specs/jls/se6/html/classes.html#303584)

我想了解为什么做出这个决定。通用异常有什么问题？

（据我所知，泛型只是编译时的语法糖，`Object`无论如何它们都会在`.class`文件中被翻译，所以有效地声明一个泛型类就好像它里面的所有东西都是一个`Object`. 如果我错了，请纠正我.)

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2009-02-01T18:22:42.257

正如马克所说，这些类型是不可具体化的，这在以下情况下是一个问题：

```
try {
   doSomeStuff();
} catch (SomeException<Integer> e) {
   // ignore that
} catch (SomeException<String> e) {
   crashAndBurn()
} 
```

两者`SomeException<Integer>`和`SomeException<String>`都被擦除为相同的类型，JVM 无法区分异常实例，因此无法判断`catch`应该执行哪个块。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-02-01T18:11:05.417

这是一个如何使用异常的简单示例：

```
class IntegerExceptionTest {
  public static void main(String[] args) {
    try {
      throw new IntegerException(42);
    } catch (IntegerException e) {
      assert e.getValue() == 42;
    }
  }
} 
```

TRy 语句的主体抛出具有给定值的异常，该值被 catch 子句捕获。

相反，以下新异常的定义是被禁止的，因为它创建了一个参数化类型：

```
class ParametricException<T> extends Exception {  // compile-time error
  private final T value;
  public ParametricException(T value) { this.value = value; }
  public T getValue() { return value; }
} 
```

尝试编译上述内容会报错：

```
% javac ParametricException.java
ParametricException.java:1: a generic class may not extend
java.lang.Throwable
class ParametricException<T> extends Exception {  // compile-time error
                                     ^
1 error 
```

这种限制是明智的，因为几乎任何捕获此类异常的尝试都必须失败，因为该类型是不可具体化的。人们可能期望异常的典型用法如下所示：

```
class ParametricExceptionTest {
  public static void main(String[] args) {
    try {
      throw new ParametricException<Integer>(42);
    } catch (ParametricException<Integer> e) {  // compile-time error
      assert e.getValue()==42;
    }
  }
} 
```

这是不允许的，因为 catch 子句中的类型是不可具体化的。在撰写本文时，Sun 编译器在这种情况下报告了一系列语法错误：

```
% javac ParametricExceptionTest.java
ParametricExceptionTest.java:5: <identifier> expected
    } catch (ParametricException<Integer> e) {
                                ^
ParametricExceptionTest.java:8: ')' expected
  }
  ^
ParametricExceptionTest.java:9: '}' expected
}
 ^
3 errors 
```

因为异常不能是参数的，所以语法受到限制，因此类型必须写为标识符，没有后面的参数。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-02-09T11:21:20.703

本质上是因为它的设计方式很糟糕。

这个问题阻止了干净的抽象设计，例如，

```
public interface Repository<ID, E extends Entity<ID>> {

    E getById(ID id) throws EntityNotFoundException<E, ID>;
} 
```

没有具体化泛型的 catch 子句将失败的事实不能作为借口。编译器可以简单地禁止扩展 Throwable 的具体泛型类型或禁止在 catch 子句中使用泛型。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-30T11:35:48.567

泛型在编译时检查类型正确性。*然后在称为类型擦除*的过程中删除通用类型信息。例如，`List<Integer>`将转换为非泛型类型`List`。

由于*类型擦除*，无法在运行时确定类型参数。

假设您可以`Throwable`像这样扩展：

```
public class GenericException<T> extends Throwable 
```

现在让我们考虑以下代码：

```
try {
    throw new GenericException<Integer>();
}
catch(GenericException<Integer> e) {
    System.err.println("Integer");
}
catch(GenericException<String> e) {
    System.err.println("String");
} 
```

由于*类型擦除*，运行时将不知道要执行哪个 catch 块。

因此，如果泛型类是 Throwable 的直接或间接子类，则会出现编译时错误。

**来源：** [类型擦除问题](https://en.wikipedia.org/wiki/Generics_in_Java#Problems_with_type_erasure)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-01T18:12:12.670

我希望这是因为无法保证参数化。考虑以下代码：

```
try
{
    doSomethingThatCanThrow();
}
catch (MyException<Foo> e)
{
    // handle it
} 
```

正如您所注意到的，参数化只是语法糖。但是，编译器会尝试确保参数化在编译范围内对对象的所有引用中保持一致。在发生异常的情况下，编译器无法保证 MyException 仅从它正在处理的范围内抛出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-18T06:51:11.830

与问题不太相关*，*但如果你真的想要一个`inner class`扩展 a`Throwable`你可以声明它`static`。这适用于在`Throwable`逻辑上与封闭类相关但与该封闭类的特定泛型类型无关的情况。通过声明它`static`，它不会绑定到封闭类的实例，因此问题就消失了。

以下（当然不是很好）示例说明了这一点：

```
/** A map for <String, V> pairs where the Vs must be strictly increasing */
public class IncreasingPairs<V extends Comparable<V>> {

    private final Map<String, V> map;

    public IncreasingPairs() {
        map = new HashMap<>();
    }

    public void insertPair(String newKey, V value) {
        // ensure new value is bigger than every value already in the map
        for (String oldKey : map.keySet())
            if (!(value.compareTo(map.get(oldKey)) > 0))
                throw new InvalidPairException(newKey, oldKey);

        map.put(newKey, value);
    }

    /** Thrown when an invalid Pair is inserted */
    public static class InvalidPairException extends RuntimeException {

        /** Constructs the Exception, independent of V! */
        public InvalidPairException(String newKey, String oldKey) {
            super(String.format("Value with key %s is not bigger than the value associated with existing key %s",
                    newKey, oldKey));
        }
    }
} 
```

进一步阅读：[docs.oracle.com](https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

# development-environment - 通过远程桌面开发

> ID：501279
> 
> 赞同：15
> 
> 时间：2009-02-01T18:08:05.453
> 
> 标签：development-environment, remote-desktop, remote-access, rdp

有没有人关于让团队通过远程桌面工作的成功言论？

在许多工作场所，我们通过 Citrix 将最终用户和应用程序放在一个中央、强大的服务器上。有时客户端与服务器位于同一建筑物中，但通常它们是远程的。

让我的开发人员使用在带有 Hyper-V 的服务器上运行的 Windows XP 或 Vista 实例对我来说可能有一些巨大的好处。

我担心通过互联网的 RDP/RDC 太慢，以至于无法有效地开发。

我敢肯定我能听到很多关于它的坏话……有没有成功的人？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-01T20:46:59.050

我见过一种情况，有人试图用卫星办公室来做这件事。它是为使用各种 java IDE 工具的 java 开发团队完成的。结果并不被认为是成功的，该公司将团队带回伦敦市中心的办事处，费用相当可观。

对于在交互式软件上日复一日地这样做的人来说，结果并不是很令人愉快。对于主要使用基于文本的工具（例如 vim 和 unix 命令行工具）的东西，它的效果要好一些。有一次，我让 XVNC 通过 128 Kbit DSL 链路（当时在新西兰流行的一种类型），并且可以很容易地在远程位置处理基于 Oracle 的数据仓库。与基于 Windows 的 IDE 相比，工具所需的交互性水平使它们对慢速链接的敏感度要低得多。

因此，我将使用一些限定条件调用“它取决于”参数：

*   对于现代 IDE，我不会推荐它，当然也不推荐用于像 Dreamweaver、BI Development Studio 或 Informatica 这样的图形化程度很高的东西。

*   对于像传统 unix 开发工具这样的文本环境，它可能会很好地工作。与直接操作的用户界面相比，这些用户界面对延迟的敏感度要低得多。

我有点相信“最佳工具”原则。竭尽全力为开发团队提供二流的用户界面会发出负面信号。这样做所节省的成本可能很少，并且***会***惹恼您的一些团队成员。即使它可以很好地工作，您仍然可以通过这样做来做出价值声明。权衡成本节约与更换一名或多名关键开发人员的成本。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-01T18:12:40.390

我们使用 RDP 连接到我们的开发环境，并且在本地性能非常好。它比 VPN 慢了一点，但仍然可以接受响应。

关闭所有 Windows 动画功能、桌面背景等，这将有很大帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-01T18:12:10.063

如果您不担心音频和快速移动图像的延迟，并且您没有开发任何依赖 3D 硬件的东西，那么您可能会没事的。

我从来没有在团队环境中使用过它，但我整天都在我的工作站中使用我的笔记本电脑 RDP 并喜欢它。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-02-01T18:13:54.367

我曾在一个环境中工作，我们偶尔会通过远程桌面编辑一些现有代码。对此没有重大挑战。作为一名开发人员，我非常讨厌做这项工作。一切都感觉很慢而且反应迟钝。但是，我们完成了工作。

值得庆幸的是，这些工作通常只需要 3-4 个小时……主要是对远程客户站点上现有系统的修复。我不认为我可以推荐它作为一种正常的工作方式，但它肯定是可能的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-01T18:14:28.390

我已经通过 DSL 连接使用了 VNC 和 RDP，通过 SSH 隧道运行，并且没有遇到任何实际问题。

肯定会有一些滞后，特别是如果您要重绘屏幕的大部分内容。但是大多数开发都涉及到小的编辑，这两个协议都处理得很好。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-01T21:01:16.650

我在工作中使用远程桌面来控制我的 Windows 机器。我在 Mac 上使用 Parallels VM，连接速度下降 2.5M，上升 256k。

这真的很好用。我已经这样做了 2 年，每周 1-3 天。速度慢不是问题——我不能打字那么快。

我有 3 个屏幕在工作，但仍然觉得 20 英寸的 Mac 屏幕更胜一筹。颜色更干净，而且我在 Mac 上的工作时间比我的工作屏幕长！

杀手锏是浏览器上的 Flash。如果我不小心在远程计算机上使用 Flash 打开了浏览器，它会终止连接。解决方案是使用 FlashBlock（一个 firefox 插件）。

我使用 Eclipse 和 Visual Studio 没有任何问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-01T18:23:57.247

我用它在家工作（通过 VPN 远程登录到我的办公室 PC）。

当然，性能取决于您的 ISP。

它的可靠性稍差（因为当/如果办公室 LAN 出现故障时您会停机，现在在任何一个 Internet 连接出现故障时都有额外的停机风险）。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-01T18:43:34.900

我在 1Mbps 上游管道上有一个远程服务器，我通过 RDP 连接到（通过 VPN）它工作得很好。我什至使用没有性能问题的大屏幕分辨率 (1600x1200)。当然，我不确定这样的设置对于多个并发用户来说会如何。

通过 RDP 进行开发的一个好处是我没有预料到的，你可以保存会话——所以当你完成一天的开发后，你退出你的 RDP 客户端并关闭你的计算机，当你重新登录时，那天你的会议就在你离开的地方。

作为额外的奖励，RDP 客户端可用于[linux](http://sourceforge.net/projects/tsclient)和[OS X](http://www.microsoft.com/mac/products/remote-desktop/default.mspx)。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-02-01T21:07:18.650

我每天都使用 RDP 进行开发，我将笔记本电脑留在家里，工作环境打开并准备就绪。当我开始工作并且每个人都在加载他们的项目并打开他们的程序时，我只是 RDP 并且我准备好了。您必须记住某些会发生变化的键盘快捷键（例如 CTRL+ALT+DEL），起初它很烦人，但您会习惯它。

为了将延迟降到最低，我建议...

*   把颜色调低到256（毕竟你只需要看文字）
*   将壁纸留在另一台电脑上
*   将声音留在另一台计算机上
*   将任何主题留在另一台计算机上
*   选择较低的连接速度，即使您的连接速度更高。Windows 将最小化发送的数据。

您可能还会考虑的优势之一是处理能力。如果您在家中的机器比工作中的工作站具有更好的规格，那么编译时间会大大缩短。由于您的本地计算机只需要从远程计算机更新映像，因此您的本地计算机没有负载。

使用此选项还可以让我保持跟踪。当其他人登录并浏览互联网并浪费时间时，我已经准备好开始了。提高工作效率可以帮助您获得大笔报酬（如果您的雇主注意到的话），而其他人仍然停留在他们的初级编程角色中。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-01T18:50:06.243

2000 年之前，我每天都这样做了 3 年，每天几个小时。这也是带宽下降的时候。

现在好多了。

如果你使用 NxMachine，生活会变得更好:)

但是，我没有将这台机器与多个用户一起使用。我对此的担心是开发人员是一群挑剔的人（包括我自己），我们倾向于按原样努力推动机器。

无法想象一个盒子上的几个人都决定编译:)

G人

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-01T18:54:38.653

我们用 citrix 来做，而且速度非常快。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-02-01T21:12:07.143

我想知道这是什么原因。中央服务器是否可以访问个别开发人员机器无法访问的某些资源？

我不时使用 RDP 从我的家用计算机连接到我的工作计算机。我不得不说 - 可以编写代码，但是当 IDE 在您自己的机器上时这样做会更舒服。即使在 100MBit LAN 上也有一些明显的延迟。不足以打扰工作，但仍然很烦人。

如果人们必须定期在偏远地区工作，我更喜欢通过某种安全协议（HTTPS、VPN 等）提供中央源代码控制的设置，但开发可以在开发人员的本地进行机器。如果使用像 SVN 这样的东西，即使离线开发也能很好地工作，那么程序员自己应该会更舒服。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-01T18:49:24.840

对于开发工作站来说，重要的是绝对的处理能力。在我们这里，开发人员在 CPU、内存、磁盘等方面拥有最高端的工作站，而不是在音频和图形方面。后者受 RDP 影响最大。

只要您的开发人员 RDP-ing 到的服务器足够快以处理多个编译，同时构建您应该没问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-02-01T19:03:45.437

与所有事情一样，您的问题的答案是“您的里程数可能会有所不同”或 YMMV。这取决于开发人员在做什么。他们是把大部分时间都花在编写代码上，还是进行大量大型编译？他们需要直接访问硬件吗？

他们需要调试权限吗？一旦您授予他们调试权限，他们基本上就拥有这台机器并且可以干扰其他用户。

允许用户在自己的计算机上开发，并使用 VPN 允许他们访问版本控制系统通常会更好。然后他们可以将文件签出到本地计算机并做任何他们想做的事情，然后签入更改。

但是，RDP 也有它的优点。您确实需要权衡利弊，并决定哪个列表更长或更“有分量”。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-02-14T13:54:31.470

我使用 NoMachine NX 客户端将桌面远程连接到运行 FreeNX 的无头服务器上。这很棒，因为我可以从任何地方登录到我的会话，并且我的最后一个会话仍然存在。速度从来都不是问题，除非 DSL 线路中断。无论如何，我的观点是，如果您正在运行 Linux 服务器并使用“vi”，那么还有比“screen”更好的选择。

# sharepoint - 电子表格视图中的文档版本列

> ID：501283
> 
> 赞同：0
> 
> 时间：2009-02-01T18:10:25.200
> 
> 标签：sharepoint, moss

我尝试在电子表格视图中打开 MOSS 文档库，当我添加文档版本时，我在常规视图中看到它，而在电子表格视图中看不到。

当我尝试导出到 Excel 时，我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-03T12:11:33.443

可能是该库支持版本控制 - 在这种情况下，文档可能不会显示，因为它仍然是草稿。如果删除版本控制会发生什么？

# windows - Windows 等效于 Mac OS X “打开”命令

> ID：501290
> 
> 赞同：24
> 
> 时间：2009-02-01T18:12:49.703
> 
> 标签：windows, command-line, command-line-interface

Liu Chang 在这里问了一个与这个问题非常相似的问题，[Linux 等效于 Mac OS X 的“打开”命令](https://stackoverflow.com/questions/264395/linux-equivalent-of-the-mac-os-x-open-command)。

Mac OS X“打开”命令是否有等效的窗口。我正在尝试运行一个分析器来打开它的结果，但它正在寻找“打开”命令。基本上，该命令需要从命令提示符打开一个文件，就像在资源管理器中双击它一样。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-02-01T18:14:33.787

最接近的东西是`start`.

* * *

如果它的第一个参数是双引号，则该参数被视为窗口标题而不是文件名。因此，要稳健地使用它，请添加一个空字符串作为第一个参数：

```
start "" "my filename.foo" 
```

[[感谢@Holger 指出这一点！](https://stackoverflow.com/questions/501290/windows-equivalent-of-the-mac-os-x-open-command/501295?noredirect=1#comment95671026_501295)]

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-02-01T18:41:12.890

我用来写

```
explorer.exe <file> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-02-01T18:15:50.867

只需在控制台窗口中输入文件名即可在 Windows 中打开该文件。我尝试了几种格式 - 使用 OpenOffice 打开的 .doc、使用 Windows Media Player 打开的 .mp3 以及使用写字板打开的 .txt。这是我在双击文件时遇到的相同行为。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-06T09:22:01.713

试试`explorer <filename>`。例如我想启动一个名为`abc`放置在桌面的文件夹，所以我使用了命令

```
explorer abc 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-03T07:05:54.017

> 我再次回答这个问题，因为接受的答案不正确，它正在使用`start`命令（将 CMD 作为新实例打开），并且还因为根据我的等效项`explorer.exe`也与其他人提到的一样，但没有澄清，因为它应该是！

因此，如果您想使用“打开”命令打开当前文件夹。你应该使用

```
explorer.exe . 
```

这将在资源管理器中打开当前文件夹，或者如果您只是执行

```
explorer.exe 
```

然后您将打开默认的**此 PC**位置（无论是最近的还是我的计算机或其他任何东西）

它就像在中一样工作，当您只需输入文件名时，它只会在默认程序中打开，就像

```
somevideo.mp4 
```

如果您希望该文件/视频与其他程序一起打开/播放，只需写下带有完整路径的程序名称（如果它不在 PATH 系统变量中），然后是文件名，如

```
"C:\program files\greentree applications\vlc.exe" somevideo.mp4 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-01T19:23:49.947

使用`start`
我正在使用 Windows 10 并且：

```
> start . 
```

在文件资源管理器中打开当前目录

```
> start text.txt 
```

在 Notepad++ 中打开的文本文件（它被设置为我的默认 Txt 编辑器）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-02-15T01:54:04.763

只有 explorer.exe 似乎在 cygwin 下工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-06-19T18:35:16.433

如果您使用 cygwin（或 git bash），这里有一个快速脚本破解。将 EDITOR 更改为您想要的任何内容：

```
#!/bin/sh
# open

EDITOR="exec subl.exe"
BROWSER="/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"

if [ -d "$1" ]; then
    exec explorer.exe $(cygpath -w "$1")
elif [ -f "$1" ]; then
    path=$(cygpath --windows "$1")
    case "$1" in
    *.xml) $EDITOR "$1";;
    *.txt) $EDITOR "$1";;
    *.html) "$BROWSER" "$path";;
    file://*) "$BROWSER" "$path";;
    http://*) "$BROWSER" "$path";;
    https://*) "$BROWSER" "$path";;
    esac
else
    # TODO non-existent file/dir
    echo "non existent file: $1"
    exit 1
fi

exit 0 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-19T05:05:05.030

正如@charles-duffy 所说，“开始”绝对是 Windows 最接近的东西。根据您的项目，还有一些工具可以解决这个问题。

Node [opn](https://github.com/sindresorhus/opn)是一个非常棒的解决方案，可以完全跨平台

# hardware - 我可以在 RFID 标签上写入或修改数据吗？

> ID：501302
> 
> 赞同：32
> 
> 时间：2009-02-01T18:18:49.037
> 
> 标签：hardware, rfid

也许我的问题会在论坛中丢失，但是有人使用 RFID 标签吗？我知道我可以阅读它们，但我可以编写或修改内部数据吗？有谁知道我在哪里可以找到更多关于这个的信息？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-03-11T18:22:54.007

## 射频识别标准：

*   **125 Khz**（*低频*）标签是一次写入/多次读取，通常只包含一个小的（*永久*）唯一标识号。

*   **13.56 Mhz**（*高频*）标签通常是读/写的，除了预设（*永久*）唯一的 ID 号外，它们通常可以存储大约 1 到 2 KB 的数据。

*   **860-960 Mhz**（*超高频）标签通常是读/写的，除了预设（**永久*）唯一ID外，还可以具有更大的信息存储容量（我认为64 KB是目前无源标签可用的最高容量）数字。

## 更多信息

大多数读/写标签都可以被锁定，以防止进一步写入标签内部存储器中的特定数据块，同时让其他块保持解锁状态。但是，不同的标签制造商制造的标签不同。

根据您的预期应用，您可能必须对自己的微控制器进行编程，以使用制造商特定的协议与嵌入式 RFID 读/写模块接口。这肯定比购买完整的 RFID 读/写单元便宜很多，因为它们可能要花费数千美元。使用定制解决方案，您可以构建自己的单元，只需 200 美元即可满足您的特定需求。

## 链接

[RFID杂志](http://www.rfidjournal.com/)

[RFID玩具（书籍）网站](http://www.rfidtoys.net/)

[SkyTek - RFID 阅读器制造公司（您可以通过](http://www.skyetek.com)[Mouser](http://mouser.com/)等第三方零售商和批发商购买他们的产品）

[Trossen Robotics](http://www.trossenrobotics.com/) - 您可以从这里购买 RFID 标签和阅读器（125 Khz 和 13.56 Mhz）等

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-01T19:09:36.907

大约 7 到 8 年前，我使用 Mifare Classic (ISO 14443A) 卡进行了一些开发。您可以读取和写入卡的所有扇区，IIRC 唯一不能更改的数据是序列号。那时我们使用飞利浦半导体的专有库。该卡的命令接口与 ISO 7816-4 非常相似（与标准智能卡一起使用）。

如果您正在开发，我建议您查看[OpenPCD 平台。](http://www.openpcd.org/)

*这对于某些*RFID 卡中的加密功能[也很有意义。](http://hackaday.com/2008/01/01/24c3-mifare-crypto1-rfid-completely-broken/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-01T18:21:32.027

一些 RFID 芯片是可读写的，大多数是只读的。您可以通过查看数据表来确定您的芯片是否是只读的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-10-26T14:54:16.147

RFID标签有更多的标准。我在 Mifare 卡 (ISO 14443A,B) 和 ISO 15693 上开发了 RFID 标签。您可以读取/写入或修改 RFID 标签块数据中的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-08T08:36:05.133

这取决于您使用的芯片类型，但如今您可以编写的大多数芯片。它还取决于您为 RFID 设备提供多少功率。阅读你不需要分配权力和很少的视线。为了正确，您需要他们全面的洞察力和更长远的洞察力

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2010-10-26T14:46:02.420

我们最近开始在我的工作场所研究 RFID 解决方案，并找到了一种用于测试目的的廉价解决方案。

这里的单位之一：

[http://www.sdid.com/products.shtml](http://www.sdid.com/products.shtml)

插入任何带有 SD 插槽的 Windows 移动设备并允许读/写。还有一个开发工具包可以帮助您使用自己的应用程序。

希望这可以帮助

# wpf - WPF 和 WinForms 可以在应用程序中混合使用吗？

> ID：501303
> 
> 赞同：43
> 
> 时间：2009-02-01T18:18:59.473
> 
> 标签：wpf, winforms

WPF 和 Windows 窗体控件可以在一个应用程序中使用吗？这是一个多么困难或实用的想法？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2010-08-12T17:35:43.277

`ElementHost`在带有适配器的 WinForms 应用程序中托管 WPF 控件或在带有适配器的 WPF 应用程序中托管 WinForms 控件是相当简单的`WindowsFormsHost`。但是，网络上没有太多资源可以显示如何执行这些操作。在为自己学习如何做到这一点的过程中，我很快发现了两条路径之间的内在对称性。我将我所有的笔记提炼成一篇文章，使用一种独特的方法比较和对比这些对称性：这篇文章实际上是两篇并排的文章，详细比较了每一步，从使用一种技术创建用户控件到将其托管在一个在“对立”技术中的应用。我于 2010 年 8 月在 SimpleTalk.com 上发表的文章可在此处获得：[混合 WPF 和 WinForms](http://www.simple-talk.com/dotnet/.net-framework/mixing-wpf-and-winforms/)。

为了完整起见，这里有几个很好的 MSDN 参考资料，每个途径一个。事实上，我的文章附带的演示解决方案是从这两个方面开始的：

*   [在 WPF 中托管 Windows 窗体复合控件](https://msdn.microsoft.com/en-us/library/ms771575(v=vs.100).aspx)
*   [在 Windows 窗体中托管 WPF 控件](https://msdn.microsoft.com/en-us/library/vstudio/ms742215(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-02-01T18:20:35.740

我相信您可以将一个 WindowsFormsHost 控件放入您的 WPF 应用程序中，该控件将与 WinForms 代码进行互操作：

[http://blogs.msdn.com/ivo_manolov/archive/2007/07/26/wpf-win32-interop-part-1-hosting-winforms-controls-in-wpf-windows.aspx](http://blogs.msdn.com/ivo_manolov/archive/2007/07/26/wpf-win32-interop-part-1-hosting-winforms-controls-in-wpf-windows.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-01T20:10:33.460

我们在现有的 LOB WinForms 应用程序中托管了非常复杂的 WPF 控件。可以做到，但我们确实遇到了问题（有些问题无疑是由陡峭的学习曲线引起的）。这些主要与未按预期触发的失焦事件以及键盘导航问题有关。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-01T18:41:26.667

您还可以使用 HWNDSource 和 HWNDHost 控件将 WPF 控件嵌入 WinForms（或任何 Win32，实际上）应用程序中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-02T00:50:12.867

托管非 WPF 内容（无论是 HTML、WinForms 还是 Win32 内容）时，您将遇到[空域](http://msdn.microsoft.com/en-us/library/aa970688.aspx "空域")问题。这意味着您不能将 WPF 内容与托管内容完全混合。您也无法为其设置动画等。有关滚动查看器的一些有趣问题，[请参见此处以获取更多详细信息和修复](http://blogs.msdn.com/ryanvog/archive/2009/01/20/clipping-legacy-content-hosted-inside-a-wpf-scrolling-region.aspx)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-01T22:01:49.680

是的，WPF 应用程序中的 Windows 窗体和 Windows 窗体中的 WPF 控件都可以。www.novamind.com 的思维导图应用程序是这两种技术的成功组合。

# couchdb - 在 CouchDB 上实现用户评分/收藏

> ID：501304
> 
> 赞同：4
> 
> 时间：2009-02-01T18:20:06.227
> 
> 标签：couchdb, mapreduce

我正在考虑将 CouchDB 用于即将推出的网站，但就如何为该网站实施用户评分系统而言，我有点困惑。基本上，每个内容项都可以由给定用户评分。在 CouchDB 模型中，哪种方式最有意义？我认为最干燥和最合乎逻辑的方法是拥有 3 种不同的文档类型，内容、用户和一个看起来像这样的 user_rating 文档。

```
{
  用户 ID：“用户 ID”
  content_id: "内容 ID"
  评分：6
}

```

然后，我将创建一个视图，其中地图是由内容文档 id 键入的所有内容文档和 user_rating 文档的集合，reduce 计算评级的平均值并返回由内容文档 id 键入的内容文档。

这是最好的方法吗？我还没有找到很多关于 CouchDB 最佳实践的资源，所以我不太确定所有这些东西。

我的结论：下面接受的答案（我几乎要实现的）确实有效，但请注意，文档需要由内容文档 ID 键入，这使得基于其他文档属性的高级查询很麻烦。我将回到 SQL 来满足我在这个应用程序中的需求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-04T11:19:00.990

听起来你有一个合理的想法。CouchDB 太新了，我认为最佳实践需要一段时间才能摆脱。

像这样的 map/reduce 对可能形成一个合理的起点。

地图：

```
function(doc) {
   if(doc.type='rating' && doc.content_id) {
     emit(doc.content_id, doc.rating);
   }
} 
```

减少：

```
function(keys, values) {
   return sum(values)/values.length
} 
```

注意：该`map`功能需要为您的`Rating`模型添加正确的类型：

```
{
  type: 'rating',
  user_id: "USERID",
  content_id: "CONTENTID",
  rating: 6
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T19:26:42.550

那么，Couchdb 开发人员之一[Damien Katz](http://damienkatz.net/)给出了[类似过程](http://damienkatz.net/2008/02/incremental_map.html)的描述，因此您可能正在按照 Couchdb 人员的意图进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-10T19:46:50.017

我写了一个类似的情况（虽然比你的例子简单）。我正在为我的博客添加文章评分，并决定使用 CouchDB 自己存储评分。我认为你的想法是正确的。

不过，这是一个想法。您是否关心谁对什么进行了评分，例如在某处显示或跟踪？如果是这样，请继续:)

如果不是，那么为什么不将内容文档的`rating`属性更新为（如果您想阻止用户对内容进行多次评级`+= 1`，可能还更新用户文档的`rated`属性）。`.push( doc._id )`

这将大大简化您的文档处理并在“阅读”评级以显示在页面上时提供更好的性能（因为假设您已经拥有内容文档）......这将以使评级的实际过程更加昂贵为代价（更大的文件发送到服务器等）。

在我看来，有时 CouchDB（和其他键值数据库）在事情没有完全标准化时处于最佳状态。

# python - 理解 Python 列表推导的问题

> ID：501308
> 
> 赞同：9
> 
> 时间：2009-02-01T18:22:26.377
> 
> 标签：python, list-comprehension

以下代码中的最后一行是什么意思？

```
import pickle, urllib                                                                                                                                                     

  handle = urllib.urlopen("http://www.pythonchallenge.com/pc/def/banner.p")
  data = pickle.load(handle)
  handle.close()

  for elt in data:
         print "".join([e[1] * e[0] for e in elt]) 
```

我对这个问题的尝试：

*   "".join... 使用 join 方法来清空文本
*   e[1] * e[0] 将序列中的两个后续值相乘，e
*   我不确定什么是 e
*   我不确定，当你在 for -loop 之前有一些东西时，这意味着什么，比如：`e[1] * e[0] for e in elt`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-02-01T18:34:33.327

也许最好用一个例子来解释：

```
print "".join([e[1] * e[0] for e in elt]) 
```

是的缩写形式

```
x = []
for e in elt:
  x.append(e[1] * e[0])
print "".join(x) 
```

列表推导式只是`for`循环的语法糖，它由一系列语句组成一个表达式。

`elt`可以是任意对象，因为您从泡菜加载它，`e`同样如此。用法表明它是一种[序列](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-buffer-xrange)类型，但它可能只是实现序列协议的任何东西。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-02-01T18:34:12.920

首先，您需要在 URL 前面加上 http://，即：

```
handle = urllib.urlopen("http://www.pythonchallenge.com/pc/def/banner.p") 
```

表达式`[e for e in a_list]`是一个[列表推导](http://en.wikipedia.org/wiki/List_comprehension)式，它生成一个值列表。

对于 Python 字符串，`*`运算符用于重复字符串。尝试将命令一一输入到解释器中，然后查看数据：

```
>>> data[0]
[(' ', 95)] 
```

这向我们展示了每一行数据是一个包含两个元素的元组。

因此，表达式`e[1] * e[0]`实际上是`e[0]`重复`e[1]`次数的字符串。

因此，该程序绘制了一个横幅。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-01T18:28:03.463

`[e[1] * e[0] for e in elt]`是一个列表推导式，它通过循环另一个列表来评估一个列表本身，在这种情况下是`elt`. 新列表中的每个元素是`e[1]*e[0]`，其中`e`是 中的对应元素`elt`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-03T21:06:38.697

这个问题本身已经得到了充分的回答，但我想补充一点，列表推导也支持过滤。你原来的线

```
print "".join([e[1] * e[0] for e in elt]) 
```

例如，可以变成

```
print "".join([e[1] * e[0] for e in elt if len(e) == 2]) 
```

仅对 elt 中具有两个元素的项目进行操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-01T18:33:19.397

join() 是一个字符串方法，适用于新字符串中的分隔符

```
>>> ':'.join(['ab', 'cd'])
>>> 'ab:cd' 
```

并且那里不需要列表理解，生成器就足够了

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-01T19:15:46.863

安迪是一个很好的答案！

如果您想查看循环的每一步（带有换行符），请尝试以下操作：

```
for elt in data:
    for e in elt:
        print "e[0] == %s, e[1] == %d, which gives us:  '%s'" % (e[0], e[1], ''.join(e[1] * e[0])) 
```

# user-interface - 什么时候应该添加 GUI？

> ID：501322
> 
> 赞同：4
> 
> 时间：2009-02-01T18:34:12.983
> 
> 标签：user-interface, language-agnostic, scripting

我在家里和工作中写了很多剧本。大多数情况下，脚本只被使用几次来完成他们选择的任务，然后就再也不会使用了。但是，有时我会编写一个脚本来做一些更复杂的事情，一些需要用户输入的事情。正是在这一点上，我通常会为是否实现 GUI 或坚持使用 ay/n、按 1-10 等命令行界面而苦恼。这种类型的界面使用起来可能会变得乏味且难以维护。

我知道有些东西比其他东西更适合 GUI，比如在一个巨大的列表中选择东西。但是，切换命令行应用程序以使用 GUI 所花费的时间是令人望而却步的。[对我来说，即使是我能找到的最简单](http://shoooes.net/)的框架，也需要花费大量时间来添加 GUI 。

我很好奇是否有任何开发人员有一种方法来确定他们的脚本在什么时候已经增长到足以需要 GUI。或者我是不是走错了路，我是否应该一直在编写脚本，假设我以后可能会添加一个 GUI？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-01T18:44:02.980

这并不能回答您的问题，但 FWIW 在 UI 和命令行之间的中间步骤是拥有一个配置文件而不是 UI：

1.  编辑配置文件
2.  运行程序

如有必要，配置文件格式可以很复杂且注释良好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-01T18:40:57.197

与许多此类问题一样，答案是视情况而定。

如果您的程序/脚本通过接收用户的大量输入只做一件事，那么最好坚持使用非 GUI 模式。

如果应用程序做的事情不止一件事，并且您认为用户会使用该应用程序做很多事情，那么您可以考虑使用 GUI。

您是否打算将此程序分发给其他人？那么最好提供一个GUI。

如果用户不是技术人员，那么 GUI 是必须的！

就是这样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-01T18:42:52.577

当您想以一种可发现的方式将您的东西交给其他人时。命令行脚本很棒，因为它们简单而优雅，但它们不是很容易被发现。也就是说，如果您将脚本交给没有文档的其他人，他们是否能够弄清楚它们是什么以及如何使用它们？如果你的任务如此简单，myscript /? 将完全解释您需要做什么，然后您就不需要 GUI。

另一方面，如果您将脚本交给技术不高的人，或者需要更多关于要完成的任务的视觉指导，那么 GUI 绝对是一个不错的选择。您甚至可能希望保持脚本原样，只需创建一个单独的 GUI 来运行它们以获得最大的灵活性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-01T18:47:13.143

我认为这个决定还取决于将使用你的脚本的观众：如果是那些习惯使用命令行的人，那么只要你的脚本有一个好的 /help 就没有迫切需要添加 GUI解释它接受的所有参数。但是，如果您希望“普通用户”能够使用您的程序，我宁愿添加一个 GUI，因为否则您的程序对于该用户组可能不够直观。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-01T22:32:34.750

如果您只需要一些“对话框”来改进您的脚本，您可以使用 KDE [Kdialog](http://techbase.kde.org/Development/Tutorials/Shell_Scripting_with_KDE_Dialogs)或 Gnome [Zenity](http://library.gnome.org/users/zenity/2.24/zenity.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-01T23:57:20.397

我数不清有多少次我写了我认为是“一次性”的东西，它变得比我想象的更有用，最终为它写了一个 GUI，或者我需要回到几个月后使用一个程序。GUI 的优点是更容易记住命令行参数。即对于标志和选项，您可以简单地使用复选框、组合框、单选按钮和文件选择器文件名。我使用 Borland C++ RAD，因此将一个简单（甚至不那么简单）的对话框组合在一起非常快速和容易。我现在经常从创建 GUI 开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-02T08:25:42.900

如果您使用 Linux，请尝试 Zenity。这是一个易于使用的工具，可以为命令行程序制作 GUI。

# java - 如何轻松地将基于 XML 的配置文件加载到 Java 类中？

> ID：501325
> 
> 赞同：6
> 
> 时间：2009-02-01T18:35:00.703
> 
> 标签：java, xml, code-injection

我有一个简单的 java 类，看起来像这样：

```
public class Skin implements Serializable {

    public String scoreFontName = "TahomaBold";
    ...
    public int scoreFontHeight = 20;
    ...
    public int blockSize = 16;
            ...

    public int[] nextBlockX = {205, 205, 205, 205};
            ...
    public String backgroundFile = "back.bmp";
            ... 
} 
```

我想从一个看起来像这样的简单 XML 文件中读取这些信息：

```
<xml>
    <skin>
        <scoreFontName>"Tahoma Bold"</scoreFontName>
        ...
        <scoreFontHeight>20</scoreFontHeight>
        ...
        <blockSize>16</blockSize>
        ...
        <nextBlockX>
             <0>205</0>
             <1>205</1>
             <2>205</2>
             <3>205</3>
        <nextBlockX>
        ....
        <backgroundFile>"back.bmp"</backgroundFile>
        ...
     <skin>
 </xml> 
```

有没有一种简单的方法可以将 xml 文件中的信息直接注入到变量名中，而不必手动解析它？我不介意使用外部库。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-01T18:41:30.503

XStream 是一个非常棒的库。

[http://x-stream.github.io/](http://x-stream.github.io/)

您可以为您的类甚至自定义数据格式设置别名，以使 XML 文件更具可读性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-01T19:01:06.657

已经提到的解决方案（[XStream](http://xstream.codehaus.org/)和 Apache Commons [Digester](http://commons.apache.org/digester/)）的替代方案将是 Java 自己的[JAXB](http://jaxb.java.net/)，用于类似的通用方法，或者更适合配置的解决方案，如 Apache Commons [Configuration](http://commons.apache.org/configuration/)或 Java 的[Preferences API](http://java.sun.com/j2se/1.4.2/docs/guide/lang/preferences.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-01T18:48:03.360

我实际上会推荐 Apache Digester，因为如果您的类是 bean，它只会处理将 XML 读入其中的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-01T21:37:39.260

您也可以使用 Spring - 虽然如果它用于手机游戏，对于一个类来说可能有点矫枉过正！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-16T16:07:30.567

我最近开始使用 Simple [http://simple.sourceforge.net/](http://simple.sourceforge.net/home.php)进行 XML 到对象的映射。它在类中使用注释，类似于我在 C# 中使用的方法，并且非常干净。您还可以将文件分成多个类，加载保存是一个简单的单行。

在您的情况下，类结构看起来像。

```
import org.simpleframework.xml.Element;
import org.simpleframework.xml.Root;

@Root (Name="skin")
public class Skin {

    @Element(name="scoreFontName")  // name param not needed if class field is the same as the xml (element) value
    private String scoreFontName 

    @Element
    private int scoreFontHeight 

    @Element
    private int blockSize 

    @ElementArray
    private int[] nextBlockX 

    @Element    
    private String backgroundFile 

    // getters
} 
```

请注意一个区别是您的数组将像这样保存

```
<nextBlockX>
     <int>205</int>
     <int>205</int>
     <int>205</int>
     <int>205</int>
<nextBlockX> 
```

但是您可以选择将 (entry="myName") 添加到 XML 将像这样保存下来的注释中

```
<nextBlockX>
     <myName>205</myName>
     <myName>205</myName>
     <myName>205</myName>
     <myName>205</myName>
<nextBlockX> 
```

但是一旦加载到数组中，最终结果是相同的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-23T20:07:37.557

使用 JAXB。它包含在从 Java 1.6 开始的 JDK 中。

# vim - 为什么在 Vim 的插入模式下粘贴很长的单行很慢？

> ID：501332
> 
> 赞同：29
> 
> 时间：2009-02-01T18:40:14.047
> 
> 标签：vim, paste

我的 Macbook 昨天卡住了，当时我试图将 1200 行 80 个字符粘贴到 Vim。下载文件要快得多，而不是粘贴文本。

我认为这个问题可能是互联网运营商允许上传比下载慢的原因。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-02-01T22:25:37.183

如果你将它粘贴到终端窗口，Vim 会认为你是手动输入的，它会在你输入时尝试更新显示。您可以使用`pbpaste`and`pbcopy`命令访问剪贴板（在 OS X 上），因此您可以在 Vim 中执行此操作：

```
:read !pbpaste 
```

或在外壳中：

```
bash$ pbpaste | vim - 
```

如果您使用 GUI Vim，您将使用`"*`寄存器进行粘贴（这是上下文菜单的作用）：

```
"*P   <- in normal mode 
```

粘贴到终端窗口通常是个坏主意，`pbpaste`请尽可能尝试使用。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2010-05-10T07:55:44.687

> ```
> :read !pbpaste 
> ```

如果您使用的是 Linux，请使用：

```
xsel --clipboard --output 
```

或者：

```
xclip -selection clipboard -o 
```

而不是 pbpaste。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-01T22:07:15.393

那是“正常”。它很慢，因为重绘文本数千次很慢。

当您粘贴长线时，它会不断更新显示（我猜是因为 vim 如何处理文本，或者终端如何处理 vim 文本）。

我尝试在 vim 中粘贴文本（使用 iTerm），它有同样的问题，粘贴需要一段时间。我试过了`:set paste`，`:set nowrap`还是一样慢。将线直接粘贴到终端中同样慢

使用您提到的 dpaste 链接，有一个纯文本链接，您可以 wget 并对其进行编辑：

```
curl http://dpaste.com/115362/plain/ | vim - 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-11-08T07:25:47.703

我喜欢像 Masi 建议的那样设置粘贴/不粘贴。在 .vimrc 中，您可以映射一些字符以切换粘贴（如果经常需要）。

IE

```
set pastetoggle=§ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-01T18:41:56.010

你试过粘贴模式吗？设置粘贴/设置不粘贴？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-01T22:44:00.890

如果你 :syntax off 有时可以改进长单行文件的就地粘贴。一个例子是机器生成的 xml 文件。

您也可以在粘贴时禁用 vim 的重绘，看看 :he redraw ，但使用命令行的东西总是值得的

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-01T18:46:58.060

我不知道这是 Mac 问题还是其他问题，但我在 Vim 中粘贴这么多文本没有任何问题。我在 Windows 和 Linux 上都试过了，没有发现任何问题。

我已经在 Vim 中成功编辑了数百兆（日志文件）的文件（加载速度很慢，但是一旦读取文本，一切都非常快）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-01T21:51:01.433

但如果它在网络上，你应该尝试过：

```
:e http://link/to/file 
```

然后，如有必要，将其保存为本地文件。

如果由于重绘而变慢，请查看此选项：

```
 *'lazyredraw'* *'lz'* *'nolazyredraw'* *'nolz'*
'lazyredraw' 'lz'   boolean (default off)
            global
            {not in Vi}
    When this option is set, the screen will not be redrawn while
    executing macros, registers and other commands that have not been
    typed.  Also, updating the window title is postponed.  To force an
    update use |:redraw|. 
```

如果它是本地文件，则不需要粘贴：尝试

```
:read file 
```

反而。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-01T18:59:59.703

如果您使用 Apple Terminal，请尝试使用其他终端，例如 iTerm。有时，“内置”终端对于常见任务并没有真正的反应。不知道为什么...

# sql - SQL产品/产品销售

> ID：501347
> 
> 赞同：0
> 
> 时间：2009-02-01T18:44:58.250
> 
> 标签：sql, inner-join

一种常见的（我假设？）查询类型：

我有两个表（'products'、'productsales'）。“productsales”中的每条记录都代表一次销售（因此它有“date”、“quantity”、“product_id”）。我如何有效地进行如下查询：

检索在日期 Y 和日期 Z 之间销售超过 X 次的所有产品的产品名称。

（X 是销售数量而不是交易数量）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-01T18:53:52.740

```
 SELECT p.[name]
 FROM products p
 WHERE p.product_id in (SELECT s.product_id
     FROM productsales s
     WHERE s.[date] between @dateStart and @dateEnd
     GROUP BY s.product_id
     HAVING Sum(s.quantity) > @X ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T18:56:05.280

上面的查询并不完全正确......

```
SELECT Name FROM Products
WHERE ProductId IN
( SELECT ProductId 
  FROM ProductSales
  WHERE ProductSales.Date BETWEEN  Y AND Z 
  GROUP BY ProductId
  HAVING SUM(ProductSales.Qty) > x
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T18:58:32.310

实际上，我认为您应该[通过语句来学习分组](http://www.java2s.com/Code/SQL/Select-Clause/COUNTandGROUPBY.htm)

最简单的说法是：

```
SELECT ps.product_id, COUNT(*) 
           FROM product_sales ps 
           WHERE ps.product_id = id AND ps.Date BETWEEN @Y AND @Z
           GROUP_BY product_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T19:06:07.193

```
SELECT p.[name]
FROM
products p
INNER JOIN
productsales ps
ON 
p.id = ps.product_id
WHERE
ps.date BETWEEN @Y AND @Z
GROUP BY
p.[name] 
--,p.id if it is likely that you have two products with the same name
HAVING
SUM(ps.quantity) > @X 
```

[使用MS AdventureWorks DB](http://msdn.microsoft.com/en-us/library/ms124659.aspx)成功测试，使用以下 -

```
DECLARE @Y DATETIME, @Z DATETIME, @X INT    

SET @Y = '2004-06-09'
SET @Z = '2004-08-01'
SET @X = 100

    SELECT p.[Name]
    FROM
    Production.Product p
    INNER JOIN
    Sales.SalesOrderDetail ps
    ON 
    p.ProductID = ps.ProductID
    WHERE
    ps.ModifiedDate BETWEEN @Y AND @Z
    GROUP BY p.Name
    HAVING
    SUM(ps.OrderQty) > @X 
```

# java - 在 GWT 中返回 JSON

> ID：501348
> 
> 赞同：1
> 
> 时间：2009-02-01T18:46:41.523
> 
> 标签：java, javascript, json, gwt

我对 JSON 和 GWT 还是很陌生，我正在尝试弄清楚如何将 JSON 数据从页面传回我的 GWT 应用程序。我将 JSON 传递回一个类：

```
public class GetProductTree extends JavaScriptObject {

    protected GetProductTree() { }

    public final native String getCustomerName() /*-{ return this.customername;  }-*/;

} 
```

这是非常基本的，目前还不完整，所以我只是（现在）尝试确保我能拿回一些东西。

调用它的代码是：

```
submitProject.addClickListener(new ClickListener() {
            public void onClick(Widget w) {
                RequestBuilder.Method method=RequestBuilder.GET;
                final String url1 = "http://localhost:8500/getProducts.cfm";
                //Window.alert(url1);
                RequestBuilder rb = new RequestBuilder(method, url1);

                try {
                    rb.sendRequest(null, new RequestCallback() {
                        public void onResponseReceived(Request request, Response response) {
                            JSONObject oResults = (JSONObject) JSONParser.parse(response.getText());
                            GetProductTree oResponse = oResults.isObject().getJavaScriptObject().cast();
                            Window.alert(oResponse.getCustomerName());
                        }

                        public void onError(Request arg0, Throwable arg1) {
                            Window.alert("error");
                        }
                    });
                } catch (RequestException e) {

                } 
            } 
        }); 
```

但是我收到一个错误：

> 没有可用于类型 XYZ.GetProductTree 的源代码；你忘了继承一个必需的模块吗？

我正在调用页面上为 XYZ.GetProductTree 导入正确的包。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T20:55:33.713

此错误来自编译器，抱怨它在其类路径中找不到该类型。为了让 GWT 编译器找到你的类，它们必须在你的类路径中，并且它们也必须在 .gwt.xml 模块文件中被引用。您可以发布您的包名称和 .gwt.xml 文件的内容吗？我的猜测是，无论你把这个类放在哪里，GWT 编译器都看不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T21:30:56.137

我有时候就是这么迟钝。我忘记了必须为我的新包添加源路径。我将它添加到我刚刚创建的“数据”包中，并没有将路径添加到 XML。谢谢 ：）

# javascript - 使用 jQuery，如何将选择的选定值存储到数组中？

> ID：501363
> 
> 赞同：1
> 
> 时间：2009-02-01T18:57:35.247
> 
> 标签：javascript, jquery

感谢您阅读本文。

我原以为这就像在选择 .val() 上使用 .split 函数一样简单，但我得到了一个 js 错误。这是我正在使用的代码。我将使用 .each() 循环遍历选定的项目...但想了解我做错了什么...

如果我用文字设置 opts ..拆分有效（注释代码）

谢谢

```
<html><head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
<script type="text/JavaScript">
$(function(){
    $("#multOpts").bind("click", function() {
    //  var opts = "OPT1,OPT2,OPT3" ;
        var opts = $("#select1").val() ;
        $("#text1").val(opts);
    });
    $("#oneOpt").bind("click", function() {
        //  var opts = "OPT1,OPT2,OPT3" ;
        var opts = $("#select1").val() ;
        var optsArray = opts.split(",") ;
        $("#text2").val("1st opt: " + optsArray[0]);
    });
}); // End eventlistener
</script>
</head><body>
<select id="select1" multiple size="5">
<option value="OPT1">Option 1</option>
<option value="OPT2">Option 2</option>
<option value="OPT3">Option 3</option>
<option value="OPT4">Option 4</option>
<option value="OPT5">Option 5</option>
</select>
<div>
<input id="multOpts" type="button" value="Show Options"/>
<input id="text1" type="text"/>
</div>
<input id="oneOpt" type="button" value="One Option"/>
<input id="text2"  type="text"/>
</body></html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T19:07:12.170

选择多个选项时的 val() 函数返回您已经是一个数组，您不需要进行拆分。

```
 $("#oneOpt").bind("click", function() {
            var opts = $("#select1").val();
            $("#text2").val("1st opt: " + opts[0]);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T19:09:53.647

从 jQuery 1.2 开始，.val() 返回的值数组是在多选时返回的。

```
var opts = $("#select1").val() || [];
$("#text2").val("values is: " +opts.join(", ")); 
```

# linux - 如何递归列出所有文件和目录

> ID：501367
> 
> 赞同：29
> 
> 时间：2009-02-01T18:59:43.260
> 
> 标签：linux, shell

在 Free BSD 上使用 tcsh shell，有没有办法递归列出所有文件和目录，包括文件的所有者、组和相对路径？

ls -alR 接近，但它没有显示每个文件前面的相对路径，它显示了分组顶部的路径，即

```
owner% ls -alR
total 0
drwxr-xr-x   3 owner  group  102 Feb  1 10:50 .
drwx------+ 27 owner  group  918 Feb  1 10:49 ..
drwxr-xr-x   5 owner  group  170 Feb  1 10:50 subfolder

./subfolder:
total 16
drwxr-xr-x  5 owner  group   170 Feb  1 10:50 .
drwxr-xr-x  3 owner  group   102 Feb  1 10:50 ..
-rw-r--r--  1 owner  group     0 Feb  1 10:50 file1
-rw-r--r--  1 owner  group     0 Feb  1 10:50 file2 
```

我想要的是输出如下：

```
owner group ./relative/path/to/file 
```

这个问题的[公认答案](https://stackoverflow.com/questions/245698/list-files-recursively-in-linux-with-path-relative-to-the-current-directory)显示了文件的相对路径，但不显示所有者和组。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-02-01T19:07:05.290

这个怎么样：

```
find . -exec ls -dl \{\} \; | awk '{print $3, $4, $9}' 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-02-04T18:32:09.867

使用**树**。很少有 linux 发行版默认安装它（在这些只有 GUI 的*黑暗日子*里 :-)，但它总是在标准存储库中可用。它也应该适用于 *BSD，请参阅[http://mama.indstate.edu/users/ice/tree/](http://mama.indstate.edu/users/ice/tree/)

采用：

```
tree -p -u -g -f -i 
```

或者

```
tree -p -u -g -f 
```

或查看手册页以获取许多其他有用的参数。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-27T23:47:35.863

在 Linux Debian 中工作：

```
find $PWD -type f 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-02-01T19:07:39.000

`find`接近：

```
find . -printf "%u %g %p\n" 
```

如果您希望路径相对于指定目录，还有“%P”，它会从文件名中删除前缀。

注意这是GNU find，不知道BSD find 是否也支持-printf。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2011-03-20T10:14:59.867

您已经得到了一个可行的答案，但作为参考，您应该能够在 BSD 上执行此操作（我已经在 mac 上对其进行了测试）：

```
find . -ls 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-02-01T19:42:29.197

如果您喜欢使用 Perl，请不要将其用作 shell 命令的包装器。在本机 Perl 中执行此操作更快、更便携且更具弹性。此外，它还避免了临时正则表达式。

```
use File::Find;
use File::stat;

find (\&myList, ".");

sub myList {
   my $st = lstat($_) or die "No $file: $!";

   print  getgrnam($st->gid), " ", 
          getpwuid($st->uid), " ", 
          $File::Find::name, "\n";
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-17T12:56:53.220

我发现的简单方法是这样的：

ls -lthr /path_to_directory/*

“ * ” - 表示级别。

```
Ajiths-MBP:test ajith$ ls -lthr *
test2:
total 0
-rw-r--r--  1 ajith  staff     0B Oct 17 18:22 test2.txt

test3:
total 0
-rw-r--r--  1 ajith  staff     0B Oct 17 18:22 test3.txt

test1:
total 0
-rw-r--r--  1 ajith  staff     0B Oct 17 18:21 test1.txt
drwxr-xr-x  3 ajith  staff    96B Oct 17 18:22 test1_sub_dir

Ajiths-MBP:test ajith$ ls -lthr */*
-rw-r--r--  1 ajith  staff     0B Oct 17 18:21 test1/test1.txt
-rw-r--r--  1 ajith  staff     0B Oct 17 18:22 test2/test2.txt
-rw-r--r--  1 ajith  staff     0B Oct 17 18:22 test3/test3.txt

test1/test1_sub_dir:
total 0
-rw-r--r--  1 ajith  staff     0B Oct 17 18:22 test1_sub_file.txt 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2009-02-01T19:09:26.487

使用 shell 脚本。或 Perl 脚本。示例 Perl 脚本（因为这对我来说更容易）：

```
#!/usr/bin/perl
use strict;
use warnings;
foreach(`find . -name \*`) {
  chomp;
  my $ls = `ls -l $_`;
  # an incomprehensible string of characters because it's Perl
  my($owner, $group) = /\S+\s+\S+\s+(\S+)\s+(\S)+/;
  printf("%-10s %-10s %s\n", $owner, $group, $_);
} 
```

也许比其他答案更冗长，但应该可以解决问题，并且应该让您不必记住要输入的内容。（代码未经测试。）

# phone-number - 电话号码格式和验证库

> ID：501368
> 
> 赞同：16
> 
> 时间：2009-02-01T18:59:45.553
> 
> 标签：phone-number

[这个](https://stackoverflow.com/questions/487906/java-phone-number-format-api)在 Java 中询问电话号码格式 API 的问题让我想知道为什么这样的 API 似乎不存在。鉴于[Apache Commons下可用的](http://commons.apache.org/)[验证](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/package-summary.html#package_description)类的数量，我原以为会包含这样的 API。

我的问题是，有没有人知道可以用作小型 Java 开源项目模型的**任何语言**的电话号码格式/验证库？此外，除了全世界使用大量不同的电话号码格式之外，有没有人知道这样一个项目不可行的任何原因？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2011-01-05T13:57:00.670

Google 最近发布了用于解析、格式化、存储和验证国际电话号码的[libphonenumber 。](http://code.google.com/p/libphonenumber/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-02-01T19:18:50.727

任何语言的此类 API：[Number::Phone](http://search.cpan.org/search?query=Number%3A%3APhone&mode=all)（示例子模块：[Number::Phone::US](http://cpansearch.perl.org/src/KENNEDYH/Number-Phone-US-1.5/lib/Number/Phone/US.pm)）。

数据：国际电联的[国家编号计划](http://www.itu.int/oth/T0202.aspx?parent=T0202)索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-06-02T21:03:14.177

在[http://www.geonames.org/](http://www.geonames.org/)他们有一个可以下载的数据库，国家信息数据集中包含电话号码的 regEx 规则。

[http://download.geonames.org/export/dump/](http://download.geonames.org/export/dump/)

查找“countryInfo.txt”文件。

我建议您在此基础上构建自己的验证器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T19:15:24.570

就像在另一个问题的答案中所说的那样，没有人见过 Java，就像你说的那样，由于世界各地电话号码格式的差异，这几乎是不可能的。

如果您知道目标区域的不同格式，那么在正则表达式中实现它通常很容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T06:33:53.490

您可以在此处查看 Parsify 格式 - [https://www.mashape.com/parsify/format#endpoint-Phone-Number](https://www.mashape.com/parsify/format#endpoint-Phone-Number)

它将以多种格式返回您的号码，例如

{“e164”：“+1234567890”，“国家”：“234567890”，“国际”：“+1 234567890”，“有效”：假，“类型”：“未知”}

如果它是一个实数，您可以获得更广泛的响应

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-09-13T12:21:23.387

**电话输入字段：**

```
<input class="left" id="field" name="field" /> 
```

**jquery脚本：**

jQuery.validator.addMethod("phoneUS", function(phone_number, element) { phone_number = phone_number.replace(/\s+/g, ""); return this.optional(element) || phone_number.length > 9 && phone_number.匹配(/^(1-?)?(([2-9]\d{2})|[2-9]\d{2})-?[2-9]\d{2}-?\ d{4}$/); }, "请指定一个有效的电话号码");

# c++ - 如何检查对象构造是否完成？

> ID：501373
> 
> 赞同：2
> 
> 时间：2009-02-01T19:01:35.673
> 
> 标签：c++

有一个有几个整数和一个指针的类，

```
 class A {
     int a;
     int b;
     char* s;
    public:
    ...
      class ConstructA {
           A &a;
           public:
           ConstructA (A& ta) : a(ta) {}
           ...

      };

}; 
```

正如所见，ConstructA负责构造对象A。我想编写一个方法来查看ConstructA是否成功构造了对象a。你会怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-01T19:15:07.037

由于 C++ 中的构造函数无法失败，因此对象也可以：

*   不存在
*   构建成功。

如果构造函数抛出异常，则在捕获异常时对象实际上并不存在。

您可能想要实现一个额外的方法，例如`isOK()`返回对象的内部状态是否代表有用的东西。例如，如果您有一个代表文件的对象，那么您可以使用`isOK()`来指示该文件可以成功打开。但是，就 C++ 而言，无论文件是否可以打开，文件对象都将被完全构造。

话虽如此，我并不完全确定`ConstructA`班级在您的示例中的作用是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T19:26:52.613

您是 ConstructA 只是试图保留已构造 A 的引用，尝试将其更改为：

```
 class ConstructA {
       A a; // Don't make this a reference
       public:
       ConstructA (A& ta) : a(ta) {}
       ...

  }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T19:15:08.767

作为一般规则，如果在构造过程中出现任何故障，您将抛出异常——来自对象本身的特定于程序的异常，或者来自运行时的内存异常或类似的东西。

在这种特殊情况下，您不是在构造 A 类型的对象，而是在初始化一个引用。因此，没有任何建筑有可能会失败。

（也许有关您要完成的工作的更多细节会帮助某人给出更好的答案？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T19:20:53.000

首先，您的 ConstructA 课程对我来说毫无意义。基本上有两种情况：

1.  对象的构造失败
2.  对象处于已定义但受限的状态。严格来说，构造成功了，但可能不是调用者希望的程度。他可以选择稍后完成建造。

## 1、施工失败

我将在以下代码中使用您的 ConstructA 只是为了表明有关构造失败的信号：

```
A a0;
try {
    A::ConstructA a1(a0);
} catch(...) {
    // fail to construct a1
} 
```

构造函数在构造失败时抛出异常以发出信号。*这个想法是，如果一个对象的构造失败，那么这个对象就不会被构造。换句话说，该对象不存在。*如果您必须在构造函数初始化列表中初始化 a1，也有一种方法：

```
struct B {
    B() try : a1(a0) { 
        // other constructor code...
    } catch(...) {
        // fail to construct either a0 or a1, or constructor 
        // code threw
    }
    A a0;
    A::ConstructA a1;
};

try {
    B b;
} catch(...) {
    // fail to construct B
} 
```

首先，执行构造函数的catch块中的代码，然后异常*自动*传播到创建B对象的代码，并考虑其catch块。

您的类 ConstructA 的构造函数可能如下所示，例如：

```
struct ConstructA {
    ConstructA(A &a):a(a) {
        if(!condition_met) {
            throw std::runtime_error("condition_met false");
        }
    }
    A &a;
}; 
```

## 2.对象处于受限状态

当您拥有文件流对象但未连接到文件时，情况正是如此。如果在构造函数中你发现提到的文件不存在，你仍然可以完全构造流，但将其设置为*未打开*状态。某些操作可能会被禁止，您可以使用`isOpen`or`isValid`函数来查询对象的状态。这也可以应用于其他情况。我使用的一些框架有一个`Color`类。默认构造颜色类使其处于无效状态，因此它不等于任何有效颜色：

```
Color c;
assert(c.isValid() == false); 
```

相同的技术用于**空指针**。*当您将NULL*分配给它时，它被设置为已定义但受限制的状态：

```
int *a = NULL;
assert(a == NULL); 
```

例如，您不能取消引用空指针。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-02-01T20:31:46.087

mkal，我总是建议人们不要在 C++ 中使用异常。它会导致更多它试图解决的问题。

为了回答你的问题，为了避免 C++ 中的异常，你可能可以减少你想要在构造函数中做的工作，并创建一个 init() 方法，如果出现问题，它会返回错误代码。

基本上，无论你在 C++ 构造函数中做什么，它都必须成功。

希望有帮助。

# html - 将背景图像从右侧放置 1em？

> ID：501375
> 
> 赞同：17
> 
> 时间：2009-02-01T19:02:36.500
> 
> 标签：html, css, xhtml

据我所知，不可能将 CSS 背景图像放置在距离任何块的右边框 1em 处，也不可能将图像放置在距离底部 1em 处。

以下代码将背景图像从左侧放置 1em，从顶部放置 2em。

```
<div class="foo" style="background: url('bar.png') no-repeat 1em 2em">
  Some text here
</div> 
```

如果框的大小是动态的并且假设您无法更改 HTML，那么 CSS 中是否有任何方法可以指定背景图像应该“离右边缘这么远”？

（百分比不起作用，因为盒子可以改变大小）

如果这不可能，您需要对 HTML 进行的最小更改是多少？

这是我想出的解决方法：

```
<style>
div.background
{
  float: right; 
  background: url('bar.png') no-repeat top left; 
  margin-right: 1em; 
  width: 16px; 
  height: 16px;
}
</style>
<div class="foo">
  <div class="background" style="">&nbsp;</div>
  Some text here
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-08T01:06:22.733

[CSS3 背景位置规范](http://www.w3.org/TR/css3-background/#background-position)允许您将锚点从左上角更改为您想要的任何内容。例如，以下将设置图像的下下角距离右侧 1em 和距离底部 2px：

```
background-position: right 1em bottom 2px; 
```

确认工作于：

> IE9/10、Firefox 13+、Chrome 26+、Opera 11+、Seamonkey 2.14+、Lunascape 6.8.0

截至 2013 年 4 月，只有 IE6-8 和一些边缘浏览器缺乏支持。

这是一个测试页面：http: [//jsbin.com/osoju​​z /1/edit](http://jsbin.com/osojuz/1/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-01T22:32:52.970

Elements with position: absolute; can be positioned by their right edge. So, if you don't mind a minor change to the html, do this:

```
<div id="the-box">
    <img id="the-box-bg" src="bar.png" />
    Text text text text....
</div>
(...)
#the-box {
    position: relative;
}
#the-box-bg {
    position: absolute;
    right: 1em;
    z-index: -1;
} 
```

You could of course also use absolute positioning of a second div, with a repeating background. But then you would have to set the size of the (inner) div in CSS.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-01T21:07:42.690

你可以尝试这样的事情：

```
<style type="text/css" media="screen">
    #outer {
        position: relative;
        top: -1em;
        left: -1em;
        margin: 1em 0 0 1em;
        outline: thin solid #F00;
        background: url(http://i.stackoverflow.com/Content/Img/stackoverflow-logo-250.png) no-repeat 100% 100%;
    }
    #inner {
        outline: thin solid #0F0;
        position: relative;
        top: 1em;
        left: 1em;
    }
</style>

<div id="outer">
    <div id="inner">
        Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </div>
</div> 
```

**编辑：**期待[CSS 3`background-position`](http://www.w3.org/TR/css3-background/#the-background-position)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T19:45:50.797

经过一些研究，背景位置的实际 x 像素长度**总是**从元素的左侧开始计算。使这项工作（不使用其他元素）的唯一方法是使用javascript，在给定元素宽度的情况下计算左侧长度：

```
var rightMargin = "10"; // in pixels
var imageWidth = "16";
var left = element.style.clientWidth - imageWidth - rightMargin;

element.style.backgroundPosition = "0px " + left + "px"; 
```

# latex - 如何开始页码，第一部分出现在 LaTex 中？

> ID：501378
> 
> 赞同：62
> 
> 时间：2009-02-01T19:05:41.390
> 
> 标签：latex

这个问题与关于在扉页上有摘要[的帖子有关。](https://stackoverflow.com/questions/501213/how-can-i-have-my-abstract-at-the-titlepage-in-latex)我想在给定部分重置页码。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2009-02-01T22:09:40.083

您还可以重置页码计数器：

```
\setcounter{page}{1} 
```

但是，使用这种技术，您会在 Acrobat 中在左上角的页码字段中得到错误的页码：

```
\maketitle: 1
\tableofcontents: 2
\setcounter{page}{1}
\section{Introduction}: 1
... 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-02-01T19:11:18.557

我用

```
\pagenumbering{roman} 
```

对于 frontmatter 中的所有内容，然后切换到

```
\pagenumbering{arabic} 
```

为实际内容。使用 pdftex，页码直接出现在 PDF 文件中。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2009-02-01T19:26:13.550

要抑制第一页上的页码，`\thispagestyle{empty}`请在`\maketitle`命令后添加。

文档的第二页将被编号为“2”。如果您希望该页编号为“1”，您可以`\pagenumbering{arabic}`在`\clearpage`命令后添加，这将重置页码。

这是一个完整的最小示例：

```
\documentclass[notitlepage]{article}

\title{My Report}
\author{My Name}

\begin{document}
\maketitle
\thispagestyle{empty}

\begin{abstract}
\ldots
\end{abstract}

\clearpage
\pagenumbering{arabic} 

\section{First Section}
\ldots

\end{document} 
```

# mysql - Rails 2.2.2 性能问题/错误

> ID：501404
> 
> 赞同：0
> 
> 时间：2009-02-01T19:17:44.707
> 
> 标签：mysql, ruby-on-rails, performance, debugging

我最近将我的一个应用程序升级到 Rails 2.2.2。完成之后，我遇到了一个奇怪的性能错误，它导致过去在几分之一秒内完成的渲染需要长达 10 秒。

我已经描述了这个问题，[这里是我想出的结果](http://compucatedsolutions.com/~jmc/rails/profile-flat.txt)。看起来问题`real_connect`出在 Mysql 类的方法中。我的理解是 Ruby`real_connect`方法是 C`mysql_real_connect()`函数的包装器。这会让我相信问题一定出在数据库上，因为我在 Windows 和 Linux 上运行代码时遇到了同样的问题（数据库服务器是一个单独的系统）。但是，我不相信会出现这种情况，因为当我从 subversion 存储库回滚到以前的版本（Rails 2.2.2 之前）时，性能问题就消失了。这似乎表明 ActiveRecord 中存在某种错误。

如何识别和修复此错误？有没有人有任何见解？有什么我想念的吗？

**更新：我刚刚创建了一个小型分析器脚本来测试 Mysql.real_connect 方法，看来问题不在于 Rails，而在于 MySQL gem 或数据库服务器本身。**

运行以下代码后：

```
result = RubyProf.profile do
  5.times do
    begin
     # connect to the MySQL server
     dbh = Mysql.real_connect(ip, user, pass, db)
     # get server version string and display it
     puts "Server version: " + dbh.get_server_info
    rescue Mysql::Error => e
     puts "Error code: #{e.errno}"
     puts "Error message: #{e.error}"
     puts "Error SQLSTATE: #{e.sqlstate}" if e.respond_to?("sqlstate")
    ensure
     # disconnect from server
     dbh.close if dbh
    end
  end
end

printer = RubyProf::FlatPrinter.new(result)
printer.print(STDOUT, 0) 
```

我想出了这个性能结果：

```
Server version: 5.0.32-Debian_7etch3-log
Server version: 5.0.32-Debian_7etch3-log
Server version: 5.0.32-Debian_7etch3-log
Server version: 5.0.32-Debian_7etch3-log
Server version: 5.0.32-Debian_7etch3-log
Thread ID: 18998180
Total: 50.402000

 %self     total     self     wait    child    calls  name
 99.99     50.40    50.40     0.00     0.00        5  <Class::Mysql>#real_connect (ruby_runtime:0}
  0.00      0.00     0.00     0.00     0.00       10  IO#write (ruby_runtime:0}
  0.00      0.00     0.00     0.00     0.00        5  Mysql#get_server_info (ruby_runtime:0}
  0.00      0.00     0.00     0.00     0.00        5  Kernel#puts (ruby_runtime: 0}
  0.00      0.00     0.00     0.00     0.00        5  String#+ (ruby_runtime:0}
  0.00      0.00     0.00     0.00     0.00        5  Mysql#initialize (ruby_runtime:0}
  0.00     50.40     0.00     0.00    50.40        1  Integer#times (ruby_runtime:0}
  0.00     50.40     0.00     0.00    50.40        1  Global#[No method] (tmp/mysql_test/test.rb:12}
  0.00      0.00     0.00     0.00     0.00        5  Mysql#close (ruby_runtime: 0} 
```

似乎问题不在 ActiveRecord 中，而在 MySQL gem 或数据库中。我从这里去哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-01T20:25:49.547

我能够找到问题所在。我首先使用我的开发机器上的 MySQL 命令使用命令连接到主机。这非常慢，所以我 ssh 进入服务器，并使用相同的命令从那里连接。这也很慢。`mysql --host=*ip* --user=*user* --password=*password* *db*`

我将命令更改为，并且能够立即连接。我在文件中为我的开发系统添加了一个条目，并且也能够从该条目立即连接。显然 MySQL 服务器正试图执行反向 dns 查找来解析与 IP 地址关联的主机名，如[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/dns.html)中所列，并且超时。`mysql --host=**localhost** --user=*user* --password=*password* *db*``/etc/hosts`

我将`--skip-name-resolve`选项添加到 /etc/init.d/mysql 脚本的开始部分，以便跳过此检查，并重新启动服务器。当我运行之前创建的配置文件脚本时，我得到以下结果：

```
Server version: 5.0.32-Debian_7etch3-log
Server version: 5.0.32-Debian_7etch3-log
Server version: 5.0.32-Debian_7etch3-log
Server version: 5.0.32-Debian_7etch3-log
Server version: 5.0.32-Debian_7etch3-log
Thread ID: 52978590
Total: 0.016000

 %self     total     self     wait    child    calls  name
 87.50      0.01     0.01     0.00     0.00        5  <Class::Mysql>#real_connect (ruby_runtime:0}
  6.25      0.00     0.00     0.00     0.00       10  IO#write (ruby_runtime:0}
  6.25      0.00     0.00     0.00     0.00        5  Mysql#close (ruby_runtime:0}
  0.00      0.00     0.00     0.00     0.00        5  Kernel#puts (ruby_runtime:0}
  0.00      0.00     0.00     0.00     0.00        5  Mysql#initialize (ruby_runtime:0}
  0.00      0.00     0.00     0.00     0.00        5  String#+ (ruby_runtime:0}
  0.00      0.02     0.00     0.00     0.02        1  Global#[No method] (tmp/mysql_test/test.rb:12}
  0.00      0.02     0.00     0.00     0.02        1  Integer#times (ruby_runtime:0}
  0.00      0.00     0.00     0.00     0.00        5  Mysql#get_server_info (ruby_runtime:0} 
```

# perl - 如何为 Perl Web 服务实现服务器端速率限制？

> ID：501405
> 
> 赞同：5
> 
> 时间：2009-02-01T19:17:57.467
> 
> 标签：perl, cgi, throttling

我有一个基于 Perl 的 CGI/Fast CGI Web 服务，并希望通过 IP 地址对客户端进行速率限制，以阻止激进的客户端导致过多的工作。

我四处寻找一些代码并在 CPAN 中找到[Algorithm::TokenBucket](http://search.cpan.org/dist/Algorithm-TokenBucket)但那是针对客户端请求的；它没有持久性，也没有每个用户的配置，因此对于服务器端速率限制并不是很有用。

我正在为已经存在的东西寻找建议，否则我需要基于一些简单的持久性来推出自己的建议，例如绑定到[DB_File](http://search.cpan.org/dist/DB_File) per-IP 地址和一些执行令牌管理的批处理作业。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-01T20:41:31.230

我使用[Cache::FastMmap](http://search.cpan.org/perldoc?Cache::FastMmap)通过跟踪每个 IP 地址的命中来限制速率。它是一个缓存，因此数据会随着时间的推移而过期，但如果您正确设置大小和过期时间，这应该不是问题。

IP 地址是哈希键，哈希值是时间戳数组。我有第二个数据结构（也由[Cache::FastMMap](http://search.cpan.org/perldoc?Cache::FastMmap)支持），它是禁止 IP 地址的哈希，根据第一个结构中的数据进行更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-02T04:06:57.743

我知道这不是您所要求的，但是您是否考虑过在堆栈中已经为您完成的其他地方处理此问题？显然我不知道你的部署堆栈，但如果它是 apache，你可以使用[mod_evasive](http://www.zdziarski.com/projects/mod_evasive/)。或者，如果你在 Linux 上，你可以让 iptables 使用类似的东西来完成它的工作：

```
#Allow only 12 connections per IP
/sbin/iptables -A INPUT -p tcp --dport 80 -m conn-limit --connlimit-above 12 -j REJECT --reject-with tcp-reset 
```

当然更复杂的规则是可能的。

# development-environment - 在恶劣的环境中发展

> ID：501406
> 
> 赞同：3
> 
> 时间：2009-02-01T19:18:13.613
> 
> 标签：development-environment

好吧，不是*那种*敌意。我很想知道人们如何在大型企业网络上进行开发，这些网络要求在桌面上执行各种对开发人员不友好的服务和策略（想想 ProQuota、过分热心的病毒扫描程序、没有本地管理员、无法访问 SO）。我以前使用过有效使用的虚拟 LAN，或完全分离的并行网络，但这些并不总是实用的。还有其他提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-01T19:24:55.173

最重要的事情（如果可能的话）是从你的老板那里获得支持。

除非他是 PHB，否则他通常会了解这些限制对您、您的团队以及间接对他的成功的影响。如果请求是合理的，如果你违背了它，他可以提供缓冲。此外，如果整个团队或其他开发者寻求相同的政策，这种“群体议价能力”可以用来制定特殊政策。

一般来说，大公司对法律问题和信息安全过于热心。但是，IT 部门通常讨厌处理来自同一个人的大量支持请求。有时，如果您对项目的生产力表现出明显的损害（例如，您使用了大量临时文件并且防病毒软件会攻击它们），或者您的程序必须可以从管理员模式安装，它们有时会达成妥协。您可能必须签署一份声明，说明您不会在您的机器上使用管理访问权限来安装非法软件，但您仍然可以获得管理员权限。

在我参加工作面试的少数情况下（我主要在学术界，但在行业中工作过），我最担心的问题之一是我对计算环境的控制程度，从硬件到软件，再到管理权利。如果我不能被信任作为开发人员来管理我自己的 windows 盒子，那么我认为我不应该信任一个关键任务系统。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-01T19:29:33.357

我自己没有尝试过，但我曾经看到有人说中央 IT 让步并让他管理自己的工作站，因为他遵守了政策，向他们提交了一份变更申请表，其中列出了前 300 件事他想在他的工作站上换衣服。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-01T19:31:03.010

任何妨碍你工作的事情都可以在会议上提出。

前任：

*   这个病毒扫描程序在我工作时每天运行 4 次。在那次运行期间，我的编译时间是原来的 5 倍，而且我的其他开发工具的使用也变得非常困难。
*   网络过滤器过分热心。我曾尝试访问站点 x、y 和 z 以获取额外的开发信息，但未能成功。因此，找到好的资源所花费的时间增加了一倍。

等等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-01T20:15:51.797

在（敌对的）规则内工作，放弃，退出并找到更开明的地方或尝试改变组织，你的选择。

如果您决定尝试改变事情，不要单独与 IT 背道而驰，那只会让您成为“麻烦制造者”，而且您将一事无成，请尝试从您的老板和其他开发人员那里获得支持 - 如果您无法获得支持，那么你最好找一份新工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-01T19:56:46.857

我会向你的老板和/或系统管理员解释你的问题，如果他们接受并同意让你控制你的工作站然后问题解决是个好主意，如果不是我会离开项目/工作之前你的试用期结束了。

我曾经在一家大型政府公司遇到过类似的情况，结果管理层不愿意解锁开发人员的盒子只是庞大官僚机构的冰山一角，该项目最终以巨大的失败告终，当我离开时一半的 IT 部门（不仅仅是项目团队）已经离职。

只是我的 2 美分

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-01T20:08:24.633

是的。离开。如果您的组织不愿意为您提供任何普通*专业*程序员都应该能够使用的普通工具，那么是时候提高您的网络技能并更新您的简历了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-01T19:24:49.467

自带笔记本电脑和必要的工具始终是克服这些人为障碍的好方法

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-01T19:32:16.627

带上您自己的笔记本电脑，但不要将其连接到网络（并表明您不打算这样做）。

通过 USB 驱动器复制内容，例如 Visio 图表。

如果他们不允许USB，您可以从外部访问internat 并通过电子邮件发送文件。通过浏览器使用 OWA 有时会赋予您更多发送文件的权限。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-01T20:12:13.253

听起来他们在帮你一个忙。您的代码保证以普通用户身份运行，不会尝试写入程序文件或其他敏感目录，了解病毒扫描程序带来的问题，并且可以处理您通常不会遇到的其他问题，直到在客户端计算机上安装您的应用程序。

至于无法访问 SO，我会退出。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-01T23:16:05.910

我们的工作场所每天都需要进行全面的病毒扫描，所以早上，当我连接上我的笔记本电脑时，我要等 2 个小时才能开始工作。

我终于找到了解决方案。MSVC 6，有一个内置的调试器。我进入任务管理器，选择了 mcaffee 扫描程序进程，并告诉它进行调试。这启动了 msvc6，扫描仪在断点处冻结。我点击重置，问题消失了。大约 6 个月后，他们取消了该政策，一切都很好。

# git - 有 git-merge --dry-run 选项吗？

> ID：501407
> 
> 赞同：880
> 
> 时间：2009-02-01T19:18:26.810
> 
> 标签：git, git-merge

我正在合并一个可能有很多冲突的远程分支。我怎么知道它是否会发生冲突？

我没有看到类似`--dry-run`on的东西`git-merge`。

* * *

## 回答 #1

> 赞同：989
> 
> 时间：2009-02-01T19:57:26.980

如前所述，传入`--no-commit`标志，但为了避免快进提交，还要传入`--no-ff`，如下所示：

```
$ git merge --no-commit --no-ff $BRANCH 
```

要检查分阶段的更改：

```
$ git diff --cached 
```

即使是快进合并，您也可以撤消合并：

```
$ git merge --abort 
```

* * *

## 回答 #2

> 赞同：273
> 
> 时间：2011-06-08T19:04:09.967

我只需要实现一个自动发现存储库与其远程之间冲突的方法。该解决方案在内存中进行合并，因此它不会触及索引，也不会触及工作树。我认为这是解决此问题的最安全的方法。以下是它的工作原理：

1.  获取远程到您的存储库。例如： `git fetch origin master`
2.  运行 git 合并基础：`git merge-base FETCH_HEAD master`
3.  运行git merge-tree：`git merge-tree mergebase master FETCH_HEAD`（*mergebase*是上一步merge-base打印的十六进制id）

现在假设您要将远程 master 与本地 master 合并，但您可以使用任何分支。`git merge-tree`将在内存中执行合并并将结果打印到标准输出。用于模式的 Grep`<<`或`>>`. 或者您可以将输出打印到文件并检查。如果您找到以“两者都已更改”开头的行，那么很可能会发生冲突。

* * *

## 回答 #3

> 赞同：114
> 
> 时间：2011-06-14T06:29:18.293

我假设您只是想在实际尝试合并之前找出自己遇到了多少麻烦......并且在合并失败后重置到最后一次提交相对容易，所以如果那样我不会感到惊讶是预期的方法。

也就是说，如果您真的不想修改工作树中的现有文件 - 您可以创建一个补丁并针对目标分支对其进行测试。这还具有准确显示对哪些文件进行了哪些更改的好处 - 只需在文本编辑器中打开补丁文件即可。

```
git checkout -b mycrazybranch
[change some stuff...]
git add .
git commit -m "changed some stuff"
git format-patch master --stdout > crazy.patch
git checkout master
git apply crazy.patch --check
[all good! cleanup...]
rm crazy.patch 
```

如您所见，这将创建一个补丁文件，然后您可以使用 --check 对其进行测试，看看是否有任何错误，然后删除补丁文件。

* * *

## 回答 #4

> 赞同：83
> 
> 时间：2011-06-13T20:30:44.293

你可以`git merge --abort`在看到有冲突之后再做。

* * *

## 回答 #5

> 赞同：70
> 
> 时间：2012-09-10T04:13:34.077

作为现有答案的总结，有两种方法可以检查是否存在合并冲突

`git format-patch $(git merge-base branch1 branch2)..branch2 --stdout | git apply --3way --check -`

注意，你当前的分支应该是`branch1`当你运行上面的命令时

其他方式：

```
git merge --no-commit branch2
# check the return code here
git merge --abort 
```

* * *

## 回答 #6

> 赞同：61
> 
> 时间：2011-05-16T16:29:30.183

我对此的简单暴力解决方案是：

1.  创建一个“pre-master”分支（当然来自 master）

2.  将您想要的所有东西合并到这个预主中。
    然后你可以在不接触 master 的情况下看到合并是如何发生的。

3.  *   将 pre-master 合并到 master 或
    *   将所有想要发布的分支合并到 master

无论如何，我会听从@orange80 的建议。

* * *

## 回答 #7

> 赞同：50
> 
> 时间：2014-04-18T06:10:08.940

我为此做了一个别名，就像一个魅力，我这样做：

```
 git config --global alias.mergetest '!f(){ git merge --no-commit --no-ff "$1"; git merge --abort; echo "Merge aborted"; };f ' 
```

现在我只是打电话

```
git mergetest <branchname> 
```

找出是否有任何冲突。

* * *

## 回答 #8

> 赞同：49
> 
> 时间：2009-02-01T21:24:46.180

撤消与 git 的合并非常容易，您甚至不必担心空运行：

```
$ git pull $REMOTE $BRANCH
# uh oh, that wasn't right
$ git reset --hard ORIG_HEAD
# all is right with the world 
```

编辑：如以下评论中所述，如果您的工作目录或暂存区有更改，您可能希望在执行上述操作之前将它们隐藏起来（否则它们将在`git reset`上述操作后消失）

* * *

## 回答 #9

> 赞同：29
> 
> 时间：2010-12-10T03:31:39.977

只需将您当前的分支与远程分支进行比较，这将告诉您在执行拉取/合并时会发生什么变化。

```
#see diff between current master and remote branch
git diff master origin/master 
```

* * *

## 回答 #10

> 赞同：24
> 
> 时间：2011-06-13T20:15:46.867

不完全一样。但是您可以使用 --no-commit 选项，因此它不会在合并后自动提交结果。通过这种方式，您可以检查并在需要时撤消合并，而不会弄乱提交树。

* * *

## 回答 #11

> 赞同：23
> 
> 时间：2015-06-26T10:24:45.997

我使用[request-pull](http://git-scm.com/docs/git-request-pull) git 命令来执行此操作。它允许您查看合并时会发生的所有更改，**但无需对本地或远程存储库执行任何操作**。

例如，假设您想将一个名为“feature-x”的分支合并到您的主分支中

```
git request-pull master origin feature-x 
```

将向您展示将要发生的事情的摘要（不做任何事情）：

```
The following changes since commit fc01dde318:
    Layout updates (2015-06-25 11:00:47 +0200)
are available in the git repository at:
    http://fakeurl.com/myrepo.git/ feature-x
for you to fetch changes up to 841d3b41ad:
----------------------------------------------------------------
john (2):
    Adding some layout
    Refactoring
ioserver.js            |   8 +++---
package.json           |   7 +++++-
server.js              |   4 +--
layout/ldkdsd.js       | 277 +++++++++++++++++++++++++++++++++++++
4 files changed, 289 insertions(+), 7 deletions(-)
create mode 100644 layout/ldkdsd.js 
```

如果添加`-p`参数，您还将获得完整的补丁文本，就像您对每个更改的文件执行 git diff 一样。

* * *

## 回答 #12

> 赞同：23
> 
> 时间：2017-09-14T06:32:59.093

我很惊讶还没有人建议使用补丁。

假设您想测试从`your_branch`into的合并`master`（我假设您已经`master`签出）：

```
$ git diff master your_branch > your_branch.patch
$ git apply --check your_branch.patch
$ rm your_branch.patch 
```

这应该够了吧。

如果您收到类似的错误

```
error: patch failed: test.txt:1
error: test.txt: patch does not apply 
```

这意味着补丁不成功，合并会产生冲突。没有输出意味着补丁是干净的，您可以轻松合并分支

* * *

请注意，这实际上**不会**更改您的工作树（当然，除了创建补丁文件，但之后您可以安全地删除它）。从 git-apply 文档：

```
--check
    Instead of applying the patch, see if the patch is applicable to the
    current working tree and/or the index file and detects errors. Turns
    off "apply". 
```

* * *

*任何比我更聪明/更有经验的 git 的人请注意：如果我在这里错了，请告诉我，这种方法确实显示出与常规合并不同的行为。奇怪的是，在这个问题存在 8 年多的时间里，没有人会提出这个看似显而易见的解决方案。*

* * *

## 回答 #13

> 赞同：15
> 
> 时间：2015-06-11T20:10:41.890

Git 在合并时引入了一个 --ff-only 选项。

> 来自： http: [//git-scm.com/docs/git-merge](http://git-scm.com/docs/git-merge)
> 
> * * *
> 
> **--ff-only**
> 
> > 拒绝合并并以非零状态退出，除非当前 HEAD 已经是最新的或者可以将合并解析为快进。

这样做将尝试合并和快进，如果不能，它会中止并提示您无法执行快进，但不会影响您的工作分支。如果它可以快进，那么它将在您的工作分支上执行合并。此选项在 上也可用`git pull`。因此，您可以执行以下操作：

```
git pull --ff-only origin branchA #See if you can pull down and merge branchA

git merge --ff-only branchA branchB #See if you can merge branchA into branchB 
```

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2013-12-17T03:00:21.627

这可能很有趣：从文档中：

> 如果您尝试了导致复杂冲突的合并并想要重新开始，您可以使用**git merge --abort**恢复。

但你也可以用幼稚（但很慢）的方式来做：

```
rm -Rf /tmp/repository
cp -r repository /tmp/
cd /tmp/repository
git merge ...
...if successful, do the real merge. :) 
```

（注意：仅克隆到 /tmp 是行不通的，您需要一份副本，以确保未提交的更改不会发生冲突）。

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2013-07-02T23:20:07.897

我使用 git log 查看来自 master 分支的功能分支发生了什么变化

```
git log does_this_branch..contain_this_branch_changes 
```

例如 - 查看已合并/未合并到 master 的功能分支中的提交：

```
git log master..feature_branch 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2019-12-19T06:25:50.713

我的解决方案是向后合并。

不要将您的分支合并到远程“目标”分支中，而是将该分支合并到您的分支中。

```
git checkout my-branch
git merge origin/target-branch 
```

您将查看是否存在任何冲突，并可以计划如何解决它们。

之后，您可以通过 git 中止合并`merge --abort`，或者（如果没有任何冲突并且发生了合并）通过回滚到先前的提交`git reset --hard HEAD~1`

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2011-02-06T18:01:12.453

如果你想从 B 快进到 A，那么你必须确保 git log B..A 什么都没有显示，即 A 没有 B 没有的任何东西。但是即使 B..A 有一些东西，你仍然可以在没有冲突的情况下合并，所以上面显示了两件事：会有一个快进，因此你不会发生冲突。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2021-12-16T21:54:23.890

我只想查看冲突（在 GitHub 中还看不到它们）*。*`diff3`充分利用[上面的这个答案](https://stackoverflow.com/a/501461/13435966)，我想出了这个：

```
git merge --no-commit --no-ff @{upstream}
git grep -l '<<<<<<< HEAD' | xargs -I % sh -c "echo -e '\n\e[93m%\n---\e[0m' && cat %"
git merge --abort 
```

对我来说，这是为了检查我的 PR。您可以`@{upstream}`用任何分支替换。

我希望这对某人有帮助。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-02-22T13:32:33.477

我知道这在理论上是题外话，但对于从谷歌搜索到这里的人来说，这实际上是非常切题的。

如有疑问，您始终可以使用 Github 界面创建拉取请求并检查它是否表明可以进行干净的合并。

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2015-01-05T17:23:27.877

制作工作副本的临时副本，然后合并到该副本中，并区分两者。

# javascript - JQuery手风琴不隐藏部分

> ID：501409
> 
> 赞同：0
> 
> 时间：2009-02-01T19:19:44.763
> 
> 标签：javascript, jquery

我想将 jQuery 手风琴工具用于我正在构建的表单，所以我使用了 jquery 网站上的一些示例代码，但它根本不起作用！

javascript 什么都不做，所以你只需要渲染 html。我正在使用 1.3.1 版的 jquery 和 1.6rc6 版的 jquery-ui。

```
<head runat="server">
    <script src="/scripts/jquery-1.3.1.js" type="text/javascript"></script>    
    <script src="/scripts/jquery-ui-personalized-1.6rc6" type="text/javascript"></script>
    <title>JQuery Test</title>
</head>
<body>

<div class="demo">

<div id="accordion">
    <div>
        <h3><a href="#">Section 1</a></h3>
        <div>
            <p>
            Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
            ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
            amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
            odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
            </p>
        </div>
    </div>
    <div>
        <h3><a href="#">Section 2</a></h3>
        <div>
            <p>
            Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
            purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
            velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In
            suscipit faucibus urna.
            </p>
        </div>
    </div>
    <div>
        <h3><a href="#">Section 3</a></h3>
        <div>
            <p>
            Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis.
            Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero
            ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis
            lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui.
            </p>
            <ul>
                <li>List item one</li>
                <li>List item two</li>
                <li>List item three</li>
            </ul>
        </div>
    </div>
    <div>
        <h3><a href="#">Section 4</a></h3>
        <div>
            <p>
            Cras dictum. Pellentesque habitant morbi tristique senectus et netus
            et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in
            faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia
            mauris vel est.
            </p>
            <p>
            Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus.
            Class aptent taciti sociosqu ad litora torquent per conubia nostra, per
            inceptos himenaeos.
            </p>
        </div>
    </div>
</div>

</div>

<script type="text/javascript">            
$(document).ready(
        function() {
            $('#accordion').Accordion(
            {
                header: "h3"
            }
      );  
</script>
</body>
</html> 
```

我已经尝试了我能想到的一切并在网上搜寻，但仍然无法让这个简单的演示工作，有人能指出我正确的方向吗？

我使用什么浏览器并不重要，但萤火虫说 $("#accordion").accordion 不是一个函数

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-01T19:31:55.380

The accordion function is all lowercase, you have also one missing parenthesis and one curly brace:

```
$(document).ready(
        function() {
            $('#accordion').accordion(
            {
                header: "h3"
            });
          }
      ); 
```

See your script running [here](http://jsbin.com/ekeja) and if you want to play with your code go [here](http://jsbin.com/ekeja/edit).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T19:23:06.520

您确定 js 引用正确且已加载吗？您是否尝试过使用 firebug 的 js 调试器来进入 jquery 代码来验证这一点？

编辑：对 Accordion 的函数调用不应该是小写的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T19:26:42.847

I did one of these the other day so I know it works. Without trying your code, it's hard to catch the bug. But I think you might be OK if you change "Accordion" to "accordion."

```
 $('#accordion').Accordion(
        {
            header: "h3"
        } 
```

# .net - 如何在 Visual Studio Web Developer 2008 SP1 中使用 ASP.NET MVC RC？

> ID：501411
> 
> 赞同：0
> 
> 时间：2009-02-01T19:20:35.760
> 
> 标签：.net, asp.net-mvc, vwdexpress

当我转到文件 > 新网站时，没有 MVC 模板。我用谷歌搜索“如何将 MVC 与 vwd 一起使用？” 这些链接出现了

[http://geekswithblogs.net/jwhitehorn/archive/2007/12/10/117569.aspx](http://geekswithblogs.net/jwhitehorn/archive/2007/12/10/117569.aspx)
[http://jerusahat.wordpress.com/2007/12/12/aspnet-mvc-template-for-visual-web-developer -2008-express/](http://jerusahat.wordpress.com/2007/12/12/aspnet-mvc-template-for-visual-web-developer-2008-express/)
[http://www.lazycoder.com/weblog/2007/12/10/using-the-aspnet-mvc-framework-with-visual-web-developer-express/](http://www.lazycoder.com/weblog/2007/12/10/using-the-aspnet-mvc-framework-with-visual-web-developer-express/)

但它们似乎都不起作用。我只是得到程序集引用错误，并且在连接了程序集后我得到：

错误 1“System.Web.Routing.Route”不包含采用“0”参数的构造函数

错误 2 无法隐式转换类型“AnonymousType#1”

错误 3 无法将类型“System.Type”隐式转换为“System.Web.Routing.IRouteHandler”。

等等...

VWD2008 是否与 ASP.NET MVC 兼容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-06T17:56:44.817

您还需要安装 sp1。

如果您确实安装了 vwd express 2008 sp1，那么当我第一次在 vwd 菜单中查找 MVC 时，您可能会遇到同样的问题。

尝试转到“工具”->“导入和导出设置”，然后“重置所有设置”。

之后，您需要创建一个新项目并选择 MVC 模板。（不要创建新网站）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T19:25:57.730

是的，我确信它**与**ASP.NET MVC 兼容。

您只需将程序集添加到`bin`文件夹并编辑`Web.config`和`Global.asax`文件。

从一个空的普通 ASP.NET 站点开始（不是模板中的站点，因为我没有测试过它们）。将程序集添加到`bin`并...

`Web.config`应该看起来像：

```
<?xml version="1.0"?>

<configuration>

  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>

  <appSettings/>

  <system.web>

    <compilation debug="false">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Web.Abstractions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>

    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>

      <namespaces>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="System.Linq"/>
        <add namespace="System.Collections.Generic"/>
      </namespaces>
    </pages>

    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
      <add verb="*" path="*.mvc" validate="false" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpHandlers>

    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpModules>

  </system.web>

  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4"
                type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>

      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4"
                type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="OptionInfer" value="true"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>

  <system.web.extensions/>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>

    <modules runAllManagedModulesForAllRequests="true">
      <remove name="ScriptModule" />
      <remove name="UrlRoutingModule" />
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </modules>

    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <remove name="ScriptHandlerFactory" />
      <remove name="ScriptHandlerFactoryAppServices" />
      <remove name="ScriptResource" />
      <remove name="MvcHttpHandler" />
      <remove name="UrlRoutingHandler" />
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode"
           type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode"
           type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="MvcHttpHandler" preCondition="integratedMode" verb="*" path="*.mvc" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </handlers>
  </system.webServer>

</configuration> 
```

Global.asax 应包含以下内容：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default",                                              // Route name
        "{controller}/{action}/{id}",                           // URL with parameters
        new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
    );

}

protected void Application_Start()
{
    RegisterRoutes(RouteTable.Routes);
} 
```

`Default.aspx``Page_Load`如果您使用的是 IIS7 Classic 或 IIS6 或更低版本，则应在代码中包含此内容：

```
public void Page_Load(object sender, System.EventArgs e)
{
    HttpContext.Current.RewritePath(Request.ApplicationPath, false);
    IHttpHandler httpHandler = new MvcHttpHandler();
    httpHandler.ProcessRequest(HttpContext.Current);
} 
```

你应该有一个看起来像这样的`Views`文件夹：`Web.config`

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <httpHandlers>
      <add path="*" verb="*"
          type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>
    <pages
     validateRequest="false"
     pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
     pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
     userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <remove name="BlockViewHandler"/>
      <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler"/>
    </handlers>
  </system.webServer>
</configuration> 
```

将视图放在`Views`. 他们应该继承自`System.Web.Mvc.ViewPage`. 将控制器放在`Controllers`名称空间中，类名以 . 结尾`Controller`。

这应该可以完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T20:28:27.840

但是您确实安装了 asp.net mvc rc1（[链接](http://www.microsoft.com/downloads/details.aspx?FamilyID=f4e4ee26-4bc5-41ed-80c9-261336b2a5b6&displaylang=en)），对吗？在 vs 2008（至少专业版）中，要获取 asp.net mvc 的模板，您必须首先安装 asp.net mvc。如果您确实安装了它，那么没关系（我问是因为您写道您看不到模板）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-24T03:08:50.573

确保在安装 ASP.NET MVC 之前安装 Web Developer 2008 Express SP1。

我使用Web Platforum Installer同时安装了两者，我去创建新项目时没有出现ASP.NET MVC。我卸载了 ASP.NET MVC 然后再次安装它，然后它出现在 New Project 菜单中。

# java - 为什么自动装箱会使 Java 中的某些调用模棱两可？

> ID：501412
> 
> 赞同：35
> 
> 时间：2009-02-01T19:20:47.570
> 
> 标签：java, compiler-construction, overloading, autoboxing

我今天注意到自动装箱有时会导致方法重载解析的歧义。最简单的例子似乎是这样的：

```
public class Test {
    static void f(Object a, boolean b) {}
    static void f(Object a, Object b) {}

    static void m(int a, boolean b) { f(a,b); }
} 
```

编译时，它会导致以下错误：

```
Test.java:5: reference to f is ambiguous, both method
    f(java.lang.Object,boolean) in Test and method
    f(java.lang.Object,java.lang.Object) in Test match

static void m(int a, boolean b) { f(a, b); }
                                  ^ 
```

此错误的修复很简单：只需使用显式自动装箱：

```
static void m(int a, boolean b) { f((Object)a, b); } 
```

它按预期正确调用了第一个重载。

那么为什么重载解析失败了呢？为什么编译器不自动装箱第一个参数，并正常接受第二个参数？为什么我必须明确要求自动装箱？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-02-01T19:47:31.137

当您自己将第一个参数转换为 Object 时，编译器将匹配该方法而不使用自动装箱（JLS3 15.12.2）：

> 第一阶段（第 15.12.2.2 节）执行重载决议，不允许装箱或拆箱转换，或使用变量 arity 方法调用。如果在此阶段没有找到适用的方法，则处理继续到第二阶段。

如果你不显式地强制转换，它会进入第二阶段，试图找到一个匹配的方法，允许自动装箱，然后它确实是模棱两可的，因为你的第二个参数可以通过 boolean 或 Object 来匹配。

> 第二阶段（第 15.12.2.3 节）执行重载决议，同时允许装箱和拆箱，但仍排除使用变量 arity 方法调用。

为什么在第二阶段，编译器不选择第二种方法，因为不需要对布尔参数进行自动装箱？因为在找到这两种匹配方法后，仅使用子类型转换来确定这两种方法中最具体的方法，而不管最初为匹配它们而发生的任何装箱或拆箱（第 15.12.2.5 节）。

另外：编译器不能总是根据需要的自动（取消）装箱次数选择最具体的方法。它仍然可能导致模棱两可的情况。例如，这仍然是模棱两可的：

```
public class Test {
    static void f(Object a, boolean b) {}
    static void f(int a, Object b) {}

    static void m(int a, boolean b) { f(a, b); } // ambiguous
} 
```

请记住，用于选择匹配方法的算法（编译时步骤 2）是固定的并在 JLS 中进行了描述。一旦进入第 2 阶段，就没有选择性的自动装箱或拆箱。编译器将找到*所有*可访问的方法（在这些情况下都是方法）和适用的方法（同样是两种方法），然后才选择最具体的方法，而不查看装箱/拆箱，这在此处是模棱两可的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-01T19:38:39.390

编译器*确实*自动装箱了第一个参数。一旦完成，第二个参数就是模棱两可的，因为它可以被视为布尔值或对象。

[本页](http://jcp.org/aboutJava/communityprocess/jsr/tiger/autoboxing.html)解释了自动装箱和选择调用哪个方法的规则。编译器首先尝试在*不使用任何自动装箱的情况下*选择方法，因为装箱和拆箱会带来性能损失。如果在不使用装箱的情况下无法选择任何方法，就像在这种情况下，那么对于该方法的*所有*参数，装箱都在桌面上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-01T19:36:59.083

当您说**f(a, b** ) 时，编译器会混淆它应该引用哪个函数。

这是因为**a**是**int**，但**f**中预期的参数是 Object。因此编译器决定将**a**转换为 Object。现在的问题是，如果**a**可以转换为对象，那么**b**也可以。

这意味着函数调用可以引用任一定义。这使得调用模棱两可。

当您手动将**a**转换为 Object 时，编译器只会查找最接近的匹配项，然后引用它。

> 为什么编译器没有选择通过“尽可能少地进行装箱/拆箱转换”可以达到的功能？

请看以下案例：

```
f(boolean a, Object b)
f(Object a , boolean b) 
```

如果我们像**f(boolean a, boolean b)**这样调用，它应该选择哪个函数？模棱两可吧？同样，当存在大量参数时，这将变得更加复杂。所以编译器选择给你一个警告。

由于无法知道程序员真正打算调用哪一个函数，因此编译器会报错。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-01T19:35:59.600

> 那么为什么重载解析失败了呢？为什么编译器不自动装箱第一个参数，并正常接受第二个参数？为什么我必须明确要求自动装箱？

它通常不接受第二个参数。请记住，“布尔值”也可以装箱为对象。您也可以将布尔参数显式转换为 Object 并且它会起作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-01T19:46:06.037

请参阅[http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#20448](http://java.sun.com/docs/books/jls/third_edition/html/expressions.html#20448)

演员表有帮助，因为这样就不需要装箱来找到要调用的方法。如果没有演员表，第二次尝试是允许装箱，然后布尔值也可以装箱。

最好有清晰易懂的规格说明会发生什么，而不是让人们猜测。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-31T21:42:12.090

Java 编译器分阶段解析重载的方法和构造函数。在第一阶段 [§15.12.2.2]，它通过子类型 [§4.10] 确定适用的方法。在此示例中，这两种方法都不适用，因为 int 不是 Object 的子类型。

在第二阶段 [§15.12.2.3] 中，编译器通过方法调用转换 [§5.3] 识别适用的方法，这是自动装箱和子类型化的组合。对于这两种重载，int 参数都可以转换为 Integer，它是 Object 的子类型。boolean 参数对于第一个重载不需要转换，并且可以转换为 Boolean，Object 的子类型，对于第二个。因此，这两种方法都适用于第二阶段。

由于不止一种方法适用，编译器必须确定哪种方法最具体[§15.12.2.5]。它比较参数类型，而不是参数类型，并且不会自动装箱。Object 和 boolean 是不相关的类型，因此它们被认为是同样特定的。两种方法都不比另一种更具体，因此方法调用是模棱两可的。

解决歧义的一种方法是将布尔参数更改为布尔类型，它是 Object 的子类型。第一个重载总是比第二个更具体（如果适用）。

# php - 在 Moodle 中集成 iCalendar

> ID：501431
> 
> 赞同：2
> 
> 时间：2009-02-01T19:29:55.227
> 
> 标签：php, icalendar, moodle

我正在做一个 Moodle 项目，我已经在我的系统上下载并安装了最新的 build(1.9)。我是第一次使用这个框架，所以目前正在尝试熟悉环境和文档。

我需要使用 PHP iCalendar API 在 Moodle 的首页嵌入一个 iCal 日历。我下载了最新版本的 PHP iCalendar，但需要一些帮助才能进一步解决问题。我正在尝试构建一个插件类的东西，它允许您在您的 Moodle 网站上放置一个定制的日历（代替常规的 Moodle 日历）。

以前有人用过类似的东西吗？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-17T19:04:48.913

On moodle.org, there is a change request for this feature in the Moodle Tracker that you might want to follow:

[Calendar: IMPORT or Subscribe to iCal feed into Moodle calendar](http://tracker.moodle.org/browse/MDL-16660) .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-02T15:09:55.470

此功能目前是 Moodle 中的功能请求，但可能需要多个版本才能成为核心功能，请参阅此处的功能请求[http://tracker.moodle.org/browse/MDL-16660](http://tracker.moodle.org/browse/MDL-16660)。

当前的解决方法似乎是使用一种常用的基于 Web 的日历系统来导入您的 ical 提要，然后将 html 片段插入到 moodle 中以查看它。

最明显的例子是使用公共 Google 日历来执行此操作，但也有： http: [//assignaday.4teachers.org/](http://assignaday.4teachers.org/)
[http://www.localendar.com/elsie](http://www.localendar.com/elsie)

参考： http://moodle.org/mod/forum/discuss.php?d= [82855](http://moodle.org/mod/forum/discuss.php?d=82855)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-01T16:57:43.270

您可以尝试查看模块开发文本。这可能很容易做到，但我并没有真正与moodle合作过。[http://moodle.org/](http://docs.moodle.org/en/Development:Blocks)

# java - 替换Java字符串中的正则表达式，其中包含` `符号

> ID：501435
> 
> 赞同：0
> 
> 时间：2009-02-01T19:33:12.180
> 
> 标签：java, regex, replace

我必须通过java替换这个xml字符串的内容

```
<My:tag>value_1 22&#xA;value_2 54&#xA;value_3 11</My:tag> 
```

所以，这个字符串是从一个 xml 中获取的，当我获取它时，我得到了这个结果：

```
<My:tag>value_1 22
value_2 54
value_3 11</My:tag> 
```

如果我尝试通过这种方式替换内容：

```
String regex =  "(<My:tag>)(.*)(</My:tag>)";
String new_string = old_string.replaceAll(regex,"<My:tag> new_stuff </My:tag>"); 
```

我没有结果。我认为是因为`&#xA;`符号

但是如果我尝试替换没有`&#xA;`符号的字符串，一切都会好起来的。

建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-01T19:53:10.280

我不是 100% 确定 java regex-engine 是如何工作的，但我无法想象一个实体会导致你的问题。您应该首先尝试简单地删除括号，因为您要替换整个表达式，而不是提取任何内容。

但是，可能导致它的原因是，如果您的实体实际上被转换为换行符，则除非您明确进行多行匹配，否则您的正则表达式可能无法捕获它。你也可以尝试做

```
[.\n]* 
```

而不是你的

```
.* 
```

不过，这可能是一个贪婪的竞标，并且回溯到很多匹配器来处理。不幸的是，我没有在这台机器上安装任何 java 的东西，所以我不能真正尝试和测试它。另一种可能性是积极寻找下一个开口尖括号，如下所示：

```
[^<]* 
```

**编辑：**
正如你所建议的，我尝试了你的链接，以下工作完美：

表达：

```
<My:tag>[^<]*</My:tag> 
```

替换：

```
<My:tag> new_stuff </My:tag> 
```

测试字符串：

```
<My:tag>value_1 22&#xA;value_2 54&#xA;value_3 11</My:tag> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T20:11:09.310

我不明白为什么它`&#xA;`本身会导致任何问题——除非它在某个时候被转换为实际的换行符。

如果是这种情况，您需要启用 DOTALL 模式，以便 . 也匹配换行符（默认情况下不匹配）。

要启用 DOTALL，只需从表达式开始`(?s)`
（如果您创建了一个 Pattern 对象，您也可以将标志传递给它。）

无论如何，试试这个：

```
String regex =  "(?s)(?<=<(My:tag)>).*?(?=</\1>)";
String new_string = old_string.replaceAll(regex,"new_stuff"); 
```

`(?s:`*您还可以使用regex-segment*为正则表达式 的特定部分启用它，`)`例如：

```
String regex =  "(?<=<(My:tag)>)(?s:.*?)(?=</\1>)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T19:40:39.760

我建议使用[JDOM](http://www.jdom.org/)或[DOM4J](http://www.dom4j.org/)之类的 XML 库来操作 XML，而不是使用正则表达式。

# database - TClientdataset 参数无效错误

> ID：501448
> 
> 赞同：5
> 
> 时间：2009-02-01T19:44:45.697
> 
> 标签：database, delphi, tclientdataset

在 TClientDataSet 组件中调用 CreateDataSet 方法时出现“无效参数错误”的原因是什么。是什么导致了这个错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2011-11-16T07:08:58.787

当您有一个 ftString 数据类型字段并且其大小为零或未提供时，它也可能导致此类错误。我已尝试为数据集创建 fieldef，但尚未指定字符串字段的大小。我最终遇到了同样的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-01T19:54:19.140

瑞安，

你在使用 ftGuid 字段吗？如果是这样，您必须手动将字段的大小设置为 38。

问候，利文

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-07-10T22:49:31.203

Lieven 正确地指出，在创建与它们关联的 ClientDataSet（使用 CreateDataSet）之前，某些 TField 有不同的需求，就它们的属性而言。但是 TGuid 字段并不是唯一的。

如果您在确定哪个字段导致问题时遇到问题，请注释掉除一个之外的所有字段类型，例如 TStringField，然后尝试创建 ClientDataSet。如果第一组没有问题，请转到下一组。它可以像 BDC（二进制编码的十进制）字段一样简单，或者更奇特的东西。

一旦您找到了存在导致错误的字段类型，请使用帮助并确保您只包含对该字段类型有意义的属性。

此外，这也可能是由于 TIndexDef 中的参数无效。例如，TIndexDef 实例不支持 ixExpression 索引，即使 IndexDef 集合编辑器允许您设置此选项。

祝你好运...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-13T00:08:13.220

我遇到了同样的麻烦，没有明显的原因..然后我偶然发现了。切换到文本视图并切换回表单设计器中的表单视图 (alt+f10) 现在再试一次。它为我工作了好几次。我认为一个错误会导致这种情况，并且随着组件的重新创建它会消失..

# c# - 在c#中格式化日期

> ID：501460
> 
> 赞同：18
> 
> 时间：2009-02-01T19:57:24.190
> 
> 标签：c#, .net, datetime, formatting

如何将日期格式化为`dd/mm/yyyy`or `mm/dd/yy`？

就像在 VB 中一样`format("dd/mm/yy",now)`

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-02-01T20:00:11.483

几乎一样，只要使用`DateTime.ToString()`方法，例如：

```
DateTime.Now.ToString("dd/MM/yy"); 
```

或者：

```
DateTime dt = GetDate(); // GetDate() returns some date
dt.ToString("dd/MM/yy"); 
```

此外，您可能需要考虑使用其中一种预定义的日期/时间格式，例如：

```
DateTime.Now.ToString("g");
// returns "02/01/2009 9:07 PM" for en-US
// or "01.02.2009 21:07" for de-CH 
```

这些确保格式正确，与当前的区域设置无关。

查看以下 MSDN 页面以获取更多信息

*   [DateTime.ToString() 方法](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)
*   [标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)
*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

一些额外的相关信息：

如果你想在特定的语言环境/文化中显示日期，那么有一个`ToString()`方法的重载，它需要一个`IFormatProvider`：

```
DateTime dt = GetDate();
dt.ToString("g", new CultureInfo("en-US")); // returns "5/26/2009 10:39 PM"
dt.ToString("g", new CultureInfo("de-CH")); // returns "26.05.2009 22:39" 
```

或者，您可以`CultureInfo`在格式化日期之前设置当前线程：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
dt.ToString("g"); // returns "5/26/2009 10:39 PM"

Thread.CurrentThread.CurrentCulture = new CultureInfo("de-CH");
dt.ToString("g"); // returns "26.05.2009 22:39" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-01T20:00:53.713

```
string.Format("{0:dd/MM/yyyy}", DateTime.Now) 
```

在 MSDN 上查找“格式字符串”以查看所有格式选项。

使用`yy`, `yyyy`, `M`, `MM`, `MMM`, `MMMM`, `d`, `dd`, `ddd`,`dddd`作为日期组件

使用`h`, `hh`, `H`, `HH`, `m`, `mm`, `s`,`ss`作为时间组件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-01T20:01:06.973

尝试这个 ：

```
String.Format("{0:MM/dd/yyyy}", DateTime.Now); // 01/31/2009
String.Format("{0:dd/MM/yyyy}", DateTime.Now); // 31/01/2009
String.Format("{dd/MM/yyyy}", DateTime.Now); // 31/01/2009 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-01T20:04:53.970

在你也可以写

```
DateTime aDate = new DateTime(); 
string s = aDate.ToShortDateString(); 
```

简而言之

或者

```
DateTime aDate = new DateTime(); 
string s = aDate.ToLongDateString(); 
```

对于像“2009 年 2 月 1 日星期日”这样的长符号。

或查看[MSDN](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)以了解 .ToString("???"); 的可能性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-01T20:06:35.857

更好的是，只使用

```
DateTime.Now.ToString() 
```

或者

```
DateTime.Now.ToString(CultureInfo.CurrentCulture) 
```

使用用户喜欢的格式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-06T09:14:47.630

我认为这很简单，因为您可以在没有任何混淆的情况下转换为任何格式

```
 DateTime.ParseExact(txt.Text, "dd/MM/yyyy", CultureInfo.InvariantCulture).ToString("yyyy/MM/dd")); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-06T16:51:32.467

我遇到了同样的问题。我需要做的是在类的顶部添加一个引用并更改当前正在执行的线程的 CultureInfo。

```
using System.Threading;

string cultureName = "fr-CA";
Thread.CurrentThread.CurrentCulture = new CultureInfo(cultureName);

DateTime theDate = new DateTime(2015, 11, 06);
theDate.ToString("g");
Console.WriteLine(theDate); 
```

您所要做的就是更改文化名称，例如：“en-US” = 美国 “fr-FR” = 讲法语的法国 “fr-CA” = 讲法语的加拿大等...

# c# - 安排代表电话

> ID：501463
> 
> 赞同：1
> 
> 时间：2009-02-01T19:58:22.020
> 
> 标签：c#, .net, scheduling

我想要一种能够安排回调的方法，我希望能够在不同时间向“调度程序”对象注册许多不同的回调。像这样的东西。

```
public class Foo
{
    public void Bar()
    {
        Scheduler s = new Scheduler();
        s.Schedule(() => Debug.WriteLine("Hello in an hour!"), DateTime.Now.AddHours(1));
        s.Schedule(() => Debug.WriteLine("Hello a week later!"), DateTime.Now.AddDays(7));
    }
} 
```

我能想出的实现调度程序的最佳方法是以给定的间隔在内部运行一个计时器，每次间隔过去时，我都会检查注册的回调，看看是否是时候调用它们了，如果是的话。这很简单，但缺点是您只能获得计时器的“分辨率”。假设计时器设置为每秒滴答一次，并且您注册了一个要在半秒内调用的回调，它仍然可能不会在一秒钟内被调用。

有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T20:04:29.213

这是一个很好的方法。您应该动态设置计时器，使其在下一个事件发生时立即关闭。您可以通过将作业放入优先级队列中来做到这一点。毕竟，在任何情况下，您**总是受限于系统可以提供的分辨率**，但您应该编写代码，使其成为**唯一**的限制因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T20:05:22.363

一个很好的方法是改变你的计时器的持续时间：告诉它在你的第一个/下一个预定事件到期时（但不是之前）关闭。

`<`*关于 Windows 不是实时操作系统的标准免责声明，因此它的计时器必须总是有点不准确*`>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T20:05:36.200

您只需要调度程序在列表中最早的项目到期时唤醒并执行某些操作。之后，您设置计时器以在下次唤醒调度程序。

添加新项目时，您只需将其计划与当前正在等待的计划进行比较。如果它更早，您取消当前计时器并将新项目设置为下一个计划项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T20:09:10.657

这是我为此编写的一个类，它使用 .NET 的内置 Timer 类。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace Sample
{
    /// <summary>
    /// Use to run a cron job on a timer
    /// </summary>
    public class CronJob
    {
        private VoidHandler cronJobDelegate;
        private DateTime? start;
        private TimeSpan startTimeSpan;
        private TimeSpan Interval { get; set; }

        private Timer timer;

        /// <summary>
        /// Constructor for a cron job
        /// </summary>
        /// <param name="cronJobDelegate">The delegate that will perform the task</param>
        /// <param name="start">When the cron job will start. If null, defaults to now</param>
        /// <param name="interval">How long between each execution of the task</param>
        public CronJob(VoidHandler cronJobDelegate, DateTime? start, TimeSpan interval)
        {
            if (cronJobDelegate == null)
            {
                throw new ArgumentNullException("Cron job delegate cannot be null");
            }

            this.cronJobDelegate = cronJobDelegate;
            this.Interval = interval;

            this.start = start;
            this.startTimeSpan = DateTime.Now.Subtract(this.start ?? DateTime.Now);

            this.timer = new Timer(TimerElapsed, this, Timeout.Infinite, Timeout.Infinite);
        }

        /// <summary>
        /// Start the cron job
        /// </summary>
        public void Start()
        {
            this.timer.Change(this.startTimeSpan, this.Interval);
        }

        /// <summary>
        /// Stop the cron job
        /// </summary>
        public void Stop()
        {
            this.timer.Change(Timeout.Infinite, Timeout.Infinite);
        }

        protected static void TimerElapsed(object state)
        {
            CronJob cronJob = (CronJob) state;
            cronJob.cronJobDelegate.Invoke();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-06T22:26:23.267

[Quartz.Net](http://quartznet.sourceforge.net/)作业调度程序。但是，这会安排课程而不是代表。

# c# - 有什么好的 SharpNEAT 教程吗？

> ID：501465
> 
> 赞同：7
> 
> 时间：2009-02-01T19:59:54.823
> 
> 标签：c#, neural-network, neat

[SharpNEAT](http://sharpneat.sourceforge.net/index.htm)是C#[中的增强拓扑](http://en.wikipedia.org/wiki/NeuroEvolution_of_Augmented_Topologies)(NEAT) 库的 NeuroEvolution。

整个事情听起来很令人兴奋，但我在任何地方都找不到该死的样本/教程！

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2010-07-17T23:31:33.883

我刚刚为 SharpNEAT 2 写了一个教程：[http ://www.nashcoding.com/?p=90](http://www.nashcoding.com/?p=90)

至少还有两个后续，涵盖共同进化和 HyperNEAT，但第 1 部分足以处理大多数实验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-12T14:54:06.690

我没有尝试过 SharpNEAT，但我玩过一些 java 变体。我真的不知道那里有任何教程，其中大多数只是太简单的 XOR 函数。

是否有您要解决的特定问题/问题？也许我们可以集思广益（公平地说，我在 NEAT 方面也相对较新，但也许两个头脑比一个头脑更好？:-)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-12T21:25:20.400

不，现在还没有，但是如果您查看源代码和一些现有的实验，那么希望问题域是如何实现并插入到主要的神经进化“引擎”中的相当明显。不过，我已经注意到了这一点。

您可能还对版本 2 重写感兴趣，目前处于预 alpha 阶段，但源代码可从Sharpneat 网站（新闻/发布部分）获得。

# c++ - 让 GDB 保存断点列表

> ID：501486
> 
> 赞同：141
> 
> 时间：2009-02-01T20:09:18.987
> 
> 标签：c++, c, debugging, gdb, breakpoints

好的，*[info break](https://sourceware.org/gdb/onlinedocs/gdb/Set-Breaks.html)*列出了断点，但不是以一种可以很好地使用 --command 重用它们的格式，[如在这个问题](https://stackoverflow.com/questions/500967/gdb-breakpoints)中。GDB 是否有一种方法可以将它们转储到可以再次输入的文件中？有时在调试会话中，需要在建立一组断点后重新启动 GDB 以进行测试。

.gdbinit 文件与 --command 有相同的问题。*info break*命令没有列出命令，而是一个供人类使用的表格。

详细地说，这里是*info break*的一个示例：

```
(gdb) 信息中断
Num 类型 Disp Enb 地址 什么
1个断点保持y 0x08048517 <foo::bar(void)+7>

```

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2010-10-21T03:51:19.677

从 GDB 7.2 (2011-08-23) 开始，您现在可以使用*[save breakpoints](https://sourceware.org/gdb/onlinedocs/gdb/Save-Breakpoints.html)*命令。

```
save breakpoints <filename>
  Save all current breakpoint definitions to a file suitable for use
  in a later debugging session.  To read the saved breakpoint
  definitions, use the `source' command. 
```

用于[`source <filename>`](https://sourceware.org/gdb/onlinedocs/gdb/Command-Files.html)从文件中恢复保存的断点。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-02-01T20:39:38.067

***这个答案已经过时了。GDB 现在支持直接保存。看到[这个答案](https://stackoverflow.com/a/3984156/331858)。***

您可以使用日志记录：

```
(gdb) b main
Breakpoint 1 at 0x8049329
(gdb) info break
Num     Type           Disp Enb Address    What
1       breakpoint     keep y   0x08049329 <main+16>
(gdb) set logging file breaks.txt
(gdb) set logging on
Copying output to breaks.txt.
(gdb) info break
Num     Type           Disp Enb Address    What
1       breakpoint     keep y   0x08049329 <main+16>
(gdb) q 
```

文件breaks.txt 现在包含：

```
Num     Type           Disp Enb Address    What
1       breakpoint     keep y   0x08049329 <main+16> 
```

编写一个 AWK 脚本将其转换为对文件`.gdbinit`或`--command`文件有用的格式很容易。或者你甚至可以让脚本`--eval-command`向 GDB 命令行发出单独的 's ......

将这个小宏添加到[.gdbinit](https://sourceware.org/gdb/onlinedocs/gdb/gdbinit-man.html)将帮助您做到这一点：

```
# Call with dump_breaks file.txt
define dump_breaks
    set logging file $arg0
    set logging redirect on
    set logging on
    info breakpoints
    set logging off
    set logging redirect off
end 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-02-01T20:18:57.657

将 GDB 命令和断点放在[.gdbinit 文件](https://sourceware.org/gdb/onlinedocs/gdb/gdbinit-man.html)中，就像在提示符下键入它们一样`gdb>`，GDB 将在启动时自动加载并运行它们。这是一个按目录的文件，因此您可以为不同的项目使用不同的文件。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2010-05-27T13:35:37.083

[anon](https://stackoverflow.com/questions/501486/getting-gdb-to-save-a-list-of-breakpoints/2233182#2233182)对[Johannes 的回答](https://stackoverflow.com/questions/501486/getting-gdb-to-save-a-list-of-breakpoints/501530#501530)的扩展：

```
.gdbinit:

define bsave
    shell rm -f brestore.txt
    set logging file brestore.txt
    set logging on
    info break
    set logging off
    # Reformat on-the-fly to a valid GDB command file
    shell perl -n -e 'print "break $1\n" if /^\d+.+?(\S+)$/g' brestore.txt > brestore.gdb
end
document bsave
  store actual breakpoints
end

define brestore
  source brestore.gdb
end
document brestore
  restore breakpoints saved by bsave
end 
```

`brestore`然后，您可以恢复使用`bsave`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2010-02-09T23:03:09.530

[对Johannes 答案的](https://stackoverflow.com/questions/501486/getting-gdb-to-save-a-list-of-breakpoints/501530#501530)扩展：您可以自动将输出重新格式化`info break`为有效的 GDB 命令文件：

```
.gdbinit:

define bsave
   shell rm -f brestore.txt
   set logging file brestore.txt
   set logging on
   info break
   set logging off
   # Reformat on-the-fly to a valid gdb command file
   shell perl -n -e 'print "break $1\n" if /^\d+.+?(\S+)$/g' brestore.txt > brestore.gdb
end
document bsave
  store actual breakpoints
end 
```

之后，您在`brestore.gdb`.

当应用程序使用`-g`.

我还在[Ubuntu 9.10](https://en.wikipedia.org/wiki/Ubuntu_version_history#Ubuntu_9.10_.28Karmic_Koala.29) (Karmic Koala) 上使用 GDB v6.8 成功测试了它。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-08-27T08:00:58.197

将以下内容放入[~/.gdbinit](https://sourceware.org/gdb/onlinedocs/gdb/gdbinit-man.html)以将*bsave*和*brestore*定义为 GDB 命令以保存和恢复断点。

```
define bsave
    save breakpoints ~/.breakpoints
end

define brestore
   source ~/.breakpoints
end 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-07-19T14:10:45.797

也许是这样：

[`save breakpoints [filename]`](http://sourceware.org/gdb/current/onlinedocs/gdb/Save-Breakpoints.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-10-04T10:57:41.150

我发现对先前答案的以下补充对于将断点保存/加载到特定文件很有用。

*   保存断点：bsave {filename}
*   加载断点：bload {filename}

与上一个答案一样，将以下代码添加到文件 ~/.gdbinit

```
# Save breakpoints to a file
define bsave
    if $argc != 1
        help bsave
    else
    save breakpoints $arg0
    end
end
document bsave
Saves all current defined breakpoints to the defined file in the PWD
Usage: bsave <filename>
end

# Loads breakpoints from a file
define bload
    if $argc != 1
        help bload
    else
        source $arg0
    end
end
document bload
Loads all breakpoints from the defined file in the PWD
Usage: bload <filename>
end 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-08-09T12:14:11.150

> 警告：当前输出协议不支持重定向

[尝试在TUI](https://sourceware.org/gdb/onlinedocs/gdb/TUI.html)模式下启用日志记录时，我也在 GDB 中收到此错误/警告。但是，日志记录似乎在“非 TUI”模式下工作。所以每当我想记录一些东西时，我都会离开 TUI 模式。**`Ctrl`（使用+`X`**、**`Ctrl`+`A`**来回切换到 TUI 模式）。

这是我的工作方式：

1.  启动 GDB（在正常模式下）
2.  启用日志记录：`set logging on`- 现在它不应该抱怨了。
3.  来回切换到 TUI 模式并执行 GDB 操作
4.  每当我想记录一些东西（比如一个巨大的回溯转储）时——切换到正常模式

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-10-28T20:52:07.387

问题是设置断点是上下文相关的。如果您有两个名为*foo*的静态函数怎么办？

如果您已经在调试定义 foo 的模块之一，那么 GDB 将假定您的意思是那个。但是，如果您只是将“break foo”转储到一个文件中，然后在启动时读取该文件，则不清楚您指的是哪个函数*foo 。*

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-07-01T15:14:01.227

还有其他想法吗？我有

```
warning: Current output protocol does not support redirection 
```

后

```
set logging on 
```

**编辑：**

我知道这个问题是“如何保存断点列表”，但是我刚刚发现，使用 GDB，我们可以简单地设置“保存在文件中”的断点

```
gdb> source breakpoints.txt 
```

`breakpoints.txt`像这样的文件在哪里：

```
break main.cpp:25
break engine.cpp:465
break wheel.cpp:57 
```

# iphone - 以编程方式拍摄视图/WebView 的快照

> ID：501496
> 
> 赞同：1
> 
> 时间：2009-02-01T20:14:46.197
> 
> 标签：iphone, view, webview, image, snapshot

我想拍摄一个视图（WebView）的快照，或者，如果不可能的话，整个屏幕，所以我可以将它保存到用户的照片库中。我想知道这是否可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-01T20:23:10.750

要获取图像，您需要使用：

```
UIGraphicsBeginImageContext(self.bounds.size);

[theView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

然后，保存到照片库：

```
UIImageWriteToSavedPhotosAlbum(viewImage,nil,NULL,NULL); 
```

# php - PHP Bootstrapping 更好的方法？

> ID：501505
> 
> 赞同：3
> 
> 时间：2009-02-01T20:23:07.257
> 
> 标签：php, bootstrapping

引导您的 PHP 应用程序是一个好习惯吗？我找到了两种方法来引导我的 PHP 应用程序。需要一些建议，这是一个更好的方法。

**第一的。**
为文件夹结构定义一个常量

```
$controllerPath = 'controller';
define('CONTROLLER', str_replace('\\', '/', realpath($controllerPath)).'/');

//usage
require_once CONTROLLER . 'somecontroller.php'; 
```

**其次**
使用 ini_set 将包含路径设置为应用程序根目录

```
$rootPath = $_SERVER['DOCUMENT_ROOT'];
$includePath = ini_get('include_path');
ini_set('include_path', '.'.PATH_SEPARATOR.$rootPath.PATH_SEPARATOR.$includePath);

//usage
require_once 'controller/somecontroller.php'; 
```

请告诉我哪种方法更好。

**在高负载应用程序的情况下，这将是最好的方法？？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-01T20:29:03.830

使用 ini_set 将其设置到您的应用程序的目录之上。这就是为什么您可以在 require 语句中使用文字字符串的原因。此外，它使重用代码更容易使用

```
require 'coolapp/class/Model.php'
require 'coolapp/display/Router.php'
require 'spinoff/display/JsView.php'
// etc 
```

它类似于 java 中完全限定导入的想法`com.whatever.app.more`，或者在 python 中，所有应用程序的导入对于该应用程序来说应该是绝对的。

回复：**高负载应用**

除非您要加载数千个文件，否则包含文件所需的时间可能不是瓶颈。但是，如果是这种情况，您有几个选择。一种是 APC，它将结果缓存`include`在内存中。另一种方法是从单个文件加载所有内容，类似于如何将 javascript 文件连接成一个文件以获得更好的性能（巧合的是，APC 有一个功能可以为您提供此信息）。APC 非常易于设置并且完全透明，可将[性能提升约 50%](http://www.whitewashing.de/blog/articles/73)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-01T20:58:28.183

最好使用绝对路径，而不是让 PHP 在给定的包含路径之一中查找文件。

所以我倾向于第一种方式，使用一个常量来保存应用程序根的绝对路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T21:05:45.410

这就是我所做的：

*   将 /include 目录放在文档根目录（或任何您想调用的目录）的顶部，用于所有类、辅助函数等；
*   使其不使用 mod_rewrite 提供 /include 目录；
*   在那里有一个名为 setup.php 的文件，它设置相关的 ini 参数、路径等；
*   该文件通过相对路径包含在每个页面中；和
*   然后，其他一切都可以依赖于它创建的设置。

顶级 .htaccess 的示例重写规则：

```
RewriteEngine On
RewriteBase /
RewriteCond %{THE_REQUEST} ^[A-Z]+\ /include/
RewriteRule ^include/ - [R=404,L] 
```

我可能有点走神了。我手头没有我的标准规则。您会注意到这是我创建的 404 错误，而不是 403（禁止）。这是故意的。当您登录到系统时，它不会说“未知用户”或“密码不正确”，因为这会告诉您一些信息。我宁愿假装根本没有 /include 目录，也不愿说它在那里，但你就是看不到它。

那时您可以设置所有您需要的东西，以便您的其余代码可以执行以下操作：

```
require 'Class.php'; 
```

甚至定义一个`__autoload()`它会自动发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-01T21:06:18.417

这是我的引导加载程序的示例：

```
if (!defined('APPLICATION_PATH')) {
    define('APPLICATION_PATH', realpath(getcwd() . '/../application'));
}

/**
 * Add the APPLICATION_PATH and the library dir to the include_path
 */
set_include_path(get_include_path() . PATH_SEPARATOR . APPLICATION_PATH . PATH_SEPARATOR . realpath(APPLICATION_PATH . '/../library'));

/**
 * Load the file loader to setup the class autoloader
 */
include_once 'Loader.php';
if (!class_exists('Loader')) {
    die('Could not load class loader.');
}

spl_autoload_register('Loader::autoload'); 
```

我个人会选择第二种方式。我学会了喜欢 include_path：查看大量目录可能会对性能造成一些影响，但我怀疑这会很重要。它还可以防止错误忘记包含路径常量。

在旁注中，我将我的控制器等放在 . 中`/application/`，并在`/library/`. 这一切都在网络根目录之上。它完全阻止用户访问这些文件，如果您将所有内容都放在文档根目录下，则必须采取预防措施。如果您的主机支持此功能（某些共享主机不支持），请利用它！

### 更新

> 在高负载应用程序的情况下，使用第二种方法是否很好？

在我看来，如果你要密切关注你的内容`include_path`（例如，在我的 Windows 开发机器上，我有各种我不需要的东西：SQL Server、Ruby 等）并且要去掉任何不需要的东西需要，那么第二种方法就可以了。

您可以做的另一件事是`include_path`在脚本末尾转储 并将其硬编码到您的 php.ini 文件中。

不过，真的。我认为这不会成为您系统性能的瓶颈。使用对您来说更容易的东西。

您在运行的网站上是否存在性能问题，或者这是预防措施？我明白你为什么要预先优化（我必须阻止自己这样做），但要认真。当它们出现时处理这些问题。当您幸运地拥有一个受欢迎的网站来处理它时。归根结底，如果您必须更换几个`require`s，这不是一场噩梦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-01T21:02:28.317

我更喜欢第二种方式——在一个大型 PHP 项目中使用它并且非常喜欢它。

# c# - 您如何映射也是 NHibernate hbm xml（或 fluent-nhibernate 类映射）中的主键的组件？

> ID：501507
> 
> 赞同：3
> 
> 时间：2009-02-01T20:25:16.783
> 
> 标签：c#, .net, nhibernate, fluent-nhibernate, nhibernate-mapping

我试图弄清楚如何将组件映射为 nhibernate 中的主键，如果可能的话，也可以在流利的 nhibernate 中映射。

有问题的组件是一组独特的 3d 坐标，这是对象：

```
public class SpaceLocation
{
    public virtual SpaceCoordinate Coordinates { get; set; }
    public virtual SpaceObject AtLocation { get; set; }
} 
```

SpaceCoordinate 是一个结构体，定义如下：

```
public struct SpaceCoordinate
{
    public int x { get; set; }
    public int y { get; set; }
    public int z { get; set; }
} 
```

在流利的 nhibernate 中使 SpaceCoordinate 成为一个组件，我将创建一个像这样的映射类：

```
public class SpaceLocationMap : ClassMapWithGenerator<SpaceLocation>
{
    public SpaceLocationMap()
    {
        References(x => x.AtLocation);
        Component<SpaceCoordinate>(x => x.Coordinates, m =>
        {
            m.Map(x => x.x);
            m.Map(x => x.y);
            m.Map(x => x.z);
        }).Unique();
    }
} 
```

但我想知道的是如何使 SpaceCoordinate 组件作为一个整体成为具有唯一约束的主键。我将如何在 Nhibernate xml 或流利的 nhibernate 类映射中映射它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-02T00:55:11.467

我相信除非你在 NHibernate 主干上运行，否则你不能这样做。`unique`on 属性`component`直到 2.0 发布后才添加；所以除非有办法解决这个问题，否则我认为这是不可能的。

您是否能够将字段映射为[复合 ID](http://www.nhforge.org/doc/nh/en/index.html#mapping-declaration-compositeid)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-11-23T13:36:46.363

现在应该可以使用

```
public class SpaceLocationMap : ClassMap<SpaceLocation>
{
    public SpaceLocationMap()
    {
        CompositeId(x => x.Coordinates)
            .KeyProperty(x => x.x)
            .KeyProperty(x => x.y)
            .KeyProperty(x => x.z);

        References(x => x.AtLocation);
    }
} 
```

# java - 如何使接缝 POJO 会话无效

> ID：501511
> 
> 赞同：1
> 
> 时间：2009-02-01T20:26:21.573
> 
> 标签：java, jsf, seam, pojo

我正在玩一个具有会话范围的小接缝应用程序。最后一种方法是作为邮件发送。发送邮件后如何使会话无效？现在，当用户再次调用初始 url 时，会话仍然存在，并且之前填写的所有表单数据仍然存在。

我找到了如何使用对话和 ejb 来做到这一点的示例，但没有使用 POJO 和会话。

谢谢，罗里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-23T16:30:49.697

根据[ISASI 的回答](https://stackoverflow.com/questions/501511/how-to-invalidate-seam-pojo-session/501618#501618)，您可以使用此代码使会话无效：

```
Session.instance().invalidate(); 
```

回答您的后续“问题”（奇怪的是，您将其添加为答案）。要在通知用户成功后关闭会话，您可以创建一个“确认”页面并根据与“成功”结果相关的规则重定向到该页面。然后创建一个页面操作来使会话无效。

```
<page view-id="/process/confirm.xhtml" action="#{emailManager.completeSession}"> 
```

从技术上讲，会话将在呈现页面之前关闭，因此可能会在访问会话数据方面产生时间问题，因此您可能需要修改页面参数以进行补偿。这是因为您基本上通过使用每封电子邮件的会话来“错误”地执行此操作。使用对话会更好，因为有一个 @End 注释可以在呈现视图后结束对话 - 更容易。

一旦您的应用程序涉及多个任务，您将需要切换到使用对话，因为任务之间的任何状态都将丢失。我想这会很快发生。这些时间和状态管理问题是 Seam 对话旨在解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T21:26:04.977

Session.instance().invalidate();

# javascript - hover() 和 click() 不能一起玩

> ID：501513
> 
> 赞同：0
> 
> 时间：2009-02-01T20:27:16.873
> 
> 标签：javascript, jquery

给定以下代码，悬停功能可以正常工作，但是单击时会丢失`clicked_no_event_box`类。不知道我要去哪里错...

```
/* On document.ready.. */ $(function(){

        $(".no_event_box").hover(
            function(){$(this).addClass("clicked_no_event_box");}, 
            function(){$(this).removeClass("clicked_no_event_box");}    
        );      

        $(".no_event_box").click(
            function () {$(this).addClass("clicked_no_event_box");}
        );

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T20:30:31.547

它完全按照您的指示工作。如果你想让类坚持你可以在css中为该类名添加一个别名。

```
.clicked_no_event_box, .new_name_to_be_used_in_click_function {
    /* definition */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T14:25:24.467

由于该`hover`功能会移除类，因此即使您单击，也可以在单击后解除悬停功能的绑定。

```
$('.no_event_box').hover(
    function() {
        $(this).addClass('clicked_no_event_box');
    }, function() {
        $(this).removeClass('clicked_no_event_box');
    }
).click(function() {
    $(this)
        .addClass('clicked_no_event_box')
        .unbind('hover')
    ;
}); 
```

# xcode - 如何在 Xcode 3 中重命名 XIB/NIB 文件？

> ID：501520
> 
> 赞同：2
> 
> 时间：2009-02-01T20:31:07.180
> 
> 标签：xcode, refactoring

如何在 Xcode 中重命名 XIB/NIB 文件？没有“重构”选项，右键单击并选择“重命名”无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T20:46:43.247

配置文件`Info.plist`包含主 XIB 文件的名称。更改相关属性以匹配新名称应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-07-11T13:56:54.867

如果您重命名主窗口，您可以更改 Info.plist 中的文件引用。

否则，在编辑器中打开主窗口 XIB 文件，并更改以下变量：`<string key="IBUINibName">`和`</string>`

# c# - 在进程终止时释放资源

> ID：501523
> 
> 赞同：6
> 
> 时间：2009-02-01T20:32:03.213
> 
> 标签：c#, .net, process, kill-process

当进程被任务管理器杀死时，我如何释放资源？有没有办法在进程关闭之前调用函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-01T21:06:10.150

如果你的进程被杀死，你真的无能为力。根据定义，杀死一个进程就是——杀死它。该进程没有机会运行任何代码。这是非常“设计”的。

想象一下，您可以注册一个在您的进程被用户（或另一个进程）杀死时调用的例程。它会做什么？您进程中的所有其他线程都将处于不确定状态，您将如何与它们同步？请记住，这个想法是需要终止进程。

另一种情况更难：你的代码是良性的，并且试图做正确的事情——例如清理并成为一个好的系统公民。有些代码不是。想象一下，如果操作系统允许为被杀死的进程运行代码，这对恶意软件作者来说将是多么大的福音。对于以标准用户权限运行的恶意进程来说，这已经够糟糕的了，而对于任何以管理权限运行的恶意进程来说都是非常糟糕的。

关键的最终确定和结构化的异常处理不会解决这个基本问题。

从好的方面来说，当你的进程被杀死时，操作系统将释放它所知道的所有资源，即内存和内核对象。那些不会泄漏。但是资源管理器不了解您的流程，因此无法对其进行清理。

解决此问题的一种方法是拥有一个监视进程来跟踪您的其他进程状态并进行清理。您可以通过简单的流程或服务来做到这一点。您还可以考虑某种外壳扩展，它有自己的线程来做同样的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-01T21:26:04.930

在即将被调用终止的进程（`TerminateProcess`例如任务管理器）或其他进程实用程序（例如 TSKILL 或 TASKKILL）中，无法在终止时执行任意代码。

关键终结器，普通终结器，try/finally 块，当然不仅仅是实现的对象都不会`IDisposable`导致代码在这种情况下执行。即使是 DLL 分离事件也不会通过`TerminateProcess`.

您可以做的最好的事情是使用一个看门狗进程来监视您的原始进程并在原始进程终止时执行相关代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T20:35:08.043

理论上，操作系统应该在进程被杀死后释放资源。您特别考虑哪种资源？

* * *

**编辑：**

> 好吧，解释起来有点棘手。我正在使用一个包装一些操作系统功能的库来管理一些外壳扩展。当应用程序关闭而没有显式调用适当的方法时，所有资源管理器都会冻结，我需要重新启动它。

任何非托管 DLL（根据文档）都应该通过`DLL_PROCESS_DETACH`事件调用；但是，`DLL_PROCESS_DETACH`当进程通过`TerminateProcess`API 终止时，不会调用此事件。

谷歌搜索[这些术语](http://www.google.com/search?&q=terminateprocess+DLL_PROCESS_DETACH)出现了[旧的新事物：你为什么不能捕获 TerminateProcess？](http://blogs.msdn.com/oldnewthing/archive/2004/07/22/191123.aspx) 上面写着，“**一旦你用 TerminateProcess 终止，就不会再在该进程中运行用户模式代码了。它消失了。** ”

因为您尝试使用的所有内容（即.NET、Explorer、Shell、COM）都是在用户模式下发生的，所以我认为答案是没有办法做您想做的事。

相反，也许还有另一种方法：例如，通过将代码添加到您的 Shell 扩展，以便它们知道您的进程是否异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T20:52:24.063

您可以尝试将整个过程包装在 try/finally 语句中（您将释放的内容放在 finally 子句中），但在某些情况下，这还不够。

实际上，我认为你可以从你的进程中启动一个后台线程来做所有的事情，然后用你的主线程 Thread.Join() ，这样如果子线程出现问题，主线程仍然能够把事情做好. 当然，如果整个过程由于某种原因终止，这将不起作用。

您也可以启动一个子进程并调用 Process.WaitForExit() 但我不确定您的 shell 相关的东西是否可以与多进程方法一起使用。

# java - Java - 用一个函数处理多个事件？

> ID：501533
> 
> 赞同：2
> 
> 时间：2009-02-01T20:42:47.467
> 
> 标签：java, user-interface, binding, event-handling, events

首先，我是一个完整的Java NOOB。

我想用一个功能处理多个按钮按下，并根据单击的按钮执行某些操作。我正在使用 Netbeans，并添加了一个具有绑定功能的事件。默认情况下，该函数会发送一个 ActionEvent。

如何获取被单击的对象以从该函数中触发绑定函数，以便我知道要追求哪个功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-01T20:51:43.860

发送事件的对象是事件源，所以 evt.getSource() 会告诉你。但是，最好为单独的事件设置单独的处理程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-01T20:52:28.197

调用`getSource()`ActionEvent 的方法。例如：

```
public void actionPerformed(ActionEvent e) {
    Object source = e.getSource();
    // 'source' now contains the object clicked on.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T21:24:40.910

仅当所有这些按钮按下执行*完全相同的事情时，才使用一个功能（**方法*）处理多个按钮按下。

 *即使在这种情况下，也有一个私有方法，并在任何需要的地方调用这个私有方法。

为不同的按钮编写单独的事件处理程序并不难。在最简单的情况下，编写匿名处理程序，如下所示：

```
aButton.addActionListener(new java.awt.event.ActionListener()
    {
        public void actionPerformed(ActionEvent ae)
        {
            myMethod();
        }
    }); 
```

在更复杂的场景中，编写一个单独的类来扩展`ActionListener`并在`addActionListener()`上面的调用中使用它。

这并不难，易于维护和扩展，并且比单一`actionPerformed`的要好。

(In NetBeans, right click on the button(s), Events->Action->actionPerformed, the code is generated for you)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T20:52:40.303

如果您使用 AWT 事件，则 ActionEvent 支持 getSource() 方法，该方法将为您提供应该生成事件的对象。

话虽如此，还有更好的设计，其中每个对象都实例化自己的事件处理程序

# iphone - iPhone 应用程序的内部版本控制

> ID：501546
> 
> 赞同：3
> 
> 时间：2009-02-01T20:51:20.493
> 
> 标签：iphone, plist

除了使用“Bundle Version”和“Bundle Version short string”之外，是否有人对如何对 iphone 应用程序进行版本控制有任何建议。我发现很难依靠这些值来控制我的应用程序 b/c 我有同一个应用程序的多个变体（精简版、付费版）。此外，iTunes connect 的当前实现不允许您在设置更新后更改其版本号，因此如果您决定用新的二进制文件替换更新，您将使用与开始时相同的版本号。

我正在考虑将键值对添加到 info.plist 文件中，但我不确定是否允许我将新的键值对添加到 info.plist 中。我能想到的另一种选择是为应用设置创建自己的 plist。

如果有更好的方法来实现这一点，我愿意听取他们的意见。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-01T20:58:56.827

您绝对可以将自己的键/值对添加到 info.plist。确保为密钥添加前缀，以帮助确保您的密钥不会与任何 Apple 使用的密钥发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T22:34:18.617

我的应用程序的每个版本都有自己的 Info.plist 文件，它们在 xcode 中共享相同的代码库，使用多个目标进行构建。他们都可以通过这种方式使用“捆绑版本”设置拥有自己的版本号。

这是有关设置的帖子和教程：

[http://www.codza.com/free-iphone-app-version-from-the-same-xcode-project](http://www.codza.com/free-iphone-app-version-from-the-same-xcode-project)

我认为您可以将自己的密钥添加到 Info.plist（该文件未与您的应用程序捆绑在一起），但我不明白为什么这比使用已经存在的“捆绑版本”密钥更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T23:51:04.233

在这种情况下，针对[此问题](https://stackoverflow.com/questions/458632/how-can-my-iphone-app-detect-its-own-version-number)讨论的某些项目可能对您有用。

# erlang - 优雅地终止 Erlang 服务器或 fsm？

> ID：501577
> 
> 赞同：1
> 
> 时间：2009-02-01T21:06:15.063
> 
> 标签：erlang

我有一个具有 gen_fsm 行为的模块。现在我通过在适当的状态/消息中返回标准 {stop, Reason, State} 来终止它。

它似乎正确终止，但在运行时被认为是错误。

这是正常的吗？有没有办法停止 fsm 进程而不会被视为错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T22:27:36.273

返回值是 {stop,Reason,StateData} 而不是 {stop,StateName,StateData}。

如果原因不是正常或关闭，则会生成错误报告。对于服务器的正常退出，请使用 normal，当服务器被其主管要求退出时使用关闭。

（现在编辑已添加错误详细信息。）

`gen_fsm`正在打电话`client_fsm:terminate(normal, loggedin, {state,#Port<0.144>,12345,"Bob"})`

这会导致 function_clause 异常（该函数存在，但没有子句可以与这些参数匹配）。如果您进行更改`client_fsm:terminate/3`以使该调用成功，则该错误应该消失。

# python - 如何在 Vim 中使用 Python？

> ID：501585
> 
> 赞同：52
> 
> 时间：2009-02-01T21:10:02.123
> 
> 标签：python, vim

我在 Vim 和 Python 之间浪费了很多时间。我发现手动从 Python 复制粘贴到 Vim 太慢，反之亦然。一个很好的例子是：

> %!python for i in xrange(25); 打印 6*i \n

你怎么能在 Vim 中直接做这样的调整呢？ **[解决了]**

**[澄清]** 我需要 Vim 的东西，比如打印序列，算术...... - 我在 Vim 中做不到的事情。

**[?]**有人可以详细说明这一点：“您的脚本可以从标准输入读取以直接对给定的行进行操作*(., %, ...)。* ”

**[进一步澄清]**

如果我想将“Hello”打印到第 4,5、6 和 7 行，有什么问题：

> :4-7!python -c "打印'你好'"

点。修改当前行。我可以在多行 7、32 和 99 上打印：

> :7,32,99!python -c“打印‘你好’”

显然不工作。如何？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2009-02-01T22:17:12.457

在任何 vim 窗口中，输入如下内容：

```
for x in range(1,10):
    print '-> %d' % x 
```

可视地选择这两条线（V 启动可视模式），然后键入以下内容：

```
:!python 
```

因为您在可视模式下按了“：”，所以最终看起来像：

```
:'<,'>!python 
```

点击回车，选择被`print`语句的输出替换。您可以轻松地将其转换为映射：

```
:vnoremap <f5> :!python<CR> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-01T23:00:46.207

> 有人可以详细说明这一点：“您的脚本可以从标准输入读取以直接对给定的行进行操作（。，％，...）。”

一种常见用途是使用 shell 中可用的“排序”命令对文本行进行排序。例如，您可以使用以下命令对整个文件进行排序：

```
:%!sort 
```

或者，您可以通过在可视模式下选择几行然后键入：

```
:!sort 
```

您可以使用以下命令对第 5-10 行进行排序：

```
:5,10!sort 
```

您可以编写自己的命令行脚本（假设您知道如何执行此操作）来反转文本行。它是这样工作的：

```
bash$ myreverse 'hello world!'
!dlrow olleh 
```

您可以以与您使用的方式完全相同的方式将其应用于您在 vim 中打开的文件之一`sort`：

```
:%!myreverse      <- all lines in your file are reversed 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-01T21:21:47.280

从您的示例中，您似乎想要执行 Python 脚本并将脚本的输出显示在当前 Vim 缓冲区中。如果正确，那么您可以在 Vim 的命令行中执行以下操作：

```
%!python -c "for i in xrange(25): print 6*i" 
```

给它一个运行脚本的`-c`选项。`python`但是，您可能会发现这种技术仅在非常短的情况下有用，因为与其他一些语言不同，Python 不适合在一行上编写完整的程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-08-13T22:55:18.123

我不确定它们的用处，也许可以进一步阅读：

*   [Python 和 vim：Sean Reifschneider（高级）的两种完美结合](http://www.tummy.com/Community/Presentations/vimpython-20070225/vim.html)
*   [Python 和 vim：制作自己的 IDE](http://dancingpenguinsoflight.com/2009/02/python-and-vim-make-your-own-ide/)
*   [用于 python 的 Vim 自定义](http://www.cmdln.org/2008/10/18/vim-customization-for-python/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-01T21:27:04.523

我认为你不只是错过了`-c`旗帜。例如：

```
:.!python -c "print 'hello'" 
```

您不应该将您提供的脚本用作行选择的过滤器。也就是说，您的脚本可以读取`stdin`并直接对给定的行进行操作 ( `.`, `%`, ...)。然而，除了最简单的任务之外，您最好将 python 命令放入它自己的脚本文件中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-01-11T16:46:02.830

您可以执行代码，读取光标上的输出并以 结束`u`，假设您正在执行 python 代码。简单快捷。

```
:r !python %

u 
```

我喜欢它而不是映射和选择视觉模式，就像[too-much-php](https://stackoverflow.com/questions/501585/how-can-you-use-python-in-vim/501698#501698)一样，因为它使基础保持简单！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-18T01:01:46.690

我刚刚编写了以下模块，可让您直接在 Python 解释器中编辑 vim 中的临时缓冲区。

[http://philipbjorge.github.com/EditREPL/](http://philipbjorge.github.com/EditREPL/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-09T11:54:10.267

如果您在新的 [No Name] 缓冲区中编写了 python 脚本，那么您可以使用以下内容：

```
:0,$!python 
```

当你有一个无名缓冲区时，你不能使用'%'，因此需要 0,$，这意味着缓冲区中的所有行都从第 0 行开始，直到最后一行

输出将被写入缓冲区，不幸的是不在最后

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-01T23:17:23.973

> 如果我想将“Hello”打印到第 4,5、6 和 7 行，有什么问题：

如果您想在整个文件中随机选择的位置执行某些操作，最好记录击键并重放它们。转到您要更改的第一行，然后点击`qz`开始录制到 register `z`。对该行进行任何您想要的编辑，并`q`在完成后再次点击。转到您要更改的下一行，然后按`@z`重播宏。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-03T12:41:55.627

如果您想在不使用 python 解释器编译 vim 的情况下进行一些 python 调用（这将允许您在 Python 中编写插件，而且无论如何 Omnicomplete 也需要它），您可以尝试如下：

```
:.!python -c "import os; print os.getcwd()" 
```

这将告诉您您在驱动器中的位置（当前路径）。

现在让我们从一个空文件开始编号几行，以便我们可以轻松查看结果：

```
:.!python -c "for i in range(1,101): print i" 
```

（vim 从 1 开始编号行而不是 0）现在我们只有每行中每行的编号，直到第 100 行。

现在让我们在当前路径中放置一个小脚本（如上所示）并运行它，看看它是如何工作的。让我们复制粘贴这个愚蠢的。实际上，您会发现执行每行输出一行的脚本最有用，但您不必这样做，因为此脚本显示：

```
print "hi"

try:
    while True:
        i=raw_input()
        print "this was:",i
except EOFError:
    print "bye" 
```

例如，您可以调用（假设您将其称为“what.py”）：

:10,20!python what.py

（请注意，文件名的制表符完成工作，因此您可以验证它实际上在路径中）

如您所见，每一行都作为标准输入提供给脚本。首先它输出“hi”，最后输出“bye”，中间输出“this was:”的每一行加上该行。这样您就可以逐行处理。请注意，您可以做比逐行处理更复杂的事情，您实际上可以考虑以前的行。对于这样的东西，我宁愿导入 sys 并这样做：

```
import sys

print "hello"

for i in sys.stdin.readlines():
    i = i.rstrip("\n") # you can also prevent print from doing \n instead
    print "here lyeth",i

print "see you" 
```

希望有帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-04T22:18:09.833

我想你真正想要的是解释[here](http://vim.wikia.com/wiki/Execute_Python_from_within_current_file)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-08-09T12:28:55.200

在 Windows 上，如果您正在编辑 python 脚本，只需执行以下操作：

```
!start python my... 
```

并按`tab`循环可用的文件名，直到找到匹配项：

```
!start python myscript.py 
```

它将在新`cmd`窗口中运行。就我个人而言，我更喜欢这样做`!start cmd`并从那里运行 Python，因为它更容易从最终的错误消息中进行调试。

# java - 返回在Java中作为反向文本输入的字符串

> ID：501588
> 
> 赞同：5
> 
> 时间：2009-02-01T21:14:18.260
> 
> 标签：java, string

我正在尝试创建一个以相反顺序返回一串单词的方法。

IE/“The rain in Spain大多落在”将返回：“the on most fall Spain in rain The”

为此，我不应该只使用基本 Java 的任何内置 Java 类。

到目前为止，我有：

```
 lastSpace = stringIn.length(); 

    for (int i = stringIn.length() - 1; i >= 0; i--){
        chIn = stringIn.charAt(i);
        if (chIn == ' '){
            word = stringIn.substring(i + 1, lastSpace);
            stringOut.concat(word);
            lastS = i;
        }
    }
    word = stringIn.substring(0,lastSpace);
    stringOut.concat(word);

    return stringOut; 
```

我的问题是当`stringOut`返回给它的调用者时它总是一个空白字符串。

难道我做错了什么？也许我的使用`string.concat()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-01T21:16:43.467

在Java 中，字符串是不可变的，即不能更改。concat() 返回一个带有连接的新字符串。所以你想要这样的东西：

```
stringOut = stringOut.concat(word); 
```

或者

```
stringOut += word 
```

正如 Ray 所指出的，虽然有更简洁的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-01T21:38:01.910

```
public String reverseWords(String words)
{
  if(words == null || words.isEmpty() || !words.contains(" "))
    return words;

  String reversed = "";
  for(String word : words.split(" "))
    reversed = word + " " + reversed;

  return reversed.trim();
} 
```

仅使用的 API 是字符串（在操作字符串时应该允许...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T21:18:15.493

如果你使用 String 类的 indexOf 方法，而不是那个循环来查找每个空间，你会做得更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T21:18:08.097

那是因为您需要将 concat 的返回分配给某些东西：

```
stringOut=stringOut.concat(word) 
```

Java（和 .net）中的字符串是不可变的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T15:59:41.483

```
public String reverseString(String originalString)
     {
     String reverseString="";
     String substring[]=originalString.split(" ");// at least one space between this double                      //quotes

    for(int i=(substring.length-1);i>=0;i--)
        {
        reverseString = reverseString + substring[i];
        }

      return sreverseString;
     } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-02-01T21:31:17.167

我想编码，所以你去：

```
 import java.util.*;

class ReverseBuffer {
    private StringBuilder soFar;
    public ReverseBuffer() {
        soFar = new StringBuilder();
    }

    public void add(char ch) {
        soFar.append(ch);
    }

    public String getReversedString() {
        String str = soFar.toString();
        soFar.setLength(0);
        return str;
    }
}

public class Reverso {
    public static String[] getReversedWords(String sentence) {
        ArrayList < String > strings = new ArrayList < String >();
        ReverseBuffer rb = new ReverseBuffer();
        for(int i = 0;i < sentence.length();i++) {
            char current = sentence.charAt(i);
            if(current == ' ') {
                strings.add(rb.getReversedString());
            }
            else {
                rb.add(current);
            }
        }
        strings.add(rb.getReversedString());
        Collections.reverse(strings);
        return (String[])strings.toArray(new String[0]);
    }

    public static void main(String[] args) {
        String cSentence = "The rain in Spain falls mostly on the";
        String words[] = Reverso.getReversedWords(cSentence);
        for(String word : words) {
            System.out.println(word);
        }
    }
} 
```

编辑：必须在循环后再次调用 getReversedString 。

希望这可以帮助 ！

# python - 如何在 Gnome（使用 distutils 或 setuptools）中分发 Python 包的“.desktop”文件和图标？

> ID：501597
> 
> 赞同：10
> 
> 时间：2009-02-01T21:18:01.077
> 
> 标签：python, packaging, setuptools, gnome, distutils2

目前我正在使用自动工具来构建/安装和打包我的项目，但我真的很想转向感觉更“pythonic”的东西。

我的项目由两个脚本、一个模块、两个 glade GUI 描述和两个 .desktop 文件组成。它目前是一个纯 python 项目，尽管这可能很快就会改变。

查看 setuptools 我可以轻松了解如何处理除 .desktop 文件之外的所有内容；它们必须最终位于特定目录中，以便 Gnome 可以找到它们。

开始使用 distuils/setuptools 是个好主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-09T09:03:00.360

**我设法让它工作，但对我来说它更像是一种*解决方法*。**

不知道处理此问题的首选方法是什么...

我使用了以下`setup.py`文件（完整版在[这里](https://gist.github.com/brutus/e4bdb1d2c1705558b2ff)）：

```
from setuptools import setup

setup(
  # ...
  data_files=[
    ('share/icons/hicolor/scalable/apps', ['data/mypackage.svg']),
    ('share/applications', ['data/mypackage.desktop'])
  ],
  entry_points={
    'console_scripts': ['startit=mypackage.cli:run']
  }
) 
```

启动脚本槽`entry_points`有效。但是`data_files`放置在一个鸡蛋文件而不是指定的文件夹中，因此桌面外壳无法访问它们。

**为了解决这个问题，我使用了以下`setup.cfg`文件：**

```
[install]
single-version-externally-managed=1
record=install.txt 
```

这行得通。这两个数据文件都是在正确的位置创建的，并且`.desktop`文件被 Gnome 识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T21:31:36.697

一般来说，是的——在构建 Python 项目时，一切都比自动工具好。

到目前为止，我在 setuptools 方面有很好的经验。但是，将文件安装到固定位置并不是 setuptools 的强项——毕竟，它不是为 Python 应用程序构建安装程序，而是分发 Python 库。

对于不是应用程序数据文件（如图像、UI 文件等）但提供与操作系统集成的文件的安装，您最好使用真正的打包格式（如 RPM 或 deb）。

也就是说，没有什么能阻止您使用基于 setuptools 的构建过程和一个用于将所有内容安装到正确位置的小型 make 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-18T20:02:37.477

您可以尝试使用[python-distutils-extra](https://launchpad.net/python-distutils-extra)。该`DistUtilsExtra.auto`模块自动 [支持](http://bazaar.launchpad.net/~python-distutils-extra-hackers/python-distutils-extra/debian/annotate/head:/doc/README).desktop 文件，以及 Glade/GtkBuilder .ui 文件、Python 模块和脚本、misc 数据文件等。

它应该适用于 Distutils 和 Setuptools。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-26T19:57:46.390

我创建了[https://pypi.python.org/pypi/install-freedesktop](https://pypi.python.org/pypi/install-freedesktop)。它为 gui_scripts 入口点自动创建 .desktop 文件，可以通过 setup 参数进行自定义，并支持`--user`系统范围的安装。与 相比`DistUtilsExtra`，它的范围更窄，恕我直言，更 Pythonic（显式优于隐式）。

# c# - 如何使用 onclick 事件发送值？

> ID：501603
> 
> 赞同：1
> 
> 时间：2009-02-01T21:21:14.487
> 
> 标签：c#, .net, asp.net, events, imagebutton

我有以下按钮

```
 <asp:ImageButton ID="button1" runat="server" 
   ImageUrl="~/image.jpg"
   CommandName = "id"
   CommandArgument = "1"
   onclick="button1_Click"
   /> 
```

在后面的代码中

```
protected void button1_Click(object sender, ImageClickEventArgs e)
{
    Response.Write(e.commandName);
} 
```

这不起作用！！，所以我的问题是如何从按钮控件中获取价值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-01T21:24:23.000

为此，您需要订阅[Command 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.command.aspx)而不是 Click 事件。这在遵循ASP.NET中的[命令模式时使用](http://en.wikipedia.org/wiki/Command_pattern)

# iphone - iPhone pathForResource:ofType:inDirectory: 错误？

> ID：501609
> 
> 赞同：0
> 
> 时间：2009-02-01T21:23:50.643
> 
> 标签：iphone

我尝试在我的项目根目录的子目录中操作文件。

我有一个名为“Basic Usage HTML”的文件夹，我试试这个代码：

```
[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"Basic Usage HTML" ]isDirectory:YES] ] 
```

它返回“零字符串参数”

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-02T13:10:25.383

Most likely Xcode's build process isn't including the "Basic Usage HTML" subfolder in your build.

Also, you may want to split each statement out and `NSLog` them to see where it's failing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-21T14:43:49.573

为什么将 isDirectory 设置为 YES？这看起来像这里的错误。（清晨咖啡警报）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-01-21T13:52:33.987

我遇到了类似的问题，这是由于在构建时没有设置目标来复制（或编译）资源。

# sharepoint - 您如何修改现有的 SharePoint 网站？

> ID：501621
> 
> 赞同：3
> 
> 时间：2009-02-01T21:29:26.687
> 
> 标签：sharepoint, powershell, scripting

我经常有客户要求更改属性，例如场上所有现有站点上所有文档库的版本历史设置。

到目前为止，我能想到的最好的解决方案是在 Powershell 中编写脚本，在运行之前测试脚本，然后祈祷我没有忽略一些关键的东西。有没有更好更安全的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-02T21:31:08.383

我个人的“定制工作流程”如下：

1.  PowerShell 中的原型解决方案。乱。
2.  导出我凌乱的 PowerShell 命令历史。
3.  将命令历史粘贴到 Visual Studio 中，逐行转换为 C#（这主要是机械过程，转换管道除外）
4.  打包为 SharePoint 解决方案部署的功能（使用 WSPBuilder 扩展）；具体来说，从功能接收器调用我转换后的“脚本”。当您的功能被停用时，还要编写撤消您的自定义的代码。
5.  在开发中测试，在 QA 中测试。5b.如果是大脚本，影响大，我会要求我们的DBA将一个大的内容数据库恢复到QA db服务器；然后我会将这个生产副本附加到我们的 QA 农场并**针对生产数据的副本运行脚本**。这是我们从 WSSv2/2003 版本迁移的关键一步；我想我在迁移到 2007 年之前进行了四次完整的测试运行。无论如何，如果你需要它，你就需要它。
6.  在生产中安装/激活功能。

它比“在 prod 服务器上运行脚本”要重得多，但如果您正在寻找一种“更好”的方式来推送自定义项，那么这是在 SharePoint 中执行此操作的正确方式。SharePoint 的功能和解决方案框架专为这种情况而设计。

是的，我大量使用 PowerShell 进行原型设计/对象探索。

**编辑：**我没有提到，但你需要有一个灾难恢复计划来恢复你的所有定制。这就是它开始变得疯狂的地方，这取决于您进行了哪些自定义。在上面的示例中，内容数据库存储数据，但在 DR 情况下恢复其他自定义并不容易，尤其是存储在配置数据库中的 SSP 和场级自定义，或者如果您修改了 Web .config 或 IIS 元数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-02T13:23:44.170

好吧，如果你想自动化某些东西，PowerShell 可能是最好的方法之一。您可以在尝试之前查看正在运行的实际命令（而不是编译您无法达到峰值的内容）。

根据 PowerShell 脚本将执行的操作，您通常可以对对系统有影响（删除、移动等）的 cmdlet 使用简单的参数，例如 -WhatIf 和 -Confirm。

-WhatIf 提供：指示在运行命令时通常会执行的操作的输出。您可以看到将要执行的操作。

-确认：在实际采取行动之前，基本上会询问您“您确定要执行 xyz”。

使用 -WhatIf，如果您的所有信息都滚动到屏幕外，您可以简单地使用 Start-Transcript 启动控制台会话日志，然后您可以查看该日志以仔细查看将采取的所有操作。这样，您可以在运行命令之前确保它们是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-02T00:32:33.400

首先进行内容备份，然后运行脚本。

通过 stsadm 或数据库进行备份。

不适用于任何中央管理员更改。

# oracle - 在 Oracle 9.2 中，如何将包含字符串文本的 LONG 类型与 VARCHAR2 的列进行比较

> ID：501625
> 
> 赞同：2
> 
> 时间：2009-02-01T21:32:34.607
> 
> 标签：oracle, string, types

简单的q。在 Oracle 9.2 中，如何将包含字符串文本的 LONG 类型与 VARCHAR2 的列进行比较。

**select * from table1 t1, table2 t2 where t1.long_value = t2.varchar2_value**

我怎样才能以最简单的方式执行这样的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T22:01:44.390

The short answer is you can't, directly. Have a look at [this](http://www.oracle.com/technology/oramag/code/tips2003/052503.html) for a function to convert longs to varchar2 so you can use it in a SQL statement. LONG is more trouble than it's worth, but sometimes you're stuck with it.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-02-01T21:48:27.770

嗯，没有Oracle可访问我猜你的问题是转换为正确的类型。

尝试`(''||t1.long_value) = t2.varchar2_value`强制转换

但这取决于您如何设置索引。如果您想利用 t1.long_value 上的索引，最好将 t2.varchar2_value 转换为

# python - Emacs 中的 Python 2 和 3

> ID：501626
> 
> 赞同：17
> 
> 时间：2009-02-01T21:32:47.133
> 
> 标签：python, emacs, python-3.x

我一直在使用 Emacs 编写 Python 2 代码。现在我的系统上安装了 Python 2.6 和 3.0，我还需要编写 Python 3 代码。

以下是在 /usr/bin 中设置不同版本的方式：

```
python -> python2.6*
python2 -> python2.6*
python2.6*

python3 -> python3.0*
python3.0* 
```

有没有办法设置它，以便 Emacs 使用正确版本的 Python，具体取决于我使用的语言？例如，Cc Cc 当前运行缓冲区，但它总是调用 python2.6，即使我正在编写 Python 3 代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-02T07:14:45.833

如果您使用的是 python-mode.el，您可以尝试更改`py-which-shell`. 为了在每个文件的基础上做到这一点，你可以把

```
# -*- py-which-shell: "python3"; -*- 
```

在文件的第一行 - 如果第一行以 . 开头，则在第二行`#!`。另一种选择是放

```
# Local Variables:
# py-which-shell: "python3" 
# End: 
```

在文件的末尾。也许您应该给出 python3 的完整路径，而不仅仅是“python3”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-02T05:49:42.747

答案是肯定的。如果你能区分 Python 2 和 Python 3，那么让 emacs 做你想做的事情就是一个简单的编程问题。

```
(define run-python (&optional buffer)
    (with-current-buffer (or buffer (current-buffer))
        (if (is-python3-p)
              (run-python3)
            (run-python2))))

(define-key python-mode-map (kbd "C-c C-c") #'run-python) 
```

剩下要做的就是实施`is-python3-p`和`run-python3`（等等）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-09-22T15:42:25.517

我对[这个答案](https://stackoverflow.com/questions/501626/both-python-2-and-3-in-emacs/502422#502422)的评论。

我写了 /t/min.py 它将在 python3 中运行良好但在 python2 中运行良好（字典理解在 python3 中有效）

/t/min.py 的内容

```
#!/usr/bin/python3
# -*- py-python-command: "/usr/bin/python3"; -*-
a = {i:i**2 for i in range(10)}
print(a) 
```

请注意，shebang 表示 python3 和文件局部变量 py-python-command 也。

我还编写了 /t/min-py.el 以确保使用 python-mode.el（版本 5.1.0）而不是 python.el。

/t/min-py.el 的内容

```
(add-to-list 'load-path "~/m/em/lisp/")
(autoload 'python-mode "python-mode" "Python Mode." t)
;; (setq py-python-command "python3") 
```

注意最后一行被注释掉了。

我使用以下命令启动 emacs：

```
emacs -Q -l /t/min-py.el /t/min.py & 
```

现在 emacs 以我的备用 dotmacs /t/min-py.el 启动，它打开 /t/min.py。

当我按 Cc Cc 将缓冲区发送到 python 时，它说“for”部分是错误的，这表明正在使用 python2 而不是 python3。当我按抄送！启动python解释器，它说python 2.5已启动。

我什至可以将 /t/min.py 的第二行更改为：

```
# -*- py-python-command: "chunkybacon"; -*- 
```

再做一次这个实验，emacs 仍然使用 python2。

如果 /t/min-py.el 的最后一行没有被注释掉，那么 Cc Cc 和 Cc ！两者都使用python3。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-05-15T06:39:38.130

关于 jrockway 的评论：

```
(defun is-python3-p () "Check whether we're running python 2 or 3."
  (setq mystr (first (split-string (buffer-string) "\n" t)))
  (with-temp-buffer
    (insert mystr)
    (goto-char 0)
    (search-forward "python3" nil t)))
(defun run-python () "Call the python interpreter."
  (interactive)
  (if (is-python3-p)
      (setq py-python-command "/usr/bin/python3")
    (setq py-python-command "/usr/bin/python"))
  (py-execute-buffer)) 
```

`python3`如果“python3”位于缓冲区的顶行（通常是shebang），这将调用。出于某种原因，`(setq py-pyton-command ...)`一旦您运行一次，就不允许您更改版本`py-execute-buffer`。除非您来回更改同一缓冲区上的文件，否则这应该不是问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-26T17:27:19.233

以目前的`python-mode.el`shebang很荣幸。

交互式地打开一个 Python shell

```
M-x pythonVERSION    
M-x python 
```

将调用已安装的默认值。

[http://launchpad.net/python-mode](http://launchpad.net/python-mode)

# perforce - 编写一个支持代码覆盖测试的工具

> ID：501637
> 
> 赞同：2
> 
> 时间：2009-02-01T21:42:40.030
> 
> 标签：perforce, code-coverage

我正在尝试编写一个小**工具**来支持我们在公司运行的一些**代码覆盖率测试。**

这是我对工具的要求 -

**输入**- 已修改的文件列表（.cpp 和 .h）（作为签入更改列表的一部分）

**输出**- 在源中添加或修改的所有功能（作为签入更改的结果）。

知道我该怎么做吗？基本上，它归结为更改了哪些行以及与更改的行相关的功能是什么......

更多信息 - 源代码控制：Perforce 平台：Windows

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T21:58:18.283

This sounds tricky. And I'm not sure what you'd do with the info about the changed functions in the source. You don't want to limit your code coverage to those functions: it could be that a changed function affected the coverage of an unchanged function.

Perhaps the best thing to do is simply run all your tests on each check-in, or once an hour if anything has changed. Then you could skip the complex tool creation, and have better results anyway.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T04:33:29.497

由于所有文件都已检入 Perforce，因此您可以对已更改文件与之前的版本进行批量差异 (p4 diff2)。p4 diff2 也采用分支规范，这可能是一种更方便的方法。

当发现差异时，您将需要编写一个脚本来提取更改行的方法名称。该算法可能是“在文件中向后搜索，直到找到语法的方法签名”。

聪明一点，根据文件名或另一个脚本生成的类列表来确定类名。这个类名列表有助于确定方法签名。如您所知，类名后面是 :: 和方法名。

我认为这个算法很容易达到 95% 以上的准确率，而对于任意输入很难达到 100% 的准确率。

此脚本应排除重复项以生成唯一列表。

结果列表是您在问题中请求的列表。

# c# - 阅读 Stack Overflow RSS 提要

> ID：501643
> 
> 赞同：2
> 
> 时间：2009-02-01T21:47:06.887
> 
> 标签：c#, xml, feed, xmldocument, xmlreader

我正在尝试从[提要](https://stackoverflow.com/feeds/)中获取未回答问题的列表，但我无法阅读它。

```
const string RECENT_QUESTIONS = "https://stackoverflow.com/feeds";

XmlTextReader reader;
XmlDocument doc;

// Load the feed in
reader = new XmlTextReader(RECENT_QUESTIONS);
//reader.MoveToContent();

// Add the feed to the document
doc = new XmlDocument();
doc.Load(reader);

// Get the <feed> element
XmlNodeList feed = doc.GetElementsByTagName("feed");

// Loop through each item under feed and add to entries
IEnumerator ienum = feed.GetEnumerator();
List<XmlNode> entries = new List<XmlNode>();
while (ienum.MoveNext())
{
    XmlNode node = (XmlNode)ienum.Current;
    if (node.Name == "entry")
    {
        entries.Add(node);
    }
}

// Send entries to the data grid control
question_list.DataSource = entries.ToArray(); 
```

我讨厌发布这样一个“请修复代码”的问题，但我真的被困住了。我已经尝试了几个教程（有些给出了编译错误）但没有帮助。我假设我使用 an`XmlReader`和 an的方式是正确的，`XmlDocument`因为这在每个指南中都很常见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-01T22:52:21.887

您的枚举`ienum`器仅包含元素，即`<feed>`元素。`entries`由于该节点的名称不是，因此没有添加任何内容`entry`。

我猜你想迭代`<feed>`元素的子节点。尝试以下操作：

```
const string RECENT_QUESTIONS = "http://stackoverflow.com/feeds";

XmlTextReader reader;
XmlDocument doc;

// Load the feed in
reader = new XmlTextReader(RECENT_QUESTIONS);
//reader.MoveToContent();

// Add the feed to the document
doc = new XmlDocument();
doc.Load(reader);

// Get the <feed> element.
XmlNodeList feed = doc.GetElementsByTagName("feed");
XmlNode feedNode = feed.Item(0);

// Get the child nodes of the <feed> element.
XmlNodeList childNodes = feedNode.ChildNodes;
IEnumerator ienum = childNodes.GetEnumerator();

List<XmlNode> entries = new List<XmlNode>();

// Iterate over the child nodes.
while (ienum.MoveNext())
{
    XmlNode node = (XmlNode)ienum.Current;
    if (node.Name == "entry")
    {
        entries.Add(node);
    }
}

// Send entries to the data grid control
question_list.DataSource = entries.ToArray(); 
```

# java - 在 Eclipse 中创建新类时如何更改自动生成的代码

> ID：501648
> 
> 赞同：35
> 
> 时间：2009-02-01T21:50:59.203
> 
> 标签：java, eclipse

每当我在 Eclipse 中创建一个新的 Java 文件并选中添加选项时`public static void main(String args[])`，都会生成以下代码：

```
public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

    }

} 
```

我如何：

*   删除`@param args`评论
*   更改缩进，使每个 { 在自己的一行上
*   删除 TODO 自动生成的评论

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-02-01T22:18:51.673

缩进是格式问题，而注释是模板问题。

模板位于**Window -> Preferences -> Java -> Code Style -> Code Templates**中。浏览所有这些并寻找您想要更改的内容。

格式化程序有点复杂。您可以在**Window -> Preferences -> Java -> Code Style -> Formatter**下找到它。那里有很多选择，但我只会回答你的问题。

*   模板 -> 评论 -> 方法 -> 编辑和删除所有内容
*   格式化程序 -> 编辑 -> 大括号选项卡 -> 更改您想要的情况
*   模板 -> 代码 -> 方法体 -> 编辑和删除所有内容

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-02T06:50:22.037

1.  在 Eclipse 中转到 Window->Preferences
2.  在左侧面板中，选择 Java->代码样式->代码模板
3.  在“配置生成的代码和注释”下，展开注释->选择方法，单击编辑删除或替换模式（* @param args），单击确定
4.  在“配置生成的代码和注释”下，展开代码->选择方法主体，点击编辑删除或替换模式（// TODO自动生成...），点击确定
5.  点击确定！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T22:15:46.373

要配置它，请转到：window->preferences->java->code style->code templates

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-01T21:58:01.903

Eclipse 有**很多**配置选项。看看Windows | 首选项对话框（或 OSX 上的 Eclipse Preferences pan）。

如果你深入挖掘 - 你会在 Java | 下找到选项。代码风格。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-02-02T12:52:09.430

还要确保在 Java > Editor > Templates 中选中“使用代码格式化程序”

# java - Java：自动装箱和强制转换有什么区别？

> ID：501653
> 
> 赞同：26
> 
> 时间：2009-02-01T21:53:39.120
> 
> 标签：java, casting, autoboxing

[这个问题](https://stackoverflow.com/questions/501412/why-does-autoboxing-make-some-calls-ambiguous-in-java)是关于“为什么自动装箱在 Java 中使某些调用模棱两可？”

但是通读答案，有许多关于铸造的参考资料，我不确定我是否完全理解其中的区别。

有人可以提供一个简单的解释吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-02-01T22:01:47.713

装箱是将原始类型转换为引用类型时，反装箱是相反的。强制转换是当您希望将一种类型视为另一种类型时，在原始类型和引用类型之间，这意味着隐式或显式装箱操作。是否需要显式是一种语言特性。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-02-01T22:46:03.257

强制转换和装箱/拆箱都与类型和表观（或实际）转换有关，但装箱/拆箱特定于原始类型与其对应的包装器类型之间的关系，而强制转换是类型显式或隐式更改的术语更一般的意义。

**铸造**是一个通用术语，具有两个相关但不同的含义：

1.  将一种类型的值**视为**另一种类型的值。第一个用法的两个示例是：

    1.1。鉴于该类`B`扩展了类，您可以通过在可能出现对实例的引用的任何地方写入`A`来请求`myB`将实例`B`视为实例。这实际上不会产生.`A``((A) myB)``A``A`

    1.2\. Java5 之前的集合将所有内容存储为`Object`; 这通常要求您在从集合中检索对象后使用强制转换。例如，如果您已将 a 存储`String`在 a 中`Map`并需要获取其长度，则您将编写类似`((String) myMap.get(someKey)).length()`where 需要强制转换的内容以`length`调用`String`. 同样，这不会导致`String`创建新的。

2.  将一种类型显式**转换**为另一种类型（即显式更改表示形式）。第二种用法的一个例子是在表达式`((int) (float_var + 0.5F))`中通过添加 0.5（产生一个浮点值）来舍入一个浮点变量，然后将该值显式转换为整数。生成的整数值（转换后`(int)`）是通过内部计算从另一个值*产生的。*

当存在超类/子类或接口/实现者关系（意思是上面的 1）或者当这两种类型是原始数字类型（意思是 2）时，可以进行强制转换。您可以查看“扩大”和“缩小”以获取更多详细信息。

**装箱**是指将原始类型包装在容器对象中，通常仅在您必须拥有一个对象时才进行（例如，将值存储在集合中）。原始类型和包装类型成对出现：

```
int      Integer
long     Long
boolean  Boolean
...      ... 
```

**拆箱**只是意味着从其对象包装器中检索原始值。

从 Java5 开始，当您编写使用原始值的表达式时，需要相应的包装类型（例如将整数放入集合中），编译器会自动插入实际包装该原始值的代码。同样，它将为您提供解包代码。

所以不要写（在Java5之前）这样的东西：

```
Map myMap = new HashMap();
...
myMap.put(someKey,Integer.valueOf(3));
...
int nextValue = (myMap.get(someKey)).intValue() + 1; 
```

你可以写：

```
Map<KeyType,Integer> myMap = new HashMap<KeyType,Integer>();
...
myMap.put(someKey,3);
...
int nextValue = myMap.get(someKey) + 1; 
```

并且装箱/拆箱代码由编译器插入。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-02-01T21:56:58.567

```
List<String> list = (List<String>)object; 
```

是演员表。

```
void doSomething(Integer i) { ... }
...
doSomeething(5); 
```

是自动装箱。

```
Integer getSomething();
...
int i = getSomething(); 
```

是自动拆箱。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-01T22:01:25.483

Java 5 中引入了自动装箱以防止以下代码：

```
map.put("ABC", new Integer(5));
map.put("DEF", new Integer(6)); 
```

你现在可以说：

```
map.put("ABC", 5); 
```

虽然它更容易 - 如果您不完全确定自己在做什么，它确实有一些陷阱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-01T22:04:44.713

装箱是将值包装在容器内，例如 Integer 对象内的 int 原始值

铸造只是如何看待类型。

前者产生另一种价值，后者只是修改如何对待已经存在的价值

除了原始类型之间的转换实际上会修改它们的表示。（这并没有让它更清楚吗？）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-01T22:11:41.860

装箱和拆箱是Java 中的一种类型转换，您可以从原始类型转换为它的包装类或反之，例如布尔转换为布尔（框），或布尔转换为布尔（拆箱）。

Java 中的类型转换，例如：

*   身份转换（第 5.1.1 节）字符串到字符串

*   扩大原始转换（§5.1.2）字节到int

*   一个缩小的原始转换 (§5.1.3) int 到 byte

*   扩大参考转换（§5.1.5）整数到数字

*   缩小参考转换（§5.1.6）数字到整数

*   拳击转换 (§5.1.7) int 到 Integer

*   拆箱转换（§5.1.8）。整数到 int

自动装箱或自动拆箱发生在编译器为您进行装箱/拆箱转换时（它没有明确出现在源代码中作为强制转换表达式），例如，请参阅您提到的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T03:23:16.033

自动装箱和拆箱可以应用于以下情况吗？

```
Long one = 10;
long two = 15;
Long three = 20;

if(one == three) //will this be unboxed or do we need to put a explicit
                 //condition like if(one.intValue() == three.intValue()) 
   System.out.println("Equal");
else 
   System.out.println("Not Equal");  

if(one == two) //will this be unboxed or do we need to put a explicit
               //condition like if(one.intValue() == two) 
   System.out.println("Equal");
else 
   System.out.println("Not Equal"); 
```

# concurrency - 分布式系统上的邮箱处理器

> ID：501656
> 
> 赞同：17
> 
> 时间：2009-02-01T21:55:50.720
> 
> 标签：concurrency, f#, erlang

我在第 379 页的 Expert F# 副本中注意到以下评论：

> **传递和处理消息**
> 
> *共享内存并发*和*消息传递并发*之间经常存在区别 。前者在本地机器上通常更有效，本章后面的“使用共享内存并发”部分会介绍。后者适用于没有共享内存的系统，例如分布式系统，也可用于避免与共享内存相关的性能问题。

我对没有共享内存的进程之间的消息传递并发感兴趣。Expert F# 中的所有示例以及 Internet 上演示如何使用 MailboxProcessor 的所有示例都包含此代码的一些变体：

```
let counter =
    MailboxProcessor.Start(fun inbox ->
        let rec loop n =
            async {
                do printfn "n = %d, waiting... " n
                let! msg = inbox.Receive()
                match msg with
                    | -1 ->
                        do printfn "'Til the bitter end..."
                        return ()
                    | n -> return! loop(n + msg)
            }
        loop 0)

counter.Post(20)
counter.Post(50)
counter.Post(-1) // kill mailbox 
```

换句话说，您必须先在共享内存中处理 MailboxProcessor，然后才能将消息发布到其通道。据我所知，这不是 Erlang 风格的并发，因为您只能在同一进程中将消息发布到 MailboxProcessors（注意：进程，而不是线程）。

**一个进程中的一个 MailboxProcessor 是否可以将消息发送到另一个 MailboxProcessor 进程？如果是这样，你能提供一个样本吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-02T03:37:38.987

我认为您对术语有些困惑。Erlang 进程不一定直接对应于 OS 进程。一个给定的 OS 进程可以有多个 Erlang 进程（通常是这样），就像你的进程有多个线程一样。如果您想在多个操作系统进程之间进行通信，您可能需要查看[System.Runtime.Remoting.Channels.Ipc](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.channels.ipc.aspx)。可以想象，可以围绕这些 API 创建 MailboxProcessor 样式的包装器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-07-21T19:11:27.273

MailboxProcessor 和 AsyncReplyChannel 不提供与 Erlang 中的“pid bang”（Pid ！）操作相同的位置透明度。当然，这只有在分布式 Erlang 节点配置正确的情况下才有效，即名称、DNS、同步模块、cookie 等。OTP 中有一些特性可以使这种管理更容易。当然，如果 Erlang 进程在同一个节点上，它就可以工作。但是，分布式 Erlang 存在一些问题。

**“网络是安全的。”** 内置的分布式 Erlang 机制假设网络是安全的。因此，当需要安全性时，使用代理 Erlang 进程的基于套接字的通信方法。

**“网络可靠。”** 使分布式 Erlang 工作的原因之一是它的错误处理理念，即进程是不可靠的，因此容错只能通过通信进程监视器来实现。OTP 编纂了模式（即主管）来实现这一理念。Erlang 中的可靠消息传递可以通过 Mnesia（一个分布式数据库）实现，就像在 RabbitMQ 中所做的那样，但您不能开箱即用。

最后，分布式通信从未如此简单。我们可以在 F# 中实现一个 AsynchWorker 来充当我们的代理并通过 AsynchReplyChannel.Send 与其通信。我们仍然需要考虑分布式计算的谬误。

最后，消息传递风格的并发并不意味着进程外通信。它确实意味着没有共享状态可以用锁来管理，因此是一个更简单、更不容易出错的并行计算模型。我认为这个[素数筛](http://en.wikibooks.org/wiki/F_Sharp_Programming/MailboxProcessor#Prime_Number_Sieve)是这种并发风格的一个很好的例子。F# 示例不像 Squeak 或 Erlang 实现那样美观，因为缺少用于消息传递的内置语法，但它可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-02-08T16:51:29.507

也许这会做

[使用 F# 代理 Map Reduce](https://stackoverflow.com/questions/4431743/map-reduce-with-f-agents)

我没有得到太多反馈，所以不确定它是否 100% 正确。如果您认为它不好，请告诉我。

感谢！

# css - 仅在 CSS 中的上标？

> ID：501671
> 
> 赞同：365
> 
> 时间：2009-02-01T22:04:16.540
> 
> 标签：css

我怎样才能完成上标，只在 CSS 中？

我有一个样式表，我在其中用上标字符标记外部链接，但我很难让字符正确对齐。

我目前拥有的看起来像这样：

```
a.external:after {
  font-size: 50%;
  vertical-align: top;
  content: "+";
} 
```

但它不起作用。

当然，我会使用`<sup>`-tag，只有在`content`允许 HTML 时...

* * *

## 回答 #1

> 赞同：545
> 
> 时间：2009-02-01T22:15:46.920

你可以用 [**`vertical-align: super`**](https://developer.mozilla.org/en-US/docs/CSS/vertical-align), 做上标（加上一个伴随的[`font-size`](https://developer.mozilla.org/en-US/docs/CSS/font-size)减少）。

但是，请务必**阅读此处的其他答案**，尤其是[paulmurray](https://stackoverflow.com/questions/501671/superscript-in-css-only#572967)和[cletus](https://stackoverflow.com/questions/501671/superscript-in-css-only#501689)的答案，以获取有用的信息。

* * *

## 回答 #2

> 赞同：203
> 
> 时间：2009-02-01T22:11:55.977

老实说，我看不出只在 CSS 中做上标/下标的意义。它没有方便的 CSS 属性，只有一堆本地实现，包括：

```
.superscript { position: relative; top: -0.5em; font-size: 80%; } 
```

或使用垂直对齐或我确定其他方式。事情是，它开始变得复杂：

*   行高上的[CSS 上标间距；](http://www.xs4all.nl/~sbpoley/webmatters/superscripts.html)
*   [当心 CSS for Superscript/Subcript](http://www.personal.psu.edu/ejp10/blogs/tlt/2007/02/beware_css_for_superscriptsubc.html)为什么你根本不应该使用 CSS 设置上标/下标**样式**；

第二点值得强调。通常上标/下标实际上不是样式问题，而是表示含义。

**旁注：**值得一提[的是常见数学上标和下标表达式的实体列表，](https://web.archive.org/web/20160922000043/http://symbolcodes.tlt.psu.edu/bylanguage/mathchart.html)即使这个问题与此无关。

sub/sup 标签在 HTML 和 XHTML 中。我会用那些。

至于 CSS 的其余部分，:after 伪元素和内容属性并未得到广泛支持。如果您真的不想将其手动放入 HTML，我认为基于 Javascript 的解决方案是您的下一个最佳选择。使用 jQuery，这很简单：

```
$(function() {
  $("a.external").append("<sup>+</sup>");
}; 
```

* * *

## 回答 #3

> 赞同：138
> 
> 时间：2009-02-21T13:15:40.073

CSS 文档包含适用于所有 HTML 结构的行业标准 CSS。也就是说：现在大多数网络浏览器都没有显式处理`SUB`, `SUP`,`B`等等`I`- 它们（有点）被转换为`SPAN`具有适当 CSS 属性的元素，而渲染引擎只处理这些。

该页面是[附录 D。 HTML 4 的默认样式表](http://www.w3.org/TR/CSS21/sample.html)

你想要的位是：

```
small, sub, sup { font-size: .83em }
sub             { vertical-align: sub }
sup             { vertical-align: super } 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2010-01-07T08:31:13.773

我正在处理一个页面，目的是让文本清晰易读，上标元素不会改变行的顶部和底部边距 - 具有以下观察结果：

例如，如果对于您的主要文本`line-height: 1.5em`，您应该减少上标文本的行高以使其正确显示。我用过`line-height: 0.5em`。

此外，`vertical-align: super`在大多数浏览器中运行良好，但在 IE8 中，当您存在上标元素时，该行的其余部分被下推。因此，我改为`vertical-align: baseline`与负片一起使用`top`并`position: relative`达到相同的效果，这似乎在浏览器中效果更好。

因此，要添加到“本土实施”：

```
.superscript {
    font-size: .83em;
    line-height: 0.5em;
    vertical-align: baseline;
    position: relative;
    top: -0.4em;
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-02-01T22:27:23.183

[http://htmldog.com/articles/superscript/](http://htmldog.com/articles/superscript/)本质上：

```
position: relative;
bottom: 0.5em;
font-size: 0.8em; 
```

据我所知，在实践中效果很好。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2014-07-13T13:26:14.437

以下摘自 Mozilla Firefox 的内部 html.css：

```
sup {
  vertical-align: super;
  font-size: smaller;
  line-height: normal;
} 
```

所以，在你的情况下，它会是这样的：

```
.superscript {
  vertical-align: super;
  font-size: smaller;
  line-height: normal;
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2010-08-23T19:52:30.677

这是另一个干净的解决方案：

```
sub, sup {vertical-align: baseline; position: relative; font-size: 70%;} /* 70% size of its parent element font-size which is good. */
sub {bottom: -0.6em;} /* use em becasue they adapt to parent font-size */
sup {top: -0.6em;} /* use em becasue they adapt to parent font-size */ 
```

通过这种方式，您**仍然可以使用 sup/sub**标记，但是您**修复了它们的愚蠢行为以始终搞砸段落行高**。

所以现在你可以这样做：

```
 <p>This is a line of text.</p>
  <p>This is a line of text, <sub>with sub text.</sub></p>
  <p>This is a line of text, <sup>with sup text.</sup></p>
  <p>This is a line of text.</p> 
```

而且你的段落行高不应该搞砸。

在 IE7、IE8、FF3.6、SAFARI4、CHROME5、OPERA9 上测试

我使用 a 进行了测试`p {line-height: 1.3;}`（这是一个很好的行高，除非你希望你的行太靠近）并且它仍然有效，因为“-0.6em”是如此之少，以至于在该行高下子/子文本也将适合并且不要越过对方。

忘记了可能相关的细节我总是在**页面的第一行**使用 DOCTYPE （特别是我使用 HTML 4.01 `<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`）。所以我不知道当浏览器由于缺少 DOCTYPE 或不触发标准/几乎标准模式的 DOCTYPE 处于 quirkmode（或非标准模式）时此解决方案是否有效。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-06-15T16:56:04.173

如果您要更改字体大小，您可能希望使用以下规则停止缩小大小：

```
sup sub, sub sup, sup sup, sub sub{font-size:1em !important;} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-01T22:12:54.353

查看：[http ://www.cssdesignpatterns.com/Chapter%2012%20-%20ALIGNING%20CONTENT/Vertical-aligned%20Content/example.html](http://www.cssdesignpatterns.com/Chapter%2012%20-%20ALIGNING%20CONTENT/Vertical-aligned%20Content/example.html)

如果看起来你想要“vertical-align:text-top”

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-01-11T00:29:47.130

我不确定这是否相关，但我已经解决了 `&sup2;`HTML 实体的问题，因为我无法在标签内添加任何其他 html 标签`<label>`。所以这个想法是使用 ASCII 代码而不是 css 或 HTML 标记。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-02-22T21:32:31.377

CSS 属性`font-variant-position`正在考虑中，最终可能是这个问题的答案。不过，截至 2017 年初，只有 Firefox 支持它。

```
.super {
    font-variant-position: super;
} 
```

见[MDN](https://developer.mozilla.org/en/docs/Web/CSS/font-variant-position)。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-07-27T03:31:32.330

尝试

```
.aftersup {
 font-size: 1em;
 margin: left;
 vertical-align: .7em;
} 
```

或简单的“之后”

```
.after {
 font-size: 1em;
 margin: left;
 vertical-align: .7em;
} 
```

“.a.external:after”可以简化

或者

```
.after {
 font-size: 50%;
 margin: left;
 vertical-align: .7em;
} 
```

使用“字体大小 50%” - 什么大小的 50%？如果不在上标之前定义文本大小的某些标签中使用，这可能效果不佳...

如果你使用“字体大小：1em;” 然后确定设置字体大小，而不参考定义链接文本大小的标记，除非链接文本设置为 100% 并且上标是该 100% 的 50%。

使用“字体大小：1em；” 实际上设置字体大小基线。

如果您希望上标字体小于链接文本，请将“垂直对齐”大小设置为更小

如果您希望上标字体与链接文本大小相同，请将“垂直对齐”大小设置为与字体大小相同

要与链接文本对齐，您需要将“边距”设置为与链接文本相同（左、中、右、对齐）。

```
.text {
  font-size: 1em;
  margin: left;
}
.aftersup {
  font-size: 1em;
  margin: left;
  vertical-align: .7em;
} 
```

它应该类似于下面带有^(上标的示例链接)

```
<p class="text"><a href="url">https://stackoverflow.com/questions/501671/superscript-in-css-only</a><aftersup>+</aftersup></p> 
```

或者

```
<p class="text"><a href="url">https://stackoverflow.com/questions/501671/superscript-in-css-only</a><aftersup>You got this</aftersup></p> 
```

或者

```
<a href="url">https://stackoverflow.com/questions/501671/superscript-in-css-only</a><aftersup>+</aftersup> 
```

或者

```
<a href="url">https://stackoverflow.com/questions/501671/superscript-in-css-only<aftersup>You got this</aftersup> 
```

如...

[仅在 CSS 中的上标？](https://stackoverflow.com/questions/501671/superscript-in-css-only)+

或者

[仅在 CSS 中的上标？](https://stackoverflow.com/questions/501671/superscript-in-css-only)你得到了这个

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-03-20T14:23:03.570

```
.superscript {
  position: relative;
  top: 5px;
  font-size: 90%;
  vertical-align: super;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-06-04T01:55:39.763

这是 sup 使用的确切方式：

```
.superscript{
    vertical-align:super;
    font-size:smaller;
} 
```

通过谷歌浏览器检查元素找到了这个。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-21T11:17:55.760

相关或可能不相关，使用上标作为 HTML 元素或文本中的 span+css 可能会导致本地化问题 - 在本地化程序中。

例如，假设“第 3^方软件”：

```
3<sup>rd</sup> party software
3<span class="superscript">rd</span> party software 
```

译者如何翻译“rd”？对于几种西里尔语言，他们可以将其留空，但是对于其他外来语言或 RTL 语言呢？

在这种情况下，最好避免使用上标并使用“第三方软件”之类的完整措辞。或者，正如其他评论中提到的，通过 jQuery 在上标中添加加号。

# algorithm - 将无意义文本与有意义文本分离的算法

> ID：501675
> 
> 赞同：9
> 
> 时间：2009-02-01T22:05:48.313
> 
> 标签：algorithm, filter, word, nlp, spam

我为我的一些程序提供了反馈功能。不幸的是，我忘记了包含某种垃圾邮件保护功能——因此用户可以将任何他们想要的东西发送到我的服务器——每个反馈都存储在一个巨大的数据库中。

一开始我会定期检查这些反馈——我过滤掉了可用的内容并删除了垃圾。问题是：我每天收到 900 条反馈。只有 4-5 条真正有用，其他消息大多是 2 种胡言乱语：

*   废话：jfvgasdjkfahs kdlfjhasdf（人们在键盘上砸脑袋）
*   我不懂的语言

到目前为止我做了什么：

1.  我安装了一个过滤器来删除任何包含“asdf”、“qwer”等的反馈...->每天只有 700 个

2.  我安装了一个单词过滤器来删除任何包含不良语言的内容 -> 每天 600 个（不要问 - 但那里有很多奇怪的人）

3.  我过滤掉任何包含未以我的语言使用的字母的消息 -> 每天 400 条

但是每天400仍然太多了。所以我想知道是否有人以前处理过这样的问题并且知道某种算法来过滤掉无意义的消息。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-01T22:10:01.877

如何仅使用一些现有的贝叶斯垃圾邮件过滤器实现而不是自己实现。我使用 DSpam 取得了不错的成绩

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-01T22:11:23.530

稍微不同的方法是建立一个系统，将反馈消息通过电子邮件发送到一个帐户并使用标准的垃圾邮件过滤。您可以通过 gmail 发送他们，让他们的过滤对其进行过滤。不完美，但也没有太多的努力来实现。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-02-01T22:10:16.497

如果您只期待（或关心）英文评论，那么为什么不简单地计算上传的反馈中有效单词的数量（相对于某些字典）。如果数量超过某个阈值，请接受反馈。如果没有，那就扔掉它。这种简单的启发式可以通过添加其他语言的字典来扩展到其他语言。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-01T22:18:49.303

您可以尝试许多垃圾邮件过滤器使用的贝叶斯算法。

[更好的贝叶斯过滤](http://www.paulgraham.com/better.html)

[维基百科解释](http://en.wikipedia.org/wiki/Bayesian_spam_filtering)

[一些开源](http://sourceforge.net/projects/bmf/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-02-01T22:11:35.383

很久以前，我在我的一个网站上的留言簿功能中遇到了垃圾邮件问题。我的解决方案是简单地添加一个类似于验证码的问答字段，询问用户“你是垃圾邮件机器人吗？” 任何包含“不”一词的答案（让通过“不，我不是”，“不”和“一点也不”，只是为了好玩......）允许用户发布......

我选择不使用验证码的原因很简单，因为我的用户希望网站有一种更“舒适”的感觉，而验证码感觉太正式了。这更个人化=）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-01T22:13:34.350

最简单的方法是计算每个字母的出现次数。E是英文中最常见的字母，所以应该用得最多。您还可以检查单词和有向图的频率。[在这里查看](http://www.deafandblind.com/word_frequency.htm)以获取最常用的英文列表

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-02-01T22:08:26.000

查找 Claude Shannon 和 Markov 模型。这些导致了一种统计技术，用于评估字母组合来自指定语言来源的概率。

[以下](http://www.cs.princeton.edu/courses/archive/fall07/cos126/assignments/markov.html)是普林斯顿大学的一些相关课程笔记。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-02-07T21:40:33.303

Fidelis Assis 和我一直在调整垃圾邮件过滤器[OSBF-Lua](http://osbf-lua.luaforge.net/)，以便它可以轻松地适应其他应用程序，包括 Web 应用程序。这个垃圾邮件过滤器连续三年赢得了 TREC 垃圾邮件竞赛。（我不介意吹牛，因为算法是 Fidelis 的，不是我的。）

如果您想尝试一下，我们有“接近测试版”的代码

```
git clone http://www.cs.tufts.edu/~nr/osbf-lua-temp 
```

我们距离发布一个整洁的版本还有很长的路要走，但是如果您安装了 automake 1.9，代码应该可以构建。我们中的任何一个都乐意为您提供有关如何使用它来清理数据库并将其集成到您的应用程序中的建议。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-02T14:10:30.630

前面关于捆绑一些垃圾邮件过滤器贝叶斯启发的分类器的答案是一个好主意。对于您的应用程序，由于您似乎得到了很多冗长的无意义单词，因此最好在解析器中打开一个选项来训练二元组和三元组；否则，许多无意义的词将被视为“以前从未见过”，这在您的情况下不是最有用的解析。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-07T21:58:24.097

是的，就像人们指出的那样，您可以查看垃圾邮件过滤器或马尔可夫模型。

更简单的方法是只计算每个响应中的不同单词并按频率排序。如果像下面这样的词不在顶部，那么它可能不是有效的文本：

*the* , *a* , *in* , *of* , *and* , *or* , ...

它们是任何常用英文文本中最常用的词。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-07T22:03:14.443

只需将评论存储在待处理状态，通过 Akismet 或 Defensio 传递它们，然后使用响应将它们标记为潜在垃圾邮件或将它们标记为活动。

[http://akismet.com/](http://akismet.com/)

[http://defensio.com/](http://defensio.com/)

我个人更喜欢 Defensio 的 API，但它们都运行得非常好。

# svn - 我如何证明（成本效益）花时间设置适当的开发环境（Subversion）是合理的？

> ID：501685
> 
> 赞同：6
> 
> 时间：2009-02-01T22:11:30.657
> 
> 标签：svn

我的老板在技术方面很拘谨，他很少批准不会直接影响收入的项目。他（错误地）多次忽略等式的成本方面，特别是对于难以估算成本的技术项目。这里有没有人有任何白皮书、文章等，可以根据合理的成本效益论据来建立适当的开发环境（颠覆、开发、登台和生产服务器）？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T22:18:27.197

哇，你现在用什么来控制源代码？有什么吗？如果没有，那么你应该*这样做*，并设置一个 Subversion 服务器。最棒的是您不必请求批准，因为没有钱需要转手。

如果连问都做不到，那我建议找个开明的老板。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-01T22:53:04.053

Martin Fowler 有一篇关于[持续集成的好处](http://www.martinfowler.com/articles/continuousIntegration.html#BenefitsOfContinuousIntegration)的文章。设置自动构建需要一些时间。在上一个项目中，我将 CI 引入其中需要一个开发人员一天的时间才能让事情正常工作，然后大约一周的时间才能对所有内容进行微调。好处太多了，很难一一列举，但以下是对我们有帮助的：

*   鼓励频繁集成 - 帮助每个人保持在同一页面上
*   自动化测试 - 每次有人签到时确保尽早处理问题
*   自动部署 - 一键在几分钟内将我们软件的最新版本安装在所有服务器上

对我来说，最大的变化是最后一个。它将一个长达一小时的容易出错的过程（你记得更新远程处理版本号吗？哦，废话......）变成了一个 5 分钟的过程，如果出现问题，我们可以回滚。

当我学习设置 CI 时，[Carol Lotz 的这篇文章](http://dotnet.org.za/cjlotz/archive/2007/04/04/part-1-continuous-integration-using-msbuild-cruisecontrol-net-fxcop-nunit-ncover-subversion.aspx)非常有帮助。它一步一步地设置一个复杂的项目。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-01T22:20:55.773

我想说的是，不使用任何类型的源代码控制系统的成本将反映在丢失一堆代码或必须对同一代码的多个并发版本进行手动协调的潜在成本中，这相当于直接的、可衡量的工时成本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-01T22:59:00.437

**请求原谅比请求许可要好。**

只需设置源代码控制服务器，无需先询问。如果结果发生了不好的事情，请道歉并继续前进。当源代码控制设置被证明有用时，只需说“哦，是的，我设置了源代码控制系统”，每个人都会感到惊喜。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-01T23:05:58.940

除了 Scott 的评论只是这样做*（释义）*，如果您从[git](http://git.or.cz)或[bazaar](http://bazaar-vcs.org)等分布式系统而不是 Subversion 开始，您可以先让它在本地运行而不影响其他人，然后将其传播给其他开发人员随着时间的推移。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-01T22:25:30.630

我必须同意格雷格的观点。由于 Subversion、CC.net、TortoiseSVN、AnkhSVN 都是免费的，您应该能够建立一个不错的 CI 系统来进行更改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-01T22:25:57.743

我不知道你问的任何好论文，但你可以告诉他，SO 这里的很多人（我代表我自己）认为你的老板完全错了，而且目光短浅。我全心全意地支持格雷格的回答。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-01T23:06:30.157

可以做风险分析吗？这是一个公认的项目管理学科，主要涉及列举风险，尝试根据可能性和影响对其进行量化，并确定可能的缓解措施。这种方法至少应该适用于源代码控制，除非你的老板故意忽视风险，这对他来说是非常……勇敢的。:-)

如果源代码灾难确实发生了，你的老板会看起来很愚蠢（和鲁莽），你会看起来很有先见之明。彼得的建议也很好 - 自己设置它，然后，当有人丢失一些源代码或一些更改时，随便说“哦，我最近这样做了，但我只是从源代码控制重新获取了以前的版本，只是丢失了大约 20 分钟的工作。要我给你设置一个登录名吗？”）

# svn - 设置 SVN 提交电子邮件的最简单/最佳方式？

> ID：501692
> 
> 赞同：19
> 
> 时间：2009-02-01T22:14:01.497
> 
> 标签：svn, svn-hooks

我想在我正在处理的项目上设置提交电子邮件，如下所述：
[http ://produceoss.com/en/vc.html#commit-emails](http://producingoss.com/en/vc.html#commit-emails)

也就是说，使用提交后挂钩将电子邮件发送到包含提交标题/日志和更改差异的列表。

Linux 机器上最简单的设置方法是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2011-03-20T16:53:44.203

虽然这个问题有点老了，但我想我会把我的意见留给那些来自谷歌的人：

我已经考虑过这里提到的解决方案。这`commit-email.pl`对我来说既容易又更好。但是，我发现这两种解决方案都缺乏正确的格式。

因此，该`svnnotify`软件包似乎为我生成了格式和颜色都足够好的电子邮件。

在 Debian/Ubuntu 系统上，您可以通过键入以下命令来安装它：

```
apt-get install libsvn-notify-perl 
```

然后，如果您要向 Gmail 帐户发送电子邮件，由于 Gmail 中奇怪的 CSS 支持，我强烈建议您应用[此处找到](http://teguheko.echodess.com/2009/11/svn-notify-html-colordiff-inline-cs/)的补丁，这意味着：

*   下载`HTML.pm`和`ColorDiff.pm`
*   分别替换为`/usr/share/perl5/SVN/Notify/HTML.pm`和`/usr/share/perl5/SVN/Notify/HTML/ColorDiff.pm`。

最后，`post-commit`以通常的方式设置钩子脚本：

```
# email notifications for commits
/usr/bin/svnnotify --repos-path "$REPOS" --revision "$REV" \
    --to your.email@address.com \
    --from from.email@address.com \
    --with-diff \
    --subject-cx \
    --subject-prefix 'Your Project Name: ' \
    --handler HTML::ColorDiff \
    --css-inline
    2>&1 &

exit 0 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-02-01T22:42:53.497

创建新存储库时，在`hooks/post-commit.tmpl`. 它包含一条看起来或多或少像这样的行：

```
/usr/share/subversion/hook-scripts/commit-email.pl "$REPOS" "$REV" commit-watchers@example.org 
```

只需将电子邮件替换为您要发送通知的地址，将脚本重命名为`hooks/post-commit`（删除`tmpl`扩展名）并使其可执行（`chmod a+x`）。

当您在`commit-email.pl`没有任何参数的情况下运行脚本时，您将看到一个使用屏幕，其中包含额外的选项，例如允许修改主题行或发件人地址。

请注意，对于 Debian，`commit-email.pl`脚本位于可选`subversion-tools`包中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-02-01T22:17:59.803

我们为此使用[svnmailer](http://opensource.perlig.de/svnmailer/)。我们将特定于存储库的`post-commit`钩子脚本符号链接到单个脚本，该脚本又调用 svnmailer。配置非常简单，通过他们的`simple.conf`示例配置，您可以在几分钟内启动并运行。请注意，它是用 Python 编写的，因此这是安装的先决条件。

我们的整个提交后挂钩脚本只有几行（请注意，您可能会在提交后挂钩中做其他事情，但我们目前不这样做）：

```
#!/bin/sh

CONFIG="/usr/local/svnmailer/default.conf"
MAILER="/usr/bin/svn-mailer"

# These are passed in by subversion
REPOS="$1"
REV="$2"

"${MAILER}" --commit \
            --config "${CONFIG}" \
            --repository "${REPOS}" \
            --revision "${REV}" \
            --background 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-19T06:39:49.537

检查[这里描述的](http://tkurek.blogspot.com/2013/05/svn-email-notifications-svn-mod-email_21.html)**svn-mod-email**包。**svn-mod-email**是一个强大的SVN 电子邮件通知管理工具，它以 Debian 存档的形式提供。它易于安装、配置和使用。

 **# cocoa-touch - 来自 UIImage 的数据 URL / PNG

> ID：501699
> 
> 赞同：5
> 
> 时间：2009-02-01T22:17:51.207
> 
> 标签：cocoa-touch

我有一个具有 UIImage 的 iPhone 程序。这个 UIImage 需要传输到 UIWebView 中的一个 javascript Image 对象。我在想这可以通过使用我发送到 UIWebView 的数据 url 来完成，如下所示：

```
[wview stringByEvaluatingJavaScriptFromString:@"loadimage('%d')",dataurlfromuiimage]; 
```

所以，我需要将我的 UIImage 转换为 Data: URL。如果我能得到 PNG 数据，我可以自己做，但我也找不到如何做。如果有更好的方法将它发送到 WebView，那也很好。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-02-02T00:01:29.390

要以 PNG 格式获取图像的 NSData 表示，请使用

```
NSData *dataForPNGFile = UIImagePNGRepresentation(yourImage); 
```

同样，可以使用 JPEG 表示

```
NSData *dataForJPEGFile = UIImageJPEGRepresentation(yourImage, 0.9f); 
```

获得 NSData 后，您可以使用 writeToFile:atomically: 将其写入 Documents 目录，然后我相信您可以将其作为本地 URL 传递（尽管我没有尝试过）。另一种方法是使用 François P. 引用的 Base64 NSData 类别，并以某种方式将其作为 Base64 发送到 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T23:15:07.783

不幸的是，您需要将 UIImage 转换为图像的文件表示，而不是存储在 UIImage 结构中的解码像素信息。也就是说，您需要以某种方式将其写入临时文件并获取文件的原始 NSData 字节（可能是 JPEG 或 PNG）。然后使用 BASE64 编码器。我不认为它已经由 Apple 提供，所以你可能想看看这篇文章：[http ://www.cocoadev.com/index.pl?BaseSixtyFour](http://www.cocoadev.com/index.pl?BaseSixtyFour)

# jquery - 实现 AJAX 主菜单的最佳方式是什么？

> ID：501708
> 
> 赞同：1
> 
> 时间：2009-02-01T22:20:42.277
> 
> 标签：jquery, asp.net-mvc, ajax

我正在使用带有大量 jQuery 和 AJAX 内容的 ASP.NET MVC 构建一个站点，并且我希望主菜单与站点的其余部分或多或少地与 AJAX 一起使用。

在理想情况下，我希望我的主菜单 1）如果用户已激活 javascript，则使用 AJAX 加载主要内容 2）更改地址栏中的 url（以启用链接复制粘贴） 3）只有我的代码一个地方，这意味着我不想在 .aspx 视图和 .ascx PartialView 中有相同的标记。

1）我没有问题。但是，我不知道如何在不重新加载页面的情况下完成第 2）项。有任何想法吗？

我意识到第三个问题*可以*通过创建一个呈现每个 PartialView 的视图来解决，但是没有更好的方法吗？在将 PartialView 返回给客户端之前，有什么方法可以在站点 Master 或 Controller 中“包装”PartialView？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-01T22:54:29.073

我倾向于同意 Rob 的观点（尽管我不会投票给你；））。没有充分的理由，像 Ajax 这样的 JavaScript 技术不应该成为您网站的核心。我建议在 Google 上搜索“渐进式增强”和“不显眼的 javascript”等术语。

构建一个漂亮的 RESTful 站点，然后在可以显着增强用户体验的地方使用 JavaScript 和 Ajax 进行增强。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T22:30:43.240

**对于 #2：**您可以在 url 的末尾添加一个 #hash：在菜单中的示例：

```
<a href="#helppage" onclick="opento('helppage')">Help Page</a> 
```

然后在你的身体上加载：

```
if(document.location.hash) { opento(document.location.hash); } 
```

**对于#3**，我不知道 ASP。对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-02T00:03:32.570

尽管我同意其他一些关于不通过 AJAX 加载内容的评论，但列表中的 #2 是处理 AJAX 时经常出现的常见问题，值得回答。

在不重新加载浏览器的情况下更改 URL的**唯一**`#`方法是在末尾添加一个。例子：

```
http://www.yoursite.com/Content/About/#some-identifier 
```

没有其他办法。您可以查看 Facebook 和 Google Mail/Reader 等网站以查看实现的示例。

希望能帮助到你...

# performance - Can I use a RAM disk to speed up my IDE?

> ID：501718
> 
> 赞同：2
> 
> 时间：2009-02-01T22:26:13.623
> 
> 标签：performance, ide, ramdisk, ramdrive

### Duplicate:

> [RAMDrive for compiling - is there such a thing?](https://stackoverflow.com/questions/354254/ramdrive-for-compiling-is-there-such-a-thing)

I have an idea how to speed up my IDE.

I want to create a RAM disk and move my solution onto this virtual disk.
I think that this can speed up the IDE because RAM is much faster than a HDD.

Has anyone done this before?

PS: I think, when I have some documents in my program(real world) which are used frequently(for example some document templates) it could be good idea to move these documents onto a RAM disk as well to speed up I/O. Am I wrong?

If power is a problem, a UPS could solve it.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-01T22:35:54.773

Honestly, if you have Vista/Windows Server 2008 x64 and you jam your workstation with 4 to 8 GB of RAM, for most tasks, everything will be in cache or stored by SuperFetch, which will be a lot easier to manage and just about as high performance as a RAM disk. The RAM disk won't do a thing for you if you're starving your other system RAM to make it work.

BTW, I tried your suggestion a couple of years ago. While it technically worked, copying the necessary data to the RAM disk on every boot took too long and was a pain.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-01T22:27:36.413

I have a 128GB Samsung flash based hard drive and it is FAST. My whole system, VM and IDE included, load in less than one minute.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-01T23:05:08.117

Given sufficient RAM, this problem's been solved for a long time. If you have lots of RAM, stuff from the HD gets cached in it anyhow, and the HD is only the bottleneck the first time you're loading something at boot. As far as the initial boot time, I'd suggest using sleep/suspend mode and simply not rebooting your computer frequently.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-01T22:34:39.067

Personally I'd just buy a SSD disk, you could lose your whole soln at any time if your ram loses power.

Right now I have 4gb of ram and a 150gb 10k rpm velociraptor hard drive for my boot disk, running win xp pro 64bit and everything(VS 2008, sql management studio, and my testing VM's) is very fast.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-09-19T15:08:06.230

在 Linux 下 /dev/shm 是一个 ramdisk，因此您可能会使用它作为编译目标获得一些快速成功（比 rsync 源等更容易，如果您有的话，还可以减少机器中 SSD 的任何磨损）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-01T22:32:00.507

I do remember reading about doing this with netbeans a while ago. This article has quite a good guide on doing it in linux.

[NetBeans on speed](http://coffeecokeandcode.blogspot.com/2008/08/netbeans-on-speed.html)

Currently can't find an article on how to do it in windows, however I know it's possible.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-02T00:18:59.123

这可能不会让你买太多。如果你用你的 RAM 磁盘耗尽内存，你只会剥夺 OS RAM 的虚拟内存，这将导致更频繁的页面错误，从而可能会更多地写入硬盘。

> 如果您的 ram 失去动力，您随时可能失去整个解决方案。

元素是绝对正确的。无论出于何种原因，您的机器都可能随时锁定。如果您决定使用 RAM 磁盘，至少在您的桌面上有一个批处理文件，可以将所有内容复制到磁盘上，并经常运行它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-02T01:34:40.950

我之前[发布](https://stackoverflow.com/questions/354254/ramdrive-for-compiling-is-there-such-a-thing/354553#354553)了一个类似[问题](https://stackoverflow.com/questions/354254/ramdrive-for-compiling-is-there-such-a-thing)的答案。作为总结：是的，这是可能的，我曾经用我的浏览器来做（有一个关于如何让它在 linux 下运行的链接）。

正如其他人所提到的，如果你有大量的 RAM，那么无论如何都会为你缓存这些东西，但是 imo 拥有一个 ram 驱动器比让操作系统尝试处理它更明确一点。

如果你*知道*你一直想要 200mb 的代码在内存中，那么你就*知道*你可以放入一个 ram 驱动器并实现它。

但是，我确实想知道操作系统是否会缓存它两次（一次在内存驱动器上，一次在内存驱动器上），如果它不知道它在内存驱动器上...

# django - 将表单动态添加到 Django 表单集

> ID：501719
> 
> 赞同：277
> 
> 时间：2009-02-01T22:26:27.413
> 
> 标签：django

我想动态地将新表单添加到 Django 表单集，以便当用户单击“添加”按钮时，它会运行 JavaScript 将新表单（它是表单集的一部分）添加到页面。

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2009-03-21T20:58:02.783

我就是这样做的，使用[jQuery](http://www.jquery.com)：

我的模板：

```
<h3>My Services</h3>
{{ serviceFormset.management_form }}
{% for form in serviceFormset.forms %}
    <div class='table'>
    <table class='no_error'>
        {{ form.as_table }}
    </table>
    </div>
{% endfor %}
<input type="button" value="Add More" id="add_more">
<script>
    $('#add_more').click(function() {
        cloneMore('div.table:last', 'service');
    });
</script> 
```

在一个 JavaScript 文件中：

```
function cloneMore(selector, type) {
    var newElement = $(selector).clone(true);
    var total = $('#id_' + type + '-TOTAL_FORMS').val();
    newElement.find(':input').each(function() {
        var name = $(this).attr('name').replace('-' + (total-1) + '-','-' + total + '-');
        var id = 'id_' + name;
        $(this).attr({'name': name, 'id': id}).val('').removeAttr('checked');
    });
    newElement.find('label').each(function() {
        var newFor = $(this).attr('for').replace('-' + (total-1) + '-','-' + total + '-');
        $(this).attr('for', newFor);
    });
    total++;
    $('#id_' + type + '-TOTAL_FORMS').val(total);
    $(selector).after(newElement);
} 
```

它能做什么：

`cloneMore`接受`selector`作为第一个参数，`type`formset 的作为第二个参数。`selector`应该做的是将它应该复制的内容传递给它。在这种情况下，我传递它`div.table:last`以便 jQuery 查找最后一个具有`table`. 它的`:last`一部分很重要，因为`selector`它也用于确定将在之后插入新表单的内容。您很可能希望在其余表格的末尾使用它。该`type`参数是为了让我们可以更新`management_form`字段，特别是`TOTAL_FORMS`，以及实际的表单字段。如果您有一个充满`Client`模型的表单集，则管理字段的 ID 为`id_clients-TOTAL_FORMS`and `id_clients-INITIAL_FORMS`，而表单字段的格式为`id_clients-N-fieldname`with`N`是表格编号，以 . 开头`0`。因此，该函数使用`type`参数`cloneMore`查看当前有多少表单，并遍历新表单中的每个输入和标签，替换所有字段名称/id 之类的东西`id_clients-(N)-name`等等`id_clients-(N+1)-name`。完成后，它会更新`TOTAL_FORMS`字段以反映新表单并将其添加到集合的末尾。

这个功能对我特别有帮助，因为它的设置方式允许我在整个应用程序中使用它，当我想在一个表单集中提供更多表单时，并且不需要有一个隐藏的“模板”表单来复制只要我将表单集名称和表单布局格式传递给它。希望能帮助到你。

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2011-11-11T17:20:43.783

[`empty_form`](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#empty-form)使用作为模板的 Paolo 答案的简化版本。

```
<h3>My Services</h3>
{{ serviceFormset.management_form }}
<div id="form_set">
    {% for form in serviceFormset.forms %}
        <table class='no_error'>
            {{ form.as_table }}
        </table>
    {% endfor %}
</div>
<input type="button" value="Add More" id="add_more">
<div id="empty_form" style="display:none">
    <table class='no_error'>
        {{ serviceFormset.empty_form.as_table }}
    </table>
</div>
<script>
    $('#add_more').click(function() {
        var form_idx = $('#id_form-TOTAL_FORMS').val();
        $('#form_set').append($('#empty_form').html().replace(/__prefix__/g, form_idx));
        $('#id_form-TOTAL_FORMS').val(parseInt(form_idx) + 1);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-21T12:52:17.527

Paolo 的建议与一个警告非常有效 - 浏览器的后退/前进按钮。

如果用户使用后退/前进按钮返回表单集，则不会呈现使用 Paolo 脚本创建的动态元素。对某些人来说，这个问题可能会破坏交易。

例子：

1）用户使用“添加更多”按钮向表单集中添加两个新表单

2）用户填充表单并提交表单集

3) 用户点击浏览器中的后退按钮

4）Formset现在缩减为原来的form，所有动态添加的form都不存在了

这根本不是 Paolo 脚本的缺陷。但是 dom 操作和浏览器缓存的生活事实。

我想人们可以将表单的值存储在会话中，并在表单集加载以再次创建元素并从会话中重新加载值时具有一些 ajax 魔法；但取决于您希望如何成为同一个用户和表单的多个实例，这可能会变得非常复杂。

任何人都有一个很好的建议来处理这个问题？

谢谢！

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-02-09T20:49:11.133

模拟和模仿：

*   在单击“添加”按钮**之前**创建一个与情况相对应的表单集。
*   加载页面，查看源代码并记下所有`<input>`字段。
*   **单击“添加”按钮后**修改表单集以对应情况（更改额外字段的数量）。
*   加载页面，查看源代码并记录`<input>`字段的更改方式。
*   创建一些 JavaScript 以适当的方式修改 DOM 以将其从前**状态**移动到**后**状态。
*   将该 JavaScript 附加到“添加”按钮。

虽然我知道表单集使用特殊`<input>`的隐藏字段并且大致知道脚本必须做什么，但我不记得我脑海中的细节。我上面描述的是我会在你的情况下做的事情。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-03T14:53:19.233

对于那些正在寻找资源以更好地理解上述解决方案的编码人员：

[Django 动态表单集](http://schinckel.net/2017/02/05/django-dynamic-formsets/)

阅读上述链接后，Django 文档和以前的解决方案应该会更有意义。

[Django 表单集文档](https://docs.djangoproject.com/en/2.0/topics/forms/formsets/)

作为对我感到困惑的内容的快速总结：管理表格包含其中表格的概述。您必须保持该信息准确，以便 Django 了解您添加的表单。（社区，如果我的某些措辞在这里不妥，请给我建议。我是 Django 新手。）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-02-02T00:49:35.160

一种选择是创建一个包含所有可能表单的表单集，但最初将不需要的表单设置为隐藏 - 即`display: none;`. 当需要显示表单时，将其 css 显示设置为`block`或任何适当的。

如果不知道您的“Ajax”在做什么的更多细节，很难给出更详细的回应。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2010-11-04T14:00:25.380

另一个 cloneMore 版本，允许对字段进行选择性清理。当您需要防止多个字段被删除时使用它。

```
$('table tr.add-row a').click(function() {
    toSanitize = new Array('id', 'product', 'price', 'type', 'valid_from', 'valid_until');
    cloneMore('div.formtable table tr.form-row:last', 'form', toSanitize);
});

function cloneMore(selector, type, sanitize) {
    var newElement = $(selector).clone(true);
    var total = $('#id_' + type + '-TOTAL_FORMS').val();
    newElement.find(':input').each(function() {
        var namePure = $(this).attr('name').replace(type + '-' + (total-1) + '-', '');
        var name = $(this).attr('name').replace('-' + (total-1) + '-','-' + total + '-');
        var id = 'id_' + name;
        $(this).attr({'name': name, 'id': id}).removeAttr('checked');

        if ($.inArray(namePure, sanitize) != -1) {
            $(this).val('');
        }

    });
    newElement.find('label').each(function() {
        var newFor = $(this).attr('for').replace('-' + (total-1) + '-','-' + total + '-');
        $(this).attr('for', newFor);
    });
    total++;
    $('#id_' + type + '-TOTAL_FORMS').val(total);
    $(selector).after(newElement);
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-06-07T21:22:30.207

cloneMore 函数有一个小问题。由于它还清理了 django 自动生成的隐藏字段的值，因此如果您尝试保存具有多个空表单的表单集，它会导致 django 抱怨。

这是一个修复：

```
function cloneMore(selector, type) {
    var newElement = $(selector).clone(true);
    var total = $('#id_' + type + '-TOTAL_FORMS').val();
    newElement.find(':input').each(function() {
        var name = $(this).attr('name').replace('-' + (total-1) + '-','-' + total + '-');
        var id = 'id_' + name;

        if ($(this).attr('type') != 'hidden') {
            $(this).val('');
        }
        $(this).attr({'name': name, 'id': id}).removeAttr('checked');
    });
    newElement.find('label').each(function() {
        var newFor = $(this).attr('for').replace('-' + (total-1) + '-','-' + total + '-');
        $(this).attr('for', newFor);
    });
    total++;
    $('#id_' + type + '-TOTAL_FORMS').val(total);
    $(selector).after(newElement);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-03T16:40:57.893

因为上面的所有答案都使用 jQuery 并使一些事情变得有点复杂，所以我编写了以下脚本：

```
function $(selector, element) {
    if (!element) {
        element = document
    }
    return element.querySelector(selector)
}

function $$(selector, element) {
    if (!element) {
        element = document
    }
    return element.querySelectorAll(selector)
}

function hasReachedMaxNum(type, form) {
    var total = parseInt(form.elements[type + "-TOTAL_FORMS"].value);
    var max = parseInt(form.elements[type + "-MAX_NUM_FORMS"].value);
    return total >= max
}

function cloneMore(element, type, form) {
    var totalElement = form.elements[type + "-TOTAL_FORMS"];
    total = parseInt(totalElement.value);
    newElement = element.cloneNode(true);
    for (var input of $$("input", newElement)) {
        input.name = input.name.replace("-" + (total - 1) + "-", "-" + total + "-");
        input.value = null
    }
    total++;
    element.parentNode.insertBefore(newElement, element.nextSibling);
    totalElement.value = total;
    return newElement
}
var addChoiceButton = $("#add-choice");
addChoiceButton.onclick = function() {
    var choices = $("#choices");
    var createForm = $("#create");
    cloneMore(choices.lastElementChild, "choice_set", createForm);
    if (hasReachedMaxNum("choice_set", createForm)) {
        this.disabled = true
    }
}; 
```

首先，您应该将[auto_id](https://docs.djangoproject.com/en/1.10/ref/forms/api/#django.forms.Form.auto_id)设置为 false，从而禁用 id 和 name 的重复。因为输入的名字在表格中必须是唯一的，所以所有的识别都是用它们完成的，而不是用 id 完成的。您还必须替换`form`,`type`和 formset 的容器。（在上面的例子中`choices`）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-09T01:05:17.113

是的，如果您的条目数量有限，我还建议您将它们呈现在 html 中。（如果你不这样做，你将不得不使用另一种方法）。

你可以像这样隐藏它们：

```
{% for form in spokenLanguageFormset %}
    <fieldset class="languages-{{forloop.counter0 }} {% if spokenLanguageFormset.initial_forms|length < forloop.counter and forloop.counter != 1 %}hidden-form{% endif %}"> 
```

那么js就真的很简单了：

```
addItem: function(e){
    e.preventDefault();
    var maxForms = parseInt($(this).closest("fieldset").find("[name*='MAX_NUM_FORMS']").val(), 10);
    var initialForms = parseInt($(this).closest("fieldset").find("[name*='INITIAL_FORMS']").val(), 10);
    // check if we can add
    if (initialForms < maxForms) {
        $(this).closest("fieldset").find("fieldset:hidden").first().show();
        if ($(this).closest("fieldset").find("fieldset:visible").length == maxForms ){
            // here I'm just hiding my 'add' link
            $(this).closest(".control-group").hide();
        };
    };
} 
```

# vba - Progress bar using Office VBA

> ID：501721
> 
> 赞同：0
> 
> 时间：2009-02-01T22:26:57.133
> 
> 标签：vba, progress-bar, ms-office, ms-word

I have a small programme that opens and closes a number of different word documents while it runs. It loads some documents from the web so it takes a little while and I'd prefer to let the user watch a little progress bar or at least have a message in a form telling them to wait.

I can't seem to be able to keep that form on top of all other Office windows, however.

I have no problem with the code for the actual progress bar, just keeping the damn thing on top while the code is opening and closing windows. I tried hiding the application but this seems to prevent some of the code from running.

Regardless of whether I have modal or modeless set the form goes behind the activewindow and when it occasionally shows on top it won't repaint.

I may have just missed a "stayontop" property or something?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-02T15:48:19.807

我认为没有任何内置方法可以使表单在 VBA 中保持领先，但一个问题是，当您更新表单上的任何内容时，您是否调用了 DoEvents？我的经验是，除非您调用 DoEvents，否则表单不会重新绘制，例如，在循环中点击 Next 语句之前。

如果这不是您的问题，您可以使用 Windows API 调用将窗口放在顶部，但我不确定它是否会使用以下代码保持在顶部：

```
Private Declare Function FindWindow Lib "user32.dll" Alias "FindWindowA" (ByVal lpClassName As Any, ByVal lpWindowName As Any) As Long

Const SWP_NOMOVE = 2
Const SWP_NOSIZE As Long = 1
Const FLAGS = SWP_NOMOVE Or SWP_NOSIZE
Const HWND_TOPMOST = -1
Const HWND_NOTOPMOST = -2

Private Declare Function SetWindowPos Lib "user32" _
      (ByVal hwnd As Long, _
      ByVal hWndInsertAfter As Long, _
      ByVal x As Long, _
      ByVal y As Long, _
      ByVal cx As Long, _
      ByVal cy As Long, _
      ByVal wFlags As Long) As Long

Private Function SetTopMostWindow(hwnd As Long, Topmost As Boolean) As Long

   If Topmost = True Then 'Make the window topmost
      SetTopMostWindow = SetWindowPos(hwnd, HWND_TOPMOST, 0, 0, 0, 0, FLAGS)
   Else
      SetTopMostWindow = SetWindowPos(hwnd, HWND_NOTOPMOST, 0, 0, 0, 0, FLAGS)
      SetTopMostWindow = False
   End If
End Function

Private Function GetFormHwnd() As Long
    GetFormHwnd = FindWindow(CLng(0), Me.Caption)
End Function

Public Sub SetFormAsTopMostWindow()
    Call SetTopMostWindow(GetFormHwnd(), True)
End Sub 
```

我把它放在表单的代码模块中，它在移动其他应用程序时似乎可以工作；它保持在顶部。

# pdf - 将一个 pdf 或 ps 文件叠加在另一个文件之上

> ID：501723
> 
> 赞同：62
> 
> 时间：2009-02-01T22:27:11.283
> 
> 标签：pdf, postscript

我有两个 pdf 或 postscript 文件（我可以使用任何一个）。我想要做的是将每个页面合并到另一个页面上，以便文档 A 的第 1 页将与文档 B 的第 1 页组合以生成输出文档的第 1 页。这不是我必须以编程方式做的事情，尽管这会有所帮助。

有任何想法吗？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2009-02-04T02:41:55.480

您可以使用命令行工具[pdftk](http://www.pdfhacks.com/pdftk/)使用`stamp`or`background`选项对 pdf 文件执行此操作。

例如

```
$ pdftk file1.pdf background file2.pdf output combinedfile.pdf 
```

这仅适用于一页背景文件。如果您有多个页面，则可以改用该[`multibackground`](https://www.pdflabs.com/docs/pdftk-man-page/#dest-op-multibackground)命令。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-02-03T20:07:23.247

我通过使用[pyPdf](http://pybrary.net/pyPdf/)成功解决了这个问题（仅限 PDF 和 Python） ，特别是*mergePage*操作。

从文档：

```
# add page 4 from input1, but first add a watermark from another pdf:
page4 = input1.getPage(3)
watermark = PdfFileReader(file("watermark.pdf", "rb"))
page4.mergePage(watermark.getPage(0)) 
```

应该足以得到这个想法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-10T13:02:07.777

如果您只处理后记，则可能唯一的“分页符”是“显示页”运算符。
在这种情况下，您可以简单地从文件一的开头抓取 postscript 数据到“showpage”的第一个实例，对另一个文件执行相同的操作，然后连接这两个 postscript 块以创建新页面。

如果 2 个文件只有一页，那么您可以简单地加入 2 个文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-27T17:18:47.097

PDFbox for Java 支持 Overlay 类，它允许以这种方式合并 PDF。请参阅此答案：[使用 PDFBox 进行水印](https://stackoverflow.com/questions/8929954/watermarking-with-pdfbox)

但是，根据我的经验，PyPDF2 和 PDFbox 都不可靠，但这也许对某人有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2022-01-24T19:49:52.990

这里的许多答案似乎都已经过时了。对于使用 pdftk 的已接受答案尤其如此。Pdftk 很旧，错误处理很糟糕，需要旧版本的库，并且不再为 ubuntu 打包。如果可以避免的话，2022 年的任何人都不应该将 pdftk 用于任何事情。

Qpdf 是一个不错的开源程序，它做许多与 pdftk 相同的事情，它可以完成以下任务：

qpdf a.pdf --overlay b.pdf -- c.pdf

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-06-18T09:06:06.097

[`PdfFileStamp`带有类](http://www.aspose.com/documentation/.net-components/aspose.pdf.kit-for-.net/aspose.pdf.kit.pdffilestamp.html)的 Aspose.Pdf.Kit也可以做到这一点。它[大部分时间](https://stackoverflow.com/questions/6394834/)都能正常工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-02-08T17:21:53.643

我使用了 Mac OS 工具[PDFClerk Pro](http://sintraworks.com/index.php/sintraworks/downloads/)。我导入了 PDF 页面，然后使用“合并页面（堆叠）”选项将它们合并。这真的让我印象深刻。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-30T04:43:12.420

**2022**年以后

对于许多用户来说，PDFTK 仍然是一个强有力的竞争者，它为许多任务提供了简单的跨平台命令行。

> PDFtk Server 不需要 Adob​​e Acrobat 或 Reader，它可以在 Windows、Mac OS X 和 Linux 上运行。

您将在其他答案中看到多个命令。但一个缺点是它需要[获得分发许可。](https://www.pdflabs.com/tools/pdftk-server/)

> 需要商业许可证才能将 PDFtk 与您的商业产品一起分发。

另一个每日更新的跨平台解决方案是 Ghostscript（但 Windows 二进制文件通常是两年一次），它也需要商业许可证。

它的主要优势是能够合并来自 PostScript 和 PDF 的指定页面以及 PDFTK 未处理的其他格式。然而，它并不自称是最佳的 PDF 合并工具。同样，在 StackOverflow 的答案中有许多有据可查的方法来使用该祖父应用程序来处理不同的组合任务，但可能需要比快速的一种更复杂的方法，并且许多用户会将 PDL 或 PS 处理与 PDFTK（上图）结合起来进行最终覆盖。

***那么什么是经常更新的、可用于商业用途*** 的以及一次调用即可完成任务呢？答案是 QPDF（根据 Apache 许可证，版本 2.0 获得许可），它具有[覆盖和底层选项](https://qpdf.readthedocs.io/en/stable/cli.html?highlight=overlay#overlay-and-underlay-options)，还有太多其他功能无法列出，但仅是 PDF。

最简单的一种方法是从其他 2 个页面编写一个新页面，比如说第 1 页，而不更改任何一个源。缺点是包含密码在内的众多选项会使语法变得复杂，好消息是它可能会在下一个版本 11 中进行大修。还要注意它不喜欢带空格的文件名。

首先从file1生成一个新的空输入文件，第1页（很简单）

```
qpdf --empty --pages "file1.pdf" 1 -- "output.pdf" 
```

现在用 file2 的第一页覆盖它（这有点复杂）

```
qpdf output.pdf --overlay "file2.pdf" --from=1 -- --replace-input 
```

这些命令可以组合在一个更简单的行中，对于这个例子，让我们使用文件 1 的第 2 页

```
qpdf --empty --pages "file1.pdf" 2 --  --overlay "file2.pdf" --from=1 -- "output2.pdf" 
```

您还需要注意，混合页面大小会起作用，但可能不会像预期的那样，因此第二个在第一个被居中并缩小以适合。

[![在此处输入图像描述](https://i.stack.imgur.com/xXGjR.png)](https://i.stack.imgur.com/xXGjR.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-03T20:09:43.040

您可以将两个 pdf 都转换为图像，然后将一个覆盖在另一层之上。

您可以使用它的合适图形库将起作用。

只要您没有在您选择的语言或图形/pdf 库中遇到问题，上述水印建议也具有很大的潜力。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-11T11:22:15.080

对于 OS X，有 PDF 信头。除了覆盖 PDF 之外，什么也不做。[https://itunes.apple.com/us/app/pdf-letterhead/id976548033?mt=12](https://itunes.apple.com/us/app/pdf-letterhead/id976548033?mt=12)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-05-23T02:37:29.547

VeryPDF PDF Editor 有 PDF Overlay 功能，看这个网页，

[http://www.verypdf.com/wordpress/201304/how-to-overlay-pdf-to-another-pdf-35885.html](http://www.verypdf.com/wordpress/201304/how-to-overlay-pdf-to-another-pdf-35885.html)

# oop - 用于将自定义对象作为参数传入的 OCaml 语法

> ID：501731
> 
> 赞同：4
> 
> 时间：2009-02-01T22:28:49.750
> 
> 标签：oop, syntax, ocaml

我正在尝试掌握 OCaml 语言语法，但在应用一些 OOP 结构时遇到了一些麻烦。我使用以下代码的目标是拥有一个继承自虚拟类 foo 的类 bar。虚拟类包含三个虚拟方法，我希望将“玩家”对象的实例作为参数。当我编译下面的代码时，我得到了错误：方法 doThis 有类型 'a -> 'b 但应该有类型 player 。这是什么意思（记住，我是新手），我该如何纠正它？

谢谢！

```
class player =
object

end;;

class virtual foo =
object (self)
 method virtual doThis : player
 method virtual doThat : player
 method virtual notifyAll : player array
end;;

class bar (playersIn: player array) =
object (self)
 inherit foo
 method doThis (p:player) = Printf.printf "%s\n" "This!"
 method doThat (p:player) = Printf.printf "%s\n" "That!"
 method notifyAll (p:player array) = Printf.printf "%s\n" "Notifying!"
end;; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-01T22:33:55.027

（我不知道 OCaml，但我知道 F#，它们很相似，所以希望我猜对了。）

尝试改变

```
method virtual doThis : player 
method virtual doThat : player 
method virtual notifyAll : player array 
```

到

```
method virtual doThis : player -> unit
method virtual doThat : player -> unit
method virtual notifyAll : player array -> unit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-08T14:42:09.453

I believe the previous answer to this is correct: the methods in question need their types to be functions that return unit.

Another, more general piece of advice: don't start learning OCaml by starting to learn the object system. Objects in OCaml can be useful, but the cases where you really want to be programming with objects are few and far between. And you won't be able to understand OCaml's object system until you get a good grip on the core language. Focus on how to solve your problems using basic algebraic datatypes (variants, tuples, records), ordinary parametric polymorphism (as opposed to the subtyping you see with polymorphic variants and objects), and modules (but not functors).

Get an understanding of these basic tools before playing around with objects. Most problems you would solve with objects in other languages are solved best in OCaml without them.

# html - 我如何纺织和消毒 html？

> ID：501737
> 
> 赞同：5
> 
> 时间：2009-02-01T22:30:22.103
> 
> 标签：html, ruby-on-rails, escaping, textile

现在我遇到了一些愚蠢的情况。我希望用户能够使用纺织品，但他们不应该在他们的条目周围乱用我的有效 HTML。所以我必须以某种方式转义 HTML。

*   `html_escape(textilize("</body>Foo"))`会破坏纺织品，而

*   `textilize(html_escape("</body>Foo"))`会起作用，但会破坏各种 Textile 功能，如链接（写为`"Linkname":http://www.wheretogo.com/`），因为引号将被转换为`&quot;`并因此不再被纺织品检测到。

*   `sanitize`没有做得更好。

有什么建议吗？我不想使用*Tidy*来解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-04T19:46:29.187

对于遇到同样问题的人：如果您使用的是**RedCloth gem**，您可以定义自己的方法（在您的助手之一中）。

```
def safe_textilize(s)
  if s && s.respond_to?(:to_s)
    doc = RedCloth.new(s.to_s)
    doc.filter_html = true
    doc.to_html
  结尾
结尾

```

文档摘录：

> 用于设置安全限制的访问器。
> 
> 如果您在不希望用户滥用 HTML 做坏事的公共场所（例如 Wiki）使用 RedCloth 进行格式化，这是一件好事。
> 
> 如果`filter_html`设置，不是由 Textile 处理器创建的 HTML 将被转义。或者，如果`sanitize_html`设置，HTML 可以通过 Textile 处理器，但未经授权的标签和属性将被删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-09T14:43:56.277

这对我有用，并且可以防止我尝试过的每一次 XSS 攻击，包括在 pre 和代码块中的 onmouse... 处理程序：

```
<%= RedCloth.new( sanitize( @comment.body ), [:filter_html, :filter_styles, :filter_classes, :filter_ids] ).to_html -%> 
```

最初的清理删除了许多潜在的 XSS 漏洞，包括鼠标悬停。

据我所知：filter_html 转义了除代码和 pre 之外的大多数 html 标签。其他过滤器在那里是因为我不希望用户应用任何类、ID 和样式。

我刚刚用你的例子测试了我的评论页面

```
"</body>Foo" 
```

它完全删除了流氓身体标签

我正在使用 Redcloth 4.2.3 版和 Rails 2.3.5 版

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-01T23:33:16.873

看起来纺织品根本不支持你想要的。

您确实只想允许仔细控制的 HTML 子集，但 Textile 旨在允许任意 HTML。我认为在这种情况下你根本不能使用纺织品（除非它支持那种限制）。

您需要的可能是一种特殊的“受限”版本的纺织品，它只允许“安全”标记（定义它可能已经很棘手）。但是，我不知道这是否存在。

您可能会查看[BBCode](http://en.wikipedia.org/wiki/Bbcode)，它允许限制可能的标记。

# .net - Configuration strategy for multiple modules

> ID：501773
> 
> 赞同：0
> 
> 时间：2009-02-01T22:48:45.623
> 
> 标签：.net, configuration

Are there different strategies for configuration when you have multiple modules in the same application? I have an application that uses a CommonLib library which is maintained by some other in-house group, then we are using some 3rd party tools as well that need to be configured. Everything seems to depend on configuration settings being put into the app.config but I can't help thinking that there might come a time where there will be conflicts .. e.g. our CommonLib uses a "username" setting that is being fetched from the element.

Can anyone comment on how this should be done properly?

Should everything be bundled up in one configuration file or could each module have its own configuration file somehow? How would something like that be implemented?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-01T22:52:23.167

If you are doing this kind of development, you're going to want to use your own [System.Configuration.ConfigurationSection](http://msdn.microsoft.com/en-us/library/2tw134k3(VS.80).aspx) - based type instead of just throwing everything into the appSettings key of your XML file. That goes for your vendors too. "appSettings" should only be for application-specific settings, and not for configuring your libraries.

# c++ - 将 C++ 模板类添加到列表中

> ID：501774
> 
> 赞同：1
> 
> 时间：2009-02-01T22:48:55.717
> 
> 标签：c++, templates

我有一个模板类 C_Fo​​o<T>，它专门用于多种方式。

```
struct Bar_Base { ... };
struct Bar_1 : public Bar_Base { ... };
struct Bar_2 : public Bar_Base { ... };
struct Bar_3 : public Bar_Base { ... };

class C_Foo<T> { ... };

class C_Foo_1 : public C_Foo<Bar_1> { ... };
class C_Foo_2 : public C_Foo<Bar_2> { ... };
class C_Foo_3 : public C_Foo<Bar_3> { ... }; 
```

和实例化如下：

```
C_Foo_1      foo1;
C_Foo_2      foo2;
C_Foo_3      foo3; 
```

我有一组常用操作，所有这些都在 C_Fo​​o 上定义，我想在 foo1、foo2 和 foo3 上执行这些操作。我尝试了以下方法：

```
vector<C_Foo *>  v;
v.push_back(&foo1);
v.push_back(&foo2);
v.push_back(&foo3); 
```

但是我得到编译错误，大概是因为编译器不确定如何从 C_Fo​​o_1 转到 C_Fo​​o。

有可能做这样的事情吗？我希望能够遍历 foo1 .. fooN 并对它们执行相同的操作，而不必像这样复制和粘贴样板代码：

```
foo1.do_stuff();
foo2.do_stuff();
foo3.do_stuff(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-01T23:00:46.753

如果函数不依赖于模板参数，您可以这样做：

```
// note: not a template
class C_Foo_Common {
public:
    virtual void do_stuff() = 0;
};

template<typename T>
class C_Foo : public C_Foo_Common { 
    virtual void do_stuff() {
        // do stuff...
    }
};

vector<C_Foo_Common *>  v;
v.push_back(&foo1);
v.push_back(&foo2);
v.push_back(&foo3);
// now, you can iterate and call do_stuff on them. 
```

但是如果 C_Fo​​o_Common 中的函数需要知道类型`T`（例如，有另一个依赖于 T 的返回类型），那就不可能了。`C_Foo<Bar_1>`是与 不同的类型`C_Foo<Bar_2>`。您可以改用有区别的联合。这些跟踪存储在其中的内容并且是完全通用的：

```
typedef boost::variant<
    C_Foo<Bar_1>*, C_Foo<Bar_2>*, C_Foo<Bar_3>*
> variant_type;
vector<variant_type> v;
v.push_back(&foo1);
v.push_back(&foo2);
v.push_back(&foo3); 
```

变体知道它存储了什么，并且可以调用重载于可以存储在其中的类型的函数。阅读 的文档[`boost::variant`](http://www.boost.org/doc/libs/1_37_0/doc/html/variant.html)以获取有关如何获取变体包含的内容的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-01T22:55:52.457

问题是`C_Foo`无法实例化，因为它需要模板参数。

您可以创建另一个基类，并在其中包含一组常用操作：

```
class C_FooBase { ... };

template<typename T>
class C_Foo<T> : public C_FooBase { ... };

class C_Foo_1 : public C_Foo<Bar_1> { ... };
class C_Foo_2 : public C_Foo<Bar_2> { ... };
class C_Foo_3 : public C_Foo<Bar_3> { ... }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-01T23:01:26.813

这是因为 C_Fo​​o<T> 不作为一个类存在。C_Foo<Bar1> 是真正的类，与 C_Fo​​o<Bar2> 无关，它们是完全不同的类。模板是编译器复制代码的工具，它不是像 Java 或 C# 中的泛型那样的真正类。

如果您再次查看您的代码，认为 C_Fo​​o<Bar1>、C_Foo<Bar2> 和 C_Fo​​o<Bar3> 是完全不同的类并且没有任何共同之处，那么您就会明白为什么您不能按照您想要的方式做事.

就像strager说的，只用一个真正的基类作为通用类

# c# - 与非托管代码相比，在 TCP/UDP 套接字上读取/写入大量数据时托管代码是否存在性能损失？

> ID：501775
> 
> 赞同：1
> 
> 时间：2009-02-01T22:50:54.823
> 
> 标签：c#, performance, tcp, sockets, unmanaged

您认为托管应用程序中使用的 C# TCP/UDP 套接字可以处理（大致）与本机 C++ 版本相同数量的数据吗？如果不是，我们应该考虑使用原生还是 c# 更好的数据量，托管端实现的最大障碍是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-01T22:57:40.237

根据我的经验，与托管或非托管代码相比，网络速度和延迟是影响性能的更大因素。实际上这在数据库访问方面是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-01T22:58:39.703

答案在某种程度上必须取决于硬件。

我建议你编写一些原型程序，进行实验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-02T05:18:45.210

两者都可以处理相同数量的数据。问题是速度和内存使用。在大多数情况下，C# 已经证明自己的速度慢得可以忽略不计：所以没有理由不使用它。将 C# 用于套接字时会产生一些内存影响（主要是，会发生大量固定，这会使您的堆碎片化）。[此处](https://www.coversant.net/Coversant/Blogs/tabid/88/EntryID/9/Default.aspx "Coversant 博客文章")记录了正确处理的最重要的事情。如果链接坏了（我这边不起作用，但也许那是我们狡猾的互联网）谷歌[缓存](http://74.125.77.132/search?q=cache:Akb8LBBr0tcJ:https://www.coversant.net/Coversant/Blogs/tabid/88/EntryID/9/Default.aspx+site:www.coversant.net+buffer+pool+C%23+sockets&hl=en&ct=clnk&cd=2&gl=za "缓存副本")了它。

# sharepoint - 在哪里可以找到适用于 SharePoint 的优秀编程资源？

> ID：501776
> 
> 赞同：4
> 
> 时间：2009-02-01T22:51:51.293
> 
> 标签：sharepoint, sharepoint-2007

我一直在努力寻找一本书或 Web 参考资料，让我很好地了解如何构建、测试和部署 ASP.NET 页面、控件和 Web 部件到 SharePoint 网站。到目前为止，我发现的只是拖拽式的东西或管理的东西。

SharePoint 在扩展 ASP.NET 时真的很灵活吗？一系列入门视频或教程将是理想的选择。

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-01T23:52:22.983

它只是 ASP.NET，可扩展至一定限度。这一切都取决于你想做什么。

我发现 wrox 书籍非常有用：Professional SharePoint 2007 Development Expert WSS 3.0 and MOSS 2007 Programming

你检查[过 http://MSSharePointDeveloper.com](http://MSSharePointDeveloper.com)了吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-03T15:14:30.967

另一个很好的开发人员参考是[Inside Windows SharePoint Services 3.0](http://www.microsoft.com/learning/en/us/books/9692.aspx)。这是 Microsoft 推荐的核心 WSS 开发人员考试读物，通常被视为 SharePoint 开发的圣经。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T01:07:34.873

如果您要**使用 Sharepoint 进行任何发布，** Andrew Connell 的书[Professional Sharepoint Content Management](https://rads.stackoverflow.com/amzn/click/com/0470224754)是必读的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-10T02:00:12.357

他们今天在 Twitter 上宣布推出[MSDN Office Developer Bookshop](http://msdn.microsoft.com/en-us/office/dd547103.aspx)

[http://twitter.com/MSDN_Office](http://twitter.com/MSDN_Office)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-04T23:02:08.167

我非常幸运地通过[PilotHouse Consulting 的](http://www.pilothouseconsulting.com)SharePoint 开发 DVD 获得了一些 SharePoint 开发的基础知识。不过，我将查看这些其他答案。

# api - 为什么 DSL 需要解析工具？

> ID：501787
> 
> 赞同：5
> 
> 时间：2009-02-01T22:58:10.190
> 
> 标签：api, parsing, dsl-tools, dsl

难道 DSL 不能像 API 一样简单，因此不需要解析器吗？还是我误解了领域特定语言的真正含义？我认为它指的是解决特定领域问题的任何有组织的规则集。API 似乎符合这个定义，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-01T23:17:17.890

您可以将 DSL 嵌入到更通用的编程语言中。这通常是一个很好的解决方案。（你可以说这个 DSL 采用特定 API 的形式。）

您还可以使用自己的解释器创建一种单独的语言来表示您的领域的概念。这往往是一项更大的工作，而且通常没有必要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-01T23:15:20.763

您将概念与实现混淆了。领域特定语言是被认为与问题领域“接近”的想法的任何表示，而不是用于描述一般解决问题的通用语言。

是的，DSL 可能被实现为 API，它提供了引用问题域中特定概念的功能，但 DSL 在表示为文本文件时同样有效。

*The Pragmatic Programmer: From Journeyman to Master*很好地描述了 DSL 及其有用的环境，并附有示例。强烈推荐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T23:02:03.503

您仍然只有宿主语言的语义。

例如：命令式语言中的函数式编程不起作用。所以你有一个功能性的 DSL 添加到这个命令式语言中......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-01T23:32:37.890

是的，绝对是——如果宿主语言有足够的灵活性来支持它，那么*单纯的*API 就可以很好地作为 DSL。

Ruby 是一种非常好的语言，特别是考虑到可选的括号和其他灵活性。

*   Rails 通常被称为用于编写数据库驱动的 Web 应用程序的 DSL。

*   Rake 是一个带有 DSL 的构建系统，用于编写（更智能的）makefile。

我自己的[OOFILE](http://www.oofile.com.au/databasedev.html)是一个框架，您可以将其视为用 C++ 编写数据库应用程序的 DSL——它受到 dBase 的启发，并大量使用了 C++ 运算符重载、本地对象和流习语。

Forth 是一种经典的语言，它模糊了 DSL 和 API 之间的界限，因为 Forth 程序仅由一系列空格分隔的单词组成。可能 Forth DSL 最令人印象深刻的例子是[Abundance](http://mindprod.com/products4.html#ABUNDANCE) - *Abundance 是一种基于 Forth 的商业编程语言，用 BBL Forth 编写。BBL 是一个 32 位的 DOS FORTH 编译器。按原样分发。请参阅警告。这不适合胆小的人。主要是为第三世界开发软件的人感兴趣，您需要在旧的 klunker XT 和 AT 计算机上快速执行。您可以使用它编写一些非常复杂的数据输入程序，这些程序将围绕现代数据输入程序运行。*

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2009-05-11T17:55:44.353

当然，图形 DSL 根本不需要解析。

# asp.net-mvc - multi form page issue in asp.net mvc

> ID：501813
> 
> 赞同：0
> 
> 时间：2009-02-01T23:17:31.837
> 
> 标签：asp.net-mvc

Inside a form for adding a category I am rendering a control that contains a second form for adding a subcategory. The category form's action is category/add while the inner form's action is ../addSubcategory. My problem is that when submitting the inner form, my Add action is called.

So, my question is this: how can i make my inner form fire action addSubcategory?

Any help would really be appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-01T23:36:08.477

in case you're using AJAX to post, you could write your own js methods that fire on the click of the submit button, calling the correct action methods.

in case you're not using AJAX, i would recommend separating the two forms in your markup, and then aligning the subcategory form inside the category form with css. use an empty div as a "spacer" in the category form, to make room for the subcategory form.

semi-pseudo-example, to (hopefully) make it more clear what i mean:

```
<form name="categoryForm" id="catForm" action="/Category/Add">
<!-- some form elements here... -->
<div id="subCategorySpacer">&nbsp</div>
<!-- maybe some more form elements... -->
<input type="submit">
</form>

<form name="subCategoryForm" id="subCatForm" action="/Category/addSubcategory">
<!-- form elements here too. and a submit button -->
</form> 
```

and then you move the subcategory form into the place where you have your spacer div, using css. naturally, this requires you to know the exact sizes of the forms, or to use javascript to resize them on the clientside.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T14:15:26.593

我担心你说的是“内在形式”。一个页面上可以有两个（或多个）表单，但不能嵌套它们。这可能是导致您的错误的原因。

无论有没有 AJAX，您都需要在页面上有两个单独的表单。我强烈建议使用实际表单，即使使用 AJAX 提交也是如此，因为如果您不这样做，您将无法优雅地回退到禁用 JavaScript 的用户的常规表单提交。ASP.NET MVC Ajax.Form 助手将为您处理这些问题。确保在控制器操作中测试 Request.IsAjaxRequest 以确定是返回 JSON 还是返回新视图。

# sql - SQL 复制 - 只是添加一篇文章会导致它复制吗？

> ID：501815
> 
> 赞同：1
> 
> 时间：2009-02-01T23:18:41.023
> 
> 标签：sql, replication

我正在向网站添加 SQL 复制（事务性的、具有许多订阅者的单一发布者/分销商，使用 SQL 2005），并在手册和 Google 上到处搜索。

我很好奇——我是否必须实际为新对象创建一个快照才能传播，还是将该新对象（例如，表、存储过程、函数）添加到列表中，将其传播给远程订阅者？

* * *

谢谢你，但我还是很困惑。我有一个初始快照工作的标准事务复制，其中主 SQL 2005 数据库确实与订阅节点（机器）同步。但是当我向发布者添加新的存储过程或表，并将它们作为文章添加到发布中时，它们似乎不会自动转移到订阅框。检查订阅和发布者的属性似乎没有发现任何会复制这些更改的设置。（我确实打开了“复制模式更改。）我必须遗漏一些简单的东西......每次我创建一个新的存储过程或表或 UDF 时，我都必须生成一个新的快照。整个数据库，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T19:39:28.203

您需要运行快照，但它只会传播已更改的内容（新内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T00:07:29.457

根据订阅的配置，您可能需要也可能不需要在添加新文章后显式更新它们。

[MSDN 详细信息](http://msdn.microsoft.com/en-us/library/ms146887(SQL.90).aspx)

# c++ - 为什么 cout 打印 char 数组与其他数组不同？

> ID：501816
> 
> 赞同：18
> 
> 时间：2009-02-01T23:19:33.907
> 
> 标签：c++, arrays, pointers

我正在使用 C++ 来了解指针的工作原理。我有这段代码使用数组，我使用它只是为了了解等价物如何与指针一起使用。

```
int main() {    
    int arr[10] = {1,2,3};    
    char arr2[10] = {'c','i','a','o','\0'};
    cout << arr << endl;
    cout << arr2 << endl;
} 
```

但是，当我运行它时，`arr`输出整数数组的第一个元素的地址（如预期的那样），但`arr2`不输出字符数组的第一个元素的地址；它实际上打印“ciao”。

我错过了什么或者我还没有了解到什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-02-01T23:26:52.020

`const void*`重载 for和 for的是 operator<< `const char*`。您的 char 数组被转换为`const char*`并传递给该重载，因为它比 to 更适合`const void*`。但是，int 数组被转换`const void*`并传递给该版本。operator<< 的版本`const void*`只输出地址。采用 的版本`const char*`实际上将其视为 C 字符串并输出每个字符，直到终止空字符。如果您不希望这样，请在将 char 数组`const void*`传递给 operator<< 时将其显式转换为：

```
cout << static_cast<const void*>(arr2) << endl; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-01T23:23:42.540

因为 cout`operator <<`被重载`char*`以输出字符串，并且`arr2`匹配它。

如果您想要地址，请尝试将字符数组转换为 void 指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-01T23:21:51.313

char* 有一个标准重载，它输出一个以 NUL 结尾的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-02T00:13:02.177

虽然强制转换可能是一种更有意义的方法，但您也可以使用 addressof 运算符：

```
cout << &arr2 << endl; 
```

# python - 如何在没有 Komodo -ide 的情况下执行 Python 代码？

> ID：501817
> 
> 赞同：-1
> 
> 时间：2009-02-01T23:19:44.357
> 
> 标签：python, ide, executable

我在没有 IDE 的情况下这样做：

```
$ ipython
$ edit file.py
$ :x (save and close) 
```

它执行 Python 代码，但不是我使用 Pygame 的代码。它给：

> 警告：执行文件失败：

在 IDE 中，我的代码执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-02T00:09:58.827

如果某些东西在 中不起作用`ipython`，请尝试使用真正的 Python 解释器（只是`python`）；`ipython`有已知的错误，并且在真正的解释器中工作的代码经常失败。

在类 UNIX 平台上，您的脚本应该以 shebang 开头——即类似于以下的行：

```
#!/usr/bin/env python 
```

应该是第一行（并且应该有一个标准的 UNIX 行结尾）。这告诉操作系统使用在 中找到的第一个 python 解释器执行您的代码`PATH`，假设您的脚本具有可执行权限集并作为程序调用。

另一种选择是手动启动程序——如下例所示：

```
$ python yourprogram.py 
```

...或者，使用特定版本的解释器（如果安装了多个）：

```
$ python2.5 yourprogram.py 
```

# c - calloc(4, 6) 和 calloc(6, 4) 一样吗？

> ID：501839
> 
> 赞同：38
> 
> 时间：2009-02-01T23:36:57.583
> 
> 标签：c, memory-management

我是一名初学者 C 程序员，我认为会是这种情况，但如果可能的话，我希望得到一些肯定。

如果它们相同，为什么不只取一个论点呢？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-02-01T23:46:53.243

人们大多使用分配例程为一定数量的项目分配空间，因此`calloc()`可以很好地指定它。因此，例如，如果您想要 100 个整数或 20 个您自己的结构的空间：

```
int *pInt = calloc (100, sizeof(int));
tMyStruct *pMyStruct = calloc (20, sizeof(tMyStruct)); 
```

`malloc()`这段代码实际上看起来比等效调用稍微“更好” ：

```
int *pInt = malloc (100 * sizeof(int));
tMyStruct *pMyStruct = malloc (20 * sizeof(tMyStruct)); 
```

但是，对于经验丰富的 C 编码人员来说，并没有真正的区别（当然除了零初始化）。

我不得不说我*从来没有*在野外使用过calloc，因为我几乎总是在创造一个`struct`零没有意义的地方。我更喜欢手动初始化所​​有字段以确保获得所需的值。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-02-02T12:02:23.990

`calloc(nelem, elsize)`对于发布的出色回复，我想在 using与之间添加一点区别`malloc(nelem * elsize)`：质量实现`calloc`将确保如果您的`nelem`和`elsize`大到足以在相乘时导致整数溢出，它将失败而不是导致分配不足，就像一个天真的`malloc`调用那样。

仅此功能就足以让我更`calloc`喜欢`malloc`. [背景阅读。](http://en.wikipedia.org/wiki/Integer_overflow#Security_ramifications)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-02-02T01:05:16.283

calloc(4, 6) 和 calloc(6, 4)**不**一样：

在典型的 32 位/64 位系统上，第一个分配 32 个字节，第二个分配 24 个字节。

* * *

```
void *calloc(size_t nelem, size_t elsize); 
```

关键点是 calloc 必须返回内存，就好像它作为数组正确对齐一样。它旨在分配一个数组并按如下方式使用：

```
A *p = (A*)calloc(count, sizeof(A));
for (int i = 0; i < count; ++i)
{
    f(&(p[i]));
    // f(p + i) is also valid
} 
```

或者

```
A *p = (A*)calloc(count, sizeof(A));
for (A *q = p; q != p + count; ++q)
{
    f(q);
} 
```

calloc 应该考虑到目标系统的填充和其他操作要求来分配数组。因此，在大多数 32 位机器上，需要将 6 字节结构填充到 8 字节，它会分配 4 批 8 字节。

第一个参数是 sizeof() 的 calloc 很可能是一个错误，应该进行调查。

第二个参数不是 sizeof(atype) 的 calloc 未定义。它充满了隐藏的假设，移植起来很危险。

**澄清：** 在典型的 32 位/64 位系统上，一个结构可能会被填充并对齐到 32 位的倍数。因此，在这些系统上 sizeof*不会*返回 6 个字节。事实上，如果编译器/平台需要的话，不能保证编译器不会填充和对齐 16 个字节的倍数。

我的回答是基于你不应该对结构大小做出假设的事实。它们可以随着编译器选项或目标平台而改变。只要确保你的第二个参数是一个 sizeof 表达式，**不要做任何假设**。

* * *

从[标准](http://www.opengroup.org/onlinepubs/000095399/functions/calloc.html)：

> calloc() 函数应为每个以字节为单位的大小为 elsize 的 nelem 元素数组分配未使用的空间。该空间应初始化为所有位 0。
> 
> 如果分配成功，则返回的指针应适当对齐，以便可以将其分配给指向任何类型对象的指针，然后用于访问分配的空间中的此类对象或此类对象的数组（直到空间被显式释放或重新分配）。每个这样的分配都应产生一个指向与任何其他对象不相交的对象的指针。返回的指针应指向分配空间的开始（最低字节地址）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-02-02T01:44:18.483

尽管接受了答案（我认为这是正确的），但由于对齐而分配了多少字节似乎存在混淆。所以这里有一个使用 gcc-4.3 在我的 32 位 Linux 上的小测试：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  char* p1 = calloc(6, 4);
  char* p2 = calloc(4, 6);
  char* p3 = calloc(1,1);
  printf("%p, %p, %p\n", p1, p2, p3);
  return 0;
} 
```

结果是：

```
0x826b008, 0x826b028, 0x826b048 
```

这表明两者都`calloc(6,4)`分配`calloc(4,6)`了相同数量的内存，在我的系统上*四舍五入*为 32 字节。将数字更改为`calloc(3,4)`and`calloc(4,3)`将给出以下结果：

```
0x95d2008, 0x95d2018, 0x95d2028 
```

这表明当请求 12 个字节并将其分配给程序时，保留了 16 个字节。在任何一种情况下，`calloc(a,b)`和`calloc(b,a)`调用对内存使用都有相同的影响。

* * *

由 Jonathan Leffler 添加，因为 300 个字符永远不够。

考虑这个程序，它像一个名副其实的筛子一样泄漏内存，但证明了一点：

```
#include <stdlib.h>
#include <stdio.h>

int main()
{
    int i, j, k;

    for (i = 1; i < 17; i++)
        for (j = 1; j < 9; j++)
            for (k = 0; k < 4; k++)
                printf("(%2d,%d)%d: %p\n", i, j, k, calloc(i, j));
    return(0);
} 
```

在 Windows 上，在 Cygwin 下，这首先分配相隔 16 个字节的块（实际上，第二个块在第一个块之后 24 个字节，但此后，它们相隔 16 个字节）。分配 (2,7) 时，块地址开始递增 24 个字节；同样，(3,4) 分配块 16 字节，但 (3,5) 分配块 24 字节。而且，作为记录，(4,6) 和 (6,4) 都返回相隔 32 个字节的指针。

这只是表明存在与分配调用相关的一些开销。如果您查看 K&R 中 malloc() 等人的原型实现，您会发现块的大小存储在您有权使用的内存之前。不同的实现做这些事情的方式不同；那些担心内存被践踏的人会避免将控制数据存储在用户可能造成严重破坏的地方附近。

当您使用 calloc(4,6) 时，您只能可靠地访问 24 字节的数据。即使您的实现为您提供了相隔 32 个字节的返回值，您也不能安全地使用超过您请求的 24 个字节的任何值。并且 malloc() 的调试版本将观察您是否超出了您要求的范围。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-02-02T00:57:16.893

有一个细微的区别：Calloc 可以决定仅在需要时将内存清零，然后知道元素的大小是有优势的。

我不能说出任何这样做的实现，但它是为此而考虑的。

举个例子：

一个分配了 4GB 的内存，但系统只有 2GB：将 2GB 的零写入虚拟内存是没有意义的，因此系统可以在该内存上设置一个脏标志，以在它被加载时将其归零记忆。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-01T23:38:53.803

这是相同的。原因是因为大多数时候您希望使用`sizeof`运算符作为参数之一。如果传递两个参数让您感到困扰，请调用`malloc()`具有单个参数的调用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-01T13:41:05.790

还有另一种方法可以研究这个问题。

GNU C 库是这样定义 calloc 的：

```
void * __libc_calloc (size_t n, size_t elem_size)
{
  // ... (declarations)

  /* size_t is unsigned so the behavior on overflow is defined.  */
  bytes = n * elem_size;
#define HALF_INTERNAL_SIZE_T \
  (((INTERNAL_SIZE_T) 1) << (8 * sizeof (INTERNAL_SIZE_T) / 2))
  if (__builtin_expect ((n | elem_size) >= HALF_INTERNAL_SIZE_T, 0))
    {
      if (elem_size != 0 && bytes / elem_size != n)
        {
          __set_errno (ENOMEM);
          return 0;
        }
    }

  void *(*hook) (size_t, const void *) = atomic_forced_read (__malloc_hook);
  if (__builtin_expect (hook != NULL, 0))
    {
      sz = bytes;
      mem = (*hook)(sz, RETURN_ADDRESS (0));
      if (mem == 0)
        return 0;

      return memset (mem, 0, sz);
    }

  sz = bytes;

  // ...more stuff, but no mention of n & elem_size anymore
} 
```

因此，至少在 glibc 中，这两个调用确实具有相同的效果。

# css - 扩展边界

> ID：501840
> 
> 赞同：0
> 
> 时间：2009-02-01T23:37:23.060
> 
> 标签：css, border

我有一个图像将在窗口中居中（左右），没有左边框，但有一个右边框。我想知道上边框是否有可能从页面的最左侧（经过图像）开始并停在右边框，而下边框是否可以从图像的左端开始并延伸到所有窗口右侧的方式。顶部和底部边框由两个不同的重复背景组成，如果需要，左边框也可以是。

我一直在考虑这个问题，但无法提出任何解决方案......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-01T23:55:27.530

您可能想澄清您愿意变得多么灵活。您可以通过多种方式进行处理。您是否希望顶部和底部边框延伸到视口的边缘（因此需要它们是流体宽度）？

`background-position`您可以使用带有滑动门技术的背景图像来处理此问题，或者您可以使用无关标记创建一个三列流体宽度布局，其中您的图像位于中心。

这取决于您，但使用三列技术，您可以`divs`通过 JavaScript 插入额外的（或您想使用的任何内容），这样您的源中就不会有空容器，并使用`border-top`and`border-bottom`而不是背景图像（因此减少页面的一些加载时间）。

*编辑：*为了澄清，你希望它看起来像这样的 Ascii 绘图：

```
_______________
               |img|_____________________ 
```

*编辑*：对于流体宽度布局，请参阅 CSS 布局的众多资源之一，这是一个很好的概要： [http ://www.smashingmagazine.com/2007/01/12/free-css-layouts-and-templates/](http://www.smashingmagazine.com/2007/01/12/free-css-layouts-and-templates/)

然后在你的左列和右列上，你会分别做`border-top`和`border-bottom`（或者如果你想要更漂亮的边框，可以使用背景图像），给你的图像边框，并设置你的三个容器的高度，使边框排列在一起。希望有帮助。

# .net - 是否有任何 OR 映射器提供异步方法？

> ID：501845
> 
> 赞同：5
> 
> 时间：2009-02-01T23:40:06.703
> 
> 标签：.net, asynchronous, data-access-layer, or-mapper

是否有任何 .Net O/R（对象/关系）映射器提供开箱即用的异步方法？

如果可能的话，我不想为异步方法编写样板

我使用 CCR 框架使用异步方法推出了自己的 DAL。CCR 基本上要求我不要阻止它的任何线程等待 IO 响应。

到目前为止，我的解决方案的好处在于它已降至最低限度。但是随着这个项目在规模和功能方面的增长，我面临着维护原始 SQL 查询和样板代码的艰巨任务。

但另一方面，如果 O/R 映射器异步方法真的只是一个杂乱无章的 hack，它会增加复杂性，我也不会好过。

请不要专注于异步编程的替代方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-03T12:09:15.000

是的，对于 SQLAlchemy（最好的 ORM 之一），有 sAsync：

[http://foss.eepatents.com/sAsync](http://foss.eepatents.com/sAsync)

和 NADBAPI：

[http://developer.berlios.de/projects/nadbapi/](http://developer.berlios.de/projects/nadbapi/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-04T11:57:58.983

我想你弄错了。我的理解是，您的情况下的异步执行应该在架构级别而不是 ORM 级别处理，即消息队列驱动的架构。我看到的是您的网络服务器只会在队列中放置一条消息，并且有某种后台代理在队列外进行异步处理。

由于我没有足够的声誉来发表评论，并且 Stackoverflow 提醒我插入另一个“答案”，我将在这里留下我的评论。

Lee B：SQLAlchemy？你如何将它与.NET一起使用？？？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-04T11:52:07.187

以异步方式获取数据可以通过多种方式完成。将其外包给 o/r 映射器会带来您可能不想处理的挑战，因为它并没有真正让您的代码变得不那么复杂。主要问题是您必须有一种机制，当 o/r 映射器完成获取时通知该机制，以便通知调用者数据已准备好。

这并不比自己创建一个线程并从该线程调用 o/r 映射器的 fetch 逻辑简单。

当您声明要创建一个应该响应的 Web 服务时，您必须意识到调用者在 Web 服务之外并等待数据。Iow：如果调用者使用 web 服务来获取数据，它已经是异步的，因为其他客户端仍然可以调用 web 服务：原始调用者的请求在不同的线程上处理，获取数据的逻辑在其中运行线程，然后将数据返回给调用者。

在这里使用异步方法是没有用的，否则当数据准备好时必须通知调用者，这需要从 web 服务推送到客户端，这需要客户端保持与 web 服务的连接，只要获取无论如何都需要。

异步数据库交互并不是您可以扔给某物的神奇事物，因此它会变得更加响应。异步数据库交互可以使调用者同时做其他事情。但是，如果这已经不是必需的，那么您就不需要异步数据库交互，这将使您的代码变得不那么复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T22:43:47.910

虽然我不确定他们中是否有人开箱即用，但您可以使用基于模板的[.NetTiers](http://nettiers.com/)。您可以将异步部分添加到模板中。这至少可以消除您维护样板代码和裸 SQL 查询的麻烦。此[博客](http://williablog.net/williablog/post/2008/12/01/Add-Asynchronous-Data-Methods-to-the-Enterprise-Library.aspx)展示了如何将异步调用添加到 MS Enterprise 库（如果您选择，.NetTiers 可以使用）。

截至 2008 年 12 月中旬，LLBLGen Pro 本身不支持异步调用。目前[基因组](http://www.genom-e.com/)也没有。[Telerik](http://www.telerik.com/products/orm.aspx)似乎也没有这样做。几乎只是搜索了他们的文档并寻找 async 或以 begin 开头的方法，因为这是模式。

我让其他答案来说明这是否是个好主意...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-03T12:05:00.847

[Nhibernate](http://www.hibernate.org/)似乎比 LinqToSQL 更容易实现 Async。看到[这个](http://www.codeproject.com/KB/miscctrl/AsyncDataloading.aspx?display=PrintAll)

就个人而言，我会做的是使用我喜欢的东西（因为我没有使用 NHibernate，我会担心学习曲线和潜在问题，所以我宁愿使用 LINQtoSQL 或定制数据访问层之类的东西）并将其包装在它的自己的[WCF LOB Adapter](http://www.microsoft.com/DOWNLOADS/details.aspx?FamilyID=56278fde-b708-469c-987e-ded9c6c5e580&displaylang=en) Web 服务。

如果您真的不想自己编写代码，您可以只使用[ADO.NET 数据服务](http://msdn.microsoft.com/en-us/data/bb931106.aspx)，它基本上为实体框架执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T21:23:56.243

听起来您缺少一些索引。

或者您需要将数据库设计转移到 OLAP 模型。

如果不是这样。

1.  获得更多的内存。
2.  获得更多的 CPU。
3.  对表进行分区。
4.  在数据库前面构建一个可以处理异步请求的包装器。它看起来像一个队列。

# arrays - 如何获取数组的镜像（MATLAB）？

> ID：501849
> 
> 赞同：21
> 
> 时间：2009-02-01T23:43:22.267
> 
> 标签：arrays, matlab, matrix

给定一个数组：

```
array1 = [1 2 3]; 
```

我必须像这样反转它：

```
array1MirrorImage = [3 2 1]; 
```

到目前为止，我得到了这个丑陋的解决方案：

```
array1MirrorImage = padarray(array1, [0 length(array1)], 'symmetric', 'pre');
array1MirrorImage = array1MirrorImage(1:length(array1)); 
```

有没有更漂亮的解决方案？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-02-02T00:25:12.230

**更新：**在较新版本的 MATLAB（R2013b 及更高版本）中，最好使用该函数[`flip`](http://www.mathworks.com/help/matlab/ref/flip.html)而不是[`flipdim`](http://www.mathworks.com/help/matlab/ref/flipdim.html)，它具有相同的调用语法：

```
a = flip(a, 1);  % Reverses elements in each column
a = flip(a, 2);  % Reverses elements in each row 
```

* * *

托马斯有正确的答案。要添加一点，您还可以使用更通用的[`flipdim`](http://www.mathworks.com/help/matlab/ref/flipdim.html)：

```
a = flipdim(a, 1);  % Flips the rows of a
a = flipdim(a, 2);  % Flips the columns of a 
```

一个额外的小技巧......如果出于某种原因您必须翻转二维数组的两个维度，您可以调用`flipdim`两次：

```
a = flipdim(flipdim(a, 1), 2); 
```

或致电[`rot90`](http://www.mathworks.com/help/matlab/ref/rot90.html)：

```
a = rot90(a, 2);  % Rotates matrix by 180 degrees 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2009-02-04T17:34:28.267

另一个简单的解决方案是

```
b = a(end:-1:1); 
```

您也可以在特定维度上使用它。

```
b = a(:,end:-1:1); % Flip the columns of a 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-02-02T00:10:32.570

您可以使用

```
rowreverse = fliplr(row) %  for a row vector    (or each row of a 2D array)
colreverse = flipud(col) % for a column vector (or each column of a 2D array)

genreverse = x(end:-1:1) % for the general case of a 1D vector (either row or column) 
```

[http://www.eng-tips.com/viewthread.cfm?qid=149926&page=5](http://www.eng-tips.com/viewthread.cfm?qid=149926&page=5)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-08-11T03:52:13.770

使用那个 man:%to 数组的镜像 r=input('insert rows');c=('insert columns')b=size(x); r=b(1);c=b(2); a=0；y(r,c)=0；对于 i=1:rn=0; 克=拉; a=a+1; 对于 j=1:cn=n+1;d(i,j)=x(g,n); 结束结束显示（y）

# c# - 调用通用接口

> ID：501853
> 
> 赞同：1
> 
> 时间：2009-02-01T23:45:39.830
> 
> 标签：c#, generics

```
public interface IProcessor<T>
{
  void Process(T instance);
}

foreach(AbstractType instance in myClass.SomeCollection)
  OnProcess(instance);

public void OnProcess<T>(T instance)
{
  IProcessor<T> processor = 
    unityContainer.Resolve<IProcessor<T>>();
  processor.Process(instance);
} 
```

这段代码的问题在于`in`OnProcess`总是`AbstractType`，而不是传递的实例的具体类型。我目前看到两种可能性。`

 `01：创建一个非泛型`IProcessor`并将其用作`IProcessor`. 任何实现者都必须实现泛型和非泛型`Process`方法，通常是类型转换并传递给泛型方法。

02：`Type.MakeGenericType`用于获取`IProcessor`，解析，然后使用反射调用Process方法。

这两种方法都感觉有点“不干净”。谁能想到一种方法我可以做到这一点而不必诉诸这些做法？

谢谢

皮特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-02T03:45:56.863

2 将成为性能杀手（特别是必要的动态/重新选择**调用**很慢）

1 是这个问题的常见答案，尤其是在显式实现的情况下；问题是掌握类型......统一是否允许使用`Type`实例而不是通过泛型进行查询？如果是这样的话......当然，你可能仍然需要使用`MakeGenericType`：

```
Type intType = typeof(IProcessor<>).MakeGenericType(instanceType);
IProcessor proc = (IProcessor) IoC.Resolve(intType); 
```

`instanceType`也许 via在哪里`instance.GetType()`。出于类似的原因，将 暴露`T`为 a可能`Type`会有所帮助`IProcessor`：

```
public interface IProcessor
{
    void Process(object instance);
    Type InstanceType {get;}
}
public interface IProcessor<T> : IProcessor
{
    void Process(T instance);
}
class SomeClass: IProcessor<int>
{
    public void Process(int instance)
    {
        throw new NotImplementedException();
    }
    Type IProcessor.InstanceType {get {return typeof(int);}}
    void IProcessor.Process(object instance)
    {
        Process((int)instance);
    }
} 
```

当然，一个（可选的）基类可能允许您避免一些这种每次实现：

```
abstract class SomeBase<T> : IProcessor<T>
{
    public void Process(T instance)
    {
        OnProcess(instance);
    }
    Type IProcessor.InstanceType {get {return typeof(T);}}
    void IProcessor.Process(object instance)
    {
        Process((T)instance);
    }
    protected abstract void OnProcess(T instance);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-01T23:56:15.953

如果我理解您的问题，您想调用一个依赖于 2 种类型（处理器类型和正在处理的对象）的进程。是对的吗？如果是这种情况，您可以使用多方法模式来解决此类问题。这是一个例子：

```
public interface IProcessor
{
    void Process( IThingToProcess p ); // Will call p.ProcessMe()
    void Process( ThingToProcess1 concreteP ); // Called back from ThingToProcess1.ProcessMe
}

public interface IThingToProcess
{
     void ProcessMe( IProcessor p );
}

public class ThingToProcess1 : IThingToProcess
{
    public void ProcessMe( IProcessor p ) { p.Process( this ); }
} 
```

# c# - Cool PostSharp方面

> ID：501857
> 
> 赞同：15
> 
> 时间：2009-02-01T23:48:42.723
> 
> 标签：c#, .net, aop, postsharp

我正在寻找有趣的 PostSharp 方面 - 任何您认为有用且不介意分享的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-02T02:20:50.217

对我来说最酷的方面是它可以帮助我实现[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)：

*“在面向对象的编程中，单一职责原则指出每个对象都应该有单一职责，并且它的所有服务都应该与该职责紧密结合。”*

我希望在未来有更多经验更全面地采用它，但现在，我刚刚开始将它内置到我的日志记录需求中：

与[Log4PostSharp](http://code.google.com/p/postsharp-user-plugins/wiki/Log4PostSharp)一起，我可以做到：

```
[Log(LogLevel.Info, "Counting characters.")]
int CountCharacters(string arg) {
   return arg.Length;
} 
```

这意味着，日志记录的责任归属于其他地方（编码方面），并由 PostSharp 和 Log4PostSharp 魔法从单独的来源注入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-06T17:55:22.623

D. Patrick Caldwell 在他的博客上有一些很酷的想法。

使用属性和 PostSharp 验证参数 [http://dpatrickcaldwell.blogspot.com/2009/03/validate-parameters-using-attributes.html](http://dpatrickcaldwell.blogspot.com/2009/03/validate-parameters-using-attributes.html)

*   使用 PostSharp 实施编码合同。

使用 PostSharp 的 Memoizer 属性 [http://dpatrickcaldwell.blogspot.com/2009/02/memoizer-attribute-using-postsharp.html](http://dpatrickcaldwell.blogspot.com/2009/02/memoizer-attribute-using-postsharp.html)

*   基本上，一种轻量级的字段值缓存机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-02T09:02:50.577

愚蠢的问题，但这不是[贡献目录](http://www.postsharp.org/contributions)的目的吗？

有一个自动属性更改实现的示例 - [INotifyPropertyChanged](http://www.postsharp.net/model/inotifypropertychanged)。

# asp.net-mvc - Post/Redirect/Get：重定向到特定路由

> ID：501860
> 
> 赞同：1
> 
> 时间：2009-02-01T23:50:53.750
> 
> 标签：asp.net-mvc, redirect

我有以下情况：

我有一个编辑页面，可以从不同的页面调用。这些页面可以是当前实体的详细视图，也可以是实体的列表视图（在路径中有或没有搜索）。

如何使用 MVC 框架干净地重定向到原始调用页面？当然，我可以通过将 HttpContext.Request.Url 值保存在我的 TempData 中来简单地传递它，但是在我的眼中（或者，呃，鼻子），那种气味。它比代码的其余部分低。

有没有办法在控制器上下文中获取上一页的路由值？如果我有，我可以暂时存储它并将其传递给重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-02T14:10:35.730

[不重定向时不要使用 TempData。](http://blogs.teamb.com/craigstuntz/2009/01/23/37947/)来自您的编辑页面的一个 AJAX 请求，TempData 将消失。

Tomas 是正确的，隐藏元素或查询字符串参数是要走的路。但请确保您清理提交的值。您不想重定向网络上的任何旧网站；您需要确保您重定向到的页面是您网站的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-02T00:05:21.863

你总是可以有一个隐藏的表单元素告诉控制器在发布表单时重定向到哪里。使用获取请求时，您可以以类似的方式使用查询字符串。它可能不是最漂亮的解决方案，但它比信任 httpreferrer 或其他可以被浏览器轻松更改（或省略）的标头安全得多。

# oop - OCaml 结构类型和列表

> ID：501872
> 
> 赞同：2
> 
> 时间：2009-02-02T00:01:40.437
> 
> 标签：oop, list, interface, ocaml

我在使用 OCaml 中的列表时遇到问题。我读过相互矛盾的陈述，说明是否可以在运行时修改列表。可以在运行时使用 cons 运算符吗？

此外，为什么允许杜宾犬（见下文）出现在吉娃娃名单中？如何将另一只吉娃娃添加到列表中（如最后一行所尝试的）？

```
class virtual dog =
object
 method virtual bark : unit
end;;

class chihuahua =
object
 inherit dog
 method bark = Printf.printf "Yip!"

end;;

class doberman =
object
 inherit dog
 method bark = Printf.printf "Roar!"

end;;

let c1 = new chihuahua;;
let c2 = new chihuahua;;
let c3 = new chihuahua;;
let d1 = new doberman;;

let arrayOfDogs = [c1;c2;d1];;
arrayOfDogs :: c3;; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-02T05:08:22.360

1）您可以在运行时使用 cons 运算符，它只返回一个新列表而不是改变输入列表。

2) OCaml 中的类类型使用“结构”子类型，而不是 Java 风格的“名义”子类型。的推断类型`arrayOfDogs`将是“具有名为`bark`type的方法的对象`unit -> unit`（不一定是 a `dog`）”。例如：

```
# class cat = object 
    method bark = print_endline "meow" 
  end ;;
class cat : object method bark : unit end
# let c = new cat ;;
val c : cat = <obj>
# c :: arrayOfDogs ;;
- : cat list = [<obj>; <obj>; <obj>; <obj>] 
```

3）问题`arrayOfDogs :: c3`是你用错了方法。的类型`::`是`'a -> 'a list -> 'a list`。要`c3`在开头添加，请使用

```
c3 :: arrayOfDogs 
```

要将其添加到末尾，请使用“追加”运算符`@`

```
arrayOfDogs @ [c3] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-02T00:23:37.413

您需要将列表放在右侧，而不是左侧。IE：

```
c3 :: arrayOfDogs;; 
```

这就是最后一行失败的原因。

就列表构造而言，鉴于 OCaml 是类型推断的，解释器可能发现您正在构造一个狗列表，因为您在构造中添加了杜宾犬。因此，它不是吉娃娃的名单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-02T00:26:39.653

OCaml 报告的类型是`arrayOfDogs`什么？

也许你的意思是：`c3 :: arrayOfDogs;;`

# c# - ViewModel 应该如何关闭表单？

> ID：501886
> 
> 赞同：261
> 
> 时间：2009-02-02T00:17:13.667
> 
> 标签：c#, wpf, mvvm

我正在尝试学习 WPF 和 MVVM 问题，但遇到了障碍。这个问题与这个问题相似但不完全相同[（handling-dialogs-in-wpf-with-mvvm）](https://stackoverflow.com/questions/454868/handling-dialogs-in-wpf-with-mvvm) ......

我有一个使用 MVVM 模式编写的“登录”表单。

此表单有一个 ViewModel，其中包含用户名和密码，它们使用普通数据绑定绑定到 XAML 中的视图。它还有一个“登录”命令，该命令绑定到表单上的“登录”按钮，同样使用普通数据绑定。

当“Login”命令触发时，它会调用 ViewModel 中的一个函数，该函数会关闭并通过网络发送数据以进行登录。此函数完成后，有 2 个操作：

1.  登录无效 - 我们只显示一个 MessageBox，一切都很好

2.  登录是有效的，我们需要关闭登录表单并让它返回 true 作为它的`DialogResult`...

问题是，ViewModel 对实际视图一无所知，那么它如何关闭视图并告诉它返回特定的 DialogResult？我可以在 CodeBehind 中粘贴一些代码，和/或将 View 传递给 ViewModel，但这似乎会完全破坏 MVVM 的全部意义......

* * *

### 更新

最后，我只是违反了 MVVM 模式的“纯粹性”，让 View 发布了一个`Closed`事件，并公开了一个`Close`方法。然后 ViewModel 将调用`view.Close`. 视图只能通过接口知道并通过 IOC 容器连接，因此不会丢失可测试性或可维护性。

接受的答案是-5票似乎很愚蠢！虽然我很清楚一个人在“纯洁”的同时解决问题所获得的良好感觉，当然我不是唯一一个认为 200 行事件、命令和行为只是为了避免单行方法的人“模式”和“纯度”的名称有点可笑....

* * *

## 回答 #1

> 赞同：336
> 
> 时间：2010-07-25T14:06:54.007

[Thejuan 的回答](https://stackoverflow.com/questions/501886/wpf-mvvm-newbie-how-should-the-viewmodel-close-the-form/1153602#1153602)启发了我编写一个更简单的附加属性。没有样式，没有触发器；相反，您可以这样做：

```
<Window ...
        xmlns:xc="clr-namespace:ExCastle.Wpf"
        xc:DialogCloser.DialogResult="{Binding DialogResult}"> 
```

这几乎就像 WPF 团队做对了并且首先将 DialogResult 设置为依赖属性一样干净。只需`bool? DialogResult`在您的 ViewModel 上放置一个属性并实现 INotifyPropertyChanged，瞧，您的 ViewModel 只需设置一个属性即可关闭窗口（并设置其 DialogResult）。应该是 MVVM。

这是 DialogCloser 的代码：

```
using System.Windows;

namespace ExCastle.Wpf
{
    public static class DialogCloser
    {
        public static readonly DependencyProperty DialogResultProperty =
            DependencyProperty.RegisterAttached(
                "DialogResult",
                typeof(bool?),
                typeof(DialogCloser),
                new PropertyMetadata(DialogResultChanged));

        private static void DialogResultChanged(
            DependencyObject d,
            DependencyPropertyChangedEventArgs e)
        {
            var window = d as Window;
            if (window != null)
                window.DialogResult = e.NewValue as bool?;
        }
        public static void SetDialogResult(Window target, bool? value)
        {
            target.SetValue(DialogResultProperty, value);
        }
    }
} 
```

我也在[我的博客上](http://blog.excastle.com/2010/07/25/mvvm-and-dialogresult-with-no-code-behind/)发布了这个。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2010-01-20T11:05:21.800

从我的角度来看，这个问题非常好，因为同样的方法不仅适用于“登录”窗口，而且适用于任何类型的窗口。我已经审查了很多建议，但没有一个适合我。请查看我从[MVVM 设计模式文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)中获得的建议。

每个 ViewModel 类都应该继承自该类型`WorkspaceViewModel`的`RequestClose`事件和`CloseCommand`属性`ICommand`。该`CloseCommand`属性的默认实现将引发该`RequestClose`事件。

为了关闭`OnLoaded`窗口，应该重写窗口的方法：

```
void CustomerWindow_Loaded(object sender, RoutedEventArgs e)
{
    CustomerViewModel customer = CustomerViewModel.GetYourCustomer();
    DataContext = customer;
    customer.RequestClose += () => { Close(); };
} 
```

或`OnStartup`您的应用程序的方法：

```
 protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        MainWindow window = new MainWindow();
        var viewModel = new MainWindowViewModel();
        viewModel.RequestClose += window.Close;
        window.DataContext = viewModel;

        window.Show();
    } 
```

我想`RequestClose`事件和`CloseCommand`属性的实现`WorkspaceViewModel`很清楚，但我会证明它们是一致的：

```
public abstract class WorkspaceViewModel : ViewModelBase
// There's nothing interesting in ViewModelBase as it only implements the INotifyPropertyChanged interface
{
    RelayCommand _closeCommand;
    public ICommand CloseCommand
    {
        get
        {
            if (_closeCommand == null)
            {
                _closeCommand = new RelayCommand(
                   param => Close(),
                   param => CanClose()
                   );
            }
            return _closeCommand;
        }
    }

    public event Action RequestClose;

    public virtual void Close()
    {
        if ( RequestClose != null )
        {
            RequestClose();
        }
    }

    public virtual bool CanClose()
    {
        return true;
    }
} 
```

和源代码`RelayCommand`：

```
public class RelayCommand : ICommand
{
    #region Constructors

    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");

        _execute = execute;
        _canExecute = canExecute;
    }
    #endregion // Constructors

    #region ICommand Members

    [DebuggerStepThrough]
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        _execute(parameter);
    }

    #endregion // ICommand Members

    #region Fields

    readonly Action<object> _execute;
    readonly Predicate<object> _canExecute;

    #endregion // Fields
} 
```

* * *

**PS**不要因为这些来源而对我不好！如果我昨天有它们，那将节省我几个小时......

**PPS**欢迎提出意见或建议。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-03-24T12:54:46.417

有很多评论在这里争论 MVVM 的优缺点。对我来说，我同意 Nir；这是适当使用模式的问题，MVVM 并不总是适合。人们似乎已经愿意牺牲软件设计中所有最重要的原则，只是为了让它适应 MVVM。

也就是说，..我认为您的案例可能非常适合进行一些重构。

在我遇到的大多数情况下，WPF 使您能够在没有多个`Window`s 的情况下度过难关。也许您可以尝试使用`Frame`s 和`Page`s 而不是 Windows 和`DialogResult`s。

在您的情况下，我的建议是`LoginFormViewModel`处理`LoginCommand`，如果登录无效，请将属性设置`LoginFormViewModel`为适当的值（`false`或某些枚举值，例如`UserAuthenticationStates.FailedAuthentication`）。您会为成功登录（`true`或其他一些枚举值）做同样的事情。然后，您将使用`DataTrigger`响应各种用户身份验证状态的 a，并可以使用简单的来 `Setter`更改`Source`.`Frame`

我认为让您的登录窗口返回一个`DialogResult`让您感到困惑的地方；这`DialogResult`实际上是您的 ViewModel 的一个属性。在我对 WPF 的公认有限的经验中，当某些事情感觉不对时，通常是因为我在思考如何在 WinForms 中做同样的事情。

希望有帮助。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2009-12-28T20:09:09.047

假设您的登录对话框是创建的第一个窗口，请在 LoginViewModel 类中尝试此操作：

```
 void OnLoginResponse(bool loginSucceded)
    {
        if (loginSucceded)
        {
            Window1 window = new Window1() { DataContext = new MainWindowViewModel() };
            window.Show();

            App.Current.MainWindow.Close();
            App.Current.MainWindow = window;
        }
        else
        {
            LoginError = true;
        }
    } 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2011-10-06T08:14:18.963

这是一个简单而干净的解决方案 - 您将一个事件添加到 ViewModel 并指示 Window 在触发该事件时自行关闭。

有关更多详细信息，请参阅我的博客文章，[从 ViewModel 关闭窗口](https://web.archive.org/web/20111101194636/http://blogs.microsoft.co.il/blogs/shimmy/archive/2011/10/05/close-window-from-viewmodel.aspx)。

XAML：

```
<Window
  x:Name="this"
  xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"  
  xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions">
  <i:Interaction.Triggers>
    <i:EventTrigger SourceObject="{Binding}" EventName="Closed">
      <ei:CallMethodAction
        TargetObject="{Binding ElementName=this}"
        MethodName="Close"/>
    </i:EventTrigger>
  </i:Interaction.Triggers>
<Window> 
```

视图模型：

```
private ICommand _SaveAndCloseCommand;
public ICommand SaveAndCloseCommand
{
  get
  {
    return _SaveAndCloseCommand ??
      (_SaveAndCloseCommand = new DelegateCommand(SaveAndClose));
  }
}
private void SaveAndClose()
{
  Save();
  Close();
}

public event EventHandler Closed;
private void Close()
{
  if (Closed != null) Closed(this, EventArgs.Empty);
} 
```

注意：该示例使用 Prism `DelegateCommand`（请参阅[Prism：Commanding](https://prismlibrary.com/docs/commanding.html)），但任何[`ICommand`](https://docs.microsoft.com/en-us/dotnet/api/system.windows.input.icommand?view=netcore-3.1)实现都可以用于此问题。

您可以使用[此](https://www.nuget.org/packages/Microsoft.Xaml.Behaviors.Wpf)官方包中的行为。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2009-04-28T21:08:34.630

我处理它的方式是在我的 ViewModel 中添加一个事件处理程序。当用户成功登录时，我会触发该事件。在我的视图中，我会附加到这个事件，当它触发时，我会关闭窗口。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-02-02T00:31:41.560

这是我最初所做的，它确实有效，但是它看起来相当冗长和丑陋（全局静态任何东西都不好）

1：应用程序.xaml.cs

```
public partial class App : Application
{
    // create a new global custom WPF Command
    public static readonly RoutedUICommand LoggedIn = new RoutedUICommand();
} 
```

2：登录表单.xaml

```
// bind the global command to a local eventhandler
<CommandBinding Command="client:App.LoggedIn" Executed="OnLoggedIn" /> 
```

3：登录表单.xaml.cs

```
// implement the local eventhandler in codebehind
private void OnLoggedIn( object sender, ExecutedRoutedEventArgs e )
{
    DialogResult = true;
    Close();
} 
```

4：LoginFormViewModel.cs

```
// fire the global command from the viewmodel
private void OnRemoteServerReturnedSuccess()
{
    App.LoggedIn.Execute(this, null);
} 
```

* * *

后来我删除了所有这些代码，只是`LoginFormViewModel`在它的视图上调用了 Close 方法。它最终变得更好，更容易遵循。恕我直言，模式的重点是让人们更容易理解您的应用程序在做什么，在这种情况下，MVVM 比我没有使用它更难理解，现在它是一种*反*模式。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-08-30T07:14:36.293

```
public partial class MyWindow: Window
{
    public ApplicationSelection()
    {
      InitializeComponent();

      MyViewModel viewModel = new MyViewModel();

      DataContext = viewModel;

      viewModel.RequestClose += () => { Close(); };

    }
}

public class MyViewModel
{

  //...Your code...

  public event Action RequestClose;

  public virtual void Close()
  {
    if (RequestClose != null)
    {
      RequestClose();
    }
  }

  public void SomeFunction()
  {
     //...Do something...
     Close();
  }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2011-02-23T22:00:27.900

您可以让 ViewModel 公开 View 注册到的事件。然后，当 ViewModel 决定关闭视图的时间时，它会触发导致视图关闭的事件。如果您想要传回特定的结果值，那么您将在 ViewModel 中有一个属性。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-29T18:04:12.957

仅供参考，我遇到了同样的问题，我想我想出了一个不需要全局或静态的解决方法，尽管它可能不是最好的答案。我让你们自己决定。

在我的例子中，实例化要显示的窗口的 ViewModel（我们称之为 ViewModelMain）也知道 LoginFormViewModel（以上面的情况为例）。

所以我所做的是在 LoginFormViewModel 上创建一个 ICommand 类型的属性（我们称之为 CloseWindowCommand）。然后，在 Window 上调用 .ShowDialog() 之前，我将 LoginFormViewModel 上的 CloseWindowCommand 属性设置为我实例化的 Window 的 window.Close() 方法。然后在 LoginFormViewModel 中，我所要做的就是调用 CloseWindowCommand.Execute() 来关闭窗口。

我想这是一种解决方法/hack，但它在没有真正破坏 MVVM 模式的情况下运行良好。

随意批评这个过程，我可以接受！:)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2009-05-28T18:08:04.913

这可能很晚了，但我遇到了同样的问题，我找到了一个适合我的解决方案。

我不知道如何创建一个没有对话框的应用程序（也许它只是一个思维障碍）。所以我在 MVVM 上陷入了僵局并显示了一个对话框。所以我遇到了这篇 CodeProject 文章：

[http://www.codeproject.com/KB/WPF/XAMLDialog.aspx](http://www.codeproject.com/KB/WPF/XAMLDialog.aspx)

这是一个用户控件，它基本上允许一个窗口位于另一个窗口的可视树中（在 xaml 中不允许）。它还公开了一个名为 IsShowing 的布尔 DependencyProperty。

您可以设置一种样式，通常在资源字典中，只要控件的 Content 属性 != null 通过触发器基本上显示对话框：

```
<Style TargetType="{x:Type d:Dialog}">
    <Style.Triggers>
        <Trigger Property="HasContent"  Value="True">
            <Setter Property="Showing" Value="True" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

在要显示对话框的视图中，只需执行以下操作：

```
<d:Dialog Content="{Binding Path=DialogViewModel}"/> 
```

在您的 ViewModel 中，您所要做的就是将属性设置为一个值（注意：ViewModel 类必须支持 INotifyPropertyChanged 以便视图知道发生了什么）。

像这样：

```
DialogViewModel = new DisplayViewModel(); 
```

要将 ViewModel 与 View 匹配，您应该在资源字典中有类似的内容：

```
<DataTemplate DataType="{x:Type vm:DisplayViewModel}">
    <vw:DisplayView/>
</DataTemplate> 
```

有了所有这些，您将获得一个显示对话框的单行代码。你得到的问题是你不能只用上面的代码关闭对话框。所以这就是为什么你必须在 ViewModel 基类中放入一个事件，DisplayViewModel 继承自它，而不是上面的代码，写这个

```
 var vm = new DisplayViewModel();
        vm.RequestClose += new RequestCloseHandler(DisplayViewModel_RequestClose);
        DialogViewModel = vm; 
```

然后您可以通过回调处理对话的结果。

这可能看起来有点复杂，但是一旦奠定了基础，它就非常简单了。这又是我的实现，我敢肯定还有其他实现：）

希望这会有所帮助，它救了我。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-06-13T23:17:02.067

*好的，所以这个问题已经有将近 6 年的历史了，我仍然无法在这里找到我认为正确的答案，所以请允许我分享我的“2 美分”......*

我实际上有两种方法，第一种是简单的......第二种在右边，所以**如果你正在寻找正确的，只需跳过#1并跳转到#2**：

# 1\. 快速简单（但不完整）

如果我只有一个小项目，我有时只需在 ViewModel 中创建一个**CloseWindowAction**：

```
 public Action CloseWindow { get; set; } // In MyViewModel.cs 
```

无论是谁创建了 View，或者在 View 后面的代码中，我只需设置 Action 将调用的 Method：

*（记住 MVVM 是关于 View 和 ViewModel 的分离...... View 的代码仍然是 View，只要有适当的分离，你就不会违反模式）*

如果某些 ViewModel 创建了一个新窗口：

```
private void CreateNewView()
{
    MyView window = new MyView();
    window.DataContext = new MyViewModel
                             {
                                 CloseWindow = window.Close,
                             }; 
    window.ShowDialog();
} 
```

或者，如果您想在主窗口中使用它，只需将其放在 View 的构造函数下：

```
public MyView()
{
    InitializeComponent();           
    this.DataContext = new MainViewModel
                           {
                                CloseWindow = this.Close
                           };
} 
```

当您想关闭窗口时，只需在 ViewModel 上调用 Action。

* * *

# 2.正确的方式

现在正确的做法是使用**Prism**（恕我直言），所有关于它的信息都可以[在这里找到](https://msdn.microsoft.com/en-us/library/ff921081%28v=pandp.40%29.aspx)。

你可以发出一个**交互请求**，在你的新窗​​口中填充你需要的任何数据，午餐它，关闭它，甚至**接收数据**。所有这些封装和 MVVM 批准。您甚至**可以获得窗口关闭方式的状态**，例如用户`Canceled`或`Accepted`（确定按钮）窗口和**数据是否返回（如果需要**） 。它有点复杂，答案 #1，但它更完整，并且是 Microsoft 推荐的模式。

我提供的链接包含所有代码片段和示例，因此我不会在此处放置任何代码，只需阅读下载 Prism 快速入门并运行它的文章即可，理解起来非常简单，只是稍微冗长一点让它发挥作用，但好处不仅仅是关闭一个窗口。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2011-03-05T02:11:26.623

只是为了添加大量答案，我想添加以下内容。假设您的 ViewModel 上有一个 ICommand，并且您希望该命令关闭其窗口（或与此相关的任何其他操作），您可以使用类似以下的内容。

```
var windows = Application.Current.Windows;
for (var i=0;i< windows.Count;i++ )
    if (windows[i].DataContext == this)
        windows[i].Close(); 
```

它并不完美，可能很难测试（因为很难模拟/存根静态），但它比其他解决方案更干净（恕我直言）。

埃里克

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-03-27T16:13:37.730

我最终将[Joe White 的答案](https://stackoverflow.com/a/3329467/682734)和[Adam Mills 的答案](https://stackoverflow.com/a/1153602/682734)中的一些代码混合在一起，因为我需要在以编程方式创建的窗口中显示用户控件。所以 DialogCloser 不必在窗口上，它可以在用户控件本身上

```
<UserControl ...
    xmlns:xw="clr-namespace:Wpf"
    xw:DialogCloser.DialogResult="{Binding DialogResult}"> 
```

如果 DialogCloser 未附加到窗口本身，则 DialogCloser 将找到用户控件的窗口。

```
namespace Wpf
{
  public static class DialogCloser
  {
    public static readonly DependencyProperty DialogResultProperty =
        DependencyProperty.RegisterAttached(
            "DialogResult",
            typeof(bool?),
            typeof(DialogCloser),
            new PropertyMetadata(DialogResultChanged));

    private static void DialogResultChanged(
        DependencyObject d,
        DependencyPropertyChangedEventArgs e)
    {
      var window = d.GetWindow();
      if (window != null)
        window.DialogResult = e.NewValue as bool?;
    }

    public static void SetDialogResult(DependencyObject target, bool? value)
    {
      target.SetValue(DialogResultProperty, value);
    }
  }

  public static class Extensions
  {
    public static Window GetWindow(this DependencyObject sender_)
    {
      Window window = sender_ as Window;        
      return window ?? Window.GetWindow( sender_ );
    }
  }
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-10-11T18:49:37.310

为什么不直接将窗口作为命令参数传递？

C＃：

```
 private void Cancel( Window window )
  {
     window.Close();
  }

  private ICommand _cancelCommand;
  public ICommand CancelCommand
  {
     get
     {
        return _cancelCommand ?? ( _cancelCommand = new Command.RelayCommand<Window>(
                                                      ( window ) => Cancel( window ),
                                                      ( window ) => ( true ) ) );
     }
  } 
```

XAML：

```
<Window x:Class="WPFRunApp.MainWindow"
        x:Name="_runWindow"
...
   <Button Content="Cancel"
           Command="{Binding Path=CancelCommand}"
           CommandParameter="{Binding ElementName=_runWindow}" /> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-07-15T19:56:36.243

我实现了 Joe White 的解决方案，但偶尔遇到“ *DialogResult can be set only after Window is created and shown as dialog* ”错误。

在 View 关闭后，我一直保留 ViewModel，偶尔我稍后会使用同一个 VM 打开一个新 View。似乎在旧视图被垃圾收集之前关闭新视图会导致**DialogResultChanged**尝试在关闭的窗口上设置**DialogResult**属性，从而引发错误。

我的解决方案是更改**DialogResultChanged**以检查窗口的**IsLoaded**属性：

```
private static void DialogResultChanged(
    DependencyObject d,
    DependencyPropertyChangedEventArgs e)
{
    var window = d as Window;
    if (window != null && window.IsLoaded)
        window.DialogResult = e.NewValue as bool?;
} 
```

进行此更改后，已关闭对话框的任何附件都将被忽略。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-05-24T13:09:29.343

行为是这里最方便的方式。

*   一方面，它可以绑定到给定的视图模型（可以发出“关闭表单！”的信号）

*   另一方面，它可以访问表单本身，因此可以订阅必要的表单特定事件，或显示确认对话框或其他任何内容。

第一次可以看到编写必要的行为很无聊。但是，从现在开始，您可以通过精确的单行 XAML 代码段在您需要的每个表单上重用它。如有必要，您可以将其提取为单独的程序集，以便将其包含到您想要的任何下一个项目中。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-04-02T00:05:04.480

虽然这没有回答如何通过视图模型执行此操作的问题，但它确实显示了如何仅使用 XAML + blend SDK 来执行此操作。

我选择从 Blend SDK 下载和使用两个文件，您可以通过 NuGet 将这两个文件作为 Microsoft 的包。这些文件是：

System.Windows.Interactivity.dll 和 Microsoft.Expression.Interactions.dll

Microsoft.Expression.Interactions.dll 为您提供了很好的功能，例如在您的视图模型或其他目标上设置属性或调用方法的能力，并且内部还有其他小部件。

一些 XAML：

```
<Window x:Class="Blah.Blah.MyWindow"
    ...
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
  ...>
 <StackPanel>
    <Button x:Name="OKButton" Content="OK">
       <i:Interaction.Triggers>
          <i:EventTrigger EventName="Click">
             <ei:ChangePropertyAction
                      TargetObject="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                      PropertyName="DialogResult"
                      Value="True"
                      IsEnabled="{Binding SomeBoolOnTheVM}" />                                
          </i:EventTrigger>
    </Button>
    <Button x:Name="CancelButton" Content="Cancel">
       <i:Interaction.Triggers>
          <i:EventTrigger EventName="Click">
             <ei:ChangePropertyAction
                      TargetObject="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                      PropertyName="DialogResult"
                      Value="False" />                                
          </i:EventTrigger>
    </Button>

    <Button x:Name="CloseButton" Content="Close">
       <i:Interaction.Triggers>
                <i:EventTrigger EventName="Click">
                    <!-- method being invoked should be void w/ no args -->
                    <ei:CallMethodAction
                        TargetObject="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}"
                        MethodName="Close" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
    </Button>
 <StackPanel>
</Window> 
```

请注意，如果您只是进行简单的确定/取消行为，则只要使用 Window.ShowDialog() 显示窗口，就可以使用 IsDefault 和 IsCancel 属性摆脱困境。
我个人在使用 IsDefault 属性设置为 true 的按钮时遇到问题，但在加载页面时它被隐藏了。它似乎不想在显示后很好地播放，所以我只是设置了 Window.DialogResult 属性，如上所示，它对我有用。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-03-21T12:54:08.607

另一种解决方案是在视图模型中使用 INotifyPropertyChanged 创建属性，如 DialogResult，然后在后面的代码中写下：

```
public class SomeWindow: ChildWindow
{
    private SomeViewModel _someViewModel;

    public SomeWindow()
    {
        InitializeComponent();

        this.Loaded += SomeWindow_Loaded;
        this.Closed += SomeWindow_Closed;
    }

    void SomeWindow_Loaded(object sender, RoutedEventArgs e)
    {
        _someViewModel = this.DataContext as SomeViewModel;
        _someViewModel.PropertyChanged += _someViewModel_PropertyChanged;
    }

    void SomeWindow_Closed(object sender, System.EventArgs e)
    {
        _someViewModel.PropertyChanged -= _someViewModel_PropertyChanged;
        this.Loaded -= SomeWindow_Loaded;
        this.Closed -= SomeWindow_Closed;
    }

    void _someViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == SomeViewModel.DialogResultPropertyName)
        {
            this.DialogResult = _someViewModel.DialogResult;
        }
    }
} 
```

最重要的片段是`_someViewModel_PropertyChanged`. `DialogResultPropertyName`可以是`SomeViewModel`.

我使用这种技巧在 View Controls 中进行一些更改，以防在 ViewModel 中很难做到这一点。ViewModel 中的 OnPropertyChanged 你可以在 View 中做任何你想做的事情。ViewModel 仍然是“可单元测试的”，后面代码中的一些小代码行没有任何区别。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-08-08T21:34:02.103

我会这样：

```
using GalaSoft.MvvmLight;
using GalaSoft.MvvmLight.Command;    
using GalaSoft.MvvmLight.Messaging; 

// View

public partial class TestCloseWindow : Window
{
    public TestCloseWindow() {
        InitializeComponent();
        Messenger.Default.Register<CloseWindowMsg>(this, (msg) => Close());
    }
}

// View Model

public class MainViewModel: ViewModelBase
{
    ICommand _closeChildWindowCommand;

    public ICommand CloseChildWindowCommand {
        get {
            return _closeChildWindowCommand?? (_closeChildWindowCommand = new RelayCommand(() => {
                Messenger.Default.Send(new CloseWindowMsg());
        }));
        }
    }
}

public class CloseWindowMsg
{
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-03-14T18:12:27.137

我已经阅读了所有答案，但我必须说，其中大多数都不够好甚至更糟。

**您可以使用DialogService**类完美地处理此问题，该类的职责是显示对话窗口并返回对话结果。我已经创建了[示例项目](http://1drv.ms/18oqX8I)来展示它的实现和使用。

以下是最重要的部分：

```
//we will call this interface in our viewmodels
public interface IDialogService
{
    bool? ShowDialog(object dialogViewModel, string caption);
}

//we need to display logindialog from mainwindow
public class MainWindowViewModel : ViewModelBase
{
    public string Message {get; set;}
    public void ShowLoginCommandExecute()
    {
        var loginViewModel = new LoginViewModel();
        var dialogResult = this.DialogService.ShowDialog(loginViewModel, "Please, log in");

        //after dialog is closed, do someting
        if (dialogResult == true && loginViewModel.IsLoginSuccessful)
        {
            this.Message = string.Format("Hello, {0}!", loginViewModel.Username);
        }
    }
}

public class DialogService : IDialogService
{
    public bool? ShowDialog(object dialogViewModel, string caption)
    {
        var contentView = ViewLocator.GetView(dialogViewModel);
        var dlg = new DialogWindow
        {
            Title = caption
        };
        dlg.PART_ContentControl.Content = contentView;

        return dlg.ShowDialog();
    }
} 
```

这不是更简单吗？比 EventAggregator 或其他类似解决方案更严格、更易读、更易于调试？

如您所见，在我的视图模型中，我使用了在我的帖子中描述的 ViewModel 第一种方法：[在 WPF 中从 ViewModel 调用视图的最佳实践](https://stackoverflow.com/a/28916120/475727)

当然，在现实世界中，`DialogService.ShowDialog`必须有更多的选项来配置对话框，例如它们应该执行的按钮和命令。这样做有不同的方法，但它超出了范围:)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-05-30T12:50:33.223

这是简单的无错误解决方案（带有源代码），它对我有用。

1.  派生您的 ViewModel 从`INotifyPropertyChanged`

2.  在 ViewModel 中创建一个可观察的属性**CloseDialog**

    ```
    public void Execute()
    {
        // Do your task here

        // if task successful, assign true to CloseDialog
        CloseDialog = true;
    }

    private bool _closeDialog;
    public bool CloseDialog
    {
        get { return _closeDialog; }
        set { _closeDialog = value; OnPropertyChanged(); }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged([CallerMemberName]string property = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    } 
    ```

    }

3.  在视图中为此属性更改附加一个处理程序

    ```
     _loginDialogViewModel = new LoginDialogViewModel();
        loginPanel.DataContext = _loginDialogViewModel;
        _loginDialogViewModel.PropertyChanged += OnPropertyChanged; 
    ```

4.  现在你几乎完成了。在事件处理程序中`DialogResult = true`

    ```
    protected void OnPropertyChanged(object sender, PropertyChangedEventArgs args)
    {
        if (args.PropertyName == "CloseDialog")
        {
            DialogResult = true;
        }
    } 
    ```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-02-08T10:39:27.833

**`Dependency Property`**在您的**`View`**/any中创建一个`UserControl`（或者`Window`您想要关闭）。如下所示：

```
 public bool CloseTrigger
        {
            get { return (bool)GetValue(CloseTriggerProperty); }
            set { SetValue(CloseTriggerProperty, value); }
        }

        public static readonly DependencyProperty CloseTriggerProperty =
            DependencyProperty.Register("CloseTrigger", typeof(bool), typeof(ControlEventBase), new PropertyMetadata(new PropertyChangedCallback(OnCloseTriggerChanged)));

        private static void OnCloseTriggerChanged(DependencyObject dp, DependencyPropertyChangedEventArgs e)
        {
            //write Window Exit Code
        } 
```

**并从您的ViewModel 的属性**中绑定它：

```
<Window x:Class="WpfStackOverflowTempProject.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"  Width="525"
        CloseTrigger="{Binding Path=CloseWindow,Mode=TwoWay}" 
```

物业在***`VeiwModel`***：

```
private bool closeWindow;

    public bool CloseWindow
    {
        get { return closeWindow; }
        set 
        { 
            closeWindow = value;
            RaiseChane("CloseWindow");
        }
    } 
```

现在通过更改**`CloseWindow`**ViewModel 中的值来触发关闭操作。:)

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2014-01-31T08:02:41.513

在需要关闭窗口的地方，只需将其放在视图模型中：

田田

```
 foreach (Window window in Application.Current.Windows)
        {
            if (window.DataContext == this)
            {
                window.Close();
                return;
            }
        } 
```

* * *

## 回答 #25

> 赞同：-8
> 
> 时间：2011-07-21T09:52:06.503

```
Application.Current.MainWindow.Close() 
```

够了！

# null - 如何透明地使用 GNU Screen

> ID：501891
> 
> 赞同：1
> 
> 时间：2009-02-02T00:21:15.187
> 
> 标签：null, escaping, gnu, gnu-screen

我想以用户不知道它存在的方式使用 GNU 屏幕。这是为了帮助确保我正在编写的基于文本的管理应用程序一次只能由一个用户使用。为了防止用户通过运行应用程序并继续运行而将其他人锁在外面，在度假时让它运行，我希望能够分离他们的会话并允许另一个用户附加到它。

所以我的问题是：

*   我可以将 .screenrc 中的转义键设置为 null，以便用户自己无法访问任何屏幕功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-02T00:53:52.827

它看起来像下面`.screenrc`的伎俩：

```
escape '' 
```

这不会将转义字符设置为`'`，而是完全禁用转义机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-02T01:14:40.553

也许只是将转义字符设置`.screenrc`为 ASCII 表中无法通过键盘键入的晦涩字符。我认为字符 176 将是一个示例（或尝试任何其他超出正常范围的字符）：

```
escape ^°° 
```

只需将其放在您的 .screenrc 文件中，您的用户将无法访问任何`screen`功能：

```
perl -e 'print "escape ^", chr(176), chr(176), "\n"' >> .screenrc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-02T01:39:44.123

阻止用户使用 Screen 的功能是不好的形式（除非您有一个运行应用程序的共享登录名）。

相反，让您的应用程序处理您通过自动注销显示的用例，警告新连接用户并让他们选择引导其他用户，处理多个用户等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-02T01:53:26.060

而不是使用屏幕，考虑使用分离/附加

# asp.net-mvc - MVC RC“文件”ActionResult，性能好？

> ID：501893
> 
> 赞同：1
> 
> 时间：2009-02-02T00:22:23.310
> 
> 标签：asp.net-mvc, image

使用新的“文件”ActionResult，我正在考虑创建一个控制器来在我的 ASP.NET MVC 应用程序中显示某些图像。

就像是：

```
<img src="/Photo/Show/hello" alt="Hello" title="Hello" /> 
```

相对：

```
<img src="/Photo/Folder/Hello.jpg" alt="Hello" title="Hello" /> 
```

我很好奇性能影响会是什么。假设我什么都不做，只是从控制器返回图像文件，从控制器操作调用图像与仅将路径编码到 src 属性中是否存在明显的性能差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-02T04:24:02.950

可以肯定的是，小但可测量的性能影响。然而，在它变得高度相关之前，性能是*完全不相关的。*因此，除非您的服务器出现故障或您的用户必须等待他们的页面加载，并且您需要开始缓解，否则不要担心性能。

*请*担心以下问题：您将需要在服务器上重新实现缓存策略，因为 IIS 会为直接请求的静态文件管理该策略。您还需要确保使用响应中包含的正确标头来管理客户端缓存。最后，问问自己，重新发明一种从服务器提供静态文件的方法是否可以满足您的应用程序的需求。

# c# - windows live id web authentication sdk给出Java App服务器错误

> ID：501894
> 
> 赞同：1
> 
> 时间：2009-02-02T00:22:26.260
> 
> 标签：c#, .net, authentication, deployment, live

我正在用 c# .NET 创建一个网站，并使用 windows live id web authentication sdk 进行登录。我正在尝试使用服务器 2003 和 IIS 6.0 部署站点，但是在从登录页面重定向到 webauth-handler 时出现以下错误：

> HTTP 状态 405 - 此 URL 类型不支持 HTTP 方法 POST 状态报告消息此 URL 描述不支持 HTTP 方法 POST 请求的资源不允许使用指定的 HTTP 方法（此 URL 不支持 HTTP 方法 POST）。
> 
> Sun Java System 应用服务器 9.1

这在本地主机上开发时工作正常，但在我尝试部署我的网站时就坏了。当我部署我的站点时，我在 lx.azure.com 上设置了一个新项目，并将应用程序 ID 和密钥添加到我的 web.config 中。

我对 Java 错误感到困惑，因为我没有运行 Java 应用程序服务器，并且根本不在服务器上使用 Java！

如果有人知道为什么会发生这种情况，我将非常感谢您的知识:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-12T19:38:42.670

问题在于我的 url 转发 - 它在我的 html 中放入了一个框架，因此该错误很可能发生在域名公司网站上，因此出现了 java 错误。

# c++ - 在继承中：我可以覆盖基类数据成员吗？

> ID：501899
> 
> 赞同：5
> 
> 时间：2009-02-02T00:25:21.497
> 
> 标签：c++

假设我有两个类，如下所示：

```
Class A
{
public:
..
private:
  int length;
}

Class B: public Class A
{
public:
..
private:
 float length;
} 
```

我想知道的是：

1.  是否允许*覆盖基类数据成员？*
2.  如果是，这是一个好习惯吗？
3.  如果不是，扩展类数据成员类型的最佳方法是什么？

有一个类满足我的需求，我想重用它。但是对于我的程序需要，它的数据成员应该是另一种类型。

我有一些书，但它们都只涉及基类成员方法的覆盖。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-02T00:31:56.427

您可以使用模板化成员，即通用成员，而不是覆盖成员。

您还可以声明一个 VARIANT(COM) 之类的联合。

```
 struct MyData
   {
        int vt;              // To store the type

        union 
        {                
            LONG      lVal;
            BYTE      bVal;
            SHORT     iVal;
            FLOAT     fltVal;
            .
            .
        }
   }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-02T00:32:49.187

1）不，你不能。您可以创建自己的内部/隐藏/私人成员，但不能覆盖它们。

2）如果可以的话，这不是一个好习惯。想想看；）

3）你不应该，因为你正在改变成员的含义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-02T00:34:23.193

虽然在派生类中声明同名的数据成员是合法的 C++，但它可能不会达到您的预期。在您的示例中，A 类中的任何代码都无法看到`float length`定义 - 它只能访问`int length`定义。

在 C++ 中，只有方法可以具有虚拟行为，数据成员不能。如果您想使用另一种数据类型重用现有类，则必须使用所需的数据类型重新实现该类，或者将其重新实现为模板，以便在实例化时提供所需的数据类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-02T00:35:20.867

1）是的，它是允许的，如，你可以做到

2）不！不好的做法。如果有人调用使用“长度”的方法，则返回的变量将是未定义的。

3)**尝试不同的设计**。也许您想拥有一个类似命名的函数或将基类用作“has-a”类而不是“is-a”类。

# asp.net - ASP.NET MVC / ASP.NET WebForm 数据访问应用程序——最好的架构是什么？

> ID：501902
> 
> 赞同：0
> 
> 时间：2009-02-02T00:27:24.580
> 
> 标签：asp.net, asp.net-mvc, architecture

在回复 Marc Gravell 发布的[答案](https://stackoverflow.com/questions/498986/linqtosql-no-supported-translation-to-sql/499112#499112)和他通过电子邮件提出的建议时，我想知道：

**人们在决定新项目的架构时会做出哪些选择？**

* * *

这个问题可以作为链接/想法/建议/架构决策的一个不错的参考点，在决定采用新解决方案的最佳方法时，任何真正感兴趣的东西。

我目前正在开发一个 ASP.NET MVC 应用程序——主要是作为一种练习来增加我对新框架的体验——它与 ExtJs 前端一起在层之间传递 Json 对象。

可测试性非常重要，因此我的 .NET 层使用接口来定义合同，并由一个服务层组成，该层处理数据验证和应用程序逻辑，而后者又与只处理数据持久性和检索的存储库层交互。所有这些都让我可以进行相当彻底的测试。

我有一个基于数据库的自定义模型层次结构，但是，它与将其绑定到特定平台的任何 ORM（我目前正在使用 LinqToSql）工具无关。我的存储库返回我的自定义模型而不是它们自己的数据库结构，这有望让我在未来开发不同的存储库实现而不会出现太多问题。

采用这种方法的另一个原因是，我正在使用一个遗留数据库，该数据库有一些有趣的设计选择，并且目前无法对结构进行太多更改，因此我希望对生成的模型进行更多控制。

* * *

对于你们中的一些人来说，所有这些似乎完全错误，所以告诉我你的想法；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-02T00:46:42.450

听起来你在正确的轨道上。就个人而言，在当前的版本中，我总是会选择 MVC 而不是 Web 表单。Web 表单从底层模型中抽象了太多，我发现它通常比它的价值更麻烦。只有当您可以安全地预测您可以坚持使用 Web 表单旨在处理的模型、在开箱即用的模式下工作并且不太关心可测试性时，我才会推荐 Web 表单。

Web 表单可能有意义的唯一其他情况是，如果您有一个对这项技术根深蒂固的团队，并且希望与现有的应用程序堆栈保持一致。即便如此，为了您的开发人员的成长和长期的产品维护（过渡后），如果您可以摇摆它，我仍然推荐 MVC。

也就是说，微软可能会在一段时间内继续支持 Web 表单模型，最终这两种模型可能会变得越来越容易即插即用或相互交换（基于我与几个 ASP. NET 团队的项目经理）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T16:56:57.827

虽然起初很诱人，但对我来说，随着应用程序的增长，Web 表单变得难以管理。有了mvc，关系更自然，更符合理想。

# c# - 在 C# 中无大小写地比较字符串

> ID：501906
> 
> 赞同：13
> 
> 时间：2009-02-02T00:30:53.683
> 
> 标签：c#, .net, string, string-comparison

假设我有两个字符串：a 和 b。为了比较忽略大小写时 a 和 be 是否具有相同的值，我一直使用：

```
// (Assume a and b have been verified not to be null)

if (a.ToLower() == b.ToLower()) 
```

但是，使用 Reflector，我已经在 .NET Framework 中看到过几次：

```
// (arg three is ignoreCase)

if (string.Compare(a, b, true) == 0) 
```

我测试了哪个更快，并且每次都用我使用的琴弦进行`ToLower()`节拍。`Compare()`

有理由`Compare()`代替`ToLower()`吗？有什么不同`CultureInfo`吗？我在挠头。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-02-02T00:38:31.377

您应该关注的主要不是性能，而是正确性，从这方面来看，您*可能*希望用于不区分大小写的比较的方法是：

```
string.Compare(a, b, StringComparison.OrdinalIgnoreCase) == 0; 
```

或者

```
a.Equals(b, StringComparison.OrdinalIgnoreCase) 
```

（如果您知道字符串可能为空，则第一个很有用；如果您已经知道至少有一个字符串不为空，则后者更容易编写。我从未测试过性能，但假设它会相似。）

`Ordinal`或者`OrdinalIgnoreCase`是一个安全的赌注，除非你知道你想使用另一种比较方法；要获得做出决定所需的信息，[请阅读 MSDN 上的这篇文章](http://msdn.microsoft.com/en-us/library/ms973919.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-02T00:41:34.363

[MSDN 文章](http://msdn.microsoft.com/en-us/library/zkcaxw5y.aspx)的备注部分应该解释一些事情。从本质上讲，原因是为了跨不同文化设置的兼容性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-02T00:40:08.173

比较字符串时，您应该**始终**使用显式 StringComparison 成员。String 函数在选择比较字符串的方式上有些不一致。保证使用比较的唯一方法是 a) 记住所有这些（包括您和团队中的每个人）或 b) 对每个功能使用明确的比较。

最好是明确的，而不是依赖于完美的群体知识。你的队友会为此感谢你的。

例子：

```
if ( StringComparison.OrdinalIgnoreCase.Equals(a,b) ) 
```

使用 ToLower 进行比较有 2 个我能想到的问题

1.  它分配内存。除非绝对必要，否则比较函数不应分配内存。
2.  可以通过多种方式降低琴弦。最显着的 Ordinal 或 Culture Sensitive 较低。.ToLower() 以哪种方式工作？就个人而言，我不知道。传递明确的文化比依赖默认文化要好得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-02T00:34:26.080

ToLower() 不是比较函数，它将字符串变为小写。当 == 运算符用于 C# 中的 String 对象时，编译器会对其进行优化。在核心，两者都依赖于 System.String.Equals，如 Reflector 中所示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-02T00:51:28.387

另一篇 MSDN 文章提供了一些 DO 和 DON'T 以及在各种情况下使用哪种比较方法的建议：[在 Microsoft .NET 2.0 中使用字符串的新建议](http://msdn.microsoft.com/en-us/library/ms973919.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-05T19:30:59.447

您能否发布显示调用 ToLower() 的测试比不区分大小写的比较更快？我的测试表明事实恰恰相反！无论如何，其他张贴者关于正确性的观点是站得住脚的。

# vba - 如果您已经熟悉 java 和 ruby ，则学习 VBA 的资源

> ID：501912
> 
> 赞同：4
> 
> 时间：2009-02-02T00:33:31.730
> 
> 标签：vba

我想学习一些VB，因为我对一些倾向于专门使用它的行业感兴趣。但是，我发现大多数资源在教授语言和工具方面的速度远远不够，因为它们是针对那些以前没有编程过的人的。对于具有其他语言（如 java 和 ruby​​）经验的程序员，是否有很好的指南？

谢谢，史蒂文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-02T00:48:59.687

最好的学习方法是启动 excel 或您将使用的任何版本的 VBA（是的，它们略有不同）。打开宏记录器，做一些事情，停止记录，然后查看创建的代码。您将立即看到创建的一些类，可以使用 VBA 环境中的对象资源管理器更详细地查看它们。语法就像任何基本语言一样。一些好的做法，将“选项显式”行放在每个源文件的顶部，如果不是变量，则不需要声明，这最初很容易，但会导致烦人的错误搜索。

我不知道学习 VBA 的一站式商店，因为你已经有了编程经验，这将是一个忘掉一些东西的问题——比如 OO、继承等（是的，我知道 VBA 支持类和接口，但是它们'不是完整的辣酱玉米饼馅）。

顺便说一句，我注意到您将其标记为 VB.Net，不幸的是 VB.Net 不是 VBA - 它们根本不相关。同样，VB 和 VBA 也不相同，尽管重叠率约为 90%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-02T01:15:18.447

使用 VBA 编写 Excel 宏，第 2 版，作者 Steven Roman，ch。5-8 对 VBA 语法、内置函数等进行了相当紧凑的介绍。您可以在 Google Books 上找到它。它所说的大部分内容也应该适用于VB6。

MSDN 上还有免费的 Visual Basic 6.0 Programmer's Guide

但是，如果您已经熟悉一般的编程，MrTelly 有最好的建议。Excel VBA 编辑器、宏记录器和 F1 键可能就是您所需要的，以及控制结构的特定语法的基本帮助等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-02T02:43:09.393

这可能会有所帮助。

几年前，一位自称 Verity Stob 的 DDJ 专栏作家写了一篇关于等待经验丰富的程序员开始使用 VB/VBA 开发的典型陷阱的很好总结：

[http://www.ddj.com/windows/184403996;jsessionid=HZEBCTTLEH5XGQSNDLPCKH0CJUNN2JVN?_requestid=378977](http://www.ddj.com/windows/184403996;jsessionid=HZEBCTTLEH5XGQSNDLPCKH0CJUNN2JVN?_requestid=378977)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T17:24:56.210

Excel 是学习 VBA 的好地方。

一个很好的资源是[VB/VBA In a Nutshell一书](http://oreilly.com/catalog/9781565923584/)

# r - 如果您已经熟悉 R，学习 SAS 的资源

> ID：501917
> 
> 赞同：3
> 
> 时间：2009-02-02T00:35:56.250
> 
> 标签：r, statistics, sas

我想学习一些 SAS，因为我对一些倾向于专门使用它的行业感兴趣。但是，我不想陷入假设我对统计编程一无所知的资源。对于具有 R 统计经验的程序员，是否有很好的指南？

谢谢，史蒂文

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-05T14:41:21.047

Robert A Muenchen 读懂了你的想法。他出版了一份免费的手稿，后来成为一本 Springer 书籍，名为 R，供 SAS 和 SPSS 用户使用。它真的是为了解 SAS 或 SPSS 但想学习 R 的人编写的。幸运的是，他给出了如何用所有三种语言做事的示例。如果您了解 R 并想重新使用 SAS，它也会很好地工作。它最初是一份免费的手稿，然后 Springer 帮助他将其充实成一本完整的书。这里有一些链接：

*   [慕尼黑的网站](http://rforsasandspssusers.com/)
*   面向Amazon（美国）上[的 SAS 和 SPSS 用户的 R](https://rads.stackoverflow.com/amzn/click/com/0387094172)
*   面向 SAS 和 SPSS 用户的关于 R的原始[免费手稿](http://rforsasandspssusers.googlepages.com/RforSASSPSSusers.pdf)

另外，这是[一篇关于在 R 和 SAS 之间来回传递数据](http://www.hollandnumerics.co.uk/pdf/SAS2R2SAS_paper.pdf)的论文。

当您与业内人士交谈时，请记住，对于许多最终用户而言，“SAS”可能意味着将 GUI 界面连接到其中一种 SAS 工具中。我在研究生院学习 SAS 编程并用它编写程序多年。对我来说，SAS 是一种语言。我记得和一位朋友的妻子进行了一次非常尴尬的鸡尾酒会，她告诉我她正在学习 SAS。我很兴奋，开始谈论 PROC 语句和 DATA STEP 编程。她试图保持礼貌，但很快我就知道她不知道我在做什么。她是一名预测分析师，正在使用一个 SAS 预测工具，该工具顶部有一个她正在学习使用的 GUI。我很快意识到，当人们谈论使用 SAS 时，它就像“使用 Microsoft”一样具体。因此，值得重温 SAS BI 工具套件、数据挖掘工具等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-02T00:42:27.250

[Little SAS Book](http://books.google.com/books?id=14CSsIUQ24kC&dq=little+sas+book&printsec=frontcover&source=bn&hl=en&sa=X&oi=book_result&resnum=7&ct=result)是我见过的唯一一本 SAS 书籍。我喜欢它作为介绍，但您可能仍然会发现它很有用。链接上有 Google 图书的预览。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-23T08:19:18.443

大多数sas手册都在线。这是所有内容的列表：http: [//support.sas.com/documentation/](http://support.sas.com/documentation/)

这可能是一个很好的起点：http: [//support.sas.com/documentation/cdl/en/basess/58133/PDF/default/basess.pdf](http://support.sas.com/documentation/cdl/en/basess/58133/PDF/default/basess.pdf)

这取决于您是多少 R 大师，但如果您倾向于从向量的角度思考，那么使用 sas/iml 或 stat studio 3（将更名为 iml studio）您会感觉更自在，它有基于矩阵的脚本语言。但是，没有传递函数，也没有闭包。sas Institute 宣布他们将在 iml studio 中提供 R 接口。见： http: [//support.sas.com/rnd/app/studio/Rinterface2.html](http://support.sas.com/rnd/app/studio/Rinterface2.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-22T02:02:37.013

'SAS for Dummies' 的问题在于它是为人们从 SAS 中获取数据而编写的。这是一本限量的书。我强烈强烈建议您购买“The Little SAS Book”。好可爱。当我还是一名学习 SAS 的研究生时，我很乐意为此支付两倍的封面价格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-18T22:21:31.520

两个答案。如果您主要对使用 SAS 程序进行统计感兴趣，我推荐 Horton 和 Kleinman 的 SAS 和 R 书。他们有一个博客，您可以浏览并查看他们的方法：[http](http://sas-and-r.blogspot.com/) ://sas-and-r.blogspot.com/ 这是一本示例驱动的书，没有提供很多背景知识，但对于那些有经验的人来说是一个方便的参考知道他们想做什么，只需要查找语法。

如果您是一位认真的程序员，并且您开发自己的算法，并且您更喜欢使用与 MATLAB 和 R 有很多相似之处的矩阵向量语言进行编程，那么请研究 SAS/IML 矩阵语言。您可以在 [http://support.sas.com/publishing/authors/wicklin.html浏览《使用](http://support.sas.com/publishing/authors/wicklin.html)*SAS/IML 软件进行统计编程*》一书的“入门”一章（完全披露：我是作者。）

作为额外的好处，您可以从 SAS/IML 程序中调用 R，因此对于想要在 SAS 中进行分析并将结果与​​在 R 中进行的类似分析进行比较的人来说很方便。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-02T19:48:11.633

[SAS for Dummies](https://rads.stackoverflow.com/amzn/click/com/0471788325)应该不错。我还没有读过它，但这里工作的人似乎喜欢它。

# linux - 有哪些学习网络编程的好资源？

> ID：501918
> 
> 赞同：9
> 
> 时间：2009-02-02T00:36:53.440
> 
> 标签：linux, unix, networking

我最近开始在学校参加两个专注于网络的课程，一个是关于分布式系统的，另一个是关于一般计算机网络的。在完成这两个课程的第一个实验后，我现在对 C 和 Java 的网络协议和套接字概念有了相当好的理解。

现在我试图超越基本概念，在 C 或 OO 语言中的通信类和对象设计、网络设计模式、中间套接字/流管理约定、重要库和通用 *nix 网络编程中间技术方面做得更好。

你能推荐任何你成功使用的资源吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-02T01:07:30.227

[Richard Stevens 的Unix 网络编程](https://rads.stackoverflow.com/amzn/click/com/0131411551)是一本必备书籍，它讨论了许多高级网络编程技术。我从事网络编程已经很多年了，即使是现在，我也几乎每天都会在这个伟大的参考资料中查找一些东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-02T01:19:41.480

[BeeJ 的网络编程指南](http://beej.us/guide/bgnet/)是我学习 POSIX 系统的基本 API 调用的地方。甚至还有一节介绍如何将其转换为 Windows 代码。

我真的只是在早期通过反复试验偶然发现了“好的”网络编码实践。我找到了有效的方法和有效的方法并与之一起运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-02T01:17:47.397

Steven 的经典著作总是一个好的开始（例如，UNIX 网络编程、UNIX 环境中的高级编程）。除此之外，专注于分布式编程技术和消息传递系统。通过套接字传递消息这一事实并不像理解如何设计异步分布式架构那么重要。

我也会拿起一份 TCP/IP Illustrated 的副本，因为了解诸如 IP 路由如何工作、TCP 和 UDP 如何工作（以及它们如何不同）是了解网络最重要的实际事情。之后，深入研究 DNS 和 HTTP。我还没有找到关于这两个的任何真正好的文本......也许有人会建议一些。如果一切都失败了，请阅读 RFC（用于 DNS的[RFC1034](https://www.rfc-editor.org/rfc/rfc1034) / [RFC1035和用于 HTTP 的](https://www.rfc-editor.org/rfc/rfc1035)[RFC2616](https://www.rfc-editor.org/rfc/rfc2616)）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-02T11:44:09.317

Steven 的关于网络编程的万事通一书太详细了，无法入手，并且包含封装真正套接字编程的库。

我建议从[Beej 的网络编程指南](http://beej.us/guide/bgnet/)开始，然后转到[C 语言中的 TCP/IP 套接字。](https://rads.stackoverflow.com/amzn/click/com/1558608265)它们提供了很多关于网络编程的很好的基础知识，并提供了一个最终通读 Stevens 书的平台。

Stevens 的其他书籍如[TCP/IP 插图系列](https://rads.stackoverflow.com/amzn/click/com/0201633469)涵盖了网络的所有概念部分。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-02T01:24:26.323

如果您来自 Java 并且刚刚学习过套接字编程，我强烈推荐 Elliotte Rusty Harold 的[Java 网络编程](http://www.cafeaulait.org/books/jnp3/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-06-28T13:09:31.860

我从Warren W. Gray的[Linux Socket Programming By Example](https://rads.stackoverflow.com/amzn/click/com/0789722410)一书中学习了网络编程。

# linq-to-sql - Linq to SQL：添加自定义列和Order By吗？

> ID：501936
> 
> 赞同：0
> 
> 时间：2009-02-02T00:53:46.417
> 
> 标签：linq-to-sql

我怎么能在 Linq to SQL 中做这样的事情（如果可能，VB.NET）？

```
SELECT *, ISNULL(DueDate, DATEADD(year, 10, GETDATE())) AS DueDateForSorting 
FROM Tasks
ORDER BY DueDateForSorting 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-02T01:24:38.473

我认为 SQL 提供程序不支持向查询中添加 lambda 列。但是，它确实支持合并运算符，并且由于您实际上是在这样做：

```
SELECT * FROM Tasks
ORDER BY ISNULL(DueDate, DATEADD(year, 10, GETDATE())) 
```

试试这个：

```
from o in dc.Orders orderby o.DueDate ?? DateTime.Today.AddYears(10) 
```

如果您出于某种原因需要该假的未来日期也出现在您的结果集中，您可以修改 LINQtoSQL Designer.cs 文件中的实体类：

```
[Column(Storage="_DueDate", DbType="SmallDateTime")]
public System.Nullable<System.DateTime> DueDate
{
    get
    {
        if(this._DueDate == null)
        {
            return DateTime.Today.AddYears(10);
        }
        return this._DueDate;
    } 
```

因此，如果您曾经在对象上要求 DueDate 并且 DueDate 为空，您至少会得到遥远的未来日期。

# python - Python中物理的简单模拟？

> ID：501940
> 
> 赞同：8
> 
> 时间：2009-02-02T00:55:03.153
> 
> 标签：python, modeling, simulation

我想知道类似的具体模拟，就像在[这里](https://stackoverflow.com/questions/494184/simulation-problem-with-mouse-in-pygame)浇水的模拟一样。

在 Python 中进行此类模拟时，您最喜欢的库/互联网页面是什么？

我知道一点 Simpy、Numpy 和 Pygame。我想获得有关它们的示例。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-02-02T09:06:01.413

如果您正在寻找一些*看起来*真实且速度相当*快的**游戏*物理（碰撞、变形、重力等），请考虑重新使用一些*物理引擎*库。

 ***作为第一个参考，您可能想查看[pymunk ，它是](http://www.pymunk.org/)[Chipmunk](http://wiki.slembcke.net/main/published/Chipmunk) 2D 物理库的 Python 包装器。您可以在 Wikipedia 中找到各种开源物理引擎（2D 和 3D）的列表。

如果您正在寻找*物理上正确*的模拟，无论您想使用哪种语言，它都会*慢得多*（几乎永远不会实时），并且您需要使用一些*数值分析*软件（并且可能自己编写一些东西）。确切的答案取决于您要解决的问题。这是一个相当复杂的领域（数学）。

例如，如果您需要在连续介质力学或电磁学中进行模拟，您可能需要有限差分、有限体积或有限元方法。对于 Python，有一些现成的库，例如：[FiPy](http://www.ctcms.nist.gov/fipy/) (FVM)、[GetFem++](http://home.gna.org/getfem/) (FEM)、[FEniCS/DOLFIN](http://www.fenics.org/wiki/FEniCS_Project) (FEM) 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-02T06:35:35.040

这是一些[与天文学相关的简单 python](http://www.astro.sunysb.edu/mzingale/software/astro/)。这是来自同一个人的[核心代码。](http://www.astro.sunysb.edu/mzingale/pyro/)

[Eagleclaw](http://kingkong.amath.washington.edu/claw/examples/index.html)使用一些 python 求解和绘制各种双曲方程。然而，大部分代码都是用 Fortran 编写的来进行计算，而 python 来绘制结果。如果你正在学习物理，你可能不得不习惯这种 Fortran 包装的代码。这是一个现实。但这不是你真正想要的我猜。好处是它以一种有文化的编程风格记录，所以它应该是可以理解的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-02T12:15:30.843

也许[PyODE](http://pyode.sourceforge.net/)？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-02T21:24:26.087

我听说过[PyBox2D](http://www.box2d.org/wiki/index.php?title=PyBox2D)，它是非常好的 Box2D 的一个端口。引用该网站：

> Box2D 是一个功能丰富的二维刚体物理引擎，由 Erin Catto 用 C++ 编写。它已被用于许多游戏中，包括 2008 年独立游戏节大奖得主 Crayon Physics Deluxe。

# javascript - 可以使 jQuery UI Datepicker 禁用周六和周日（和节假日）吗？

> ID：501943
> 
> 赞同：195
> 
> 时间：2009-02-02T00:56:40.170
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我使用日期选择器来选择约会日期。我已经将日期范围设置为仅下个月。这很好用。我想从可用选项中排除周六和周日。这可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2009-02-02T12:48:14.553

有一个`beforeShowDay`选项，它需要为每个日期调用一个函数，如果允许日期则返回 true，否则返回 false。从文档：

* * *

**演出前**

该函数将日期作为参数，并且必须返回一个数组，其中 [0] 等于 true/false 指示此日期是否可选，[1](http://jqueryui.com/demos/datepicker/#event-beforeShowDay)等于 CSS 类名称或默认表示的“”。在显示之前，它会在日期选择器中的每一天被调用。

在日期选择器中显示一些国定假日。

```
$(".selector").datepicker({ beforeShowDay: nationalDays})   

natDays = [
  [1, 26, 'au'], [2, 6, 'nz'], [3, 17, 'ie'],
  [4, 27, 'za'], [5, 25, 'ar'], [6, 6, 'se'],
  [7, 4, 'us'], [8, 17, 'id'], [9, 7, 'br'],
  [10, 1, 'cn'], [11, 22, 'lb'], [12, 12, 'ke']
];

function nationalDays(date) {
    for (i = 0; i < natDays.length; i++) {
      if (date.getMonth() == natDays[i][0] - 1
          && date.getDate() == natDays[i][1]) {
        return [false, natDays[i][2] + '_day'];
      }
    }
  return [true, ''];
} 
```

存在一个名为 noWeekends 的内置函数，它可以防止选择周末。

```
$(".selector").datepicker({ beforeShowDay: $.datepicker.noWeekends }) 
```

* * *

要将两者结合起来，您可以执行以下操作（假设`nationalDays`上面的函数）：

```
$(".selector").datepicker({ beforeShowDay: noWeekendsOrHolidays})   

function noWeekendsOrHolidays(date) {
    var noWeekend = $.datepicker.noWeekends(date);
    if (noWeekend[0]) {
        return nationalDays(date);
    } else {
        return noWeekend;
    }
} 
```

**更新**：请注意，从 jQuery UI 1.8.19 开始，[beforeShowDay 选项](http://jqueryui.com/demos/datepicker/#event-beforeShowDay)还接受可选的第三个参数，即弹出工具提示

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2009-02-19T06:45:05.750

如果您根本不希望出现周末，只需：

CSS

```
th.ui-datepicker-week-end,
td.ui-datepicker-week-end {
    display: none;
} 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-06-26T15:45:43.793

日期选择器内置了这个功能！

```
$( "#datepicker" ).datepicker({
  beforeShowDay: $.datepicker.noWeekends
}); 
```

[http://api.jqueryui.com/datepicker/#utility-noWeekends](http://api.jqueryui.com/datepicker/#utility-noWeekends)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2010-07-28T15:23:08.220

这些答案非常有帮助。谢谢你。

我在下面的贡献添加了一个数组，其中多天可以返回 false（我们每周二、周三和周四关闭）。我捆绑了特定日期加上年份和无周末功能。

如果您想周末休息，请将 [Saturday]、[Sunday] 添加到 closedDays 数组中。

```
$(document).ready(function(){

    $("#datepicker").datepicker({
        beforeShowDay: nonWorkingDates,
        numberOfMonths: 1,
        minDate: '05/01/09',
        maxDate: '+2M',
        firstDay: 1
    });

    function nonWorkingDates(date){
        var day = date.getDay(), Sunday = 0, Monday = 1, Tuesday = 2, Wednesday = 3, Thursday = 4, Friday = 5, Saturday = 6;
        var closedDates = [[7, 29, 2009], [8, 25, 2010]];
        var closedDays = [[Monday], [Tuesday]];
        for (var i = 0; i < closedDays.length; i++) {
            if (day == closedDays[i][0]) {
                return [false];
            }

        }

        for (i = 0; i < closedDates.length; i++) {
            if (date.getMonth() == closedDates[i][0] - 1 &&
            date.getDate() == closedDates[i][1] &&
            date.getFullYear() == closedDates[i][2]) {
                return [false];
            }
        }

        return [true];
    }

}); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-11-30T21:27:40.193

每个人都喜欢的解决方案似乎非常激烈......我个人认为做这样的事情要容易得多：

```
 var holidays = ["12/24/2012", "12/25/2012", "1/1/2013", 
            "5/27/2013", "7/4/2013", "9/2/2013", "11/28/2013", 
            "11/29/2013", "12/24/2013", "12/25/2013"];

       $( "#requestShipDate" ).datepicker({
            beforeShowDay: function(date){
                show = true;
                if(date.getDay() == 0 || date.getDay() == 6){show = false;}//No Weekends
                for (var i = 0; i < holidays.length; i++) {
                    if (new Date(holidays[i]).toString() == date.toString()) {show = false;}//No Holidays
                }
                var display = [show,'',(show)?'':'No Weekends or Holidays'];//With Fancy hover tooltip!
                return display;
            }
        }); 
```

这样你的日期是人类可读的。这并没有什么不同，只是这样对我来说更有意义。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-10-31T19:53:32.360

您可以使用 noWeekends 功能禁用周末选择

```
 $(function() {
     $( "#datepicker" ).datepicker({
     beforeShowDay: $.datepicker.noWeekends
     });
     }); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2010-02-25T13:25:53.240

此版本的代码将使您从 sql 数据库中获取假期日期并禁用 UI Datepicker 中的指定日期

```
 $(document).ready(function (){
  var holiDays = (function () {
    var val = null;
    $.ajax({
        'async': false,
        'global': false,
        'url': 'getdate.php',
        'success': function (data) {
            val = data;
        }
    });
    return val;
    })();
  var natDays = holiDays.split('');

  function nationalDays(date) {
    var m = date.getMonth();
    var d = date.getDate();
    var y = date.getFullYear();

    for (var i = 0; i ‘ natDays.length-1; i++) {
    var myDate = new Date(natDays[i]);
      if ((m == (myDate.getMonth())) && (d == (myDate.getDate())) && (y == (myDate.getFullYear())))
      {
        return [false];
      }
    }
    return [true];
  }

  function noWeekendsOrHolidays(date) {
    var noWeekend = $.datepicker.noWeekends(date);
      if (noWeekend[0]) {
        return nationalDays(date);
      } else {
        return noWeekend;
    }
  }
  $(function() { 
    $("#shipdate").datepicker({
      minDate: 0,
      dateFormat: 'DD, d MM, yy',
      beforeShowDay: noWeekendsOrHolidays,
      showOn: 'button',
      buttonImage: 'images/calendar.gif', 
      buttonImageOnly: true
     });
  });
}); 
```

在 sql 中创建一个数据库，并将假期日期以 MM/DD/YYYY 格式作为 Varchar 将以下内容放入文件 getdate.php

```
 [php]
$sql="SELECT dates FROM holidaydates";
$result = mysql_query($sql);
$chkdate = $_POST['chkdate'];
$str='';
while($row = mysql_fetch_array($result))
{
$str .=$row[0].'';
}
echo $str;
[/php] 
```

快乐编码！！！！:-)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2011-01-07T14:44:17.237

```
$("#selector").datepicker({ beforeShowDay: highlightDays });

...

var dates = [new Date("1/1/2011"), new Date("1/2/2011")];

function highlightDays(date) {

    for (var i = 0; i < dates.length; i++) {
        if (date - dates[i] == 0) {
            return [true,'', 'TOOLTIP'];
        }
    }
    return [false];

} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-10-15T13:44:51.277

在此版本中，月、日*和*年决定了日历上要阻止的日期。

```
$(document).ready(function (){
  var d         = new Date();
  var natDays   = [[1,1,2009],[1,1,2010],[12,31,2010],[1,19,2009]];

  function nationalDays(date) {
    var m = date.getMonth();
    var d = date.getDate();
    var y = date.getFullYear();

    for (i = 0; i < natDays.length; i++) {
      if ((m == natDays[i][0] - 1) && (d == natDays[i][1]) && (y == natDays[i][2]))
      {
        return [false];
      }
    }
    return [true];
  }
  function noWeekendsOrHolidays(date) {
    var noWeekend = $.datepicker.noWeekends(date);
      if (noWeekend[0]) {
        return nationalDays(date);
      } else {
        return noWeekend;
    }
  }
  $(function() { 
    $(".datepicker").datepicker({

      minDate: new Date(d.getFullYear(), 1 - 1, 1),
      maxDate: new Date(d.getFullYear()+1, 11, 31),

      hideIfNoPrevNext: true,
      beforeShowDay: noWeekendsOrHolidays,
     });
  });
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-03T21:31:59.573

在最新的 Bootstrap 3 版本 (bootstrap-datepicker.js)`beforeShowDay`中，需要以下格式的结果：

```
{ enabled: false, classes: "class-name", tooltip: "Holiday!" } 
```

或者，如果您不关心 CSS 和工具提示，则只需返回一个布尔值`false`以使日期不可选择。

此外，没有`$.datepicker.noWeekends`，因此您需要按照以下方式做一些事情：

```
var HOLIDAYS = {  // Ontario, Canada holidays
    2017: {
        1: { 1: "New Year's Day"},
        2: { 20: "Family Day" },
        4: { 17: "Easter Monday" },
        5: { 22: "Victoria Day" },
        7: { 1: "Canada Day" },
        8: { 7: "Civic Holiday" },
        9: { 4: "Labour Day" },
        10: { 9: "Thanksgiving" },
        12: { 25: "Christmas", 26: "Boxing Day"}
    }
};

function filterNonWorkingDays(date) {
    // Is it a weekend?
    if ([ 0, 6 ].indexOf(date.getDay()) >= 0)
        return { enabled: false, classes: "weekend" };
    // Is it a holiday?
    var h = HOLIDAYS;
    $.each(
        [ date.getYear() + 1900, date.getMonth() + 1, date.getDate() ], 
        function (i, x) {
            h = h[x];
            if (typeof h === "undefined")
                return false;
        }
    );
    if (h)
        return { enabled: false, classes: "holiday", tooltip: h };
    // It's a regular work day.
    return { enabled: true };
}

$("#datePicker").datepicker({ beforeShowDay: filterNonWorkingDays }); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-01-10T05:07:59.847

周六和周日你可以做这样的事情

```
 $('#orderdate').datepicker({
                               daysOfWeekDisabled: [0,6]
                 }); 
```

# python - 如何模块化 Python 应用程序

> ID：501945
> 
> 赞同：6
> 
> 时间：2009-02-02T00:59:26.293
> 
> 标签：python

我有许多使用通用定义的脚本。如何将它们拆分为多个文件？此外，在我的场景中无法以任何方式安装该应用程序；必须可以同时运行任意数量的版本，并且必须在没有超级用户权限的情况下工作。我提出的解决方案是：

*   **每个脚本中的重复代码**。凌乱的，可能是最糟糕的计划。
*   **将所有脚本和公共代码放在一个目录中，**并用于`from . import`加载它们。这种方法的缺点是我想将我的库放在应用程序之外的其他目录中。
*   **将通用代码放在自己的目录**中，编写一个`__init__.py`导入所有子模块并最终用于`from . import`加载它们的代码。`__init__.py`保持代码井井有条，但维护和限定名称有点开销。
*   **将库目录添加到 `sys.path`和 `import`.** 我倾向于这个，但我不确定摆弄是否`sys.path` 是好的代码。
*   **`execfile`** 使用（`exec`在 Python 3 中）**加载 。**结合了前两种方法的优点：每个模块只需要一条线，我可以使用专用的。另一方面，这回避了 python 模块的概念并污染了全局命名空间。
*   **使用 . 编写和安装模块 `distutils`。**这会为所有 python 脚本安装库，需要超级用户权限并影响其他应用程序，因此不适用于我的情况。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-02T02:00:33.193

添加到 sys.path（通常使用 site.addsitedir）是很常见的，并不是特别不赞成。当然，您会希望将常用的工作共享内容放在方便的模块中。

如果您使用的是 Python 2.6+，那么已经有一个用户级模块文件夹可以使用，而无需添加到 sys.path 或 PYTHONPATH。它是类 Unix 上的 ~/.local/lib/python2.6/site-packages - 有关更多信息，请参阅[PEP 370](http://www.python.org/dev/peps/pep-0370/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-02T01:13:15.893

您可以将`PYTHONPATH`环境变量设置为库文件所在的目录。这会将路径添加到库搜索路径中，您可以使用普通`import`方法导入它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-02T01:53:36.980

如果您有多个具有各种依赖项组合的环境，一个好的解决方案是使用[virtualenv](http://pypi.python.org/pypi/virtualenv)创建沙盒 Python 环境，每个环境都有自己的一组安装包。每个环境都将以与系统范围的 Python 站点包设置相同的方式运行，但创建本地环境不需要超级用户权限。

谷歌有[很多信息](http://www.google.com/search?client=safari&rls=en-us&q=virtualenv&ie=UTF-8&oe=UTF-8)，但这[看起来](http://wiki.pylonshq.com/display/pylonscookbook/Using+a+Virtualenv+Sandbox)是一个很好的起点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-02T01:13:51.663

手动添加路径的另一种替代方法`sys.path`是使用环境变量[`PYTHONPATH`](http://docs.python.org/using/cmdline.html#envvar-PYTHONPATH)。

此外，[`distutils`](http://docs.python.org/install/index.html)允许您使用指定自定义安装目录

```
 python setup.py install --home=/my/dir 
```

但是，如果您需要使用相同的模块名称同时运行多个版本，这些都可能不实用。在这种情况下，您可能最好修改`sys.path`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-02T01:17:31.953

我已经`sys.path`为多个项目使用了第三种方法（将目录添加到 ），我认为这是一种有效的方法。

# ruby-on-rails - 您在使用 AWSDBProxy 吗？横向扩展时是否会影响性能？

> ID：501946
> 
> 赞同：1
> 
> 时间：2009-02-02T01:01:41.687
> 
> 标签：ruby-on-rails, ruby, amazon-web-services, amazon, amazon-simpledb

在投了反对票后，我谦卑地意识到我的帖子是一个巨大的*咆哮*。因此，我对其进行了编辑并将其总结为我真正想知道的问题。在此编辑之前，我为我的粗鲁评论道歉；）

似乎唯一谈论在 Rails 站点中使用 Amazon 的 SimpleDB 的教程是使用 AWSDBProxy ...就我个人而言，考虑到下面典型 Rails 站点的服务器布局（使用 AWSDBProxy），我发现这与横向扩展有悖常理：

插件在这里：[http ://agilewebdevelopment.com/plugins/aws_sdb_proxy](http://agilewebdevelopment.com/plugins/aws_sdb_proxy)

图片在这里：[http ://www.freeimagehosting.net/uploads/91be4e0617.png](http://www.freeimagehosting.net/uploads/91be4e0617.png)

如您所见，即使我们添加更多的杂种，我们也有两个问题。

1.  我们的单点故障远不如我们的负载均衡器稳定
2.  我们必须通过这个*WEBrick 服务器强制我们的所有信息*

解决方案当然是添加更多 AWSDBProxies ......但是为什么不直接使用下面的代码，比如说一个类，一起跳过代理呢？

```
service = AwsSdb::Service.new(Logger.new(nil),
                                CONFIG['aws_access_key_id'],
                                CONFIG['aws_secret_access_key'])
service.query(domain, query) 
```

那么我的意思是，如果您使用 AWSDBProxy，您*有*什么理由这样做？如果你确实在使用它，你的表现如何？如果你有硬数字，这将更加感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-02T15:29:06.960

我没有使用它，也从未听说过它，但这是我认为是合理的理由。

1.  您在 EC2 上运行您的主应用程序服务器，因此 Internet FAIL 的可能性不会真正影响您不止一次。
2.  您在每个应用服务器上运行一个代理。所以它的连接断开并不比它与数据库的连接断开更糟糕。
3.  因为它可以做到。这与开源项目中的任何理由一样好。有时，在你知道所说的东西是好还是坏之前，你需要构建一个东西。
4.  您没有需要负载均衡器的流量级别。然后你的图表压缩成一条线，如果不是一台机器的话。

# algorithm - 使用 flickr 获取特定位置的照片并组装模型

> ID：501954
> 
> 赞同：5
> 
> 时间：2009-02-02T01:09:25.027
> 
> 标签：algorithm, image-processing, flickr

我读过有关使用 Flickr 照片数据库来填补照片空白的系统（[http://blogs.zdnet.com/emergingtech/?p=629](http://blogs.zdnet.com/emergingtech/?p=629)）。

这样的系统有多可行？我正在玩弄使用 Flickr 获取某个实体（在本例中为赛道）的照片并重建模型的想法（不仅仅是一种消磨时间的方式，而是作为我正在编码的东西的一个很好的补充）。我最担心的是没有足够的特定赛道照片，即使那样，也很难判断两张照片是否属于赛道的同一部分，在这种情况下，其中一张可能无关紧要。

这样的事情有多可行？独立开发者值得尝试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-02T01:24:15.370

听起来您想要构建一个光合成风格的系统 - 早在 2007 年，请查看Blaise [Aguera](http://photosynth.net/) [y Arcas](http://www.ted.com/index.php/talks/blaise_aguera_y_arcas_demos_photosynth.html)在 TED 上的演示。有一个大约 4 分钟的部分，他用照片构建了圣家堂的模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-02T05:15:35.840

我说 +1 表示光合作用的答案，它是一个很棒的工具。不过，不确定您能否将其整合到您自己的应用程序中。

它绝对是可行的。世事皆可能。是的，对于单个开发人员来说是可行的，这取决于你有多少空闲时间。很高兴看到这样的东西集成到虚拟地球或谷歌地图街景中。能搞定这样一些软件的人可以帮助纯粹基于照片对整个世界进行 3D 建模。那将是一个很棒的产品，可以让任何一个开发者变得富有而出名。

所以开始编码。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-02T11:38:12.637

我有很多空闲时间，因为我在工作之间。

一种方法是获取赛道布局的俯视图，根据此模型制作蓝图，然后获取一张赛道照片并模仿赛道的道路颜色。那将是一个开始。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-02-02T01:12:10.060

[codeplex 上的LINQ to Flickr](http://www.codeplex.com/LINQFlickr)有一个很棒的 AP​​I，对你的任务很有帮助。

# iphone - OpenGL ES 中的 PVR 纹理与 PNG

> ID：501956
> 
> 赞同：21
> 
> 时间：2009-02-02T01:11:28.330
> 
> 标签：iphone, opengl-es

我正在为 iPhone 开发一个可以渲染大量纹理的 2D 应用程序。目前，它们中的大多数都是从具有 alpha 透明度的 PNG 文件加载的。作为一项测试，我也一直在玩 PVR 测试，看看是否有任何性能差异。

PNG 纹理与崩溃着陆示例附带的 Texture2D 类一起加载。PVR 测试是使用 PVRTextureLoader 示例中的 PVRTexture 类加载的。我使用 Apple 的纹理工具创建 PVR 纹理。

作为测试，我渲染了一个背景 (512*512)，并在 36 个 90*64 像素精灵（来自 512*512 纹理）之上以透明度渲染。PVR 纹理以大约 58 fps 的速度渲染，PNG 以 47 fps 的速度渲染。这是我可以期待的还是应该更大的差异？另外，texturetool生成的纹理看起来很糟糕，PVRTexTool更好吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2011-02-03T17:07:00.210

## PNG：

*   高精度色彩表现，无损耗
*   从磁盘读取/解压缩速度较慢。
*   缓慢上传到图形硬件，内部像素重新排序（swizzling）由驱动程序执行。可能还有 RGBA<->BGRA<->ARGB 之间的转换，尽管 Xcode 通常会将 PNG 转换为更适合硬件的颜色格式。
*   由于内存带宽有限（从内存中为 GPU 读取更多字节），渲染速度较慢。实际减速量取决于使用场景。当放大率低于 1 倍且没有 MIP 映射时，此问题最为明显。
*   占用更多 RAM/VRAM 空间。
*   可编辑，可以在上传前由您的软件过滤/混合/调整大小/转换。
*   Mip-maps 可以在驱动程序上传纹理时自动生成
*   磁盘空间使用量因内容而异，对于简单的图像非常小，对于逼真的图像几乎未压缩。
*   可以直接快速地从任何图像编辑软件中导出。

## PVR：

*   低精度有损压缩。提供 2 种压缩级别，即每像素 2 位和每像素 4 位。块状，可能会损坏锋利的边缘和平滑的渐变。图像质量因内容而异。3 或 4 个颜色通道，因此您可以使用 Alpha 通道，但有损压缩可能会产生不良结果。
*   从磁盘快速加载，无需软件解压缩。
*   几乎即时的纹理上传，因为它是一种内部硬件格式，将通过驱动程序不变。
*   由于内存带宽使用量较小，因此渲染速度快。使用 PVR 纹理时，像素渲染速度主要受其他因素的限制。
*   使用最少的 RAM 和 VRAM 空间。
*   必须预先生成 Mip-map。
*   您无法在软件 AFAIK 中生成或编辑 PVR。否则会很慢。
*   磁盘空间使用量与源图像大小（固定压缩比）成正比。可以通过其他方法进一步压缩（轻微）。
*   尺寸限制。2 的幂，仅平方。
*   需要额外的转换工具，处理可以自动化，但会大大减慢构建时间。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-02-13T10:37:13.650

PVRTC 纹理的性能应该更好，因为它们是压缩的（有损）。解压缩是在图形硬件本身中完成的。传输的纹理数据更少，因此您获得更多带宽。您为 RAM 和带宽节省付出的代价是质量损失。

# c++ - 从 STL 列表中删除项目

> ID：501962
> 
> 赞同：19
> 
> 时间：2009-02-02T01:15:18.197
> 
> 标签：c++, stl

我想创建一个函数，如果它们符合特定条件，则将项目从一个 STL 列表移动到另一个。

这段代码不是这样做的方法。迭代器很可能会被 erase() 函数无效并导致问题：

```
for(std::list<MyClass>::iterator it = myList.begin(); it != myList.end(); it++)
{
  if(myCondition(*it))
  {
    myOtherList.push_back(*it);
    myList.erase(it);
  }
} 
```

那么任何人都可以提出更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-02-02T01:22:24.237

`Erase` [返回一个迭代器](http://en.cppreference.com/w/cpp/container/list/erase)，指向擦除后的元素：

```
std::list<MyClass>::iterator it = myList.begin();
while (it != myList.end())
{
  if(myCondition(*it))
  {
    myOtherList.push_back(*it);
    it = myList.erase(it);
  }
  else
  {
    ++it;
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-04T05:06:52.550

STL 列表有一个有趣的特性：该**`splice()`**方法允许您破坏性地将元素从一个列表移动到另一个列表。

`splice()`在恒定时间内运行，并且不复制元素或执行任何免费存储分配/解除分配。请注意，两个列表必须属于同一类型，并且它们必须是单独的列表实例（不是对同一列表的两个引用）。

这是一个如何使用的示例`splice()`：

```
for(std::list<MyClass>::iterator it = myList.begin(); it != myList.end(); ) {
    if(myCondition(*it)) {
        std::list<MyClass>::iterator oldIt = it++;
        myOtherList.splice(myOtherList.end(), myList, oldIt);
    } else {
        ++it;
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-02T04:26:18.063

## 解决方案 1

```
template<typename Fwd, typename Out, typename Operation>
Fwd move_if(Fwd first, Fwd last, Out result, Operation op)
{
    Fwd swap_pos = first;
    for( ; first != last; ++first ) {
        if( !op(*first) ) *swap_pos++ = *first;
        else *result++ = *first;
    }
    return swap_pos;
} 
```

这个想法很简单。如果谓词为真，您想要做的是从一个容器中*删除*元素并将它们放置在另一个容器中。因此`std::remove()`，采用已经完成删除部分的算法代码，并使其适应您的额外需求。在上面的代码中，当谓词为真时，我添加了`else`复制元素的行。

请注意，因为我们使用了`std::remove()`代码，所以算法实际上并没有缩小输入容器。虽然它确实返回了输入容器的更新结束迭代器，所以你可以只使用它而忽略额外的元素。如果您真的想缩小输入容器，请使用[erase-remove 习惯用法。](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Erase-Remove)

## 解决方案 2

```
template<typename Bidi, typename Out, typename Operation>
Bidi move_if(Bidi first, Bidi last, Out result, Operation op)
{
    Bidi new_end = partition(first, last, not1(op));
    copy(new_end, last, result);
    return new_end;
} 
```

第二种方法使用 STL 来实现算法。我个人觉得它比第一个解决方案更具可读性，但它有两个缺点：首先，它需要更强大的输入容器双向迭代器，而不是我们在第一个解决方案中使用的前向迭代器。其次，这对您来说可能是也可能不是问题，容器不能保证与调用`std::partition()`. 如果您希望保持顺序，请将该调用替换为对 的调用`std::stable_partition()`。 `std::stable_partition()`可能会稍微慢一些，但它具有与`std::partition()`.

## 无论哪种方式：调用函数

```
list<int>::iterator p = move_if(l1.begin(), l1.end(),
                                back_inserter(l2),
                                bind2nd(less<int>(), 3)); 
```

## 最后的话

在编写代码时我遇到了一个难题：`move_if()`算法应该返回什么？一方面，算法应该返回一个指向输入容器新结束位置的迭代器，因此调用者可以使用擦除删除习惯来缩小容器。但另一方面，算法应该返回结果容器末尾的位置，否则调用者找到它可能会很昂贵。在第一个解决方案中，`result`迭代器在算法结束时指向这个位置，而在第二个解决方案中，它返回的迭代器`std::copy()`指向这个位置。我可以返回一对迭代器，但为了简单起见，我只返回一个迭代器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-05T14:00:37.883

```
std::list<MyClass>::iterator endMatching =
    partition(myList.begin(), myList.end(), myCondition);
myOtherList.splice(myOtherList.begin(), myList, endMatching, myList.end()); 
```

请注意， partition() 足以让您区分匹配对象和不匹配对象。（但 list::splice() 很便宜）

请参阅以下关于受 [Now 启发的具体案例的代码，以删除与谓词匹配的元素？](https://stackoverflow.com/questions/604024/stl-removing-elements-that-match-a-predicate/606609#606609)

```
#include <iostream>
#include <iterator>
#include <list>
#include <string>
#include <algorithm>
#include <functional>

using namespace std;

class CPred : public unary_function<string, bool>
{
public:
        CPred(const string& arString)
                :mString(arString)
        {
        }

        bool operator()(const string& arString) const
        {
                return (arString.find(mString) == std::string::npos);
        }
private:
        string mString;
};

int main()
{
        list<string> Strings;

        Strings.push_back("213");
        Strings.push_back("145");
        Strings.push_back("ABC");
        Strings.push_back("167");
        Strings.push_back("DEF");

        cout << "Original list" << endl;
        copy(Strings.begin(), Strings.end(),ostream_iterator<string>(cout,"\n"));

        CPred Pred("1");

        // Linear. Exactly last - first applications of pred, and at most (last - first)/2 swaps. 
        list<string>::iterator end1 =
        partition(Strings.begin(), Strings.end(), Pred);

        list<string> NotMatching;

        // This function is constant time. 
        NotMatching.splice(NotMatching.begin(),Strings, Strings.begin(), end1); 

        cout << "Elements matching with 1" << endl;
        copy(Strings.begin(), Strings.end(), ostream_iterator<string>(cout,"\n"));

        cout << "Elements not matching with 1" << endl;
        copy(NotMatching.begin(), NotMatching.end(), ostream_iterator<string>(cout,"\n"));

        return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-02T01:19:54.880

另一种尝试：

```
for(std::list<MyClass>::iterator it = myList.begin(); it != myList.end; ) {
    std::list<MyClass>::iterator eraseiter = it;
    ++it;
    if(myCondition(*eraseiter)) {
        myOtherList.push_back(*eraseiter);
        myList.erase(eraseiter);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-02T21:35:34.460

```
template <typename ForwardIterator, typename OutputIterator, typename Predicate>
void splice_if(ForwardIterator begin, ForwardIterator end, OutputIterator out, Predicate pred)
{
    ForwardIterator it = begin;
    while( it != end )
    {
        if( pred(*it) )
        {
            *begin++ = *out++ = *it;
        }
        ++it;
    }
    return begin;
}

myList.erase( 
    splice_if( myList.begin(), myList.end(), back_inserter(myOutputList),
        myCondition
    ),
    myList.end()
) 
```

# c# - 如何最好地混淆我的 C# 产品许可证验证码？

> ID：501988
> 
> 赞同：10
> 
> 时间：2009-02-02T01:38:10.787
> 
> 标签：c#, .net

如何最好地混淆我的 C#.net 应用产品密钥验证码？

将它放在“内部密封类 CLASSNAME { };”中是否足够 还是我需要做更多？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-02T01:44:48.123

访问修饰符喜欢`internal`并且`sealed`与混淆或代码安全没有任何关系，它们只是告诉其他类如何与它们交互（或不交互）。

归根结底，您无法采取任何措施来防止盗版。一个人创造的任何东西都可能被另一个人打破。SO上有很多关于产品密钥、保持软件安全等的问题，如果您使用右上角的搜索机制，您可以找到这些问题。所有的答案都涵盖了一些基本的想法，任何有一点感觉的人都会告诉你：

1.  只要在反盗版措施上付出足够的努力，就可以使破解软件比破解信用卡方便一点。如果这真的很难做到，那么您对您的客户群收取的费用太高了。
2.  如果您专注于与客户建立积极的关系而不是假设他们是罪犯，他们会更愿意给您钱。
3.  大多数客户——个人，尤其是公司——没有任何兴趣打开你的程序集并试图弄清楚如何不付钱给你。对于个人而言，他们无论如何都不会为此付费，因此您不会失去销售；并且公司不会因为某些软件许可证的成本而冒着法律问题的巨额现金风险。

研究**公钥/私钥和椭圆密钥密码学**，您会找到保护密钥算法的方法，但它只会防止破解*密钥*，而不是绕过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-12-12T14:16:02.857

我同意 Rex M，您应该考虑使用非对称加密算法（例如椭圆曲线密码学）来避免密钥生成器。如果您对商业解决方案感兴趣，请尝试[Ellipter](http://ellipter.com) - 它使用椭圆曲线并具有一些有用的功能，例如产品信息和到期数据嵌入到生成的序列密钥中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-02T01:48:57.630

[雷克斯](https://stackoverflow.com/questions/501988/how-do-i-best-obfuscate-my-c-net-app-product-key-verification-code/501999#501999)是正确的，`internal sealed class`不会隐藏任何东西。使用单向加密哈希（例如[MD5CryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.md5cryptoserviceprovider.aspx)）来保护密码和密钥。***`*******