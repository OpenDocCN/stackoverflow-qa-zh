# StackOverflow 问答 12474000-12474999

# android - ListView onItemLongClickListener 无法正常工作

> ID：12474003
> 
> 赞同：2
> 
> 时间：2012-09-18T09:21:01.753
> 
> 标签：android, android-listview

我正在研究一个`ListView`，我已经在选定的项目上使用了`setBackgroundColor`inside 。`onItemLongClickListener`我的问题是，当我这样做并滚动时，它`ListView`也在设置一些不可见子项的颜色。怎么可能解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:49:01.583

尝试将以下属性放入您的 xml：

`

```
<ListView       
        android:dividerHeight="1dp"
        android:scrollingCache="false" > 
```

`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:35:43.587

这是因为列表视图使用旧视图以避免在滚动时重新创建视图。

事实上，这对所有的 adapterView 类都是通用的。

为了处理这个，存储视图位置的状态（使用 arrayList 或任何你想要的集合）并在 getView 上，如果位置在列表中设置为这个背景，使用这个背景，否则使用默认背景。

有关 listview 的更多信息，请阅读 API，或者（我强烈推荐）观看视频“ [listView 的世界](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:07:43.423

在您的适配器类中：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if(convertView == null) {
        convertView = inflater.inflate(...);
    }
    convertView.setBackgroundColor(defaultcolor);
    ...
} 
```

然而，当该视图将被重绘时，这将覆盖您在 onlongclicklistener 中设置的背景。因此，您可能希望保留单击项目的位置列表，以便您可以在 getView 方法中设置它们。

# jsf - 组件绑定与 findComponent() - 何时使用哪个？

> ID：12474004
> 
> 赞同：6
> 
> 时间：2012-09-18T09:21:02.660
> 
> 标签：jsf

如[本问题](https://stackoverflow.com/q/12194148/840977)所述，我尝试在支持 bean 端的表单中执行一些字段验证。为此，我想访问违规字段以标记它们。从网上搜索似乎有两种方法可以做到这一点：

*   将组件存储在支持 bean 中以供访问，并通过`binding`属性在 JSF 页面中使用它们。
*   在 JSF 页面中使用标准值绑定，当需要从 bean 访问组件时，请通过以下方式查找`UIViewRoot.findComponent(String id)`

据我所知，这两种方式都有缺点：组件绑定使用变量和 getter/setter 破坏了支持 bean，一些站点强烈反对使用组件绑定。无论如何，建议使用请求范围。另一方面， findComponent() 总是遍历树，这可能会也可能不会很昂贵，对吧？（另外，目前我根本找不到我的组件，但这是另一个问题）

哪条路要走？这些是可互换的替代方案吗？如果不是，您选择的标准是什么？目前我只是没有足够的洞察力来做出一个体面的决定......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T12:51:20.517

首先，无论选择哪种方式，两者都是不好的做法。另请参阅[JSF 中的“绑定”属性如何工作？何时以及如何使用它？](https://stackoverflow.com/questions/14911158/how-does-the-binding-attribute-work-in-jsf-when-and-how-should-it-be-used)

如果您必须做出选择，组件绑定肯定更快更便宜。从逻辑上完全理解，由 完成的树扫描`UIComponent#findComponent()`具有其性能影响。

实际上，包含组件绑定的支持 bean*必须*是请求范围的，但是您可以轻松地注入一个不同范围的支持 bean，通过`@ManagedProperty`.

一种更简洁的方法是使用 a`Map`作为所有组件绑定的持有者。您只需将以下条目添加到`faces-config.xml`：

```
<managed-bean>
    <managed-bean-name>components</managed-bean-name>
    <managed-bean-class>java.util.HashMap</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
</managed-bean> 
```

这可以用作

```
<h:inputSome binding="#{components.input1}" />
<h:inputSome binding="#{components.input2}" />
<h:inputSome binding="#{components.input3}" /> 
```

这可以在其他bean中获得

```
Map<String, UIComponent> components = (Map<String, UIComponent>) externalContext.getRequestMap().get("components"); 
```

这样您就不必担心指定单个属性/getter/setter。在上面的示例中，`Map`将包含三个带有键和的条目`input1`，每个条目都有各自的实例作为值。`input2``input3``UIComponent`

* * *

**与具体问题无关**，对于您在另一个问题中描述的具体问题，可能有一个更简单的解决方案，而不是在操作方法中执行验证（这实际上是糟糕的设计）。我已经在那里发布了答案。

# c# - 选择一个列表视图项目作为对象

> ID：12474008
> 
> 赞同：0
> 
> 时间：2012-09-18T09:21:37.730
> 
> 标签：c#, .net, linq, xaml, dynamic-linq

我也有一个`ListView`包含控件的`GridView`控件。数据来自数据库数据库方案的不同表：

1.  书籍（BookID、BookName、ISBN、CopyLeft）；
2.  借款人（BorrowerID、BorrowerName、BorrowerLevel）；
3.  交易（TransactionID、BorrowerID、BookID、BorrowDate、ReturnDate、IsReturned）；

对应的类分别`Book`是`Borrower`和`Transaction`。 使用数据绑定从这些表中获取`GridView`、 `TransactionID`、`BorrowerID`、`BorrowerName`和。XAML 代码：`BookName``BorrowDate``ReturnDate`

```
 <Grid>
    <ListView Margin="15,57,58,57" Name="borrowedBookList" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding }" KeyDown="borrowedBookList_KeyDown">
        <ListView.View>
            <GridView>
                <GridView.Columns>
                    <GridViewColumn  Width="80" Header="Borrower ID" DisplayMemberBinding="{Binding Path=BorrowerID}"/>
                    <GridViewColumn Width="220" Header="Borrower Name" DisplayMemberBinding="{Binding Path=BorrowerName}"/>
                    <GridViewColumn Width="220" Header="Book Name" DisplayMemberBinding="{Binding Path=BookName}"/>
                    <GridViewColumn Width="100" Header="Date" DisplayMemberBinding="{Binding Path=BorrowDate}"/>
                    <GridViewColumn Width="100" Header="Return Date" DisplayMemberBinding="{Binding Path=ReturnDate}"/>
                   </GridView.Columns>
            </GridView>
        </ListView.View>
    </ListView>
    <Label Content="Borrowed Book List" Height="34" HorizontalAlignment="Left" Margin="310,12,0,0" Name="label1" VerticalAlignment="Top" Width="151" />
    <Button Content="Close" Height="31" HorizontalAlignment="Left" Margin="636,535,0,0" Name="close" VerticalAlignment="Top" Width="106" Click="close_Click"/>
    <Button Content="Return This Book" Height="31" HorizontalAlignment="Left" Margin="454,535,0,0" Name="return" VerticalAlignment="Top" Width="115" Click="return_Click"/>
</Grid> 
```

现在，我可以选择一行作为`Transaction`or`Book`或的对象`Borrower`吗？我的目标是选择一行并识别`Transactions`,`Books`表的相应条目并递增`CopyLeft`并将“YES”分配给`IsReturned`属性。那么我该怎么做呢？

另外：我尝试这样编写代码：

```
var selectedTran = this.borrowedBookList.selectedItem as Transaction;
var selectedBook=this.borrowedBookList.selectedItem as Book;
try
{
    selectedBook.CopyLeft++;
    selectedTran.isReturned="YES";
}
catch(Exception ex)
{
    MessageBox.Show(ex.message);
} 
```

异常显示“对象引用未设置为对象的实例”。然后我试图像这样找到所借书列表的类型：

```
MessageBox.Show(borrowedBookList.SelectedItem.GetType().ToString()); 
```

它显示了一个匿名类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:46:11.067

您的查询可能会导致匿名类型：

```
 var query = from b in ctx.books 
                ... 
                select new 
                { BorrowerID = b.ID, BorrowerName = b.Name , ... 
                } 
```

您的网格的 selectedItem 属性包含此类型，而不是您的原始实体类。所以我会使用一个命名类，你应该在其中包含主键 ID，并使用所选项目中的主键更新相应的实体：

```
public class ForYourGrid
{
    public int BorrowerID { get; set; }
    public string BorrowerName { get; set; }
...
}

    var query2 = from b in ctx.books 
                ... 
                select new ForYourGrid 
                { BorrowerID = b.ID, BorrowerName = b.Name , ... 
                }

    var selected = this.borrowedBookList.selectedItem as ForYourGrid;

    var selectedTran = ctx.Transactions.SingleOrDefault(e => e.TransactionID == selected.TransactionID);
    selectedTran.isReturned = "YES";

    var selectedBook = ctx.Books.SingleOrDefault(e => e.BookID == selected.BookID);
    selectedBook.CopyLeft++;

    ctx.SaveChanges(); 
```

# assembly - NASM x86 16 位寻址模式

> ID：12474010
> 
> 赞同：5
> 
> 时间：2012-09-18T09:21:43.590
> 
> 标签：assembly, x86, nasm, x86-16, addressing-mode

我无法指向一个地址并在我的情况下写入一个字节大小的变量。这给了我错误“错误：无效的有效地址”：

```
mov byte[AX], byte 0x0 
```

经过一些跟踪和错误后，我测试了相同但使用 EAX。这编译得很好：

```
mov byte[EAX], byte 0x0 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T09:32:02.323

`[AX]`是无效的内存操作数规范。

[有效的 16 位是](https://en.wikipedia.org/wiki/X86#Addressing_modes)：

```
[constant]  
[BX]  
[SI]  
[DI]  
[BX+constant]  
[BP+constant]  
[SI+constant]  
[DI+constant]  
[BX+SI]  
[BX+DI]  
[BP+SI]  
[BP+DI]  
[BX+SI+constant]  
[BX+DI+constant]  
[BP+SI+constant]  
[BP+DI+constant] 
```

[BP] 形式上是无效的，但许多汇编程序会悄悄地将其转换为 [BP+0]。

有关内存操作数编码以及 ModR/M 和 SIB 字节的信息，请参见 CPU 手册。

# c# - IQueryCancelAutoPlay WPF 实现

> ID：12474012
> 
> 赞同：0
> 
> 时间：2012-09-18T09:21:48.610
> 
> 标签：c#, wpf, visual-studio-2010, windows-7

我应该将哪个引用添加到我的 WPF 应用程序中，以便我可以实现 IQueryCancelAutoPlay 接口？

这是产生错误 *的代码示例找不到类型或命名空间名称“IQueryCancelAutoPlay”（您是否缺少 using 指令或程序集引用？）*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

namespace DisableAutorun {
    [ComVisible(true)]
    [Guid("63DA3B72-E9C9-4d40-B7DA-DC537C4C5CC2")]
    [ClassInterface(ClassInterfaceType.None)]
    public class Autoplay : IQueryCancelAutoPlay, IDisposable {
        private RunningObjectTableEntry rotEntry;

        public Autoplay() {
            rotEntry = new RunningObjectTableEntry(this);
        }

        public int AllowAutoPlay(string pszPath, Content dwContentType, string pszLabel, int dwSerialNumber) {

            Console.WriteLine("QueryCancelAutoPlay:");
            Console.WriteLine("   " + pszPath);
            Console.WriteLine("   " + dwContentType.ToString("x"));
            Console.WriteLine("   " + pszLabel);
            Console.WriteLine("   " + dwSerialNumber.ToString());

            return 1;
        }

    }
} 
```

# liferay - Liferay 6.1：DynamicQuery 找不到类

> ID：12474013
> 
> 赞同：0
> 
> 时间：2012-09-18T09:21:54.810
> 
> 标签：liferay, dynamicquery

我有一个需要做一些`Group`查询的portlet 项目。我没有创建该项目，但它是使用 Eclipse Liferay SDK 插件制作的。

我添加了一个`DynamicQueryFactoryUtil.forClass(Group.class)`，但它在运行时失败。它抱怨没有找到 GroupImpl.class，它是接口 Group 的实现。我的项目依赖项不包括 portlet-impl（它包含 GroupImpl.class）。

我不确定我是否应该：

*   将该 jar 包含到依赖项中以进行编译
*   将该 jar 包含到 portlet jar 中

或者我做错了什么，并且可以直接使用查询组。

PS：我是 Liferay 的新手......

PS2：**这是 Liferay 6.1**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:54:08.913

为了使 Liferay 能够检索正确的类，您需要为您的初始化提供正确的类加载器`DynamicQuery`，在本例中是门户的类加载器，因为该类加载器可以访问模型实现：

```
 DynamicQueryFactoryUtil.forClass(Group.class, PortalClassLoaderUtil.getClassLoader()) 
```

# xml - xs:mixed without elements是什么意思？

> ID：12474018
> 
> 赞同：2
> 
> 时间：2012-09-18T09:22:23.233
> 
> 标签：xml, xsd, mixed

我从客户那里得到了以下 XSD 位。它是跨越数十个文件的遗留模式的一部分。

```
<xs:element name="stateProvinceName">
  <xs:complexType mixed="true">
    <xs:attributeGroup ref="xml:attlist.global-attributes"/>
  </xs:complexType>
</xs:element> 
```

我试图弄清楚他们真正想要什么。没有子元素，那么这个 'xs:mixed' 是什么意思呢？它应该是 simpleContent，还是没有内容？

我告诉他们应该使用更标准的结构，例如

```
<xs:element name="stateProvinceName">
  <xs:complexType>
    <xs:simpleContent>
       <xs:extension base="xs:string">
         <xs:attributeGroup ref="xml:attlist.global-attributes"/>
       </xs:extension>
     </xs:simpleContent>
  </xs:complexType>
</xs:element> 
```

但他们不确定这是否意味着同样的事情。两种模式都接受

```
<stateProvinceName ID="345643">California</stateProvinceName> 
```

和

```
<stateProvinceName ID="345643"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T20:56:54.527

这两种类型在表面上可能是等价的，但它们的可扩展性是不同的。使用 xs:string 的简单内容类型允许通过例如使用正则表达式约束字符串来细化类型，而使用没有元素的混合复杂内容类型允许通过向模型添加元素来细化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T16:54:50.307

使用`mixed`空内容模型是完全标准的。如果你不喜欢他们的内容模型，你需要一个不同的论点。

一般来说，`mixed="true"`表示在给定复杂类型的子元素中允许字符内容；在这种情况下，由于内容模型中没有子元素，因此父元素的唯一合法内容将是字符数据、评论和处理指令。结果将是元素声明接受相同的元素集，就像如果元素使用复杂类型类型化且简单内容声明为`xs:string`.

混合内容和字符串之间的选择是一个设计决定。一般来说，混合内容更适合自然语言散文，即使元素的初始设计没有预见到对子元素的需求。一般来说，`xs:string`如果作为一组期望值的限制的基础，更容易使用。（如果您想限制`stateProvinceName`仅接受特定邮政服务定义的代码，`xs:string`则比混合内容更适合您的工作。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-16T18:20:57.490

这意味着您有一个名为的元素，该元素`stateProvinceName`具有一个或多个属性（由 定义`xml:attlist.global-attributes`），其内容是字符串。照原样，它与您推荐的结构没有什么不同。

然而，正如[@Michael Kay 所指出](https://stackoverflow.com/a/12484940/584674)的，它们的**潜在**区别在于它们的可扩展性。

# php - PHP混淆中的比较运算符“==”

> ID：12474019
> 
> 赞同：4
> 
> 时间：2012-09-18T09:22:23.407
> 
> 标签：php

在 PHP 中，

```
null==0
0=="0" 
```

如果将这两者结合起来，您会期望：

```
null=="0" 
```

但是这是错误的。

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T09:33:43.420

在第一种情况下：

```
null==0 
```

`null`计算结果为，与计算结果`false`相同，所以两者都是，所以比较返回。`0``false``false``true`

在第二种情况下：

```
0=="0" 
```

在这里，您正在比较两个不同类型的变量，一个是数字，另一个是字符串，因为您没有使用[**===**](http://www.php.net/manual/en/language.operators.comparison.php)运算符，PHP 将其中一个转换为另一种类型，因此**0**转换为字符串等于**“0”**，所以它们是同样，如果它是**“0”**，它被转换为数字也被转换为**0**，所以它与另一个值相同，所以这个比较返回 true。

第三种情况：

```
null=="0" 
```

这是同样的情况，两者都是不同的类型，所以 PHP 将其中一个转换为另一个的类型，但是如果你将 null 转换为字符串，结果是**"null"**不等于**"0"**，所以这就是原因不是确实那个比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:32:51.113

`==`检查相等性

`===`检查相等**和**类型（我们也说它是“相同的”）

因此，由于 PHP 没有强类型提示，它会自动转换为最适合的类型。

`null === 0`is `false`while`null == 0`为真，因为`0`or`'0'`被视为空值以及`false`. 空值`null == ''`也会返回`true`。

这就是 PHP 的工作原理。

最佳实践是始终使用运算符检查类型`===`（及其负等效项，`!==`在特殊情况下仅使用另一个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:30:11.597

您必须了解，因为 PHP 在其类型上并不严格，它通常会根据所需的比较或操作将您的变量转换为其他类型。在 null==0 的情况下，它告诉您 null 和整数 0 都被认为是错误的。

在 null == "0" 的情况下，它正在检查字符串 "0" 是否为空，而事实并非如此。将整数 0 与字符串“0”类型的情况“0”与 int 进行比较，在这种情况下它们是相等的。

希望有帮助。

# ruby - 这个脚本更有效的方法？

> ID：12474021
> 
> 赞同：2
> 
> 时间：2012-09-18T09:22:26.980
> 
> 标签：ruby, watir

我完全意识到这是***错误***的做法，但我对 ruby​​ 并不是很熟悉。我很确定最好的选择是用例？还是一个循环？

```
def addInfoToStory(idOfStory, storyTitle, storyPriority, storyEST, storySupporter, storyBugzilla, storyStatus, storyOutcome, storyCustomer, storyNotes)
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>1).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>1).div(:class => "formLib1").text_field(:id, 'input').set"#{storyTitle}"
  @browser.send_keys :tab

  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>2).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>2).div(:class => "formLib1").text_field(:id, 'input').set"#{storyPriority}"
  @browser.send_keys :tab

  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>3).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>3).div(:class => "formLib1").text_field(:id, 'input').set"#{storyEST}"
  @browser.send_keys :tab

  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>4).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>4).div(:class => "formLib1").text_field(:id, 'input').set"#{storySupporter}"

  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>5).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>5).div(:class => "formLib1").text_field(:id, 'input').set"#{storyBugzilla}"
  @browser.send_keys :tab

  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>6).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>6).div(:class => "formLib1").text_field(:id, 'input').set"#{storyStatus}"
  @browser.send_keys :tab

  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>7).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>7).div(:class => "formLib1").text_field(:id, 'input').set"#{storyOutcome}"
  @browser.send_keys :tab

  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>8).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>8).div(:class => "formLib1").text_field(:id, 'input').set"#{storyCustomer}"
  @browser.send_keys :tab

  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>9).div.double_click
  @browser.div(:id => "#{idOfStory}"+"_firstCol").div(:class => "tDetEntry", :index =>9).div(:class => "formLib1").text_field(:id, 'input').set"#{storyNotes}"
  @browser.send_keys :tab
end 
```

关于我可以完成这个填写表格过程的最有效方式的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:34:23.997

您的代码等效于：

```
def addInfoToStory(idOfStory, *stories)
  stories.each.with_index do |story, i|
    @browser.div(id: "#{idOfStory}_firstCol").div(class: "tDetEntry", index: i+1).div.double_click
    @browser.div(id: "#{idOfStory}_firstCol").div(class: "tDetEntry", index: i+1).div(class: "formLib1").text_field(:id, "input").set(story)
    @browser.send_keys(:tab) unless i == 3
  end
end 
```

# ipad - 如何将 UIImagePickerViewController 添加为 ipad 中的子视图？

> ID：12474023
> 
> 赞同：0
> 
> 时间：2012-09-18T09:22:34.813
> 
> 标签：ipad, ios4, uiimagepickercontroller

如何将 UIImagePickerViewController 添加为 ipad 中的子视图。

在 iphone 我用这样的这个工作正常

```
self.pick = [[UIImagePickerController alloc]init];
pick.delegate = self;
pick.sourceType = UIImagePickerControllerSourceTypeCamera;
pick.sourceType = UIImagePickerControllerCameraDeviceFront;
pick.showsCameraControls = NO;
CGRect rect = CGRectMake(0, 0, 200, 250);
pick.view.frame = rect;
UIView *cameraView = [[UIView alloc] initWithFrame:CGRectMake(50, 50, 200, 200)];   
[cameraView setBackgroundColor:[UIColor greenColor]];
[cameraView addSubview:pick.view];
[self.view addSubview:cameraView];
[pick viewWillAppear:YES];
[pick viewDidAppear:YES];
[pick release]; 
```

但同样的方式我垫不工作。相机打开时，ipad 正在获得完整视图。我不想使用 popoverview 控制器。请帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:36:03.233

`UIImagePickerController` **必须**`UIPopoverController`在 iPad上呈现。

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    UIPopoverController *popover = [[UIPopoverController alloc] initWithContentViewController:picker];
    [popover presentPopoverFromRect:self.selectedImageView.bounds inView:self.selectedImageView permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    self.popOver = popover;
} else {
    [self presentModalViewController:picker animated:YES];
} 
```

# wordpress - 创建一个子域并将 wordpress 转移到这个子域

> ID：12474025
> 
> 赞同：0
> 
> 时间：2012-09-18T09:22:39.477
> 
> 标签：wordpress, subdomain

我的任务是创建一个子域，然后将整个 wordpress 站点从主域复制到子域。我有主目录 caroline-baxter.com 并在上面安装了 wordpress。现在我想将这个[caroline-baxter](http://caroline-baxter.com)整个 wordpress 站点复制到它的子域[caroline-baxter/test](http://www.caroline-baxter.com/test/)中。我已按照以下步骤完成：

1.  将所有文件和文件夹复制到测试文件夹中
2.  导入 Caroline-baxter 数据库
3.  更改 sql 文件中的 url。
4.  创建了一个新数据库并从 caroline-baxter 数据库中导入
5.  更改了 wp-config.php 中的数据库名称（我使用相同的用户名和密码）

测试站点不工作（如您所见：[test site](http://www.caroline-baxter.com/test/)）。在这里您还可以看到[http://www.caroline-baxter.com/test/wp-admin](http://www.caroline-baxter.com/test/wp-admin)重定向到[http://www.caroline-baxter.com/wp-admin](http://www.caroline-baxter.com/wp-admin)。我无法解决问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:49:46.477

您是否尝试过此处找到的所有选项 - [http://codex.wordpress.org/Login_Trouble](http://codex.wordpress.org/Login_Trouble)，尤其是本节 - [http://codex.wordpress.org/Login_Trouble#Site_URL_Redirecting](http://codex.wordpress.org/Login_Trouble#Site_URL_Redirecting)？如果是这样，那可能是您的服务器的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:42:00.157

嗨，可能你需要改变这个 -

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /dir/
RewriteRule ^index.php$ – [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /dir/index.php [L]
</IfModule>

# END WordPress 
```

dir 是子文件夹名称，如果它不在根域中。

希望能帮助到你。

# asp.net-mvc - 临时 ASP.NET 文件冲突在 Visual Studio 中构建项目（devex 组件）

> ID：12474028
> 
> 赞同：4
> 
> 时间：2012-09-18T09:23:02.010
> 
> 标签：asp.net-mvc, build, devexpress, temporary-files

我正在尝试在 Visual Studio 中构建我的项目（直到今天早上我来到我的机器并且它在 Windows 更新后重新启动），现在我收到了一些与 devex 组件有关的错误，说：

'c:\Users\~\AppData\Local\Temp\Temporary ASP.NET Files\temp\b2334824\769a6106\App_Web_legendcontrol.ascx.7e693e39.3dzqvxte.dll' 和 'c: \Users\~\AppData\Local\Temp\Temporary ASP.NET Files\temp\b2334824\769a6106

我正在运行 DevExpress DXperience 12.1。我尝试过清理目录，从 GIT 获取最新版本，进行硬重置，从临时目录中删除所有文件等等。

我知道其他从 GIT 使用这个项目的同一分支的开发人员没有遇到同样的问题，所以这表明它与环境有关。请问有什么想法吗？:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:27:03.097

如果将 batch="false" 添加到 web.config 的编译元素并清理临时目录，它会改变什么吗？

```
<compilation batch="false" defaultLanguage="..." debug="..."  targetFramework="..."> 
```

# crystal-reports - 水晶报表，一对多关系表

> ID：12474032
> 
> 赞同：0
> 
> 时间：2012-09-18T09:23:09.877
> 
> 标签：crystal-reports

我有四张桌子

```
- CONSUMPTION
- CONSUMPTION_EMPLOYEE
- CONSUMPTION_LOCATION
- CONSUMPTION_MATERIAL 
```

以及按字段相关的所有表`CONSUMPTION_CODE`

请查看[http://s11.postimage.org/6e26fvc4z/table.gif](http://s11.postimage.org/6e26fvc4z/table.gif)

我的目标是使用类似于[http://s8.postimage.org/u8lv1kv5x/image.gif的水晶报告生成报告](http://s8.postimage.org/u8lv1kv5x/image.gif)

我在互联网上找不到关于如何在单个水晶报表页面上生成多个报表的信息，因为如果可能的话，我不喜欢使用子报表。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:01:54.417

您需要一个主报告和两个子报告。

*   Main - 消费信息组头1（消费ID上的组）；详细信息部分中的员工信息
*   Sub 0 - 位置信息；添加到组页脚 1a
*   Sub 1 - 材料信息；添加到组页脚 1b（您需要添加第二个组页脚部分）

# android - 如何以编程方式在 sdcard 中创建一个可以直接在 Windows 和手机中显示的文件夹

> ID：12474033
> 
> 赞同：3
> 
> 时间：2012-09-18T09:23:13.960
> 
> 标签：android, directory, sd-card, mount, unmount

我创建了一个 android 应用程序，它在其中创建了一个存储数据的文件夹，但我希望它在连接 USB 时立即显示在 Windows 中。现在，只有在我重新启动移动设备或挂载和卸载 sdcard 后才能看到。或者有没有办法以编程方式安装和卸载设备？

有人推荐我这个片段 `sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory())));`

但我似乎无法理解如何应用此代码，或者这是否适用于我的担忧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-04T16:20:33.820

您需要对新文件启动扫描，以便从外部可以看到它们。看到[这个答案](https://stackoverflow.com/a/19934089/5232306)

```
// initiate media scan and put the new things into the path array to
// make the scanner aware of the location and the files you want to see
MediaScannerConnection.scanFile(this, new String[] {path.toString()}, null, null); 
```

PS：这个问题有点老了，但这是我遇到困难时发现的第一个问题......所以，可能值得为下一个问题回答！

# android - 如何在android中的片段内实现菜单项单击侦听器

> ID：12474036
> 
> 赞同：2
> 
> 时间：2012-09-18T09:23:23.957
> 
> 标签：android, android-fragments, android-actionbar, android-menu, android-fragmentactivity

我在 ActionBar 中有 MenuItems，我在 ViewPager 中使用 Fragments。现在我想在我的片段中处理 onMenuItemClickListener 事件。它在 Main Activity 中运行良好。但不在 Fragments 内部。而且它也不会获取任何错误。

这是我尝试过的方法。两者在 Activity 中都可以正常工作。

第一种方法：

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuItem item = menu.findItem(R.id.grid_view);
    item.setOnMenuItemClickListener(new OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
           Log.v("test","dfsfdsfasd");
            return true;
        }
    });
    return true;
} 
```

第二种方法：

```
public boolean onOptionsItemSelected(MenuItem item)
{
    switch(item.getItemId())
    {
    case R.id.grid_view:
    {
        Log.v("Log:","grid_view item pressed");
        return true;
    }

    case R.id.list_view:
    {
        Log.v("Log:","list_view item pressed");
        return true;
    }
    default:
        return true;
    }
} 
```

任何有关如何实现这一目标的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:41:17.723

通过使用 onPrepareOptionsMenu 方法解决。

# batch-file - 如何将多行日志文件连接成批处理文件中的单个变量？

> ID：12474040
> 
> 赞同：1
> 
> 时间：2012-09-18T09:23:39.430
> 
> 标签：batch-file

我有一个日志文件，其中包含拆分为多行的堆栈跟踪。我需要将此文件读入批处理文件并删除所有换行符。

作为第一步，我尝试了这个：

```
if exist "%log_dir%\Log.log" (
    for /F "tokens=*" %%a in ("%log_dir%\Log.log") do @echo %%a
) 
```

我的期望是这会回显日志文件的每一行。然后我打算将这些行连接在一起并将该值设置在一个变量中。

但是，这段代码并没有达到我的预期。我已经尝试更改 delims 和 tokens 选项的值，但我能得到的唯一输出是日志文件的绝对路径，而该文件的内容没有任何内容。

如何将变量设置为等于删除换行符的文件中的文本行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:36:02.170

如果你想在 FOR/F 循环中为你的文件名使用引号，你也需要添加该`usebackq`选项，否则你会得到一个字符串而不是文件的内容。

```
for /F "usebackq delims=" %%a in ("%log_dir%\Log.log") do @echo %%a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-20T11:06:24.420

或删除引号

```
if exist "%log_dir%\Log.log" (
    for /F "tokens=*" %%a in (%log_dir%\Log.log) do @echo %%a
) 
```

# php - RewriteRule 获取 url 的最后两个参数

> ID：12474041
> 
> 赞同：1
> 
> 时间：2012-09-18T09:23:45.450
> 
> 标签：php, .htaccess, mod-rewrite

好的，所以我有这个 .htaccess 文件，它在 base 之后获取第一个目录为 $1，第二个为 $2

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteCond $1 ^[^\.]+[^/]$
    RewriteRule (.*) http://%{HTTP_HOST}/$1/ [R=301,L]

    RewriteRule ^([^/]+)/([^/]+)/$ index.php?sub=$1&page=$2 [L]
    RewriteRule ^([^/]+)/$ index.php?sub=$1&page=$1 [L]

    #RewriteRule ^(.*)/(.*)$ index.php?sub=$1&page=$2 [L]
    #RewriteRule ^(.*)$      index.php?sub=$1&page=$1 [L]
</IfModule> 
```

现在我们需要在生产服务器上的一个子目录中测试这个网站。这将向 url 添加一个额外的目录

所以：hxxp://localhost/newwebsite/var1/var2/

有没有办法只获取一个 url 的最后两个参数，或者我应该只是推动它以我们想要的方式工作。（不是真正的选择）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:06:29.080

将 htaccess 文件放在`newwebsite`目录中，然后将其更改`RewriteBase /`为`RewriteBase /newwebsite/`.

# android - android中如何实现布局？

> ID：12474045
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:23:51.233
> 
> 标签：android, android-layout

```
data1    hello   hi 
data2    hello2  hi
data3    hi      Hello 
```

我想知道应该用什么，TableLayout？linearLayout还是RelativeLayout？哪个视图实现布局会更好？我也想用XML代码实现这个布局，求各位帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:29:09.123

这完全取决于您要设计的 GUI，以及您希望如何放置 GUI 对象。Android 官方网站有一个关于这个主题的非常有用和有用的教程：

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

[http://developer.android.com/guide/topics/ui/declaring-layout.html#CommonLayouts](http://developer.android.com/guide/topics/ui/declaring-layout.html#CommonLayouts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:33:12.157

你需要什么东西才能走动吗？与任何对象交互？

如果你只是想要一些简单的东西，你可以使用 TableLayout。如果你只需要支持 ICS (Android 4.0) 及更高版本，还可以查看 GridLayout。

就性能而言，LinearLayout 可能不是您的最佳选择（将进行大量计算而不会太多）。如果表中有很多元素，RelativeLayout 也不是最好的。

您还可以从 Google 员工那里查看有关 TableLayout 的[答案。](https://stackoverflow.com/a/7089011/347565)

# bitwise-operators - 如何猜测不使用 if else 语句的按位运算？

> ID：12474046
> 
> 赞同：1
> 
> 时间：2012-09-18T09:23:53.023
> 
> 标签：bitwise-operators

我想得到`2^n`它的其余部分意味着`number % 2^n`（n 介于 0 和 31 之间）。

首先我认为很简单`(x>>n)`，但它有效`>0`

```
n=0 -> 0 
```

但我不能使用 if else 语句，但我不知道如何从 if else 转换为逐步按位运算。

请给我这个问题的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:31:11.993

如果我正确理解了这个问题，那么您只需要这样做：

```
remainder = x & ((1 << n) - 1); // remainder = x % 2^n 
```

这使用了众所周知的属性：`x % 2^n == x & (2^n - 1)`.

# asp.net - Telerik RadGrid 单击与双击检测

> ID：12474052
> 
> 赞同：2
> 
> 时间：2012-09-18T09:24:07.507
> 
> 标签：asp.net, telerik-grid

我正在使用 Telerik`RadGrid`控件，但是每当我单击时，`GridEditCommandColumn`我都会收到双击事件。

有人可以为我澄清一下如何正确检测控件**的单击**和**双击**事件吗？

# php - PHP在[[]]括号内获取字符串到数组

> ID：12474053
> 
> 赞同：0
> 
> 时间：2012-09-18T09:24:11.103
> 
> 标签：php, regex, string

我正在用 PHP 编写一些片段脚本，

我有这种字符串变量

```
 $msg="Dear [[5]]
    We wish to continue the lesson with the [[6]]"; 
```

我需要从这个 $msg 中获取 5 和 6 并分配给一个数组 ex array(5,6)

因为这些是片段数字，任何人都知道如何使用 PHP 来做到这一点

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:28:14.270

使用[`preg_match_all`](http://php.net/manual/en/function.preg-match-all.php)：

```
$msg = "Dear [[5]] We wish to continue the lesson with the [[6]]";
preg_match_all("/\[\[(\d+)\]\]/", $msg, $matches); 
```

如果有匹配，`$matches[1]`则将包含一个带有匹配数字的数组：

```
Array
(
    [0] => 5
    [1] => 6
) 
```

**[演示](http://ideone.com/52Xxh)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:31:39.593

这是你想要的：

```
<?php

$msg = "Dear [[5]]
 We wish to continue the lesson with the [[6]]";

preg_match_all('/\[\[([0-9+])\]\]/', $msg, $array);

$array = $array[1];

print_r($array);

?> 
```

输出：

```
Array
(
    [0] => 5
    [1] => 6
) 
```

# c - 如何在 C/C++ 中使用 net-snmp MIB API 列出 SMIv1 MIBS？

> ID：12474054
> 
> 赞同：2
> 
> 时间：2012-09-18T09:24:12.347
> 
> 标签：c, snmp, net-snmp, mib

*我想用net-snmp*显示各种 MIBS 的列表，并显示与 SNMP 树结构相关的其他信息。

现在事实证明，我的客户的 SMIv1 MIBS 没有出现在列表中，但被*net-snmp*正确加载。

示例*net-snmp*代码遍历内存中的 MIB 结构，并假设我们在树中的 MIB 和 MODULE-IDENTITY 注释之间具有 SMIv2 双射。所以当我们找到一个 MODULE-IDENTITY 节点时，我们找到了一个 MIB。

***有谁知道使用net-snmp*列出 SMIv1 MIBS 的正确方法是什么？**（或任何解决方法？）

```
 // Read mibs and obtain memory structures
  struct tree * head = read_all_mibs();
  // Walk down the SNMP tree
  for ( struct tree * tp = head; tp; tp = tp->next_peer )
  {
     // Module-indentity
     if ( tp->type == TYPE_MODID )
     {
        // XXX We found a SMIv2 MIB, but SMIv1 MIBs have no MODULE-IDENTITY node
     }
  } 
```

注意：我在[http://www.ibr.cs.tu-bs.de/projects/libsmi/tools/找到了一个转换器](http://www.ibr.cs.tu-bs.de/projects/libsmi/tools/)*smidump*（一个命令行工具，或作为 Web 服务），但它没有添加 MODULE- MIB 的 IDENTITY 节点。

**编辑**：请注意，任何将旧的 SNMP MIB 转换为更新的（SMIv2 样式）的工具都可以解决问题。在那个特定方向上有什么帮助吗？

一个建议可能是，在没有 MODULE-IDENTIFIER 的情况下，找到 MIB 的*根*OBJECT-IDENTIFIER（有时 MIB 会在许多不同且不相关的地方添加节点，因此这不起作用）。使用*根节点*，我可以显示与该 MIB 相关的大部分树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:16:11.893

它使用 UDP 数据报。您可以获得 net-snmp 或 snif UDP 流量的来源（看起来更简单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:36:02.167

我的同事和我发现解决该问题的唯一解决方案是将“顶级”MIB 转换为更类似于 SNMPv2 的结构。即 1) 导入 MODULE-IDENTITY 类型，2) 用 MODULE-IDENTITY 声明替换顶级节点。

```
 ...
    IMPORTS
       MODULE-IDENTITY
       FROM
       SNMPv2-SMI
    ...

    -- Removed top-level node
    --    compaq              OBJECT IDENTIFIER ::= { enterprises 232 }

    -- Add a fake module-identity node
    compaq MODULE-IDENTITY
    LAST-UPDATED   "200111120000Z"
    ORGANIZATION   "COMPAQ"
    CONTACT-INFO
           "why.still.using.snmpv1@compaq.com"
    DESCRIPTION
           "why does compaq still provide these mibs in 2013?"
    REVISION       "9407210000Z"
    DESCRIPTION
           "Normal fixed MIB module."
    ::= { enterprises 232 } 
```

通过此修复，`net-snmp`库将向我们显示 MIB 的模块标识节点，就像其他所有 SNMPv2 mib 一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T04:35:35.667

net-snmp 是在设备上运行 snmp 的代理（即服务器）。您使用什么客户端（即 mib 浏览器或命令行工具，例如 snmp-get/walk 等）来查询？您的客户端是否也加载了与服务器相同的 MIB？

我假设您使用的是 SNMPv1。您是否使用正确的访问社区，即您正在从客户端（MIB 浏览器或命令行 snmp 客户端）输入正确的密码来验证 SNMP 代理/服务器？

我建议使用基于 GUI 的客户端（称为 SNMP 管理器）来定位问题。如[MGSOftMIBBrowser](http://www.mg-soft.si/mgMibBrowserPE.html)

试用版是免费的。您会看到尝试的结果，例如密码失败（snmpv1 的社区名称）。

其他几个可能的问题包括：

SMIv1 是一种旧格式。所以你需要确保你使用的 net-snmp 版本支持它。

如果您使用的是 SNMPv2，则您可能正在使用正确的社区进行身份验证。但是，您的社区没有您希望查看的 mib 的读取权限。SNMPv2 引入了视图的概念，您可以在其中允许 oid 树的某个子集对特定社区（用户）可见。

如果它是非标准 mib（即不是核心 snmp mibs 的一部分），您应该找到它的完整 OID（类似于 1.3.4.1.2...）并首先检查 GUI（MIB 浏览器）是否存在或否则针对特定的 oid 调试获取请求。

还要了解非标准 mib 需要在代理和客户端中加载。否则客户端将不知道能够代表它查询请求的 mib 的详细信息。

# html - 表格数据和水平线间距

> ID：12474057
> 
> 赞同：3
> 
> 时间：2012-09-18T09:24:16.287
> 
> 标签：html, css

这是[小提琴](http://jsfiddle.net/haWd5/)。如何将水平规则分配给顶部？意味着它应该接触/重叠表格边框。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:27:18.993

[http://jsfiddle.net/haWd5/2/](http://jsfiddle.net/haWd5/2/)

小时标签应该`MARGIN:0 ; PADDING : 0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:27:22.050

那就是你想要的[http://jsfiddle.net/haWd5/1/](http://jsfiddle.net/haWd5/1/)？像这样写：

```
hr{
    margin:0;
    padding:0;
}
td{vertical-align:top;} 
```

# actionscript-3 - flash player / as 3：将 as3 输出重定向到 Chrome 的开发者控制台？

> ID：12474060
> 
> 赞同：0
> 
> 时间：2012-09-18T09:24:28.057
> 
> 标签：actionscript-3, google-chrome

是否可以将 Flash Player 的跟踪输出重定向到 Chrome（或其他浏览器）的开发者控制台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:56:21.627

您可以通过使用 ExternalInterface 从您的应用程序调用 JS 来做到这一点。然后只需调用 js console.log("message");

这是一个示例：

```
ExternalInterface.call("console.log","your text message to console"); 
```

您还可以查看[http://ripeworks.com/tracing-as3-to-chrome/](http://ripeworks.com/tracing-as3-to-chrome/) 谷歌搜索结果之一。

还有更多关于从 AS3 调用 JS 并返回这里的信息 [http://www.redcodelabs.com/2012/04/calling-actionscript-method-from-javascript/](http://www.redcodelabs.com/2012/04/calling-actionscript-method-from-javascript/)

# c# - 发布 dll - 复制到 bin 文件夹

> ID：12474062
> 
> 赞同：0
> 
> 时间：2012-09-18T09:24:31.037
> 
> 标签：c#, asp.net-mvc, dll

MVC 项目。在我的数据访问层上，我有一个`libs`文件夹，用于存储项目需要访问数据的一些 dll。其中之一是设置“本地复制”为真。目标是将 dll 复制到 bin 文件夹，以便我可以将其与应用程序一起部署。

问题是，当我构建应用程序时，它确实复制到 bin 文件夹，但仅复制到 DAL 项目上的 bin 文件夹。由于它是一个 Web 应用程序，因此我想构建 Web 项目并将 dll 复制到其 bin 文件夹中，这样我就可以部署它，而无需手动将其从 dal 上的 bin 复制到已部署应用程序的 bin 中。

我需要做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:06:37.553

您可以右键单击 Web 项目，然后单击如下所示的部署项目。这将在您的项目路径中添加项目所需的所有 dll，您可以在输出窗口中看到

![在此处输入图像描述](../Images/8a0144daf27d3d124521958d1b4f2024.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:02:20.557

构建行动 = 内容可能会有所帮助；但只有在您的 DAL Bin 中被引用时，它才会进入您的 DAL Bin。

# perl - perl 中的电子表格::ParseExcel 模块

> ID：12474063
> 
> 赞同：0
> 
> 时间：2012-09-18T09:24:34.773
> 
> 标签：perl

当我处理类和对象时，我总是感到困惑。当我试图理解该 `Spreadsheet::ParseExcel`模块时，我对它的类和对象有一些疑问：

我的疑问是：

使用`$parser= Spreadsheet::ParseExcel->new();`，我们正在为 创建一个对象`Spreadsheet::ParseExcel`，之后我们将为 创建一个对象`Spreadsheet::ParseExcel::Workbook`。
为什么我们不能直接创建对象 `Spreadsheet::ParseExcel::Workbook`并开始解析？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T12:22:59.557

> 为什么我们不能直接为 Spreadsheet::ParseExcel::Workbook 创建对象并开始解析

这是一个合理的问题，在旧版本的 Spreadsheet::ParseExcel 中有一种`Spreadsheet::ParseExcel::Workbook->Parse()`方法可以做到这一点。(*)

用户倾向于仅将 Excel 文件视为工作簿。但是，文件格式还包含元数据（作者、创建日期等）和与工作簿数据分开的 vba 宏等数据。

因此，解析器与工作簿的逻辑划分可能是由于文件中数据的物理划分而发生的。

或者可能是允许报告文件解析错误，而不仅仅是返回未定义的工作簿对象。

无论哪种方式，其他人可能选择了不同的界面建模，但这是原作者选择的。它并不完全直观，但它确实有效。

(*) 此方法现已弃用，因为它不允许对文件进行错误检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:44:05.257

想一想它们只是不同的类型`Spreadsheet::ParseExcel`，`Spreadsheet::ParseExcel::Workbook`比如整数和字符串，它们都是标量，但是你不能，比如说，将它们相乘，尽管它们在某些情况下可以交互。例如`length()`应用于字符串为您提供整数长度的字符串。同样的方式，`Spreadsheet::ParseExcel::parse()`给你`Spreadsheet::ParseExcel::Workbook`。它们由公共命名空间绑定，但它们完全不同，`Spreadsheet::ParseExcel`既是解析器，又`Spreadsheet::ParseExcel::Workbook`是工作簿。

# php - 如何使图像的背景透明度为0？

> ID：12474064
> 
> 赞同：0
> 
> 时间：2012-09-18T09:24:35.040
> 
> 标签：php, css, image, html

在 PHP 代码中的 HTML 表格中显示了图像：

![在此处输入图像描述](../Images/a27cd71f3ed6fe46d8dbdd3d2556f75b.png)

该表的代码是：

```
for ($i = 0; $i < $data['list']['cnt']; $i++) {             
    $tabRows[$i][1]['width']    = "45%";
    $tabRows[$i][1]['align']    = "center";
    $tabRows[$i][1]['value']    = '<img src="'.HTTP_FIGURES.$data['list'][$i]['fig_image'].'" />';
} 
```

如您所见，可以看到图像的背景，它们使页面变脏。所以我想删除每个图像的背景。怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:35:43.200

使图像成为透明的PNG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:36:16.087

您唯一实用的解决方案是使用图像编辑器浏览每张图像，删除背景并重新保存为`.png`具有透明度的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:37:23.730

使用任何图像编辑器，如 GIMP（免费）、Paint.net（免费）、Photoshop 或任何其他图像编辑器，并在需要的地方添加透明度。[这](http://forums.getpaint.net/index.php?/topic/19110-white-background-removal-preserve-transparency-2-steps/)是paint.net的教程。如果您的图像不是 PNG - 您将需要制作 PNG 图像，因为 JPEG 没有透明度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:38:05.600

您有 2 个选项：

1.  使用诸如paint.net 之类的图像编辑器编辑图像并使背景透明。
2.  使用 PHP GD 函数来“编辑”图像。这可能很麻烦，因为您必须确定要用背景颜色替换什么颜色。通常，使用固定颜色，或像素[1,1] 中的颜色。

我的建议，如果没有太多图像，请选择 1。

# integer - 如何将四个字节的 Java 整数发送到另一个应用程序？

> ID：12474070
> 
> 赞同：0
> 
> 时间：2012-09-18T09:24:48.460
> 
> 标签：integer, bytearray, signedness

```
public void routeMessage(byte[] data, int mode) {
    logger.debug(mode);
    logger.debug(Integer.toBinaryString(mode));
    byte[] message = new byte[8];
    ByteBuffer byteBuffer = ByteBuffer.allocate(4);
    ByteArrayOutputStream baoStream = new ByteArrayOutputStream();
    DataOutputStream doStream = new DataOutputStream(baoStream);
    try {
        doStream.writeInt(mode);
    } catch (IOException e) {
        logger.debug("Error converting mode from integer to bytes.", e);
        return;
    }
    byte [] bytes = baoStream.toByteArray();
    bytes[0] = (byte)((mode >>> 24) & 0x000000ff);
    bytes[1] = (byte)((mode >>> 16) & 0x000000ff);
    bytes[2] = (byte)((mode >>> 8) & 0x00000ff);
    bytes[3] = (byte)(mode & 0x000000ff);
    //bytes = byteBuffer.array();
    for (byte b : bytes) {
        logger.debug(b);
    }
    for (int i = 0; i < 4; i++) {
        //byte tmp = (byte)(mode >> (32 - ((i + 1) * 8)));
        message[i] = bytes[i];
        logger.debug("mode, " + i + ": " + Integer.toBinaryString(message[i]));
        message[i + 4] = data[i];
    }
    broker.routeMessage(message);
} 
```

我尝试了不同的方法（从注释代码中可以看出）将模式转换为四个字节，以通过套接字将其发送到另一个应用程序。它适用于高达 127 的整数，然后再适用于超过 256 的整数。我相信它与被签名的 Java 类型有关，但似乎并没有让它工作。以下是程序打印的一些示例。

```
127
1111111
0
0
0
127
mode, 0: 0
mode, 1: 0
mode, 2: 0
mode, 3: 1111111

128
10000000
0
0
0
-128
mode, 0: 0
mode, 1: 0
mode, 2: 0
mode, 3: 11111111111111111111111110000000

    211
    11010011
    0
    0
    0
    -45
    mode, 0: 0
    mode, 1: 0
    mode, 2: 0
    mode, 3: 11111111111111111111111111010011

306
100110010
0
0
1
50
mode, 0: 0
mode, 1: 0
mode, 2: 1
mode, 3: 110010 
```

一个字节怎么可能突然存储 32 位？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:29:19.290

尝试这个：

```
int Header = 123456
ByteBuffer bytes = ByteBuffer.allocate(4);
bytes.putInt(Header);
byte[] buffer = bytes.array(); 
```

字节数组缓冲区包含 4 个字节的整数值。
改成：

```
message[i] = bytes[i] & 0xFF; 
```

# ruby-on-rails-3 - 即使乘客正在运行，Rails 页面也不会显示

> ID：12474072
> 
> 赞同：2
> 
> 时间：2012-09-18T09:25:02.517
> 
> 标签：ruby-on-rails-3, nginx, capistrano, passenger, web-deployment

我正在尝试部署我的第一个适当的 Rails 项目。我有一个安装了 Nginx、Passenger 和 PostgreSQL 的 Ubuntu 12.04 虚拟服务器。我已使用 Capistrano 将代码部署到服务器。

一切都应该正常工作，但由于某种原因，当尝试通过浏览器访问页面时，它只是尝试连接大约 10 秒然后超时。但是，所有静态页面，例如 address/500.html 和 address/robots.txt 都可以正确加载。

我在 /opt/nginx/logs 检查了 Nginx 错误日志，但它们是空的。另一方面，Nginx 访问日志只记录了我的一些尝试。Nginx 访问日志：

```
130.233.194.3 - - [18/Sep/2012:11:13:04 +0300] "GET /somestuff HTTP/1.1" 301 5 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1"
130.233.194.3 - - [18/Sep/2012:11:37:59 +0300] "GET /500.html HTTP/1.1" 200 643
"-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1"
130.233.194.3 - - [18/Sep/2012:11:45:59 +0300] "-" 400 0 "-" "-"
130.233.194.3 - - [18/Sep/2012:11:57:32 +0300] "GET /500.html HTTP/1.1" 200 643
"-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1"
130.233.194.3 - - [18/Sep/2012:11:57:47 +0300] "GET /favicon.ico HTTP/1.1" 200 0 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1"
130.233.194.3 - - [18/Sep/2012:11:58:19 +0300] "GET /robots.txt HTTP/1.1" 200 204 "-" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1" 
```

（例如，在 /somestuff 之后，我尝试了 /nopage，但它没有被记录）

我的 Rails 应用程序生产日志仅显示数据库迁移。我也可以在生产模式下打开 Rails 控制台并将内容写入数据库，所以我认为这不是问题。

如果我在rails控制台中写“app.get（”/“）”或任何其他页面，它只会返回301（不知道这是否相关，在我的开发环境中它返回200）

以下是一些可能相关的其他文件：

nginx.conf：

```
#user  [User used in deploying];
   server {
        listen 80;
        server_name [Name_of_the_server];
        root /home/[User used in deploying]/srv/nsbg/current/public;
        passenger_enabled on;
} 
```

（这是我添加的，否则默认）

Capistrano 部署文件：

```
require 'bundler/capistrano'
set :user, '[User used in deploying]'
set :domain, '[server name]'
set :applicationdir, "/home/[User used in deploying]/srv/nsbg"

set :scm, 'git'
set :repository,  "[Github repo]"
set :git_enable_submodules, 1 # if you have vendored rails
set :branch, 'master'
set :git_shallow_clone, 1
set :scm_verbose, true

# roles (servers)
role :web, domain
role :app, domain
role :db,  domain, :primary => true

# deploy config
set :deploy_to, applicationdir
set :deploy_via, :export

# additional settings
default_run_options[:pty] = true  # Forgo errors when deploying from windows
#ssh_options[:keys] = %w(/home/user/.ssh/id_rsa)            # If you are using ssh_keysset :chmod755, "app config db lib public vendor script script/* public/disp*"set :use_sudo, false

# Passenger
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

使用命令“sudo 乘客状态”：

```
----------- General information -----------
max      = 6
count    = 1
active   = 0
inactive = 1
Waiting on global queue: 0

----------- Application groups -----------
/home/[User used in deploying]/srv/nsbg/current:
  App root: /home/[User used in deploying]/srv/nsbg/current
  * PID: 8038    Sessions: 0    Processed: 1       Uptime: 1h 4m 29s 
```

就像我说的那样，静态页面得到服务，但任何其他页面（包括无效路由）都会挂断，并且不会在任何地方写入错误。请帮助我，我在部署方面非常缺乏经验并且完全迷失了

# git - Git 在忽略的目录中看到更改的文件，但不报告

> ID：12474074
> 
> 赞同：0
> 
> 时间：2012-09-18T09:25:07.947
> 
> 标签：git, gitignore

Git 不允许我在干净的工作目录中切换分支。相反，它告诉我忽略文件夹中的文件将被覆盖。

```
$ git status
# On branch ECP-2229
nothing to commit (working directory clean)

$ git checkout ECP-2243
error: The following untracked working tree files would be overwritten by checkout:
        c.t.e.server.logback/bin/logback.xml
Please move or remove them before you can switch branches.
Aborting 
```

这个工作目录和其他 bin/ 文件夹中有数百个文件，所有文件都被忽略了。

```
$ cat .gitignore
bin 
```

我认为该文件已经以某种方式被跟踪并试图将其删除，但是

```
$ git rm c.t.e.server.logback/bin/logback.xml
fatal: pathspec 'c.t.e.server.logback/bin/logback.xml' did not match any files 
```

这个文件有什么问题，我怎样才能说服 git 这无关紧要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:32:17.760

出于某种原因，有人跟踪`logback.xml`了 ，而您拥有此文件的未跟踪版本。所以 git 会警告你，你的未跟踪版本将被 checkout 覆盖，这很好，即使它在`.gitignore`（谁知道它不包含值？）。

你失败了`git rm`，因为你的没有被跟踪，所以 git 不知道，`git rm`只适用于跟踪或暂存的文件。

相反，只要`rm`它，你会没事的。

# xml - XSLT - 复制所有其他节点，添加 1 个新节点

> ID：12474077
> 
> 赞同：5
> 
> 时间：2012-09-18T09:25:24.873
> 
> 标签：xml, xslt

我创建了一个 XSLT，我想知道如何在一组标签之间复制所有节点，并在底部添加另一个标签。我已经创建了 XSLT，它具有确定要添加哪个标签以及应该调用什么标签的所有逻辑。但是我现在遇到的问题是我也无法复制所有其他标签。以下是有问题的文件：

**XSLT**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/csvImportSchema">
        <csvImportSchema>
            <xsl:for-each select="payload">
                <payload>
                    <xsl:copy-of select="@*"/>
                    <xsl:variable name="ean">
                        <xsl:value-of select="ean"/>
                    </xsl:variable>
                    <xsl:for-each select="../product">
                        <xsl:if test="ean = $ean">
                            <productId><xsl:value-of select="article"/></productId>
                        </xsl:if>
                    </xsl:for-each>
                </payload>
            </xsl:for-each>
        </csvImportSchema>
    </xsl:template>

</xsl:stylesheet> 
```

**输入**

```
<?xml version="1.0" encoding="UTF-8"?>
<csvImportSchema>
    <payload>
        <test>1</test>
        <test2>2</test2>
        <test3>3</test3>
        <ean>1111111111</ean>
        <productId/>
    </payload>
    <product>
        <article>722619</article>
        <ean>1111111111</ean>
    </product>
</csvImportSchema> 
```

**电流输出**

```
<?xml version="1.0" encoding="utf-8"?>
<csvImportSchema>
    <payload>
        <productId>722619</productId>
    </payload>
</csvImportSchema> 
```

**期望的输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<csvImportSchema>
    <payload>
        <test>1</test>
        <test2>2</test2>
        <test3>3</test3>
        <ean>1111111111</ean>
        <productId>722619</productId>
    </payload>
</csvImportSchema> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T12:36:50.373

**这个简短而简单的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="productId">
  <productId>
    <xsl:value-of select="../../product/article"/>
  </productId>
 </xsl:template>
 <xsl:template match="product"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<csvImportSchema>
    <payload>
        <test>1</test>
        <test2>2</test2>
        <test3>3</test3>
        <ean>1111111111</ean>
        <productId/>
    </payload>
    <product>
        <article>722619</article>
        <ean>1111111111</ean>
    </product>
</csvImportSchema> 
```

**产生想要的正确结果**：

```
<csvImportSchema>
   <payload>
      <test>1</test>
      <test2>2</test2>
      <test3>3</test3>
      <ean>1111111111</ean>
      <productId>722619</productId>
   </payload>
</csvImportSchema> 
```

**说明**：

1.  **[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**“按原样”复制选择执行它的每个节点。

2.  一个匹配的覆盖模板`product`从输出中“删除”这个元素（通过它的空体）。

3.  另一个覆盖模板匹配`productId`并生成此元素，其文本节点子节点取自`product/article`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T20:52:56.180

对您的代码的一项观察。不要使用这个：

```
<xsl:variable name="ean">
    <xsl:value-of select="../ean"/>
</xsl:variable> 
```

当你可以写这个：

```
<xsl:variable name="ean" select="../ean"/> 
```

它不仅冗长，而且效率极低：不是将 $ean 绑定到现有节点，而是提取现有节点的字符串值，使用该字符串值形成一个文本节点，创建一个新的 XML 文档树，然后添加此文本节点指向此新文档的内容。（我曾经通过消除这个可怕的结构让样式表运行速度提高 3 倍。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:31:12.050

它应该像将有效负载更改为一样`xsl:copy-of select="@*"/`简单

```
<xsl:copy-of select="*[local-name() != 'productId'] | @*"/> 
```

即复制所有内容，除了`productId`，因为您手动构建它。

这给出了您需要的输出

```
<?xml version="1.0" encoding="utf-8"?>
<csvImportSchema>
  <payload>
    <test>1</test>
    <test2>2</test2>
    <test3>3</test3>
    <ean>1111111111</ean>
    <productId>722619</productId>
  </payload>
</csvImportSchema> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T09:33:23.623

这个 XSLT 应该可以完成这项工作并使用更多的 COPY 标记和模板。也许不要在一个 xsl:template 中做所有事情（我的观点）。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/csvImportSchema">
        <xsl:copy>
            <xsl:apply-templates select="*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="csvImportSchema/payload/productId">
        <xsl:variable name="ean">
            <xsl:value-of select="../ean"/>
        </xsl:variable>
        <xsl:for-each select="../../product">
            <xsl:if test="ean = $ean">
                <productId><xsl:value-of select="article"/></productId>
            </xsl:if>
        </xsl:for-each>
    </xsl:template>

    <xsl:template match="csvImportSchema/product">
        <!-- do not copy -->
    </xsl:template>

    <xsl:template match="csvImportSchema/payload">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>   
</xsl:stylesheet> 
```

# liferay - Liferay - 按页面更改区域设置

> ID：12474078
> 
> 赞同：1
> 
> 时间：2012-09-18T09:25:28.783
> 
> 标签：liferay, velocity

我在更改门户中的语言时遇到问题。我使用liferay 6.0.5，在我的门户中默认语言是法语，并且有一些页面翻译成英语。我将portal_normal.vm中的页面设置如下：

```
# set ($ pages_EN = ["/ services", "/ equipment"])
# if ($ language_id == 'en_GB')
#   foreach ($ mypage pages_EN in $)
#     if ($ == $ mypage layout.getFriendlyURL ())
#       set ($ = $ rtlCssURL themeDisplay.getTheme (). getContextPath () + $themeDisplay.getTheme (). getCssPath () + "/ custom_en.css")
#       css ($ rtlCssURL)
#     end
#   end
# end 
```

我在我的 portal_normal.vm 上加入了 portlet 语言来更改它运行良好的语言。

**我想要做什么：**当我在一个 EN 页面中并且我点击一个没有翻译成 EN 的页面时，我想更改语言（en -> fr）然后重定向到点击的链接。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:35:34.790

由于 Liferay 中没有“翻译页面”之类的东西，因此实际上很难以一种有意义的方式回答：您可能已将页面上的“每篇文章”翻译成不同的语言，但行为会是什么？当您翻译了 3 篇文章中的 2 篇？

我可以想象的功能将在 Liferay 中开箱即用：给定 URL [http://example.com/home](http://example.com/home)、[http://example.com/fr/home](http://example.com/fr/home)和[http://example.com /en/home](http://example.com/en/home)，最后一个（带有语言代码）将显示请求的语言（如果可用）。第一个 URL 将显示可用且最符合用户要求的语言：通过声明有首选语言（通过登录并在其个人资料中设置默认语言）或通过浏览器内容协商（您可以在浏览器中配置您的首选语言。这将转发到网络服务器）

我怀疑您在这里谈论的另一种选择是您在谈论翻译的页面标题，但它们也将包含在我上面提到的行为中。

如果您的情况与此不同，请重新表述问题。据我可以想象你的要求，我想不出任何重定向的要求。语言将根据可用性和偏好自动选择。

# java - 这个正则表达式应该可以工作，不是吗？

> ID：12474081
> 
> 赞同：2
> 
> 时间：2012-09-18T09:26:02.137
> 
> 标签：java, regex

我有一个简单的正则表达式来检查函数名称是否位于 C 代码块中（实际的名称查找代码是用 Java 编写的）。对于此示例，我要查找的函数名称称为 putFillerData。代码块如下所示：

```
static void fillerSwapByteOrder(int t_database, tag_t t_message, char* data_buff, int* pos)
{
short data_length = trxDBGetNodeSize(t_database);

if (!data_length) return;

char *data = umalloc(data_length);

if (data_length == sizeof(short))
{
    short s_data = 0;
    shareGReadData(t_database, &s_data);
    short nbo_data = htons(s_data);
    memcpy(data, &nbo_data, sizeof(short));
}
else if (data_length == sizeof(int))
{
    int s_data = 0;
    shareGReadData(t_database, &s_data);
    int nbo_data = htonl(s_data);
    memcpy(data, &nbo_data, sizeof(int));
}
else
{
    ufree(data);
    return;
}

putFillerData(t_message, data, data_length, data_buff, pos);

ufree(data);
} 
```

我正在使用的正则表达式语句如下所示：

```
Pattern.matches("\\b" + Pattern.quote(name) + "\\b", code); 
```

但是，这总是返回 false ......为什么？

我使用这个正则表达式的原因是因为 .contains 也能找到子字符串，这不是我想要的......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T09:28:51.567

`.matches()`*仅当整个*字符串与正则表达式匹配时才返回 True 。

您想使用以下`.find()`方法：

```
Pattern regex = Pattern.compile("\\b" + Pattern.quote(name) + "\\b");
Matcher regexMatcher = regex.matcher(subjectString);
foundMatch = regexMatcher.find(); 
```

[此外，`\b`仅匹配字母数字字符和非字母数字字符。因此，如果您的`name`is应该`putFillerData`没问题，但如果它类似于`putFillerData()`.]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:35:25.557

使用`find()`，这将是合适的。

```
Pattern pat = Pattern.compile("\\b" + Pattern.quote(name) + "\\b");
Matcher matcher = pat.matcher("Target_Source");

String s = new String();

while(matcher.find()){

   foundMatch = matcher.group(0);

} 
```

# c# - 异步窗口进程可以使用会话变量吗？

> ID：12474083
> 
> 赞同：0
> 
> 时间：2012-09-18T09:26:03.007
> 
> 标签：c#, asp.net, ajax, asynchronous

我正在通过窗口线程异步处理一段代码（处理一个excel文件）。

在处理代码之前，我正在设置一个会话变量并将响应发送回客户端。当回调方法被调用时，它可以改变会话值吗？我可以通过 AJAX 调用访问 Session 值吗？会话发生了什么，窗口线程可以访问它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:28:35.230

> 我可以通过 AJAX 调用访问 Session 值吗？

不，当然不是。会话仅存在于服务器上。没有客户端javascript可以访问它。如果您正在谈论从服务器访问后台线程中的会话，这可能仍然是一个问题，因为不再有与当前线程关联的当前 HTTP 请求。在这种情况下，最好的解决方案是将您需要的值作为参数传递给线程（`state`对象），而不是使用 ASP.NET 会话。

# java - 存储库连接 - 回滚不能使用 SPARQL 查询工作？

> ID：12474084
> 
> 赞同：0
> 
> 时间：2012-09-18T09:26:04.850
> 
> 标签：java, sparql, sesame

我想使用 SPARQL 查询从芝麻存储库中删除和插入三元组，并且我想将这两个操作作为单个事务执行。

1.  删除
2.  插入

如果在事务过程中抛出异常，则执行回滚......但它似乎不起作用。问题是，如果在插入查询过程中抛出异常，会执行回滚，但不会恢复之前删除的三元组（为什么？）。

这里有一些代码：

我有一个名为 OwlimConnector 的类，它包装存储库连接并提供一些方法来进行 SPARQL 查询。在此类的构造函数中，我设置了连接并将自动提交设置为 false：

```
RemoteRepositoryManager repos_manager = RemoteRepositoryManager.getInstance(SERVER_URL, USER, PASSWORD);
repos_manager.initialize();
Repository ssr = repos_manager.getRepository(REPOSITORY);
rconn = ssr.getConnection();
rconn.setAutoCommit(false); 
```

在 OwlimConnector 中有一个名为 executeUpdate 的方法：

```
public void executeUpdate(String queryString) throws RepositoryException,                MalformedQueryException, UpdateExecutionException
{
  Update up = rconn.prepareUpdate(QueryLanguage.SPARQL, queryPrefixString + queryString);
  up.execute();
} 
```

以及这些方法：

```
public void commit(){
rconn.commit();
}

public void rollback() {        
rconn.rollback();
}

public void close(){
rconn.close();
} 
```

另一方面，我有一个 Web 服务“updateUserGroup”，它使用以前的 OwlimConnector 和一个名为 UserGroupDAO 的数据访问对象：

```
@PUT
@Consumes(MediaType.APPLICATION_XML)
public Response updateUserGroup(UserGroup ug) {

try {
    oc = new OwlimConnector();
} catch (OwlimInstantiationException e) {
    return ResponseFactory.getError(e.getErrorMessage());
}

try {
    UserGroupDAO ugdao = new UserGroupDAO(oc);
    ugdao.delete(ug.getUri());
    ugdao.add(ug);
    oc.commit();
    oc.close();
    return ResponseFactory.getOK();
} catch (MandatoryFieldException e) {
    oc.rollback();
    oc.close();
    return ResponseFactory.getError(e.getErrorMessage());
} catch (NotExistingResourceException e) {
    oc.rollback();
    oc.close();
    return ResponseFactory.getError(e.getErrorMessage());
} catch (Exception e) {
    oc.rollback();
    oc.close();
    return ResponseFactory.getError(new GenericException(e).getErrorMessage());
}

} 
```

1 ugdao.delete(ug.getUri())做的是调用OwlimConnector方法executeUpdate：

```
oc.executeUpdate("DELETE { " + usergroup + " ?p ?v . } WHERE { " + usergroup + " ?p ?v . }"); 
```

即使没有提交，这里的三元组也会被删除！

2 ugdao.add(ug) 的作用是：

检查 ug.getName() 不为 null 或空格，否则抛出 MandatoryFieldException：

```
if (ug.getName() == null || ug.getName().equals("")){
throw new MandatoryFieldException("name");
} 
```

然后，插入数据：

```
oc.executeUpdate("INSERT DATA { " + ug.getUri() + " a scmu:UserGroup ; scmu:hasName \"" + ug.getName() + "\" . }"); 
```

当 ug.getName() 为 null 或空格时，MandatoryFieldException 异常被抛出并被 updateUserGroup 捕获。然后执行回滚，但删除的三元组不会恢复。

我不知道为什么会这样。任何想法？

非常感谢您提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:13:44.407

解决方案比我想象的要容易得多。这是我从邮件列表中的 Ontotext AD 收到的答案：

“您正在使用 RemoteRepository，因此每次更新都会立即发送到远程存储库 up.execute() 并立即自动提交。

您可以做的不是准备和执行服务中的每个删除/添加操作以开始收集所有单独的更新（例如到 StringBuilder 中）并在 oc.commit() 上准备和执行整个更新列表（并且只需在回滚时清除列表，以防引发异常）

您的更新请求可以有多个“插入数据”或“删除数据”更新……”

它有效！谢谢你。

# java - 如何在 Java Web 应用程序中同时使用 http 服务器和应用程序服务器

> ID：12474089
> 
> 赞同：6
> 
> 时间：2012-09-18T09:26:36.893
> 
> 标签：java, jakarta-ee, deployment, web

我有一些关于 Java EE Web 应用程序的部署模型问题。目前我们在Tomcat 6中将我们的Web应用程序部署为WAR文件。所有内容都与WAR文件打包在一起，包括静态内容，如图像、静态html页面等。但我想将这些静态内容部署在 HTTP 服务器中，并仅使用应用程序服务器来检索动态内容。我如何拆分这些东西？有没有人做过这种事情并且对我的场景有一个很好的部署模型。帮助将不胜感激。

将 2 个 WAR 文件制作成一个只有静态内容的文件并将该 WAR 部署在 HTTP 服务器中，其余作为不同的 WAR 文件并将其部署在应用程序服务器中，这是一个好主意吗？但是这种方法会对当前引用静态内容的所有页面产生影响，并且需要更改代码，这非常麻烦，因为我们的项目非常庞大，并且基于代码的量非常大。

欢迎任何策略和想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:00:24.723

出于性能原因，这可能是一件有趣的事情。

您应该有单独的部署脚本/部署文件来执行此操作。为一个项目部署多个文件/WAR/文件夹/脚本不是问题。当您必须部署 WAR 和更新数据库时，我们也有同样的情况。

我将有一个 WAR 文件和一个包含要部署的静态内容的文件夹。

* * *

**编辑**

在 HTTP 服务器中部署静态内容取决于服务器。如果你想在 Linux 服务器上使用[Apache](http://httpd.apache.org/)，你必须设置一个[虚拟主机](http://httpd.apache.org/docs/2.4/en/vhosts/name-based.html)。

```
<VirtualHost *:80>
  # This first-listed virtual host is also the default for *:80
  ServerName www.example.com
  DocumentRoot /www/domain
</VirtualHost> 
```

在此示例中，您有一个虚拟主机，它侦听`80`端口、任何 IP 地址和服务器名称`www.example.com`。然后将其重定向到`/www/domain`路径。

您将在文档中找到更多示例和配置选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:43:23.203

在版本 4 之前，Tomcat 在提供静态内容方面一直很慢。这就是为什么经常建议将动态内容与静态内容分开并使用常规 Web 服务器为后者提供服务的原因（您提到的书是 2002 年发行的……）。最近的 Tomcat 版本没有遇到这个问题，因此恕我直言，您可以避免拆分，这对于组织和安全来说都是一场噩梦。

对于静态资源，您可能更愿意专注于配置适当的缓存，因此它们不会被不必要地频繁传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:47:39.870

您不能将`WAR`文件部署到`HTTP`服务器中。A`WAR`用于`Java`Web 应用程序，它必须部署到应用程序服务器或 servlet 容器中（如`Tomcat`）。我认为在单独的 Web 应用程序中分离静态内容不是一个好主意。如果这是一个项目，它应该是一个 Web 应用程序，此外：

> WAR 文件具有特殊的文件夹结构，除了 JSP 页面、Java servlet、Java 类、HTML 页面等之外还包含特殊文件，它们组合形成了 Web 应用程序。

您可以将静态内容保存在一个应用程序中，这确实没有什么不好的。

如果您的项目非常庞大并且有很多文件，那没问题，您只需要使用这样的项目结构，它应该易于理解和阅读，并且应用程序服务器或 servlet 容器将负责部署尽可能多的内容。

# javascript - 防止js缩小或编译javascript时可能导致错误的神秘符号

> ID：12474090
> 
> 赞同：1
> 
> 时间：2012-09-18T09:26:38.890
> 
> 标签：javascript, node.js, minify, uglifyjs

很遗憾，当我注意到一些奇怪的符号时，我只是在玩美妙的[UglifyJS](https://github.com/mishoo/UglifyJS)，这给了我缩小错误。这对我来说看起来很奇怪，因为我无法选择或复制它，而且它不是任何特殊字符。至少我知道（LF、CR、制表符或空格）。

在记事本++中，它看起来像这样：

![在此处输入图像描述](../Images/fbda6b64065496bacce280602d605e1c.png)

如果我将光标放在第 95 行的开头并按退格键图片变成这样： ![在此处输入图像描述](../Images/c5f5bd164a5b4d012901f26f7fe5211c.png)

不过我可以删除。但我很好奇。另一方面，我宁愿通过正则表达式删除它，以确保这些不会破坏我的 js 文件。那么这是什么，我怎样才能找到它并用正则表达式或其他东西删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:33:02.327

你在使用 Unicode [BOM](http://en.wikipedia.org/wiki/Byte_order_mark)吗？

Uglifier 可能不会期待 BOM 格式的文件，它会将 BOM 视为字符。

# django - 查询有关 Django 中的验证

> ID：12474093
> 
> 赞同：0
> 
> 时间：2012-09-18T09:26:47.040
> 
> 标签：django, django-validation

我有两个问题。

1）可以在没有验证的情况下将数据提交到数据库中。如果是，那么如何？？？？？？

2）我们可以在 django 中使用 javascript 进行验证吗？如果可以，那么我们如何将数据发布到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:32:38.783

1) 使用所有字段为 balnk=True 和 null=True 的模型，并创建一个没有任何验证方法的简单表单。

2）是的，您可以使用 javascript/jquery 来验证您的表单，它与 django 无关。您可以通过两种方法提交表单，

a) 普通形式的帖子

b）阿贾克斯的帖子，

```
$.post("url",$(formid).serialize()); 
```

# optimization - 对象集合优化

> ID：12474096
> 
> 赞同：0
> 
> 时间：2012-09-18T09:26:51.460
> 
> 标签：optimization, linq-to-objects

我正在为一些事情苦苦挣扎，我确信我应该能够用 Linq-to-Obj 快速完成

有27朵花，需要一个`Flower[]`包含5个项目的集合拆分，大约6条记录；

`List<Flowers[]>`应包含 6 个`Flowers[]`实体，每个`Flowers[]`数组项应包含 5 个花对象。

我目前有类似的东西：

```
List<Flowers[]> flowers;
int counter = 0;
List<Flowers>.ForEach(delegate (Flower item) {
    if (counter <= 5){
        // add flowers to array, add array to list
    }
}); 
```

我正在尝试优化它，因为它很笨重。

**[更新]**

我可能可以对对象进行数组推送，删除我已经运行过的项目，但是没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:10:46.377

```
var ITEMS_IN_GROUP = 5;
var result = list.Select((Item, Index) => new { Item, Index })
                 .GroupBy(x => x.Index / ITEMS_IN_GROUP)
                 .Select(g => g.Select(x=>x.Item).ToArray())
                 .ToList(); 
```

您可能还想尝试[morelinq](http://code.google.com/p/morelinq/)的`Batch`

# qtp - 将 QTP 对象存储库 (*.tsr) 文件转换为其他格式

> ID：12474097
> 
> 赞同：1
> 
> 时间：2012-09-18T09:26:56.900
> 
> 标签：qtp

我有一个 .tsr 格式的 QTP 对象存储库，我想将其转换为其他格式，如 XML 或 YAML 或 .properties 或 excel 或任何其他我可以轻松从 java 读取的格式。

是否有任何 API 或工具可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:28:00.093

QTP 允许从对象存储库管理器中导出共享对象存储库。只需选择`File`-> `Export to XML`。

# javascript - 数组javascript中的函数

> ID：12474100
> 
> 赞同：0
> 
> 时间：2012-09-18T09:27:01.053
> 
> 标签：javascript, arrays, function

我想要完成的是调用`result.MappingWaypoints[i].lat();`and `result.MappingWaypoints[i].lng();`而不是`result.MappingWaypoints[i].lat;`and `result.MappingWaypoints[i].lng`。

这甚至可能吗？

```
var result = new Array();
    result = {
        'MappingWaypoints': MappingWaypoints,
        'Flightime': flight_time_sec,
        'PhotoArea': {  'SouthWest': MeterstoGPS(starting_photo_area),
                        'NorthEast': MeterstoGPS(end_photo_area)},
    };

 MappingWaypoints.push(
 {
    lat : current_point_gps.lat,
    lng : current_point_gps.lng,
    Radius : 10,
    Altitude : Attitude,
    ClimbRate : ClimbRate,
    DelayTime : DelayTime,
    WP_Event_Channel_Value : 100,
    Heading : 0,
    Speed : Speed,
    CAM_Nick : 0,
    Type : 1,
    Prefix : "P"
 } 
```

编辑：我尝试添加：

```
lat: function(){ return current_point_gps.lat},`

lng : function(){ return current_point_gps.lng}, 
```

但这不起作用=>数组的所有值都具有第一个坐标的纬度/经度值

edit2：感谢@DCoder 在下面的评论中给出这个答案：这为我解决了这个问题。

```
lat: (function(v) { return function() { return v; } })(current_point_gps.lat) 
```

我知道这似乎是一件奇怪的事情，但是我正在使用的算法确实需要将数据作为函数调用来访问，因为该算法还处理来自 google api 的数据，其中数据只能通过相同的函数调用 lat( ) 和 lng()。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:48:43.833

您最初的方法遇到了这个问题中描述的[问题](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)- 由于 JS 变量范围，所有函数都将指向（并返回）相同的变量。

您需要捕获要为每个属性返回的*值，而不是捕获**变量*。最简单的方法是自执行函数：

```
{
  lat: (function(v) { return function() { return v; } })(current_point_gps.lat),
  lng: (function(v) { return function() { return v; } })(current_point_gps.lng),
  ....
} 
```

* * *

如果您还需要编辑`lat`属性的方法，则可以向对象添加公共属性，如下所示：

```
{
  lat: function() { return this._lat; },
  _lat: current_point_gps.lat
} 
```

或者您可以使用类似于 jQuery 的“0 个参数表示获取，1 个参数表示设置”范例并使用以下代码：

```
{
  lat: (function(v) { return function() { 
    if(arguments.length) {
      v = arguments[0];
    } else { 
      return v; 
    };
  })(current_point_gps.lat)
}

obj.lat(); // returns the current value
obj.lat(55); // changes the current value to 55, returns nothing
obj.lat(); // returns 55 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:31:55.717

您需要将它们作为函数调用。

```
lat : function(){ return current_point_gps.lat },
lng : function(){ return current_point_gps.lng }, 
```

那应该有效（未经测试；））。

但是你为什么不想这样做呢？

编辑：

如果要传递函数，则不应调用该函数。

```
// Pass the Result of a function, the function is called
var foobar = result.MappingWaypoints[i].lng();

// Pass the function itself, the function wont be called
var foobar = result.MappingWaypoints[i].lng; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:32:12.547

```
lat : function() { return current_point_gps.lat },
lng : function() { return current_point_gps.lng }, 
```

我不明白为什么这是必要的

# spring - Spring3+ibatis调用存储过程不使用映射文件

> ID：12474101
> 
> 赞同：1
> 
> 时间：2012-09-18T09:27:03.470
> 
> 标签：spring, ibatis

我有一个使用 Spring3 和 ibatis 的应用程序。在我的应用程序中，我使用不同的弹簧注释进行选择、删除、更新等查询。现在我想使用 spring 注释调用存储过程。我没有在我的应用程序中使用 ibatis 映射文件。那么如何在我的程序中调用这个存储过程呢？我的程序也返回 temp_table 。

我也在尝试下面的代码，但它不起作用..

```
@Select(value = "{call wfm_task_display(${processId}, ${locationId})}")
@Options(statementType = StatementType.CALLABLE)
@Results(value = {
        @org.apache.ibatis.annotations.Result
        (property = "field1", column = "field1"),
        @org.apache.ibatis.annotations.Result
        (property = "field2", column = "field2")}) 
```

有什么建议吗？

# java - 如何在Android中找到匹配的关键点所属的“火车”图像的索引

> ID：12474102
> 
> 赞同：0
> 
> 时间：2012-09-18T09:27:11.260
> 
> 标签：java, android, image-processing, opencv, image-recognition

经过几个小时的研究，我仍然找不到匹配关键点所属的“火车”图像的索引。我的意思是

```
FeatureDetector surfDetector = FeatureDetector.create(FeatureDetector.FAST);

MatOfKeyPoint vector = new MatOfKeyPoint();

surfDetector.detect( mImg, vector );

DescriptorExtractor siftDescriptor =DescriptorExtractor.create(DescriptorExtractor.BRIEF);

Mat descriptors=new Mat();

siftDescriptor.compute(mImg, vector, descriptors);

DescriptorMatcher matcherBruteForce=DescriptorMatcher.create(DescriptorMatcher.BRUTEFORCE_SL2);

List<MatOfDMatch> matches = new ArrayList<MatOfDMatch>(); 

matcherBruteForce.match(descriptors, descriptors, matches, 2); 
```

我只是以相同的图像为例。在此之后，如何找到匹配的关键点所属的“火车”图像的索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:42:36.820

我认为你遗漏了一些东西：可能，你试图找到一个特定的对象，然后你试图在几个图像的集合中找到与你正在寻找的对象的关键点“最佳匹配”的图像为了。只需查看您提供的示例代码，您就可以提取未知图像的所有 SIFT/SURF 关键点，并在对象关键点和当前图像之间应用匹配器。您需要的是某种指标，可以告诉您图像之间的匹配程度。最简单的方法是计算匹配关键点的数量。然后，您只需要记住您的集合中的哪个图像导致了最大数量的匹配关键点。匹配关键点的数量可能不是最好的指标，

顺便说一句，您的代码非常混乱：您声明了一个名为 surfDetector 的特征检测器，但实例化了一个“FAST”检测器。您声明了一个名为 siftDescriptor 的特征提取器，但实例化了一个“BRIEF”提取器。我建议您在存在时保留相同的检测器和提取器，例如 SURF 检测器/提取器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:34:16.300

我想这就是您要查找的内容，只需根据您的情况调整变量名称即可：

```
//scene = query; object = train

Point point1 = keypoints_scene.get( matches.get(i).queryIdx ).pt;

Point point2  = keypoints_object.get( matches.get(i).trainIdx ).pt ; 
```

要找到最佳匹配，请执行以下操作，每个匹配都有一个名为距离的参数。距离最小的那个是最好的匹配。因此，您遍历所有匹配项的列表并找到距离最小的匹配项...

```
float min_dist = Float.MAX_VALUE;
int min_position = 0;
for( int i=0; i<matches.size(); i++) {
   if( matches.get(i).distance < min_dist ) {
      min_dist = matches.get(i).distance;
      min_position = i;
   }                    
}

Point best_point_scene   = keypoints_scene.get( matches.get(min_position).queryIdx ).pt;
Point best_point_object  = keypoints_object.get( matches.get(min_position).trainIdx ).pt ; 
```

# c# - 将字符串向左移动

> ID：12474105
> 
> 赞同：-3
> 
> 时间：2012-09-18T09:27:16.730
> 
> 标签：c#

我们有一个字符串：`0000029653`. 如何将数字移动某个值。
例如，移位 4 则结果必须是：`0296530000` 有运算符或函数吗？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:32:01.530

您可以将其转换为数字，然后执行以下操作：

```
Result = yournumber * Math.Pow(10, shiftleftby); 
```

然后将其转换回字符串并用 0 向左填充

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T11:59:03.810

如果您不想使用子字符串和索引，也可以使用 Linq ：

```
string inString = "0000029653";
var result = String.Concat(inString.Skip(4).Concat(inString.Take(4))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:38:21.607

```
 public string Shift(string numberStr, int shiftVal)
    {
        string result = string.Empty;

        int i = numberStr.Length;
        char[] ch = numberStr.ToCharArray();
        for (int j = shiftVal; result.Length < i; j++)
            result += ch[j % i];

        return result;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:31:36.137

您可以将您的数字作为整数转换为字符串并返回。

```
String number = "0000029653";
String shiftedNumber = number.Substring(4); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-15T18:32:46.810

下面的方法采用数字 n，它告诉您要移动/旋转字符串多少次。如果数字大于字符串的长度，我会按字符串的长度取 MOD。

```
public static void Rotate(ref string str, int n)
    {
        if (n < 1)
            throw new Exception("Negative number for rotation"); ;
        if (str.Length < 1) throw new Exception("0 length string");

        if (n > str.Length) // If number is greater than the length of the string then take MOD of the number
        {
            n = n % str.Length;
        }

        StringBuilder s1=new StringBuilder(str.Substring(n,(str.Length - n)));
        s1.Append(str.Substring(0,n));
        str=s1.ToString();

    }

///You can make a use of Skip and Take functions of the String operations
     public static void Rotate1(ref string str, int n)
    {
        if (n < 1)
            throw new Exception("Negative number for rotation"); ;
        if (str.Length < 1) throw new Exception("0 length string");

        if (n > str.Length)
        {
            n = n % str.Length;
        }

        str = String.Concat(str.Skip(n).Concat(str.Take(n)));

    } 
```

# iphone - 选择主 UITableView 单元格时打开 UITableview 或查看

> ID：12474109
> 
> 赞同：1
> 
> 时间：2012-09-18T09:27:22.660
> 
> 标签：iphone, objective-c, uitableview

我有一个`UITableView`在它的单元格中有主记录。当用户选择一个单元格时，一些详细**记录会显示在同一个表上**，并且该记录将设置在该特定单元格的下方。另一件事是主表的选定单元格下方的单元格将显示在详细视图下方。

简而言之，我想设计一个弹出窗口，它将在该特定单元格下方显示选定单元格的详细信息，并且主单元格的其余单元格（选定单元格下方的单元格）将被向下移动，以便可以在所选单元格之间容纳详细信息弹出窗口单元格及其下方的单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:32:39.380

你可以简单地使用这个 `-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`方法。`UIView`在这里，您可以在用户每次单击单元格时分配一个新的并在其中显示您的信息。如果您有任何疑问，请随时回复。:)

检查这些项目，也许他们会有所帮助......

[组合框](https://github.com/floriankrueger/iOS-Examples--UITableView-Combo-Box)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:45:03.630

```
//Take int selectedCellIndex in your .h file, initialize selectedIndex with -1
//Take BOOL isSelected in your .h file

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
  selectedCellIndex = indexPath.row;
  isSelected = YES; 
  [yourTable reloadData];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
{
      if(indexPath.row==selectedCellIndex)
      {
           return 100;
      }
      return 50; //Your default cell size
}

- (UITableViewCell *)tableView:(UITableView *)tV cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //after creating your cell

    if(isSelected && selectedIndex>-1)
    {
        //Show your custom View , something like [cell.contentView addSubView:customView];
        isSelected = NO; //Reset
        selectedIndex = -1;  //Reset
    }

} 
```

# java - 如何在java中按结构的元素对结构列表进行排序

> ID：12474113
> 
> 赞同：6
> 
> 时间：2012-09-18T09:27:35.677
> 
> 标签：java, sorting

我有一个结构列表，我想根据结构的特定元素对其进行排序：

```
private class myStruct {

    public Boolean GUI;
    public float CallTime;
    public String ReqID;
    public String ReqGUID;
    public String Stereotype;
    public String StereotypeGUID;

}

private List<myStruct> DataList = new ArrayList<myStruct>(); 
```

如何在不硬编码的情况下按元素“ReqID”对 DataList 进行排序？有没有可能使用`Arrays.sort()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:30:51.830

您应该使用`Comparator`.

```
 class YourComparator implements Comparator<myStruct>{

         public int compare(myStruct s1, myStruct s2){
              //here comes the comparison logic
         }
 } 
```

然后使用这种形式的`sort()`方法：

```
 Arrays.sort(T[] arrayToSort, Comparator<T> yourComparator); 
```

使用集合还是数组作为数据结构还不是很清楚。

如果您使用列表，请使用`Collections.sort()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:31:16.223

对于自定义排序，您可以实现该[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口。

使用此接口，您可以创建一个[`compareTo()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html#compareTo%28T%29)返回负数`0`或正数的方法。根据返回码`Collections.sort()`可以判断元素是否必须在另一个元素之前或之后。

如何使用它的一个很好的例子可以在这个答案中找到：[java class implements compatible](https://stackoverflow.com/a/3718515/1401510)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:35:11.727

您的类结构对我来说看起来很奇怪..您在私有类中有公共字段..理想情况下，您的字段应该标记为私有，并且您可以使用 getter 和 setter 来访问它们..

至于您的问题，您可以查看为此类工作定义的两个重要接口：- [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator。 html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)和[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html) ..

当您想要有多种方法来比较您的类实例时，您可以使用 Comparator。您可以创建一个实现 Comparator 接口的类，并将此类的实例传递给 Collections.sort() 方法以使用此 Comparator 进行排序。在这种情况下， compare() 方法用于完成比较工作。

或者，您可以通过使该类实现 Comparable 接口来仅关联一种比较类实例的方法。在这种情况下，您需要覆盖 compareTo() 方法。

这是使用比较器的示例代码： -

```
public class MyComparator implements Comparator<Box> {
    @Override
    public int compare(Box box0, Box box1) {
        int w0 = box0.getWeight();
        int w1 = box1.getWeight();

        return (w0 > w1? -1 : (w0 == w1) ? 0 : 1);
    }
}

public class Box {
    private int weight;

    public Box() {      
    }

    public Box(int weight) {
            this.weight = weight;
    }

    public int getWeight() {
        return weight;
    }

    public void setWeight(int weight) {
        this.weight = weight;
    }
} 
```

和你的主要

```
public class Main {

    public static void main(String args[]) {
        List<Box> boxList = new ArrayList<Box>();
        Collections.sort(boxList, new MyComparator());
    }
} 
```

希望能帮助到你..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T09:39:43.743

像这样使用 Comparator 接口

```
public static void main(String[] args) {
    List<myStruct> DataList = new ArrayList<myStruct>();
    //ADD Objects to DataList here

    Collections.sort(DataList, new Comparator() {

        public int compare(Object o1, Object o2) {
            myStruct p1 = (myStruct) o1;
            myStruct p2 = (myStruct) o2;
            int ret = -1;
            //business logic here
            if (Integer.parseInt(p1.ReqGUID) == Integer.parseInt(p2.ReqGUID)) {
                ret = 0;
            } else if (Integer.parseInt(p1.ReqGUID) > Integer.parseInt(p2.ReqGUID)) {
                ret = 1;
            } else if (Integer.parseInt(p1.ReqGUID) < Integer.parseInt(p2.ReqGUID)) {
                ret = -1;
            }//end business logic
            return ret;
        }
    });

} 
```

在 Collections.sort() 方法中，我正在实现 Comparator 接口并覆盖 compare() 方法。这实际上将根据您在 compare() 方法中实现的业务逻辑对您的列表进行排序；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T10:45:25.243

**最简单的解决方案**

只需在您的类中实现 java.lang.Comparable 接口，如下所示：

```
class MyStruct implements Comparable<MyStruct>{

  public Boolean GUI;
  public float CallTime;
  public String ReqID;
  public String ReqGUID;
  public String Stereotype;
  public String StereotypeGUID;

  @Override
  public int compareTo(MyStruct other) {
    return ReqID.compareTo(other.ReqID); 
    /* also you can use ReqID.compareToIgnoreCase(other.ReqID); */
  }

  @Override
  public String toString() {
    return "(" + ReqID + ")";
  } 
} 
```

也覆盖 toString() 方法仅用于打印。

另外，请记住，**String 的 compareTo()**方法使用**字典**顺序进行排序。如果您想要数字 ID，最好使用**int**或其他数字类型。以下是使用 Arrays.sort() 和 Collections.sort() 进行排序的完整代码 - 选择适合您的：)

```
public class MyStructSort {

  private final static String[] STRUCT_IDS = {"C", "D", "A", "Aa", "B", "Z", "Aaa" };

  private static List<MyStruct> createList() {

    List<MyStruct> structList  = new ArrayList<MyStruct>();
    for (String id: STRUCT_IDS) {
      MyStruct struct = new MyStruct();
      struct.ReqID = id;
      structList.add(struct);
    }
    return structList;
  }

  public static void main(String[] args) {

    List<MyStruct> dataList = createList();

    /* Sort using Lists (Collections) */
    Collections.sort(dataList);
    System.out.println("List sort:\t" + dataList);

    /* Sort using arrays */
    MyStruct[] dataArray = dataList.toArray(new MyStruct[dataList.size()]); 
    Arrays.sort(dataArray);
    // print sorted array
    System.out.print("Array sort:\t");
    for (MyStruct struct: dataArray) {
      System.out.print(struct+" ");                        
    }
  }
} 
```

这只是演示代码，因此需要一些空值检查以及 getter 和 setter 来使其完美。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T09:30:40.353

您可以定义自己的[Comparator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)并使用[Collections.sort()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)，将 Comparator 传入。这样，您可以定义不同的比较器以使用不同的字段进行搜索。

或者，您的结构可以实现[`Comparable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口并`Collections.sort()`可以使用它进行排序。这称为使用*自然排序顺序*，因为它对您的类是隐含的。

这是[关于排序和排序的 Java 教程](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T09:34:03.063

[`java.util.Collections.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)与`Comparator`实例一起使用。请参阅 JavaDocs。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-18T09:34:47.383

利用`Arrays.sort(T[] a, Comparator<? super T> c)`

或者`Collections.sort(List a, Comparator c)`

# python - 使用驱动 API 编辑 Google 文档

> ID：12474115
> 
> 赞同：7
> 
> 时间：2012-09-18T09:27:40.020
> 
> 标签：python, google-app-engine, google-drive-api, google-api-python-client

（为清楚起见，这篇文章涉及使用 Python的[Google App Engine](https://developers.google.com/appengine/)上的 Google [Documents List API](https://developers.google.com/google-apps/documents-list/)和[Google Drive API之间的区别）](https://developers.google.com/drive/)

使用 [现已弃用] 文档列表 API，我可以通过导出为 HTML、修改 HTML 然后重新上传来编辑 Google 文档，无论是作为新文档还是作为对原始文档的修改。这对于从模板生成 PDF 文档等事情很有用。我一直在尝试使用新的 Drive API (V2) 复制此功能，但似乎无法做到。

想出了这个...

```
http = # authenticated http client
drive_service = build('drive', 'v2', http=http)

# get the file ...
file = drive_service.files().get(fileId=FILE_ID).execute()

# download the html ...
url = file['exportLinks']['text/html']
response, content = http.request(url)

# edit html
html = content.replace('foo', 'bar')

# create new file with modified html ...
body = {'title':'Modified Doc', 
        'description':'Some description', 
        'mimeType':'text/html'}
media_body = MediaIoBaseUpload(StringIO.StringIO(html), 'text/html', resumable=False)
drive_service.files().insert(body=body, media_body=media_body) 
```

上述代码将 html 文件作为文件上传到 Google Drive，而不是将 HTML 呈现为 Google Document。很公平，这是有道理的。但是，如何将它呈现为 Google Doc，就像我可以使用 Documents List API 一样？

另一件事 - 如果我设置 resumable=True 它会在 App Engine 上引发以下错误 - '_StreamSlice' 没有 len()。无法弄清楚如何让 resumable=True 工作？

最后一件事 - 文档中的[示例代码](https://developers.google.com/drive/examples/python#updating_files)使用了 MediaInMemoryUpload 对象，但是[如果您查看源代码](http://code.google.com/p/google-api-python-client/source/browse/apiclient/http.py#441)，它现在已被弃用，转而支持 MediaIoBaseUpload。示例代码应该更新吗？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T10:16:32.280

我怀疑问题是转换的默认值已从 true 更改为 false。您必须在上传时明确设置 convert=true。请参阅[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# datomic - 在原子查询中使用数据库函数

> ID：12474116
> 
> 赞同：6
> 
> 时间：2012-09-18T09:27:44.147
> 
> 标签：datomic

我正在尝试通过 REST API 在 Datomic 中进行“外部连接”。从[https://github.com/Datomic/day-of-datomic/blob/master/tutorial/social_news.clj](https://github.com/Datomic/day-of-datomic/blob/master/tutorial/social_news.clj)我举了最后一个例子：

```
(defn maybe
  "Returns the set of attr for e, or nil if e does not possess
   any values for attr."
  [db e attr]
  (seq (map :a (d/datoms db :eavt e attr))))

;; find all users 
(q '[:find ?e ?upvote
     :where
     [?e :user/email]
     [(user/maybe $ ?e :user/upVotes) ?upvote]]
   (db conn)) 
```

我将maybe函数插入到我的数据库中，可以这样查询：

```
[:find ?n ?v :in $ :where [?e ?a ?v] [?a :db/ident :db/fn] [?e :db/ident ?n]] 
```

返回

```
:maybe  #db/fn{:code "(seq (map :a (d/datoms db :eavt e attr)))", :params [db e attr], :requires [], :imports [], :lang :clojure} 
```

但是，我无法弄清楚如何在查询中调用该函数。我有`:data/user`一些交易的属性，我想获得它存在的价值。这是我要运行的查询；我想`:maybe`成为上面定义的数据库函数。

```
[:find ?attr ?v ?when ?who :where
 [17592186045423 ?a ?v ?tx true]
 [?a :db/ident ?attr]
 [(:maybe $ ?tx :data/user) ?who]
 [?tx :db/txInstant ?when]] 
```

我很确定我错过了一些非常明显的东西，但我已经坚持了一天。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:56:09.160

根据Datomic的[查询文档，您可以在查询中使用任何纯函数。](https://docs.datomic.com/on-prem/database-functions.html)您不必先安装它们。您必须安装的功能是交易功能。

查询函数不需要安装，因为它们像所有其他函数一样在您的应用程序中运行。Datomic 与执行查询的数据库服务器完全不同。查询总是由对[等库](https://docs.datomic.com/on-prem/architecture.html#peers)在您的应用程序中执行。

您需要安装的唯一类型的函数是事务函数，因为它们在[Transactor](https://docs.datomic.com/on-prem/architecture.html#transactors)内部运行。Transactor 是一个处理 Datomic 中所有写入的单个特殊进程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T17:38:45.310

您需要使用 d/invoke。所以你的例子看起来像这样：

```
[:find ?attr ?v ?when ?who :where
 [17592186045423 ?a ?v ?tx true]
 [?a :db/ident ?attr]
 [(d/invoke $ :maybe ?tx :data/user) ?who]
 [?tx :db/txInstant ?when]] 
```

# php - 在特定字符之前和之后为文本字符串着色

> ID：12474117
> 
> 赞同：0
> 
> 时间：2012-09-18T09:27:45.280
> 
> 标签：php, javascript, jquery, text

由于输出方式的原因，我有一些数据只能以特定方式排序。

我有一个带有这样的文本字符串的表

```
MyTextString_MyTextString
MyTextString_MyTextString
MyTextString_MyTextString 
```

为了使其更具可读性，我希望将`_`红色之前的文本和`_`蓝色之后的文本着色。这可能用jquery或php吗？

我已经尝试过诸如`$('.myElement').find('_').css('color','red);`但不认为这是正确的方法。

是否可以只执行一次，例如如果有另一个文本字符串，它将保持第二种颜色，蓝色？即 Red_Blue_Blue_Blue（计数 = 1？）

标记示例。

```
<td class="myTextString1">
    MyTextString_MyTextString1
    <br/>
    MyTextString_MyTextString2
    <br/>
    MyTextString_MyTextString3
</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:43:57.237

我做了一个小提琴来展示（在我看来）一个很好的方法来做到这一点。 [这是小提琴](http://jsfiddle.net/gTZH2/3/)

有两个插件，一个扩展 String.prototype，另一个扩展 jQuery.fn。通过这种方式，您可以从字符串和元素中调用“.colorize()”。我在小提琴中包含了一些例子。

```
String.prototype.colorize = function () {
    var regex = new RegExp('[^_]+', 'gi'),
        color = $.extend(['blue', 'red'], arguments || []),
        index = 0;    

    return this.replace(regex, function(matched) {
        return '<span style="color: ' + color[index++] + ';">' + matched + '</span>';
    });
}

$.fn.colorize = function () {
    var args = arguments;

    return this.each(function () {
        this.innerHTML = this.innerHTML.colorize
            .apply(this.innerHTML, args);
    });
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:04:54.150

js：

```
var colorize = function(text) {
  var delimiter = "_",
      parts = text.split(delimiter),
      firstPart = $("<span>", { class: 'red', html: parts[0] }),
      secondPart = $("<span>", { class: 'blue', html: text.split(parts[0] + delimiter)[1] });

  return $("<div>").append(firstPart).append(delimiter).append(secondPart).html();
} 
```

编辑：您还可以使用一个辅助函数，它采用这样的 jQuery 元素：

```
var colorizeElements = function($elements) {
  // $elements has to be something like $("td.classname")
  $elements.each(function() {
    $(this).html(colorize($(this).html()));
  });
}; 
```

编辑：工作 jsFiddle：http: [//jsfiddle.net/tGV54/1/](http://jsfiddle.net/tGV54/1/)

编辑：基于 Kristoffers 代码：

```
String.prototype.colorize = function () {
    var regex = new RegExp('[^_]+', 'gi'),
        color = $.extend(['blue', 'red'], arguments || []),
        index = 0;

    return this.replace(regex, function(matched) {
        return '<span style="color: ' + color[index++] + ';">' + matched + '</span>';
    });
};

$.fn.customColorize = function () {
    var args = arguments,
        delimiter = "<br>";

    return this.each(function () {
        var splitetElements = $.map(this.innerHTML.split(delimiter), function(s) { return s.colorize(); });
        this.innerHTML = splitetElements.join(delimiter);
    });
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T09:35:14.327

PHP：

```
$stringParts = explode( '_', 'MyTextString_MyTextString' );
$stringParts[0] = sprintf( '<span style="color: #f00;">%s</span>', $stringParts[0] );
if( count( $stringParts ) > 1 )
{
    $stringParts[1] = sprintf( '<span style="color: #00f;">%s</span>', $stringParts[1] );
    /* …or whatever */
}
echo implode( '_', $stringParts ); 
```

# android - 当我想实例化调用服务的广播接收器时，GoogleApi 的 API 级别 8 平台 2.2 错误

> ID：12474118
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:27:48.687
> 
> 标签：android, service, google-api, broadcastreceiver, bootcompleted

当我的 android 应用程序在启动后调用我的接收器时，我收到以下错误。此问题仅发生在 Android **GoogleApi 的 API 8 级**平台 2.2 中（这在 api 8 级、10 级及更高版本中运行良好）。

```
09-18 05:26:10.421: E/AndroidRuntime(261): FATAL EXCEPTION: main
09-18 05:26:10.421: E/AndroidRuntime(261): java.lang.RuntimeException: Unable to  instantiate receiver com.adduci.BootReceiver: java.lang.ClassNotFoundException: com.adduci.BootReceiver in loader dalvik.system.PathClassLoader[/data/app/com.adduci-2.apk]
09-18 05:26:10.421: E/AndroidRuntime(261):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2789)
09-18 05:26:10.421: E/AndroidRuntime(261):  at android.app.ActivityThread.access$3200(ActivityThread.java:125)
09-18 05:26:10.421: E/AndroidRuntime(261):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
09-18 05:26:10.421: E/AndroidRuntime(261):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-18 05:26:10.421: E/AndroidRuntime(261):  at android.os.Looper.loop(Looper.java:123)
09-18 05:26:10.421: E/AndroidRuntime(261):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-18 05:26:10.421: E/AndroidRuntime(261):  at java.lang.reflect.Method.invokeNative(Native Method)
09-18 05:26:10.421: E/AndroidRuntime(261):  at java.lang.reflect.Method.invoke(Method.java:521)
09-18 05:26:10.421: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-18 05:26:10.421: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-18 05:26:10.421: E/AndroidRuntime(261):  at dalvik.system.NativeStart.main(Native Method)
09-18 05:26:10.421: E/AndroidRuntime(261): Caused by: java.lang.ClassNotFoundException: com.adduci.BootReceiver in loader dalvik.system.PathClassLoader[/data/app/com.adduci-2.apk]
09-18 05:26:10.421: E/AndroidRuntime(261):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
09-18 05:26:10.421: E/AndroidRuntime(261):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
09-18 05:26:10.421: E/AndroidRuntime(261):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
09-18 05:26:10.421: E/AndroidRuntime(261):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2780)
09-18 05:26:10.421: E/AndroidRuntime(261):  ... 10 more 
```

我澄清说代码工作正常，因为如果我在模拟器上运行它以运行 10 或 Api Api 16 可以完美运行。我重复的错误，只有当我在模拟器上运行它以运行 8 或 Google Api Api 的平台 2.2 API 级别 8 时才会得到它。谢谢！

我的**清单**文件是这样的：

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".ListPro3Activity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".MyReceiverAlarmItem"/>
    <activity android:name=".AlarmEventActivity">
    </activity>
    <activity android:name=".ShowAlarmMessageActivity">
    </activity>

   <receiver android:name="com.adduci.BootReceiver">
       <intent-filter>
           <action android:name="android.intent.action.BOOT_COMPLETED" />
           <category android:name="android.intent.category.HOME" />
           <!--category android:name="android.intent.category.LAUNCHER" /-->
       </intent-filter>
   </receiver>
   <service android:enabled="true" android:name="ConfigAlarmService">
   <intent-filter>
    <action android:name="com.adduci.ConfigAlarmService">
    </action>
    </intent-filter>
    </service>
</application>
</manifest> 
```

我的**广播**文件是这样的：

```
package com.adduci;

import com.adduci.Utils;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.HashMap;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class BootReceiver extends BroadcastReceiver  {

public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) {
        Log.v("lp","INICIO BROADCAST Y VOY A LLAMAR AL SERVICE");
        Intent i = new Intent();
        i.setAction("com.adduci.ConfigAlarmService");
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        ComponentName service = context.startService(i);

        //context.stopService(new Intent(context, service.getClass()));
    }
}
} 
```

我的**服务**文件是这样的：

```
package com.adduci;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.HashMap;
import java.text.ParseException;

import android.app.Service;
import android.content.ContentValues;
import android.content.Intent;
import android.database.sqlite.SQLiteOpenHelper;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;

public class ConfigAlarmService extends Service{
private MyAlarm alarm;
private ArrayList<HashMap<String,Object>> columns;
private ArrayList<Datos> datos;

@Override
public void onCreate(){
    Log.v("lp","SERVICE ONCREATE!!!");
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    Log.v("lp","StartAtBootService -- onStartCommand()");           
    ....
    ....
    String cols="[" +
                "{'content':'itemId'," +
                "'SQLiteType':'Int'}," +
                "{'content':'itemDescripcion'," +
                "'SQLiteType':'String'}," +
                "{'content':'recordatorio'," +
                "'SQLiteType':'Int'}," +
                "{'content':'recordatorioFecha'," +
                "'SQLiteType':'String'}" +
                "]";
    this.columns = Utils.jsonToArray(cols);

    Log.v("lp","OPENHELPER");       
    SQLiteOpenHelper sqLiteOpenHelper=new ListProSQLiteHelper(this, "DBListPro", null, 1);
    Log.v("lp","FIN OPENHELPER!!!");
    this.load("SELECT * FROM items WHERE recordatorio=1", sqLiteOpenHelper);
    this.stopSelf();
    return START_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

public void onDestroy(){
    super.onDestroy();
    Log.v("lp","CONFIGALARMSERVICE DESTROY!!");
}

private void load(String sqlCondition, SQLiteOpenHelper sqLiteOpenHelper){
    this.datos = new ArrayList<Datos>();
    Object[]sql={sqlCondition, sqLiteOpenHelper};
    DataFromSqlite dataSqlite=new DataFromSqlite(this, this.getColumns(), sql, DataFromSqlite.ASYNCHRO, DataFromSqlite.DIALOG_WHEEL_OFF){

        @Override
        void onPreExecuteEvent() {
            // TODO Auto-generated method stub
        }

        @Override
        void onDoInBackGroundEvent() {
            // TODO Auto-generated method stub
        }

        @Override
        void onPostExecuteEvent() {
            // TODO Auto-generated method stub
            for(int i=0;i< this.getData().size();i++){
                ContentValues cv= this.getData().get(i);
                Datos datoItem=new Datos();
                for(int j=0; j<this.columns.size();j++){
                    String col=(String)columns.get(j).get("content");
                    datoItem.put(col, cv.get(col));
                }
                datos.add(datoItem);
            }
            setAlarms();
        }
    };
}

private void setAlarms(){
    Log.v("lp","DaToS : "+ this.datos);
    for(int i=0; i< this.datos.size(); i++){
        Datos dat = this.datos.get(i);
        if(Integer.parseInt((String) dat.get("recordatorio")) == 1){
            Bundle bundleReceiver= new Bundle();
            bundleReceiver.putString("NotificationText", (String) dat.get("itemDescripcion"));
            this.alarm= new MyAlarm(this, MyReceiverAlarmItem.class, bundleReceiver);

            Date recordatorioFecha= new Date();
            SimpleDateFormat formato= new SimpleDateFormat("yyyy-MM-dd'T'HH:mm");
            try {
                recordatorioFecha= formato.parse((String) dat.get("recordatorioFecha"));
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Calendar calendar= Calendar.getInstance();
            calendar.setTime(recordatorioFecha);

            if(calendar.getTimeInMillis() > System.currentTimeMillis()){
                Log.v("lp","DAT:"+dat+"MES:"+String.valueOf(calendar.get(Calendar.MONTH)));
                this.alarm.setAlarm(Integer.parseInt((String) dat.get("itemId")) , calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DATE), calendar.get(Calendar.HOUR_OF_DAY), calendar.get(Calendar.MINUTE));
            }
        }   
    }
}

private ArrayList<HashMap<String,Object>> getColumns(){
    return this.columns;
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:48:57.130

尝试用以下内容替换您的清单条目，然后检查。

```
<receiver android:name="BootReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

# grails - 如何从grails中多对多关系的连接表中删除条目

> ID：12474120
> 
> 赞同：1
> 
> 时间：2012-09-18T09:27:50.560
> 
> 标签：grails, many-to-many, hql, grails-orm, grails-2.0

我有两个域对象

```
Class Attachment{
    static hasMany = [mailDrafts: MailDraft];
}

Class MailDraft{
  static hasMany = [attachments: Attachment]
   static belongsTo = Attachment
} 
```

它创建了三个表

```
1)attachment
2)mail_draft 
3)attachment_mail_drafts

attachment_mail_drafts: id, mail_draft_id 
```

现在，我想写一个 HQL 查询`to delete an entry from the table 'attachment_mail_drafts' where 'attachment_id' is 4`，那么查询是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T13:42:11.957

你不能用 HQL 做到这一点，你可以[在这里](https://stackoverflow.com/questions/1201690/is-it-possible-to-bulk-delete-from-a-many-many-association-with-hql)阅读更多为什么。相反，您将执行以下操作：

```
def a = Attachment.get(4)
a.mailDrafts.clear()
a.save() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T13:44:54.120

似乎在 HQL 中您只能删除对象，无法删除关联。您可以使用原始 SQL 或使用 GORM 方法 removeFrom：

```
def attachment = Attachment.get(1)
def mailDraft = attachment.mailDrafts.find { it.id = 4 }
attachment.removeFromMailDrafts(mailDraft).save(flush: true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:21:19.870

[您可以使用 Burt Beckwith 先生解释](http://www.infoq.com/presentations/GORM-Performance)的方法实现 m:n 集合，避免使用 hasMany/belongsTo 技术，这可以提高性能并可以帮助您安全地删除所需的“attachment_mail_drafts”[实体](https://mrpaulwoods.wordpress.com/2011/02/07/implementing-burt-beckwiths-gorm-performance-no-collections/)。

# java - Android 应用程序崩溃报告

> ID：12474121
> 
> 赞同：2
> 
> 时间：2012-09-18T09:28:03.220
> 
> 标签：java, android

我想在应用程序崩溃时在后台发送详细的登录信息。我该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:58:36.180

当您的应用程序强制关闭时，使用远程堆栈跟踪获取崩溃报告。

[可在此处](http://code.google.com/p/android-remote-stacktrace/)获得源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:34:17.833

我已经在几个项目中使用了[http://www.bugsense.com ，这很棒！](http://www.bugsense.com)它还可以在向您发送新错误时向您发送电子邮件。

BugSense 也适用于 ACRA：[http ://www.bugsense.com/features/acra](http://www.bugsense.com/features/acra)

如果您想自己做，您需要考虑设置自己的未捕获异常处理程序，然后尝试执行发送部分（通过电子邮件或网站）：[https ://stackoverflow.com/a/755151/ 349012](https://stackoverflow.com/a/755151/349012)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:10:26.347

如果您想要异常日志，首先在 catch 块中获取异常并将其存储到某个变量中，然后使用`HTTP POST`or`GET`方法将其发送到您的服务器，如果您愿意，您可以将其保存到服务器端的数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:32:07.477

我认为您想要实现的目标已经由 ACRA 完成，通过使用 ACRA，我们可以获得 creah 报告[ACRA–Easy Crash Log Reporting for Android](http://code.google.com/p/acra/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T09:33:05.183

您可以使用 ACRA 获取崩溃报告。检查此链接[http://code.google.com/p/acra/](http://code.google.com/p/acra/)

# facebook - FB.Login 在 Opera Mobile 中不起作用

> ID：12474127
> 
> 赞同：0
> 
> 时间：2012-09-18T09:28:27.853
> 
> 标签：facebook, opera

我有一个使用 Facebook Connect 对用户进行身份验证的移动网站。我在使用 Opera Mobile 登录时遇到问题。我有以下 javascript 来检测登录状态，但只有在 Opera Mobile 中回调没有触发。有人遇到过这个问题吗？

```
window.fbAsyncInit = function () {
        FB.init({
            appId: 'xxxx',
            channelUrl: 'http://xxxx/channel.html',
            status: true,
            cookie: true,
            xfbml: true
        });

        FB.Event.subscribe('auth.statusChange', handleStatusChange);
    };

function handleStatusChange(response) { // --> NOT FIRE
    if (response.authResponse) {
        //Login, show Logout button
    }
    else {
        //Show Login button

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:48:37.727

请确保将 JS 标记和其他必需的 HTML 按逻辑顺序放置（如果您使用 fb-root 元素，请将脚本放在其后，如果它们当前位于 HEAD 中，请尝试将它们放入 BODY 中）。我已经看到 FB 登录失败是因为标签的顺序错误，并且因为某些浏览器会进行“推测性解析”，这种随机跨浏览器故障的原因可能不会立即明显。（此外，如果网络出现故障并且加载内容的时间出乎意料，您创建的竞争条件可能会在任何浏览器中中断......）

如果您仍然有问题，获取链接或演示会很有用。我们测试了一个使用 FB Connect 的随机页面并且运行良好。除了标签顺序问题之外，我无法猜测您在这里可能会出现什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:51:20.900

Opera Mobile 今天发布了新版本 (12.10.ADR-1210081231)。它解决了 Facebook 登录问题，但有一个小问题。Facebook 窗口不会在用户登录后自动关闭。

# ruby - 在一个 ruby 脚本中创建两个不同的类是一种好习惯吗？

> ID：12474134
> 
> 赞同：1
> 
> 时间：2012-09-18T09:28:43.377
> 
> 标签：ruby

像这样在一个 ruby​​ 脚本文件中创建两个不同的类在实践中是否很好？

**Ruby 文件名 - XYZ.rb**

```
class Car
  .........
  .........
end

class Bike
  .........
  .........
end 
```

这样做有什么好处或坏处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:32:06.257

如果您在自动加载的环境（例如 Rails）中使用它，它会给您带来问题。除此之外，我看不出有任何技术原因不在同一个文件中放置多个类。但是为了方便起见，我仍然每个班级都有一个文件。它使导航更容易，因为“转到文件”编辑器命令现在实际上是“转到课堂”。还有其他好处。

总结一下：除了你在喝咖啡休息时间放在一起的脚本之外，在每个类中使用文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:40:17.463

在一个文件中使用多个类的主要优点是您可以快速尝试一些东西并一起破解东西。我建议在编写更严肃的项目或工作时不要这样做，因为正如 Sergio Tulentsev 所说，您可能会在自动加载的环境中遇到问题。另一个缺点是您忘记了哪些类位于哪个文件中。

# arrays - 添加数字数组，就好像它们代表数字一样

> ID：12474142
> 
> 赞同：3
> 
> 时间：2012-09-18T09:29:18.850
> 
> 标签：arrays, matlab, math, carryflag

我有以下问题。假设我必须数组 X 和 Y 其条目由 0 到 9 范围内的整数组成，例如

```
X = [1 2 3]
Y = [7 0 9] 
```

我想将这些数组视为以 10 为底的数字的数字，因此 X 代表数字 123，Y 代表数字 709。我想编写一个程序来输出这些整数之和的数字。所以在给出的例子中，它应该输出数组

```
Z = [8 3 2] 
```

因为 123 + 709 = 832。对于这个问题，假设 X 和 Y 具有相同的长度就足够了，即它们所代表的数字具有相同的位数。当我这样做时，我还想跟踪在添加过程中执行的进位。所以在这个例子中，我也想输出

```
C = [0 0 1] 
```

这表示当我添加数字 9 + 3 = 12 时我必须携带 1，但是在其他位置添加数字时没有携带。所以我的主要问题是

*   有谁知道使用 MATLAB 实现这一目标的简单方法？

到目前为止，我想出的是以下代码，它给出了两个数字 X 和 Y

```
clear all; clc;

C = zeros(1, length(X));
for j=length(X):-1:1
    if X(j) + Y(j) > 9
        C(j) = 1;
    end
    Z(j) = mod(X(j) + Y(j), 10);
    if j < length(X)
        if Z(j)  + C(j+1) < 9
            Z(j) = Z(j)  + C(j+1);
        else
            Z(j) = mod(Z(j) + C(j+1), 10);
            C(j) = 1;
        end
    end
end

if C(1) == 1
    Z = [1 Z];
end

Z
C 
```

问题是代码有时只能工作。例如，通过我上面给出的示例，123 + 709 = 832 与 [0 0 1] 的“进位数组”一起工作没有问题。但是输入 X = 52514 和 Y = 41525 不会产生正确的结果。所以我的后续问题是

*   有没有人看到上面代码中的错误/我该如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:32:10.760

你需要换行

```
if Z(j)  + C(j+1) < 9 
```

到

```
if Z(j)  + C(j+1) <= 9 
```

然后它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:00:17.710

您可以利用`dec2base`,`str2num`和`num2str`功能：

```
function StackOverflow
    x = [1 2 3];
    y = [4 5 6];

    numX = DigitsToNum(x);
    numY = DigitsToNum(y);

    digits = NumToDigits(numX+numY);
    disp(digits);
end

function digits = NumToDigits(x)
    digits = double( dec2base(x,10) - '0');
end

function num = DigitsToNum(x)
    st = strrep(num2str(x),' ','');
    num = str2num(st); %#ok<ST2NM>
end 
```

实现上述两个功能的另一种方式：

```
function digits = NumToDigits(x)
    digits = [];
    while x > 0
        digits(end+1) = mod(x,10); %#ok<AGROW>
        x = floor(x/10);
    end
end

function num = DigitsToNum(x)
    baseMult = power(10,0: (numel(x)-1));
    num = sum( baseMult.*x );
end 
```

# php - 将 id 从 php 传递到 JS 文件

> ID：12474146
> 
> 赞同：0
> 
> 时间：2012-09-18T09:29:22.900
> 
> 标签：php, javascript, ajax, codeigniter

我很清楚这个问题被问了很多次，但是我的问题有些不同，我没有找到解决方案。

现在问题来了。

我有一张图片，所以每当我点击图片时，弹出窗口就会打开并显示数据。现在我想让这个动态并希望数据应该根据 id 来。

这是我的图像代码。：

```
<div id='contact-form'>

        <a href='#' class='contact'><img src="<?php echo base_url();?>/assets/images/pre.jpg" style="height:18px; width:18px"></a>
      </div>
        <!-- preload the images -->
        <div style='display:none'>
            <img src='<?php echo base_url();?>assets/images/img/contact/loading.gif' alt='' />
        </div>  

And on its click the ajax is called from js file here is the code of that js file:
//here the provider is controller and show_coupon_pre is a function which call the view having the data.
$.get("provider/show_coupon_pre", function(data){
                    // create a modal dialog with the data
                    $(data).modal({
                        closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",
                        position: ["15%",],
                        overlayId: 'contact-overlay',
                        containerId: 'contact-container',
                        onOpen: contact.open,
                        onShow: contact.show,
                        onClose: contact.close
                    });
                }); 
```

我有一个没有记录的表，每个记录都有这种类型的图像。用户可以单击并在弹出窗口中获取预览。但我想根据 id=1 的行在弹出窗口中显示数据，它应该显示 id==1 的数据，依此类推。现在你们能帮我吗？如何将此ID传递给我可以获取所需数据的js文件。

我在codeignitor工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:39:48.797

最简单的解决方案

```
<table>
<tr>
 <td><img class="banner" src="/image1.png" post_id="1"></td>
 <td>some other data 1</td>
</tr>
<tr>
 <td>
 <td><img class="banner" src="/image1.png" post_id="2"></td>
 <td>some other data 2</td>
</tr>
</table> 
```

Javascript：

```
$('.banner').click(function() { 
  post_id = $(this).attr("post_id");

  // send your ajax with post_id
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:41:35.257

如果您在输出图像时在 php 中有 ID，我会这样做：

```
<script>
var randomId = <?php echo '"' . $phpId . '"'; ?>
</script> 
```

# javascript - jQuery 模态窗口在 Internet Explorer 中不起作用

> ID：12474148
> 
> 赞同：0
> 
> 时间：2012-09-18T09:29:28.447
> 
> 标签：javascript, jquery, internet-explorer, modal-dialog

我有一个旧网站，已被两个网站取代，并着手制作一个模式窗口来引导人们访问正确的网站。

我只能在旧网站上提供 HTML 文件，而且 HTML 的结构不是很统一。我决定在文档的头部添加一些 jQuery，它在页面中添加了一个模式窗口，为人们提供到新站点的链接。

这一切都可以在 Linux 和 Mac 上的 Chrome、Safari 和 Firefox 上正常运行，但是在 PC 上的 Internet Explorer 上进行测试时，它看起来完全错误，并且根本不起作用。我打开了控制台，没有错误。

```
 $(function(){
    var disappear = function(){
      // window.location = window.location
      var $m = $('.modal')
      $m.eq(0).fadeOut()
      $m.hide('slow')
    }
    $('body').append(
      $("<div class='modal'>").css({
        position: 'fixed',
        width: '100%',
        height: '100%',
        backgroundColor: '#000',
        opacity: .8,
        top: 0,
        left: 0
      })).click(disappear).after($("<div class='modal'>").css({
        position: 'fixed',
        width: 600,
        // height: 300,
        backgroundColor: '#FFE',
        borderRadius: 10,
        border: "5px solid #005400",
        top: '10%',
        left: '50%',
        marginLeft: -300,
        padding: '1em',
        fontFamily: 'trebuchet ms, sans-serif'
      }).html("<h2>Please be advised</h2><p>\
The information on this website is maintained for historical purposes.<br>\
It has not been updated since 2009.<br>\
However, Tesfa Community Tourism continues to thrive.<br>\
<h3>For up to date information...</h3>\
<a href='http://tesfatours.com/?from=cbtcom' class='button green'>Book with Tesfa Tours</a>\
<a href='http://community-tourism-ethiopia.org/?from=cbtcom' class='button sand'>Community website</a>\
<a href='#' id='close' class='button'>Continue to archive site</a>\
</p>\
"))
    $('#close').css({fontSize:'12px'}).live('click',disappear);
    $('table table').eq(1).html(myString)
  }) 
```

任何关于为什么失败的想法都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:34:35.510

尝试在你的 CSS 中使用它，然后让我知道——

```
filter:alpha(opacity=80);
opacity: 0.8; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:16:49.707

当您忘记逗号`(,)`、分号`(;)`或花括号等小字符时，这通常发生在 IE`({ })`中。无论您在上面的代码中写了什么，我都检查过这是正确的，但在其他一些情况下，您必须检查所有功能。

我也遇到过这种类型的问题，我想念一个函数中的 , 。在我看来，让我们进行这样的检查：

```
$('#close').css({fontSize:'12px'}).live('click',disappear);
    $('table table').eq(1).html(myString)
}); 
```

我最后添加了一个分号。

# python - 使包中的每个模块都可以从内部访问？

> ID：12474151
> 
> 赞同：0
> 
> 时间：2012-09-18T09:29:56.683
> 
> 标签：python, package, directory-structure, relative-import

应该如何构建 Python 包以使其内部的任何模块都成为可能？

我的文件结构如下：

```
Project/
    |---log/
    |   |---some logs
    |
    |---src/
        |---foo/
        |   |---__init__.py
        |   |---analyse.py
        |   |---export.py
        |    
        |---bar/
        |   |---__init__.py
        |   |---log.py
        |   |---dbhandler.py
        |   
        |---__init__.py
        |---main.py 
```

`main.py`初始化一切。我想导入`foo/analyse.py`到`bar/dbhandler.py`，但我只收到一个错误：

```
AttributeError: 'module' object has no attribute 'analyse' 
```

我尝试了几种说法：

```
import Project.src.foo.analyse
import src.foo.analyse
import foo.analyse
import analyse 
```

他们都给出了相同的错误。我也试过：

```
from .. import foo.analyse
from .. import analyse 
```

但我收到：

```
ValueError: Attempted relative import beyond toplevel package 
```

我已经浏览了 StackOverflow 上的大约 50 个线程和互联网上的无数文章。从我发现的所有内容来看`import src.foo.*`，如果只有`__init__.py`文件位于每个文件夹中，该语句应该可以在包内的任何地方工作。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:40:04.980

我认为应该是

```
from ..foo import analyse 
```

由于不确定它`..`本身的含义：这可能只是指顶级包，所以你必须说明你想要下包树的哪个其他分支：`foo`在这种情况下。

有了这个，我可以做到（前提`src`是在你的`PYTHONPATH`. 在这种情况下，我只是从`Project`目录级别开始）：

```
>>> import src
>>> import src.bar
>>> import src.bar.dbhandler
>>> src.bar.dbhandler.analyse
<module 'src.foo.analyse' from 'src/foo/analyse.py'>
>>> src.bar.dbhandler.analyse.__file__
'src/foo/analyse.py' 
```

此外，您可能会注意到，在您当前的结构中，“主”包被称为`src`，因为这是您的顶层所在的地方`__init__.py`。可能不是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:44:31.713

鉴于您的目录结构，在 main.py 上您应该有：

```
import foo.analyse
import bar.dbhandler 
```

然后像这样调用（例如）：

```
foo.analyse.number_cruncher()
bar.dbhandler.db_store() 
```

如果您从所在目录启动程序`main.py`，它应该可以正常工作。否则，您应该`PYTHONPATH`按照 Nicola Musatti 的建议检查您的文件，或使用 .pth 文件或您拥有的许多选项中的任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:42:00.517

确保您的 PYTHONPATH 包含`Project/src`然后使用

```
import foo.analyse 
```

# java - 如果JVM被挂起是什么意思？

> ID：12474153
> 
> 赞同：7
> 
> 时间：2012-09-18T09:30:01.137
> 
> 标签：java, jboss, jvm, java-service-wrapper

当我的应用程序运行时。我收到一条消息说：

```
Ping: Timed out waiting for signal from JVM.
The JVM was launched with debug options so this may be because the JVM
is currently suspended by a debugger.  Any future timeouts during this
JVM invocation will be silently ignored. 
```

这意味着什么？它似乎会阻止来自外部的任何网络请求？因为当我向它上传文件时，它失败了。帮我 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:36:41.873

在调试代码时，通常会在其中设置`breakpoints`以在某些时候中断程序的执行。当 JVM 遇到这样的断点时，它会暂停执行，并等待调试器更进一步（进入/跳过/退出/等）。

如果您的流程附加了一个 UI 调试器（如 Eclipse），您可以从那里控制执行流程，观察变量值等。

您看到的消息简单地说，您得到的超时可能只是这种情况的结果，并由 Java Service Wrapper 显示，[如下所述](http://wrapper.tanukisoftware.com/doc/english/prop-java-detect-debug-jvm.html)：

> [如果wrapper.java.command](http://wrapper.tanukisoftware.com/doc/english/prop-java-command.html)属性设置为“jdb”或“jdb.exe”，或者[wrapper.java.additional.<n>](http://wrapper.tanukisoftware.com/doc/english/prop-java-additional-n.html)属性之一设置为“ ，则 Wrapper 将确定 JVM 正在使用调试器-Xdebug”。

因此，您似乎正在调试模式下使用 Java Service Wrapper 启动您的应用程序，并且当某些超时到期时，它会通过附加消息警告您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:35:15.777

JVM 调试选项允许您连接到 JVM 并逐步执行代码（Google java 远程调试以获取更多信息）。基本上这意味着可以远程暂停和控制代码执行（一次执行一条语句，检查变量值等）。虽然这非常有用，但它当然会干扰软件的正常运行。如果您不打算在调试模式下运行 JVM，请尝试找出设置它并删除它（它可能在 JAVA_OPTS（环境变量）中，或者它可能在您的启动脚本中或您使用的任何东西中启动 JVM。您正在寻找一个类似于 . 的字符串`-Xdebug -Xrunjdwp:server=y, transport=dt_socket,address=#number#, suspend=n`。删除所有这些，将其注释掉，或者任何适合设置位置的内容，然后重新启动 JVM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T10:17:21.530

> 这意味着什么？

该消息来自[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/german/prop-java-detect-debug-jvm.html)。包装器尝试“ping”JVM 并没有得到响应。这很可能意味着您正在调试 JVM 并已将其暂停。当 JVM 暂停时，它无法响应任何类型的外部请求。所有线程都被冻结...

> 它似乎会阻止来自外部的任何网络请求？因为当我向它上传文件时，它失败了。帮我

是的，如果您暂停了 JVM，它会这样做。取消暂停 JVM，它应该会再次开始响应。

请注意，如果您在调试模式下从 IDE 启动应用程序，JVM 可能会以暂停状态启动……取决于您的 IDE 设置/启动配置。

* * *

我能想到的唯一其他解释是，您的网络或虚拟网络配置（例如数据包过滤器或虚拟网络路由）可能存在问题，导致网络数据包大量丢失。

# c# - 可以根据约定注入基于ctor arg名称的命名实例吗？

> ID：12474156
> 
> 赞同：0
> 
> 时间：2012-09-18T09:30:17.883
> 
> 标签：c#, dependency-injection, structuremap

使用 StructureMap，可以按照约定根据名称注入实例，如下所示：

托儿：

```
public HomeController(IQuery getItemByProductNumberQuery, IQuery getCustomerById) 
```

结构图配置：

```
x.For<IQuery>().Add<GetItemByProductNumberQuery>().Named("getItemByProductNumberQuery");
x.For<IQuery>().Add<GetCustomerById>().Named("getCustomerById"); 
```

我正在使用遗留代码，因此更改 DI 容器是一项艰巨的任务，但了解其他容器对手头问题的解决方案也会很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:42:49.050

在我看来，您的代码库中缺少抽象。在正常情况下，服务（`IQuery`在您的情况下）应该是明确的，但在您的情况下并非如此。通过参数名称识别它们通常容易出错，并导致难以维护的 DI 配置。这并不总是必须是这种方式（如[本例所示](http://blog.ploeh.dk/2012/07/02/PrimitiveDependencies.aspx)），但可能是您的情况。

为了解决这个问题，让你的`IQuery`界面通用：

```
public interface IQuery<TParameters, TResult>
{
    TResult Handle(TParameters parameters);
} 
```

这允许您通过其封闭的通用表示来注册此接口的所有实现，并允许您的控件依赖于此封闭的通用表示：

```
public HomeController(
    IQuery<GetItemByProductNumberParameters, Item> getItemQuery, 
    IQuery<GetCustomerByIdParameters, Customer> getCustomerById) 
```

如您所见，每个查询都定义了一个“XXXParameters”对象。这是一个包含运行查询所需的所有参数的 DTO。您的代码`HomeController`可能如下所示：

```
public View Item(int productNumber)
{
    var parameters = new GetItemByProductNumberParameters
    {
        ProductNumber = productNumber,
        // other parameters here
    };

    Item item = this.getItemQuery.Handle(parameters);

    return this.View(item);
} 
```

`IQuery<TParameter, TResult>`使用 StructureMap 一次性批量注册所有实现可能有点困难，但是[这个 SO question 可能会有所帮助](https://stackoverflow.com/questions/4733424/structuremap-register-generic-types-against-all-possible-concrete-implementation)。如果没有，使用另一个 DI 容器可能会产生更好的结果。

您可以在本文中找到有关为什么要以这种方式对查询建模的更多信息：[同时……在我的架构的查询方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。

# lucene - elasticsearch 获取所有可能的方面

> ID：12474157
> 
> 赞同：0
> 
> 时间：2012-09-18T09:30:20.893
> 
> 标签：lucene, elasticsearch

有没有办法获得“前 10 个”方面，但同时获得我们可以创建的所有可能方面（在这种情况下，我们文档中的**所有不同王国**）。

我知道我可以将“大小”增加到一个非常大的数字，但是它会生成一个非常大的 JSON，并且处理成本可能会大得多。

一个简单的方面...

```
"facets" : {
    "kingdom": {
        "terms": {
            "field": "kingdom",
            "size": 10
        } 
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T18:52:10.150

json 响应的大小与您对该术语拥有的不同值的数量成正比。

话虽如此，我相信你想要的是应用一种

```
"sort":[{"kingdom":{"order":"desc"}}],"size":10 
```

将有两个查询， `"facets" :{"kingdom":{"terms":{"field": "kingdom","size": 10}}` 将返回所有术语，另一个查询将返回“命中”字段内的前 10 个降序

# javascript - 如何从购物车中删除产品

> ID：12474168
> 
> 赞同：0
> 
> 时间：2012-09-18T09:30:48.153
> 
> 标签：javascript, html, json, shopping-cart

我有一个关于 javascript 的问题。我有一个购物车和一个从该购物车中删除产品的功能。购物车为空时如何重定向到主页？

这是我的功能删除产品。

```
function removeCart(key) {
$.ajax({
    url: 'index.php?route=checkout/cart/update',
    type: 'post',
    data: 'remove=' + key,
    dataType: 'json',
    success: function(json) {
        $('.success, .warning, .attention, .information').remove();

        if (json['output']) {
            $('#cart_total').html(json['total']);
            $("table.total tr:last td:last").text(json['total'].split('-')[1]);

            $('#cart .content').html(json['output']);
        }           
    }
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:43:51.693

当您进行更新时，您应该得到您的购物车。如果购物车是空的，您可以在 ajax 响应中返回它。例如，通过在数组中设置一个 emptyCart 键：

```
function removeCart(key) {
$.ajax({
    url: 'index.php?route=checkout/cart/update',
    type: 'post',
    data: 'remove=' + key,
    dataType: 'json',
    success: function(json) {
        $('.success, .warning, .attention, .information').remove();
        if (json['emptyCart']) {
            location.href="/where-you-want-it-to-go";
        }
        if (json['output']) {
            $('#cart_total').html(json['total']);
            $("table.total tr:last td:last").text(json['total'].split('-')[1]);

            $('#cart .content').html(json['output']);
        }
    }
});
} 
```

# linux - 如何查找网络接口名称

> ID：12474172
> 
> 赞同：12
> 
> 时间：2012-09-18T09:31:04.990
> 
> 标签：linux, bash, sed, ip

我有一个在各种不同的 Ubuntu Linux 机器上运行的 bash 脚本。它的工作是找出本地主机的 LAN IPv4 地址。

该脚本正在使用

```
ip addr show eth0 | sed -n '/inet /{s/^.*inet \([0-9.]\+\).*$/\1/;p}' 
```

这很好，但有些机器出于某种原因使用 eth1 而不是 eth0。我希望能够发现 LAN iface 名称，所以我可以在这里替换它而不是 eth0。

当然，如果你能想出一个不同的 oneliner 来做同样的事情，那就太好了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-09T18:59:32.077

不确定这是否有帮助，但似乎`ip route get`会显示它用于连接远程主机的接口。

```
ubuntu@ip-10-40-24-21:/nail/srv/elasticsearch$ ip route get 8.8.8.8
8.8.8.8 via <gateway address> dev eth0  src <eth0 IP Address> 
```

当然，你可以在 shell 脚本中使用类似的东西来自动化它，

```
ip route get 8.8.8.8 | awk '{ print $NF; exit }' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-05-12T20:46:50.783

主网卡通常会有一个默认路由。所以：

```
ip -o -4 route show to default 
```

网卡：

```
ip -o -4 route show to default | awk '{print $5}' 
```

网关：

```
ip -o -4 route show to default | awk '{print $3}' 
```

与 ifconfig 不同，ip 具有一致且可解析的输出。它仅适用于 Linux；它不适用于其他 Unixen。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-01T05:25:45.013

最近，systemd/udev 已经自动开始为所有本地以太网、WLAN 和 WWAN 接口分配接口名称，我们都习惯了。这与传统的接口命名方案（“eth0”，“eth1”，“wlan0”，...）有所不同。现在我们必须先检查本地接口名称是什么，然后才能使用它，而之前我们使用它非常准确地猜测“eth0”是正确的名称。您要的是网络名称..这是一个解决问题的小脚本

1.  使用“ip route get 8.8.8.8”来确定哪个 ACTIVE 接口具有到 Internet 的路由（或当前正在使用）输出应如下所示：

    8.8.4.4 通过 10.10.1.1 开发 enp0s3 src 10.10.1.118 缓存

2.  使用 awk 打印接口名称的第 5 个文本块

    ]# ip route get 8.8.8.8 | awk -- '{print $5}' 输出：enp0s3

3.  使用 awk 打印接口地址的第 7 个文本块

    ]# ip route get 8.8.8.8 | awk -- '{print $7}' 输出：10.10.1.118

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-06T20:34:17.717

信不信由你，没有标准的、简单的方法来获取这些信息。没有标准*给我当前的 IP 和接口名称*命令。甚至没有标准格式返回的信息`ifconfig`。

我将建议放弃纯 shell 并使用 Python 之类的脚本语言，您可以在其中执行以下操作：

```
import socket
socket.gethostbyname(socket.gethostname()) 
```

除非它在大多数 Linux 系统上不起作用，因为`/etc/host`文件中通常有一个条目指向`127.0.0.1`，即环回地址。[Perl](http://www.perlmonks.org/?node_id=53660)也有同样的问题。

您牢牢掌握了所涉及的脚本，并且您已经看到了这些问题。我唯一能推荐的是在你要运行它的每台机器上测试它，看看会弹出什么。由于网络的设置方式和接口可能由每个位置命名的方式，不会有一个通用的、适用于所有操作系统的班轮，甚至不会适用于同一操作系统上的不同系统。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-18T09:58:08.933

搜索字符串`inet`和`brd`（用于广播）怎么样？那会给你：

```
ip addr show|egrep '^ *inet'|grep brd|awk -- '{ print $2; }'|sed -e 's:/[0-9]*$::' 
```

请注意，我使用了不必要的命令；您可能可以`sed`使用更复杂的正则表达式来实现相同的目的，但我更喜欢一个命令，它可以让我通过哪些步骤得到结果很明显。

如果您想在单个命令中运行它，我建议您尝试`awk`：

```
ip addr show|awk -- '$1 == "inet" && $3 == "brd"  { split($2,a,"/"); print a[1]; }' 
```

它不比`sed`版本长多少，但更具可读性。

**+1 更具可读性：**

```
ip addr show | awk '$1 == "inet" && $3 == "brd" { sub (/\/.*/,""); print $2 }' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-06T18:09:06.753

1）这个只打印接口名称（我需要它来处理即将到来的和下行的 PPP 链接）：

```
for i in $( ifconfig | grep 'ppp' | awk '{print $1}' );
do

printf "$i "; ## Or echo

done 
```

结果：

> ppp0 ppp1 ppp2

2）这个打印接口名称和IP

```
declare -a IPADDR

index=0

for i in $( ifconfig | grep 'inet addr' | awk '{print $2}'| sed 's#addr:##g' );
do
        IPADDR[$index]=$i
        let "index += 1"
done

index=0

for i in $( ifconfig | grep 'ppp' | awk '{print $1}' );
do
        echo $i 
        let "index += 1"
done 
```

结果：

> ppp0 地址：IP
> 
> ppp1 地址：IP
> 
> ppp2 地址：IP

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-18T09:35:06.303

我仍然想知道是否有更简单的方法可以做到这一点，但这是我的解决方法：我知道 LAN 子网，所以......

```
ip addr show | grep "inet 10.67.5." \
    | sed -n '/inet /{s/^.*inet \([0-9.]\+\).*$/\1/;p}' 
```

# apache - 重定向 htacces 链接

> ID：12474175
> 
> 赞同：0
> 
> 时间：2012-09-18T09:31:16.713
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我想重定向一些链接，因为谷歌上没有重复的内容

链接是这样的.. www.example.ro/adidasi_dama.php?page=1

我将重写规则设为 .. www.example.ro/adidasi-dama/pagina-1/

用这个代码..

```
RewriteRule ^([a-zA-Z]+)([-_]){1}([a-zA-Z]+)/pagina-([0-9]+)/$ $1_$3.php?page=$4
RewriteRule ^([a-zA-Z]+)([-_]){1}([a-zA-Z]+)/$ $1_$3.php
RewriteRule ^([a-zA-Z_]+)/pagina-([0-9]+)/$ /$1.php?page=$2 
```

但是现在......两个版本都在工作......我想自动从第一个链接重定向到第二个......但我所有的页面都需要它......

例如，我有很多链接

*   www.example.ro/noutati.php?page=1
*   www.example.ro/adidasi_fete.php?page=1
*   www.example.ro/pantofi_barbati.php?page=1

    ...

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:41:56.780

尝试将这些规则添加到同一个 htaccess 文件中：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([a-zA-Z_]+)\.php\?page=([0-9]+)
RewriteCond %1:%2 (.+)_(.+):(.*)
RewriteRule ^ /%1-%2/pagina-%3/? [L,R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([a-zA-Z_]+)\.php\?page=([0-9]+)
RewriteRule ^ /%1/pagina-%2/? [L,R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([a-zA-Z_]+)\.php(\ |$)
RewriteCond %1 (.+)_(.+)
RewriteRule ^ /%1-%2/? [L,R=301]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([a-zA-Z_]+)\.php(\ |$)
RewriteRule ^ /%1/? [L,R=301] 
```

# jquery - 选择时悬停事件的 jQuery/浏览器问题

> ID：12474177
> 
> 赞同：1
> 
> 时间：2012-09-18T09:31:31.097
> 
> 标签：jquery, html, cross-browser, position, jquery-hover

首先，我查找了我的问题，但只发现了不密切相关的主题，我相信这可能与我在谷歌上找到的不同，感谢您花时间研究我的问题。

[http://jsfiddle.net/dSJMG/](http://jsfiddle.net/dSJMG/)

在这里您可以看到一个演示，其中我使用 jQuery 1.8 并有一个包含标签和选择元素的 div，这些已打开悬停事件以提供编辑功能，并发现当悬停字段并在选择下拉列表中选择任何选项时，有时会触发 mouseleave 事件，但是我没有用鼠标指针离开选项列表。这似乎是以非确定性的方式发生的，更常见的是在更快地移动选项上的指针时（但仍然没有离开其区域）。我也可以在每个主流浏览器上重现它，但是我知道只有 IE 正式有这个错误。

这可能与定位有关，因为当我增加容器与其子容器之间的空间时，问题似乎得到了解决。

任何想法表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:13:38.440

```
var $select = $("select.sel"), $label = $("label.lab");

$(".cont").hover(function(evt) {
    if (evt.type === "mouseenter") {
        $select.val($label.hide().text()).show();
        $select.addClass('active');
    } else {
        if(!$select.hasClass('active')) {
            $label.text($select.hide().val()).show();
            $select.removeClass('active');
        }
    }
});

$("select.sel").change(function() {
    if($select.hasClass('active')) {
        $label.text($select.hide().val()).show();
        $select.removeClass('active');             
    }
}); 
```

[像这样](http://jsfiddle.net/dSJMG/14/)改变jQuery

# java - Cassandra 保存键空间时出错，并且不在 opscenter 中显示键空间

> ID：12474181
> 
> 赞同：4
> 
> 时间：2012-09-18T09:31:36.840
> 
> 标签：java, cassandra

如果我尝试保存一个新的密钥空间，它会给我以下错误。

```
Error saving keyspace: Call to /Cluster/keyspaces/newname timed out. 
```

如果我想创建一个现有的键空间，我会收到以下错误

```
Error saving keyspace: Keyspace names must be case-insensitively unique ("shashank" conflicts with "shashank") 
```

问题是我在 opscenter 用户界面浏览器中看不到任何键空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T15:50:28.590

查看现有键空间的一种非常简单的方法是在您的一个节点上打开 CQL shell。转到安装 Cassandra 的根文件夹下的 bin 文件夹，然后运行“CQLSH”。在此命令提示符下，您只需键入“describe keyspaces”，您将获得此集群中所有可用键空间的列表。

需要注意的一点是，Cassandra 仅在您将双引号括在对象名称周围时才观察到区分大小写。否则，所有内容都会转换为小写并以这种方式进行比较。

# python - 在python中异步读取和处理图像

> ID：12474182
> 
> 赞同：16
> 
> 时间：2012-09-18T09:31:38.210
> 
> 标签：python, image-processing, asynchronous, numpy, scipy

**语境**

我经常发现自己处于以下情况：

*   我有一个需要处理的图像文件名列表
*   我使用例如 scipy.misc.imread 顺序读取每个图像
*   然后我对每张图像进行某种处理并返回结果
*   我将结果沿图像文件名保存到一个书架中

问题在于，简单地读取图像会花费不可忽略的时间，有时与图像处理相比甚至更长。

**问题**

所以我认为理想情况下我可以在处理图像 n 时读取图像 n + 1。或者以自动确定的最佳方式一次更好地处理和读取多个图像？

我已经阅读了多处理、线程、扭曲、gevent 等，但我不知道要使用哪个以及如何实现这个想法。有没有人有解决这类问题的方法？

**最小的例子**

```
# generate a list of images
scipy.misc.imsave("lena.png", scipy.misc.lena())
files = ['lena.png'] * 100

# a simple image processing task
def process_image(im, threshold=128):
    label, n = scipy.ndimage.label(im > threshold)
    return n

# my current main loop
for f in files:
    im = scipy.misc.imread(f)
    print process_image(im) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-18T20:04:57.683

The multiprocessing package is pretty easy to use. Look at the [Queues example](http://docs.python.org/library/multiprocessing.html#exchanging-objects-between-processes) for a guide. You'll be following the producer consumer model. You want one (or more) producer processes reading images, and one (or more) consumer processes doing the image processing.

Your example would look something like this:

```
from multiprocessing import Process, Queue
import scipy

def process_images(q):
    while not q.empty():
        im = q.get()
        # Do stuff with item from queue

def read_images(q, files):
    for f in files:
        q.put(scipy.misc.imread(f))

if __name__ == '__main__':
    q = Queue()

    producer = Process(target=read_images, args=(q, files))
    producer.start()
    consumer = Process(target=process_images, args=(q, ))
    consumer.start() 
```

This is a bit simpler than your original idea. In this example the producer adds to the queue as fast as it can rather than just staying one ahead of the consumer. That might be a problem if the producer gets so far ahead that you don't have enough memory to hold the queue. If problems arise you can get deeper into the multiprocessing docs, but this should be enough to get you started.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-18T21:08:53.613

[菲利普的回答](https://stackoverflow.com/a/12484183/24283)很好，但只会创建几个进程（一个读取，一个计算），这几乎不会最大化现代 > 2 核心系统。这是一种使用[`multiprocessing.Pool`](http://docs.python.org/library/multiprocessing.html#module-multiprocessing.pool)（特别是它的 map 方法）的替代方法，它创建了同时执行读取和计算方面的进程，但应该更好地利用您可用的所有内核（假设文件多于内核）。

```
#!/usr/bin/env python

import multiprocessing
import scipy
import scipy.misc
import scipy.ndimage

class Processor:
    def __init__(self,threshold):
        self._threshold=threshold

    def __call__(self,filename):
        im = scipy.misc.imread(filename)
        label,n = scipy.ndimage.label(im > self._threshold)
        return n

def main():
    scipy.misc.imsave("lena.png", scipy.misc.lena())
    files = ['lena.png'] * 100

    proc=Processor(128)
    pool=multiprocessing.Pool()
    results=pool.map(proc,files)

    print results

if __name__ == "__main__":
    main() 
```

如果我将图像数量增加到 500，并使用`processes=N`参数 to `Pool`，那么我得到

```
Processes   Runtime
   1         6.2s
   2         3.2s
   4         1.8s
   8         1.5s 
```

在我的四核超线程 i7 上。

如果您进入更现实的用例（即实际不同的图像），您的进程可能会花费更多时间等待图像数据从存储中加载（在我的测试中，它们几乎是从缓存磁盘立即加载）然后它可能是值得明确地创建比核心更多的进程，以获得更多的计算和负载重叠。不过，只有您自己在实际负载和硬件上进行的可扩展性测试才能告诉您什么才是最适合您的。

# cuda - CUDA5 示例：有人将一些 cutil 定义翻译成 CUDA5 吗？

> ID：12474191
> 
> 赞同：8
> 
> 时间：2012-09-18T09:32:04.047
> 
> 标签：cuda, nvidia

有人开始使用 CUDA5 SDK 了吗？
我有一个使用一些 cutil 功能的旧项目，但它们已被新项目遗弃。

解决方案是大多数函数可以从 cutil*/cut* 转换为来自 helper*.h 头文件的类似命名的 sdk* 等价物......

举个例子： cutStartTimer 变成 sdkCreateTimer 就这么简单...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T10:37:59.693

> 有人开始使用 CUDA5 SDK 了吗？

大概。

> 有没有人将一些 cutil 定义翻译成 CUDA5？

也许。但是为什么不直接使用新的头文件来替换它呢？引用自[Beta 发行说明](http://code.google.com/p/cuda-5/source/browse/CUDA_SDK_Release_Notes.wiki?repo=wiki&r=7d5198768390e32b964a038fdaeaf86704880b21)：

> 在 CUDA 5.0 之前，CUDA 示例项目引用了一个实用程序库，其中包含名为 cutil 的头文件和源文件。这已被 CUDA 5.0 中的 CUDA Samples 删除，并替换为 CUDA Samples\v5.0\C\common\inc 中的头文件
> 
> ```
> helper_cuda.h, helper_cuda_gl.h, helper_cuda_drvapi.h, helper_functions.h,
> helper_image.h, helper_math.h, helper_string.h, and helper_timer.h 
> ```
> 
> 这些文件为 CUDA 设备初始化、CUDA 错误检查、字符串解析、图像文件加载和保存以及计时功能提供实用功能。CUDA 示例项目不再有对 cutil 的引用和依赖，现在将使用这些辅助函数。

# apache-zookeeper - Zookeeper如何在异步API中调用完整函数

> ID：12474196
> 
> 赞同：0
> 
> 时间：2012-09-18T09:32:10.707
> 
> 标签：apache-zookeeper

我发现了一些回调签名，例如`data_completion_t`, `string_completion_t`。但我想知道 zookeeper 是如何在异步 API 中调用这些函数的。

它是否使用单个线程来接收来自 Zookeeper 的响应？所以我必须`user_data`在回调中添加互斥锁来保护。还是每次调用另一个异步 API 时都会检查回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:40:46.983

我测试了C mt库，发现zookeeper又为IO和补全创建了2个线程，补全函数是在补全线程中调用的，所以这些函数应该是顺序调用的。

```
2012-10-09 15:35:36,904:60028(0x7fff7d0f7180):ZOO_INFO@zookeeper_init@786: Initiating client connection, host=127.0.0.1:3000 sessionTimeout=5000 watcher=0x0 sessionId=0 sessionPasswd=<null> context=0x0 flags=0
2012-10-09 15:35:36,904:60028(0x7fff7d0f7180):ZOO_DEBUG@start_threads@221: starting threads...
2012-10-09 15:35:36,905:60028(0x10af45000):ZOO_DEBUG@do_completion@459: started completion thread
2012-10-09 15:35:36,905:60028(0x10aec2000):ZOO_DEBUG@do_io@367: started IO thread
2012-10-09 15:35:36,905:60028(0x7fff7d0f7180):ZOO_DEBUG@zoo_aset@2700: Sending request xid=0x5073d3c9 for path [/mm/mmidc] to 127.0.0.1:3000
2012-10-09 15:35:36,905:60028(0x10aec2000):ZOO_INFO@check_events@1703: initiated connection to server [127.0.0.1:3000]
2012-10-09 15:35:36,909:60028(0x10aec2000):ZOO_INFO@check_events@1750: session establishment complete on server [127.0.0.1:3000], sessionId=0x13a43632d85000f, negotiated timeout=5000
2012-10-09 15:35:36,909:60028(0x10aec2000):ZOO_DEBUG@check_events@1756: Calling a watcher for a ZOO_SESSION_EVENT and the state=ZOO_CONNECTED_STATE
2012-10-09 15:35:36,909:60028(0x10af45000):ZOO_DEBUG@process_completions@2107: Calling a watcher for node [], type = -1 event=ZOO_SESSION_EVENT
2012-10-09 15:35:36,910:60028(0x10aec2000):ZOO_DEBUG@process_sync_completion@1868: Processing sync_completion with type=1 xid=0x5073d3c9 rc=-101
zoo_set2: no node 
```

非常简单的测试代码，zookeeper服务器是一个独立的监听localhost:3000

```
 int main()
  {

    zoo_set_debug_level(ZOO_LOG_LEVEL_DEBUG);

    const char* host = "127.0.0.1:3000";

    zhandle_t *zh;
    clientid_t myid;
    zh = zookeeper_init(host, NULL, 5000, &myid, NULL, 0);

    struct Stat stat;
    const char* line = "/test";
    const char* ptr = "hello, world";
    int ret = zoo_set2(zh, line, ptr, strlen(ptr), -1, &stat);
    printf("zoo_set2: %s\n", zerror(ret));

  } 
```

实际上，这些在文档中都有解释。[http://zookeeper.apache.org/doc/r3.1.2/zookeeperProgrammers.html](http://zookeeper.apache.org/doc/r3.1.2/zookeeperProgrammers.html)

**C 绑定**

`The C binding has a single-threaded and multi-threaded library. The multi-threaded library is easiest to use and is most similar to the Java API. This library will create an IO thread and an event dispatch thread for handling connection maintenance and callbacks. The single-threaded library allows ZooKeeper to be used in event driven applications by exposing the event loop used in the multi-threaded library.`

# android - 错误插入到 sqlite 数据库错误代码 19 约束失败

> ID：12474198
> 
> 赞同：0
> 
> 时间：2012-09-18T09:32:15.607
> 
> 标签：android, android-sqlite

每次我尝试在数据库中插入新记录时，都会显示此错误。我知道我认为这是主副本的原因。我将主键设置为`AUTO INCREMENT`. 我该如何解决这个错误？

这是

**SQLHandler.java**

```
public class SQLHandler {
    public static final String KEY_ROOMMOVEHOLDER = "roommoveholder";
    public static final String KEY_ROOM = "room";

    public static final String KEY_ITEMMOVEHOLDER = "itemmoveholder";
    public static final String KEY_ITEMNAME = "itemname";
    public static final String KEY_ITEMVALUE = "itemvalue";
    public static final String KEY_ROOMHOLDER = "roomholder";

    public static final String KEY_MOVENAME = "movename";
    public static final String KEY_ID1 = "_id";
    public static final String KEY_ID2 = "_id";
    public static final String KEY_ID3 = "_id";
    public static final String KEY_ID4 = "_id";
    public static final String KEY_MOVEDATE = "movedate";

    private static final String DATABASE_NAME = "mymovingfriend";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_SORTANDPURGE = "sortandpurge";
    public static final String KEY_RESEARCH = "research";
    public static final String KEY_CREATEMOVINGBINDER = "createmovingbinder";
    public static final String KEY_ORDERSUPPLIES = "ordersupplies";
    public static final String KEY_USEITORLOSEIT = "useitorloseit";
    public static final String KEY_TAKEMEASUREMENTS = "takemeasurements";
    public static final String KEY_CHOOSEMOVER = "choosemover";
    public static final String KEY_BEGINPACKING = "beginpacking";
    public static final String KEY_LABEL = "label";
    public static final String KEY_SEPARATEVALUES = "separatevalues";
    public static final String KEY_DOACHANGEOFADDRESS = "doachangeofaddress";
    public static final String KEY_NOTIFYIMPORTANTPARTIES = "notifyimportantparties";

    private static final String DATABASE_TABLE1 = "movingname";
    private static final String DATABASE_TABLE2 = "movingrooms";
    private static final String DATABASE_TABLE3 = "movingitems";
    private static final String DATABASE_TABLE4 = "todolist";

    public static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE1 + " (" + 
            KEY_ID1 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_MOVEDATE + " TEXT NOT NULL, " + 
            KEY_MOVENAME + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_2 = "CREATE TABLE " + DATABASE_TABLE2 + " (" + 
            KEY_ID2 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ROOMMOVEHOLDER + " TEXT NOT NULL, " + 
            KEY_ROOM + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_3 = "CREATE TABLE " + DATABASE_TABLE3 + " (" + 
            KEY_ID3 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_ITEMNAME + " TEXT NOT NULL, " + 
            KEY_ITEMVALUE + " TEXT NOT NULL, " +
            KEY_ROOMHOLDER + " TEXT NOT NULL, " +   
            KEY_ITEMMOVEHOLDER + " TEXT NOT NULL);";

    public static final String CREATE_TABLE_4 = "CREATE TABLE " + DATABASE_TABLE4 + " (" + 
            KEY_ID4 + " INTEGER PRIMARY KEY AUTOINCREMENT," + 
            KEY_SORTANDPURGE + " TEXT NOT NULL, " + 
            KEY_RESEARCH + " INTEGER NOT NULL, " +
            KEY_CREATEMOVINGBINDER + " TEXT NOT NULL, " + 
            KEY_ORDERSUPPLIES + " TEXT NOT NULL, " +
            KEY_USEITORLOSEIT + " TEXT NOT NULL, " + 
            KEY_TAKEMEASUREMENTS + " TEXT NOT NULL, " +
            KEY_CHOOSEMOVER + " TEXT NOT NULL, " + 
            KEY_BEGINPACKING + " TEXT NOT NULL, " +
            KEY_LABEL + " TEXT NOT NULL, " + 
            KEY_SEPARATEVALUES + " TEXT NOT NULL, " +
            KEY_DOACHANGEOFADDRESS + " TEXT NOT NULL, " + 
            KEY_NOTIFYIMPORTANTPARTIES + " TEXT NOT NULL);";

    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelper extends SQLiteOpenHelper{

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE_1);
            db.execSQL(CREATE_TABLE_2);
            db.execSQL(CREATE_TABLE_3);
            db.execSQL(CREATE_TABLE_4);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE1);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE2);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE3);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE4);
            onCreate(db);
        }
    }

    public SQLHandler(Context c){
        ourContext = c;
    }

    public SQLHandler open() throws SQLException{
        ourHelper = new DbHelper(ourContext);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){
        ourHelper.close();
    }

    public long createMove(String smovename){
        ContentValues cv = new ContentValues();
        cv.put(KEY_MOVENAME, smovename);
        return ourDatabase.insert(DATABASE_TABLE1, null, cv);
    }

    public long addRooms(String sroommoveholder, String sroom){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ROOMMOVEHOLDER, sroommoveholder);
        cv.put(KEY_ROOM, sroom);
        return ourDatabase.insert(DATABASE_TABLE2, null, cv);
    }

    public long addItems(String sitemmoveholder, String sroomholder, String sitemname, String sitemvalue){
        ContentValues cv = new ContentValues();
        cv.put(KEY_ITEMMOVEHOLDER, sitemmoveholder);
        cv.put(KEY_ROOMHOLDER, sroomholder);
        cv.put(KEY_ITEMNAME, sitemname);
        cv.put(KEY_ITEMVALUE, sitemvalue);
        return ourDatabase.insert(DATABASE_TABLE3, null, cv);
    }

    public long todoList(String todoitem){
        ContentValues cv = new ContentValues();
        cv.put(todoitem, "Done");
        return ourDatabase.insert(DATABASE_TABLE4, null, cv);
    }

    public Cursor getMove(){
        String[] columns = new String[]{KEY_ID1, KEY_MOVENAME};
        Cursor cursor = ourDatabase.query(DATABASE_TABLE1, columns, null, null, null, null, null);
        return cursor;
    }

} 
```

和

**ListMovingNames.java**

```
public class ListMovingNames extends Activity {
    ListView MoveList;
    SQLHandler SQLHandlerview;
    Cursor cursor;
    Button addMove;
    EditText etAddMove;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selectorcreatemove);

        addMove = (Button) findViewById(R.id.bAddMove);
        etAddMove = (EditText) findViewById(R.id.etMoveName);

        MoveList = (ListView) findViewById(R.id.lvMoveItems);
        SQLHandlerview = new SQLHandler(this);

        SQLHandlerview = new SQLHandler(ListMovingNames.this);
        SQLHandlerview.open();

        cursor = SQLHandlerview.getMove();
        startManagingCursor(cursor);

        String[] from = new String[]{SQLHandler.KEY_MOVENAME};
        int[] to = new int[]{R.id.text};

        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
        MoveList.setAdapter(cursorAdapter);
        SQLHandlerview.close();

        addMove.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                    try {
                        String ssmoveName = etAddMove.getText().toString();
                        SQLHandler entry = new SQLHandler(ListMovingNames.this);
                        entry.open();
                        entry.createMove(ssmoveName);
                        entry.close();
                    } catch (SQLException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
            }
        });
    }

} 
```

有什么方法吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:48:07.203

您正在尝试在不设置“movedate”的情况下将一个项目插入表 1，它不能为空......我认为这是它困扰你的约束......

编辑：试试这个方法，看看它是否有效

```
public long createMove(String smovename){
    ContentValues cv = new ContentValues();
    cv.put(KEY_MOVENAME, smovename);
    cv.put(KEY_MOVEDATE, "something");
    return ourDatabase.insert(DATABASE_TABLE1, null, cv);
} 
```

# core-data - 将 Core Data 持久存储 (SQLite) 设置为 NORMAL 锁定模式

> ID：12474203
> 
> 赞同：1
> 
> 时间：2012-09-18T09:32:26.900
> 
> 标签：core-data, sqlite, nspersistentstore

我正在构建一个应用程序原型，其中持久存储通过 AFP 在“服务器”机器（同一个 LAN）上使用 SQLite。但是，我无法从我的应用程序的 2 个不同实例连接到商店。

我在持久存储协调器上设置了 SQLite pragma 设置（与锁定相关），如下所示：

```
 NSPersistentStoreCoordinator *coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:mom];

NSMutableDictionary *pragmaOptions = [NSMutableDictionary dictionary];
[pragmaOptions setObject:@"NORMAL" forKey:@"locking_mode"];
NSDictionary *storeOptions = [NSDictionary dictionaryWithObject:pragmaOptions forKey:NSSQLitePragmasOption];

if (![coordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:url options:storeOptions error:&error]) {
    [[NSApplication sharedApplication] presentError:error];
    return nil;
} 
```

我在尝试从第二个客户端连接到商店时收到的错误消息（即当第一个客户端已经成功连接时）是：

> 错误：sqlite 数据库被锁定，因为它正在被另一台主机使用，该主机在 .../TestDBApp.storedata 上持有主机独占锁；此主机 UID... 无法覆盖主机独占锁，直到另一个主机 UID... 释放其对 .../.TestDBApp.storedata-conch 的锁

难道我做错了什么？

使用 Core Data 和 SQLite 是否可以从 2 个客户端访问同一个商店？

这是 Core Data 和/或 SQLite API 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T14:14:22.990

据我所知，Core data 将使用独占锁模式进行保存。我建议您将参数“-com.apple.CoreData.SQLDebug 1”传递给您的应用程序。如果您在控制台中找到“BEGIN EXCLUSIVE”，我猜您的设置会被 Core Data 忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:17:19.660

SQLite 不允许一个数据库文件有多个写锁。任何更改数据的事务或应用程序显式请求写入锁时都会使用写锁。

显然，Core Data 连接持有一个写事务或一个写锁打开。

# optimization - 如何在我的 solr 架构中设置默认字段列表？

> ID：12474206
> 
> 赞同：1
> 
> 时间：2012-09-18T09:32:40.443
> 
> 标签：optimization, solr, schema

我有一个包含相当大的文本字段的架构。

我已经对其进行了 gzip 压缩并启用了延迟加载，但它仍会被获取，除非每个使用 solr 的客户端都明确设置字段列表 (fl) 参数。

在没有字段列表参数的情况下进行查询时，如何配置 solr 以从结果中省略大的压缩文本字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:47:54.860

最简单的方法是将字段列表添加到 requestHandler。假设您使用的是默认`/select`请求处理程序，您需要修改 solrconfig.xml，将选项添加到requestHandler`fl`的默认值列表中。`/select`请参阅下面的示例。

```
 <requestHandler name="/select" class="solr.SearchHandler">
   <!-- default values for query parameters can be specified, these
           will be overridden by parameters in the request
    -->
   <lst name="defaults">
     <str name="echoParams">explicit</str>
     <int name="rows">10</int>
     <str name="fl">field1,field2,field3</str>
   </lst>

  ....

 </requestHandler> 
```

所以在这个例子中，我设置了`fl`参数，所以查询将默认返回 field1、field2 和 field3。这些将是查询时返回的字段，除非请求指定了 fl 参数，然后将返回发送的任何字段。

这些默认值可以根据 requestHandler 设置，因此如果您使用不同的 requestHandler，则只需根据需要修改配置。

希望这可以帮助。

# css - 容器固定宽度。中心 div 动态宽度。希望左右 div 平均填充剩余宽度

> ID：12474212
> 
> 赞同：1
> 
> 时间：2012-09-18T09:32:58.960
> 
> 标签：css, html, dynamic, autofill

有三列..所有三列的组合宽度是固定的..第二（中心）列将具有动态内容..我需要左右列来平均填充剩余空间（容器宽度 - 中心列动态宽度）。

示例：http: [//jsfiddle.net/htKje/](http://jsfiddle.net/htKje/)

```
<div class="container">
   <div class="bg"></div>
   <div>Lorem Ipsum</div>
   <div class="bg"></div>
</div>

CSS :
.container { width:500px; }
.bg {backgrould:#CCC; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:37:55.927

如果您只需要左右列来设置背景，那么很可能您甚至根本不需要它们。

只需设置`background`on the `.container`，提供相同的 container `text-align: center`，制作中心列`inline-block`并重置`background`and`text-align`就可以了。

[**演示**](http://dabblet.com/gist/3742502)

**HTML**：

```
<div class='container'>
    <div class='c'>booooo add remove text here</div>
</div> 
```

**CSS**：

```
.container {
    background: #ccc;
    text-align: center;
}
.c {
    display: inline-block;
    background: white;
    text-align: left;
} 
```

# c# - 在 c# 2010 中使用 Excel 14.0 DLL 遇到问题

> ID：12474214
> 
> 赞同：0
> 
> 时间：2012-09-18T09:33:03.563
> 
> 标签：c#, excel, dll

> 当我尝试构建我的 C# 应用程序时，我遇到了以下问题。我想将数据导出到 Office 2010 或 2007。错误如下

```
Retrieving the COM class factory for component with CLSID {00020819-0000-0000-C000-000000000046}
     failed due to the following error: 80040154 Class not registered 
(Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:04:35.647

这不是与构建相关的错误，只有在尝试*运行*程序时才会得到它。获得它的两个最常见的原因：

*   您的计算机上没有安装 Office
*   你有一个 64 位版本的 Windows 并且 EXE 项目以 AnyCPU 为目标

后一种事故的解决方法是右键单击您的 EXE 项目，属性，将平台目标设置更改为“x86”。如果您实际安装了 64 位版本的 Office 2010，则执行相反的操作，将 x86 更改为 AnyCPU。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T13:47:48.143

经过 3 到 4 个小时的奋斗，我找到了有关上述问题的解决方案。问题是我添加的是 COM 而不是 .net 的引用。当我添加 .net excel 参考时，这个问题就解决了。无论如何，我已经安装了 PIA 并且我的机器是 x86。

# android - 将图像向右移动

> ID：12474221
> 
> 赞同：0
> 
> 时间：2012-09-18T09:33:22.220
> 
> 标签：android

朋友我有一张图片，我想把这张图片移到右边。请在下面找到必要的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:background="@drawable/error"
        android:scaleType="centerCrop" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingLeft="10dp" >

        <TextView
            android:id="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#000000"
            android:textSize="16sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/detail"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/data"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#000000" />
    </LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/516eb3fe2c24b278582651c4e5a1e8d2.png) 我希望将其移至`imageView1`右侧提前感谢您的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:39:03.483

检查这个

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:layout_weight="1"
    android:paddingLeft="10dp" >

    <TextView
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/detail"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/data"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000" />
</LinearLayout>
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:background="@drawable/ic_launcher"
    android:scaleType="centerCrop" /> 
```

**编辑：**将 ImageView 背景更改为`android:background="@drawable/error"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:51:51.543

这应该有效。更改第二个线性布局 layout_width="wrap_content"

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:layout_weight="1"
    android:paddingLeft="10dp" >

    <TextView
        android:id="@+id/title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/detail"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/data"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#000000" />
</LinearLayout>
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:background="@drawable/error"
    android:scaleType="centerCrop" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:53:02.117

为此使用 RelativeLayout 并使用下面的 XML 代码来解决您的问题。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toLeftOf="@+id/imageView1"
        android:orientation="vertical"
        android:paddingLeft="10dp" >

        <TextView
            android:id="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Title"
            android:textColor="#000000"
            android:textSize="16sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/detail"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Detail"
            android:textColor="#000000" />

        <TextView
            android:id="@+id/data"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Data"
            android:textColor="#000000" />
    </LinearLayout>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentRight="true"
        android:background="@drawable/error"
        android:scaleType="centerCrop" />

</RelativeLayout> 
```

# android - 捕获一个空异常：可能吗？

> ID：12474224
> 
> 赞同：1
> 
> 时间：2012-09-18T09:33:30.380
> 
> 标签：android, exception, android-emulator, adt

我正在尝试从源代码运行这个[Android OCCI 客户端。](https://github.com/r2ad/R2AD-Android-Cloud-Client)我无法登录，因为我得到一个`null`我无法调试的异常。有罪的方法如下：

```
protected HttpResponse getResponse(String url) {
    HttpResponse result = null;
    try {           
        DefaultHttpClient httpclient = new DefaultHttpClient();
        String username = getAccount().getUsername();           
        if (username != null && username.length() > 0) {
            httpclient.getCredentialsProvider().setCredentials(new AuthScope(null, -1),
                new UsernamePasswordCredentials(username, getAccount().getUserToken()));
            Log.d(toString(), "Using Credentials " + username + " " + getAccount().getUserToken());
        } 
        HttpGet get = generateHeader(url);
        HttpResponse httpResp = httpclient.execute(get); //BOOM
        int response = httpResp.getStatusLine().getStatusCode();
        Log.d(toString(), url + " HttpResponse is " + response);
        if (response == 200 || response == 204) {
            result = httpResp;
        } 
    } catch (Throwable t) {
        Log.e("CloudServiceAdapter","Error connecting", t); /I inserted this
    } 
    return result;      
} 
```

最初，catch 块什么也没做。我添加了一条日志语句，但我只得到“连接错误”作为输出。调试器说`t`是`null`，这在 Java 中是不可能的。我试图更改`Throwable`为`Exception`但相同。还有其他与此问题相关的问题，但没有任何帮助。

日志中唯一有趣的警告是

```
09-18 09:17:27.642: W/dalvikvm(1113): VFY: unable to resolve static method 1818: Lorg/apache/commons/codec/binary/Base64;.encodeBase64String ([B)Ljava/lang/String; 
```

我尝试配置构建路径，检查“订购和导出”中的所有 JAR（它们位于项目目录的 /libs 中），但没有成功。

我读到外部 JAR 必须由 处理`dx`，[**但**](http://developer.android.com/tools/help/index.html)Eclipse ADT 应该自己运行它。

有任何想法吗？

# c++ - 如何使用 C++ STL 将 STDIN 转储到文件中？

> ID：12474225
> 
> 赞同：-5
> 
> 时间：2012-09-18T09:33:39.837
> 
> 标签：c++, stl

我正在编写这个程序，以便解决这个问题：[为什么我在 subversion pre-revprop-change py 脚本中尝试 sys.stdin.read() 时得到“错误的文件描述符”？](https://stackoverflow.com/q/12453354)

笔记：

*   来自 STDIN 的内容可能是任意二进制数据。
*   请使用 C++ STL 函数、iostream、ifstream 等。
*   如果文件创建/写入失败，我想捕获异常以了解情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:05:53.237

大多数系统上最短的版本，可能也是最快的版本是这样的：

```
#include <fstream>
#include <iostream>
int main() {
    std::ofstream("cin.txt", std::ios_base::binary) << std::cin.rdbuf();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:36:31.270

我认为复制方法是你想要的：

```
template<class InputIterator, class OutputIterator>
OutputIterator copy ( InputIterator first, InputIterator last, OutputIterator result )
{
  while (first!=last) *result++ = *first++;
  return result;
} 
```

例如：

```
copy(istream_iterator<string>(cin)
       , istream_iterator<string>()
       , ostream_iterator<string>(fout, "\n")); 
```

这里的 fout 是一个文件流迭代器。

# google-app-engine - 使用 djangoappengine 尝试 Django 教程

> ID：12474226
> 
> 赞同：1
> 
> 时间：2012-09-18T09:33:41.567
> 
> 标签：google-app-engine, django-models, djangoappengine

我正在尝试使用 djangoappengine 实现 Django 的投票应用教程。

我采取的步骤：
1）在工作区文件夹中复制了测试应用程序。

2) 复制 django-toolbox、dbindexer、django、djangoappengine、autoload，按照网站[http://www.allbuttonspressed.com/projects/djangoappengine](http://www.allbuttonspressed.com/projects/djangoappengine)上的指示，在“test-app”文件夹中。

3）在Eclipse中启动了一个新项目作为PyDev Google App Engine Project，并将test-app作为工作文件夹。

4) 现在我使用终端在 GAE 上部署了应用程序

> $ python manage.py 部署

在 x.appspot.com 上获得了“It Works”页面。

5）现在我尝试按照教程中的指示制作一个民意调查应用程序

> python manage.py startapp 民意调查

文件夹“polls”是用四个文件创建的

6）我编辑了民意调查的model.py文件并添加了tutorial-1中提到的代码然后我运行了命令-

> $ python manage.py 同步数据库

它没有显示错误，但没有创建新的投票表。我在settings.py的'Installed_Apps'下添加了'polls'
我认为问题出在数据库声明中，它是dbindexer而不是django.db.backends.sqlite3，但我不确定。

当我在shell中运行它时也有错误

```
>>> from django.utils import timezone
Traceback (most recent call last):
File "<console>", line 1, in <module>
ImportError: cannot import name timezone 
```

我还有一些疑问，但在解决上述问题后我会提到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:38:20.567

Django 教程是为最新版本的 django 编写的。据我记得，时区是在 1.3 左右添加到 django.utils 中的？你能检查一下你有什么版本的Django吗？当前版本是 1.41。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:01:38.993

根据this page for App Engine 3rd Party support in Python 2.7

[https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

App Engine 仅支持以下版本：

“1.2”

“1.3”

“最新的”

所以我认为你不能使用 1.41。

这里有关于 Django 使用的进一步说明：

[https://developers.google.com/appengine/docs/python/tools/libraries27#django](https://developers.google.com/appengine/docs/python/tools/libraries27#django)

> 要将 Django 与 NDB 存储 API 一起使用，请将“google.appengine.ext.ndb.django_middleware.NdbDjangoMiddleware”添加到 Django settings.py 文件的 MIDDLEWARE_CLASSES 条目中。

你的 app.yaml 中有这样的条目吗？

```
libraries:
- name: django
  version: "1.3" 
```

你做过吗？

> 要将 Django 与 NDB 存储 API 一起使用，请将“google.appengine.ext.ndb.django_middleware.NdbDjangoMiddleware”添加到 Django settings.py 中的 MIDDLEWARE_CLASSES 条目中

# c# - 在下拉列表中的某些选项上禁用事件/刷新

> ID：12474241
> 
> 赞同：1
> 
> 时间：2012-09-18T09:34:28.113
> 
> 标签：c#, javascript, asp.net, events, html-select

这是我的 ASP.NET 页面的一部分。

```
<asp:DropDownList ID="DropDownList1" runat="server"  
            OnChange="return ListChange(this.value)" 
            onselectedindexchanged="DropDownList1_SelectedIndexChanged1" 
            AutoPostBack="True" >
            <asp:ListItem Selected="True">Today</asp:ListItem>
            <asp:ListItem>Yesterday</asp:ListItem>
            <asp:ListItem Value="1">Specific Day</asp:ListItem>
            <asp:ListItem>All Time</asp:ListItem>
</asp:DropDownList>
<asp:TextBox ID="txtDate" runat="server"></asp:TextBox> 
```

这是Javascript。

```
function ListChange(txtVal) {
   if (txtVal != 1 ) {
       document.getElementById("txtDate").setAttribute("style", "visibility:hidden;");
       return true;
   }
   else {
       document.getElementById("txtDate").setAttribute("style", "visibility:visible;");
       return false;
   }
} 
```

这里的目标是根据用户选择的选项显示某些数据。在特定日期选项中，会向用户显示一个文本框以通过 javascript 插入日期。但是`onselectedindexchanged`也会引发调用服务器的事件。我想在选择“特定日期”选项时停止事件，但在选择其他选项时运行。

`OnChange="return ListChange(this.value)"`使用带有按钮的表单时，代码不会像过去那样停止事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:27:45.527

首先尝试检查您的 javascript 函数中的值。

如果它没有显示选择值，请使用以下代码

```
var index = document.getElementById(selectItem).selectedIndex;

    alert("value =" + document.getElementById(selectItem).value);
    alert("text =" + document.getElementById(selectItem).options[index].text); 
```

或使用 jQuery

$("#yourdropdownid option:selected").text();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:54:16.837

您不需要同时调用两个单独的函数。这是一些 jquery 代码，只需几行就可以解决问题。

```
$(document).ready(function(){
    $('#DropDownList1').change(fnction(){
        if($(this).text() != 'Specific Day') {
          document.getElementById("txtDate").setAttribute("style", "visibility:hidden;");
           return true;
        } else {
          document.getElementById("txtDate").setAttribute("style", "visibility:visible;");
          return false;
        } 
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:58:01.773

默认情况下，如果您给 AutoPostBack =true，ASP.Net 将回发。

它不考虑返回值。

下面是执行时呈现的代码。它使用 settimeout 并执行 _doPostBack 来提交表单

```
onchange="return ListChange(this);setTimeout(&#39;__doPostBack(\&#39;ctl00$MainContent$DropDownList1\&#39;,\&#39;\&#39;)&#39;, 0)" 
```

我们需要考虑通过设置类似 Page_IsValid=false 的标志来停止表单提交；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:44:35.987

我建议您使用 .net 代码进行显示和隐藏。

例如在 VB.net

将以下代码放入 DropDownList1_SelectedIndexChanged1 子中。

```
 If DropDownList1.SelectedValue = "1" Then
        txtDate.Visible = True
    Else
        txtDate.Visible = False
    End If 
```

而不是有 3 个不同的点击/更改事件。

然后删除 JS 和 on change 和 on client click 事件，只留下 onselectedindexchanged="DropDownList1_SelectedIndexChanged1"

**更新：**

如果您想避免代码中某些事件的回发，请执行以下操作：

如果 isPostBack = True

//不要填写表单的东西

别的

//填写表格的东西

万一

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T09:44:58.200

这是您可以使用的选项之一。

1.  从标记中删除选定的索引更改事件。
2.  在更改事件上，检查您的验证是否正确运行。
3.  如果他们已经运行 make ajax 请求并做你的事情。

# java - 串口设备的时序响应速度

> ID：12474242
> 
> 赞同：0
> 
> 时间：2012-09-18T09:34:29.287
> 
> 标签：java

我通过蓝牙与串行设备通信。我向它发送 pid，它以数据响应响应我。我通过串行通信与他进行了一次请求-响应。我想测量我在一秒钟内收到多少响应。我认为我必须知道我提出请求的时刻以及我收到响应并做出改变的时刻。结果（称为增量）是设备的响应时间。最后我必须做 1000ms/delta。

怎么计算呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:35:52.123

`System.currentTimeMillis()`您可以使用毫秒或纳秒来获得之前/之后的时间`System.nanoTime()`。

笔记：

> 此方法提供纳秒级精度，但不一定提供纳秒级精度

（来自[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:38:41.607

长 st = System.currentTimeMillis();

//发送/接收

Long et = System.currentTimeMillis();

长 t = et - st; //发送/接收消耗的时间

# jquery - 如何获取 JSON 对象的某些部分并将它们作为选项添加到 SELECT？

> ID：12474249
> 
> 赞同：0
> 
> 时间：2012-09-18T09:34:52.997
> 
> 标签：jquery, html, ajax, json

我有一个包含大量信息的 json 文件，

```
{
    "ListProductsResponse": {
        "Products": [{
            "VatAmount": 0,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "50 kr",
            "ExternalProductID": "TELIA",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "50 kr",
                "FixedDiscount": 0,
                "Price": 5000,
                "ValidFrom": "\/Date(1293836400000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK010TELIASEKONTANT50",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-01-01",
            "ValidTo": "2061-11-19",
            "Value": 5000
        }, {
            "VatAmount": 0,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "100 kr",
            "ExternalProductID": "TELIA",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "100 kr",
                "FixedDiscount": 0,
                "Price": 10000,
                "ValidFrom": "\/Date(1294786800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK020TELIASEKONTANT100",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-01-12",
            "ValidTo": "2061-01-12",
            "Value": 10000
        }, {
            "VatAmount": 0,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "150 kr",
            "ExternalProductID": "TELIA",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "150 kr",
                "FixedDiscount": 0,
                "Price": 15000,
                "ValidFrom": "\/Date(1294786800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK030TELIASEKONTANT150",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-01-12",
            "ValidTo": "2061-01-12",
            "Value": 15000
        }, {
            "VatAmount": 0,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "200 kr",
            "ExternalProductID": "TELIA",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "200 kr",
                "FixedDiscount": 0,
                "Price": 20000,
                "ValidFrom": "\/Date(1294786800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK040TELIASEKONTANT200",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-01-12",
            "ValidTo": "2061-01-12",
            "Value": 20000
        }, {
            "VatAmount": 0,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "300 kr",
            "ExternalProductID": "TELIA",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "300 kr",
                "FixedDiscount": 0,
                "Price": 30000,
                "ValidFrom": "\/Date(1294786800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK050TELIASEKONTANT300",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-01-12",
            "ValidTo": "2061-01-12",
            "Value": 30000
        }, {
            "VatAmount": 2500,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "Halvårskort SMS 299 kr",
            "ExternalProductID": "TELIA-6MSMS",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "Halvårskort SMS 299 kr",
                "FixedDiscount": 0,
                "Price": 29900,
                "ValidFrom": "\/Date(1323298800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK060TELIASEHALVAARSMS",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-12-08",
            "ValidTo": "2061-12-09",
            "Value": 29900
        }, {
            "VatAmount": 2500,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "Halvårskort Mobilsurf 299 kr",
            "ExternalProductID": "TELIA-6MDATA",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "Halvårskort Mobilsurf 299 kr",
                "FixedDiscount": 0,
                "Price": 29900,
                "ValidFrom": "\/Date(1326927600000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK070TELIASEHALVAARMOBSURF",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2012-01-19",
            "ValidTo": "2062-01-19",
            "Value": 29900
        }, {
            "VatAmount": 2500,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "Årskort Mobilsurf 499 kr",
            "ExternalProductID": "TELIA-YDATA",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "Årskort Mobilsurf 499 kr",
                "FixedDiscount": 0,
                "Price": 49900,
                "ValidFrom": "\/Date(1294786800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK080TELIASEKSURF1YEAR",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-01-12",
            "ValidTo": "2061-01-12",
            "Value": 49900
        }, {
            "VatAmount": 2500,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "Årskort SMS & Surf 899 kr",
            "ExternalProductID": "TELIA-YCOMBO",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "Årskort SMS & Surf 899 kr",
                "FixedDiscount": 0,
                "Price": 89900,
                "ValidFrom": "\/Date(1294786800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK090TELIASEKCOMBO1YEAR",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-01-12",
            "ValidTo": "2061-01-12",
            "Value": 89900
        }, {
            "VatAmount": 2500,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "Årskort Navigator & Surf 699",
            "ExternalProductID": "TELIA-YNAV",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "Årskort Navigator & Surf 699",
                "FixedDiscount": 0,
                "Price": 69900,
                "ValidFrom": "\/Date(1323298800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK100TELIASEARSKORT",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-12-08",
            "ValidTo": "2061-12-09",
            "Value": 69900
        }, {
            "VatAmount": 2500,
            "VatFormat": "Percent",
            "Bonus": {
                "AdditionalValue": 0,
                "Description": null,
                "ValidFrom": "\/Date(-1807877931046+0200)\/",
                "ValidTo": "\/Date(4503555668953+0200)\/"
            },
            "CurrencyIsoString": "SEK",
            "Description": "Årskort SMS  499 kr",
            "ExternalProductID": "TELIA-YSMS",
            "Prices": {
                "CurrencyIso": "SEK",
                "Description": "Årskort SMS  499 kr",
                "FixedDiscount": 0,
                "Price": 49900,
                "ValidFrom": "\/Date(1294786800000+0100)\/",
                "ValidTo": "\/Date(-62135596800000+0100)\/"
            },
            "ProductID": "KK110TELIASEKSMS1YEAR",
            "ProviderId": "TELIA",
            "UnitType": null,
            "ValidFrom": "2011-01-12",
            "ValidTo": "2061-01-12",
            "Value": 49900
        }]
    },
    "Header": {
        "AcquirerID": "OKB",
        "AgreementID": "92010002",
        "ClientIP": "77.40.160.226",
        "MerchantID": "Test TopupService",
        "TransmissionTime": "2012-10-10 00:00:00"
    },
    "Status": {
        "OperationStatus": "0",
        "OperationStatusDesc": "",
        "TransactionStatus": 0,
        "TransactionStatusDesc": "OK"
    }
} 
```

我需要获取每个产品的 ProductID 和 Description 并用它们填充选择/选项列表。

```
<div>
      <button id="getButton">Get</button>
      <select id="populate">
          <option>control</option>
      </select>
</div> 
```

这是简单的 HTML，我尝试了以下 jQuery：

```
$(document).ready(function() {
    //attach a jQuery live event to the button
    $('#getButton').live('click', function() {
        $.getJSON('json.json', function(data) {
            $.each(data, function(entryIndex, entry) {
                items.push('<option value="' + entry['ProductID'] + ">' + entry ['Description'] + '</option>');
  });
        });
    });
});​ 
```

我也尝试了不同版本的代码，但无济于事。我错过了什么重要的东西吗？可能是json格式错误吗？

值得注意的是，我以前从未使用过任何 json/ajax，所以这是全新的领域 :)

谢谢。

完整的 json 以及脚本和 html 也可以在这里找到。

[http://jsfiddle.net/Kyle_Sevenoaks/dkZTb/](http://jsfiddle.net/Kyle_Sevenoaks/dkZTb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:38:20.907

有几个问题：

1.  用于[`append()`](http://api.jquery.com/append/)添加`options`到`#populate`下拉列表。`push`用于向数组添加元素；
2.  您的产品包含在`Products`json 对象的数组中。因此，不是迭代，而是`data`迭代`data.ListProductsResponse.Products`；
3.  有一个小的语法错误，因为您没有`">`在`.each()`.

这是一个固定的例子：

```
var $select = $("#populate");
$.each(data.ListProductsResponse.Products, function(entryIndex, entry) {
  $select.append('<option value="' + entry.ProductID + '">' + entry.Description + '</option>');
}); 
```

**[演示](http://jsfiddle.net/sk4hd/)**。

# java - Java LinkedList 的 ConcurrentModificationException

> ID：12474251
> 
> 赞同：1
> 
> 时间：2012-09-18T09:35:06.887
> 
> 标签：java, iterator, linked-list

我有对象的 LinkedList 和一个迭代器。我知道当您在运行迭代器时尝试修改列表时会抛出这个 ConcurrentModificationException 。但就我而言，我不明白这个修改是在哪里进行的。

迭代器如下所示：

```
private static void insertTasks(Task t) {
    if(eventQueue.size() == 0) {
        eventQueue.addFirst(tsk);
        return;
    }

    int pos = 0;
    while (itr.hasNext()){
   //The line below throws the exception

        if (t.getArrivalTime() <= itr.next().getArrivalTime() ) 
        {           
            break;
        }
        pos++;
    }
} 
```

我`insertTasks`从另一种方法调用此方法，如下所示：

```
tsk = null;
tsk = new Task(1,"P1",1,4.0f,1.5f,0.0f,8.0f);
insertTasks(tsk);

tsk = null;
tsk = new Task(0,"P0",2,5.0f,2.5f,1.0f,10.0f);
insertTasks(tsk); 
```

`getArrivalTime`对象中的看起来`Task`像：

```
public float getArrivalTime() { return arrivalTime; } 
```

我的问题是，我在哪里做这个修改？我运行它的`while`循环`iterator`没有做任何修改。可以 ？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:38:35.163

我认为问题在于这`itr`是您班级中的一个静态字段，这会造成问题，因为您`eventQueue`在第二次调用`insertTasks()`.

避免静态字段...编程自己以害怕它们并尽可能避免它们:)。他们邪恶，OO不友好。

# cakephp - 我如何在 cakephp 中设置 orderby

> ID：12474258
> 
> 赞同：0
> 
> 时间：2012-09-18T09:35:19.007
> 
> 标签：cakephp, sql-order-by

这是我的代码，我怎么可以给 orderby 。

`$this->set('added', $this->paginate('TravancoMarketing', array('status = 0', 'assigned_by = '.$user_level)));`

在这里我想给`order by TravancoMarketing.id DESC`

我怎么给这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:48:27.547

您可以将其作为默认订单添加到 TravancoMarketing 模型：

```
class TravancoMarketing {

    public $order = array('TravancoMarketing.id'=>'DESC');

} 
```

或分页查询本身：

```
$this->paginate = array(
    'conditions'=>array(
        'TravancoMarketing.status'=>0,
        'TravancoMarketing.assigned_by'=>$user_level
    ),
    'order'=>array(
        'TravancoMarketing.id'=>'DESC'
    )
);

$this->set('added', $this->paginate('TravancoMarketing')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:48:39.723

在您的控制器中，您应该声明如下内容：

```
public $paginate = array(
        'order' => array(
            'TravancoMarketing.id' => 'DESC'
        )
    ); 
```

# android - TextureView 中的抗锯齿

> ID：12474260
> 
> 赞同：7
> 
> 时间：2012-09-18T09:35:26.920
> 
> 标签：android, surfaceview

我尝试使用 a`SurfaceView`和 a播放相同的视频，`TextureView`并注意到使用 渲染的图像`TextureView`比使用`SurfaceView`.

这是什么原因？有没有办法配置渲染`TextureView`看起来更好？

是这样使用的`TextureView`：

```
 TextureView textureView = new TextureView(this);
    textureView.setSurfaceTextureListener(new SurfaceTextureListener() {

        @Override
        public void onSurfaceTextureAvailable(SurfaceTexture surfaceTexture, int width, int height) {
            Log.i("test", "onSurfaceTextureAvailable()");
            MediaPlayer player = MediaPlayer.create(TestActivity.this, Uri.parse(VIDEO_URL));
            Surface surface = new Surface(surfaceTexture);
            player.setSurface(surface);
            player.start();
        }

        @Override
        public void onSurfaceTextureUpdated(SurfaceTexture surface) { 
            Log.i("test", "onSurfaceTextureUpdated()");
        }

        @Override
        public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) { 
            Log.i("test", "onSurfaceTextureSizeChanged()");
        }

        @Override
        public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
            Log.i("test", "onSurfaceTextureDestroyed()");
            return false;
        }
    });
    setContentView(textureView); 
```

对于`SurfaceView`：

```
 SurfaceView surfaceView = new SurfaceView(this);
    surfaceView.getHolder().addCallback(new Callback() {

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            Log.i("test", "surfaceCreated()");
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) { 
            Log.i("test", "surfaceDestroyed()");
        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) { 
            Log.i("test", "surfaceChanged()");
            MediaPlayer player = MediaPlayer.create(TestActivity.this, Uri.parse(VIDEO_URL));
            player.setSurface(holder.getSurface());
            player.start();
        }
    });
    setContentView(surfaceView); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T08:50:29.043

好吧，似乎在 TextureView 上应用缩放（不是 1）会产生我正在寻找的“平滑”效果。

```
textureView.setScaleX(1.00001f); 
```

这听起来像一个奇怪的黑客......但它的工作原理。挖掘改变渲染方面的缩放所做的事情会很有趣......

# android - Eclipse SVN 在提交时冻结

> ID：12474272
> 
> 赞同：2
> 
> 时间：2012-09-18T09:36:11.280
> 
> 标签：android, eclipse, svn

当我尝试使用 SVN 提交时，5 次中有 1 次会冻结。

![在此处输入图像描述](../Images/524cef56ce8f7478b1ab31d6ad0493fa.png)

我得到这个弹出窗口。它永远留在那里。没有其他进展。

单击取消仍将其留在 Limbo 中。无法取消。

治愈它的唯一方法是结束任务日食并重新开始。它非常烦人。

有谁知道如何修理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:22:04.503

解决冻结的 SVN 事务的几个步骤：

1.  如果您使用 HTTP/HTTPS 作为 SVN 传输，当发生这种情况时，您可以尝试在浏览器中访问原始 URL。这将确认网络和服务器不是问题。
2.  更新您的 IDE 和 SVN 提供程序总是有帮助的，您可以获得修复和新功能。我很喜欢让一切都保持最新状态。在您的情况下，从 3.7.2 更新到 Eclipse Juno 可能会有所帮助。

另请注意，明天（9 月 27 日）是 Juno SR1 的发布日，它带来了自己的一系列错误修复和性能增强 - 不要忘记更新 :-)

# c# - 两个相似的 Datatable 对象之间的类型转换

> ID：12474274
> 
> 赞同：1
> 
> 时间：2012-09-18T09:36:15.810
> 
> 标签：c#, .net, casting, type-conversion

我有带有同步框架的 .NET 项目和两个单独的 MS SQL 和 Compact SQL 数据集。在我的基类中，我有一个通用的 DataTable 对象。在我的派生类中，我根据应用程序是在线还是离线操作，将 Typed DataTable 分配给通用对象：例如：

```
if (online)
    _dataTable = new MSSQLDataSet.Customer;
else
    _dataTable = new CompactSQLDataSet.Customer; 
```

现在，在我的代码中的每个地方，我都必须检查并根据当前的网络模式进行转换，如下所示：

```
public void changeCustomerID(int ID)
{
    if (online)
        (MSSQLDataSet.CustomerDataTable)_dataTable)[i].CustomerID = value;
    else
        (CompactMSSQLDataSet.CustomerDataTable)_dataTable)[i].CustomerID = value;
 } 
```

但我认为这不是很有效，我相信可以通过在运行时动态获取 _dataTable 的类型来以更智能的方式仅使用一行代码。

我的问题是在设计时，为了访问诸如“CustomerID”之类的数据表属性，它必须转换为 MSSQLDataSet.CustomerDataTable 或 CompactMSSQLDataSet.CustomerDataTable。

有没有办法让函数或运算符将 _datatable 转换为其运行时类型，但仍然能够使用两种类型之间相同的设计时属性？就像是：

```
((aType)_dataTable)[i].CustomerID = value;
//or 
GetRuntimeType(_dataTable)[i].CustomerID = value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:55:45.220

您可以将数据集与 TableAdapters 分开。您应该有一个数据集（具有相应的表定义）和两组表适配器：一组用于 SQL，另一组用于 SQL CE。

[http://msdn.microsoft.com/en-us/library/bb384570.aspx](http://msdn.microsoft.com/en-us/library/bb384570.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:59:01.900

**像 Y. Ecarri 之前写的那样分离你的数据集。**

如果这对您来说不可能，您可以使用装饰器模式来包装数据。（不建议！）

```
public interface ICustomer{
    ICustomerData GetCustomerData(int index);
}

public interface ICustomerData{
    int CustomerId{ get; }
}

public class OnlineCustomer : ICustomer{

    private MSSQLDataSet.Customer innerCustomer;

    public OnlineCustomer(MSSQLDataSet.Customer innerCustomer){
        this.innerCustomer = innerCustomer;
    }
    ICustomerData GetCustomerData(int index){
        return new OnlineCustomerData(innerCustomer[index]);
    }
}

public class OnlineCustomerData : ICustomerData{
    private MSSQLDataSet.CustomerDataTable innerCustomer;
    public OnlineCustomerData(MSSQLDataSet.CustomerDataTable innerCustomer){
        this.innerCustomer = innerCustomer;
    }

    public int CustomerId{
        get {
            return innerCustomer.CustomerId;
        }
    }
}

public class OfflineCustomerData : ICustomerData{
    private CompactSQLDataSet.CustomerDataTable innerCustomer;
    public OfflineCustomerData(CompactSQLDataSet.CustomerDataTable innerCustomer){
        this.innerCustomer = innerCustomer;
    }

    public int CustomerId{
        get {
            return innerCustomer.CustomerId;
        }
    }
}

public class OfflineCustomer : ICustomer{

    private CompactSQLDataSet.Customer innerCustomer;

    public OfflineCustomer(CompactSQLDataSet.Customer innerCustomer){
        this.innerCustomer = innerCustomer;
    }
    ICustomerData GetCustomerData(int index){
        return new OfflineCustomerData(innerCustomer[index]);
    }
}

public class Program{
    private ICustomer customer;

    public  ICustomer Customer{
        get{
            if(customer == null)
                customer = CreateCustomer();
            retrun customer;
        }
    }

    public ICustomerData CreateCustomer(){
        if(online){
            new OnlineCustomer(new MSSQLDataSet.Customer);
        } else {
           new OfflineCustomer(new CompactSQLDataSet.Customer);
        }
    }

    public void Usage(){
        ICustomerData data12 = Customer.GetCustomerData(12);
        int id = data12.CustomerId;
    }
} 
```

# android - 在 Android 上播放 opus-codec

> ID：12474277
> 
> 赞同：6
> 
> 时间：2012-09-18T09:36:20.430
> 
> 标签：android, android-ndk, speech, speex

我正在寻找一种将 opus-codec（解码器部分）与我的 Android 应用程序集成的方法。

你知道任何已经这样做的实现吗？我们目前正在使用 ogg-vorbis 进行语音提示，考虑使用 speex（已弃用，但很少有记录的尝试）或 opus（目前没有记录的尝试）。

如果我们不得不走 NDK 路线，您认为它应该为我们提供应用程序大小的改进吗？平台支持 OggVorbis，speex 和 opus 都不支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T13:29:41.823

我建议您查看[Opus API 文档](https://mf4.xiph.org/jenkins/view/opus/job/opus/ws/doc/html/index.html)。此外，现在还有一个处于早期开发阶段的[OpusFile 库](https://git.xiph.org/?p=opusfile.git)（相当于 Vorbis 的 libvorbisfile）。否则，您可以随时阅读 opusdec 源代码。

# javascript - 内部循环只运行一次，包含循环无限运行

> ID：12474280
> 
> 赞同：2
> 
> 时间：2012-09-18T09:36:32.423
> 
> 标签：javascript, jquery

恐怕菜鸟问题。

我有一个运行和旋转时钟指针的循环和一个检查指针角度是否为 90、180、270 和 360 的内部循环。在这 4 个角度上显示相应的 div 并删除其兄弟。手永远循环和循环，这是我想要的，但角度检查只在整个 360 度范围内运行一次循环。当手通过角度时，它正确显示和删除 div，但在第一次之后不会继续时钟的旋转。

我显然在某个地方搞砸了，肯定会有一种更有效的方式来完成这一切。我正在使用 jQueryRotate.js 进行旋转。谢谢你的时间。

```
jQuery(document).ready(function() {
    var angle = 0;
    setInterval(function() {
        jQuery("#hand").rotate(angle);
        function movehand() {
            if (angle == 90) {
                jQuery("#intervention").fadeIn().css("display","block").siblings().css("display","none");
            } else if (angle == 180) {
                jQuery("#management").fadeIn().css("display","block").siblings().css("display","none");
            } else if (angle == 270) {
                jQuery("#prevention").fadeIn().css("display","block").siblings().css("display","none");
            } else if (angle == 360) {
                jQuery("#reaction").fadeIn().css("display","block").siblings().css("display","none");
            } else {
                movehand;
            }
        };
        movehand();
        angle+=1;
    },10);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:39:12.137

一旦角度达到360，您不需要将其重置为0吗？

[http://jsfiddle.net/DHxBm/2/](http://jsfiddle.net/DHxBm/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:40:12.877

```
jQuery(document).ready(function(){
var angle = 0;
setInterval(function(){
     jQuery("#hand").rotate(angle);
     function movehand(){
      if (angle == 90) {
      jQuery("#intervention").fadeIn().css("display","block").siblings().css("display","none");
    } else if (angle == 180) {
      jQuery("#management").fadeIn().css("display","block").siblings().css("display","none");
    } else if (angle == 270) {
      jQuery("#prevention").fadeIn().css("display","block").siblings().css("display","none");
    } else if (angle == 360) {
      jQuery("#reaction").fadeIn().css("display","block").siblings().css("display","none");
angle=0;
    } else {movehand;}
};

      angle+=1;
},10);
}); 
```

# asp.net-mvc - 如果不在表单标签中，MVC 将文本框传递给控制器

> ID：12474281
> 
> 赞同：1
> 
> 时间：2012-09-18T09:36:40.563
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在处理 Microsoft MVC3 项目，无法将已编辑的参数传递给控制器​​。它只会传回原始设置参数例如：

```
@Ajax.ActionLink("share file", InviteController.Actions.Result, InviteController.Name, new { message = Model.Message }, new AjaxOptions
            {
                HttpMethod = "GET",
                UpdateTargetId = "popup",
                OnSuccess = "$('#popup').dialog('open')"
            }, new { id = "popup-button" })

<label>Personal Message <span class="optional-message">(optional)</span></label>
@Html.TextAreaFor(x => x.Message)
</div> 
```

这会将 传递给以下控制器，但 'message' 参数具有原始消息而不是更新消息：

```
 public ActionResult Result(FormCollection coll, string message)
    { 
```

如果有人能给我一些建议，我会很高兴。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:38:39.120

改用表格：

```
@using (Ajax.BeginForm(
    InviteController.Actions.Result, 
    InviteController.Name, 
    null,
    new AjaxOptions
    {
        HttpMethod = "GET",
        UpdateTargetId = "popup",
        OnSuccess = "$('#popup').dialog('open')"
    }, 
    new { id = "popup-button" }))
{
    <label for="Message">
        Personal Message 
        <span class="optional-message">(optional)</span>
    </label>
    @Html.TextAreaFor(x => x.Message)
    <button type="sybmit">share file</button>
} 
```

并且不要忘记 HTML 表单不能嵌套。所以如果你有一个外部形式，这将不起作用。

# haskell - 并行 Haskell 以找到大量的除数

> ID：12474284
> 
> 赞同：4
> 
> 时间：2012-09-18T09:36:54.650
> 
> 标签：haskell, parallel-processing

我使用 Parallel Haskell 编写了以下程序来找到 10 亿的除数。

```
import Control.Parallel

parfindDivisors :: Integer->[Integer]
parfindDivisors n = f1 `par` (f2 `par` (f1 ++ f2))
              where f1=filter g [1..(quot n 4)]
                    f2=filter g [(quot n 4)+1..(quot n 2)]
                    g z = n `rem` z == 0

main = print (parfindDivisors 1000000000) 
```

我已经编译了程序`ghc -rtsopts -threaded findDivisors.hs`并运行它： `findDivisors.exe +RTS -s -N2 -RTS`

与以下简单版本相比，我发现了 50% 的加速：

```
findDivisors :: Integer->[Integer]
findDivisors n = filter g [1..(quot n 2)] 
      where  g z = n `rem` z == 0 
```

我的处理器是 Intel 的双核 2 duo。我想知道上面的代码是否有任何改进。因为在程序打印的统计数据中说： `Parallel GC work balance: 1.01 (16940708 / 16772868, ideal 2)` 以及`SPARKS: 2 (1 converted, 0 overflowed, 0 dud, 0 GC'd, 1 fizzled)` 这些是什么**转换**、**溢出**、**哑**、**GC'd**、**失败**以及如何帮助改善时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T18:10:34.773

IMO，`Par`单子有助于推理并行性。它比处理`par`and高一点`pseq`。

`parfindDivisors`这是使用`Par`monad的重写。请注意，这与您的算法基本相同：

```
import Control.Monad.Par

findDivisors :: Integer -> [Integer]
findDivisors n = runPar $ do
    [f0, f1] <- sequence [new, new]
    fork $ put f0 (filter g [1..(quot n 4)])
    fork $ put f1 (filter g [(quot n 4)+1..(quot n 2)])
    [f0', f1'] <- sequence [get f0, get f1]
    return $ f0' ++ f1'
  where g z  = n `rem` z == 0 
```

编译它`-O2 -threaded -rtsopts -eventlog`并运行 with`+RTS -N2 -s`会产生以下相关的运行时统计信息：

```
 36,000,130,784 bytes allocated in the heap
       3,165,440 bytes copied during GC
          48,464 bytes maximum residency (1 sample(s))

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     35162 colls, 35161 par    0.39s    0.32s     0.0000s    0.0006s
  Gen  1         1 colls,     1 par    0.00s    0.00s     0.0002s    0.0002s

  Parallel GC work balance: 1.32 (205296 / 155521, ideal 2)

  MUT     time   42.68s  ( 21.48s elapsed)
  GC      time    0.39s  (  0.32s elapsed)
  Total   time   43.07s  ( 21.80s elapsed)

  Alloc rate    843,407,880 bytes per MUT second

  Productivity  99.1% of total user, 195.8% of total elapsed 
```

生产力非常高。为了稍微改善 GC 工作平衡，我们可以增加 GC 分配区域大小；运行`+RTS -N2 -s -A128M`，例如：

```
 36,000,131,336 bytes allocated in the heap
          47,088 bytes copied during GC
          49,808 bytes maximum residency (1 sample(s))

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0       135 colls,   134 par    0.19s    0.10s     0.0007s    0.0009s
  Gen  1         1 colls,     1 par    0.00s    0.00s     0.0010s    0.0010s

  Parallel GC work balance: 1.62 (2918 / 1801, ideal 2)

  MUT     time   42.65s  ( 21.49s elapsed)
  GC      time    0.20s  (  0.10s elapsed)
  Total   time   42.85s  ( 21.59s elapsed)

  Alloc rate    843,925,806 bytes per MUT second

  Productivity  99.5% of total user, 197.5% of total elapsed 
```

但这真的只是吹毛求疵。真实的故事来自 ThreadScope：

![大量利用](../Images/f857f1c17c52555b54b03ebb47617891.png)

两个核心的利用率基本上达到了最大值，因此可能不会发生额外的显着并行化（对于两个核心）。

[这里](http://community.haskell.org/~simonmar/slides/CUFP.pdf)`Par`有一些关于monad 的好笔记。

**更新**

替代算法的重写`Par`看起来像这样：

```
findDivisors ::  Integer -> [Integer]
findDivisors n = let sqrtn = floor (sqrt (fromInteger n)) in runPar $ do
    [a, b] <- sequence [new, new]
    fork $ put a [a | (a, b) <- [quotRem n x | x <- [1..sqrtn]], b == 0]
    firstDivs  <- get a
    fork $ put b [n `quot` x | x <- firstDivs, x /= sqrtn]
    secondDivs <- get b
    return $ firstDivs ++ secondDivs 
```

但是你是对的，由于依赖于`firstDivs`.

`Strategies`通过参与并行评估列表推导的元素，您仍然可以在此处合并并行性。就像是：

```
import Control.Monad.Par
import Control.Parallel.Strategies

findDivisors ::  Integer -> [Integer]
findDivisors n = let sqrtn = floor (sqrt (fromInteger n)) in runPar $ do
    [a, b] <- sequence [new, new]
    fork $ put a 
        ([a | (a, b) <- [quotRem n x | x <- [1..sqrtn]], b == 0] `using` parListChunk 2 rdeepseq)
    firstDivs  <- get a
    fork $ put b 
        ([n `quot` x | x <- firstDivs, x /= sqrtn] `using` parListChunk 2 rdeepseq)
    secondDivs <- get b
    return $ firstDivs ++ secondDivs 
```

运行它会给出一些统计数据，例如

```
 3,388,800 bytes allocated in the heap
          43,656 bytes copied during GC
          68,032 bytes maximum residency (1 sample(s))

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0         5 colls,     4 par    0.00s    0.00s     0.0000s    0.0001s
  Gen  1         1 colls,     1 par    0.00s    0.00s     0.0002s    0.0002s

  Parallel GC work balance: 1.22 (2800 / 2290, ideal 2)

                        MUT time (elapsed)       GC time  (elapsed)
  Task  0 (worker) :    0.01s    (  0.01s)       0.00s    (  0.00s)
  Task  1 (worker) :    0.01s    (  0.01s)       0.00s    (  0.00s)
  Task  2 (bound)  :    0.01s    (  0.01s)       0.00s    (  0.00s)
  Task  3 (worker) :    0.01s    (  0.01s)       0.00s    (  0.00s)

  SPARKS: 50 (49 converted, 0 overflowed, 0 dud, 0 GC'd, 1 fizzled)

  MUT     time    0.01s  (  0.00s elapsed)
  GC      time    0.00s  (  0.00s elapsed)
  Total   time    0.01s  (  0.01s elapsed)

  Alloc rate    501,672,834 bytes per MUT second

  Productivity  85.0% of total user, 95.2% of total elapsed 
```

在这里转换了近 50 个火花——也就是说，正在进行有意义的并行工作——但计算量不足以观察并行性带来的任何挂钟增益。任何收益都可能被线程运行时调度计算的开销所抵消。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:47:57.053

我认为这个页面比我能更好地解释它：

[http://www.haskell.org/haskellwiki/ThreadScope_Tour/SparkOverview](http://www.haskell.org/haskellwiki/ThreadScope_Tour/SparkOverview)

我还发现这些幻灯片很有趣：

[http://haskellwiki.gitit.net/Upload/HIW2011-Talk-Coutts.pdf](http://haskellwiki.gitit.net/Upload/HIW2011-Talk-Coutts.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T20:28:55.590

我用以下内容修改原始代码我有更好的加速但是我认为这个代码不能并行化

```
findDivisors2 :: Integer->[Integer]
findDivisors2 n= let firstDivs=[a|(a,b)<-[quotRem n x|x<-[1..sqrtn]],b==0]
                 secondDivs=[n `quot` x|x<-firstDivs,x/=sqrtn]
                 sqrtn = floor(sqrt (fromInteger n))
               in firstDivs ++ secondDivs 
```

我试图用这个来并行化代码：

```
parfindDivisors2 :: Integer->[Integer]
parfindDivisors2 n= let firstDivs=[a|(a,b)<-[quotRem n x|x<-[1..sqrtn]],b==0]
                 secondDivs=[n `quot` x|x<-firstDivs,x/=sqrtn]
                 sqrtn = floor(sqrt (fromInteger n))
               in  secondDivs `par` firstDivs++secondDivs 
```

我没有减少时间，而是将时间增加了一倍。我认为发生这种情况是因为 findDivisors2 具有**很强**的数据依赖性，而第一个算法`findDivisors`则没有。

欢迎任何意见。

# jquery - 如何使用 caroufredsel 让按钮和滑动一起工作？

> ID：12474286
> 
> 赞同：1
> 
> 时间：2012-09-18T09:37:24.430
> 
> 标签：jquery, caroufredsel

我正在使用 caroufredsel 转到下一页和上一页。现在我正在尝试对此进行滑动。但我有困难。我当前的代码如下。

```
function carouFredSel() {
    //  Scrolled by user interaction
    $('#pages').carouFredSel({
        prev:{ button: '#prev',
               onBefore: function() { $("#pages").children().children().hide(); },
               onAfter: function() { $("#pages").triggerHandler("currentVisible").children().show(); }
             },
        next:{ button: '#next',
               onAfter: function() { $("#pages").children().children().hide(); $("#pages").triggerHandler("currentVisible").children().show(); getRemainingPages(); }
             },
        height: '100%',
        width: '100%',
        align: 'left',
        auto: false,
        circular: false,
        infinite: true
    });
} 
```

如何让滑动和下一个和上一个按钮一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:00:34.740

有一个名为“swipe”的配置对象。

你可以这样使用它：

```
 $('#pages').carouFredSel({
        ...
        swipe: {
          onTouch: true
        }
      }); 
```

您还需要加载这个 jQuery 插件：http: [//labs.skinkers.com/touchSwipe/](http://labs.skinkers.com/touchSwipe/)

# bash - 根据时间戳提取部分日志文件

> ID：12474287
> 
> 赞同：1
> 
> 时间：2012-09-18T09:37:25.353
> 
> 标签：bash, sed

我有一个附加到同一个日志文件的应用程序。由于这个文件相当大（大约 8 GB），我想根据行首的时间戳提取部分。

```
-bash-3.2$ cat application.log | egrep --color "Starting Application|Exception"
08:46:01.328 [main] INFO  Starting Application...
09:14:53.670 [Thread-1] ERROR Resolver - Caught exception -> com.jgoodie.AuthzException: Authorization failed
Caused by: com.jgoodie.AuthzException: Authorization failed
09:56:15.739 [main] INFO  Starting Application...
10:17:08.932 [Thread-1] ERROR Resolver - Caught exception -> com.jgoodie.AuthzException: Authorization failed
Caused by: com.jgoodie.AuthzException: Authorization failed 
```

在上面的示例中，我想提取应用程序第一次运行的日志（在 08:46:01.328 和 09:56:15.739 之间）。有什么简单的方法（最好是一个班轮）来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T09:40:35.447

```
sed -n '/08:46:01.328/,/09:56:15.739/p' application.log 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:56:31.567

```
perl -lne 'if(/^08:46:01.328/.../^09:56:15.739/){print}' your_file 
```

# tags - Pyrocms 标签作为另一个标签中的参数

> ID：12474288
> 
> 赞同：2
> 
> 时间：2012-09-18T09:37:30.393
> 
> 标签：tags, pyrocms

我尝试在我的页面中使用 {{ page:slug }} 作为参数来从同名类别中获取博客文章。例如：

*   页面名称 = 关于我
*   蛞蝓=关于我

然后在 Blog 中创建一个具有相同名称和 slugname 的类别以及关联的文章。现在在页面布局中，我认为我可以创建以下内容，但它似乎不起作用。有谁知道为什么不？

```
{{ blog:posts order-by="created_on" dir="asc" category="{{ page:slug }}" }}
<section class="title">
    <h4>
    {{ title }}
    </h4>
</section>
<section class="item">
    <p>{{ intro }}</p>
    <p><a href="{{ url }}">Read more..</a></p>
</section>
{{ /blog:posts }} 
```

## **解决了**

我通过与另一位开发人员面对面询问找到了答案。由于这是一种模板语言，它不支持功能。它只是读取预制变量。所以我将不得不通过在 pages/plugins.php 中创建另一个方法来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:04:34.067

您无需尝试在字符串中嵌入标签，只需将标签直接传递给属性即可。

```
{{ blog:posts order-by="created_on" dir="asc" category="{{ page:slug }}" }} 
```

应该：

```
{{ blog:posts order-by="created_on" dir="asc" category=page:slug }} 
```

比你想象的容易吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:21:49.217

这就是我使用PHP解决它的方法。以下编辑检查是否设置了 {{ blog:posts }} 标记中的页面参数。如果是，它会抓取最后一个片段并将其用作数据库查询中的类别过滤器以仅检索这些帖子：

在**system/cms/modules/blog/plugin.php 中**查找“posts”函数并添加一个参数：

```
$page   = $this->attribute('page'); 
```

然后使用以下语句检查参数是否已设置，然后添加'where'语句：

```
if($page) //check if page is set
{
  $segment = end($this->uri->segment_array()); //get the last segment from the url
  $this->db->where('blog_categories.slug', $segment); //use the segment as filter
} 
```

现在您可以创建一个包含博客文章的页面，其中类别引用其页面名称，例如：www.website.com/pagename/subpagename/subsubpagename/awesome 然后将其用作页面布局，它将加载具有“真棒'作为类别：

```
<h3>{{ page:title }}</h3>
{{ blog:posts order-by="created_on" dir="asc" page="true" }}

    <h4>{{ title }}</h4>

    <p>
        {{ intro }}</p>
    <p>
        <a href="{{ url }}">Read more..</a></p>

{{ /blog:posts }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:59:09.730

我没有使用标签，而是找到了一个简单的解决方案来尽可能地避免使用标签。就这个。

而不是使用标签调用插件中的视图并将第三个参数作为 TRUE 传递，以便它返回字符串而不是加载视图，而不是像往常一样在视图中执行任何类型的循环和条件检查，就像使用 php o 当然一样。无需在那里满足标签。之后，在您调用此视图的插件中，只需返回一个变量并在页面的标签中使用您的变量来显示视图的内容。
这是一个例子

```
class Plugin_Home extends Plugin  
{  
    function test()  
    {
        $this->load->model('test/test_m');
        $data['test']   =   $this->test_m->index();
        return $this->load->view('test/test_view',$data , TRUE);
    }
} 
```

在页面中你可以这样称呼它

```
{{ Home:test }} 
```

并摆脱用于调节和循环的标签

# java - 如何在java中处理csv文件

> ID：12474290
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:37:50.813
> 
> 标签：java, android

> **可能重复：**
> [CSV API for Java](https://stackoverflow.com/questions/101100/csv-api-for-java)
> [Get and Parse CSV file in android](https://stackoverflow.com/questions/5360628/get-and-parse-csv-file-in-android)

是否有用于处理带有示例的 CSV 文件等文件的 android/java 库？请向我提供该库和示例的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:56:22.610

[OpenCSV](http://opencsv.sourceforge.net/)是一个非常简单但经过全球测试的 API。你会[在他们的文档](http://opencsv.sourceforge.net/#how-to-read)中找到足够多的例子来开始。

# c# - C# 到 VBNET 的转换问题

> ID：12474297
> 
> 赞同：0
> 
> 时间：2012-09-18T09:38:20.593
> 
> 标签：c#, vb.net, converter

我有一些 C# 代码要添加到现有的 VB.net 项目中。C# 类被设计为一个 html 解析器

最初使用了在线转换器，并且能够让大部分课程正常工作，但下面的部分仍然无法正常工作。不幸的是，我缺乏解决此问题的知识。

我正在发布整篇文章，但如果有人可以澄清前几行，我认为这就足够了。AttributeNameValuePair 是一个保存属性的单独类。

再往下，使用了一些内联函数，也会欣赏一个例子。或者将这些作为单独的函数并在里面只留下一个参考会更容易吗？

预先感谢您的任何帮助。

```
 private readonly Dictionary<string, Action<DocumentModel, IEnumerable<AttributeNameValuePair>>> commandsDictionary = new Dictionary<string, Action<DocumentModel, IEnumerable<AttributeNameValuePair>>>()
    {
        { "b", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => GetLastRun(doc).CharacterFormat.Bold = true) },
        { "i", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => GetLastRun(doc).CharacterFormat.Italic = true) },
        { "u", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => GetLastRun(doc).CharacterFormat.UnderlineStyle = UnderlineType.Single) },
        { "strike", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => GetLastRun(doc).CharacterFormat.Strikethrough = true) },
        { "sub", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => GetLastRun(doc).CharacterFormat.Subscript = true) },
        { "sup", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => GetLastRun(doc).CharacterFormat.Superscript = true) },
        { "div", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => 
            {
              foreach(var arg in args)
              {
                  if(arg.AttributeName == "align")
                  {
                      HorizontalAlignment align;
                      switch(arg.AttributeValue)
                      {
                          case "center":
                              align = HorizontalAlignment.Center;
                              break;
                          case "right":
                              align = HorizontalAlignment.Right;
                              break;
                          case "justify":
                              align = HorizontalAlignment.Justify;
                              break;
                          default:
                              align = HorizontalAlignment.Left;
                              break;
                      }
                  }
              }
            })},
        { "br", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => doc.Sections[0].Blocks.Add(new Paragraph(doc))) },
        {  "span",  new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => {})},
        { "font", new Action<DocumentModel, IEnumerable<AttributeNameValuePair>>((doc, args) => 
            {
                foreach(AttributeNameValuePair arg in args)
                {
                    int? size = null;
                    string fontName = null;

                    // Some dummy values.
                    if (arg.AttributeName == "size")
                        size = 10 + 3 * int.Parse(arg.AttributeValue);
                    else if (arg.AttributeName == "face")
                        fontName = arg.AttributeValue.Split(',').First();

                    var lastFormat = GetLastRun(doc).CharacterFormat;
                    if (size.HasValue)
                        lastFormat.Size = size.Value;

                    if (fontName != null)
                        lastFormat.FontName = fontName;
                }
            })},
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:38:43.927

这是哪个版本的vb.net？Lambda 表达式在每个表达式中的工作方式都略有不同。多行 lambda 仅在 VS2010+ 中受支持。对于 VS2008，您通常最终不得不将匿名方法转换为真实方法并通过`AddressOf`. 我注意到，从 C#->VB 转换匿名/lambda 类型表达式时，自动翻译通常似乎失败。

无论如何，与 C# 相比，VB 中的匿名方法语法有点笨拙和不同，以至于令人困惑。对于单行方法，你会做这样的事情（为了清楚起见，我使用简单的类型）：

```
Private cmdDictionary As New Dictionary(Of String, Action(Of Integer, String))

'adding items'
cmdDictionary.Add("div", New Action(Of Integer, String) _
      (Sub(x As Integer, y As String) Console.WriteLine(y & ":" & CStr(x))))

'then to access the dictionary'
cmdDictionary.Item("div")(42, "foobar") 
```

对于多行（在 vs2010 中），模式如下所示：

```
cmdDictionary.Add("div", New Action(Of Integer, String) _
                        (Sub(x As Integer, y As String)
                             x = 2 * x
                             Console.WriteLine(y & ":" & CStr(x))
                         End Sub)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:20:36.573

您可以将此 C# 代码 1:1 转换为 VB.Net。

在这个例子中，我只添加了`b`and `div`，但它应该足以指导你：

```
Private Readonly commandsDictionary As Dictionary(Of string, Action(Of DocumentModel, IEnumerable(Of AttributeNameValuePair))) = 
new Dictionary(Of string, Action(Of DocumentModel, IEnumerable(Of AttributeNameValuePair)))() From 
{
    { "b", new Action(Of DocumentModel, IEnumerable(Of AttributeNameValuePair)) (Sub(doc, args) GetLastRun(doc).CharacterFormat.Bold = true) },
    { "div", new Action(Of DocumentModel, IEnumerable(Of AttributeNameValuePair))(Sub(doc, args)  
          For Each arg in args
              if arg.AttributeName = "align" Then
                  Dim align as HorizontalAlignment
                  Select arg.AttributeValue
                      case "center":
                          align = HorizontalAlignment.Center
                      case "right":
                          align = HorizontalAlignment.Right
                      case "justify":
                          align = HorizontalAlignment.Justify
                      case else:
                          align = HorizontalAlignment.Left
                  end select
              end if
          Next
    End Sub)}}
} 
```

您可能想为 创建一个类型别名`Action(Of DocumentModel, IEnumerable(Of AttributeNameValuePair))`，因为它会大大提高可读性。

# c# - 使用 gmail 通过 asp.net 登录？

> ID：12474301
> 
> 赞同：1
> 
> 时间：2012-09-18T09:38:26.567
> 
> 标签：c#, asp.net, database, plugins, gmail

我在这个网站上搜索过，但更多的 gmail 登录与 php 相关。我的问题是将 gmail 登录连接到用 C# 和 asp.net 编写的网站。因此用户可以通过gmail帐户进入网站。我不谈论发送电子邮件和这些领域。它只是用gmail帐户登录！我应该从头开始自己写吗？还是有一些现成的 API / 插件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:40:25.963

请参阅以下链接，其中详细介绍了使用其 Google 帐户的登录 API [https://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:41:01.907

您可能想尝试[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)

查看以下线程以获取更多详细信息

[C# 中的 OpenID 和 Google.GData.AccessControl.dll](https://stackoverflow.com/questions/5759055/openid-and-google-gdata-accesscontrol-dll-in-c-sharp)

[如何使用 Facebook（或其他 ID）登录我的 asp.net 应用程序？](https://stackoverflow.com/questions/4594408/how-to-do-login-to-my-asp-net-app-using-facebook-or-other-id)

# php - jquery 日历日期选择器不适用于我的包含 php

> ID：12474304
> 
> 赞同：0
> 
> 时间：2012-09-18T09:38:37.317
> 
> 标签：php, jquery, html, include, datepicker

我在使用输入类型日期时遇到了一些麻烦，出于兼容性的原因，我决定使用类 datepicker 按文本类型更改所有输入类型日期。

当我在 index.php 上时，一切正常。

当我在另一个页面上时，例如 index.php?p=home。即使它显示与 index.php 相同的页面，也不会出现日历。

这是我用于更改输入的代码。

```
<body onmousemove="resetTimer()" onload="startTimer();startTime();<?php if(isset($_GET['p']) AND $_GET['p']=='monitoring'){echo 'ajax();' ;}; ?>changefield()"> 
<!-- Script DATE  -->
<script>
    $(function() {
        $("input[type=date]").replaceWith("<input type='text' class='datepicker'/>");
        $( ".datepicker" ).datepicker({
            changeMonth: true,
            changeYear: true,
            showWeek: true,
            beforeShowDay: '',
            showAnim: "show"
        });
    });
</script> 
```

我真的不知道如何找到这个问题的问题。

接受我最大的尊重。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:50:57.803

您的代码应该可以工作...

[**jsfiddle**](http://jsfiddle.net/5bE6d/)

也许你不包括 jquery-ui 脚本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:40:20.880

对于初学者，您有一个错字：

```
A`ND $_GET['p']=='monitoring' 
```

# c# - 根据控件可见性，C#.Net 动态自动调整窗口大小

> ID：12474309
> 
> 赞同：0
> 
> 时间：2012-09-18T09:38:44.367
> 
> 标签：c#, windows, forms

在创建 Windows 窗体应用程序时，最初我将所有控件（如 Button、TextBox、Label）保持为不可见。一次，用户执行正确的活动，例如选择正确的目录，然后出现下一个控件（通常，用户不会有太多的自由，但要提供正确的目录）。我知道，一直保持其他控件不可见是没有意义的，但我想将其作为我的学习过程。

现在，问题是，如何让表单在每次出现新控件时改变它的大小。

例如，在开始时只有一个 TextBox 和 Browse 按钮​​是可见的。此处的 windows 窗体应仅缩放到可见控件。然后，一旦用户提供了正确的目录路径并且程序识别它，下一个控件（如按钮和richTextBox）就会出现，然后表单应该动态地改变自己以适应新的控件。

感谢帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:48:48.483

这一切都很简单，您可以使用属性更改控件的可见`Visible`性，并通过更改表单的`Height`和`Width`属性来更改表单的大小。

如果您创建一个名为**Form1**的表单，添加两个名为**button1**和**button2**的按钮，然后复制并粘贴以下代码，这将演示如何调整表单大小和更改控件的可见性。

**button2**在表单加载时设置为不可见，宽度和高度分别设置为 100px。每当按下**button1**时，表单都会调整大小并且**button2**设置为可见：

```
using System;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            button2.Visible = false;

            Width = 100;
            Height = 100;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Width = 200;
            Height = 200;
            button2.Visible = true;
        }
    }
} 
```

# iphone - 两个版本问题错误

> ID：12474313
> 
> 赞同：-2
> 
> 时间：2012-09-18T09:39:12.463
> 
> 标签：iphone, ios, xcode

我在苹果商店上传了我的项目。我还有一个项目与我的第一个项目有些不同。我复制了我的第一个项目并更改了项目名称、包名称、包标识符和图标。当我运行设备或模拟器时，我可以看到我的两个不同的项目。但是当我在 iTunes 上上传我的第二个项目时，出现以下错误。

应用程序必须准备好上传到 iTunes Connect，然后才能在 Xcode 中进行验证或提交。

可能是什么问题 ？

有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:44:58.923

您首先必须准备上传，即在 iTunes Connect 中配置应用程序。

访问 iTunes Connect -> 管理您的应用程序 -> 添加新应用程序

# c# - 在 C# 应用程序中查找内存泄漏

> ID：12474321
> 
> 赞同：3
> 
> 时间：2012-09-18T09:39:52.543
> 
> 标签：c#, .net, memory-footprint

我在 C# 框架 4 中有一个应用程序。基本上，这个应用程序主要对事件做出反应并创建对象，释放它们，创建数据库连接并关闭它们。

现在，我们已经看到应用程序的进程有时会以非常奇怪的方式增长。我们有两种不同的行为：

1.  当应用程序“应该”保持在 500 MB 左右时，应用程序会不断增长，直到达到 4 GB 的 RAM。结果->它崩溃了！
2.  应用程序缓慢增长到 1200 MB（30 分钟），然后突然缩小到 500 MB（在一秒钟内）......这个过程不时重复。这可以是垃圾收集器吗？

现在，为了向我们提供有关应用程序的更多信息，我想在我们的日志文件中添加应用程序进程的大小。是否可以通过本机框架？是否可以在 C# 中知道对象的大小？

我还找到了应用程序 NetMemoryProfiler4，但如果可能的话，我更愿意使用嵌入式日志记录！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:29:01.457

您需要内存分析器来调试此类问题。例如：

*   [CLR 探查器](http://www.microsoft.com/en-us/download/details.aspx?id=16273)
*   [.Net 内存验证器](http://www.softwareverify.com/dotnet-memory.php)
*   [发光代码](http://www.glowcode.com/)
*   [ANTS 内存分析器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)

[另请参阅有关内存泄漏的其他问题的](https://stackoverflow.com/questions/11133722/debugging-net-memory-leaks-how-to-know-what-is-holding-a-reference-to-what)建议。

基本上，这归结为在内存中找到不应该留在这里的对象。它可以是持有对其类的引用的事件处理程序，也可以是持有对其父对象的引用的对象集合，等等。找到根本原因后，您可能需要重组应用程序以消除不必要的引用。这可以像添加被遗忘的事件取消订阅一样简单，但在非平凡的情况下可能需要应用一些结构设计模式。这部分是非常特定于应用程序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:12:30.487

也许`Process`类是你正在寻找的正确的东西。
用于`Process myProcess = Process.GetCurrentProcess()`获取当前进程。
然后你可以使用`myProcess`'s[属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.process_properties%28v=vs.100%29.aspx)`WorkingSet64`，等等`PrivateMemorySize64`。

# ruby - 重构：何时停止重构？

> ID：12474325
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:40:08.873
> 
> 标签：ruby, class, refactoring, single-responsibility-principle, responsibility

我对划分一个类或实例方法并将其移动到自己的类中非常痴迷，很多时候一个简单的“hello world”方法会被划分为许多类。

例如，

```
class MainProgram
  def hello_world
    puts "hello world"
  end
end 
```

将分为

```
class SayHello
  def initialize
    @hello = "hello"
  end

  def hello
    @hello
  end
end

class SayWorld
  def initialize
    @world = "world"
  end

  def world
    @world
  end
end

class SayHelloWorld
  def initialize
    @hello = SayHello.new.hello
    @world = SayWorld.new.world
    @hello_world = "#{@hello} #{@world}"
  end

  def hello_world
    @hello_world
  end
end

class MainProgram
  def hello_world
    @hello_world = SayHelloWorld.new.hello_world
    @hello_world
  end
end 
```

有时感觉没有必要。这样做有什么好处吗？

我什么时候停止重构我的代码？有没有重构代码之类的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:44:29.170

*仅当您看到代码重复的代码足够复杂（或包含业务逻辑）时才应启用*“重构模式” ，这可能会导致以后进行维护/更新时出现问题；*这样它会创建这样的场景，您可能会忘记更新所有原本应该在功能上相同的代码位置，从而导致取决于代码路径的功能行为不一致。*

 *一个常见的规则是，一旦你看到 3 个重复的重要代码，你应该重构它。

重构实现了可重用性，但它与制作可重用的软件组件并不完全相同（我认为这是你的动机）。

您正在做的是过度设计您的软件，并且基本上将您的编程语言原本强大而简洁的语法简化为一种更简单、更脆弱和更少表现力的语言。这是因为您创建了太多抽象层并将基本表达式封装到类中。

您应该问自己一个有用的问题是“将这一系列表达转化为一堂课，我有什么好处？” 例如“我需要跟踪状态吗？”、“多个实例有意义吗？”和“我是获得还是失去表达能力？灵活性？方便性？”。

另一种看待它的方式是重构通常是由[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)（不要重复自己）推动的，请记住，DRY 与想要创建可重用的软件组件并不完全相同。但是，也有[YAGNI](http://en.wikipedia.org/wiki/You_Ain%27t_Gonna_Need_It)（You Aint Gonna Need It）：除非您在不久的将来需要某个功能，否则您现在可能不需要实现它，只需坚持最基础的版本即可（至少在开始时） ）。

不要推测未来的路，想“我想让所有选项留待以后；如果我决定做`A`，如果我决定做`B`，是的，是的，我要把这个简单的事情变成一个类让你也这样做`f`，`g`并且`h`，*以防以后我决定我需要它......*！”。

因此，这在很大程度上与在您开始编写相关代码之前将您的软件需求和范围保持在相当稳定的最终确定水平有关。知道路停在哪里可以帮助你估计你需要多少燃料，如何正确地调整自己的速度，以及将资源按比例分配到最需要的地方。

此外，如果您不熟悉编程和学习一门语言，即使您不需要，您也更有可能觉得需要在程序中硬塞所有语言功能。当您开始编写更复杂的现实世界程序（远远超出 hello world）时，您将了解何时使用什么。

了解[软件反模式](http://en.wikipedia.org/wiki/Software_antipatterns)是加速此过程的最佳方法之一。你目前正在做一种“[*货物崇拜编程*](http://en.wikipedia.org/wiki/Cargo_cult_programming)”的形式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:07:03.020

这一切都取决于什么是不变的，什么是变化的。如果您需要一直打印相同的字符串`"Hello World"`，则不需要所有的复杂性。如果您认为您想偶尔更改一次字符串，但不像每次运行它时那样频繁，那么您可能希望将字符串保持为常量，并引用该常量。如果您希望输出根据用户输入以`"Hello world"`、`"Hello Mars"`、`"Hello Moon"`等形式发生变化，那么您可以使该`"Hello"`部分硬连线，并为不同部分的用户输入设置一个例程。等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T10:22:24.203

直观地说，每个人都知道如何编写“Hello world”程序：

```
puts "Hello world!" 
```

那么为什么要麻烦 OOP 呢？答案是，为了未来。如果你现在只想跟世界打个招呼，并且在你的编程生涯中再也不会这样做，就像正常情况一样，那么只需编写 oneliner。何时停止重构的问题取决于您当前编程工作的预计未来用途。例如，如果您正在编写一个网站，将来应该是多语言的，您将执行以下操作：

```
class Greeter
  GREETINGS = {
    en: "hello",
    ru: "привет",
    cn: "你好"
  }

  TARGET = {
    en: "world",
    ru: "мир",
    cn: "天地"
  }

  def do_your_grim_business( language )
    puts [ GREETINGS[ language ], TARGET[ language ] ].join( ", " ) + "!"
  end
  alias :act :do_your_grim_business
end

timothy = Greeter.new
timothy.act( :en ) 
```

这将使您的思想成长，向光明的未来扩展。但不要过度，因为正如那些犯了错误的人所说，[Ruby 是 Play-Doh](http://weblog.jamisbuck.org/2008/11/9/legos-play-doh-and-programming)。*

# java - MediaRecorder 在 android 上开始视频捕获的问题

> ID：12474330
> 
> 赞同：4
> 
> 时间：2012-09-18T09:40:24.307
> 
> 标签：java, android, camera, mediarecorder

我正在尝试开发一个可以录制用户视频的应用程序。因此，如果有前置摄像头，我需要使用前置摄像头拍摄视频。我建立了一个相机预览，这很好。我使用 Android How-To Sites 构建了 MediaRecorder 并进行了设置。如果我使用 CamcorderProfile，当我调用 start() 时，我的媒体服务器就会死机。如果我自己设置编码器，媒体服务器会在 start() 处引发运行时异常，并显示消息“启动失败：-19”，我在这里发现了一些关于这个主题的问题，但没有一个能解决我的问题。我认为这可能与我没有使用后置摄像头有关。也许我没有找到正确的纪录片来构建正确的代码。我认为这不仅仅是我的问题，我很乐意获得更多关于相机使用的知识。我的代码如下：

设置预览的 onResume()

```
protected void onResume() {
        super.onResume();
        // 1\. set up camera preview
        if(checkCameraHardware(this)){
            mCamera = getCameraInstance();
            mCameraPreview = new CameraPreview(this, mCamera);
            FrameLayout preview = (FrameLayout) findViewById(id.cameraPreview);
            preview.addView(mCameraPreview);
        }
        else{
            Log.d("Recorder", "camera check returned false");
        }
} 
```

使用的方法 checkCameraHardware()

```
private boolean checkCameraHardware(Context context){
    boolean ret = true;
    if(context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
            ret = true;
    }
    else {
        ret = false;
        }
    return ret;
} 
```

和方法 getCameraInstance()

```
public static Camera getCameraInstance(){
    Camera c = null;
    int cnum = 0;
    mCamSelect = 0;
    Camera.CameraInfo caminfo = new CameraInfo();
    try {
        cnum = Camera.getNumberOfCameras();
        Log.d("getCameraInstance", String.valueOf(cnum));
        for(int i = 0;i<cnum;i++){
            Camera.getCameraInfo(i, caminfo);
            if(caminfo.facing == CameraInfo.CAMERA_FACING_FRONT){
                mCamSelect = i;
                break;
            }
        }
        c = Camera.open(mCamSelect); // attempt to get a Camera instance
    }
    catch (Exception e){
        Log.d("getCameraInstance", "FATAL camera could not be opened");
        // Camera is not available (in use or does not exist)
    }
    if(c==null)Log.d("getCameraInstance", "no camera returned");
    return c; // returns null if camera is unavailable
} 
```

此代码段显示错误出现的位置（在 onClick 回调中）

```
if(prepareVideoRecorder()){
    mMediaRecorder.start(); //here the errors occure
    recording = true;
    //start recording
} 
```

以及三个MediaRecorder相关方法：prepareVideoRecorder()、releaseMediaRecorder()和release Camera()

```
private void releaseMediaRecorder(){
        if (mMediaRecorder != null) {
            mMediaRecorder.reset();   // clear recorder configuration
            mMediaRecorder.release(); // release the recorder object
            mMediaRecorder = null;
            mCamera.lock();           // lock camera for later use
        }
    }

private void releaseCamera(){
    if (mCamera != null){
        mCamera.release();        // release the camera for other applications
        mCamera = null;
    }
}

private boolean prepareVideoRecorder(){

    //ex: mCamera = getCameraInstance();
    mMediaRecorder = new MediaRecorder();

    // Step 1: Unlock and set camera to MediaRecorder
    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);

    // Step 2: Set sources
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)

    CamcorderProfile profile = CamcorderProfile.get(mCamSelect, CamcorderProfile.QUALITY_HIGH);
    if(profile == null){Log.d(tag, "the camcorder profile instance is null");

        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    }else{
        mMediaRecorder.setProfile(profile);
    }

    // Step 4: Set output file
    //ex: mMediaRecorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());
    mMediaRecorder.setOutputFile(currentVidFile.getAbsolutePath());

    // Step 5: Set the preview output
    mMediaRecorder.setPreviewDisplay(mSlideview.getHolder().getSurface());

    // Step 6: Prepare configured MediaRecorder
    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        Log.d(tag, "IllegalStateException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        Log.d(tag, "IOException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    }
    return true;
}

public void onGesturePerformed(GestureOverlayView arg0, Gesture arg1) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:34:11.217

我正在回答我自己的问题，以帮助遇到同样问题的每个人。这个错误太愚蠢了，承认它有点尴尬。

在准备音频和视频源时，我犯了错误的表面。

我有不同的 SurfaceView 并将错误的 SurfaceView 的表面提交给 MediaRecorder。这导致尝试将两个不同的源连接到表面，这是不可能的，并导致媒体服务器关闭。

我在 GalaxyPad 10.1 上测试了我的应用程序，视频录制工作正常。我在 Dalvik VM 上测试了该应用程序，视频是黑白的，但也可以。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:56:34.023

您是否在清单中添加了以下权限？

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

# php - Javascript 日期选择器在 ajax 中不起作用

> ID：12474336
> 
> 赞同：1
> 
> 时间：2012-09-18T09:40:45.267
> 
> 标签：php, javascript, ajax

我正在使用此代码

```
window.onload = function(){
        new JsDatePick({
            useMode:2,
            target:"report_date_start",
            dateFormat:"%d-%M-%Y"
        });
        new JsDatePick({ 
        useMode:2, 
        target:"report_date_end", 
        dateFormat:"%Y-%m-%d"
        });
      };
function dwnyear_click(id)
{
    var urls=siteurl+"?action=Date_range&id="+id;
    $.ajax({  
        type: "POST",  
        url: urls,  
        success: function(msg)
        {
            $("#dwn_year").html(msg);
            $("#dwnyear_dropdown").css("display","none");}
    });             
}

<input name="report_date_start" type="text" id="report_date_start"  />
<input name="report_date_end" type="text" id="report_date_end"  /> 
```

我需要加载文本框以通过 ajax 形成，日期选择器不工作。我在我的网站中使用了相同的日期选择器，没有任何问题。如何解决这个问题？我添加了ajax代码。Onsuccess 返回文本字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:45:39.363

我认为 window.onload 事件不会在您通过 AJAX 请求加载该代码时触发，因为页面已经加载。

您应该尝试将 Javascript 放在原始页面上，或者可能不使用该事件将代码放入 AJAX 成功事件中，而不是在 AJAX 请求成功完成时触发。

# css - 更改表格背景颜色的问题

> ID：12474338
> 
> 赞同：0
> 
> 时间：2012-09-18T09:40:54.430
> 
> 标签：css

当我在我的css中使用背景颜色来改变表格背景颜色而不是改变背景颜色时，它正在改变文本的颜色

这是我设置表格样式的 CSS 代码

```
.table_styling1 {
 table-layout:fixed;
 width:100%;  
 height:25px; 
 border:1px solid #ccc; 
 background-color:#8B7D7B;
 border-radius:4px;}

.table_styling1 th {
 padding:4px 6px 6px; 
 background:#444; 
 color:#fff; 
 text-align:center; 
 color:#ccc;}

.table_styling1 td {
 padding:2px 4px 4px; 
 background:#fff; 
 border-bottom:1px solid #ccc;}

 .table_styling1 tr { 
 background-color:#FF83FA;}     

 .table_styling1 tr:hover {
 color:#4876FF;} 
```

我应该在我的代码中更改什么以便我可以将背景颜色应用到我的表格我什至尝试使用背景..它也没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:13:28.400

```
.table_styling1 {       
   width:50%;
   border: 2px solid black;
   border-collapse:collapse;}

.table_styling1 th{
   padding:4px;
   background:#444;
   color:#fff;}

.table_styling1 td {
   padding:2px 4px 4px;   
   border-bottom:1px solid #ccc;}

.table_styling1 tr:hover {
   background:#4876FF;
   color:#1E1E1E;}                         

.table_styling1 table,th,td {
   border: 1px solid black;} 
```

我阅读了所有 css 属性并找到了答案，抱歉问错了问题

# ios - iOS：如何序列化不符合 NSCoding 的对象

> ID：12474339
> 
> 赞同：2
> 
> 时间：2012-09-18T09:40:56.210
> 
> 标签：ios, serialization, nscoding

我已经环顾四周，在这里找到了关闭的答案：

> [在 iOS 中保存/序列化自定义对象的正确方法](https://stackoverflow.com/questions/5413851/correct-way-to-save-serialize-custom-objects-in-ios)

但这仅适用于用户创建的自定义对象。我的问题是序列化“SKProduct”，这是一个不符合 NSCoding 的派生类。具体来说，我遇到的确切错误：

```
-[SKProduct encodeWithCoder:]: unrecognized selector sent to instance 0x4027160 
```

有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:32:18.357

**我将通过说可能有一种更简单的方法来作为**这个答案的开头；但是归档和取消归档期间的类替换是您可以采取的一种方法。

在归档期间，您可以选择设置符合`NSKeyedArchiverDelegate`协议的委托。所有方法都是可选的。`archiver:willEncodeObject:`委托在编码期间接收消息消息。如果您希望在归档期间替换一个类，您可以创建一个替换对象并将其返回。否则只返回原始对象。

在您的情况下，您可以创建一个“影子对象”，用于`SKProduct`封装您对序列化感兴趣的原始类的任何属性。然后在归档期间替换该类。在取消归档期间，您可以反转该过程并返回`SKProduct`

出于说明目的，这里有一个示例。请注意，我省略了反向替换部分 - 但如果您阅读文档，`NSKeyedUnarchiverDelegate`我认为它会很清楚。

```
#import <Foundation/Foundation.h>

@interface NoncompliantClass:NSObject
@property (nonatomic,assign) NSInteger foo;
@end

@implementation NoncompliantClass
@synthesize foo = _foo;
@end

@interface CompliantClass:NSObject <NSCoding>
@property (nonatomic,assign) NSInteger foo;
@end

@implementation CompliantClass
@synthesize foo = _foo;

- (void)encodeWithCoder:(NSCoder *)coder {
    [coder encodeInteger:self.foo forKey:@"FooKey"];
}

- (id)initWithCoder:(NSCoder *)coder {
    self = [super init];
    if( !self ) { return nil; }

    _foo = [coder decodeIntegerForKey:@"FooKey"];
    return self;
}

@end

@interface ArchiverDelegate:NSObject <NSKeyedArchiverDelegate>
@end

@implementation ArchiverDelegate
- (id)archiver:(NSKeyedArchiver *)archiver willEncodeObject:(id)object {
    NSString *objClassName = NSStringFromClass([object class]);
    NSLog(@"Encoding %@",objClassName);
    if( [object isMemberOfClass:[NoncompliantClass class]] ) {
        NSLog(@"Substituting");
        CompliantClass *replacementObj = [CompliantClass new];
        replacementObj.foo = [object foo];
        return replacementObj;
    }
    return object;
}
@end

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NoncompliantClass *cat1 = [NoncompliantClass new];
        NoncompliantClass *cat2 = [NoncompliantClass new];
        NSArray *herdableCats = [NSArray arrayWithObjects:cat1,cat2,nil];

        ArchiverDelegate *delegate = [ArchiverDelegate new];
        NSMutableData *data = [NSMutableData data];
        NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
        [archiver setDelegate:delegate];
        [archiver encodeObject:herdableCats forKey:@"badKitties"];
        [archiver finishEncoding];
    }
} 
```

这记录：

```
2012-09-18 05:24:02.091 TestSerialization[10808:303] Encoding __NSArrayI
2012-09-18 05:24:02.093 TestSerialization[10808:303] Encoding NoncompliantClass
2012-09-18 05:24:02.093 TestSerialization[10808:303] Substituting
2012-09-18 05:24:02.094 TestSerialization[10808:303] Encoding NoncompliantClass
2012-09-18 05:24:02.094 TestSerialization[10808:303] Substituting 
```

# python - “视图未返回 HttpResponse 对象”

> ID：12474344
> 
> 赞同：2
> 
> 时间：2012-09-18T09:41:08.517
> 
> 标签：python, django, django-views

这是我得到的错误：`The view extraio.file_uploader.views.Upload_File didn't return an HttpResponse object.`

谁能看到我在这里做错了什么？我似乎无法弄清楚为什么我会得到那个异常，因为我正在返回一个 HttpResponseRedirect。

```
from django.http import HttpResponseRedirect
from django.shortcuts import render_to_response
from models import Files
from forms import Upload_File_Form

def Upload_File(request):
    if request.method == 'POST':
        form = Upload_File_Form(request.POST, request.FILES)
        if form.is_valid():
            for f in request.FILES.get_list('file'):
                f.save()
                orgfilename = Files(orgname=f.name)
                orgfilename.save()
            return HttpResponseRedirect('success.html')
        else:
            form = Upload_File_Form()
            return render_to_response('upload.html', {'form': form}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:45:18.803

您仅应要求返回您的`HttpResponse`对象`POST`。像这样重写你的视图

```
def Upload_File(request):
    form = Upload_File_Form(request.POST or None,
                            request.FILES or None)
    if request.method == 'POST':
        if form.is_valid():
            for f in request.FILES.getlist('file'):
                f.save()
                orgfilename = Files(orgname=f.name)
                orgfilename.save()
            return HttpResponseRedirect('success.html')
   return render_to_response('upload.html', {'form': form},
                             context_instance=RequestContext(request)) 
```

**编辑**：顺便说一句，你忘了设置`context_instance`你`render_to_response` 也可以`render`使用

```
render(request, 'upload.html', {'form': form}) 
```

`request.FILES.get_list('file')`应该`request.FILES.getlist('file')`

# nginx - Nginx 用问号 url 重写问题

> ID：12474346
> 
> 赞同：0
> 
> 时间：2012-09-18T09:41:29.467
> 
> 标签：nginx

我对 Nginx 只有一个问题，

我需要重写代码：

```
domain.com/?fileID  -> /domain.com/xx.php?i=fileID 
```

注意：链接中有问号:)

10 多天以来，我尝试了许多类型的代码来完成这项工作，但我可以得到任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:08:04.167

试试这个：

```
server {
    server_name domain.com;

    location = / {
        if ($args ~* ^[a-z0-9]+$) {
            rewrite ^ /xx.php?i=$args? last;
        }
    }

    location \.php$ {
        # your php handler configuration
    }
} 
```

如果您指定“fileID”的外观并举一些例子会更好。

# c# - 从 c++ 将参数传递给 c# 回调

> ID：12474349
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:41:33.777
> 
> 标签：c#, c++, dll

下面是我在 c# 中的代码...

这里的回调也仅在 c# 中实现。我想要来自 c++ dll 的回调

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;

class Program
{
  //   [DllImport("C:/Users/kool/Documents/Visual Studio 2010/Projects/DLL/Debug/DLL.dll", CallingConvention = CallingConvention.Cdecl)]

    static void Main(string[] args)
    {

        function1(function2);   // i want thia function2 to be fetched from ++ dll

    }

    public delegate void fPointer(); // point to every functions that it has void as return value and with no input parameter 
    public static void function1(fPointer ftr)
    {
        fPointer point = new fPointer(ftr);
        point();
    }
    public static void function2()
    {
        Console.WriteLine("Bla");
    }
} 
```

我将创建一个 DLL，我将从那里将 function2 发送到

```
function1(function2); 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:33:43.987

一种方法是将 C# 程序集作为类型库导出并从 C++ 中使用它，就像它是一个 COM 组件一样。

在 Visual Studio 命令提示符下使用 TlbExp.exe 将 C# 程序集导出为类型库。然后使用 RegAsm.exe 注册类型库。然后在 C++ 代码中使用#import 指令来导入类型库。您现在可以像使用 COM 类一样使用 C++ 中的 C# 类。

有关更多详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/ms172270.aspx](http://msdn.microsoft.com/en-us/library/ms172270.aspx)

编辑：对不起，你想做的是：从 C# 中使用 C++，还是从 C++ 中使用 C#？

任何一个都是可能的。上面的链接解释了如何在 C++ 中使用 C#。这个解释了如何从 C# 使用 C++：http: [//msdn.microsoft.com/en-us/library/z6tx9dw3.aspx](http://msdn.microsoft.com/en-us/library/z6tx9dw3.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:09:00.903

您可以发送指向托管 .net 函数的指针，并从未损坏的代码（回调）中调用它。

详情请看[http://habrahabr.ru/post/130690/](http://habrahabr.ru/post/130690/)（如果需要，请使用 google 将其从俄语翻译，但您需要查看最后两个代码示例）。

还要检查您的代码调用 - 它应该在托管和非托管方面都符合（在 C 代码中使用 __ *stdcall*并在*DllImport*属性中使用*CallingConvention = CallingConvention.Cdecl ）。*

# c++ - extern "C" 函数是单独的类型吗？

> ID：12474351
> 
> 赞同：18
> 
> 时间：2012-09-18T09:41:35.913
> 
> 标签：c++, function-pointers, overloading, extern-c

来自 C++11 草案，7.5（第 1 段）：

> 具有不同语言链接的两个函数类型是不同的类型，即使它们在其他方面相同。

所以我可以根据语言链接进行重载：

```
extern "C" typedef void (*c_function)();
typedef void (*cpp_function)();

void call_fun(c_function f)
{
}
void call_fun(cpp_function f)
{
}

extern "C" void my_c()
{
}
void my_cpp()
{
}
int main()
{
    call_fun(my_c);
    call_fun(my_cpp);
} 
```

但是，对于 GCC 4.7.1，此示例代码给出了错误消息：

```
test.cpp: In function 'void call_fun(cpp_function)':
test.cpp:7:6: error: redefinition of 'void call_fun(cpp_function)'
test.cpp:4:6: error: 'void call_fun(c_function)' previously defined here 
```

并使用 CLang++ ：

```
test.cpp:7:6: error: redefinition of 'call_fun'
void call_fun(cpp_function f)
     ^
test.cpp:4:6: note: previous definition is here
void call_fun(c_function f)
     ^ 
```

现在的问题：

*   我对标准的理解正确吗？此代码有效吗？

*   有人知道这些是编译器中的错误，还是出于兼容性目的而故意这样做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T09:58:15.760

该代码显然是有效的。G++（和许多其他编译器）在将链接集成到类型方面有点松懈（委婉地说）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-18T10:09:52.093

这是 gcc 中的一个已知错误，他们记录它不符合标准，因为这个错误阻止了超级错误，“C++98 一致性问题”。

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=2316](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=2316)

检查创建日期。

最后有一些关于引入修复的实用性的讨论。所以你最后一个问题的答案是“两者”：这是一个错误*，并且*为了兼容性而故意留下了这个错误。

其他具有相同问题的编译器可能独立地犯了错误，但我认为他们更有可能也知道这是错误的，但希望与 gcc 兼容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:14:09.773

值得一提的是，这段代码也无法使用 VS2012 中的默认设置进行编译：

```
(8) error C2084: function 'void call_fun(c_function)' already has a body
(4) see previous definition of 'call_fun'
(19) error C3861: 'call_fun': identifier not found
(20) error C3861: 'call_fun': identifier not found 
```

# php - jQuery字段更改提交不起作用

> ID：12474352
> 
> 赞同：1
> 
> 时间：2012-09-18T09:41:38.857
> 
> 标签：php, jquery, forms, input, submit

我有下面的表单，我想从中删除提交按钮（或隐藏它）。

```
<form action="cart.php" method="post">
<input name="quantity" type="text" value="3" size="1" maxlength="2" />
<input name="adjustBtn" type="submit" value="change" />
<input name="item_to_adjust" type="hidden" value="1" />
</form> 
```

在我已包含在页面中的名为 test.js 的 jQuery 文件中，当输入字段“数量”发生更改时，我应该提交表单，但它没有，我无法让它工作，我已经尝试了所有SO上其他帖子的各种表单提交功能。一个人甚至说，如果提交按钮的名称是提交，它将不起作用，但我没有。

```
$(document).ready( function() {

    $('#quantity').change(function(){
       //$(this).closest("form").submit(); <-- commented out as not working either.
       //$(this).closest('form')[0].submit(); <-- commented out as not working either.
       $('#adjustBtn').submit();
    });

} ); 
```

有人知道为什么它不会提交表格吗？我已经在 chrome 和 IE 中进行了测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:43:06.177

您需要提交`form`而不是`button`：

```
$("#adjustBtn").closest("form").submit(); 
```

另外，你没有给`id`你的`adjustBtn`，因此`$("#adjustBtn")`不会工作；

```
<input id="adjustBtn" name="adjustBtn" type="submit" value="change" /> 
```

同样的事情发生在`#quantity`，这就是为什么`change`处理程序不会被解雇，你还需要添加`id`：

```
<input id="quantity" name="quantity" type="text" value="3" size="1" maxlength="2" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:42:57.253

它应该是：

```
<form action="cart.php" method="post" id="autoSubmit">
<input name="quantity" type="text" value="3" size="1" maxlength="2" />
<input name="item_to_adjust" type="hidden" value="1" />
</form> 
```

和 jQuery：

```
$(document).ready( function() {

    $('#quantity').change(function(){
       $('#autoSubmit').submit();
    });

} ); 
```

# html - 使用相对定位时 Html 页面获取滚动条

> ID：12474353
> 
> 赞同：1
> 
> 时间：2012-09-18T09:41:39.790
> 
> 标签：html, css, positioning

我有以下问题：我的页面有一个包含项目的图像。我将隐藏的 div 放在项目上以创建鼠标悬停效果。我用相对位置进行 div 的定位。一切正常，但我在页面末尾有一个空白区域和一个滚动条:(

```
 <div style="height: 620px;">
    <?php echo image_tag('startpage/bg.png', array('style' => 'width: 124px; height: 620px; border:0;'))?><?php echo image_tag('startpage/startpage.png', array('style' => 'border:0;'))?><?php echo image_tag('startpage/bg.png', array('style' => 'width: 124px; height: 620px; border:0;'))?>
    <div id="start-circle" style="position:relative; border-radius: 40px; width:80px; height: 80px; top: -281px; left: 157px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0)">&nbsp;</div>
    <div id="segmentation-circle" style="position:relative; border-radius: 58px; width:115px; height: 115px; top: -377px; left: 286px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0)">&nbsp;</div>
      <div id="campaign-circle" style="position:relative; border-radius: 58px; width:115px; height: 115px; top: -490px; left: 456px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="overview-circle" style="position:relative; border-radius: 40px; width:80px; height: 80px; top: -748px; left: 585px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="dm-circle" style="position:relative; border-radius: 40px; width:80px; height: 80px; top: -730px; left: 585px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="td-circle" style="position:relative; border-radius: 40px; width:80px; height: 80px; top: -711px; left: 585px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="offer-circle" style="position:relative; border-radius: 40px; width:80px; height: 80px; top: -695px; left: 585px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="program-rectangle" style="position:relative; width:112px; height: 25px; top: -1072px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="country-rectangle" style="position:relative; width:112px; height: 25px; top: -1066px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="metric-rectangle" style="position:relative; width:112px; height: 25px; top: -1059px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="email-rectangle" style="position:relative; width:112px; height: 25px; top: -1047px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="tm-rectangle" style="position:relative; width:112px; height: 25px; top: -1040px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="dm-rectangle" style="position:relative; width:112px; height: 25px; top: -1035px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="ad-rectangle" style="position:relative; width:112px; height: 25px; top: -1022px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="sm-rectangle" style="position:relative; width:112px; height: 25px; top: -1017px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="pr-rectangle" style="position:relative; width:112px; height: 25px; top: -1012px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="event-rectangle" style="position:relative; width:112px; height: 25px; top: -983px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="ma-rectangle" style="position:relative; width:112px; height: 25px; top: -977px; left: 677px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="submit-circle" style="position:relative; border-radius: 40px; width:80px; height: 80px; top: -1187px; left: 851px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
      <div id="end-circle" style="position:relative; border-radius: 40px; width:80px; height: 80px; top: -1267px; left: 989px; background-color: #ffffff; opacity: 0; filter:alpha(opacity=0);">&nbsp;</div>
  </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:44:28.193

使用**margin-top**而不是**top**因为**top与****position:relative**产生相反的差距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T18:58:04.600

设置 position:relative 到他们的父 div，然后在孩子上使用 position:absolute。

# opengl - glBindVertexArray 随机 INVALID_OPERATION

> ID：12474355
> 
> 赞同：1
> 
> 时间：2012-09-18T09:41:49.907
> 
> 标签：opengl, opengl-3

我遇到了一个奇怪的崩溃，在尝试绑定 VAO 时随机出现。

VAO 本身之前已由 glGenVertexArrays 生成，它不会返回任何错误。

```
glGenVertexArrays(NUM_VAO,vao);
glGenBuffers(NUM_VAO,vbo);

glBindVertexArray(vao[2]);
glBindBuffer(GL_ARRAY_BUFFER,vbo[2]);
glBufferData(GL_ARRAY_BUFFER,1024*sizeof(GLfloat),NULL,GL_DYNAMIC_DRAW);
glVertexAttribPointer(...);
glEnableVertexAttribArray(...); 
```

在执行期间，调用：

```
glBindVertexArray(vao[2]) 
```

可能会也可能不会生成 INVALID_OPERATION。请注意，vao[2] 的内容与 glGenVertexArrays 返回的内容相同，并且该数组在执行期间永远不会被删除。

根据规范，只有在传递了一个非零名称并且 glGenVertexArrays 没有返回名称本身时才会发出 INVALID_OPERATION，这显然不是这种情况。

该问题偶尔会出现，大约只有 15% 的应用程序运行时间，否则一切都按预期工作。在调试模式下问题仍然存在。

我刚刚升级了我的工作站，我曾经在 OpenSUSE 12.1 上使用 NVidia 驱动程序 290.10 和 Qt 4.7.1 进行开发，但从未遇到过这个问题。

我刚刚使用 NVidia 驱动程序 304.43 和 Qt 4.8.1 迁移到 OpenSUSE 12.2，我遇到了这个问题。

以前有人遇到过这种情况吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:58:16.677

好吧好吧我的错，有一个 glDeleteVertexArrays() 疯了..但它真的很难被发现。

假设在旧的操作系统和驱动程序上返回的名称、初始内存布局或其他任何不同的东西，它只是删除了一个不存在的 VAO，而这里它指向一个有效的..

更改 linux 版本/发行版或使用 BSD 确实对我编写真正可移植的代码有很大帮助。

# python - 如何将输入字符串小部件添加到 Plone 中的事件模板

> ID：12474359
> 
> 赞同：0
> 
> 时间：2012-09-18T09:42:05.090
> 
> 标签：python, plone

我希望将自定义输入字段属性添加到默认事件页面模板（或者扩展它）。我不知道哪个是相同的模板，它位于 ZMI 的什么位置。

我希望添加自定义元数据，如客户姓名、律师姓名等。我知道如何添加相同的元数据，但如何扩展活动的默认模板。

其他选项：如果我使用 ploneformgen 相同，我怎样才能获得创建的事件的日历视图？最后希望有自定义数据输入的日历视图，其中创建输入的开始和结束日期，这是可搜索的。集合的数据应该是可搜索的，并且应该具有包含表格视图中相关文档的“文件夹的超链接”？

我正在使用`zettwerk.fullcalendar`plone 4.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:33:50.480

[使用http://pypi.python.org/pypi/archetypes.schemaextender](http://pypi.python.org/pypi/archetypes.schemaextender)向现有事件类型添加额外字段

这不是你可以做的事情TTW。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:26:21.377

在 /site/portal_skins/event_view 找到您可以自定义的模板。至少知道从哪里开始。但是当我使用自定义选项卡时，我得到了 python 表达式的错误，而没有将代码更改为：

> 宏扩展失败：小部件在测试中，它显示 python 表达式错误： Module Products.PageTemplates.ZRPythonExpr, line 48, in **call** __traceback_info__: context.start().Date() == context.end().Date()模块 PythonExpr，第 1 行，模板代码为：

```
<tal:differentday tal:condition="python:context.start().Date() == context.end().Date()"
                                              i18n:translate="event_when_differentday"> 
```

任何人都可以指导上述表达式中的错误是什么？

# scala - Scala 2.10 反射：为什么我会为列表和列表元素获得相同类型的“List()”？

> ID：12474360
> 
> 赞同：4
> 
> 时间：2012-09-18T09:42:05.703
> 
> 标签：scala, scala-2.10

使用 scala-2.10.0-M7，考虑以下 Scala 程序：

```
import reflect.runtime.universe._

object ScalaApplication {
  def main(args: Array[String]) {
    val list = List(42)
    printValueAndType(list)
    printValueAndType(list(0))

  }

  def printValueAndType (thing: Any) {
    println("Value: " + thing)
    println(reflect.runtime.currentMirror.reflect(thing).symbol.toType match {case x:TypeRef => "Type: " + x.args});
  }

} 
```

它提供以下输出：

```
$ scala ScalaApplication.scala 
Value: List(42)
Type: List()
Value: 42
Type: List() 
```

为什么 的 类型 与`list`的 类型 相同`list(0)`？

我本来期望类似于以下 Java 程序的行为的东西：

```
public class JavaApplication {
    public static void main(String[] args) {

        Integer[] list = new Integer[]{42};

        printValueAndType(list);
        printValueAndType(list[0]);

    }

    public static void printValueAndType(Object o) {
        System.out.println("Value: " + o.toString());
        System.out.println("Type: " + o.getClass().getSimpleName());
    }

} 
```

这给出了结果：

```
$ java JavaApplication
Value: [Ljava.lang.Integer;@16675039
Type: Integer[]
Value: 42
Type: Integer 
```

总结：为什么列表和列表元素的类型都报告为`List()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:13:47.647

`x.args`为您提供类型的*类型参数*。由于它们在运行时不可用，因此您会在第一种情况下获得一个空列表，并且由于`Int`没有任何类型参数，因此您也会在那里获得一个空列表。您可以直接打印出符号。

```
println(reflect.runtime.currentMirror.reflect(thing).symbol) 
```

这产生

```
Value: List(42)
class ::
Value: 42
class Integer 
```

# java - 如何在java中创建顶部有交替彩色行和图片的pdf文件

> ID：12474361
> 
> 赞同：1
> 
> 时间：2012-09-18T09:42:20.220
> 
> 标签：java, itext

我正在使用`com.itextpdf.text.*`以下生成pdf文件是我的代码，它创建带有突出显示的标题和标题和行的pdf文件，我想要做的是，创建一个顶部带有图像的pdf文件和带有备用颜色的行，如何做到这一点使用`com.itextpdf.text.*`

```
response.setHeader("Content-disposition", "attachment; filename=\"" + reportName + ".pdf\"");
        response.setContentType("application/pdf");
        PdfWriter.getInstance(document,response.getOutputStream());

        try {
            document.open();
            addTitlePage(document, reportName);

            //float[] colsWidth = {1.5f,3f,4f,4f,2f};

            List<Float> colsWidth = new ArrayList<Float>();
            int iterator = 1;
           while (iterator <= headerMap.size()) {
               if(iterator==1){
                   colsWidth.add(1.5f); 
               }else{
                colsWidth.add(3f); 
               }
                iterator++;
            }
           float[] floatArray = ArrayUtils.toPrimitive(colsWidth.toArray(new Float[0]), 0.0F);

           PdfPTable table = new PdfPTable(floatArray);
            table.setWidthPercentage(98);
            table.setHorizontalAlignment(Element.ALIGN_CENTER);

            PdfPCell c1 = new PdfPCell();
            for (Iterator it = headerMap.keySet().iterator(); it.hasNext();) {
                String headerName = (String) headerMap.get(it.next());
                c1 = new PdfPCell(new Phrase(headerName, headerFont));
                c1.setBackgroundColor(BaseColor.LIGHT_GRAY);
                table.addCell(c1);
            }
            table.setHeaderRows(1);
            table = custDAO.creadPDFTable(query, table);
            document.add(table);
            document.addAuthor(userViewModel.getUsername());
            document.addCreationDate();
            document.addCreator("POC");
            document.close();
            response.flushBuffer();

public PdfPTable creadPDFTable(String query,PdfPTable table){
        int numberOfColumns=0,sno=1;
        Connection connection = getConnection();
        if (connection != null) {
            try {
                PreparedStatement reportTablePS = connection.prepareStatement(query);
                ResultSet reportTable_rst = reportTablePS.executeQuery();
                ResultSetMetaData reportTable_rsmd = reportTable_rst.getMetaData();
                numberOfColumns = reportTable_rsmd.getColumnCount();
                while (reportTable_rst.next()) {
                    table.addCell(new PdfPCell(new Paragraph(String.valueOf(sno), textFont)));
                            for (int columnIterator = 1; columnIterator <= numberOfColumns; columnIterator++) {
                                 String column = reportTable_rst.getString(columnIterator);
                                 table.addCell(new PdfPCell(new Paragraph(column, textFont)));
                            }
                            sno++;
            }
            } catch (Exception ex) {
                ex.printStackTrace();
            }finally {
                try {
                    closeConnection(connection, null, null);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        }
        return table;
    }

private static void addTitlePage(Document document, String reportName) throws DocumentException {
        Paragraph preface = new Paragraph();
        addEmptyLine(preface, 1);
        /**
         * Lets write a big header
         */
        Paragraph paragraph = new Paragraph(reportName, titleFont);
        paragraph.setAlignment(Element.ALIGN_CENTER);
        document.add(paragraph);

        /**
         * Add one empty line
         */
        addEmptyLine(preface, 1);
        document.add(preface);
    }
    private static void addEmptyLine(Paragraph paragraph, int number) {
        for (int i = 0; i < number; i++) {
            paragraph.add(new Paragraph(" "));
        }
    } 
```

当我使用以下内容时，我得到以下异常'getoutputstream（）已经调用了这个响应'

我想用它来插入图像。

```
 Image image = Image.getInstance(path+"images/abi.png");
            image.setAbsolutePosition(40f, 770f);
            image.scaleAbsolute(70f, 50f);
            document.add(image); 
```

那么如何去做呢？

更新 ：

我想创建一个像[这样](http://java.cete.com/DynamicPDFv60/InvoiceMerger?invoiceno=10248&invoiceno=10249&invoiceno=10250&invoiceno=10251&invoiceno=10252&invoiceno=10979&btnCreateInvoices=Create%20Invoices)的 pdf 文件我只想在顶部添加图像和像这样使用交替颜色的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:57:24.903

您可以使用 XSLFO 和 Apache FOP。它对我有用。为了添加图像，我在 XSL 中进行了更改。

如需参考，请访问 [http://www.codeproject.com/Articles/37663/PDF-Generation-using-XSLFO-and-FOP](http://www.codeproject.com/Articles/37663/PDF-Generation-using-XSLFO-and-FOP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:53:40.690

[http://what-when-how.com/itext-5/decorating-tables-using-table-and-cell-events-itext-5/](http://what-when-how.com/itext-5/decorating-tables-using-table-and-cell-events-itext-5/)

[![](../Images/a9d42330232c8e73eaaabf72ac53b03f.png)](https://i.stack.imgur.com/704n7.jpg)
[（来源：[what-when-how.com](http://what-when-how.com/wp-content/uploads/2011/06/tmp17C198_thumb.jpg)）]

[![](../Images/31dda7d74cb94f97b3df1fe382b79752.png)](https://i.stack.imgur.com/FgvJp.jpg)
[（来源：[what-when-how.com](http://what-when-how.com/wp-content/uploads/2011/06/tmp17C199_thumb.jpg)）]

# parameters - 使用 Solr 索引参数化产品

> ID：12474362
> 
> 赞同：0
> 
> 时间：2012-09-18T09:42:22.090
> 
> 标签：parameters, solr, indexing

我们必须在我们的在线商店中准备新的搜索功能。我想知道我们可以使用 Solr。但我对此有些怀疑。我们报价中的每一个产品都是参数化的。实际上一个产品是一堆参数。它有一个符号，另一个符号，生产者，参数，参数，参数。我们拥有的关于我们产品的一切都是它们的参数。有些参数是单值，有些是多值。

是否可以索引我们的产品数据库并让我们的用户按产品参数过滤？这对我们来说非常重要，因为我们的客户已经习惯了使用高级过滤进行搜索。用多种语言索引这些参数怎么样？

感谢帮助！

哦，还有一件事，Solr 可以只使用单词的一部分进行搜索吗？例如，我有一个符号为 ABCDEFG 的产品。如果搜索 ABC 或 DEFG 会怎样？Solr 可以处理这样的搜索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:18:35.873

您可以通过不同的参数字段进行过滤或分面（分面允许浏览内容 - 我想这就是您要寻找的内容）。多种语言的索引也不是问题 - 现有的支持基础设施 - 请参阅 SOLR 语言识别描述。不过需要注意的一件事 - 拥有大量字段 + 许多（数百万甚至更多）记录 + 许多方面将消耗大量内存并“可能”降低性能。谈到 ABC 或 DEFG - 为什么不使用通配符？ABC* 或*DEFG。ABC*将开箱即用，*DEFG 更消耗资源并且需要特殊的分析器 - 它只是将您的字段索引到具有相反顺序的特殊字段中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T10:58:15.520

你说的是solr方面吗？solr 有一个非常好的方面实现。看看这个： [http](http://wiki.apache.org/solr/SolrFacetingOverview) ://wiki.apache.org/solr/SolrFacetingOverview 。

对于您的第二个问题， solr 无法处理。您必须编写自己的 lucene 分析器以在索引期间将单词拆分为多个部分。您可以在 solr schema.xml 中配置自己的分析器。您需要首先检查什么是 lucene 分析器。实现分析器并不难。尝试使用 trie 或 java 树集。或者你可以在谷歌上找到一些强大的分析器实现。

# php - PHP 重定向返回“无法修改标头信息”

> ID：12474365
> 
> 赞同：0
> 
> 时间：2012-09-18T09:42:44.057
> 
> 标签：php, url, redirect

我目前有一个非常简单的页面，可以重定向到另一个 URL。但是由于某种原因，我无法让它工作。

我相信这个问题有一个非常简单的解决方案，任何帮助我理解到底发生了什么都将不胜感激。

这是我的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test - Youtube</title>
</head>
<body>
    <?php 
    ob_start();
    header('Location: vnd.youtube:xjTEqVQVsQs'); 
    ob_end_flush();
    ?>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:48:00.373

在发送标头之前，您的页面上有一些输出，这就是您无法重定向的原因，您应该像这样使用输出缓冲：

```
<?php

ob_start();

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test - Youtube</title>
</head>
<body>

<?php 

header('Location: vnd.youtube:xjTEqVQVsQs');
die();

?>

</body>
</html>

<?php

ob_end_flush();

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:46:14.270

```
<?php 
ob_start();
header('Location: vnd.youtube:xjTEqVQVsQs'); 
ob_end_flush();
?> 
```

如果它只是一个重定向页面，则删除除上述 php 代码之外的所有 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:55:40.393

由于重定向将标头发送到浏览器，因此必须在任何输出之前发送它。您可以使用以下方法使用不同的方法进行重定向，具体取决于是否已发送标头：

```
<?php
function redirect($filename) {
    if ( ! headers_sent())
        header('Location: '.$filename);
        exit; // just a good practice to EXIT after redirecting
    else {
        echo '<script type="text/javascript">';
        echo 'window.location.href="'.$filename.'";';
        echo '</script>';
        echo '<noscript>';
        echo '<meta http-equiv="refresh" content="0;url='.$filename.'" />';
        echo '</noscript>';
    }
}
redirect('http://www.google.com');
?> 
```

如果标头已经发送，这将回退到使用 javascript。

如果你想使用[header()](http://www.php.net/header)方法，它必须在任何其他输出（包括空格）之前位于代码的顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:51:40.090

您应该删除除 PHP 脚本之外的所有页面内容：

```
<?php 
ob_start();
header('Location: vnd.youtube:xjTEqVQVsQs'); 
ob_end_flush();
?> 
```

或者

将您的 PHP 脚本放在页面顶部：

```
<?php 
    ob_start();
    header('Location: vnd.youtube:xjTEqVQVsQs'); 
    ob_end_flush();
?> 
```

确保上面的 php 标记之前没有空格。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test - Youtube</title>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T09:46:08.623

这就是代码的样子：

```
 <?php 
    ob_start();
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test - Youtube</title>
    </head>
    <body>
    <?php
    header('Location: vnd.youtube:xjTEqVQVsQs'); // Are you sure that's the right 
address?
    ?>
    </body>
    </html>
    <?php
    ob_end_flush();
    ?> 
```

无论如何，页面正在重定向到另一个页面，为什么需要 html 标签？

# c# - 将字符串拆分为字典作为键，列表

> ID：12474366
> 
> 赞同：1
> 
> 时间：2012-09-18T09:42:45.900
> 
> 标签：c#, c#-4.0

我有一个字符串类型，它将以格式返回数千条记录

`key1,val1,val2,val3,val4,val5:key2,val6,val7,val8,val9,val10:key3,val11,val12,val13,val14,val15`

我想将它作为 Key,List 分配给字典，所以它看起来像

key1,[val1,val2,val3,val4,val5]

key2,[val6,val7,val8,val9,val10]

key3,[val11,val12,val13,val14,val15]

. . .

字符串中的所有键都是唯一的，并且所有记录的列表大小都是恒定的。

目前我正在使用拆分并使用循环每个记录

```
 //short example string - may contain 1000's
    string newstr = @"key1,val1,val2,val3,val4,val5:key2,val6,val7,val8,val9,val10:key3,val11,val12,val13,val14,val15";

    Dictionary<string, List<string>> mydictionary = new Dictionary<string, List<string>>();
    foreach (string item in newstr.Split(':'))
    {
        List<string> list = new List<string>(item.Split(','));
        mydictionary.Add(list[0], list);        
    } 
```

我的问题是，有没有更有效/更快的方法来使用 C#4.0 而不是循环来处理 1000 条记录？

**更新：**测试了各种答案后，以下是“正确”时间

![在此处输入图像描述](../Images/fb6632e631039e2e46a0350b90553368.png)

```
static void Main(string[] args)
{
    System.IO.StreamReader myFile =  new System.IO.StreamReader(@"C:\Users\ooo\Desktop\temp.txt");
    string newstr = myFile.ReadToEnd();
    myFile.Close();

    TimeSpan ts;
    TimeSpan te;
    Stopwatch stopWatch = new Stopwatch();
    stopWatch.Start();

    ts = stopWatch.Elapsed;
    Dictionary<string, List<string>> mydictionary = new Dictionary<string, List<string>>();
    foreach (string item in newstr.Split(':'))
    {
        List<string> list = new List<string>(item.Split(','));
        mydictionary.Add(list[0], list);
    }
    te = stopWatch.Elapsed;
    Console.WriteLine("MyTime: " + (te - ts).ToString());

    ts = stopWatch.Elapsed;
    var result = newstr.Split(':')
         .Select(line => line.Split(','))
         .ToDictionary(bits => bits[0],
                       bits => bits.Skip(1).ToList());
    te = stopWatch.Elapsed;
    Console.WriteLine("JonSkeet: " + (te - ts).ToString());

    ts = stopWatch.Elapsed;
    string[] keysAndValues = newstr.Split(':');
    var newdictionary = new Dictionary<string, List<string>>(keysAndValues.Length);
    foreach (string item in keysAndValues)
    {
        List<string> list = new List<string>(item.Split(','));
        newdictionary.Add(list[0], list);
    }
    te = stopWatch.Elapsed;
    Console.WriteLine("Joe: " + (te - ts).ToString());

    Console.WriteLine("Records: " + mydictionary.Count.ToString());

    stopWatch.Stop();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:10:31.250

以下可能更快，因为字典的构建具有避免重新分配所需的容量：

```
//short example string - may contain 1000's     
string newstr = ...;

string[] keysAndValues = newstr.Split(':');
var mydictionary = new Dictionary<string, List<string>>(keysAndValues.Length);
foreach (string item in keysAndValues)     
{         
    List<string> list = new List<string>(item.Split(','));         
    mydictionary.Add(list[0], list);
    // remove key from list to match Jon Skeet's implementation
    list.RemoveAt(0);
} 
```

虽然比 Jon Skeet 的 LINQ 版本可读性差。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:04:55.650

运行您针对 LINQ 解决方案（如 @JonSkeet 的）发布的代码表明，对于 1000 多条记录，LINQ 花费的时间大约是当前方法的两倍。

因此要回答你的问题：

> 有没有更有效/更快的方法来使用 C#4.0 而不是循环对 1000 条记录执行此操作？

我会说不。

基准测试代码：

```
 var value = "key{0},val1,val2,val3,val4,val5:";
 string newstr = "";
 for (int i = 0; i <= 1000; i++)
 {
     newstr += String.Format(value, i + 1);
 }

 var sw = new System.Diagnostics.Stopwatch();
 sw.Start();
 Dictionary<string, List<string>> mydictionary = new Dictionary<string, List<string>>();
 foreach (string item in newstr.Split(':'))
 {
     List<string> list = new List<string>(item.Split(','));
     mydictionary.Add(list[0], list);
 }
 sw.Stop();
 Console.WriteLine("Looping time: " + sw.Elapsed.ToString());
 sw.Reset();
 sw.Start();
 var result = newstr.Split(':')
                    .Select(line => line.Split(','))
                    .ToDictionary(bits => bits[0],
                                  bits => bits.Skip(1).ToList());
 sw.Stop();
 Console.WriteLine("LINQ time: " + sw.Elapsed.ToString());
 Console.ReadKey(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T09:46:42.443

听起来你想要这样的东西：

```
var result = text.Split(':')
                 .Select(line => line.Split(','))
                 .ToDictionary(bits => bits[0],
                               bits => bits.Skip(1).ToList()); 
```

当然，它可能不会更有*效率*……您是否测量过它需要这样做？如果您只是为“数千”条记录执行此操作，我希望它会在眨眼之间完成。此外，我希望任何 IO（网络、磁盘）在此代码之前成为瓶颈。

从您的评论中：

> 它实际上非常快而且不是瓶颈，但如果有更快的替代方案，我总是尽量避免循环

不要那样做。瞄准*最简单*的代码来完成这项工作，然后检查它是否表现*得足够好*。我个人更喜欢我的基于 LINQ 的代码，但您现有的代码也很好。任何更快的替代方案都可能最终变得更加难以编写、读取和维护。如果收益微不足道，您为什么要为此付出努力？

请注意，我的代码*没有*将键作为列表中的第一个值 - 它与规范匹配，但与您的示例代码不匹配。

# jquery - Jquery - 如何添加一条消息并清除上一条？

> ID：12474367
> 
> 赞同：1
> 
> 时间：2012-09-18T09:42:47.033
> 
> 标签：jquery

我的网页如下；

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<SHP.Models.AdditionalDepartmentsViewModel>" %>
<%@ Import Namespace="SHP.Helpers" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Additional Departments</title>
</head>
<body>
    <p>For SHP <%: Model.Employee.Forename %> <%: Model.Employee.Surname %> has been assigned to 
        <%: Model.Employee.BusinessUnit.BusinessUnitName %>.</p>
    <p>For MNet <%: Model.Employee.Gender.GetThirdPersonSingularPronoun()%> you can assign the Departments here as well.</p>
    <div id="TableBusinessUnits">
        <div id="leftSide">
            <table>
                <tr>
                    <th>Departments</th>
                    <th></th>
                </tr>
                <%: Html.EditorFor(model => model.Departments) %>
            </table>
        </div>
        <div id="rightSide" style="padding-right:50px;">
            <table>
                <tr>
                    <th>Divisions</th>
                    <th></th>
                </tr>
                <%: Html.EditorFor(model => model.Divisions) %>
            </table>                        
        </div>
    </div>
</body>
</html>
<script type="text/javascript">
    $(document).ready(function () {
        var elementId;
        $('tr input[type="checkbox"]').click(function () {
            elementId = $(this).attr('id');
            var url = $(this).attr('data-url');
            var employeeId = $(this).attr('data-employeeId');
            var businessUnitId = $(this).attr('data-businessUnitId');
            var selectedFlag = $(this).is(':checked');

            dataService.saveSelection(
            employeeId,
            businessUnitId,
            selectedFlag,
            elementId,
            SavedSetting,
            url
        );
        });
    });

    SavedSetting = function (data) {
        $(data.ElementId).after('<span class="error">' + data.Message + '</span>');
    };
</script> 
```

EditorFor 命令为此编辑器模板提供循环；

```
<tr>
    <td><%: Model.BusinessUnit.BusinessUnitName %></td>
    <td>
    <%: Html.CheckBoxFor( 
            x => x.Selected,
            new RouteValueDictionary 
            { 
                { "data-url", Url.Action("AddBusinessUnitForEmployee", "DataService") }, 
                { "data-employeeId", Model.EmployeeId }, 
                { "data-businessUnitId", Model.BusinessUnit.BusinessUnitId } 
            } 

       ) %> 

    </td>
</tr> 
```

上面的最后一段 JQuery -

```
SavedSetting = function (data) {
            $(data.ElementId).after('<span class="error">' + data.Message + '</span>');
        }; 
```

*   在表格中的复选框之后放置一条消息。我想做的是清除上一条消息（如果存在）。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:45:22.230

定义 -

```
$('.error').empty(); 
```

在其中添加消息之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:01:29.573

你也可以使用这个。
$('.error').text('');

# c# - 在备忘录中向用户显示剩余的字符数编辑

> ID：12474369
> 
> 赞同：0
> 
> 时间：2012-09-18T09:42:53.017
> 
> 标签：c#, winforms, devexpress

我的表单上有一个 memoEdit，并且我将用户限制为 1024 个字符。我在这个 memoEdit 下添加了一个标签（正如我在附图中标记的那样），我希望当用户在这个 memoEdit 上创建一些东西时向他展示剩余的字符。我怎样才能做到这一点 ？

附图：

![](../Images/f8187e9223d6fe1391d75767cd67acd2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T14:03:07.007

检查 [备忘录编辑成员](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsMemoEditMembersTopicAll)文档

> **EditValueChanged** - 在编辑值更改后立即触发。（继承自 BaseEdit）
> 
> **EditValueChanging** - 当编辑器的值即将改变时触发。（继承自 BaseEdit）

```
void me_EditValueChanging(object sender, DevExpress.XtraEditors.Controls.ChangingEventArgs e)
{
   var memo = (sender as MemoEdit);
   var maxChars = memo.Properties.MaxLength;
   lblContactWithCharCount.Text = memo.Text.Length + "/" + maxChars;
} 
```

检查另一个解决方案：[将字符计数器添加到 MemoExEdit 控件](https://stackoverflow.com/questions/3424171/add-character-counter-to-memoexedit-control)

*订阅 MemoExEdit 控件的 Popup 事件，然后在其中订阅 EditValueChanging 事件。*

希望这有帮助..

# php - jqGrid：如何使用导航器中的添加行在数据库中插入数据？

> ID：12474371
> 
> 赞同：0
> 
> 时间：2012-09-18T09:42:58.397
> 
> 标签：php, jquery, mysql, jqgrid

这是我的 jQuery 脚本

```
$("table#list").jqGrid({
url:'example.php',
datatype: 'json',
mtype: 'POST',
colNames:['ID', 'Position', 'Abrv', 'Department'],
colModel :[ 
{name:'id', index:'id', width:40, hidden: true, editrules:{edithidden:true}}, 
{name:'position', index:'position', width:300, editable: true, required: true},
{name:'abvr', index:'abvr', width:50, editable: true, required: true}, 
{name:'department', index:'department', editable: true, edittype: 'select', editoptions:{dataUrl: 'test2.php'}}
],
width: 600,
height: 250,
rownumbers: true,
pager: '#pager',
rowNum: 10,
rowList:[10,20],
sortname: 'id',
sortorder: 'ASC',
viewrecords: true,
gridview: true,
caption: 'Position',
loadError : function(xhr,st,err) {
$("#rsperror").html("Type: "+st+"; Response: "+ xhr.status + " "+xhr.statusText);
},
editurl: 'insertDB.php'
}); 
```

插入数据库.php

```
 if($_POST['oper'] == 'add'){
$position = $_POST['position'];
$department = $_POST['department'];

$query = "INSERT INTO test_position VALUES ('', '$position', '$department')";
$run = mysql_query($query);
} 
```

当我提交表单时没有任何反应。我的数据库同样没有更新。

1.  我在 PHP 中的 post 变量不正确吗？
2.  有没有办法获取 insertDB.php 返回的内容并在 jQuery 中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:31:16.330

我忘了选择一个数据库。我在使用 FireBug 后发现。

# python - 带有 Python 导入的无限循环；寻找 Pythonic 方式

> ID：12474374
> 
> 赞同：2
> 
> 时间：2012-09-18T09:43:13.600
> 
> 标签：python, architecture, import, infinite-loop

我的团队正在使用 Django 进行大型项目。为了简单起见，这里用普通的 Python 来说明问题（原始问题有模型和应用程序而不是类（我知道它们都是类）和包（我知道它们也是包））。

*一个.py*：

```
from b import B1

class A1(object):
    def __init__(self):
        print "object A1"

class A2(object):
    def __init__(self):
        print "object A2"

A1()
B1() 
```

*b.py*：

```
from a import A2

class B1(object):
    def __init__(self):
        print "object B1"

A2() 
```

当*a.py*被调用时，它会尝试从*b包中导入**B1*，另一方面，它会尝试从包中导入A2 *，**然后*从头开始，这将永远重复。蟒蛇说：

 ***```
[dagrevis@localhost recursion]$ python2 a.py
Traceback (most recent call last):
  File "a.py", line 1, in <module>
    from b import B1
  File "/home/dagrevis/Python/recursion/b.py", line 1, in <module>
    from a import A2
  File "/home/dagrevis/Python/recursion/a.py", line 1, in <module>
    from b import B1
ImportError: cannot import name B1 
```

解决方案之一是每个对象有一个文件。像 C++ 或 Java 这样的东西。然后我想起了 Guido 关于 Python 的话：“不要用 Python 编写 Java（或 C++，或 Javascript，...）。”。是否有更多 Pythonic 方式来处理这个问题？

感谢任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:37:00.643

您的用例不是“可解决的”。您可以将`ImportError`转换为`AttributeError`导入模块`a`（和`b`）而不是导入对象，但这不会改变您将无法使用这些模块的事实。

问题是您的模块`a`需要`b`在导入之前完全执行，但也需要在`b`导入`a`之前完全执行。

这根本无法解决，这是需要重构的明显症状：您的`a`和`b`模块应该是单个模块（或者您可能想要进行更深入的重构）。

编辑：实际上你可以解决这个问题，即使我认为这样做很丑陋，在需要时将导入放在文件的末尾。但我认为这只是解决一些更大问题的补丁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:43:43.493

您的示例过于简化 - 它没有解释为什么需要周期性导入。但无论如何，这是将其重构为可运行代码的一种方法：

一个.py：

```
class A1(object):
    def __init__(self):
        print "object A1"

class A2(object):
    def __init__(self):
        print "object A2" 
```

b.py：

```
class B1(object):
    def __init__(self):
        print "object B1" 
```

c.py：

```
from a import A1, A2
from b import B1

A1()
A2()
B1() 
```***

# c# - 如何使用多个 SettingsProviders

> ID：12474377
> 
> 赞同：1
> 
> 时间：2012-09-18T09:43:33.873
> 
> 标签：c#, application-settings, settingsprovider

到目前为止，我一直将用户设置存储在注册表中，但我正在尝试使用`ApplicationSettings`. 从表面上看，事情很简单，但我在创建嵌套组时遇到了麻烦。

我有几个设置（在用户范围内）需要根据用户当前活跃的客户而有所不同。

例如，我可能会加载客户`Mr Bloggs`，并且设置`DefaultPrice`应该是`12.34`，但随后我会将客户更改为`Mr Smith`，他的`DefaultPrice`应该是`22.90`。

我尝试使用自定义`SettingsProvider`，但在更改客户时无法刷新设置。如果我缺少一些简单的东西，我已经考虑过不使用`ApplicationSettings`但不想重新发明轮子。

*我正在使用 C#、.NET 4.0 Full 和 Visual Studio 2010。* 我该如何解决这个问题？

# c++ - 类型转换自定义 C++ 类

> ID：12474378
> 
> 赞同：1
> 
> 时间：2012-09-18T09:43:37.097
> 
> 标签：c++, visual-c++

如果我在 C++ 中有自己的 SString 类并且我希望能够做到这一点：

```
SString x("text");
LPCSTR p = (LPCSTR)x;
cout<<p; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:44:58.963

`conversion operator to LPCSTR`在您的班级中创建`SString`。如果可以使用`C++11`这个操作符应该是`explicit`。

```
operator LPCSTR() const { /*return data*/ }; 
```

你也可以创建一些函数（我认为这个变体比转换运算符更好）

```
LPCSTR asLPCSTR() const { /*return data*/ }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T09:46:39.887

除了 ForEveR 说的，注意你也可以重载

```
ostream& operator << (ostream& str, const SString& ss); 
```

并打电话

```
cout<<x; 
```

直接地。

# android - 任意字符串的 UriMatcher 模式，而不是 URI

> ID：12474380
> 
> 赞同：0
> 
> 时间：2012-09-18T09:43:40.577
> 
> 标签：android, string-comparison

我不禁注意到我在解析 Android 中定义明确的 XML 文件时使用了很多字符串比较（带有`XmlPullParser`.

到目前为止，它通常看起来像这样（有点简化）：

```
...
tag = parser.getName().toLowerCase();
if ("tag1".equals(tag)) {
    // Do something with the state machine
}
else if ("tag2".equals(tag)) {
    // Do something else with the state machine
}

...

else if ("tag23".equals(tag)) {
    // Do something more with the state machine
} 
```

相反，我想要的是这样的（StringMatcher 对我来说是假设的快乐制造者）：

```
private static final StringMatcher tagMatcher = new StringMatcher(StringMatcher.NO_MATCH);

static {
    tagMatcher.addString("tag1", 1);
    tagMatcher.addString("tag2", 2);
    ....
    tagMatcher.addString("tag23", 23);
}

...

tag = parser.getName().toLowerCase();
switch (tagMatcher.match(tag)) {
    case 1:
        // Do something with the state machine
        break;
    case 2:
        // Do something else with the state machine
        break;
    ...
    case 23:
        // Do something more with the state machine
        break;
    default:
        Log.e("PARSER", "Unexpected tag: " + tag);
        break;
} 
```

如您所见，我希望将一种`UriMatcher`模式应用于我的 XML 文件标签。你们中有人知道我可以在 Android 中使用这样的类吗？任何其他对字符串的快速过滤也可以（不过，如果可以重用 UriMatcher 模式，它会很整洁）。

到目前为止，我一直在研究正则表达式，但我不确定我是否能满足我的需要（我想要一个 switch - case 样式测试），当然还有上面示例中所示的常规字符串比较。

干杯，--dbm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:03:34.217

用一个`SparseArray`

```
 static{
        tagmatcher.append(0, "tag1");
        tagmatcher.append(1, "tag2");
    }

  switch(tagmatcher.keyAt(tagmatcher.indexOfValue(tag))){
           case 0:
             break;

           case 1:
             break
        } 
```

但是如果你要添加连续的索引，你总是可以使用 ArrayList

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:25:13.413

您可以使用 a`HashMap`因为它不需要遍历整个数组来查找匹配值

```
private static final HashMap<String, Integer> tagMatcher =
        new HashMap<String, Integer>();

static {
    tagMatcher.put("tag1", 1);
    tagMatcher.put("tag2", 2);
    tagMatcher.put("tag23", 23);
}

private void parse (String node) {
    Integer value = tagMatcher.get(node);
    int match = value != null ? value.intValue() : 0;
    switch (match) {
        case 1:
            // etc
            break;
        case 0: // no match
            break;
    }
} 
```

或者您可以使用`SparseIntArray`相同的哈希方法。这里的优势是您不需要将其`int`放入`Integer`其中会产生轻微的速度/内存优势。

```
private static final SparseIntArray tagMatcher2 = new SparseIntArray();
private static void put(String key, int value) {
    tagMatcher2.put(key.hashCode(), value);
}
private static int get(String key) {
    return tagMatcher2.get(key.hashCode());
}
static {
    put("tag1", 1);
    put("tag2", 2);
    put("tag23", 23);
}

private void parse2 (String node) {
    switch (get(node)) {
        case 1:
            // etc
            break;
        case 0: // no match
            break;
    }
} 
```

这是进行二进制搜索，而不是像这样迭代整个事情`SparseArray#indexOfValue(t)`。请注意，这种方法可能会发生哈希冲突。

我认为使用这样的方法比`if (equals) else if (equals)`进行大量比较的长链更快。该`if .. else if`方法需要检查`String.equals()`每次归结为比较字符串的所有字符，而基于哈希的方法只需要计算一次哈希值，然后可以对所有已知的哈希值进行二进制搜索。

# javascript - 可折叠的 div，但从变量中定义的某个点开始

> ID：12474382
> 
> 赞同：3
> 
> 时间：2012-09-18T09:43:46.033
> 
> 标签：javascript, jquery

例如，我有一个包含所有文本的 div，例如：

```
<div class="text-container">
<p>
Though we welcome the idea of a smaller connector, we're miffed that Apple couldn't just adopt the semi-industry standard of Micro-USB. That would make things easier for smartphone users across the globe. Yet, even so, the smaller connector may be a smart move for the future. The 30-pin connector has been around since 2003, long before the iPhone even existed: frankly, it's a dust magnet. A smaller connector helps shave extra space to achieve a smaller phone with perhaps a bigger battery. The new connector cable will mainly be used for syncing and charging by most people who own an Apple TV or Bluetooth/AirPlay accessories.
</p>
</div> 
```

我想创建这样的东西：

```
<div class="text-container">
<p>
Though we welcome the idea of a smaller connector...<a href="some-javascript-to-show-more">[show more]</a>
</p>
</div> 
```

我想我应该获取 div 的所有内容，然后找到第一个例如 50 个字符并在那里放置一个链接，所有其他文本都放在某个将被隐藏的 div 中，然后单击链接后显示其他内容.

它应该是类似切换的，如果它被展开，则将文本从 [显示更多] 更改为 [显示更少]，反之亦然。

任何建议如何使用纯 javascript 和 jquery 本身而不使用其他 jQuery 插件来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:02:31.043

这是另一个解决方案。

它不是简单地切掉中间的单词，而是检查结尾、标点和长词。

```
$(".text-container p").each(function() {
    var val = $.trim(this.innerHTML),
        parsed = val.split(/\s+/),
        cut = parsed;

    // for each word
    for (var i = 0, k = 0; i < parsed.length; i++) {
        k += parsed[i].length + 1;

        if (k - 1 > 50) {
            cut = parsed.slice(0, i);
            break;
        }
    }

    // if one long word
    if (cut.length == 0) {
        cut.push(parsed[0].substring(0, 50));
    }

    val = cut.join(" ");

    // if the text is long enough to cut
    if (cut.length != parsed.length) {
        this.innerHTML = val.replace(/[.,;?!]$/, "")
            + "<span>...</span> ";

        $("<span />")
            .css("display", "none")
            .html(parsed.slice(cut.length).join(" ") + " ")
            .appendTo(this);

        $("<a />", {
            href : "#",
            text : "[show more]"
        }).on("click", function(e) {
            var sh = this.innerHTML == "[show more]";
            $(this).prev("span").toggle(sh).prev("span").toggle(!sh);
            this.innerHTML = sh ? "[show less]" : "[show more]";
            e.preventDefault();
        }).appendTo(this);
    } else {
        this.innerHTML = val;
    }
}); 
```

**演示：http:** [//jsfiddle.net/xRuch/](http://jsfiddle.net/xRuch/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:19:38.887

为您构建一个快速[演示](http://jsfiddle.net/37RqC/1/)

jQuery

```
$(function(){
   var $el = $(".text-container").find("p");
   var str = $el.text();
   var str1 = str.substr(0,50), str2=  str.substr(51);
   $el.html(str1+" <span class='showMore'><a href='#'>Show more...</a></span><span class='moreText'>"+str2+"</span><span class='showLess'><a href='#'>Show Less</a></span>");

    $(".showMore").on("click", function(){
        $(this).next(".moreText").show();
        $(this).next(".moreText").next(".showLess").show();
        $(this).hide();
    });

     $(".showLess").on("click", function(){
        $(this).prev(".moreText").hide();
        $(this).prev(".moreText").prev(".showMore").show();
        $(this).hide();
    })

}); 
```

css

```
.moreText, .showLess { display:none}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:57:23.197

在现代浏览器上，您可以使用 css 属性`text-overflow:ellipsis;`

[http://jsfiddle.net/Y8skB/1/](http://jsfiddle.net/Y8skB/1/)

`show more`我在我的示例中使用 css 来扩展文本，但如果你想要一个链接，你也可以使用 jquery 来做。

# mysql - SQL 选择生成器

> ID：12474387
> 
> 赞同：0
> 
> 时间：2012-09-18T09:43:58.763
> 
> 标签：mysql, sql, generator

> **可能重复：在 MySQL 中生成**
> [整数序列 用 mysql](https://stackoverflow.com/questions/304461/generate-an-integer-sequence-in-mysql)
> [生成许多行](https://stackoverflow.com/questions/1806484/generate-many-rows-with-mysql)

是否有一个（简单的）方法来创建一个返回 1 和 N 之间整数的 sql 请求？（就像python中的范围（n）。）

就像是 ：

```
select i 
FROM all_ints_values  
where i >= 1 and i < N; 
```

其中表`all_ints_values`应包含所有整数值！

当然不可能创建这样的表。（即使 N 有限，我也不想这样做）

**语境 ：**

我有一张销售表（按年份和月份）。我想按年份和月份检索销售额的总和。你可以通过`group by`close 做到这一点：

```
select year,month, sum(money) from my_table group by year,month order by year,month 
```

但是有了这个，我的列表中出现了“漏洞”（如果 2011 年 1 月没有销售），因此不适合制作图表。

使用生成器，我可以使用 OUTER JOIN 类似的东西：

```
select y.i,m.i, nvl(sum_money,0) LEFT OUTER JOIN mysummaryview ON y.year = year and m.month = month FROM (select int from 1990 to 2012) y , (select int from 1 to 12) m order by y.i,m.i 
```

# node.js - Node.js API 文档中的 {Object} 和 Object

> ID：12474395
> 
> 赞同：1
> 
> 时间：2012-09-18T09:44:31.677
> 
> 标签：node.js

在 Node.js API 文档中，某些标题下方列表中的某些项目如下：

[`{Object}`](http://nodejs.org/api/all.html#all_console)和一些喜欢[`Object`](http://nodejs.org/api/all.html#all_require_cache)（没有大括号）。

有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:18:46.450

这只是一个文档怪癖，因为没有区别：在这两种情况下，它都在识别项目的类型。

# algorithm - 什么是 PageRanks Big-O 复杂度？

> ID：12474398
> 
> 赞同：7
> 
> 时间：2012-09-18T09:44:42.983
> 
> 标签：algorithm, graph, time-complexity, graph-algorithm, pagerank

我正在寻找 PageRank 算法的 Big-O 复杂度。我几乎找不到任何东西，我只是找到了`O(n+m)`（`n`- 节点数，`m`- 弧/边数），但我现在不相信这种复杂性。

我认为它缺少收敛标准。我不认为这是一个常数，我认为收敛取决于图形直径。一次迭代使用 Big-O 可能就足够了，那么收敛并不重要。

尽管如此，PageRank 需要触及每个节点并聚合每个传入的排名，所以我预计运行时间为`O(n * m)`.

我错过了什么？有人知道 PageRank 的 Big-O 复杂性的宝贵来源吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T11:09:41.307

经过一番研究和进一步思考，我得出的结论是`O(n+m)`真实的。

因为即使在完整的图中，也必须触摸每条边两次。一个人无法触及每一个边缘，那是我的想法的错误。因此，一个人必须至少接触每个节点，这是 n 次，每个边是大 O 中 m 的两倍。所以正确答案是`O(n+m)`

# python - Python：如何获取 URL 的 Content-Type？

> ID：12474406
> 
> 赞同：16
> 
> 时间：2012-09-18T09:45:10.957
> 
> 标签：python, python-2.7, urllib

我需要获取 Internet（Intranet）资源的内容类型，而不是本地文件。如何从 URL 后面的资源中获取 MIME 类型：

我试过这个：

```
res = urllib.urlopen("http://www.iana.org/assignments/language-subtag-registry")
http_message = res.info()
message = http_message.getplist() 
```

我得到： `['charset=UTF-8']`

我怎样才能得到`Content-Type`, 可以使用`urllib`以及如何或如果不是其他方式是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-04-27T07:07:42.313

对此的 Python3 解决方案：

```
import urllib.request
with urllib.request.urlopen('http://www.google.com') as response:
    info = response.info()
    print(info.get_content_type())      # -> text/html
    print(info.get_content_maintype())  # -> text
    print(info.get_content_subtype())   # -> html 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-18T10:03:29.567

```
res = urllib.urlopen("http://www.iana.org/assignments/language-subtag-registry" )
http_message = res.info()
full = http_message.type # 'text/plain'
main = http_message.maintype # 'text' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-23T14:57:09.097

更新：由于 info() 函数在 Python 3.9 中已弃用，您可以在[此处阅读有关称为 headers 的首选类型](https://docs.python.org/3/library/email.message.html#email.message.EmailMessage)

```
import urllib

r = urllib.request.urlopen(url)
header = r.headers                              # type is email.message.EmailMessage
contentType = header.get_content_type()         # or header.get('content-type')
contentLength = header.get('content-length')
filename = header.get_filename() 
```

此外，一种无需实际加载 url 即可快速获取 mimetype 的好方法

```
import mimetypes
contentType, encoding = mimetypes.guess_type(url) 
```

第二种方法不能保证答案，但它是一种快速而肮脏的技巧，因为它只是查看 URL 字符串而不是实际打开 URL。

# mysql - 为 MySQL 客户端的结果集输出中的数字列字段指定默认基数，而不是 10？

> ID：12474409
> 
> 赞同：0
> 
> 时间：2012-09-18T09:45:15.840
> 
> 标签：mysql

我有一个 MySQL 表，我们称之为`Permissions`，带有数字列`UserId`和`Privilege`. 该`UserId`列被认为是十进制值，但`Privilege`应该是十六进制值。十六进制值更适合特权代码（因为每个特权位都负责 R、W、X 等标志），这被我们广泛用于`INSERT`使用十六进制文字的语句，例如：

```
INSERT INTO `Permissions` (`UserId`, `Privilege`) VALUES (12, 0x53); 
```

让我们假设`3`in`0x53`是代表编码特权操作的标志掩码，因此阅读此类`INSERT`语句的人可以很容易地理解此权限授予 R(1) 和 W(2) 权限。但是当`Permissions`执行对表的查询时，例如在本地 MySQL 客户端中，权限值显示为十进制（请假设`SELECT * FROM`）：

```
+--------+-----------+
| UserID | Privilege |
+--------+-----------+
|     12 |        83 |
+--------+-----------+ 
```

有没有办法推荐 MySQL 客户端**默认在十六进制视图中***显示*（不作为字符串返回）一些数字列？它可能位于表元数据、嗯、“建议”或客户端配置中的某处——老实说，我对此一无所知。这很有用的另一个原因是，可以使用简单查询，而不是每次调用查询时对某个列应用函数，甚至将结果集列类型从数字更改为字符串。**`SELECT * FROM``HEX()``HEX()`**

 **有任何想法吗？您的帮助将不胜感激。提前致谢。

* * *

*PS我不确定这个问题是否应该在这里问。如果更好的地方是超级用户或数据库管理员，请迁移。谢谢！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:43:25.623

看来 VIEW 就是你想要的。只需选择所有列，将 HEX(Permissions) 指定为权限，并告诉客户端使用视图而不是表。

[http://dev.mysql.com/doc/refman/5.5/en/create-view.html](http://dev.mysql.com/doc/refman/5.5/en/create-view.html)**

# perl - 需要一个 Perl 脚本来匹配目录内所有文件中的字符串并将匹配的文件推送到新文件夹

> ID：12474411
> 
> 赞同：1
> 
> 时间：2012-09-18T09:45:18.460
> 
> 标签：perl, shell

我想要一个 Perl 脚本在提到的目录中搜索并找到那些包含字符串`ADMITTING DX`的文件并将这些文件推送到一个新文件夹。

我是 Perl 的新手，正在尝试这个：

```
#!/usr/bin/perl

use strict;
use warnings;

use File::Find;

my $dir    = '/usr/share/uci_cmc/uci_new_files/';
my $string = 'ADMITTING DX';

open my $results, '>', '/home/debarshi/Desktop/results.txt'
    or die "Unable to open results file: $!";

find(\&printFile, $dir);

sub printFile {

    return unless -f and /\.txt$/;

    open my $fh, '<',, $_ or do {
        warn qq(Unable to open "$File::Find::name" for reading: $!);
        return;
    };

    while ($fh) {
        if (/\Q$string/) {
            print $results "$File::Find::name\n";
            return;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:51:31.767

您正在读取文件中的行：

```
while ($fh) 
```

应该是

```
while (<$fh>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:55:56.373

你真的可以用 Perl 做到这一点，这是一个很好的方法。但是在您的情况下没有任何复杂的文本处理，所以我建议使用 bash one-liner：

```
for f in *.txt; do grep 'ADMITTING DX' $f >/dev/null && mv $f /path/to/destination/; done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:08:13.810

如果您仍然需要 Perl 解决方案：

```
perl -e 'for my $f (glob "*.txt") { open F, $f or die $!; while(<F>){ if(/ADMITTING DX/){ rename $f, "/path/to/destination/$f" or die $!; last } close $f; }}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T14:38:31.093

您的代码中有两个错误。`open`首先，你在调用中有一个多余的逗号`printFile`。它应该读

```
open my $fh, '<', $_ or do { ... }; 
```

其次，您需要调用以`readline`从打开的文件中获取数据。您可以使用 执行此操作`<$fh>`，因此`while`循环应为

```
while (<$fh>) { ... } 
```

除此之外，您的代码很好

# iphone - 如果 AlertView，不要在 Xcode 中弹出导航控制器

> ID：12474413
> 
> 赞同：2
> 
> 时间：2012-09-18T09:45:30.660
> 
> 标签：iphone, xcode, ipad, uinavigationcontroller, uialertview

我有一个`Navigation Controller`，当我按下后退按钮时，我不想弹出视图，但我想显示一个`UIAlertView`。我只想在做出选择后弹出视图`UIAlertView`！我能怎么做？我试图捕捉事件“按下后退按钮”但没有结果:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:05:09.827

在 viewDidload中创建一个 UIBarButtonItem**并将**其添加到导航栏

```
UIBarButtonItem *backButton=[[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(backButtonClicked)];
self.navigationItem.leftBarButtonItem=backButton; 
```

创建一个方法，该方法将在单击 backButton 时调用

```
-(void)backButtonClicked{
       UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Pop View!" message:@"Are you sure?" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];
       [alert show];
} 
```

编写此 UIAlertView 委托方法，当 UIAlertView 中的按钮被单击时将调用该方法

```
-(void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex{
      if (buttonIndex==1) {
             [self.navigationController popViewControllerAnimated:YES];
      }
} 
```

**注意**：不要忘记在头文件中添加 UIAlertView 委托`<UIAlertViewDelegate>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:59:59.300

您可以使用这样的方法检查后退按钮是否按下`viewWillDisappear`（从[此处](https://stackoverflow.com/questions/1214965/setting-action-for-back-button-in-navigation-controller/3445994#3445994)获取）：

```
-(void)viewWillDisappear:(BOOL)animated {
    if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound && self.isBackButtonPressed) {
        // back button was pressed.  We know this is true because self is no longer
        // in the navigation stack.
    }
    [super viewWillDisappear:animated]; 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:48:46.130

在 UIAlertview 委托方法中实现弹出 clickedButtonAtIndex：后退按钮按下只需实现只显示 UIAlertview

参考[这个](https://stackoverflow.com/questions/2537993/the-delegate-method-clickedbuttonatindex-is-not-called)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:54:07.450

遵循此代码

在按钮动作中。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"Do you want to open?" delegate:self cancelButtonTitle:@"NO" otherButtonTitles:@"YES", nil];
[alert show];

//Alert View delegate method
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(buttonIndex==0)//NO
    {
        //your code
    }
    else if(buttonIndex==1)//YES
    {
        // your code
    }
} 
```

# sql-server - vb.net, sql server, 日期时间格式, 选择

> ID：12474416
> 
> 赞同：0
> 
> 时间：2012-09-18T09:45:43.773
> 
> 标签：sql-server, vb.net, datetime, format, max

我正在使用 vb.net 从 SQL Server 加载数据。我有墨水表，我还有另一个表来跟踪使用这些墨水的员工。我有带有 Datetimepicker 控件的 VB.NET 表单。SQL server 中的日期时间以格式保存，`yyyy-mm-dd 00:00:00.000`Datetimepicker 中的格式为`yyyy-mm-dd 00:00:00.000`. 当我将数据从 SQL 服务器加载到 VB.NET 中的 Datagrid 时，我没有得到正确的数据。有人能说明一下日期时间格式，以便我得到正确的数据吗？谢谢

# c# - 如何在 C# 中获取地理位置

> ID：12474417
> 
> 赞同：0
> 
> 时间：2012-09-18T09:46:02.563
> 
> 标签：c#

我已经编写了代码，可以根据 IP 地址为我提供用户的地理位置。但是当我当时将我的电脑与 USBModem 连接时，它显示错误的位置。

```
string apiKey = System.Configuration.ConfigurationManager.AppSettings["ipInfoDbKey"];
string url = "http://api.ipinfodb.com/v3/ip-city/?ip={0}&key=" + apiKey;
//string url = "http://ipinfodb.com/ip_query.php?ip={0}&timezone=false";
url = String.Format(url, ip);
var result = XDocument.Load(url);
var location = (from x in result.Descendants("Response")
select new LocationInfo
{
     City = (string)x.Element("City"),
     RegionName = (string)x.Element("RegionName"),
     Country = (string)x.Element("CountryName"),
     ZipPostalCode = (string)x.Element("CountryName"),
     Position = new LatLong
     {
          Lat = (float)x.Element("Latitude"),
          Long = (float)x.Element("Longitude")
     }
}).First();
return location; 
```

我已经围绕 IpAddress 做了一些工作。我注意到一件事，当我连接任何 USBModem 时，它需要调制解调器 IP 地址而不是我的 pc。你能告诉我当 pc 使用 PC IP 地址连接到调制解调器时如何获取地理位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:00:58.040

当您通过调制解调器连接时，您需要计算出您现有代码的外部 IP 地址才能正常工作。为什么不调用类似[http://checkip.dyndns.org](http://checkip.dyndns.org)并解析返回字符串？

就像是：

```
var req = new HTTPGet();
req.Request("http://checkip.dyndns.org");
string[] resp = req.ResponseBody.Split(':');
string ip = resp[1]; 
```

这应该将您的外部 IP 地址作为字符串提供给您现有的代码。

[你可以从这里](http://goldb.org/httpgetcsharp.html)获取 HTTPGet

# android - 通过在列表视图中使用字母字符/索引在android中搜索名称

> ID：12474418
> 
> 赞同：3
> 
> 时间：2012-09-18T09:46:03.700
> 
> 标签：android, android-layout, android-intent, android-emulator

我想在联系人应用程序中实现一个带有 fastscroll 和 albhabet 索引器的 ListView。我正在使用 SimpleAdapter 来填充 ListView。从图中可以看出，通过从右侧的字母索引器中选择一个字母，listView 的选择会转到相应的 ListItem。如何做到这一点？请分享一些例子。提前谢谢你。

![在此处输入图像描述](../Images/3fde15c38ecd4f7959634ef45236e07b.png)

# jquery - jQuery .load() 无法正常工作

> ID：12474422
> 
> 赞同：0
> 
> 时间：2012-09-18T09:46:07.680
> 
> 标签：jquery

这是有问题的页面：

[http://www.lukaspleva.com/MoneyThink/NationalAdmin.php](http://www.lukaspleva.com/MoneyThink/NationalAdmin.php)

如果您转到该页面，您会看到只需单击每行旁边的红十字按钮即可从系统中删除章节。当您这样做时，顶部的章节计数器会自动更新。

当您通过顶部的部分将新章节添加到混音中时，就会出现问题。新部分被添加并且计数器更新，但删除按钮停止工作。

查看代码发生的情况，似乎 .load() 函数正在页面上已经存在的表单 id="update_existing_chapters" 中创建了一个额外的表单="update_existing_chapters"。

基本上，它不只是刷新 div 或表单，而是在其中创建一个重复的副本，这会破坏代码。

相关的代码是：

```
$('form#update_existing_chapters')
    .load('NationalAdmin.php form#update_existing_chapters'); 
```

知道为什么它要创建一个重复的元素/部分，而不仅仅是刷新当前的吗？

***更新#1***

我现在意识到我必须使用 .on() 来保留按钮的删除事件。我尝试了以下代码，但这实际上完全破坏了 AJAX。任何想法为什么？

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript">
        jQuery(document).ready(function() {
               $('#current_chapters').on('click', '.delete-chapter', function(){
            jQuery.ajax({
            type: 'post',
            url: "http://www.lukaspleva.com/MoneyThink/CreateNewChapter.php",
            dataType: 'text',
            data: $('#create_new_chapter').serialize(),
            success: function(msg){ alert(msg); $('#current_chapters').load('NationalAdmin.php #current_chapters'); } 
                    });
            return false;
                });
            });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:52:39.857

```
$('form#update_existing_chapters')
    .empty()
    .load('NationalAdmin.php form#update_existing_chapters'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:59:23.997

重新加载列表后，您的删除按钮事件将重置。您必须使用保持不变的父 DOM 元素。

```
$('#current_chapters_container').on('click', '.delete-chapter', function(){
    alert('delete');
}); 
```

**更新** 我们可以看到几个问题：

*   load 函数用于加载部分内容，但这里我们接收整页（带有 html、body 等）
*   插入内容后，我们丢失了删除事件（`on`是很好的选择`live`）
*   您将表单内容替换为另一个表单，这就是您有两个表单的原因。

# http - 如何从 HTTP 文件共享上的 URL 列出子目录？

> ID：12474425
> 
> 赞同：0
> 
> 时间：2012-09-18T09:46:16.033
> 
> 标签：http, curl, wget, directory-browsing

我想知道是否有一个简单的名称来列出来自 HTTP 文件共享的所有文件/目录 - 默认情况下 HTTP 服务器会显示它们，但我想知道是否有一种简单的方法来获取文件列表而无需手动解析返回的网页。

任何可以使用或`curl`应该没问题的解决方案。`wget``python`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:46:05.393

不，没有通用的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T05:08:13.857

wget 仅用于下载文件而不是列出目录。

如果这就是你所拥有的一切，虽然......

```
wget -r http://SOME.SITE/PATH 2>&1 | grep 'Saving to:' | sed "s/Saving to: \`\([^?']*\).*'/\1/" | uniq -u
rm -rf SOME.SITE 
```

（只是为了以后不要起诉我，这是从网站**下载所有文件，****然后在完成后删除它们**）

**编辑：**对不起，我累了。如果你*只*想要顶级目录，你可以这样做：

```
wget -rq http://SOME.SITE/PATH
ls -1p SOME.SITE | grep '/$'
rm -rf SOME.SITE 
```

这与上述相同，但仅列出 URL 的直接子目录。

# hibernate - 七月 logging.properties 和 Hibernate

> ID：12474426
> 
> 赞同：0
> 
> 时间：2012-09-18T09:46:18.307
> 
> 标签：hibernate, glassfish-3, java.util.logging

我试图让 Hibernate 记录参数值。我正在使用 Netbeans 并将生成的 WAR 文件部署到 Ubuntu 机器上的 Glassfish。我正在使用 java util 日志记录（而不是 log4j 等），因为我以前没有使用过它并且想看看它的比较。

我在persistence.xml 中将hibernate.show_sql 属性设置为true，是的，我可以看到SQL 出现在日志中（INFO 级别）。但是，要查看 SQL 中使用的参数值，我相信我需要将 Hibernate 的日志级别更改为 TRACE（或至少是 DEBUG），而我的应用程序似乎设置为 INFO 级别。

我知道 logging.properties 是这样做的地方，但文档似乎都指向在 JRE 中配置它，这将是系统范围的。

我的问题是......我可以将 logging.properties 放在我的应用程序中的某个位置，以便同一应用服务器上的不同应用程序可以具有不同的日志记录配置吗？

而且，鉴于（从我读到的）Hibernate 使用通用日志记录，我是否会得到这些信息，因为我使用的是 JUL 而不是通用日志记录？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:26:18.883

您可以将属性文件放在应用程序中类路径的根目录下。对于 Web 应用程序，其中之一是 WEB-INF/classes

如果启用 TRACE 级别，您将能够看到这些 TRACE 语句

```
insert into table (name, id) values (?, ?)
.........................

binding '1' to parameter: 2 
```

然而，这可能不是你想要的。如果您希望 sql 本身应该显示包含的绑定参数，那么您可以使用 P6Spy 库。设置 P6Spy 非常简单。[您可以在此处](http://www.mkyong.com/hibernate/how-to-display-hibernate-sql-parameter-values-solution/)查看如何设置。

设置好之后就可以在日志中看到sql了

```
insert into grouptable (name, id) values ('Name', 1) 
```

# javascript - 带有简单 jquery VAT 的无效字符 script1014（在 IE 中）

> ID：12474427
> 
> 赞同：0
> 
> 时间：2012-09-18T09:46:20.967
> 
> 标签：javascript, jquery, html

试图让这段代码触发，但我不断收到控制台错误，指的是代码的最后一行，但对我来说似乎很好，一直在测试不同的组合但无济于事，任何人都有任何见解:)

```
<script type="text/javascript" charset="UTF-8">
    $("#txtModalPricesIncPrice").keyup(function() {

        var price = $(this).val();
        var VAT = (parseFloat($("#txtModalPricesVAT").attr("value"))/100)+1;
        $("#txtModalPricesExPrice").val(price / VAT);

    });

    $("#txtModalPricesExPrice").keyup(function() {

        var price = $(this).val();
        var VAT = (parseFloat($("#txtModalPricesVAT").attr("value"))/100)+1;

        $("#txtModalPricesIncPrice").val(price * VAT);

    });

    $("#txtModalPricesVAT").keyup(function() {

        var price1 = $("#txtModalPricesIncPrice").val();
        var price2 = $("#txtModalPricesExPrice").val;
        var VAT = (parseFloat($("#txtModalPricesVAT").attr("value"))/100)+1;

        $("#txtModalPricesIncPrice").val(price1 * VAT);
        $("#txtModalPricesExPrice").val(price2 / VAT);

    });
</script> 
```

表代码如下

```
<table class="table table-bordered">
            <thead><th></th><th></th></thead>
            <tbody>
            <tr>
                <td>Product ID: </td>
                <td><asp:Label ID="txtModalPricesProductID" runat="server"></asp:Label></td>
            </tr>
            <tr>
                <td>Description: </td>
                <td><asp:Label ID="txtModalPricesDesc" runat="server"></asp:Label></td>
            </tr>
            <tr>
                <td>Price Level: </td>
                <td><asp:Label ID="txtModalPricesPriceLevel" runat="server"></asp:Label></td>
            </tr>
            <tr>
                <td>VAT:</td>
                <td><asp:Label ID="txtModalPricesVAT" runat="server"></asp:Label></td>
            </tr>
            <tr>
                <td>Sales Unit: </td>
                <td>
                    <asp:DropDownList ID="dropdownPLvlSalesUnit" runat="server" AutoPostBack="true"></asp:DropDownList>
                </td>
            </tr>
            <tr>
                <td>Quantity: </td>
                <td><asp:Label ID="txtModalPricesQuantity" runat="server"></asp:Label></td>
            </tr>
            <tr>
                <td>Inc. Price: </td>
                <td><input ID="txtModalPricesIncPrice" name="txtModalPricesIncPrice" runat="server" /></td>
            </tr>
            <tr>
                <td>Ex. Price: </td>
                <td><input ID="txtModalPricesExPrice" name="txtModalPricesExPrice" runat="server" />
                </td>
            </tr>
            <tr>
                <td>Profit: </td>
                <td><asp:Label ID="txtModalPricesProfit" runat="server"></asp:Label></td>
            </tr>
            <tr>
                <td>Margin: </td>
                <td><asp:Label ID="txtModalPricesMargin" runat="server"></asp:Label></td>
            </tr>
            <tr>
                <td>Target:</td>
                <td><asp:Label ID="txtModalPricesTarget" runat="server"></asp:Label></td>
            </tr>
            </tbody>
            </table> 
```

# mysql - 在服务器上复制并创建新的 mysql 设置

> ID：12474428
> 
> 赞同：0
> 
> 时间：2012-09-18T09:46:30.780
> 
> 标签：mysql, sql-server, database

我是 DB 的新手。我在 Godaddy 的 mysql 设置上有一个正在运行的数据库。现在我有一个新服务器，我无法访问它。我必须制作一个可以在该服务器上安装和创建新 mysql 的文件，而且它也可以从我当前的服务器数据库中复制和存储特定的表。

我必须将此文件提供给有权访问的人，以便他可以执行它并拥有所有内容。我怎样才能制作这样的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:19:26.040

您可以使用[MySQL 的 mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)来备份您的数据库。

[或者，您始终可以使用SQLyog](http://www.webyog.com/en/downloads.php)等 MySQL GUI 工具备份数据库。

我猜 GoDaddy 不允许直接连接 mysqldump 工作。在这种情况下，您可以使用 SQLyog 的 HTTP 隧道功能。

将生成的备份文件（通过 SQLyog 或通过 mysqldump 创建）提供给有权访问的人，他将上传文件。

这是用于备份[的 SQLyog 文档。](http://www.webyog.com/doc/SQLyog/#Scheduled_Backups_SQLyog_MySQL_GUI.htm)选择要通过向导备份的数据库和表。

希望能帮助到你....

# bash - 将_添加到文件夹中的每个文件/目录

> ID：12474429
> 
> 赞同：0
> 
> 时间：2012-09-18T09:46:32.100
> 
> 标签：bash

是否有一个脚本（bash）在每个文件和目录名称的开头添加一个“_”？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:48:44.867

关于什么：

```
for f in *
do
  mv "$f" _"$f"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:49:12.797

```
ls -1 | while read i; do mv "$i" "_$i"; done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:27:19.517

如果目录是递归的，你需要一些更复杂的东西：

```
#!/bin/bash
#Requires BASH and a find with -print0

#The source    
SRC=/tmp/writ

unset a i
#Read in the file names
while IFS= read -r -d '' file; do
  # Get the file name, rip off the directory name
  fname=$(basename "$file")

  # Get the directory name, without the file name
  dname=$(dirname "$file")

  #I used 'cp' instead of 'mv' for testing reasons
  # Note how I put the underscore in.
  cp "$file" "${dname}/_${fname}"

  # This just finds files.  You can repeat the loop with
  # type -d for directories.
done < <(find $SRC -type f -print0) 
```

# c# - 将数据填充到嵌套字典集合

> ID：12474436
> 
> 赞同：1
> 
> 时间：2012-09-18T09:46:55.637
> 
> 标签：c#

我有一个 `List<Employee>`包含类似属性的集合

`Name`, `EmployeeID`, `Address`,`JobTitle`等等

对于每个员工来说，几乎没有几列会发生变化，并且基于这几列我需要更新我的 Active Directory。

所以我想为每一列创建一个`isEditable`字段，该字段将表示该列对于特定员工是否已更改。但事实证明，我需要为所有列创建此字段，并且列数也经常更改。

所以我想出了嵌套字典集合

```
 Dictionary<int, Dictionary<object, bool>> 
```

它将存储`Employee ID`为`key`并且`object`类型将存储所有`column names`并且`bool`默认情况下将是`false`

但我不知道如何用`List<Employee>`Collection 填充上面的嵌套集合。

这是我到目前为止所尝试的

```
Dictionary<int, Dictionary<object, bool>> _isEditable = new Dictionary <int, Dictionary<object, bool>>();

foreach (var item in _empColl )
{
   foreach (var type in _empColl .GetType ().GetProperties ())
   {
       _isEditable.Add  (item.EmployeeID ,dict.Add (type.Name,false));
   }
} 
```

但它的抛出错误。我试图从`_empColl`for each中获取元数据（列名）`EmployeeID`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:04:28.610

您可以使用下面的 LINQ 来获得结果：

```
 var _isEditable = _empColl.ToDictionary(item => item.EmployeeID,
                                         item => item.GetType()
                                                  .GetProperties()
                                                  .ToDictionary(pro => pro.Name, 
                                                                pro => false)); 
```

# java - 这段代码可以写得更好更灵活吗？

> ID：12474437
> 
> 赞同：2
> 
> 时间：2012-09-18T09:46:59.660
> 
> 标签：java, oop

请看下面的代码。这里基于字符串常量，我实例化了不同类型的组件类。现在至少有 15 种不同类型的字符串常量。因此，如果我遵循这种模式，将会有 15 种不同的情况以及许多 if -else 块。有没有更好的方法来做到这一点？我希望通过尽可能少的代码更改来灵活地添加和删除案例。

```
public UIComponent initCellEditor(String editorType) {
        UIComponent editControl = null;
        if ("TbComboBoxCellType".equals(editorType)) {
          editControl = new WebListEntryField();
          editControl.setId("ComboBox");
        } else if ("TbStringCellType".equals(editorType)) {
          editControl = new WebInputEntryField();
          editControl.setId("String");
        } else if ("TbDateCellType".equals(editorType)) {
          editControl = new WebDateEntryField();
          editControl.setId("Date");
        } else if ("TbDateTimeCellType".equals(editorType)) {
          editControl = new WebDateTimeEntryField();
          editControl.setId("DateTime");
        } else {
          //default editor is allways a text input
          editControl = new WebInputEntryField();
          editControl.setId("Input");
        }
        return editControl;
      } 
```

PS：我们使用的是 JDK 6 。所以不能使用切换字符串功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T09:54:26.717

您可以将这些字符串常量转换为枚举，并在枚举上添加一个构建器方法，例如

```
public enum CellType {
      TbComboBox {
         @Override
         public UIComponent newComponent() {
            return new xxx();
         }
      },
      TbDate {
         @Override
         public UIComponent newComponent() {
            return new xxx();
         }
      }

      public abstract UIComponent newComponent();
} 
```

这种方法的美妙之处在于它取代`IFs`了多态性（在我看来，这非常 OO）。

* * *

抱歉，我刚刚意识到您有一个默认类型（代码中的最后一个 else），因此您可能需要在`if`某处添加一个 :(。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T09:53:38.140

也许：使用`Map`. 即使您创建新类，只要将新类型注入到`Map`. 它有一种依赖注入的味道。

```
package cruft;

import java.util.HashMap;
import java.util.Map;

/**
 * UIComponentFactory description here
 * @author Michael
 * @link
 * @since 9/18/12 5:48 AM
 */
public class UIComponentFactory {
    Map<String, UIComponent> uiComponentMap;
    Map<String, String> uiIdMap;

    public UIComponentFactory(Map<String, UIComponent> uiComponentMap, Map<String, String> uiIdMap) {
        this.uiComponentMap = new HashMap<String, UIComponent>(uiComponentMap);
        this.uiIdMap = new HashMap<String, UIComponent>(uiIdMap);
    }

    public UIComponent initCellEditor(String editorType) {
        UIComponent editControl = null;
        editControl = this.uiComponentMap.get(editorType);
        if (editControl != null) {
            editControl.setId(this.uiIdMap.get(editorType));
        } else {
            editControl = new WebInputEntryField();
            editControl.setId("Input");
        }
        return editControl;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T09:59:17.067

您可以使用枚举：

```
public static enum Editor {

    TB_COMBOBOX_CELL("tbComboBoxCellType", "ComboBox") {
        public UIComponent getComponent() {
            return new WebListEntryField();
        }
    },
    TB_STRING_CELL("TbStringCellType", "String") {
        //etc
    };
    private final String type;
    private final String id;

    private Editor(String type, String id) {
        this.type = type;
        this.id = id;
    }

    public String getType() {
        return type;
    }

    public String getId() {
        return id;
    }

    public abstract UIComponent getComponent();
    private static Map<String, Editor> types = new HashMap<String, Editor>();

    static {
        for (Editor e : Editor.values()) {
            types.put(e.getType(), e);
        }
    }

    public static Editor getEditor(String type) {
        Editor e = types.get(type);
        if (e == null) return Editor.DEFAULT_EDITOR;
        return e;
    }
} 
```

然后你的方法变成：

```
public UIComponent initCellEditor(String editorType) {
    Editor e = Editor.getEditor(editorType);
    UIComponent editControl = e.getComponent();
    editControl.setId(e.getId());
    return editControl;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T09:57:11.167

您可以根据对象的类型使用`Factory`模式来创建对象。例如：

创建一个工厂类，如下所示：

```
public class UIComponentFactory {

    private static final Logger LOGGER = LoggerFactory.getLogger(UIComponentFactory.class);

    private static UIComponentFactory instance;

    private static final LinkedHashMap<String, Class> COMPONENTS_MAP = new LinkedHashMap<String, Class>() {{
        put("TbComboBoxCellType", WebListEntryField.class);
        put("TbStringCellType", WebInputEntryField.class);
        put("TbDateCellType", WebDateEntryField.class);
    }};

    private UIComponentFactory() {
    }

    public UIComponent createUIComponent(String type) {
        Class componentClass = COMPONENTS_MAP.get(type);
        Object componentObject = null;
        if (componentClass != null) {
            try {
                componentObject = componentClass.newInstance();
            } catch (InstantiationException ex) {
                LOGGER.error("Instantiation exception occurred", ex);
                throw new SystemException("Instantiation exception occurred", ex);
            } catch (IllegalAccessException ex) {
                LOGGER.error("Illegal access exception occurred", ex);
                throw new SystemException("Illegal access exception occurred", ex);
            }
        }
        return (UIComponent) componentObject;
    }

    public static UIComponentFactory getInstance() {
        if (instance == null) {
            instance = new UIComponentFactory();
        }
        return instance;
    }

} 
```

然后创建你的组件使用：

```
UIComponentFactory factory = UIComponentFactory.getInstance();
UIComponent component = factory.createUIComponent("yourComponentType"); 
```

这将是一种比使用`if else`语句更有效的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-18T10:00:23.607

老实说：不要改变任何东西。有几个选项可以重构此代码，但恕我直言，它们不会提高代码的可读性。坚持`if`下去，它并不像他们希望你相信的那么邪恶......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-18T10:01:33.400

我会建议一种基于枚举的方法，如下所示：

```
enum EditorType {
    TbComboBoxCellType(WebListEntryField.class, "ComboBox"),
    TbStringCellType(WebInputEntryField.class, "String"),
    TbDateCellType(WebDateEntryField.class, "Date"),
    TbDateTimeCellType(WebDateTimeEntryField.class, "DateTime"),
    Generic(WebInputEntryField.class, "Input");

    private final Class<? extends UIComponent> componentType;
    private final String id;

    private EditorType(Class<? extends UIComponent> componentType, String id) {
        this.componentType = componentType;
        this.id = id;
    }

    public static UIComponent createComponent(String editorType) {
        EditorType type;
        try {
            type = valueOf(editorType)
        } catch (IllegalArgumentException e) {
            type = Generic;
        }
        return type.createComponent();
    }

    public UIComponent createComponent() {
        try {
            UIComponent component = componentType.newInstance();
            component.setId(id);
            return component;
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T09:51:21.057

您不应该每次都创建`new WebListEntryField();`或其他。`xxEntryField()`创建一个私有字段并返回相同的实例。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-18T09:52:40.667

另一种选择是使用枚举来捕获所有

> 细胞类型

和另一个或相同的枚举来获取 Id 并使用该枚举来比较输入的输入。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-18T09:55:53.410

使用枚举开关。更改`String editorType`为 emum 类型。如果这是不可能的，请按照[以下 SO question](https://stackoverflow.com/questions/604424/java-convert-string-to-enum)`editorType`转换为枚举。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-18T11:13:51.447

您可以使用基于枚举的比较。为不同的输入类型创建不同的枚举，然后使用 switch case。

EditorType.java

```
public enum EditorType {
  COMBO_CELL_TYPE("TbComboBoxCellType"),
  STRING_CELL_TYPE("TbStringCellType"),
  DATE_CELL_TYPE("TbDateCellType"),
  TIME_CELL_TYPE("TbDateCellType"),
  INPUT_CELL_TYPE("TbInputCellType");

  public String value;

  private EditorType(String value) {
    this.value = value;
  }

} 
```

而比较使用 switch 语句。

```
public UIComponent initCellEditor(EditorType editorType) {
  UIComponent editControl = null;

  switch (editorType) {
    case COMBO_CELL_TYPE:
      // logic here
      break;

    case STRING_CELL_TYPE:

      break;

    case DATE_CELL_TYPE:

      break;

    case TIME_CELL_TYPE:

      break;

    default:
      // default logic
  }
} 
```

# objective-c - 将文件中的整数添加到 NSarray

> ID：12474438
> 
> 赞同：0
> 
> 时间：2012-09-18T09:47:04.693
> 
> 标签：objective-c, nsarray

在我的应用程序中，我需要将路径转换为其点表示。所以我会有很多积分。我需要将所有这些整数添加到 NSArray。然后我将遍历该数组并使用这些点将我的对象放置在屏幕上。如何将这些点（可能是 X 和 Y 部分分别）添加到 NSArray？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:49:08.403

您可以使用添加到 NSArray`[NSNumber numberWithInteger:intNumber]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:52:50.260

在数组中添加点的最佳方法是

> ```
> [NSValue valueWithCGPoint:point] 
> ```

其中 point 是 CGPoint 类型。
在获取时，您可以将 CGPoint 获取为

> ```
> CGPoint point = [value CGPointValue];
> where value is [NSValue valueWithCGPoint:point] 
> ```

# jquery - 两个脚本一起运行时出现 JQuery 错误

> ID：12474441
> 
> 赞同：0
> 
> 时间：2012-09-18T09:47:10.200
> 
> 标签：jquery, menu, slider, tabbed

我的总体目标是拥有一个带有 4 个选项卡的选项卡式菜单。在每个选项卡中，我还想要一个简单的滑块来工作，我可以在每个滑块中添加不同的东西。

目前我有自己的代码创建一个选项卡式菜单，它工作正常（目前每个选项卡都有静态文本）。我还有一个工作简单的滑块。

我认为如果我用滑块 div 等替换我当前拥有的静态文本，它会给我我想要的最终产品（带有滑块的选项卡式菜单）。

但是，当我将这两件事一起添加到一个页面中时，它不起作用。选项卡式菜单刚刚溢出（显示所有四个选项卡式区域，而不仅仅是一个）。我是 JQuery 的新手，因此非常感谢任何帮助/解释。我的 JQuery 代码组合如下：

```
$(document).ready(function(){
$('#homebox_tabs div').hide();
$('#homebox_tabs div:first').show();
$('#homebox_tabs ul li:first').addClass('active');
$('#homebox_tabs ul li a').click(function(){ 
$('#homebox_tabs ul li').removeClass('active');
$(this).parent().addClass('active'); 
var currentTab = $(this).attr('href'); 
$('#homebox_tabs div').hide();
$(currentTab).show();
return false;
});
}); 
```

此代码适用于我的选项卡式菜单。

```
jQuery.noConflict();
try {
jQuery(document).ready(function($){ 
    $(".right-button").stop(true, true).fadeOut();
    $(".left-button").stop(true, true).fadeOut();
    simpleSlide({
        'set_speed': 1000
    }); 

    $('#slide').hover(

    function () {
            $(".right-button").stop(true, true).fadeIn();
            $(".left-button").stop(true, true).fadeIn();
    }, 
    function () {
            $(".right-button").stop(true, true).fadeOut();
            $(".left-button").stop(true, true).fadeOut();
    }
    );
});
} catch (e) {alert(e);} 
```

这是简单滑块的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:50:45.183

你为什么使用`jQuery.noConflict();?`除了 JQuery 之外的其他 JavaScript 框架？好吧，不建议`jQuery`直接使用命名空间

# apache - 重定向同名的子域和目录

> ID：12474442
> 
> 赞同：0
> 
> 时间：2012-09-18T09:47:16.970
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我需要执行以下重定向 From: `http://xyz.domain.com/2012/01/sample.html` To`http://www.domain.com/2012/01/sample.html`

并且

从：`http://www.domain.com/xyz/2012/01/sample.html` 到：`http://www.domain.com/2012/01/sample.html`

我对此一无所知，有人可以帮助我如何完成同样的事情。

感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:09:53.903

对于第一个重定向：

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,R=301] 
```

对于第二个重定向：

```
RewriteRule ^[^/]+/(\d{4})/(\d{2})/(.+)$ /$1/$2/$3 [L,R=301] 
```

# .net - 保护 WCF 服务 - 允许某些 Web 应用程序访问

> ID：12474443
> 
> 赞同：0
> 
> 时间：2012-09-18T09:47:17.357
> 
> 标签：.net, wcf, wcf-security

我已经阅读了很多关于此的主题，但我必须 100% 确定我在我的场景中朝着正确的方向前进。

我想要做的主要事情是将 WCF 服务 (.NET 4.5) 锁定到单个 Web 应用程序（尽管将来可能会更多）。

所以，

Web 应用程序（通过 .NET Membership 登录）-> WCF 服务 -> 数据层 -> 数据库

WCF 服务不应允许通过 Web 应用程序以外的任何地方进行访问。

实现这一目标的最佳方法是什么？我已经阅读了有关 WCF 服务的用户名/密码验证的信息，但很明显，一旦用户登录到 Web 应用程序，您就不会将密码存储在 Session 对象中，所以这对我来说没有多大意义。是使用证书和 WCF 服务检查 Web 应用程序在被调用时是否具有该证书的唯一方法吗？

非常感谢您对跛脚方面的任何帮助，我觉得我陷入了 WCF 安全噩梦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:55:16.873

您必须提供某种凭证。证书是一种可能性；另一种是在后端 WCF 服务中使用 Windows 身份验证，并且只允许访问托管您的 Web 应用程序的应用程序池的服务帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:50:28.363

您需要通过请求凭据来对 Web 应用程序进行身份验证，以便您的 WCF 服务是安全的。

# wif - FederationMetadata.xml 在 WIF 中扮演什么角色？

> ID：12474446
> 
> 赞同：2
> 
> 时间：2012-09-18T09:47:20.387
> 
> 标签：wif

我正在尝试为将使用 WIF 进行身份验证的 ASP.NET MVC3 应用程序开发身份验证插件。由于它是具有系统内配置的插件，因此我避免接触应用程序的 web.config 文件或其他任何内容。我已经让它工作了，但现在我试图指定 STS 应该发送我的应用程序的声明，似乎`FederationMetadata.xml`涉及到，但我找不到确认。事实上，我根本找不到关于这个神秘文件的任何信息。它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:53:17.967

FederationMetadata 告诉潜在的依赖方 STS 提供了哪些信息。

您的索赔应在该`EntityDescriptor/RoleDescriptor/fed:ClaimTypesOffered`部分详细说明

请参阅[http://blogs.msdn.com/b/card/archive/2010/06/25/using-federation-metadata-to-establish-a-relying-party-trust-in-ad-fs-2-0 .aspx](http://blogs.msdn.com/b/card/archive/2010/06/25/using-federation-metadata-to-establish-a-relying-party-trust-in-ad-fs-2-0.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T12:36:55.560

FederationMetadata 是一种双向交换。它用于告诉身份提供者您需要*什么*声明，并且身份提供者可以使用元数据告诉您的应用程序默认提供*什么声明。*

通过这种方式，您可以确保您的应用程序在与不同的身份提供者集成时具有所需的所有声明支持。

# visual-studio - OpenCV 和 Microsoft Visual Studio 2012（用于 x64）

> ID：12474448
> 
> 赞同：1
> 
> 时间：2012-09-18T09:47:27.840
> 
> 标签：visual-studio, opencv

我一直在尝试通过 MVS 2012 运行 OpenCV，但没有成功。

这是我得到的一个错误：

1>LINK：致命错误 LNK1104：无法打开文件 'opencv_core242d.lib' 1> 1>Build FAILED。

有人可以给我一个教程吗？或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:33:24.000

我写了一篇关于[在 Windows 7 (64-bit) 上使用 OpenCV 2.4.2 和 Visual Studio 2012](http://karanjthakkar.wordpress.com/2012/11/21/usin-opencv-2-4-2-with-visual-studio-2012-on-windows-7-64-bit/)的博文。通过提供的分步说明，我认为您应该很容易完成它。如果您有任何疑问，请随时发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:20:48.380

由于 OpenCV 2.4 不适用于 Visual Studio 2012。我认为这就是你总是遇到问题的原因。实际上，我花了很多时间来让所有事情都顺利进行。所以我写了一个非常简单的教程，介绍如何在 Visual Studio 2012 中使用 OpenCV 2.43。请检查一下。祝你好运。如果你还有问题，再问我。

> [http://answers.opencv.org/question/6495/visual-studio-2012-and-rtlfreeheap-error/#6603](http://answers.opencv.org/question/6495/visual-studio-2012-and-rtlfreeheap-error/#6603)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T09:39:27.437

可能有 2 个选项可以解决您的错误：

1) 您可以使用 opencv 2.4.2 与 Visual Studio 2012 连接可能会出现一些问题，因此请使用较新版本的 opencv

2) 您需要重新启动 Visual Studio 2012，以便它可以根据要求重新配置其设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T14:21:16.953

一些基本步骤...

1.  使用 cmake 创建 .sln 或解决方案文件...确保在 cmake 中正确**选择编译器**...使用包含 opencv 文件的文件夹中的 cmake 文件 (CMakelist.txt) 的地址...
2.  单击 .sln 文件（这将在您在 cmake 中设置的包含构建的路径的目标文件夹中找到..）并使用 VS2012 打开
3.  VS2012 将构建您的库和 dll...将 dll 的路径添加到系统变量 PATH...将库的路径放入 IDE 中...以及包含文件也...
4.  重新启动 VS2012 以在 PATH 变量中进行更改以反映

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T06:04:57.423

您有 2 个选项 - 一个是使用预编译库并将它们链接到您的 VS2012 项目中。

另一种是使用 CMake 制作正确的 .SLN 和 .PRJX 文件，这样您就可以在 VS2012 中简单地打开它们 .SLN 并自己编译所有内容。

两者都在这里讨论过，但是，要添加到第一个选项，您需要使用以下行手动编辑顶级 CMAKElist.txt 文件

```
if( MSVC ) # VS2012 doesn't support correctly the tuples yet
   add_definitions( /D _VARIADIC_MAX=10 )
 endif() 
```

在生成解决方案文件之前。这可确保您不会遇到 :tuple 的 VARIADIC 长度问题 - Visual Studio 2012 存在问题。

# android - java.lang.NoSuchMethodError - ErrorActivity.onCreate()

> ID：12474449
> 
> 赞同：1
> 
> 时间：2012-09-18T09:47:28.407
> 
> 标签：android

我是 android 应用程序开发的新手，不知何故，我的 playgoogle 应用程序帐户出现错误。谁能解释这是哪种错误？

```
 java.lang.NoSuchMethodError: dk.danyal.kids.channel.ErrorActivity.getActionBar
    at dk.danyal.kids.channel.ErrorActivity.onCreate(ErrorActivity.java:19)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1618)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1670)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3695)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507) 
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:02:13.080

要在旧版本的 Android 中使用 ActionBar，您可以查看 ActionBarSherlock (http://actionbarsherlock.com/)。它在可用时使用 ActionBar，如果不可用则使用自定义实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:54:27.780

可能您的应用程序适用于 Android 3.0 或更高版本，并且您在 Android 2.x 上运行它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:54:31.400

您的项目应以 Android 3.0 或更高版本为目标，以使用 getActionBar() 函数。

# redis - 在 Redis 中进行 sum/count/groupby 的最佳方法是什么？

> ID：12474453
> 
> 赞同：8
> 
> 时间：2012-09-18T09:47:33.300
> 
> 标签：redis

对于 Redis 列表（或 set/zset/hset）

```
['5', '5', '5', '5', '4', '3', '3', '3', '2', '2', '2', '2', '1', '1', '1'] 
```

什么是统计它的最佳方法，就像 sql 所做的那样

```
select count(key), sum(key) from table group by key; 
```

希望客户端循环不是唯一的方法......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-18T10:33:41.707

最好的方法是将总和存储为单独的键，并在您从 set/hash/zset 中添加/删除值时进行更新。

在 Redis 中，您应该尝试根据您的访问模式对数据进行建模。如果您在运行时需要总和，请预先计算并存储总和。如果您想按小时/每天/每月计算总和，则必须创建适当命名的键。

# c# - asp.net 超链接 - 单击以发出 POST 请求

> ID：12474456
> 
> 赞同：0
> 
> 时间：2012-09-18T09:47:57.237
> 
> 标签：c#, asp.net

```
<asp:HyperLink ID="hlBanner" Target="_blank" style="padding-left:10px;" runat="server" ImageUrl="banner.png" /> 
```

我想将一些信息（例如 FName、LName 和电子邮件）发送到另一个页面 ProcessInfo.aspx 的 POST 请求中。此处理页面从已发布的表单中提取值，例如 Request.Form["FName"]。我必须只使用 POST 技术，因为我无法对 ProcessInfo.aspx 进行更改。

我不能使用 Querystring 参数来传递信息。我希望使用 WebRequest 类来重定向到第二页。

如何构建用于发出 POST 请求的 navigateURL 属性？请建议。我也愿意改变控制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:32:18.773

使用[Server.Transfer](http://msdn.microsoft.com/en-us/library/ms525800%28v=vs.90%29.aspx)来调用`ProcessInfo.aspx`.

如果您在当前页面上有输入 FName、LName 和电子邮件，您也会收到 ProcessInfo 页面的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:55:15.667

如果你想在这里使用 Request.Form Collection 是一个很好的解决方案。

[http://www.c-sharpcorner.com/UploadFile/desaijm/ASP.NetPostURL11282005005516AM/ASP.NetPostURL.aspx](http://www.c-sharpcorner.com/UploadFile/desaijm/ASP.NetPostURL11282005005516AM/ASP.NetPostURL.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T06:46:49.323

我找到了更简单的方法，并且已经出现在 stackOverflow.com 上

[https://stackoverflow.com/a/6440159/86023](https://stackoverflow.com/a/6440159/86023)

# android-emulator - 在android中自动开始视频录制

> ID：12474458
> 
> 赞同：0
> 
> 时间：2012-09-18T09:48:02.290
> 
> 标签：android-emulator

我正在使用命令“adb shell am start -n com.android.gallery3d/com.android.camera.VideoCamera”打开摄像机应用程序

但是在那之后我需要开始录像，所以有什么命令或任何东西可以自动开始录像。

谢谢吉滕德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:02:15.423

以下语句应启动视频录制模式。然后使用 Camera Key 事件来启动和停止。

```
package = "com.android.gallery3d"
activity = "com.android.camera.VideoCamera"
action = "android.media.action.VIDEO_CAMERA"runComponent = package + '/' + activity
device.startActivity(component=runComponent,action=action) 
```

# java - 如何在java中使用邮件上传图片附件？

> ID：12474462
> 
> 赞同：2
> 
> 时间：2012-09-18T09:48:14.280
> 
> 标签：java, email

我是 Java 邮件的新手。我想发送带有图片附件的邮件。我已尝试使用以下代码将图像附加到邮件中。

```
BodyPart messageBodyPart = new MimeBodyPart();

                if (content == null) {
                    messageBodyPart.setText("");
                } else {
                    messageBodyPart.setText(content);
                }

                // Create a multipar message
                Multipart multipart = new MimeMultipart();

                // Set text message part
                multipart.addBodyPart(messageBodyPart);

                // Part two is attachment
                // messageBodyPart = new MimeBodyPart();
                DataSource source = new ByteArrayDataSource(
                        attachedFile2.getBytes("UTF-8"),
                        "application/octet-stream");

                //attachedFile2 is the filename of image.
                messageBodyPart = new MimeBodyPart();

                messageBodyPart.setDataHandler(new DataHandler(source));
                messageBodyPart.setFileName(attachedFile2);
                multipart.addBodyPart(messageBodyPart);
                message.setContent(multipart); 
```

此代码正在运行。收到带有图像附件的邮件。但问题是图像以不支持的格式显示或不显示原始图像。

我不知道如何解决这个问题。

请帮我..

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:15:17.800

你可以试试这个：

```
private void addImageResource(final MimeMultipart content, final String resourceName,
    final String resourceTitle) throws MessagingException, IOException {
    MimeBodyPart msgBodyPart = new MimeBodyPart();
    URL imgURL = getClass().getClassLoader().getResource(resourceName);
    final DataSource dsImg = new FileDataSource(imgURL.getFile());
    msgBodyPart.setDataHandler(new DataHandler(dsImg));
    msgBodyPart.setHeader("Content-ID", resourceTitle);
    content.addBodyPart(msgBodyPart);
} 
```

# android - 如何解析复杂的xml数据

> ID：12474463
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:48:17.827
> 
> 标签：android, xml-parsing

嗨，伙计们，我对 xml 解析有问题，我有以下必须解析的 xml，但我很困惑如何解析这个。我已经关注[这个](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

```
<Root>
<Category id="1" name="Live" subcategories="6">
<SubCategory id="1" name="Entertenment" subcategories="0"/>
<SubCategory id="2" name="Movies" subcategories="0"/>
<SubCategory id="3" name="Musics" subcategories="0"/>
<SubCategory id="4" name="Regional" subcategories="0"/>
<SubCategory id="5" name="Devotional" subcategories="0"/>
<SubCategory id="6" name="News" subcategories="4">
<ChildCategory id="1" name="International" subcategories="0"/>
<ChildCategory id="2" name="Politic" subcategories="0"/>
<ChildCategory id="3" name="Movies" subcategories="0"/>
<ChildCategory id="4" name="Celeberities" subcategories="0"/>
</SubCategory></Category>
</Root> 
```

如果有任何解决方案，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:59:29.337

使用 XMLPullParser。示例代码是解析 RSS 内容。

```
 try {
                // Standard code to make an HTTP connection.
                URL url = new URL(RSS_URL);
                URLConnection connection = url.openConnection();
                connection.setRequestProperty("User-agent", "Mozilla/4.0");
                connection.setConnectTimeout(20000);
                connection.connect();
                InputStream in = connection.getInputStream();

                XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                factory.setNamespaceAware(true);
                XmlPullParser xpp = factory.newPullParser();
                xpp.setInput(in, null);

                int eventType;
                String title = "";
                String link = "";
                String description = "";
                String pubDate = "";
                eventType = xpp.getEventType();
                while (eventType != XmlPullParser.END_DOCUMENT) {
                    if (eventType == XmlPullParser.START_TAG) {
                        String tag = xpp.getName();
                        if (tag.equals("item")) {
                            title = link = description = "";
                        } else if (tag.equals("title")) {
                            xpp.next();
                            title = xpp.getText();
                        } else if (tag.equals("link")) {
                            xpp.next();
                            link = xpp.getText();
                        } else if (tag.equals("description")) {
                            xpp.next();
                            description = xpp.getText();
                        } else if (tag.equals("pubDate")) {
                            xpp.next();
                            pubDate = xpp.getText();
                        }
                    } else if (eventType == XmlPullParser.END_TAG) {
                        String tag = xpp.getName();
                        if (tag.equals("item")) {
                            description = "    "
                                    + description.replaceAll("<a target.*<br>", "");
                            RssItem item = new RssItem();
                            item.mTitle = title;
                            item.mUrl = link;
                            item.mDescription = description;
                            item.mPubDate = pubDate;
                            item.mMD5 = MD5.getMD5(link.getBytes());

                                        runOnUiThread(new DataInsert(item));
                        }
                    }
                    eventType = xpp.next();
                }
            } catch (Exception e) {
                Log.i(" RssReaderView ", e.getMessage());
                e.printStackTrace();
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:17:33.357

这是从 xml 解析的示例代码。首先你创建一个数据库来存储来自 xml 解析的数据......试试吧..

```
dh.delete(Exampl.TABLE, null, null);
    try {
        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
        Document doc = docBuilder.parse (istream);
    doc.getDocumentElement ().normalize ();
    System.out.println ("Root element of the doc is " + 
         doc.getDocumentElement().getNodeName());
    NodeList dblist = doc.getElementsByTagName("database");
    Element e = (Element) dblist.item(0);
    NodeList tab = e.getElementsByTagName("table");
    System.out.println(tab.getLength() + " Tabels");

    for(int k=0;k<tab.getLength();k++) {

        Element el = (Element) tab.item(k);
        NodeList col = el.getElementsByTagName("column");

        System.out.println("ID is " );
        System.out.println();
        System.out.println(el.getElementsByTagName("column").item(0).getTextContent());
        System.out.println(el.getElementsByTagName("column").item(1).getTextContent());

        Category .add(el.getElementsByTagName("column").item(0).getTextContent());
        subCategory .add(el.getElementsByTagName("column").item(1).getTextContent());

    }

}catch (Exception err) {
    err.printStackTrace();
}

    for (int j = 0; j < (Category .size()); j++) {
        ContentValues questionValues = new ContentValues();
        System.out.println(Category .get(j));
        questionValues.put("Category ", Category .get(j));
        questionValues.put("subCategory ", subCategory .get(j));

        dh.insert(Example.TABLE, null,
                questionValues);

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:51:48.110

我有同样的问题，我使用 XMLPullParser 做到了。您可以逐个解析 xml 并将它们存储到 hashmap 并且如果出现任何相同的标签，您可以将它们存储在向量中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T10:01:27.527

使用这个检查

```
public class MyXmlHandler extends DefaultHandler{

    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        if(qName.equalsIgnoreCase("Category")){ 
                     // do something
            String id = attributes.getValue("id")));
String name = attributes.getValue("Name")));
String subcategories = attributes.getValue("subcategories")));

        }else if(qName.equalsIgnoreCase("SubCategory")){
              // do something
            String id = attributes.getValue("id")));
String name = attributes.getValue("Name")));
String subcategories = attributes.getValue("subcategories")));
        }else if(qName.equalsIgnoreCase("ChildCategory")){
              // do something
            String id = attributes.getValue("id")));
String name = attributes.getValue("Name")));
String subcategories = attributes.getValue("subcategories")));
        }

    }

    public void endElement(String uri, String localName, String qName)
    throws SAXException {
        if(qName.equalsIgnoreCase("Category ")){
            //Do something
        }if(qName.equalsIgnoreCase("subCategory ")){
            //Do something
        }
if(qName.equalsIgnoreCase("ChildCategory ")){
            //Do something
        }
    }
    /* (non-Javadoc)
     * @see org.xml.sax.helpers.DefaultHandler#characters(char[], int, int)
     */
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        // TODO Auto-generated method stub
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T10:28:16.653

试试这个

```
 public class MyXmlHandler extends DefaultHandler{

 boolean isCategory, isChildCategory,isSubCategory = false;

    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if(qName.equalsIgnoreCase("Category"))
            {
            isCategory = true;
            String id = attributes.getValue("id");

        }else if(qName.equalsIgnoreCase("SubCategory"){ 
                     isSubCategory =true;
            String id = attributes.getValue("id");

        }else if(qName.equalsIgnoreCase("ChildCategory")){
              // do something
            String id = attributes.getValue("id");
            isChildCategory =false;
            }

    }

    public void endElement(String uri, String localName, String qName)
    throws SAXException {
        if(qName.equalsIgnoreCase("Category ")){
           isCategory = false;
        }if(qName.equalsIgnoreCase("subCategory ")){
            isSubCategory = false;
        }
if(qName.equalsIgnoreCase("ChildCategory ")){
            isChildCategory =false;
        }
    }
    /* (non-Javadoc)
     * @see org.xml.sax.helpers.DefaultHandler#characters(char[], int, int)
     */
    public void characters(char[] ch, int start, int length)
            throws SAXException {
            String value = new String(ch,start,length);
        if(isCategory)
        {
          String str = value;
        }

        if(isSubCategory)
        {
          String str1 = value;
        }
    }

}
////////
 //TO call MyXmlHandler
 try{
            SAXParserFactory spf=SAXParserFactory.newInstance();
            SAXParser sp=spf.newSAXParser();
            XMLReader xr=sp.getXMLReader();
            MyXmlHandler datahandler=new MyXmlHandler();
            xr.setContentHandler(datahandler);

            xr.parse(new InputSource("url"));

            }catch(Exception e)
            {
               Log.e("SAX XML", "i solve error");
            } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-21T10:31:52.417

您可以使用简单的 XML 解析器库，它很容易在 android 中使用。您只需在代码中创建相关的类和对象即可。您可以点击链接了解它 [http://robertmassaioli.wordpress.com/2011 /04/21/simple-xml-in-android-1-5-and-up/](http://robertmassaioli.wordpress.com/2011/04/21/simple-xml-in-android-1-5-and-up/)

# activepivot - 如何诊断空的 ActivePivot 多维数据集？

> ID：12474466
> 
> 赞同：0
> 
> 时间：2012-09-18T09:48:29.223
> 
> 标签：activepivot

从 ActivePivot Sandbox 4.3.2 开始，我更改了输入立方体的对象并重新定义了立方体的字段、维度和度量。当我启动多维数据集时，我在日志中看不到错误消息。

但是，当我使用 ActivePivot Live 2.6.2 或 Excel 2010 连接到多维数据集并运行以下 MDX 查询时：

```
SELECT FROM [cubeName] WHERE ([Measures].[contributors.COUNT]) 
```

我看到一个空的数据透视表，可能是什么原因？如何诊断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:57:33.113

在非空多维数据集上出现空数据透视表的最常见原因是存在切片维度。如果你有：

1.  2 个切片尺寸“A”和“B”
2.  第一个事实在“A”上贡献“b”，在“B”上贡献“a”
3.  第二个事实在“A”上贡献“a”，在“B”上贡献“b”

那么默认成员将是沿“A”的“a”和沿“B”的“a”。然后，您描述的查询将返回一个空的数据透视表，因为没有“a”沿“A”和“a”沿“B”的事实。

第二个主要原因是安全过滤。您应该使用没有任何访问限制的用户重试。通过 ActivePivotManager 监控 bean 上的专用操作请求查询，这很容易实现。

当然，您应该首先检查您的多维数据集是否为非空（通过 JConsole）。

# php - 从表中填充多级菜单

> ID：12474469
> 
> 赞同：1
> 
> 时间：2012-09-18T09:48:40.427
> 
> 标签：php, mysql, multi-level

我查询了

```
"SELECT * FROM products" 
```

我可以使用该查询的所有行来填充具有以下主题的表。

```
(id_category) (id_brand) (id_size) 
```

现在我正在尝试从这个填充的表中创建一个多级无序列表。有可能做到吗？结果应该是这样的：

**分类名称**

```
 Brand name for above Category

 Size name for above Brand and Category 
```

# magento - 将 magento 1.5x 升级到 1.6x 失败

> ID：12474470
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:48:42.230
> 
> 标签：magento, cpanel, magento-1.5, magento-1.6, mage

我已经尝试在我的 cpanel 中将我的 magento 1.5x 升级到 magento 1.6x，但我总是发现“失败..失败..失败”。我试过这种方式..：

寻找 。-type f -exec chmod 777 {} \;

寻找 。-type d -exec chmod 777 {} \;

rm -rf var/cache/* var/session/*

chmod 550 ./法师

然后当我尝试这个之后..：

./mage 法师设置 .

结果失败，这是消息..：

正在运行初始设置...

XCache 需要 Zend Engine API 版本 220060519。安装的 Zend Engine API 版本 220090626 更新。[在http://xcache.lighttpd.net](http://xcache.lighttpd.net)联系 moo 以获取更高版本的 XCache。

加载 /usr/lib/kloxophp/ioncube/ioncube_loader_lin_age.so 失败：/usr/lib/kl oxophp/ioncube/ioncube_loader_lin_age.so：无法打开共享对象文件：没有这样的文件或目录 无法加载 Zend Extension Manager - 它已构建配置 1.2.0，其中运行引擎为 API220090626，NTS XCache 需要 Zend Engine API 版本 220060519。安装的 Zend Engine API 版本 220090626 较新。[在http://xcache.lighttpd.net](http://xcache.lighttpd.net)联系 moo 以获取更高版本的 XCache。

加载 /usr/lib/kloxophp/ioncube/ioncube_loader_lin_age.so 失败：/usr/lib/kl oxophp/ioncube/ioncube_loader_lin_age.so：无法打开共享对象文件：没有这样的文件或目录 无法加载 Zend Extension Manager - 它已构建配置 1.2.0，其中运行引擎为 API220090626，NTS XCache 需要 Zend Engine API 版本 220060519。安装的 Zend Engine API 版本 220090626 较新。[在http://xcache.lighttpd.net](http://xcache.lighttpd.net)联系 moo 以获取更高版本的 XCache。

加载 /usr/lib/kloxophp/ioncube/ioncube_loader_lin_age.so 失败：/usr/lib/kloxophp/ioncube/ioncube_loader_lin_age.so：无法打开共享对象文件：没有这样的文件或目录 无法加载 Zend Extension Manager - 它是使用配置构建的1.2.0，而运行引擎是 API220090626,NTS

它是什么？你们能帮我解决我的问题吗？我真的需要你们的帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:03:52.717

这与 Magento 无关，这是服务器设置问题。你有没有使用 EasyApache 重建过 apache/php？

看起来您的 PHP 和 XCache 版本不兼容。

您应该向您的主机寻求帮助，这根本不是 Magento 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:25:28.510

如果您的网站运行良好并且您在命令行中遇到问题，则可能是*php*配置错误。尝试更新`php.ini`或编辑`./mage`- 输入有效的 php 二进制路径。

# javascript - 在弹出窗口中打开 ASP.NET MVC3 应用程序

> ID：12474471
> 
> 赞同：0
> 
> 时间：2012-09-18T09:48:42.963
> 
> 标签：javascript, asp.net-mvc-3, popup

在 ASP.NET MVC3 项目中，我有 2 个控制器：一个是

**家庭控制器.cs**

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Index()
    {
        return View();
    }

    //
    // POST: /Home/CheckLogin/

    [HttpPost]
    public ActionResult CheckLogin()
    {
        // setting the session variable if login is correct
        // and redirecting to /ReWeb/

        // else, reloading the login.
    }
} 
```

另一个是**ReWebController.cs**

```
public class ReWebController : Controller
{
    //
    // GET: /ReWeb/

    public ActionResult Index()
    {
        // Session verification
        if (Session["_ReWeb"] != null)
        {
            return View();
        }

        // If session is null or not valid,
        // redirect to login page
        return RedirectToAction("Index", "Home");
    }
} 
```

在登录页面中，即**HomeController** *Index*操作返回的视图，我有以下表单：

```
<div id="loginPanel">
    <form enctype="application/x-www-form-urlencoded" id="login" method="post">
        <h1>Log In</h1>
        <fieldset id="inputs">
            <input id="Utente" name="Utente" type="text" placeholder="Utente" autofocus="true" required="true" />   
            <input id="Password" name="Password" type="password" placeholder="Password" required="true" />
        </fieldset>
        <fieldset id="actions">
            <input type="submit" id="submit" value="Log in" onclick="javascript:window.open('/Home/CheckLogin/', 'WebClient', 'width=500,height=250,left=100,top=100')"/>
        </fieldset>
    </form>
</div> 
```

我要做的是，当用户单击**登录**按钮时，应用程序会在弹出页面中返回**ReWebController的视图。**根据我在这里所做的，它会打开弹出窗口，但会出现 404 错误：**“/”应用程序中的服务器错误。无法找到该资源。请求的 URL：/Home/CheckLogin/**。

我怎样才能完成这种方法？我做对了吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:02:17.753

您收到 404 错误是因为您的 HomeController 仅包含一个接受 POST 请求的 CheckLogin 操作。单击登录按钮时，您只需在新窗口中加载一个 URL，这是一个 GET 请求。

处理此问题的一个选项是让您的 CheckLogin 操作返回一个包含 true 或 false 的 JSON 对象，具体取决于登录是否成功。在您的登录视图中，您可以执行以下操作：

```
$('form#login').submit(function () {
    var data = {}; // put the login data in here

    $.post('/Home/CheckLogin', data, function (result) {
        // Here you can check 'result'
        if (result.success === true) {
            window.open('/ReWeb', 'WebClient', 'width=500,height=250,left=100,top=100');
        }
        else {
            // The login failed
        }
    }).error(function() {
        // Something went wrong when trying to make the request.
        // Like a 404, 501, ... error
    });

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:43:18.620

您可以将**action="Checklogin"**添加到表单元素中。

# plsql - 将相应 id 字段的列值相乘

> ID：12474476
> 
> 赞同：0
> 
> 时间：2012-09-18T09:48:48.623
> 
> 标签：plsql, oracle11g

我有一个包含 id 及其各自值的表。我必须将每个 id 的相应值相乘。

```
 CREATE TABLE mult_tbl(
  id NUMBER,
  val number
 );

 insert all
  into mult_tbl values (1,2)
  into mult_tbl values (1,3)
  into mult_tbl values (1,5)
  into mult_tbl values (2,2)
  into mult_tbl values (2,0)
  INTO mult_tbl VALUES (1,-1)
  into mult_tbl values (4,10)
  into mult_tbl values (4,3)
select * from dual; 
```

我如何**计算 id 的每个唯一值的逐行乘法**。在乘以相应的值后，我试图获得显示 id 及其各自结果的输出。

*   对于 id 1，o/p -30

*   对于 id 2，o/p 0

*   对于 id 4，o/p 30

我正在尝试实现光标但没有任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:40:03.933

也许这可以帮助

```
select id,
  case
    when zer=1 then 0
    when neg=1 then -prd
    else prd
  end prd
from (
  select id, exp(sum(ln(abs(decode(val,0,1,val))))) prd
  from mult_tbl 
  group by id
) left join (
  select id,
  count(decode(val,0,val)) zer,
  mod(count(nullif(val,0)),2) neg
  from mult_tbl where val<=0
  group by id
) using(id) 
```

# symfony - Symfony2 嵌入表单使用相同的属性路径 - 错误冒泡问题

> ID：12474481
> 
> 赞同：5
> 
> 时间：2012-09-18T09:49:01.830
> 
> 标签：symfony, nested-forms, symfony-forms, symfony-2.1

我已将用户的帐户区域拆分为不同的表单，然后对于注册表单，我将这些位组合在一起，如下所示：

```
class RegistrationFormType extends AbstractType
{

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('email', 'email', array(
            'label' => '* Email address:'
        ))
        ->add('account_personal', 'my_personalinfo_form', array(
            'property_path' => 'account'
        ))
        ->add('account_contact', 'my_contactinfo_form', array(
            'property_path' => 'account'
        ))
    ;
} 
```

问题是错误消息`account_personal`冒泡到表单的顶部。例如，如果名字在个人信息表单中留空，则“请输入您的名字”。“个人”和“联系”表格在他们自己的页面上以自己的形式正常工作。

的错误消息`account_contact`很好，并出现在正确的字段旁边。

但是，如果我交换`->add`上面的两个位（所以`account_contact`首先），那么问题就会逆转；工作错误消息`account_personal`现在在其相应字段旁边显示得很好，但现在错误消息`account_contact`冒泡到顶部！

任何建议都非常感谢！

- - - 编辑 - - -

个人信息表：

```
class PersonalInfoType extends AbstractType
{

public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('title', 'text')
        ->add('first_name', 'text', array(
            'required' => true,
            'label' => '* First name:'
        ))
        ->add('last_name', 'text', array(
            'required' => true,
            'label' => '* Surname:'
        ))
    ;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'My\UserBundle\Entity\Account',
        'validation_groups' => array('personalInfo')
    ));
}

public function getName()
{
    return 'my_personalinfo_form';
} 
```

联系信息表：

```
class ContactInfoType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('postcode', 'text', array(
            'required' => true
        ))
        ->add('address_1', 'text', array(
            'required' => true
        ))
        ->add('address_2', 'text', array(
            'required' => false
        ))
        ->add('address_3', 'text', array(
            'required' => false
        ))
        ->add('town', 'text')
        ->add('phone_daytime', 'text', array(
            'required' => true
        ))
        ->add('phone_mobile', 'text', array(
            'required' => true
        ))
    ;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'My\UserBundle\Entity\Account',
        'validation_groups' => array('contactInfo')
    ));
}

public function getName()
{
    return 'my_contactinfo_form';
} 
```

以及要完成的 Account 实体：

```
/**
 * My\UserBundle\Entity\Account
 *
 * @ORM\Entity
 * @ORM\Table(
 *      name="accounts"
 * )
 */
class Account
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(type="string", length=25, nullable=true)
 * @Assert\Choice(choices = {"Mr", "Mrs", "Miss", "Ms", "Dr", "Prof"}, message = "Choose a valid title", groups={"personalInfo"})
 */
protected $title;

/**
 * @ORM\Column(type="string", length=150, nullable=true)
 * @Assert\NotBlank(message="Please enter your first name", groups={"personalInfo"})
 * @Assert\Length(max=150, maxMessage="null|Your first name must have less than {{ limit }} characters", groups={"personalInfo"})
 * @Assert\Regex(
 *     pattern="/\d/",
 *     match=false,
 *     message="Your name cannot contain a number"
 * )
 */
protected $first_name;

/**
 * @ORM\Column(type="string", length=150, nullable=true)
 * @Assert\NotBlank(message="Please enter your last name", groups={"personalInfo"})
 * @Assert\Length(max=150, maxMessage="null|Your last name must have less than {{ limit }} characters", groups={"personalInfo"})
 * @Assert\Regex(
 *     pattern="/\d/",
 *     match=false,
 *     message="Your name cannot contain a number"
 * )
 */
protected $last_name;

/**
 * @ORM\Column(type="string", length=255, nullable=true)
 * @MyAssert\Phone(message="Your daytime phone number is not valid", groups={"contactInfo"})
 */
protected $phone_daytime;

/**
 * @ORM\Column(type="string", length=255, nullable=true)
 * @MyAssert\MobilePhone(message="Your mobile phone number is not valid", groups={"contactInfo"})
 */
protected $phone_mobile;

/**
 * @ORM\Column(type="string", length=255)
 * @Assert\NotBlank(message="Please enter the first line of your address", groups={"contactInfo"}
 * @Assert\Length(max=250, maxMessage="null|The first line of your address must have less than {{ limit }} characters", groups={"contactInfo"})
 */
protected $address_1;

/**
 * @ORM\Column(type="string", length=255, nullable=true)
 * @Assert\Length(max=250, maxMessage="null|The second line of your address must have less than {{ limit }} characters", groups={"contactInfo"})
 */
protected $address_2;

/**
 * @ORM\Column(type="string", length=255, nullable=true)
 * @Assert\Length(max=250, maxMessage="null|The third line of your address must have less than {{ limit }} characters", groups={"contactInfo"})
 */
protected $address_3;

/**
 * @ORM\Column(type="string", length=45, nullable=true)
 * @Assert\NotBlank(message="Please enter your town", groups={"contactInfo"})
 * @Assert\Length(max=45, maxMessage="null|Your town name must have less than {{ limit }} characters", groups={"contactInfo"})
 */
protected $town;

/**
 * @ORM\Column(type="string", length=45, nullable=true)
 * @Assert\NotBlank(message="Please enter your postcode", groups={"contactInfo"})
 * @MyAssert\Postcode(message="Invalid postcode entered", groups={"contactInfo"})
 */
protected $postcode;

 ... etc 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T23:01:32.240

问题在于以一种形式两次使用相同的属性路径。我在这里提出了一个问题：

[https://github.com/symfony/symfony/issues/5578](https://github.com/symfony/symfony/issues/5578)

我在上面发布了这个解决方案：

我想出了一个不同的方法，即使用虚拟字段创建一个新的 FormType 来包含 2 个嵌入的表单：

```
class RegistrationAccountFormType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('account_personal', 'my_personalinfo_form', array(
            'data_class' => 'My\UserBundle\Entity\Account',
            'virtual' => true
        ))
        ->add('account_contact', 'my_contactinfo_form', array(
            'data_class' => 'My\UserBundle\Entity\Account',
            'virtual' => true
        ))
    ;
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'My\UserBundle\Entity\Account'
    ));
}

public function getName()
{
    return 'my_registration_account_form';
}
} 
```

然后将主 RegistrationFormType 中的这些字段替换为

```
->add('account', new RegistrationAccountFormType) 
```

这似乎是这样做的“正确”方式，它使 property_paths 在表单中保持唯一，并且子表单中也不需要 property_path 更改。

# mysql - 不允许从触发器 mysql 返回结果集

> ID：12474489
> 
> 赞同：13
> 
> 时间：2012-09-18T09:49:26.963
> 
> 标签：mysql

```
delimiter $$
CREATE TRIGGER REDUCE_NOTE_COUNT
 AFTER DELETE ON iv_notes
 FOR EACH ROW  BEGIN
DECLARE supplierid int(11);
DECLARE customerid int(11);

SELECT supplierid ,customerid FROM iv_documents WHERE id=OLD.note_documentid;
SET supplierid=supplierid;
SET customerid=customerid;

IF supplierid=OLD.note_companyid THEN
    update iv_documents 
            set supplier_notes=supplier_notes-1 
            where id=OLD.note_documentid and supplier_notes>0;
END IF;
IF customerid=OLD.note_companyid THEN
    update iv_documents set customer_notes=customer_notes-1 
            where id=OLD.note_documentid 
            and customer_notes>0 ;
END IF;
END$$ 
```

分隔符；

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-18T10:11:09.363

您不能从触发器执行 SELECT 语句。如果要设置变量，请使用[SELECT INTO](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)语句，例如 -

```
DECLARE supplierid_ INT(11);
DECLARE customerid_ INT(11);

SELECT
  supplierid, customerid
INTO
  supplierid_, customerid_
FROM
  iv_documents
WHERE
  id = OLD.note_documentid;

IF supplierid_ = OLD.note_companyid THEN
... 
```

此外，重命名变量，它们必须与字段名称不同。

# javascript - JQuery：将多个页面合二为一

> ID：12474491
> 
> 赞同：0
> 
> 时间：2012-09-18T09:49:33.827
> 
> 标签：javascript, jquery, ajax, cordova

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:18:50.817

Dynamic loading is a feature of several Javascript frameworks. AngularJS and Backbone.js for example. Maybe take a look at their approach to loading multiple views?

I have previously worked on an app that did this by adding an empty div for each view to the index.html, and then dynamically loading the Javascript for each view on demand. The Javascript for the views was responsible for rendering the HTML into the div for that view.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:20:09.887

Without setting up a test case for you, if you really want to separate your pages to make your coding easier I would recommend to load the pages the standard way for jQuery Mobile i.e.

```
$.mobile.changePage( "about/us.html", { transition: "slideup"} ); 
```

This way you aren't reinventing the wheel and it satisfies your request. The overhead will be negligible compared to your proposed solution in any case let alone taking into account you want the first page to render quickly rather than to be blocked by inserting many pages before any html is rendered in any case. Since they will be local on the device in any case Phonegap will be able to serve them very quickly.

One thing to remember when loading pages through jQuery Mobile is that it strips out anything in the target page outside of the

```
data-role="page|dialog|popup" 
```

tag and therefore to load custom page-specific javascript I would recommend you include the script tag directly below the

```
data-role="page" 
```

opening tag and set any page initialization to occur on "pageinit"

```
<div data-role="page" id="options" data-theme="a">
<script type="text/javascript">
    $(document).bind('pageinit', initializeOptions());
    function initializeOptions() {
        // do your page initialization here . . . 
    }
</script>
<!-- rest of page continues here . . . . --> 
```

and then continue with the rest of your page as needed. That way it will be parsed when the page is loaded via the $.mobile.changePage method.

Hope that helps.

# struts2 - Struts2 - 如何在 validate 方法中查找在 xml 验证期间发现的错误？

> ID：12474496
> 
> 赞同：1
> 
> 时间：2012-09-18T09:49:58.123
> 
> 标签：struts2, struts

我相信如果同时设置了**-xml 验证**和**action 类**中的验证，那么，无论在 xml 验证阶段是否发现错误，`validate`都会调用 action 类的方法。在此前提下，我如何知道我的操作`validate()`方法内部存在任何 xml 验证错误（`getActionErrors().size() == 0`.. 类似的东西）。

如果在将控制权发送回 jsp 之前出现验证错误，我的目的是设置动作类的某些变量。（将它们设置在内部`prepare`是错误的，因为无论是否有错误，prepare 都会执行）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T13:12:00.140

您可以使用[`getFieldErrors()`](http://struts.apache.org/2.0.6/struts2-core/apidocs/com/opensymphony/xwork2/ActionSupport.html#getFieldErrors%28%29)which 返回

> 将错误从字段名（字符串）映射到字符串错误消息集合的映射

还有一些辅助方法，例如[`hasActionErrors()`](http://struts.apache.org/2.0.6/struts2-core/apidocs/com/opensymphony/xwork2/ActionSupport.html#hasActionErrors%28%29)和 ，[`hasFieldErrors()`](http://struts.apache.org/2.0.6/struts2-core/apidocs/com/opensymphony/xwork2/ActionSupport.html#hasFieldErrors%28%29)它们可以帮助您确定错误是否已经存在。

请注意，第一个告诉您是否存在操作级错误，后者有助于确定是否存在特定的字段相关错误。

# json - Silex & phpunit JSON 响应

> ID：12474500
> 
> 赞同：5
> 
> 时间：2012-09-18T09:50:31.603
> 
> 标签：json, phpunit, silex

我正在尝试使用 phpunit 为 Silex 编写一些测试。

我有一个生成 Crawler 对象的类 Symfony\Component\BrowserKit\Client。

该对象期望客户端的结果是 xhtml，但是我尝试测试的我的 api 返回 JSON，并且爬虫不允许这样做。

Silex 或 phpunit 中是否有内置类可以与 JSON 一起使用，还是我必须自己动手？

干杯

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-18T19:53:05.520

处理json没什么特别的，但是不用爬虫就可以用客户端。只需调用`getResponse()`客户端以获取响应，如下所示：

```
$client = $this->createClient();
$client->request('GET', '/');
$response = $client->getResponse();

$data = json_decode($response->getContent(), true);
$this->assertSame(array('id' => 1, 'name' => 'igorw'), $data['users'][0]); 
```

我建议您将此逻辑移动到测试用例的辅助方法中并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T10:40:04.450

为了在 Symfony 2 Browser-Kit 中发送 JSON 请求，使用`HTTP_ACCEPT`代替`ACCEPT`和`HTTP_CONTENT_TYPE`代替`CONTENT_TYPE`. `POST`以下是使用 some 发送请求的示例`$data`：

```
$client->request(
    $method = 'POST',
    $uri,
    $parameters = array(),
    $files = array(),
    $server = array(
        'HTTP_CONTENT_TYPE' => 'application/x-www-form-urlencoded; charset=UTF-8', // for sending urlencoded data
        //or 'HTTP_CONTENT_TYPE' => 'application/json', // for sending JSON data
        'HTTP_ACCEPT'       => 'application/json',      
    ),
    $content = $data,
    $changeHistory = true
);

$response = $client->getResponse();
$response_data = json_decode($response->getContent(), true); 
```

# java - 找不到类 QWebElement

> ID：12474502
> 
> 赞同：1
> 
> 时间：2012-09-18T09:50:45.657
> 
> 标签：java, qt, javadoc, qt-jambi

我正在使用 QtWebkit 开发 Web 应用程序框架。现在我已经开始使用 DOM 并尝试使用 QWebElement。但是当我尝试编译时，它带来了以下错误：

符号：类 QWebElement
位置：类测试
QWebElement elem = new QWebElement();

这是一个不起作用的示例：

```
import com.trolltech.qt.gui.*;
import com.trolltech.qt.webkit.*;
import com.trolltech.qt.core.*;
import com.trolltech.qt.xml.*;

public class test {
    public test() {
        QWebElement elem = new QWebElement();
    }
    public static void main(String[] args) {
        QApplication.initialize(args);
        new test();
        QApplication.exec();
    }
} 
```

谁能告诉我我做错了什么？

编辑：我忘记了：当我查看 javadoc 时，我找不到它！一切都说它不存在。但我见过其他人使用它。它存在还是不存在？

# jquery - jQuery 推文方法

> ID：12474506
> 
> 赞同：0
> 
> 时间：2012-09-18T09:51:01.650
> 
> 标签：jquery, tweets

我一直在尝试这个[http://jsfiddle.net/pJgyu/26733/](http://jsfiddle.net/pJgyu/26733/)似乎工作正常，但是当我将我的代码复制粘贴到我的 rails 3.2 时，它什么也没显示！出了什么问题？我需要从用户那里获取推文，所以我需要一个简单的方法来做到这一点！还有为什么 jQuery API 中不存在“tweets”方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:53:48.420

在小提琴上，包含一个***外部脚本***，因此它在那里工作。

> [http://github.com/kerberoS/jQuery-Tweets/raw/master/js/jquery.tweets.0.1.js](http://github.com/kerberoS/jQuery-Tweets/raw/master/js/jquery.tweets.0.1.js)

如果你想让它在你的代码上工作，你也必须在你的文档中**包含上面的脚本。**

* * *

jQuery 是一个轻量级的 JavaScript 库，而不是社交网络工具包，因此它在核心库中没有任何方法作为“推文”。但是，您可以找到出于这些特定原因构建的插件，就像您发布的小提琴中使用的插件一样。

:)

# javascript - JSON 数据格式

> ID：12474514
> 
> 赞同：0
> 
> 时间：2012-09-18T09:51:43.443
> 
> 标签：javascript, jquery, json

不太熟悉 JSON 数据以及如何使用 JavaScript 创建它。这就是我正在尝试的，我创建了两个 JS 变量

```
var json={};
var json1={}; 
```

我有一些特定的循环来迭代数据和循环，比如

```
for(firstLoop){
   key=outerKey;
   for(innerLook){
   innerKey=innerkey;
     for(lastloop){
       jsonValues= create values in a java variable
     }
      json[innerKey]=jsonValues;
    }

    json1[outerKey]=JSON.stringify(json);
  } 
```

这样做我得到以下输出

```
Required: "{"Center":"radio_Required_Center_0,radio_Required_Center_1,","Left":"radio_Required_Left_0,"}" 
```

这不是有效的 JSON 格式。在我的情况下，我的想法是创建一个外部键`Required`而不是内部键，`Center`并且`Left`

这样我就可以针对键迭代每个值`Center`（我可以基于 打破字符串`'`）

我不确定如何创建正确的结构，我不想在服务器端这样做，这很容易做到。任何解决方案或提示都会很有帮助。

**编辑**

```
var data= JSON.stringify(json1); 
```

给出以下输出

```
{"Required":"{\"Center\":\"radio_Required_Center_0,radio_Required_Center_1,\",\"Left\":\"radio_Required_Left_0,\"}"} 
```

这是有效的 JSON 数据，现在我需要根据 JSON 中的数据执行一些代码，这是我的要求

1.  获取外键（必需或也可以有其他）。
2.  获取键下的所有值`Center`并`Left`
3.  根据从步骤 2 中检索到的值创建数组（基于“，”分割）。
4.  循环通过从步骤 3 获得的值并执行逻辑。

我真正的挑战是在第 2 步和第 3 步，我需要获取密钥及其关联值以及那些未预定义的密钥，因此我无法根据那里的名称访问它们。

我正在考虑一种方法来获取密钥及其值，而无需硬编码密钥名称并执行我的逻辑。是否有可能通过这种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:08:45.010

如果您只是想组合一个大的 JSON 对象，则不需要在将一个 JSON 对象添加到另一个对象之前对其进行字符串化......所以`JSON.stringify(json)`您可以这样做而不是这样做`json1[outerKey]=json`

```
for(firstLoop){
   key=outerKey;
   for(innerLook){
   innerKey=innerkey;
     for(lastloop){
       jsonValues= create values in a java variable
     }
      json[innerKey]=jsonValues;
    }

    json1[outerKey]=json;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:06:35.523

使用原生 Javascript toSource ：

```
var obj= new Object();
var obj1= new Object();

for(firstLoop){
   key=outerKey;
   for(innerLook){
   innerKey=innerkey;
     for(lastloop){
       jsonValues= create values in a java variable
     }
      obj.innerKey=jsonValues;
    }

    obj1.outerKey=obj;
  }

  json = obj.toSource();
  json1 = obj1.toSource(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:57:59.480

尝试[jsonlint.com](http://jsonlint.com)验证您的 JSON

这是有效的：

```
{
    "Center": "radio_Required_Center_0,radio_Required_Center_1,",
    "Left": "radio_Required_Left_0,"
} 
```

这也是有效的：

```
{
    "Required": {
        "Center": "radio_Required_Center_0,radio_Required_Center_1,",
        "Left": "radio_Required_Left_0,"
    }
} 
```

这不是：

```
Required: {
    "Center": "radio_Required_Center_0,radio_Required_Center_1,",
    "Left": "radio_Required_Left_0,"
} 
```

using`JSON.stringify()`是将 javascript 对象转换为 JSON 字符串格式的正确方法。但是，如果要将其放入变量中，则应首先执行此操作，然后在最后一步中将其转换为 JSON 字符串。

```
var output = { "Required": yourpreviousjsonvar },
    jsonString = JSON.strinify(output); 
```

**编辑：**

您需要先处理数据，如果我理解正确，您可能甚至不需要 JSON 字符串。（=> 但是，如果您已经得到了一个字符串，则需要先对其进行解析。使用`JSON.parse(yourjsonstring)`)

1.  获取外键（必需或也可以有其他）。
2.  获取键 Center 和 Left 下的所有值
3.  根据从步骤 2 中检索到的值创建数组（基于“，”分割）。
4.  循环通过从步骤 3 获得的值并执行逻辑。

将此作为变量：

```
var a = {
    "Required": {
        "Center": "radio_Required_Center_0,radio_Required_Center_1,",
        "Left": "radio_Required_Left_0,"
    }
}
// step 1
console.log(a.Required);
// step 2
console.log(a.Required.Center);
console.log(a.Required.Left);
// step 3
var center = a.Required.Center.split(',');
var left = a.Required.Left.split(',');
// step 4
for(var i = 0; i<center.length; i++){
    console.log("doing somthing with", center[i]);
} 
```

这是一个[小提琴](http://jsfiddle.net/Vandeplas/nWJ7x/)=> 使用 Chrome/safari/Opera 的[开发工具](https://developers.google.com/chrome-developer-tools/docs/overview#access)并检查控制台以检查输出。或使用 firebug（在 firefox 中）或 IE9 或更高版本 (F12)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T09:58:08.333

如果您使用的是现代版本的 Javascript，它会内置 JSON 函数。

```
var jsonString = JSON.stringify(jsobject); 
```

...将 JS 对象转换为 JSON 字符串。

（参见[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)）

和

```
var jsOject = JSON.parse(jsomString); 
```

...转向另一个方向。

（参见[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)）

如果您使用的是旧浏览器——例如，旧版本的 IE，您唯一需要担心它不是内置的。[但是，在这种情况下，您可以加载类似这样](http://www.json.org/js.html)的 polyfill 库，它将为您实现上述语法。

# image - chrome 会更快，因为它不会重新加载图像吗？

> ID：12474516
> 
> 赞同：0
> 
> 时间：2012-09-18T09:51:46.797
> 
> 标签：image, firefox, google-chrome

我有这个问题有一段时间了，我想知道是我自己还是 chrome 的工作方式。当我对图像进行更改并上传时，重新加载 chrome 无法显示新图像，而是显示旧图像。Firefox 显示新图像。这主要发生在大图像上，比如背景。所以我必须等待几分钟，然后 chrome 才会显示新图像......这是规则还是仅在我的浏览器中发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:01:10.490

这可能是因为您的本地时钟与 Web 服务器不同步。上传图像时，会创建一个新文件。当浏览器请求文件时，服务器将返回文件的时间戳。如果该时间戳比您缓存中的时间戳更旧，则浏览器将不会再次加载图像（假设它仍然足够好）。

您应该检查图像（右键单击它），然后查看网络活动。Chrome 会在那里告诉您它是否加载了图像以及为什么不加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:58:04.767

看起来是缓存问题。这个逻辑对于不同的浏览器是不同的。

您可以通过按 Ctrl+Shitf+F12 并设置选项“清空缓存”来清除 Chrome 缓存。此操作后，新图像应始终加载。

# matlab - 根据第一列中的数字拆分矩阵

> ID：12474519
> 
> 赞同：4
> 
> 时间：2012-09-18T09:52:01.003
> 
> 标签：matlab, matrix

我有一个具有以下形式的矩阵：

```
M = 
[1 4 56 1;
 1 3 5  1;
 1 3 6  4;
 2 3 5  0;
 2 0 0  0;
 3 1 2  3;
 3 3 3  3] 
```

我想根据第一列中给出的数字拆分这个矩阵。所以我想将矩阵拆分为：

```
A = 
[1 4 56 1;
 1 3 5  1;
 1 3 6  4]

B = 
[2 3 5  0;
 2 0 0  0]

C =
[3 1 2  3;
 3 3 3  3] 
```

我通过创建以下循环来尝试此操作，但这给了我所需的带有零行的矩阵：

```
for i = 1:length(M)
    if (M(i,1) == 1)
        A(i,:) = M(i,:);
    elseif (M(i,1) == 2)
        B(i,:) = M(i,:);
    elseif (M(i,1) == 3)
        C(i,:) = M(i,:);
    end
end 
```

矩阵 C 的结果例如是：

```
C = 
[0 0 0 0;
 0 0 0 0;
 0 0 0 0;
 2 3 5 0;
 2 0 0 0] 
```

我应该如何解决这个问题？

**附加信息：**
实际数据在表格的第一列中有一个日期`yyyymmdd`。该数据集跨越数年，我想将这个数据集拆分为每年的矩阵，之后每个月。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T10:14:05.633

您可以使用[`arrayfun`](http://www.mathworks.de/help/matlab/ref/arrayfun.html;jsessionid=8d6cb5438c661cf3a9d97d985719)来解决此任务：

```
M = [
1 4 56 1;
 1 3 5  1;
 1 3 6  4;
 2 3 5  0;
 2 0 0  0;
 3 1 2  3;
 3 3 3  3]

A = arrayfun(@(x) M(M(:,1) == x, :), unique(M(:,1)), 'uniformoutput', false) 
```

结果`A`是一个元胞数组，其内容可以按如下方式访问：

```
>> a{1}

ans =

     1     4    56     1
     1     3     5     1
     1     3     6     4

>> a{2}

ans =

     2     3     5     0
     2     0     0     0

>> a{3}

ans =

     3     1     2     3
     3     3     3     3 
```

要在第一列中根据 yyyymmdd 格式拆分数据，可以使用以下命令：

```
yearly = arrayfun(@(x) M(floor(M(:,1)/10000) == x, :), unique(floor(M(:,1)/10000)), 'uniformoutput', false)

monthly = arrayfun(@(x) M(floor(M(:,1)/100) == x, :), unique(floor(M(:,1)/100)), 'uniformoutput', false) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:59:33.970

如果您不知道将有多少个输出，则将数据放入[元胞数组](http://www.mathworks.com/help/matlab/matlab_prog/access-data-in-a-cell-array.html)而不是单独的数组中最为方便。执行此操作的命令是[MAT2CELL](http://www.mathworks.com/help/matlab/ref/mat2cell.html)。请注意，这假设您的数据已排序。如果`sortrows`在运行代码之前没有使用它。

```
%# count the repetitions
counts = hist(M(:,1),unique(M(:,1));

%# split the array
yearly = mat2cell(M,counts,size(M,2))

%# if you'd like to split each cell further, but still keep
%# the data also grouped by year, you can do the following
%# assuming the month information is in column 2
yearByMonth = cellfun(@(x)...
    mat2cell(x,hist(x(:,2),unique(x(:,2)),size(x,2)),...
    yearly,'uniformOutput',false); 
```

然后，您将访问第 3 年第 4 个月的数据`yearByMonth{3}{4}`

**编辑** 如果您的数据的第一列是`yyyymmdd`，我建议将其分成三列`yyyy,mm,dd`，如下所示，以方便之后进行分组：

```
ymd = 20120918;
yymmdd = floor(ymd./[10000 100 1])
yymmdd(2:3) = yymmdd(2:3)-100*yymmdd(1:2) 
```

# c++ - 具有重叠 I/O 的非阻塞套接字

> ID：12474521
> 
> 赞同：3
> 
> 时间：2012-09-18T09:52:04.263
> 
> 标签：c++, sockets, nonblocking, overlapped-io

我正在尝试通过套接字丛林工作，并遇到了具有重叠 I/O 的非阻塞套接字。我家里有三本书只提到了这个概念，但没有真正解释它或给我任何例子。

所以我要找的是一篇文章，其中用一个例子来解释这个get，或者只是一个我可以自己完成的例子。如果这适用于 Windows，那就太好了，但我想我也应该能够从 unix 传输它。

我不介意一本书作为资料来源，但我很乐意避免再花 50 美元。到目前为止，我只找到了非常基本的概念以及与其他插座模型的基本比较。并不是我不理解他们的概念，而是我希望看到他们在行动中，也许能很好地解释他们是如何工作的。（我根本不介意长篇文章:)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:08:49.843

短语“非阻塞套接字”通常是指使用 FIONBIO 套接字选项，即使没有准备好读取的数据，它也会立即返回对 read() 的调用。（它返回一个 EWOULDBLOCK 错误。）

重叠 I/O 是 Windows API 特有的（例如，在 UNIX 上不可用）。不使用FIONBIO 套接字选项，*也不*使用传统的 Berkeley 套接字 API 函数调用（read() 等）。

（对于 Linux 上的 POSIX 等价物，请参阅“man aio”或在​​您最喜欢的搜索引擎中输入 man aio。）

既然您了解了“非阻塞套接字”和“重叠 I/O”是两种不同的方法（不能混为一谈），找到关于每种方法的有用文章应该会容易得多。

MSDN 关于重叠 I/O 的文档实际上非常好。如果您正在执行 Windows 编程，那么您确实需要在性能和可伸缩性重要的任何事情上使用重叠 I/O。这是一个很好的起点：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365603%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365603%28v=vs.85%29.aspx)

（这篇 MSDN 文章是关于管道的，但使用套接字时完全相同。）

另外，请注意 WaitForMultipleObjects() 的扩展性不如使用 I/O 完成端口，但首先要适应前者。

# jquery - 如何更改 jQuery datepicker 滑动方向？

> ID：12474526
> 
> 赞同：1
> 
> 时间：2012-09-18T09:52:29.760
> 
> 标签：jquery, asp.net, jquery-ui, jquery-ui-datepicker

在这个 jQuery 日期时间选择器中，我想将滑动方向更改为文本框的右侧。

// 源页面：

```
<script type="text/javascript">
        $(function () {
            $(".datepicker").datepicker({ dateFormat: 'dd-mm-yy', minDate: 0,
                changeMonth: true,
                changeYear: true
            }).attr('readonly', 'true');
        });
</script>

<asp:TextBox ID="txtDtVisit" runat="server" CssClass="datepicker" Style="background-image: url('Calendar_Control/images/calendar.gif'); background-repeat: no-repeat; background-position: right;" Width="178px"></asp:TextBox> 
```

默认情况下，它显示在文本框的底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:59:01.380

用这个替换你的脚本，

```
$(function () {
               $('.datepicker').datepicker({
                   changeYear: true,
                   dateFormat: 'dd/mm/yy',
                   showOn: 'button',
                   showmonth: true,
                   buttonText: "",
                   showAnim: 'slideDown',
                   duration: 'fast',
                   buttonImageOnly: true,
                   buttonImage: "Calendar_Control/images/calendar.gif",
                   beforeShow: function (textbox, instance) {
                       instance.dpDiv.css({
                           marginTop: (-textbox.offsetHeight) + 'px',
                           marginLeft: textbox.offsetWidth + 'px'
                       });
                   }
               }).attr('readonly', 'true');
               $(".ui-datepicker-trigger").mouseover(function () {
                   $(this).css('cursor', 'pointer');
               });
           }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:00:15.237

像这样试试

```
$( ".selector" ).css('margin-left', $(input).outerWidth() - widget.outerWidth()); 
```

# c# - 返回多个列表

> ID：12474529
> 
> 赞同：0
> 
> 时间：2012-09-18T09:52:37.147
> 
> 标签：c#, list

以下列表是在名为“实体”的类中创建的，它们是私有的。我想退回它们（并在另一个班级中使用）我可以通过以下方式做些什么：

```
 public List<string> getCMList()
    {
        return exceptionsCM;
    } 
```

但是如果有 10 个列表，我必须为所有这些列表编写一个公共的“get”方法。是否可以编写一个将字符串作为输入并返回该列表的方法？应该类似于..

```
public List<string> getList(.....)
{
     return exceptionCM;
} //if we call getList(exceptionCM).

        exceptionsCM = new List<string>();
        exceptionsCM.Add("CM12");
        exceptionsCM.Add("CM701");
        exceptionsCM.Add("CM901/CM30");
        exceptionsCM.Add("CM901K");
        exceptionsCM.Add("CM1101");
        exceptionsCM.Add("CM1101K");

        //List with Multi Mill exceptions, they are included in the new MultiB
        exceptionsMultiB = new List<string>();
        exceptionsMultiB.Add("Multi650/450");
        exceptionsMultiB.Add("Multi660/630");
        exceptionsMultiB.Add("Multi650/800");
        exceptionsMultiB.Add("Multi650/1000");

        //List with Multi Mill exceptions, they are included in the new Multi01
        exceptionsMulti01 = new List<string>();
        exceptionsMulti01.Add("Multi301");
        exceptionsMulti01.Add("Multi601");
        exceptionsMulti01.Add("Multi801");
        exceptionsMulti01.Add("Multi1001"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:00:22.640

你可以把它们都放在一个静态 Dictionary> 中

```
Dictionary<string, List<string>> ListstDict = new Dictionary<string, List<string>>();
ListsDict.Add("exceptionsCM", exceptionsCM);
... 
```

然后你可以写一个这样的方法：

```
public List<string> GetList(string name)
{
    return ListsDict.ContainsKey(name) ? ListsDict[name] : null;
} 
```

但是话又说回来，如果您可以简单地获取这些列表，那么私有列表的意义何在？使用私有 setter 将它们声明为公共属性会更容易

```
public List<string> exceptionsCM { get; private set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:57:06.997

你可以[`Dictionary<K,V>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)为此使用一个类

```
private Dictionary<string, List<<string>> dictionary = 
    new Dictionary<string, List<<string>>();

//fill that dictionary
...

//get list from a dictionary by list id
public List getList(string listId) 
{
    return dictionary[listId];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T09:57:37.277

您可以将所有列表放入字典中：

```
// your code here
dictionary = new Dictionary<string, List<string>>();
dictionary.Add("exceptionsCM", exceptionsCM); 
```

那么getList方法就这么简单：

```
public List<string> getList(string name)
{
    return dictionary[name];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T10:51:35.490

使用字典和枚举。

将*枚举*用于列表键而不是*字符串*可以使您的代码对键重命名更加健壮。即，当您在*Entities类中将**MultiB*重命名为*MultiB1*时，编译器不会显示有关调用 GetList("MultiB") 的任何错误和警告。如果使用*枚举*编译器会显示这些错误。

 ***```
internal class Entities
{
    private Dictionary<ListKey, List<string>> _liststDict =
      new Dictionary<ListKey, List<string>>
        {
          {ListKey.Cm, new List<string> {"CM12", "CM701", "CM901/CM30", "CM901K", "CM1101", "CM1101K"}},
          {ListKey.MultiB, new List<string> {"Multi650/450", "Multi660/630", "Multi650/800", "Multi650/1000"}},
          {ListKey.Multi01, new List<string> {"Multi301", "Multi601", "Multi801", "Multi1001"}}
        };

    public List<string> GetList(ListKey key)
    {
      return _liststDict[key];
    }

    internal enum ListKey
    {
      Cm,
      MultiB,
      Multi01
    }
}

internal class EntitiesTester
{
    public static void Do()
    {
      Entities entities = new Entities();

      Console.Out.WriteLine("CM count = {0}", entities.GetList(Entities.ListKey.Cm).Count);
      Console.Out.WriteLine("MultiB count = {0}", entities.GetList(Entities.ListKey.MultiB).Count);
      Console.Out.WriteLine("Multi01 count = {0}", entities.GetList(Entities.ListKey.Multi01).Count);
    }
} 
```***

# c# - 通过 Ws-fed 身份验证引发的 XML 错误

> ID：12474530
> 
> 赞同：0
> 
> 时间：2012-09-18T09:52:38.390
> 
> 标签：c#, asp.net, wif, ws-federation

我在我处理的基于 WIF 的依赖方应用程序的日志中看到以下错误，并且无法重新创建该问题：

```
CData elements not valid at top level of an XML document. Line 1, position 3.
Stack Trace: at   System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader reader, XmlException exception)
at System.Xml.XmlUTF8TextReader.Read()
at   System.Xml.XmlBaseReader.MoveToContent()
at Microsoft.IdentityModel.Protocols.WSFederation.WSFederationSerializer..ctor(XmlDictionaryReader reader)
at Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.CreateSerializerForResultXml(String resultXml)
at Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.GetXmlTokenFromMessage(SignInResponseMessage message)
at Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.GetSecurityToken(SignInResponseMessage message)
at Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.SignInWithResponseMessage(HttpRequest request)
at Microsoft.IdentityModel.Web.WSFederationAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs args)
at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

阅读[这篇 Technet 文章](http://social.technet.microsoft.com/Forums/uk/sharepoint2010programming/thread/00bb20a1-0e7f-4c3e-a1d5-9b8b08462bab)可能导致的问题，我认为问题出在从 STS 回传到 RP 的 wresult 参数中，但我看不出它是如何被错误地发回的，除非它被篡改，而且这似乎不太可能由于问题的数量。

如果有人可以确认导致此类错误的原因以及它是如何发生的，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-25T03:42:10.397

这发生在我身上。将传输模式从 Streamed 更改为 Buffered。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T15:29:29.120

当 xml 的内容包含一些“html 标记”（例如
, ,...）或某些特殊字符（例如“”、“/”、...）时，可能会出现此错误，这可能会破坏 Xml 架构。您应该在将任何 html 内容添加到 XML 之前对其进行编码。

更新：也许您在 WCF 的 web.config 中配置绑定是 transferMode=STREAMED。只需删除它。至少对我来说，这可能是个问题。

# c# - 尝试从数据库中删除行时出现“条件表达式中的数据类型不匹配”

> ID：12474531
> 
> 赞同：1
> 
> 时间：2012-09-18T09:52:38.053
> 
> 标签：c#, oledb

```
 OleDbCommand system = new OleDbCommand();
    system.CommandType = CommandType.Text;
    system.CommandText = "DELETE FROM Student WHERE(ID= '" + 
                          txtStudentIDnumber.Text + "')";
    system.Connection = mydatabase;

    mydatabase.Open();
    system.ExecuteNonQuery();
    dataGridView1.Update();

    this.tableAdapterManager.UpdateAll(csharrpfinalprojectDataSet);
    mydatabase.Close();

    MessageBox.Show("Student Record Deleted.", "deleting record..."); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:10:37.090

```
OleDbCommand system = new OleDbCommand();
system.CommandType = CommandType.Text;
system.CommandText = "DELETE FROM Student WHERE ID=@ID";
system.Parameters.AddWithValue("@ID", txtStudentIDnumber.Text);
system.Connection = mydatabase;

mydatabase.Open();
system.ExecuteNonQuery();
dataGridView1.Update();

this.tableAdapterManager.UpdateAll(csharrpfinalprojectDataSet);
mydatabase.Close();

MessageBox.Show("Student Record Deleted.", "deleting record..."); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:54:34.037

在您的命令文本中，您需要删除`(')`周围的单引号，`txtStudentIDnumber.Text`因为它显示 ID 是整数类型，并且您将其作为字符串传递。以下应该修复错误。

```
system.CommandText = "DELETE FROM Student WHERE(ID= " + txtStudentIDnumber.Text + ")"; 
```

编辑：关于@mdb 注释，您应该始终在查询中使用[参数](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)，这样您就可以避免[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)。考虑以下：

```
OleDbCommand system = new OleDbCommand();
system.CommandType = CommandType.Text;
system.CommandText = "DELETE FROM Student WHERE ID = ?";
OleDbParameter parameter = new OleDbParameter("ID", txtStudentIDnumber.Text);
system.Parameters.Add(parameter);
system.Connection = mydatabase;

mydatabase.Open();
system.ExecuteNonQuery();
dataGridView1.Update(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T10:07:44.033

当用户输入 for 时会发生什么`txtStudentIDNumber`，

```
1 or 1=1 
```

在这种情况下，硬编码的 SQL 字符串将是，

```
DELETE FROM Student WHERE(ID=1 or 1=1) 
```

所以更喜欢*参数化*的 sql 语句而不是硬编码的字符串。

```
using(OleDbConnection cn=new OleDbConnection(cnStr))
 {
  using(OleDbCommand cmd=new OleDbCommand())
   {
    cmd.CommandText="DELETE FROM Student WHERE ID=@ID";
    cmd.Connection=cn;
    cmd.Parameters.Add("@ID",SqlDbType.Int).Value=txtStudentIDnumber.Text;
    cn.Open();
    cmd.ExecuteNonQuery();
    cn.Close();
   }
 } 
```

# c#-4.0 - 在mysql中导出数据库时出错

> ID：12474532
> 
> 赞同：1
> 
> 时间：2012-09-18T09:52:38.513
> 
> 标签：c#-4.0, mysqldump, mysql-workbench

在将 mysql 数据库结构和数据导出到 *.sql 文件期间。我获得了表的完整插入查询

> 打开Mysql工作台。
> 
> 单击管理导入/导出，然后选择要连接的服务器。
> 
> 在那里打开管理选项卡，我选择一个模式并导出自包含文件，然后给出一个文件路径。
> 
> 然后单击开始导出。我收到错误消息

我没有获得该架构中表的完整插入查询记录。

为什么我得到这个错误请告诉我如何获取该数据库模式的完整插入查询。

# c# - Irony .NET：表达式运算符优先级

> ID：12474539
> 
> 赞同：2
> 
> 时间：2012-09-18T09:53:06.067
> 
> 标签：c#, dsl, operator-precedence, irony

我正在使用 Irony 解析 DSL，它具有可以与 AND 和 OR 组合的表达式：

```
/* snip */

RegisterOperators(4, orKeyword);
RegisterOperators(5, andKeyword);
RegisterOperators(9, lessThanOperator, lessEqualOperator, equalOperator, notEqualOperator, moreThanOperator, moreEqualOperator);

infixOperator.Rule = andKeyword | orKeyword;
expression_in_parens.Rule = L_PAR + expression + R_PAR;
primaryExpression.Rule = expression_in_parens | methodCall | identifier | numberIdentifier | stringIdentifier;
unaryExpression.Rule = notKeyword + L_PAR + expression + R_PAR;
binaryExpression.Rule = expression + infixOperator + expression;
compareExpression.Rule = expression + compareOperator + expression + ReduceHere();
expression.Rule = primaryExpression | unaryExpression | compareExpression | binaryExpression; 
```

我有以下表达式：“A and (B and C or D)”。它被解析为“A and (B and (C or D))”，但我需要它是“A and ((B and C) or D)”。

我认为将 and 关键字注册为具有比 or 关键字更高优先级的运算符会这样做。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:58:31.200

我通过为 AND 和 OR 创建单独的规则并将它们按正确的顺序排列来使其工作：

```
binaryAndExpression.Rule = expression + andKeyword + expression;
binaryOrExpression.Rule = expression + orKeyword + expression;
compareExpression.Rule = expression + compareOperator + expression + ReduceHere();
expression.Rule = compareExpression | binaryAndExpression | binaryOrExpression | unaryExpression | primaryExpression; 
```

# opera - 为什么光标在Opera中消失

> ID：12474540
> 
> 赞同：0
> 
> 时间：2012-09-18T09:53:12.110
> 
> 标签：opera

光标有时会在 Opera 浏览器中消失。

它在悬停税区、文本输入字段时消失。

现在我让它消失了，即使它没有移动。它仅在光标移动期间出现。当它停止时 - 它隐藏了！

# android - Google Play 提供哪些受众特征？

> ID：12474543
> 
> 赞同：1
> 
> 时间：2012-09-18T09:53:21.477
> 
> 标签：android, google-play

我在大学四年级，我正在考虑制作一个 Android 应用程序作为我论文的一部分。

我想知道，下载的应用程序可以使用什么样的人口统计数据？例如年龄、性别、位置等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:59:21.677

Google Play 开发者控制台为您提供了一些有关您的应用程序安装/使用情况的统计信息，但仅限于大部分技术数据：

*   安卓版
*   设备
*   国家
*   语
*   应用版本
*   载体

因此，出于您的目的，看起来只有国家和可能的语言是相关的。如果您需要更多信息，则必须询问用户（或欺骗他们告诉您；））。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:58:23.520

在开发者控制台中，您有以下统计信息：

*   随着时间的推移下载
*   安卓版
*   设备
*   国家（下载）
*   语言（设备的）
*   按应用版本划分的活跃安装量
*   载体

# database - 多重一对多关系设计

> ID：12474545
> 
> 赞同：3
> 
> 时间：2012-09-18T09:53:36.487
> 
> 标签：database, database-design

目前，我们有这样的设计来存储具有多个图像/视频 URL 的对象：

```
tblCompany:
pkCompanyId

tblPerson:
pkPersonId

tblImage:
pkImageId
ImageUrl
fkCompanyId
fkPersonId 
```

虽然此设计处理：

1.  拥有多个图像的公司
2.  拥有多个图像的人

我不禁感到这种设计存在问题，因为 tblImage 中的行对于外键列会有大量的 NULL 值。

有更好的设计吗？设计中的更多对象（一些与公司或个人无关，一些与公司或个人相关）将具有图像，因此当前设计的 tblImage 可能具有越来越多的外键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T11:12:00.960

对于只有 2 个可以有图像的实体来说，这实际上是一个非常好的设计。是的，你会有很多 NULL，但替代方案（例如单独的图像表，或特制的 1:N 链接表）也会有问题。

由于这是 1:N 关系，我们不需要任何额外的 M:N 联结/链接表。

* * *

如果您需要添加更多种类的可以具有图像的实体，您可以考虑继承，如下所示：

![在此处输入图像描述](../Images/508c72502721f952413e7fae62139c3d.png)

这样，`tblCommon`无论有多少种实体，图像都将自动连接到继承自 的任何实体。不幸的是，关系 DBMS 不直接支持继承，因此您必须以[3 种方式](https://stackoverflow.com/questions/12032348/interpreting-er-diagram/12037398#12037398)之一来模拟它，每种方式都有自己的折衷方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:01:43.193

如果我正确理解架构，则 Company 和 Person 是不相关的，并且两者都可以有一个或多个图像。然后，您可以只为图像本身提供一个表，并为公司到图像和个人到图像映射提供两个不同的表。

```
tblCompany: pkCompanyId
tblPerson: pkPersonId    
tblImage: pkImageId ImageUrl    
tblPersonImage: fkImageId fkPersonId    
tblCompanyImage: fkImageId fkCompanyId 
```

此模式还使您将来也可以将图像与其他类型的实体（如产品）相关联。

# java - Eclipse 表单头消失

> ID：12474546
> 
> 赞同：0
> 
> 时间：2012-09-18T09:53:37.413
> 
> 标签：java, forms, eclipse-rcp

我有一个奇怪的问题：有一个里面有部分的表格。还有一些小部件，我根据某些规则验证其值，如果不满足规则，我会使用从 ManagedForm 获得的 MessageManager#addMessage 在表单头中显示错误。添加错误后，Form Head 如下所示：

![带有错误消息的表单头](../Images/911dfe5c989053e1822cf82e048796d4.png)

当我让我的小部件通过验证并因此删除错误消息时，出于某种原因（仅在某些情况下）使用 MessageManager#removeMessage 不仅错误而且整个表单头都消失了：

![没有头](../Images/9956259b62fc830b96b2d3a392045b51.png)

之后，无论我做什么它都不会再次出现，所以如果我再次添加消息，使用 MessageManager 只会显示控件装饰而不是错误。

我已经对其进行了调试，发现在某些时候我的 getForm().getHead().getBounds().height 返回 0。

有人遇到过类似的事情或有任何线索，可能是什么？任何帮助将不胜感激。

我正在使用 org.eclipse.ui.forms_3.5.2.r36_v20100702.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:44:24.713

我发现了如何解决这个问题：当 MessageManager 删除最后一个错误时，表单标题被删除（或隐藏）。我不知道为什么，但它是如何工作的。因此，要始终让 Header 在表单初始化期间添加一些空消息。像这样的东西：

```
managedForm.getMessageManager().addMessage(
              "empty_message_key",
              "",
              null,
              IMessageProvider.NONE); 
```

# mysql - 子查询或嵌套。我真的不知道。也许两者都不是

> ID：12474550
> 
> 赞同：1
> 
> 时间：2012-09-18T09:53:45.580
> 
> 标签：mysql, nested, pivot

好的，我可能在搜索中错过了这个，但我不确定我在寻找什么。我有几张桌子，我需要从中生成邮寄标签。主表有姓名和姓氏。然后第二个表有多行数据，如 phon-123415324、地址 1-1 james st 等......还有一个绑定数据的表。这是一个示例结果和查询。

```
SELECT
users.name,
users.surname,
details.`field`,
details.value
FROM
users
Inner Join details ON details.user_id = users.id
Inner Join bookings ON bookings.guest_id = users.id
WHERE
bookings.sub_event_id =  '78' 
```

* * *

```
NAME, SURNAME, field,  value
David   Oden    title   Mr
David   Oden    sex Male
David   Oden    mobile  0534600594
David   Oden    company Fterns Group
David   Oden    position    
David   Oden    address_1   Cnr wtrewr Rd & wert St
David   Oden    address_2   
David   Oden    suburb  wertt Mile wertw
David   Oden    state   MAS
David   Oden    postcode    14113
David   Oden    country USA 
```

我需要什么我将 1 行的所有数据导出到 excel 以用于邮寄标签。对不起，如果这真的很愚蠢。我花了大约 4 个小时研究没有运气。

我需要类型是列标题，值是数据。

应该读

```
Title | Name | Surname | Mobile | Company | Address etc.....

MR | David | Oden | 0534600594 | Fterns Group | etc.... 
```

任何帮助，将不胜感激/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:23:03.253

这被称为`PIVOT`函数，但不幸的是 MySQL 没有 a `PIVOT`，因此您必须使用聚合函数和 a`CASE`语句来复制它。如果您知道需要在查询中包含的值，则可以对它们进行硬编码，如下所示：

```
select 
  min(case when d.field = 'title' then d.value end) as Title,
  u.name,
  u.surname,
  min(case when d.field = 'sex' then d.value end) as Sex,
  min(case when d.field = 'mobile' then d.value end) as Mobile,
  min(case when d.field = 'company' then d.value end) as Company,
  min(case when d.field = 'position' then d.value end) as Position,
  min(case when d.field = 'address_1' then d.value end) as Address_1,  
  min(case when d.field = 'address_2' then d.value end) as Address_2,  
  min(case when d.field = 'suburb' then d.value end) as suburb,  
  min(case when d.field = 'state' then d.value end) as State,
  min(case when d.field = 'postcode' then d.value end) as Postcode,
  min(case when d.field = 'country' then d.value end) as country
from users u
left join details d
  on u.id = d.id
left join bookings b
  on u.id = b.guest_id
where b.sub_event_id = 78
group by u.name, u.surname 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c1d4e/3)

但是，如果您有未知数量的列或者值会发生变化，那么您将希望动态执行此操作，那么您应该阅读以下有关准备好的语句的文章：

[动态数据透视表（将行转换为列）](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)

您的代码如下所示：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'min(case when d.field = ''',
      d.field,
      ''' then d.value end) AS ',
      d.field
    )
  ) INTO @sql
from users u
left join details d
  on u.id = d.d_id;

SET @sql = CONCAT('SELECT u.name,
                    u.surname, ', @sql, ' 
                  from users u
                  left join details d
                    on u.id = d.d_id
                  left join bookings b
                    on u.id = b.guest_id
                  where b.sub_event_id = 78
                  group by u.name, u.surname');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c1d4e/9)

# zend-framework2 - PHP 致命错误：使用 zf2 找不到类“Album\Controller\AlbumController”

> ID：12474551
> 
> 赞同：1
> 
> 时间：2012-09-18T09:53:46.717
> 
> 标签：zend-framework2

我希望有人可以帮助我。

我正在阅读 Rob Allen 的 Zend Framework 2 Tutorial 。

当我尝试去：

[http://zf2-tutorial.localhost/album](http://zf2-tutorial.localhost/album) 我在 apache 的日志中收到以下错误（我使用的是免费的 Zend Server CE 版本）：

PHP 致命错误：在第 175 行的 C:\Program Files\Zend\Apache2\htdocs\zf2-tutorial\vendor\zendframework\zendframework\library\Zend\ServiceManager\AbstractPluginManager.php 中找不到类 'Album\Controller\AlbumController'

模块\相册\module.config.php

```
<?php
 return array(
'controllers' => array(
    'invokables' => array(
        'Album\Controller\Album' => 'Album\Controller\AlbumController'
    ),
),

'router' => array(
    'routes' => array(
        'album' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/album[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
),

'view_manager' => array(
    'template_path_stack' => array(
        'album' => __DIR__ . '/../view'
        )
       )
  ); 
```

module\Album\src\Album\Controller\Albumcontroller.php

```
<?php
 namespace Album\Controller;

 use Zend\Mvc\Controller\AbstractActionController;
 use Zend\View\Model\ViewModel;

 class AlbumController extends AbstractActionController
{
protected $albumTable;
public function getAlbumTable()
{
    if (!$this->albumTable) {
        $sm = $this->getServiceLocator();
        $this->albumTable = $sm->get('Album\Model\AlbumTable');
    }
    return $this->albumTable;
}
public function indexAction()
{
    return new ViewModel(array(
        'albums' => $this->getAlbumTable()->fetchAll(),
    ));
}

public function addAction()
{
}

public function editAction()
{
}

public function deleteAction()
{
}
} 
```

我的配置：

视窗 xp。Zend Server CE 技术预览版 (PHP 5.3)。

谢谢您的帮助

# javascript - JSHint 上未定义“存储”

> ID：12474553
> 
> 赞同：2
> 
> 时间：2012-09-18T09:53:54.737
> 
> 标签：javascript, jquery, storage, jshint

我正在使用 JSHint 检查我的代码，发现以下我无法解决的问题。
（我使用 jQuery.js）

```
Storage.prototype.setObject = function(key, value) {  
'Storage' is not defined.  
Storage.prototype.getObject = function(key) {  
'Storage' is not defined.

Storage.prototype.setObject = function(key, value) {
    this.setItem(key, JSON.stringify(value));
};

Storage.prototype.getObject = function(key) {
    return JSON.parse(this.getItem(key));
}; 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:03:55.590

您需要将 Storage 声明为 JSHint的[全局变量。](http://www.jshint.com/docs/)添加

> ```
> /*global Storage*/ 
> ```

在你的文件的开头，或者你的 JSHint 配置的其余部分

# sql - 如何选择不同的列以及它们拥有的记录数

> ID：12474556
> 
> 赞同：4
> 
> 时间：2012-09-18T09:54:13.853
> 
> 标签：sql

如果我有这些数据，如何选择不同的列以及他们喜欢的记录数：

```
 banana
  apple
  orange
  banana
  apple
  apple 
```

我希望它显示这个：

```
 |banana|2|
  |apple |3|
  |orange|1| 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:54:55.220

使用*聚合*函数 like`COUNT()`和`GROUP BY`子句。

```
SELECT fruitname, COUNT(*) totalCount
FROM tableName
GROUP BY fruitName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:56:39.773

您需要使用[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)条款。

```
SELECT `fruitname`, COUNT(*) as `totalCount`
FROM `tableName`
GROUP BY `fruitName` 
```

# c# - 将 IEnumerable 转换为 ICollection 时会发生什么

> ID：12474557
> 
> 赞同：4
> 
> 时间：2012-09-18T09:54:14.677
> 
> 标签：c#, casting, ienumerable, icollection

鉴于这样的情况：

```
var collection = myEnumerable as ICollection<MyType>; 
```

引擎盖下会发生什么？`ICollection`有一个计数属性。这个强制转换是否枚举了可枚举以获取计数或是否发生了更多涉及的事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T09:56:31.900

什么都没发生。如果`myEnumerable`确实是一个`ICollection<MyType>` `collection`将包含它。否则会`null`。就那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-29T05:29:46.073

**很重要的一点：**

当您将`IEnumerable`类型对象转换为类型时`ICollection`，它将被引用类型。

就像，从集合中删除**Item**也会从**集合**中删除该项目`IEnumerable`。

**例如：**

```
IEnumerable<AnyClass> enumerableObject;

ICollection<AyClass> collectingObject = (ICollection<AnyClass>)enumerableObject;

foreach(var item in collectingObject){

collectingObject.Remove(item);

} 
```

如果您访问 value ，`enumerableObject`您会发现它已更新，所有值都已删除。

# php - 在同一域上的我的 joomla 网站和 jobportal（堵塞工作）上单点登录？

> ID：12474559
> 
> 赞同：1
> 
> 时间：2012-09-18T09:54:16.867
> 
> 标签：php, joomla1.5, single-sign-on

我有一个 joomla 网站，并且在同一个域中添加了另一个工作门户。假设我的网站是 www.abc.com，它是 joomla 网站，而 www.abc.com/jobs 是 jammit 工作门户。我如何进行单点登录（SSO）我的 Joomla 网站和堵塞工作（工作门户）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:59:54.580

我不认为有一个“神奇”的解决方案：你必须在编程中编写我们称之为“桥”的东西。

创建一个**登录脚本**，该脚本使用 Joomla 和 Jammit Jobs 的 API 来实现来自外部应用程序的身份验证。

你可以从这里开始： [Joomla Login Authentication from external app](https://stackoverflow.com/questions/2176595/joomla-login-authentication-from-external-app)

或者您可以在网上搜索预制的单点登录 (SSO) 解决方案，例如：[http ://extensions.joomla.org/extensions/access-a-security/site-access/auto-login/19547](http://extensions.joomla.org/extensions/access-a-security/site-access/auto-login/19547)

# c# - 在 Windows 上获取有线网络名称和安全级别

> ID：12474560
> 
> 赞同：2
> 
> 时间：2012-09-18T09:54:20.933
> 
> 标签：c#, windows, winapi, networking, wmi

通过这个问题，我的意思是用户分配的名称窗口允许您输入：“我的家庭网络”“地下室”“车库”而不是 ssid（尽管我也想阅读那个用于 wifi 连接的内容）

我特别想阅读可以为网络选择的 Windows 安全级别：家庭/办公室/公共

我想在连接到各种网络时使用此信息自动打开和关闭程序。

**更新：** 感谢@Damien_The_Unbeliever 的回答，我能够解决我的问题并找到以下信息，我希望它也能对其他人有所帮助：

*   [Windows 7 和 vista 中的网络感知（MSDN，非托管）](http://msdn.microsoft.com/en-us/library/ee264321%28v=vs.85%29.aspx)
*   [Windows API 代码包（Microsoft，NetworkListManager 和其他的托管包装器）](http://archive.msdn.microsoft.com/WindowsAPICodePack)
*   [如何使用 windows NLM API 来获得新网络连接的通知（Codeproject，托管）](http://www.codeproject.com/Articles/34650/How-to-use-the-Windows-NLM-API-to-get-notified-of)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:07:18.743

听起来您想使用[网络列表管理器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965303%28v=vs.85%29.aspx)：

> Microsoft Windows 网络环境允许多宿主计算机同时连接到多个网络。可能有多个无线网络以及 LAN 和拨号连接可用。网络列表管理器识别可用网络并将网络属性数据返回给应用程序。

这是一个 COM API，我不知道托管的等价物。

# c# - 什么事件表明 UserControl 正在被销毁？

> ID：12474566
> 
> 赞同：50
> 
> 时间：2012-09-18T09:54:33.950
> 
> 标签：c#, .net, winforms, events, asynchronous

我有一个 UserControl 派生控件，用于显示从 Web 服务器获取的一些信息。我目前正在使控件的初始化异步，以提高响应能力。

在我的 Load 事件处理程序中，我正在创建一个 CancellationTokenSource，并在各种异步调用中使用关联的 Token。

我现在想确保如果用户在异步操作完成之前关闭表单，操作将被取消。换句话说，我想在令牌上调用 Cancel。

我试图弄清楚在*哪里*做这件事。如果有一个我可以捕获的 Unload 事件，那将是完美的 - 但没有。事实上，我找不到任何看起来合适的活动。

我*可以*捕获包含表单的关闭事件，但我真的想将所有内容都保留在我的 UserControl 本地。

建议？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-18T10:08:20.960

我建议[Control::HandleDestroyed](http://msdn.microsoft.com/library/system.windows.forms.control.handledestroyed.aspx)事件。它在底层 HWnd 被销毁时引发（通常发生在父窗体关闭时）。要在您自己的 UserControl 中处理它，您应该重写[OnHandleDestroyed](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onhandledestroyed.aspx)。

此时您可以完全访问控件的属性，因为它还没有被处理掉。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-12T10:22:17.877

另一种解决方案

```
 protected override void OnParentChanged(EventArgs e)
    {
        base.OnParentChanged(e);

        if (parentForm != null)
        {
            parentForm.Closing -= parentForm_Closing;
        }
        parentForm = FindForm();

        if (parentForm != null)
            parentForm.Closing += parentForm_Closing;
    }

    void parentForm_Closing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        parentForm.Closing -= parentForm_Closing;
        parentForm = null;
        //closing code
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T09:57:35.507

为什么不直接使用[`Disposed`](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.disposed.aspx)事件？

当表单关闭时，它会调用`Dispose`自身，并且所有子控件也将被递归处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T10:41:55.493

试试这个：

```
UserControl.Dispose(); 
```

# javascript - 使用 innerHTML 设置段落的值不起作用

> ID：12474569
> 
> 赞同：1
> 
> 时间：2012-09-18T09:54:56.140
> 
> 标签：javascript

在`innerHTML`此 JavaScript 代码中不起作用。

```
var date = new Date();
var time = date.getHours();
var morning = document.p.getElementById("greeting").innerHTML="Good Morning ";
var afternoon = document.write =  "Good Afternoon ";
var evening = document.write = "Good evening";

if (time < 12){
    morning}
else if (time < 18){
afternoon}
else {evening}; 
```

HTML代码是

```
<p id="greeting"> </p> 
```

我试图让代码根据时间读取“早上好”或“下午”。JavaScript 位于外部文件中。它可以使用，`document.write`但在外部文件中，问候语出现在页面顶部。

在这里我试图设置一个

基于一天中的时间的“问候”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T09:56:00.127

```
document.p.getElementById("greeting") 
```

应该

```
document.getElementById("greeting") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T09:56:50.603

尝试更换这个

```
var morning = document.p.getElementById("greeting").innerHTML="Good Morning "; 
```

和

```
var morning = document.getElementById("greeting").innerHTML="Good Morning "; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T09:56:53.753

`p.`从中删除`document.p.getElementById`

**正确一：**

```
document.getElementById("greeting").innerHTML="Good Morning "; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-18T10:01:15.000

```
var afternoon = document.write = "Good afternoon"; 
```

这样做的目的是引入一个名为的变量`afternoon`，并将它*和*属性`write`on `document`（以前是一个函数调用）设置为 string `"Good afternoon"`。

稍后在您的代码中，您只需编写`afternoon`，它访问该变量，但不对它做任何事情。

看起来你想做这样的事情：

```
var morning = function() { document.getElementById("greeting").innerHTML="Good Morning "; };
var afternoon = function() { document.getElementById("greeting").innerHTML="Good Afternoon "; };
var evening = function() { document.getElementById("greeting").innerHTML="Good evening"; };

if (time < 12) {
   morning();
} else if (time < 18) {
   afternoon();
} else {
   evening();
}; 
```

也就是说，上面的内容与您的代码最接近，这在某种程度上是正确的。我仍然会说还有一些改进的空间。像下面这样的东西对我来说更有意义：

```
var morning = 'Good Morning ';
var afternoon = 'Good Afternoon ';
var evening = 'Good evening';

if(time < 12) {
    document.getElementById("greeting").innerHTML = morning;
} else if (time < 18) {
    document.getElementById("greeting").innerHTML = afternoon;
} else {
    document.getElementById("greeting").innerHTML = evening;
} 
```

更好的是，您可能可以先决定要使用哪条消息，然后分配它，如果您想更改输出问候语的位置，这将减少您更改代码的地方，例如：

```
var messages = {
   morning: 'Good Morning ',
   afternoon: 'Good Afternoon ',
   evening: 'Good evening'
};

var greeting = time < 12 
    ? messages.morning 
    : time < 18 
        ? messages.afternoon 
        : messages.evening;

document.getElementById('greeting').innerHTML = greeting; 
```

# css - 仅媒体屏幕不加载新背景

> ID：12474570
> 
> 赞同：1
> 
> 时间：2012-09-18T09:55:00.023
> 
> 标签：css, mobile, background

我有一个网站，我使用 div 作为背景（因为我需要将其正确居中，所以反对将它放在正文中）这是该网站，[http://asystec.hailstormcommerce.com/](http://asystec.hailstormcommerce.com/)

这是CSS：

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
.backgroundwrapper {
background-image: url('images/asystec-mobile-bg.jpg');
background-position:center 188px;
        }

}

.backgroundwrapper {
background: #fff url('images/pageBgOld.jpg')  no-repeat;
background-position:center 188px;
height:1903px;
width:1903px;

} 
```

我试过清除浏览器上的缓存，但它肯定会加载 pageBgOld 图像而不是新图像。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T09:58:39.927

在您的主要风格之后编写**媒体查询。**像这样写：

```
.backgroundwrapper {
background: #fff url('images/pageBgOld.jpg')  no-repeat;
background-position:center 188px;
height:1903px;
width:1903px;

}
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
.backgroundwrapper {
background-image: url('images/asystec-mobile-bg.jpg');
background-position:center 188px;
        }

} 
```

# unit-testing - 嵌套控制器的单元测试

> ID：12474571
> 
> 赞同：10
> 
> 时间：2012-09-18T09:55:03.873
> 
> 标签：unit-testing, angularjs

我正在尝试为嵌套的控制器编写单元测试，但无法弄清楚如何在我的测试中模拟相同的行为。

我有 2 个控制器：

```
function FirstController ($scope) {
    $scope.childs = [{
         title : 'Hello, earth!'
    }];
};

function SecondController ($scope) {
    $scope.child.title = $scope.child.title + $scope.$index;
}; 
```

在我的 HTML 中：

```
<div data-ng-controller="FirstController">
    <div data-ng-repeat="child in childs" data-ng-controller="SecondController">
        {{ child.title }}
    </div>
</div> 
```

这按预期工作（[http://jsfiddle.net/tcayp/1/](http://jsfiddle.net/tcayp/1/)）

单元测试：

```
// FirstController
it('Should have childs', function () {
    scope = {};
    ctrl = new FirstController(scope);
    expect(scope.childs.length).toBeGreaterThan(0);
});
// SecondController
it('Should have inherited a child', function () {
    scope = {};
    ctrl = new SecondController(scope);
    expect(scope.child.title).toEqual('Hello, earth!0');
}); 
```

在 SecondController-test 中，我无法弄清楚如何从 ng-repeat 模拟继承链。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-18T10:38:08.413

理想情况下，通过单元测试，我们希望单独测试类（单元）。在一次测试中测试 2 个控制器可能太多了：测试会变得更加复杂和脆弱。

仔细查看提供的示例，您可能会注意到它实际上不是测试 2 个控制器，而是确保数据在父范围内可用。因此，只关注一个控制器 ( `SecondController`) 和继承的数据将编写如下测试：

```
describe('Testing the SecondController controller', function() {

    var $parentScope, $scope, ctrl;
    it('should prepare title', inject(function($rootScope, $controller) {

        //setup hierarchy of scopes with data             
        $rootScope.childs = [{
            title : 'Hello, earth!'
        }];
        $scope = $rootScope.$new();
        $scope.$index = 1;

        ctrl = $controller('SecondController', {
            $scope: $scope
        });

        expect($scope.childs[0].title).toEqual('Hello, earth!1');        
    }));
}); 
```

这是完整的 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/h8xry/13/](http://jsfiddle.net/pkozlowski_opensource/h8xry/13/)

我真的建议不要一起测试 2 个控制器，但只是为了回答这个问题，它也是可能的：

```
describe('Testing the SecondController controller', function() {

    it('should prepare title', inject(function($rootScope, $controller) {

        $controller('FirstController', {
            $scope: $rootScope
        });

        var $scope = $rootScope.$new();
        $scope.$index = 1;

        ctrl = $controller('SecondController', {
            $scope: $scope
        });

        expect($scope.childs[0].title).toEqual('Hello, earth!1');        
    }));
}); 
```

还有 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/4Qy6b/1/](http://jsfiddle.net/pkozlowski_opensource/4Qy6b/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-22T22:53:23.870

[AngularJS 文档](https://docs.angularjs.org/guide/controller)建议通过实例化每个嵌套控制器并在它们之间建立与您的应用程序中相同的范围层次结构来测试嵌套控制器。这是有道理的，因为（在某种程度上）您希望在现实环境中测试您的控制器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-29T17:13:07.553

在您的测试中，使用新范围实例化父控制器：

```
mainScope = $rootScope.$new();
$controller('ParentController', {$scope: mainScope}); 
```

并在您的子控制器中，使用先前实例化的作用域实例化一个新作用域：

```
childScope = mainScope.$new();
$controller('ChildController', {$scope: childScope}); 
```

[AngularJS 文档](https://docs.angularjs.org/guide/controller)中的示例：

```
describe('state', function() {

  var mainScope, childScope, grandChildScope;

  beforeEach(module('myApp'));

  beforeEach(inject(function($rootScope, $controller) {
      mainScope = $rootScope.$new();
      $controller('MainController', {$scope: mainScope});
      childScope = mainScope.$new();
      $controller('ChildController', {$scope: childScope});
      grandChildScope = childScope.$new();
      $controller('GrandChildController', {$scope: grandChildScope});
  }));

  it('should have over and selected', function() {
      expect(mainScope.timeOfDay).toBe('morning');
      expect(mainScope.name).toBe('Nikki');
      expect(childScope.timeOfDay).toBe('morning');
      expect(childScope.name).toBe('Mattie');
      expect(grandChildScope.timeOfDay).toBe('evening');
      expect(grandChildScope.name).toBe('Gingerbread Baby');
    });
}); 
```

# android - Android为按钮添加边框

> ID：12474572
> 
> 赞同：3
> 
> 时间：2012-09-18T09:55:08.793
> 
> 标签：android, button, onclick, border

单击按钮时，我需要为按钮添加边框，并且我需要按钮的背景（我远程获取，因此无法使用`R.drawable.picture`等）以保持原样。

简而言之，当单击时，我想为我的（自定义背景）按钮添加一个边框。

我该怎么做呢？我已经阅读了很多关于边框、按钮、形状、选择器等的页面和问题，但其中大多数都涉及 xml，但是因为在启动应用程序之前我没有按钮的背景，我想我是绑定到以编程方式添加和删除边框。同样，我需要保留自定义按钮背景，但添加一个小的 onclick 边框。

注意：我在所有不同尺寸的按钮上都使用它。所以应用一个drawable不是一个真正的选择。我想我一定会在单击的按钮周围画一个矩形。

注意 2：再次，我有一个必须应用的背景。边框只是 onclick 事件的一个小指标。所以我不能输入背景是某种选择器的 XML

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T10:01:00.080

**btn.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" >
    <shape>
        <solid
            android:color="#343434" />
        <stroke
            android:width="1dp"
            android:color="#171717" />
        <corners
            android:radius="3dp" />
        <padding
            android:left="5dp"
            android:top="5dp"
            android:right="5dp"
            android:bottom="5dp" />
    </shape>
</item>
<item>
    <shape>
        <gradient
            android:startColor="#343434"
            android:endColor="#275296"
            android:angle="270" />
        <stroke
            android:width="0dp"
            android:color="#171717" />
        <corners
            android:radius="4dp" />
        <padding
            android:left="5dp"
            android:top="5dp"
            android:right="5dp"
            android:bottom="5dp" />
    </shape>
</item>
</selector> 
```

单击时，此处的 stroke 属性将显示为按钮的边框。

将其保存在可绘制文件夹中。并使用如下

```
<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/btn"
    android:textColor="@color/white"
    android:text="Button"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T09:57:55.953

您可以尝试`9.png`在透明区域周围设置一个黑色边框。您可以使用选择器将其应用于按钮的“按下”状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T09:59:10.930

您可以在 xml 中使用 2 层定义 layer_list：一层用于您的图像，另一层用于您的边框，并将此层列表用作按钮按下状态的可绘制对象

# objective-c - 将 nsmutabledictionary 中的数据从子视图传递到父视图

> ID：12474581
> 
> 赞同：0
> 
> 时间：2012-09-18T09:55:49.243
> 
> 标签：objective-c, ios, cocoa-touch, nsmutabledictionary

我有父视图和子视图。在子视图中我有一个**NSMutableDictionary** 。我在上面添加值。然后返回父视图并想要获取我在子视图中添加的值，任何人都可以用代码描述。任何想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:10:48.893

在父视图中创建属性。

在子视图代码中，如下所示。

```
((parentView*)childView.superView).dic = dic; 
```

可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:11:31.997

在“ParentView”中为“ChildView”创建一个对象，然后使用子对象访问NSMutableDictionary。

例如：

```
//ParentViewController.m
ChildViewController *cvc = [[ChildViewController alloc]init];
NSDictionary *dict = cvc.myDict; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:11:48.303

iVar 仅在视图处于运行循环时才可访问。如果它被解除分配，则 iVar 也将被解除分配。

有很多方法可以实现您正在尝试的目标。

一种方法是将全局变量存储在您的 App Delegate 中，这些变量可通过所有视图和整个应用程序运行进行访问。

另一种方法是，如果您不需要全局访问变量来使用 NSNotificationCenter 并订阅通知。

[我在this SO answer](https://stackoverflow.com/a/10874919/312312)中解释了第二种方法

基本上，您可以将任何值传递给 userInfo，因此在您的情况下，您将通过以下方式传递您的字典：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"myNotification" object:self userInfo:MyDictionary]; 
```

# magento - 使用带有斜杠的类别名称在 magento 中导入产品

> ID：12474583
> 
> 赞同：3
> 
> 时间：2012-09-18T09:55:54.813
> 
> 标签：magento, csv, import, magento-1.6

我的 magento 有问题，在我的产品类别中，它的名称为“MANGO/BANANA”。现在在我的 .csv 中导入它，它看起来像这样。

```
_category
------------
Category/MANGO/ BANANA 
```

我得到了这个错误

```
Category does not exists in rows:(..) 
```

我认为 magento 会寻找 BANANA 目录，但我的目录名称在“MANGO/BANANA”中

有人知道我的案子吗？关于如何在 .csv 的 _category 字段中输入“MANGO/BANANA”？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:17:22.327

尝试使用反斜杠转义正斜杠：“MANGO\/ BANANA”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T07:42:07.143

对于名称中包含斜线的类别，您必须使用斜线的 ASCII 字符，例如`&#47;`.

> 因此，这是我采取的步骤，希望这可以帮助遇到此问题且不想更改其类别名称以将其 / 全部删除的任何人。
> 
> 管理类别 > 替换 / 为`&#47;`
> 
> 我有 70 多个类别要处理，因此制作导入/导出配置文件更容易[http://www.templatemonster.com/help/magento-how-to-exportimport-data-in-csv-files.html#gref](http://www.templatemonster.com/help/magento-how-to-exportimport-data-in-csv-files.html#gref)并在 excel/openoffice 中使用查找/替换进行编辑，或者您可以下载扩展程序来帮助您。
> 
> 打开您的产品电子表格，转到“类别”列，使用“查找/替换”进行替换。
> 
> 进口！
> 
> 希望这对大家有帮助！

我从[这篇文章](https://www.onetakemedia.net/magento/dealing-with-slashes-in-magento-category-names/)中读到了这一点。

# cookies - 流星和饼干

> ID：12474584
> 
> 赞同：0
> 
> 时间：2012-09-18T09:55:54.980
> 
> 标签：cookies, meteor

有什么方法可以在流星中使用 cookie 吗？

我想要一个每台机器的 ID，以便我可以处理许可证验证。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T01:48:53.207

好吧，基本上我们为此使用了 jquery cookie 插件，不幸的是，到目前为止还没有办法将 cookie 从服务器直接传递到客户端（我猜你正在考虑类似于 php cookie 实现的东西）。

我只是为此使用[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)，但您也可以为此使用内置的 javascript cookie 函数。

[https://github.com/manarius/stellar/](https://github.com/manarius/stellar/)随时查看 stellar 以了解我们如何在其中使用 cookie :)

玩得开心 ：）

马纳留斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:21:04.500

我最终用 localStorage 解决了我自己的问题。

在这种情况下不需要 cookie，只需使用 localStorage 来存储机器 id 并发送它抛出 Meteor.method 调用。

如果较旧的浏览器有问题，请使用 localStorage.polyfill 智能包。

# templates - 多语言网络应用程序，变量命名约定

> ID：12474589
> 
> 赞同：1
> 
> 时间：2012-09-18T09:56:18.527
> 
> 标签：templates, language-agnostic, naming-conventions, multilingual

我正在开发一个支持多种语言的网站/网络应用程序。我将“视图”部分分离为 HTML 模板，并留下“孔”来填充文本内容。

我将每种语言的各种单词和句子存储在一个对象中。例如

```
lang.title = "Page title"
lang.header = "Page header" 
```

然后将它们打印到模板的适当区域。

我应该遵循任何特定的命名约定吗？在“标题”和“标题”之后，描述一段文字变得更加困难。你很快就会进入“paragraph1”、“paragraph2”、“paragraph3”等。

该应用程序的早期版本只有包含各种文本位的变量，命名为：Trans1、Trans2、Trans3、Trans4、Trans5...等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:00:07.570

使用速记资源来表达想法：

*   [TEI 参考](http://www.tei-c.org/release/doc/tei-p5-doc/en/html/REF-ELEMENTS.html)

*   [缩写参考](http://www.abbreviations.com/justadded.php)

*   [对象命名约定](http://msdn.microsoft.com/en-us/library/aa263493)

*   [DITA 1.3：为什么要三个版本？1.0 版](http://docs.oasis-open.org/dita/dita-1.3-why-three-editions/v1.0/dita-1.3-why-three-editions-v1.0.html)

*   [ODBC 架构集合](http://msdn.microsoft.com/en-us/library/cc668760)

# php - 阅读电子邮件 PHP POP

> ID：12474598
> 
> 赞同：0
> 
> 时间：2012-09-18T09:56:46.880
> 
> 标签：php, codeigniter, email, imap, pop3

对于我的项目，我需要使用`POP`

我正在使用 PHP 的 IMAP 扩展。

我不需要获取所有电子邮件，而是通过过滤`TO`和获取电子邮件`FROM`。

它适用于`FROM`不适用`TO`

我尝试的是

**（获取所有电子邮件`FROM`user@domain.com）**

```
$mbox = imap_open ("{pop.domain.net:995/pop3/ssl/novalidate-cert}", "username", "password")or die(imap_last_error());
$some   = imap_search($mbox, 'FROM "user@domain.com"',SE_UID);
imap_close($mbox);  
var_dump($some); 
```

它有效，我得到一个数组。

**（使用 获取发送到 user@domain.com 的所有电子邮件`TO`）**

```
$mbox = imap_open ("{pop.domain.net:995/pop3/ssl/novalidate-cert}", "username", "password")or die(imap_last_error());
    $some   = imap_search($mbox, 'TO "user@domain.com"',SE_UID);
    imap_close($mbox);  
    var_dump($some); 
```

我怎么了？请注意，我在这里没有指定任何邮箱名称，对于 IMAP，我需要提及邮箱名称。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:02:11.377

您可能正在收件箱中搜索已发送的项目，我认为搜索只能在 RFC 规范中通常称为邮箱的根文件夹中工作......

最简单的方法是切换邮箱以搜索已发送的项目（因为您收件箱中的大部分收件人应该是您的电子邮件，除非您收到很多抄送邮件并且这会打开另外一罐蠕虫）

* * *

**来源** [https://www.rfc-editor.org/rfc/rfc3501#page-49](https://www.rfc-editor.org/rfc/rfc3501#page-49)

# tridion - 是否有任何示例或好的指南来了解 Anugilla API？

> ID：12474601
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:56:50.663
> 
> 标签：tridion, tridion-2011

我正在尝试使用 Anguilla API 获取组件或页面的“revisor”和“checkout user”。

我在实时文档中找不到任何好的示例或指南。还有其他文档可以了解 Anguilla API 吗？

```
var itemuri = selection.getItem(0);
var obj = $models.getItem(itemuri); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T08:36:58.660

例子：

```
var tcmUri = "";

$display.staticLoadItem(tcmUri, function(success)
{
    if(success)
    {
        var item = $models.getItem(tcmUri);
        var user = item.getInfo().LockedBy;

        $display.staticLoadItem(user.getId(), function(success2)
        {
            if(success2)
            {
                console.log(user.getInfo().FullName);
             }
        });
    }
}); 
```

# oop - 改进对象/类模型的术语是什么？

> ID：12474603
> 
> 赞同：0
> 
> 时间：2012-09-18T09:56:53.430
> 
> 标签：oop, design-patterns, terminology

当你的朋友设计一个恐龙类时，你怎么称呼它，它同时代表史前恐龙（动物），当代机器人恐龙（玩具）和美国关于饲养这些动物和/或机器人的法律，你来分解它分为 DinosaurProper、DinosaurRobot、ExoticPetKeepingInUS 和 RobotOwnershipInUS 类？什么是聪明的流行语或流行语？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:58:25.183

旨在满足[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)(SRP) 的重构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:06:31.363

根据初始设计的确切结构，有时可能称为 [ReplaceTypeCodeWithSubclasses](http://www.refactoring.com/catalog/replaceTypeCodeWithSubclasses.html)或[ExtractSubclass](http://www.refactoring.com/catalog/extractSubclass.html)

# google-maps-api-3 - 是否可以更改 Google 地图绘图管理器图标？

> ID：12474604
> 
> 赞同：9
> 
> 时间：2012-09-18T09:56:55.740
> 
> 标签：google-maps-api-3

我正在寻找实现在多个设备上使用的谷歌地图多边形选择工具。

默认的绘图管理器图标（手，多边形绘图工具）在台式机上很好，但在安卓设备上使用它们真的很繁琐。谁能告诉我是否可以覆盖默认图标集（http://maps.gstatic.com/mapfiles/drawing.png）

我想我可以专门覆盖css和html，但很想知道在走这条路之前是否有更好的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T14:55:49.070

这就是我用来修改按钮的方法，它应该给你一个起点，一旦你确定了一切，改变 CSS 就很容易了..

```
$(".gmnoprint").each(function(){
    var newObj = $(this).find("[title='Draw a circle']");
    newObj.parent().addClass("remove");

    // ID the toolbar
    newObj.parent().parent().attr("id", "btnBar");

    // Now remove the Circle button
    $(".remove").remove();

    // ID the Hand button
    newObj = $(this).find("[title='Stop drawing']");
    newObj.attr('id', 'btnStop');

    // ID the Marker button
    newObj = $(this).find("[title='Add a marker']");
    newObj.attr('id', 'btnMarker');

    // ID the line button
    newObj = $(this).find("[title='Draw a line']");
    newObj.attr('id', 'btnLine');

    // ID the Rectangle Button
    newObj = $(this).find("[title='Draw a rectangle']");
    newObj.attr('id', 'btnRectangle');

    // ID the Polygon button
    newObj = $(this).find("[title='Draw a shape']");
    newObj.attr('id', 'btnShape');  

}); 
```

为了进一步修改它，我将自己的按钮添加到工具栏，如下所示：

```
$("#btnBar").append('<div style="float: left; line-height: 0;"><div id="btnDelete" style="direction: ltr; overflow: hidden; text-align: left; position: relative; color: rgb(51, 51, 51); font-family: Arial,sans-serif; -moz-user-select: none; font-size: 13px; background: none repeat scroll 0% 0% rgb(255, 255, 255); padding: 4px; border-width: 1px 1px 1px 0px; border-style: solid solid solid none; border-color: rgb(113, 123, 135) rgb(113, 123, 135) rgb(113, 123, 135) -moz-use-text-color; -moz-border-top-colors: none; -moz-border-right-colors: none; -moz-border-bottom-colors: none; -moz-border-left-colors: none; border-image: none; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.4); font-weight: normal;" title="Delete Selected"><span style="display: inline-block;"><div style="width: 16px; height: 16px; overflow: hidden; position: relative;"><img style="position: absolute; left: 0px; top: -195px; -moz-user-select: none; border: 0px none; padding: 0px; margin: 0px; width: 16px; height: 350px;" src="drawing.png" draggable="false"></div></span></div></div>'); 
```

然后，激活新按钮并更改鼠标单击的图标：

```
google.maps.event.addDomListener(document.getElementById('btnDelete'), 'click', deleteSelectedShape);
            google.maps.event.addDomListener(document.getElementById('btnDelete'), 'mousedown', function () {
    $("#btnDelete img").css("top", "-212px");
});
            google.maps.event.addDomListener(document.getElementById('btnDelete'), 'mouseup', function () {
    $("#btnDelete img").css("top", "-195px");
}); 
```

希望这可以帮助！:) 丹尼斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-28T11:47:25.450

这是我用来覆盖按钮样式的 CSS 代码。

在我的情况下，图标的 HTML 看起来像这样

```
<div class="gmnoprint" style="margin: 5px; z-index: 10; position: absolute; top: 0px; left: 310px;">
    <div style="float: left; line-height: 0;">
        <div role="button" tabindex="0" title="Parar de desenhar" aria-label="Parar de desenhar" aria-pressed="true" draggable="false" style="direction: ltr; overflow: hidden; text-align: left; position: relative; color: rgb(0, 0, 0); font-family: Roboto, Arial, sans-serif; user-select: none; font-size: 11px; background-color: rgb(255, 255, 255); padding: 4px; border-bottom-left-radius: 2px; border-top-left-radius: 2px; background-clip: padding-box; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; font-weight: 500;">
            <span style="display: inline-block;">
                <div style="width: 16px; height: 16px; overflow: hidden; position: relative;">
                    <img alt="" src="https://maps.gstatic.com/mapfiles/drawing.png" draggable="false" style="position: absolute; left: 0px; top: -144px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none; width: 16px; height: 192px;">
                </div>
            </span>
        </div>
    </div>
    <div style="float: left; line-height: 0;">
        <div role="button" tabindex="0" title="Desenhar uma forma" aria-label="Desenhar uma forma" aria-pressed="false" draggable="false" style="direction: ltr; overflow: hidden; text-align: left; position: relative; color: rgb(86, 86, 86); font-family: Roboto, Arial, sans-serif; user-select: none; font-size: 11px; background-color: rgb(255, 255, 255); padding: 4px; background-clip: padding-box; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-left: 0px;">
            <span style="display: inline-block;">
                <div style="width: 16px; height: 16px; overflow: hidden; position: relative;">
                    <img alt="" src="https://maps.gstatic.com/mapfiles/drawing.png" draggable="false" style="position: absolute; left: 0px; top: -64px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none; width: 16px; height: 192px;">
                </div>
            </span>
        </div>
    </div>
    <div style="float: left; line-height: 0;">
        <div role="button" tabindex="0" title="Desenhar um círculo" aria-label="Desenhar um círculo" aria-pressed="false" draggable="false" style="direction: ltr; overflow: hidden; text-align: left; position: relative; color: rgb(86, 86, 86); font-family: Roboto, Arial, sans-serif; user-select: none; font-size: 11px; background-color: rgb(255, 255, 255); padding: 4px; background-clip: padding-box; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-left: 0px;">
            <span style="display: inline-block;">
                <div style="width: 16px; height: 16px; overflow: hidden; position: relative;">
                    <img alt="" src="https://maps.gstatic.com/mapfiles/drawing.png" draggable="false" style="position: absolute; left: 0px; top: -160px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none; width: 16px; height: 192px;">
                </div>
            </span>
        </div>
    </div>
    <div style="float: left; line-height: 0;">
        <div role="button" tabindex="0" title="Desenhar um retângulo" aria-label="Desenhar um retângulo" aria-pressed="false" draggable="false" style="direction: ltr; overflow: hidden; text-align: left; position: relative; color: rgb(86, 86, 86); font-family: Roboto, Arial, sans-serif; user-select: none; font-size: 11px; background-color: rgb(255, 255, 255); padding: 4px; border-bottom-right-radius: 2px; border-top-right-radius: 2px; background-clip: padding-box; box-shadow: rgba(0, 0, 0, 0.3) 0px 1px 4px -1px; border-left: 0px;">
            <span style="display: inline-block;">
                <div style="width: 16px; height: 16px; overflow: hidden; position: relative;">
                    <img alt="" src="https://maps.gstatic.com/mapfiles/drawing.png" draggable="false" style="position: absolute; left: 0px; top: -16px; user-select: none; border: 0px; padding: 0px; margin: 0px; max-width: none; width: 16px; height: 192px;">
                </div>
            </span>
        </div>
    </div>
</div> 
```

应用的 CSS 样式

```
.gmnoprint > div > div[role=button] {
    width: 44px;
    height: 44px;
    vertical-align: middle;
    line-height: 40px;
    text-align: center;
}

.gmnoprint > div > div[role=button] > span > div > img {
    display: none;
}

.gmnoprint > div > div[role=button] > span > div:before {
    font: normal normal normal 14px/1 FontAwesome;
    content: "\f007";
    font-size: 22px;
} 
```

# android - 当我将最近的应用程序与警报一起使用时，会保留额外的

> ID：12474611
> 
> 赞同：1
> 
> 时间：2012-09-18T09:57:13.347
> 
> 标签：android, android-activity, alarmmanager, alarm, android-pendingintent

我有`fragmentActivity`很多片段。我的活动（首先只显示一个片段）会启动一个带有未决意图的警报，如下所示：

```
 AlarmManager am = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);

       Intent intent = new Intent(context,MainFragmentActivity.class);
        intent.putExtra(MainFragmentActivity.IS_LOCKSCREEN, true);

        PendingIntent pendingintent = PendingIntent.getActivity(context,ALARM_ID, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        am.cancel(pendingintent);
        date = wakUp.getTime();
        am.set(AlarmManager.RTC_WAKEUP, wakUp.getTimeInMillis(),
                pendingintent); 
```

我在警报响起之前完成了活动。

我的警报响起，我的活动被启动并显示一个特定的片段（背景红色），因为 extra`MainFragmentActivity.IS_LOCKSCREEN`是 true 。

我完成活动并使用最近的应用程序运行应用程序，额外的始终设置为 true，因此启动了红色片段。我不明白，我的 extra 应该设置为 false。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:10:09.127

我不确定为什么你认为额外的应该变成假的，但如果你没有在你的活动中改变它（例如，你自己把假的意图）最近的应用程序启动会一次又一次地提供它。可能，您可能想要：
1）清除您活动中的意图标志（然后从最近启动应该保留更改的意图）；
或
2)`FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS`有意使用以从最近的应用程序中消除该活动（[在此处查看讨论](https://stackoverflow.com/questions/7759556/flag-activity-exclude-from-recents-excludes-whole-application-not-only-the-acti)以了解有关该启动标志与例如通知一起使用的更多信息）；

# mysql - 是否可以在 MySQL 表上执行内联 GROUP BY？

> ID：12474613
> 
> 赞同：0
> 
> 时间：2012-09-18T09:57:19.103
> 
> 标签：mysql, sql, group-by, inline

是否可以在单个原子查询中执行以下行？

```
CREATE TABLE tmp AS 
(
    SELECT fooId, SUM(amount) AS amount 
    FROM foo 
    GROUP BY fooId
);
TRUNCATE TABLE foo;
INSERT INTO foo (SELECT fooId, amount FROM tmp);
DROP TABLE tmp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:08:59.643

我认为您正在尝试更新表格中的总数？尝试

```
REPLACE INTO foo (fooID, amount) 
SELECT fooID, sum(Amount) FROM foo 
```

# c++ - 如何存储逻辑关系

> ID：12474614
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:57:19.540
> 
> 标签：c++, logical-operators

我想找出一个自动逻辑关系检查的解决方案。比如我有一个函数`IsGood()`，它会从a,b,c....中获取bool值。在主程序中，有`if(a||b)`or `if(b&&c)`or `if(g&&!k&&l||!z)`，不同的关系。我想将它们全部替换为`IsGood()`，并且我想让这个函数更通用，它可以处理不同的逻辑关系。

所以我的想法是放一些ID，这将有助于这个函数知道现在需要处理哪些变量，例如，得到值k1，k2，k3，但是k1，k2 ， k3之间`IsGood()`的逻辑关系不知道.`||``&&``IsGood()`

所以我想知道如何让`IsGood()`自动获取值之间的关系。将它们存储在数据库中？

比如：`IsGood()`首先检查它在place1，所以它查询数据库，结果是：（这为什么我不带参数`IsGood()`，它会从数据库或配置文件中检索它需要的变量，它需要的只是地点 ID。）

地点 1（地点编号）；k1,k2,k3（变量名）；真，真，假（值）；&&, || （逻辑关系）。

但我不认为这很好......所以，你能给我一些想法吗？非常感谢！我的工作基于 C++。

**我想知道一些关于这个的想法：**

a||b&&c，我可以存储信息，像0,1，所以0代表||，1代表&&，所以像a&&b||c...这样的结构很容易控制。

但是如何设置（a||b）&&c？我也想找到一种方法来记录这种关系。一个聪明的方法将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:30:01.377

这是行不通的。时期。

在 C++ 中，变量具有作用域。这个名字`k1`在不同的地方可能意味着不同的东西。因此，即使该函数`IsGood`神奇地知道它应该以某种方式访问​​一个名为 的变量`k1`，它仍然无法确定*该* `k1`变量来自哪个范围。

这对 C++ 程序员来说没什么大不了的。他们的解决方案：`IsGood(k1)`，这意味着：从当前范围调用*这个*`IsGood`变量，而不是另一个。 *`k1`*

 *现在，传递运算符有点困难。为此，您需要 lambda `IsGood( [&k1,&k2,&k3](){return (k1&&k2)||k3;} );`：. 这需要对变量 k1-3 的引用，并将表达式传递`(k1&&k2)||k3;`给`IsGood`. 或者分两行：

```
auto myLambda = [&k1,&k2,&k3](){return (k1&&k2)||k3;} ;
IsGood(myLambda); 
```

同样，这一切都有效，因为您传递`IsGood`了它需要的信息。它不能以任何其他方式得到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:38:01.283

我将首先定义一组对给定对象起作用的逻辑操作，例如：

```
// This is just a simple wrapper for the first argument
template <typename T>
struct FirstOp
{
  FirstOp(T const& v) : _v(v)
  { }

  T const & operator*() const { return _v; }

  T const& _v;
};

template <typename T>
struct AndOp
{
  AndOp(T const& v) : _v(v)
  { }

  T const & operator*() const { return _v; }

  // Then hack the stream operator
  template <typename O>
  O const & operator>>(O const & o) const
  {
    if (o)
      o = o && _v; // assumes T supports safe bool

    return o;
  }

  T const& _v;
};

template <typename T>
struct OrOp
{
  OrOp(T const& v) : _v(v)
  { }

  T const& operator*() const { return _v; }

  // Then hack the stream operator
  template <typename O>
  O const & operator>>(O const & o) const
  {
    if (!o)
      o = o || _v; // assumes T supports safe bool

    return o;
  }

  T const& _v;
};

template <typename Op1>
struct ResultOf
{
  ResultOf(Op1 const& cOp) : _o1(cOp), _r(*_o1)
  { }

  ResultOf const & operator=(bool r) const
  { _r = r; return *this; }

  operator bool() const { return _r; }

  // Then hack the stream operator
  template <typename O>
  ResultOf& operator>>(O& o)
  {
    o >> *this;
    return *this;
  }

  Op1 const& _o1;
  mutable bool _r;
}; 
```

然后定义一个`IsGood`接受参数，重载支持更多参数。

```
template <typename T1, typename T2>
bool IsGood(T1 const& t1, T2 const& t2)
{
  return ResultOf<T1>(t1) >> t2;
} 
```

然后你可以调用如下。

```
int main(void)
{
  std::cout << IsGood(FirstOp<int>(0), OrOp<int>(1)) << std::endl;
} 
```

因此，这种方法允许您将要用于特定逻辑操作的值与该操作一起包装，然后将其传递给通用`IsGood`函数。现在在这里，实际构造的运算符是硬编码的，但是没有什么可以阻止您从文件中读取它，然后构造适当的运算符以传递给`IsGood`. 注意：以上是短路的，因此只会在必要时评估参数（将进行函数调用），但不会评估表达式。您应该能够使用上述方法来建立任意复杂的逻辑关系。

免责声明：这是我对你的问题的有限理解......如果它偏离了标记，嗯......*

# php - .js 的 php 自动滚动问题

> ID：12474617
> 
> 赞同：1
> 
> 时间：2012-09-18T09:57:28.500
> 
> 标签：php, javascript, html, chat

是否有任何简单的方法可以在 php/html 聊天框中创建自动滚动？我尝试了一些东西，但它们都干扰了页面上的其他 .js 元素，最终都无法正常工作。

查看聊天框的实时代码点击这里！

这就是我现在所拥有的

```
// jQuery Document
 $(document).ready(function(){
//If user submits the form
$("#submitmsg").click(function(){   
    var clientmsg = $("#usermsg").val();
    $.post("post.php", {text: clientmsg});              
    $("#usermsg").attr("value", "");
    return false;
});

//Load the file containing the chat log
function loadLog(){     
    var oldscrollHeight = $("#chatbox").attr("scrollHeight") - 20;
    $.ajax({
        url: "log.html",
        cache: false,
        success: function(html){        
            $("#chatbox").html(html); //Insert chat log into the #chatbox div               
            var newscrollHeight = $("#chatbox").attr("scrollHeight") - 20;
            if(newscrollHeight > oldscrollHeight){
                $("#chatbox").animate({ scrollTop: newscrollHeight }, 'normal'); //Autoscroll to bottom of div
            }               
        },
    });
}
setInterval (loadLog, 2500);    //Reload file every 2.5 seconds

//If user wants to end session
$("#exit").click(function(){
    var exit = confirm("Are you sure you want to end the session?");
    if(exit==true){window.location = 'index.php?logout=true';}

}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:27:09.987

我怀疑你得到的滚动高度的重量不起作用。我试图在 FF 的命令行中输入它，但没有得到 int 或对象。

不要试图获得滚动高度。进一步向下滚动......而且不止于此。

```
$("#chatbox").animate({ scrollTop: 99999 }, 'normal'); 
```

我只尝试过 FF，但应该适用于大多数浏览器。

然后，您的成功功能非常简单：

```
success: function(html){        $("#chatbox").animate({ scrollTop: 99999 }, 'normal');

            $("#chatbox").html(html);
            $("#chatbox").animate({ scrollTop: 99999 }, 'normal');
} 
```

$(".msgln").last().offset().top

# xml - 噩梦般的，有效错误：[XPTY0004] 预期单个项目，（元素 x { ... }，元素 x { ... }，...）找到

> ID：12474622
> 
> 赞同：1
> 
> 时间：2012-09-18T09:57:41.153
> 
> 标签：xml, xml-parsing, xquery

在我最近一次从噩梦中访问 XML 数据库的尝试中，我已经非常接近了。我实际上成功了，使用测试数据库；但是，当我将它应用于我实际尝试访问的数据库而不是 BaseX 示例数据库时，我得到一个特殊品牌的错误，这是对 XML 文件的有效投诉：

通过[http://basex.org/products/live-demo/](http://basex.org/products/live-demo/)

文档（“测试”）：=

```
<item>
<item_number>1171270</item_number>
<seller_info>
<seller_company_id>6356</seller_company_id>
<seller_rating>C31</seller_rating>
<seller_rating>T150 hr.</seller_rating>
</seller_info>
<product_info>
<unit>2022</unit>
<sinfo>55 cases</sinfo>
<sinfo>Yu-gi-oh trading card pack</sinfo>
<sinfo>.45kg per unit</sinfo>
<sinfo>24.7500kg shipment</sinfo>
</product_info>
<product_info>
<unit>9291</unit>
<sinfo>7 units</sinfo>
<sinfo>Naruto, Classic, action figure</sinfo>
<sinfo>1.8kg per unit</sinfo>
<sinfo>12.6kg shipment</sinfo>
</product_info>
</item> 
```

0：编写您自己的查询... :=

```
let $doc := doc('test') 
for $v in $doc//item
where contains($v/product_info/unit,'9291')
return 
$v/seller_info/seller_company_id 
```

回报：

```
Error:
Stopped at line 3, column 39: [XPTY0004] Single item expected, (element unit { ... }, element unit { ... }) found. 
```

我不能说我没想到会遇到这样的问题。不幸的是，我没有格式化 XML 文档——其他人做了——而且它的格式都非常糟糕，如您所见。我试图访问它的部分原因是：重组它。

有没有办法运行我试图在文档上运行的查询并获得结果而不会让这个错误吐在我身上？`Single item expected`当我尝试将目标定位`sinfo`为返回值时，我也在查看我的退货中的错误，对吗？有没有办法得到，例如，`all of the sinfo's`？或者只有`the second sinfo for each product_info`不让这个讨厌的错误向我吐口水怎么样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T10:24:37.397

where 子句中的路径`$v/product_info/unit`每次调用将产生多个项目，而该`contains()`函数仅接受单个项目作为参数。以下查询将为您提供预期的结果：

```
let $doc := doc('test') 
for $v in $doc//item
where some $i in $v/product_info/unit satisfies contains($i,'9291')
return $v/seller_info/seller_company_id 
```

另一种解决方案（在谓词`[...]`中，每个项目将绑定到上下文项目`.`并逐个处理）：

```
let $doc := doc('test') 
for $v in $doc//item
where $v/product_info/unit[contains(.,'9291')]
return $v/seller_info/seller_company_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:43:39.970

正如 Christian 所提到的， contains() xpath 函数需要一个节点，但是由于在您的 xml 根目录中，xpath 表达式返回了两个节点。因此 XQuery 可以写成

```
let $doc := doc('test')  
for $v in $doc//item 
where $v/product_info/unit[.='9291']
return  $v/seller_info/seller_company_id 
```

这里要注意的另一件重要事情是 contains() 函数的用法。如果字符串作为一个整体或一部分包含在主字符串中，则此函数返回 true。这意味着对于具有以下值的单位，它将返回 true

9291

1 **9291**

**23171239291** 237283

...

因此，建议根据需要使用正确的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T20:47:46.770

您向我们展示了一个不正确的查询，并要求我们从中猜测您的实际意图，这不一定是可能的。但是，我的猜测是，如果 $v/product_info/unit 的多个值中的任何一个等于“9291”，您希望 where 子句返回 true。您犯了一个常见错误，即假设 contains() 函数测试一组值是否包含特定值，而它实际上测试字符串是否包含特定子字符串。要测试一组值是否包含特定值，请使用“=”运算符：

```
where $v/product_info/unit = '9291' 
```

# java - 是否有任何可用于缩进的算法或源代码？

> ID：12474624
> 
> 赞同：3
> 
> 时间：2012-09-18T09:57:45.403
> 
> 标签：java

我需要知道 java IDE (Eclipse) 中使用的缩进的算法或源代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T10:04:03.703

您可以在 JDT 中找到源代码。不过，这并不容易找到。[这个 git repo 应该有你需要](http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/)的。在页面上搜索“克隆”以查看如何克隆它。

以下是[公共 API 的来源](http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/tree/org.eclipse.jdt.core/formatter/org/eclipse/jdt/core/formatter)。实际的[实现在这里](http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/tree/org.eclipse.jdt.core/formatter/org/eclipse/jdt/internal/formatter)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:04:20.147

Eclipse IDE 是开源的，因此您应该能够下载和阅读 Eclipse 使用的精确算法的源代码。

# php - Zend multiCheckbox 元素的单个错误消息而不是多个

> ID：12474628
> 
> 赞同：2
> 
> 时间：2012-09-18T09:57:56.883
> 
> 标签：php, zend-framework, zend-form

我的表单上有带有通用回调验证器的 multiCheckbox 元素。

验证器工作正常，但错误消息包含重复的字符串，用分号而不是单个消息分隔。如果选择了 2 个复选框 - 2 条错误消息，如果 4 - 4 条错误消息等等。

您知道如何修改代码以仅显示一条错误消息而不是重复消息吗？

```
 $rolesElement = $form->getElement('role_ids');
 $rolesElement->addValidator(new Zend_Validate_Callback(function ($value) use ($rolesElement, $administrator) {
        if( *magicHere* ){
            $rolesElement->clearErrorMessages();
            $rolesElement->setErrorMessages(array('blablabla!'));

            return false;
        }
        return true;
    })); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:23:42.077

您始终可以使用**`setMessages()`**您正在使用的 Validator 类的方法来设置自定义错误消息。

**这是我的代码**

```
$emailIdValidator->setMessages(array(
            Zend_Validate_EmailAddress::DOT_ATOM => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
            Zend_Validate_EmailAddress::INVALID => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
            Zend_Validate_EmailAddress::INVALID_FORMAT => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
            Zend_Validate_EmailAddress::INVALID_HOSTNAME => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
            Zend_Validate_EmailAddress::INVALID_LOCAL_PART => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
            Zend_Validate_EmailAddress::INVALID_MX_RECORD => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
            Zend_Validate_EmailAddress::INVALID_SEGMENT => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
            Zend_Validate_EmailAddress::LENGTH_EXCEEDED => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
            Zend_Validate_EmailAddress::QUOTED_STRING => $this->coreUtils->getApplicationMessages("EMAIL_ERROR"),
        )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T13:39:22.087

```
 $form = new Zend_Form ();
    $form->addElement ('MultiCheckbox', 'name', array (
        'label' => 'test',
        'multioptions' => array (
            1 => 'fake',
            65 => 'dsa',
            165 => 'dsa22'
        )
    ));

    $form->name->addValidator ('Callback', true, array (
        'callback' => array (
            $this,
            'val'
        ),
        'messages' => array (
            'callbackValue' => 'Error in here'
        )
    )); 
```

在这种情况下，验证函数不应添加任何错误消息。只是一个布尔值。

```
function val ($value, $values)
{
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:27:59.270

这个问题是通过创建我自己的基于 Zend_Validate 的自定义验证器来解决的。

# groovy - 填充列表 > 在 Groovy 中使用 Groovy 对象

> ID：12474638
> 
> 赞同：1
> 
> 时间：2012-09-18T09:58:21.470
> 
> 标签：groovy, embed

在[哪种基于 JVM 的脚本语言支持 @WebService 在运行时创建服务？](https://stackoverflow.com/questions/12034538/what-jvm-based-scripting-language-support-webservice-to-create-services-at-runt)有人建议我使用 Groovy 提供在运行时读取的脚本中配置的 Web 服务。

为了使这项工作与我们现有的基础设施一起工作，我基本上需要能够向 a 添加新条目，`List<Callable<String>>`然后我可以要求执行者在其上调用任何内容。

基本结构将类似于：

*   Groovy 是使用嵌入的`GroovyScriptEngine`
*   在传入的绑定中作为“l”从 Java 传入的初始列表。
*   Groovy 脚本定义并实例化 N 个对象，全部实现`Callable<String>`并将它们添加到列表中。
*   回到 Java 中，列表会被进一步处理，然后传递给执行器。

我最初的微弱步骤表明我很可能需要使用`def c = { ... } as Callable<String>`，但随后我得到了 ClassCastException。阅读我发现这似乎有点困难并且涉及关闭。

在 Groovy 中定义和实例化对象的正确方法是什么`Callable<String>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:47:51.130

在 Groovy 1.8 及更高版本中，默认`groovy.lang.Closure`实现`Callable`，因此您不需要任何“as”魔法。，简单地说：

```
l << { "hello" }
l << { "world" } 
```

对于 Groovy 的早期版本（当然是 1.6 和 1.7，不确定“古老”版本），您需要使用`as`：

```
import java.util.concurrent.Callable

l << ({ "hello" } as Callable) 
```

# iphone - 将处理后的图像保存在 iPhone 库中

> ID：12474644
> 
> 赞同：0
> 
> 时间：2012-09-18T09:58:32.333
> 
> 标签：iphone, xcode, image-processing, cgaffinetransform, flip

我正在使用此代码翻转图像。

```
CGAffineTransform trans = CGAffineTransformScale(imageView.transform, -1, 1);
imageView.transform = trans; 
```

现在如果我想保存这个翻转的图像我应该怎么做？
我正在使用`UIImageWriteToSavedPhotosAlbum(imageView.image, nil, nil, nil);`将图像保存在 iphone 库中，但它保存的是原始图像而不是翻转的图像。

欢迎大家提出建议。
感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:04:34.760

正如你正在做的那样，你正在翻转`UIImageView`它的`X-Axis`not `UIImage`。所以很明显代码会保存你的原始图像。

翻转你的`UIImage`而不是`UIImageView`然后保存 -

```
 UIImage *flippedImage = [UIImage imageWithCGImage:sourceImage.CGImage scale:1.0 orientation: UIImageOrientationUpMirrored]; 
```

现在使用您的保存方法 -

```
UIImageWriteToSavedPhotosAlbum(flippedImage, nil, nil, nil); 
```

**编辑：**

```
-(void)tapFlipXPosition:(id)sender
{
    UIImage* sourceImage = yourSourceImage;
    UIImage* flippedImage;

    if(sourceImage.imageOrientation == UIImageOrientationUpMirrored)
    {
       flippedImage = [UIImage imageWithCGImage:sourceImage.CGImage scale:1.0 orientation: UIImageOrientationUp];
    }
    else
    {
        flippedImage = [UIImage imageWithCGImage:sourceImage.CGImage scale:1.0 orientation: UIImageOrientationUpMirrored];
    }

    UIImageWriteToSavedPhotosAlbum(flippedImage, nil, nil, nil);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T10:03:58.257

使用此代码。首先，您将截取倒置图像的屏幕截图，将其保存到另一个 imageviewView 中，然后将这个特定的“新图像”保存到 PhotoLibrary。

```
 UIGraphicsBeginImageContext(BaseView.frame.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *attachimage = [[UIImage alloc]initWithData:Data];
    UIImage *viImage=UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    attachimage = viImage;
    UIImageWriteToSavedPhotosAlbum(viImage, nil, nil, nil); 
```

# java - Java的开源分布式缓存

> ID：12474650
> 
> 赞同：6
> 
> 时间：2012-09-18T09:58:56.527
> 
> 标签：java, caching, ehcache, terracotta

可以在 Java 中使用的最好的开源分布式缓存是什么？

我以为是 EHCache，但显然只有在使用商用产品 Terracotta Server Array 时才能在多个节点上进行扩展。

我的目标是实时为流数据构建缓存，有一定的延迟，我实际估计的数据大小在 8gb 左右，而生产速度要慢得多，大约为每秒 3mb。

由于存在初始延迟，我希望我的缓存也被复制，因为当从 0 开始时，我的缓存需要一个预热期，我非常有兴趣避免。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:00:33.867

[`Memcached`](http://code.google.com/p/memcached/wiki/ReleaseNotes1415)值得研究。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T12:41:13.953

我建议您看一下名为[Hazelcast](http://www.hazelcast.com/)的产品， 尽管它本身不是分布式缓存，而是一个非常可扩展且非常易于使用的数据网格。

顺便说一句，如果您能告诉我们有什么要求可能会更好，有很多开源产品可能适合您的需求......

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T19:45:45.520

您不需要 Terracotta 的商业许可证来集群您的（Eh）缓存......使用多个条带时确实需要许可证，但一台服务器（可能是被动服务器）不需要任何许可证

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-14T00:12:56.360

Apache Ignite 有一个功能丰富的分布式数据网格，它当然支持分布式缓存。您可以在此处找到更多信息：[https ://ignite.apache.org/features/datagrid.html](https://ignite.apache.org/features/datagrid.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-17T11:44:16.917

试试 TayzGrid，它是一个开源[内存数据网格](http://www.alachisoft.com/tayzgrid/)，也称为内存数据网格。

> OP：我的目标是实时为流数据构建缓存，有一定的延迟，我实际估计的数据大小在 8gb 左右，而生产速度要慢得多，大约 3mb 每第二。

开源版本已准备好生产，可轻松满足 100GB 的数据。与此相比，您的数据非常小:)

> OP：我希望我的缓存也能被复制

你的愿望已经实现：[复制缓存](http://www.alachisoft.com/tayzgrid/data-grid-topologies.html#replicated)。报价；

> 两个或更多内存数据网格服务器形成一个复制缓存集群。每个数据网格服务器都包含数据网格中的所有数据。在任何服务器上执行的任何更新都以同步方式传播到集群中的所有其他服务器

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T17:09:34.560

您可以使用 memcached

或 Redis (http://code.google.com/p/redis/) --> 存储不是易失的

或 twemcache (http://engineering.twitter.com/2012/07/caching-with-twemcache.html)

# sql-server - Visual Studio 数据库项目 + 部署 + TFS 构建 + 多租户

> ID：12474657
> 
> 赞同：2
> 
> 时间：2012-09-18T09:59:12.377
> 
> 标签：sql-server, visual-studio-2010, tfs, database-project

我们最近迁移到使用 Visual Studio 数据库项目。我们要做的是在 TFS 构建服务器构建时部署数据库。

这相对简单，我们为单个数据库工作，但是，我们需要将它部署到多个数据库，因为我们有一个具有多个数据库的 SaaS 产品。因此，例如，当我们进行 QA 构建时，应更新 QA DB 服务器上具有各种配置的所有不同数据库。

有没有“正确”的方法来做到这一点？

我们当前的计划是采用将从配置为部署的数据库生成的部署 .sql 脚本，然后创建一个自定义构建任务，该任务针对其余数据库运行此脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:39:49.030

我不认为有这样做的标准方法，所以我们创建了一个自定义构建任务，它迭代我们要部署的数据库，以执行标准数据库项目对每个数据库的部署生成的部署脚本。

# sql - 计算当月剩余的总工作日

> ID：12474658
> 
> 赞同：1
> 
> 时间：2012-09-18T09:59:13.580
> 
> 标签：sql, sql-server, tsql, date

下面是我计算当月总工作日数的代码。

```
DECLARE @my int
DECLARE @myDeduct int
DECLARE @day INT
DECLARE @mydate DATETIME

SET @mydate = getDate()

SET @myDeduct = 0
SET DateFirst 1 -- Set it monday=1 (value)

--Saturday and Sunday on the first and last day of a month will Deduct 1
IF (DATEPART(weekday,(DATEADD(dd,-(DAY(@mydate)-1),@mydate))) > 5)
SET @myDeduct = @myDeduct + 1

IF (DATEPART(weekday,(DATEADD(dd,-(DAY(DATEADD(mm,1,@mydate))),
                                                 DATEADD(mm,1,@mydate)))) > 5)
SET @myDeduct = @myDeduct + 1

SET @my = day(DATEADD(dd,-(DAY(DATEADD(mm,1,@mydate))),DATEADD(mm,1,@mydate)))

select (((@my/7) * 5 + (@my%7)) - @myDeduct) as Working_Day_per_month 
```

我现在如何计算当月还剩下多少工作日？不担心公共假期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:14:35.390

我使用了**Joe G Joseph**的答案并像这样改变了它！

```
Declare @DaysLeft as INT

;With MyCTE AS
(
    SELECT number + 1 as 'CurrentDay'
    FROM   master..spt_values
    WHERE  type='p'
    AND    number < datepart(dd, DateAdd(day,-1,DateAdd(Month,1,DateAdd(Month,
                                          DateDiff(Month, 0, GETDATE()),0))))
    AND    datename(WEEKDAY,DateAdd(Month, DateDiff(Month, 0, GETDATE()),
                                         number) ) not in ('Saturday','Sunday')
)

Select @DaysLeft = (Select COUNT(*) As MyTotal from MyCTE
WHERE CurrentDay >= DATEPART(DD, GETDATE()))

Select @DaysLeft 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:20:04.707

尝试这个：

此查询将为您提供当月的工作日。假设非工作日是周六和周日。如果您有一个包含工作日/假期列表的表，那么您也可以将该表与查询连接起来以获得正确的结果。

```
SELECT number+1 as 'day'
FROM   master..spt_values
WHERE  type='p'
AND    number <datepart(dd, DateAdd(day,-1,DateAdd(Month,1,DateAdd(Month,
                                          DateDiff(Month, 0, GETDATE()),0))))
AND    datename(WEEKDAY,DateAdd(Month, DateDiff(Month, 0, GetDate()),
                                         number) ) not in ('Saturday','Sunday') 
```

# android - 如何显示图像的完整尺寸？

> ID：12474667
> 
> 赞同：2
> 
> 时间：2012-09-18T09:59:40.377
> 
> 标签：android, image, gridview

我是新来的，并且是 Android 编程的新手。我在互联网上的一个网站上找到了这个例子（下面是例子），这是一个很棒的教程！我想要实现的是，当我单击 GridView 上的图片时，我想显示图像的完整尺寸。

```
public class MainActivity extends Activity {

public class ImageAdapter extends BaseAdapter {

    private Context mContext;
    ArrayList<String> itemList = new ArrayList<String>();

    public ImageAdapter(Context c) {
        mContext = c;
    }

    void add(String path) {
        itemList.add(path);
    }

    @Override
    public int getCount() {
        return itemList.size();
    }

    @Override
    public Object getItem(int arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) { // if it's not recycled, initialize some
                                    // attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(220, 220));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        Bitmap bm = decodeSampledBitmapFromUri(itemList.get(position), 220,
                220);

        imageView.setImageBitmap(bm);
        return imageView;
    }

    public Bitmap decodeSampledBitmapFromUri(String path, int reqWidth,
            int reqHeight) {

        Bitmap bm = null;
        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(path, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth,
                reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        bm = BitmapFactory.decodeFile(path, options);

        return bm;
    }

    public int calculateInSampleSize(

    BitmapFactory.Options options, int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {
            if (width > height) {
                inSampleSize = Math.round((float) height
                        / (float) reqHeight);
            } else {
                inSampleSize = Math.round((float) width / (float) reqWidth);
            }
        }

        return inSampleSize;
    }

}

ImageAdapter myImageAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    myImageAdapter = new ImageAdapter(this);
    gridview.setAdapter(myImageAdapter);

    String ExternalStorageDirectoryPath = Environment
            .getExternalStorageDirectory().getAbsolutePath();

    String targetPath = ExternalStorageDirectoryPath + "/test/";

    Toast.makeText(getApplicationContext(), targetPath, Toast.LENGTH_LONG)
            .show();
    File targetDirector = new File(targetPath);

    File[] files = targetDirector.listFiles();
    for (File file : files) {
        myImageAdapter.add(file.getAbsolutePath());
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:05:48.020

将图像传递给其他活动以在全视图中显示它。

从您的主要活动传递图像。使用以下代码：

```
gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {

ImageView img = ia.getView(position, v, parent);
                img.buildDrawingCache(); 
                Bitmap bmap = img.getDrawingCache();
                Intent intent = new Intent(HelloGridView.this,
                        Imageviewer.class);
                Bundle bundle = new Bundle();
                //bundle.putParcelable("image", bmap);
                    String par=myimageadpter.getpath(position);
                             bundle.putParcelable("imagepath", par);
                intent.putExtras(bundle);
                startActivityForResult(intent, 0);

            }
        }); 
```

在其他活动中，使用此代码显示传递的图像：

```
 Bundle bundle = this.getIntent().getExtras();
             bmp=bundle.getParcelable("image");
            ImageView img=(ImageView) findViewById(R.id.imageView1);
            d =new BitmapDrawable(bmp);
            img.setImageBitmap(bmp); 
```

如果你通过路径。第二个活动如下所示：

```
 Bundle bundle = this.getIntent().getExtras();

String s=bundle.getParcelable("imagepath");
 Bitmap Imagefrompath = BitmapFactory.decodeFile(s);
            ImageView img=(ImageView) findViewById(R.id.imageView1);

            img.setImageBitmap(Imagefrompath ); 
```

# php - php登录脚本使用特定的用户名和密码通过会话ID

> ID：12474670
> 
> 赞同：-1
> 
> 时间：2012-09-18T09:59:51.793
> 
> 标签：php, session, login, sessionid

我希望有所帮助。我需要一个使用会话 id 的 php 脚本将特定的用户名和密码登录重定向到特定的 html 表单，因为没有人可以在不通过此用户名和密码登录的情况下访问链接（即登录后没有人可以复制链接在另一个浏览器上并继续）。诸如管理区域之类的东西。（注意：我将自己指定名称和密码，而不是通过从数据库中检索它，因此不需要 SQL 脚本）我在其中搜索了太多，找不到有用的东西。提前感谢您的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:40:08.063

在`special_form.php`和/或其他类似页面上放置如下内容：

```
check_login(); 
```

`check_login()`像这样的东西在哪里：

```
function check_login() {

    if ($_SESSION['login'] == true AND !empty($_SESSION['user_id')) {

        if ($_SESSION['username'] != 'MyUser' OR $_SESSION['password'] != 'MyPass') {

            header('Location: http://www.domain.com/login.php');
        }

    } else {
        header('Location: http://www.domain.com/login.php');
    }
} 
```

现在，`login-process.php`写这样的东西：

```
$_SESSION['username'] = $_POST['username'];
$_SESSION['password'] = $_POST['password'];

if ($_SESSION['username'] == 'MyUser' AND $_SESSION['password'] == 'MyPass') {

    header('Location: http://www.domain.com/special_form.php');
}

// normal login process code 
```

我只是希望我已经正确理解了你的问题。如果我在某个地方错了，请给我一些提示。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:06:35.610

将其放在所有页面的顶部以检查是否已登录：

```
if(!isset($_SESSION['loggedin'] || 
   !$_SESSION['loggedin']==1) header('Location: http://website.com/login.php'); 
```

login.php 上的 HTML 表单

```
<?php
//And just check post variables from form:
if(isset($_POST['submit'])) {
    if(strcmp($_POST['username'], 'Your username') == 0 &&
      (strcmp($_POST['password'], 'Your password') == 0) {
        $_SESSION['loggedin'] = 1;
        header('Location: http://website.com/youareloggedin.php');
    }
}
?>

<form action="" method="post">
    <input type="text" name="username" />
    <input type="password" name="password" />
    <input type="submit" name="submit" />
</form> 
```

一些技巧：

*   在调用 header 函数之前不要向页面写入任何内容，它会破坏它。

*   表单上的空白操作将向自身发送数据，确保 php 在顶部（通常更容易将所有 php 保持在顶部并在需要时使用内联 php，例如`<?=functionorvariable()?>`

*   strcmp 比较两个字符串，如果它们相等，它会给你零作为返回值。

*   始终使用 isset 检查表单是否实际在页面上提交，而不是检查值。

*   您应该添加错误检查以检查帖子值，以查看它们是否为空或其他，这是一种好习惯。

*   边做边学，请研究一下这个程序的结构，看看写得清楚，用意很清楚。编码时始终遵循清晰的路线。

祝你好运

# php - php网页中的Dropbox功能

> ID：12474675
> 
> 赞同：0
> 
> 时间：2012-09-18T10:00:05.460
> 
> 标签：php, web-applications, dropbox

我有一个在 php 和 mySQL 上运行的网站。我希望在这个网站上创建一个页面，列出我的 DropBox 的文件和文件夹。php 代码还应该能够访问 Dropbox 上的文件和文件夹。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:13:41.217

只需遵循此[文档](http://code.google.com/p/dropbox-php/wiki/Dropbox_API)，希望它对您有所帮助。

或者

你也可以参考这个[源代码](https://github.com/Dropbox-PHP/dropbox-php)

# variables - 在 VB6 中禁止不同范围内的重复变量名

> ID：12474676
> 
> 赞同：1
> 
> 时间：2012-09-18T10:00:08.163
> 
> 标签：variables, vb6, scope, duplicates, declaration

当我有一个全局声明的变量时，我可以在函数级别重用相同的变量名，而编译器不会抱怨它。

有什么方法可以禁用它（类似于 Option Explicit）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:23:07.843

不，那里没有。

该操作完全有效，您仍然可以通过完全限定引用来访问两者，但默认情况下它会尝试访问范围内最近的。

# php - PHP - 如何从带有 html 标签的 xml 中解析出链接？

> ID：12474682
> 
> 赞同：0
> 
> 时间：2012-09-18T10:00:22.067
> 
> 标签：php, html, xml, xml-parsing

我对具有 aa href 链接的 xml 有一些问题，我无法以正确的顺序回显。

XML：

```
<root>
      <x>290</x>
      <y>204</y>
      <width>420</width>
      <height>70</height>
        <htmlText>
                 <TEXTFORMAT LEADING="7">
                 <P ALIGN="CENTER">
                 <FONT FACE="Arial" SIZE="12" COLOR="#333333" LETTERSPACING="0" KERNING="0">
                 SOME TEXT 
                 <A HREF="mailto:some@email.com" TARGET="">
                 <U>some@email.com</U>
                 </A> SOME TEXT
                 </FONT>
                 </P>
                 </TEXTFORMAT>
                 </htmlText>
    </root> 
```

我的模块文本功能：

```
<?php 
class modules
{
     private $xml;
     protected $build;
     // div text
     public $div_x, $div_y, $div_width, $div_height, $title, $post, $date, $caption_fontfamily, $caption, $caption_fontsize, $caption_color, $caption_ls, $serverEmail, $name, $email, $message, $src;

     private $direction, $fontFamily, $af_color, $color, $bold, $italic, $underline, $af_bold, $af_italic, $af_underline, $size;
     // P
     public $p_attr_color, $p_attr_align, $p_attr_fontfamily, $p_attr_fontsize, $p_content, $p_content_temp;
     // Image module
     private $img_path, $img_x, $img_y, $img_rotation, $img_width, $img_height;
     // Shape module
     private $shape_x, $shape_y, $shape_width, $shape_height, $fill_color, $border_color, $border_size, $shape_type, $alpha, $rotation, $prettyPrinting, $opacity;
    public function moduleText($xml,$print = '')
     {
         $this->xml = new SimpleXMLElement($xml);
         // Plocka ut XML-data
         $this->div_x = $this->xml->x;
         $this->div_y = $this->xml->y;
         $this->div_width = $this->xml->width;
         $this->div_height = $this->xml->height;
         $this->divStart = $this->xml->htmlText[0]->TEXTFORMAT->attributes->LEADING;
         $this->build = '<div id="printthis" style="position:absolute; overflow:auto;left:'.$this->div_x.'px;top:'.$this->div_y.'px;width:'.$this->div_width.'px;height:'.$this->div_height.'px;">';

     foreach($this->xml->htmlText as $htmltext)
         {
             foreach($htmltext as $textformat)
             {
             $line_height = $textformat->attributes()->LEADING;
                 foreach($textformat as $p)
                 {

                     foreach($p as $font)
                     {

                        if(isset($font->A))
                         {      

                         foreach($font->A as $link) {
                             $size = $link->attributes()->SIZE;
                             $target .= $link->attributes()->TARGET;

                             $this->build .= '<div style="width:100%; float:left; margin-left:5px; font-size:'.$size.'px;"><a href="' . str_replace("http://","",$link->attributes()->HREF) . '" target="'.$target.'" style="font-size:'.$size.'px;">'.str_replace(array("http://","mailto:"),"",$link->attributes()->HREF).'</a></div>';
                             } 
                         }
                         $fontsize = $font->attributes()->SIZE;
                         $fontfamily = str_ireplace(array('_'), array(''), $font->attributes()->FACE);
                         $fontcolor = $font->attributes()->COLOR;
                         $test = "1.305";
                         if(strlen($font) > 0) {
                         $this->build .= '<div align="'.$this->p_attr_align.'" style="width:100%; color:'.$fontcolor.';font-family:'.$fontfamily.';font-size:'.$fontsize.'px; line-height:'.$test.'em;">';
                         if(isset($font->A)) {
                         $this->build .= iconv('UTF-8','ISO-8859-1', str_ireplace(array('[b]','[/b]','[i]','[/i]'), array('<b>','</b>','<i>','</i>'), $font . '</div>')); 
                         } else {
                         $this->build .= iconv('UTF-8','ISO-8859-1', str_ireplace(array('[b]','[/b]','[i]','[/i]'), array('<b>','</b>','<i>','</i>'), $font . '</div>')); 
                         }
                         }
                         if(strlen($font->I) > 0) {
                         $this->build .= '<div align="'.$this->p_attr_align.'" style="width:100%;  color:'.$fontcolor.';font-family:'.$fontfamily.';font-size:'.$fontsize.'px; line-height:'.$test.'em;">';
                         $this->build .= iconv('UTF-8','ISO-8859-1', str_ireplace(array('[b]','[/b]','[i]','[/i]'), array('<b>','</b>','<i>','</i>'), "<i>".$font->I . '</i></div>'));
                     }

                     if(strlen($font->U) > 0) {
                         $this->build .= '<div align="'.$this->p_attr_align.'" style="width:100%; text-decoration:underline;  color:'.$fontcolor.';font-family:'.$fontfamily.';font-size:'.$fontsize.'px; line-height:'.$test.'em;">';

                         $this->build .= iconv('UTF-8','ISO-8859-1', str_ireplace(array('[b]','[/b]','[i]','[/i]'), array('<b>','</b>','<i>','</i>'), "<i>".$font->U . '</i>'));
                         $this->build .= '</div>';
                     }
                     if(strlen($font) == 0 && strlen($font->U) == 0 && strlen($font->I) == 0) {
                     $this->build .= '<div align="'.$this->p_attr_align.'" style="width:100%; text-decoration:underline;  color:'.$fontcolor.';font-family:'.$fontfamily.';font-size:'.$fontsize.'px; min-height:'.$test.'em; line-height:'.$test.'em;"></div>';
                     }

                     } 
                 }
              }
         }
         $this->build .= '</div>';
                return $this->build;
     }
            }
            ?> 
```

PHP用xml调用方法：

```
<?php include("functions_modules.php"); 
$module = new modules; $xmlcode = '<root>
<x>290</x>
<y>204</y>
<width>420</width>
<height>70</height>
<htmlText>
<TEXTFORMAT LEADING="7">
<P ALIGN="CENTER">
<FONT FACE="Arial" SIZE="12" COLOR="#333333" LETTERSPACING="0" KERNING="0">
SOME TEXT
<A HREF="mailto:some@email.com" TARGET="">
<U>some@email.com</U>
</A>
SOME TEXT
</FONT></P>
</TEXTFORMAT>
</htmlText>
</root>'; 
echo $module->moduleText($xmlcode); ?> 
```

结果变成了这样：

> ```
> SOME TEXT
> SOME TEXT
> <a href="mailto:some@email.com">some@email.com</a> 
> ```

它应该是：

> 一些文字 some@email.com 一些文字

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:33:37.467

我希望这是有帮助的。我喜欢使用 xpath 来切开从 SimpleXML 返回的 XML：

```
<?php
$xml = new SimpleXMLElement("xml_file_path", NULL, True);
$tags = $xml->xpath('//a');  //use xpath on the XML to find the a tags

foreach($tags as $tag){  
    echo $image['href'] ;  //here is the a tag src
}
?> 
```

试试这个链接

[http://php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)

[读取 XML 文件并将数据存储到 mysql 数据库](https://stackoverflow.com/questions/2599597/reading-an-xml-file-and-store-data-to-mysql-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:27:18.963

通过使链接 bbcode 解决它，然后再次将它们 preg_matched 到链接。

# regex - 带有正则表达式的单个 Grep 或多个简单的 grep

> ID：12474684
> 
> 赞同：0
> 
> 时间：2012-09-18T10:00:26.913
> 
> 标签：regex, logging, grep

我将与 Grep 一起研究一个非常大的数据集。几乎很多日志。我不确定使用一些有时疯狂的复杂正则表达式对其进行 grep 是否更好，或者尝试进行一些简单的 grep 调用并每次返回一个越来越小的数据集。我不是最擅长正则表达式，但我能够将我需要的正则表达式存储在日志搜索工具中，我只是在寻找哪种方法可能是最好的。

编辑：

抱歉，我忘了添加在我上一篇文章中针对不同 grep 问题的信息。这些文件是日志，它们可能很小，也可能很大，到目前为止我正在测试的文件是 1.9gb 所以我认为这是一个相当不错的大小，问题是日志会从小开始，然后它们会增长并且日志会在某个时候轮转，让我们说每天，但如果我像我的 Apache 访问日志那样做，我会用 grep 查询主页的加载频率，或者用 grep 查询页面加载时间，这样我就可以取平均值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:04:12.830

由于您的数据集非常大，最好`grep`只使用正确的正则表达式调用一次。这将避免过多的 IO 开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:13:43.963

与其使用“疯狂的正则表达式”，不如构建您要查找的内容的散列，然后在查找散列中的元素时循环遍历大型数据集。我会使用 Perl、Python 或 Ruby，而不是 grep。

编辑：

或者，您可以设置模式列表并为该模式列表设置 grep。这比使用“疯狂的正则表达式”要好。你可以试试`grep -f patterns.txt datafile.txt`。

# php - 致命错误：无法访问 EE2 中的受保护属性 EE_Output::$parse_exec_vars

> ID：12474685
> 
> 赞同：0
> 
> 时间：2012-09-18T10:00:28.500
> 
> 标签：php, expressionengine

这个错误在“表达式引擎 2”中是什么意思？当我尝试访问时得到它 `http://localhost/alias/blog/admin.php`。

```
Fatal error: Cannot access protected property EE_Output::$parse_exec_vars in C:\web\blog\system\expressionengine\libraries\Core.php on line 423 
```

如果我注释掉第 423 行，它会加载控制面板，但菜单似乎都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:11:55.013

您正在使用类`EE_Output`并尝试使用`parse_exec_vars`.

但是，因为这是一个**受保护的属性**，它只能在`EE_Output`类本身和**派生类**中访问。

您没有显示任何代码，所以我无法详细说明，但这应该可以帮助您。

# mysql - 根据条件选择多于 1 列

> ID：12474686
> 
> 赞同：1
> 
> 时间：2012-09-18T10:00:29.243
> 
> 标签：mysql

请告诉如何在条件下选择 2 列或更多列？我尝试这个，但不起作用

```
SELECT 
    CASE 
        WHEN 1=1 THEN 'A', 'B'
        ELSE 'C', 'D'
    END 
```

如果尝试仅选择 1 个值

```
 WHEN 1=1 THEN 'A'
        ELSE 'C' 
```

有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:04:08.787

你需要单独写。

```
SELECT
  IF(1=1, 'A', 'C'),
  IF(1=1, 'B', 'D') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:05:33.093

使用两个`CASE`表达式：

```
SELECT 
    CASE WHEN 1 = 1 THEN 'A' ELSE 'C' END,
    CASE WHEN 1 = 1 THEN 'B' ELSE 'D' END 
```

# java - 从 Jar 运行我的 java 项目

> ID：12474693
> 
> 赞同：1
> 
> 时间：2012-09-18T10:00:40.947
> 
> 标签：java, eclipse

我有一个在 Eclipse 中工作的 Java 项目。我的所有代码都在一个`src`. Eclipse 自动编译我的 .java 文件并将 .class 文件存储在一个名为`tmp`.

早些时候，我起诉 Ant 来运行我的项目。我的 ant 脚本会编译我的 Java 代码，并将所有 .class 文件打包成一个 .jar 并将其存储到一个`jar`目录中。在这个`jar`目录中，我还有一些其他文件，例如`settings.cfg`和`data.lst`. 我的应用程序需要这些文件才能运行，但它们不应包含在 Jar 中。它们将与我的 JAR 一起部署，并且应该驻留在同一目录中。目前在开发过程中，我已经修改和自定义了我的设置和属性文件以包含其他信息。我不希望每次有新构建时都替换这些文件，因为我希望数据在构建中持续存在。我只是想将构建的 JAR 放入`jar`目录并执行它。其余文件保持不变。

如何配置我的 Eclipse 以便它始终编译我的代码，将其 JAR 到`jar`目录并执行该 JAR。这样，我的“额外文件”总是与 JAR 在同一个地方。

我在弄清楚如何做到这一点时遇到了很多麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:13:40.517

如果您需要此功能来快速运行/调试，请创建新的运行配置并在“参数”选项卡中的“工作目录”中指定“jar”目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:19:33.500

在另一个 SO 帖子中找到了答案。它是关于创建一个新的“运行配置”，删除默认的类路径条目并添加一个包含 JAR 的文件夹，即`jar`目录以及 JAR 文件本身。

这里：[https ://stackoverflow.com/a/1732316/304151](https://stackoverflow.com/a/1732316/304151)

我还必须稍微修改构建配置。对于自动构建，它使用 Java Builder 将所有 .java 文件编译为 .class 文件并将其存储在`tmp`目录中。我使用自定义 Ant 任务将`tmp`目录中的所有 .class 文件打包到 JAR 中并将其存储在`jar`目录中。这是 Eclipse 执行的文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-18T10:10:44.900

在您的项目中，右键单击属性，在“Java 构建路径”菜单中，您可以在“源”选项卡中设置“默认输出目录”并使其指向 jar 目录：

# python - Python导入错误

> ID：12474694
> 
> 赞同：1
> 
> 时间：2012-09-18T10:00:43.043
> 
> 标签：python, python-3.x, package

我正处于学习阶段，我有一个问题`import`

我创建了一个名为 test 的模块，该文件夹包含我的 test.py、setup.py 和 python.exe，在运行 sdist 并安装后，我在 build 和 dist 文件夹中获得了 MANIFEST 文件、build、lib。

现在，我尝试在 IDLE 中使用我的模块并生成以下内容

```
>>> import test
>>> movies = ["1","2", ["3", "4", ["5", "6"]]]
>>> test.lol ()
Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    test.lol ()
AttributeError: 'module' object has no attribute 'lol' 
```

这是我得到的错误。什么地方出了错？出了什么问题？由于我是新手，我自己找不到解决方案。

这是我的模块：

```
def lol():
    for each_item in movies:
       if isinstance(each_item, list):
           for nest in each_item:
               print(nest)
       else:
           print(each_item) 
```

我使用 Windows 7 机器和 Python 3.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:48:40.980

You are importing the `test` module from the standard library instead of the `test` module of your own.

For Python to be able to find the modules, they have to be located by the paths defined in `sys.path` list, e.g.:

```
import sys

# insert the path to the beginning of the list:
sys.path.insert(0, '/path/to/my/test/module/directory')

# now Python importing system will search the directory defined above 
# before scanning the standard library dirs. 
import test 
```

You can check the `sys.path` in IDLE via `File -> Path Browser`.

# ant - 在哈德逊使用 emma 插件的代码覆盖率

> ID：12474695
> 
> 赞同：0
> 
> 时间：2012-09-18T10:00:50.607
> 
> 标签：ant

我能够获得检测类，但我找不到我的运行时覆盖率数据。我正在使用`build.xml(ant)`. 谁能帮帮我...以下是我的 build.xml 文件...

```
<path id="classpath.test">
    <pathelement location="${dir.dest}/test.jar"/>
<fileset dir="C:\Program Files\Java\jre7\lib\ext">
    <include name="**/*.jar"/>
</fileset>  
</path>     

<path id="emma.lib">
<pathelement location="C:\Program Files\Java\jre7\lib\ext\emma-2.0.5312.jar" />    
<pathelement location="C:\Program Files\Java\jre7\lib\ext\emma_ant-2.0.5312.jar" /> 
</path>     
<taskdef resource="emma_ant.properties" classpathref="emma.lib" />          

<target name="compile" depends="init,prepare" >
<javac classpathref="classpath.test" debug="on"  srcdir="${src.dir}" destdir="${out.dir}" />

<emma enabled="${emma.enabled}" >
<instr instrpathref="run.classpath"  destdir="${out.instr.dir}"  metadatafile="${coverage.dir}/coverage.emma"  merge="true">
    <filter excludes="*Test*"/>
</instr>        
 </emma>
     </target>

     <target name="run" depends="jar">
<java classpathref="classpath.test" classname="MainArea" fork="true"/>
     </target> 

     <target name="junit" depends="run">
    <junit fork="true" haltonfailure="false" printsummary="yes" failureproperty="test.failed">

        <classpath refid="classpath.test"/>
         <classpath>
            <pathelement location="${basedir}/src" />    
             <pathelement location="${out.instr.dir}" />     
             <pathelement location="C:\Program Files\Java\jre7\lib\ext\junit-4.10.jar" />    
             <pathelement location="C:\Program Files\Java\jre7\lib\ext\emma-2.0.5312.jar" />    
             <pathelement location="C:\Program Files\Java\jre7\lib\ext\emma_ant-2.0.5312.jar" />
        </classpath> 
          <formatter type="brief" usefile="false"/>
          <formatter type="xml"/>
        <batchtest todir=".">
            <fileset dir="./workspace">
                <include name = "MainAreaTest.java"/>
            </fileset>
        </batchtest>
        <jvmarg value="-Demma.coverage.out.file=${coverage.dir}/coverage.emma"/>
        <jvmarg value="-Demma.coverage.out.merge=true"/>     

    </junit>

    </target>

   <target name="emma.report"  depends="junit">

   <emma enabled="${emma.enabled}" verbosity="verbose"> 
 <report sourcepath="./workspace" >
 <fileset dir="${coverage.dir}" >
             <include name="*.emma" />
  </fileset> 

 <txt outfile="${coverage.dir}/coverage.txt"/>
            <html outfile="${coverage.dir}/coverage.html"/> 
    <xml outfile="${coverage.dir}/coverage.xml"/>
      </report>
   </emma> 

  </target>
  </project> 
```

我得到这样的输出......

编译：

```
[javac] Compiling 5 source files to C:\Users\.hudson\jobs\Code_Coverage\out

[instr] processing instrumentation path ...
[instr] instrumentation path processed in 78 ms
[instr] [7 class(es) instrumented, 0 resource(s) copied]
[instr] metadata merged into [C:\Users\.hudson\jobs\Code_Coverage\coverage\coverage.emma] {in 0 ms} 
```

艾玛报告：

```
 [echo] emma   

 [report] [EMMA v2.0, build 5312 (2005/06/12 19:32:43)]

 [report] input data path:
 [report] {
 [report]   C:\Users\.hudson\jobs\Code_Coverage\coverage\coverage.emma
 [report] }
 [report] source path:
 [report] {
 [report]   C:\Users\.hudson\jobs\Code_Coverage\workspace
 [report] }
 [report] processing input file [C:\Users\.hudson\jobs\Code_Coverage\coverage\coverage.emma] ...
 [report]   loaded 7 metadata entries
 [report] 1 file(s) read and merged in 0 ms
 [report] nothing to do: no runtime coverage data found in any of the data files 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T05:36:57.027

您还需要包含 .ec 文件来生成报告。

```
<emma enabled="${emma.enabled}" verbosity="verbose"> 
 <report sourcepath="./workspace" >
   <fileset dir="${coverage.dir}" >
     <include name="*.emma" />
     <include name="*.ec" />
   </fileset> 

   <txt outfile="${coverage.dir}/coverage.txt"/>
   <html outfile="${coverage.dir}/coverage.html"/> 
   <xml outfile="${coverage.dir}/coverage.xml"/>
 </report> 
```

# java - Android Camera 打开然后在新活动中打开捕获的图像

> ID：12474702
> 
> 赞同：1
> 
> 时间：2012-09-18T10:01:09.967
> 
> 标签：java, android, eclipse, android-camera

我想制作一个应用程序，当我按下某个按钮时，我想打开摄像头然后捕捉图像，然后捕捉它。

我想在一个新的活动中打开这个图像，把这个图像放在这个新的活动中，除了两个按钮，一个是删除它，另一个是保存在平板电脑的某个目录中。

我使用代码打开凸轮：

```
 Open_CAM.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v)  {

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
           startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

我不知道在那之后我能做什么？

任何帮助请...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T10:22:12.513

```
Open_CAM.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v)  {
                Intent photoPickerIntent= new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, getTempFile());
                photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
                photoPickerIntent.putExtra("return-data", true);
                startActivityForResult(photoPickerIntent,TAKE_PICTURE);}}

 private Uri getTempFile() 
 {
      File root = new File(Environment.getExternalStorageDirectory(), "ServiceMySigns");
      if (!root.exists()) 
      {
          root.mkdirs();
      }
     final Calendar c = Calendar.getInstance();
     int y = c.get(Calendar.YEAR);
     int m = c.get(Calendar.MONTH);
     int d = c.get(Calendar.DAY_OF_MONTH);

     int h = c.get(Calendar.HOUR_OF_DAY);
     int mi = c.get(Calendar.MINUTE);

      //String filename=""+y+"-"+"-"+(m+1)+"-"+d+" "+h+":"+mi;
      String filename=""+System.currentTimeMillis();
      File file = new File(root,filename+".jpeg" );
      muri = Uri.fromFile(file);
      selectedImagePath=muri.getPath();
      Log.v("take picture path",selectedImagePath);
      return muri;
  }

  public void onActivityResult(int requestcode,int resultcode ,Intent data)
  {
      switch(requestcode)
      { 
      case TAKE_PICTURE: 
          if(resultcode==RESULT_OK)
          { 
              BitmapFactory.Options o = new BitmapFactory.Options();
              o.inSampleSize=8;
              Bitmap newImage = Bitmap.createScaledBitmap(BitmapFactory.decodeFile(selectedImagePath,o), 
                                                         150, 
                                                         150, 
                                                         false);}}} 
```

在 onActivityResult 中获得位图后，您可以通过意图将该位图发送到另一个活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:54:25.380

下面的代码将帮助您从相机拍照并将图像设置到下一个活动

```
private void takePicture() {
     cameraIntent = new Intent(
     android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
     startActivityForResult(cameraIntent, IMAGE_CAPTURE);
}

// Receive the result from the start Activity
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        Log.e("onActivityResult", "we r in onActivityResult");

        if (resultCode == Activity.RESULT_OK) {
            switch (requestCode) {

            case IMAGE_CAPTURE:

                File dir = Environment .getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
                File output = new File(dir, "camerascript.png");
                cPath = output.getAbsolutePath();
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT,
                        Uri.fromFile(output));
                Intent capIntent = new Intent(yourcurrentActivity.this,
                        yournextActivity.class);
                capIntent.putExtra("gallery", cPath);
                startActivity(capIntent);
                break;
            default:
                break;
            }
        }
    } 
```

之后，将 intnet 额外数据放入`yournextAactivity`您想要设置捕获图像的位置。

```
 ImageView imageView = (ImageView)findViewById(R.id.imgView);
    String fileString = getIntent().getStringExtra("gallery");
    imageView.setImageBitmap(BitmapFactory.decodeFile(fileString)); 
```

# javascript - 如何在特定条件下停止 Jquery jCarousel

> ID：12474708
> 
> 赞同：0
> 
> 时间：2012-09-18T10:01:41.133
> 
> 标签：javascript, jquery, asp.net-mvc, jcarousel

我正在研究 jquery 的 jCarousel，其中我有一些来自数据库的图像并使用 jCarousel 显示为滑块，我的功能按照我的预期工作，但我想再应用一个功能是，如果图像只有 1，那么它应该不做滑动，我从数据库中获取图像计数，然后在 jCarousel 可见属性中设置它

```
$('.carousel').jCarouselLite({
            visible: @ViewData["ImgTotalCount"].ToString(), 
            activeClass: 'current',
            btnNext: ".carousel-next",
            btnPrev: ".carousel-prev",
            auto: 2000,
            speed: 600  

        }); 
```

目前它甚至在一张图片上也在滑动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:53:19.050

如果您只有一张图像，请将 auto 参数设置为 null。它将把它恢复到它的默认值，并恢复到它的默认行为，它不会移动。

请参阅此处的文档：[http ://www.gmarwaha.com/jquery/jcarousellite/#doc](http://www.gmarwaha.com/jquery/jcarousellite/#doc)

# facebook-graph-api - 应用设置中新请求的权限不会反映在应用本身中

> ID：12474710
> 
> 赞同：0
> 
> 时间：2012-09-18T10:01:46.287
> 
> 标签：facebook-graph-api, permissions

最近我意识到我需要的不仅仅是我的 facebook 应用程序的基本信息。我也需要用户的生日。

在我的应用权限配置中，我添加了“user_birthday”，并通过检查 facebook 给出的示例，成功添加了权限。（不用说我点击了“保存更改”）

当我尝试登录我的应用程序时，“user_birthday”没有出现。（等待几分钟和另一个 24 小时后）

任何想法我还需要在 facebook 中配置什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:29:15.097

> 当我尝试登录我的应用程序时，“user_birthday”没有出现。

您是否自己从应用程序代码中触发登录？

> 在我的应用权限配置中，我添加了“user_birthday”

**这些设置仅适用于[经过身份验证的推荐](https://developers.facebook.com/docs/opengraph/authentication/#referrals)人。**除非您的登录是由这些触发的，否则这些设置将无效。

如果您是自己触发登录，则必须通过`scope`参数请求权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:18:58.550

我认为您错过了一个事实，即 默认情况下，[权限范围](https://developers.facebook.com/docs/authentication/permissions/ "权限范围") 未在 facebook 的开发平台上设置。通常通过登录链接完成。

如果您希望每个用户都被提示某些权限，您需要启用“经过身份验证的推荐”，如此[处](https://developers.facebook.com/docs/opengraph/authentication/#referrals "这里")所述。

所有 SDK 都允许登录链接的范围参数。您可以使用范围参数手动将范围添加到每个链接，如下所示：

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
   &redirect_uri=YOUR_REDIRECT_URI
   &client_secret=YOUR_APP_SECRET
   &code=CODE_GENERATED_BY_FACEBOOK
   &scope=user_about_me,user_birthday 
```

# iphone - 如何在选择器中增加图像视图的大小？

> ID：12474711
> 
> 赞同：0
> 
> 时间：2012-09-18T10:01:50.113
> 
> 标签：iphone, ios, ipad

我有一个应用程序，其中有一个带有图像的选择器视图。我已经这样做了。

```
picker1=[[UIPickerView alloc] init];
        picker1.frame= CGRectMake(30,90,155,316);

        picker1.delegate = self;
        picker1.dataSource = self;
        picker1.showsSelectionIndicator = YES;

        picker1.tag = 1;
        [self.view addsubview:picker1]; 
```

我正在使用 viewForRow 委托方法来加载图像。我需要在 pickerview 中增加图像框架。`

```
UIImage *img = [UIImage imageNamed:[NSString stringWithFormat:@"%@.png",[self.array objectAtIndex:row]]];

    UIImageView *icon = [[UIImageView alloc] initWithImage:img];        
    //temp.frame = CGRectMake(170, 0, 30, 30);

    UIView *tmpView = [[[UIView alloc] initWithFrame:CGRectMake(155,75,95,35)] autorelease];
    [tmpView insertSubview:icon atIndex:0];
    picker1.backgroundColor = [UIColor clearColor];
    [(UIView*)[[picker1 subviews] objectAtIndex:2] setAlpha:0.0f];
    [(UIView*)[[picker1 subviews] objectAtIndex:0] setAlpha:0.0f];
    [(UIView*)[[picker1 subviews] objectAtIndex:1] setAlpha:0.0f];
    [(UIView*)[[picker1 subviews] objectAtIndex:3] setAlpha:0.0f];

    [tmpView setUserInteractionEnabled:NO];

    [tmpView setBackgroundColor:[UIColor clearColor]];
    [tmpView setTag:row];

    return tmpView; 
```

但是当我尝试增加视图的框架时，它的位置只会改变，而不是大小。有人可以帮我实现这一点吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-18T10:09:09.003

实现以下pickerview委托方法..

```
- (CGSize)rowSizeForComponent:(NSInteger)component{

    CGSize size = CGSizeMake(320, 60); //input ur custom size

   return size;

} 
```

# asp.net - ASP.NET MVC 3 如何验证下拉列表

> ID：12474714
> 
> 赞同：1
> 
> 时间：2012-09-18T10:02:09.490
> 
> 标签：asp.net, asp.net-mvc-3

我想验证生日选择部分的日期字段。我有一个下拉列表，其中列出了 1-31 天，默认值为“0”，文本为“Day”。代码如下：

```
 public IEnumerable<SelectListItems> Date = new List<SelectListItems>
    {
        new SelectListItems{Value = "0", Text = "Day", Default = true},
        new SelectListItems{Value = "1", Text = "1"},
        new SelectListItems{Value = "2", Text = "2"},
        new SelectListItems{Value = "3", Text = "3"},
        new SelectListItems{Value = "4", Text = "4"},
        new SelectListItems{Value = "5", Text = "5"},
        new SelectListItems{Value = "6", Text = "6"},
        new SelectListItems{Value = "7", Text = "7"},
        new SelectListItems{Value = "8", Text = "8"},
        new SelectListItems{Value = "9", Text = "9"},
        new SelectListItems{Value = "10", Text = "10"},
        new SelectListItems{Value = "11", Text = "11"},
        new SelectListItems{Value = "12", Text = "12"},
        new SelectListItems{Value = "13", Text = "13"},
        new SelectListItems{Value = "14", Text = "14"},
        new SelectListItems{Value = "15", Text = "15"},
        new SelectListItems{Value = "16", Text = "16"},
        new SelectListItems{Value = "17", Text = "17"},
        new SelectListItems{Value = "18", Text = "18"},
        new SelectListItems{Value = "19", Text = "19"},
        new SelectListItems{Value = "20", Text = "20"},
        new SelectListItems{Value = "21", Text = "21"},
        new SelectListItems{Value = "22", Text = "22"},
        new SelectListItems{Value = "23", Text = "23"},
        new SelectListItems{Value = "24", Text = "24"},
        new SelectListItems{Value = "25", Text = "25"},
        new SelectListItems{Value = "26", Text = "26"},
        new SelectListItems{Value = "27", Text = "27"},
        new SelectListItems{Value = "28", Text = "28"},
        new SelectListItems{Value = "29", Text = "29"},
        new SelectListItems{Value = "30", Text = "30"},
        new SelectListItems{Value = "31", Text = "31"}

    }; 
```

我的模型如下：

```
 public class PaxInfoViewModel
{
    public bool IsChild
    {
        get { return Age != null; }
    }

    [Required(ErrorMessage="Please select the born Month")]
    public int BirthYear1 { get; set; }
    [Range(2, 12, ErrorMessage="Please select the born Month")]
    public int BirthMonth { get; set; }
    [Required(ErrorMessage = "Please select the born Date")]
    [Range(2, int.MaxValue, ErrorMessage = "Please select the born Date")]
    public int BirthDate { get; set; }

} 
```

我的观点如下：

```
 <div class="row">
                    <div class="editor-label control-label">@Html.Label("Child " + i + " Birthday ")</div>
                    <div class="span1">@Html.DropDownListFor(m => Model.Rooms[roomCount - 1].Children[i - 1].BirthDate, new SelectList(Model.DropDown.Date, "Value", "Text"), new { @class = "mini" })</div>
                    <div class="span2">@Html.DropDownListFor(m => Model.Rooms[roomCount - 1].Children[i - 1].BirthMonth, new SelectList(Model.DropDown.Month, "Value", "Text"), new { @class = "small" })</div>
                     <div class="errorformat">@Html.ValidationMessageFor(m => Model.Rooms[roomCount - 1].Children[i - 1].BirthMonth)
                    @Html.ValidationMessageFor(m => Model.Rooms[roomCount - 1].Children[i - 1].BirthDate)
                 </div></div> 
```

此日期需要验证。用户必须选择默认值以外的值。我该怎么做。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:57:12.363

最后我想通了。ASP.NET MVC 3 不显眼的验证仅验证“输入”元素。

因此，我不得不对`jquery.validate.unobtrusive.js`代码进行一些更改。

**这是我所做的：**

在`jquery.validate.unobtrusive.js`文件中，在代码行 173（在我的文件中）附近，您可以找到此代码行 : `$(selector).find(":input[data-val=true]").each(function ()`，将其更改为：`$(selector).find("[data-val=true]").each(function ()`。

同样在第 289 行附近，您可以找到此代码行：`element = $(options.form).find(":input[name=" + fullOtherName + "]")[0]`，将其更改为：`element = $(options.form).find("[name=" + fullOtherName + "]")[0]`

在我的视图文件中，我将验证属性添加到下拉列表中，如下所示：

```
@Html.DropDownListFor(Yourmodelvariable, Yourlistitems, new Dictionary<string, object>() { { "data-val-range-min", "1" }, { "data-val-range-max", "31" }, { "data-val-range", "Please select the born Date" }, { "data-val", "true" }, { "class", "mini" } }) "

@Html.ValidationMessageFor(Yourmodelvariable) 
```

您可以根据需要添加验证属性（在我的情况下，我想验证一个范围），它对我来说就像松散的运动一样流畅！

# javascript - 如何从 Excel 文件中检索数据

> ID：12474720
> 
> 赞同：0
> 
> 时间：2012-09-18T10:02:19.957
> 
> 标签：javascript, sql, excel, jquery

如果文件中没有标题行，我们如何从 Excel 文件中获取特定值？在我的 Excel 文件中，前两行是空的。我需要 , 的`Row 10`值`Column F`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:44:43.933

如果您真的在 Javascript 中执行此操作，那么也许这就是您所需要的。

```
var excel=new ActiveXObject("Excel.Application");
var book=excel.Workbooks.Open("C:\my.xls");
var sheet=book.Sheets.Item(1);
var value=sheet.Range("F10"); 
```

虽然它是 ActiveX，但它只适用于 Internet Explorer。我从[http://social.msdn.microsoft.com/Forums/en/sidebargadfetdevelopment/thread/783724f0-526d-4c1d-a565-ebcdbca83cb8得到了这段代码](http://social.msdn.microsoft.com/Forums/en/sidebargadfetdevelopment/thread/783724f0-526d-4c1d-a565-ebcdbca83cb8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:56:05.173

如果您想从服务器访问 Excel 文件，您应该使用合适的 Excel 库。例如，在 ASP.NET 中使用[EPPlus 。](http://epplus.codeplex.com/)

# java - 将字符串变量从 java 传递给 php 函数

> ID：12474721
> 
> 赞同：6
> 
> 时间：2012-09-18T10:02:22.497
> 
> 标签：java, php, android

我是初学者 java 和 php 我必须使用 WebView 将字符串变量从 Java 客户端传递到 php 服务器

我做的对吗？

在java端：

```
String Coords=CoordsString;
String PHPPagePath="http://10.0.2.2/ReceiveLocation.php?Coords=" + CoordsString"; 
```

在 php 方面：ReceiveLocation.php

```
 <?php
include('ConnectionFunctions.php');
Connection(); 
$x=$_GET['Coords'];
GetCoords($x);
function GetCoords($x)
{
   echo $x;
}   
?> 
```

这是将参数 Coords 从 Java Client 传递到 PHP Server Function 的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:09:12.797

要使用页面的 URL 将参数传递给 PHP，只需附加`?key=value`到 URL，`key`参数键（即名称）和`value`它的值（即您尝试传输的数据）在哪里，然后在 PHP 脚本中您可以像这样检索参数：

```
<?php
    echo 'I have received this parameter: '.$_GET['key'];
?> 
```

替换`'key'`为参数的实际名称。

这是 PHP 读取 HTTP GET 变量的方式。有关更多信息，请参见：[http ://www.php.net/manual/en/reserved.variables.get.php](http://www.php.net/manual/en/reserved.variables.get.php)

请在接受来自外部的变量时小心：它们必须被“清理”，特别是如果它们将用于数据库查询或打印在 HTML 页面中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:15:57.020

修改您的代码如下

Java代码：

```
String Coords=CoordsString;
String PHPPagePath="http://10.0.2.2/ReceiveLocation.php?Coords=10"; 
```

PHP代码：

```
<?php
include('ConnectionFunctions.php');
Connection(); 

function GetCoords(x)
{
echo 'Coords = '.$_GET['Coords'];

}   
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T10:16:41.253

如果您使用方法发送参数，请使用`$_GET['parameter_name']`in`PHP``GET`

或者

如果您使用方法发送参数，请使用`$_POST['parameter_name']`in`PHP``POST`

`$_REQUEST`如果您使用 POST 或 GET 发送参数，它的替代方法也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T10:17:57.703

在 Java 方面，您必须提出请求。由于这是 http，因此您应该使用[httpclient 之](http://hc.apache.org/httpclient-3.x/tutorial.html)类的库。您的请求将包含如下数据：

```
HttpClient client = new HttpClient();
PostMethod method = new PostMethod("http://10.0.2.2/ReceiveLocation.php");
method.addParamezter("Coord","1x3x4"); // or whatever
int statusCode = client.executeMethod(method); 
```

在 httpclient 端学习教程。

在 PHP 方面，你必须阅读发布的数据......

现在我发现这对你有帮助：http: [//www.coderblog.de/sending-data-from-java-to-php-via-a-post-request/](http://www.coderblog.de/sending-data-from-java-to-php-via-a-post-request/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-07T23:59:05.590

> 这个技巧是在 php 中处理 java 变量!!!'

```
<?php
$java_variable_in_php = 'string'; //Define our  variable.  
?>          
 <script> js_variable_name = "<?php echo $java_variable_in_php; ?>";
 string=' this is my trick to process java variable in php !!!';
 document.write(js_variable_name);//will print java variable name 'string'
 </script>

<?php echo '<script>document.write(js_variable_name)</script>';?>
<?php echo '<script>document.write('.$java_variable_in_php.')'.'</script>';?> 
```

> 检查输出的查看源！希望这会帮助某人...

# java - java类的大小会影响应用程序的性能吗

> ID：12474722
> 
> 赞同：6
> 
> 时间：2012-09-18T10:02:24.203
> 
> 标签：java, performance, swing, jtable, tablecelleditor

我正在做一个基于摇摆的应用程序，我使用`JTable`. 我用于`DefaultCellEditor`需要组合框选择的列之一。但是`DefaultCellEditor`有很多我不需要的方法。`AbstractCellEditor`因此，我通过扩展仅实现所需方法的位置来编写自定义 CellEditor 。我的问题是

（一般来说）如果我们有一个类并且如果我们不需要该类的所有方法是可以使用它还是编写一个只实现我们需要的那些方法的自定义类是好的？和

通过使用自定义类，应用程序的性能（内存方面）会得到改善还是与具有所有方法的类保持一致？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-18T10:09:25.387

除非您有充分的理由相信应用程序中没有其他任何东西（包括 JDK 本身使用），否则`DefaultCellEditor,`您几乎肯定会通过使事情变得更糟来浪费您的时间。

您还需要考虑在极端情况下您可能节省了大约 100k 的代码，典型的 JVMS 使用大约 1 GB 来执行。因此，您可能节省了 0.01% 的代码空间。这不是对您时间的有效利用。正确的程序是在事后测试和测量时间和空间瓶颈的真正位置。程序员在预测这些事情方面是出了名的差。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T10:15:21.857

这个类的代码（实际的字节码）只加载一次，在内存的 PermGen 区域中，不管你实例化了多少这个类型的对象。

我不会接受此代码，因为您正在复制已经可用的功能，并且您没有向 中添加功能`AbstractCellEditor`，您正在重新实现`DefaultCellEditor`已经（希望）由 Oracle（或 Sun）测试的代码。

正如 EJP 所说，不值得花时间和可能引入错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T10:17:13.917

如果您创建一个包含较少成员对象的自定义类，那么内存占用会更低。方法的数量不会影响对象的大小，只会影响类的大小。

In general, I would not prematurely optimise unless you determine that you actually have a problem (i.e. if you have thousands of instances of the object and heap/garbage collector log analysis reveals that you're thrashing the memory and/or have frequent of collections of the old space), because additional code means:

*   Additional maintenance (you'd need to ensure that your custom `CellEditor` is not buggy)
*   Additional effort in writing the custom code
*   Additional effort in testing the custom code

AFAIK, a `CellEditor` is instantiated as and when needed, so you wouldn't save much memory anyway.

# android - 单击删除特定记录

> ID：12474725
> 
> 赞同：1
> 
> 时间：2012-09-18T10:02:49.297
> 
> 标签：android

朋友们，我有一个包含一系列活动的文件。执行操作后，新数据将添加到文件（txt 文件）中。
当在我显示活动列表的列表视图中启动特定活动时。请参阅图像。单击按钮时，我希望删除该特定条目并将记录修改到 txt 文件中。请与我分享相同的代码。

提前致谢 ：）

![在此处输入图像描述](../Images/34b915ba59d53d334766916149d91b12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:19:39.013

获取按钮单击的位置.. 使用此位置从数据持有者中删除该特定项目..

```
yourdataHolder.remove(position); 
```

然后最后通知列表视图中的更改，使用`notifyDataSetChanged();`

如果您仍然有问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:41:05.270

1.  尝试这个

    ```
     delete.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                // adapter is object of adapter
                                // dataList is arrayList
                                // variable for listview

                                  listview.invalidateViews()
                adapter.remove(dataList.get(position));
                                adapter.notifyDataSetChanged();

            }
        }); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:42:34.267

获取项目点击的位置，从适配器中移除项目。并通知数据更改给适配器。

# iframe - 如何在 Dot net nuke 中的 IFrame 中加载横幅模块

> ID：12474726
> 
> 赞同：2
> 
> 时间：2012-09-18T10:02:56.443
> 
> 标签：iframe, dotnetnuke, dotnetnuke-5, dotnetnuke-module

我是 dot net nuke 的新手，我正在寻找一种在 iframe 中加载横幅模块的方法。

如何弄清楚这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:01:26.843

模块不会加载到 iFrame 或 HTML 模块中。通常，您将拥有一个具有您想要的特定功能的模块，然后将其放置在站点的内容部分中。在 DNN 的情况下，有一个横幅模块。您可以在视频中看到一些使用它的提示。

[http://www.youtube.com/watch?v=iRzrTgUH8Hk](http://www.youtube.com/watch?v=iRzrTgUH8Hk)

# c# - 在 web.configs 中转义引号和 @

> ID：12474728
> 
> 赞同：1
> 
> 时间：2012-09-18T10:03:03.593
> 
> 标签：c#, web-config

嗨，我正在尝试从 web.config 中获取以下信息

@"首席\亚当";

并将按如下方式使用它：

```
var queuePath = @"Chief\adama"; 
```

目前我有：

```
 <add key="AdamaPath" value="@Chief\adama" /> 
```

实际上只有主要部分会改变，我尝试了以下方法：

网络配置：

```
<add key="AdamaPath" value="Chief" /> 
```

。CS：

```
var machine = ConfigurationManager.AppSettings["AdamaPath"];
var queuePath = "@" + "\"" + machine + "\adama" + "\""; 
```

但我得到：“@\”Chief\adama\“”

我也试过：

```
 <add key="AdamaPath" value="@ &quot; Chief\adama &quot;" /> 
```

这也得到：

"@\" 酋长\adama \""

谁能让我知道如何摆脱多余的“和\谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:10:37.210

我认为您可能会将转义字符与实际字符串字符混淆。如果您只想从`web.config`do 中提取值：

```
var machine = ConfigurationMananger.AppSettings["AdamaPath"];
var queuePath = String.Format("{0}{1}adama", machine, Path.DirectorySeparatorChar); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:10:40.720

以下可能是您所需要的：

```
<add key="AdamaPath" value="Chief" />

var machine = ConfigurationManager.AppSettings["AdamaPath"];
var queuePath = machine + "\\adama"; 
```

以上将产生一个包含 的字符串`Chief\adama`，这似乎是您需要的。

表示逐字字符串文字（在`@`字符串文字之前） - 您正在构建*包含*this 的字符串，因为它是 C# 功能并且需要在字符串*文字**之前*，所以它不能工作。

# javascript - Javascript 多子数组

> ID：12474730
> 
> 赞同：1
> 
> 时间：2012-09-18T10:03:07.447
> 
> 标签：javascript

我有一个生成动态子数组的 javascript 代码。

```
function createArray() {

    var myArr = new Object();
    myArr[0] = createSubArray('apple');
    myArr[1] = createSubArray('Mango');
    myArr[2] = createSubArray('Pineapple');
    myArr[3] = createSubArray('Grape');
    document.getElementById("a").innerHTML = JSON.stringify(myArr);
    return myArr;

}

function createSubArray(name){
    var arr = new Object();
    elems = document.getElementsByName(name);
    for (var i=0;i<elems.length;i++){
        if (elems[i].checked){
            arr[name] =  elems[i].value;
            arr['price'] =  elems[i].getAttribute('data-price');
        }
    }
    return arr;

} 
```

我得到如下输出

```
array
  0 => 
    array
      'apple' => string 'light' (length=5)
      'price' => string '10' (length=2)
  1 => 
    array
      'apple' => string 'light1' (length=5)
      'price' => string '10' (length=2)
  2 => 
    array
      'Mango' => string 'dark' (length=4)
      'price' => string '40' (length=2)
  3 => 
    array
      'Pineapple' => string 'dark' (length=4)
      'price' => string '60' (length=2)
  4 => 
    array
      'Grape' => string 'dark' (length=4)
      'price' => string '80' (length=2) 
```

但我需要排列如下

```
array
  0 => 
    array
      'apple' => string 'light' (length=5)
       0 => 
           array
            'apple' => string 'light' (length=5)
            'price' => string '10' (length=2)
       1 => 
           array
            'apple' => string 'light1' (length=5)
            'price' => string '10' (length=2)
  1 => 
    array
      'Mango' => string 'light' (length=5)
       0 => 
           array
            'Mango' => string 'light' (length=5)
            'price' => string '10' (length=2)
  2 => 
    array
      'Pineapple' => string 'light' (length=5)
       0 => 
           array
            'Pineapple' => string 'light' (length=5)
            'price' => string '10' (length=2) 
```

所以我改变了这样的javascript

```
function createArray()
{
    var myArr = new Object();
    var _tempa = new Array();
    var elems = document.getElementsByTagName("input");
     for (var i=0;i<elems.length;i++)
     {  if (elems[i].checked){
         _tempa.push(elems[i].getAttribute('name'));
            myArr[i] = createSubArray1(_tempa);
          }
      }
     document.getElementById("a").innerHTML = JSON.stringify(myArr);
    return myArr;
} 

function createSubArray1(namearr){

    var arr1 = new Object();
    for (var j=0;i<namearr.length;j++){
    var elems = document.getElementsByName(name[j]);
    for (var i=0;i<elems.length;i++){
        if (elems[i].checked)
        {
        arr1[elems[i].getAttribute('data-gpname')] =  createSubArray(elems[i].getAttribute('name'));
        }
    }
    }
    return arr1;
}

 function createSubArray(name){
    var arr = new Object();
    var elems = document.getElementsByName(name);
    for (var i=0;i<elems.length;i++){
        if (elems[i].checked)
        {
        arr['productname'] =  elems[i].value;
        arr['price'] =  elems[i].getAttribute('data-price');
        }
    }
    return arr;
} 
```

在此之后，我得到如下输出

```
[{},{}] 
```

我的 HTML 在下面

```
<form method="post">
Apple
<input type="radio" onclick="createArray()" id="one" name="apple" data-gpname="apple" data-price="10" value="light"/> Light
<input type="radio" onclick="createArray()" id="two" name="apple" data-gpname="apple" data-price="20" value="dark" /> Dark
<input type="radio" onclick="createArray()" id="one1" name="apple1" data-gpname="apple"  data-price="120" value="light2"/> Light11
<input type="radio" onclick="createArray()" id="two1" name="apple1" data-gpname="apple" data-price="210" value="dark1" /> Dark22
<input type="text" id="appleqty" name="appleqty" value="" />
<br>
Mango
<input type="radio" onclick="createArray()" id="three" name="Mango" data-gpname="Mango"  data-price="30" value="light"/> Light
<input type="radio" onclick="createArray()" id="one" name="Mango" data-gpname="Mango" data-price="40" value="dark" /> Dark
<input type="text" id="Mangoqty" name="Mangoqty" value="" />
<br>
Pine Apple
<input type="radio" onclick="createArray()" id="four" name="Pineapple" data-gpname="Pineapple" data-price="50" value="light"/> Light
<input type="radio" onclick="createArray()" id="five" name="Pineapple" data-gpname="Pineapple" data-price="60" value="dark" /> Dark
<input type="text" id="Pineappleqty" name="Pineappleqty" value="" />
<br>
Grape
<input type="radio" onclick="createArray()" id="six" name="Grape" data-gpname="Grape" data-price="70" value="light"/> Light
<input type="radio" onclick="createArray()" id="seven" name="Grape" data-gpname="Grape" data-price="80" value="dark" /> Dark
<input type="text" id="Pineappleqty" name="Pineappleqty" value="" />

<textarea name="a" id="a" cols="50"></textarea>
<input type="submit" name="se" value="se" />
</form> 
```

我已经习惯于`php json_decode`获取数组结构

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:48:53.827

**使用 Textarea 中的输出更新了演示**：http : [//jsfiddle.net/zZxaR/13/](http://jsfiddle.net/zZxaR/13/)

**注意**：添加了一些方法来在控制台中漂亮地打印数组

**免责声明**：使用一点 jQuery 使遍历更容易。无需使用也可以轻松完成。

**代码**：

```
function createArray() {
    var myArray = [], i = 0, temp;
    while(i < 4) myArray[i++] = [];
    myArray[0]['apple'] = '';
    myArray[1]['mango'] = '';
    myArray[2]['grape'] = '';
    myArray[3]['pineapple'] = '';

    $('input[data-gpname]:checked').each(function() {
        var gp = $(this).attr('data-gpname').toLowerCase();
        for(i = 0; i < 4; i++) {
            if(myArray[i][gp] != undefined) {
                myArray[i][gp] = $(this).attr('value');
                temp = [];
                temp[gp] = $(this).attr('value');
                temp['price'] = $('#' + gp + 'qty').val();
                myArray[i].push(temp);
            }
        }
    });

    console.log(myArray);
    prettyPrint(myArray);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T08:44:39.130

希望[这](http://jsbin.com/ugusab/12)会对你有所帮助。输出与您在[此处](https://chat.stackoverflow.com/transcript/message/5451353#5451353)所说的相同。

这个页面的来源在[这里](http://jsbin.com/ugusab/1/edit#/ugusab/12/edit)。

我根据您的评论制作了另一个[样本。](http://jsbin.com/ugusab/12/edit#/ugusab/16/edit)试试这个，让我知道。

HTML：

```
<form method="post" id="myform">
Apple
<input type="radio" onclick="constructJSON(this.name)" id="one" name="apple" data-gpname="apple" data-price="10" value="light"/> Light
<input type="radio" onclick="constructJSON(this.name)" id="two" name="apple" data-gpname="apple" data-price="20" value="dark" /> Dark
<input type="radio" onclick="constructJSON(this.name)" id="one1" name="apple1" data-gpname="apple"  data-price="120" value="light2"/> Light11
<input type="radio" onclick="constructJSON(this.name)" id="two1" name="apple1" data-gpname="apple" data-price="210" value="dark1" /> Dark22
<input type="text" id="appleqty" name="appleqty" value="" />
<br>
Mango
<input type="radio" onclick="constructJSON(this.name)" id="three" name="Mango" data-gpname="Mango"  data-price="30" value="light"/> Light
<input type="radio" onclick="constructJSON(this.name)" id="one" name="Mango" data-gpname="Mango" data-price="40" value="dark" /> Dark
<input type="text" id="Mangoqty" name="Mangoqty" value="" />
<br>
Pine Apple
<input type="radio" onclick="constructJSON(this.name)" id="four" name="Pineapple" data-gpname="Pineapple" data-price="50" value="light"/> Light
<input type="radio" onclick="constructJSON(this.name)" id="five" name="Pineapple" data-gpname="Pineapple" data-price="60" value="dark" /> Dark
<input type="text" id="Pineappleqty" name="Pineappleqty" value="" />
<br>
Grape
<input type="radio" onclick="constructJSON(this.name)" id="six" name="Grape" data-gpname="Grape" data-price="70" value="light"/> Light
<input type="radio" onclick="constructJSON(this.name)" id="seven" name="Grape" data-gpname="Grape" data-price="80" value="dark" /> Dark
<input type="text" id="Pineappleqty" name="Pineappleqty" value="" />

<textarea name="a" id="a" cols="50"></textarea>
<input type="submit" name="se" value="se" />

</form> 
```

脚本：

```
var rgArray = [];
function constructJSON(name)
{
  rgArray.push(name);
  var myArray = {};
  var productData = {};
  productData['products'] = createArray();
  $("#a").html(JSON.stringify(productData));
}

function createArray(){
  var group = {};
  var product;
  var data;
  var hasValue = false;
  $rgArray = $(rgArray);
  $.each($rgArray, function(i, gp){
    product = {};
    var el = "input[data-gpname='"+gp+"']";
    $el = $(el);
    hasValue = false;
    $.each($el, function(i, item){

      if(item.checked){
          data = {};
          data.name = $(item).val();
          data.price = $(item).attr("data-price");

          hasValue = true;
          product[$(item).attr("name")] = data;
        }
    });
    if(hasValue) group[gp] = product;
  });
  return group;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T06:38:21.950

对于多子数组，我在[这里创建了一个](http://jsbin.com/ugusab/1/edit)[示例](http://jsbin.com/ugusab/1)和代码

贝娄仅供参考：

在 jQuery 表单中，[序列化数组](http://api.jquery.com/serializeArray/)函数用于以数组格式打印/显示值。

```
$('form').submit(function() {
  console.log($(this).serializeArray());
  return false;
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T07:08:47.297

试试这个代码我刚刚编辑了一点

```
function createSubArray(name){
    var arr = [];

    elems = document.getElementsByName(name);
    for (var i=0;i<elems.length;i++){
        if (elems[i].checked){
            var o = {}
            o[name] =  elems[i].value;
            o['price'] =  elems[i].getAttribute('data-price');
            arr.push(o);
        }
    }
    return arr;

}
function createArray() {

    var myArr = [];
    myArr[0] = createSubArray('apple');
    myArr[1] = createSubArray('Mango');
    myArr[2] = createSubArray('Pineapple');
    myArr[3] = createSubArray('Grape');
    document.getElementById("a").innerHTML = JSON.stringify(myArr);
    return myArr;
} 
```

早些时候你从`createSubArray`方法中返回了一个对象，我认为这是
我编辑它以返回一个包含所有对象的数组的错误

这是我得到的 JSON 字符串

```
[
    [
        {
            "apple": "light",
            "price": "10"
        },
        {
            "apple": "dark",
            "price": "20"
        }
    ],
    [
        {
            "Mango": "light",
            "price": "30"
        },
        {
            "Mango": "dark",
            "price": "40"
        }
    ],
    [
        {
            "Pineapple": "light",
            "price": "50"
        },
        {
            "Pineapple": "dark",
            "price": "60"
        }
    ],
    [
        {
            "Grape": "light",
            "price": "70"
        },
        {
            "Grape": "dark",
            "price": "80"
        }
    ]
] 
```

# mercurial - 从 HG Outgoing 中删除文件

> ID：12474731
> 
> 赞同：1
> 
> 时间：2012-09-18T10:03:08.397
> 
> 标签：mercurial

当我运行时，`hg outgoing -v`我会看到传出的变更集及其包含的所有文件。我忘记将 Mercurial 设置为忽略图像，并且我意识到我的传出包含图像。我想从传出中删除所有 .jpg 文件。

我`hg commit`在添加图像之后又做了一个，所以`hg rollback`似乎不是一个选择。我试过运行`hg push`，但我中止了，因为完成时间太长（因为图像）。我可以在不重新启动存储库的情况下解决此问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:16:02.793

是的。在您的情况下，最简单的方法可能是：

1.  不要恐慌。如果出现任何问题，请再次尝试以下步骤 :-)
2.  在本地克隆您的存储库（只需将损坏的版本用作“url”）并用于`-r`获取除您不想要的提交之外的所有内容。你可以`hg log`在新的 repo 上使用来确保你拥有你想要的东西。
3.  确保图像没有被提交 -> 编辑`.hgignore`等。
4.  承诺
5.  导出最后一次提交（使用`hg export -r ...`）并将其应用于“好”克隆（`hg import`）
6.  将损坏的 repo 移到其他地方（以防万一您仍然需要它）
7.  继续处理新的、干净的副本。您可能需要再次添加默认推送路径`hgrc`。只需比较`.hg/hgrc`损坏的和良好的回购文件的内容即可。

# python - Python NOOP 替换

> ID：12474738
> 
> 赞同：6
> 
> 时间：2012-09-18T10:03:47.597
> 
> 标签：python, python-2.7, comments, noop

我经常需要临时注释一些代码，但是有像下面这样的情况，注释一行代码会出现语法错误

```
if state == False:
    print "Here I'm not good do stuff"
else:
#    print "I am good here but stuff might be needed to implement" 
```

有没有什么东西可以作为 NOOP 来保持这种语法正确？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T10:24:49.100

您要查找的操作是`pass`. 因此，在您的示例中，它看起来像这样：

```
if state == False:
    print "Here I'm not good do stuff"
else:
    pass
#    print "I am good here but stuff might be needed to implement" 
```

你可以在这里阅读更多关于它的信息：http: [//docs.python.org/py3k/reference/simple_stmts.html#pass](http://docs.python.org/py3k/reference/simple_stmts.html#pass)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-08T11:23:49.610

在 Python 3 中，`...`它是一个很好的`pass`替代品：

```
class X:
    ...

def x():
    ...

if x:
    ... 
```

我把它读作“待完成”，而`pass`意思是“这个页面故意留白”。

它实际上只是一个字面量，很像和`None`，但它们的优化都是一样的。`True``False`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-18T10:03:47.597

我发现如果你把代码`'''comment'''`放在三重引号的注释中，它就像一个 NOOP，所以你可以把一个三重引号的注释放在一个 NOOP 中，以防代码被删除或用`#`.

对于上述情况：

```
if state == False:
    '''this comment act as NOP'''
    print "Here I'm not good do stuff"
else:
    '''this comment act as NOP and also leaves the 
    else branch visible for future implementation say a report or something'''
#    print "I am good here but stuff might be needed to implement" 
```

# xml - 在进行正则表达式搜索和替换时跳过 XML 内容

> ID：12474742
> 
> 赞同：0
> 
> 时间：2012-09-18T10:03:54.390
> 
> 标签：xml, regex, full-text-search, xsd, search-engine

我有一个xml字符串如下

```
<root>
    <A id="1">This is an example</A>
    <B id="2">
            <C id="3">this is tag c</C>
    </B>
    <D id="4">this is tag d</D>
    <E id="5">
            <F id="6">this is tag f</F>
            <G id="7">this is tag g</G>
               .
               .
               .
    </E>
</root> 
```

在这里，我只想搜索单词`tag`并使用正则表达式（正则表达式）替换它`Xml Tag`，我不想在元素内搜索该单词，`<E>...</E>`即我想`<E>...</E>`在搜索和替换时跳过元素。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T16:24:24.477

执行此操作的最简单方法因您的环境和您的意思而异，确切地说是说您想跳过元素 E。在 XSLT 或 XQuery 中，这是一种在 E 元素之外的任何位置查找与正则表达式匹配的文本节点的简单方法将会

```
//text()[not(ancestor::E)][matches(.,'tag')] 
```

在其他环境中，做类似的事情可能方便也可能不方便。

请注意，如果“跳过元素 E”意味着您想要表单的内容

```
<A>This is a tricky example
   of the word t<E>hi, mom!</E>ag.</A> 
```

要返回搜索“标签”的成功，那么您将需要一个更复杂的解决方案。

# sql-server - 如何在 SQL Server 2005 (andika) 中转换日期

> ID：12474746
> 
> 赞同：1
> 
> 时间：2012-09-18T10:04:06.553
> 
> 标签：sql-server, sql-server-2005, datetime

我的数据库中有一个表，其中有一列我想从 更改`varchar`为`datetime`。

在我的数据库中，该`tgl_lahir`列包含以下格式的数据：`1969-10-30 00:00:00`

```
SELECT convert (datetime, substring(tgl_lahir, 9, 2)
               +(substring(tgl_lahir, 6, 2) )
               + (left(tgl_lahir, 4)))
from penduduk 
```

谁能帮我 ？

我收到以下错误消息：

> 消息 242，级别 16，状态 3，第 2 行
> 将 char 数据类型转换为 datetime 数据类型导致超出范围的 datetime 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:08:19.283

看起来您正在指定月-日-年。SQL 可能期望日月年。你还需要破折号，像这样：

```
 (datetime,(substring(tgl_lahir,6,2))+'-'+substring(tgl_lahir,9,2)+'-'+(left(tgl_lahir,4))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:25:03.723

尝试

```
Select CONVERT (datetime,tgl_lahir,120) from penduduk 
```

# grails - 如何将选中的复选框值从 GSP 获取到 java 脚本

> ID：12474748
> 
> 赞同：0
> 
> 时间：2012-09-18T10:04:09.163
> 
> 标签：grails, gsp

嗨，我是 grails 和 GSP 的新手

我有一个类似的代码

```
<g:each var="i" in="${typeList}">
    <g:if test="${i != null}">
        <tr>
        <td><input type="checkbox" name="categoryType" id="categoryTypeCB" class="categoryTypeCB" value="${i}">&nbsp;${i}</td>
        </tr>
    </g:if>

</g:each> 
```

如何在java脚本中获取选中复选框的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:34:01.083

尝试使用 jQuery。由于 Grails 2.0 是默认提供的，因此您只需在 head 标签末尾添加 gsp 模板，并使用以下行：

```
<r:require module="jquery" /> 
```

或者，如果您不使用资源插件，请使用以下行包含 jQuery：

```
<g:javascript library='jquery' /> 
```

然后在一个javascript块中使用：

```
<g:javascript>    
    var checkedCheckboxes = $('.categoryTypeCB:checked');

    $.each(checkedCheckboxes, function(index, checkbox) {
        var theValue = checkbox.value;
    });
</g:javascript> 
```

每个功能都是一个循环，因此您需要以某种方式处理*每次*迭代的“theValue”。如果需要，复选框*参数*包含*输入元素本身。*

顺便提一句。您不应该为许多输入分配相同的 id。这是不正确的。对于文档树中的每个 HTML 元素，ID 必须是唯一的。

# testing - SoundCloud 测试 - 测试样品？

> ID：12474749
> 
> 赞同：1
> 
> 时间：2012-09-18T10:04:11.970
> 
> 标签：testing, soundcloud

我可以在不破坏任何下载限制的情况下下载 SoundCloud 测试曲目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:24:26.163

一般来说，拥有 Solo、Pro 或 Pro Plus 帐户的用户上传的曲目没有下载限制（当然，如果上传者启用了该曲目的下载）。[1](http://soundcloud.com/premium)

# ms-access - 如何在 MSAccess 应用程序中保持表单最大化

> ID：12474750
> 
> 赞同：0
> 
> 时间：2012-09-18T10:04:11.227
> 
> 标签：ms-access, ms-access-2010

我有一个包含大约 40 个屏幕的应用程序，它们都可以按各种顺序调用。

我在每个表单的 OnActivate 函数上都有 DoCmd.Maximize，但是当您关闭位于前台的表单时，它后面的表单又回到了它的“设计”大小。然后，当您单击表单时，它会激活它并使其运行 DoCmd.Maximize 代码。

如何让整个应用程序全屏运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:57:08.093

在 Access 2010 中，您可以使用 File->Options->Document Windows Options->Tabbed Documents，您可以将表单的大小设置为允许的最大值并取消自动调整大小，也可以在关闭按钮中添加代码以最大化下一个表格。

```
Forms(Forms.Count - 2).SetFocus
DoCmd.Maximize 
```

Forms.Count -1 是当前表格，-2 是后面的表格。

# interface-builder - 在 IB 中设置自定义类在 Xcode 4.5 中不起作用吗？

> ID：12474754
> 
> 赞同：2
> 
> 时间：2012-09-18T10:04:20.487
> 
> 标签：interface-builder, xcode4.5

我有一个名为 的按钮类`BFToggleButton`，派生自`UIButton`. 在我的 xib 文件中，我拖动了一个 `UIButton`，将其自定义类更改为`BFToggleButton`. 在 IB 的对象部分中，我将此按钮视为`Toggle Button - Button`.

`UIButton`但是，在代码中，当我调用`BFToggleButton`一个不在`UIButton`.

所以这给我的印象是在 Xcode 4.5 中设置自定义类可能存在问题。因为如果我没有遗漏任何东西，根据我对以前 XCodes 的经验，这应该可以工作。

你有过同样的经历吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:29:31.553

似乎问题出在班级的**目标会员资格上。**`BFToggleButton`我右键单击此类并选择 Show File Inspector 并看到未选中 Target Membership 复选框，这就是界面构建器无法识别此类的原因。

# javascript - Expressjs护照本地无法注销

> ID：12474755
> 
> 赞同：5
> 
> 时间：2012-09-18T10:04:23.413
> 
> 标签：javascript, jquery, node.js, authentication, express

我将应用程序护照本地复制粘贴到我的应用程序上，

有趣的是我可以登录用户，但我不能让他们注销，

```
app.get('/logout', function(req, res){
  req.logout();
  res.redirect('/');
}); 
```

这不是什么都不做，日志文件上什么都没有，而且我有一个指向 /logout 的链接

这是主要路线示例

```
app.get('/page1', function(req, res){                                                                                                                       
  res.render('page1', {user: req.user});
});

app.get('*', function(req,res){
  res.render('root', {user: req.user});
}); 
```

为什么注销它不起作用？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-18T17:15:12.810

显然这是一个已知问题：

[为什么 Node 中的 PassportJS 不会在注销时删除会话](https://stackoverflow.com/questions/13758207/why-is-passportjs-in-node-not-removing-session-on-logout)

上面提到的线程建议`req.session.destroy()`改用。

如果能直接从 Passport 团队获得一些反馈，那就太好了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-11T21:32:37.263

这仍然是一个问题。

我所做的是`req.session.destroy(function (err) {});`在他们注销时在服务器端和客户端使用：

```
const logout = () => {
    const url = '/users/logout'
    fetch(url)
    setTimeout(function () {
      location.reload();    }, 500); 
```

这样，当刷新页面时，用户就没有会话。如果没有人通过身份验证，请确保您重定向到正确的页面。

也许不是最好的方法，但它确实有效。

# java - 如何使用 Rete 算法

> ID：12474769
> 
> 赞同：6
> 
> 时间：2012-09-18T10:05:43.803
> 
> 标签：java, algorithm, rete

如何在 Java 中使用 Rete 算法？

我需要编写自己的算法实现吗？

或者是否已经实现了可用的库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-08T02:48:07.730

所以这是一个很老的问题，但是如果你在谷歌上搜索 Rete 实现，那么排名很高，所以我会在这里留下一些信息。

[维基百科条目](http://en.wikipedia.org/wiki/Rete_algorithm)非常好，这是一篇关于 Rete/UL 的论文，根据 Doorenbos 的说法，它比 ReteII [Doorenbos, 1995](http://reports-archive.adm.cs.cmu.edu/anon/1995/CMU-CS-95-113.pdf)更有效。

一些实现包括：

*   [java](http://www.drools.org/)的流口水
*   [杰斯](http://www.jessrules.com/jess/)也是java
*   [Wongi-Engine](https://github.com/ulfurinn/wongi-engine) for ruby​​（我用这个）基于上面列出的同一篇论文。
*   [Ruleby](https://github.com/Ruleby/ruleby)也是红宝石，但已失效
*   [米尔米尔克洛朱](https://github.com/hraberg/mimir)尔
*   [克拉拉规则](https://github.com/rbrush/clara-rules)也 clojure（2015 年 4 月 20 日添加）
*   [Rete for Triples](https://github.com/rururu/rete) clojure（可能已经不存在了？）
*   [kongra 的 Rete](https://github.com/kongra/Rete) haskell (wow) 基于上面列出的同一篇论文。
*   [所有这些](https://github.com/search?utf8=%E2%9C%93&q=rete&type=Repositories&ref=searchresults)

如果您需要根据事实的模式做出决策，它是一个非常有用的算法，而且作为奖励，您必须学习一些关于图形和模式匹配的很酷的东西。

希望这有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T10:13:40.123

一个简单的谷歌搜索“Rete Algorithm Java”显示了这个结果（等等）：http: [//java-source.net/open-source/rule-engines](http://java-source.net/open-source/rule-engines)。

第一个条目是：*Drools 是 Java 的面向对象的规则引擎。Drools 是为 Java 语言量身定制的 Forgy 的 Rete 算法的增强实现。*

所以答案似乎是：是的，已经有一个库可以实现您正在寻找的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:57:07.877

[请参阅Rete Algorithm](http://en.wikipedia.org/wiki/Rete_algorithm#References)的 Wikipedia 条目上的参考部分，它包含 Pascal 和 LISP (?) 样式语言的代码片段——不过，它与 C 完全不同。

干杯，

# powershell - If cmdlet changes current directory, how to revert it back?

> ID：12474771
> 
> 赞同：3
> 
> 时间：2012-09-18T10:05:52.930
> 
> 标签：powershell

One of Azure cmdlets, namely `New-AzureServiceProject`, changes the current directory upon its completion (maybe a bug?).

For further lines in my script to work, I need to roll back this change, what's the best way to do it? Calling "cd", if I'm not wrong, would affect the current working dir if my scipt was called from some other directory. So maybe I should use `Push-Location` / `Pop-Location` somehow? Or is there a way to prevent 3rd party cmdlets from changing the current location?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T13:54:19.097

The usual way to handle this is to `Push-Location` before calling the cmdlet that changes dir and then call `Pop-Location` afterwards. AFAIK there is no way to prevent a cmdlet from changing the directory short of temporarily redefining cd or overriding Set-Location with a proxy function. Then again, the cmdlet may be using .NET methods to change the directory so even a proxy function may not be foolproof.

# jquery - Jquery：如何创建缩略图寻呼机？

> ID：12474772
> 
> 赞同：-1
> 
> 时间：2012-09-18T10:05:53.980
> 
> 标签：jquery, jquery-ui

我希望创建一个缩略图寻呼机，就像在 msn 上使用的那样，但不确定调用什么控件或功能。有谁知道如何创建这个？

谢谢![这是控制](../Images/8e77ea97368d38664dd8074256c23994.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-18T10:07:43.017

互联网上有很多相关的jquery插件[http://www.1stwebdesigner.com/css/fresh-jquery-image-gallery-display-solutions/](http://www.1stwebdesigner.com/css/fresh-jquery-image-gallery-display-solutions/)

# javascript - Javascript以键值形式存储值

> ID：12474774
> 
> 赞同：4
> 
> 时间：2012-09-18T10:06:01.983
> 
> 标签：javascript, jquery

我想在javascript中存储像键和值对这样的值

到目前为止，我正在这样做

```
var list_of_addressbook_entries = {};

list_of_addressbook_entries.guest_name = name ;

for(key in list_of_addressbook_entries)
{
  alert("key " + key
  + " has value "
  + list_of_addressbook_entries[key]);
} 
```

在上面的代码中，guest_name 是一个变量，其值来自 onclick
，所以当我执行上述操作时，它会向我显示结果

```
 key guest_name has value M 
```

它没有打印 guest_name 的值

我想要这样的结果

```
key guest_name_variable value  has key M 
```

请建议我在这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:12:07.957

如果我理解正确，您需要使用括号 [] 语法，否则它不会被解释为变量：

`list_of_addressbook_entries[guest_name] = name ;`

# android - Android - Settings.ACTION_DEVICE_INFO_SETTINGS 在 android 4.1.1 上崩溃

> ID：12474777
> 
> 赞同：3
> 
> 时间：2012-09-18T10:06:10.053
> 
> 标签：android, android-intent, android-activity

我有一个应用程序，用户可以在我的应用程序中单击某些按钮，它将从 Android 向用户启动特定的设置页面。我使用他们网站上的 android API [http://developer.android.com/reference/android/provider/Settings.html](http://developer.android.com/reference/android/provider/Settings.html)

```
Intent intent = new Intent(Settings.ACTION_SECURITY_SETTINGS);  
                    currentContext.startActivity(intent);

Intent intent = new Intent(Settings.ACTION_DISPLAY_SETTINGS);   
                    currentContext.startActivity(intent); 
```

这些是我的应用程序将打开的一些设置页面。到目前为止，我从我的应用程序启动这两个意图没有问题。但是，当我尝试使用以下代码启动“关于平板电脑”页面时，设置过程会崩溃。

```
Intent intent = new Intent(Settings.ACTION_DEVICE_INFO_SETTINGS);   
                    currentContext.startActivity(intent); 
```

它在 android 4.1.1 上崩溃，但在 android 3.2 上运行良好。我还是 Android 的新手，我不知道它为什么会崩溃。我也是 StackOverflow 的新手。希望我能在这里得到一些答案，很高兴认识大家。

这是我的日志：

```
09-19 09:50:12.830: I/ActivityManager(270): START {act=android.settings.DEVICE_INFO_SETTINGS cmp=com.android.settings/.Settings$DeviceInfoSettingsActivity u=0} from pid 1627
09-19 09:50:12.910: D/dalvikvm(270): GC_FOR_ALLOC freed 738K, 13% free 11824K/13575K, paused 62ms, total 62ms
09-19 09:50:13.010: W/System.err(1675): Removed 2131231183
09-19 09:50:13.020: W/System.err(1675): Removed 2131231190
09-19 09:50:13.060: D/LocalBluetoothProfileManager(1675): LocalBluetoothProfileManager construction complete
09-19 09:50:13.060: D/AndroidRuntime(1675): Shutting down VM
09-19 09:50:13.060: W/dalvikvm(1675): threadid=1: thread exiting with uncaught exception (group=0x40d4c300)
09-19 09:50:13.060: E/AndroidRuntime(1675): FATAL EXCEPTION: main
09-19 09:50:13.060: E/AndroidRuntime(1675): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.settings/com.android.settings.Settings$DeviceInfoSettingsActivity}: java.lang.NullPointerException
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.os.Looper.loop(Looper.java:137)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at java.lang.reflect.Method.invokeNative(Native Method)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at java.lang.reflect.Method.invoke(Method.java:511)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at dalvik.system.NativeStart.main(Native Method)
09-19 09:50:13.060: E/AndroidRuntime(1675): Caused by: java.lang.NullPointerException
09-19 09:50:13.060: E/AndroidRuntime(1675):     at com.android.settings.Settings.onCreate(Settings.java:167)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.app.Activity.performCreate(Activity.java:5008)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-19 09:50:13.060: E/AndroidRuntime(1675):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-19 09:50:13.060: E/AndroidRuntime(1675):     ... 11 more
09-19 09:50:13.090: W/ActivityManager(270):   Force finishing activity com.android.settings/.Settings$DeviceInfoSettingsActivity
09-19 09:50:13.090: W/ActivityManager(270):   Force finishing activity com.panasonic.tbexperience/.view.templates.TwoColumnsControlActivity
09-19 09:50:13.100: W/InputMethodManagerService(270): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@41811de8 attribute=null
09-19 09:50:13.130: D/dalvikvm(1675): GC_CONCURRENT freed 187K, 4% free 6233K/6471K, paused 12ms+5ms, total 60ms
09-19 09:50:13.610: W/ActivityManager(270): Activity pause timeout for ActivityRecord{417ea2e0 com.android.settings/.Settings$DeviceInfoSettingsActivity}
09-19 09:50:13.820: D/dalvikvm(445): GC_FOR_ALLOC freed 1020K, 33% free 14790K/22023K, paused 41ms, total 41ms
09-19 09:50:13.960: D/dalvikvm(445): GC_FOR_ALLOC freed 1057K, 30% free 15633K/22023K, paused 39ms, total 39ms
09-19 09:50:14.010: D/dalvikvm(445): GC_FOR_ALLOC freed 362K, 24% free 16871K/22023K, paused 32ms, total 32ms
09-19 09:50:14.060: D/dalvikvm(445): GC_CONCURRENT freed 1289K, 20% free 17622K/22023K, paused 3ms+7ms, total 39ms
09-19 09:50:14.060: D/dalvikvm(445): WAIT_FOR_CONCURRENT_GC blocked 29ms
09-19 09:50:14.060: D/dalvikvm(445): WAIT_FOR_CONCURRENT_GC blocked 17ms
09-19 09:50:14.100: D/dalvikvm(445): GC_FOR_ALLOC freed 1693K, 25% free 16723K/22023K, paused 31ms, total 31ms
09-19 09:50:14.190: D/dalvikvm(445): GC_CONCURRENT freed 1126K, 21% free 17585K/22023K, paused 14ms+9ms, total 64ms
09-19 09:50:14.190: D/dalvikvm(445): WAIT_FOR_CONCURRENT_GC blocked 50ms
09-19 09:50:14.390: I/dalvikvm(270): Jit: resizing JitTable from 8192 to 16384
09-19 09:50:16.870: I/Process(1675): Sending signal. PID: 1675 SIG: 9
09-19 09:50:16.890: I/ActivityManager(270): Process com.android.settings (pid 1675) has died.
09-19 09:50:16.890: W/ActivityManager(270): Force removing ActivityRecord{4166f668 com.android.settings/.Settings$DeviceInfoSettingsActivity}: app died, no saved state
09-19 09:50:16.890: W/InputMethodManagerService(270): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@415f2878 attribute=null
09-19 09:50:32.250: D/dalvikvm(1552): GC_CONCURRENT freed 424K, 9% free 6942K/7559K, paused 12ms+3ms, total 39ms 
```

另外，我尝试直接设置这个api的类名......

```
Intent intent = new Intent();   
                    intent.setClassName("com.android.settings", "com.android.settings.Settings$DeviceInfoSettingsActivity");
                    currentContext.startActivity(intent); 
```

同样的事情发生了。它适用于 android 3.2，但不适用于 4.1.1。我有一种感觉，也许我没有为 4.1.1 版本获得正确的类名。有谁知道打开“关于平板电脑”页面的直接类名，或者是否可以以编程方式打开该页面？

问候，舒文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:23:52.307

android api文档说：

```
In some cases, a matching Activity may not exist, so ensure you safeguard against this. 
```

所以你应该检查这个意图或自己捕捉这个异常。

# python - 方法参数转换：“元组”没有属性“属性”

> ID：12474778
> 
> 赞同：-2
> 
> 时间：2012-09-18T10:06:17.703
> 
> 标签：python

我有一个简单的向量类，它重载了几个算术运算符：

```
class vec2:
    x = 0.0
    y = 0.0

    def __add__(self,other):
        self.x = other.x
        self.y = other.y

    def __mul__(self,scalar):
        self.x *= scalar
        self.y *= scalar 
```

但是，在其他地方我调用这样的方法：

```
class foo:
    position = vec2()
    velocity = vec2()

    def update(self,dt):
        self.position += self.velocity * dt; 
```

但是，一旦我进入更新功能，解释器就会出错：

```
'tuple' object has no attribute 'x' 
```

函数内部`__add__`。

为什么“其他”`__add__`作为元组传递，而不是 vec2？

完整的代码在[这里](http://pastebin.com/rtar2dKg)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:24:49.087

使用`__add__`and时返回新向量`__mul__`，并处理“奇怪”类型：

```
class vec2:
    x = 0.0
    y = 0.0

    def __init__(self, x=0.0, y=0.0):
        self.x, self.y = x, y

    def __add__(self, other):
        if not isinstance(other, self.__class__):
            return NotImplemented
        result = self.__class__(self.x, self.y)
        result.x += other.x
        result.y += other.y
        return result

    def __iadd__(self, other):
        if not isinstance(other, self.__class__):
            return NotImplemented
        self.x += other.x
        self.y += other.y
        return self

    def __mul__(self, other):
        if not isinstance(other, self.__class__):
            return NotImplemented
        result = self.__class__(self.x, self.y)
        result.x *= other.x
        result.y *= other.y
        return result

    def __imul__(self, other):
        if not isinstance(other, self.__class__):
            return NotImplemented
        self.x *= other.x
        self.y *= other.y
        return self 
```

要就地修改向量，请使用`__iadd__`和`__imul__`; 这些*仍然需要返回新值*；这可以`self`。

请注意，这*不仅仅*处理传入`(x, y)`坐标元组。如果你想支持那个用例，你需要专门处理它：

```
class foo:
    def __init__(self, position=(0.0, 0.0), velocity=(1.0, 1.0)):
        self.position = vec2()
        self.velocity = vec2(*velocity)

    def update(self, dt):
        if isinstance(dt, tuple):
            dt = vec2(*dt)
        self.position += self.velocity * dt; 
```

另请注意，您不应真正将类属性用于位置和速度值；我在上面使用了实例属性，并借此机会将位置和速度设置为合理的值。

演示：

```
>>> f = foo()
>>> f.position.x, f.position.y
(0.0, 0.0)
>>> f.update((1, 2))
>>> f.position.x, f.position.y
(1.0, 2.0) 
```

# algorithm - 如何计算一组子矩形，这些子矩形完全覆盖带有矩形孔的矩形板

> ID：12474786
> 
> 赞同：1
> 
> 时间：2012-09-18T10:06:39.707
> 
> 标签：algorithm, math, geometry

说，我想从一块矩形板上刮掉一些矩形孔。例如，

情况1、孔相交：

一个带有孔 0,1,2 的 borad x，矩形 0 和 1 相交。

```
xxxxxxxxxxx
xxxxxx222xx
x000xx222xx
x00011222xx
x00011xxxxx
xxx111xxxxx
xxxxxxxxxxx 
```

或更简单，情况2，没有孔相交：

```
xxxxxxxxxxx
xxxxx2222xx
x00xx2222xx
x00xx2222xx
x00x111xxxx
xxxx111xxxx
xxxxxxxxxxx 
```

后者更像是“在一个大矩形内反转一组矩形”。

我的问题是：如何计算一组完全覆盖板 x 的子矩形？

```
Input: a larger rect, and a set of hole rects  
Output: a set of sub rects cover exactly the larger rect with holes 
```

rect 结构可能像下面的 CCRect，协调类型是浮点数：

```
typedef struct {float x; float y;} CGPoint;
typedef struct {float width, float height} CGSize;
typedef struct {CGPoint origin; CGSize size;} CGRect; 
```

有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:20:47.267

您的问题中缺少约束。您想如何优化结果您是否正在寻求尽可能少的矩形？

边缘是否在网格上？

我会这样做：

*   从一个大矩形和两种方法开始，一种用于分割矩形，另一种用于连接它们
*   对于孔矩形的每一侧，将主矩形一分为二。尽可能延长它们的边界，并沿着这条线分割平面。一旦你这样做了，你最终会得到很多小矩形。我想你想要尽可能少的矩形。
*   通过一个 - 删除孔：对于每个小矩形，如果坐标填充在您一开始拥有的孔矩形内，则丢弃它。
*   通过两个 - 加入剩余的矩形：对于每个矩形，如果它可以与邻居形成一个矩形，则加入它们

这第二关很棘手，有大量的优化要做。一个简单的优化将是交替垂直连接然后水平连接。这样你最终会得到更大的矩形。

编辑：
如果您在第 1 阶段构建 BSP 树，则可以显着加快第 2 阶段。每次拆分时，它都会创建一个新节点，其中 2 个叶子是子矩形。这将使在第 2 步中找到邻居的速度更快。

# ruby-on-rails - 如何对数据库中的加密元素进行通配符搜索

> ID：12474788
> 
> 赞同：5
> 
> 时间：2012-09-18T10:06:51.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, elasticsearch, attr-encrypted

我正在使用 attr_encrypted 来加密我的一些模型字段，并且我使用 Tire 和 Elasticsearch 进行全文搜索。我只使用一个简单的搜索表单。这是我的模型的一部分：

```
class Student < ActiveRecord::Base

  include Tire::Model::Search
  include Tire::Model::Callbacks

  attr_accessible :name, :surname
  attr_encrypted :name,             :key => 'f98gd9regre9gr9gre9gerh'
  attr_encrypted :surname,          :key => 'f98gd9regre9gr9gre9gerh'

  def self.search(params)
    tire.search(load: true) do
      query { string Student.encrypt_name(params[:search]) } if params[:search].present?
    end  
  end
end 
```

因此，例如，如果我在数据库中有名称“John”，当我搜索“John”时，查询会在查询数据库之前被加密 (Student.encrypt_name(params[:search]))，并返回结果. Elasticsearch 允许通配符搜索，例如如果我搜索“Joh*”，应该返回匹配的结果，但是加密的关键字“Joh”与加密的“John”不同，db 不返回任何结果。对此的任何解决方案将不胜感激。

问候， 拉多斯拉夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:43:06.513

简答 - 全文搜索和客户端加密在当前最先进的技术中是相互排斥的。

更长的答案：

1.  您还可以将明文存储在名称的[soundex](http://en.wikipedia.org/wiki/Soundex)中并进行比较。这需要在功能和安全性方面做出妥协。检查它是什么并自己判断。

2.  将加密的名称的所有可能部分匹配（或至少其中一些合理的子集）存储在单独的表中，并按身份匹配（可能与加密数据一起）。不适合我，但如果你喜欢冒险，你可以在谷歌上搜索“数据散列”和“反向索引”。请注意，这也会损害安全性。

3.  有理论上的[结果](http://crypto.stanford.edu/portia/pubs/articles/G1448527409.html)，但我还没有发现任何接近实现的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:07:32.337

如果您的数据相对较小，另一种选择是将数据缓存在服务器内存中，并对缓存的数据集执行正则表达式匹配操作。如果出现以下情况，这可能是有意义的：

1.  每所学校大约有 1000 名学生
2.  你的缓存键是这样的，一个给定的学校只能在它的学生中搜索
3.  您缓存搜索所需的最小字段集，而无需序列化整个对象

当然，黑客可能会访问您的网络服务器内存并读取数据。这可以通过精心设计的缓存刷新策略部分缓解。

# google-chrome - 访问密钥在 chrome 中不起作用

> ID：12474789
> 
> 赞同：4
> 
> 时间：2012-09-18T10:06:54.153
> 
> 标签：google-chrome, accessibility

问题是，当在 chrome 中按下访问键 0 时，焦点似乎没有转移到页脚链接。适用于 IE 和 firefox。这就是我正在做的事情，

```
<ul class="hidden">
   <li><a href="javascript:;" onclick="javascript:this.href='#Footer';" accesskey="0">Footer</a></li>
</ul>

<div id="FooterDiv">
<a id="Footer" name="Footer" href="javascript:;" class="hidden">Footer</a>
//More footer links here.

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:14:03.740

我现在没有可用的 Chrome，但请尝试`alt`+ `shift`+ Key。认为他们像 Firefox 一样实现了它。

# uitableview - 更改 UITableView 中标题的背景颜色

> ID：12474790
> 
> 赞同：1
> 
> 时间：2012-09-18T10:06:54.793
> 
> 标签：uitableview

怎么改变标题的背景颜色`UITableView`。但它应该只用于显示标题。我实现了以下委托

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
} 
```

但它适用于所有行。就像我有 A 和它的内容然后是 E 和它的内容。但是 A 和 E 之间有很长的差距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:08:46.570

如果您正在谈论显示在稳定视图顶部的表格视图标题的 UIvew，并且不会随着表格单元格滚动，您需要创建 UIVIew 并设置其背景，然后将此视图作为 tableview 的 tableviewHeader 属性

```
 self.tableView.tableHeaderView = [[UIView alloc] init];...... 
```

# jquery - jquery validationEngine 在电子邮件域上验证

> ID：12474795
> 
> 赞同：2
> 
> 时间：2012-09-18T10:07:11.583
> 
> 标签：jquery, jquery-plugins

我正在使用这个验证插件：[https ://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)

我拥有的电子邮件输入字段应该验证它是否是真正的电子邮件，并且不允许某些电子邮件域（hotmail、gmail）。我已经阅读了插件网站上的整个自述文件，但是我在那里找不到任何有用的关于如何使它做到这一点的信息。因此，如果有人知道如何做到这一点，或者有一个关于如何让你的生活更安全的文档的链接。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:48:27.540

我可以建议你做下一个（我没有测试这个，所以如果它不起作用，请告诉我）。

此插件允许您指定自定义正则表达式进行验证。所有正则表达式都放在所谓的`translation file`（`jquery.validationEngine-en.js`英语）中。在那里你可以看到`$.validationEngineLanguage.allRules`物体。添加您的自定义规则，您需要在其中设置自己的正则表达式以禁止（gmail、hotmail 等）：

```
"custom_email": {
     "regex": /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@(?!gmail\.com|hotmail\.com)[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,
     "alertText": "* Invalid email address"
}, 
```

您可以看到我添加了几乎默认的正则表达式，这是在`"email"`规则中指定的，但在其中包含了负前瞻`(?!gmail\.com|hotmail.com)`（您可以使用方法添加另一个域`|newemail\.com`）。

然后你需要为你的输入设置这个自定义规则：

```
<input value="" class="validate[custom[custom_email]]" type="text" name="email" id="email" /> 
```

# matlab - matlabpool 的开销是多少？

> ID：12474800
> 
> 赞同：3
> 
> 时间：2012-09-18T10:07:36.010
> 
> 标签：matlab, parallel-processing, distributed-computing

谁能指出我运行 matlabpool 的开销是多少？

我开始了一个 matlabpool ：

```
matlabpool open 132procs 100
Starting matlabpool using the '132procs' configuration ... connected to 100 labs. 
```

并遵循节点上的 cpu 使用情况：

```
pdsh -A ps aux |grep dmlworker 
```

当我启动 matlabpool 时，它开始时平均 CPU 使用率约为 35%，而当池未使用时，它会缓慢（在 5-7 分钟内）下降到平均约 2%。

这是正常的吗？什么是典型的开销？如果 matlabpooljob 作为“批处理”作业启动，这种情况会改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:56:57.647

这很正常。`ps aux`报告自进程启动以来的平均 CPU 利用率，而不是超过滚动窗口。这意味着，虽然工作人员初始化相对较快然后变得空闲，但这需要更长的时间才能反映在 CPU% 中。这与 Linux`top`命令不同，例如，它将反映自上次屏幕更新以来的利用率，以 %CPU 为单位。

至于典型的开销，这取决于许多因素：显然工作人员的数量、提交的工作的速率和数据大小（以及在维护工作进程方面，编组输入和输出有一些开销，这不是“有用计算”的一部分），Matlab 池是本地的还是附加到作业管理器的，以及 Matlab 版本和 O/S。

根据经验，作为现代 *nix 服务器的*粗略指南*，我认为闲置的工作人员不应该消耗超过 20% 的单核（例如，在 16 核机器上 <~1% 的总 CPU 利用率）初始化，除非存在配置问题。我不应该期望这会受到您提交的工作类型的影响（例如，无论使用“createJob”还是“batch”或“parfor”）：工作人员和下面的通信机制基本上是相同的。

# python - 在生产谷歌应用引擎上运行单元测试

> ID：12474804
> 
> 赞同：3
> 
> 时间：2012-09-18T10:07:44.533
> 
> 标签：python, unit-testing, google-app-engine

有没有人在生产（或登台）上进行过测试，而不是在开发服务器上进行本地测试？尝试是个坏主意吗？

> 乍一看，App Engine 和单元测试不太适合。App Engine 请求只能由 http 或 xmpp 驱动。单元测试通常通过命令行或 IDE 启动。App Engine 请求限制为 30 秒。一个单元测试套件可能包含数千个测试，执行时间远远超过 30 秒。我们如何弥合差距？

有没有相当于[云层](http://code.google.com/p/cloudcover/)的蟒蛇？

我希望我的应用程序有一个复选框网页，它允许我选择要运行的测试并显示每个测试的最新结果。（最好不用我写我自己版本的 unittest / unittest2

虽然我的一些测试可能只是本地的，但我认为我可能还需要在生产环境中运行其中一些测试。我可能还有额外的“现场测试”。

我想我关心的是如何实时运行本地测试，而不必维护两组单独的测试。以及如何在不弄乱数据存储中的实时数据的情况下实时运行一些测试。（是的，一些测试可能使用存根或模拟，但我可能想检查生产数据存储或它的分阶段版本？）

我没有尝试过实时运行单元测试，我假设通过标准输出 unittest 会将结果记录到[管理控制台](https://developers.google.com/appengine/articles/logging)，这可能不如让结果显示在用于运行测试的网页上那么有用。

我还想通过更改 app.yaml 中的版本号（结合命名空间、版本和多租户..）来[在生产前设置暂存。](https://stackoverflow.com/questions/3793860/how-to-set-up-a-staging-environment-on-google-app-engine)我也可以在登台上运行测试。

有人有我应该尝试的基本方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:48:58.357

查看[aeta](http://code.google.com/p/aeta/)。它在任务队列中运行测试，您可以从 Web 界面或命令行访问这些测试。

为了在不弄乱数据的情况下测试实时数据存储，您可以尝试使用登台或测试服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:53:51.233

您是否尝试过[remote_api](https://developers.google.com/appengine/articles/remote_api)控制台？它将允许您在本地目录中直接在实时 appengine 运行时运行单元测试。

# c# - 查找多个 TextBlock 的最大可能字体大小

> ID：12474818
> 
> 赞同：0
> 
> 时间：2012-09-18T10:09:18.943
> 
> 标签：c#, wpf, windows-8, microsoft-metro

我`TextBlock`在 Fixed Size Column 中有几个 s `Grid`。即`Grid`大小可能会改变，但它的列宽都是相同的（例如，整个大小的 10%）并且每列包含一个`TextBlock`.

`TextBlock`所有s的字体大小**必须**相同。

如何找到使`TextBlock`s 中的所有文本可见的最大可能字体大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:24:06.220

您可以使用[Graphics.MeasureString Method (String, Font, Int32)](http://msdn.microsoft.com/en-us/library/9bt8ty58.aspx)来计算字体大小。然后使用一些行为魔术将字体大小绑定到 TextBlock。

```
private void MeasureStringWidth(PaintEventArgs e)
{

    // Set up string. 
    string measureString = "Measure String";
    Font stringFont = new Font("Arial", 16);

    // Set maximum width of string. 
    int stringWidth = 200;

    // Measure string.
    SizeF stringSize = new SizeF();
    stringSize = e.Graphics.MeasureString(measureString, stringFont, stringWidth);

    // Draw rectangle representing size of string.
    e.Graphics.DrawRectangle(new Pen(Color.Red, 1), 0.0F, 0.0F, stringSize.Width, stringSize.Height);

    // Draw string to screen.
    e.Graphics.DrawString(measureString, stringFont, Brushes.Black, new PointF(0, 0));
} 
```

# css - CSSBuilder可以不用Griffon吗？

> ID：12474821
> 
> 赞同：1
> 
> 时间：2012-09-18T10:09:24.950
> 
> 标签：css, swing, groovy, griffon

我有一个独立的 Swing 应用程序，我使用 Groovy 作为编程语言。

尝试使用 CSS 应用样式并为此搜索一些工具，我找到[了 CSSBuilder](http://griffon.codehaus.org/CSSBuilder)。

问题是 CSSBuilder 与 Griffon 框架集成在一起，所以我不能使用它与 Griffon 隔离的所有功能，例如“cssClass”选择器。

因此我的问题很简单：有没有人设法做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:20:08.597

刚刚写了一个快速测试，这似乎有效：

```
@GrabResolver( name='codehaus', root='http://repository.codehaus.org' )
@Grab( 'org.codehaus.griffon:cssbuilder:0.4' )
import griffon.builder.css.*
import groovy.swing.SwingBuilder
import java.awt.BorderLayout as BL

def style = '''* {
  background-color: red;
}

jbutton {
  background-color: blue;
}

.active {
  color: green ;
  font-size: 50%;
}

jlabel {
  color: pink ;
  font-size: 200% ;
}'''

Class klass = javax.swing.JComponent
if( !AbstractSyntheticMetaMethods.hasBeenEnhanced(klass) ) {
   AbstractSyntheticMetaMethods.enhance(klass,[
      "getCssClass": {-> delegate.getClientProperty(ClarityConstants.CLIENT_PROPERTY_CLASS_KEY) },
      "setCssClass": { String cssClass -> delegate.putClientProperty(ClarityConstants.CLIENT_PROPERTY_CLASS_KEY, cssClass) }
   ])
}

new SwingBuilder().edt {
  int count = 0
  def frame = frame( title:'CSS Test', size:[ 300, 300 ], show: true ) {
    borderLayout()
    textlabel = label(text:"Click the button!", constraints: BL.NORTH)
    button(text:'Click Me',
         cssClass: 'active',
         actionPerformed: {count++; textlabel.text = "Clicked ${count} time(s)."; println "clicked"},
         constraints:BL.SOUTH)    
  }
  CSSDecorator.applyStyle( style, frame )
} 
```

我从[CSSBuilder 的源代码中获取的元类增强代码](https://github.com/griffon/cssbuilder/blob/master/src/main/groovy/griffon/builder/css/CSSBuilder.groovy)

# sql-server - T-SQL 并发选择和更新语句

> ID：12474822
> 
> 赞同：0
> 
> 时间：2012-09-18T10:09:28.973
> 
> 标签：sql-server, tsql, select, concurrency, sql-update

我有 2 个 SQL 语句，可以同时执行。
请求表中的第一个更新请求，当请求被处理时：

```
UPDATE Requests
SET IsInProcess = '1' 
```

第二个计数正在处理的请求：

```
SELECT COUNT(*)
FROM Requests
WHERE IsInProcess = '1' 
```

只有在更新语句完成后，我才需要计算请求。
我需要使用哪些事务隔离级别或表提示来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:21:58.743

你不必使用任何。`READ COMMITTED`并且默认锁定会做到这一点。（前提是更新开始得早一点，否则更新将等到您计算在内。）

鉴于您的`where`子句，服务器很可能会`X`锁定整个表。如果没有，失败的进程将等到获胜的进程释放它对第一个更新/读取行的锁定。

# c# - 使用 itextsharp 进行数字签名

> ID：12474825
> 
> 赞同：0
> 
> 时间：2012-09-18T10:09:51.920
> 
> 标签：c#, asp.net, digital-signature, pfx

有人可以解释以下代码..

> 该**return**语句将做什么。

```
 public byte[] sign(string text)
 {
    string password = "1234";
    X509Certificate2 cert = new X509Certificate2("c:\\certificate.pfx", password);
    RSACryptoServiceProvider crypt = (RSACryptoServiceProvider)cert.PrivateKey;
    SHA1Managed sha1 = new SHA1Managed();
    UnicodeEncoding encoding = new UnicodeEncoding();
    byte[] data = encoding.GetBytes(text);
    byte[] hash = sha1.ComputeHash(data);
    return crypt.SignHash(hash, CryptoConfig.MapNameToOID("SHA1"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:45:54.643

```
 public byte[] sign(string text)
         {
//Password for the PFX certificate
            string password = "1234";
//Importing the PFX certificate that contains the private key which will be used for creating the digital signature
            X509Certificate2 cert = new X509Certificate2("c:\\certificate.pfx", password);
//declaring RSA cryptographic service provider
            RSACryptoServiceProvider crypt = (RSACryptoServiceProvider)cert.PrivateKey;
//cryptographic hash of type SHA1
            SHA1Managed sha1 = new SHA1Managed();
//encoding the data to be signed
            UnicodeEncoding encoding = new UnicodeEncoding();
            byte[] data = encoding.GetBytes(text);
//generate Hash
            byte[] hash = sha1.ComputeHash(data);
//sign Hash
            return crypt.SignHash(hash, CryptoConfig.MapNameToOID("SHA1"));
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:35:24.303

SignHash(byte[], string) 方法将根据从证书中读取的私钥计算作为第一个参数传递的哈希值的签名。看这里：

[RSACryptoServiceProvider.SignHash 方法](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rsacryptoserviceprovider.signhash.aspx)

其结果（随后返回）将是一个包含签名的字节 []，您可以将其与您的数据一起发送，以便其他人可以使用您的公钥验证该签名。

# ios - 如何在应用程序上设置感叹号徽章，就像在消息应用程序中一样。IE '！'？

> ID：12474833
> 
> 赞同：1
> 
> 时间：2012-09-18T10:10:12.980
> 
> 标签：ios, cocoa-touch

如何在应用程序上将感叹号设置为字符而不是整数？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:11:35.603

你不能那样做。徽章是一个整数。

# iphone - UIImageview 的反射图

> ID：12474835
> 
> 赞同：0
> 
> 时间：2012-09-18T10:10:14.403
> 
> 标签：iphone, objective-c, uiimageview

我的 xib 文件中有一个图像视图。我必须在其他 UIimageview 中创建一个反射视图。所以我采取了一个 UIimageview 来放置它的反射。它大约是原始图像视图的一半。

谁能建议我最好的方法。我尝试了很多例子，但都不满意。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:45:48.240

您可以使用 a`CALayer`来执行此操作（它比单独的 更有效`UIImageView`）。

创建 a `CALayer`，将图像添加到其中，将其变换属性设置为 scale(1,-1)，最后将其 maskLayer 设置为`CAGradientLayer`从不透明变为透明的 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:42:21.037

你试试这个：
[http ://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/88208-uiimage-reflection-tutorial.html](http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/88208-uiimage-reflection-tutorial.html)

# regex - 正则表达式通配符查找和替换记事本++

> ID：12474841
> 
> 赞同：0
> 
> 时间：2012-09-18T10:10:34.933
> 
> 标签：regex, notepad++, wildcard, replace

嗨，我正在尝试做一个让我烦恼的简单正则表达式，因为它应该很容易 - 我正在使用记事本++，并且可能会“以不同方式”过滤

这就是我所拥有的

我想在字符串中找到`id=0&name=/1274-IMG_2919.JPG`作为通配符的位，`1274-IMG_2919`以便在替换后变为`id=0&name=/1274-IMG_2919.JPG -O 1274-IMG_2919.JPG`

这是我所拥有的，但它不起作用

```
FIND:         \&name\=\/([a-zA-Z0-9]+)\.JPG
REPLACE:      &name=/$1.JPG -O $1.JPG 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:23:22.180

您正在寻找一个字符串，`-`但`_`它们不是您定义的字符集的一部分：`[a-zA-Z0-9]`，这对我有用；

```
\&name\=\/([a-zA-Z0-9\-_]+)\.JPG 
```

（或更简短的`&name=\/([\w\-]+)\.JPG`）

# sqlite - 使用本机应用程序构建工具包构建的本机应用程序中的 sqlite

> ID：12474847
> 
> 赞同：0
> 
> 时间：2012-09-18T10:10:46.290
> 
> 标签：sqlite

应用。

我们团队的任务是为公司创建一个新的应用程序——它本质上是一个离线目录。

该应用程序需要能够离线访问数据，因此需要是本机应用程序： - 理想情况下使用数据库（包含 4000 - 5000 个条目 ID、地理位置、条目的文本描述）

但是，我们被告知，如果我们使用庞大的 sqlite 数据库创建此应用程序，我们可能会导致性能问题。

我只是想知道是否有人创建了任何类似的应用程序并在任何智能手机上发现了性能问题。还是智能手机上的 sqlite 数据库反应灵敏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:25:27.363

如果您有类似的查询，大量数据将导致问题

```
SELECT * FROM everything 
```

然后尝试在列表视图中显示所有结果。

如果单个查询不需要处理大型数据集，性能会很好。有关详细信息，请参阅[查询计划](http://www.sqlite.org/queryplanner.html)。

# android - 在三星设备上使用 ConvertView 的行为不同

> ID：12474850
> 
> 赞同：1
> 
> 时间：2012-09-18T10:10:52.747
> 
> 标签：android, expandablelistadapter, convertview

我编写了[BaseExpandableListAdapter](http://developer.android.com/reference/android/widget/BaseExpandableListAdapter.html)的实现，它也覆盖了 getChildType 和 getChildView 方法。有10个小组，其中4个有孩子。

以下实现**适用**于模拟器和经过测试的 htc 设备。这意味着：
当我以可视方式打开 GROUP_W 时， getChildView(...) 的 convertView 参数第一次正确地为 null 并稍后重用该视图。

此实现**不适**用于三星 Galaxy S3 和 Galaxy Tab。这意味着：当我以可视方式打开 GROUP_W 时，getChildView(...) 的 convertView 参数第一次不为空，并提供了错误的视图，从而进一步导致异常。

```
@Override
public int getChildType(int groupPosition, int childPosition) {
  switch (groupPosition) {
    case GROUP_W:
      return 0;
    case GROUP_X:
    case GROUP_Y:
      return 1;
    case GROUP_Z:
      return 2;
    default:
      // actually not used
      return super.getChildType(groupPosition, childPosition);
  }
}

@Override
public int getChildTypeCount() {
  return 3;
} 
```

当我将实现更改为以下时，没有看到任何合乎逻辑的原因，那么它也适用于三星设备。

```
@Override
public int getChildType(int groupPosition, int childPosition) {
  switch (groupPosition) {
    case GROUP_W:
      return 1;
    case GROUP_X:
    case GROUP_Y:
      return 2;
    case GROUP_Z:
      return 3;
    default:
      return super.getChildType(groupPosition, childPosition);
  }
}

@Override
public int getChildTypeCount() {
  return 4;
} 
```

是否有人也有这种奇怪的行为，或者有人了解我在做什么或出了什么问题？非常感谢 ;）

编辑：添加 getChildView()

```
@Override
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
  Context context = parent.getContext();
  switch (groupPosition) {
    case GROUP_W:
      X x = arrayX[childPosition];
      return ListItemFactory.getTwoLineListItemTextIndicatorTopRight(context, x.getString1(), x.getString2(), x.getString3(), convertView);
    case ...
    default:
      return null;
  }
}
public static View getTwoLineListItemTextIndicatorTopRight(Context context, CharSequence line1, CharSequence line2,
    CharSequence indicator, View convertView) {
  View view;
  if (convertView == null) {
    view = View.inflate(context, R.layout.two_line_list_item_textindicator_topright, null);
  }
  else {
    view = convertView;
  }

  // here happens a null pointer exception because textView1 is not available in the wrong convert view

  ((TextView) view.findViewById(R.id.textView1)).setText(line1);
  ((TextView) view.findViewById(R.id.textView2)).setText(line2);
  if (indicator == null || indicator == "") {
    ((TextView) view.findViewById(R.id.textViewIndicator)).setVisibility(View.GONE);
  }
  else {
    TextView textView = ((TextView) view.findViewById(R.id.textViewIndicator));
    textView.setText(indicator);
    textView.setVisibility(View.VISIBLE);
  }
  return view;
} 
```

# ruby-on-rails - 在 init.rb 中设置配置

> ID：12474851
> 
> 赞同：0
> 
> 时间：2012-09-18T10:10:56.933
> 
> 标签：ruby-on-rails, redmine, redmine-plugins

我在 rails 2 工作。我正在开发 redmine 插件。我想在插件的 init.rb 文件中执行此操作。我在 redmine 的 development.rb 中做的。

```
config.to_prepare do
  load 'user_patch.rb'
end 
```

我如何在插件 init.rb 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:57:05.547

你不需要修改`development.rb`.

在`$REDMINE_ROOT/plugins/your_plugin_name/init.rb`：

```
Dispatcher.to_prepare :your_plugin_name do
  require 'user_patch'
end 
```

看看[Redmine 维基](http://www.redmine.org/boards/3/topics/31445#Overriding-models-controllers-and-helpers)。

# iphone - 如何在 iPhone 上以编程方式清除浏览器缓存？

> ID：12474852
> 
> 赞同：6
> 
> 时间：2012-09-18T10:11:02.500
> 
> 标签：iphone, objective-c, ios, api, basecamp

我正在为我的 iOS basecamp 客户端应用程序使用新的 Basecamp API。我希望用户能够注销和切换帐户。但我不能，因为每次我请求授权时都会使用存储在浏览器缓存中的帐户凭据。我发现我需要刷新浏览器缓存才能做到这一点。如何清除浏览器缓存？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-18T10:45:06.693

```
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

之后，您可以在 UIWebView 中删除任何关联的 cookie：

```
for(NSHTTPCookie *cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {

    if([[cookie domain] isEqualToString:someNSStringUrlDomain]) {

        [[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:cookie];
    }
} 
```

# c++ - C++（LINUX）用DevIL设置X11窗口背景

> ID：12474854
> 
> 赞同：2
> 
> 时间：2012-09-18T10:11:07.400
> 
> 标签：c++, image, background, window, x11

我正在尝试为使用 Xlib 创建的一个窗口设置背景图像。我希望图像是 JPEG 或 PNG。我下载了 DevIL（我更喜欢使用它，因为它支持很多格式）。

所以，我的问题是，我该怎么做？我找不到任何具体的教程或帮助。
我了解如何使用 DevIL 将图像加载到流中，但是如何将其放在窗口上？我在这里找到了答案：[Load image to a window using xlib](https://stackoverflow.com/questions/6384987/load-image-onto-a-window-using-xlib)但我不知道如何以及哪个函数应该接收图像字节。据我所知，我应该有一个可以保存所有图像的 XImage，并且可以与 XPutImage 一起使用。我不明白的是如何将图像的字节从 DevIL 发送到 XImage。

有人知道任何有用的页面或一些关于我应该如何做的线索吗？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:33:27.420

用于创建 an 的 Xlib 函数`XImage`是[XCreateImage](http://tronche.com/gui/x/xlib/utilities/XCreateImage.html)，其用法如下所示（您可以在链接中阅读完整说明）：

```
XImage *XCreateImage(display, visual, depth, format, offset, data, 
                    width, height, bitmap_pad, bytes_per_line) 
```

其中与您的特定问题相关的参数是**data**，`char*`它指向您使用 DevIL 加载图像数据的位置。有了这个，您应该能够按照[您已经找到的其他答案中的步骤进行](https://stackoverflow.com/questions/6384987/load-image-onto-a-window-using-xlib)操作。

**编辑添加：**

您仍然需要告诉 DevIL 如何格式化您的图像数据，以便 XCreateImage 能够理解它。例如，以下一对函数调用将创建一个正确显示的 XImage：

```
ilCopyPixels(
    0, 0, 0, 
    image_width, image_height, 1, 
    IL_BGRA, IL_UNSIGNED_BYTE, 
    image_data
);

// ...

XImage* background = XCreateImage(
    display,
    XDefaultVisual(display, XDefaultScreen(display)), 
    XDefaultDepth(display, XDefaultScreen(display)),
    ZPixmap,
    0,
    image_data,
    image_width,
    image_height,
    32,
    0
); 
```

，如果您改为选择`IL_RGBA`，颜色将关闭！

# google-chrome-extension - 清单版本 1 的扩展仍然可以提交到 Chrome 网上应用店吗？

> ID：12474857
> 
> 赞同：-1
> 
> 时间：2012-09-18T10:11:16.740
> 
> 标签：google-chrome-extension, version, manifest

当我尝试向网上应用店提交 Chrome 扩展程序时，显示错误。如何使用 manifest v1 提交扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:15:27.677

有关清单版本 1 支持时间表，请参阅[https://developer.chrome.com/extensions/manifestVersion.html ：](https://developer.chrome.com/extensions/manifestVersion.html)

> # 清单版本 1 支持计划
> 
> **Chrome 21**
> *Beta：2012 年 7 月上旬；稳定：2012 年 8 月中旬*
> 
> *   网上应用店将阻止创建新的清单版本 1 项目。
> *   网上应用店将允许更新现有清单版本 1 项目。
> 
> **Chrome 23**
> *Beta：2012 年 9 月下旬；稳定：2012 年 11 月上旬*
> 
> *   网上应用店将阻止对清单版本 1 项目的更新。
> *   Chrome 将停止打包清单版本 1 项目（或加载它们以进行开发）。
> 
> **2013年第一季度**
> 
> *   网上应用店将从墙、搜索结果和类别页面中删除清单版本 1 项目。
> *   通知电子邮件将发送给所有在商店中仍有清单版本 1 项目的开发人员，提醒他们这些项目将被取消发布并提供更新说明。
> 
> **2013年第二季度**
> 
> *   网上应用店将取消发布所有清单版本 1 项目。
> *   最终通知电子邮件将发送给开发人员，其中清单版本 1 项目仍在网上商店中。Chrome 将继续加载和运行已安装的清单版本 1 项目。
> 
> **2013年第三季度**
> 
> *   Chrome 将停止加载或运行清单版本 1 项目。

# windows - 适用于 Windows 的 PlayOnLinux 等效项

> ID：12474858
> 
> 赞同：0
> 
> 时间：2012-09-18T10:11:22.090
> 
> 标签：windows, ubuntu-12.04

像 PlayOnLinux 一样，我们在 Windows 中有一个类似的应用程序，它允许我们在 Windows 操作系统上运行 Ubuntu 应用程序。或者是否有任何模拟器可以在 Windows 中运行 ubuntu 终端（用于学习目的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:50:56.000

# 你不能

不幸的是，没有像 playonlinux(wine frontend) 这样的工具来模拟 windows 中的 linux 应用程序，所以你应该使用虚拟机 craigwin

# iphone - 如何在选择时使单元格透明

> ID：12474863
> 
> 赞同：0
> 
> 时间：2012-09-18T10:11:41.187
> 
> 标签：iphone, ios

我有一个带有 clearColor 背景的自定义 UITableView。我将单元格的 backgroundView 设置为透明 UIImageView 并将背景图像视图的 backgroundColor 设置为`[UIColor clearColor]`. 我还将单元格的 backgroundColor 设置为`[UIColor clearColor]`.

我想让选择变得`cell.backgroundview`透明。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:20:02.440

您可以使用半透明或透明内容（UIimageview）显式设置单元格的 selectedBackgroundView 属性，这样我就不会在选择时变得不透明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:35:42.097

[http://www.youtube.com/watch?v=PwcBdCUZNWs](http://www.youtube.com/watch?v=PwcBdCUZNWs) 我认为这就是你所要求的，只是让 selectedView 从 UI 属性中透明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:49:05.217

在您的 Cell 创建中：

```
cell.selectedBackgroundView =[[UIImageView alloc] init];
((UIImageView *)cell.selectedBackgroundView).image = [UIImage imageNamed:@"your transparent UIImage"]; 
```

或者：

```
 UIView *v = [[UIView alloc] init];
 v.backgroundColor = [UIColor clearColor];
 cell.selectedBackgroundView = v; 
```

# iphone - UILabel 类别和 setFont: 崩溃

> ID：12474868
> 
> 赞同：0
> 
> 时间：2012-09-18T10:11:58.550
> 
> 标签：iphone, ios, uilabel, categories

我创建了`UILabel`在字体属性更改时会做额外工作的类别。

我选择了类别而不是子类，因此我不必更改所有 XIB 文件中所有标签的类别。我只是将此类别声明添加到前缀标题中，并且类别在整个项目范围内都是可见的。

实现文件：

```
//
//  UILabel+XIBCustomFonts.m

#import "UILabel+XIBCustomFonts.h"

@implementation UILabel (XIBCustomFonts)
BOOL comes_from_nib = NO;

-(id)initWithCoder:(NSCoder *)aDecoder_{

    self = [super initWithCoder:aDecoder_];

    if (self) {
        comes_from_nib = YES;

    }
    return self;
}

-(void)setFont:(UIFont *)font_{

    [super setFont:font_];
    NSLog(@"Setting from for label from XIB for name:%@ size: %.1f - do font theme replacement if needed", self.font.fontName, self.font.pointSize);

}
@end 
```

令人惊讶的是以下日志的崩溃：

```
-[UIButtonLabel setFont:]: unrecognized selector sent to instance 0x9ad1b70
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIButtonLabel setFont:]: unrecognized selector sent to instance 0x9ad1b70' 
```

**UIButtonLabel 是从哪里来的？**

即使我在`setFont:`setter 中进行额外的类检查，也会发生这种情况：

```
if ([self class] != [UILabel class] || !comes_from_nib) {

        [super setFont:font_];
        return;

    } 
```

有没有办法在不子类化的情况下覆盖 UILabel 中的 setFont: setter？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:37:28.737

您不能在类别中调用超级方法！绝不！当您使用类别来增强类的功能时，这是不可能的，您没有扩展类，您实际上完全覆盖了现有方法，您完全失去了原始方法。这就是出现您的错误的原因。

# powershell - 如何使用 Powershell 获取 AWS Auto Scaling 组中实例的 IP 地址？

> ID：12474869
> 
> 赞同：1
> 
> 时间：2012-09-18T10:12:03.417
> 
> 标签：powershell, amazon-web-services, amazon-ec2, aws-powershell

我正在尝试通过 .NET Amazon API 将 powershell 脚本连接到 Auto Scaling 组。

我已经检查了[此处](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/Index.html)的文档，但我正在努力获取一个包含属于 Auto Scaling 组的实例的 IP 地址的对象。

我不确定要使用哪个类，或者哪个类包含我的对象。

我目前正在使用：

```
$request = New-Object -TypeName Amazon.AutoScaling.Model.DescribeAutoScalingInstancesRequest 
```

有没有人遇到过同样的情况？哪个类/对象包含在 AutoScaling 组中运行的实例的 IP 地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-08T00:05:22.863

对于任何希望通过以下方式执行此操作的人`aws-cli`

代替`my autoscale group`

```
aws --output text --query "Reservations[*].Instances[*].PublicIpAddress" ec2 describe-instances --instance-ids `aws --output text --query "AutoScalingGroups[0].Instances[*].InstanceId" autoscaling describe-auto-scaling-groups --auto-scaling-group-names "my autoscale group"` 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-14T18:03:44.367

使用 SDK 方法，您可以获取从 DescribeAutoScalingInstances 调用返回的响应/结果数据中嵌入的一组实例 ID，并将它们传递给 EC2 的 DescribeInstances 调用（再次使用 new-object 来获取 EC2 客户端和请求对象）。这将为您提供一组 Amazon.EC2.Model.Reservation 对象（同样在响应/结果数据中），每个预留中的 RunningInstance 集合将从这些对象中获取 EC2 实例的 IP 地址。

然而，像这样使用适用于 Windows PowerShell 的 AWS 工具要简单得多：

```
Get-ASAutoScalingInstance | select -expandproperty InstanceId | Get-EC2Instance | select -expandproperty RunningInstance | ft InstanceId, IpAddress 
```

Get-ASAutoScalingInstance 映射到您问题中的请求；这会产生一组 EC2 实例，我们通过选择从中提取每个实例的 id。然后，我们使用 Get-EC2Instance 请求实例的详细信息；如上所述，这会产生一个 Amazon.EC2.Model.Reservation 对象，其中包含实例的详细信息（在 RunningInstance 集合中）。我们将其展平以提取表的实例 ID 和关联的 IP 地址。

上面的示例管道假定您已使用 Set-AWSCredentials 和 Set-DefaultAWSRegion 设置了要在 shell 中使用的凭证和区域。

适用于 Windows PowerShell 的 AWS 工具包含在 SDK 和 Visual Studio 工具包的下载 msi 中，可从[http://aws.amazon.com/net/](http://aws.amazon.com/net/)获得。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-25T08:00:39.213

扩展上面的答案 - 您可能希望包含 Auto Scaling 组的名称，这样您就不会从每个组中获取每个实例。此外，如果您使用 VPC，您的实例可能没有公共 IP，因此您将使用这样的私有 IP

```
Get-ASAutoScalingInstance | ? {$_.AutoScalingGroupName -eq "web-autoscaler-group"} | select -ExpandProperty InstanceId | Get-EC2Instance | select -ExpandProperty RunningInstance | ft InstanceId, PrivateIpAddress 
```

# ios6 - iOS：绝对没有办法在 Xcode 4.5 中为 armv6 构建？

> ID：12474870
> 
> 赞同：10
> 
> 时间：2012-09-18T10:12:05.540
> 
> 标签：ios6, armv7, armv6, xcode4.5

从 Xcode 4.5 开始，不再提供为 armv6 设备构建的可能性（iPhone/iPod touch 第 1 代和第 2 代）。这意味着我们的 iPhone 2G 和 3G 应用程序没有新版本，这是非常不幸的。有谁知道是否会有解决方法？我真的没有看到任何技术原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T18:45:23.900

您可以安装多个版本的 xcode。在过去，这是需要使用较旧的 xcode 功能的修复程序。

这是一种解决方法，项目文件最终可能会以不再支持旧工具的方式发展，但目前，这将允许您为旧目标构建。

如果您有一个项目要在两个版本的 XCode 中使用，那么您最终可能不得不通过源代码控制技巧和/或文件改组来管理单独的项目控制文件。

我还建议通过旧版本进行项目结构更改和二进制文件管理（例如 Core Data 模型），因为 XCode 4.5 将向后兼容，但很少保证向前兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:24:24.020

是的，有解决方法。如果您需要真正利用新的 iOS 6 功能，请尝试[此相关问题](https://stackoverflow.com/q/12619124/119114)的前几个答案中的任何一个。 [第一个答案](https://stackoverflow.com/a/12678077/119114)需要同时使用 Xcode 4.4 和 4.5。如果您永远不想打开 Xcode 4.4，[请使用第二个答案](https://stackoverflow.com/a/12836808/119114)。

如果您只是希望能够在 Xcode 4.5 中构建适用于 armv6、armv7 和 armv7s 设备的可执行文件，而无需实际利用新的 iOS 6 SDK API，那么您[可以查看我对另一个问题的回答](https://stackoverflow.com/a/13061562/119114)，这要简单得多。 .. 但有一个限制，即您不能在 iOS 6 设备上利用新的 iOS 6 功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:21:58.217

我在 chpwn 博客中找到了另一个解决方案：[Building for armv6 in Xcode 4.5](http://blog.chpwn.com/post/31824877081)。
这允许您使用 Xcode 4.5 但使用 5.1 SDK 进行编译。缺点：使用这个技巧时不能使用 iOS 6 SDK，也不能为 armv7s 构建。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T18:53:37.190

您可以添加字符串“armv6 armv7”作为架构。不要选择预定义的设置。

# c# - 如何从给定的日期和不包括星期日的日期中查找结束日期

> ID：12474875
> 
> 赞同：3
> 
> 时间：2012-09-18T10:12:09.890
> 
> 标签：c#, asp.net

我有我的开始日期`05/03/2012`和持续时间`200`现在是几天我想得到不包括星期日的结束日期。所以我的结束日期应该是`05/02/2013`..有人可以帮助我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:50:32.840

帮我试试这个：

```
var startDate = new DateTime(2012, 5, 3);
var sundaysOverDuration = 200 / 7;
var actualDuration = 200 + sundaysOverDuration;
var newDate = startDate.AddDays(actualDuration); 
```

老实说，我也不得不承认，[这个链接](http://alecpojidaev.wordpress.com/2009/10/29/work-days-calculation-with-c/)在处理这些类型计算时存在的许多异常方面非常优雅。我不确定你是否需要这么复杂的东西，但值得让你知道。我将内联代码只是为了确保在链接断开时保留它。

```
public static double GetBusinessDays(DateTime startD, DateTime endD) 
{
    double calcBusinessDays =
        1 + ((endD-startD).TotalDays * 6 -
        (startD.DayOfWeek-endD.DayOfWeek) * 2) / 7;
    if ((int)startD.DayOfWeek == 0) calcBusinessDays --;
    return calcBusinessDays;
}

public static DateTime AddWorkDaysToStartDate(DateTime startD, double businessDays)
{
    int DoW = (int)startD.DayOfWeek;
    double temp = businessDays + DoW + 1;
    if (DoW != 0) temp --;
    DateTime calcendD = startD.AddDays(
    Math.Floor(temp / 6)*2-DoW + temp
        - 2* Convert.ToInt32(temp % 6 == 0)) ;
} 
```

最后，根据您的问题，您似乎不需要处理假期，但如果您这样做，解决方案会复杂得多，并且需要数据库驱动，所以请记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:19:46.053

您可以使用[.NET 的时间段库中的](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)**CalendarDateAdd**类：

```
// ----------------------------------------------------------------------
public void AddDaysSample()
{
    CalendarDateAdd calendarDateAdd = new CalendarDateAdd();
    calendarDateAdd.AddWorkingWeekDays();
    calendarDateAdd.WeekDays.Add( DayOfWeek.Saturday );

    DateTime start = new DateTime( 2012, 5, 3 );
    TimeSpan duration = new TimeSpan( 200, 0, 0, 0 );
    DateTime? end = calendarDateAdd.Add( start, duration );
    Console.WriteLine( "AddDaysSample : {0:d} + {1} days = {2:d}", start, duration.Days, end );
} // AddDaysSample 
```

# asp.net-mvc - 必须设置 ErrorMessageString 或 ErrorMessageResourceName，但不能同时设置错误使用 CreditCardAttribute

> ID：12474876
> 
> 赞同：52
> 
> 时间：2012-09-18T10:12:21.763
> 
> 标签：asp.net-mvc, asp.net-mvc-4

这是我的模型：

```
namespace MvcApplication2.Models
{
    public class CreditCard
    {
        [CreditCard(ErrorMessageResourceType = typeof(Messages), ErrorMessageResourceName = "CardNumberInvalid")]
        public string CardNumber { get; set; }
    }
} 
```

这是我的 Messages.resx：

名称 值

CardNumberInvalid 检查您的卡号是否正确

这是我的观点：

```
@model MvcApplication2.Models.CreditCard
@Html.TextBoxFor(m => m.CardNumber); 
```

在 MVC 版本 3 中，这可以正常工作。在 MVC 4 中，当我转到此页面时，我得到一个异常提示“必须设置 ErrorMessageString 或 ErrorMessageResourceName，但不能同时设置”。这只发生在 CreditCardAttribute 上。其他验证属性（例如RequiredAttribute）可以正常工作。我只设置了 ErrorMessageResourceName。我没有设置ErrorMessageString，所以不明白我做错了什么。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-09-19T03:47:06.223

这是 .Net 4.5 中的一个已知问题。添加“ErrorMessage = null”命名参数应该可以解决这个问题。

参考：参考链接现已损坏。 ~~[http://connect.microsoft.com/VisualStudio/feedback/details/757298/emailaddress-attribute-is-unable-to-load-error-message-from-resource-mvc](http://connect.microsoft.com/VisualStudio/feedback/details/757298/emailaddress-attribute-is-unable-to-load-error-message-from-resource-mvc)~~

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-12-30T22:53:36.720

```
[CreditCard(ErrorMessageResourceType = typeof(Messages), ErrorMessageResourceName = "CardNumberInvalid", ErrorMessage = null)] 
```

添加`ErrorMessage = null`将解决您的问题。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-25T09:44:41.660

我遇到了这个问题，因为我实现了一个自动`RequiredAttributeAdapter`设置`ErrorMessageResourceName`属性的 .

您可以通过在设置之前检查是否设置了 ErrorMessage 属性来修复它`ErrorMessageResourceName`：

```
/// <summary>
/// Creates a new instance of the RequiredAttributeAdapter, used for switching the default required message
/// format
/// </summary>
public CustomMessageRequiredAttributeAdapter(
    ModelMetadata metadata,
    ControllerContext context,
    RequiredAttribute attribute
)
    : base(metadata, context, attribute)
{
    if (string.IsNullOrEmpty(attribute.ErrorMessage))
    {
        attribute.ErrorMessageResourceType = typeof (ValidationMessages);
        attribute.ErrorMessageResourceName = "PropertyValueRequired";
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-27T02:00:39.890

由于任何使用自定义验证属性并且还想从资源中加载错误消息以进行本地化的人都会遇到这个问题，所以我在这里分享我的解决方法。
假设您有一个像这样的自定义验证属性

```
[FileTypeMustBe("jpg")]
public HttpPostedFileBase MyFile {get; set;} 
```

在您的自定义验证属性中添加此代码

```
public override string FormatErrorMessage(string name)
    {
        return String.Format(CultureInfo.CurrentCulture,
          ErrorMessageString, name, ValidFileType);
    } 
```

ValidFileType 是一个属性的名称，它接受自定义验证属性的输入参数（此处为jpg），现在我们可以按照我们喜欢的方式装饰我们的模型属性

```
[FileTypeMustBe("jpg", ErrorMessageResourceType = typeof(Resources.Resources), ErrorMessageResourceName = "WrongFileTypeError")]
public HttpPostedFileBase MyFile {get; set;} 
```

如您所见，无需再添加`ErrorMessage=null`，因为我们在自定义验证类中处理了它。只是不要忘记如果您在自定义验证中初始化了任何错误消息字符串，您必须现在将其删除并`FormatErrorMessage`改用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-11T05:56:09.177

更换

```
[Required(ErrorMessage = "")] 
```

和

```
[Required()] 
```

为我工作，将**ErrorMessage**保留为空白字符串也没有任何意义

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-23T06:21:57.000

我在使用返回 a`ValidationResult`而不是a 的自定义“ValidationAttribute”时遇到了这个问题`bool`。当我返回一个未分配的字符串时，`ValidationResult`它会抛出错误

`Either ErrorMessageString or ErrorMessageResourceName must be set, but not both`

当我返回时`ValidationResult(null)`，该字段永远不会验证，它总是无效的。看起来 .NET 会寻找 a`ValidationResult`来确定该字段是否有效，而不是它是否包含错误字符串。为了让它验证并消除我需要返回`null`结果的错误。

```
protected override ValidationResult IsValid(object value, ValidationContext validationContext)
{
    string errMsg = null;

    // Do validation and assign the error message

    return (!string.IsNullOrEmpty(errMsg)) ? new ValidationResult(errMsg) : null;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-11T18:28:18.713

我对自定义 ValidationAttribute 有一个类似的问题。

在 IsValid 方法中，我设置了 ErrorMessage。解决方法是删除对 ErrorMessage 属性的分配...

```
protected override ValidationResult IsValid(object value, ValidationContext validationContext)
{
    //code before ...
    this.ErrorMessage = this.FormatErrorMessage(validationContext.DisplayName); //NOT GOOD...
    ValidationResult validationResult = new ValidationResult(this.ErrorMessage, //And using the ErrorMessage Here...
        new[] { validationContext.MemberName });
    return validationResult;
} 
```

我正在编写单元测试，只有当我一个接一个地运行/调试时，它们才会被传递。但是当我点击“全部运行”时，只有第一个通过了？他们没有以任何方式链接......

所以，是的，只需删除对 ErrorMessage 属性的分配

我希望它会帮助别人！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-08T20:07:00.167

就我而言，我使用`ErrorMessage` 的是`""`.Net Core 3.1 API。

```
[Required]
[RegularExpression("^[1-9]\\d*$", ErrorMessage ="")]
public int fieldName { get; set; } 
```

我改成，`ErrorMessage ="Invalid Value Or some other message"`问题就解决了。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-18T17:11:53.403

我在本地化的财产上遇到了同样的问题。我已经定义了 ErrorMessageResourceType 然后是 ErrorMessageResourceName 但是错误地将 ErrorMessage 属性也放在了引发异常的地方

```
[NotEqualTo("User_Name", ErrorMessageResourceType = typeof(LROResources.Global), ErrorMessageResourceName = "UserPasswordCannotBeUsername", ErrorMessage = "The password cannot be the same as your Username.")] 
```

因此，就我而言，只需删除即可`ErrorMessage`解决问题。

# javascript - 如果尚未加载 jquery，则加载它，如果没有可用连接，则使用本地版本

> ID：12474881
> 
> 赞同：0
> 
> 时间：2012-09-18T10:12:35.370
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
if (typeof jQuery == 'undefined') {
var script = document.createElement('script');
script.type = "text/javascript";
script.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js";
document.getElementsByTagName('head')[0].appendChild(script);
}
</script> 
```

这是我当前的代码。`script.src = "http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"`如果失败，有什么方法可以加载 jquery lib 的本地副本？这个脚本是异步加载的吗？或者它会冻结ui线程直到加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:17:23.140

你可以这样做：

```
<script src="cdn.jquery.js"></script>
<script>window.jQuery || document.write('<script src="/local/jquery.js"><\/script>')</script> 
```

# c# - 循环遍历 JSON data.d

> ID：12474885
> 
> 赞同：0
> 
> 时间：2012-09-18T10:12:58.037
> 
> 标签：c#, asp.net, vb.net, json

**`data.d`=**

```
[
  {
    "NodeId": "BK01",
    "NodeName": "Books",
    "ParentId": null,
    "Likes": null
  },
  {
    "NodeId": "CO01",
    "NodeName": "Computers",
    "ParentId": null,
    "Likes": null
  },
  {
    "NodeId": "GA01",
    "NodeName": "Gaming",
    "ParentId": null,
    "Likes": null
  },
  {
    "NodeId": "MO01",
    "NodeName": "Mobile & Accessories",
    "ParentId": null,
    "Likes": null
  }
] 
```

**网络服务**

```
 <WebMethod()> _
    Public Shared Function getCategories() As String
        Dim details As New List(Of Nodes)()
        Dim index As New Default2
        Using ds As Data.DataSet = index.db.ExecuteDataSet(CommandType.Text, "SELECT NodeID,NodeName FROM Nodes WHERE ParentID='1'")
            Dim JaggedArray As String()() = New String(ds.Tables(0).Rows.Count - 1)() {}
            Dim i As Integer = 0
            For Each rs As DataRow In ds.Tables(0).Rows
                Dim node As New Nodes()
                node.NodeId = rs("NodeId").ToString
                node.NodeName = rs("NodeName").ToString
                details.Add(node)
                'JaggedArray(i) = New String() {rs("NodeName").ToString(), rs("NodeID").ToString()}
                i = i + 1
            Next
        End Using
        Dim js As New JavaScriptSerializer()
        Dim strJSON As String = js.Serialize(details.ToArray)
        Return strJSON

    End Function 
```

**AJAX 调用**

```
<script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        //alert("!!!");
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Default2.aspx/getCategories",
            data: "{}",
            dataType: "json",
            success: function(data) {
                var nodes = eval(data);
                alert(data.NodeName);
                $('#output').text(data.d);
                $.each(data.d, function(index, node) {
                $('#output').append('<p><strong>' + node.NodeName + ' ' +
                            node.NodeID + '</strong><br /> ');
                });
            },
            error: function(result) {
                alert("Error");
            }
        });
    });
</script> 
```

如何循环`data.d`获取值？`data.d.length`给了我`219`，但应该是 4 ？我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:17:24.743

您可以将 $.map 用于 EG

```
$(document).ready(function () {
    $.ajax({
        type: "POST",
        url: "/--service--",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: function (data) {
            $.map(data.d, function (item) {
                $("#name").append('<option value=' + item.ID+ '>' + item.Name + '</option>');
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:25:28.383

您可以使用以下方法遍历 data.d：

```
$.each(data.d, function(index, Value)
{
      //
}); 
```

但是由于您要返回一个字符串，所以我认为它对您不起作用，最好返回一个字符串数组。=======================编辑==================== 创建一个新类，如：

```
public class MyClass
{
      public MyNodes as Nodes()
} 
```

并在你的代码中`getCategories`这样做：

```
Dim details As New List(Of Nodes)()
    Dim index As New Default2
Dim myObj As New MyClass
    Using ds As Data.DataSet = index.db.ExecuteDataSet(CommandType.Text, "SELECT NodeID,NodeName FROM Nodes WHERE ParentID='1'")
        Dim JaggedArray As String()() = New String(ds.Tables(0).Rows.Count - 1)() {}
        Dim i As Integer = 0
        For Each rs As DataRow In ds.Tables(0).Rows
            Dim node As New Nodes()
            node.NodeId = rs("NodeId").ToString
            node.NodeName = rs("NodeName").ToString
myObj.Add(node)
            'details.Add(node)
            'JaggedArray(i) = New String() {rs("NodeName").ToString(), rs("NodeID").ToString()}
            i = i + 1
        Next
    End Using
    Dim js As New JavaScriptSerializer()
    Dim strJSON As String = js.Serialize(myObj)
    Return strJSON 
```

我是 C# 人而不是 VB.NET 人，所以代码中可能存在一些问题，我相信你可以检查

# mysql - MySQL 从同一个表中选择当前列和上一列

> ID：12474886
> 
> 赞同：0
> 
> 时间：2012-09-18T10:13:05.867
> 
> 标签：mysql, sql, mysqli

我在表中有以下列`tbl`：

```
 OrderID:     Parent:     Child:
    1              1           1
    2              2           1
    3              1           2
    4              1           1
    5              2           1 
```

我想获取当前的 ( `OrderID`, `Parent`, `Child`) 并且`LOWER (OrderID,Parent,Child)`WHERE Parent and Child 等于当前 OrderID 的 Parent 和 Child。

因此，例如，如果我查询`OrderID=4`结果应该如下：

```
OrderID:  Parent:    Child:
4            1         1
1            1         1 
```

和`if OrderID=5`

```
OrderID:  Parent:    Child:
5           2           1
2           2           1 
```

顺便说一句，我可以在 PHP 中执行此操作，但我想在单个查询中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:19:39.137

这可以解决问题：

```
SELECT *
FROM tbl
WHERE Parent = (SELECT Parent FROM tbl WHERE OrderID = 4) 
    AND Child = (SELECT Child FROM tbl WHERE OrderID = 4) 
```

并在 php 中将行获取到一个数组中，搜索您的 OrderID 并获取它之前的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:20:15.893

```
SELECT * FROM FROM Orders WHERE  OrderID = 4
UNION ALL 
SELECT * FROM FROM Orders WHERE  Parent = 4 ORDER BY OrderID DESC Limit 1 
```

此外，如果你有时间看看我的这个答案会给你一个很好的示范。

[在 mysql 和 php 中寻找空闲时间块？](https://stackoverflow.com/questions/11262260/finding-free-blocks-of-time-in-mysql-and-php/11264562#11264562)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:20:19.577

```
SELECT * FROM FROM Orders WHERE  OrderID = @orderId
UNION ALL 
SELECT * FROM FROM Orders WHERE  Parent = @orderId 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T10:20:25.453

你可以这样做：

```
(SELECT OrderID, Parent, Child
FROM tbl
WHERE OrderID = 4)
UNION
(SELECT OrderID, Parent, Child
FROM tbl
WHERE Parent = (SELECT Parent FROM tbl WHERE OrderID = 4)
    AND Child = (SELECT Child FROM tbl WHERE OrderID = 4)
ORDER BY OrderID ASC LIMIT 1) 
```

我不确定这个的性能虽然......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T10:31:49.183

这对我有用。

```
select B.* from 
    (select A.Parent,A.Child from `tbl` A
    where A.OrderID = 4) C
    inner join `tbl` B
on C.Parent = B.Parent
and C.Child = B.Child
order by B.OrderID desc 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T11:27:02.667

好的，谢谢大家的回复，但我得到了自己的答案。

```
SELECT a.OrderID,a.Parent,a.Child FROM tbl a 
JOIN (SELECT OrderID,Parent,Child FROM tbl WHERE OrderID={$OrderID}) b 
ON a.Parent=b.Parent 
AND a.Child=b.Child 
WHERE a.OrderId<=b.OrderID 
ORDER BY OrderID 
DESC LIMIT 2 
```

# r - 使用 R 创建一个完整的拨号盘

> ID：12474887
> 
> 赞同：3
> 
> 时间：2012-09-18T10:13:08.377
> 
> 标签：r, matrix, dataframe, rbind

我对 R 比较陌生，如果这个问题太基本，请原谅。我想知道是否有一种使用 R 创建完整拨号盘的好方法和快速方法？

我有一个看起来像的矩阵：

```
 M1 M2 M3
   Line1  A  B  A
   Line2  A  A  B
   Line3  B  A  A 
```

从这个矩阵我想创建以下数据框：

```
 X       Y       M1   M2  M3
 Line1   Line1   AA   BB  AA
 Line1   Line2   AA   BA  AB
 Line1   Line3   AB   BA  AA
 Line2   Line1   AA   AB  BA
 Line2   Line2   AA   AA  BB
 Line2   Line3   AB   AA  BA
 Line3  Line1    BA   AB  AA
 Line3  Line2    BA   AA  AB
 Line3  Line3    BB   AA  AA 
```

我认为这可以通过创建几个嵌套循环并使用粘贴来组合 A 和 B 字母代码来实现。但可能有更好和更多“R-like”选项（使用`cbind()`？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T10:46:10.663

One approach is to think of the indices of the rows of your data that make up each line of the desired output. Using your data:

```
mat <- matrix(c("A","B","A",
                "A","A","B",
                "B","A","A"), ncol = 3, byrow = TRUE) 
```

I create those indices using `expand.grid()`. The first row of your output is formed by the concatenation of row 1 of `mat` with row 1 of `mat`, and so on. These indices are produced as follows

```
> ind <- expand.grid(r1 = 1:3, r2 = 1:3)
> ind
  r1 r2
1  1  1
2  2  1
3  3  1
4  1  2
5  2  2
6  3  2
7  1  3
8  2  3
9  3  3 
```

Note that to get what your output shows we need to take columns `r2` then `r1` rather than the other way round.

Now I just index `mat` with the second column of `ind` and the first column of `ind` and supply that to `paste0()` the output from which is a vector so we need to reshape it to a matrix.

```
> matrix(paste0(mat[ind[,2], ], mat[ind[,1], ]), ncol = 3)
      [,1] [,2] [,3]
 [1,] "AA" "BB" "AA"
 [2,] "AA" "BA" "AB"
 [3,] "AB" "BA" "AA"
 [4,] "AA" "AB" "BA"
 [5,] "AA" "AA" "BB"
 [6,] "AB" "AA" "BA"
 [7,] "BA" "AB" "AA"
 [8,] "BA" "AA" "AB"
 [9,] "BB" "AA" "AA" 
```

The `paste0()` step returns a vector of the pasted strings:

```
> paste0(mat[ind[,2], ], mat[ind[,1], ])
 [1] "AA" "AA" "AB" "AA" "AA" "AB" "BA" "BA" "BB" "BB" "BA" "BA" "AB" "AA" "AA"
[16] "AB" "AA" "AA" "AA" "AB" "AA" "BA" "BB" "BA" "AA" "AB" "AA" 
```

The trick as to why the matrix restructuring shown above works is to note that the entries in the output from `paste0()` are in column-major order because of how the index `ind` was formed. Essentially the two arguments passed to `paste0()` are:

```
> mat[ind[,2], ]
      [,1] [,2] [,3]
 [1,] "A"  "B"  "A" 
 [2,] "A"  "B"  "A" 
 [3,] "A"  "B"  "A" 
 [4,] "A"  "A"  "B" 
 [5,] "A"  "A"  "B" 
 [6,] "A"  "A"  "B" 
 [7,] "B"  "A"  "A" 
 [8,] "B"  "A"  "A" 
 [9,] "B"  "A"  "A" 
> mat[ind[,1], ]
      [,1] [,2] [,3]
 [1,] "A"  "B"  "A" 
 [2,] "A"  "A"  "B" 
 [3,] "B"  "A"  "A" 
 [4,] "A"  "B"  "A" 
 [5,] "A"  "A"  "B" 
 [6,] "B"  "A"  "A" 
 [7,] "A"  "B"  "A" 
 [8,] "A"  "A"  "B" 
 [9,] "B"  "A"  "A" 
```

R treats each as a vector and hence the output is a vector, but because R stores matrices by columns, we fill our output matrix with the pasted strings by columns also.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T11:07:27.173

您可能不需要几个循环来获得输出，这里有一个建议：

首先，让我们生成您的样本矩阵：

```
M <- matrix(c("A","B","A","A","A","B","B","A","A"), ncol = 3, byrow = TRUE)
rownames(M) <- c("Line1","Line2","Line3")
colnames(M) <- c("M1","M2","M3") 
```

一个容易在向量中的项目之间生成所有可能对的方法是使用`expand.grid()`：

```
d <- expand.grid(rownames(M), rownames(M)) 
```

在所需的输出中生成列 X 和 Y：

```
 Var1  Var2
1 Line1 Line1
2 Line2 Line1
3 Line3 Line1
4 Line1 Line2
5 Line2 Line2
6 Line3 Line2
7 Line1 Line3
8 Line2 Line3
9 Line3 Line3 
```

然后，您可以做的是`apply()`将相应的 M1、M2、M3 值粘贴在一起的每一行的函数：

```
apply(d, 1, function(x) { paste(M[x[1],], paste(M[x[2],]), sep="")} ) 
```

它将生成正确的组合，但不是正确的格式（还）：

```
 [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]
[1,] "AA" "AA" "BA" "AA" "AA" "BA" "AB" "AB" "BB"
[2,] "BB" "AB" "AB" "BA" "AA" "AA" "BA" "AA" "AA"
[3,] "AA" "BA" "AA" "AB" "BB" "AB" "AA" "BA" "AA" 
```

要向正确的方向翻转矩阵，您只需将其转置即可。

从那里，您可以一次将所有内容包装到数据框中：

```
df <- data.frame( d, t(apply(d, 1, function(x) { paste(M[x[1],], paste(M[x[2],]), sep="")} ))
colnames(df) <- c("X","Y","M1","M2", "M3") 
```

就在这里。

为了提高效率，您最终可以编写一个小函数，向其提交任何 M 矩阵。

```
get.it <- function(M){ 
    d <- expand.grid(rownames(M), rownames(M))
    e <- t(apply(d, 1, function(x) { paste(M[x[1],], paste(M[x[2],]), sep="")} ))
    output<- data.frame( d, e)
    colnames(output) <- c("X","Y","M1","M2","M3")
return(output)
} 
```

并且`get.it(M)`应该工作！

# css - 样式表中的响应式媒体查询不起作用

> ID：12474892
> 
> 赞同：1
> 
> 时间：2012-09-18T10:13:26.947
> 
> 标签：css, layout, responsive-design

我的 CSS 不适用于移动肖像。

我希望主顶部菜单出现在徽标下方。

这是我在 mo 的 css：

```
 @media screen and (max-width: 480px) {
       #wrapper { 
         width:100%; 
       }
       #logo {
         margin-left: 100px;
       }
       #menu { 
         width:100%;
         display:inline-block; 
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:43:44.103

嗨，现在将您的**包装器** `width 100%`定义 为`480px`这样

```
@media screen and (max-width: 480px) {

    #wrapper { width:480px; }

    #logo {
        margin-left: 100px;
    }

    #menu { width:100%;display:inline-block; }

} 
```

# facebook - 问题 FB.api('/me/likes/

> ID：12474894
> 
> 赞同：2
> 
> 时间：2012-09-18T10:13:29.067
> 
> 标签：facebook, facebook-graph-api

我有 fb api 的问题。

```
FB.api('/me/likes/pageid',function(response) {
console.log(response.data); 
}); 
```

我有

```
Object
category: "Entertainment"
created_time: "2012-09-17T16:56:56+0000"
id: "pageid"
name: "site.com" 
```

但在一台计算机上我有**未定义的 Object { data=[0]}**

我在facebook上都登录了。有任何想法吗？

在FF我有

```
An active access token must be used to query information about the current user. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T12:36:18.133

您必须指定一个有效的 access_token

这是正确的方法

```
FB.api('/me/likes/pageid', {access_token: "YOUR_ACCESS_TOKEN"}, function(response) {
   console.log(response.data); 
}); 
```

您必须将“user_likes”添加到应用程序的范围内才能检索结果

# ruby-on-rails - SSL 和非 SSL 页面的不同雾主机

> ID：12474895
> 
> 赞同：1
> 
> 时间：2012-09-18T10:13:36.617
> 
> 标签：ruby-on-rails, carrierwave, fog

我正在使用带有 Fog 的 Carrierwave 来管理 Rails 应用程序中的上传。最近，该应用程序的某些页面已更改为仅通过 HTTPS 提供服务。所以我的雾主机从

```
config.fog_host = "a%d.cdn.com" 
```

至

```
config.fog_host = "https://my-bucket.s3.amazonaws.com" 
```

是否可以将 Carrierwave 雾主机更改为接收请求并决定使用哪个雾主机的 Proc，就像此处描述的 Rails 资产主机一样

[http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper.html)

```
config.fog_host = Proc.new { |req|
  if req.ssl?
    "ssl_asset_host"
  else
    "non_ssl_asset_host"
  end
end 
```

我该怎么做？

# java - 到根文件夹的最快/最短方式？

> ID：12474898
> 
> 赞同：1
> 
> 时间：2012-09-18T10:13:39.220
> 
> 标签：java, android, google-drive-api

我在 Android 上使用 Google Drive SDK v2 来获取根文件夹列表。目前我看到了这些必需的步骤——它们似乎永远加载。没有更快的方法吗？

我尝试使用带有 q= 参数的搜索，但我没有让它工作（FileList 与 Files.List） - 不同的 API 级别？

```
FileList files = drive.files().list().setQ("'root' in parents and mimeType='application/vnd.google-apps.folder' and trashed=false"); 
```

这就是我目前所做的：

```
About about = drive.about().get().execute();
if (about != null) {
    ChildList childList = drive.children().list(about.getRootFolderId()).execute();
    if (childList != null) {
        List<ChildReference> listChildReference = childList.getItems();
        for (ChildReference childReference : listChildReference) {
            File file = drive.files().get(childReference.getId()).execute();
            if (file != null) {
                String fileExtension = file.getFileExtension();
                String mimeType = file.getMimeType();
                if (mimeType != null
                        && mimeType.equals("application/vnd.google-apps.folder")
                        && (fileExtension == null || fileExtension.equals(""))) {
                    Log.d(this.getClass().getName(), file.getTitle());
                }
            }
        }
    }
} 
```

Android 应用程序最快的是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:19:44.270

我**个人**的看法是避免使用Drive SDK，直接调用REST API。这是一个相当简单的 API，而且文档的结构方式，无论如何你都必须理解它才能使用 SDK。您的好处是，如果某些事情不起作用，您可以直接将您的应用程序与网络上发生的事情进行比较并解决任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T18:46:59.417

找到了：

```
@Override
protected ArrayList<File> doInBackground(final Void... voids) {
    ArrayList<File> result = new ArrayList<File>();

    Files.List request = null;

    boolean ok = true;

    do {
        try {
            request = drive
                    .files()
                    .list()
                    .setMaxResults(200)
                    .setQ("'root' in parents and mimeType='application/vnd.google-apps.folder' and trashed=false");
            FileList files = request.execute();

            result.addAll(files.getItems());
            request.setPageToken(files.getNextPageToken());
        } catch (IOException exception) {
            ok = false;
        }
    } while (ok && request.getPageToken() != null && request.getPageToken().length() > 0);

    return result;
} 
```

# iphone - 在 xcode 中自定义 iphone 按键面板

> ID：12474900
> 
> 赞同：0
> 
> 时间：2012-09-18T10:13:39.970
> 
> 标签：iphone, xcode, ios5, xcode4, xcode4.2

我正在开发不同语言的 iphone 应用程序，现在我必须更改按键面板布局。

图片如下

![布局](../Images/12d50ced8506a96658492a10fa45cb16.png)

我想用不同的语言更改返回按钮文本。这可能吗？如果是的话，请给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:15:23.837

键盘的语言是用户的选择。如果他来自德国，他可能也将操作系统和键盘设置为德语。尝试转到“设置”应用并更改键盘。

# java - 当 Quartz 作业运行时 Spring 终止上下文

> ID：12474904
> 
> 赞同：0
> 
> 时间：2012-09-18T10:13:43.587
> 
> 标签：java, spring, quartz-scheduler

我创建 Quartz 作业并启动调度程序

```
JobDetail job = newJob(InfoCrawlerJob.class)
                        .withIdentity("job id", "group")
                        .usingJobData(jobData)
                        .build()

                SimpleTrigger trigger = newTrigger()
                        .withIdentity("trigger id", "trigger-group")
                        .startNow()
                        .withSchedule(simpleSchedule()
                        .withIntervalInSeconds(100)
                        .withRepeatCount(10))
                        .build()

                scheduler.scheduleJob(job, trigger)
                scheduler.start() 
```

石英工作正常工作。主要问题是 Spring 不会等待作业完成。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T11:01:14.053

看看 Spring Quartz 支持

*   [Spring参考第25.6章使用OpenSymphony Quartz调度器](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)
*   类[org.springframework.scheduling.quartz.SchedulerFactoryBean](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/quartz/SchedulerFactoryBean.html)

这个类有一个方法：[setWaitForJobsToCompleteOnShutdown(boolean)](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/quartz/SchedulerFactoryBean.html#setWaitForJobsToCompleteOnShutdown%28boolean%29)，我希望这就是你所需要的。

# java - 在春季使用复选框在类中绑定数组列表的问题

> ID：12474907
> 
> 赞同：2
> 
> 时间：2012-09-18T10:13:49.923
> 
> 标签：java, spring, spring-mvc

我试图通过与Spring 中`courseList`的对象绑定来从 JSP 页面获取。`student`下面是我的`Student`课。但是，即使我选中复选框，大小`ArrayList`也是 0。你能告诉我为什么会这样吗？

谢谢。

PS这是我得到的错误：

```
[Field error in object 'student' on field 'courseList': rejected value
[mad.nurseryapplication.model.Course@1c92233b,mad.nurseryapplication.model.Course@3e470524];
codes [typeMismatch.student.courseList,typeMismatch.courseList,typeMismatch.java.util.List,typeMismatch];
arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [student.courseList,courseList]; arguments []; default message [courseList]];
default message [Failed to convert property value of type 'java.lang.String[]' to required type 'java.util.List' for property 'courseList' 
```

这是学生课的一部分。它具有正确的所有 getter 和 setter。

```
@Table(name="student")
public class Student {

    @Id @GeneratedValue(strategy=GenerationType.AUTO)
    private long id;

    @Column(name="first_name")
    private String firstName;

    @Column(name="last_name")
    private String lastName;
    private String grade;

    @Column(name="home_number")
    private String homeNumber;

    @Column(name="home_address")
    @Lob
    private String homeAddress;

    @Column(name="date_of_registration")
    @Temporal(TemporalType.DATE)
    private Date dateOfRegistration;

    @ManyToMany
    @JoinTable(name="course_student",joinColumns=@JoinColumn(name="student_id"),inverseJoinColumns=@JoinColumn(name="course_id"))
    private List<Course> courseList = new ArrayList<Course>(); 
```

这是我的jsp页面代码。

```
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Food List</title>
</head>
<body>
    ${message}
    <br /> ${operation}
    <br /> Please Select Subjects for the Student ${student.firstName}
    <br /> Student Id is ${student.id}
    <br />

    <form:form method="post" action="${action}" modelAttribute="student">
        <table>
            <tr>
                <th>enroll</th>
                <th>Subject</th>
            </tr>
            <form:hidden path="id" value="${student.id}"/>
            <c:forEach items="${avacourses}" var="course" varStatus="status">
                <tr>
                    <td><form:checkbox path="courseList" value="${course}" /></td>
                    <td>${course.courseName}</td>
                </tr>
            </c:forEach>
        </table>
        <br />
        <input type="submit" value="enroll" />

    </form:form>
</body>
</html> 
```

下面是我处理它的控制器代码。

```
@RequestMapping("/addstudent")
    public ModelAndView addStudent(@ModelAttribute("student")Student student,BindingResult result){

        student = studentService.addStudent(student);
        Collection<Course> availableCourses = courseService.getAvailableCourses(student.getGrade());
        ModelAndView mav = new ModelAndView();
        mav.setViewName("/course/courselist");
        mav.addObject("operation", "Enroll the courses to the student");
        mav.addObject("action", "enroll.html");
        mav.addObject("student", student);
        mav.addObject("avacourses", availableCourses);

        return mav;
    }

    @RequestMapping("/enroll")
    public ModelAndView ModelAndView(@ModelAttribute("student")Student student, BindingResult result){

        System.out.println(student.getId());
        System.out.println(student.getCourseList().size());
        ModelAndView mav = new ModelAndView("/student/student","command",new Student());
        mav.addObject("operation", "Add a new Student");

        return mav;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:12:21.940

~~您是否尝试过使用`<form:checkboxes>`标签？~~

 ~~```
<form:checkboxes items="${avacourses}" path="courseList" /> 
```~~  ~~另外，看看：[Spring MVC 使用 form:checkbox 绑定数据](https://stackoverflow.com/questions/8700339/spring-mvc-usage-of-formcheckbox-to-bind-data)和[Spring Binding List<Object> to Form:checkboxes](https://stackoverflow.com/questions/7421346/spring-binding-listobject-to-formcheckboxes)。

编辑：刚刚意识到它会破坏你的标签 - 由 forEach 循环填充。~~

# c# - 如何使用反射获取类的所有静态属性及其值

> ID：12474908
> 
> 赞同：45
> 
> 时间：2012-09-18T10:13:50.687
> 
> 标签：c#, reflection

我有一堂这样的课：

```
public class tbl050701_1391_Fields
{
    public static readonly string StateName = "State Name";
    public static readonly string StateCode = "State Code";
    public static readonly string AreaName = "Area Name";
    public static readonly string AreaCode = "Area Code";
    public static readonly string Dore = "Period";
    public static readonly string Year = "Year";
} 
```

我想编写一些返回`Dictionary<string, string>`具有这些值的语句：

```
Key                            Value
--------------------------------------------
"StateName"                    "State Name"
"StateCode"                    "State Code"
"AreaName"                     "Area Name"
"Dore"                         "Period"
"Year"                         "Year" 
```

我有这个代码来获取一个属性值：

```
public static string GetValueUsingReflection(object obj, string propertyName)
{
    var field = obj.GetType().GetField(propertyName, BindingFlags.Public | BindingFlags.Static);
    var fieldValue = field != null ? (string)field.GetValue(null) : string.Empty;
    return fieldValue;
} 
```

如何获取所有属性及其值？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-09-18T10:16:32.110

> 我如何获得所有属性及其值？

首先，您需要区分*字段*和*属性*。看起来你在这里有字段。所以你想要这样的东西：

```
public static Dictionary<string, string> GetFieldValues(object obj)
{
    return obj.GetType()
              .GetFields(BindingFlags.Public | BindingFlags.Static)
              .Where(f => f.FieldType == typeof(string))
              .ToDictionary(f => f.Name,
                            f => (string) f.GetValue(null));
} 
```

注意：GetValue 需要 null 参数才能使其正常工作，因为字段是静态的并且不属于该类的实例。

# .htaccess - 基于网页名称的 HTAccess 重写？

> ID：12474909
> 
> 赞同：0
> 
> 时间：2012-09-18T10:13:53.653
> 
> 标签：.htaccess, seo, rewrite

我在表单的网页上有一个项目列表：

*   `www.mydomain.com/item1-EUR.html`
*   `www.mydomain.com/item1-GBP.html`
*   `www.mydomain.com/item2-EUR.html`
*   `www.mydomain.com/item2-GBP.html`

是否可以访问以下网页文件：

`/myitems/eur/item1-EUR.html`， 或者`/myitems/gbp/item1-GBP.html`

我试图表明项目网页位于根目录中，但不会弄乱根区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:19:03.250

尝试在文档根目录的 htaccess 文件中添加这些规则（最好高于您可能已经拥有的任何规则）：

```
RewriteEngine On
RewriteRule ^([^-]+)-EUR\.html$ /myitems/eur/$1-EUR.html [L]
RewriteRule ^([^-]+)-GBP\.html$ /myitems/gbp/$1-GBP.html [L] 
```

# java - openam 客户端 sdk 会话 ID 无效

> ID：12474911
> 
> 赞同：1
> 
> 时间：2012-09-18T10:13:56.240
> 
> 标签：java, opensso, openam

我将 openam 与 tomcat 7 一起使用，以下行总是产生异常 SSOTokenManager manager = SSOTokenManager.getInstance(); SSOToken ssoToken = manager.createSSOToken(request);

无效的会话 ID

我认为某些配置或某些东西可能有问题

有什么帮助吗？？？

amSSOProvider：09/18/2012 01:18:01:882 PM EEST：线程 [http-bio-9090-exec-151,5,main] 无法从 HttpRequest com.iplanet.dpro.session.SessionException 创建 SSOToken：无效会话 ID。在 com.iplanet.dpro.session.Session.getSession(Session.java:1062) 在 com.iplanet.sso.providers.dpro.SSOProviderImpl.createSSOToken(SSOProviderImpl.java:92) 在 com.iplanet.sso.SSOTokenManager.createSSOToken (SSOTokenManager.java:241) 在 main.TestServlet2.doGet(TestServlet2.java:48) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:621) 在 javax.servlet.http.HttpServlet.service(HttpServlet. java:723) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core .

com.iplanet.sso.SSOException：会话 ID 无效。在 com.iplanet.sso.providers.dpro.SSOProviderImpl.createSSOToken(SSOProviderImpl.java:111) 在 com.iplanet.sso.SSOTokenManager.createSSOToken(SSOTokenManager.java:241) 在 main.TestServlet2.doGet(TestServlet2.java:48 ) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:621) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:723) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain. java:304) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) at org.apache.catalina.core .StandardContextValve.invoke(StandardContextValve.java:170) 在 org.apache.catalina.authenticator.AuthenticatorBase。concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:909) at java.lang.Thread.run(Thread.java:619) 原因：com.iplanet.dpro.session.SessionException：会话 ID 无效。在 com.iplanet.dpro.session.Session.getSession(Session.java:1062) 在 com.iplanet.sso.providers.dpro.SSOProviderImpl.createSSOToken(SSOProviderImpl.java:92)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T10:35:35.520

确保您的应用程序的域名与 openam 服务器的域名相关，如果 openam 域服务器像 openam.example.com 这样的 cookie 名称是 .example.com，那么您的应用程序也在这个域中 yourhost.example。 com 这样我们就可以从 cookie 中获取令牌。

# lucene - 卢森·卢克。上次搜索时间是多少？

> ID：12474918
> 
> 赞同：2
> 
> 时间：2012-09-18T10:14:18.863
> 
> 标签：lucene, luke

Luke 显示如下结果：

最后搜索时间：67999 us

什么是“我们”？如何将其转换为ms？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T10:16:01.903

这实际上表示 μs 或微秒（不幸的是，它不是 ASCII，因此希腊字母 mu 被替换为外观相似的 u）。要获得 ms，请除以 1000。

# caching - ExtJS 4 - 从不在树面板中缓存树节点

> ID：12474919
> 
> 赞同：5
> 
> 时间：2012-09-18T10:14:20.440
> 
> 标签：caching, extjs, extjs4, treenode, treepanel

我有一个简单的 Ext.tree.Panel，它使用 ajax 代理从 Ext.data.TreeStore 加载其数据。

扩展树节点时的默认行为似乎是：

*   如果之前展开：从缓存中检索
*   如果从未扩展：从服务器检索

如何关闭缓存选项，使其**永远不会**缓存（即始终从服务器检索）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T14:03:18.187

将其作为监听器放在商店中以获得所需的行为：

```
collapse: function(node){
    node.removeAll();
    node.set("loaded", false);
} 
```

# php - 以编程方式创建整个 Drupal 站点

> ID：12474923
> 
> 赞同：0
> 
> 时间：2012-09-18T10:14:26.943
> 
> 标签：php, drupal, drupal-7

我将开始一个新项目，我想避免重新创建和填充具有所有自定义内容、模块和功能的站点所需的繁琐任务。

我的想法是创建 PHP 脚本（类似于`profile`文件夹中的安装脚本）来填充用户、内容、菜单、视图等。通过这种方式，您可以执行脚本并从头开始重建整个站点。

你知道任何工具/文档可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T11:30:58.500

你应该看看[`drush make`](http://www.drush.org/docs/make.txt)，它是[`drush`](http://drupal.org/project/drush)Drupal 非常有用的命令行 shell 和脚本界面的一部分。

您可以使用以下命令从现有 Drupal 安装生成启动 makefile：

```
 drush make-generate /path/to/make-file.make 
```

.. 然后根据需要调整配置，包括自定义文件/模块下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:09:24.483

好吧，您总是可以建立新的个人资料来帮助您建立新的网站。请查看[如何编写 Drupal 7 安装配置文件](http://drupal.org/node/1022020)。它类似于构建新模块（已记录）。

为了我们公司的需要，我们构建了两种类型的配置文件安装，但有时复制现有站点并将其安装在新域上更值得。但我认为我们的需求与您的不同。

# c# - 对数据集中表中的数据进行排序和访问（C#）

> ID：12474926
> 
> 赞同：0
> 
> 时间：2012-09-18T10:14:39.313
> 
> 标签：c#

我在插入新行后对我的数据表进行排序时遇到问题。我直接使用这样的数据值

```
TB_Test.Text = dataset.table[index].Test.ToString(); 
```

我的 WPF 上有 50 个这样的文本框。我还希望用户能够对表格行进行 + 和 - 操作。

用户在 ID 之类的列之后插入新行后，如何对数据进行排序？我仍然希望能够通过上面的代码访问数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:47:26.253

You can directly sort `DataTable` using it's `Select` method. If not you will have to wrap the table with a `DataView` as [AVD](https://stackoverflow.com/users/142822/avd) mentioned.

[MSDN have a sample snippet on Direct Filter and Sort](http://msdn.microsoft.com/en-us/library/zk13kdh0%28v=vs.71%29.aspx). This returns a `DataRow` array.

```
dataset1.Table1.Select(null, "Id DESC", DataViewRowState.CurrentRows); 
```

Also, [SheoNarayan's post](http://www.dotnetfunda.com/articles/article131.aspx) have some code snippets using DataView.

Which ever the approach, you will need to apply this logic when presenting data.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:21:25.827

设置`DataView.Sort`表达式。

```
DataView dataView=dataSet.Tables["tableName"].DefaultView;
dataView.Sort="columnName DESC"; // or "columnName" 
```

# jquery - jquery动态改变css样式

> ID：12474928
> 
> 赞同：1
> 
> 时间：2012-09-18T10:14:44.197
> 
> 标签：jquery, css

```
 <style type="text/css">
        .style1
        {
            width: 50%; //must to be dynamically change == e.pageX
            height: 100%;
        }
    </style>

<script type="text/javascript">
    jQuery(document).ready(function () {
        $(document).mousemove(function (e) {
            $('.changes').val(e.pageX);
        });
    });
</script>

<asp:Image ID="Image1" runat="server" cssClass="changes style1"  ImageUrl="~/8.jpg"/> 
```

我如何改变 jquery 宽度：**%; 在 style1 == e.pageX

图像宽度跟随鼠标，无需任何点击和页面重新加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:16:47.803

```
jQuery(document).ready(function () {
    $(document).mousemove(function (e) {
        $('.changes').width(e.pageX);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T10:22:31.467

您不需要更改样式 val 您只需要使用更改样式宽度属性值`$("element").width()`

你可以这样做：

```
<style type="text/css">
.style1
  {
    width: 50%; //must to be dynamically change == e.pageX
    height: 100%;
  }
</style>

<script type="text/javascript">
    jQuery(document).ready(function () {
        $(document).mousemove(function (e) {
            $('.changes').width(e.pageX);   // See the jQuery width [here][1]
        });
    });
</script>

<asp:Image ID="Image1" runat="server" cssClass="changes style1"  ImageUrl="~/8.jpg"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:21:23.240

我想这就是你想要的：

```
jQuery(document).ready(function() {
    $(this).mousemove(function(e) {
        $('.style1').width(e.pageX);
    });
}); 
```

[这是一个小提琴](http://jsfiddle.net/37f84/)

# android - 如何根据要求用颜色填充列表行？

> ID：12474930
> 
> 赞同：0
> 
> 时间：2012-09-18T10:14:56.600
> 
> 标签：android, listview

我想显示当天的事件，因此我[使用它](https://stackoverflow.com/questions/6858162/custom-calendar-dayview-in-android)来创建以下视图![在此处输入图像描述](../Images/bf0002f56fea5d3c546fd42c0ac11a7f.png)。现在我想在那个视图上显示我的事件，我想用颜色填充那个特定的预定时间。谁能帮我做到这一点。我没有 onclickListener 我需要在预定时间显示事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:32:22.403

您可以使用列表适配器的 getView()。

在该方法中，您可以设置填充相应行的条件。而已。

供您参考，[请检查](https://stackoverflow.com/questions/2217753/changing-background-color-of-listview-items-on-android)@ubzack 提供的此解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:40:59.213

```
for(int i=0; i&ltparent.getChildCount(); i++) `{
     if(i == position)
     {
               parent.getChildAt(i).setBackgroundColor(Color.BLUE);
     }
     else
     {
               parent.getChildAt(i).setBackgroundColor(Color.BLACK);
     }
 }` 

```

# ios - UITableView 奇特的两阶段更新

> ID：12474935
> 
> 赞同：2
> 
> 时间：2012-09-18T10:15:18.550
> 
> 标签：ios, core-data, uitableview, restkit

我有一个由 NSFetchedResultsController 驱动的 UITableView。tableview 有一个自定义页脚视图，我正在使用 RestKit 从 api 获取数据并将响应映射到 Core Data。

在 RestKit 请求返回后，我遇到了一个非常奇怪的行为，其中响应被映射到核心数据，我的 FetchedResultsController 发送其委托（我的 tableview 控制器）更新，并且 tableview 部分更新，所有这些都在不到 1 秒的时间内完成。然后，几秒钟后，tableview 完成更新。我说 tableview 是部分更新的，因为起初 tablefooterview 没有重绘，并且在它下面添加了单元格。直到延迟之后，页脚才移动到位。

我尝试使用仪器分析应用程序，这似乎不是基于 CPU 的绘图/加载单元格延迟。我还尝试仅在配置单元格以最小化复杂性时简单地设置单元格的标题标签。我在设备和模拟器上也看到了相同的行为。

我真的很想追踪并消除这种延迟，因为它确实会导致糟糕的用户体验。

日志中的一个例外：

```
2012-09-18 10:39:43.695 MyApp[28881:470f] -[RDRMarketBooksViewController controllerWillChangeContent:] [Line 236] controller => <NSFetchedResultsController: 0xe657570>
2012-09-18 10:39:43.695 MyApp[28881:470f] -[RDRMarketBooksViewController controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:] [Line 267] controller => <NSFetchedResultsController: 0xe657570>
(...19 similiar lines...)
2012-09-18 10:39:43.703 MyApp[28881:470f] -[RDRMarketBooksViewController controllerDidChangeContent:] [Line 301] controller => <NSFetchedResultsController: 0xe657570>
2012-09-18 10:39:43.705 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xed5f890; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xed5f9b0>>, indexPath => <NSIndexPath 0xed5eab0> 2 indexes [0, 0]
2012-09-18 10:39:43.706 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe659e50; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe659f70>>, indexPath => <NSIndexPath 0xe657b50> 2 indexes [0, 1]
2012-09-18 10:39:43.708 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe65aca0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe65adc0>>, indexPath => <NSIndexPath 0xe65a6f0> 2 indexes [0, 2]
2012-09-18 10:39:43.709 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe9e1890; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe9b1e10>>, indexPath => <NSIndexPath 0xe9c59d0> 2 indexes [0, 3]
2012-09-18 10:39:43.711 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x13c6f230; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x13c6ed80>>, indexPath => <NSIndexPath 0xe9e0fb0> 2 indexes [0, 4]
2012-09-18 10:39:43.712 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe9e2230; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe9b1a60>>, indexPath => <NSIndexPath 0xe9e0ea0> 2 indexes [0, 5]
2012-09-18 10:39:43.713 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x13c6fef0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x13c70010>>, indexPath => <NSIndexPath 0xe95dca0> 2 indexes [0, 6]
2012-09-18 10:39:43.714 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xeb599f0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xeb59b10>>, indexPath => <NSIndexPath 0xe9e2a10> 2 indexes [0, 7]
2012-09-18 10:39:43.715 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x13c70d10; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x13c6fea0>>, indexPath => <NSIndexPath 0xe9e1790> 2 indexes [0, 8]
2012-09-18 10:39:43.717 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xed616c0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xed5ee80>>, indexPath => <NSIndexPath 0xe9e1d50> 2 indexes [0, 9]
2012-09-18 10:39:43.718 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe65bb00; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe65b680>>, indexPath => <NSIndexPath 0xe65b1c0> 2 indexes [0, 11]
2012-09-18 10:39:43.720 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x13c71c00; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x13c71770>>, indexPath => <NSIndexPath 0x13c6f1d0> 2 indexes [0, 13]
2012-09-18 10:39:43.721 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe65c900; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe65c4a0>>, indexPath => <NSIndexPath 0xe659ce0> 2 indexes [0, 14]
2012-09-18 10:39:43.722 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe65d720; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe65d2c0>>, indexPath => <NSIndexPath 0xe659de0> 2 indexes [0, 15]
2012-09-18 10:39:43.723 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe65e5a0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe65e110>>, indexPath => <NSIndexPath 0xe65d2a0> 2 indexes [0, 16]
2012-09-18 10:39:43.739 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x91bf9e0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x9197560>>, indexPath => <NSIndexPath 0x91c9960> 2 indexes [0, 17]
2012-09-18 10:39:43.740 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x93e8d50; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x93dd090>>, indexPath => <NSIndexPath 0x93cb8b0> 2 indexes [0, 18]
2012-09-18 10:39:43.741 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x13c727b0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x13c728d0>>, indexPath => <NSIndexPath 0x13c72420> 2 indexes [0, 19]
2012-09-18 10:39:43.742 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x93e6ff0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x93da000>>, indexPath => <NSIndexPath 0x93d4d10> 2 indexes [0, 21]
2012-09-18 10:39:43.744 MyApp[28881:470f] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xed62510; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xed620a0>>, indexPath => <NSIndexPath 0xed5ed80> 2 indexes [0, 22]
2012-09-18 10:39:43.772 MyApp[28881:c07] -[RDRMarketBooksViewController controllerWillChangeContent:] [Line 236] controller => <NSFetchedResultsController: 0xe657570>
2012-09-18 10:39:43.777 MyApp[28881:c07] -[RDRMarketBooksViewController controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:] [Line 267] controller => <NSFetchedResultsController: 0xe657570>
(...19 similiar lines...)
2012-09-18 10:39:43.788 MyApp[28881:c07] -[RDRMarketBooksViewController controllerDidChangeContent:] [Line 301] controller => <NSFetchedResultsController: 0xe657570>
2012-09-18 10:39:43.790 MyApp[28881:c07] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x13c7be10; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x13c7bf30>>, indexPath => <NSIndexPath 0x13c7b080> 2 indexes [0, 0]
2012-09-18 10:39:43.791 MyApp[28881:c07] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe9e2be0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe9e1b10>>, indexPath => <NSIndexPath 0xe977940> 2 indexes [0, 1]
2012-09-18 10:39:43.792 MyApp[28881:c07] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe9e38b0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe9e2190>>, indexPath => <NSIndexPath 0xe9c0bc0> 2 indexes [0, 2]
2012-09-18 10:39:43.793 MyApp[28881:c07] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0xe9e4680; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0xe9e41f0>>, indexPath => <NSIndexPath 0xe9e3d60> 2 indexes [0, 3]
2012-09-18 10:39:43.794 MyApp[28881:c07] -[RDRMarketBooksViewController configureCell:atIndexPath:] [Line 34] cell => <RDRMarketBooksCell: 0x13c7ccc0; baseClass = UITableViewCell; frame = (0 0; 320 79); autoresize = W+BM; layer = <CALayer: 0x13c7cde0>>, indexPath => <NSIndexPath 0x13c7b270> 2 indexes [0, 4]
2012-09-18 10:39:43.802 MyApp[28881:c07] -[RDRMarketBooksViewController productsDidLoad:forCategory:error:] [Line 319] resource => <RDRRangedResource: 0x9533390> => { 
```

以及我的 UITableViewController 子类中的相关方法：

```
- (void)configureCell:(RDRMarketBooksCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    NSParameterAssert(cell);
    NSParameterAssert(indexPath);

    Trace(@"cell => %@, indexPath => %@", cell, indexPath);

    NSAssert([cell isKindOfClass:[RDRMarketBooksCell class]], @"should be a market books cell");
    id<RDRAPIProduct> product = [fetchedResultsController objectAtIndexPath:indexPath];
    cell.titleLabel.text = product.name;
}

#pragma mark -
#pragma mark UITableViewDelegate

// Configuring Rows for the Table View

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 79.0;
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (!tableViewIsUpdating) {
        [(RDRMarketBooksCell *)cell refreshSecondaryValues];
    }
}

// Managing Selections

- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    id<RDRAPIProduct> product = [fetchedResultsController objectAtIndexPath:indexPath];

    BOOL shouldSelect = YES;
    if (product) {
        shouldSelect = (product.slug != nil);
    }
    return (shouldSelect ? indexPath : nil);
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    id<RDRAPIProduct> product = [fetchedResultsController objectAtIndexPath:indexPath];

    if (RDRIsiPad()) {
        [[RDRApplicationDelegate sharedDelegate] presentDetailsWithProduct:product];
    }

    [self.delegate viewController:self didPickProduct:product];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

#pragma mark -
#pragma mark UITableViewDataSource

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    RDRMarketBooksCell *cell = [tableView dequeueReusableCellWithIdentifier:kRDRMarketBooksCellIdentifier];
    NSAssert(cell, @"cell should not be nil");

    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [[fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    id <NSFetchedResultsSectionInfo> sectionInfo = [[fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
}

#pragma mark -
#pragma mark NSFetchedResultsControllerDelegate

/*
 Assume self has a property 'tableView' -- as is the case for an instance of a UITableViewController
 subclass -- and a method configureCell:atIndexPath: which updates the contents of a given cell
 with information from a managed object at the given index path in the fetched results controller.
 */

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    Trace(@"controller => %@", controller);
    if (controller == fetchedResultsController) {
        tableViewIsUpdating = YES;
        [self.tableView beginUpdates];
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {
    Trace(@"controller => %@", controller);

    if (controller == fetchedResultsController) {
        switch(type) {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                              withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex]
                              withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath {
    Trace(@"controller => %@", controller);

    if (controller == fetchedResultsController) {
        UITableView *tableView = self.tableView;

        switch(type) {

            case NSFetchedResultsChangeInsert:
                [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                                 withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                                 withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeUpdate:
                [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                                 withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeMove:
                [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                                 withRowAnimation:UITableViewRowAnimationFade];
                [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]
                                 withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    Trace(@"controller => %@", controller);
    if (controller == fetchedResultsController) {
        [self.tableView endUpdates];
        tableViewIsUpdating = NO;

//        double delayInSeconds = 0.1;
//        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
//        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
//            [self fetchSecondaryValues];
//        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T07:42:54.893

解决了。NSFetchedResultsController 正在使用 RKManagedObjectStore 的 primaryManagedObjectContext。我将它切换到 mainQueueManagedObjectContext 并解决了问题。

我更仔细地查看了 RestKit 并且 mainQueueManagedObjectContext 是 primaryManagedObjectContext 的子项（然后发现文档中提到了这个事实）。我原本以为 RestKit 映射发生在 primaryManagedObjectContext 上，但现在我的猜测是它们发生在 mainQueueManagedObjectContext 上，并在低优先级线程上保存到 primaryManagedObjectContext，然后保存到持久存储。将我的 NSFetchedResultsController 先前附加到 primaryManagedObjectContext，这可以解释结果完全出现之前的长时间延迟。然而，在这种情况下使用 mainQueueManagedObjectContext 的需要在文档中并不明显。然而，回想起来，

我创建 NSFetchedResultsController 的代码现在如下所示：

```
 NSManagedObjectContext *context = [[RKManagedObjectStore defaultStore] mainQueueManagedObjectContext];
    NSFetchRequest *fr = [NSFetchRequest fetchRequestWithEntityName:@"RDRProduct"];
    fr.fetchBatchSize = 20;
    fr.predicate = [NSPredicate predicateWithFormat:@"ANY categories.slug == %@", category.slug];
    fr.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"sortingTitle" ascending:YES]];
    [NSFetchedResultsController deleteCacheWithName:category.slug];
    NSFetchedResultsController *fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fr
                                                                                               managedObjectContext:context
                                                                                                 sectionNameKeyPath:@"sortingSection"
                                                                                                          cacheName:category.slug]; 
```

我的 tableview 现在可以正常工作了。

# c# - 在将文档上传到 Sharepoint 时添加元数据

> ID：12474940
> 
> 赞同：5
> 
> 时间：2012-09-18T10:15:32.120
> 
> 标签：c#, asp.net, web-services, sharepoint, metadata

我正在开发一个使用 Web 服务将文档上传到 Sharepoint 的网站。我有一个可以工作并上传到 Sharepoint 的网络服务。但是，我需要向正在上传的这个文件添加元数据，例如数据库记录中的名字、姓氏、出生日期等，以及来自站点的实时数据。该数据类似于“工作流程编号”、“协议编号”、“文档类型”，这些数据在站点上生成并与该成员和文档相关联。

这是代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web;
using Microsoft.SharePoint.Client;

namespace DCTMAgent
{
    public class SharePoint
    {               
        internal void SPUploader(Stream fs, string fn)
        {
            ClientContext context = new ClientContext("http://SharepointSite/Home.aspx");

            System.Net.ICredentials creds = System.Net.CredentialCache.DefaultCredentials;

            context.Credentials = creds;
            context.RequestTimeout = 60000000; // Time in milliseconds

            string url = "/Members/";
            string fileName = Path.GetFileName(fn);                   

            string fnUrl = url + fn;
            Microsoft.SharePoint.Client.File.SaveBinaryDirect(context, fnUrl, fs, true);           
        }       
    }
} 
```

如何将元数据添加到正在上传的文件中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T11:55:44.593

这是我的解决方案：

```
 public class SharePoint
        {
            internal void SPUploader(Stream fs, string fn)
             {
                ClientContext context = new ClientContext("http://Sharepointsite");///SitePages/Home.aspx");
                System.Net.ICredentials creds = System.Net.CredentialCache.DefaultCredentials;

                context.Credentials = creds;
                context.RequestTimeout = 60000000; // Time in milliseconds

                string url = "/Members/";
                string fileName = Path.GetFileName(fn);                   

                string fnUrl = url + fn;

                Microsoft.SharePoint.Client.File.SaveBinaryDirect(context, fnUrl, fs, true);

                string uniqueRefNo = GetNextDocRefNo();

                SP.Web web = context.Web;

                Microsoft.SharePoint.Client.File newFile = web.GetFileByServerRelativeUrl(fnUrl);
                context.Load(newFile);
                context.ExecuteQuery();

                Web site = context.Web;
                List docList = site.Lists.GetByTitle("Members");

                context.Load(docList);
                context.ExecuteQuery();

                context.Load(docList.Fields.GetByTitle("Workflow Number"));
                context.Load(docList.Fields.GetByTitle("Agreement Number"));
                context.Load(docList.Fields.GetByTitle("First Name"));
                context.Load(docList.Fields.GetByTitle("Surname"));
                context.Load(docList.Fields.GetByTitle("ID Number"));
                context.Load(docList.Fields.GetByTitle("Date of Birth"));
                context.Load(docList.Fields.GetByTitle("Country"));
                context.Load(docList.Fields.GetByTitle("Document Description"));
                context.Load(docList.Fields.GetByTitle("Document Type"));
                context.Load(docList.Fields.GetByTitle("Document Group"));

                context.ExecuteQuery();                                

*********NEED TO GET THE INTERNAL COLUMN NAMES FROM SHAREPOINT************
                var name = docList.Fields.GetByTitle("Workflow Number").InternalName;
                var name2 = docList.Fields.GetByTitle("Agreement Number").InternalName;
                var name3 = docList.Fields.GetByTitle("First Name").InternalName;
                var name4 = docList.Fields.GetByTitle("Surname").InternalName;
                var name5 = docList.Fields.GetByTitle("ID Number").InternalName;
                var name6 = docList.Fields.GetByTitle("Date of Birth").InternalName;
                var name7 = docList.Fields.GetByTitle("Country").InternalName;
                var name8 = docList.Fields.GetByTitle("Document Description").InternalName;
                var name9 = docList.Fields.GetByTitle("Document Type").InternalName;
                var name10 = docList.Fields.GetByTitle("Document Group").InternalName;
                var name11 = docList.Fields.GetByTitle("Unique Document Ref No").InternalName;     

**********NOW SAVE THE METADATA TO SHAREPOINT**********
                newFile.ListItemAllFields[name] = "927015";
                newFile.ListItemAllFields[name2] = "1234565";
                newFile.ListItemAllFields[name3] = "Joe";
                newFile.ListItemAllFields[name4] = "Soap";
                newFile.ListItemAllFields[name5] = "7502015147852";
                newFile.ListItemAllFields[name6] = "1975-02-01";
                newFile.ListItemAllFields[name7] = "ZA";
                newFile.ListItemAllFields[name8] = "Test";
                newFile.ListItemAllFields[name9] = "Requirements";
                newFile.ListItemAllFields[name10] = "Requirements";
                newFile.ListItemAllFields[name11] = uniqueRefNo;

                newFile.ListItemAllFields.Update();
                context.Load(newFile);
                context.ExecuteQuery(); 
```

# project-planning - 除了完成流程的时间之外，我们可以为 BPM 工具衡量哪些 KPI

> ID：12474944
> 
> 赞同：0
> 
> 时间：2012-09-18T10:15:51.330
> 
> 标签：project-planning, business-process-management, kpi

我正在开发一个 BPM 工具，我可以为每个工作流定义关于完成整个流程和流程中每个活动所需的时间的 SLA。但我的问题是，除了完成整个流程的最佳时间之外，BPM 系统还有哪些其他 KPI。在我的情况下，KPI 是“完成流程的最长时间”，然后我将 SLA 定义为 10 小时。提前感谢您的帮助。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:18:16.823

基本上，您可以记录您需要的所有信息，时间或业务信息。然后，该工具允许您访问哪些信息取决于该系统支持的内容。我最了解的 BPMS 是 bonita，您可以在其中访问时间信息（某人传递任务的时间，等待任务的时间，如果任务迟到，完成案件需要多长时间，......），流程信息（候选人，做出的选择，...）甚至业务数据。

希望能帮助到你

# python - 在 python 中传递的命令行参数

> ID：12474948
> 
> 赞同：0
> 
> 时间：2012-09-18T10:16:07.677
> 
> 标签：python, command-line, python-3.x, arguments

嗨，我是 Python 新手，目前已复制以下脚本：

```
# filename is printer.py
import sys
for arg in sys.argv:
    print arg    # the zeroth element is the module name
raw_input("press any key")    # a trick to keep the python console open 
```

我正在尝试获取参数后跟模块名称。但是运行此代码会给我以下错误：

```
U:\printer.py
    File "U:\printer.py", line 6
      print arg # zeroth element is the module name
              ^
SyntaxError: Invalid syntax 
```

有谁知道这里可能出了什么问题？我正在使用 Python 3.2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T10:18:59.733

在 Python 3[`print`](http://docs.python.org/release/3.0.1/whatsnew/3.0.html#print-is-a-function)中是一个函数：

```
print(arg) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-18T10:32:29.087

正如其他人所指出的，在 python3 中，`print`是一个函数：

```
print arg 
```

就是现在：

```
print(arg) 
```

此外，`raw_input`已消失并由简单的`input`. （在py2k中，命令行`input`中`eval`的字符串，但在py3k中不会这样做）。

* * *

最后（也许是最重要的），你考虑过`argparse`吗？（*未经测试的代码如下*）

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('foo',nargs='*',help="What a nice day we're having")
args = parser.parse_args()
print(args.foo) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-18T10:19:27.330

Python 3 不再有`print`关键字，而是一个`print`函数。

试试吧

```
print(arg) 
```

# php - 在查询中使用正则表达式时 MySQL 查询异常

> ID：12474958
> 
> 赞同：0
> 
> 时间：2012-09-18T10:16:58.767
> 
> 标签：php, mysql, regex

PHP（Symfony 2.0）：

```
$term = "3";

$query = $em->createQuery(
     "SELECT * FROM SoftsystemSupportBundle:Shop WHERE sid REGEXP '^$term'"
);

$shops = $query->getResult(); 
```

抛出异常：

> 错误：预期的标识变量 | 状态字段路径表达式 | 聚合表达式 | \"(\" 子选择 \")\" | 标量表达式，得到 '*'"

我想获取 sid 字段与正则表达式匹配的所有实体。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:24:43.443

您正在滥用 CreateQuery() 方法返回的 QueryBuilder 对象。

您正在编写 DQL（学说查询语言）而不是 MySQL。REGEXP 不是 DQL 关键字，因此会出现错误。

你有这篇文章的相同问题：[在 Doctrine 2.X ORM 中使用 REGEXP](https://stackoverflow.com/questions/8810442/using-regexp-in-doctrine-2-x-orm)。

那里给出了解决方案。

# jquery - JQuery 自动完成并不总是触发

> ID：12474969
> 
> 赞同：2
> 
> 时间：2012-09-18T10:17:44.007
> 
> 标签：jquery, autocomplete, intermittent

谁能想到为什么我的 JQuery 自动完成并不总是显示其建议菜单的任何原因？我总是输入相同的有效关键字，但结果并不总是显示出来。

这是我正在使用的 JS：

```
$(document).ready(function(){
    $("input#q").autocomplete({
        minLength: 2,
        delay: 350,
        source: "ac.php"
    });
}); 
```

当我检查 Firefox 的 web 控制台时，它显示它已加载 ac.php 并带有 OK 状态代码。我尝试了不同的关键字，但没有一个出现。这一切都是断断续续的，就像我重新加载页面几次或关闭浏览器一样，它有时会再次工作。

当我手动转到 ac.php?term=whatever 时，它总是显示有效关键字的结果。

但是，当我将源设置为 ["Hi", "there"] 时，它可以正常工作。

我将这些加载到文档的 head 标签中：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script> 
```

编辑：将数据返回给 ac.php 的函数

```
 private function to_json($results)
    {
        $output = array();

        foreach($results as $result)
        {
            $output[] = $result->name; // nothing is escaped here
        }

        if(sizeof($output) > 1)
        {
            $uniques = array_unique($output);

            $buffer = array();

            foreach($uniques as $unique)
            {
                $buffer[] = $unique;
            }

            $output = $buffer;
        }

        return json_encode($output);
    } 
```

样本输出：

```
["Sennheiser MM-100 Stereo Bluetooth 2.0 Headset Invisible Mic USB","Polycom VSX7000E W\/POWERCAM CAMERA\/ Soundstation VTX1000\/MIC\/CODE54 (Maintenance Contract Required)","Polycom HDX 7000-720 Kit W\/ Eagle Eye HD Camera HDX Mic","Polycom HDX 6000-720V Kit W\/ Eagle Eye HD Camera Mic Remote"] 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:42:56.707

你为什么不尝试这种方式。我的工作方式是：-

$(".autocomplete_text").autocomplete("ac.php", { multiple: true, mustMatch: false, autoFill: false });

# c++ - 将 CORBA::WChar* 分配给 wchar_t* 等等

> ID：12474970
> 
> 赞同：1
> 
> 时间：2012-09-18T10:17:52.883
> 
> 标签：c++, type-conversion, variable-assignment, corba, wchar-t

我知道我最近创建了类似的主题，但现在我的问题有点不同。

这样做是否合法：

1)

```
CORBA::WString_var value;
const ::CORBA::WChar* v = L"ąśżźćłóń";
value = CORBA::wstring_dup(value); 
```

2)

```
class WCharStuff
{
    private:
        CORBA::WString_var value;
    public:
        void setVal(const ::CORBA::WChar* val)
        {
            this->value = CORBA::wstring_dup(value);
        }
        ::CORBA::WChar* getVal()
        {
            return CORBA::wstring_dup(this->value.in());
        }
};

WCharStuff obj;
const wchar_t *v = L"ąśżźćłóń";
obj.setVal(v); 
```

3)

```
class WCharStuff
{
    private:
        CORBA::WString_var value;
    public:
        void setVal(const wchar_t* val)
        {
            this->value = CORBA::wstring_dup(val);
        }
        ::CORBA::WChar* getVal()
        {
            return CORBA::wstring_dup(this->value.in());
        }
};

WCharStuff obj;
CORBA::WChar* v = L"ąśżźćłóń";
obj.setVal(v); 
```

那样一切都会好吗（任何内存泄漏等）？我使用宽字符串是因为我**只**需要这些字符：ąśżźćłóńę 和 ĄŚŻŹĆŁÓŃĘ。

# javascript - 如何根据 ul li 索引值创建简单的滑块？

> ID：12474973
> 
> 赞同：0
> 
> 时间：2012-09-18T10:17:58.160
> 
> 标签：javascript, jquery, html, indexing, slider

我正在尝试匹配`index`滑块大图像和拇指之间的两个值。当一个拇指点击时，我得到`index()`了它的价值并尝试与另一个列表匹配以显示该图像。

[**这是 jsFiddle 示例。**](http://jsfiddle.net/mjaA3/99/)

**jQuery：**

```
var thumbs = $('ul.thumbHolder li');
var bigImg = $('ul.imgHolder li');

thumbs.click(function() {
    var target = $(this).index();
    bigImg.fadeOut(300);
    //problem here
    bigImg.index(target).fadeIn(300);
});​ 
```

**注意：** [我可以用 id/class 逻辑来做到这一点，](https://stackoverflow.com/questions/11504193/collapse-and-expand-tabs-jquery-simple-accordion/11504398#11504398)但需要用这种方式解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:49:22.463

如果我不得不这样做，我会选择这样的东西：

```
var thumbs = $('ul.thumbHolder li');
var bigImg = $('ul.imgHolder li');

thumbs.click(function() {
    var target = $(this).index();
    bigImg.each(function(){
        if($(this).index() != target){
            $(this).fadeOut(300);
        }else{
            $(this).fadeIn(300);
        }
    });    
});​ 
```

无论如何，如果您想保留代码的逻辑，问题在于最后一行的函数 index()，它返回 jQuery 对象的索引，而不是给定索引的 jQuery 对象。

根据 jQuery API，index() 的补充函数是 get()，但它只返回 DOM 元素，因此您可以对其调用 fadeIn()。

您需要做的是通过 eq() 方法获取 jQuery 对象：

```
var thumbs = $('ul.thumbHolder li');
var bigImg = $('ul.imgHolder li');
thumbs.click(function() {
    var target = $(this).index();

    bigImg.fadeOut(300);

    bigImg.eq(target).fadeIn(300);

});​ 
```

# jquery - 如何使用 jQuery 在表单中找到按钮？

> ID：12474976
> 
> 赞同：5
> 
> 时间：2012-09-18T10:18:04.677
> 
> 标签：jquery

我正在使用以下内容`$form`在我的页面上查找对象：

```
var $form = $modal.find('#modal-form'); 
```

现在我需要选择按钮。如何选择表单内的每个按钮，以便像这样对其应用过滤器？

```
$('button').filter(function () {  }) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T10:19:15.583

`find`在 的上下文中使用另一个`$form`：

```
var $form = $modal.find('#modal-form');
var $buttons = $form.find("button"); 
```

或者，使用[`$(selector [, context ])`](http://api.jquery.com/jQuery/#jQuery1)：

```
var $buttons = $("button", $form); 
```

两者都将找到给定形式的*所有* `button`后代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T10:20:07.547

试试这个 ..

```
$("#modal-form button").each(function(btn){
   console.log(btn);//Logs each button in the form to your console 
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T10:19:42.963

`.find()`在表单元素上使用函数：

```
var $form = $modal.find('#modal-form');
var button = $form.find('button'); 
```

# codeigniter - 表达式引擎和代码点火器使用相同的系统文件夹

> ID：12474978
> 
> 赞同：0
> 
> 时间：2012-09-18T10:18:08.187
> 
> 标签：codeigniter, expressionengine

我正在尝试让表达式引擎和代码点火器使用相同的“系统文件夹”。我有两个最新版本

*   '代码点火器 2.1.2' 和
*   '表达引擎 2.5.3'。

我看到的问题是两个“系统”文件夹都有很大的不同，因为

*   Code Igniter 特别声明它使用 CI VERSION 2.1.2 而
*   表达式引擎正在使用 CI VERSION 2.0.1

有没有人经历过这个并找到一种方法来使用两者的妥协？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T12:57:14.010

每个 EE 版本都对其将运行的 CI 版本做出某些假设——两者不能相互独立地更改。所以我要么使用 EE 提供的 CI 安装运行你的 CI 应用程序，要么为它们维护一个单独的 CI 安装。

# mysql - 如何避免将空白保存到 MySQL 数据库中？

> ID：12474980
> 
> 赞同：0
> 
> 时间：2012-09-18T10:18:15.133
> 
> 标签：mysql

在我的数据库中，我有一个名为`LOGIN`：

```
Userid  password 
 user1   pwd1
 user2   pwd2 
```

所以我担心的是，在输入用户 ID 时，它不会检查是否存在空白。

例如，我希望它`us er 1`在 Userid 时显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:22:47.173

您可以使用[LTRIM/RTRIM](http://blog.sqlauthority.com/2007/04/24/sql-server-trim-function-udf-trim/)功能和[`REPLACE(string,' ','')`](http://msdn.microsoft.com/en-us/library/ms186862.aspx). 这可能会变得非常密集。但是，我强烈建议在将数据输入数据库之前进行验证并检查数据的完整性。

# database - Select statement in a variable

> ID：12474982
> 
> 赞同：1
> 
> 时间：2012-09-18T10:18:16.990
> 
> 标签：database, oracle, plsql, oracle10g

I have the following for loop

```
for i in (
select * from employees)

loop
--code
end loop; 
```

Is it possible to assign the select statement in a variable like

```
sql_stat := 'select * from employees'; 
```

and in loop

```
for i in (
    sql_stat)
loop 
```

When I tried the above I am getting error *"Encountered the symbol loop"*

What is the correct way of doing this if I want to assign the select statement in a variable.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T10:30:42.413

You can use `ref cursors` to get result you want. Here is an example.

```
declare
      type t_cursor is ref cursor;
      c_cursor t_cursor;
      l_sql varchar2(123);
      l_var number;
   begin
     l_sql := 'select count(*) from T1';  -- your query goes here
     open c_cursor for l_sql;
     loop
       fetch c_cursor 
        into l_var;-- variable(s) of appropriate datatype you want to fetch data into
       exit When c_cursor%notfound;
       -- any work for processing fetched data goes here
     end loop;  
  end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:51:10.070

Why do you want to store the select statement in a variable? One would only do this if part of the query is variable. For example the table_name.

Usually the query is static and the normal way of accessing the results of a query row for row is to use a cursor for loop such as this:

```
declare
   cursor c is 
     select column1,column2 
     from table;
begin
  for r in c loop
     dbms_output.put_line(r.column1||' '||r.column2);
  end loop;
end; 
```

# css - CSS浮动：对

> ID：12474992
> 
> 赞同：0
> 
> 时间：2012-09-18T10:18:54.397
> 
> 标签：css

我试图将两个元素定位在相反的方向。我遇到了一些似乎可以做我想做的事情，但我似乎无法将 div 浮动到右侧。

谁能告诉我我做错了什么？

在下文中，我希望*section-title*位于左侧，而*feed*位于右侧...

[http://jsfiddle.net/n3Dvg/](http://jsfiddle.net/n3Dvg/)

蒂亚！S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:25:10.267

请更正您的样式。**在#section .section-title、#section** **.feeds**之后写#section .feeds以覆盖您的样式。

 **例如这样写：

```
#section .section-title, #section .feeds {
 float:left;
            }
            #section .feeds {
                float: right;
                text-transform: none;
            } 
```

检查这个[http://jsfiddle.net/n3Dvg/8/](http://jsfiddle.net/n3Dvg/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:22:15.597

嗨，现在定义 **css** uner`id content`

像这样

```
#content #section .feeds{
float:right;
} 
```

***[现场演示](http://jsfiddle.net/n3Dvg/1/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:22:37.277

你有一个矛盾的`float: left`。`section .section-title, #section .feeds`

要么改变它，要么`!important`在`float: right`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T10:27:08.957

`!important`之后添加`float:right`

```
#section .feeds {
float: right !important;  // to override any conflict 
text-transform: none;
} 
```**

# jquery - 如何在 struts2 中使用 $.ajax() 方法

> ID：12474993
> 
> 赞同：0
> 
> 时间：2012-09-18T10:18:54.897
> 
> 标签：jquery, ajax, struts2

大家好，我正在使用 struts 2 和 jquery 插件 1.8。现在我在谷歌上搜索`$.ajax()`在 struts 中使用方法。但我认为我没有输入正确的关键字。任何人都可以给我教程，我们如何使用 struts 使用这个函数并将响应作为字符串处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:23:40.463

jquery 是一个 javascript 库，它可以像任何其他框架一样包含在 struts 中，在 jsp 页面中添加 jquery

```
 <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.1.min.js" type="text/javascript" ></script> 
```

之后你可以像使用它一样

```
<script type="text/javascript">

$(function(){ //document ready handler to ensure that the jquery is executed after the DOM is loaded

  //your code here
 $.ajax({
   url:'/your/path/',
   type:'POST',//by default is GET
   success:function(data){

    //success handler code
   },
   error:function(jxhr){
    console.log("o0ps!!");
   }

 });
});

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T12:59:56.367

```
$.ajax({
        type:'POST',
        url:'ajaxAction?nodetitle='+title+'&filename='+fil,
        dataType:'json',
        success:function(data)
        {  
             console.log(stringify(data));                              
        }
 }); 
```

解释

1.Type是方法类型：Get或Post。

2.url 是您要在此处重定向的位置 ajaxAction 它是您要重定向的动作java 文件。之后 ？nodetitle 和 filename 是发送到操作页面的两个参数。

3.dataType 是：您希望数据返回的格式。这里是 json 格式。

4.Success函数：如果数据返回成功。然后我们使用 Stringify 方法获取数据，或者您在服务器上使用 System.out.println。

# jquery - 整页画廊

> ID：12474994
> 
> 赞同：0
> 
> 时间：2012-09-18T10:18:57.030
> 
> 标签：jquery, html

我有一个画廊的想法，我需要一些 jQuery 插件的帮助来实现这一点。

我打算使用 jQuery [Timeline](http://www.csslab.cl/ejemplos/timelinr/latest/horizontal.html)插件来查看不同的年份。每年都会有一些文字，我希望有一个图片库在背景中全屏显示（淡入淡出效果）。单击每年时，会显示文本和一组不同的图像。

时间轴插件使用列表项，有没有办法实现一个插件来显示每个项目上的画廊项目列表？

这是时间轴 html 的摘录：

```
<div id="timeline">
        <ul id="dates">
            <li><a href="#1900">1900</a></li>
            <li><a href="#1930">1930</a></li>
            <li><a href="#1944">1944</a></li>
            <li><a href="#1950">1950</a></li>
            <li><a href="#1971">1971</a></li>
            <li><a href="#1977">1977</a></li>
            <li><a href="#1989">1989</a></li>
            <li><a href="#1999">1999</a></li>
            <li><a href="#2001">2001</a></li>
            <li><a href="#2011">2011</a></li>
        </ul>
        <ul id="issues">
            <li id="1900">
                <img src="images/1.png" width="256" height="256" />
                <h1>1900</h1>
                <p>Donec semper quam scelerisque tortor dictum gravida. In hac habitasse platea dictumst. Nam pulvinar, odio sed rhoncus suscipit, sem diam ultrices mauris, eu consequat purus metus eu velit. Proin metus odio, aliquam eget molestie nec, gravida ut sapien. Phasellus quis est sed turpis sollicitudin venenatis sed eu odio. Praesent eget neque eu eros interdum malesuada non vel leo. Sed fringilla porta ligula.</p>
            </li>
            <li id="1930">
                <img src="images/2.png" width="256" height="256" />
                <h1>1930</h1>
                <p>Donec semper quam scelerisque tortor dictum gravida. In hac habitasse platea dictumst. Nam pulvinar, odio sed rhoncus suscipit, sem diam ultrices mauris, eu consequat purus metus eu velit. Proin metus odio, aliquam eget molestie nec, gravida ut sapien. Phasellus quis est sed turpis sollicitudin venenatis sed eu odio. Praesent eget neque eu eros interdum malesuada non vel leo. Sed fringilla porta ligula.</p>
            </li> 
```

我需要的是每个日期（在每个 li 项目中）的整页背景库。

任何人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:38:57.360

我推荐超大号。我在生产中使用过它，发现它既简单又强大。

[http://www.buildinternet.com/project/supersized/](http://www.buildinternet.com/project/supersized/)