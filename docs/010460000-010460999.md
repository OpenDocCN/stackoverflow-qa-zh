# StackOverflow 问答 10460000-10460999

# plone - Plone：从站点设置中隐藏附加组件

> ID：10460003
> 
> 赞同：2
> 
> 时间：2012-05-05T08:00:51.883
> 
> 标签：plone

我想知道是否有任何产品可以帮助我从“站点设置”中的可用插件列表中隐藏插件。让我解释一下为什么。

我的情况是托管多个客户在同一个 Zope 实例上运行的 Plone 站点，每个站点都使用不同的 Data.fs，并且我为每个客户定制制作了一些包，例如“客户 A 主题”、“客户B 主题”。现在，因为它们在同一个 Zope 实例上，客户 A 可以在其站点附加组件列表中看到“客户 B 主题”也可用，这是我试图避免的。

从附加组件列表中隐藏产品在其他一些情况下也很有用，例如，更熟练的客户可以安装 PloneFormGen，而普通客户则没有。

我不知道这样的产品是否存在，我愿意做一个，如果你们中的一些人能指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T11:58:56.410

在你的 __ init__.py 放在某个地方

```
from zope.interface import implements
from Products.CMFQuickInstallerTool.interfaces import INonInstallable

class HiddenProfiles(object):
    """This hides zope2 profiles from the add-ons control panel/ 
    quick installer tool.
    """
    implements(INonInstallable)

    def getNonInstallableProducts(self):
        return ['DOTTED_PACKAGE_PATH'] 
```

然后在一个configure.zcml

```
 <utility
    factory=".HiddenProfiles"
    name="DOTTED_PACKAGE_PATH"
  /> 
```

并将 *DOTTED_PACKAGE_PATH* 替换为真实姓名，即*collective.myfancypackage*。

重要提示：如果为一个 dottedpath 注册了多个配置文件，则按字母顺序排列的第一个显示为附加组件，而其他的则被隐藏。

不能排除单个配置文件，只能排除包的所有配置文件。作为一种解决方法，可以制作一个子包，即*collective.myfancypackage.hiddenprofile/profiles/default*，注册它并将添加配置文件所需的所有内容放入其中。然后排除虚线路径*collective.myfancypackage.hiddenprofile*，而位于*collective.myfancypackage/profiles/default*的主配置文件仍然可以作为插件安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T15:23:19.400

是的，您可以从可用附加组件列表中隐藏软件包；我知道[如何使用 Five.grok 来做到这一点](http://hvelarde.blogspot.com/2011/12/hiding-uninstall-profiles-using-grok.html)，但也应该有直接的方法。

# python - django 斜杠基本网址

> ID：10460008
> 
> 赞同：1
> 
> 时间：2012-05-05T08:01:29.207
> 
> 标签：python, django, mod-wsgi

我在 wsgi 中为我的 django 应用程序添加斜杠

```
WSGIScriptAlias /rp1 /var/www/reports/app.wsgi
WSGIPythonPath /var/www/reports/
documentroot /var/www/reports/

<Directory /var/www/reports>
    Order deny,allow
    Allow from all
</Directory> 
```

通过此 url 访问此应用程序：172.30.12.37/rp1
将 /rp1 前缀添加到我的所有 url 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:21:57.120

您不需要在 urls.py 中做任何特别的事情。'/rp1' 前缀将自动适应。如果您是从代码/模板构建重定向，您确实需要确保使用正确的 API 来构建 URL，而不是硬编码路径。Django 设置模块中的某些设置，例如 LOGIN_URL 确实需要明确包含前缀。

因此，请更具体地了解您遇到的实际问题是什么。

# facebook - Facebook：POST userid/apprequest 抛出异常（虽然发送了邀请）

> ID：10460014
> 
> 赞同：1
> 
> 时间：2012-05-05T08:02:34.063
> 
> 标签：facebook, facebook-graph-api, facebook-apps, facebook-access-token, restfb

我正在尝试向朋友发送应用请求，我的代码总是抛出异常，但我看到我的朋友收到了应用请求。我很困惑。有人可以让我知道如何使用 rest-fb api 处理请求对话框吗？

我的代码

```
 String apprequestCall = "6111349/apprequests"; 
     FacebookClient facebookClient = new DefaultFacebookClient(MY_ACCESS_TOKEN); 
                        try { 
                                String appRequest = facebookClient.publish(apprequestCall, 
                                                                                                        String.class, 
                                                                                                        Parameter.with("message", "Santhosh"), 
                                                                                                        Parameter.with("data", "Kokala")); 
                        } catch (FacebookJsonMappingException e) { 
                                e.printStackTrace(); 
                        } catch (FacebookException e) { 
                                e.printStackTrace(); 
                        } 
        } 

INFO: 20120505.010030.997 INFO  DefaultWebRequestor - Executing a POST to https://graph.facebook.com/6111349/apprequests with parameters (sent in request body): message=Santhosh&data=Kokala&access_token=ACCESS_TOEKN&format=json

INFO: 20120505.010031.064 WARN  DefaultWebRequestor - An error occurred while POSTing to https://graph.facebook.com/6111349/apprequests
java.io.IOException: Server returned HTTP response code: 403 for URL: https://graph.facebook.com/6111349/apprequests
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1661)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1659)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1657)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1240)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
    at com.restfb.DefaultWebRequestor.executePost(DefaultWebRequestor.java:197)
    at com.restfb.DefaultFacebookClient.makeRequest(DefaultFacebookClient.java:428)
    at com.restfb.DefaultFacebookClient.publish(DefaultFacebookClient.java:265)
    at com.restfb.DefaultFacebookClient.publish(DefaultFacebookClient.java:278)
    at com.bitspedia.servlets.AppRequestInvitation.doGet(AppRequestInvitation.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException: Server returned HTTP response code: 403 for URL: https://graph.facebook.com/6111349/apprequests
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1612)
    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:468)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:338)
    ... 31 more

INFO: 20120505.010031.065 INFO  DefaultFacebookClient - Facebook responded with HTTP status code 403 and an empty response body.

WARNING: StandardWrapperValve[AppRequestInvitation]: PWC1406: Servlet.service() for servlet AppRequestInvitation threw exception
com.restfb.FacebookNetworkException: A network error occurred while trying to communicate with Facebook: Facebook POST failed (HTTP status code 403)
    at com.restfb.DefaultFacebookClient.makeRequest(DefaultFacebookClient.java:445)
    at com.restfb.DefaultFacebookClient.publish(DefaultFacebookClient.java:265)
    at com.restfb.DefaultFacebookClient.publish(DefaultFacebookClient.java:278)
    at com.bitspedia.servlets.AppRequestInvitation.doGet(AppRequestInvitation.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:13:08.823

它给出 403 错误，这意味着 Facebook 无法检索/执行您指定的 url。但正如@kitokid 也所说，也提供访问令牌，但不要*将*您的应用程序秘密 ID 放在任何 javascript 中，因为这可以从客户端看到。`FB.getloginstatus`您可以通过调用或类似函数获得新的访问令牌。

发送邀请可能是因为操作已通过。

# java - 如何将结果附加到另一个 java 类的 JTextArea 中？

> ID：10460016
> 
> 赞同：1
> 
> 时间：2012-05-05T08:03:32.440
> 
> 标签：java, swing, jtextarea

我有 2 个单独的 java 文件（主要和 RSS）。我想将我的 RSS 类的结果返回给我的 Main 类。现在结果显示在控制台中。我怎样才能将结果附加到我的 JTextArea 中？谢谢！

在我的主要课程中：

```
public void news()
{
    news = new JPanel();
    news.setLayout( null );

    JTextArea textArea = new JTextArea();
    textArea.setBackground(SystemColor.window);
    textArea.setBounds(10, 11, 859, 512);       
    textArea.setWrapStyleWord(true);
    news.add(textArea);

    TextSamplerDemo reader = TextSamplerDemo.getInstance();
    reader.writeNews();     
} 
```

在我的 RSS 课程中：

```
public void writeNews(){
try{                
    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    URL u = new URL("http://rss.cnn.com/rss/cnn_world.rss"); 

    Document doc = builder.parse(u.openStream());
    NodeList nodes = doc.getElementsByTagName("item");

    for(int i=0;i<nodes.getLength();i++){
        Element element = (Element)nodes.item(i);

        System.out.println("Title: " + getElementValue(element,"title"));
        System.out.println("Link: " + getElementValue(element,"link"));             
    }
}

catch(Exception ex){
    ex.printStackTrace();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:22:21.137

如果您修改您的 RSS.writeNews 方法以返回已解析的 RSS 提要，则 Main 类可以轻松地将数据插入到文本区域中。

```
// In the RSS class
public String writeNews() 
{
  String result = "";
  ...
  // Instead of printing to console, store text in a String variable
  result += "Title: " + getElementValue(element,"title");
  result += "Link: " + getElementValue(element,"link");
  ...
  // Return result
  return result
}

// In the Main.news method
String rssNews = reader.writeNews();
textArea.append(rssNews); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:10:08.033

不要在您的方法中初始化文本区域，而是全局初始化它（如您的新闻变量），然后使用

```
Main.textArea.setText(String text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:33:05.177

您可以考虑[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)。这样，您不必`JTextArea`在类之间共享对象。

# java - 如何对这两个耦合类应用解耦

> ID：10460023
> 
> 赞同：1
> 
> 时间：2012-05-05T08:04:10.700
> 
> 标签：java, oop, circular-dependency

我有两节课：

```
public class CourseModule {

  // attributes...

  List<Course> courses;

  public void addCourse() { ... }
}

public class Course {

  // attributes...

  CourseModule module;
} 
```

的属性`Course`不足以唯一地标识一个对象，课程模块总是需要的，对于附加信息也是如此。A`CourseModule`由差异组成`Courses`。

我不喜欢这里的**循环依赖**，感觉不对。现在我正在考虑以下内容，而不是为每个方法添加课程并`CourseModule`手动设置引用，我可以使用构造函数自动执行此过程：

```
public Course(...,...,...., CourseModule module) {

   this.module = module;
   module.courses.add(this);
} 
```

但同样，这里还有另一个大问题：在 Brian Goetz Java Concurrency in Practice 中说：**不要让`this`引用逃脱构造函数**

那么这里的最佳实践是什么？我认为这是一个非常简单的例子，它可能会产生一个示例解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:07:08.947

你是对的，我会说你当前的设置是[Code Smell](http://en.wikipedia.org/wiki/Code_smell)的一个例子。

您不能创建另一个对象`CourseInfo`来管理您说不能包含在其中的附加课程信息`Course`吗？

```
public class CourseModule {

    List<Course> courses;

    public void addCourse(Course course) { ... }
}

public class Course {

    CourseInfo info;
}

public class CourseInfo {

    CourseInfo info;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:18:19.897

有趣的是，我不得不做类似的事情。在这里查看[我的问题](https://stackoverflow.com/questions/10086529/programming-a-one-to-many-relationship)。

我在互联网上发现[这篇文章](http://www.ibm.com/developerworks/webservices/library/ws-tip-objrel3/index.html)几乎与您正在尝试做的事情完全相同，包括课程！我发现指定的解决方案并非 100% 正确，需要考虑我的问题的答案。

# asp.net-mvc - ASP.NET MVC（四）——防止调用 IValidatableObject.Validate 获取属性

> ID：10460027
> 
> 赞同：1
> 
> 时间：2012-05-05T08:04:28.433
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

如何防止调用`IValidatableObject.Validate`属性并仅为顶级模型调用它？

```
public abstract class Foo, IValidatableObject
{
    public virtual Foo Related { get; set; }

    public virtual IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        // This is first called for the 'Related' property 
        // and then for the model itself
        // I want this to be called for the top level model only
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:51:52.383

我不确定是否有更优雅的方法，但是创建一个覆盖 Foo 的 Validate 方法的新类呢？

就像是：

```
 public class FooNoValidation : Foo
{
    public override IEnumerable Validate(ValidationContext validationContext)
    {
        yield break;
    }
} 
```

当然，这需要 Foo 上的 Validate 方法是虚拟的，并且您需要在 Foo 父类上引用 FooNoValidation ，但可能会起作用。

我知道这有点小技巧，但如果你只需要让它工作，这应该可以实现。

# django - Django 管理、静态和媒体文件的混淆

> ID：10460028
> 
> 赞同：15
> 
> 时间：2012-05-05T08:04:33.120
> 
> 标签：django

我对 Django (1.4) 比较陌生，我很难理解静态、媒体和管理文件背后的哲学。项目的结构因教程而异，对于 Webfaction（我将在其中托管我的应用程序）也是如此。我想知道组织它的最佳方式是什么，并且在将其部署到 Webfaction 时痛苦和编辑最少，静态媒体、adn 管理文件有什么意义？先感谢您

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T08:18:30.203

本质上，您希望在开发中通过 django 提供静态文件。一旦您准备好投入生产，您希望服务器为您执行此操作（它们的构建是为了快速执行此操作:-)）

这是一个基本设置，登录服务器后，您运行 collectstatic 命令以获取服务器指向的 static-root 文件夹中的所有静态文件（请参阅重写规则）

```
./manage.py collectstatic 
```

设置.py

```
 from os import path
    import socket

    PROJECT_ROOT = path.dirname(path.abspath(__file__)) #gets directory settings is in

    # Dynamic content is saved to here
    MEDIA_ROOT = path.join(PROJECT_ROOT,'media')
    # if ".webfaction.com" in socket.gethostname():
    #    MEDIA_URL = 'http://(dev.)yourdomain.com/media/'
    # else:
        MEDIA_URL = '/media/'

    # Static content is saved to here --
    STATIC_ROOT = path.join(PROJECT_ROOT,'static-root') # this folder is used to collect static files in production. not used in development
    STATIC_URL =  "/static/"
    STATICFILES_DIRS = (
        ('', path.join(PROJECT_ROOT,'static')), #store site-specific media here.
    )

    # List of finder classes that know how to find static files in
    # various locations.
    STATICFILES_FINDERS = (
        'django.contrib.staticfiles.finders.FileSystemFinder',
        'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    #    'django.contrib.staticfiles.finders.DefaultStorageFinder',
    ) 
```

settings_deployment.py

```
from settings import *

DEBUG = False
TEMPLATE_DEBUG = DEBUG
MEDIA_URL = "http://yourdomain.com/media/" 
```

网址.py

```
...other url patterns...

if settings.DEBUG:
    urlpatterns += staticfiles_urlpatterns() #this serves static files and media files.
    #in case media is not served correctly
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
            }),
    ) 
```

django.conf（lighttpd，这可能是 apache 或 nginx），但我相信 webfaction 有一个应用服务可以轻松设置它

```
$HTTP["host"] =~ "(^|\.)yourdomain\.com$" {
    fastcgi.server = (
        "/django.fcgi" => (
            "main" => (
                "socket" => env.HOME + "/project/project.sock",
                "check-local" => "disable",
            )
        ),
    )
    alias.url = (
        "/media" => env.HOME + "/project/media",
        "/static" => env.HOME + "/project/static-root",
    )

    url.rewrite-once = (
        "^(/media.*)$" => "$1",
        "^(/static.*)$" => "$1",
        "^/favicon\.ico$" => "/static/img/favicon.png",
        "^(/.*)$" => "/django.fcgi$1",
    )
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T08:22:34.247

静态文件是应用程序所需的文件，服务器无需修改即可提供服务，例如自定义 JS 脚本、图标、小程序等。使用它的最佳方法是将静态文件放在每个应用程序文件夹中的“静态”文件夹中。像这样，测试服务器会在那里找到它们，如果你部署在生产服务器上，你只需要运行`python manage.py collectstatic`将它们全部复制到你定义的根静态文件夹中 settings.py

媒体文件是您的应用程序用户上传的文件，例如头像的照片等。

管理文件是 Django 管理员使用的静态文件，django 测试服务器只会找到它们，但在生产环境中，您必须复制或链接到此文件夹才能让管理员真正工作。

希望它可以帮助您更好地了解事物...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T15:18:08.533

我的配置是：

1.设置.py

```
 # Absolute filesystem path to the directory that will hold user-uploaded files.
    # Example: "/var/www/example.com/media/"
    MEDIA_ROOT='/media/'

    # URL that handles the media served from MEDIA_ROOT. Make sure to use a
    # trailing slash.
    # Examples: "http://example.com/media/", "http://media.example.com/"
    MEDIA_URL = '/media/'

    # Absolute path to the directory static files should be collected to.
    # Don't put anything in this directory yourself; store your static files
    # in apps' "static/" subdirectories and in STATICFILES_DIRS.
    # Example: "/var/www/example.com/static/"
    STATIC_ROOT = '/static/'

    # URL prefix for static files.
    # Example: "http://example.com/static/", "http://static.example.com/"
    STATIC_URL = '/static/'

    # Additional locations of static files
    STATICFILES_DIRS = (
        '/'.join(__file__.split(os.sep)[0:-2]+['static']),
        # Put strings here, like "/home/html/static" or "C:/www/django/static".
        # Always use forward slashes, even on Windows.
        # Don't forget to use absolute paths, not relative paths.
    )

    # List of finder classes that know how to find static files in
    # various locations.
    STATICFILES_FINDERS = (
        'django.contrib.staticfiles.finders.FileSystemFinder',
        'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    #    'django.contrib.staticfiles.finders.DefaultStorageFinder',
    ) 
```

2.urls.py

```
 from django.conf import settings
    if settings.DEBUG:
       from django.contrib.staticfiles.urls import staticfiles_urlpatterns
       urlpatterns += staticfiles_urlpatterns() 
```

我的网站目录是这样的：

```
 root
    │  manage.py
    │
    ├─media
    ├─my_django_py3
    │    settings.py
    │    urls.py
    │    views.py
    │    wsgi.py
    │    __init__.py
    │
    ├─static
    │      9gq05.jpg
    │      ajax.js
    │      favicon.gif
    │
    ├─templates
    └─utils 
```

# android - 如何添加“正在加载...” android 应用程序的对话框

> ID：10460029
> 
> 赞同：1
> 
> 时间：2012-05-05T08:04:33.740
> 
> 标签：android, dialog, loading

我有一个简单的 android 应用程序来访问 Web 服务。我想显示一个对话框`"Loading . . ."`，直到加载结果并在加载结果后关闭。我已经使用了这段代码，但这没有显示加载消息：

```
public class LoadingActivity extends Activity {
   private static final String SOAP_ACTION = "http://ws.eretailer.com/";
   private static final String METHOD_NAME = "dataSender";
   private static final String NAMESPACE = "http://ws.eretailer.com/dataSender/";
   private static final String URL = "http://175.157.128.207:8085/Eretailer/services/EretailerService?wsdl";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final ProgressDialog pd = new ProgressDialog(this);
    pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    pd.setMessage("Loading. . .");
    pd.show();
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);          

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);
    pd.show();
    HttpTransportSE ht = new HttpTransportSE(URL);
    try {

        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;

        pd.dismiss();
           String str = s.toString();
           String arr1[] = str.split(" ");

           TextView tv = new TextView(this);

           for(int i = 0; i<arr1.length;i++){
           tv.append("order ID :"+arr1[i]+"\n");
          }
           setContentView(tv);

       } catch (Exception e) {

           e.printStackTrace();
       }
}
} 
```

我怎样才能纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:35:08.890

嗨试试下面的代码

```
 private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected void onPreExecute() {
        pd.show();
        super.onPreExecute();
    }
    @Override
    protected String doInBackground(String... urls) {
        String response = "";
         HttpTransportSE ht = new HttpTransportSE(URL);
            try {

                ht.call(SOAP_ACTION, envelope);
                SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                SoapPrimitive s = response;

                pd.dismiss();
                   String str = s.toString();
                   String arr1[] = str.split(" ");

                   TextView tv = new TextView(this);

                   for(int i = 0; i<arr1.length;i++){
                   tv.append("order ID :"+arr1[i]+"\n");
                  }
                   setContentView(tv);

               } catch (Exception e) {

                   e.printStackTrace();
               }
        return response;
    }

    @Override
    protected void onPostExecute(String result) {
        pd.dismiss();
    }
} 
```

资源：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:22:26.830

最好将[Android-AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)用于您的 Web 请求。并从AsyncTask 开始并`ProgressDialog`在其中关闭它（在此处更新您的 UI 以获取 Web 响应的结果）。还将Web-Request 代码放入AsyncTask..`onPreExecute()``onPostExecute()``doInBackGround()`

例如看[Android AsyncTask Example](http://labs.makemachine.net/2010/05/android-asynctask-example/)。

这永远不会阻塞您的**Main-UI Thread**。以及更好的用户体验性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:16:03.420

首先评论 pd.dismiss() 并检查它是否正在加载，然后在下载完成后使用 pd.dismiss() 。

# google-maps - 如何在sencha touch 2中获取地图（Ext.map）的中心坐标？

> ID：10460031
> 
> 赞同：1
> 
> 时间：2012-05-05T08:05:01.980
> 
> 标签：google-maps, extjs, sencha-touch, sencha-touch-2

我使用 Ext.Map 让用户选择某个地点，并且我想获取用户选择的坐标（或地图中心的坐标）。我应该使用哪种方法？我在文档中找不到合适的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:54:32.303

查看我对此处给出的类似问题的回答。这会给你一个想法。

*   [如何在 Sencha-Touch2.0 的地图中获取当前位置的标记](https://stackoverflow.com/questions/10333076/how-can-i-get-marker-on-current-location-in-map-in-sencha-touch2-0/10333449#10333449)

**编辑：**

要从文本地址获取位置坐标（即纬度和经度），您需要使用[**Google Maps Geocoding API**](https://developers.google.com/maps/documentation/geocoding/)

> 地理编码是将地址（如“1600 Amphitheatre Parkway, Mountain View, CA”）转换为地理坐标（如纬度 37.423021 和经度 -122.083739）的过程，您可以使用它来放置标记或定位地图。

# haskell - Haskell“输入`=>'解析错误”

> ID：10460032
> 
> 赞同：-5
> 
> 时间：2012-05-05T08:05:03.913
> 
> 标签：haskell

```
first :: (a,b,c) -> a
first (x, _, _) = x

second :: (a,b,c) -> b
second (_,y,_) = y

third:: (a,b,c)-> c
third (_,_,z) => z 
```

我从这段代码中收到错误消息。

```
"parse error on input `=>'
" 
```

我看不出任何理由。谁能帮我指出来？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T08:07:19.857

您使用了错误的词位：在 first 和 second`=`和 third `=>`。将其替换为`=`。

# ruby - 如何获取 Ruby 单元测试失败消息以打印对象内容而不是地址？

> ID：10460036
> 
> 赞同：0
> 
> 时间：2012-05-05T08:06:08.320
> 
> 标签：ruby, tdd, jruby

我在Ruby中有一个测试如下

```
def testSomeObjectsAreEqual
  assert_equal( object1, object2 )
end 
```

当此测试失败时，我收到一条错误消息，指出两个对象不相等，并为预期值和实际值提供以下消息样式：

```
<#<Java:com.mynamespace.MyClass:0x1232b3e12>> expected but was
<#<Java:com.mynamespace.MyClass:0x489654ebd>>. 
```

如您所见，我正在使用 JRuby 来实例化一个 Java 类，这就是被比较的对象。我尝试在 Ruby 中打印 object.to_s 并打印出一条看起来很合理的消息，它似乎直接映射到为 MyClass 声明的 Java 声明的 toString() 方法，但是 to_s 似乎没有用于断言的失败消息。无论如何我可以让 Ruby 测试/单元使用对象的 to_s 值，因为这会使失败消息对我更有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:02:12.270

У您可以在失败消息中添加一些注释：

```
assert_equal( object1, object2, "my message: #{object1.to_s},  #{object2.to_s}" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:12:38.910

Test::Unit （我想这就是您正在使用的）用于`#pretty_inspect`将对象转换为可打印的形式。您可以为您的班级覆盖/猴子补丁；您只需要在测试脚本中这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:12:23.980

我建议不要在单元测试中直接比较对象，而是测试不同的属性是否相同——这将在部分测试失败时为您提供更多信息。您可能会遇到直接对象比较的微妙之处，这可能不会为您的整体测试增加任何价值。

因此，如果对象具有包含 first_name、last_name 和 status 的属性，我建议以这种方式重写测试：

```
def testSomeObjectsAreEqual
  assert_equal( object1.first_name, object2.first_name )
  assert_equal( object1.last_name, object2.last_name )
  assert_equal( object1.status, object2.status )
  ... etc ...
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T08:22:01.147

我不确定我是否正确理解了这个。但是，您可以在您的类中创建一个方法，该方法接受参数作为对象（它自己的类）。如果比较失败，您可以`raise`抛出异常（比如说），然后通过以下方式相应地断言它：

```
assert_raises(TypeError){object1.compare(object2)} 
```

可能有错误，请在这里纠正我。

# lisp - 获取目录中的文件，逐行打印

> ID：10460039
> 
> 赞同：0
> 
> 时间：2012-05-05T08:06:52.973
> 
> 标签：lisp, common-lisp

我正在将我的一些 python 脚本移植到 Common Lisp。我需要获取某个目录中的文件列表并逐行打印每个文件的内容。这段代码显示了所有文件名。但是仅为最后一个文件打印行。为什么？另外，按文件行进行迭代的最佳方法是什么？谢谢。

```
(dolist (file (directory (make-pathname :name :wild
                                        :type :wild
                                        :defaults "path\\to\\files\\")))
  (print file)
  (with-open-file (stream file)
    (do ((line (read-line stream) (read-line stream)))
        (nil t)
      (print line)))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:23:33.170

我建议编写一个函数来打印给定路径名和流的文件。

你用`DO`. 没关系，但我会使用类似的东西`LOOP`，它可以让代码更容易阅读。

你`DO`是一个无限循环。您可能希望在到达 EOF 时结束循环。

`READ-LINE`当它读取超过文件末尾时会生成错误。因此，您的代码在第一个文件的末尾发出错误信号。此错误会导致您的代码仅打印第一个文件。

您需要调用`READ-LINE`这样一种方法来测试 EOF 并结束迭代。请参阅 的论点`READ-LINE`。或者，您可以捕获 EOF 错误，但其他解决方案稍微容易一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:39:29.297

这似乎对我有用：

```
 (dolist (file (directory (make-pathname :name :wild
                                           :defaults "/tmp/lt/files/")))
     (print file)
     (with-open-file (stream file)
       (do ((line (read-line stream nil) (read-line stream nil)))
         ((null line))
         (print line)))) 
```

# c# - Metro App - 反序列化 JSON 字符串

> ID：10460040
> 
> 赞同：1
> 
> 时间：2012-05-05T08:06:57.233
> 
> 标签：c#, json

我想反序列化从 Web 服务获得的 JSON 字符串。我的问题是，反序列化的对象类数组（Result 类型）中始终包含 0 个项目....

但网络服务返回正确的字符串。所以我认为失败发生在我反序列化字符串/流的方式上。

有什么想法是我的错吗？

```
//JSON result string:

{"Results":
    [{"Result":{
     "Name":"Rechnung2",
     "Date1":"2012-10-05",
     "Item1":"50",
     "Item2":"10",
     "CompanyName":"Contoso",
     "Description":"My description"}}]
}    

[DataContract]
public class Result
{
    [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string Date1 { get; set; }
    [DataMember]
    public string Item1 { get; set; }
    [DataMember]
    public string Item2 { get; set; }
    [DataMember]
    public string CompanyName { get; set; }
    [DataMember]
    public string Description { get; set; }
}

public async void GetjsonStream()
    {
        HttpClient client = new HttpClient();
        string url = "http://localhost/test/api.php?format=json&key=12345";
        HttpResponseMessage response = await client.GetAsync(url);

        //ReadAsStringAsync() works fine, so I think ReadAsStreamAsync() works also fine
        var str = await response.Content.ReadAsStreamAsync();

        DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Result[]));

        //Result has always 0 items
        Result[] res = (Result[])ser.ReadObject(str);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:11:54.047

我自己没用过`DataContractJsonSerializer`，所以这可能不是*最好*的方法——但我怀疑问题在于 JSON 表示“包含结果集合的对象”——而不是“结果集合”。

试试这个，除了你现有的代码：

```
[DataContract]
public class ResultCollection
{
    [DataMember]
    public Result[] Results { get; set; }
}

...

var ser = new DataContractJsonSerializer(typeof(ResultCollection));
var collection = (ResultCollection)ser.ReadObject(str);
var results = collection.Results; 
```

如果有帮助，您也可以将类型更改`Results`为`List<Result>`。

（我刚刚尝试了上面的代码，它给了我正确的结果，所以看起来这至少是正确的......）

# sql-server - 处理 SQL Server 日期时间边缘情况

> ID：10460043
> 
> 赞同：0
> 
> 时间：2012-05-05T08:07:10.577
> 
> 标签：sql-server, tsql, datetime, sql-server-2000

我在 SQL Server 2000 表中有以下数据：

```
Dates
-----------------------
2012-05-04 01:23:45.678
2012-05-05 01:23:45.678
2012-05-06 01:23:45.678 
```

假设`GETDATE()`返回：

```
2012-05-05 12:34:56.789 
```

我需要从上面返回第 2 行和第 3 行的最有效（和优雅）的查询，标准是：

> **Dates**的日期部分>= **GETDATE()的日期部分**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T08:32:01.287

```
DECLARE @Now DATETIME
SELECT @Now = DATEADD(dd, DATEDIFF(dd, 0, GETDATE()), 0)

SELECT ...
WHERE Dates >= @Now 
```

改编自[this](https://stackoverflow.com/a/1177529/1583)和[this](https://stackoverflow.com/a/353049/1583)。

# ruby-on-rails - 分组对象的 ActiveRecord::Relation 查询

> ID：10460056
> 
> 赞同：3
> 
> 时间：2012-05-05T08:09:24.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有三个模型`User`，`Subject`和`Grade`。

```
class User< ActiveRecord::Base
  has_many :grades
end

class Subject < ActiveRecord::Base
  has_many :grades
end

class Grade < ActiveRecord::Base
  belongs_to :user
  belongs_to :subject
end 
```

用户可以对同一学科有多个等级。

在用户的页面上，我想显示他`average`和`maximum`每个科目的成绩。实现它的最佳方法是什么？

```
User: Qwerty
Grades:
-------------------------------
subject       average   maximum
-------------------------------
"subject_1"   56        97
"subject_2"   45        85 
```

据我所知，[ActiveRecord::Relation](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)`maximum`对and有特殊的方法`average`，但我不知道如何`ActiveRecord::Relation`为每组成绩获取 -object 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:53:33.887

我想你需要类似的东西：

```
user.grades.joins(:subject).
  group(:subject_id).
  select(['MAX(grades.grade) as max', 'AVG(grades.grade) as avg', subjects: :name]) 
```

# android - Android 设备在 Ubuntu 12.04 中未在线显示

> ID：10460057
> 
> 赞同：8
> 
> 时间：2012-05-05T08:09:53.240
> 
> 标签：android, eclipse, ubuntu-11.10

我刚刚将我的 ubuntu 11.10 更新到 12.04 并遇到了这个问题，当我从 eclipse 运行 android 项目时，我的 android 设备没有出现在线。我附上了截图。我还将文件放在/etc/udev/rules.d/51-android.rules 中。

51-android.rules文件的内容是SUBSYSTEM=="usb", SYSFS{idVendor}=="0bb4", MODE="0666" SUBSYSTEM=="usb_device", SYSFS{idVendor}=="0bb4", MODE ="0666"

截图是 ![设备没有出现在线，它只是显示未知](../Images/3283112f345ca096590e62e46efc8948.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T09:53:22.360

在最近的 udev 版本中不推荐使用 SYSFS。

您的文件应该只有这样的行：

SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", MODE="0666", GROUP="plugdev"

其中 0bb4 是供应商 ID。

您可以通过终端获取手机的供应商 ID。在命令行上运行“lsusb”并找到您的设备所在的行。

例如，就我而言： Bus 004 Device 004: ID 18d1:4e22 Google Inc. Nexus S (debug)

所以供应商 id 是 18d1。

上面的行变为：

SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", MODE="0666", GROUP="plugdev"

# mysql - MySql 连接器 6.5.4 - 存储过程返回带有布尔字段的实体 - 实体框架

> ID：10460058
> 
> 赞同：2
> 
> 时间：2012-05-05T08:09:55.007
> 
> 标签：mysql, entity-framework, stored-procedures

在写作之前搜索、阅读论坛和 SO 的所有建议。（已经调查了 1 天）。

我正在使用：MySql Server 5.5 with Entity Framework 4.3 with Connector 6.5.4（我使用的是连接器 6.3.6，一切正常，更新并且出现问题）

我有一个返回实体对象列表的 SP。该实体有一个 bool (tinyint(1)) 字段，但是在使用 SP 时，它将它作为字符串返回。

我创建了一个临时表并将其返回，但出现了同样的问题。错误是：

```
System.InvalidOperationException: The 'isDeleted' property on 'Container' could not be   
set to a 'String' value. You must set this property to a non-null value of type 
'Boolean'. at 
System.Data.Common.Internal.Materialization.Shaper.ErrorHandlingValueReader`1.
GetValue(DbDataReader reader, Int32 ordinal) 
```

问题是，因为它是一个实体对象，我不能 Convert.ToBoolean() [我也不想]。我认为问题在于我没有能力将 SP 字段转换为 bool 或连接器有错误（很可能）。

正如我所说，连接器 6.3.6 没有问题

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:17:59.473

错误在那里，但我找到了解决方法。当字段的顺序不同时，就会出现问题。

这个 BUG：[http](http://bugs.mysql.com/bug.php?id=53166) ://bugs.mysql.com/bug.php?id= 53166 帮助我理解并尝试使文件的选择顺序与表格相同。

示例：如果表是：

字段_a、字段_b、字段_c

并且您的存储过程返回： field_b、field_a、field_c 将不起作用。

将我的 SP 更改为返回 field_a、field_b、field_c

# iphone - 为 UITabViewController 设置自定义设计尺寸（在 Storyboard 中）

> ID：10460067
> 
> 赞同：9
> 
> 时间：2012-05-05T08:11:14.813
> 
> 标签：iphone, uitabbarcontroller, size, uistoryboard

我想修改一个当前具有`UITabBarController`作为其初始视图控制器的应用程序。

目标是在屏幕顶部区域有一个自定义状态栏，无论选择哪个选项卡，都将始终显示该状态栏。当前`UITabBarController`可能不会使用屏幕的全高：

```
/----------------------------\
|Custom Status bar (50 px)   |
|                            |
|----------------------------|
|                            |
|----------------------------| ---
|                            |  |
|                            |  |
|View of the selected tab    |  |
|                            |  |
|                            |  |
|                            |  |
|                            |  | 
|                            |  smaller height of the UITabBarController
|                            |  |
|----------------------------|  |
|Tab bar                     |  |
|                            |  |
\----------------------------/ --- 
```

我使用故事板。`Size Inspector`即使模拟度量大小设置为“自由格式”，我也无法在窗口中设置（设计）大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:56:13.353

不幸的是，这不能在故事板或 xib 中完成。

将 UITabBarController 放入另一个视图控制器的唯一方法是创建一个容器视图控制器并将其添加到代码中。

在这种情况下，您需要创建一个新的 UIViewController，然后调用`addChildViewController:childController`您想要显示的每个视图控制器（一次用于您的标题，一次用于标签栏控制器）。

有关详细信息，请参阅**[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)****的实现容器视图控制器**部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T03:51:05.953

您可以`UITabBar`像这样以编程方式创建您的：

```
UITabBar *myTabBar = [[UITabBar alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 50)];
[MyView addSubview:myTabBar]; 
```

有关以编程方式设置的更多信息，您应该查看[ 的有关该主题的文档。](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITabBar_Class/Reference/Reference.html)`UITabBar`

# python - 为您的 Python 博客生成 XML/Feed

> ID：10460070
> 
> 赞同：2
> 
> 时间：2012-05-05T08:11:22.967
> 
> 标签：python, xml, webapp2

我一直在尝试在我的博客中添加 RSS 提要（webapp2 应用程序 - Jinja2 模板），这就是我所拥有的：

```
class XMLHandler(Handler):
    def get(self):
        posts = db.GqlQuery("SELECT * FROM Post WHERE is_draft = FALSE ORDER BY created DESC")
        self.render("xmltemplate.xml", posts=posts, mimetype='application/xml') 
```

xmltemplate.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <channel>
        <title>Blag</title>
        <link>http://www.blagonudacity.appspot.com/</link>
        <description>Yet Another Blag</description>
        {%for post in posts %}
        <entry>
            <title>{{post.subject}}></title>
            <link href="http://www.blagonudacity.appspot.com/post/{{ post.key().id()}}" rel="alternate" />
            <updated>{{post.created}}</updated>
            <author><name>Prakhar Srivastav</name></author>
            <summary type="html"> {{ post.content }} </summary>
        </entry>
        {%endfor%}
    </channel>
</feed> 
```

当我迁移到相关页面时，我在浏览器中得到的`/feeds/all.atom.xml` 只是一个带有标记的 html 页面。它看起来不像 XML 页面在浏览器中的样子。我在这里做错了什么？[这是演示](http://blagonudacity.appspot.com/feeds/all.atom.xml)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:26:38.127

我看到该页面以内容类型 text/html 交付，这可能是一个问题，我建议您将其设置为 text/xml（更多详细信息可以在[这里](http://www.petefreitag.com/item/381.cfm)找到。

此外，它在很大程度上取决于浏览器的显示方式，我猜您正在使用 chrome（像我一样），您提供的链接看起来像一个网页，如果您在 Firefox 中打开它，您将看到“实时书签”样式的页面，但是条目不显示。我不确定这是因为您的标记有问题还是 firefox 和 atom 提要有问题。

xml 文件本身似乎没问题（使用[w3 validator](http://validator.w3.org)检查）。

**更新**：好的，您的 atom XML 似乎有问题（它是有效的 xml，如上所述）但它似乎不是有效的 Atom 数据（根据[提要验证器](http://validator.w3.org/feed/)）。我试图在 Firefox 中为它添加书签，但它没有显示任何条目（就像上面提到的预览一样）。所以我认为你应该看看原子提要，例如[这个](http://starling.us/atom/)，[这](http://iweb.timfanelli.com/main/Notebook/Entries/2005/11/1_How_to_Create_an_ATOM_1.0_Feed.html)可能会有所帮助。

我不太确定，但是在查看您的 XML 时，我认为您可能将 Atom 和 Rss 混淆了一点。

# c# - 如何在方法中返回 int[,]？

> ID：10460077
> 
> 赞同：1
> 
> 时间：2012-05-05T08:12:09.307
> 
> 标签：c#, xna

我正在使用 C# XNA 创建游戏。
我有一个 TileMap 存储在这样的`int[,]`数组中：

```
 int[,] Map = 
    {
        {1, 1, 1, 1, 1, 1, 1, 1 },
        {1, 1, 1, 1, 1, 1, 1, 1 },
        {1, 1, 1, 1, 1, 1, 1, 1 },
    }; 
```

我很好奇如何`Map[,]`通过我的类构造函数甚至在可能的方法中接受这种类型的数组并返回数组？

我想像这样返回`int[,]`：

```
 public int[,] GetMap()
    {
        return 
    int[,] Map1 = 
    {
        {1, 1, 1, 1, 1, 1, 1, 1 },
        {1, 1, 1, 1, 1, 1, 1, 1 },
        {1, 1, 1, 1, 1, 1, 1, 1 },
    };;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:20:06.413

我想你想要这个：

```
public int[,] GetMap()
{
    return new [,] 
    {
      {1, 1, 1, 1, 1, 1, 1, 1 },
      {1, 1, 1, 1, 1, 1, 1, 1 },
      {1, 1, 1, 1, 1, 1, 1, 1 },
    };
} 
```

也可以是：

```
public int[,] GetMap()
{
    int [,] map = new [,]
    {
      {1, 1, 1, 1, 1, 1, 1, 1 },
      {1, 1, 1, 1, 1, 1, 1, 1 },
      {1, 1, 1, 1, 1, 1, 1, 1 },
    };

    return map;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:13:50.133

```
void Method(int[,] map)
{
    // use map here
}

int[,] MethodWithReturn()
{
    // create Map here
    return Map;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:20:53.500

```
public int[,] GetMap()
{
    int[,] map = new int[,]
    {
        {1, 1, 1, 1, 1, 1, 1, 1 },
        {1, 1, 1, 1, 1, 1, 1, 1 },
        {1, 1, 1, 1, 1, 1, 1, 1 },
    };

    return map;
} 
```

你不能对多维数组使用隐式声明，所以你需要先声明数组，然后返回它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T08:24:22.290

你确实可以这样做：

```
return new int[,]
           {
               {1, 1, 1, 1, 1, 1, 1, 1},
               {1, 1, 1, 1, 1, 1, 1, 1},
               {1, 1, 1, 1, 1, 1, 1, 1}
           }; 
```

但是，如果您问的是如何从外部处理 int[,] ，当您不知道界限时...然后：

```
private static int[,] CreateMap(out int height)
{
    height = 3;

    return new int[,]
               {
                   {1, 1, 1, 1, 1, 1, 1, 1},
                   {1, 1, 1, 1, 1, 1, 1, 1},
                   {1, 1, 1, 1, 1, 1, 1, 1}
               };
} 
```

从外部使用：

```
int height;
int[,] map = CreateMap(out height);

int width = map.Length / height;

for (int i = 0; i < height; i++)
{
    for (int j = 0; j < width; j++)
    {
        Console.WriteLine(map[i, j]);
    }
} 
```

# ruby-on-rails - Rails，rspec，发布数组，如“hey[]=1”

> ID：10460079
> 
> 赞同：3
> 
> 时间：2012-05-05T08:12:16.373
> 
> 标签：ruby-on-rails, ruby, post, rspec

我需要测试客户端是否在后请求中包含 POINTS 数组。当我使用 RESTClient 插件测试它时，我会这样做：

```
POINTS[]=1.111111,2.222222,77 
```

它有效。现在我需要通过 rspec 对其进行测试，但我不知道该怎么做。这是我的 rspec 测试请求：

```
post :event, DISTANCE: "12345", POINTS: { "1" => "1.111111,2.222222,77" } 
```

但不知何故，它不起作用。**puts p.inspect**显示：["1", "1.111111,2.222222,77"] 这不是我想要的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:35:30.697

如评论中所述，请执行以下操作：

```
post :event, distance: "12345", points:  ["1.111111,2.222222,77"] 
```

# java - gnu.mail.providers.nntp newsrc

> ID：10460081
> 
> 赞同：1
> 
> 时间：2012-05-05T08:12:42.770
> 
> 标签：java, jakarta-mail, gnu, nntp, usenet

[参考gnu.mail.providers.nntp](http://www.gnu.org/software/classpathx/javamail/javadoc/gnu/mail/providers/nntp/package-summary.html)的 API 文档，我试图在运行 leafnode 的 localhost nntp 上生成文件夹[列表](http://leafnode.sourceforge.net/)。

但是，似乎 ${user.home}/.newsrc 没有正确加载，因为我得到了一个零长度数组：

```
store = session.getStore(new URLName(props.getProperty("nntp.host")));
store.connect();
root = store.getDefaultFolder();
Folder[] f = root.list();
LOG.warning("folders array " + f.length); 
```

如何调试 newsrc 是否为商店正确加载？

属性文件：

```
mail.smtp.auth=true
mail.smtp.host=smtp.gmail.com
mail.smtp.port=589
mail.smtp.auth=true
mail.imap.host=imap.gmail.com
mail.imap.port=993
mail.imap.connectiontimeout=5000
mail.imap.timeout=5000
mail.user=hawat.thufir@gmail.com
nntp.group=gwene.com.economist
nntp.host=nntp://localhost/
mail.nntp.newsrc.file=/home/thufir/.newsrc
jdbc.user=java
jdbc.password=password
jdbc.url=jdbc:mysql://localhost:3306/nntp?autoReconnect=true
jdbc.jndiName=jdbc:mysql://localhost:3306/nntp?autoReconnect=true 
```

顺便说一句，对于属性文件中指定的组，与商店的连接很好。

将调试设置为 true 给出：

```
May 05, 2012 2:22:33 AM net.bounceme.dur.nntp.model.PropertiesReader getProps
INFO: NNTP.loadMessages...
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 0 groups in 1ms
May 05, 2012 2:22:35 AM net.bounceme.dur.nntp.controller.Usenet connect
WARNING: folders array 0
May 05, 2012 2:22:35 AM net.bounceme.dur.nntp.controller.Usenet loadFoldersList
WARNING: folders 0
May 05, 2012 2:22:35 AM net.bounceme.dur.nntp.controller.MessagesEnum <init>
INFO: starting controller.. 
```

所以看起来 newsrc 正在加载，但有 0 个组。然而，有问题的 newsrc 是这样的：

```
thufir@dur:~$ 
thufir@dur:~$ cat .newsrc
gwene.com.economist 1-1000000
thufir@dur:~$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:45:33.683

格式错误的 newsrc，固定为：

```
thufir@dur:~$ 
thufir@dur:~$ cat .newsrc
gwene.com.economist: 1-100
thufir@dur:~$ 
```

工作正常。

# asp.net - 关闭弹出窗口

> ID：10460085
> 
> 赞同：1
> 
> 时间：2012-05-05T08:13:26.760
> 
> 标签：asp.net

我在弹出窗口中打开表单，当我单击关闭按钮时，它会触发关闭按钮的单击事件并关闭窗口，但它再次调用窗口的页面加载事件并且弹出窗口保持打开状态，直到我通过单击浏览器关闭按钮明确关闭它.我已经检查了 IsPostback。请帮我关闭窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:16:57.573

确保它没有在您的页面加载事件中重新打开。理想情况下，您不应该调用服务器端事件来关闭窗口。这种类型的操作应该在客户端使用 JavaScript 处理，以便为您的用户提供更流畅的用户体验。

您可以通过向按钮添加 OnClientClick 事件并通过函数处理关闭事件来实现此目的。

# python - 两个文件的文本处理

> ID：10460088
> 
> 赞同：5
> 
> 时间：2012-05-05T08:13:55.297
> 
> 标签：python, text, awk

我有以下格式的两个文本文件：

第一个是每一行：

`Key1:Value1`

第二个是这样的：

`Key2:Value2`

有没有一种方法可以通过使用它作为键来替换`Value1`in ？`file1``Value2``file2`

例如：

文件1：

```
foo:hello
bar:world 
```

文件2：

```
hello:adam
bar:eve 
```

我想得到：

```
foo:adam
bar:eve 
```

每行的两个文件之间不一定匹配。这可以在 awk 或其他东西中巧妙地完成，还是我应该在 Python 中天真地完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:26:14.787

创建两个字典，每个文件一个。例如：

```
file1 = {}
for line in open('file1', 'r'):
    k, v = line.strip().split(':')
    file1[k] = v 
```

或者，如果您更喜欢单线：

```
file1 = dict(l.strip().split(':') for l in open('file1', 'r')) 
```

然后你可以做类似的事情：

```
result = {}
for key, value in file1.iteritems():
    if value in file2:
        result[key] = file2[value] 
```

另一种方法是您可以为 file1 反向生成键值对并使用集合。例如，如果您的 file1 包含`foo:bar`，则您的 file1 dict 是`{bar: foo}`.

```
for key in set(file1) & set(file2):
    result[file1[key]] = file2[key] 
```

基本上，您可以使用集合交集快速找到共同元素，因此这些元素保证在 file2 中，您不会浪费时间检查它们的存在。

**编辑：**正如@pepr 所指出的，`collections.OrderedDict`如果订单对您很重要，您可以使用第一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T11:56:43.887

awk 解决方案：

```
awk '
  BEGIN {FS = OFS = ":"}
  NR==FNR {val[$1] = $2; next}
  $1 in val {$2 = val[$1]}
  {print}
}' file2 file1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T11:06:15.257

```
join -t : -1 2 -2 1 -o 0 2.2 -a 2 <(sort -k 2 -t : file1) <(sort file2) 
```

输入文件必须在它们连接的字段上进行排序。

选项：

*   `-t :`- 使用冒号作为分隔符
*   `-1 2`- 加入文件 1 的字段 2
*   `-2 1`- 加入文件 2 的字段 1
*   `-o 0 2.2`- 输出连接字段，后跟来自 file2 的字段 2（由分隔符分隔）
*   `-a 2`- 从 file2 输出未连接的行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T05:09:17.533

发射器：

```
@(next "file2")
@(collect)
@key:@value1
@  (cases)
@    (next "file1")
@    (skip)
@value2:@key
@  (or)
@    (bind value2 key)
@  (end)
@  (output)
@value2:@value1
@  (end)
@(end) 
```

跑：

```
$ txr subst.txr
foo:adam
bar:eve 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T09:19:12.780

一旦你有：

```
file1 = {'foo':'hello', 'bar':'world'}
file2 = {'hello':'adam', 'bar':'eve'} 
```

你可以做一个丑陋的衬里：

```
print dict([(i,file2[i]) if i in file2 else (i,file2[j]) if j in file2 else (i,j) for i,j in file1.items()])
{'foo': 'adam', 'bar': 'eve'} 
```

在您的示例中，您同时使用`keys`和`values`中`file1`的`keys`。`file2`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-05T14:17:26.707

这可能对您有用（可能是 GNU sed）：

```
sed 's#\([^:]*\):\(.*\)#/\\(^\1:\\|:\1$\\)/s/:.*/:\2/#' file2 | sed -f - file1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-05T10:14:25.020

如果您不考虑使用基本的 Unix/Linux 命令作弊，那么这里有一个使用 paste 和 awk 的解决方案。

`paste file1.txt file2.txt | awk -F ":" '{ print $1":"$3 }'`

# asp.net - 无法访问已创建的属性

> ID：10460089
> 
> 赞同：0
> 
> 时间：2012-05-05T08:14:17.857
> 
> 标签：asp.net, linq, linq-to-sql

我有一个在我的网站中使用的 LINQ to SQL 模型。我已经将网站转换为 Web 应用程序，并且需要向实体添加属性。

我尝试使用设计器添加属性，以及通过服务器资源管理器重新生成实体。

在 .cs 文件中，我可以看到公共属性 JobTemplateName 但是当我尝试访问该属性时它没有显示出来。所有其他属性都显示，只是没有显示新属性。如果我尝试，我会收到一个编译器错误，指出 Job 不包含名为 JobTemplateName 的属性。

这是designer.cs中的代码

```
[global::System.Data.Linq.Mapping.ColumnAttribute(Name="TemplateName", Storage="_JobTemplateName", DbType="NVarChar(400)")]
    public string JobTemplateName
    {
        get
        {
            return this._JobTemplateName;
        }
        set
        {
            if ((this._JobTemplateName != value))
            {
                this.OnJobTemplateNameChanging(value);
                this.SendPropertyChanging();
                this._JobTemplateName = value;
                this.SendPropertyChanged("JobTemplateName");
                this.OnJobTemplateNameChanged();
            }
        }
    } 
```

嗯。。好。看来我有一个 database.designer.cs 文件和一个 database1.designer.cs 文件。某处出了点问题......

# android - 在 ListView 中显示 RadioGroup

> ID：10460092
> 
> 赞同：1
> 
> 时间：2012-05-05T08:14:48.940
> 
> 标签：android, android-layout

我需要知道如何将 RadioGroup 放在 ListView 中？

我是开发android的初学者。

我应该怎么做才能在 ListView 中显示 RadioGroup。
请指导我。

这是我的代码：

```
enter code here
package com.mySample.Smpl1;

import android.os.Bundle;
import android.widget.ListView;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView;
import android.app.*;
import android.view.View;
import android.widget.AdapterView.OnItemClickListener;

public class Smpl1 extends ListActivity
 {

  public void onCreate(Bundle savedInstanceState) 
   {
     super.onCreate(savedInstanceState);

     final String[] row = new  String []{"row1","row2"};
     setListAdapter(new ArrayAdapter<String>(this,R.layout.radiolayout,
             row));

     ListView lv = getListView();
     lv.setTextFilterEnabled(true);  

     lv.setOnItemClickListener(new OnItemClickListener()
     {

      public void onItemClick(AdapterView<?> parent,View eview,int position,long id)
         {
          Toast.makeText(getApplicationContext(), ((TextView)eview).getText(),
           Toast.LENGTH_SHORT).show();       

         }

     });

   }
} 
```

这是我的 rowylayout.xml

```
 <?xml version="1.0" encoding="UTF-8"?>

      <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/listView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:text="hahaha">`

     </TextView>

enter code here 
```

我的收音机.xml

```
enter code here

<?xml version="1.0" encoding="UTF-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content" >

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:baselineAligned="false" >

    <RadioButton
        android:id="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"/>

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"/>
   </RadioGroup>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:44:24.613

```
<RadioGroup
android:id="@+id/radioGroup1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"

android:baselineAligned="false" >

<RadioButton
    android:id="@+id/radio0"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"/>

<RadioButton
    android:id="@+id/radio1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"/> 
```

此代码应位于作为列表项的 rowylayout.xml 文件中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:49:48.487

try this

```
 <RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radio1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="RadioButton" />

    <RadioButton
        android:id="@+id/radio2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="RadioButton" />

</RadioGroup> 
```

# java - How to make a query to get results based on two othe relations in JPA? (kinda join three tables)

> ID：10460102
> 
> 赞同：0
> 
> 时间：2012-05-05T08:15:37.557
> 
> 标签：java, jpa

I have a Post class which is like below and it has a one-to-many relation with Users (people who can see this post) and also it has the same kind of relation (one-to-many) with Groups, now I want to get all the posts by a JPA Query based on Users and Groups, how should I write the JPA Query for this?

```
/* Post */
public class Post extends Model {

    private String title;
    private String text;

    @OneToMany
    @JoinTable(
        name="tbl_post_users",
        inverseJoinColumns={@JoinColumn(name="userId")},
        joinColumns={@JoinColumn(name="postId")}
    )
    public List<User> users; 

    @OneToMany
    @JoinTable(
        name="tbl_post_groups",
        inverseJoinColumns={@JoinColumn(name="groupId")},
        joinColumns={@JoinColumn(name="postId")}
    )
    public List<Group> groups; 

    public static List<Post> GetPosts(){
        // JPA Query here
    }
}

/* User */
public class User extends Model {

    @Id
    private int id;
    private String name;
    private String email; 
}

/* Group */
public class Group extends Model {

    @Id
    private int id;
    private String title;
    private int ownerId; 
} 
```

So I want to write the query so that I can get a list of all posts where user is {user} or group is {group}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:54:22.877

```
select distinct p from Post p 
left join p.users user
left join p.groups group
where user = :user
or group = :group 
```

Read [http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)

# asp.net-mvc-3 - 如何使用 Html.BeginForm() 获取元素的 ID

> ID：10460103
> 
> 赞同：1
> 
> 时间：2012-05-05T08:16:01.287
> 
> 标签：asp.net-mvc-3, razor, formcollection

我有下面的表格和一些代码。

```
@using (Html.BeginForm("Insert", "Question", "POST"))
{
    <div id="add_tag">
        <div id="list_tag">
            <span class="post-tag" id="2">Phi kim<span class="delete-tag" title="Xóa Tag này"></span></span>
            <span class="post-tag" id="22">Hóa Vô Cơ<span class="delete-tag" title="Xóa Tag này"></span></span>
            <span class="post-tag" id="1">Lý<span class="delete-tag" title="Xóa Tag này"></span></span>
        </div>
        <div class="tag-suggestions hidden">
        </div>
    </div>
    <div class="form-sumit clear">
        <input type="submit" id="submit-button" value="Post your question" />
    </div>
} 
```

我在 QuestionController 中的插入操作是这样的

```
 [HttpPost]
    [ValidateInput(false)]
    public ActionResult Insert(FormCollection _form)
    {
        //my code here
    } 
```

我想通过使用 Html.BeginForm 和 FormCollection 来获取嵌套的 span 标签的 id。我怎样才能做到这一点？请有人帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:14:23.770

当您点击提交按钮时，表单会收集该表单内的所有输入值，并使用以下格式发送到服务器：inputId=inputValue。Span 不是表单内的输入控件，并且表单不会收集其值或其他信息以发送到服务器。您可以生成隐藏的输入控件并为其设置 id 值。然后在服务器端的操作中，您可以从 FormCollection 中获取它。

```
[HttpPost]
[ValidateInput(false)]
public ActionResult Insert(FormCollection formCollection)
{
    //for example all hidden input controls start with "hidden_tag" id 
    //and end with your number of tag:
    var allNeededKeys = formCollection.AllKeys.Where(x => x.StartsWith("hidden_tag"));
    var listOfId = allNeededKeys.Select(formCollection.Get).ToList();
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:27:28.223

我很确定你不能。您可以使用 fiddler 来查看它们是否已发布回服务器，但我不认为它们是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:51:05.013

您应该使用隐藏字段将跨度的 ID 发布到服务器。视图是强类型的吗？

# iframe - fancybox iframe 工作/不适合我

> ID：10460105
> 
> 赞同：0
> 
> 时间：2012-05-05T08:16:19.113
> 
> 标签：iframe, fancybox

Fancybox iframe 无法与我合作。请您看看并提供帮助。它适用于“谷歌地图”链接，但不适用于“列表”链接

[http://thevillaproject.com/apex/f?p=150:2:0](http://thevillaproject.com/apex/f?p=150:2:0) :::::

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:52:26.650

不是fancybox iframe 不起作用而是内容的类型。您无法在 iframe 中显示任何 Google 页面，因此该 URL`http://maps.google.com/maps`不起作用。[检查原因](https://stackoverflow.com/a/8808761/1055987)。

但是，您可以将试用版添加`?output=embed`到链接中，它会起作用

```
<a href="http://maps.google.com/maps?output=embed" class="framefancybox"><p>list</p></a> 
```

# css - 如何在水平方向拉伸jsf panelgrid

> ID：10460115
> 
> 赞同：4
> 
> 时间：2012-05-05T08:18:23.593
> 
> 标签：css, jsf, stretch

我有一个单行面板网格作为欢迎页面的标题。它有5个元素。前两个是信息，第三个是命令链接，最后两个是更改语言的命令按钮。

我想 - 将它放在一行中 - 将它放在屏幕的整个宽度上；- 将两个右侧按钮对齐到屏幕的右侧 - 将前三个元素（单元格/列）对齐到右侧，它们之间的确定空间很小。

我尝试如下：

```
 <h:panelGrid columns="5" columnClasses="top_column1, top_column2, top_column3, top_column4, top_column5"  style="width: 100%">
             <h:outputText value="#{msg.LoggedAs}:" />
             <h:outputText value="#{userManager.loggedUser.username}  /  "/>
             <h:commandLink value="#{msg.butLogout}" action="#{userManager.logout()}" style="color: white"  />
             <h:commandButton  action="#{languageOfSystem.changeLanguage('en')}" image="/resources/icons/usa_24.png"    title="english" />
             <h:commandButton  action="#{languageOfSystem.changeLanguage('pl')}" image="/resources/icons/poland_24.png" title="polish"/>
          </h:panelGrid> 
```

像这样的CSS：

```
.top_column1 {
    font-weight: normal;
}

.top_column2 {
}

.top_column3 {
    width: 78%;
}
.top_column4 {
    width: 24px;
}
.top_column5 {
    width: 24px;
} 
```

我得到了这样的效果： ![在此处输入图像描述](../Images/9c95decfdb85e5ab035cf08784ab73c3.png) 但它仍然是通过确定第三列的宽度来实现的，所以如果消息有不同的长度，就会有两行而不是一行，否则一切都会变得一团糟。我应该如何格式化我的面板网格以实现我想要的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T11:51:43.987

`white-space`添加一个值为`nowrap`to的 CSS属性`.top_column1`。

顺便说一句，这最好是一个 2 列表，其中第一列的宽度为`100%`，第二列包含那些语言按钮。或者只是使用 div 并向右浮动语言按钮。

# visual-studio - 指定的模块无法找到。HRESULT 异常：0x8007007E

> ID：10460118
> 
> 赞同：17
> 
> 时间：2012-05-05T08:18:55.073
> 
> 标签：visual-studio, sql-server-2008, server-explorer

当我尝试在家里的 64 位机器上从 Visual Studio 的服务器资源管理器对 sql 服务器数据库进行任何修改时，我在 Visual Studio 显示的消息框中收到以下消息。数据库是在 32 位机器上创建和填充的。有什么想法吗？

**编辑：**

通过替换位于此处的损坏的 dll 来修复它：“C:\Program Files (x86)\Common Files\microsoft shared\Visual Database Tools\dsref80.dll”

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T02:07:56.293

就像对从谷歌来到这里的其他人有点提醒一样......

这是由于安装了 VS11 Beta，然后在不安装 VS2012 的情况下卸载了 VS11 Beta 而发生的（对我和[这里的大多数人来说）。](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/d65c71f5-3887-4f2a-bbd3-e799a4ac6fdc/)替换上面提到的 DLL，以及可选的位于下面路径中的 DLL，似乎可以解决问题。

```
C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8\*.dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T12:41:01.963

我的问题大致相同。

我无法创建数据库图。Visual Studio 2010 会默默地失败，但 SQL Server Management Studio 给出了错误消息“找不到指定的模块。（MS Visual Database Tools）”。这发生在尝试（并删除）新的 Visual Studio 测试版之后。

您的解决方案使我朝着正确的方向前进。但我的问题不是 dsref80.dll 文件，而是整个文件夹 C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8。删除该文件夹并从虚拟机插入副本后（修复 VS 可能也可以），一切都恢复正常了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T18:48:51.810

我在尝试使用使用 Visual Studio 2008 Shell（集成模式）的 SQL Server 2008 R2 Business Intelligence Development Studio (BIDS) 时遇到了这个问题。每次我尝试创建新的集成服务项目时，都会收到错误消息，“...找不到指定的模块。（HRESULT 异常：0x8007007E）（System.Windows.Forms）...”。

正如其他海报所指出的，MSDesigners8 中的文件似乎已损坏。我没想过在虚拟机中安装 SQL Server 2008 R2 BIDS 来获取 DLL 的副本以放入该文件夹，但我找到了一个似乎可行的解决方案：安装[Visual Studio 2008 Shell (integrated mode) SP1](http://www.microsoft.com/en-us/download/details.aspx?id=16480)。

在此之前，我将 MSDesigners8 文件夹重命名为 MSDesigners8_old（并且 .dll 文件也重命名为 .dllold。我认为这并不重要；我将其包含在此处只是为了以防万一）。我尝试修复和重新安装 BIDS，但它没有重新创建 MSDesigners8 文件夹。安装 SP1 确实如此。

之后，可能还需要重新安装 BIDS，但可能不会。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T14:52:41.580

我在 Visual Studio Professional 2012 版本 11.0.61030.00 Update 4 上遇到了同样的错误，并通过转到 C:\Program Files (x86)\Common Files\microsoft shared\Visual Database Tools 并将 dsref80.dll 文件重命名为 desref80 来解决它.old.dll 然后在我的 Visual Studio 安装上运行“修复”操作。修复时，Visual Studio 修复对话框告诉我它找不到包源，因为我没有可用的安装光盘，所以我只选择了“下载”选项，它就可以工作了。这将安装适当版本的 desref80.dll 文件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-13T09:38:58.023

如果您认为您可能遇到此问题，只需将您的文件替换为另一个 SQL Server 2008R2/Visual Studio 2008 安装中的副本即可，如下所示：

C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8\msddslm.dll

C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8\msdds.dll

C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8\msddsf.dll

C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8\msddslmp.dll

C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8\msddsp.dll

# android - 如何将 Android 4 按钮样式移植到较低平台？

> ID：10460120
> 
> 赞同：3
> 
> 时间：2012-05-05T08:18:58.053
> 
> 标签：android, button, styles

我目前正在开发一个在 android api 4 (1.6) 及更高版本上运行的应用程序。但是，它在 android 4 上看起来非常好（带有新的按钮样式），但在以下所有平台上看起来都很愚蠢，包括 1.6（那里的按钮样式很尴尬）。

如何使所有平台上的按钮视图均等？我可以复制`android 4 button style`到我的项目来解决这个问题吗？如果是，我在哪里可以找到这种风格。

*这就是它应该到处都是*的样子：

![在此处输入图像描述](../Images/4664c82ee3b641b52d4ee5866cbcaf2d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:40:52.120

您可以在此处找到所有可绘制对象和样式：[https ://github.com/android/platform_frameworks_base/tree/master/core/res/res](https://github.com/android/platform_frameworks_base/tree/master/core/res/res)

如果您只想使用按钮，则选择与每个密度和样式相对应的可绘制对象就足够了。这些位于“值”文件夹下的相同位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:10:15.643

是的，你可以这么做。您需要做的就是创建一个自定义背景并从您的 SDK 目录中复制一些文件。

把它作为一个 xml drawable 放在你的 drawables 文件夹中。我将其命名为 btn_start_activity.xml。但是你可以给它任何你想要的名字。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_window_focused="false" android:state_enabled="true"
        android:drawable="@drawable/btn_default_normal_holo_dark" />
    <item android:state_window_focused="false" android:state_enabled="false"
        android:drawable="@drawable/btn_default_disabled_holo_dark" />
    <item android:state_pressed="true" 
        android:drawable="@drawable/btn_default_pressed_holo_dark" />
    <item android:state_focused="true" android:state_enabled="true"
        android:drawable="@drawable/btn_default_focused_holo_dark" />
    <item android:state_enabled="true"
        android:drawable="@drawable/btn_default_normal_holo_dark" />
    <item android:state_focused="true"
        android:drawable="@drawable/btn_default_disabled_focused_holo_dark" />
    <item
         android:drawable="@drawable/btn_default_disabled_holo_dark" />
</selector> 
```

现在 Eclipse 会抱怨它找不到文件。您需要将它们从 sdk.dir/platforms/android-15/data/res/drawable-xxx 复制到您的项目中。注意复制 ldpi、mdpi、hdpi 和 xhdpi 版本。

现在在 res/color 文件夹中创建一个 xml 文件。我指定了名称：primary_text_btn_start.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" android:color="@color/bright_foreground_disabled_holo_dark"/>
    <item android:state_window_focused="false" android:color="@color/bright_foreground_holo_dark"/>
    <item android:state_pressed="true" android:color="@color/bright_foreground_holo_dark"/>
    <item android:state_selected="true" android:color="@color/bright_foreground_holo_dark"/>
    <item android:state_activated="true" android:color="@color/bright_foreground_holo_dark"/>
    <item android:color="@color/bright_foreground_holo_dark"/> <!-- not selected -->
</selector> 
```

现在将缺少的颜色值添加到 res/values 中的 colors.xml。

```
<color name="bright_foreground_disabled_holo_dark">#ff4c4c4c</color>
<color name="bright_foreground_holo_dark">#fff3f3f3</color> 
```

然后将新样式应用于您的按钮

```
android:background="@drawable/btn_start_activity"
android:textColor="@color/primary_text_btn_start" 
```

# c# - C# 图形、绘画、图片框居中

> ID：10460124
> 
> 赞同：1
> 
> 时间：2012-05-05T08:20:25.327
> 
> 标签：c#, forms, graphics, paint, picturebox

好的，这就是问题所在：在 C# 表单中，我创建了一个新的私有 void：

```
private void NewBtn(string Name, int x, int y) 
```

其目的是创建一个模仿按钮行为的图片框（不要问为什么，我只是喜欢使事情复杂化）并且可以根据需要多次调用。

```
Font btnFont = new Font("Tahoma", 16);
PictureBox S = new PictureBox();
S.Location = new System.Drawing.Point(x, y);
S.Paint += new PaintEventHandler((sender, e) =>
{
    e.Graphics.TextRenderingHint = 
        System.Drawing.Text.TextRenderingHint.AntiAlias;
    e.Graphics.DrawString(Name, btnFont, Brushes.Black, 0, 0);
});
Controls.Add(S); 
```

现在，我担心 Paint/Graphics 的一部分（忽略其余的代码，我只给出了其中的一部分）。当我称它为“NewBtn（Name，x，y）”时，我想将我写为“Name”的文本居中。那么，我应该写什么

```
e.Graphics.DrawString(Name, btnFont, Brushes.Black, ThisX???, 0); 
```

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T09:10:25.043

```
var size = g.MeasureString(Name, btnFont);

e.Graphics.DrawString(Name, btnFont, Brushes.Black,
                      (S.Width - size.Width) / 2,
                      (S.Height - size.Height) / 2)); 
```

考虑到特定按钮/图片框的字体和文本不会改变，您可以通过仅测量一次字符串来改进这一点。

而且我还建议检查是否`S.Size`比宽/高`size`并处理它，因此图形不会尝试从负坐标开始绘制字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T09:27:15.527

Try using the [Graphics.DrawString](http://msdn.microsoft.com/en-us/library/d3thd43b.aspx) [methods](http://msdn.microsoft.com/en-us/library/21kdfbzs.aspx) that uses the [String.Drawing.StringFormat](http://msdn.microsoft.com/en-us/library/system.drawing.stringformat.aspx) Option

```
StringFormat drawFormat = new StringFormat();
drawFormat.Alignment= StringAlignment.Center;
drawFormat.LineAlignment = StringAlignment.Center; 
```

You have two options here the first to use coordinates.

```
e.Graphics.DrawString(("Name", new Font("Arial", 16), Brushes.Black, 10, 10, drawFormat); 
```

the second is to create a rectange like this:

```
 e.Graphics.DrawString("Name", new Font("Arial", 16), Brushes.Black, new Rectangle(0,0,this.Width,this.Height), drawFormat); 
```

# lua - 如何从Lua中的字符串中删除空格？

> ID：10460126
> 
> 赞同：28
> 
> 时间：2012-05-05T08:21:20.563
> 
> 标签：lua, replace

我想从 Lua 中的字符串中删除所有空格。这是我尝试过的：

```
string.gsub(str, "", "")
string.gsub(str, "% ", "")
string.gsub(str, "%s*", "") 
```

这似乎不起作用。如何删除所有空格？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-05T10:02:58.193

它有效，您只需要分配实际的结果/返回值。使用以下变体之一：

```
str = str:gsub("%s+", "")
str = string.gsub(str, "%s+", "") 
```

我使用`%s+`它是因为替换空匹配没有意义（即没有空间）。这没有任何意义，所以我寻找至少一个空格字符（使用`+`量词）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-29T12:34:22.783

最快的方法是使用从 trim.c 编译的 trim.so：

```
/* trim.c - based on http://lua-users.org/lists/lua-l/2009-12/msg00951.html
            from Sean Conner */
#include <stddef.h>
#include <ctype.h>
#include <lua.h>
#include <lauxlib.h>

int trim(lua_State *L)
{
 const char *front;
 const char *end;
 size_t      size;

 front = luaL_checklstring(L,1,&size);
 end   = &front[size - 1];

 for ( ; size && isspace(*front) ; size-- , front++)
   ;
 for ( ; size && isspace(*end) ; size-- , end--)
   ;

 lua_pushlstring(L,front,(size_t)(end - front) + 1);
 return 1;
}

int luaopen_trim(lua_State *L)
{
 lua_register(L,"trim",trim);
 return 0;
} 
```

编译类似：

```
gcc -shared -fpic -O -I/usr/local/include/luajit-2.1 trim.c -o trim.so 
```

更详细（与其他方法相比）： http: [//lua-users.org/wiki/StringTrim](http://lua-users.org/wiki/StringTrim)

**用法：**

```
local trim15 = require("trim")--at begin of the file
local tr = trim("   a z z z z z    ")--anywhere at code 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-13T03:17:18.863

您使用以下功能：

```
function all_trim(s)
  return s:match"^%s*(.*)":match"(.-)%s*$"
end 
```

或更短：

```
function all_trim(s)
   return s:match( "^%s*(.-)%s*$" )
end 
```

用法：

```
str=" aa " 
print(all_trim(str) .. "e") 
```

输出是：

```
aae 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-18T18:42:37.870

对于 LuaJIT，来自 Lua wiki 的所有方法（可能除了本机 C/C++）在我的测试中都非常慢。此实现显示了最佳性能：

```
function trim (str)
  if str == '' then
    return str
  else  
    local startPos = 1
    local endPos   = #str

    while (startPos < endPos and str:byte(startPos) <= 32) do
      startPos = startPos + 1
    end

    if startPos >= endPos then
      return ''
    else
      while (endPos > 0 and str:byte(endPos) <= 32) do
        endPos = endPos - 1
      end

      return str:sub(startPos, endPos)
    end
  end
end -- .function trim 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-05-23T12:44:41.087

如果有人希望删除一堆字符串中的所有空格，并删除字符串中间的空格，这对我有用：

```
function noSpace(str)

  local normalisedString = string.gsub(str, "%s+", "")

  return normalisedString

end

test = "te st"

print(noSpace(test)) 
```

不过可能有更简单的方法，我不是专家！

# javascript - JavaScript - 未捕获的类型错误：无法设置未定义的属性“0”

> ID：10460128
> 
> 赞同：2
> 
> 时间：2012-05-05T08:21:42.167
> 
> 标签：javascript, jquery, html, a-star

我在一个简单的 JavaScript 2D（画布）游戏中使用[A* 寻路脚本。](http://www.briangrinstead.com/blog/astar-search-algorithm-in-javascript)我将我的游戏分解为[SSCCE](http://sscce.org/)。无论如何，我的游戏有 15 列和 10 行。

问题是我得到的错误。下面我有一种方法来开始和结束节点之间的路径。`Uncaught TypeError: Cannot set property '0' of undefined`这是关于的错误消息`line 15`。第 15`nodes[x][y] = new GraphNode(x, y, row[x]);`行在第二个`for`循环之间。

这是我的`SSCCE`。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>    
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type='text/javascript' src='graphstar.js'></script>
<script type="text/javascript">
    var board;
</script>
<script type='text/javascript' src='astar.js'></script>
<script type="text/javascript">
    $(document).ready(function()
{
        // UP to DOWN - 10 Tiles (Y)
        // LEFT to RIGHT - 15 Tiles (X)
        graph = new Graph([
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], 
        [1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
        [1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 1, 13, 13, 1], 
        [1, 13, 1, 1, 13, 1, 1, 13, 1, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 13, 1, 1, 1, 13, 13, 1, 13, 13, 1, 1, 1, 13, 1], 
        [1, 13, 13, 1, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 13, 1, 13, 13, 13, 1], 
        [1, 13, 1, 13, 13, 13, 13, 13, 1, 1, 1, 1, 13, 13, 13, 1], 
        [1, 13, 1, 1, 1, 1, 13, 13, 13, 13, 1, 13, 13, 13, 13, 1], 
        [1, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 1], 
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ]);
        //Let's do an example test.
        start = graph.nodes[1][2]; // X: 1, Y: 2
        end = graph.nodes[12][7]; // X: 12, Y: 7
        result = astar.search(graph.nodes, start, end);
    });
</script>
</head>
<body>
Loading... pathfinding. Look in Chrome Console/Firefox Firebug for more information.
</body>
</html> 
```

如您所见，我的游戏是`jQuery`. 还有`graphstar.js`和`astar.js`。不要担心，`astar.js`因为它工作正常。`graphstar.js`是我的问题所在。`astar.js`是`nodes`布置的地方。`graphstar.js`是地图绘制的地方。

在这里查看全部内容：http `graphstar.js`: [//pastebin.com/5AYRreip](http://pastebin.com/5AYRreip)（这里是`astar.js`： http: [//pastebin.com/ee6PMzc3](http://pastebin.com/ee6PMzc3)）

这是它的布局`graphstar.js`：

```
function Graph(grid) {
    var nodes = [];
    var row, rowLength, len = grid.length;
    for (y = 0; y <= 15; y++) {
        row = grid[y];
        nodes[y] = new Array(15);
        for (x = 0; x <= 10; x++) {
            nodes[x][y] = new GraphNode(x, y, row[x]);
        }
    }
    this.input = grid;
    this.nodes = nodes;
} 
```

所以，正如你所看到的......`Y`可以是`10`或更低。`X`可以是`15`或更低。但是，我收到此错误。

我在哪里输入`end = graph.nodes[12][7]; // X: 12, Y: 7` 应该工作，因为它在界限`X`内`Y`......但是我什至在首先设置它时遇到了麻烦。

为什么它是未定义的？

**更新新**

```
for (y = 0; y <= 10; y++) {

    row = grid[y];
    nodes[y] = new Array(15);

    for (x = 0; x <= 15; x++) {

        console.log("X: " + x + " Y: " + y);
        //console.log("Row: " + row[x]);
        nodes[x][y] = new GraphNode(x, y, row[x]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:34:21.250

你把你的轴弄混了。

```
function Graph(grid) {
    var nodes = [];
    var row, rowLength, len = grid.length;
    for (y = 0; y <= 15; y++) {
        row = grid[y];
        // Here, you're indexing into `nodes` using `y`, so you're creating
        // an array at `nodes[0]` through `nodes[15]`
        nodes[y] = new Array(15);
        for (x = 0; x <= 10; x++) {
            // But here you're index into `nodes` using `x` in the first dimension,
            // so you're filling in `nodes[0][0]` through `nodes[10][15]`, not
            // `nodes[15][10]`.
            nodes[x][y] = new GraphNode(x, y, row[x]);
        }
    }
    this.input = grid;
    this.nodes = nodes;
} 
```

因此，当您检索 时`nodes[12]`，您会得到，`undefined`因为从来没有为该索引分配值。然后你尝试索引它，并得到错误。

您需要确保始终使用一个坐标（或 ，您喜欢的任何一个）索引到外部数组，并使用另一个坐标（或`x`，`y`您喜欢的任何一个）索引到内部数组。`y``x`

# android - Android更新正在再次安装应用程序

> ID：10460130
> 
> 赞同：0
> 
> 时间：2012-05-05T08:22:06.383
> 
> 标签：android, installation, version

我搜索了论坛，但没有找到与我目前面临的问题相匹配的内容：

我有一个应用程序，它可以安装并且工作正常，但是当我尝试更新它（再次安装）时，应用程序没有更新，而是单独安装了一次 - 我有两个快捷方式，不同的应用程序数据，两个版本都可以工作，等等

我没有更改应用程序名称，在 adb 和实际手机和平板电脑上观察到相同的行为，也尝试使用相同和增加的应用程序版本......

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
package="com.rts.android.language" android:versionCode="1" android:versionName="1.1"
android:installLocation="auto">
        <uses-sdk android:minSdkVersion="8" />
        <uses-permission android:name="android.permission.VIBRATE"/>
        <application android:icon="@drawable/icon" android:label="@string/app_name">
            <activity android:name="com.rts.android.language.ui.MainActivity"
            android:label="@string/app_name"android:theme="@android:style/Theme.NoTitleBar">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter> 
            </activity>
    </application>
</manifest> 
```

任何想法可能是什么原因？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:44:32.743

please, make sure both applications contain same package name?

```
package="com.rts.android.language" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:39:57.290

首先，尝试将您的活动重命名：
从：
`<activity android:name="com.rts.android.language.ui.MainActivity" />`
到：
`<activity android:name=".ui.MainActivity" />`

尝试清理您的项目然后构建/重建...

这样做时，您需要清理您的密钥库：Linux 和 Mac OS X 上的
`%USERPROFILE%/.androidon`Windows
`~/.android/debug.keystore`

# ruby - Ruby 提示环境未连接到 gvim 文本编辑器

> ID：10460133
> 
> 赞同：1
> 
> 时间：2012-05-05T08:22:10.663
> 
> 标签：ruby, vim

我是 Rails 新手，按照视频教程，我必须打开 Ruby 命令提示符环境。

问题是我想使用 gvim 作为我的文本编辑器，但我似乎无法让它工作。它给出一条错误消息，内容为

```
gvim is not a recognizable internal or external command, operable programme or batch file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:28:58.413

gvim 可能未安装在您的系统中。gvim 是一个流行的开源文本编辑器。你没有提到你使用的是哪个操作系统。[你可以从http://www.vim.org/download.php](http://www.vim.org/download.php)安装 gvim

如果你在 Linux 上，你可以`vim`代替 gvim 来检查你是否正确地做这些事情。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:53:24.263

当你在 Windows 中安装 gvim 时，你必须点击一个复选框来安装命令行二进制文件。尝试重新安装 gvim 并单击该复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T08:35:57.747

你使用什么操作系统？

我想你使用win或mac。在 linux 上，你可以使用 vim 开箱即用。如果是 mac 或 win，则需要从[vim 官方网站](http://www.vim.org/download.php)安装 vim 或 gvim 。

在您需要自定义 vim 以与 ruby​​ 一起正常工作之后。 [例如](http://biodegradablegeek.com/2007/12/using-vim-as-a-complete-ruby-on-rails-ide/)

祝你好运。

# python - python中的“无法执行二进制文件”错误

> ID：10460137
> 
> 赞同：9
> 
> 时间：2012-05-05T08:22:35.990
> 
> 标签：python, cygwin

我不断收到以下错误：

```
$ ./test.py
-bash: ./test.py: cannot execute binary file 
```

尝试通过 cygwin 在 python 中运行以下文件时：

```
#!usr/bin/python
with open("input.txt") as inf:
    try:
        while True:
            latin = inf.next().strip()
            gloss = inf.next().strip()
            trans = inf.next().strip()
            process(latin, gloss, trans)
            inf.next()    # skip blank line
    except StopIteration:
        # reached end of file
        pass
from itertools import chain

def chunk(s):
    """Split a string on whitespace or hyphens"""
    return chain(*(c.split("-") for c in s.split()))

def process(latin, gloss, trans):
    chunks = zip(chunk(latin), chunk(gloss)) 
```

我该如何解决？？

* * *

接受以下建议后，仍然出现相同的错误。

如果这有帮助，我试过了

```
$ python ./test.py 
```

并得到

```
$ python ./test.py
  File "./test.py", line 1
SyntaxError: Non-ASCII character '\xff' in file ./test.py on line 1, but no encoding     declared; see http://www.python.org/peps/pep-0263.html for details 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:26:21.580

这儿存在一个问题。您在`#!usr/bin/python`. 你的线应该是这样的。

`#!/usr/bin/python`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T19:41:22.867

除了保护文件的可执行文件，`#!/usr/bin/python`可能不起作用。至少它在 Red Hat 或 Ubuntu Linux 上从未对我有用。相反，我把它放在我的 Python 文件中：

```
#!/usr/bin/env python 
```

我不知道这在 Windows 平台上是如何工作的。

# visual-studio - 自定义智能感知扩展

> ID：10460138
> 
> 赞同：31
> 
> 时间：2012-05-05T08:22:37.247
> 
> 标签：visual-studio, intellisense, visual-studio-extensions

我想在 Visual Studio 中编写智能感知的补充。

是否可以扩展，从我的研究中我没有找到任何关于智能扩展的示例或文档。

如何让智能感知显示如下所示的简单 HelloWorld 消息（其中 hello world 在运行时添加到 String 的智能感知）：

![在此处输入图像描述](../Images/f23580ae89118e24c8fd7be5e6d51e99.png)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-10T03:47:51.093

因此，在 Visual Studio 2010 及更高版本中，您想要使用的可扩展性 API 位于 Microsoft.VisualStudio.Languages.IntelliSense 命名空间下。在较高级别上，您希望 MEF 导出 a`ICompletionSourceProvider`它将提供您需要的项目。[这里](http://blog.robertgreyling.com/2010/05/sparksense-getting-started-wheres.html)和[这里](http://www.hill30.com/MikeFeingoldBlog/index.php/2009/09/05/django-editor-in-vs-2010-part-7-code-completion-source/)有两篇很好的博客文章演示了基本技术。

如果你想让你的截图成为现实，你会遇到两个问题。（这就是我要求这个场景的原因，因为我在这里的建议会改变。）首先，这种方法在法律上不允许您附加到现有的完成集，而是提供一个新的完成集。在 UI 中，这显示为两个选项卡，就像 Visual Basic 编辑器中的 Common/All 选项卡一样。这是当前 API 的限制。您可以尝试修改您现有的完成集之一，`AugmentCompletionSource`但我不知道这是否可行。无论如何，它绝对不受支持。

其次，很难知道何时何地推荐东西。在您的示例中，您说的是“IntelliSense for `string`”。可悲的是，VS 中没有任何 API（当前）可以让您知道点之前的内容是什么。您可以做一些简单的启发式或尝试为您的场景实现一些足够好™ 的解析器，但您现在必须接受您不会得到完美的结果。

[Roslyn](http://msdn.microsoft.com/en-us/roslyn)项目旨在解决第二个问题，因此您可能会发现进一步探索很有用。由于我们预计很多人会想要扩展完成，我们也在考虑提供其他可扩展性 API，这样您就不必`ICompletionSourceProvider`从头开始滚动，但此类 API 不在当前的 CTP 中。

[免责声明：我是从事 IntelliSense 工作的 Roslyn 团队的成员。]

# regex - 如何在 Vim 中捕获字符串中的所有出现？

> ID：10460143
> 
> 赞同：1
> 
> 时间：2012-05-05T08:24:03.867
> 
> 标签：regex, string, vim, replace, capture

我想在 Vimscript 的字符串中捕获所有特定的事件。

例子：

```
let my_calculation = '200/3 + 23 + 100.5/3 -2 + 4*(200/2)' 
```

如何捕获'/'之前和之后的所有数字（包括点，如果有）？在 2 个不同的变量中：
- 输出 before_slash：200100.5200
- 斜线后输出 332

如果出现这种情况，我该如何更换它们？
pe 如果在单个 '/' 之后没有 '.' 在此数字后添加“.0”

我尝试使用匹配字符串和正则表达式，但在尝试和尝试之后我无法解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:13:59.027

在这种情况下可以利用的一个有用特性是用表达式替换（请参阅 参考资料`:help sub-replace-\=`）。

```
let [a; b] = [[]]
call substitute(s, '\(\d*\.\?\d\+\)/\(\d*\.\?\d\+\)\zs',
\   '\=add(a,submatch(1))[1:0]+add(b,submatch(2))[1:0]', 'g') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T09:44:12.413

试试这个：

```
function! GetNumbers(string)
  let pairs = filter(split(a:string, '[^0-9/.]\+'), 'v:val =~ "/"')
  let den = join(map(copy(pairs), 'matchstr(v:val, ''/\zs\d\+\(\.\d\+\)\?'')'), '')
  let num = join(map(pairs, 'matchstr(v:val, ''\d\+\(\.\d\+\)\?\ze/'')'), '')
  return [num, den]
endfunction
let my_calculation = '200/3 + 23 + 100.5/3 -2 + 4*(200/2)'
let [a,b] = GetNumbers(my_calculation)
echo a
echo b 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T09:58:09.683

要回答问题的第二部分：

```
let my_calculation = '200/3 + 23 + 100.5/3 -2 + 4*(200/2)'
echo substitute(my_calculation, '\(\/[0-9]\+\)\([^0-9.]\|$\)', '\1.0\2', 'g') 
```

上述输出：

```
200/3.0 + 23 + 100.5/3.0 -2 + 4*(200/2.0) 
```

# c# - Firebug 已达到 Firebug 请求大小限制

> ID：10460145
> 
> 赞同：11
> 
> 时间：2012-05-05T08:24:18.203
> 
> 标签：c#, jquery, asp.net, web-services

我想将数据从客户端传递到服务器端。我正在使用 jQuery 和 WebService。如果数据很小，它可以正常工作。如果数据很大，则会出错。我在萤火虫错误中看到的是：

`Firebug request size limit has been reached by Firebug. ...`

所以我知道数据太大了，但这是我的要求。我该如何处理这种情况？有什么替代建议吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-07-16T21:14:43.473

转到 Firefox 的`about:config`页面。

搜索名为 的选项`extensions.firebug.netDisplayedPostBodyLimit`。我的默认为 10240。将其修改为更大的值。消息将消失。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T07:51:10.147

看到这个问题：[通过 jquery ajax 处理大量数据](https://stackoverflow.com/questions/10478149/handling-huge-data-via-jquery-ajax)

基本上，Firebug 对其面板中显示的数据量有限制。这与 ASP.Net Web 服务的最大数据大小无关。这由 web.config 中的以下部分控制。这是用于从客户端传递到服务器和服务器返回客户端的数据。

```
<system.web.extensions>
    <scripting>
      <webServices>
        <jsonSerialization maxJsonLength="2147483647">
        </jsonSerialization>
      </webServices>
    </scripting>
</system.web.extensions> 
```

# php - 将两个不同的 PHP 函数与相同的变量子集结合起来？

> ID：10460147
> 
> 赞同：1
> 
> 时间：2012-05-05T08:24:50.987
> 
> 标签：php, function

下面是两个示例 PHP 函数：

```
function myimage1() {
global $post;
    $attachment_id = get_post_meta($post->ID, 'f1image', $single = true);
    $myimage1 = wp_get_attachment_image( $attachment_id, thumbnail );
return $myimage1;
} 
```

（我这样称呼它`<?php echo myimage1(); ?>`：）

和

```
function myimage2() {
global $post;
    $attachment_id = get_post_meta($post->ID, 'f1image', $single = true);
    $myimage2 = wp_get_attachment_image( $attachment_id, medium );
return $myimage2;
} 
```

（我这样称呼它`<?php echo myimage2(); ?>`：）

如您所见，两者都有一个共同的变量`$attachment_id`。而且这两个函数有很大的关系，只是我不知道如何将它们结合起来，或者如何从组合函数中调用它们。

**PS：**我不懂 PHP，我的术语可能有点模糊。在这种情况下，请随时纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:30:47.250

```
function myimage($level) {
    global $post;
    $attachment_id = get_post_meta($post->ID, 'f1image', true);
    $myimage = wp_get_attachment_image( $attachment_id, $level );
    return $myimage;
}

myimage("medium");
myimage("thumbnail"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T08:38:00.617

OOP 正是为了满足这种需求。两个函数（方法）使用相同的类变量。

```
<?php

class A {

    public $attachment_id;

    private function wp_get_attachment_image() {

        // place your wp_get_attachment_image() function content here

    }

    public function myimage1() {

        $myimage1 = $this->wp_get_attachment_image($this->attachment_id, medium);
        return $myimage1;

    }

    public function myimage2() {

        $myimage2 = $this->wp_get_attachment_image($this->attachment_id, medium);
        return $myimage2;

    }

}

$a = new A;
$a->attachment_id = $a->get_post_meta($post->ID, 'f1image', $single = true);
$a->myimage1();
$a->myimage2();

?> 
```

# ruby-on-rails-3 - FactoryGirl 序列在数据库中重复生成相同的电子邮件

> ID：10460162
> 
> 赞同：1
> 
> 时间：2012-05-05T08:26:44.617
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

我正在使用以下代码生成电子邮件地址：

```
sequence :email do |n|
  "person#{n}@example.com"
end 
```

然后要生成一个用户，我使用以下代码：

```
factory :user do
  sequence(:username) {|n| "person#{n}"}
  email { generate :email }
  password 'password'
  password_confirmation { |u| u.password }
end 
```

但是，当我运行测试时，它总是会生成“person1@example.com”。它永远不会增加到“2”。

我收到错误消息“person1@example.com”已存在于数据库中。

如何让 FactoryGirl 增加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T06:43:28.333

如果您在单个测试中生成用户时收到此消息，那么是的，这是生成唯一电子邮件的问题。但是由于测试数据库不干净（用户从以前的测试中遗留下来），您可能会收到这种错误消息。如有疑问，请检查测试日志。

# c# - OCR A Image 使用 Microsoft Office 文档图像库

> ID：10460165
> 
> 赞同：1
> 
> 时间：2012-05-05T08:27:46.947
> 
> 标签：c#, asp.net, .net, image

如何使用 MODI 对彩色图像进行 ocr。我已经转换了使用 Paint 创建的 .tif 图像并从中获取文本，但它不适用于彩色图像。如何处理彩色图像以便我可以从中提取文本。

我将此代码用于ocr

```
 MODI.Document md = new MODI.Document();
            md.Create(@"c:\test3.tif");
            md.OCR(MODI.MiLANGUAGES.miLANG_ENGLISH, false, false);
            MODI.Image img845 = (MODI.Image)md.Images[0];
            TextBox1.Text = img845.Layout.Text 
```

;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:52:03.410

你需要 OCR 引擎，互联网上有几个免费的，有些是付费的。有一个工具 - 内置在 .NET 中的 eFlow 就是这样工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:23:18.243

您可以先通过这种方法创建灰度图像

```
Bitmap bmp = new Bitmap(Bitmap.FromFile("oldFile"));

for (int x = 0; x < bmp.Width; x++)
{
    for (int y = 0; y < bmp.Height; y++)
    {
        Color color = bmp.GetPixel(x, y);
        int grayScale = (color.R + color.G + color.B) / 3;
        bmp.SetPixel(x,y,Color.FromArgb(grayScale, grayScale, grayScale));
    }
}

bmp.Save("newFile"); 
```

然后对新文件进行OCR，这是灰度

# c# - 登录 asp.net 网站时出现致命错误 9001

> ID：10460166
> 
> 赞同：2
> 
> 时间：2012-05-05T08:28:07.763
> 
> 标签：c#, asp.net, .net, sql, database

这是我的网站第二次出现以下错误：

> 警告：致命错误 9001 发生在 2012 年 5 月 5 日凌晨 1:16。记下错误和时间，并联系您的系统管理员。

我在登录网站时收到此错误。但是，连接数据库或获取记录没有任何问题。

上次我只是备份并恢复了我的数据库，然后这个问题就解决了。但是，我又遇到了类似的问题，现在我想知道这个错误的确切原因。

我很感激你的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:44:38.050

检查 SQL Server 日志，似乎是日志已满的问题。“上次我只是备份并恢复了我的数据库，然后这个问题就解决了。” 似乎与数据库相关。检查[https://serverfault.com/questions/238394/diagnosing-microsoft-sql-server-error-9001-the-log-for-the-database-is-not-avai](https://serverfault.com/questions/238394/diagnosing-microsoft-sql-server-error-9001-the-log-for-the-database-is-not-avai)。

# php - DOM 解析器是如何实现的？

> ID：10460168
> 
> 赞同：7
> 
> 时间：2012-05-05T08:29:36.383
> 
> 标签：php, dom

我的经验告诉我**[不应该使用 RegExp 来解析 HTML/XML](https://stackoverflow.com/a/1732454/871050)**，我完全同意！它是

*   凌乱
*   不坚固且容易损坏
*   纯粹的邪恶

他们都说某种“使用 DOM 解析器”，这对我来说很好。但现在我很好奇了。这些是如何工作的？

我正在搜索 DOMDocument 类源，但找不到它。

这个问题来自这样一个事实，`filter_var()`例如，它被认为是使用 RegExp 验证电子邮件的一个很好的替代方案，但是当您查看源代码时，您会发现它实际上使用了 RegExp 本身！

那么，如果您要在 PHP 中构建一个 DOM 解析器呢？您将如何解析 HTML？他们是如何做到的呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T18:25:58.113

I think you should check out the article [How Browsers Work: Behind the Scenes of Modern Web Browsers](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/#HTML_Parser). It's a lengthy read, but well worth your time. Specifically, the HTML Parser section.

While I cannot do the article justice, perhaps a cursory summary will be good to hold one over until they have the time to read and digest that masterpiece. I must admit though, in this area I am a novice having very little experience. Having developed for the web professionally for about 10 years, the way in which the browser handles and interprets my code has long been a black box.

HTML, XHTML, CSS or JavaScript - take your pick. They all have a grammer, as well as a vocabulary. English is another great example. We have grammatical rules that we expect people, books, and more to follow. We also have a vocabulary made up of nouns, verbs, adjectives and more.

Browsers interpret a document by examining its grammar, as well as its vocabulary. When it comes across items it ultimately doesn't understand, it will let you know (raising exceptions, etc). You and I do the same in common-speak.

> I love StackOverflow, but if I could changed one thing it would be be absolutamente broken...

Note in the example above how you immediately start to pick apart the words and relationships between words. The beginning makes complete sense, "I love StackOverflow." Then we come to "...if I could changed," and we immediately stop. "Changed" doesn't belong here. It's likely the author meant "change" instead. Now the vocabulary is right, but the grammar is wrong. A little later we come across "be be" which may also violate a grammatical rule, and just a bit further we encounter the word "absolutamente", which is not part of the English vocabulary - another mistake.

Think of all of this in terms of a DOCTYPE. I have right now opened up on my second monitor the source behind XHTML 1.0 Strict Doctype. Among its internals are lines like the following:

```
<!ENTITY % heading "h1|h2|h3|h4|h5|h6"> 
```

This defines the heading entities. And as long as I adhere to the grammar of XHTML, I can use any one of these in my document (`<h1>Hello World</h1>`). But if I try to make one up, say `H7`, the browser will stumble over the vocabulary as "foreign," and inform me:

> "Line 7, Column 8: element "h7" undefined"

Perhaps while parsing the document we come across `<table`. We know that we're now dealing with a `table` element, which has its own set of vocabulary such as `tbody`, `tr`, etc. As long as we know the language, the grammar rules, etc., we know when something is wrong. Returning to the XHTML 1.0 Strict Doctype, we find the following:

```
<!ELEMENT table
     (caption?, (col*|colgroup*), thead?, tfoot?, (tbody+|tr+))>
<!ELEMENT caption  %Inline;>
<!ELEMENT thead    (tr)+>
<!ELEMENT tfoot    (tr)+>
<!ELEMENT tbody    (tr)+>
<!ELEMENT colgroup (col)*>
<!ELEMENT col      EMPTY>
<!ELEMENT tr       (th|td)+>
<!ELEMENT th       %Flow;>
<!ELEMENT td       %Flow;> 
```

Given this reference, we can keep a running check against whatever source we're parsing. If the author writes `tread`, instead of `thead`, we have a standard by which we can determine that to be in error. When issues are unresolved, and we cannot find rules to match certain uses of grammar and vocabulary, we inform the author that their document is invalid.

I am by no means doing this science justice, however I hope that this serves - if nothing more - to be enough that you might find it within yourself to sit down and read the article referenced as the beginning of this answer, and perhaps sit down and study the various DTD's that we encounter day to day.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T17:14:52.320

好消息来了，你不需要重新发明轮子。[libxml 库](http://xmlsoft.org/)在 PHP 的 DOMDocument 扩展中使用，并且它的源代码可用。我建议[去那里看看。](http://xmlsoft.org/downloads.html)

顺便说一句，正则表达式并不总是错误的，但是您需要正确使用它们，否则您会直接进入地狱厨房，成为小猫连环杀手或访问 chutullu 或如何称呼那个人。因此，我建议阅读以下内容：[REX: XML Shallow Parsing with Regular Expressions](http://www.cs.sfu.ca/~cameron/REX.html)。

但是如果你做的一切都正确，正则表达式可以在解析方面帮助你很多。只是你应该知道你在做什么。

# delphi - 获取成员函数delphi的指针

> ID：10460171
> 
> 赞同：4
> 
> 时间：2012-05-05T08:29:47.727
> 
> 标签：delphi, function, pointers, lazarus

是否有一些技巧如何在 Lazarus / delphi 中获取成员函数的指针？我有这个无法编译的代码....

Delphi 中出现错误：
`variable required`

在 Lazarus 中：
`Error: Incompatible types: got "<procedure variable type of function(Byte):LongInt of object;StdCall>" expected "Pointer"`

编码：

```
 TClassA = class
  public
      function ImportantFunc(AParameter: byte): integer; stdcall;
  end;

  TClassB = class
  public
     ObjectA: TClassA;
     ImportantPtr: pointer;
     procedure WorkerFunc;
  end;

  function TClassA.ImportantFunc(AParameter: byte): integer; stdcall;
  begin
     // some important stuff
  end;

  procedure TClassB.WorkerFunc;
  begin
     ImportantPtr := @ObjectA.ImportantFunc; //  <-- ERROR HERE
  end; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T08:39:04.553

成员函数不能由单个指针表示。它需要两个指针，一个用于实例，一个用于代码。但这是实现细节，您只需要使用方法类型：

```
type
  TImportantFunc = function(AParameter: byte): integer of object; stdcall; 
```

然后，您可以将 ImportantFunc 分配给这种类型的变量。

由于您使用的是 stdcall 我怀疑您正在尝试将其用作 Windows 回调。这对于成员函数是不可能的。您需要一个具有全局范围的函数或一个静态函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T08:45:45.297

```
type
  TImportantFunc = function(AParameter: byte): integer of object;stdcall;

  ImportantPtr: TImportantFunc;

procedure TClassB.WorkerFunc;
begin
   ImportantPtr := ObjectA.ImportantFunc; //  <-- OK HERE
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T09:24:13.517

`ObjectA.ImportantFunc`不是内存位置，因此地址运算符`@`不能应用于它 - 因此编译器错误。它是 2 个指针，`@TClassA.ImportantFunc`（方法代码）和`ObjectA`（Self 参数）。您的问题的答案取决于您真正需要什么 - 代码指针，Self，两者都有或没有。

* * *

如果您只需要限定函数名称的范围，请使用静态类方法

```
TClassA = class
public
 class function ImportantFunc(Instance: TClassA; AParameter: byte): integer;
                                                               stdcall; static;
end; 
```

# iphone - 在 iphone sdk 中使用 UIGraphicsBeginImageContextWithOptions 从原点捕获带有 -20 的图像

> ID：10460173
> 
> 赞同：0
> 
> 时间：2012-05-05T08:30:29.997
> 
> 标签：iphone, image-capture

我需要使用 UIGraphicsBeginImageContextWithOptions 来捕获图像我的要求是从 -20 从原点开始捕获

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:22:39.800

使用以下代码和 Import `<QuartzCore/QuartzCore.h>`。您也可以在捕获图像后使用此代码。因此，您可以从中删除不必要的部分。

```
 UIGraphicsBeginImageContext(self.view.frame.size);
    //or
    UIGraphicsBeginImageContextWithOptions(self.view.frame.size, NO, 0.0);//this will also give you scaling option and more better for resolution. 

    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

    CGImageRef ref = viewImage.CGImage;

    CGRect myImageArea = CGRectMake (20, 20,
                                     300, 100);// you define coordinates according your requirements.
    CGImageRef mySubimage = CGImageCreateWithImageInRect (ref, myImageArea);

    UIImage *yourfinalcapturedimage = [UIImage imageWithCGImage:mySubimage];// this will give you your required image. 
```

希望对你有帮助..

# java - java数据绑定到gui，就像在c#中一样

> ID：10460174
> 
> 赞同：5
> 
> 时间：2012-05-05T08:30:30.560
> 
> 标签：java, user-interface, data-binding

我想知道，是否可以像在 c# 中那样在 java 中进行数据绑定？谷歌搜索了很多，但我没有答案。
例如，我想将集合绑定到 Jtable，并希望在我添加、删除或更改集合中的某些元素时更新 JTable。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:03:20.563

是的，有 Java Beans Binding。

看一眼：

1.  [NetBeans BeansBinding 教程](http://netbeans.org/kb/docs/java/gui-binding.html)
2.  [Scott Violet 在 BB 上的博客条目](http://weblogs.java.net/blog/zixle/archive/2006/05/ease_of_swing_d.html)

至于您的 JTable 示例，有可观察的集合，例如：

```
ObservableList<Employee> employees =
    ObservableCollections.observableList(
    new ArrayList<Employee>()); 
```

摘自一篇文章[Beans Binding: A Java Data-Binding Solution with a Serious Problem](http://www.devx.com/Java/Article/39964/1954)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:57:28.797

如果您的问题是关于 java gui，[Java FX 2](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm)本身就支持绑定。
如果特别是关于 Swing（您的 JTable 示例），[似乎也有解决方案，](https://stackoverflow.com/questions/2400998/swing-data-binding-frameworks)但我不熟悉它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T18:29:43.060

（由于包含一些代码，我将其作为完整答案而不是评论来回答）也许我迟到了，但是您要求提供一个使用 BBB 的小示例，所以这里有一小段代码您可能会觉得有用：

```
public static final Property<PatientModel, Long> PATIENT_MODEL_PATIENT_ID_PROPERTY_OBJECT =
        BeanProperty.create(Patient.PATIENT_ID_PROPERTY);
public static final Property<PatientModel, String> PATIENT_MODEL_FIRST_NAME_PROPERTY_OBJECT =
        BeanProperty.create(Patient.FIRST_NAME_PROPERTY);
public static final Property<PatientModel, String> PATIENT_MODEL_MIDDLE_NAME_PROPERTY_OBJECT =
        BeanProperty.create(Patient.MIDDLE_NAME_PROPERTY);
public static final Property<PatientModel, String> PATIENT_MODEL_SURNAME_PROPERTY_OBJECT =
        BeanProperty.create(Patient.SURNAME_PROPERTY);
public static final Property<PatientModel, String> PATIENT_MODEL_SECOND_SURNAME_PROPERTY_OBJECT =
        BeanProperty.create(Patient.SECOND_SURNAME_PROPERTY);
public static final Property<PatientModel, Sex> PATIENT_MODEL_SEX_PROPERTY_OBJECT =
        BeanProperty.create(Patient.SEX_PROPERTY);
public static final Property<PatientModel, String> PATIENT_MODEL_BIRTH_PLACE_PROPERTY_OBJECT =
        BeanProperty.create(Patient.BIRTH_PLACE_PROPERTY);
public static final Property<PatientModel, Calendrical> PATIENT_MODEL_BIRTH_DATE_PROPERTY_OBJECT =
        BeanProperty.create(Patient.BIRTH_DATE_PROPERTY);
public static final Property<PatientModel, Period> PATIENT_MODEL_AGE_PROPERTY_OBJECT =
        BeanProperty.create(Patient.AGE_PROPERTY); 
```

(...)

```
 private ObservableList<PatientModel> model;
    private JTable selectionTable; 
```

(...)

```
 JTableBinding<PatientModel, List<PatientModel>, JTable> selectionTableBinding
            = SwingBindings.createJTableBinding(UpdateStrategy.READ_WRITE, this.model, this.selectionTable);
        selectionTableBinding.addColumnBinding(PATIENT_MODEL_PATIENT_ID_PROPERTY_OBJECT);
        selectionTableBinding.addColumnBinding(PATIENT_MODEL_FIRST_NAME_PROPERTY_OBJECT);
        selectionTableBinding.addColumnBinding(PATIENT_MODEL_SURNAME_PROPERTY_OBJECT);
        selectionTableBinding.addColumnBinding(PATIENT_MODEL_SEX_PROPERTY_OBJECT);
        selectionTableBinding.addColumnBinding(PATIENT_MODEL_BIRTH_PLACE_PROPERTY_OBJECT);
        selectionTableBinding.addColumnBinding(PATIENT_MODEL_BIRTH_DATE_PROPERTY_OBJECT);
        selectionTableBinding.addColumnBinding(PATIENT_MODEL_AGE_PROPERTY_OBJECT); 
```

根据我的经验，学习的难度与学习后的实施难度一样可笑。我知道文档不是很好，但是看看[http://www.jarvana.com/jarvana/view/it/tidalwave/betterbeansbinding/betterbeansbinding-swingbinding/1.3.0/betterbeansbinding-swingbinding-1.3.0-javadoc。 jar!/org/jdesktop/swingbinding/JTableBinding.html](http://www.jarvana.com/jarvana/view/it/tidalwave/betterbeansbinding/betterbeansbinding-swingbinding/1.3.0/betterbeansbinding-swingbinding-1.3.0-javadoc.jar!/org/jdesktop/swingbinding/JTableBinding.html)并做一些自学示例使我免于浪费大量时间。除了 BBB，还有我个人没有尝试过的 JGoodies Bindings。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T06:45:27.440

经过调查，我发现没有什么比使用自定义模型更好的了。在[这个博客](http://tips4java.wordpress.com/2008/11/27/bean-table-model/)中你可以找到刚刚完美的表模型。

# java - 使用 Android 通知时出现运行时异常。

> ID：10460180
> 
> 赞同：0
> 
> 时间：2012-05-05T08:31:05.870
> 
> 标签：java, android, notifications

这是我的 CreateNotification 类。代码取自android页面。[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

代码：

```
package your.notification.manager;

import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.Parcel;
import android.view.View;

public class CreateNotification extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = "Hello";
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, tickerText, when);
        Context context = getApplicationContext();
        CharSequence contentTitle = "My notification";
        CharSequence contentText = "Hello World!";
        Intent notificationIntent = new Intent(this, NotificationReceiver.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        final int HELLO_ID = 1;

        mNotificationManager.notify(HELLO_ID, notification);

    }

} 
```

错误：

```
05-05 12:51:38.687: E/AndroidRuntime(8629): Caused by: java.lang.IllegalArgumentException: contentView required: pkg=com.crumbs.main id=0 notification=Notification(vibrate=null,sound=null,defaults=0x0,flags=0x10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:40:35.113

您的代码运行良好..

只需清理您的项目并再次运行。

# c++ - auto_ptr.release() 中的分段错误

> ID：10460182
> 
> 赞同：2
> 
> 时间：2012-05-05T08:31:34.637
> 
> 标签：c++, linux, segmentation-fault, auto-ptr

调用 auto_ptr 发布成员时，我在此代码点遇到分段错误：

```
try
{
    newMod->init(params);
}
catch (const std::exception& e)
{
#ifndef CONFIG_STATIC
    dlclose(handle);
#endif
    throw std::runtime_error(utils::buildString(
            "%s: Error initializing module %s: %s",
            DBG_FUNC_NAME, newMod->name().c_str(), e.what()));
}

_modules.insert(std::make_pair(newMod->name(), newMod.release())); 
```

_modules 在哪里

```
std::map<std::string, IModule*> _modules; 
```

和 newMod 是

```
std::auto_ptr<IModule> newMod(0); 
```

稍后用适当的指针值重置。我知道指向 IModule 的指针是有效的，因为我在发布之前调用了 init 成员。

这：

```
_modules.insert(std::make_pair(newMod->name(), newMod.get()));
newMod.release(); 
```

效果很好，这就是 gdb 所说的：

```
#0  _M_rep (this=0xbfe8e908, __str=...) at /usr/src/debug/gcc-4.5.1-20101208/obj-i586-suse-linux/i586-suse-linux/libstdc++-v3/include/bits/basic_string.h:287
#1  std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string (this=0xbfe8e908, __str=...)
at /usr/src/debug/gcc-4.5.1-20101208/obj-i586-suse-linux/i586-suse-linux/libstdc++-v3/include/bits/basic_string.tcc:173
#2  0x0805d76f in sm::core::mod::ModuleManager::loadModule (this=0x8074768, name=..., params=...) at src/core/ModuleManager.cpp:150
#3  0x08056edb in sm::core::Main::start (this=0xbfe8e9e0) at src/core/Main.cpp:82
#4  0x08055131 in main (argc=4, argv=0xbfe8ebf4) at src/core/smmain.cpp:15 
```

它的段错误所在的行是：

```
{ return &((reinterpret_cast<_Rep*> (_M_data()))[-1]); } 
```

关于这个可能有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T08:35:47.987

```
_modules.insert(std::make_pair(newMod->name(), newMod.release())); 
```

标准未定义函数参数的评估顺序。实现可以评估`newMod.release()`before `newMod->name()`，这将使第二次调用无效。

* * *

旁注：`auto_ptr`在 C++11 中已弃用（草案 n3290 中的附件 D.10）：

> 类模板`auto_ptr`已弃用。[注意：类模板`unique_ptr`（20.7.1）提供了更好的解决方案。——尾注]

如果您有权访问它，并且有时间/资源这样做，请考虑切换到更新的智能指针类。

# iphone - 不能将单个对象（UIView、UIGesture）与其他两个对象（UIView）映射？

> ID：10460184
> 
> 赞同：0
> 
> 时间：2012-05-05T08:31:52.267
> 
> 标签：iphone, memory-management, uiview, uikit

我有些困惑。不是我面临的真正的错误或问题。我想知道一些事情，但我不确定这是解决这类问题的正确地方，但这是我的问题：

关于我的[问题](https://stackoverflow.com/questions/10429410/can-we-add-single-gesture-on-multiple-views-and-make-it-working)，我试图在两个视图上映射单个手势。

现在我很想知道为什么这不起作用？我继续进行基础知识，以防万一我有任何 NSObject 子类，让我们说如果`NSString`，我将其添加`NSMutableArray`如下：

```
 NSString *strTest = @"Test String";
 [aryTest1 addObject:strTest];
 [aryTest2 addObject:strTest]; 
```

字符串被添加到两个数组中。现在我正在做的是我创建了一个标签，为标签设置标签并在两个视图中添加如下：

```
 UILabel *lblTemp = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 100, 20)];
[lblTemp setTag:1];
[lblTemp setText:@"Label"];
[vw1 addSubview:lblTemp];
[vw2 addSubview:lblTemp]; 
```

现在每个视图都有一个子视图数组。当我们尝试在该视图的子视图中添加一个对象时，为什么两个视图中都没有添加这个对象？我得到的结果是我的第二个视图显示了标签，但第一个视图没有标签。

如果我注释了代码的最后一行并且不在 vw2 中添加标签，则标签将添加到 vw1 中。比我尝试了不同的事情。

```
UILabel *lblTemp = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 100, 20)];
[lblTemp setTag:1];
NSMutableArray ary1 = [[NSMutableArray alloc] init];
NSMutableArray ary2 = [[NSMutableArray alloc] init];
[ary1 addObject:lblTemp];
[ary2 addObject:lblTemp]; 
```

两个数组的计数均为 1。这意味着我在数组中添加了标签。之后，我尝试在视图中添加数组的对象而不是问题。标签仅在第二个视图中添加：

```
 [vw1 addSubview:[ary1 objectAtIndex:0]];
 [vw2 addSubview:[ary2 objectAtIndex:0]]; 
```

当我在初始化后打印标签的retainCount时，每次retaincount为1时都添加array1和array2。所以我认为数组没有保留同一个对象的引用。它是一个复制到数组中的新对象。为什么标签没有被添加到同一个视图中？

对象添加到任何视图的子视图的实际内部过程是什么。据我所知，子视图是一个数组类型，而不是发生了什么？谁能解释我？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:41:37.357

不同之处在于，`addSubview`在将视图添加到新视图之前会自动从其超级视图中删除它（请参阅类参考：http: [//developer.apple.com/library/ios/ipad/#documentation/uikit/reference/uiview_class/ uiview/uiview.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/uiview_class/uiview/uiview.html)），而一个数组会很高兴地接受一个对象，即使它在另一个数组中。

您可以创建标签的副本并将其放置在其他视图中，但如果这是您需要做的。

# eclipse - Charset，eclipse中JSP文件的编码仍然是ISO-8859-1？

> ID：10460185
> 
> 赞同：10
> 
> 时间：2012-05-05T08:31:52.433
> 
> 标签：eclipse, file, jsp, encoding

我手动将 JSP 文件的默认编码更改为 UTF-8，但是当我使用模板 ${encoding} 创建新文件时，`charset`总是设置为`ISO-8859-1`.

如何更改 Eclipse 的设置以使 UTF-8 成为 JSP 文件的默认字符集？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-10T10:29:48.890

我有同样的问题，但在这里更改了设置：

```
Preferences -> General -> Content Types -> 
Text -> JSP -> Default Encoding -> UTF-8 
```

它对我有用。希望能帮助到你。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-28T19:17:01.930

我想您是在问如何设置模板以便 ${encoding} 打印出来`UTF-8`，而不是`ISO-8859-1`.

如果是这种情况，您需要遵循：

```
Window-->Preferences-->Web-->JSP Files 
```

然后只需使用下拉框更改为`ISO 10646/Unicode(UTF-8)`

您还需要对 HTML 文件执行相同的操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T13:12:28.477

可能与 Eclipse JSP 中的“问题”相同[：不正确的默认文本文件编码](https://stackoverflow.com/questions/9045413)

添加

```
<%@ page pageEncoding="UTF-8" %> 
```

到您的 JSP*并*检查 Joe 描述的工作区编码设置

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-04T17:58:34.173

在 Eclipse 中，转到 Windows -> 首选项 -> Web -> JSP 文件

从那里的 *Encoding * 下拉框中选择 UTF-8 编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T09:43:45.943

我认为编码参数尚未设置为 UTF-8，它需要从它的来源进行更改。

# iphone - 如何使用 XCode 4.3.2 为 iOS 构建动态库

> ID：10460187
> 
> 赞同：1
> 
> 时间：2012-05-05T08:32:17.970
> 
> 标签：iphone, ios, makefile, xcode4.3, dylib

我正在尝试为 iOS 5 构建一个动态库，但没有模板。你能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:00:54.993

iOS 没有用户动态库，至少没有官方支持的。事实上，一个 iOS 应用程序（Apple 会在其 App Store 中接受）必须由一个二进制文件（加上资源）组成。这意味着您只能将静态库与主程序链接。

> iOS SDK 支持创建仅显示在设备主屏幕上的本机应用程序。它不支持创建其他类型的代码，例如驱动程序、框架或动态库。如果要将框架或动态库中的代码集成到应用程序中，则应在构建项目时将该代码静态链接到应用程序的可执行文件中。

（[来源](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/IPhoneOSOverview/IPhoneOSOverview.html)——“你能创造什么？”部分）

当然iOS支持动态链接；只是 Apple 不支持在 iOS 应用程序中使用它，SDK 框架除外。

如果您对创建动态库感兴趣，请查看[这篇文章](http://www.macosxguru.net/article.php?story=20110712175443515&mode=print)。诀窍是从一个普通的 Cocoa（即 MacOS）框架包开始，然后更改构建设置以针对 iOS SDK 进行编译。

# python - pip 安装失败：命令 python setup.py egg_info 失败，错误代码 1

> ID：10460188
> 
> 赞同：0
> 
> 时间：2012-05-05T08:32:23.053
> 
> 标签：python, pip

> **可能重复：**
> [pip install PyQt IOError](https://stackoverflow.com/questions/5517924/pip-install-pyqt-ioerror)

我的环境是安装了 python 2.7.2 的 windows 7。

我正在尝试通过 PIP 安装一些软件包，由于找不到 setup.py 而失败，见下文：

```
C:\MyInstall\Python27\Scripts>pip install PyQt
Downloading/unpacking PyQt
  Downloading PyQt-x11-gpl-4.9.1.tar.gz (9.7Mb): 9.7Mb downloaded
  Running setup.py egg_info for package PyQt
    Traceback (most recent call last):
          File "<string>", line 14, in <module>
    IOError: [Errno 2] No such file or directory: 'C:\\MyInstall\\Python27\\Scripts\\build\\PyQt\\setup.py'
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 14, in <module>

IOError: [Errno 2] No such file or directory: 'C:\\MyInstall\\Python27\\Scripts\\build\\PyQt\\setup.py'

----------------------------------------
Command python setup.py egg_info failed with error code 1 in C:\MyInstall\Python27\Scripts\build\PyQt
Storing complete log in C:\Users\Administrator\AppData\Roaming\pip\pip.log 
```

任何人都可以为这个错误提供一些指导吗？我是 Python 新手

# c# - 测试验证是否正确

> ID：10460190
> 
> 赞同：0
> 
> 时间：2012-05-05T08:32:39.277
> 
> 标签：c#, .net, unit-testing, nunit

关于单元测试，我有点菜鸟，但我对如何为验证方法编写适当的测试感到困惑。简单的例子：

```
public void EnsureExactly5Chars(string s) 
```

您将如何为这种方法编写测试？一个提供 5 个字符的字符串的测试是预期的，但是有多少测试期望此方法失败？一、二、千？

另一个例子是：

```
public void EnsureDateIsYYMMDD(string date) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T08:36:37.473

您需要测试有效值是否通过、明显无效值是否失败以及边缘情况。

对于您的字符串示例，您应该使用通过的 5 个字符字符串、一个长字符串、一个短字符串（1 个字符？）和边缘情况（null、string.Empty、4 个字符和 6 个字符）进行测试。

# c# - 如何在不使用 .NET 显式调用 Close 方法的情况下关闭 Sqlite 连接

> ID：10460207
> 
> 赞同：7
> 
> 时间：2012-05-05T08:36:07.033
> 
> 标签：c#, .net, sqlite, database-connection, system.data.sqlite

我正在使用 Sqlite 数据库的 winform 创建桌面应用程序。

所以我创建了 Sqlite Helper 类，该类使用`System.Data.SQLite`该 Helper 类的每个方法打开和关闭连接。

但是现在我还添加了附加数据库的功能，但是在连接关闭后，所有附加的数据库都会丢失。

为了纠正这个问题，我修改了类，以便在构造函数中打开连接并保持打开状态。

应用程序结束后，我希望在不显式调用 Close 方法的情况下关闭该连接。

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:14:42.680

在应用程序的整个生命周期内保持连接打开并不是一个好方法。
我建议不要走这条路。
相反，我将尝试将附加数据库的功能封装在可以根据需要调用的方法中。

例如：

```
private static void AttachDB(string fileDB, string aliasName, SQLiteConnection cn) 
{ 
    string sqlText = string.Format("ATTACH '{0}' AS {1}", fileDB, aliasName) 
    SQLiteCommand cmd = new SQLiteCommand(sqlText, cn) 
    cmd.ExecuteNonQuery(); 
} 
```

然后在你的代码中

```
using(SQLiteConnection cn = new SQLiteConnection(GetConnectionString()))
{
     AttachDB(@"C:\SQLite\UserData.sqlite3", "UserData", cn);
     // Do your code here
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T09:35:46.597

`Close`不应断开您的数据库，但这仅在 .NET 连接池机制打开时才有效。确保您在连接字符串中启用了该功能：

```
Data Source=filename;Version=3;Pooling=True;Max Pool Size=100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T08:51:34.353

根据您的类的定义方式，您可以使用 Dispose 或析构函数。或者，在程序结束时显式调用 Close()（从 Main 中，在 Run ...之后）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T09:13:48.483

在 C# 中，这种情况有一种特殊的语法：

```
using(var connection = new Connection())
{
   //work with connection
} 
```

它编译为：

```
Connection connection = null;
try
{
   connection = new Connection();
   //your operations
}
finally
{
   connection.Dispose();
} 
```

在调用 Dispose() 时，您关闭连接。

# apache - .htaccess 如何工作？

> ID：10460209
> 
> 赞同：4
> 
> 时间：2012-05-05T08:36:27.153
> 
> 标签：apache, .htaccess, url, mod-rewrite

我试图让我的网站将其他页面显示为 www.example.com/pageone/ 链接而不是 www.example.com/pageone.html。

问题是，我正在阅读使用 .htaccess 的方法，它让我感到困惑，因为我不理解这些命令。

但是，我知道第一步是将其写入 .htaccess 文件中：

```
RewriteEngine On 
```

在这一步之后，我完全不知道什么是 !-d 也不 {REQUEST_FILENAME} 也不 ^(.*) 和所有的编程文本。有没有我可以参考的文档？

或者任何人都可以向我提供一个关于如何配置 .htaccess 文件的简单解释，以了解如果我想去

```
www.example.com/pageone.html 
```

，我只需要在 URL 中输入

```
www.example.com/pageone/ 
```

和PHP文件等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T09:03:27.443

首先，有**[官方文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)**。为了解决您的具体问题，我会这样做：

```
RewriteEngine on #Turn on rewrite

RewriteCond %{REQUEST_FILENAME} !-f #If requested is not a filename...
RewriteCond %{REQUEST_FILENAME} !-d #And not a directory
RewriteRule ^([^/]+)/?$ /$1.html [L] #Preform this redirect 
```

`RewriteCond`s 仅适用于以下规则。如果您有多个规则，则需要为每个规则编写条件。

现在，Apache 服务器匹配请求的路径（www.example.com/ 之后的所有内容），以查看它是否匹配您指定的任何规则。在这种情况下，只有一个：

```
^([^/]+)$ 
```

这个正则表达式匹配任意数量的字符，不是斜杠`/`，后面跟一个可选的斜杠。如果找到匹配项，它会将请求重写为第二个参数：`/$1.html`，`$1`表示“括号之间匹配的内容”，在我们的例子中是所有非斜杠字符。

该`[L]`标志告诉重写引擎在匹配该规则时停止查找规则。

所以总结一下，将在服务器端悄悄地重写到`www.example.com/**whatever/**``www.example.com/**whatever**.html`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T08:40:41.460

```
RewriteEngine on
RewriteBase /

RewriteRule ^([^/]+)$ /$1.html 
```

这应该是这次重写所需要的。它基本上说“任何不是正斜杠的东西都将分配给变量`$1`。所以 /foo 将指向 /foo.html

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T08:48:39.897

有关官方文档，您可以在此处查看[Apache httpd mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)。
在 Google 上，您可以使用关键字进行搜索，例如`url rewriting tutorial`.
奇怪的字符被称为正则表达式。这不是一个容易学习的部分，但有很多关于它们的教程。
PS：这不是一个直接的答案，而是一些可以让您更进一步了解 url 重写的工作原理的东西。

# .net - 将水晶报表导出为 PDF 会导致数据丢失

> ID：10460211
> 
> 赞同：2
> 
> 时间：2012-05-05T08:37:21.833
> 
> 标签：.net, crystal-reports

我的报表使用 Crystal Report Viewer 显示在 aspx 文件中，单击按钮将报表导出为 PDF 后，所有数据都丢失了，页面中只保留了图形。可能是什么问题？

你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T23:55:02.513

实际上，您在 CrystalReportViewer 上单击的所有操作都会触发回发。大多数时候，人们不会将报告文档存储在会话中，然后将其重新分配给查看器。在这个答案中，我演示了如何将现有代码移动到存储报告文档的模型中，以防止在导出/打印/分页/等时出现问题。

[水晶报表工具栏按钮不起作用](https://stackoverflow.com/questions/10191525/crystal-report-toolbar-button-not-working/10202603#10202603)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T01:45:08.757

对于我的 Web 项目，我在 aspx 文件中的 Page_Init() 方法中将会话数据分配给 ReportSource。因为报表数据是通过Session数据从另一个页面传输过来的。

```
void Page_Init(object sender, EventArgs e)
{

    this.rptViewer.ReportSource = Session["ReportData"];
} 
```

此外，在“aspx.cs”文件的 Page_Load 方法中执行相同的操作，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{

    if (!IsPostBack)
    {

        rptViewer.Visible = true;
        this.rptViewer.ReportSource = Session["ReportData"];
        this.rptViewer.ShowFirstPage();

    }

} 
```

之后，问题就解决了。

# iphone - 具有唯一密钥访问权限的 iPhone 服务器？

> ID：10460213
> 
> 赞同：0
> 
> 时间：2012-05-05T08:37:40.013
> 
> 标签：iphone, objective-c, ios, ipad

现在我对网络编程非常陌生，所以告诉我这是否是个坏主意。

在我的 iPhone 应用程序中，我想拥有一堆数据，我可以让我的朋友也可以通过在他们的手机上安装该应用程序来访问这些数据。

例如，是否有可能让我拥有我的数据，然后我给我的朋友一个唯一的密钥，他们将其放入他们的应用程序中，他们现在可以看到我的数据。世界各地拥有上述应用程序的人都可以做同样的事情，通过唯一的密钥与朋友共享数据。

喜欢了解您的想法，如果这是一个好主意，我该如何实现？如果这是一个坏主意，你会建议什么其他方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:57:29.177

目前尚不完全清楚您想做什么，但我认为您可以研究非对称密码学，特别是使用[公钥/私钥方案](http://en.wikipedia.org/wiki/Public-key_cryptography)。

# jquery - 造型活跃 水平菜单中的元素。

> ID：10460217
> 
> 赞同：1
> 
> 时间：2012-05-05T08:38:06.113
> 
> 标签：jquery, css

我有一个示例导航菜单，[看看](http://jsfiddle.net/gaby/kt4yb/) 我想要的效果，点击`hover`a 时我想要相同的效果。`link`当前链接应该具有相同的效果。我想我需要使用`jquery`它.对不起，如果我没有很好地解释我的问题。欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:41:02.207

将选择器从 更改`hover`为`focus`。你甚至不需要使用 jquery

**编辑**：我已经编辑了小提琴。

看到这个[http://jsfiddle.net/kt4yb/3/](http://jsfiddle.net/kt4yb/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T08:44:10.397

你可以使用伪类`:active`。（其用于单击状态的 CSS）和可选`:focus`的 . 如果你想保持效果，你需要用 jquery 来做：

```
$(function(){
  $(".menu").on("click", "a", function(){
    $(this).addClass("active").siblings().removeClass("active");
  });
}); 
```

然后你可以将你的效果添加到活动类中......这是一个演示：http: [//jsfiddle.net/meo/kt4yb/6/](http://jsfiddle.net/meo/kt4yb/6/)

或者您可以简单地使用`:visited`伪类，如果您的链接指向不同的 URL

# perl - 如何使这个嵌套循环在 perl 中继续？

> ID：10460218
> 
> 赞同：3
> 
> 时间：2012-05-05T08:38:23.557
> 
> 标签：perl, hash

这是我的代码：

```
#!perl -w
use strict;

my %hash = (
    1 => "a",
    2 => "b",
);

foreach my $num ( keys %hash ) {
    while (<DATA>) {
        s/$num/$hash{$num}/g;
        print;
    }
}
__DATA__
121212
11111
222 
```

我打算用散列中存在的相应值替换所有数字。但它输出：

```
a2a2a2
aaaaa
222
Hit any key to close this window... 
```

为什么 foreach 循环只运行一次？谁能给我解释一下？我应该如何更改代码？我希望它输出：

```
ababab
aaaaa
bbb 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T08:42:14.847

循环似乎只运行一次的原因`foreach`是因为您一次读取`<DATA>`一行。第二次循环外循环时，没有更多数据可以从内循环中的数据中读取。相反，您为什么不`<DATA>`先将所有内容读入列表：

`@mylist = <DATA>`

然后在你的内部循环中循环这个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T15:36:50.243

您的代码的问题是 Benj 指出的，`DATA`文件句柄位于 eof 处，用于`foreach`. 而且您在第一次迭代期间打印值。

如果你打算只用一个字符替换另一个字符，即你的键/值的长度永远不会超过 1，我认为你应该[`tr///`](http://perldoc.perl.org/perlop.html#tr/SEARCHLIST/REPLACEMENTLIST/cdsr)改用。

```
use strict;
use warnings;

while (<DATA>) {
    tr/12/ab/;
    print;
}

__DATA__
121212
11111
222 
```

音译运算符将一次性替换字符串中的所有字符。一个问题是`tr///`操作符必须是硬编码的，所以不能动态切换字符。

如果你想使用哈希，如果你的键/值可以长于 1，你应该把思南的谨慎放在心上。例如，如果你有两个键`1`和`11`，哪个应该优先于另一个？但是，如果是单个字符替换，这是一种顺利完成的方法：

```
my %hash = qw(1 a 2 b);

while (<DATA>) {
    s|(.)| $hash{$1} // $1 |ge;
    print;
} 
```

注意正则表达式修饰符的使用`/e`，它使替换评估 RHS 并插入返回值。在这种情况下，我们使用[`//`](http://perldoc.perl.org/perlop.html#C-style-Logical-Defined-Or)运算符。它的作用是检查是否定义了哈希值，如果没有，则使用键代替。如同

```
if (defined $hash{$1}) {
    $hash{$1};
} else {
    $1;
} 
```

或者

```
defined $hash{$1} ? $hash{$1} : $1 
```

另请注意，由于它一次需要一个字符`(.)`，因此它仅适用于单个字符键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T11:15:04.323

您可以将散列的键组合成一个搜索模式，而不是为散列中的每个键循环遍历文件，或者对文件进行 slurping 操作。

请注意，在脚本的当前版本以及[@Benj 的答案](https://stackoverflow.com/a/10460235/100754)中，应用替换的顺序是*不确定*的，因为键返回的[键](http://perldoc.perl.org/functions/keys.html)的顺序可能在`perl`s 之间甚至在使用相同的不同运行时有所不同`perl`。

这意味着你应该选择一个订单，并坚持下去，除非你喜欢惊喜。以下脚本结合了这两种想法。我决定将较长的键放在较短的键之前，这在大多数情况下都是有意义的。

```
#!perl -w
use strict;

my %hash = qw(1 a 11 zz 2 b);

my $pat = join '|', 
          map qr/\Q$_\E/, 
          sort { length $b <=> length $a }
          keys %hash
          ;

while (<DATA>) {
    s/($pat)/$hash{$1}/g;
    print;
}

__DATA__
121212
11111
222 
```

输出：

```
阿里巴巴
zzzza
bbb
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T15:51:11.000

最简单的答案是简单地做`foreach`里面的`while`，如

```
#!perl -w
use strict;

my %hash = (
    1 => "a",
    2 => "b",
);

while (<DATA>) {
    foreach my $num ( keys %hash ) {
        s/$num/$hash{$num}/g;
    }
    print;
}
__DATA__
121212
11111
222 
```

正如其他人指出的那样，原始程序的问题是`DATA`文件句柄的读取位置。该`rewind`函数通常用于将文件句柄的位置重置回开头，以便可以再次读取它，但在特定情况下`DATA`它不能正常工作，因为句柄实际上只是 perl 的内部文件句柄。`.pl`文件本身。但是，您可以使用保存位置`tell`，然后使用以下方法为每次迭代重置位置`seek`：

```
#!perl -w
use strict;
use Fcntl qw( SEEK_SET );

my %hash = (
    1 => "a",
    2 => "b",
);

my $pos = tell DATA;

foreach my $num ( keys %hash ) {
    seek DATA, $pos, SEEK_SET;
    while (<DATA>) {
        s/$num/$hash{$num}/g;
        print;
    }
}
__DATA__
121212
11111
222 
```

给出输出：

```
a2a2a2
aaaaa
222 
1b1b1b
11111
bbb 
```

# linux - 删除目录中的所有文件（不要触摸任何文件夹或其中的任何内容）

> ID：10460224
> 
> 赞同：17
> 
> 时间：2012-05-05T08:40:01.513
> 
> 标签：linux, bash, shell, unix

我想知道是否`rm`可以删除目录中的所有文件（但不能删除子文件夹或子文件夹中的文件）？

我知道有些人使用：

```
rm -f /direcname/*.* 
```

但这假设文件名具有并非全部都具有的扩展名（我希望所有文件 - 带或不带扩展名都被删除）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-05T08:51:49.610

Although find allows you to delete files using `-exec rm {} \;` you can use

```
find /direcname -maxdepth 1 -type f -delete 
```

and it is faster. Using -delete implies the -depth option, which means process directory contents before directory.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T08:45:27.150

```
find /direcname -maxdepth 1 -type f -exec rm {} \; 
```

解释：

*   `find`搜索文件和目录`/direcname`
*   `-maxdepth`将其限制为查找直接子级的文件和目录`/direcname`
*   `-type f`将搜索限制为文件
*   `-exec rm {} \;`为每个文件运行命令`rm {}`（在替换文件路径之后`{}`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-02T22:48:30.490

> 我想知道 rm 是否可以删除目录中的所有文件（但不能删除子文件夹或子文件夹中的文件）？

这很容易：

```
$ rm folder/* 
```

如果没有`-r`，该`rm`命令将不会触及子目录或它们包含的文件。这只会删除其中的文件，`folder`而不是子目录或其文件。

你会看到*错误*告诉你*folder/foo*是一个不能被删除的目录，但实际上你没问题。如果您想消除这些消息，只需重定向 STDERR：

```
$ rm folder/* 2> /dev/null 
```

顺便说一句，`rm`命令的退出状态可能不为零，因此您无法检查`rm`错误。如果这很重要，您将不得不循环：

```
$ for file in *
> do
> [[ -f $file ]] && rm $file
> [[ $? -ne 0 ]] && echo "Error in removing file '$file'"
> done 
```

即使文件名中有空格，这也应该在 BASH 中工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-05T08:50:37.150

A shell solution (without the non-standard find -maxdepth) would be

```
for file in .* *; do
   test -f "$file" && rm "$file"
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-05T08:44:04.700

您可以使用

```
find /direcname -maxdepth 1 -type f -exec rm -f {} \; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-05T10:00:15.030

一些 shell，特别是[zsh](http://zsh.sourceforge.net/)和可能的 bash 版本 4（但不是版本 3），具有执行此操作的语法。

使用 zsh 你可能只需要输入

```
rm /dir/path/*(.) 
```

如果你想删除任何名称以 foo 开头的文件，递归地在子目录中，你可以这样做

```
rm /dir/path/**/foo*(.) 
```

在我看来，双星功能（恕我直言更好的交互式完成）足以切换到 zsh 进行交互式 shell。YMMV

括号后缀中的点表示您只希望 zsh shell 扩展文件（而不是符号链接或目录）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-05T19:42:04.057

Unix不是DOS。文件名中没有特殊的“扩展名”字段。点之后的任何字符都只是名称的一部分，称为后缀。可以有多个后缀，例如`.tar.gz`. shell glob 字符`*`匹配整个`.`字符；它忽略了后缀。所以 MS-DOS`*.*`只是`*`在 Unix 中。

几乎。`*`不匹配以`.`. 按照惯例，用前导点命名的对象是“隐藏的”。`ls`除非您指定，否则它们都不会出现在其中`-a`。

（这意味着“self”和“parent”的`.`和目录条目被认为是隐藏的。）`..`

要匹配隐藏的条目，请使用`.*`

该`rm`命令不会删除目录（当不使用 递归操作时`-r`）。试试看`rm <directory>`。即使目录为空，它也会拒绝。

因此，您从目录中删除所有（非隐藏）文件、管道、设备、套接字和符号链接（但不理会子目录）的方式实际上是：

```
rm /path/to/directory/* 
```

还要删除以以下开头的隐藏的`.`：

```
rm /path/to/directory/{*,.*} 
```

这种语法是大括号扩展。大括号扩展不是模式匹配；它只是生成多个参数的简写，在这种情况下：

```
rm /path/to/directory/* /path/to/directory/.* 
```

这种扩展首先发生，然后发生 globbing 以生成要删除的名称。

请注意，此处发布的各种解决方案存在各种问题：

```
find /path/to/directory -type f -delete

# -delete is not Unix standard; GNU find extension
# without -maxdepth 1 this will recurse over all files
# -maxdepth is also a GNU extension
# -type f finds only files; so this neglects to delete symlinks, fifos, etc. 
```

GNU find 解决方案的好处是即使要删除的目录条目数量很大，它们也能正常工作：太大而无法在一次调用中传递`rm`. 另一个好处是内置`-delete`没有将有趣的路径名传递给外部命令的问题。

目录条目过多问题的可移植解决方法是列出条目`ls`并通过管道传输到`xargs`：

```
( cd /path/to/directory ; ls -a | xargs rm -- ) 
```

括号表示“在子进程中执行这些命令”；这样`cd`就忘记了 的效果，这在脚本编写中很有用。`ls -a`包括隐藏文件。

我们现在包含一个`--`after `rm`，表示“这是最后一个选项；其他所有内容都是非选项参数”。这可以保护我们免受名称与选项无法区分的目录条目。如果一个文件被调用`-rf`并以第一个参数结尾怎么办？然后你有 `rm -rf ...`哪个会吹掉子目录。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-03T14:42:35.483

The easiest way to do this is to use:

```
rm * 
```

In order to remove directories, you must specify the option -r

```
rm -r 
```

so your directories and anything contained in them will not be removed by using

```
rm * 
```

per the man page for rm, its purpose is to remove files, which is why this works

# javascript - 如何在checkBox change click上唯一标识jQuery函数？

> ID：10460226
> 
> 赞同：0
> 
> 时间：2012-05-05T08:40:30.887
> 
> 标签：javascript, jquery, asp.net

在我的程序中，我一次显示一个问题，然后在下一次单击时发布并获得第二个问题。但是我为 Jquery 中的每个问题的复选框列表应用了一些逻辑，我这样称呼它

```
 $(document).ready(function () {

        $("input:checkbox").change(function () {
            var txt = $(this).parent().children("label").text();
            if ($(this).is(':checked')) {
                if ($(this).parent().children("label").text() == 'Not Sure') {
                    $("input:checkbox").attr('checked', false);
                    $("input:checkbox").attr('disabled', true);
                    $(this).attr('checked', true);
                    $(this).attr('disabled', false);
                }
            }
            else {
                if ($(this).parent().children("label").text() == 'Not Sure') {
                    $("input:checkbox").attr('checked', true);
                    $("input:checkbox").attr('disabled', false);
                    $(this).attr('checked', false);

                }
            }
        });

        $("input:checkbox").change(function () {
            var txt = $(this).parent().children("label").text();
            if ($(this).is(':checked')) {
                if (txt == 'Not Sure' || txt == 'We Are Large Business' || txt == 'None of these apply') {
                    $("input:checkbox").attr('checked', false);
                    $("input:checkbox").attr('disabled', true);
                    $(this).attr('checked', true);
                    $(this).attr('disabled', false);
                }
            }
            else {
                if (txt == 'Not Sure' || txt == 'We Are Large Business' || txt == 'None of these apply') {
                    $("input:checkbox").attr('checked', false);
                    $("input:checkbox").attr('disabled', false);
                    $(this).attr('checked', false);
                }
            }
        });

    }); 
```

所以问题是，对于 1 个问题，逻辑与其他复选框列表问题不同，我需要调用适当的函数，如您在上面看到的 document.ready 有两个函数。那么对于某些特定问题，我应该如何修复对函数的调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T16:02:04.770

您可以使用一些自定义事件并根据问题触发适当的事件，这里有一些代码：

```
$(document).ready(function () {
    $("input:checkbox").on("someQuestions", function () {
        var txt = $(this).parent().children("label").text();
        if ($(this).is(':checked')) {
            if ($(this).parent().children("label").text() == 'Not Sure') {
                $("input:checkbox").attr('checked', false);
                $("input:checkbox").attr('disabled', true);
                $(this).attr('checked', true);
                $(this).attr('disabled', false);
            }
        }
        else {
            if ($(this).parent().children("label").text() == 'Not Sure') {
                $("input:checkbox").attr('checked', true);
                $("input:checkbox").attr('disabled', false);
                $(this).attr('checked', false);
            }
        }
    });

    $("input:checkbox").on("anotherQuestions", function () {
        var txt = $(this).parent().children("label").text();
        if ($(this).is(':checked')) {
            if (txt == 'Not Sure' || txt == 'We Are Large Business' || txt == 'None of these apply') {
                $("input:checkbox").attr('checked', false);
                $("input:checkbox").attr('disabled', true);
                $(this).attr('checked', true);
                $(this).attr('disabled', false);
            }
        }
        else {
            if (txt == 'Not Sure' || txt == 'We Are Large Business' || txt == 'None of these apply') {
                $("input:checkbox").attr('checked', false);
                $("input:checkbox").attr('disabled', false);
                $(this).attr('checked', false);
            }
        }
    });

    $("input:checkbox").change(function(){

        // apply some logic to find out if is one question or another
        if ( someQuestion ) {
            $(this).trigger("someQuestions");
        } 
        else {
            $(this).trigger("anotherQuestions");
        }

    });
}); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:04:46.707

在每篇文章中使用 jQuery unbind 函数来删除事件处理程序绑定。供参考看看[这个](http://api.jquery.com/unbind/)。

# c# - 通过 LINQ 使用 Unicode 字符串的查询表达式

> ID：10460230
> 
> 赞同：0
> 
> 时间：2012-05-05T08:40:43.953
> 
> 标签：c#, sql-server, linq, nlp

我正在使用 LINQ，并且我有一个数据库，其中包含用于存储本地内容（非英文字符）的列。现在我想使用 linq 进行如下查询

```
var desc = from p in db.GetDesc                            
           where  p.Category.Contains("xxxx".ToString())
           orderby p.Date descending
           select p; 
```

这里的 Category 列包含 unicode 字符串，上面的查询字符串不起作用。如何在 LINQ 中使用自然语言查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T16:40:48.367

一般来说，Unicode 应该适用于 Linq to SQL 和 Linq to Entities 针对 SQL Server（我假设你正在使用）。事实上你的查询应该是

```
var desc = from p in db.GetDesc                            
           where  p.Category.Contains("xxxx")
           orderby p.Date descending
           select p; 
```

没有必要使用 .ToString()，因为“xxxx”已经是一个 Unicode 字符串。

问题似乎出在 SQL Server 上。我尝试对包含您的埃塞俄比亚字符的表进行查询，但正如您所说，它不起作用。如果我查询 .Contains("ስፖርት") 则返回**所有**行。

直接运行 SQL 也有同样的结果。

尝试这样的简单查询失败（返回所有行）

```
select * from TestTable where Title like N'%' + NCHAR(0x1275) + N'%' 
```

这里 0x1275 是 ት 字符的 Unicode 代码点。

如果我们查看[NCHAR 的 SQL 文档，](http://msdn.microsoft.com/en-us/library/ms186939.aspx)我们会发现仅支持 4000 以内的 Unicode 代码点。不幸的是 0x1275 = 4725 所以看起来 SQL Server（甚至 2012 年）不支持埃塞俄比亚字符。

读到 4000 是限制后，测试表明使用 NCHAR(3129) 运行上述简单查询成功（在我的情况下不返回任何行），但 >= 3130 失败（返回所有行）。

# sql - SQL Server Hierarchy 类型方法 IsDescendantOf 可以接受多个输入值吗？

> ID：10460236
> 
> 赞同：1
> 
> 时间：2012-05-05T08:42:23.047
> 
> 标签：sql, sql-server, sql-server-2008, hierarchyid

我正在使用**HierarchyId**数据类型来存储位置。用户可能受限于位置 ( `LocationId`)。如果用户有超过 1 个位置限制，则必须使用 HierarchyId 数据类型再次调用 IsDescendantOf 方法`OR`。

示例（按 LocationId 5 和 6 过滤员工）：

```
SELECT * FROM Employee
INNER JOIN Location ON Employee.LocationId = Location.LocationId
WHERE Location.Node.IsDescendantOf((SELECT TOP 1 Node
    FROM Location 
    WHERE LocationId = 5)) = 1
OR 
Location.Node.IsDescendantOf((SELECT TOP 1 Node
    FROM Location 
    WHERE LocationId=6)) = 1` 
```

这适用于 2 个`LocationId`过滤器，但如果它增长并且一个人有 10 个过滤器怎么办。IsDescendantOf 可以像 sql`IN`子句一样工作吗？

使用的表：

```
CREATE TABLE Location (
LocationId int NOT NULL PRIMARY KEY IDENTITY(1,1),
Name       nvarchar(100) NOT NULL,
[Node]  hierarchyid    NOT NULL,
[ParentNode]  AS ([Node].[GetAncestor]((1))) PERSISTED,
[Level]  AS ([Node].[GetLevel]()) PERSISTED,
);
CREATE TABLE [dbo].[Employee] (
[EmployeeId] [int] PRIMARY KEY IDENTITY(1,1) NOT NULL,
[LocationId] [int] NULL,
[Name] [nvarchar](50) NULL
) ; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T10:58:20.300

**注意**：我添加了第二个解决方案（第 6 点）。

1.  您可以使用表变量来存储所有搜索到的位置（例如`DECLARE @SearchedAncestorLocation TABLE(LocationId INT PRIMARY KEY)`）。

2.  您必须从 中查找`HIERARCHYID's`每个位置 ID 的节点`@SearchedAncestorLocation`。

3.  您必须`INNER JOIN`使用此过滤器对员工的位置进行处理：`employee_location.Node.IsDescendantOf(searched_location.Node) = 1`。

4.  我认为您应该在表中添加一个`UNIQUE(Node)`约束`Location`以防止重复的位置（重复的节点）。

5.  **第一个解决方案**：[demo here](https://data.stackexchange.com/stackoverflow/query/edit/69151)。

    DECLARE @Location TABLE( LocationId int NOT NULL PRIMARY KEY, Name nvarchar(100) NOT NULL, [Node] hierarchyid NOT NULL, UNIQUE ([Node]) );

    声明@Employee TABLE（[EmployeeId] [int] PRIMARY KEY，[LocationId] [int] NULL，[Name] nvarchar NULL）；

    插入@Location（LocationId，名称，[节点]）值（1，N'A'，'/1/'），（2，N'AA'，'/1/1/'），（3，N' AA-1', '/1/1/1/'), -- <-- 第一位员工@ AA-1 (4, N'AA-2', '/1/1/2/'), (5 , N'AA-3', '/1/1/3/'), (6, N'AB', '/1/2/'), (7, N'AA-1', '/1/ 2/1/'), (8, N'AB-2', '/1/2/2/'),

    ```
     ( 9, N'B',     '/2/'),
         (10, N'BA',    '/2/1/'),
         (11, N'BA-1',  '/2/1/1/'), -- <-- Second employee @ BA-1
         (12, N'BA-2',  '/2/1/2/'),
         (13, N'BA-3',  '/2/1/3/'),
         (14, N'BB',    '/2/2/'),
         (15, N'BB-1',  '/2/2/1/'); 
    ```

    INSERT @Employee(EmployeeId, [Name], LocationId) VALUES (1, N'Ion Ionescu', 3), -- AA-1 (2, N'Geo Georgescu', 11); -- BA-1

    DECLARE @SearchedAncestorLocation TABLE(LocationId INT PRIMARY KEY); 插入 @SearchedAncestorLocation 值 (1)、--A (2)、--AA (3)、--AA-1 (9)、--B (10)、--BA (14)；--BB

    SELECT e.*, el.Name AS EmpLocationName, el.Node.ToString() AS EmpLocationHID, s.LocationId AS SearchedLocationId, sl.Name AS SearchedLocationName, sl.Node.ToString() AS SearchedLocationHID FROM @Employee e INNER JOIN @Location el ON e.LocationId = el.LocationId INNER JOIN @Location sl ON el.Node.IsDescendantOf(sl.Node) = 1 INNER JOIN @SearchedAncestorLocation s ON sl.LocationId = s.LocationId --AND sl.Node <> el.节点

结果：

```
EmployeeId LocationId  Name          EmpLocationName EmpLocationHID SearchedLocationId SearchedLocationName SearchedLocationHID
---------- ----------- ------------- --------------- -------------- ------------------ -------------------- -------------------
1          3           Ion Ionescu   AA-1            /1/1/1/        1                  A                    /1/
1          3           Ion Ionescu   AA-1            /1/1/1/        2                  AA                   /1/1/
1          3           Ion Ionescu   AA-1            /1/1/1/        3                  AA-1                 /1/1/1/
2          11          Geo Georgescu BA-1            /2/1/1/        9                  B                    /2/
2          11          Geo Georgescu BA-1            /2/1/1/        10                 BA                   /2/1/ 
```

取消注释最后一行 ( `AND sl.Node <> el.Node`) 的结果：

```
EmployeeId LocationId  Name          EmpLocationName EmpLocationHID SearchedLocationId SearchedLocationName SearchedLocationHID
---------- ----------- ------------- --------------- -------------- ------------------ -------------------- -------------------
1          3           Ion Ionescu   AA-1            /1/1/1/        1                  A                    /1/
1          3           Ion Ionescu   AA-1            /1/1/1/        2                  AA                   /1/1/
2          11          Geo Georgescu BA-1            /2/1/1/        9                  B                    /2/
2          11          Geo Georgescu BA-1            /2/1/1/        10                 BA                   /2/1/ 
```

6.  **第二种解决方案**。

    SELECT e.EmployeeId, e.LocationId, e.Name FROM @Employee e INNER JOIN @Location el ON e.LocationId = el.LocationId WHERE EXISTS (SELECT * FROM @SearchedAncestorLocation s INNER JOIN @Location sl ON s.LocationId = sl. LocationId WHERE el.Node.IsDescendantOf(sl.Node) = 1 --AND el.Node <> sl.Node );

# asp.net - 操作数数据类型 varchar 对 sum 运算符无效 - 过程错误更正

> ID：10460237
> 
> 赞同：1
> 
> 时间：2012-05-05T08:43:07.547
> 
> 标签：asp.net, sql-server-2005, stored-procedures, type-conversion, error-correction

我正在使用 SQL Server - 2005 ...

```
ALTER Proc [dbo].[ExamResult] (@Course_Id varchar(100), @Semester varchar(10))
as
begin
    declare @subjname varchar(100)  
    declare @subjects varchar(7000)  
    declare @subjectsselection varchar(7000)  
    declare @SumSelection varchar(7000)  
    declare @NoOfSubjects int
    set @NoOfSubjects = 0

    set @subjects = ''  
    set @subjectsselection = '' 
    set @SumSelection = ''

    DECLARE subject_cursor CURSOR  
    FOR SELECT distinct Subject_Name FROM Exam_Result where course_id = @Course_Id And Semester = @Semester 

    OPEN subject_cursor  

    FETCH NEXT FROM subject_cursor  
    INTO @subjname  

    WHILE @@FETCH_STATUS = 0  
    BEGIN  
        set @subjects = @subjects + '[' + @subjname + '],'  
        set @subjectsselection = @subjectsselection + 'Sum(Isnull([' + @subjname + '],0)) As [' + @subjname + '],' 
        set @SumSelection = @SumSelection + 'Sum(Isnull([' + @subjname + '],0))+' 

        set @NoOfSubjects = @NoOfSubjects + 1

        FETCH NEXT FROM subject_cursor  
        INTO @subjname  
    End  
    CLOSE subject_cursor;  
    DEALLOCATE subject_cursor;  

    select @subjects = LEFT(@subjects, LEN(@subjects) - 1)  
    select @subjectsselection = LEFT(@subjectsselection, LEN(@subjectsselection) - 1)  
    select @SumSelection = LEFT(@SumSelection, LEN(@SumSelection) - 1)  

    print @subjects  
    print @subjectsselection  
    print @SumSelection

    declare @query nvarchar(4000)  

    set @query = 'select S.Enroll_Number, pvt.Student_Name, pvt.Course_Id, pvt.Semester, ' + @subjectsselection + ',' 
    set @query = @query + 'Exam_Type,' + @SumSelection + ' As Grand_Total, '
    set @query = @query + '(' + @SumSelection + ')' + '/' + convert(varchar(10),@NoOfSubjects) + ' As Avg'
    set @query = @query + ' From '  
    set @query = @query + '(select Enroll_Number, Student_Name, Course_Id, Semester, Subject_Name, MarksObtained, Exam_Type from Exam_Result ) ps '  
    set @query = @query + ' pivot(sum(MarksObtained) for Subject_Name in (' + @subjects + ')) as pvt'  
    set @query = @query + ' inner join Stud_Info S on S.Enroll_Number = pvt.Enroll_Number '
    set @query = @query + ' where pvt.Course_Id = ''' + @Course_Id + ''' and pvt.Semester = ''' + @Semester + ''''
    set @query = @query + ' group by S.Enroll_Number, pvt.Student_Name, pvt.Course_Id, pvt.Semester, Exam_Type'
    print @query
    exec sp_executesql @query  
end 
```

**Exam_Result 表**：

```
CREATE TABLE [dbo].[Exam_Result](
    [Result_Id] [int] IDENTITY(1,1) NOT NULL,
    [Enroll_Number] [varchar](50) NULL,
    [Student_Name] [varchar](100) NULL,
    [Course_Id] [varchar](50) NULL,
    [Semester] [varchar](50) NULL,
    [Subject_Id] [varchar](50) NULL,
    [Subject_Name] [varchar](50) NULL,
    [MarksObtained] [Varchar](10) NULL,
    [Exam_Type] [varchar](50) NULL) 
```

**样本数据查询**...

```
INSERT into Exam_Result VALUES('11147','Mr.Mack28','CIV','1','PS1','ps1','60','Final')
INSERT into Exam_Result VALUES('11147','Mr.Mack28','CIV','3','PS1','ps1','70','Final')
INSERT into Exam_Result VALUES('11147','Mr.Mack28','CIV','3','PS1','ps1','80','Final')
INSERT into Exam_Result VALUES('11147','Mr.Mack28','CIV','3','PS1','ps1','20','Internal')
INSERT into Exam_Result VALUES('11147','Mr.Mack28','CIV','3','PS1','ps1','22','Internal') 
```

**Student_Info 表**：我只用于检索到的 Student_Information，例如**Enroll_Number** ...

```
CREATE TABLE [dbo].[Stud_Info](
    [Enroll_Number] [varchar](20) NOT NULL,
    [Student_Name] [varchar](20) NULL,
    [Course_Type] [varchar](20) NULL,
    [Course_Id] [varchar](20) NULL,
    [Semester] [varchar](20) NULL,
    [Password] [varchar](20) NULL,
    [Gender] [varchar](6) NULL,
    [City] [varchar](15) NULL,
    [Mobile_Number] [varchar](10) NULL) 
```

它给了我这样的错误......

> 消息 8117，级别 16，状态 1，行 1
> 操作数数据类型 varchar 对于求和运算符无效。

**拉胡尔**：根据你的回答，我更新了这样，但它仍然给出错误......

```
set @query = @query + ' pivot(sum(cast(MarksObtained as int)) for Subject_Name in (' + @subjects + ')) as pvt' 
```

我认为它给出了错误，因为我正在使用`MarksObtained`列 ( `as varchar(10)`) ...请给我一个建议，我可以如何转换`varchar`，以便可以完成`int`总数的总和。`MarksObtained`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T08:50:41.363

You can convert like this way:

```
SUM (CONVERT(int,<your varchar column>)) 
```

This will work if your varchar column actually holds numeric value. Otherwise, you can try casting it using `cast` function like:

```
sum(cast(varchar_column as int)) 
```

**EDIT:**

Created a sample table with just 2 column (name and marksobtained), both of type `varchar(10)` and inserted some data to it. So that my `select *` looks like

```
name            marksobtained
Mr. Anil             30
Mr. sunil            70
Mr. patel            70 
```

Summed the marks like

```
select SUM(cast(marksobtained as int)) as 'totalmarksobtained' from sampletab 
```

Which returned `170`.

What values does `@subjects` have? Post some sample.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T07:37:50.147

您可以在查询中使用“cast”

例子：

```
select sum(cast(Enter_your_field_name as int)) from Table_name 
```

希望对你有效。

# php - 谷歌翻译 API 和字符编码

> ID：10460238
> 
> 赞同：3
> 
> 时间：2012-05-05T08:43:33.020
> 
> 标签：php, json, google-translate

我正在将以下 PHP 代码与 Google 的 Translate API 一起使用，并且我已经阅读了`json_encode`需要 UTF-8 输入的内容，所以想知道我如何知道 Google 是否正在向我返回 UTF-8 编码的字符？

```
// URL Encode string
$str = urlencode($str);

// Make request
$response = file_get_contents('https://www.googleapis.com/language/translate/v2?key=' . GTRAN_KEY . '&target=es&source=en&q=' . $str);

// Decode json response to array
$json = json_decode($response,true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T08:51:16.757

如果[`json_decode`](http://www.php.net/manual/en/function.json-decode.php)失败（出于任何原因，包括字符集问题），它将返回`null`，所以你可以检查一下。要专门检查编码，您可以使用[`mb_detect_encoding`](http://www.php.net/manual/en/function.mb-detect-encoding.php).

```
if(!mb_detect_encoding($response, 'UTF-8', true)){
  // error: no utf-8
}else{
  $json = json_decode($response,true);
  if($json === null){
    // error: json_decode failed (or google returned 'null')
  }else{
    // ok, do great stuff here
  }
} 
```

# perl - 如何使用正则表达式在变量末尾匹配 \n

> ID：10460239
> 
> 赞同：2
> 
> 时间：2012-05-05T08:43:54.427
> 
> 标签：perl, tcl

我将一个文件存储在一个变量中，比如`$buffer`. `"\n"`末尾有一个`$buffer`。我想用空值替换它。我试过了

```
regexp "\n$" $buffer 
```

不工作。代码在 TCL 中，但我需要知道如何在 Perl 或 TCL 中完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:13:42.217

```
string trim $buffer \n 
```

请参阅[手册](http://www.tcl.tk/man/tcl8.5/TclCmd/string.htm#M52)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T12:18:57.160

在 Perl 中，chomp 删除了记录结束分隔符。因此，要删除 '\n'，您只需要`chomp $buffer`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T09:14:47.313

怎么样：`regsub {\n$} $buffer ""`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T05:53:36.943

`chomp`正如@Borodin 所说，这可能是最好的，但您也可以`\z`仅在字符串末尾使用匹配：

```
$buffer =~ s/\n\z//; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T08:59:11.633

在 Perl 中：

```
$buffer =~ s/\n$//; 
```

`=~`是绑定运算符，`s`是替换运算`/`符，是操作数的分隔符，因此`\n$`被空字符串替换。

`chomp($buffer)`将完成同样的事情。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-05T08:58:35.007

检查这是否有效。

```
regsub "\n$" "" $buffer 
```

[进一步阅读](http://www.regular-expressions.info/tcl.html)

# session - 保留 Vaadin 会话数据

> ID：10460244
> 
> 赞同：1
> 
> 时间：2012-05-05T08:44:26.913
> 
> 标签：session, authentication, vaadin

我是Vaadin初学者...

如果再次初始化应用程序，是否可以保留会话数据？

我之所以问，是因为我试图在页面刷新后为 http 会话设置一些东西。

```
WebApplicationContext ctx = (WebApplicationContext) this.getContext();
HttpSession session = ctx.getHttpSession();
Object attribute = session.getAttribute("user"); // <- always gets flushed 
```

我想使用这种方法进行用户身份验证。如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T10:14:56.477

再次初始化应用程序时刷新属性是完全正常的，因为当应用程序再次初始化时，会创建一个新的上下文。因此，我建议您使用 http-cookies 而不是将属性添加到会话本身，因为这是（据我所知）在网站上完成“记住我”功能的默认方式。您还可以设置 cookie 的过期日期。

作为安全提示，我建议您不要跨会话使用数据进行用户身份验证，这很容易被发现和滥用。

此外，我发现了一篇文章和一个处理 cookie 的插件：

[Vaadin 之书 - 解释如何设置 Cookie](https://vaadin.com/book/-/page/advanced.httpservletrequestlistener.html)

[处理 Cookie 的 Vaadin 插件](https://vaadin.com/directory#addon/browsercookies)

# c# - 从表中挑选工作的最佳实践 - NHibernate

> ID：10460246
> 
> 赞同：1
> 
> 时间：2012-05-05T08:45:02.507
> 
> 标签：c#, oracle, nhibernate

我正在尝试从一个多线程集群 Windows 服务正在侦听的 oracle 表中获取一份工作。

如果我正在编写 SQL，查询将是这样的：

```
update job_queue 
set status = :inProcess 
where status = :waiting and rownum <= 1 
returning job_id into :job_id; 
```

因此，仅在一次往返中，并且锁定时间与更新语句一样短，线程就可以处理其工作项。

问题是我如何使用 NHibernate 实现这一点，以便每个线程都可以尽可能快地运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:04:52.730

如果您想编写一些代码来为作业队列提供服务，并且您使用 Oracle 作为数据库，我建议您查看 Oracle Advanced Queuing (Oracle AQ)。它可以处理多个并发作业，并且还具有许多其他功能。

# php - 使用 ajax 将数据从单个 Html 页面发送到多个 php 页面

> ID：10460248
> 
> 赞同：-1
> 
> 时间：2012-05-05T08:45:14.377
> 
> 标签：php, ajax

我想问我可以使用 Ajax 将数据发送到多页 phph 我在 HTML 中有 2 个按钮，我希望每个按钮使用 ajax 从同一个 html 页面将数据发送到不同的 php 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:50:07.450

Ya.. You can make this.. if the functionality is different, you need to give individual AJAX request for each page.. if the functionality is same, you can change the URL dynamically and send with the single AJAX request...

# c++ - cstdio stdio.h 命名空间

> ID：10460250
> 
> 赞同：46
> 
> 时间：2012-05-05T08:45:30.050
> 
> 标签：c++, header

我从 c++ 参考中看到了这一行`cstdio`：

**库的每个元素都在`std namespace`.** 但我尝试了代码：

```
std::printf("hello world"); 

printf("hello world"); 
```

***C++ 标头将名称放在 std 和全局命名空间中***是真的吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-05T08:50:12.033

包括在命名空间和*可能*在全局命名空间`cstdio`中导入符号名称。 包括在全局命名空间和*可能*在命名空间中导入符号名称。`std` *`stdio.h`*`std`**

 **这同样适用于所有 c 样式的标题。

* * *

**参考：**
C++11 标准

**附件 D（规范性）兼容性特性 [depr]**规定：

**D.6 C 标准库头文件**

> 1 为了与 C 标准库和 C Unicode TR 兼容，C++ 标准库提供了 25 个 C 标头，如表 151 所示。

其中包括：

> `<assert.h> <float.h> <math.h> <stddef.h> <tgmath.h>` `<complex.h> <inttypes.h> <setjmp.h> <stdio.h> <time.h>` `<ctype.h> <iso646.h> <signal.h> <stdint.h> <uchar.h>` `<errno.h> <limits.h> <stdarg.h> <stdlib.h> <wchar.h>` `<fenv.h> <locale.h> <stdbool.h> <string.h> <wctype.h>`

进一步，

> 2 **每个 C 头文件，每个头文件都有一个形式的名称，其`name.h`行为就像每个名称放在标准库名称空间中对应的名称`cname header`都放在全局名称空间范围内。**未指定这些名称是否首先在命名空间 std 的命名空间范围 (3.3.6) 内声明或定义，然后通过显式使用声明 (7.3.3) 注入全局命名空间范围。
> 
> 3 [ 示例：标头`<cstdlib>`确实在命名空间 std 中提供了它的声明和定义。它还可以在全局命名空间中提供这些名称。头文件`<stdlib.h>`在全局命名空间中确实提供了相同的声明和定义，就像在 C 标准中一样。它还可以在命名空间 std 中提供这些名称。—结束示例]

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-05T08:51:50.530

根据 libstdc++ 文档：

> 该标准规定，如果一个包含 C 样式的标头（`<math.h>`在这种情况下），则这些符号将在**全局命名空间**中可用，并且可能在命名空间 std:: 中可用（但这不再是严格要求。）另一方面，包括 C++ 风格的标头 ( `<cmath>`) 保证实体可以在**命名空间 std**中找到， 也可能在全局命名空间中找到。

[http://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt01ch03s02.html](http://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt01ch03s02.html)**

# xna - 为什么 Vector2（来自 XNA 的库）使用 float 而不是 int？

> ID：10460251
> 
> 赞同：4
> 
> 时间：2012-05-05T08:45:33.320
> 
> 标签：xna, floating-point, int, draw, spritebatch

为什么**Vector2**（来自 XNA 的库）使用**float**而不是**int**？

计算机屏幕上的位置以像素为单位，因此光标位置可以由两个**整数**定义。没有*半个像素*这样的东西。那我们为什么要使用浮点数呢？

在**SpriteBatch**类中，我发现了 7 个称为**Draw**的重载方法。他们两个人：

```
public void Draw(Texture2D texture, Rectangle destinationRectangle, Color color);
public void Draw(Texture2D texture, Vector2 position, Color color); 
```

所以我们可以看到**Draw**接受**int**和**float**坐标。

我在实现游戏对象的屏幕坐标时遇到了这个问题。我认为**Rectangle**是保存对象大小和屏幕坐标的不错选择。但现在我不确定...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T01:55:08.710

在数学上，向量是运动，而不是位置。虽然屏幕上的位置在技术上可能无法介于整数之间，但运动绝对可以。如果一个向量使用`int`s 那么你可以移动的最慢的将是`(1, 1)`。使用`float`s 你可以移动`(.1, .1)`, `(.001, .001)`, 等等。

（另请注意，XNA 结构`Point`确实使用`int`s。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T19:42:26.033

您可以同时使用`Vector2`和`Rectangle`来表示您的对象坐标。我通常这样做：

```
public class GameObject
{
    Texture2D _texture;

    public Vector2 Position { get; set; }
    public int Width { get; private set; } //doesn't have to be private
    public int Height { get; private set; } //but it's nicer when it doesn't change :)

    public Rectangle PositionRectangle
    {
        get
        {
            return new Rectangle((int)Position.X, (int)Position.Y, Width, Height);
        }
    }

    public GameObject(Texture2D texture)
    {
        this._texture = texture;
        this.Width = texture.Width;
        this.Height = texture.Height;
    }
} 
```

要移动对象，只需将其`Position`属性设置为新值。

```
_player.Position = new Vector2(_player.Position.X, 100); 
```

您不必担心矩形，因为它的值直接取决于`Position`.

我的游戏对象通常也包含绘制自己的方法，例如

```
public void Draw(SpriteBatch spriteBatch, GameTime gameTime)
{
    spriteBatch.Draw(this._texture, this.Position, Color.White);
} 
```

您的碰撞检测代码`Game.Update()`可以只使用`PositionRectangle`来测试碰撞

```
//_player and _enemy are of type GameObject (or one that inherits it)
if(_player.PositionRectangle.Intersects(_enemy.PositionRectangle))
{
    _player.Lives--;
    _player.InvurnerabilityPeriod = 2000;
    //or something along these lines;
} 
```

您也可以调用`spriteBatch.Draw()`with `PositionRectangle`，您应该不会注意到太大的区别。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T10:04:23.843

有“半个像素”这样的东西*。*使用非像素对齐的浮点坐标将导致您的精灵在子像素坐标处呈现。这通常是使对象看起来平滑滚动所必需的，但在某些情况下也会产生令人不快的闪烁效果。

有关基本思想的摘要，请参见此处：亚[像素渲染](http://en.wikipedia.org/wiki/Subpixel_rendering)

# java - Android - 从资源加载大字符串数组时，ReferenceTable 溢出（最大值 = 512）

> ID：10460254
> 
> 赞同：1
> 
> 时间：2012-05-05T08:46:10.887
> 
> 标签：java, android, string, resources, overflow

我在资源文件 arrays.xml 中有大量字符串（大约 800 个项目），当尝试读取它时：

```
String[] arr = context.getResources().getStringArray(R.array.text); 
```

我得到错误：

```
ReferenceTable overflow (max=512)
Last 10 entries in JNI local reference table:
502: 0x44ea8b28 cls=Ljava/lang/String; (28 bytes)
503: 0x44ea8c98 cls=Ljava/lang/String; (28 bytes)
504: 0x44ea8df0 cls=Ljava/lang/String; (28 bytes)
505: 0x44ea8f20 cls=Ljava/lang/String; (28 bytes)
506: 0x44ea8f98 cls=Ljava/lang/String; (28 bytes)
507: 0x44ea9070 cls=Ljava/lang/String; (28 bytes)
508: 0x44ea91a0 cls=Ljava/lang/String; (28 bytes)
509: 0x44ea9328 cls=Ljava/lang/String; (28 bytes)
510: 0x44ea94c8 cls=Ljava/lang/String; (28 bytes)
511: 0x44ea9618 cls=Ljava/lang/String; (28 bytes)
JNI local reference table summary (512 entries):
3 of Ljava/lang/Class; 172B (2 unique)
506 of Ljava/lang/String; 28B (506 unique)
1 of Ljava/lang/String; 36B
1 of [Ljava/lang/String; 28B
1 of [Ljava/lang/String; 3212B
Memory held directly by native code is 17788 bytes
Failed adding to JNI local ref table (has 512 entries) 
```

我该如何解决这个问题？

# javascript - 解析facebook json javascript

> ID：10460258
> 
> 赞同：-2
> 
> 时间：2012-05-05T08:47:08.773
> 
> 标签：javascript, jquery, facebook, json

我正在使用 javascript api 来获取 facebook 评论。

我得到以下 json 结果，但如何解析它们以在我的页面上使用？

```
 {
      "id": "1234567891_2823098717038_3160191",
      "from": {
        "name": "User",
        "id": "1234567891"
      },
      "message": "comment only...",
      "can_remove": true,
      "created_time": "2012-05-05T07:43:11+0000"
    },
    {
      "id": "1234567891_2823098717038_3160281",
      "from": {
        "name": "User",
        "id": "1234567891"
      },
      "message": "just another comment...",
      "can_remove": true,
      "created_time": "2012-05-05T08:14:17+0000"
    },
    {
      "id": "1234567891_2823098717038_3160336",
      "from": {
        "name": "user2",
        "id": "56265654845454"
      },
      "message": "congratz dear :)",
      "can_remove": true,
      "created_time": "2012-05-05T08:29:05+0000"
    }
  ],
  "paging": {
    "next": "http://link.dddd"
  }
} 
```

我如何循环并显示内容？

**jQuery 解决方案是可以接受的。**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T08:51:35.507

使用`JQuery.parseJSON`：[http ://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T21:04:30.800

assoc_data = jQuery.param(响应); //响应是你的json

$.ajax({ type: "POST", url: "submit_fb_data.php", data: assoc_data, success: function(data) {

```
//etc 
```

}

});

*   确保使用 >=1.4 的 jquery 版本

# hibernate - Hibernate：父类中的关联应该为子类重复

> ID：10460259
> 
> 赞同：0
> 
> 时间：2012-05-05T08:47:15.643
> 
> 标签：hibernate, jpa

我想知道 Parent 类和 Parent1 类中是否存在任何关系。然后我可以使用来自 Child 类的相同关系来获取 Child1 类。

```
Class GenericCalendar {
    @JoinColumn(column = "FK_CUR_GEN_CAL")
    GenericCalendarVersion currentGenericCalendarVersion;
}

Class GenericCalendarVersion {
}

Class ProcessingCalendar extends GenericCalendar {
}

Class ProcessingCalendarVersion extends GenericCalendarVersion {
} 
```

所以我想从 ProcessingCalendar 中检索 ProcessingCalendarVersion。有可能得到一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:43:53.480

您编写的代码将有点像这样，您将为每个子类的处理日历映射进行继承映射，并且对处理日历进行相同的处理，您将通过转换从休眠会话的 get 方法返回的对象来检索 processingCalendar 对象，您可以从加载的对象访问 processingCalendarversion 对象。

# c# - Asp.net linq 查询

> ID：10460261
> 
> 赞同：3
> 
> 时间：2012-05-05T08:47:20.273
> 
> 标签：c#, linq

```
System.Linq.IQueryable<CustomerProfile> query = 
    from usr in context.customer_profiles
    where usr.cust_email == LoginID
    select new CustomerProfile
    {
        NAME = usr.cust_name,
        CONTACT = usr.cust_contact,
        EMAILID = usr.cust_email,
        LOCATION = usr.cust_location,
        SERVICELOCATION=usr.cust_service_location,
        FAXNO=usr.cust_fax_no,
        FIRMNAME = usr.cust_firm_name,
        FIRMADDRESS = usr.cust_firm_address,
        DATEESTABLISHED = Convert.ToDateTime(((DateTime?)usr.date_of_established)),
        SIGNATURE = usr.cust_signature,
        LOGO =  usr.logo,
    }; 
```

在下一行，我得到“指定的演员表无效”的问题。我该如何纠正？

```
return query.ToList().FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:54:40.473

You are comparing a customers email to their login id in your query. I assume this would cause a casting issue, if not it probably wont return the correct results you want.

And use an implicit cast (var) rather than IQueryable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:00:38.387

试试这个，然后返回查询。对不起格式，它让我感到忧郁

```
 CustomerProfile query =
         (from usr in context.customer_profiles
          where usr.cust_email == LoginID
          select new
          {
              NAME = usr.cust_name,
              CONTACT = usr.cust_contact,
              EMAILID = usr.cust_email,
              LOCATION = usr.cust_location,
              SERVICELOCATION = usr.cust_service_location,
              FAXNO = usr.cust_fax_no,
              FIRMNAME = usr.cust_firm_name,
              FIRMADDRESS = usr.cust_firm_address,
              DATEESTABLISHED = Convert.ToDateTime(((DateTime?)usr.date_of_established)),
              SIGNATURE = usr.cust_signature,
              LOGO = usr.logo,
          }).FirstOrDefault(); 
```

# algorithm - 关于调整级联 AdaBoost 阶段阈值的一些细节

> ID：10460265
> 
> 赞同：4
> 
> 时间：2012-05-05T08:47:48.997
> 
> 标签：algorithm, artificial-intelligence, machine-learning, computer-vision, pattern-recognition

我已经实现了 AdaBoost 序列算法，目前我正在尝试实现所谓的 Cascaded AdaBoost，基于 P. Viola 和 M. Jones 的原始论文。不幸的是，我有一些疑问，与调整一个阶段的阈值有关。正如我们在原始论文中所读到的，该过程用一句话来描述：

```
Decrease threshold for the ith classiﬁer until the current
cascaded classiﬁer has a detection rate of at least
d × Di − 1 (this also affects Fi) 
```

我不确定主要有两点：

*   门槛是多少？它是 0.5 * sum (alpha) 表达式值还是只有 0.5 因子？
*   阈值的初始值应该是多少？（0.5？）
*   “降低门槛”具体是什么意思？我是否需要迭代选择新的阈值，例如 0.5、0.4、0.3？递减的步骤是什么？

我曾尝试在 Google 中搜索此信息，但不幸的是我找不到任何有用的信息。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:56:55.800

我有完全相同的疑问，到目前为止还没有找到任何权威来源。但是，这是我对这个问题的最佳猜测：1\. (0.5*sum(aplha)) 是阈值。2\. 阈值的初始值就是上面那个。接下来，尝试使用中间强分类器（您目前拥有的）对样本进行分类。您将获得每个样本达到的分数，并且根据阈值的当前值，一些正样本将被分类为负样本等。因此，取决于此阶段所需的检测率（强分类器），降低阈值，使许多正样本得到正确分类，

例如：说脱粒。是 10，这些是正训练样本的当前分类器输出：

9.5、10.5、10.2、5.4、6.7

我想要 80% 的检测率 => 80% 以上的 5 个样本正确分类 => 4 个以上 => 将阈值设置为 6.7

显然，通过更改阈值，FP 率也会发生变化，因此更新它，如果未达到该阶段所需的 FP 率，则在该阶段使用另一个分类器。

我还没有上过关于 ada-boost 等的正式课程，但这是我基于我试图实施的一些研究论文的观察。如果有问题，请纠正我。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:16:33.990

我找到了 Karim Ayachi 的一篇关于实时人脸检测的硕士论文 ( [pdf](http://www.science.uva.nl/research/ias/alumni/m.sc.theses/theses/KarimAyachi.pdf) )，他在其中描述了 Viola Jones 人脸检测方法。

正如第 5.2 节（使用 AdaBoost 创建级联）中所写，我们可以将强分类器的最大阈值设置为 sum(alpha)，将最小阈值设置为 0，然后使用二分搜索找到最佳阈值（参见表 5.1伪代码）。

希望这可以帮助！

# windbg - 使用 Windbg 收集句柄

> ID：10460267
> 
> 赞同：1
> 
> 时间：2012-05-05T08:48:53.147
> 
> 标签：windbg, handle

我正在使用 Windbg sdk 编写自己的调试器。调试器能够收集被调试应用程序分配的所有句柄以避免句柄泄漏。这是我的代码：

```
void zAdvancedDebugger::debugProc(){
    // Creating interfaces including m_dbgClient, m_dbgControl
    if(!createInterfaces()){
        printf("Failed to create debugging interfaces\r\n");
        return;
    }
    std::string strRealCmdLine="\"" + app + "\"  " + args;
    // Every thing's set up so start the app.
    if (( m_dbgClient->CreateProcess(0, (PSTR)strRealCmdLine.c_str(), DEBUG_PROCESS )) != S_OK)
        return ;
    // event loop
    while(true){
        if(m_dbgControl->WaitForEvent(DEBUG_WAIT_DEFAULT,INFINITE)!= S_OK)
            break;
    }
    HRESULT ret=m_dbgControl->Execute(
        DEBUG_OUTCTL_IGNORE,
        ".closehandle -a", // Close all handles allocated
        DEBUG_EXECUTE_NOT_LOGGED );
} 
```

问题是：我无法执行命令“.closehandle -a”。每当我运行代码时，我总是得到“ret 0x80040205 An unexpected exception was raise”。你能告诉我这有什么问题吗？

# android - Paint.setAntiAlias(false) 没有效果？

> ID：10460270
> 
> 赞同：4
> 
> 时间：2012-05-05T08:49:09.707
> 
> 标签：android, paint, android-canvas, antialiasing

我正在尝试在 Android 的画布上绘制没有抗锯齿的文本。我要使用的字体是一个文件 cour.ttf，我已将它从我的 PC 的 C:\windows\fonts 目录复制到我的应用程序的资产目录中。

我正在使用这段代码：

```
paint.setColor(Color.BLACK);
paint.setTypeface(Typeface.createFromAsset(getAssets(),"cour.ttf"));
paint.setTextSize(20);
paint.setAntiAlias(false);
canvas.drawText("ABCDE abcde 12345 -+/#.",100,100,paint); 
```

setAntiAlias 函数似乎没有任何效果。这张图显示了我的结果： http: [//oi47.tinypic.com/35253wo.png](http://oi47.tinypic.com/35253wo.png)

第一行是应用程序的屏幕截图，抗锯齿设置为 false。第二行是应用程序的屏幕截图，其中抗锯齿设置为 true。第三行是我期望得到的，它是我的电脑在 notepad.exe 中使用相同字体制作的屏幕截图。

我做错了什么还是这是关闭抗锯齿的预期输出？我在这里想要实现的是像素化的不模糊文本。

任何帮助深表感谢。

编辑：我还没有完全找到解决方案，但我确实发现了一些有趣的东西：添加`android:hardwareAccelerated="false"`到我的活动中清除了很多。Apperently这在Android 4上默认打开。仍然有一个（非常轻的）阴影可见，我想删除它。

禁用硬件加速的屏幕截图：http: [//oi49.tinypic.com/aayypj.png](http://oi49.tinypic.com/aayypj.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T17:17:48.107

PC和手机上的像素密度似乎不同，这就是文本外观不同的原因。您无法将手机呈现的文本与 PC 上呈现的文本进行比较。我觉得你手机的像素密度很高，所以你看不到抗锯齿的效果。

# android - 从 url 加载图像的分辨率问题

> ID：10460272
> 
> 赞同：0
> 
> 时间：2012-05-05T08:49:16.210
> 
> 标签：android, android-layout, load, imageview

我正在从 url 加载 ImageView 中的图像。（来自RSS提要）

问题是加载图像的分辨率低于原始图像！

我搜索了 Stackoverflow，发现解决方法是将“inScaled”选项设置为 false 以防止图像重新缩放。但是，这个解决方案对我不起作用。

这是代码：

```
 URL feedImage= new URL(img_link);
    HttpURLConnection conn= (HttpURLConnection)feedImage.openConnection();
    InputStream is = conn.getInputStream();
    BitmapFactory.Options  BFoptions = new BitmapFactory.Options();
    BFoptions.inScaled = false;
    Bitmap img = BitmapFactory.decodeStream(is,null, BFoptions);
    int density = img.getDensity(); Log.e("img", "Image density is " + density);
    int width =img.getWidth(); Log.e("img", "Image width is " + width);
    int height  = img.getHeight(); Log.e("img", "Image height is " + height);

    my_image.setImageBitmap(img); 
```

变量密度、宽度和高度低于原始图像的值。

这是我布局的一部分：

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

            <ImageView
                    android:id="@+id/joke_image"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"         
                    android:contentDescription="temp description"/>

            <ScrollView
                    android:id="@+id/SV"
                    android:layout_width="fill_parent"
                    android:layout_height="30dp"
                    android:background="@drawable/background"
                    android:paddingTop="10dp"
                    android:paddingLeft="10dp"
                    android:paddingRight="10dp"
                    android:paddingBottom="50dp">

                    <!-- bla 
                         bla 
                         bla  

                         -->

            </ScrollView>   
</RelativeLayout> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T18:25:59.967

终于解决了：）

它似乎与代码或 ImageViews 无关，......

RSS 提要中的所有图像都是缩略图……这就是它们在应用程序中看起来很小但在网站中却很大的原因。

所以解决方案是将每个图像网址末尾的“_s.jpg”替换为“_n.jpg”:)

我希望这个答案对其他人有帮助:)

# windows - Why is 32-bit regsvr32 invoked from inside Azure startup task?

> ID：10460282
> 
> 赞同：1
> 
> 时间：2012-05-05T08:51:09.510
> 
> 标签：windows, com, azure, 32bit-64bit, windows-server-2008-r2

My Azure role startup task is invoking a .cmd file:

```
<Startup>
    <Task commandLine="startup.cmd" executionContext="elevated" taskType="simple"/>
</Startup> 
```

The .cmd file contains invokation of `regsvr32`:

```
//startup.cmd
regsvr32 PathToMyComServer\MyComServer.dll 
```

for registering a 32-bit in-proc COM server.

Now on 64-bit systems there're two versions of `regsvr32` - one in SysWOW64 folder for 32-bit COM servers and one in System32 folder for 64-bit COM servers. Of course only the matching version of `regsvr32` can be used for any given in-proc COM server.

When I login onto my development Windows 2008 box and run `regsvr32` from a command line the 64-bit version is invoked, but when my startup task runs - both in Compute Emulator and in the live cloud - the 32-bit version is invoked and properly registers my in-proc COM server. This puzzles me.

Why is 32-bit version of `regsvr32` invoked in Azure startup task?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:28:41.707

请尝试按照下面链接中的说明在真实用户上下文中运行您的启动任务，这应该可以解决此问题：

[http://www.davidaiken.com/2011/01/19/running-azure-startup-tasks-as-a-real-user/](http://www.davidaiken.com/2011/01/19/running-azure-startup-tasks-as-a-real-user/)

在 Azure VM 上，我尝试使用 PxExec 工具启动 Regsvr32

> psexec regsvr32 -> 启动 32 位版本的 regsvr32 psexec -s regsvr32 -> 启动 64 位版本的 regsvr32

在这两种情况下，psexec 都是在运行 Win2K2008 64 位的 Azure VM 上以 32 位模式启动的。

这就是为什么我建议尝试在真实用户上下文中启动启动任务的原因，因为在我的 64 位机器上，有限的用户权限，启动 regsvr32.exe 实际上会启动 32 位 REGSVR32，并且使用管理员用户上下文相同的命令会启动 64 位 regsvr32。因为启动任务不是在真实用户上下文中启动的，我怀疑这可能是一个原因。

另一个选项是您也可以使用“PsExec -s”选项来启动 64 位版本的 regsvr32。

# python - 从列表中每 4 个字符串连接一次？

> ID：10460286
> 
> 赞同：3
> 
> 时间：2012-05-05T08:51:35.140
> 
> 标签：python, string, list, ip

我有这个清单：

```
['192', '168', '0', '1', '80', '192', '168', '0', '2', '8080']... 
```

我想得到这个列表：

```
['192.168.0.1:80', '192.168.0.2:8080']... 
```

最好的方法是什么？

`range`与`list`流行音乐一起使用？

使用`list`切片？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T08:54:52.873

```
>>> data = ['192', '168', '0', '1', '80', '192', '168', '0', '2', '8080']
>>> ['{}.{}.{}.{}:{}'.format(*x) for x in zip(*[iter(data)]*5)]
['192.168.0.1:80', '192.168.0.2:8080'] 
```

使用`starmap`

```
>>> from itertools import starmap
>>> list(starmap('{}.{}.{}.{}:{}'.format,zip(*[iter(data)]*5)))
['192.168.0.1:80', '192.168.0.2:8080'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T08:53:58.130

这是一种方法，它可能是也可能不是“最好”的方法：

```
>>> a = ['192', '168', '0', '1', '80', '192', '168', '0', '2', '8080']
>>> [":".join([".".join(a[x:x+4]), a[x+4]]) for x in range(0, len(a), 5)]
['192.168.0.1:80', '192.168.0.2:8080'] 
```

# regex - How to add a new line in the middle of string in c#

> ID：10460288
> 
> 赞同：0
> 
> 时间：2012-05-05T08:51:43.110
> 
> 标签：regex, c#-4.0

I have the following string which contains reviews for products, I want to move sentences like 1 of 3 and 4 of 13 into new lines

Input string

```
The mapping features have a lot of inaccuracie 1 of 3
am a little disappointed in the new 4S. 4 of 13 
```

Output string

```
The mapping features have a lot of inaccuracies 
1 of 3
am a little disappointed in the new 4S 
4 of 13 
```

I was trying `Regex.Replace` because it changes all occurrences in the string

I located the string using `@"\d+ of \d+"`

but how can I keep the variable number in the replacement text? Or can you suggest a different method?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T08:55:58.300

You need to *capture* the match in order to be able to use it for replacement:

```
@"(\d+ of \d+)" 
```

To replace this value, use `$1`.

Something like:

```
Regex.Replace(input, 
              @"(\d+ of \d+)", 
              string.Format(@"{0}$1{0}", Environment.NewLine)) 
```

# python - 从对象数组中提取的有效方法

> ID：10460295
> 
> 赞同：1
> 
> 时间：2012-05-05T08:52:25.247
> 
> 标签：python, arrays, multidimensional-array, numpy

我在python中有一个对象数组：

```
meshnodearray = ['MeshNode object', 'MeshNode object', 'MeshNode object', ...] 
```

例如，第一个“MeshNode 对象”是：

```
({'coordinates': (15.08, 273.01, 322.61), 'instanceName': None, 'label': 1}) 
```

我需要创建一个这样的坐标数组：

```
NODEcoo = np.zeros((nnod,3),dtype='float64')
for i in meshnodearray:
    NODEcoo[i.label-1,0:] = np.array(i.coordinates) 
```

对于大型阵列，这很慢。有没有更有效的方法来做到这一点，也许没有 for 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:56:39.947

尝试将坐标提取到 python 坐标列表中，然后一次性将其转换为 numpy 数组。如果标签值从 1 到 是连续的`nnod`，就这么简单：

```
coords = [ n['coordinates'] for n in meshnodearray ]
NODEcoo = np.array(coords) 
```

使用生成器执行此操作会更好一些（这样可以避免创建中间数组），但是 numpy 只能从生成器创建一维数组，使用`numpy.fromiter()`.

# php - How to write fixed width text file with PHP and MYSQL data

> ID：10460298
> 
> 赞同：0
> 
> 时间：2012-05-05T08:52:51.660
> 
> 标签：php, text

I have an issue in writing fixed width text file using php and data from mysql db. Pl find below format where I have a customer table: customer name of 100 char width customer address of 200 chars width.

## I need to print these in the below format.

```
3M India Limited                         Plot 48-51 Electronic City
Biocon Ltd                               20th KM Hosur Road,Electronic city 
```

Now my customer name keeps varying, but I need to fix this width and then print Address. Below is my code where I am manually giving the spaces which is causing the data to go haphazard when written in a text file.

php Code:

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = "    ".$cust2[Ac_desc];
fwrite($fh, $stringData);
$stringData = "                                        ".$cust2[Add1]."\n";
fwrite($fh, $stringData);
fclose($fh); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T08:59:02.247

首先，确保您的`Ac_desc`和`Add1`是定义的常量或引用它们以将其视为关联索引。

其次，尝试[str_pad()](http://us3.php.net/manual/en/function.str-pad.php)函数。

```
fwrite($fh, str_pad($cust2['Ac_desc'], 100));
fwrite($fh, str_pad($cust2['Add1'], 200)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:03:23.473

首先，您确定第一列的静态宽度，例如 100 个字符。

然后尝试使用此代码

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = "    ".$cust2[Ac_desc];
$spaces = 100 - strlen($cust2[Ac_desc]); // get the number of spaces to add
fwrite($fh, $stringData);
$stringData = str_repeat(" ",$spaces).$cust2[Add1]."\n";
fwrite($fh, $stringData);
fclose($fh); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T09:12:26.073

您可以将 MySQL 的[`RPAD()`](http://dev.mysql.com/doc/en/string-functions.html#function_rpad)函数与它的[`SELECT ... INTO OUTFILE`](http://dev.mysql.com/doc/en/select-into.html)命令一起使用：

```
SELECT
  RPAD(ColumnA, @width, ' '),
  RPAD(ColumnB, @width, ' '),
  -- etc.
INTO OUTFILE '/path/to/file.prn'
FIELDS TERMINATED BY '' ENCLOSED BY '' ESCAPED BY ''
LINES  TERMINATED BY '\n' STARTING BY '' 
```

# java - How to check if VERTEX ARRAY is clockwise?

> ID：10460300
> 
> 赞同：3
> 
> 时间：2012-05-05T08:53:01.083
> 
> 标签：java, android

**Solved**, used this code:

```
if ( !isClockwise(TempVectArray) ) { Collections.reverse(TempVectArray); } 
```

...

```
private boolean isClockwise(ArrayList<Vec2> arl){
    Iterator<Vec2> it = arl.iterator();
    Vec2 pt1 = (Vec2)it.next();
    Vec2 firstPt = pt1;
    Vec2 lastPt = null;
    double area = 0.0;
    while(it.hasNext()){
        Vec2 pt2 = (Vec2) it.next();
        area += (((pt2.x - pt1.x) * (pt2.y + pt1.y)) / 2);
        pt1 = pt2;
        lastPt = pt1;
    }
    area += (((firstPt.x - lastPt.x) * (firstPt.y + lastPt.y)) / 2);
    return area < 0;
} 
```

* * *

Suppose I get a vertex array from the user tapping on the screen, but need it to be clockwise.

Maybe you know of some standard methods to check if it is clockwise and if it's not, then make it clockwise?

![enter image description here](../Images/74edf1ca4dddb8fda6cd0e59181467e3.png)

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:08:02.157

一种方法是首先计算平均点，然后按角度对其周围的所有内容进行排序。应该是这样的：

```
public static void sortPointsClockwise(ArrayList<PointF> points) {
    float averageX = 0;
    float averageY = 0;

    for (PointF point : points) {
        averageX += point.x;
        averageY += point.y;
    }

    final float finalAverageX = averageX / points.size();
    final float finalAverageY = averageY / points.size();

    Comparator<PointF> comparator = new Comparator<PointF>() {
        public int compare(PointF lhs, PointF rhs) {
            double lhsAngle = Math.atan2(lhs.y - finalAverageY, lhs.x - finalAverageX);
            double rhsAngle = Math.atan2(rhs.y - finalAverageY, rhs.x - finalAverageX);

            // Depending on the coordinate system, you might need to reverse these two conditions
            if (lhsAngle < rhsAngle) return -1;
            if (lhsAngle > rhsAngle) return 1;

            return 0;
        }
    };

    Collections.sort(points, comparator);
}

public static void sortPointsCounterClockwise(ArrayList<PointF> points) {
    sortPointsClockwise(points);
    Collections.reverse(points);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:42:10.903

您有节点的序列号和位置。获取在移动中保持 x 和 y 变化的移动。剩下要做的就是定义一个控制结构，例如：

```
if(movement_before is "up")
    movement should-be "up" or "up-right"
if(movement_before is "up-left")
    movement should-be "up" or "up-left" or "up-right"
etc.. 
```

# c# - Create a new menu item in SQL Server Management Studio

> ID：10460305
> 
> 赞同：7
> 
> 时间：2012-05-05T08:53:58.787
> 
> 标签：c#, visual-studio-2010, sql-server-2008, ssms

Is it possible to create a new menu item in SQL Server 2008 Management Studio?

For example when you right-click the a database a list of options appears (New Database, New Query ... ).

Is it possible to add a new item in that list and implement some C# functionality when clicking that button?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T21:37:21.273

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms174178%28v=sql.100%29.aspx)。

向菜单添加新项目 向菜单添加新项目

> 1.  在工具菜单上，单击选项。
> 2.  在“自定义”对话框的“命令”选项卡上，单击“新建菜单”。
> 3.  在“命令”框中，将“新菜单”拖到菜单栏上，然后将其放到您希望新菜单出现的位置。
> 4.  在菜单上，右键单击“新建菜单”，然后在“名称”框中，键入新菜单的名称。
> 5.  在“自定义”对话框中，选择“文件”等类别，然后选择“打开文件”等命令。将命令拖动到新菜单。当您指向新菜单时，菜单将展开。将命令拖放到展开的菜单上。
> 6.  在“自定义”对话框中，单击“关闭”。

# .net - Circular Type Constraints

> ID：10460310
> 
> 赞同：4
> 
> 时间：2012-05-05T08:54:38.420
> 
> 标签：.net, generics, f#

I have two interfaces: `IState` and `IAction`. A State has a method: GetActions - which returns a collection of IActions. A Action has a method: Apply - which acts on a State, to return a new State.

IState takes a type parameter to control what sort of actions it returns with get actions, IAction takes a type parameter to control what sort of states it can act on. (By sort, i ment implementation). I want to be able to garentee that a State only return actions that can act on a state of that same type.

```
type IAction<'S when 'S:>IState> =
    abstract member Apply : 'S->'S

and IState<'A when 'A:>IAction<'S when 'S:> typeof(this)>> = 
    abstract member GetActions : seq<'A> 
```

but obviously `typeof(this)` is not a thing. How can I have a type constraint making sure my type paramerer is of type equal to the type I am defining?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:36:12.430

## 一开始就避免陷入问题的解决方案

不是您问题的直接答案，但它应该可以解决您最初的问题：

```
type StateMachine<'State, 'Action> =
    interface
        abstract Apply : 'State * 'Action -> 'State
        abstract GetActions : 'State -> 'Action seq
    end 
```

这种处理问题的方式受到[ML 的模块系统的启发](http://en.wikipedia.org/wiki/Standard_ML#Module_system)

## 更丑的解决方案

如果你真的想要两个紧密耦合的接口，你可以这样：

```
type IState<'Action, 'State when 'Action :> IAction<'State, 'Action> and 'State :> IState<'Action, 'State>> =
    interface
        abstract GetActions : unit -> 'Action seq
    end

and IAction<'State, 'Action when 'Action :> IAction<'State, 'Action> and 'State :> IState<'Action, 'State>> =
    interface
        abstract Apply : 'State -> 'State
    end

// Some stupid types to illustrate how to implement the interfaces
type State() =
    interface IState<Action, State> with
        member this.GetActions() = Seq.empty

and Action() =
    interface IAction<State, Action> with
        member this.Apply s = s 
```

我希望人们不要开始使用第二种解决方案，并用它来制作以我命名的设计模式 :)

# android - Google Play Android App error

> ID：10460318
> 
> 赞同：1
> 
> 时间：2012-05-05T08:55:47.813
> 
> 标签：android

I have a problem uploading the application to Google Play me that the icon does not have the correct size 48x48, I have all 3 sizes correctly in their respective folders. You can see the capture of the error and the code referencing the icon. I have every icon size, as shown in 36.48 and 74 web pix in your folder.

What could be my problem?

![Code reference icon](../Images/751be92a51634cbe8f35fca78b957c36.png)

![Error Google Play](../Images/94c2e24d790a5f7e96e97fd419987bb2.png)

# java - 将值从 0 到 1 转换为灰度图像 ( Java)

> ID：10460330
> 
> 赞同：0
> 
> 时间：2012-05-05T08:58:49.843
> 
> 标签：java, grayscale

我有一个二维矩阵，它存储 0 到 1 之间的值。我想将这些值绘制为灰度级别。

如果值为 1，则应绘制为白色。如果值为 0，则应绘制为黑色。

我将如何在java中做到这一点？

我尝试了 classes: `Color`and `BufferedImage`，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:09:54.600

要创建图像并设置像素：

```
final BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);

for (int y = 0; y < height; y++)
{
  for (int x = 0; x < width; x++)
  {
    image.setRGB(x, y, color);
  }
} 
```

`color`是一个 int，在这种情况下，`ARGB`格式为（顶部字节是 alpha，然后是红色字节、绿色字节、蓝色字节）。由于您正在做灰度，因此您希望 R、G 和 B 具有相同的值。您不想要 alpha，因此您应该将最高字节设置为 0xFF。

看：[`BufferedImage.setRGB()`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#setRGB%28int,%20int,%20int%29)

# scraper - 带有 HTTP 标头问题的屏幕抓取 - 我认为

> ID：10460334
> 
> 赞同：0
> 
> 时间：2012-05-05T08:59:11.080
> 
> 标签：scraper

我一直在尝试解决这个问题大约一个星期，但无法提出一个好的解决方案。所以，我想我会看看是否有人可以帮助我。这是我试图抓取的链接之一：

[http://content.lib.washington.edu/cdm4/item_viewer.php?CISOROOT=/alaskawcanada&CISOPTR=491&CISOBOX=1&REC=4](http://content.lib.washington.edu/cdm4/item_viewer.php?CISOROOT=/alaskawcanada&CISOPTR=491&CISOBOX=1&REC=4)

我右键单击以复制图像位置。这是复制的链接：

（因为我是新手，所以不能将其粘贴为链接） http:// content (dot) lib (dot)washton (dot) edu/cgi-bin/getimage.exe?CISOROOT=/alaskawcanada&CISOPTR=491&DMSCALE=100.00000&DMWIDTH =802&DMHEIGHT=657.890625&DMX=0&DMY=0&DMTEXT=%20NA3050%20%09AWC0644%20AWC0388%20AWC0074%20AWC0575&REC=4&DMTHUMB=0&DMROTATE=0

没有显示清晰的图像 URL。显然这是因为图像隐藏在某种类型的脚本后面。经过反复试验，我发现我可以将“.jpg”放在“CISOPTR=491”之后，然后链接就变成了一个图片网址。问题是这不是图像的高分辨率版本。要获得高分辨率版本，我必须进一步更改 URL。我发现很多文章@Stackoverflow.com 都提到了尝试使用 curl 和 PHP 构建脚本，我什至尝试了其中的一些但没有运气。“491”是图像编号，我可以更改该编号以在同一目录中查找其他图像。所以，抓取一个数字序列应该很容易。但我仍然是一个刮痧的菜鸟，而这个正在踢我的屁股。这是我尝试过的。

[使用 cURL 获取远程图像然后重新采样](https://stackoverflow.com/questions/2629433/get-remote-image-using-curl-then-resample)

也试过这个。

[http://psung.blogspot.com/2008/06/using-wget-or-curl-to-download-web.html](http://psung.blogspot.com/2008/06/using-wget-or-curl-to-download-web.html)

我也有 Outwit Hub 和 Site Sucker，但他们不将 URL 识别为图像文件，因此他们只是通过它。我一夜之间使用了 SiteSucker，它下载了 40,000 个文件，其中只有 60 个是 jpeg，没有一个是我想要的。

我一直遇到的另一件事是我能够手动下载的文件，文件名始终是 getfile.exe 或 showfile.exe，然后如果我手动添加“.jpg”作为扩展名，我可以在本地查看图像.

我怎样才能获得原始的高分辨率图像文件，并自动化下载过程，以便我可以抓取几百张这些图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:13:45.777

> 我右键单击以复制图像位置。这是复制的链接：

您注意到标题中有“.exe”。查看查询字符串中的内容：

```
DMSCALE=100.00000
DMWIDTH=802
DMHEIGHT=657.890625
DMX=0
DMY=0
DMTEXT=%20NA3050%20%09AWC0644%20AWC0388%20AWC0074%20AWC0575
REC=4
DMTHUMB=0
DMROTATE=0 
```

强烈暗示该图像的原始来源在数据库或其他东西中，并且正在通过**服务器端**过滤器传递（不确定这是否是您所说的“某种脚本”的意思）。即，这是*动态生成的内容*，而不是*静态*的，并且同样的警告适用于动态文本内容：您必须弄清楚向服务器提供什么指令才能让它咳出您想要的内容。您几乎面前都有...如果 SiteSucker 或其他无法正确处理它，请使用 HTML 解析器自己抓取地址。

# c# - 如何生成/计算十二面体的顶点？

> ID：10460337
> 
> 赞同：6
> 
> 时间：2012-05-05T08:59:36.400
> 
> 标签：c#, algorithm, graphics

如何通过算法生成十二面体的顶点？

我希望四面体的质心位于`(0, 0, 0)`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T08:30:42.237

来自[维基百科](http://en.wikipedia.org/wiki/Dodecahedron#Cartesian_coordinates)：

> 以下笛卡尔坐标定义了以原点为中心并适当缩放和定向的十二面体的顶点：
> 
> （±1、±1、±1）
> 
> (0, ±1/φ, ±φ)
> 
> (±1/φ, ±φ, 0)
> 
> (±φ, 0, ±1/φ)
> 
> 其中 φ = (1 + √5) / 2 是黄金比例（也写为 τ）≈ 1.618。边长为 2/φ = √5 – 1。包含球体的半径为 √3。

我发现这个描述比一大段 C# 代码更简洁和信息丰富。（-：

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T13:14:41.060

由于这个问题现在是谷歌搜索的最高结果（数学上的欺骗是＃2），我想我不妨添加一些代码。

下面是一个完整的控制台程序，应该可以编译和运行，并且通常是不言自明的。

该算法基于[Wikipedia 文章](http://en.wikipedia.org/wiki/Dodecahedron#Cartesian_coordinates)（谢谢，[来自 math.stackoverflow.com 的 mt_](https://math.stackexchange.com/questions/141304/how-to-calculate-vertices-of-dodecahedron#comment325431_141304)）

此代码应为您打印正确的顶点列表。您最关心的是方法`Program.MakeDodecahedron`，但是不要只是复制和粘贴它，因为您需要修改它以使用您自己的顶点数据结构而不是我的模拟`Vertex`对象。您可以轻松使用[XNA 的 Vector3](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector3.aspx)，它有一个与 my 签名完全相同的构造函数`Vertex`。另外因为我的`Vertex.ToString`方法很hacky，这个程序在使用时可能会打印一个丑陋的输出表，`Vector3`所以请记住这一点。

另外，请注意，这是一个（不完美的）演示。例如，如果生成许多四面体，您将不必要地为每次调用重新计算常数（例如黄金分割率）。

使用 XNA，特别是如果您使用`Microsoft.Xna.Framework`，您还可以轻松地将十二面体渲染为 3D。为此，您可以修改[本教程](http://rbwhitaker.wikidot.com/a-little-practice)中的代码。

```
using System;
using System.Collections.Generic;

namespace DodecahedronVertices
{
    class Program
    {
        static void Main()
        {
            // Size parameter: This is distance of each vector from origin
            var r = Math.Sqrt(3);

            Console.WriteLine("Generating a dodecahedron with enclosing sphere radius: " + r);

            // Make the vertices
            var dodecahedron = MakeDodecahedron(r);

            // Print them out
            Console.WriteLine("       X        Y        Z");
            Console.WriteLine("   ==========================");
            for (var i = 0; i < dodecahedron.Count; i++)
            {
                var vertex = dodecahedron[i];
                Console.WriteLine("{0,2}:" + vertex, i + 1);
            }

            Console.WriteLine("\nDone!");
            Console.ReadLine();
        }

        /// <summary>
        /// Generates a list of vertices (in arbitrary order) for a tetrahedron centered on the origin.
        /// </summary>
        /// <param name="r">The distance of each vertex from origin.</param>
        /// <returns></returns>
        private static IList<Vertex> MakeDodecahedron(double r)
        {
            // Calculate constants that will be used to generate vertices
            var phi = (float)(Math.Sqrt(5) - 1) / 2; // The golden ratio

            var a = 1 / Math.Sqrt(3);
            var b = a / phi;
            var c = a * phi;

            // Generate each vertex
            var vertices = new List<Vertex>();
            foreach (var i in new[] { -1, 1 })
            {
                foreach (var j in new[] { -1, 1 })
                {
                    vertices.Add(new Vertex(
                                        0,
                                        i * c * r,
                                        j * b * r));
                    vertices.Add(new Vertex(
                                        i * c * r,
                                        j * b * r,
                                        0));
                    vertices.Add(new Vertex(
                                        i * b * r,
                                        0,
                                        j * c * r));

                    foreach (var k in new[] { -1, 1 })
                        vertices.Add(new Vertex(
                                            i * a * r,
                                            j * a * r,
                                            k * a * r));
                }
            }
            return vertices;
        }
    }

    /// <summary>
    /// A placeholder class to store data on a point in space. Don't actually use this, write a better class (or just use Vector3 from XNA).
    /// </summary>
    class Vertex
    {
        double x;
        double y;
        double z;

        public Vertex(double x, double y, double z)
        {
            this.x = x;
            this.y = y;
            this.z = z;
        }

        public override string ToString()
        {
            var s = String.Format("{0,8:F2},{1,8:F2},{2,8:F2}", x, y, z);

            return s;
        }
    }
} 
```

由于我的代码可能非常冗长且分散，我建议以支持折叠 for 循环和其他代码结构的方式阅读它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-18T23:01:03.373

以 P(0, 0, 0) 为中心的十二面体和以半径为 r 的球体为界的顶点的笛卡尔坐标由下式给出：

P(±r/√3,±r/√3,±r/√3)

P(0,±r/(√3*φ),±(r*φ)/√3)

P(± r/(√3*φ), ± (r*φ)/√3, 0)

P(± (r*φ)/√3, 0, ± r/(√3*φ))

> 其中 φ = (1 + √5) / 2 是黄金比例（也写为 τ）≈ 1.618。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T01:42:20.980

这是一个以 0 顶点为中心的黎曼曲面立体投影。（抱歉，我找不到如何发布数学符号）

其中 T 是黄金比例，令 a = 1/T^2 并让复共轭对 b+-ic 定义为 b=sqrt(5)/4 和 c=sqrt(3)/4。将这三个点旋转 0、120 和 240 度，这样您现在就有了 9 个点，都在单位圆内。

使用映射 z -> -1/z 将每个点映射到单位圆外的图像。在零和无穷远处添加一个点，您现在拥有十二面体的所有顶点。

如果你想让你的十二面体在球体上，做通常的立体背图，使单位圆进入赤道。通过通常的刻划过程，这也会给您一个以顶点为中心的立方体或四面体，但分别旋转了大约 37.76 度或 22.24 度。

# android - Android：AlarmManager 每天触发一个事件

> ID：10460338
> 
> 赞同：0
> 
> 时间：2012-05-05T08:59:42.970
> 
> 标签：android, alarmmanager, android-pendingintent, android-alarms

我正在尝试制作一个应用程序，它可以让我想起每天同一时间发生的事件。为此，我使用了一个 AlarmManager。

这就是我注册事件的方式：

```
Intent alarmIntent = new Intent(getApplicationContext(), ReminderAlarm.class);
alarmIntent.putExtra("id_bundle", cursor.getInt(0));
PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), cursor.getInt(0), alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);
am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent); 
```

这就是我取消注册事件的方式：

```
Intent alarmIntent = new Intent(getApplicationContext(), ReminderAlarm.class);
alarmIntent.putExtra("id_bundle", id);
PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), id,                   alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);
am.cancel(pendingIntent); 
```

这就是我编辑事件的方式：

```
Intent alarmIntent = new Intent(getApplicationContext(), ReminderAlarm.class);
alarmIntent.putExtra("id_bundle", id);
PendingIntent pendingIntent = PendingIntent.getActivity(getApplicationContext(), id, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);
am.cancel(pendingIntent);

Intent alarmIntentNew = new Intent(getApplicationContext(), ReminderAlarm.class);
alarmIntentNew.putExtra("id_bundle", id);
PendingIntent pendingIntentNew = PendingIntent.getActivity(getApplicationContext(), id, alarmIntentNew, PendingIntent.FLAG_UPDATE_CURRENT);
am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntentNew); 
```

我尝试使用间隔为 24*3600*1000 的 setRepeating 但这似乎不起作用，所以我决定在事件触发时取消注册并再次注册。我在警报触发后启动的 ReminderAlarm 活动中执行此操作。

此外，每当我启动应用程序时，我都会使用我发布的用于注册事件的代码块再次注册所有事件。我从数据库中提取有关哪些事件以及何时注册它们的数据。

我的问题是这也不起作用。当我将事件添加到时间 T+1 分钟时，它会正确触发。但是第二天，就没有了。

可能是因为我给日历实例提供了错误的数据？我有一个相当长的函数，它在事件触发之后和将此日历实例发送到 AlarmManager 实例之前设置日历实例。在这个函数中，我检查新月份、新年等内容并设置日历字段（年、月、day_of_month、hour_of_day、minute）。这甚至是必要的吗？calendar.getTimeInMillis() 是否考虑所有这些字段或仅考虑 hour_of_day 和 minute？你看到什么可能是错的吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:12:47.057

为什么不这样做以获得时间。

```
Calendar cal = Calendar.getInstance();

int now = cal.getTimeInMillis();

cal.add(Calendar.DAY_OF_MONTH, 1);

int tomorrow = cal.getTimeInMillis(); 
```

我认为日历可能是在做什么。

PS。我是在上一篇文章中建议警报的人：P 看起来你做得很好。

* * *

那个有用的代码：

```
//Create a calendar.
Calendar cal = Calendar.getInstance();

//Get the time in miilis since Jan 1st 1970 I think? 
cal.getTimeInMillis();

//Set the calendar
cal.set(year, month, day, hour, minute, second);

//set a certain aspect of the calendar
cal.set(Calendar.<What you want to set>, <amount>);

//for example
cal.set(Calendar.DAY_OF_MONTH, 1);

//Add to the calendar, Calendar.DAY_OF_MONTH what ever you are using specifies the amount of milliseconds to add, for example a day is 100*60*60*24 milliseconds where a second is 1000 milliseconds.
cal.add(Calendar.<Day or month or what ever>, <amount>);

//for example
cal.add(Calendar.MONTH, 1);

//Take of the calendar
cal.add(Calendar.MONTH, -1);

//Get that value
int day_of_month = cal.get(Calendar.DAY_OF_MONTH);
int hour = cal.get(Calendar.HOUR_OF_DAY); 
```

希望你喜欢 ：）

# asp.net-mvc - 我的矩阵实现中的数据太多>>速度慢，无法提交这么多数据

> ID：10460342
> 
> 赞同：1
> 
> 时间：2012-05-05T09:00:16.150
> 
> 标签：asp.net-mvc

我需要一种矩阵来编辑值。到目前为止，这是我的结果：

![在此处输入图像描述](../Images/2d697d5ad83131a101c516bcb0feedef.png)

所以我有一个非常大的表格（由几个文本框组成）。我仍然需要在标题中添加标题文本，但这只是一个测试。

我的解决方案有两个问题：

1.  当我专注于矩阵中的数字来改变它时，专注于这些文本框需要时间。

2.  当我单击提交时，我收到一个错误，因为要返回的元素太多。

我尝试使用更少的数据并且效果更好：在不同的文本框中更快地改变焦点并且提交工作得很好。

这是我的控制器操作：

```
 public ActionResult Index()
    {
        var dto = _requestServiceClient.GetMatrices();
        var vm = new List<MatrixVM>();
        var viewModel = new MatrixIndexViewModel();
        Mapper.Map(dto, vm);
        viewModel.Matrix = vm;
        return View(viewModel); 
    }

    [HttpPost]
    public ActionResult Index(MatrixIndexViewModel viewModel)
    {
        return View(viewModel);
    } 
```

这是我使用的模型：

```
public class MatrixIndexViewModel
{
    public List<MatrixVM> Matrix { get; set; }
}

public class MatrixVM
{
    public int      MatrixID { get; set; }
    public int      OriginStopID { get; set; }
    public string   OriginStopText { get; set; }
    public int      DestinationStopID { get; set; }
    public string   DestinationStopText { get; set; }
    public int      NumberOfDays { get; set; }

} 
```

这是我的看法：

```
@model PLATON.WebUI.Areas.Admin.ViewModels.Matrix.MatrixIndexViewModel
@using PLATON.WebUI.App_LocalResources

@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.Admin.cshtml";
    ViewBag.Title = UserResource.Matrix;
    double nbrStops = Math.Sqrt(Model.Matrix.Count());
    Html.EnableClientValidation(false);
}

@using (Html.BeginForm())
{     
    for (int count = 0; count < Model.Matrix.Count(); count++)
    {
        if (count % nbrStops == 0)
        {   
            // Displaying heading text for each lines         
            @Html.DisplayFor(x => x.Matrix[count].OriginStopText)
        }

        @Html.HiddenFor(x => x.Matrix[count].MatrixID)
        @Html.HiddenFor(x => x.Matrix[count].OriginStopID)
        @Html.HiddenFor(x => x.Matrix[count].DestinationStopID)
        @Html.TextBoxFor(x => x.Matrix[count].NumberOfDays, new { style = "width:13px" })

        if (count % nbrStops == nbrStops - 1) 
        {
            // Proceed next line
            @:<br /> 
        }
    }

    <div class="submit_block"> 
        <input type="submit" class="btn primary" value="Enregistrer" /> 
    </div> 
} 
```

您有更好的实施方案吗？也许更好的想法是拥有一个“只读”矩阵并能够单击元素以在 jquery 对话框中对其进行编辑。你怎么看？

不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:35:49.907

我想我会用 a`<table>`来显示数据，并在`onclick/onmouseenter`每个单元格上显示一个文本框来接受输入。

您可以考虑打开一个弹出窗口，以便您可以在当时向控制器发布一个值，或者您可以用 TextBox 替换单元格文本并仅在隐藏的输入列表中记录更改的值。

# actionscript-3 - 如何在 ActionScript3 中的类实例上获取或设置静态属性

> ID：10460343
> 
> 赞同：1
> 
> 时间：2012-05-05T09:00:48.830
> 
> 标签：actionscript-3, flash

例如，我有多个这样的类：

MyClassA.propertyAlpha
MyClassB.propertyTango
MyClassC.propertyBravo
MyClassD.propertyBeta
MyClassE.propertyCharlie
MyClassF.propertyRoger
MyClassG.propertyWilco

我得到了一个上述类型之一的类的实例和一个静态属性的名称（不管为什么）。

如何仅使用该信息获取或设置静态属性（不管为什么）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:24:39.243

您不能直接在实例上访问该值。它是其类的属性，因此必须对其进行访问。

有两种方法可以做到这一点。

要么使用该`constructor`属性：

```
function getStaticProperty( instance:Object, property:String ) : * {
    return instance.constructor[property];
} 
```

或者使用`getQualifiedClassName`and`getDefinitionByName`来获取类，*然后*获取属性值：

```
function getStaticProperty( instance:*, property:String ) : * {
    var className:String = getQualifiedClassName( instance ).replace("::",".");
    var clazz:Class = getDefinitionByName( className ) as Class;
    return clazz[property];
} 
```

# memory-management - 动画列表在 Ram 中保存内存

> ID：10460345
> 
> 赞同：0
> 
> 时间：2012-05-05T09:02:02.713
> 
> 标签：memory-management, android-animation

我正在使用动画列表来播放图像序列。通过这种方法，我发现我总是将将近 24MB 的空间保存在 Ram 中。

任何人都可以建议我在运行动画序列后如何在 Ram 中获得记忆。

用video播放动画还是用png序列播放动画好？

例如：动画列表 png 序列 xml

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="false" >    

    <item android:drawable="@drawable/ani_avatar_00016"
        android:duration="90" />            
    <item
        android:drawable="@drawable/ani_avatar_00001"
        android:duration="90"/>    
    . . . 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T21:03:04.580

我们遇到了同样的问题。我们做了一些事情来解决它。

首先，我们减小了图像尺寸。尝试使图像尽可能小。我们还尝试了视频，这减少了每个动画所需的内存分配，但我们不能使用这种方法，因为我们需要透明度。

其次是确保每次加载动画时都使用相同的内存插槽。如果您不打算使用多个动画，请尝试将类似大小的对象指向相同的内存地址。

据我所知，您无法控制垃圾收集器并要求清理内存空间。因此，无论是动画还是 PNG 序列，您都无法擦除这些 MB。

# javascript - 在 Extjs 中动态扩展类

> ID：10460346
> 
> 赞同：0
> 
> 时间：2012-05-05T09:02:35.387
> 
> 标签：javascript, extjs, extjs3, modx, user-defined-literals

我需要动态扩展类并使用以下代码：

```
Calc.grid.Table["Table"+key] = function(config) {
        config = config || {};
        Ext.applyIf(config,{
                id: 'calc-grid-table'+key
                ,baseParams: { 
                    action: 'mgr/calc/calcGetTable'+key
                    ,query: 'Calc'+key 
                }
        });
        Calc.grid.Table["Table"+key].superclass.constructor.call(this,config)
};
Ext.extend(Calc.grid.Table["Table"+key],Calc.grid.Table);
Ext.reg('calc-grid-table'+key,Calc.grid.Table["Table"+key]); 
```

但它给了我一个错误：

```
Uncaught TypeError: Cannot read property 'superclass' of undefined 
```

我试图把它改成这个

```
this.superclass.constructor.call(this,config) 
```

但错误是

```
Uncaught SyntaxError: Unexpected identifier 
```

问题在于动态文字。当我这样做时，它工作正常

```
Calc.grid.Table.Table21 = function(config) {
        config = config || {};
        Ext.applyIf(config,{
                id: 'calc-grid-table'+21
                ,baseParams: { 
                    action: 'mgr/calc/calcGetTable'+21
                    ,query: 'Calc'+21
                }
        });
        Calc.grid.Table.Table21.superclass.constructor.call(this,config)
};
Ext.extend(Calc.grid.Table.Table21,Calc.grid.Table);
Ext.reg('calc-grid-table'+21,Calc.grid.Table.Table21); 
```

我该如何解决？我究竟做错了什么？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:47:56.073

您`key`在构造函数中使用的变量不限于该函数，因此可以在调用构造函数之前更改它。您可以使用 Ext`createDelegate`将变量绑定到函数，这样它就不会在您身上改变：

```
Calc.grid.Table["Table"+key] = function(key, config) {
    config = config || {};
    Ext.applyIf(config,{
            id: 'calc-grid-table'+key
            ,baseParams: { 
                action: 'mgr/calc/calcGetTable'+key
                ,query: 'Calc'+key 
            }
    });
    Calc.grid.Table["Table"+key].superclass.constructor.call(this,config)
}.createDelegate(this, [key], 0); 
```

# visual-studio-2010 - Qt + VS2010：moc：指定的输入文件过多

> ID：10460347
> 
> 赞同：3
> 
> 时间：2012-05-05T09:02:57.633
> 
> 标签：visual-studio-2010, qt, qt-vs-addin

尝试在 Visual Studio 中使用 Qt 的 VS-addin 编译我的简单 Qt 应用程序，我收到以下错误：

```
1>------ Rebuild All started: Project: XXXXXXXXXXXXX, Configuration: Release Win32 ------
1>Build started 5/05/2012 6:57:33 PM.
1>_PrepareForClean:
1>  Deleting file "release\XXXXXXXXXXXXX.lastbuildstate".
1>InitializeBuildStatus:
1>  Touching "release\XXXXXXXXXXXXX.unsuccessfulbuild".
1>CustomBuild:
1>  MOC XXXXXXXXXXXXXMainWidget.h
1>  moc: Too many input files specified
1>  Usage: moc [options] <header-file>
1>    -o<file>           write output to file rather than stdout
1>    -I<dir>            add dir to the include path for header files
1>    -E                 preprocess only; do not generate meta object code
1>    -D<macro>[=<def>]  define macro, with optional definition
1>    -U<macro>          undefine macro
1>    -i                 do not generate an #include statement
1>    -p<path>           path prefix for included file
1>    -f[<file>]         force #include, optional file name
1>    -nn                do not display notes
1>    -nw                do not display warnings
1>    @<file>            read additional options from file
1>    -v                 display version of moc
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(151,5):                       error MSB6006: "cmd.exe" exited with code 1.
 1>
 1>Build FAILED.
 1>
 1>Time Elapsed 00:00:00.05
 ========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

这是怎么回事？我用谷歌搜索，问题似乎是 1.1.7 中的错误。解决方案是重新调整 VS 项目中的包含。也就是说，我更愿意继续使用 1.1.10 - 它只有一个月大，我确信问题出在其他地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T10:55:05.377

如果文件名或路径中有空格，就会发生这种情况。

可能有某种形式的引用的解决方法，但处理这个问题的最理智（IMO）的方法是简单地避免在项目路径和文件名中使用空格。

# php - 根据用户语言自动重定向

> ID：10460348
> 
> 赞同：-1
> 
> 时间：2012-05-05T09:03:05.370
> 
> 标签：php, redirect

**客观的**

我正在尝试根据用户语言完成自动重定向。我有一个完整的工作代码：

```
// List of available localized versions as 'lang code' => 'url' map
$sites = array(
    "da" => "http://www.fredrixdesign.com/",
    "en" => "http://en.fredrixdesign.com/"
);

// Get 2 char lang code
$lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);

// Set default language if a `$lang` version of site is not available
if (!in_array($lang, array_keys($sites)))
    $lang = 'en';

// Finally redirect to desired location
header('Location: ' . $sites[$lang]);
?> 
```

如果用户是丹麦人，这会将用户重定向到丹麦语 (da) 版本，这是主/根网站。如果用户是德语、英语、波兰语等，它将用户重定向到子域；`en.fredrixdesign.com`，这是网站的英文版本。

但是，当丹麦用户访问我的网站时，就会出现问题。位于我的 header.php 顶部的代码不断执行，这意味着它不断创建重定向，最终由于重定向过多而迫使浏览器创建错误。这是有道理的。

**问题**

我的问题是；我将如何修改上面的代码，所以它只执行一次重定向？如果它刚刚完成重定向，它将继续执行该站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:51:25.920

好吧，我敢打赌，只要仔细考虑一下，您就可以自己找到解决方案。您只需要检查当前域是否满足所需的语言。
稍微修改一下你的数组

```
$sites = array(
    "da" => "www.fredrixdesign.com",
    "en" => "en.fredrixdesign.com"
); 
```

然后为重定向添加条件

```
if ($sites[$lang] != $_SERVER['HTTP_HOST']) {
    header('Location: http://' . $sites[$lang] . '/');
    exit;
} 
```

就这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:05:02.867

您可以设置一个 cookie 值，告诉您您已经自动将用户重定向到特定语言的站点。如果该 cookie 存在，请不要再次进行重定向。您可能还希望考虑用户禁用 cookie 的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T09:09:08.023

您可以使用 GeoIP + .htaccess 来做到这一点，它真的很容易实现。

[http://www.maxmind.com/app/mod_geoip](http://www.maxmind.com/app/mod_geoip)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T09:37:38.343

像这样的东西可以解决问题（当然有很多很好的解决方案，但是对于两种语言来说，做简单的事情并在需要时进行改进是没有害处的）：

```
function redirectIfUserIsNotOnTheGoodURLBasedOnHisLanguage()
{
    // List of available localized versions as 'lang code' => 'url' map
    $sites = array(
        "da" => "http://www.fredrixdesign.com/",
        "en" => "http://en.fredrixdesign.com/"
    );

    // Get 2 char lang code
    $lang = substr($_SERVER['HTTP_ACCEPT_LANGUAGE'], 0, 2);

    // Set default language if a `$lang` version of site is not available
    if (!in_array($lang, array_keys($sites)))
        $lang = 'en';

    if (($lang == 'da' && $_SERVER['SERVER_NAME'] == 'www.fredrixdesign.com') ||    // Danish people are on the right place
        ($lang == 'en' && $_SERVER['SERVER_NAME'] == 'en.fredrixdesign.com'))       // Other people are on the right place
    {
        // no redirection
        return;
    }

    // else redirect to desired location
    header('Location: ' . $sites[$lang]);
    exit(0);
}

redirectIfUserIsNotOnTheGoodURLBasedOnHisLanguage(); 
```

# php - Charset=utf8 在我的 PHP 页面中不起作用

> ID：10460349
> 
> 赞同：2
> 
> 时间：2012-05-05T09:03:17.333
> 
> 标签：php, html, css, utf-8, character-encoding

我的字符编码有问题。每当我在浏览器中加载页面时，它都会显示如下： ![在此处输入图像描述](../Images/c37076d75df655906003018a17ca64f5.png)

所以我需要通过浏览器手动配置。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T09:05:59.993

听起来您没有将内容作为 utf-8 提供。通过设置正确的标题来做到这一点：

> ```
> header('Content-type: text/html; charset=utf-8'); 
> ```

除了确保浏览器理解之外，添加一个元标记：

> ```
> <meta http-equiv="Content-type" content="text/html; charset=utf-8" /> 
> ```

请注意，根据文本的来源，您可能还需要检查其他一些东西（数据库连接、源文件编码......） - 我在[我的一个答案中列出了很多一个类似的问题](https://stackoverflow.com/a/10444230/288773)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T09:05:38.703

正如 kraikkonen85 在[此评论](http://www.php.net/manual/es/function.mysql-set-charset.php#101165)中所述：

> 除了为 html 设置`mysql_set_charset`和添加`utf8`设置元数据之外，另一个重要但“不可预测”的原因是您的 PHP 编辑器在保存时的编码类型。例如，如果您保存 php 文件而不是“ `unicode`”或“ `ANSI`”之类的编码，正如我所经历的，您可能会注意到奇怪的字符，如正方形、问号等。
> 
> 为确保，请尝试“另存为”方法以明确查看您的 php 文件正在保存为`utf8`.

可能是因为你的内容可能不是 utf-8，你可以通过设置 header 和 meta 来设置 utf-s

```
header('Content-type: text/html; charset=utf-8');

<meta http-equiv="Content-type" content="text/html; charset=utf-8" /> 
```

# javascript - coffeescript 和 node 中的静态方法

> ID：10460354
> 
> 赞同：0
> 
> 时间：2012-05-05T09:03:39.417
> 
> 标签：javascript, node.js, coffeescript

我对使用咖啡脚本还很陌生，我有以下代码

```
eventBus = require './eventBus'                      

class Aggregate                                       
  constructor(id) ->                                  
    @_id = id                                         

  @find: (id) ->                                                              
    console.log "Find Called"
    new Aggregate(id)                                                 

  @apply: (event) ->                                                          
    @_total += event.attribute.amount                                         

  @emit: (event) ->                                                           
     EventBus.store event                                                     

module.Aggregate = Aggregate 
```

我遇到的问题是我想调用 Aggregate.find 20 ，它又会返回一个具有该 ID 的新聚合。任何关于如何让这个模块像这样工作的建议将不胜感激。

干杯迈克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:15:29.087

您的代码应该可以正常工作，只是您的构造函数中有语法错误。

改变：

```
constructor(id) -> 
```

到：

```
constructor: (id) -> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:00:26.240

将此附加到某处：

```
Aggregate.find = (id) ->                                                              
  console.log "Find Called"
  new Aggregate(id) 
```

这将是“静态”方法。

# javascript - WWAHost 不加载 XML DOM 文档 6.0

> ID：10460358
> 
> 赞同：0
> 
> 时间：2012-05-05T09:04:35.147
> 
> 标签：javascript, windows-8, windows-runtime, winjs

我正在使用 Windows8 Consumer Preview 将现有 Web 应用程序迁移到 Metro UI，该应用程序使用最新的 datajs 库 datajs.1.0.3 来使用 XML 格式的 OData。`ActiveXObject("Msxml2.DOMDocument.6.0")`调用获取 DOM Parser时，datajs 代码中会引发异常。该代码在 IE10 中运行良好。

查看日志，我可以看到以下错误：

> 无法加载具有类 ID {88D96A05-F192-11D4-A65F-0040963251E5} 的 ActiveX 插件

我知道大多数 ActiveX 控件不受支持，但是这个在受支持的列表中：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465143.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465143.aspx)

有没有人遇到过这个？如果是这样，解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T22:05:08.073

正如文章所述，不支持您尝试使用的 ActiveX 对象。

您应该改用 Windows.Data.Xml.Dom。请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.xml.dom.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.xml.dom.aspx)

# jquery - jQuery页面自动加载滚动脚本 - 需要解释

> ID：10460360
> 
> 赞同：0
> 
> 时间：2012-05-05T09:04:41.747
> 
> 标签：jquery, ajax, scroll, autoload

我无法理解脚本是如何工作的，我可以做些什么来改进它，缩小等。我还想找到一种附加按钮的方法，这将停止该功能（有点禁用自动加载内容按钮）， 你有什么主意吗？这是代码：（对我来说最重要的部分是理解代码）

```
var page = 1;
var pageLast = 1;
var stop = false;
function lastPostFunc() 
{ 

    $('div#loading').html('loading data ...') ;
    page += 1;
    if (page+1 > pageLast) {
        stop=true;
    }
    var objURL = new Object();
    window.location.search.replace(
        new RegExp( "([^?=&]+)(=([^&]*))?", "g" ),
        function( $0, $1, $2, $3 ){
        objURL[ $1 ] = $3;
        }
        );
    q = '?strona='+page
    for (var k in objURL){
        if (k != 'strona' ) 
            q += ('&'+k+'='+objURL[ k ])
    }
    data = $('<div/>').load( "/shop/category/example/" + q +' #produkt_lista',function() {
        $('.produkt .opis',$(this)).each( function() { $(this).css('display', 'none'); } );
        $('a.jt').cluetip({ cluetipClass: 'jtip', arrows: true, dropShadow: false, hoverIntent: false, sticky: false, mouseOutClose: true, showTitle: false, closeText: 'zamknij', width: 300, positionBy: 'mouse', topOffset: 0});
    });
    if (data != "") {
        $('.paginator').hide();       
        $("#produkt_lista").append(data);            
    } 
    $('div#loading').empty();
}; 

$(document).ready(function() { 

pageLast = parseInt( $('.paginator .paginate-pages').first().text().replace('Stron: ',''));
$('#produkt_lista').after( $('<div id="wczytywanie" style="display: none; font-weight: bold; font-size: 20px; line-height: 40px; color: red; margin: 20px auto; width: 300px; border: 1px solid red;"></div>') );
$(window).scroll(function(){
        if  ($(window).scrollTop()+200 > $(document).height() - $(window).height()){
           if (!stop) lastPostFunc();
        }
});
} ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:58:31.343

该脚本基本上将该`lastPostFunc()`函数绑定到`$(window).scroll()`事件。它说如果用户向下滚动到屏幕底部 200 像素，JavaScript 应该触发该函数。

该函数所做的只是显示一个加载 div，可能是模态或覆盖，然后获取下一页数据：

*   /shop/category/example/?strona=1#produkt_lista
*   /shop/category/example/?strona=2#produkt_lista
*   /shop/category/example/?strona=3#produkt_lista

..等等。然后它遍历与 CSS 类匹配的所有节点`.produkt .opis`并使用`$(this).css('display','none');`. 它应该只是 using `$(this).hide();`，但它会以任何一种方式工作。

之后，它将一个`cluetip`插件绑定到该类的所有锚点，`.jt`并传入一些不同的插件参数。我想这样你就可以用鼠标悬停它们，光标附近会出现一些精美的工具提示。

最后它检查 data 是否不为空并隐藏 paginator 元素（不知道为什么）并将新获取的 HTML 包装的数据附加到内部的现有数据中`#produkt_lista`。

# sql-server-2008 - 关于更新列的 SQL Server 查询

> ID：10460369
> 
> 赞同：1
> 
> 时间：2012-05-05T09:06:45.653
> 
> 标签：sql-server-2008

我之前也问过一个类似的问题，但发布一个新问题，因为我不想混淆其他成员，并且还有一个额外的专栏。

我正在寻找的是更新列`ItemActual`。这需要更新与`ItemValue`最新`CurrentTime`的差异，`StartTime`如果有的话。

如果除了当前行之外没有其他相同的条目`StartTime`，它需要是它`ItemValue`本身。仅对具有相同名称的项目进行比较。

例如，Rownum 283，`ItemActual = 347013`（因为没有其他行具有相同的`StartTime`）。这也适用于第 235 行，即`ItemActual = 1086054.00`

对于第 190 行，这需要是`664031.00 - 533023.00 (comparing with row 145) = 131008` 但是对于第 10 行，这将是`532023.00`，因为之前没有相同项目的相同条目`StartTime`。

```
Rownum  Name  ItemValue      CurrentTime        StartTime
 283    ABC     347013.00     3/05/2012 16:01   29/04/2012 6:29
 235    ABC    1086054.00    26/03/2012 14:05    7/03/2012 21:18
 190    ABC     664031.00    13/02/2012 13:42   29/01/2012 6:39
 145    ABC     533023.00     7/02/2012 14:01   29/01/2012 6:39
 100    ABC     532023.00     7/02/2012 13:33   29/01/2012 6:39
  55    ABC     532023.00     7/02/2012 12:52   29/01/2012 6:39
  10    ABC     532023.00     7/02/2012 12:51   29/01/2012 6:39
 310    DEF     351012.00     3/05/2012 16:01   29/04/2012 6:29
 261    DEF    1339066.00    26/03/2012 14:05    7/03/2012 21:18
 215    DEF     785034.00    13/02/2012 13:42   29/01/2012 6:39
 170    DEF     620026.00     7/02/2012 14:01   29/01/2012 6:39 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:49:31.440

你可以尝试这样的事情：

```
;WITH PartData AS 
(     
    SELECT
        RowNum, Name, ItemValue, CurrentTime, StartTime,
        RX = ROW_NUMBER() OVER(PARTITION BY Name,StartTime ORDER BY CurrentTime DESC)
    FROM dbo.YourTable
)
SELECT     
    p1.RowNum, p1.ItemValue, p1.CurrentTime, p1.StartTime, 
    RowNumComparedTo = p2.RowNum, 
    ItemActual = CASE 
                    WHEN p2.RX IS NULL THEN p1.ItemValue
                    ELSE p1.ItemValue - p2.ItemValue
                 END
FROM PartData p1
LEFT OUTER JOIN PartData p2 ON p1.StartTime = p2.StartTime 
                               AND p1.Name = p2.Name 
                               AND p2.RX = p1.RX + 1 
```

我得到这样的输出：

```
RowNum  ItemValue   CurrentTime       StartTime        RowNumComparedTo  ItemActual
 190     664031.00  2012-02-13 13:42  2012-01-29 06:39    145            131008.00
 145     533023.00  2012-02-07 14:01  2012-01-29 06:39    100              1000.00
 100     532023.00  2012-02-07 13:33  2012-01-29 06:39     55                 0.00
  55     532023.00  2012-02-07 12:52  2012-01-29 06:39     10                 0.00
  10     532023.00  2012-02-07 12:51  2012-01-29 06:39    NULL           532023.00
 215     785034.00  2012-02-13 13:42  2012-01-29 06:39    170            165008.00
 170     620026.00  2012-02-07 14:01  2012-01-29 06:39    NULL           620026.00
 235    1086054.00  2012-05-03 14:05  2012-03-07 21:18    NULL          1086054.00
 261    1339066.00  2012-03-26 14:05  2012-03-07 21:18    NULL          1339066.00
 283     347013.00  2012-05-03 16:01  2012-04-29 06:29    NULL           347013.00
 310     351012.00  2012-05-03 16:01  2012-04-29 06:29    NULL           351012.00 
```

该解决方案基本上是这样做的：

*   它创建一个 CTE（公用表表达式）并“分区”您的数据`Name,StartTime`并按这些行排序`CurrentTime DESC`- 因此每个组的最新条目`Name,StartTime`将获得 1 的 RX（行索引）

*   然后它将 CTE 与自身连接起来，移动一个 RX - 所以我将 RX = 1 与 RX = 2（如果存在）等进行比较。

*   如果存在“移位”行，`ItemValue`则返回值的差异`ItemActual`- 否则返回`ItemValue`来自主行的

我希望这能解决你的问题

# c# - 如何在 asp:checkboxlist 中获取所选项目的数量

> ID：10460378
> 
> 赞同：8
> 
> 时间：2012-05-05T09:08:43.367
> 
> 标签：c#, asp.net, visual-studio

我有一个复选框列表控件

```
<asp:CheckBoxList ID="chkselectedItems" Font-Size="12px" runat="server"> 
 </asp:CheckBoxList> 
```

我在上面动态创建了列表项。如果我从复选框列表中选中了多个项目，我如何使用 asp.net 获取所选项目数

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-05T10:31:12.360

使用这一行代码：

```
int selectedCount = chkselectedItems.Items.Cast<ListItem>().Count(li => li.Selected); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T09:12:49.823

**编辑**

```
int numSelected = 0;
foreach (ListItem li in chkselectedItems.Items)
{
if (li.Selected)
{
numSelected = numSelected + 1;
}
}
Response.Write("Total Number Of CheckBoxes Selected:");
Response.Write(numSelected); 
```

**预**

```
public string[] CheckboxListSelections(System.Web.UI.WebControls.CheckBoxList list)
{
 ArrayList values = new ArrayList();
 for(int counter = 0; counter < list.Items.Count; counter++)
 {
  if(list.Items[counter].Selected)
  {
   values.Add(list.Items[counter].Value);
  }    
 }
 return (String[]) values.ToArray( typeof( string ) );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T09:15:57.767

我们将遍历复选框列表并使用计数器变量来计算所选项目。对于复选框列表中的每个项目，如果选中项目，我们将向计数器变量 selCount 添加 1

```
int selCount = 0;   

for(int i= 0; i< chklst.Items.Count; i++) 
  if(chklst.Items[i].Selected)
      selCount++; 
```

// 现在 selCount 将包含所选项目的计数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-02T06:09:44.680

**使用 Linq**

```
 var count=  chkmenuitemdef.Items.Cast<ListItem>().Where(c => c.Selected).Count(); 
```

# node.js - 显示没有 layout.jade 文件的部分

> ID：10460382
> 
> 赞同：3
> 
> 时间：2012-05-05T09:09:10.377
> 
> 标签：node.js, layout, express, pug

我使用 layout.jade 作为所有部分的模板。layout.jade 包括页眉、页脚、侧边栏等，部分是正文中显示的内容。

现在我已经用 iframe 实现了一个灯箱，以显示其中的一个部分。问题是我不希望在灯箱内显示页眉、页脚等，只显示部分玉文件。

在这种情况下有没有办法排除 layout.jade ？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T10:54:26.027

是的，方法如下：

```
res.render('template', { layout: false /* ... other parameters */ }); 
```

请参阅[有关视图渲染的 Express 文档](http://expressjs.com/guide.html#view-rendering)。您还可以指定不同的布局。

# mysql - 查询：按字母顺序计算名称

> ID：10460383
> 
> 赞同：2
> 
> 时间：2012-05-05T09:09:22.597
> 
> 标签：mysql

我有一张`voter`包含大量数据的表。像

```
Voter_id  name      age  
1         san       24  
2         dnyani    20  
3         pavan     23   
4         ddanial   19  
5         sam       20   
6         pickso    38 
```

我需要`voter_name`按字母顺序显示所有内容并计算它们。像

```
 name        
 san  
 sam  
 s...
 s...     
 dnyani  
 ddanial
 d...    
 pavan             
 pickso
 p..
 p.. 
```

我尝试使用`count(voter_name)`or `GROUP BY`。
但两者都不适合我.....假设表包含 50 个选民的详细信息。
以人名开头的人数`A=15,b=2, c=10,y=3`等等。
然后如何计算和显示'A'人的前15条记录，'B'人的下2条记录等等..
给我任何参考或提示..
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-07T08:23:01.620

就这么简单，

```
SELECT SUBSTRING(name,1,1) as ALPHABET, COUNT(name) as COUNT 
FROM voter GROUP BY SUBSTRING(name,1,1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T09:11:04.580

此订单仅命名：

```
SELECT `name` FROM `voter` ORDER BY `name` ASC 
```

这会计算第一个字母的每次出现并将它们组合在一起，
例如：

```
Letter  COUNT
------ -------
  A      15
  B      2
  C      10
  y      3

SELECT SUBSTR(`name`,1,1) GRP, COUNT(`name`) FROM `voter` WHERE
SUBSTR(`name`,1,1)=SUBSTR(`name`,1,1) GROUP BY GRP ORDER BY GRP ASC 
```

干得好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T09:34:23.030

如果您需要按升序排列的名称及其计数，则可以使用：

```
SELECT 
    name, COUNT(*) AS name_count 
FROM 
    voter 
GROUP BY 
    name 
ORDER BY 
    name ASC 
```

这将给出类似的输出

```
name    name_count
------------------
albert          15
baby             6
... 
```

如果您需要显示所有记录及其计数，则可以使用：

```
SELECT 
    voter_id, name, age, name_count
FROM 
    (
        SELECT 
            name, COUNT(name) AS name_count 
        FROM 
            voter 
        GROUP BY 
            name
    ) counts
    JOIN actor 
    USING (name) 
ORDER BY 
    name 
```

你得到的输出为：

```
voter_id   name     age   name_count
------------------------------------
       6   abraham   26            2
      24   abraham   36            2
       2   albert    19            1
       4   babu      24            4
      15   babu      53            4
      99   babu      28            4
      76   babu      43            4 
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T09:55:44.890

在这里查看`SUBSTRING`MySQL 的功能

```
http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring 
```

我们可以使用子查询来实现我们的结果。

所以用那个，这个怎么样

```
SELECT voter_id, name, age, COUNT(*) AS alphabet 
FROM 
    (SELECT voter_id, name, age, SUBSTRING(name, 1, 1) AS first_letter FROM voter) 
AS voter 
GROUP BY first_letter 
ORDER BY first_letter ASC 
```

# deployment - Windows Azure 运行时组件有哪些保证？

> ID：10460385
> 
> 赞同：0
> 
> 时间：2012-05-05T09:09:46.897
> 
> 标签：deployment, azure, components

Windows Azure 实例将提供的最低保证功能列表是什么？

例如，我想在我的 Azure 角色中使用 Powershell。目前所有 Windows Azure 实例都具有 Powershell。如果微软突然决定默认停止部署 Powershell 怎么办？

是否有一个我可以假设在 Windows Azure 实例中无条件可用的有保证的组件和功能的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T03:56:20.520

对于 Windows Azure 中当前可用的功能，我们不做任何保证。显然，微软作为云游戏的后来者和弱者，不太可能会削减功能而只会增加功能，但肯定不能保证。我们确实知道 Azure 实例正在运行 Win2008，您可以将它们锁定到某个补丁版本，这样就不会删除任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:34:09.903

有趣的帖子，不确定 MSFT 是否有提供的完整列表（我确实记得在一般发布的早期就讨论过这个问题），很高兴看到一个列表。（*咳嗽马克 russinovich！）

回复：Powershell，它的发展速度并不快，它是 Windows o/s 的核心租户，我可以赌上我的房子。

启动任务是确保您在 Azure 中拥有所需内容的理想偏好，例如，我在启动任务期间将 Java JVM 安装在盒子（VM 角色）上，它不是天真地存在，而是当我的代码运行时！

[http://www.davidaiken.com/2011/01/19/running-azure-startup-tasks-as-a-real-user/](http://www.davidaiken.com/2011/01/19/running-azure-startup-tasks-as-a-real-user/)

# java - 接口定义和泛型。这应该有不同的定义吗？

> ID：10460391
> 
> 赞同：0
> 
> 时间：2012-05-05T09:10:29.997
> 
> 标签：java, oop, design-patterns, generics

我有一堂课`Employee`和一堂课`Building`。
从类层次结构的角度来看，这些类彼此不相关。
我需要处理一堆`Employee`和`Building`对象，它们的结果最终会出现在不同的列表中。
所以我有和接口，例如

```
public interface Processor{  
  public void process(String s, List<?> result);  
} 
```

这个想法是字符串`s`携带与 an`Employee`或 a相关的信息，并且经过一些处理后的实现将对象或对象`Building`添加到结果列表中。一个 is和一个 有 2 种实现。 在代码中的某处，我得到了对其中任何一个的引用，然后我将 a或 a传递给该方法。 `Employee``Building`
`Processor``EmployeeProcessor``BuildingProcessor`
`List<Employee>``List<Building>``process`

问题是代码无法编译。
当我在里面做例如`EmployeeProcessor`：`result.add(new Employee(a,b,c,d));`
我得到：

> List 类型中的方法 add(capture#2-of ?) 不适用于参数

我想我可以理解这个问题，但我不想将界面更改为：

```
public interface Processor{  
  public process(String s, List result);  
} 
```

即不指定列表类型。
有没有办法解决这个问题？接口定义错了吗？
注意：此接口是`Command`模式实现的一部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:56:46.243

这就是我的想法。

```
interface Processor<T>{
    public void process(String s, List<T> result);
}

class BuildingProcessor implements Processor<Building>{
    @Override
    public void process(String s, List<Building> result) {
        result.add(new Building());
    }
}

class EmployeeProcessor implements Processor<Employee>{
    @Override
    public void process(String s, List<Employee> result) {
        result.add(new Employee());
    }
} 
```

仅供参考，您可以进一步限制类型。例如，如果`Building`和`Employee`类都实现了，比如说`Processable`，，那么你可以做`interface Processor<T extends Processable>`

# asp.net - NHibernate：Fluent 中的不正确映射导致在检索所有查询完成时结果重复

> ID：10460392
> 
> 赞同：0
> 
> 时间：2012-05-05T09:10:30.900
> 
> 标签：asp.net, nhibernate, mapping, duplicates, fluent-nhibernate-mapping

简而言之：查询“父母”表结果“父母”+来自“孩子”的记录。“孩子”对“父母”有 FK，因此我的重复项与“孩子”中的 FK 数量一样多。我在 ASP.NET MVC3 项目中使用 Fluent.NHibernate。

**所以，DB看起来像这样**

```
TABLE parents
***id
***system_name

TABLE children
***id
***custom_name
***parent_id

FK: parent_id === "FK_parent_id_to_id_in_parents" 
```

**模型：**

```
public class Parent
{
   public virtual int Id { get; set; }
   public virtual string SystemName { get; set; }
}

public class Child: Parent
{
   public override int Id
   {
      get
      {
             return base.Id;
       }
      set
      {
             base.Id = value;
      }
   }
   public virtual string CustomName
   {
      get
      {
             return _CustomName != null ? _CustomName : base.SystemName;
      }
     set
     {
            _CustomName = value;
     }
   }

    public virtual Parent ParentId { get; set; }
    private string _CustomName = string.Empty;
} 
```

**映射：**

```
public class ParentMapper: ClassMap<Parent>
{
    Table("parents");
    Id(x => x.Id).GeneratedBy.Native();
    Map(x => x.SystemName, "system_name").Not.Nullable();
}

public class ChildMapper: ClassMap<Child>
{
    Table("children");
    Id(x => x.Id).GeneratedBy.Native();
    Map(x => x.DisplayName, "display_name");
    References(x => x.ParentId).Column("parent_id").Cascade.None().ForeignKey("FK_parent_id_to_id_in_parents");
} 
```

**询问：**

```
using(ITransaction tr = session.BeginTransaction())
{
    List<Parent> lp = new List<Parent>(session.CreateCriteria(typeof(Parent)).List<Parent>());
    tr.Commit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:35:35.673

这对我来说似乎不正确，我不确定你为什么在你的孩子班上覆盖 Get Id。你回来`parent.id`干嘛`child.id`？

```
 public override int Id
   {
      get
      {
             return base.Id;
       }
      set
      {
             base.Id = value;
      }
   } 
```

应该是吧？

```
public int id { get; set;} 
```

如果您确实想要这个，那么您还需要在您的子类中覆盖以下内容，以便 NHibernate 知道什么是唯一的子记录。

```
public override int GetHashCode() 
override bool Equals(object obj) 
```

请参阅[此处](https://stackoverflow.com/questions/7620405/c-override-gethashcode-what-does-this-code-do)或[此处](http://devlicio.us/blogs/anne_epstein/archive/2009/11/20/nhibernate-and-composite-keys.aspx)了解更多信息

# android - 从 ListView 的 onItemClickListener 从数据库中获取数据

> ID：10460393
> 
> 赞同：0
> 
> 时间：2012-05-05T09:11:03.303
> 
> 标签：android, database, sqlite, android-listview

**已解决**

解决方法见下文

* * *

我有一个`ListView`带有自定义适配器的扩展`CursorAdapter`。当用户点击`ListView`我想打开一个新项目`Activity`（从`openDigitalBusinessCardActivity`方法启动）时，新`Activity`项目基于`ListView`被点击的特定项目。新`Activity`的需要数据库中的字段`merchantID`，所以我需要访问它，然后传递给`Activity`我的`Intent`.

但是，我无法根据`ListView`点击侦听器的反馈来了解如何访问数据库中的正确数据。

`Eclipse`给我`Bad request for field slot`错误。我的听众代码如下：

```
 list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
          // When clicked, show a toast with the TextView text
          Toast.makeText(getApplicationContext(), "Click registered!",
              Toast.LENGTH_SHORT).show();

          db = myDbHelper.getReadableDatabase();

          //Cursor cur = (Cursor) adapter.getCursor();            
          //cur.moveToPosition(position);
          Cursor cur = (Cursor) parent.getItemAtPosition(position);
          //Cursor cur = (Cursor)((MyCustomCursorAdapter) list.getAdapter().getItem(position));
          int merchantID = cur.getInt(cur.getColumnIndex("merchantID")); //Get the merchantID

          db.close();

         openDigitalBusinessCardActivity(merchantID);             
        }
      }); 
```

我的数据库创建代码是这样的：

```
private static final String DATABASE_CREATE = 
                "create table " + TABLE_SCORECARD + "(" 
                + COLUMN_MERCHANTID + " integer primary key, " 
                + COLUMN_MERCHANTNAME + " text not null, "
                + COLUMN_MERCHANTTAGLINE + " text not null, "
                + COLUMN_CURRENTSCORE + " Integer, "
                + COLUMN_FREEBIEPOINT + " Integer, "
                + COLUMN_CAMPAIGNID + " Integer, "
                + COLUMN_LISTPOSITION + " Integer);"; 
```

**- -更新 - -**

我在表中添加了一个`_id`列，现在看起来我的`_id`from查询`onItemClick`没有返回任何内容，因为我对`cur.moveToFirst()`返回的测试`false`。所以`onItemClic`k 没有返回有效的表行号。

```
list = getListView();

   list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
          // When clicked, show a toast with the TextView text
          Toast.makeText(getApplicationContext(), "Click registered!",
              Toast.LENGTH_SHORT).show();

          db = myDbHelper.getReadableDatabase();

          //Cursor cur = (Cursor) adapter.getCursor();            
          //cur.moveToPosition((int) id);
          //Cursor cur = (Cursor) parent.getItemAtPosition((int) id);
          //Cursor cur = (Cursor)((MyCustomCursorAdapter) list.getAdapter().getItem(position));
          Cursor cur = db.rawQuery("select merchantID from scoreCard where _id = "+id,null);
          if(cur.moveToFirst()) {
              //int merchantID = cur.getInt(cur.getColumnIndex("merchantID")); //Get the merchantID
              Toast.makeText(getApplicationContext(), "cur.moveToFirst returned true",
                      Toast.LENGTH_SHORT).show();
          }           

          cur.close();
          db.close();

         // openDigitalBusinessCardActivity(merchantID);              
        }
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:15:42.483

在`Cursor`基于适配器的情况下，您在回调中获得`id`的行是参数。你应该使用它。`onItemClick``id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T06:00:02.077

**解决了**

将_id字段添加到我的表中，然后将*onItemClick提供的**长id**字段*传递给我的方法*openDigitalBusinessCardActivity(id);* . *将id*传递给*openDigitalBusinessCardActivity(id)*调用的意图；. 然后在新活动中使用*id来查询数据库。*

 ***我的桌子：

```
private static final String DATABASE_CREATE = 
                "create table " + TABLE_SCORECARD + "(" + KEY_ROWID +" integer primary key autoincrement, "
                + COLUMN_MERCHANTID + " Integer, " 
                + COLUMN_MERCHANTNAME + " text not null, "
                + COLUMN_MERCHANTTAGLINE + " text not null, "
                + COLUMN_CURRENTSCORE + " Integer, "
                + COLUMN_FREEBIEPOINT + " Integer, "
                + COLUMN_CAMPAIGNID + " Integer, "
                + COLUMN_LISTPOSITION + " Integer);"; 
```

在我的 ListActivity 中：

```
list = getListView();

   list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
        Toast.makeText(getApplicationContext(),
            "Click ListItem Number " + id, Toast.LENGTH_LONG)
            .show();

        openDigitalBusinessCardActivity(id);
    }
   }); 
```***

# objective-c - 托管对象的引用计数

> ID：10460400
> 
> 赞同：0
> 
> 时间：2012-05-05T09:12:23.353
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext, reference-counting, retaincount

我有一个类`A`（NSManagedObject 的子类），它有一个类的属性`B`（也是 NSManagedObject 的子类），该属性不是`@synthesize`，在我的模型中和`@dynamic`之间没有关系，我只想在他（） 活着。 （当我第一次从数据库中获取对象时，他的属性为空） `A``B``A``B``A`
`A``B`

我重写了`B`属性 getter，所以当第一次调用时，他`B`将从 db 中获取对象。

现在我需要保留 fetch 结果`B`吗？
我想我听说保留 NSManagedObjectContext 管理的对象不是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:18:40.000

保留没问题`NSManagedObject`- 继续做吧。唯一需要注意的是，如果您持有一个对象并且它被删除。然后你有一个对象的引用，但如果你试图读取或设置它的任何值，你会得到一个异常。因为这很难更新，所以当您使用 Core Data 关系时，Core Data 会为您删除传播。

因此，如上所述：使用关系。A 和 B 之间有多个关系并没有错。您也只需要具有相应的逆关系即可。

例如，您可以执行以下操作：

```
Person
  favoriteBook (to-1, inverse is favoriteByPersons)
  authoredBooks (to-many, inverse is authors)

Book
  authors (to-many, inverse is authoredBooks)
  favoriteByPersons (to-many, inverse is favoriteBook) 
```

让 Core Data 为您完成繁重的工作。关系管理是 Core Data 真正擅长的事情之一。不要试图自己复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:16:04.957

您应该清楚地使用 A 和 B 之间的一对一**关系**。这就是 Core Data 为您管理的内容。它更简单、更健壮，而且您不必担心内存问题。

# python - 搜索数据库

> ID：10460405
> 
> 赞同：1
> 
> 时间：2012-05-05T09:12:46.360
> 
> 标签：python, database, search

为了进一步研究 python 中的数据库使用，我根据 Bryan Moyles 的优秀示例提出了以下代码：

```
from os   import system as cmd
from time import sleep  as sleep
try:
    from sqlite3 import dbapi2 as sqlite
except ImportError:
    from pysqlite2 import dbapi2 as sqlite

class search_db:
    def __init__(self, db, name):
        self.db = db_connection
        self.name = name
        self.dbc = self.db.cursor()

    def __getitem__(self, item):
        self.dbc.execute("select * from %s limit %s, 1" % (self.name, item))
        return self.dbc.fetchone()

def search():
    customer_id  = []
    customer_ids = search_db(db_connection, "customers")
    for i in range(10000):
        if not "None" in str(customer_ids[i]): customer_id.append(customer_ids[i])
    return customer_id

## init ##
db_name = 'customers'
db_connection = sqlite.connect('program.db')
db_curs = db_connection.cursor()

search() 
```

当然，这没什么了不起的，我知道我可能可以再优化一点；但正如您所看到的，我一直在努力弄清楚如何搜索数据库。我设法在数据库中检索到包含信息的条目，从而提取出一个条目号。我正在考虑使用 if 循环在附加的列表值中搜索“GGS-*编号*”条目，然后使用正则表达式提取行号 - 然后打印与 GGS 编号适用的客户相关的信息。有没有人知道如何以更好的方式做到这一点？另外，我有一个 for i in range(10000)，有没有更优化的形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:40:59.390

如果这都是为了检索“客户”表的内容，那么你做错了。SELECT 会给你一个没有间隙的表；因此，如果使用的唯一 ID 是 10 和 101，则您的查询结果的长度为 2，并包含第 0 行和第 1 行中的两条现有记录。看起来您正在尝试跳过空记录，但没有任何记录.

但是你让这太复杂了；你选择了错误的例子来模仿。您所运行的 SELECT 查询返回表中的第 n 行，包装到一个类中，该类允许您假装您正在处理一个非常慢的数组。抛弃它并重新开始。

如果您想要`customers`表的全部内容，请使用单个查询并使用以下命令检索它们`fetchall()`：

```
import sqlite3
conn = sqlite3.connect('program.db')
curs = conn.cursor()
ro = curs.execute('select * from customers')
customers = ro.fetchall() 
```

如果您需要获取特定记录，请让数据库通过`WHERE`在查询中添加子句来处理它。您几乎总是按 ID（或其他属性）而不是按它们在表中的位置来检索记录。

我的建议：尽量减少 python/sqlite 脚手架。建立一个连接，运行一个查询，一个一个地或者一起获取结果。就这样。并`curs.rowcount`在获取它们之前找出有多少结果行。其他一切都可以通过适当的 SQL 命令更简单有效地完成。所以请阅读 SQL，而不是 python 的库。

# c - 如何限制fifo的用户数？

> ID：10460408
> 
> 赞同：0
> 
> 时间：2012-05-05T09:12:51.040
> 
> 标签：c, unix, fifo

我有两个程序——其中一个正在生成一些数据并将它们放入 FIFO，另一个从 FIFO 中读取这些数据并对其进行处理。如何限制阅读节目的数量？我考虑过限制 FIFO 的大小或检查里面有多少数据，但我没有发现任何有趣的东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:21:46.367

fifo 管道是一个系统文件，因此您可以控制对它的访问的唯一方法是通过通常的方式（所有权和权限）。但也见`man flock`。文件锁定在 linux 上是不可强制执行的，也就是说，你可以忽略它，但是如果你实现你的读者服从文件锁定，那么问题就解决了。

所以：如果问题是*不需要的和侵入性*的访问，请使用所有权和权限来防止这种情况。否则，使用文件锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:19:31.630

使用 (f)stat() 检查 FIFO 的链接计数。如果超出您决定的某个限制，让阅读程序拒绝打开它？

# java - JSF 2.0 中不显示 PrimeFaces 饼图

> ID：10460410
> 
> 赞同：3
> 
> 时间：2012-05-05T09:13:03.047
> 
> 标签：java, jsf-2, primefaces

我想在我的 JSF 应用程序中显示 primefaces 饼图。

这是我的 xhtml 页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<f:view contentType="text/html">
    <ui:include src="blocks/head.xhtml"/>

    <body>
    <ui:include src="blocks/header.xhtml"/>

        <p:pieChart id="sample"
                    value="#{pieChartBean.pieModel}"
                    legendPosition="w"
                    title="Sample Pie Chart"
                    style="width:400px;height:300px"/>

    <ui:include src="blocks/footer.xhtml"/>
    </body>
</f:view>
</HTML> 
```

这是我的豆：

```
@ManagedBean(name = "pieChartBean")
@ViewScoped
public class PieChartBean implements Serializable {

   private PieChartModel pieModel;

    public PieChartBean() {
        createPieModel();
    }

    public PieChartModel getPieModel() {
        return pieModel;
    }

    private void createPieModel() {
        pieModel = new PieChartModel();

        pieModel.set("Brand 1", 540);
        pieModel.set("Brand 2", 325);
        pieModel.set("Brand 3", 702);
        pieModel.set("Brand 4", 421);
    }

} 
```

我将 bean 放在 ViewScope 中，我还尝试了 Session 和 Request 范围。问题是图表没有显示在页面中。任何想法问题出在哪里？

编辑：奇怪的是，我试图在同一个 xhmtl 页面中添加一些其他组件，我添加了`<p:spinner/>`它并且它有效。它显示在我的 JSF 页面中，但图表没有。

编辑2：

萤火虫：

```
<div id="sample" style="width:400px;height:300px"></div>
<script id="sample_s" type="text/javascript">
$(function(){PrimeFaces.cw('PieChart','widget_sample',{id:'sample',data:[[["Brand 1",540],["Brand 2",325],["Brand 3",702],["Brand 4",421]]],title:'Sample Pie Chart',legend:{show:true,renderer: $.jqplot.EnhancedLegendRenderer,location:'w'},axes:{xaxis:{},yaxis:{}}},'charts');});
</script> 
```

如果我使用 firebug 查看生成的 HTML 源代码，则会生成上面显示的代码，但在浏览器中没有显示任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T18:19:44.243

您已经在评论中告诉您您已经解决了问题，只是在回答中总结它以便可以关闭：

问题是您已经导入了外部 jQuery.js 文件。

*   不要导入自己的 jQuery 库，它会与绑定 primefaces 的库发生冲突。使用`jQuery`而不是`$`那时。
*   如果您使用的是旧版本的 primefaces（如 2.2.1），请查看此答案：[jQuery 与 primefaces 冲突](https://stackoverflow.com/a/5510507/1317692)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:42:26.523

我有同样的问题，我尝试通过在 .xhtlm 中添加这一行来解决它

```
<h:head>
    <title>Graphe Prime Faces </title>
</h:head> 
```

当我看到你的代码时，你和我一样有同样的错误，只需添加你的页面 .xhml 这个

代码将在您的浏览器中显示 shart pie

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T16:12:57.037

尝试将标签“p:pieChart”放入面板标签 p:panel

```
 <p:panel>
                <p:pieChart id="sample"
                value="#{pieChartBean.pieModel}"
                legendPosition="w"
                title="Sample Pie Chart"
                style="width:400px;height:300px"/>
                </p:panel> 
```

这对我有用。

# java - Intellij idea 无法解析包含美元的类

> ID：10460411
> 
> 赞同：0
> 
> 时间：2012-05-05T09:13:13.320
> 
> 标签：java, scala, intellij-idea, scala-java-interop

这里的问题：我有包含已编译的 scala 代码的 jar。在罐子里我看到

Step.class Step$class.class

两者都是合法的java类。

但是，当我尝试在 Intellij Idea java 项目中使用 Step$class 时，它会显示：“无法解析符号 Step$class”。但是代码是用 maven 编译的，所以我认为问题出在 IDE 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:47:09.390

Scala traits can contain implementations, unlike Java interfaces. `scalac` compiles this into an interface and an implementation class:

```
 ~/code/scratch/20120505 cat trait.scala 
package test

trait T {
    def a = println("foo")
}
  ~/code/scratch/20120505 scalac210 -d . trait.scala 

  ~/code/scratch/20120505 javap -classpath . test/T
Compiled from "trait.scala"
public interface test.T extends scala.ScalaObject{
    public abstract void a();
}

  ~/code/scratch/20120505 javap -classpath . test/T\$class
Compiled from "trait.scala"
public abstract class test.T$class extends java.lang.Object{
    public static void a(test.T);
    public static void $init$(test.T);
} 
```

The IntelliJ Scala plugin does not expose the implementation class to Java code. It's not really a good idea to use this directly, as you are relying on an implementation detail of the Scala compiler.

You should invoke the corresponding methods on a subclass of the trait. You'll have to write that in Scala, though.

More info: [How are Scala traits compiled into Java bytecode?](https://stackoverflow.com/questions/2557303/how-are-scala-traits-compiled-into-java-bytecode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:37:29.690

Ups，愚蠢的我，我刚刚使所有缓存和重新导入的 jar 无效，现在它得到了解决。

# jquery - 数据表行分组 - 如何为每个组添加行数并展开/折叠所有

> ID：10460421
> 
> 赞同：12
> 
> 时间：2012-05-05T09:15:02.940
> 
> 标签：jquery, datatables, grouping

我正在使用 Datatables 可折叠/可扩展分组。 [http://jquery-datatables-row-grouping.googlecode.com/svn/trunk/collapsibleGroups.html](http://jquery-datatables-row-grouping.googlecode.com/svn/trunk/collapsibleGroups.html)

我已经对其进行了配置，以便所有组都在初始视图中折叠。

我真的很想在组标题中添加行数（每组的行数），以使行分组更具信息性。它会让用户在点击展开组时可以期待多少额外的信息。

添加展开/折叠所有按钮也非常有用。

任何人都可以帮助找到添加这些功能吗？

我已经设置了一个 jsfiddle 来展示我想要完成的事情：http: [//jsfiddle.net/lbriquet/4Rkb3/36/](http://jsfiddle.net/lbriquet/4Rkb3/36/)

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T09:30:20.993

```
 $(document).ready(function () {
                $('#example').dataTable({
                    "bLengthChange": false,
                    "bPaginate": false,
                    "bJQueryUI": true
                }).rowGrouping({
                    bExpandableGrouping: true,
                    bExpandSingleGroup: false,
                    iExpandGroupOffset: -1,
                    asExpandedGroups: [""]
                });

                GridRowCount();
            });

            function GridRowCount() {
                $('span.rowCount-grid').remove();
                $('input.expandedOrCollapsedGroup').remove();

                $('.dataTables_wrapper').find('[id|=group-id]').each(function () {
                    var rowCount = $(this).nextUntil('[id|=group-id]').length;
                    $(this).find('td').append($('<span />', { 'class': 'rowCount-grid' }).append($('<b />', { 'text': rowCount })));
                });

                $('.dataTables_wrapper').find('.dataTables_filter').append($('<input />', { 'type': 'button', 'class': 'expandedOrCollapsedGroup collapsed', 'value': 'Expanded All Group' }));

                $('.expandedOrCollapsedGroup').live('click', function () {
                    if ($(this).hasClass('collapsed')) {
                        $(this).addClass('expanded').removeClass('collapsed').val('Collapse All Group').parents('.dataTables_wrapper').find('.collapsed-group').trigger('click');
                    }
                    else {
                        $(this).addClass('collapsed').removeClass('expanded').val('Expanded All Group').parents('.dataTables_wrapper').find('.expanded-group').trigger('click');
                    }
                });
            };

// ------------ Css -------------------------//
       .rowCount-grid
        {
            float: right;
            font-size: 15px;
            color: Red;
            padding-right: 250px;
        } 
```

# windows - 对话框右上角的 CToolBar

> ID：10460422
> 
> 赞同：0
> 
> 时间：2012-05-05T09:15:05.813
> 
> 标签：windows, visual-c++, mfc

我正在编写一个带有工具栏的 MFC Document-View 应用程序。我想在大型机窗口的右上角添加一个工具栏。目前我正在使用下面的代码来设置工具栏

```
if (!m_wndToolBar.CreateEx(this, TBSTYLE_FLAT, WS_CHILD | WS_VISIBLE | CBRS_ALIGN_TOP | CBRS_BORDER_RIGHT
    | CBRS_GRIPPER | CBRS_TOOLTIPS | CBRS_FLYBY | CBRS_SIZE_DYNAMIC) ||
    !m_wndToolBar.LoadToolBar(IDR_MAINFRAME))
{
    TRACE0("Failed to create toolbar\n");
    return -1;      // fail to create
} 
```

上面的代码将在主机的左上角创建收费栏。我想把它从左角移到右角。我希望工具栏位于右上角。

MFC中有选项可以在右侧、左侧、顶部和底部设置工具栏。但是没有选项可以将其设置在右上角

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T14:40:47.633

您可以在现有工具栏的左侧创建另一个工具栏，并将其留空。将其调整为剩余的任何空间。

抱歉，自从我使用工具栏提供任何详细信息以来已经太久了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:23:17.063

据我所知，唯一的方法是在中间添加虚拟按钮并将按钮移动到最后。

```
 LPTBBUTTON  newbutton=NULL;
    newbutton=(LPTBBUTTON)calloc(20,sizeof(TBBUTTON));
    int i=0;

    for(i=0;i<20;i++)
    {

        newbutton[i].iBitmap=-1;// for dummy button
        newbutton[i].idCommand=1222;
        newbutton[i].fsState=TBSTATE_ENABLED;
        newbutton[i].fsStyle=TBSTYLE_BUTTON; //TBSTYLE_SEP;
        newbutton[i].iString=-1;

     }
     m_wndToolBar.GetToolBarCtrl().AddButtons(20,newbutton) // this will add 20 new buttons 
     m_wndToolBar.GetToolBarCtrl().MoveButton(1,20);// This will move button from left to right 
```

但是这个模型中唯一的问题是调整按钮来处理最大化选项。需要处理最大化按钮按下并将按钮增益向右移动。

如果有任何选择，请告诉我。谢谢

# c++ - C++ - 带有返回模板类型的方法的模板类

> ID：10460424
> 
> 赞同：1
> 
> 时间：2012-05-05T09:15:14.293
> 
> 标签：c++, templates, methods, return-type

我发现了一些关于模板和方法的主题。但我无法弄清楚它在我的场景中是如何应用的。

```
template <class T>
class SimpleLinkedList {} 
```

假设这是我的模板类，它包含方法：

```
LinkedNode<T> * next(){}; 
```

其中 LinkedNode 也是一个模板，并使用 SimpleLinkedList 模板中的 T 类。

抛出的错误是：

```
Member reference base type "LinkedNode<T>" is not a struct or union. 
```

现在我知道什么是结构或联合，但我不知道为什么我的方法是错误的。

**编辑**

错误似乎是完全不同的东西。非易失性存储器。

谢谢黛米。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:23:02.473

可能您`LinkedNode`在`SimpleLinkedList`. 您可以尝试删除`<T>`. `LinkedNode<T> * next(){}`这行得通吗？需要更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:37:09.167

在定义中，`SimpleLinkedList<T>::next()`您需要在取消引用时使用指针语义，`current->next`因为`current`它是指针，而不是引用。

```
LinkedNode<T> * next(){
    if (getSize() == 0 || current.next == NULL) return NULL;
      return current;
}; 
```

改成：

```
LinkedNode<T> * next(){
    if (getSize() == 0 || current->next == NULL) return NULL;
      return current;
}; 
```

同样对于`previous`.

# localization - ExtLib 控件中的控制语言/本地化？

> ID：10460426
> 
> 赞同：1
> 
> 时间：2012-05-05T09:15:42.193
> 
> 标签：localization, xpages, lotus-domino, xpages-extlib

我目前正在为基于 XPages 的旧数据库创建 Web 布局。用户是丹麦人 - 我想确保他们在寻呼机等上看到正确的日期和丹麦标签布局。

对于标准寻呼机，我使用“自定义”类型并翻译“上一个”和“下一个”标签（将其放在自定义控件上并在所有页面上重复使用）。我确实尝试在寻呼机上设置语言，但是，这并没有改变任何东西......？

好吧，现在我也在使用更新包（官方扩展库）中的“pagerExpand”控件。它根据浏览器中的语言显示正确的标签。由于我无法确定浏览器中的语言是否设置正确，因此我想对其进行控制。如何控制这些标签？

从更大的角度来看，我希望能够在整个应用程序中控制语言......（对于其他未来的应用程序）

/约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:51:01.347

我创建了一个用于控制 XPage 应用程序语言的 XSnippet：http://openntf.org/XSnippets.nsf/snippet.xsp?id=xpages-localization- [setter](http://openntf.org/XSnippets.nsf/snippet.xsp?id=xpages-localization-setter)

要手动更改 XPage 中的语言，您可以在 SSJS 中使用以下函数执行此操作：

```
view.setLocale( ) 
```

希望这可以帮助

斯文

**编辑：**
要设置正确的语言，您必须使用*java.util.Locale*。要将语言 fe 设置为丹麦语，请将其添加到*beforeRenderResponse*：

```
var locale = new java.util.Locale( "da" );
view.setLocale( locale ); 
```

# javascript - 表格行的叠加

> ID：10460433
> 
> 赞同：4
> 
> 时间：2012-05-05T09:16:27.190
> 
> 标签：javascript, jquery, html

我试图为表格行创建覆盖。我希望在用户的鼠标在该行上停留一秒钟左右后显示叠加层，并在鼠标离开该行后将其删除。我开始研究这个：http: [//jsfiddle.net/YCZ3J/](http://jsfiddle.net/YCZ3J/)

我被困在几件事上：

1.  在行内移动鼠标时，mouseenter 事件会持续触发。我不知道为什么。
2.  我希望覆盖覆盖该行，除了图像 TD，并且也没有取得太大的成功。
3.  我希望每一行在叠加层上有不同​​的文本/按钮。我尝试向每个 TR 添加一个 div 并使用`.parent().('.overlay')`，但无法使其正常工作。

任何帮助将不胜感激。谢谢！

**编辑：**经过一些指示，这是一个满足我所有要求的工作小提琴：http: [//jsfiddle.net/YCZ3J/37/](http://jsfiddle.net/YCZ3J/37/)

**编辑 2：**我最终选择了 hoverIntent jquery 插件，因为它解决了故障问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:51:35.117

对于第一个问题，我可以为您提供帮助：您应该使用**mouseover**而不是**mouseenter**查看[此链接](http://api.jquery.com/mouseover/)以获取更多信息，基本上当 mouseenter 触发当前 div 和所有父级时，mouseover 仅触发当前 div，因此移动鼠标会不断触发父级 div 的 mouseenter .

**编辑**：~~哦！并保持 mouseleave 触发 overlay.hide~~

您应该将overlay.hide绑定到overlay.mouseleave。（即当鼠标离开覆盖层时，而不是行，因为覆盖层在它前面）

**编辑**：这里是更新， http: [//jsfiddle.net/YCZ3J/32/](http://jsfiddle.net/YCZ3J/32/)看到我在 Overlay.css 中输入了正确的：'0px', width:'66,7%' 这样它就可以让图像自由了。

正如您将看到的，当您将覆盖层移到另一个覆盖层移动时，会出现一个小故障，完成向上滑动过渡，然后在一秒钟后再次向下滑动。

# django - Django admin 作为内部工具

> ID：10460434
> 
> 赞同：1
> 
> 时间：2012-05-05T09:16:33.997
> 
> 标签：django, django-admin, project-management

我打算用django管理工具加倍的django强大的管理界面来写一个内部项目管理工具。应用程序只有这个后端，没有前端。

这个项目不会商业化，不会上线，最大预计用户将在 40 人左右。我们是一家电影后期制作工作室，我们需要这个工具来更好地组织任务，并对我们的项目有一个总体的了解。

大家觉得安全吗？django 管理员可以用于此目的吗？谢谢，请放轻松，因为这是我的第一个问题。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:39:15.723

Django 管理站点几乎可以完全自定义，并提供了许多钩子来无缝配置和覆盖许多默认行为。它被构建为应用程序自动集成和公开数据管理的通用接口，因此在实践中，您永远不会看到应用程序提供自己的视图和 URL 挂钩来公开某种自定义管理接口。

自定义它变得古怪的一点是，当您需要将其用于预期目的之外的其他用途时。它旨在管理应用程序模型，整个管理站点的结构和组织围绕着为已注册模型实例提供非常具体的 CRUD 视图的概念。你会发现，反过来，默认视图为模板准备了特殊的上下文，这些上下文旨在支持一个特定的假设，即应该如何为应用程序模型提供一般的 CRUD 行为，以及以其他方式扩展或自定义它们。容易被`ModelAdmin`实例支持将非常耗时并导致很多痛苦。

您绝对应该花时间浏览[Django 管理站点文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)并彻底了解它可以做什么并规划您的应用程序，以便它符合而不是违背管理站点的假设和功能。

如果您仍然需要管理站点来提供高度定制的演示和结构，那么不要害怕。Django[基于类的通用视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/)为处理模型提供了同样强大的抽象，而不受管理站点要求的限制，并且从现成的[Bootstrap](http://twitter.github.com/bootstrap/)中选择展示意味着您可以按照自己想要的方式推出应用程序快速地。

# iphone - iPhone SDK - 如何使用按钮创建菜单

> ID：10460435
> 
> 赞同：-2
> 
> 时间：2012-05-05T09:16:34.830
> 
> 标签：iphone, sdk

如何创建类似[http://goo.gl/ks2q1](http://goo.gl/ks2q1)的内容（位于“操作”下）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:19:38.480

我认为这只是一个正常`UITableView`的，看看[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)和[UITableView 编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451-CH1-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:19:57.930

这将是一个简单的过程，只需使用表格视图的第二部分并在单元格中创建一个标签插入并使其居中。在表格方法中使用这行代码。

```
 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 if(indexPath.section==1)
    {
        putts_Label=[[UILabel alloc]initWithFrame:CGRectMake(150, 8, 24, 24)];
        putts_Label.text=@"0";

        putts_Label.textColor=[UIColor blackColor];
        putts_Label.backgroundColor=[UIColor clearColor];
        [cell.contentView addSubview:putts_Label];
   } 
```

# google-chrome - Google Chrome 扩展程序 - 单击图标调用函数

> ID：10460437
> 
> 赞同：0
> 
> 时间：2012-05-05T09:16:43.967
> 
> 标签：google-chrome, javascript-events, google-chrome-extension

我一直在尝试制作一个带有图标的扩展程序，单击该图标会停止（所有）选项卡的加载。

我有这个清单文件：

```
{
  "name": "Stop Loading",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Stop loading all tabs in Chrome",
  "browser_action": {
    "default_icon": "greyclose.png"
  },

  "background_page": "background.html",
   "content_scripts": [ {
      "all_frames": true,
      "js": [ "kliknuto.js" ],
      "matches": [ "http://*/*", "https://*/*" ]
   } ],

  "permissions": [ "tabs", "http://*/*", "https://*/*" ]
} 
```

在 background.html 我有这个代码：

```
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.extension.sendRequest({reqtype: "get-settings"}, function(response) {
    window.setTimeout("window.stop();", 0);
  });
}); 
```

我不确定是否应该将 background.html 代码放入 javascript 文件“kliknuto.js”或其他文件中。单击 Chrome 中的扩展按钮时会调用哪个函数？感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:38:41.283

在您的代码中， background.html 正在向自身发送查询（`chrome.extension.sendRequest`不会发送到内容脚本），然后，如果/当它得到回复时，后台页面正在调用`window.stop()`自身*，*而不是选项卡。你真正需要的是：

**背景.html**：

```
...
chrome.browserAction.onClicked.addListener(function(tab) {
    // get all tabs in all windows
    chrome.windows.getAll({"populate":true}, function(winArray) {
        for(var i = 0; i < winArray.length; ++i) {
            for(var j = 0; j < winArray[i].tabs.length; ++j) {
                var t = winArray[i].tabs[j];
                // push code to each tab
                chrome.tabs.executeScript(t.id, {"code":"window.stop();", "allFrames":"true"});
            }
        }
    });
});
... 
```

此解决方案用于`executeScript`代替内容脚本。

**使用替代解决方案进行编辑：**

将内容脚本附加到侦听来自背景页面的订单的每个选项卡。

**背景.html**：

```
...
chrome.browserAction.onClicked.addListener(function(tab) {
    // get all tabs in all windows
    chrome.windows.getAll({"populate":true}, function(winArray) {
        for(var i = 0; i < winArray.length; ++i) {
            for(var j = 0; j < winArray[i].tabs.length; ++j) {
                var t = winArray[i].tabs[j];
                // push code to each tab
                chrome.tabs.sendRequest(t.id, {"order":"stop"});
            }
        }
    });
});
... 
```

**kliknuto.js：**

```
chrome.extension.onRequest(function(request) {
    if(request.order == "stop") {
        window.stop();
    }
}); 
```

确保添加`"run_at":"document_start"`到`content_script`清单中的块，以便内容脚本尽快开始侦听。

# .net - 保存 DevExpress 功能区布局

> ID：10460440
> 
> 赞同：1
> 
> 时间：2012-05-05T09:17:03.473
> 
> 标签：.net, vb.net, devexpress, ribbon-control

我制作了一个 devexpress 功能区，并有一个用于动态控件的功能区页面，由最终用户添加。我想知道如何在表单关闭时保存它，以便用户下次打开时他/她将拥有控制权。由于 devexpress 功能区控件没有`RibbonControl1.SaveLayoutToXml()`，是否可以这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T09:24:21.877

DevExpress 有这个功能（至少在当前的 13.2 版本中）

[RibbonControl.SaveLayoutToXml](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraBarsRibbonRibbonControl_SaveLayoutToXmltopic)和[RibbonControl.RestoreLayoutFromXml](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraBarsRibbonRibbonControl_RestoreLayoutFromXmltopic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:38:12.737

您可以在功能区控件上保存的唯一内容是快速启动项。

# php - 将 UTF-8 数据放入 latin1 数据库列时会发生什么？

> ID：10460441
> 
> 赞同：2
> 
> 时间：2012-05-05T09:17:18.490
> 
> 标签：php, mysql, utf-8, character-encoding, latin1

我得到了一些用 编码的数据`UTF-8`，这将是西班牙语。我需要放入的数据库列当前正在使用`latin1`字符集。

如果我将 UTF-8 数据放入这些列会发生什么？我会丢失任何正确的数据吗？或者我应该使用 php 函数转换编码`mb_convert_encoding`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:23:42.480

每个可能的字节序列在 中都是有效的`latin1`，因此您*可以*将 UTF-8 编码的字符串放入您的列中，不会有任何抱怨。当您从数据库中提取数据时，字节将与输入时相同，因此只要客户端知道这些字节是 UTF-8 编码的，您将取回原始数据。

但是，您真的不应该那样做：为什么不将列数据类型更改为 UTF-8？

```
ALTER TABLE my_table MODIFY my_column TEXT CHARACTER SET utf8; 
```

# c# - 如何检查linq to sql中的空值

> ID：10460443
> 
> 赞同：5
> 
> 时间：2012-05-05T09:17:37.897
> 
> 标签：c#, linq-to-sql

我正在尝试使用以下 linq to sql 查询来获取结果。但是如果 parentCategoryId 作为 null 传递，它就不起作用

```
 public static IEnumerable<Category> GetChildren(this Table<Category> source, int? parentCategoryId)
    {
        var categories = from c in source where c.ParenCategoryId == parentCategoryId select c;
        return categories;
    } 
```

但如果直接使用 null 代替 parentCategoryId，则以下工作

```
 public static IEnumerable<Category> GetChildren(this Table<Category> source, int? parentCategoryId)
    {
        var categories = from c in source where c.ParenCategoryId == null select c;
        return categories;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T09:33:35.807

您可以使用`object.Equals`，它也会匹配`null`值。

```
public static IEnumerable<Category> GetChildren(this Table<Category> source, int? parentCategoryId)
{
    var categories = from c in source 
                     where object.Equals(c.ParenCategoryId, parentCategoryId) 
                     select c;
    return categories;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:49:01.723

You can try the following

```
public static IEnumerable<Category> GetChildren(this Table<Category> source, int? parentCategoryId)
{
    var categories = from c in source 
                     where (parentCategoryId != null? c.ParenCategoryId == parentCategoryId : c.ParenCategoryId == null)
                     select c;
    return categories;
} 
```

# python - 在 Python 中逐行读取文件的效率

> ID：10460453
> 
> 赞同：8
> 
> 时间：2012-05-05T09:18:31.147
> 
> 标签：python, performance, file

现在我正在编写一些 Python 代码来处理大量的 twitter 文件。这些文件太大了，无法放入内存。与他们合作，我基本上有两个选择。

1.  我可以将文件拆分成可以放入内存的较小文件。

2.  我可以逐行处理大文件，因此我不需要一次将整个文件放入内存中。为了便于实施，我更喜欢后者。

但是，我想知道将整个文件读入内存然后从那里操作它是否更快。似乎不断地从磁盘逐行读取文件可能会很慢。但话又说回来，我并不完全理解这些过程在 Python 中是如何工作的。有谁知道逐行读取文件是否会导致我的代码比我将整个文件读入内存并从那里操作它慢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T09:20:41.910

要真正快速读取文件，请查看[mmap](http://docs.python.org/library/mmap.html)模块。这将使整个文件显示为一大块虚拟内存，即使它比您的可用 RAM 大得多。如果您的文件大于 3 或 4 GB，那么您将需要使用 64 位操作系统（以及 64 位 Python 版本）。

我已经为超过 30 GB 的文件做了这个，效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:27:39.657

如果要逐行处理文件，可以简单地将文件对象用作迭代器：

```
for line in open('file', 'r'):
    print line 
```

这非常节省内存；如果您想一次处理一批行，您还可以使用`readlines()`带有*sizehint*参数的文件对象的方法。这会读取*sizehint*字节加上足够数量的字节来完成最后一行。

# android - 检查 CheckBox 是否被选中，这不在 ListView 的视图中

> ID：10460456
> 
> 赞同：0
> 
> 时间：2012-05-05T09:18:42.470
> 
> 标签：android

我有 ListView，它包含一个 TextView 和一个 CheckBox。
现在，我能够在 TextView 中获取文本，这不在 TextView 的视图中，但是我无法获取不在 ListView 视图中的 CheckBox 是否被选中。

请建议我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:59:39.590

```
this can be done if u can get your text information from adapter by using 
Adapter myadapter=MyList.getAdapter ;
View rowview=myadapter.getView(i,null,MyList);
now find textview by its id in rowview after that to chewck whether check box is checked or not then u can maintain booleon type array in custom adapter and maintain evrey checkbox state. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:35:47.337

这已经被问了数百次了。

您无法检查这些视图的状态，因为它们不存在 - listView 创建临时视图以在需要时显示在屏幕上。解决方案是在选中/取消选中时将复选框状态保存到另一个数据源（例如数组）中，并在您的自定义适配器中使用此数组决定复选框的状态，例如 -`if (suppose to be checked) checkbox.setChecked(true) else checkbox.setChecked(false)`

# google-app-engine - 使用 bulkloader 下载数据时由对等方重置连接

> ID：10460465
> 
> 赞同：3
> 
> 时间：2012-05-05T09:20:02.623
> 
> 标签：google-app-engine

我正在尝试使用 GAE 的批量加载器从本地开发服务器下载数据（以便我最终可以将其上传到已部署的应用程序）。在下载过程中，我收到“对等连接重置”错误。如果我反复尝试，它很少会在没有错误的情况下完成。我正在下载的开发服务器是一个 Java 应用程序。要下载数据，我使用的是 Python API 版本 1.6.5。那么这里发生了什么？

```
$ ./appcfg.py download_data --email=admin@test.com --passin --url=http://localhost:8080/_ah/remote_api --filename=myapp_ContentEntity --kind=ContentEntity
Downloading data records.
[INFO    ] Logging to bulkloader-log-20120505.013522
[INFO    ] Throttling transfers:
[INFO    ] Bandwidth: 250000 bytes/second
[INFO    ] HTTP connections: 8/second
[INFO    ] Entities inserted/fetched/modified: 20/second
[INFO    ] Batch Size: 10
Password for admin@test.com: .
[INFO    ] Opening database: bulkloader-progress-20120505.013522.sql3
[INFO    ] Opening database: bulkloader-results-20120505.013522.sql3
[INFO    ] Connecting to localhost:8080/_ah/remote_api
[INFO    ] Downloading kinds: ['ContentEntity']
.........................................[ERROR   ] [WorkerThread-4] WorkerThread:
Traceback (most recent call last):
  File "/home/spider/google_appengine/google/appengine/tools/adaptive_thread_pool.py", line 176, in WorkOnItems
    status, instruction = item.PerformWork(self.__thread_pool)
  File "/home/spider/google_appengine/google/appengine/tools/bulkloader.py", line 764, in PerformWork
    transfer_time = self._TransferItem(thread_pool)
  File "/home/spider/google_appengine/google/appengine/tools/bulkloader.py", line 1170, in _TransferItem
    self, retry_parallel=self.first)
  File "/home/spider/google_appengine/google/appengine/tools/bulkloader.py", line 1471, in GetEntities
    results = self._QueryForPbs(query)
  File "/home/spider/google_appengine/google/appengine/tools/bulkloader.py", line 1428, in _QueryForPbs
    result_pb)
  File "/home/spider/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 94, in MakeSyncCall
    return stubmap.MakeSyncCall(service, call, request, response)
  File "/home/spider/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 308, in MakeSyncCall
    rpc.CheckSuccess()
  File "/home/spider/google_appengine/google/appengine/api/apiproxy_rpc.py", line 156, in _WaitImpl
    self.request, self.response)
  File "/home/spider/google_appengine/google/appengine/ext/remote_api/remote_api_stub.py", line 248, in MakeSyncCall
    handler(request, response)
  File "/home/spider/google_appengine/google/appengine/ext/remote_api/remote_api_stub.py", line 262, in _Dynamic_RunQuery
    'datastore_v3', 'RunQuery', query, query_result)
  File "/home/spider/google_appengine/google/appengine/ext/remote_api/remote_api_stub.py", line 177, in MakeSyncCall
    self._MakeRealSyncCall(service, call, request, response)
  File "/home/spider/google_appengine/google/appengine/ext/remote_api/remote_api_stub.py", line 189, in _MakeRealSyncCall
    encoded_response = self._server.Send(self._path, encoded_request)
  File "/home/spider/google_appengine/google/appengine/tools/appengine_rpc.py", line 366, in Send
    f = self.opener.open(req)
  File "/usr/lib/python2.6/urllib2.py", line 397, in open
    response = meth(req, response)
  File "/home/spider/google_appengine/google/appengine/ext/remote_api/throttle.py", line 526, in http_response
    self.AddResponse(BANDWIDTH_DOWN, res)
  File "/home/spider/google_appengine/google/appengine/ext/remote_api/throttle.py", line 462, in AddResponse
    content = res.read()
  File "/usr/lib/python2.6/socket.py", line 329, in read
    data = self._sock.recv(rbufsize)
  File "/usr/lib/python2.6/httplib.py", line 538, in read
    s = self.fp.read(amt)
  File "/usr/lib/python2.6/socket.py", line 353, in read
    data = self._sock.recv(left)
error: [Errno 104] Connection reset by peer
..[INFO    ] An error occurred. Shutting down...
.........[ERROR   ] Error in WorkerThread-4: [Errno 104] Connection reset by peer

[INFO    ] Have 388 entities, 0 previously transferred
[INFO    ] 388 entities (5989622 bytes) transferred in 22.5 seconds 
```

# sencha-touch - Sencha Touch - 如何在按钮单击时删除/隐藏弹出面板

> ID：10460466
> 
> 赞同：2
> 
> 时间：2012-05-05T09:20:23.350
> 
> 标签：sencha-touch, extjs, sencha-touch-2, modalpopups

我创建了面板如下

```
Ext.define('MyApp.view.DatePanel', {
extend: 'Ext.Panel',
alias: 'widget.DatePanel',
config: {
    itemid:'DatePanel',
    modal:true,
    centered: true,
    width:'320px',
    height:'110px',   
    items:[
            {
                xtype: 'datepickerfield',
                label: 'Select date',
                type:'date',
                itemId: 'rptDate',
                value: new Date(),
            },
            {
                xtype:'toolbar',
                docked:'bottom',
                items:[{
                    text:'OK',
                    ui:'confirm',
                    action:'ShowTurnOverReport'
                },
                {
                    text:'Cancel',
                    ui:'confirm',
                    action:'Cancel'
                }

            }
        ]
} 
```

});

我使用下面的代码将此面板显示为弹出窗口

```
Ext.Viewport.add({xtype: 'DatePanel'}); 
```

现在在按钮取消单击我想隐藏/删除它

我试过了

```
Ext.Viewport.remove(Datepanel), 
var pnl = Ext.getCmp('DatePanel');
pnl.hide(); 
```

但没有任何效果。我怎样才能做到这一点 ？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T12:51:53.257

你可以通过多种方式做到这一点。

# ****解决方案1：****

 **要使用该`Ext.getCmp()`功能，您需要`id`为您的组件设置一个属性。

因此，给`id`你一个`DatePanel`如下所示的，

```
Ext.define('MyApp.view.DatePanel', {
extend: 'Ext.Panel',
alias: 'widget.DatePanel',
id:'datepanel',
config: {
     ......
     ...... 
```

然后在`Cancel`按钮单击处理程序上，编写以下代码...

```
{
 text:'Cancel',
 ui:'confirm',
 action:'Cancel'
 listeners : {
     tap : function() {
           var pnl = Ext.getCmp('datepanel');
           pnl.hide();
     }
 }
} 
```

# ****解决方案2：****

 **由于您已经定义了`itemid`属性，您可以使用以下行来获取对您的组件的引用..

```
var pnl = Ext.Container.getComponent('DatePanel');
pnl.hide(); 
```****

# c++ - 节拍器精度算法数学

> ID：10460471
> 
> 赞同：4
> 
> 时间：2012-05-05T09:21:14.847
> 
> 标签：c++, math

**简而言之：** 我有一个方法以每秒 44,100 次的速度被调用。我想知道在需要在第 13781.25 次方法调用时打勾的情况下该怎么做——即每分钟 192 次节拍）。我可以选择四舍五入该数字并在第 13781 次方法调用时发出声音，这意味着我在 0.25 时发出声音太早了。这相当于早了 0.00000566893424 秒。

在 100 个滴答声之后，我确信延迟肯定会加起来。是否有任何聪明的解决方法可以跟踪延迟，并且当延迟超过某个点时，可能会有一些数字来保持节拍再次正常运行？

到目前为止，这是我下面的代码..

```
int counter; // used to track down the amount of times the method has been called

signalMethod(){
    if(counter % ceil(2,646,000/10) == 0){ //the ceil function turns the decimal point into a whole number so it can be used for analysis. but this will cut off delay.. and over time im sure it will add up.. which will cause the beats to fluctuate...
        playSound();
    }
    counter++;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T09:24:46.180

您的问题只是解决“布雷森汉姆算法”问题的另一种变体，但不是增加以特定斜率绘制的线的 Y 坐标（斜率将是拍频），而是发出滴答声。

[布雷森汉姆算法的维基百科](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)

# android - Android：如何在 SQLite Funciton 之后附加字符串？

> ID：10460477
> 
> 赞同：1
> 
> 时间：2012-05-05T09:22:36.657
> 
> 标签：android, database, sqlite, isqlquery

我有一个小问题。谁能告诉我如何在插入语句中的 SQLite 函数之后附加字符串值。代码行如下：

```
myDataBase.execSQL("INSERT INTO network_data (DateTime, Signal, GPSLat, GPSLong, NetLat, NetLong) VALUES (datetime() /*Here I want to append value "GMT"*/, '" +Signal+ "', '" +GPSLat+ "', '" +GPSLong+ "', '" +NetLat+ "', '" +NetLong+ "');"); 
```

我想在'datetime（）'函数之后附加值“GMT”。

我想要像这样的输出：“格林威治标准时间 12:05:05 09:24:00”

这是 Android 中的 SQLite 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:36:39.003

在 Sqlite 中，您可以使用“||”连接任何字符串（文本）这个符号..在你的情况下试试这个..

```
("INSERT INTO network_data (DateTime, Signal, GPSLat, GPSLong, NetLat, NetLong) VALUES (datetime()||' GMT', '" +Signal+ "', '" +GPSLat+ "', '" +GPSLong+ "', '" +NetLat+ "', '" +NetLong+ "');"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:30:05.197

我不是 android 开发人员，但我很确定你可以使用`StringBuilder`. 我想它看起来像这样：

```
StringBuilder builder = new StringBuilder(100);
builder.append("Your Insert string");
builder.append(10); //This would append an integer
builder.append("My end insert string");
String s = builder.toString(); //Feel free to use your new string :) 
```

参考：http: [//developer.android.com/reference/java/lang/StringBuilder.html](http://developer.android.com/reference/java/lang/StringBuilder.html)

# android - 一次进行两项或多项活动是否可取？

> ID：10460482
> 
> 赞同：0
> 
> 时间：2012-05-05T09:23:11.143
> 
> 标签：android, memory-management, android-activity

在我的应用程序中，我同时开始了两个活动（TTS 和动画）。我的应用程序还面临一些用户的内存问题。

是否建议同时进行两项或多项活动？这种方法会消耗更多内存吗？

请给我建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:21:34.997

阿比拉什，

> 是否建议同时进行两项或多项活动？

取决于应用程序，但许多应用程序将同时运行多个活动。这有助于为用户创造流畅的体验，同时允许我们开发人员在逻辑上隔离不相关的代码片段。许多选项卡式应用程序都有选项卡，每个选项卡都包含自己的 Activity。

> 这种方法会消耗更多内存吗？

当然。两个活动都处于活动状态，因此每个活动都使用自己的资源。这里的问题是每个独立使用多少内存以及它是否大于分配的堆大小。如果两个 Activity 加起来都大于设备的堆，则必须：a) 减少内存使用量或 b) 分离 Activity。

**建议**

利用内存分析器工具，例如 Eclipse Memory Analyzer。找出运行它的设备的最小堆大小。（这通常由设备上的 Android 版本决定。）在应用程序运行时拍摄设备内存的一些快照。

希望这可以帮助，

模糊逻辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T00:18:54.457

当然，您可以同时进行两项、三项、甚至四项或更多活动。但这归结为您在每个线程中所做的事情。查看[Android 的并发库](http://developer.android.com/reference/java/util/concurrent/package-summary.html)以获取更多信息。

# android - 在循环中动态添加 Spinner

> ID：10460489
> 
> 赞同：1
> 
> 时间：2012-05-05T09:24:11.643
> 
> 标签：android, android-spinner

我在一个循环中添加说'n'微调器。但是当我运行我的代码时，只有最后添加的微调器可见。请在下面查看我的代码

```
Context context = this;
        ArrayList<ArrayList<String>> list = new ArrayList<ArrayList<String>>();

        ArrayList<String> hi = new ArrayList<String>();
        hi.add("Test 1");
        hi.add("Test 2");

        list.add(hi);

        ArrayList<String> hi1 = new ArrayList<String>();
        hi1.add("Test 3");
        hi1.add("Test 4");

        list.add(hi1);

        AlertDialog.Builder alert = new AlertDialog.Builder(context);

        alert.setTitle("Test App");
        alert.setMessage("Testing");

        for (int i = 0; i < 2; i++) {
            final Spinner spinner = (Spinner) layout
                    .findViewById(R.id.spinner1);
            ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_spinner_item, list.get(i));

            dataAdapter
                    .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinner.setAdapter(dataAdapter);
                    alert.setView(spinner); 
        }

        alert.show(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T09:33:03.757

发生这种情况是因为您在循环中所做的只是在' 布局`for`中搜索 a ，然后使用 the 的方法添加它（此方法不会将视图添加到另一个已经存在的视图，它只是替换它们）。如果你想添加多个到同一个，你应该这样做：`Spinner``Activity``setView``AlertDialog``Views``Spinner``AlertDialog`

```
LinearLayout ll = new LinearLayout(this);
ll.setOrientation(LinearLayout.VERTICAL);
for (int i = 0; i < 2; i++) {
     Spinner spinner = new Spinner(this);
     ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                   android.R.layout.simple_spinner_item, list.get(i));
     dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
     spinner.setAdapter(dataAdapter);
     LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
     ll.addView(spinner, params);
}
alert.setView(ll); 
```

**编辑：** 您可以使用适当的布局管理器添加更多视图。例如，对于同一行上的a`TextView`和 a ，您可以使用 a ：`Spinner``TableLayout`

```
 TableLayout tl = new TableLayout(this);
    for (int i = 0; i < 2; i++) {
        TableRow tr = new TableRow(this);
        TextView t = new TextView(this);
        t.setText("Text " + i);
        TableRow.LayoutParams params1 = new TableRow.LayoutParams(
                TableRow.LayoutParams.WRAP_CONTENT,
                TableRow.LayoutParams.WRAP_CONTENT);
        tr.addView(t, params1);
        Spinner spinner = new Spinner(this);
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, list.get(i));
        dataAdapter
                .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(dataAdapter);
        TableRow.LayoutParams params2 = new TableRow.LayoutParams(
                TableRow.LayoutParams.FILL_PARENT,
                TableRow.LayoutParams.WRAP_CONTENT);
        tr.addView(spinner, params2);
        TableLayout.LayoutParams trParams = new TableLayout.LayoutParams(
                TableLayout.LayoutParams.FILL_PARENT,
                TableLayout.LayoutParams.WRAP_CONTENT);
        tl.addView(tr, trParams);
    }
    alert.setView(tl); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:43:19.930

这条线...

```
final Spinner spinner = (Spinner) layout.findViewById(R.id.spinner1); 
```

每次循环迭代时，总是从您的布局中获得相同的微调器。您可能希望在每次迭代时动态创建它。

而这条线...

```
alert.setView(spinner); 
```

始终将警报的视图设置为您之前加载的单个微调器。

你应该尝试这样的事情

```
LinearLayout layout = new LinearLayout(getApplicationContext());
layout.setOrientation(LinearLayout.HORIZONTAL);

for (int i = 0; i < 2; i++) {
    final Spinner spinner = new Spinner(getApplicationContext());
    ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, list.get(i));
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(dataAdapter);
    layout.addView(spinner); 
}

alert.setView(layout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T09:39:36.460

您只是两次设置相同的视图。您需要创建一个视图组（在您的情况下您需要一个`LinearLayout`）并创建几个新的微调器以放入其中。但是如果你已经知道你想要多少个微调器，你可以创建一个包含所有微调器的新布局，然后这样做：

```
 LinearLayout viewGroup = (LinearLayout) getInflater().inflate(R.layout.dialog_spinners, null);

    for (int i = 0; i < viewGroup.getChildCount(); i++) {
        final Spinner spinner = (Spinner) viewGroup.getChildAt(i);

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, list.get(i));

        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(dataAdapter);
    }
    alert.setView(viewGroup);

    alert.show(); 
```

# facebook - facebook small like box vertical, like google plus

> ID：10460492
> 
> 赞同：0
> 
> 时间：2012-05-05T09:24:20.037
> 
> 标签：facebook

有没有办法显示类似于 google plus one 的 facebook like box？请查看 www.dadabik.org，右上角：我想要一个类似于 g+ 的 Facebook 按钮，带有点赞数。此外，链接应该将用户带到 facebook 页面，而不是立即“喜欢”该项目。

提前非常感谢。

干杯，

欧金尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:27:51.917

It will be better if you use api to get your likes and then designing what you want. OR if you access this URL [http://graph.facebook.com/bhavitk.in](http://graph.facebook.com/bhavitk.in) will give you json data then you can parse it to get your likes

# java - SwingWorker的重复执行

> ID：10460495
> 
> 赞同：0
> 
> 时间：2012-05-05T09:24:49.733
> 
> 标签：java, swing, jbutton, execute, swingworker

我正在编写一个进行一些音频分析的应用程序（用作吉他调音器，并添加和弦估计和其他一些东西），但我在使用 GUI 时遇到了一些问题。第一个问题是我有一个按钮，单击该按钮应更改其显示的文本。当它被点击时，文本并没有改变，但是应该改变它的代码行肯定已经到达了。

另一件事是我需要一个 SwingWorker 重复执行（完成后重新启动）并每次更新 GUI。由于我的代码目前是，我有一个循环重复执行我的 SwingWorker，但这导致 GUI 变得无响应，因为它在 EDT 中运行（大概）。让 SwingWorker 重复执行的最佳方法是什么？我应该创建一个新线程来运行循环，还是其他？

我的内部 ActionListener 类的代码如下：

```
private class TunerListener implements ActionListener {
    private boolean firstUpdate = true;
    private volatile boolean executing = false;

    private final SwingWorker<Void, Void> tunerWorker = new SwingWorker<Void, Void>() {

        @Override
        protected Void doInBackground() {
            model.update();
            return null;
        }

        @Override
        protected void done() {
            if (!this.isCancelled()) {
                prev.setText(model.getPrev());
                currentNote.setText(model.getNote());
                next.setText(model.getNext());
                frequency.setText(model.getFrequency());
                switch (model.getOffset()) {
                    case -2:
                        light_2.setIcon(onRed);
                        light_1.setIcon(off);
                        light0.setIcon(offBig);
                        light1.setIcon(off);
                        light2.setIcon(off);
                        break;
                    case -1:
                        light_2.setIcon(off);
                        light_1.setIcon(onRed);
                        light0.setIcon(offBig);
                        light1.setIcon(off);
                        light2.setIcon(off);
                        break;
                    case 0:
                        light_2.setIcon(off);
                        light_1.setIcon(off);
                        light0.setIcon(onGreen);
                        light1.setIcon(off);
                        light2.setIcon(off);
                        break;
                    case 1:
                        light_2.setIcon(off);
                        light_1.setIcon(off);
                        light0.setIcon(offBig);
                        light1.setIcon(onRed);
                        light2.setIcon(off);
                        break;
                    case 2:
                        light_2.setIcon(off);
                        light_1.setIcon(off);
                        light0.setIcon(offBig);
                        light1.setIcon(off);
                        light2.setIcon(onRed);
                        break;
                }
            }
        }

    };

    @Override
    public void actionPerformed(ActionEvent ae) {

        if (ae.getActionCommand().equals("tune")) {
            if (!executing) {
                tune.setText("Stop Tuning");
                executing = true;

                while (executing) {
                    tunerWorker.execute();
                    firstUpdate = false;
                }
                firstUpdate = true;
            } else {
                tune.setText("Start Tuning");
                executing = false;
                tunerWorker.cancel(true);
                firstUpdate = true;
            }
        }

    }
} 
```

**编辑：按钮文本问题现在似乎已经修复，但我仍然无法让这个 SwingWorker 正常工作。我已经尝试完全删除 while 循环并让它从它的 done() 方法中重新执行，但这似乎并没有帮助问题......**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T11:39:36.523

“[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)只设计为执行一次。” 而是控制工人的执行和生命周期，如本[例](https://sites.google.com/site/drjohnbmatthews/randomdata)所示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T11:42:25.430

免责声明：多线程不是我最擅长的领域......

您的两个问题实际上是同一件事，例如，您的 GUI 变得无响应，因为 EDT 正忙于运行 while 循环。这意味着它不能用新的文本值重新绘制按钮，也不能对用户输入做出反应。

此外，每个 SwingWorker 实例只能运行一次，因此`execute()`在循环中多次调用只会运行一次。

我建议创建一个 TunerWorker 对象并将循环放入其中，然后在需要启动循环时创建一个新对象。像这样：

```
class TunerListener implements ActionListener {

private TunerWorker tw = null;

@Override
public void actionPerformed(ActionEvent ae) {

    if (ae.getActionCommand().equals("tune")) {
        if (tw == null || tw.isDone()) {
            tune.setText("Stop Tuning");
            executing = true;

            tw = new TunerWorker();
            tw.execute();

        } else {
            tune.setText("Start Tuning");
            executing = false;
            tw.cancel(true);
            }
        }
    }
}

final class TunerWorker extends SwingWorker<Void, Void> {

    @Override
    protected Void doInBackground() {
        while (!this.isCancelled()) {
            model.update();
        }        
        return null;
    }    

    @Override
    protected void done() {
        if (!this.isCancelled()) {
            //Removed this code to make the example prettier...
        }
    }
} 
```

哦，我不确定你要做什么，`firstUpdate`所以我把它从例子中删除了。希望弄清楚如何将其放回原处不会太难。

编辑：哎呀，该代码实际上并没有工作。现在应该修好了。

# java - 如何分析图形数据以找到顶部？

> ID：10460496
> 
> 赞同：0
> 
> 时间：2012-05-05T09:25:00.163
> 
> 标签：java, arrays, graph

我需要从一些给定的数据（来自图表的数据）中找到严重的顶部。数据被放入一个数组中。

顶部定义为在顶部之前的特定间隔中具有较低或相等的元素，在顶部之后的特定间隔中具有较低或相等的元素。我想保持简单，因为我不是专家。

我正在使用一些不同的工具分析一些股票图表。我希望你能帮助我，或者提供一些其他的意见来处理这个问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:18:22.530

这是一个工作示例：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Random;

public class Test
{
  static final int[] graph = new int[100]; static { randomGraph(); }
  static final int window = 3;

  public static void main(String[] args) {
    final List<Integer> tops = new ArrayList<Integer>();
    for (int i = 0; i < graph.length; i++)
      if (max(i-window, i) <= graph[i] && graph[i] >= max(i+1, i+1+window))
        tops.add(i);
    System.out.println(tops);
  }
  static int max(int start, int end) {
    int max = Integer.MIN_VALUE;
    for (int i = Math.max(start, 0); i < Math.min(end, graph.length); i++)
      max = Math.max(max, graph[i]);
    return max;
  }

  private static void randomGraph() {
    final Random r = new Random();
    for (int i = 1; i < graph.length; i++)
      graph[i] = graph[i-1] + r.nextInt(10) - 5;
    System.out.println(Arrays.toString(graph));
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:32:09.633

如果阵列不是太大，蛮力解决方案可能适合。您可以只迭代元素，并检查您为每个元素描述的谓词：

伪代码：

```
for (int i = 0; i < array.length; i++) { 
   boolean isPick = true;
   for (int j = max(0,i-interval; j < min(array.length,i+interval; j++) 
       if (array[j] > array[i]) isPick=false;
   //do something with the pick, isPick indicates if it is a pick or not. 
```

如果数组非常大，您可能要考虑的启发式解决方案是[爬山](http://en.wikipedia.org/wiki/Hill_climbing)

# java - How to play ringtone selected from RingtonePreference

> ID：10460499
> 
> 赞同：9
> 
> 时间：2012-05-05T09:25:27.853
> 
> 标签：java, android, android-emulator

I am trying to play a ringtone which is selected from a RingtonePreference. How can I play it?

Here is my xml file code

```
<RingtonePreference
    android:title="Choose Alarm"
    android:key="ringtone"
    android:summary="this is summary"
    ></RingtonePreference> 
```

Here is what I am doing in java

```
SharedPreferences getAlarms = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
String alarms = getAlarms.getString("ringtone", "default ringtone"); 
```

When I use toast like this

```
Toast.makeText(getApplicationContext(), alarms, Toast.LENGTH_LONG).show(); 
```

Then it shows this kind of path

```
content://media/internal/audio/media/50 
```

But I do not know how to play this one.

Help Please.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-05T09:58:21.403

```
private void alarm(){
    SharedPreferences getAlarms = PreferenceManager.
                                  getDefaultSharedPreferences(getBaseContext());
    String alarms = getAlarms.getString("ringtone", "default ringtone");
    Uri uri = Uri.parse(alarms);
    playSound(this, uri);

    //call mMediaPlayer.stop(); when you want the sound to stop
}

private MediaPlayer mMediaPlayer;
private void playSound(Context context, Uri alert) {
        mMediaPlayer = new MediaPlayer();
        try {
            mMediaPlayer.setDataSource(context, alert);
            final AudioManager audioManager = (AudioManager) context
                    .getSystemService(Context.AUDIO_SERVICE);
            if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
                mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
                mMediaPlayer.prepare();
                mMediaPlayer.start();
            }
        } catch (IOException e) {
            System.out.println("OOPS");
        }
    } 
```

这应该是你想要的:)我希望它有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:31:06.180

[**Here**](https://github.com/commonsguy/cw-android/tree/master/Prefs/Dialogs/) is a sample project from Commonsware for the same you can download and check its working.

You can get the Uri from the String that you are getting by using,

```
SharedPreferences getAlarms = PreferenceManager.
                                  getDefaultSharedPreferences(getBaseContext());
String alarms = getAlarms.getString("ringtone", "default ringtone");
Uri uri = Uri.parse("alarms"); 
```

Then you can play the uri using `MediaPlayer`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-21T02:47:59.113

您可以从首选项中获取首选铃声，您可以使用 RingtoneManager 类轻松播放铃声

```
SharedPreferences getAlarms = PreferenceManager.
                              getDefaultSharedPreferences(getBaseContext());
String alarms = getAlarms.getString("ringtone", "default ringtone");
Uri uri = Uri.parse(alarms);

Ringtone r = RingtoneManager.getRingtone(context, uri);
r.play(); 
```

# java - Error uploading file with FTP4J

> ID：10460500
> 
> 赞同：0
> 
> 时间：2012-05-05T09:25:27.833
> 
> 标签：java, android

I am having a problem with an ftp upload file from sdcard. For FTP I am using an external library. It was running fine but for the last 3-4 days I am getting an error. Fyi, I am using ftp4j-1.6.1.jar

**Here is code:**

```
it.sauronsoftware.ftp4j.FTPClient con = new it.sauronsoftware.ftp4j.FTPClient();
                    con.connect("ftp");
                    con.login("as", "addd@2012");
                    con.changeDirectory("/RequestContent/images");
                    con.setPassive(true);
                    con.setType(FTPClient.TYPE_BINARY);
                     con.upload(new java.io.File(Environment
                     .getExternalStorageDirectory()
                    + "/audiometer/"
                     + str_file_name));
                    con.logout();
                    con.disconnect(true); 
```

**Error:**

```
05-05 14:40:07.712: ERROR/AndroidRuntime(10006): FATAL EXCEPTION: main
05-05 14:40:07.712: ERROR/AndroidRuntime(10006): java.lang.NoClassDefFoundError: it.sauronsoftware.ftp4j.FTPClient
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at com.RecordingAppOLD.ImageCaptureActivity$3.onClick(ImageCaptureActivity.java:114)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at android.view.View.performClick(View.java:2533)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at android.view.View$PerformClick.run(View.java:9320)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at android.os.Handler.handleCallback(Handler.java:587)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at android.os.Looper.loop(Looper.java:150)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at android.app.ActivityThread.main(ActivityThread.java:4385)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at java.lang.reflect.Method.invokeNative(Native Method)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at java.lang.reflect.Method.invoke(Method.java:507)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
05-05 14:40:07.712: ERROR/AndroidRuntime(10006):     at dalvik.system.NativeStart.main(Native Method) 
```

# sql-server-2008 - 如何使用递归查询转换时间点的时间间隔

> ID：10460501
> 
> 赞同：0
> 
> 时间：2012-05-05T09:25:45.450
> 
> 标签：sql-server-2008, recursion, recursive-query

我正在尝试使用 SQL SERVER 2008 创建一个函数，该函数为给定时间间隔内计数的每个时间检查点返回一行。
换句话说，给定一个表格，告诉我某个对象在某个时间间隔内处于活动状态

```
[ID]   [TIME FROM]      [TIME TO]
23     12:34:00         13:14:00 
```

作为结果集，我试图得到一个像这样的表：

```
[ID]   [TimeCheck]      [flag]
23     12:00:00        0  
23     12:15:00        0  
23     12:30:00        1  
23     12:45:00        1  
23     13:00:00        1  
23     13:15:00        0 
```

我可以用它来链接到表格，为我提供每个 ID 的间隔（见下文*finalgoal*）
原因是我想计算一些统计数据来创建图表，我想计算检查的 ID 数量在给定的一组检查点时间。
我可以使用光标，但这听起来很粗略，我希望有人能提出更好的建议。
我在考虑 CTE 或递归函数，因为这听起来是一个理想的递归问题，但我无法解决

感谢您的建议！---- 编辑 --- 当然我可以使用这样的函数：

```
CREATE FUNCTION test_GetTimePoints (@ID INT, @timeFrom TIME, @timeTo TIME ,@intervalMinutes INT)
RETURNS @result TABLE ( [ID] INT , LasTimeCheck TIME , flag BIT)
AS
BEGIN
DECLARE @curTick INT = DATEDIFF(MINUTE,'00:00:00',@timeFrom)/@intervalMinutes+1
DECLARE @endTick INT = DATEDIFF(MINUTE,'00:00:00',@timeTo)/@intervalMinutes
WHILE ( @curTick < = @endTick )
BEGIN
  INSERT INTO @result
  SELECT @ID, DATEADD(MINUTE,@curTick*@intervalMinutes,0),1
  SET @curTick = @curTick + 1
END
RETURN
END 
```

**最终目标**是做这样的事情：

```
select ID,TS_In,TS_end, A.* FROM VEH M LEFT OUTER JOIN (SELECT * FROM 
dbo.test_GetTimePoints(ID,M.ts_In,M.ts_end,15) )A ON A.ID=M.ID 
```

这显然是行不通的，因为我不能给`ID,M.ts_In,M.ts_end,15`函数作为参数。
有什么想法可以达到相同的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:39:33.287

```
CREATE FUNCTION test_GetTimePoints
(
    @ID INT, 
    @timeFrom TIME, 
    @timeTo TIME,
    @intervalMinutes INT
)
RETURNS TABLE AS RETURN
(
    WITH C (LasTimeCheck) AS
    (
      SELECT DATEADD(MINUTE, @intervalMinutes, @timeFrom)
      UNION ALL
      SELECT DATEADD(MINUTE, @intervalMinutes, LasTimeCheck)
      FROM C
      WHERE LasTimeCheck < @timeTo
    )
    SELECT @ID AS ID,
           LasTimeCheck,
           1 AS flag
    FROM C         
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T18:34:19.177

如果您已经有一个函数，最简单的方法是使用[OUTER APPLY](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
SELECT ID,TS_In,TS_end, A.* 
  FROM VEH M 
 OUTER APPLY
 (
   SELECT * 
     FROM dbo.test_GetTimePoints(ID, M.ts_In, M.ts_end, 15) A
 ) A 
```

但是这个函数看起来很可疑，因为它没有考虑到对象活动间隔之外的时间。您可以将其更改为仅生成某个时间间隔（一天？）的时间列表，与 VEH 进行交叉连接，并在 15 分钟的开始和结束之间标记时间：

```
SELECT ID, TS_In, TS_end, 
       CASE WHEN M.TS_In <= dateadd (minute, 15, A.LastTimeCheck )
             AND M.TS_end >= A.LastTimeCheck
            THEN 1
            ELSE 0
        END Flag
  FROM VEH M 
 CROSS JOIN dbo.test_GetTimePoints('07:00:00', '23:00:00', 15) A 
```

为了完全消除函数，可以使用递归 CTE 生成时间表：

```
; WITH test_GetTimePoints (LastTimeCheck) AS
(
    SELECT CAST('07:00:00' as time)
    UNION ALL
    SELECT dateadd(minute, 15, LastTimeCheck)
      FROM test_GetTimePoints
       WHERE LastTimeCheck < CAST ('23:00:00' as time)
)
SELECT ID, TS_In, TS_end, 
       CASE WHEN M.TS_In <= dateadd (minute, 15, A.LastTimeCheck )
             AND M.TS_end >= A.LastTimeCheck
            THEN 1
            ELSE 0
        END Flag
  FROM VEH M 
 CROSS JOIN test_GetTimePoints A 
```

**更新：**

这个查询和其他查询一样——您可以从应用程序发送参数，即`@interval int`会做得很好。您仍然可以使用 CTE 变体，但您应该过滤掉不需要的时间：

```
; WITH test_GetTimePoints (LastTimeCheck) AS
(
    SELECT CAST('00:00:00' as time)
    UNION ALL
    SELECT dateadd(minute, @interval, LastTimeCheck)
      FROM test_GetTimePoints
       WHERE LastTimeCheck < dateadd (minute, - @interval, 
                                      CAST ('00:00:00' as time))
)
SELECT ID, TS_In, TS_end
  FROM VEH M 
 CROSS JOIN test_GetTimePoints A
 WHERE M.TS_In <= dateadd (minute, @interval, A.LastTimeCheck )
   AND M.TS_end >= A.LastTimeCheck
-- Default = 100, but we need to produce up to 1440 records
-- So we turn the limit off with zero.
OPTION (maxrecursion 0) 
```

更好的解决方案是有一个日历表（在这种情况下是一天中的所有分钟）并使用 CROSS APPLY：

```
SELECT ID,TS_In,TS_end, A.LastTimeCheck 
  FROM VEH M 
 OUTER APPLY
 (
   SELECT LastTimeCheck 
     FROM TimeTable A
    WHERE (datediff (minute, 0, LastTimeCheck) % @interval = 0)
      AND M.TS_In <= dateadd (minute, @interval, A.LastTimeCheck )
      AND M.TS_end >= A.LastTimeCheck
 ) A 
```

可以使用上面的 CTE 填充时间表，并将 @interval 设置为 1。

# sql - sqlplus - periodically write results to file

> ID：10460503
> 
> 赞同：2
> 
> 时间：2012-05-05T09:25:52.207
> 
> 标签：sql, linux, oracle, bash, sqlplus

I have the below in a bash script. The inputsqls.txt file contains 10 SQL statements that take several hours to run. Is there a way to periodically write the results to output.txt before all 10 statements have run? i.e. every 30mins write the results of all queries executed to the file or each time one query completes update the file, so that you can check say 4 of the query results without having to wait for all 10 to complete.

Eventually output.txt should contain the results of all 10 queries.

```
sqlplus -l <<sqlly > output.txt
    USER/PASSWORD@SID
    @inputsqls.txt
    EXIT
sqlly 
```

Note: breaking up each file to have just one statement is not an ideal workaround.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:34:46.353

使用 inputsqls.txt 中的 SQL*Plus[假脱机命令](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve043.htm#SQPUG126)。

```
spool output.txt append 
```

这会将打印到 stdout 的任何内容附加到 output.txt 写入时。

如果启动时 output.txt 不存在，只需删除`append`：

```
spool output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:31:57.653

这取决于 SQL 语句在完成之前是否生成任何输出。如果它们都运行了很长时间然后对结果进行排序，那么输出可能只会在过程的最后。

您拥有它的方式可能是最好的方式，因为`output.txt`无论如何都会定期刷新，从而导致文件的定期更新。但是，如果所有输出都在末尾，则不会发生这种情况。

一种可能性是单独分解十个查询（假设您按顺序而不是并行运行它们。这可能允许每个查询更快地完成并输出其结果，例如：

```
sqlplus -l <<sqlly > output.txt
    USER/PASSWORD@SID
    @inputsqls_01.txt
    EXIT
sqlly
sqlplus -l <<sqlly >> output.txt
    USER/PASSWORD@SID
    @inputsqls_02.txt
    EXIT
sqlly
:
sqlplus -l <<sqlly >> output.txt
    USER/PASSWORD@SID
    @inputsqls_10.txt
    EXIT
sqlly 
```

# ruby - Accessing hashes and arrays Ruby

> ID：10460504
> 
> 赞同：2
> 
> 时间：2012-05-05T09:25:57.073
> 
> 标签：ruby, json, symbols

In my Rails application I'm sending a complex JSON string that needs to get decoded. That's not the problem I know how.

Now before I implement everything I'm trying to access some example JSON structures to see if I can get to all the variables. The problem is that the names can be variable.

```
{"configurations" : [ 
{ "drinks" : [
        {"menus" : [
          { "hot" : [
            {"id":15,"unit":"0.33", "price":"1", "currency":"Euro", "position": 4},
            {"id":15,"unit":"0.33", "price":"1", "currency":"Euro", "position": 6}
          ] },

          { "cold" : [
        {"id":15,"unit":"0.33", "price":"1", "currency":"Euro", "position": 4},
            {"id":15,"unit":"0.33", "price":"1", "currency":"Euro", "position": 6}
           ] },

          { "terminals" : [ {"id" : 4}, {"id": 6}, {"id": 7} ] }, 

          { "keys" : { "debit" : "on", "credit": "off" }  }

        ] }
] } ] } 
```

Ok, now the following fields **are variable**: **"drinks", "hot", "cold"**. All the other fields will be called the same.

Now I would like to access every variable in this JSON string after I decoded it. Before implementing it, I tryed a simple JSON:

```
{"configuration" : [ { "drinks" : [ { "id":15, "unit":"0.33" } ] } ] } 
```

After decoding in rails resulting in

```
{ "configuration" => [{"drinks" => [{"id" => 15, "unit" => "0.33" }]}]} 
```

Now how can I access for example `id` and `unit` without using the word "drinks". The solution should also be scalable to the example above.

Some extra information: In the large JSON I should access all the items listed there (the id's) save them to a table and return the new id and then insert it back in the JSON. (explaining why this needs to be done will take an extra page or 4 ^^ ).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:06:46.733

我写这篇文章是为了在哈希中进行深度搜索，但首先恐怕你的 json 有问题，当你解析它时，你会发现，例如终端没有显示所有的键。代码仍然必须适应返回数组或散列本身。

```
hash = JSON.parse(string) #the string you published
=>

{"configurations"=>
  [{"drinks"=>
     [{"menus"=>
        [{"hot"=>
           [{"id"=>15,
             "unit"=>"0.33",
             "price"=>"1",
             "currency"=>"Euro",
             "position"=>4},
            {"id"=>15,
             "unit"=>"0.33",
             "price"=>"1",
             "currency"=>"Euro",
             "position"=>6}]},
         {"cold"=>
           [{"id"=>15,
             "unit"=>"0.33",
             "price"=>"1",
             "currency"=>"Euro",
             "position"=>4},
            {"id"=>15,
             "unit"=>"0.33",
             "price"=>"1",
             "currency"=>"Euro",
             "position"=>6}]},
         {"terminals"=>{"id"=>7}},
         {"keys"=>{"debit"=>"on", "credit"=>"off"}}]}]}]} 
```

这里的代码

```
class Hash
  def dseek(search_key = "", path = "")
    self.each do|key, value|
      if value.is_a?(Hash)
        path += "#{key}."
        value.dseek(search_key, path)
      else
        if value.is_a?(Array)
          path += "#{key}."
          value.each do |val|
            val.dseek(search_key, path)
          end
        else
          puts "#{path}#{key}:#{value}" if search_key === key || search_key === ""
        end
      end
    end
  end
end

hash.dseek 
```

给

```
configurations.drinks.menus.hot.id:15
configurations.drinks.menus.hot.unit:0.33
configurations.drinks.menus.hot.price:1
configurations.drinks.menus.hot.currency:Euro
configurations.drinks.menus.hot.position:4
configurations.drinks.menus.hot.id:15
configurations.drinks.menus.hot.unit:0.33
configurations.drinks.menus.hot.price:1
configurations.drinks.menus.hot.currency:Euro
configurations.drinks.menus.hot.position:6
configurations.drinks.menus.cold.id:15
configurations.drinks.menus.cold.unit:0.33
configurations.drinks.menus.cold.price:1
configurations.drinks.menus.cold.currency:Euro
configurations.drinks.menus.cold.position:4
configurations.drinks.menus.cold.id:15
configurations.drinks.menus.cold.unit:0.33
configurations.drinks.menus.cold.price:1
configurations.drinks.menus.cold.currency:Euro
configurations.drinks.menus.cold.position:6
configurations.drinks.menus.terminals.id:7
configurations.drinks.menus.keys.debit:on
configurations.drinks.menus.keys.credit:off 
```

和

```
hash.dseek("id") 
```

给

```
configurations.drinks.menus.hot.id:15
configurations.drinks.menus.hot.id:15
configurations.drinks.menus.cold.id:15
configurations.drinks.menus.cold.id:15
configurations.drinks.menus.terminals.id:7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:31:20.397

在你的评论中，你说

> 每个终端都有一个配置（“drinks”），并且可以有多个子菜单（“hot”、“cold”），它们最多有 24 个项目（“id”等）

但是您作为示例发布的 JSON 似乎反映了不同的结构，我认为这使您的任务变得不必要地困难。如果 JSON 宁愿以您在评论中描述的方式分层分组，您的任务将变得非常容易。听起来您有可能更改生成的 JSON，因此我建议您重新设计其层次结构，而不是尝试编写难以理解/维护的代码来处理最初并不理想的数据结构.

举个例子，你说一个终端意味着它的配置和菜单，所以我会把终端放在顶层而不是配置，也就是说，让配置和菜单成为终端的成员，而不是相反。这样，您可以简单地遍历所有终端，访问其菜单、ID 等，而不必知道该特定终端是否提供“饮料”等服务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T10:02:35.763

总而言之，有一个散列但对密钥不感兴趣似乎有点奇怪，但我是谁来判断，你可能会从其他地方或其他地方得到那些奇怪的数据。

鉴于上面的简化示例，您可以这样做：

```
h["configuration"].first.values.flatten.first 
#=> {"id"=>15, "unit"=>"0.33"} 
```

现在让我们看一个更复杂的例子：

```
h["configurations"].map(&:values).flatten.first["menus"].map(&:values).flatten.map { |x| x["id"] }.compact
#=> [15, 15, 15, 15, 7] 
```

这会返回 id，但很难看，并且会丢失 id 来自的所有信息。在没有看到更多代码的情况下，我不知道这是否足够（可能不是）。

# grails - grails integration test on a service: cannot invoke method on null object (grails 2.0.3 on groovy 1.8 )

> ID：10460508
> 
> 赞同：0
> 
> 时间：2012-05-05T09:26:29.443
> 
> 标签：grails, groovy, code-injection, integration-testing

I have a dispatcher service which delegates to other services. I am attempting to test dispatching to the email service. (I have not tested the other services)

The integration test on the dispatcher service works fine, reading data from the database to build the email, up until the point it attempts to invoke emailService.send(). I was expecting the EmailService to be injected, but it appears not to be:

```
class DispatchService {
    EmailService emailService
    ... 
```

What am I missing? All service, domain, and test classes were created using the Grails tools, I'm not doing anything really bizarre or custom. I've googled extensively, but can't seem to find the solution to match this problem.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:45:50.980

Dammit. Old habits die hard.

Commenting out this line from within the test method fixes the EmailService injection problem.

```
//DispatchService dispatchService = new DispatchService() 
```

# jquery - jQuery - 在 div REL 中使用 img ID

> ID：10460510
> 
> 赞同：0
> 
> 时间：2012-05-05T09:26:54.907
> 
> 标签：jquery, rel

当您将鼠标悬停在缩略图上时，我正在尝试（使用非常有限的 jQuery 知识:) 为 DIV 设置动画。我想我可以使用 REL 中的图像 ID 用该 REL 为 DIV 设置动画。出于某种原因，当我尝试提醒 div REL 时，我最终得到的只是 OBJECT OBJECT，这有点让我发疯。这是我使用的：

```
 $(function(){

var screenCenter = $(window).width() / 2;
var projectID = this.id;

$(document).mousemove(function(e){
    if (e.pageX < screenCenter) {

    }
    else if (e.pageX > screenCenter) {

        $("#portfolio_thumbs img").hover(function() {

            //$("div[rel=" + projectID + "]").animate({left:'100px'},{queue:false,duration:300});

            alert($('div[rel=" + projectID + "]'))

        });

    }

    $('#portfolio_thumbs img').mouseout(function() {
        $(".project_description").animate({left:'-440px'},{queue:false,duration:300});
    });

}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:31:47.660

`this.id`超出范围。您需要将其添加到悬停回调中：

```
$('#portfolio_thumbs img').hover(function() {
    $('div[rel="' + this.id + '"]').animate({left:'100px'},{queue:false,duration:300});
}); 
```

简单概念演示：http: [//jsfiddle.net/f8tWY/](http://jsfiddle.net/f8tWY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:33:14.697

在您的警报线上，您必须检查您的引号，因为您的变量在引号内。

# javascript - 使用 JavaScript 滑动图像

> ID：10460523
> 
> 赞同：1
> 
> 时间：2012-05-05T09:28:32.753
> 
> 标签：javascript, sliding

我正在尝试使用 JavaScript 创建一个图像滑块。

HTML

```
<img src="firstcar.gif" name="slide" width="100" height="56" />

<img src="secondcar.gif" name="slide1" width="100" height="56" /> 
```

脚本

```
var image1 = new Image()
image1.src = "firstcar.gif"
var image2 = new Image()
image2.src = "secondcar.gif"
var image3 = new Image()
image3.src = "thirdcar.gif"

//variable that will increment through the images
var step = 1

function slideit() {
    //if browser does not support the image object, exit.
    if (!document.images) return
    document.images.slide.src = eval("image" + step + ".src")
    if (step < 3) step++
    else step = 1
    //call function "slideit()" every 1.5 seconds
    setTimeout("slideit()", 1500)
}
slideit() 
```

我想以这样一种方式滑动两个图像，即即将出现的图像显示在第二个位置并滑动到第一个位置，并且两个图像都必须是内联的。

我找不到错误。有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:32:08.727

互联网上有很多图像滑块。你可以[谷歌](https://www.google.com/search?q=javascript%20image%20sliders)他们。

但是，您在上面构建的脚本不会以任何方式产生滑动效果。它只是切换图像并伪造效果看起来好像它在滑动。

脚本的工作版本看起来像这样。

```
var step = 1;

function slideit() {
    //if browser does not support the image object, exit.
    var img = document.getElementById('slide');
    img.src = "image" + step + ".src";
    console.log(img.src);
    if (step < 3) step++;
    else step = 1;
    //call function "slideit()" every 1.5 seconds
    setTimeout(slideit, 1500);
}
window.onload = slideit(); 
```

[演示](http://jsfiddle.net/WmMSH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:20:30.343

图像滑块很容易在 java 脚本中设计。您所需要的只是一个用于显示或滑动图像的容器以及一个用于旋转或滑动图像的脚本。滑动可以是随机的或顺序的。检查以下链接，该链接显示带有脚本的手动滑块。

[http://www.encodedna.com/2012/11/javascript-thumbnail-slider.htm](http://www.encodedna.com/2012/11/javascript-thumbnail-slider.htm)

# android - Developing InputMethod For Burmese :: Android

> ID：10460527
> 
> 赞同：0
> 
> 时间：2012-05-05T09:29:13.330
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-input-method, southeast-asian-languages

I am developing Burmese Input Method for android 4.0. I am following the sample soft keyboard provided in API Demos.

Now My question is

In qwert.xml of sample soft keyboard.I got the following.

```
....
<Row>
        <Key android:codes="113" android:keyIcon="q" android:keyEdgeFlags="left"/>
        <Key android:codes="119" android:keyLabel="w"/>
        <Key android:codes="101" android:keyLabel="e"/>
        <Key android:codes="114" android:keyLabel="r"/>
        <Key android:codes="116" android:keyLabel="t"/>
        <Key android:codes="121" android:keyLabel="y"/>
        <Key android:codes="117" android:keyLabel="u"/>
        <Key android:codes="105" android:keyLabel="i"/>
        <Key android:codes="111" android:keyLabel="o"/>
        <Key android:codes="112" android:keyLabel="p" android:keyEdgeFlags="right"/>
    </Row> 
```

In above snippet `android:codes="113"` 113 is UTF-8 code for character q.

What I did is I replaced the android:codes with UTF-8 code for Burmese Characters. I was expecting that burmese character will be displayed but it displayes blank space for all the characters.

I am stucked up.Googled but nothing found.

Can any one help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:35:28.897

最后我得到了解决方案。我们必须在 android:codes 属性中提供 DCP 即十进制编码点。剩下的一切都会到位。我们也可以使用 UTF8，但如果开发拉丁语以外的语言，则需要进行 R 和 D。

# java - 如何创建这样的日期选择器？

> ID：10460530
> 
> 赞同：1
> 
> 时间：2012-05-05T09:29:18.103
> 
> 标签：java, android, mono

![在此处输入图像描述](../Images/eb319dd84542507a262723aa34dd3c26.png)

Android 2.2 如何创建这样的日期选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:41:19.830

您可以在此处尝试此链接日历选择器，如您的要求[屏幕截图以及项目的文档](http://code.google.com/p/openintents/wiki/CalendarPickerAPI)和示例代码，您也可以在此处下载此项目 apk[文件](http://code.google.com/p/openintents/downloads/list)[....](http://code.google.com/p/openintents/source/browse/#svn/trunk/calendarpicker/CalendarPickerDemo)！

[您在此处](http://code.google.com/p/openintents/downloads/detail?name=CalendarPicker-source-1.0.0.zip&can=2&q=)下载此项目的完整源代码链接

谢谢....！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:32:29.280

为此，您必须通过在对话框上`CalendarView`绘制 a`GridView`并在该网格上呈现所有日期来创建自己的日期。您需要手动处理开始日期逻辑。即从网格的哪个项目开始向您显示日期。在该网格上，您可以轻松绘制标记。

[这是](http://w2davids.wordpress.com/android-simple-calendar/)一个很好的例子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T09:33:18.023

像这样创建一个布局......就像**calender.xml**

然后在对话框中充气

```
Dialog dialog = new Dialog(this);
dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
RelativeLayout featureLayout = (RelativeLayout) View.inflate(ClassName.this, R.layout.popoverview, null);
dialog.setContentView(featureLayout); 
```

对话框.show();

# c++ - eclipse C++ alternative for getch()

> ID：10460531
> 
> 赞同：-1
> 
> 时间：2012-05-05T09:29:30.097
> 
> 标签：c++, eclipse, getch

I am using C++ under Eclipse. With the Borland compiler I have used getch() function to take user input without showing what was entered.

The getch() function is not working under Eclipse.

Is there another way to get the user input without displaying on the screen the symbols which he enters?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:43:04.300

Borland 包含`getch()`在他们的 CRT 库中以向后兼容 MS-DOS。

它只是 Win32 API 的包装器。Borland 通常将 CRT 源代码与他们的编译器一起提供，因此您可以在那里看到它是如何实现的。

# mysql - mysql subquery and having max value of subquery

> ID：10460532
> 
> 赞同：1
> 
> 时间：2012-05-05T09:29:44.293
> 
> 标签：mysql, subquery, max, having

```
SELECT plaka, party_id, sum(inf) i 
  FROM party_sehir
 GROUP BY party_id, plaka 
```

This is my sub-query and the results are:

```
plaka   party_id   i 
34      1          42
34      2          9
35      1          11
35      2          26 
```

from these results I want to get maximum `i` of every `plaka` and rows `party_id`, like this:

```
plaka  party_id    i 
34     1           42
35     2           26 
```

I mean the maximum for each `plaka`. I also tried:

```
SELECT * 
  FROM ( SELECT plaka, party_id, sum(inf) i 
           FROM party_sehir
          GROUP BY party_id, plaka ) t1 
 GROUP BY plaka  
HAVING i >= max(i) 
```

It didn't work; is anyone able to help?

thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:38:22.477

它需要更长的查询，例如

```
select plaka,party_id, i 
from
(SELECT plaka,party_id, sum(inf) i FROM party_sehir
 GROUP BY  party_id, plaka) sum_group
where (i,plaka) in (
SELECT max(i), plaka
 FROM (SELECT plaka,party_id, sum(inf) i FROM party_sehir
 GROUP BY  party_id, plaka) t1 group by plaka ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:39:11.813

请尝试 group by 以获得您的解决方案

```
SELECT plaka ,party_id   , max( `i` ) FROM `party_sehir` GROUP BY `plaka` 
```

或者

```
SELECT * FROM `party_sehir` AS s1 WHERE s1.i = (SELECT max( `i` ) FROM party_sehir AS  
   s2  WHERE s1.plaka = s2.plaka ) GROUP BY `plaka` 
```

# java - Java: use Enumeration multiple times

> ID：10460534
> 
> 赞同：4
> 
> 时间：2012-05-05T09:29:53.687
> 
> 标签：java, enumeration

I work with `DefaultMutableTreeNode`, and it has methods `depthFirstEnumeration()`, `breadthFirstEnumeration()` and `children()` that return `Enumeration` of tree nodes.

I need to use the returned `Enumeration` multiple times, but I can't find any method like `reset()` in `Enumeration`. It seems like I only can get all the elements just once, and then call `depthFirstEnumeration()` again to get new `Enumeration`, it seems not to be a good solution.

Of course, I can get all the elements from `Enumeration` and convert it to any another reusable representation, but is there really a way to use `Enumeration` multiple times?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T09:34:25.983

不，这是不可能的`Enumeration`。在这个问题上，java doc 说：

> 实现 Enumeration 接口的对象一次生成一系列元素。

一次注意**一个，**这意味着如果您想将其`Enumeration`作为列表进行操作，则必须对其进行转换。您可以在第一次请求时创建一个列表`Enumeration`。这样您就可以随心所欲地使用和操作它。

```
Enumeration e = ...
ArrayList aList = Collections.list(e); 
```

# php - Zend_Form equivalent for ruby / rails

> ID：10460537
> 
> 赞同：3
> 
> 时间：2012-05-05T09:30:30.687
> 
> 标签：php, ruby-on-rails, ruby, forms, zend-form

Does anyone know if it there exist any Ruby or rails equivalent of zend_form?

I'm asking because I'm porting a project that I made in PHP with zend framework over to rails. This an event registration/form builder which basically means I need to generate forms from fields in a database. Zend_Form makes creating forms programmaticly very easy with validation and the works. Now I need to make this in rails but I can't see how it can be done any other way than making it all from scratch. Any ideas on the matter is very much appreciated. :)

If there's nothing like zend_form for rails/ruby is anybody interested in making it with me? I'm very new to rails and Ruby so i could very much need the help. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T23:06:17.883

simple_form或[Formtastic](https://github.com/plataformatec/simple_form)[还](https://github.com/justinfrench/formtastic)不够吗？添加到这个部分，你就有了类似的工具，看起来好多了，而且是 MVC。

# mysql - 对于很多 ENUM，哪种方法要好得多？

> ID：10460538
> 
> 赞同：0
> 
> 时间：2012-05-05T09:31:02.560
> 
> 标签：mysql, sql

这是用于自定义社交网络。任何用户都有“个人资料设置”

用户可以更改大约 30 种设置，因此有一些类别：

*   配置文件设置
*   短信 | 邮件通知
*   授权设置
*   安全设定
*   访问设置

我制作了几个保留设置的表（ENUM 类型）

如果我将该设置放入小表中，像这样（当然唯一的用户 ID 将被索引）

（用户 ID 是选项卡中任何地方的主键）

```
CREATE TABLE user_profile_settings ( ... ) type=MyISAM;
CREATE TABLE user_profile_notif ( ... ) type=MyISAM;
CREATE TABLE user_profile_auth ( ... ) type=MyISAM;
CREATE TABLE user_profile_security ( ... ) type=MyISAM;
CREATE TABLE user_profile_access ( ... ) type=MyISAM; 
```

然后一个请求会同时归结为几张桌子，这也意味着一些性能下降。这样做的好处是：如果我只想从 user_profile_settings 中读取，我只要求从该表中获取索引 id。

第二种方法是：为用户拥有的所有用户设置创建一行，如下所示：

```
CREATE TABLE all_user_config ( /***/ ) type=MyISAM; 
```

它包含大约 30 个列，但是维护整个系统有点困难。

问题是：推荐哪种方法适合十亿行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:44:47.500

我个人建议将`ENUM`字段保存在一张大表中，这样您只需查询和更新一个巨大的索引而不是五个。如果图表是真实的，这就是 Facebook 所做的或至少曾经做过的有点陈旧的[类图。](http://bloggineducation.wordpress.com/2010/06/07/facebook-database-schema/)

如果您对估计的用户数量很认真（Facebook 目前只有 9 亿用户），您可能需要考虑放弃 MySQL 等关系数据库，转而采用非 SQL 解决方案，例如键值存储[Cassandra](http://en.wikipedia.org/wiki/Apache_Cassandra)或文档面向[MongoDB](http://en.wikipedia.org/wiki/MongoDB)。与关系数据库相比，它们倾向于扩展到巨大的规模并更顺利地部署到分布式环境。

# iis-6 - 301 redirect issue with IIS6.0 and dot net 4.0

> ID：10460540
> 
> 赞同：0
> 
> 时间：2012-05-05T09:31:13.283
> 
> 标签：iis-6

I have a website built in dot net 4.0 using CMS (sitefinity4.0). This site is hosted on IIS6.0 I was trying URL Canonicalization where i need mysite.com/innerpages.aspx to redirect www.mysite.com/innerpages.aspx When I do a 302 redirection for mysite.com it works fine and the pages get redirected to www.mysite.com/innerpage.aspx but when i attempt to do 301 redirects the its shows 404 error for eurl.axd/.

The same setup on staging(with same app and IIS setting) works fine for 301 and 302 redirects.

While looking for solution I come across articles suggesting to disable ASP.NET v4.0 Extensionless URL feature on IIS 6.0 - [Default.aspx page won't load on IIS 6](https://stackoverflow.com/questions/9315861/default-aspx-page-wont-load-on-iis-6)

But I have checked the setting on staging and found that it is not disabled on staging. hence I am not sure if this will work.

Please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T01:32:54.493

我不确定您所说的“但是我已经检查了暂存设置，发现它在暂存时没有被禁用。” 如果它没有被禁用，那么您将获得无扩展名 URL。基本上发生的情况是，在重定向过程中，该过程没有意识到“eurl.axd/GUID”上的内部添加不是实际 URL 的一部分，因此它被保留（而不是被剥离）。现在，如果您故意尝试在您的网站上使用无扩展名 URL 和重定向，那么希望其他人可以在这里提供帮助。

但是，如果您不使用无扩展 URL，则需要禁用它。您可以通过更改注册表项来做到这一点：

`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0\EnableExtensionlessUrls = 0`

并且您必须在更改该注册表项后重新启动 IIS。如果您没有该注册表项，则 IIS 将其视为“开启”(EnableExtensionlessUrls = 1)。因此，您必须明确添加它才能摆脱它。

注意：如果您运行的是 64 位，则您要查找的注册表项位于不同的位置：

`HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\ASP.NET\v4.0.30319.0\EnableExtensionlessUrls = 0`

# scala - 使用 JDBC 创建 PostgreSQL 触发器

> ID：10460542
> 
> 赞同：5
> 
> 时间：2012-05-05T09:31:34.863
> 
> 标签：scala, jdbc, plpgsql, postgresql-9.1, playframework-2.0

我正在尝试在[Play2.0](http://www.playframework.org/)数据库演化脚本中创建 PostgreSQL 触发器。sql 代码相对简单，在 pgAdminIII 中运行良好：

```
CREATE OR REPLACE FUNCTION update_modified() RETURNS TRIGGER AS $$
  BEGIN
    NEW.modified = now();
    RETURN NEW;
  END;
$$ LANGUAGE 'plpgsql'; 
```

但是，运行进化时出现错误：`ERROR: unterminated dollar-quoted string at or near "$$ BEGIN NEW.modified = now()"`. SQL 代码似乎在函数中遇到的第一个分号处被截断。我正在为 PostgreSQL 使用“9.1-901.jdbc4”JDBC 驱动程序。

**更新：**

[Evolutions.scala](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/db/evolutions/Evolutions.scala)中的代码（第 219+ 行）对`;`. 框架本身似乎有问题：

```
// Execute script
s.sql.split(";").map(_.trim).foreach {
  case "" =>
  case statement => execute(statement)
} 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T16:39:37.763

您可以尝试以下操作。

```
 String sql = "CREATE OR REPLACE FUNCTION update_modified() RETURNS TRIGGER AS $$ " +
            "BEGIN " +
                "NEW.modified = now(); " +
                "RETURN NEW; " +
                "END; " +
            "$$ LANGUAGE 'plpgsql';";
    DataSource ds = getDataSource();
    try {
        Connection conn = ds.getConnection();
        conn.setAutoCommit(true);
        Statement st = conn.createStatement();
        st.executeUpdate(sql);
        st.close();
        conn.close();
    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

希望这对你有用。

# c++ - 当我使用两个以上双引号 (\") 时进程未启动

> ID：10460544
> 
> 赞同：2
> 
> 时间：2012-05-05T09:31:41.567
> 
> 标签：c++

我正在编写一个小型 C++ 程序，它涉及启动一个带有许多参数的 .exe 进程，包括发送包含空格的路径，因此需要在路径周围加上双引号。我记得使用 \" 转义字符。

我已经尝试了很多不同的方法来启动这个过程，所以最终选择了 system()，只是为了让起始代码尽可能地简约。

我有这个代码：

```
string ExpandEnvironmentVariables(string input)
{
    char buffer[512];
    ExpandEnvironmentStringsA(input.c_str(), buffer, sizeof(buffer) / sizeof(*buffer));
    return buffer;
} 
```

据我所知，这很好用。

这是我用来启动进程的代码（所有变量都是 std::string）。这个工作正常，但是，它不包含我想要传递的所有参数。

```
system(ExpandEnvironmentVariables("\"" + path + "\" " + arg1 + " -c ").c_str()); 
```

这个不行：

```
system(ExpandEnvironmentVariables("\"" + path + "\" " + arg1 + " -c \"").c_str()); 
```

注意额外的双引号的添加。不是进程出错，而是进程甚至从未启动。

我正在使用 Process Monitor 来检测进程何时启动，并且只要我将额外的双引号添加到其中，就不会出现 process.exe。但是，这是我想要开始这个过程的（这也不起作用）

```
system(ExpandEnvironmentVariables("\"" + path + "\" " + arg1 + " -c \"" + arg2 + "\"" + arg3 + arg4 + " " + arg5 + arg6 + " " + arg6 + "\\" + arg7).c_str()); 
```

我什至尝试将双引号配对，但这也不起作用：

```
system(ExpandEnvironmentVariables("\"" + path + "\" " + arg1 + " -c \"test\"").c_str()); 
```

最后，我担心长度。添加第三个双引号是破坏它的原因。但是，在此之前，长度为 134 个字符。但是，我希望实际的启动例程长度为 346 个字符。这不会太长了吧？？？

我可以调试程序，获取格式化的字符串，然后粘贴到命令提示符中，这个过程完美地开始了。有了这些额外的引号，它的格式就完美了。但我无法通过 C++ 启动它！

有谁知道这里发生了什么？这让我非常生气！非常感谢您提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:37:50.280

编辑：

我会尝试并建议您两种解决方法：

1.  您可以将每个空格字符替换为;而不是使用`"`您的参数。`\"`要正确进行替换，您必须指定`\\"`为替换字符串；首先尝试不指定任何参数（仅用于命令名称），看看是否可以扩展它；

2.  将整个命令行写入批处理文件（似乎您在 Windows 上），然后执行该文件。

还要查看这篇[关于 Win32 双引号转义规则的帖子](http://www.perlmonks.org/?node_id=764004)。

尝试这个：

```
system(ExpandEnvironmentVariables("\"" + path + "\" " + arg1 + " -c \\\"").c_str()); 
```

注意 3 `\`：您想将反斜杠传递给 shell（就像在命令行上一样）；如果您只转义`"`一次，shell 会直接接收它，并将其解释为字符串分隔符。你想要的是外壳接收到它转义，因此`\`在`\"`.

# php - 通过 file_get_html 获取网页的源代码

> ID：10460550
> 
> 赞同：0
> 
> 时间：2012-05-05T09:32:35.540
> 
> 标签：php

我将 file_get_html 用于简单的 html DOM，但我不知道如何获取 url 的页面源！有什么办法吗？我不是在谈论疼痛文本！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T09:34:21.010

试试`file_get_contents`。它将获取网站网址的来源

如果你想看源代码试试这个

```
echo htmlentities(file_get_contents("http://www.google.com")); 
```

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

您也可以使用 CURL 执行此操作

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $file);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, "http://www.google.com");
$result = curl_exec($ch);
curl_close($ch); 
```

# c# - 如何打印水晶报表？

> ID：10460551
> 
> 赞同：1
> 
> 时间：2012-05-05T09:32:40.950
> 
> 标签：c#, printing, crystal-reports

我是水晶报表打印的新人。任何人都建议我使用示例（源代码）在 C# 桌面应用程序中打印水晶报表的最佳方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T21:46:06.363

尝试这个

```
private void button1_Click(object sender, EventArgs e)
{
    CrystalReport1 rpt = new CrystalReport1();
    SqlConnection cn = new SqlConnection("data source=localhost;initial catalog=acc;uid=sa;pwd=fantastic;");
    cn.Open();
    SqlCommand cmd = new SqlCommand();
    SqlDataAdapter da = new SqlDataAdapter();
    DataTable dt = new DataTable();
    cmd.Connection = cn;
    cmd.CommandText = "select EmpNo, EName from Emp";
    da.SelectCommand = cmd;
    dt.Clear();
    da.Fill(dt);
    rpt.SetDataSource(dt);
    rpt.PrintToPrinter(1, false, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:52:45.900

您是否希望用户在需要时打印？

如果是这样，只需启用 CrystalReportViewer 控件上的打印选项。

否则 kashif 提供的答案是编程方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-21T18:29:40.510

这个对我有用。

```
private void PrintForm_Load(object sender, EventArgs e)
{
    ReportDocument cry = new ReportDocument();
    try
    {
        cry.Load(@"C:\Reports\CRYPT.rpt");//your report path
        SqlConnection con = new SqlConnection("Data Source=.;Initial Catalog=POS;Integrated Security=True");
        SqlDataAdapter sda = new SqlDataAdapter("Your Stored Procedure", con);
        sda.SelectCommand.CommandType = CommandType.StoredProcedure;
        sda.SelectCommand.Parameters.Add("@Doc_No", System.Data.SqlDbType.VarChar, 50).Value = Globlevariable.PrintDocNo;
        DataSet st = new DataSet();
        sda.Fill(st, "DATA");
        cry.SetDataSource(st);
            cry.PrintToPrinter(1,false,0,0);
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

# windows - 在 Windows 上运行 shell 脚本

> ID：10460552
> 
> 赞同：0
> 
> 时间：2012-05-05T09:32:47.103
> 
> 标签：windows, web-services, google-app-engine, shell, soap

我正在尝试运行这个 shell 脚本：

```
set class=com.example.Greeting
set clpth=./war/WEB-INF/classes 
set resourcedir=./war 
set outsourcedir=./src 
set outdir=./war/WEB-INF/classes 
wsgen -cp "%clpth%" -wsdl -keep -r "%resourcedir%" -d "%outdir%" -s "%outsourcedir%"  %class% 
```

所以，我复制了 cmd 中的每一行，但是当我复制最后一行时，出现了这个错误：

“'wsgen' 不是内部或外部命令、可运行程序或批处理文件。”

这是 App Engine 中 Web 服务应用程序的 shell 脚本。我正在关注本教程[https://developers.google.com/appengine/articles/soap?hl=es](https://developers.google.com/appengine/articles/soap?hl=es)但我不知道如何执行以下步骤：**4\. 在带注释的类上运行 wsgen**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:42:13.307

添加

```
PATH=%path%;C:\Program Files\jdk6u30\bin 
```

到脚本的顶部。根据需要更改路径，使其指向 wsgen.exe 的实际位置。

# c - 将 off_t 转换为 int

> ID：10460557
> 
> 赞同：0
> 
> 时间：2012-05-05T09:33:17.907
> 
> 标签：c

我在最后一行收到“int 格式，不同类型的 arg (arg 4)”错误。我应该只转换为 int 还是有更好的方法来处理这个？

```
struct stat info;
if (stat(file_path, &info) == -1 || errno == ENOENT)
    return -1;

if (stat(file_path, &info) != -1)
{
    char buf[LINELEN];
    snprintf(buf,LINELEN,"File Size: %d",info.st_size); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:48:31.967

Unfortunately there is no format defined for `off_t` which may be any signed integer type, depending on the platform and also on some macros (that regulate if you may access files larger than 4 GiB, e.g.). You can't rely on anything of this. The best is to use "j" as a length modifier in your `printf` format and to cast your value to `intmax_t`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:38:03.817

请改用 %ld 格式。这取决于您的平台，但通常将 off_t 定义为 long。也可以是无符号的，在这种情况下使用 %lu。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T09:38:55.533

对于`off_t`类型，您应该像这样打印它：

```
snprintf(buf,LINELEN,"File Size: %jd",info.st_size); 
```

注意`j`格式化程序中的 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T09:41:09.743

`st_size`是类型的`off_t`，这真的是一个`long`。

所以正确的调用应该是：

```
snprintf(buf,LINELEN,"File Size: %ld",info.st_size); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T10:19:11.370

为了安全、正确和可移植：在传递可变参数时始终包含显式转换，例如传递给 printf，如果你传递的东西在你编译的地方可能没有相同的类型。例如，计算出你认为 off_t 可以得到多大（long 应该至少和 off_t 一样大），转换成那个，并确保你的 printf 格式接受你现在安全知道你会传入的 long . 对于可能不同的类型，没有强制转换的 printf 是在自找麻烦。

# javascript - Dynamics CRM 2011 Outlook 客户端中的 JavaScript 弹出窗口

> ID：10460559
> 
> 赞同：2
> 
> 时间：2012-05-05T09:33:26.177
> 
> 标签：javascript, asp.net-mvc, outlook, dynamics-crm-2011

在我当前的项目中，我们创建了一个自定义 MVC 3 Web 应用程序，它从用户和外部 Web 服务收集数据。收集数据后，我们需要在 Outlook 中打开 CRM 帐户记录。

从 javascript 我目前正在使用 window.open(...) 方法，但这会打开一个 IE 窗口。我找到了对 CRM 内部[openstdwin](http://blog.customereffective.com/blog/2011/12/jscript-pop-up-in-crm-402011-internet-explorer-vs-outlook.html) (...) 方法的引用，但无法从 MVC 应用程序中的自定义 javascript 中使用此方法。请参阅下面的代码片段。

是否可以从自定义 Java 脚本/独立 Web 应用程序在其“Outlook 窗口”中打开 CRM 记录？

我们使用的是 CRM 2011 和 Outlook 2007。MVC Web 应用程序托管在与 CRM 相同的服务器上的 IIS 中，但使用不同的 Site/appPool/appPool 标识。

```
/// <reference path="../jquery-1.5.1.min.js"/>
/// <reference path="account.functions.js"/> 
/// <reference path="C:/Program Files/Microsoft Dynamics CRM/CRMWeb/_static/_common/scripts/Global.js"/>

// Open record – called on button click in MCV app
function openNewRecord() {
        var url = getNewNewAccountUrl(); // e.g. http://<server>/<org>/main.aspx?etc=1&amp;extraqs=%3fetc%3d1&amp;pagetype=entityrecord
        var name = "newWindow"; 
        var width = 800; 
        var height = 600; 
        var newWindowFeatures = "status=1";

        // Regular Jscript function to open a new window 
        //window.open(url); 

        // CRM function to open a new window, not working
        openStdWin(url, name, width, height, newWindowFeatures); 
```

}

提前致谢，

问候厄伦德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:26:24.847

如 ccellar 所述，Outlook 窗口是 IE 窗口。通过使用：

```
window.open(url, 'Account', 'scrollbars,resizable'); 
```

我能够从窗口中隐藏菜单栏和地址栏。自定义弹出窗口现在几乎等于本机 Outlook 窗口，除了图标和标题，这没关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:09:30.110

Outlook 客户端不执行任何其他操作。Outlook客户端打开的所有记录窗口 *都是*IE窗口。因此，您可以自行打开窗口。

# c++ - 无法在 gdb 中使用引用参数调用函数

> ID：10460567
> 
> 赞同：6
> 
> 时间：2012-05-05T09:34:22.980
> 
> 标签：c++, gdb

对于此功能：

```
void foo_ref(const int& i)
{
  cout << i << endl;
} 
```

当我在 gdb 中调用它时失败了：

```
(gdb) call foo_ref(5)
Attempt to take address of value not located in memory. 
```

当然，在这个简单的例子中，没有必要使用引用作为参数。如果我使用普通的“int”，那就没问题了。
其实真正的例子是一个模板函数，像这样：

```
template<class T>
void t_foo_ref(const T& i)
{
  cout << i << endl;
} 
```

当“T”为“int”时，我遇到了上面提到的问题。

它是gdb中的错误吗？或者我可以在 gdb 中调用这样的函数吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T10:05:30.253

这是可能的，尽管不是以直观的方式（我仍然会将其归类为错误）。

你需要一个实际的内存区域（一个变量，或者堆分配的东西）。

```
(gdb) p (int *) malloc(sizeof(int))
$8 = (int *) 0x804b018
(gdb) p * (int *) 0x804b018 = 17
$9 = 17
(gdb) p t_foo_ref<int>((const int&) * (const int *) 0x804b018 )
17
$10 = void
(gdb) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:05:12.610

5 是一个文字，当您将其传递给函数时，编译器会尝试将其存储在为函数参数 i 分配的地址中。但是由于 i 是一个参考，因此 5 无法存储在内存中，因此您的错误。

# php - 左连接到php中的嵌套数组

> ID：10460570
> 
> 赞同：0
> 
> 时间：2012-05-05T09:34:31.217
> 
> 标签：php, mysql, left-join

我正在寻找此类查询的通用解决方案：

```
SELECT * FROM A
LEFT JOIN B on A.ID = B.FK_ID
SELECT * FROM A

LEFT JOIN B on A.ID = B.FK_ID
LEFT JOIN C on B.ID = C.FK_ID 
```

将它放在一个数组中，因此连接的记录将位于嵌套数组中。这很复杂不是吗？我所拥有的只是查询并获取了所有记录

编辑：

它通常会返回

```
A.col1  A.col2  A.col3  B.col1  B.col2  B.col3 
```

如果 A 有 4 行且 B 的 2 条记录连接到 A，则 A 将有 5 行。相反，我想要这个：

```
A.col1  A.col2  A.col3  B (array) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:00:02.317

当您构造稍有不同的源数组时，您可以使用此函数。

这是重复的（http://stackoverflow.com/questions/8431463/more-efficient-hierarchy-system/8431551）（parent_id，id，title）：

```
$q = mysql_query("SELECT id, parent_id, name FROM categories");
while ($r = mysql_fetch_row($q)) {
  $names[$r[0]] = $r[2];
  $children[$r[0]][] = $r[1];
 }

function render_select($root=0, $level=-1) {
  global $names, $children;
  if ($root != 0)
    echo '<option>' . strrep(' ', $level) . $names[$root] . '</option>';
  foreach ($children[$root] as $child)
    render_select($child, $level+1);
}

echo '<select>';
render_select();
echo '</select>'; 
```

# android - Android：相对布局，改变X坐标

> ID：10460575
> 
> 赞同：0
> 
> 时间：2012-05-05T09:34:48.360
> 
> 标签：android

我有一个在整个屏幕上具有相对布局的 Activity。在左上角我有按钮。在按钮单击时，我想将布局从 0 X 坐标移动到 100 X 坐标。我在 onclick 方法中尝试了类似的方法：

```
 RelativeLayout.LayoutParams param = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
            param.leftMargin = 100;
            meRelativeLayout.setLayoutParams(param); 
```

但是这个东西只是让我的相对布局宽度变小了，它改变了左边的marinee，就是这样，但我不想改变布局宽度，只想改变X坐标，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:41:31.447

对我来说，您的代码似乎很完美，只是问题在于`FILL_PARENT`. 当您使用`FILL_PARENT`时，*系统将分配显示中剩余的空间（较少边距）*，这就是您布局变小的原因，所以试试这个。

```
int width= mActivity.getWindowManager().getDefaultDisplay().getWidth();

RelativeLayout.LayoutParams param = new RelativeLayout.LayoutParams( width, LayoutParams.FILL_PARENT);
            param.leftMargin = 100;
            meRelativeLayout.setLayoutParams(param); 
```

# python - Python 子进程语言环境设置

> ID：10460576
> 
> 赞同：1
> 
> 时间：2012-05-05T09:34:54.090
> 
> 标签：python, opennlp

在 python 中执行`opennlp POSTagger`with`subprocess.call`时，结果出错。但是当我将相同的命令放入终端时，结果是正确的。

经过一些测试，我认为这是因为`opennlp`未能正确加载模型文件，所以问题是什么？该模型是用中文训练的，我使用python 2.7。

OpenNLP 运行时没有任何警告或错误，但它标记输入句子完全错误。它在终端中提供正确的标签。我想这是一个编码问题，但我不确定。

这是代码。它没什么特别的，只包含 ascii 字符。打印此命令并复制到终端，结果是正确的。

现在我知道这是语言环境/编码问题（通过 strace 调试脚本）。但是将 python 语言环境设置为`en_US.utf-8`or是没有用的`zh_CN.utf-8`。我的 shell 语言环境设置是`zh_CN.utf-8`.

```
opennlp_path = './opennlp/bin/opennlp'
pos_model = 'train.pos.model'
pos_predict_cmd = [opennlp_path, 'POSTagger', pos_model]
subproc = call(pos_predict_cmd) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:07:53.313

首先，查看[http://docs.python.org/library/subprocess.html#using-the-subprocess-module](http://docs.python.org/library/subprocess.html#using-the-subprocess-module)，阅读一两次，然后尝试使用`call(pos_predict_cmd, shell=True)`，看看是否有效。

# facebook - Facebook 画布应用程序未加载

> ID：10460581
> 
> 赞同：0
> 
> 时间：2012-05-05T09:35:43.433
> 
> 标签：facebook, debugging, heroku, facebook-canvas

我的问题与此处的问题几乎相同：[Facebook 画布应用程序从不加载 <body> 内容？](https://stackoverflow.com/questions/9305252/facebook-canvas-application-never-loads-body-contents)

但是我正在通过 Heroku 的雪松堆栈运行烧瓶。我的 url 一直是 heroku 子域，所以上面的解决方案不适用。大多数情况下，应用程序从不加载超过 head 标签。有没有人在这个问题上取得任何进展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:44:22.570

我发现 Heroku 的帖子并没有要求所有必需的字节。这是 Heroku 日志中我的 POST 的样子：

2012-07-06T02:33:33+00:00 app[web.1]: 10.191.221.194 - - [06/Jul/2012 02:33:33] “POST /?fb_source=search&ref=ts HTTP/1.1” 200 - 2012-07-06T02:33:33+00:00 heroku[路由器]: POST simple-frost-5348.herokuapp.com/?fb_source=search&ref=ts dyno=web.1 queue=0 wait=0ms service= 3040ms 状态=200**字节=2757**

您会看到它要求 2757 字节，这正是我的应用程序中发生截断的地方。

它仅在您登录并连接 FB 应用程序后才会发生。希望这可以帮助。

# javascript - 从插件内部的函数访问 jquery-ui 插件变量？

> ID：10460583
> 
> 赞同：0
> 
> 时间：2012-05-05T09:35:46.967
> 
> 标签：javascript, jquery, jquery-ui

我有一个标记插件，我正在重构它。

我一直在传递我每次构造的对象，所以，我现在有一个函数，我传递值并返回对象。这工作正常，除了现在我需要访问插件中的一个变量。

如果您查看底部，您会在里面看到`_addTag`我调用了`this.tag`并且我想将元素的数量存储在其中，`tagArray`但我的调用`this`不会调用小部件。

```
(function ($) {
    $.widget("ui.tagit", {

        // default options
        options:{},

        //initialization function
        _create:function () {

            var self = this;
            this.tagsArray = [];
            ...

            ...
            this._addTag('label', 'value');

            }

        },

        _addTag:function (label, value) {
            ...

            //THIS IS WHERE THE TAG OBJECT IS CREATED
            var tag = new this.tag(label, (value === undefined ? label : value));
            tag.element = $('<li class="tagit-choice"'
                + (value !== undefined ? ' tagValue="' + value + '"' : '')
                + '>' + label + '<a class="tagit-close">x</a></li>');
            ...
        },

        tag: function (label, value, element) {
            var self = this;
            return {
                label:label,
                value:value,
                element:element,
                index: self.tagsArray.length
            }
        }

    });
})(jQuery); 
```

改为`this`：

```
$.widget.tag
__proto__: Object
constructor: function (label, value, element) {
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:10:17.180

在 JavaScript 中使用`new`关键字调用函数会调用它，并将其上下文 ( `this`) 设置为新创建的对象。

在`tag`函数中的示例中，您希望将其设置为您正在使用的小部件对象，但由于使用了关键字`this`，它将被设置为新创建的对象。`new`因此，它将失败，`self.tagsArray.length`因为新创建的对象没有`tagsArray`属性。

有关关键字的更多信息，`new`我建议阅读有关它的 MDN 文章 - [https://developer.mozilla.org/en/JavaScript/Reference/Operators/new](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)。

# android - java.lang.OutOfMemoryError

> ID：10460588
> 
> 赞同：-3
> 
> 时间：2012-05-05T09:35:55.213
> 
> 标签：android, camera

我用相机拍摄图像并将其存储在 sd 卡中，存储的图像必须从 sd 卡上传到 imageView，如下所示：

```
myBitmap = BitmapFactory.decodeFile(file.getAbsolutePath());
ImageView _image=(ImageView)view.findViewById(R.id.imageCarte);
_image.setImageBitmap(myBitmap); 
```

但我有这个错误：

> 05-05 08:23:20.593：E/AndroidRuntime(1936)：原因：java.lang.OutOfMemoryError：位图大小超出 VM 预算。

谁能帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:55:11.520

在移动设备中使用 BitmapFactory 是一个消耗内存的过程。当您尝试连续解码大量图像时会出现此问题。与在 java 中一样，没有选项可以释放分配给变量“myBitmap”的内存。所以请确保这些类型的变量在使用后设置为null。

也尝试使用

```
System.gc() to clear the garbage collection. 
```

如果执行“_image.setImageBitmap(myBitmap);”时抛出错误 行然后尝试在显示之前减小图像大小

# python - 使用 MEL 按钮的 -c 标志触发一个简单的 python 脚本？

> ID：10460592
> 
> 赞同：0
> 
> 时间：2012-05-05T09:36:58.187
> 
> 标签：python, mel

我试图使用使用 MEL 创建的按钮来触发 python 函数。所以我只是想知道我是否正确理解了文档，所以我只是使用了一个简单的打印调用来测试我的假设是否正确；这是我尝试过的：

```
button -label "TransX" -w 100 -c python ("print 'Hello You!'"); 
```

但是，这根本不会触发（或者如果确实如此，它所做的事情与在脚本编辑器中打印它不同：/）

更让我好奇的是，如果我把它包裹在这样的蜱虫中：

```
button -label "TransX" -w 100 -c `python ("print 'Hello You!'")`; 
```

它立即触发（在采购时），而不是在按下按钮时触发。如果有人能解释这种行为，那就太好了。

所以归结为： 1.如何正确使用 mel 运行 python 函数？2.为什么蜱虫的包裹会立即触发蟒蛇？

谢谢你的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T05:58:56.463

使用反引号将在执行时评估内容，这就是为什么您在运行时会立即看到打印语句

第一个命令不起作用，因为您没有正确编码“-c”标志的参数，它应该是这样的：

```
button -label "TransX" -w 100 -c "python(\"print hello\");"; 
```

这样，引号之间的所有内容都会传递给“button”命令以与“-c”标志一起使用，这就是为什么您必须转义内部引号，因此当 button 命令评估它时，它将被评估为：

```
python("print hello"); 
```

# c++ - 使用 python 作为服务器

> ID：10460601
> 
> 赞同：1
> 
> 时间：2012-05-05T09:37:53.100
> 
> 标签：c++, python

我有一些每 10 分钟左右运行一次的 python 代码。它读取数据，进行一些处理并产生输出。我想改变它，让它连续运行。

python 是否非常适合作为服务器运行（asin 连续运行），还是将我的应用程序转换为使用 c++ 会更好？如果我把它留在 python 中，你会推荐任何模块来实现这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:41:13.973

是的，如果您不需要性能服务器端或者您的应用程序是 I/O 绑定的。Youtube 是[完整的 python](http://www.gooli.org/blog/youtube-runs-on-python/)服务器端。

一个好的库就是标准库
[http://docs.python.org/library/socketserver.html#socketserver-tcpserver-example中的 socketserver 模块](http://docs.python.org/library/socketserver.html#socketserver-tcpserver-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:42:10.590

Python 可以用作服务器应用程序。我记得许多用 python 编写的 web 和 ftp 服务器。请参阅线程库中的线程。

# php - 如何使用php提交html页面的表单

> ID：10460611
> 
> 赞同：1
> 
> 时间：2012-05-05T09:39:42.233
> 
> 标签：php, forms, web-scraping

我需要知道是否可以加载 html 页面并使用 php 在此页面内提交表单。所以像：

```
<?php
   $html = fopen("http://www.mysite.com","r");
   //get position of form...
   ...
   //submit it 
?> 
```

有可能吗？有人能帮我吗？谢谢！！！

编辑：

我必须提交这个表格

```
https://annunci.ebay.it/pubblica-annuncio 
```

我的问题是，在这个页面中有一个图片上传，我不知道如何使用 php（抓取它）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:56:17.270

您还可以使用`curl`POST 到任何 URL，例如表单的操作 URL。

```
$ch = curl_init('http://example.com/form_action.php');
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('your' => 'data', 'goes' => 'here');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch); 
```

这将调用 URL [http://example.com/form_action.php](http://example.com/form_action.php)，就好像它是从一个将“your”设置为“data”并且“goes”设置为“here”的表单调用的。

要找出您需要发布的 URL，您可以检查源代码。`<input>`执行此操作时，请检查您要发送的标签上的“名称”属性。

编辑：如果 POST url 和字段可以更改，您应该检查[@Adan's answer](https://stackoverflow.com/a/10460718/782323)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:30:22.127

您可以使用 curl 在 php 中获取页面。正如@Lumbendil 的回答中提到的那样。为了解析 HTML，您可以使用类似的库

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

或者你可以使用

[http://code.google.com/p/phpquery/](http://code.google.com/p/phpquery/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T09:55:51.173

基本上这是你需要做的

1- 获取 HTML 页面的内容`file_get_contents()`（考虑到安全风险） 2- 使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)
解析 HTML 3- 获取表单的属性，最重要的是使用 ( , ) 4- 使用 5- 获取表单的字段名称使用该方法向url发送带有您想要使用[cURL](http://php.net/manual/en/book.curl.php)替换字段的数据的请求
`ACTION``METHOD``DOMDocument`
`DOMDocument`
`ACTION``METHOD`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T10:02:21.373

作为另一种更干净的选择，您可以使用[eBay API](http://developer.ebay.com/common/api/)。它提供了添加新项目的方法，并且可能已经为 php 构建了库，例如[eBay 的 PHP Accelerator 工具包](https://www.x.com/developers/ebay/php-accelerator-toolkit-ebay-trading-api-edition)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T10:41:10.347

我提供了一个从网络获取的代码来获取页面的内容。之后，您可以使用 jquery(maybe) 来强制提交功能。

```
$url = "URL OF YOUR PAGE"; // I have tested page from same server
$lines = file( $url );
foreach( $lines as $line_num => $line ) {
    $line = htmlspecialchars( $line );
    $line = str_replace( "&lt;", '<span>&lt;', $line );
    $line = str_replace( "&gt;", '&gt;</span>', $line );
    $line = str_replace( "&lt;!–", '<em>&lt;!–', $line );
    $line = str_replace( "–&amp;gt;", '–&amp;gt;</em>', $line );
    echo "<span class=\"linenumber\">Line <strong>$line_num </strong></span> : " . $line . "<br/>\n";
} 
```

上面的代码给了我来自同一服务器上另一个页面的内容。现在您必须找到一种方法来检查表单是否存在，然后；强制提交该表格。

# c++ - 无序关联容器，最佳选择

> ID：10460626
> 
> 赞同：0
> 
> 时间：2012-05-05T09:42:19.213
> 
> 标签：c++, stl, set

哪个选项是使用 unordered_set 进行有效查找的最佳方式，

*   Boost（我想这是要走的路，因为这些将在下一个标准中）
*   Sgi STL
*   STL端口

我之所以问，是因为 Scott Meyers 在 Effective STL 中提到了这三个，但这本书有点旧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:46:12.160

If you have to work with a pre-C++11 compiler, use boost:

*   it's almost everywhere,
*   it's a header library,
*   it's modular,
*   it's compliant with all the standards, so totally compatible with the standard library.

# php - 回滚会提高性能吗？

> ID：10460629
> 
> 赞同：0
> 
> 时间：2012-05-05T09:42:51.457
> 
> 标签：php, sql, postgresql, database-performance

我刚刚成功尝试使用 beginTransaction() 在我的项目中使用 PHP 执行我的 sql 语句。我有一系列项目需要写入数据库，并且每个项目都必须在存储之前针对某些内容进行验证。关闭数据库的自动提交行为的好处之一是，如果中间出现问题，您可以回滚整个事务。在我的项目中，如果一项无效，整个数组不应该记录在数据库中，这就是我选择使用这种方法的原因。

现在我只是想知道这在性能方面是否真的是更好的方法？因为即使验证了数组中的最后一项，我仍然需要手动 commit() 之前的执行。提交是否重复执行sql？

我现在能想到的唯一优点是，如果您想验证所有项目（假设所有项目都是有效的）然后编写每个项目，您只需要执行一个循环而不是两个循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:50:19.043

首先验证一切，然后开始一个事务，数据库交互。不进行交易以帮助验证数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:07:46.330

您可以使用保存点。从[手册](http://www.postgresql.org/docs/current/static/sql-savepoint.html)：

```
BEGIN;
     INSERT INTO table1 VALUES (1);
     SAVEPOINT my_savepoint;
       INSERT INTO table1 VALUES (2);
     ROLLBACK TO SAVEPOINT my_savepoint;
     INSERT INTO table1 VALUES (3); 
COMMIT; 
```

您仍然需要验证您的输入，但您现在可以在单个事务中回滚。使用事务可以使数据库更快，因为有更少的（隐式）提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:08:23.590

Commit 不会重复 SQL 执行。

通常，在事务中工作时，无论何时执行 INSERT/UPDATE/DELETE 语句，数据库都会将记录/数据页的副本复制到事务日志中，然后执行实际的记录更改。

如果其他人在您的交易过程中试图访问这些记录/数据页面，他们将被重定向到交易日志中的副本。

然后，当你执行提交时，数据库本身的数据已经更新了，服务器需要做的就是删除事务日志。

如果您回滚而不是提交，那么数据库服务器将通过事务日志回溯，将您更新的所有记录/数据页面恢复到其原始状态，并删除每个事务日志条目。

因此，回滚是一种开销，因为数据库服务器必须将数据恢复到其事务前状态。

# actionscript-3 - Google Analytics for Flash .swc

> ID：10460632
> 
> 赞同：0
> 
> 时间：2012-05-05T09:43:04.937
> 
> 标签：actionscript-3, google-analytics

我想用 Google Analytics for Flash AS3 跟踪事件。我已经[下载了库，文件夹](http://code.google.com/p/gaforflash/downloads/list)*lib*、**analytics.swc**和**analytics_flash.swc**中有 2 个 .swc 文件。

它们之间有什么区别？

# vim - 在 Vim 中包含引号、括号等

> ID：10460639
> 
> 赞同：1
> 
> 时间：2012-05-05T09:44:16.043
> 
> 标签：vim

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T09:58:26.193

有*很多*插件可以做到这一点。问之前你搜索[过 vim.org 的插件库](http://www.vim.org/scripts/script_search_results.php?keywords=pair&script_type=&order_by=rating&direction=descending&search=search)吗？

您还可以执行以下操作：

```
inoremap { {}<C-o>h 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T10:00:05.693

[lh-brackets](http://code.google.com/p/lh-vim/wiki/lhBrackets#The_bracketing_subsystem)提供插入模式映射和周围映射。如果您想将它用于我不使用的文件类型，您可能必须添加您的专业化——这很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T09:47:38.490

The surround plugin might work for you:

[http://www.vim.org/scripts/script.php?script_id=1697](http://www.vim.org/scripts/script.php?script_id=1697)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-05T10:31:50.590

在摆弄之后，我发现这样一个功能的插件会有点矫枉过正。

我已经这样设置了我的 vimrc：

```
inoremap { {}<C-o>i 
```

我还添加了：

```
inoremap <C-l> <C-o>A
inoremap <C-L> <C-o>A<Space> 
```

因此，我可以快速跳出括号并再次开始输入，而无需额外的空格。

# iphone - Facebook information attachment issue

> ID：10460647
> 
> 赞同：0
> 
> 时间：2012-05-05T09:45:28.923
> 
> 标签：iphone, fbconnect

I worked on app where I was sharing information using FBConnect. I was sharing title, description, URL and Image which was working fine before some days ago but suddenly I am getting issue while sharing data

**ERROR; This endpoint has been deprecated .To temporarily reenable it ,you may disable the "augest_2012" platform migration. it will be disable permanently on August 1,2012**

can any please help me on this issue.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:51:09.343

这不是答案！但我 在 Android 应用程序 facebook 集成上 实现[此错误时遇到此错误](http://code.google.com/r/hrl5000-production-clone/source/browse/sample/src/com/codecarpet/fbconnect/sample/MainActivity.java)

# html - MongoDB 和动态 html 表单

> ID：10460650
> 
> 赞同：1
> 
> 时间：2012-05-05T09:45:48.290
> 
> 标签：html, django, database-design, mongodb

我一直在开发产品目录。我的所有需求都非常适合 MongoDB，但有一个问题：

有如下结构的类别：

```
{
 title:"Auto", // for h1 on page
 id: 1,        // for urls
 level: 1,     //
 left: 2,      // nested set implementation
 right:10      //
} 
```

**当用户访问像“ www.example.com/category/1** ”这样的网址时，我需要显示 html 表单来过滤显示的商品。我很确定在服务器上存储每个类别的静态定义是个坏主意（大约 300 个类别，我使用的是 Django => 300 个表单模型？）

所以我的想法是在 MongoDB 中存储有关每个类别的元信息。经过一番研究，我发现我需要 3-4 个“html 小部件”来构建我需要的任何过滤器表单。

例如：

范围字段在 HTML 中将如下所示

```
<fieldset>
<legend>Price</legend>

<label for="price_from">from</label>
<input type="text" name="price_from">

<label for="price_to">to</label>
<input type="text" name="price_to">
</fieldset> 
```

及其 MongoDB JSON 表示：

```
{
 name:"price",
 title:"Price",
 type:"range",      // "range" type - 2 inputs with initial values
 categories:[1,2,5],// categories to which this so called "widget" relates
 values:[
   {from: 100},
   {to: 500}
 ] 
```

}

再举一个例子：

选择组：

它的 HTML 版本

```
 <fieldset>
   <legend>Size and color</legend>

   <select name="size">
    <option value="small">Small size</option>
    <option value="medium">Medium size</option>
    <option value="huge">Huge size</option>
   </select>
   <select name="color">
    <option value="white">White color</option>
    <option value="black">Black color</option>
    <option value="purple">Purple color</option>
   </select>
 </fieldset> 
```

及其 MongoDB JSON 版本：

```
{
  title:"Size and color",
  type:"selectgroup",
  categories:[2,4,6]
  items:[
         {
           name:"size",
           values:["small", "medium", "huge"]
         },
         {
           name:"color",
           values:["white", "black", "purple"]
         }
  ]
} 
```

所以主要思想是：**按 category_id 从集合中获取所有小部件，解析它们并打印完整的 HTML 表单。**

## 优点

*   轻松将任何新类型的小部件添加到数据库
*   易于为此类小部件添加解析器以从 JSON 生成 HTML
*   每个小部件可以与许多类别相关 => 没有重复项

## 缺点

*   小部件的集合没有更少或更多固定的文档结构（实际上我在这里看不到真正的问题）
*   与小部件相关的所有值都被嵌入。
*   硬验证，因为字段是动态的 => 服务器端没有相应的模型（现在我不知道如何验证这个）

我的问题是：***有人知道这样做的更好方法吗？我的方法的优点很酷，但缺点很糟糕。***

感谢您的帮助，抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T19:19:43.247

如果您只需要 3-4 组表单小部件来显示 300 多个类别的所有必要查询表单，则应该使用 Django 表单来指定小部件。您不需要 300 多个 Django 表单，因为您可以轻松地在一页中使用多个表单。

举个简单的例子，你的

```
<fieldset>
<legend>Price</legend>

<label for="price_from">from</label>
<input type="text" name="price_from">

<label for="price_to">to</label>
<input type="text" name="price_to">
</fieldset> 
```

会成为

```
class PriceForm(forms.Form):
    price_from = forms.IntegerField()
    price_to = forms.IntegerField() 
```

...当然还有嵌入表单的模板，该表单将提供`<fieldset>`其他必要的 html 文档结构。

编辑：您的表单标签等似乎取决于类别，您仍然需要在 mongodb 的类别文档中了解有关表单的一些信息。但是，通过使用 django 表单，您可以免费获得许多有用的功能，例如输入验证。

您可能可以通过将特定类别的值（标签等）从 mongodb 以及必要的表单提供给模板的方式对模板进行参数化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:37:28.393

使用 Map/Reduce 构建动态过滤（分面）搜索的技术：http: [//ianwarshak.posterous.com/faceted-search-with-mongodb](http://ianwarshak.posterous.com/faceted-search-with-mongodb)

我已成功将代码迁移到 Python（并在 Django 项目中使用它）。

# android - How to add the item to system clipboard menu?

> ID：10460652
> 
> 赞同：3
> 
> 时间：2012-05-05T09:45:51.510
> 
> 标签：android

That is, in addition to select-copy-paste, I need your own item. Not only in my application, but also in others. Is it real?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T09:50:07.647

是的，看看[http://developer.android.com/guide/topics/clipboard/copy-paste.html](http://developer.android.com/guide/topics/clipboard/copy-paste.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-24T21:25:16.020

如果您的应用实现了 PROCESS_TEXT Intent 过滤器，则由 Android 6 及更高版本提供。例如在您的 AndroidManifest.xml 中：

```
<activity android:name="My Romanizer App"
 android:label="Romanize this text">
  <intent-filter>
    <action android:name="android.intent.action.PROCESS_TEXT" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="text/plain" />
  </intent-filter>
</activity> 
```

然后在您的 onCreate() 方法中，检查 getIntent().getCharSequenceExtra(Intent.EXTRA_PROCESS_TEXT).toString()

如果您想将替换文本返回给呼叫您的应用程序，您需要执行以下操作：

```
Intent i=new Intent();
i.putExtra(Intent.EXTRA_PROCESS_TEXT, "you have been romanized");
setResult(RESULT_OK, i); 
```

您可以通过检查 getIntent().getBooleanExtra(Intent.EXTRA_PROCESS_TEXT_READONLY, false)==false 来检测发回结果是否合适。

# ios - 保存 NSUserDefault 数据并在表格视图中显示

> ID：10460655
> 
> 赞同：2
> 
> 时间：2012-05-05T09:47:19.467
> 
> 标签：ios, uitableview, nsarray, nsuserdefaults

我正在尝试通过 NSUserDefaults 保存我的数据并在表格视图中查看它。我已经将四个文本数据设置为一个数组（dataArray），所以我可以在表格视图中查看它。但我无法将数据加载到表格视图中。所以我错过了什么吗？

提前致谢。

```
-(IBAction)save{

NSUserDefaults *add1 = [NSUserDefaults standardUserDefaults];
[add1 setObject:txt1 forKey:@"txt1"];
[add1 setObject:txt2 forKey:@"txt2"];
[add1 setObject:txt3 forKey:@"txt3"];
[add1 setObject:txt4 forKey:@"txt4"];

[add1 synchronize]; 
}

- (void)viewDidLoad
{
[super viewDidLoad];
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
self.dataArray = [NSArray arrayWithObjects:[prefs objectForKey:@"txt1"], [prefs objectForKey:@"txt2"], [prefs objectForKey:@"txt3"],[prefs objectForKey:@"txt4"] nil];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

// Set up the number of rows
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [dataArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *string = [dataArray objectAtIndex:indexPath.row];
    static NSString *CellIdentifier = @"Cell";

    UITableView *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:58:04.297

您必须调用`[yourUserDefaultObject synchronize];`以保存 的状态`NSUserDefaults`，但您实际上并不需要创建 NSUserDefaults 的 4 个对象，您只需创建一次，然后调用`setObject:forKey:`同一个实例，然后再调用`synchronize`.
然后只需设置`cell.textLabel.text=string;`在`cellForRowAtIndexPath`回调中设置单元格的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:58:08.230

首先同步 nsuserdefaults 和

您需要分配 tableviewcell 并将文本分配给文本标签

在 cellForRowAtindexpath 方法中添加以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *string = [dataArray objectAtIndex:indexPath.row];

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  if(cell==nil)
{
 cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier] autorelease];
}
  cell.textLabel.text=string;

  return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T09:59:51.860

老兄添加以下行，因为您需要在单元格的某处添加测试。这样可以显示在`tablviewcell.` 如果可能的话，请先制作数组而不是保存整个数组`NSUserDefaults`，这样可以节省时间，这是进行编码的更好方法。

```
cell.textLabel.text=string; 
```

**已编辑>>>**

```
 UILabel *label;
label = [[UILabel alloc]initWithFrame:CGRectMake(10, 10, 50, 40)];

label.text = string; 
```

// 或者

```
label.text = @"Hi I am here..";

label.backgroundColor = [UIColor greenColor];
label.textColor = [UIColor whiteColor];
[cell addSubview:label]; 
```

# c++ - operator->的递归应用

> ID：10460662
> 
> 赞同：9
> 
> 时间：2012-05-05T09:48:36.423
> 
> 标签：c++

据说箭头运算符是递归应用的。但是当我尝试执行以下代码时，它会在应该打印 4 时打印乱码。

```
class dummy
{
public:
    int *p;

    int operator->()
    {
        return 4;
    }
};

class screen 
{
public:
    dummy *p;

    screen(dummy *pp): p(pp){}
    dummy* operator->()
    {
        return p;
    }
};

int main()
{
    dummy *d = new dummy;
    screen s(d);
    cout<<s->p;
    delete d;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-05T09:56:30.983

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T10:50:46.300

**C++ Primer** (5th edition) formulates it as follows on page 570:

> The arrow operator never loses its fundamental meaning of member access. When we overload arrow, we change the object from which arrow fetches the specified member. We cannot change the fact that arrow fetches a member.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T09:57:40.383

The deal is once `screen::operator->()` returns a pointer (`dummy*`) the recursion stops because built-in (default) `->` in used on that pointer. If you want recursion you should return `dummy` or `dummy&` from `screen::operator->()`

# android - Android AsyncTask reducing latency

> ID：10460663
> 
> 赞同：0
> 
> 时间：2012-05-05T09:48:43.490
> 
> 标签：android, sockets

How to speed up Android's AsyncTask background thread.I have tried mentioning various process thread priorities and found no notable difference in speed.

I am doing some socket activity and if there are methods to tune Android Socket performance , please share here.I have already tried TCP_NODELAY socket option and it didn't help.

# jquery - 设置链接的活动状态时出现问题

> ID：10460670
> 
> 赞同：0
> 
> 时间：2012-05-05T09:50:05.143
> 
> 标签：jquery, css

我有一个[示例菜单演示](http://jsfiddle.net/pEbt5/)。

效果如demo中所想。但是当我在我的网站上应用相同的内容并`href="#"`替换为`href="XXX.aspx"`时，效果并不理想。似乎没有任何工作。

有人可以帮我解决我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:30:16.780

这件事对我来说效果很好。

```
$('#Menu ul li a').each(function() {
    var path = window.location.href;
    var current = path.substring(path.lastIndexOf('/') + 1);
    var url = $(this).attr('href');

    if (url == current) {
        $(this).addClass('active');
    };
}); 
```

# javascript - 使用 javascript 编辑 HTML：插入 \n 而不是 作为新行

> ID：10460672
> 
> 赞同：1
> 
> 时间：2012-05-05T09:50:16.423
> 
> 标签：javascript, dom, wysiwyg

我正在使用此代码在内容可编辑的 HTML 文档中插入新行：

```
execCommand("insertHTML", false, '\n'); 
```

这在 Chrome 和 Safari 中适用于我，但在其他浏览器中会导致 < br> 或新段落。因为我正在编辑 <pre> 标签，所以我不希望浏览器将 \n 更改为 <br>。我怎样才能做到这一点？

我已经尝试过使用 range.insertNode() 之类的函数或在 FireFox 中操作 insertBrOnReturn，但它总是一样的。没有浏览器更改我的输入，就没有办法在文档中插入 \n 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:35:58.233

我认为没有跨浏览器的工作方式可以添加`\n`...

```
var currentContent = myContent; // "currentContent holds" the current content
execCommand("insertHTML", false, '\n'); // inserts the line break
if (newContent !== currentContent + '\n') { // "newContent" holds the content afterwards
  console.log('use String.prototype.replace to replace created tag with "\n"');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:44:36.867

我假设您想保存编辑后的内容，那么在获取标签内容时将所有`<br>`s替换为 s 怎么样？`\n`像这样：

```
document.getElementById("editable").innerHTML.replace(/<br>/g, "\n"); 
```

* * *

编辑：您也可以只使用innerText 而不是innerHTML。这样做时，所有换行符都显示为`<br>`标签（至少我在 Chrome 中得到了该结果）。这个解决方案不是很好，但至少总是一样的。

# c# - Linq 的通用版本按 Foo 中包含的值类型排序

> ID：10460673
> 
> 赞同：0
> 
> 时间：2012-05-05T09:50:18.763
> 
> 标签：c#, linq, generics

我有以下方法

```
public static List<T> MergeAndSort<T>(List<List<T>> listOfLists) where T : Foo
    {
        List<T> list = listOfLists.SelectMany(bunch => bunch).ToList();

        list.OrderBy(x => x.FooLongMember);

        return list;
    } 
```

我寻找提供完全通用版本的解决方案。目前，我需要指定 T 是什么，并在 Foo 中指定特定的成员名称，以便此类成员订购。该成员当前是 long 类型。我可以将函数重写为至少不必指定我传入 Foo 类型的列表列表吗？我的目标是 C#，.Net4.0。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:03:43.120

像这样的东西？

```
public static IOrderedEnumerable<T> MergeSortWrapper<T,TKey>(
      IEnumerable<IEnumerable<T>> listOfLists,
      Func<T,TKey> keySelector) 
{
    return listOfLists.SelectMany(bunch => bunch)
                      .OrderBy(keySelector);
} 
```

-

```
var result = MergeSortWrapper(listOfListOfFoos, x => x.FooLongMember).ToList(); 
```

# javascript - 获取 iframe 内源页面的高度

> ID：10460675
> 
> 赞同：0
> 
> 时间：2012-05-05T09:50:21.203
> 
> 标签：javascript, jquery, iframe, height

使用 JS 或 jquery 我需要获取`src`iframe 的 html 页面的高度。这就是我所拥有的，它没有返回值。

```
var iFrameID = document.getElementById('myframe');
iFrameID.height = iFrameID.contentWindow.document.body.scrollHeight; 
```

是的，我正在尝试以这种方式设置 iframe 的高度（根据内容调整 iframe 大小的常见问题）。我只知道`iFrameID.contentWindow.document.body.scrollHeight`没有给我源页面的高度值。这个问题在 Firefox 中不会发生。

编辑：这是供离线使用的。我不知道这是否有什么不同。

# javascript - 访问事件处理程序时遇到问题

> ID：10460677
> 
> 赞同：0
> 
> 时间：2012-05-05T09:50:34.230
> 
> 标签：javascript, event-handling, dom-events, parameter-passing

从我检查过的所有地方读到的内容来看，这就是我访问事件处理程序属性的方式：

```
canvas.addEventListener('onmousemove', traceMouse(e));  //Handler gets passed in as 'e'

function traceMouse(e) {   //Then I could just use it like a normal parameter, right?
    mouseX = e.clientX;
    mouseY = e.clientY;
    } 
```

不幸的是，萤火虫坚持认为 e 没有定义。我完全不知道我哪里出错了，我可能又犯了一些愚蠢的错误，我已经准备好咬自己的头了。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T07:44:25.463

实际上，在 addEventListener 中，传递的第二个参数是事件触发时要调用的函数的名称。现在，您正在调用该函数并将其传递给 e（未定义）。所以，代码应该是

```
canvas.addEventListener('mousemove',traceMouse); 
```

并且事件对象将通过浏览器传递，因此您将能够获取clientX＆Y。

在任何情况下，您都需要将参数传递给函数，您可以使用闭包。这是一个例子。[http://jsfiddle.net/parth1403/fVakB/](http://jsfiddle.net/parth1403/fVakB/)

# javascript - 使用 jquery :selected 选择器和下一个/上一个箭头

> ID：10460678
> 
> 赞同：0
> 
> 时间：2012-05-05T09:50:34.110
> 
> 标签：javascript, jquery, forms

我正在尝试为在线`font`预览目的设置小型 Web 应用程序。直到现在一切都很好。我已经制作了选择框（工作正常），测试文本区域（工作正常），字体大小（工作正常），粗体，斜体复选框......（工作正常），其中包含字体列表。当我从选择列表中选择一种字体时，页面上的所有内容（预定义文本）都已更改，这没关系，但我决定添加箭头（下一个和上一个）以进行快速更改，这也有效，但某些元素没有更改按钮单击。

实际问题是什么？

当我从选择列表中选择字体时，所有内容都会更改，但是当我将这些按钮用于下一个/上一个 H1 时，并且页面标题不想更改，因为我需要在页面标题以及页面标题上显示字体名称。

这里是：http: [//jsfiddle.net/S8PwY/](http://jsfiddle.net/S8PwY/)

有人可以检查此脚本并指出问题所在：

```
$(document).ready(function() {
$(".fontpicker").change(function() {
    $font = $('.fontpicker option:selected').val();
    $('.font_preview').css('fontFamily', $font);
});
$(".fontpicker").change(function() {
    $font = $('.fontpicker option:selected').val();
    $('.name').css('fontFamily', $font);
});

//min font size
var min = 10;

//max font size
var max = 60;

//grab the default font size
var reset = $('textarea').css('fontSize');

//font resize these elements
var elm = $('textarea');

//set the default font size and remove px from the value
var size = str_replace(reset, 'px', '');

//Increase font size
$('a.fontSizePlus').click(function() {

    //if the font size is lower or equal than the max value
    if (size <= max) {

        //increase the size
        size++;

        //set the font size
        elm.css({
            'fontSize': size
        });
    }

    //cancel a click event
    return false;

});

$('a.fontSizeMinus').click(function() {

    //if the font size is greater or equal than min value
    if (size >= min) {

        //decrease the size
        size--;

        //set the font size
        elm.css({
            'fontSize': size
        });
    }

    //cancel a click event
    return false;

});

//Reset the font size
$('a.fontReset').click(function() {

    //set the default font size    
    elm.css({
        'fontSize': reset
   }

$('.selector').click(function() {
    var checked = $(this).is(':checked');
    var value = $(this).attr('value');
    if (checked) {
        $('.font_preview, textarea').addClass(value);
    } else {
        $('.font_preview, textarea').removeClass(value);
    }
});

$("#next").click(function() {
    $("#mycars").val($("#mycars > option:selected").next().val());
    $font = $('.fontpicker option:selected').val();
    $('.font_preview').css('fontFamily', $font);
    $('.name').css('fontFamily', $font);

});

$("#prev").click(function() {
    $("#mycars").val($("#mycars > option:selected").prev().val());
    $font = $('.fontpicker option:selected').val();
    $('.font_preview').css('fontFamily', $font);
    $('.name').css('fontFamily', $font);
});

 $("select").change(function () {
      var str = "";
      $("select option:selected").each(function () {
            str += $(this).text() + " ";
          });
      $("title,h1.name,th.name").text(str);
    })
    .trigger('change'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:34:18.350

`change`您可以在每个事件中触发事件`click`以进行更改：

```
$("#next").click(function() {
    $("#mycars").val($("#mycars > option:selected").next().val()).trigger("change");
});

$("#prev").click(function() {
    $("#mycars").val($("#mycars > option:selected").prev().val()).trigger("change");
}); 
```

**演示：http:** [//jsfiddle.net/u7dDw/](http://jsfiddle.net/u7dDw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T11:48:32.240

代码可以合并和固定如下：

```
$(".fontpicker").change(function() {
    $font = $('.fontpicker option:selected').val();
    $('.name').css('fontFamily', $font);
    $('.font_preview').css('fontFamily', $font);
    $("title,h1.name,th.name").text($font);
}).change();

$("#next").click(function() {
    $(".fontpicker").val($(".fontpicker >option:selected").next().val()).change();
});

$("#prev").click(function() {
    $(".fontpicker").val($(".fontpicker >option:selected").prev().val()).change();
}); 
```

查看[更新的小提琴](http://jsfiddle.net/S8PwY/5/)

# c - 是否可以获取当前节点之上的节点？

> ID：10460679
> 
> 赞同：0
> 
> 时间：2012-05-05T09:50:37.297
> 
> 标签：c, tree, binary-tree, tree-traversal

有人问我一个问题，当我遍历我的二叉树时，是否可以获得当前节点之上的节点？作为一个双链表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T09:51:57.407

如果您将其构建为双链接，那么可以，转到“父”属性。抽象例子：

```
struct node {
    struct node *parent; // << this is the parent, just access it
    struct node *rchild;
    struct node *lchild;
    int val;
} 
```

否则，您将需要在每次访问子节点时缓存前一个节点。

请注意，双向链接**列表**与二叉树不同**（**在列表中，每个项目都有一个孩子）。

# python - 在 Python 中将类放在不同的文件中成本高吗？

> ID：10460682
> 
> 赞同：6
> 
> 时间：2012-05-05T09:50:53.620
> 
> 标签：python, performance, python-2.7

我是一名 Java 程序员，我总是为类创建单独的文件，我正在尝试学习 python，我想正确地学习它。在 python 中将类放在不同的文件中是否成本很高，这意味着一个文件只包含一个类。我在一篇博客中读到它的成本很高，因为`.`运算符的解析发生在 python 的运行时（它发生在 Java 的编译时）。

**注意**：我确实在其他帖子中读过我们可以将它们放在单独的文件中，但他们没有提到它们是否以任何方式更昂贵

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T09:58:01.693

它的成本略高，但不会达到您可能关心的程度。您可以通过执行以下操作来抵消此额外费用：

```
from module import Class 
```

这样该类将被分配给本地命名空间中的变量，这意味着它不必通过模块进行查找。

然而，实际上，这不太重要。查找这样的东西的成本将会很小，你应该专注于让你的代码最易读。跨模块和包拆分类，这对您的程序来说是合乎逻辑的，并且可以使它们保持清晰。

例如，如果您在循环中重复使用某些东西，这对您的程序来说是一个瓶颈，您可以[将它分配给该循环的局部变量](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Avoiding_dots...)，例如：

```
import module

...

some_important_thing = module.some_important_thing

#Bottleneck loop
for item in items:
   #module.some_important_thing()
   some_important_thing() 
```

请注意，这种优化不太可能是重要的事情，您应该只在有证据证明需要这样做的地方进行优化。

# c# - 无法创建具有另一个 SortedList 的 SortedList

> ID：10460684
> 
> 赞同：0
> 
> 时间：2012-05-05T09:51:00.623
> 
> 标签：c#, collections

```
SortedList<int, string> months = new SortedList<int, string>();
SortedList<int, SortedList> all = new SortedList<int, SortedList>(); 
```

我想创建一个 SortedList ，其中包含另一个“月份”类型的排序列表，如上面的代码片段所示。

```
months.Add(1, "January");
all.Add(2012,months); 
```

我得到错误

无法从“System.Collections.Generic.SortedList”转换为“System.Collections.SortedList”

我迷茫...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T09:53:14.897

您忘记为 inner 指定类型参数`SortedList`，它找到了一个非泛型参数，它是一种不同的类型。做这个：

```
var all = new SortedList<int, SortedList<int, string>>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T09:54:27.503

您必须为参数命名（否则它是不同的类型）。尝试这个：

```
SortedList<int, SortedList<int, string> > all = new SortedList<int, SortedList<int, string> >(); 
```

# silverlight - 如何在 Silverlight OOB 中处理窗口的 MouseRightButtonDown 事件

> ID：10460688
> 
> 赞同：1
> 
> 时间：2012-05-05T09:51:31.130
> 
> 标签：silverlight, silverlight-oob

我想为 Silverlight OOB 应用程序中的窗口禁用 Silverlight 上下文菜单

```
Window wn = new Window(); 
```

`wn.Show();`

对于 silverlight 中的 ChildWindow，我能够通过处理其 MouseRightButtonDownEvent 禁用显示“Silverlight”和“删除此应用程序”的 silverlight 默认上下文菜单

```
 ChilWindow.MouseRightButtonDownEvent +=(s,e)=>{e.handled=true;}; 
```

但是我无法在这里处理默认的上下文菜单，因为 Window 类缺少 MouseRightButtonDownEvent 如果我将用户控件放在窗口内，我可以为窗口内的内容处理它但是上下文菜单在窗口中没有被禁用标题栏。

# objective-c - 我可以以编程方式擦除 applicationDidFinishLaunching:withOptions: 中的应用程序数据吗？

> ID：10460690
> 
> 赞同：0
> 
> 时间：2012-05-05T09:51:35.413
> 
> 标签：objective-c, ios, ios-simulator

出于测试目的，我希望能够将应用程序重置为干净状态。（类似于从模拟器/iPhone 中删除应用程序的操作）。

假设我们有一个`WIPE_DATA`定义，如果设置了，应用程序应该像刚刚安装一样启动。显然，如果您知道该应用程序，您就会知道它在哪里存储数据`NSUserDefaults`等。我想知道是否有一种更通用的方法不需要深入了解特定应用程序，因此适用于任何应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:47:31.817

在您的应用程序中，您有两种数据 - NSUserDefaults 设置和 Documents 目录中的文件。如果您想擦除所有数据以使您的应用程序恢复到初始状态和设置，您应该创建例如一个应用程序委托方法，该方法设置初始 NSUserDefaults 设置并清理 Documents 目录中应用程序生成的文件。

据我所知，没有标准的系统方法可以做到这一点。

# django-urls - Django-MPTT子页面的完整路径如何制作？

> ID：10460691
> 
> 赞同：8
> 
> 时间：2012-05-05T09:51:43.710
> 
> 标签：django-urls, django-mptt

我开始使用 Django-MPTT 应用程序在我的 Django 站点页面上获取基于树的方法。

例如。我有带有子页面的页面：

发呆：

*   声音恍惚（子页面）
*   艰难的恍惚（子页面）

休息：

*   Atmo Breaks(子页面)
*   渐进式休息（子页面）

如何从 urls.py 访问它们？什么模式会有所帮助？我需要将 Full_path 存储在模型中还是可以通过 url 模式完成？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T14:27:28.467

我假设你的意思是你想做这样的 URL：

```
/trance/
/trance/vocal-trance/
/trance/hard-trace/
/breaks/
/breaks/atmo-breaks/
/breaks/progressive-breaks/ 
```

如果是这样，最好将 url 片段存储在您的模型中。就像是：

```
from mptt.models import MPTTModel
from django.db import models
from django.template.defaultfilters import slugify

class Page(MPTTModel):
    name = models.CharField(max_length=50)
    slug = models.CharField(max_length=50,null=True)
    url = models.CharField(max_length=255,null=True)

    def save(self, *args, **kwargs)
        if self.slug is None:
            # create a slug that's unique to siblings
            slug = slugify(self.name)
            self.slug = slug
            siblings = self.get_siblings()
            i = 1
            while siblings.filter(slug=self.slug).exists():
                i += 1
                self.slug = slug + '-%d' % i

            # now create a URL based on parent's url + slug
            if self.parent:
                self.url = '%s/%s' % (self.parent.url, self.slug)
            else:
                self.url = self.slug
        super(Page, self).save(*args, **kwargs) 
```

然后添加一个 URL 模式：

```
(r'^pages/(?P<page_url>[\w\d_/-]+)/$', 'pages.views.show_page'), 
```

在您看来，您只需获取正确的页面：

```
def show_page(request, page_url=None):
    page = get_object_or_404(Page, url=page_url)
    ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-20T07:23:29.217

感谢您对我的问题的关注。看，我最终是如何做到的。

# 模型.py

```
class WebPage(MPTTModel):

    slug=RuSlugField(max_length=20,unique=True)
    title=models.CharField(max_length=50)
    content=models.TextField()
    parent=TreeForeignKey('self',null=True,blank=True,related_name='children')

    class MPTTMeta:
        order_insertion_by=['slug']

    def get_absolute_url(self):#TODO:: replace with get_ancestors
        url = "/%s/" % self.slug
        page = self
        while page.parent:
            url = "/%s%s" % (page.parent.slug,url)
            page = page.parent
        return url 
```

# 网址.py

```
urlpatterns = patterns('website.views',
    url(r"^add/$", "add_page",name="add"),
    url(r"^(?P<full_slug>.*)/add/$", "add_page",name="add"),
    url(r"^(?P<full_slug>.*)/edit/$", "edit_page",name="edit"),
    url(r'^$', ListView.as_view(model=WebPage,template_name='index.html',context_object_name="webpages_list",),name='index'),
    url(r"^(?P<full_slug>.*)/$", "page", name="page"),
) 
```

# 视图.py

```
def page(request, full_slug):

    # Make a list from full_slug.
    # For ex. /trance/progressive_trance/fonarev -> ['trance','progressive_trance','fonarev']
    slugs=full_slug.split('/')

    page=None

    # Get a page by it's slug
    if len(slugs)>1:
        page=get_object_or_404(WebPage,slug=slugs[-1])#slugs=['trance','vocal_trance'] -> 'vocal_trance'
    elif len(slugs)==1:
        page=get_object_or_404(WebPage,slug=slugs[0])#slugs=['trance'] -> 'trance'

    # Check if page url matches requested full_slug
    if page.get_absolute_url().strip('/') == full_slug:
        return render_to_response('page.html', {'page': page},context_instance=RequestContext(request))
    else:
        raise Http404

def edit_page(request,full_slug):
    slugs=full_slug.split('/')
    page=None

    if len(slugs)>1:
        page=get_object_or_404(WebPage,slug=slugs[-1])
    elif len(slugs)==1:
        page=get_object_or_404(WebPage,slug=slugs[0])

    if not page.get_absolute_url().strip('/') == full_slug:
        raise Http404

    # Send POST data for update an existing page.Update a page.
    if request.method=='POST':
        form=WebPageForm(request.POST, instance=page)
        if form.is_valid():
            form.save()
        return HttpResponseRedirect(page.get_absolute_url())

    # Render a form to edit data for existing page
    else:
        form=WebPageForm(instance=page)

    return render_to_response('edit_page.html',{'form':form,},context_instance=RequestContext(request))

def add_page(request,full_slug=None):
    parent_page=None
    slug=None

    if full_slug:
        slug=full_slug.split('/')

    # If there is a slug in REQUEST(ex.'trance')->we need to add a new_page to her parent_page.
    # So get a parent page.
    if slug:
        if len(slug)>1:
            parent_page=get_object_or_404(WebPage,slug=slug[-1])
        elif len(slug)==1:
            parent_page=get_object_or_404(WebPage,slug=slug[0])

    # Create a new_page
    if request.method=='POST':
        form=WebPageForm(request.POST)
        if form.is_valid():
            new_page=form.save(commit=False)
            if parent_page:
                new_page.parent=parent_page
            new_page.save()
            return HttpResponseRedirect(new_page.get_absolute_url())

    # Return an unbounded form
    else:
        form=WebPageForm()

return render_to_response('add_page.html',{'form':form,},context_instance=RequestContext(request)) 
```

* * *

诀窍在于我们必须检查页面是否真的存在通过 full_slug 访问它：

```
if not page.get_absolute_url().strip('/') == full_slug:
            raise Http404 
```

否则，只允许通过 slug 进行检查可能是错误的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-10T19:41:43.990

还有一个 django 应用程序可以为您完成工作：[django-mptt-urls](https://github.com/c0ntribut0r/django-mptt-urls)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-25T12:27:13.967

```
def get_absolute_url(self):
    return '/'.join([x['slug'] for x in self.get_ancestors(include_self=True).values()]) 
```

# c++ - 无法实现密码过滤器

> ID：10460693
> 
> 赞同：7
> 
> 时间：2012-05-05T09:52:01.160
> 
> 标签：c++, c, security, winapi

我尝试实现密码过滤器，所以我写了一个简单的密码过滤器。我按照 MSDN 中的文档进行操作，并确保函数声明正确。我在 VS 2010 中编译。

* * *

# .def 文件：

```
LIBRARY myFilt
EXPORTS
   InitializeChangeNotify
   PasswordFilter
   PasswordChangeNotify 
```

# .cpp 文件：

```
#include <windows.h>
#include <stdio.h>
#include <ntsecapi.h>

void writeToLog(const char* szString)
{
    FILE* pFile = fopen("c:\\work\\logFile.txt", "a+");
    if (NULL == pFile)
    {
        return;
    }
    fprintf(pFile, "%s\r\n", szString);
    fclose(pFile);
    return;
}

// Default DllMain implementation
BOOL APIENTRY DllMain( HANDLE hModule, 
                       DWORD  ul_reason_for_call, 
                       LPVOID lpReserved
                     )
{
    OutputDebugString(L"DllMain");
    switch (ul_reason_for_call)
    {
        case DLL_PROCESS_ATTACH:
        case DLL_THREAD_ATTACH:
        case DLL_THREAD_DETACH:
        case DLL_PROCESS_DETACH:
            break;
    }
    return TRUE;
}
BOOLEAN __stdcall InitializeChangeNotify(void)
{
    OutputDebugString(L"InitializeChangeNotify");
    writeToLog("InitializeChangeNotify()");
    return TRUE;
}

BOOLEAN __stdcall PasswordFilter(
  PUNICODE_STRING AccountName,
  PUNICODE_STRING FullName,
  PUNICODE_STRING Password,
  BOOLEAN SetOperation
)
{
    OutputDebugString(L"PasswordFilter");
    return TRUE;
}

NTSTATUS __stdcall PasswordChangeNotify(
  PUNICODE_STRING UserName,
  ULONG RelativeId,
  PUNICODE_STRING NewPassword
)
{
    OutputDebugString(L"PasswordChangeNotify");
    writeToLog("PasswordChangeNotify()");
    return 0;
} 
```

* * *

我把myFilt.dll放进去`%windir%\system32`，在注册表的“Notification Packages”中添加“myFilt”，重启电脑，修改密码，没有任何反应。

我打开了depends.exe，看到功能是正确的：

```
InitializeChangeNotify
PasswordChangeNotify
PasswordFilter 
```

哪里错了？？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T18:59:11.410

> 我发现了问题！我将运行时库从多线程调试 DLL (/MDd) 更改为多线程调试 (/MTd)，它运行良好！:)
> 
> – user1375970 5 月 5 日 10:38

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T01:56:28.743

通知包 指定在设置或更改密码时加载或调用的动态链接库 (DLL)。要指定多个文件，请在每个文件名之间按 ENTER 键依次列出文件名。

高人一等！</p>

# ruby-on-rails - 如何提高单页应用的性能？

> ID：10460695
> 
> 赞同：5
> 
> 时间：2012-05-05T09:52:29.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, performance, backbone.js, rabl

**简介**我有一个（大部分）用 BackboneJS 和 Rails 后端构建的
单页[应用程序。](http://domiy.com)

因为大部分交互发生在 webapp 的一个页面上，当用户第一次访问该页面时，我基本上必须在一个大型深度连接查询中从数据库中提取大量信息。

这导致我在这一页上的加载时间相当长。

![加载时间](../Images/edb9b2705c9fed5067fb8ea2fbc81348.png)

NewRelic 似乎在告诉我，我的大部分问题是由于 457 个单独的快速方法调用造成的。

![快速方法调用](../Images/d2870ebbefebcb6f2289c9cdca5bd9b4.png)

现在我已经完成了我能做的所有急切加载（我检查了[Bullet gem](https://github.com/flyerhzm/bullet)），但我仍然有问题。

这些方法调用很可能发生在我的[Rabl](https://github.com/nesquena/rabl)序列化程序中，我用它来序列化一堆 JSON 以嵌入到页面中以初始化 Backbone。您不需要了解所有这些，只要说它可以添加多达 457 个方法调用就足够了。

```
object @search
attributes :id, :name, :subscription_limit

# NOTE: Include a list of the members of this search.
child :searchers => :searchers do
  attributes :id, :name, :gravatar_icon
end

# Each search has many concepts (there could be over 100 of them).
child :concepts do |search|
  attributes :id, :title, :search_id, :created_at

  # The person who suggested each concept.
  child :suggester => :suggester do
    attributes :id, :name, :gravatar_icon
  end

  # Each concept has many suggestions (approx. 4 each).
  node :suggestions do |concept|
    # Here I'm scoping suggestions to only ones which meet certain conditions.
    partial "suggestions/show", object: concept.active_suggestions
  end

  # Add a boolean flag to tell if the concept is a favourite or not.
  node :favourite_id do |concept|
    # Another method call which occurs for each concept.
    concept.favourite_id_for(current_user)
  end
end

# Each search has subscriptions to certain services (approx. 4). 
child :service_subscriptions do
  # This contains a few attributes and 2 fairly innocuous method calls.
  extends "service_subscriptions/show"
end 
```

所以看来我需要对此做点什么，但我不确定要采取什么方法。这是我有的潜在想法的列表：

**绩效改进思路**

简化界面
也许我可以想出一些方法来向用户展示不需要实际数据的信息。我不明白为什么我绝对需要这样做，其他单页应用程序（例如[Trello](http://trello.com) ）具有非常复杂的界面。

概念分页
如果我对概念进行分页，它将减少每次从数据库中提取的数据量。虽然会产生劣质的用户界面。

缓存
目前，刷新页面只是将整个搜索再次从数据库中提取出来。也许我可以缓存应用程序的某些部分以减少数据库命中。这看起来很混乱，因为我处理的数据不是很多是静态的。

多个请求
在不将 JSON 嵌入页面的情况下提供页面在技术上是不好的，但如果我加载未填充的页面然后获取数据，用户可能会觉得事情发生得更快。

索引
我应该确保我的所有外键都有索引。我还应该尝试考虑在哪些地方有索引（例如收藏夹？）并添加它们会有所帮助。

将方法调用移动到数据库
中 也许我可以将我在视图层中所做的一些迭代结果缓存到数据库中，然后将它们拉出来而不是计算它们。或者我可以在写入而不是读取时同步内容。

**问题**
有人对我应该把时间花在什么方面有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T16:46:07.857

我建议将您的 JS 代码库分离为使用[RequireJS](http://requirejs.org/)之类的资产加载器动态加载的模块。这样你就不会在加载时触发这么多 XHR。

当需要特定模块时，它可以在适当的时间加载和初始化，而不是每次加载页面。

如果你的代码稍微复杂一点，每个模块都应该能够启动和停止。因此，如果您有任何`polling`正在执行的或复杂的代码，您可以停止模块以提高性能并减少网络负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T21:45:43.437

如果无法看到实际的用户界面，这是一个很难回答的问题，但我会专注于仅加载显示初始界面所需的数据。例如，如果用户必须深入查看您正在呈现的一些数据，那么您可以按需加载该数据，而不是将其作为初始负载的一部分加载。您提到搜索可以有多达 100 个“概念”，也许您最初不需要获取所有这些概念？

最重要的是，听起来您的问题并不真正出在客户端 - 听起来您的服务器端代码正在减慢速度，所以我会探索您可以采取哪些措施来获取更少的数据，或者推迟复杂的查询，直到它们确实需要。

# c# - 用于监控 Facebook 的后台应用程序

> ID：10460703
> 
> 赞同：1
> 
> 时间：2012-05-05T09:53:23.603
> 
> 标签：c#, facebook-graph-api, dotnetopenauth

我正在为 Twitter 和 Facebook 构建一个聚合器。通过我的网站，用户应该能够授予应用访问他们的 Facebook 和 Twitter 个人资料的权限。然后，我的 C# 应用程序将定期检查网络（或来自流）以查找与该用户相关的新帖子/喜欢/推文，并将结果存储在数据库中。我不会使用 Facebook 和 Twitter 作为我网站的身份提供者。

现在我的问题是：我应该最好使用哪个库来完成与社交网络的连接？我可以为此使用 dotnetopenauth 吗？还是有更好的解决方案？

我还应该能够扩展库并在以后添加任何社交网络。

这可能是一个非常基本的问题，但由于所有可能的库和选项，我感到困惑。我调整了一个小而简单的 OAuth 类以连接到 Twitter，但这只是 OAuth 1.0 的能力......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T04:57:44.437

是的，DotNetOpenAuth 可以帮助您。但是您可能需要仔细检查 Facebook 的服务条款，因为我认为他们禁止您从他们那里下载的数据的任何持久性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T13:43:27.780

使用 DotNetOpenAuth 确实可以做到这一点，我知道这一点，因为我正在做类似的事情。已经让它像 Twitter 的魅力一样工作，目前正在处理 Facebook 链接。似乎 Facebook 会给我带来比我最初预期的更多的麻烦。

# javascript - 使用jquery在wordpress中隐藏带有选项框值的表行

> ID：10460704
> 
> 赞同：1
> 
> 时间：2012-05-05T09:53:31.817
> 
> 标签：javascript, jquery, wordpress, html

我有一个表格，表格行中有一个输入字段和一个选项框，我希望`<tr>`只有在选择选项框中的特定值时才会出现带有输入字段的表格。到目前为止，我有以下编码，它隐藏了我`<tr>`的输入字段，但不再显示它。

```
 $script = <<< EOF
<script type='text/javascript'>
    jQuery(document).ready(function($) {
        $('#row_sports').hide(); //works

         if($('#sel_rugby').is(':selected') || $('#sel_climbing').is(':selected')){
             $('#row_sports').show();

         }else{
            $('#row_sports').hide();
         }

    });
</script>
EOF;
        echo $script;

    echo '<table border="1">';
    echo '  <tr>';
    echo '      <td>';
    echo '          <select name="sports">';
    echo '              <option>Baseball</option>';
    echo '              <option id="sel_rugby">Rugby</option>';
    echo '              <option>Soccer</option>';
    echo '              <option>Sailing</option>';
    echo '              <option id="sel_climbing">Climbing</option>';
    echo '          </select>';
    echo '      </td>';
    echo '  </tr>';
    echo '  <tr id="row_sports">';
    echo '      <td>';
    echo '          <input name="sports_cl_rg" />';
    echo '      </td>';
    echo '  </tr>';
    echo '</table>'; 
```

BR & thx，迈贝克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:59:41.380

如果您将 id 放在所有选项中或通过文本而不是 id 比较它们会更好，这将是更好的事件。我的意思是使用 Climbing 而不是 sel_climbing。还要提供 id 以选择以访问它，因为您可能在页面上有很多选择。我将其更改为按照您的代码工作，但如果您愿意，可以按照我的建议进行操作。[此处提供演示 JsFiddle](http://jsfiddle.net/g3FkV/)

```
 $('select').change(function() {
 alert($('#sports option:selected').text());
    $('#row_sports').hide(); //works
   if($('#sports option:selected').attr('id') == "sel_rugby" || $('#sports option:selected').attr('id') == "sel_climbing"){
     $('#row_sports').show();

 }else{
    $('#row_sports').hide();
 }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:01:02.373

```
<script type='text/javascript'>
    jQuery(document).ready(function($) {
        $('#row_sports').hide(); //works

        $('select').change(function() {
         if($('#sel_rugby').is(':selected') || $('#sel_climbing').is(':selected')){
             $('#row_sports').show();

         }else{
            $('#row_sports').hide();
         }
        });

    });
</script> 
```

也使用更改功能..在这里有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T10:06:11.500

试试这个代码：

```
<script type="text/javascript" charset="utf-8">
    jQuery(document).ready(function($) {
        $('#row_sports').hide(); //works

        $('select[name="sports"]').change(function() {
            var trig = ["Rugby", "Climbing"]; // set elements here

            if (trig.indexOf($(this).val()) > -1) {
                $('#row_sports').show();    
            } else {
                $('#row_sports').hide();
            }
        });

    });
    </script> 
```

# imagemagick - ImageMagick 的“相对”字距调整

> ID：10460706
> 
> 赞同：1
> 
> 时间：2012-05-05T09:53:35.530
> 
> 标签：imagemagick, kerning

我正在使用 ImageMagick 的`convert -annotate`命令将文本渲染为 PNG。现在我想减少字距，即字母之间的间距。这可以在 IM 中使用类似的选项来完成`-kerning -2`。

不幸的是，这个选项完全覆盖了字体的默认字距，所以现在所有字母的边界框都有相同的距离，即使在字母组合“AV”这样的情况下，它们应该重叠。

有没有办法让 IM 首先应用默认字距调整，但将结果间距减小例如 2px，而不是在任何地方使用相同的间距？

如果做不到这一点，是否有替代命令行（或 Ruby）工具可以将自定义字体的文本呈现为 PNG，同时支持所需的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:44:05.380

如果您有更高版本的 Imagemagick > 6.7.6-3，那么有一个新功能（我认为它只适用于 Linux 机器）可能能够做您想做的事情。我还没有检查出来：[http ://www.imagemagick.org/Usage/text/#pango](http://www.imagemagick.org/Usage/text/#pango)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-27T08:23:27.013

此问题已在 ImageMagick 6.8.9-6 Beta 中修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T17:13:56.770

设置起来需要更多的工作，但最近我一直在提倡那些想要进行服务器端文档渲染的人在 SVG 中构建它们并使用 Inkscape 将它们转换为位图。我很确定这个功能是受支持的（给自己一个副本并在 UI 中检查 - 如果它在那里，你可以做到）。

您需要对操作 XML 文档充满信心——一旦您开始学习基本的 SVG，就非常容易学习。

# unity3d - 使用另一个按钮关闭 iPhoneKeyboard？

> ID：10460709
> 
> 赞同：2
> 
> 时间：2012-05-05T09:54:27.050
> 
> 标签：unity3d, unityscript

我正在制作一个 Unity3D IOS 游戏，并且几乎在那里。我有一些用户可以填写的表格，但在顶部菜单中我也有一个“取消”按钮。当用户点击取消按钮但无法弄清楚时，我希望能够使键盘消失......我试过这个但没有运气：

```
private var keyboard : iPhoneKeyboard;
if(GUI.Button.....){
   keyboard.active = false;
} 
```

有人可以告诉我我做错了什么...提前谢谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:24:59.543

我不知道 iOS + Unity3D 是如何工作的。

在 iOS 中，要摆脱键盘......在使用键盘的文本字段上使用一种方法，如下所示：[myTextField resignFirstResponder];

也许是一个提示......看看有问题的文本字段是否有类似的东西。

# javascript - 我应该在多大程度上依赖客户端验证？

> ID：10460711
> 
> 赞同：3
> 
> 时间：2012-05-05T09:54:33.903
> 
> 标签：javascript, validation

我有一个冗长的表单，它大量使用客户端验证（用 jQuery 编写）。为了防止禁用 JavaScript 的用户提交表单，我添加了一个隐藏字段，该字段由 jQuery 填充“javascript_enabled”值。如果浏览器中禁用了 JS，则该字段留空并且不会提交表单。

问题是 - 这是否足够，我应该感到安全，还是我必须为每个字段都包含服务器端验证？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T09:56:11.430

不，客户端验证只是为了让用户感到舒适，而不是为了保护您的服务器。

用户可以轻松更改所有客户端操作。

为了保护您的服务器，您必须添加服务器端验证。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T09:56:19.647

到什么程度？没有任何。**您根本不应该依赖客户端验证**。客户端验证纯粹是为了 UX 目的。

真正的验证总是在服务器上完成。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-05T10:17:46.000

以上所有答案都是有效的，我只想补充几点。

# 客户端

*   客户端验证可用于向用户提供即时反馈，而无需向服务器发出额外请求（流量较低）。

*   可以轻松绕过客户端验证。（禁用 JavaScript、自定义 HTTP 请求、使用 CURL 等访问）

# 服务器端

*   无法绕过（除非您留下了可利用的代码）

*   良好的服务器端验证可以防止 XSS 和 SQL 注入等潜在威胁。（可能导致获取其他用户数据，或破坏您的数据库）

# 我如何相信这会改变

我期待 WebSocket 协议的进一步开发并使其得到更广泛的使用。WebSockets 允许双向（全双工）连接，这意味着从服务器端进行验证将非常有效，例如每个在输入字段中输入键的时间。希望这种方法将取消客户端验证！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T10:01:58.287

服务器端验证是必须的，客户端验证是在没有往返服务器的开销的情况下尽可能多地进行。

# android - 如何自定义列表首选项单选按钮

> ID：10460715
> 
> 赞同：15
> 
> 时间：2012-05-05T09:55:30.350
> 
> 标签：android, radio-button, customization, listpreference

我已经自定义了我的应用程序中的所有单选按钮，但 listPreference 中的单选按钮没有得到自定义。

我使用了这个名为 btn_radio.xml 的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_checked="true" android:state_window_focused="false"
      android:drawable="@drawable/radio_selected" />
<item android:state_checked="false" android:state_window_focused="false"
      android:drawable="@drawable/radio_unselected" />

<item android:state_checked="true" android:state_pressed="true"
      android:drawable="@drawable/radio_selected" />
<item android:state_checked="false" android:state_pressed="true"
      android:drawable="@drawable/radio_unselected" />

<item android:state_checked="true" android:state_focused="true"
      android:drawable="@drawable/radio_selected" />
<item android:state_checked="false" android:state_focused="true"
      android:drawable="@drawable/radio_unselected" />

<item android:state_checked="false" android:drawable="@drawable/radio_unselected" />
<item android:state_checked="true" android:drawable="@drawable/radio_selected" />
</selector> 
```

这是扩展 android 自定义单选按钮的 customRadioButton

```
<style name="CustomRadioButton"    Parent="@android:style/Widget.CompoundButton.RadioButton">
    <item name="android:button">@drawable/btn_radio</item>
</style> 
```

在我的应用程序的主题中，我已经完成了这些更改

```
<item name="android:radioButtonStyle">@style/CustomRadioButton</item>
    <item name="android:listChoiceIndicatorSingle">@style/CustomRadioButton</item> 
```

**此更改自定义我的应用程序中的所有单选按钮，除了我的 ListPreference 中的单选按钮**

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-09T19:28:56.693

`ListPreference`无法直接对来自 XML 的样式进行样式设置。问题是`ListPreference`（通过`DialogPreference`）调用`AlertDialog.Builder(Context)`来构建它`Dialog`，而不是`AlertDialog.Builder(Context context, int themeResourceId)`. 虽然后者允许提供主题，但前者不允许，导致它回退到默认的 Android 主题。

对于一个项目，我需要一个`ListPreference`带有自定义标题颜色、自定义单选按钮样式和自定义 ListView 选择器（基本上是不同颜色的 Holo）。我通过扩展`ListPreference`和覆盖解决了这个问题`onPrepareDialogBuilder(Builder)`，`OnCreateDialogView()`因此我可以使用带有简单 ArrayAdapter 的自定义 ListView，而不是`Dialog`内置的`ListView`（不支持样式）。我还必须覆盖`onDialogClosed()`以便为首选项设置正确的值。

为了使用它，您只需将您的preferences.xml rom 中的首选项的类名替换`ListPreference`为`com.your.packagename.ThemedListPreference`. 除此之外，实现与 ListPreference 相同。

```
public class ThemedListPreference extends ListPreference implements OnItemClickListener {

    public static final String TAG = "ThemedListPreference";

    private int mClickedDialogEntryIndex;

    private CharSequence mDialogTitle;

    public ThemedListPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ThemedListPreference(Context context) {
        super(context);
    }

    @Override
    protected View onCreateDialogView() {
        // inflate custom layout with custom title & listview
        View view = View.inflate(getContext(), R.layout.dialog_settings_updatetime, null);

        mDialogTitle = getDialogTitle();
        if(mDialogTitle == null) mDialogTitle = getTitle();
        ((TextView) view.findViewById(R.id.dialog_title)).setText(mDialogTitle);

        ListView list = (ListView) view.findViewById(android.R.id.list);
        // note the layout we're providing for the ListView entries
        ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(
                getContext(), R.layout.btn_radio,
                getEntries());

        list.setAdapter(adapter);
        list.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        list.setItemChecked(findIndexOfValue(getValue()), true);
        list.setOnItemClickListener(this);

        return view;
    }

    @Override
    protected void onPrepareDialogBuilder(Builder builder) {
        // adapted from ListPreference
        if (getEntries() == null || getEntryValues() == null) {
            // throws exception
            super.onPrepareDialogBuilder(builder);
            return;
        }

        mClickedDialogEntryIndex = findIndexOfValue(getValue());

        // .setTitle(null) to prevent default (blue)
        // title+divider from showing up
        builder.setTitle(null);

        builder.setPositiveButton(null, null);
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        mClickedDialogEntryIndex = position;
        ThemedListPreference.this.onClick(getDialog(), DialogInterface.BUTTON_POSITIVE);
        getDialog().dismiss();
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
            // adapted from ListPreference
        super.onDialogClosed(positiveResult);

        if (positiveResult && mClickedDialogEntryIndex >= 0
                && getEntryValues() != null) {
            String value = getEntryValues()[mClickedDialogEntryIndex]
                    .toString();
            if (callChangeListener(value)) {
                setValue(value);
            }
        }
    }
} 
```

对于我的 ListView 项目，我使用了下面的布局。请注意，drawable/btn_radio_holo_light 是一个 XML 可绘制对象，就像您的 android-sdk/platforms/android-x/data/res/drawable 文件夹中的那样，只是引用了不同的可绘制对象。

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:checkMark="@drawable/btn_radio_holo_light"
    android:gravity="center_vertical"
    android:minHeight="@dimen/list_item_minheight"
    android:paddingLeft="@dimen/list_item_paddingLeft"
    android:paddingRight="@dimen/list_item_paddingLeft" /> 
```

对于我的对话框布局 ( `onCreateDialogView()`)，我使用了以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/dialog_title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="16dp"
        android:textColor="@color/title_color"
        android:textSize="22sp" />

    <View
        android:layout_width="match_parent"
        android:layout_height="2dp"
        android:background="@color/divider_color" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:listSelector="@drawable/list_selector" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-23T16:14:02.170

请[在这里](https://stackoverflow.com/a/66336811/11004423)查看我的答案，也许它会有所帮助。

这是解决问题的一种更简单的方法。

# python - 将对象从 Jinja 模板发送到 Python

> ID：10460716
> 
> 赞同：1
> 
> 时间：2012-05-05T09:55:40.157
> 
> 标签：python, html, forms, google-app-engine, jinja2

我开始使用 Jinja Templating 和 Python 来开发 Web 应用程序。使用 Jinja，我可以将对象从我的 Python 代码发送到我的 index.html，但是是否可以从我的 index.html 接收对象到我的 Python 代码？例如，来回传递一个列表。如果是这样，你有什么例子吗？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:24:49.197

为什么要这样做？您在应用程序的控制器中可以访问您在模板中实现的任何逻辑，包括您放置在模板上下文中的任何变量。

如果数据由于与用户的交互而发生了变化，那么在我看来，获取数据的最佳方法是设置一个表单并使用普通的 POST 方法发送请求和所需的数据，正确编码和转义，回到你的程序。通过这种方式，您可以免受 XSS 问题以及其他不便的影响。我永远不会在模板中进行任何处理，只会使用任何本地逻辑来修改演示文稿本身。

**编辑考虑到您的情况，我建议如下：**

1.  用户按下页面上的按钮并调用 Get 处理程序
2.  获取处理程序查询数据库并接收列表*缓存的图像列表，可能在内存缓存中，并且密钥与编码为模板显示的 GET URL 中的参数的图像列表一起发送*
3.  图像列表被传递到模板引擎进行显示
4.  按下另一个按钮并*使用在 GET URL 中编码的接收到的密钥调用不同的 Get 处理程序，在清理和验证之后，检索缓存列表*

如果您不想要缓存键值对的中间步骤，您可能希望在 GET URL 中对整个列表进行编码，并且对整个列表进行清理和验证的步骤应该像在键上一样简单名单。这两种方法都避免了数据库的往返，保护您免受恶意使用，并尊重数据、表示和逻辑的分离。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T10:20:42.970

只是一个想法..您是否尝试过在处理模板后访问传递给 jinja 的 dict 中的变量？

# java - Java OpenGL 相机

> ID：10460721
> 
> 赞同：0
> 
> 时间：2012-05-05T09:56:12.403
> 
> 标签：java, opengl, graphics, jogl

我最近开始使用 JOGL，我知道如何在画布上创建和绘制对象，但我找不到有关如何设置和旋转相机的教程或解释。我只找到了源代码，但是由于我对此很陌生，因此并没有太大帮助。

有谁知道一个好的教程或开始的地方？我用谷歌搜索但找不到任何东西（仅适用于 JOGL 1.5，我使用的是 2.0）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:19:45.973

*更新*

正如 datenwolf 指出的那样，我的解释与已被取代的 OpenGL 2 管道有关。这意味着如果您想避开已弃用的方法，您必须自己从世界空间到屏幕空间进行操作。可悲的是，这个小脚注还没有被附加到宇宙中所有 OpenGL 示例代码或评论的最后一点。

当然，我不知道为什么在选择一个库来做同样的事情或自己构建一个库之前使用现有的 GL2 管道必然是一件坏事。

*原来的*

* * *

我自己也在玩 JOGL，尽管我之前对 OpenGL 的经验有限。OpenGL 使用两个矩阵将您通过它的所有 3D 点从 3D 模型空间转换为 2D 屏幕空间，即 Projection 矩阵和 ModelView 矩阵。

投影矩阵旨在补偿 3D 世界和 2D 屏幕之间的转换，将高维空间*投影*到低维空间。您可以通过 Googling 获得更多详细信息`gluPerspective`，这是 glut 工具包中用于设置该矩阵的函数。

另一方面，ModelView ^(1矩阵负责将 3D 坐标项从场景空间转换到视图（或相机）空间。)具体如何完成取决于您如何代表相机。表示相机的三种常见方式是

*   位置向量、相机目标向量和“向上”方向向量
*   位置的向量加上方向的四元数（可能加上一个浮点值作为比例，或者将比例设置为 1）
*   包含位置、方向和比例的单个 4x4 矩阵

无论您使用哪一种，都需要您编写代码将表示转换为您可以提供给 OpenGL 方法以设置 ModelView 矩阵的内容，以及编写代码而不是将用户操作转换为对相机数据的修改。

JOGL-Demos 和 JOCL-Demos 中有许多演示涉及这种操作。例如，[这个类](https://github.com/sgothel/jocl-demos/blob/master/src/com/jogamp/opencl/demos/joglinterop/UserSceneInteraction.java)被设计成一种原始相机，可以放大和缩小并围绕场景的原点旋转，但不能转动。因此，它仅表示为 3 个浮点数：X 和 Y 旋转以及 Z 距离。它将其转换应用于 Modelview，如下所示²：

```
gl.glMatrixMode(GL2.GL_MODELVIEW);
gl.glLoadIdentity();
gl.glTranslatef(0, 0, z);
gl.glRotatef(rotx, 1f, 0f, 0f);
gl.glRotatef(roty, 0f, 1.0f, 0f); 
```

我目前正在使用 Java Vecmath 库尝试使用基于 Quaternion+Vector+Float 的相机，并像这样应用我的相机变换：

```
Quat4d orientation;
Vector3d position;
double scale;
...
public void applyMatrix(GL2 gl) {
  Matrix4d matrix = new Matrix4d(orientation, position, scale);
  double[] glmatrix = new double[] {
    matrix.m00, matrix.m10, matrix.m20, matrix.m30,
    matrix.m01, matrix.m11, matrix.m21, matrix.m31,
    matrix.m02, matrix.m12, matrix.m22, matrix.m32,
    matrix.m03, matrix.m13, matrix.m23, matrix.m33,
  };
  gl.glMatrixMode(GL2.GL_MODELVIEW);
  gl.glLoadMatrixd(glmatrix, 0);
} 
```

1：之所以称为 ModelView 而不仅仅是 View 矩阵，是因为您实际上可以在 ModelView 堆栈上推送和弹出矩阵（我相信所有 OpenGL 转换矩阵都是如此）。通常，您要么拥有一整套矩阵，表示场景图中项目相对于彼此的各种变换，底部的矩阵表示相机变换，要么您有一个相机变换，并将场景图中的所有内容保持在世界空间坐标中（哪种方式破坏了拥有场景*图*的意义，但无论如何）。

2：实际上，您不会`gl.glMatrixMode(GL2.GL_MODELVIEW);`在代码中看到对 的调用，因为除非您主动设置投影矩阵，否则 GL 状态机一直处于 MODELVIEW 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:16:03.053

> 但我找不到关于如何设置和旋转相机的教程或解释

因为没有。OpenGL 不是场景图。它主要是复杂的画布和简单的点、线和三角形绘图工具。放置“对象”实际上意味着应用线性变换将 3 维向量放置在 2D 帧缓冲区上。

因此，您无需放置“相机”，而是以与移动相机相反的方式在整个世界（转换）中移动，从而产生相同的结果。

# ruby-on-rails - 如何从视图访问 has_many 关系？

> ID：10460724
> 
> 赞同：0
> 
> 时间：2012-05-05T09:56:18.087
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个表格，我正在创建一个新项目。

```
= form_for(@project, :html => { :class => 'addProjectForm' }) do |f|
  #actions
    = f.submit
  %p
    = f.label :name
    %br
    = f.text_field :name, :class => 'projectName'
  %p
    = f.label :ticket
    %br
    = f.text_field :ticket, :class => 'ticket'
 %p
    = f.label "Crew Member Name"
    = f.label "Crew Member Role"
    %br
    = f.text_field :crew_members.name
    = f.collection_select :crew, CrewMember.all, :role, :role
    = f.submit "Add More Crew Members", :id => 'add-crew-member'
  %p 
```

在 :crew_members.name 之前一切正常。我不断得到一个`undefined method "name" for :crew_member:Symbol`. 之前的所有标签都在更新 Project 表，但我无法让 CrewMembers 更新。这是模型。

```
class CrewMember < ActiveRecord::Base
  attr_accessible :name, :role
  belongs_to :project
end 
```

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:28:46.360

在调用此表单的操作中创建一个对象`@crew_member`，我想这将是新操作：（
`@member = @project.build_crew_member`如果您使用的是 rails 3）或
`@member = @project.crew_member.build`（如果 < rails 3）

然后在您的表单中，使用 fields_for 表单标签来捕获船员成员字段：
`<%= f.fields_for :crew_member do |m|%>`
`<%= m.text_field :name%>`

# java - 我需要同步这个吗

> ID：10460727
> 
> 赞同：0
> 
> 时间：2012-05-05T09:56:20.203
> 
> 标签：java, android, multithreading, synchronization

我想在一个扩展线程中进行我的数据库操作，所以首先我制作一个`ThreadLooper`用于发布的`Runnables`，用于启动数据库操作的。

它看起来像这样：

```
import android.os.Handler;
import android.os.Handler.Callback;
import android.os.HandlerThread;
import android.os.Message;

/**
 * @author  
 * @version 1.0 This class is used as ThreadLooper to make the database
 *          operation CRUD , this looper is singlton across the app
 * 
 */
public class DBThreadLooper extends HandlerThread {
    public Handler mHandler;

    private DBThreadLooper(String name) {
        super(name);

    }

    private static DBThreadLooper mInstance;

    public static DBThreadLooper newInstance() {

        if (mInstance == null) {
            mInstance = new DBThreadLooper("DATA BASE THREAD LOOPER ");
            mInstance.start();
        }
        return mInstance;
    }

    @Override
    public synchronized void start() {
        super.start();
        waitUntilReady();
    }

    private void waitUntilReady() {
        mHandler = new Handler(getLooper(), new Callback() {

            public boolean handleMessage(Message msg) {

                return true;
            }
        });
    }

    @Override
    protected Object clone() throws CloneNotSupportedException {
        throw new CloneNotSupportedException();
    }

} 
```

现在我有这个方法可以进行数据库操作

```
private void handleFavButton() {
        int index = viewPager.getCurrentItem();
        Cursor c = mAdapter.getAdapterCursor();
        c.moveToPosition(index);
        final String  quote_id = c.getString(c.getColumnIndex(QuoteTableMetaData._ID));

        final int is_fav = c.getInt(c.getColumnIndex(QuoteTableMetaData.C_IS_FAVORITE));

        if(is_fav == 0){
            DBThreadLooper looper = DBThreadLooper.newInstance();
            looper.mHandler.post(new Runnable() {

                public void run() {
                    //1\. make it 1 
                    QuoteTableMetaData qTable = QuoteTableMetaData
                            .getInstance();
                    ContentValues values = new ContentValues();
                    values.put(QuoteTableMetaData.C_IS_FAVORITE, new Integer(1));
                    qTable.update(DBUtils.getDBHelper(getApplicationContext())
                            .getWritableDatabase(), values,
                            QuoteTableMetaData._ID + "= ?",
                            new String[] { quote_id });
                    //2\. insert a new record in Fav Table with the id 
                    FavouriteQuoteTable fTable = FavouriteQuoteTable
                            .getInstance();
                    values.clear();
                    values.put(FavouriteQuoteTable.C_QUOTE_ID, quote_id);
                    fTable.insert(DBUtils.getDBHelper(getApplicationContext())
                            .getWritableDatabase(), null, values);
                }
            });
        }
        else{
            DBThreadLooper looper = DBThreadLooper.newInstance();
            looper.mHandler.post(new Runnable() {

                public void run() {
                    //1.make it 0 
                    QuoteTableMetaData qTable = QuoteTableMetaData
                            .getInstance();
                    ContentValues values = new ContentValues();
                    values.put(QuoteTableMetaData.C_IS_FAVORITE, new Integer(0));
                    qTable.update(DBUtils.getDBHelper(getApplicationContext())
                            .getWritableDatabase(), values,
                            QuoteTableMetaData._ID + "=?",
                            new String[] { quote_id });
                    // 2\. delete record with id from fav Table 
                    FavouriteQuoteTable fTable = FavouriteQuoteTable
                            .getInstance();
                    fTable.delete(DBUtils.getDBHelper(getApplicationContext())
                            .getWritableDatabase(),
                            FavouriteQuoteTable.C_QUOTE_ID + "=?",
                            new String[] { quote_id });
                }
            });

        } 
```

我是否需要在方法中制作`quote_id`and ，这样我的方法就不会遇到同步问题。`is_fav``volatile`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:11:27.780

它们没有多线程问题：它们是局部变量（更进一步）。这意味着对该方法的每次调用都`handleFavButton`将具有它们的单独实例，并且访问变量的不同调用不会干扰。

# internet-explorer - 链接在 IE9 和 Chrome 中不起作用 - 浏览器问题？

> ID：10460729
> 
> 赞同：2
> 
> 时间：2012-05-05T09:56:28.220
> 
> 标签：internet-explorer, google-chrome, joomla

我有一个 Joomla 网站和一些 JavaScript 函数。

在 Joomla 页面的页脚中，我从 [https://www.addthis.com/get/sharing?where=website&type=bm&clickbacks=1&frm=home&analytics=0&bm=tb14#.T6T4Q-v9Mhs添加了链接](https://www.addthis.com/get/sharing?where=website&type=bm&clickbacks=1&frm=home&analytics=0&bm=tb14#.T6T4Q-v9Mhs)

但我面临的问题是这些链接不适用于 IE9 和 Chrome 浏览器。其余的都支持它。

如果我从页面中删除图像滑块 jQuery，它工作正常，但由于该滑块，这些按钮不起作用。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:02:36.713

这是因为您可能没有使用服务器。使用 Wamp 服务（它有 apache 服务器），然后您的链接将在 wamp 服务器的 www 文件夹中的 php 或 html 文件之后运行，然后运行

![在此处输入图像描述](../Images/c600646e6a94084bd6106f741b2fc25d.png)

**请注意** *，如果您直接从本地驱动器链接打开页面将不起作用*

您的网站在 chrome 中运行良好

![在此处输入图像描述](../Images/019cfaf26321c1e5bcb7f7dc2e0f4cd0.png)

![在此处输入图像描述](../Images/1d8025024d50d0c299e1d75f926461f0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:41:10.060

启用您的浏览器Javascript！如果您不知道，请按照以下步骤操作

在浏览器上：

1.  工具 -> Internet 选项
2.  安全 -> 点击“自定义级别”选项卡
3.  向下滚动，您将获得 Scripting 选项卡 Enable that
4.  关闭浏览器，然后再次检查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T18:38:04.747

在 Joomla 2.5 中，它需要设置链接才能工作的全局配置。仅使用 en-UK 语言，然后在全局配置中，右上角的 SEO 面板，将每个选项设置为是，一次一个或一次全部。或者，将它们全部设置为否。

如果这不起作用，请开始取消发布您添加的所有用于制作 Joomla! 的扩展、插件和模块。进入 Junkla！其实Joomla！行李少的时候效果最好。

不可原谅的是，菜单上没有足够的删除按钮。

# regex - 多个大写字符的正则表达式

> ID：10460732
> 
> 赞同：0
> 
> 时间：2012-05-05T09:56:51.717
> 
> 标签：regex, windows, windows-shell

有一个 Windows 程序支持搜索文件的正则表达式（或 Dos 表达式）。

> （MythicSoft 的 FileLocator Pro）

它支持通配符，例如 * ?
我只想找到 4 个字符的 jpg 格式的文件名，
我该如何为此写一个短语？
这个短语 (
??我把它的模式放到正则表达式中）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:04:11.453

[在线文档](http://www.mythicsoft.com/filelocatorpro/help/)显示 FileLocator Pro 使用 Perl 兼容的正则表达式，在这种情况下，这应该可以工作：

```
^([A-Z]{4}\.jpg)$ 
```

括号使整个事物成为一个捕获组。如果您不需要捕获组，只需删除括号。

**编辑：**

确保对正则表达式启用区分大小写的选项。转到[在线文档](http://www.mythicsoft.com/filelocatorpro/help/index.html?advanced_criteria.htm)并搜索`regular expression case sensitive`. 那里似乎有解释。它说'要使内容搜索区分大小写，请单击'Aa'按钮'

# c# - 制作后操作窗口电话时如何获取responseString

> ID：10460734
> 
> 赞同：1
> 
> 时间：2012-05-05T09:57:11.117
> 
> 标签：c#, windows-phone-7, httpwebrequest, windows-phone-7.1

我有类来创建用户并返回用户信息（成功）。

```
 class POST
{
    public HttpWebRequest objRequest = null;
    //public static string myRequestData = string.Empty;
    public String myRequestData = String.Empty;
    public String urlAddress = "http://hackathon.kimhieu.info/flashcard/index.php/api/user";
    public  String responseString {get;set;}

    public void doSend()
    {
        StringBuilder completeUrl = new StringBuilder(urlAddress);
        objRequest = (HttpWebRequest)WebRequest.Create(urlAddress.ToString());
        objRequest.ContentType ="application/x-www-form-urlencoded";
        objRequest.Method = "POST";
        //Adding headers
        //objRequest.Headers["Header"]= "Your Value";
        //objRequest.Headers["Content-Language"] = "en-US";

        myRequestData = "username=abcdef&password=abcdef";

    //Begins the asynchronous request
    objRequest.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback),objRequest);

    }
    private  void GetRequestStreamCallback(IAsyncResult asyncResult)
      {
                HttpWebRequest objHttpWebRequest = (HttpWebRequest)asyncResult.AsyncState;
                // End the operation
                Stream postStream = objHttpWebRequest.EndGetRequestStream(asyncResult);
                // Convert the string into a byte array.
                byte[] byteArray = Encoding.UTF8.GetBytes(myRequestData);
                // Write to the request stream.
                postStream.Write(byteArray, 0, myRequestData.Length);
                postStream.Close();

                // Start the asynchronous operation to get the response
                objHttpWebRequest.BeginGetResponse(new AsyncCallback(GetResponseCallback), objHttpWebRequest);
       }

    private void GetResponseCallback(IAsyncResult asyncResult)
            {
                HttpWebRequest objHttpWebRequest = (HttpWebRequest)asyncResult.AsyncState;
                HttpWebResponse objHttpWebResponse = (HttpWebResponse)objHttpWebRequest.EndGetResponse(asyncResult);
                Stream objStreamResponse = objHttpWebResponse .GetResponseStream();
                StreamReader objStreamReader = new StreamReader(objStreamResponse );
                responseString = objStreamReader.ReadToEnd();            // Got response here
                myRequestData = "AAA";
                //MessageBox.Show("RESPONSE :" + responseString);
                // Close the stream object
                objStreamResponse .Close();
                objStreamReader.Close();
                objHttpWebResponse.Close();
       }

} 
```

我调用 Main.xaml.cs

```
POST ab = new POST();
ab.doSend();                
MessageBox.Show(ab.responseString); 
```

但它返回空字符串我试图在 POST myData 类中分配一些字符串，但它没有执行。我认为 GetResponseCallback(IAsyncResult asyncResult) 不正确。我该如何解决。感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:26:24.907

您编写异步代码，但尝试同步读取**responseString**。只需将新事件添加到您的 Post 类：

```
public event Action Completed; 
```

并从方法**GetResponseCallback**的末尾运行它：

```
if(Completed != null)
   Completed(); 
```

并以这种方式重写您的代码：

```
POST ab = new POST();
ab.Completed += () => { MessageBox.Show(ab.responseString); };
ab.doSend(); 
```

它应该工作

# java - org.apache.lucene.index.IndexNotFoundException：在 org.apache.lucene.store.RAMDirectory 中找不到段*文件

> ID：10460737
> 
> 赞同：16
> 
> 时间：2012-05-05T09:57:29.957
> 
> 标签：java, netbeans, lucene

我是 Java 和 Lucene 的新手。我的代码从文件中获取一行并将其存储在 Lucene Index 中。但是当我创建一个`IndexReader`搜索并从索引中读取时，它会引发异常。

我的java代码如下。在创建`IndexReader`它时，它会抛出一个`IndexNotFoundException`

```
static String itemsfreq[];
static StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_35);
static IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35, analyzer);

public static void index_data(Directory indexed_document,int doc_num,IndexWriter w) throws IOException
    {
    for(int i = 0;i < itemsfreq.length;i++)
        {
        Document doc = new Document();
        doc.add(new Field(Integer.toString(doc_num)+","+itemsfreq[i],itemsfreq[i++], Field.Store.YES, Field.Index.ANALYZED));
        w.addDocument(doc);
        }
    }
//Gets string from a file and insert it in INDEX named indexed_document
public static void main(String[] args) throws IOException
    {
    BufferedReader reader = new BufferedReader(new FileReader("fullText100.txt"));
    String line;
    int i = 0;
    Directory indexed_document = new RAMDirectory();
    IndexWriter writer = new IndexWriter(indexed_document, config);
    while((line=reader.readLine()) != null)
        {
        if(i == 1)
            {
            break;
            }
        itemsfreq = line.split(" ");
        index_data(indexed_document,i,writer);
        i++;
        }

    IndexReader r = IndexReader.open(indexed_document);
    } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-25T11:47:49.140

在使用阅读器打开索引之前，调用一次`writer.commit()`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-05T10:16:25.430

为了将更改写入索引，您必须关闭索引编写器，然后打开 IndexReader。

```
writer.close(); 
```

如果您必须在写入完成之前打开 IndexReader，您必须告诉 IndexReader 重新打开索引才能看到更改。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-09T22:01:23.533

您需要做的是在打开您的 IndexSearcher 之前显式调用 commit。

```
 directory = new RAMDirectory();
    iwriter = new IndexWriter(directory, config);
    iwriter.commit(); 
```

现在打开搜索器

```
ireader = DirectoryReader.open(directory);
isearcher = new IndexSearcher(ireader); 
```

另请记住，您需要在添加文档后调用 commit 否则搜索可能找不到它。提交后需要重新打开搜索器（当然关闭旧搜索器）。

```
iwriter.commit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-07T00:18:18.713

我收到了这个错误（在 Lucene.Net，C# 中），因为我已经通过在我的文件系统和内存中创建适当的目录来创建索引`FSDirectory`，但实际上还没有添加任何文档。

具体来说，添加新文档的代码正在检查以确保它没有添加重复的阅读器，但是在尝试添加第一个文档时抛出了异常，因为还没有段。

我是这样处理的：

```
// Make a reader to check the index for duplicates
// The reader will only be aware of items that were in the index before it was created
IndexReader reader = null;
try {
    reader = IndexReader.Open( index, true );
} catch( IOException ) {
    // There is no segments file because the index is empty
    reader = null;
}

... // inside a method called by that scope, with reader passed in

// See if it exists already
// If the reader is null, then the index is empty
if( reader != null ) {
    var existsTerm = new Term( SingleFieldIndexManager.FieldName, formattedTerm );
    var matches = reader.TermDocs( existsTerm );
    if( matches.Next() ) {
        // It's already in there, no need to add again
        return;
    }
}

... // back to the first method after a return

// dispose of the reader if we managed to create one
if( reader != null ) {
    reader.Dispose();
} 
```

# cuda - CUDA 块/扭曲/线程如何映射到 CUDA 内核？

> ID：10460742
> 
> 赞同：164
> 
> 时间：2012-05-05T09:58:02.750
> 
> 标签：cuda, gpgpu, nvidia, warp-scheduler

我已经使用CUDA几个星期了，但是我对blocks/warps/thread的分配有些怀疑。 **我正在从教学的角度**（大学项目）研究架构，因此达到最佳性能不是我关心的问题。

首先，我想了解我是否了解这些事实：

1.  程序员编写内核，并在线程块网格中组织其执行。

2.  每个块都分配给一个流式多处理器 (SM)。一旦分配它就不能迁移到另一个 SM。

3.  每个 SM 将自己的块拆分为 Warps（当前最大大小为 32 个线程）。warp 中的所有线程在 SM 的资源上同时执行。

4.  线程的实际执行由 SM 中包含的 CUDA 核心执行。线程和内核之间没有特定的映射。

5.  如果一个 warp 包含 20 个线程，但当前只有 16 个内核可用，则该 warp 将不会运行。

6.  另一方面，如果一个块包含 48 个线程，它将被分成 2 个 warp，如果有足够的可用内存，它们将并行执行。

7.  如果一个线程在一个内核上启动，那么它会因内存访问或长浮点操作而停止，它的执行可能会在另一个内核上恢复。

他们是正确的吗？

现在，我有一个 GeForce 560 Ti，所以根据规格它配备了 8 个 SM，每个包含 48 个 CUDA 核心（总共 384 个核心）。

我的目标是确保架构的每个核心都执行相同的指令。假设我的代码不需要比每个 SM 中可用的更多的寄存器，我设想了不同的方法：

1.  我创建了 8 个块，每个块有 48 个线程，因此每个 SM 有 1 个块要执行。在这种情况下，48 个线程是否会在 SM 中并行执行（利用所有可用的 48 个内核）？

2.  如果我启动 64 个 6 个线程的块有什么区别吗？（假设它们将在 SM 之间均匀映射）

3.  如果我将 GPU “淹没”在预定的工作中（例如，创建 1024 个块，每个块有 1024 个线程）是否可以合理地假设所有内核都将在某个点使用，并且将执行相同的计算（假设线程永不停止）？

4.  有没有办法使用分析器检查这些情况？

5.  这个东西有参考吗？我阅读了 CUDA 编程指南以及“大规模并行处理器编程”和“CUDA 应用程序设计与开发”中专门针对硬件架构的章节；但我无法得到准确的答案。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-05-06T01:21:17.657

两个最好的参考是

1.  [NVIDIA Fermi 计算架构白皮书](http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf)
2.  [GF104 评论](http://www.anandtech.com/show/3809/nvidias-geforce-gtx-460-the-200-king/2)

我会尽力回答你的每一个问题。

程序员将工作划分为线程，将线程划分为线程块，将线程块划分为网格。计算工作分配器将线程块分配给流式多处理器 (SM)。一旦一个线程块被分配给一个 SM，线程块的资源就会被分配（warp 和共享内存）并且线程被分成 32 个线程的组，称为 warp。一旦分配了一个warp，它就被称为一个活动的warp。两个 warp 调度器每个周期选择两个活动的 warp 并将 warp 分派到执行单元。有关执行单元和指令调度的更多详细信息，请参见[1](http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf) p.7-10 和[2](http://www.anandtech.com/show/3809/nvidias-geforce-gtx-460-the-200-king/2)。

**4'** . 在laneid（warp中的线程索引）和核心之间存在映射。

**5'** . 如果一个 warp 包含少于 32 个线程，在大多数情况下，它的执行方式与它有 32 个线程一样。由于以下几个原因，warp 的活动线程可能少于 32 个：每个块的线程数不能被 32 整除，程序执行一个发散块，因此未采用当前路径的线程被标记为不活动，或者 warp 中的线程退出。

**6'** . 一个线程块将被划分为 WarpsPerBlock = (ThreadsPerBlock + WarpSize - 1) / WarpSize Warp 调度程序不需要从同一个线程块中选择两个 Warp。

**7'** . 执行单元不会因内存操作而停止。如果当一条指令准备好被调度时资源不可用，则该指令将在未来资源可用时再次调度。Warp 可能会在障碍处、内存操作、纹理操作、数据依赖关系等方面停滞不前……停滞的 warp 没有资格被 warp 调度程序选择。在 Fermi 上，每个周期至少有 2 个符合条件的 warp 是很有用的，这样 warp 调度程序可以发出指令。

有关GTX480 和 GTX560 之间的差异，请参阅参考资料[2 。](http://www.anandtech.com/show/3809/nvidias-geforce-gtx-460-the-200-king/2)

如果您阅读参考资料（几分钟），我想您会发现您的目标没有意义。我会尽力回应你的观点。

**1'** . 如果您启动 kernel<<<8, 48>>>，您将获得 8 个块，每个块有 2 个 32 和 16 个线程的扭曲。无法保证这 8 个块将分配给不同的 SM。如果将 2 个块分配给 SM，则每个 warp 调度程序都可以选择一个 warp 并执行该 warp。您将只使用 48 个内核中的 32 个。

**2'** . 8块48线程和64块6线程有很大区别。假设您的内核没有分歧，并且每个线程执行 10 条指令。

*   8 块 48 个线程 = 16 条扭曲 * 10 条指令 = 160 条指令
*   64 个块，6 个线程 = 64 条扭曲 * 10 条指令 = 640 条指令

为了获得最佳效率，工作分工应该是 32 个线程的倍数。硬件不会合并来自不同经线的线程。

**3'** . 如果内核没有最大化寄存器或共享内存，GTX560 一次可以有 8 个 SM * 8 个块 = 64 个块或 8 个 SM * 48 个扭曲 = 512 个扭曲。在任何给定时间，部分工作都将在 SM 上处于活动状态。每个 SM 都有多个执行单元（多于 CUDA 内核）。在任何给定时间使用哪些资源取决于应用程序的扭曲调度程序和指令组合。如果您不进行 TEX 操作，那么 TEX 单元将处于空闲状态。如果您不进行特殊的浮点运算，SUFU 单元将处于空闲状态。

**4'** . Parallel Nsight 和 Visual Profiler 展示

一个。执行IPC

湾。发行IPC

C。每个活动周期的活动经线

d。每个活动周期的合格经纱（仅限 Nsight）

e. 翘曲失速原因（仅限 Nsight）

F。每条指令执行的活动线程数

分析器不显示任何执行单元的利用率百分比。对于 GTX560，粗略估计为 IssuedIPC / MaxIPC。对于 MaxIPC 假设 GF100 (GTX480) 是 2 GF10x (GTX560) 是 4 但目标是 3 是更好的目标。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T12:02:40.567

“E. 如果一个 warp 包含 20 个线程，但当前只有 16 个内核可用，则该 warp 将不会运行。”

是不正确的。您混淆了通常意义上的核心（也用于 CPU） - GPU 中的“多处理器”数量，nVIDIA 营销中的核心（“我们的卡有数千个 CUDA 核心”）。

一个warp本身只能被调度在一个单核（=多处理器）上，并且最多可以同时运行32个线程；它不能使用多个内核。

数字“48 warp”是具有 Compute Capability 2.x 的 nVIDIA GPU 上每个多处理器的活动 warp 的最大数量（可以选择在下一个周期，在任何给定周期内安排工作的 warp）；这个数字对应于 1536 = 48 x 32 个线程。

[基于[此网络研讨会的答案](http://developer.download.nvidia.com/CUDA/training/cuda_webinars_WarpsAndOccupancy.pdf)]

# jquery - 如何在 jQuery 中连接到服务器更新（comet ajax）？

> ID：10460751
> 
> 赞同：0
> 
> 时间：2012-05-05T09:59:01.997
> 
> 标签：jquery, ajax, comet

[Comet 编程](http://en.wikipedia.org/wiki/Comet_%28programming%29)几乎为任何 Web 开发人员所熟知，而 jQuery 是目前市场上最流行的 JavaScript 库。正确的？

现在，假设服务器上有一个服务每秒向客户端推送数据。基于 C# 语言的服务器代码的 ASP.NET 实现可能是这样的：

```
while (true)
{
    Response.Write("{data: 'data from server'}");
    Response.Flush();
    Thread.Sleep(1000);
} 
```

还想象一下，在页面加载到浏览器后，一个 jQuery 片段触发与服务器的保持活动 HTTP ajax 连接，服务器在服务器上将这些数据片段发送回客户端。

到这里为止根本不是问题，因为儿童开发人员也可以做到。然而，jQuery AJAX 有许多在不同场合触发的回调函数。`success`, `error`, `complete`, 等等。但是这些方法都不会在从服务器发送的每个 JSON 上被触发。我的意思是，这段代码不起作用：

```
$(function () {
    $.ajax({
        type: 'GET',
        url: 'url-of-that-service',
        dataType: 'json',
        success: function (result) {
            /*
            Here, I need to get the result sent by 
            the Server, and based on its data, 
            manipulate DOM. For example, imagine
            that server sends its current time
            in JSON format each second. I need
            to parse the sent JSON string, and 
            append the server time somewhere in
            the web page.
            Success function never gets fired for
            these server-pushed data.
            What should I do?
            */
        },
        error: function (error) { }
    });
}); 
```

在 jQuery 中获得最新更新通知的一种方法是轮询`responseText`底层`xhr`对象，并定期检查服务器发送的最新数据。但是，我正在寻找一种基于事件的方法来挂钩活动的 ajax 连接，并在服务器发送某些内容时得到通知。

我的问题是，我应该如何检测到某些东西已经从服务器到达？有没有不包括`setTimeout`or的简洁方法`setInterval`？jQuery 在这里有什么可以帮助我们的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:04:48.023

例如，`sendCometRequest`您有发送 ajax 请求的功能。您可以使用递归而不是在您从服务器进行响应后再次`setInterval`调用的成功回调。`sendCometRequest`它调用为长轮询方法。对于 C#，您可以阅读[这篇文章](http://www.codeproject.com/Articles/27107/Scalable-COMET-Combined-with-ASP-NET)。它解释了异步彗星服务器的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:16:38.017

嗯，你的问题很多事情都不清楚..

但是如果你正在寻找彗星......我认为你应该寻找一个可靠和实用的彗星实现，并避免做一个 [thread.sleep()+ 连续轮询] 类型的黑客，因为它不会同时出售给许多人用户。

对于 .net，你有 - lightstreamer - [http://www.lightstreamer.com/](http://www.lightstreamer.com/)

并且，请确保您确实需要 comet，否则请尝试使用 web-sockets。

# android - 如何更新 UI 并等待更新完成

> ID：10460752
> 
> 赞同：2
> 
> 时间：2012-05-05T09:59:03.707
> 
> 标签：android

使用安卓 SDK 2.3。如何从服务同步更新 UI。我只需要更新 Activity 中的文本视图，但它必须是同步的，所以我的工作线程需要停止一段时间。在 iOS 上有 performSelectorOnMainThread waitUnitDone

我找不到使用 runOnUIThread 等在 Android 上完成的 waitUntil

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-05T10:09:33.700

在工作线程中完成任务后，有多种方法可以在 android 中更新 UI。你可以去[Handler](http://developer.android.com/reference/android/os/Handler.html)。其他有效地做到这一点的方法是使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。
[runOnUithread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)也是选项之一。

# sql - SQL 和 SUM 中的比较

> ID：10460755
> 
> 赞同：0
> 
> 时间：2012-05-05T09:59:50.880
> 
> 标签：sql, sql-server, sum

我真的想不出这个问题的好标题，但我有一个问题，我相信你可以帮助我！

我有一个查询，它输出如下内容：

```
Month | Year | Subcategory | PrivateLabel | Price
-------------------------------------------------
  1   | 2010 | 666         | No           | -520
  1   | 2010 | 666         | No           | -499,75
  1   | 2010 | 666         | No           | -59,95
  1   | 2010 | 666         | No           | -49,73
  1   | 2010 | 666         | No           | -32,95 
```

我想要`SUM`价格，因为所有其他数据都是一样的。我以为我可以用`SUM`and来做到这一点`GROUP BY`，但我不知道该怎么做，或者至少它没有输出正确的结果。

如果有帮助，该查询是两个表之间的内部联接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:07:17.820

```
select
   month
   ,year
   ,subcategory
   ,privatelabel
   ,sum(price) as [total sales]
from
   a inner join b ...
where
   any where clauses 
group by
   month
   ,year
   ,subcategory
   ,privatelabel 
```

如果我对您的理解正确，应该可以工作.. select 中的每个列都需要成为 group by 的一部分，或者是 group 中所有行的聚合函数

添加了一个小提琴..主要是因为我不知道他向 DDL 功能发短信并想对其进行测试；-)（感谢 Michael Buen）

[http://sqlfiddle.com/#!3/35c1c/1](http://sqlfiddle.com/#!3/35c1c/1)

请注意 where 子句是占位符..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:22:21.817

```
select month, year, subcategory, privatelabel, sum(price)
  from (put your query in here) dummyName
 group by month, year, subcategory, privatelabel 
```

基本思想是它将运行您当前的查询以获得高于输出的结果，然后对结果进行求和和分组。您的查询必须在括号中，并且您必须给它一些名称，例如 dummyName。只要它在sql中是唯一的，最好不是关键字，它是什么都无所谓。

可能有一种方法可以一次性完成所有这些操作，但是如果没有用于查询的 sql，我们将无能为力。

# debugging - 如何在不使用操作系统功能的情况下创建调试器

> ID：10460759
> 
> 赞同：3
> 
> 时间：2012-05-05T10:00:03.977
> 
> 标签：debugging

最近接到一家公司的测试任务。一个问题是：

> 假设您有一个任务是编写一个简单的调试器（用于专有操作系统），该调试器能够在应用程序中设置断点并运行它。您在这样的任务中做出的关键设计决策是什么？

我想我什么都不知道，但我完全不知道答案。我了解调试器的工作原理（INT 3 - 应该可以访问调试器的虚拟空间），但我想答案是关于“专有操作系统”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:12:13.087

这个问题，像往常一样在面试中应该**会让你对系统和要求提出更多的问题**。

操作系统是否已经提供了某种可以使用的原始跟踪工具？测试应用程序是用什么语言编写的？

一些检查工具，例如 valgrind，**[在他们自己的环境中运行被检查的程序](https://stackoverflow.com/q/1656227/13767)**，这在你的情况下似乎是一个好方法。另一种方法是**使用跟踪指令检测二进制文件**，与您的调试器通信 - 当您的应用程序在 VM 下运行时，这可能更合适且更容易执行。

# blackberry - 在 ListField Blackberry 上异步加载图像

> ID：10460761
> 
> 赞同：0
> 
> 时间：2012-05-05T10:00:06.150
> 
> 标签：blackberry, java-me, listfield

如何异步显示从列表字段上的 url 获取的图像？运行代码时出现异常。这是我的代码。我收到未捕获的 NoClassFoundError

```
private Bitmap getBitmap(final String strEventCode)
{
    if(hst.containsKey(strEventCode))
        return (Bitmap) hst.get(strEventCode);
    else
    {           
        Thread t = new Thread(new Runnable() 
        {
            public void run() 
            {                       
                Bitmap bmp = HttpUtils.getBitmap(strHalfUrl+strEventCode+".jpg");
                hst.put(strEventCode, bmp);
            }
        });
        t.start();
    }
    return null; 
} 
```

我使用 ListFieldCallBack 使用以下代码绘制图像：

```
class ListCallBack implements ListFieldCallback
{       
   public  void drawListRow(final ListField list, final net.rim.device.api.ui.Graphics g, final int index, final int y, final int w)
   {                  
       Event objEvent = (Event) eventData.elementAt(index);
       if(list.getSelectedIndex() == index)
       {              
           g.setColor(Color.LIGHTGRAY);
           g.fillRect(0, y, getWidth(), getHeight());            
       }
       Bitmap bmp = getBitmap(objEvent.getStrName());
       if(bmp==null)
           g.drawBitmap(0, y+5, loadingImage.getWidth(),loadingImage.getHeight(),loadingImage, 0, 0);
       else
           g.drawBitmap(0, y+5, bmp.getWidth(),bmp.getHeight(),bmp, 0, 0);

       g.setColor(Color.BLACK);
       int yPos = y + list.getRowHeight() - 1;
       g.drawLine(0, yPos, w, yPos);

       //final Bitmap b=(Bitmap)myImages.elementAt(index);
       //g.drawBitmap(0, y+5, b.getWidth(),b.getHeight(),b, 0, 0);         
   } 
   public Object get(ListField list, int index)
   { 
       return eventData.elementAt(index); 
   } 
   public int getPreferredWidth(ListField list)
   {
       return Display.getWidth();
   }
   public int indexOfList(ListField listField, String prefix, int start) 
   {
      return eventData.indexOf(prefix,start);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:59:56.267

我会改变一些事情：

*   在 BB 中，您可以生成的最大线程数，我认为它小于 20。您正在为每个图像生成一个线程，所以迟早您会遇到一个`TooManyThreadsException`. 相反，您应该在屏幕中有一个单独的工作线程来下载图像。您可以使用消费者-生产者模式：用户在向下滚动时生成图像下载请求（生产者），工作线程（消费者）将它们排入队列以进行处理。您可以使用由 Vector 定制的 LIFO 结构，并且`wait`在没有请求的情况下使用它。
*   您应该提供一个默认图像，以便在尚未下载真实图像时显示。
*   我几乎可以肯定您当前的代码对于`hst`哈希表来说不是线程安全的。您应该确保您的使用者是线程安全的。网上有很多关于如何做到这一点的例子。
*   当然，当用户更改屏幕时，工作线程应该终止。在您当前的代码中，即使用户已切换到另一个屏幕，线程仍将保持活动状态并尝试更新哈希表。

作为一种优化，如果您提前知道您的应用程序通常有多少线程（不计算图像），并且您知道不会超过最大线程限制，那么您可以拥有一个线程池，比如说， 5 个线程来下载图像，而不是单个工作线程。当所有 5 个线程都忙时，您将开始对请求进行排队。您还可以添加每个请求的最大时间机制，以防止线程忙于下载失败，因此不是在 2 分钟超时，而是在 30 秒超时并发出第二个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T15:57:09.490

什么是 HttpUtils.getBitmap()？如果它是为 Java-SE 编写的 Java 代码，那么它在 BlackBerry 上将无法正常工作，因为 BlackBerry 设备仅支持 Java-ME，其功能远低于现代 Java-SE 运行时。

至于异步加载，您需要在获取完成后将事件传回 UI。如果您一次获取多张照片，您还需要为该事件添加某种批处理，因为为每张照片发送一个事件可能会超出 UI 应用程序上的事件队列。

# ruby-on-rails - 使用 Wicked PDF gem/Rails 3 项目的未初始化常量 Mime::PDF

> ID：10460764
> 
> 赞同：9
> 
> 时间：2012-05-05T10:00:21.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wicked-pdf

当我尝试提交表单时出现此错误（PDF 应该是使用 Wicked PDF gem 生成的，在提交表单时）-

```
NameError in PostsController#create

uninitialized constant Mime::PDF
Rails.root: /Users/fkhalid2008/littlechits

Application Trace | Framework Trace | Full Trace
app/controllers/posts_controller.rb:42:in `create'
app/controllers/posts_controller.rb:39:in `create' 
```

我该如何解决？？？相关代码如下。

**帖子控制器**

```
 def create
    @post = Post.new(params[:post])
    @post.user = current_user

    respond_to do |format|
        if verify_recaptcha && @post.save
            format.html { redirect_to :action=> "index"}
            format.pdf do
                render :pdf => "file_name"
                end
        else
            format.html { render :action => "new" }
            format.json { render :json => @post.errors, :status => :unprocessable_entity }
        end
    end
end 
```

**CONFIG/INITIALIZERS/WICKED_PDF.RB**

```
# config/initializers/wicked_pdf.rb
WickedPdf.config = {
:exe_path => '/usr/local/bin/wkhtmltopdf'
} 
```

谢谢，

费萨尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-12T22:25:39.513

您需要在 config/initializers/mime_types.rb 中定义 pdf MIME 类型

```
Mime::Type.register "application/pdf", :pdf 
```

# php - 用php接收android POST数据

> ID：10460768
> 
> 赞同：1
> 
> 时间：2012-05-05T10:01:07.600
> 
> 标签：php, android, post

我已经搜索了一些答案，但我找不到任何东西。那么如何使用 PHP 接收和保存使用 POST 从 Android 应用程序发送给它的数据。我目前正在使用以下代码，所以我将使用什么 PHP 来存储数据。任何有关此教程的链接也会有所帮助。

```
public void send(View v)
 {
    // get the message from the message text box
    String msg = msgTextField.getText().toString();  

    // make sure the fields are not empty
    if (msg.length()>0)
    {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://kiwigaming.beastnode.net/upload.php");
     try {
       List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
       nameValuePairs.add(new BasicNameValuePair("Date", "Unitnumber"));
       nameValuePairs.add(new BasicNameValuePair("Doneornot", msg));
       httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
       httpclient.execute(httppost);
       msgTextField.setText(""); // clear text box
     } catch (ClientProtocolException e) {
         // TODO Auto-generated catch block
     } catch (IOException e) {
         // TODO Auto-generated catch block
     }

    }
    else
    {
        // display message if text fields are empty
        Toast.makeText(getBaseContext(),"All field are required",Toast.LENGTH_SHORT).show();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:02:48.177

超全局`$_POST`包含发布数据。

```
<?php
     print_r($_POST);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:05:57.937

您需要首先通过替换获得响应：

```
httpclient.execute(httppost); 
```

和：

```
HttpResponse response = httpclient.execute(httppost); 
```

然后你可以去

```
Head[] head = response.getHeaders();
for(int i = 0, i < head.length; i++){
    //find header?
} 
```

或获取内容？

```
String content = response.getEntity.getContent(); 
```

# jquery - JQuery Fancybox 不使用来自 JSON 调用的数据

> ID：10460769
> 
> 赞同：0
> 
> 时间：2012-05-05T10:01:42.447
> 
> 标签：jquery, json, fancybox

```
 $.getJSON("/Home/AjaxBrowse", { page: p ? p : 1 }, function (data)              {    
                    var output = "";
                    jQuery.each(data.users, function (key, value) {

                        output += '<li>'
                        + "<div class=\"slidera_img\">"
                        + "<a href=\"/image/viewImage/" + data.users[key].ImageId + "\" rel=\"example_group\">"
                        + "<img  src=\"/image/viewimage/" + data.users[key].ImageId + "?imageType=thumb\" width=\"100=\" height=\"100\" />"
                        +"</a>"
                        + "</div>"

                        + ' </li>';
                    });

                    $("#namesList")
                    .attr("start", data.pager.FirstItemOnPage) 
                    .html(output);
                    $("#namesPager").html(pagedList.render(data.pager));  
                }).error(function () {

                });
            } 
```

我有这段代码，我希望fancybox 可以使用它。

这是fancybox代码：

```
$(document).ready(function () {
        $("a[rel=example_group]").fancybox({
            'transitionIn': 'none',
            'transitionOut': 'none',
            'titlePosition': 'over',
            'type': 'image',
            'titleFormat': function (title, currentArray, currentIndex, currentOpts) {
                return '<span id="fancybox-title-over">' + (title.length ? ' &nbsp; ' + title : '') + '</span>';
            }
        });

    }); 
```

我可以显示图像。但是当我点击图片时，它会转到链接，它不会打开花哨的框:(

我怎样才能解决这个问题？

当我将输出的原始数据复制到 html 时。花式盒子的作品。但它不适用于来自 json 调用的数据。这与页面加载有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T17:36:27.783

Fancybox 1.3.x 不支持动态添加的元素。你的电话就是这种情况`JSON`。

`.on()`但是，您可以使用(jQuery v1.7+) 方法将 fancybox 绑定到这些元素并定位它们的父容器，例如：

```
$(document).ready(function () {
 $("div.slidera_img").on("focusin", function(){
  $("a[rel=example_group]").fancybox({
   'transitionIn': 'none',
   'transitionOut': 'none',
   'titlePosition': 'over',
   'type': 'image',
   'titleFormat': function (title, currentArray, currentIndex, currentOpts) {
     return '<span id="fancybox-title-over">' + (title.length ? ' &nbsp; ' + title : '') + '</span>';
   }
  }); // fancybox
 }); // on
}); // ready 
```

还可以添加`tabindex`到您生成的`<a>`标签中以修复 Chrome 的错误，例如：

```
+ "<a tabindex=\"1\" href=\"/image/viewImage/" + data.users[key].ImageId + "\" rel=\"example_group\">" 
```

[查看此帖子以获取更多信息](https://stackoverflow.com/a/9084293/1055987)和演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:30:21.843

```
$(document).ready(function () {
            $.getJSON('/Home/AjaxBrowse', { page: p ? p : 1 }, function (data) {
                var output = '';
                $.each(data.users, function (key, entity) {
                    output += '<li><div class="slidera_img"><a href="/image/viewImage/' + entity.ImageId + '" rel="example_group">'
                                + '<img  src="/image/viewimage/' + entity.ImageId + '"?imageType=thumb" width="100" height="100" /></a></div></li>';
                });

                $("#namesList").attr("start", data.pager.FirstItemOnPage).html(output);
                $("#namesPager").html(pagedList.render(data.pager));

                $("a[rel=example_group]").fancybox({
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    'titlePosition': 'over',
                    'type': 'image',
                    'titleFormat': function (title, currentArray, currentIndex, currentOpts) {
                        return '<span id="fancybox-title-over">' + (title.length ? ' &nbsp; ' + title : '') + '</span>';
                    }
                });
            }).error(function () {

            });
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:44:57.657

```
$(document).ready(function () {
            $.getJSON('/Home/AjaxBrowse', { page: p ? p : 1 }, function (data) {
                var output = '';
                $.each(data.users, function (key, entity) {
                    output += '<li><div class="slidera_img"><a href="/image/viewImage/' + entity.ImageId + '" rel="example_group">'
                                + '<img  src="/image/viewimage/' + entity.ImageId + '"?imageType=thumb" width="100" height="100" /></a></div></li>';
                });

                $("#namesList").attr("start", data.pager.FirstItemOnPage).html(output);
                $("#namesPager").html(pagedList.render(data.pager));               
            }).error(function () {

            });

            $("a[rel=example_group]").livequery(function () {
                $(this).fancybox({
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    'titlePosition': 'over',
                    'type': 'image',
                    'titleFormat': function (title, currentArray, currentIndex, currentOpts) {
                        return '<span id="fancybox-title-over">' + (title.length ? ' &nbsp; ' + title : '') + '</span>';
                    }
                });
            });
        }); 
```

# c# - 如何为每列划分具有相等空间的gridview

> ID：10460770
> 
> 赞同：1
> 
> 时间：2012-05-05T10:01:43.277
> 
> 标签：c#, asp.net

我有一个包含 8 列的网格，其中 4 列被单选按钮覆盖。我想按间距平均划分每一列，但它不起作用？我应该怎么办 ？？/

```
<asp:GridView ID="gvRelatives" runat="server" AutoGenerateColumns="False" EmptyDataText="Sorry, No Records Available !" CellPadding="4" ForeColor="#333333" GridLines="None"  CellSpacing ="2" onselectedindexchanged="gvRelatives_SelectedIndexChanged" AutoPostBack="True" onrowcreated="gvRelatives_RowCreated"                         onrowdatabound="gvRelatives_RowDataBound" BorderWidth ="2"
ondatabound="gvRelatives_DataBound" EnableSortingAndPagingCallbacks="False" >
<FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
<RowStyle BackColor="#EFF3FB" HorizontalAlign="center" />
<Columns>
<%--<asp:BoundField DataField="QTN_NO" HeaderText="Question Number" SortExpression="Name" InsertVisible ="false" />--%>
<asp:BoundField DataField="QTN_DESC" HeaderText="Question Description" SortExpression="Name" InsertVisible ="false"  />
<asp:BoundField DataField="SQTN_NO" HeaderText="Sub Question No" SortExpression="Name" />
<asp:BoundField DataField="SQTN_DESC" HeaderText="Sub Question Name" SortExpression="Name" />
<asp:TemplateField HeaderText ="Strongly Disagree"></asp:TemplateField>
<asp:TemplateField HeaderText ="Disagree"></asp:TemplateField>
<asp:TemplateField HeaderText ="Agree"></asp:TemplateField>
<asp:TemplateField HeaderText ="Strongly Agree"></asp:TemplateField>
</Columns>
<asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T00:11:05.550

尝试在每个字段中放置一个宽度值

```
 <asp:BoundField DataField="QTN_NO" HeaderText="Question Number" SortExpression="Name" Width="100px" InsertVisible ="false"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T02:52:22.227

Add width to each header BoundField Element.

```
<asp:BoundField DataField="Title" HeaderText="Title">  
<HeaderStyle HorizontalAlign="Center" Width="400"></HeaderStyle>
</asp:BoundField>` 
```

# udp - 如何模拟未完成的 Netty ChannelFuture

> ID：10460772
> 
> 赞同：1
> 
> 时间：2012-05-05T10:01:57.417
> 
> 标签：udp, netty

我正在使用 Netty 编写一个将 UDP 消息发送到服务器的客户端应用程序。简而言之，我正在使用这段代码将流写入通道：

```
ChannelFuture future = channel.write(request, remoteInetSocketAddress);
future.awaitUninterruptibly(timeout);
if(!future.isDone()){
   //abort logic
} 
```

一切正常，但有一件事：我无法测试中止逻辑，因为我无法使写入失败 - 即即使服务器关闭，未来也将成功完成。写操作通常需要大约 1 毫秒，因此设置非常小的超时并没有太大帮助。

我知道首选的方法是使用异步模型而不是 await() 调用，但是对于我的场景，我需要它是同步的，并且我需要确保它在某个时候完成。

有谁知道我怎么能模拟一个未完成的未来？

提前谢谢了！毫米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:29:55.670

根据您的代码编写方式，您可以使用模拟框架，例如 mockito。如果这不可能，您还可以使用“已连接”的 UDP 套接字，即绑定到本地地址的数据报套接字。如果你发送到一个伪造的服务器，你应该得到 PortunreachableException 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T14:04:33.073

Netty 有一个类 FailedFuture 可用于此目的，

例如，您可以使用模拟以下内容的测试来模拟您的课程：

```
ChannelFuture future;
if(ALWAYS_FAIL) {
    future = channel.newFailedFuture(new Exception("I failed"));
else
    future = channel.write(request, remoteInetSocketAddress); 
```

# javascript - 在条件内评估对象为假

> ID：10460774
> 
> 赞同：1
> 
> 时间：2012-05-05T10:02:02.137
> 
> 标签：javascript

假设我们已经定义了一个队列对象，并且我们想要在队列中有项目时循环。

显而易见的解决方案：

```
var queue = new Queue();
// populate queue
while (queue.size()) {
    queue.pop();
} 
```

所需的形式：

```
var queue = new Queue();
// populate queue
while (queue) { // should stop when queue's size is 0
    queue.pop();
} 
```

是否有可能实现第二个示例 javascript 中显示的这种（精确）语法？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:04:36.117

它必须是一个对象吗？为什么不使用数组？

```
var queue = [array,of,things,to,do];
while (queue.length) {
    var todo = queue.pop();
    //do something to todo
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:23:54.517

```
var MyClass = function(){

   this.CanOperate; 
   //value should be false when nothing can be done with this class instance
};

Use var obj = new MyClass();

while (obj.CanOperate) { 
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:29:55.647

这些中的任何一个都可以工作：

**销毁队列从而满足条件要求**

```
var queue = new Queue();
while (queue) {
  queue.size() ? queue.pop() : queue = null;  
}​ 
```

**手动跳出循环**

```
var queue = new Queue();
while (queue) {
  queue.size() ? queue.pop() : break;  
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T10:39:59.590

像这样的东西应该工作：

```
function Queue() {}
Queue.prototype.toString = function() {
    // I'm using "this.queue" as if it were an array with your actions
    return !!this.queue.length;
};

var queue = new Queue();

// Populate queue

while ( queue ) {
    queue.pop();
} 
```

这个想法是重写`toString`以返回不是一些字符串值，而是一个布尔值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T10:56:50.033

> 是否有可能实现这种（确切的）语法

我的回答是：没有。

我尝试了以下方法来解决这个谜题，它似乎不起作用。
然而，我认为这是要走的路。

免责声明：这只是一些解谜，而不是真实世界的代码。

```
var Queue = function () {};
Queue.prototype.sizeValue = 2;
Queue.prototype.size = function () 
{
    return this.sizeValue;
};
Queue.prototype.pop = function () 
{
    // EDIT: yes, it's not popping anything.
    // it just reduces size to make toString()
    // and valueOf() return nulls.
    this.sizeValue -= 1;
};
Queue.prototype.valueOf = function () 
{
    if (this.size() > 0) {
        return this.sizeValue;
    }
    return null;
};
Queue.prototype.toString = function () 
{
    if (this.size() > 0) {
        return "Queue["+this.sizeValue+"]";
    }
    return null;
};

var test = new Queue();
while (test) {
    test.pop();
    if (test.size() < -1) {
        // just to get you out of the loop while testing
        alert("failed");
        break;
    }
}
alert("out:"+test); 
```

在 toString() 和 valueOf() 中放置警报，以查看它们不会被条件触发`while (test) {}`。

# java - Hudson CI 和 FindBugs/Static Analysis 插件的问题

> ID：10460775
> 
> 赞同：0
> 
> 时间：2012-05-05T10:02:20.130
> 
> 标签：java, maven, hudson, maven-3, hudson-plugins

我安装了 Hudson v2.20。我正在尝试安装 FindBugs 插件，但是当 Hudson 在下载插件后重新启动时，插件无法加载并出现以下错误。有没有其他人看过这个？如果是这样，我将如何解决它？

我使用 Hudson 插件界面安装了插件。我的猜测是该插件由于某种原因与 Hudson 版本不兼容？

```
hudson.util.IOException2: Failed to load plugin instance for: analysis-core
    at org.hudsonci.inject.internal.plugin.SmoothiePluginStrategy.load(SmoothiePluginStrategy.java:193)
    at org.hudsonci.inject.internal.plugin.DelegatingPluginStrategy.load(DelegatingPluginStrategy.java:72)
    at hudson.PluginManager$2$1$1.run(PluginManager.java:297)
    at org.jvnet.hudson.reactor.TaskGraphBuilder$TaskImpl.run(TaskGraphBuilder.java:146)
    at org.jvnet.hudson.reactor.Reactor.runTask(Reactor.java:259)
    at hudson.model.Hudson$4.runTask(Hudson.java:698)
    at org.jvnet.hudson.reactor.Reactor$2.run(Reactor.java:187)
    at org.jvnet.hudson.reactor.Reactor$Node.run(Reactor.java:94)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.LinkageError: loader (instance of  org/hudsonci/inject/internal/plugin/PluginClassLoader): attempted  duplicate class definition for name: "org/apache/xerces/parsers/SAXParser"
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:465)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:139)
    at org.aspectj.weaver.bcel.ExtensibleURLClassLoader.defineClass(ExtensibleURLClassLoader.java:63)
    at org.aspectj.weaver.loadtime.WeavingURLClassLoader.defineClass(WeavingURLClassLoader.java:151)
    at org.aspectj.weaver.bcel.ExtensibleURLClassLoader.defineClass(ExtensibleURLClassLoader.java:97)
    at org.aspectj.weaver.bcel.ExtensibleURLClassLoader.findClass(ExtensibleURLClassLoader.java:52)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at hudson.ClassicPluginStrategy$DependencyClassLoader.findClass(ClassicPluginStrategy.java:426)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:295)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.xml.sax.helpers.NewInstance.newInstance(NewInstance.java:49)
    at org.xml.sax.helpers.XMLReaderFactory.loadClass(XMLReaderFactory.java:187)
    at org.xml.sax.helpers.XMLReaderFactory.createXMLReader(XMLReaderFactory.java:150)
    at org.aspectj.weaver.loadtime.definition.DocumentParser.getXMLReader(DocumentParser.java:167)
    at org.aspectj.weaver.loadtime.definition.DocumentParser.saxParsing(DocumentParser.java:137)
    at org.aspectj.weaver.loadtime.definition.DocumentParser.parse(DocumentParser.java:117)
    at org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor.parseDefinitions(ClassLoaderWeavingAdaptor.java:258)
    at org.aspectj.weaver.loadtime.DefaultWeavingContext.getDefinitions(DefaultWeavingContext.java:130)
    at org.aspectj.weaver.loadtime.ClassLoaderWeavingAdaptor.initialize(ClassLoaderWeavingAdaptor.java:161)
    at org.aspectj.weaver.loadtime.WeavingURLClassLoader.createAdaptor(WeavingURLClassLoader.java:171)
    at org.aspectj.weaver.loadtime.WeavingURLClassLoader.defineClass(WeavingURLClassLoader.java:132)
    at org.aspectj.weaver.bcel.ExtensibleURLClassLoader.defineClass(ExtensibleURLClassLoader.java:97)
    at org.aspectj.weaver.bcel.ExtensibleURLClassLoader.findClass(ExtensibleURLClassLoader.java:52)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.hudsonci.inject.internal.plugin.SmoothiePluginStrategy.loadPluginClass(SmoothiePluginStrategy.java:217)
    at org.hudsonci.inject.internal.plugin.SmoothiePluginStrategy.load(SmoothiePluginStrategy.java:188)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:02:36.083

抱歉，您对此有不好的体验。该插件是插件所有者指定为与 Hudson 和 Jenkins [1] 兼容的众多插件之一。不幸的是，Jenkins 似乎通过更改其 maven-plugin 打破了这种兼容性，这是该插件直接依赖的核心的一部分。Hudson 暂时恢复到早期版本的静态分析，现在将直接分叉和维护它和相关插件。

Hudson 非常努力地保持两个系统之间的兼容性，并添加了新的功能，例如 Sonatype 的 Maven 3 集成和 Cascading 项目功能，以及在过去一年中提高了性能和稳定性。这些都没有反映在 Jenkins 中。

Hudson 是 Eclipse 的里程碑版本，由于通过 Eclipse 的 IP 和出处检查（以及相关的代码和库清理）的艰巨任务即将完成，因此将于 6 月完全发布。您可以在博客或 Eclipse 站点 [2] 上阅读更多相关信息。它仍在蓬勃发展，而 Hudson 的用户社区并没有全部向前发展。

[1] [http://wiki.hudson-ci.org/display/HUDSON/Plugins#Plugins-tier3](http://wiki.hudson-ci.org/display/HUDSON/Plugins#Plugins-tier3)

[2] [http://www.eclipse.org/hudson](http://www.eclipse.org/hudson)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T14:48:13.437

在我的一位同事的建议下，我安装了[Jenkins](http://jenkins-ci.org/ "詹金斯")。一切都是第一次工作，没有错误。我猜社区已经转向了 Jenkins，一旦甲骨文将它交给了 eclipse 基金会，没有人会费心回到 hudson。

# php - php表单发送空白电子邮件？

> ID：10460782
> 
> 赞同：1
> 
> 时间：2012-05-05T10:03:18.940
> 
> 标签：php, forms, email

我的客户通过我的电子邮件接收空白表格时遇到了一些问题。

我正在使用以下表格

```
 <form method="get" action="javascript:contactForm()" class="form">
            <div class="alertForm"><!-- Error's go in here --></div>
            <div class="innerForm">
                <div class="placeholder">Your Name</div>
              <input type="text" name="name" value="" id="name" placeholder="">
                <div class="placeholder">Your Phone Number</div>
              <input type="text" name="number" value="" id="number" placeholder="">
              <select name="time" id="time">
                <option value="null">Please Select A Time</option>
                <option value="09:00 - 11:00">09:00 - 11:00</option>
                <option value="11:00 - 13:00">11:00 - 13:00</option>
                <option value="13:00 - 15:00">13:00 - 15:00</option>
                <option value="15:00 - 17:00">15:00 - 17:00</option>
                <option value="17:00 - 19:00">17:00 - 19:00</option>
              </select>
              <input type="submit" value="Call Me Back">
            </div>
          </form> 
```

和 PHP 帖子

```
 $name = $_POST['name']; $number = $_POST['number']; $time = $_POST['time'];
     $subject = "[CALLBACK] ".$name." - ".$number;
     $to = "clown@thecircus.co.uk";
     $headers = "From:" . "website@thecircus.co.uk";
     $message = $name." would like you to call them back on ".$number." between ".$time;

     if(mail($to, $subject, $message, $headers)){ echo "We will call you within the time       you've selected. If not today, then the next day.<br><br>Thank you."; }
     else{ echo "Something's gone horribly wrong! PANIC."; } 
```

如果我尝试它似乎工作正常 - 但是我每天收到大约 7 封空白电子邮件。我不确定这些是垃圾邮件还是它们实际上是联系表格但丢失了数据？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:12:03.743

您的表单`method`设置为，`get`但您正在尝试访问`$_POST`PHP 中的变量。将您的表单切换到`method="post"`或使用`$_GET`而不是`$_POST`（尽管我建议使用 POST）。

但是，您还应该在表单中添加一些服务器端验证。至少检查是否已将某些内容输入到您的表单字段中。

# android - 带有像素而不是范围 [-1,1] 的 Android OpenGL ES drawArray

> ID：10460783
> 
> 赞同：0
> 
> 时间：2012-05-05T10:03:25.140
> 
> 标签：android, opengl-es, glsurfaceview

我是 openGL 的新手，想在 GLSurfaceView 上画线。

由于性能原因，我从画布切换到了 openGL。

我知道 OpenGL 更有可能用于 3D 绘图，因此不使用像素。

我想绘制像线条一样的 2D 图形，但需要以像素为单位的尺寸，只有 x 和 y 值而没有第 3 维。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:14:12.493

正确设置投影和视图矩阵。首先，使用正交投影，其次使用身份。

```
P = Diagonal(2 / W, 2 / H, 2 / (10 + 10), 1)
// Assume Znear=-10, ZFar=10, W and H are width and Height of the screen. 
```

因此，您看到的坐标将在立方体中出现 -W/2 到 W/2，-H/2 到 H/2 和 -10 到 10。您甚至可以在视图矩阵中平移以将原点从 -W/2、-H/ 2 to 0, 0 平移视图矩阵：`V = Translate(W/2, H/2, 0)`.

# ios - UIWebView 的行为与 Safari 应用程序不同

> ID：10460794
> 
> 赞同：1
> 
> 时间：2012-05-05T10:04:44.747
> 
> 标签：ios, objective-c, uiwebview

我正在开发一个带有`UIWebView`. 在 iOS 上的 Safari 应用程序中显示时显示的网页`UIWebView`工作正常，但是当它显示在里面`UIWebView`时，点击“登录”按钮时没有任何反应：[http](http://www.bnpsolutions.com/Common/Login_Mobile.aspx) ://www.bnpsolutions.com/Common/Login_Mobile.aspx .

有人知道为什么吗？

您可以在此处下载我的小型 iOS 示例项目：http: [//uploads.demaweb.dk/WebView.zip](http://uploads.demaweb.dk/WebView.zip)

**编辑1：**

我已更改 WebView 以显示[一个仅包含 jQuery 的简单页面](http://uploads.demaweb.dk/jquery.html)：http : [//uploads.demaweb.dk/WebView2.zip](http://uploads.demaweb.dk/WebView2.zip)。

错误信息是：

```
WebView[13623:11703] JavaScript exception: (/ajax/libs/jquery/1.7.2/jquery.js):5187 - SYNTAX_ERR - SYNTAX_ERR: DOM Exception 12
Line:
(function(){ 
```

为什么 UIWebView 无法加载 jQuery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:12:26.583

我建议定义委托方法：

```
– webView:shouldStartLoadWithRequest:navigationType:
– webViewDidStartLoad:
– webViewDidFinishLoad:
– webView:didFailLoadWithError:    /* especially this one!! */ 
```

并在那里放置一些 NSLog 跟踪，以便您可以看到正在发生的事情。Safari 可能比 UIWebView 对错误更有弹性（或以更友好的方式处理它），因此行为上的差异。但是你应该直接在你的应用程序中检查它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:04:37.740

好吧，使用此[代码](http://git-wip-us.apache.org/repos/asf?p=incubator-cordova-ios.git;a=commit;h=5d2e8049)调试您的 UIWebView 我在您的 javascript 中发现了与资源相关的 2 个异常`/WebResource.axd`。检查一下，我希望它有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T23:38:49.600

关于生成的错误消息 - UIWebView 确实能够加载 jQuery - 您收到的关于异常的消息（基于评论中关于如何调试 UIWebView 的链接）在引发异常时发生 -异常是否被捕获。

jQuery 中的那个特定函数在函数开头附近有一个 try/catch，它有目的地尝试引发异常（并捕获它）。

试试这段代码看看我的意思：

```
NSString *htmlString = @"<html><body>Hello World I am a <b>browser</b><script>(function(){try {var a=undefined; a();} catch (err) {} }());</script></body></html>";
[uiWebView loadHTMLString:htmlString baseURL:nil]; 
```

不管有没有try/catch，都会报异常。

# android - 如何在屏幕中间设置 Tabview

> ID：10460796
> 
> 赞同：1
> 
> 时间：2012-05-05T10:05:08.847
> 
> 标签：android, android-layout, android-xml

我正在尝试制作一个 Android 应用程序，我想在其中使用 a`Tabview`在屏幕之间导航。当我将它放在屏幕底部或顶部时，它工作正常。但是根据应用要求，我想把它放在屏幕中间。即在 的元素之间`FrameLayout`。这是两种基本情况的代码：

(1)**放在`Tabview`底部：**

```
<LinearLayout 
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:paddingTop="0dp">

<FrameLayout android:id="@android:id/tabcontent"
    android:layout_width="fill_parent" 
    android:layout_height="0dip"
    android:layout_weight="1" />

<TabWidget 
    android:id="@android:id/tabs"
    android:layout_width="0dp" 
    android:layout_height="0dp"
    android:layout_weight="1" /> 
```

(2)**放在`Tabview`顶部：**

```
<LinearLayout 
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:paddingTop="0dp">

<TabWidget 
    android:id="@android:id/tabs"
    android:layout_width="0dp" 
    android:layout_height="0dp"
    android:layout_weight="1" />  

<FrameLayout android:id="@android:id/tabcontent"
    android:layout_width="fill_parent" 
    android:layout_height="0dip"
    android:layout_weight="1" /> 
```

(3) **我想做什么：**

我想把`Tabview`. `FrameLayout`更加具体：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:id="@+id/now_lisn_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    style="@style/background">

<include android:id="@+id/main_header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/back_header" />

<include android:id="@+id/image_name_strip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    layout="@layout/image_name_holder"
    android:layout_marginTop="5dip"/>

<ListView  
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:divider="@color/listDivider"
    android:dividerHeight="1dp"
    android:footerDividersEnabled="false"
    android:headerDividersEnabled="true"
    style="@style/listBackground" 
    android:id="@+id/list"/>           
</LinearLayout> 
```

上面的布局包含`FrameLayout`. 我想把`Tabview`. `ListView`有什么办法吗？

# vb.net - Visual Basic 2008 移动项目：如何将数据从组合框过滤到 DataGrid

> ID：10460801
> 
> 赞同：0
> 
> 时间：2012-05-05T10:05:31.720
> 
> 标签：vb.net, visual-studio

我正在做一个移动项目，我有这个：

1.  搜索文本框（fillby 方法）
2.  一个组合框（绑定到数据）
3.  数据网格

我能够做到这一点：

使用 fillby 方法在文本框中输入搜索查询，数据网格会显示相应的行。

我需要帮助：

使用组合框过滤相同的数据。如果我对组合框使用 Add Query 方法（fillby 方法），它会创建另一个文本框搜索查询。我不想要那个。我希望能够**通过组合框过滤数据网格**。

这是我的 ComboBox Sub 代码：

```
 Private Sub CityComboBox_SelectedValueChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles CityComboBox.SelectedValueChanged

    Dim RestIDShort As Short       'primary key
    Dim RestDataRow As DataRow     'complete data row of selected value
    Dim RestDataRows As DataRow()  'holding the data

    Try

        'get the restID for the selected city
        RestIDShort = Convert.ToInt16(CityComboBox.SelectedValue)

        'find the row from the table for the selected city
        RestDataRow = RestaurantEateriesDataSet.RestaurantTable.FindByRestID(RestIDShort)

        'Grab the variables here. Don't really need them.  Just to see if I can pull data.

        'NameStringShow = RestDataRow("Name")
        'FoodTypeStringShow = RestDataRow("FoodCat")
        'CityStringShow = RestDataRow("City")

        'test to see if we can write to screen
        'successfully wrote this to the screen onload but not on combobox change
        'TextBox1.Text = NameStringShow

        'retrieve the array for the selected data row
        'not sure if this is how to call when there is only one table????
         RestDataRows = RestDataRow.GetChildRows("RestaurantTable")

        'fill the datagrid with the array of selected value rows
        'I don't know how to do this part:   

    Catch ex As Exception
        MessageBox.Show(ex.Message)
    End Try

    End Sub 
```

我确实创建了一个可以调用的查询（如果需要）。当我在文本框中调用它时，查询会起作用，所以如果有办法在组合框中调用它，然后在 datagrid 中显示选定的字段。. . 一切都会好的。

任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T15:05:12.127

```
Private Sub bttnFilter Click(...) Handles bttnFilter.Click
    Dim filter As String
    filter = InputBox("Enter product name, or part of it")
    ProductsBindingSource.Filter = "ProductName LIKE '%" & filter.Trim & "%'"
End Sub 
```

这同样适用于组合框，使用 combobox1.selectedItem() 代替过滤器。
它是搜索的基础，如果您有任何其他问题欢迎您。

# java - 如何获取邮政编码是否在澳大利亚或不在android中？

> ID：10460803
> 
> 赞同：0
> 
> 时间：2012-05-05T10:06:08.680
> 
> 标签：java, android

在我的新项目中，我为用户提供了一个编辑文本，他必须在其中输入邮政编码，我必须检查所提供的邮政编码是否对澳大利亚有效。我收到了很多建议，但我需要最简单的建议。此外，如果我能找到一个可以检查这个的网络服务，那将是最好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:23:34.033

Here's an api you can use : [Sensis](http://developers.sensis.com.au/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:12:54.460

首先，我不住在澳大利亚，但[维基百科](http://en.wikipedia.org/wiki/Postcodes_in_Australia)说：

> 澳大利亚邮政编码是四位数

您为什么不针对描述此（简单）模式的正则表达式测试您的邮政编码？

我建议您阅读邮政编码的[分配规则](http://en.wikipedia.org/wiki/Postcodes_in_Australia#Allocation)，看看是否有连续的或在给定范围内是否有无效的邮政编码......

现在，如果您不想重新发明轮子，我想您可以使用地理编码 API、[Google 地理编码 API](https://developers.google.com/maps/documentation/geocoding/)或[Yahoo! 占位符 API](http://developer.yahoo.com/geo/placefinder/)。实现可能很简单：发送邮政编码（我想您可以只发送此信息）并检查响应国家是否为澳大利亚。

# protocols - AT命令中的*是什么？

> ID：10460809
> 
> 赞同：1
> 
> 时间：2012-05-05T10:06:55.917
> 
> 标签：protocols, robotics, at-command

我在 AT 命令的专有使用中遇到了这种行：

> AT*REF=1,290717696<LF>

这是一个专有命令，因为它在协议中用于控制机器人。

根据我在[Wikipedia](http://en.wikipedia.org/wiki/Hayes_command_set#Description)和其他来源上阅读的内容，AT 命令扩展应使用“\”或“%”。没有提到“*”。

那么`*`定义什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T05:09:38.497

在实现专有 AT 命令的第一个字符时，不同的制造商使用了两个以上不同的字符。我见过的一些：

！@#$​​%^*_

您的设备制造商可能已为具有类似功能的命令选择了“*”，或者他们可能已选择以“*”作为第一个字符来实现其所有专有 AT 命令。

许多不同的制造商以 PDF 格式在线提供了许多 AT 命令参考。也许您的设备制造商也会提供此信息。

# iphone - 双击制作/检测 iPhone/iPad 回帖

> ID：10460810
> 
> 赞同：0
> 
> 时间：2012-05-05T10:07:00.407
> 
> 标签：iphone, asp.net, ipad

在 asp.net Web 应用程序中 - 无需编写特定于移动设备的站点，是否可以停止在 iPhone 上双击缩放？默认行为应该是产生回发（并且在我的 Android 和普通网络浏览器中） - 但 iPhone 似乎将此作为缩放命令。

所以我的问题是，我如何让 iPhone/iPad 识别出我实际上想要回发？

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T23:52:13.990

如果有人感兴趣，我的具体问题是，我在网格的每个单元格上都有一个弹出窗口（onmouseover ...） - 但是，要开始回发，您必须实际单击网格中的一个单元格，而不是悬停超过它。然而，在 iPhone 上“悬停”基本上是在“点击”其他所有内容 - 所以当人们点击时，所发生的只是弹出窗口再次显示，并且没有执行回发 - 这意味着人们无法进步。

解决方案是检测 iPhone/Pad/Touch，如果检测到这些设备，则不输出“onmouseover” - 然后底层点击可用，并且会按设计进行。

检查 iPhone 等的代码：

```
 Dim iphone as Boolean = False
    Dim userAgent = HttpContext.Current.Request.UserAgent.ToLower()
    ' iPhone is there
    If userAgent.Contains("iphone") Then
        iphone = True
    ElseIf userAgent.Contains("ipad") Then
        iphone = True
    ElseIf userAgent.Contains("itouch") Then
        iphone = True
    End If 
```

希望这可以帮助其他人解决这个特定问题，

# mysql - 当表达式不涉及列时，查询优化器是否将表达式转换为常量

> ID：10460812
> 
> 赞同：1
> 
> 时间：2012-05-05T10:07:27.243
> 
> 标签：mysql, sql, sql-server

我有类似的查询：

```
-- MySQL Query
SELECT * FROM table1 WHERE start_date >= CURRENT_TIMESTAMP - INTERVAL 7 DAY

-- MSSQL Query
SELECT * FROM table1 WHERE start_date >= GETDATE() - 7 
```

由于右侧的表达式不依赖于列值，我是否应该期望查询优化器将其优化为一个常量值，例如：

```
SELECT * FROM table1 WHERE start_date >= '2012-04-28 14:54:31' 
```

或者我应该计算常量并使用代码构建查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:23:37.023

根据 MySQL[`NOW()`](http://dev.mysql.com/doc/refman/date-and-time-functions.html#function_now)函数的文档（这[`CURRENT_TIMESTAMP`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-timestamp)是同义词）：

> [`NOW()`](http://dev.mysql.com/doc/refman/date-and-time-functions.html#function_now)返回一个常数时间，指示语句开始执行的时间。（在存储的函数或触发器中，[`NOW()`](http://dev.mysql.com/doc/refman/date-and-time-functions.html#function_now)返回函数或触发语句开始执行的时间。）这与 for 的行为不同[`SYSDATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_sysdate)，后者返回其执行的确切时间。

因此，查询优化器将根据需要将其视为常量。可以在输出中[看到这一点。](http://sqlfiddle.com/#!2/a4f05/3)`EXPLAIN`

我不能为 MSSQL 说话，虽然也许[这个博客](http://sqlblog.com/blogs/andrew_kelly/archive/2008/02/27/when-getdate-is-not-a-constant.aspx)值得一读？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T10:15:55.830

你在右边有一个函数，而不是一个常数。每次都必须重新评估查询...

（我错过了一点吗？？）

编辑

就像@Martin 和@eggyval 好心解释的那样，我确实错过了一点。这个问题很明显不是关于编译时优化的，所以我把这个可怜的、可怜的评论作为纪念碑来纪念像我这样的混蛋应该发生什么……

# javascript - 使用jQuery找到孩子的索引？

> ID：10460815
> 
> 赞同：21
> 
> 时间：2012-05-05T10:07:50.987
> 
> 标签：javascript, jquery, html

如果我有一个像这样的 html 结构：

```
<div id="parent">
 <div class="child first">
   <div class="sub-child"></div>
 </div>

 <div class="child second">
   <div class="sub-child"></div>
 </div>

 <div class="child third">
   <div class="sub-child"></div>
 </div>
</div> 
```

我有一个通过定义的单击处理程序`($('#parent.child')).click()`，然后我单击具有类`second`（`first, second, third`已简单地添加类以使演示更清晰）的 div 是否有一种简单的方法来获取数字 1，因为它是第二个孩子？（基于 0 的索引）？

就像是`$(this).index`

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-05T10:20:16.560

只需看看 jQuery API。您建议的方法[`index`](http://api.jquery.com/index/)是完全正确的：

```
$('#parent .child').click(function() {
    var index = $(this).index();
}); 
```

从文档：

> 如果没有参数传递给 .index() 方法，则返回值是一个整数，指示 jQuery 对象中的第一个元素相对于其兄弟元素的位置。

另请注意，我已从您的示例中稍微更改了选择器。我猜这只是你问题中的一个错字。`#parent.child`将查找 ID 为“parent”的元素和“child”类，但您实际上希望`#parent .child`（注意空格）查找 ID 为“parent”的元素的后代的具有“child”类的元素。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-05T10:21:28.590

该[`index()`](http://api.jquery.com/index/)方法可用于获取集合中元素的位置。在基本情况下，`$(this).index()`应该可以工作。

但是对于更具体的集合，您可以使用`collection.index(item)`. 想象一下在你的`#parent`测量中添加一些不应该被计算在内的简单的东西`index()`（a `span`, `img`, 任何东西）。使用简单的方法，您的代码可能会中断，但使用特定的方法，它不会。

像这样的东西应该适合你：

```
var $children = $('#parent .child').click(function​ () {
    console.log($children.index(this));
});​ 
```

[jsFiddle 演示](http://jsfiddle.net/ET6YW/)

# sterling-db - 2 个应用程序可以访问 1 个 Sterling NoSQL 数据库吗？

> ID：10460824
> 
> 赞同：0
> 
> 时间：2012-05-05T10:08:43.570
> 
> 标签：sterling-db

我目前正在使用 SterlingDB（不是 phone 7 版本），并且希望能够从 2 个不同的应用程序（因此不同的 AppDomain）访问相同的 Sterling 数据库。

我已经确定，即使您将 FileSystemDriver 传递给 RegisterDatabase 方法：

```
engine.SterlingDatabase.RegisterDatabase<PodcastDatabase>(new FileSystemDriver("MyTestApp/")); 
```

您最终会得到 2 个不同的数据库： I:\Users\Dave\AppData\Local\Sterling Database\TestMeGo\1123790033 和 I:\Users\Dave\AppData\Local\Sterling Database\TestMeGo\1728918701

这大概是因为应用程序包含在单独的 AppDomain 中，并且 Sterling 使用的 IsolatedStorage 被相应地划分。

有没有办法让一个以上的应用程序可以访问一个 Sterling 数据库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:41:39.993

这应该是可能的，你可以[在这里](https://stackoverflow.com/questions/2637555/can-two-silverlight-applications-share-isolatedstorage-on-one-machine)阅读。您要么让存储基于 XAP url，要么基于源域。如果您可以让这两个应用程序来自同一个源域，并使用[GetUserStoreForSite](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.getuserstoreforsite%28v=VS.95%29.aspx)方法，您应该能够让它工作。

# directx - 更改 Directx 网格中心

> ID：10460825
> 
> 赞同：1
> 
> 时间：2012-05-05T10:08:55.877
> 
> 标签：directx, rotation, scale, mesh, cube

我在用 VB.NET 编写的 DirectX 中创建了一个网格框。当我旋转和缩放网格时，它是从中心开始的。

如何更改类似于下图的网格中心：

[网格中心](http://imageshack.us/photo/my-images/806/18423269.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:00:11.640

将网格矩阵平移到旋转/缩放中心，应用旋转/缩放，然后将矩阵平移回来。例如：

```
matWorld = Matrix.Identity

' Translate to rotation/scaling center
matWorld = matWorld * Matrix.Translate(0.1, 0.2, 0.3)

' Apply your rotation/scaling
matWorld = matWorld * Matrix.RotationZ(0.01)

' Translate from rotation/scaling center
matWorld = matWorld * Matrix.Translate(-0.1, -0.2, -0.3)

' Assign matWorld as world transformation matrix
device.Transform.World = matWorld 
```

*注意：我没有测试上述内容，因此可能存在语法问题。*

# entity-framework - 更新属性上的自我跟踪实体不会改变其状态

> ID：10460826
> 
> 赞同：0
> 
> 时间：2012-05-05T10:09:10.190
> 
> 标签：entity-framework, self-tracking-entities

我使用了自我跟踪实体，我执行以下操作：

1.- 我创建了一个新实体

2.- 我修改了它的一个属性，例如 entityName="Dummy"

修改后，实体的状态仍然没有改变，所以当我执行 applychanges 时，它会做任何事情。

我尝试将其状态设置为已修改，然后将更改保存在数据库中。但是这样一来，我就有问题了，因为如果我没记错的话，STE实现了INotifyPropertyChanged接口，所以当我修改一个属性时，就是notify，这是我想要的一个特性。

我错了？也许当我改变一个实体的属性时它不会改变它的状态。

谢谢。戴姆洛克。

编辑：当我使用 WCF 服务获取实体时，也会出现此问题，该服务使用 EF 4.0 将查询结果发送到数据库。

**EDIT2：**我发现了我的错误。

问题是我有一个 dll 项目，其中有 tt 文件和自我跟踪实体。

我有一个引用该项目的 WCF 服务。此服务使用使用 EF 访问数据库的存储库。

我有一个托管 WCF 服务的自托管应用程序。此应用程序没有对 STE 的 dll 的引用。

我使用 svcutil 创建 service.cs。

我有客户端，我在其中添加了 service.cs。service.cs 如何使用 STE 拥有我的 dll 项目的类。但是有一个问题，这个类没有所有这些类。我的意思是，例如具有 ChangeTracker 属性，但它们没有 MarkAs 方法和其他方法。

因此，如果我编辑 service.cs 以更改声明我的类的命名空间并使用 STE 类添加对项目的引用，我可以访问所有方法并且也可以按预期工作。

所以问题出在我服务的“STE 类”中，而不是在我的 dll 项目的 STE 类中。

为什么当我生成 service.cs 时不生成“完整类”？这使我使用 STE 添加对我的 dll 项目的引用并编辑 service.cs 以删除其 STE 类的代码，这些代码无法按我的预期工作。有没有办法在 service.cs 文件中添加“好的 STE 类”？

谢谢。戴姆洛克。

问题是我在 WPF 应用程序中托管了一个 WCF 服务。我运行自托管应用程序并使用 svcutil 创建 Service.cs。

我在我的客户端应用程序中添加了这个 Service.cs。在这个 Service.cs 中存在我的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:00:35.280

你的描述太混乱了。

STE 使您的服务和客户端之间紧密耦合。使用 STE 的唯一正确方法是将它们放在单独的程序集中，并在客户端和服务之间共享此程序集。当您使用 svcutil.exe 为客户端应用程序创建服务引用时，您可以使用`reference`参数来指定该程序集以进行类型解析，而不是创建新的非 STE 类型（用于添加服务引用的 VS UI 提供类似的配置）。

# bash - 重击比较

> ID：10460831
> 
> 赞同：0
> 
> 时间：2012-05-05T10:10:28.583
> 
> 标签：bash, comparison, floating-point

我有一个存储命令输出的变量。我如何将它与浮点数进行比较？

更具体地说，我正在做

```
x=$(tail -n 1 foo| cut -d ' ' -f2)

if (($x < 0)); then ... 
```

文件名在哪里`foo`。在执行上述操作时，我收到以下错误

```
-0.08 < 0 : syntax error: invalid arithmetic operator (error token is "0.08 < 0") 
```

我需要比较的值是`-0.08`，但错误标记不同

我该怎么做这样的比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:19:44.343

bash 不支持浮点运算。
但是，您可以使用`bc`which 是一个外部程序来进行算术运算。

```
if (( $(bc <<< "$x < 0") )); then 
    printf "%f is less than 0\n" "$x"; 
fi 
```

从手册页：

> 关系运算符是
> 
> ```
>  expr1 < expr2
>          The result is 1 if expr1 is strictly less than expr2.
> 
>   expr1 <= expr2
>          The result is 1 if expr1 is less than or equal to expr2.
> 
>   expr1 > expr2
>          The result is 1 if expr1 is strictly greater than expr2.
> 
>   expr1 >= expr2
>          The result is 1 if expr1 is greater than or equal to expr2.
> 
>   expr1 == expr2
>          The result is 1 if expr1 is equal to expr2.
> 
>   expr1 != expr2
>          The result is 1 if expr1 is not equal to expr2. 
> ```

* * *

也可以使用`awk`它也支持浮点运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:20:59.143

如果您可以使用 ksh，您可以使用它来编写脚本而不是 Bash，因为它支持浮点数。Zsh 也支持浮点数。

```
#!/usr/bin/ksh
x=$(tail -n 1 foo| cut -d ' ' -f2)

if ((x < 0))
then
    echo "less than"
fi 
```

# spring - 我在我的 spring MVC 项目中实现 sitemesh3 并得到 404 异常

> ID：10460836
> 
> 赞同：1
> 
> 时间：2012-05-05T10:11:20.157
> 
> 标签：spring, templates, spring-mvc, sitemesh

我在我的 spring MVC 项目中实现 sitemesh3 并得到 404 异常。我正在关注本教程[SiteMesh3](http://www.sitemesh.org/getting-started.html)现在问题是我将我的 jsp 放在 Web-Inf 中的视图文件夹中，所以我应该在装饰器标记中的 sitemesh3.xml 中给出什么路径。我在部署时尝试了很长但得到 404....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T13:14:14.937

我成功地使它工作sitemesh3 + spring mvc。装饰器可以毫无问题地放置在 WEB-INF 中

我的目录结构如下

```
webapp/WEB-INF$ tree
.
├── enable-jmx.xml
├── lnramirez-servlet.xml
├── sitemesh3.xml
├── urlrewrite.xml
├── views
│   ├── about.jsp
│   ├── blog
│   │   └── list.jsp
│   ├── defaultdecorator.jsp
│   └── home.jsp
└── web.xml 
```

我的 sitemesh3 配置

```
$ cat sitemesh3.xml 
<?xml version="1.0" encoding="MacRoman"?>
<sitemesh>
  <mapping path="/*" decorator="/WEB-INF/views/defaultdecorator.jsp"/>
</sitemesh> 
```

和我的 web.xml

```
<filter>
    <filter-name>sitemesh</filter-name>
    <filter-class>org.sitemesh.config.ConfigurableSiteMeshFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>sitemesh</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>HiddenMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>HiddenMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>
        org.tuckey.web.filters.urlrewrite.UrlRewriteFilter
    </filter-class>
</filter>

<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

请注意，如果您像我一样使用 UrlRewriteFilter 过滤器，您可能会遇到与我相同的问题。您必须将**ConfigurableSiteMeshFilter**放在其他过滤器之前。

它对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:22:06.033

这对我有用：

装饰器.xml：

```
<decorators defaultdir="/WEB-INF/decorators">
    <decorator name="login" page="login_master.jsp">
        <pattern>/login*</pattern>
    </decorator>
    <decorator name="none" page="none.jsp">
        <pattern>/report*</pattern>
    </decorator>
    <decorator name="master" page="master.jsp">
        <pattern>/*</pattern>
    </decorator>
</decorators> 
```

无.jsp：

```
<html>
    <head>
        <title>
            <decorator:title />
        </title>
        <decorator:head />
    </head>
    <body>
        <decorator:body />
    </body>
</html> 
```

# xcode - Xcode如何解析Json对象

> ID：10460839
> 
> 赞同：1
> 
> 时间：2012-05-05T10:11:27.333
> 
> 标签：xcode, json, uitableview, ios5

我设法为我的服务器获取 Json 并在 Xcode 中解析，然后我可以将 Json 转换为对象并加载我的 uitableview，问题是我的 Json 有 7 个对象..

你可以在[这里看到完整的 Json](http://pastebin.com/svyrDHtg)

```
2012-05-05 10:45:02.727 passingdata[63856:fb03] array : {
    posts =     {
        Friday =         (
                        {
                GymClass =                 {
                    "CLASS-TYPE2" = "";
                    "CLASS_LEVEL" = "Intro/General";
                    "CLASS_TYPE" = "Muay Thai";
                    "DAY_OF_WEEK" = Friday;
                    TIME = "13:00 - 14:30";
                };
            }
        );
        Monday =         (
                        {
                GymClass =                 {
                    "CLASS-TYPE2" = "Fighters Training";
                    "CLASS_LEVEL" = "Fighters/Advanced/Intermediate";
                    "CLASS_TYPE" = "Muay Thai ";
                    "DAY_OF_WEEK" = Monday;
                    TIME = "09:30 - 11:00";
                };
            }, ...... 
```

使用此代码，我可以获得星期五的“星期五”并在我的桌子上显示 GymClass 信息“GymClass”

```
- (void)fetchedData:(NSData *)responseData { //parse out the json data

    searchResults2 = [NSMutableArray arrayWithCapacity:10];

    NSError* error;
    NSDictionary* dictionary = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

    NSLog(@"array : %@",dictionary);
    NSArray *array = [[dictionary objectForKey:@"posts"] objectForKey:@"Friday"]; // retrieve that Day Gym Classes

    if (array == nil) {
        NSLog(@"Expected 'posts' array");
        return;
          }

    for (NSDictionary *resultDict in array) 
    {
        SearchResult *searchResult3;
        searchResult3 = [self parseTrack:resultDict];

        if (searchResult3 != nil) {
           [searchResults2 addObject:searchResult3];
        }        
    }    
    [self.tableView reloadData];
}

- (SearchResult *)parseTrack:(NSDictionary *)dictionary
{
    SearchResult *searchResult1 = [[SearchResult alloc] init];

    searchResult1.classType= [[dictionary objectForKey:@"GymClass"] objectForKey:@"CLASS_TYPE"];
    searchResult1.classLevel= [[dictionary objectForKey:@"GymClass"] objectForKey:@"CLASS_LEVEL"];

    NSLog(@"parse track = %@", searchResult1);
    return searchResult1;
} 
```

我可以获取一天的元素，但我如何获取每天（周一，周二...周日）的元素，以便我可以按部分显示在我的桌子上？

感谢您的帮助..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T10:30:47.057

那么在你的代码中，你已经在这样做了：

```
NSDictionary* dictionary = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

NSLog(@"array : %@",dictionary);
NSArray *array = [[dictionary objectForKey:@"posts"] objectForKey:@"Friday"]; // retrieve that Day Gym Classes 
```

Wen 可以从那里开始只检索对象`posts`：

```
NSDictionary* dictionary = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
NSDictionary *posts = [dictionary objectForKey:@"posts"];

//Iterate over posts

for (NSArray *aDay in posts){
     //Do something 
     NSLog(@"Array: %@", aDay);
} 
```

在这里，我使用快速枚举来遍历字典，你应该[在这里](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)检查一下。

# c++ - 在 MFC 中，为什么我需要创建 CWinApp 的全局实例？

> ID：10460841
> 
> 赞同：5
> 
> 时间：2012-05-05T10:11:42.130
> 
> 标签：c++, windows, user-interface, mfc

为什么我的派生 CWinApp 的构造函数应该在 main 函数启动之前被调用？
为什么不能是这样的：

```
int WinMain()
{
   CMainFrame* pMainFrame = new CMainFrame;
   // etc ...
} 
```

我正在寻找迫使这种行为的技术原因。
编辑：
为了更清楚 - 如果我使用没有 MFC 的 win32 API，主窗口是在 WinMain 内创建的，那么有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T10:58:14.343

基本上，这是因为 MFC 设计者决定在库本身中提供应用程序入口点（[WinMain()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559.aspx)，而不是`main()`），因此用户不必编写一个。

然后将应用程序的初始化和终止逻辑重新定位到用户提供的衍生单例实例的`InitInstance()`和方法。这个实例必须在运行之前存在，因为它调用上述方法（并进入消息循环）并使用它来存储状态（就像它接收的参数一样）。`ExitInstance()``CWinApp``WinMain()``Run()``nCmdShow`

在全局范围内定义`CWinApp`-derived 实例是确保它在运行时确实存在的简单方法`WinMain()`。

[本文](http://www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c4131/MFC-Under-the-Hood.htm)提供了有关 MFC 应用程序启动时幕后发生的情况的更多详细信息。

# php - 管理员如何允许在 magento 中显示私有和公开的类别？

> ID：10460843
> 
> 赞同：0
> 
> 时间：2012-05-05T10:11:48.997
> 
> 标签：php, magento

在magento中，如何可能某些类别必须是私有和公共的，其中私有部分只能由登录用户查看，即某些选项卡只能由登录用户查看。用户可以注册，管理员只能授予他们访问权限..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T06:54:45.557

最好的是对这类问题的扩展。

> [http://www.magentocommerce.com/magento-connect/vinai/extension/635/netzarbeiter_groupscatalog#tab:reviews](http://www.magentocommerce.com/magento-connect/vinai/extension/635/netzarbeiter_groupscatalog#tab:reviews)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:48:39.623

我会创建一个模块来覆盖类别控制器，并根据将由同一模块添加的类别属性在其中设置限制。

该属性将是受限制的是/否。给定属性，访问者必须是客户。

然而，我处理过的大多数客户通常只是启动一个有网站限制的新网站，并将他们的受限类别放在那里。（比如 B2B 网站什么的）

# node.js - 如何在 Node.js 中实现共享库？

> ID：10460844
> 
> 赞同：4
> 
> 时间：2012-05-05T10:11:53.280
> 
> 标签：node.js

我正在寻找在概念上类似于 Windows DLL 的东西。作为一个具体的例子，假设我有一个函数 encrypt 我想在几个不相关的项目中共享它。如果我想理想地更改实现，我可以这样做一次，并且每个项目都可以访问新的实现。在 Node.js 中是否有这样做的机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:42:59.457

查看此[文档](http://howtonode.org/how-to-module)，尤其是“编写库”部分

> 如果您正在编写一个供他人使用的程序，那么在您的 package.json 文件中指定的最重要的事情就是主模块。这是作为程序入口点的模块。

和

> 如果你有很多 JavaScript 代码，那么习惯是把它放在你项目的 ./lib 文件夹中。
> 
> 在 package.json 文件中指定一个主模块。这是您的用户在需要（'your-library'）时将加载的模块。理想情况下，该模块应该公开库中的所有功能。
> 
> 如果您希望您的用户能够从库的“胆量”中加载子模块，那么他们需要指定它们的完整路径。要记录的工作量很大！最好简单地指定一个主模块，然后，如果有必要，有办法动态加载他们需要的东西，这样更好，也更面向未来。
> 
> 例如，您可能有一个翻转库，它是小部件对象的集合，由 Flip/lib/widgets/*.js 文件中的文件定义。与其让你的用户使用 require('flip/lib/widgets/blerg.js') 来获取 blerg 小部件，不如使用类似：require('flip').loadWidget('blerg')。

# iphone - 如何检查更新查询

> ID：10460850
> 
> 赞同：0
> 
> 时间：2012-05-05T10:12:29.137
> 
> 标签：iphone

我想将 ycount 字段添加到 1；

即ycount=ycount+1；

这是行不通的

```
[self Check_Create_DB];
sqlite3 *database; 
NSString *sqlTmp=[NSString stringWithFormat:@"update images set ycount=ycount+1 where imgid= '%d'",idimg ];
NSLog(@"%@",sqlTmp);
const char *sqlstmt=[sqlTmp UTF8String];
sqlite3_stmt *cmp_sqlstmt;
int returnvalue=sqlite3_prepare_v2(database,sqlstmt,-1,&cmp_sqlstmt,NULL);
NSLog(@"return value.....%d",returnvalue);
if(returnvalue == SQLITE_OK)
{           
    sqlite3_bind_int(cmp_sqlstmt,1,ycount+1);
} 
```

这段代码有什么错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:24:37.570

Try this way

```
NSString *sqlTmp=[NSString stringWithFormat:@"update images set ycount=%i where imgid= '%d'", ycount+1,idimg ]; 
```

# asp.net-mvc - asp.net mvc Html.ActionLink 忽略 jquery 属性

> ID：10460854
> 
> 赞同：2
> 
> 时间：2012-05-05T10:12:54.870
> 
> 标签：asp.net-mvc, jquery-mobile

我有一个简单按钮的可视化问题，这完美呈现

```
@Html.ActionLink("<", "Monthly", "Agenda", null, new Dictionary<string, object> { { "data-role", "button" }, { "data-theme", "c" }, { "data-mini", "true" } }) 
```

我调用的动作虽然需要参数，因此我将其更改为

```
@Html.ActionLink("<", "Monthly", "Agenda", new { shift = -1 }, new Dictionary<string, object> { { "data-role", "button" }, { "data-theme", "c" }, { "data-mini", "true" } }) 
```

按照这个答案[HTML.ActionLink 方法](https://stackoverflow.com/questions/200476/html-actionlink-method)

当我按照上面的方式更改它时，它会起作用，但它不再呈现为 jquery 移动按钮

它来自这个[http://i47.tinypic.com/alhs9h.png](http://i47.tinypic.com/alhs9h.png)

到这个[http://i48.tinypic.com/351ft5z.png](http://i48.tinypic.com/351ft5z.png)

谢谢你帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T12:14:35.223

要达到正确的`Html.ActionLink`重载，您需要将 RouteValues 作为`RouteValueDictionary`（不是匿名对象）传递：

```
@Html.ActionLink("<", "Monthly", "Agenda", 
                 new RouteValueDictionary() { { "shift", -1 } }, 
                 new Dictionary<string, object> { { "data-role", "button" }, { "data-theme", "c" }, { "data-mini", "true" } }) 
```

或者，更短/更易于阅读，您可以将*RouteValues*和 HtmlAttributes 作为匿名对象传递：

```
@Html.ActionLink("<", "Monthly", "Agenda", new { shift = -1 }, new { data_role = "button", data_theme = "c", data_mini = "true" }) 
```

在匿名对象版本中，您必须使用`data_`代替`data-`，但帮助程序在显示属性键之前替换`_`为`-`，因此输出是相同的。

# c++ - 找到一个递增的序列 a[] 最小化 sigma(abs(a[i]+c[i]))

> ID：10460861
> 
> 赞同：4
> 
> 时间：2012-05-05T10:13:42.793
> 
> 标签：c++, algorithm, optimization, greedy

### 问题陈述

`c`是给定的`n`整数数组；问题是找到一个递增的`n`整数数组，以`a (a[i] <= a[i+1])`使这个总和最小化：

```
abs(a[0]+c[0]) + abs(a[1]+c[1]) + ... + abs(a[n-1]+c[n-1])
// abs(x) = absolute value of x 
```

* * *

最优`a`存在仅由出现的整数构成，`c`因此我们可以使用 DP in 解决它`O(n^2)`：

```
dp[i][j]: a[i] >= j'th integer 
```

但是应该有一个更快的解决方案，可能`O(n lg n)`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T13:10:41.967

**更新：**我添加了解决方案，它最小化了绝对值的总和。其他最小化平方和的解决方案仍然在这里，在这篇文章的末尾，以防有人感兴趣。

### 最小化绝对值和算法

我从算法开始，它只适用于非负整数数组。然后它将扩展到任何整数（甚至扩展到非整数对象）。

这是一个贪心算法。它使用整数的按位表示。从每个数组元素的最高有效位开始（暂时忽略其他位）。找到最大的前缀，最大化一/零平衡。现在清除所有数组值，属于前缀并且最高有效位为零（这些值的所有位都为零）。对于后缀中具有非零最高有效位的所有数组值，将所有其他位设置为“一”。将此算法递归地应用于前缀和后缀，使用下一位作为“最重要的”。

这会将原始数组拆分为段。您可以找到每个段的中值并用该中值填充输出数组。或者，在处理前缀时只需在输出数组中设置相应的位，而在处理后缀时将它们保留为零。

所有这些都有效，因为最小化绝对值之和需要找到子数组的中位数，并且在找到这个中位数时，您可以非常近似地比较值，始终只对整个数组使用一个最重要的位并下降到其他位之后，对于子数组。

这是 C++11 代码片段，其中解释了详细信息：

```
//g++ -std=c++0x
#include <iostream>
#include <vector>
#include <iomanip>

using namespace std;
typedef vector<unsigned> arr_t;
typedef arr_t::iterator arr_it;

void nonincreasing(arr_it array, arr_it arrayEnd, arr_it out, int bits)
{
  if (bits != -1)
  {
    int balance = 0;
    int largestBalance = -1;
    arr_it prefixEnd = array;

    for (arr_it i = array; i != arrayEnd; ++i)
    {
      int d = ((*i >> bits) & 1)? 1: -1;
      balance += d;
      if (balance > largestBalance)
      {
        balance = largestBalance;
        prefixEnd = i + 1;
      }
    }

    for (arr_it i = array; i != prefixEnd; ++i)
    {
      *(out + (i - array)) += (1 << bits);
      if (!((*i >> bits) & 1))
      {
        *i = 0;
      }
    }
    nonincreasing(array, prefixEnd, out, bits - 1);

    for (arr_it i = prefixEnd; i != arrayEnd; ++i)
    {
      if ((*i >> bits) & 1)
      {
        *i = (1 << bits) - 1;
      }
    }
    nonincreasing(prefixEnd, arrayEnd, out + (prefixEnd - array), bits - 1);
  }
}

void printArray(const arr_t& array)
{
  for (auto val: array)
    cout << setw(2) << val << ' ';
  cout << endl;
}

int main()
{
  arr_t array({12,10,10,17,6,3,9});
  arr_t out(array.size());
  printArray(array);

  nonincreasing(begin(array), end(array), begin(out), 5);
  printArray(out);

  return 0;
} 
```

要处理任何整数，而不仅仅是正数，有两种选择：

1.  在输入数组中找到最小整数并将其从其他元素中减去。完成主算法后，将其添加回来（并否定结果）。这给出了复杂度 O(N log U)，其中 U 是数组值的范围。
2.  输入数组的紧凑值。按值排序，删除重复项，而不是原始值，使用此数组的索引。完成主算法后，将索引更改回相应的值（并否定结果）。这给出了复杂度 O(N log H)，其中 H 是唯一输入数组值的数量。此外，这不仅允许使用整数，还允许使用任何可以排序的对象（相互比较）。

* * *

### 最小化平方和算法

这是该算法的高级描述。复杂度为 O(N)。

从搜索子数组开始，从 c[] 的开头开始并具有最大可能的平均值。然后用这个平均值填充 a[] 中相同长度的子数组（四舍五入到最接近的整数并取反）。然后从 a[] 和 c[] 中删除这个子数组（换句话说，假设 a[] 和 c[] 的开头向前移动了子数组的长度）并递归地将此算法应用于 a[] 和 c 的其余部分[]。

该算法最有趣的部分是搜索最大子数组。用来自 c[] 的元素的累积总和填充临时数组 b[]：`b[0] = c[0], b[1] = b[0] + c[1], ...`现在您可以使用以下方法确定 c[] 中任何间隔的平均值`(b[i+m] - b[i]) / m`：巧合的是，完全相同的公式（其值的最大化）确定了从 b[i] 到曲线的切线，由 b[] 描述。[因此，您可以使用任何Convex hull algorithm](http://en.wikipedia.org/wiki/Convex_hull_algorithms#Algorithms)一次找到该算法所需的所有最大值（以及子数组边界）。凸包算法通常使用二维点，并且具有超线性复杂度。但在这种情况下，点已经在一维排序，所以[格雷厄姆扫描](http://en.wikipedia.org/wiki/Graham_scan)或[单调链](http://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain)算法在 O(N) 时间内完成任务，这也决定了整个算法的复杂性。

* * *

### 该算法的伪代码：

1.  b[] = 积分（c[]）
2.  h[] = 凸包（b[]）
3.  a[] = - 导数（h[]）

### 示例数组处理的可视化：

![例子](../Images/f4f9d5f3acc69fb650ab02f51d6ccbc1.png)

# c++ - 如何检查 xy 轴上的碰撞

> ID：10460867
> 
> 赞同：4
> 
> 时间：2012-05-05T10:14:45.843
> 
> 标签：c++, algorithm, robotics

我正在 Ubuntu 中使用 C/C++ 编写移动机器人应用程序，目前，我正在使用激光传感器扫描环境并检测机器人移动时与物体的碰撞。

该激光器的**扫描区域为 270°**，最大半径为 4000mm。它能够检测此范围内的物体并报告它们与传感器的距离。

每个距离都是平面坐标，因此为了获得更多可读数据，**我将它们从平面坐标转换为笛卡尔坐标**，然后将它们打印到文本文件中，然后在 MatLab 中绘制它们以查看激光检测到的内容。

这张图片显示了笛卡尔坐标上的典型检测。 ![在此处输入图像描述](../Images/e52b081bb61d8b8f90a850c2e80f28a5.png) 值以米为单位，因此 0.75 是 75 厘米，2 是两米。连续的蓝点是所有检测到的物体，而**（0,0）附近的点是指激光位置，必须丢弃**。由于激光扫描区域为 270°，因此产生 y < 0 下的蓝点；**我添加了红线正方形（1.5 x 2 米）来确定我想要实施碰撞检查的区域**。因此，**我想*实时*检测该区域内是否有点（对象）**，如果是，则调用一些函数。这有点棘手，因为，这个检查也应该能够检测到*是否有连续的点*来确定*如果对象是真实的*（即如果它检测到一个点，那么它应该搜索最近的点以确定它们是否构成一个对象，或者它是否只是一个可能是检测错误的点）。

这是我用来执行单次扫描的功能：

```
struct point pt[limit*URG_POINTS];
//..
 for(i = 0; i < limit; i++){
 for(j = 0; j < URG_POINTS; j++){
  ang2 = kDeg2Rad*((j*240/(double)URG_POINTS)-120);
  offset = 0.03;     //it depends on sensor module [m]

  dis = (double) dist[cnt] / 1000.0;
  //THRESHOLD of RANGE
  //      if(dis > MAX_RANGE) dis = 0;  //MAX RANGE = 4[m]
  //      if(dis < MIN_RANGE) dis = 0;
  pt[cnt].x = dis * cos(ang2) * cos(ang1) + (offset*sin(ang1)); // <-- X POINTS
  pt[cnt].y = dis * sin(ang2); // <-- Y POINTS
 // pt[cnt].z = dis * cos(ang2) * sin(ang1) - (offset*cos(ang1)); <- I disabled 3D mapping at the moment
  cnt++;
}
ang1 += diff;
} 
```

每次扫描后，**pt**包含 xy 坐标中的所有检测点。

我想做这样的事情：

> *   执行一次扫描，然后在最后，
> *   对每个 pt.x 和 pt.y 应用碰撞检查
> *   如果在内部区域找到一个点，则检查其他近点，如果是，则停止机器人；
> *   如果没有或没有找到其他近点，则开始另一次扫描

我想知道如何轻松检查先前定义的区域内的对象（由多个单点组成）。

你能帮我吗？对我来说似乎很难:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:27:23.167

我不认为我可以给出一个完整的答案，但是关于可能去哪里的一些想法。

实时是什么意思？运行任何给定算法可能需要多长时间？你的程序在什么处理器上运行？

`abs(x) < 0.75`只需检查 if和，过滤检测区域内的点应该很容易`y< 2 && y > 0`。此外，您应该只考虑距离 0 足够远的点，因此`x^2 + y^2 > d`. 但这应该是微不足道的部分。

更有趣的是，它将检测点组。[DBSCAN](http://en.wikipedia.org/wiki/DBSCAN)已被证明是用于检测二维点组的相当好的聚类算法。这里的关键问题是 DBSCAN 对于实时应用程序是否足够快。如果没有，您可能需要考虑优化算法（您可以使用一些巧妙的索引结构将其复杂度提高到 n*log(n)）。

此外，可能值得考虑如何整合上一次迭代中获得的知识（假设频率很高，数据点应该不会发生太大变化）。

其他机器人项目可能值得一看——我可以想象解释传感器数据以构建环境信息的问题是一个相当普遍的问题。

## 更新

如果不知道您在哪里偶然发现将 DBSCAN 应用于您的问题，那么很难给您提供好的建议。但是，让我尝试为您提供一个算法如何工作的分步指南：

*   对于您收到的每个数据点，您检查它是否在您想要观察的区域中。（我上面给出的条件应该可行）。
*   如果数据点在区域内，则将其保存到某种列表中
*   读取所有数据点后，您检查列表是否为空。如果是这样，一切都很好。否则，我们必须检查是否有更大的数据点组需要导航。

现在是更困难的部分。你在这些点上抛出 DBSCAN 并尝试找到点组。哪些参数适用于我不知道的算法 - 必须尝试。之后，您应该有一些点簇。我不完全确定您将如何处理这些组 - 一个想法是检测每个组中在极坐标中具有最小和最大度数的点。这样你就可以决定你必须转动你的车辆多远。如果两组非常接近以至于无法通过它们之间的间隙，则必须特别小心。

对于 DBSCAN 的实施，您可以[在这里](http://codingplayground.blogspot.de/2009/11/dbscan-clustering-algorithm.html)或只是向谷歌寻求帮助。这是一种相当常见的算法，已被编码数千次。对于有关速度的进一步优化，创建自己的实现可能会有所帮助。但是，如果您发现其中一个实现似乎可用，我会先尝试一下，然后再自行实现。

如果您在实现算法时偶然发现特定问题，我建议您创建一个新问题，因为它与这个问题相去甚远，您可能会得到更多愿意帮助您的人。

我希望现在情况更清楚了。如果不是，请给出您有疑问的确切点。

# android - 无法在eclipse中将字符串解析为整数

> ID：10460869
> 
> 赞同：0
> 
> 时间：2012-05-05T10:15:32.357
> 
> 标签：android

我正在将我的应用程序连接到蓝牙串行连接。我想更改数据，`String`以便`Integer`我可以比较它。

阅读消息时是这种情况：

```
case MESSAGE_READ:
    byte[] readBuf = (byte[]) msg.obj;              

    // construct a string from the valid bytes in the buffer
    String readMessage = new String(readBuf, 0, msg.arg1);
    Log.i(LOG_TAG, readMessage);

    mTextView.setText(readMessage);
    if(mTextView!=null){
        int read = Integer.parseInt(readMessage.trim());
     if (read<1 && read>28){
        alarm();
        sendSMS();
     }
    }
    /* int read = new Integer(readMessage.trim());
    if (read<1&&read>28){
        alarm();
        sendSMS();
    }*/
    /*if (readMessage.trim().equalsIgnoreCase("20"))
    {
       alarm();
       sendSMS();
    }*/
    break; 
```

在 LogCat 中：

```
05-05 17:12:26.329: D/BluetoothReadService(4371): connected
05-05 17:12:26.339: D/BluetoothReadService(4371): create ConnectedThread
05-05 17:12:26.339: D/BluetoothReadService(4371): setState() 2 -> 3
05-05 17:12:26.349: I/BluetoothReadService(4371): BEGIN mConnectedThread
05-05 17:12:26.369: I/Heart Beat Alarm System(4371): MESSAGE_STATE_CHANGE: 3
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 8
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 9
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 10
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 11
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 12
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 13
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 14
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 15
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 16
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 17
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 18
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 19
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 20
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 21
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 22
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 23
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 24
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 25
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 26
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 27
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 28
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 29
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 0
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 1
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 2
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 3
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 4
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 5
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 6
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 7
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 8
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 9
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 10
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 11
05-05 17:12:26.459: I/Heart Beat Alarm System(4371): 12
05-05 17:12:26.459: D/AndroidRuntime(4371): Shutting down VM
05-05 17:12:26.459: W/dalvikvm(4371): threadid=1: thread exiting with uncaught   exception (group=0x40018578)
05-05 17:12:26.459: E/AndroidRuntime(4371): FATAL EXCEPTION: main
05-05 17:12:26.459: E/AndroidRuntime(4371): java.lang.NumberFormatException: unable to parse '8

05-05 17:12:26.459: E/AndroidRuntime(4371): 9
05-05 17:12:26.459: E/AndroidRuntime(4371): 10
05-05 17:12:26.459: E/AndroidRuntime(4371): 11
05-05 17:12:26.459: E/AndroidRuntime(4371): 12
05-05 17:12:26.459: E/AndroidRuntime(4371): 13
05-05 17:12:26.459: E/AndroidRuntime(4371): 14
05-05 17:12:26.459: E/AndroidRuntime(4371): 15
05-05 17:12:26.459: E/AndroidRuntime(4371): 16
05-05 17:12:26.459: E/AndroidRuntime(4371): 17
05-05 17:12:26.459: E/AndroidRuntime(4371): 18
05-05 17:12:26.459: E/AndroidRuntime(4371): 19
05-05 17:12:26.459: E/AndroidRuntime(4371): 20
05-05 17:12:26.459: E/AndroidRuntime(4371): 21
05-05 17:12:26.459: E/AndroidRuntime(4371): 22
05-05 17:12:26.459: E/AndroidRuntime(4371): 23
05-05 17:12:26.459: E/AndroidRuntime(4371): 24
05-05 17:12:26.459: E/AndroidRuntime(4371): 25
05-05 17:12:26.459: E/AndroidRuntime(4371): 26
05-05 17:12:26.459: E/AndroidRuntime(4371): 27
05-05 17:12:26.459: E/AndroidRuntime(4371): 28
05-05 17:12:26.459: E/AndroidRuntime(4371): 29
05-05 17:12:26.459: E/AndroidRuntime(4371): 0
05-05 17:12:26.459: E/AndroidRuntime(4371): 1
05-05 17:12:26.459: E/AndroidRuntime(4371): 2
05-05 17:12:26.459: E/AndroidRuntime(4371): 3
05-05 17:12:26.459: E/AndroidRuntime(4371): 4
05-05 17:12:26.459: E/AndroidRuntime(4371): 5
05-05 17:12:26.459: E/AndroidRuntime(4371): 6
05-05 17:12:26.459: E/AndroidRuntime(4371): 7
05-05 17:12:26.459: E/AndroidRuntime(4371): 8
05-05 17:12:26.459: E/AndroidRuntime(4371): 9
05-05 17:12:26.459: E/AndroidRuntime(4371): 10
05-05 17:12:26.459: E/AndroidRuntime(4371): 11
05-05 17:12:26.459: E/AndroidRuntime(4371): 12' as integer
05-05 17:12:26.459: E/AndroidRuntime(4371):     at java.lang.Integer.parse(Integer.java:383)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at java.lang.Integer.parseInt(Integer.java:372)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at java.lang.Integer.parseInt(Integer.java:332)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at com.android.hbas.FinalSetting$1.handleMessage(FinalSetting.java:352)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at android.os.Looper.loop(Looper.java:130)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at java.lang.reflect.Method.invokeNative(Native Method)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at java.lang.reflect.Method.invoke(Method.java:507)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-05 17:12:26.459: E/AndroidRuntime(4371):     at dalvik.system.NativeStart.main(Native Method) 
```

**然后我将其更改为：**

在案例消息中：

```
case MESSAGE_READ:
                int i;
                byte[] readBuf = (byte[]) msg.obj;              

             // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                Log.i(LOG_TAG, readMessage);

                mTextView.setText(readMessage);

                List<Integer> integers = new ArrayList<Integer>();
                String [] numbers = readMessage.split("\n");
                for (String number : numbers) {
                    integers.add(Integer.valueOf(number.trim()));
                }

               /* int read = new Integer(readMessage.trim());
                if (read<1&&read>28){
                    alarm();
                    sendSMS();
                }*/
                /*if (readMessage.trim().equalsIgnoreCase("20"))
                   {
                       alarm();
                       sendSMS();
                   }*/
                break; 
```

LogCatShows：

```
 05-05 23:14:39.519: D/BluetoothReadService(9614): connected
05-05 23:14:39.529: D/BluetoothReadService(9614): create ConnectedThread
05-05 23:14:39.529: D/BluetoothReadService(9614): setState() 2 -> 3
05-05 23:14:39.539: I/BluetoothReadService(9614): BEGIN mConnectedThread
05-05 23:14:39.549: I/Heart Beat Alarm System(9614): MESSAGE_STATE_CHANGE: 3
05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 4

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 5

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 6

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 7

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 8

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 9

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 10

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 11

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 12

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 13

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 14

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 15

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 16

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 17

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 18

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 19

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 20

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 21

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 22

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 23

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 24

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 25

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 26

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 27

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 28

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 29

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 0

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 1

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 2

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 3

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 4

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 5

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 6

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 7

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 8

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 9

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 10

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 11

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 12

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 13

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 14

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 15

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 16

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 17

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 18

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 19

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 20

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 21

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 22

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 23

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 24

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 25

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 26

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 27

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 28

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 29

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 0

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 1

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 2

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 3

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 4

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 5

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 6

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 7

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 8

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 9

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 10

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 11

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 12

05-05 23:14:39.649: I/Heart Beat Alarm System(9614): 13
05-05 23:14:39.659: D/AndroidRuntime(9614): Shutting down VM
05-05 23:14:39.659: W/dalvikvm(9614): threadid=1: thread exiting with uncaught exception (group=0x40018578)
05-05 23:14:39.659: E/AndroidRuntime(9614): FATAL EXCEPTION: main
05-05 23:14:39.659: E/AndroidRuntime(9614): java.lang.NumberFormatException: unable to parse '' as integer
05-05 23:14:39.659: E/AndroidRuntime(9614):     at java.lang.Integer.parseInt(Integer.java:362)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at java.lang.Integer.parseInt(Integer.java:332)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at java.lang.Integer.valueOf(Integer.java:506)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at com.android.hbas.FinalSetting$1.handleMessage(FinalSetting.java:355)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at android.os.Looper.loop(Looper.java:130)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at android.app.ActivityThread.main(ActivityThread.java:3687)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at java.lang.reflect.Method.invokeNative(Native Method)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at java.lang.reflect.Method.invoke(Method.java:507)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-05 23:14:39.659: E/AndroidRuntime(9614):     at dalvik.system.NativeStart.main(Native Method) 
```

有谁知道解决方案？非常感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:22:35.343

您的消息包含一个带有很多数字的字符串，在不同的行上。您无法以单个整数解析此类字符串 - 因此您会收到错误消息。

您可以尝试像这样读取整数数组：

```
List<Integer> integers = new ArrayList<Integer>();
String [] numbers = readMessage.split("\n");
for (String number : numbers) {
    integers.add(Integer.valueOf(number.trim()));
} 
```

此代码之后`integers`将包含您在消息中收到的号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T20:34:39.117

当我用 try-catch 块包围它时，我遇到了同样的问题，它开始工作了。喜欢：

```
try 
    {
    size_of_file=Integer.parseInt(Value);
    }
    catch(Exception obj)
    {
        Toast.makeText(this, "Error :"+obj.getMessage(), Toast.LENGTH_LONG).show();
    } 
```

# php - 正则表达式解析 mysql orderby 字符串

> ID：10460877
> 
> 赞同：0
> 
> 时间：2012-05-05T10:16:50.583
> 
> 标签：php, preg-replace

我可以有这些字符串：

1.  “卷升序，版本降序”
2.  "volume ASC, othercolumn desc, columnx DESC"

我想获得这样的数组：

1.  数组（'卷'，'asc'，'版本'，'desc'）；
2.  数组（'卷'，'asc'，'othercolumn'，'desc'，'columnx'，'desc'）；

如何使用 regexp/preg_match 函数实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:38:26.770

您可以使用[preg_split](http://php.net/manual/en/function.preg-split.php)：

```
$arr = array(
    "volume asc, edition desc",
    "volume ASC, othercolumn desc, columnx DESC"
);
foreach($arr as $str) {
    $res = preg_split('/[ ,]+/', $str);
    print_r($res);
} 
```

**输出：**

```
Array
(
    [0] => volume
    [1] => asc
    [2] => edition
    [3] => desc
)
Array
(
    [0] => volume
    [1] => ASC
    [2] => othercolumn
    [3] => desc
    [4] => columnx
    [5] => DESC
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:32:02.627

使用诸如[PHP SQL Parser](http://code.google.com/p/php-sql-parser/)之类的解析器会是一种更好的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T10:37:34.363

```
$str = 'volume asc, edition desc';
$chars = preg_split('/ /', $str);
print_r($chars);

Array ( [0] => volume [1] => asc, [2] => edition [3] => desc ) 
```

您可以使用 strtolower 函数将每个字符串转换为小写

# c++ - 同一个链表中的链表

> ID：10460879
> 
> 赞同：2
> 
> 时间：2012-05-05T10:16:52.273
> 
> 标签：c++, linked-list

我是 C++ 新手，我正在处理链接列表。但是，当我正在编写链接列表类时，我对此感到困惑。我正在尝试为足球联赛编写代码。我试图将每支球队保存在一个链接列表中，并且由于每支球队都有球员，我想将他们也存储在一个链接列表中。所以链表类应该有一个成员指向一个与我正在编写的类具有相同属性的链表。有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:20:38.867

是的。球队列表的一个节点将包含一个球员列表。如果你不能使用`std::list`：

```
struct Player
{
    Player* nextPlayer;
};

struct Team
{
    Team* nextTeam;
    Player* firstPlayer;
}; 
```

我很确定虽然列表不是对此建模的最佳结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:14:34.510

我更喜欢以下结构，因为您可能不想总是在列表中使用球员和球队：

```
struct PlayerNode
{
    Player* item;
    PlayerNode* nextNode;
};

struct TeamNode
{
    Team* item;
    TeamNode* nextNode;
};

struct Team {
    // ...
    PlayerNode* firstPlayer;
}; 
```

This allows you to use a team or a player as a standalone object (not connected to other teams/players). But within a team you can also access its players, which I guess is desirable.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T06:19:21.037

If you are using C++ then use STL instead. I am explaining one example with vector

Suppose this is the heirarchy You have 2 League League1, League2 each have 2 teams Team1, Team2 each team has 10 players P1, P2

All the players of one team can be stored in a vector named temp_team All temp_team can be pushed to vector named temp_league All temp_league vector can be pushed to vector named footBall, League, watever.

# css - 位置：固定在菜单栏上 - 希望很简单

> ID：10460880
> 
> 赞同：2
> 
> 时间：2012-05-05T10:17:15.453
> 
> 标签：css, html, menubar, css-position

我正在尝试使顶部菜单栏浮动在页面顶部：

[http://www.landedhouses.co.uk/](http://www.landedhouses.co.uk/)

这样当用户向下滚动菜单时仍会显示。

不幸的是，将 position:fixed 添加到 CSS 似乎并没有解决问题，各种元素仍然漂浮在周围。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T10:30:09.147

只需添加 style.css

```
.strip{

position: fixed;
z-index:1;
width:100%;
} 
```

# python - Python中的回文

> ID：10460885
> 
> 赞同：-1
> 
> 时间：2012-05-05T10:18:30.493
> 
> 标签：python, if-statement, for-loop, palindrome

```
fno = input()
myList = list(fno)
sum = 0
for i in range(len(fno)):
    if myList[0:] == myList[:0]:
    continue
print (myList) 
```

我想做一个数字回文。例如：

```
input(123)
print(You are wrong)
input(12121)
print(you are right) 
```

请指导我如何在 python 中制作回文。它不完整的代码请建议我下一步做什么。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T10:21:47.983

我想，给定您的代码，您想检查回文，而不是制作回文。

您的代码存在许多问题，但简而言之，它可以减少到

```
word = input()
if word == "".join(reversed(word)):
    print("Palidrome") 
```

让我们谈谈你的代码，这没有多大意义：

```
fno = input() 
myList = list(fno) #fno will be a string, which is already a sequence, there is no need to make a list.
sum = 0 #This goes unused. What is it for?
for i in range(len(fno)): #You should never loop over a range of a length, just loop over the object itself.
    if myList[0:] == myList[:0]: #This checks if the slice from beginning to the end is equal to the slice from the beginning to the beginning (nothing) - this will only be true for an empty string.
        continue #And then it does nothing anyway. (I am presuming this was meant to be indented)
print (myList) #This will print the list of the characters from the string. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T10:23:33.000

切片符号在这里很有用：

```
>>> "malayalam"[::-1]
'malayalam'
>>> "hello"[::-1]
'olleh' 
```

请参阅[解释 Python 的切片表示法](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)以获得很好的介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-28T02:47:36.577

```
str=input('Enter a String')
print('Original string is : ',str)
rev=str[::-1]
print('the reversed string is : ',rev)
if(str==rev):
    print('its palindrome')
else:
    print('its not palindrome') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-03T18:24:27.793

```
x=raw_input("enter the string")
while True:
    if x[0: ]==x[::-1]:
        print 'string is palindrome'
        break
    else:
        print 'string is not palindrome'
        break 
```

# ruby-on-rails - Rails：ActiveRecord 未正确解析时间

> ID：10460893
> 
> 赞同：0
> 
> 时间：2012-05-05T10:19:30.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我在模型中分配一个时间值

`self.started_at = Time.now`

当我保存它时，我得到以下信息：

```
 Created at: 2012-05-05 12:11:54 +0200 
   Started at: 2000-01-01 10:12:06 UTC 
```

我试过格式化，`Time.now.to_s(:db)`但结果是一样的。这是否取决于区域设置？（我有`activerecord 3.1.3`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:09:49.450

您可能想要使用`t.datetime`which stores date n time part ... 而`time`不是...[查看 mysql 的时间范围](http://dev.mysql.com/doc/refman/5.0/en/time.html)

# xcode - MacRuby/PyObjC/RubyMotion 的代码完成

> ID：10460894
> 
> 赞同：5
> 
> 时间：2012-05-05T10:19:32.973
> 
> 标签：xcode, pyobjc, macruby, rubymotion

Xcode 最强大的功能之一是它的[Intellisense](http://www.michaelbowersox.com/wp-content/uploads/2008/12/xcode_intellisense.jpg)补全，当您输入 Foundation/Cocoa/UIKit API 的名称时，它会显示一个潜在候选列表。我对[MacRuby](http://www.macruby.org/)、[PyObjC](http://pyobjc.sourceforge.net/)或更新的[RubyMotion](http://www.rubymotion.com/)非常感兴趣，但是如果没有代码完成，这些工具似乎比它们的价值更麻烦。

对于上述三种技术中的任何一种，*任何**文本*编辑器（但最好是 Vim 或 Xcode）是否有任何代码完成功能（不一定是 Intellisense ）？IDE 解决方案的奖励积分允许在单个命令中构建和运行应用程序（如 Xcode 的运行按钮）。

据我了解，Xcode 4 放弃了对 MacRuby/PyObjC 的支持，因此 Intellisense 不再可用。我应该在 Xcode 4 旁边安装 Xcode 3 以完成代码吗？其他人是怎么做的（当然你们使用某种形式的代码完成——我不敢相信有人能记住 Foundation/Cocoa/UIKit 中的所有类）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:08:53.333

RubyMotion 带有 vi ctag 支持。运行`rake ctags`以创建它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T10:22:12.267

FWIW，有一个 Sublime Text 2 的代码完成包，也可以通过 Sublime text 的包管理器安装。

它似乎对我来说效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T21:06:42.687

是的，您可以通过`$ rake ctags`在 RubyMotion 应用程序的根目录中运行来完成 Vim 代码。为了更进一步，每次创建新的 RubyMotion 应用程序时，使用 shell 脚本[自动生成 ctags 。](http://rayhightower.com/blog/2013/02/12/automatic-ctags-with-rubymotion-and-vim/)本文展示了如何构建这样的脚本：

[http://rayhightower.com/blog/2013/02/12/automatic-ctags-with-rubymotion-and-vim/](http://rayhightower.com/blog/2013/02/12/automatic-ctags-with-rubymotion-and-vim/)

# riak - Riak 的多行原子性一致性？

> ID：10460896
> 
> 赞同：0
> 
> 时间：2012-05-05T10:19:35.000
> 
> 标签：riak

让我来看看我的例子：

> 对于 ID=>值 0=>87、1=>24、2=>82、3=>123、4=>34、5=>61，将 1 到 4 之间的所有键值递增 10

对于这样的多行操作，Riak 是否提供原子性？即这个操作要么失败要么成功，而不会部分地弄脏数据？

在更新时聚合行的查询是否会看到一致的结果？

* * *

我没有看到明确处理这个问题的地方。但我猜“可调 CAP”控件设置为“启用一致性和分区容错”似乎是关键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T23:07:06.023

不。

Riak 没有整体原子性的概念（它是一个最终一致的系统），也没有任何“事务”的概念，其中多个 K/V 对可以被修改或作为一组读取。

# android - 在Android中使用Intent分享时如何发现Facebook App被选中

> ID：10460903
> 
> 赞同：0
> 
> 时间：2012-05-05T10:20:26.777
> 
> 标签：android

在Android中使用Intent分享短信时如何发现Facebook App被选中？有没有办法做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:58:32.187

使用标准选择器对话框无法做到这一点。`PackageManager`欢迎您使用和来创建自己的自定义选择器对话框`queryIntentActivities()`。

# sql-server - Sql 多行合并为具有特定模式的单行

> ID：10460904
> 
> 赞同：2
> 
> 时间：2012-05-05T10:20:30.647
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

使用 sqlserver 2005 及更高版本将多行合并为一行的 Sql 选择查询我有两个表，即**(tb_master,tb_tasks)**

```
create table tb_tasks(
id int IDENTITY(1,1) NOT NULL,
id_tbmaster int NOT NULL,
Tasks nvarchar(max) NOT NULL
)

create table tb_master(
id int IDENTITY(1,1) NOT NULL,
grade nchar(10) NOT NULL,
name nvarchar(50) NOT NULL,
task_date datetime NOT NULL,
)

select * from tb_master
id grade name   task_date
1  A     John   2012-02-13 10:40:00.000
2  B     Tom    2012-02-13 10:40:00.000

select tb_tasks
id  id_tbmaster  Tasks
1     1          cooking food.
2     1          Programing 2 hours
3     1          Attending meeting 
4     2          Driving car
5     2          hangout with friends 
```

试过这个查询

```
select tasks + ' , ' as 'data()' from tb_tasks for xml path('') 
```

给出输出

```
XML
cooking food ,  Programing 2 hours ,  Attending meeting ,  Driving car ,  hangout with friends , 
```

**我需要像这样的输出**

```
id Name  grade task_date                tasksDetails
1  John   A    2012-02-13 10:40:00.000  1)cooking food, 2)Programing 2 hours, 3)Attending meeting
2  Tom    B    2012-02-13 10:40:00.000  1) Driving car, 2)hangout with friends 
```

我试过的查询

```
select a.name,a.task_date,b.tasks =replace(select (CONVERT(VARCHAR,(ROW_NUMBER() OVER(ORDER BY id DESC)))) + ') ' + tasks + ' , ' as 'data()'
from tb_tasks for xml path(''))
from tb_master a inner join tb_tasks b
on a.id=b.id_tbmaster 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:56:07.290

此查询将为每个 tb_master 创建请求的活动列表。两个指针：一个应该匹配 row_number() over() 和查询中的排序以获得一致的结果，并且[OUTER APPLY](http://msdn.microsoft.com/en-us/library/ms175156.aspx)最后一行中的数字 3是分隔符中的字符数（在本例中为 ' , '）。如果您更改分隔符，则需要调整此数字。

```
select a.name,a.task_date, b.taskList
from tb_master a
OUTER APPLY
(
  select stuff ((select ' , '
                      + CONVERT(VARCHAR(10), ROW_NUMBER() 
                                                   OVER(ORDER BY id DESC))
                      + ') ' 
                      + tasks 
                   from tb_tasks b
                  where a.id = b.id_tbmaster
                  order by id desc
                for xml path (''))
               , 1, 3, '') taskList
) b 
```

现场演示在[Sql Fiddle](http://sqlfiddle.com/#!3/cf22d/16)。

# php - 使用 PHP 在 HTML 页面上检索图像数组

> ID：10460911
> 
> 赞同：0
> 
> 时间：2012-05-05T10:21:23.087
> 
> 标签：php, image, html, html-parsing

我正在使用 php 从目录中检索图像。图像显示在 PHP 页面 (getUser.php) 上，但这些图像如何显示在任何 HTML 上。
**获取用户.php**

```
<?php

$dir = 'images';
$file_display = array('jpg','jpeg','png','gif');

if (file_exists ($dir) == false) {
    echo 'Directory \'', $dir, '\' not found!';
}
else{
    $dir_contents = scandir($dir);

    foreach($dir_contents as $file) {
        $file_type = strtolower(end(explode('.', $file)));

        If($file !== '.' && $file !== '..' && in_array($file_type, $file_display) == true) {
            echo '<img src="', $dir, '/', $file, '" alt="', $file, '" />';
            /*echo '<td>';
echo '<img src =';
echo $dir."/".$file;
echo  '/>';
echo '</td>'; */

        }       

    }

}

?> 
```

**one.html**
我希望这个图像数组以 html (div) 显示。那就是从 PHP 文件中读取图像标签的来源。我已经在 ASP.NET 中完成了这项工作，但在 PHP 中无法弄清楚有没有类似的东西

```
<img src="images/vimages/<%=row["image"] %>" ASP.NET 
```

这个PHP。

```
<div id="pics">
                <img src="img/...jpg" alt=""  />

</div> 
```

上面的 div 将使用 getUser.php 文件动态填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:33:27.840

如果我理解您的问题，那么您正在寻找 php.ini 中的一些模板系统。

首先，在 php.ini 中已经有一个。PHP 允许您使用标签混合 html 和 php 代码。

所以你可以创建类似的东西：

```
<?php if ($images): ?>
<?php $counter = 1 ?>
<ul>
<?php foreach ($images as $image): ?>
    <li id="item-<?php echo $counter++ ?>">
    <img src="<?php echo $image['source']?>">
    </li>
<?php endforeach ?>
</ul>
<?php endif?> 
```

虽然将应用程序逻辑和 html 代码分开是一种很好的做法，但纯 php 并不是完成这项工作的最佳工具。幸运的是，网络上有很多工具，例如 [Smarty](http://www.smarty.net/)或[Latte](http://doc.nette.org/en/templating)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:39:26.420

考虑以下：

**ASP.NET**

```
<img src="images/vimages/<%=row["image"] %>"> 
```

**PHP**

```
<img src="images/vimages/<?=$row["image"]?>"> 
```

# asp.net-mvc-3 - Razor 视图类型不继承自“System.Web.WebPages.WebPage”

> ID：10460913
> 
> 赞同：6
> 
> 时间：2012-05-05T10:21:31.897
> 
> 标签：asp.net-mvc-3, webforms, webforms-view-engine, webforms-routing

我在配置 asp.net mvc 应用程序时遇到问题：

```
[HttpException (0x80004005): Type 'ASP._Page_Currency_Index_cshtml' does not inherit from 'System.Web.WebPages.WebPage'.]
System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(VirtualPath virtualPath, Type requiredBaseType, HttpContext context, Boolean allowCrossApp) +11454171
System.Web.WebPages.BuildManagerWrapper.CreateInstanceOfType(String virtualPath) +347
System.Web.WebPages.VirtualPathFactoryManager.CreateInstanceOfType(String virtualPath) +239
System.Web.WebPages.WebPageHttpHandler.CreateFromVirtualPath(String virtualPath, IVirtualPathFactory virtualPathFactory) +57
System.Web.WebPages.WebPageRoute.DoPostResolveRequestCache(HttpContextBase context) +407
System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +270 
```

我想做的步骤：

*   将控制器及其视图移动到单独的库中，并将 dll 放入 bin 文件夹中。
*   创建虚拟文件提供程序和虚拟文件以从程序集中获取数据：

    ```
    public override Stream Open()
    {
        var resourceName = this.path;
        var asmName = this.assembly.GetName().Name;
        var manifestName = asmName + ".Views" + resourceName.Trim('~').Replace("/", ".");
        var resourceStream = this.assembly.GetManifestResourceStream(manifestName);
        return resourceStream;
    } 
    ```

*   将此行添加到 web.config 中：

    ```
    <configSections>
      <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
        <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      </sectionGroup>
    </configSections>
    <system.web.webPages.razor>
      <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <pages pageBaseType="System.Web.Mvc.WebViewPage">
        <namespaces>
          <add namespace="System.Web.Helpers" />
          <add namespace="System.Web.Mvc" />
          <add namespace="System.Web.Mvc.Ajax" />
          <add namespace="System.Web.Mvc.Html" />
          <add namespace="System.Web.Routing" />
          <add namespace="System.Web.WebPages" />
        </namespaces>
      </pages>
    </system.web.webPages.razor> 
    ```

*   当用户访问此控制器的页面时，它会正确编译为以下类：

    ```
    public class _Page_Currency_Index_cshtml : System.Web.Mvc.WebViewPage<GridModel<CurrencyModel>> { 
    ```

*   之后它因这个错误而失败（正如我所看到的 - 他是对的，类型'ASP._Page_Currency_Index_cshtml'不继承自'System.Web.WebPages.WebPage'。）

我应该怎么做才能让 HttpApplication 知道这个页面应该作为 System.Web.Mvc.WebViewPage 而不是 System.Web.WebPages.WebPage 来管理？

我试图将 Views/Web.Config 移动到 bin 文件夹中，但它没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:29:19.500

尝试将此添加到`AppSettings`in `Web.Config`：

```
<add key="webpages:Enabled" value="false" /> 
```

# c# - 创建 SIP/VoIP 电话路由应用程序

> ID：10460915
> 
> 赞同：0
> 
> 时间：2012-05-05T10:21:54.483
> 
> 标签：c#, .net, sip, voip

在办公室，我们有一个托管的 VoIP 电信系统。我们使用 SIP / VoIP 电话，最近我们一直在 iPhone 上使用一些 SIP 客户端。与这些“其他客户”联系很好，这让我思考；我可以对此进行一些编程吗？我对制作 SIP 客户端/软电话并不是很感兴趣，但更像是一个“软接待员”。

是否有我可以在 .NET 中使用的库（+ 代码示例），它使我能够创建一个应用程序，该应用程序可以查看谁在呼叫并根据传入的电话号码重定向呼叫？

或者，当有一些可用的 OOTB 软件时，我也想听听。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:49:36.773

我不知道这样的库是否存在，但如果你只是重定向你只需要解析和稍微调整 SIP 消息（纯文本），你不必路由音频（我已经这样做了在 PHP 中一次）。SIP 有很好的文档记录。

# android - Android 在 Canvas 中拖放/旋转位图

> ID：10460916
> 
> 赞同：5
> 
> 时间：2012-05-05T10:21:56.307
> 
> 标签：android, drag-and-drop, bitmap, android-canvas

我正在尝试找到一种方法来实现拖放功能并在我的 Android 应用程序中旋转位图。我希望能够在画布上拖动图像并旋转它。这是我将位图添加到画布的方法：

```
Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.dog);
mCanvas.drawBitmap(bm,x-100,y-100 , mPaint); 
```

哪里`x & y`等于`event.getX(); / event.getY();`。

任何想法我怎样才能做到这一点？

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-31T10:51:29.170

这是我的解决方案，可能不是很酷，所以如果有人建议与我分享。

```
public class BitmapDragAndDrop {

BitmapDragAndDropListener listener;

public BitmapDragAndDrop(BitmapDragAndDropListener listener) {
    this.listener = listener;
}

public boolean onTouch(View view, MotionEvent motionEvent) {
    switch (motionEvent.getAction()) {
        case MotionEvent.ACTION_DOWN:
            listener.onDragStart(motionEvent.getX(), motionEvent.getY());
            view.invalidate();
            return true;
        case MotionEvent.ACTION_MOVE:
            listener.onDragging(motionEvent.getX(), motionEvent.getY());
            view.invalidate();
            return true;
        case MotionEvent.ACTION_UP:
            listener.onDragEnd(listener.onDrop(motionEvent.getX(), motionEvent.getY()));
            view.invalidate();
            return true;
    }
    return false;
}

public interface BitmapDragAndDropListener {

    void onDragStart(float x, float y);

    void onDragging(float x, float y);

    boolean onDrop(float x, float y);

    void onDragEnd(boolean isEntered);
}

}

public class YourDrawer implements BitmapDragAndDrop.BitmapDragAndDropListener {

Bitmap originalImage; //for restore initial state
Bitmap drawingImage; //bitmap for drawing states.
Canvas imageCanvas;
Bitmap objectBitmap;

public YourDrawer(Bitmap imageBmp, Bitmap objectBmp) {
    this.originalImage = imageBmp.copy(Bitmap.Config.RGB_565, true);
    this.drawingImage = imageBmp.copy(Bitmap.Config.ARGB_8888, true);
    this.imageCanvas = new Canvas(drawingImage);
    this.objectBitmap = objectBmp;

    //Draw your object at standard place where you need
    drawObject();
}

private void restoreImageToOriginal() {
    imageCanvas.drawBitmap(originalImage, 0, 0, null);
}

@Override
public void onDragStart(float x, float y) {
    //do whatever you want
}

@Override
public void onDragging(float x, float y) {
        restoreImageToOriginal();
        //Draw bitmap object at new coordinates
        drawMyObject(x, y);
    }
}

@Override
public boolean onDrop(float x, float y) {
    if (isRightPlace(x, y)) {
        return true;
    } else {
        return false;
    }
}

@Override
public void onDragEnd(boolean isEntered) {
    restoreImageToOriginal();
    if (isEntered) {
        drawMyObjectAtLastCoordinates();
    }
}

public Bitmap getDrawingBitmap() {
    return drawingImage;
}

} 
```

Ofc 不是复制和粘贴代码。您需要向其中添加一些实现。

在主类（片段或活动）中，您可以像这样初始化该代码：

```
YourDrawer yourDrawer =
            new YourDrawer(originalImage, objectBitmap);
    onTouchListener
            = new BitmapDragAndDrop(yourDrawer);
    imageView.setImageBitmap(yourDrawer.getDrawingBitmap()));

    imageView.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent motionEvent) {
            if (onTouchListener != null)
                onTouchListener.onTouch(view, motionEvent);
            return false;
        }
    }); 
```

它只解决拖放问题，不解决旋转问题。但主要思想甚至适用于轮换。

# linux - 如何使用 bash 从文本文件中删除前两行和后四行？

> ID：10460919
> 
> 赞同：63
> 
> 时间：2012-05-05T10:22:02.843
> 
> 标签：linux, bash

我正在尝试从我的文本文件中删除前两行和最后四行。我怎样才能用 Bash 做到这一点？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-05-05T10:28:27.707

您可以结合[tail](http://linux.die.net/man/1/tail)和[head](http://linux.die.net/man/1/head)：

```
$ tail -n +3 file.txt | head -n -4 > file.txt.new && mv file.txt.new file.txt 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-05T11:29:12.127

**首尾**

```
cat input.txt | tail -n +3 | head -n -4 
```

**解决方案**

```
cat input.txt | sed '1,2d' | sed -n -e :a -e '1,4!{P;N;D;};N;ba' 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-09T20:35:22.710

这是我找到的最快的方法：

```
sed -i 1,2d filename 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T11:32:04.407

您可以使用以下示例从 bash 命令行调用 ex 编辑器。请注意，它使用[此处的文档](http://en.wikipedia.org/wiki/Here_document)来结束要执行的命令列表。

```
ex text.file << EOF
1,2d
$
-3,.d
x
EOF 
```

# php - Mysql加入更新查询？

> ID：10460924
> 
> 赞同：-2
> 
> 时间：2012-05-05T10:22:30.447
> 
> 标签：php, mysql

Join 是否适用于 Mysql UPDATE Query？我想将一个字段的值复制到另一个表中。这两个表与 id 链接。就像是

```
Update table1 t1 join table2 t2 on t2.t1id=t1.id set t2.amt=t1.amt; 
```

这个对吗？还有其他解决方案吗？我们可以使用 Phpmyadmin 来实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T10:26:56.873

是的，您可以加入`UPDATE`：

```
UPDATE table1 t1, table2 t2 SET t2.amt=t1.amt WHERE t2.t1id=t1.id 
```

更多在[文档](http://dev.mysql.com/doc/refman/5.5/en/update.html)中。

# delphi - InstanceClass.NewInstance 与 InstanceClass.Create

> ID：10460925
> 
> 赞同：6
> 
> 时间：2012-05-05T10:22:32.897
> 
> 标签：delphi, oop, vcl

InstanceClass.NewInstance+Instance.Create 和 InstanceClass.Create 有什么不同；

方法1：

```
Instance := TComponent(InstanceClass.NewInstance);
Instance.Create(Self); 
```

方法2：

```
Instance := InstanceClass.Create(Self); 
```

哪个更好？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T11:05:52.933

`InstanceClass.Create`如果合适的话，我会一直使用——而且总是如此。

有很多原因。一个很好的是单行版本更简洁。另一个是单行版本是标准的、常用的方法。

另一个原因是您的方法 1 无法正确管理的构造函数中的异常处理。如果发生异常，新实例将被销毁，但实例变量仍然被分配。这是与方法 2 的一个重要区别，并且违反了 Delphi 的所有生命周期管理约定。

你提`TApplication.CreateForm`。让我们看一下：

```
Instance := TComponent(InstanceClass.NewInstance);
TComponent(Reference) := Instance;
try
  Instance.Create(Self);
except
  TComponent(Reference) := nil;
  raise;
end; 
```

请记住，这`Reference`是您作为`var`参数传递的表单变量。关于这一点的要点是这段代码在调用构造函数之前分配了该表单变量。通常，该分配仅在构造函数完成后进行。

大概是这样，引用表单变量（通常是全局变量）的代码可以工作，即使它是从表单的构造函数内部调用的。这是一个非常特殊的情况，绝大多数情况下是例外而不是规则。不要让这种特殊情况驱动您的主流编码风格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T05:56:09.920

*（我添加了这个答案，因为恕我直言，其他人不完整）*

方法2是正确的。

方法 1 如果永远不会被调用，因为构造函数调用有一个隐藏参数，这可能会导致正确的初始化失败：实际上，`NewInstance`它是每个类的伪虚拟方法！

事实上，`boolean`在构造函数调用中有一个隐藏参数（register `EDX`，因为`EAX`=class）。如[官方文档](http://docwiki.embarcadero.com/RADStudio/en/Program_Control)所述：

> 构造函数和析构函数使用与其他方法相同的调用约定，只是`Boolean`传递了一个附加标志参数来指示构造函数或析构函数调用的上下文。
> 
> `False`构造函数调用的标志参数中的值表示构造函数是通过实例对象或使用继承关键字调用的。在这种情况下，构造函数的行为类似于普通方法。构造函数调用的标志参数中的值`True`表示构造函数是通过类引用调用的。在这种情况下，构造函数创建一个`class`给定的实例`Self`，并返回一个对新创建的对象的引用`EAX`。

特别是，当以这种方式调用时，该类不会调用该`_ClassCreate`函数。`NewInstance`如果不使用默认函数创建类，则可能无法初始化类。事实上，这个函数被插入到 VMT 类中：在极少数情况下，它可能会被重载（例如，提供另一种内存分配模式 - 可能是垃圾收集器或一些速度优化的分配器）。`InstanceClass.NewInstance`因此，在某些边界情况下，直接调用可能会出错。

```
function _ClassCreate(AClass: TClass; Alloc: Boolean): TObject;
asm
  ...
    TEST    DL,DL
    JL      @@noAlloc
    CALL    dword ptr [EAX].vmtNewInstance
@@noAlloc:
  ... 
```

因此，`InstanceClass.NewInstance`只有在您想取消两个被覆盖的情况下，才可以故意直接调用`vmtNewInstance / vmtFreeInstance`（在这种情况下，您可能还必须不调用`.Free / .Destroy`，但您拥有无内存功能）。所以：永远不要调用`NewInstance`，而是由 Embarcadero（顺便说一下*FreePascal*`constructor`团队）设计和记录的，除非您需要进行一些内部低级调整。

 *切勿使用方法 1 创建对象！它可能在 99.9% 的时间内工作，但在某些情况下可能会失败，或者在未来使用编译器/RTL 增强功能（如垃圾收集器）。即使 VCL 有时使用`NewInstance`，你也不应该使用它——我宁愿这种方法被保护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T10:32:43.847

第二个更好，因为它是创建类实例的标准方法，而在构造函数中应该使用过程形式来调用继承的构造函数。*

# ms-access - Microsoft Access 2007，关于列值

> ID：10460927
> 
> 赞同：1
> 
> 时间：2012-05-05T10:23:12.050
> 
> 标签：ms-access

我对 MS Access 2007 还很陌生，我想问一些我找不到的问题。

是否有可能在特定列中，例如：type，使唯一可能的值“typea”、“typeb”？

就像是/否可用选项一样，只是它将包含我自己的特定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:31:14.157

是的，您可以使用 id 和 description (typea/typeb) 值创建一个查找表，然后引用该表。您可以在列上添加检查约束，以确保输入的类型与指定的约束匹配。（类型a 或类型b）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:34:21.777

有一种方法只涉及基础知识。为 Type 的有效值创建一个引用表。它可能有两列，ID 和描述。主键是 Id。放入两行，ID 值为“typea”和“typeb”。把任何你想要的描述。你以后可能会用到它。

使用关系工具使现有表中的列引用类型表中的 Id 列。这将在数​​据库中创建一个引用约束。

另一个回复建议添加检查约束。这可能会运行得更快，但可能需要您进行更多的学习。

而且，如果您添加了第三种和第四种类型，拥有一个像我给出的那样的表格将使修改变得超级容易。

# php - Is there a tool or using php to get it?

> ID：10460933
> 
> 赞同：0
> 
> 时间：2012-05-05T10:23:54.113
> 
> 标签：php, csv

Update some columns content in some **csv** files with a batch.

eg: `1.csv 2.csv 3.csv 4.csv.....`

All the columns name are the same in all the csv file.

Suppposed those `csv` files have columns `test1 test2 test3 test4 test5......` . the test1 have contents like this:

```
0
0
0
0 
.. 
```

now, i want to change them to `99`, namely:

```
99
99
99
99
.. 
```

Is there a tool or using php to update the content in all the csv files synchronously and update the content with a batch. thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:29:34.560

看看[fgetcsv()](http://php.net/manual/en/function.fgetcsv.php)、[fputcsv()](http://www.php.net/manual/en/function.fputcsv.php)和[str_getcsv()](http://www.php.net/manual/en/function.str-getcsv.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:15:45.827

在 Windows 上，没有这样的工具可以自动批量执行此操作。但是，您可以在电子表格应用程序中打开所有此类文件并快速更改它们。

如果文件数量太多，您可以选择您选择的脚本语言（PHP）并编写一些处理数据及其变化的文件处理例程。PHP 手册将引导您使用多种功能，NADH 也是如此。

我希望这能回答你的问题。

# iphone - Can there be only one Distribution Certificate per App Developer?

> ID：10460935
> 
> 赞同：4
> 
> 时间：2012-05-05T10:24:08.633
> 
> 标签：iphone, ios, certificate, code-signing

I experience big trouble with the iOS provisioning / certification.

Recently I submitted an app to App Store with a normal App Store Distribution Certificate. And then I wanted to create a AdHoc Beta Test for another app, and I am not sure what happened next but now the Provisioning Portal doesn't list my App Store Distribution Certificate anymore. Instead it only lists my AdHoc BetaTest Certificate.

Also, the Provisioning Portal has no way to create a new Certificate. Recently I renewed my developer account so maybe everything expired causing the trouble?

My Keychain has an entry "iPhone Distribution: Mikhalo Ivanokov", with green checkmark "This certificate is valid", expiring in Nov 10, 2012.

But Provisioning Portal doesn't list this Distribution Certificate. Only the AdHoc BetaTest certificate.

How can I fix this? Does anyone know what might have happened? Did Xcode replace my App Store Distribution Certificate with my AdHoc Distribution Certificate? Can I have two, or must I somehow delete the AdHoc Distribution Certificate first?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T10:48:39.170

您只能拥有一份分发和开发证书。但是，您可以拥有多个分发配置文件。因此，在您的情况下，您可以使用相同的分发证书来创建临时分发配置文件和应用商店分发配置文件。请记住，配置文件是通过组合您的证书（您的开发或发行版）、应用程序 ID 和可选的设备列表来创建的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T10:43:22.177

在我看来，您有一个分发证书，但错误地将其修改为 Ad Hoc 证书（可以在 Provisioning Portal 的分发选项卡中轻松完成）。如果您想在 App Store 中更新它，您只需要再制作一个分发证书并用它签署您的应用程序。

您无需删除 Ad Hoc 证书，只需在开发者 Mac 上维护分发证书和 Ad Hoc 证书即可。您只需使用正确类型的证书签署您的应用程序，即可在 App Store 和 Ad Hoc 分发中发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-05T03:15:45.350

IOS分发证书个人账号只能申请三个

# android - YouTube Video upload error in Android app

> ID：10460940
> 
> 赞同：0
> 
> 时间：2012-05-05T10:25:54.167
> 
> 标签：android, youtube, youtube-api

I need to upload video to Youtube in Android app.

I tried to upload video via HTTP Post method ..

First i get Authorization token form GoogleLogin auth.

Then i tried to upload video with HTTP Post request.

Below are my code..

```
 HttpURLConnection conn = null;
        // BufferedReader br = null;
        DataOutputStream dos = null;
        InputStream inStream = null;

        // InputStream is = null;
        // OutputStream os = null;
        // boolean ret = false;
        // String StrMessage = "";
        String path = "/home/siva/test_data/";
        String existingFileName = "test5.3gp";
        File videoFile = new File(str);

        // String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary = "b93dcbA3";
        String ver = "2";

        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 2048;
        // String responseFromServer = "";
        try {
            FileInputStream fileInputStream = new FileInputStream(str);

            URL url = new URL(
                    "http://uploads.gdata.youtube.com/feeds/api/users/default/uploads");
            conn = (HttpURLConnection) url.openConnection();

            // Allow Inputs
            conn.setDoInput(true);
            // Allow Outputs
            conn.setDoOutput(true);
            // Don't use a cached copy.
            conn.setUseCaches(false);

            // Use a post method.
            conn.setRequestMethod("POST");
            // conn.setRequestProperty("Connection","Keep-Alive");
            conn.setRequestProperty("Host", "uploads.gdata.youtube.com");
            conn.setRequestProperty("Authorization", "GoogleLogin auth="
                    + token);
            conn.setRequestProperty("GData-Version", ver);
            conn.setRequestProperty("X-Gdata-Client", clientId);
            conn.setRequestProperty("X-GData-Key", "key=" + developerKey);
            conn.setRequestProperty("Slug", "VID_20120502_122127.3gp");
            conn.setRequestProperty("Content-Type",
                    "multipart/related;boundary=" + boundary);
            // conn.setRequestProperty("Content-Length", ""+videoFile.length());
            conn.setRequestProperty("Connection", "close");
            conn.setRequestProperty("Content-Type",
                    "application/atom+xml;charset=UTF-8");
            //conn.setRequestProperty("Content-Type", "video/*");
            conn.setRequestProperty("Content-Type", "video/3gpp");
            //conn.setRequestProperty("Content-Transfer-Encoding", "binary");
            conn.setRequestProperty("Content-Transfer-Encoding", "UTF-8");

            StringBuilder test_xml = new StringBuilder();
            test_xml.append("<?xml version='1.0'encoding='UTF-8'?>\n");
            test_xml.append("<entry xmlns=\"http://www.w3.org/2005/Atom\"\n");

            test_xml.append("xmlns:media=\"http://search.yahoo.com/mrss/\"\n");
            test_xml.append("xmlns:yt=\"http://gdata.youtube.com/schemas/2007\">\n");
            test_xml.append("<media:group>\n");
            test_xml.append("<media:title type=\"plain\">TestVideo</media:title>\n");
            test_xml.append("<media:descriptiontype=\"plain\">\nTest Video\n</media:description>\n");
            test_xml.append("<media:category\n");
            test_xml.append("scheme=\"http://gdata.youtube.com/schemas/2007/categories.cat\">People\n");
            test_xml.append("</media:category>\n");
            test_xml.append("<media:keywords>toast,wedding</media:keywords>\n");
            test_xml.append("</media:group>\n");
            test_xml.append("</entry>");

            String requestBody = new String(test_xml.toString().getBytes(),"UTF-8");
        int lngth = requestBody.length();
        conn.setRequestProperty("Content-Length", ""+lngth);

        dos = new DataOutputStream(conn.getOutputStream());
            dos.write((twoHyphens + boundary).toString().getBytes());
            dos.write(test_xml.toString().getBytes("UTF-8"));

            // System.out.println(test_xml.toString());
            dos.write((twoHyphens + boundary).toString().getBytes());

            // create a buffer of maximum size
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];

            // read file and write it into form
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            while (bytesRead > 0) {
                // dos.flush();
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }

            dos.write((twoHyphens + boundary + twoHyphens).toString()
                    .getBytes());

            // close streams
            fileInputStream.close();
            dos.flush();
            dos.close();

        } catch (MalformedURLException ex) {
            ex.printStackTrace();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

        StringBuilder outputBuilder = new StringBuilder();
        try {
            int responseCode = conn.getResponseCode();
            if (responseCode == HttpURLConnection.HTTP_OK) {
                inStream = conn.getInputStream();
            } else {
                inStream = conn.getErrorStream();
            }

            String string;
            if (inStream != null) {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(inStream));
                while (null != (string = reader.readLine())) {

                    outputBuilder.append(string).append("\n");
                }
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            if (inStream != null) {
                try {
                    inStream.close();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        } 
```

I am getting error as below.

```
05-05 15:43:18.391: W/System.err(2938): java.io.IOException: exceeded content-length limit of 476 bytes
05-05 15:43:18.391: W/System.err(2938):     at org.apache.harmony.luni.internal.net.www.protocol.http.RetryableOutputStream.write(RetryableOutputStream.java:58)
05-05 15:43:18.391: W/System.err(2938):     at java.io.DataOutputStream.write(DataOutputStream.java:99)
05-05 15:43:18.391: W/System.err(2938):     at java.io.FilterOutputStream.write(FilterOutputStream.java:105)
05-05 15:43:18.391: W/System.err(2938):     at com.VidoePick.VideoPickActivity.testvideo(VideoPickActivity.java:158)
05-05 15:43:18.391: W/System.err(2938):     at com.VidoePick.VideoPickActivity.onActivityResult(VideoPickActivity.java:73)
05-05 15:43:18.391: W/System.err(2938):     at android.app.Activity.dispatchActivityResult(Activity.java:3908)
05-05 15:43:18.391: W/System.err(2938):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
05-05 15:43:18.391: W/System.err(2938):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
05-05 15:43:18.391: W/System.err(2938):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
05-05 15:43:18.391: W/System.err(2938):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
05-05 15:43:18.391: W/System.err(2938):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 15:43:18.391: W/System.err(2938):     at android.os.Looper.loop(Looper.java:130)
05-05 15:43:18.391: W/System.err(2938):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-05 15:43:18.391: W/System.err(2938):     at java.lang.reflect.Method.invokeNative(Native Method)
05-05 15:43:18.391: W/System.err(2938):     at java.lang.reflect.Method.invoke(Method.java:507)
05-05 15:43:18.391: W/System.err(2938):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-05 15:43:18.391: W/System.err(2938):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-05 15:43:18.391: W/System.err(2938):     at dalvik.system.NativeStart.main(Native Method)
05-05 15:43:18.401: W/System.err(2938): java.io.IOException: content-length promised 476 bytes, but received 10
05-05 15:43:18.401: W/System.err(2938):     at org.apache.harmony.luni.internal.net.www.protocol.http.RetryableOutputStream.close(RetryableOutputStream.java:48)
05-05 15:43:18.401: W/System.err(2938):     at org.apache.harmony.luni.internal.net.www.protocol.http.RetryableOutputStream.contentLength(RetryableOutputStream.java:64)
05-05 15:43:18.401: W/System.err(2938):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.prepareRequestHeaders(HttpURLConnectionImpl.java:864)
05-05 15:43:18.401: W/System.err(2938):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.writeRequestHeaders(HttpURLConnectionImpl.java:787)
05-05 15:43:18.401: W/System.err(2938):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1028)
05-05 15:43:18.401: W/System.err(2938):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:726)
05-05 15:43:18.401: W/System.err(2938):     at com.VidoePick.VideoPickActivity.testvideo(VideoPickActivity.java:195)
05-05 15:43:18.401: W/System.err(2938):     at com.VidoePick.VideoPickActivity.onActivityResult(VideoPickActivity.java:73)
05-05 15:43:18.401: W/System.err(2938):     at android.app.Activity.dispatchActivityResult(Activity.java:3908)
05-05 15:43:18.401: W/System.err(2938):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
05-05 15:43:18.401: W/System.err(2938):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
05-05 15:43:18.401: W/System.err(2938):     at android.app.ActivityThread.access$2000(ActivityThread.java:117)
05-05 15:43:18.401: W/System.err(2938):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
05-05 15:43:18.401: W/System.err(2938):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 15:43:18.401: W/System.err(2938):     at android.os.Looper.loop(Looper.java:130)
05-05 15:43:18.401: W/System.err(2938):     at android.app.ActivityThread.main(ActivityThread.java:3683)
05-05 15:43:18.401: W/System.err(2938):     at java.lang.reflect.Method.invokeNative(Native Method)
05-05 15:43:18.401: W/System.err(2938):     at java.lang.reflect.Method.invoke(Method.java:507)
05-05 15:43:18.401: W/System.err(2938):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-05 15:43:18.401: W/System.err(2938):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-05 15:43:18.401: W/System.err(2938):     at dalvik.system.NativeStart.main(Native Method) 
```

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:36:17.383

如果您只想上传，那么您可以使用

**安卓-ytd**

通过分步完成教程查看此[答案](https://stackoverflow.com/a/10432215/1289716)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T13:08:58.207

我有同样的错误。您需要检查“Content-Length”属性

```
conn.setRequestProperty("Content-Length", "" + lngth); 
```

# regex - 电话号码模式的正则表达式

> ID：10460941
> 
> 赞同：1
> 
> 时间：2012-05-05T10:25:59.947
> 
> 标签：regex, oracle, pattern-matching

你知道是否可以将这样的模式转换为正则表达式：

ABCDXXXXYYYY

其中 ABCDEFGH.. 是连续数字，V、X、Y、Z 是任意数字。

上面的模式应该匹配：

123400006666 456799994444等

请注意，我不是要求一个完整的解决方案，而是关于如何解决这个问题的一些想法。您以前是否遇到过这样的情况（在数据库中搜索似乎不适合 RegExps 的已定义模式？

任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:04:59.320

您无法识别正则表达式中的连续数字，因为它们过于依赖上下文。

但是，我认为这在 PL/SQL 中很容易实现，并且在 SQL 中也可能实现。

如果您*只想*[`connect by`](http://psoug.org/reference/connectby.html)使用 SQL，那么您可以使用未记录函数[`wm_contact`](http://psoug.org/definition/WM_CONCAT.htm)或用户定义函数的组合生成一串连续数字[`stragg`](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3aNO%3a%3aP11_QUESTION_ID:2196162600402)

就像是：

```
 select replace(stragg(level),',','')
   from dual
connect by level <= 5 
```

将它与正则表达式连接可能会让你接近，但我不认为这是要走的路。我肯定会使用 PL/SQL 函数进行调查，并可能完全忘记正则表达式。

执行以下操作会将一个数字拆分为一个数组，然后您可以循环并对其进行操作。根据要求，这只是一个起点，您可能希望对其进行大量更改。由于没有实际的 SQL，它只是字符串操作，因此执行此类操作非常有效。

```
create or replace function validate_phone( P_phone number ) 
                 return number is

   type t__phone is table of number index by binary_integer;
   t_phone t__phone;

   l_consecutive varchar2(150);

begin

   -- Test whether we actually have a number first ( code below ).
   if is_number(P_phone) = 0 then
       return null;
   end if;

   -- Split out the phone number into individual array elements.
   for i in 1 .. length(to_char(P_phone)) loop

      t_phone(i) := substr(to_char(P_phone, i, 1))

   end loop;

   for i in t_phone.first .. t_phone.last loop

      -- If we find a consecutive number then build this string.
      if t_phone.exists(i + 1)
        and t_phone(i) = t_phone(i + 1) - 1 then
         l_consecutive := l_consecutive || t_phone(i);
      end if;

   end loop;

   return something;

end validate_phone; 
```

如上所示，您可能首先要检查您的电话号码是否实际上是数字：

```
create or replace function is_number( P_number varchar2 ) 
        return number is

   /* Test a number to see whether it actually is one
      return a 1 / 0 rather than boolean so it can also
      be used in plain SQL.
      */

   l_number number;

begin

   l_number := P_number;

   return 1;

exception when others then
   return 0;
end is_number; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T10:34:24.567

您描述的语言不是上下文无关的（如果由连续数字组成的前缀长度是任意的）并且不是正则语言，因此不能用正则表达式表示。

# php - Facebook api 方法返回错误代码 200 并卡住

> ID：10460949
> 
> 赞同：0
> 
> 时间：2012-05-05T10:27:02.763
> 
> 标签：php, facebook, facebook-graph-api, try-catch

当我使用 Facebook`api()`方法时，当我获得许可时它可以正常工作，但是当用户拒绝某些扩展权限并且我的 php 脚本要求该数据时，会发生错误并且脚本卡住。所以在`api()`请求之后不再执行指令。

我该如何处理该错误？我什至无法获取这些数据以发现存在错误，因为就像我说的脚本卡住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:42:26.273

每次 facebook 返回错误代码时，Facebook api 都会返回 FacebookApiException。

因此，每当您调用 api() 方法时，请使用 try-catch 块。

```
try{
    f.api("whatever"); 
}catch (FacebookApiException $e) {
      // most likely that user very recently revoked authorization.
      // In any event, we don't have an access token, so say so.
      echo "Something went wrong";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:33:25.553

用户可以随时撤销权限，因此即使您之前已被授予权限，这并不意味着您仍然拥有该权限。

如果 facebook 在请求某些您无权访问的数据时卡住，唯一的解决方案是在执行命令之前检查您是否具有所需的权限。

看看[如何在 facebook 中检查特殊权限](https://stackoverflow.com/questions/1563223/how-to-check-special-permissions-in-facebook)

# c++ - 创建 IloObjective 的正确方法

> ID：10460955
> 
> 赞同：0
> 
> 时间：2012-05-05T10:28:10.213
> 
> 标签：c++, mathematical-optimization, linear-programming, cplex

我正在使用 cplex 用 C++ 编写程序。我能够从一个文件中读取信息，这样我就可以创建一个包含百分比的矩阵和两个包含卖价和买价的数组。：

```
double ** percents;
double * prices;
double * sellprices;
prices = (double *)malloc(n*sizeof(double ));
sellprices = (double *)malloc(n*sizeof(double ));
percents = (double **)malloc(n*sizeof(double *));
for(i=0; i < n; i++) 
    percents[i] = (double *)malloc(m*sizeof(double)); 
```

此外，我创建了两个最终应该优化的数组。

```
IloNumVarArray X(env);
IloNumVarArray Y(env);

for (int i=0;i<2;i++)
        X.add(IloNumVar(env));
for (int i=0;i<n;i++)
        Y.add(IloNumVar(env));

model.add(IloMaximize(env, sellprices[i]*X[i] - prices[i]*Y[i])); 
```

这是创建目标的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T04:31:49.043

你需要计算

```
sum_i sellprices[i] * X[i] 
```

和

```
 sum_i prices[i] * Y[i] 
```

如果您希望价格和销售价格是普通的 c 数组，则需要 IloExpr

```
IloExpr totalSales(env);
IloExpr costOfGoodsSold(env);
for (int i = 0; i < n; ++i) {
   totalSales += sellprices[i]*X[i];
   costOfGoodsSold += prices[i]*Y[i];
}
model.add(IloMaximize(env, totalSales - costOfGoodsSold)); 
```

现在，您可以通过将 IloNumArrays 用于销售价格和价格来避免 malloc 和循环

```
sellprices = IloNumArray(env, n);
prices = IloNumArray(env, n);
model.add(IloMaximize(env, IloScalProd(sellPrices, X) - IloScalProd(prices, Y))); 
```

如果您不想使用 IloNumArray，您至少应该尝试 std::vector。

# c++ - 为什么不能在构造函数中捕获异常？

> ID：10460957
> 
> 赞同：3
> 
> 时间：2012-05-05T10:28:28.567
> 
> 标签：c++, exception, constructor

我有这个测试代码来处理构造函数中的异常。函数 f() 创建一个除以零的异常，但未捕获此异常。相反，如果我抛出一个自定义整数，则会捕获异常。

```
#include <iostream>
using namespace std;

class A
{
public:
  void f(){
    int x;
    x=1/0;
    //throw 10;
  }

 A(){
   try{
     f();
     }
     catch(int e){
       cout << "Exception caught\n";
       }
   }
 };

int main (int argc, const char * argv[])
{

   A a;
  return 0;
} 
```

为什么我可以接住自定义投掷 10；而不是 x=1/0;

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T10:32:00.063

整数除以零不是标准 C++ 异常。所以你不能依赖隐式抛出的异常。特定的编译器可能会将除以零映射到某种异常（您需要为此检查编译器文档），如果是这样，您可以捕获该特定异常。但是，请注意，这不是可移植行为，并且不适用于所有编译器。

您可以做的最好的事情是自己检查错误条件（除数等于零）并明确抛出异常。

```
class A
{
    public:
         void f()
         {
             int x;
             //For illustration only
             int a = 0;
             if(a == 0)
                  throw std::runtime_error( "Divide by zero Exception"); 
             x=1/a;
         }

         A()
         {
              try
              {
                   f();
              }
              catch(const std::runtime_error& e)
              {
                   cout << "Exception caught\n";
                   cout << e.what(); 
              }
         }
 }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T10:33:19.327

除以零不是 C++ 异常。

看看那里的答案：[C++ : Catch a 除以零错误](https://stackoverflow.com/questions/4747934/c-catch-a-divide-by-zero-error)以及[C++ 的（非）handline of 除以零](http://www.jdl.co.uk/briefings/divByZeroInCpp.html)。

# javascript - 在不回发的情况下突出显示gridview中的选定行

> ID：10460960
> 
> 赞同：1
> 
> 时间：2012-05-05T10:29:04.827
> 
> 标签：javascript, asp.net, gridview

我在 asp.net 中有一个 gridview，只要单击它就会更新预览图片。这无需回发即可工作，我这样做：

```
protected void GridView1_RowCreated(object sender,System.Web.UI.WebControls.GridViewRowEventArgs e)
   {
   if (e.Row.RowType == DataControlRowType.DataRow)
     {
      e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
      e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
      e.Row.ToolTip = "Click to select row";
      e.Row.Attributes["onclick"] = "RetrievePicture(" + GVmail.DataKeys[e.Row.RowIndex].Value.ToString() + ",this)";
     }
  } 
```

但是，我希望用户能够看到选择了哪一行并因此显示图像..（所以我希望行保持突出显示）。and then when another row is selected, i want that row to go back to normal and the newly selected one to be highlighted.

如果没有回发，我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:34:52.553

看见

```
 for (int i = 0; i < gridview.Rows.Count; i++)
    {
        GridViewRow row;
        row = gridview.Rows[i];
        if (row.Cells[1].Text.Equals("ABSENT"))
        {
            row.BackColor = System.Drawing.Color.IndianRed;
            row.ForeColor = System.Drawing.Color.White;
            row.Font.Bold = true;
        }
    } 
```

可以帮到你！！

# ruby-on-rails-3 - 想向基于 activeadmin 的应用程序添加一些自定义 ajax 和 javascript

> ID：10460961
> 
> 赞同：1
> 
> 时间：2012-05-05T10:29:19.927
> 
> 标签：ruby-on-rails-3, activeadmin

大家好，我正在使用 activeadmin 开发此应用程序。我已经到了想要添加一些基于 ajax 的函数的地步。我使用 teh activeadmin 资源设置了基本表单，它生成了一个非常漂亮的表单。

我想在用户在表单上输入详细信息时 - 运行一个 ajax 调用，该调用将根据输入的值检索一些 html 并将其填充到页面上。

更有可能我想要一种将自定义 javascript 添加到页面的方法。最好的方法是什么 - 我在返回 html 时遇到了问题，而没有附带整个 activeadmin 布局。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-20T12:15:28.750

您可以使用`/config/initializers/active_admin.rb`

您可以像这样添加 javascript 资源：

```
config.register_javascript 'my_functions.js' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:29:09.530

我习惯将代码直接放入 /app/assets/javascripts/active_admin.js

您还可以在 /config/initializers/active_admin.rb 中包含脚本

# ruby-on-rails - Rails自引用关联，如何确定相互交集？

> ID：10460962
> 
> 赞同：0
> 
> 时间：2012-05-05T10:29:25.247
> 
> 标签：ruby-on-rails, associations, self-reference

我想有朋友/追随者 mechanzm，所以我创建了以下数据库结构：

```
user_id
friend_id 
```

我想知道确定（Rails-way）以下用户是共同朋友的最简单和最简单的方法是什么？

```
user_id        friend_id
1              2
2              1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:04:24.367

尝试这个：

```
test_pair = [1,2]
Friendship.where(user_id: test_pair, friend_id: test_pair).count == 2 
```

# python - 或在 python 中的行为：

> ID：10460963
> 
> 赞同：2
> 
> 时间：2012-05-05T10:29:27.550
> 
> 标签：python

我已经编写了以下代码，我想要做的就是打印一个 yes，如果传递的数字是 1、0 或 2 的字符串表示形式，而其他所有内容都是 false：

```
number=raw_input()
if number is "1" or "0" or "2":
    print "Yes"
else:
     print "no" 
```

~~我知道如何使预期的逻辑工作，但我~~只想知道为什么它为我传递给 raw_input 的任何数字打印是。我希望答案尽可能详细，因为我不明白为什么它会失败，这对我来说似乎足够pythonic

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T10:32:55.950

问题是您的代码对 Python 来说是这样的：

```
if (number is "1") or "0" or "2": 
```

并且由于任何非空字符串`True`的计算结果为 ，它总是`True`。

做你想做的事，一个很好的语法是：

```
if number in {"1", "0", "2"}: 
```

请注意我在这里使用了一个集合 - 虽然在这种情况下（只有三个值）并不重要，但检查一个集合比一个列表更快，因为一个集合的成员资格测试是 O(1) 而不是 O (n)。

这只是写这个更好，更容易：

```
if number == "1" or number == "0" or number == "2": 
```

这就是你想要的。

请注意，在比较值时，您应该始终使用`==`not `is`-`is`是身份检查（两个值是同一个对象）。通常，您应该使用or`is`之类的东西。`is True``is None`

如果你想把它当作一个数字来处理，你可以这样做：

```
try:
   value = int(number)
except ValueError:
   value = None
if value is not None and 0 <= value <= 2:
    ... 
```

在您想要与大量数字进行比较的情况下，这可能更有用。请注意我使用了 Python 有用的比较链接（`0 <= value <= 2`而不是`0 <= value and value <= 2`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T10:35:13.167

正确的语法如下：

```
if number == "1" or number == "0" or number == "2":
    print "Yes" 
```

或者更 Pythonic：

```
if number in ["1", "2", "3"]:
    print "Yes" 
```

或者您可以投射`int`并尝试：

```
if int(number) in range(1,4):
    print "Yes" 
```

您的代码评估的原因`True`一直是因为它正在评估 and 的真实性`"0"`，`"2"`这在 Python 中 as 语句是真实的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:33:31.550

因为 an 之间的每个表达式`or`都被评估为布尔表达式。

`if True`计算为真，`if 1:`计算为真，`if "0":`计算为真。

所以你写的或多或少相当于：

```
if number is "1":
    print "Yes"
elif "0":
    print "Yes"
elif "2":
    print "Yes"
else:
     print "no" 
```

你应该写`if number is "1" or number is "0" or number "2":`或者，更pythonic：`if number in ("1", "0", "2"):`

# java-me - 如何使用 j2me LWUIT api 显示隐藏文件

> ID：10460969
> 
> 赞同：0
> 
> 时间：2012-05-05T10:30:40.057
> 
> 标签：java-me, lwuit

我正在使用 LWUIT 制作 FileBrowser。

问题是当我使用`setHidden(true)`应用程序隐藏一个文件时，我再也无法使用它来显示它，`listfiles()`所以我无法取消隐藏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:28:29.397

这似乎是 LWUIT4IO 中的一个遗漏。我在[Codename One](http://www.codenameone.com/)中修复了它，所以它应该在那里按预期工作。

# grails - 无法从 GSP 列表中的对象获取值

> ID：10460972
> 
> 赞同：0
> 
> 时间：2012-05-05T10:30:47.540
> 
> 标签：grails, groovy, gsp

我是 Groovy 和 grails 的新手。我想在员工列表中显示员工的当前项目。我只能通过`ProjectMember`上课才能得到员工当前的项目。我的想法是获取每个员工的当前项目，然后将其放入一个列表中，然后在`.gsp`.

```
class EmployeeController {

    def list = {
        params.max = Math.min(params.max ? params.int('max') : 10, 100)

        def currentProject = [ProjectMember];
        List<Employee> employeeList = Employee.list(params)
        System.out.print("PREV SIZE" + currentProject.size())
        for(Employee emp: employeeList) {
            def current = ProjectMember.findAllByEmployeeAndEndDateIsNull(emp, [sort: "project.name", order: "asc"])
            System.out.print(current.project.name);
            // This is working, I can get the current projects of the employee
            if(!current.empty) {                     
                currentProject.add(current);
                // Here is the code I didn't understand I really don't know 
                // if the project is added in the list.
                // Everytime I try to display the contents of the list using foreach, 
                // I always get an error. MissingProperty
            }
        }

        [currentProject: currentProject,
         employeeInstanceList: Employee.list(params),
         employeeInstanceTotal: Employee.count()]
    }
} 
```

* * *

```
class ProjectMember {
    Employee employee
    EmployeeRole role
    Date startDate
    Date endDate
    String notes

    static belongsTo = [project: Project]
} 
```

* * *

```
class Project {
    String name
    String alternateName
    boolean useAlternateNameInResume = false

    String summary
    String duration
    String skills
    String technologies

    Date startDate
    Date endDate

    static hasMany = [members: ProjectMember]
} 
```

* * *

最后是观点`list.gsp`：

```
<g:each in="${employeeInstanceList}" status="i" var="employeeInstance">
    <tr class="${(i % 2) == 0 ? 'odd' : 'even'} clickable" onclick="window.location='<g:createLink action='show' id='${employeeInstance.id}' />'">
        <td>${employeeInstance.idNo?.encodeAsHTML()}</td>
        <td>${fieldValue(bean: employeeInstance, field: "fullNameWithMiddleName")}</td>
        <td>${employeeInstance.position}</td>
        <td>
            <g:each in="${currentProject}" var="currentProject" status ="j">                                            
                ${fieldValue(bean: currentProject, field: "project.name")}
            </g:each>
            <g:if test="${currentProject.empty}">
                No projects yet
            </g:if> 
        </td>
    </tr>
</g:each> 
```

一切正常，除了当前项目不显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:30:22.990

尝试

```
<g:each in="${currentProject}" var="project">                                            
     ${fieldValue(bean: project, field: "name")}
</g:each> 
```

# python - 从 web2py 的列表中选择具有静态内容的 Widget Model Form

> ID：10460973
> 
> 赞同：1
> 
> 时间：2012-05-05T10:30:54.360
> 
> 标签：python, web2py

我有一个简单的模型如下：

```
games = ['soccer', 'hockey', 'baseball', 'cricket', 'basketball']
db.define_table('Sportsmen',
                Field('gamer', db.auth_user),
                Field('games', length=20),
                Field('experience', 'integer', default=0)) 
```

我要做的就是通过 sql 表单在下拉菜单中填充游戏列表。我看到了 selectwidget，但这些例子有点复杂（他们将所有选项放在数据库中并将该数据库呈现到下拉列表中，对于我来说，只有一个小列表就足够了）用于这个小目的。[在这里](https://docs.djangoproject.com/en/dev/ref/forms/widgets/#setting-arguments-for-widgets)可以找到类似的 django 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:19:46.200

您可以使用 requires 参数来创建该下拉列表。

```
games_set = set('soccer', 'hockey', 'baseball', 'cricket', 'basketball')
db.define_table('Sportsmen',
            Field('gamer', db.auth_user),
            Field('games', length=20, 
                requires=IS_IN_SET(games_set))),
            Field('experience', 'integer', default=0)) 
```

这将在表单中为您提供一个下拉列表，其中仅包含集合中的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T17:41:26.867

如果每个玩家可以拥有多个游戏，并且您希望将它们作为列表存储在单个字段中，则可以使用[list:string](http://web2py.com/books/default/chapter/29/6#Many-to-many,-list%3A%3Ctype%3E%2C-and-contains)字段类型并添加`multiple=True`到[`IS_IN_SET()`](http://web2py.com/books/default/chapter/29/7#Validators)验证器中。

```
Field('games', 'list:string', requires=IS_IN_SET(games_set, multiple=True)) 
```

# css - 跨浏览器拉伸菜单项实际项

> ID：10460977
> 
> 赞同：0
> 
> 时间：2012-05-05T10:31:06.770
> 
> 标签：css

我正在尝试拉伸菜单，就像在这里所做的一样： [拉伸水平 ul 以适应 div 的宽度](https://stackoverflow.com/questions/5186712/stretch-horizontal-ul-to-fit-width-of-div)

只有我试图使实际文本位于最左边和最右边（现在它们包含的 li 被拉伸，但文本居中。

任何想法och链接到示例？:) CSS/或表格无关紧要，只要它适用于所有浏览器 :)

像这样： [http ://www.alisso.se/wordpress/uploads/2012/05/spread-menu.png](http://www.alisso.se/wordpress/uploads/2012/05/spread-menu.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:03:59.823

我已经为您设置了一个 jsfiddle，它将实现您想要的样式[http://jsfiddle.net/trickeedickee/Kkngn/](http://jsfiddle.net/trickeedickee/Kkngn/)我使用了额外的 first 和 last 类。我本可以使用 :first-child 和 :last-child ，但不想让您过于复杂。

让我知道这是否有效，如果没有，我会提供更多帮助。

# java - Java：多维数组输出混乱？

> ID：10460981
> 
> 赞同：1
> 
> 时间：2012-05-05T10:31:14.160
> 
> 标签：java, arrays, multidimensional-array

```
public class VarNoOfCols {
    public static void main(String[] args) {
        int a[][] = new int[3][];

        a[0]=new int[3];
        a[1]=new int[2];
        a[2]=new int[1];
        int temp=3;
        for(int i =0; i<3;i++) {
            for(int k=0;k<temp;k++) {
                a[i][k]= k*10;
                           temp-- ;
            }

        }
    }
} 
```

--- 我假设的输出 ---- 低于 --- 但这是不正确的。

```
(0 0) 0  (0 1) 10
(1 0) 0  (1 1) 10
(2 0) 0  (2,1) 10 
```

我知道这是不正确的。（我的问题是 - 在完成第二次迭代时，“k”大于“temp”，当条件失败时，它将停止内部语句并执行下一项工作（无论它应该是什么）。为什么我得到 (0, 2) = 20 为什么我看不到 (2,1) = 10 ？

你可以看到正确的输出：

```
(0 0) 0  (0 1) 10 (0 2) 20
(1 0) 0  (1 1) 10
(2 0) 0 
```

我是一名学习者，我非常感谢这里有人的帮助。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:35:20.920

像这样更改代码：

```
for(int i =0; i<3;i++)
{
    for(int k=0;k<3;k++)
        a[i][k]= k*10;

} 
```

如果你想要一个方形输出，为什么你要使用控制变量`temp`来改变每次迭代的输出条目数`i`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:57:46.103

实际上，通过您的最后一次编辑（使用 temp-- 在第二个中），您既没有获得第一个输出也没有获得第二个输出。

***为什么？***

因为您永远不会重新分配`temp`，并且在 3 次递减后，第二个循环将不再执行。所以你只得到 (0;0) (0;1) 和 (1;0) 的值。

***为什么你不能获得输出 1（平方一）？***

```
a[2] have a size of 1 so you can't have something in (2;1) 
```

***如何获得第二个输出？***

不要将它放在`temp--`第二个循环中，而是在第二个循环之后（在第一个循环结束时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:34:01.807

```
public class VarNoOfCols {           
    public static void main(String[] args) { 

        int a[][] = new int[3][];

        a[0]=new int[3];
        a[1]=new int[2];
        a[2]=new int[1];

        int temp=3;

        for(int i =0; i<3;i++)
        {
            for(int k=0;k<temp;k++)
                //the inner for lopp doesn't have curly "{" braces.
                //temp will be 3 for 1st loop and when k becomes 3 it exit inner loop.
                a[i][k]= k*10;
            temp--;
        }
        //temp--;
        //System.out.println("temp : " +temp + " \n " );

    }   
} 
```

感谢你们。我弄清楚了背后的逻辑。这不是逻辑，只是`{`应该注意。`{`如果我在内循环中不使用大括号，我将得到以下输出：

```
(0 0 ) 0   (0 1 ) 10   (0 2 ) 20
(1 0 ) 0   (1 1 ) 10
(2 0 ) 0 
```

如果大括号`{`和`}`内部循环中存在临时变量，那么我将得到以下输出：

```
(0 0 ) 0   (0 1 ) 10
(1 0 ) 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T10:36:04.667

这是因为 temp 和 k

在你的程序中首先 i=0

1.  k=0,temp=3 然后 (0 0) 所以输出 0*10 = 0
2.  k=1,temp=2 然后 (0 1) 所以输出 1*1​​0 = 10
3.  k=2,temp=1 for 循环中的条件为假（外部 for 循环中的条件（具有 i）是正确的，但在内部 for 循环中条件 k

我=1

1.  k=0,temp=3 然后 (1 0) 所以输出 0*10 = 0
2.  k=1,temp=2 然后 (1 1) 所以输出 1*1​​0 = 10

我=2

1.  k=0,temp=3 然后 (2 0) 所以输出 0*10 = 0
2.  k=1,temp=2 然后 (2 1) 所以输出 1*1​​0 = 10

没有必要`temp`。要获得正确的输出，请使用此

```
for(int i =0; i<3;i++)
{
   for(int k=0;k<3;k++)
      a[i][k]= k*10;

} 
```

# windows-phone-7 - Windows Phone SDK 7.1 DirectX 问题

> ID：10460983
> 
> 赞同：0
> 
> 时间：2012-05-05T10:31:41.620
> 
> 标签：windows-phone-7, directx

尝试使用 Web 平台安装程序安装 Windows Phone SDK 7.1，但始终不成功。我手动找到了安装文件并运行了它。安装完成后显示一条消息：

> 安装程序无法安装以下组件：
> 
> DirectX 库
> 
> DirectX SDK 库

我在我的计算机上遇到 DirectX 问题，[这里](https://superuser.com/questions/420518/directx-is-missing)有更多详细信息的线程：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:43:52.303

我也面临同样的问题。

如果您在 Windows 7 中安装 Windows phone 7.1 SDK，它应该安装。如果没有，那么您的计算机中没有 DirectX 10.0 支持。Windows phone 7.1 SDK 需要 DirectX 10.0 支持。解决办法是升级显卡。

# xcode - XCode 4.2 源代码管理问题

> ID：10460988
> 
> 赞同：1
> 
> 时间：2012-05-05T10:32:06.837
> 
> 标签：xcode, git, version

我好像有一个大问题。我打开Xcode，我的主视图控制器代码似乎已经被原始代码替换了，一切都消失了。我所有的其他文件旁边都有一个小“M”表示修改后的图标，但是这个问题文件没有。好像又回到了原来的版本。

现在，我可以回到我修改后的版本，还是一切都消失了？这是一个测试应用程序，所以虽然不是很重要，但我真的不想失去它:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:53:54.360

只是在这里给出一个答案，因为我讨厌留下没有答案的东西。Dropbox 对我的问题进行了分类，因为我有所有内容的备份副本，但我还没有找出问题所在。我现在正在使用 Dropbox 和 GIT 存储库的组合来保存内容。

# json - 请求内容加密的 WCF JSON 服务

> ID：10460990
> 
> 赞同：0
> 
> 时间：2012-05-05T10:32:39.803
> 
> 标签：json, wcf

Json WCF 服务方法如下所示：

```
getFoo(MyDataType data){ ... 
```

WCF 会自动转换如下所示的 HTTP 请求：

```
 randomGuy{
       name:'John',
       age:18
    } 
```

进入 C# 定义的类型

```
MyDataType{
    string name {get;set;}
    int age {get;set;}
} 
```

但是如果我加密请求内容，而不是接收看起来像的请求

> randomGuy{ name:'John', age:18 } 我会收到 wceweuicn23cb38v934vb398v03c264vb834gv3v7b3vb3647v34vb3v83vh38v43vhv3hv

在 WCF 将 JSON 对象转换为 .net 定义的类型 MyDataType 之前，有什么方法可以先将请求内容解密为 randomGuy{ name:'John', age:18 }？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:26:24.050

对我来说，你有大约 2 个选择：

*   选项 1：使用 SSL 进行连接，以保护消息。
*   选项 2：拦截消息

总之，我相信您正在寻找的答案类似于 IClientMessageInspector，它允许您在 WCF 客户端上操作消息并在必要时拦截它们。这篇文章应该有所解释 -[在此处输入链接描述](http://msdn.microsoft.com/en-us/library/ms730107.aspx "扩展客户")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:27:55.190

在这种情况下，看起来[IDispatchMessageInspector](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageinspector.aspx)或[IDispatchMessageFormatter可能会对您有所帮助。](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageformatter.aspx)通常检查[System.ServiceModel.Dispatcher](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.aspx)命名空间 - 还有其他有用的工作人员。

IDispatchMessageInspector 的想法是，您可以在传入消息从 JSON 转换为 .NET 对象之前更改（在您的情况下解密）传入消息。

# mysql - SQL：选择列的每个单独值的总和

> ID：10460992
> 
> 赞同：0
> 
> 时间：2012-05-05T10:32:47.633
> 
> 标签：mysql, sql, select

有一列可以有多个值。我想选择每个不同值在整个集合中出现的次数。我觉得可能有一个明显的解决方案，但它让我望而却步。我将显示输入和预期输出，希望它足够明显，您会理解。

这是示例数据：

```
|-------|
| class |
|-------|
| 5     |
| 5     |
| 12    |
| 4     |
| 12    |
|-------| 
```

这是我想要得到的输出：

```
|-------|-------|
| class | count |
|-------|-------|
| 5     | 2     |
| 12    | 2     |
| 4     | 1     |
|-------|-------| 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T10:35:10.980

```
SELECT CLASS, COUNT (*)
FROM MYTABLE
GROUP BY CLASS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:34:23.620

```
select class, count(1)
from table
group by class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:44:41.140

请试试这个

```
SELECT class , count( class ) AS COUNT FROM `tble` GROUP BY class 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T11:33:16.683

将计数设为列

```
select class, count(1) as Count
from table
group by class 
```

# asp.net-mvc - View 渲染时如何在 using 块中捕获内容

> ID：10460993
> 
> 赞同：2
> 
> 时间：2012-05-05T10:32:52.443
> 
> 标签：asp.net-mvc

我正在使用带有 ASPX 视图引擎的 ASP.NET MVC 3.0。

我目前有一种方法，它使用正则表达式来匹配文本中的某些单词并相应地突出显示它们。到目前为止，我正在使用它来处理从平面文件中读取的大量文本。我在这篇文章中试图实现的最终目标是能够捕获视图的内容部分，并使用相同的方法处理它们。

这是我目前正在尝试实现此目标的基本示例：

```
<h2>This is a Test</h2>

<p>Line before capture</p>

<% using (Html.CaptureContent())
   { %>

<p>this line should be in capitals</p>

 <%} %>
<p>Line after capture</p> 
```

Html.CaptureContent：

```
public static ContentCapture CaptureContent(this HtmlHelper html)
{
    return new ContentCapture(html.ViewContext.HttpContext);
} 
```

内容捕获：

```
public class ContentCapture : IDisposable
{
    private HttpContextBase Context { get; set; }
    private TextWriter OriginalOutput { get; set; }
    private StringWriter CaptureOutput { get; set; }

    public ContentCapture(HttpContextBase context)
    {

        CaptureOutput = new StringWriter();

        //save the default writer in private property
        OriginalOutput = context.Response.Output;
        Context = context;

        Context.Response.Output = CaptureOutput;
    }

    public void Dispose()
    {
        string processedContent = CaptureOutput.ToString().ToUpper();

        Context.Response.Output = OriginalOutput;
        Context.Response.Output.Write(processedContent);
    }
} 
```

当我运行它时，输出与视图中的标签完全相同，没有对 using 块中的 <p> 标签应用任何处理。我尝试了几种变体，但没有成功。我猜我对如何呈现视图做出了错误的假设，因为在 dispose 方法中放置了一个断点，这表明我没有向 StringWriter 对象写入任何内容。

有谁知道我可以达到预期效果的方法？我不希望求助于帮助器返回硬编码字符串中的所有内容部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T07:01:09.390

您需要像这样写入 ViewContext：

```
htmlHelper.ViewContext.Writer.Write("some content"); 
```

因此，您必须进行一些重构才能使用它而不是您当前正在传递的 HttpContext。

# jquery - jquery删除标签'x'内但标签'y'之前的内容

> ID：10460996
> 
> 赞同：1
> 
> 时间：2012-05-05T10:33:03.217
> 
> 标签：jquery

我正在寻找一个命令来清除表单中内容的开头

但我想保留最后一个元素（即一些按钮（标签 a）

```
$('#Detail form').not('a').html(''); 
```

不管用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:34:32.443

您需要选择 的子级`form`，然后`a`从集合中删除元素：

```
$('#Detail form').children().not('a').remove(); 
```

请注意，我使用了，它实际上会从 DOM`remove`中删除任何不是元素的元素。`a`如果您不希望这样，那么您可以将调用替换为调用`remove`，`html`这将简单地从这些元素中删除所有内容。

您当前的代码将选择`form`其后代的所有元素，`#Detail`然后尝试`a`从集合中删除所有元素。由于您只选择`form`了元素，因此显然不会有任何`a`要删除的元素！